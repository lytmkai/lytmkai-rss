<?xml version="1.0" encoding="UTF-8"?><rss version="2.0">  <channel>      <title>æ˜é‡‘æ–‡ç« æ¨è</title>      <link>https://juejin.cn/recommended?sort=newest</link>      <description>ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…æˆé•¿çš„ç¤¾åŒº</description>      <generator>python juejin_recom.py @Pi20</generator>      <item>    <title><![CDATA[Visual Studio Code 1.109 ç‰ˆæœ¬æ›´æ–°æ€»ç»“ï¼ˆæ€»è§ˆï¼‰]]></title>    <link>https://juejin.cn/post/7605114266024460339</link>    <guid>https://juejin.cn/post/7605114266024460339</guid>    <pubDate>2026-02-11T07:44:26.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605114266024460339" data-draft-id="7605135197166633010" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Visual Studio Code 1.109 ç‰ˆæœ¬æ›´æ–°æ€»ç»“ï¼ˆæ€»è§ˆï¼‰"/> <meta itemprop="keywords" content="Visual Studio Code"/> <meta itemprop="datePublished" content="2026-02-11T07:44:26.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸€åªåæœ¨Meow"/> <meta itemprop="url" content="https://juejin.cn/user/231371762837604"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Visual Studio Code 1.109 ç‰ˆæœ¬æ›´æ–°æ€»ç»“ï¼ˆæ€»è§ˆï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/231371762837604/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸€åªåæœ¨Meow
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-11T07:44:26.000Z" title="Wed Feb 11 2026 07:44:26 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    6
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>ğŸ’¡ æ›´å¤šæŠ€æœ¯åˆ†äº«ï¼Œæ¬¢è¿è®¿é—®æˆ‘çš„åšå®¢ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fsanmu7.com%2F" target="_blank" title="https://sanmu7.com/" ref="nofollow noopener noreferrer">åæœ¨ã®å°å±‹</a></p>
</blockquote>
<blockquote>
<p><strong>å‘å¸ƒæ—¥æœŸ</strong>ï¼š2026å¹´2æœˆ4æ—¥</p>
<p><strong>ä¸»é¢˜</strong>ï¼šå¤šæ™ºèƒ½ä½“å¼€å‘çš„å®¶å›­ï¼ˆHome for Multi-Agent Developmentï¼‰</p>
</blockquote>
<hr/>
<h2 data-id="heading-0">ä¸€å¥è¯æ€»ç»“</h2>
<p>VS Code 1.109 æ˜¯ä¸€ä¸ªé‡Œç¨‹ç¢‘ç‰ˆæœ¬ï¼Œæ ‡å¿—ç€ VS Code æ¼”è¿›ä¸º<strong>ç»Ÿä¸€çš„å¤šæ™ºèƒ½ä½“å¼€å‘å¹³å°</strong>ï¼Œæ ¸å¿ƒå›´ç»• AI æ™ºèƒ½ä½“çš„å…¨ç”Ÿå‘½å‘¨æœŸç®¡ç†å±•å¼€ã€‚</p>
<hr/>
<h2 data-id="heading-1">æ ¸å¿ƒæ›´æ–°é€Ÿè§ˆè¡¨</h2>

































































<table><thead><tr><th>ç±»åˆ«</th><th>æ ¸å¿ƒæ›´æ–°</th><th>å…³é”®äº®ç‚¹</th></tr></thead><tbody><tr><td><strong>èŠå¤©ä½“éªŒ</strong></td><td>Anthropic æ€ç»´ä»¤ç‰Œã€Mermaid å›¾è¡¨ã€Plan Agent</td><td>å››é˜¶æ®µå·¥ä½œæµã€<code>/plan</code> å¿«æ·å‘½ä»¤</td></tr><tr><td><strong>ä¼šè¯ç®¡ç†</strong></td><td>æ™ºèƒ½ä½“ç±»å‹åˆ‡æ¢ã€å­æ™ºèƒ½ä½“å¹¶è¡Œè¿è¡Œ</td><td>æœ¬åœ°/åå°/äº‘ç«¯ç»Ÿä¸€è§†å›¾ã€çŠ¶æ€æŒ‡ç¤ºå™¨</td></tr><tr><td><strong>æ™ºèƒ½ä½“å®šåˆ¶</strong></td><td><code>/init</code> å‘½ä»¤ã€Agent Skills æ­£å¼å‘å¸ƒ</td><td>ç»„ç»‡çº§è¯´æ˜ã€æŠ€èƒ½æ–‡ä»¶å¤¹ç®¡ç†</td></tr><tr><td><strong>æ‰©å±•æ€§</strong></td><td>Claude Agent æ”¯æŒã€æ™ºèƒ½ä½“ç¼–æ’</td><td>MCP Appsã€Anthropic Messages API</td></tr><tr><td><strong>ä¼˜åŒ–</strong></td><td>Copilot Memoryã€å¤–éƒ¨ç´¢å¼•</td><td>é GitHub å·¥ä½œåŒºè¿œç¨‹ç´¢å¼•ã€å¹¶è¡Œä¾èµ–ä»»åŠ¡</td></tr><tr><td><strong>å®‰å…¨</strong></td><td>ç»ˆç«¯æ²™ç›’ã€è‡ªåŠ¨å®¡æ‰¹è§„åˆ™</td><td>æ–‡ä»¶/ç½‘ç»œè®¿é—®é™åˆ¶ã€å®‰å…¨å‘½ä»¤ç™½åå•</td></tr><tr><td><strong>ç»ˆç«¯</strong></td><td>Kitty é”®ç›˜åè®®ã€ç²˜æ€§æ»šåŠ¨</td><td>é€‰æ‹©æ€§å¿½ç•¥å‘½ä»¤ã€ç§»é™¤ winpty</td></tr><tr><td><strong>ç¼–è¾‘å™¨</strong></td><td>æ‹¬å·åŒ¹é…é¢œè‰²ã€åŒå‡»é€‰æ‹©</td><td>å¹½çµæ–‡æœ¬è™šçº¿ä¸‹åˆ’çº¿ã€shebang æ£€æµ‹</td></tr><tr><td><strong>å·¥ä½œå°</strong></td><td>é›†æˆæµè§ˆå™¨ï¼ˆé¢„è§ˆï¼‰</td><td>æŒä¹…åŒ–å­˜å‚¨ã€å®Œæ•´ DevToolsã€å…ƒç´ å‘é€åˆ°èŠå¤©</td></tr><tr><td><strong>API</strong></td><td>Quick Input æŒ‰é’®ä½ç½® APIã€Chat é…ç½®</td><td>æ¨¡å‹æä¾›ç¨‹åºé…ç½®æ¶æ„ã€æç¤ºæ–‡ä»¶ API</td></tr><tr><td><strong>å·¥ç¨‹</strong></td><td>macOS DMGã€Windows å®‰è£…å¸ƒå±€é‡è®¾è®¡</td><td>Copilot æ‰©å±•å¼ƒç”¨ã€codicons npm åŒ…</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-2">åˆ†ç¯‡é˜…è¯»æŒ‡å—</h2>
<p>æœ¬ç³»åˆ—å…±åˆ†ä¸º 5 ç¯‡ï¼Œæ¶µç›– VS Code 1.109 çš„æ‰€æœ‰æ›´æ–°å†…å®¹ï¼š</p>



































<table><thead><tr><th>ç¯‡ç›®</th><th>åœ°å€</th><th>å†…å®¹æ¦‚è§ˆ</th></tr></thead><tbody><tr><td><strong>ç¬¬ä¸€ç¯‡</strong></td><td><a href="https://juejin.cn/post/7605135197166731314" target="_blank" title="https://juejin.cn/post/7605135197166731314">VS Code 1.109 æ›´æ–°è§£è¯»ï¼ˆä¸€ï¼‰ï¼šèŠå¤©ä½“éªŒä¸ä¼šè¯ç®¡ç†</a></td><td>èŠå¤© UXã€æ™ºèƒ½ä½“ä¼šè¯ç®¡ç†</td></tr><tr><td><strong>ç¬¬äºŒç¯‡</strong></td><td><a href="https://juejin.cn/post/7605135197166747698" target="_blank" title="https://juejin.cn/post/7605135197166747698">VS Code 1.109 æ›´æ–°è§£è¯»ï¼ˆäºŒï¼‰ï¼šæ™ºèƒ½ä½“å®šåˆ¶ä¸æ‰©å±•æ€§</a></td><td>æ™ºèƒ½ä½“å®šåˆ¶ã€æ‰©å±•æ€§ã€ç¼–æ’</td></tr><tr><td><strong>ç¬¬ä¸‰ç¯‡</strong></td><td><a href="https://juejin.cn/post/7605401415855259698" target="_blank" title="https://juejin.cn/post/7605401415855259698">VS Code 1.109 æ›´æ–°è§£è¯»ï¼ˆä¸‰ï¼‰ï¼šæ™ºèƒ½ä½“ä¼˜åŒ–ä¸å®‰å…¨</a></td><td>Copilot Memoryã€ç»ˆç«¯æ²™ç›’ã€å®‰å…¨ä¸ä¿¡ä»»</td></tr><tr><td><strong>ç¬¬å››ç¯‡</strong></td><td><a href="https://juejin.cn/post/7605173538417442826" target="_blank" title="https://juejin.cn/post/7605173538417442826">VS Code 1.109 æ›´æ–°è§£è¯»ï¼ˆå››ï¼‰ï¼šç»ˆç«¯ã€ç¼–è¾‘å™¨ä¸å·¥ä½œå°</a></td><td>ç»ˆç«¯å¢å¼ºã€ç¼–ç ä¸ç¼–è¾‘å™¨ã€å·¥ä½œå°ç”Ÿäº§åŠ›</td></tr><tr><td><strong>ç¬¬äº”ç¯‡</strong></td><td><a href="https://juejin.cn/post/7605157203591282715" target="_blank" title="https://juejin.cn/post/7605157203591282715">VS Code 1.109 æ›´æ–°è§£è¯»ï¼ˆäº”ï¼‰ï¼šAPI ä¸å·¥ç¨‹æ”¹è¿›</a></td><td>æ‰©å±• APIã€å·¥ç¨‹æ”¹è¿›ã€å€¼å¾—æ³¨æ„çš„ä¿®å¤</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-3">ç²¾ç®€åˆ†é¡¹æ€»ç»“</h2>
<h3 data-id="heading-4">ä¸€ã€èŠå¤©ä½“éªŒï¼ˆChat UXï¼‰</h3>





































<table><thead><tr><th>åŠŸèƒ½</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>Anthropic æ€ç»´ä»¤ç‰Œ</td><td>æ˜¾ç¤ºæ¨¡å‹æ¨ç†è¿‡ç¨‹ï¼Œæ”¯æŒè¯¦ç»†/ç´§å‡‘ä¸¤ç§é£æ ¼</td></tr><tr><td>Mermaid å›¾è¡¨</td><td>èŠå¤©ä¸­æ¸²æŸ“äº¤äº’å¼æµç¨‹å›¾ã€åºåˆ—å›¾</td></tr><tr><td>æé—®å·¥å…·</td><td>Agent å¯ä¸»åŠ¨æå‡ºæ¾„æ¸…é—®é¢˜</td></tr><tr><td>Plan Agent</td><td>å››é˜¶æ®µå·¥ä½œæµï¼šå‘ç°â†’å¯¹é½â†’è®¾è®¡â†’å®Œå–„</td></tr><tr><td>ä¸Šä¸‹æ–‡çª—å£æŒ‡ç¤ºå™¨</td><td>å®æ—¶æ˜¾ç¤ºä»¤ç‰Œä½¿ç”¨æƒ…å†µ</td></tr><tr><td>ç»ˆç«¯å‘½ä»¤è¾“å‡ºå¢å¼º</td><td>è¯­æ³•é«˜äº®ã€å·¥ä½œç›®å½•ã€æµå¼è¾“å‡º</td></tr><tr><td>æ–°ä¸»é¢˜å®éªŒ</td><td>VS Code Light/Dark å®éªŒæ€§ä¸»é¢˜</td></tr></tbody></table>
<h3 data-id="heading-5">äºŒã€æ™ºèƒ½ä½“ä¼šè¯ç®¡ç†</h3>

































<table><thead><tr><th>åŠŸèƒ½</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>ç±»å‹åˆ‡æ¢å™¨</td><td>æœ¬åœ°/åå°/äº‘ç«¯æ™ºèƒ½ä½“ä¸€é”®åˆ‡æ¢</td></tr><tr><td>çŠ¶æ€æŒ‡ç¤ºå™¨</td><td>æ˜¾ç¤ºè¿›è¡Œä¸­/æœªè¯»/éœ€å…³æ³¨çš„ä¼šè¯</td></tr><tr><td>å­æ™ºèƒ½ä½“å¹¶è¡Œ</td><td>æ˜¾è‘—åŠ å¿«å¤šä»»åŠ¡å¤„ç†é€Ÿåº¦</td></tr><tr><td>æœç´¢å­æ™ºèƒ½ä½“</td><td>éš”ç¦»å¾ªç¯ä¸­è¿­ä»£ä¼˜åŒ–æœç´¢</td></tr><tr><td>äº‘æ™ºèƒ½ä½“</td><td>æ”¯æŒæ¨¡å‹é€‰æ‹©ã€ç¬¬ä¸‰æ–¹æ™ºèƒ½ä½“</td></tr><tr><td>åå°æ™ºèƒ½ä½“</td><td>æ¯è½®è‡ªåŠ¨æäº¤ã€æ”¯æŒé™„åŠ å›¾ç‰‡</td></tr></tbody></table>
<h3 data-id="heading-6">ä¸‰ã€æ™ºèƒ½ä½“å®šåˆ¶</h3>

































<table><thead><tr><th>åŠŸèƒ½</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>/init</code> å‘½ä»¤</td><td>æ ¹æ®ä»£ç åº“è‡ªåŠ¨ç”Ÿæˆå·¥ä½œåŒºè¯´æ˜</td></tr><tr><td>Agent Skills</td><td>æ­£å¼å‘å¸ƒï¼Œé»˜è®¤å¯ç”¨</td></tr><tr><td>ç»„ç»‡çº§è¯´æ˜</td><td>GitHub ç»„ç»‡èŒƒå›´çš„è‡ªå®šä¹‰æŒ‡å¯¼</td></tr><tr><td>è°ƒç”¨æ§åˆ¶</td><td><code>user-invokable</code>ã€<code>disable-model-invocation</code> ç­‰å±æ€§</td></tr><tr><td>å¤šæ¨¡å‹æ”¯æŒ</td><td>æŒ‡å®šå¤šä¸ªæ¨¡å‹ä½œä¸ºå›é€€é€‰é¡¹</td></tr><tr><td>å®šåˆ¶è¯Šæ–­</td><td>å³é”®æŸ¥çœ‹æ‰€æœ‰åŠ è½½çš„å®šåˆ¶æ–‡ä»¶çŠ¶æ€</td></tr></tbody></table>
<h3 data-id="heading-7">å››ã€æ™ºèƒ½ä½“æ‰©å±•æ€§</h3>





























<table><thead><tr><th>åŠŸèƒ½</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>æ™ºèƒ½ä½“ç¼–æ’</td><td>å¤šä¸ªä¸“ä¸šæ™ºèƒ½ä½“åä½œå®Œæˆå¤æ‚ä»»åŠ¡</td></tr><tr><td>Claude Agent</td><td>ä½¿ç”¨ Anthropic å®˜æ–¹ SDKï¼Œé¢„è§ˆä¸­</td></tr><tr><td>Anthropic å¢å¼º</td><td>Messages API äº¤é”™æ€è€ƒã€å·¥å…·æœç´¢</td></tr><tr><td>MCP Apps</td><td>æœåŠ¡å™¨æ˜¾ç¤ºä¸°å¯Œäº¤äº’å¼ UI</td></tr><tr><td>è‡ªå®šä¹‰æ³¨å†Œè¡¨</td><td>æ”¯æŒç§æœ‰/æ›¿ä»£åŒ…æ³¨å†Œè¡¨</td></tr></tbody></table>
<h3 data-id="heading-8">äº”ã€æ™ºèƒ½ä½“ä¼˜åŒ–</h3>

























<table><thead><tr><th>åŠŸèƒ½</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>Copilot Memory</td><td>è·¨ä¼šè¯å­˜å‚¨å’Œæ£€ç´¢é‡è¦ä¿¡æ¯</td></tr><tr><td>å¤–éƒ¨ç´¢å¼•</td><td>é GitHub å·¥ä½œåŒºè¿œç¨‹è¯­ä¹‰ç´¢å¼•</td></tr><tr><td>è¯»å–å·¥ä½œåŒºå¤–æ–‡ä»¶</td><td>è·å¾—è®¸å¯åå¯è®¿é—®å¤–éƒ¨æ–‡ä»¶</td></tr><tr><td>æ€§èƒ½æ”¹è¿›</td><td>å¤§å‹èŠå¤©æ›´æµç•…ã€å¹¶è¡Œä¾èµ–ä»»åŠ¡å¤„ç†</td></tr></tbody></table>
<h3 data-id="heading-9">å…­ã€æ™ºèƒ½ä½“å®‰å…¨ä¸ä¿¡ä»»</h3>





















<table><thead><tr><th>åŠŸèƒ½</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>ç»ˆç«¯æ²™ç›’</td><td>é™åˆ¶æ–‡ä»¶ç³»ç»Ÿ/ç½‘ç»œè®¿é—®ï¼ˆmacOS/Linuxï¼‰</td></tr><tr><td>ç»ˆç«¯ç”Ÿå‘½å‘¨æœŸ</td><td><code>timeout</code>ã€<code>awaitTerminal</code>ã€<code>killTerminal</code> å·¥å…·</td></tr><tr><td>è‡ªåŠ¨å®¡æ‰¹</td><td>å®‰å…¨å‘½ä»¤å¦‚ <code>npm</code>ã€<code>docker</code> è‡ªåŠ¨å®¡æ‰¹</td></tr></tbody></table>
<h3 data-id="heading-10">ä¸ƒã€ç»ˆç«¯å¢å¼º</h3>

























<table><thead><tr><th>åŠŸèƒ½</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>é€‰æ‹©æ€§å¿½ç•¥ç²˜æ€§æ»šåŠ¨</td><td>å¯è‡ªå®šä¹‰å¿½ç•¥çš„å‘½ä»¤åˆ—è¡¨</td></tr><tr><td>ç§»é™¤ winpty</td><td>ä¸å†æ”¯æŒ Win10 1809 ä¹‹å‰ç‰ˆæœ¬</td></tr><tr><td>Kitty é”®ç›˜åè®®</td><td>ä¿®å¤å‡»é”®ç¼–ç é™åˆ¶ï¼Œå®éªŒæ€§</td></tr><tr><td>Win32 è¾“å…¥æ¨¡å¼</td><td>é’ˆå¯¹ Windows å’Œ ConPTY ä¼˜åŒ–ï¼Œå®éªŒæ€§</td></tr></tbody></table>
<h3 data-id="heading-11">å…«ã€ç¼–ç ä¸ç¼–è¾‘å™¨</h3>

































<table><thead><tr><th>åŠŸèƒ½</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>æ‹¬å·åŒ¹é…å‰æ™¯è‰²</td><td>å¯è‡ªå®šä¹‰åŒ¹é…æ‹¬å·çš„æ–‡æœ¬é¢œè‰²</td></tr><tr><td>åŒå‡»é€‰æ‹©å†…å®¹</td><td>æ‹¬å·æˆ–å­—ç¬¦ä¸²å†…å®¹å¿«é€Ÿé€‰æ‹©</td></tr><tr><td>TypeScript é‡å‘½åå»ºè®®</td><td>è¾“å…¥è¦†ç›–æ—¶ä¹Ÿèƒ½è§¦å‘é‡å‘½åå»ºè®®</td></tr><tr><td>å¹½çµæ–‡æœ¬å¯è§æ€§</td><td>çŸ­å»ºè®®æ˜¾ç¤ºè™šçº¿ä¸‹åˆ’çº¿</td></tr><tr><td>ä»£ç æ®µæ–‡ä»¶æ¨¡å¼</td><td><code>include</code>/<code>exclude</code> æ§åˆ¶å‡ºç°èŒƒå›´</td></tr><tr><td>shebang æ£€æµ‹</td><td>æ”¹è¿› <code>/usr/bin/env</code> æ”¯æŒ</td></tr></tbody></table>
<h3 data-id="heading-12">ä¹ã€å·¥ä½œå°ä¸ç”Ÿäº§åŠ›</h3>

































<table><thead><tr><th>åŠŸèƒ½</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>é›†æˆæµè§ˆå™¨ï¼ˆé¢„è§ˆï¼‰</td><td>å®Œæ•´æµè§ˆå™¨ä½“éªŒï¼Œæ”¯æŒ DevTools</td></tr><tr><td>æ¢å¤ç¼–è¾‘å™¨æ§åˆ¶</td><td>å¯é€‰æ‹©æ˜¯å¦æ¢å¤ä¸Šæ¬¡æ‰“å¼€çš„ç¼–è¾‘å™¨</td></tr><tr><td>é«˜çº§è®¾ç½®</td><td>å§‹ç»ˆæ˜¾ç¤ºé«˜çº§è®¾ç½®é€‰é¡¹</td></tr><tr><td>æ‹–æ”¾å¯¼å…¥é…ç½®æ–‡ä»¶</td><td><code>.code-profile</code> æ–‡ä»¶æ‹–æ”¾å¯¼å…¥</td></tr><tr><td>é—®é¢˜è¿‡æ»¤</td><td>æŒ‰æ¥æºè¿‡æ»¤è¯Šæ–­ä¿¡æ¯</td></tr><tr><td>æ— éšœç¢æ”¹è¿›</td><td>å±å¹•é˜…è¯»å™¨æ”¯æŒå¢å¼º</td></tr></tbody></table>
<h3 data-id="heading-13">åã€æ‰©å±•ä¸ API</h3>





























<table><thead><tr><th>åŠŸèƒ½</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>Quick Input æŒ‰é’®</td><td>ä½ç½® APIã€åˆ‡æ¢ API æ­£å¼ç¡®å®š</td></tr><tr><td>Chat Model Provider</td><td>é…ç½®æ¶æ„å£°æ˜ API</td></tr><tr><td>Chat Prompt Files</td><td>åŠ¨æ€èŠå¤©èµ„æºæä¾› API</td></tr><tr><td>Chat Item Controller</td><td>æ–°çš„åŸºäºæ§åˆ¶å™¨çš„ API</td></tr><tr><td>Portable Mode æ£€æµ‹</td><td><code>env.isAppPortable</code> å±æ€§</td></tr></tbody></table>
<h3 data-id="heading-14">åä¸€ã€å·¥ç¨‹æ”¹è¿›</h3>





























<table><thead><tr><th>åŠŸèƒ½</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>macOS DMG é•œåƒ</td><td>åŸç”Ÿæ‹–æ”¾å®‰è£…ä½“éªŒ</td></tr><tr><td>Windows å®‰è£…é‡è®¾è®¡</td><td>ç‰ˆæœ¬åŒ–åŒ…è·¯å¾„ï¼Œæé«˜æ›´æ–°å¯é æ€§</td></tr><tr><td>é¿å…è¿ç»­æ›´æ–°</td><td>ä½¿æ—§æ›´æ–°æ— æ•ˆï¼Œåº”ç”¨æ–°æ›´æ–°</td></tr><tr><td>Copilot æ‰©å±•å¼ƒç”¨</td><td>åŠŸèƒ½æ•´åˆåˆ° Copilot Chat æ‰©å±•</td></tr><tr><td>codicons npm åŒ…</td><td>ä» <code>@vscode/codicons</code> åŒ…æ¶ˆè´¹</td></tr></tbody></table></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Repo æ’¤é”€å½“å‰ä¿®æ”¹]]></title>    <link>https://juejin.cn/post/7605114376803729448</link>    <guid>https://juejin.cn/post/7605114376803729448</guid>    <pubDate>2026-02-11T07:51:42.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605114376803729448" data-draft-id="7605114376803713064" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Repo æ’¤é”€å½“å‰ä¿®æ”¹"/> <meta itemprop="keywords" content="C++,Android"/> <meta itemprop="datePublished" content="2026-02-11T07:51:42.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="sTone87375"/> <meta itemprop="url" content="https://juejin.cn/user/2946346894764584"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Repo æ’¤é”€å½“å‰ä¿®æ”¹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2946346894764584/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    sTone87375
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-11T07:51:42.000Z" title="Wed Feb 11 2026 07:51:42 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    5
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><code>repo</code> æä¾›äº†å¿«é€Ÿæ’¤é”€æ‰€æœ‰ä»“åº“ä¿®æ”¹çš„å‘½ä»¤ï¼Œä»¥ä¸‹æ˜¯å‡ ç§å¸¸ç”¨æ–¹å¼ï¼š</p>
<hr/>
<h2 data-id="heading-0">ä¸€é”®æ’¤é”€æ‰€æœ‰ä¿®æ”¹</h2>
<h3 data-id="heading-1">æ–¹å¼ä¸€ï¼šæœ€å¸¸ç”¨ï¼ˆæ¨èï¼‰</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ’¤é”€æ‰€æœ‰ä»“åº“çš„æ‰€æœ‰ä¿®æ”¹ï¼ˆåŒ…æ‹¬æš‚å­˜åŒºå’Œå·¥ä½œåŒºï¼‰</span>
repo forall -c <span class="hljs-string">'git reset --hard HEAD &amp;&amp; git clean -fdx'</span>
</code></pre>





















<table><thead><tr><th>å‘½ä»¤</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td><code>repo forall</code></td><td>å¯¹æ‰€æœ‰ä»“åº“æ‰§è¡Œå‘½ä»¤</td></tr><tr><td><code>git reset --hard HEAD</code></td><td>å¼ºåˆ¶å›é€€åˆ°æœ€æ–°æäº¤ï¼Œä¸¢å¼ƒæ‰€æœ‰ä¿®æ”¹</td></tr><tr><td><code>git clean -fdx</code></td><td>åˆ é™¤æ‰€æœ‰æœªè·Ÿè¸ªçš„æ–‡ä»¶å’Œç›®å½•</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-2">æ–¹å¼äºŒï¼šåˆ†æ­¥æ‰§è¡Œï¼ˆæ›´å®‰å…¨ï¼Œå¯å…ˆæ£€æŸ¥ï¼‰</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1. å…ˆæŸ¥çœ‹å“ªäº›ä»“åº“æœ‰ä¿®æ”¹</span>
repo status

<span class="hljs-comment"># 2. åªæ’¤é”€ç‰¹å®šä»“åº“ï¼ˆç¤ºä¾‹ï¼šframeworks/baseï¼‰</span>
repo forall frameworks/base -c <span class="hljs-string">'git reset --hard HEAD'</span>

<span class="hljs-comment"># 3. æ’¤é”€æ‰€æœ‰ä»“åº“</span>
repo forall -c <span class="hljs-string">'git reset --hard HEAD'</span>
repo forall -c <span class="hljs-string">'git clean -fdx'</span>
</code></pre>
<hr/>
<h3 data-id="heading-3">æ–¹å¼ä¸‰ï¼šä¿ç•™æœªè·Ÿè¸ªæ–‡ä»¶ï¼ˆä»…æ’¤é”€ä¿®æ”¹ï¼‰</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åªæ’¤é”€è·Ÿè¸ªæ–‡ä»¶çš„ä¿®æ”¹ï¼Œä¿ç•™æ–°å»ºçš„æ–‡ä»¶</span>
repo forall -c <span class="hljs-string">'git checkout -- .'</span>
</code></pre>
<hr/>
<h2 data-id="heading-4">å¯¹æ¯”ï¼šä¸åŒæ¸…ç†å¼ºåº¦</h2>






























<table><thead><tr><th>å‘½ä»¤</th><th>æ•ˆæœ</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td><code>git checkout -- .</code></td><td>æ’¤é”€è·Ÿè¸ªæ–‡ä»¶çš„ä¿®æ”¹</td><td>ä¿ç•™æ–°æ–‡ä»¶ï¼Œåªæ¢å¤æ—§æ–‡ä»¶</td></tr><tr><td><code>git reset --hard HEAD</code></td><td>å›é€€åˆ° HEADï¼Œä¸¢å¼ƒæ‰€æœ‰æäº¤</td><td>å½»åº•å›é€€åˆ°æœ€æ–°æäº¤</td></tr><tr><td><code>git clean -fd</code></td><td>åˆ é™¤æœªè·Ÿè¸ªçš„æ–‡ä»¶/ç›®å½•</td><td>æ¸…ç†ç¼–è¯‘ç”Ÿæˆçš„æ–‡ä»¶</td></tr><tr><td><code>git clean -fdx</code></td><td>åˆ é™¤æœªè·Ÿè¸ªæ–‡ä»¶ + å¿½ç•¥çš„æ–‡ä»¶</td><td><strong>æœ€å½»åº•æ¸…ç†</strong>ï¼ˆæ¨èï¼‰</td></tr></tbody></table>
<blockquote>
<p><code>-f</code> = å¼ºåˆ¶ï¼Œ<code>-d</code> = åŒ…å«ç›®å½•ï¼Œ<code>-x</code> = åŒ…å« <code>.gitignore</code> å¿½ç•¥çš„æ–‡ä»¶</p>
</blockquote>
<hr/>
<h2 data-id="heading-5">å¸¸ç”¨ç»„åˆå‘½ä»¤</h2>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å®Œæ•´æ¸…ç†ï¼ˆæœ€å¸¸ç”¨ï¼‰</span>
repo forall -c <span class="hljs-string">'git reset --hard HEAD &amp;&amp; git clean -fdx'</span>

<span class="hljs-comment"># ç®€å†™å½¢å¼</span>
repo forall -c <span class="hljs-string">'git reset --hard &amp;&amp; git clean -fdx'</span>

<span class="hljs-comment"># æ¸…ç†åé‡æ–°åŒæ­¥</span>
repo forall -c <span class="hljs-string">'git reset --hard HEAD &amp;&amp; git clean -fdx'</span> &amp;&amp; repo <span class="hljs-built_in">sync</span> -c
</code></pre>
<hr/>
<h2 data-id="heading-6">æ³¨æ„äº‹é¡¹</h2>





















<table><thead><tr><th>âš ï¸ è­¦å‘Š</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>ä¸å¯æ¢å¤</strong></td><td><code>reset --hard</code> å’Œ <code>clean -fdx</code> åˆ é™¤çš„æ–‡ä»¶<strong>æ— æ³•æ‰¾å›</strong></td></tr><tr><td><strong>å…ˆå¤‡ä»½</strong></td><td>å¦‚æœ‰é‡è¦ä¿®æ”¹ï¼Œå…ˆ <code>repo diff</code> å¯¼å‡ºè¡¥ä¸</td></tr><tr><td><strong>å­æ¨¡å—</strong></td><td>å¦‚éœ€æ¸…ç†å­æ¨¡å—ï¼ŒåŠ  <code>--recursive</code></td></tr></tbody></table>
<hr/>
<h2 data-id="heading-7">å¯¼å‡ºä¿®æ”¹ï¼ˆæ¸…ç†å‰å¤‡ä»½ï¼‰</h2>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å¯¼å‡ºæ‰€æœ‰ä¿®æ”¹åˆ°è¡¥ä¸æ–‡ä»¶</span>
repo diff &gt; my_changes.patch

<span class="hljs-comment"># ä¹‹åå¯ä»¥é‡æ–°åº”ç”¨</span>
git apply my_changes.patch
</code></pre>
<hr/>
<p><strong>æ€»ç»“</strong>ï¼šæ—¥å¸¸å¼€å‘æœ€å¸¸ç”¨çš„æ˜¯ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">repo forall -c <span class="hljs-string">'git reset --hard HEAD &amp;&amp; git clean -fdx'</span>
</code></pre>
<p>ä¸€é”®å›åˆ°å¹²å‡€çŠ¶æ€ï¼Œç„¶åé‡æ–° <code>repo sync</code>ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€Œ2025 å¹´ç»ˆæ€»ç»“ã€åœ¨æ‰€æœ‰å¤±å»çš„äººä¸­ï¼Œæˆ‘æœ€æ€€å¿µæˆ‘è‡ªå·±]]></title>    <link>https://juejin.cn/post/7605174711181410367</link>    <guid>https://juejin.cn/post/7605174711181410367</guid>    <pubDate>2026-02-11T08:03:24.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605174711181410367" data-draft-id="7605142381152747583" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€Œ2025 å¹´ç»ˆæ€»ç»“ã€åœ¨æ‰€æœ‰å¤±å»çš„äººä¸­ï¼Œæˆ‘æœ€æ€€å¿µæˆ‘è‡ªå·±"/> <meta itemprop="keywords" content="åç«¯,å‰ç«¯,å¹´ç»ˆæ€»ç»“"/> <meta itemprop="datePublished" content="2026-02-11T08:03:24.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Coredump"/> <meta itemprop="url" content="https://juejin.cn/user/1654082381026734"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€Œ2025 å¹´ç»ˆæ€»ç»“ã€åœ¨æ‰€æœ‰å¤±å»çš„äººä¸­ï¼Œæˆ‘æœ€æ€€å¿µæˆ‘è‡ªå·±
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1654082381026734/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Coredump
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-11T08:03:24.000Z" title="Wed Feb 11 2026 08:03:24 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»27åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ 2026 çš„å¼€å§‹ï¼Œæˆ‘å¹¶æ²¡æœ‰è®¸ä¸‹ä»€ä¹ˆæ–°å¹´æ„¿æœ›ï¼Œä¼¼ä¹æ¯ä¸€å¹´éƒ½æ²¡æœ‰ï¼Œä½†æ¯ä¸€å¹´éƒ½ä¼šç»å†å¾ˆå¤šéš¾å¿˜çš„äº‹æƒ…ã€‚</p>
<p>è¿™ä¸€å¹´ç»ˆç©¶è¦è¿‡å»äº†ï¼Œæˆ‘å¯¹ 2025 çš„å”¯ä¸€æ„Ÿè§‰å°±æ˜¯ï¼š<strong>å¹´è´¹ä¼šå‘˜å¿«è¦åˆ°æœŸäº†ï¼Œè¯¥äº¤é’±äº†</strong>ã€‚</p>
<p>ä»Šå¹´æ¯”å¾€å¹´è¦å¥½å¾ˆå¤šï¼ŒçƒŸèŠ±å‡Œç©ºç»½æ”¾ï¼Œæ•´åº§åŸå¸‚éš†éš†ä½œå“ï¼Œæå°½æ‰€èƒ½åœ°å®£å‘Šæ–°å¹´çš„åˆ°æ¥ï¼Œå¾€å¹´åªæœ‰ç”µè§†æœºé‡Œä¸»æŒäººå¸¦ç€èŒä¸šå‡ç¬‘ï¼Œé«˜å£°å‘å–Šè¿™çš„å€’è®¡æ—¶ï¼Œç°åœ¨æ‰“å¼€çª—æˆ·ï¼Œè¿é¢æ‰‘æ¥çš„æ˜¯ä¹…è¿çš„ç„°ç«æ°”æ¯ï¼Œè®©æˆ‘æƒ³èµ·é¥è¿œçš„è¿‡å»ã€‚</p>
<p>å°¤è®°å¾—åˆæ˜¥ï¼Œå¾®é›¨æ‚„ç„¶è€Œè‡³ï¼Œé›¶æ˜Ÿçš„é›¨æ»´ä¸­ï¼Œå‚æ™šæ ‘ä¸‹è‡ªè¡Œè½¦çš„é“ƒå£°éšé£è½»è½»è¡æ¼¾ï¼Œè¡—è§’çš„ç¯å…‰å¾®é»„ï¼Œå®›å¦‚ä¸€ä½è€å‹å‘æˆ‘ä½è¯­ï¼Œæœ‰äº›ä¸œè¥¿ï¼Œæ°¸è¿œçš„é—ç•™åœ¨äº†è¿‡å»ã€‚å¯èƒ½æ˜¯åœ¨ç•™åœ¨äº†åˆé«˜ä¸­ï¼Œæˆ–è€…æœ¬ç§‘ï¼Œäº¦æˆ–è€…æ˜¯ç ”ç©¶ç”Ÿï¼Œæ— ä»çŸ¥æ™“ã€‚</p>
<p>é‚£æ—¶è¥¿è¾¹çº¢éœæ»¡å¤©ï¼Œæˆ‘å´åªé¡¾ä¸œè¡Œã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/94923f296f1a4349915c66b32dcd8702~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29yZWR1bXA=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771401803&amp;x-signature=e8QUaTPtrHp0mKj9Evev0LCMBso%3D" alt="7623766c8e19a6e0cbd1497c97a4b53e" loading="lazy"/></p>
<h2 data-id="heading-0">#01 å¤</h2>
<p>æš‘æœŸå®ä¹ æŒºä¸é¡ºåˆ©çš„ï¼Œäººå¾ˆä¸§ï¼Œæ²¡è‡ªä¿¡ï¼Œæ²¡ç›®æ ‡ï¼Œä¹Ÿé”™è¿‡äº†å¾ˆå¤šæœºä¼š...</p>
<p>æƒ³å›åˆ°æš‘æœŸå‰é‡æ–°å¼€å§‹ï¼Œä½†æ²¡åŠæ³•ï¼Œå›ä¸å»äº†ï¼Œè¿™å°±æ˜¯äººç”Ÿï¼Œåªæœ‰é”™è¿‡ç‚¹ä»€ä¹ˆï¼Œä½ æ‰å­¦å¾—ä¼šçæƒœ</p>
<p>å°±å¥½åƒæˆ‘è¿™è¾ˆå­ä¹Ÿå›ä¸åˆ°å¤§ä¸€å¤§äºŒçš„å­¦ä¹ çŠ¶æ€ä¸€æ ·ï¼Œæˆ–è€…è¯´ï¼Œäººè¿™ä¸€ç”Ÿï¼Œéƒ½ä¸èƒ½èµ°å›å¤´è·¯</p>
<p>å¾ˆå¤šå¹´æ¥ï¼Œæˆ‘ä¸€ç›´æŒç»­åœ¨é—®è‡ªå·±ä¸€ä¸ªé—®é¢˜ï¼Œæ€ä¹ˆå°±å˜æˆè¿™æ ·äº†å‘¢ï¼Ÿ</p>
<p>æœ€è¿‘ï¼Œè¿™ä¸ªé—®é¢˜å˜æˆäº†ï¼Œå®³ï¼Œé‚£åˆèƒ½æœ‰ä»€ä¹ˆåŠæ³•å‘¢ ğŸ˜®â€ğŸ’¨</p>
<p>æš‘æœŸæœ€æœ‰å¸Œæœ›ä¹Ÿæ˜¯æœ€æƒ³å»çš„åå­ä¹Ÿæ³¡æ­»åœ¨æ± å­é‡Œäº†ï¼Œé‚£ä¸ªç»„çš„æ–¹å‘æˆ‘æ˜¯çœŸæ„Ÿå…´è¶£ï¼Œå¯æƒœæœ€åè¿˜æ˜¯æ²¡èƒ½ç­‰æ¥ offerã€‚</p>
<p>çœ‹åˆ°ä¸€ä¸ªåŒ—å¤§çš„å“¥ä»¬ï¼Œæ¯”æˆ‘æ™šå…¥æ± ï¼Œè¿‡å‡ å¤©å°±å¼€å¥–äº†ï¼ŒHR å’Œæˆ‘è¯´ï¼Œæˆ–è®¸è¿™å°±æ˜¯åŒ—å¤§çš„é­…åŠ›å§ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/49386daf91f5446c97fc89ed6ce84156~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29yZWR1bXA=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771401803&amp;x-signature=Zw3Ep4MrXstP3Qcpvvf22%2BERlhI%3D" alt="image-20250628032513786" loading="lazy"/></p>
<p>ä¹Ÿä¸çŸ¥é“ä¸ºä»€ä¹ˆï¼Œè¿™äº›å¹´ï¼Œèº«è¾¹çš„äººæ€»ä¼šæœ‰ç§è§‰å¾—æˆ‘å¾ˆå‰å®³çš„é”™è§‰ï¼Œæ‹œæ‰˜ï¼Œæˆ‘è¦æ˜¯çœŸå‰å®³ï¼Œæˆ‘è¿˜ç”¨å‘æ„è¿™äº›æ¯•ä¸šã€å°±ä¸šçš„äº‹ä¹ˆï¼Œè¿™æ ·æˆ‘å°±ä¸ç”¨åƒç”Ÿæ´»çš„è‹¦äº†</p>
<p>æœ‰æ—¶å€™å°±è§‰å¾—è‡ªå·±æ´»å¾—å¾ˆè’è°¬ï¼Œä¸‰å¤©ä¸¤å¤´å‚å¤´ä¸§æ°”è·Ÿå¤±æ‹ä¼¼çš„</p>
<p>æœ‹å‹é—®æˆ‘æ€ä¹ˆæƒ…ç»ªä¸å¯¹ï¼Œæˆ‘æ€»ä¸èƒ½å‘Šè¯‰ä»–æœ€è¿‘æš‘æœŸæŒ‚éº»äº†ï¼Œçœ‹ä¸åˆ°æœªæ¥å§</p>
<p>çªç„¶æƒ³æ˜ç™½äº†ä¸ºä»€ä¹ˆäº’è”ç½‘å…¬å¸äº’ç›¸ç§°å‘¼åŒå­¦ï¼Œå›½ä¼äº’ç›¸ç§°å‘¼è€å¸ˆï¼Œ<strong>å› ä¸ºåŒå­¦ä¼šæ¯•ä¸šï¼Œæ—©æ™šè€Œå·²</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1fd5898f6d7840e1b3b97e8c242c60a2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29yZWR1bXA=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771401803&amp;x-signature=efkFDs%2FM8ceRr8HxPtS0MTQj8NA%3D" alt="94628a820e12dc46f30efd54d788a640" loading="lazy"/></p>
<p><strong>è¿™å¹¶ä¸æ˜¯ä¸€ä»½å¤šä¹ˆå€¼å¾—è®©äººç¾¡æ…•å’Œè¿½é€çš„å·¥ä½œ</strong></p>
<p><strong>åœ¨è¿™é‡Œï¼Œäººä¹Ÿå¹¶æ²¡æœ‰å¤ªå¤šçš„æ—¶é—´æƒ³ä»¥å‰å’Œä»¥å</strong></p>
<p>é‚£æ®µé¢“åºŸåœ¨å®¿èˆåˆ·è§†é¢‘çš„æ—¶é—´ï¼Œç»å¸¸åˆ·åˆ°èœ¡ç¬”å°æ–°å’Œæµ·ç»µå®å®ï¼Œä¸å¾—ä¸è¯´åœ¨é‚£ä¸ªå¹´ä»£ï¼Œåšå¾—æ˜¯çœŸå¥½</p>
<p>å°å­¦çš„æ—¶å€™æ˜¯æœ€åº”è¯¥çœ‹èœ¡ç¬”å°æ–°çš„æ—¶å€™</p>
<p>é«˜ä¸­çš„æ—¶å€™æ˜¯æœ€åº”è¯¥çœ‹æ–—ç ´è‹ç©¹çš„æ—¶å€™</p>
<p>ä½†æˆ‘ç ”ç©¶ç”Ÿçš„æ—¶å€™æ‰å¼€å§‹æ²‰è¿·è¿™ä¿©ç©æ„</p>
<p>ä¸è¿‡ä»”ç»†ä¸€æƒ³ï¼Œæˆ‘ç°åœ¨å’Œé«˜ä¸­æ—¶å€™ç¡®å®æœ‰ç‚¹ä¸ä¸€æ ·äº†ï¼Œæ¯”å¦‚é«˜ä¸­æ—¶å€™æˆ‘ç©è‹±é›„è”ç›Ÿå®æ­»ä¸æŠ•ï¼Œç°åœ¨æˆ‘çœ‹æ‰“ä¸è¿‡äº† 15 åˆ†é’Ÿå°±ä¸Šç¥¨äº†ï¼Œä¸èƒ½è®©å¯¹é¢è™èœçˆ½</p>
<p><strong>èƒ½æ‰“è¿‡æˆ‘çš„äººï¼Œæˆ‘ä¸ç»™ä»–ä»¬æ‰“</strong> ...</p>
<p>äººæ€»åº”è¯¥æ˜¯æœ‰ç‚¹å˜åŒ–çš„ï¼Œä½†æˆ‘æœ€è¿‘åˆæœ‰äº›æ–°çš„ç†è§£äº†ï¼Œæˆé•¿æ˜¯ä¸€ä»¶å¾ˆéš¾çš„äº‹ï¼Œå®ƒç”šè‡³æ„å‘³ç€ä»å¤´å»ä¿®æ”¹ä½ çš„ä¸€éƒ¨åˆ†äººç”Ÿæ„ä¹‰</p>
<p>æ‰“ä¸ªæ¯”æ–¹ï¼šä½ è¿ä½“é‡éƒ½æ§åˆ¶ä¸äº†ï¼Œæ€ä¹ˆèƒ½æ§åˆ¶è‡ªå·±çš„äººç”Ÿå‘¢ï¼Ÿ</p>
<p>æœ‹å‹è¯´æ²¡åŠæ³•ï¼Œç°åœ¨å¤§ä¼™éƒ½æ‰¾ç€äº†å·¥ä½œï¼Œä½“é‡ç¡®å®ä¸å¥½å‡</p>
<p>çœŸä¸å¥½å‡ï¼Œæœ€è¿‘ä¸œå­ã€å›¢å­å’Œé˜¿é‡Œæ‰“å¤–å–ä»·æ ¼æˆ˜ï¼Œå¿«ç»™æˆ‘å–å‡ºç³–å°¿ç—…äº†</p>
<p>æš‘æœŸæœ‰ä¸ªå¥½æœ‹å‹è·‘åŒ—äº¬å®ä¹ äº†ï¼Œè¿˜æœ‰ä¸€ä¸ªå»äº†æ­å·ï¼Œè¯»ä¹¦æ—¶å“¥å‡ ä¸ªæ€»æ˜¯ç»å¸¸æ‰“å“ˆå“ˆï¼Œä¸è¿‡ä¸€åˆ°ä¸Šç­ï¼Œæ„Ÿå—åˆä¸ä¸€æ ·äº†</p>
<p>å‡ºå‘å‰å‡ å¤©ï¼Œæˆ‘è¯´äº†ä¸€å¥â€œä»Šæ—¥ä¸€åˆ«ï¼Œå°åŠå¹´åˆè§ä¸åˆ°äº†ï¼Œä¸è¿‡å’±ä»¬çš„å­¦ç”Ÿç”Ÿæ¶¯å¥½åƒä¹Ÿå°±ä¸€å¹´å¤šäº†â€ï¼Œä»–ä»¬æ²¡è¯´è¯ï¼Œä¹Ÿè®¸æ˜¯æˆ‘ä»¬ç»å†è¿™å¯»å¸¸çš„åˆ†åˆ«å¤ªå¤šäº†ï¼Œæœ¬æ¥æ—©å°±ä¹ æƒ¯äº†ï¼Œè¿™æ—¶å€™çªç„¶æ¥äº†ä¸ªäººå¯¹ä½ è¯´ï¼š</p>
<p>å˜¿ï¼Œä½ å·²ç»å’Œè¿™ä¹ˆå¤šäººèµ°æ•£äº†å‘€</p>
<p>å¤§å¤šæ•°äººåˆ†å¼€åå°±ä¸ä¼šå†è§äº†ï¼Œè€Œæœ‰äº›äººæˆ–è®¸è¿˜æœ‰å†è§çš„æœºä¼š</p>
<p>å›å¿†ä¼šé™ªä½ ä¸€ç”Ÿï¼Œå³ä½¿å†æ¨¡ç³Šï¼Œä½ è¿˜æ˜¯å¿˜ä¸æ‰</p>
<p><strong>èšæ•£ç¦»åˆï¼Œæ­¤ä¹ƒå¸¸æ€ï¼Œä½ è¦ä¹ æƒ¯</strong></p>
<p>çºµè§‚ä¸ªäººçš„å‘½è¿ï¼Œå½“ç„¶è¦é è‡ªæˆ‘å¥‹æ–—ï¼Œä½†ä¹Ÿè¦è€ƒè™‘åˆ°å†å²çš„è¡Œç¨‹ï¼Œä½†ä¸å¹¸çš„æ˜¯ï¼Œç°åœ¨å†å²çš„è¿›ç¨‹å¹¶ä¸ä¹è§‚ã€‚</p>
<p>åœ¨æ¯”è¾ƒå°çš„æ—¶å€™ï¼Œå¤§çº¦å°±æ˜¯åˆä¸­é«˜ä¸­å§ï¼Œæˆ‘å¯¹è‡ªå·±äººç”Ÿç»“æœå……æ»¡å¹»æƒ³å’ŒæœŸå¾…ã€‚ä½†æ…¢æ…¢é•¿å¤§ä¹‹åï¼Œæ–¹æ‰æ„è¯†åˆ°ç”Ÿæ´»æ˜¯å¦‚æ­¤å¤æ‚ï¼Œæˆ‘ä¸å¾—ä¸å­¦ç€å¯¹å†…å¿ƒçš„æœŸæœ›æ”¾æ‰‹ï¼Œæ›¾ç»çš„æ¢¦æƒ³åœ¨æ®‹é…·çš„ç°å®é¢å‰å˜å¾—è¤ªè‰²ã€‚æ…¢æ…¢å‘ç°æœ‰äº›äº‹å¹¶ä¸æ˜¯ä¸€ä»¶éœ€è¦è¢«è§£å†³çš„äº‹æƒ…ï¼Œè€Œæ˜¯ä¸€ä»¶éœ€è¦è¢«æ¥å—çš„äº‹æƒ…ï¼Œæˆ–è€…è¯´ï¼Œç»å¤§å¤šæ•°çš„äº‹æƒ…ï¼Œéƒ½åªæ˜¯éœ€è¦æ¥å—çš„äº‹æƒ…ï¼Œä½ è§£å†³ä¸äº†ã€‚</p>
<p>æ¯”å¦‚åœ¨åœ°çƒ online åº¦è¿‡çš„è¿™äºŒåå‡ å¹´æ¥çœ‹ï¼Œæ”¹å˜çš„è¯èµ·ç è¦æ‹¿å¹´æ¥è¡¡é‡ï¼Œæˆ–è€…åå¹´æ¥è¡¡é‡ã€‚</p>
<p>æ­¤æ—¶ï¼Œæ€œæ‚¯è‡ªå·±æ˜¾å¾—å¾ˆé‡è¦ï¼Œæˆ–è®¸ä½ å¯ä»¥å¯¹è‡ªå·±è¯´â€œæˆ‘ä¹Ÿæƒ³è¦åšå¾—æ›´å¥½â€ä»¥åŠâ€œå°±è®©å®ƒè¿™æ ·å§ï¼Œå…¶å®è¿™æ ·ä¹Ÿå¥½â€ã€‚</p>
<p>æ˜¯çš„ï¼Œæˆ‘å·²ç»åšå¾—è¶³å¤Ÿå¥½äº†ï¼Œå› ä¸ºè‡³å°‘ç°åœ¨æˆ‘è¿˜çˆ±ç€è‡ªå·±ï½¡</p>
<h2 data-id="heading-1">#02 ç§‹</h2>
<p>å…¶å®ï¼Œæˆ‘ä»æ¥æ²¡æƒ³è¿‡è¦å¦‚ä½•å‡†å¤‡æ‰èƒ½åœ¨ç§‹æ‹›æ‹¿åˆ°å¤§å‚çš„ offerï¼Œæˆ–æ˜¯ç™½èœï¼Œæˆ–æ˜¯ SPã€SSP</p>
<p>æˆ‘ä¸€ç›´ä»¥æ¥å»å®ä¹ ï¼Œä¸€æ˜¯æƒ³é¡ºé“å»åˆ«çš„åŸå¸‚çœ‹ä¸€çœ‹ï¼ŒäºŒæ¥ï¼Œä¹Ÿæ˜¯ä¸€ç›´éƒ½æƒ³çœŸæ­£çš„å†™å‡ºä¸€äº›å¥½çš„ä»£ç ï¼Œè¢«é‡è§†çš„ä»£ç ï¼Œå¬èµ·æ¥å¾ˆç†æƒ³åŒ–ï¼Œä½†è¿™ä¹Ÿè®©æˆ‘é˜´å·®é˜³é”™çš„å®ä¹ äº†ä¸å°‘æ®µ</p>
<p><strong>åœ¨æˆ‘è¿‡å¾€çš„åå¹´ä¸­ï¼Œå‡¡æ˜¯æˆ‘åŠªåŠ›è¿½é€çš„äº‹ï¼Œå¾€å¾€éƒ½æ— æ³•å®ç°ï¼Œè€Œé‚£äº›çœŸæ­£å®ç°çš„ï¼Œå…¶å®éƒ½æ˜¯æ„æ–™ä¹‹å¤–</strong></p>
<p>æ‰€ä»¥æˆ‘è§‰å¾—å¦‚æœä¸€ä»¶äº‹æœ‰ 100% çš„æŠŠæ¡ï¼Œå°±æ²¡æœ‰å»åšçš„å…´è‡´äº†</p>
<p>ğŸ§‘â€ğŸ’»é¢è¯•å®˜ï¼šè¿™å°±æ˜¯ä½ ç¬”è¯•åªåšå‡ºæ¥ä¸€åŠçš„åŸå› å—ï¼Ÿ</p>
<blockquote>
<p>åæ¥çœ‹åˆ°ä¸ªæ®µå­ï¼Œå¾ˆåæ‚”æ²¡ç»™é¢è¯•å®˜å‘ï¼š</p>
<p>â€œè¿™ä»£ç æˆ‘æœ‰ä¸‰ä¸å†™â€</p>
<ul>
<li>ç¬¬ä¸€ï¼šä¸èƒ½å¤åˆ¶çš„æˆ‘ä¸å†™ï¼Œå› ä¸ºåˆ«äººçš„è½®å­å†™å¥½äº†æˆ‘å¹²å˜›ä¸ç”¨</li>
<li>ç¬¬äºŒï¼šä¸è®©æˆ‘ç”¨ ChatGPT "è¾…åŠ©"çš„æˆ‘ä¸å†™ï¼Œå› ä¸ºåŸºç¡€çš„ä¸œè¥¿æˆ‘éƒ½ä¼šï¼Œå†™äº†æ²¡æ„ä¹‰</li>
<li>ç¬¬ä¸‰ï¼šå¤ªéš¾å†™çš„æˆ‘ä¸å†™ï¼Œå› ä¸ºæˆ‘è¿˜æ²¡æœ‰åˆ°é‚£ä¸ªå¢ƒç•Œï¼Œå†™ä¸æ˜ç™½</li>
</ul>
</blockquote>
<p>ç°å®å°±æ˜¯è¿™ä¹ˆæ®‹é…·ï¼Œè¿˜æ²¡æ¥å¾—åŠä»æš‘æœŸå®ä¹ çš„å¤±è½ä¸­èµ°å‡ºæ¥ï¼Œç§‹æ‹›å°±å¼€å§‹äº†ï¼Œæ¯” emo æ›´éš¾å—çš„äº‹æƒ…æ˜¯ï¼Œä¸èƒ½ emo å¤ªä¹…ã€‚</p>
<p>æœ‹å‹è¯´ï¼Œå½“ä¸€ä¸ªäººè¿‡å¾—ä¸å¥½æ—¶ï¼Œæ‰ä¼šæ€€å¿µè¿‡å»ã€‚éš¾æ€ªç§‹å¤©åˆšå¼€å§‹ï¼Œæˆ‘å°±å·²ç»åœ¨æ€€å¿µå¤å¤©äº†ã€‚</p>
<blockquote>
<p>è¿™è¿‡æ—¥å­å°±æ˜¯é—®é¢˜å ç€é—®é¢˜ï¼Œæˆ‘å”¯ä¸€èƒ½åšçš„ï¼Œå°±æ˜¯è¿æ¥è¿™äº›é—®é¢˜ã€‚  â€”â€”ã€Šå£«å…µçªå‡»ã€‹</p>
</blockquote>
<p>å‡ åå¹´å‰ï¼Œä¼¼ä¹å‘¢ç¾¤é¢†å›¾çµå¥–çš„å·¨ä½¬æ€»ä¼šåœ¨é¢†å¥–çš„æ—¶å€™å¾ˆè‡ªè±ªçš„è¯´ï¼Œæˆ‘æ˜¯ä¸€åç¨‹åºå‘˜</p>
<p>ä½†ç°åœ¨æèµ·ç¨‹åºå‘˜ï¼Œæˆ‘æ€»ä¼šæƒ³åˆ° CSDN ä¸Šé‚£åªç§ƒå¤´è™šå¼±æ— åŠ›çš„çŒ¿çŒ´è¶´åœ¨ç”µè„‘å‰ï¼Œç”¨å·¨å¤§çš„æ‰‹æ•²æ‰“ç€é”®ç›˜</p>
<p>æ‰€ä»¥æˆ‘å¾ˆä¸å–œæ¬¢ CSDNï¼Œå½“ç„¶ CSDN ä¹Ÿç¡®å®åšçš„å¾ˆçƒ‚ï¼Œä¹Ÿç®—æ²¡æœ‰è¾œè´Ÿæˆ‘çš„æ„Ÿæƒ…</p>
<p>æˆ‘æ²¡é‚£ä¹ˆå–œæ¬¢äº’è”ç½‘ï¼Œäº’è”ç½‘æ˜¯ä¸€ç§å¾ˆå‰²è£‚çš„å­˜åœ¨ï¼Œç‰¹åˆ«æ˜¯åœ¨å›½å†…ï¼Œæ¯”å¦‚äº’è”ç½‘çš„ OKRï¼Œå¾ˆæœ‰æ„æ€çš„æ˜¯ï¼Œåœ¨äº’è”ç½‘ OKR æœ¬æ¥å°±æ˜¯è¦å®Œä¸æˆçš„ï¼Œå¦‚æœæœ‰ä¸€å¤©ä½ å®Œæˆäº†ä½ çš„ OKRï¼Œä¸æ˜¯è¯´ä½ è¶…å‡ºé¢„æœŸï¼Œè€Œæ˜¯è¯´æ˜ä½ çš„ OKR åˆ¶å®šçš„æœ‰é—®é¢˜</p>
<p>æˆ‘å¾ˆæƒ³è¯´è¿™ä¸ªè¡Œä¸šç—…äº†ï¼Œä½†å…¶å®æˆ‘ä¹Ÿæ”¹å˜ä¸äº†å•¥ï¼Œå”¯ä¸€æ”¹å˜çš„å°±æ˜¯å·¥ä½œè¶Šæ¥è¶Šéš¾æ‰¾äº†ï¼ŒåŒé¾„äººä¹‹é—´è¦æ›´å·äº†è€Œå·²</p>
<p>æ²¡æœ‰ä¹Œæ‰˜é‚¦ï¼Œåªæœ‰ç»´ä¹Ÿçº³åœ¨ç­‰æˆ‘ä»¬</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9d0518cc58074c2fad7013ce556698ae~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29yZWR1bXA=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771401803&amp;x-signature=wh0RW4svuXR0GhpK5HMKGCJQeIM%3D" alt="Screenshot 2025-08-10 at 15.42.18" loading="lazy"/></p>
<p>ä½†æˆ‘å–œæ¬¢ç¼–ç¨‹ï¼Œæˆ‘å°±æƒ³å·¥ä½œå¾—èƒ½å¼€å¿ƒç‚¹ï¼Œä»æ¥æ²¡æƒ³è¿‡åœ¨äº’è”ç½‘å¾…ä¸€è¾ˆå­ï¼Œ<strong>è€Œä¸”å³ä½¿æˆ‘æƒ³ï¼Œæˆ‘çš„è€æ¿å¯èƒ½ä¹Ÿä¸æƒ³</strong></p>
<p>é¢è¯•å¾ˆçŸ­ï¼Œè¿™å‡ åé’Ÿå…¶å®æ˜¯çœ‹ä¸å‡ºæ¥æˆ‘çš„ä¼˜ç‚¹çš„ï¼Œæˆ‘æ¯æ¬¡é¢å®Œéƒ½æ„Ÿè§‰æ²¡æœ‰å‘æŒ¥å¾—å°½å…´ï¼Œæ²¡æœ‰å±•ç¤ºå‡ºæ¥ç»™é¢è¯•å®˜æœ€å¥½çš„ä¸€é¢</p>
<p>ä½†æˆ‘çš„ç¼ºç‚¹è¿˜æ˜¯ä¸€è§ˆæ— ä½™çš„</p>
<p>æœ‰ä¸€æ¬¡é¢ HR é¢çš„æ—¶å€™ï¼ŒHR è®©æˆ‘ç»™ä¸€ä¸ªè¯æ¥å½¢å®¹è‡ªå·±ï¼Œæˆ‘è¯´çš„æ˜¯é‡æ„Ÿæƒ…</p>
<p>HR è¯´ç¬¬ä¸€æ¬¡è§åˆ°è¿™æ ·çš„å›ç­”ï¼Œè®©æˆ‘ä¸¾ä¸ªä¾‹å­</p>
<p>æˆ‘æƒ³äº†æƒ³ï¼Œè¯´å¦‚æœä½ å¸æ‹›æˆ‘ï¼Œé‚£æˆ‘ä¼šå…ˆè€ƒè™‘ä½ å¸</p>
<p>ä¹Ÿä¸çŸ¥é“ HR æ»¡ä¸æ»¡æ„è¿™ä¸ªå›ç­”</p>
<p>æƒ³èµ·æ¥æœ¬ç§‘çš„è€å­¦é•¿ï¼Œä»é—²é±¼è·³å»äº†ç¾å›¢ï¼Œæ¢äº†ä¸ª baseï¼Œæœ€è¿‘ç»å¸¸åŠ ç­ï¼Œæœ‰äººé—®æ˜¯ä¸ºäº†ä»€ä¹ˆ</p>
<p>å­¦é•¿è¯´æ˜¯ä¸ºäº†çˆ±æƒ…ï¼ŒçœŸå¥½ï¼Œé‚£æ—¶å€™æœ‰é‚£ä¹ˆä¸€ç¬é—´ï¼Œæˆ‘å¾ˆç¾¡æ…•ï¼Œä¼¼ä¹è¿™ä¸€åˆ‡éƒ½å’ŒæŠ€æœ¯æ²¡æœ‰å…³ç³»ï¼Œä¸ä¸–ä¿—çš„è£èª‰ï¼ŒæƒåŠ›éƒ½æ²¡æœ‰å…³ç³»</p>
<p><strong>æˆ‘å–œæ¬¢çº¯ç²¹çš„ä¸œè¥¿ï¼Œé¢è¯•ä¹Ÿæ˜¯</strong></p>
<p>æˆ‘å¦‚æœè§‰å¾—ä¸€ä¸ªé¢è¯•å®˜ä¸çœŸè¯šï¼Œæˆ‘å°±ä¸ä¼šå»è¿™å®¶å…¬å¸ï¼Œå¦‚æœæˆ‘æœ‰é€‰æ‹©çš„è¯</p>
<p>ä»¥å‰è§‰å¾—åšé€‰æ‹©æ—¶å…´è¶£æ²¡æœ‰é‚£ä¹ˆé‡è¦ï¼Œä½†ç°åœ¨çœ‹æ¥ï¼Œé‚£ä¸€ç‚¹å¹³æ—¥é‡Œå¾®ä¸è¶³é“çš„çƒ­çˆ±ï¼Œä¼šæˆä¸ºåœ¨åŠ¨æ‘‡æ—¶è‡³å…³é‡è¦çš„é‚£ä¸€ä»½æƒé‡</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/67e7e3c7c9f94a17ba8327556ffcb6a5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29yZWR1bXA=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771401803&amp;x-signature=oq6Fe%2FO4Ot6XskJTJyYXBzvxbqo%3D" alt="image-20260206171454503" loading="lazy"/></p>
<p>æœ‰æ—¶å€™æƒ³æ¯•ä¸šç›´æ¥å›åˆ°è€å®¶ï¼Œåˆè§‰å¾—è¾œè´Ÿäº†è‡ªå·±çš„åˆå¿ƒå’Œä¸€èº«æŠ€æœ¯</p>
<p>æœ‹å‹è¯´ä¸å¯¹ï¼Œ<strong>ä½ ç°åœ¨æ²¡å•¥æŠ€æœ¯ï¼Œè°ˆä¸ä¸Šè¾œè´Ÿ</strong></p>
<p>è¯´çš„ä¹Ÿå¯¹ï¼Œèµ°ä¸€æ­¥çœ‹ä¸€æ­¥ç®—äº†ğŸ˜„</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f5aa37161c8e40f4af5c03a57b00f122~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29yZWR1bXA=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771401803&amp;x-signature=dgmyWhfkt2dA31J3IC5q1lgGi00%3D" alt="img" loading="lazy"/></p>
<p>ä¸è¿‡ç¨‹åºå‘˜æœ‰ä¸€å¤§æ‚²å“€å°±æ˜¯ï¼Œæˆä¸ºäº†ç¨‹åºå‘˜å°±ä¼šåªæŠŠè‡ªå·±å½“æˆç¨‹åºå‘˜ï¼Œå› ä¸ºèº«åœ¨è¿™ä¸ªç¯å¢ƒä¸­ï¼Œä½†å…¶å®å¦‚<strong>æœè·³å‡ºè¿™ä¸ªç¯å¢ƒï¼Œå‘ç°è¿˜æ˜¯æ­£å¸¸ç”Ÿæ´»çš„äººå¤š</strong>ã€‚</p>
<p>è®¡ç®—æœºæ˜¯ä¸¥æ ¼ç†æ€§ä¸è§„èŒƒçš„å­¦ç§‘ï¼Œä½†æˆ‘è§‰å¾—ä¹Ÿå¾ˆæµªæ¼«ï¼Œæˆ‘ä»¬ç©·å°½æ‰€æœ‰å»æé«˜æŠ€æœ¯ï¼Œæ— è®ºæ˜¯è®¾è®¡æ¨¡å¼ï¼Œè¿˜æ˜¯æ¸æ¸çš„æ¨¡å—åŒ–ï¼Œå¾®æœåŠ¡åŒ–ï¼Œå®¹å™¨åŒ–ï¼Œ<strong>éƒ½æ˜¯ä¸ºäº†åœ¨æœªæ¥ä¸€å¤©ï¼Œæˆ‘ä»¬å¯ä»¥æ›´å¥½çš„è¢«å–ä»£</strong>ï¼Œè¿™ä¸ªå·¥ä½œï¼Œåœ¨ä¸€å¼€å§‹ï¼Œä¾¿æ³¨å®šäº†æ‚²å£®å’Œæµªæ¼«ã€‚</p>
<p>ä½†æœ‰æ—¶æˆ‘ä¼šæƒ³ï¼Œè¿™ä¸ªè¡Œä¸šï¼Œå€¼ä¸å€¼å¾—æˆ‘æŠ•å…¥å¦‚æ­¤çš„çƒ­å¿±ï¼Œæˆ‘æ˜¯ä¸ªæ²¡æœ‰æ¢¦æƒ³ä¹Ÿèƒ½ç”Ÿå­˜çš„äººï¼Œé«˜ä¸­çš„æœ‹å‹æ€»å–œæ¬¢æ‰¾ä¸€ä¸ªæ¢¦æƒ³ä¸­çš„å­¦æ ¡ï¼Œä¸€ä¸ªæ¢¦æƒ³ä¸­è¿½èµ¶çš„äººï¼Œä¸€ä¸ªæ¢¦æƒ³ä¸­çš„è¡Œä¸šã€‚ä½†æˆ‘è¿™äº›éƒ½æ²¡æœ‰ï¼Œæœ‹å‹æ€»è§‰å¾—æˆ‘æ˜¯é æ„å¿—åŠ›æ’‘è¿‡é«˜ä¸‰é‚£æ®µè‰°è‹¦çš„å²æœˆï¼Œå…¶å®ä¸æ˜¯ï¼Œæœ‰æ²¡æœ‰æ¢¦æƒ³å¯¹æˆ‘æ¥è¯´å¹¶ä¸æ˜¯é‚£ä¹ˆé‡è¦ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c44abc56ec824475b0394da7c65bfdeb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29yZWR1bXA=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771401803&amp;x-signature=fZzpUaq6YInt0Ckh%2BOLEj1QA%2FTc%3D" alt="img" loading="lazy"/></p>
<p>æœ‹å‹è¯´ï¼Œå‡è®¾é˜³çš„æŒ‚æ‰ä¸€åŠï¼Œå…¨å›½ä¼šå¤±å»å¤§æ¦‚ 50% çš„äººå£ï¼Œä¸è¿‡å¾ˆå¿«åˆä¼šæ¢å¤å¦‚åˆï¼ˆç”Ÿç‰©å°çŸ¥è¯†å—·ï¼šç§ç¾¤æ•°é‡è¾¾åˆ°ç¯å¢ƒå®¹çº³é‡ä¸€åŠï¼Œå³ K / 2 æ—¶ï¼Œç§ç¾¤çš„å¢é•¿é€Ÿç‡æœ€å¤§ï¼‰ï¼Œæœ€ç»ˆæ— æ•°äººçš„å–œæ€’å“€ä¹ï¼Œç”Ÿæ­»ç¦»åˆ«ï¼Œæˆä¸ºå†å²ä¹¦ä¸Šçš„è½»å¦‚é¸¿æ¯›çš„ä¸€ç¬”ï¼Œæ— è®ºæå†™çš„å¤šä¹ˆæƒ¨ç»äººå¯°ï¼Œä¹Ÿåªæ˜¯ä¸€ç¬”ç½¢äº†ï¼Œè€Œåœ°çƒä¸Šæ‰€æœ‰æƒŠå¤©åŠ¨åœ°çš„å¤§äº‹ï¼Œä¹Ÿä¸åŠå®‡å®™ä¸­çš„ä¸€ç²’å°˜åŸƒã€‚</p>
<p>æœ‰æ—¶å€™åœ¨æƒ³ç”Ÿå‘½çš„æ„ä¹‰æ˜¯ä»€ä¹ˆï¼Œæˆ‘æƒ³ä¸æ˜ç™½ï¼Œå°±åƒé«˜ä¸‰è€å¸ˆé—®æˆ‘çš„æ¢¦æƒ³ä¸€æ ·ï¼Œé—®æˆ‘æƒ³è¦å½“ä¸€ä¸ªä»€ä¹ˆèŒä¸šï¼Œæˆä¸ºä¸€ä¸ªä»€ä¹ˆæ ·çš„äººï¼Œæˆ‘è¯´æˆ‘ä¸çŸ¥é“ï¼Œä½†ä¸€å®šä¸æ˜¯ä»¥åæ‹¿ 20w å¹´è–ªï¼Œ30w å¹´è–ªï¼Œ50w å¹´è–ªæˆ–è€… 100w å¹´è–ªã€‚</p>
<p>å› æ­¤ä¸æƒ³å·äº†ï¼Œæ˜¯å› ä¸ºæ²¡æœ‰äº†å·çš„åŠ¨åŠ›ï¼Œå…¶å®æœ€ç»ˆä¸å°±æ˜¯ä¸ºäº†æ‹¿ä¸€ä»½é«˜è–ªçš„å·¥ä½œï¼Œæˆ‘è¿å¯¹è¿™ä¸ªç»“æœéƒ½æ²¡äº†å…´è‡´ï¼Œåˆä½•è°ˆè¿‡ç¨‹ï¼Œå€’ä¸æ˜¯æ‡’å¾—å¥‹æ–—ï¼Œåªä¸è¿‡ä»€ä¹ˆæ—¶å€™å¥‹æ–—æ¸æ¸çš„æˆäº†ä¸€ç§è´¬ä¹‰è¯ï¼Œæˆ‘åªæ˜¯è§‰å¾—é€”ä¸­çš„ä»£ä»·å¤ªå¤§ï¼Œä¸åªæ˜¯æˆ‘ä¸€ä¸ªäººä»˜å‡ºçš„ï¼Œè€Œæ˜¯å’Œæˆ‘çš„æœ‹å‹ä»¬ä¸€åŒä»˜å‡ºçš„ã€‚</p>
<p><strong>æ— è®ºæ˜¯ä»€ä¹ˆæ ·çš„ç»“æœï¼Œæˆ‘éƒ½è§‰å¾—éš¾ä»¥é…å¾—ä¸Šè¿™ä¸€è·¯èµ°æ¥çš„å¤±å»</strong></p>
<p><strong>äººè¡Œèµ°æ±Ÿæ¹–ï¼Œå°±æ˜¯ä¸æ–­çš„ç›¸é‡å’Œå¤±å»ï¼Œç¬¬ä¸€æ¬¡ç›¸é‡æ˜¯è‡ªå·±çš„ç”Ÿå‘½ï¼Œæœ€åä¸€æ¬¡å¤±å»ä¹Ÿæ˜¯ï¼Œæœ‰å§‹æœ‰ç»ˆ</strong></p>
<p>æˆ‘å·²ç»ä¸å–œæ¬¢å†å’Œåˆ«äººå·äº†ï¼Œä½†æ˜¯åˆ°äº†ä¸€å®šç¨‹åº¦åï¼Œèº«åœ¨å…¶ä¸­ï¼Œç”±ä¸å¾—æˆ‘ï¼Œä¸è¿‡ï¼Œä¹Ÿç®—æ˜¯ä¸€ç§ç£¨ç»ƒå¿ƒå¢ƒå§ï¼Œå€’ä¹Ÿæœªå¿…ä¸æ˜¯å¥½äº‹ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3997647fdc5748358f0b6dc09769e320~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29yZWR1bXA=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771401803&amp;x-signature=NVxcGWeZCOcs78mLmIwx0BZIggI%3D" alt="Screenshot 2025-08-10 at 15.37.42" loading="lazy"/></p>
<p>æ‰€ä»¥ç”Ÿå‘½çš„æ„ä¹‰æ˜¯ä»€ä¹ˆï¼Œæˆ‘ä¸çŸ¥é“ï¼Œä½†æ˜¯æˆ‘ä¼šæœŸå¾…ä¸‹ä¸€æ¬¡å’Œæœ‹å‹ç›¸é‡ï¼Œåœ¨å¤§å­¦ä¸­é‡åˆ°æ–°çš„æœ‹å‹ï¼Œæ–°çš„ä¹’ä¹“çƒå‹ï¼Œæˆ‘ä¼šå’Œä»¥å‰ä¸€æ ·æœŸå¾…ï¼Œä½†æ˜¯ä¸ä¼šå†åƒä»¥å‰ä¸€æ ·ä¸¥æ ¼è§„åˆ’æˆ‘çš„äººç”Ÿäº†ï¼Œæ¯”å¦‚æŸä¸ªæ—¶é—´ç‚¹éåšæŸä»¶äº‹ä¸å¯ï¼Œéè¦è¾¾åˆ°æŸä¸ªæˆå°±ä¸å¯ã€‚</p>
<p>åœ¨å­¦æ ¡çš„æ—¶å€™ï¼Œå¦‚æœä¸æ˜¯å¾ˆå¿™æˆ‘å°±å–œæ¬¢åˆ°å¤–é¢å»åƒä¸ªé¸¡é”…ï¼Œå¦‚æœå¿™çš„è¯å°±æ¨åˆ°æ˜å¤©å»åƒï¼Œæ˜å¤©å¿™å°±æ¨åˆ°åå¤©ï¼Œ<strong>äººæ€»æ˜¯å¯„å¸Œæœ›äºåæ¥ï¼Œä¹Ÿä¹ æƒ¯æŠŠè¿™è¾ˆå­æ²¡æœ‰å¾—åˆ°çš„äººå’Œäº‹å¯„äºˆåˆ°ä¸‹è¾ˆå­ï¼Œæ€»ä¼šè¯´æˆ‘ä¸‹è¾ˆå­è¦æ€æ ·æ€æ ·ã€‚å¯å¦‚æœè¿™è¾ˆå­å°±æ˜¯ä½ ä¸Šè¾ˆå­è¯´çš„ä¸‹è¾ˆå­ï¼Œé‚£æ€ä¹ˆåŠå‘¢</strong>ï¼Ÿ</p>
<p>æ‰€ä»¥æˆ‘ç°åœ¨é€‰æ‹©æƒ³åƒé¸¡é”…çš„æ—¶å€™å°±ç›´æ¥å»åƒğŸ˜‹</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/11c3affdfcf548719d52c7bcf2aea815~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29yZWR1bXA=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771401803&amp;x-signature=mvvcM4s8LVMYwPjwDCrENrTLQMA%3D" alt="image-20260206182133446" loading="lazy"/></p>
<p>é‚£æˆ‘ä¼šå‘†åœ¨å“ªé‡Œå‘¢ï¼ŸHR ä¹Ÿé—®è¿‡æˆ‘è¿™ä¸ªé—®é¢˜ã€‚</p>
<p>æˆ‘è¯´å¤§æ¦‚æ˜¯å¦é—¨å§ï¼Œæˆ‘çš„çˆ±äººã€æŒšå‹éƒ½åœ¨é‚£é‡Œï¼Œæˆ–è€…æ˜¯åœ¨é‚£é‡Œé™ªä¼´è¿‡æˆ‘ä¸€æ®µå¾ˆé•¿å¾ˆé•¿çš„æ—¶é—´ï¼Œæ¯”æˆ‘åœ¨æ­å·è¥¿å®‰å¾…çš„æ—¶é—´åŠ èµ·æ¥è¿˜è¦é•¿å¾ˆå¤š</p>
<p>é¢è¯•å®˜ç¬‘å¾—æœ‰äº›æ·±æ„</p>
<blockquote>
<p>å‡ å¹´åè¢«æœ«å°¾æ·˜æ±°çš„é‚£ä¸€å¤©ï¼Œä¸€åˆ‡éƒ½å°†ä½œåºŸï¼Œä¹‹å‰çš„åŠ ç­ä½œåºŸï¼Œä¹‹å‰ä»æ± å­ä¸­æŒ£æ‰å‡ºæ¥çš„æƒŠå–œä½œåºŸï¼Œä¹‹å‰çš„é¢†å¯¼åŒäº‹ä½œåºŸï¼Œä¹‹å‰çš„è–ªèµ„å¾…é‡ä¹Ÿä½œåºŸï¼Œé¼ æ ‡ä¹Ÿä¼šä½œåºŸï¼Œé”®ç›˜ä¹Ÿä¼šä½œåºŸï¼Œæ‰€æœ‰çš„æ‰¿è¯ºä¹Ÿç»Ÿç»Ÿä½œåºŸã€‚ä»é‚£ä¸€å¤©å¼€å§‹ï¼Œæˆ‘ä¸å†éœ€è¦ç”µè„‘ï¼Œä¸å†éœ€è¦å…«è‚¡ï¼Œæˆ‘çš„äººç”Ÿä¸å†æœ‰ hello worldã€‚æˆ‘çŸ¥é“æ˜¯ç§‹æ‹›é‚£å¹´çš„é‚£åœºå¤§é›ªè¦†ç›–äº†æˆ‘å‰åŠç”Ÿçš„è’å”ï¼Œè¦†ç›–äº†æˆ‘æœ¬ç§‘çš„å­¦å†ï¼Œæˆ‘å’Œ 985 ç¡•ä¸€èµ·è¿›å…¥é˜¿é‡Œï¼Œæˆ‘ä»¿ä½›ä»å…¶ä¸­çœ‹åˆ°äº†å¸Œæœ›ï¼Œä½†ç”Ÿæ´»åœ¨æ— è¾¹çš„å¤§é›ªä¸­åˆä½•å°ä¸æ˜¯ä¸€ç§è’å”ï¼Œå½“æˆ‘çœŸæ­£èµ°å‡ºè¿™ç‰‡å¤§é›ªåï¼Œæˆ‘è‚šå­æœ‰äº›é¥¿äº†ï¼Œæ­¤æ—¶æˆ‘æ‰æ„è¯†åˆ°ï¼ŒåŸæ¥ç å†œçƒ§çƒ¤æ‰æ˜¯äººç”Ÿçš„å½’å±ã€‚</p>
</blockquote>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/898b60f4917546b08c17f4e9c4476c50~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29yZWR1bXA=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771401803&amp;x-signature=rQP92X569EX9PC33lxHXAc3oJTs%3D" alt="IMG_8164" loading="lazy"/></p>
<p>å…¶å®æˆ‘ä¹Ÿç»å¸¸é»‘å¦é—¨çš„ï¼Œæˆ‘å¾ˆéš¾å–œæ¬¢ä¸ŠæŸä¸ªåŸå¸‚ï¼Œæ¯”èµ·åŸå¸‚çš„é«˜ä½è´µè´±ï¼Œç”µå­åšå¼ˆï¼Œæˆ‘æ›´åœ¨æ„çš„æ˜¯æˆ‘ä¸è°ä¸€èµ·ç»å†è¿‡ä»€ä¹ˆï¼Œåˆ°è¿‡å“ªé‡Œï¼Œè§è¿‡å“ªé‡Œçš„é£æ™¯</p>
<p>æˆ‘ç»å¸¸è¯´å¦é—¨é‚£åœ°æ–¹ï¼Œå…¸å‹çš„å·¥èµ„ä½ï¼Œç‰©ä»·é«˜</p>
<p>æœ‹å‹è¯´ä»–ä¸æ˜¯æœ¬åœ°äººï¼Œæ¯æ¬¡ä¹°æµ·é²œéƒ½æ„Ÿè§‰ä¹°çš„å¾ˆè´µå¾ˆè´µï¼Œå¬å¦å¤§çš„å­¦é•¿è¯´å»ç å¤´ä¹°èƒ½ä¾¿å®œå¾ˆå¤š</p>
<p>æˆ‘è¯´ä¸æ˜¯ï¼Œç å¤´æœ‰ä¸€å®šæ¦‚ç‡ä¹°åˆ°æ–°é²œçš„ï¼Œè€Œä¸”å¾ˆéš¾ä¹°åˆ°ä¾¿å®œçš„</p>
<p>ä¸ºä»€ä¹ˆè¯´æœ‰æ¦‚ç‡ä¹°åˆ°æ–°é²œçš„ï¼Œå› ä¸ºé‚£æµ·é²œï¼Œä½ ä¸æ¸…æ¥šæ˜¯åˆšä»æµ·é‡Œæ‹‰ä¸Šæ¥çš„ï¼Œè¿˜æ˜¯æ˜¨å¤©æå¸‚åœºæºœäº†ä¸€åœˆåˆæ‹‰å›å»çš„ï¼Œåæ­£åœ¨äººçœ‹æ¥ï¼Œéƒ½æ˜¯åˆšä»èˆ¹ä¸Šæ‹‰ä¸‹å»ï¼Œå¸¦ç€æ–°é²œçš„æµ·æ°´å’Œè¢«æŠ˜è…¾çš„åŠæ­»ä¸æ´»çš„é±¼</p>
<p>è‡³äºä»·æ ¼ï¼Œäººä»¬ä¸€èˆ¬éƒ½ä¼šå¹é¼“è‡ªå·±çš„æ˜¯é‡ç”Ÿçš„ï¼Œä¼—æ‰€å‘¨çŸ¥çš„é“ç†ï¼Œé‡ç”Ÿçš„æ›´è´µï¼Œ<strong>ä¹Ÿæ²¡æœ‰æ‰‹æ®µè¯æ˜å®ƒæ˜¯ä¸æ˜¯çœŸçš„é‡ç”Ÿé±¼ï¼Œé™¤äº†ä»·æ ¼</strong></p>
<h2 data-id="heading-2">#03 å¦</h2>
<p>è¯»äº†å¥½å¤šå¹´ä¹¦ï¼Œå¦‚æœèƒ½é¡ºåˆ©æ¯•ä¸šçš„è¯æˆ‘å°±è¦æ¯•ä¸šäº†ï¼Œ<strong>è¿™è¯çœ‹èµ·æ¥æ²¡ä»€ä¹ˆä¿¡æ¯é‡ï¼Œå’Œæˆ‘è¯»çš„ç¡•å£«ä¸€æ ·</strong>ã€‚</p>
<p>çœ‹æ ‘æ´æœ‰äººé—®ä¿ç ”å’Œè€ƒç ”å“ªä¸ªæ›´è¾›è‹¦ï¼Œæˆ‘ä¸ç”¨ç‚¹å¼€éƒ½çŸ¥é“è¯„è®ºåŒºé“å®šå¼€æˆ˜äº†</p>
<p>ä¸€ä¸ªè€å“¥è¯´çš„å¾ˆæœ‰æ„æ€ï¼Œå·®ç‚¹çœ‹ç ´é˜²äº†</p>
<p><strong>è¯»ç ”æ›´è¾›è‹¦</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/507e271cdd05427db7b53d329c40b117~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29yZWR1bXA=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771401803&amp;x-signature=kmb34zq22PDdqFjfiQSspj5bAXA%3D" alt="b1aa7170df5fcb1ed7046ec6c77874fe" loading="lazy"/></p>
<p>è®°å¾—æœ‰ä¸€å¤©å‘ç ”ç©¶ç”Ÿè¡¥åŠ©çš„æ—¶å€™æˆ‘è¿˜åœ¨å’Œæœ‹å‹èŠå¤©</p>
<p>æœ‹å‹è¯´ä»–æ„Ÿè§‰äººç”Ÿåªå‰©ä¸‹äº†é“¶è¡Œå¡é‡Œçš„ä¸€ä¸²ä¸²æ•°å­—ï¼Œæ”¶å…¥å’Œæ”¯å‡ºï¼Œæ„Ÿè§‰åƒæ˜¯æŠŠçµé­‚å–ç»™äº†ç¤¾ä¼šï¼Œç…§é•œå­çš„æ—¶å€™æ„Ÿè§‰åŒçœ¼éƒ½å˜å¾—æµ‘æµŠäº†</p>
<p>æˆ‘çœ‹äº†çœ¼å±å¹•é‡Œé‚£ä¸€å †å‡å·é‡Œé¢çš„é†’ç›®çš„â€œâ•600â€ï¼Œè¿˜æ˜¯å›½å®¶èµé¥­ï¼Œæˆ‘åº”è¯¥æ˜¯è‚‰èº«å’Œçµé­‚éƒ½å–ç»™äº†å­¦æ ¡ï¼Œè¿˜æ˜¯é‚£ç§ 19 ä¸–çºªç¾å›½å—æ–¹é»‘å“¥æ‘˜æ£‰èŠ±çš„ä»·æ ¼</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/eb09d2d1fbfb494aac60e52c3f88c57f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29yZWR1bXA=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771401803&amp;x-signature=HHHnK1cGSPsU4ekRXXyye1yRw1g%3D" alt="IMG_5800" loading="lazy"/></p>
<p>å’Œæœ‹å‹é—²èŠï¼Œå¦‚æœèƒ½å†é€‰ä¸€æ¬¡çš„è¯æˆ‘ä¸€å®šä¸ä¼šè¯»ç ”ï¼Œå“ˆå“ˆ</p>
<p>äººå°±æ˜¯è¿™æ ·ï¼Œæ€»ä¼šåœ¨æŸä¸ªæ—¶æœŸè§‰å¾—è‡ªå·±æ›¾ç»åšçš„äº‹æƒ…ä¸æ­£ç¡®ï¼Œè¯´ä¸å®šå†è¿‡å‡ å¹´æˆ‘åˆè§‰å¾—ç°åœ¨åšçš„ä¸æ­£ç¡®äº†</p>
<p>ä¸è¿‡è¯è¯´å›æ¥ï¼Œå½“å¹´è§‰å¾—è‡ªå·±èƒ½ä¿ç ”å¯å‰å®³äº†ï¼Œç°åœ¨æƒ³æƒ³å°±å’Œç½‘ä¸Šé‚£ç§çœ‹ç€å°æ—¶å€™ä¸€é¢å¢™çš„å¥–çŠ¶ä¸€æ ·ï¼Œå¹æ¯ä¹‹å¢™</p>
<p>äººè¿˜æ˜¯ä¸è¦ç¾åŒ–ä»æœªèµ°è¿‡çš„é‚£æ¡è·¯ï¼Œä¸ç„¶å°±ä¼šä¸€ç›´çº ç»“å’Œåæ‚”ï¼Œç„¶åå‘ç°è¿™è¾ˆå­ç„¶åå¾ˆå¿«å°±è¿‡å»äº†</p>
<p>ä¹Ÿæ…¢æ…¢è§‰å¾—è‡ªå·±è€äº†ï¼Œå› ä¸ºå›è¿‡å¤´çœ‹ï¼Œå‘ç°è‡ªå·±å·²ç»é…ä¸ä¸Šè¿‡å»çš„è‡ªå·±äº†</p>
<p>å¦‚æœåœ¨å½“å¹´çŸ¥é“æœªæ¥æ˜¯è¿™æ ·ï¼Œæˆ–è®¸æ ¹æœ¬æ’‘ä¸è¿‡é«˜è€ƒé‚£æ®µæ—¶å…‰</p>
<p>å¤šå¹´ä¹‹åï¼Œæˆ‘åˆæ¢¦åˆ°é‚£å¤©ï¼Œç”»é¢é¥è¿œï¼Œä»¿ä½›å›åˆ°é«˜è€ƒé‚£ä¸€å¤©</p>
<p>æ„Ÿè§‰ï¼Œç¨å¾®æœ‰ç‚¹ç”Ÿä¸é€¢æ—¶ç½¢äº†</p>
<p>æƒ³èµ·æ¥å‰æ®µæ—¶é—´å…¬å¸å®£è®²ï¼Œè¯´æˆ‘ä»¬èµ¶ä¸Šäº†ä¸€ä¸ªå¾ˆå¥½çš„æ—¶ä»£ï¼Œå› ä¸ºæœ‰ AIï¼Œå¯æ˜¯ AI å¹¶æ²¡æœ‰å‘æŒ¥å®ƒåº”æœ‰çš„ä½œç”¨ï¼Œå¹¶æ²¡æœ‰è®©å·¥ä½œé‡å‡å°‘ï¼Œå·¥ä½œæ—¶é•¿å‡å°‘ï¼Œä¹Ÿæ²¡æœ‰é™ä½ç”Ÿæ´»æˆæœ¬ï¼Œæˆ¿ä»·ç‰©ä»·ï¼Œçœ‹ç—…è¿˜æ˜¯ä¸€æ ·æ˜‚è´µï¼Œå¤§å®¶çš„å‹åŠ›ä¹Ÿéƒ½è¿˜æ˜¯å¾ˆå¤§ï¼Œç”šè‡³æ›´ç„¦è™‘äº†ï¼Œæˆ‘ä»¬å¹¶æ²¡æœ‰å› æ­¤å˜å¾—æ›´å¹¸ç¦</p>
<p>é•¿æœŸæ¥è®²ï¼Œæˆ‘å¾ˆçœ‹å¥½ AIï¼Œä½†æ­¤æ—¶æ­¤åˆ»ï¼Œå¹¶ä¸è§‰å¾—è¿™æ˜¯ä¸€ä¸ªå¤šä¹ˆå¥½çš„æ—¶ä»£ï¼Œå³ä½¿è§è¯äº†ä»ä¼ ç»Ÿ CVã€NLP åˆ°å¤§æ¨¡å‹çš„èœ•å˜ã€‚å¤§æ¨¡å‹å‘å±•å¾—å¤ªå¿«äº†ï¼Œè¿˜è®°å¾— 22 å¹´åˆšå‡º GPT-3.5 çš„æ—¶å€™ï¼Œæœ‰äººæ„Ÿæ…¨æ¶Œç°å°±åƒå®‡å®™ç»™çš„ç¤¼ç‰©ä¸€æ ·ç¥å¥‡ï¼Œç°åœ¨å·²ç»æ²¡æœ‰äººå†å‘å‡ºè¿™ç§æ„Ÿæ…¨äº†ï¼Œé»˜è®¤å¤§æ¨¡å‹å°±å­˜åœ¨å’Œäººç±»å·®ä¸å¤šç”šè‡³æ›´å¼ºçš„æ™ºåŠ›äº†ï¼Œæ²¡æœ‰ä¸Šå¤æ—¶æœŸ NLP ç”¨ BERT èƒ¡è¨€ä¹±è¯­çš„æŠ˜ç£¨</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e1677b05db35482cbff65058ee3ae914~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29yZWR1bXA=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771401803&amp;x-signature=RhB9cz8cw7ORToR4TQIta0vvMKA%3D" alt="33d3a6e6a7db04a50aead8040afc78b1" loading="lazy"/></p>
<p>æƒ³èµ·ä¸ªå¾ˆå¥½ç¬‘çš„äº‹ï¼Œä»¥å‰ç ”ç©¶ç”Ÿæ–¹å‘ä¸æ˜¯ CV å°±æ˜¯ NLPï¼Œç°åœ¨ CV è¿˜æœ‰ç‚¹ï¼Œæ„Ÿè§‰ NLP å·²ç»ç»è¿¹äº†ï¼Œè™½ç„¶å¤§æ¨¡å‹ä¹Ÿç®—æ˜¯ä¸€ç§ NLP å§ï¼Œä½†å·²ç»æ²¡æœ‰å“ªä¸ªè€å¸ˆæ‹›ç”Ÿçš„æ—¶å€™ä¼šç»™ä½ è¯´ï¼šåŒå­¦ï¼Œæˆ‘çš„ç ”ç©¶æ–¹å‘æ˜¯ NLP ğŸ¤£</p>
<p>ç°åœ¨å·²ç»åˆ° AI Agent æ—¶ä»£äº†ï¼Œå›½å†…å¤–çš„ AI äº§å“å±‚å‡ºä¸ç©·æŠ¢å å¸‚åœºï¼Œä¹Ÿä¸å¾—ä¸æ„Ÿå¹å›½å†… AI å¤§æˆ˜çš„æœ´ç´ ï¼Œä¸€ä»£äººæœ‰ä¸€ä»£äººçš„é¸¡è›‹è¦é¢†</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/aed3c4a7a6b64877b33771be93454380~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29yZWR1bXA=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771401803&amp;x-signature=NJiBUua6zd%2BhRyllZLoh0GLjrkk%3D" alt="140c831cdcc83abd3e65bf054a050db3" loading="lazy"/></p>
<p>æ„Ÿè§‰æˆ‘ä»¬çš„ä¸–ç•Œå¯¹æ…¢èŠ‚å¥çš„äººå¾ˆä¸å‹å¥½ï¼Œé‚£ç§ç”°å›­ç‰§æ­Œçš„æ—¶ä»£æ—©å°±ä¸€å»ä¸å¤è¿”äº†ã€‚æˆ‘æ›¾ç»å¯¹ç§‘ç ”çš„æ†§æ†¬å®Œå…¨æ¥è‡ªäºç‰›é¡¿å’Œè‹¹æœæ ‘ï¼Œåº·å¾·æ¼«æ­¥äºå°å¾„ï¼Œæ¢­ç½—éšå±…ç“¦å°”ç™»æ¹–ï¼Œè€Œä¸æ˜¯ååœ¨ç”µè„‘é¢å‰ï¼Œè„ŠæŸ±ä¾§å¼¯ã€å±è‚¡å¾ˆé…¸ã€çœ¼ç›æ•£å…‰ï¼Œå’Œè®¡ç®—æœºæ‰“äº¤é“ï¼Œæœªæ¥åªæœ‰åƒä¸å®Œçš„è‹¦ã€‚</p>
<p>æˆ‘æ›¾ç»è§‰å¾—æˆ‘æ˜¯ä¼šå–œæ¬¢ç§‘ç ”çš„ï¼Œåœ¨æˆ‘æƒ³å‡ºè€å¸ˆä¹Ÿæ²¡æƒ³å‡ºæ¥çš„è¯¾é¢˜çš„æ—¶å€™ï¼Œæå‡ºä¸ä¸€æ ·çš„è§è§£çš„æ—¶å€™ï¼Œåœ¨ç»„ä¼šåˆ†äº«è®ºæ–‡çš„æ—¶å€™ï¼Œåšå‡ºè€³ç›®ä¸€æ–°çš„ PPT çš„æ—¶å€™ã€‚</p>
<p>ä¹Ÿè®¸æˆ‘ç¡®å®æ˜¯ï¼Œä½†æ˜¯æˆ‘è¿æ‰“æ¸¸æˆéƒ½æ²¡æ³•ä¸€å¤©å…«å°æ—¶æŒç»­ä¸€ä¸ªæœˆï¼Œç¤¾äº¤ä¸è¡Œï¼Œè·‘æ­¥ä¸è¡Œï¼Œå‰ä»–ä¹Ÿä¸è¡Œï¼Œå”¯ä¸€æˆåŠŸåšæŒè¿‡çš„çœ‹ä¼¼ä¹Ÿåªæœ‰è¯»ä¹¦ï¼Œè¯»é«˜ä¸­çš„æ—¶å€™ï¼Œä½†ä¹Ÿå¾—è€ƒè™‘åˆ°å’±ä»¬å­¦å…­é—¨è¯¾å‘¢ï¼Œè€Œä¸”çœŸæ˜¯å·®ç‚¹å°±æ­»äº†ã€‚</p>
<p><strong>æˆ‘ä¸å–œæ¬¢ç§‘ç ”ï¼Œè‡³å°‘æš‚æ—¶ä¸å–œæ¬¢</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a7e7d336a8b64f15930f1a65ac44b57b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29yZWR1bXA=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771401803&amp;x-signature=B%2F82IrtTeqV7gh2dBeRsOPKQheU%3D" alt="IMG_3128" loading="lazy"/></p>
<p>äººæ“…é•¿ä»€ä¹ˆé¢†åŸŸï¼Œå°±ä¼šåœ¨å¿ƒä¸­çš„ä»·å€¼å¤©å¹³ä¸Šç»™å®ƒåŠ ç ï¼Œä»¥ç¡®ä¿è‡ªå·±çš„ä»·å€¼åœ¨è‡ªå·±å¿ƒä¸­è¿‡å¾—å»ã€‚æˆ‘æƒ³é«˜è€ƒä¹‹äºæˆ‘å‡ ä¹æ‰€æœ‰çš„æ„ä¹‰å°±åœ¨äºæ­¤äº†ã€‚æˆ‘ç¡®è®¤è‡ªå·±çš„æ‰èƒ½ã€ä»·å€¼ã€æ½œåŠ›ï¼Œæˆ‘çŸ¥é“æˆ‘çš„å¤´è„‘ä¸ä¼šèƒŒå›æˆ‘ã€‚</p>
<p>ä¸è¿‡æˆ‘ä¹Ÿå› æ­¤å‘ç°ï¼Œæ— è®ºä¸€ç¯‡è®ºæ–‡å†™å¾—å¤šå¥½ï¼Œæ€»èƒ½æŒ‘å‡ºæ¥æ¯›ç—…ï¼Œåªè¦æˆ‘æƒ³æŒ‘æ¯›ç—…</p>
<p>ä¸æ˜¯æˆ‘æœ‰å¤šä¹ˆä¸°å¯Œçš„çŸ¥è¯†å’Œè§è§£ï¼Œè€Œæ˜¯æˆ‘å¿…é¡»å¾—æŒ‘ï¼Œå› ä¸ºç»„ä¼šè½®åˆ°æˆ‘åˆ†äº«è®ºæ–‡äº†</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/72112686cd51449eb92a293a5727dfb9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29yZWR1bXA=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771401803&amp;x-signature=c8fCfAru7%2BOx%2BSVQk6rLoViaqe0%3D" alt="IMG_2423" loading="lazy"/></p>
<p>æˆ‘æ—¶å¸¸æƒŠå¹äºæˆ‘æœ‹å‹çš„å­¦ä¹ èƒ½åŠ›å’Œç§‘ç ”æ°´å¹³ï¼Œä¹ŸæƒŠå¹äºæˆ‘æœ‹å‹ä¸ºäººå¤„äº‹çš„å…«é¢ç²ç‘ã€‚</p>
<p>ä»å°åˆ°å¤§æˆ‘è§è¿‡çš„æˆç»©å¥½çš„äººå¤ªå¤šäº†ï¼Œç„¶è€Œå¤©ä¸‹è‹±é›„å¦‚è¿‡æ±Ÿä¹‹é²«ï¼Œå³ä½¿ä½ ä¸‡é‡ŒæŒ‘ä¸€ï¼Œåœ¨è¿™é‡Œä¹Ÿæœ‰ 14 ä¸‡ä¸ªï¼Œæ›´ä½•å†µä¸–ç•Œä¸æ­¢ä¸­å›½ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/42c9c3e34ec244a4bdf95438024619be~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29yZWR1bXA=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771401803&amp;x-signature=vTqAkgrVK1Al%2FpbltG%2F%2Fao1ShN8%3D" alt="Screenshot 2025-08-10 at 15.34.22" loading="lazy"/></p>
<p>ç„¶è€Œå¹¸ç¦æ˜¯ä¸€ç§ç‹¬ç«‹äºå®¢è§‚å­˜åœ¨çš„èƒ½åŠ›ï¼Œå°±åƒç‰©å€ºäºŒåˆ†æ³•ï¼Œæ‰€æœ‰æƒçš„å˜åŠ¨æ— æ•ˆå¹¶ä¸æ„å‘³ç€ä¹°å–åˆåŒæ— æ•ˆ â€”â€” ä½ çœ‹åˆ°ä»€ä¹ˆï¼Œå¬åˆ°ä»€ä¹ˆï¼Œæ„Ÿå—åˆ°ä»€ä¹ˆï¼Œæ‰æ˜¯æœ€é‡è¦çš„ï¼Œè·Ÿå®¢è§‚ä¸–ç•Œæ˜¯ä»€ä¹ˆæ ·çš„ã€è·Ÿåˆ«äººæ€ä¹ˆçœ‹ä½ æ— å…³ã€‚</p>
<p>æ‰€ä»¥å¹¸ç¦ä¸æ˜¯é‚£ç§ä¸€ä¸‹è¢«äººæµæ¨åˆ°ç™«ç‹‚çš„çŸ­æš‚æ¬¢ä¹ï¼Œè€Œæ˜¯ä¸€ç§é•¿æœŸå¹³å’Œçš„æ»¡è¶³ã€‚å°±æŒ‰ä¸€çº¿åŸå¸‚äººå‡å¯¿å‘½ 80 å²æ¥ç®—ï¼Œæ‰£é™¤æœ€åå‡ å¹´æ²¡æœ‰è´¨é‡çš„ç”Ÿå‘½ï¼Œå†æ‰£é™¤å·²ç»è¿‡å»çš„ 18 å¹´ï¼Œä»¥åŠ 4 å¹´æœ¬ç§‘ã€3 å¹´ç¡•å£«å æ®ç°æœ‰ç”Ÿå‘½çš„ä»½é¢ï¼Œåˆèƒ½å‰©ä¸‹å¤šå°‘å¹´çš„äººç”Ÿå‘¢ï¼Ÿ</p>
<p>æ—¢ç„¶äººç”Ÿæ°¸è¿œæ²¡æœ‰å²¸ï¼Œä½ çš„ä½“éªŒéš¾é“å°±ä¸é‡è¦å—ï¼Ÿ</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ecd40e9a5c04462fb6af820a73682881~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29yZWR1bXA=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771401803&amp;x-signature=Oa7j8PUBMSo%2BkLlViX1vLrDPmQo%3D" alt="Screenshot 2025-08-10 at 15.40.13" loading="lazy"/></p>
<p>æœ‰æ—¶ä¼šæƒ³ï¼Œåˆ°åº•ä»€ä¹ˆæ ·çš„äººç”Ÿæ˜¯å¹¸ç¦çš„äººç”Ÿå‘¢ï¼Ÿ</p>
<p>æœ‰é¡¹ç ”ç©¶è¡¨æ˜ï¼Œä¸€ä¸ªäººåœ¨å¹´è€çš„æ—¶å€™èº«ä½“å’Œçµé­‚éƒ½å¾ˆå¥åº·ï¼Œè¿˜å¯¹è‡ªå·±å¾ˆæ»¡æ„çš„è¯ï¼Œä»–çš„äººç”Ÿå°±æ˜¯å¹¸ç¦çš„ã€‚è¿™é‡Œæ—¢åŒ…å«äº†ä¸ªäººå¯¹è‡ªå·±çš„è¯„ä¼°ï¼Œä¹Ÿè¦è€ƒé‡åŒ»ç”Ÿå’Œå¿ƒç†å­¦å®¶çš„è¯„ä¼°ã€‚</p>
<p>è¿™ä¸ªç ”ç©¶çš„å¥½å¤„æ˜¯æŠŠå¹¸ç¦çš„äººç”Ÿå…·ä½“åŒ–äº†ã€‚ä¸è¿‡ï¼Œç ”ç©¶ä¹Ÿè¡¨æ˜ï¼Œä½ å¯èƒ½ç­‰ä¸åŠåˆ°é€€ä¼‘çš„æ—¶å€™å†æ¥è¯„ä¼°è‡ªå·±çš„ä¸€ç”Ÿã€‚</p>
<p>æ‰€ä»¥æœ‹å‹è¯´ä»–åœ¨çŠ¹è±«äº¤ä¸äº¤å…»è€ä¿é™©ï¼Œä»–æ„Ÿè§‰æ´»ä¸åˆ°é€€ä¼‘ï¼Œå³ä½¿æ´»åˆ°äº†ï¼ŒæŒ‰å½“å‰ç”Ÿè‚²ç‡æ¨æ–­ï¼Œä¹Ÿæ˜¯å¤§æ¦‚ç‡æ²¡äººç»™æˆ‘ä»¬äº¤å…»è€é‡‘ã€‚</p>
<p>æ€»è§‰å¾—äººç”Ÿè·¯å¾ˆé•¿ï¼Œæœªæ¥è¿˜å¯ä»¥åšå¾ˆå¤šäº‹ï¼Œæˆ‘æƒ³äº†æƒ³<strong>ä¹Ÿæœªå¿…å¾ˆé•¿ï¼Œäººå¾ˆéš¾è¯´ä»€ä¹ˆæ—¶å€™ä¼šæ­»</strong>ï¼Œæœç”Ÿå¤•æ­»ä¹Ÿå¹¶éä¸å¯èƒ½</p>
<p>æˆ‘ä»¬æ€»æ˜¯ä»¥å¯¹æœªæ¥ç¾å¥½çš„æ†§æ†¬ï¼Œæ¥å‡é‡Šå½“ä¸‹çš„è‹¦éš¾ï¼Œåªæ˜¯ç¾å¥½ä¸€ç›´æ²¡æœ‰åˆ°æ¥ï¼Œç«äº‰å€’æ˜¯æ°¸æ— æ­¢æ¯</p>
<p>æˆ‘ä¸æƒ³è¿™æ ·ï¼Œä½†æœ‰æ—¶å€™åˆæ²¡å¾—é€‰</p>
<h2 data-id="heading-3">#04 å€’å¸¦äººç”Ÿ</h2>
<p>ä»æˆ‘è®°äº‹èµ·ï¼Œå°±è®°å¾—å§¥å§¥å®¶çš„é™¢å­é‡Œï¼Œç§ç€ä¸€é¢—å¤§é“¶ææ ‘ã€‚æ¯å¹´æ˜¥å¤ï¼Œæå¤´æ€»æ˜¯æŒ‚ç€ä¸€ç‰‡ç»¿æ„ã€‚ç­‰ç§‹å¤©ä¸€åˆ°ï¼Œé‡‘ç¿ç¿çš„å¶å­å°±åœ¨é£ä¸­æ‹›æ‘‡ã€‚é£å°†è½å¶å¸¦å»è¿œæ–¹ï¼Œå¤©ç©ºé£˜ç€çš„äº‘å¾ˆæ˜¯æ˜äº®ã€‚æˆ‘åªæ˜¯å®‰é™åœ°çœ‹ç€ï¼Œé‚»å±…å®¶é‚£åªçˆ±è¶´åœ¨æˆ‘å®¶å±‹æªä¸Šï¼Œå‘¼å‘¼å¤§ç¡çš„çŒ«å’ªï¼Œå°±èƒ½è™šåº¦ä¸€ä¸‹åˆçš„æ—¶å…‰ã€‚</p>
<p>æˆ‘è¿™äººå¾ˆç®€å•</p>
<p>å¦‚æœæœ‰æ˜Ÿå·´å…‹å’Œç‘å¹¸ï¼Œæˆ‘ä¸€å®šä¼šå»å–ç‘å¹¸ï¼Œå› ä¸ºæˆ‘å–ä¸å‡ºä»–ä»¬æœ‰ä»€ä¹ˆåŒºåˆ«</p>
<p>ä½†å¦‚æœæ˜¯ç‘å¹¸å’Œåº“è¿ªï¼Œæˆ‘ä¸€å®šä¼šå»å–ç‘å¹¸ï¼Œå“ªæ€•ç‘å¹¸åå‡ å—ä¸€ç“¶ï¼Œå› ä¸ºæˆ‘å–å¾—å‡ºæ¥åŒºåˆ«</p>
<p>æˆ‘å–œæ¬¢æ²¡æœ‰æ„ä¹‰çš„ä¸œè¥¿ï¼Œæˆ–è€…è¯´çº¯ç²¹çš„ä¸œè¥¿ï¼Œæ¯”å¦‚å–œå‰§ç‰‡æˆ–æ‚¬ç–‘ç‰‡ï¼Œæˆ‘ä¸å–œæ¬¢å¯¹æˆ‘è¯´æ•™çš„ï¼Œè•´å«æ·±åˆ»é“ç†çš„å–œå‰§ï¼Œè¿™ç§è¿˜ä¸å¦‚è®©æˆ‘å»çœ‹é»‘é©¬ç¨‹åºå‘˜ç½‘è¯¾å’Œå›½è€ƒ 980 ç³»ç»Ÿç­</p>
<p>å°æ—¶å€™æˆ‘çœ‹äº†å¥½å‡ æ¬¡ä¸œé‚ªè¥¿æ¯’ï¼Œä½†å½“æ—¶çœ‹ä¸æ‡‚ï¼Œæ‰€ä»¥æ›´å–œæ¬¢ä¸œæˆè¥¿å°±è¿™æ ·çº¯ç²¹çš„è’è°¬ä¸æ¬¢ç¬‘ï¼Œå¤§è¯è¥¿æ¸¸è¿™æ ·çš„åˆ»éª¨é“­å¿ƒçš„æ„Ÿæƒ…</p>
<p>åœ¨ç‹å®¶å«çš„ç”µå½±å“²å­¦é‡Œï¼Œæ­¦ä¾ ã€æ±Ÿæ¹–çš†æˆæ‘†è®¾ï¼Œå”¯æœ‰çˆ±ä¸å­¤ç‹¬æ‰æ˜¯äº˜å¤ä¸å˜çš„ç²¾ç¥ä¸»é¢˜</p>
<p>çˆ¶æ¯æ€»è¯´é•¿å¤§åå°±èƒ½çœ‹æ‡‚ï¼Œä½†æˆ‘å·²ç»å¾ˆä¹…æ²¡æœ‰å†çœ‹äº†ï¼Œå› ä¸ºæˆ‘è§‰å¾—æˆ‘è¿˜æ˜¯çœ‹ä¸æ‡‚</p>
<p>æœ‰äº›ä¸œè¥¿ï¼Œæˆ‘å¹¶ä¸è§‰å¾—ä¼šéšç€é˜…å†æˆ–è€…ç»éªŒçš„å¢é•¿è€Œæ”¹å˜</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/10bb350ff4784eb4863e17859eb4536c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29yZWR1bXA=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771401803&amp;x-signature=lC09ahfDbgQQPTFGFUOcU952HKs%3D" alt="Screenshot 2025-08-10 at 15.39.55" loading="lazy"/></p>
<p>ä¸€æ¬¡å¶ç„¶ï¼Œåˆä¸­åŒå­¦èŠå¤©ï¼Œä»–è¯´æˆ‘å˜äº†ï¼Œå…¶å®å¥½å¤šäººä¹Ÿè¯´è¿‡ï¼Œåˆ°åˆä¸­ä¹‹åå°±å¼€å§‹äº†</p>
<p>ä¸è¿‡ä»–ä»¬æ€»ä¼šå¯¹å¤–è²Œæˆç»©ä¸€ç±»çš„æ„Ÿå…´è¶£ï¼Œæˆ–è€…æ„Ÿåˆ°æƒŠè®¶</p>
<p>å…¶å®äººçœŸæ­£æ”¹å˜çš„æ˜¯å†…å¿ƒï¼Œå†…å¿ƒçš„æ”¹å˜æ˜¯å‡ ä¹ä¸ä¼šè¡¨éœ²åœ¨å¤–çš„</p>
<p>æ‰€ä»¥æˆ‘ä¸€èˆ¬éƒ½æŠŠä»–ä»¬çš„è¯å½“è€³æ—é£</p>
<p><strong>å› ä¸ºä»æ¥æ²¡æœ‰äººé—®è¿‡æˆ‘ç»å†è¿‡ä»€ä¹ˆ</strong></p>
<p>æˆ‘æœ‰æ—¶ä¼šæƒ³åˆ°ä¸€ä¸ªé«˜ä¸­æ—¶å¾ˆå¥½çš„æœ‹å‹èº«å‰ï¼Œä¸€ä¸ªå’Œæˆ‘åœ¨å¤§å¤§å°å°çš„è€ƒè¯•ä¸­å¯¹äºåæ¬¡è¾ƒåŠ²çš„äºº</p>
<p>æˆ‘æ›¾ç»å¾ˆæƒ³é—®é—®ä»–ï¼Œä½ çœ‹æˆ‘æœ‰å‡ åˆ†åƒä»å‰</p>
<p>ä½†æ˜¯å·²ç»è§‰å¾—æœ‰äº›æ„å…´é˜‘çŠï¼Œåšå¦‚ç£çŸ³çš„å‹è°Šä¹Ÿä¼šåœ¨å²æœˆä¸‹ç£¨æŸï¼Œæœ€ç»ˆæ¶ˆé€</p>
<p>æå°‘æ•°äººå±äºæœ¨æ¡¶ä¸­çš„ç¾é…’ï¼Œå²æœˆæµé€åï¼Œåè€Œè¶Šå‘é†‡é¦™</p>
<p>å¾ˆæ˜æ˜¾ï¼Œå³ä½¿æ˜¯ä»–ï¼Œä¹Ÿå±äºå‰è€…</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c47a5f0abcbe48fc867dbfe9a457c39f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29yZWR1bXA=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771401803&amp;x-signature=lGzUYH57ID7JiCy6ph3vPEPpb9A%3D" alt="Screenshot 2025-08-10 at 15.34.59" loading="lazy"/></p>
<p>æˆ‘ä¸€ç›´è§‰å¾—ï¼Œæˆ‘ä»¥å‰å’Œç°åœ¨ï¼Œæœ¬è´¨ä¸Šå¹¶æ²¡æœ‰å¤ªå¤§çš„å˜åŒ–ï¼Œç›´åˆ°æˆ‘çœ‹åˆ°æ›¾ç»è‡ªå·±å†™çš„æ—¥å¯„</p>
<p>æˆ‘éœ€è¦æ‰¿è®¤ï¼Œæˆ‘å’Œä»¥å‰ä¸ä¸€æ ·äº†</p>
<p>æˆ‘ä¸å†æ•¢æ‰“æ•¢æ‹¼ï¼Œä¸å†ä¹‰æ— åé¡¾ï¼Œæˆ‘ä¼šçŠ¹è±«ï¼Œä¼šæƒè¡¡åˆ©å¼Šï¼Œä¼šå®³æ€•æœªæ¥ï¼Œä¼šæ€€ç–‘è‡ªå·±</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ef9a78845f994e47a2ebd458abde97e9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29yZWR1bXA=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771401803&amp;x-signature=2fyiSUxs5mhYNeZZTKlcI5iNaB0%3D" alt="Screenshot 2025-08-10 at 15.31.15" loading="lazy"/></p>
<p>å¾ˆä¹…ä»¥å‰çœ‹ anlin è€å¸ˆçš„æ–‡ç« ï¼Œè®°å¾—è¯„è®ºåŒºæœ‰å¥è¯è¯´ï¼Œè¯´æ˜¯å¦‚æœæœ‰ä¸€å¤© anlin è€å¸ˆä¸å†æ›´æ–°æ–‡ç« äº†ï¼Œè¯´ä¸å®šä¸æ˜¯ä¸€ä»¶åäº‹ï¼Œå› ä¸ºè¿™è¯´æ˜ anlin è€å¸ˆåœ¨åŠªåŠ›ç”Ÿæ´»ï¼Œæˆ–è€…è¿‡å¾—ä¸é”™ï¼Œæ‰€ä»¥ä¸å†å†™æ—¥å¯„äº†</p>
<p><strong>å¯æˆ‘ä¸æ˜¯</strong></p>
<p>æˆ‘æƒ³æŠŠè¿™å¥è¯æ”¹æ”¹ï¼Œæˆ‘çš„æ—¥å¯„å¤§å¤šæ•°æ—¶å€™éƒ½å¾ˆä¸§ï¼Œå…¶ä¸­è™½ç„¶æœ‰æˆ‘ä¸ªäººçš„åŸå› åœ¨ï¼Œä½†ä¹Ÿæœ‰æ·±å¤œå†™æ–‡ç« çš„ buff åŠ æˆï¼Œæˆ‘å¸Œæœ›æœ‰ä¸€å¤©ï¼Œå¤§å®¶éƒ½èƒ½è¿‡å¾—ä¸é”™ï¼Œè¿™æ ·å°±ä¸ç”¨çœ‹æˆ‘çš„æ–‡ç« æ¥æ‰¾ä¸€äº›ä»€ä¹ˆç²¾ç¥å…±é¸£äº†ï¼Œä½†æˆ‘è¿˜æ˜¯å¸Œæœ›æä¾›ä¸€äº›å…¶ä»–ä¸œè¥¿åœ¨ï¼Œæ¯”å¦‚æˆ‘çš„å¤±è´¥ç»å†ã€æˆ‘çš„è¸©å‘ç»éªŒï¼Œä¹Ÿå¸Œæœ›å¯¹ä½ æœ‰äº›å¸®åŠ©</p>
<p>æœ‰æ—¶å€™æ€»åœ¨æƒ³äººåˆ°åº•ä¸ºäº†ä»€ä¹ˆè€Œæ´»</p>
<p>æˆ‘é—®å®¶é‡Œä¸€ä¸ªé•¿è¾ˆï¼Œä»–è¯´æ˜¯ä¸ºäº†ä»–å¥³å„¿ï¼Œæˆ‘è§‰å¾—å¤ªä¿—å¥—</p>
<p>æˆ‘é—®è¿˜åœ¨ä¸Šé«˜ä¸­å¿«è¦é«˜è€ƒçš„è¡¨å¦¹ï¼Œå¥¹è¯´æ˜¯ä¸ºäº†è‡ªå·±ï¼Œæˆ‘è§‰å¾—å¤ªçƒ­è¡€</p>
<p>æˆ‘é—®äº†ä¸å°‘äººï¼Œå¤§å¤šè¯´æ³•éƒ½å¾ˆåƒç¯‡ä¸€å¾‹</p>
<p>æˆ‘æƒ³åˆ°é—®ä¸€ä¸ªå¤§å­¦æ—¶å€™å¾ˆä¸­äºŒçš„æœ‹å‹ï¼Œä»–è¯´æˆ‘è„‘å­æ˜¯ä¸æ˜¯è¿›æ°´äº†</p>
<p>æˆ‘è¯´æˆ‘åœ¨æ€è€ƒäººç”Ÿï¼Œè¿™æ˜¯ä¸ªå¤§äº‹</p>
<p>ä»–è¯´ç¦å·æœ‰å®¶æ—¥æ–™è‡ªåŠ©æ‰“æŠ˜äº†ï¼Œå‡†å¤‡æ‰¾ç©ºå»åƒ</p>
<p>æˆ‘ä¹Ÿåœ¨çœ‹è‡ªåŠ©ï¼Œä½†æ˜¯è‡ªåŠ©çš„ä»·æ ¼æ€»æ˜¯å¾ˆè´µ</p>
<p>ä½†æ˜¯è¦æ˜¯èƒ½ç¡å‰ä¹°ä¸€å¼ è‡ªåŠ©é¤ç¥¨ï¼Œç„¶åç¡é†’äº†å»åä¸€æ®µä¸é•¿ä¸çŸ­çš„åœ°é“ï¼Œç‹ ç‹ åœ°åƒä¸€é¡¿</p>
<p>è¿™æ ·æ´»ç€ä¹Ÿè¿˜ä¸é”™</p>
<p>ä½†äººæ€»ä¼šå‘Šåˆ«è¿™ä¸ªä¸–ç•Œï¼Œå¦‚æœæ˜¯ç”Ÿç—…çš„è¯ï¼Œåº”è¯¥ä¼šæœ‰ä¸€ä¸ªæ—¶é—´å‘¨æœŸï¼Œå¦‚æœçœŸæœ‰è¿™ä¹ˆä¸€å¤©ï¼Œæˆ‘ä¸å¸Œæœ›ä½ é‡åˆ°æˆ‘æ—¶ï¼Œå’Œæˆ‘è¯´ä½ æœ‰å¤šèˆä¸å¾—æˆ‘ï¼Œä»€ä¹ˆæ²¡æˆ‘ä¸è¡Œï¼Œä»€ä¹ˆæ˜æ˜çŸ¥é“æ²¡æœ‰å¸Œæœ›è¿˜é¼“åŠ±æˆ‘çš„è¯ï¼Œä»€ä¹ˆæ²¡æœ‰ä½ æ—¥å­æ€ä¹ˆè¿‡ï¼Œä½ æœ‰ä»€ä¹ˆäº‹æƒ…è¿˜æ²¡æœ‰åšï¼Œç­‰ä½ å¥½äº†æˆ‘ä»¬ä¸€èµ·å»æ€æ ·æ€æ ·...</p>
<p>æˆ‘æ›´æƒ³å¬çš„æ˜¯ï¼Œä½ æœ‰å¤šä¹ˆæ€€å¿µæˆ‘ï¼Œæˆ‘è¿™è¾ˆå­å·²ç»å®Œæˆäº†ä»€ä¹ˆï¼Œå‘Šè¯‰æˆ‘æ¥ä¸‹æ¥çš„æ—¥å­æ²¡æœ‰æˆ‘ä½ ä»¬ä»ç„¶ä¼šå¥½å¥½è¿‡</p>
<p>è¿™å°±è¶³å¤Ÿäº†</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f48ccdb5a603468da441529dee154ea6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29yZWR1bXA=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771401803&amp;x-signature=UAgfYnwYj5eLexlxGZeEydKMD9I%3D" alt="image-20260207193109269" loading="lazy"/></p>
<p>æœ€è¿‘è´¼æœ‰æ„æ€ï¼Œæœ‹å‹å’Œå¯¹è±¡åµæ¶è¦åˆ†æ‰‹ï¼Œæœ‹å‹çš„å¯¹è±¡é—®ï¼šé‚£æˆ‘ä»¬ä¹‹å‰çš„å›å¿†ç®—ä»€ä¹ˆï¼Ÿ</p>
<p>TA è¯´è¿™ç®—ä½ è®°æ€§å¥½</p>
<p>å¥³ç”Ÿåˆè¯´ï¼šå¦‚æœæœªæ¥å†ç›¸è§å‘¢ï¼Ÿ</p>
<p>TA è¯´é‚£ç®—ä½ è¿æ°”å¥½</p>
<p>æˆ‘çš„è¿æ°”å°±æŒºç‚¹èƒŒçš„ï¼Œè¯´äº†å†è§çš„äººåŸºæœ¬æ²¡èƒ½å†è§è¿‡</p>
<p>æœ‰äº›ç¼˜åˆ†å°±åƒåŒ—å¹³çš„ç§‹é›¨ï¼Œä¸è´ªå¿ƒä¾¿æ˜¯è½å¶è½»è¦†çš„æ€å¿µï¼Œè¿‡åˆ†æ‰§ç€å°±æˆäº†æœ›ä¸ç©¿çš„ç»µç»µæ°´å¸˜</p>
<p><strong>ä¸€ç”Ÿå¾ˆé•¿ï¼Œå¾ˆå¤šäººä¸ä¼šæ°¸è¿œåœ¨æˆ‘çš„ç”Ÿæ´»é‡Œï¼Œä½†ä¼šæ°¸è¿œåœ¨æˆ‘çš„æ•…äº‹é‡Œ</strong></p>
<p>æœ‹å‹è¯´é…’æ˜¯ä¸‡èƒ½çš„ï¼Œé…ä»€ä¹ˆéƒ½èƒ½å–ï¼Œä¹Ÿæ²¡ä»€ä¹ˆå¿Œå£</p>
<p>æˆ‘è¯´ä¹Ÿä¸ä¸€å®šï¼Œå’Œå¤´å­¢å°±èƒ½èµ·ååº”</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a9089c51e340438da5ec47ee465d1a1c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29yZWR1bXA=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771401803&amp;x-signature=vBEF5oRh5Y%2BtwFANeHePW6rkMkE%3D" alt="Screenshot 2025-08-10 at 15.38.56" loading="lazy"/></p>
<p>æœ€è¿‘å¿«æ”¾å‡äº†ï¼Œæˆ‘æœ‹å‹è¯´å¥½ä¹…æ²¡æ¥è§è¿‡æˆ‘äº†ï¼Œé—®æˆ‘æœ‰æ²¡æœ‰ç©ºï¼Œè¯´æ˜¯æƒ³æˆ‘äº†</p>
<p>æˆ‘å‘ç°äººå¯ä»¥ç”¨æ‡’è¿™ä¸ªè¯è§£é‡Šå¾ˆå¤šäº‹æƒ…ï¼Œç‰¹åˆ«æ˜¯åœ¨ç°ä»£ç¤¾ä¼š</p>
<p>æ¯”å¦‚æ‡’å¾—èµ·äº†ï¼Œæ‡’å¾—å­¦äº†ï¼Œæ‡’å¾—å·äº†ï¼Œæ‡’å¾—è§äº†</p>
<p>æ‘†çƒ‚è¿™ä¸ªè¯æŒºå¥½ï¼Œå¯ä»¥ç§°å¾—ä¸Šæ˜¯ç«‹ä½“é˜²å¾¡</p>
<p>ä»€ä¹ˆæ—¶å€™ç­‰æˆ‘æ‘†æ˜ç™½äº†ï¼Œæˆ–è®¸å°±çœ‹å¼€äº†</p>
<p>æœ‰æ—¶ä¹Ÿä¼šæƒ³åœ¨å¯’å‡å»è§ä¸€è§å¤šå¹´æœªè§çš„æœ‹å‹ï¼Œæœ‰æ—¶åˆè§‰å¾—ä¸å€¼å¾—</p>
<p>æ¯”å¦‚èˆå¼ƒä¸€äº›å®ä¹ çš„æœºä¼šï¼Œç§‘ç ”çš„æ—¶é—´</p>
<p><strong>ä¸ºäº†æ‰€è°“çš„æ­£ç¡®ã€æˆåŠŸï¼Œäººä»¬ä¸æ–­å¤±å»</strong></p>
<p>æˆ‘æ˜¯é‚£ç§ä¼šå› ä¸ºé¢„æ–™åˆ°å°†æ¥çš„ç¦»åˆ«è€Œå»çæƒœä¸å½“ä¸‹æœ‹å‹ç›¸å¤„æ—¶é—´çš„äºº</p>
<p>ä½†ä¸æ˜¯æ‰€æœ‰äººéƒ½è¿™æ ·ï¼Œæ‰€ä»¥å¤§å¤šæ•°æƒ…å†µä¸‹æˆ‘éƒ½æ˜¯åœ¨æµªè´¹æ„Ÿæƒ…</p>
<p>è¿™æ˜¯ä¸€ä¸ªæµè¡Œç¦»å¼€çš„ä¸–ç•Œï¼Œä½†æ˜¯æˆ‘ä»¬éƒ½ä¸æ“…é•¿å‘Šåˆ«ï¼Œæ—¶é—´ä¸ä¼šæŠšå¹³æ‚²ä¼¤ï¼Œåªä¼šè®©äººæ·¡ç„¶</p>
<p>æˆ‘æ˜¯ä¸ªè®¡åˆ’æ€§æ¯”è¾ƒå¼ºçš„äººï¼Œä½†å”¯ä¸€ä¸å¯èƒ½è®¡åˆ’çš„ä¾¿æ˜¯ç”Ÿå‘½çš„é•¿åº¦ï¼Œæˆ‘ä»¬å¾€å¾€åœ¨è¿½å¯»å…¶ä¸­å¿½è§†äº†å®ƒçš„å®½åº¦ï¼Œå¿˜è®°å»åˆ›é€ æ›´å¤šçš„ä»·å€¼ï¼Œæˆ‘ä»¬ä¸çŸ¥é“è‡ªå·±ç”Ÿå‘½çš„é•¿çŸ­ï¼Œä½†æˆ‘ä»¬ç°åœ¨è¿˜åœ¨è¿™ä¸ªä¸–ç•Œä¸Šï¼Œå°±åº”è¯¥å¥½å¥½ç”Ÿæ´»ã€‚ç”Ÿå‘½æœ¬æ¥å°±ä¸é•¿ï¼Œç„¦è™‘ä¹Ÿæ˜¯ä¸€å¤©ï¼Œå¼€å¿ƒä¹Ÿæ˜¯ä¸€å¤©ï¼Œä¸ºä½•ä¸å¼€å¼€å¿ƒå¿ƒçš„è¿‡</p>
<p>æœ€è¿‘çœ‹è¿‡ä¸€å¥è¯ï¼Œä¸çŸ¥é“å‡ºè‡ªå“ªé‡Œï¼Œè¯´æ˜¯â€œä»Šå¤©å¯ä»¥æ­»ï¼Œæ˜å¤©ä¹Ÿå¯ä»¥æ´»â€ï¼Œè¿™ç§å¢ƒç•Œæ˜¯å¾ˆé«˜çš„</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2b974f2769bc4898ae20e8f4e9d96bd4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29yZWR1bXA=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771401803&amp;x-signature=xQTAF6X9IXhZAd8d4kI88JLPK%2FU%3D" alt="img" loading="lazy"/></p>
<p>å½“æˆ‘åœ¨å†™è¿™ç¯‡å¹´ç»ˆæ—¶ï¼Œæ­£åœ¨ä¸ºå­¦ä¹ å’Œç”Ÿæ´»ä¸Šçš„ä¸€åœ°é¸¡æ¯›è€Œçƒ¦æ¼ç€ã€‚</p>
<p>ä¸çŸ¥ä½ ä»¬ä¼šä¸ä¼šä¹Ÿåƒæˆ‘ä¸€æ ·ï¼Œåœ¨è¿‡å»æˆ–æœªæ¥çš„æŸä¸ªæ—¶åˆ»ï¼Œä¹Ÿåœ¨æ€€å¿µç€é‚£ä¸ªæ— å¿§çš„å¹´ä»£ã€‚</p>
<p><strong>è½å¶éšç€é£ä¸€é˜µæ‘†åŠ¨ï¼Œå®¶ä¹¡çš„é“¶ææ ‘ä¸€ç›´éƒ½åœ¨ï¼Œå¯æ˜¯æˆ‘å·²ç»å›ä¸å»äº†</strong></p>
<h2 data-id="heading-4">#05 ç”Ÿæ´»ç¢ç‰‡</h2>
<p>äººçš„çƒ¦æ¼å°±æ˜¯è®°æ€§å¤ªå¥½ï¼Œå¦‚æœå¯ä»¥æŠŠæ‰€æœ‰äº‹éƒ½å¿˜æ‰ï¼Œä»¥åæ¯ä¸€å¤©éƒ½æ˜¯ä¸ªæ–°å¼€å§‹ï¼Œä½ è¯´å¤šå¥½</p>
<p><strong>æ—¶é—´æ”¹å˜äº†å¤ªå¤šä¸œè¥¿äº†</strong></p>
<blockquote>
<p>æ€»è¦åšç‚¹ä»€ä¹ˆè‡ªå·±è®¤ä¸ºæ­£ç¡®çš„äº‹</p>
</blockquote>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/aefb24def2154712a20d8df727975885~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29yZWR1bXA=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771401803&amp;x-signature=k0EDhpRy%2FsTAEWbYpjbryhYpgKU%3D" alt="IMG_8178" loading="lazy"/></p>
<blockquote>
<p>ä¾æ—§ Eason</p>
</blockquote>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a1599e47c29245d5892cad8e40881a06~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29yZWR1bXA=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771401803&amp;x-signature=RPcXJhwDmxE5yvf5RRizvD3Fqj4%3D" alt="IMG_8174" loading="lazy"/></p>
<blockquote>
<p>JayChou ä»Šå¹´å€’æ˜¯å¬å°‘äº†</p>
</blockquote>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4f3e5001b47649ffa620b4caf928cfd6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29yZWR1bXA=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771401803&amp;x-signature=HLbJhggceaT5SETpGAL0iKoAlW4%3D" alt="IMG_8176" loading="lazy"/></p>
<blockquote>
<p>LeetCode 2025</p>
</blockquote>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5f7ac0d3e7694c1eaaaa2063cb6c3c00~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29yZWR1bXA=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771401803&amp;x-signature=08KccyO5wWpv%2B7FdaaCnSps5WDo%3D" alt="IMG_6507" loading="lazy"/></p>
<blockquote>
<p>ğŸ“· æ‘„å½±æ˜¯æˆ‘å‰²èˆä¸å»çš„çˆ±å¥½</p>
</blockquote>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3cc0127d12d748448da1bfa1ae067bab~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29yZWR1bXA=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771401803&amp;x-signature=bk8iDW3OgAfVHJeL7caoYTQ%2FN1g%3D" alt="6fba819e71870abe011e10ee428f6b07" loading="lazy"/></p>
<blockquote>
<p>ç•¥æ‡‚äº›æ¸¸æˆ</p>
</blockquote>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/725f4bc1dbd6491b91c04ad54ce837a5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29yZWR1bXA=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771401803&amp;x-signature=nI0wumjcI%2B0hMJ230qg8rPG5xBg%3D" alt="e8bd49c009317151783585ea76dba568" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bffa5e86e0004c8a99b1a94afa109ba2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29yZWR1bXA=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771401803&amp;x-signature=hgwxQHzU%2BTVXAwAFCkKbeJy85Ug%3D" alt="858436270d98ea632151263fcf4daf5b" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/67bf1e74508b409ea7dba074d54d18f4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29yZWR1bXA=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771401803&amp;x-signature=Gjw%2FFFqN%2Fzx3JhBD7ok0AwoJ1Hk%3D" alt="IMG_8172" loading="lazy"/></p>
<blockquote>
<p>æ™šéœ</p>
</blockquote>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e4227ccd5f044f67a3e891165bd824a7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29yZWR1bXA=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771401803&amp;x-signature=7fnqgj8grBZz3lM6JjEYvd01Q6Y%3D" alt="8a743a6c20cd75acedb7908bfd0d1397" loading="lazy"/></p>
<blockquote>
<p>è·¨å¹´æ™šä¼š</p>
</blockquote>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/518557190e9d4bd3b75e914eaf0b5ab0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29yZWR1bXA=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771401803&amp;x-signature=zN1IUVImVxC0cC7O91xKY9uuvdA%3D" alt="P1000439" loading="lazy"/></p>
<p>å¤œæ™šæœ‰é£ï¼Œä½†ä¸å†·ï¼Œç™½å¤©çš„ä½™æ¸©è¿˜æ²¡æ•£å»ï¼Œé£å¹æ¥åªè§‰å¾—å‡‰çˆ½</p>
<p>å¾ˆåƒå¤§ä¸‰åˆšä¿ç ”å®Œåœ¨æ¹–è¾¹å¹é£çš„é‚£ä¸ªå¤œæ™šï¼Œæ„æ°”é£å‘</p>
<p>ä¸è¿‡æ„æ°”é£å‘è¿™ä¸ªè¯ä»¿ä½›æ°¸è¿œéƒ½ä¸å†é€‚åˆæˆ‘äº†</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b29c54f0a1fe454898e8fbb26242afbe~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29yZWR1bXA=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771401803&amp;x-signature=gKGvdqrD9fIR%2FWd%2B0pKuDQMbm0g%3D" alt="2e24ee37470ef4910e30365fd81c4659" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è®¾è®¡æ¨¡å¼-è¡Œä¸ºå‹]]></title>    <link>https://juejin.cn/post/7605174711181443135</link>    <guid>https://juejin.cn/post/7605174711181443135</guid>    <pubDate>2026-02-11T08:08:48.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605174711181443135" data-draft-id="7605142381152763967" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è®¾è®¡æ¨¡å¼-è¡Œä¸ºå‹"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯,è®¾è®¡æ¨¡å¼"/> <meta itemprop="datePublished" content="2026-02-11T08:08:48.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç‰›å¥¶"/> <meta itemprop="url" content="https://juejin.cn/user/1169536100866487"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è®¾è®¡æ¨¡å¼-è¡Œä¸ºå‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1169536100866487/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç‰›å¥¶
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-11T08:08:48.000Z" title="Wed Feb 11 2026 08:08:48 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">è®¾è®¡æ¨¡å¼-è¡Œä¸ºå‹</h2>
<blockquote>
<p>æœ¬æ–‡ä¸»è¦ä»‹ç»ä¸‹è¡Œä¸ºå‹è®¾è®¡æ¨¡å¼ï¼ŒåŒ…æ‹¬<code>ç­–ç•¥æ¨¡å¼</code>ã€<code>æ¨¡æ¿æ–¹æ³•æ¨¡å¼</code>ã€<code>è§‚å¯Ÿè€…æ¨¡å¼</code>ã€<code>è¿­ä»£å™¨æ¨¡å¼</code>ã€<code>è´£ä»»é“¾æ¨¡å¼</code>ã€<code>å‘½ä»¤æ¨¡å¼</code>ã€<code>å¤‡å¿˜å½•æ¨¡å¼</code>ã€<code>çŠ¶æ€æ¨¡å¼</code>ã€<code>è®¿é—®è€…æ¨¡å¼</code>ã€<code>ä¸­ä»‹è€…æ¨¡å¼</code>å’Œ<code>è§£é‡Šå™¨æ¨¡å¼</code>ï¼Œæä¾›å‰ç«¯åœºæ™¯å’Œ ES6 ä»£ç çš„å®ç°è¿‡ç¨‹ã€‚
ä¾›è‡ªå·±ä»¥åæŸ¥æ¼è¡¥ç¼ºï¼Œä¹Ÿæ¬¢è¿åŒé“æœ‹å‹äº¤æµå­¦ä¹ ã€‚</p>
</blockquote>
<h3 data-id="heading-1">å¼•è¨€</h3>
<p>æœ¬æ–‡ä¸»è¦ä»‹ç»ä¸‹è¡Œä¸ºå‹è®¾è®¡æ¨¡å¼ï¼ŒåŒ…æ‹¬<code>ç­–ç•¥æ¨¡å¼</code>ã€<code>æ¨¡æ¿æ–¹æ³•æ¨¡å¼</code>ã€<code>è§‚å¯Ÿè€…æ¨¡å¼</code>ã€<code>è¿­ä»£å™¨æ¨¡å¼</code>ã€<code>è´£ä»»é“¾æ¨¡å¼</code>ã€<code>å‘½ä»¤æ¨¡å¼</code>ã€<code>å¤‡å¿˜å½•æ¨¡å¼</code>ã€<code>çŠ¶æ€æ¨¡å¼</code>ã€<code>è®¿é—®è€…æ¨¡å¼</code>ã€<code>ä¸­ä»‹è€…æ¨¡å¼</code>å’Œ<code>è§£é‡Šå™¨æ¨¡å¼</code>ï¼Œæä¾›å‰ç«¯åœºæ™¯å’Œ ES6 ä»£ç çš„å®ç°è¿‡ç¨‹ã€‚</p>
<h3 data-id="heading-2">ä»€ä¹ˆæ˜¯è¡Œä¸ºå‹</h3>
<p>è¡Œä¸ºå‹æ¨¡å¼ï¼ˆ<code>Behavioral Patterns</code>ï¼‰ä¸»è¦å…³æ³¨å¯¹è±¡ä¹‹é—´çš„<code>é€šä¿¡</code>å’Œ<code>èŒè´£åˆ†é…</code>ã€‚è¿™äº›æ¨¡å¼æè¿°äº†å¯¹è±¡ä¹‹é—´å¦‚ä½•<code>åä½œ</code>å…±åŒå®Œæˆä»»åŠ¡ï¼Œä»¥åŠå¦‚ä½•<code>åˆ†é…èŒè´£</code>ã€‚è¡Œä¸ºå‹æ¨¡å¼ä¸ä»…å…³æ³¨ç±»å’Œå¯¹è±¡çš„ç»“æ„ï¼Œæ›´å…³æ³¨å®ƒä»¬ä¹‹é—´çš„<code>ç›¸äº’ä½œç”¨</code>ï¼Œé€šè¿‡å®šä¹‰æ¸…æ™°çš„é€šä¿¡æœºåˆ¶ï¼Œè§£å†³ç³»ç»Ÿä¸­å¤æ‚çš„<code>æ§åˆ¶æµ</code>é—®é¢˜ï¼Œä½¿å¾—ä»£ç æ›´åŠ æ¸…æ™°ã€çµæ´»å’Œæ˜“äºç»´æŠ¤ã€‚</p>
<h3 data-id="heading-3">è¡Œä¸ºå‹æ¨¡å¼</h3>
<h3 data-id="heading-4">ç­–ç•¥æ¨¡å¼ï¼ˆStrategyï¼‰</h3>
<p>ç­–ç•¥æ¨¡å¼ï¼ˆ<code>Strategy Pattern</code>ï¼‰å®šä¹‰ä¸€ç³»åˆ—çš„ç®—æ³•ï¼ŒæŠŠå®ƒä»¬ä¸€ä¸ªä¸ªå°è£…èµ·æ¥ï¼Œå¹¶ä½¿å®ƒä»¬å¯ä»¥<code>ç›¸äº’æ›¿æ¢</code>ã€‚ç­–ç•¥æ¨¡å¼è®©ç®—æ³•ç‹¬ç«‹äºä½¿ç”¨å®ƒçš„å®¢æˆ·è€Œå˜åŒ–ã€‚</p>
<h4 data-id="heading-5">å‰ç«¯ä¸­çš„ç­–ç•¥æ¨¡å¼åœºæ™¯</h4>
<ul>
<li><strong>è¡¨å•éªŒè¯</strong>ï¼šå°†ä¸åŒçš„éªŒè¯è§„åˆ™ï¼ˆå¦‚éç©ºã€é‚®ç®±æ ¼å¼ã€æ‰‹æœºå·æ ¼å¼ï¼‰å°è£…æˆç­–ç•¥ï¼Œæ ¹æ®éœ€è¦é€‰æ‹©éªŒè¯ç­–ç•¥ã€‚</li>
<li><strong>ä¸åŒä¸šåŠ¡é€»è¾‘å¤„ç†</strong>ï¼šä¾‹å¦‚ï¼Œæ ¹æ®ç”¨æˆ·æƒé™ï¼ˆæ™®é€šç”¨æˆ·ã€VIPã€ç®¡ç†å‘˜ï¼‰å±•ç¤ºä¸åŒçš„ UI æˆ–æ‰§è¡Œä¸åŒçš„é€»è¾‘ã€‚</li>
<li><strong>ç¼“åŠ¨åŠ¨ç”»ç®—æ³•</strong>ï¼šåœ¨åŠ¨ç”»åº“ä¸­ï¼Œæä¾›å¤šç§ç¼“åŠ¨å‡½æ•°ï¼ˆå¦‚ <code>linear</code>ã€<code>ease-in</code>ã€<code>ease-out</code>ï¼‰ä¾›ç”¨æˆ·é€‰æ‹©ã€‚</li>
</ul>
<h4 data-id="heading-6">ç­–ç•¥æ¨¡å¼-JSå®ç°</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç­–ç•¥å¯¹è±¡</span>
<span class="hljs-keyword">const</span> strategies = {
  <span class="hljs-string">"S"</span>: <span class="hljs-function">(<span class="hljs-params">salary</span>) =&gt;</span> salary * <span class="hljs-number">4</span>,
  <span class="hljs-string">"A"</span>: <span class="hljs-function">(<span class="hljs-params">salary</span>) =&gt;</span> salary * <span class="hljs-number">3</span>,
  <span class="hljs-string">"B"</span>: <span class="hljs-function">(<span class="hljs-params">salary</span>) =&gt;</span> salary * <span class="hljs-number">2</span>
};

<span class="hljs-comment">// ç¯å¢ƒç±»ï¼ˆContextï¼‰</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Bonus</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">salary, strategy</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">salary</span> = salary;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">strategy</span> = strategy;
  }

  <span class="hljs-title function_">getBonus</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> strategies[<span class="hljs-variable language_">this</span>.<span class="hljs-property">strategy</span>](<span class="hljs-variable language_">this</span>.<span class="hljs-property">salary</span>);
  }
}

<span class="hljs-comment">// å®¢æˆ·ç«¯è°ƒç”¨</span>
<span class="hljs-keyword">const</span> bonusS = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Bonus</span>(<span class="hljs-number">10000</span>, <span class="hljs-string">"S"</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(bonusS.<span class="hljs-title function_">getBonus</span>()); <span class="hljs-comment">// 40000</span>

<span class="hljs-keyword">const</span> bonusA = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Bonus</span>(<span class="hljs-number">10000</span>, <span class="hljs-string">"A"</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(bonusA.<span class="hljs-title function_">getBonus</span>()); <span class="hljs-comment">// 30000</span>
</code></pre>
<h3 data-id="heading-7">æ¨¡æ¿æ–¹æ³•æ¨¡å¼ï¼ˆTemplate Methodï¼‰</h3>
<p>æ¨¡æ¿æ–¹æ³•æ¨¡å¼ï¼ˆ<code>Template Method Pattern</code>ï¼‰å®šä¹‰ä¸€ä¸ªæ“ä½œä¸­çš„ç®—æ³•çš„<code>éª¨æ¶</code>ï¼Œè€Œå°†ä¸€äº›æ­¥éª¤<code>å»¶è¿Ÿ</code>åˆ°å­ç±»ä¸­å®ç°ã€‚</p>
<p>æ¨¡æ¿æ–¹æ³•ä½¿å¾—å­ç±»å¯ä»¥åœ¨ä¸æ”¹å˜ç®—æ³•ç»“æ„çš„æƒ…å†µä¸‹ï¼Œé‡æ–°å®šä¹‰ç®—æ³•çš„æŸäº›æ­¥éª¤ã€‚</p>
<h4 data-id="heading-8">å‰ç«¯ä¸­çš„æ¨¡æ¿æ–¹æ³•æ¨¡å¼åœºæ™¯</h4>
<ul>
<li><strong>UIç»„ä»¶ç”Ÿå‘½å‘¨æœŸ</strong>ï¼š<code>Vue</code> æˆ– <code>React</code> ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸé’©å­ï¼ˆå¦‚ <code>componentDidMount</code>ã€<code>created</code>ï¼‰å°±æ˜¯æ¨¡æ¿æ–¹æ³•æ¨¡å¼çš„åº”ç”¨ã€‚æ¡†æ¶å®šä¹‰äº†ç»„ä»¶æ¸²æŸ“çš„æ•´ä½“æµç¨‹ï¼Œå¼€å‘è€…åœ¨ç‰¹å®šçš„é’©å­ä¸­å®ç°è‡ªå®šä¹‰é€»è¾‘ã€‚</li>
<li><strong>HTTPè¯·æ±‚å°è£…</strong>ï¼šå®šä¹‰ä¸€ä¸ªåŸºç¡€çš„è¯·æ±‚ç±»ï¼Œå¤„ç†é€šç”¨çš„é…ç½®ï¼ˆå¦‚ URLã€Headersï¼‰ï¼Œå­ç±»å®ç°å…·ä½“çš„è¯·æ±‚é€»è¾‘ï¼ˆå¦‚ GETã€POST å‚æ•°å¤„ç†ï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-9">æ¨¡æ¿æ–¹æ³•æ¨¡å¼-JSå®ç°</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æŠ½è±¡çˆ¶ç±»ï¼šé¥®æ–™</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Beverage</span> {
  <span class="hljs-comment">// æ¨¡æ¿æ–¹æ³•ï¼Œå®šä¹‰ç®—æ³•éª¨æ¶</span>
  <span class="hljs-title function_">makeBeverage</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">boilWater</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">brew</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">pourInCup</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">addCondiments</span>();
  }

  <span class="hljs-title function_">boilWater</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"ç…®æ²¸æ°´"</span>);
  }

  <span class="hljs-title function_">pourInCup</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"å€’è¿›æ¯å­"</span>);
  }

  <span class="hljs-comment">// æŠ½è±¡æ–¹æ³•ï¼Œå­ç±»å¿…é¡»å®ç°</span>
  <span class="hljs-title function_">brew</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">"æŠ½è±¡æ–¹æ³•ä¸èƒ½è°ƒç”¨"</span>);
  }

  <span class="hljs-title function_">addCondiments</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">"æŠ½è±¡æ–¹æ³•ä¸èƒ½è°ƒç”¨"</span>);
  }
}

<span class="hljs-comment">// å…·ä½“å­ç±»ï¼šå’–å•¡</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Coffee</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Beverage</span> {
  <span class="hljs-title function_">brew</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"ç”¨æ²¸æ°´å†²æ³¡å’–å•¡"</span>);
  }

  <span class="hljs-title function_">addCondiments</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"åŠ ç³–å’Œç‰›å¥¶"</span>);
  }
}

<span class="hljs-comment">// å…·ä½“å­ç±»ï¼šèŒ¶</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Tea</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Beverage</span> {
  <span class="hljs-title function_">brew</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"ç”¨æ²¸æ°´æµ¸æ³¡èŒ¶å¶"</span>);
  }

  <span class="hljs-title function_">addCondiments</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"åŠ æŸ æª¬"</span>);
  }
}

<span class="hljs-comment">// å®¢æˆ·ç«¯è°ƒç”¨</span>
<span class="hljs-keyword">const</span> coffee = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Coffee</span>();
coffee.<span class="hljs-title function_">makeBeverage</span>();
<span class="hljs-comment">// è¾“å‡ºï¼š</span>
<span class="hljs-comment">// ç…®æ²¸æ°´</span>
<span class="hljs-comment">// ç”¨æ²¸æ°´å†²æ³¡å’–å•¡</span>
<span class="hljs-comment">// å€’è¿›æ¯å­</span>
<span class="hljs-comment">// åŠ ç³–å’Œç‰›å¥¶</span>

<span class="hljs-keyword">const</span> tea = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Tea</span>();
tea.<span class="hljs-title function_">makeBeverage</span>();
<span class="hljs-comment">// è¾“å‡ºï¼š</span>
<span class="hljs-comment">// ç…®æ²¸æ°´</span>
<span class="hljs-comment">// ç”¨æ²¸æ°´æµ¸æ³¡èŒ¶å¶</span>
<span class="hljs-comment">// å€’è¿›æ¯å­</span>
<span class="hljs-comment">// åŠ æŸ æª¬</span>
</code></pre>
<h3 data-id="heading-10">è§‚å¯Ÿè€…æ¨¡å¼ï¼ˆObserverï¼‰</h3>
<p>è§‚å¯Ÿè€…æ¨¡å¼ï¼ˆ<code>Observer Pattern</code>ï¼‰å®šä¹‰å¯¹è±¡é—´çš„ä¸€ç§<code>ä¸€å¯¹å¤š</code>çš„ä¾èµ–å…³ç³»ï¼Œå½“ä¸€ä¸ªå¯¹è±¡çš„çŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶ï¼Œæ‰€æœ‰ä¾èµ–äºå®ƒçš„å¯¹è±¡éƒ½å¾—åˆ°é€šçŸ¥å¹¶è¢«è‡ªåŠ¨æ›´æ–°ã€‚</p>
<h4 data-id="heading-11">å‰ç«¯ä¸­çš„è§‚å¯Ÿè€…æ¨¡å¼åœºæ™¯</h4>
<ul>
<li><strong>DOMäº‹ä»¶ç›‘å¬</strong>ï¼š<code>document.addEventListener</code> å°±æ˜¯æœ€å…¸å‹çš„è§‚å¯Ÿè€…æ¨¡å¼ã€‚</li>
<li><strong>Promise</strong>ï¼š<code>then</code> æ–¹æ³•ä¹Ÿæ˜¯ä¸€ç§è§‚å¯Ÿè€…æ¨¡å¼ï¼Œå½“ Promise çŠ¶æ€æ”¹å˜æ—¶ï¼Œæ‰§è¡Œç›¸åº”çš„å›è°ƒã€‚</li>
<li><strong>Vueå“åº”å¼ç³»ç»Ÿ</strong>ï¼š<code>Dep</code>ï¼ˆç›®æ ‡ï¼‰å’Œ <code>Watcher</code>ï¼ˆè§‚å¯Ÿè€…ï¼‰å®ç°äº†æ•°æ®çš„å“åº”å¼æ›´æ–°ã€‚</li>
<li><strong>RxJS</strong>ï¼šåŸºäºè§‚å¯Ÿè€…æ¨¡å¼çš„å“åº”å¼ç¼–ç¨‹åº“ã€‚</li>
<li><strong>Event Bus</strong>ï¼šäº‹ä»¶æ€»çº¿ã€‚</li>
</ul>
<h4 data-id="heading-12">è§‚å¯Ÿè€…æ¨¡å¼-JSå®ç°</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç›®æ ‡å¯¹è±¡ï¼ˆSubjectï¼‰</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Subject</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">observers</span> = [];
  }

  <span class="hljs-title function_">addObserver</span>(<span class="hljs-params">observer</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">observers</span>.<span class="hljs-title function_">push</span>(observer);
  }

  <span class="hljs-title function_">removeObserver</span>(<span class="hljs-params">observer</span>) {
    <span class="hljs-keyword">const</span> index = <span class="hljs-variable language_">this</span>.<span class="hljs-property">observers</span>.<span class="hljs-title function_">indexOf</span>(observer);
    <span class="hljs-keyword">if</span> (index &gt; -<span class="hljs-number">1</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">observers</span>.<span class="hljs-title function_">splice</span>(index, <span class="hljs-number">1</span>);
    }
  }

  <span class="hljs-title function_">notify</span>(<span class="hljs-params">data</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">observers</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">observer</span> =&gt;</span> {
      observer.<span class="hljs-title function_">update</span>(data);
    });
  }
}

<span class="hljs-comment">// è§‚å¯Ÿè€…å¯¹è±¡ï¼ˆObserverï¼‰</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Observer</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">name</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;
  }

  <span class="hljs-title function_">update</span>(<span class="hljs-params">data</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span> æ”¶åˆ°é€šçŸ¥: <span class="hljs-subst">${data}</span>`</span>);
  }
}

<span class="hljs-comment">// å®¢æˆ·ç«¯è°ƒç”¨</span>
<span class="hljs-keyword">const</span> subject = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Subject</span>();
<span class="hljs-keyword">const</span> observer1 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Observer</span>(<span class="hljs-string">"è§‚å¯Ÿè€…1"</span>);
<span class="hljs-keyword">const</span> observer2 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Observer</span>(<span class="hljs-string">"è§‚å¯Ÿè€…2"</span>);

subject.<span class="hljs-title function_">addObserver</span>(observer1);
subject.<span class="hljs-title function_">addObserver</span>(observer2);

subject.<span class="hljs-title function_">notify</span>(<span class="hljs-string">"æ›´æ–°æ•°æ®äº†ï¼"</span>);
<span class="hljs-comment">// è¾“å‡ºï¼š</span>
<span class="hljs-comment">// è§‚å¯Ÿè€…1 æ”¶åˆ°é€šçŸ¥: æ›´æ–°æ•°æ®äº†ï¼</span>
<span class="hljs-comment">// è§‚å¯Ÿè€…2 æ”¶åˆ°é€šçŸ¥: æ›´æ–°æ•°æ®äº†ï¼</span>
</code></pre>
<h3 data-id="heading-13">è¿­ä»£å™¨æ¨¡å¼ï¼ˆIteratorï¼‰</h3>
<p>è¿­ä»£å™¨æ¨¡å¼ï¼ˆ<code>Iterator Pattern</code>ï¼‰æä¾›ä¸€ç§æ–¹æ³•<code>é¡ºåºè®¿é—®</code>ä¸€ä¸ªèšåˆå¯¹è±¡ä¸­çš„å„ä¸ªå…ƒç´ ï¼Œè€Œåˆä¸æš´éœ²å…¶å†…éƒ¨çš„è¡¨ç¤ºã€‚</p>
<h4 data-id="heading-14">å‰ç«¯ä¸­çš„è¿­ä»£å™¨æ¨¡å¼åœºæ™¯</h4>
<ul>
<li><strong>æ•°ç»„éå†</strong>ï¼š<code>forEach</code>ã€<code>map</code> ç­‰æ•°ç»„æ–¹æ³•ã€‚</li>
<li><strong>ES6 Iterator</strong>ï¼š<code>Symbol.iterator</code> æ¥å£ï¼Œä½¿å¾—å¯¹è±¡å¯ä»¥ä½¿ç”¨ <code>for...of</code> å¾ªç¯éå†ã€‚</li>
<li><strong>Generators</strong>ï¼šç”Ÿæˆå™¨å‡½æ•°å¯ä»¥ç”Ÿæˆè¿­ä»£å™¨ã€‚</li>
</ul>
<h4 data-id="heading-15">è¿­ä»£å™¨æ¨¡å¼-JSå®ç°</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// è‡ªå®šä¹‰è¿­ä»£å™¨</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Iterator</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">items</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span> = items;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">index</span> = <span class="hljs-number">0</span>;
  }

  <span class="hljs-title function_">hasNext</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">index</span> &lt; <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>.<span class="hljs-property">length</span>;
  }

  <span class="hljs-title function_">next</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>[<span class="hljs-variable language_">this</span>.<span class="hljs-property">index</span>++];
  }
}

<span class="hljs-comment">// å®¢æˆ·ç«¯è°ƒç”¨</span>
<span class="hljs-keyword">const</span> items = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>];
<span class="hljs-keyword">const</span> iterator = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Iterator</span>(items);

<span class="hljs-keyword">while</span> (iterator.<span class="hljs-title function_">hasNext</span>()) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(iterator.<span class="hljs-title function_">next</span>());
}
<span class="hljs-comment">// è¾“å‡ºï¼š1 2 3</span>

<span class="hljs-comment">// ES6 Iterator ç¤ºä¾‹</span>
<span class="hljs-keyword">const</span> iterableObj = {
  <span class="hljs-attr">items</span>: [<span class="hljs-number">10</span>, <span class="hljs-number">20</span>, <span class="hljs-number">30</span>],
  [<span class="hljs-title class_">Symbol</span>.<span class="hljs-property">iterator</span>]() {
    <span class="hljs-keyword">let</span> index = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">next</span>: <span class="hljs-function">() =&gt;</span> {
        <span class="hljs-keyword">if</span> (index &lt; <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>.<span class="hljs-property">length</span>) {
          <span class="hljs-keyword">return</span> { <span class="hljs-attr">value</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>[index++], <span class="hljs-attr">done</span>: <span class="hljs-literal">false</span> };
        } <span class="hljs-keyword">else</span> {
          <span class="hljs-keyword">return</span> { <span class="hljs-attr">done</span>: <span class="hljs-literal">true</span> };
        }
      }
    };
  }
};

<span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> item <span class="hljs-keyword">of</span> iterableObj) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(item);
}
<span class="hljs-comment">// è¾“å‡ºï¼š10 20 30</span>
</code></pre>
<h3 data-id="heading-16">è´£ä»»é“¾æ¨¡å¼ï¼ˆChain of Responsibilityï¼‰</h3>
<p>è´£ä»»é“¾æ¨¡å¼ï¼ˆ<code>Chain of Responsibility Pattern</code>ï¼‰ä½¿å¤šä¸ªå¯¹è±¡éƒ½æœ‰æœºä¼šå¤„ç†è¯·æ±‚ï¼Œä»è€Œé¿å…è¯·æ±‚çš„å‘é€è€…å’Œæ¥æ”¶è€…ä¹‹é—´çš„è€¦åˆå…³ç³»ã€‚å°†è¿™äº›å¯¹è±¡è¿æˆä¸€æ¡é“¾ï¼Œå¹¶æ²¿ç€è¿™æ¡é“¾ä¼ é€’è¯¥è¯·æ±‚ï¼Œç›´åˆ°æœ‰ä¸€ä¸ªå¯¹è±¡å¤„ç†å®ƒä¸ºæ­¢ã€‚</p>
<h4 data-id="heading-17">å‰ç«¯ä¸­çš„è´£ä»»é“¾æ¨¡å¼åœºæ™¯</h4>
<ul>
<li><strong>äº‹ä»¶å†’æ³¡</strong>ï¼šDOM äº‹ä»¶åœ¨ DOM æ ‘ä¸­çš„å†’æ³¡æœºåˆ¶å°±æ˜¯è´£ä»»é“¾æ¨¡å¼ã€‚</li>
<li><strong>ä¸­é—´ä»¶</strong>ï¼š<code>Express</code>ã€<code>Koa</code>ã€<code>Redux</code> ä¸­çš„ä¸­é—´ä»¶æœºåˆ¶ã€‚</li>
<li><strong>æ‹¦æˆªå™¨</strong>ï¼š<code>Axios</code> çš„è¯·æ±‚å’Œå“åº”æ‹¦æˆªå™¨ã€‚</li>
</ul>
<h4 data-id="heading-18">è´£ä»»é“¾æ¨¡å¼-JSå®ç°</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å¤„ç†å™¨åŸºç±»</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Handler</span> {
  <span class="hljs-title function_">setNext</span>(<span class="hljs-params">handler</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">nextHandler</span> = handler;
    <span class="hljs-keyword">return</span> handler; <span class="hljs-comment">// è¿”å› handler ä»¥æ”¯æŒé“¾å¼è°ƒç”¨</span>
  }

  <span class="hljs-title function_">handleRequest</span>(<span class="hljs-params">request</span>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">nextHandler</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">nextHandler</span>.<span class="hljs-title function_">handleRequest</span>(request);
    }
  }
}

<span class="hljs-comment">// å…·ä½“å¤„ç†å™¨</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">HandlerA</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Handler</span> {
  <span class="hljs-title function_">handleRequest</span>(<span class="hljs-params">request</span>) {
    <span class="hljs-keyword">if</span> (request === <span class="hljs-string">'A'</span>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"HandlerA å¤„ç†äº†è¯·æ±‚"</span>);
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-variable language_">super</span>.<span class="hljs-title function_">handleRequest</span>(request);
    }
  }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">HandlerB</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Handler</span> {
  <span class="hljs-title function_">handleRequest</span>(<span class="hljs-params">request</span>) {
    <span class="hljs-keyword">if</span> (request === <span class="hljs-string">'B'</span>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"HandlerB å¤„ç†äº†è¯·æ±‚"</span>);
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-variable language_">super</span>.<span class="hljs-title function_">handleRequest</span>(request);
    }
  }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">HandlerC</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Handler</span> {
  <span class="hljs-title function_">handleRequest</span>(<span class="hljs-params">request</span>) {
    <span class="hljs-keyword">if</span> (request === <span class="hljs-string">'C'</span>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"HandlerC å¤„ç†äº†è¯·æ±‚"</span>);
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"æ²¡æœ‰å¤„ç†å™¨å¤„ç†è¯¥è¯·æ±‚"</span>);
    }
  }
}

<span class="hljs-comment">// å®¢æˆ·ç«¯è°ƒç”¨</span>
<span class="hljs-keyword">const</span> handlerA = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HandlerA</span>();
<span class="hljs-keyword">const</span> handlerB = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HandlerB</span>();
<span class="hljs-keyword">const</span> handlerC = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HandlerC</span>();

handlerA.<span class="hljs-title function_">setNext</span>(handlerB).<span class="hljs-title function_">setNext</span>(handlerC);

handlerA.<span class="hljs-title function_">handleRequest</span>(<span class="hljs-string">'A'</span>); <span class="hljs-comment">// HandlerA å¤„ç†äº†è¯·æ±‚</span>
handlerA.<span class="hljs-title function_">handleRequest</span>(<span class="hljs-string">'B'</span>); <span class="hljs-comment">// HandlerB å¤„ç†äº†è¯·æ±‚</span>
handlerA.<span class="hljs-title function_">handleRequest</span>(<span class="hljs-string">'C'</span>); <span class="hljs-comment">// HandlerC å¤„ç†äº†è¯·æ±‚</span>
handlerA.<span class="hljs-title function_">handleRequest</span>(<span class="hljs-string">'D'</span>); <span class="hljs-comment">// æ²¡æœ‰å¤„ç†å™¨å¤„ç†è¯¥è¯·æ±‚</span>
</code></pre>
<h3 data-id="heading-19">å‘½ä»¤æ¨¡å¼ï¼ˆCommandï¼‰</h3>
<p>å‘½ä»¤æ¨¡å¼ï¼ˆ<code>Command Pattern</code>ï¼‰å°†ä¸€ä¸ª<code>è¯·æ±‚å°è£…</code>ä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œä»è€Œä½¿ç”¨æˆ·å¯ç”¨ä¸åŒçš„è¯·æ±‚å¯¹å®¢æˆ·è¿›è¡Œå‚æ•°åŒ–ï¼›å¯¹è¯·æ±‚æ’é˜Ÿæˆ–è®°å½•è¯·æ±‚æ—¥å¿—ï¼Œä»¥åŠæ”¯æŒå¯æ’¤é”€çš„æ“ä½œã€‚</p>
<h4 data-id="heading-20">å‰ç«¯ä¸­çš„å‘½ä»¤æ¨¡å¼åœºæ™¯</h4>
<ul>
<li><strong>å¯Œæ–‡æœ¬ç¼–è¾‘å™¨</strong>ï¼šæ‰§è¡ŒåŠ ç²—ã€æ–œä½“ã€ä¸‹åˆ’çº¿ç­‰æ“ä½œï¼Œå¹¶æ”¯æŒæ’¤é”€ï¼ˆUndoï¼‰å’Œé‡åšï¼ˆRedoï¼‰ã€‚</li>
<li><strong>èœå•å’ŒæŒ‰é’®</strong>ï¼šå°†èœå•é¡¹æˆ–æŒ‰é’®çš„æ“ä½œå°è£…æˆå‘½ä»¤å¯¹è±¡ã€‚</li>
</ul>
<h4 data-id="heading-21">å‘½ä»¤æ¨¡å¼-JSå®ç°</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ¥æ”¶è€…ï¼šæ‰§è¡Œå®é™…å‘½ä»¤</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Receiver</span> {
  <span class="hljs-title function_">execute</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"æ‰§è¡Œå‘½ä»¤"</span>);
  }
}

<span class="hljs-comment">// å‘½ä»¤å¯¹è±¡</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Command</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">receiver</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">receiver</span> = receiver;
  }

  <span class="hljs-title function_">execute</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">receiver</span>.<span class="hljs-title function_">execute</span>();
  }
}

<span class="hljs-comment">// è°ƒç”¨è€…ï¼šå‘èµ·å‘½ä»¤</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Invoker</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">command</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">command</span> = command;
  }

  <span class="hljs-title function_">invoke</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"è°ƒç”¨è€…å‘èµ·è¯·æ±‚"</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">command</span>.<span class="hljs-title function_">execute</span>();
  }
}

<span class="hljs-comment">// å®¢æˆ·ç«¯è°ƒç”¨</span>
<span class="hljs-keyword">const</span> receiver = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Receiver</span>();
<span class="hljs-keyword">const</span> command = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Command</span>(receiver);
<span class="hljs-keyword">const</span> invoker = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Invoker</span>(command);

invoker.<span class="hljs-title function_">invoke</span>();
<span class="hljs-comment">// è¾“å‡ºï¼š</span>
<span class="hljs-comment">// è°ƒç”¨è€…å‘èµ·è¯·æ±‚</span>
<span class="hljs-comment">// æ‰§è¡Œå‘½ä»¤</span>
</code></pre>
<h3 data-id="heading-22">å¤‡å¿˜å½•æ¨¡å¼ï¼ˆMementoï¼‰</h3>
<p>å¤‡å¿˜å½•æ¨¡å¼ï¼ˆ<code>Memento Pattern</code>ï¼‰åœ¨ä¸ç ´åå°è£…æ€§çš„å‰æä¸‹ï¼Œæ•è·ä¸€ä¸ªå¯¹è±¡çš„å†…éƒ¨çŠ¶æ€ï¼Œå¹¶åœ¨è¯¥å¯¹è±¡ä¹‹å¤–ä¿å­˜è¿™ä¸ªçŠ¶æ€ã€‚è¿™æ ·ä»¥åå°±å¯å°†è¯¥å¯¹è±¡æ¢å¤åˆ°åŸå…ˆä¿å­˜çš„çŠ¶æ€ã€‚</p>
<h4 data-id="heading-23">å‰ç«¯ä¸­çš„å¤‡å¿˜å½•æ¨¡å¼åœºæ™¯</h4>
<ul>
<li><strong>çŠ¶æ€ç®¡ç†</strong>ï¼š<code>Redux</code> ç­‰çŠ¶æ€ç®¡ç†åº“çš„æ—¶é—´æ—…è¡Œï¼ˆTime Travelï¼‰åŠŸèƒ½ã€‚</li>
<li><strong>è¡¨å•è‰ç¨¿</strong>ï¼šä¿å­˜ç”¨æˆ·è¾“å…¥çš„è¡¨å•å†…å®¹ï¼Œä»¥ä¾¿ä¸‹æ¬¡æ¢å¤ã€‚</li>
<li><strong>æ’¤é”€/é‡åš</strong>ï¼šç¼–è¾‘å™¨ä¸­çš„æ’¤é”€å’Œé‡åšåŠŸèƒ½ã€‚</li>
</ul>
<h4 data-id="heading-24">å¤‡å¿˜å½•æ¨¡å¼-JSå®ç°</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å¤‡å¿˜å½•ï¼šä¿å­˜çŠ¶æ€</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Memento</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">state</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = state;
  }

  <span class="hljs-title function_">getState</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>;
  }
}

<span class="hljs-comment">// å‘èµ·äººï¼šéœ€è¦ä¿å­˜çŠ¶æ€çš„å¯¹è±¡</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Originator</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = <span class="hljs-string">""</span>;
  }

  <span class="hljs-title function_">setState</span>(<span class="hljs-params">state</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = state;
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`å½“å‰çŠ¶æ€: <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.state}</span>`</span>);
  }

  <span class="hljs-title function_">saveStateToMemento</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Memento</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>);
  }

  <span class="hljs-title function_">getStateFromMemento</span>(<span class="hljs-params">memento</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = memento.<span class="hljs-title function_">getState</span>();
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`æ¢å¤çŠ¶æ€: <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.state}</span>`</span>);
  }
}

<span class="hljs-comment">// ç®¡ç†è€…ï¼šç®¡ç†å¤‡å¿˜å½•</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Caretaker</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">mementos</span> = [];
  }

  <span class="hljs-title function_">add</span>(<span class="hljs-params">memento</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">mementos</span>.<span class="hljs-title function_">push</span>(memento);
  }

  <span class="hljs-title function_">get</span>(<span class="hljs-params">index</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">mementos</span>[index];
  }
}

<span class="hljs-comment">// å®¢æˆ·ç«¯è°ƒç”¨</span>
<span class="hljs-keyword">const</span> originator = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Originator</span>();
<span class="hljs-keyword">const</span> caretaker = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Caretaker</span>();

originator.<span class="hljs-title function_">setState</span>(<span class="hljs-string">"çŠ¶æ€1"</span>);
originator.<span class="hljs-title function_">setState</span>(<span class="hljs-string">"çŠ¶æ€2"</span>);
caretaker.<span class="hljs-title function_">add</span>(originator.<span class="hljs-title function_">saveStateToMemento</span>()); <span class="hljs-comment">// ä¿å­˜çŠ¶æ€2</span>

originator.<span class="hljs-title function_">setState</span>(<span class="hljs-string">"çŠ¶æ€3"</span>);
caretaker.<span class="hljs-title function_">add</span>(originator.<span class="hljs-title function_">saveStateToMemento</span>()); <span class="hljs-comment">// ä¿å­˜çŠ¶æ€3</span>

originator.<span class="hljs-title function_">setState</span>(<span class="hljs-string">"çŠ¶æ€4"</span>);

originator.<span class="hljs-title function_">getStateFromMemento</span>(caretaker.<span class="hljs-title function_">get</span>(<span class="hljs-number">0</span>)); <span class="hljs-comment">// æ¢å¤åˆ°çŠ¶æ€2</span>
originator.<span class="hljs-title function_">getStateFromMemento</span>(caretaker.<span class="hljs-title function_">get</span>(<span class="hljs-number">1</span>)); <span class="hljs-comment">// æ¢å¤åˆ°çŠ¶æ€3</span>
</code></pre>
<h3 data-id="heading-25">çŠ¶æ€æ¨¡å¼ï¼ˆStateï¼‰</h3>
<p>çŠ¶æ€æ¨¡å¼ï¼ˆ<code>State Pattern</code>ï¼‰å…è®¸ä¸€ä¸ªå¯¹è±¡åœ¨å…¶å†…éƒ¨çŠ¶æ€æ”¹å˜æ—¶æ”¹å˜å®ƒçš„è¡Œä¸ºã€‚å¯¹è±¡çœ‹èµ·æ¥ä¼¼ä¹ä¿®æ”¹äº†å®ƒçš„ç±»ã€‚</p>
<h4 data-id="heading-26">å‰ç«¯ä¸­çš„çŠ¶æ€æ¨¡å¼åœºæ™¯</h4>
<ul>
<li><strong>æœ‰é™çŠ¶æ€æœºï¼ˆFSMï¼‰</strong>ï¼šä¾‹å¦‚ï¼ŒPromise çš„çŠ¶æ€ï¼ˆPending, Fulfilled, Rejectedï¼‰ã€‚</li>
<li><strong>ç»„ä»¶çŠ¶æ€ç®¡ç†</strong>ï¼šä¾‹å¦‚ï¼Œä¸€ä¸ªæŒ‰é’®å¯èƒ½æœ‰ <code>loading</code>ã€<code>disabled</code>ã€<code>default</code> ç­‰çŠ¶æ€ï¼Œä¸åŒçŠ¶æ€ä¸‹ç‚¹å‡»è¡Œä¸ºä¸åŒã€‚</li>
<li><strong>æ¸¸æˆå¼€å‘</strong>ï¼šè§’è‰²çš„ä¸åŒçŠ¶æ€ï¼ˆå¦‚ç«™ç«‹ã€å¥”è·‘ã€è·³è·ƒã€æ”»å‡»ï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-27">çŠ¶æ€æ¨¡å¼-JSå®ç°</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// çŠ¶æ€æ¥å£</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">State</span> {
  <span class="hljs-title function_">handle</span>(<span class="hljs-params">context</span>) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">"æŠ½è±¡æ–¹æ³•ä¸èƒ½è°ƒç”¨"</span>);
  }
}

<span class="hljs-comment">// å…·ä½“çŠ¶æ€A</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ConcreteStateA</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">State</span> {
  <span class="hljs-title function_">handle</span>(<span class="hljs-params">context</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"å½“å‰æ˜¯çŠ¶æ€A"</span>);
    context.<span class="hljs-title function_">setState</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcreteStateB</span>());
  }
}

<span class="hljs-comment">// å…·ä½“çŠ¶æ€B</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ConcreteStateB</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">State</span> {
  <span class="hljs-title function_">handle</span>(<span class="hljs-params">context</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"å½“å‰æ˜¯çŠ¶æ€B"</span>);
    context.<span class="hljs-title function_">setState</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcreteStateA</span>());
  }
}

<span class="hljs-comment">// ä¸Šä¸‹æ–‡</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Context</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcreteStateA</span>();
  }

  <span class="hljs-title function_">setState</span>(<span class="hljs-params">state</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = state;
  }

  <span class="hljs-title function_">request</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>.<span class="hljs-title function_">handle</span>(<span class="hljs-variable language_">this</span>);
  }
}

<span class="hljs-comment">// å®¢æˆ·ç«¯è°ƒç”¨</span>
<span class="hljs-keyword">const</span> context = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Context</span>();
context.<span class="hljs-title function_">request</span>(); <span class="hljs-comment">// å½“å‰æ˜¯çŠ¶æ€A</span>
context.<span class="hljs-title function_">request</span>(); <span class="hljs-comment">// å½“å‰æ˜¯çŠ¶æ€B</span>
context.<span class="hljs-title function_">request</span>(); <span class="hljs-comment">// å½“å‰æ˜¯çŠ¶æ€A</span>
</code></pre>
<h3 data-id="heading-28">è®¿é—®è€…æ¨¡å¼ï¼ˆVisitorï¼‰</h3>
<p>è®¿é—®è€…æ¨¡å¼ï¼ˆ<code>Visitor Pattern</code>ï¼‰è¡¨ç¤ºä¸€ä¸ªä½œç”¨äºæŸå¯¹è±¡ç»“æ„ä¸­çš„å„å…ƒç´ çš„æ“ä½œã€‚å®ƒä½¿ä½ å¯ä»¥åœ¨ä¸æ”¹å˜å„å…ƒç´ çš„ç±»çš„å‰æä¸‹å®šä¹‰ä½œç”¨äºè¿™äº›å…ƒç´ çš„æ–°æ“ä½œã€‚</p>
<h4 data-id="heading-29">å‰ç«¯ä¸­çš„è®¿é—®è€…æ¨¡å¼åœºæ™¯</h4>
<ul>
<li><strong>ASTéå†</strong>ï¼š<code>Babel</code> æ’ä»¶å¼€å‘ä¸­ï¼Œé€šè¿‡è®¿é—®è€…æ¨¡å¼éå†å’Œä¿®æ”¹ ASTï¼ˆæŠ½è±¡è¯­æ³•æ ‘ï¼‰èŠ‚ç‚¹ã€‚</li>
<li><strong>å¤æ‚æ•°æ®ç»“æ„å¤„ç†</strong>ï¼šå¯¹æ ‘å½¢ç»“æ„æˆ–å›¾å½¢ç»“æ„è¿›è¡Œä¸åŒçš„æ“ä½œï¼ˆå¦‚æ¸²æŸ“ã€åºåˆ—åŒ–ã€éªŒè¯ï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-30">è®¿é—®è€…æ¨¡å¼-JSå®ç°</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å…ƒç´ ç±»</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Element</span> {
  <span class="hljs-title function_">accept</span>(<span class="hljs-params">visitor</span>) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">"æŠ½è±¡æ–¹æ³•ä¸èƒ½è°ƒç”¨"</span>);
  }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">ConcreteElementA</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Element</span> {
  <span class="hljs-title function_">accept</span>(<span class="hljs-params">visitor</span>) {
    visitor.<span class="hljs-title function_">visitConcreteElementA</span>(<span class="hljs-variable language_">this</span>);
  }

  <span class="hljs-title function_">operationA</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-string">"ElementA"</span>;
  }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">ConcreteElementB</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Element</span> {
  <span class="hljs-title function_">accept</span>(<span class="hljs-params">visitor</span>) {
    visitor.<span class="hljs-title function_">visitConcreteElementB</span>(<span class="hljs-variable language_">this</span>);
  }

  <span class="hljs-title function_">operationB</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-string">"ElementB"</span>;
  }
}

<span class="hljs-comment">// è®¿é—®è€…ç±»</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Visitor</span> {
  <span class="hljs-title function_">visitConcreteElementA</span>(<span class="hljs-params">element</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`è®¿é—®è€…è®¿é—® <span class="hljs-subst">${element.operationA()}</span>`</span>);
  }

  <span class="hljs-title function_">visitConcreteElementB</span>(<span class="hljs-params">element</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`è®¿é—®è€…è®¿é—® <span class="hljs-subst">${element.operationB()}</span>`</span>);
  }
}

<span class="hljs-comment">// å®¢æˆ·ç«¯è°ƒç”¨</span>
<span class="hljs-keyword">const</span> elementA = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcreteElementA</span>();
<span class="hljs-keyword">const</span> elementB = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcreteElementB</span>();
<span class="hljs-keyword">const</span> visitor = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Visitor</span>();

elementA.<span class="hljs-title function_">accept</span>(visitor); <span class="hljs-comment">// è®¿é—®è€…è®¿é—® ElementA</span>
elementB.<span class="hljs-title function_">accept</span>(visitor); <span class="hljs-comment">// è®¿é—®è€…è®¿é—® ElementB</span>
</code></pre>
<h3 data-id="heading-31">ä¸­ä»‹è€…æ¨¡å¼ï¼ˆMediatorï¼‰</h3>
<p>ä¸­ä»‹è€…æ¨¡å¼ï¼ˆ<code>Mediator Pattern</code>ï¼‰ç”¨ä¸€ä¸ª<code>ä¸­ä»‹å¯¹è±¡</code>æ¥å°è£…ä¸€ç³»åˆ—çš„å¯¹è±¡äº¤äº’ã€‚ä¸­ä»‹è€…ä½¿å„å¯¹è±¡ä¸éœ€è¦æ˜¾å¼åœ°ç›¸äº’å¼•ç”¨ï¼Œä»è€Œä½¿å…¶è€¦åˆæ¾æ•£ï¼Œè€Œä¸”å¯ä»¥ç‹¬ç«‹åœ°æ”¹å˜å®ƒä»¬ä¹‹é—´çš„äº¤äº’ã€‚</p>
<h4 data-id="heading-32">å‰ç«¯ä¸­çš„ä¸­ä»‹è€…æ¨¡å¼åœºæ™¯</h4>
<ul>
<li><strong>MVC/MVVMæ¡†æ¶</strong>ï¼šController æˆ– ViewModel å……å½“ä¸­ä»‹è€…ï¼Œåè°ƒ View å’Œ Model ä¹‹é—´çš„äº¤äº’ã€‚</li>
<li><strong>å¤æ‚è¡¨å•äº¤äº’</strong>ï¼šä¾‹å¦‚ï¼Œé€‰æ‹©çœä»½åï¼ŒåŸå¸‚ä¸‹æ‹‰æ¡†éœ€è¦æ›´æ–°ï¼›é€‰æ‹©åŸå¸‚åï¼ŒåŒºå¿ä¸‹æ‹‰æ¡†éœ€è¦æ›´æ–°ã€‚ä½¿ç”¨ä¸­ä»‹è€…ç»Ÿä¸€ç®¡ç†è¿™äº›è”åŠ¨é€»è¾‘ã€‚</li>
<li><strong>èŠå¤©å®¤</strong>ï¼šç”¨æˆ·ä¹‹é—´ä¸ç›´æ¥å‘é€æ¶ˆæ¯ï¼Œè€Œæ˜¯é€šè¿‡æœåŠ¡å™¨ï¼ˆä¸­ä»‹è€…ï¼‰è½¬å‘ã€‚</li>
</ul>
<h4 data-id="heading-33">ä¸­ä»‹è€…æ¨¡å¼-JSå®ç°</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä¸­ä»‹è€…</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ChatMediator</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">users</span> = [];
  }

  <span class="hljs-title function_">addUser</span>(<span class="hljs-params">user</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">users</span>.<span class="hljs-title function_">push</span>(user);
    user.<span class="hljs-title function_">setMediator</span>(<span class="hljs-variable language_">this</span>);
  }

  <span class="hljs-title function_">sendMessage</span>(<span class="hljs-params">message, user</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">users</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">u</span> =&gt;</span> {
      <span class="hljs-keyword">if</span> (u !== user) {
        u.<span class="hljs-title function_">receive</span>(message);
      }
    });
  }
}

<span class="hljs-comment">// ç”¨æˆ·ç±»</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">name</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">mediator</span> = <span class="hljs-literal">null</span>;
  }

  <span class="hljs-title function_">setMediator</span>(<span class="hljs-params">mediator</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">mediator</span> = mediator;
  }

  <span class="hljs-title function_">send</span>(<span class="hljs-params">message</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span> å‘é€æ¶ˆæ¯: <span class="hljs-subst">${message}</span>`</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">mediator</span>.<span class="hljs-title function_">sendMessage</span>(message, <span class="hljs-variable language_">this</span>);
  }

  <span class="hljs-title function_">receive</span>(<span class="hljs-params">message</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span> æ”¶åˆ°æ¶ˆæ¯: <span class="hljs-subst">${message}</span>`</span>);
  }
}

<span class="hljs-comment">// å®¢æˆ·ç«¯è°ƒç”¨</span>
<span class="hljs-keyword">const</span> mediator = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ChatMediator</span>();
<span class="hljs-keyword">const</span> user1 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(<span class="hljs-string">"User1"</span>);
<span class="hljs-keyword">const</span> user2 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(<span class="hljs-string">"User2"</span>);
<span class="hljs-keyword">const</span> user3 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(<span class="hljs-string">"User3"</span>);

mediator.<span class="hljs-title function_">addUser</span>(user1);
mediator.<span class="hljs-title function_">addUser</span>(user2);
mediator.<span class="hljs-title function_">addUser</span>(user3);

user1.<span class="hljs-title function_">send</span>(<span class="hljs-string">"å¤§å®¶å¥½ï¼"</span>);
<span class="hljs-comment">// è¾“å‡ºï¼š</span>
<span class="hljs-comment">// User1 å‘é€æ¶ˆæ¯: å¤§å®¶å¥½ï¼</span>
<span class="hljs-comment">// User2 æ”¶åˆ°æ¶ˆæ¯: å¤§å®¶å¥½ï¼</span>
<span class="hljs-comment">// User3 æ”¶åˆ°æ¶ˆæ¯: å¤§å®¶å¥½ï¼</span>
</code></pre>
<h3 data-id="heading-34">è§£é‡Šå™¨æ¨¡å¼ï¼ˆInterpreterï¼‰</h3>
<p>è§£é‡Šå™¨æ¨¡å¼ï¼ˆ<code>Interpreter Pattern</code>ï¼‰ç»™å®šä¸€ä¸ªè¯­è¨€ï¼Œå®šä¹‰å®ƒçš„æ–‡æ³•çš„ä¸€ç§è¡¨ç¤ºï¼Œå¹¶å®šä¹‰ä¸€ä¸ªè§£é‡Šå™¨ï¼Œè¯¥è§£é‡Šå™¨ç”¨æ¥è§£é‡Šè¯­è¨€ä¸­çš„å¥å­ã€‚</p>
<h4 data-id="heading-35">å‰ç«¯ä¸­çš„è§£é‡Šå™¨æ¨¡å¼åœºæ™¯</h4>
<ul>
<li><strong>æ¨¡æ¿å¼•æ“</strong>ï¼š<code>Mustache</code>ã€<code>Handlebars</code> ç­‰æ¨¡æ¿å¼•æ“ï¼Œè§£ææ¨¡æ¿å­—ç¬¦ä¸²å¹¶ç”Ÿæˆ HTMLã€‚</li>
<li><strong>ç¼–è¯‘å™¨å‰ç«¯</strong>ï¼šå°†ä»£ç è§£æä¸º ASTã€‚</li>
<li><strong>æ•°å­¦è¡¨è¾¾å¼è®¡ç®—</strong>ï¼šè§£æå¹¶è®¡ç®—å­—ç¬¦ä¸²å½¢å¼çš„æ•°å­¦è¡¨è¾¾å¼ã€‚</li>
</ul>
<h4 data-id="heading-36">è§£é‡Šå™¨æ¨¡å¼-JSå®ç°</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æŠ½è±¡è¡¨è¾¾å¼</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Expression</span> {
  <span class="hljs-title function_">interpret</span>(<span class="hljs-params">context</span>) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">"æŠ½è±¡æ–¹æ³•ä¸èƒ½è°ƒç”¨"</span>);
  }
}

<span class="hljs-comment">// ç»ˆç»“ç¬¦è¡¨è¾¾å¼ï¼šæ•°å­—</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">NumberExpression</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Expression</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">number</span>) {
    <span class="hljs-variable language_">super</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">number</span> = number;
  }

  <span class="hljs-title function_">interpret</span>(<span class="hljs-params">context</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">number</span>;
  }
}

<span class="hljs-comment">// éç»ˆç»“ç¬¦è¡¨è¾¾å¼ï¼šåŠ æ³•</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">AddExpression</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Expression</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">left, right</span>) {
    <span class="hljs-variable language_">super</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">left</span> = left;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">right</span> = right;
  }

  <span class="hljs-title function_">interpret</span>(<span class="hljs-params">context</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">left</span>.<span class="hljs-title function_">interpret</span>(context) + <span class="hljs-variable language_">this</span>.<span class="hljs-property">right</span>.<span class="hljs-title function_">interpret</span>(context);
  }
}

<span class="hljs-comment">// éç»ˆç»“ç¬¦è¡¨è¾¾å¼ï¼šå‡æ³•</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">SubtractExpression</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Expression</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">left, right</span>) {
    <span class="hljs-variable language_">super</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">left</span> = left;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">right</span> = right;
  }

  <span class="hljs-title function_">interpret</span>(<span class="hljs-params">context</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">left</span>.<span class="hljs-title function_">interpret</span>(context) - <span class="hljs-variable language_">this</span>.<span class="hljs-property">right</span>.<span class="hljs-title function_">interpret</span>(context);
  }
}

<span class="hljs-comment">// å®¢æˆ·ç«¯è°ƒç”¨ï¼šè®¡ç®— 10 + 5 - 2</span>
<span class="hljs-keyword">const</span> expression = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SubtractExpression</span>(
  <span class="hljs-keyword">new</span> <span class="hljs-title class_">AddExpression</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">NumberExpression</span>(<span class="hljs-number">10</span>), <span class="hljs-keyword">new</span> <span class="hljs-title class_">NumberExpression</span>(<span class="hljs-number">5</span>)),
  <span class="hljs-keyword">new</span> <span class="hljs-title class_">NumberExpression</span>(<span class="hljs-number">2</span>)
);

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(expression.<span class="hljs-title function_">interpret</span>()); <span class="hljs-comment">// 13</span>
</code></pre>
<h3 data-id="heading-37">é¡¹ç›®åœ°å€</h3>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2Fcangnaiwen%2Fdesign-patterns-study" target="_blank" title="https://gitee.com/cangnaiwen/design-patterns-study" ref="nofollow noopener noreferrer">design-patterns-study</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‰‘æŒ‡offer-75ã€ä¹°å–è‚¡ç¥¨çš„æœ€å¥½æ—¶æœº]]></title>    <link>https://juejin.cn/post/7605173538417672202</link>    <guid>https://juejin.cn/post/7605173538417672202</guid>    <pubDate>2026-02-11T08:33:24.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605173538417672202" data-draft-id="7603567912592982043" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‰‘æŒ‡offer-75ã€ä¹°å–è‚¡ç¥¨çš„æœ€å¥½æ—¶æœº"/> <meta itemprop="keywords" content="Java"/> <meta itemprop="datePublished" content="2026-02-11T08:33:24.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="SevenCoding"/> <meta itemprop="url" content="https://juejin.cn/user/3261615728242467"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‰‘æŒ‡offer-75ã€ä¹°å–è‚¡ç¥¨çš„æœ€å¥½æ—¶æœº
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3261615728242467/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    SevenCoding
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-11T08:33:24.000Z" title="Wed Feb 11 2026 08:33:24 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">é¢˜â½¬æè¿°</h2>
<p>å‡è®¾ä½ æœ‰â¼€ä¸ªæ•°ç»„ prices ï¼Œâ»“åº¦ä¸º n ï¼Œå…¶ä¸­ prices[i] æ˜¯è‚¡ç¥¨åœ¨ç¬¬ i å¤©çš„ä»·æ ¼ï¼Œè¯·æ ¹æ®è¿™ä¸ªä»·æ ¼æ•°ç»„ï¼Œè¿”å›ä¹°å–è‚¡ç¥¨èƒ½è·å¾—çš„æœ€â¼¤æ”¶ç›Š</p>
<ol>
<li>ä½ å¯ä»¥ä¹°â¼Šâ¼€æ¬¡è‚¡ç¥¨å’Œå–å‡ºâ¼€æ¬¡è‚¡ç¥¨ï¼Œå¹¶â¾®æ¯å¤©éƒ½å¯ä»¥ä¹°â¼Šæˆ–å–å‡ºâ¼€æ¬¡ï¼Œæ€»å…±åªèƒ½ä¹°â¼Šå’Œå–å‡ºâ¼€æ¬¡ï¼Œä¸”ä¹°â¼Šå¿…é¡»åœ¨å–å‡ºçš„å‰â¾¯çš„æŸâ¼€å¤©</li>
<li>å¦‚æœä¸èƒ½è·å–åˆ°ä»»ä½•åˆ©æ¶¦ï¼Œè¯·è¿”å› 0</li>
<li>å‡è®¾ä¹°â¼Šå–å‡ºå‡â½†â¼¿ç»­è´¹</li>
</ol>
<p>ç¤ºä¾‹1ï¼š
è¾“â¼Šï¼š[8,9,2,5,4,7,1]
è¿”å›å€¼: 5
è¯´æ˜: åœ¨ç¬¬3å¤©(è‚¡ç¥¨ä»·æ ¼ = 2)çš„æ—¶å€™ä¹°â¼Šï¼Œåœ¨ç¬¬6å¤©(è‚¡ç¥¨ä»·æ ¼ = 7)çš„æ—¶å€™å–å‡ºï¼Œæœ€â¼¤åˆ©æ¶¦ = 7-2 = 5ï¼Œä¸èƒ½é€‰æ‹©åœ¨ç¬¬2å¤©ä¹°â¼Šï¼Œç¬¬3å¤©å–å‡ºï¼Œè¿™æ ·å°±äºæŸ7äº†ï¼›åŒæ—¶ï¼Œä½ ä¹Ÿä¸èƒ½åœ¨ä¹°â¼Šå‰å–å‡ºè‚¡ç¥¨ã€‚</p>
<p>ç¤ºä¾‹2ï¼š
è¾“â¼Šï¼š[2,4,1]
è¿”å›å€¼: 2</p>
<h2 data-id="heading-1">æ€è·¯åŠè§£ç­”</h2>
<h3 data-id="heading-2">æš´â¼’ç©·ä¸¾</h3>
<p>è¿™â¾¥æ¶‰åŠçš„èŠ‚ç‚¹â½†â¾®æ˜¯ä¹°â¼Šï¼Œå–å‡ºï¼Œé‚£ä¹ˆæˆ‘ä»¬éå†æ‰€æœ‰çš„æ•°æ®ï¼Œä½œä¸ºä¹°â¼Šâ½‡æœŸï¼ŒåŒæ—¶å°†è¯¥â½‡æœŸåâ¾¯æ¯â¼€ä¸ªéƒ½ä½œä¸ºå–å‡ºâ½‡æœŸæ¥è®¡ç®—ï¼Œåªè¦ç»´æŠ¤æœ€â¼¤çš„åˆ©æ¶¦å³å¯ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">maxProfit</span><span class="hljs-params">(<span class="hljs-type">int</span>[] prices)</span> {
        <span class="hljs-keyword">if</span> (prices == <span class="hljs-literal">null</span> || prices.length &lt; <span class="hljs-number">2</span>) {
            <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
        }
        
        <span class="hljs-type">int</span> <span class="hljs-variable">maxProfit</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
        <span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> prices.length;
        
        <span class="hljs-comment">// å¤–å±‚å¾ªç¯ï¼šéå†æ‰€æœ‰å¯èƒ½çš„ä¹°å…¥ç‚¹</span>
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; n - <span class="hljs-number">1</span>; i++) {
            <span class="hljs-comment">// å†…å±‚å¾ªç¯ï¼šéå†æ‰€æœ‰å¯èƒ½çš„å–å‡ºç‚¹ï¼ˆå¿…é¡»åœ¨ä¹°å…¥ç‚¹ä¹‹åï¼‰</span>
            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> i + <span class="hljs-number">1</span>; j &lt; n; j++) {
                <span class="hljs-type">int</span> <span class="hljs-variable">profit</span> <span class="hljs-operator">=</span> prices[j] - prices[i];
                <span class="hljs-keyword">if</span> (profit &gt; maxProfit) {
                    maxProfit = profit;
                }
            }
        }
        
        <span class="hljs-keyword">return</span> maxProfit;
    }
}
</code></pre>
<ul>
<li>æ—¶é—´å¤æ‚åº¦ï¼š O(n2)</li>
<li>ç©ºé—´å¤æ‚åº¦ï¼šO(1)</li>
</ul>
<h3 data-id="heading-3">è´ªâ¼¼æ³•ï¼ˆæœ€ä¼˜è§£ï¼‰</h3>
<p>æˆ‘ä»¬è¦æƒ³å¾—åˆ°â¼€ä¸ªæœ€â¼¤çš„åˆ©æ¶¦ï¼Œå…¶å®å°±æ˜¯è¦ä¸¤è€…å·®å€¼æœ€â¼¤ã€‚å¦‚æœè®©å·®å€¼æœ€â¼¤ï¼Œå‡è®¾åœ¨å½“å¤©å–å‡ºï¼Œé‚£ä¹ˆä»€ä¹ˆæ—¶å€™ä¹°â¼Šæœ€å¥½å‘¢ï¼Ÿ</p>
<p>å½“ç„¶æ˜¯åœ¨å‰â¾¯æ‰¾åˆ°æœ€â¼©çš„ä¹°â¼Šç‚¹ï¼Œâ½å¦‚ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f0f36a140e7443779a0d9c86d2d1ade9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2V2ZW5Db2Rpbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771403603&amp;x-signature=SdVHt45usGYycHkkW3DT3wW257k%3D" alt="" loading="lazy"/></p>
<p>â½½å‰â¾¯çš„æœ€â¼©å€¼ï¼Œå…¶å®æˆ‘ä»¬åœ¨éå†çš„æ—¶å€™æ˜¯å¯ä»¥ä¸æ–­ç»´æŠ¤çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬åªè¦éå†â¼€æ¬¡æ•°ç»„å³å¯ã€‚</p>
<p><strong>å…³é”®æ€æƒ³ï¼š</strong></p>
<ul>
<li>æœ€å¤§åˆ©æ¶¦ = æŸæ—¥ä»·æ ¼ - è¯¥æ—¥ä¹‹å‰çš„æœ€ä½ä»·æ ¼</li>
<li>åªéœ€ç»´æŠ¤ä¸¤ä¸ªå˜é‡ï¼š
<ul>
<li><code>minPrice</code>ï¼šéå†è¿‡ç¨‹ä¸­é‡åˆ°çš„æœ€ä½ä»·æ ¼</li>
<li><code>maxProfit</code>ï¼šå½“å‰èƒ½è·å¾—çš„æœ€å¤§åˆ©æ¶¦</li>
</ul>
</li>
</ul>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution63</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">maxProfit</span><span class="hljs-params">(<span class="hljs-type">int</span>[] prices)</span> {
        <span class="hljs-type">int</span> <span class="hljs-variable">min</span> <span class="hljs-operator">=</span> Integer.MAX_VALUE;
        <span class="hljs-type">int</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> value: prices) {
            <span class="hljs-comment">// ç»´æŠ¤æœ€â¼©å€¼</span>
            min = Math.min(min, value);
            <span class="hljs-comment">// å½“å‰å€¼å‡å»å‰â¾¯æœ€â¼©å€¼ï¼Œä¸åˆ©æ¶¦æœ€â¼¤å€¼å¯¹â½ï¼Œç»´æŠ¤å¥½åˆ©æ¶¦æœ€â¼¤å€¼</span>
            result = Math.max(result, value - min);
        }
        <span class="hljs-keyword">return</span> result;
    }
}
</code></pre>
<ul>
<li><strong>æ—¶é—´å¤æ‚åº¦</strong>ï¼šO(n)ï¼Œåªéœ€éå†ä¸€æ¬¡æ•°ç»„</li>
<li><strong>ç©ºé—´å¤æ‚åº¦</strong>ï¼šO(1)ï¼Œåªä½¿ç”¨å¸¸æ•°ç©ºé—´</li>
</ul>
<p>æ‰§è¡Œè¿‡ç¨‹ç¤ºä¾‹ï¼ˆprices = [8,9,2,5,4,7,1]ï¼‰</p>
<pre><code class="hljs language-text" lang="text">i=0: price=8, minPrice=8, maxProfit=0
i=1: price=9, minPrice=8, maxProfit=1
i=2: price=2, minPrice=2, maxProfit=1
i=3: price=5, minPrice=2, maxProfit=3
i=4: price=4, minPrice=2, maxProfit=3
i=5: price=7, minPrice=2, maxProfit=5
i=6: price=1, minPrice=1, maxProfit=5
ç»“æœï¼š5
</code></pre>
<h3 data-id="heading-4">åŠ¨æ€è§„åˆ’</h3>
<p>dp[i]è¡¨ç¤ºå‰iå¤©çš„æœ€å¤§åˆ©æ¶¦ï¼ŒçŠ¶æ€è½¬ç§»åŸºäºå‰i-1å¤©çš„ç»“æœ</p>
<p><strong>çŠ¶æ€å®šä¹‰ï¼š</strong></p>
<ul>
<li><code>minPrice[i]</code>ï¼šå‰iå¤©çš„æœ€ä½ä»·æ ¼</li>
<li><code>maxProfit[i]</code>ï¼šå‰iå¤©èƒ½è·å¾—çš„æœ€å¤§åˆ©æ¶¦</li>
</ul>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">maxProfit</span><span class="hljs-params">(<span class="hljs-type">int</span>[] prices)</span> {
        <span class="hljs-keyword">if</span> (prices == <span class="hljs-literal">null</span> || prices.length &lt; <span class="hljs-number">2</span>) {
            <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
        }
        
        <span class="hljs-type">int</span> <span class="hljs-variable">minPrice</span> <span class="hljs-operator">=</span> prices[<span class="hljs-number">0</span>];
        <span class="hljs-type">int</span> <span class="hljs-variable">maxProfit</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
        
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt; prices.length; i++) {
            <span class="hljs-comment">// çŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼š</span>
            <span class="hljs-comment">// å‰iå¤©çš„æœ€å¤§åˆ©æ¶¦ = max(å‰i-1å¤©çš„æœ€å¤§åˆ©æ¶¦, ç¬¬iå¤©ä»·æ ¼-å‰i-1å¤©çš„æœ€ä½ä»·æ ¼)</span>
            maxProfit = Math.max(maxProfit, prices[i] - minPrice);
            minPrice = Math.min(minPrice, prices[i]);
        }
        
        <span class="hljs-keyword">return</span> maxProfit;
    }
}
</code></pre>
<ul>
<li><strong>æ—¶é—´å¤æ‚åº¦</strong>ï¼šO(n)ï¼Œå•æ¬¡éå†</li>
<li><strong>ç©ºé—´å¤æ‚åº¦</strong>ï¼šO(1)ï¼Œä¼˜åŒ–ååªéœ€ä¸¤ä¸ªå˜é‡</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æˆ‘æ˜¯å¦‚ä½•æŠŠ API å“åº”æ—¶é—´ä» 200ms å‹åˆ°äº† 10ms]]></title>    <link>https://juejin.cn/post/7605213691910422554</link>    <guid>https://juejin.cn/post/7605213691910422554</guid>    <pubDate>2026-02-11T08:29:36.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605213691910422554" data-draft-id="7605157203591331867" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æˆ‘æ˜¯å¦‚ä½•æŠŠ API å“åº”æ—¶é—´ä» 200ms å‹åˆ°äº† 10ms"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯,Node.js"/> <meta itemprop="datePublished" content="2026-02-11T08:29:36.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è¯¥ç”¨æˆ·å·²ä¸å­˜åœ¨"/> <meta itemprop="url" content="https://juejin.cn/user/64217584778579"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æˆ‘æ˜¯å¦‚ä½•æŠŠ API å“åº”æ—¶é—´ä» 200ms å‹åˆ°äº† 10ms
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/64217584778579/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è¯¥ç”¨æˆ·å·²ä¸å­˜åœ¨
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-11T08:29:36.000Z" title="Wed Feb 11 2026 08:29:36 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å°‘å¹´å‘€ï¼Œå½“ä½ é‡åˆ°è¿™æ ·çš„æƒ…å†µï¼šAPI æ…¢å¾—åƒèœ—ç‰›ï¼ŒP95 å»¶è¿Ÿè¶…é«˜ï¼ŒæœåŠ¡å™¨åœ¨å‡Œæ™¨ 3 ç‚¹å› ä¸ºæµé‡çªå‘è€Œå´©æºƒï¼Œä½ æ˜¯é€‰æ‹©èŠ±ä¸‰ä¸ªæœˆç”¨ Rust é‡å†™æ‰€æœ‰ä¸œè¥¿ï¼Œè¿˜æ˜¯é€‰æ‹©çœ‹ç€ç”¨æˆ·æµå¤±å‘¢ã€‚</p>
<p>æˆ–è€…ï¼Œä½ å¯ä»¥åƒæˆ‘ä¸€æ ·ï¼Œç”¨ä¸€ç§ä½œå¼Šçš„æ–¹å¼ï¼ŒæŠŠ Bun çš„æè‡´é€Ÿåº¦å«æ¥åˆ° Node.js çš„åºå¤§ç”Ÿæ€ä¸Šã€‚</p>
<p>åˆ«ç¬‘ï¼Œæˆ‘æ˜¯è®¤çœŸçš„ã€‚æˆ‘å°±èƒ½åœ¨ä¸é‡å†™ 5 å¹´é™ˆæ—§ä¸šåŠ¡é€»è¾‘çš„å‰æä¸‹ï¼ŒæŠŠä¸€ä¸ªè‡ƒè‚¿çš„åç«¯æ¥å£å‹è¿› 10ms ä»¥å†…çš„ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5af8346a754340069b77dc23a39e8006~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6K-l55So5oi35bey5LiN5a2Y5Zyo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771403376&amp;x-signature=1vtEujIofNuir51EZLRTBr8a9Tk%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-0">è¾¹ç¼˜ä¾§ä½¿ç”¨ Bunï¼Œé€šè¿‡ IPC å”¤é†’ Node è¿›ç¨‹æ± </h3>
<p>ä¼—æ‰€å‘¨çŸ¥ï¼ŒNode å¤„ç† HTTP è¯·æ±‚çš„å¼€é”€å¤ªå¤§äº†ï¼Œä½†æˆ‘çš„ä¸šåŠ¡é€»è¾‘é‡Œå…¨æ˜¯ä¾èµ– <code>crypto</code> å’Œè€æ—§ SDK çš„ä»£ç ï¼Œæ ¹æœ¬æ²¡æ³•ç§»æ¤åˆ° Bunã€‚</p>
<p>æ‰€ä»¥æˆ‘çš„è§£å†³åŠæ³•æ˜¯å‰åº—åå‚ã€‚</p>
<p>æˆ‘ç”¨ Bun æ­å»ºäº†ä¸€ä¸ªæè–„çš„ HTTP å±‚ï¼Œä¸“é—¨è´Ÿè´£è·¯ç”±ã€å‚æ•°æ ¡éªŒå’ŒæŒ¡æ‰æ— æ•ˆè¯·æ±‚ã€‚åªæœ‰çœŸæ­£éœ€è¦é‚£ä¸ªè€æ—§ä¸šåŠ¡é€»è¾‘æ—¶ï¼Œæˆ‘æ‰é€šè¿‡ IPCï¼ˆè¿›ç¨‹é—´é€šä¿¡ï¼‰æŠŠä»»åŠ¡æ‰”ç»™åå°å¸¸é©»çš„ Node è¿›ç¨‹ã€‚</p>
<p>åƒä¸‡åˆ«åœ¨è¯·æ±‚æ¥çš„æ—¶å€™æ‰ <code>spawn</code> ä¸€ä¸ª Node è¿›ç¨‹ï¼Œé‚£æ ·æ¯”å•ç”¨ Node è¿˜æ…¢ã€‚ä½ è¦åšçš„æ˜¯é¢„å…ˆå¯åŠ¨ä¸€ç»„ Node Workerï¼Œè¦å…ˆé¢„çƒ­æ‰è¡Œã€‚ã€‚</p>
<p><strong>Bun ç«¯ï¼ˆå‰å°ï¼‰ï¼š</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// bun-gateway.ts</span>
<span class="hljs-keyword">const</span> textDecoder = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TextDecoder</span>();
<span class="hljs-keyword">const</span> textEncoder = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TextEncoder</span>();

<span class="hljs-comment">// å¯åŠ¨ä¸€ä¸ªå¸¸é©»çš„ Node è¿›ç¨‹ï¼Œè€Œä¸æ˜¯æ¯æ¬¡è¯·æ±‚éƒ½å¯åŠ¨</span>
<span class="hljs-keyword">const</span> nodeWorker = <span class="hljs-title class_">Bun</span>.<span class="hljs-title function_">spawn</span>([<span class="hljs-string">"node"</span>, <span class="hljs-string">"heavy-lifter.js"</span>], {
  <span class="hljs-attr">stdin</span>: <span class="hljs-string">"pipe"</span>,
  <span class="hljs-attr">stdout</span>: <span class="hljs-string">"pipe"</span>,
});

<span class="hljs-comment">// è¿™æ˜¯ä¸€ä¸ªç®€å•çš„è¯»å†™å°è£…ï¼ŒæŠŠå¤æ‚çš„è„æ´»æ‰”è¿‡å»</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">askNode</span>(<span class="hljs-params">payload: <span class="hljs-built_in">any</span></span>) {
  <span class="hljs-keyword">const</span> msg = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(payload) + <span class="hljs-string">"\n"</span>;
  nodeWorker.<span class="hljs-property">stdin</span>.<span class="hljs-title function_">write</span>(textEncoder.<span class="hljs-title function_">encode</span>(msg));
  
  <span class="hljs-comment">// è¿™é‡Œç®€åŒ–äº†è¯»å–é€»è¾‘ï¼Œç”Ÿäº§ç¯å¢ƒè®°å¾—å¤„ç†ç²˜åŒ…</span>
  <span class="hljs-keyword">const</span> reader = nodeWorker.<span class="hljs-property">stdout</span>.<span class="hljs-title function_">getReader</span>();
  <span class="hljs-keyword">const</span> { value } = <span class="hljs-keyword">await</span> reader.<span class="hljs-title function_">read</span>(); 
  <span class="hljs-keyword">return</span> <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(textDecoder.<span class="hljs-title function_">decode</span>(value));
}

<span class="hljs-title class_">Bun</span>.<span class="hljs-title function_">serve</span>({
  <span class="hljs-attr">port</span>: <span class="hljs-number">3000</span>,
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-params">req</span>) {
    <span class="hljs-keyword">if</span> (req.<span class="hljs-property">url</span>.<span class="hljs-title function_">endsWith</span>(<span class="hljs-string">"/fast"</span>)) <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Response</span>(<span class="hljs-string">"Bun is fast!"</span>);
    
    <span class="hljs-comment">// åªæœ‰è¿™ç§é‡æ´»æ‰æ‰¾ Node</span>
    <span class="hljs-keyword">if</span> (req.<span class="hljs-property">url</span>.<span class="hljs-title function_">endsWith</span>(<span class="hljs-string">"/heavy"</span>)) {
      <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> req.<span class="hljs-title function_">json</span>();
      <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> <span class="hljs-title function_">askNode</span>(data);
      <span class="hljs-keyword">return</span> <span class="hljs-title class_">Response</span>.<span class="hljs-title function_">json</span>(result);
    }
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Response</span>(<span class="hljs-string">"404"</span>, { <span class="hljs-attr">status</span>: <span class="hljs-number">404</span> });
  },
});
</code></pre>
<p><strong>Node ç«¯ï¼ˆåå°ï¼‰ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// heavy-lifter.js</span>
<span class="hljs-keyword">const</span> readline = <span class="hljs-built_in">require</span>(<span class="hljs-string">'readline'</span>);

<span class="hljs-keyword">const</span> rl = readline.<span class="hljs-title function_">createInterface</span>({
  <span class="hljs-attr">input</span>: process.<span class="hljs-property">stdin</span>,
  <span class="hljs-attr">output</span>: process.<span class="hljs-property">stdout</span>,
  <span class="hljs-attr">terminal</span>: <span class="hljs-literal">false</span>
});

rl.<span class="hljs-title function_">on</span>(<span class="hljs-string">'line'</span>, <span class="hljs-function">(<span class="hljs-params">line</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> data = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(line);
  <span class="hljs-comment">// å‡è£…æˆ‘ä»¬åœ¨åšä¸€ä¸ªå¾ˆé‡çš„åŠ å¯†è¿ç®—</span>
  <span class="hljs-comment">// Node ç”Ÿæ€é‡Œçš„è€ä»£ç éƒ½åœ¨è¿™å„¿è·‘ï¼Œä¸ç”¨æ”¹</span>
  <span class="hljs-keyword">const</span> result = { <span class="hljs-attr">processed</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">echo</span>: data };
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(result));
});
</code></pre>
<p>è¿™æ ·æï¼Œè·¯ç”±å’Œ I/O ä¹Ÿæ˜¯äºšæ¯«ç§’çº§çš„ï¼Œè€Œ Node åªéœ€è¦å¤„ç†çº¯è®¡ç®—ï¼Œæ•ˆç‡ç›´æ¥ç¿»å€ã€‚</p>
<h3 data-id="heading-1">åˆ«è®© CPU æ¬ç –ï¼Œå­¦ä¼šåˆ©ç”¨ Bun çš„é›¶æ‹·è´ç‰¹æ€§</h3>
<p>æˆ‘å‘ç°æœåŠ¡å™¨ CPU å±…é«˜ä¸ä¸‹ï¼Œå±…ç„¶æ˜¯å› ä¸ºæˆ‘ä»¬åœ¨è¯»å–æœ¬åœ°çš„é…ç½®æ–‡ä»¶å’Œé™æ€ JSONï¼Œç„¶ååºåˆ—åŒ–å‘ç»™ç”¨æˆ·ã€‚</p>
<p>åœ¨ Node é‡Œï¼Œé€šå¸¸ä¼š <code>fs.readFile</code> ç„¶å <code>res.send</code>ã€‚è¿™ä¸­é—´å‘ç”Ÿäº†å¥½å‡ æ¬¡æ•°æ®æ‹·è´ï¼šä»ç£ç›˜åˆ°å†…æ ¸ï¼Œåˆ°ç”¨æˆ·ç©ºé—´ bufferï¼Œå†åˆ° socketã€‚</p>
<p>åœ¨ Bun é‡Œï¼Œæˆ‘æ”¹ç”¨ <code>Bun.file()</code>ã€‚è¿™ä¸ä»…æ˜¯å†™æ³•ä¸Šçš„åŒºåˆ«ï¼Œè¿™æ˜¯ç›´æ¥å‘Šè¯‰æ“ä½œç³»ç»Ÿï¼šâ€œæŠŠè¿™ä¸ªæ–‡ä»¶æ‰”åˆ°ç½‘å¡ä¸Šå»ï¼Œåˆ«ç»è¿‡æˆ‘çš„æ‰‹ã€‚â€</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// åˆ«å† readFile äº†ï¼Œç›´æ¥æµå¼ä¼ è¾“</span>
<span class="hljs-title class_">Bun</span>.<span class="hljs-title function_">serve</span>({
  <span class="hljs-title function_">fetch</span>(<span class="hljs-params">req</span>) {
    <span class="hljs-keyword">if</span> (req.<span class="hljs-property">url</span>.<span class="hljs-title function_">endsWith</span>(<span class="hljs-string">"/config"</span>)) {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Response</span>(<span class="hljs-title class_">Bun</span>.<span class="hljs-title function_">file</span>(<span class="hljs-string">"./big-config.json"</span>));
    }
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Response</span>(<span class="hljs-string">"404"</span>);
  }
});
</code></pre>
<p>è¿™ä¸€è¡Œä»£ç æ”¹åŠ¨ï¼Œè®©æˆ‘çš„é™æ€èµ„æºååé‡æå‡äº† 3 å€ã€‚</p>
<h3 data-id="heading-2">æ’å¥½é˜Ÿï¼Œå¾®æ‰¹å¤„ç†ï¼ˆMicro-batchingï¼‰</h3>
<p>é«˜å¹¶å‘æœ€å¯æ€•çš„æ˜¯ä»€ä¹ˆï¼Ÿæ˜¯ 1000 ä¸ªè¯·æ±‚åŒæ—¶æ¶Œè¿›æ¥ï¼Œæ¯ä¸ªéƒ½è¦å•ç‹¬å»è°ƒä¸€æ¬¡æ•°æ®åº“æˆ–è€…è°ƒä¸€æ¬¡ Node è¿›ç¨‹ã€‚å°±åƒåˆšä¸‹è¯¾ï¼Œä¸€å †å­¦ç”Ÿå…¨æ¶Œåˆ°é£Ÿå ‚æ‰“é¥­ã€‚</p>
<p>è€Œæˆ‘åŠ äº†ä¸€ä¸ªæå°çš„ç¼“å†²çª—å£ã€‚</p>
<p>å¦‚æœåœ¨ 3 æ¯«ç§’å†…æ¥äº† 50 ä¸ªè¯·æ±‚ï¼Œæˆ‘æŠŠå®ƒä»¬æ‰“åŒ…æˆä¸€ä¸ªæ•°ç»„ï¼Œä¸€æ¬¡æ€§å‘ç»™ Node æˆ–è€…æ•°æ®åº“ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">let</span> <span class="hljs-attr">buffer</span>: <span class="hljs-built_in">any</span>[] = [];
<span class="hljs-keyword">let</span> <span class="hljs-attr">timer</span>: <span class="hljs-title class_">Timer</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">processBatch</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> currentBatch = buffer;
  buffer = [];
  timer = <span class="hljs-literal">null</span>;
  <span class="hljs-comment">// ä¸€æ¬¡æ€§æŠŠ 50 ä¸ªä»»åŠ¡å‘ç»™ Nodeï¼Œè€Œä¸æ˜¯å‘ 50 æ¬¡</span>
  <span class="hljs-title function_">askNode</span>({ <span class="hljs-attr">type</span>: <span class="hljs-string">'batch'</span>, <span class="hljs-attr">items</span>: currentBatch });
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">enqueue</span>(<span class="hljs-params">item: <span class="hljs-built_in">any</span></span>) {
  buffer.<span class="hljs-title function_">push</span>(item);
  <span class="hljs-comment">// åªæœ‰åœ¨ç¬¬ä¸€æ¬¡æ¨è¿›æ¥æ—¶å¯åŠ¨è®¡æ—¶å™¨</span>
  <span class="hljs-keyword">if</span> (!timer) {
    timer = <span class="hljs-built_in">setTimeout</span>(processBatch, <span class="hljs-number">3</span>); <span class="hljs-comment">// 3ms çš„å»¶è¿Ÿç”¨æˆ·æ— æ„Ÿï¼Œä½†ååé‡å·¨å¤§æå‡</span>
  }
}
</code></pre>
<p>è¿™ 3 æ¯«ç§’çš„ç­‰å¾…ï¼Œæ¢æ¥çš„æ˜¯ CPU è´Ÿè½½é™ä½ 60%ã€‚</p>
<h3 data-id="heading-3">åˆ«åœ¨å¾ªç¯é‡Œ <code>new</code> å¯¹è±¡ï¼Œæ±‚ä½ äº†</h3>
<p>æˆ‘å®¡æŸ¥ä»£ç æ—¶å‘ç°ï¼Œå¾ˆå¤šäººå–œæ¬¢åœ¨ <code>fetch</code> æˆ–è€… <code>handleRequest</code> é‡Œå†™ <code>const db = new DatabaseClient()</code> æˆ–è€… <code>const regex = new RegExp(...)</code>ã€‚</p>
<p>æ¯æ¬¡è¯·æ±‚éƒ½é‡æ–°åˆ†é…å†…å­˜ã€å»ºç«‹è¿æ¥ã€ç¼–è¯‘æ­£åˆ™ï¼ŒGCï¼ˆåƒåœ¾å›æ”¶ï¼‰ä¸ç‚¸æ‰æ€ªã€‚</p>
<p>æŠŠæ‰€æœ‰èƒ½å¤ç”¨çš„ä¸œè¥¿â€”â€”æ•°æ®åº“è¿æ¥æ± ã€<code>TextEncoder</code>ã€æ­£åˆ™è¡¨è¾¾å¼ã€åŠ å¯† Keyï¼Œå…¨éƒ¨æåˆ°å…¨å±€ä½œç”¨åŸŸã€‚åœ¨ Bun å’Œ Node æ··åˆæ¶æ„é‡Œï¼Œè¿™ä¸€ç‚¹éå¸¸é‡è¦ï¼Œå› ä¸ºæˆ‘ä»¬è¿½æ±‚çš„æ˜¯æè‡´çš„ä½å»¶è¿Ÿã€‚</p>
<h3 data-id="heading-4">åŒå±‚ç¼“å­˜ï¼šå†…å­˜ä¸å¤Ÿï¼Œç£ç›˜æ¥å‡‘</h3>
<p>ä»¥å‰æˆ‘åªç”¨ Redisï¼Œä½†ç½‘ç»œè¯·æ±‚è¿˜æ˜¯æœ‰å¼€é”€ã€‚åæ¥æˆ‘å‘ç°ï¼ŒBun è¯»å–æ–‡ä»¶çš„é€Ÿåº¦è¶…çº§å¿«ã€‚</p>
<p>äºæ˜¯æˆ‘æäº†ä¸ªåŒå±‚ç¼“å­˜ï¼š</p>
<ol>
<li><strong>L1 å†…å­˜ç¼“å­˜</strong>ï¼šç”¨ LRU å­˜æœ€çƒ­çš„ 1000 ä¸ª Keyï¼Œå¾®ç§’çº§å“åº”ã€‚</li>
<li><strong>L2 æ–‡ä»¶ç¼“å­˜</strong>ï¼šæŠŠç¨å¾®å†·ä¸€ç‚¹çš„æ•°æ®ç›´æ¥å†™æˆ JSON æ–‡ä»¶æ”¾åœ¨ <code>/tmp/cache/</code> ä¸‹ã€‚</li>
</ol>
<p>æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œæ¯”å‘èµ·ä¸€ä¸ª TCP è¯·æ±‚å»è¿ Redis è¦å¿«å¾—å¤šã€‚</p>
<h3 data-id="heading-5">ä¸¢æ‰é‚£äº›è‡ƒè‚¿çš„ npm åŒ…</h3>
<p>ä»¥å‰åœ¨ Node é‡Œï¼Œä¸ºäº†ç”Ÿæˆä¸ª UUID æˆ–è€…è§£æä¸ªå‚æ•°ï¼Œæˆ‘ä»¬ä¹ æƒ¯æ€§ <code>npm install uuid</code> æˆ–è€… <code>qs</code>ã€‚</p>
<p>åœ¨ Bun é‡Œï¼ˆå…¶å®ç°ä»£ Node ä¹Ÿæ˜¯ï¼‰ï¼Œ<code>crypto.randomUUID()</code>ã€<code>URLSearchParams</code> éƒ½æ˜¯å†…ç½®çš„ï¼Œè€Œä¸”æ˜¯ C++ å±‚é¢ä¼˜åŒ–çš„ã€‚</p>
<p>æˆ‘æŠŠä»£ç é‡Œæ‰€æœ‰éå¿…è¦çš„ npm ä¾èµ–å…¨éƒ¨å‰”é™¤ï¼Œæ”¹ç”¨åŸç”Ÿ APIã€‚è¿™ä¸ä»…è®©å†·å¯åŠ¨å¿«äº†ï¼Œæ›´é‡è¦çš„æ˜¯å‡å°‘äº† <code>node_modules</code> çš„ I/O å™©æ¢¦ã€‚</p>
<h3 data-id="heading-6">è§£å†³ç²¾ç¥åˆ†è£‚çš„å¼€å‘ç¯å¢ƒ</h3>
<p>è¿™ä¸€å¥—æ¶æ„å°±æ˜¯Bun åšç½‘å…³ï¼ŒNode åšè®¡ç®—ã€‚ä½†åœ¨æœ¬åœ°å¼€å‘æ—¶ï¼Œæˆ‘å·®ç‚¹å´©æºƒã€‚</p>
<p>æˆ‘çš„ç”µè„‘ä¸Šæœ¬æ¥è·‘ç€ Node 22ï¼Œä¸ºäº†ç»´æŠ¤è€é¡¹ç›®ï¼Œåˆè¦è£… Node 14ï¼Œè¿˜è¦è£… Bunï¼Œç”šè‡³å¶å°”è¿˜è¦ç”¨ Deno è·‘ä¸ªè„šæœ¬ã€‚</p>
<p><code>nvm</code> åˆ‡æ¢æ¥åˆ‡æ¢å»è®©æˆ‘å¿ƒåŠ›äº¤ç˜ï¼Œç«¯å£å†²çªã€è·¯å¾„æŠ¥é”™ã€ç¯å¢ƒå˜é‡ä¹±æˆä¸€é”…ç²¥ã€‚æˆ‘ç»å¸¸æ˜¯ä¿®å¥½äº† <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.servbay.com%2Ffeatures" target="_blank" title="https://www.servbay.com/features" ref="nofollow noopener noreferrer">Bun ç¯å¢ƒ</a>ï¼ŒNode çš„è€é¡¹ç›®åˆè·‘ä¸èµ·æ¥äº†ã€‚</p>
<p>ç›´åˆ°æˆ‘å‘ç°äº† ServBayï¼Œå¼€å‘è€…çš„æ•‘å‘½ç¨»è‰ï¼Œå®ƒä¸æ˜¯é‚£ç§ç®€é™‹çš„ç‰ˆæœ¬åˆ‡æ¢å™¨ï¼Œå®ƒæ˜¯ä¸€ä¸ªå®Œæ•´çš„ã€éš”ç¦»çš„è¿è¡Œç¯å¢ƒå¹³å°ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b9411342f832407786acd42584bc59a9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6K-l55So5oi35bey5LiN5a2Y5Zyo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771403376&amp;x-signature=rBplZLWVhD%2Fb3lXGskCm4YyS93k%3D" alt="" loading="lazy"/></p>
<ul>
<li><strong>å¤šç‰ˆæœ¬å¹¶å­˜</strong>ï¼šæˆ‘å¯ä»¥åŒæ—¶å¼€å¯ Node 14ã€Node 22 å’Œ Bun 1.1 çš„ç¯å¢ƒï¼Œå®ƒä»¬ä¹‹é—´å®Œå…¨éš”ç¦»ï¼Œäº’ä¸æ‰“æ¶ã€‚</li>
<li><strong>ä¸€é”®å…¨å®¶æ¡¶</strong>ï¼šæˆ‘éœ€è¦çš„ Redisï¼ˆåšç¼“å­˜ï¼‰ã€PostgreSQLï¼ˆå­˜æ•°æ®ï¼‰ã€Caddyï¼ˆåšåä»£ï¼‰ï¼Œå®ƒå…¨éƒ½èƒ½ä¸€é”®å®‰è£…å¹¶è¿è¡Œã€‚</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bbad57b03a0747999936558ec5442fb3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6K-l55So5oi35bey5LiN5a2Y5Zyo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771403376&amp;x-signature=Y9wdnU3O5tNhAEpvgeRhvqbzZXY%3D" alt="" loading="lazy"/></p>
<ul>
<li><strong>é›¶é…ç½®</strong>ï¼šæˆ‘ä¸ç”±å¾—æ„Ÿå¹ï¼Œä»¥å‰ä¸ºäº†é… Docker å’Œ Homebrew æµªè´¹äº†ä¸å°‘æ—¶é—´å•Šã€‚</li>
</ul>
<p>æœ‰äº† ServBayï¼Œæˆ‘åœ¨æœ¬åœ°å®Œç¾å¤åˆ»äº†çº¿ä¸Šçš„æ··åˆæ¶æ„ï¼šBun ç›‘å¬ 3000 ç«¯å£ï¼ŒNode ç›‘å¬å†…éƒ¨ç®¡é“ï¼ŒRedis è·‘åœ¨åå°ã€‚æˆ‘å†ä¹Ÿä¸ç”¨æ‹…å¿ƒè¿™æ˜¯ç¯å¢ƒé—®é¢˜è¿˜æ˜¯ä»£ç é—®é¢˜äº†ã€‚</p>
<h3 data-id="heading-7">æ€»ç»“</h3>
<p>åªè¦èƒ½æŠŠå“åº”æ—¶é—´å‹è¿› 10msï¼Œæˆ‘ä¸åœ¨ä¹æ··ç”¨å¤šå°‘ç§è¿è¡Œæ—¶ã€‚</p>
<p>Bun ç»™äº†æˆ‘é€Ÿåº¦ï¼ŒNode ç»™äº†æˆ‘ç¨³å®šæ€§ï¼ŒServBay ç»™äº†æˆ‘ä¸€ä¸ªä¸å‘ç–¯çš„<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.servbay.com" target="_blank" title="https://www.servbay.com" ref="nofollow noopener noreferrer">å¼€å‘ç¯å¢ƒ</a>ã€‚</p>
<p>åˆ«å†çº ç»“ç”¨ Bun è¿˜æ˜¯ç”¨ Node.jsäº†ï¼Œéƒ½æˆå¹´äººäº†ï¼Œä¸ºä»€ä¹ˆä¸èƒ½ä¸¤ä¸ªéƒ½è¦ã€‚æŠŠå®ƒä»¬ç»“åˆèµ·æ¥ï¼Œç°åœ¨å°±å»æŠŠä½ çš„ API å»¶è¿Ÿç æ‰ 90%ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è§£å†³ IntelliJ IDEA è¿è¡Œ Spring Boot æµ‹è¯•æ—¶â€œå‘½ä»¤è¡Œè¿‡é•¿â€é”™è¯¯]]></title>    <link>https://juejin.cn/post/7605213691910455322</link>    <guid>https://juejin.cn/post/7605213691910455322</guid>    <pubDate>2026-02-11T08:32:08.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605213691910455322" data-draft-id="7605213691910438938" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è§£å†³ IntelliJ IDEA è¿è¡Œ Spring Boot æµ‹è¯•æ—¶â€œå‘½ä»¤è¡Œè¿‡é•¿â€é”™è¯¯"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-02-11T08:32:08.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§é»„è¯„æµ‹"/> <meta itemprop="url" content="https://juejin.cn/user/714024404135696"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è§£å†³ IntelliJ IDEA è¿è¡Œ Spring Boot æµ‹è¯•æ—¶â€œå‘½ä»¤è¡Œè¿‡é•¿â€é”™è¯¯
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/714024404135696/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§é»„è¯„æµ‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-11T08:32:08.000Z" title="Wed Feb 11 2026 08:32:08 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">è§£å†³ IntelliJ IDEA è¿è¡Œ Spring Boot æµ‹è¯•æ—¶â€œå‘½ä»¤è¡Œè¿‡é•¿â€é”™è¯¯</h2>
<p>åœ¨ä½¿ç”¨ IntelliJ IDEA å¼€å‘ Spring Boot é¡¹ç›®æ—¶ï¼Œä¸å°‘å¼€å‘è€…ä¼šé‡åˆ°ä¸€ä¸ªä»¤äººå¤´ç–¼çš„é—®é¢˜ï¼š<strong>è¿è¡Œå•å…ƒæµ‹è¯•æˆ–é›†æˆæµ‹è¯•æ—¶æç¤ºâ€œå‘½ä»¤è¡Œè¿‡é•¿â€ï¼ˆCommand line is too longï¼‰</strong> ã€‚è¿™ä¸ªé—®é¢˜é€šå¸¸å‡ºç°åœ¨ Windows ç³»ç»Ÿä¸Šï¼Œå°¤å…¶å½“é¡¹ç›®ä¾èµ–è¾ƒå¤šã€ç±»è·¯å¾„ï¼ˆclasspathï¼‰éå¸¸é•¿æ—¶æ›´å®¹æ˜“è§¦å‘ã€‚</p>
<p>æœ¬æ–‡å°†æ·±å…¥åˆ†æè¯¥é—®é¢˜çš„æˆå› ï¼Œå¹¶æä¾›å‡ ç§å®ç”¨æœ‰æ•ˆçš„è§£å†³æ–¹æ¡ˆï¼Œå¸®åŠ©ä½ å¿«é€Ÿæ¢å¤å¼€å‘æ•ˆç‡ã€‚</p>
<hr/>
<h3 data-id="heading-1">ä¸€ã€é—®é¢˜ç°è±¡</h3>
<p>å½“ä½ å°è¯•åœ¨ IDEA ä¸­è¿è¡ŒæŸä¸ª Spring Boot æµ‹è¯•ç±»ï¼ˆå¦‚ <code>@SpringBootTest</code> æ ‡æ³¨çš„æµ‹è¯•ï¼‰æ—¶ï¼Œæ§åˆ¶å°å¯èƒ½è¾“å‡ºå¦‚ä¸‹é”™è¯¯ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">Error running <span class="hljs-string">'MyApplicationTests'</span>: Command line is too <span class="hljs-type">long</span>. Shorten command line <span class="hljs-keyword">for</span> MyApplicationTests <span class="hljs-keyword">or</span> also <span class="hljs-keyword">for</span> Application <span class="hljs-keyword">default</span> configuration.
</code></pre>
<p>IDEA ä¼šå¼¹å‡ºæç¤ºæ¡†ï¼Œå»ºè®®ä½ â€œç¼©çŸ­å‘½ä»¤è¡Œâ€ã€‚</p>
<hr/>
<h3 data-id="heading-2">äºŒã€é—®é¢˜åŸå› </h3>
<p>è¯¥é”™è¯¯çš„æ ¹æœ¬åŸå› åœ¨äº <strong>æ“ä½œç³»ç»Ÿå¯¹å‘½ä»¤è¡Œé•¿åº¦çš„é™åˆ¶</strong>ï¼š</p>
<ul>
<li>åœ¨ Windows ç³»ç»Ÿä¸­ï¼Œå‘½ä»¤è¡Œæœ€å¤§é•¿åº¦é€šå¸¸ä¸º <strong>32767 ä¸ªå­—ç¬¦</strong>ã€‚</li>
<li>å½“é¡¹ç›®ä¾èµ–è¾ƒå¤šï¼ˆå°¤å…¶æ˜¯å¾®æœåŠ¡é¡¹ç›®æˆ–ä½¿ç”¨äº†å¤§é‡ starterï¼‰æ—¶ï¼ŒJVM å¯åŠ¨å‚æ•°ä¸­çš„ <code>-classpath</code> ä¼šå˜å¾—æå…¶å†—é•¿ã€‚</li>
<li>IDEA é»˜è®¤ä½¿ç”¨â€œå®Œæ•´ classpathâ€æ–¹å¼å¯åŠ¨æµ‹è¯•è¿›ç¨‹ï¼Œå¯¼è‡´å‘½ä»¤è¡Œè¶…å‡ºç³»ç»Ÿé™åˆ¶ã€‚</li>
</ul>
<p>macOS å’Œ Linux ç³»ç»Ÿè™½ç„¶é™åˆ¶è¾ƒå®½æ¾ï¼Œä½†åœ¨æç«¯æƒ…å†µä¸‹ä¹Ÿå¯èƒ½å‡ºç°ç±»ä¼¼é—®é¢˜ã€‚</p>
<hr/>
<h3 data-id="heading-3">ä¸‰ã€è§£å†³æ–¹æ¡ˆ</h3>
<h4 data-id="heading-4">âœ… æ–¹æ³•ä¸€ï¼šä¿®æ”¹è¿è¡Œé…ç½®çš„â€œShorten command lineâ€é€‰é¡¹ï¼ˆæ¨èï¼‰</h4>
<p>è¿™æ˜¯æœ€ç®€å•ç›´æ¥çš„è§£å†³æ–¹å¼ï¼š</p>
<ol>
<li>
<p>åœ¨ IDEA ä¸­ï¼Œç‚¹å‡»å³ä¸Šè§’è¿è¡Œé…ç½®ä¸‹æ‹‰èœå•ï¼Œé€‰æ‹© <strong>Edit Configurations...</strong> ã€‚</p>
</li>
<li>
<p>åœ¨å·¦ä¾§é€‰æ‹©ä½ çš„æµ‹è¯•ç±»ï¼ˆæˆ– Application é»˜è®¤é…ç½®ï¼‰ã€‚</p>
</li>
<li>
<p>æ‰¾åˆ° <strong>â€œShorten command lineâ€</strong> é€‰é¡¹ï¼ˆé€šå¸¸åœ¨ Environment æˆ– Environment variables ä¸‹æ–¹ï¼‰ã€‚</p>
</li>
<li>
<p>å°†å…¶å€¼ä»é»˜è®¤çš„ <strong>â€œnoneâ€</strong> æ”¹ä¸ºä»¥ä¸‹ä»»ä¸€é€‰é¡¹ï¼š</p>
<ul>
<li><strong>JAR manifest</strong>ï¼ˆæ¨èï¼‰ï¼šå°† classpath å†™å…¥ä¸´æ—¶ JAR çš„ MANIFEST.MF æ–‡ä»¶ä¸­ã€‚</li>
<li><strong>classpath file</strong>ï¼šå°† classpath å†™å…¥ä¸€ä¸ªä¸´æ—¶æ–‡ä»¶ï¼Œé€šè¿‡ <code>@argfile</code> æ–¹å¼ä¼ å…¥ï¼ˆé€‚ç”¨äº JDK 9+ï¼‰ã€‚</li>
</ul>
</li>
<li>
<p>ç‚¹å‡» <strong>OK</strong>ï¼Œé‡æ–°è¿è¡Œæµ‹è¯•ã€‚</p>
</li>
</ol>
<blockquote>
<p>ğŸ’¡ æç¤ºï¼šä½ ä¹Ÿå¯ä»¥åœ¨ <strong>Run â†’ Edit Configurations â†’ Templates â†’ JUnit</strong> ä¸­ä¿®æ”¹é»˜è®¤æ¨¡æ¿ï¼Œé¿å…æ¯æ¬¡æ–°å»ºæµ‹è¯•éƒ½éœ€æ‰‹åŠ¨è®¾ç½®ã€‚</p>
</blockquote>
<hr/>
<h4 data-id="heading-5">âœ… æ–¹æ³•äºŒï¼šå…¨å±€ä¿®æ”¹é»˜è®¤è¿è¡Œé…ç½®</h4>
<p>å¦‚æœä½ å¸Œæœ›æ‰€æœ‰æ–°åˆ›å»ºçš„æµ‹è¯•ç±»éƒ½è‡ªåŠ¨åº”ç”¨è¯¥è®¾ç½®ï¼š</p>
<ol>
<li>æ‰“å¼€ <strong>Run â†’ Edit Configurations...</strong></li>
<li>åœ¨å·¦ä¾§å±•å¼€ <strong>Templates â†’ JUnit</strong></li>
<li>ä¿®æ”¹ <strong>Shorten command line</strong> ä¸º <strong>JAR manifest</strong> æˆ– <strong>classpath file</strong></li>
<li>ä¿å­˜åï¼Œæ‰€æœ‰åç»­æ–°å»ºçš„æµ‹è¯•éƒ½ä¼šç»§æ‰¿æ­¤é…ç½®ã€‚</li>
</ol>
<hr/>
<h4 data-id="heading-6">âœ… æ–¹æ³•ä¸‰ï¼šä½¿ç”¨ Gradle / Maven å‘½ä»¤è¡Œè¿è¡Œæµ‹è¯•ï¼ˆç»•è¿‡ IDEAï¼‰</h4>
<p>å¦‚æœæš‚æ—¶ä¸æƒ³è°ƒæ•´ IDEA è®¾ç½®ï¼Œä¹Ÿå¯ä»¥ç›´æ¥é€šè¿‡ç»ˆç«¯è¿è¡Œæµ‹è¯•ï¼š</p>
<ul>
<li>
<p><strong>Maven é¡¹ç›®</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">./mvnw <span class="hljs-built_in">test</span> -Dtest=MyApplicationTests
</code></pre>
</li>
<li>
<p><strong>Gradle é¡¹ç›®</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">./gradlew <span class="hljs-built_in">test</span> --tests <span class="hljs-string">"com.example.MyApplicationTests"</span>
</code></pre>
</li>
</ul>
<p>è¿™ç§æ–¹å¼å®Œå…¨ç»•è¿‡ IDEA çš„ JVM å¯åŠ¨æœºåˆ¶ï¼Œè‡ªç„¶ä¸ä¼šå—å‘½ä»¤è¡Œé•¿åº¦é™åˆ¶ã€‚</p>
<hr/>
<h4 data-id="heading-7">âš ï¸ æ³¨æ„äº‹é¡¹</h4>
<ul>
<li><strong>JAR manifest æ–¹å¼</strong> è¦æ±‚ä¸´æ—¶ JAR çš„ MANIFEST.MF ä¸­ classpath ä¸èƒ½è¶…è¿‡ 72 å­—ç¬¦/è¡Œï¼ˆJava è§„èŒƒï¼‰ï¼Œä½† IDEA ä¼šè‡ªåŠ¨å¤„ç†æ¢è¡Œï¼Œä¸€èˆ¬æ— éœ€æ‹…å¿ƒã€‚</li>
<li>å¦‚æœä½¿ç”¨ <strong>è¿œç¨‹è°ƒè¯•</strong> æˆ– <strong>è‡ªå®šä¹‰ JVM å‚æ•°</strong>ï¼Œç¡®ä¿è¿™äº›å‚æ•°ä¸ä¼šè¿›ä¸€æ­¥åŠ å‰§å‘½ä»¤è¡Œè†¨èƒ€ã€‚</li>
<li>æŸäº›æ—§ç‰ˆ IDEAï¼ˆå¦‚ 2020 ä¹‹å‰ï¼‰å¯èƒ½ä¸æ”¯æŒ <code>@argfile</code>ï¼ˆclasspath fileï¼‰ï¼Œå»ºè®®ä¼˜å…ˆä½¿ç”¨ <strong>JAR manifest</strong>ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-8">å››ã€æ€»ç»“</h3>
<p>â€œå‘½ä»¤è¡Œè¿‡é•¿â€æ˜¯ IDEA åœ¨ Windows ä¸Šè¿è¡Œå¤§å‹ Java é¡¹ç›®æ—¶çš„å¸¸è§é—®é¢˜ï¼Œå°¤å…¶åœ¨ Spring Boot é¡¹ç›®ä¸­æ›´ä¸ºçªå‡ºã€‚é€šè¿‡åˆç†é…ç½® <strong>Shorten command line</strong> é€‰é¡¹ï¼Œå³å¯è½»æ¾ç»•è¿‡ç³»ç»Ÿé™åˆ¶ï¼Œæ— éœ€ä¿®æ”¹ä»£ç æˆ–é¡¹ç›®ç»“æ„ã€‚</p>
<blockquote>
<p><strong>æœ€ä½³å®è·µ</strong>ï¼šåœ¨å›¢é˜Ÿåä½œä¸­ï¼Œå»ºè®®å°†é»˜è®¤æµ‹è¯•è¿è¡Œé…ç½®ç»Ÿä¸€è®¾ä¸º â€œJAR manifestâ€ï¼Œå¹¶é€šè¿‡ <code>.idea/runConfigurations</code> æäº¤å…±äº«é…ç½®ï¼ˆå¯é€‰ï¼‰ï¼Œæå‡å›¢é˜Ÿå¼€å‘ä½“éªŒã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Spring Boot æ•´åˆ LibreOfficeï¼šæœ¬åœ°è°ƒç”¨ã€è¿œç¨‹æœåŠ¡ä¸ Docker ä¸€ä½“åŒ–éƒ¨ç½²å®æˆ˜]]></title>    <link>https://juejin.cn/post/7605135197166977074</link>    <guid>https://juejin.cn/post/7605135197166977074</guid>    <pubDate>2026-02-11T08:36:09.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605135197166977074" data-draft-id="7605157203591512091" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Spring Boot æ•´åˆ LibreOfficeï¼šæœ¬åœ°è°ƒç”¨ã€è¿œç¨‹æœåŠ¡ä¸ Docker ä¸€ä½“åŒ–éƒ¨ç½²å®æˆ˜"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-02-11T08:36:09.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§é¹1988"/> <meta itemprop="url" content="https://juejin.cn/user/2526022571922992"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Spring Boot æ•´åˆ LibreOfficeï¼šæœ¬åœ°è°ƒç”¨ã€è¿œç¨‹æœåŠ¡ä¸ Docker ä¸€ä½“åŒ–éƒ¨ç½²å®æˆ˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2526022571922992/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§é¹1988
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-11T08:36:09.000Z" title="Wed Feb 11 2026 08:36:09 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Spring Boot æ•´åˆ LibreOfficeï¼šæœ¬åœ°è°ƒç”¨ã€è¿œç¨‹æœåŠ¡ä¸ Docker ä¸€ä½“åŒ–éƒ¨ç½²å®æˆ˜</h2>
<p>åœ¨ä¼ä¸šçº§åº”ç”¨ä¸­ï¼Œæ–‡æ¡£æ ¼å¼è½¬æ¢ï¼ˆå¦‚ Word è½¬ PDFã€Excel è½¬ HTMLï¼‰æ˜¯å¸¸è§éœ€æ±‚ã€‚LibreOffice ä½œä¸ºå¼€æºã€å…è´¹ä¸”åŠŸèƒ½å¼ºå¤§çš„åŠå…¬å¥—ä»¶ï¼Œæä¾›äº†å‘½ä»¤è¡Œæ¥å£ï¼Œéå¸¸é€‚åˆé›†æˆåˆ° Java åº”ç”¨ä¸­å®ç°è‡ªåŠ¨åŒ–æ–‡æ¡£å¤„ç†ã€‚</p>
<p>æœ¬æ–‡å°†è¯¦ç»†ä»‹ç» <strong>Spring Boot é¡¹ç›®æ•´åˆ LibreOffice çš„ä¸¤ç§ä¸»æµæ–¹å¼</strong>ï¼š</p>
<ol>
<li><strong>è°ƒç”¨æœ¬åœ°å®‰è£…çš„ LibreOfficeï¼ˆé€‚ç”¨äºå•æœºæˆ–è½»é‡åœºæ™¯ï¼‰</strong></li>
<li><strong>è°ƒç”¨è¿œç¨‹ LibreOffice æœåŠ¡ï¼ˆé€‚ç”¨äºå¾®æœåŠ¡ã€é«˜å¹¶å‘æˆ–å®¹å™¨åŒ–æ¶æ„ï¼‰</strong></li>
</ol>
<p>å¹¶è¿›ä¸€æ­¥æ¼”ç¤ºå¦‚ä½•é€šè¿‡ <strong>Docker Compose</strong> å°† Spring Boot åº”ç”¨ä¸ LibreOffice å®¹å™¨ <strong>ä¸€ä½“åŒ–éƒ¨ç½²</strong>ï¼Œå®ç°å¼€ç®±å³ç”¨çš„æ–‡æ¡£è½¬æ¢æœåŠ¡ã€‚</p>
<hr/>
<h3 data-id="heading-1">ä¸€ã€å‡†å¤‡å·¥ä½œ</h3>
<h4 data-id="heading-2">æŠ€æœ¯æ ˆ</h4>
<ul>
<li>Spring Boot 3.xï¼ˆJava 17+ï¼‰</li>
<li>LibreOffice 7.0+</li>
<li>Docker &amp; Docker Compose</li>
<li>Apache Commons IOï¼ˆç”¨äºæ–‡ä»¶æ“ä½œï¼‰</li>
</ul>
<h4 data-id="heading-3">Maven ä¾èµ–ï¼ˆ<code>pom.xml</code>ï¼‰</h4>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>commons-io<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>commons-io<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.15.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<hr/>
<h3 data-id="heading-4">äºŒã€æ–¹å¼ä¸€ï¼šè°ƒç”¨æœ¬åœ° LibreOfficeï¼ˆè¿›ç¨‹è°ƒç”¨ï¼‰</h3>
<p>é€‚ç”¨äºå¼€å‘ç¯å¢ƒæˆ–å•æœºéƒ¨ç½²ï¼Œç›´æ¥é€šè¿‡ <code>ProcessBuilder</code> è°ƒç”¨ç³»ç»Ÿä¸­å·²å®‰è£…çš„ LibreOfficeã€‚</p>
<h4 data-id="heading-5">1. å®‰è£… LibreOfficeï¼ˆLinux ç¤ºä¾‹ï¼‰</h4>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-meta"># Ubuntu/Debian</span>
sudo apt-<span class="hljs-keyword">get</span> install libreoffice

<span class="hljs-meta"># CentOS/RHEL</span>
sudo yum install libreoffice-headless
</code></pre>
<blockquote>
<p>âš ï¸ ç”Ÿäº§ç¯å¢ƒå»ºè®®å®‰è£… <code>libreoffice-headless</code>ï¼ˆæ— å›¾å½¢ç•Œé¢ç‰ˆæœ¬ï¼‰ï¼ŒèŠ‚çœèµ„æºã€‚</p>
</blockquote>
<h4 data-id="heading-6">2. ç¼–å†™è½¬æ¢å·¥å…·ç±»</h4>
<pre><code class="hljs language-arduino" lang="arduino">@Service
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LocalLibreOfficeService</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-type">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> LIBREOFFICE_PATH = <span class="hljs-string">"/usr/bin/libreoffice"</span>;

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-type">void</span> <span class="hljs-title">convertToPdf</span><span class="hljs-params">(<span class="hljs-built_in">File</span> inputFile, <span class="hljs-built_in">File</span> outputFile)</span> throws IOException, InterruptedException </span>{
        <span class="hljs-type">String</span> outputDir = outputFile.<span class="hljs-built_in">getParent</span>();

        ProcessBuilder builder = <span class="hljs-keyword">new</span> <span class="hljs-built_in">ProcessBuilder</span>(
            LIBREOFFICE_PATH,
            <span class="hljs-string">"--headless"</span>,
            <span class="hljs-string">"--convert-to"</span>, <span class="hljs-string">"pdf"</span>,
            <span class="hljs-string">"--outdir"</span>, outputDir,
            inputFile.<span class="hljs-built_in">getAbsolutePath</span>()
        );

        <span class="hljs-built_in">Process</span> process = builder.<span class="hljs-built_in">start</span>();
        <span class="hljs-type">int</span> exitCode = process.<span class="hljs-built_in">waitFor</span>();

        <span class="hljs-keyword">if</span> (exitCode != <span class="hljs-number">0</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">RuntimeException</span>(<span class="hljs-string">"LibreOffice conversion failed with exit code: "</span> + exitCode);
        }

        <span class="hljs-comment">// é‡å‘½åç”Ÿæˆçš„æ–‡ä»¶ï¼ˆLibreOffice é»˜è®¤ä¿ç•™åŸæ–‡ä»¶åï¼‰</span>
        <span class="hljs-built_in">File</span> generated = <span class="hljs-keyword">new</span> <span class="hljs-built_in">File</span>(outputDir, 
            FilenameUtils.<span class="hljs-built_in">getBaseName</span>(inputFile.<span class="hljs-built_in">getName</span>()) + <span class="hljs-string">".pdf"</span>);
        <span class="hljs-keyword">if</span> (!generated.<span class="hljs-built_in">renameTo</span>(outputFile)) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">RuntimeException</span>(<span class="hljs-string">"Failed to rename output file"</span>);
        }
    }
}
</code></pre>
<h4 data-id="heading-7">3. æ§åˆ¶å™¨ç¤ºä¾‹</h4>
<pre><code class="hljs language-less" lang="less"><span class="hljs-variable">@PostMapping</span>(<span class="hljs-string">"/convert/local"</span>)
public ResponseEntity&lt;Resource&gt; <span class="hljs-built_in">convertLocal</span>(<span class="hljs-variable">@RequestParam</span>(<span class="hljs-string">"file"</span>) MultipartFile file) 
    throws IOException, InterruptedException {
    
    <span class="hljs-selector-tag">File</span> <span class="hljs-selector-tag">input</span> = <span class="hljs-selector-tag">File</span><span class="hljs-selector-class">.createTempFile</span>(<span class="hljs-string">"input_"</span>, <span class="hljs-string">"."</span> + <span class="hljs-built_in">getExtension</span>(file.<span class="hljs-built_in">getOriginalFilename</span>()));
    <span class="hljs-selector-tag">File</span> <span class="hljs-selector-tag">output</span> = <span class="hljs-selector-tag">File</span><span class="hljs-selector-class">.createTempFile</span>(<span class="hljs-string">"output_"</span>, <span class="hljs-string">".pdf"</span>);

    <span class="hljs-selector-tag">file</span><span class="hljs-selector-class">.transferTo</span>(input);
    <span class="hljs-selector-tag">localLibreOfficeService</span><span class="hljs-selector-class">.convertToPdf</span>(input, output);

    <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">ResponseEntity</span><span class="hljs-selector-class">.ok</span>()
        <span class="hljs-selector-class">.contentType</span>(MediaType.APPLICATION_PDF)
        <span class="hljs-selector-class">.body</span>(new <span class="hljs-built_in">ByteArrayResource</span>(Files.<span class="hljs-built_in">readAllBytes</span>(output.<span class="hljs-built_in">toPath</span>())));
}
</code></pre>
<p>âœ… <strong>ä¼˜ç‚¹</strong>ï¼šç®€å•ç›´æ¥ï¼Œæ— éœ€é¢å¤–æœåŠ¡<br/>
âŒ <strong>ç¼ºç‚¹</strong>ï¼šè€¦åˆæœ¬åœ°ç¯å¢ƒï¼Œéš¾ä»¥æ¨ªå‘æ‰©å±•ï¼Œå¤šè¿›ç¨‹ç«äº‰èµ„æº</p>
<hr/>
<h3 data-id="heading-8">ä¸‰ã€æ–¹å¼äºŒï¼šè°ƒç”¨è¿œç¨‹ LibreOffice æœåŠ¡ï¼ˆæ¨èç”Ÿäº§ä½¿ç”¨ï¼‰</h3>
<p>å°† LibreOffice å°è£…ä¸ºç‹¬ç«‹çš„ REST æœåŠ¡ï¼ˆæˆ–ä½¿ç”¨ç°æˆæ–¹æ¡ˆå¦‚ <strong>unoconv + Flask</strong> æˆ– <strong>Gotenberg</strong>ï¼‰ï¼ŒSpring Boot é€šè¿‡ HTTP è°ƒç”¨ã€‚</p>
<blockquote>
<p>æœ¬æ–‡é‡‡ç”¨ <strong>Gotenberg</strong> â€”â€” ä¸€ä¸ªåŸºäº Docker çš„ç°ä»£åŒ–æ–‡æ¡£è½¬æ¢å¾®æœåŠ¡ï¼Œæ”¯æŒ LibreOfficeã€Chrome ç­‰å¼•æ“ã€‚</p>
</blockquote>
<h4 data-id="heading-9">1. å¯åŠ¨ Gotenberg æœåŠ¡ï¼ˆDockerï¼‰</h4>
<pre><code class="hljs language-bash" lang="bash">docker run --<span class="hljs-built_in">rm</span> -p 3000:3000 thecodingmachine/gotenberg:8
</code></pre>
<p>Gotenberg æä¾› <code>/forms/libreoffice/convert</code> æ¥å£ç”¨äºæ–‡æ¡£è½¬æ¢ã€‚</p>
<h4 data-id="heading-10">2. Spring Boot è°ƒç”¨è¿œç¨‹æœåŠ¡</h4>
<pre><code class="hljs language-arduino" lang="arduino">@Service
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RemoteLibreOfficeService</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> RestTemplate restTemplate;
    <span class="hljs-keyword">private</span> <span class="hljs-type">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> GOTENBERG_URL = <span class="hljs-string">"http://localhost:3000"</span>;

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">RemoteLibreOfficeService</span><span class="hljs-params">(RestTemplate restTemplate)</span> </span>{
        <span class="hljs-keyword">this</span>.restTemplate = restTemplate;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-type">byte</span>[] <span class="hljs-built_in">convertToPdf</span>(MultipartFile file) {
        LinkedMultiValueMap&lt;<span class="hljs-type">String</span>, Object&gt; map = <span class="hljs-keyword">new</span> LinkedMultiValueMap&lt;&gt;();
        map.<span class="hljs-built_in">add</span>(<span class="hljs-string">"files"</span>, <span class="hljs-keyword">new</span> <span class="hljs-built_in">ByteArrayResource</span>(file.<span class="hljs-built_in">getBytes</span>()) {
            @Override
            <span class="hljs-keyword">public</span> <span class="hljs-type">String</span> <span class="hljs-built_in">getFilename</span>() {
                <span class="hljs-keyword">return</span> file.<span class="hljs-built_in">getOriginalFilename</span>();
            }
        });

        HttpHeaders headers = <span class="hljs-keyword">new</span> <span class="hljs-built_in">HttpHeaders</span>();
        headers.<span class="hljs-built_in">setContentType</span>(MediaType.MULTIPART_FORM_DATA);

        HttpEntity&lt;LinkedMultiValueMap&lt;<span class="hljs-type">String</span>, Object&gt;&gt; request = 
            <span class="hljs-keyword">new</span> HttpEntity&lt;&gt;(map, headers);

        <span class="hljs-keyword">return</span> restTemplate.<span class="hljs-built_in">postForObject</span>(
            GOTENBERG_URL + <span class="hljs-string">"/forms/libreoffice/convert"</span>,
            request,
            <span class="hljs-type">byte</span>[].<span class="hljs-keyword">class</span>
        );
    }
}
</code></pre>
<h4 data-id="heading-11">3. æ§åˆ¶å™¨è°ƒç”¨</h4>
<pre><code class="hljs language-less" lang="less"><span class="hljs-variable">@PostMapping</span>(<span class="hljs-string">"/convert/remote"</span>)
public ResponseEntity&lt;Resource&gt; <span class="hljs-built_in">convertRemote</span>(<span class="hljs-variable">@RequestParam</span>(<span class="hljs-string">"file"</span>) MultipartFile file) {
    <span class="hljs-selector-tag">byte</span><span class="hljs-selector-attr">[]</span> <span class="hljs-selector-tag">pdfBytes</span> = <span class="hljs-selector-tag">remoteLibreOfficeService</span><span class="hljs-selector-class">.convertToPdf</span>(file);
    <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">ResponseEntity</span><span class="hljs-selector-class">.ok</span>()
        <span class="hljs-selector-class">.contentType</span>(MediaType.APPLICATION_PDF)
        <span class="hljs-selector-class">.body</span>(new <span class="hljs-built_in">ByteArrayResource</span>(pdfBytes));
}
</code></pre>
<p>âœ… <strong>ä¼˜ç‚¹</strong>ï¼š</p>
<ul>
<li>è§£è€¦åº”ç”¨ä¸ LibreOffice</li>
<li>å¯ç‹¬ç«‹æ‰©ç¼©å®¹</li>
<li>æ”¯æŒå¤šç§æ ¼å¼ï¼ˆPDFã€PNGã€TXT ç­‰ï¼‰</li>
<li>å†…ç½®é‡è¯•ã€è¶…æ—¶ã€é™æµæœºåˆ¶ï¼ˆå¯é€šè¿‡ Nginx æˆ–æœåŠ¡ç½‘æ ¼å¢å¼ºï¼‰</li>
</ul>
<hr/>
<h3 data-id="heading-12">å››ã€Docker ä¸€ä½“åŒ–éƒ¨ç½²ï¼šSpring Boot + LibreOffice</h3>
<p>ä¸ºäº†å®ç°â€œä¸€é”®éƒ¨ç½²â€ï¼Œæˆ‘ä»¬ä½¿ç”¨ <strong>Docker Compose</strong> åŒæ—¶å¯åŠ¨åº”ç”¨å’Œ LibreOffice æœåŠ¡ã€‚</p>
<blockquote>
<p>æ–¹æ¡ˆé€‰æ‹©ï¼š<strong>Gotenberg å®¹å™¨ + è‡ªå®šä¹‰ Spring Boot å®¹å™¨</strong></p>
</blockquote>
<h4 data-id="heading-13">1. <code>Dockerfile</code>ï¼ˆSpring Boot åº”ç”¨ï¼‰</h4>
<pre><code class="hljs language-bash" lang="bash">FROM eclipse-temurin:17-jre-alpine
COPY target/app.jar /app.jar
EXPOSE 8080
ENTRYPOINT [<span class="hljs-string">"java"</span>, <span class="hljs-string">"-jar"</span>, <span class="hljs-string">"/app.jar"</span>]
</code></pre>
<h4 data-id="heading-14">2. <code>docker-compose.yml</code></h4>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">version:</span> <span class="hljs-string">'3.8'</span>

<span class="hljs-attr">services:</span>
  <span class="hljs-attr">app:</span>
    <span class="hljs-attr">build:</span> <span class="hljs-string">.</span>
    <span class="hljs-attr">ports:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"8080:8080"</span>
    <span class="hljs-attr">depends_on:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">gotenberg</span>
    <span class="hljs-attr">environment:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">GOTENBERG_URL=http://gotenberg:3000</span>

  <span class="hljs-attr">gotenberg:</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">thecodingmachine/gotenberg:8</span>
    <span class="hljs-attr">ports:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"3000:3000"</span>
</code></pre>
<h4 data-id="heading-15">3. ä¿®æ”¹ Spring Boot é…ç½®ï¼ˆæ”¯æŒåŠ¨æ€ URLï¼‰</h4>
<pre><code class="hljs language-ruby" lang="ruby"><span class="hljs-comment"># application.yml</span>
<span class="hljs-symbol">gotenberg:</span>
  <span class="hljs-symbol">url:</span> <span class="hljs-variable">${</span><span class="hljs-variable constant_">GOTENBERG_URL</span><span class="hljs-symbol">:http</span><span class="hljs-symbol">://localhost</span><span class="hljs-symbol">:</span><span class="hljs-number">3000</span>}
</code></pre>
<p>å¹¶åœ¨ <code>RemoteLibreOfficeService</code> ä¸­æ³¨å…¥é…ç½®ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@Value(<span class="hljs-string">"<span class="hljs-subst">${gotenberg.url}</span>"</span>)</span>
<span class="hljs-keyword">private</span> String gotenbergUrl;
</code></pre>
<h4 data-id="heading-16">4. æ„å»ºå¹¶å¯åŠ¨</h4>
<pre><code class="hljs language-lua" lang="lua">./mvnw clean <span class="hljs-built_in">package</span> -DskipTests
docker-compose up <span class="hljs-comment">--build</span>
</code></pre>
<p>è®¿é—®ï¼š</p>
<ul>
<li>åº”ç”¨ï¼š<code>http://localhost:8080/convert/remote</code></li>
<li>Gotenberg UIï¼š<code>http://localhost:3000</code></li>
</ul>
<hr/>
<h3 data-id="heading-17">äº”ã€å¯¹æ¯”æ€»ç»“</h3>

































<table><thead><tr><th>æ–¹å¼</th><th>é€‚ç”¨åœºæ™¯</th><th>æ‰©å±•æ€§</th><th>ç»´æŠ¤æˆæœ¬</th><th>æ¨èåº¦</th></tr></thead><tbody><tr><td>æœ¬åœ°è°ƒç”¨</td><td>å¼€å‘ã€æµ‹è¯•ã€å°å‹å•æœºåº”ç”¨</td><td>å·®</td><td>ä½</td><td>â­â­</td></tr><tr><td>è¿œç¨‹æœåŠ¡ï¼ˆGotenbergï¼‰</td><td>å¾®æœåŠ¡ã€ç”Ÿäº§ç¯å¢ƒã€é«˜å¹¶å‘</td><td>é«˜</td><td>ä¸­</td><td>â­â­â­â­â­</td></tr><tr><td>Docker ä¸€ä½“åŒ–</td><td>å¿«é€Ÿäº¤ä»˜ã€CI/CDã€æ¼”ç¤ºç¯å¢ƒ</td><td>é«˜</td><td>ä½ï¼ˆå®¹å™¨åŒ–åï¼‰</td><td>â­â­â­â­</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-18">å…­ã€æ³¨æ„äº‹é¡¹</h3>
<ol>
<li><strong>æ–‡ä»¶å®‰å…¨</strong>ï¼šä¸Šä¼ æ–‡ä»¶éœ€æ ¡éªŒç±»å‹ã€å¤§å°ï¼Œé˜²æ­¢æ¶æ„æ–‡æ¡£æ”»å‡»ã€‚</li>
<li><strong>ä¸´æ—¶æ–‡ä»¶æ¸…ç†</strong>ï¼šä½¿ç”¨ <code>@Scheduled</code> å®šæœŸæ¸…ç† <code>/tmp</code> ä¸­çš„ä¸´æ—¶æ–‡ä»¶ã€‚</li>
<li><strong>è¶…æ—¶æ§åˆ¶</strong>ï¼šLibreOffice è½¬æ¢å¤§æ–‡ä»¶å¯èƒ½è€—æ—¶è¾ƒé•¿ï¼Œéœ€è®¾ç½®åˆç†è¶…æ—¶ï¼ˆå¦‚ 60sï¼‰ã€‚</li>
<li><strong>å¹¶å‘é™åˆ¶</strong>ï¼šLibreOffice å•å®ä¾‹å¹¶å‘èƒ½åŠ›æœ‰é™ï¼Œé«˜å¹¶å‘åœºæ™¯å»ºè®®éƒ¨ç½²å¤šä¸ª Gotenberg å®ä¾‹ + è´Ÿè½½å‡è¡¡ã€‚</li>
</ol>
<hr/>
<h3 data-id="heading-19">ç»“è¯­</h3>
<p>é€šè¿‡æœ¬æ–‡ï¼Œä½ å·²æŒæ¡ Spring Boot ä¸ LibreOffice é›†æˆçš„ <strong>ä¸‰ç§éƒ¨ç½²å½¢æ€</strong>ï¼šä»ç®€å•çš„æœ¬åœ°è°ƒç”¨ï¼Œåˆ°è§£è€¦çš„è¿œç¨‹æœåŠ¡ï¼Œå†åˆ°å®¹å™¨åŒ–çš„ä¸€ä½“åŒ–éƒ¨ç½²ã€‚æ— è®ºä½ æ˜¯æ„å»ºå†…éƒ¨å·¥å…·è¿˜æ˜¯å¯¹å¤– SaaS äº§å“ï¼Œéƒ½èƒ½æ‰¾åˆ°åˆé€‚çš„æ–¹æ¡ˆã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»é›¶å¼€å§‹æ­å»º Hadoop å®Œå…¨åˆ†å¸ƒå¼é›†ç¾¤ï¼ˆè¶…è¯¦ç»†å›¾æ–‡æŒ‡å—ï¼‰]]></title>    <link>https://juejin.cn/post/7605136148592853019</link>    <guid>https://juejin.cn/post/7605136148592853019</guid>    <pubDate>2026-02-11T08:35:15.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605136148592853019" data-draft-id="7605136148592820251" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»é›¶å¼€å§‹æ­å»º Hadoop å®Œå…¨åˆ†å¸ƒå¼é›†ç¾¤ï¼ˆè¶…è¯¦ç»†å›¾æ–‡æŒ‡å—ï¼‰"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-02-11T08:35:15.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§å°šæ¥ä¹Ÿ"/> <meta itemprop="url" content="https://juejin.cn/user/1681597639955488"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»é›¶å¼€å§‹æ­å»º Hadoop å®Œå…¨åˆ†å¸ƒå¼é›†ç¾¤ï¼ˆè¶…è¯¦ç»†å›¾æ–‡æŒ‡å—ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1681597639955488/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§å°šæ¥ä¹Ÿ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-11T08:35:15.000Z" title="Wed Feb 11 2026 08:35:15 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä»é›¶å¼€å§‹æ­å»º Hadoop å®Œå…¨åˆ†å¸ƒå¼é›†ç¾¤ï¼ˆè¶…è¯¦ç»†å›¾æ–‡æŒ‡å—ï¼‰</h2>
<blockquote>
<p>é¢å‘é›¶åŸºç¡€ç”¨æˆ·ï¼Œæ‰‹æŠŠæ‰‹æ•™ä½ éƒ¨ç½²ä¸€ä¸ªå¯è¿è¡Œçš„ Hadoop å®Œå…¨åˆ†å¸ƒå¼ç¯å¢ƒ</p>
</blockquote>
<hr/>
<h3 data-id="heading-1">ä¸€ã€å‰è¨€ï¼šä»€ä¹ˆæ˜¯â€œå®Œå…¨åˆ†å¸ƒå¼â€ï¼Ÿ</h3>
<p>Hadoop æ”¯æŒä¸‰ç§è¿è¡Œæ¨¡å¼ï¼š</p>
<ul>
<li><strong>æœ¬åœ°æ¨¡å¼ï¼ˆStandaloneï¼‰</strong> ï¼šå•æœºè¿è¡Œï¼Œæ—  HDFSï¼Œä»…ç”¨äºè°ƒè¯•ã€‚</li>
<li><strong>ä¼ªåˆ†å¸ƒå¼æ¨¡å¼ï¼ˆPseudo-Distributedï¼‰</strong> ï¼šå•æœºæ¨¡æ‹Ÿå¤šè¿›ç¨‹ï¼Œæ‰€æœ‰å®ˆæŠ¤è¿›ç¨‹è¿è¡Œåœ¨åŒä¸€å°æœºå™¨ä¸Šã€‚</li>
<li><strong>å®Œå…¨åˆ†å¸ƒå¼æ¨¡å¼ï¼ˆFully Distributedï¼‰</strong> ï¼šçœŸæ­£çš„é›†ç¾¤éƒ¨ç½²ï¼ŒNameNodeã€DataNodeã€ResourceManager ç­‰è§’è‰²åˆ†å¸ƒåœ¨å¤šå°ç‰©ç†æˆ–è™šæ‹Ÿæœºä¸Šã€‚</li>
</ul>
<p>æœ¬æ–‡å°†å¸¦ä½ ä»é›¶å¼€å§‹ï¼Œåœ¨ <strong>3 å° Linux è™šæ‹Ÿæœº</strong> ä¸Šæ­å»ºä¸€ä¸ªæœ€å°å¯ç”¨çš„ Hadoop å®Œå…¨åˆ†å¸ƒå¼é›†ç¾¤ï¼ˆ1 ä¸ª NameNode + 2 ä¸ª DataNodeï¼‰ï¼Œé€‚åˆå­¦ä¹ ã€å®éªŒå’Œå°å‹å¼€å‘ç¯å¢ƒã€‚</p>
<hr/>
<h3 data-id="heading-2">äºŒã€å‡†å¤‡å·¥ä½œ</h3>
<h4 data-id="heading-3">1. ç¡¬ä»¶ä¸è½¯ä»¶è¦æ±‚</h4>

























<table><thead><tr><th>ç»„ä»¶</th><th>è¦æ±‚</th></tr></thead><tbody><tr><td>æ“ä½œç³»ç»Ÿ</td><td>CentOS 7 / Ubuntu 20.04ï¼ˆæ¨è CentOS 7ï¼‰</td></tr><tr><td>è™šæ‹Ÿæœºæ•°é‡</td><td>3 å°ï¼ˆå†…å­˜å»ºè®® â‰¥2GB/å°ï¼‰</td></tr><tr><td>JDK</td><td>OpenJDK 8 æˆ– Oracle JDK 8ï¼ˆHadoop 3.x ä¸å…¼å®¹ JDK 11+ çš„éƒ¨åˆ†ç‰¹æ€§ï¼‰</td></tr><tr><td>Hadoop ç‰ˆæœ¬</td><td>Hadoop 3.3.6ï¼ˆç¨³å®šç‰ˆï¼‰</td></tr></tbody></table>
<blockquote>
<p>ğŸ’¡ æç¤ºï¼šæœ¬æ–‡ä»¥ <strong>CentOS 7 + Hadoop 3.3.6 + OpenJDK 8</strong> ä¸ºä¾‹ã€‚</p>
</blockquote>
<h4 data-id="heading-4">2. èŠ‚ç‚¹è§„åˆ’</h4>

























<table><thead><tr><th>ä¸»æœºå</th><th>IP åœ°å€</th><th>è§’è‰²</th></tr></thead><tbody><tr><td>hadoop101</td><td>192.168.10.101</td><td>NameNode, ResourceManager</td></tr><tr><td>hadoop102</td><td>192.168.10.102</td><td>DataNode, NodeManager</td></tr><tr><td>hadoop103</td><td>192.168.10.103</td><td>DataNode, NodeManager</td></tr></tbody></table>
<blockquote>
<p>âœ… å»ºè®®ä½¿ç”¨å›ºå®š IPï¼Œé¿å… DHCP å˜åŒ–å¯¼è‡´é›†ç¾¤å¤±æ•ˆã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-5">ä¸‰ã€åŸºç¡€ç¯å¢ƒé…ç½®ï¼ˆæ¯å°æœºå™¨éƒ½è¦åšï¼‰</h3>
<h4 data-id="heading-6">æ­¥éª¤ 1ï¼šè®¾ç½®ä¸»æœºå</h4>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-meta"># åœ¨ hadoop101 ä¸Šæ‰§è¡Œ</span>
sudo hostnamectl <span class="hljs-keyword">set</span>-hostname hadoop101

<span class="hljs-meta"># åœ¨ hadoop102 ä¸Šæ‰§è¡Œ</span>
sudo hostnamectl <span class="hljs-keyword">set</span>-hostname hadoop102

<span class="hljs-meta"># åœ¨ hadoop103 ä¸Šæ‰§è¡Œ</span>
sudo hostnamectl <span class="hljs-keyword">set</span>-hostname hadoop103
</code></pre>
<h4 data-id="heading-7">æ­¥éª¤ 2ï¼šé…ç½® hosts æ–‡ä»¶ï¼ˆä¸‰å°æœºå™¨åŒæ­¥ï¼‰</h4>
<p>ç¼–è¾‘ <code>/etc/hosts</code>ï¼Œæ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š</p>
<pre><code class="hljs">192.168.10.101 hadoop101
192.168.10.102 hadoop102
192.168.10.103 hadoop103
</code></pre>
<blockquote>
<p>âœ… æ‰§è¡Œ <code>ping hadoop102</code> æµ‹è¯•æ˜¯å¦èƒ½è§£æã€‚</p>
</blockquote>
<h4 data-id="heading-8">æ­¥éª¤ 3ï¼šå…³é—­é˜²ç«å¢™ï¼ˆå®éªŒç¯å¢ƒï¼‰</h4>
<pre><code class="hljs language-arduino" lang="arduino">sudo systemctl stop firewalld
sudo systemctl disable firewalld
</code></pre>
<blockquote>
<p>ğŸ”’ ç”Ÿäº§ç¯å¢ƒåº”é…ç½®å®‰å…¨ç»„æˆ– iptables è§„åˆ™ï¼Œè€Œéç›´æ¥å…³é—­ã€‚</p>
</blockquote>
<h4 data-id="heading-9">æ­¥éª¤ 4ï¼šå®‰è£… OpenJDK 8</h4>
<pre><code class="hljs">sudo yum install -y java-1.8.0-openjdk-devel
</code></pre>
<p>éªŒè¯å®‰è£…ï¼š</p>
<pre><code class="hljs">java -version
javac -version
</code></pre>
<h4 data-id="heading-10">æ­¥éª¤ 5ï¼šé…ç½® SSH å…å¯†ç™»å½•ï¼ˆå…³é”®ï¼ï¼‰</h4>
<p>Hadoop é›†ç¾¤ä¾èµ– SSH è¿›è¡ŒèŠ‚ç‚¹é—´é€šä¿¡ã€‚éœ€åœ¨ <strong>NameNodeï¼ˆhadoop101ï¼‰</strong> ä¸Šç”Ÿæˆå¯†é’¥ï¼Œå¹¶åˆ†å‘åˆ°æ‰€æœ‰èŠ‚ç‚¹ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># åœ¨ hadoop101 ä¸Šæ“ä½œ</span>
ssh-keygen -t rsa -P <span class="hljs-string">''</span> -f ~/.ssh/id_rsa

<span class="hljs-comment"># åˆ†å‘å…¬é’¥åˆ°æ‰€æœ‰èŠ‚ç‚¹ï¼ˆåŒ…æ‹¬è‡ªå·±ï¼‰</span>
ssh-copy-<span class="hljs-built_in">id</span> hadoop101
ssh-copy-<span class="hljs-built_in">id</span> hadoop102
ssh-copy-<span class="hljs-built_in">id</span> hadoop103
</code></pre>
<p>æµ‹è¯•å…å¯†ç™»å½•ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">ssh hadoop102  <span class="hljs-comment"># åº”æ— éœ€å¯†ç ç›´æ¥ç™»å½•</span>
</code></pre>
<blockquote>
<p>âš ï¸ è‹¥æç¤ºâ€œPermission deniedâ€ï¼Œè¯·ç¡®ä¿ç›®æ ‡æœºå™¨çš„ <code>/etc/ssh/sshd_config</code> ä¸­ <code>PubkeyAuthentication yes</code> å·²å¯ç”¨ï¼Œå¹¶é‡å¯ sshdï¼š<code>sudo systemctl restart sshd</code></p>
</blockquote>
<hr/>
<h3 data-id="heading-11">å››ã€å®‰è£…ä¸é…ç½® Hadoop</h3>
<h4 data-id="heading-12">æ­¥éª¤ 1ï¼šä¸‹è½½å¹¶è§£å‹ Hadoop</h4>
<p>åœ¨ <strong>hadoop101</strong> ä¸Šæ“ä½œï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">cd</span> /opt
wget https://archive.apache.org/dist/hadoop/core/hadoop-3.3.6/hadoop-3.3.6.tar.gz
tar -zxvf hadoop-3.3.6.tar.gz
<span class="hljs-built_in">mv</span> hadoop-3.3.6 hadoop
</code></pre>
<h4 data-id="heading-13">æ­¥éª¤ 2ï¼šé…ç½®ç¯å¢ƒå˜é‡</h4>
<p>ç¼–è¾‘ <code>~/.bashrc</code>ï¼ˆæˆ– <code>/etc/profile</code>ï¼‰ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">export</span> HADOOP_HOME=/opt/hadoop
<span class="hljs-built_in">export</span> PATH=<span class="hljs-variable">$PATH</span>:<span class="hljs-variable">$HADOOP_HOME</span>/bin:<span class="hljs-variable">$HADOOP_HOME</span>/sbin
<span class="hljs-built_in">export</span> HADOOP_CONF_DIR=<span class="hljs-variable">$HADOOP_HOME</span>/etc/hadoop
</code></pre>
<p>ç”Ÿæ•ˆé…ç½®ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">source</span> ~/.bashrc
</code></pre>
<h4 data-id="heading-14">æ­¥éª¤ 3ï¼šåˆ†å‘ Hadoop åˆ°å…¶ä»–èŠ‚ç‚¹</h4>
<pre><code class="hljs language-bash" lang="bash">scp -r /opt/hadoop hadoop102:/opt/
scp -r /opt/hadoop hadoop103:/opt/
</code></pre>
<p>å¹¶åœ¨ hadoop102ã€hadoop103 ä¸ŠåŒæ ·é…ç½® <code>~/.bashrc</code> ä¸­çš„ç¯å¢ƒå˜é‡ã€‚</p>
<hr/>
<h3 data-id="heading-15">äº”ã€æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¿®æ”¹ï¼ˆåœ¨ hadoop101 ä¸Šæ“ä½œï¼‰</h3>
<p>è¿›å…¥ <code>$HADOOP_HOME/etc/hadoop</code> ç›®å½•ï¼Œä¿®æ”¹ä»¥ä¸‹æ–‡ä»¶ï¼š</p>
<h4 data-id="heading-16">1. <code>core-site.xml</code></h4>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>fs.defaultFS<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>hdfs://hadoop101:9000<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>hadoop.tmp.dir<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>/opt/hadoop/data/tmp<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span>
</code></pre>
<h4 data-id="heading-17">2. <code>hdfs-site.xml</code></h4>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>dfs.replication<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>2<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span> <span class="hljs-comment">&lt;!-- å‰¯æœ¬æ•°ä¸è¶…è¿‡ DataNode æ•°é‡ --&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>dfs.namenode.name.dir<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>/opt/hadoop/data/namenode<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>dfs.datanode.data.dir<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>/opt/hadoop/data/datanode<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span>
</code></pre>
<h4 data-id="heading-18">3. <code>yarn-site.xml</code></h4>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>yarn.nodemanager.aux-services<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>mapreduce_shuffle<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>yarn.resourcemanager.hostname<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>hadoop101<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>yarn.nodemanager.vmem-check-enabled<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span> <span class="hljs-comment">&lt;!-- é¿å…å†…å­˜æ£€æŸ¥å¤±è´¥ --&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span>
</code></pre>
<h4 data-id="heading-19">4. <code>mapred-site.xml</code></h4>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>mapreduce.framework.name<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>yarn<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span>
</code></pre>
<h4 data-id="heading-20">5. <code>workers</code> æ–‡ä»¶ï¼ˆæ›¿ä»£æ—§ç‰ˆ slavesï¼‰</h4>
<pre><code class="hljs">hadoop102
hadoop103
</code></pre>
<blockquote>
<p>âœ… æ³¨æ„ï¼šHadoop 3.x ä½¿ç”¨ <code>workers</code> æ–‡ä»¶å®šä¹‰ DataNode å’Œ NodeManager èŠ‚ç‚¹ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-21">å…­ã€æ ¼å¼åŒ– NameNode å¹¶å¯åŠ¨é›†ç¾¤</h3>
<h4 data-id="heading-22">1. æ ¼å¼åŒ– HDFSï¼ˆä»…é¦–æ¬¡æ‰§è¡Œï¼ï¼‰</h4>
<pre><code class="hljs language-lua" lang="lua">hdfs namenode -<span class="hljs-built_in">format</span>
</code></pre>
<blockquote>
<p>âš ï¸ é‡å¤æ‰§è¡Œä¼šæ¸…ç©º HDFS æ•°æ®ï¼</p>
</blockquote>
<h4 data-id="heading-23">2. å¯åŠ¨ HDFS</h4>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">start</span><span class="hljs-operator">-</span>dfs.sh
</code></pre>
<h4 data-id="heading-24">3. å¯åŠ¨ YARN</h4>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">start</span><span class="hljs-operator">-</span>yarn.sh
</code></pre>
<h4 data-id="heading-25">4. éªŒè¯è¿›ç¨‹</h4>
<ul>
<li><strong>hadoop101</strong> åº”æœ‰ï¼šNameNodeã€SecondaryNameNodeã€ResourceManager</li>
<li><strong>hadoop102 / hadoop103</strong> åº”æœ‰ï¼šDataNodeã€NodeManager</li>
</ul>
<p>ä½¿ç”¨ <code>jps</code> å‘½ä»¤æŸ¥çœ‹ã€‚</p>
<h4 data-id="heading-26">5. Web UI éªŒè¯</h4>
<ul>
<li>HDFS ç®¡ç†ç•Œé¢ï¼š<a href="https://link.juejin.cn?target=http%3A%2F%2Fhadoop101%3A9870" target="_blank" title="http://hadoop101:9870" ref="nofollow noopener noreferrer">http://hadoop101:9870</a></li>
<li>YARN èµ„æºç®¡ç†å™¨ï¼š<a href="https://link.juejin.cn?target=http%3A%2F%2Fhadoop101%3A8088" target="_blank" title="http://hadoop101:8088" ref="nofollow noopener noreferrer">http://hadoop101:8088</a></li>
</ul>
<blockquote>
<p>âœ… è‹¥æ— æ³•è®¿é—®ï¼Œè¯·æ£€æŸ¥é˜²ç«å¢™æˆ–ç½‘ç»œé…ç½®ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-27">ä¸ƒã€è¿è¡Œ WordCount ç¤ºä¾‹æµ‹è¯•</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åˆ›å»º HDFS ç›®å½•</span>
hdfs dfs -<span class="hljs-built_in">mkdir</span> /input

<span class="hljs-comment"># ä¸Šä¼ æœ¬åœ°æ–‡ä»¶</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"hello hadoop hello world"</span> &gt; /tmp/test.txt
hdfs dfs -put /tmp/test.txt /input

<span class="hljs-comment"># è¿è¡Œ MapReduce ä»»åŠ¡</span>
hadoop jar <span class="hljs-variable">$HADOOP_HOME</span>/share/hadoop/mapreduce/hadoop-mapreduce-examples-3.3.6.jar wordcount /input /output

<span class="hljs-comment"># æŸ¥çœ‹ç»“æœ</span>
hdfs dfs -<span class="hljs-built_in">cat</span> /output/*
</code></pre>
<p>è‹¥è¾“å‡ºï¼š</p>
<pre><code class="hljs">hadoop	1
hello	2
world	1
</code></pre>
<p>è¯´æ˜é›†ç¾¤è¿è¡ŒæˆåŠŸï¼</p>
<hr/>
<h3 data-id="heading-28">å…«ã€å¸¸è§é—®é¢˜æ’æŸ¥</h3>

























<table><thead><tr><th>é—®é¢˜</th><th>è§£å†³æ–¹æ¡ˆ</th></tr></thead><tbody><tr><td>DataNode æ— æ³•å¯åŠ¨</td><td>æ£€æŸ¥ <code>workers</code> æ–‡ä»¶ã€SSH å…å¯†ã€æ—¶é—´åŒæ­¥</td></tr><tr><td>NameNode æ ¼å¼åŒ–å¤±è´¥</td><td>åˆ é™¤ <code>hadoop.tmp.dir</code> ç›®å½•åé‡è¯•</td></tr><tr><td>Web UI æ— æ³•è®¿é—®</td><td>å…³é—­é˜²ç«å¢™æˆ–å¼€æ”¾ 9870/8088 ç«¯å£</td></tr><tr><td>â€œNativeIOâ€ æŠ¥é”™</td><td>å¿½ç•¥ï¼ˆä¸å½±å“åŠŸèƒ½ï¼‰ï¼Œæˆ–ç¼–è¯‘ native åº“</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-29">ä¹ã€ç»“è¯­</h3>
<p>é€šè¿‡æœ¬æ–‡ï¼Œä½ å·²æˆåŠŸæ­å»ºäº†ä¸€ä¸ª <strong>3 èŠ‚ç‚¹çš„ Hadoop å®Œå…¨åˆ†å¸ƒå¼é›†ç¾¤</strong>ã€‚è™½ç„¶æ­¥éª¤è¾ƒå¤šï¼Œä½†æ¯ä¸€æ­¥éƒ½æ˜¯ç†è§£ Hadoop æ¶æ„çš„å…³é”®ã€‚æŒæ¡æ­¤è¿‡ç¨‹ï¼Œä¸ä»…æœ‰åŠ©äºå­¦ä¹ å¤§æ•°æ®ç”Ÿæ€ï¼ˆå¦‚ Hiveã€HBaseã€Sparkï¼‰ï¼Œä¹Ÿä¸ºåç»­æ·±å…¥åˆ†å¸ƒå¼ç³»ç»Ÿæ‰“ä¸‹åšå®åŸºç¡€ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç¦»çº¿å®‰è£…Nginxï¼ˆLinuxç¯å¢ƒä¸”æ— rootæƒé™ï¼‰]]></title>    <link>https://juejin.cn/post/7605206033266573347</link>    <guid>https://juejin.cn/post/7605206033266573347</guid>    <pubDate>2026-02-11T08:37:05.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605206033266573347" data-draft-id="7605114376803893288" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç¦»çº¿å®‰è£…Nginxï¼ˆLinuxç¯å¢ƒä¸”æ— rootæƒé™ï¼‰"/> <meta itemprop="keywords" content="Nginx"/> <meta itemprop="datePublished" content="2026-02-11T08:37:05.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°é—«åŒå­¦yxy"/> <meta itemprop="url" content="https://juejin.cn/user/2455659411145513"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç¦»çº¿å®‰è£…Nginxï¼ˆLinuxç¯å¢ƒä¸”æ— rootæƒé™ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2455659411145513/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°é—«åŒå­¦yxy
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-11T08:37:05.000Z" title="Wed Feb 11 2026 08:37:05 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">ğŸ“‚ ç¬¬ä¸€æ­¥ï¼šå‡†å¤‡å®‰è£…åŒ…ï¼ˆåœ¨æœ‰ç½‘ç»œçš„ç”µè„‘ä¸Šæ“ä½œï¼‰</h3>
<p>ä¸‹è½½ä»¥ä¸‹æ–‡ä»¶ï¼ˆå¯æ ¹æ®å®é™…éœ€æ±‚è°ƒæ•´ï¼‰ï¼Œå¹¶å°†å®ƒä»¬ä¸Šä¼ åˆ°æœåŠ¡å™¨çš„ <code>/home/mca/</code> ç›®å½•ä¸‹ã€‚</p>
<ol>
<li>
<p><strong>Nginx</strong>: ä¸‹è½½ <code>.tar.gz</code> å‹ç¼©åŒ…ã€‚</p>
<ul>
<li>ä¾‹å¦‚ï¼š<code>nginx-1.22.1.tar.gz</code></li>
</ul>
</li>
<li>
<p><strong>Nginx ä¾èµ–åº“</strong>ï¼ˆå¿…é¡»ï¼å› ä¸ºç¦»çº¿ä¸”æ— æƒé™ï¼‰ï¼š</p>
<ul>
<li><code>pcre-8.45.tar.gz</code> (ç”¨äºè§£ææ­£åˆ™è¡¨è¾¾å¼)</li>
<li><code>zlib-1.2.13.tar.gz</code> (ç”¨äº gzip å‹ç¼©)</li>
<li><code>openssl-1.1.1w.tar.gz</code> (ç”¨äº HTTPS)</li>
</ul>
</li>
</ol>
<h3 data-id="heading-1">ğŸ› ï¸ ç¬¬äºŒæ­¥ï¼šç™»å½•æœåŠ¡å™¨å¹¶åˆ›å»ºç›®å½•ç»“æ„</h3>
<p>å‡è®¾å·²ç»å°†ä¸Šè¿° 4 ä¸ªæ–‡ä»¶ä¸Šä¼ åˆ°äº† <code>/home/mca/</code> ç›®å½•ã€‚</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1. åˆ›å»ºå¿…è¦çš„ç›®å½•ç»“æ„</span>
<span class="hljs-built_in">cd</span> /home/mca/
<span class="hljs-built_in">mkdir</span> -p software  <span class="hljs-comment"># ç”¨äºå­˜æ”¾å®‰è£…åŒ…</span>
<span class="hljs-built_in">mkdir</span> -p app       <span class="hljs-comment"># ç”¨äºå­˜æ”¾ç¼–è¯‘/è§£å‹åçš„ç¨‹åº</span>
â€‹
<span class="hljs-comment"># 2. å°†ä¸Šä¼ çš„å®‰è£…åŒ…ç§»åŠ¨åˆ° software ç›®å½•ï¼ˆå¦‚æœè¿˜æ²¡åœ¨è¯¥ç›®å½•ä¸‹ï¼‰</span>
<span class="hljs-built_in">mv</span> *.tar.gz software/
<span class="hljs-built_in">cd</span> software
</code></pre>
<h3 data-id="heading-2">ğŸŒ ç¬¬ä¸‰æ­¥ï¼šç¼–è¯‘å®‰è£… Nginxï¼ˆå…³é”®æ­¥éª¤ï¼‰</h3>
<p>ç”±äºæ˜¯ç¦»çº¿ä¸”æ—  <code>root</code> æƒé™ï¼Œå¿…é¡»åœ¨ <code>configure</code> é˜¶æ®µæŒ‡å®šä¾èµ–åº“çš„æºç è·¯å¾„å’Œå®‰è£…è·¯å¾„ã€‚</p>
<ol start="0">
<li>
<p><strong>è§£å‹ Nginx å’Œä¾èµ–</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">cd</span> /home/mca/software
<span class="hljs-comment"># è§£å‹ Nginx</span>
tar -zxvf nginx-1.22.1.tar.gz
<span class="hljs-comment"># è§£å‹ä¾èµ–åº“ï¼ˆå¿…é¡»è§£å‹åœ¨ software ç›®å½•ä¸‹ï¼Œæ–¹ä¾¿ Nginx æ‰¾åˆ°ï¼‰</span>
tar -zxvf pcre-8.45.tar.gz
tar -zxvf zlib-1.2.13.tar.gz
tar -zxvf openssl-1.1.1w.tar.gz
</code></pre>
</li>
<li>
<p><strong>ç¼–è¯‘å®‰è£…</strong></p>
<ul>
<li>
<p>è¿›å…¥ Nginx æºç ç›®å½•ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">cd</span> nginx-1.22.1
</code></pre>
</li>
<li>
<p>æ‰§è¡Œé…ç½®å‘½ä»¤ï¼ˆå…³é”®ï¼š<code>--prefix</code> æŒ‡å®šå®‰è£…åˆ°æœ‰æƒé™çš„ç›®å½•ï¼‰ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">./configure \
<span class="hljs-attr">--prefix</span>=/home/mca/app/nginx \
<span class="hljs-attr">--with-pcre</span>=../pcre-<span class="hljs-number">8.45</span> \
<span class="hljs-attr">--with-zlib</span>=../zlib-<span class="hljs-number">1.2</span>.<span class="hljs-number">13</span> \
<span class="hljs-attr">--with-openssl</span>=../openssl-<span class="hljs-number">1.1</span>.<span class="hljs-number">1</span>w \
--with-http_ssl_module
</code></pre>
</li>
<li>
<p>å¦‚æœä¸Šé¢å‘½ä»¤æŠ¥é”™ï¼Œé€šå¸¸æ˜¯å› ä¸ºç¼ºå°‘ <code>gcc</code> ç¼–è¯‘å™¨ã€‚è¯·ç¡®è®¤ <code>gcc --version</code> æ˜¯å¦èƒ½è¿è¡Œï¼ˆè¿™éœ€è¦ç®¡ç†å‘˜åœ¨ç¦»çº¿ç¯å¢ƒä¸‹å®‰è£… <code>gcc</code> RPM åŒ…ï¼Œå±äºç³»ç»ŸåŸºç¡€ç¯å¢ƒï¼Œä¸å±äºåº”ç”¨å®‰è£…åŒ…ï¼‰ã€‚</p>
</li>
<li>
<p>ç¼–è¯‘å¹¶å®‰è£…ï¼š</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-built_in">make</span> &amp;&amp; <span class="hljs-built_in">make</span> install
</code></pre>
</li>
</ul>
</li>
<li>
<p><strong>é…ç½®å’Œå¯åŠ¨ Nginx</strong></p>
<ul>
<li>
<p>è¿›å…¥å®‰è£…ç›®å½•çš„ <code>sbin</code> ç›®å½•ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">cd</span> /home/mca/app/nginx/sbin
</code></pre>
</li>
<li>
<p>ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼ˆå¦‚æœéœ€è¦ï¼‰ï¼šç¼–è¾‘ <code>/home/mca/app/nginx/conf/nginx.conf</code>ï¼Œå°† <code>listen 80;</code> æ”¹ä¸º <code>listen 8081;</code>ï¼ˆæˆ–å…¶ä»–å¤§äº 1024 çš„ç«¯å£ï¼Œå› ä¸ºé root ç”¨æˆ·ä¸èƒ½ä½¿ç”¨ 1-1024 ç«¯å£ï¼‰ã€‚</p>
</li>
<li>
<p>å¯åŠ¨ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">./nginx
</code></pre>
</li>
<li>
<p>é‡æ–°åŠ è½½é…ç½®ï¼ˆä¿®æ”¹ conf åï¼‰ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">./nginx -s reload
</code></pre>
</li>
</ul>
</li>
</ol>
<h3 data-id="heading-3">ğŸ“Œ æ€»ç»“ä¸æ£€æŸ¥</h3>
<ul>
<li>
<p><strong>ç›®å½•ç»“æ„</strong>ï¼š</p>
<ul>
<li><code>/home/mca/software/</code>ï¼šå­˜æ”¾æ‰€æœ‰ <code>.tar.gz</code> æºæ–‡ä»¶ã€‚</li>
<li><code>/home/mca/app/</code>ï¼šå­˜æ”¾è§£å‹/ç¼–è¯‘åçš„ Nginxã€‚</li>
</ul>
</li>
<li>
<p><strong>æƒé™</strong>ï¼šæ‰€æœ‰æ“ä½œéƒ½åœ¨ <code>mca</code> ç”¨æˆ·ä¸‹å®Œæˆï¼Œæ— éœ€ <code>sudo</code> æˆ– <code>root</code>ã€‚</p>
</li>
<li>
<p><strong>ç«¯å£</strong>ï¼šNginx é»˜è®¤ 80ï¼ˆéœ€æ‰‹åŠ¨æ”¹é…ç½®å¤§äº 1024 çš„ç«¯å£ï¼Œå› ä¸ºé root ç”¨æˆ·ä¸èƒ½ä½¿ç”¨ 1-1024 ç«¯å£ï¼‰ã€‚åŒæ—¶ç¡®ä¿æœåŠ¡å™¨é˜²ç«å¢™ï¼ˆå¦‚æœæœ‰ï¼‰æ”¾è¡Œè¿™äº›ç«¯å£ã€‚</p>
</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[C/C++è¿æ¥MySQLå®æˆ˜æŒ‡å—ï¼šæ‰§è¡ŒSQLè¯·æ±‚è¯¦è§£]]></title>    <link>https://juejin.cn/post/7605173538417721354</link>    <guid>https://juejin.cn/post/7605173538417721354</guid>    <pubDate>2026-02-11T08:38:26.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605173538417721354" data-draft-id="7605135197167009842" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="C/C++è¿æ¥MySQLå®æˆ˜æŒ‡å—ï¼šæ‰§è¡ŒSQLè¯·æ±‚è¯¦è§£"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-02-11T08:38:26.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§é»„è¯„æµ‹"/> <meta itemprop="url" content="https://juejin.cn/user/714024404135696"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            C/C++è¿æ¥MySQLå®æˆ˜æŒ‡å—ï¼šæ‰§è¡ŒSQLè¯·æ±‚è¯¦è§£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/714024404135696/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§é»„è¯„æµ‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-11T08:38:26.000Z" title="Wed Feb 11 2026 08:38:26 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨å¼€å‘é«˜æ€§èƒ½æˆ–ç³»ç»Ÿçº§åº”ç”¨æ—¶ï¼ŒC/C++å› å…¶æ¥è¿‘ç¡¬ä»¶ã€è¿è¡Œæ•ˆç‡é«˜çš„ç‰¹ç‚¹è¢«å¹¿æ³›ä½¿ç”¨ã€‚è€Œå½“è¿™ç±»åº”ç”¨éœ€è¦ä¸æ•°æ®åº“äº¤äº’æ—¶ï¼ŒMySQL æä¾›äº†å®˜æ–¹çš„ C APIï¼ˆå³ MySQL Connector/Cï¼‰ï¼Œä½¿å¾—å¼€å‘è€…å¯ä»¥ç›´æ¥åœ¨ C/C++ ç¨‹åºä¸­è¿æ¥ã€æŸ¥è¯¢å’Œæ“ä½œ MySQL æ•°æ®åº“ã€‚</p>
<p>æœ¬æ–‡å°†èšç„¦äº <strong>å¦‚ä½•ä½¿ç”¨ C/C++ è¿æ¥ MySQL å¹¶å‘é€ SQL è¯·æ±‚</strong>ï¼Œæ¶µç›–ä»ç¯å¢ƒå‡†å¤‡åˆ°æ‰§è¡ŒæŸ¥è¯¢çš„å®Œæ•´æµç¨‹ï¼Œå¹¶æä¾›å¯ç›´æ¥è¿è¡Œçš„ç¤ºä¾‹ä»£ç ã€‚</p>
<hr/>
<h3 data-id="heading-0">ä¸€ã€å‡†å¤‡å·¥ä½œ</h3>
<h4 data-id="heading-1">1. å®‰è£… MySQL å¼€å‘åº“</h4>
<p>åœ¨ Linux ç³»ç»Ÿï¼ˆå¦‚ Ubuntu/Debianï¼‰ä¸Šï¼Œå¯é€šè¿‡ä»¥ä¸‹å‘½ä»¤å®‰è£… MySQL å®¢æˆ·ç«¯å¼€å‘åº“ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">sudo apt-get install libmysqlclient-dev
</code></pre>
<p>åœ¨ CentOS/RHEL ä¸Šï¼š</p>
<pre><code class="hljs language-bash" lang="bash">sudo yum install mysql-devel
<span class="hljs-comment"># æˆ–ï¼ˆè¾ƒæ–°ç‰ˆæœ¬ï¼‰</span>
sudo dnf install mysql-devel
</code></pre>
<p>Windows ç”¨æˆ·å¯ä» <a href="https://link.juejin.cn?target=https%3A%2F%2Fdev.mysql.com%2Fdownloads%2Fc-api%2F" target="_blank" title="https://dev.mysql.com/downloads/c-api/" ref="nofollow noopener noreferrer">MySQL å®˜ç½‘</a> ä¸‹è½½ Connector/Cã€‚</p>
<h4 data-id="heading-2">2. ç¼–è¯‘é“¾æ¥é€‰é¡¹</h4>
<p>ç¼–è¯‘æ—¶éœ€é“¾æ¥ <code>libmysqlclient</code> åº“ã€‚ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs">gcc -o myapp myapp.c -lmysqlclient
</code></pre>
<hr/>
<h3 data-id="heading-3">äºŒã€åŸºæœ¬æµç¨‹æ¦‚è§ˆ</h3>
<p>ä½¿ç”¨ C API æ“ä½œ MySQL çš„å…¸å‹æ­¥éª¤å¦‚ä¸‹ï¼š</p>
<ol>
<li>åˆå§‹åŒ– MySQL è¿æ¥å¥æŸ„ï¼ˆ<code>mysql_init()</code>ï¼‰</li>
<li>è¿æ¥åˆ°æ•°æ®åº“ï¼ˆ<code>mysql_real_connect()</code>ï¼‰</li>
<li>å‘é€ SQL è¯·æ±‚ï¼ˆ<code>mysql_query()</code> æˆ– <code>mysql_real_query()</code>ï¼‰</li>
<li>å¤„ç†ç»“æœé›†ï¼ˆå¦‚æœ‰ï¼‰ï¼ˆ<code>mysql_store_result()</code> / <code>mysql_use_result()</code>ï¼‰</li>
<li>é‡Šæ”¾èµ„æºå¹¶å…³é—­è¿æ¥ï¼ˆ<code>mysql_close()</code>ï¼‰</li>
</ol>
<hr/>
<h3 data-id="heading-4">ä¸‰ã€è¿æ¥æ•°æ®åº“</h3>
<pre><code class="hljs language-c" lang="c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;mysql/mysql.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdlib.h&gt;</span></span>

<span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> {
    MYSQL *conn;
    <span class="hljs-type">const</span> <span class="hljs-type">char</span> *server = <span class="hljs-string">"localhost"</span>;
    <span class="hljs-type">const</span> <span class="hljs-type">char</span> *user = <span class="hljs-string">"your_user"</span>;
    <span class="hljs-type">const</span> <span class="hljs-type">char</span> *password = <span class="hljs-string">"your_password"</span>;
    <span class="hljs-type">const</span> <span class="hljs-type">char</span> *database = <span class="hljs-string">"test_db"</span>;

    <span class="hljs-comment">// åˆå§‹åŒ–è¿æ¥ç»“æ„</span>
    conn = mysql_init(<span class="hljs-literal">NULL</span>);
    <span class="hljs-keyword">if</span> (conn == <span class="hljs-literal">NULL</span>) {
        <span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">"mysql_init() failed\n"</span>);
        <span class="hljs-built_in">exit</span>(<span class="hljs-number">1</span>);
    }

    <span class="hljs-comment">// è¿æ¥æ•°æ®åº“</span>
    <span class="hljs-keyword">if</span> (mysql_real_connect(conn, server, user, password, database, <span class="hljs-number">0</span>, <span class="hljs-literal">NULL</span>, <span class="hljs-number">0</span>) == <span class="hljs-literal">NULL</span>) {
        <span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">"Connection failed: %s\n"</span>, mysql_error(conn));
        mysql_close(conn);
        <span class="hljs-built_in">exit</span>(<span class="hljs-number">1</span>);
    }

    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Connected to MySQL successfully!\n"</span>);

    <span class="hljs-comment">// åç»­æ“ä½œ...</span>

    mysql_close(conn);
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<blockquote>
<p>æ³¨æ„ï¼šè¯·å°† <code>your_user</code>ã€<code>your_password</code> å’Œ <code>test_db</code> æ›¿æ¢ä¸ºå®é™…å€¼ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-5">å››ã€å‘é€ SQL è¯·æ±‚</h3>
<h4 data-id="heading-6">1. æ‰§è¡ŒéæŸ¥è¯¢è¯­å¥ï¼ˆINSERT / UPDATE / DELETEï¼‰</h4>
<p>è¿™äº›è¯­å¥ä¸è¿”å›ç»“æœé›†ï¼Œåªéœ€æ£€æŸ¥æ˜¯å¦æ‰§è¡ŒæˆåŠŸï¼š</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-type">const</span> <span class="hljs-type">char</span> *sql = <span class="hljs-string">"INSERT INTO users (name, email) VALUES ('Alice', 'alice@example.com')"</span>;
<span class="hljs-keyword">if</span> (mysql_query(conn, sql)) {
    <span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">"Query error: %s\n"</span>, mysql_error(conn));
} <span class="hljs-keyword">else</span> {
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Insert successful. Affected rows: %llu\n"</span>, mysql_affected_rows(conn));
}
</code></pre>
<h4 data-id="heading-7">2. æ‰§è¡ŒæŸ¥è¯¢è¯­å¥ï¼ˆSELECTï¼‰</h4>
<p>æŸ¥è¯¢ä¼šè¿”å›ç»“æœé›†ï¼Œéœ€è¿›ä¸€æ­¥å¤„ç†ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">const char *<span class="hljs-attr">query</span> = <span class="hljs-string">"SELECT id, name, email FROM users"</span><span class="hljs-comment">;</span>
if (mysql_query(conn, query)) {
    fprintf(stderr, "SELECT error: %s\n", mysql_error(conn))<span class="hljs-comment">;</span>
    return 1<span class="hljs-comment">;</span>
}

MYSQL_RES *<span class="hljs-attr">result</span> = mysql_store_result(conn)<span class="hljs-comment">;</span>
if (<span class="hljs-attr">result</span> == NULL) {
    fprintf(stderr, "Store result error: %s\n", mysql_error(conn))<span class="hljs-comment">;</span>
    return 1<span class="hljs-comment">;</span>
}

// è·å–å­—æ®µæ•°é‡
int <span class="hljs-attr">num_fields</span> = mysql_num_fields(result)<span class="hljs-comment">;</span>

// éå†æ¯ä¸€è¡Œ
MYSQL_ROW row<span class="hljs-comment">;</span>
while ((<span class="hljs-attr">row</span> = mysql_fetch_row(result))) {
    for (int <span class="hljs-attr">i</span> = <span class="hljs-number">0</span><span class="hljs-comment">; i &lt; num_fields; i++) {</span>
        printf("%s\t", row<span class="hljs-section">[i]</span> ? row<span class="hljs-section">[i]</span> : "NULL")<span class="hljs-comment">;</span>
    }
    printf("\n")<span class="hljs-comment">;</span>
}

// é‡Šæ”¾ç»“æœé›†
mysql_free_result(result)<span class="hljs-comment">;</span>
</code></pre>
<blockquote>
<p>ä½¿ç”¨ <code>mysql_store_result()</code> ä¼šä¸€æ¬¡æ€§å°†å…¨éƒ¨ç»“æœåŠ è½½åˆ°å†…å­˜ï¼Œé€‚ç”¨äºæ•°æ®é‡è¾ƒå°çš„åœºæ™¯ï¼›è‹¥å¤„ç†å¤§é‡æ•°æ®ï¼Œå¯è€ƒè™‘ <code>mysql_use_result()</code> æµå¼è¯»å–ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-8">äº”ã€é”™è¯¯å¤„ç†å»ºè®®</h3>
<ul>
<li>å§‹ç»ˆæ£€æŸ¥ <code>mysql_query()</code> çš„è¿”å›å€¼ã€‚</li>
<li>ä½¿ç”¨ <code>mysql_error(conn)</code> è·å–è¯¦ç»†é”™è¯¯ä¿¡æ¯ã€‚</li>
<li>åœ¨ç¨‹åºé€€å‡ºå‰åŠ¡å¿…è°ƒç”¨ <code>mysql_close()</code> é‡Šæ”¾è¿æ¥èµ„æºã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-9">å…­ã€ç¼–è¯‘ä¸è¿è¡Œç¤ºä¾‹</h3>
<p>å‡è®¾æºæ–‡ä»¶ä¸º <code>mysql_demo.c</code>ï¼Œç¼–è¯‘å‘½ä»¤å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-css" lang="css">gcc -o mysql_demo mysql_demo<span class="hljs-selector-class">.c</span> $(mysql_config <span class="hljs-attr">--cflags</span> <span class="hljs-attr">--libs</span>)
</code></pre>
<blockquote>
<p><code>mysql_config</code> æ˜¯ MySQL æä¾›çš„å·¥å…·ï¼Œå¯è‡ªåŠ¨è¾“å‡ºæ­£ç¡®çš„ç¼–è¯‘å’Œé“¾æ¥å‚æ•°ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-10">ä¸ƒã€å°ç»“</h3>
<p>é€šè¿‡ MySQL çš„ C APIï¼ŒC/C++ ç¨‹åºå¯ä»¥é«˜æ•ˆåœ°ä¸æ•°æ®åº“äº¤äº’ã€‚è™½ç„¶ç›¸æ¯”é«˜çº§è¯­è¨€ï¼ˆå¦‚ Pythonã€Javaï¼‰ç•¥æ˜¾ç¹çï¼Œä½†åœ¨å¯¹æ€§èƒ½ã€èµ„æºæ§åˆ¶æœ‰ä¸¥æ ¼è¦æ±‚çš„åœºæ™¯ä¸‹ï¼ŒC/C++ ä»æ˜¯ä¸å¯æ›¿ä»£çš„é€‰æ‹©ã€‚</p>
<p>æŒæ¡è¿æ¥ã€å‘é€è¯·æ±‚ã€å¤„ç†ç»“æœè¿™ä¸‰ä¸ªæ ¸å¿ƒç¯èŠ‚ï¼Œå³å¯æ„å»ºå‡ºç¨³å®šå¯é çš„æ•°æ®åº“å®¢æˆ·ç«¯ç¨‹åºã€‚åç»­è¿˜å¯æ·±å…¥å­¦ä¹ é¢„å¤„ç†è¯­å¥ï¼ˆ<code>mysql_stmt_*</code> ç³»åˆ—å‡½æ•°ï¼‰ä»¥æå‡å®‰å…¨æ€§å’Œæ•ˆç‡ï¼Œé˜²æ­¢ SQL æ³¨å…¥ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[SQLæ€§èƒ½ä¼˜åŒ–ä¸‰å¤§æ ¸å¿ƒåŸåˆ™ï¼šç²¾ç®€ã€é©±åŠ¨ã€é›†åˆ]]></title>    <link>https://juejin.cn/post/7605173538417737738</link>    <guid>https://juejin.cn/post/7605173538417737738</guid>    <pubDate>2026-02-11T08:39:10.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605173538417737738" data-draft-id="7605136148592885787" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="SQLæ€§èƒ½ä¼˜åŒ–ä¸‰å¤§æ ¸å¿ƒåŸåˆ™ï¼šç²¾ç®€ã€é©±åŠ¨ã€é›†åˆ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-02-11T08:39:10.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§å°šæ¥ä¹Ÿ"/> <meta itemprop="url" content="https://juejin.cn/user/1681597639955488"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            SQLæ€§èƒ½ä¼˜åŒ–ä¸‰å¤§æ ¸å¿ƒåŸåˆ™ï¼šç²¾ç®€ã€é©±åŠ¨ã€é›†åˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1681597639955488/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§å°šæ¥ä¹Ÿ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-11T08:39:10.000Z" title="Wed Feb 11 2026 08:39:10 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨æ•°æ®åº“å¼€å‘ä¸è¿ç»´å®è·µä¸­ï¼ŒSQL æ€§èƒ½é—®é¢˜å¾€å¾€æ˜¯ç³»ç»Ÿç“¶é¢ˆçš„â€œç½ªé­ç¥¸é¦–â€ã€‚é¢å¯¹æ…¢æŸ¥è¯¢ã€é«˜ CPUã€é”ç­‰å¾…ç­‰ç°è±¡ï¼Œè®¸å¤šå¼€å‘è€…ä¹ æƒ¯äºç›²ç›®æ·»åŠ ç´¢å¼•æˆ–è°ƒæ•´é…ç½®ï¼Œå´å¿½ç•¥äº† SQL è¯­å¥æœ¬èº«çš„ç»“æ„ä¸æ‰§è¡Œé€»è¾‘ã€‚äº‹å®ä¸Šï¼Œ<strong>é«˜æ•ˆçš„ SQL ä¼˜åŒ–å¹¶éä¾èµ–å¥‡æŠ€æ·«å·§ï¼Œè€Œæ˜¯å›å½’æœ¬è´¨â€”â€”éµå¾ªä¸‰æ¡æ ¸å¿ƒåŸåˆ™ï¼šç²¾ç®€ä¹‹é“ã€é©±åŠ¨ä¸ºç‹ã€é›†åˆä¸ºæœ¬</strong>ã€‚</p>
<p>è¿™â€œä¸‰æ¿æ–§â€çœ‹ä¼¼æœ´ç´ ï¼Œå´æ˜¯ç»éªŒæ²‰æ·€åçš„é«˜æ•ˆæ–¹æ³•è®ºã€‚æŒæ¡å®ƒä»¬ï¼Œå¯è®©ä½ åœ¨çº·ç¹å¤æ‚çš„ SQL è°ƒä¼˜ä¸­è¿…é€ŸæŠ“ä½å…³é”®ï¼Œäº‹åŠåŠŸå€ã€‚</p>
<hr/>
<h3 data-id="heading-0">ä¸€ã€ç²¾ç®€ä¹‹é“ï¼šåªå–æ‰€éœ€ï¼Œæœç»å†—ä½™</h3>
<blockquote>
<p><strong>â€œå°‘å³æ˜¯å¤šâ€åœ¨ SQL ä¼˜åŒ–ä¸­å°¤ä¸ºé€‚ç”¨ã€‚</strong></p>
</blockquote>
<h4 data-id="heading-1">å¸¸è§é—®é¢˜ï¼š</h4>
<ul>
<li><code>SELECT *</code> æ‹‰å–å…¨éƒ¨å­—æ®µï¼Œå³ä½¿ä¸šåŠ¡åªéœ€å…¶ä¸­ä¸¤ä¸‰ä¸ªï¼›</li>
<li>åœ¨ <code>WHERE</code> ä¸­ä½¿ç”¨å¤æ‚å‡½æ•°æˆ–è¡¨è¾¾å¼ï¼Œå¯¼è‡´ç´¢å¼•å¤±æ•ˆï¼›</li>
<li>å­æŸ¥è¯¢åµŒå¥—è¿‡æ·±ï¼Œé€»è¾‘é‡å¤è®¡ç®—ã€‚</li>
</ul>
<h4 data-id="heading-2">ä¼˜åŒ–å»ºè®®ï¼š</h4>
<ol>
<li>
<p><strong>æ˜ç¡®å­—æ®µåˆ—è¡¨</strong><br/>
é¿å… <code>SELECT *</code>ï¼Œä»…é€‰æ‹©çœŸæ­£éœ€è¦çš„åˆ—ã€‚è¿™ä¸ä»…èƒ½å‡å°‘ç½‘ç»œä¼ è¾“é‡ï¼Œè¿˜èƒ½æå‡ç¼“å­˜å‘½ä¸­ç‡ï¼Œç”šè‡³è§¦å‘è¦†ç›–ç´¢å¼•ï¼ˆCovering Indexï¼‰ã€‚</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- âŒ ä¸æ¨è</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> orders <span class="hljs-keyword">WHERE</span> user_id <span class="hljs-operator">=</span> <span class="hljs-number">1001</span>;

<span class="hljs-comment">-- âœ… æ¨è</span>
<span class="hljs-keyword">SELECT</span> order_id, create_time, amount <span class="hljs-keyword">FROM</span> orders <span class="hljs-keyword">WHERE</span> user_id <span class="hljs-operator">=</span> <span class="hljs-number">1001</span>;
</code></pre>
</li>
<li>
<p><strong>ç®€åŒ–è¿‡æ»¤æ¡ä»¶</strong><br/>
å°½é‡å°†è®¡ç®—ç§»å‡º <code>WHERE</code> å­å¥ã€‚ä¾‹å¦‚ï¼Œä¸è¦å†™ <code>WHERE YEAR(create_time) = 2025</code>ï¼Œè€Œåº”å†™æˆèŒƒå›´æŸ¥è¯¢ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- âŒ ç´¢å¼•å¤±æ•ˆ</span>
<span class="hljs-keyword">WHERE</span> <span class="hljs-keyword">YEAR</span>(create_time) <span class="hljs-operator">=</span> <span class="hljs-number">2025</span>

<span class="hljs-comment">-- âœ… å¯ç”¨ç´¢å¼•</span>
<span class="hljs-keyword">WHERE</span> create_time <span class="hljs-operator">&gt;=</span> <span class="hljs-string">'2025-01-01'</span> <span class="hljs-keyword">AND</span> create_time <span class="hljs-operator">&lt;</span> <span class="hljs-string">'2026-01-01'</span>
</code></pre>
</li>
<li>
<p><strong>é¿å…æ— è°“çš„ JOIN æˆ–å­æŸ¥è¯¢</strong><br/>
æ¯å¤šä¸€å¼ è¡¨ï¼Œæ‰§è¡Œè®¡åˆ’å¤æ‚åº¦æŒ‡æ•°çº§ä¸Šå‡ã€‚ç¡®è®¤æ¯ä¸ªå…³è”æ˜¯å¦å¿…è¦ã€‚</p>
</li>
</ol>
<blockquote>
<p><strong>ç²¾ç®€çš„æœ¬è´¨æ˜¯â€œæœ€å°åŒ–æ•°æ®å¤„ç†é‡â€â€”â€”ä»æºå¤´å‡å°‘ I/Oã€CPU å’Œå†…å­˜å¼€é”€ã€‚</strong></p>
</blockquote>
<hr/>
<h3 data-id="heading-3">äºŒã€é©±åŠ¨ä¸ºç‹ï¼šè®©å°ç»“æœé›†é©±åŠ¨å¤§è¡¨</h3>
<blockquote>
<p><strong>â€œè°å…ˆæŸ¥ï¼Œè°ä¸»å¯¼â€â€”â€”é©±åŠ¨è¡¨çš„é€‰æ‹©å†³å®šæ‰§è¡Œæ•ˆç‡ã€‚</strong></p>
</blockquote>
<p>åœ¨å¤šè¡¨å…³è”ï¼ˆJOINï¼‰ä¸­ï¼Œæ•°æ®åº“ä¼˜åŒ–å™¨ä¼šå†³å®šå“ªå¼ è¡¨ä½œä¸ºâ€œé©±åŠ¨è¡¨â€ï¼ˆå³å¤–å±‚å¾ªç¯ï¼‰ï¼Œå…¶ä½™ä¸ºâ€œè¢«é©±åŠ¨è¡¨â€ï¼ˆå†…å±‚ï¼‰ã€‚ç†æƒ³æƒ…å†µä¸‹ï¼Œ<strong>åº”è®©ç»“æœé›†æœ€å°çš„è¡¨ä½œä¸ºé©±åŠ¨è¡¨</strong>ï¼Œä»è€Œå‡å°‘å¯¹å¤§è¡¨çš„é‡å¤è®¿é—®æ¬¡æ•°ã€‚</p>
<h4 data-id="heading-4">ç¤ºä¾‹åœºæ™¯ï¼š</h4>
<p>å‡è®¾æœ‰ä¸¤å¼ è¡¨ï¼š</p>
<ul>
<li><code>users</code>ï¼ˆ100 ä¸‡è¡Œï¼‰</li>
<li><code>orders</code>ï¼ˆ1000 ä¸‡è¡Œï¼‰</li>
</ul>
<p>éœ€æ±‚ï¼šæŸ¥è¯¢æœ€è¿‘ 7 å¤©ä¸‹å•çš„ç”¨æˆ·ä¿¡æ¯ã€‚</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- å†™æ³• Aï¼šä»¥ users ä¸ºé©±åŠ¨è¡¨ï¼ˆä½æ•ˆï¼‰</span>
<span class="hljs-keyword">SELECT</span> u.name, o.amount
<span class="hljs-keyword">FROM</span> users u
<span class="hljs-keyword">JOIN</span> orders o <span class="hljs-keyword">ON</span> u.id <span class="hljs-operator">=</span> o.user_id
<span class="hljs-keyword">WHERE</span> o.create_time <span class="hljs-operator">&gt;=</span> NOW() <span class="hljs-operator">-</span> <span class="hljs-type">INTERVAL</span> <span class="hljs-number">7</span> <span class="hljs-keyword">DAY</span>;

<span class="hljs-comment">-- å†™æ³• Bï¼šä»¥ orders ä¸ºé©±åŠ¨è¡¨ï¼ˆé«˜æ•ˆï¼‰</span>
<span class="hljs-keyword">SELECT</span> u.name, o.amount
<span class="hljs-keyword">FROM</span> orders o
<span class="hljs-keyword">JOIN</span> users u <span class="hljs-keyword">ON</span> o.user_id <span class="hljs-operator">=</span> u.id
<span class="hljs-keyword">WHERE</span> o.create_time <span class="hljs-operator">&gt;=</span> NOW() <span class="hljs-operator">-</span> <span class="hljs-type">INTERVAL</span> <span class="hljs-number">7</span> <span class="hljs-keyword">DAY</span>;
</code></pre>
<p>åœ¨å†™æ³• B ä¸­ï¼Œ<code>orders</code> è¡¨å…ˆé€šè¿‡æ—¶é—´æ¡ä»¶è¿‡æ»¤å‡ºå°‘é‡è®°å½•ï¼ˆå¦‚ 1 ä¸‡æ¡ï¼‰ï¼Œå†å›æŸ¥ <code>users</code> è¡¨ï¼Œæ•ˆç‡è¿œé«˜äºéå†å…¨éƒ¨ 100 ä¸‡ç”¨æˆ·å»åŒ¹é…è®¢å•ã€‚</p>
<h4 data-id="heading-5">ä¼˜åŒ–æŠ€å·§ï¼š</h4>
<ul>
<li>åˆ©ç”¨ <code>EXPLAIN</code> æŸ¥çœ‹æ‰§è¡Œè®¡åˆ’ï¼Œç¡®è®¤é©±åŠ¨è¡¨æ˜¯å¦åˆç†ï¼›</li>
<li>åœ¨ <code>WHERE</code> ä¸­å°½æ—©è¿‡æ»¤å¤§è¡¨æ•°æ®ï¼›</li>
<li>å¿…è¦æ—¶ä½¿ç”¨ <code>STRAIGHT_JOIN</code>ï¼ˆMySQLï¼‰å¼ºåˆ¶æŒ‡å®šé©±åŠ¨é¡ºåºï¼ˆæ…ç”¨ï¼‰ã€‚</li>
</ul>
<blockquote>
<p><strong>é©±åŠ¨ä¸ºç‹çš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼šç”¨æœ€å°ä»£ä»·å¯åŠ¨æŸ¥è¯¢ï¼Œé€æ­¥æ”¾å¤§ç»“æœï¼Œè€Œéåå‘æš´åŠ›æ‰«æã€‚</strong></p>
</blockquote>
<hr/>
<h3 data-id="heading-6">ä¸‰ã€é›†åˆä¸ºæœ¬ï¼šç”¨é›†åˆæ€ç»´æ›¿ä»£è¿‡ç¨‹å¼æ“ä½œ</h3>
<blockquote>
<p><strong>SQL æ˜¯å£°æ˜å¼è¯­è¨€ï¼Œä¸æ˜¯è¿‡ç¨‹å¼è¯­è¨€â€”â€”è¦â€œå‘Šè¯‰æ•°æ®åº“åšä»€ä¹ˆâ€ï¼Œè€Œä¸æ˜¯â€œä¸€æ­¥æ­¥æ€ä¹ˆåšâ€ã€‚</strong></p>
</blockquote>
<p>è®¸å¤šå¼€å‘è€…å—ç¼–ç¨‹æ€ç»´å½±å“ï¼Œä¹ æƒ¯ç”¨å¾ªç¯ã€é€è¡Œå¤„ç†çš„æ–¹å¼å†™ SQLï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li>åœ¨åº”ç”¨å±‚å¾ªç¯æ‰§è¡Œå•æ¡ UPDATEï¼›</li>
<li>ä½¿ç”¨æ¸¸æ ‡ï¼ˆCursorï¼‰é€è¡Œå¤„ç†ï¼›</li>
<li>å¤šæ¬¡å°æŸ¥è¯¢æ‹¼æ¥ç»“æœã€‚</li>
</ul>
<p>è¿™äº›åšæ³•ä¸¥é‡è¿èƒŒäº†æ•°æ®åº“çš„â€œé›†åˆå¤„ç†â€ä¼˜åŠ¿ã€‚</p>
<h4 data-id="heading-7">æ­£ç¡®å§¿åŠ¿ï¼šæ‰¹é‡ã€å‘é‡åŒ–ã€ä¸€æ¬¡æå®š</h4>
<p>âœ… <strong>æ‰¹é‡æ›´æ–°ä»£æ›¿å¾ªç¯æ›´æ–°</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- âŒ åº”ç”¨å±‚å¾ªç¯ 1000 æ¬¡</span>
<span class="hljs-keyword">UPDATE</span> products <span class="hljs-keyword">SET</span> price <span class="hljs-operator">=</span> ? <span class="hljs-keyword">WHERE</span> id <span class="hljs-operator">=</span> ?;

<span class="hljs-comment">-- âœ… ä¸€æ¬¡æ‰¹é‡æ›´æ–°ï¼ˆä½¿ç”¨ CASE æˆ–ä¸´æ—¶è¡¨ï¼‰</span>
<span class="hljs-keyword">UPDATE</span> products
<span class="hljs-keyword">SET</span> price <span class="hljs-operator">=</span> <span class="hljs-keyword">CASE</span> id
    <span class="hljs-keyword">WHEN</span> <span class="hljs-number">1</span> <span class="hljs-keyword">THEN</span> <span class="hljs-number">100</span>
    <span class="hljs-keyword">WHEN</span> <span class="hljs-number">2</span> <span class="hljs-keyword">THEN</span> <span class="hljs-number">200</span>
    ...
<span class="hljs-keyword">END</span>
<span class="hljs-keyword">WHERE</span> id <span class="hljs-keyword">IN</span> (<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, ...);
</code></pre>
<p>âœ… <strong>ç”¨ JOIN æ›¿ä»£å­æŸ¥è¯¢æˆ–å¤šæ¬¡æŸ¥è¯¢</strong></p>
<pre><code class="hljs language-vbnet" lang="vbnet">-- âŒ å¤šæ¬¡æŸ¥è¯¢æˆ–ç›¸å…³å­æŸ¥è¯¢
<span class="hljs-keyword">SELECT</span> name, (<span class="hljs-keyword">SELECT</span> COUNT(*) <span class="hljs-keyword">FROM</span> orders <span class="hljs-keyword">WHERE</span> user_id = u.id) <span class="hljs-keyword">AS</span> order_cnt
<span class="hljs-keyword">FROM</span> users u;

-- âœ… ä¸€æ¬¡ <span class="hljs-keyword">JOIN</span> + <span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span>
<span class="hljs-keyword">SELECT</span> u.name, COUNT(o.id) <span class="hljs-keyword">AS</span> order_cnt
<span class="hljs-keyword">FROM</span> users u
LEFT <span class="hljs-keyword">JOIN</span> orders o <span class="hljs-keyword">ON</span> u.id = o.user_id
<span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> u.id, u.name;
</code></pre>
<p>âœ… <strong>å–„ç”¨çª—å£å‡½æ•°ã€CTE ç­‰ç°ä»£ SQL ç‰¹æ€§</strong><br/>
é¿å…è‡ªè¿æ¥æˆ–ä¸´æ—¶è¡¨ï¼Œç”¨æ›´ç®€æ´çš„é›†åˆé€»è¾‘è¡¨è¾¾å¤æ‚éœ€æ±‚ã€‚</p>
<blockquote>
<p><strong>é›†åˆä¸ºæœ¬ï¼Œå°±æ˜¯å‘æŒ¥æ•°æ®åº“å¼•æ“çš„å¹¶è¡Œä¸æ‰¹å¤„ç†èƒ½åŠ›ï¼ŒæŠŠâ€œä¸€è¡Œä¸€è¡Œåšâ€å˜æˆâ€œä¸€æ‰¹ä¸€èµ·åšâ€ã€‚</strong></p>
</blockquote>
<hr/>
<h3 data-id="heading-8">ç»“è¯­ï¼šå›å½’æœ¬è´¨ï¼Œæ–¹å¾—é«˜æ•ˆ</h3>
<p>SQL ä¼˜åŒ–æ²¡æœ‰é“¶å¼¹ï¼Œä½†æœ‰ç« å¯å¾ªã€‚â€œç²¾ç®€ä¹‹é“ã€é©±åŠ¨ä¸ºç‹ã€é›†åˆä¸ºæœ¬â€è¿™ä¸‰å¤§åŸåˆ™ï¼Œåˆ†åˆ«å¯¹åº”ï¼š</p>
<ul>
<li><strong>æ•°æ®é‡æœ€å°åŒ–</strong>ï¼ˆç²¾ç®€ï¼‰ï¼Œ</li>
<li><strong>æ‰§è¡Œè·¯å¾„æœ€ä¼˜åŒ–</strong>ï¼ˆé©±åŠ¨ï¼‰ï¼Œ</li>
<li><strong>å¤„ç†æ–¹å¼é›†çº¦åŒ–</strong>ï¼ˆé›†åˆï¼‰ã€‚</li>
</ul>
<p>å½“ä½ ä¸‹æ¬¡é¢å¯¹ä¸€æ¡æ…¢ SQL æ—¶ï¼Œä¸å¦¨è‡ªé—®ï¼š</p>
<ol>
<li>æˆ‘æ˜¯å¦åªå–äº†å¿…è¦çš„æ•°æ®ï¼Ÿ</li>
<li>é©±åŠ¨è¡¨æ˜¯å¦æ˜¯æœ€å°ç»“æœé›†ï¼Ÿ</li>
<li>æ˜¯å¦ç”¨é›†åˆæ“ä½œæ›¿ä»£äº†è¿‡ç¨‹å¼é€»è¾‘ï¼Ÿ</li>
</ol>
<p>ç­”æ¡ˆè‹¥çš†ä¸ºâ€œæ˜¯â€ï¼Œæ€§èƒ½è‡ªç„¶æ°´åˆ°æ¸ æˆã€‚</p>
<blockquote>
<p><strong>å¥½çš„ SQLï¼Œä¸åœ¨äºå¤šèªæ˜ï¼Œè€Œåœ¨äºå¤šå…‹åˆ¶ã€‚</strong></p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è‡ªç­¾å SSL è¯ä¹¦ç”Ÿæˆä¸Chormeè¯ä¹¦ä¿¡ä»»é…ç½®æŒ‡å—]]></title>    <link>https://juejin.cn/post/7605213691910570010</link>    <guid>https://juejin.cn/post/7605213691910570010</guid>    <pubDate>2026-02-11T08:47:29.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605213691910570010" data-draft-id="7605401415855521842" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è‡ªç­¾å SSL è¯ä¹¦ç”Ÿæˆä¸Chormeè¯ä¹¦ä¿¡ä»»é…ç½®æŒ‡å—"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-02-11T08:47:29.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Oneslide"/> <meta itemprop="url" content="https://juejin.cn/user/4424904652631624"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è‡ªç­¾å SSL è¯ä¹¦ç”Ÿæˆä¸Chormeè¯ä¹¦ä¿¡ä»»é…ç½®æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4424904652631624/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Oneslide
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-11T08:47:29.000Z" title="Wed Feb 11 2026 08:47:29 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨å¼€å‘å’Œæµ‹è¯•ç¯å¢ƒä¸­ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦ä¸ºå†…éƒ¨ç½‘ç«™ç”Ÿæˆè‡ªç­¾å SSL è¯ä¹¦ã€‚æœ¬æ–‡å°†è¯¦ç»†ä»‹ç»å¦‚ä½•ç”ŸæˆåŒ…å« IP åœ°å€å’ŒåŸŸåçš„ SSL è¯ä¹¦ï¼Œå¹¶é…ç½®æµè§ˆå™¨ä¿¡ä»»è¯¥è¯ä¹¦ã€‚</p>
<h2 data-id="heading-0">è„šæœ¬è§£æ</h2>
<p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªå®Œæ•´çš„è‡ªç­¾å SSL è¯ä¹¦ç”Ÿæˆè„šæœ¬ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>

<span class="hljs-comment"># è¿›å…¥è¯ä¹¦ç›®å½•</span>
<span class="hljs-built_in">cd</span> /root/certs

<span class="hljs-comment"># å®šä¹‰ IP åœ°å€ï¼ˆæ›¿æ¢ä¸ºæ‚¨çš„å®é™… IPï¼‰</span>
IP_ADDRESS=<span class="hljs-string">"36.xx.xx.xx"</span>

<span class="hljs-comment"># åˆ›å»ºè¯ä¹¦é…ç½®æ–‡ä»¶ï¼ŒåŒ…å« IP åœ°å€</span>
<span class="hljs-built_in">cat</span> &gt; server_ext.cnf &lt;&lt;<span class="hljs-string">EOF
[req]
distinguished_name = req_distinguished_name
req_extensions = v3_req
prompt = no

[req_distinguished_name]
C = CN
ST = Beijing
L = Beijing
O = YourCompany
CN = www.sample.com

[v3_req]
basicConstraints = CA:FALSE
keyUsage = digitalSignature, keyEncipherment
extendedKeyUsage = serverAuth
subjectAltName = @alt_names

[alt_names]
DNS.1 = www.sample.com
DNS.2 = sample.com
IP.1 = ${IP_ADDRESS}
EOF</span>

<span class="hljs-comment"># é‡æ–°ç”Ÿæˆç§é’¥</span>
openssl genrsa -out server.key 2048

<span class="hljs-comment"># ç”Ÿæˆè¯ä¹¦ç­¾åè¯·æ±‚</span>
openssl req -new -key server.key -out server.csr -config server_ext.cnf

<span class="hljs-comment"># ç”Ÿæˆè¯ä¹¦ï¼ˆåŒ…å«æ‰©å±•ï¼‰</span>
openssl x509 -req -days 3650 -<span class="hljs-keyword">in</span> server.csr \
  -signkey server.key -out server.crt \
  -extensions v3_req -extfile server_ext.cnf

<span class="hljs-comment"># æ£€æŸ¥è¯ä¹¦æ‰©å±•</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"=== æ£€æŸ¥è¯ä¹¦æ‰©å±• ==="</span>
openssl x509 -<span class="hljs-keyword">in</span> server.crt -text -noout | grep -A 10 <span class="hljs-string">"X509v3 Subject Alternative Name"</span>

<span class="hljs-comment"># é‡å¯ Nginx</span>
<span class="hljs-comment"># systemctl restart nginx</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"è¯ä¹¦å·²é‡æ–°ç”Ÿæˆï¼ŒåŒ…å« IP åœ°å€: <span class="hljs-variable">${IP_ADDRESS}</span>"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"è¯·é‡æ–°å¯¼å…¥ server.crt åˆ° Chrome çš„å—ä¿¡ä»»æ ¹è¯ä¹¦é¢å‘æœºæ„"</span>
</code></pre>
<h3 data-id="heading-1">è„šæœ¬å…³é”®éƒ¨åˆ†è§£æ</h3>
<h4 data-id="heading-2">1. è¯ä¹¦é…ç½®æ–‡ä»¶ (server_ext.cnf)</h4>
<p>é…ç½®æ–‡ä»¶åŒ…å«ä»¥ä¸‹å‡ ä¸ªå…³é”®éƒ¨åˆ†ï¼š</p>
<ul>
<li>
<p><strong>[req] éƒ¨åˆ†</strong>: å®šä¹‰è¯ä¹¦è¯·æ±‚çš„åŸºæœ¬å‚æ•°</p>
<ul>
<li><code>distinguished_name</code>: æŒ‡å®š DNï¼ˆå¯åˆ†è¾¨åç§°ï¼‰é…ç½®èŠ‚</li>
<li><code>req_extensions</code>: æŒ‡å®šè¦ä½¿ç”¨çš„æ‰©å±•èŠ‚ï¼ˆv3_reqï¼‰</li>
<li><code>prompt = no</code>: ç¦ç”¨äº¤äº’å¼æç¤ºï¼Œä½¿ç”¨é¢„è®¾å€¼</li>
</ul>
</li>
<li>
<p><strong>[req_distinguished_name] éƒ¨åˆ†</strong>: å®šä¹‰è¯ä¹¦ä¸»é¢˜ä¿¡æ¯</p>
<ul>
<li><code>C</code>: å›½å®¶ï¼ˆCountryï¼‰</li>
<li><code>ST</code>: å·/çœï¼ˆState/Provinceï¼‰</li>
<li><code>L</code>: åŸå¸‚ï¼ˆLocalityï¼‰</li>
<li><code>O</code>: ç»„ç»‡ï¼ˆOrganizationï¼‰</li>
<li><code>CN</code>: é€šç”¨åç§°ï¼ˆCommon Nameï¼‰- ä¸»è¦åŸŸå</li>
</ul>
</li>
<li>
<p><strong>[v3_req] éƒ¨åˆ†</strong>: è¯ä¹¦æ‰©å±•é…ç½®</p>
<ul>
<li><code>basicConstraints = CA:FALSE</code>: è¡¨ç¤ºè¿™ä¸æ˜¯ CA è¯ä¹¦</li>
<li><code>keyUsage</code>: å¯†é’¥ç”¨æ³•ï¼Œè¿™é‡ŒæŒ‡å®šæ•°å­—ç­¾åå’Œå¯†é’¥åŠ å¯†</li>
<li><code>extendedKeyUsage</code>: æ‰©å±•å¯†é’¥ç”¨æ³•ï¼ŒæŒ‡å®šä¸ºæœåŠ¡å™¨èº«ä»½éªŒè¯</li>
<li><code>subjectAltName = @alt_names</code>: å¼•ç”¨ alt_names èŠ‚ä¸­çš„ SAN å€¼</li>
</ul>
</li>
<li>
<p><strong>[alt_names] éƒ¨åˆ†</strong>: SANï¼ˆä¸»é¢˜å¤‡ç”¨åç§°ï¼‰å®šä¹‰</p>
<ul>
<li><code>DNS.1</code>, <code>DNS.2</code>: DNS åç§°æ¡ç›®</li>
<li><code>IP.1</code>: IP åœ°å€æ¡ç›®ï¼Œå…è®¸é€šè¿‡ IP è®¿é—®</li>
</ul>
</li>
</ul>
<h4 data-id="heading-3">2. OpenSSL å‘½ä»¤è§£æ</h4>
<ol>
<li>
<p><strong>ç”Ÿæˆç§é’¥</strong>: <code>openssl genrsa -out server.key 2048</code></p>
<ul>
<li>ç”Ÿæˆ 2048 ä½çš„ RSA ç§é’¥</li>
</ul>
</li>
<li>
<p><strong>ç”Ÿæˆ CSR</strong>: <code>openssl req -new -key server.key -out server.csr -config server_ext.cnf</code></p>
<ul>
<li>ä½¿ç”¨ç§é’¥å’Œé…ç½®æ–‡ä»¶ç”Ÿæˆè¯ä¹¦ç­¾åè¯·æ±‚</li>
</ul>
</li>
<li>
<p><strong>ç”Ÿæˆè¯ä¹¦</strong>: <code>openssl x509 -req -days 3650 ...</code></p>
<ul>
<li>ä½¿ç”¨ CSR å’Œç§é’¥ç”Ÿæˆæœ‰æ•ˆæœŸä¸º 10 å¹´çš„è‡ªç­¾åè¯ä¹¦</li>
<li>åº”ç”¨ v3_req æ‰©å±•ä¸­çš„é…ç½®</li>
</ul>
</li>
</ol>
<h2 data-id="heading-4">è¯ä¹¦åŸºæœ¬ç»“æ„è§£æ</h2>
<h3 data-id="heading-5">è¯ä¹¦çš„å±‚æ¬¡ç»“æ„</h3>
<ol>
<li><strong>ç‰ˆæœ¬å·</strong>: X.509 v3ï¼ˆå½“å‰æ ‡å‡†ï¼‰</li>
<li><strong>åºåˆ—å·</strong>: è¯ä¹¦çš„å”¯ä¸€æ ‡è¯†ç¬¦</li>
<li><strong>ç­¾åç®—æ³•</strong>: ç”¨äºç­¾åè¯ä¹¦çš„ç®—æ³•ï¼ˆå¦‚ sha256WithRSAEncryptionï¼‰</li>
<li><strong>é¢å‘è€…</strong>: é¢å‘è¯ä¹¦çš„å®ä½“ï¼ˆè‡ªç­¾åæ—¶ä¸ä¸»é¢˜ç›¸åŒï¼‰</li>
<li><strong>æœ‰æ•ˆæœŸ</strong>: è¯ä¹¦çš„æœ‰æ•ˆèµ·æ­¢æ—¶é—´</li>
<li><strong>ä¸»é¢˜</strong>: è¯ä¹¦æŒæœ‰è€…çš„ä¿¡æ¯</li>
<li><strong>å…¬é’¥ä¿¡æ¯</strong>: æŒæœ‰è€…çš„å…¬é’¥å’Œç®—æ³•</li>
<li><strong>æ‰©å±•åŸŸ</strong>: åŒ…å«å„ç§æ‰©å±•ä¿¡æ¯ï¼ˆæœ€é‡è¦çš„éƒ¨åˆ†ï¼‰</li>
</ol>
<h3 data-id="heading-6">å…³é”®æ‰©å±•å­—æ®µ</h3>
<h4 data-id="heading-7">1. åŸºæœ¬çº¦æŸ (basicConstraints)</h4>
<ul>
<li><code>CA:FALSE</code> è¡¨ç¤ºè¿™æ˜¯ç»ˆç«¯å®ä½“è¯ä¹¦ï¼Œä¸èƒ½ç”¨ä½œ CA è¯ä¹¦</li>
<li><code>CA:TRUE</code> è¡¨ç¤ºè¿™æ˜¯ CA è¯ä¹¦ï¼Œå¯ä»¥ç­¾å‘å…¶ä»–è¯ä¹¦</li>
</ul>
<h4 data-id="heading-8">2. å¯†é’¥ç”¨æ³• (keyUsage)</h4>
<p>å®šä¹‰è¯ä¹¦ä¸­å…¬é’¥çš„ç”¨é€”ï¼š</p>
<ul>
<li><strong>digitalSignature</strong>: å…è®¸è¿›è¡Œæ•°å­—ç­¾åæ“ä½œï¼ˆTLS æ¡æ‰‹å¿…éœ€ï¼‰</li>
<li><strong>keyEncipherment</strong>: å…è®¸å¯†é’¥äº¤æ¢æ—¶åŠ å¯†å¯†é’¥</li>
</ul>
<h4 data-id="heading-9">3. æ‰©å±•å¯†é’¥ç”¨æ³• (extendedKeyUsage)</h4>
<p>è¿›ä¸€æ­¥é™åˆ¶è¯ä¹¦ç”¨é€”ï¼š</p>
<ul>
<li><strong>serverAuth</strong>: TLS Web æœåŠ¡å™¨èº«ä»½éªŒè¯</li>
<li><strong>clientAuth</strong>: TLS Web å®¢æˆ·ç«¯èº«ä»½éªŒè¯</li>
<li><strong>codeSigning</strong>: ä»£ç ç­¾å</li>
</ul>
<h4 data-id="heading-10">4. ä¸»é¢˜å¤‡ç”¨åç§° (subjectAltName)</h4>
<p>ç°ä»£ TLS å®ç°ä¸­æœ€é‡è¦çš„æ‰©å±•ä¹‹ä¸€ï¼š</p>
<ul>
<li><strong>DNS åç§°</strong>: <code>DNS:example.com</code></li>
<li><strong>IP åœ°å€</strong>: <code>IP:192.168.1.1</code></li>
<li><strong>ç”µå­é‚®ä»¶</strong>: <code>email:user@example.com</code></li>
</ul>
<h3 data-id="heading-11">ä¸ºä»€ä¹ˆéœ€è¦ SANï¼Ÿ</h3>
<ol>
<li><strong>å…¼å®¹æ€§</strong>: ç°ä»£æµè§ˆå™¨ï¼ˆChrome 58+ï¼‰å·²ä¸æ£€æŸ¥ CN å­—æ®µï¼Œåªæ£€æŸ¥ SAN</li>
<li><strong>çµæ´»æ€§</strong>: ä¸€ä¸ªè¯ä¹¦å¯ä»¥ä¿æŠ¤å¤šä¸ªåŸŸåå’Œ IP åœ°å€</li>
<li><strong>å®‰å…¨æ€§</strong>: é˜²æ­¢è¯ä¹¦è¯¯ç”¨ï¼Œæ˜ç¡®æŒ‡å®šæœ‰æ•ˆåç§°</li>
</ol>
<h2 data-id="heading-12">æµè§ˆå™¨å¯¼å…¥è¯ä¹¦æŒ‡å—</h2>
<p>æ‰“å¼€Chromeæµè§ˆå™¨:</p>
<ol>
<li>æ‰“å¼€è®¾ç½®-&gt; éšç§å’Œå®‰å…¨</li>
<li>é€‰æ‹©å®‰å…¨-&gt; ç®¡ç†è¯ä¹¦</li>
</ol>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/942aa73f595340189fc00652b69797aa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT25lc2xpZGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771404513&amp;x-signature=S0zkFCl9CnsBgib%2FnbcK1l2tPQY%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b9dcaf0b45b540508b2e26b7193ef7d3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT25lc2xpZGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771404513&amp;x-signature=H3CBehlyNwh6zkGmTq6D%2FIxzKgE%3D" alt="image.png" loading="lazy"/></p>
<ol start="3">
<li>é€‰æ‹©"ç®¡ç†Windowså¯¼å…¥çš„è¯ä¹¦",ç‚¹å‡»"å—ä¿¡ä»»çš„è¯ä¹¦é¢å‘æœºæ„",å¯¼å…¥<code>server.crt</code>æ–‡ä»¶</li>
</ol>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ac6d29eeb3ad41a699b2ffcc85e26a14~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT25lc2xpZGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771404513&amp;x-signature=8tV5OANizZzjut9BDyWQwWasBbM%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/43b2690225584a1f97ebbaa71cdfe98d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT25lc2xpZGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771404513&amp;x-signature=frrFSNZqrGOoLZkAJRnZHUMOfEM%3D" alt="image.png" loading="lazy"/></p>
<ol start="4">
<li>é‡å¯Chrome</li>
</ol>
<h3 data-id="heading-13">éªŒè¯å¯¼å…¥ç»“æœ</h3>
<ol>
<li>é‡å¯ Chromeï¼Œè®¿é—® <code>chrome://settings/certificates</code></li>
<li>é€‰æ‹©<strong>å—ä¿¡ä»»çš„æ ¹è¯ä¹¦é¢å‘æœºæ„</strong>é€‰é¡¹å¡</li>
<li>æŸ¥æ‰¾é¢å‘è€…ä¸º <code>www.sample.com</code> çš„è¯ä¹¦</li>
</ol>
<h3 data-id="heading-14">é‡å¯å¹¶æµ‹è¯•</h3>
<ol>
<li>å®Œå…¨å…³é—­æ‰€æœ‰ Chrome çª—å£</li>
<li>é‡æ–°æ‰“å¼€ Chrome</li>
<li>è®¿é—®ä»¥ä¸‹åœ°å€æµ‹è¯•ï¼š
<ul>
<li><code>https://www.sample.com:8443</code></li>
<li><code>https://xx.xx.xx.xx:8443</code></li>
</ul>
</li>
</ol>
<p>httpsè¯ä¹¦å°†ä¸æŠ¥é”™:</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/47735afd81b74e46ab98c44cd43cfc12~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT25lc2xpZGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771404513&amp;x-signature=gY9JBk5tnVK4fr2%2FJS66IjE45Is%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-15">Nginx é…ç½®ç¤ºä¾‹</h2>
<pre><code class="hljs language-nginx" lang="nginx">server {
    listen       8443 ssl;
    listen       [::]:8443 ssl;
    server_name  www.sample.com 36.xx.xx.xx;
    
    root         /usr/share/nginx/html;
    
    # SSL è¯ä¹¦é…ç½®
    ssl_certificate /root/certs/server.crt;
    ssl_certificate_key /root/certs/server.key;
    
    # SSL åè®®é…ç½®
    ssl_protocols TLSv1.2 TLSv1.3;

    
    # é»˜è®¤æ–‡ä»¶
    index index.html index.htm;
    
    location / {
        try_files $uri $uri/ =404;
    }
}
</code></pre>
<h2 data-id="heading-16">å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ</h2>
<h3 data-id="heading-17">1. è¯ä¹¦ä»ç„¶æ˜¾ç¤ºä¸å®‰å…¨</h3>
<p><strong>å¯èƒ½åŸå› </strong>:</p>
<ul>
<li>è¯ä¹¦æœªæ­£ç¡®å¯¼å…¥åˆ°å—ä¿¡ä»»çš„æ ¹è¯ä¹¦é¢å‘æœºæ„</li>
<li>è¯ä¹¦ç¼ºå°‘å¿…è¦çš„æ‰©å±•</li>
<li>æµè§ˆå™¨ç¼“å­˜äº†æ—§çš„è¯ä¹¦ä¿¡æ¯,æœªé‡å¯Chrome</li>
</ul>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>:</p>
<ul>
<li>é‡æ–°å¯¼å…¥è¯ä¹¦å¹¶ç¡®ä¿é€‰æ‹©æ­£ç¡®çš„å­˜å‚¨ä½ç½®</li>
<li>æ£€æŸ¥è¯ä¹¦æ˜¯å¦åŒ…å« <code>digitalSignature</code> å¯†é’¥ç”¨æ³•</li>
<li>æ¸…é™¤æµè§ˆå™¨ SSL çŠ¶æ€ç¼“å­˜</li>
</ul>
<p>é€šè¿‡éµå¾ªæœ¬æŒ‡å—ï¼Œæ‚¨å¯ä»¥åˆ›å»ºä¸€ä¸ªæ—¢æ”¯æŒåŸŸååˆæ”¯æŒ IP åœ°å€è®¿é—®çš„ HTTPS ç¯å¢ƒï¼Œæ¶ˆé™¤æµè§ˆå™¨å®‰å…¨è­¦å‘Šï¼Œæé«˜å¼€å‘å’Œæµ‹è¯•æ•ˆç‡ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è¯¦è§£JSçš„?.ï¼ˆå¯é€‰é“¾æ“ä½œç¬¦ï¼‰å’Œ ??ï¼ˆç©ºå€¼åˆå¹¶æ“ä½œç¬¦ï¼‰]]></title>    <link>https://juejin.cn/post/7605184380610936884</link>    <guid>https://juejin.cn/post/7605184380610936884</guid>    <pubDate>2026-02-11T08:31:54.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605184380610936884" data-draft-id="7605184380610707508" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è¯¦è§£JSçš„?.ï¼ˆå¯é€‰é“¾æ“ä½œç¬¦ï¼‰å’Œ ??ï¼ˆç©ºå€¼åˆå¹¶æ“ä½œç¬¦ï¼‰"/> <meta itemprop="keywords" content="JavaScript,å‰ç«¯"/> <meta itemprop="datePublished" content="2026-02-11T08:31:54.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="SuperEugene"/> <meta itemprop="url" content="https://juejin.cn/user/2366613652515256"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è¯¦è§£JSçš„?.ï¼ˆå¯é€‰é“¾æ“ä½œç¬¦ï¼‰å’Œ ??ï¼ˆç©ºå€¼åˆå¹¶æ“ä½œç¬¦ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2366613652515256/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    SuperEugene
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-11T08:31:54.000Z" title="Wed Feb 11 2026 08:31:54 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€</h2>
<p>è¿™æ˜¯ä¸€æ®µæˆ‘çœ‹ä»åˆ«äººçš„<code>Axios</code>ä»£ç é‡Œçœ‹åˆ°çš„ä»£ç ç‰‡æ®µ</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> msg = error.<span class="hljs-property">response</span>?.<span class="hljs-property">data</span>?.<span class="hljs-property">msg</span> ?? error.<span class="hljs-property">response</span>?.<span class="hljs-property">data</span>?.<span class="hljs-property">message</span> ?? error.<span class="hljs-property">message</span>
</code></pre>
<p>èµ·åˆè¿™ä¸ª<code>?</code>çš„ç”¨æ³•ï¼Œæˆ‘åªåœ¨å®šä¹‰æ¥å£çš„æ—¶å€™ç”¨è¿‡</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">UserInfo</span> {
  <span class="hljs-attr">id</span>: <span class="hljs-built_in">string</span> 
  <span class="hljs-attr">pwd</span>: <span class="hljs-built_in">string</span>  <span class="hljs-comment">// å¯†ç </span>
  <span class="hljs-attr">nickname</span>: <span class="hljs-built_in">string</span> <span class="hljs-comment">// ç”¨æˆ·åç§°</span>
  wechatCode?: <span class="hljs-built_in">string</span>  <span class="hljs-comment">// å¾®ä¿¡å·</span>
}
</code></pre>
<p>è¡¨ç¤ºï¼šwechatCodeæ˜¯å¯é€‰çš„ï¼Œæœ‰ä¹Ÿè¡Œæ²¡æœ‰ä¹Ÿè¡Œã€‚å…¶ä»–çš„éƒ½æ˜¯ä¸€å®šè¦æœ‰çš„ã€‚</p>
<p><code>error.response?.data</code> æˆ‘è¿˜èƒ½ç†è§£ï¼Œè¡¨ç¤º<code>error</code>ä¸­æ˜¯å¦æœ‰<code>response</code>ï¼Œå¦‚æœæœ‰å°±å†<code>.data</code>å¦‚æœæ²¡æœ‰å°±è¿”å›<code>ç©º</code>å˜›ã€‚ä½†æ˜¯<code>??</code>æˆ‘å°±ä¸èƒ½ç†è§£å•¦ã€‚æ€€æ£ç€å¥½å¥‡å¿ƒå­¦ä¹ äº†ä¸€ä¸‹ï¼Œåˆ†äº«ç»™åŒæ ·ä¸çŸ¥é“çš„åŒå­¦ä»¬ã€‚</p>
<h2 data-id="heading-1">ä¸€ã€å…³é”®è¯­æ³•è®²è§£</h2>
<ol>
<li>å¯é€‰é“¾æ“ä½œç¬¦ <code>?.</code>
ä½œç”¨ï¼šå®‰å…¨åœ°è®¿é—®åµŒå¥—å¯¹è±¡çš„å±æ€§ï¼Œå¦‚æœè®¿é—®è·¯å¾„ä¸Šçš„æŸä¸ªå±æ€§æ˜¯ <code>null</code> æˆ– <code>undefined</code>ï¼Œä¸ä¼šæŠ¥é”™ï¼Œè€Œæ˜¯ç›´æ¥è¿”å› <code>undefined</code>ã€‚</li>
</ol>
<ul>
<li>ä¼ ç»Ÿå†™æ³•ï¼šå¦‚æœç›´æ¥å†™ <code>error.response.data.msg</code>ï¼Œå¦‚æœ <code>error.response</code> æ˜¯ <code>undefined</code>ï¼Œä¼šæŠ›å‡º <code>Cannot read properties of undefined (reading 'data')</code> é”™è¯¯ã€‚</li>
<li>å¯é€‰é“¾å†™æ³•ï¼š<code>error.response?.data?.msg</code> ä¼šå…ˆæ£€æŸ¥ <code>error.response</code> æ˜¯å¦å­˜åœ¨ï¼ˆ<code>é null</code>/<code>undefined</code>ï¼‰ï¼Œå­˜åœ¨æ‰ç»§ç»­è®¿é—® <code>data</code>ï¼Œå†æ£€æŸ¥ <code>data</code> å­˜åœ¨æ‰è®¿é—® <code>msg</code>ï¼Œä»»ä½•ä¸€æ­¥ä¸å­˜åœ¨å°±è¿”å› <code>undefined</code>ã€‚</li>
</ul>
<p>2.ç©ºå€¼åˆå¹¶æ“ä½œç¬¦ <code>??</code></p>
<p>ä½œç”¨ï¼šåªåœ¨å·¦è¾¹çš„å€¼æ˜¯ <code>null</code> æˆ– <code>undefined</code> æ—¶ï¼Œæ‰è¿”å›å³è¾¹çš„å€¼ï¼ˆåŒºåˆ«äº <code>||</code>ï¼Œ<code>||</code> ä¼šæŠŠ <code>''</code>ã€<code>0</code>ã€<code>false</code> ç­‰ â€œå‡å€¼â€ ä¹Ÿåˆ¤å®šä¸ºæ— æ•ˆï¼‰ã€‚</p>
<ul>
<li>ä¾‹å­ï¼š
<ul>
<li><code>undefined ?? 'é»˜è®¤å€¼'</code> â†’ <code>è¿”å› 'é»˜è®¤å€¼'</code>ï¼›</li>
<li><code>'' ?? 'é»˜è®¤å€¼'</code> â†’ <code>è¿”å› ''</code>ï¼ˆå› ä¸º '' ä¸æ˜¯ <code>null</code>/<code>undefined</code>ï¼‰ã€‚</li>
</ul>
</li>
<li>å¯¹æ¯” <code>||</code>ï¼š<code>'' || 'é»˜è®¤å€¼'</code> â†’ <code>è¿”å› 'é»˜è®¤å€¼'</code>ï¼Œè¿™æ˜¯ä¸¤è€…çš„æ ¸å¿ƒåŒºåˆ«ã€‚</li>
</ul>
<h2 data-id="heading-2">äºŒã€æ•´è¡Œä»£ç åˆ†æ</h2>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> msg = error.<span class="hljs-property">response</span>?.<span class="hljs-property">data</span>?.<span class="hljs-property">msg</span> ?? error.<span class="hljs-property">response</span>?.<span class="hljs-property">data</span>?.<span class="hljs-property">message</span> ?? error.<span class="hljs-property">message</span>
</code></pre>
<p>è¿™è¡Œä»£ç çš„æ ¸å¿ƒç›®çš„æ˜¯ï¼šæŒ‰ä¼˜å…ˆçº§ä» <code>error</code> å¯¹è±¡ä¸­æå–é”™è¯¯æç¤ºä¿¡æ¯ï¼Œç¡®ä¿æœ€ç»ˆæ‹¿åˆ°ä¸€ä¸ªæœ‰æ•ˆçš„ã€éç©ºçš„é”™è¯¯æ–‡æœ¬ï¼ŒæŸ¥æ‰¾ä¼˜å…ˆçº§å¦‚ä¸‹ï¼š</p>
<p>1ã€ç¬¬ä¸€ä¼˜å…ˆçº§ï¼š<code>error.response?.data?.msg</code>
å…ˆå°è¯•ä» <code>error</code> çš„ <code>response.data</code> é‡Œæ‰¾ <code>msg</code> å±æ€§ï¼ˆå¾ˆå¤šåç«¯æ¥å£è¿”å›çš„é”™è¯¯ä¿¡æ¯å­—æ®µæ˜¯ <code>msg</code>ï¼‰ã€‚</p>
<p>2ã€ç¬¬äºŒä¼˜å…ˆçº§ï¼š<code>error.response?.data?.message</code>
å¦‚æœç¬¬ä¸€æ­¥çš„ç»“æœæ˜¯ <code>null/undefined</code>ï¼ˆæ¯”å¦‚æ¥å£è¿”å›çš„é”™è¯¯å­—æ®µæ˜¯ <code>message</code> è€Œä¸æ˜¯ <code>msg</code>ï¼‰ï¼Œå°±å°è¯•æ‰¾ <code>response.data</code> é‡Œçš„ <code>message</code> å±æ€§ã€‚</p>
<p>3ã€æœ€åå…œåº•ï¼š<code>error.message</code>
å¦‚æœå‰ä¸¤æ­¥éƒ½æ²¡æ‰¾åˆ°ï¼ˆæ¯”å¦‚æ²¡æœ‰ <code>response</code> å±‚çº§ï¼Œæ¯”å¦‚å‰ç«¯è‡ªèº«æŠ›å‡ºçš„é”™è¯¯ï¼‰ï¼Œå°±å– <code>error</code> æœ¬èº«çš„ <code>message </code>å±æ€§ï¼ˆ<code>JS</code> åŸç”Ÿ <code>Error</code> å¯¹è±¡é»˜è®¤æœ‰ <code>message</code> å­—æ®µï¼‰ã€‚</p>
<h2 data-id="heading-3">ä¸‰ã€ä¸¾ä¾‹å­è®²è§£åŠ æ·±å°è±¡</h2>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> msg = error.<span class="hljs-property">response</span>?.<span class="hljs-property">data</span>?.<span class="hljs-property">msg</span> ?? error.<span class="hljs-property">response</span>?.<span class="hljs-property">data</span>?.<span class="hljs-property">message</span> ?? error.<span class="hljs-property">message</span>
</code></pre>
<p>è¿˜æ˜¯è¿™ä¸ªä»£ç ï¼Œç”¨ä¸‰ç§ä¸åŒçš„æ¥å£æƒ…å†µè¿”å›è®©ä½ æ›´å¥½çš„ç†è§£ã€‚ä¸‹é¢çš„ä¸‰ä¸ªä¾‹å­è¦å’Œè¿™æ¡ä»£ç å¯¹ç…§èµ·æ¥çœ‹ã€‚</p>
<p>å‡è®¾æœ‰ä¸‰ç§ä¸åŒçš„ <code>error</code> ç»“æ„ï¼Œçœ‹ <code>msg</code> çš„å–å€¼ç»“æœï¼š</p>
<p>ä¾‹å­ 1ï¼šæ¥å£è¿”å› <code>msg </code>å­—æ®µ</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> error = {
  <span class="hljs-attr">response</span>: {
    <span class="hljs-attr">data</span>: { <span class="hljs-attr">msg</span>: <span class="hljs-string">'ç”¨æˆ·åå·²å­˜åœ¨'</span> }
  }
};
<span class="hljs-comment">// æ‰§è¡Œä»£ç åï¼Œmsg = 'ç”¨æˆ·åå·²å­˜åœ¨'ï¼ˆå–ç¬¬ä¸€ä¼˜å…ˆçº§ï¼‰</span>
</code></pre>
<p>ä¾‹å­ 2ï¼šæ¥å£è¿”å› <code>message </code>å­—æ®µ</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> error = {
  <span class="hljs-attr">response</span>: {
    <span class="hljs-attr">data</span>: { <span class="hljs-attr">message</span>: <span class="hljs-string">'å¯†ç é”™è¯¯'</span> }
  }
};
<span class="hljs-comment">// ç¬¬ä¸€æ­¥ msg æ˜¯ undefined â†’ ç¬¬äºŒæ­¥å– message â†’ msg = 'å¯†ç é”™è¯¯'</span>
</code></pre>
<p>ä¾‹å­ 3ï¼šå‰ç«¯åŸç”Ÿé”™è¯¯ï¼ˆæ—  <code>response</code> å±‚çº§ï¼‰</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> error = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'ç½‘ç»œè¯·æ±‚è¶…æ—¶'</span>);
<span class="hljs-comment">// å‰ä¸¤æ­¥éƒ½æ˜¯ undefined â†’ å– error.message â†’ msg = 'ç½‘ç»œè¯·æ±‚è¶…æ—¶'</span>
</code></pre>
<h2 data-id="heading-4">å››ã€æ€»ç»“</h2>
<ol>
<li><code>?.</code> æ˜¯ä¸ºäº†å®‰å…¨è®¿é—®åµŒå¥—å±æ€§ï¼Œé¿å…å› æŸä¸ªå±æ€§ä¸å­˜åœ¨å¯¼è‡´ä»£ç æŠ¥é”™ï¼›</li>
<li><code>??</code> æ˜¯ä¸ºäº†ç²¾å‡†åˆ¤æ–­ â€œæ— å€¼â€ï¼ˆä»… <code>null</code>/<code>undefined</code>ï¼‰ï¼Œä¼˜å…ˆä½¿ç”¨æ¥å£è¿”å›çš„é”™è¯¯ä¿¡æ¯ï¼Œå…œåº•ç”¨åŸç”Ÿé”™è¯¯ä¿¡æ¯ï¼›</li>
<li>æ•´è¡Œä»£ç çš„æ ¸å¿ƒé€»è¾‘æ˜¯ï¼šæŒ‰ <code>msg</code> â†’ <code>message</code>ï¼ˆæ¥å£å±‚çº§ï¼‰â†’ <code>message</code>ï¼ˆé”™è¯¯å¯¹è±¡å±‚çº§ï¼‰çš„ä¼˜å…ˆçº§ï¼Œæå–æœ‰æ•ˆçš„é”™è¯¯æç¤ºæ–‡æœ¬ã€‚</li>
</ol>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> msg = error.<span class="hljs-property">response</span>?.<span class="hljs-property">data</span>?.<span class="hljs-property">msg</span> ?? error.<span class="hljs-property">response</span>?.<span class="hljs-property">data</span>?.<span class="hljs-property">message</span> ?? error.<span class="hljs-property">message</span>
</code></pre>
<p>é€šè¿‡æœ¬æ¬¡å­¦ä¹ ï¼Œå†ç»“åˆæ¡ˆä¾‹åˆ†æä¸€ä¸‹ã€‚è¿™ä¸ªå†™æ³•ä¼¼ä¹æ˜¯å‰ç«¯å¤„ç†å¼‚æ­¥è¯·æ±‚ï¼ˆå¦‚ <code>Axios</code>ï¼‰é”™è¯¯ä¿¡æ¯çš„å¸¸ç”¨æœ€ä½³å®è·µï¼Œèƒ½å…¼å®¹ä¸åŒæ ¼å¼çš„é”™è¯¯è¿”å›ï¼Œä¿è¯ä»£ç çš„å¥å£®æ€§ã€‚</p>
<p>ä»¥ä¸Šå°±æ˜¯æœ¬æ¬¡å¯¹JSçš„<code>?.</code>ï¼ˆå¯é€‰é“¾æ“ä½œç¬¦ï¼‰å’Œ<code> ??</code>ï¼ˆç©ºå€¼åˆå¹¶æ“ä½œç¬¦ï¼‰çš„å­¦ä¹ åˆ†äº«ã€‚æ¬¢è¿å¤§å®¶æŒ‡æ­£è®¨è®ºï¼Œä¸å¤§å®¶å…±å‹‰ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vue3 ç»„ä»¶é€šä¿¡å…¨è§£æ]]></title>    <link>https://juejin.cn/post/7605184380610986036</link>    <guid>https://juejin.cn/post/7605184380610986036</guid>    <pubDate>2026-02-11T08:35:55.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605184380610986036" data-draft-id="7605128056486002703" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vue3 ç»„ä»¶é€šä¿¡å…¨è§£æ"/> <meta itemprop="keywords" content="å‰ç«¯,é¢è¯•,Vue.js"/> <meta itemprop="datePublished" content="2026-02-11T08:35:55.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸æƒ³ç§ƒå¤´çš„ç¨‹åºå‘˜"/> <meta itemprop="url" content="https://juejin.cn/user/2754702534251820"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vue3 ç»„ä»¶é€šä¿¡å…¨è§£æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2754702534251820/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸æƒ³ç§ƒå¤´çš„ç¨‹åºå‘˜
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-11T08:35:55.000Z" title="Wed Feb 11 2026 08:35:55 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ç»„ä»¶é€šä¿¡æ˜¯ Vue å¼€å‘ä¸­ç»•ä¸å¼€çš„æ ¸å¿ƒçŸ¥è¯†ç‚¹ï¼Œå°¤å…¶æ˜¯ Vue3 ç»„åˆå¼ API æ™®åŠåï¼Œé€šä¿¡æ–¹å¼ç›¸æ¯” Vue2 æœ‰äº†ä¸å°‘å˜åŒ–å’Œä¼˜åŒ–ã€‚æœ¬æ–‡å°†æŠ›å¼€ TypeScriptï¼Œç”¨æœ€é€šä¿—æ˜“æ‡‚çš„æ–¹å¼ï¼Œå¸¦ä½ æ¢³ç† Vue3 ä¸­æ‰€æœ‰å¸¸ç”¨çš„ç»„ä»¶é€šä¿¡æ–¹å¼ï¼Œä»åŸºç¡€çš„çˆ¶å­é€šä¿¡åˆ°å¤æ‚çš„è·¨å±‚çº§é€šä¿¡ï¼Œæ¯ä¸€ç§éƒ½é…å®æˆ˜ç¤ºä¾‹ï¼Œæ–°æ‰‹ä¹Ÿèƒ½è½»æ¾ä¸Šæ‰‹ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€çˆ¶å­ç»„ä»¶é€šä¿¡ï¼ˆæœ€åŸºç¡€ä¹Ÿæœ€å¸¸ç”¨ï¼‰</h2>
<p>çˆ¶å­ç»„ä»¶é€šä¿¡æ˜¯æ—¥å¸¸å¼€å‘ä¸­ä½¿ç”¨é¢‘ç‡æœ€é«˜çš„åœºæ™¯ï¼ŒVue3 ä¸ºè¿™ç§åœºæ™¯æä¾›äº†æ¸…æ™°ä¸”é«˜æ•ˆçš„è§£å†³æ–¹æ¡ˆã€‚</p>
<h3 data-id="heading-1">1. çˆ¶ä¼ å­ï¼šProps</h3>
<p>Props æ˜¯çˆ¶ç»„ä»¶å‘å­ç»„ä»¶ä¼ é€’æ•°æ®çš„å®˜æ–¹æ ‡å‡†æ–¹å¼ï¼Œå­ç»„ä»¶é€šè¿‡å®šä¹‰ props æ¥æ”¶çˆ¶ç»„ä»¶ä¼ é€’çš„å€¼ã€‚</p>
<p><strong>çˆ¶ç»„ä»¶ï¼ˆParent.vueï¼‰</strong></p>
<pre><code class="hljs language-js" lang="js">&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"parent"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>æˆ‘æ˜¯çˆ¶ç»„ä»¶<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- å‘å­ç»„ä»¶ä¼ é€’æ•°æ® --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">Child</span> 
      <span class="hljs-attr">:msg</span>=<span class="hljs-string">"parentMsg"</span> 
      <span class="hljs-attr">:user-info</span>=<span class="hljs-string">"userInfo"</span>
      <span class="hljs-attr">:list</span>=<span class="hljs-string">"fruitList"</span>
    /&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
&lt;/template&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-comment">// å¼•å…¥å­ç»„ä»¶</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Child</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./Child.vue'</span>
<span class="hljs-keyword">import</span> { ref, reactive } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>

<span class="hljs-comment">// å®šä¹‰è¦ä¼ é€’ç»™å­ç»„ä»¶çš„æ•°æ®</span>
<span class="hljs-keyword">const</span> parentMsg = <span class="hljs-title function_">ref</span>(<span class="hljs-string">'æ¥è‡ªçˆ¶ç»„ä»¶çš„é—®å€™'</span>)
<span class="hljs-keyword">const</span> userInfo = <span class="hljs-title function_">reactive</span>({
  <span class="hljs-attr">name</span>: <span class="hljs-string">'å¼ ä¸‰'</span>,
  <span class="hljs-attr">age</span>: <span class="hljs-number">25</span>
})
<span class="hljs-keyword">const</span> fruitList = <span class="hljs-title function_">ref</span>([<span class="hljs-string">'è‹¹æœ'</span>, <span class="hljs-string">'é¦™è•‰'</span>, <span class="hljs-string">'æ©™å­'</span>])
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
</code></pre>
<p><strong>å­ç»„ä»¶ï¼ˆChild.vueï¼‰</strong></p>
<pre><code class="hljs language-js" lang="js">&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"child"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h4</span>&gt;</span>æˆ‘æ˜¯å­ç»„ä»¶<span class="hljs-tag">&lt;/<span class="hljs-name">h4</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>çˆ¶ç»„ä»¶ä¼ é€’çš„å­—ç¬¦ä¸²ï¼š{{ msg }}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>çˆ¶ç»„ä»¶ä¼ é€’çš„å¯¹è±¡ï¼š{{ userInfo.name }} - {{ userInfo.age }}å²<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>çˆ¶ç»„ä»¶ä¼ é€’çš„æ•°ç»„ï¼š{{ list.join('ã€') }}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
&lt;/template&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-comment">// å®šä¹‰propsæ¥æ”¶çˆ¶ç»„ä»¶æ•°æ®</span>
<span class="hljs-keyword">const</span> props = <span class="hljs-title function_">defineProps</span>({
  <span class="hljs-comment">// å­—ç¬¦ä¸²ç±»å‹</span>
  <span class="hljs-attr">msg</span>: {
    <span class="hljs-attr">type</span>: <span class="hljs-title class_">String</span>,
    <span class="hljs-attr">default</span>: <span class="hljs-string">'é»˜è®¤å€¼'</span>
  },
  <span class="hljs-comment">// å¯¹è±¡ç±»å‹</span>
  <span class="hljs-attr">userInfo</span>: {
    <span class="hljs-attr">type</span>: <span class="hljs-title class_">Object</span>,
    <span class="hljs-attr">default</span>: <span class="hljs-function">() =&gt;</span> ({}) <span class="hljs-comment">// å¯¹è±¡/æ•°ç»„é»˜è®¤å€¼å¿…é¡»ç”¨å‡½æ•°è¿”å›</span>
  },
  <span class="hljs-comment">// æ•°ç»„ç±»å‹</span>
  <span class="hljs-attr">list</span>: {
    <span class="hljs-attr">type</span>: <span class="hljs-title class_">Array</span>,
    <span class="hljs-attr">default</span>: <span class="hljs-function">() =&gt;</span> []
  }
})

<span class="hljs-comment">// åœ¨è„šæœ¬ä¸­ä½¿ç”¨propsï¼ˆç»„åˆå¼APIä¸­å¯ç›´æ¥ç”¨props.xxxï¼‰</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(props.<span class="hljs-property">msg</span>)
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
</code></pre>
<h3 data-id="heading-2">2. å­ä¼ çˆ¶ï¼šè‡ªå®šä¹‰äº‹ä»¶ï¼ˆEmitsï¼‰</h3>
<p>å­ç»„ä»¶é€šè¿‡è§¦å‘è‡ªå®šä¹‰äº‹ä»¶ï¼Œå°†æ•°æ®ä¼ é€’ç»™çˆ¶ç»„ä»¶ï¼Œçˆ¶ç»„ä»¶é€šè¿‡ç›‘å¬äº‹ä»¶æ¥æ”¶æ•°æ®ã€‚</p>
<p><strong>å­ç»„ä»¶ï¼ˆChild.vueï¼‰</strong></p>
<pre><code class="hljs language-js" lang="js">&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"child"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h4</span>&gt;</span>æˆ‘æ˜¯å­ç»„ä»¶<span class="hljs-tag">&lt;/<span class="hljs-name">h4</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"sendToParent"</span>&gt;</span>å‘çˆ¶ç»„ä»¶ä¼ é€’æ•°æ®<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
&lt;/template&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-comment">// å£°æ˜è¦è§¦å‘çš„è‡ªå®šä¹‰äº‹ä»¶ï¼ˆå¯é€‰ï¼Œä½†æ¨èï¼‰</span>
<span class="hljs-keyword">const</span> emit = <span class="hljs-title function_">defineEmits</span>([<span class="hljs-string">'childMsg'</span>, <span class="hljs-string">'updateInfo'</span>])

<span class="hljs-keyword">const</span> <span class="hljs-title function_">sendToParent</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-comment">// è§¦å‘äº‹ä»¶å¹¶ä¼ é€’æ•°æ®ï¼ˆç¬¬ä¸€ä¸ªå‚æ•°æ˜¯äº‹ä»¶åï¼Œåç»­æ˜¯è¦ä¼ é€’çš„æ•°æ®ï¼‰</span>
  <span class="hljs-title function_">emit</span>(<span class="hljs-string">'childMsg'</span>, <span class="hljs-string">'æ¥è‡ªå­ç»„ä»¶çš„æ¶ˆæ¯'</span>)
  <span class="hljs-title function_">emit</span>(<span class="hljs-string">'updateInfo'</span>, {
    <span class="hljs-attr">name</span>: <span class="hljs-string">'æå››'</span>,
    <span class="hljs-attr">age</span>: <span class="hljs-number">30</span>
  })
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
</code></pre>
<p><strong>çˆ¶ç»„ä»¶ï¼ˆParent.vueï¼‰</strong></p>
<pre><code class="hljs language-js" lang="js">&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"parent"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>æˆ‘æ˜¯çˆ¶ç»„ä»¶<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- ç›‘å¬å­ç»„ä»¶çš„è‡ªå®šä¹‰äº‹ä»¶ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">Child</span> 
      @<span class="hljs-attr">childMsg</span>=<span class="hljs-string">"handleChildMsg"</span>
      @<span class="hljs-attr">updateInfo</span>=<span class="hljs-string">"handleUpdateInfo"</span>
    /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>å­ç»„ä»¶ä¼ é€’çš„æ¶ˆæ¯ï¼š{{ childMsg }}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>å­ç»„ä»¶æ›´æ–°çš„ä¿¡æ¯ï¼š{{ newUserInfo.name }} - {{ newUserInfo.age }}å²<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
&lt;/template&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Child</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./Child.vue'</span>
<span class="hljs-keyword">import</span> { ref, reactive } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>

<span class="hljs-keyword">const</span> childMsg = <span class="hljs-title function_">ref</span>(<span class="hljs-string">''</span>)
<span class="hljs-keyword">const</span> newUserInfo = <span class="hljs-title function_">reactive</span>({
  <span class="hljs-attr">name</span>: <span class="hljs-string">''</span>,
  <span class="hljs-attr">age</span>: <span class="hljs-number">0</span>
})

<span class="hljs-comment">// å¤„ç†å­ç»„ä»¶çš„æ¶ˆæ¯</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleChildMsg</span> = (<span class="hljs-params">msg</span>) =&gt; {
  childMsg.<span class="hljs-property">value</span> = msg
}

<span class="hljs-comment">// å¤„ç†å­ç»„ä»¶çš„ä¿¡æ¯æ›´æ–°</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleUpdateInfo</span> = (<span class="hljs-params">info</span>) =&gt; {
  newUserInfo.<span class="hljs-property">name</span> = info.<span class="hljs-property">name</span>
  newUserInfo.<span class="hljs-property">age</span> = info.<span class="hljs-property">age</span>
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
</code></pre>
<h2 data-id="heading-3">äºŒã€è·¨å±‚çº§ç»„ä»¶é€šä¿¡</h2>
<p>å½“ç»„ä»¶åµŒå¥—å±‚çº§è¾ƒæ·±ï¼ˆæ¯”å¦‚çˆ·å­™ç»„ä»¶ã€è·¨å¤šçº§ç»„ä»¶ï¼‰ï¼Œä½¿ç”¨ props + emits ä¼šéå¸¸ç¹çï¼Œè¿™æ—¶éœ€è¦æ›´é«˜æ•ˆçš„è·¨å±‚çº§é€šä¿¡æ–¹æ¡ˆã€‚</p>
<h3 data-id="heading-4">1. provide /injectï¼ˆä¾èµ–æ³¨å…¥ï¼‰</h3>
<p>provide ç”¨äºçˆ¶ç»„ä»¶ï¼ˆæˆ–ç¥–å…ˆç»„ä»¶ï¼‰æä¾›æ•°æ®ï¼Œinject ç”¨äºå­å­™ç»„ä»¶æ³¨å…¥æ•°æ®ï¼Œæ”¯æŒä»»æ„å±‚çº§çš„ç»„ä»¶é€šä¿¡ã€‚</p>
<p><strong>ç¥–å…ˆç»„ä»¶ï¼ˆGrandParent.vueï¼‰</strong></p>
<pre><code class="hljs language-js" lang="js">&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"grand-parent"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>æˆ‘æ˜¯ç¥–å…ˆç»„ä»¶<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">Parent</span> /&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
&lt;/template&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Parent</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./Parent.vue'</span>
<span class="hljs-keyword">import</span> { ref, reactive, provide } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>

<span class="hljs-comment">// æä¾›åŸºæœ¬ç±»å‹æ•°æ®</span>
<span class="hljs-keyword">const</span> theme = <span class="hljs-title function_">ref</span>(<span class="hljs-string">'dark'</span>)
<span class="hljs-title function_">provide</span>(<span class="hljs-string">'theme'</span>, theme)

<span class="hljs-comment">// æä¾›å¯¹è±¡ç±»å‹æ•°æ®</span>
<span class="hljs-keyword">const</span> globalConfig = <span class="hljs-title function_">reactive</span>({
  <span class="hljs-attr">fontSize</span>: <span class="hljs-string">'16px'</span>,
  <span class="hljs-attr">color</span>: <span class="hljs-string">'#333'</span>
})
<span class="hljs-title function_">provide</span>(<span class="hljs-string">'globalConfig'</span>, globalConfig)

<span class="hljs-comment">// æä¾›æ–¹æ³•ï¼ˆæ”¯æŒåŒå‘é€šä¿¡ï¼‰</span>
<span class="hljs-title function_">provide</span>(<span class="hljs-string">'changeTheme'</span>, <span class="hljs-function">(<span class="hljs-params">newTheme</span>) =&gt;</span> {
  theme.<span class="hljs-property">value</span> = newTheme
})
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
</code></pre>
<p><strong>å­™ç»„ä»¶ï¼ˆChild.vueï¼‰</strong></p>
<pre><code class="hljs language-js" lang="js">&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"child"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h4</span>&gt;</span>æˆ‘æ˜¯å­™ç»„ä»¶<span class="hljs-tag">&lt;/<span class="hljs-name">h4</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>ç¥–å…ˆç»„ä»¶æä¾›çš„ä¸»é¢˜ï¼š{{ theme }}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>å…¨å±€é…ç½®ï¼š{{ globalConfig.fontSize }} / {{ globalConfig.color }}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"changeTheme('light')"</span>&gt;</span>åˆ‡æ¢ä¸ºäº®è‰²ä¸»é¢˜<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
&lt;/template&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { inject } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>

<span class="hljs-comment">// æ³¨å…¥ç¥–å…ˆç»„ä»¶æä¾›çš„æ•°æ®ï¼ˆç¬¬äºŒä¸ªå‚æ•°æ˜¯é»˜è®¤å€¼ï¼‰</span>
<span class="hljs-keyword">const</span> theme = <span class="hljs-title function_">inject</span>(<span class="hljs-string">'theme'</span>, <span class="hljs-string">'light'</span>)
<span class="hljs-keyword">const</span> globalConfig = <span class="hljs-title function_">inject</span>(<span class="hljs-string">'globalConfig'</span>, {})
<span class="hljs-keyword">const</span> changeTheme = <span class="hljs-title function_">inject</span>(<span class="hljs-string">'changeTheme'</span>, <span class="hljs-function">() =&gt;</span> {})
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
</code></pre>
<h3 data-id="heading-5">2. Vuex/Piniaï¼ˆå…¨å±€çŠ¶æ€ç®¡ç†ï¼‰</h3>
<p>å½“å¤šä¸ªä¸ç›¸å…³çš„ç»„ä»¶éœ€è¦å…±äº«çŠ¶æ€ï¼Œæˆ–è€…é¡¹ç›®è§„æ¨¡è¾ƒå¤§æ—¶ï¼Œæ¨èä½¿ç”¨å®˜æ–¹çš„çŠ¶æ€ç®¡ç†åº“ï¼ŒVue3 ä¸­æ›´æ¨è Piniaï¼ˆæ¯” Vuex æ›´ç®€æ´ï¼‰ã€‚</p>
<h4 data-id="heading-6">ç¤ºä¾‹ï¼šPinia å®ç°å…¨å±€é€šä¿¡</h4>
<p><strong>1. å®‰è£… Pinia</strong></p>
<pre><code class="hljs language-js" lang="js">npm install pinia
</code></pre>
<p><strong>2. åˆ›å»º Pinia å®ä¾‹ï¼ˆmain.jsï¼‰</strong></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { createApp } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> { createPinia } <span class="hljs-keyword">from</span> <span class="hljs-string">'pinia'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./App.vue'</span>

<span class="hljs-keyword">const</span> app = <span class="hljs-title function_">createApp</span>(<span class="hljs-title class_">App</span>)
app.<span class="hljs-title function_">use</span>(<span class="hljs-title function_">createPinia</span>())
app.<span class="hljs-title function_">mount</span>(<span class="hljs-string">'#app'</span>)
</code></pre>
<p><strong>3. åˆ›å»º Storeï¼ˆstores/user.jsï¼‰</strong></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { defineStore } <span class="hljs-keyword">from</span> <span class="hljs-string">'pinia'</span>

<span class="hljs-comment">// å®šä¹‰å¹¶å¯¼å‡ºstore</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> useUserStore = <span class="hljs-title function_">defineStore</span>(<span class="hljs-string">'user'</span>, {
  <span class="hljs-comment">// çŠ¶æ€</span>
  <span class="hljs-attr">state</span>: <span class="hljs-function">() =&gt;</span> ({
    <span class="hljs-attr">username</span>: <span class="hljs-string">'é»˜è®¤ç”¨æˆ·å'</span>,
    <span class="hljs-attr">token</span>: <span class="hljs-string">''</span>
  }),
  <span class="hljs-comment">// è®¡ç®—å±æ€§</span>
  <span class="hljs-attr">getters</span>: {
    <span class="hljs-comment">// å¤„ç†ç”¨æˆ·åæ ¼å¼</span>
    <span class="hljs-attr">formatUsername</span>: <span class="hljs-function">(<span class="hljs-params">state</span>) =&gt;</span> {
      <span class="hljs-keyword">return</span> <span class="hljs-string">`ã€<span class="hljs-subst">${state.username}</span>ã€‘`</span>
    }
  },
  <span class="hljs-comment">// æ–¹æ³•ï¼ˆä¿®æ”¹çŠ¶æ€ï¼‰</span>
  <span class="hljs-attr">actions</span>: {
    <span class="hljs-comment">// æ›´æ–°ç”¨æˆ·ä¿¡æ¯</span>
    <span class="hljs-title function_">updateUserInfo</span>(<span class="hljs-params">newInfo</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">username</span> = newInfo.<span class="hljs-property">username</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">token</span> = newInfo.<span class="hljs-property">token</span>
    },
    <span class="hljs-comment">// æ¸…ç©ºç”¨æˆ·ä¿¡æ¯</span>
    <span class="hljs-title function_">clearUserInfo</span>(<span class="hljs-params"/>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">username</span> = <span class="hljs-string">''</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">token</span> = <span class="hljs-string">''</span>
    }
  }
})
</code></pre>
<p><strong>4. ç»„ä»¶ä¸­ä½¿ç”¨ Store</strong></p>
<pre><code class="hljs language-js" lang="js">&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>å…¨å±€çŠ¶æ€ç®¡ç†ç¤ºä¾‹<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>ç”¨æˆ·åï¼š{{ userStore.formatUsername }}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Tokenï¼š{{ userStore.token }}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"updateUser"</span>&gt;</span>æ›´æ–°ç”¨æˆ·ä¿¡æ¯<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"clearUser"</span>&gt;</span>æ¸…ç©ºç”¨æˆ·ä¿¡æ¯<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
&lt;/template&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { useUserStore } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/stores/user'</span>

<span class="hljs-comment">// è·å–storeå®ä¾‹</span>
<span class="hljs-keyword">const</span> userStore = <span class="hljs-title function_">useUserStore</span>()

<span class="hljs-comment">// æ›´æ–°ç”¨æˆ·ä¿¡æ¯</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">updateUser</span> = (<span class="hljs-params"/>) =&gt; {
  userStore.<span class="hljs-title function_">updateUserInfo</span>({
    <span class="hljs-attr">username</span>: <span class="hljs-string">'æ˜é‡‘ç”¨æˆ·'</span>,
    <span class="hljs-attr">token</span>: <span class="hljs-string">'123456789'</span>
  })
}

<span class="hljs-comment">// æ¸…ç©ºç”¨æˆ·ä¿¡æ¯</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">clearUser</span> = (<span class="hljs-params"/>) =&gt; {
  userStore.<span class="hljs-title function_">clearUserInfo</span>()
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
</code></pre>
<h2 data-id="heading-7">ä¸‰ã€å…¶ä»–å¸¸ç”¨é€šä¿¡æ–¹å¼</h2>
<h3 data-id="heading-8">1. v-model åŒå‘ç»‘å®š</h3>
<p>Vue3 ä¸­ v-model æ”¯æŒè‡ªå®šä¹‰ç»‘å®šå±æ€§ï¼Œå¯å®ç°çˆ¶å­ç»„ä»¶çš„åŒå‘æ•°æ®ç»‘å®šï¼Œç®€åŒ–å­ä¼ çˆ¶çš„æ“ä½œã€‚</p>
<p><strong>å­ç»„ä»¶ï¼ˆChild.vueï¼‰</strong></p>
<pre><code class="hljs language-js" lang="js">&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"child"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> 
      <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> 
      <span class="hljs-attr">:value</span>=<span class="hljs-string">"modelValue"</span> 
      @<span class="hljs-attr">input</span>=<span class="hljs-string">"emit('update:modelValue', $event.target.value)"</span>
    /&gt;</span>
    <span class="hljs-comment">&lt;!-- æ”¯æŒå¤šä¸ªv-model --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> 
      <span class="hljs-attr">type</span>=<span class="hljs-string">"number"</span> 
      <span class="hljs-attr">:value</span>=<span class="hljs-string">"age"</span> 
      @<span class="hljs-attr">input</span>=<span class="hljs-string">"emit('update:age', $event.target.value)"</span>
    /&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
&lt;/template&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-title function_">defineProps</span>([<span class="hljs-string">'modelValue'</span>, <span class="hljs-string">'age'</span>])
<span class="hljs-keyword">const</span> emit = <span class="hljs-title function_">defineEmits</span>([<span class="hljs-string">'update:modelValue'</span>, <span class="hljs-string">'update:age'</span>])
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
</code></pre>
<p><strong>çˆ¶ç»„ä»¶ï¼ˆParent.vueï¼‰</strong></p>
<pre><code class="hljs language-js" lang="js">&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"parent"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>çˆ¶ç»„ä»¶<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">Child</span> 
      <span class="hljs-attr">v-model</span>=<span class="hljs-string">"username"</span>
      <span class="hljs-attr">v-model:age</span>=<span class="hljs-string">"userAge"</span>
    /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>ç”¨æˆ·åï¼š{{ username }}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>å¹´é¾„ï¼š{{ userAge }}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
&lt;/template&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Child</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./Child.vue'</span>
<span class="hljs-keyword">import</span> { ref } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>

<span class="hljs-keyword">const</span> username = <span class="hljs-title function_">ref</span>(<span class="hljs-string">''</span>)
<span class="hljs-keyword">const</span> userAge = <span class="hljs-title function_">ref</span>(<span class="hljs-number">0</span>)
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
</code></pre>
<h3 data-id="heading-9">2. äº‹ä»¶æ€»çº¿ï¼ˆmittï¼‰</h3>
<p>Vue3 ç§»é™¤äº† Vue2 çš„ <code>$on/$emit</code> äº‹ä»¶æ€»çº¿ï¼Œå¯ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“ <code>mitt</code> å®ç°ä»»æ„ç»„ä»¶é—´çš„é€šä¿¡ã€‚</p>
<p><strong>1. å®‰è£… mitt</strong></p>
<pre><code class="hljs">npm install mitt
</code></pre>
<p><strong>2. åˆ›å»ºäº‹ä»¶æ€»çº¿ï¼ˆutils/bus.jsï¼‰</strong></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> mitt <span class="hljs-keyword">from</span> <span class="hljs-string">'mitt'</span>
<span class="hljs-keyword">const</span> bus = <span class="hljs-title function_">mitt</span>()
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> bus
</code></pre>
<p><strong>3. ç»„ä»¶ A å‘é€äº‹ä»¶</strong></p>
<pre><code class="hljs language-js" lang="js">&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"sendMsg"</span>&gt;</span>å‘é€æ¶ˆæ¯åˆ°ç»„ä»¶B<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
&lt;/template&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> bus <span class="hljs-keyword">from</span> <span class="hljs-string">'@/utils/bus'</span>

<span class="hljs-keyword">const</span> <span class="hljs-title function_">sendMsg</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-comment">// è§¦å‘è‡ªå®šä¹‰äº‹ä»¶å¹¶ä¼ é€’æ•°æ®</span>
  bus.<span class="hljs-title function_">emit</span>(<span class="hljs-string">'msgEvent'</span>, <span class="hljs-string">'æ¥è‡ªç»„ä»¶Açš„æ¶ˆæ¯'</span>)
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
</code></pre>
<p><strong>4. ç»„ä»¶ B æ¥æ”¶äº‹ä»¶</strong></p>
<pre><code class="hljs language-js" lang="js">&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>ç»„ä»¶Aä¼ é€’çš„æ¶ˆæ¯ï¼š{{ msg }}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
&lt;/template&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { ref, onMounted, onUnmounted } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> bus <span class="hljs-keyword">from</span> <span class="hljs-string">'@/utils/bus'</span>

<span class="hljs-keyword">const</span> msg = <span class="hljs-title function_">ref</span>(<span class="hljs-string">''</span>)

<span class="hljs-comment">// æŒ‚è½½æ—¶ç›‘å¬äº‹ä»¶</span>
<span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> {
  bus.<span class="hljs-title function_">on</span>(<span class="hljs-string">'msgEvent'</span>, <span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {
    msg.<span class="hljs-property">value</span> = data
  })
})

<span class="hljs-comment">// å¸è½½æ—¶ç§»é™¤ç›‘å¬ï¼ˆé¿å…å†…å­˜æ³„æ¼ï¼‰</span>
<span class="hljs-title function_">onUnmounted</span>(<span class="hljs-function">() =&gt;</span> {
  bus.<span class="hljs-title function_">off</span>(<span class="hljs-string">'msgEvent'</span>)
})
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
</code></pre>
<h2 data-id="heading-10">å››ã€é€šä¿¡æ–¹å¼é€‰å‹å»ºè®®</h2>
<p>è¡¨æ ¼</p>





























<table><thead><tr><th>é€šä¿¡åœºæ™¯</th><th>æ¨èæ–¹å¼</th></tr></thead><tbody><tr><td>çˆ¶ä¼ å­</td><td>Props</td></tr><tr><td>å­ä¼ çˆ¶</td><td>è‡ªå®šä¹‰äº‹ä»¶ï¼ˆEmitsï¼‰/v-model</td></tr><tr><td>çˆ·å­™ / è·¨å±‚çº§</td><td>provide / inject</td></tr><tr><td>å…¨å±€å…±äº«çŠ¶æ€</td><td>Pinia</td></tr><tr><td>ä»»æ„ç»„ä»¶ä¸´æ—¶é€šä¿¡</td><td>mitt äº‹ä»¶æ€»çº¿</td></tr></tbody></table>
<h2 data-id="heading-11">æ€»ç»“</h2>
<ol>
<li>Vue3 ä¸­çˆ¶å­ç»„ä»¶é€šä¿¡ä¼˜å…ˆä½¿ç”¨ <strong>Props + Emits</strong>ï¼Œv-model å¯ç®€åŒ–åŒå‘ç»‘å®šåœºæ™¯ï¼›</li>
<li>è·¨å±‚çº§é€šä¿¡æ¨è <strong>provide / inject</strong>ï¼Œå…¨å±€çŠ¶æ€ç®¡ç†é¦–é€‰ <strong>Pinia</strong>ï¼›</li>
<li>ä¸´æ—¶çš„ä»»æ„ç»„ä»¶é€šä¿¡å¯ä½¿ç”¨ <strong>mitt</strong> äº‹ä»¶æ€»çº¿ï¼Œæ³¨æ„åŠæ—¶ç§»é™¤ç›‘å¬é¿å…å†…å­˜æ³„æ¼ã€‚</li>
</ol>
<p>ç»„ä»¶é€šä¿¡çš„æ ¸å¿ƒæ˜¯ â€œæ•°æ®æµå‘æ¸…æ™°â€ï¼Œæ— è®ºé€‰æ‹©å“ªç§æ–¹å¼ï¼Œéƒ½è¦ä¿è¯æ•°æ®çš„ä¼ é€’è·¯å¾„å¯è¿½æº¯ï¼Œé¿å…æ»¥ç”¨å…¨å±€é€šä¿¡å¯¼è‡´ä»£ç ç»´æŠ¤å›°éš¾ã€‚å¸Œæœ›æœ¬æ–‡èƒ½å¸®åŠ©ä½ å½»åº•æŒæ¡ Vue3 ç»„ä»¶é€šä¿¡ï¼Œå°‘èµ°å¼¯è·¯ï½</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‰ç«¯å°† HTML è½¬æˆ Word æ–‡æ¡£çš„è¸©å‘è®°å½•ï¼ˆä» html-docx-jsåˆ°html-to-docx åˆ° docxï¼‰]]></title>    <link>https://juejin.cn/post/7605135197167124530</link>    <guid>https://juejin.cn/post/7605135197167124530</guid>    <pubDate>2026-02-11T08:46:52.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605135197167124530" data-draft-id="7605135197166993458" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‰ç«¯å°† HTML è½¬æˆ Word æ–‡æ¡£çš„è¸©å‘è®°å½•ï¼ˆä» html-docx-jsåˆ°html-to-docx åˆ° docxï¼‰"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-02-11T08:46:52.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ²ˆå°é—¹"/> <meta itemprop="url" content="https://juejin.cn/user/2154698523023415"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‰ç«¯å°† HTML è½¬æˆ Word æ–‡æ¡£çš„è¸©å‘è®°å½•ï¼ˆä» html-docx-jsåˆ°html-to-docx åˆ° docxï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2154698523023415/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ²ˆå°é—¹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-11T08:46:52.000Z" title="Wed Feb 11 2026 08:46:52 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰ç«¯å°† HTML è½¬æˆ Word æ–‡æ¡£çš„è¸©å‘è®°å½•ï¼ˆä» html-docx-js åˆ° docxï¼‰</h2>
<p>åœ¨é¡¹ç›®ä¸­ï¼Œæˆ‘éœ€è¦å®ç°ä¸€ä¸ªåŠŸèƒ½ï¼š<br/>
ğŸ‘‰ <strong>å°†é¡µé¢æ¸²æŸ“å‡ºæ¥çš„ HTML å†…å®¹å¯¼å‡ºä¸º Word æ–‡æ¡£ï¼ˆ.docxï¼‰</strong></p>
<p>çœ‹èµ·æ¥å¾ˆç®€å•ï¼Œä½†çœŸæ­£è½åœ°æ—¶è¸©äº†ä¸å°‘å‘ã€‚<br/>
è¿™ç¯‡æ–‡ç« è®°å½•ä¸€ä¸‹ä»æ’ä»¶é€‰æ‹©åˆ°æœ€ç»ˆè§£å†³æ–¹æ¡ˆçš„å…¨è¿‡ç¨‹ã€‚</p>
<hr/>
<h2 data-id="heading-1">ä¸€ã€æ’ä»¶é€‰å‹å¯¹æ¯”</h2>
<h3 data-id="heading-2">1ï¸âƒ£ html-docx-js</h3>
<p>æœ€æ—©å°è¯•çš„æ˜¯ <code>html-docx-js</code>ã€‚</p>
<p>ä¼˜ç‚¹ï¼š</p>
<ul>
<li>ä½¿ç”¨ç®€å•</li>
<li>ç›´æ¥å°† HTML å­—ç¬¦ä¸²è½¬æ¢æˆ Word</li>
</ul>
<p>ä½†æ˜¯å¾ˆå¿«é‡åˆ°äº†é—®é¢˜ï¼š</p>
<h4 data-id="heading-3">â— å¤šå±‚çº§æœ‰åºåˆ—è¡¨åœ¨ WPS ä¸­æ˜¾ç¤ºå¼‚å¸¸</h4>
<p>å½“ HTML ä¸­å­˜åœ¨ï¼š</p>
<pre><code class="hljs language-css" lang="css">&lt;<span class="hljs-selector-tag">ol</span>&gt;
  &lt;<span class="hljs-selector-tag">li</span>&gt;ä¸€çº§&lt;/<span class="hljs-selector-tag">li</span>&gt;
  &lt;<span class="hljs-selector-tag">li</span>&gt;
    äºŒçº§
    &lt;<span class="hljs-selector-tag">ol</span>&gt;
      &lt;<span class="hljs-selector-tag">li</span>&gt;å­çº§&lt;/<span class="hljs-selector-tag">li</span>&gt;
    &lt;/<span class="hljs-selector-tag">ol</span>&gt;
  &lt;/<span class="hljs-selector-tag">li</span>&gt;
&lt;/<span class="hljs-selector-tag">ol</span>&gt;
</code></pre>
<p>åœ¨ <strong>Microsoft Word</strong> ä¸­æ˜¾ç¤ºæ­£å¸¸ï¼Œ<br/>
ä½†åœ¨ <strong>WPS</strong> ä¸­ä¼šå‡ºç°ï¼š</p>
<ul>
<li>åºå·é”™ä¹±</li>
<li>å±‚çº§ç¼©è¿›å¼‚å¸¸</li>
<li>åˆ—è¡¨ç»“æ„è¢«æ‰“ä¹±</li>
</ul>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼š</p>
<blockquote>
<p>html-docx-js åœ¨ç”Ÿæˆçš„ docx ç»“æ„ä¸­ï¼Œåˆ—è¡¨å…¼å®¹æ€§å¹¶ä¸ç¨³å®šã€‚</p>
</blockquote>
<p>å¯¹äºéœ€è¦å…¼å®¹ WPS çš„åœºæ™¯æ¥è¯´ï¼Œè¿™æ˜¯ä¸å¯æ¥å—çš„ã€‚</p>
<hr/>
<h3 data-id="heading-4">2ï¸âƒ£ html-to-docx / htmltodoc</h3>
<p>åæ¥å°è¯• <code>html-to-docx</code> è¿™ä¸€ç±»åº“ã€‚</p>
<p>é—®é¢˜ä¹Ÿå¾ˆæ˜æ˜¾ï¼š</p>
<h4 data-id="heading-5">â— ä¸æ”¯æŒ canvas å›¾ç‰‡</h4>
<p>å¦‚æœé¡µé¢ä¸­æœ‰ï¼š</p>
<ul>
<li>canvas å›¾è¡¨</li>
<li>å›¾å½¢ç»˜åˆ¶</li>
<li>Echarts</li>
<li>GPT å¯è§†åŒ–å›¾è¡¨</li>
</ul>
<p>å¯¼å‡ºåï¼š</p>
<blockquote>
<p>å›¾ç‰‡ä¸ºç©ºç™½</p>
</blockquote>
<p>åŸå› æ˜¯ï¼š</p>
<ul>
<li>è¿™äº›åº“åªè¯†åˆ« <code>&lt;img&gt;</code></li>
<li>ä¸ä¼šå¤„ç† <code>&lt;canvas&gt;</code> çš„å†…å®¹</li>
<li>ä¸ä¼šä¸»åŠ¨æŠŠ canvas è½¬æˆå›¾ç‰‡</li>
</ul>
<p>åœ¨å›¾è¡¨åœºæ™¯ä¸‹ï¼Œè¿™å‡ ä¹æ— æ³•ä½¿ç”¨ã€‚</p>
<hr/>
<h3 data-id="heading-6">3ï¸âƒ£ æœ€ç»ˆé€‰æ‹©ï¼šdocx</h3>
<p>æœ€åé€‰æ‹©äº† <code>docx</code>ï¼ˆdolanmiu/docxï¼‰ã€‚</p>
<p>åŸå› ï¼š</p>
<ul>
<li>åº•å±‚ç”ŸæˆçœŸå® docx ç»“æ„</li>
<li>å¯æ§æ€§å¼º</li>
<li>å¯è‡ªå®šä¹‰ ImageRun / Paragraph</li>
<li>å…¼å®¹æ€§æ›´å¥½</li>
</ul>
<p>ä½†åŒæ—¶ï¼š</p>
<blockquote>
<p>è‡ªå·±è¦è´Ÿè´£ HTML â†’ docx çš„æ˜ å°„é€»è¾‘ã€‚</p>
</blockquote>
<p>è¿™ä¹Ÿæ˜¯åé¢è¸©å‘çš„å¼€å§‹ã€‚</p>
<hr/>
<h2 data-id="heading-7">äºŒã€ä½¿ç”¨ docx æ—¶è¸©åˆ°çš„å‘</h2>
<hr/>
<h2 data-id="heading-8">å‘ 1ï¼šcanvas å›¾ç‰‡ç¬¬ä¸€æ¬¡å¯¼å‡ºæ˜¯ç©ºç™½</h2>
<p>ç°è±¡ï¼š</p>
<ul>
<li>é¡µé¢ä¸­ canvas æ¸²æŸ“æ­£å¸¸</li>
<li>ç¬¬ä¸€æ¬¡å¯¼å‡º Wordï¼Œå›¾ç‰‡æ˜¯ç©ºç™½</li>
<li>ç¬¬äºŒæ¬¡å¯¼å‡ºå´æ­£å¸¸</li>
</ul>
<h4 data-id="heading-9">åŸå› </h4>
<p><code>docx</code> éœ€è¦çš„æ˜¯ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title class_">Uint8Array</span>ï¼ˆäºŒè¿›åˆ¶å›¾ç‰‡æ•°æ®ï¼‰
</code></pre>
<p>è€Œ canvasï¼š</p>
<ul>
<li>æ˜¯ç»˜å›¾ä¸Šä¸‹æ–‡</li>
<li>ä¸æ˜¯å›¾ç‰‡èµ„æº</li>
<li>å¦‚æœåœ¨ clone ä¹‹åå†å»è¯»å–ï¼Œå¾ˆå¯èƒ½ä¸Šä¸‹æ–‡å·²ç»ä¸¢å¤±</li>
</ul>
<p>å°¤å…¶æ˜¯ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">element.<span class="hljs-built_in">cloneNode</span>(<span class="hljs-literal">true</span>)
</code></pre>
<p>å…‹éš†å‡ºæ¥çš„ canvasï¼š</p>
<blockquote>
<p>ä¸åŒ…å«ç»˜åˆ¶å†…å®¹</p>
</blockquote>
<h4 data-id="heading-10">æ­£ç¡®åšæ³•</h4>
<p>å¿…é¡»åœ¨å…‹éš† HTML ä¹‹å‰ï¼š</p>
<ol>
<li>éå†æ‰€æœ‰ canvas</li>
<li>è°ƒç”¨ <code>canvas.toDataURL()</code></li>
<li>ç¼“å­˜ç»“æœ</li>
<li>åœ¨ clone åæ›¿æ¢æˆ <code>&lt;img src="dataURL"&gt;</code></li>
</ol>
<p>æ ¸å¿ƒåŸåˆ™ï¼š</p>
<blockquote>
<p>canvas å…ˆè½¬å›¾ç‰‡ï¼Œå†å…‹éš† DOMã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-11">å‘ 2ï¼šImageRun è¢«åµŒå¥—åœ¨ Paragraph ä¸­ï¼Œå›¾ç‰‡ç›´æ¥æ¶ˆå¤±</h2>
<p>è¿™æ˜¯æœ€éšè”½ã€æœ€å‘çš„ä¸€ä¸ªé—®é¢˜ã€‚</p>
<p>ç°è±¡ï¼š</p>
<ul>
<li>å›¾ç‰‡æ•°æ®æ­£ç¡®</li>
<li>ä¸è·¨åŸŸ</li>
<li>äºŒè¿›åˆ¶æ­£å¸¸</li>
<li>ä½†å¯¼å‡º Word åå›¾ç‰‡æ¶ˆå¤±</li>
<li>æœ‰æ—¶ Office Word è¿˜ä¼šæç¤ºæ–‡ä»¶æœ‰é—®é¢˜</li>
</ul>
<p>æ‰“å°ç»“æ„åå‘ç°ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">Paragraph
  â””â”€ Paragraph
<span class="hljs-code">       â””â”€ ImageRun
</span></code></pre>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼š</p>
<blockquote>
<p>ImageRun å¤–é¢åŒ…äº†ä¸¤å±‚ Paragraphã€‚</p>
</blockquote>
<h4 data-id="heading-12">é—®é¢˜æœ¬è´¨</h4>
<p>åœ¨ docx ç»“æ„ä¸­ï¼š</p>
<ul>
<li><code>Paragraph</code> æ˜¯å—çº§å…ƒç´ </li>
<li><code>Paragraph</code> ä¸èƒ½åµŒå¥— <code>Paragraph</code></li>
<li><code>ImageRun</code> å¿…é¡»ç›´æ¥å­˜åœ¨äº Paragraph.children ä¸­</li>
</ul>
<p>éæ³•ç»“æ„è™½ç„¶å¯ä»¥è¢«åˆ›å»ºï¼Œä½†ï¼š</p>
<blockquote>
<p>Word ä¼šå¿½ç•¥æˆ–æŠ¥ç»“æ„é”™è¯¯ã€‚</p>
</blockquote>
<h4 data-id="heading-13">æ­£ç¡®ç»“æ„</h4>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-keyword">new</span> <span class="hljs-built_in">Paragraph</span>({
  children: [
    <span class="hljs-keyword">new</span> <span class="hljs-built_in">ImageRun</span>(...)
  ]
})
</code></pre>
<p>è€Œä¸æ˜¯ï¼š</p>
<pre><code class="hljs language-css" lang="css">new Paragraph({
  children: [
    new <span class="hljs-built_in">Paragraph</span>({
      children: [
        new <span class="hljs-built_in">ImageRun</span>(...)
      ]
    })
  ]
})
</code></pre>
<hr/>
<h2 data-id="heading-14">å‘ 3ï¼šHTML çš„ç»“æ„ â‰  docx çš„ç»“æ„</h2>
<p>åœ¨ Markdown æ¸²æŸ“åï¼ŒHTML å¾€å¾€æ˜¯è¿™æ ·ï¼š</p>
<pre><code class="hljs language-css" lang="css">&lt;<span class="hljs-selector-tag">div</span>&gt;
  &lt;<span class="hljs-selector-tag">p</span>&gt;
    æ–‡å­—
    &lt;<span class="hljs-selector-tag">img</span> /&gt;
  &lt;/<span class="hljs-selector-tag">p</span>&gt;
&lt;/<span class="hljs-selector-tag">div</span>&gt;
</code></pre>
<p>ä½† docx å¹¶ä¸æ˜¯ DOM æ ‘ç»“æ„ã€‚</p>
<p>docx çš„æ­£ç¡®æ¨¡å‹æ›´åƒæ˜¯ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-tag">Section</span>
 â”œâ”€ Paragraph
 â”œâ”€ Paragraph
 â”œâ”€ Paragraph
</code></pre>
<p>æ˜¯ä¸€ä¸ªæ‰å¹³ç»“æ„ã€‚</p>
<p>å› æ­¤æ­£ç¡®åšæ³•æ˜¯ï¼š</p>
<ul>
<li>æ–‡å­— â†’ ä¸€ä¸ª Paragraph</li>
<li>å›¾ç‰‡ â†’ ä¸€ä¸ª Paragraph</li>
<li>ä¿æŒé¡ºåº</li>
<li>ä¸å¼ºè¡Œè¿˜åŸ HTML åµŒå¥—</li>
</ul>
<p>ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-css" lang="css">&lt;<span class="hljs-selector-tag">p</span>&gt;hello &lt;<span class="hljs-selector-tag">img</span> /&gt; world&lt;/<span class="hljs-selector-tag">p</span>&gt;
</code></pre>
<p>åº”è½¬æ¢ä¸ºï¼š</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">Paragraph</span>("hello")
<span class="hljs-built_in">Paragraph</span>(Image)
<span class="hljs-built_in">Paragraph</span>("world")
</code></pre>
<p>è€Œä¸æ˜¯è¯•å›¾åœ¨ä¸€ä¸ª Paragraph é‡Œæ··æ’ã€‚</p>
<hr/>
<h2 data-id="heading-15">ä¸‰ã€æœ€ç»ˆæ€»ç»“</h2>
<p>åœ¨å‰ç«¯åš HTML â†’ Word å¯¼å‡ºæ—¶ï¼Œéœ€è¦æ³¨æ„ï¼š</p>
<h4 data-id="heading-16">æ’ä»¶å±‚é¢</h4>
<ul>
<li>html-docx-jsï¼šWPS å…¼å®¹æ€§é—®é¢˜</li>
<li>html-to-docxï¼šä¸æ”¯æŒ canvas</li>
<li>docxï¼šå¯æ§ä½†éœ€è¦è‡ªå·±å¤„ç†ç»“æ„</li>
</ul>
<h4 data-id="heading-17">ä½¿ç”¨ docx æ—¶å¿…é¡»æ³¨æ„</h4>
<ol>
<li>canvas å¿…é¡»æå‰è½¬ä¸ºå›¾ç‰‡</li>
<li>ä¸è¦åµŒå¥— Paragraph</li>
<li>ImageRun å¿…é¡»ç›´æ¥åœ¨ Paragraph.children ä¸­</li>
<li>ä¸è¦è¯•å›¾ 1:1 è¿˜åŸ HTML ç»“æ„</li>
</ol>
<hr/>
<h2 data-id="heading-18">å››ã€æ ¸å¿ƒç»éªŒ</h2>
<blockquote>
<p>Word æ–‡æ¡£ä¸æ˜¯æµè§ˆå™¨ã€‚<br/>
HTML çš„è¯­ä¹‰åµŒå¥—ä¸èƒ½ç›´æ¥æ˜ å°„åˆ° docxã€‚</p>
</blockquote>
<p>å½“ä½ å¼€å§‹ï¼š</p>
<ul>
<li>æŠŠç»“æ„æ‰å¹³åŒ–</li>
<li>å›¾ç‰‡ç‹¬ç«‹æˆæ®µ</li>
<li>ä¸»åŠ¨æ§åˆ¶æ–‡æ¡£ç»“æ„</li>
</ul>
<p>é—®é¢˜å°±ä¼šå˜å¾—æ¸…æ™°å¾ˆå¤šã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Flutter å¤šç¯å¢ƒè®¾è®¡æœ€ä½³å®è·µï¼šä»æ··ä¹±åˆ‡æ¢åˆ°å·¥ç¨‹åŒ–ç®¡ç†]]></title>    <link>https://juejin.cn/post/7605213691910602778</link>    <guid>https://juejin.cn/post/7605213691910602778</guid>    <pubDate>2026-02-11T08:48:54.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605213691910602778" data-draft-id="7605213691910586394" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Flutter å¤šç¯å¢ƒè®¾è®¡æœ€ä½³å®è·µï¼šä»æ··ä¹±åˆ‡æ¢åˆ°å·¥ç¨‹åŒ–ç®¡ç†"/> <meta itemprop="keywords" content="Flutter"/> <meta itemprop="datePublished" content="2026-02-11T08:48:54.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°å­©å­ä¸å¯ä»¥å–å¯ä¹1"/> <meta itemprop="url" content="https://juejin.cn/user/462260169356039"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Flutter å¤šç¯å¢ƒè®¾è®¡æœ€ä½³å®è·µï¼šä»æ··ä¹±åˆ‡æ¢åˆ°å·¥ç¨‹åŒ–ç®¡ç†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/462260169356039/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°å­©å­ä¸å¯ä»¥å–å¯ä¹1
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-11T08:48:54.000Z" title="Wed Feb 11 2026 08:48:54 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Flutter å¤šç¯å¢ƒè®¾è®¡æœ€ä½³å®è·µï¼šä»æ··ä¹±åˆ‡æ¢åˆ°å·¥ç¨‹åŒ–ç®¡ç†</h2>
<p>åœ¨å®é™… Flutter é¡¹ç›®ä¸­ï¼Œå‡ ä¹éƒ½ä¼šé‡åˆ°å¤šç¯å¢ƒé—®é¢˜ï¼š</p>
<ul>
<li>å¼€å‘ç¯å¢ƒï¼ˆdevï¼‰</li>
<li>æµ‹è¯•ç¯å¢ƒï¼ˆstaging / testï¼‰</li>
<li>ç”Ÿäº§ç¯å¢ƒï¼ˆprodï¼‰</li>
</ul>
<p>ç¯å¢ƒå·®å¼‚é€šå¸¸åŒ…æ‹¬ï¼š</p>
<ul>
<li>æ¥å£åœ°å€ä¸åŒ</li>
<li>æ—¥å¿—ç­‰çº§ä¸åŒ</li>
<li>åŠŸèƒ½å¼€å…³ä¸åŒ</li>
<li>ç¬¬ä¸‰æ–¹æœåŠ¡ key ä¸åŒ</li>
</ul>
<p>å¾ˆå¤šäººä¸€å¼€å§‹æ˜¯è¿™æ ·åšçš„ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">const <span class="hljs-attr">baseUrl</span> = <span class="hljs-string">"http://test-api.xxx.com"</span><span class="hljs-comment">;</span>
</code></pre>
<p>å‘ç‰ˆå‰æ‰‹åŠ¨æ”¹æˆï¼š</p>
<pre><code class="hljs language-ini" lang="ini">const <span class="hljs-attr">baseUrl</span> = <span class="hljs-string">"https://api.xxx.com"</span><span class="hljs-comment">;</span>
</code></pre>
<p>è¿™ç§æ–¹å¼çœ‹ä¼¼ç®€å•ï¼Œä½†å­˜åœ¨ä¸¥é‡é—®é¢˜ï¼š</p>
<ul>
<li>å®¹æ˜“è¯¯å‘æµ‹è¯•æ¥å£åˆ°ç”Ÿäº§</li>
<li>æ¯æ¬¡å‘ç‰ˆéƒ½è¦æ”¹ä»£ç </li>
<li>æ— æ³•è‡ªåŠ¨åŒ– CI/CD</li>
<li>æ— æ³•è§„èŒƒå›¢é˜Ÿåä½œ</li>
</ul>
<p>é‚£ä¹ˆ Flutter é¡¹ç›®ä¸­ï¼Œ<strong>æ­£ç¡®çš„å¤šç¯å¢ƒè®¾è®¡æ–¹å¼æ˜¯ä»€ä¹ˆï¼Ÿ</strong></p>
<p>æœ¬æ–‡å°†ç»™å‡ºä¸€å¥—å·¥ç¨‹åŒ–è§£å†³æ–¹æ¡ˆã€‚</p>
<hr/>
<h2 data-id="heading-1">ä¸€ã€ç¯å¢ƒè®¾è®¡çš„æ ¸å¿ƒæ€æƒ³</h2>
<p>Flutter å¤šç¯å¢ƒè®¾è®¡çš„æœ¬è´¨ä¸æ˜¯â€œåˆ‡æ¢åœ°å€â€ï¼Œè€Œæ˜¯ï¼š</p>
<blockquote>
<p>å°†ç¯å¢ƒæ§åˆ¶æƒä»ä»£ç ä¸­å‰¥ç¦»ï¼Œäº¤ç»™æ„å»ºæµç¨‹ã€‚</p>
</blockquote>
<p>å®Œæ•´é€»è¾‘å¯ä»¥æ‹†æˆä¸‰å±‚ï¼š</p>
<pre><code class="hljs">æ„å»ºå±‚ â†’ å†³å®šç¯å¢ƒ
é…ç½®å±‚ â†’ å­˜å‚¨å·®å¼‚
è®¿é—®å±‚ â†’ ç»Ÿä¸€ç®¡ç†
</code></pre>
<hr/>
<h2 data-id="heading-2">äºŒã€æ¨èæ–¹æ¡ˆï¼šå•å…¥å£ + dart-define</h2>
<p>å¾ˆå¤šæ–‡ç« ä¼šæ¨èä½¿ç”¨å¤šä¸ª <code>main.dart</code> æˆ– Android åŸç”Ÿ flavorã€‚</p>
<p>ä½†å¦‚æœä½ åªæ˜¯éœ€è¦ï¼š</p>
<ul>
<li>åˆ‡æ¢æ¥å£</li>
<li>åˆ‡æ¢ debug å¼€å…³</li>
<li>åˆ‡æ¢æ—¥å¿—ç­‰çº§</li>
</ul>
<p><strong>å®Œå…¨æ²¡å¿…è¦å¢åŠ åŸç”Ÿå¤æ‚åº¦ã€‚</strong></p>
<p>æ›´æ¨èï¼š</p>
<blockquote>
<p>å•å…¥å£ + dart-define + JSON é…ç½®æ–‡ä»¶</p>
</blockquote>
<hr/>
<h2 data-id="heading-3">ä¸‰ã€å®Œæ•´å®ç°æ­¥éª¤</h2>
<h3 data-id="heading-4">1ï¸âƒ£ åˆ›å»ºç¯å¢ƒé…ç½®æ–‡ä»¶</h3>
<pre><code class="hljs language-arduino" lang="arduino">assets/config/env/
  â”œâ”€â”€ dev.json
  â”œâ”€â”€ staging.json
  â””â”€â”€ prod.json
</code></pre>
<p>ç¤ºä¾‹ï¼š</p>
<h4 data-id="heading-5">dev.json</h4>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"baseUrl"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"http://localhost:3000"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"timeout"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">10000</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"debug"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h4 data-id="heading-6">prod.json</h4>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"baseUrl"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://api.xxx.com"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"timeout"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">8000</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"debug"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span>
<span class="hljs-punctuation">}</span>
</code></pre>
<hr/>
<h3 data-id="heading-7">2ï¸âƒ£ æ³¨å†Œ assets</h3>
<p>åœ¨ <code>pubspec.yaml</code> ä¸­ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">flutter:
  assets:
    - assets/config/env/dev.json
    - assets/config/env/staging.json
    - assets/config/env/prod.json
</code></pre>
<hr/>
<h3 data-id="heading-8">3ï¸âƒ£ å®šä¹‰é…ç½®æ¨¡å‹</h3>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">EnvConfig</span> </span>{
  <span class="hljs-keyword">final</span> <span class="hljs-built_in">String</span> baseUrl;
  <span class="hljs-keyword">final</span> <span class="hljs-built_in">int</span> timeout;
  <span class="hljs-keyword">final</span> <span class="hljs-built_in">bool</span> debug;

  EnvConfig({
    <span class="hljs-keyword">required</span> <span class="hljs-keyword">this</span>.baseUrl,
    <span class="hljs-keyword">required</span> <span class="hljs-keyword">this</span>.timeout,
    <span class="hljs-keyword">required</span> <span class="hljs-keyword">this</span>.debug,
  });

  <span class="hljs-keyword">factory</span> EnvConfig.fromJson(<span class="hljs-built_in">Map</span>&lt;<span class="hljs-built_in">String</span>, <span class="hljs-built_in">dynamic</span>&gt; json) {
    <span class="hljs-keyword">return</span> EnvConfig(
      baseUrl: json[<span class="hljs-string">'baseUrl'</span>],
      timeout: json[<span class="hljs-string">'timeout'</span>],
      debug: json[<span class="hljs-string">'debug'</span>],
    );
  }
}
</code></pre>
<hr/>
<h3 data-id="heading-9">4ï¸âƒ£ åˆ›å»ºç¯å¢ƒç®¡ç†ç±»</h3>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">import</span> <span class="hljs-string">'dart:convert'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'package:flutter/services.dart'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'env_config.dart'</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Env</span> </span>{
  <span class="hljs-keyword">static</span> <span class="hljs-keyword">late</span> EnvConfig _config;

  <span class="hljs-keyword">static</span> Future&lt;<span class="hljs-keyword">void</span>&gt; init() <span class="hljs-keyword">async</span> {
    <span class="hljs-keyword">const</span> <span class="hljs-built_in">String</span> flavor =
        <span class="hljs-built_in">String</span>.fromEnvironment(<span class="hljs-string">'FLAVOR'</span>, defaultValue: <span class="hljs-string">'dev'</span>);

    <span class="hljs-keyword">final</span> path = <span class="hljs-string">'assets/config/env/<span class="hljs-subst">$flavor</span>.json'</span>;

    <span class="hljs-keyword">final</span> jsonStr = <span class="hljs-keyword">await</span> rootBundle.loadString(path);
    <span class="hljs-keyword">final</span> jsonMap = json.decode(jsonStr);

    _config = EnvConfig.fromJson(jsonMap);
  }

  <span class="hljs-keyword">static</span> <span class="hljs-built_in">String</span> <span class="hljs-keyword">get</span> baseUrl =&gt; _config.baseUrl;
  <span class="hljs-keyword">static</span> <span class="hljs-built_in">int</span> <span class="hljs-keyword">get</span> timeout =&gt; _config.timeout;
  <span class="hljs-keyword">static</span> <span class="hljs-built_in">bool</span> <span class="hljs-keyword">get</span> debug =&gt; _config.debug;
}
</code></pre>
<hr/>
<h3 data-id="heading-10">5ï¸âƒ£ åœ¨ main.dart åˆå§‹åŒ–</h3>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">main</span>() <span class="hljs-keyword">async</span></span> {
  WidgetsFlutterBinding.ensureInitialized();
  <span class="hljs-keyword">await</span> Env.<span class="hljs-keyword">init</span>();
  runApp(<span class="hljs-function"><span class="hljs-keyword">const</span> <span class="hljs-title">MyApp</span>())</span>;
}
</code></pre>
<hr/>
<h3 data-id="heading-11">6ï¸âƒ£ æ„å»ºæ—¶åˆ‡æ¢ç¯å¢ƒ</h3>
<p>å¼€å‘ç¯å¢ƒï¼š</p>
<pre><code class="hljs language-ini" lang="ini">flutter run <span class="hljs-attr">--dart-define</span>=FLAVOR=dev
</code></pre>
<p>æµ‹è¯•ç¯å¢ƒï¼š</p>
<pre><code class="hljs language-ini" lang="ini">flutter run <span class="hljs-attr">--dart-define</span>=FLAVOR=staging
</code></pre>
<p>ç”Ÿäº§ç¯å¢ƒï¼š</p>
<pre><code class="hljs language-ini" lang="ini">flutter build apk <span class="hljs-attr">--dart-define</span>=FLAVOR=prod
</code></pre>
<hr/>
<h2 data-id="heading-12">å››ã€ä¸ºä»€ä¹ˆæ¨è dart-defineï¼Ÿ</h2>
<p><code>String.fromEnvironment()</code> æ˜¯ï¼š</p>
<blockquote>
<p>ç¼–è¯‘æœŸå¸¸é‡</p>
</blockquote>
<p>æ„å‘³ç€ï¼š</p>
<ul>
<li>æ„å»ºæ—¶å†™æ­»</li>
<li>è¿è¡Œæ—¶ä¸èƒ½ä¿®æ”¹</li>
<li>æ— é¢å¤–æ€§èƒ½æŸè€—</li>
<li>éè¿è¡Œæ—¶åˆ¤æ–­</li>
</ul>
<p>è¿™æ˜¯ä¸€ç§å·¥ç¨‹åŒ–è®¾è®¡ï¼Œè€Œä¸æ˜¯ä¸šåŠ¡å±‚ if åˆ¤æ–­ã€‚</p>
<hr/>
<h2 data-id="heading-13">äº”ã€æ–¹æ¡ˆå¯¹æ¯”</h2>



































<table><thead><tr><th>æ–¹æ¡ˆ</th><th>å•å…¥å£ + dart-define</th><th>å¤š main + åŸç”Ÿ flavor</th></tr></thead><tbody><tr><td>ç»´æŠ¤æˆæœ¬</td><td>ä½</td><td>é«˜</td></tr><tr><td>åŸç”Ÿé…ç½®</td><td>ä¸éœ€è¦</td><td>éœ€è¦</td></tr><tr><td>CI/CD</td><td>ç®€å•</td><td>å¤æ‚</td></tr><tr><td>å¤šåŒ…åæ”¯æŒ</td><td>ä¸æ”¯æŒ</td><td>æ”¯æŒ</td></tr><tr><td>å¤šå›¾æ ‡æ”¯æŒ</td><td>ä¸æ”¯æŒ</td><td>æ”¯æŒ</td></tr></tbody></table>
<p>ç»“è®ºï¼š</p>
<ul>
<li>åªåˆ‡æ¥å£ â†’ ç”¨ dart-define</li>
<li>å¤šåŒ…åå¤šå›¾æ ‡ â†’ ç”¨åŸç”Ÿ flavor</li>
</ul>
<hr/>
<h2 data-id="heading-14">å…­ã€å·¥ç¨‹åŒ–åŸåˆ™æ€»ç»“</h2>
<ol>
<li>ç¯å¢ƒ â‰  ä¸šåŠ¡é€»è¾‘</li>
<li>ç¯å¢ƒå·®å¼‚æ–‡ä»¶åŒ–</li>
<li>æ„å»ºæœŸå†³å®šç¯å¢ƒ</li>
<li>è¿è¡ŒæœŸåªè¯»å–é…ç½®</li>
<li>ç»Ÿä¸€ Env ç®¡ç†è®¿é—®</li>
</ol>
<hr/>
<h2 data-id="heading-15">ä¸ƒã€å®‰å…¨æé†’</h2>
<p>ä¸è¦åœ¨ JSON ä¸­å­˜å‚¨ï¼š</p>
<ul>
<li>ç§é’¥</li>
<li>æ”¯ä»˜å¯†é’¥</li>
<li>ç¬¬ä¸‰æ–¹ secret</li>
</ul>
<p>Flutter åŒ…æ˜¯å¯åç¼–è¯‘çš„ã€‚</p>
<hr/>
<h2 data-id="heading-16">å…«ã€è¿›é˜¶æ€è€ƒ</h2>
<p>å½“ä½ ç†è§£äº†è¿™å¥—è®¾è®¡åï¼Œå¯ä»¥ç»§ç»­æ¼”è¿›ï¼š</p>
<ul>
<li>ä¸ CI/CD é›†æˆè‡ªåŠ¨æ„å»º</li>
<li>æ”¯æŒç°åº¦å‘å¸ƒ</li>
<li>æ”¯æŒè¿œç¨‹åŠ¨æ€é…ç½®</li>
<li>ä¸ Android flavor ç»“åˆå®ç°å¤šåŒ…å</li>
</ul>
<hr/>
<h2 data-id="heading-17">ç»“è¯­</h2>
<p>Flutter å¤šç¯å¢ƒè®¾è®¡çš„æ ¸å¿ƒä¸æ˜¯åˆ‡æ¢åœ°å€ï¼Œ</p>
<p>è€Œæ˜¯ï¼š</p>
<blockquote>
<p>å°†ç¯å¢ƒæ§åˆ¶æƒä»ä»£ç è½¬ç§»åˆ°æ„å»ºæµç¨‹ã€‚</p>
</blockquote>
<p>å½“ä½ å¼€å§‹ä»â€œå†™ä»£ç â€è½¬å‘â€œè®¾è®¡å·¥ç¨‹ç»“æ„â€ï¼Œ<br/>
ä½ çš„æ€ç»´å±‚çº§å°±å·²ç»å‘ç”Ÿå˜åŒ–ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Markdownå¸¸ç”¨æ ‡å‡†è¯­æ³•]]></title>    <link>https://juejin.cn/post/7605140481488830505</link>    <guid>https://juejin.cn/post/7605140481488830505</guid>    <pubDate>2026-02-11T08:41:59.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605140481488830505" data-draft-id="7605214360084234276" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Markdownå¸¸ç”¨æ ‡å‡†è¯­æ³•"/> <meta itemprop="keywords" content="ä»£ç è§„èŒƒ"/> <meta itemprop="datePublished" content="2026-02-11T08:41:59.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Tinghui"/> <meta itemprop="url" content="https://juejin.cn/user/3968587001244187"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Markdownå¸¸ç”¨æ ‡å‡†è¯­æ³•
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3968587001244187/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Tinghui
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-11T08:41:59.000Z" title="Wed Feb 11 2026 08:41:59 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>Markdown æ˜¯è½»é‡çº§æ ‡è®°è¯­è¨€ï¼Œè¯­æ³•ç®€å•ä¸”è·¨å¹³å°é€šç”¨ï¼ˆå‡ ä¹æ‰€æœ‰ç¬”è®° / æ–‡æ¡£å·¥å…·éƒ½æ”¯æŒï¼‰ï¼Œä¸”æ˜¯ç°åœ¨AIæç¤ºè¯çš„ä¸»æµæ ¼å¼ï¼Œä»¥ä¸‹æ˜¯<strong>é€šç”¨æ ‡å‡†è¯­æ³•</strong>ï¼ˆä¸å«å„å¹³å°æ‰©å±•è¯­æ³•ï¼‰ï¼š</p>
<hr/>
<h3 data-id="heading-0">1. æ ‡é¢˜</h3>
<p>ç”¨<code>#</code>è¡¨ç¤ºæ ‡é¢˜çº§åˆ«ï¼Œ<code>#</code>æ•°é‡å¯¹åº” 1-6 çº§æ ‡é¢˜ï¼Œ<code>#</code>å’Œæ–‡å­—ä¹‹é—´å¿…é¡»åŠ <strong>ç©ºæ ¼</strong>ï¼ˆæ–°æ‰‹æ˜“å‡ºé”™ï¼‰ã€‚</p>
<p>markdown</p>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_"># </span><span class="bash">ä¸€çº§æ ‡é¢˜ï¼ˆæœ€å¤§ï¼‰</span>
<span class="hljs-meta prompt_">#</span><span class="bash"><span class="hljs-comment"># äºŒçº§æ ‡é¢˜</span></span>
<span class="hljs-meta prompt_">#</span><span class="bash"><span class="hljs-comment">## ä¸‰çº§æ ‡é¢˜</span></span>
<span class="hljs-meta prompt_">#</span><span class="bash"><span class="hljs-comment">### å››çº§æ ‡é¢˜</span></span>
<span class="hljs-meta prompt_">#</span><span class="bash"><span class="hljs-comment">#### äº”çº§æ ‡é¢˜</span></span>
<span class="hljs-meta prompt_">#</span><span class="bash"><span class="hljs-comment">##### å…­çº§æ ‡é¢˜ï¼ˆæœ€å°ï¼‰</span></span>
</code></pre>
<p>æ—¥å¸¸ä½¿ç”¨ä¸­ 1-3 çº§æ ‡é¢˜æœ€å¸¸ç”¨ï¼Œå…­çº§æ ‡é¢˜å‡ ä¹å¾ˆå°‘ç”¨åˆ°ã€‚</p>
<h3 data-id="heading-1">2. æ–‡æœ¬å¼ºè°ƒï¼ˆç²—ä½“ / æ–œä½“ / åˆ é™¤çº¿ï¼‰</h3>
<p>è¡¨æ ¼</p>



































<table><thead><tr><th>æ•ˆæœ</th><th>è¯­æ³•</th><th>ç¤ºä¾‹</th><th>æ¸²æŸ“æ•ˆæœ</th></tr></thead><tbody><tr><td>ç²—ä½“</td><td><code>**æ–‡å­—**</code></td><td><code>**é‡è¦å†…å®¹**</code></td><td><strong>é‡è¦å†…å®¹</strong></td></tr><tr><td>æ–œä½“</td><td><code>*æ–‡å­—*</code></td><td><code>*å¤‡æ³¨ä¿¡æ¯*</code></td><td><em>å¤‡æ³¨ä¿¡æ¯</em></td></tr><tr><td>ç²—æ–œä½“</td><td><code>***æ–‡å­—***</code></td><td><code>***æ ¸å¿ƒé‡ç‚¹***</code></td><td><em><strong>æ ¸å¿ƒé‡ç‚¹</strong></em></td></tr><tr><td>åˆ é™¤çº¿</td><td><code>~~æ–‡å­—~~</code></td><td><code>~~ä½œåºŸå†…å®¹~~</code></td><td><del>ä½œåºŸå†…å®¹</del></td></tr></tbody></table>
<h3 data-id="heading-2">3. åˆ—è¡¨ï¼ˆæ— åº / æœ‰åº / åµŒå¥—ï¼‰</h3>
<h4 data-id="heading-3">æ— åºåˆ—è¡¨</h4>
<p>ç”¨<code>-</code>/<code>+</code>/<code>*</code>å¼€å¤´ï¼ˆé€‰ä¸€ç§å³å¯ï¼‰ï¼Œç¬¦å·ååŠ ç©ºæ ¼ï¼š</p>
<p>markdown</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-bullet">-</span> åˆ—è¡¨é¡¹1
<span class="hljs-bullet">-</span> åˆ—è¡¨é¡¹2
<span class="hljs-bullet">  -</span> åµŒå¥—å­é¡¹ï¼ˆç¼©è¿›2ä¸ªç©ºæ ¼ï¼‰
<span class="hljs-bullet">+</span> å¦ä¸€ç§æ— åºåˆ—è¡¨
</code></pre>
<h4 data-id="heading-4">æœ‰åºåˆ—è¡¨</h4>
<p>ç”¨<code>æ•°å­—.</code>å¼€å¤´ï¼Œç¬¦å·ååŠ ç©ºæ ¼ï¼š</p>
<p>markdown</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-bullet">1.</span> ç¬¬ä¸€æ­¥
<span class="hljs-bullet">2.</span> ç¬¬äºŒæ­¥
<span class="hljs-bullet">   1.</span> åµŒå¥—å­æ­¥éª¤
<span class="hljs-bullet">3.</span> ç¬¬ä¸‰æ­¥
</code></pre>
<h3 data-id="heading-5">4. é“¾æ¥ä¸å›¾ç‰‡</h3>
<h4 data-id="heading-6">é“¾æ¥</h4>
<ul>
<li>
<p>è¡Œå†…é“¾æ¥ï¼ˆæœ€å¸¸ç”¨ï¼‰ï¼š<code>[é“¾æ¥æ–‡å­—](é“¾æ¥åœ°å€ "å¯é€‰æ ‡é¢˜")</code></p>
<p>markdown</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-attr">[ç™¾åº¦]</span>(<span class="hljs-attribute">https</span>:<span class="hljs-comment">//www.baidu.com "ç™¾åº¦é¦–é¡µ")</span>
</code></pre>
</li>
<li>
<p>é”šç‚¹é“¾æ¥ï¼ˆè·³è½¬åˆ°æ–‡æ¡£å†…ä½ç½®ï¼‰ï¼š<code>[å›åˆ°é¡¶éƒ¨](#ä¸€çº§æ ‡é¢˜)</code></p>
</li>
</ul>
<h4 data-id="heading-7">å›¾ç‰‡</h4>
<p>è¯­æ³•å’Œé“¾æ¥ç±»ä¼¼ï¼Œåªæ˜¯å¼€å¤´å¤šä¸€ä¸ª<code>!</code>ï¼š</p>
<p>markdown</p>
<pre><code class="hljs language-less" lang="less">!<span class="hljs-selector-attr">[å›¾ç‰‡æ›¿ä»£æ–‡å­—]</span>(å›¾ç‰‡URL <span class="hljs-string">"å¯é€‰æ ‡é¢˜"</span>)
# æ›¿ä»£æ–‡å­—ï¼šå›¾ç‰‡åŠ è½½å¤±è´¥æ—¶æ˜¾ç¤ºçš„æ–‡å­—ï¼›æ ‡é¢˜ï¼šé¼ æ ‡æ‚¬åœæ—¶æ˜¾ç¤º
!<span class="hljs-selector-attr">[ç¤ºä¾‹å›¾]</span>(<span class="hljs-attribute">https</span>:<span class="hljs-comment">//example.com/img.jpg "è¿™æ˜¯ä¸€å¼ ç¤ºä¾‹å›¾")</span>
</code></pre>
<h3 data-id="heading-8">5. ä»£ç ï¼ˆè¡Œå†… / å—çº§ï¼‰</h3>
<h4 data-id="heading-9">è¡Œå†…ä»£ç </h4>
<p>ç”¨å•ä¸ªåå¼•å·<code>`</code>åŒ…è£¹ï¼Œé€‚åˆæ ‡æ³¨å°‘é‡ä»£ç  / å‘½ä»¤ï¼š</p>
<p>markdown</p>
<pre><code class="hljs language-css" lang="css">æ‰§è¡Œ`python <span class="hljs-selector-tag">main</span><span class="hljs-selector-class">.py</span>`å‘½ä»¤å¯åŠ¨ç¨‹åº
</code></pre>
<h4 data-id="heading-10">ä»£ç å—</h4>
<p>ç”¨ä¸‰ä¸ªåå¼•å· ``` åŒ…è£¹ï¼ŒæŒ‡å®šè¯­è¨€å¯å®ç°è¯­æ³•é«˜äº®ï¼š</p>
<p>markdown</p>
<pre><code class="hljs language-scss" lang="scss">```python
# è¿™æ˜¯Pythonä»£ç ç¤ºä¾‹
def <span class="hljs-built_in">hello</span>():
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"Hello Markdown!"</span>)
<span class="hljs-built_in">hello</span>()
</code></pre>
<p>plaintext</p>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_">
#</span><span class="bash"><span class="hljs-comment">## 6. å¼•ç”¨</span></span>
ç”¨`&gt;`å¼€å¤´ï¼ŒåµŒå¥—å¼•ç”¨åŠ å¤šä¸ª`&gt;`ï¼š
```markdown
<span class="hljs-meta prompt_">&gt; </span><span class="bash">ä¸€çº§å¼•ç”¨ï¼ˆæ¯”å¦‚å¼•ç”¨ä»–äººè§‚ç‚¹ï¼‰</span>
<span class="hljs-meta prompt_">&gt;</span><span class="bash">&gt; äºŒçº§åµŒå¥—å¼•ç”¨</span>
<span class="hljs-meta prompt_">&gt;</span><span class="bash">&gt;&gt; ä¸‰çº§åµŒå¥—å¼•ç”¨</span>
</code></pre>
<h3 data-id="heading-11">7. åˆ†å‰²çº¿</h3>
<p>ç”¨è¿ç»­çš„ 3 ä¸ªåŠä»¥ä¸Š<code>-</code>/<code>*</code>/<code>_</code>ï¼ˆå•ç‹¬ä¸€è¡Œï¼Œå‰åç©ºè¡Œï¼‰ï¼š</p>
<p>markdown</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-meta">---</span>
<span class="hljs-string">***</span>
<span class="hljs-string">___</span>
</code></pre>
<p>âš ï¸ æ³¨æ„ï¼šä¸è¦æ··å†™ï¼ˆæ¯”å¦‚<code>-*-</code>ï¼‰ï¼Œä¿æŒç»Ÿä¸€æ›´è§„èŒƒã€‚</p>
<h3 data-id="heading-12">8. è¡¨æ ¼</h3>
<p>ç”¨<code>|</code>åˆ†éš”åˆ—ï¼Œç¬¬äºŒè¡Œç”¨<code>-</code>åˆ†éš”è¡¨å¤´å’Œå†…å®¹ï¼Œ<code>:</code>æ§åˆ¶å¯¹é½ï¼š</p>
<p>markdown</p>
<pre><code class="hljs language-ruby" lang="ruby">|<span class="hljs-params"> å§“å </span>| å¹´é¾„ |<span class="hljs-params"> åŸå¸‚ </span>|
|<span class="hljs-params"> :--- </span>| <span class="hljs-symbol">:--</span>: |<span class="hljs-params"> ---: </span>|
|<span class="hljs-params"> å¼ ä¸‰ </span>| <span class="hljs-number">20</span>   |<span class="hljs-params"> åŒ—äº¬ </span>|
|<span class="hljs-params"> æå›› </span>| <span class="hljs-number">25</span>   |<span class="hljs-params"> ä¸Šæµ· </span>|
<span class="hljs-comment"># å¯¹é½è§„åˆ™ï¼š:---ï¼ˆå·¦å¯¹é½ï¼‰ã€:--:ï¼ˆå±…ä¸­ï¼‰ã€---:ï¼ˆå³å¯¹é½ï¼‰</span>
</code></pre>
<h3 data-id="heading-13">9. è½¬ä¹‰å­—ç¬¦</h3>
<p>å¦‚æœæƒ³æ˜¾ç¤º Markdown ç‰¹æ®Šç¬¦å·ï¼ˆæ¯”å¦‚<code>#</code>/<code>*</code>/<code>[ ]</code>ï¼‰ï¼Œç”¨``è½¬ä¹‰ï¼š</p>
<p>markdown</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># è¿™ä¸æ˜¯æ ‡é¢˜ï¼ˆåŸæœ¬#æ˜¯æ ‡é¢˜ç¬¦å·ï¼Œè½¬ä¹‰åä»…æ˜¾ç¤º#ï¼‰</span>
<span class="hljs-bullet">*</span> è¿™ä¸æ˜¯æ–œä½“
</code></pre>
<hr/>
<h3 data-id="heading-14">æ€»ç»“</h3>
<ol>
<li>Markdown æ ¸å¿ƒæ˜¯ â€œç¬¦å· + ç©ºæ ¼â€ çš„ç»„åˆï¼Œ<strong>ç¬¦å·ä¸æ–‡å­—é—´çš„ç©ºæ ¼</strong>æ˜¯æ–°æ‰‹æœ€å®¹æ˜“å¿½ç•¥çš„å…³é”®ï¼›</li>
<li>å¸¸ç”¨è¯­æ³•ä¼˜å…ˆæŒæ¡ï¼šæ ‡é¢˜ã€ç²—ä½“ / æ–œä½“ã€åˆ—è¡¨ã€ä»£ç å—ã€é“¾æ¥ï¼Œèƒ½æ»¡è¶³ 80% çš„æ—¥å¸¸ä½¿ç”¨åœºæ™¯ï¼›</li>
<li>æ ‡å‡†è¯­æ³•è·¨å¹³å°é€šç”¨ï¼ˆå¦‚ Typoraã€VS Codeã€GitHubï¼‰ï¼Œæ‰©å±•è¯­æ³•ï¼ˆå¦‚ä»»åŠ¡åˆ—è¡¨ï¼‰éœ€çœ‹ç¼–è¾‘å™¨æ”¯æŒã€‚</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åµŒå…¥å¼ä¹‹Ubuntu22.04æ„å»ºXMOS]]></title>    <link>https://juejin.cn/post/7605140481488846889</link>    <guid>https://juejin.cn/post/7605140481488846889</guid>    <pubDate>2026-02-11T08:42:24.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605140481488846889" data-draft-id="7604793276907569215" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åµŒå…¥å¼ä¹‹Ubuntu22.04æ„å»ºXMOS"/> <meta itemprop="keywords" content="åµŒå…¥å¼"/> <meta itemprop="datePublished" content="2026-02-11T08:42:24.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Kç¥"/> <meta itemprop="url" content="https://juejin.cn/user/160945808873534"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åµŒå…¥å¼ä¹‹Ubuntu22.04æ„å»ºXMOS
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/160945808873534/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Kç¥
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-11T08:42:24.000Z" title="Wed Feb 11 2026 08:42:24 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä½ å¥½å‘€ï¼Œæˆ‘çš„è€æœ‹å‹ï¼æˆ‘æ˜¯è€å¯‡ï¼Œè·Ÿæˆ‘ä¸€èµ·å­¦ä¹ æ„å»ºXMOS</p>
<p>åŸºäºå‘½ä»¤æ„å»ºï¼ŒèŠ±äº†å‡ å¤©æ—¶é—´æ‰å®Œæˆæ„å»ºï¼Œå¸Œæœ›å¯¹ä½ æœ‰æ‰€å¸®åŠ©ã€‚</p>
<p>XMOSåœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.xmos.com" target="_blank" title="https://www.xmos.com" ref="nofollow noopener noreferrer">www.xmos.com</a></p>
<p>XMOSæ˜¯ä¸€å®¶è‹±å›½çš„åŠå¯¼ä½“å…¬å¸ï¼Œè‡´åŠ›äºå¸®åŠ©äººä»¬æ„å»ºä»»ä½•äº‹ç‰©ã€‚XCOREÂ®èŠ¯ç‰‡æ˜¯ç”Ÿæˆå¼ç³»ç»Ÿçº§èŠ¯ç‰‡ï¼ˆGenSoCï¼‰å¹³å°â€”â€”é«˜æ€§èƒ½ã€é«˜ç¡®å®šæ€§çš„å¤šå¤„ç†å¹³å°ï¼Œå¯æ— é™é‡æ„ï¼Œåœ¨å•ä¸ªå™¨ä»¶ä¸­é›†æˆæ§åˆ¶ã€I/Oã€DSPå’ŒAIç­‰åŠŸèƒ½ã€‚</p>
<p><strong>æˆ‘ä»¬ä¸»è¦æ˜¯ç”¨äºå¯¹å£°éŸ³çš„å‰ç½®å¤„ç†ï¼Œæ¯”å¦‚é™å™ªç­‰ç­‰ã€‚</strong></p>
<h6 data-id="heading-0">åˆå§‹åŒ–å®‰è£…æ’ä»¶</h6>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_"># </span><span class="bash">åˆ‡æ¢rootç”¨æˆ·</span>
su root
<span class="hljs-meta prompt_">
# </span><span class="bash">å®‰è£…SSH</span>
apt install openssh-server
<span class="hljs-meta prompt_">
# </span><span class="bash">å¼€æœºå¯ç”¨ssh</span>
systemctl enable ssh
<span class="hljs-meta prompt_">
# </span><span class="bash">å®‰è£…gccå’Œcmake</span>
apt update
apt install build-essential
apt install cmake
<span class="hljs-meta prompt_">
# </span><span class="bash">æŸ¥çœ‹gccç‰ˆæœ¬</span>
gcc --version
<span class="hljs-meta prompt_">
# </span><span class="bash">å®‰è£…g++</span>
apt install g++
<span class="hljs-meta prompt_">
# </span><span class="bash">æŸ¥çœ‹g++ç‰ˆæœ¬</span>
g++ --version
<span class="hljs-meta prompt_">
# </span><span class="bash">å®‰è£…pkg-config</span>
apt update
apt install pkg-config
<span class="hljs-meta prompt_">
# </span><span class="bash">æŸ¥çœ‹pkg-config</span>
pkg-config --version
<span class="hljs-meta prompt_">
# </span><span class="bash">å®‰è£…libusb</span>
apt install libusb-1.0-0-dev
<span class="hljs-meta prompt_">
# </span><span class="bash">æŸ¥çœ‹libusbç‰ˆæœ¬</span>
pkg-config --modversion libusb-1.0
</code></pre>
<h2 data-id="heading-1">å®‰è£…XMOS</h2>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_"># </span><span class="bash">åˆ›å»ºXMOSç›®å½•</span>
mkdir -p /home/a/app/xmos
<span class="hljs-meta prompt_">
# </span><span class="bash">è¿›å…¥ç›®å½•</span>
cd /home/a/xmos
<span class="hljs-meta prompt_">
# </span><span class="bash">ä¸‹è½½XMOS Tools</span>
<span class="hljs-meta prompt_"># </span><span class="bash">æ–‡æ¡£åœ°å€ï¼šhttps://www.xmos.com/xtc-install-guide</span>
wget https://www.xmos.com/file/tools-15-linux-64?version=latest
<span class="hljs-meta prompt_">
# </span><span class="bash">å®‰è£…XMOS Tools</span>
<span class="hljs-meta prompt_"># </span><span class="bash">å®‰è£…ç›®å½•ï¼š/home/a/XMOS/..</span>
tar -xf tools-15-linux-15-3-1.tgz -C ~
<span class="hljs-meta prompt_">
# </span><span class="bash">æ·»åŠ ç¯å¢ƒå˜é‡ã€æ ¹æ®å®é™…æƒ…å†µè€Œå®šï¼Œæ‰¾åˆ°ä½ å®‰è£…XMOSçš„è·¯å¾„ã€‘</span>
<span class="hljs-meta prompt_"># </span><span class="bash">æ¯ä¸€æ¬¡éƒ½éœ€è¦æ‰‹åŠ¨è¿™æ ·æ‰§è¡Œï¼Œä¸ç„¶ä¼šå‘Šè¯‰ä½ æ‰¾ä¸åˆ°xccå‘½ä»¤</span>
cd /home/a/XMOS/XTC/15.3.1
source SetEnv
<span class="hljs-meta prompt_">
# </span><span class="bash">æŸ¥çœ‹xccç‰ˆæœ¬ï¼Œæœ‰ç»“æœè¾“å‡ºå°±æ˜¯å®‰è£…æˆåŠŸ</span>
xcc --version
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c33f1f1a85564ab299053d3349d3d1a2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgS-elng==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771404143&amp;x-signature=W%2BaO0xfGV22BkD3SOUPWT9zYVso%3D" alt="image.png" loading="lazy"/></p>
<h6 data-id="heading-2">å®‰è£…ç›®æ ‡æ¿å’ŒxTAG</h6>
<p>ä½¿ç”¨ä¸¤æ ¹USBçº¿è¿æ¥å¼€å‘ç‰ˆå³å¯
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f48d2262add641f099c0df1612d07eda~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgS-elng==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771404143&amp;x-signature=bxF5ADw5l1qM77jK3WwevZQE07s%3D" alt="25c8d85d25481dc59981a2831758bc89.jpg" loading="lazy"/></p>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_"># </span><span class="bash">åˆ‡æ¢aç”¨æˆ·</span>
su a
<span class="hljs-meta prompt_"># </span><span class="bash">è¿›å…¥XMOSè„šæœ¬ç›®å½•</span>
cd /home/a/XMOS/XTC/15.3.1/scripts
<span class="hljs-meta prompt_"># </span><span class="bash">å®‰è£…</span>
sudo ./setup_xmos_devices.sh
<span class="hljs-meta prompt_"># </span><span class="bash">æ£€æŸ¥</span>
./check_xmos_devices.sh
<span class="hljs-meta prompt_"># </span><span class="bash">é‡å¯è®¾å¤‡ï¼ŒæŸ¥çœ‹è¿è¡ŒçŠ¶æ€</span>
xrun -l
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/26cf78597da045ccbb6a453f245bae7c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgS-elng==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771404143&amp;x-signature=uoaJ6xDl1m2qPAcD0ofMAsQnlTQ%3D" alt="image.png" loading="lazy"/></p>
<h6 data-id="heading-3">è¿è¡Œä¾‹å­</h6>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_"># </span><span class="bash">åˆ‡æ¢rootç”¨æˆ·</span>
su root
<span class="hljs-meta prompt_">
# </span><span class="bash">è¿›å…¥xmosç›®å½•</span>
cd /home/a/xmos
<span class="hljs-meta prompt_">
# </span><span class="bash">å®‰è£…git</span>
apt install git
<span class="hljs-meta prompt_">
# </span><span class="bash">æ‹‰å–æºç ã€éœ€è¦é…ç½®SSHå¯†é’¥ã€‘</span>
git clone --recurse-submodules git@github.com:xmos/sln_voice.git
<span class="hljs-meta prompt_">
# </span><span class="bash">æŸ¥çœ‹/home/a/app/xmos/sln_voice/examples/ffva/READ.rts</span>
<span class="hljs-meta prompt_"># </span><span class="bash">æŸ¥çœ‹/home/a/app/xmos/sln_voice/examples/ffva/READ.rts</span>
<span class="hljs-meta prompt_"># </span><span class="bash">æŸ¥çœ‹/home/a/app/xmos/sln_voice/examples/ffva/READ.rts</span>
<span class="hljs-meta prompt_">
# </span><span class="bash">å®‰è£… venv</span>
sudo apt install python3-venv python3-full
<span class="hljs-meta prompt_">
# </span><span class="bash">åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ</span>
python3 -m venv venv
<span class="hljs-meta prompt_">
# </span><span class="bash">æ¿€æ´»</span>
source venv/bin/activate
<span class="hljs-meta prompt_">
# </span><span class="bash">å®‰è£…ninja</span>
pip install ninja
<span class="hljs-meta prompt_">
# </span><span class="bash">æ–°å¢ç¯å¢ƒå˜é‡</span>
SET "XMOS_TOOL_PATH=/home/a/XMOS/XTC/15.3.1"
<span class="hljs-meta prompt_">
# </span><span class="bash">æ„å»º/opt/xmos/bin</span>
cmake -B build_host
cd build_host
make install -j
<span class="hljs-meta prompt_">
# </span><span class="bash">å›åˆ°ä¸Šçº§ç›®å½•</span>
cd ..
<span class="hljs-meta prompt_">
# </span><span class="bash">æ„å»ºå›ºä»¶</span>
pip install -r requirements.txt
cmake -B build --toolchain xmos_cmake_toolchain/xs3a.cmake
cd build
make example_ffva_ua_adec_altarch -j
make example_ffva_int_fixed_delay -j
make example_ffva_int_cyberon_fixed_delay -j
<span class="hljs-meta prompt_">
# </span><span class="bash">çƒ§å½•å›ºä»¶</span>
xflash --factory example_ffva_int_cyberon_fixed_delay.xe
xflash --factory example_ffva_int_fixed_delay.xe
xflash --factory example_ffva_ua_adec_altarch.xe
<span class="hljs-meta prompt_">
# </span><span class="bash">è¿è¡Œå›ºä»¶</span>
xrun --xscope example_ffva_ua_adec_altarch.xe
xrun --xscope example_ffva_int_fixed_delay.xe
xrun --xscope example_ffva_int_cyberon_fixed_delay.xe
<span class="hljs-meta prompt_">
# </span><span class="bash">xgdbè°ƒè¯•å›ºä»¶</span>
xgdb -ex "conn --xscope" -ex "r" example_ffva_ua_adec_altarch.xe
xgdb -ex "conn --xscope" -ex "r" example_ffva_int_fixed_delay.xe
xgdb -ex "conn --xscope" -ex "r" example_ffva_int_cyberon_fixed_delay.xe
</code></pre>
<p>æˆ‘æ˜¯è€å¯‡ï¼Œæˆ‘ä»¬ä¸‹æ¬¡å†è§å•¦ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[VS Code 1.109 æ›´æ–°è§£è¯»ï¼ˆå››ï¼‰ï¼šç»ˆç«¯ã€ç¼–è¾‘å™¨ä¸å·¥ä½œå°]]></title>    <link>https://juejin.cn/post/7605173538417442826</link>    <guid>https://juejin.cn/post/7605173538417442826</guid>    <pubDate>2026-02-11T07:45:30.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605173538417442826" data-draft-id="7605401415855161394" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="VS Code 1.109 æ›´æ–°è§£è¯»ï¼ˆå››ï¼‰ï¼šç»ˆç«¯ã€ç¼–è¾‘å™¨ä¸å·¥ä½œå°"/> <meta itemprop="keywords" content="Visual Studio Code"/> <meta itemprop="datePublished" content="2026-02-11T07:45:30.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸€åªåæœ¨Meow"/> <meta itemprop="url" content="https://juejin.cn/user/231371762837604"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            VS Code 1.109 æ›´æ–°è§£è¯»ï¼ˆå››ï¼‰ï¼šç»ˆç«¯ã€ç¼–è¾‘å™¨ä¸å·¥ä½œå°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/231371762837604/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸€åªåæœ¨Meow
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-11T07:45:30.000Z" title="Wed Feb 11 2026 07:45:30 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>ğŸ’¡ æ›´å¤šæŠ€æœ¯åˆ†äº«ï¼Œæ¬¢è¿è®¿é—®æˆ‘çš„åšå®¢ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fsanmu7.com%2F" target="_blank" title="https://sanmu7.com/" ref="nofollow noopener noreferrer">åæœ¨ã®å°å±‹</a></p>
</blockquote>
<blockquote>
<p><strong>ç³»åˆ—ç´¢å¼•</strong>ï¼š<a href="https://juejin.cn/post/7605114266024460339" target="_blank" title="https://juejin.cn/post/7605114266024460339">æ€»è§ˆ</a> | <a href="https://juejin.cn/post/7605135197166731314" target="_blank" title="https://juejin.cn/post/7605135197166731314">ï¼ˆä¸€ï¼‰</a>| <a href="https://juejin.cn/post/7605135197166747698" target="_blank" title="https://juejin.cn/post/7605135197166747698">ï¼ˆäºŒï¼‰</a> | <a href="https://juejin.cn/post/7605401415855259698" target="_blank" title="https://juejin.cn/post/7605401415855259698">ï¼ˆä¸‰ï¼‰</a> | <strong>ï¼ˆå››ï¼‰</strong> | <a href="https://juejin.cn/post/7605157203591282715" target="_blank" title="https://juejin.cn/post/7605157203591282715">ï¼ˆäº”ï¼‰</a></p>
</blockquote>
<hr/>
<h2 data-id="heading-0">æœ¬ç¯‡æ¦‚è¦</h2>
<p>é™¤äº† AI åŠŸèƒ½ï¼ŒVS Code 1.109 ä¹Ÿå¸¦æ¥äº†å¤§é‡ç»ˆç«¯ã€ç¼–è¾‘å™¨å’Œå·¥ä½œå°çš„æ”¹è¿›ï¼š</p>
<ul>
<li>Kitty é”®ç›˜åè®®æ”¯æŒ</li>
<li>æ‹¬å·åŒ¹é…å‰æ™¯è‰²å®šåˆ¶</li>
<li>é›†æˆæµè§ˆå™¨ï¼ˆé¢„è§ˆï¼‰</li>
<li>å·¥ä½œå°ç”Ÿäº§åŠ›å¢å¼º</li>
</ul>
<hr/>
<h2 data-id="heading-1">ä¸€ã€ç»ˆç«¯å¢å¼º</h2>
<h3 data-id="heading-2">1.1 é€‰æ‹©æ€§å¿½ç•¥ç²˜æ€§æ»šåŠ¨</h3>
<p><strong>è®¾ç½®</strong>ï¼š<code>terminal.integrated.stickyScroll.ignoredCommands</code></p>
<p>å¯è‡ªå®šä¹‰å“ªäº›å‘½ä»¤ä¸æ˜¾ç¤ºåœ¨ç²˜æ€§æ»šåŠ¨ä¸­ã€‚</p>
<p><strong>é»˜è®¤å¿½ç•¥</strong>ï¼š<code>copilot</code>ã€<code>claude</code>ã€<code>codex</code>ã€<code>gemini</code> ç­‰ AI CLI</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"terminal.integrated.stickyScroll.ignoredCommands"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-string">"clear"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-string">"copilot"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-string">"claude"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-string">"codex"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-string">"gemini"</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 data-id="heading-3">1.2 ç§»é™¤ winpty æ”¯æŒ</h3>
<p>ä¸å†æ”¯æŒ Windows 10 ç‰ˆæœ¬ 1809 ä¹‹å‰çš„ç‰ˆæœ¬ã€‚</p>
<p>å»ºè®®å‡çº§åˆ° Windows 10 æœ€æ–°ç‰ˆæœ¬æˆ– Windows 11ã€‚</p>
<h3 data-id="heading-4">1.3 å…è®¸åœ¨å—é™å·¥ä½œåŒºæ‰“å¼€ç»ˆç«¯</h3>
<p><strong>è®¾ç½®</strong>ï¼š<code>terminal.integrated.allowInUntrustedWorkspace</code></p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"terminal.integrated.allowInUntrustedWorkspace"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span>
<span class="hljs-punctuation">}</span>
</code></pre>
<blockquote>
<p>âš ï¸ ä»…åœ¨äº†è§£é£é™©ä¸”å·²é…ç½®å®‰å…¨ shell æ—¶å¯ç”¨</p>
</blockquote>
<h3 data-id="heading-5">1.4 Kitty é”®ç›˜åè®®ï¼ˆå®éªŒæ€§ï¼‰</h3>
<p><strong>è®¾ç½®</strong>ï¼š<code>terminal.integrated.enableKittyKeyboardProtocol</code></p>
<p>ä¿®å¤ä¼ ç»Ÿå‡»é”®ç¼–ç çš„è®¸å¤šé™åˆ¶ï¼š</p>





















<table><thead><tr><th>åŠŸèƒ½</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>æ›´å¤šä¿®é¥°é”®</td><td>ä¸ä»…é™äº alt å’Œ ctrl</td></tr><tr><td>æŒ‰ä¸‹/é‡Šæ”¾äº‹ä»¶</td><td>æ”¯æŒæ£€æµ‹æŒ‰é”®é‡Šæ”¾</td></tr><tr><td>æ¶ˆé™¤æ­§ä¹‰</td><td>å¦‚ Escape ä¸å†ä¸è½¬ä¹‰åºåˆ—æ··æ·†</td></tr></tbody></table>
<p><strong>ç«‹å³å¯è§çš„å¥½å¤„</strong>ï¼šShift+Enter åœ¨æŸäº› AI CLI ä¸­æ— éœ€é¢å¤–è®¾ç½®å³å¯å·¥ä½œã€‚</p>
<h3 data-id="heading-6">1.5 Win32 è¾“å…¥æ¨¡å¼ï¼ˆå®éªŒæ€§ï¼‰</h3>
<p><strong>è®¾ç½®</strong>ï¼š<code>terminal.integrated.enableWin32InputMode</code></p>
<p>é’ˆå¯¹ Windows å’Œ ConPTY è°ƒæ•´çš„ç±»ä¼¼åŠŸèƒ½ï¼Œæœ¬ç‰ˆæœ¬ä¸­ä¿æŒå…³é—­ã€‚</p>
<hr/>
<h2 data-id="heading-7">äºŒã€ç¼–ç ä¸ç¼–è¾‘å™¨</h2>
<h3 data-id="heading-8">2.1 æ‹¬å·åŒ¹é…å‰æ™¯è‰²</h3>
<p>å¯è‡ªå®šä¹‰åŒ¹é…æ‹¬å·çš„æ–‡æœ¬é¢œè‰²ï¼ˆä¸ä»…ä»…æ˜¯èƒŒæ™¯å’Œè¾¹æ¡†ï¼‰ã€‚</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"workbench.colorCustomizations"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"editorBracketMatch.foreground"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"#ff0000"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 data-id="heading-9">2.2 åŒå‡»é€‰æ‹©æ‹¬å·æˆ–å­—ç¬¦ä¸²å†…å®¹</h3>
<pre><code class="hljs language-arduino" lang="arduino">[  é€‰æ‹©è¿™ä¸ªå†…å®¹  ]    <span class="hljs-string">"é€‰æ‹©è¿™ä¸ªå†…å®¹"</span>
   â†‘              â†‘
å¼€æ‹¬å·å/é—­æ‹¬å·å‰    å¼€å¼•å·å/é—­å¼•å·å‰
</code></pre>
<h3 data-id="heading-10">2.3 TypeScript é‡å‘½åå»ºè®®</h3>
<p>è¾“å…¥è¦†ç›–ç°æœ‰å£°æ˜æ—¶ä¹Ÿèƒ½è§¦å‘é‡å‘½åå»ºè®®ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">let <span class="hljs-attr">index</span> = <span class="hljs-number">0</span><span class="hljs-comment">;</span>
     â†“ è¾“å…¥ chunkIndex
let <span class="hljs-attr">chunkIndex</span> = <span class="hljs-number">0</span><span class="hljs-comment">;</span>
     â†“ Shift+Tab åº”ç”¨é‡å‘½å
// å…¶ä»–åœ°æ–¹çš„ index ä¹Ÿå˜ä¸º chunkIndex
</code></pre>
<blockquote>
<p>âš ï¸ ç›®å‰ä»…æ”¯æŒ TypeScript</p>
</blockquote>
<h3 data-id="heading-11">2.4 æ”¹è¿›çš„å¹½çµæ–‡æœ¬å¯è§æ€§</h3>
<p>å°‘äºä¸‰ä¸ªè¿ç»­éç©ºç™½å­—ç¬¦çš„çŸ­å»ºè®®æ˜¾ç¤º<strong>è™šçº¿ä¸‹åˆ’çº¿</strong>ï¼š</p>
<pre><code class="hljs language-c" lang="c">console.<span class="hljs-built_in">log</span>â–¼
            â””â”€ è™šçº¿ä¸‹åˆ’çº¿è¡¨ç¤ºå¹½çµæ–‡æœ¬
</code></pre>
<h3 data-id="heading-12">2.5 ä»£ç æ®µæ–‡ä»¶æ¨¡å¼</h3>
<p>ä½¿ç”¨ <code>include</code> å’Œ <code>exclude</code> æ§åˆ¶ä»£ç æ®µå‡ºç°èŒƒå›´ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"Travis CI node_js"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"include"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">".travis.yml"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"prefix"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"node"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"body"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"language: node_js"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"node_js:"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">" - $1"</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Node.js configuration for Travis CI"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"Exclude from tests"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"exclude"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"*.test.*"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"prefix"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"debug"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"body"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"console.log($1);"</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Debug logging (excluded from tests)"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 data-id="heading-13">2.6 æ”¹è¿›çš„ shebang è¯­è¨€æ£€æµ‹</h3>
<p>æ”¹è¿›å¯¹ <code>/usr/bin/env</code> å’Œé™„åŠ æ ‡å¿—çš„æ”¯æŒï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/usr/bin/env -S deno -A</span>
<span class="hljs-comment"># ç°åœ¨èƒ½æ­£ç¡®è¯†åˆ«ä¸º TypeScript</span>
</code></pre>
<hr/>
<h2 data-id="heading-14">ä¸‰ã€å·¥ä½œå°ä¸ç”Ÿäº§åŠ›</h2>
<h3 data-id="heading-15">3.1 é›†æˆæµè§ˆå™¨ï¼ˆé¢„è§ˆï¼‰</h3>
<p><strong>è®¾ç½®</strong>ï¼š</p>
<ul>
<li><code>workbench.browser.openLocalhostLinks</code></li>
<li><code>simpleBrowser.useIntegratedBrowser</code></li>
<li><code>livePreview.useIntegratedBrowser</code></li>
</ul>
<p>VS Code æ¡Œé¢ç‰ˆæ–°å¢å®Œæ•´æµè§ˆå™¨ä½“éªŒï¼š</p>

































<table><thead><tr><th>åŠŸèƒ½</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>æŒä¹…åŒ–å­˜å‚¨</td><td>å¯é…ç½®å…¨å±€/å·¥ä½œåŒº/ä¸´æ—¶å­˜å‚¨</td></tr><tr><td>æ·»åŠ å…ƒç´ åˆ°èŠå¤©</td><td>é€‰æ‹©å…ƒç´ å‘é€ç»™æ™ºèƒ½ä½“</td></tr><tr><td>å®Œæ•´ DevTools</td><td>æ‰€æœ‰å¼€å‘è€…å·¥å…·</td></tr><tr><td>é”®ç›˜å¿«æ·é”®</td><td>å®Œæ•´é”®ç›˜å¯¼èˆª</td></tr><tr><td>é¡µé¢æŸ¥æ‰¾</td><td>å†…ç½®æœç´¢åŠŸèƒ½</td></tr><tr><td>ç½‘ç«™ç™»å½•</td><td>æ”¯æŒ Cookie å’Œè®¤è¯</td></tr></tbody></table>
<p><strong>å¯åŠ¨å‘½ä»¤</strong>ï¼š<code>Browser: Open Integrated Browser</code></p>
<h3 data-id="heading-16">3.2 å·¥ä½œåŒºæ‰“å¼€æ—¶æ¢å¤ç¼–è¾‘å™¨</h3>
<p><strong>è®¾ç½®</strong>ï¼š<code>workbench.editor.restoreEditors</code></p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"workbench.editor.restoreEditors"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span>  <span class="hljs-comment">// å¯åŠ¨æ—¶ä¸æ¸…ç©ºç¼–è¾‘å™¨</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<blockquote>
<p>æœªä¿å­˜çš„ç¼–è¾‘å™¨å§‹ç»ˆä¼šæ¢å¤ï¼Œé˜²æ­¢æ•°æ®ä¸¢å¤±</p>
</blockquote>
<h3 data-id="heading-17">3.3 é«˜çº§è®¾ç½®</h3>
<p><strong>è®¾ç½®</strong>ï¼š<code>workbench.settings.showAdvancedSettings</code></p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"workbench.settings.showAdvancedSettings"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span>  <span class="hljs-comment">// å§‹ç»ˆæ˜¾ç¤ºé«˜çº§è®¾ç½®</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 data-id="heading-18">3.4 æ‹–æ”¾å¯¼å…¥é…ç½®æ–‡ä»¶</h3>
<p>å¯ç›´æ¥æ‹–æ”¾ <code>.code-profile</code> æ–‡ä»¶åˆ° VS Code çª—å£å¯¼å…¥é…ç½®ã€‚</p>
<h3 data-id="heading-19">3.5 è¾“å‡ºé¢æ¿è¿‡æ»¤æ”¹è¿›</h3>
<p>æ”¯æŒå¦å®šæ¨¡å¼å’Œå¤šä¸ªè¿‡æ»¤å™¨ï¼š</p>
<pre><code class="hljs language-lua" lang="lua">typescript          åªæ˜¾ç¤ºåŒ…å« <span class="hljs-string">"typescript"</span> çš„è¡Œ
!<span class="hljs-built_in">debug</span>              éšè—åŒ…å« <span class="hljs-string">"debug"</span> çš„è¡Œ
typescript, !<span class="hljs-built_in">debug</span>  ç»„åˆè¿‡æ»¤
</code></pre>
<h3 data-id="heading-20">3.6 æŒ‰æ¥æºè¿‡æ»¤é—®é¢˜</h3>
<p>é—®é¢˜é¢æ¿æ”¯æŒæŒ‰è¯Šæ–­æ¥æºè¿‡æ»¤ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">source</span>:ts        ä»…æ˜¾ç¤º TypeScript è¯Šæ–­
!<span class="hljs-built_in">source</span>:cSpell   éšè—æ‹¼å†™æ£€æŸ¥å™¨è­¦å‘Š
<span class="hljs-built_in">source</span>:eslint    ä»…æ˜¾ç¤º ESLint è¯Šæ–­
</code></pre>
<h3 data-id="heading-21">3.7 Git å¢å¼º</h3>

























<table><thead><tr><th>åŠŸèƒ½</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>æŠ˜å æ‰€æœ‰</td><td>SCM è§†å›¾ä¸­ä¸€é”®æŠ˜å æ‰€æœ‰ç›®å½•</td></tr><tr><td>Delete å‘½ä»¤</td><td><code>Git: Delete</code> ç›´æ¥ <code>git rm</code> æ–‡ä»¶</td></tr><tr><td>blame æ‚¬åœ</td><td>å¯ç¦ç”¨ blame è£…é¥°çš„æ‚¬åœå¼¹å‡º</td></tr><tr><td>worktree æ–‡ä»¶</td><td>æŒ‡å®šé¢å¤–æ–‡ä»¶å¤åˆ¶åˆ° worktree</td></tr></tbody></table>
<h3 data-id="heading-22">3.8 è‡ªåŠ¨ä»»åŠ¡é»˜è®¤ç¦ç”¨</h3>
<p><strong>è®¾ç½®</strong>ï¼š<code>task.allowAutomaticTasks</code></p>
<p>ç°åœ¨é»˜è®¤ä¸º <code>off</code>ï¼Œæé«˜å®‰å…¨æ€§ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"task.allowAutomaticTasks"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"on"</span>  <span class="hljs-comment">// æ¢å¤æ—§è¡Œä¸º</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 data-id="heading-23">3.9 æ— éšœç¢æ”¹è¿›</h3>





























<table><thead><tr><th>æ”¹è¿›</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>åŠ¨æ€æµå¼èŠå¤©</td><td>å±å¹•é˜…è¯»å™¨å®æ—¶è·Ÿéš AI å“åº”</td></tr><tr><td>ç¨³å®šå…‰æ ‡ä½ç½®</td><td>é˜²æ­¢ç„¦ç‚¹å˜åŒ–å¹²æ‰°å¯¼èˆª</td></tr><tr><td>ARIA è­¦æŠ¥</td><td>æ–°èŠå¤©ä¼šè¯é€šçŸ¥</td></tr><tr><td>æ”¹è¿›å·¥å…·è°ƒç”¨ä¿¡æ¯</td><td>æ›´å®¹æ˜“ç†è§£ AI æ“ä½œ</td></tr><tr><td>å…¬å‘Šå…‰æ ‡ä½ç½®</td><td>Ctrl/Cmd+Alt+Shift+G</td></tr></tbody></table>
<h3 data-id="heading-24">3.10 ä¼ä¸šæ”¹è¿›</h3>
<p><strong>æ”¹è¿›çš„ GitHub ç»„ç»‡ç­–ç•¥æ‰§è¡Œ</strong>ï¼š</p>
<ul>
<li>æ ¹æ®é¦–é€‰ Copilot è´¦æˆ·æ­£ç¡®åº”ç”¨ç­–ç•¥</li>
<li>å¯åŠ¨æ—¶ç½‘ç»œä¸å¯ç”¨ä¹Ÿèƒ½ä¸€è‡´æ‰§è¡Œç­–ç•¥</li>
</ul>
<hr/>
<h2 data-id="heading-25">å¿«é€Ÿé…ç½®å‚è€ƒ</h2>
<h3 data-id="heading-26">ç»ˆç«¯é…ç½®</h3>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"terminal.integrated.enableKittyKeyboardProtocol"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"terminal.integrated.stickyScroll.ignoredCommands"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"clear"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"npm"</span><span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 data-id="heading-27">æ‹¬å·åŒ¹é…é¢œè‰²</h3>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"workbench.colorCustomizations"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"editorBracketMatch.foreground"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"#00ff00"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 data-id="heading-28">é›†æˆæµè§ˆå™¨</h3>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"workbench.browser.openLocalhostLinks"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"integrated"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"simpleBrowser.useIntegratedBrowser"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 data-id="heading-29">å·¥ä½œåŒºæ¢å¤</h3>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"workbench.editor.restoreEditors"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span>
<span class="hljs-punctuation">}</span>
</code></pre>
<hr/>
<h2 data-id="heading-30">ä¸‹ä¸€ç¯‡é¢„å‘Š</h2>
<p><strong><a href="https://juejin.cn/post/7605157203591282715" target="_blank" title="https://juejin.cn/post/7605157203591282715">ï¼ˆäº”ï¼‰APIä¸å·¥ç¨‹æ”¹è¿›</a></strong> å°†æ·±å…¥æ¢è®¨ï¼š</p>
<ul>
<li>Quick Input æŒ‰é’®ä½ç½® API</li>
<li>Chat Model Provider é…ç½®</li>
<li>macOS DMG é•œåƒ</li>
<li>Windows å®‰è£…é‡è®¾è®¡</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è§£æ Temperature ä¸ Top Pï¼šå¦‚ä½•æŒæ§å¤§æ¨¡å‹çš„è¾“å‡ºéšæœºæ€§]]></title>    <link>https://juejin.cn/post/7605051886435287103</link>    <guid>https://juejin.cn/post/7605051886435287103</guid>    <pubDate>2026-02-11T07:04:47.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605051886435287103" data-draft-id="7605142381152370751" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è§£æ Temperature ä¸ Top Pï¼šå¦‚ä½•æŒæ§å¤§æ¨¡å‹çš„è¾“å‡ºéšæœºæ€§"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-02-11T07:04:47.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¥‡èˆç²¾é€‰"/> <meta itemprop="url" content="https://juejin.cn/user/4388906147515367"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è§£æ Temperature ä¸ Top Pï¼šå¦‚ä½•æŒæ§å¤§æ¨¡å‹çš„è¾“å‡ºéšæœºæ€§
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4388906147515367/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¥‡èˆç²¾é€‰
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-11T07:04:47.000Z" title="Wed Feb 11 2026 07:04:47 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    25
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h4 data-id="heading-0">å‰è¨€</h4>
<img src="https://p1.ssl.qhimg.com/d/inn/d231d4dc137f/WechatIMG7050.jpg" loading="lazy"/>
<p>åœ¨AIæ—¶ä»£ï¼Œå¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰å¦‚ <code>ChatGPT</code> æˆ–<code>Gemini </code> å·²æˆä¸ºæˆ‘ä»¬çš„â€œæ•°å­—å¤§è„‘â€ã€‚å¦‚æœä½ ç»å¸¸ä½¿ç”¨è¿™äº›å¤§æ¨¡å‹ï¼Œé‚£ä½ è‚¯å®šè§è¿‡Temperature å’Œ TopP è¿™ä¸¤ä¸ªå‚æ•°ã€‚æ¯”å¦‚ <code>ChatGPT</code> çš„APIæ–‡æ¡£å°±æœ‰ä»‹ç»ï¼š</p>
<p>æ ¹æ®æè¿°ï¼š</p>
<p><strong>Temperatureï¼ˆæ¸©åº¦ï¼‰ï¼š</strong> å–å€¼åœ¨ 0 åˆ° 2 ä¹‹é—´ã€‚è¾ƒé«˜çš„å€¼ï¼ˆå¦‚ 0.8ï¼‰å°†ä½¿è¾“å‡ºæ›´åŠ éšæœºï¼Œè€Œè¾ƒä½çš„å€¼ï¼ˆå¦‚ 0.2ï¼‰å°†ä½¿è¾“å‡ºæ›´åŠ é›†ä¸­å’Œç¡®å®šã€‚</p>
<p><strong>Top Pï¼ˆæ ¸é‡‡æ ·ï¼‰ï¼š</strong> æ¸©åº¦é‡‡æ ·çš„æ›¿ä»£æ–¹æ³•ã€‚æ¨¡å‹ä»…è€ƒè™‘æ¦‚ç‡è´¨é‡æ’åå‰ P% çš„æ ‡è®°çš„ç»“æœã€‚ä¾‹å¦‚ï¼Œ0.1 è¡¨ç¤ºä»…è€ƒè™‘æ¦‚ç‡æ’åå‰ 10% çš„æ ‡è®°ã€‚</p>
<p>çœ‹åˆ°è¿™é‡Œï¼Œä½ å¯èƒ½è§‰å¾—å·²ç»æ‡‚äº†ï¼š<em>å®ƒä»¬å°±æ˜¯æ§åˆ¶éšæœºæ€§çš„å¼€å…³å˜›ã€‚å€¼è¶Šé«˜è¶Šå‘æ•£ï¼Œå€¼è¶Šä½è¶Šä¿å®ˆã€‚</em></p>
<p>ä½†ä»”ç»†ä¸€æƒ³ï¼Œé—®é¢˜æ¥äº†ï¼š</p>
<ol>
<li><strong>ä¸ºä»€ä¹ˆ</strong>å€¼è¶Šé«˜è¶Šéšæœºï¼Œè¶Šä½è¶Šç¨³å®šï¼ŸèƒŒåçš„æ•°å­¦åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ</li>
<li>å¦‚æœå®ƒä»¬æ§åˆ¶çš„éƒ½æ˜¯éšæœºæ€§ï¼Œ<strong>ä¸ºä»€ä¹ˆéœ€è¦ä¸¤ä¸ªå‚æ•°</strong>ï¼Ÿ</li>
<li>å¦‚æœæŠŠä¸€ä¸ªè°ƒé«˜ï¼Œå¦ä¸€ä¸ªè°ƒä½ï¼Œæ•ˆæœä¼šä¸­å’Œå—ï¼Ÿ</li>
<li>å®ƒä»¬æ˜¯ååŒå·¥ä½œï¼Œè¿˜æ˜¯åœ¨å®Œå…¨ä¸åŒçš„ç»´åº¦äº§ç”Ÿå½±å“ï¼Ÿ</li>
</ol>
<p>å¸¦ç€è¿™äº›é—®é¢˜ï¼Œæˆ‘ä»¬å°†æ‹†è§£è¿™ä¸¤ä¸ªâ€œé»‘ç›’å­â€ï¼Œä»å¤§æ¨¡å‹çš„åº•å±‚ç”ŸæˆåŸç†å‡ºå‘ï¼Œå½»åº•ææ‡‚å®ƒä»¬å¦‚ä½•æŒæ§ AI çš„æ¯ä¸€æ¬¡å¼€å£ã€‚</p>
<h4 data-id="heading-1">å¤§æ¨¡å‹å›ç­”çš„â€œä¸‰æ­¥èµ°â€æµç¨‹</h4>
<p>è¦ææ‡‚è¿™ä¸¤ä¸ªå‚æ•°ï¼Œå¿…é¡»å…ˆçœ‹å¤§æ¨¡å‹æ˜¯å¦‚ä½•é¢„æµ‹ä¸‹ä¸€ä¸ªå­—çš„ã€‚æœ¬è´¨ä¸Šï¼ŒTransformer çš„æ ¸å¿ƒä»»åŠ¡æœ´ç´ å¾—åƒçŒœè°œï¼š<strong>æ ¹æ®ä¸Šæ–‡ï¼Œé¢„æµ‹ä¸‹ä¸€ä¸ªæœ€æœ‰å¯èƒ½å‡ºç°çš„è¯ï¼ˆTokenï¼‰ï¼Œé‡å¤æ­¤è¿‡ç¨‹ç›´åˆ°ç”Ÿæˆç»“æŸç¬¦ã€‚</strong></p>
<p>è¿™ä¸ªè¿‡ç¨‹å¯ä»¥æ‹†è§£ä¸ºä¸‰ä¸ªå…³é”®æ­¥éª¤ï¼š<strong>ç”Ÿæˆåˆ†æ•° (Logits)</strong> --&gt; <strong>è½¬æ¢æ¦‚ç‡ (Softmax)</strong>  --&gt;<strong>åŠ æƒé‡‡æ · (Sampling)</strong>ã€‚</p>
<img src="https://p3.ssl.qhimg.com/d/inn/6ecebc3b945b/resource.png" alt="æˆªå±2025-12-04 11.03.52" loading="lazy"/>
<p><strong>æ­¥éª¤1: ç”Ÿæˆåˆ†æ•°ï¼ˆ<code>Logits</code>ï¼‰</strong></p>
<p>æˆ‘ä»¬ç”¨ä¸€ä¸ªç®€å•ä¾‹å­è¯´æ˜ï¼šå½“ç”¨æˆ·æé—®â€œ<strong>å¸®æˆ‘æ¨èä¸€ä¸ªå­¦ä¹  AI å¤§æ¨¡å‹æŠ€æœ¯çš„é¢‘é“</strong>â€æ—¶ï¼Œæ¨¡å‹ä¼šæ‰«æå®ƒè¯è¡¨é‡Œæˆåƒä¸Šä¸‡ä¸ªè¯ï¼Œå¹¶ä¸ºæ¯ä¸€ä¸ªè¯æ‰“åˆ†ã€‚è¿™ä¸ªåˆ†æ•°åœ¨ AI é¢†åŸŸè¢«ç§°ä¸º <strong>Logits</strong>ã€‚</p>
<p>å‡è®¾æ¨¡å‹æ‰“åˆ†åï¼Œæ’åå‰äº”çš„è¯å¦‚ä¸‹ï¼š</p>
<ul>
<li>AIï¼š4.2</li>
<li>ç§‘æŠ€ï¼š4.1</li>
<li>å¥‡èˆï¼š3.9</li>
<li>è‡ªè¡Œè½¦ï¼š1.8</li>
<li>Helloï¼š1.4</li>
</ul>
<p>æ‰“åˆ†è¿‡ç¨‹æ¯”è¾ƒå¤æ‚ï¼Œå¥½åœ¨è·Ÿæˆ‘ä»¬ä»Šå¤©çš„å†…å®¹å…³ç³»ä¸å¤§ï¼Œæˆ‘ä»¬å¯ä»¥æš‚ä¸”å¿½ç•¥ã€‚</p>
<blockquote>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨å¤§æ¨¡å‹é¢„æµ‹ä¸‹ä¸€ä¸ªè¯æ—¶ï¼Œä¼šç»™å®ƒæ‰€è®¤è¯†çš„æ‰€æœ‰è¯æ‰“åˆ†ï¼Œè¯çš„æ€»æ•°é‡å¤§æ¦‚æ˜¯åœ¨å‡ ä¸‡åˆ°å‡ åä¸‡å·¦å³ã€‚ä¸ºäº†æ–¹ä¾¿ç†è§£ï¼Œæˆ‘ä»¬è¿™é‡Œåªæ˜¾ç¤ºåˆ†æ•°æœ€é«˜çš„å‰äº”ä¸ªï¼Œå…¶ä½™çš„å…¨éƒ¨çœç•¥ã€‚</p>
</blockquote>
<p>åœ¨å¤§å‹è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰å®Œæˆå¯¹æ‰€æœ‰è¯æ±‡çš„è¯„åˆ†åï¼Œä¸‹ä¸€æ­¥çš„å…³é”®åœ¨äºå¦‚ä½•ä»è¿™äº›åˆ†æ•°ä¸­é€‰æ‹©æœ€åˆé€‚çš„è¯ä½œä¸ºè¾“å‡ºã€‚ä¸€ç§ç›´è§‚ä¸”å¸¸ç”¨çš„æ–¹æ³•æ˜¯é€‰æ‹©å¾—åˆ†æœ€é«˜çš„è¯ã€‚</p>
<p>ä¾‹å¦‚ï¼Œå‡è®¾æ¨¡å‹åœ¨é¢„æµ‹åºåˆ—ä¸­çš„ä¸‹ä¸€ä¸ªè¯æ—¶ï¼Œå¯¹è¯æ±‡è¡¨ä¸­çš„æ¯ä¸ªè¯éƒ½è¿›è¡Œäº†è¯„åˆ†ï¼Œæ¯”å¦‚ä¸Šé¢ä¾‹å­ä¸­çš„ "AI" è¿™ä¸ªè¯è·å¾—äº†æœ€é«˜åˆ†ã€‚é‚£ä¹ˆï¼Œæ¨¡å‹ä¼šé€‰æ‹© "AI" ä½œä¸ºå½“å‰æ­¥éª¤çš„è¾“å‡ºã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œæ¨¡å‹ä¼šå°† "AI" è¿™ä¸ªè¯æ·»åŠ åˆ°è¾“å…¥åºåˆ—ä¸­ï¼Œå¹¶å†æ¬¡è¿›è¡Œä¸‹ä¸€ä¸ªè¯çš„é¢„æµ‹ã€‚è¿™æ„å‘³ç€æ¨¡å‹ä¼šé‡æ–°è¯„ä¼°è¯æ±‡è¡¨ä¸­çš„æ¯ä¸ªè¯ï¼Œå¹¶ä¸ºå®ƒä»¬åˆ†é…æ–°çš„åˆ†æ•°ã€‚åŒæ ·ï¼Œæ¨¡å‹ä¼šé€‰æ‹©å¾—åˆ†æœ€é«˜çš„è¯ä½œä¸ºä¸‹ä¸€ä¸ªè¾“å‡ºã€‚</p>
<p>è¿™ä¸ªè¿‡ç¨‹ä¼šä¸æ–­é‡å¤ï¼Œæ¨¡å‹é€ä¸ªè¾“å‡ºæ¯ä¸€ä¸ªè¯ï¼Œå¹¶å°†æ¯ä¸ªæ–°ç”Ÿæˆçš„è¯æ·»åŠ åˆ°è¾“å…¥åºåˆ—ä¸­ï¼Œä»¥å½±å“åç»­è¯çš„é¢„æµ‹ã€‚è¿™ç§è¿­ä»£å¼çš„ç”Ÿæˆè¿‡ç¨‹ä¼šæŒç»­è¿›è¡Œï¼Œç›´åˆ°æ¨¡å‹è¾“å‡ºä¸€ä¸ªç‰¹æ®Šçš„ç»“æŸæ ‡è¯†ç¬¦ï¼ˆä¾‹å¦‚ ""ï¼‰ä¸ºæ­¢ã€‚ç»“æŸæ ‡è¯†ç¬¦çš„å‡ºç°æ ‡å¿—ç€æ–‡æœ¬ç”Ÿæˆçš„å®Œæˆã€‚</p>
<p><img src="https://p4.ssl.qhimg.com/d/inn/b5fa6dc9ef61/theory.png" alt="æˆªå±2025-12-08 11.10.08" loading="lazy"/></p>
<p>è™½ç„¶é€‰æ‹©å¾—åˆ†æœ€é«˜çš„è¯æ˜¯ä¸€ç§ç®€å•ç›´æ¥çš„è§£ç ç­–ç•¥ï¼Œä½†å®ƒä¹Ÿå­˜åœ¨ä¸€äº›å±€é™æ€§ï¼š</p>
<ul>
<li><strong>ç¼ºä¹å¤šæ ·æ€§ï¼š</strong> è¿™ç§ç­–ç•¥å€¾å‘äºé€‰æ‹©æœ€å¸¸è§çš„è¯ï¼Œå¯¼è‡´ç”Ÿæˆçš„æ–‡æœ¬ç¼ºä¹å¤šæ ·æ€§å’Œåˆ›é€ æ€§ã€‚æ¨¡å‹å¯èƒ½ä¼šé™·å…¥é‡å¤çš„æ¨¡å¼ï¼Œç”Ÿæˆå¹³æ·¡æ— å¥‡çš„å†…å®¹ã€‚</li>
<li><strong>å¯¹å™ªå£°æ•æ„Ÿï¼š</strong> å¦‚æœæ¨¡å‹åœ¨æŸä¸ªæ­¥éª¤ä¸­ç»™å‡ºäº†é”™è¯¯çš„é«˜åˆ†ï¼Œé‚£ä¹ˆè¿™ä¸ªé”™è¯¯å¯èƒ½ä¼šè¢«æ”¾å¤§ï¼Œå¯¼è‡´åç»­ç”Ÿæˆçš„æ–‡æœ¬åç¦»é¢„æœŸã€‚</li>
<li><strong>å¿½ç•¥ä¸Šä¸‹æ–‡ï¼š</strong> è™½ç„¶æ¨¡å‹ä¼šå°†ä¹‹å‰ç”Ÿæˆçš„è¯ä½œä¸ºè¾“å…¥ï¼Œä½†ç®€å•åœ°é€‰æ‹©æœ€é«˜åˆ†å¯èƒ½ä¼šå¿½ç•¥æ›´é•¿è¿œçš„ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œå¯¼è‡´ç”Ÿæˆçš„æ–‡æœ¬ä¸è¿è´¯æˆ–ä¸è‡ªç„¶ã€‚</li>
</ul>
<p>è¿™æ ·ç®€å•çš„é€‰æ‹©åˆ†æ•°æœ€é«˜çš„è¯æ˜¾ç„¶æ˜¯ä¸åˆé€‚çš„ï¼Œæˆ‘ä»¬éœ€è¦ç»™å…¶ä»–è¯ï¼Œæ¯”å¦‚â€œç§‘æŠ€â€æˆ–â€œå¥‡èˆâ€ä¸€å®šæœºä¼šã€‚èªæ˜çš„ä½ è‚¯å®šæƒ³åˆ°äº†ï¼ŒæŠŠè¿™äº›è¯çš„åˆ†æ•°è½¬ä¸ºæ¦‚ç‡ï¼Œè®©æ¨¡å‹æŒ‰ç…§æ¦‚ç‡æ¥é¢„æµ‹ä¸‹ä¸€ä¸ªè¯ã€‚æåˆ°è½¬æ¢æ¦‚ç‡ï¼Œè¿™å°±è½®åˆ°å¤§åé¼é¼çš„ <strong>Softmax å‡½æ•°</strong> ç™»åœºäº†ã€‚</p>
<p><strong>æ­¥éª¤2: è½¬æ¢æ¦‚ç‡ï¼ˆSoftmaxå‡½æ•°ï¼‰</strong></p>
<p><code>Softmax</code> å…¬å¼ï¼š</p>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>Softmax</mtext><mo stretchy="false">(</mo><msub><mi>z</mi><mi>i</mi></msub><mo stretchy="false">)</mo><mo>=</mo><mfrac><msup><mi>e</mi><mrow><msub><mi>z</mi><mi>i</mi></msub><mi mathvariant="normal">/</mi><mi>T</mi></mrow></msup><mrow><munderover><mo>âˆ‘</mo><mrow><mi>j</mi><mo>=</mo><mn>1</mn></mrow><mi>K</mi></munderover><msup><mi>e</mi><mrow><msub><mi>z</mi><mi>j</mi></msub><mi mathvariant="normal">/</mi><mi>T</mi></mrow></msup></mrow></mfrac></mrow><annotation encoding="application/x-tex">\text{Softmax}(z_i) = \frac{e^{z_i/T}}{\sum_{j=1}^{K} e^{z_j/T}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord text"><span class="mord">Softmax</span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.04398em;">z</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.044em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:2.872em;vertical-align:-1.307em;"/><span class="mord"><span class="mopen nulldelimiter"/><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.565em;"><span style="top:-2.1288em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:0em;">âˆ‘</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9812em;"><span style="top:-2.4003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.07153em;">K</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.4358em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8301em;"><span style="top:-3.0051em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.04398em;">z</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3281em;"><span style="top:-2.357em;margin-left:-0.044em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"/><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2819em;"><span/></span></span></span></span></span><span class="mord mtight">/</span><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"/><span class="frac-line" style="border-bottom-width:0.04em;"/></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.888em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.04398em;">z</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3281em;"><span style="top:-2.357em;margin-left:-0.044em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"/><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span/></span></span></span></span></span><span class="mord mtight">/</span><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.307em;"><span/></span></span></span></span><span class="mclose nulldelimiter"/></span></span></span></span></span></div>
<p>è§£æä¸€ä¸‹è¿™ä¸ªå‡½æ•°ï¼Œå®ƒè¿™é‡Œé¢çš„ <code>z_i</code> ä»£è¡¨çš„å°±æ˜¯ç¬¬ <code>i</code> ä¸ªè¯çš„åˆ†æ•°ï¼Œ<code>K</code> ä»£è¡¨çš„æ˜¯è¯çš„æ€»æ•°é‡ï¼Œè€Œè¿™ä¸ªè¾“å‡ºå€¼å°±ä»£è¡¨ç¬¬ <code>i</code> ä¸ªè¯çš„æ¦‚ç‡äº†ã€‚è¿™é‡Œçš„ <code>T</code> å°±æ˜¯ <code>Temperature</code>ï¼Œå¯ä»¥å…ˆæŠŠ <code>T</code>è®¾ç½®ä¸ºé»˜è®¤å€¼ <code>T = 1</code>ï¼Œé‚£ä¹ˆè¿™ä¸ªå…¬å¼å°±å˜ä¸ºäº†ï¼š</p>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>Softmax</mtext><mo stretchy="false">(</mo><msub><mi>z</mi><mi>i</mi></msub><mo stretchy="false">)</mo><mo>=</mo><mfrac><msup><mi>e</mi><msub><mi>z</mi><mi>i</mi></msub></msup><mrow><munderover><mo>âˆ‘</mo><mrow><mi>j</mi><mo>=</mo><mn>1</mn></mrow><mi>K</mi></munderover><msup><mi>e</mi><msub><mi>z</mi><mi>j</mi></msub></msup></mrow></mfrac></mrow><annotation encoding="application/x-tex">\text{Softmax}(z_i) = \frac{e^{z_i}}{\sum_{j=1}^{K} e^{z_j}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord text"><span class="mord">Softmax</span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.04398em;">z</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.044em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:2.6484em;vertical-align:-1.307em;"/><span class="mord"><span class="mopen nulldelimiter"/><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3414em;"><span style="top:-2.1288em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:0em;">âˆ‘</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9812em;"><span style="top:-2.4003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.07153em;">K</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.4358em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6065em;"><span style="top:-3.0051em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.04398em;">z</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3281em;"><span style="top:-2.357em;margin-left:-0.044em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"/><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2819em;"><span/></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"/><span class="frac-line" style="border-bottom-width:0.04em;"/></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.04398em;">z</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3281em;"><span style="top:-2.357em;margin-left:-0.044em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"/><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span/></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.307em;"><span/></span></span></span></span><span class="mclose nulldelimiter"/></span></span></span></span></span></div>
<p>è¿˜æ˜¯ä»¥ä¸Šé¢çš„è¯ä¸ºä¾‹ï¼Œä¸Šé¢äº”ä¸ªè¯çš„åˆ†æ•°ä¸ºï¼š<code>z_1ï¼ˆAIï¼‰ = 4.2ã€z_2ï¼ˆç§‘æŠ€ï¼‰= 4.1ã€z_3ï¼ˆå¥‡èˆï¼‰= 3.9ã€z_4ï¼ˆè‡ªè¡Œè½¦ï¼‰= 1.8ã€z_5ï¼ˆHelloï¼‰= 1.4</code>ï¼Œé‚£ä¹ˆè®¡ç®— <code>z_1</code>è¿™ä¸ªè¯çš„æ¦‚ç‡ï¼Œä¸Šé¢çš„å…¬å¼å±•å¼€ä¸ºï¼š</p>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>P</mi><mn>1</mn></msub><mo>=</mo><mfrac><msup><mi>e</mi><mn>4.2</mn></msup><mrow><msup><mi>e</mi><mn>4.2</mn></msup><mo>+</mo><msup><mi>e</mi><mn>4.1</mn></msup><mo>+</mo><msup><mi>e</mi><mn>3.9</mn></msup><mo>+</mo><msup><mi>e</mi><mn>1.8</mn></msup><mo>+</mo><msup><mi>e</mi><mn>1.4</mn></msup></mrow></mfrac></mrow><annotation encoding="application/x-tex">P_1 = \frac{e^{4.2}}{e^{4.2} + e^{4.1}+e^{3.9}+e^{1.8}+e^{1.4}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:2.2604em;vertical-align:-0.7693em;"/><span class="mord"><span class="mopen nulldelimiter"/><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.4911em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7401em;"><span style="top:-2.989em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">4.2</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7401em;"><span style="top:-2.989em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">4.1</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7401em;"><span style="top:-2.989em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">3.9</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7401em;"><span style="top:-2.989em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1.8</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7401em;"><span style="top:-2.989em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1.4</span></span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"/><span class="frac-line" style="border-bottom-width:0.04em;"/></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">4.2</span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.7693em;"><span/></span></span></span></span><span class="mclose nulldelimiter"/></span></span></span></span></span></div>
<img src="https://p1.ssl.qhimg.com/d/inn/8022f6754328/formula.png" alt="æˆªå±2025-12-04 21.36.38" loading="lazy"/>
<p><strong>e â‰ˆ 2.718</strong>ï¼Œå¤§è‡´å¾—åˆ°çš„æ¦‚ç‡å¦‚ä¸‹ï¼š</p>
<ul>
<li><strong>AI</strong>ï¼š36%</li>
<li><strong>ç§‘æŠ€</strong>ï¼š32%</li>
<li><strong>å¥‡èˆ</strong>ï¼š26%</li>
<li><strong>è‡ªè¡Œè½¦</strong>ï¼š3%</li>
<li><strong>Hello</strong>ï¼š2%</li>
</ul>
<p><code>Softmax</code> å‡½æ•°ä¼šä¿è¯æ‰€æœ‰è¯çš„æ¦‚ç‡ç›¸åŠ ä¸º100%ã€‚</p>
<p><strong>æ­¥éª¤3ï¼šåŠ æƒé‡‡æ ·</strong></p>
<p>å¾—åˆ°äº†æ¯ä¸ªè¯çš„æ¦‚ç‡åï¼Œå°±éœ€è¦æ ¹æ®æ¦‚ç‡æ¥ç”Ÿæˆä¸‹ä¸€ä¸ªé¢„æµ‹çš„å€¼ã€‚ä¸€èˆ¬ç§°è¿™ä¸ªé€šè¿‡æ¦‚ç‡æ¥ç”Ÿæˆé¢„æµ‹å€¼çš„è¿‡ç¨‹ä¸º: <strong>åŠ æƒé‡‡æ ·</strong>ã€‚å¯ä»¥ç”¨ä¸€ä¸ªä»0åˆ°100è¿™ä¸ªåŒºé—´çš„æ¨ªè½´æ¥ä¸¾ä¾‹ã€‚</p>
<p>â€AIâ€œè¿™ä¸ªè¯çš„æ¦‚ç‡ä¸º36%ï¼Œé‚£ä¹ˆåœ¨æ¨ªè½´ä¸Šç»™å®ƒåˆ†é…0åˆ°36è¿™æ®µåŒºé—´ï¼Œç§‘æŠ€çš„æ¦‚ç‡æ˜¯32%ï¼Œæˆ‘ä»¬å°±ç»™å®ƒåˆ†é…éšåçš„é•¿åº¦ä¸º32çš„è¿™æ®µåŒºé—´ï¼Œä»¥æ­¤ç±»æ¨ã€‚</p>
<p><img src="https://p3.ssl.qhimg.com/d/inn/e95dd5159b0f/WechatIMG6955.jpg" alt="WechatIMG6955" loading="lazy"/></p>
<p>ç„¶åç”Ÿæˆä¸€ä¸ª0åˆ°100çš„éšæœºæ•°ã€‚æ¯”å¦‚è¯´éšæœºæ•°æ˜¯8ï¼Œè½åˆ°äº†è¿™ä¸ª[0,36]è¿™ä¸ªåŒºé—´ï¼Œæˆ‘ä»¬å°±é€‰æ‹© <code>AI</code>ã€‚è¿™ä¸ªå°±å«åšç»™æ¯ä¸ªè¯åˆ†é…ä¸æ¦‚ç‡ç›¸ç­‰çš„æœºä¼šã€‚è¿™æ„å‘³ç€ï¼Œè™½ç„¶â€œAIâ€æ¦‚ç‡æœ€é«˜ï¼Œä½†æ¨¡å‹ä¹Ÿæœ‰æœºä¼šé€‰æ‹©â€œç§‘æŠ€â€æˆ–â€œå¥‡èˆâ€ã€‚è¿™ç§æœºåˆ¶ä¿è¯äº†å›ç­”çš„åˆç†æ€§ï¼ŒåŒæ—¶èµ‹äºˆäº† AI åˆ›é€ åŠ›å’Œå˜åŒ–ã€‚</p>
<h4 data-id="heading-2">Temperature å¯¹å¤§æ¨¡å‹çš„ä½œç”¨</h4>
<p><img src="https://p1.ssl.qhimg.com/d/inn/d9d7b0cdadfc/resurece_1.png" alt="æˆªå±2025-12-06 15.13.53" loading="lazy"/></p>
<p>åœ¨æ¦‚ç‡è½¬æ¢æ¨¡å—ï¼Œæˆ‘ä»¬å¯¹ <code>Softmax</code> å‡½æ•°è¿›è¡Œäº†ç®€åŒ–ï¼Œè®¾ç½®äº† <code>T(Temperature)</code> çš„å–å€¼ä¸º1ï¼Œå®Œæ•´ç‰ˆä¸­ï¼Œæ‰€æœ‰çš„ <code>z</code> å€¼éƒ½ä¼šå…ˆé™¤ä»¥ Tï¼Œå†åŠ å…¥åˆ°æ•´ä½“çš„è¿ç®—è¿‡ç¨‹ä¸­ã€‚å‡å¦‚è°ƒæ•´ T çš„å€¼ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ</p>
<p>æˆ‘ä»¬å¯¹æ¯”ä¸€ä¸‹ T=0.1ï¼ˆä½æ¸©ï¼‰ã€T=1.0ï¼ˆæ ‡å‡†ï¼‰ã€T=2.0ï¼ˆé«˜æ¸©ï¼‰æ—¶çš„æ¦‚ç‡å˜åŒ–ï¼š</p>









































<table><thead><tr><th>è¯</th><th>T=0.1 (ä½æ¸©)</th><th>T=1.0 (ä¸­æ€§)</th><th>T=2.0 (é«˜æ¸©)</th></tr></thead><tbody><tr><td>AI</td><td>71%</td><td>36%</td><td>30%</td></tr><tr><td>ç§‘æŠ€</td><td>26%</td><td>32%</td><td>28%</td></tr><tr><td>å¥‡èˆ</td><td>4%</td><td>26%</td><td>26%</td></tr><tr><td>è‡ªè¡Œè½¦</td><td>0.0%</td><td>3%</td><td>9%</td></tr><tr><td>Hello</td><td>0.0%</td><td>2%</td><td>7%</td></tr></tbody></table>
<p><strong>æ ¸å¿ƒç»“è®º</strong>ï¼š</p>
<p><strong>T &lt; 1 (ä½æ¸©çŠ¶æ€)ï¼šèµ¢å®¶é€šåƒ</strong></p>
<ul>
<li><strong>åŸç†</strong>ï¼šå½“ T å¾ˆå°æ—¶ï¼ˆå¦‚ 0.1ï¼‰ï¼Œåˆ†æ•°è¢«æ”¾å¤§ï¼ˆé™¤ä»¥å°æ•°ç­‰äºä¹˜ä»¥å¤§æ•°ï¼‰ã€‚æŒ‡æ•°å‡½æ•° <code>e^x</code> ä¼šæ€¥å‰§æ”¾å¤§å·®å¼‚ã€‚é«˜åˆ†è¯çš„ä¼˜åŠ¿è¢«æ— é™æ‹”é«˜ï¼Œä½åˆ†è¯çš„æ¦‚ç‡è¢«å‹ç¼©è‡³è¿‘ä¹ä¸º 0ã€‚</li>
<li><strong>æ•ˆæœ</strong>ï¼šæ¦‚ç‡åˆ†å¸ƒå˜å¾—æåº¦<strong>å°–é”</strong>ã€‚æ¨¡å‹å‡ ä¹åªé€‰ç¬¬ä¸€åï¼Œè¾“å‡ºæåº¦ç¨³å®šã€ä¿å®ˆã€‚</li>
<li><strong>ç‰©ç†æ¯”å–»</strong>ï¼šä½æ¸©ä¸‹åˆ†å­è¿åŠ¨ç¼“æ…¢ï¼ŒçŠ¶æ€å›ºå®šï¼ˆå†°ï¼‰ã€‚</li>
<li><strong>é€‚ç”¨</strong>ï¼šä»£ç ç”Ÿæˆã€æ•°å­¦è§£é¢˜ï¼ˆä¸¥è°¨ï¼Œä¸å®¹å‡ºé”™ï¼‰ã€‚</li>
</ul>
<p><strong>T &gt; 1 (é«˜æ¸©çŠ¶æ€)ï¼šä¼—ç”Ÿå¹³ç­‰</strong></p>
<ul>
<li><strong>åŸç†</strong>ï¼šå½“ T å¾ˆå¤§æ—¶ï¼ˆå¦‚ 2.0ï¼‰ï¼Œåˆ†æ•°è¢«ç¼©å°ã€‚å·®å¼‚è¢«æ‹‰å¹³ï¼ŒæŒ‡æ•°è¿ç®—åçš„ç»“æœå·®åˆ«ä¸å¤§ã€‚</li>
<li><strong>æ•ˆæœ</strong>ï¼šæ¦‚ç‡åˆ†å¸ƒå˜å¾—<strong>å¹³ç¼“</strong>ã€‚é«˜åˆ†è¯ä¼˜åŠ¿ä¸å†æ˜æ˜¾ï¼Œé•¿å°¾è¯ï¼ˆå¦‚â€œè‡ªè¡Œè½¦â€ï¼‰ä¹Ÿæœ‰äº†è¢«é€‰ä¸­çš„æœºä¼šã€‚</li>
<li><strong>ç‰©ç†æ¯”å–»</strong>ï¼šé«˜æ¸©ä¸‹åˆ†å­è¿åŠ¨å‰§çƒˆï¼ŒçŠ¶æ€æ··ä¹±ä¸”ä¸å¯é¢„æµ‹ï¼ˆæ²¸æ°´ï¼‰ã€‚</li>
<li><strong>é€‚ç”¨</strong>ï¼šåˆ›æ„å†™ä½œã€å¤´è„‘é£æš´ï¼ˆéœ€è¦æƒŠå–œï¼Œå®¹å¿åå·®ï¼‰ã€‚</li>
</ul>
<p>é€šè¿‡ä¸Šé¢çš„è®¡ç®—å¯¹æ¯”ï¼Œ<strong>ä¸€å¥è¯æ€»ç»“ Temperatureï¼šå®ƒæ§åˆ¶çš„æ˜¯â€œè´«å¯Œå·®è·â€ã€‚ä½ T æ‹‰å¤§å·®è·ï¼Œé«˜ T ç¼©å°å·®è·ã€‚</strong></p>
<h4 data-id="heading-3">Top P å¯¹å¤§æ¨¡å‹çš„ä½œç”¨</h4>
<p><strong>Top P å¹¶ä¸æ”¹å˜æ¦‚ç‡æœ¬èº«ï¼Œè€Œæ˜¯æ”¹å˜é€‰æ‹©çš„èŒƒå›´</strong>ã€‚<code>Top P</code> ä½œç”¨åœ¨ä¸Šé¢çš„é‡‡æ ·ç¯èŠ‚ã€‚åœ¨åŠ æƒé‡‡æ ·ç¯èŠ‚ï¼Œæ ¹æ®æ¯ä¸€ä¸ªè¯çš„æ¦‚ç‡ç»™å®ƒä»¬åˆ†é…äº†å¯¹ç­‰çš„åŒºé—´ï¼Œç„¶åç”Ÿæˆäº†ä¸€ä¸ªéšæœºæ•°ï¼Œéšæœºæ•°è½åˆ°å“ªä¸ªåŒºé—´ï¼Œå°±è¾“å‡ºå“ªä¸ªåŒºé—´çš„å€¼ï¼Œè¿™æ ·å›ç­”å°±ä¼šå˜å¾—å¤šç§å¤šæ ·ï¼Œä½†æ˜¯è¿™ä¹ŸåŸ‹ä¸‹äº†éšæ‚£ã€‚</p>
<p>è™½ç„¶"è‡ªè¡Œè½¦"åªæœ‰3%çš„æ¦‚ç‡ï¼Œä½†åªè¦ä½ è¯•çš„æ¬¡æ•°è¶³å¤Ÿå¤šï¼Œå¤§æ¨¡å‹æœ€åè¿˜æ˜¯å¾ˆæœ‰å¯èƒ½è¾“å‡º"è‡ªè¡Œè½¦"è¿™ä¸‰ä¸ªå­—çš„ã€‚è¿™è‚¯å®šä¸æ˜¯ä½ æƒ³è¦çš„ç­”æ¡ˆã€‚å¤§æ¨¡å‹çš„è¯æ±‡è¡¨é‡Œé¢æœ‰å‡ åä¸‡ä¸ªè¯ï¼Œé™¤äº†å¤´éƒ¨çš„å‡ ä¸ªåˆç†è¯ï¼Œåé¢åŸºæœ¬ä¸Šéƒ½æ˜¯æ‹–ç€é•¿é•¿çš„ä¸€ä¸²ä½æ¦‚ç‡çš„åƒåœ¾è¯ã€‚æˆ‘ä»¬ç®¡è¿™äº›è¯å«åš<strong>é•¿å°¾è¯</strong>ã€‚</p>
<p>æ¯”å¦‚åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼š"è‡ªè¡Œè½¦"ä¸ "Hello" å°±æ˜¯é•¿å°¾è¯ï¼Œä¸ºäº†é˜²æ­¢æ¨¡å‹å»é€‰è¿™äº›é•¿å°¾è¯ï¼Œå°±éœ€è¦ä¸€ä¸ªä¿å®‰, æŠŠè¿™äº›ç¦»è°±çš„é€‰é¡¹éƒ½æ‹¦åœ¨é—¨å¤–ï¼Œè¿™å°±æ˜¯ Top P çš„ä½œç”¨äº†ã€‚</p>
<p><strong>æœºåˆ¶è¯¦è§£ï¼š</strong></p>
<p>Top P çš„å…¨ç§°ä¸ºï¼š<strong>Top Cumulative Probability</strong>ï¼ˆæœ€é«˜ç´¯åŠ æ¦‚ç‡ï¼‰ï¼ŒPæŒ‡çš„å°±æ˜¯ä¸€ä¸ªæ¦‚ç‡é˜ˆå€¼ã€‚æ¨¡å‹ä»é«˜åˆ†è¯å¼€å§‹å¾€ä¸‹ç´¯åŠ æ¦‚ç‡ï¼Œä¸€æ—¦ç´¯åŠ å€¼è¶…è¿‡ Pï¼Œåé¢çš„è¯å…¨éƒ¨åˆ‡æ‰ã€‚</p>
<p>å‡è®¾æˆ‘ä»¬è®¾ç½® <strong>Top P = 0.9</strong>ï¼š</p>
<ol>
<li><strong>AI</strong> (36%) -&gt; ç´¯åŠ  36% (&lt;90%ï¼Œä¿ç•™)</li>
<li><strong>ç§‘æŠ€</strong> (32%) -&gt; ç´¯åŠ  68% (&lt;90%ï¼Œä¿ç•™)</li>
<li><strong>å¥‡èˆ</strong> (26%) -&gt; ç´¯åŠ  94% (<strong>&gt;90%ï¼Œè§¦å‘é˜ˆå€¼ï¼</strong>) -&gt; <strong>ä¿ç•™â€œå¥‡èˆâ€ï¼Œæˆªæ–­åç»­æ‰€æœ‰è¯ã€‚</strong></li>
</ol>
<p>ç»“æœï¼šâ€œè‡ªè¡Œè½¦â€ã€â€œHelloâ€ç­‰é•¿å°¾è¯ç›´æ¥è¢«ä¸¢å¼ƒã€‚å‰©ä¸‹çš„ä¸‰ä¸ªè¯é‡æ–°å½’ä¸€åŒ–æ¦‚ç‡ï¼Œç„¶ååœ¨å®ƒä»¬ä¹‹é—´è¿›è¡Œé‡‡æ ·ã€‚</p>
<img src="https://p2.ssl.qhimg.com/d/inn/f0bab89f4759/Wechat.jpg" loading="lazy"/>
<p><strong>æ ¸å¿ƒç»“è®º</strong></p>
<p>Top P å°±åƒä¸€ä¸ª<strong>åŠ¨æ€çš„é—¨æ§›</strong>ã€‚</p>
<ul>
<li><strong>Top P ä½ (e.g., 0.1)</strong>ï¼šåªä¿ç•™æœ€å¤´éƒ¨çš„å‡ ä¸ªè¯ï¼Œæåº¦ä¿å®ˆã€‚</li>
<li><strong>Top P é«˜ (e.g., 0.9)</strong>ï¼šå…è®¸æ›´å¤šå¯èƒ½æ€§çš„è¯è¿›å…¥å€™é€‰æ± ï¼Œä¿ç•™å¤šæ ·æ€§ï¼ŒåŒæ—¶åˆ‡é™¤æä¸é è°±çš„å°¾éƒ¨ã€‚</li>
</ul>
<p>æ‰€ä»¥æ€»ç»“ä¸€ä¸‹ï¼š</p>


























<table><thead><tr><th>å‚æ•°</th><th>ä½å€¼æ•ˆæœ</th><th>é«˜å€¼æ•ˆæœ</th><th>é€‚ç”¨åœºæ™¯</th><th>ä¸å¦ä¸€å‚æ•°åŒºåˆ«</th></tr></thead><tbody><tr><td>Temperature</td><td>å·®è·æ”¾å¤§ï¼Œèµ¢å®¶é€šåƒï¼Œç¨³å®š</td><td>å·®è·ç¼©å°ï¼Œå‡ç­‰ï¼Œå¤šæ ·</td><td>ä½ï¼šä»£ç /æ•°å­¦ï¼›é«˜ï¼šå°è¯´/idea</td><td>å…¨å±€æ¦‚ç‡åˆ†å¸ƒ</td></tr><tr><td>Top P</td><td>å¤´éƒ¨çª„ï¼Œåˆ‡é•¿å°¾ï¼Œä¿å®ˆ</td><td>é—¨æ§›å®½ï¼Œå…¼å®¹ï¼Œéšæœº</td><td>ä½ï¼šä¸“ä¸šQ&amp;Aï¼›é«˜ï¼šå¼€æ”¾è®¨è®º</td><td>å°¾éƒ¨è¿‡æ»¤é˜ˆå€¼</td></tr></tbody></table>
<h4 data-id="heading-4">å»ºè®®</h4>
<ol>
<li><strong>é€šå¸¸åªè°ƒæ•´å…¶ä¸­ä¸€ä¸ª</strong>ï¼šè™½ç„¶å¯ä»¥åŒæ—¶è°ƒæ•´ï¼Œä½†ä¸ºäº†æ§åˆ¶å˜é‡ï¼Œä¸»æµå»ºè®®æ˜¯å›ºå®šä¸€ä¸ªï¼ˆå¦‚ Top P = 1ï¼‰ï¼Œåªè°ƒå¦ä¸€ä¸ªã€‚</li>
<li><strong>å‘æ•£æ€ç»´åœºæ™¯</strong>ï¼ˆå†™å°è¯´ã€æƒ³ç‚¹å­ï¼‰ï¼š
<ul>
<li><strong>æ¨è</strong>ï¼šè®¾ç½® <code>0.8 &lt;= T &lt;= 1.2</code> å·¦å³ æˆ– è®¾ç½® Top P ä¸º 0.9å·¦å³ã€‚</li>
<li>è®©æ¨¡å‹â€œå‘æ•£â€ä¸€ä¼šå„¿ï¼Œä½†åˆ«å¤ªç¦»è°±ã€‚</li>
</ul>
</li>
<li><strong>ä¸¥è°¨é€»è¾‘åœºæ™¯</strong>ï¼ˆå†™ä»£ç ã€æå–æ•°æ®ï¼‰ï¼š
<ul>
<li><strong>æ¨è</strong>ï¼šè®¾ç½® <code>0.0 &lt;= T &lt;= 0.2</code>  æˆ–  <code>0.1 &lt;= Top P &lt;= 0.2</code> å·¦å³ã€‚</li>
<li>ç¡®ä¿æ¨¡å‹åªé€‰æ¦‚ç‡æœ€é«˜çš„é‚£ä¸ªè¯ï¼Œä¿è¯é€»è¾‘çš„è¿è´¯å’Œè¯­æ³•çš„æ­£ç¡®ã€‚</li>
</ul>
</li>
</ol>
<p>ç†è§£äº†è¿™ä¸¤ä¸ªå‚æ•°ï¼Œä½ å°±ä¸æ˜¯åœ¨ç›²ç›®åœ°â€œç‚¼ä¸¹â€ï¼Œè€Œæ˜¯åœ¨ç²¾å‡†åœ°è°ƒè¯•ä½ çš„æ•°å­—å¼•æ“ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Springç›‘å¬å™¨ï¼ˆApplicationEventï¼‰ï¼šæ¯”MQæ›´è½»çš„å¼‚æ­¥ç¥å™¨ï¼]]></title>    <link>https://juejin.cn/post/7605136148592394267</link>    <guid>https://juejin.cn/post/7605136148592394267</guid>    <pubDate>2026-02-11T07:11:09.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605136148592394267" data-draft-id="7605164560711680026" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Springç›‘å¬å™¨ï¼ˆApplicationEventï¼‰ï¼šæ¯”MQæ›´è½»çš„å¼‚æ­¥ç¥å™¨ï¼"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-02-11T07:11:09.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¥å¥‡å°æ±¤åœ†"/> <meta itemprop="url" content="https://juejin.cn/user/1151943919285431"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Springç›‘å¬å™¨ï¼ˆApplicationEventï¼‰ï¼šæ¯”MQæ›´è½»çš„å¼‚æ­¥ç¥å™¨ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1151943919285431/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¥å¥‡å°æ±¤åœ†
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-11T07:11:09.000Z" title="Wed Feb 11 2026 07:11:09 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">å¼•è¨€ï¼šå½“å’–å•¡åº—é­é‡ç¨‹åºå‘˜</h3>
<blockquote>
<p>â€œé¡¾å®¢æŒ¤çˆ†æŸœå°æ—¶ï¼Œä¼˜ç§€çš„åº—é•¿ä¸ä¼šå‚¬ä¿ƒå’–å•¡å¸ˆåŠ é€Ÿï¼Œè€Œæ˜¯å¯åŠ¨ä¸€å¥—ç§‘å­¦çš„åä½œæœºåˆ¶â€”â€”<br/>
å°±åƒ<a href="https://link.juejin.cn?target=https%3A%2F%2Fzhida.zhihu.com%2Fsearch%3Fcontent_id%3D267240109%26content_type%3DArticle%26match_order%3D1%26q%3DSpring%25E4%25BA%258B%25E4%25BB%25B6%25E9%25A9%25B1%25E5%258A%25A8%26zhida_source%3Dentity" target="_blank" title="https://zhida.zhihu.com/search?content_id=267240109&amp;content_type=Article&amp;match_order=1&amp;q=Spring%E4%BA%8B%E4%BB%B6%E9%A9%B1%E5%8A%A8&amp;zhida_source=entity" ref="nofollow noopener noreferrer">Springäº‹ä»¶é©±åŠ¨</a>ï¼Œç”¨**<a href="https://link.juejin.cn?target=https%3A%2F%2Fzhida.zhihu.com%2Fsearch%3Fcontent_id%3D267240109%26content_type%3DArticle%26match_order%3D1%26q%3D%25E5%258F%2591%25E5%25B8%2583-%25E8%25AE%25A2%25E9%2598%2585%25E6%25A8%25A1%25E5%25BC%258F%26zhida_source%3Dentity" target="_blank" title="https://zhida.zhihu.com/search?content_id=267240109&amp;content_type=Article&amp;match_order=1&amp;q=%E5%8F%91%E5%B8%83-%E8%AE%A2%E9%98%85%E6%A8%A1%E5%BC%8F&amp;zhida_source=entity" ref="nofollow noopener noreferrer">å‘å¸ƒ-è®¢é˜…æ¨¡å¼</a>**è®©ç³»ç»Ÿåƒé¡¶çº§å’–å•¡å›¢é˜Ÿèˆ¬ä¼˜é›…åº”å¯¹æ´ªå³°æµé‡â€</p>
</blockquote>
<hr/>
<h3 data-id="heading-1">ä¸€ã€å’–å•¡åº—é‡Œçš„ç›‘å¬å™¨ï¼š3ä½çµé­‚è§’è‰²</h3>
<p><strong>çœŸå®æˆ˜åœºè¿˜åŸ</strong>ï¼ˆæ¯ç§’1000è®¢å•çš„å’–å•¡åº—ï¼‰ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6dfd00f842a94dc1afdadf5700036f83~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56We5aWH5bCP5rGk5ZyG:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771398668&amp;x-signature=VpRDGs7r7VU1pms23hN7WDGuhuo%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-2">1. äº‹ä»¶å®šä¹‰ï¼šå’–å•¡åº—çš„ã€Œè®¢å•å°ç¥¨ã€</h3>
<pre><code class="hljs language-scala" lang="scala">public <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">OrderEvent</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">ApplicationEvent</span> </span>{
    <span class="hljs-comment">// finalä¿®é¥°çš„è®¢å•IDï¼šå°±åƒå’–å•¡å¸ˆç»ä¸æ¶‚æ”¹çš„è®¢å•å°ç¥¨</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> orderId;  
    
    <span class="hljs-comment">// åˆ›å»ºæ—¶é—´ï¼šè®°å½•è®¢å•è¯ç”Ÿæ—¶åˆ»ï¼ˆçº¿ç¨‹å®‰å…¨ä¸å¯å˜ï¼‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">LocalDateTime</span> createTime = <span class="hljs-type">LocalDateTime</span>.now(); 

    <span class="hljs-comment">// æ— setterï¼šé˜²æ­¢å¤šçº¿ç¨‹å¹¶å‘ç¯¡æ”¹è®¢å•</span>
}
</code></pre>
<h3 data-id="heading-3">2. äº‹ä»¶å‘å¸ƒï¼šåº—é•¿çš„ã€Œå¹¿æ’­ç³»ç»Ÿã€</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderService</span> {
    <span class="hljs-comment">// åº—é•¿çš„éº¦å…‹é£ï¼ˆæ„é€ å™¨æ³¨å…¥æ›´ä¼˜é›…ï¼‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> ApplicationEventPublisher eventPublisher; 

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">createOrder</span><span class="hljs-params">(Order order)</span> {
        <span class="hljs-comment">// æ ¸å¿ƒä¸šåŠ¡ï¼šç”Ÿæˆè®¢å•ï¼ˆå’–å•¡åº—æ¥å•ï¼‰</span>
        eventPublisher.publishEvent(<span class="hljs-keyword">new</span> <span class="hljs-title class_">OrderEvent</span>(<span class="hljs-built_in">this</span>, order.getId())); <span class="hljs-comment">// ğŸ“¢ å¹¿æ’­è®¢å•</span>
    }
}
</code></pre>
<h3 data-id="heading-4">3. äº‹ä»¶ç›‘å¬ï¼šå’–å•¡å›¢é˜Ÿçš„ã€ŒæŠ€èƒ½å“åº”ã€</h3>
<pre><code class="hljs language-less" lang="less"><span class="hljs-variable">@Component</span>
public class CoffeeMakerListener {
    <span class="hljs-variable">@EventListener</span> 
    <span class="hljs-variable">@Order</span>(<span class="hljs-number">1</span>) <span class="hljs-comment">// ä¼˜å…ˆçº§ï¼šå…ˆåšå’–å•¡å†æ¨èç”œç‚¹</span>
    public void <span class="hljs-built_in">makeCoffee</span>(OrderEvent event) {
        <span class="hljs-comment">// ä¸“æ³¨åšå’–å•¡ï¼Œä¸å…³å¿ƒè°ç»“è´¦</span>
        <span class="hljs-selector-tag">log</span><span class="hljs-selector-class">.info</span>(<span class="hljs-string">"å’–å•¡å¸ˆï¼šå¼€å§‹åˆ¶ä½œè®¢å•{}çš„æ‹¿é“..."</span>, event.<span class="hljs-built_in">getOrderId</span>());
    }
}
</code></pre>
<hr/>
<h3 data-id="heading-5">äºŒã€æ‰›ä½äº¿çº§æµé‡çš„3æŠŠåˆ©å™¨</h3>
<h3 data-id="heading-6">ğŸ”¥Â <strong>åœºæ™¯1ï¼šå†·å¯åŠ¨ç¼“å­˜é¢„åŠ è½½ï¼ˆé˜²é›ªå´©ï¼‰</strong></h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CachePreloader</span> {
    <span class="hljs-comment">// åœ¨Springå®¹å™¨"å¼€åº—å‡†å¤‡å®Œæˆ"æ—¶è§¦å‘</span>
    <span class="hljs-meta">@EventListener(ContextRefreshedEvent.class)</span> 
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">initCache</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// å¼‚æ­¥åŠ è½½çœæ—¶30%ï¼ˆå®æµ‹æ•°æ®ï¼‰</span>
        CompletableFuture.runAsync(() -&gt; {
            provinceService.loadProvincesToCache(); 
            productService.preloadHotProducts();
        });
    }
}
</code></pre>
<h3 data-id="heading-7">ğŸ’¡Â <strong>åœºæ™¯2ï¼šäº‹åŠ¡æˆåŠŸåçš„ç¼“å­˜æ¸…ç†ï¼ˆä¿ä¸€è‡´æ€§ï¼‰</strong></h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// åªåœ¨æ•°æ®åº“æäº¤æˆåŠŸåæ‰§è¡Œï¼ˆé¿å…è„æ¸…ç†ï¼‰</span>
<span class="hljs-meta">@TransactionalEventListener</span>(phase = <span class="hljs-title class_">TransactionPhase</span>.<span class="hljs-property">AFTER_COMMIT</span>)
<span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">cleanCache</span>(<span class="hljs-params">OrderUpdateEvent event</span>) {
    <span class="hljs-comment">// å¼‚æ­¥æ¸…ç†ï¼šä¸é˜»å¡ç»“è´¦é˜Ÿä¼</span>
    redisTemplate.<span class="hljs-title function_">executeAsync</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">RedisCallback</span>&lt;&gt;() {
        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> <span class="hljs-title class_">Void</span> <span class="hljs-title function_">doInRedis</span>(<span class="hljs-params">RedisConnection connection</span>) {
            connection.<span class="hljs-title function_">del</span>((<span class="hljs-string">"order:"</span> + event.<span class="hljs-title function_">getId</span>()).<span class="hljs-title function_">getBytes</span>());
            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
        }
    });
}
</code></pre>
<h3 data-id="heading-8">ğŸš€Â <strong>åœºæ™¯3ï¼šæ— ä¾µå…¥å¼åŠŸèƒ½æ‰©å±•</strong></h3>
<p><strong>æ”¹é€ å‰ï¼ˆè‡ƒè‚¿çš„æ”¶é“¶å°ï¼‰</strong> ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">public void <span class="hljs-built_in">pay</span>() {
    paymentService<span class="hljs-selector-class">.pay</span>();   <span class="hljs-comment">// æ ¸å¿ƒæ”¯ä»˜</span>
    auditService<span class="hljs-selector-class">.log</span>();     <span class="hljs-comment">// å®¡è®¡ä»£ç å…¥ä¾µ</span>
    riskService<span class="hljs-selector-class">.check</span>();    <span class="hljs-comment">// é£æ§ä»£ç è€¦åˆ</span>
    marketingService<span class="hljs-selector-class">.addPoints</span>(); <span class="hljs-comment">// æ–°å¢éœ€æ±‚æ±¡æŸ“æ ¸å¿ƒ</span>
}
</code></pre>
<p><strong>äº‹ä»¶é©±åŠ¨æ”¹é€ å</strong>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// çº¯å‡€æ”¯ä»˜æ ¸å¿ƒï¼ˆä¸“æ³¨æ”¶é’±ï¼‰</span>
<span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">pay</span>(<span class="hljs-params">Long orderId</span>) {
    paymentService.<span class="hljs-title function_">process</span>(orderId);
    eventPublisher.<span class="hljs-title function_">publishEvent</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">PaymentSuccessEvent</span>(orderId)); <span class="hljs-comment">// ğŸ“¢ å¹¿æ’­æ”¯ä»˜æˆåŠŸ</span>
}

<span class="hljs-comment">// æ–°å¢ç§¯åˆ†æ¨¡å—ï¼ˆæ— éœ€ä¿®æ”¹æ”¯ä»˜ä»£ç ï¼‰</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PointListener</span> {
    <span class="hljs-meta">@EventListener</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">addPoints</span>(<span class="hljs-params">PaymentSuccessEvent event</span>) {
        <span class="hljs-comment">// ç§¯åˆ†æœåŠ¡ç‹¬ç«‹æ¼”è¿›</span>
        pointService.<span class="hljs-title function_">award</span>(event.<span class="hljs-title function_">getOrderId</span>(), <span class="hljs-number">100</span>); 
    }
}
</code></pre>
<hr/>
<h3 data-id="heading-9">ä¸‰ã€è¡€æ³ªæ•™è®­ï¼š3ä¸ªæ·±å¤œåŠ ç­äº‹æ•…</h3>
<h3 data-id="heading-10">ğŸš«Â <strong>äº‹æ•…1ï¼šå¤šçº¿ç¨‹ç¯¡æ”¹äº‹ä»¶ï¼ˆè®¢å•æ··ä¹±ï¼‰</strong></h3>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// é”™è¯¯ï¼äº‹ä»¶å¿…é¡»æ˜¯åªè¯»çš„</span>
@EventListener
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">handle</span>(<span class="hljs-params">OrderEvent <span class="hljs-keyword">event</span></span>)</span> {
    <span class="hljs-keyword">event</span>.setStatus(<span class="hljs-string">"MODIFIED"</span>); <span class="hljs-comment">// âš ï¸ å¤šçº¿ç¨‹å¹¶å‘ä¿®æ”¹å¼•å‘è®¢å•é”™ä¹±</span>
}
</code></pre>
<blockquote>
<p><strong>æ­£ç¡®åšæ³•</strong>ï¼šäº‹ä»¶ç±»è®¾è®¡ä¸ºfinalå­—æ®µ + æ— setter</p>
</blockquote>
<h3 data-id="heading-11">ğŸš«Â <strong>äº‹æ•…2ï¼šå¼‚æ­¥äº‹ä»¶ä¸¢å¤±ï¼ˆé¡¾å®¢æŠ•è¯‰ï¼‰</strong></h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@SpringBootApplication</span>
<span class="hljs-meta">@EnableAsync</span> <span class="hljs-comment">// å¿…é¡»æ˜¾å¼å¼€å¯å¼‚æ­¥</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Application</span> {
    <span class="hljs-meta">@Bean</span>(<span class="hljs-string">"eventExecutor"</span>) 
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">Executor</span> <span class="hljs-title function_">taskExecutor</span>(<span class="hljs-params"/>) {
        <span class="hljs-comment">// å…³é”®å‚æ•°ï¼šæ‹’ç»ç­–ç•¥ç”¨CallerRunsPolicyï¼ˆé¿å…ä¸¢å•ï¼‰</span>
        <span class="hljs-title class_">ThreadPoolTaskExecutor</span> executor = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadPoolTaskExecutor</span>();
        executor.<span class="hljs-title function_">setRejectedExecutionHandler</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadPoolExecutor</span>.<span class="hljs-title class_">CallerRunsPolicy</span>());
        <span class="hljs-keyword">return</span> executor;
    }
}

<span class="hljs-comment">// æŒ‡å®šçº¿ç¨‹æ± æ‰§è¡Œ</span>
<span class="hljs-meta">@Async</span>(<span class="hljs-string">"eventExecutor"</span>) 
<span class="hljs-meta">@EventListener</span>
<span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">asyncHandle</span>(<span class="hljs-params">OrderEvent event</span>) {...}
</code></pre>
<h3 data-id="heading-12">ğŸš«Â <strong>äº‹æ•…3ï¼šäº‹ä»¶å¾ªç¯è°ƒç”¨ï¼ˆå’–å•¡å¸ˆå¡æ­»ï¼‰</strong></h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// é”™è¯¯ï¼šåœ¨äº‹ä»¶å¤„ç†ä¸­å‘å¸ƒæ–°äº‹ä»¶</span>
<span class="hljs-meta">@EventListener</span>
<span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">handleA</span>(<span class="hljs-params">EventA a</span>) {
    publisher.<span class="hljs-title function_">publishEvent</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">EventB</span>()); 
}

<span class="hljs-meta">@EventListener</span>
<span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">handleB</span>(<span class="hljs-params">EventB b</span>) {
    publisher.<span class="hljs-title function_">publishEvent</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">EventA</span>()); <span class="hljs-comment">// â™»ï¸ æ­»å¾ªç¯ï¼</span>
}
</code></pre>
<hr/>
<h3 data-id="heading-13">å››ã€å…³é”®æŠ‰æ‹©ï¼šç›‘å¬å™¨ vs MQ æ¶æ„å¯¹å’</h3>



































<table><thead><tr><th>ç»´åº¦</th><th>Springç›‘å¬å™¨</th><th>MQæ¶ˆæ¯é˜Ÿåˆ—</th></tr></thead><tbody><tr><td>é€‚ç”¨åœºæ™¯</td><td>å•æœºäº‹åŠ¡åä½œ âœ…</td><td>è·¨æœåŠ¡é€šä¿¡ âœ…</td></tr><tr><td>å¯é æ€§</td><td>è¿›ç¨‹å®•æœºäº‹ä»¶æ¶ˆå¤± âŒ</td><td>æŒä¹…åŒ–/é‡è¯• âœ…</td></tr><tr><td>ååé‡</td><td>å†…å­˜çº§ä¼ è¾“ï¼Œ10w+/s ğŸš€</td><td>å—ç½‘ç»œé™åˆ¶ï¼Œ1w/s âš ï¸</td></tr><tr><td>å¼€å‘æ•ˆç‡</td><td>å…æ­å»ºMQï¼Œæ³¨è§£å³ç”¨ âœ…</td><td>éœ€éƒ¨ç½²ä¸­é—´ä»¶ âŒ</td></tr><tr><td>æ•°æ®ä¸€è‡´æ€§</td><td>æœ¬åœ°äº‹åŠ¡ä¿éšœ âœ…</td><td>éœ€åˆ†å¸ƒå¼äº‹åŠ¡ âš ï¸</td></tr></tbody></table>
<blockquote>
<p><strong>é»„é‡‘å†³ç­–æ ‘</strong>ï¼š<br/>
åŒJVMäº‹åŠ¡æ“ä½œ â†’ Springç›‘å¬å™¨ï¼ˆå¼€å‘æ•ˆç‡ç‹ç‚¸ï¼‰<br/>
è·¨æœåŠ¡æœ€ç»ˆä¸€è‡´ â†’Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fzhida.zhihu.com%2Fsearch%3Fcontent_id%3D267240109%26content_type%3DArticle%26match_order%3D1%26q%3DRocketMQ%26zhida_source%3Dentity" target="_blank" title="https://zhida.zhihu.com/search?content_id=267240109&amp;content_type=Article&amp;match_order=1&amp;q=RocketMQ&amp;zhida_source=entity" ref="nofollow noopener noreferrer">RocketMQ</a>ï¼ˆå¯é æ€§æ‹…å½“ï¼‰</p>
</blockquote>
<hr/>
<h3 data-id="heading-14">äº”ã€æ€§èƒ½è°ƒä¼˜ï¼šç›‘å¬å™¨çš„æ¶¡è½®å¢å‹</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a85cb1c8bdeb497ab3e4b14d0750168c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56We5aWH5bCP5rGk5ZyG:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771398668&amp;x-signature=%2BHQjbpnZkOjLB5Edq7zbCdK4Tnk%3D" alt="" loading="lazy"/></p>
<hr/>
<h3 data-id="heading-15">å…­ã€æœ€ä½³å®è·µï¼š5æ¡ç”Ÿå­˜æ³•åˆ™</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5847a6a2c4b14d2ab91a8d04fa665f80~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56We5aWH5bCP5rGk5ZyG:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771398668&amp;x-signature=%2BaI6ZNi45bhAMrtniHeoN%2B%2F0v6w%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a21ac721a9da489a9ea6eb6377c3eb60~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56We5aWH5bCP5rGk5ZyG:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771398668&amp;x-signature=dW57MkBOc%2BqHAiOjZvQSipC9msY%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-16">ç»“è¯­ï¼šäº‹ä»¶é©±åŠ¨çš„è‰ºæœ¯</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/495b2972c6ff43ef97da9e139322332e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56We5aWH5bCP5rGk5ZyG:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771398668&amp;x-signature=HFTBFBQkZjXr6JRe35Es9ZYAtaI%3D" alt="" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ·±å…¥æµ…å‡ºçš„èŠä¸‹MCP]]></title>    <link>https://juejin.cn/post/7605142381152534591</link>    <guid>https://juejin.cn/post/7605142381152534591</guid>    <pubDate>2026-02-11T07:16:37.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605142381152534591" data-draft-id="7605142381152485439" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ·±å…¥æµ…å‡ºçš„èŠä¸‹MCP"/> <meta itemprop="keywords" content="Cursor,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-02-11T07:16:37.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‰ç«¯çš„é˜¶æ¢¯"/> <meta itemprop="url" content="https://juejin.cn/user/2604076678261512"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ·±å…¥æµ…å‡ºçš„èŠä¸‹MCP
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2604076678261512/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‰ç«¯çš„é˜¶æ¢¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-11T07:16:37.000Z" title="Wed Feb 11 2026 07:16:37 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€MCP åº•å±‚æ¡†æ¶å…¨æ™¯è§£è¯»ï¼šåè®®å±‚ä¸ä¼ è¾“å±‚å¦‚ä½•è§£è€¦</h2>
<p>Model Context Protocolï¼ˆMCPï¼‰å¹¶ä¸æ˜¯ä¸€ä¸ªç®€å•çš„â€œå·¥å…·è°ƒç”¨åè®®â€ï¼Œè€Œæ˜¯ä¸€å¥— é¢å‘æ™ºèƒ½ä½“ï¼ˆAgentï¼‰åœºæ™¯çš„é€šç”¨é€šä¿¡æ¡†æ¶ã€‚å®ƒé€šè¿‡æ¸…æ™°çš„åˆ†å±‚è®¾è®¡ï¼ŒæŠŠã€Œåè®®è¯­ä¹‰ã€ä¸ã€Œé€šä¿¡æ–¹å¼ã€å½»åº•è§£è€¦ï¼Œä½¿åŒä¸€å¥— Agent åè®®æ—¢èƒ½è·‘åœ¨æœ¬åœ°è¿›ç¨‹ï¼Œä¹Ÿèƒ½è¿è¡Œåœ¨æµè§ˆå™¨ã€å¾®æœåŠ¡ä¹ƒè‡³å®æ—¶åŒå‘ç³»ç»Ÿä¸­ã€‚</p>
<p><strong>1ã€æ•´ä½“æ¶æ„ï¼šä¸‰å±‚è§£è€¦è®¾è®¡</strong></p>
<p>ä»æ¶æ„ä¸Šçœ‹ï¼ŒMCP å¯ä»¥æ¸…æ™°æ‹†åˆ†ä¸ºä¸‰å±‚ï¼š</p>
<p>ä¸Šå±‚åº”ç”¨å±‚ï¼šAgentã€Toolsã€Resourcesã€Prompts ç­‰ä¸šåŠ¡èƒ½åŠ›</p>
<p>åè®®å±‚ï¼ˆProtocol Layerï¼‰ï¼šåŸºäº JSON-RPC 2.0 çš„ä¼šè¯åè®®</p>
<p>ä¼ è¾“å±‚ï¼ˆTransport Layerï¼‰ï¼šè´Ÿè´£æ¶ˆæ¯åœ¨ä¸åŒé€šé“ä¸­çš„å®é™…ä¼ è¾“</p>
<p>è¿™ä¸‰å±‚çš„è¾¹ç•Œéå¸¸æ˜ç¡®ï¼š</p>
<p>åè®®å±‚åªå…³å¿ƒã€Œæ¶ˆæ¯è¯­ä¹‰ä¸ä¼šè¯çŠ¶æ€ã€ï¼Œ</p>
<p>ä¼ è¾“å±‚åªå…³å¿ƒã€Œæ¶ˆæ¯å¦‚ä½•æ”¶å‘ã€ï¼Œ</p>
<p>ä¸Šå±‚åº”ç”¨å®Œå…¨ä¸éœ€è¦æ„ŸçŸ¥åº•å±‚é€šä¿¡ç»†èŠ‚ã€‚</p>
<p><strong>2ã€åè®®å±‚ï¼šæŠŠ JSON-RPC å˜æˆâ€œä¼šè¯åè®®â€</strong></p>
<p>ï¼ˆ1ï¼‰BaseSessionï¼šMCP çš„é€šä¿¡å¼•æ“</p>
<p>åè®®å±‚çš„æ ¸å¿ƒæ˜¯ BaseSessionã€‚å®ƒå¹¶ä¸æ˜¯ç®€å•å°è£… JSON-RPCï¼Œè€Œæ˜¯è§£å†³äº† Agent åœºæ™¯ä¸‹æœ€å…³é”®çš„å‡ ä»¶äº‹ï¼š</p>
<ul>
<li>ç»Ÿä¸€è¯·æ±‚ï¼ˆRequestï¼‰ã€å“åº”ï¼ˆResponseï¼‰ã€é€šçŸ¥ï¼ˆNotificationï¼‰æ¨¡å‹</li>
<li>è‡ªåŠ¨ç»´æŠ¤è¯·æ±‚â€“å“åº”çš„ ID å…³è”ï¼Œæ”¯æŒå¹¶å‘è°ƒç”¨</li>
<li>å±è”½åº•å±‚è¯»å†™æµå·®å¼‚ï¼ˆstdio / HTTP / WebSocketï¼‰</li>
<li>æä¾›ç»Ÿä¸€çš„é”™è¯¯ä¸å¼‚å¸¸å¤„ç†æœºåˆ¶</li>
</ul>
<p>å¯ä»¥ç†è§£ä¸ºï¼šBaseSession æŠŠâ€œå­—èŠ‚æµé€šä¿¡â€å‡çº§æˆäº†â€œå¯é çš„ä¼šè¯é€šä¿¡â€ã€‚</p>
<p>ï¼ˆ2ï¼‰ClientSession ä¸ ServerSessionï¼šè§’è‰²è¯­ä¹‰è¡¥å…¨</p>
<p>åœ¨ BaseSession ä¹‹ä¸Šï¼ŒMCP åˆ†åˆ«ä¸ºå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯è¡¥é½è§’è‰²è¯­ä¹‰ï¼š</p>
<p>ClientSession</p>
<ul>
<li>ä¸»åŠ¨å‘èµ·Â <code>initialize</code>Â è¯·æ±‚</li>
<li>å£°æ˜è‡ªèº«èƒ½åŠ›ï¼ˆcapabilitiesï¼‰</li>
<li>åœ¨æ¡æ‰‹å®Œæˆåæ‰èƒ½è¿›è¡Œæ­£å¸¸è°ƒç”¨</li>
</ul>
<p>ServerSession</p>
<ul>
<li>å†…åµŒåˆå§‹åŒ–çŠ¶æ€æœºï¼Œä¸¥æ ¼çº¦æŸäº¤äº’é¡ºåº</li>
<li>æ ¡éªŒå®¢æˆ·ç«¯èƒ½åŠ›ï¼Œå†³å®šæ˜¯å¦å…è®¸æŸäº›é€šçŸ¥æˆ–åŠŸèƒ½</li>
<li>ç¡®ä¿åè®®æ‰§è¡Œçš„å®‰å…¨æ€§ä¸ä¸€è‡´æ€§</li>
</ul>
<p>è¿™ç§è®¾è®¡ä½¿ MCP çš„é€šä¿¡è¿‡ç¨‹å…·å¤‡ æ˜ç¡®çš„ç”Ÿå‘½å‘¨æœŸå’ŒçŠ¶æ€çº¦æŸï¼Œè€Œä¸æ˜¯â€œéšä¾¿å‘æ¶ˆæ¯â€ã€‚</p>
<p><strong>3ã€æ ‡å‡†äº¤äº’æµç¨‹ï¼šä¸‰é˜¶æ®µæ¨¡å‹</strong></p>
<p>ä»é€šä¿¡æµç¨‹ä¸Šçœ‹ï¼ŒMCP çš„å®Œæ•´äº¤äº’å¯ä»¥æŠ½è±¡ä¸ºä¸‰ä¸ªé˜¶æ®µï¼š</p>
<p>ï¼ˆ1ï¼‰æ¡æ‰‹åˆå§‹åŒ–</p>
<p>Client å‘é€Â <code>initialize</code>ï¼ŒåŒæ–¹äº¤æ¢åè®®ç‰ˆæœ¬ä¸èƒ½åŠ›é›†ï¼Œå¹¶é€šè¿‡Â <code>initialized</code>Â ç¡®è®¤å®Œæˆã€‚</p>
<p>ï¼ˆ2ï¼‰æ­£å¸¸é€šä¿¡</p>
<p>åŒæ–¹å¯åŒå‘å‘é€ Requestâ€“Responseï¼ˆåŒæ­¥è°ƒç”¨ï¼‰æˆ– Notificationï¼ˆå¼‚æ­¥äº‹ä»¶ï¼‰ã€‚</p>
<p>ï¼ˆ3ï¼‰ä¼˜é›…æ”¶å°¾</p>
<p>ä»»æ„ä¸€ç«¯å¯ä¸»åŠ¨å…³é—­ä¼šè¯ï¼Œæˆ–ç”±åº•å±‚é€šé“æ–­å¼€è§¦å‘æ¸…ç†ã€‚</p>
<p>è¿™ä¸€æµç¨‹ç¡®ä¿äº† MCP åœ¨å¤æ‚ Agent åœºæ™¯ä¸‹ä»ç„¶å…·å¤‡å¯æ§çš„é€šä¿¡ç§©åºã€‚</p>
<p><strong>4ã€ä¼ è¾“å±‚ï¼šå¤šå½¢æ€é€šä¿¡çš„ç»Ÿä¸€æ‰¿è½½</strong></p>
<p>MCP åœ¨ä¼ è¾“å±‚æä¾›äº†å¤šç§å®ç°ï¼Œä»¥é€‚é…ä¸åŒéƒ¨ç½²ä¸æ€§èƒ½éœ€æ±‚ï¼Œä½†æ‰€æœ‰ä¼ è¾“æ–¹å¼éƒ½ä¸¥æ ¼éµå¾ªåŒä¸€å¥—åè®®å±‚é€»è¾‘ã€‚</p>
<p>ï¼ˆ1ï¼‰Stdio Transport</p>
<p>åŸºäºæ ‡å‡†è¾“å…¥/è¾“å‡ºçš„æœ¬åœ°è¿›ç¨‹é€šä¿¡ï¼Œæå…¶è½»é‡ï¼Œé€‚åˆ CLI å·¥å…·ã€ç¼–è¾‘å™¨æ’ä»¶å’Œæœ¬åœ° Agentã€‚</p>
<p>ï¼ˆ2ï¼‰HTTP + SSE</p>
<p>é€šè¿‡ HTTP POST å‘é€æ¶ˆæ¯ï¼ŒSSE å•å‘æ¨é€ç»“æœï¼Œæµè§ˆå™¨å‹å¥½ï¼Œé€‚åˆå‰åç«¯åˆ†ç¦»å’Œè½»é‡å¾®æœåŠ¡åœºæ™¯ã€‚</p>
<p>ï¼ˆ3ï¼‰Streamable HTTP</p>
<p>åœ¨åŒä¸€è·¯å¾„ä¸Šæ··åˆ POST ä¸ SSEï¼Œæ”¯æŒä¼šè¯ç®¡ç†ã€æ–­çº¿é‡è¿å’Œæµå¼å“åº”ï¼Œæ˜¯æ›´åç”Ÿäº§çº§çš„ HTTP æ–¹æ¡ˆã€‚</p>
<p>ï¼ˆ4ï¼‰WebSocket</p>
<p>çœŸæ­£çš„å…¨åŒå·¥é€šé“ï¼Œä½å»¶è¿Ÿã€é«˜é¢‘äº¤äº’ï¼Œé€‚åˆå®æ—¶ Agent ä¸å‰ç«¯åµŒå…¥å¼ Copilot åœºæ™¯ã€‚</p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œä¼ è¾“å±‚çš„å·®å¼‚åªå½±å“â€œæ€ä¹ˆè¿â€ï¼Œä¸å½±å“â€œæ€ä¹ˆç”¨â€ã€‚</p>
<p><strong>5ã€æ€»ç»“ï¼šä¸ºä»€ä¹ˆ MCP é€‚åˆä½œä¸º Agent é€šä¿¡åº•åº§</strong></p>
<p>ä»æ•´ä½“è®¾è®¡æ¥çœ‹ï¼ŒMCP çš„æ ¸å¿ƒä»·å€¼åœ¨äºï¼š</p>
<ul>
<li>ç”¨ JSON-RPC 2.0 æ„å»ºäº†æœ‰çŠ¶æ€ã€å¯å¹¶å‘ã€å¯æ‰©å±•çš„ä¼šè¯åè®®</li>
<li>é€šè¿‡èƒ½åŠ›å£°æ˜ä¸åˆå§‹åŒ–æ¡æ‰‹ï¼Œä¿éšœäº¤äº’é¡ºåºä¸å®‰å…¨è¾¹ç•Œ</li>
<li>å½»åº•è§£è€¦åè®®ä¸ä¼ è¾“ï¼Œä½¿ Agent èƒ½åœ¨æœ¬åœ°ã€æµè§ˆå™¨å’Œç”Ÿäº§å¾®æœåŠ¡ç¯å¢ƒä¸­å¤ç”¨åŒä¸€é€šä¿¡æ¨¡å‹</li>
</ul>
<p>è¿™ä¹Ÿæ˜¯ MCP èƒ½æˆä¸º Agent æ—¶ä»£â€œé€šç”¨é€šä¿¡åº•åº§â€çš„å…³é”®åŸå› ã€‚</p>
<h2 data-id="heading-1">äºŒã€MCP çš„ä¸‰å¤§æ ¸å¿ƒæ¦‚å¿µï¼šToolsã€Resources ä¸ Prompts</h2>
<p>åœ¨ MCPï¼ˆModel Context Protocolï¼‰ä¸­ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰èƒ½åŠ›éƒ½é€šè¿‡â€œå·¥å…·è°ƒç”¨â€æ¥å®Œæˆã€‚ä¸ºäº†æ¸…æ™°åœ°åˆ’åˆ† è°æ¥æ§åˆ¶ã€è°æ¥å†³ç­–ã€è°æ¥æ‰§è¡Œï¼ŒMCP å°† Agent å¯ç”¨çš„èƒ½åŠ›æŠ½è±¡ä¸ºä¸‰ç±»æ ¸å¿ƒåŸè¯­ï¼š</p>
<p>Prompt è´Ÿè´£â€œå¦‚ä½•æé—®â€</p>
<p>Resource è´Ÿè´£â€œæä¾›èƒŒæ™¯â€</p>
<p>Tool è´Ÿè´£â€œæ‰§è¡Œæ“ä½œâ€</p>
<p>è¿™ä¸‰è€…å…±åŒæ„æˆäº† MCP ä¸­ æ¨¡å‹ã€å®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯ä¹‹é—´çš„èŒè´£è¾¹ç•Œã€‚</p>
<p><strong>1ã€Resourcesï¼šä¸ºæ¨¡å‹æä¾›â€œå¯æ§ä¸Šä¸‹æ–‡â€</strong></p>
<p>èµ„æºï¼ˆResourcesï¼‰ æ˜¯ MCP ä¸­ç”¨äºå‘ LLM æš´éœ²ä¸Šä¸‹æ–‡æ•°æ®çš„æ ¸å¿ƒåŸè¯­ä¹‹ä¸€ã€‚</p>
<p>å®ƒçš„æœ¬è´¨ä¸æ˜¯â€œèƒ½åŠ›â€ï¼Œè€Œæ˜¯å¯è¢«è¯»å–çš„èƒŒæ™¯ä¿¡æ¯ã€‚</p>
<p>èµ„æºå¯ä»¥æ˜¯ä»»æ„ç±»å‹çš„æ•°æ®ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºï¼š</p>
<ul>
<li>æ–‡ä»¶å†…å®¹ï¼ˆæ–‡æ¡£ã€æ—¥å¿—ï¼‰</li>
<li>æ•°æ®åº“è®°å½•ï¼ˆç»“æ„åŒ–æ•°æ®ï¼‰</li>
<li>API å“åº”</li>
<li>å®æ—¶ç³»ç»ŸçŠ¶æ€</li>
<li>æˆªå›¾ã€å›¾ç‰‡ã€éŸ³é¢‘ã€è§†é¢‘ç­‰äºŒè¿›åˆ¶å†…å®¹</li>
</ul>
<p>ï¼ˆ1ï¼‰èµ„æºçš„æ ¸å¿ƒç‰¹å¾</p>
<p>URI å”¯ä¸€æ ‡è¯†</p>
<p>æ¯ä¸ªèµ„æºéƒ½é€šè¿‡ URI å®šä½ï¼Œä¾‹å¦‚ï¼š</p>
<p>ä»£ç è¯­è¨€ï¼šjavascript</p>
<hr/>
<p>AIä»£ç è§£é‡Š</p>
<pre><code class="hljs language-ruby" lang="ruby"><span class="hljs-symbol">file:</span>/<span class="hljs-regexp">//home</span><span class="hljs-regexp">/user/docs</span><span class="hljs-regexp">/report.pdfpostgres:/</span><span class="hljs-regexp">/db.example.com/customers</span><span class="hljs-regexp">/schemascreen:/</span><span class="hljs-regexp">/localhost/display</span>
</code></pre>
<p>åº”ç”¨æ§åˆ¶ï¼ˆApp-controlledï¼‰</p>
<p>èµ„æºç”±å®¢æˆ·ç«¯åº”ç”¨å†³å®šï¼š</p>
<ul>
<li>ä½•æ—¶æš´éœ²</li>
<li>æš´éœ²å“ªäº›</li>
<li>æ˜¯å¦æä¾›ç»™æ¨¡å‹ä½œä¸ºä¸Šä¸‹æ–‡</li>
</ul>
<p>æ¢å¥è¯è¯´ï¼šæ¨¡å‹ä¸èƒ½â€œä¸»åŠ¨ç´¢å–èµ„æºâ€ï¼Œåªèƒ½ä½¿ç”¨ Host ç»™å®ƒçš„ä¸Šä¸‹æ–‡ã€‚</p>
<p>ï¼ˆ2ï¼‰é™æ€èµ„æºä¸åŠ¨æ€èµ„æº</p>
<p>é™æ€èµ„æº</p>
<p>URI åœ¨æœåŠ¡æä¾›æ—¶å·²æ˜ç¡®ï¼Œä¾‹å¦‚æŸä¸ªæ—¥å¿—æ–‡ä»¶ã€å›ºå®šè·¯å¾„æ–‡æ¡£ã€‚</p>
<p>åŠ¨æ€èµ„æº</p>
<p>é€šè¿‡ URI Templateï¼ˆRFC 6570ï¼‰å®šä¹‰ï¼Œèµ„æºå†…å®¹éšå‚æ•°å˜åŒ–ï¼š</p>
<p>ä»£ç è¯­è¨€ï¼šjavascript</p>
<hr/>
<p>AIä»£ç è§£é‡Š</p>
<pre><code class="hljs language-ini" lang="ini">logs://recent?<span class="hljs-attr">timeframe</span>={duration}
</code></pre>
<p>å®¢æˆ·ç«¯åªéœ€å¡«å……å‚æ•°å³å¯æ„é€ å…·ä½“èµ„æº URIã€‚</p>
<p>ï¼ˆ3ï¼‰èµ„æºèƒ½åŠ›å£°æ˜ï¼ˆCapabilitiesï¼‰</p>
<p>æ”¯æŒèµ„æºçš„ MCP Server éœ€è¦åœ¨åˆå§‹åŒ–é˜¶æ®µå£°æ˜èƒ½åŠ›ï¼Œä¾‹å¦‚ï¼š</p>
<p>ä»£ç è¯­è¨€ï¼šjavascript</p>
<hr/>
<p>AIä»£ç è§£é‡Š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span><span class="hljs-attr">"capabilities"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"resources"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"subscribe"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span><span class="hljs-attr">"listChanged"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">}</span>
</code></pre>
<p><code>subscribe</code>ï¼šæ˜¯å¦æ”¯æŒè®¢é˜…å•ä¸ªèµ„æºçš„å˜æ›´</p>
<p><code>listChanged</code>ï¼šèµ„æºåˆ—è¡¨å˜åŒ–æ—¶æ˜¯å¦ä¸»åŠ¨é€šçŸ¥å®¢æˆ·ç«¯</p>
<p>ï¼ˆ4ï¼‰èµ„æºçš„è®¾è®¡å®šä½</p>
<p>èµ„æºçš„è®¾è®¡ç›®æ ‡æ˜¯ï¼š</p>
<p>ä¸ºæ¨¡å‹æä¾›â€œäº‹å®èƒŒæ™¯â€ï¼Œè€Œä¸æ˜¯â€œæ‰§è¡Œèƒ½åŠ›â€</p>
<p>å¦‚æœä½ å¸Œæœ›æœåŠ¡ç«¯ä¸»åŠ¨é©±åŠ¨æ¨¡å‹è¡Œä¸ºï¼Œé‚£ä¹ˆåº”è¯¥ä½¿ç”¨ Toolsï¼Œè€Œä¸æ˜¯ Resourcesã€‚</p>
<p><strong>2ã€Toolsï¼šæ¨¡å‹å¯æ§çš„â€œæ‰§è¡Œèƒ½åŠ›â€</strong></p>
<p>å·¥å…·ï¼ˆToolsï¼‰ æ˜¯ MCP ä¸­å”¯ä¸€å…è®¸æ¨¡å‹ç›´æ¥è§¦å‘â€œåŠ¨ä½œâ€çš„åŸè¯­ã€‚</p>
<p>ä¸èµ„æºä¸åŒï¼Œå·¥å…·ä¸æ˜¯è¢«è¯»å–ï¼Œè€Œæ˜¯è¢« è°ƒç”¨ï¼ˆcallï¼‰ã€‚</p>
<p>ï¼ˆ1ï¼‰Tool çš„æ ¸å¿ƒå®šä½</p>
<p>æ¨¡å‹æ§åˆ¶ï¼ˆModel-controlledï¼‰ç”¨äºæ‰§è¡Œï¼š</p>
<p>API è°ƒç”¨</p>
<ul>
<li>æ•°æ®æ›´æ–°</li>
<li>æŸ¥è¯¢ã€è®¡ç®—</li>
<li>å¤–éƒ¨ç³»ç»Ÿæ“ä½œ</li>
</ul>
<p>ä½†éœ€è¦æ³¨æ„ï¼š</p>
<p>æ¨¡å‹åªæ˜¯â€œå†³å®šæ˜¯å¦è°ƒç”¨å·¥å…·â€ï¼ŒçœŸæ­£çš„è°ƒç”¨ç”±å®¢æˆ·ç«¯å®Œæˆã€‚</p>
<p>è¿™æ­£æ˜¯ MCP æ‰€å¼ºè°ƒçš„ï¼š</p>
<p>æ¨¡å‹ä¸»æ§ï¼Œå®¢æˆ·ç«¯é©±åŠ¨ï¼ˆModel decides, Client executesï¼‰</p>
<p>ï¼ˆ2ï¼‰Tool çš„å®šä¹‰ç»“æ„</p>
<p>æ¯ä¸ªå·¥å…·åŒ…å«ä»¥ä¸‹ä¿¡æ¯ï¼š</p>
<ul>
<li><code>nameï¼šå”¯ä¸€æ ‡è¯†</code></li>
<li><code>descriptionï¼šåŠŸèƒ½è¯´æ˜</code></li>
<li><code>inputSchemaï¼šå‚æ•°ç»“æ„ï¼ˆJSON Schemaï¼‰</code></li>
<li><code>annotationsï¼ˆå¯é€‰ï¼‰ï¼šè¡Œä¸ºè¯´æ˜</code></li>
</ul>
<p>ï¼ˆ3ï¼‰Tool çš„è°ƒç”¨æœºåˆ¶</p>
<p>åœ¨ MCP ä¸­ï¼š</p>
<ul>
<li>åˆ—å‡ºå·¥å…·ï¼š<code>tools/list</code></li>
<li>è°ƒç”¨å·¥å…·ï¼š<code>tools/call</code></li>
<li>è¿”å›ç»“æœï¼šæ ‡å‡† JSON-RPC å“åº”</li>
</ul>
<p>æ•´ä¸ªè¿‡ç¨‹å®Œå…¨åè®®åŒ–ã€å¯å®¡è®¡ã€å¯æ‹¦æˆªã€‚</p>
<p><strong>3ã€Promptsï¼šæ ‡å‡†åŒ–çš„â€œæé—®æ¨¡æ¿â€</strong></p>
<p>åœ¨ MCP ä¸­ï¼ŒPrompt æ˜¯ç»§ Resources å’Œ Tools ä¹‹åçš„ç¬¬ä¸‰ä¸ªæ ¸å¿ƒåŸè¯­ï¼Œä½†å®ƒå…³æ³¨çš„ä¸æ˜¯æ•°æ®ï¼Œä¹Ÿä¸æ˜¯æ‰§è¡Œï¼Œè€Œæ˜¯â€”â€”</p>
<p>å¦‚ä½•æŠŠç”¨æˆ·æ„å›¾ç»„ç»‡æˆâ€œæ¨¡å‹æ›´å®¹æ˜“ç†è§£å’Œæ‰§è¡Œâ€çš„è¾“å…¥ç»“æ„</p>
<p>Prompt æœ¬è´¨ä¸Šæ˜¯ç”± <a href="https://link.juejin.cn?target=https%3A%2F%2Fcloud.tencent.com%2Fproduct%2Fcvm%3Ffrom_column%3D20065%26from%3D20065" target="_blank" title="https://cloud.tencent.com/product/cvm?from_column=20065&amp;from=20065" ref="nofollow noopener noreferrer">æœåŠ¡å™¨</a>ç«¯é¢„å…ˆå®šä¹‰çš„ä¸€ç»„å¯å¤ç”¨å¯¹è¯æ¨¡æ¿ä¸äº¤äº’æµç¨‹ã€‚</p>
<p>ï¼ˆ1ï¼‰Prompt çš„è®¾è®¡ç†å¿µ</p>
<p>ç”¨æˆ·æ§åˆ¶ï¼ˆUser-controlledï¼‰</p>
<p>Prompt å¿…é¡»ç”±ç”¨æˆ·æˆ– UI æ˜¾å¼é€‰æ‹©è§¦å‘</p>
<p>åè®®ä¸ç»‘å®šäº¤äº’æ–¹å¼</p>
<p>å¯ä»¥æ˜¯ Slash å‘½ä»¤ã€èœå•ã€æŒ‰é’®æˆ–è¡¨å•</p>
<p>å¼ºè°ƒç»“æ„åŒ–è€Œéè‡ªç”±å‘æŒ¥</p>
<hr/>
<p>ï¼ˆ2ï¼‰Prompt çš„æ ¸å¿ƒèƒ½åŠ›</p>
<p>å‚æ•°åŒ–ï¼šæ”¯æŒåŠ¨æ€è¾“å…¥ï¼ˆå¦‚æ—¶é—´èŒƒå›´ã€è¯­è¨€ã€ä¸»é¢˜ï¼‰</p>
<p>èµ„æºæ•´åˆï¼šå¯åµŒå…¥èµ„æºä½œä¸ºä¸Šä¸‹æ–‡</p>
<p>å¤šè½®äº¤äº’ï¼šé€‚åˆè¯Šæ–­ã€æ•™å­¦ã€å¼•å¯¼å¼ä»»åŠ¡</p>
<p>ç»Ÿä¸€å‘ç°ï¼šé€šè¿‡Â <code>prompts/list</code>ã€<code>prompts/get</code>Â ç»Ÿä¸€ç®¡ç†</p>
<p>UI å‹å¥½ï¼šå¤©ç„¶é€‚åˆäº§å“åŒ–å°è£…</p>
<p>å…¸å‹ Prompt å®šä¹‰ç»“æ„å¦‚ä¸‹ï¼š</p>
<p>ä»£ç è¯­è¨€ï¼šjavascript</p>
<hr/>
<p>AIä»£ç è§£é‡Š</p>
<pre><code class="hljs language-css" lang="css">{  name: string;  description: string;  arguments: [    {      name: string;      description: string;      required: boolean;    }  ];}
</code></pre>
<p>ï¼ˆ3ï¼‰ä¸€ä¸ªå…¸å‹åº”ç”¨åœºæ™¯</p>
<p>ä¾‹å¦‚åœ¨æ•™å­¦æˆ–ä¼ä¸šçŸ¥è¯†åœºæ™¯ä¸­ï¼š</p>
<ul>
<li>æ•™å­¦è®¾è®¡è€…åœ¨ MCP Server ä¸­é¢„ç½® Prompt æ¨¡æ¿</li>
<li>æ•™å¸ˆé€šè¿‡è‡ªç„¶è¯­è¨€æˆ–èœå•é€‰æ‹© Prompt</li>
<li>ç³»ç»Ÿè‡ªåŠ¨å¡«å‚å¹¶å¼•å¯¼å¤šè½®å¯¹è¯</li>
<li>å³ä½¿éæŠ€æœ¯ç”¨æˆ·ï¼Œä¹Ÿèƒ½â€œè°ƒåŠ¨â€æ™ºèƒ½ä½“å®Œæˆå¤æ‚ä»»åŠ¡</li>
</ul>
<p>Prompt è§£å†³çš„æ˜¯ â€œç»éªŒå¦‚ä½•è¢«æ ‡å‡†åŒ–å¤ç”¨â€ çš„é—®é¢˜ã€‚</p>
<p><strong>4ã€ä¸‰å¤§åŸè¯­çš„è§’è‰²åˆ†å·¥</strong></p>
<p>æœ€åï¼Œç”¨ä¸‰å¥è¯æ€»ç»“ MCP çš„æ ¸å¿ƒåŸè¯­è®¾è®¡ï¼š</p>
<p>Prompt å…³æ³¨ â€œå¦‚ä½•æé—®â€ï¼Œè®©å¤æ‚ä»»åŠ¡å˜å¾—å¯å¤ç”¨ã€å¯å¼•å¯¼</p>
<p>Resource æä¾› â€œèƒŒæ™¯äº‹å®â€ï¼Œè®©æ¨¡å‹æœ‰ä¸Šä¸‹æ–‡å¯ä¾</p>
<p>Tool æ‰¿æ‹… â€œæ‰§è¡ŒåŠ¨ä½œâ€ï¼Œè®©æ¨¡å‹çœŸæ­£å½±å“å¤–éƒ¨ä¸–ç•Œ</p>
<p>è¿™ä¸‰è€…å…±åŒæ„æˆäº† MCP ä¸­ å®‰å…¨ã€å¯æ§ã€å¯äº§å“åŒ–çš„ Agent èƒ½åŠ›ä½“ç³»ã€‚</p>
<h2 data-id="heading-2">ä¸‰ã€MCPä¸‰ä¸ªæ ¸å¿ƒæ¦‚å¿µå®æˆ˜æ¼”ç¤º</h2>
<p>ä»¥ä¸‹æ˜¯githubä¸Šå¤§æ‹¿ç¼–å†™çš„æµ‹è¯•Demoï¼Œä»£ç æ˜¯claude codeç”¨javascriptså†™çš„ï¼Œæœ‰å…´è¶£å¯ä»¥çœ‹ä¸‹ã€‚ä»£ç ä»“åº“ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fwangjoey2012-sudo%2Fmcp-demos" target="_blank" title="https://github.com/wangjoey2012-sudo/mcp-demos" ref="nofollow noopener noreferrer">github.com/wangjoey201â€¦</a></p>
<p><strong>1ã€Tools</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/82faaca76a8a4c6689c981a97db1df24~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv55qE6Zi25qKv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771398997&amp;x-signature=PpQmiLUrAARfdofincpI4q%2FOFZY%3D" alt="" loading="lazy"/></p>
<p><strong>2ã€Resources</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7a1adaa4d3364ebd94660c5fad3ba61e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv55qE6Zi25qKv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771398997&amp;x-signature=OT6SvjbcA%2Bxcq8oB%2BadLGiP1mZA%3D" alt="" loading="lazy"/></p>
<p><strong>3ã€Prompts</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/01db62c23eea4cec8465e7fcdf9472dd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv55qE6Zi25qKv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771398997&amp;x-signature=xUdhJXk4MBXG%2BpQipYMTc2izV7s%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-3">å››ã€ç»“è¯­</h2>
<p>æœ¬æ–‡æ·±å…¥æµ…å‡ºçš„ä»‹ç»äº†MCPåº•å±‚å®ç°çš„ä¸€äº›æ¡†æ¶åŠåè®®ï¼Œå¸Œæœ›å¯¹å¤§å®¶äº†è§£mcpæœ‰å¸®åŠ©ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸€çœ‹å°±æ‡‚çš„ Haskell æ•™ç¨‹ - ç±»å‹ç±»]]></title>    <link>https://juejin.cn/post/7605145921617559604</link>    <guid>https://juejin.cn/post/7605145921617559604</guid>    <pubDate>2026-02-11T06:58:58.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605145921617559604" data-draft-id="7604574877035986987" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸€çœ‹å°±æ‡‚çš„ Haskell æ•™ç¨‹ - ç±»å‹ç±»"/> <meta itemprop="keywords" content="Haskell"/> <meta itemprop="datePublished" content="2026-02-11T06:58:58.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Anita_Sun"/> <meta itemprop="url" content="https://juejin.cn/user/1811635884786839"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸€çœ‹å°±æ‡‚çš„ Haskell æ•™ç¨‹ - ç±»å‹ç±»
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1811635884786839/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Anita_Sun
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-11T06:58:58.000Z" title="Wed Feb 11 2026 06:58:58 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ç±»å‹ç±»æ˜¯Haskellæœ€å…·è¾¨è¯†åº¦çš„è®¾è®¡ï¼Œæ ¸å¿ƒæ˜¯<strong>æŠŠâ€œè¡Œä¸ºâ€å’Œâ€œæ•°æ®â€å½»åº•åˆ†å¼€</strong>â€”â€”å…ˆå®šä¹‰â€œèƒ½åšä»€ä¹ˆâ€ï¼ˆè¡Œä¸ºè§„åˆ™ï¼‰ï¼Œå†ç»™ä»»æ„ç±»å‹ï¼ˆå†…ç½®/è‡ªå®šä¹‰ï¼‰ç»‘å®šâ€œå…·ä½“æ€ä¹ˆåšâ€ï¼ˆè¡Œä¸ºå®ç°ï¼‰ï¼Œå®Œå…¨æ‘†è„±é¢å‘å¯¹è±¡ç»§æ‰¿çš„æŸç¼šï¼Œå®ç°æè‡´çµæ´»çš„å¤šæ€ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€ä¸ºä»€ä¹ˆHaskelléœ€è¦ç±»å‹ç±»ï¼Ÿâ€”â€”æ‘†è„±OOPç»§æ‰¿çš„å‘</h2>
<p>Haskellè®¾è®¡ç±»å‹ç±»çš„æ ¹æœ¬ç›®çš„ï¼Œæ˜¯è§£å†³é¢å‘å¯¹è±¡ï¼ˆOOPï¼‰ç»§æ‰¿ä½“ç³»çš„ä¸‰å¤§æ ¸å¿ƒé—®é¢˜ï¼Œè®©â€œè¡Œä¸ºæ‰©å±•â€æ›´çµæ´»ã€‚</p>
<h3 data-id="heading-1">1. OOPç»§æ‰¿çš„3ä¸ªè‡´å‘½é—®é¢˜</h3>
<p>OOPæŠŠâ€œè¡Œä¸ºï¼ˆæ–¹æ³•ï¼‰â€ç»‘æ­»åœ¨â€œæ•°æ®ï¼ˆç±»ï¼‰â€ä¸Šï¼Œå¯¼è‡´ï¼š</p>
<ul>
<li><strong>æ”¹ä¸äº†å†…ç½®ç±»å‹</strong>ï¼šæ¯”å¦‚Javaæƒ³ç»™<code>int</code>åŠ ä¸ªè‡ªå®šä¹‰æ‰“å°æ–¹æ³•ï¼Œæ ¹æœ¬æ”¹ä¸äº†<code>int</code>çš„æºç ï¼›</li>
<li><strong>ç±»è¶Šå†™è¶Šå¤š</strong>ï¼šæƒ³ç»™â€œæ•°å­—â€åŠ â€œè´Ÿæ•°åˆ¤æ–­â€ï¼Œå¾—æ–°å»º<code>NegativeInt</code>ã€<code>NegativeFloat</code>ç­‰å­ç±»ï¼Œç±»çˆ†ç‚¸ï¼›</li>
<li><strong>ä»£ç é‡å¤</strong>ï¼š<code>Int</code>å’Œ<code>Double</code>éƒ½è¦å®ç°â€œåŠ æ³•â€ï¼Œå¾—åœ¨ä¸¤ä¸ªç±»é‡Œå„å†™ä¸€éï¼Œæ²¡æ³•å¤ç”¨ã€‚</li>
</ul>
<h3 data-id="heading-2">2. ç±»å‹ç±»çš„æ ¸å¿ƒæ€è·¯ï¼šå…ˆå®šè¡Œä¸ºï¼Œå†ç»‘ç±»å‹</h3>
<p>ç±»å‹ç±»åå…¶é“è€Œè¡Œä¹‹ï¼Œæ ¸å¿ƒæ˜¯â€œ<strong>è¡Œä¸ºå’Œæ•°æ®è§£è€¦</strong>â€ï¼š</p>
<ol>
<li>æŠ½ç¦»é€šç”¨è¡Œä¸ºï¼šæŠŠâ€œèƒ½ç›¸åŠ â€â€œèƒ½æ‰“å°â€â€œèƒ½æ¯”è¾ƒâ€è¿™ç±»è¡Œä¸ºåšæˆç‹¬ç«‹çš„â€œè§„åˆ™æ‰‹å†Œâ€ï¼ˆç±»å‹ç±»ï¼‰ï¼›</li>
<li>çµæ´»ç»‘å®šç±»å‹ï¼šç»™ä»»æ„ç±»å‹ï¼ˆæ¯”å¦‚å†…ç½®çš„<code>Int</code>ã€ä½ å†™çš„<code>User</code>ï¼‰ç»‘å®šè¿™ä¸ªè§„åˆ™ï¼Œä¸ç”¨æ”¹ç±»å‹æºç ï¼›</li>
<li>æ— å±‚çº§æŸç¼šï¼šä¸€ä¸ªç±»å‹èƒ½ç»‘å®šå¤šä¸ªè¡Œä¸ºï¼Œä¸€ä¸ªè¡Œä¸ºèƒ½é€‚é…å¤šä¸ªç±»å‹ï¼Œæ²¡æœ‰ç»§æ‰¿çš„â€œçˆ¶å­å…³ç³»â€ã€‚</li>
</ol>
<h3 data-id="heading-3">3. ç±»å‹ç±»â‰ OOPæ¥å£ï¼ˆæ ¸å¿ƒåŒºåˆ«ï¼‰</h3>
<p>å¾ˆå¤šäººä¼šæŠŠç±»å‹ç±»å’Œæ¥å£æ··æ·†ï¼Œå…¶å®äºŒè€…è®¾è®¡é€»è¾‘å®Œå…¨ä¸åŒï¼š</p>






























<table><thead><tr><th>å¯¹æ¯”ç»´åº¦</th><th>Haskellç±»å‹ç±»</th><th>OOPæ¥å£</th></tr></thead><tbody><tr><td>æ ¸å¿ƒé€»è¾‘</td><td>è¡Œä¸ºâ€œè´´â€åˆ°ä»»æ„ç±»å‹ä¸Šï¼ˆæ— éœ€æ”¹ç±»å‹ï¼‰</td><td>è¡Œä¸ºå¿…é¡»ç”±å­ç±»ç»§æ‰¿å®ç°ï¼ˆæ”¹ä¸äº†çˆ¶ç±»ï¼‰</td></tr><tr><td>å†…ç½®ç±»å‹æ”¯æŒ</td><td>ç›´æ¥ç»™<code>Int</code>/<code>String</code>åŠ è¡Œä¸ºï¼Œä¸ç”¨æ”¹æºç </td><td>å¿…é¡»æ–°å»ºå­ç±»ï¼ˆå¦‚<code>MyString</code>ï¼‰æ‰èƒ½åŠ è¡Œä¸º</td></tr><tr><td>é»˜è®¤å®ç°</td><td>åŸç”Ÿæ”¯æŒï¼ˆå†™ä¸€æ¬¡ï¼Œæ‰€æœ‰ç±»å‹å¯å¤ç”¨ï¼‰</td><td>éƒ¨åˆ†æ”¯æŒï¼ˆå¦‚Java 8åæ‰åŠ é»˜è®¤æ–¹æ³•ï¼‰</td></tr><tr><td>å¤šå‚æ•°æ”¯æŒ</td><td>æ”¯æŒï¼ˆéœ€è§£å†³æ­§ä¹‰ï¼‰</td><td>æ— åŸç”Ÿå¤šå‚æ•°æ¥å£è®¾è®¡</td></tr></tbody></table>
<p><strong>ä¸¾ä¸ªç›´è§‚ä¾‹å­</strong>ï¼š</p>
<p>æƒ³è®©å­—ç¬¦ä¸²èƒ½æ¯”è¾ƒå¤§å°ï¼ŒOOPè¦å†™<code>ComparableString</code>å­ç±»å¹¶å®ç°æ¥å£ï¼›Haskellç›´æ¥ç»™åŸç”Ÿ<code>String</code>ç»‘å®šâ€œå¯æ¯”è¾ƒâ€è¡Œä¸ºå°±è¡Œï¼Œä¸€æ­¥åˆ°ä½ã€‚</p>
<h2 data-id="heading-4">äºŒã€ç±»å‹ç±»çš„3ä¸ªæ ¸å¿ƒç¯èŠ‚ï¼šå®šä¹‰â†’å®ç°â†’ä½¿ç”¨</h2>
<p>ç±»å‹ç±»çš„ä½¿ç”¨å°±ä¸‰æ­¥ï¼Œæ¯ä¸€æ­¥éƒ½å›´ç»•â€œè¡Œä¸ºæŠ½è±¡â€å±•å¼€ï¼Œé€»è¾‘æ¸…æ™°ä¸”çµæ´»ã€‚</p>
<h3 data-id="heading-5">1. ç¬¬ä¸€æ­¥ï¼šå®šä¹‰ç±»å‹ç±»â€”â€”å†™â€œè¡Œä¸ºè§„åˆ™æ‰‹å†Œâ€</h3>
<p>ç±»å‹ç±»å®šä¹‰æ˜¯â€œåªè¯´è¦åšä»€ä¹ˆï¼Œä¸è¯´æ€ä¹ˆåšâ€çš„æ¥å£å£°æ˜ï¼Œç”¨<code>class</code>å…³é”®å­—å®ç°ã€‚</p>
<h4 data-id="heading-6">ï¼ˆ1ï¼‰åŸºç¡€å®šä¹‰ï¼šæ ¸å¿ƒæ–¹æ³•+é»˜è®¤æ–¹æ³•</h4>
<pre><code class="hljs language-rust" lang="rust">-- å®šä¹‰â€œå¯æ‰“å°â€è§„åˆ™æ‰‹å†Œï¼šaä»£è¡¨ä»»æ„èƒ½å®ç°è¯¥è¡Œä¸ºçš„ç±»å‹
class Printable a <span class="hljs-keyword">where</span>
  -- æ ¸å¿ƒæ–¹æ³•ï¼šæ— é»˜è®¤å®ç°ï¼Œå¿…é¡»ç”±ç±»å‹å®ç°
  printVal :: a <span class="hljs-punctuation">-&gt;</span> <span class="hljs-title function_ invoke__">IO</span> ()
  
  -- è¾…åŠ©æ–¹æ³•ï¼šå¸¦é»˜è®¤å®ç°ï¼Œå¯å¤ç”¨ä¹Ÿå¯é‡å†™
  printWithPrefix :: <span class="hljs-type">String</span> <span class="hljs-punctuation">-&gt;</span> a <span class="hljs-punctuation">-&gt;</span> <span class="hljs-title function_ invoke__">IO</span> ()
  -- é»˜è®¤é€»è¾‘ï¼šåŠ å‰ç¼€åè°ƒç”¨æ ¸å¿ƒæ–¹æ³•printVal
  printWithPrefix prefix x = <span class="hljs-keyword">do</span>
    putStr prefix
    printVal x
</code></pre>
<ul>
<li><strong>ç±»å‹å˜é‡ï¼ˆaï¼‰</strong> ï¼šä»£è¡¨â€œæ‰€æœ‰èƒ½éµå®ˆè¿™ä¸ªè§„åˆ™çš„ç±»å‹â€ï¼Œæ˜¯å¤šæ€çš„æ ¸å¿ƒï¼›</li>
<li><strong>æ–¹æ³•ç­¾å</strong>ï¼šåªå£°æ˜è¾“å…¥è¾“å‡ºï¼ˆæ¯”å¦‚<code>printVal</code>æ˜¯â€œæŠŠaç±»å‹çš„å€¼æ‰“å°å‡ºæ¥â€ï¼‰ï¼Œä¸å†™å…·ä½“ä»£ç ï¼›</li>
<li><strong>é»˜è®¤æ–¹æ³•</strong>ï¼šé¿å…é‡å¤ä»£ç â€”â€”å®ä¾‹åªéœ€å®ç°æ ¸å¿ƒæ–¹æ³•ï¼Œå°±èƒ½è‡ªåŠ¨æ‹¥æœ‰è¾…åŠ©æ–¹æ³•çš„èƒ½åŠ›ã€‚</li>
</ul>
<h4 data-id="heading-7">ï¼ˆ2ï¼‰è¿›é˜¶ï¼šè§£å†³å¤šå‚æ•°ç±»å‹ç±»çš„â€œæ­§ä¹‰é—®é¢˜â€</h4>
<p>æœ‰äº›è¡Œä¸ºæ¶‰åŠä¸¤ç§ç±»å‹ï¼ˆæ¯”å¦‚â€œæŠŠaç±»å‹è½¬æˆbç±»å‹â€ï¼‰ï¼Œéœ€è¦å¤šå‚æ•°ç±»å‹ç±»ï¼Œä½†ä¼šå¯¼è‡´ç¼–è¯‘å™¨â€œåˆ†ä¸æ¸…æ¨å¯¼æ–¹å‘â€ï¼ŒHaskellæä¾›ä¸¤ç§è§£å†³æ–¹æ¡ˆï¼š</p>
<h5 data-id="heading-8">é—®é¢˜åœºæ™¯ï¼šç¼–è¯‘å™¨ä¸çŸ¥é“ç›®æ ‡ç±»å‹</h5>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- å®šä¹‰â€œç±»å‹è½¬æ¢â€è§„åˆ™æ‰‹å†Œï¼ša=æºç±»å‹ï¼Œb=ç›®æ ‡ç±»å‹</span>
class <span class="hljs-keyword">Convert</span> a b <span class="hljs-keyword">where</span>
  <span class="hljs-keyword">convert</span> :: a <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> b

<span class="hljs-comment">-- å®ä¾‹1ï¼šIntè½¬String</span>
instance <span class="hljs-keyword">Convert</span> <span class="hljs-type">Int</span> String <span class="hljs-keyword">where</span>
  <span class="hljs-keyword">convert</span> n <span class="hljs-operator">=</span> "æ•°å­—ï¼š" <span class="hljs-operator">+</span><span class="hljs-operator">+</span> <span class="hljs-keyword">show</span> n

<span class="hljs-comment">-- å®ä¾‹2ï¼šIntè½¬Bool</span>
instance <span class="hljs-keyword">Convert</span> <span class="hljs-type">Int</span> Bool <span class="hljs-keyword">where</span>
  <span class="hljs-keyword">convert</span> <span class="hljs-number">0</span> <span class="hljs-operator">=</span> <span class="hljs-literal">False</span>
  <span class="hljs-keyword">convert</span> _ <span class="hljs-operator">=</span> <span class="hljs-literal">True</span>

<span class="hljs-comment">-- è°ƒç”¨æ—¶ç¼–è¯‘å™¨è’™åœˆï¼šåªçŸ¥é“a=Intï¼Œä¸çŸ¥é“bæ˜¯Stringè¿˜æ˜¯Bool</span>
<span class="hljs-comment">-- test = convert 123  -- ç›´æ¥æŠ¥é”™ï¼šç±»å‹æ­§ä¹‰</span>
</code></pre>
<h5 data-id="heading-9">è§£å†³æ–¹æ¡ˆ1ï¼šå‡½æ•°ä¾èµ–â€”â€”å‘Šè¯‰ç¼–è¯‘å™¨â€œè°å†³å®šè°â€</h5>
<pre><code class="hljs language-sql" lang="sql">{<span class="hljs-operator">-</span># <span class="hljs-keyword">LANGUAGE</span> FunctionalDependencies #<span class="hljs-operator">-</span>} <span class="hljs-comment">-- å¯ç”¨æ‰©å±•ï¼ˆå¿…é¡»åŠ ï¼‰</span>

<span class="hljs-comment">-- å…³é”®ï¼š| a -&gt; b å£°æ˜â€œæºç±»å‹aå”¯ä¸€å†³å®šç›®æ ‡ç±»å‹bâ€</span>
class <span class="hljs-keyword">Convert</span> a b <span class="hljs-operator">|</span> a <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> b <span class="hljs-keyword">where</span>
  <span class="hljs-keyword">convert</span> :: a <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> b

<span class="hljs-comment">-- åˆæ³•å®ä¾‹ï¼šIntåªèƒ½å¯¹åº”Stringï¼ˆç¬¦åˆa-&gt;bçº¦æŸï¼‰</span>
instance <span class="hljs-keyword">Convert</span> <span class="hljs-type">Int</span> String <span class="hljs-keyword">where</span>
  <span class="hljs-keyword">convert</span> n <span class="hljs-operator">=</span> "æ•°å­—ï¼š" <span class="hljs-operator">+</span><span class="hljs-operator">+</span> <span class="hljs-keyword">show</span> n

<span class="hljs-comment">-- âŒ æŠ¥é”™ï¼šåŒä¸€ä¸ªaä¸èƒ½å¯¹åº”å¤šä¸ªbï¼ˆIntä¸èƒ½æ—¢è½¬Stringåˆè½¬Boolï¼‰</span>
<span class="hljs-comment">-- instance Convert Int Bool where ...</span>

<span class="hljs-comment">-- âœ… æ­£å¸¸è°ƒç”¨ï¼šç¼–è¯‘å™¨çŸ¥é“a=Intï¼Œå°±èƒ½ç¡®å®šb=String</span>
test1 :: String
test1 <span class="hljs-operator">=</span> <span class="hljs-keyword">convert</span> <span class="hljs-number">123</span>  <span class="hljs-comment">-- è¾“å‡ºï¼š"æ•°å­—ï¼š123"</span>
</code></pre>
<h5 data-id="heading-10">è§£å†³æ–¹æ¡ˆ2ï¼šå…³è”ç±»å‹â€”â€”ç»™æºç±»å‹ç»‘å®šâ€œä¸“å±ç›®æ ‡ç±»å‹â€</h5>
<pre><code class="hljs language-sql" lang="sql">{<span class="hljs-operator">-</span># <span class="hljs-keyword">LANGUAGE</span> TypeFamilies #<span class="hljs-operator">-</span>} <span class="hljs-comment">-- å¯ç”¨æ‰©å±•ï¼ˆå¿…é¡»åŠ ï¼‰</span>

<span class="hljs-comment">-- ç±»å‹ç±»åªæœ‰ä¸€ä¸ªå‚æ•°aï¼Œç›®æ ‡ç±»å‹å˜æˆaçš„â€œé™„å±å“â€</span>
class <span class="hljs-keyword">Convert</span> a <span class="hljs-keyword">where</span>
  <span class="hljs-comment">-- æ ¸å¿ƒï¼šä¸ºæ¯ä¸ªaå®šä¹‰å”¯ä¸€çš„TargetTypeï¼ˆå…³è”ç±»å‹ï¼‰</span>
  type TargetType a  
  <span class="hljs-comment">-- è¾“å‡ºç±»å‹å›ºå®šä¸ºaçš„TargetTypeï¼Œæ— æ­§ä¹‰</span>
  <span class="hljs-keyword">convert</span> :: a <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> TargetType a

<span class="hljs-comment">-- å®ä¾‹ï¼šIntçš„ä¸“å±ç›®æ ‡ç±»å‹æ˜¯String</span>
instance <span class="hljs-keyword">Convert</span> <span class="hljs-type">Int</span> <span class="hljs-keyword">where</span>
  type TargetType <span class="hljs-type">Int</span> <span class="hljs-operator">=</span> String
  <span class="hljs-keyword">convert</span> n <span class="hljs-operator">=</span> "æ•°å­—ï¼š" <span class="hljs-operator">+</span><span class="hljs-operator">+</span> <span class="hljs-keyword">show</span> n

<span class="hljs-comment">-- âœ… æ­£å¸¸è°ƒç”¨ï¼šä¸¤ç§å†™æ³•éƒ½å¯è¡Œ</span>
test2 :: TargetType <span class="hljs-type">Int</span>  <span class="hljs-comment">-- ç­‰ä»·äº String</span>
test2 <span class="hljs-operator">=</span> <span class="hljs-keyword">convert</span> <span class="hljs-number">123</span>

test3 :: String
test3 <span class="hljs-operator">=</span> <span class="hljs-keyword">convert</span> <span class="hljs-number">123</span>
</code></pre>
<h3 data-id="heading-11">2. ç¬¬äºŒæ­¥ï¼šå®ç°å®ä¾‹â€”â€”ç»™ç±»å‹â€œç»‘å®šè¡Œä¸ºâ€</h3>
<p>å®ä¾‹ï¼ˆInstanceï¼‰æ˜¯ç±»å‹ç±»çš„â€œå…·ä½“å®ç°â€ï¼Œç”¨<code>instance</code>å…³é”®å­—æŠŠâ€œè§„åˆ™æ‰‹å†Œâ€è½åœ°åˆ°å…·ä½“ç±»å‹ä¸Šã€‚</p>
<h4 data-id="heading-12">ï¼ˆ1ï¼‰åŸºç¡€å®ä¾‹ï¼šç»™å•ä¸ªç±»å‹ç»‘å®šè¡Œä¸º</h4>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- ç»™Intå®ç°Printableï¼šåªå®ç°æ ¸å¿ƒæ–¹æ³•ï¼Œå¤ç”¨é»˜è®¤è¾…åŠ©æ–¹æ³•</span>
instance Printable <span class="hljs-type">Int</span> <span class="hljs-keyword">where</span>
  printVal n <span class="hljs-operator">=</span> putStrLn $ "æ•´æ•°ï¼š" <span class="hljs-operator">+</span><span class="hljs-operator">+</span> <span class="hljs-keyword">show</span> n

<span class="hljs-comment">-- ç»™Stringå®ç°Printableï¼šé‡å†™è¾…åŠ©æ–¹æ³•ï¼Œå®šåˆ¶é€»è¾‘</span>
instance Printable String <span class="hljs-keyword">where</span>
  printVal s <span class="hljs-operator">=</span> putStrLn $ "å­—ç¬¦ä¸²ï¼š" <span class="hljs-operator">+</span><span class="hljs-operator">+</span> s
  <span class="hljs-comment">-- é‡å†™å‰ç¼€æ–¹æ³•ï¼šè‡ªå®šä¹‰æ ¼å¼</span>
  printWithPrefix prefix s <span class="hljs-operator">=</span> putStrLn $ prefix <span class="hljs-operator">+</span><span class="hljs-operator">+</span> " | " <span class="hljs-operator">+</span><span class="hljs-operator">+</span> s
</code></pre>
<ul>
<li>å¿…é¡»å®ç°ï¼šç±»å‹ç±»ä¸­æ— é»˜è®¤çš„æ ¸å¿ƒæ–¹æ³•ï¼ˆå¦‚<code>printVal</code>ï¼‰ï¼›</li>
<li>å¯é€‰å®ç°ï¼šæœ‰é»˜è®¤çš„è¾…åŠ©æ–¹æ³•ï¼ˆå¦‚<code>printWithPrefix</code>ï¼‰ï¼Œéœ€å®šåˆ¶æ‰é‡å†™ã€‚</li>
</ul>
<h4 data-id="heading-13">ï¼ˆ2ï¼‰æ¡ä»¶å®ä¾‹ï¼šæ³›å‹ç±»å‹çš„â€œæ¡ä»¶ç»‘å®šâ€</h4>
<p>æƒ³è®©åˆ—è¡¨ã€<code>Maybe</code>è¿™ç±»æ³›å‹ç±»å‹å®ç°è¡Œä¸ºï¼Œå¯åŠ â€œæ¡ä»¶çº¦æŸâ€â€”â€”åªæœ‰æ»¡è¶³æ¡ä»¶çš„æ³›å‹ç±»å‹æ‰ç”Ÿæ•ˆï¼š</p>
<pre><code class="hljs language-ini" lang="ini">-- çº¦æŸï¼šåªæœ‰åˆ—è¡¨é‡Œçš„å…ƒç´ aèƒ½æ‰“å°ï¼Œæ•´ä¸ªåˆ—è¡¨æ‰èƒ½æ‰“å°
instance Printable <span class="hljs-attr">a</span> =&gt; Printable [a] where
  printVal <span class="hljs-attr">xs</span> = mapM_ printVal xs  -- éå†åˆ—è¡¨ï¼Œé€ä¸ªæ‰“å°å…ƒç´ 

-- âœ… åˆæ³•ï¼šIntèƒ½æ‰“å°ï¼Œæ‰€ä»¥<span class="hljs-section">[Int]</span>èƒ½æ‰“å°
printVal <span class="hljs-section">[1,2,3]</span>
-- âŒ æŠ¥é”™ï¼šBoolæ²¡å®ç°Printableï¼Œæ‰€ä»¥<span class="hljs-section">[Bool]</span>ä¸èƒ½æ‰“å°
-- printVal <span class="hljs-section">[True, False]</span>
</code></pre>
<h4 data-id="heading-14">ï¼ˆ3ï¼‰é€šç”¨/ç‰¹åŒ–å®ä¾‹ï¼šè¦†ç›–ä¸åŒåœºæ™¯</h4>
<ul>
<li>
<p><strong>é€šç”¨å®ä¾‹</strong>ï¼šé€‚é…æ‰€æœ‰æ»¡è¶³çº¦æŸçš„æ³›å‹ç±»å‹ï¼ˆå¦‚æ‰€æœ‰<code>Show a</code>çš„<code>Maybe a</code>ï¼‰ï¼›</p>
<ul>
<li>
<pre><code class="hljs language-sql" lang="sql">instance <span class="hljs-keyword">Show</span> a <span class="hljs-operator">=</span><span class="hljs-operator">&gt;</span> <span class="hljs-keyword">Show</span> (Maybe a) <span class="hljs-keyword">where</span>
  <span class="hljs-keyword">show</span> Nothing <span class="hljs-operator">=</span> "Nothing"
  <span class="hljs-keyword">show</span> (Just x) <span class="hljs-operator">=</span> "Just " <span class="hljs-operator">+</span><span class="hljs-operator">+</span> <span class="hljs-keyword">show</span> x
</code></pre>
</li>
</ul>
</li>
<li>
<p><strong>ç‰¹åŒ–å®ä¾‹</strong>ï¼šä¸ºå…·ä½“ç±»å‹å®šåˆ¶é€»è¾‘ï¼ˆéœ€å¯ç”¨<code>OverlappingInstances</code>æ‰©å±•ï¼‰ï¼Œä¼˜å…ˆçº§é«˜äºé€šç”¨å®ä¾‹ï¼›</p>
<ul>
<li>
<pre><code class="hljs language-ini" lang="ini">{-<span class="hljs-comment"># LANGUAGE OverlappingInstances #-}</span>
-- åªä¸º<span class="hljs-section">[Int]</span>å®šåˆ¶æ‰“å°é€»è¾‘ï¼Œè¦†ç›–é€šç”¨çš„<span class="hljs-section">[a]</span>å®ä¾‹
instance Printable <span class="hljs-section">[Int]</span> where
  printVal <span class="hljs-attr">xs</span> = putStrLn $ <span class="hljs-string">"æ•´æ•°åˆ—è¡¨ï¼š"</span> ++ show xs
</code></pre>
</li>
</ul>
</li>
</ul>
<h3 data-id="heading-15">3. ç¬¬ä¸‰æ­¥ï¼šä½¿ç”¨çº¦æŸâ€”â€”é™åˆ¶å‡½æ•°â€œåªè®¤æœ‰è¡Œä¸ºçš„ç±»å‹â€</h3>
<p>ç”¨<code>=&gt;</code>ç»™å‡½æ•°åŠ çº¦æŸï¼Œç¡®ä¿ä¼ å…¥çš„ç±»å‹â€œæœ‰å¯¹åº”çš„è¡Œä¸ºèµ„æ ¼â€ï¼Œç¼–è¯‘æœŸå°±èƒ½æ ¡éªŒåˆæ³•æ€§ã€‚</p>
<h4 data-id="heading-16">ï¼ˆ1ï¼‰åŸºç¡€çº¦æŸï¼šå•ä¸ª/å¤šä¸ªçº¦æŸ</h4>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">--</span> å•ä¸ªçº¦æŸï¼š<span class="hljs-selector-tag">a</span>å¿…é¡»èƒ½æ‰“å°ï¼Œæ‰èƒ½è°ƒç”¨è¿™ä¸ªå‡½æ•°
<span class="hljs-selector-tag">printAll</span> :: <span class="hljs-selector-tag">Printable</span> <span class="hljs-selector-tag">a</span> =&gt; <span class="hljs-selector-attr">[a]</span> <span class="hljs-selector-tag">-</span>&gt; <span class="hljs-selector-tag">IO</span> ()
<span class="hljs-selector-tag">printAll</span> <span class="hljs-selector-tag">xs</span> = <span class="hljs-selector-tag">mapM_</span> <span class="hljs-selector-tag">printVal</span> <span class="hljs-selector-tag">xs</span>

<span class="hljs-selector-tag">--</span> å¤šä¸ªçº¦æŸï¼š<span class="hljs-selector-tag">a</span>æ—¢è¦èƒ½åšæ•°å€¼è¿ç®—ï¼Œåˆè¦èƒ½æ‰“å°
<span class="hljs-selector-tag">calcAndPrint</span> :: (Num a, Printable a) =&gt; <span class="hljs-selector-tag">a</span> <span class="hljs-selector-tag">-</span>&gt; <span class="hljs-selector-tag">a</span> <span class="hljs-selector-tag">-</span>&gt; <span class="hljs-selector-tag">IO</span> ()
<span class="hljs-selector-tag">calcAndPrint</span> <span class="hljs-selector-tag">x</span> <span class="hljs-selector-tag">y</span> = <span class="hljs-selector-tag">printVal</span> (x + y)

<span class="hljs-selector-tag">--</span> âœ… åˆæ³•è°ƒç”¨ï¼š<span class="hljs-selector-tag">Int</span>åŒæ—¶æ»¡è¶³<span class="hljs-selector-tag">Num</span>å’Œ<span class="hljs-selector-tag">Printable</span>
<span class="hljs-selector-tag">calcAndPrint</span> <span class="hljs-number">1</span> <span class="hljs-number">2</span>
<span class="hljs-selector-tag">--</span> âŒ æŠ¥é”™ï¼š<span class="hljs-selector-tag">String</span>æ»¡è¶³<span class="hljs-selector-tag">Printable</span>ä½†ä¸æ»¡è¶³<span class="hljs-selector-tag">Num</span>
<span class="hljs-selector-tag">--</span> <span class="hljs-selector-tag">calcAndPrint</span> "<span class="hljs-selector-tag">a</span>" "<span class="hljs-selector-tag">b</span>"
</code></pre>
<h4 data-id="heading-17">ï¼ˆ2ï¼‰çº¦æŸçš„ç»§æ‰¿ä¼ é€’</h4>
<p>å¦‚æœç±»å‹ç±»Bç»§æ‰¿è‡ªç±»å‹ç±»Aï¼Œé‚£ä¹ˆ<code>B a</code>ä¼šè‡ªåŠ¨åŒ…å«<code>A a</code>çš„çº¦æŸï¼š</p>
<pre><code class="hljs language-rust" lang="rust">-- <span class="hljs-built_in">Ord</span>ç»§æ‰¿<span class="hljs-built_in">Eq</span>ï¼Œæ‰€ä»¥<span class="hljs-built_in">Ord</span> a ç­‰ä»·äº (<span class="hljs-built_in">Ord</span> a, <span class="hljs-built_in">Eq</span> a)
compareAndCheck :: <span class="hljs-built_in">Ord</span> a =&gt; a <span class="hljs-punctuation">-&gt;</span> a <span class="hljs-punctuation">-&gt;</span> Bool
compareAndCheck x y = x &gt; y &amp;&amp; x /= y  -- åŒæ—¶ç”¨<span class="hljs-built_in">Ord</span>çš„&gt;å’Œ<span class="hljs-built_in">Eq</span>çš„/=
</code></pre>
<h2 data-id="heading-18">ä¸‰ã€ç±»å‹ç±»çš„é¿å‘æŒ‡å—+æœ€ä½³å®è·µ</h2>
<p>ç±»å‹ç±»è™½çµæ´»ï¼Œä½†ç”¨ä¸å¥½ä¼šå¯¼è‡´ä»£ç éš¾ç»´æŠ¤ï¼Œè®°ä½è¿™äº›â€œé¿å‘ç‚¹â€å’Œâ€œé»„é‡‘æ³•åˆ™â€ã€‚</p>
<h3 data-id="heading-19">1. å¸¸è§é™·é˜±ï¼ˆåˆ«è¸©ï¼ï¼‰</h3>
<ul>
<li><strong>å­¤å„¿å®ä¾‹</strong>ï¼šç±»å‹ç±»å’Œç±»å‹ä¸åœ¨åŒä¸€ä¸ªæ¨¡å—ï¼ˆæ¯”å¦‚åœ¨Aæ¨¡å—ç»™Bæ¨¡å—çš„<code>User</code>å®ç°Cæ¨¡å—çš„<code>Show</code>ï¼‰â†’ æ˜“å†²çªã€éš¾è¿½è¸ªï¼›</li>
<li><strong>é‡å å®ä¾‹</strong>ï¼šå¤šä¸ªå®ä¾‹èƒ½åŒ¹é…åŒä¸€ä¸ªç±»å‹ï¼ˆæ¯”å¦‚<code>[a]</code>å’Œ<code>[Int]</code>éƒ½å®ç°<code>Printable</code>ï¼‰â†’ ç¼–è¯‘å™¨ä¸çŸ¥é“ç”¨å“ªä¸ªï¼›</li>
<li><strong>é»˜è®¤æ–¹æ³•è¯¯ç”¨</strong>ï¼šé»˜è®¤æ–¹æ³•ä¾èµ–æœªå®ç°çš„æ–¹æ³•ï¼ˆæ¯”å¦‚<code>methodA</code>é»˜è®¤ç”¨<code>methodB</code>ï¼Œä½†å®ä¾‹åªå†™äº†<code>methodA</code>ï¼‰â†’ è°ƒç”¨æ—¶æŠ¥é”™ã€‚</li>
</ul>
<h3 data-id="heading-20">2. æœ€ä½³å®è·µï¼ˆè®°è¿™3æ¡å°±å¤Ÿï¼‰</h3>
<ul>
<li><strong>æ¥å£è¦â€œå•ä¸€â€</strong> ï¼šä¸€ä¸ªç±»å‹ç±»åªç®¡ä¸€ç±»è¡Œä¸ºï¼ˆæ¯”å¦‚<code>Printable</code>åªè´Ÿè´£æ‰“å°ï¼Œåˆ«åŠ è®¡ç®—é€»è¾‘ï¼‰ï¼›</li>
<li><strong>å®ç°è¦â€œæœ€å°â€</strong> ï¼šåªå®ç°ç±»å‹ç±»çš„æ ¸å¿ƒæ–¹æ³•ï¼Œé»˜è®¤æ–¹æ³•èƒ½å¤ç”¨å°±å¤ç”¨ï¼Œåˆ«é‡å¤å†™ï¼›</li>
<li><strong>åˆ«è¿‡åº¦æŠ½è±¡</strong>ï¼šåªæœ‰å¤šä¸ªç±»å‹éœ€è¦å¤ç”¨åŒä¸€è¡Œä¸ºæ—¶ï¼Œæ‰å†™ç±»å‹ç±»ï¼›ä¼˜å…ˆç”¨æ ‡å‡†åº“çš„<code>Num</code>/<code>Eq</code>ç­‰ï¼Œåˆ«é‡å¤é€ è½®å­ã€‚</li>
</ul>
<h2 data-id="heading-21">æ€»ç»“</h2>
<ol>
<li>ç±»å‹ç±»çš„æ ¸å¿ƒæ˜¯<strong>è¡Œä¸ºæŠ½è±¡ä¼˜äºæ•°æ®æŠ½è±¡</strong>ï¼šå…ˆå®šâ€œèƒ½åšä»€ä¹ˆâ€ï¼ˆè§„åˆ™ï¼‰ï¼Œå†ç»™ä»»æ„ç±»å‹ç»‘å®šâ€œå…·ä½“æ€ä¹ˆåšâ€ï¼ˆå®ç°ï¼‰ï¼Œè§£è€¦è¡Œä¸ºå’Œæ•°æ®ï¼›</li>
<li>æ ¸å¿ƒä½¿ç”¨æµç¨‹ï¼šå®šä¹‰ç±»å‹ç±»ï¼ˆè§„åˆ™æ‰‹å†Œï¼‰â†’ å®ç°å®ä¾‹ï¼ˆç»‘å®šè¡Œä¸ºï¼‰â†’ ä½¿ç”¨çº¦æŸï¼ˆæ ¡éªŒèµ„æ ¼ï¼‰ï¼Œä¸‰è€…ååŒå®ç°çµæ´»å¤šæ€ï¼›</li>
<li>æ ‡å‡†åº“æ ¸å¿ƒç±»å‹ç±»ï¼ˆNum/Eq/Ord/Functorï¼‰è¦†ç›–å¤§éƒ¨åˆ†åœºæ™¯ï¼Œä¼˜å…ˆç›´æ¥ä½¿ç”¨ï¼›</li>
<li>é¿å‘å…³é”®ï¼šé¿å¼€å­¤å„¿å®ä¾‹ã€é‡å å®ä¾‹ï¼Œéµå¾ªâ€œå•ä¸€èŒè´£ã€æœ€å°å®ç°ã€ä¸è¿‡åº¦æŠ½è±¡â€çš„åŸåˆ™ã€‚</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[OHOS Ace_engine èŠ‚ç‚¹æ ¸å¿ƒç±»å‹ï¼š UINode]]></title>    <link>https://juejin.cn/post/7605106957134151714</link>    <guid>https://juejin.cn/post/7605106957134151714</guid>    <pubDate>2026-02-11T06:59:52.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605106957134151714" data-draft-id="7605145921617526836" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="OHOS Ace_engine èŠ‚ç‚¹æ ¸å¿ƒç±»å‹ï¼š UINode"/> <meta itemprop="keywords" content="HarmonyOS"/> <meta itemprop="datePublished" content="2026-02-11T06:59:52.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="WeNTaO"/> <meta itemprop="url" content="https://juejin.cn/user/1839932880978572"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            OHOS Ace_engine èŠ‚ç‚¹æ ¸å¿ƒç±»å‹ï¼š UINode
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1839932880978572/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    WeNTaO
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-11T06:59:52.000Z" title="Wed Feb 11 2026 06:59:52 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    5
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æ¦‚è¿°</h2>
<p><code>UINode</code> æ˜¯ ACE Engine (ArkUI) ä¸­ç»„ä»¶æ ‘çš„åŸºç¡€èŠ‚ç‚¹ç±»ã€‚å®ƒå®šä¹‰äº†ç»„ä»¶æ ‘çš„åŸºæœ¬ç»“æ„ï¼ˆçˆ¶å­å…³ç³»ï¼‰å’Œç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼Œä½†<strong>ä¸åŒ…å«</strong>å¸ƒå±€ï¼ˆLayoutï¼‰å’Œæ¸²æŸ“ï¼ˆRenderï¼‰é€»è¾‘ï¼ˆè¿™äº›ç”±å­ç±» <code>FrameNode</code> è´Ÿè´£ï¼‰</p>
<ul>
<li>æºç ä½ç½®ï¼š
sources/arkui_ace_engine/frameworks/core/components_ng/base/ui_node.h`</li>
<li>ç»§æ‰¿å…³ç³»ï¼š
<code>AceType</code> -&gt; <code>UINode</code></li>
<li>æ ¸å¿ƒèŒè´£ï¼š
<ul>
<li>æ ‘ç»“æ„ç®¡ç†**ï¼šç»´æŠ¤çˆ¶å­èŠ‚ç‚¹å…³ç³» (<code>AddChild</code>, <code>RemoveChild</code>, <code>parent_</code>, <code>children_</code>)ã€‚</li>
<li><strong>ç”Ÿå‘½å‘¨æœŸ</strong>ï¼šæŒ‚è½½/å¸è½½ (<code>AttachToMainTree</code>, <code>DetachFromMainTree</code>)ã€‚</li>
<li><strong>ä¸Šä¸‹æ–‡å…³è”</strong>ï¼šæŒæœ‰ <code>PipelineContext</code>ï¼Œè¿æ¥åˆ°æ¸²æŸ“ç®¡çº¿ã€‚</li>
</ul>
</li>
</ul>
<h2 data-id="heading-1">ç±»å›¾</h2>
<pre><code class="hljs language-mermaid" lang="mermaid">classDiagram
    class AceType {
        &lt;&lt;abstract&gt;&gt;
        +GetTypeName()
        +InstanceOf()
        +DynamicCast()
    }
    
    class UINode {
        &lt;&lt;æ ¸å¿ƒåŸºç±»&gt;&gt;
        #children_: list~RefPtr~UINode~~
        #parent_: WeakPtr~UINode~
        #context_: PipelineContext*
        #nodeId_: int32_t
        #tag_: string
        
        +AddChild(child, slot)
        +RemoveChild(child)
        +MountToParent(parent, slot)
        +GetParent() RefPtr~UINode~
        +GetChildren() list~RefPtr~UINode~~
        
        +TouchTest(...) HitTestResult
        +MouseTest(...) HitTestResult
        +AxisTest(...) HitTestResult
        
        +MarkDirtyNode(flag)
        +UpdateLayoutPropertyFlag()
        +CreateLayoutWrapper() RefPtr~LayoutWrapperNode~
        
        +AttachContext(context)
        +DetachContext()
        +OnAttachToMainTree()
        +OnDetachFromMainTree()
        
        +GetContext() PipelineContext*
        +GetId() int32_t
        +GetTag() string
    }
    
    class LayoutWrapper {
        &lt;&lt;å¸ƒå±€åŒ…è£…å™¨&gt;&gt;
        +Measure()
        +Layout()
    }
    
    class FrameNode {
        &lt;&lt;å®é™…æ¸²æŸ“èŠ‚ç‚¹&gt;&gt;
        +pattern_: RefPtr~Pattern~
        +layoutProperty_: RefPtr~LayoutProperty~
        +renderContext_: RefPtr~RenderContext~
        +eventHub_: RefPtr~EventHub~
        
        +GetPattern() RefPtr~Pattern~
        +GetLayoutProperty() RefPtr~LayoutProperty~
        +GetRenderContext() RefPtr~RenderContext~
    }
    
    class GroupNode {
        &lt;&lt;ç»„åˆèŠ‚ç‚¹&gt;&gt;
        +AddChildToGroup(child, slot)
        +DeleteChildFromGroup(slot)
    }
    
    class ForEachNode {
        &lt;&lt;è¯­æ³•èŠ‚ç‚¹ï¼šå¾ªç¯&gt;&gt;
        +CompareAndUpdateChildren()
        +FlushUpdateAndMarkDirty()
    }
    
    class IfElseNode {
        &lt;&lt;è¯­æ³•èŠ‚ç‚¹ï¼šæ¡ä»¶&gt;&gt;
        +UpdateCondition()
    }
    
    class WithThemeNode {
        &lt;&lt;è¯­æ³•èŠ‚ç‚¹ï¼šä¸»é¢˜&gt;&gt;
        +ApplyTheme()
    }
    
    class PipelineContext {
        &lt;&lt;æ¸²æŸ“ä¸Šä¸‹æ–‡&gt;&gt;
        +GetRootNode() RefPtr~UINode~
        +FlushPipeline()
    }
    
    class LayoutWrapperNode {
        &lt;&lt;å¸ƒå±€åŒ…è£…èŠ‚ç‚¹&gt;&gt;
        +Measure()
        +Layout()
    }
    
    class FocusHub {
        &lt;&lt;ç„¦ç‚¹ç®¡ç†&gt;&gt;
        +RequestFocus()
        +LostFocus()
    }
    
    AceType &lt;|-- UINode : virtualç»§æ‰¿
    UINode &lt;|-- FrameNode : ç»§æ‰¿
    UINode &lt;|-- ForEachNode : ç»§æ‰¿
    UINode &lt;|-- IfElseNode : ç»§æ‰¿
    UINode &lt;|-- WithThemeNode : ç»§æ‰¿
    FrameNode &lt;|-- GroupNode : ç»§æ‰¿
    FrameNode --|&gt; LayoutWrapper : å¤šé‡ç»§æ‰¿
    
    UINode --&gt; PipelineContext : å…³è”
    UINode --&gt; LayoutWrapperNode : åˆ›å»º
    FrameNode --&gt; FocusHub : åŒ…å«
    UINode "1" *-- "0..*" UINode : children
    UINode "0..1" &lt;-- "1" UINode : parent
</code></pre>
<ul>
<li>å±‚æ¬¡ç±»å‹ï¼š
ç¬¬ä¸€å±‚ï¼šåŸºç¡€ç±»å‹å±‚</li>
</ul>
<ul>
<li><code>AceType</code>ï¼šç±»å‹ç³»ç»ŸåŸºç±»ï¼Œæä¾› RTTI å’Œæ™ºèƒ½æŒ‡é’ˆæ”¯æŒ</li>
</ul>
<p>ç¬¬äºŒå±‚ï¼šèŠ‚ç‚¹åŸºç±»å±‚</p>
<ul>
<li><code>UINode</code>ï¼šèŠ‚ç‚¹æ ‘ç®¡ç†ã€äº‹ä»¶åˆ†å‘ã€ç”Ÿå‘½å‘¨æœŸ</li>
</ul>
<p>ç¬¬ä¸‰å±‚ï¼šå…·ä½“èŠ‚ç‚¹å±‚</p>
<ul>
<li><code>FrameNode</code>ï¼šå®é™…æ¸²æŸ“èŠ‚ç‚¹ï¼ŒåŒ…å« Patternã€LayoutPropertyã€RenderContext</li>
<li><code>SyntaxNode</code> ç³»åˆ—ï¼šè¯­æ³•æ§åˆ¶èŠ‚ç‚¹ï¼ˆForEachã€IfElseã€WithTheme ç­‰ï¼‰</li>
</ul>
<p>ç¬¬å››å±‚ï¼šç‰¹æ®ŠèŠ‚ç‚¹å±‚</p>
<ul>
<li><code>GroupNode</code>ï¼šç»„åˆèŠ‚ç‚¹ï¼Œç”¨äºç‰¹æ®Šå¸ƒå±€åœºæ™¯</li>
</ul>
<h3 data-id="heading-2">å…³é”®è®¾è®¡æ¨¡å¼</h3>
<ol>
<li><strong>ç»„åˆæ¨¡å¼</strong>ï¼š<code>UINode</code> é€šè¿‡ <code>children_</code> ç®¡ç†å­èŠ‚ç‚¹ï¼Œå½¢æˆæ ‘ç»“æ„</li>
<li><strong>æ¨¡æ¿æ–¹æ³•</strong>ï¼š<code>UINode</code> å®šä¹‰éª¨æ¶ï¼Œå­ç±»å®ç°å…·ä½“è¡Œä¸ºï¼ˆå¦‚ <code>IsAtomicNode()</code>ï¼‰</li>
<li><strong>è§‚å¯Ÿè€…æ¨¡å¼</strong>ï¼šé€šè¿‡ <code>PipelineContext</code> ç®¡ç†èŠ‚ç‚¹ç”Ÿå‘½å‘¨æœŸ</li>
<li><strong>ç­–ç•¥æ¨¡å¼</strong>ï¼š<code>Pattern</code> å†³å®š <code>FrameNode</code> çš„è¡Œä¸º</li>
</ol>
<h2 data-id="heading-3">3. æ ¸å¿ƒæˆå‘˜å˜é‡</h2>








































<table><thead><tr><th align="left">å˜é‡å</th><th align="left">ç±»å‹</th><th align="left">ä½œç”¨</th></tr></thead><tbody><tr><td align="left"><code>children_</code></td><td align="left"><code>std::list&lt;RefPtr&lt;UINode&gt;&gt;</code></td><td align="left">å­˜å‚¨å­èŠ‚ç‚¹åˆ—è¡¨ã€‚ä½¿ç”¨é“¾è¡¨æ˜¯ä¸ºäº†é«˜æ•ˆæ’å…¥å’Œåˆ é™¤ã€‚</td></tr><tr><td align="left"><code>parent_</code></td><td align="left"><code>WeakPtr&lt;UINode&gt;</code></td><td align="left">æŒ‡å‘çˆ¶èŠ‚ç‚¹ã€‚ä½¿ç”¨<code>WeakPtr</code> é˜²æ­¢å¾ªç¯å¼•ç”¨ï¼ˆçˆ¶-&gt;å­ï¼Œå­-&gt;çˆ¶ï¼‰ã€‚</td></tr><tr><td align="left"><code>context_</code></td><td align="left"><code>PipelineContext*</code></td><td align="left">æŒ‡å‘ç®¡çº¿ä¸Šä¸‹æ–‡ï¼Œç”¨äºè®¿é—®å…¨å±€æœåŠ¡ï¼ˆå¦‚ä¸»é¢˜ã€ä»»åŠ¡é˜Ÿåˆ—ï¼‰ã€‚</td></tr><tr><td align="left"><code>tag_</code></td><td align="left"><code>std::string</code></td><td align="left">ç»„ä»¶æ ‡ç­¾ï¼ˆå¦‚ "Column", "Button"ï¼‰ã€‚</td></tr><tr><td align="left"><code>nodeId_</code></td><td align="left"><code>int32_t</code></td><td align="left">å…¨å±€å”¯ä¸€çš„èŠ‚ç‚¹ IDã€‚</td></tr><tr><td align="left"><code>onMainTree_</code></td><td align="left"><code>bool</code></td><td align="left">æ ‡è®°èŠ‚ç‚¹</td></tr></tbody></table>
<h2 data-id="heading-4">4. æ ¸å¿ƒæœºåˆ¶</h2>
<h3 data-id="heading-5">4.1 æ ‘æ“ä½œ</h3>
<p>è¿™é‡Œæˆ‘ä»¬å¯ä»¥æŠŠ<code>UINode</code>ç†è§£ä¸ºå‰ç«¯çš„<code>DOM</code>èŠ‚ç‚¹ï¼Œ æä¾›äº†ç›¸åº”çš„APIï¼š</p>
<ul>
<li><code>AddChild(child)</code>: æ·»åŠ å­èŠ‚ç‚¹ã€‚</li>
<li><code>RemoveChild(child)</code>: ç§»é™¤å­èŠ‚ç‚¹ã€‚</li>
<li><code>MountToParent(parent)</code>: å°†è‡ªå·±æŒ‚è½½åˆ°æŒ‡å®šçˆ¶èŠ‚ç‚¹ã€‚</li>
</ul>
<h3 data-id="heading-6">4.2 è¯­æ³•èŠ‚ç‚¹ &amp; æ¸²æŸ“èŠ‚ç‚¹</h3>
<p>ç±»ä¼¼å‰ç«¯æ“ä½œçš„<code>visibility</code>æ“ä½œï¼Œ å¾ˆå¤šæ—¶å€™æˆ‘ä»¬éœ€è¦ä¾æ®é€»è¾‘æ¥æ§åˆ¶ç»„ä»¶æ˜¯å¦æ˜¾ç¤ºã€‚ ohosæä¾›äº†ç›¸åº”çš„
<code>if/else</code>è¯­ä¹‰èƒ½åŠ›ï¼ˆåŒæ—¶ï¼Œ foreachã€lazyForeach ï¼‰ã€‚ ä¸ºäº†ä»åº•å±‚æ”¯æŒè¿™ä¸ªèƒ½åŠ›ï¼Œ UINode è¢«æ‹†åˆ†ä¸ºä¸¤ç§ï¼š</p>
<ul>
<li><strong>FrameNode</strong>ï¼šå®ä½“èŠ‚ç‚¹ï¼Œæœ‰å¸ƒå±€å’Œæ¸²æŸ“èƒ½åŠ›ï¼ˆå¦‚ <code>Column</code>, <code>Text</code>ï¼‰ã€‚</li>
<li><strong>SyntaxNode</strong>ï¼ˆåŠå…¶ä»–é FrameNode å­ç±»ï¼‰ï¼šè¯­æ³•èŠ‚ç‚¹ï¼Œæ— æ¸²æŸ“å®ä½“ï¼Œä»…ç”¨äºæ§åˆ¶æµï¼ˆå¦‚ <code>IfElseNode</code>, <code>ForEachNode</code>ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-7">4.3 æ¸²æŸ“æµç¨‹</h3>
<pre><code class="hljs language-scss" lang="scss">PipelineContext (æ¸²æŸ“ä¸Šä¸‹æ–‡)
    â†“
UINode Tree (èŠ‚ç‚¹æ ‘)
    â”œâ”€â”€ FrameNode (å®é™…æ¸²æŸ“èŠ‚ç‚¹)
    â”‚   â”œâ”€â”€ Pattern (è¡Œä¸ºç­–ç•¥)
    â”‚   â”œâ”€â”€ LayoutProperty (å¸ƒå±€å±æ€§)
    â”‚   â””â”€â”€ RenderContext (æ¸²æŸ“ä¸Šä¸‹æ–‡)
    â””â”€â”€ SyntaxNode (è¯­æ³•æ§åˆ¶èŠ‚ç‚¹)
        â””â”€â”€ ç®¡ç†å­ FrameNode
    â†“
LayoutWrapper (å¸ƒå±€è®¡ç®—)
    â†“
RenderNode (æ¸²æŸ“èŠ‚ç‚¹)
</code></pre>
<h2 data-id="heading-8">5. æ ¸å¿ƒå‡½æ•°</h2>
<h3 data-id="heading-9">5.1 èŠ‚ç‚¹åˆ›å»º</h3>
<pre><code class="hljs language-cpp" lang="cpp">UINode::<span class="hljs-built_in">UINode</span>(<span class="hljs-type">const</span> std::string&amp; tag, <span class="hljs-type">int32_t</span> nodeId, <span class="hljs-type">bool</span> isRoot)
    : <span class="hljs-built_in">tag_</span>(tag), <span class="hljs-built_in">nodeId_</span>(nodeId), <span class="hljs-built_in">accessibilityId_</span>(currentAccessibilityId_++), <span class="hljs-built_in">isRoot_</span>(isRoot)
{
    ++count_; <span class="hljs-comment">// å…¨å±€  ç”¨æ¥ç»Ÿè®¡å½“å‰å­˜æ´»çš„UINode æ•°é‡ï¼Œ æˆ‘ä¹Ÿä¸çŸ¥ä¸ºä»€ä¹ˆç»Ÿè®¡</span>
    <span class="hljs-keyword">if</span> (MultiThreadBuildManager::<span class="hljs-built_in">IsThreadSafeNodeScope</span>()) {<span class="hljs-comment">// åˆ¤æ–­çº¿ç¨‹å®‰å…¨ï¼Œ è¿™é‡Œ1.2 ä¼šè¿›æ¥ï¼Œ å¢é‡å¼•æ“ä¼šå­˜åœ¨å¹¶è¡ŒåŒ–åœºæ™¯</span>
        isThreadSafeNode_ = <span class="hljs-literal">true</span>;
        <span class="hljs-built_in">SetIsFree</span>(<span class="hljs-literal">true</span>);
    } 
    <span class="hljs-keyword">if</span> (AceChecker::<span class="hljs-built_in">IsPerformanceCheckEnabled</span>()) {<span class="hljs-comment">//  å­˜æ”¾js ä»£ç ä½ç½®ä¿¡æ¯ï¼Œ ç”¨æ¥è°ƒè¯•è¡¥å……ã€‚ è¿™é‡Œæ²¡æœ‰è€ƒè™‘cangjieå’Œå…¶ä»–è¯­è¨€ </span>
        <span class="hljs-keyword">auto</span> pos = EngineHelper::<span class="hljs-built_in">GetPositionOnJsCode</span>();
        nodeInfo_ = std::<span class="hljs-built_in">make_unique</span>&lt;PerformanceCheckNode&gt;();
        nodeInfo_-&gt;codeRow = std::<span class="hljs-built_in">get</span>&lt;<span class="hljs-number">1</span>&gt;(pos);
        nodeInfo_-&gt;codeCol = std::<span class="hljs-built_in">get</span>&lt;<span class="hljs-number">2</span>&gt;(pos);
        nodeInfo_-&gt;pagePath = std::<span class="hljs-built_in">get</span>&lt;<span class="hljs-number">0</span>&gt;(pos);
    }
    apiVersion_ = Container::<span class="hljs-built_in">GetCurrentApiTargetVersion</span>();
<span class="hljs-meta">#<span class="hljs-keyword">ifdef</span> UICAST_COMPONENT_SUPPORTED</span>
    <span class="hljs-keyword">do</span> {
        <span class="hljs-keyword">auto</span> container = Container::<span class="hljs-built_in">Current</span>();
        <span class="hljs-built_in">CHECK_NULL_BREAK</span>(container);
        <span class="hljs-keyword">auto</span> distributedUI = container-&gt;<span class="hljs-built_in">GetDistributedUI</span>();
        <span class="hljs-built_in">CHECK_NULL_BREAK</span>(distributedUI);
        distributedUI-&gt;<span class="hljs-built_in">AddNewNode</span>(nodeId_);
    } <span class="hljs-keyword">while</span> (<span class="hljs-literal">false</span>);
<span class="hljs-meta">#<span class="hljs-keyword">endif</span></span>
    instanceId_ = Container::<span class="hljs-built_in">CurrentId</span>();
    nodeStatus_ = ViewStackProcessor::<span class="hljs-built_in">GetInstance</span>()-&gt;<span class="hljs-built_in">IsBuilderNode</span>() ? NodeStatus::BUILDER_NODE_OFF_MAINTREE
                                                                     : NodeStatus::NORMAL_NODE;
    <span class="hljs-keyword">if</span> (SystemProperties::<span class="hljs-built_in">ConfigChangePerform</span>()) {
        <span class="hljs-keyword">auto</span> currentContainer = Container::<span class="hljs-built_in">GetContainer</span>(instanceId_);
        isDarkMode_ = currentContainer ? (currentContainer-&gt;<span class="hljs-built_in">GetColorMode</span>() == ColorMode::DARK) : <span class="hljs-literal">false</span>;
    }
    uiNodeGcEnable_ = FeatureParam::<span class="hljs-built_in">IsUINodeGcEnabled</span>();
}
</code></pre>
<h3 data-id="heading-10">5.2 èŠ‚ç‚¹é”€æ¯</h3>
<pre><code class="hljs language-cpp" lang="cpp">UINode::~<span class="hljs-built_in">UINode</span>()
{
    --count_;
<span class="hljs-meta">#<span class="hljs-keyword">ifdef</span> UICAST_COMPONENT_SUPPORTED</span>
    <span class="hljs-keyword">do</span> {
        <span class="hljs-keyword">auto</span> container = Container::<span class="hljs-built_in">Current</span>();
        <span class="hljs-built_in">CHECK_NULL_BREAK</span>(container);
        <span class="hljs-keyword">auto</span> distributedUI = container-&gt;<span class="hljs-built_in">GetDistributedUI</span>();
        <span class="hljs-built_in">CHECK_NULL_BREAK</span>(distributedUI);
        <span class="hljs-keyword">if</span> (hostPageId_ == distributedUI-&gt;<span class="hljs-built_in">GetCurrentPageId</span>()) {
            distributedUI-&gt;<span class="hljs-built_in">AddDeletedNode</span>(nodeId_);
        }
    } <span class="hljs-keyword">while</span> (<span class="hljs-literal">false</span>);
<span class="hljs-meta">#<span class="hljs-keyword">endif</span></span>

    <span class="hljs-keyword">if</span> (!removeSilently_) {
        ElementRegister::<span class="hljs-built_in">GetInstance</span>()-&gt;<span class="hljs-built_in">RemoveItem</span>(nodeId_); <span class="hljs-comment">//RemoveItem(nodeId_)ï¼šä» map é‡Œåˆ æ‰ï¼Œå¹¶ä¸”æŠŠè¯¥ nodeId_ åŠ å…¥ removedItems_ï¼ˆâ€œå·²åˆ é™¤ idâ€é›†åˆï¼‰</span>
    } <span class="hljs-keyword">else</span> {
        ElementRegister::<span class="hljs-built_in">GetInstance</span>()-&gt;<span class="hljs-built_in">RemoveItemSilently</span>(nodeId_); <span class="hljs-comment">// åªä» map é‡Œåˆ ï¼Œä¸åŠ å…¥ removedItems_ã€‚ç”¨äºâ€œè¿™ä¸ªèŠ‚ç‚¹é©¬ä¸Šä¼šç”¨åŒä¸€ä¸ªæˆ–æ–° id å†æ³¨å†Œâ€çš„åœºæ™¯ï¼Œé¿å…è¢«è¯¯å½“æˆâ€œå·²åˆ é™¤â€ã€‚</span>
    }
    <span class="hljs-keyword">if</span> (isThreadSafeNode_) {
        ElementRegisterMultiThread::<span class="hljs-built_in">GetInstance</span>()-&gt;<span class="hljs-built_in">RemoveThreadSafeNode</span>(nodeId_);
    }
    <span class="hljs-keyword">if</span> (propInspectorId_.<span class="hljs-built_in">has_value</span>()) {
        ElementRegister::<span class="hljs-built_in">GetInstance</span>()-&gt;<span class="hljs-built_in">RemoveFrameNodeByInspectorId</span>(propInspectorId_.<span class="hljs-built_in">value_or</span>(<span class="hljs-string">""</span>), nodeId_);
    }
    <span class="hljs-keyword">if</span> (!onMainTree_) { 
        <span class="hljs-keyword">return</span>;
    }
    <span class="hljs-keyword">if</span> (context_) {
        context_-&gt;<span class="hljs-built_in">RemoveAttachedNode</span>(<span class="hljs-keyword">this</span>); <span class="hljs-comment">//AttachToMainTree æ—¶ä¼šæŠŠèŠ‚ç‚¹æ”¾è¿› attachedNodeSet_ï¼›ææ„æ—¶å¿…é¡»ä»è¯¥é›†åˆç§»é™¤ï¼Œå¦åˆ™ç®¡çº¿ä¼šæŒæœ‰å·²é”€æ¯èŠ‚ç‚¹çš„æŒ‡é’ˆï¼Œé€ æˆæ‚¬ç©ºå¼•ç”¨/æœªå®šä¹‰è¡Œä¸ºã€‚</span>
    }
    onMainTree_ = <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">if</span> (nodeStatus_ == NodeStatus::BUILDER_NODE_ON_MAINTREE) {
        nodeStatus_ = NodeStatus::BUILDER_NODE_OFF_MAINTREE;
    }
}
</code></pre>
<h2 data-id="heading-11">6. å…¶ä»–å…³é”®åŠŸèƒ½</h2>
<h3 data-id="heading-12">6.1 çº¿ç¨‹å®‰å…¨èŠ‚ç‚¹æœºåˆ¶ï¼ˆThread-Safe Nodeï¼‰</h3>
<p>æ”¯æŒé UI çº¿ç¨‹æ“ä½œèŠ‚ç‚¹ï¼Œä¸»è¦ç”¨äºåå°æ„å»ºåœºæ™¯ã€‚</p>
<h4 data-id="heading-13">æ ¸å¿ƒæ–¹æ³•</h4>





























<table><thead><tr><th>æ–¹æ³•</th><th>åŠŸèƒ½è¯´æ˜</th></tr></thead><tbody><tr><td><code>IsThreadSafeNode()</code></td><td>æ£€æŸ¥æ˜¯å¦ä¸ºçº¿ç¨‹å®‰å…¨èŠ‚ç‚¹</td></tr><tr><td><code>IsFree()</code></td><td>æ£€æŸ¥èŠ‚ç‚¹æ˜¯å¦å¤„äº"è‡ªç”±"çŠ¶æ€</td></tr><tr><td><code>SetIsFree(bool isFree)</code></td><td>è®¾ç½®èŠ‚ç‚¹è‡ªç”±çŠ¶æ€</td></tr><tr><td><code>PostAfterAttachMainTreeTask()</code></td><td>æäº¤æŒ‚è½½åçš„ä»»åŠ¡</td></tr><tr><td><code>ExecuteAfterAttachMainTreeTasks()</code></td><td>æ‰§è¡ŒæŒ‚è½½åçš„ä»»åŠ¡</td></tr></tbody></table>
<h4 data-id="heading-14">å…³é”®çŠ¶æ€</h4>
<ul>
<li><strong><code>isThreadSafeNode_</code></strong>ï¼šæ ‡è¯†èŠ‚ç‚¹æ˜¯å¦æ”¯æŒçº¿ç¨‹å®‰å…¨æ“ä½œ</li>
<li><strong><code>isFree_</code></strong>ï¼šèŠ‚ç‚¹å¤„äº"è‡ªç”±"çŠ¶æ€æ—¶ï¼Œé UI çº¿ç¨‹å¯ä»¥å®‰å…¨æ“ä½œ</li>
<li><strong><code>afterAttachMainTreeTasks_</code></strong>ï¼šæŒ‚è½½åˆ°ä¸»æ ‘åéœ€è¦æ‰§è¡Œçš„ä»»åŠ¡åˆ—è¡¨</li>
</ul>
<h4 data-id="heading-15">ä½¿ç”¨åœºæ™¯</h4>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// å…¸å‹åœºæ™¯ï¼šLazyForEach åœ¨åå°çº¿ç¨‹æ„å»ºèŠ‚ç‚¹</span>
<span class="hljs-keyword">if</span> (node-&gt;<span class="hljs-built_in">IsFree</span>()) {
    <span class="hljs-comment">// é UI çº¿ç¨‹å¯ä»¥å®‰å…¨æ“ä½œ</span>
    node-&gt;<span class="hljs-built_in">AddChild</span>(child);
    <span class="hljs-comment">// ...</span>
    node-&gt;<span class="hljs-built_in">PostAfterAttachMainTreeTask</span>([=]() {
        <span class="hljs-comment">// æŒ‚è½½åˆ°ä¸»æ ‘åæ‰§è¡Œçš„ä»»åŠ¡</span>
    });
}
</code></pre>
<p>è¡¥å……ï¼š å¹¶è¡ŒåŒ–çš„æ—¶å€™éœ€è¦å…³æ³¨ï¼Œ è¦ä¿®æ”¹èŠ‚ç‚¹çŠ¶æ€ï¼Œä¸ç„¶æ²¡æ³•è¿›å…¥æ¸²æŸ“æµç¨‹ã€‚</p>
<h3 data-id="heading-16">6.2 BuilderNode æœºåˆ¶ï¼ˆå»¶è¿Ÿæ„å»ºï¼‰</h3>
<p>æ”¯æŒå»¶è¿Ÿæ„å»ºå’ŒåŠ¨æ€æ›´æ–°ï¼Œç”¨äº <code>@Builder</code> è£…é¥°çš„å‡½æ•°ã€‚</p>
<h4 data-id="heading-17">æ ¸å¿ƒæ–¹æ³•</h4>









































<table><thead><tr><th>æ–¹æ³•</th><th>åŠŸèƒ½è¯´æ˜</th></tr></thead><tbody><tr><td><code>GetNodeStatus()</code></td><td>è·å–èŠ‚ç‚¹çŠ¶æ€</td></tr><tr><td><code>UpdateNodeStatus()</code></td><td>æ›´æ–°èŠ‚ç‚¹çŠ¶æ€</td></tr><tr><td><code>GetIsRootBuilderNode()</code></td><td>æ£€æŸ¥æ˜¯å¦ä¸ºæ ¹ BuilderNode</td></tr><tr><td><code>SetJsBuilderNodeId()</code></td><td>è®¾ç½® JS BuilderNode ID</td></tr><tr><td><code>SetBuilderFunc()</code></td><td>è®¾ç½®æ„å»ºå‡½æ•°</td></tr><tr><td><code>GetBuilderFunc()</code></td><td>è·å–æ„å»ºå‡½æ•°</td></tr><tr><td><code>SetUpdateNodeFunc()</code></td><td>è®¾ç½®èŠ‚ç‚¹æ›´æ–°å‡½æ•°</td></tr><tr><td><code>SetUpdateNodeConfig()</code></td><td>è®¾ç½®é…ç½®æ›´æ–°å‡½æ•°</td></tr></tbody></table>
<h4 data-id="heading-18">èŠ‚ç‚¹çŠ¶æ€</h4>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">enum class</span> <span class="hljs-title class_">NodeStatus</span> : <span class="hljs-type">char</span> {
    NORMAL_NODE = <span class="hljs-number">0</span>,                    <span class="hljs-comment">// æ™®é€šèŠ‚ç‚¹</span>
    BUILDER_NODE_OFF_MAINTREE = <span class="hljs-number">1</span>,      <span class="hljs-comment">// BuilderNodeï¼Œè„±ç¦»ä¸»æ ‘</span>
    BUILDER_NODE_ON_MAINTREE = <span class="hljs-number">2</span>        <span class="hljs-comment">// BuilderNodeï¼ŒæŒ‚è½½åˆ°ä¸»æ ‘</span>
};
</code></pre>
<h4 data-id="heading-19">å·¥ä½œæµç¨‹</h4>
<pre><code class="hljs language-css" lang="css"><span class="hljs-keyword">@Builder</span> å‡½æ•°è°ƒç”¨
    â†“
åˆ›å»º BuilderNodeï¼ˆOFF_MAINTREEï¼‰
    â†“
å»¶è¿Ÿæ„å»ºï¼ˆlazyBuilderFunc_ï¼‰
    â†“
éœ€è¦æ—¶æŒ‚è½½åˆ°ä¸»æ ‘ï¼ˆON_MAINTREEï¼‰
    â†“
åŠ¨æ€æ›´æ–°ï¼ˆupdateNodeFunc_ï¼‰
</code></pre>
<p><strong>è®¾è®¡æ„å›¾</strong>ï¼š<code>@Builder</code> è£…é¥°çš„å‡½æ•°åˆ›å»ºçš„èŠ‚ç‚¹å¯ä»¥å»¶è¿Ÿæ„å»ºï¼ŒèŠ‚ç‚¹å¯ä»¥è„±ç¦»ä¸»æ ‘ï¼ˆOFF_MAINTREEï¼‰ï¼Œéœ€è¦æ—¶å†æŒ‚è½½ï¼ˆON_MAINTREEï¼‰ã€‚</p>
<h3 data-id="heading-20">6.3 å›è°ƒæœºåˆ¶ï¼ˆCallback Systemï¼‰</h3>
<p>å¤šç§å›è°ƒå‡½æ•°ï¼Œç”¨äºä¸ JS å±‚äº¤äº’å’Œå»¶è¿Ÿæ„å»ºã€‚</p>
<h4 data-id="heading-21">å›è°ƒç±»å‹</h4>



































<table><thead><tr><th>å›è°ƒ</th><th>ç±»å‹</th><th>ç”¨é€”</th></tr></thead><tbody><tr><td><code>updateJSInstanceCallback_</code></td><td><code>std::function&lt;void(int32_t)&gt;</code></td><td>å®ä¾‹æ›´æ–°å›è°ƒ</td></tr><tr><td><code>lazyBuilderFunc_</code></td><td><code>std::function&lt;void()&gt;</code></td><td>å»¶è¿Ÿæ„å»ºå‡½æ•°</td></tr><tr><td><code>updateNodeFunc_</code></td><td><code>std::function&lt;void(int32_t, RefPtr&lt;UINode&gt;&amp;)&gt;</code></td><td>èŠ‚ç‚¹æ›´æ–°å‡½æ•°</td></tr><tr><td><code>updateNodeConfig_</code></td><td><code>std::function&lt;void()&gt;</code></td><td>é…ç½®æ›´æ–°å‡½æ•°</td></tr><tr><td><code>destroyCallback_</code></td><td><code>std::function&lt;void(int32_t)&gt;</code></td><td>é”€æ¯å›è°ƒ</td></tr></tbody></table>
<h4 data-id="heading-22">ä½¿ç”¨ç¤ºä¾‹</h4>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// æ³¨å†Œå›è°ƒ</span>
node-&gt;<span class="hljs-built_in">RegisterUpdateJSInstanceCallback</span>([=](<span class="hljs-type">int32_t</span> id) {
    <span class="hljs-comment">//  å®ä¾‹æ›´æ–°é€»è¾‘</span>
});

node-&gt;<span class="hljs-built_in">SetBuilderFunc</span>([=]() {
    <span class="hljs-comment">// å»¶è¿Ÿæ„å»ºé€»è¾‘</span>
});

node-&gt;<span class="hljs-built_in">SetOnNodeDestroyCallback</span>([=](<span class="hljs-type">int32_t</span> id) {
    <span class="hljs-comment">// èŠ‚ç‚¹é”€æ¯é€»è¾‘</span>
});
</code></pre>
<p><strong>ç”¨é€”</strong>ï¼šä¸å‰ç«¯è¯­è¨€ å±‚äº¤äº’ã€å»¶è¿Ÿæ„å»ºã€èŠ‚ç‚¹æ›´æ–°é€šçŸ¥ã€ç”Ÿå‘½å‘¨æœŸç®¡ç†ã€‚</p>
<h3 data-id="heading-23">6.4 å†…å­˜ç®¡ç†æœºåˆ¶</h3>
<p>æ™ºèƒ½æŒ‡é’ˆ + å¼•ç”¨è®¡æ•°ï¼Œé¿å…æ³„æ¼ä¸å¾ªç¯å¼•ç”¨ã€‚</p>
<h4 data-id="heading-24">å…³é”®è®¾è®¡</h4>
<ul>
<li><strong>çˆ¶æ–¹å‘ç”¨ <code>WeakPtr</code></strong>ï¼ˆä¸å¢åŠ çˆ¶çš„å¼ºå¼•ç”¨ï¼‰ï¼š
<pre><code class="hljs language-cpp" lang="cpp">WeakPtr&lt;UINode&gt; parent_;       <span class="hljs-comment">// çˆ¶èŠ‚ç‚¹ï¼Œä½¿ç”¨å‰éœ€ Upgrade() åˆ¤ç©º</span>
WeakPtr&lt;UINode&gt; adoptParent_;  <span class="hljs-comment">// æ”¶å…»çˆ¶ï¼ˆå¦‚ overlayï¼‰</span>
WeakPtr&lt;UINode&gt; ancestor_;     <span class="hljs-comment">// ç¥–å…ˆï¼Œæ’å…¥å»é‡ç­‰ç”¨</span>
</code></pre>
</li>
<li><strong>å­æ–¹å‘ç”¨ <code>RefPtr</code></strong>ï¼ˆçˆ¶æ‹¥æœ‰å­ï¼‰ï¼š
<pre><code class="hljs language-cpp" lang="cpp">std::list&lt;RefPtr&lt;UINode&gt;&gt; children_;
</code></pre>
</li>
<li><strong>é‡Šæ”¾é’©å­</strong>ï¼šå¼ºå¼•ç”¨å½’é›¶æ—¶ç”±åŸºç±» <code>Referenced::DecRefCount()</code> è°ƒç”¨ï¼Œå­ç±»å¯å¹²é¢„æ˜¯å¦ç«‹å³ deleteï¼š
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">bool</span> <span class="hljs-title">MaybeRelease</span><span class="hljs-params">()</span> <span class="hljs-keyword">override</span></span>;  <span class="hljs-comment">// true=ç«‹å³ deleteï¼Œfalse=ä¸åœ¨è¿™é‡Œåˆ ï¼ˆå¦‚äº¤ç»™ GCï¼‰</span>
</code></pre>
</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[linuxå®‰è£…xray]]></title>    <link>https://juejin.cn/post/7605114376803418152</link>    <guid>https://juejin.cn/post/7605114376803418152</guid>    <pubDate>2026-02-11T07:07:49.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605114376803418152" data-draft-id="7605173538417098762" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="linuxå®‰è£…xray"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-02-11T07:07:49.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°æ‚²ä¼¤"/> <meta itemprop="url" content="https://juejin.cn/user/1253916569515143"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            linuxå®‰è£…xray
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1253916569515143/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°æ‚²ä¼¤
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-11T07:07:49.000Z" title="Wed Feb 11 2026 07:07:49 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"/>
<p><strong>å‰ç½®å‡†å¤‡</strong></p>
<p>ubuntuæœåŠ¡å™¨å’ŒåŸŸå</p>
<ul>
<li>
<h3 data-id="heading-1">ä¸‹è½½nginx</h3>
</li>
</ul>
<pre><code class="hljs language-shell" lang="shell">sudo apt install nginx -y
</code></pre>
<h5 data-id="heading-2">ä¿®æ”¹é…ç½®æ–‡ä»¶</h5>
<pre><code class="hljs language-shell" lang="shell">sudo vim /etc/nginx/sites-available/default
</code></pre>
<p>å¢åŠ å†…å®¹å¦‚ä¸‹:</p>
<pre><code class="hljs language-js" lang="js">location /xray {  # è‡ªå®šä¹‰è·¯å¾„
    proxy_redirect off;
    proxy_pass <span class="hljs-attr">http</span>:<span class="hljs-comment">//127.0.0.1:10000;  # xRayç›‘å¬çš„ç«¯å£</span>
    proxy_http_version <span class="hljs-number">1.1</span>;
    proxy_set_header <span class="hljs-title class_">Upgrade</span> $http_upgrade;
    proxy_set_header <span class="hljs-title class_">Connection</span> <span class="hljs-string">"upgrade"</span>;
    proxy_set_header <span class="hljs-title class_">Host</span> $host;
}
</code></pre>
<p>è‡³æ­¤ï¼Œnginxçš„å·¥ä½œå°±ç®—åšå®Œäº†</p>
<h3 data-id="heading-3">ä¸‹è½½xray</h3>
<pre><code class="hljs language-shell" lang="shell">sudo bash -c "$(curl -L https://github.com/XTLS/Xray-install/raw/main/install-release.sh)" @ install
</code></pre>
<p>ä¿®æ”¹é…ç½®æ–‡ä»¶</p>
<p>å…ˆå‡†å¤‡ä¸€ä¸ªuuidï¼Œåœ¨é…ç½®æ–‡ä»¶ä¸å®¢æˆ·ç«¯éƒ½éœ€è¦ç”¨åˆ°</p>
<pre><code class="hljs language-shell" lang="shell">xray uuid
</code></pre>
<p>å°†è¿”å›çš„uuidå¤åˆ¶ä¸‹æ¥</p>
<pre><code class="hljs language-shell" lang="shell">sudo vim /usr/local/etc/xray/config.json
</code></pre>
<p>ä»¥ä¸‹æ˜¯å…¨éƒ¨å†…å®¹ï¼Œå¯ä»¥ç›´æ¥å¤åˆ¶ä½¿ç”¨ï¼ŒæŒ‰éœ€è°ƒæ•´port/uuid/path</p>
<pre><code class="hljs language-js" lang="js">{
  <span class="hljs-string">"log"</span>: {
    <span class="hljs-string">"loglevel"</span>: <span class="hljs-string">"warning"</span>
  },
  <span class="hljs-string">"inbounds"</span>: [
    {
      <span class="hljs-string">"port"</span>: <span class="hljs-number">10000</span>, #ç›‘å¬çš„ç«¯å£
      <span class="hljs-string">"listen"</span>: <span class="hljs-string">"127.0.0.1"</span>,
      <span class="hljs-string">"protocol"</span>: <span class="hljs-string">"vless"</span>, 
      <span class="hljs-string">"settings"</span>: {
        <span class="hljs-string">"clients"</span>: [
          {
            <span class="hljs-string">"id"</span>: <span class="hljs-string">"UUID"</span> #è‡ªå®šä¹‰ä¸€ä¸ªuuidï¼Œè¿™é‡Œè·Ÿå®¢æˆ·ç«¯ä¸€æ ·å³å¯ï¼ŒèŒƒå›´æ˜¯<span class="hljs-number">1</span>-<span class="hljs-number">30</span>å­—èŠ‚çš„å­—ç¬¦ï¼ˆè¿™é‡Œå°±æ˜¯å¡«åˆšæ‰è·å¾—çš„uuidï¼Œä½ ä¹Ÿå¯ä»¥ä¸ä½¿ç”¨uuidï¼Œéšä¾¿å‡ ä¸ªå­—ç¬¦ä¸²ä¹Ÿè¡Œï¼‰
          }
        ],
        <span class="hljs-string">"decryption"</span>: <span class="hljs-string">"none"</span>
      },
      <span class="hljs-string">"streamSettings"</span>: {
        <span class="hljs-string">"network"</span>: <span class="hljs-string">"ws"</span>,
        <span class="hljs-string">"wsSettings"</span>: {
          <span class="hljs-string">"path"</span>: <span class="hljs-string">"/xray"</span> #nginxçš„è·¯å¾„
        }
      }
    }
  ],
  <span class="hljs-string">"outbounds"</span>: [
    {
      <span class="hljs-string">"protocol"</span>: <span class="hljs-string">"freedom"</span>,
      <span class="hljs-string">"tag"</span>: <span class="hljs-string">"direct"</span>
    }
  ]
}
</code></pre>
<h3 data-id="heading-4">ç”³è¯·è¯ä¹¦</h3>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_">#</span><span class="bash">å®‰è£…Certbot</span>
sudo apt install certbot python3-certbot-nginx -y
<span class="hljs-meta prompt_">#</span><span class="bash">ç”³è¯·è¯ä¹¦</span>
sudo certbot --nginx -d domian.com #å¡«ä½ çš„åŸŸå
<span class="hljs-meta prompt_">#</span><span class="bash">è‡ªåŠ¨ç»­æœŸ</span>
sudo systemctl enable certbot.timer
</code></pre>
<h3 data-id="heading-5">å¼€æ”¾ç«¯å£</h3>
<pre><code class="hljs language-shell" lang="shell">sudo ufw allow 22/tcp  # SSHç«¯å£
sudo ufw allow 80/tcp   # HTTP
sudo ufw allow 443/tcp  # HTTPS
sudo ufw allow 10000/tcp #xrayçš„ç«¯å£
sudo ufw enable  #å¼€å¯é˜²ç«å¢™
</code></pre>
<p>æ‰€æœ‰å‡†å¤‡å·¥ä½œéƒ½åšå®Œäº†ï¼Œç°åœ¨å¯ä»¥å¯åŠ¨æˆ‘ä»¬çš„xrayå’ŒnginxæœåŠ¡äº†</p>
<p>å¦‚æœä¹‹å‰å¯åŠ¨äº†ï¼Œé‚£ä¹ˆä¿®æ”¹äº†é…ç½®æ–‡ä»¶ä¹‹åï¼Œè®°å¾—é‡å¯</p>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_">#</span><span class="bash">å¯åŠ¨xray</span>
sudo systemctl start xray 
<span class="hljs-meta prompt_">#</span><span class="bash">é‡å¯nginx</span>
sudo systemctl start nginx
</code></pre>
<h3 data-id="heading-6">å®¢æˆ·ç«¯çš„é…ç½®</h3>
<p>ä¸‹è½½åœ°å€</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2F2dust%2Fv2rayN" target="_blank" title="https://github.com/2dust/v2rayN" ref="nofollow noopener noreferrer">GitHub - 2dust/v2rayN: A GUI client for Windows, Linux and macOS, support Xray and sing-box and others</a></p>
<p>åœ¨releaseä¸‹è½½è‡ªå·±çš„ç‰ˆæœ¬å°±å¥½äº†ï¼Œä¸‹é¢ä»¥windowç‰ˆä¸¾ä¾‹ã€‚</p>
<p>1-ç‚¹å‡»é…ç½®é¡¹ï¼Œæ·»åŠ ä¸€ä¸ªvlessæœåŠ¡</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ce056785bf8b4f5e84a44529b7e79eb6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5oKy5Lyk:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771398469&amp;x-signature=WH73tWXEd9fT0z4wqhNzck3voIY%3D" alt="image.png" loading="lazy"/></p>













































<table><thead><tr><th>æ ‡é¢˜</th><th>å€¼</th></tr></thead><tbody><tr><td>åˆ«å</td><td>éšä¾¿å–ä¸€ä¸ª</td></tr><tr><td>åœ°å€</td><td>ä½ çš„æœåŠ¡å™¨åŸŸå</td></tr><tr><td>ç«¯å£</td><td>443</td></tr><tr><td>ç”¨æˆ·id</td><td>é…ç½®æ–‡ä»¶çš„uuid</td></tr><tr><td>ä¼ è¾“åè®®</td><td>ws</td></tr><tr><td>ä¼ªè£…åŸŸå</td><td>ä½ çš„æœåŠ¡å™¨åŸŸå</td></tr><tr><td>è·¯å¾„</td><td>nginxé…ç½®çš„è·¯å¾„</td></tr><tr><td>ä¼ è¾“å±‚å®‰å…¨</td><td>tls</td></tr><tr><td>SNI</td><td>ä½ çš„æœåŠ¡å™¨åŸŸå</td></tr></tbody></table>
<p>è‡³æ­¤ï¼ŒæœåŠ¡ç«¯ä¸å®¢æˆ·ç«¯å°±æ­å»ºå¥½äº†ï¼Œæœ€åï¼Œåœ¨ç½‘ç»œè®¾ç½®æ‰“å¼€ä»£ç†æ¨¡å¼ï¼Œ</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/96e9476495e6496cbd67ca87bdf49bb3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5oKy5Lyk:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771398469&amp;x-signature=q%2B6m7nCNiDQA608vUy06cVEN8Iw%3D" alt="image.png" loading="lazy"/></p>
<p>ç«¯å£ä¸ºå®¢æˆ·ç«¯å³ä¸‹è§’çš„</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7ea8321bce67454295f2bc736d3b9cf6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5oKy5Lyk:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771398469&amp;x-signature=QACwwEwaHaDwOG8hWFAqnPzlcBI%3D" alt="image.png" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è¿æ¥å±‚é‡Œä½ç€ä¸€ä¸ª HTTP è§£æå™¨]]></title>    <link>https://juejin.cn/post/7605105527258136576</link>    <guid>https://juejin.cn/post/7605105527258136576</guid>    <pubDate>2026-02-11T06:41:45.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605105527258136576" data-draft-id="7605128056485625871" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è¿æ¥å±‚é‡Œä½ç€ä¸€ä¸ª HTTP è§£æå™¨"/> <meta itemprop="keywords" content="ç¨‹åºå‘˜,Nginx"/> <meta itemprop="datePublished" content="2026-02-11T06:41:45.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºå‘˜æ´ªå¿—é“"/> <meta itemprop="url" content="https://juejin.cn/user/879237481367326"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è¿æ¥å±‚é‡Œä½ç€ä¸€ä¸ª HTTP è§£æå™¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/879237481367326/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºå‘˜æ´ªå¿—é“
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-11T06:41:45.000Z" title="Wed Feb 11 2026 06:41:45 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    5
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å‰ä¸¤ç¯‡æ‰“ç£¨äº†å¼•æ“å±‚â€”â€”<code>js_epoll_poll()</code> å°è£…äº†äº‹ä»¶åˆ†å‘ï¼Œ<code>js_engine_t</code> ç»„è£…äº† epoll å’Œå®šæ—¶å™¨ã€‚å¼•æ“å±‚ç°åœ¨å¾ˆå¹²å‡€ã€‚</p>
<p>ä½†å¾€ä¸Šçœ‹ä¸€å±‚ï¼Œæˆ‘å‘ç°äº†ä¸€ä¸ªä¸å¯¹åŠ²çš„ä¸œè¥¿ã€‚</p>
<h2 data-id="heading-0">è¿æ¥ç»“æ„ä½“é‡Œæœ‰ä»€ä¹ˆ</h2>
<p>çœ‹ <code>js_conn_t</code>â€”â€”è¿™æ˜¯ jsbench è¿æ¥å±‚çš„æ ¸å¿ƒç»“æ„ï¼š</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-keyword">typedef</span> <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">js_conn</span> {</span>
    <span class="hljs-type">js_event_t</span>           socket;
    <span class="hljs-type">conn_state_t</span>         state;
    SSL                 *ssl;

    <span class="hljs-type">const</span> <span class="hljs-type">char</span>          *req_data;
    <span class="hljs-type">size_t</span>               req_len;
    <span class="hljs-type">size_t</span>               req_sent;

    <span class="hljs-type">js_http_response_t</span>   response;   <span class="hljs-comment">/* â† è¿™æ˜¯ä»€ä¹ˆï¼Ÿ */</span>

    <span class="hljs-type">uint64_t</span>             start_ns;
    <span class="hljs-type">int</span>                  req_index;
    <span class="hljs-type">void</span>                *udata;
} <span class="hljs-type">js_conn_t</span>;
</code></pre>
<p>socketã€çŠ¶æ€ã€TLSã€è¯»å†™ç¼“å†²â€”â€”è¿™äº›éƒ½æ˜¯è¿æ¥è¯¥æœ‰çš„ã€‚ä½† <code>js_http_response_t response</code> æ˜¯ä»€ä¹ˆï¼Ÿä¸€ä¸ª HTTP å“åº”è§£æå™¨ï¼Œç›´æ¥åµŒåœ¨è¿æ¥ç»“æ„ä½“é‡Œã€‚</p>
<p>è¿æ¥ç»“æ„ä½“é‡Œä½ç€ä¸€ä¸ª HTTP è§£æå™¨ã€‚è¿™æ„å‘³ç€ï¼š<strong>è¿™ä¸ª"è¿æ¥"ï¼Œä¸èƒ½ç¦»å¼€ HTTP ç‹¬ç«‹å­˜åœ¨ã€‚</strong></p>
<p>å†çœ‹ <code>conn_do_read()</code>â€”â€”è¿æ¥å±‚å¤„ç†è¯»äº‹ä»¶çš„å‡½æ•°ï¼š</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-type">static</span> <span class="hljs-type">int</span> <span class="hljs-title function_">conn_do_read</span><span class="hljs-params">(<span class="hljs-type">js_conn_t</span> *c)</span> {
    <span class="hljs-type">char</span> buf[JS_READ_BUF_SIZE];

    <span class="hljs-keyword">for</span> (;;) {
        <span class="hljs-type">ssize_t</span> n;
        <span class="hljs-keyword">if</span> (c-&gt;ssl) {
            n = js_tls_read(c-&gt;ssl, buf, <span class="hljs-keyword">sizeof</span>(buf));
        } <span class="hljs-keyword">else</span> {
            n = read(c-&gt;socket.fd, buf, <span class="hljs-keyword">sizeof</span>(buf));
        }

        <span class="hljs-comment">/* ... é”™è¯¯å¤„ç† ... */</span>

        <span class="hljs-type">int</span> ret = js_http_response_feed(&amp;c-&gt;response, buf, (<span class="hljs-type">size_t</span>)n);
        <span class="hljs-keyword">if</span> (ret == <span class="hljs-number">1</span>) {
            c-&gt;state = CONN_DONE;    <span class="hljs-comment">/* HTTP è§£æå®Œæˆ â†’ è¿æ¥çŠ¶æ€å˜æ›´ */</span>
            <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;
        }
    }
}
</code></pre>
<p>è¯»æ•°æ®æ˜¯è¿æ¥å±‚çš„äº‹ï¼Œè§£æ HTTP æ˜¯åè®®å±‚çš„äº‹ã€‚ä½†åœ¨è¿™ä¸ªå‡½æ•°é‡Œï¼Œä¸¤ä»¶äº‹æ··åœ¨ä¸€èµ·ï¼Œæ²¡æœ‰è¾¹ç•Œã€‚</p>
<p>è¿˜æœ‰ <code>js_conn_keepalive()</code>ï¼š</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-type">bool</span> <span class="hljs-title function_">js_conn_keepalive</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">js_conn_t</span> *c)</span> {
    <span class="hljs-type">const</span> <span class="hljs-type">char</span> *conn_hdr = js_http_response_header(&amp;c-&gt;response, <span class="hljs-string">"Connection"</span>);
    <span class="hljs-keyword">if</span> (conn_hdr &amp;&amp; strcasecmp(conn_hdr, <span class="hljs-string">"close"</span>) == <span class="hljs-number">0</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
}
</code></pre>
<p>è¿æ¥è¯¥ä¸è¯¥å¤ç”¨ï¼Œè¿™ä¸ªå‡½æ•°å»è¯»äº† HTTP <code>Connection</code> å¤´ã€‚è¿æ¥å±‚ä¾èµ–äº†åè®®å±‚çš„çŸ¥è¯†ã€‚</p>
<p>ä¸‰ä¸ªåœ°æ–¹ï¼ŒåŒä¸€ä¸ªé—®é¢˜ï¼š<strong>conn å’Œ http å¡Œæˆäº†ä¸€å±‚ã€‚</strong></p>
<h2 data-id="heading-1">è¿™æ„å‘³ç€ä»€ä¹ˆ</h2>
<p>jsbench ä»ä¸‹å¾€ä¸Šæœ‰ä¸‰å±‚ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚      http        â”‚  åè®®è¯­ä¹‰ï¼šè§£æå“åº”ã€åˆ¤æ–­ keep-alive
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
<span class="hljs-code">           â”‚ ä¾èµ–
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚      conn        â”‚  ä¼ è¾“ç®¡ç†ï¼šè¿æ¥ã€è¯»å†™ã€TLS
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚ ä¾èµ–
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚     engine       â”‚  äº‹ä»¶é©±åŠ¨ï¼šepoll + timer
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</span></code></pre>
<p>ç†æƒ³çŠ¶æ€ä¸‹ï¼Œæ¯å±‚åšè‡ªå·±çš„äº‹ï¼Œä¾èµ–æ–¹å‘ä»ä¸Šå¾€ä¸‹ã€‚http ç”¨ conn å‘æ•°æ®ï¼Œconn ç”¨ engine åš I/Oã€‚ä¸Šå±‚ä¾èµ–ä¸‹å±‚ï¼Œä¸‹å±‚ä¸çŸ¥é“ä¸Šå±‚çš„å­˜åœ¨ã€‚</p>
<p>ä½†ç°åœ¨çš„ä»£ç æ˜¯è¿™æ ·çš„ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚       conn + http             â”‚
  â”‚                               â”‚
  â”‚  conn å†…åµŒ http response      â”‚
  â”‚  conn è¯» HTTP å¤´åˆ¤æ–­ keep-aliveâ”‚
  â”‚  conn ç›´æ¥è°ƒ http è§£æå™¨       â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
<span class="hljs-code">                 â”‚
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚           engine               â”‚  â† è¿™å±‚æ˜¯å¹²å‡€çš„
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</span></code></pre>
<p>ä¸Šé¢ä¸¤å±‚å¡Œæˆäº†ä¸€å¨ã€‚æ”¹ HTTP è§£æé€»è¾‘è¦åŠ¨ conn çš„ä»£ç ï¼Œæ”¹ conn çš„è¯»å–ç­–ç•¥å¯èƒ½ç¢°å HTTP è§£æã€‚<strong>ä¸¤å±‚çš„å¤æ‚åº¦ä¸æ˜¯åŠ åœ¨ä¸€èµ·ï¼Œæ˜¯ä¹˜åœ¨ä¸€èµ·ã€‚</strong></p>
<p>å¯¹æ¯”ä¸€ä¸‹ engine å±‚ã€‚engine å±‚ç»è¿‡ç¬¬äº”ã€å…­ç¯‡çš„é‡æ„ï¼Œä¾èµ–æ–¹å‘æ˜¯å¹²å‡€çš„ï¼š<code>js_event_t</code> ä¸çŸ¥é“ä¸Šé¢æ˜¯è°ï¼Œé€šè¿‡å›è°ƒéš”ç¦»ã€‚ç¬¬å…­ç¯‡å¼•å…¥ <code>js_engine_t</code> çš„æ—¶å€™ï¼Œæ”¹ engine çš„å†…éƒ¨ç»“æ„ï¼ˆä» thread-local epfd åˆ°æ˜¾å¼ engine å‚æ•°ï¼‰ï¼Œä¸Šå±‚çš„è¿æ¥é€»è¾‘å®Œå…¨ä¸å—å½±å“ã€‚<strong>æ”¹ä¸‹å±‚ä¸å½±å“ä¸Šå±‚â€”â€”è¿™å°±æ˜¯åˆ†å±‚çš„å›æŠ¥ã€‚</strong></p>
<p>conn å±‚å‘¢ï¼Ÿå¦‚æœä½ æƒ³æ¢ä¸€ç§ HTTP è§£ææ–¹å¼ï¼Œæˆ–è€…æƒ³è®© jsbench æ”¯æŒé HTTP çš„åè®®ï¼Œä½ ä¼šå‘ç°æ”¹ä¸åŠ¨â€”â€”å› ä¸º conn å’Œ http çš„ä»£ç çº ç¼ åœ¨ä¸€èµ·ï¼Œæ”¹å“ªè¾¹éƒ½æ€•ç¢°åå¦ä¸€è¾¹ã€‚</p>
<p><strong>åˆ†å±‚è§£å†³çš„æ ¸å¿ƒé—®é¢˜æ˜¯ä¾èµ–ã€‚ä¸æ˜¯æ¶ˆé™¤ä¾èµ–ï¼Œæ˜¯è®©ä¾èµ–å•å‘ã€‚</strong> ä¾èµ–ä¸€æ—¦å•å‘ï¼Œæ¯å±‚å°±èƒ½ç‹¬ç«‹ç†è§£ã€ç‹¬ç«‹ä¿®æ”¹ã€ç‹¬ç«‹æ¼”è¿›ã€‚</p>
<h2 data-id="heading-2">ä¸ºä»€ä¹ˆ AI ä¼šå†™æˆè¿™æ ·</h2>
<p>è¿™ä¸ªé—®é¢˜å€¼å¾—æƒ³ä¸€æƒ³ã€‚AI å†™ä»£ç çš„ç›®æ ‡æ˜¯"è®©åŠŸèƒ½å·¥ä½œ"ã€‚è®©ä¸€ä¸ª HTTP å®¢æˆ·ç«¯å·¥ä½œï¼Œæœ€ç›´æ¥çš„æ–¹å¼å°±æ˜¯ï¼šåˆ›å»ºè¿æ¥ã€å‘è¯·æ±‚ã€è¯»æ•°æ®ã€è§£æå“åº”ã€åˆ¤æ–­ keep-aliveã€‚è¿™äº›æ­¥éª¤ä¸²èµ·æ¥ï¼Œæ”¾åœ¨ä¸€ç»„å‡½æ•°é‡Œï¼ŒåŠŸèƒ½ç¡®å®å·¥ä½œäº†ã€‚</p>
<p>ä½†"è®©åŠŸèƒ½å·¥ä½œ"å’Œ"è®©ç³»ç»Ÿå¯æ¼”è¿›"æ˜¯ä¸¤ä¸ªä¸åŒçš„ç›®æ ‡ã€‚åˆ†å±‚æ˜¯ä¸ºåè€…æœåŠ¡çš„ã€‚<strong>å±‚é—´çš„è¾¹ç•Œä¸æ˜¯åŠŸèƒ½éœ€æ±‚ï¼Œæ˜¯æ¶æ„å†³ç­–ã€‚</strong> AI ä¸ä¼šä¸»åŠ¨è¯´"è¿™é‡Œè¯¥åˆ‡ä¸€åˆ€ï¼ŒæŠŠä¼ è¾“å’Œåè®®åˆ†å¼€"â€”â€”å› ä¸ºä¸åˆ‡ä¹Ÿèƒ½å·¥ä½œã€‚</p>
<p>è¿™ä¹Ÿæ˜¯å‰å‡ ç¯‡çš„ç»éªŒã€‚ç¬¬äº”ç¯‡ engine å±‚çš„é‡æ„ï¼Œä¸æ˜¯å› ä¸º AI æ”¹ä¸äº† epoll çš„ä»£ç ï¼Œè€Œæ˜¯ AI ä¸ä¼šä¸»åŠ¨è¯´"epfd ä¸è¯¥æ˜¯å‚æ•°ï¼Œåº”è¯¥æ˜¯çº¿ç¨‹çš„å±æ€§"ã€‚äººç»™äº†æ–¹å‘ï¼ŒAI æ‰§è¡Œå¾—å¾ˆå¥½ã€‚conn å’Œ http çš„åˆ†å±‚ä¹Ÿä¸€æ ·ï¼šAI å®Œå…¨æœ‰èƒ½åŠ›åšæ‹†åˆ†ï¼Œä½†"è¯¥ä¸è¯¥æ‹†ã€åœ¨å“ªé‡Œæ‹†"ï¼Œæ˜¯äººçš„åˆ¤æ–­ã€‚</p>
<h2 data-id="heading-3">å»æ‰ä¸åˆç†</h2>
<p>æ–¹å‘æ˜ç¡®äº†ï¼šæŠŠ conn å’Œ http åˆ†å¼€ã€‚ä»å“ªé‡Œä¸‹æ‰‹ï¼Ÿ</p>
<p>æ”¹è¿›æ¶æ„æœ‰ä¸€ä¸ªå¾ˆæœ´ç´ çš„æ–¹æ³•ï¼š<strong>æ‰¾åˆ°ä¸åˆç†çš„åœ°æ–¹ï¼Œå»æ‰å®ƒã€‚</strong> <code>conn_do_read()</code> ä¸åº”è¯¥åš HTTP è§£æâ€”â€”å»æ‰ã€‚<code>js_conn_t</code> ä¸åº”è¯¥å†…åµŒ HTTP å“åº”â€”â€”å»æ‰ã€‚<code>js_conn_keepalive()</code> ä¸åº”è¯¥è¯» HTTP å¤´â€”â€”å»æ‰ã€‚ä¸€ä¸ªä¸€ä¸ªå»æ‰ï¼Œå±‚å°±è‡ªç„¶åˆ†å¼€äº†ã€‚</p>
<p>èƒŒåçš„é“ç†å¾ˆç®€å•ï¼š<strong>ä¸€ä¸ªå‡½æ•°åšçš„äº‹è¶Šå¤šï¼Œå®ƒç‰µæ‰¯çš„æ¦‚å¿µå°±è¶Šå¤šï¼Œæ”¹åŠ¨å®ƒçš„ç†ç”±ä¹Ÿè¶Šå¤šã€‚</strong> è¿™æœ‰ä¸ªç»å…¸çš„åå­—å«å•ä¸€èŒè´£ï¼Œä½†æˆ‘æ›´æ„¿æ„ç”¨æœ´ç´ çš„è¯´æ³•ï¼šè®©æ¯ä¸ªå‡½æ•°åªåšä¸€ä»¶å®ƒè¯¥åšçš„äº‹ã€‚</p>
<p>å½“ç„¶è¿™ä¸æ˜¯æ­»è§„çŸ©ã€‚<code>conn_do_write()</code> å†™å®Œæ•°æ®ä¹‹åè®¾ç½® <code>c-&gt;state = CONN_READING</code>â€”â€”å†™å®Œåˆ‡æ¢åˆ°è¯»ï¼Œè¿™æ˜¯è¿æ¥çŠ¶æ€æœºçš„è‡ªç„¶æµè½¬ï¼Œæ²¡å¿…è¦ç¡¬æ‹†ã€‚<strong>åˆ¤æ–­çš„æ ‡å‡†ä¸æ˜¯"åšäº†å‡ ä»¶äº‹"ï¼Œè€Œæ˜¯"è¿™äº›äº‹ä¼šä¸ä¼šå„è‡ªç‹¬ç«‹å˜åŒ–"ã€‚</strong> è¯»å­—èŠ‚å’Œè§£æ HTTP æ˜¾ç„¶ä¼šâ€”â€”ä½ å®Œå…¨å¯èƒ½æ¢ä¸€ç§åè®®è§£æï¼Œæˆ–è€…æ¢ä¸€ç§è¯»å–ç­–ç•¥ï¼Œå®ƒä»¬å„è‡ªæœ‰å„è‡ªçš„å˜åŒ–ç†ç”±ã€‚</p>
<h2 data-id="heading-4">ç¬¬ä¸€æ­¥ï¼šå¼•å…¥ bufferï¼Œè®©è¯»å’Œè§£æåˆ†å¼€</h2>
<p><code>conn_do_read()</code> è¦æ”¹â€”â€”è®©å®ƒåªåšè¯»æ•°æ®ï¼Œä¸åšè§£æã€‚ä½†è¯»åˆ°çš„å­—èŠ‚æ”¾å“ªé‡Œï¼Ÿ</p>
<p>ç°åœ¨ç”¨çš„æ˜¯æ ˆä¸Šä¸´æ—¶æ•°ç»„ï¼Œè¯»å®Œç«‹åˆ»å–‚ç»™è§£æå™¨ï¼Œç”¨å®Œå°±ä¸¢ã€‚å¦‚æœä¸ç«‹åˆ»å¤„ç†ï¼Œå­—èŠ‚å°±éœ€è¦ä¸€ä¸ªåœ°æ–¹å­˜ç€ã€‚å¼•å…¥ <code>js_buf_t</code>ï¼š</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-keyword">typedef</span> <span class="hljs-class"><span class="hljs-keyword">struct</span> {</span>
    <span class="hljs-type">char</span>   *data;
    <span class="hljs-type">size_t</span>  len;     <span class="hljs-comment">/* å·²æœ‰æ•°æ®çš„é•¿åº¦ */</span>
    <span class="hljs-type">size_t</span>  cap;     <span class="hljs-comment">/* åˆ†é…çš„å®¹é‡ */</span>
} <span class="hljs-type">js_buf_t</span>;
</code></pre>
<p>æœ‰äº† bufferï¼Œ<code>conn_do_read()</code> å˜æˆäº†ï¼š</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-type">static</span> <span class="hljs-type">int</span> <span class="hljs-title function_">conn_do_read</span><span class="hljs-params">(<span class="hljs-type">js_conn_t</span> *c)</span> {
    <span class="hljs-type">js_buf_t</span> *in = &amp;c-&gt;in;

    <span class="hljs-keyword">for</span> (;;) {
        js_buf_ensure(in, in-&gt;len + JS_READ_BUF_SIZE);

        <span class="hljs-type">ssize_t</span> n;
        <span class="hljs-keyword">if</span> (c-&gt;ssl) {
            n = js_tls_read(c-&gt;ssl, in-&gt;data + in-&gt;len, in-&gt;cap - in-&gt;len);
        } <span class="hljs-keyword">else</span> {
            n = read(c-&gt;socket.fd, in-&gt;data + in-&gt;len, in-&gt;cap - in-&gt;len);
        }

        <span class="hljs-keyword">if</span> (n &lt; <span class="hljs-number">0</span>) {
            <span class="hljs-keyword">if</span> (errno == EAGAIN || errno == EWOULDBLOCK) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
            c-&gt;state = CONN_ERROR;
            <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;
        }
        <span class="hljs-keyword">if</span> (n == <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;  <span class="hljs-comment">/* å¯¹ç«¯å…³é—­ */</span>

        in-&gt;len += (<span class="hljs-type">size_t</span>)n;
    }
}
</code></pre>
<p>æ²¡æœ‰ <code>js_http_response_feed</code>ï¼Œæ²¡æœ‰ <code>c-&gt;state = CONN_DONE</code>ï¼Œæ²¡æœ‰ä»»ä½•åè®®ç›¸å…³çš„åˆ¤æ–­ã€‚<strong>åªåšä¸€ä»¶äº‹ï¼šæŠŠå­—èŠ‚ä» socket è¯»åˆ° buffer é‡Œã€‚</strong></p>
<p>HTTP è§£ææ¬åˆ°äº†è°ƒç”¨æ–¹â€”â€”worker å’Œ loop è¯»å®Œä¹‹åï¼Œä» <code>c-&gt;in</code> å–æ•°æ®ï¼Œè‡ªå·±å–‚ç»™ HTTP è§£æå™¨ã€‚ä¸å†æ˜¯ conn æ¨æ•°æ®ç»™è§£æå™¨ï¼Œè€Œæ˜¯è°ƒç”¨è€…ä» conn çš„ buffer é‡Œæ‹‰æ•°æ®ã€‚<strong>è¿™æ˜¯æ•´ä¸ªåˆ†å±‚å·¥ä½œä¸­æœ€å…³é”®çš„ä¸€æ­¥â€”â€”conn ä¸å†çŸ¥é“ HTTP çš„å­˜åœ¨ã€‚</strong></p>
<p>ä»£ç å˜æ›´: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fhongzhidao%2Fjsbench%2Fcommit%2F47e4d2c" target="_blank" title="https://github.com/hongzhidao/jsbench/commit/47e4d2c" ref="nofollow noopener noreferrer">47e4d2c</a></p>
<h2 data-id="heading-5">ç¬¬äºŒæ­¥ï¼šç»™ conn å±‚ä¸€ä¸ªæ­£å¼çš„å®¶</h2>
<p>ä¹‹å‰è¿æ¥ç›¸å…³çš„ä»£ç éƒ½åœ¨ <code>js_http_client.c</code> é‡Œâ€”â€”æ–‡ä»¶åæœ¬èº«å°±æš´éœ²äº†é—®é¢˜ï¼šä¸€ä¸ªå«"HTTP å®¢æˆ·ç«¯"çš„æ–‡ä»¶ï¼Œæ€ä¹ˆèƒ½æ˜¯ä¸€ä¸ªå¹²å‡€çš„ä¼ è¾“å±‚ï¼Ÿ</p>
<p>æ–°å»º <code>js_conn.h</code> å’Œ <code>js_conn.c</code>ï¼Œæå– <code>js_conn_read()</code> ä½œä¸ºç¬¬ä¸€ä¸ªå…¬å¼€æ¥å£ã€‚<code>js_http_client.c</code> é‡Œè¿˜ç•™ç€ createã€freeã€writeã€reuseã€reset è¿™äº›å‡½æ•°ï¼Œæ²¡æœ‰æ€¥ç€ä¸€æ¬¡æ¬å®Œã€‚</p>
<p>æˆ‘ä¸€ç›´åœ¨æœ‰æ„è¯†åœ°é¿å…è¿‡åº¦è®¾è®¡ã€‚è®¾è®¡ä¸è¶³çš„ä»£ç æ˜¯è¯šå®çš„â€”â€”å®ƒå‘Šè¯‰ä½ "è¿™é‡Œè¿˜æ²¡æƒ³æ¸…æ¥š"ã€‚è¿‡åº¦è®¾è®¡çš„ä»£ç æ˜¯ä¼ªè£…çš„â€”â€”é‚£äº›æŠ½è±¡å¯èƒ½çŒœé”™äº†æœªæ¥çš„æ–¹å‘ï¼Œç­‰ä½ çœŸçš„éœ€è¦æ”¹çš„æ—¶å€™ï¼Œåè€Œæ¯”æ²¡æœ‰æŠ½è±¡æ›´éš¾åŠ¨ã€‚<strong>åœ¨æ²¡æœ‰è¶³å¤Ÿä¿¡æ¯çš„æ—¶å€™ï¼Œå°‘åšæ¯”å¤šåšå®‰å…¨ã€‚</strong></p>
<p>ä»£ç å˜æ›´: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fhongzhidao%2Fjsbench%2Fcommit%2F5c8c3bc" target="_blank" title="https://github.com/hongzhidao/jsbench/commit/5c8c3bc" ref="nofollow noopener noreferrer">5c8c3bc</a></p>
<h2 data-id="heading-6">ç¬¬ä¸‰æ­¥ï¼šå»æ‰ç»“æ„ä½“é‡Œä¸è¯¥æœ‰çš„å­—æ®µ</h2>
<p>è¡Œä¸ºè§£è€¦äº†ï¼Œæ¨¡å—ä¹Ÿæœ‰äº†ã€‚ä½† <code>js_conn_t</code> é‡Œè¿˜åµŒç€ <code>js_http_response_t response</code>ã€‚è¡Œä¸ºä¸Šåˆ†å¼€äº†ï¼Œç»“æ„ä¸Šè¿˜ç»‘ç€ã€‚</p>
<p>å¥½çš„ç»“æ„ä½“åº”è¯¥æ˜¯ç®€æ´çš„â€”â€”<strong>å®ƒæ‹¥æœ‰çš„æ¯ä¸ªå­—æ®µéƒ½åº”è¯¥æ˜¯å®ƒéœ€è¦çš„ï¼Œè€Œä¸æ˜¯åˆ«äººéœ€è¦çš„ã€‚</strong></p>
<p>å»æ‰ä¹‹åï¼ŒHTTP å“åº”æ”¾å“ªé‡Œï¼Ÿç­”æ¡ˆåœ¨å·²æœ‰çš„æœºåˆ¶é‡Œã€‚<code>js_event_t</code> æœ‰ä¸€ä¸ª <code>void *data</code> å­—æ®µï¼Œè®©è°ƒç”¨è€…è‡ªå·±æŒæœ‰ responseï¼Œé€šè¿‡ <code>socket.data</code> å…³è”åˆ°è¿æ¥ï¼š</p>
<pre><code class="hljs language-c" lang="c">js_http_response_init(&amp;responses[i]);
conns[i]-&gt;socket.data = &amp;responses[i];
</code></pre>
<p>è¯»äº‹ä»¶å¤„ç†é‡Œï¼Œä» <code>socket.data</code> å–å‡º responseï¼š</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-type">static</span> <span class="hljs-type">void</span> <span class="hljs-title function_">worker_on_read</span><span class="hljs-params">(<span class="hljs-type">js_event_t</span> *ev)</span> {
    <span class="hljs-type">js_conn_t</span> *c = (<span class="hljs-type">js_conn_t</span> *)ev;
    <span class="hljs-type">js_http_response_t</span> *r = c-&gt;socket.data;
    <span class="hljs-comment">/* ... */</span>
}
</code></pre>
<p><code>js_conn_keepalive()</code> ä¹Ÿæ¬åˆ° worker é‡Œï¼Œå˜æˆå±€éƒ¨å‡½æ•° <code>worker_keepalive()</code>ã€‚è¿æ¥å±‚ä¸å†éœ€è¦çŸ¥é“ HTTP åè®®çš„ä»»ä½•ç»†èŠ‚ã€‚</p>
<p>å»æ‰ <code>response</code> ä¹‹åçš„ <code>js_conn_t</code>ï¼š</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-keyword">typedef</span> <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">js_conn</span> {</span>
    <span class="hljs-type">js_event_t</span>       socket;
    <span class="hljs-type">conn_state_t</span>     state;
    SSL             *ssl;

    <span class="hljs-type">const</span> <span class="hljs-type">char</span>      *req_data;
    <span class="hljs-type">size_t</span>           req_len;
    <span class="hljs-type">size_t</span>           req_sent;

    <span class="hljs-type">js_buf_t</span>         in;

    <span class="hljs-type">uint64_t</span>         start_ns;
    <span class="hljs-type">int</span>              req_index;
    <span class="hljs-type">void</span>            *udata;
} <span class="hljs-type">js_conn_t</span>;
</code></pre>
<p>æ²¡æœ‰ä»»ä½• HTTP ç›¸å…³çš„å­—æ®µã€‚è¿æ¥å°±æ˜¯è¿æ¥ã€‚<strong>ç»“æ„ä½“çš„ç®€æ´ç¨‹åº¦ï¼Œå°±æ˜¯åˆ†å±‚æ˜¯å¦åˆ°ä½çš„ç›´æ¥ä½“ç°ã€‚</strong></p>
<p>ä»£ç å˜æ›´: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fhongzhidao%2Fjsbench%2Fcommit%2F0bbe6a3" target="_blank" title="https://github.com/hongzhidao/jsbench/commit/0bbe6a3" ref="nofollow noopener noreferrer">0bbe6a3</a></p>
<h2 data-id="heading-7">ç¬¬å››æ­¥ï¼šæŠŠç±»å‹æ¬å›å®ƒè¯¥åœ¨çš„åœ°æ–¹</h2>
<p><code>js_conn_t</code> ä¸å†ä¾èµ– <code>js_http_response_t</code>ï¼Œç»ˆäºå¯ä»¥ä» <code>js_main.h</code> æ¬åˆ° <code>js_conn.h</code>ã€‚ä¹‹å‰æ¬ä¸äº†ï¼Œå°±æ˜¯å› ä¸º <code>js_http_response_t</code> å®šä¹‰åœ¨ <code>js_main.h</code> ä¸­ï¼Œå†…åµŒäº†å°±æ¬ä¸èµ°ã€‚ä¾èµ–å»æ‰ä¹‹åï¼Œéšœç¢æ¶ˆå¤±äº†ã€‚</p>
<p>conn å±‚å¼€å§‹æœ‰è‡ªå·±çš„è½®å»“äº†ï¼šç±»å‹åœ¨ <code>js_conn.h</code>ï¼Œè¯»å®ç°åœ¨ <code>js_conn.c</code>ï¼Œä¸ä¾èµ–ä»»ä½•åè®®å±‚çš„ä¸œè¥¿ã€‚createã€freeã€write è¿™äº›å‡½æ•°è¿˜ç•™åœ¨ <code>js_http_client.c</code> é‡Œï¼Œä½†æ–¹å‘å·²ç»å¾ˆæ¸…æ¥šäº†ã€‚ä¸æ€¥ï¼Œä¸€æ­¥ä¸€æ­¥æ¥ã€‚</p>
<p>ä»£ç å˜æ›´: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fhongzhidao%2Fjsbench%2Fcommit%2Fedc2859" target="_blank" title="https://github.com/hongzhidao/jsbench/commit/edc2859" ref="nofollow noopener noreferrer">edc2859</a></p>
<h2 data-id="heading-8">å›å¤´çœ‹</h2>
<p>å››æ­¥åšå®Œï¼Œå›åˆ°å¼€å¤´çš„é—®é¢˜ï¼šè¿æ¥å±‚é‡Œè¿˜ä½ç€é‚£ä¸ª HTTP è§£æå™¨å—ï¼Ÿ</p>
<p>ä¸åœ¨äº†ã€‚<code>js_conn_t</code> é‡Œæ²¡æœ‰ä»»ä½• HTTP å­—æ®µï¼Œ<code>conn_do_read()</code> ä¸è°ƒä»»ä½• HTTP å‡½æ•°ï¼Œconn æ¨¡å—æœ‰äº†è‡ªå·±çš„å¤´æ–‡ä»¶å’Œå®ç°æ–‡ä»¶ã€‚conn ä¸çŸ¥é“ http çš„å­˜åœ¨â€”â€”å°±åƒ engine ä¸çŸ¥é“ conn çš„å­˜åœ¨ä¸€æ ·ã€‚</p>
<p>æ¯ä¸€æ­¥åšçš„éƒ½æ˜¯åŒä¸€ä»¶äº‹ï¼š<strong>æ‰¾åˆ°ä¸åˆç†çš„ä¾èµ–ï¼Œå»æ‰å®ƒã€‚</strong> ä¸éœ€è¦æå‰è®¾è®¡å®Œç¾çš„åˆ†å±‚æ–¹æ¡ˆï¼Œä¸éœ€è¦ä¸€æ¬¡æ¬å®Œæ‰€æœ‰ä»£ç ã€‚çœ‹åˆ°ä¸€ä¸ªä¸åˆç†çš„åœ°æ–¹ï¼Œå»æ‰å®ƒï¼Œç³»ç»Ÿå°±æ¯”ä¹‹å‰å¥½ä¸€ç‚¹ã€‚ç§¯ç´¯å‡ æ­¥ï¼Œå±‚å°±è‡ªç„¶åˆ†å¼€äº†ã€‚</p>
<p>åˆ†å±‚ä¸æ˜¯ä¸€ç§ç†è®ºï¼Œæ˜¯ä¸€ç§å®ç”¨çš„æ‰‹æ®µã€‚åˆ¤æ–­åˆ†å±‚æ˜¯å¦åˆ°ä½ï¼Œæœ‰å‡ ä¸ªç›´è§‚çš„æ£€éªŒæ–¹æ³•ï¼š</p>
<ul>
<li><strong>çœ‹ç»“æ„ä½“ã€‚</strong> æ¯ä¸ªå­—æ®µéƒ½æ˜¯è‡ªå·±éœ€è¦çš„ï¼Œè¿˜æ˜¯æ›¿åˆ«äººæ‹¿ç€çš„ï¼Ÿ</li>
<li><strong>çœ‹å‡½æ•°ã€‚</strong> å®ƒåšçš„äº‹æƒ…æ˜¯å¦å±äºåŒä¸€å±‚ï¼Ÿè¯»å­—èŠ‚å’Œè§£æåè®®ä¸åœ¨åŒä¸€å±‚ã€‚</li>
<li><strong>çœ‹ä¾èµ–æ–¹å‘ã€‚</strong> ä¸‹å±‚æœ‰æ²¡æœ‰å¼•ç”¨ä¸Šå±‚çš„ç±»å‹æˆ–è°ƒç”¨ä¸Šå±‚çš„å‡½æ•°ï¼Ÿ</li>
<li><strong>çœ‹å¤´æ–‡ä»¶ã€‚</strong> ä¸€ä¸ªæ¨¡å—çš„ <code>.h</code> èƒ½ä¸èƒ½ä¸ä¾èµ–ä¸ç›¸å…³çš„ç±»å‹å°±ç¼–è¯‘é€šè¿‡ï¼Ÿ</li>
</ul>
<p>è¿™äº›æ£€éªŒä¸éœ€è¦ç”»æ¶æ„å›¾ï¼Œæ‰“å¼€ä»£ç å°±èƒ½çœ‹åˆ°ã€‚</p>
<hr/>
<p>GitHub: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fhongzhidao%2Fjsbench" target="_blank" title="https://github.com/hongzhidao/jsbench" ref="nofollow noopener noreferrer">github.com/hongzhidao/â€¦</a></p>
<p>æ›´å¤šæ–‡ç« å’Œåç»­æ›´æ–°ï¼Œå…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼š<strong>ç¨‹åºå‘˜æ´ªå¿—é“</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[React Rndå®ç°è‡ªç”±æ‹–åŠ¨ä¸è¾¹ç•Œæ£€æµ‹]]></title>    <link>https://juejin.cn/post/7605131777175371839</link>    <guid>https://juejin.cn/post/7605131777175371839</guid>    <pubDate>2026-02-11T07:28:30.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605131777175371839" data-draft-id="7589052659435700270" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="React Rndå®ç°è‡ªç”±æ‹–åŠ¨ä¸è¾¹ç•Œæ£€æµ‹"/> <meta itemprop="keywords" content="å‰ç«¯,React.js"/> <meta itemprop="datePublished" content="2026-02-11T07:28:30.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç äº‘ä¹‹ä¸Š"/> <meta itemprop="url" content="https://juejin.cn/user/1319873957601656"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            React Rndå®ç°è‡ªç”±æ‹–åŠ¨ä¸è¾¹ç•Œæ£€æµ‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1319873957601656/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç äº‘ä¹‹ä¸Š
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-11T07:28:30.000Z" title="Wed Feb 11 2026 07:28:30 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨<code>AI é—®ç­”</code>çƒ‚å¤§è¡—çš„ä»Šå¤©ï¼Œåªè¦æ˜¯ä¸ªå¹³å°éƒ½åœ¨æèŠå¤©æœºå™¨äººï¼Œä¸»è¦åº”ç”¨åœºæ™¯æ— éæ˜¯é—®ç­”å¼çš„â€œæ™ºèƒ½â€å®¢æœã€‚<br/>
ç¬”è€…æ‰€åœ¨å°å›¢é˜Ÿç»´æŠ¤ç€ä¸€ä¸ª<code>OA</code>ç³»ç»Ÿ(æŠ€æœ¯æ ˆï¼š<code>react17</code> + <code>webpack5.0</code> + <code>tailwindcss</code> + <code>ArcoDesign</code>)ï¼Œè¯¥ç³»ç»Ÿæ²‰æ·€äº†å¾ˆå¤šçŸ¥è¯†æ–‡æ¡£ï¼Œç»è¿‡åç«¯åŒå­¦çš„åŠªåŠ›ï¼ˆæ®è¯´æ˜¯ç”¨äº†å¼€æºæ¡†æ¶å®ç°æ–‡æ¡£çš„<code>Embedding</code>ï¼‰å°†å…¶æ–‡æ¡£çŸ¥è¯†åŒ–ï¼Œæ­é…å¸å†…éƒ¨ç½²çš„DeepSeekï¼ŒåŸºæœ¬å®ç°äº†bossè¦æ±‚çš„æ™ºèƒ½é—®ç­”ã€‚</p>
<h2 data-id="heading-0">æ™ºèƒ½é—®ç­”UI</h2>
<p>å› ä¸ºæ˜¯å†…éƒ¨OAç³»ç»Ÿï¼Œä½¿ç”¨è€…åŸºæœ¬æ˜¯HRå°å§å§ï¼Œå¥¹ä»¬ç»™çš„éœ€æ±‚åŸºæœ¬æ˜¯ä¸€å¥è¯æè¿°ï¼Œå“ˆå“ˆå“ˆï¼Œä¹ŸæŒºå¥½ï¼Œæ–¹ä¾¿ç¬”è€…è‡ªç”±å‘æŒ¥ã€‚
å‚ï¼ˆæŠ„ï¼‰è€ƒï¼ˆè¢­ï¼‰ç±»ä¼¼å¹³å°çš„äº¤äº’ï¼Œå†³å®šé‡‡ç”¨å³ä¾§æŠ½å±‰çš„å½¢å¼åº•éƒ¨ä¸€ä¸ªè¾“å…¥æ¡†ï¼Œä¸Šæ–¹å±•ç¤ºæ¶ˆæ¯åŒºï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e80c1fce68e145f2a5c265de3894bb09~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56CB5LqR5LmL5LiK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771399709&amp;x-signature=83kqaCnidEFVMwZ1yNQ72v5HSNI%3D" alt="Clipboard_Screenshot_1767011782.png" loading="lazy"/></p>
<h2 data-id="heading-1">æäº‹1.0</h2>
<p><strong>HRå°å§å§ï¼š</strong> è¿™ä¸ªå¯¹è¯æ¡†æŒºå¥½ç”¨çš„ï¼Œåªæ˜¯å›ºå®šåœ¨é¡µé¢å·¦ä¾§ï¼Œèƒ½ä¸èƒ½åƒå¾®ä¿¡ä¸€æ ·è‡ªç”±æ‹–åŠ¨åˆ°å±å¹•å…¶ä»–ä½ç½®ï¼Ÿ<br/>
æˆ‘ï¼šé¢ï¼Œè¿™æ˜¯å‰ç«¯é¡µé¢ï¼Œå…¨å±å¹•æ‹–åŠ¨å¯å®ç°ä¸äº†ï¼Œåœ¨å½“å‰é¡µé¢æ‹–åŠ¨è¿˜å¯ä»¥åŠªåŠ›ä¸€ä¸‹ã€‚<br/>
<strong>HRå°å§å§ï¼š</strong> å½“å‰é¡µé¢æ‹–åŠ¨ä¸å°±æ˜¯åœ¨æ˜¾ç¤ºå±ä¸Šæ‹–åŠ¨å˜›ï¼Œæœ‰ä»€ä¹ˆåŒºåˆ«å‘¢~<br/>
æˆ‘ï¼šé¢...</p>
<h3 data-id="heading-2">å®ç°</h3>
<p>è¦æ‹–åŠ¨æ˜¯å§ï¼Œé‚£è¿˜ä¸ç®€å•ï¼Œéƒ½2025å¹´äº†ï¼Œæ‹–åŠ¨è¿˜ä¸æ˜¯éšä¾¿æ‰¾ä¸ªåº“å°±å¯ä»¥æ‰“å‘å®ç°ã€‚<br/>
é¦–å…ˆæƒ³åˆ°çš„ä¾¿æ˜¯ <a href="https://link.juejin.cn?target=https%3A%2F%2Freact-dnd.github.io%2Freact-dnd%2Fabout" target="_blank" title="https://react-dnd.github.io/react-dnd/about" ref="nofollow noopener noreferrer">react-dnd</a> ï¼Œä½†æ˜¯å§ï¼Œè¿™ä¸ªåº“èƒ½åŠ›å¾ˆå¼ºå¤§ï¼Œç”¨æ¥åšå•ç»„ä»¶çš„æ‹–åŠ¨å¤ªæ€é¸¡ç”¨ç‰›åˆ€äº†ã€‚è€Œä¸”ç¬”è€…ä¸å–œæ¬¢é‡å¤ä»¥å¾€çš„æ–¹æ¡ˆï¼Œå–œæ¬¢ç”¨ç‚¹æ–°ç©æ„å„¿ã€‚<br/>
ç»§ç»­ Searchingï¼Œå•Šå“ˆï¼Œè¿˜çœŸæ‰¾ç€äº†ä¸€ä¸ªè½»é‡ä¸”åˆé€‚çš„åº“ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fbokuweb%2Freact-rnd" target="_blank" title="https://github.com/bokuweb/react-rnd" ref="nofollow noopener noreferrer">react-rnd</a><br/>
å…¶æ–‡æ¡£ä¸­çš„ä¾‹å­å’Œå¥‘åˆæœ¬æ¬¡éœ€æ±‚ï¼š
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2f1e460d3f644a1195e242cf87708cc8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56CB5LqR5LmL5LiK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771399709&amp;x-signature=xVTBVBt8pU5gUVfutBILpzrx3Z4%3D" alt="screenshot.gif" loading="lazy"/></p>
<p>è¯´å¹²å°±å¹²ï¼Œå¼•å…¥ <code>react-rnd</code>ï¼ŒæŒ‰ç…§å®˜æ–¹æ–‡æ¡£è¿›è¡Œé…ç½®ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Rnd</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"react-rnd"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">DragForm</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Rnd</span>
      <span class="hljs-attr">default</span>=<span class="hljs-string">{{</span>
        <span class="hljs-attr">x:</span> <span class="hljs-attr">0</span>,
        <span class="hljs-attr">y:</span> <span class="hljs-attr">0</span>,
        <span class="hljs-attr">width:</span> <span class="hljs-attr">500</span>,
        <span class="hljs-attr">height:</span> <span class="hljs-attr">190</span>,
      }}
      <span class="hljs-attr">minWidth</span>=<span class="hljs-string">{500}</span>
      <span class="hljs-attr">minHeight</span>=<span class="hljs-string">{190}</span>
      <span class="hljs-attr">bounds</span>=<span class="hljs-string">"window"</span>
    &gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"drag__content"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">MyForm</span> /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">Rnd</span>&gt;</span></span>
  );
}
</code></pre>
<p>ä¼˜åŒ–1å®Œæˆï¼Œäº¤å·®ï¼</p>
<h2 data-id="heading-3">æäº‹1.1</h2>
<p><strong>HRå°å§å§ï¼š</strong> å¯ä»¥æ‹–åŠ¨å•¦ï¼ŒçœŸçš„å¾ˆä¸æ»‘å”‰~ï¼Œèƒ½ä¸èƒ½æ”¯æŒæŠ˜å ï¼Ÿæœ‰æ—¶å€™æˆ‘æƒ³çœ‹é¡µé¢ä¸»ä½“å†…å®¹ä½†æ˜¯åˆä¸æƒ³å…³æ‰å¼¹çª—ï¼Œå…³æ‰å†æ‰“å¼€å†å²è®°å½•å°±æ²¡äº†ï¼ˆå½“æ—¶ç€æ€¥äº¤å·®ï¼Œè¿˜ä¸æ”¯æŒæŸ¥çœ‹å†å²ä¼šè¯ï¼‰ã€‚<br/>
å¥½å§ï¼Œæˆ‘å°±çŸ¥é“æ²¡é‚£ä¹ˆç®€å•~<br/>
ç»§ç»­ä¼˜åŒ–ï¼ŒæŠ˜å å˜›ï¼Œç”¨ä¸Š <code>Collapse</code> ç»„ä»¶ä¸å°±è¡Œäº†ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// ä¸‹é¢ä¸º demo ä»£ç ï¼Œä½¿ç”¨ç®€æ˜“ Form ä»£æ›¿äº† Drawer å†…å®¹</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">DragForm</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Rnd</span>
      <span class="hljs-attr">default</span>=<span class="hljs-string">{{</span>
        <span class="hljs-attr">x:</span> <span class="hljs-attr">0</span>,
        <span class="hljs-attr">y:</span> <span class="hljs-attr">0</span>,
        <span class="hljs-attr">width:</span> <span class="hljs-attr">500</span>,
        <span class="hljs-attr">height:</span> <span class="hljs-attr">190</span>,
      }}
      <span class="hljs-attr">minWidth</span>=<span class="hljs-string">{500}</span>
      <span class="hljs-attr">minHeight</span>=<span class="hljs-string">{190}</span>
      <span class="hljs-attr">bounds</span>=<span class="hljs-string">"window"</span>
    &gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"drag__content"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Collapse</span> <span class="hljs-attr">expandIcon</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"collapse__header"</span> <span class="hljs-attr">defaultActiveKey</span>=<span class="hljs-string">"1"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">CollapseItem</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"1"</span> <span class="hljs-attr">header</span>=<span class="hljs-string">"æŠ˜å é¢æ¿"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">MyForm</span> /&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">CollapseItem</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">Collapse</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">Rnd</span>&gt;</span></span>
  );
}
</code></pre>
<p>å—¯ï¼Œèƒ½æ‹–åŠ¨ï¼Œèƒ½æŠ˜å ï¼Œè¿™å›å¤Ÿç”¨äº†å§ã€‚</p>
<h2 data-id="heading-4">æäº‹2.0</h2>
<p><strong>HRå°å§å§ï¼š</strong> ä¸å¯¹å•Šï¼Œæˆ‘è¿™è¾¹å±•å¼€å†…å®¹åï¼Œä¸‹é¢éƒ¨åˆ†è¢«æŒ¡ä½äº†ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6e205483dc1a4d9494642a8d9a458bf9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56CB5LqR5LmL5LiK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771399709&amp;x-signature=otOviD2BlR5J%2F1geTbQ1g9sRe40%3D" alt="Clipboard_Screenshot_1767014151.png" loading="lazy"/></p>
<p>èƒ½ä¸èƒ½è®©è¢«æŒ¡ä½éƒ¨åˆ†è‡ªåŠ¨ç§»åŠ¨ä¸Šæ¥ï¼Ÿä¸è¦è®©æˆ‘æ‰‹å·¥è°ƒæ•´ä½ç½®ï¼Ÿ<br/>
å¥½å§å¥½å§ï¼Œç»§ç»­ä¼˜åŒ–~</p>
<h3 data-id="heading-5">åˆæ­¥ä¼˜åŒ–</h3>
<p>é¦–å…ˆåˆ†æé—®é¢˜åŸå› ï¼š</p>
<blockquote>
<p><code>Collapse</code> å±•å¼€ã€æ”¶èµ·æ—¶ä¼šå¼•å‘å®¹å™¨é«˜åº¦çš„å˜åŒ–ï¼Œä½†æ˜¯æ²¡æœ‰è§¦å‘ <code>rnd</code> å®¹å™¨çš„ä½ç½®å˜åŒ–ï¼Œé€ æˆå†…å®¹è¢«é®æŒ¡äº†ï¼Œæ‰€ä»¥è§£å†³åŠæ³•æ˜¯ç›‘å¬ <code>Collapse</code> çš„ <code>onChange</code> äº‹ä»¶ï¼Œåœ¨å›è°ƒé‡Œé‡æ–°å®šä½ï¼Œé˜²æ­¢<code>rnd</code> å®¹å™¨æº¢å‡ºå¯è§†èŒƒå›´ã€‚</p>
</blockquote>
<p>æ•ˆæœï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/85c2c056bcc7465b9d92aef5989e5634~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56CB5LqR5LmL5LiK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771399709&amp;x-signature=vtWkclYatx26tWxyYskFfc6yFLI%3D" alt="Kapture 2026-02-11 at 15.05.46.gif" loading="lazy"/></p>
<h3 data-id="heading-6">è¿›ä¸€æ­¥ä¼˜åŒ–</h3>
<p>ä¸Šé¢çš„å¤„ç†å¯ä»¥è§£å†³ <code>Collapse</code> å±•å¼€æ—¶è¢«é®æŒ¡é—®é¢˜ï¼Œä½†æ˜¯ç”¨æˆ·å¯ä»¥æ— é™åˆ¶æ‹–åŠ¨ <code>Collapse</code>ï¼Œå°† <code>Collapse</code> æ‹–åŠ¨åˆ°è§†çª—ä¹‹å¤–ï¼Œæ‰€ä»¥è¿˜éœ€è¦ç»™æ‹–åŠ¨åŠ ä¸Šä¸€ä¸ªè¾¹ç•Œï¼Œé˜²æ­¢å†…å®¹è¢«æ‹–åŠ¨åˆ°è§†çª—ä¹‹å¤–ã€‚<br/>
è¿™é‡Œæœ‰ä¸¤ç§å®ç°ï¼š</p>
<ol>
<li>é™å®šæ‹–åŠ¨èŒƒå›´ï¼Œå½“<code>Collapse</code>ç¦»å¼€è§†çª—æ—¶ç¦æ­¢æ‹–åŠ¨</li>
<li>å¢åŠ å…œåº•é€»è¾‘ï¼Œå½“æœ€åé˜²æ­¢ä½ç½®ä¸åœ¨è§†çª—èŒƒå›´å†…æ—¶ï¼Œè‡ªåŠ¨å°†<code>Collapse</code>å®šä½åˆ°æœ€ä½å¯è§†èŒƒå›´å†…</li>
</ol>
<p>ç»¼åˆç”¨æˆ·ä½“éªŒï¼Œå†³å®šé‡‡ç”¨ç¬¬äºŒç§å®ç°ã€‚</p>
<h4 data-id="heading-7">æå–å·¥å…·ç±»</h4>
<p>ä¸ºäº†æ»¡è¶³æ‹–åŠ¨åè‡ªåŠ¨å®šä½ï¼Œéœ€è¦å®ç°ä¸€ä¸ªå·¥å…·å‡½æ•°ï¼Œç¬”è€…åˆšå¼€å§‹å†™çš„æ—¶å€™ç¡®å®æ˜¯å®šä¹‰äº†ä¸€ä¸ªfunctionï¼Œæœ€åå‘ç°å†…è”æ–¹æ³•è¶Šæ¥è¶Šå¤šï¼Œæœ€åé‡æ„ä¸ºä¸€ä¸ª <code>Class</code>:</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-keyword">export</span> interface <span class="hljs-title class_">IPositionData</span> {
  <span class="hljs-attr">x</span>: number;
  <span class="hljs-attr">y</span>: number;
}
<span class="hljs-keyword">export</span> interface <span class="hljs-title class_">ISizeData</span> {
  <span class="hljs-attr">width</span>: number;
  <span class="hljs-attr">height</span>: number;
}

<span class="hljs-keyword">export</span> interface <span class="hljs-title class_">IHelpPanelRectData</span> {
  <span class="hljs-attr">defaultRightOffset</span>: number;
  <span class="hljs-attr">defaultBottomOffset</span>: number;
  <span class="hljs-attr">defaultTopOffset</span>: number;
  <span class="hljs-attr">defaultSize</span>: <span class="hljs-title class_">ISizeData</span>;
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">getDefaultRect</span> = (<span class="hljs-params">data: IHelpPanelRectData</span>) =&gt; {
  <span class="hljs-keyword">const</span> winWidth = <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerWidth</span>;
  <span class="hljs-keyword">const</span> winHeight = <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerHeight</span>;
  <span class="hljs-keyword">const</span> width = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(
    winWidth - data.<span class="hljs-property">defaultRightOffset</span>,
    data.<span class="hljs-property">defaultSize</span>.<span class="hljs-property">width</span>
  );
  <span class="hljs-keyword">const</span> height = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(
    winHeight - data.<span class="hljs-property">defaultBottomOffset</span> - data.<span class="hljs-property">defaultTopOffset</span>,
    data.<span class="hljs-property">defaultSize</span>.<span class="hljs-property">height</span>
  );
  <span class="hljs-keyword">const</span> position = {
    <span class="hljs-attr">x</span>: winWidth - width - data.<span class="hljs-property">defaultRightOffset</span>,
    <span class="hljs-attr">y</span>: winHeight - height - data.<span class="hljs-property">defaultBottomOffset</span>,
  };
  <span class="hljs-keyword">return</span> { <span class="hljs-attr">size</span>: { width, height }, position };
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HelpPanelRect</span> {
  <span class="hljs-comment">// æ‹–åŠ¨å®¹å™¨æœ€å°é«˜åº¦</span>
  public minHeight = <span class="hljs-number">100</span>;
  <span class="hljs-comment">// æ‹–åŠ¨å®¹å™¨æœ€å°å®½åº¦</span>
  public minWidth = <span class="hljs-number">400</span>;
  <span class="hljs-comment">// æ‹–åŠ¨å®¹å™¨æœ€å¤§é«˜åº¦</span>
  public maxHeight = <span class="hljs-number">1024</span>;
  <span class="hljs-comment">// æ‹–åŠ¨å®¹å™¨æœ€å¤§å®½åº¦</span>
  public maxWidth = <span class="hljs-number">1024</span>;
  <span class="hljs-comment">// é»˜è®¤ä¸Šè¾¹è·</span>
  public defaultTopOffset = <span class="hljs-number">20</span>;
  <span class="hljs-comment">// å½“å‰ä¸Šè¾¹è·</span>
  public topOffset = <span class="hljs-number">20</span>;
  <span class="hljs-comment">// é»˜è®¤å³è¾¹è·</span>
  public defaultRightOffset = <span class="hljs-number">20</span>;
  <span class="hljs-comment">// å½“å‰å³è¾¹è·</span>
  public rightOffset = <span class="hljs-number">20</span>;
  <span class="hljs-comment">// é»˜è®¤æƒ…å†µä¸‹è·åº•é«˜åº¦ï¼Œç´§è´´å¸®åŠ©æŒ‰é’®</span>
  public defaultBottomOffset = <span class="hljs-number">20</span>;
  <span class="hljs-comment">// é¢æ¿ç§»åŠ¨ä¹‹ååº•éƒ¨è¾¹è·ï¼Œ0 è¡¨ç¤ºç´§è´´çª—å£</span>
  public bottomOffset = <span class="hljs-number">20</span>;
  <span class="hljs-comment">// é»˜è®¤å¤§å°</span>
  public defaultSize = {
    <span class="hljs-attr">width</span>: <span class="hljs-number">450</span>,
    <span class="hljs-attr">height</span>: <span class="hljs-number">457</span>,
  };
  <span class="hljs-comment">// æœ€å¤§å¤§å°</span>
  public maxSize = {
    <span class="hljs-attr">width</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">maxWidth</span>,
    <span class="hljs-attr">height</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">maxHeight</span>,
  };

  private <span class="hljs-attr">prevSize</span>: <span class="hljs-title class_">ISizeData</span>;
  private <span class="hljs-attr">prevPosition</span>: <span class="hljs-title class_">IPositionData</span>;

  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">data: IHelpPanelRectData</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">defaultRightOffset</span> = data.<span class="hljs-property">defaultRightOffset</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">defaultBottomOffset</span> = data.<span class="hljs-property">defaultBottomOffset</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">defaultTopOffset</span> = data.<span class="hljs-property">defaultTopOffset</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">defaultSize</span> = data.<span class="hljs-property">defaultSize</span>;

    <span class="hljs-variable language_">this</span>.<span class="hljs-property">prevSize</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">defaultSize</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">prevPosition</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getDefaultRect</span>(data).<span class="hljs-property">position</span>;
  }

  <span class="hljs-comment">// ç‚¹å‡»å…¥å£æŒ‰é’®æ—¶çš„åˆå§‹çŠ¶æ€</span>
  <span class="hljs-title function_">getDefaultRect</span>(<span class="hljs-params">data?: IHelpPanelRectData</span>) {
    <span class="hljs-keyword">const</span> defaultRect = data ? <span class="hljs-title function_">getDefaultRect</span>(data) : <span class="hljs-title function_">getDefaultRect</span>(<span class="hljs-variable language_">this</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">prevSize</span> = defaultRect.<span class="hljs-property">size</span>;
    <span class="hljs-keyword">return</span> {
      ...defaultRect,
    };
  }

  <span class="hljs-comment">/**
   *
   * <span class="hljs-doctag">@param</span> windowIsResize æ˜¯å¦æ‹–åŠ¨æµè§ˆå™¨çª—å£
   */</span>
  <span class="hljs-title function_">getRectByWindowResize</span>(<span class="hljs-params">windowIsResize = <span class="hljs-literal">false</span></span>) {
    <span class="hljs-keyword">const</span> winWidth = <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerWidth</span>;
    <span class="hljs-keyword">const</span> winHeight = <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerHeight</span>;
    <span class="hljs-keyword">let</span> { x, y } = <span class="hljs-variable language_">this</span>.<span class="hljs-property">prevPosition</span>;
    y = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(y, <span class="hljs-variable language_">this</span>.<span class="hljs-property">topOffset</span>);

    <span class="hljs-keyword">const</span> <span class="hljs-title function_">getMaxHeight</span> = (<span class="hljs-params"/>) =&gt;
      <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">minHeight</span>,
        <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(winHeight - y - <span class="hljs-variable language_">this</span>.<span class="hljs-property">bottomOffset</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">maxHeight</span>)
      );

    <span class="hljs-keyword">let</span> { width, height } = <span class="hljs-variable language_">this</span>.<span class="hljs-property">prevSize</span>;
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">rightOffset</span> + x + width &gt; winWidth) {
      <span class="hljs-keyword">if</span> (x &gt; <span class="hljs-number">0</span>) {
        x = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(winWidth - width - <span class="hljs-variable language_">this</span>.<span class="hljs-property">rightOffset</span>, <span class="hljs-number">0</span>);
      } <span class="hljs-keyword">else</span> {
        width = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">minWidth</span>,
          <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(winWidth - <span class="hljs-variable language_">this</span>.<span class="hljs-property">rightOffset</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">maxWidth</span>)
        );
      }
    }

    <span class="hljs-keyword">if</span> (y + height + <span class="hljs-variable language_">this</span>.<span class="hljs-property">bottomOffset</span> &gt; winHeight) {
      <span class="hljs-keyword">if</span> (y &gt; <span class="hljs-variable language_">this</span>.<span class="hljs-property">topOffset</span>) {
        y = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">topOffset</span>, winHeight - height - <span class="hljs-variable language_">this</span>.<span class="hljs-property">bottomOffset</span>);
      } <span class="hljs-keyword">else</span> {
        height = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">minHeight</span>,
          <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(
            winHeight - <span class="hljs-variable language_">this</span>.<span class="hljs-property">topOffset</span> - <span class="hljs-variable language_">this</span>.<span class="hljs-property">bottomOffset</span>,
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">maxHeight</span>
          )
        );
      }
    } <span class="hljs-keyword">else</span> {
      height = windowIsResize
        ? <span class="hljs-title function_">getMaxHeight</span>()
        : <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(height, winHeight - <span class="hljs-variable language_">this</span>.<span class="hljs-property">bottomOffset</span> - <span class="hljs-variable language_">this</span>.<span class="hljs-property">topOffset</span>);
    }

    <span class="hljs-keyword">return</span> { <span class="hljs-attr">size</span>: { width, height }, <span class="hljs-attr">position</span>: { x, y } };
  }

  <span class="hljs-comment">/**
   * å°ºå¯¸ä¸å˜ï¼Œåªè°ƒæ•´ä½ç½®
   * <span class="hljs-doctag">@param</span> position æ‹–åŠ¨ä¹‹åçš„ä½ç½®
   */</span>
  <span class="hljs-title function_">getRectByPosition</span>(<span class="hljs-params">position: IPositionData</span>) {
    <span class="hljs-keyword">const</span> winWidth = <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerWidth</span>;
    <span class="hljs-keyword">const</span> winHeight = <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerHeight</span>;
    <span class="hljs-keyword">const</span> { width, height } = <span class="hljs-variable language_">this</span>.<span class="hljs-property">prevSize</span>;

    <span class="hljs-variable language_">this</span>.<span class="hljs-property">prevPosition</span> = {
      <span class="hljs-attr">x</span>: <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(<span class="hljs-number">0</span>, position.<span class="hljs-property">x</span>), winWidth - width - <span class="hljs-variable language_">this</span>.<span class="hljs-property">rightOffset</span>),
      <span class="hljs-attr">y</span>: <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(
        <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(<span class="hljs-number">0</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">topOffset</span>, position.<span class="hljs-property">y</span>),
        winHeight - height - <span class="hljs-variable language_">this</span>.<span class="hljs-property">bottomOffset</span>
      ),
    };

    <span class="hljs-keyword">return</span> { <span class="hljs-attr">size</span>: { width, height }, <span class="hljs-attr">position</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">prevPosition</span> };
  }

  <span class="hljs-title function_">getRectByResize</span>(<span class="hljs-params">pos?: IPositionData, s?: ISizeData</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">prevSize</span> = s ?? <span class="hljs-variable language_">this</span>.<span class="hljs-property">prevSize</span>;

    <span class="hljs-variable language_">this</span>.<span class="hljs-property">prevPosition</span> = pos ?? <span class="hljs-variable language_">this</span>.<span class="hljs-property">prevPosition</span>;

    <span class="hljs-keyword">const</span> { size, position } = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getRectByWindowResize</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">prevSize</span> = size;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">prevPosition</span> = position;
    <span class="hljs-keyword">return</span> { size, position };
  }

  <span class="hljs-title function_">getRect</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> { <span class="hljs-attr">position</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">prevPosition</span>, <span class="hljs-attr">size</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">prevSize</span> };
  }

  <span class="hljs-title function_">setRect</span>(<span class="hljs-params">position?: IPositionData, size?: ISizeData</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">prevPosition</span> = position ?? <span class="hljs-variable language_">this</span>.<span class="hljs-property">prevPosition</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">prevSize</span> = size ?? <span class="hljs-variable language_">this</span>.<span class="hljs-property">prevSize</span>;
  }

  <span class="hljs-title function_">setDefaultSize</span>(<span class="hljs-params">size: ISizeData</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">defaultSize</span> = size;
  }

  <span class="hljs-title function_">setSize</span>(<span class="hljs-params">size: ISizeData</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">prevSize</span> = size;
  }

  <span class="hljs-title function_">resetSize</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">prevSize</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">defaultSize</span>;
  }

  <span class="hljs-title function_">resetPosition</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> winWidth = <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerWidth</span>;
    <span class="hljs-keyword">const</span> winHeight = <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerHeight</span>;
    <span class="hljs-keyword">const</span> { height, width } = <span class="hljs-variable language_">this</span>.<span class="hljs-property">prevSize</span>;

    <span class="hljs-variable language_">this</span>.<span class="hljs-property">prevPosition</span> = {
      <span class="hljs-attr">x</span>: winWidth - width - <span class="hljs-variable language_">this</span>.<span class="hljs-property">defaultRightOffset</span>,
      <span class="hljs-attr">y</span>: winHeight - height - <span class="hljs-variable language_">this</span>.<span class="hljs-property">defaultBottomOffset</span>,
    };
  }

  <span class="hljs-comment">/**
   * é‡ç½®å¸ƒå±€
   */</span>
  <span class="hljs-title function_">resetRect</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">resetSize</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">resetPosition</span>();
  }
}
</code></pre>
<p>ä½¿ç”¨ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Rnd</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"react-rnd"</span>;
<span class="hljs-keyword">import</span> {
  <span class="hljs-title class_">Form</span>,
  <span class="hljs-title class_">Input</span>,
  <span class="hljs-title class_">Checkbox</span>,
  <span class="hljs-title class_">Button</span>,
  <span class="hljs-title class_">Radio</span>,
  <span class="hljs-title class_">Collapse</span>,
} <span class="hljs-keyword">from</span> <span class="hljs-string">"@arco-design/web-react"</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">"./DragForm.less"</span>;
<span class="hljs-keyword">import</span> { useRef, useState, useLayoutEffect } <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">HelpPanelRect</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"../utils/HelpPanelRect"</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title class_">FormItem</span> = <span class="hljs-title class_">Form</span>.<span class="hljs-property">Item</span>;
<span class="hljs-keyword">const</span> <span class="hljs-title class_">RadioGroup</span> = <span class="hljs-title class_">Radio</span>.<span class="hljs-property">Group</span>;
<span class="hljs-keyword">const</span> <span class="hljs-title class_">CollapseItem</span> = <span class="hljs-title class_">Collapse</span>.<span class="hljs-property">Item</span>;

<span class="hljs-keyword">const</span> helpPanelRect = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HelpPanelRect</span>({
  <span class="hljs-attr">defaultRightOffset</span>: <span class="hljs-number">20</span>,
  <span class="hljs-attr">defaultBottomOffset</span>: <span class="hljs-number">20</span>,
  <span class="hljs-attr">defaultTopOffset</span>: <span class="hljs-number">20</span>,
  <span class="hljs-attr">defaultSize</span>: {
    <span class="hljs-attr">width</span>: <span class="hljs-number">400</span>,
    <span class="hljs-attr">height</span>: <span class="hljs-number">300</span>,
  },
});

<span class="hljs-comment">/**
 *
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">DragForm</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> panelRef = useRef&lt;<span class="hljs-title class_">HTMLDivElement</span>&gt;(<span class="hljs-literal">null</span>);

  <span class="hljs-comment">// æµ®çª—å¤§å°</span>
  <span class="hljs-keyword">const</span> [floatPanelSize, setFloatPanelSize] = <span class="hljs-title function_">useState</span>(
    helpPanelRect.<span class="hljs-property">defaultSize</span>
  );
  <span class="hljs-comment">// æµ®çª—åæ ‡</span>
  <span class="hljs-keyword">const</span> [floatPanelPosition, setFloatPanelPosition] = <span class="hljs-title function_">useState</span>(
    helpPanelRect.<span class="hljs-title function_">getDefaultRect</span>().<span class="hljs-property">position</span>
  );

  <span class="hljs-title function_">useLayoutEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">if</span> (!panelRef.<span class="hljs-property">current</span>) {
      <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-keyword">const</span> target = panelRef.<span class="hljs-property">current</span>;
    <span class="hljs-keyword">const</span> resizeObserver = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ResizeObserver</span>(<span class="hljs-function">(<span class="hljs-params">entries</span>) =&gt;</span> {
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> entry <span class="hljs-keyword">of</span> entries) {
        <span class="hljs-keyword">const</span> { width, height } = entry.<span class="hljs-property">contentRect</span>;
        <span class="hljs-keyword">if</span> (
          width === floatPanelSize.<span class="hljs-property">width</span> &amp;&amp;
          height === floatPanelSize.<span class="hljs-property">height</span>
        ) {
          <span class="hljs-keyword">continue</span>;
        }
        <span class="hljs-title function_">setFloatPanelSize</span>({ width, height });
        helpPanelRect.<span class="hljs-title function_">setDefaultSize</span>({ width, height });
        <span class="hljs-comment">// æ›´æ–°é¢æ¿é«˜åº¦</span>
        <span class="hljs-keyword">const</span> newSize = {
          ...floatPanelSize,
          height,
        };

        <span class="hljs-comment">// è·å–å½“å‰ä½ç½®å¹¶è°ƒæ•´ï¼Œç¡®ä¿é¢æ¿ä¸ä¼šè¶…å‡ºè§†å£</span>
        <span class="hljs-keyword">const</span> currentRect = helpPanelRect.<span class="hljs-title function_">getRectByResize</span>(
          floatPanelPosition,
          newSize
        );

        <span class="hljs-title function_">setFloatPanelSize</span>(currentRect.<span class="hljs-property">size</span>);
        <span class="hljs-title function_">setFloatPanelPosition</span>(currentRect.<span class="hljs-property">position</span>);
      }
    });
    <span class="hljs-keyword">if</span> (target) {
      resizeObserver.<span class="hljs-title function_">observe</span>(target);
    }

    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
      resizeObserver.<span class="hljs-title function_">disconnect</span>();
    };
  }, [panelRef, floatPanelSize, floatPanelPosition]);

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Rnd</span>
      <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span>
        <span class="hljs-attr">pointerEvents:</span> "<span class="hljs-attr">all</span>",
        <span class="hljs-attr">zIndex:</span> <span class="hljs-attr">101</span>,
      }}
      <span class="hljs-attr">className</span>=<span class="hljs-string">"float-panel"</span>
      <span class="hljs-attr">disableDragging</span>=<span class="hljs-string">{false}</span>
      <span class="hljs-attr">enableResizing</span>=<span class="hljs-string">{{</span>
        <span class="hljs-attr">bottom:</span> <span class="hljs-attr">false</span>,
        <span class="hljs-attr">bottomLeft:</span> <span class="hljs-attr">false</span>,
        <span class="hljs-attr">bottomRight:</span> <span class="hljs-attr">false</span>,
        <span class="hljs-attr">left:</span> <span class="hljs-attr">false</span>,
        <span class="hljs-attr">right:</span> <span class="hljs-attr">false</span>,
        <span class="hljs-attr">top:</span> <span class="hljs-attr">false</span>,
        <span class="hljs-attr">topLeft:</span> <span class="hljs-attr">false</span>,
        <span class="hljs-attr">topRight:</span> <span class="hljs-attr">false</span>,
      }}
      <span class="hljs-attr">position</span>=<span class="hljs-string">{floatPanelPosition}</span>
      <span class="hljs-attr">size</span>=<span class="hljs-string">{floatPanelSize}</span>
      <span class="hljs-attr">maxWidth</span>=<span class="hljs-string">{helpPanelRect.maxWidth}</span>
      <span class="hljs-attr">maxHeight</span>=<span class="hljs-string">{helpPanelRect.maxHeight}</span>
      <span class="hljs-attr">minHeight</span>=<span class="hljs-string">{helpPanelRect.minHeight}</span>
      <span class="hljs-attr">minWidth</span>=<span class="hljs-string">{helpPanelRect.minWidth}</span>
      <span class="hljs-attr">onResizeStop</span>=<span class="hljs-string">{(e,</span> <span class="hljs-attr">direction</span>, <span class="hljs-attr">ref</span>, <span class="hljs-attr">delta</span>, <span class="hljs-attr">position</span>) =&gt;</span> {
        const currentRect = helpPanelRect.getRectByResize(position, {
          width: parseInt(ref.style.width, 10),
          height: parseInt(ref.style.height, 10),
        });
        setFloatPanelSize(currentRect.size);
        setFloatPanelPosition(currentRect.position);
      }}
      onDragStop={(e, data) =&gt; {
        const currentRect = helpPanelRect.getRectByPosition(data);
        setFloatPanelSize(currentRect.size);
        setFloatPanelPosition(currentRect.position);
      }}
      dragHandleClassName="drag__content"
    &gt;
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">{panelRef}</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"drag__content"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">header</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"drag__header"</span>&gt;</span>æ‹–åŠ¨åŒºåŸŸ<span class="hljs-tag">&lt;/<span class="hljs-name">header</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Collapse</span> <span class="hljs-attr">expandIcon</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"collapse__header"</span> <span class="hljs-attr">defaultActiveKey</span>=<span class="hljs-string">"1"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">CollapseItem</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"1"</span> <span class="hljs-attr">header</span>=<span class="hljs-string">"æŠ˜å é¢æ¿"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">MyForm</span> /&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">CollapseItem</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">Collapse</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">Rnd</span>&gt;</span></span>
  );
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">MyForm</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Form</span>
      <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span>
        <span class="hljs-attr">maxWidth:</span> <span class="hljs-attr">600</span>,
      }}
      <span class="hljs-attr">autoComplete</span>=<span class="hljs-string">"off"</span>
      <span class="hljs-attr">layout</span>=<span class="hljs-string">{</span>"<span class="hljs-attr">vertical</span>"}
    &gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">FormItem</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"Layout"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">RadioGroup</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"button"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"layout"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">Radio</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"horizontal"</span>&gt;</span>horizontal<span class="hljs-tag">&lt;/<span class="hljs-name">Radio</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">Radio</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"vertical"</span>&gt;</span>vertical<span class="hljs-tag">&lt;/<span class="hljs-name">Radio</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">Radio</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"inline"</span>&gt;</span>inline<span class="hljs-tag">&lt;/<span class="hljs-name">Radio</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">RadioGroup</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">FormItem</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">FormItem</span>
        <span class="hljs-attr">label</span>=<span class="hljs-string">"Username"</span>
        <span class="hljs-attr">field</span>=<span class="hljs-string">"username"</span>
        <span class="hljs-attr">tooltip</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">div</span>&gt;</span>Username is required <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>}
        rules={[{ required: true }]}
      &gt;
        <span class="hljs-tag">&lt;<span class="hljs-name">Input</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">width:</span> <span class="hljs-attr">270</span> }} <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"please enter your name"</span> /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">FormItem</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">FormItem</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"Post"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Input</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">width:</span> <span class="hljs-attr">270</span> }} <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"please enter your post"</span> /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">FormItem</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">FormItem</span> <span class="hljs-attr">wrapperCol</span>=<span class="hljs-string">{{}}</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Checkbox</span>&gt;</span>I have read the manual<span class="hljs-tag">&lt;/<span class="hljs-name">Checkbox</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">FormItem</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">FormItem</span> <span class="hljs-attr">wrapperCol</span>=<span class="hljs-string">{{}}</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"primary"</span> <span class="hljs-attr">htmlType</span>=<span class="hljs-string">"submit"</span>&gt;</span>
          Submit
        <span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">FormItem</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">Form</span>&gt;</span></span>
  );
}
</code></pre>
<p>ä¸Šé¢çš„ä»£ç åŸºæœ¬æ¼”ç¤ºäº† <code>HelpPanelRect</code> çš„ä½¿ç”¨ã€‚</p>
<blockquote>
<p>PS: ç¬¬ä¸€æ­¥ä¼˜åŒ–ä¸­ç›‘å¬ <code>Collapse</code> çš„ <code>onChange</code> äº‹ä»¶æ¥é‡æ–°å®šä½çš„å®ç°è¢«æˆ‘æ”¹æˆäº†ç›‘å¬ ResizeObserverï¼Œè¿™æ ·å¯ä»¥è§£å†³çœŸæ­£å±•å¼€ã€æ”¶èµ· <code>Collapse</code> åè¯¯è§¦å‘é‡æ–°å®šä½çš„bug</p>
</blockquote>
<h3 data-id="heading-8">æœ€ç»ˆæ•ˆæœ</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/08ebcd5e26dc4e979e7be900d93c5c2a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56CB5LqR5LmL5LiK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771399709&amp;x-signature=%2F2sxcZGv2yAKvP%2FmI8t0xFDoNfo%3D" alt="Kapture 2026-02-11 at 15.19.58.gif" loading="lazy"/></p>
<h2 data-id="heading-9">å°ç»“</h2>
<ol>
<li>å…¨å±æ‹–æ‹½åº”è¯¥æ˜¯å¾ˆå¸¸è§çš„åŠŸèƒ½ï¼Œç¤¾åŒºé‡Œä¹Ÿæœ‰å¾ˆå¤šå¥½çš„å®ç°ï¼Œä½†æ˜¯æœ‰ç‰¹æ®Šä½ç½®è¦æ±‚æ—¶å°±éœ€è¦æœ‰é¢å¤–å¼€å‘ï¼›</li>
<li>æ–‡ä¸­çš„å·¥å…·å‡½æ•°ç»“åˆ<code>react-rnd</code>å¯ä»¥é€‚é…å¾ˆå¤šæ‹–æ‹½æ—¶æœ‰è¾¹ç•Œæ§åˆ¶çš„åœºæ™¯ï¼Œå¸Œæœ›ç»™å¤§å®¶å¸¦æ¥ä¸€ç‚¹å¸®åŠ©ã€‚</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Agentå¼€å‘åº”çŸ¥åº”ä¼š(Langfuse)ï¼š1.Langfuseçš„ä¸¤ç§ä½¿ç”¨æ–¹å¼]]></title>    <link>https://juejin.cn/post/7605135197166272562</link>    <guid>https://juejin.cn/post/7605135197166272562</guid>    <pubDate>2026-02-11T06:04:08.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605135197166272562" data-draft-id="7605164560711122970" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Agentå¼€å‘åº”çŸ¥åº”ä¼š(Langfuse)ï¼š1.Langfuseçš„ä¸¤ç§ä½¿ç”¨æ–¹å¼"/> <meta itemprop="keywords" content="LangChain,AIç¼–ç¨‹,AIGC"/> <meta itemprop="datePublished" content="2026-02-11T06:04:08.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="zaizaizhao"/> <meta itemprop="url" content="https://juejin.cn/user/906425682113933"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Agentå¼€å‘åº”çŸ¥åº”ä¼š(Langfuse)ï¼š1.Langfuseçš„ä¸¤ç§ä½¿ç”¨æ–¹å¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/906425682113933/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    zaizaizhao
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-11T06:04:08.000Z" title="Wed Feb 11 2026 06:04:08 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:14px;overflow-x:hidden;color:var(--cyanosis-base-color);transition:color .35s;--cyanosis-base-color:#353535;--cyanosis-title-color:#005bb7;--cyanosis-strong-color:#2196f3;--cyanosis-em-color:#4fc3f7;--cyanosis-del-color:#ccc;--cyanosis-link-color:#3da8f5;--cyanosis-linkh-color:#007fff;--cyanosis-border-color:#bedcff;--cyanosis-border-color-2:#ececec;--cyanosis-bg-color:#fff;--cyanosis-blockquote-color:#8c8c8c;--cyanosis-blockquote-bg-color:#f0fdff;--cyanosis-code-color:#c2185b;--cyanosis-code-bg-color:#fff4f4;--cyanosis-code-pre-color:#f8f8f8;--cyanosis-table-border-color:#c3e0fd;--cyanosis-table-th-color:#dff0ff;--cyanosis-table-tht-color:#005bb7;--cyanosis-table-tr-nc-color:#f7fbff;--cyanosis-table-trh-color:#e0edf7;--cyanosis-slct-title-color:#005bb7;--cyanosis-slct-titlebg-color:rgba(175,207,247,0.25);--cyanosis-slct-text-color:#c80000;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#e8ebec;--cyanosis-slct-codebg-color:#ffeaeb;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body.__dark{--cyanosis-base-color:#cacaca;--cyanosis-title-color:#ddd;--cyanosis-strong-color:#fe9900;--cyanosis-em-color:#ffd28e;--cyanosis-del-color:#ccc;--cyanosis-link-color:#ffb648;--cyanosis-linkh-color:#fe9900;--cyanosis-border-color:#ffe3ba;--cyanosis-border-color-2:#ffcb7b;--cyanosis-bg-color:#2f2f2f;--cyanosis-blockquote-color:#c7c7c7;--cyanosis-blockquote-bg-color:rgba(255,199,116,0.1);--cyanosis-code-color:#000;--cyanosis-code-bg-color:#ffcb7b;--cyanosis-code-pre-color:rgba(255,227,185,0.5);--cyanosis-table-border-color:#fe9900;--cyanosis-table-th-color:#ffb648;--cyanosis-table-tht-color:#000;--cyanosis-table-tr-nc-color:#6d5736;--cyanosis-table-trh-color:#947443;--cyanosis-slct-title-color:#000;--cyanosis-slct-titlebg-color:#fe9900;--cyanosis-slct-text-color:#00c888;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#000;--cyanosis-slct-codebg-color:#ffcb7b;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body h1{padding-bottom:4px;font-size:30px}.markdown-body h1,.markdown-body h2{margin-top:36px;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);transition:color .35s}.markdown-body h2{position:relative;padding-left:10px;padding-right:10px;padding-bottom:10px;font-size:24px;border-bottom:1px solid var(--cyanosis-border-color-2)}.markdown-body h2:before{content:"ã€Œ";position:absolute;top:-6px;left:-14px}.markdown-body h2:after{content:"ã€";position:relative;top:6px;right:auto}.markdown-body h3{position:relative;padding-bottom:0;margin-top:30px;margin-bottom:10px;font-size:20px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h3:before{content:"Â»";padding-right:6px;color:var(--cyanosis-strong-color)}.markdown-body h4{margin-top:24px;font-size:16px}.markdown-body h4,.markdown-body h5{padding-bottom:0;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h5{margin-top:18px;font-size:14px}.markdown-body h6{padding-bottom:0;margin-top:12px;margin-bottom:10px;font-size:12px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body p{line-height:inherit;margin-top:16px;margin-bottom:16px}.markdown-body img{max-width:100%}.markdown-body hr{position:relative;width:98%;height:1px;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,var(--cyanosis-link-color),rgba(255,0,0,.3),hsla(0,0%,100%,.1),rgba(255,0,0,.3),var(--cyanosis-link-color));border-width:0;overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background-color:var(--cyanosis-bg-color);background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center;transition:background-color .5s}.markdown-body code{padding:.065em .4em;font-size:.87em;color:var(--cyanosis-code-color);word-break:break-word;overflow-x:auto;background-color:var(--cyanosis-code-bg-color);border-radius:2px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;padding:16px 12px;margin:0;font-size:12px;color:#333;word-break:normal;overflow-x:auto;background:var(--cyanosis-code-pre-color)}.markdown-body pre&gt;code::-webkit-scrollbar{width:4px;height:4px}.markdown-body pre&gt;code::-webkit-scrollbar-track{background-color:var(--cyanosis-border-color)}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:var(--cyanosis-strong-color);border-radius:10px}.markdown-body a{position:relative;text-decoration:none;color:var(--cyanosis-link-color);border-bottom:1px solid var(--cyanosis-border-color)}.markdown-body a:hover{border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body a:active,.markdown-body a:hover{color:var(--cyanosis-linkh-color)}.markdown-body a:after{position:absolute;content:"";top:100%;left:0;width:100%;opacity:0;border-bottom:1px solid var(--cyanosis-border-color);transition:top .3s,opacity .3s;transform:translateZ(0)}.markdown-body a:hover:after{top:0;opacity:1;border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid var(--cyanosis-table-border-color);border-spacing:0;border-collapse:collapse}.markdown-body table thead{color:#000;text-align:left;font-size:14px;background:#f6f6f6}.markdown-body table tr:nth-child(2n){background-color:var(--cyanosis-table-tr-nc-color)}.markdown-body table tr:hover{background-color:var(--cyanosis-table-trh-color)}.markdown-body table td,.markdown-body table th{padding:12px 8px;line-height:24px;border:1px solid var(--cyanosis-table-border-color)}.markdown-body table th{color:var(--cyanosis-table-tht-color);background-color:var(--cyanosis-table-th-color)}.markdown-body table td{min-width:120px}.markdown-body blockquote{color:var(--cyanosis-blockquote-color);border-left:4px solid var(--cyanosis-strong-color);background-color:var(--cyanosis-blockquote-bg-color);padding:1px 20px;margin:22px 0;transition:color .35s}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body b,.markdown-body blockquote&gt;b,.markdown-body blockquote&gt;strong,.markdown-body strong{color:var(--cyanosis-strong-color)}.markdown-body em,.markdown-body i{color:var(--cyanosis-em-color)}.markdown-body del{color:var(--cyanosis-del-color)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:4px}.markdown-body ol li{padding-left:6px}.markdown-body details&gt;summary{outline:none;color:var(--cyanosis-title-color);font-size:20px;font-weight:bolder;border-bottom:1px solid var(--cyanosis-border-color);cursor:pointer}.markdown-body details&gt;p{padding:10px 20px;margin:10px 0 0;color:#666;background-color:var(--cyanosis-blockquote-bg-color);border:2px dashed var(--cyanosis-strong-color)}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection{color:var(--cyanosis-slct-title-color);background-color:var(--cyanosis-slct-titlebg-color)}.markdown-body ol li::selection,.markdown-body p::selection,.markdown-body ul li::selection{color:var(--cyanosis-slct-text-color);background-color:var(--cyanosis-slct-bg-color)}.markdown-body a::selection,.markdown-body b::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:var(--cyanosis-slct-elbg-color)}.markdown-body del::selection{color:var(--cyanosis-slct-del-color);background-color:var(--cyanosis-slct-elbg-color)}.markdown-body table thead th::selection{background-color:transparent}.markdown-body table tbody td::selection{background-color:var(--cyanosis-slct-bg-color)}.markdown-body code::selection{background-color:var(--cyanosis-slct-codebg-color)}.markdown-body pre&gt;code::selection{background-color:var(--cyanosis-slct-prebg-color)}.markdown-body .contains-task-list{padding-left:14px;list-style:none}.markdown-body .contains-task-list input[type=checkbox]{position:relative}.markdown-body .contains-task-list input[type=checkbox]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;width:inherit;height:inherit;background:#f0f8ff;border:1px solid #add6ff;border-radius:2px;box-sizing:border-box;z-index:1}.markdown-body .contains-task-list input[type=checkbox]:checked:after{content:"âœ“";position:absolute;top:-12px;left:0;right:0;bottom:0;width:0;height:0;color:#f55;font-size:20px;font-weight:700;z-index:2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atom-one-dark">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#abb2bf;background:#282c34}.hljs-comment,.hljs-quote{color:#5c6370;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#c678dd}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e06c75}.hljs-literal{color:#56b6c2}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#98c379}.hljs-built_in,.hljs-class .hljs-title{color:#e6c07b}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#d19a66}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#61aeee}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}</style><blockquote>
<p>æœ€è¿‘åœ¨åšä¸€ä¸ª Text-to-SQL çš„ Agent é¡¹ç›® <strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fzaizaizhao%2Feasysql" target="_blank" title="https://github.com/zaizaizhao/easysql" ref="nofollow noopener noreferrer">EasySQL</a></strong>ï¼Œç”¨ LangGraph æ­çš„çŠ¶æ€æœºï¼Œè·‘é€šä¹‹åé‡åˆ°ä¸€ä¸ªå¤´ç–¼çš„é—®é¢˜ï¼šAgent å†…éƒ¨ LLM è°ƒäº†å‡ è½®ã€æ¯è½®èŠ±äº†å¤šå°‘ Tokenã€SQL ç”Ÿæˆåˆ°åº•åœ¨å“ªä¸€æ­¥æŒ‚çš„â€¦â€¦å…¨æ˜¯é»‘ç›’ï¼Œæ—¥å¿—ç¿»åˆ°çœ¼èŠ±ä¹Ÿæ‹¼ä¸å‡ºå®Œæ•´é“¾è·¯ã€‚åæ¥æ¥äº† Langfuseï¼Œç¬é—´æ¸…çˆ½äº†ã€‚è¿™ç¯‡æ–‡ç« å°±æŠŠæˆ‘è¸©è¿‡çš„å‘å’Œä¸¤ç§æ¥å…¥æ–¹å¼æ•´ç†ä¸€ä¸‹ï¼Œä»£ç éƒ½æ˜¯ä»é¡¹ç›®é‡Œç›´æ¥æ¬çš„ã€‚</p>
</blockquote>
<h4 data-id="heading-0">ä»€ä¹ˆæ˜¯langfuse</h4>
<p>Langfuse æ˜¯ä¸€ä¸ªå¼€æºçš„ LLM å¯è§‚æµ‹æ€§å¹³å°ï¼ˆLLM Observability Platformï¼‰ï¼Œä¸“é—¨ä¸ºLLM åº”ç”¨è®¾è®¡ã€‚å®ƒèƒ½è‡ªåŠ¨æ•è·ï¼š</p>
<ul>
<li>æ¯æ¬¡ LLM è°ƒç”¨çš„è¾“å…¥/è¾“å‡º/Token ç”¨é‡/å»¶è¿Ÿ/æˆæœ¬</li>
<li>Agent å·¥å…·è°ƒç”¨çš„å®Œæ•´é“¾è·¯è¿½è¸ªï¼ˆTraceï¼‰</li>
<li>å¤šæ­¥éª¤ Pipeline ä¸­æ¯ä¸ªèŠ‚ç‚¹çš„è€—æ—¶å’ŒçŠ¶æ€</li>
</ul>
<p>å¯ä»¥æŠŠ Langfuse ç†è§£ä¸ºï¼šç»™ä½ çš„ AI Agent è£…ä¸€ä¸ª"é»‘åŒ£å­è®°å½•ä»ª"ã€‚å®ƒä¸»è¦åšä»¥ä¸‹å››ä»¶äº‹</p>
<ol>
<li>Tracing:çœ‹åˆ°ä½ çš„ Agent æ¯ä¸€æ­¥åšäº†ä»€ä¹ˆã€èŠ±äº†å¤šä¹…ã€ç”¨äº†å¤šå°‘ Token</li>
<li>Evaluation:ç»™æ¯æ¬¡è°ƒç”¨æ‰“åˆ†â€”â€”è‡ªåŠ¨(LLM-as-Judge)ã€æ‰‹åŠ¨ã€æˆ–ä»£ç è¯„åˆ†</li>
<li>Prompt Management:ç‰ˆæœ¬æ§åˆ¶ promptï¼ŒA/B æµ‹è¯•ä¸åŒ prompt æ•ˆæœ</li>
<li>Metrics &amp; Dashboards:èšåˆçœ‹æˆæœ¬ã€å»¶è¿Ÿã€è´¨é‡è¶‹åŠ¿</li>
</ol>
<p>æ ¸å¿ƒæ•°æ®æ¨¡å‹ï¼ˆè¿™æ˜¯ç†è§£ Langfuse ä¸€åˆ‡çš„åŸºç¡€ï¼‰ï¼š</p>
<h4 data-id="heading-1">langfuseæ ¸å¿ƒæ•°æ®æ¨¡å‹</h4>
<p>Langfuse çš„å¯è§‚æµ‹æ€§æ•°æ®æ¨¡å‹ï¼š</p>






























<table><thead><tr><th>SESSION</th><th>ä¸€ä¸ªç”¨æˆ·çš„å¤šè½®å¯¹è¯ä¼šè¯ï¼ˆå¯é€‰ï¼‰</th><th>ç”¨æˆ·æ‰“å¼€èŠå¤©çª—å£åˆ°å…³é—­çš„æ•´ä¸ªè¿‡ç¨‹</th></tr></thead><tbody><tr><td>TRACE</td><td>ä¸€æ¬¡å®Œæ•´çš„ç«¯åˆ°ç«¯è¯·æ±‚</td><td>ç”¨æˆ·é—®"æŸ¥è¯¢æœ¬æœˆè®¢å•"ï¼Œä»æ¥æ”¶åˆ°è¿”å›ç»“æœ</td></tr><tr><td>SPAN</td><td>ä¸€ä¸ªæœ‰å¼€å§‹/ç»“æŸæ—¶é—´çš„å·¥ä½œå•å…ƒ</td><td>Schema æ£€ç´¢ã€Neo4j æŸ¥è¯¢ã€Prompt æ„å»º</td></tr><tr><td>GENERATION</td><td>ä¸€æ¬¡ LLM API è°ƒç”¨ï¼ˆæœ€æ ¸å¿ƒçš„è§‚æµ‹ç±»å‹ï¼‰</td><td>è°ƒç”¨ genimi-3-flash ç”Ÿæˆ SQL</td></tr><tr><td>EVENT</td><td>ä¸€ä¸ªæ—¶é—´ç‚¹äº‹ä»¶ï¼ˆæ— æŒç»­æ—¶é—´ï¼‰</td><td>æ—¥å¿—è®°å½•ã€å¼‚å¸¸æ•è·</td></tr></tbody></table>
<p>GENERATION è‡ªåŠ¨æ•è·çš„ä¿¡æ¯ï¼š</p>
<ul>
<li>
<p>è¾“å…¥/è¾“å‡º Token æ•°</p>
</li>
<li>
<p>æˆæœ¬ï¼ˆ$ï¼‰</p>
</li>
<li>
<p>å»¶è¿Ÿï¼ˆmsï¼‰</p>
</li>
<li>
<p>ä½¿ç”¨çš„æ¨¡å‹åç§°</p>
</li>
<li>
<p>å®Œæ•´çš„ prompt å’Œ completion</p>
</li>
</ul>
<p>Observations å¯ä»¥æ— é™åµŒå¥—â€”â€”ä¸€ä¸ª SPAN å†…å¯ä»¥åŒ…å«å­ SPANã€GENERATIONã€EVENT ç­‰ï¼Œå½¢æˆæ ‘çŠ¶ç»“æ„ã€‚SCOREï¼ˆè¯„åˆ†ï¼‰ å¯ä»¥é™„åŠ åœ¨ TRACE æˆ– OBSERVATION ä¸Šï¼Œæ”¯æŒ NUMERICï¼ˆæ•°å€¼ï¼‰ã€BOOLEANï¼ˆå¸ƒå°”ï¼‰ã€CATEGORICALï¼ˆåˆ†ç±»ï¼‰ä¸‰ç§ç±»å‹ï¼Œç”¨äºè¯„ä¼°è´¨é‡ã€‚</p>
<h3 data-id="heading-2">ä¸€. è‡ªåŠ¨callbackå®ç°Langfuseé›†æˆ</h3>
<h5 data-id="heading-3">åŸç†</h5>
<p>åˆ©ç”¨ LangChain æ¡†æ¶å†…ç½®çš„ callback æœºåˆ¶ï¼ŒLangfuse æä¾›ä¸€ä¸ª CallbackHandlerï¼Œä¼ å…¥ invoke() çš„ config ä¸­ã€‚LangChain/LangGraphæ‰§è¡Œè¿‡ç¨‹ä¸­çš„æ¯ä¸ªäº‹ä»¶ï¼ˆLLM è°ƒç”¨ã€å·¥å…·è°ƒç”¨ã€é“¾æ‰§è¡Œç­‰ï¼‰éƒ½ä¼šè‡ªåŠ¨è§¦å‘ callbackï¼ŒLangfuse æ®æ­¤æ„å»ºå®Œæ•´çš„ Trace æ ‘ã€‚</p>
<h4 data-id="heading-4">é¡¹ç›®ä½¿ç”¨</h4>
<h5 data-id="heading-5">é…ç½®å±‚</h5>
<p>å®šä¹‰é…ç½®ç±»</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">LangfuseConfig</span>(<span class="hljs-title class_ inherited__">BaseSettings</span>):
    <span class="hljs-string">"""
    Configuration for LangFuse observability.

    LangFuse provides tracing and monitoring for LLM applications.
    All settings can be overridden via LANGFUSE_* environment variables.
    """</span>

    model_config = SettingsConfigDict(env_file=<span class="hljs-string">".env"</span>, env_file_encoding=<span class="hljs-string">"utf-8"</span>, extra=<span class="hljs-string">"ignore"</span>)

    enabled: <span class="hljs-built_in">bool</span> = Field(
        default=<span class="hljs-literal">False</span>, alias=<span class="hljs-string">"langfuse_enabled"</span>, description=<span class="hljs-string">"Enable LangFuse tracing"</span>
    )
    public_key: <span class="hljs-built_in">str</span> | <span class="hljs-literal">None</span> = Field(
        default=<span class="hljs-literal">None</span>, alias=<span class="hljs-string">"langfuse_public_key"</span>, description=<span class="hljs-string">"LangFuse public key"</span>
    )
    secret_key: <span class="hljs-built_in">str</span> | <span class="hljs-literal">None</span> = Field(
        default=<span class="hljs-literal">None</span>, alias=<span class="hljs-string">"langfuse_secret_key"</span>, description=<span class="hljs-string">"LangFuse secret key"</span>
    )
    host: <span class="hljs-built_in">str</span> = Field(
        default=<span class="hljs-string">"https://cloud.langfuse.com"</span>,
        alias=<span class="hljs-string">"langfuse_host"</span>,
        description=<span class="hljs-string">"LangFuse host URL (cloud or self-hosted)"</span>,
    )

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">is_configured</span>(<span class="hljs-params">self</span>) -&gt; <span class="hljs-built_in">bool</span>:
        <span class="hljs-string">"""Check if LangFuse is properly configured with required credentials."""</span>
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">bool</span>(self.enabled <span class="hljs-keyword">and</span> self.public_key <span class="hljs-keyword">and</span> self.secret_key)
</code></pre>
<ul>
<li>enabledï¼šæ€»å¼€å…³ï¼Œè¯»å–ç¯å¢ƒå˜é‡ LANGFUSE_ENABLEDï¼Œé»˜è®¤ false</li>
<li>public_key / secret_keyï¼šLangfuse é¡¹ç›®çš„ API å¯†é’¥å¯¹ï¼Œåœ¨ Langfuse ä»ªè¡¨ç›˜çš„ Settings â†’ API Keys ä¸­ç”Ÿæˆ</li>
<li>hostï¼šLangfuse æœåŠ¡åœ°å€ã€‚å¦‚æœç”¨ Langfuse Cloud å°±æ˜¯ <a href="https://link.juejin.cn?target=https%3A%2F%2Fcloud.langfuse.com%25EF%25BC%259B%25E5%25A6%2582%25E6%259E%259C%25E8%2587%25AA%25E5%25BB%25BA%25E5%25B0%25B1%25E5%25A1%25AB%25E4%25BD%25A0%25E8%2587%25AA%25E5%25B7%25B1%25E7%259A%2584%25E5%259C%25B0%25E5%259D%2580%25E5%25A6%2582" target="_blank" title="https://cloud.langfuse.com%EF%BC%9B%E5%A6%82%E6%9E%9C%E8%87%AA%E5%BB%BA%E5%B0%B1%E5%A1%AB%E4%BD%A0%E8%87%AA%E5%B7%B1%E7%9A%84%E5%9C%B0%E5%9D%80%E5%A6%82" ref="nofollow noopener noreferrer">cloud.langfuse.comå¦‚æœè‡ªå»ºå°±å¡«ä½ è‡ªå·±çš„åœ°å€å¦‚</a> <a href="https://link.juejin.cn?target=http%3A%2F%2Flocalhost%3A3000" target="_blank" title="http://localhost:3000" ref="nofollow noopener noreferrer">http://localhost:3000</a></li>
<li>is_configured()ï¼šä¸‰ä¸ªæ¡ä»¶å…¨æ»¡è¶³æ‰ç®—é…ç½®å®Œæˆâ€”â€”enabled=true ä¸”ä¸¤ä¸ª key éƒ½æœ‰å€¼</li>
</ul>
<p>ä»£ç ä¸­é€šè¿‡ get_settings().langfuse.is_configured() æ¥åˆ¤æ–­æ˜¯å¦å¯ç”¨ã€‚</p>
<h5 data-id="heading-6">callbackå·¥å‚å‡½æ•°</h5>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_langfuse_callbacks</span>() -&gt; <span class="hljs-built_in">list</span>[<span class="hljs-type">Any</span>]:
    <span class="hljs-string">"""Get LangFuse callback handlers if configured."""</span>
    settings = get_settings()
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> settings.langfuse.is_configured():
        <span class="hljs-keyword">return</span> []                          <span class="hljs-comment"># â† æœªé…ç½®åˆ™è¿”å›ç©ºåˆ—è¡¨ï¼Œä¸å½±å“æ­£å¸¸è¿è¡Œ</span>
    <span class="hljs-keyword">try</span>:
        <span class="hljs-keyword">import</span> os
        <span class="hljs-keyword">from</span> langfuse.langchain <span class="hljs-keyword">import</span> CallbackHandler   <span class="hljs-comment"># â† å…³é”®ï¼šLangChain å›è°ƒå¤„ç†å™¨</span>
        os.environ.setdefault(<span class="hljs-string">"LANGFUSE_PUBLIC_KEY"</span>, settings.langfuse.public_key <span class="hljs-keyword">or</span> <span class="hljs-string">""</span>)
        os.environ.setdefault(<span class="hljs-string">"LANGFUSE_SECRET_KEY"</span>, settings.langfuse.secret_key <span class="hljs-keyword">or</span> <span class="hljs-string">""</span>)
        os.environ.setdefault(<span class="hljs-string">"LANGFUSE_HOST"</span>, settings.langfuse.host)
        <span class="hljs-keyword">return</span> [CallbackHandler()]         <span class="hljs-comment"># â† è¿”å›ä¸€ä¸ª CallbackHandler å®ä¾‹</span>
    <span class="hljs-keyword">except</span> ImportError:
        logger.warning(<span class="hljs-string">"langfuse package not installed, tracing disabled"</span>)
        <span class="hljs-keyword">return</span> []
</code></pre>
<p>è¿™é‡Œå‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ</p>
<ol>
<li>å…ˆæ£€æŸ¥é…ç½®æ˜¯å¦å®Œæ•´ï¼Œä¸å®Œæ•´å°±è¿”å›ç©º []</li>
<li>å°†é…ç½®ä¸­çš„å¯†é’¥å†™å…¥ç¯å¢ƒå˜é‡ï¼ˆos.environ.setdefaultï¼‰ã€‚è¿™æ˜¯å› ä¸º CallbackHandler() åœ¨å®ä¾‹åŒ–æ—¶ä¼šè‡ªåŠ¨ä»ç¯å¢ƒå˜é‡è¯»å– LANGFUSE_PUBLIC_KEYã€LANGFUSE_SECRET_KEYã€LANGFUSE_HOST</li>
<li>åˆ›å»º CallbackHandler() å®ä¾‹å¹¶è¿”å›ã€‚è¿™ä¸ª Handler å®ç°äº† LangChain çš„ BaseCallbackHandler æ¥å£ï¼Œä¼šè‡ªåŠ¨æ‹¦æˆªæ‰€æœ‰ LangChain/LangGraph çš„äº‹ä»¶ï¼ˆLLM è°ƒç”¨å¼€å§‹/ç»“æŸã€å·¥å…·è°ƒç”¨ã€é“¾æ‰§è¡Œç­‰ï¼‰</li>
</ol>
<p>CallbackHandler èƒ½è‡ªåŠ¨æ•è·ä»€ä¹ˆï¼Ÿ</p>
<ul>
<li>æ¯ä¸ª LLM è°ƒç”¨çš„ promptã€completionã€model nameã€token æ•°ã€å»¶è¿Ÿ</li>
<li>æ¯ä¸ª tool è°ƒç”¨çš„è¾“å…¥è¾“å‡º</li>
<li>LangGraph ä¸­æ¯ä¸ª node çš„æ‰§è¡Œæµç¨‹</li>
<li>é”™è¯¯å’Œå¼‚å¸¸</li>
</ul>
<h5 data-id="heading-7">æ³¨å…¥åˆ° LangGraph æ‰§è¡Œ</h5>
<p>é¦–å…ˆéœ€è¦åœ¨å°†ä¸Šé¢çš„callbackså†™å…¥åˆ°agentè°ƒç”¨çš„ä¼ å‚RunnableConfigå¯¹è±¡ä¸­ã€‚ä¹Ÿå°±æ˜¯RunnableConfigæºç å®šä¹‰ä¸­çš„callbacksä¸­</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">RunnableConfig</span>(TypedDict, total=<span class="hljs-literal">False</span>):
    <span class="hljs-string">"""Configuration for a `Runnable`.

    See the [reference docs](https://reference.langchain.com/python/langchain_core/runnables/#langchain_core.runnables.RunnableConfig)
    for more details.
    """</span>

    tags: <span class="hljs-built_in">list</span>[<span class="hljs-built_in">str</span>]
    <span class="hljs-string">"""Tags for this call and any sub-calls (e.g. a Chain calling an LLM).

    You can use these to filter calls.
    """</span>

    metadata: <span class="hljs-built_in">dict</span>[<span class="hljs-built_in">str</span>, <span class="hljs-type">Any</span>]
    <span class="hljs-string">"""Metadata for this call and any sub-calls (e.g. a Chain calling an LLM).

    Keys should be strings, values should be JSON-serializable.
    """</span>

    callbacks: Callbacks
    <span class="hljs-string">"""Callbacks for this call and any sub-calls (e.g. a Chain calling an LLM).

    Tags are passed to all callbacks, metadata is passed to handle*Start callbacks.
    """</span>

    run_name: <span class="hljs-built_in">str</span>
    <span class="hljs-string">"""Name for the tracer run for this call.

    Defaults to the name of the class."""</span>
</code></pre>
<p>é¡¹ç›®ä»£ç æŠ½å–äº†ä¸€å±‚ä¸“é—¨åšRunnableConfigé…ç½®çš„æ„å»º</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">QueryService</span>:

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, repository: SessionRepository</span>) -&gt; <span class="hljs-literal">None</span>:
        self._graph: <span class="hljs-type">Any</span> = <span class="hljs-literal">None</span>
        self._repo = repository
        self._callbacks: <span class="hljs-built_in">list</span>[<span class="hljs-type">Any</span>] | <span class="hljs-literal">None</span> = <span class="hljs-literal">None</span>

<span class="hljs-meta">    @property</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">callbacks</span>(<span class="hljs-params">self</span>) -&gt; <span class="hljs-built_in">list</span>[<span class="hljs-type">Any</span>]:
        <span class="hljs-keyword">if</span> self._callbacks <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>:
            self._callbacks = get_langfuse_callbacks()   <span class="hljs-comment"># â† æ‡’åŠ è½½ï¼Œåªåˆå§‹åŒ–ä¸€æ¬¡</span>
        <span class="hljs-keyword">return</span> self._callbacks

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">_make_config</span>(<span class="hljs-params">self, session_id: <span class="hljs-built_in">str</span>, thread_id: <span class="hljs-built_in">str</span> | <span class="hljs-literal">None</span> = <span class="hljs-literal">None</span></span>) -&gt; RunnableConfig:
        effective_thread_id = thread_id <span class="hljs-keyword">or</span> session_id
        config: RunnableConfig = {<span class="hljs-string">"configurable"</span>: {<span class="hljs-string">"thread_id"</span>: effective_thread_id}}
        <span class="hljs-keyword">if</span> self.callbacks:
            config[<span class="hljs-string">"callbacks"</span>] = self.callbacks
            logger.debug(<span class="hljs-string">f"LangFuse callbacks attached: <span class="hljs-subst">{<span class="hljs-built_in">len</span>(self.callbacks)}</span> handler(s)"</span>)
        <span class="hljs-keyword">return</span> config
</code></pre>
<p>agentè°ƒç”¨çš„æ—¶å€™ä¼ å…¥</p>
<pre><code class="hljs language-python" lang="python">            <span class="hljs-keyword">async</span> <span class="hljs-keyword">for</span> chunk <span class="hljs-keyword">in</span> self.graph.astream(
                input_state,
                self._make_config(session.session_id, effective_thread_id),
                stream_mode=[<span class="hljs-string">"updates"</span>, <span class="hljs-string">"custom"</span>],
            ):
</code></pre>
<p>graph.astreamä¼šå‘ç”Ÿå¦‚ä¸‹æµç¨‹</p>
<ol>
<li>LangGraph å†…éƒ¨è¯»å– config["callbacks"]</li>
<li>æ¯ä¸ª node/LLM è°ƒç”¨éƒ½è§¦å‘ CallbackHandler çš„å›è°ƒæ–¹æ³•</li>
<li>CallbackHandler å°†äº‹ä»¶å‘é€åˆ° Langfuse æœåŠ¡</li>
</ol>
<h5 data-id="heading-8">ç¼ºç‚¹ï¼š</h5>
<ul>
<li>åªèƒ½è¿½è¸ª LangChain/LangGraph å†…éƒ¨ â€”â€” æ¡†æ¶å¤–çš„è‡ªå®šä¹‰ Python ä»£ç ï¼ˆå¦‚ Milvus æŸ¥è¯¢ã€Neo4j æŸ¥è¯¢ï¼‰ä¸å¯è§</li>
<li>Trace ç»“æ„ç”±æ¡†æ¶å†³å®š â€”â€” æ§åˆ¶åŠ›æœ‰é™ï¼Œå‘½åå’Œå±‚çº§ç»“æ„å–å†³äº LangChain çš„å›è°ƒäº‹ä»¶</li>
</ul>
<h3 data-id="heading-9">äºŒ. æ‰‹åŠ¨Spanè¿½è¸ª</h3>
<h4 data-id="heading-10">åŸç†ï¼š</h4>
<p>ç›´æ¥ä½¿ç”¨ Langfuse SDKï¼Œé€šè¿‡ <code>@observe()</code> è£…é¥°å™¨æˆ– <code>start_as_current_observation() </code>ä¸Šä¸‹æ–‡ç®¡ç†å™¨ï¼Œæ‰‹åŠ¨æ§åˆ¶ Trace å’Œ Spançš„åˆ›å»ºã€‚è¢«è£…é¥°çš„å‡½æ•°è‡ªåŠ¨å½¢æˆçˆ¶å­åµŒå¥—å…³ç³»ã€‚</p>
<h4 data-id="heading-11">æˆ‘è¿™é‡Œä¸ºä»€ä¹ˆéœ€è¦æ‰‹åŠ¨Span</h4>
<p>Agent å†…éƒ¨çš„å¤šè½®è¿­ä»£ä¸­æ¯ä¸€æ­¥ï¼ˆLLM è°ƒç”¨ã€å·¥å…·è°ƒç”¨ï¼‰å·²ç»è¢« CallbackHandler è‡ªåŠ¨è¿½è¸ªã€‚æ‰‹åŠ¨ Spançš„ç›®çš„ä¸æ˜¯è¿½è¸ªè¿™äº›æ­¥éª¤æœ¬èº«ï¼Œè€Œæ˜¯åœ¨è¿™äº›ç»†ç²’åº¦è¿½è¸ªä¹‹ä¸Šæ·»åŠ ä¸€ä¸ªä¸šåŠ¡è¯­ä¹‰çš„æ±‡æ€»èŠ‚ç‚¹â€”â€”ç›´æ¥è®°å½•æœ€ç»ˆ SQLã€æ˜¯å¦é€šè¿‡éªŒè¯ã€æ€»å…±è¿­ä»£äº†å‡ è½®ï¼Œè¿™æ ·Langfuse UI ä¸­ä¸éœ€è¦é€æ¡ç¿»çœ‹å°±èƒ½å¿«é€Ÿäº†è§£è¿™æ¬¡ Agent æ‰§è¡Œçš„ç»“æœã€‚</p>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘å¸Œæœ›æä¾›ä¸€ä¸ªç»“æœæ±‡æ€»å±‚ï¼Œè€Œéè¿½è¸ªæµç¨‹æœ¬èº«ï¼ŒæˆåŠŸæ—¶å±•ç¤ºå¦‚ä¸‹</p>
<pre><code class="hljs language-python" lang="python">span.update(output={
      <span class="hljs-string">"sql"</span>: last_sql,
      <span class="hljs-string">"success"</span>: validation_passed,
      <span class="hljs-string">"iterations"</span>: iteration,
  })
</code></pre>
<p>å¤±è´¥æ—¶å±•ç¤ºå¦‚ä¸‹</p>
<pre><code class="hljs language-python" lang="python">span.update(output={<span class="hljs-string">"error"</span>: <span class="hljs-built_in">str</span>(e)}, level=<span class="hljs-string">"ERROR"</span>)
</code></pre>
<p>å› æ­¤æ‰‹åŠ¨åˆ›å»º span å¯ä»¥ï¼š</p>
<ul>
<li>è‡ªå®šä¹‰è®°å½•åˆå§‹è¾“å…¥ï¼ˆç”¨æˆ·æŸ¥è¯¢ã€æ•°æ®åº“åï¼‰</li>
<li>åœ¨ Langfuse UI ä¸­æ¸…æ™°åœ°çœ‹åˆ°"SQL Agent æ‰§è¡Œ"è¿™ä¸ªæ•´ä½“ä»¥åŠè‡ªå®šä¹‰çš„ä¿¡æ¯ï¼Œè€Œä¸ä»…ä»…æ˜¯é›¶æ•£çš„ LLM è°ƒç”¨</li>
</ul>
<h4 data-id="heading-12">é¡¹ç›®ä½¿ç”¨</h4>
<ol>
<li>è·å–langfuseå®¢æˆ·ç«¯</li>
</ol>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">_get_langfuse_client</span>():
    <span class="hljs-string">"""è·å– Langfuse å…¨å±€å®¢æˆ·ç«¯ï¼ˆå•ä¾‹æ¨¡å¼ï¼‰"""</span>
    settings = get_settings()
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> settings.langfuse.is_configured():
        <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>
    <span class="hljs-keyword">try</span>:
        <span class="hljs-keyword">from</span> langfuse <span class="hljs-keyword">import</span> get_client       <span class="hljs-comment"># â† v3 SDK çš„å•ä¾‹è·å–æ–¹æ³•</span>
        <span class="hljs-keyword">return</span> get_client()
    <span class="hljs-keyword">except</span> ImportError:
        logger.debug(<span class="hljs-string">"Langfuse not installed, skipping tracing"</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>
    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
        logger.debug(<span class="hljs-string">f"Failed to get Langfuse client: <span class="hljs-subst">{e}</span>"</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>
</code></pre>
<ol start="2">
<li>åˆ›å»ºSpanç±»å‹çš„è§‚å¯Ÿå¯¹è±¡</li>
</ol>
<pre><code class="hljs language-python" lang="python"><span class="hljs-meta">@contextmanager</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">_langfuse_span</span>(<span class="hljs-params">name: <span class="hljs-built_in">str</span>, **kwargs</span>):
    <span class="hljs-string">"""åˆ›å»ºä¸€ä¸ª Langfuse Span çš„ä¸Šä¸‹æ–‡ç®¡ç†å™¨"""</span>
    langfuse = _get_langfuse_client()
    <span class="hljs-keyword">if</span> langfuse <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>:
        <span class="hljs-keyword">yield</span> <span class="hljs-literal">None</span>                             <span class="hljs-comment"># â† æœªé…ç½®æ—¶ä¼˜é›…é€€åŒ–ï¼Œä¸å½±å“ä¸šåŠ¡</span>
        <span class="hljs-keyword">return</span>
    <span class="hljs-keyword">try</span>:
        <span class="hljs-keyword">with</span> langfuse.start_as_current_observation(
            as_type=<span class="hljs-string">"span"</span>,                    <span class="hljs-comment"># â† åˆ›å»º SPAN ç±»å‹çš„è§‚å¯Ÿ</span>
            name=name,                         <span class="hljs-comment"># â† Span åç§°ï¼Œå¦‚ "sql-agent-execution"</span>
            **kwargs,                          <span class="hljs-comment"># â† é¢å¤–å‚æ•°å¦‚ input</span>
        ) <span class="hljs-keyword">as</span> span:
            <span class="hljs-keyword">yield</span> span
    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
        logger.debug(<span class="hljs-string">f"Langfuse span creation failed: <span class="hljs-subst">{e}</span>"</span>)
        <span class="hljs-keyword">yield</span> <span class="hljs-literal">None</span>
</code></pre>
<ol start="3">
<li>ä½¿ç”¨</li>
</ol>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">__call__</span>(<span class="hljs-params">self, state, config, *, writer=<span class="hljs-literal">None</span></span>):
    <span class="hljs-comment"># ...</span>
    <span class="hljs-keyword">with</span> _langfuse_span(
        <span class="hljs-string">"sql-agent-execution"</span>,                              <span class="hljs-comment"># â† Span åç§°</span>
        <span class="hljs-built_in">input</span>={<span class="hljs-string">"query"</span>: raw_query, <span class="hljs-string">"db_name"</span>: db_name},     <span class="hljs-comment"># â† è®°å½•è¾“å…¥</span>
    ) <span class="hljs-keyword">as</span> span:
        <span class="hljs-comment"># ... SQL Agent çš„æ•´ä¸ªè¿­ä»£å¾ªç¯åœ¨è¿™ä¸ª span å†… ...</span>
        <span class="hljs-comment"># æ¯æ¬¡è¿­ä»£ï¼šLLM è°ƒç”¨ â†’ å·¥å…·è°ƒç”¨ â†’ éªŒè¯ â†’ å¯èƒ½ä¿®å¤</span>
        <span class="hljs-comment"># æˆåŠŸæ—¶æ›´æ–° Span è¾“å‡ºï¼š</span>
        <span class="hljs-keyword">if</span> span:
            span.update(
                output={
                    <span class="hljs-string">"sql"</span>: last_sql,               <span class="hljs-comment"># æœ€ç»ˆç”Ÿæˆçš„ SQL</span>
                    <span class="hljs-string">"success"</span>: validation_passed,   <span class="hljs-comment"># éªŒè¯æ˜¯å¦é€šè¿‡</span>
                    <span class="hljs-string">"iterations"</span>: iteration,        <span class="hljs-comment"># è¿­ä»£äº†å‡ è½®</span>
                }
            )
        <span class="hljs-comment"># å¼‚å¸¸æ—¶æ ‡è®°ä¸ºé”™è¯¯ï¼š</span>
        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
            <span class="hljs-keyword">if</span> span:
                span.update(output={<span class="hljs-string">"error"</span>: <span class="hljs-built_in">str</span>(e)}, level=<span class="hljs-string">"ERROR"</span>)
</code></pre>
<p>è¿™æ®µä»£ç åšäº†ä»€ä¹ˆï¼Ÿ<br/>
å®ƒä¸ºæ•´ä¸ª SQL Agent çš„æ‰§è¡Œåˆ›å»ºäº†ä¸€ä¸ªå‘½åä¸º "sql-agent-execution" çš„ SPANã€‚è¿™ä¸ª Spanï¼š</p>
<ul>
<li>è¾“å…¥ï¼šè®°å½•ç”¨æˆ·çš„åŸå§‹é—®é¢˜å’Œç›®æ ‡æ•°æ®åº“å</li>
<li>è¾“å‡ºï¼šè®°å½•æœ€ç»ˆ SQLã€æ˜¯å¦éªŒè¯é€šè¿‡ã€æ€»å…±è¿­ä»£äº†å¤šå°‘è½®</li>
<li>é”™è¯¯ï¼šå¦‚æœå‡ºå¼‚å¸¸ï¼Œæ ‡è®°ä¸º ERROR çº§åˆ«</li>
</ul>
<p>æ‰‹åŠ¨ Span çš„ä»·å€¼ä¸åœ¨äºè¿½è¸ªé“¾è·¯æœ¬èº«ï¼ˆCallbackHandler å·²ç»è¦†ç›–äº†ï¼‰ï¼Œè€Œåœ¨äºæä¾›ä¸€ä¸ªæ±‡æ€»è§†å›¾ï¼šåœ¨ Langfuse UI ä¸­ç‚¹å¼€ä¸€ä¸ª Traceï¼Œç›´æ¥åœ¨sql-agent-execution è¿™ä¸ª Span çš„ output é‡Œå°±èƒ½çœ‹åˆ° {sql: "...", success: true, iterations: 2}ï¼Œä¸éœ€è¦é€ä¸ªç¿»çœ‹å­èŠ‚ç‚¹å»æ‹¼å‡‘ç»“è®ºã€‚</p>
<h4 data-id="heading-13">langfuseç•Œé¢</h4>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/15646f4c4eb64c78af4a76e5570848b1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgemFpemFpemhhbw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771399753&amp;x-signature=%2BuYYTU12LsZG0goVsHVHUcYUy3A%3D" alt="d6daef7046e4b00482ec778023509c8a.png" loading="lazy"/></p>
<ol>
<li>åœ¨ sql_agent èŠ‚ç‚¹ä¸‹å¤šäº†ä¸€ä¸ªå¹¶åˆ—çš„ Spanï¼Œæºå¸¦äº† input={query, db_name} å’Œ output={sql, success, iterations} çš„æ±‡æ€»ä¿¡æ¯</li>
<li>ä½†å®ƒæ²¡æœ‰åŒ…è£¹ä½ LLM è°ƒç”¨å’Œ Tool è°ƒç”¨ï¼Œæ‰€ä»¥ä¸æ„æˆå±‚çº§å…³ç³»</li>
<li>å®ƒåªæ˜¯ä¸€ä¸ªç‹¬ç«‹çš„"ä¿¡æ¯æ ‡æ³¨èŠ‚ç‚¹"ï¼ŒæŒ‚åœ¨ sql_agent ä¸‹é¢</li>
</ol>
<p>å¦‚æœæƒ³è®©æ‰‹åŠ¨ Span çœŸæ­£æˆä¸º LLM è°ƒç”¨å’Œ Tool è°ƒç”¨ï¼ˆå¦‚ä»¥ä¸Švalidate_sqlï¼‰çš„çˆ¶çº§ï¼Œéœ€è¦è®© CallbackHandler æ„ŸçŸ¥åˆ°æ‰‹åŠ¨ Span çš„ä¸Šä¸‹æ–‡ã€‚Langfuseå®˜æ–¹æ–‡æ¡£ä¸­ç»™å‡ºçš„åšæ³•æ˜¯ç»“åˆ propagate_attributes ä½¿ç”¨ï¼š</p>
<pre><code class="hljs language-python" lang="python">  <span class="hljs-keyword">from</span> langfuse <span class="hljs-keyword">import</span> get_client, propagate_attributes
  <span class="hljs-keyword">from</span> langfuse.langchain <span class="hljs-keyword">import</span> CallbackHandler
  langfuse = get_client()
  <span class="hljs-keyword">with</span> langfuse.start_as_current_observation(as_type=<span class="hljs-string">"span"</span>, name=<span class="hljs-string">"sql-agent-execution"</span>):
      <span class="hljs-keyword">with</span> propagate_attributes():
          handler = CallbackHandler()  <span class="hljs-comment"># åœ¨è¿™é‡Œåˆ›å»º handlerï¼Œå®ƒä¼šç»§æ‰¿å½“å‰ span ä½œä¸º parent</span>
          <span class="hljs-comment"># ç„¶åæŠŠ handler ä¼ å…¥ LLM è°ƒç”¨...</span>
</code></pre>
<p>ä½†æˆ‘çš„é¡¹ç›®ä¸­ CallbackHandler() æ˜¯åœ¨ get_langfuse_callbacks() ä¸­æå‰åˆ›å»ºå¥½çš„ï¼Œç„¶åé€šè¿‡ config["callbacks"] ä¼ å…¥ LangGraphï¼Œå¹¶éåœ¨æ‰‹åŠ¨Span ä¸Šä¸‹æ–‡å†…åˆ›å»ºï¼Œæ‰€ä»¥ä¸¤è€…æ— æ³•å»ºç«‹çˆ¶å­å…³ç³»ï¼Œè€Œæ˜¯è‡ªå®šä¹‰çš„Spanè‡ªåŠ¨ä½¿ç”¨äº†æ ¹CallbackHandler()åˆ›å»ºçš„ä¸Šä¸‹æ–‡ ï¼Œè¿™é‡Œå°±æ¶‰åŠåˆ°OpenTelemetry (OTEL)äº†ï¼ŒOpenTelemetry æ˜¯ä¸€ä¸ªå‚å•†ä¸­ç«‹çš„å¼€æºå¯è§‚æµ‹æ€§æ¡†æ¶ï¼Œå®ƒè§£å†³é—®é¢˜å°±æ˜¯åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼ŒæŠŠæ•£è½åœ¨å„å¤„çš„ç›‘æ§æ•°æ®å…³è”èµ·æ¥ï¼Œè¿˜åŸå‡ºå®Œæ•´çš„è¯·æ±‚è·¯å¾„ã€‚</p>
<h6 data-id="heading-14">å®Œæ•´å®˜æ–¹ç¤ºä¾‹</h6>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> langfuse <span class="hljs-keyword">import</span> observe, get_client, propagate_attributes
<span class="hljs-keyword">from</span> langfuse.langchain <span class="hljs-keyword">import</span> CallbackHandler
<span class="hljs-keyword">from</span> langchain_openai <span class="hljs-keyword">import</span> ChatOpenAI
<span class="hljs-keyword">from</span> langchain_core.prompts <span class="hljs-keyword">import</span> ChatPromptTemplate

<span class="hljs-meta">@observe() </span><span class="hljs-comment"># Automatically log function as a trace to Langfuse</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">process_user_query</span>(<span class="hljs-params">user_input: <span class="hljs-built_in">str</span></span>):
    langfuse = get_client()

    <span class="hljs-comment"># Propagate trace attributes to all child observations</span>
    <span class="hljs-keyword">with</span> propagate_attributes(
        session_id=<span class="hljs-string">"session-1234"</span>,
        user_id=<span class="hljs-string">"user-5678"</span>,
    ):

      <span class="hljs-comment"># Initialize the Langfuse handler - automatically inherits the current trace context</span>
      langfuse_handler = CallbackHandler()

      <span class="hljs-comment"># Your Langchain code - will be nested under the @observe trace</span>
      llm = ChatOpenAI(model_name=<span class="hljs-string">"gpt-4o"</span>)
      prompt = ChatPromptTemplate.from_template(<span class="hljs-string">"Respond to: {input}"</span>)
      chain = prompt | llm

      result = chain.invoke({<span class="hljs-string">"input"</span>: user_input}, config={<span class="hljs-string">"callbacks"</span>: [langfuse_handler]})

      <span class="hljs-comment"># Update trace with input and final output</span>
      langfuse.update_current_trace(
        name=<span class="hljs-string">"user-query-processing"</span>,
        <span class="hljs-built_in">input</span>={<span class="hljs-string">"query"</span>: user_input},
        output={<span class="hljs-string">"response"</span>: result.content},
        )

    <span class="hljs-keyword">return</span> result.content

<span class="hljs-comment"># Usage</span>
answer = process_user_query(<span class="hljs-string">"What is the capital of France?"</span>)
</code></pre>
<h4 data-id="heading-15">æ€»ç»“</h4>
<p>æœ¬æ–‡ä»‹ç»äº†åœ¨ Agent å¼€å‘ä¸­é›†æˆ Langfuse å¯è§‚æµ‹æ€§çš„ä¸¤ç§æ–¹å¼ï¼š</p>























<table><thead><tr><th>æ–¹å¼</th><th>é€‚ç”¨åœºæ™¯</th><th>ä¼˜ç‚¹</th><th>å±€é™</th></tr></thead><tbody><tr><td><strong>è‡ªåŠ¨ Callback</strong></td><td>å¿«é€Ÿæ¥å…¥ï¼Œè¿½è¸ª LangChain/LangGraph å†…éƒ¨é“¾è·¯</td><td>é›¶ä¾µå…¥ã€å¼€ç®±å³ç”¨</td><td>åªèƒ½è¿½è¸ªæ¡†æ¶å†…éƒ¨ï¼Œè‡ªå®šä¹‰é€»è¾‘ä¸å¯è§</td></tr><tr><td><strong>æ‰‹åŠ¨ Span</strong></td><td>éœ€è¦ä¸šåŠ¡è¯­ä¹‰æ±‡æ€»ã€è¿½è¸ªæ¡†æ¶å¤–é€»è¾‘</td><td>å®Œå…¨å¯æ§ï¼Œå¯è‡ªå®šä¹‰è¾“å…¥è¾“å‡º</td><td>éœ€è¦æ‰‹åŠ¨ç®¡ç†ä¸Šä¸‹æ–‡</td></tr></tbody></table>
<p>å®é™…é¡¹ç›®ä¸­ï¼Œ<strong>ä¸¤è€…ç»“åˆä½¿ç”¨</strong>æ˜¯æœ€ä½³å®è·µï¼šCallback è´Ÿè´£è‡ªåŠ¨è¿½è¸ª LLM è°ƒç”¨å’Œå·¥å…·è°ƒç”¨çš„ç»†ç²’åº¦é“¾è·¯ï¼Œæ‰‹åŠ¨ Span è´Ÿè´£åœ¨æ­¤ä¹‹ä¸Šé™„åŠ ä¸šåŠ¡ç»´åº¦çš„æ±‡æ€»ä¿¡æ¯ï¼ˆå¦‚æœ€ç»ˆ SQLã€éªŒè¯ç»“æœã€è¿­ä»£è½®æ¬¡ï¼‰ï¼Œè®© Langfuse Dashboard æ—¢æœ‰æ·±åº¦åˆæœ‰æ¦‚è§ˆã€‚</p>
<p>ä»¥ä¸Šæ‰€æœ‰ä»£ç ç¤ºä¾‹å‡æ¥è‡ªæˆ‘çš„å¼€æºé¡¹ç›® <strong>EasySQL</strong> â€”â€” ä¸€ä¸ª Text-to-SQL æ™ºèƒ½ä½“åˆ†æåº”ç”¨ï¼Œé¡¹ç›®åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fzaizaizhao%2Feasysql" target="_blank" title="https://github.com/zaizaizhao/easysql" ref="nofollow noopener noreferrer">github.com/zaizaizhao/â€¦</a>ã€‚é¡¹ç›®ä¸»è¦æŠ€æœ¯æ ˆåŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>LangGraph</strong>ï¼šæ„å»ºå¤šæ­¥éª¤ Agent çŠ¶æ€æœºï¼Œæ”¯æŒæ¡ä»¶è·¯ç”±ã€Human-in-the-Loop æ¾„æ¸…ã€SQL ç”Ÿæˆâ†’éªŒè¯â†’ä¿®å¤çš„è¿­ä»£å¾ªç¯</li>
<li><strong>LangChain</strong>ï¼šLLM è°ƒç”¨æŠ½è±¡ä¸ RunnableConfig é…ç½®ä¼ é€’</li>
<li><strong>Langfuse</strong>ï¼šCallback + æ‰‹åŠ¨ Span åŒæ¨¡å¼å¯è§‚æµ‹æ€§ï¼Œå®ç°å…¨é“¾è·¯è¿½è¸ªä¸ä¸šåŠ¡æ±‡æ€»</li>
<li><strong>PostgreSQL + AsyncPostgresSaver</strong>ï¼šLangGraph Checkpointer çŠ¶æ€æŒä¹…åŒ–ï¼Œæ”¯æŒå¤šè½®å¯¹è¯ä¸Šä¸‹æ–‡</li>
<li><strong>FastAPI + Uvicorn</strong>ï¼šå¼‚æ­¥ API æœåŠ¡å±‚ï¼Œæä¾›æµå¼ SSE å“åº”</li>
<li><strong>Milvus</strong>ï¼šå‘é‡æ•°æ®åº“ï¼Œç”¨äº Schema è¯­ä¹‰æ£€ç´¢</li>
<li><strong>Neo4j</strong>ï¼š å›¾æ•°æ®åº“ï¼Œç”¨äºçŸ¥è¯†å›¾è°±æ„å»º</li>
<li><strong>Pydantic Settings</strong>ï¼šç±»å‹å®‰å…¨çš„é…ç½®ç®¡ç†ï¼Œæ”¯æŒç¯å¢ƒå˜é‡è¦†ç›–</li>
</ul>
<p>æ¬¢è¿ Star â­ å’Œäº¤æµï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Claude Agent Teamsä½¿ç”¨æ–¹æ³•]]></title>    <link>https://juejin.cn/post/7605131777175388223</link>    <guid>https://juejin.cn/post/7605131777175388223</guid>    <pubDate>2026-02-11T07:30:50.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605131777175388223" data-draft-id="7605051886435188799" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Claude Agent Teamsä½¿ç”¨æ–¹æ³•"/> <meta itemprop="keywords" content="Claude"/> <meta itemprop="datePublished" content="2026-02-11T07:30:50.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="anjushi"/> <meta itemprop="url" content="https://juejin.cn/user/3479331676363320"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Claude Agent Teamsä½¿ç”¨æ–¹æ³•
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3479331676363320/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    anjushi
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-11T07:30:50.000Z" title="Wed Feb 11 2026 07:30:50 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Agent Teams</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fcode.claude.com%2Fdocs%2Fzh-CN%2Fagent-teams" target="_blank" title="https://code.claude.com/docs/zh-CN/agent-teams" ref="nofollow noopener noreferrer">code.claude.com/docs/zh-CN/â€¦</a></p>
<p>å’Œ subagent æœ€æœ¬è´¨çš„åŒºåˆ«æ˜¯ï¼š<strong>teammate ä¹‹é—´å¯ä»¥ç›´æ¥é€šä¿¡</strong>ã€‚subagent åªèƒ½æŠŠç»“æœæŠ¥å‘Šç»™ä¸» Agentï¼Œæ˜¯å•å‘çš„ä¸ŠæŠ¥å…³ç³»ï¼›è€Œ Agent Teams é‡Œçš„é˜Ÿå‘˜å¯ä»¥äº’ç›¸å‘æ¶ˆæ¯</p>
<h3 data-id="heading-1">å¼€å¯</h3>
<p>è®¾ç½®ç¯å¢ƒå˜é‡ï¼š <code>/Users/xxx/.claude/settings.json</code></p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"env"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"CLAUDE_CODE_EXPERIMENTAL_AGENT_TEAMS"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"1"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 data-id="heading-2">tmuxåˆ†å±</h3>
<p>å®˜æ–¹æ–‡æ¡£æä¾›äº†ä¸¤ç§ä½¿ç”¨æ–¹å¼ï¼š</p>
<ul>
<li><strong>In-process æ¨¡å¼</strong></li>
<li><strong>Split-pane æ¨¡å¼</strong>ï¼ˆæ›´å‹å¥½ï¼Œæ¨èï¼‰</li>
</ul>
<p>é»˜è®¤ä¸º <code>"auto"</code> â€”â€”</p>
<ul>
<li>å¦‚æœåœ¨ tmux ä¼šè¯å†…ï¼šè‡ªåŠ¨ä½¿ç”¨åˆ†å±æ¨¡å¼</li>
<li>å¦‚æœä¸åœ¨ tmux å†…ï¼šä½¿ç”¨ in-process æ¨¡å¼</li>
</ul>
<p>å¯é€šè¿‡ä»¥ä¸‹æ–¹å¼å¼ºåˆ¶æŒ‡å®šï¼š</p>
<ul>
<li>settings.jsonï¼š<code>"teammateMode": "in-process"</code> æˆ– <code>"tmux"</code></li>
<li>å‘½ä»¤è¡Œï¼š<code>claude --teammate-mode in-process</code></li>
</ul>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftmux%2Ftmux%2Fwiki%2FInstalling" target="_blank" title="https://github.com/tmux/tmux/wiki/Installing" ref="nofollow noopener noreferrer">github.com/tmux/tmux/wâ€¦</a></p>
<p>å®‰è£…tmux</p>
<pre><code class="hljs">brew install tmux
</code></pre>
<p>æ–°å»ºsession</p>
<pre><code class="hljs language-arduino" lang="arduino">tmux <span class="hljs-keyword">new</span> -s team
</code></pre>
<p>é‡æ–°è¿›å…¥</p>
<pre><code class="hljs language-arduino" lang="arduino">tmux attach -t team
</code></pre>
<p>åˆ‡æ¢çª—æ ¼æœ‰ä¸€ä¸ªéœ€è¦æ³¨æ„çš„åœ°æ–¹ï¼ŒCtrl+B ä¹‹åéœ€è¦<strong>æ¾å¼€é”®ç›˜</strong>ï¼Œå†é€šè¿‡â¬†ï¸â¬‡ï¸â¬…ï¸â¡ï¸æ¥é€‰æ‹©å½“å‰çª—æ ¼</p>
<h3 data-id="heading-3">ä½¿ç”¨</h3>
<p>ä½¿ç”¨å¦‚ä¸‹æç¤ºè¯</p>
<pre><code class="hljs language-diff" lang="diff">åˆ›å»ºä¸€ä¸ª agent team
<span class="hljs-deletion">- ä¸€ä¸ªéœ€æ±‚åˆ†æå’Œæä¾› </span>
<span class="hljs-deletion">- ä¸€ä¸ªè¿›è¡Œå‰ç«¯å¼€å‘ </span>
<span class="hljs-deletion">- ä¸€ä¸ªè¿›è¡Œåç«¯å¼€å‘ </span>
è®©ä»–ä»¬å„è‡ªå¼€å‘å‰åç«¯å¹¶è¿›è¡Œæ¥å£å¯¹æ¥ï¼Œå¸®æˆ‘å®Œå–„æˆ‘çš„agent teamåˆ›å»º
</code></pre>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåˆ†å±æ˜¯claudecodeè‡ªè¡Œåˆ›å»ºçš„ï¼Œä¸éœ€è¦æ‰‹åŠ¨åˆ›å»º</p>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d7bb5faeb16245e0980a2baeecc98777~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYW5qdXNoaQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771399849&amp;x-signature=IMjOmwIDSOZm84JWSOjmeb9ZLrw%3D" alt="" width="100%" align="center" loading="lazy"/>
<p>å¯ä»¥åœ¨team leaderä¸­è°ƒç”¨ï¼Œä¹Ÿå¯ä»¥ç›´æ¥å’Œå•ä¸ªagentå¯¹è¯å®Œæˆä»»åŠ¡ <img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c409a712f05d428cbf69cf4438ad24c7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYW5qdXNoaQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771399849&amp;x-signature=hUVcWlarCuJOLVsMBs%2BirZTG4N4%3D" alt="" width="40%" align="center" loading="lazy"/></p>
<p>teamç”Ÿæˆåä¼šå­˜å‚¨åœ¨ <code>~/.claude/teams/{team-name}/config.json</code> <img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/632e62f043d748f7b89065aa60631fc9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYW5qdXNoaQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771399849&amp;x-signature=nAt%2B5dwKhBnvDtNb7RsKSEl2888%3D" alt="" width="60%" align="center" loading="lazy"/></p>
<h3 data-id="heading-4">é€€å‡ºagent team</h3>
<p>åœ¨team leaderä¹Ÿå°±æ˜¯ä¸»çª—å£è¦æ±‚å…³é—­ï¼Œå…¶ä»–åˆ†çª—å£ä¼šé€ä¸ªå…³é—­ <img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3c678ae6e5e0449f84404ec6a13c2887~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYW5qdXNoaQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771399849&amp;x-signature=z4Xw%2BfKdgG9sVazQfpnH3l8TciM%3D" alt="" width="40%" align="center" loading="lazy"/></p>
<p>å…³é—­å‰çš„åˆ†çª—å£ä¼šæ˜¾ç¤ºå¦‚ä¸‹ <img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/34400a5d8ad14203b465568ba29b2898~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYW5qdXNoaQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771399849&amp;x-signature=YxZKE6iPPDqhNcrVr%2FB3dRi7%2F6E%3D" alt="" width="80%" align="center" loading="lazy"/></p>
<p>agentteamæœ¬è´¨æ˜¯ä¸€æ¬¡ <strong>workflow run</strong>ï¼Œä¸æ˜¯é•¿æœŸåœ¨çº¿å›¢é˜Ÿ
æœ€å¥½çš„ä½¿ç”¨æ–¹æ³•æ˜¯ï¼š<strong>å£°æ˜ä»…å¯åŠ¨agentä½†ä¸å£°æ˜ä»»åŠ¡ï¼Œä¸è‡ªåŠ¨ç»“æŸ</strong>ï¼Œä¹Ÿå°±æ˜¯è®©è¿™æ¬¡ä»»åŠ¡ä¸€ç›´åœ¨è¿›è¡Œä¸­ï¼Œç„¶ååœ¨team leader æˆ– agent ä¸­ä¸‹å‘ä»»åŠ¡</p>
<p>claudeå¯¹è¯ä¹Ÿå¯ä»¥æš‚å­˜ï¼Œä½¿ç”¨å¦‚ä¸‹å‘½ä»¤å¯ä»¥é‡æ–°è¿›å…¥</p>
<pre><code class="hljs language-css" lang="css">claude <span class="hljs-attr">--resume</span>
</code></pre>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œagentteamæ¨¡å¼å¯¹tokençš„æ¶ˆè€—è¦æ¯”æ™®é€šæ¨¡å¼å¤šå¾ˆå¤š</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[macç«¯ä¸ºclaude codeé…ç½®ida mcp]]></title>    <link>https://juejin.cn/post/7605140481488306217</link>    <guid>https://juejin.cn/post/7605140481488306217</guid>    <pubDate>2026-02-11T07:23:17.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605140481488306217" data-draft-id="7605150769008181291" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="macç«¯ä¸ºclaude codeé…ç½®ida mcp"/> <meta itemprop="keywords" content="macOS,Claude"/> <meta itemprop="datePublished" content="2026-02-11T07:23:17.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é€†å‘APP"/> <meta itemprop="url" content="https://juejin.cn/user/2999123452370679"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            macç«¯ä¸ºclaude codeé…ç½®ida mcp
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2999123452370679/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é€†å‘APP
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-11T07:23:17.000Z" title="Wed Feb 11 2026 07:23:17 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ï¼ˆ1ï¼‰åœ¨ç»ˆç«¯è¿›å…¥idaçš„è·¯å¾„Â </p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">cd</span> /Applications/IDA\ Professional\ 9.0.app/Contents/MacOS 

</code></pre>
<p>Â ï¼ˆ2ï¼‰ä¸ºidaè®¾ç½®pythonÂ </p>
<pre><code class="hljs language-bash" lang="bash">./idapyswitch --force-path /opt/homebrew/Cellar/python@3.11/3.11.12/Frameworks/Python.framework/Versions/3.11/Python 
</code></pre>
<p>Â ï¼ˆ3ï¼‰åœ¨ç»ˆç«¯æ‰§è¡Œå®‰è£…ida mcpÂ </p>
<pre><code class="hljs language-arduino" lang="arduino">pip3<span class="hljs-number">.11</span> install --upgrade git+https:<span class="hljs-comment">//github.com/mrexodia/ida-pro-mcp </span>

</code></pre>
<p>Â éªŒè¯ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">ida-pro-mcp --<span class="hljs-built_in">help</span> 

</code></pre>
<p>Â ï¼ˆ4ï¼‰å®‰è£…Idaæ’ä»¶Â </p>
<pre><code class="hljs language-css" lang="css"> ida-pro-mcp <span class="hljs-attr">--install</span> 

</code></pre>
<p>ï¼ˆ5ï¼‰é…ç½®ida mcpçš„ä¿¡æ¯</p>
<pre><code class="hljs language-css" lang="css">% ida-pro-mcp <span class="hljs-attr">--config</span>
<span class="hljs-selector-attr">[HTTP MCP CONFIGURATION]</span>
{
  "mcpServers": {
    "ida-pro-mcp": {
      "type": <span class="hljs-string">"http"</span>,
      <span class="hljs-string">"url"</span>: <span class="hljs-string">"http://127.0.0.1:13337/mcp"</span>
    }
  }
}

<span class="hljs-selector-attr">[STDIO MCP CONFIGURATION]</span>
{
  "mcpServers": {
    "ida-pro-mcp": {
      "command": <span class="hljs-string">"/opt/homebrew/opt/python@3.11/bin/python3.11"</span>,
      <span class="hljs-string">"args"</span>: [
        <span class="hljs-string">"/opt/homebrew/lib/python3.11/site-packages/ida_pro_mcp/server.py"</span>,
        <span class="hljs-string">"--ida-rpc"</span>,
        <span class="hljs-string">"http://127.0.0.1:13337"</span>
      ]
    }
  }
}
</code></pre>
<p>Â ï¼ˆ6ï¼‰IDAä¸­å¯åŠ¨MCP</p>
<p>æ’ä»¶åªæ˜¯åŠ è½½äº†ï¼Œä½†é»˜è®¤ä¸ä¼šè‡ªåŠ¨å¯åŠ¨ RPCã€‚Â </p>
<p>ä½ éœ€è¦åœ¨ IDA é‡Œæ‰‹åŠ¨å¯åŠ¨ä¸€æ¬¡ MCP æ’ä»¶ï¼Œç«¯å£æ‰ä¼šç›‘å¬ã€‚Â </p>
<p>Â è¯·åœ¨ IDA æ‰§è¡Œï¼š</p>
<pre><code class="hljs language-rust" lang="rust"> èœå•ï¼šEdit <span class="hljs-punctuation">-&gt;</span> Plugins <span class="hljs-punctuation">-&gt;</span> MCP 

</code></pre>
<p>æˆ–è€…å¿«æ·é”®ï¼šCtrl-Alt-Mï¼ˆmac ä¸Š Alt é€šå¸¸æ˜¯ Optionï¼‰</p>
<p>(7)é‡å¯Claude Codeåï¼ŒæŸ¥çœ‹å¯ç”¨çš„MCPåˆ—è¡¨</p>
<p>è¾“å…¥å‘½ä»¤ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">List available MCP tools

</code></pre>
<p>è¾“å‡ºï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">â¯ List available MCP tools                                                                 
                                                                                           
âº ä»¥ä¸‹æ˜¯å½“å‰ä¼šè¯ä¸­å¯ç”¨çš„ IDA Pro MCP å·¥å…·åˆ—è¡¨ï¼š                                            
                                                                                           
  æŸ¥æ‰¾ä¸å¯¼èˆªå·¥å…·                                                                           
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    
  â”‚              å·¥å…·å              â”‚              åŠŸèƒ½              â”‚                    
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                    
  â”‚ mcp__ida-pro-mcp__lookup_funcs   â”‚ æŒ‰åœ°å€æˆ–åç§°æŸ¥æ‰¾å‡½æ•°           â”‚                    
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                    
  â”‚ mcp__ida-pro-mcp__list_funcs     â”‚ åˆ—å‡ºå‡½æ•°ï¼ˆæ”¯æŒè¿‡æ»¤å’Œåˆ†é¡µï¼‰     â”‚                    
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                    
  â”‚ mcp__ida-pro-mcp__list_globals   â”‚ åˆ—å‡ºå…¨å±€å˜é‡ï¼ˆæ”¯æŒè¿‡æ»¤å’Œåˆ†é¡µï¼‰ â”‚                    
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                    
  â”‚ mcp__ida-pro-mcp__imports        â”‚ åˆ—å‡ºå¯¼å…¥å‡½æ•°                   â”‚                    
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                    
  â”‚ mcp__ida-pro-mcp__basic_blocks   â”‚ è·å–å‡½æ•°çš„åŸºæœ¬å—ç”¨äºæ§åˆ¶æµå›¾   â”‚                    
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                    
  â”‚ mcp__ida-pro-mcp__search_structs â”‚ æœç´¢ç»“æ„ä½“                     â”‚                    
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    
  åç¼–è¯‘ä¸æ±‡ç¼–å·¥å…·                                                                         
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                              
  â”‚             å·¥å…·å             â”‚          åŠŸèƒ½          â”‚                              
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                              
  â”‚ mcp__ida-pro-mcp__decompile    â”‚ å°†å‡½æ•°åç¼–è¯‘ä¸ºä¼ªä»£ç    â”‚                              
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                              
  â”‚ mcp__ida-pro-mcp__disasm       â”‚ å°†å‡½æ•°åæ±‡ç¼–ä¸ºæ±‡ç¼–æŒ‡ä»¤ â”‚                              
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                              
  â”‚ mcp__ida-pro-mcp__declare_type â”‚ å£°æ˜ç±»å‹               â”‚                              
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                              
  â”‚ mcp__ida-pro-mcp__infer_types  â”‚ æ¨æ–­ç±»å‹               â”‚                              
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              
  äº¤å‰å¼•ç”¨ä¸è°ƒç”¨å›¾                                                                         
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        
  â”‚              å·¥å…·å              â”‚            åŠŸèƒ½            â”‚                        
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                        
  â”‚ mcp__ida-pro-mcp__xrefs_to       â”‚ è·å–åˆ°æŒ‡å®šåœ°å€çš„äº¤å‰å¼•ç”¨   â”‚                        
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                        
  â”‚ mcp__ida-pro-mcp__xrefs_to_field â”‚ è·å–åˆ°ç»“æ„ä½“å­—æ®µçš„äº¤å‰å¼•ç”¨ â”‚                        
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                        
  â”‚ mcp__ida-pro-mcp__callees        â”‚ è·å–æŒ‡å®šå‡½æ•°è°ƒç”¨çš„å‡½æ•°     â”‚                        
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                        
  â”‚ mcp__ida-pro-mcp__callgraph      â”‚ ä»æ ¹å‡½æ•°æ„å»ºè°ƒç”¨å›¾         â”‚                        
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        
  æœç´¢å·¥å…·                                                                                 
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                            
  â”‚            å·¥å…·å            â”‚            åŠŸèƒ½            â”‚                            
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                            
  â”‚ mcp__ida-pro-mcp__find       â”‚ æœç´¢å­—èŠ‚æ•°æ®               â”‚                            
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                            
  â”‚ mcp__ida-pro-mcp__find_regex â”‚ ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æœç´¢å­—ç¬¦ä¸²   â”‚                            
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                            
  â”‚ mcp__ida-pro-mcp__find_bytes â”‚ æœç´¢å­—èŠ‚æ¨¡å¼ï¼ˆæ”¯æŒé€šé…ç¬¦ï¼‰ â”‚                            
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                            
  å†…å­˜è¯»å–ä¸æ•°æ®è·å–                                                                       
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      
  â”‚               å·¥å…·å               â”‚            åŠŸèƒ½            â”‚                      
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                      
  â”‚ mcp__ida-pro-mcp__get_bytes        â”‚ ä»å†…å­˜åœ°å€è¯»å–å­—èŠ‚         â”‚                      
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                      
  â”‚ mcp__ida-pro-mcp__get_int          â”‚ ä»å†…å­˜åœ°å€è¯»å–æ•´æ•°å€¼       â”‚                      
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                      
  â”‚ mcp__ida-pro-mcp__get_string       â”‚ ä»å†…å­˜åœ°å€è¯»å–å­—ç¬¦ä¸²       â”‚                      
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                      
  â”‚ mcp__ida-pro-mcp__get_global_value â”‚ æŒ‰åœ°å€æˆ–åç§°è¯»å–å…¨å±€å˜é‡å€¼ â”‚                      
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                      
  â”‚ mcp__ida-pro-mcp__read_struct      â”‚ è¯»å–ç»“æ„ä½“ç±»å‹å¹¶è§£æå†…å­˜å€¼ â”‚                      
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      
  ä¿®æ”¹ä¸ç¼–è¾‘å·¥å…·                                                                           
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          
  â”‚             å·¥å…·å             â”‚                    åŠŸèƒ½                    â”‚          
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤          
  â”‚ mcp__ida-pro-mcp__patch        â”‚ ç”¨åå…­è¿›åˆ¶æ•°æ®åœ¨å†…å­˜åœ°å€æ‰“è¡¥ä¸             â”‚          
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤          
  â”‚ mcp__ida-pro-mcp__patch_asm    â”‚ ç”¨æ±‡ç¼–æŒ‡ä»¤åœ¨åœ°å€æ‰“è¡¥ä¸                     â”‚          
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤          
  â”‚ mcp__ida-pro-mcp__put_int      â”‚ å°†æ•´æ•°å€¼å†™å…¥å†…å­˜åœ°å€                       â”‚          
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤          
  â”‚ mcp__ida-pro-mcp__set_type     â”‚ åº”ç”¨ç±»å‹ï¼ˆå‡½æ•°/å…¨å±€/å±€éƒ¨/æ ˆå˜é‡ï¼‰          â”‚          
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤          
  â”‚ mcp__ida-pro-mcp__set_comments â”‚ åœ¨åœ°å€è®¾ç½®æ³¨é‡Š                             â”‚          
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤          
  â”‚ mcp__ida-pro-mcp__rename       â”‚ ç»Ÿä¸€é‡å‘½åå‡½æ•°ã€å…¨å±€å˜é‡ã€å±€éƒ¨å˜é‡å’Œæ ˆå˜é‡ â”‚          
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          
  å‡½æ•°ä¸ä»£ç å®šä¹‰                                                                           
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         
  â”‚            å·¥å…·å             â”‚             åŠŸèƒ½             â”‚                         
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                         
  â”‚ mcp__ida-pro-mcp__define_func â”‚ åœ¨åœ°å€å®šä¹‰å‡½æ•°               â”‚                         
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                         
  â”‚ mcp__ida-pro-mcp__define_code â”‚ å°†å­—èŠ‚è½¬æ¢ä¸ºåœ°å€å¤„çš„ä»£ç æŒ‡ä»¤ â”‚                         
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                         
  â”‚ mcp__ida-pro-mcp__undefine    â”‚ å–æ¶ˆå®šä¹‰é¡¹ç›®ï¼Œè½¬æ¢å›åŸå§‹å­—èŠ‚ â”‚                         
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         
  æ ˆå˜é‡å·¥å…·                                                                               
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                         
  â”‚             å·¥å…·å              â”‚    åŠŸèƒ½    â”‚                                         
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                                         
  â”‚ mcp__ida-pro-mcp__stack_frame   â”‚ è·å–æ ˆå˜é‡ â”‚                                         
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                                         
  â”‚ mcp__ida-pro-mcp__declare_stack â”‚ åˆ›å»ºæ ˆå˜é‡ â”‚                                         
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                                         
  â”‚ mcp__ida-pro-mcp__delete_stack  â”‚ åˆ é™¤æ ˆå˜é‡ â”‚                                         
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                         
  å¯¼å‡ºå·¥å…·                                                                                 
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                              
  â”‚             å·¥å…·å             â”‚          åŠŸèƒ½          â”‚                              
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                              
  â”‚ mcp__ida-pro-mcp__export_funcs â”‚ ä»¥å„ç§æ ¼å¼å¯¼å‡ºå‡½æ•°æ•°æ® â”‚                              
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              
  Python æ‰§è¡Œ                                                                              
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      
  â”‚          å·¥å…·å           â”‚                        åŠŸèƒ½                         â”‚      
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      
  â”‚ mcp__ida-pro-mcp__py_eval â”‚ åœ¨ IDA ä¸Šä¸‹æ–‡ä¸­æ‰§è¡Œ Python ä»£ç ï¼ˆè®¿é—®æ‰€æœ‰ IDA APIï¼‰ â”‚      
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      
  æ•°å­—è½¬æ¢                                                                                 
  å·¥å…·å: mcp__ida-pro-mcp__int_convert                                                    
  åŠŸèƒ½: å°†æ•°å­—è½¬æ¢ä¸ºä¸åŒæ ¼å¼ï¼ˆåå…­è¿›åˆ¶ã€åè¿›åˆ¶ã€äºŒè¿›åˆ¶ã€ASCIIï¼‰                            
  ---                                                                                      
  æ€»è®¡: <span class="hljs-number">34</span> ä¸ª MCP å·¥å…·å¯ç”¨
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[MCP (Model Context Protocol) æŠ€æœ¯ç†è§£ - ç¬¬å››ç¯‡]]></title>    <link>https://juejin.cn/post/7605145921617723444</link>    <guid>https://juejin.cn/post/7605145921617723444</guid>    <pubDate>2026-02-11T07:34:44.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605145921617723444" data-draft-id="7605106957133873186" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="MCP (Model Context Protocol) æŠ€æœ¯ç†è§£ - ç¬¬å››ç¯‡"/> <meta itemprop="keywords" content="åç«¯,MCP,AIGC"/> <meta itemprop="datePublished" content="2026-02-11T07:34:44.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æƒ³ç”¨offeræ‰“ç‰Œ"/> <meta itemprop="url" content="https://juejin.cn/user/578781641968972"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            MCP (Model Context Protocol) æŠ€æœ¯ç†è§£ - ç¬¬å››ç¯‡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/578781641968972/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æƒ³ç”¨offeræ‰“ç‰Œ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-11T07:34:44.000Z" title="Wed Feb 11 2026 07:34:44 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.8;font-weight:400;font-size:16px;word-spacing:2px;letter-spacing:2px;overflow-x:hidden;color:#3e3e3e;background-image:linear-gradient(90deg,rgba(50,0,0,.05) 3%,transparent 0),linear-gradient(1turn,rgba(50,0,0,.05) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:30px;margin-bottom:5px}.markdown-body h2{padding-bottom:12px;font-size:24px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h4{font-size:1.2em;border-bottom:2px solid #ef7060;word-spacing:0!important;letter-spacing:0!important;font-size:inherit;line-height:inherit;display:block;font-weight:400;background:#ef7060;color:#fff;padding:10px;border-top-right-radius:3px;border-top-left-radius:3px;margin-right:3px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="monokai">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#272822;color:#ddd}.hljs-keyword,.hljs-literal,.hljs-name,.hljs-selector-tag,.hljs-strong,.hljs-tag{color:#f92672}.hljs-code{color:#66d9ef}.hljs-class .hljs-title{color:#fff}.hljs-attribute,.hljs-link,.hljs-regexp,.hljs-symbol{color:#bf79db}.hljs-addition,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-emphasis,.hljs-section,.hljs-selector-attr,.hljs-selector-pseudo,.hljs-string,.hljs-subst,.hljs-template-tag,.hljs-template-variable,.hljs-title,.hljs-type,.hljs-variable{color:#a6e22e}.hljs-comment,.hljs-deletion,.hljs-meta,.hljs-quote{color:#75715e}.hljs-doctag,.hljs-keyword,.hljs-literal,.hljs-section,.hljs-selector-id,.hljs-selector-tag,.hljs-title,.hljs-type{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€</h2>
<p>åœ¨ç¬¬ä¸‰ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬è®²äº†<strong>MCPæœåŠ¡ç«¯çš„ä¸‰ä¸ªæ ¸å¿ƒåŸè¯­</strong>ã€‚åœ¨ä¸Šä¸€ç¯‡æˆ‘å…¶å®å¿˜è®°è§£é‡ŠåŸè¯­åˆ°åº•æ˜¯ä»€ä¹ˆï¼Œè¿™é‡Œè¡¥å……ä¸€ä¸‹å§ã€‚</p>
<p><strong>åŸè¯­</strong>æŒ‡çš„æ˜¯<strong>æœ€åŸºæœ¬çš„ã€ä¸å¯å†åˆ†çš„æ“ä½œå•å…ƒ</strong>ï¼Œæ˜¯æ„å»ºæ›´å¤æ‚åŠŸèƒ½çš„åŸºç¡€æ„å»ºå—ï¼ˆbuilding blocksï¼‰ã€‚æˆ‘ä»¬è®²çš„æœåŠ¡ç«¯çš„ä¸‰ä¸ªæ ¸å¿ƒåŸè¯­ï¼Œå…¶å®å°±æ˜¯MCPæœåŠ¡å™¨èƒ½æä¾›çš„ä¸‰ç§<strong>åŸºæœ¬äº¤äº’æ¨¡å¼</strong>ã€‚é‚£ä¹ˆç±»æ¯”åˆ°å…¶ä»–æ–¹é¢ï¼Œæ¯”å¦‚<strong>HTTP çš„åŸè¯­</strong>ï¼šGETã€POSTã€PUTã€DELETEï¼ˆåŸºæœ¬æ“ä½œï¼‰ï¼Œæ•°æ®åº“çš„åŸºæœ¬åŸè¯­æ˜¯CRUDç­‰ç­‰ã€‚</p>
<p>é‚£ä¹ˆè¿™ä¸€ç¯‡æˆ‘ä»¬å°±å¼€å§‹è®²<strong>å®¢æˆ·ç«¯çš„æ ¸å¿ƒåŸè¯­</strong></p>
<p>å¦‚æœä½ å¯¹å‰é¢çš„å†…å®¹æ„Ÿå…´è¶£ï¼Œå¯ä»¥ç‚¹å‡»è¿™é‡Œè·³è½¬</p>
<p><a href="https://juejin.cn/post/7604037348607082534" target="_blank" title="https://juejin.cn/post/7604037348607082534">MCP (Model Context Protocol) æŠ€æœ¯ç†è§£ - ç¬¬ä¸€ç¯‡</a></p>
<p><a href="https://juejin.cn/post/7603721514204495881" target="_blank" title="https://juejin.cn/post/7603721514204495881">MCP (Model Context Protocol) æŠ€æœ¯ç†è§£ - ç¬¬äºŒç¯‡</a></p>
<p><a href="https://juejin.cn/post/7605042079668518927" target="_blank" title="https://juejin.cn/post/7605042079668518927">MCP (Model Context Protocol) æŠ€æœ¯ç†è§£ - ç¬¬ä¸‰ç¯‡</a></p>
<h2 data-id="heading-1">MCPå®¢æˆ·ç«¯æ˜¯ä»€ä¹ˆ</h2>
<p>å…¶å®æˆ‘ä»¬åœ¨å‰é¢çš„æ¶æ„è®²è§£çš„æ—¶å€™æœ‰è®²è¿‡MCPçš„å®¢æˆ·ç«¯æ˜¯ä»€ä¹ˆï¼Œä½†æ˜¯è¿™é‡Œå°±é¡ºå¸¦å†è®²ä¸€éå§ã€‚</p>
<p>MCP å®¢æˆ·ç«¯ç”±AIåº”ç”¨ç¨‹åºå®ä¾‹åŒ–ï¼Œç”¨äºä¸ç‰¹å®šçš„ MCP æœåŠ¡å™¨é€šä¿¡ã€‚AIåº”ç”¨ï¼ˆä¾‹å¦‚ Cursoræˆ–è€…Claude Codeï¼‰è´Ÿè´£ç®¡ç†æ•´ä½“ç”¨æˆ·ä½“éªŒå¹¶åè°ƒå¤šä¸ªå®¢æˆ·ç«¯ã€‚æ¯ä¸ªå®¢æˆ·ç«¯å¤„ç†ä¸ä¸€ä¸ªæœåŠ¡å™¨çš„ç›´æ¥é€šä¿¡ã€‚<strong>ç†æ¸…è¿™é‡Œéå¸¸é‡è¦ï¼Œä¸è¦æŠŠAIåº”ç”¨(hostå®¿ä¸»)å’ŒMCPå®¢æˆ·ç«¯æ··ä¸ºä¸€è°ˆå™¢</strong></p>
<p>æ ¹æœ¬åŒºåˆ«å°±æ˜¯hostæ˜¯ç”¨æˆ·ä¸ä¹‹äº¤äº’çš„åº”ç”¨ç¨‹åºï¼Œè€Œå®¢æˆ·ç«¯æ˜¯å®ç°æœåŠ¡å™¨è¿æ¥çš„åè®®çº§ç»„ä»¶</p>
<h2 data-id="heading-2">MCPå®¢æˆ·ç«¯çš„æ ¸å¿ƒåŸè¯­</h2>
<p>ä¸Šé¢è®²äº†æ¦‚å¿µï¼Œæˆ‘ä»¬ç°åœ¨å†æ¥è®²è®²å®¢æˆ·ç«¯çš„æ ¸å¿ƒåŸè¯­æœ‰ä»€ä¹ˆï¼Œä¸€èˆ¬æœ‰ä¸‹é¢çš„ä¸‰ç§ï¼š</p>

























<table><thead><tr><th>ç‰¹å¾</th><th>è§£é‡Š</th><th>ä¾‹å­</th></tr></thead><tbody><tr><td><strong>Elicitation</strong></td><td>ä¿¡æ¯è·å–ä½¿æœåŠ¡å™¨èƒ½å¤Ÿåœ¨äº¤äº’è¿‡ç¨‹ä¸­å‘ç”¨æˆ·è¯·æ±‚ç‰¹å®šä¿¡æ¯ï¼Œä¸ºæœåŠ¡å™¨æŒ‰éœ€æ”¶é›†ä¿¡æ¯æä¾›äº†ä¸€ç§ç»“æ„åŒ–çš„æ–¹æ³•ã€‚</td><td>æœåŠ¡å™¨åœ¨é¢„è®¢æ—…è¡Œæ—¶å¯èƒ½ä¼šè¯¢é—®ç”¨æˆ·å¯¹é£æœºåº§ä½ã€æˆ¿é—´ç±»å‹æˆ–è”ç³»ç”µè¯çš„åå¥½ï¼Œä»¥å®Œæˆé¢„è®¢ã€‚</td></tr><tr><td><strong>Roots</strong></td><td>æ ¹ç›®å½•å…è®¸å®¢æˆ·ç«¯æŒ‡å®šæœåŠ¡å™¨åº”è¯¥å…³æ³¨å“ªäº›ç›®å½•ï¼Œå¹¶é€šè¿‡åè°ƒæœºåˆ¶ä¼ è¾¾é¢„æœŸèŒƒå›´ã€‚</td><td>æ—…è¡Œé¢„è®¢æœåŠ¡å™¨å¯ä»¥è¢«æˆäºˆå¯¹ç‰¹å®šç›®å½•çš„è®¿é—®æƒé™ï¼Œä»è€Œå¯ä»¥ä»ä¸­è¯»å–ç”¨æˆ·çš„æ—¥å†ã€‚</td></tr><tr><td><strong>Sampling</strong></td><td>é‡‡æ ·å…è®¸æœåŠ¡å™¨é€šè¿‡å®¢æˆ·ç«¯è¯·æ±‚ LLM å®Œæˆï¼Œä»è€Œå®ç°ä»£ç†å·¥ä½œæµã€‚è¿™ç§æ–¹æ³•ä½¿å®¢æˆ·ç«¯å®Œå…¨æŒæ§ç”¨æˆ·æƒé™å’Œå®‰å…¨æªæ–½ã€‚</td><td>æ—…è¡Œé¢„è®¢æœåŠ¡å™¨å¯ä»¥å‘ LLM å‘é€èˆªç­åˆ—è¡¨ï¼Œå¹¶è¯·æ±‚ LLM ä¸ºç”¨æˆ·é€‰æ‹©æœ€ä½³èˆªç­ã€‚</td></tr></tbody></table>
<h3 data-id="heading-3">Elicitation</h3>
<p>Elicitationï¼Œç¿»è¯‘è¿‡æ¥æ„æ€æ˜¯å¼•å¯¼ã€‚å®ƒçš„ä½œç”¨å’Œå®ƒçš„ç¿»è¯‘æ„æ€ä¸€æ ·ï¼Œ<strong>ä¸ºæœåŠ¡å™¨æä¾›äº†ä¸€ç§ç»“æ„åŒ–çš„æ–¹æ³•ï¼Œä½¿å…¶èƒ½å¤ŸæŒ‰éœ€æ”¶é›†å¿…è¦ä¿¡æ¯</strong>ã€‚æœåŠ¡å™¨æ— éœ€é¢„å…ˆè·å–æ‰€æœ‰ä¿¡æ¯ï¼Œä¹Ÿæ— éœ€åœ¨æ•°æ®ç¼ºå¤±æ—¶å¤±è´¥ï¼Œè€Œæ˜¯å¯ä»¥æš‚åœæ“ä½œï¼Œå‘ç”¨æˆ·è¯·æ±‚ç‰¹å®šè¾“å…¥ã€‚è¿™åˆ›é€ äº†æ›´çµæ´»çš„äº¤äº’æ–¹å¼ï¼ŒæœåŠ¡å™¨èƒ½å¤Ÿé€‚åº”ç”¨æˆ·éœ€æ±‚ï¼Œè€Œä¸æ˜¯éµå¾ªåƒµåŒ–çš„æ¨¡å¼</p>
<p>è¿™æ˜¯å®ƒçš„æ—¶åºå›¾</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b36919872052408f8d2f7f9979504516~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oOz55Sob2ZmZXLmiZPniYw=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771400084&amp;x-signature=uFewuwc%2B2AlYvnuQplAxkKB4RNI%3D" alt="image.png" loading="lazy"/></p>
<p>è¯¥æµç¨‹æ”¯æŒåŠ¨æ€ä¿¡æ¯æ”¶é›†ã€‚æœåŠ¡å™¨å¯ä»¥æ ¹æ®éœ€è¦è¯·æ±‚ç‰¹å®šæ•°æ®ï¼Œç”¨æˆ·é€šè¿‡ç›¸åº”çš„ç”¨æˆ·ç•Œé¢æä¾›ä¿¡æ¯ï¼ŒæœåŠ¡å™¨åˆ™æ ¹æ®æ–°è·å–çš„ä¸Šä¸‹æ–‡ç»§ç»­å¤„ç†æ•°æ®ã€‚</p>
<p><strong>ä¸¾ä¸ªä¾‹å­æ¥è¯´æ˜ç™½</strong>ï¼Œæˆ‘ä»¬ä½¿ç”¨claude codeçš„æ—¶å€™ï¼Œå¦‚æœä½ çš„promptsä¸å¤Ÿæ¸…æ™°æ˜äº†ï¼ŒCCä¼šé—®ä½ æ˜¯å¦è¦xxï¼Œæˆ–è€…é—®xxè¿™æ ·åšæ‚¨æ»¡æ„å—ï¼Ÿé€æ¸å¼•å¯¼åˆ°ä½ æƒ³è¦çš„ç»“æœã€‚</p>
<p>åˆè¯´åˆ°æœ€è¿‘å¾ˆç«çš„åƒé—®é€å¥¶èŒ¶æ´»åŠ¨ï¼Œä½ è¯´çš„promptæ˜¯â€œæˆ‘è¦å–xxçš„xxæ¬¾å¥¶èŒ¶â€ï¼Œä½†æ˜¯å®ƒä¸çŸ¥é“ä½ è¦å¤§æ¯è¿˜æ˜¯ä¸­æ¯ï¼Œå‡ åˆ†ç³–ï¼Œæ‰€ä»¥ä¼šè¿”å›ä¸åŒè§„æ ¼çš„åŒæ¬¾å¥¶èŒ¶ç»™ä½ (åŒå®¶å¥¶èŒ¶åº—ï¼Œä½†æ˜¯ä¸åŒåœ°ç‚¹ï¼Œå¤§æ¯æˆ–ä¸­æ¯)ï¼Œç­‰ä½ é€‰å®šå†è¿”å›ç»™åƒé—®ä¸‹å•ã€‚</p>
<p>æ¥ä¸ªæ•°æ®æµç¤ºæ„ï¼Ÿ</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  method<span class="hljs-punctuation">:</span> <span class="hljs-string">"elicitation/requestInput"</span><span class="hljs-punctuation">,</span>
  params<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    message<span class="hljs-punctuation">:</span> <span class="hljs-string">"Please confirm your Barcelona vacation booking details:"</span><span class="hljs-punctuation">,</span>
    schema<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      type<span class="hljs-punctuation">:</span> <span class="hljs-string">"object"</span><span class="hljs-punctuation">,</span>
      properties<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        confirmBooking<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
          type<span class="hljs-punctuation">:</span> <span class="hljs-string">"boolean"</span><span class="hljs-punctuation">,</span>
          description<span class="hljs-punctuation">:</span> <span class="hljs-string">"Confirm the booking (Flights + Hotel = $3,000)"</span>
        <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
        seatPreference<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
          type<span class="hljs-punctuation">:</span> <span class="hljs-string">"string"</span><span class="hljs-punctuation">,</span>
          enum<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"window"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"aisle"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"no preference"</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
          description<span class="hljs-punctuation">:</span> <span class="hljs-string">"Preferred seat type for flights"</span>
        <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
        roomType<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
          type<span class="hljs-punctuation">:</span> <span class="hljs-string">"string"</span><span class="hljs-punctuation">,</span>
          enum<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"sea view"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"city view"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"garden view"</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
          description<span class="hljs-punctuation">:</span> <span class="hljs-string">"Preferred room type at hotel"</span>
        <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
        travelInsurance<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
          type<span class="hljs-punctuation">:</span> <span class="hljs-string">"boolean"</span><span class="hljs-punctuation">,</span>
          default<span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span>
          description<span class="hljs-punctuation">:</span> <span class="hljs-string">"Add travel insurance ($150)"</span>
        <span class="hljs-punctuation">}</span>
      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      required<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"confirmBooking"</span><span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 data-id="heading-4">Roots</h3>
<p>Roots,ç›´è¯‘è¿‡æ¥æ˜¯æ ¹çš„æ„æ€ï¼Œä¹Ÿå°±æ˜¯æ ¹ç›®å½•ã€‚<strong>æ ¹ç›®å½•æ˜¯å®¢æˆ·ç«¯å‘æœåŠ¡å™¨ä¼ è¾¾æ–‡ä»¶ç³»ç»Ÿè®¿é—®è¾¹ç•Œçš„ä¸€ç§æœºåˆ¶</strong>ã€‚å®ƒä»¬ç”±æ–‡ä»¶ URI ç»„æˆï¼ŒæŒ‡ç¤ºæœåŠ¡å™¨å¯ä»¥æ“ä½œçš„ç›®å½•ï¼Œå¸®åŠ©æœåŠ¡å™¨äº†è§£å¯ç”¨æ–‡ä»¶å’Œæ–‡ä»¶å¤¹çš„èŒƒå›´ã€‚è™½ç„¶æ ¹ç›®å½•ä¼ è¾¾äº†é¢„æœŸçš„è¾¹ç•Œï¼Œä½†å®ƒä»¬å¹¶ä¸å¼ºåˆ¶æ‰§è¡Œå®‰å…¨é™åˆ¶ã€‚å®é™…çš„å®‰å…¨æªæ–½å¿…é¡»åœ¨æ“ä½œç³»ç»Ÿå±‚é¢é€šè¿‡æ–‡ä»¶æƒé™å’Œ/æˆ–æ²™ç®±æœºåˆ¶æ¥å®æ–½</p>
<p>é‚£ä¹ˆRootså¯ä»¥è§„å®šMCPæœåŠ¡ç«¯å¯ä»¥è®¿é—®çš„æ–‡ä»¶ï¼Œè¦æ±‚ä¸èƒ½è¶Šè¿‡è¶Šè¿‡è¿™æ¡è¾¹ç•Œ(ä½†æ˜¯ä¸èƒ½å¼ºåˆ¶è¦æ±‚ï¼Œå› ä¸ºæœåŠ¡å™¨è¿è¡Œçš„ä»£ç æ˜¯å®¢æˆ·ç«¯æ— æ³•æ§åˆ¶çš„)ã€‚</p>
<p>ä¸‹é¢æ˜¯Rootsçš„ç»“æ„ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"uri"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"file:///Users/agent/travel-planning"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Travel Planning Workspace"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>æ ¹ç›®å½•æ˜¯æ–‡ä»¶ç³»ç»Ÿè·¯å¾„ï¼Œå§‹ç»ˆä½¿ç”¨<code>file://</code>URI æ–¹æ¡ˆã€‚å®ƒä»¬å¸®åŠ©æœåŠ¡å™¨ç†è§£é¡¹ç›®è¾¹ç•Œã€å·¥ä½œåŒºç»„ç»‡ç»“æ„å’Œå¯è®¿é—®ç›®å½•ã€‚æ ¹ç›®å½•åˆ—è¡¨ä¼šéšç€ç”¨æˆ·ä½¿ç”¨ä¸åŒçš„é¡¹ç›®æˆ–æ–‡ä»¶å¤¹è€ŒåŠ¨æ€æ›´æ–°ï¼ŒæœåŠ¡å™¨ä¼šåœ¨<code>roots/list_changed</code>è¾¹ç•Œå‘ç”Ÿå˜åŒ–æ—¶æ”¶åˆ°é€šçŸ¥ã€‚</p>
<p>ä¸ç†è§£ï¼Ÿæˆ‘ä»¬æ¥ä¸€ä¸ªç¤ºä¾‹ï¼š</p>
<p>æ—…è¡Œç¤¾agentéœ€è¦å¤„ç†å¤šä¸ªå®¢æˆ·çš„è¡Œç¨‹ï¼Œå› æ­¤å¯ä»¥åˆ©ç”¨Rootsæ¥ç»„ç»‡æ–‡ä»¶ç³»ç»Ÿè®¿é—®ã€‚å¯ä»¥è€ƒè™‘åˆ›å»ºä¸€ä¸ªå·¥ä½œåŒºï¼Œå…¶ä¸­åŒ…å«ç”¨äºæ—…è¡Œè®¡åˆ’å„ä¸ªæ–¹é¢çš„ä¸åŒç›®å½•ã€‚å®¢æˆ·ç«¯å‘æ—…è¡Œè§„åˆ’æœåŠ¡å™¨æä¾›æ–‡ä»¶ç³»ç»Ÿæ ¹ç›®å½•ï¼š</p>
<ul>
<li><code>file:///Users/agent/travel-planning</code>- åŒ…å«æ‰€æœ‰æ—…è¡Œæ–‡ä»¶çš„ä¸»å·¥ä½œåŒº</li>
<li><code>file:///Users/agent/travel-templates</code>- å¯é‡å¤ä½¿ç”¨çš„è¡Œç¨‹æ¨¡æ¿å’Œèµ„æº</li>
<li><code>file:///Users/agent/client-documents</code>- å®¢æˆ·æŠ¤ç…§å’Œæ—…è¡Œè¯ä»¶</li>
</ul>
<p>å½“agentåˆ›å»ºå·´å¡ç½—é‚£è¡Œç¨‹æ—¶ï¼Œè¿è¡Œè‰¯å¥½çš„æœåŠ¡å™¨ä¼šéµå®ˆè¿™äº›è¾¹ç•Œâ€”â€”è®¿é—®æ¨¡æ¿ã€ä¿å­˜æ–°è¡Œç¨‹ä»¥åŠå¼•ç”¨æŒ‡å®šæ ¹ç›®å½•ä¸‹çš„å®¢æˆ·æ–‡æ¡£ã€‚æœåŠ¡å™¨é€šå¸¸é€šè¿‡ä½¿ç”¨æ ¹ç›®å½•çš„ç›¸å¯¹è·¯å¾„æˆ–åˆ©ç”¨éµå¾ªæ ¹ç›®å½•è¾¹ç•Œçš„æ–‡ä»¶æœç´¢å·¥å…·æ¥è®¿é—®æ ¹ç›®å½•ä¸­çš„æ–‡ä»¶ã€‚å¦‚æœä»£ç†æ‰“å¼€ä¸€ä¸ªç±»ä¼¼è¿™æ ·çš„å½’æ¡£æ–‡ä»¶å¤¹<code>file:///Users/agent/archive/2023-trips</code>ï¼Œå®¢æˆ·ç«¯ä¼šé€šè¿‡æ›´æ–°æ ¹åˆ—è¡¨<code>roots/list_changed</code></p>
<h3 data-id="heading-5">Sampling</h3>
<p>Samplingï¼Œç›´è¯‘è¿‡æ¥æ˜¯é‡‡æ ·ã€‚é‡‡æ ·å…è®¸æœåŠ¡å™¨é€šè¿‡å®¢æˆ·ç«¯è¯·æ±‚è¯­è¨€æ¨¡å‹è¡¥å…¨ï¼Œä»è€Œå®ç°ä»£ç†è¡Œä¸ºï¼ŒåŒæ—¶ä¿æŒå®‰å…¨æ€§å’Œç”¨æˆ·æ§åˆ¶ã€‚æœåŠ¡å™¨å¯ä»¥è¯·æ±‚å·²æ‹¥æœ‰ AI æ¨¡å‹è®¿é—®æƒé™çš„å®¢æˆ·ç«¯ä»£è¡¨å…¶å¤„ç†è¿™äº›ä»»åŠ¡ã€‚è¿™ç§æ–¹æ³•ä½¿å®¢æˆ·ç«¯å®Œå…¨æŒæ§ç”¨æˆ·æƒé™å’Œå®‰å…¨æªæ–½ã€‚ç”±äºé‡‡æ ·è¯·æ±‚å‘ç”Ÿåœ¨å…¶ä»–æ“ä½œï¼ˆä¾‹å¦‚æ•°æ®åˆ†æå·¥å…·ï¼‰çš„ä¸Šä¸‹æ–‡ä¸­ï¼Œå¹¶ä½œä¸ºç‹¬ç«‹çš„æ¨¡å‹è°ƒç”¨è¿›è¡Œå¤„ç†ï¼Œå› æ­¤å®ƒä»¬èƒ½å¤Ÿæ¸…æ™°åœ°åˆ’åˆ†ä¸åŒä¸Šä¸‹æ–‡ï¼Œä»è€Œæ›´æœ‰æ•ˆåœ°åˆ©ç”¨ä¸Šä¸‹æ–‡çª—å£ã€‚</p>
<p>ä¸ç†è§£ï¼Ÿæ¥ä¸ªä¾‹å­ï¼Œå¹³æ—¶ä½¿ç”¨Cursorçš„æ—¶å€™ï¼Œå¦‚æœè¦æ‰§è¡ŒæŸä¸ªæ–‡ä»¶å‘½ä»¤åˆæˆ–è€…æ‰§è¡Œmavenå‘½ä»¤ï¼Œå¦‚æœä½ æ²¡æœ‰è®¾ç½®Agentå…¨è‡ªåŠ¨è¿è¡Œï¼Œé‚£ä¹ˆAgentåœ¨è¿è¡Œå‰çš„æ—¶å€™è‚¯å®šä¼šå…ˆæ¥é—®ä½ ï¼Œæ˜¯å¦æ‰§è¡Œè¿™ä¸ªå‘½ä»¤æˆ–è€…skip(è·³è¿‡)ã€‚</p>
<p>ä¸‹é¢æ˜¯é‡‡æ ·çš„æ—¶åºå›¾ï¼Œè¯¥æµç¨‹é€šè¿‡å¤šé‡äººä¸ºå¹²é¢„æ£€æŸ¥ç‚¹ç¡®ä¿å®‰å…¨æ€§ã€‚ç”¨æˆ·å¯ä»¥åœ¨è¯·æ±‚è¿”å›æœåŠ¡å™¨ä¹‹å‰ï¼ŒæŸ¥çœ‹å¹¶ä¿®æ”¹åˆå§‹è¯·æ±‚å’Œç”Ÿæˆçš„å“åº”ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/21af1ba41de74c089a2745e44b686c9a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oOz55Sob2ZmZXLmiZPniYw=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771400084&amp;x-signature=cURyREPjSGK0swIBflPojzDxLBg%3D" alt="image.png" loading="lazy"/></p>
<p>ä¸‹é¢æ˜¯è¯·æ±‚å‚æ•°ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  messages<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span>
      role<span class="hljs-punctuation">:</span> <span class="hljs-string">"user"</span><span class="hljs-punctuation">,</span>
      content<span class="hljs-punctuation">:</span> <span class="hljs-string">"Analyze these flight options and recommend the best choice:\n"</span> +
               <span class="hljs-string">"[47 flights with prices, times, airlines, and layovers]\n"</span> +
               <span class="hljs-string">"User preferences: morning departure, max 1 layover"</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  modelPreferences<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    hints<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">{</span>
      name<span class="hljs-punctuation">:</span> <span class="hljs-string">"claude-sonnet-4-20250514"</span>  <span class="hljs-comment">// Suggested model</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
    costPriority<span class="hljs-punctuation">:</span> <span class="hljs-number">0.3</span><span class="hljs-punctuation">,</span>      <span class="hljs-comment">// Less concerned about API cost</span>
    speedPriority<span class="hljs-punctuation">:</span> <span class="hljs-number">0.2</span><span class="hljs-punctuation">,</span>     <span class="hljs-comment">// Can wait for thorough analysis</span>
    intelligencePriority<span class="hljs-punctuation">:</span> <span class="hljs-number">0.9</span>  <span class="hljs-comment">// Need complex trade-off evaluation</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  systemPrompt<span class="hljs-punctuation">:</span> <span class="hljs-string">"You are a travel expert helping users find the best flights based on their preferences"</span><span class="hljs-punctuation">,</span>
  maxTokens<span class="hljs-punctuation">:</span> <span class="hljs-number">1500</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>Samplingæœ¬è´¨å°±æ˜¯æƒ³å®ç°äººæœºååŒã€‚é‡‡æ ·è¯·æ±‚å¯èƒ½éœ€è¦ç”¨æˆ·æ˜ç¡®åŒæ„ã€‚å®¢æˆ·ç«¯å¯ä»¥è¯´æ˜æœåŠ¡å™¨æƒ³è¦åˆ†æçš„å†…å®¹åŠå…¶åŸå› ã€‚ç”¨æˆ·å¯ä»¥æ‰¹å‡†ã€æ‹’ç»æˆ–ä¿®æ”¹è¯·æ±‚ã€‚</p>
<h2 data-id="heading-6">å°ç»“</h2>
<p>è¿™ç¯‡æˆ‘ä»¬è¿ç”¨äº†å¾ˆå¤šä¾‹å­æ¥è®²è§£MCPå®¢æˆ·ç«¯ä¸‰ç§åŸè¯­ï¼Œç›¸ä¿¡å¤§å®¶éƒ½æœ‰ä¸é”™çš„ä½“æ„Ÿã€‚ä¸‹ä¸€ç¯‡ï¼Œæˆ‘ä»¬ä¼šè®²è§£MCPå®æˆ˜å¼€å‘ã€‚</p>
<p>å¦‚æœä½ è§‰å¾—MCPæŠ€æœ¯è®²è§£ç³»åˆ—éå¸¸ä¸é”™ï¼Œå¯ä»¥ç‚¹èµ+æ”¶è—+å…³æ³¨ï¼Œè°¢è°¢ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ…ç”¨mysqldumpä¸GTIDè‡ªåŠ¨å®šä½ï¼šä¸€æ¬¡å¤‡ä»½æ•°æ®"ä¸¢å¤±"çš„æ’æŸ¥]]></title>    <link>https://juejin.cn/post/7605145921617707060</link>    <guid>https://juejin.cn/post/7605145921617707060</guid>    <pubDate>2026-02-11T07:34:08.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605145921617707060" data-draft-id="7605114376803467304" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ…ç”¨mysqldumpä¸GTIDè‡ªåŠ¨å®šä½ï¼šä¸€æ¬¡å¤‡ä»½æ•°æ®&quot;ä¸¢å¤±&quot;çš„æ’æŸ¥"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-02-11T07:34:08.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="GreatSQL"/> <meta itemprop="url" content="https://juejin.cn/user/2859169627508573"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ…ç”¨mysqldumpä¸GTIDè‡ªåŠ¨å®šä½ï¼šä¸€æ¬¡å¤‡ä»½æ•°æ®"ä¸¢å¤±"çš„æ’æŸ¥
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2859169627508573/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    GreatSQL
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-11T07:34:08.000Z" title="Wed Feb 11 2026 07:34:08 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æ…ç”¨mysqldumpä¸GTIDè‡ªåŠ¨å®šä½ï¼šä¸€æ¬¡å¤‡ä»½æ•°æ®"ä¸¢å¤±"çš„æ’æŸ¥</h2>
<h4 data-id="heading-1">æœ¬æ–‡æ‘˜è¦</h4>
<p>å¯¼å…¥<code>mysqldump</code>çš„å¤‡ä»½æ•°æ®ï¼Œå¹¶é€šè¿‡<code>MASTER_AUTO_POSITION=1</code>é…ç½®ä»èŠ‚ç‚¹ï¼Œå¯åŠ¨å¤åˆ¶åï¼Œå‡ºç°1032é”™è¯¯ï¼ˆè¡Œä¸å­˜åœ¨ï¼‰ã€‚ç»æ’æŸ¥å‘ç°ï¼ŒMySQL 5.7.38çš„mysqldumpå¤‡ä»½æ–‡ä»¶å†…éƒ¨å­˜åœ¨é€»è¾‘çŸ›ç›¾ï¼šå…¶è®°å½•çš„èµ·å§‹å¤åˆ¶ä½ç½®ä¸GTIDé›†å­˜åœ¨æ—¶é—´å·®ï¼Œå¯¼è‡´ä½¿ç”¨<code>MASTER_AUTO_POSITION=1</code>é…ç½®ä»èŠ‚ç‚¹æ—¶ï¼Œä¼šä¸¢å¤±å¤‡ä»½æœŸé—´çš„æ•°æ®ã€‚è€Œmysqldump5.7.36ä¹‹å‰å’Œmysqldump8.0.31ä¹‹åçš„ç‰ˆæœ¬ä¸å­˜åœ¨æ­¤é—®é¢˜ã€‚</p>
<p>æœ¬æ–‡è®°å½•å®Œæ•´çš„å¤ç°ã€åˆ†æå’Œè§£å†³æ–¹æ¡ˆã€‚</p>
<h3 data-id="heading-2">èƒŒæ™¯</h3>
<p>æŸä¸šåŠ¡ç³»ç»Ÿä½¿ç”¨çš„æ˜¯MySQL 5.7.38ï¼Œè®¡åˆ’å°†æ•°æ®åº“æ›¿æ¢ä¸ºå›½äº§æ•°æ®åº“GreatSQLï¼Œä½¿ç”¨mysqldumpä»MySQL 5.7.38å¤‡ä»½äº†ä¸€ä»½æ•°æ®ï¼Œå¯¼å…¥åˆ°GreatSQLä¹‹åï¼Œå°†GreatSQLé…ç½®ä¸ºMySQL 5.7.38çš„ä»åº“ï¼Œç³»ç»Ÿè¿è¡Œä¸€æ®µæ—¶é—´åï¼Œ<code>SHOW SLAVE STATUS</code>æ£€æŸ¥å¤åˆ¶çŠ¶æ€ï¼Œå‘ç°å¤åˆ¶é“¾è·¯æŠ¥é”™ï¼Œ Last_Errno: 1032ã€‚</p>
<p>æ­å»ºäº†MySQL 5.7.38å’ŒGreatSQLå¯¹è¯¥åœºæ™¯è¿›è¡Œäº†æ¨¡æ‹Ÿã€‚</p>
<h3 data-id="heading-3">å®‰è£…MySQL 5.7.38</h3>
<pre><code class="hljs language-Bash" lang="Bash">$ <span class="hljs-built_in">cd</span> /gdb/mysqldb
$ tar -xvf  mysql-5.7.38-linux-glibc2.12-x86_64.tar.gz
$ <span class="hljs-built_in">mv</span> mysql-5.7.38-linux-glibc2.12-x86_64 mysql-5.7.38
$ <span class="hljs-built_in">mkdir</span> -p /gdb/mysqldb/5738/{data,tmp,binlog}
<span class="hljs-variable">$chown</span> -R  greatsql:greatsql   /gdb/mysqldb
$ ./mysqld --initialize-insecure    --user=greatsql --basedir=/gdb/mysqldb/mysql-5.7.38 --datadir=/gdb/mysqldb/5738/data
...<span class="hljs-comment">#è¾“å‡ºçœç•¥</span>
password ! Please consider switching off the --initialize-insecure option.
</code></pre>
<h4 data-id="heading-4">åˆ›å»ºç”¨æˆ·</h4>
<p>åœ¨MySQLä¸­åˆ›å»ºç”¨æˆ·ï¼š</p>
<pre><code class="hljs language-Bash" lang="Bash">mysql&gt;CREATE USER admin@<span class="hljs-string">'%'</span> IDENTIFIED WITH MYSQL_NATIVE_PASSWORD BY <span class="hljs-string">'admin'</span> ;
mysql&gt;GRANT ALL PRIVILEGES ON . TO admin@<span class="hljs-string">'%'</span>  WITH GRANT OPTION;
mysql&gt;FLUSH PRIVILEGES;
</code></pre>
<h4 data-id="heading-5">åˆ›å»ºæµ‹è¯•åº“åŠæµ‹è¯•è¡¨</h4>
<p>åœ¨MySQLä¸­åˆ›å»ºæµ‹è¯•åº“åŠæµ‹è¯•è¡¨ï¼š</p>
<pre><code class="hljs language-Bash" lang="Bash">mysql&gt;CREATE DATABASE sbtest;
Query OK, 1 row affected (0.01 sec)
mysql&gt;USE sbtest;
Reading table information <span class="hljs-keyword">for</span> completion of table and column names
You can turn off this feature to get a quicker startup with -A
Database changed
mysql&gt;CREATE TABLE t_keep_alive( name varchar(20),  create_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP,update_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP);
Query OK, 0 rows affected (0.08 sec)
</code></pre>
<h4 data-id="heading-6">ä½¿ç”¨ Sysbench æ„é€ æ•°æ®</h4>
<pre><code class="hljs language-Bash" lang="Bash">$ sysbench /usr/local/share/sysbench/oltp_read_write.lua  --mysql-db=sbtest --mysql-host=192.168.18.2 --mysql-port=5738 --mysql-user=admin  --mysql-password=admin --tables=3 --table_size=3000000 --report-interval=2 --threads=4 --db-driver=mysql --skip-trx=off --db-ps-mode=<span class="hljs-built_in">disable</span> --create-secondary=off --time=0 --simple-ranges=0 --sum-ranges=0 --order-ranges=0 --distinct-ranges=0 --mysql-ignore-errors=9001,9002,9000,1062 prepare
WARNING: Both event and time limits are disabled, running an endless <span class="hljs-built_in">test</span>
sysbench 1.1.0-df89d34 (using bundled LuaJIT 2.1.0-beta3)

Initializing worker threads...

Creating table <span class="hljs-string">'sbtest2'</span>...
Creating table <span class="hljs-string">'sbtest1'</span>...
Creating table <span class="hljs-string">'sbtest3'</span>...
Inserting 3000000 records into <span class="hljs-string">'sbtest2'</span>
Inserting 3000000 records into <span class="hljs-string">'sbtest3'</span>
Inserting 3000000 records into <span class="hljs-string">'sbtest1'</span>
</code></pre>
<h4 data-id="heading-7">æ’å…¥æ•°æ®è„šæœ¬</h4>
<p>è®¡åˆ’åœ¨å¤‡ä»½æœŸé—´ï¼Œæ¯ç§’æ’å…¥ä¸€æ¡æµ‹è¯•æ•°æ®</p>
<pre><code class="hljs language-Bash" lang="Bash">$ more t_keep.sh 
<span class="hljs-comment">#!/bin/bash</span>
USER=<span class="hljs-string">"admin"</span>
PASSWORD=<span class="hljs-string">"admin"</span>
HOST=<span class="hljs-string">"192.168.18.2"</span>
PORT=5738
DBNAME=<span class="hljs-string">"sbtest"</span>
<span class="hljs-keyword">while</span> <span class="hljs-literal">true</span> 
<span class="hljs-keyword">do</span>
  /gdb/mysqldb/mysql-5.7.38/bin/mysql -u<span class="hljs-string">"<span class="hljs-variable">$USER</span>"</span> -p<span class="hljs-string">"<span class="hljs-variable">$PASSWORD</span>"</span> -h<span class="hljs-string">"<span class="hljs-variable">$HOST</span>"</span> -P<span class="hljs-string">"<span class="hljs-variable">$PORT</span>"</span> <span class="hljs-string">"<span class="hljs-variable">$DBNAME</span>"</span>  -e <span class="hljs-string">"INSERT INTO t_keep_alive(name) SELECT SUBSTRING(UUID(), 1, 8) ;SELECT sleep(1);"</span>
<span class="hljs-keyword">done</span>
</code></pre>
<p>GTIDä¿¡æ¯</p>
<pre><code class="hljs language-Bash" lang="Bash">sysbench æ’å…¥æ•°æ®åï¼š

mysql&gt;SHOW MASTER STATUS;
+---------------+----+---------------------------------------------+
| File          | Position  | Binlog_Do_DB | Binlog_Ignore_DB | Executed_Gtid_Set |
+---------------+--+---------------------------------------------+
| binlog.000004 | 643592650 |    |  | e9ceeaef-ed3d-11f0-893c-00163ed468c9:1-3366 |
+---------------+---+---------------------------------------------+
1 row <span class="hljs-keyword">in</span> <span class="hljs-built_in">set</span> (0.00 sec)

å¤‡ä»½å®Œæˆï¼š

mysql&gt;SHOW MASTER STATUS;
+---------------+-----------+----+---------------------------------------------+
| File          | Position  | Binlog_Do_DB | Binlog_Ignore_DB | Executed_Gtid_Set|
+---------------+------+---------------------------------------------+
| binlog.000004 | 643622680 |   | | e9ceeaef-ed3d-11f0-893c-00163ed468c9:1-3471 |
+---------------+-----------+---+---------------------------------------------+
1 row <span class="hljs-keyword">in</span> <span class="hljs-built_in">set</span> (0.00 sec)
</code></pre>
<h4 data-id="heading-8">å¼€å§‹æ’å…¥æ•°æ®</h4>
<pre><code class="hljs language-Bash" lang="Bash">$ bash t_keep.sh 
mysql: [Warning] Using a password on the <span class="hljs-built_in">command</span> line interface can be insecure.
+----------+
| <span class="hljs-built_in">sleep</span>(1) |
+----------+
|        0 |
+----------+
mysql: [Warning] Using a password on the <span class="hljs-built_in">command</span> line interface can be insecure.
+----------+
| <span class="hljs-built_in">sleep</span>(1) |
+----------+
|        0 |
+----------+
</code></pre>
<h4 data-id="heading-9">å¤‡ä»½æ•°æ®</h4>
<pre><code class="hljs language-Shell" lang="Shell">/gdb/mysqldb/mysql-5.7.38/bin/mysqldump -uadmin -h192.168.18.2 -P5738 -padmin --single-transaction --set-gtid-purged=ON --master-data=2 --routines --events --triggers --databases sbtest    --force &gt; /tmp/sbtest.sql
</code></pre>
<h4 data-id="heading-10">åœæ­¢æ•°æ®å†™å…¥</h4>
<p>å¤‡ä»½å®Œæˆåï¼Œkill æ‰å†™å…¥æ•°æ®çš„t_keep.sh è¿›ç¨‹</p>
<h4 data-id="heading-11">GreatSQLå¯¼å…¥å¤‡ä»½æ–‡ä»¶</h4>
<pre><code class="hljs language-Bash" lang="Bash">$ <span class="hljs-built_in">du</span> -sh sbtest.sql 
1.7G    sbtest.sql

ç™»å½•GreatSQLæ•°æ®åº“ï¼Œå°†å¤‡ä»½æ–‡ä»¶å¯¼å…¥åˆ°GreatSQLæ•°æ®åº“
GreatSQL&gt;SOURCE /tmp/sbtest.sql;
</code></pre>
<h3 data-id="heading-12">åŸºäºGTIDæ¨¡å¼é…ç½®ä»åº“</h3>
<p>å°†GreatSQLé…ç½®ä¸ºåŸºäºGTIDæ¨¡å¼çš„MySQLä»åº“</p>
<pre><code class="hljs language-Bash" lang="Bash">GreatSQL&gt;CHANGE MASTER TO MASTER_HOST=<span class="hljs-string">'192.168.18.2'</span>,MASTER_USER=<span class="hljs-string">"ADMIN"</span>,MASTER_PASSWORD=<span class="hljs-string">'ADMIN'</span>,MASTER_PORT=5738,MASTER_AUTO_POSITION=1;
Query OK, 0 rows affected, 2 warnings (0.02 sec)

GreatSQL&gt;SHOW MASTER STATUS;
+---------------+--+---------------------------------------------+
| File          | Position | Binlog_Do_DB | Binlog_Ignore_DB | Executed_Gtid_Set                           |
+---------------+--+---------------------------------------------+
| binlog.000001 |      154 |   |   | e9ceeaef-ed3d-11f0-893c-00163ed468c9:1-3466 |
+---------------+--+---------------------------------------------+
1 row <span class="hljs-keyword">in</span> <span class="hljs-built_in">set</span> (0.00 sec)

GreatSQL&gt;START SLAVE;
Query OK, 0 rows affected (0.00 sec)
</code></pre>
<h3 data-id="heading-13">ä¸»ä»æ•°æ®å¯¹æ¯”</h3>
<p>gtidä¿¡æ¯å¯¹æ¯”ï¼šå¯¹æ¯”ä¸»åº“å’Œä»åº“çš„gtidä¿¡æ¯ï¼Œä¸¤ä¸ªåº“æ˜¯ä¸€è‡´çš„ï¼Œéƒ½æ˜¯1-3537</p>
<pre><code class="hljs language-Bash" lang="Bash">ä¸»åº“:
mysql&gt;SHOW MASTER STATUS;
+---------------+------------------+---------------------------------------------+
| File          | Position  | Binlog_Do_DB | Binlog_Ignore_DB | Executed_Gtid_Set |
+---------------+------------+---------------------------------------------+
| binlog.000004 | 643641556 |   |   | e9ceeaef-ed3d-11f0-893c-00163ed468c9:1-3537 |
+---------------+-----+---------------------------------------------+
1 row <span class="hljs-keyword">in</span> <span class="hljs-built_in">set</span> (0.00 sec)
ä»åº“:
GreatSQL&gt;SHOW MASTER STATUS;
+---------------+---+------------------+---------------------------------------------+
| File          | Position | Binlog_Do_DB | Binlog_Ignore_DB | Executed_Gtid_Set                           |
+---------------+--+------------------+---------------------------------------------+
| binlog.000001 |   154 |      |    | e9ceeaef-ed3d-11f0-893c-00163ed468c9:1-3537 |
+---------------+---+------------------+---------------------------------------------+
1 row <span class="hljs-keyword">in</span> <span class="hljs-built_in">set</span> (0.00 sec)
</code></pre>
<p>è¡¨æ•°æ®å¯¹æ¯”ï¼št_keep_aliveè¡¨æ•°æ®ä¸ä¸€è‡´ï¼Œä¸»åº“æ¯”ä»åº“å¤š</p>
<pre><code class="hljs language-Bash" lang="Bash">ä¸»åº“:
mysql&gt;SELECT count(*) FROM t_keep_alive;
+----------+
| count(*) |
+----------+
|      171 |
+----------+
1 row <span class="hljs-keyword">in</span> <span class="hljs-built_in">set</span> (0.01 sec)

ä»åº“:
GreatSQL&gt;SELECT count(*) FROM t_keep_alive;
+----------+
| count(*) |
+----------+
|      120 |
+----------+
1 row <span class="hljs-keyword">in</span> <span class="hljs-built_in">set</span> (0.01 sec)

å·®å¼‚æ•°æ®åˆ†æï¼šä»åº“11:10:36åˆ°11:11:37ä¹‹é—´ï¼Œæ²¡æœ‰æ•°æ®å†™å…¥ä»åº“ã€‚åœ¨ä¸»åº“æ›´æ–°å¤‡ä»½æœŸé—´äº§ç”Ÿçš„æ•°æ®ï¼Œ
ä»åº“å°±ä¼šå‡ºç°1032é”™è¯¯ï¼ŒSQLçº¿ç¨‹çŠ¶æ€å˜ä¸ºNO
| 41f01fcf | 2026-01-12 11:10:33 | 2026-01-12 11:10:33 |
| 428b22d3 | 2026-01-12 11:10:34 | 2026-01-12 11:10:34 |
| 43266c4c | 2026-01-12 11:10:35 | 2026-01-12 11:10:35 |
| 43c105c5 | 2026-01-12 11:10:36 | 2026-01-12 11:10:36 |

| 68155846 | 2026-01-12 11:11:37 | 2026-01-12 11:11:37 |
| 68b0b70c | 2026-01-12 11:11:38 | 2026-01-12 11:11:38 |
| 694b88d8 | 2026-01-12 11:11:39 | 2026-01-12 11:11:39 |
</code></pre>
<h3 data-id="heading-14">åŸºäºLOG_FILE+LOG_POSæ­å»ºä¸»ä»</h3>
<pre><code class="hljs language-Bash" lang="Bash">GreatSQL&gt; STOP SLAVE;
Query OK, 0 rows affected (0.01 sec)

GreatSQL&gt; RESET SLAVE all;
Query OK, 0 rows affected (0.01 sec)

GreatSQL&gt; DROP DATABASE sbtest;
Query OK, 4 rows affected (0.92 sec)

GreatSQL&gt; RESET MASTER;
Query OK, 0 rows affected (0.01 sec)

GreatSQL&gt; SOURCE /tmp/sbtest.sql;


GreatSQL&gt; SHOW MASTER STATUS;
+---------------+------+---------------------------------------------+
| File          | Position | Binlog_Do_DB | Binlog_Ignore_DB | Executed_Gtid_Set|
+---------------+------+---------------------------------------------+
| binlog.000001 |      154 |   |  | e9ceeaef-ed3d-11f0-893c-00163ed468c9:1-3466 |
+---------------+------+---------------------------------------------+
1 row <span class="hljs-keyword">in</span> <span class="hljs-built_in">set</span> (0.00 sec)

GreatSQL&gt; SELECT *  FROM  t_keep_alive;
...........
| 43c105c5 | 2026-01-12 11:10:36 | 2026-01-12 11:10:36 |
+----------+---------------------+---------------------+
49 rows <span class="hljs-keyword">in</span> <span class="hljs-built_in">set</span> (0.00 sec)

GreatSQL&gt; RESET MASTER;
Query OK, 0 rows affected (0.02 sec)

GreatSQL&gt; SHOW MASTER STATUS;
+---------------+----------+--------------+------------------+-------------------+
| File          | Position | Binlog_Do_DB | Binlog_Ignore_DB | Executed_Gtid_Set |
+---------------+----------+--------------+------------------+-------------------+
| binlog.000001 |      154 |              |                  |                   |
+---------------+----------+--------------+------------------+-------------------+
1 row <span class="hljs-keyword">in</span> <span class="hljs-built_in">set</span> (0.00 sec)

GreatSQL&gt; CHANGE MASTER   TO MASTER_HOST=<span class="hljs-string">'192.168.18.2'</span>,MASTER_USER=<span class="hljs-string">"ADMIN"</span>,MASTER_PASSWORD=<span class="hljs-string">'ADMIN'</span>,MASTER_PORT=5738,MASTER_LOG_FILE=<span class="hljs-string">'BINLOG.000004'</span>, MASTER_LOG_POS=643606664;

Query OK, 0 rows affected, 2 warnings (0.02 sec)

GreatSQL&gt; START SLAVE;
Query OK, 0 rows affected (0.00 sec)

GreatSQL&gt; SELECT * FROM t_keep_alive;
........
| 92abaf1c | 2026-01-12 11:12:48 | 2026-01-12 11:12:48 |
+----------+---------------------+---------------------+
171 rows <span class="hljs-keyword">in</span> <span class="hljs-built_in">set</span> (0.00 sec)


GreatSQL&gt; SHOW MASTER STATUS;
+---------------+--+------------------------------------------------+
| File          | Position | Binlog_Do_DB | Binlog_Ignore_DB | Executed_Gtid_Set    |
+---------------+--+------------------------------------------------+
| binlog.000001 |      154 |    |  | e9ceeaef-ed3d-11f0-893c-00163ed468c9:3416-3537 |
+---------------+--+------------------------------------------------+
1 row <span class="hljs-keyword">in</span> <span class="hljs-built_in">set</span> (0.00 sec)
</code></pre>
<ul>
<li>é€šè¿‡<code>LOG_FILEã€LOG_POS</code>é…ç½®ä¸»ä»åŒæ­¥ï¼ŒgtidåŒæ­¥èŒƒå›´ä¸º:3416-3537,</li>
<li>é€šè¿‡<code>master_auto_position</code>é…ç½®ä¸»ä»åŒæ­¥ï¼ŒgtidåŒæ­¥èŒƒå›´ä¸º:3467-3537ã€‚</li>
</ul>
<h3 data-id="heading-15">é—®é¢˜åˆ†æ</h3>
<p>æŸ¥çœ‹å¤‡ä»½æ–‡ä»¶</p>
<pre><code class="hljs language-Bash" lang="Bash">--
-- Position to start replication or point-in-time recovery from
--
æ–‡ä»¶çš„å¼€å¤´éƒ¨åˆ†
-- CHANGE MASTER TO MASTER_LOG_FILE=<span class="hljs-string">'binlog.000004'</span>, MASTER_LOG_POS=643606664;
--
-- Current Database: `sbtest`
--
CREATE DATABASE /*!32312 IF NOT EXISTS*/ `sbtest` /*!40100 DEFAULT CHARACTER SET utf8 */;

USE `sbtest`;

--
-- Table structure <span class="hljs-keyword">for</span> table `sbtest1`

....... ç•¥

UNLOCK TABLES;
--
-- Dumping events <span class="hljs-keyword">for</span> database <span class="hljs-string">'sbtest'</span>
--

--
-- Dumping routines <span class="hljs-keyword">for</span> database <span class="hljs-string">'sbtest'</span>
--

--
-- GTID state at the end of the backup 
--
-- æ–‡ä»¶ç»“å°¾éƒ¨åˆ†
SET @@GLOBAL.GTID_PURGED=<span class="hljs-string">'e9ceeaef-ed3d-11f0-893c-00163ed468c9:1-3466'</span>;
/*!40103 SET TIME_ZONE=@OLD_TIME_ZONE */;

/*!40101 SET SQL_MODE=@OLD_SQL_MODE */;
/*!40014 SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS */;
/*!40014 SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS */;
/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
/*!40111 SET SQL_NOTES=@OLD_SQL_NOTES */;

-- Dump completed on 2026-01-12 11:11:36
SET @@GLOBAL.GTID_PURGED=<span class="hljs-string">'e9ceeaef-ed3d-11f0-893c-00163ed468c9:1-3466'</span>;
</code></pre>
<p>å¤‡ä»½æ–‡ä»¶è®¤ä¸º1-3466è¿™äº›äº‹åŠ¡çš„æ•°æ®å·²ç»å†™å…¥åˆ°æ•°æ®åº“ã€‚</p>
<p>å®é™…æƒ…å†µæƒ…å†µå‘¢ï¼Ÿ</p>
<p>è§£æå¤‡ä»½æ–‡ä»¶LOG_FILEã€LOG_POSç›¸é‚»çš„æ•°æ®ã€‚</p>
<p>è§£æbinlog.000004 ï¼ŒMASTER_LOG_POS=643606664åçš„ä¸‹ä¸€ä¸ªäº‹åŠ¡æ˜¯<code>'e9ceeaef-ed3d-11f0-893c-00163ed468c9:3416'</code></p>
<pre><code class="hljs language-Bash" lang="Bash">SET @@SESSION.GTID_NEXT= <span class="hljs-string">'e9ceeaef-ed3d-11f0-893c-00163ed468c9:3416'</span>/*!*/;
<span class="hljs-comment"># at 643606729</span>
<span class="hljs-comment">#260112 11:10:37 server id 425738  end_log_pos 643606803 CRC32 0x7f5398a1</span>
</code></pre>
<p><code>LOG_FILEã€LOG_POS</code>  å¯¹åº”çš„ä¸‹ä¸€ä¸ªäº‹åŠ¡æ˜¯'e9ceeaef-ed3d-11f0-893c-00163ed468c9:3416'ï¼Œè¿™ç§åŒæ­¥æ–¹å¼æ˜¯ä»3416å¼€å§‹åŒæ­¥æ•°æ®ã€‚</p>
<p>è€Œé€šè¿‡MASTER_AUTO_POSITION=1çš„æ–¹å¼åŒæ­¥æ•°æ®ï¼Œç”±äºå¤‡ä»½æ–‡ä»¶æœ€åæ˜¯</p>
<p><code>SET @@GLOBAL.GTID_PURGED='e9ceeaef-ed3d-11f0-893c-00163ed468c9:1-3466';</code> (MySQL 5.7.38çš„mysqldumpåœ¨å¤‡ä»½å®Œæˆæ—¶æ‰è·å–gtidä¿¡æ¯) ï¼Œè¿™æ¡è¯­å¥å†™å…¥æ•°æ®åº“åï¼Œæ•°æ®åº“è®¤ä¸º<code>1-3466</code>çš„æ•°æ®å·²ç»å†™å…¥åˆ°æ•°æ®åº“äº†ï¼Œè¿™äº›æ•°æ®ä¸éœ€è¦è¿›è¡ŒåŒæ­¥ã€‚</p>
<p>é…ç½®MASTER_AUTO_POSITION=1åï¼Œä»3467å¼€å§‹åŒæ­¥æ–°çš„æ•°æ®ã€‚ä¸¤ç§åŒæ­¥æ–¹å¼å·®å¼‚å°±æ˜¯å¤‡ä»½æœŸé—´äº§ç”Ÿçš„51æ¡æ•°æ®(3467-3416=51 )ï¼Œåœ¨ä¸»åº“UPDATEå¤‡ä»½æœŸé—´äº§ç”Ÿçš„æ•°æ®ï¼Œä»åº“å°±ä¼šå‡ºç°1032é”™è¯¯ï¼Œå¯¼è‡´ä¸»ä»å¤åˆ¶é“¾è·¯å¤±è´¥ã€‚</p>
<h3 data-id="heading-16">é—®é¢˜æ€»ç»“</h3>
<p>1ã€ä½¿ç”¨MySQL 5.7.38çš„mysqldumpè¿›è¡Œæ•°æ®å¤‡ä»½ï¼Œå¤‡ä»½æ•°æ®å¯¼å…¥ä»åº“ï¼Œé€šè¿‡MASTER_AUTO_POSITION=1é…ç½®ä¸»ä»åï¼Œä¸»ä»æ•°æ®åº“æ•°æ®ä¸ä¸€è‡´ï¼Œä»åº“å¼€å§‹ä»å¤‡ä»½å®Œæˆæ—¶ç”ŸæˆGTIDä¿¡æ¯å¼€å§‹åŒæ­¥ï¼Œä¸»åº“å¤‡ä»½æœŸé—´äº§ç”Ÿçš„æ•°æ®æ²¡æœ‰åŒæ­¥åˆ°ä»åº“ã€‚å¤‡ä»½å‚æ•°<code>--single-transaction</code>åœ¨å¤‡ä»½å¼€å§‹å‰,å…ˆæ‰§è¡Œ<code>START TRANSACTION</code>å‘½ä»¤,ä»¥æ­¤æ¥è·å¾—å¤‡ä»½çš„ä¸€è‡´æ€§ï¼Œå¤‡ä»½ç¨‹åºåº”è¯¥è·å–æ­¤æ—¶çš„GTIDä¿¡æ¯ã€‚</p>
<p>2ã€é€šè¿‡LOG_FILEã€LOG_POSæ–¹å¼æ­å»ºä»åº“å¯ä»¥æ­£å¸¸è¿›è¡Œä¸»ä»æ•°æ®åŒæ­¥ã€‚</p>
<p>3ã€ä½¿ç”¨MySQL 5.7.30ã€MySQL 8.0.32ã€GreatSQL8.0.32 çš„mysqldumpç¨‹åºè¿›è¡Œå¤‡ä»½ï¼Œç¨‹åºè·å–çš„LOG_FILEã€LOG_POSå’ŒGTIDä¿¡æ¯éƒ½åœ¨å¤‡ä»½æ–‡ä»¶å¤´è®°å½•ï¼Œè¿™ä¸¤è€…å¯¹åº”çš„æ—¥å¿—æ–‡ä»¶ä½ç½®æ˜¯ä¸€æ ·çš„ï¼Œä½¿ç”¨GTIDæ­å»ºä¸»ä»åï¼Œæ•°æ®æ˜¯ä¸€è‡´çš„ã€‚MySQL 5.7.38çš„mysqldumpç¨‹åºMASTER_LOG_FILEå’ŒMASTER_LOG_POSåœ¨å¤‡ä»½æ–‡ä»¶å¤´ï¼ŒGTID_PURGEDåœ¨æ–‡ä»¶å°¾ã€‚</p>
<pre><code class="hljs language-Bash" lang="Bash">ç”¨ MySQL 5.7.30ã€ MySQL 8.0.32ã€GreatSQL8.0.32 è¿›è¡Œå¤‡ä»½æµ‹è¯•ï¼Œ å¤‡ä»½çš„æ—¶å€™GTIDå’Œæ–‡ä»¶ç‚¹ä½éƒ½åœ¨å¤‡ä»½æ–‡ä»¶å¤´
SET @@GLOBAL.GTID_PURGED=<span class="hljs-string">'e9ceeaef-ed3d-11f0-893c-00163ed468c9:1-3537'</span>;
-- Position to start replication or point-in-time recovery from
--
-- CHANGE MASTER TO MASTER_LOG_FILE=<span class="hljs-string">'binlog.000004'</span>, MASTER_LOG_POS=643641556;
</code></pre>
<p>4ã€ç»è¿‡æµ‹è¯•éªŒè¯ï¼Œmysqldump5.7.36ä¹‹å‰å’Œmysqldump8.0.31ä¹‹åçš„ç‰ˆæœ¬ä¸å­˜åœ¨æ­¤é—®é¢˜ã€‚</p>
<h3 data-id="heading-17">å‚è€ƒæ–‡ç« </h3>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fcloud.tencent.com%2Fdeveloper%2Farticle%2F1915277%3FshareByChannel%3Dlink" target="_blank" title="https://cloud.tencent.com/developer/article/1915277?shareByChannel=link" ref="nofollow noopener noreferrer">cloud.tencent.com/developer/aâ€¦</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fbugs.mysql.com%2Fbug.php%3Fid%3D105761" target="_blank" title="https://bugs.mysql.com/bug.php?id=105761" ref="nofollow noopener noreferrer">bugs.mysql.com/bug.php?id=â€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åˆ«å†æŠ˜è…¾é…ç½®äº†ï¼OpenCloudOSæ¨å‡ºOpenClawâ€œæé€Ÿç‰ˆâ€è„šæœ¬]]></title>    <link>https://juejin.cn/post/7605131777175404607</link>    <guid>https://juejin.cn/post/7605131777175404607</guid>    <pubDate>2026-02-11T07:33:37.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605131777175404607" data-draft-id="7605140481488322601" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åˆ«å†æŠ˜è…¾é…ç½®äº†ï¼OpenCloudOSæ¨å‡ºOpenClawâ€œæé€Ÿç‰ˆâ€è„šæœ¬"/> <meta itemprop="keywords" content="å¼€æº,æ“ä½œç³»ç»Ÿ"/> <meta itemprop="datePublished" content="2026-02-11T07:33:37.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="OpenCloudOS"/> <meta itemprop="url" content="https://juejin.cn/user/3584869265591367"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åˆ«å†æŠ˜è…¾é…ç½®äº†ï¼OpenCloudOSæ¨å‡ºOpenClawâ€œæé€Ÿç‰ˆâ€è„šæœ¬
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3584869265591367/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    OpenCloudOS
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-11T07:33:37.000Z" title="Wed Feb 11 2026 07:33:37 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">åˆ«å†æŠ˜è…¾é…ç½®äº†ï¼OpenCloudOSæ¨å‡ºOpenClawâ€œæé€Ÿç‰ˆâ€è„šæœ¬</h2>
<p>åœ¨ä¸Šç¯‡æ–‡ç« <a href="https://juejin.cn/post/7602252722372542515" target="_blank" title="https://juejin.cn/post/7602252722372542515">ä½ çš„ 7x24 â€œAI è¿ç»´åŒäº‹â€ï¼ŒOC 9 + OpenClaw éƒ¨ç½²åŠå®æˆ˜æŒ‡å—OpenClaw </a>ä¸­ï¼Œæˆ‘ä»¬ä»‹ç»äº†å¦‚ä½•åŸºäºOpenCloudOS 9 å®‰è£…é…ç½®OpenClawï¼Œå¹¶æ¥å…¥ä¼ä¸šå¾®ä¿¡ç­‰IMï¼Œè®©ä½ æœ€ç»ˆæ‹¥æœ‰ä¸€ä½ 7x24 çš„â€œAIå…¨èƒ½åŠ©ç†â€ã€‚ä¸€äº›ç”¨æˆ·çœ‹å®Œæ–‡ç« åè·ƒè·ƒæ¬²è¯•ï¼Œä½†ä¸€ä¸Šæ‰‹å®æ“ï¼Œå´è¢«ç¹ççš„é…ç½®åŠé€€äº†ï¼š</p>
<p>â—Â â€œNode.js ç‰ˆæœ¬ä¸å¯¹ï¼ŒæŠ¥é”™äº†â€¦â€¦â€</p>
<p>â—Â â€œGitHub è¿ä¸ä¸Šï¼Œæ’ä»¶è£…ä¸ä¸‹æ¥â€¦â€¦â€</p>
<p>â—Â â€œæˆ‘æƒ³æ¥ä¼ä¸šå¾®ä¿¡ï¼Œæ€ä¹ˆè¿˜å¾—æ‰‹åŠ¨æ”¹é…ç½®æ–‡ä»¶ï¼Ÿâ€</p>
<p>å¤§å®¶çš„ç—›ç‚¹ï¼ŒOpenCloudOSç¤¾åŒºå¬åˆ°äº†ï¼</p>
<p>ä¸ºäº†è®©å¤§å®¶æŠŠç²¾åŠ›ä»â€œè£…ç¯å¢ƒâ€è½¬ç§»åˆ°â€œç”¨ AIâ€ä¸Šï¼Œå¸¦æ¥äº† OpenClaw x OpenCloudOS 2.0 éƒ¨ç½²æ–¹æ¡ˆ ã€‚è¿™ä¸€æ¬¡ï¼Œæˆ‘ä»¬æ¨å‡ºäº†ä¸€é”®å®‰è£…è„šæœ¬ï¼Œç”¨æˆ·åªè¦ä¸€æ¡å‘½ä»¤å°±èƒ½æé€Ÿä½“éªŒOpenClawã€‚</p>
<h4 data-id="heading-1">ä¸€ã€Â  æ–°ç‰ˆâ€œæé€Ÿéƒ¨ç½²è„šæœ¬â€åšäº†ä»€ä¹ˆï¼Ÿ</h4>
<ol>
<li>
<p>ç¯å¢ƒå…¨è‡ªåŠ¨é€‚é… ï¼šè‡ªåŠ¨æ£€æµ‹ç³»ç»Ÿç¯å¢ƒï¼Œå¸®ä½ æå®š Node.js 24 ç­‰æ‰€æœ‰åº•å±‚ä¾èµ–ï¼Œä¸å†æ‹…å¿ƒç‰ˆæœ¬å†²çªã€‚</p>
</li>
<li>
<p>å›½å†… IM åŸç”Ÿæ”¯æŒ ï¼šä¸å†éœ€è¦æ»¡ä¸–ç•Œæ‰¾æ’ä»¶ã€‚ ä¼ä¸šå¾®ä¿¡ã€QQã€é£ä¹¦ã€é’‰é’‰ ï¼Œä½ æƒ³ç”¨å“ªä¸ªï¼Œè„šæœ¬ç›´æ¥å¸®ä½ è£…å¥½ã€‚</p>
</li>
<li>
<p>ç½‘ç»œä¸æºä¼˜åŒ– ï¼šé’ˆå¯¹å›½å†…ç½‘ç»œç¯å¢ƒåšäº†æ·±åº¦é€‚é…ï¼Œä¸‹è½½æ›´ç¨³ã€é€Ÿåº¦æ›´å¿«ã€‚</p>
</li>
</ol>
<p>ç®€å•æ¥è¯´ï¼šä»¥å‰éœ€è¦ 30 åˆ†é’Ÿçš„æ‰‹å·¥æ“ä½œï¼Œç°åœ¨åªéœ€è¦ 1 åˆ†é’Ÿç­‰å¾…ã€‚</p>
<h4 data-id="heading-2">äºŒã€Â  æé€Ÿç‰ˆä¸Šæ‰‹æŒ‡å—</h4>
<h5 data-id="heading-3">2.1 å®‰è£… Openclaw åŠIMç›¸å…³æ’ä»¶</h5>
<h6 data-id="heading-4">åœºæ™¯Aï¼šæˆ‘å…¨éƒ½è¦ï¼ˆæ¨èï¼‰</h6>
<p>å¦‚æœä½ å¸Œæœ› OpenClaw èƒ½è¿æ¥ä¼ä¸šå¾®ä¿¡ã€QQã€é£ä¹¦ã€é’‰é’‰ç­‰æ‰€æœ‰å›½å†…ä¸»æµ IMï¼Œå¯ç›´æ¥è¿è¡Œå¦‚ä¸‹è„šæœ¬ã€‚</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># é»˜è®¤å®Œæ•´å®‰è£…æ‰€æœ‰å›½å†… IM æ’ä»¶</span>
curl -fsSL https://opencloudos.org/extra/deploy_openclaw.sh | bash
</code></pre>
<p>å¤‡æ³¨ï¼šå› ä¸€é”®å®‰è£…è„šæœ¬ä¼šæ‰§è¡Œè¾ƒå¤šä¾èµ–å¹¶å¯åŠ¨OpenClawå®‰è£…ï¼Œæ‰€ä»¥æ•´ä¸ªå®‰è£…è¿‡ç¨‹å¤§æ¦‚è€—æ—¶15-20minå·¦å³ï¼Œä¸­é€”è¯·ä¸è¦ç»ˆæ­¢æˆ–æ¨å‡ºã€‚</p>
<p>ä¸€é”®å®‰è£…è„šæœ¬ä»£ç è¯·è§ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2FOpenCloudOS%2Fweb-extra%2Fblob%2Fmaster%2Fscripts%2Fdeploy_opneclaw.sh" target="_blank" title="https://gitee.com/OpenCloudOS/web-extra/blob/master/scripts/deploy_opneclaw.sh" ref="nofollow noopener noreferrer">scripts/deploy_opneclaw.sh Â· OpenCloudOS/web-extra - Gitee.com</a></p>
<h6 data-id="heading-5">åœºæ™¯Bï¼šæˆ‘åªéœ€è¦ç‰¹å®šæ¸ é“</h6>
<p>å¦‚æœä½ åªæƒ³å®‰è£…æŸä¸ªæŒ‡å®šIMï¼ˆå¦‚ä¼ä¸šå¾®ä¿¡å’ŒQQï¼‰ï¼Œä¸æƒ³å®‰è£…å¤šä½™æ’ä»¶ï¼Œå¯ç›´æ¥è¿è¡Œå¦‚ä¸‹è„šæœ¬ã€‚å®‰è£…è€—æ—¶ï¼š5-10min</p>
<pre><code class="hljs language-perl" lang="perl"><span class="hljs-comment"># å®‰è£…æŒ‡å®šIMï¼ˆä¸‹æ–¹ä»¥åŒæ—¶å®‰è£…ä¼ä¸šå¾®ä¿¡å’ŒQQä¸ºä¾‹ï¼‰ï¼š</span>
curl -fsSL https:<span class="hljs-regexp">//</span>opencloudos.org/extra/deploy_openclaw.sh | bash -s -- --plugins wecom,<span class="hljs-keyword">qq</span>
</code></pre>
<h6 data-id="heading-6">åœºæ™¯Cï¼šçº¯å‡€ç‰ˆå®‰è£…</h6>
<p>å¦‚æœä½ åªéœ€è¦ OpenClaw çš„æ ¸å¿ƒåŠŸèƒ½ï¼ˆæ¯”å¦‚åªåœ¨ç»ˆç«¯ä½¿ç”¨ï¼Œæˆ–è€…é€šè¿‡ Web ç•Œé¢äº¤äº’ï¼‰ï¼Œä¸éœ€è¦è¿æ¥ä»»ä½•å›½å†…IMï¼Œå¯ç›´æ¥è¿è¡Œå¦‚ä¸‹è„šæœ¬ã€‚å®‰è£…è€—æ—¶ï¼š2-3min</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># è·³è¿‡æ‰€æœ‰ IM æ’ä»¶å®‰è£…ï¼š</span>
curl -fsSL https://opencloudos.org/extra/deploy_openclaw.sh | bash -s -- --skip-plugins
</code></pre>

<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ‰‹åŠ¨æ‰“å¼€äº¤äº’å‘½ä»¤</span>
openclaw onboard
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/59cee61f39bd43778974d0e3dfecb945~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT3BlbkNsb3VkT1M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771400017&amp;x-signature=Af7fVyHJcczKuH1AqNd5O5oVBl4%3D" alt="" loading="lazy"/></p>
<h5 data-id="heading-7">2.2 é…ç½® OpenClaw</h5>
<p>OpenClawé…ç½®æµç¨‹è¾ƒå¤šï¼ŒOpenCloudOSå·²åœ¨ä¸Šç¯‡å†…å®¹<a href="https://juejin.cn/post/7602252722372542515" target="_blank" title="https://juejin.cn/post/7602252722372542515">ä½ çš„ 7x24 â€œAI è¿ç»´åŒäº‹â€ï¼ŒOC 9 + OpenClaw éƒ¨ç½²åŠå®æˆ˜æŒ‡å—OpenClaw </a>è¿›è¡Œäº†è¯¦ç»†å±•ç¤ºï¼Œè¿™ç¯‡ä¸å†èµ˜è¿°ã€‚å”¯ä¸€ä¸åŒçš„æ˜¯ï¼Œå¦‚æ‚¨åœ¨2.1ç« èŠ‚ä¸­æ‰§è¡Œäº†æŒ‡å®šIMå®‰è£…ï¼ˆå¦‚ä¼ä¸šå¾®ä¿¡ã€é£ä¹¦ç­‰ï¼‰ï¼Œåˆ™ä¼šåœ¨IMé…ç½®ç¯èŠ‚çš„åˆ—è¡¨ä¸­ï¼Œçœ‹è§è¯¥å¯é€‰é¡¹ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/86bbb2dacc674cbbbde3a611deba431e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT3BlbkNsb3VkT1M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771400017&amp;x-signature=RvQbPmpBm%2BtTDZB%2FuGTLbdP%2BLyY%3D" alt="" loading="lazy"/></p>
<h5 data-id="heading-8">2.3 OpenClaw è¿è¡ŒçŠ¶æ€ç¡®è®¤</h5>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æŸ¥çœ‹openclawæ˜¯å¦åœ¨åå°è¿è¡Œ</span>
openclaw health
<span class="hljs-comment"># æŸ¥çœ‹æ¨¡å‹çŠ¶æ€ï¼Œæ˜¯å¦è¿ä¸Šäº†å¤§æ¨¡å‹</span>
openclaw models list
<span class="hljs-comment"># æŸ¥çœ‹èŠå¤©é€šé“,æ¯”å¦‚qqï¼Œä¼ä¸šå¾®ä¿¡ç­‰</span>
openclaw channels list
</code></pre>
<h4 data-id="heading-9">ä¸‰ã€Â  æ¥å…¥IMåŠå®é™…åº”ç”¨æ¼”ç¤º</h4>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†è¯¦è§£å¦‚ä½•é…ç½®ä¼ä¸šå¾®ä¿¡ã€QQã€é£ä¹¦ã€é’‰é’‰.</p>
<h5 data-id="heading-10">3.1 æ¥å…¥ä¼ä¸šå¾®ä¿¡</h5>
<p>OpenClaw åŸç”ŸåŸºæœ¬åªæ”¯æŒå›½å¤–ç¤¾äº¤è½¯ä»¶ï¼Œå¯ä»¥é€šè¿‡æ’ä»¶çš„æ–¹å¼æ¥æ”¯æŒå›½å†…çš„ç¤¾äº¤è½¯ä»¶ã€‚è¿™é‡Œæˆ‘ä»¬ä»¥ä¼ä¸šå¾®ä¿¡ä¸ºä¾‹ï¼Œæ¼”ç¤ºæ¥å…¥æ•™ç¨‹ã€‚</p>
<p>æ³¨æ„è¦æ¥å…¥ä¼ä¸šå¾®ä¿¡æœ‰ä¸¤ä¸ªæ¡ä»¶ï¼Œé¦–å…ˆä½ çš„clawdbotå®‰è£…åœ¨æœ‰å…¬ç½‘ipçš„æœºå™¨ä¸Šï¼Œ2.ä½ æ˜¯ä¼ä¸šç®¡ç†å‘˜èƒ½åˆ›å»ºAPPæˆ–è€…æœºå™¨äºº</p>
<pre><code class="hljs language-perl" lang="perl"><span class="hljs-comment"># æŸ¥çœ‹ä¼ä¸šå¾®ä¿¡æ’ä»¶è¿è¡Œæ˜¯å¦åŠ è½½</span>
openclaw plugins list | <span class="hljs-keyword">grep</span> -i wecom
</code></pre>
<p>ä¼ä¸šå¾®ä¿¡æ’ä»¶ä½¿ç”¨ç›®å½•</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.npmjs.com%2Fpackage%2F%40marshulll%2Fopenclaw-wecom" target="_blank" title="https://www.npmjs.com/package/@marshulll/openclaw-wecom" ref="nofollow noopener noreferrer">@marshulll/openclaw-wecom - npm</a></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a60947d20fc9461fb14ecfeb773d4f0c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT3BlbkNsb3VkT1M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771400017&amp;x-signature=bE6nUy1wF24TZe65Pp3f%2Fi9p%2BxQ%3D" alt="" loading="lazy"/></p>
<p>æ¥ä¸‹æ¥éœ€è¦åœ¨ä¼ä¸šå¾®ä¿¡é‡Œåˆ›å»ºä¸€ä¸ªä¸€ä¸ªåº”ç”¨ï¼Œè¿™ä¸€æ­¥éœ€è¦<a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.work.weixin.qq.com%2F" target="_blank" title="https://developer.work.weixin.qq.com/" ref="nofollow noopener noreferrer">é¦–é¡µ - ä¼ä¸šå¾®ä¿¡å¼€å‘è€…ä¸­å¿ƒ</a>å…ˆåœ¨è¿™é‡Œåˆ›å»ºä¸€ä¸ªåº”ç”¨ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2b98d4ab4d294cf9b1e66ab9c63a38a4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT3BlbkNsb3VkT1M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771400017&amp;x-signature=rqfjD5NagyGq%2Ffc6YE7LEcgVR5k%3D" alt="" loading="lazy"/></p>
<p>é€‰æ‹©ä¸ªäºº</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ed25de8b9f2a4ea89dbd4c15c1819d4b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT3BlbkNsb3VkT1M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771400017&amp;x-signature=UYD8PFwlj%2B00UV9ItyQ5RlQXEvc%3D" alt="" loading="lazy"/></p>
<p>é…ç½®ä¼ä¸šå¾®ä¿¡åº”ç”¨ç›¸å…³ä¿¡æ¯</p>
<p>é¦–å…ˆè·å–å¦‚ä¸‹ä¿¡æ¯</p>
<p>1.Â  ç™»å½• <a href="https://link.juejin.cn?target=https%3A%2F%2Fwork.weixin.qq.com%2Fwework_admin%2Fframe%23%2F" target="_blank" title="https://work.weixin.qq.com/wework_admin/frame#/" ref="nofollow noopener noreferrer">ä¼ä¸šå¾®ä¿¡ç®¡ç†å‘˜åå°</a></p>
<p>2.Â  åœ¨"æˆ‘çš„ä¼ä¸š"ä¸­æŸ¥çœ‹ ä¼ä¸šID (CorpID)</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/918a217c62dd4df884b05ec1ddaf2c74~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT3BlbkNsb3VkT1M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771400017&amp;x-signature=pPx2fykxVH0DmHfbtcFmlbtf3i8%3D" alt="" loading="lazy"/></p>
<p>3.Â  è¿›å…¥"åº”ç”¨ç®¡ç†" â†’ é€‰æ‹©æˆ–åˆ›å»ºåº”ç”¨</p>
<p>4.Â  åœ¨åº”ç”¨è¯¦æƒ…é¡µè·å–ï¼šAgentIdï¼šåº”ç”¨ID</p>
<p>Secret(corpsecret)ï¼šç‚¹å‡»"æŸ¥çœ‹Secret"è·å–</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/80a29177bc264565be057b56d1353322~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT3BlbkNsb3VkT1M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771400017&amp;x-signature=54zTgdMdhXwBVamqTC2Lw0E1EAo%3D" alt="" loading="lazy"/></p>
<p>5.Â  åœ¨"æ¥æ”¶æ¶ˆæ¯"è®¾ç½®ä¸­è·å–ï¼šTokenï¼šç‚¹å‡»"éšæœºè·å–"</p>
<p>EncodingAESKeyï¼šç‚¹å‡»"éšæœºè·å–"</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fba4fd92c53546fbab3cdeae6af201c1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT3BlbkNsb3VkT1M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771400017&amp;x-signature=DGshq9%2F4U3LAJcC6DkN0El1dcDA%3D" alt="" loading="lazy"/></p>
<p>ç„¶ååœ¨éƒ¨ç½²äº†openclawçš„æœåŠ¡å™¨ä¸Šè¾“å…¥å¦‚ä¸‹å‘½ä»¤ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino"># ä¼ä¸šå¾®ä¿¡åº”ç”¨é…ç½®ï¼ˆå¿…éœ€ï¼‰
# è¿™é‡Œé…ç½®çš„æ˜¯ app æ¨¡å¼ï¼Œå¯ä»¥å‚è€ƒæ’ä»¶ä½¿ç”¨æŒ‡å—æ¢æˆbotæˆ–è€…bothæ¨¡å¼
openclaw config set channels.wecom.mode <span class="hljs-string">"app"</span>
openclaw config set channels.wecom.defaultAccount <span class="hljs-string">"app"</span>
openclaw config set channels.wecom.accounts.app.mode <span class="hljs-string">"app"</span>
openclaw config set channels.wecom.accounts.app.webhookPath <span class="hljs-string">"/wecom/app"</span>
openclaw config set channels.wecom.accounts.app.corpId <span class="hljs-string">"ä½ ä¼ä¸šID"</span>
openclaw config set channels.wecom.accounts.app.corpSecret <span class="hljs-string">"åº”ç”¨secret"</span>
openclaw config set channels.wecom.accounts.app.agentId <span class="hljs-string">"ä½ çš„åº”ç”¨ID"</span>
openclaw config set channels.wecom.accounts.app.callbackToken <span class="hljs-string">"ä½ è®¾ç½®çš„åº”ç”¨çš„token"</span>
openclaw config set channels.wecom.accounts.app.callbackAesKey <span class="hljs-string">"ä½ è®¾ç½®çš„åº”ç”¨çš„aes-key"</span>
openclaw config set channels.wecom.enabled <span class="hljs-literal">true</span>
Â 
# è®¾ç½®openclawé“¾æ¥å…¬ç½‘
openclaw config set gateway.bind lan
Â 
openclaw gateway restart
# æŸ¥çœ‹ç›¸å…³é…ç½®
openclaw channels list
openclaw config get channels
</code></pre>
<p>é…ç½®åº”è¯¥æ˜¯è¿™æ ·çš„ï¼Œæˆ‘åªé…ç½®äº†appï¼Œå¦‚æœä½ é…ç½®äº†botä¼šæ›´ä¸°å¯Œä¸€ç‚¹</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/22db44a755dc4ba6a990cd6ce3d5b229~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT3BlbkNsb3VkT1M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771400017&amp;x-signature=%2FTW3eneTBV%2BaAZTEBe8y2LtEvo8%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dcb068bdf98f4c3587644bdf3b4f4936~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT3BlbkNsb3VkT1M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771400017&amp;x-signature=StAtBGQc3XZGRgGe1Jcx5OU7JWg%3D" alt="" loading="lazy"/></p>
<p>å¦‚ä¸Šæ‰§è¡Œåï¼Œå›åˆ°ä¼ä¸šå¾®ä¿¡appç®¡ç†ç•Œé¢ï¼Œç‚¹å‡»ä¿å­˜ï¼Œä¼ä¸šå¾®ä¿¡ä¼šå›å‘é€tokenå’ŒAESKeyå»å’ŒopenclawæœåŠ¡å™¨è¿›è¡ŒåŒ¹é…</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0ff889903fc7428c83e04288a11f26d9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT3BlbkNsb3VkT1M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771400017&amp;x-signature=8fV8U2spR9r0rah8j%2FRBFcDd5qU%3D" alt="" loading="lazy"/></p>
<p>å¦‚æœåŒ¹é…æˆåŠŸç•Œé¢å¦‚ä¸‹</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1e03dfe505834e2f87d1d301df1b9e39~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT3BlbkNsb3VkT1M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771400017&amp;x-signature=xZzvBWsg%2BUj23H7k24yNWy44bp8%3D" alt="" loading="lazy"/></p>
<p>åœ¨ä¼ä¸šå¾®ä¿¡é‡Œæ‰¾åˆ°ç›¸å…³åº”ç”¨ï¼Œç›´æ¥å’Œä»–èŠå¤©</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/244c734331ed422ea68812817b6ff163~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT3BlbkNsb3VkT1M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771400017&amp;x-signature=aaXyWSuf1R6eEL0zb26gpr8aseI%3D" alt="" loading="lazy"/></p>
<p>å¯ä»¥çœ‹åˆ° Clawdbot ç¡®å®è¯†åˆ«åˆ°äº†ç›¸å…³çš„ç”¨æˆ·å’Œè¯·æ±‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a4366701656a442f8161e4991de40ec5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT3BlbkNsb3VkT1M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771400017&amp;x-signature=c%2BD16XWAav9O3dOBbFrO%2BILvAvg%3D" alt="" loading="lazy"/></p>
<p>è®© ClawdBot åˆ›å»ºä¸€ä¸ªå®šæ—¶ä»»åŠ¡ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3e9d51e9dd7e435f9920fafd93269836~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT3BlbkNsb3VkT1M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771400017&amp;x-signature=YQ2BIBlQ6qq%2Fji3lmWZ58HcCgzw%3D" alt="" loading="lazy"/></p>
<p>å¯ä»¥çœ‹åˆ°ç¡®å®åˆ›å»ºå®Œæˆäº†ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/58f1c5bd53d04674919f35ab89ba4e58~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT3BlbkNsb3VkT1M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771400017&amp;x-signature=4Hp3pB9MltfG6oz1J3Ml26hb1vE%3D" alt="" loading="lazy"/></p>
<h5 data-id="heading-11">3.2 æ¥å…¥QQ</h5>
<p>QQæ›´æ–¹ä¾¿ä¸ªäººç”¨æˆ·ä½¿ç”¨ï¼ŒOpenCloudOSä¹Ÿæä¾›ä¸€ä¸ªæ¥å…¥QQçš„åœºæ™¯ã€‚</p>
<p>QQæ’ä»¶åœ°å€<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fsliverp%2Fqqbot%23" target="_blank" title="https://github.com/sliverp/qqbot#" ref="nofollow noopener noreferrer">github.com/sliverp/qqbâ€¦</a></p>
<pre><code class="hljs language-perl" lang="perl"><span class="hljs-comment"># ä¸€ä»¶å®‰è£…è„šæœ¬å·²ç»å®‰è£…äº†qqç›¸å…³æ’ä»¶</span>
<span class="hljs-comment"># æŸ¥çœ‹å½“å‰çš„è„šæœ¬</span>
openclaw plugins list | <span class="hljs-keyword">grep</span> <span class="hljs-keyword">qq</span>
Â 
<span class="hljs-comment"># å¦‚æœä½ å¼€å§‹æ²¡å®‰è£…qqæ’ä»¶å¯ä»¥æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤å®‰è£…</span>
openclaw plugins install https:<span class="hljs-regexp">//gi</span>thub.com/sliverp/qqbot.git
</code></pre>
<p>åˆ›å»ºQQæœºå™¨äººï¼š</p>
<p>è®¿é—® <a href="https://link.juejin.cn?target=https%3A%2F%2Fq.qq.com%2F" target="_blank" title="https://q.qq.com/" ref="nofollow noopener noreferrer">QQ å¼€æ”¾å¹³å°</a></p>
<p>åˆ›å»ºæœºå™¨äººåº”ç”¨</p>
<p>è·å– AppID å’Œ AppSecretï¼ˆClientSecretï¼‰</p>
<p>Token æ ¼å¼ä¸º AppID:AppSecretï¼Œä¾‹å¦‚ 102146862:Xjv7JVhu7KXkxANbp3HVjxCRgvAPeuAQ</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7e6638e9501f4934b8bec83e79bd4703~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT3BlbkNsb3VkT1M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771400017&amp;x-signature=abizBKkY8c8urykmO9OBYb3awpI%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9deea50cf82842bdb40dcd6d02fedc03~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT3BlbkNsb3VkT1M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771400017&amp;x-signature=nRIABmm4Hwx3%2BYVk4pruf9g4lrc%3D" alt="" loading="lazy"/></p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-meta">#æ–¹å¼ä¸€ï¼šäº¤äº’å¼é…ç½®,é€‰æ‹© qqbotï¼ŒæŒ‰æç¤ºè¾“å…¥ Token</span>
openclaw channels <span class="hljs-keyword">add</span>
<span class="hljs-meta">#æ–¹å¼äºŒï¼šå‘½ä»¤è¡Œé…ç½®</span>
openclaw channels <span class="hljs-keyword">add</span> --channel qqbot --token <span class="hljs-string">"AppID:AppSecret"</span>
<span class="hljs-meta"># ç¤ºä¾‹</span>
openclaw channels <span class="hljs-keyword">add</span> --channel qqbot --token <span class="hljs-string">"102146862:xxxxxxxx"</span>
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/eda00df79ee842bbb180604df074625f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT3BlbkNsb3VkT1M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771400017&amp;x-signature=07rANA3aIWylHuC%2FK1n4f5iXLJ4%3D" alt="" loading="lazy"/></p>
<p>é…ç½®å¥½ååœ¨qqå¼€å‘å¹³å°é‡Œçš„ï¼Œæ²™ç®±é…ç½®é‡Œå…ˆç‚¹å‡»æ·»åŠ æˆå‘˜å†æ‰«æäºŒç»´ç å°±èƒ½å’ŒClawdBotæ²Ÿé€šï¼Œå¹¶å®‰æ’ä»–å·¥ä½œäº†</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/82aaf4abf430488a8f2686aba728dabf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT3BlbkNsb3VkT1M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771400017&amp;x-signature=nYu6h3bEz9WrzBDY2Zn0Kgw5SDQ%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d2b7af988c8a4693a7a18d388668e6e9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT3BlbkNsb3VkT1M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771400017&amp;x-signature=%2FS3skvcwCJXe9hLlDc2MMZDnynA%3D" alt="" loading="lazy"/></p>
<h5 data-id="heading-12">3.3 æ¥å…¥é£ä¹¦</h5>
<p>é£ä¹¦æ’ä»¶åœ°å€</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fm1heng%2Fclawdbot-feishu" target="_blank" title="https://github.com/m1heng/clawdbot-feishu" ref="nofollow noopener noreferrer">GitHub - m1heng/clawdbot-feishu</a></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ä¸€ä»¶å®‰è£…è„šæœ¬å·²ç»å®‰è£…äº†é£ä¹¦ï¼ŒæŸ¥çœ‹é£ä¹¦æ’ä»¶è¿è¡Œæ˜¯å¦åŠ è½½</span>
openclaw channels list
<span class="hljs-comment"># å¦‚æœæ²¡çœ‹åˆ°é£ä¹¦æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤</span>
openclaw plugins <span class="hljs-built_in">enable</span> feishu
openclaw gateway restart
<span class="hljs-comment"># å¦‚æœæ²¡æœ‰å®‰è£…é£ä¹¦ï¼Œé‚£ä¹ˆæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤</span>
openclaw plugins install @m1heng-clawd/feishu
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b240752b5db047a99ff36519b0899d4b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT3BlbkNsb3VkT1M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771400017&amp;x-signature=gryXlBykO3T69GhsERMv75fGv7g%3D" alt="" loading="lazy"/></p>
<p>é£ä¹¦åº”ç”¨ï¼ˆæœºå™¨äººï¼‰é…ç½®</p>
<p>è¿›å…¥é£ä¹¦åº”ç”¨ä¸­å¿ƒï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fopen.feishu.cn%2Fapp" target="_blank" title="https://open.feishu.cn/app" ref="nofollow noopener noreferrer">å¼€å‘è€…åå° - é£ä¹¦å¼€æ”¾å¹³å°</a></p>
<p>åˆ›å»ºä¼ä¸šè‡ªå»ºåº”ç”¨</p>
<p>è·¯å¾„ï¼š åˆ›å»ºåº”ç”¨ â†’ ä¼ä¸šè‡ªå»ºåº”ç”¨</p>
<p>Â  åŸºç¡€ä¿¡æ¯æŒ‰æç¤ºå¡«å†™å³å¯ï¼ˆåç§°ã€æè¿°ç­‰ï¼‰ï¼Œå®Œæˆåè¿›å…¥åº”ç”¨è¯¦æƒ…é¡µã€‚</p>
<p>é…ç½®åº”ç”¨æƒé™</p>
<p>è¿›å…¥ æƒé™ç®¡ç†ï¼Œæ·»åŠ ä»¥ä¸‹æƒé™ï¼ˆæŒ‰æ’ä»¶æ–‡æ¡£è¦æ±‚ï¼‰ï¼š</p>
<p>å¿…è¦æƒé™</p>



































<table><thead><tr><th>æƒé™</th><th>èŒƒå›´</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>im:message</td><td>æ¶ˆæ¯</td><td>å‘é€å’Œæ¥æ”¶æ¶ˆæ¯</td></tr><tr><td>im:message.p2p_msg:readonly</td><td>ç§èŠ</td><td>è¯»å–å‘ç»™æœºå™¨äººçš„ç§èŠæ¶ˆæ¯</td></tr><tr><td>im:message.group_at_msg:readonly</td><td>ç¾¤èŠ</td><td>æ¥æ”¶ç¾¤å†… @æœºå™¨äºº çš„æ¶ˆæ¯</td></tr><tr><td>im:message:send_as_bot</td><td>å‘é€</td><td>ä»¥æœºå™¨äººèº«ä»½å‘é€æ¶ˆæ¯</td></tr><tr><td>im:resource</td><td>åª’ä½“</td><td>ä¸Šä¼ å’Œä¸‹è½½å›¾ç‰‡/æ–‡ä»¶</td></tr></tbody></table>
<p>å¯ç›´æ¥å¤åˆ¶å¦‚ä¸‹é…ç½®ç›´æ¥å¯¼å…¥</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"scopes"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"tenant"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
      <span class="hljs-string">"bitable:app:readonly"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"contact:user.base:readonly"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"docx:document"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"docx:document.block:convert"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"docx:document:create"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"docx:document:readonly"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"drive:drive"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"drive:drive:readonly"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"im:chat:readonly"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"im:message"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"im:message.group_at_msg:readonly"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"im:message.group_msg"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"im:message.p2p_msg:readonly"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"im:message:send_as_bot"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"im:resource"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"wiki:wiki:readonly"</span>
    <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"user"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
      <span class="hljs-string">"contact:contact.base:readonly"</span>
    <span class="hljs-punctuation">]</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d56a9f6691404dd8a7fd051a444050dc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT3BlbkNsb3VkT1M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771400017&amp;x-signature=1FYyDYWRp0Io2lQ8sEgVwUs4PMQ%3D" alt="" loading="lazy"/></p>
<p>è¿›å…¥å‡­è¯ä¸åŸºç¡€ä¿¡æ¯ é¡µé¢ï¼Œè®°å½• App ID / App Secret åŒæ­¥æ›´æ–°åˆ° openclaw é…ç½®ä¸­</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9c7ea8716448407dbfeb5df5f0203a2f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT3BlbkNsb3VkT1M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771400017&amp;x-signature=LKIeqcZFYvjbldOfNZradbRGpEE%3D" alt="" loading="lazy"/></p>
<pre><code class="hljs language-arduino" lang="arduino">openclaw config set channels.feishu.appId <span class="hljs-string">"ä½ çš„appid"</span>
openclaw config set channels.feishu.appSecret <span class="hljs-string">"ä½ çš„app_secret"</span>
openclaw config set channels.feishu.enabled <span class="hljs-literal">true</span>
Â 
openclaw gateway restart
# æŸ¥çœ‹ç›¸å…³é…ç½®
openclaw channels list
openclaw config get channels
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3a35948885324304b64ca7a843e351ee~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT3BlbkNsb3VkT1M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771400017&amp;x-signature=Of846DfMQwvLA5i%2BpDItW1N30%2BE%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a508318e96a148028e865b98e3f62005~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT3BlbkNsb3VkT1M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771400017&amp;x-signature=tloBYcEaDRCZyN1JQS8Dk57ZHQc%3D" alt="" loading="lazy"/></p>
<p>ç„¶åè¿›å…¥äº‹ä»¶ä¸å›è°ƒç•Œé¢ï¼Œè®¢é˜…æ–¹å¼é€‰æ‹©é•¿é“¾æ¥</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c49034c61b0d476ba5bf8e364c1ced59~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT3BlbkNsb3VkT1M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771400017&amp;x-signature=K49HIzVM3RT%2BZmhbLVCyH6c9qec%3D" alt="" loading="lazy"/></p>
<p>ä¹‹åç‚¹å‡»å³ä¸‹è§’çš„æ·»åŠ äº‹ä»¶</p>
<p>æ·»åŠ å¦‚ä¸‹äº‹ä»¶</p>






























<table><thead><tr><th>æƒé™</th><th>èŒƒå›´</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>im.message.receive_v1</td><td>æ¥æ”¶æ¶ˆæ¯ï¼ˆå¿…éœ€ï¼‰</td><td>å‘é€å’Œæ¥æ”¶æ¶ˆæ¯</td></tr><tr><td>im.message.message_read_v1</td><td>æ¶ˆæ¯å·²è¯»å›æ‰§</td><td>è¯»å–å‘ç»™æœºå™¨äººçš„ç§èŠæ¶ˆæ¯</td></tr><tr><td>im.chat.member.bot.added_v1</td><td>æœºå™¨äººè¿›ç¾¤</td><td>æ¥æ”¶ç¾¤å†… @æœºå™¨äºº çš„æ¶ˆæ¯</td></tr><tr><td>im.chat.member.bot.deleted_v1</td><td>æœºå™¨äººè¢«ç§»å‡ºç¾¤</td><td>ä»¥æœºå™¨äººèº«ä»½å‘é€æ¶ˆæ¯</td></tr></tbody></table>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b0154fecc5894c809c75af8e28675fc9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT3BlbkNsb3VkT1M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771400017&amp;x-signature=dzLqqxUEd7QlDr7GU9P%2FhRR3rSs%3D" alt="" loading="lazy"/></p>
<p>ä¹‹åç‚¹å‡»å‘å¸ƒ</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/059b0af7fe534e159cf0808c1ca32a2e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT3BlbkNsb3VkT1M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771400017&amp;x-signature=oScshJmJ8HBs2ySiN%2F0EgvbhmlE%3D" alt="" loading="lazy"/></p>
<p>åœ¨é£ä¹¦é‡Œç›´æ¥æœç´¢ ä½ æœºå™¨äººçš„åå­—å°±èƒ½å’Œä»–èŠå¤©äº†ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2b5a0984e094435e94d0711abfb534a5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT3BlbkNsb3VkT1M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771400017&amp;x-signature=3IKH%2FZZabz1qhw6TZVe78WadGLs%3D" alt="" loading="lazy"/></p>
<h5 data-id="heading-13">3.4 æ¥å…¥é’‰é’‰</h5>
<p>é’‰é’‰æ’ä»¶åœ°å€</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fsoimy%2Fclawdbot-channel-dingtalk.git" target="_blank" title="https://github.com/soimy/clawdbot-channel-dingtalk.git" ref="nofollow noopener noreferrer">GitHub - soimy/openclaw-channel-dingtalk: A dingtalk bot channel plugin for clawdbot</a></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ä¸€ä»¶å®‰è£…è„šæœ¬å·²ç»å®‰è£…äº†é£ä¹¦ï¼ŒæŸ¥çœ‹é£ä¹¦æ’ä»¶è¿è¡Œæ˜¯å¦åŠ è½½</span>
openclaw channels list
<span class="hljs-comment"># å¦‚æœæ²¡çœ‹åˆ°é£ä¹¦æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤</span>
openclaw plugins <span class="hljs-built_in">enable</span> dingtalk
openclaw gateway restart
<span class="hljs-comment"># å¦‚æœæ²¡æœ‰å®‰è£…é£ä¹¦ï¼Œé‚£ä¹ˆæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤</span>
openclaw plugins install https://github.com/soimy/clawdbot-channel-dingtalk.git
</code></pre>
<p>å‰å¾€<a href="https://link.juejin.cn?target=https%3A%2F%2Fopen-dev.dingtalk.com%2F" target="_blank" title="https://open-dev.dingtalk.com/" ref="nofollow noopener noreferrer">é’‰é’‰å¼€å‘è€…åå°</a>ï¼Œä½¿ç”¨å…·æœ‰ç®¡ç†å‘˜æƒé™çš„è´¦å·è¿›è¡Œç™»å½•ã€‚é€‰æ‹©</p>
<p>åˆ›å»ºåº”ç”¨-&gt;å¡«å†™åº”ç”¨åç§° å’Œ æè¿° -&gt; å†ç‚¹å‡»å·¦ä¾§â€œæ·»åŠ åº”ç”¨èƒ½åŠ›â€ -&gt; é€‰æ‹© â€œæœºå™¨äºº"-&gt;å®Œå–„æœºå™¨äººé…ç½® -&gt; æ¶ˆæ¯æ¥å—æ¨¡å¼é€‰æ‹© streamæ¨¡å¼ -&gt; ç‚¹å‡»å‘å¸ƒ</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4a4f4150a11e40b08c1fe25797b04610~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT3BlbkNsb3VkT1M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771400017&amp;x-signature=KTuy02HS3XXJpH3nd8kjAfkIprY%3D" alt="" loading="lazy"/></p>
<p>ç„¶åç‚¹å‡»åä¸Šè§’çš„ "å‡­è¯ä¸åŸºç¡€ä¿¡æ¯" æ‰¾åˆ°Client IDä¸Client Secretä¸¤ä¸ªå‚æ•°</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9891060d27424f1a96d3638a65cb3c43~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT3BlbkNsb3VkT1M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771400017&amp;x-signature=p4lXwbCIeFC6f240HWxGoXUT52E%3D" alt="" loading="lazy"/></p>
<p>ç„¶åå†è¿›å…¥å‘å¸ƒç•Œé¢ï¼Œç‚¹å‡»ä¿å­˜</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/72c93ad6b9324278bb72de2e556ebce7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT3BlbkNsb3VkT1M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771400017&amp;x-signature=Ulb3sW6KqnbOdt2ed%2FHjcsp3Vwo%3D" alt="" loading="lazy"/></p>
<p>ç„¶ååœ¨æœåŠ¡å™¨ä¸Šè¾“å…¥</p>
<pre><code class="hljs language-arduino" lang="arduino">openclaw config set channels.dingtalk.clientId <span class="hljs-string">"ä½ çš„ClientID"</span>
openclaw config set channels.dingtalk.clientSecret <span class="hljs-string">"ä½ çš„Client Secret"</span>
openclaw config set channels.dingtalk.enabled <span class="hljs-literal">true</span>
openclaw gateway restart
# æŸ¥çœ‹ç›¸å…³é…ç½®
openclaw channels list
openclaw config get channels.dingtalk
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/71e78234c5ca404e88829b4663bdf5ce~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT3BlbkNsb3VkT1M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771400017&amp;x-signature=nOB5r9fPurftNfTUAyaxUoyrzAg%3D" alt="" loading="lazy"/></p>
<p>æ¥ç€ä½ å°±å¯ä»¥åœ¨é’‰é’‰é‡Œæœç´¢åˆ°ä½ çš„åº”ç”¨å¹¶è®©ä»–ç»™ä½ å¹²æ´»äº†ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9bf11ccea3fb4e0e91addbdc7d76ee31~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT3BlbkNsb3VkT1M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771400017&amp;x-signature=T56OGT2jl30%2FtbTFKKTb2bVw7c4%3D" alt="" loading="lazy"/></p>
<p>å‚è€ƒé“¾æ¥</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fnodejs.org%2Fzh-cn%2Fdownload" target="_blank" title="https://nodejs.org/zh-cn/download" ref="nofollow noopener noreferrer">Node.js â€” ä¸‹è½½ Node.jsÂ®</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.molt.bot%2F" target="_blank" title="https://www.molt.bot/" ref="nofollow noopener noreferrer">Moltbot â€” Personal AI Assistant</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.npmjs.com%2Fpackage%2F%40marshulll%2Fopenclaw-wecom" target="_blank" title="https://www.npmjs.com/package/@marshulll/openclaw-wecom" ref="nofollow noopener noreferrer">openclawä¼ä¸šå¾®ä¿¡æ’ä»¶</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.clawhub.ai%2F" target="_blank" title="https://www.clawhub.ai/" ref="nofollow noopener noreferrer">MoltHub</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Flinux.do%2Ft%2Ftopic%2F1518570" target="_blank" title="https://linux.do/t/topic/1518570" ref="nofollow noopener noreferrer">linux.do/t/topic/151â€¦</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fcloud.tencent.com%2Fdeveloper%2Farticle%2F2624973" target="_blank" title="https://cloud.tencent.com/developer/article/2624973" ref="nofollow noopener noreferrer">ğŸš€ äº‘ä¸ŠMoltbotï¼ˆåŸClawdbotï¼‰æœ€å…¨å®è·µæŒ‡å—åˆè¾‘-è…¾è®¯äº‘å¼€å‘è€…ç¤¾åŒº-è…¾è®¯äº‘</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fsliverp%2Fqqbot" target="_blank" title="https://github.com/sliverp/qqbot" ref="nofollow noopener noreferrer">openclawçš„QQæœºå™¨äººæ’ä»¶</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.hubwiz.com%2Fblog%2Fclawdbot-comprehensive-guide%2F" target="_blank" title="https://www.hubwiz.com/blog/clawdbot-comprehensive-guide/" ref="nofollow noopener noreferrer">Clawdbot å…¨é¢æŒ‡å— - æ±‡æ™ºç½‘</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è®¾è®¡æ¨¡å¼-ç»“æ„å‹]]></title>    <link>https://juejin.cn/post/7605174711181393983</link>    <guid>https://juejin.cn/post/7605174711181393983</guid>    <pubDate>2026-02-11T08:00:45.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605174711181393983" data-draft-id="7605142381152682047" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è®¾è®¡æ¨¡å¼-ç»“æ„å‹"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯,è®¾è®¡æ¨¡å¼"/> <meta itemprop="datePublished" content="2026-02-11T08:00:45.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç‰›å¥¶"/> <meta itemprop="url" content="https://juejin.cn/user/1169536100866487"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è®¾è®¡æ¨¡å¼-ç»“æ„å‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1169536100866487/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç‰›å¥¶
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-11T08:00:45.000Z" title="Wed Feb 11 2026 08:00:45 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">è®¾è®¡æ¨¡å¼-ç»“æ„å‹</h2>
<blockquote>
<p>æœ¬æ–‡ä¸»è¦ä»‹ç»ä¸‹ç»“æ„å‹è®¾è®¡æ¨¡å¼ï¼ŒåŒ…æ‹¬<code>é€‚é…å™¨æ¨¡å¼</code>ã€<code>è£…é¥°å™¨æ¨¡å¼</code>ã€<code>ä»£ç†æ¨¡å¼</code>ã€<code>å¤–è§‚æ¨¡å¼</code>ã€<code>æ¡¥æ¥æ¨¡å¼</code>ã€<code>ç»„åˆæ¨¡å¼</code>å’Œ<code>äº«å…ƒæ¨¡å¼</code>ï¼Œæä¾›å‰ç«¯åœºæ™¯å’Œ ES6 ä»£ç çš„å®ç°è¿‡ç¨‹ã€‚
ä¾›è‡ªå·±ä»¥åæŸ¥æ¼è¡¥ç¼ºï¼Œä¹Ÿæ¬¢è¿åŒé“æœ‹å‹äº¤æµå­¦ä¹ ã€‚</p>
</blockquote>
<h3 data-id="heading-1">å¼•è¨€</h3>
<p>æœ€è¿‘åœ¨æ¢³ç†å‰ç«¯çš„ä¸€äº›çŸ¥è¯†ä½“ç³»ï¼Œå‘ç°æ¼æ‰äº†æ¯”è¾ƒé‡è¦çš„è®¾è®¡æ¨¡å¼ï¼Œæ‰€ä»¥æ‰“ç®—æ•´ç†ä¸‹ï¼Œæ–¹ä¾¿ä»¥åæŸ¥æ¼è¡¥ç¼ºã€‚</p>
<p><code>è®¾è®¡æ¨¡å¼</code>ä¹Ÿæ˜¯é¢è¯•ä¸­æ¯”è¾ƒå¸¸é—®çš„çŸ¥è¯†ç‚¹ï¼Œæ ¹æ®åˆ†ç±»ä¸»è¦åˆ†ä¸º<code>åˆ›å»ºå‹</code>ã€<code>ç»“æ„å‹</code>å’Œ<code>è¡Œä¸ºå‹</code>ã€‚é€šè¿‡è¿™äº›æ¨¡å¼ï¼Œå¼€å‘è€…å¯ä»¥æ›´å¥½åœ°ç†è§£é—®é¢˜ï¼Œå¹¶æ‰¾åˆ°åˆé€‚çš„è§£å†³æ–¹æ¡ˆã€‚</p>
<p>æœ¬æ–‡ä¸»è¦ä»‹ç»ä¸‹ç»“æ„å‹è®¾è®¡æ¨¡å¼ï¼ŒåŒ…æ‹¬<code>é€‚é…å™¨æ¨¡å¼</code>ã€<code>è£…é¥°å™¨æ¨¡å¼</code>ã€<code>ä»£ç†æ¨¡å¼</code>ã€<code>å¤–è§‚æ¨¡å¼</code>ã€<code>æ¡¥æ¥æ¨¡å¼</code>ã€<code>ç»„åˆæ¨¡å¼</code>å’Œ<code>äº«å…ƒæ¨¡å¼</code>ï¼Œæä¾›å‰ç«¯åœºæ™¯å’Œ ES6 ä»£ç çš„å®ç°è¿‡ç¨‹ã€‚</p>
<h3 data-id="heading-2">ä»€ä¹ˆæ˜¯ç»“æ„å‹</h3>
<p>ç»“æ„å‹æ¨¡å¼ï¼ˆ<code>Structural Patterns</code>ï¼‰ä¸»è¦å…³æ³¨<code>ç±»</code>å’Œ<code>å¯¹è±¡</code>çš„<code>ç»„åˆ</code>ã€‚è¿™äº›æ¨¡å¼æè¿°äº†å¦‚ä½•å°†ç±»æˆ–å¯¹è±¡<code>ç»“åˆ</code>åœ¨ä¸€èµ·å½¢æˆæ›´å¤§çš„ç»“æ„ï¼ŒåŒæ—¶ä¿æŒç»“æ„çš„<code>çµæ´»</code>å’Œ<code>é«˜æ•ˆ</code>ã€‚ç»“æ„å‹æ¨¡å¼é€šè¿‡<code>ç»§æ‰¿</code>æˆ–<code>ç»„åˆ</code>çš„æ–¹å¼æ¥ç®€åŒ–ç³»ç»Ÿçš„è®¾è®¡ï¼Œè§£å†³å¯¹è±¡ä¹‹é—´çš„<code>è€¦åˆ</code>é—®é¢˜ï¼Œä½¿å¾—ç³»ç»Ÿæ›´åŠ å®¹æ˜“æ‰©å±•å’Œç»´æŠ¤ã€‚</p>
<h3 data-id="heading-3">é€‚é…å™¨æ¨¡å¼ï¼ˆAdapterï¼‰</h3>
<p>é€‚é…å™¨æ¨¡å¼ï¼ˆ<code>Adapter Pattern</code>ï¼‰å°†ä¸€ä¸ªç±»çš„<code>æ¥å£è½¬æ¢</code>æˆå®¢æˆ·å¸Œæœ›çš„å¦ä¸€ä¸ªæ¥å£ï¼Œä½¿åŸæœ¬å› æ¥å£ä¸å…¼å®¹è€Œä¸èƒ½ä¸€èµ·å·¥ä½œçš„ç±»å¯ä»¥ä¸€èµ·å·¥ä½œã€‚</p>
<p>é€‚é…å™¨æ¨¡å¼é€šå¸¸ç”¨äº<code>åŒ…è£…</code>ç°æœ‰çš„ç±»ï¼Œä»¥ä¾¿ä¸æ–°çš„æ¥å£æˆ–ç³»ç»Ÿè¿›è¡Œäº¤äº’ã€‚</p>
<h4 data-id="heading-4">å‰ç«¯ä¸­çš„é€‚é…å™¨æ¨¡å¼åœºæ™¯</h4>
<ul>
<li><strong>æ¥å£æ•°æ®é€‚é…</strong>ï¼šåç«¯è¿”å›çš„æ•°æ®ç»“æ„å¯èƒ½ä¸å‰ç«¯ç»„ä»¶éœ€è¦çš„æ•°æ®ç»“æ„ä¸ä¸€è‡´ï¼Œå¯ä»¥ä½¿ç”¨é€‚é…å™¨æ¨¡å¼è¿›è¡Œè½¬æ¢ã€‚</li>
<li><strong>æ—§æ¥å£å…¼å®¹</strong>ï¼šåœ¨ç³»ç»Ÿé‡æ„æˆ–å‡çº§æ—¶ï¼Œä¿æŒå¯¹æ—§æ¥å£çš„å…¼å®¹æ€§ï¼Œä½¿ç”¨é€‚é…å™¨æ¨¡å¼å°†æ–°æ¥å£æ˜ å°„åˆ°æ—§æ¥å£ã€‚</li>
<li><strong>Vueè®¡ç®—å±æ€§</strong>ï¼šVue ä¸­çš„ <code>computed</code> å±æ€§å¯ä»¥çœ‹ä½œæ˜¯ä¸€ç§é€‚é…å™¨ï¼Œå°†åŸå§‹æ•°æ®è½¬æ¢ä¸ºè§†å›¾éœ€è¦çš„æ•°æ®æ ¼å¼ã€‚</li>
</ul>
<h4 data-id="heading-5">é€‚é…å™¨æ¨¡å¼-JSå®ç°</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ—§æ¥å£</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">OldCalculator</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">operations</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">term1, term2, operation</span>) {
      <span class="hljs-keyword">switch</span> (operation) {
        <span class="hljs-keyword">case</span> <span class="hljs-string">'add'</span>:
          <span class="hljs-keyword">return</span> term1 + term2;
        <span class="hljs-keyword">case</span> <span class="hljs-string">'sub'</span>:
          <span class="hljs-keyword">return</span> term1 - term2;
        <span class="hljs-attr">default</span>:
          <span class="hljs-keyword">return</span> <span class="hljs-title class_">NaN</span>;
      }
    };
  }
}

<span class="hljs-comment">// æ–°æ¥å£</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">NewCalculator</span> {
  <span class="hljs-title function_">add</span>(<span class="hljs-params">term1, term2</span>) {
    <span class="hljs-keyword">return</span> term1 + term2;
  }

  <span class="hljs-title function_">sub</span>(<span class="hljs-params">term1, term2</span>) {
    <span class="hljs-keyword">return</span> term1 - term2;
  }
}

<span class="hljs-comment">// é€‚é…å™¨ç±»</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">CalculatorAdapter</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">calculator</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">NewCalculator</span>();
  }

  <span class="hljs-title function_">operations</span>(<span class="hljs-params">term1, term2, operation</span>) {
    <span class="hljs-keyword">switch</span> (operation) {
      <span class="hljs-keyword">case</span> <span class="hljs-string">'add'</span>:
        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">calculator</span>.<span class="hljs-title function_">add</span>(term1, term2);
      <span class="hljs-keyword">case</span> <span class="hljs-string">'sub'</span>:
        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">calculator</span>.<span class="hljs-title function_">sub</span>(term1, term2);
      <span class="hljs-attr">default</span>:
        <span class="hljs-keyword">return</span> <span class="hljs-title class_">NaN</span>;
    }
  }
}

<span class="hljs-comment">// å®¢æˆ·ç«¯è°ƒç”¨</span>
<span class="hljs-keyword">const</span> oldCalc = <span class="hljs-keyword">new</span> <span class="hljs-title class_">OldCalculator</span>();
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(oldCalc.<span class="hljs-title function_">operations</span>(<span class="hljs-number">10</span>, <span class="hljs-number">5</span>, <span class="hljs-string">'add'</span>)); <span class="hljs-comment">// 15</span>

<span class="hljs-keyword">const</span> newCalc = <span class="hljs-keyword">new</span> <span class="hljs-title class_">NewCalculator</span>();
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(newCalc.<span class="hljs-title function_">add</span>(<span class="hljs-number">10</span>, <span class="hljs-number">5</span>)); <span class="hljs-comment">// 15</span>

<span class="hljs-keyword">const</span> adapter = <span class="hljs-keyword">new</span> <span class="hljs-title class_">CalculatorAdapter</span>();
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(adapter.<span class="hljs-title function_">operations</span>(<span class="hljs-number">10</span>, <span class="hljs-number">5</span>, <span class="hljs-string">'add'</span>)); <span class="hljs-comment">// 15</span>
</code></pre>
<h3 data-id="heading-6">è£…é¥°å™¨æ¨¡å¼ï¼ˆDecoratorï¼‰</h3>
<p>è£…é¥°å™¨æ¨¡å¼ï¼ˆ<code>Decorator Pattern</code>ï¼‰<code>åŠ¨æ€</code>åœ°ç»™ä¸€ä¸ªå¯¹è±¡æ·»åŠ ä¸€äº›é¢å¤–çš„èŒè´£ï¼Œè€Œä¸å½±å“è¯¥å¯¹è±¡æ‰€å±ç±»çš„å…¶ä»–å®ä¾‹ã€‚</p>
<p>è£…é¥°å™¨æ¨¡å¼æä¾›äº†ä¸€ç§çµæ´»çš„æ›¿ä»£ç»§æ‰¿æ–¹æ¡ˆï¼Œç”¨äºæ‰©å±•å¯¹è±¡çš„åŠŸèƒ½ã€‚</p>
<h4 data-id="heading-7">å‰ç«¯ä¸­çš„è£…é¥°å™¨æ¨¡å¼åœºæ™¯</h4>
<ul>
<li><strong>é«˜é˜¶ç»„ä»¶ï¼ˆHOCï¼‰</strong>ï¼šåœ¨ <code>React</code> ä¸­ï¼Œé«˜é˜¶ç»„ä»¶æœ¬è´¨ä¸Šå°±æ˜¯è£…é¥°å™¨æ¨¡å¼çš„åº”ç”¨ï¼Œç”¨äºå¤ç”¨ç»„ä»¶é€»è¾‘ã€‚</li>
<li><strong>ç±»è£…é¥°å™¨</strong>ï¼šåœ¨ <code>ES7</code> è£…é¥°å™¨è¯­æ³•æˆ– <code>TypeScript</code> ä¸­ï¼Œå¯ä»¥ä½¿ç”¨è£…é¥°å™¨æ¥å¢å¼ºç±»æˆ–ç±»çš„æ–¹æ³•ï¼Œä¾‹å¦‚ç”¨äºæ—¥å¿—è®°å½•ã€æ€§èƒ½ç›‘æ§ã€æƒé™æ§åˆ¶ç­‰ã€‚</li>
</ul>
<h4 data-id="heading-8">è£…é¥°å™¨æ¨¡å¼-JSå®ç°</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åŸå§‹å¯¹è±¡</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Circle</span> {
  <span class="hljs-title function_">draw</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"ç”»ä¸€ä¸ªåœ†å½¢"</span>);
  }
}

<span class="hljs-comment">// è£…é¥°å™¨åŸºç±»</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Decorator</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">circle</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">circle</span> = circle;
  }

  <span class="hljs-title function_">draw</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">circle</span>.<span class="hljs-title function_">draw</span>();
  }
}

<span class="hljs-comment">// å…·ä½“è£…é¥°å™¨ï¼šæ·»åŠ çº¢è‰²è¾¹æ¡†</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">RedBorderDecorator</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Decorator</span> {
  <span class="hljs-title function_">draw</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">circle</span>.<span class="hljs-title function_">draw</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setRedBorder</span>();
  }

  <span class="hljs-title function_">setRedBorder</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"æ·»åŠ çº¢è‰²è¾¹æ¡†"</span>);
  }
}

<span class="hljs-comment">// å®¢æˆ·ç«¯è°ƒç”¨</span>
<span class="hljs-keyword">const</span> circle = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Circle</span>();
circle.<span class="hljs-title function_">draw</span>();
<span class="hljs-comment">// è¾“å‡ºï¼š</span>
<span class="hljs-comment">// ç”»ä¸€ä¸ªåœ†å½¢</span>

<span class="hljs-keyword">const</span> redCircle = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RedBorderDecorator</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Circle</span>());
redCircle.<span class="hljs-title function_">draw</span>();
<span class="hljs-comment">// è¾“å‡ºï¼š</span>
<span class="hljs-comment">// ç”»ä¸€ä¸ªåœ†å½¢</span>
<span class="hljs-comment">// æ·»åŠ çº¢è‰²è¾¹æ¡†</span>
</code></pre>
<h3 data-id="heading-9">ä»£ç†æ¨¡å¼ï¼ˆProxyï¼‰</h3>
<p>ä»£ç†æ¨¡å¼ï¼ˆ<code>Proxy Pattern</code>ï¼‰ä¸ºå…¶ä»–å¯¹è±¡æä¾›ä¸€ç§<code>ä»£ç†</code>ä»¥æ§åˆ¶å¯¹è¿™ä¸ªå¯¹è±¡çš„è®¿é—®ã€‚</p>
<p>ä»£ç†æ¨¡å¼å¯ä»¥åœ¨è®¿é—®å¯¹è±¡ä¹‹å‰æˆ–ä¹‹åæ‰§è¡Œé¢å¤–çš„æ“ä½œï¼Œå¦‚æƒé™éªŒè¯ã€å»¶è¿ŸåŠ è½½ã€ç¼“å­˜ç­‰ã€‚</p>
<h4 data-id="heading-10">å‰ç«¯ä¸­çš„ä»£ç†æ¨¡å¼åœºæ™¯</h4>
<ul>
<li><strong>æ•°æ®å“åº”å¼</strong>ï¼š<code>Vue 3</code> ä½¿ç”¨ <code>Proxy</code> å¯¹è±¡æ¥å®ç°æ•°æ®çš„å“åº”å¼ç³»ç»Ÿï¼Œæ‹¦æˆªå¯¹è±¡çš„è¯»å–å’Œä¿®æ”¹æ“ä½œã€‚</li>
<li><strong>ç½‘ç»œè¯·æ±‚ä»£ç†</strong>ï¼šåœ¨å¼€å‘ç¯å¢ƒä¸­ï¼Œé…ç½®ä»£ç†æœåŠ¡å™¨ï¼ˆå¦‚ <code>webpack-dev-server</code> çš„ proxyï¼‰è§£å†³è·¨åŸŸé—®é¢˜ã€‚</li>
<li><strong>è™šæ‹Ÿä»£ç†</strong>ï¼šä¾‹å¦‚å›¾ç‰‡æ‡’åŠ è½½ï¼Œå…ˆæ˜¾ç¤ºå ä½å›¾ï¼Œç­‰å›¾ç‰‡åŠ è½½å®Œæˆåå†æ›¿æ¢ä¸ºçœŸå®å›¾ç‰‡ã€‚</li>
<li><strong>ç¼“å­˜ä»£ç†</strong>ï¼šå¯¹äºå¼€é”€è¾ƒå¤§çš„è®¡ç®—ç»“æœæˆ–ç½‘ç»œè¯·æ±‚ç»“æœè¿›è¡Œç¼“å­˜ï¼Œä¸‹æ¬¡è¯·æ±‚æ—¶ç›´æ¥è¿”å›ç¼“å­˜ç»“æœã€‚</li>
</ul>
<h4 data-id="heading-11">ä»£ç†æ¨¡å¼-JSå®ç°</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// çœŸå®å›¾ç‰‡åŠ è½½ç±»</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">RealImage</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">fileName</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">fileName</span> = fileName;
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">loadFromDisk</span>(fileName);
  }

  <span class="hljs-title function_">loadFromDisk</span>(<span class="hljs-params">fileName</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"æ­£åœ¨ä»ç£ç›˜åŠ è½½ "</span> + fileName);
  }

  <span class="hljs-title function_">display</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"æ˜¾ç¤º "</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">fileName</span>);
  }
}

<span class="hljs-comment">// ä»£ç†å›¾ç‰‡ç±»</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ProxyImage</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">fileName</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">fileName</span> = fileName;
  }

  <span class="hljs-title function_">display</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">realImage</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">realImage</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RealImage</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">fileName</span>);
    }
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">realImage</span>.<span class="hljs-title function_">display</span>();
  }
}

<span class="hljs-comment">// å®¢æˆ·ç«¯è°ƒç”¨</span>
<span class="hljs-keyword">const</span> image = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ProxyImage</span>(<span class="hljs-string">"test.jpg"</span>);

<span class="hljs-comment">// ç¬¬ä¸€æ¬¡è°ƒç”¨ï¼ŒåŠ è½½å›¾ç‰‡</span>
image.<span class="hljs-title function_">display</span>();
<span class="hljs-comment">// è¾“å‡ºï¼š</span>
<span class="hljs-comment">// æ­£åœ¨ä»ç£ç›˜åŠ è½½ test.jpg</span>
<span class="hljs-comment">// æ˜¾ç¤º test.jpg</span>

<span class="hljs-comment">// ç¬¬äºŒæ¬¡è°ƒç”¨ï¼Œç›´æ¥æ˜¾ç¤º</span>
image.<span class="hljs-title function_">display</span>();
<span class="hljs-comment">// è¾“å‡ºï¼š</span>
<span class="hljs-comment">// æ˜¾ç¤º test.jpg</span>
</code></pre>
<h3 data-id="heading-12">å¤–è§‚æ¨¡å¼ï¼ˆFacadeï¼‰</h3>
<p>å¤–è§‚æ¨¡å¼ï¼ˆ<code>Facade Pattern</code>ï¼‰æä¾›ä¸€ä¸ª<code>ç»Ÿä¸€çš„æ¥å£</code>ï¼Œç”¨æ¥è®¿é—®å­ç³»ç»Ÿä¸­çš„ä¸€ç¾¤æ¥å£ã€‚å¤–è§‚æ¨¡å¼å®šä¹‰äº†ä¸€ä¸ªé«˜å±‚æ¥å£ï¼Œè®©å­ç³»ç»Ÿæ›´å®¹æ˜“ä½¿ç”¨ã€‚</p>
<h4 data-id="heading-13">å‰ç«¯ä¸­çš„å¤–è§‚æ¨¡å¼åœºæ™¯</h4>
<ul>
<li><strong>æµè§ˆå™¨å…¼å®¹æ€§å°è£…</strong>ï¼šå°è£…ä¸åŒæµè§ˆå™¨çš„ <code>API</code> å·®å¼‚ï¼Œæä¾›ç»Ÿä¸€çš„æ¥å£ã€‚ä¾‹å¦‚ï¼Œå°è£…äº‹ä»¶ç›‘å¬å‡½æ•°ï¼Œç»Ÿä¸€å¤„ç† <code>addEventListener</code> å’Œ <code>attachEvent</code>ã€‚</li>
<li><strong>ç®€åŒ–å¤æ‚åº“çš„ä½¿ç”¨</strong>ï¼šä¾‹å¦‚ <code>jQuery</code> æˆ– <code>Axios</code>ï¼Œå®ƒä»¬ä¸ºå¤æ‚çš„åŸç”Ÿ DOM æ“ä½œæˆ– XMLHttpRequest æä¾›äº†ç®€å•æ˜“ç”¨çš„æ¥å£ã€‚</li>
</ul>
<h4 data-id="heading-14">å¤–è§‚æ¨¡å¼-JSå®ç°</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å­ç³»ç»Ÿ1ï¼šç¯å…‰</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Light</span> {
  <span class="hljs-title function_">on</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"å¼€ç¯"</span>);
  }
  <span class="hljs-title function_">off</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"å…³ç¯"</span>);
  }
}

<span class="hljs-comment">// å­ç³»ç»Ÿ2ï¼šç”µè§†</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">TV</span> {
  <span class="hljs-title function_">on</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"æ‰“å¼€ç”µè§†"</span>);
  }
  <span class="hljs-title function_">off</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"å…³é—­ç”µè§†"</span>);
  }
}

<span class="hljs-comment">// å­ç³»ç»Ÿ3ï¼šéŸ³å“</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">SoundSystem</span> {
  <span class="hljs-title function_">on</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"æ‰“å¼€éŸ³å“"</span>);
  }
  <span class="hljs-title function_">off</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"å…³é—­éŸ³å“"</span>);
  }
}

<span class="hljs-comment">// å¤–è§‚ç±»ï¼šå®¶åº­å½±é™¢</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">HomeTheaterFacade</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">light, tv, sound</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">light</span> = light;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">tv</span> = tv;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">sound</span> = sound;
  }

  <span class="hljs-title function_">watchMovie</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"--- å‡†å¤‡çœ‹ç”µå½± ---"</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">light</span>.<span class="hljs-title function_">off</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">tv</span>.<span class="hljs-title function_">on</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">sound</span>.<span class="hljs-title function_">on</span>();
  }

  <span class="hljs-title function_">endMovie</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"--- ç»“æŸçœ‹ç”µå½± ---"</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">light</span>.<span class="hljs-title function_">on</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">tv</span>.<span class="hljs-title function_">off</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">sound</span>.<span class="hljs-title function_">off</span>();
  }
}

<span class="hljs-comment">// å®¢æˆ·ç«¯è°ƒç”¨</span>
<span class="hljs-keyword">const</span> light = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Light</span>();
<span class="hljs-keyword">const</span> tv = <span class="hljs-keyword">new</span> <span class="hljs-title function_">TV</span>();
<span class="hljs-keyword">const</span> sound = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SoundSystem</span>();
<span class="hljs-keyword">const</span> homeTheater = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HomeTheaterFacade</span>(light, tv, sound);

homeTheater.<span class="hljs-title function_">watchMovie</span>();
<span class="hljs-comment">// è¾“å‡ºï¼š</span>
<span class="hljs-comment">// --- å‡†å¤‡çœ‹ç”µå½± ---</span>
<span class="hljs-comment">// å…³ç¯</span>
<span class="hljs-comment">// æ‰“å¼€ç”µè§†</span>
<span class="hljs-comment">// æ‰“å¼€éŸ³å“</span>

homeTheater.<span class="hljs-title function_">endMovie</span>();
<span class="hljs-comment">// è¾“å‡ºï¼š</span>
<span class="hljs-comment">// --- ç»“æŸçœ‹ç”µå½± ---</span>
<span class="hljs-comment">// å¼€ç¯</span>
<span class="hljs-comment">// å…³é—­ç”µè§†</span>
<span class="hljs-comment">// å…³é—­éŸ³å“</span>
</code></pre>
<h3 data-id="heading-15">æ¡¥æ¥æ¨¡å¼ï¼ˆBridgeï¼‰</h3>
<p>æ¡¥æ¥æ¨¡å¼ï¼ˆ<code>Bridge Pattern</code>ï¼‰å°†<code>æŠ½è±¡éƒ¨åˆ†</code>ä¸å®ƒçš„<code>å®ç°éƒ¨åˆ†</code>åˆ†ç¦»ï¼Œä½¿å®ƒä»¬å¯ä»¥ç‹¬ç«‹åœ°å˜åŒ–ã€‚</p>
<h4 data-id="heading-16">å‰ç«¯ä¸­çš„æ¡¥æ¥æ¨¡å¼åœºæ™¯</h4>
<ul>
<li><strong>UIç»„ä»¶ä¸æ¸²æŸ“å¼•æ“åˆ†ç¦»</strong>ï¼šä¾‹å¦‚ï¼Œä¸€ä¸ªé€šç”¨çš„å›¾è¡¨åº“ï¼Œå¯ä»¥å°†å›¾è¡¨çš„<code>é€»è¾‘</code>ï¼ˆæŠ½è±¡éƒ¨åˆ†ï¼‰ä¸å…·ä½“çš„<code>æ¸²æŸ“æ–¹å¼</code>ï¼ˆå®ç°éƒ¨åˆ†ï¼Œå¦‚ Canvasã€SVGã€WebGLï¼‰åˆ†ç¦»ã€‚</li>
<li><strong>äº‹ä»¶ç›‘å¬</strong>ï¼šåœ¨ç»‘å®šäº‹ä»¶æ—¶ï¼Œå°†<code>å›è°ƒå‡½æ•°</code>ï¼ˆå®ç°éƒ¨åˆ†ï¼‰ä¸<code>äº‹ä»¶ç»‘å®š</code>ï¼ˆæŠ½è±¡éƒ¨åˆ†ï¼‰åˆ†ç¦»ï¼Œä½¿å¾—å›è°ƒå‡½æ•°å¯ä»¥å¤ç”¨ã€‚</li>
</ul>
<h4 data-id="heading-17">æ¡¥æ¥æ¨¡å¼-JSå®ç°</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å®ç°éƒ¨åˆ†æ¥å£ï¼šé¢œè‰²</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Color</span> {
  <span class="hljs-title function_">fill</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">"æŠ½è±¡æ–¹æ³•ä¸èƒ½è°ƒç”¨"</span>);
  }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Red</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Color</span> {
  <span class="hljs-title function_">fill</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-string">"çº¢è‰²"</span>;
  }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Green</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Color</span> {
  <span class="hljs-title function_">fill</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-string">"ç»¿è‰²"</span>;
  }
}

<span class="hljs-comment">// æŠ½è±¡éƒ¨åˆ†ï¼šå½¢çŠ¶</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Shape</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">color</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">color</span> = color;
  }

  <span class="hljs-title function_">draw</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">"æŠ½è±¡æ–¹æ³•ä¸èƒ½è°ƒç”¨"</span>);
  }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Circle</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Shape</span> {
  <span class="hljs-title function_">draw</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`ç”»ä¸€ä¸ª<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.color.fill()}</span>çš„åœ†å½¢`</span>);
  }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Square</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Shape</span> {
  <span class="hljs-title function_">draw</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`ç”»ä¸€ä¸ª<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.color.fill()}</span>çš„æ­£æ–¹å½¢`</span>);
  }
}

<span class="hljs-comment">// å®¢æˆ·ç«¯è°ƒç”¨</span>
<span class="hljs-keyword">const</span> redCircle = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Circle</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Red</span>());
redCircle.<span class="hljs-title function_">draw</span>(); <span class="hljs-comment">// ç”»ä¸€ä¸ªçº¢è‰²çš„åœ†å½¢</span>

<span class="hljs-keyword">const</span> greenSquare = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Square</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Green</span>());
greenSquare.<span class="hljs-title function_">draw</span>(); <span class="hljs-comment">// ç”»ä¸€ä¸ªç»¿è‰²çš„æ­£æ–¹å½¢</span>
</code></pre>
<h3 data-id="heading-18">ç»„åˆæ¨¡å¼ï¼ˆCompositeï¼‰</h3>
<p>ç»„åˆæ¨¡å¼ï¼ˆ<code>Composite Pattern</code>ï¼‰å°†å¯¹è±¡ç»„åˆæˆ<code>æ ‘å½¢ç»“æ„</code>ä»¥è¡¨ç¤ºâ€œéƒ¨åˆ†-æ•´ä½“â€çš„å±‚æ¬¡ç»“æ„ã€‚ç»„åˆæ¨¡å¼ä½¿å¾—ç”¨æˆ·å¯¹å•ä¸ªå¯¹è±¡å’Œç»„åˆå¯¹è±¡çš„ä½¿ç”¨å…·æœ‰ä¸€è‡´æ€§ã€‚</p>
<h4 data-id="heading-19">å‰ç«¯ä¸­çš„ç»„åˆæ¨¡å¼åœºæ™¯</h4>
<ul>
<li><strong>DOMæ ‘</strong>ï¼šDOM æ ‘æœ¬èº«å°±æ˜¯ä¸€ä¸ªå…¸å‹çš„ç»„åˆæ¨¡å¼ç»“æ„ï¼Œæ—¢åŒ…å«å…·ä½“çš„èŠ‚ç‚¹ï¼ˆå¦‚ <code>div</code>ã€<code>span</code>ï¼‰ï¼Œä¹ŸåŒ…å«åŒ…å«å…¶ä»–èŠ‚ç‚¹çš„å®¹å™¨ã€‚</li>
<li><strong>è™šæ‹ŸDOM</strong>ï¼š<code>Virtual DOM</code> ä¹Ÿæ˜¯æ ‘å½¢ç»“æ„ï¼Œç»„ä»¶å¯ä»¥åŒ…å«å…¶ä»–ç»„ä»¶æˆ–åŸç”Ÿå…ƒç´ ã€‚</li>
<li><strong>æ–‡ä»¶ç›®å½•ç³»ç»Ÿ</strong>ï¼šæ–‡ä»¶å¤¹å¯ä»¥åŒ…å«æ–‡ä»¶æˆ–å­æ–‡ä»¶å¤¹ã€‚</li>
<li><strong>çº§è”èœå•</strong>ï¼šå¤šçº§èœå•çš„å±•ç¤ºå’Œæ“ä½œã€‚</li>
</ul>
<h4 data-id="heading-20">ç»„åˆæ¨¡å¼-JSå®ç°</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç»„ä»¶åŸºç±»</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Component</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">name</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;
  }

  <span class="hljs-title function_">add</span>(<span class="hljs-params">component</span>) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">"ä¸æ”¯æŒè¯¥æ“ä½œ"</span>);
  }

  <span class="hljs-title function_">remove</span>(<span class="hljs-params">component</span>) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">"ä¸æ”¯æŒè¯¥æ“ä½œ"</span>);
  }

  <span class="hljs-title function_">print</span>(<span class="hljs-params">indent = <span class="hljs-string">""</span></span>) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">"ä¸æ”¯æŒè¯¥æ“ä½œ"</span>);
  }
}

<span class="hljs-comment">// å¶å­èŠ‚ç‚¹ï¼šæ–‡ä»¶</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">File</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Component</span> {
  <span class="hljs-title function_">print</span>(<span class="hljs-params">indent = <span class="hljs-string">""</span></span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${indent}</span>- <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span>`</span>);
  }
}

<span class="hljs-comment">// ç»„åˆèŠ‚ç‚¹ï¼šæ–‡ä»¶å¤¹</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Folder</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Component</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">name</span>) {
    <span class="hljs-variable language_">super</span>(name);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">children</span> = [];
  }

  <span class="hljs-title function_">add</span>(<span class="hljs-params">component</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">children</span>.<span class="hljs-title function_">push</span>(component);
  }

  <span class="hljs-title function_">remove</span>(<span class="hljs-params">component</span>) {
    <span class="hljs-keyword">const</span> index = <span class="hljs-variable language_">this</span>.<span class="hljs-property">children</span>.<span class="hljs-title function_">indexOf</span>(component);
    <span class="hljs-keyword">if</span> (index &gt; -<span class="hljs-number">1</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">children</span>.<span class="hljs-title function_">splice</span>(index, <span class="hljs-number">1</span>);
    }
  }

  <span class="hljs-title function_">print</span>(<span class="hljs-params">indent = <span class="hljs-string">""</span></span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${indent}</span>+ <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span>`</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">children</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">child</span> =&gt;</span> {
      child.<span class="hljs-title function_">print</span>(indent + <span class="hljs-string">"  "</span>);
    });
  }
}

<span class="hljs-comment">// å®¢æˆ·ç«¯è°ƒç”¨</span>
<span class="hljs-keyword">const</span> root = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Folder</span>(<span class="hljs-string">"æ ¹ç›®å½•"</span>);
<span class="hljs-keyword">const</span> folder1 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Folder</span>(<span class="hljs-string">"æ–‡æ¡£"</span>);
<span class="hljs-keyword">const</span> folder2 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Folder</span>(<span class="hljs-string">"å›¾ç‰‡"</span>);

<span class="hljs-keyword">const</span> file1 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(<span class="hljs-string">"ç®€å†.doc"</span>);
<span class="hljs-keyword">const</span> file2 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(<span class="hljs-string">"ç…§ç‰‡.jpg"</span>);
<span class="hljs-keyword">const</span> file3 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(<span class="hljs-string">"logo.png"</span>);

root.<span class="hljs-title function_">add</span>(folder1);
root.<span class="hljs-title function_">add</span>(folder2);
folder1.<span class="hljs-title function_">add</span>(file1);
folder2.<span class="hljs-title function_">add</span>(file2);
folder2.<span class="hljs-title function_">add</span>(file3);

root.<span class="hljs-title function_">print</span>();
<span class="hljs-comment">// è¾“å‡ºï¼š</span>
<span class="hljs-comment">// + æ ¹ç›®å½•</span>
<span class="hljs-comment">//   + æ–‡æ¡£</span>
<span class="hljs-comment">//     - ç®€å†.doc</span>
<span class="hljs-comment">//   + å›¾ç‰‡</span>
<span class="hljs-comment">//     - ç…§ç‰‡.jpg</span>
<span class="hljs-comment">//     - logo.png</span>
</code></pre>
<h3 data-id="heading-21">äº«å…ƒæ¨¡å¼ï¼ˆFlyweightï¼‰</h3>
<p>äº«å…ƒæ¨¡å¼ï¼ˆ<code>Flyweight Pattern</code>ï¼‰é€šè¿‡<code>å…±äº«</code>æ¥é«˜æ•ˆåœ°æ”¯æŒå¤§é‡ç»†ç²’åº¦çš„å¯¹è±¡ã€‚</p>
<h4 data-id="heading-22">å‰ç«¯ä¸­çš„äº«å…ƒæ¨¡å¼åœºæ™¯</h4>
<ul>
<li><strong>äº‹ä»¶å§”æ‰˜</strong>ï¼šåœ¨çˆ¶å…ƒç´ ä¸Šç»‘å®šäº‹ä»¶ç›‘å¬å™¨ï¼Œé€šè¿‡äº‹ä»¶å†’æ³¡å¤„ç†å­å…ƒç´ çš„äº‹ä»¶ï¼Œé¿å…ä¸ºæ¯ä¸ªå­å…ƒç´ ç»‘å®šç›‘å¬å™¨ï¼ŒèŠ‚çœå†…å­˜ã€‚</li>
<li><strong>å¯¹è±¡æ± </strong>ï¼šåœ¨æ¸¸æˆå¼€å‘æˆ–å¤æ‚åŠ¨ç”»ä¸­ï¼Œé¢„å…ˆåˆ›å»ºä¸€ç»„å¯¹è±¡æ”¾å…¥æ± ä¸­ï¼Œä½¿ç”¨æ—¶å–å‡ºï¼Œç”¨å®Œå½’è¿˜ï¼Œé¿å…é¢‘ç¹åˆ›å»ºå’Œé”€æ¯å¯¹è±¡ã€‚</li>
<li><strong>DOMå¤ç”¨</strong>ï¼šåœ¨é•¿åˆ—è¡¨æ»šåŠ¨ï¼ˆè™šæ‹Ÿæ»šåŠ¨ï¼‰ä¸­ï¼Œåªæ¸²æŸ“å¯è§†åŒºåŸŸçš„ DOM èŠ‚ç‚¹ï¼Œå›æ”¶å¹¶å¤ç”¨ç§»å‡ºå¯è§†åŒºåŸŸçš„èŠ‚ç‚¹ã€‚</li>
</ul>
<h4 data-id="heading-23">äº«å…ƒæ¨¡å¼-JSå®ç°</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// äº«å…ƒå·¥å‚</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ShapeFactory</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">circleMap</span> = {};
  }

  <span class="hljs-title function_">getCircle</span>(<span class="hljs-params">color</span>) {
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">circleMap</span>[color]) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">circleMap</span>[color] = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Circle</span>(color);
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`åˆ›å»ºæ–°çš„ <span class="hljs-subst">${color}</span> åœ†å½¢`</span>);
    }
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">circleMap</span>[color];
  }
}

<span class="hljs-comment">// å…·ä½“äº«å…ƒç±»</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Circle</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">color</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">color</span> = color;
  }

  <span class="hljs-title function_">draw</span>(<span class="hljs-params">x, y</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`åœ¨ (<span class="hljs-subst">${x}</span>, <span class="hljs-subst">${y}</span>) ç”»ä¸€ä¸ª <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.color}</span> çš„åœ†å½¢`</span>);
  }
}

<span class="hljs-comment">// å®¢æˆ·ç«¯è°ƒç”¨</span>
<span class="hljs-keyword">const</span> factory = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ShapeFactory</span>();

<span class="hljs-keyword">const</span> redCircle1 = factory.<span class="hljs-title function_">getCircle</span>(<span class="hljs-string">"çº¢è‰²"</span>);
redCircle1.<span class="hljs-title function_">draw</span>(<span class="hljs-number">10</span>, <span class="hljs-number">10</span>);

<span class="hljs-keyword">const</span> redCircle2 = factory.<span class="hljs-title function_">getCircle</span>(<span class="hljs-string">"çº¢è‰²"</span>);
redCircle2.<span class="hljs-title function_">draw</span>(<span class="hljs-number">20</span>, <span class="hljs-number">20</span>);

<span class="hljs-keyword">const</span> blueCircle = factory.<span class="hljs-title function_">getCircle</span>(<span class="hljs-string">"è“è‰²"</span>);
blueCircle.<span class="hljs-title function_">draw</span>(<span class="hljs-number">30</span>, <span class="hljs-number">30</span>);

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(redCircle1 === redCircle2); <span class="hljs-comment">// true</span>
<span class="hljs-comment">// è¾“å‡ºï¼š</span>
<span class="hljs-comment">// åˆ›å»ºæ–°çš„ çº¢è‰² åœ†å½¢</span>
<span class="hljs-comment">// åœ¨ (10, 10) ç”»ä¸€ä¸ª çº¢è‰² çš„åœ†å½¢</span>
<span class="hljs-comment">// åœ¨ (20, 20) ç”»ä¸€ä¸ª çº¢è‰² çš„åœ†å½¢</span>
<span class="hljs-comment">// åˆ›å»ºæ–°çš„ è“è‰² åœ†å½¢</span>
<span class="hljs-comment">// åœ¨ (30, 30) ç”»ä¸€ä¸ª è“è‰² çš„åœ†å½¢</span>
<span class="hljs-comment">// true</span>
</code></pre>
<h3 data-id="heading-24">é¡¹ç›®åœ°å€</h3>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2Fcangnaiwen%2Fdesign-patterns-study" target="_blank" title="https://gitee.com/cangnaiwen/design-patterns-study" ref="nofollow noopener noreferrer">design-patterns-study</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[MySQLé«˜å¯ç”¨ç»ˆææŒ‡å—ï¼šKeepalivedå®æˆ˜ç²¾è®²ï¼Œä»VIPæ¼‚ç§»åˆ°ä¸»ä»åˆ‡æ¢ï¼Œä¸€ç¯‡æå®šï¼]]></title>    <link>https://juejin.cn/post/7605173538417033226</link>    <guid>https://juejin.cn/post/7605173538417033226</guid>    <pubDate>2026-02-11T06:10:30.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605173538417033226" data-draft-id="7605164560711237658" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="MySQLé«˜å¯ç”¨ç»ˆææŒ‡å—ï¼šKeepalivedå®æˆ˜ç²¾è®²ï¼Œä»VIPæ¼‚ç§»åˆ°ä¸»ä»åˆ‡æ¢ï¼Œä¸€ç¯‡æå®šï¼"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-02-11T06:10:30.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Javaç¼–ç¨‹çˆ±å¥½è€…"/> <meta itemprop="url" content="https://juejin.cn/user/819554264300154"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            MySQLé«˜å¯ç”¨ç»ˆææŒ‡å—ï¼šKeepalivedå®æˆ˜ç²¾è®²ï¼Œä»VIPæ¼‚ç§»åˆ°ä¸»ä»åˆ‡æ¢ï¼Œä¸€ç¯‡æå®šï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/819554264300154/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Javaç¼–ç¨‹çˆ±å¥½è€…
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-11T06:10:30.000Z" title="Wed Feb 11 2026 06:10:30 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»18åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å…„å¼Ÿä»¬ï¼Œé«˜å¯ç”¨è¿™ä¸œè¥¿ï¼Œä¸å‡ºäº‹æ—¶å²æœˆé™å¥½ï¼Œä¸€å‡ºäº‹å°±æ˜¯P1çº§æ•…éšœã€‚è¿˜è®°å¾—é‚£æ¬¡å—ï¼ŸæŸæ ¸å¿ƒäº¤æ˜“ç³»ç»Ÿï¼ŒMySQLä¸»åº“çš„å­˜å‚¨IOPSçªç„¶é£™åˆ°100%ï¼Œæ•´ä¸ªå®ä¾‹hangæ­»ï¼Œåˆ«è¯´äº¤æ˜“äº†ï¼Œè¿ç™»å½•éƒ½ç™»ä¸ä¸Šå»ã€‚æŒ‰ç†è¯´ï¼Œå’±ä»¬çš„<a href="https://link.juejin.cn?target=https%3A%2F%2Fzhida.zhihu.com%2Fsearch%3Fcontent_id%3D269081829%26content_type%3DArticle%26match_order%3D1%26q%3DMySQL%25E4%25B8%25BB%25E4%25BB%258E%25E5%25A4%258D%25E5%2588%25B6%26zhida_source%3Dentity" target="_blank" title="https://zhida.zhihu.com/search?content_id=269081829&amp;content_type=Article&amp;match_order=1&amp;q=MySQL%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6&amp;zhida_source=entity" ref="nofollow noopener noreferrer">MySQLä¸»ä»å¤åˆ¶</a>æ˜¯é…äº†çš„ï¼Œå¤‡åº“æ•°æ®ä¹Ÿè·Ÿå¾—ç´§ç´§çš„ã€‚ä½†æœ€è¦å‘½çš„æ˜¯ï¼Œä¸šåŠ¡è®¿é—®çš„é‚£ä¸ªVIPï¼ˆè™šæ‹ŸIPï¼‰ï¼Œåƒè¢«502èƒ¶æ°´ç„Šæ­»äº†ä¸€æ ·ï¼Œè¿˜æ­»æ­»åœ°é’‰åœ¨æ•…éšœæœºä¸Šï¼Œå¯¼è‡´ä¸šåŠ¡å…¨æ–­ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fzhida.zhihu.com%2Fsearch%3Fcontent_id%3D269081829%26content_type%3DArticle%26match_order%3D1%26q%3D%25E9%25A1%25B9%25E7%259B%25AE%25E7%25BB%258F%25E7%2590%2586%26zhida_source%3Dentity" target="_blank" title="https://zhida.zhihu.com/search?content_id=269081829&amp;content_type=Article&amp;match_order=1&amp;q=%E9%A1%B9%E7%9B%AE%E7%BB%8F%E7%90%86&amp;zhida_source=entity" ref="nofollow noopener noreferrer">é¡¹ç›®ç»ç†</a>çš„ç”µè¯æ¯”é—¹é’Ÿè¿˜å‡†æ—¶ï¼Œä¸‰ç‚¹å‡†æ—¶å“èµ·ï¼Œé‚£è¯­æ°”ï¼Œæ¨ä¸å¾—ä»ç”µè¯çº¿é‡Œçˆ¬è¿‡æ¥ææˆ‘è„–å­ã€‚</p>
<p>æŸ¥äº†åŠå¤©ï¼Œæ ¹æºæ‰¾åˆ°äº†ï¼šåªåšäº†æ•°æ®å±‚çš„é«˜å¯ç”¨ï¼ˆä¸»ä»å¤åˆ¶ï¼‰ï¼Œå´å¿½ç•¥äº†<strong>æœåŠ¡å±‚çš„é«˜å¯ç”¨ï¼ˆVIPè‡ªåŠ¨æ¼‚ç§»ï¼‰</strong> ã€‚é«˜å¯ç”¨æ˜¯ä¸ªâ€œæœ¨æ¡¶â€ï¼Œæœ€çŸ­çš„é‚£å—æ¿å†³å®šä½ çš„ç¡çœ è´¨é‡ã€‚ä½ çš„æ•°æ®åŒæ­¥å¾—å†å¿«ï¼Œåº”ç”¨è®¿é—®ä¸åˆ°ä¹Ÿæ˜¯ç™½æ­ã€‚</p>
<p>ä»Šå¤©è¿™ç¯‡ï¼Œå°±æ˜¯è¦æŠŠè¿™å—æœ€çŸ­çš„æ¿è¡¥ä¸Šã€‚æˆ‘å¸¦ä½ ç”¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fzhida.zhihu.com%2Fsearch%3Fcontent_id%3D269081829%26content_type%3DArticle%26match_order%3D1%26q%3DKeepalived%26zhida_source%3Dentity" target="_blank" title="https://zhida.zhihu.com/search?content_id=269081829&amp;content_type=Article&amp;match_order=1&amp;q=Keepalived&amp;zhida_source=entity" ref="nofollow noopener noreferrer">Keepalived</a>è¿™ä¸ªâ€œç¥å™¨â€ï¼Œä»é›¶å¼€å§‹æ­å»ºä¸€ä¸ªçœŸæ­£èƒ½è‡ªåŠ¨åˆ‡æ¢ã€è®©ä½ ç¡å¾—å®‰ç¨³çš„MySQLé«˜å¯ç”¨æ¶æ„ã€‚</p>
<h3 data-id="heading-0">1 Keepalivedæ˜¯ä¸ªå•¥ï¼Ÿ</h3>
<p>åˆ«è¢«é‚£äº›å¤æ‚çš„æ–‡æ¡£å“åˆ°ï¼Œè¿™ç©æ„çš„åŸç†å…¶å®å¾ˆç®€å•ã€‚</p>
<p><strong>é€šä¿—è§£é‡Š:</strong> Â ä½ å¯ä»¥æŠŠKeepalivedæ¯”ä½œä¸¤ä¸ªæ—¶åˆ»å‡†å¤‡â€œæŠ¢å…¬ç« â€ï¼ˆä¹Ÿå°±æ˜¯æˆ‘ä»¬çš„VIPï¼‰çš„åŠå…¬å®¤ä¸»ä»»ï¼ˆä¸¤å°MySQLæœåŠ¡å™¨ï¼‰ã€‚è°çš„â€œå£°æœ›â€ï¼ˆ<code>priority</code>Â ä¼˜å…ˆçº§ï¼‰é«˜ï¼Œé»˜è®¤å°±ç”±è°æ‹¿ç€å…¬ç« å¯¹å¤–æä¾›æœåŠ¡ã€‚è¿™ä¸ªæ‹¿ç€å…¬ç« çš„ä¸»ä»»ï¼Œä¸ºäº†è¯æ˜è‡ªå·±è¿˜æ´»ç€ï¼Œä¼šå®šæœŸåœ¨åŠå…¬å®¤é‡Œâ€œå¼ä¸€å—“å­â€ï¼ˆå‘é€VRRPå¿ƒè·³é€šå‘Šï¼‰ï¼Œå‘Šè¯‰å¦ä¸€ä½ä¸»ä»»ï¼šâ€œæˆ‘è¿˜è¡Œï¼Œå…¬ç« è¿˜åœ¨æˆ‘è¿™ï¼â€ å¦‚æœå¤§å®¶åœ¨è§„å®šæ—¶é—´å†…æ²¡å¬åˆ°ä»–å¼ï¼Œé‚£ä¹ˆå¦ä¸€ä½ä¸»ä»»å°±ä¼šç«‹åˆ»ç«™å‡ºæ¥ï¼ŒæŠŠå…¬ç« æŠ¢è¿‡æ¥ï¼Œç»§ç»­å¯¹å¤–æœåŠ¡ã€‚</p>
<p><strong>æ ¸å¿ƒæ¦‚å¿µ:</strong></p>
<ul>
<li>
<p><strong>VRRPåè®® (Virtual Router Redundancy Protocol):</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fzhida.zhihu.com%2Fsearch%3Fcontent_id%3D269081829%26content_type%3DArticle%26match_order%3D1%26q%3D%25E8%2599%259A%25E6%258B%259F%25E8%25B7%25AF%25E7%2594%25B1%25E5%2586%2597%25E4%25BD%2599%25E5%258D%258F%25E8%25AE%25AE%26zhida_source%3Dentity" target="_blank" title="https://zhida.zhihu.com/search?content_id=269081829&amp;content_type=Article&amp;match_order=1&amp;q=%E8%99%9A%E6%8B%9F%E8%B7%AF%E7%94%B1%E5%86%97%E4%BD%99%E5%8D%8F%E8%AE%AE&amp;zhida_source=entity" ref="nofollow noopener noreferrer">è™šæ‹Ÿè·¯ç”±å†—ä½™åè®®</a>ï¼Œè¿™å°±æ˜¯Keepalivedå®ç°é«˜å¯ç”¨çš„æŠ€æœ¯åŸºç¡€ï¼Œåˆšæ‰è¯´çš„â€œå¼ä¸€å—“å­â€å°±æ˜¯é€šè¿‡è¿™ä¸ªåè®®æ¥çš„ã€‚</p>
</li>
<li>
<p><strong>VIP (<a href="https://link.juejin.cn?target=https%3A%2F%2Fzhida.zhihu.com%2Fsearch%3Fcontent_id%3D269081829%26content_type%3DArticle%26match_order%3D2%26q%3D%25E8%2599%259A%25E6%258B%259FIP%26zhida_source%3Dentity" target="_blank" title="https://zhida.zhihu.com/search?content_id=269081829&amp;content_type=Article&amp;match_order=2&amp;q=%E8%99%9A%E6%8B%9FIP&amp;zhida_source=entity" ref="nofollow noopener noreferrer">è™šæ‹ŸIP</a>):</strong> Â å¯¹å¤–ç»Ÿä¸€çš„æœåŠ¡å…¥å£ï¼Œé«˜å¯ç”¨çš„çµé­‚ã€‚åº”ç”¨ç¨‹åºè¿æ¥çš„æ˜¯è¿™ä¸ªæ°¸ä¸æ”¹å˜çš„IPï¼Œå®ƒåº•ä¸‹æ˜¯å“ªå°æœºå™¨åœ¨å¹²æ´»ï¼Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fzhida.zhihu.com%2Fsearch%3Fcontent_id%3D269081829%26content_type%3DArticle%26match_order%3D1%26q%3D%25E5%25BA%2594%25E7%2594%25A8%25E5%25B1%2582%26zhida_source%3Dentity" target="_blank" title="https://zhida.zhihu.com/search?content_id=269081829&amp;content_type=Article&amp;match_order=1&amp;q=%E5%BA%94%E7%94%A8%E5%B1%82&amp;zhida_source=entity" ref="nofollow noopener noreferrer">åº”ç”¨å±‚</a>å®Œå…¨æ— æ„Ÿã€‚</p>
</li>
<li>
<p><strong>MASTER/BACKUP è§’è‰²:</strong> Â ä¸€ä¸ªVRRPå®ä¾‹ä¸­ï¼ŒåŒä¸€æ—¶é—´åªæœ‰ä¸€å°æ˜¯MASTERï¼ˆä¸»ï¼‰ï¼Œè´Ÿè´£æŒæœ‰VIPã€‚å…¶ä»–éƒ½æ˜¯BACKUPï¼ˆå¤‡ï¼‰ï¼Œæ—¶åˆ»å‡†å¤‡æ¥ç®¡ã€‚è¿™ä¸ªè§’è‰²æ˜¯æ ¹æ®<code>priority</code>å€¼åŠ¨æ€é€‰ä¸¾å‡ºæ¥çš„ã€‚</p>
</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/90cc9274ba03461983b94d8132f5ccf7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2Yee8lueoi-eIseWlveiAhQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771395031&amp;x-signature=ACzgg%2BOLzruO0krI3reEkIzEvTI%3D" alt="" loading="lazy"/></p>
<p>è¿™å¼ å›¾æŠŠå…³ç³»è¯´é€äº†ï¼šå®¢æˆ·ç«¯åªè®¤VIPã€‚VIPå¹³æ—¶åœ¨MASTERèº«ä¸Šã€‚MASTERå’ŒBACKUPä¹‹é—´é€šè¿‡VRRPå¿ƒè·³äº’ç›¸çŸ¥æ™“å¯¹æ–¹çš„å­˜æ´»çŠ¶æ€ã€‚ä¸€æ—¦MASTERæŒ‚äº†ï¼Œå¿ƒè·³ä¸­æ–­ï¼ŒBACKUPå°±ä¼šæŠŠVIPâ€œæŠ¢â€è¿‡æ¥ã€‚</p>
<h3 data-id="heading-1">2 ç¯å¢ƒå‡†å¤‡ä¸å®‰è£…</h3>
<p>å…‰è¯´ä¸ç»ƒå‡æŠŠå¼ï¼Œå¼€æ•´ï¼</p>
<p><strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fzhida.zhihu.com%2Fsearch%3Fcontent_id%3D269081829%26content_type%3DArticle%26match_order%3D1%26q%3D%25E7%258E%25AF%25E5%25A2%2583%25E8%25A7%2584%25E5%2588%2592%26zhida_source%3Dentity" target="_blank" title="https://zhida.zhihu.com/search?content_id=269081829&amp;content_type=Article&amp;match_order=1&amp;q=%E7%8E%AF%E5%A2%83%E8%A7%84%E5%88%92&amp;zhida_source=entity" ref="nofollow noopener noreferrer">ç¯å¢ƒè§„åˆ’</a>:</strong></p>
<ul>
<li>æœåŠ¡å™¨A (ä¸»èŠ‚ç‚¹):Â <code>mysql-node1</code>ï¼Œç‰©ç†IPÂ <code>192.168.31.101</code></li>
<li>æœåŠ¡å™¨B (å¤‡èŠ‚ç‚¹):Â <code>mysql-node2</code>ï¼Œç‰©ç†IPÂ <code>192.168.31.102</code></li>
<li>è™šæ‹ŸIP (VIP):Â <code>192.168.31.1010</code></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fzhida.zhihu.com%2Fsearch%3Fcontent_id%3D269081829%26content_type%3DArticle%26match_order%3D1%26q%3D%25E6%2593%258D%25E4%25BD%259C%25E7%25B3%25BB%25E7%25BB%259F%26zhida_source%3Dentity" target="_blank" title="https://zhida.zhihu.com/search?content_id=269081829&amp;content_type=Article&amp;match_order=1&amp;q=%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F&amp;zhida_source=entity" ref="nofollow noopener noreferrer">æ“ä½œç³»ç»Ÿ</a>:Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fzhida.zhihu.com%2Fsearch%3Fcontent_id%3D269081829%26content_type%3DArticle%26match_order%3D1%26q%3DRed%2BHat%2B8.2%26zhida_source%3Dentity" target="_blank" title="https://zhida.zhihu.com/search?content_id=269081829&amp;content_type=Article&amp;match_order=1&amp;q=Red+Hat+8.2&amp;zhida_source=entity" ref="nofollow noopener noreferrer">Red Hat 8.2</a></li>
<li>Keepalivedç‰ˆæœ¬: 2.0.10 (RHEL 8 è‡ªå¸¦)</li>
</ul>
<p><strong>å®‰è£…æ­¥éª¤ (RHEL 8):</strong> Â è¿™ä¸ªç®€å•ï¼Œä¸¤å°æœºå™¨ä¸Šéƒ½æ‰§è¡Œå°±è¡Œäº†ï¼Œå±äºâ€œæŠ„ä½œä¸šâ€ç¯èŠ‚ã€‚</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># dnf -y install keepalived</span>

<span class="hljs-comment"># æ‰§è¡Œç»“æœå¦‚ä¸‹</span>
<span class="hljs-string">Local</span> <span class="hljs-string">Repository</span>                                                                                      <span class="hljs-number">2.7</span> <span class="hljs-string">MB/s</span> <span class="hljs-string">|</span> <span class="hljs-number">2.8</span> <span class="hljs-string">kB</span>     <span class="hljs-number">00</span><span class="hljs-string">:00</span>    
<span class="hljs-string">Local</span> <span class="hljs-string">Repository</span>                                                                                      <span class="hljs-number">3.1</span> <span class="hljs-string">MB/s</span> <span class="hljs-string">|</span> <span class="hljs-number">3.2</span> <span class="hljs-string">kB</span>     <span class="hljs-number">00</span><span class="hljs-string">:00</span>    
<span class="hljs-string">Dependencies</span> <span class="hljs-string">resolved.</span>
<span class="hljs-string">======================================================================================================================================</span>
 <span class="hljs-string">Package</span>                        <span class="hljs-string">Architecture</span>   <span class="hljs-string">Version</span>                               <span class="hljs-string">Repository</span>                                  <span class="hljs-string">Size</span>
<span class="hljs-string">======================================================================================================================================</span>
<span class="hljs-attr">Installing:</span>
 <span class="hljs-string">keepalived</span>                     <span class="hljs-string">x86_64</span>         <span class="hljs-number">2.0</span><span class="hljs-number">.10</span><span class="hljs-number">-10.</span><span class="hljs-string">el8</span>                         <span class="hljs-string">local-AppStream</span>                            <span class="hljs-number">466</span> <span class="hljs-string">k</span>
<span class="hljs-attr">Installing dependencies:</span>
 <span class="hljs-string">lm_sensors-libs</span>                <span class="hljs-string">x86_64</span>         <span class="hljs-number">3.4</span><span class="hljs-number">.0</span><span class="hljs-number">-21.</span><span class="hljs-string">20180522git70f7e08.el8</span>       <span class="hljs-string">local</span>                                       <span class="hljs-number">59</span> <span class="hljs-string">k</span>
 <span class="hljs-string">mariadb-connector-c</span>            <span class="hljs-string">x86_64</span>         <span class="hljs-number">3.0</span><span class="hljs-number">.7</span><span class="hljs-number">-1.</span><span class="hljs-string">el8</span>                           <span class="hljs-string">local-AppStream</span>                            <span class="hljs-number">148</span> <span class="hljs-string">k</span>
 <span class="hljs-string">net-snmp-agent-libs</span>            <span class="hljs-string">x86_64</span>         <span class="hljs-number">1</span><span class="hljs-string">:5.8-14.el8</span>                          <span class="hljs-string">local-AppStream</span>                            <span class="hljs-number">747</span> <span class="hljs-string">k</span>
 <span class="hljs-string">net-snmp-libs</span>                  <span class="hljs-string">x86_64</span>         <span class="hljs-number">1</span><span class="hljs-string">:5.8-14.el8</span>                          <span class="hljs-string">local</span>                                      <span class="hljs-number">821</span> <span class="hljs-string">k</span>

<span class="hljs-string">Transaction</span> <span class="hljs-string">Summary</span>
<span class="hljs-string">======================================================================================================================================</span>
<span class="hljs-string">Install</span>  <span class="hljs-number">5</span> <span class="hljs-string">Packages</span>

<span class="hljs-attr">Total size:</span> <span class="hljs-number">2.2</span> <span class="hljs-string">M</span>
<span class="hljs-attr">Installed size:</span> <span class="hljs-number">7.2</span> <span class="hljs-string">M</span>
<span class="hljs-attr">Downloading Packages:</span>
<span class="hljs-string">Running</span> <span class="hljs-string">transaction</span> <span class="hljs-string">check</span>
<span class="hljs-string">Transaction</span> <span class="hljs-string">check</span> <span class="hljs-string">succeeded.</span>
<span class="hljs-string">Running</span> <span class="hljs-string">transaction</span> <span class="hljs-string">test</span>
<span class="hljs-string">Transaction</span> <span class="hljs-string">test</span> <span class="hljs-string">succeeded.</span>
<span class="hljs-string">Running</span> <span class="hljs-string">transaction</span>
  <span class="hljs-attr">Running scriptlet:</span> <span class="hljs-string">mariadb-connector-c-3.0.7-1.el8.x86_64</span>                            <span class="hljs-number">1</span><span class="hljs-string">/1</span> 
  <span class="hljs-attr">Preparing        :</span>                                                                   <span class="hljs-number">1</span><span class="hljs-string">/1</span> 
  <span class="hljs-attr">Installing       :</span> <span class="hljs-string">net-snmp-libs-1:5.8-14.el8.x86_64</span>                                 <span class="hljs-number">1</span><span class="hljs-string">/5</span> 
  <span class="hljs-attr">Installing       :</span> <span class="hljs-string">mariadb-connector-c-3.0.7-1.el8.x86_64</span>                            <span class="hljs-number">2</span><span class="hljs-string">/5</span> 
  <span class="hljs-attr">Installing       :</span> <span class="hljs-string">lm_sensors-libs-3.4.0-21.20180522git70f7e08.el8.x86_64</span>            <span class="hljs-number">3</span><span class="hljs-string">/5</span> 
  <span class="hljs-attr">Running scriptlet:</span> <span class="hljs-string">lm_sensors-libs-3.4.0-21.20180522git70f7e08.el8.x86_64</span>            <span class="hljs-number">3</span><span class="hljs-string">/5</span> 
  <span class="hljs-attr">Installing       :</span> <span class="hljs-string">net-snmp-agent-libs-1:5.8-14.el8.x86_64</span>                           <span class="hljs-number">4</span><span class="hljs-string">/5</span> 
  <span class="hljs-attr">Installing       :</span> <span class="hljs-string">keepalived-2.0.10-10.el8.x86_64</span>                                   <span class="hljs-number">5</span><span class="hljs-string">/5</span> 
  <span class="hljs-attr">Running scriptlet:</span> <span class="hljs-string">keepalived-2.0.10-10.el8.x86_64</span>                                   <span class="hljs-number">5</span><span class="hljs-string">/5</span> 
  <span class="hljs-attr">Verifying        :</span> <span class="hljs-string">lm_sensors-libs-3.4.0-21.20180522git70f7e08.el8.x86_64</span>            <span class="hljs-number">1</span><span class="hljs-string">/5</span> 
  <span class="hljs-attr">Verifying        :</span> <span class="hljs-string">net-snmp-libs-1:5.8-14.el8.x86_64</span>                                 <span class="hljs-number">2</span><span class="hljs-string">/5</span> 
  <span class="hljs-attr">Verifying        :</span> <span class="hljs-string">keepalived-2.0.10-10.el8.x86_64</span>                                   <span class="hljs-number">3</span><span class="hljs-string">/5</span> 
  <span class="hljs-attr">Verifying        :</span> <span class="hljs-string">mariadb-connector-c-3.0.7-1.el8.x86_64</span>                            <span class="hljs-number">4</span><span class="hljs-string">/5</span> 
  <span class="hljs-attr">Verifying        :</span> <span class="hljs-string">net-snmp-agent-libs-1:5.8-14.el8.x86_64</span>                           <span class="hljs-number">5</span><span class="hljs-string">/5</span> 
<span class="hljs-string">Installed</span> <span class="hljs-string">products</span> <span class="hljs-string">updated.</span>

<span class="hljs-attr">Installed:</span>
  <span class="hljs-string">keepalived-2.0.10-10.el8.x86_64</span>        <span class="hljs-string">lm_sensors-libs-3.4.0-21.20180522git70f7e08.el8.x86_64</span>      
  <span class="hljs-string">mariadb-connector-c-3.0.7-1.el8.x86_64</span>      <span class="hljs-string">net-snmp-agent-libs-1:5.8-14.el8.x86_64</span>     
  <span class="hljs-string">net-snmp-libs-1:5.8-14.el8.x86_64</span>     

<span class="hljs-string">Complete!</span>


<span class="hljs-comment">## ç¡®è®¤ç‰ˆæœ¬</span>
[<span class="hljs-string">root@node101</span> <span class="hljs-string">~</span>]<span class="hljs-comment"># keepalived --version</span>
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c7767d4f16974a659a7d778019b39999~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2Yee8lueoi-eIseWlveiAhQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771395031&amp;x-signature=b3GvGTNPANejf2CZspd7rbUDQ2g%3D" alt="" loading="lazy"/></p>
<p><strong>é˜²ç«å¢™é…ç½®:</strong></p>
<blockquote>
<p>âš ï¸Â <strong>ç”Ÿäº§å¤§å‘:</strong> Â å…„å¼Ÿä»¬æ³¨æ„äº†ï¼Œè¿™æ˜¯æˆ‘è¸©è¿‡æœ€å¤§çš„å‘ï¼å¿…é¡»æ”¾è¡ŒVRRPåè®®ï¼Keepalivedä¸»å¤‡èŠ‚ç‚¹ä¹‹é—´é VRRP<a href="https://link.juejin.cn?target=https%3A%2F%2Fzhida.zhihu.com%2Fsearch%3Fcontent_id%3D269081829%26content_type%3DArticle%26match_order%3D1%26q%3D%25E5%258D%258F%25E8%25AE%25AE%25E9%2580%259A%25E4%25BF%25A1%26zhida_source%3Dentity" target="_blank" title="https://zhida.zhihu.com/search?content_id=269081829&amp;content_type=Article&amp;match_order=1&amp;q=%E5%8D%8F%E8%AE%AE%E9%80%9A%E4%BF%A1&amp;zhida_source=entity" ref="nofollow noopener noreferrer">åè®®é€šä¿¡</a>ï¼Œä½ æŠŠé˜²ç«å¢™æŒ¡ä½äº†ï¼Œå®ƒä¿©å°±æˆäº†â€œè‹å­å’Œçå­â€ï¼Œäº’ç›¸éƒ½ä»¥ä¸ºå¯¹æ–¹æŒ‚äº†ï¼Œç»“æœå°±æ˜¯ä¸¤è¾¹éƒ½æŠ¢ç€å£°æ˜è‡ªå·±æ˜¯MASTERï¼Œéƒ½å»ç»‘å®šVIPã€‚è¿™å°±æ˜¯ä¼ è¯´ä¸­çš„â€œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fzhida.zhihu.com%2Fsearch%3Fcontent_id%3D269081829%26content_type%3DArticle%26match_order%3D1%26q%3D%25E8%2584%2591%25E8%25A3%2582%26zhida_source%3Dentity" target="_blank" title="https://zhida.zhihu.com/search?content_id=269081829&amp;content_type=Article&amp;match_order=1&amp;q=%E8%84%91%E8%A3%82&amp;zhida_source=entity" ref="nofollow noopener noreferrer">è„‘è£‚</a>â€ï¼ä¸šåŠ¡æµé‡ä¸€ä¼šæ‰“åˆ°Aï¼Œä¸€ä¼šæ‰“åˆ°Bï¼Œæ•°æ®ä¸ä¸€è‡´ï¼Œç­‰ç€èƒŒé”…å§ã€‚</p>
</blockquote>
<p>å¦‚æœæœåŠ¡å™¨ä¸Šé˜²ç«å¢™æ˜¯å¼€ç€çš„ï¼Œå¾—åœ¨ä¸¤å°æœºå™¨ä¸Šéƒ½æ‰§è¡Œï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-meta"># firewall-cmd --add-rich-rule=<span class="hljs-string">'rule protocol value="vrrp" accept'</span> --permanent</span>
<span class="hljs-meta"># firewall-cmd --reload</span>
</code></pre>
<p><strong>å†…æ ¸å‚æ•°è°ƒæ•´:</strong> Â Keepalivedéœ€è¦æŠŠä¸€ä¸ªä¸å±äºæœ¬æœºç½‘å¡çš„IPï¼ˆä¹Ÿå°±æ˜¯VIPï¼‰ç»‘å®šä¸Šæ¥ï¼Œé»˜è®¤Linuxå†…æ ¸æ˜¯ä¸å…è®¸çš„ã€‚æ‰€ä»¥éœ€è¦è°ƒæ•´ä¸€ä¸ªå†…æ ¸å‚æ•°ã€‚</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># echo "net.ipv4.ip_nonlocal_bind = 1" &gt;&gt; /etc/sysctl.conf</span>
<span class="hljs-comment"># sysctl -p</span>

<span class="hljs-comment">## ç»“æœå¦‚ä¸‹</span>
<span class="hljs-section">[root@node101 ~]</span><span class="hljs-comment"># sysctl -p</span>
<span class="hljs-attr">net.ipv4.ip_nonlocal_bind</span> = <span class="hljs-number">1</span>
</code></pre>
<p>è¿™ä¸ªæ“ä½œä¹Ÿæ˜¯ä¸¤å°æœºå™¨éƒ½è¦åšã€‚</p>
<h2 data-id="heading-2">3 é«˜å¯ç”¨æ–¹æ¡ˆå¯¹å†³ï¼šè‡ªåŠ¨ vs æ‰‹åŠ¨</h2>
<p>è®²åˆ°è¿™é‡Œï¼Œå°±åˆ°äº†åå­—è·¯å£ã€‚Keepalivedç»™æˆ‘ä»¬æä¾›äº†èƒ½åŠ›ï¼Œä½†æ€ä¹ˆç”¨è¿™ä¸ªèƒ½åŠ›ï¼Œæ˜¯é—¨å¤§å­¦é—®ã€‚ä¸‹é¢æˆ‘ç»™ä½ ç«¯ä¸Šä¸¤ç›˜èœï¼Œä¸€ç›˜æ˜¯â€œå…¥é—¨çº§è‡ªåŠ¨åˆ‡æ¢â€ï¼Œå¦ä¸€ç›˜æ˜¯â€œç”Ÿäº§çº§æ‰‹åŠ¨åˆ‡æ¢â€ï¼Œå’±ä»¬æŠŠä¼˜ç¼ºç‚¹æ°æ‰¯æ¸…æ¥šäº†ï¼Œä½ å†å†³å®šåœ¨ä½ çš„ç¯å¢ƒé‡Œç”¨å“ªä¸€ç›˜ã€‚</p>
<h3 data-id="heading-3"><strong>æ–¹æ¡ˆä¸€ï¼šå…¥é—¨çº§è‡ªåŠ¨åˆ‡æ¢ (Keepalived + Notifyè„šæœ¬)</strong></h3>
<p>è¿™ä¸ªæ–¹æ¡ˆè¿½æ±‚çš„æ˜¯â€œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fzhida.zhihu.com%2Fsearch%3Fcontent_id%3D269081829%26content_type%3DArticle%26match_order%3D1%26q%3D%25E6%2597%25A0%25E4%25BA%25BA%25E5%2580%25BC%25E5%25AE%2588%26zhida_source%3Dentity" target="_blank" title="https://zhida.zhihu.com/search?content_id=269081829&amp;content_type=Article&amp;match_order=1&amp;q=%E6%97%A0%E4%BA%BA%E5%80%BC%E5%AE%88&amp;zhida_source=entity" ref="nofollow noopener noreferrer">æ— äººå€¼å®ˆ</a>â€ï¼Œä¸€æ—¦MySQLå‡ºé—®é¢˜ï¼Œç³»ç»Ÿè‡ªåŠ¨å®ŒæˆVIPå’Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fzhida.zhihu.com%2Fsearch%3Fcontent_id%3D269081829%26content_type%3DArticle%26match_order%3D1%26q%3D%25E6%2595%25B0%25E6%258D%25AE%25E5%25BA%2593%25E8%25A7%2592%25E8%2589%25B2%26zhida_source%3Dentity" target="_blank" title="https://zhida.zhihu.com/search?content_id=269081829&amp;content_type=Article&amp;match_order=1&amp;q=%E6%95%B0%E6%8D%AE%E5%BA%93%E8%A7%92%E8%89%B2&amp;zhida_source=entity" ref="nofollow noopener noreferrer">æ•°æ®åº“è§’è‰²</a>çš„åˆ‡æ¢ã€‚</p>
<p><strong>A. æ ¸å¿ƒæ€è·¯</strong></p>
<p>å’±ä»¬åˆ©ç”¨Keepalivedçš„<code>notify_*</code>ç³»åˆ—æŒ‡ä»¤ã€‚å½“Keepalivedçš„çŠ¶æ€ä»<code>BACKUP</code>å˜æˆ<code>MASTER</code>æ—¶ï¼Œå°±è‡ªåŠ¨è§¦å‘ä¸€ä¸ªæˆ‘ä»¬å†™å¥½çš„<code>mysql_role_switch.sh</code>è„šæœ¬ï¼Œè®©è¿™ä¸ªè„šæœ¬å»å®Œæˆæ•°æ®åº“çš„<code>read_only</code>çŠ¶æ€åˆ‡æ¢ã€‚</p>
<p><strong>B.Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fzhida.zhihu.com%2Fsearch%3Fcontent_id%3D269081829%26content_type%3DArticle%26match_order%3D1%26q%3D%25E9%2585%258D%25E7%25BD%25AE%25E6%2596%2587%25E4%25BB%25B6%26zhida_source%3Dentity" target="_blank" title="https://zhida.zhihu.com/search?content_id=269081829&amp;content_type=Article&amp;match_order=1&amp;q=%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6&amp;zhida_source=entity" ref="nofollow noopener noreferrer">é…ç½®æ–‡ä»¶</a>Â (ä¸»å¤‡æœ‰åˆ«)</strong></p>
<p><code>vi /etc/keepalived/keepalived.conf</code></p>
<p><strong>ä¸»èŠ‚ç‚¹Â <code>mysql-node1</code>Â (192.168.31.101):</strong></p>
<pre><code class="hljs language-csharp" lang="csharp">! <span class="hljs-function">Configuration File <span class="hljs-keyword">for</span> <span class="hljs-title">keepalived</span> (<span class="hljs-params">Auto-Switch MASTER</span>)

global_defs</span> {
   <span class="hljs-meta"># è·¯ç”±IDï¼Œåœ¨ä¸€ä¸ªå±€åŸŸç½‘å†…ï¼Œè¿™ä¸ªIDå¿…é¡»æ˜¯å”¯ä¸€çš„ï¼Œç›¸å½“äºKeepalivedçš„èº«ä»½è¯</span>
   router_id MYSQL_HA_01
}

vrrp_script chk_mysql {
    script <span class="hljs-string">"/etc/keepalived/check_mysql.sh"</span>  <span class="hljs-meta"># è„šæœ¬è·¯å¾„</span>
    interval <span class="hljs-number">2</span>                                <span class="hljs-meta"># æ¯2ç§’æ‰§è¡Œä¸€æ¬¡</span>
    weight <span class="hljs-number">-20</span>                                <span class="hljs-meta"># å¦‚æœè„šæœ¬å¤±è´¥ï¼ˆé€€å‡ºç é0ï¼‰ï¼Œåˆ™å½“å‰èŠ‚ç‚¹çš„ä¼˜å…ˆçº§é™ä½20</span>
    fall <span class="hljs-number">2</span>                                    <span class="hljs-meta"># è¿ç»­2æ¬¡å¤±è´¥ï¼Œæ‰è®¤ä¸ºæ˜¯çœŸçš„å¤±è´¥</span>
    rise <span class="hljs-number">3</span>                                    <span class="hljs-meta"># è¿ç»­3æ¬¡æˆåŠŸï¼Œæ‰è®¤ä¸ºæ˜¯çœŸçš„æ¢å¤</span>
}

vrrp_instance VI_MYSQL {
    state MASTER
    <span class="hljs-keyword">interface</span> <span class="hljs-title">ens18</span>
    <span class="hljs-title">virtual_router_id</span> 51
    <span class="hljs-title">priority</span> 101
    <span class="hljs-title">advert_int</span> 1
    <span class="hljs-title">authentication</span> { 
		auth_type PASS
		auth_pass <span class="hljs-number">1111</span> 
	}
    virtual_ipaddress { 
		<span class="hljs-number">192.168</span><span class="hljs-number">.31</span><span class="hljs-number">.100</span>/<span class="hljs-number">24</span> dev ens18 label ens18:vip
	}
    track_script { 
		chk_mysql
	}

    <span class="hljs-meta"># çŠ¶æ€å˜æ›´æ—¶è§¦å‘æ€»å¸ä»¤è„šæœ¬</span>
    notify_master <span class="hljs-string">"/etc/keepalived/mysql_role_switch.sh MASTER"</span>
    notify_backup <span class="hljs-string">"/etc/keepalived/mysql_role_switch.sh BACKUP"</span>
    notify_fault <span class="hljs-string">"/etc/keepalived/mysql_role_switch.sh BACKUP"</span>
}
</code></pre>
<p><strong>å¤‡èŠ‚ç‚¹Â <code>mysql-node2</code>Â (192.168.31.102):</strong></p>
<pre><code class="hljs language-csharp" lang="csharp">! <span class="hljs-function">Configuration File <span class="hljs-keyword">for</span> <span class="hljs-title">keepalived</span> (<span class="hljs-params">Auto-Switch BACKUP</span>)

global_defs</span> {
   router_id MYSQL_HA_02
}

vrrp_script chk_mysql {
    <span class="hljs-meta"># ... é…ç½®ä¸ä¸»èŠ‚ç‚¹å®Œå…¨ä¸€æ · ...</span>
}

vrrp_instance VI_MYSQL {
    state BACKUP
    <span class="hljs-keyword">interface</span> <span class="hljs-title">ens18</span>
    <span class="hljs-title">virtual_router_id</span> 51
    <span class="hljs-title">priority</span> 100
    <span class="hljs-title">advert_int</span> 1
    <span class="hljs-title">nopreempt</span>  # å…³é”®ï¼é˜²æ­¢ä¸»åº“æ¢å¤å<span class="hljs-title">VIP</span>æ¥å›æŠ–åŠ¨
    <span class="hljs-title">authentication</span> { 
		auth_type PASS
		auth_pass <span class="hljs-number">1111</span> 
	}
    virtual_ipaddress { 
		<span class="hljs-number">192.168</span><span class="hljs-number">.31</span><span class="hljs-number">.100</span>/<span class="hljs-number">24</span> dev ens18 label ens18:vip
	}
    track_script { 
		chk_mysql
	}

    <span class="hljs-meta"># çŠ¶æ€å˜æ›´æ—¶è§¦å‘æ€»å¸ä»¤è„šæœ¬</span>
    notify_master <span class="hljs-string">"/etc/keepalived/mysql_role_switch.sh MASTER"</span>
    notify_backup <span class="hljs-string">"/etc/keepalived/mysql_role_switch.sh BACKUP"</span>
    notify_fault <span class="hljs-string">"/etc/keepalived/mysql_role_switch.sh BACKUP"</span>
}
</code></pre>
<p><strong>æ ¸å¿ƒå‚æ•°è®²è§£:</strong></p>
<ul>
<li><code>virtual_router_id</code>: ä¸»å¤‡çš„â€œæ¥å¤´æš—å·â€ï¼Œå¿…é¡»ä¸€æ ·ï¼Œä¸ç„¶å®ƒä¿©ä¸åœ¨ä¸€ä¸ªé¢‘é“ï¼Œå„ç©å„çš„ã€‚</li>
<li><code>priority</code>: é€‰ä¸¾çš„æ ¸å¿ƒï¼Œè°çš„æ•°å­—å¤§è°å°±æ˜¯MASTERã€‚</li>
<li><code>vrrp_script</code>Â &amp;Â <code>track_script</code>: è¿™ä¸¤ä¸ªæ˜¯é»„é‡‘æ­æ¡£ã€‚å‰è€…å®šä¹‰äº†â€œæ€ä¹ˆæ£€æŸ¥â€ï¼Œåè€…è´Ÿè´£â€œæŠŠæ£€æŸ¥ç»“æœç”¨èµ·æ¥â€ã€‚å½“<code>chk_mysql</code>è„šæœ¬æ‰§è¡Œå¤±è´¥ï¼Œ<code>track_script</code>å°±ä¼šè®©å½“å‰èŠ‚ç‚¹çš„<code>priority</code>å‡å»<code>weight</code>å®šä¹‰çš„å€¼ï¼ˆ101 - 20 = 81ï¼‰ã€‚81æ¯”å¤‡æœºçš„100ä½ï¼Œäºæ˜¯VIPå°±æ¼‚ç§»äº†ã€‚</li>
<li><code>nopreempt</code>:Â <strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fzhida.zhihu.com%2Fsearch%3Fcontent_id%3D269081829%26content_type%3DArticle%26match_order%3D1%26q%3D%25E6%259C%2580%25E4%25BD%25B3%25E5%25AE%259E%25E8%25B7%25B5%26zhida_source%3Dentity" target="_blank" title="https://zhida.zhihu.com/search?content_id=269081829&amp;content_type=Article&amp;match_order=1&amp;q=%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5&amp;zhida_source=entity" ref="nofollow noopener noreferrer">æœ€ä½³å®è·µ</a>ï¼</strong> Â è¿™ä¸ªå‚æ•°åªåœ¨<code>BACKUP</code>èŠ‚ç‚¹ä¸Šé…ã€‚æ„æ€æ˜¯â€œä¸æŠ¢å â€ã€‚å‡è®¾åŸæ¥çš„ä¸»åº“<code>mysql-node1</code>åªæ˜¯ç½‘ç»œæŠ–åŠ¨äº†ä¸€ä¸‹ï¼Œå¯¼è‡´VIPåˆ‡åˆ°äº†<code>mysql-node2</code>ã€‚å‡ ç§’å<code>mysql-node1</code>æ¢å¤äº†ï¼Œå¦‚æœæ²¡æœ‰<code>nopreempt</code>ï¼Œå®ƒçš„ä¼˜å…ˆçº§ï¼ˆ101ï¼‰è¿˜æ˜¯æ¯”<code>mysql-node2</code>ï¼ˆ100ï¼‰é«˜ï¼Œå®ƒä¼šç«‹åˆ»æŠŠVIPæŠ¢å›æ¥ã€‚è¿™ä¸€æ¥ä¸€å›çš„åˆ‡æ¢ï¼Œå¯¹ä¸šåŠ¡å¯èƒ½æ˜¯è‡´å‘½çš„æŠ–åŠ¨ã€‚é…ç½®äº†<code>nopreempt</code>ï¼Œå°±æ„å‘³ç€åªè¦<code>mysql-node2</code>è¿˜æ´»ç€ï¼Œå³ä½¿<code>mysql-node1</code>æ¢å¤äº†ï¼Œä¹Ÿå¾—â€œé è¾¹ç«™â€ï¼ŒVIPä¸ä¼šåˆ‡å›å»ã€‚è¿™å¤§å¤§å‡å°‘äº†ä¸å¿…è¦çš„åˆ‡æ¢ï¼Œç”Ÿäº§ç¯å¢ƒæ›´ç¨³å®šã€‚</li>
</ul>
<p><strong>C. æ ¸å¿ƒè„šæœ¬ (ä¾¦å¯Ÿå…µ + æ€»å¸ä»¤)</strong></p>
<p><code>check_mysql.sh</code>è´Ÿè´£é«˜é¢‘ä¾¦å¯Ÿï¼Œ<code>mysql_role_switch.sh</code>è´Ÿè´£åœ¨æ”¶åˆ°Keepalivedå‘½ä»¤åï¼Œæ‰§è¡Œæ•°æ®åº“è§’è‰²åˆ‡æ¢çš„é‡æ“ä½œã€‚</p>
<p><code>/etc/keepalived/check_mysql.sh</code></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>

<span class="hljs-comment"># ä½¿ç”¨mysqladminå·¥å…·æ£€æŸ¥MySQLæœåŠ¡çš„å¯ç”¨æ€§</span>
mysqladmin ping -u root -p<span class="hljs-string">'YourComplexP@ssw0rd!_2025'</span> &gt; /dev/null 2&gt;&amp;1
<span class="hljs-comment"># æ£€æŸ¥ä¸Šä¸€æ¡å‘½ä»¤çš„é€€å‡ºç </span>
<span class="hljs-keyword">if</span> [ $? -eq 0 ]; <span class="hljs-keyword">then</span>
    <span class="hljs-comment"># å¦‚æœpingé€šï¼Œè¯´æ˜MySQLæœåŠ¡æ­£å¸¸ï¼Œè„šæœ¬ä»¥é€€å‡ºç 0ç»“æŸ</span>
    <span class="hljs-built_in">exit</span> 0
<span class="hljs-keyword">else</span>
    <span class="hljs-comment"># å¦‚æœpingä¸é€šï¼Œè¯´æ˜MySQLæœåŠ¡å¼‚å¸¸ï¼Œè„šæœ¬ä»¥é€€å‡ºç 1ç»“æŸ</span>
    <span class="hljs-built_in">exit</span> 1
<span class="hljs-keyword">fi</span>
</code></pre>
<p><code>/etc/keepalived/mysql_role_switch.sh</code></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>

STATE=<span class="hljs-variable">$1</span>
LOG_FILE=<span class="hljs-string">"/var/log/keepalived-mysql-state.log"</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-subst">$(date)</span>: Script called with state <span class="hljs-variable">$STATE</span>"</span> &gt;&gt; <span class="hljs-variable">$LOG_FILE</span>

<span class="hljs-keyword">case</span> <span class="hljs-variable">$STATE</span> <span class="hljs-keyword">in</span>
    <span class="hljs-string">"MASTER"</span>)
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"Transitioning to MASTER..."</span> &gt;&gt; <span class="hljs-variable">$LOG_FILE</span>
        <span class="hljs-comment"># 1. åœæ­¢ä»å±å…³ç³»</span>
        mysql -u root -p<span class="hljs-string">'YourComplexP@ssw0rd!_2025'</span> -e <span class="hljs-string">"STOP SLAVE;"</span>
        
        <span class="hljs-comment"># 2. å°†æ•°æ®åº“è®¾ç½®ä¸ºå¯å†™</span>
        mysql -u root -p<span class="hljs-string">'YourComplexP@ssw0rd!_2025'</span> -e <span class="hljs-string">"SET GLOBAL read_only = OFF;"</span>
        
        <span class="hljs-comment"># 3. å¦‚æœéœ€è¦ï¼Œå¯ä»¥é‡ç½®ä¸»åº“ä¿¡æ¯ï¼ˆåœ¨æŸäº›åœºæ™¯ä¸‹éœ€è¦ï¼‰</span>
        <span class="hljs-comment"># mysql -u root -p'YourComplexP@ssw0rd!_2025' -e "RESET MASTER;"</span>

        <span class="hljs-built_in">echo</span> <span class="hljs-string">"Transition to MASTER finished."</span> &gt;&gt; <span class="hljs-variable">$LOG_FILE</span>
        ;;
    <span class="hljs-string">"BACKUP"</span>)
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"Transitioning to BACKUP..."</span> &gt;&gt; <span class="hljs-variable">$LOG_FILE</span>
        <span class="hljs-comment"># 1. å°†æ•°æ®åº“è®¾ç½®ä¸ºåªè¯»</span>
        mysql -u root -p<span class="hljs-string">'YourComplexP@ssw0rd!_2025'</span> -e <span class="hljs-string">"SET GLOBAL read_only = ON;"</span>
        
        <span class="hljs-comment"># 2. (å¯é€‰ä½†æ¨è) å°è¯•é‡æ–°é…ç½®å¹¶å¯åŠ¨ä¸æ–°ä¸»åº“çš„åŒæ­¥</span>
        <span class="hljs-comment"># è¿™ä¸€æ­¥æ¯”è¾ƒå¤æ‚ï¼Œé€šå¸¸éœ€è¦å¤–éƒ¨è„šæœ¬æˆ–äººå·¥ä»‹å…¥æ¥è·å–æ–°ä¸»åº“çš„binlogä½ç‚¹</span>
        <span class="hljs-comment"># åœ¨ä¸€ä¸ªç®€å•çš„è‡ªåŠ¨åˆ‡æ¢åœºæ™¯ä¸­ï¼Œå¯ä»¥æš‚æ—¶åªåšé™çº§ä¸ºåªè¯»çš„æ“ä½œ</span>
        <span class="hljs-comment"># mysql -u root -p'YourComplexP@ssw0rd!_2025' -e "START SLAVE;"</span>

        <span class="hljs-built_in">echo</span> <span class="hljs-string">"Transition to BACKUP finished."</span> &gt;&gt; <span class="hljs-variable">$LOG_FILE</span>
        ;;
    *)
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"Unknown state. No action taken."</span> &gt;&gt; <span class="hljs-variable">$LOG_FILE</span>
        <span class="hljs-built_in">exit</span> 1
        ;;
<span class="hljs-keyword">esac</span>

<span class="hljs-built_in">exit</span> 0
</code></pre>
<blockquote>
<p>æ³¨æ„ï¼šè¿™ä¸¤ä¸ªè„šæœ¬çš„æƒé™å’Œå±ä¸»æ˜¯å¦æ­£ç¡®ï¼Ÿè„šæœ¬é‡Œçš„<a href="https://link.juejin.cn?target=https%3A%2F%2Fzhida.zhihu.com%2Fsearch%3Fcontent_id%3D269081829%26content_type%3DArticle%26match_order%3D1%26q%3D%25E6%2595%25B0%25E6%258D%25AE%25E5%25BA%2593%25E5%25AF%2586%25E7%25A0%2581%26zhida_source%3Dentity" target="_blank" title="https://zhida.zhihu.com/search?content_id=269081829&amp;content_type=Article&amp;match_order=1&amp;q=%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AF%86%E7%A0%81&amp;zhida_source=entity" ref="nofollow noopener noreferrer">æ•°æ®åº“å¯†ç </a>æ˜¯å¦åšäº†å®‰å…¨å¤„ç†ï¼Ÿ</p>
</blockquote>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">chmod</span> +x /etc/keepalived/check_mysql.sh /etc/keepalived/mysql_role_switch.sh
<span class="hljs-built_in">ls</span> -l /etc/keepalived/check_mysql.sh /etc/keepalived/mysql_role_switch.sh

<span class="hljs-comment">## å¯åŠ¨æœåŠ¡</span>
systemctl <span class="hljs-built_in">enable</span> --now keepalived
systemctl start keepalived
systemctl status keepalived


<span class="hljs-comment">## ç¡®è®¤vipåœ°å€</span>
ip addr dev ens18

<span class="hljs-comment">## æŸ¥çœ‹æ—¥å¿—</span>
<span class="hljs-built_in">tail</span> -f /var/log/messages | grep Keepalived
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5f04f3ec480e47c8bb8a7f1be5f26c6c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2Yee8lueoi-eIseWlveiAhQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771395031&amp;x-signature=MsQ54tikBWGJ16n0YNo%2Fv7AhtAU%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/126c272b001248e5a106f00c9c4b28a1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2Yee8lueoi-eIseWlveiAhQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771395031&amp;x-signature=ohFv%2FqiCZdhB94bZpR2NR7XFmLU%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8cb4ec7babd14711b9e524379ceba3c8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2Yee8lueoi-eIseWlveiAhQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771395031&amp;x-signature=XNdiPtcimly9WEBumavX0jX7lK4%3D" alt="" loading="lazy"/></p>
<p><strong>D. åˆ‡æ¢æ¼”ç»ƒ</strong></p>
<p>åœ¨ä¸»èŠ‚ç‚¹<code>mysql-node1</code>ä¸Šæ‰§è¡Œ<code>systemctl stop mysqld</code>ï¼Œä½ ä¼šè§‚å¯Ÿåˆ°VIPåœ¨å‡ ç§’å†…è‡ªåŠ¨æ¼‚ç§»åˆ°<code>mysql-node2</code>ï¼ŒåŒæ—¶<code>mysql-node2</code>çš„æ•°æ®åº“<code>read_only</code>çŠ¶æ€è‡ªåŠ¨å˜ä¸º<code>OFF</code>ã€‚</p>
<p>è¿è¡Œè„šæœ¬â€<a href="https://link.juejin.cn?target=https%3A%2F%2Fzhida.zhihu.com%2Fsearch%3Fcontent_id%3D269081829%26content_type%3DArticle%26match_order%3D1%26q%3D%25E6%25A8%25A1%25E6%258B%259F%25E4%25BA%25A4%25E6%2598%2593%26zhida_source%3Dentity" target="_blank" title="https://zhida.zhihu.com/search?content_id=269081829&amp;content_type=Article&amp;match_order=1&amp;q=%E6%A8%A1%E6%8B%9F%E4%BA%A4%E6%98%93&amp;zhida_source=entity" ref="nofollow noopener noreferrer">æ¨¡æ‹Ÿäº¤æ˜“</a>å¾€æ•°æ®åº“ä¸­æ’å…¥æ•°æ®ï¼Œå¹¶æ£€æŸ¥vipé£˜é€¸æƒ…å†µ</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment">## æ¨¡æ‹Ÿäº¤æ˜“ï¼Œè¿æ¥100</span>
<span class="hljs-section">[root@node101 ~]</span><span class="hljs-comment"># ./simulate_trx.sh </span>
å¼€å§‹æ¨¡æ‹Ÿäº¤æ˜“ï¼ŒæŒ‰ CTRL+C åœæ­¢...
æ’å…¥æ–°äº¤æ˜“: <span class="hljs-attr">trx_id</span> = <span class="hljs-number">15048884</span>, cust_id = <span class="hljs-number">674</span>, amt = <span class="hljs-number">232.11</span>,  è€—æ—¶: .<span class="hljs-number">037132763</span>s
æ’å…¥æ–°äº¤æ˜“: <span class="hljs-attr">trx_id</span> = <span class="hljs-number">15048885</span>, cust_id = <span class="hljs-number">752</span>, amt = <span class="hljs-number">116.62</span>,  è€—æ—¶: .<span class="hljs-number">035379153</span>s

<span class="hljs-comment">## åœæ­¢èŠ‚ç‚¹1 mysqld</span>
<span class="hljs-section">[root@node101 ~]</span><span class="hljs-comment"># systemctl stop mysqld</span>


<span class="hljs-comment">## èŠ‚ç‚¹2ä¸Šç›‘å¬ VRRPåè®®çš„åŒ…</span>
<span class="hljs-section">[root@node102 ~]</span><span class="hljs-comment"># tcpdump -i any -n vrrp</span>
tcpdump: verbose output suppressed, use -v or -vv for full protocol decode
listening on any, link-type LINUX_SLL (Linux cooked), capture size 262144 bytes
19:05:29.651565 IP 192.168.31.101 &gt; 224.0.0.18: VRRPv2, Advertisement, vrid 51, prio 81, authtype simple, intvl 1s, length 20
19:05:30.651689 IP 192.168.31.101 &gt; 224.0.0.18: VRRPv2, Advertisement, vrid 51, prio 81, authtype simple, intvl 1s, length 20
19:05:31.651886 IP 192.168.31.101 &gt; 224.0.0.18: VRRPv2, Advertisement, vrid 51, prio 81, authtype simple, intvl 1s, length 20

<span class="hljs-comment">## è§‚å¯ŸèŠ‚ç‚¹1 keepalivedæ—¥å¿—</span>
Nov 15 19:00:00 node101 Keepalived_vrrp<span class="hljs-section">[48612]</span>: Script `chk_mysql` now returning 1
Nov 15 19:00:02 node101 Keepalived_vrrp<span class="hljs-section">[48612]</span>: VRRP_Script(chk_mysql) failed (exited with status 1)
Nov 15 19:00:02 node101 Keepalived_vrrp<span class="hljs-section">[48612]</span>: (VI_MYSQL) Changing effective priority from 101 to 81

<span class="hljs-comment">## è§‚å¯ŸèŠ‚ç‚¹2 keepalivedæ—¥å¿—</span>
Nov 15 19:09:53 node102 Keepalived_vrrp<span class="hljs-section">[13558]</span>: (VI_MYSQL) Backup received priority 0 advertisement
Nov 15 19:09:53 node102 Keepalived_vrrp<span class="hljs-section">[13558]</span>: (VI_MYSQL) Receive advertisement timeout
Nov 15 19:09:53 node102 Keepalived_vrrp<span class="hljs-section">[13558]</span>: (VI_MYSQL) Entering MASTER STATE
Nov 15 19:09:53 node102 Keepalived_vrrp<span class="hljs-section">[13558]</span>: (VI_MYSQL) setting VIPs.
Nov 15 19:09:53 node102 Keepalived_vrrp<span class="hljs-section">[13558]</span>: Sending gratuitous ARP on ens18 for 192.168.31.100
Nov 15 19:09:53 node102 Keepalived_vrrp<span class="hljs-section">[13558]</span>: (VI_MYSQL) Sending/queueing gratuitous ARPs on ens18 for 192.168.31.100
Nov 15 19:09:53 node102 Keepalived_vrrp<span class="hljs-section">[13558]</span>: Sending gratuitous ARP on ens18 for 192.168.31.100
Nov 15 19:09:53 node102 Keepalived_vrrp<span class="hljs-section">[13558]</span>: Sending gratuitous ARP on ens18 for 192.168.31.100
Nov 15 19:09:53 node102 Keepalived_vrrp<span class="hljs-section">[13558]</span>: Sending gratuitous ARP on ens18 for 192.168.31.100
Nov 15 19:09:53 node102 Keepalived_vrrp<span class="hljs-section">[13558]</span>: Sending gratuitous ARP on ens18 for 192.168.31.100
Nov 15 19:09:58 node102 Keepalived_vrrp<span class="hljs-section">[13558]</span>: Sending gratuitous ARP on ens18 for 192.168.31.100
Nov 15 19:09:58 node102 Keepalived_vrrp<span class="hljs-section">[13558]</span>: (VI_MYSQL) Sending/queueing gratuitous ARPs on ens18 for 192.168.31.100
Nov 15 19:09:58 node102 Keepalived_vrrp<span class="hljs-section">[13558]</span>: Sending gratuitous ARP on ens18 for 192.168.31.100
Nov 15 19:09:58 node102 Keepalived_vrrp<span class="hljs-section">[13558]</span>: Sending gratuitous ARP on ens18 for 192.168.31.100
Nov 15 19:09:58 node102 Keepalived_vrrp<span class="hljs-section">[13558]</span>: Sending gratuitous ARP on ens18 for 192.168.31.100
Nov 15 19:09:58 node102 Keepalived_vrrp<span class="hljs-section">[13558]</span>: Sending gratuitous ARP on ens18 for 192.168.31.100

<span class="hljs-comment">## æŸ¥çœ‹vipæƒ…å†µ</span>
<span class="hljs-section">[root@node101 ~]</span><span class="hljs-comment"># ip addr show dev ens18</span>
2: ens18: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel state UP group default qlen 1000
    link/ether bc:24:11:33:db:80 brd ff:ff:ff:ff:ff:ff
    inet 192.168.31.101/24 brd 192.168.31.255 scope global noprefixroute ens18
       valid_lft forever preferred_lft forever
    inet6 240e:3a1:4a76:d360:9017:c87b:599f:5/128 scope global dynamic noprefixroute 
       valid_lft 6744sec preferred_lft 3144sec
    inet6 240e:3a1:4a76:d360:4360:afd0:895b:8930/64 scope global dynamic noprefixroute 
       valid_lft 7006sec preferred_lft 3406sec
    inet6 fe80::6bfb:14c8:d785:33ba/64 scope link noprefixroute 
       valid_lft forever preferred_lft forever

<span class="hljs-section">[root@node102 ~]</span><span class="hljs-comment"># ip addr show dev ens18</span>
2: ens18: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel state UP group default qlen 1000
    link/ether bc:24:11:70:62:0d brd ff:ff:ff:ff:ff:ff
    inet 192.168.31.102/24 brd 192.168.31.255 scope global noprefixroute ens18
       valid_lft forever preferred_lft forever
    inet 192.168.31.100/24 scope global secondary ens18:vip
       valid_lft forever preferred_lft forever
    inet6 240e:3a1:4a76:d360:766b:5fde:6699:9c81/64 scope global dynamic noprefixroute 
       valid_lft 7021sec preferred_lft 3421sec
    inet6 fe80::6bfb:14c8:d785:33ba/64 scope link dadfailed tentative noprefixroute 
       valid_lft forever preferred_lft forever
    inet6 fe80::dd3d:a0e0:db46:cca0/64 scope link noprefixroute 
       valid_lft forever preferred_lft forever

<span class="hljs-comment">## æŸ¥çœ‹èŠ‚ç‚¹2çš„çŠ¶æ€</span>
mysql&gt; show variables like 'read_only'<span class="hljs-comment">;</span>
+---------------+-------+
| Variable_name | Value |
+---------------+-------+
| read_only     | OFF   |
+---------------+-------+
1 row in set (0.00 sec)
</code></pre>
<p><strong>E. æ–¹æ¡ˆå¼±ç‚¹ (ä¸€é’ˆè§è¡€)</strong></p>
<blockquote>
<p>âš ï¸Â <strong>è€å…µæé†’:</strong> Â è¿™ä¸ªæ–¹æ¡ˆçœ‹èµ·æ¥å¾ˆç¾ï¼Œä½†åœ¨å¤æ‚çš„ç”Ÿäº§ç¯å¢ƒï¼Œå®ƒçš„â€œè‡ªåŠ¨â€å¯èƒ½ä¼šå˜æˆâ€œè‡ªåŠ¨æƒ¹ç¥¸â€ï¼š</p>
</blockquote>
<ol>
<li>
<p><strong>æ²¡æœ‰â€œä»²è£â€æœºåˆ¶ï¼š</strong> Â å¦‚æœä¸»å¤‡ä¹‹é—´çš„å¿ƒè·³ç½‘ç»œæ–­äº†ï¼ˆæ¯”å¦‚äº¤æ¢æœºæ•…éšœï¼‰ï¼Œä½†ä¸¤å°æœåŠ¡å™¨éƒ½æ´»ç€ï¼Œå°±ä¼šå¯¼è‡´â€œè„‘è£‚â€ã€‚åŒæ–¹éƒ½è®¤ä¸ºå¯¹æ–¹æŒ‚äº†ï¼Œéƒ½æŠ¢ç€å½“<code>MASTER</code>ï¼Œéƒ½ä¼šæŠŠè‡ªå·±å˜æˆå¯å†™ï¼Œ<strong>æ•°æ®ä¼šå½»åº•å†™ä¹±</strong>ï¼</p>
</li>
<li>
<p><strong>æ•°æ®ä¸€è‡´æ€§éšæ‚£ï¼š</strong> Â åˆ‡æ¢åªä¾èµ–äºç®€å•çš„å¥åº·æ£€æŸ¥ï¼Œæ²¡æœ‰MHAé‚£ç§â€œææ•°æ®â€çš„è¿‡ç¨‹ã€‚å¦‚æœä¸»åº“å®•æœºå‰æœ‰ä¸€ç¬”äº‹åŠ¡çš„binlogæ²¡æ¥å¾—åŠä¼ åˆ°å¤‡åº“ï¼Œè¿™ç¬”æ•°æ®å°±<strong>æ°¸ä¹…ä¸¢å¤±</strong>äº†ã€‚</p>
</li>
<li>
<p><strong>æ¢å¤æµç¨‹å¤æ‚ï¼š</strong> Â è€çš„ä¸»åº“ä¿®å¥½åï¼Œæ€ä¹ˆè®©å®ƒé‡æ–°ä»¥<code>SLAVE</code>çš„èº«ä»½åŠ å…¥é›†ç¾¤ï¼Ÿè¿™ä¸ªè¿‡ç¨‹è‡ªåŠ¨åŒ–è„šæœ¬å¾ˆéš¾åšå¾—å®Œç¾ï¼Œå¤§æ¦‚ç‡éœ€è¦DBAæ‰‹åŠ¨ä»‹å…¥ï¼Œåè€Œå¢åŠ äº†æ“ä½œé£é™©ã€‚</p>
</li>
</ol>
<p>æ­£æ˜¯å› ä¸ºæœ‰è¿™äº›â€œå‘â€ï¼Œæ‰€ä»¥å¾ˆå¤šä¸¥è°¨çš„å›¢é˜Ÿï¼Œç‰¹åˆ«æ˜¯é‡‘èè¡Œä¸šï¼Œä¼šé€‰æ‹©ä¸‹é¢è¿™ç§çœ‹èµ·æ¥â€œç¬¨â€ï¼Œä½†å®é™…ä¸Šæ›´ç¨³å¦¥çš„æ–¹æ¡ˆã€‚</p>
<h3 data-id="heading-4"><strong>æ–¹æ¡ˆäºŒï¼šç”Ÿäº§çº§æ‰‹åŠ¨åˆ‡æ¢ (SOPä¿éšœ)</strong></h3>
<p>è¿™ä¸ªæ–¹æ¡ˆçš„å“²å­¦æ˜¯ï¼š<strong>æœºå™¨è´Ÿè´£ç›‘æ§å’Œæ¼‚ç§»VIPï¼Œä½†åˆ‡æ¢å†³ç­–ç”±äººæ¥åšã€‚</strong> Â æˆ‘ä»¬æŠŠKeepalivedå½“æˆä¸€ä¸ªæ‰‹åŠ¨çš„ã€é«˜æ•ˆç‡çš„VIPåˆ‡æ¢å·¥å…·ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªè‡ªåŠ¨å†³ç­–ç³»ç»Ÿã€‚</p>
<p><strong>A. æ ¸å¿ƒæ€è·¯</strong></p>
<p>ä¸¤å°æœåŠ¡å™¨ä¸Šçš„Keepalivedé…ç½®æ–‡ä»¶<strong>å®Œå…¨ä¸€æ ·</strong>ï¼å¹¶ä¸”ï¼Œ<strong>åœ¨ä»»ä½•æ—¶å€™ï¼Œåªå…è®¸ä¸€å°æœåŠ¡å™¨ä¸Šçš„KeepalivedæœåŠ¡æ˜¯è¿è¡ŒçŠ¶æ€</strong>ã€‚åˆ‡æ¢æ—¶ï¼Œæˆ‘ä»¬ä¸¥æ ¼æŒ‰ç…§æ ‡å‡†æ“ä½œæµç¨‹ï¼ˆSOPï¼‰ï¼Œå…ˆæ‰‹åŠ¨å®Œæˆæ•°æ®åº“è§’è‰²çš„ç¡®è®¤å’Œå˜æ›´ï¼Œç„¶åå†â€œä¸€åœä¸€å¯â€KeepalivedæœåŠ¡ï¼Œå®ŒæˆVIPçš„åˆ‡æ¢ã€‚</p>
<p><strong>B. ç»Ÿä¸€é…ç½®æ–‡ä»¶ (ä¸¤è¾¹å®Œå…¨ä¸€æ ·)</strong></p>
<p>æŠŠä¸‹é¢è¿™ä»½é…ç½®åŸå°ä¸åŠ¨åœ°æ”¾åˆ°<code>mysql-node1</code>å’Œ<code>mysql-node2</code>çš„<code>/etc/keepalived/keepalived.conf</code>ã€‚</p>
<pre><code class="hljs language-perl" lang="perl">! Configuration File <span class="hljs-keyword">for</span> keepalived (Manual-Switch)

global_defs {
   <span class="hljs-comment"># åå­—å¯ä»¥æ ¹æ®ä½ çš„ä¸šåŠ¡æ¥ï¼Œä½†ä¸¤è¾¹è¦ä¸€æ ·</span>
   router_id MYSQL_HA_CLUSTER
}

vrrp_instance VI_MYSQL {
    <span class="hljs-comment"># é»˜è®¤éƒ½å†™MASTERï¼Œè°å…ˆå¯åŠ¨è°å°±æ˜¯MASTER</span>
    <span class="hljs-keyword">state</span> MASTER
    interface ens192             <span class="hljs-comment"># æ ¹æ®ä½ çš„å®é™…ç½‘å¡ä¿®æ”¹</span>
    virtual_router_id <span class="hljs-number">51</span>         <span class="hljs-comment"># å¿…é¡»ä¸€æ ·</span>
    priority <span class="hljs-number">100</span>                 <span class="hljs-comment"># ä¼˜å…ˆçº§ä¸€æ ·ï¼Œè°å…ˆå¯åŠ¨è°ä¼˜å…ˆ</span>
    advert_int <span class="hljs-number">1</span>
    authentication {
        auth_type PASS
        auth_pass <span class="hljs-number">1111</span>
    }
    virtual_ipaddress {
        <span class="hljs-number">192.168</span>.<span class="hljs-number">31.100</span>       <span class="hljs-comment"># æ ¹æ®ä½ çš„VIPä¿®æ”¹</span>
    }
    <span class="hljs-comment"># æ³¨æ„ï¼è¿™ä¸ªæ–¹æ¡ˆé‡Œï¼Œæˆ‘ä»¬ä¸ä½¿ç”¨ä»»ä½•çš„track_scriptæˆ–notifyè„šæœ¬ï¼</span>
}
</code></pre>
<blockquote>
<p>âš ï¸Â <strong>å…³é”®ç‚¹:</strong> Â è¿™ä¸ªé…ç½®é‡Œæ²¡æœ‰<code>track_script</code>ï¼Keepalivedä¸å†å…³å¿ƒMySQLçš„æ­»æ´»ï¼Œå®ƒåªåšä¸€ä¸ªçº¯ç²¹çš„VIPç®¡ç†å·¥å…·ã€‚å®ƒçš„å¯åœï¼Œå®Œå…¨ç”±DBAæŒæ§ã€‚</p>
</blockquote>
<p><strong>C. æ ‡å‡†åˆ‡æ¢æµç¨‹</strong></p>
<p>å‡è®¾å½“å‰ä¸»åº“æ˜¯<code>mysql-node1</code>ï¼Œæˆ‘ä»¬è¦åˆ‡æ¢åˆ°<code>mysql-node2</code>ã€‚</p>
<p><strong>ç¬¬1æ­¥ï¼šåœ¨æ—§ä¸»åº“Â <code>mysql-node1</code>Â ä¸Šæ“ä½œ</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1. åœæ­¢KeepalivedæœåŠ¡ï¼Œé‡Šæ”¾VIP</span>
systemctl stop keepalived
<span class="hljs-built_in">echo</span> <span class="hljs-string">"Keepalived on old master stopped."</span>

<span class="hljs-comment"># 2. ç¡®è®¤VIPå·²é‡Šæ”¾</span>
ip a | grep <span class="hljs-string">"192.168.31.100"</span>  <span class="hljs-comment"># ç¡®ä¿è¿™æ¡å‘½ä»¤æ²¡æœ‰ä»»ä½•è¾“å‡º</span>

<span class="hljs-comment"># 3. å°†æ—§ä¸»åº“è®¾ç½®ä¸ºåªè¯»ï¼Œé˜²æ­¢æ–°æ•°æ®å†™å…¥</span>
mysql -e <span class="hljs-string">"SET GLOBAL read_only = ON;"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"Old master is now read-only."</span>
</code></pre>
<p><strong>ç¬¬2æ­¥ï¼šåœ¨æ–°ä¸»åº“Â <code>mysql-node2</code>Â ä¸Šæ“ä½œ</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1. ç¡®è®¤ä¸æ—§ä¸»åº“çš„æ•°æ®åŒæ­¥å·²å®Œæˆ (éå¸¸é‡è¦ï¼)</span>
<span class="hljs-comment"># ç™»å½•MySQLï¼Œæ‰§è¡Œ SHOW SLAVE STATUS\Gï¼ŒæŸ¥çœ‹ Seconds_Behind_Master æ˜¯å¦ä¸º 0</span>
<span class="hljs-comment"># åœ¨ç¡®è®¤åŒæ­¥æ— å»¶è¿Ÿåï¼Œå†è¿›è¡Œä¸‹ä¸€æ­¥</span>

<span class="hljs-comment"># 2. åœæ­¢åŒæ­¥å¹¶æå‡ä¸ºæ–°ä¸»</span>
mysql -e <span class="hljs-string">"STOP SLAVE; SET GLOBAL read_only = OFF;"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"New master promoted."</span>

<span class="hljs-comment"># 3. å¯åŠ¨KeepalivedæœåŠ¡ï¼Œæ¥ç®¡VIP</span>
systemctl start keepalived
<span class="hljs-built_in">echo</span> <span class="hljs-string">"Keepalived on new master started."</span>
</code></pre>
<p><strong>ç¬¬3æ­¥ï¼šéªŒè¯</strong></p>
<pre><code class="hljs language-perl" lang="perl"><span class="hljs-comment"># 1. åœ¨æ–°ä¸»åº“ `mysql-node2` ä¸Šç¡®è®¤VIPå·²ç»‘å®š</span>
ip a | <span class="hljs-keyword">grep</span> <span class="hljs-string">"192.168.31.100"</span>  <span class="hljs-comment"># åº”è¯¥èƒ½çœ‹åˆ°VIP</span>

<span class="hljs-comment"># 2. å°è¯•ç”¨VIPè¿æ¥æ•°æ®åº“ï¼Œå¹¶æ‰§è¡Œå†™æ“ä½œï¼Œç¡®è®¤æœåŠ¡æ­£å¸¸</span>
<span class="hljs-comment"># mysql -h 192.168.31.100 -u ... -p... -e "CREATE TABLE test_switch (id int); INSERT INTO test_switch VALUES (1);"</span>
</code></pre>
<p>è¿™ä¸ªæµç¨‹æ¸…æ™°ã€å¯æ§ï¼Œæ¯ä¸€æ­¥éƒ½æœ‰æ˜ç¡®çš„æ£€æŸ¥ç‚¹ï¼Œæœ€å¤§é™åº¦åœ°é¿å…äº†è‡ªåŠ¨åˆ‡æ¢å¸¦æ¥çš„ä¸ç¡®å®šæ€§ã€‚</p>
<h2 data-id="heading-5">4 è¿ç»´æœ€ä½³å®è·µ</h2>
<p>é’ˆå¯¹ä¸Šé¢ä¸¤ç§æ–¹æ¡ˆï¼Œæˆ‘ä»¬çš„è¿ç»´ç›‘æ§é‡ç‚¹ä¹Ÿä¸åŒã€‚</p>
<p><strong>ç›‘æ§:</strong></p>
<ul>
<li><strong>å¯¹äºæ–¹æ¡ˆä¸€ (è‡ªåŠ¨):</strong> Â å¿…é¡»é‡ç‚¹ç›‘æ§<code>/var/log/keepalived-mysql-state.log</code>è¿™ä¸ªè‡ªå®šä¹‰<a href="https://link.juejin.cn?target=https%3A%2F%2Fzhida.zhihu.com%2Fsearch%3Fcontent_id%3D269081829%26content_type%3DArticle%26match_order%3D1%26q%3D%25E6%2597%25A5%25E5%25BF%2597%25E6%2596%2587%25E4%25BB%25B6%26zhida_source%3Dentity" target="_blank" title="https://zhida.zhihu.com/search?content_id=269081829&amp;content_type=Article&amp;match_order=1&amp;q=%E6%97%A5%E5%BF%97%E6%96%87%E4%BB%B6&amp;zhida_source=entity" ref="nofollow noopener noreferrer">æ—¥å¿—æ–‡ä»¶</a>ã€‚ä»»ä½•çŠ¶æ€åˆ‡æ¢éƒ½åº”è¯¥è§¦å‘æœ€é«˜çº§åˆ«çš„å‘Šè­¦ï¼Œé€šçŸ¥DBAç«‹å³ä»‹å…¥æ£€æŸ¥ã€‚åŒæ—¶ï¼Œè¦ç›‘æ§ä¸»å¤‡ä¸¤è¾¹<code>read_only</code>çš„çŠ¶æ€æ˜¯å¦ç¬¦åˆé¢„æœŸã€‚</li>
<li><strong>å¯¹äºæ–¹æ¡ˆäºŒ (æ‰‹åŠ¨):</strong> Â ç›‘æ§çš„é‡ç‚¹æ˜¯Â  <strong>â€œKeepalivedè¿›ç¨‹çš„å”¯ä¸€æ€§â€</strong> ã€‚å¿…é¡»æœ‰ä¸€ä¸ªç›‘æ§é¡¹ï¼Œç¡®ä¿é›†ç¾¤ä¸­æ°¸è¿œåªæœ‰ä¸€ä¸ª<code>keepalived</code>è¿›ç¨‹åœ¨è¿è¡Œã€‚ä¸€æ—¦å‘ç°ä¸¤ä¸ªéƒ½åœ¨è¿è¡Œï¼Œå¿…é¡»ç«‹å³å‘Šè­¦ï¼Œè¿™æ˜¯è„‘è£‚çš„å‰å…†ï¼</li>
<li><strong>é€šç”¨ç›‘æ§:</strong> Â VIPçš„å½’å±ã€MySQLä¸»ä»å¤åˆ¶å»¶è¿Ÿï¼ˆ<code>Seconds_Behind_Master</code>ï¼‰æ˜¯ä¸¤ç§æ–¹æ¡ˆéƒ½å¿…é¡»æ­»ç›¯çš„æŒ‡æ ‡ã€‚</li>
</ul>
<p><strong>æ—¥å¿—åˆ†æ:</strong></p>
<ul>
<li><code>tail -f /var/log/messages | grep Keepalived</code>Â ä¾ç„¶æ˜¯æ’é”™ç¬¬ä¸€ç¥å™¨ã€‚è¦å­¦ä¼šçœ‹æ‡‚<code>Entering MASTER state</code>ã€<code>Entering BACKUP state</code>ç­‰å…³é”®æ—¥å¿—ã€‚</li>
<li>åœ¨æ–¹æ¡ˆä¸€ä¸­ï¼Œ<code>mysql_role_switch.sh</code>è„šæœ¬çš„è¾“å‡ºæ—¥å¿—æ˜¯åˆ¤æ–­åˆ‡æ¢æ˜¯å¦æˆåŠŸã€å“ªé‡Œå¡ä½çš„å…³é”®ä¾æ®ã€‚</li>
</ul>
<p><strong>â€œè„‘è£‚â€ (Split-Brain) é˜²æ²»:</strong></p>
<ul>
<li><strong>æ–¹æ¡ˆä¸€ (è‡ªåŠ¨):</strong> Â è„‘è£‚é£é™©è¾ƒé«˜ï¼Œå”¯ä¸€çš„ç‰©ç†ç¼“è§£æªæ–½å°±æ˜¯<strong>ä½¿ç”¨ç‹¬ç«‹ã€å¯é çš„å¿ƒè·³ç½‘ç»œ</strong>ï¼Œæ¯”å¦‚ä¸¤å°æœåŠ¡å™¨ç”¨ä¸€æ ¹ç½‘çº¿ç›´è¿ï¼Œä¸“é—¨è·‘VRRPåè®®ã€‚</li>
<li><strong>æ–¹æ¡ˆäºŒ (æ‰‹åŠ¨):</strong> <strong>ä»æœºåˆ¶ä¸Šæœç»äº†è„‘è£‚çš„å‘ç”Ÿ</strong>ã€‚å› ä¸ºæˆ‘ä»¬ä¸¥æ ¼éµå®ˆâ€œåªå¯ä¸€ä¸ªâ€çš„åŸåˆ™ï¼Œåªè¦SOPè¢«ä¸¥æ ¼æ‰§è¡Œï¼Œå°±ä¸ä¼šå‡ºç°ä¸¤ä¸ªèŠ‚ç‚¹éƒ½è®¤ä¸ºè‡ªå·±æ˜¯ä¸»çš„æ··ä¹±å±€é¢ã€‚è¿™å°±æ˜¯å®ƒâ€œç¬¨â€å´â€œç¨³â€çš„æ ¸å¿ƒä¼˜åŠ¿ã€‚</li>
</ul>
<h2 data-id="heading-6">5 æ€»ç»“</h2>
<p>å¥½äº†ï¼Œå…„å¼Ÿä»¬ï¼Œä»Šå¤©æˆ‘ä»¬æŠŠKeepalivedé…åˆMySQLçš„ä¸¤ç§ç©æ³•éƒ½æ°æ‰¯æ¸…æ¥šäº†ã€‚</p>
<ul>
<li><strong>æ–¹æ¡ˆä¸€ (è‡ªåŠ¨åˆ‡æ¢):</strong> Â åƒä¸€è¾†â€œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fzhida.zhihu.com%2Fsearch%3Fcontent_id%3D269081829%26content_type%3DArticle%26match_order%3D1%26q%3D%25E8%2587%25AA%25E5%258A%25A8%25E9%25A9%25BE%25E9%25A9%25B6%25E6%25B1%25BD%25E8%25BD%25A6%26zhida_source%3Dentity" target="_blank" title="https://zhida.zhihu.com/search?content_id=269081829&amp;content_type=Article&amp;match_order=1&amp;q=%E8%87%AA%E5%8A%A8%E9%A9%BE%E9%A9%B6%E6%B1%BD%E8%BD%A6&amp;zhida_source=entity" ref="nofollow noopener noreferrer">è‡ªåŠ¨é©¾é©¶æ±½è½¦</a>â€ã€‚é€‚åˆé‚£äº›å¯¹RTOï¼ˆæ¢å¤æ—¶é—´ç›®æ ‡ï¼‰è¦æ±‚æé«˜ï¼Œä½†å¯¹æ•°æ®ä¸€è‡´æ€§å®¹å¿åº¦ç¨é«˜ï¼ˆæ¯”å¦‚å…è®¸ä¸¢å¤±å‡ ç§’æ•°æ®ï¼‰çš„éæ ¸å¿ƒä¸šåŠ¡ã€‚ä¼˜ç‚¹æ˜¯å¿«ï¼Œç¼ºç‚¹æ˜¯â€œæ–¹å‘ç›˜â€ä¸åœ¨ä½ æ‰‹é‡Œï¼Œæç«¯æƒ…å†µä¸‹å¯èƒ½å¤±æ§ã€‚</li>
<li><strong>æ–¹æ¡ˆäºŒ (æ‰‹åŠ¨åˆ‡æ¢):</strong> Â åƒä¸€è¾†â€œæ‰‹åŠ¨æŒ¡çš„è¶Šé‡è½¦â€ã€‚å®ƒæŠŠåˆ‡æ¢çš„æœ€ç»ˆå†³å®šæƒç‰¢ç‰¢åœ°äº¤è¿˜ç»™äº†DBAã€‚æ¯ä¸€æ­¥æ“ä½œéƒ½åœ¨ä½ çš„æŒæ§ä¹‹ä¸­ã€‚å®ƒç‰ºç‰²äº†ä¸€ç‚¹ç‚¹åˆ‡æ¢é€Ÿåº¦ï¼Œä½†æ¢æ¥çš„æ˜¯<strong>æé«˜çš„å¯é æ€§å’Œæ•°æ®å®‰å…¨æ€§</strong>ã€‚è¿™åœ¨é‡‘èã€æ ¸å¿ƒäº¤æ˜“ç­‰åœºæ™¯ï¼Œæ˜¯æ¯‹åº¸ç½®ç–‘çš„é€‰æ‹©ã€‚</li>
</ul>
<p>æŠ€æœ¯æ–¹æ¡ˆæ²¡æœ‰ç»å¯¹çš„â€œæœ€å¥½â€ï¼Œåªæœ‰â€œæœ€åˆé€‚â€ã€‚ä½ é—®æˆ‘æ¨èå“ªä¸ªï¼Ÿ<strong>åœ¨ä½ ä¸å®Œå…¨ç¡®å®šä½ çš„ä¸šåŠ¡èƒ½æ‰¿å—è‡ªåŠ¨åˆ‡æ¢å¸¦æ¥çš„é£é™©ä¹‹å‰ï¼Œæˆ‘å¼ºçƒˆå»ºè®®ä½ ä»æ–¹æ¡ˆäºŒå¼€å§‹ã€‚</strong> Â å…ˆç”¨æœ€ç¨³çš„æ–¹æ³•æŠŠé«˜å¯ç”¨æ­èµ·æ¥ï¼ŒæŠŠSOPæµç¨‹è·‘åˆ°æ»šç“œçƒ‚ç†Ÿã€‚ç­‰ä½ å¯¹æ•´ä¸ªç³»ç»Ÿçš„è„¾æ°”éƒ½æ‘¸é€äº†ï¼Œå†è€ƒè™‘æ˜¯å¦éœ€è¦å‘è‡ªåŠ¨åŒ–æ¼”è¿›ã€‚</p>
<p>è®°ä½ï¼Œä½œä¸ºä¸€ä¸ªç”Ÿäº§ç¯å¢ƒçš„DBAï¼Œâ€œç¨³â€å­—æ°¸è¿œæ˜¯ç¬¬ä¸€ä½çš„ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Maven 4 å®˜å®£ï¼šå†æ—¶15å¹´ï¼ŒJavaæ„å»ºå·¥å…·è¿æ¥å½»åº•é‡æ„]]></title>    <link>https://juejin.cn/post/7605164560711286810</link>    <guid>https://juejin.cn/post/7605164560711286810</guid>    <pubDate>2026-02-11T06:12:58.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605164560711286810" data-draft-id="7605173538417082378" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Maven 4 å®˜å®£ï¼šå†æ—¶15å¹´ï¼ŒJavaæ„å»ºå·¥å…·è¿æ¥å½»åº•é‡æ„"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-02-11T06:12:58.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¥å¥‡å°æ±¤åœ†"/> <meta itemprop="url" content="https://juejin.cn/user/1151943919285431"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Maven 4 å®˜å®£ï¼šå†æ—¶15å¹´ï¼ŒJavaæ„å»ºå·¥å…·è¿æ¥å½»åº•é‡æ„
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1151943919285431/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¥å¥‡å°æ±¤åœ†
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-11T06:12:58.000Z" title="Wed Feb 11 2026 06:12:58 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>è‡ªÂ <strong>2010 å¹´ Maven 3 å‘å¸ƒ</strong>Â ä»¥æ¥ï¼ŒMaven å¯¹ Java æ„å»ºç”Ÿæ€çš„æ•´ä½“æ”¯æŒæ–¹å¼ï¼Œå‡ ä¹æ²¡æœ‰å‘ç”Ÿè¿‡é¢ è¦†æ€§çš„å˜åŒ–ã€‚</p>
<p>ç„¶è€Œåœ¨è¿™ 15 å¹´é‡Œï¼ŒJava ä¸–ç•Œæ—©å·²å¤©ç¿»åœ°è¦†ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fzhida.zhihu.com%2Fsearch%3Fcontent_id%3D269646962%26content_type%3DArticle%26match_order%3D1%26q%3D%25E6%25A8%25A1%25E5%259D%2597%25E5%258C%2596%26zhida_source%3Dentity" target="_blank" title="https://zhida.zhihu.com/search?content_id=269646962&amp;content_type=Article&amp;match_order=1&amp;q=%E6%A8%A1%E5%9D%97%E5%8C%96&amp;zhida_source=entity" ref="nofollow noopener noreferrer">æ¨¡å—åŒ–</a>æˆä¸ºæ ‡é…</li>
<li>å¹¶è¡Œæ„å»ºæˆä¸ºåˆšéœ€</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fzhida.zhihu.com%2Fsearch%3Fcontent_id%3D269646962%26content_type%3DArticle%26match_order%3D1%26q%3D%25E4%25BA%2591%25E5%258E%259F%25E7%2594%259F%26zhida_source%3Dentity" target="_blank" title="https://zhida.zhihu.com/search?content_id=269646962&amp;content_type=Article&amp;match_order=1&amp;q=%E4%BA%91%E5%8E%9F%E7%94%9F&amp;zhida_source=entity" ref="nofollow noopener noreferrer">äº‘åŸç”Ÿ</a>ä¸<a href="https://link.juejin.cn?target=https%3A%2F%2Fzhida.zhihu.com%2Fsearch%3Fcontent_id%3D269646962%26content_type%3DArticle%26match_order%3D1%26q%3D%25E5%25AE%25B9%25E5%2599%25A8%25E5%258C%2596%26zhida_source%3Dentity" target="_blank" title="https://zhida.zhihu.com/search?content_id=269646962&amp;content_type=Article&amp;match_order=1&amp;q=%E5%AE%B9%E5%99%A8%E5%8C%96&amp;zhida_source=entity" ref="nofollow noopener noreferrer">å®¹å™¨åŒ–</a>æˆä¸ºä¸»æµ</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fzhida.zhihu.com%2Fsearch%3Fcontent_id%3D269646962%26content_type%3DArticle%26match_order%3D1%26q%3DJDK%26zhida_source%3Dentity" target="_blank" title="https://zhida.zhihu.com/search?content_id=269646962&amp;content_type=Article&amp;match_order=1&amp;q=JDK&amp;zhida_source=entity" ref="nofollow noopener noreferrer">JDK</a>Â ä»¥ä¸€å¹´ä¸¤ä¸ªå¤§ç‰ˆæœ¬çš„èŠ‚å¥æŒç»­å¿«é€Ÿæ¼”è¿›</li>
</ul>
<p>ç›¸æ¯”ä¹‹ä¸‹ï¼ŒMaven æœ¬èº«å´æ˜¾å¾—æœ‰äº›â€œè€æ€â€ã€‚</p>
<p>Maven 4 çš„å‡ºç°ï¼Œæ­£æ˜¯ä¸ºäº†è§£å†³è¿™äº›é•¿æœŸç§¯ç´¯çš„å†å²åŒ…è¢±ã€‚</p>
<p>è™½ç„¶ Maven 4 ä»æœªå…¬å¸ƒæ­£å¼ GA å‘å¸ƒæ—¥æœŸï¼Œä½†ç›®å‰å·²ç»è¿­ä»£åˆ°Â <strong>ç¬¬äº”ä¸ªå‘å¸ƒå€™é€‰ç‰ˆæœ¬</strong>ï¼ˆRC5ï¼‰ï¼Œä»é¡¹ç›®æˆç†Ÿåº¦å’Œå˜æ›´ç¨³å®šæ€§æ¥çœ‹ï¼Œè·ç¦»æ­£å¼å‘å¸ƒå·²ç›¸å½“æ¥è¿‘ã€‚</p>
<blockquote>
<p><strong>â€œ</strong> ç°åœ¨æ­£æ˜¯æå‰äº†è§£ã€è¯„ä¼°å’Œå‡†å¤‡å‡çº§çš„åˆé€‚æ—¶æœºã€‚</p>
</blockquote>
<h3 data-id="heading-0"><strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fzhida.zhihu.com%2Fsearch%3Fcontent_id%3D269646962%26content_type%3DArticle%26match_order%3D1%26q%3DPOM%2B%25E6%25A8%25A1%25E5%259E%258B%26zhida_source%3Dentity" target="_blank" title="https://zhida.zhihu.com/search?content_id=269646962&amp;content_type=Article&amp;match_order=1&amp;q=POM+%E6%A8%A1%E5%9E%8B&amp;zhida_source=entity" ref="nofollow noopener noreferrer">POM æ¨¡å‹</a>å‡çº§ï¼šä» 4.0.0 åˆ° 4.1.0</strong></h3>
<p>Maven 4 å°† POM çš„æ¨¡å‹ç‰ˆæœ¬å‡çº§ä¸º 4.1.0ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">&lt;project
    <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://maven.apache.org/POM/4.1.0"</span>
    xmlns:<span class="hljs-attr">xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span>
    xsi:<span class="hljs-attr">schemaLocation</span>=<span class="hljs-string">"http://maven.apache.org/POM/4.1.0
                        http://maven.apache.org/xsd/maven-4.1.0.xsd"</span>&gt;
  &lt;modelVersion&gt;4.1.0&lt;/modelVersion&gt;
&lt;/project&gt;
</code></pre>
<ul>
<li>å‘åå…¼å®¹ï¼šMaven 4 ä»ç„¶å¯ä»¥æ„å»º 4.0.0 çš„ POM</li>
<li>æ–°èƒ½åŠ›åªå¯¹ 4.1.0 ç”Ÿæ•ˆ</li>
<li>modelVersion ç†è®ºä¸Šå¯ä»¥çœç•¥ï¼ŒMaven ä¼šä» schema æ¨å¯¼</li>
</ul>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼š</p>
<blockquote>
<p><strong>â€œ</strong> ä¸å‡çº§ POM ä¹Ÿèƒ½ç”¨ Maven 4ï¼Œä½†å‡çº§åæ‰èƒ½çœŸæ­£â€œåƒåˆ°çº¢åˆ©â€ã€‚</p>
</blockquote>
<h3 data-id="heading-1"><strong>Build POM / Consumer POM åˆ†ç¦»ï¼šç»ˆäºè§£å†³â€œPOM æ±¡æŸ“â€</strong></h3>
<p>è¿™æ˜¯ Maven 4 æœ€é‡è¦ã€ä¹Ÿæ˜¯æœ€é¢ è¦†æ€§ çš„å˜åŒ–ä¹‹ä¸€ã€‚</p>
<p>åœ¨ Maven 3 ä¸­ï¼Œå‘å¸ƒåˆ°ä»“åº“çš„ POM åŒæ—¶åŒ…å«ï¼š</p>
<ul>
<li>æ’ä»¶é…ç½®</li>
<li>æ„å»ºç»†èŠ‚</li>
<li>çˆ¶ POM å¼•ç”¨</li>
<li>å„ç§å±æ€§</li>
</ul>
<p>ä¾èµ–ä½¿ç”¨è€…ä¼šè¢«è¿«è§£æå¤§é‡ â€œä¸æˆ‘æ— å…³â€ çš„ä¿¡æ¯ã€‚</p>
<p>Maven 4 çš„è§£å†³æ–¹æ³•æ˜¯ POM æ‰å¹³åŒ–ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fzhida.zhihu.com%2Fsearch%3Fcontent_id%3D269646962%26content_type%3DArticle%26match_order%3D1%26q%3DFlattening%26zhida_source%3Dentity" target="_blank" title="https://zhida.zhihu.com/search?content_id=269646962&amp;content_type=Article&amp;match_order=1&amp;q=Flattening&amp;zhida_source=entity" ref="nofollow noopener noreferrer">Flattening</a>ï¼‰ã€‚</p>
<p>Maven 4 æ­£å¼åŒºåˆ†ï¼š</p>

















<table><thead><tr><th>ç±»å‹</th><th>ç”¨é€”</th></tr></thead><tbody><tr><td>Build POM</td><td>é¡¹ç›®è‡ªèº«æ„å»º</td></tr><tr><td>Consumer POM</td><td>æä¾›ç»™<a href="https://link.juejin.cn?target=https%3A%2F%2Fzhida.zhihu.com%2Fsearch%3Fcontent_id%3D269646962%26content_type%3DArticle%26match_order%3D1%26q%3D%25E4%25BE%259D%25E8%25B5%2596%25E6%2596%25B9%26zhida_source%3Dentity" target="_blank" title="https://zhida.zhihu.com/search?content_id=269646962&amp;content_type=Article&amp;match_order=1&amp;q=%E4%BE%9D%E8%B5%96%E6%96%B9&amp;zhida_source=entity" ref="nofollow noopener noreferrer">ä¾èµ–æ–¹</a></td></tr></tbody></table>
<p>Consumer POM å…·å¤‡ä»¥ä¸‹ç‰¹å¾ï¼š</p>
<ul>
<li>ä¸åŒ…å«æ’ä»¶é…ç½®</li>
<li>ä¸åŒ…å«çˆ¶ POM</li>
<li>ä¸åŒ…å«æœªä½¿ç”¨ä¾èµ–</li>
<li>åªä¿ç•™çœŸå®ä¼ é€’ä¾èµ–</li>
<li>å±æ€§å·²è¢«è§£æä¸ºå…·ä½“å€¼</li>
</ul>
<p>å¼€å¯æ–¹å¼ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">mvn clean install <span class="hljs-attr">-Dmaven.consumer.pom.flatten</span>=<span class="hljs-literal">true</span>
</code></pre>
<blockquote>
<p><strong>â€œ</strong> Maven 3 æ—¶ä»£éœ€è¦é¢å¤–çš„Â <code>Flatten Maven Plugin</code>ï¼ŒMaven 4 ä¸­å·²æˆä¸º åŸç”Ÿèƒ½åŠ›ã€‚</p>
</blockquote>
<p>è¿™ä¸€æ­¥ï¼Œç›´æ¥è®©ä¾èµ–è§£ææ›´å¿«ã€æ›´å¹²å‡€ã€æ›´å¯é¢„æµ‹ã€‚</p>
<h3 data-id="heading-2"><strong>æ–°Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fzhida.zhihu.com%2Fsearch%3Fcontent_id%3D269646962%26content_type%3DArticle%26match_order%3D1%26q%3DArtifact%2BType%26zhida_source%3Dentity" target="_blank" title="https://zhida.zhihu.com/search?content_id=269646962&amp;content_type=Article&amp;match_order=1&amp;q=Artifact+Type&amp;zhida_source=entity" ref="nofollow noopener noreferrer">Artifact Type</a>ï¼šæ˜¾å¼æ§åˆ¶ classpath / module path</strong></h3>
<p>åœ¨ Maven 3 ä¸­ï¼š</p>
<ul>
<li>æ™®é€š JAR â†’ classpath</li>
<li>å«Â <code>module-info.class</code>Â â†’Â <code>module path</code>ï¼ˆè‡ªåŠ¨æ¨æ–­ï¼‰</li>
</ul>
<p>è¿™ç§â€œéšå¼è§„åˆ™â€åœ¨ Java æ¨¡å—åŒ–æ—¶ä»£å¹¶ä¸å¤Ÿæ¸…æ™°ã€‚</p>
<p>Maven 4 æ–°å¢ç±»å‹ï¼š</p>
<pre><code class="hljs language-lua" lang="lua">&lt;<span class="hljs-built_in">type</span>&gt;classpath-jar&lt;/<span class="hljs-built_in">type</span>&gt;
&lt;<span class="hljs-built_in">type</span>&gt;<span class="hljs-built_in">module</span>-jar&lt;/<span class="hljs-built_in">type</span>&gt;
</code></pre>
<p>å¼€å‘è€…ç»ˆäºå¯ä»¥Â <strong>æ˜¾å¼å£°æ˜ä¾èµ–æ”¾åœ¨å“ªé‡Œã€‚</strong></p>
<p>Maven 4 è¿˜æ–°å¢äº†ä¸“é—¨çš„æ³¨è§£å¤„ç†å™¨ç±»å‹ï¼š</p>
<ul>
<li><code>processor</code></li>
<li><code>classpath-processor</code></li>
<li><code>modular-processor</code></li>
</ul>
<p>ä»¥ Lombok ä¸ºä¾‹ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.projectlombok<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>lombok<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>${lombok.version}<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">type</span>&gt;</span>classpath-processor<span class="hljs-tag">&lt;/<span class="hljs-name">type</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.projectlombok<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>lombok<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>${lombok.version}<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>provided<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span>
</code></pre>
<p>Maven 4Â <strong>æ˜ç¡®åŒºåˆ†äº† API classpath ä¸ processor classpath</strong>ï¼Œæ„å»ºè¯­ä¹‰æ›´æ¸…æ™°ï¼Œä¹Ÿæ›´åˆ©äº<a href="https://link.juejin.cn?target=https%3A%2F%2Fzhida.zhihu.com%2Fsearch%3Fcontent_id%3D269646962%26content_type%3DArticle%26match_order%3D1%26q%3D%25E5%25B7%25A5%25E5%2585%25B7%25E9%2593%25BE%26zhida_source%3Dentity" target="_blank" title="https://zhida.zhihu.com/search?content_id=269646962&amp;content_type=Article&amp;match_order=1&amp;q=%E5%B7%A5%E5%85%B7%E9%93%BE&amp;zhida_source=entity" ref="nofollow noopener noreferrer">å·¥å…·é“¾</a>ä¼˜åŒ–ã€‚</p>
<h3 data-id="heading-3"><strong>Modules æ”¹åä¸º Subprojectsï¼šä¸º Java 9 â€œè®©è·¯â€</strong></h3>
<p>Java 9 å¼•å…¥æ¨¡å—ç³»ç»Ÿåï¼š</p>
<ul>
<li>Maven Modules</li>
<li>Java Modules</li>
</ul>
<p>é•¿æœŸè®©æ–°æ‰‹å’Œå·¥å…·â€œé›†ä½“æ‡µé€¼â€ã€‚</p>
<p>Maven 4 çš„é€‰æ‹©æ˜¯ï¼š</p>
<ul>
<li>modules â†’ subprojects</li>
<li>modules æ ‡è®°ä¸º deprecated</li>
</ul>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">subprojects</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">subproject</span>&gt;</span>project-a<span class="hljs-tag">&lt;/<span class="hljs-name">subproject</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">subproject</span>&gt;</span>project-b<span class="hljs-tag">&lt;/<span class="hljs-name">subproject</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">subprojects</span>&gt;</span>
</code></pre>
<p>åŒæ—¶è¿˜æ”¯æŒï¼š</p>
<ul>
<li><strong>Parent æ¨æ–­ï¼š</strong> Â ç©ºÂ <code>&lt;parent /&gt;</code>Â è‡ªåŠ¨è¯†åˆ«</li>
<li><strong>å­é¡¹ç›®è‡ªåŠ¨å‘ç°ï¼š</strong> Â æ— éœ€æ˜¾å¼å£°æ˜</li>
<li><strong>ç»Ÿä¸€æ„å»º<a href="https://link.juejin.cn?target=https%3A%2F%2Fzhida.zhihu.com%2Fsearch%3Fcontent_id%3D269646962%26content_type%3DArticle%26match_order%3D1%26q%3D%25E6%2597%25B6%25E9%2597%25B4%25E6%2588%25B3%26zhida_source%3Dentity" target="_blank" title="https://zhida.zhihu.com/search?content_id=269646962&amp;content_type=Article&amp;match_order=1&amp;q=%E6%97%B6%E9%97%B4%E6%88%B3&amp;zhida_source=entity" ref="nofollow noopener noreferrer">æ—¶é—´æˆ³</a></strong></li>
<li><strong>å®‰å…¨å‘å¸ƒï¼š</strong> Â å­é¡¹ç›®å¤±è´¥ â†’ å…¨éƒ¨ä¸å‘å¸ƒ</li>
</ul>
<p>è¿™æ˜¯ä¸€æ¬¡Â <strong>è¯­ä¹‰å±‚é¢ + å·¥ç¨‹å®è·µå±‚é¢</strong>Â çš„åŒé‡å‡çº§ã€‚</p>
<h3 data-id="heading-4"><strong>æ ‘å½¢ç”Ÿå‘½å‘¨æœŸï¼šå¹¶è¡Œæ„å»ºç»ˆäºâ€œåæ­£è¨€é¡ºâ€</strong></h3>
<p>Maven 3 çš„ç”Ÿå‘½å‘¨æœŸæ˜¯ çº¿æ€§çš„ï¼Œå³ä½¿å¤šæ¨¡å—ï¼Œä¹Ÿå¾ˆéš¾é«˜æ•ˆå¹¶è¡Œã€‚</p>
<p>Maven 4 å¼•å…¥Â <code>Tree-based Lifecycle</code>ï¼š</p>
<ul>
<li>æ¯ä¸ªå­é¡¹ç›®ç‹¬ç«‹æ¨è¿›ç”Ÿå‘½å‘¨æœŸ</li>
<li>ä¾èµ–å°±ç»ªå³å¯å¯åŠ¨</li>
<li>å¤§å‹å¤šæ¨¡å—æ„å»ºé€Ÿåº¦æ˜¾è‘—æå‡</li>
</ul>
<p>å¼€å¯æ–¹å¼ï¼š</p>
<pre><code class="hljs language-css" lang="css">mvn -<span class="hljs-selector-tag">b</span> concurrent verify
</code></pre>
<h3 data-id="heading-5"><strong>é…ç½®èƒ½åŠ›æ˜¾è‘—å¢å¼ºçš„â€œå°å˜åŒ–â€</strong></h3>
<h3 data-id="heading-6"><strong>1.Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fzhida.zhihu.com%2Fsearch%3Fcontent_id%3D269646962%26content_type%3DArticle%26match_order%3D1%26q%3D%25E6%259D%25A1%25E4%25BB%25B6%25E8%25A1%25A8%25E8%25BE%25BE%25E5%25BC%258F%26zhida_source%3Dentity" target="_blank" title="https://zhida.zhihu.com/search?content_id=269646962&amp;content_type=Article&amp;match_order=1&amp;q=%E6%9D%A1%E4%BB%B6%E8%A1%A8%E8%BE%BE%E5%BC%8F&amp;zhida_source=entity" ref="nofollow noopener noreferrer">æ¡ä»¶è¡¨è¾¾å¼</a>Â Profile</strong></h3>
<pre><code class="hljs language-scss" lang="scss">&lt;condition&gt;
  <span class="hljs-built_in">exists</span>('${project.basedir}/src/**/*.xsd')
  &amp;&amp; <span class="hljs-built_in">length</span>(${user.name}) &gt; <span class="hljs-number">5</span>
&lt;/condition&gt;   
</code></pre>
<p>ä¸å†åªæ˜¯Â <code>os.name</code>ã€<a href="https://link.juejin.cn?target=https%3A%2F%2Fzhida.zhihu.com%2Fsearch%3Fcontent_id%3D269646962%26content_type%3DArticle%26match_order%3D1%26q%3Djdk%26zhida_source%3Dentity" target="_blank" title="https://zhida.zhihu.com/search?content_id=269646962&amp;content_type=Article&amp;match_order=1&amp;q=jdk&amp;zhida_source=entity" ref="nofollow noopener noreferrer">jdk</a>Â è¿™ç§åŸºç¡€åˆ¤æ–­ï¼Œè€Œæ˜¯ çœŸæ­£çš„è¡¨è¾¾å¼ç³»ç»Ÿã€‚</p>
<h3 data-id="heading-7"><strong>2. ç»Ÿä¸€çš„ Sources æ¨¡å‹</strong></h3>
<p>Maven 3ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">sourceDirectory</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">sourceDirectory</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">testSourceDirectory</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">testSourceDirectory</span>&gt;</span>
</code></pre>
<p>Maven 4ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">sources</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">source</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>main<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">directory</span>&gt;</span>my-custom-dir/foo<span class="hljs-tag">&lt;/<span class="hljs-name">directory</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">source</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">source</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>test<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">directory</span>&gt;</span>my-custom-dir/bar<span class="hljs-tag">&lt;/<span class="hljs-name">directory</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">source</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">sources</span>&gt;</span>
</code></pre>
<p>æ›´é€‚åˆï¼š</p>
<ul>
<li>å¤šç›®å½•</li>
<li>å¤šç‰ˆæœ¬</li>
<li>æ¨¡å—åŒ–é¡¹ç›®</li>
<li>æ— æ’ä»¶é…ç½®åœºæ™¯</li>
</ul>
<p>Maven 4 è¿˜æä¾›äº†å®˜æ–¹å‡çº§å·¥å…·ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">mvnup check   <span class="hljs-comment"># åªç”ŸæˆæŠ¥å‘Š</span>
mvnup apply   <span class="hljs-comment"># è‡ªåŠ¨ä¿®æ”¹</span>
</code></pre>
<p>å®ƒä¼šåˆ†æï¼š</p>
<ul>
<li>POM</li>
<li>æ’ä»¶</li>
<li>é¡¹ç›®ç»“æ„</li>
</ul>
<p>å¹¶ç»™å‡º å¯æ‰§è¡Œçš„å‡çº§å»ºè®®ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Wujie å¾®å‰ç«¯æ¶æ„ä¸‹çš„è·¨åº”ç”¨çŠ¶æ€ç®¡ç†å®è·µï¼šProps + Bus åŒé€šé“æ–¹æ¡ˆ]]></title>    <link>https://juejin.cn/post/7605157203590905883</link>    <guid>https://juejin.cn/post/7605157203590905883</guid>    <pubDate>2026-02-11T05:38:30.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605157203590905883" data-draft-id="7605107459066724398" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Wujie å¾®å‰ç«¯æ¶æ„ä¸‹çš„è·¨åº”ç”¨çŠ¶æ€ç®¡ç†å®è·µï¼šProps + Bus åŒé€šé“æ–¹æ¡ˆ"/> <meta itemprop="keywords" content="å‰ç«¯,æ¶æ„"/> <meta itemprop="datePublished" content="2026-02-11T05:38:30.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§è±¡çš„é¼»å­é‚£ä¹ˆé•¿"/> <meta itemprop="url" content="https://juejin.cn/user/2277843821926871"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Wujie å¾®å‰ç«¯æ¶æ„ä¸‹çš„è·¨åº”ç”¨çŠ¶æ€ç®¡ç†å®è·µï¼šProps + Bus åŒé€šé“æ–¹æ¡ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2277843821926871/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§è±¡çš„é¼»å­é‚£ä¹ˆé•¿
  </span> <!----> <!----> <div class="vip-level" data-v-cd7d0a50="" data-v-292f6e48=""><span class="tooltip" data-v-cd7d0a50=""><div class="byte-tooltip byte-tooltip--dark" style="display:none;">
        VIP.4 èä¼šè´¯é€š
      </div><span class="byte-tooltip__wrapper"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8AQMAAAAAMksxAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAA5JREFUKM9jGAWjAAcAAAIcAAE27nY6AAAAAElFTkSuQmCC" alt="VIP.4 èä¼šè´¯é€š" title="VIP.4 èä¼šè´¯é€š" class="lazy" style="aspect-ratio:NaN;" data-v-5244ef91="" data-v-cd7d0a50=""/></span></span></div> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-11T05:38:30.000Z" title="Wed Feb 11 2026 05:38:30 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    18
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>åœ¨åŸºäº Wujie çš„å¾®å‰ç«¯æ¶æ„ä¸­ï¼Œä¸»åº”ç”¨ä¸å­åº”ç”¨ä¹‹é—´çš„çŠ¶æ€åŒæ­¥æ˜¯ä¸€ä¸ªç»‘ä¸å¼€çš„éš¾é¢˜ã€‚æœ¬æ–‡åˆ†äº«æˆ‘ä»¬åœ¨ç”Ÿäº§é¡¹ç›®ä¸­çš„å®è·µï¼šå¦‚ä½•ç”¨æœ€ç®€æ´çš„æ–¹å¼ï¼Œå®ç°ç³»ç»Ÿçº§æ•°æ®çš„å•ä¸€å¯ä¿¡æºå’Œå®æ—¶åŒæ­¥ï¼ŒåŒæ—¶é¿å…è¿‡åº¦è®¾è®¡çš„é™·é˜±ã€‚</p>
</blockquote>
<h2 data-id="heading-0">èƒŒæ™¯</h2>
<p>æˆ‘ä»¬çš„é¡¹ç›®æ˜¯ä¸€ä¸ªå…¸å‹çš„ä¼ä¸šçº§ B ç«¯ç³»ç»Ÿï¼Œé‡‡ç”¨ <strong>Vue 3 + Pinia + Wujie</strong> çš„å¾®å‰ç«¯æ¶æ„ï¼š</p>
<ul>
<li><strong>1 ä¸ªä¸»åº”ç”¨</strong>ï¼šè´Ÿè´£ç™»å½•ã€èœå•ã€å¸ƒå±€ã€ç³»ç»Ÿçº§æ•°æ®ç®¡ç†</li>
<li><strong>6+ ä¸ªå­åº”ç”¨</strong>ï¼šå„è‡ªç‹¬ç«‹å¼€å‘éƒ¨ç½²ï¼Œé€šè¿‡ Wujie åµŒå…¥ä¸»åº”ç”¨è¿è¡Œ</li>
</ul>
<p>æŠ€æœ¯æ ˆï¼šVue 3.5 / Pinia 3 / Vite 7 / TypeScript 5 / Wujie 1.0</p>
<h2 data-id="heading-1">é—®é¢˜ï¼š6 ä¸ªå­åº”ç”¨ï¼Œ6 ä»½é‡å¤æ•°æ®</h2>
<p>éšç€å­åº”ç”¨æ•°é‡å¢é•¿ï¼Œæˆ‘ä»¬é‡åˆ°äº†ä¸€ç³»åˆ—çŠ¶æ€ç®¡ç†é—®é¢˜ï¼š</p>
<p><strong>1. å­—å…¸æ•°æ® N+1 æ¬¡è¯·æ±‚</strong></p>
<p>ä¸»åº”ç”¨å¯åŠ¨æ—¶è¯·æ±‚ä¸€æ¬¡å…¨é‡å­—å…¸ï¼Œä½†æ¯ä¸ªå­åº”ç”¨å¯åŠ¨ååˆå„è‡ªè¯·æ±‚ä¸€æ¬¡ã€‚6 ä¸ªå­åº”ç”¨ = 7 æ¬¡ç›¸åŒçš„æ¥å£è°ƒç”¨ã€‚</p>
<p><strong>2. è¯­è¨€åˆ‡æ¢ä¸åŒæ­¥</strong></p>
<p>ç”¨æˆ·åœ¨ä¸»åº”ç”¨åˆ‡æ¢è¯­è¨€åï¼Œå·²åŠ è½½çš„å­åº”ç”¨ä»ç„¶æ˜¾ç¤ºæ—§è¯­è¨€ï¼Œå¿…é¡»åˆ·æ–°é¡µé¢æ‰èƒ½ç”Ÿæ•ˆã€‚</p>
<p><strong>3. Token åˆ·æ–°æ–­è£‚</strong></p>
<p>ä¸»åº”ç”¨é™é»˜åˆ·æ–° Token åï¼Œå­åº”ç”¨æŒæœ‰çš„æ—§ Token ç»§ç»­å‘è¯·æ±‚ï¼Œè§¦å‘ 401 é”™è¯¯ã€‚</p>
<p><strong>4. ç”¨æˆ·ä¿¡æ¯ä¼ é€’ä¸å®Œæ•´</strong></p>
<p>ä¸»åº”ç”¨é€šè¿‡ Wujie props åªä¼ äº† <code>token</code> å’Œ <code>userInfo</code>ï¼Œä½†å­åº”ç”¨è¿˜éœ€è¦ <code>permissions</code>ï¼ˆæƒé™åˆ—è¡¨ï¼‰å’Œ <code>roles</code>ï¼ˆè§’è‰²æ ‘ï¼‰ï¼Œåªèƒ½è‡ªå·±å†è¯·æ±‚ä¸€æ¬¡ã€‚</p>
<p><strong>5. æ•°æ®æºä¸å”¯ä¸€</strong></p>
<p>åŒä¸€ä»½ç”¨æˆ·æ•°æ®ï¼Œåœ¨ä¸»åº”ç”¨çš„ Pinia Store é‡Œæœ‰ä¸€ä»½ï¼Œåœ¨æ¯ä¸ªå­åº”ç”¨çš„ Pinia Store é‡Œåˆå„æœ‰ä¸€ä»½ã€‚æ•°æ®ä¸ä¸€è‡´çš„é£é™©å§‹ç»ˆå­˜åœ¨ã€‚</p>
<p>å½’ç»“ä¸ºä¸€å¥è¯ï¼š<strong>ç¼ºå°‘ä¸€ä¸ªç»Ÿä¸€çš„è·¨åº”ç”¨çŠ¶æ€åˆ†å‘æœºåˆ¶</strong>ã€‚</p>
<h2 data-id="heading-2">æ–¹æ¡ˆé€‰å‹ï¼šæˆ‘ä»¬è¸©è¿‡çš„å‘</h2>
<h3 data-id="heading-3">å°è¯•ä¸€ï¼šå°è£… npm åŒ…ï¼ˆè¿‡åº¦è®¾è®¡ï¼‰</h3>
<p>æœ€åˆæˆ‘ä»¬çš„æ–¹æ¡ˆæ˜¯åˆ›å»ºä¸€ä¸ª <code>@cmclink/shared-stores</code> åŸºç¡€åŒ…ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">packages/shared-stores/
â”œâ”€â”€ <span class="hljs-attribute">src</span>/
â”‚   â”œâ”€â”€ auth<span class="hljs-selector-class">.ts</span>        # <span class="hljs-built_in">useSharedAuth</span>() composable
â”‚   â”œâ”€â”€ dict<span class="hljs-selector-class">.ts</span>        # <span class="hljs-built_in">useSharedDict</span>() composable
â”‚   â”œâ”€â”€ locale<span class="hljs-selector-class">.ts</span>      # <span class="hljs-built_in">useSharedLocale</span>() composable
â”‚   â”œâ”€â”€ provider<span class="hljs-selector-class">.ts</span>    # <span class="hljs-built_in">createSharedStoreProvider</span>()
â”‚   â”œâ”€â”€ utils<span class="hljs-selector-class">.ts</span>       # <span class="hljs-built_in">isInWujie</span>() / <span class="hljs-built_in">getWujieBus</span>()
â”‚   â”œâ”€â”€ types<span class="hljs-selector-class">.ts</span>       # <span class="hljs-number">12</span> ä¸ªç±»å‹å®šä¹‰
â”‚   â””â”€â”€ constants<span class="hljs-selector-class">.ts</span>   # äº‹ä»¶å¸¸é‡
</code></pre>
<p>çœ‹èµ·æ¥å¾ˆ"å·¥ç¨‹åŒ–"ï¼Œä½†å®é™…è½åœ°åå‘ç°å‡ ä¸ªé—®é¢˜ï¼š</p>
<ol>
<li><strong>å¢åŠ äº†å¤æ‚åº¦å´æ²¡å¸¦æ¥å¤šå°‘æ”¶ç›Š</strong>ã€‚ç³»ç»Ÿçº§æ•°æ®æœ¬å°±ç”±ä¸»åº”ç”¨ç»´æŠ¤ï¼Œå­åº”ç”¨åªéœ€è¦åªè¯»æ¶ˆè´¹ï¼Œå¤šä¸€ä¸ªåŒ…å¤šä¸€å±‚æŠ½è±¡ï¼Œåè€Œå¢åŠ äº†ç†è§£æˆæœ¬å’Œç»´æŠ¤è´Ÿæ‹…ã€‚</li>
<li><strong>Provider çš„ watch æœºåˆ¶å¤±æ•ˆ</strong>ã€‚æˆ‘ä»¬è®¾è®¡äº† <code>createSharedStoreProvider(bus, source)</code> æ¥ç›‘å¬ Store å˜åŒ–ï¼Œä½† <code>source.auth()</code> æ¯æ¬¡è¿”å›æ–°çš„æ™®é€šå¯¹è±¡ï¼ŒVue çš„ <code>watch</code> æ ¹æœ¬è¿½è¸ªä¸åˆ°å“åº”å¼å˜åŒ–â€”â€”æ•´ä¸ªå¹¿æ’­æœºåˆ¶æ˜¯å¤±æ•ˆçš„ã€‚</li>
<li><strong>å­åº”ç”¨è¢«è¿«ä¾èµ–è¿™ä¸ªåŒ…</strong>ã€‚æœ¬æ¥å­åº”ç”¨åªéœ€è¦è¯» props å’Œç›‘å¬ busï¼Œç°åœ¨è¿˜è¦å®‰è£…ä¸€ä¸ªé¢å¤–çš„ npm åŒ…ã€‚</li>
</ol>
<h3 data-id="heading-4">æœ€ç»ˆæ–¹æ¡ˆï¼šå›å½’ç®€æ´</h3>
<p>åæ€åæˆ‘ä»¬ç¡®ç«‹äº†æ ¸å¿ƒåŸåˆ™ï¼š</p>
<blockquote>
<p><strong>ç³»ç»Ÿçº§æ•°æ®ç”±ä¸»åº”ç”¨ç‹¬å ç»´æŠ¤ï¼Œé€šè¿‡ Wujie åŸç”Ÿæœºåˆ¶ï¼ˆprops + busï¼‰åªè¯»åˆ†å‘ç»™å­åº”ç”¨ã€‚ä¸å¼•å…¥é¢å¤–çš„åŒ…ï¼Œä¸ææŠ½è±¡å±‚ã€‚</strong></p>
</blockquote>
<h2 data-id="heading-5">æ¶æ„è®¾è®¡</h2>
<h3 data-id="heading-6">Store ä¸‰å±‚åˆ†ç±»</h3>
<pre><code class="hljs">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Layer 0 â€” ç³»ç»Ÿçº§ï¼ˆä¸»åº”ç”¨ç‹¬å ç»´æŠ¤ï¼Œå­åº”ç”¨åªè¯»ï¼‰     â”‚
â”‚  userStore / dictStore / localeStore             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Layer 1 â€” åº”ç”¨çº§ï¼ˆä¸»åº”ç”¨ç‹¬æœ‰ï¼‰                    â”‚
â”‚  tabsStore / messageStore / historyStore         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Layer 2 â€” ä¸šåŠ¡çº§ï¼ˆå„å­åº”ç”¨ç‹¬æœ‰ï¼‰                   â”‚
â”‚  orderStore / routeStore / blStore ...           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<p>å…³é”®åŒºåˆ†ï¼š<strong>Layer 0 çš„æ•°æ®éœ€è¦è·¨åº”ç”¨å…±äº«ï¼ŒLayer 1 å’Œ Layer 2 ä¸éœ€è¦</strong>ã€‚åªå¯¹ Layer 0 åšçŠ¶æ€åˆ†å‘ï¼Œä¿æŒæœ€å°åŒ–ã€‚</p>
<h3 data-id="heading-7">åŒé€šé“é€šä¿¡åè®®</h3>
<p>åˆ©ç”¨ Wujie è‡ªå¸¦çš„ä¸¤ä¸ªé€šä¿¡æœºåˆ¶ï¼š</p>























<table><thead><tr><th>é€šé“</th><th>æœºåˆ¶</th><th>ç”¨é€”</th><th>ç‰¹ç‚¹</th></tr></thead><tbody><tr><td><strong>Channel 1</strong></td><td>wujie props</td><td>å†·å¯åŠ¨åˆå§‹å¿«ç…§</td><td>åŒæ­¥ã€å¯é ã€å­åº”ç”¨å¯åŠ¨å³å¯ç”¨</td></tr><tr><td><strong>Channel 2</strong></td><td>wujie bus</td><td>è¿è¡Œæ—¶å¢é‡åŒæ­¥</td><td>å¼‚æ­¥ã€å®æ—¶ã€äº‹ä»¶é©±åŠ¨</td></tr></tbody></table>
<p><strong>props ç»“æ„ï¼š</strong></p>
<pre><code class="hljs language-typescript" lang="typescript">{
  <span class="hljs-attr">$shared</span>: {
    <span class="hljs-attr">auth</span>: { token, refreshToken, userId, permissions, roles, userInfo },
    <span class="hljs-attr">dict</span>: { dictMap },
    <span class="hljs-attr">locale</span>: { lang }
  },
  <span class="hljs-comment">// å‘åå…¼å®¹æ—§å­—æ®µ</span>
  <span class="hljs-attr">token</span>: <span class="hljs-string">'...'</span>,
  <span class="hljs-attr">userInfo</span>: { ... }
}
</code></pre>
<p><strong>bus äº‹ä»¶ï¼š</strong></p>



































<table><thead><tr><th>äº‹ä»¶</th><th>è½½è·</th><th>è§¦å‘æ—¶æœº</th></tr></thead><tbody><tr><td><code>SHARED:AUTH_UPDATED</code></td><td><code>{ token, permissions, roles, userInfo }</code></td><td>æƒé™/è§’è‰²/ç”¨æˆ·ä¿¡æ¯å˜æ›´</td></tr><tr><td><code>SHARED:TOKEN_REFRESHED</code></td><td><code>{ token, refreshToken }</code></td><td>Token é™é»˜åˆ·æ–°å</td></tr><tr><td><code>SHARED:DICT_UPDATED</code></td><td><code>{ dictMap, version }</code></td><td>å­—å…¸æ•°æ®åŠ è½½å®Œæˆ</td></tr><tr><td><code>SHARED:LOCALE_CHANGED</code></td><td><code>{ lang }</code></td><td>è¯­è¨€åˆ‡æ¢</td></tr><tr><td><code>SHARED:LOGOUT</code></td><td><code>void</code></td><td>ç”¨æˆ·ç™»å‡º</td></tr></tbody></table>
<p>ä¸¤è€…äº’è¡¥ï¼š<strong>props è§£å†³å†·å¯åŠ¨ï¼Œbus è§£å†³çƒ­æ›´æ–°</strong>ã€‚</p>
<h2 data-id="heading-8">æ ¸å¿ƒå®ç°</h2>
<p>æ•´ä¸ªæ–¹æ¡ˆçš„æ ¸å¿ƒå°±ä¸€ä¸ªæ–‡ä»¶ï¼šä¸»åº”ç”¨çš„ <code>shared-provider.ts</code>ã€‚</p>
<h3 data-id="heading-9">ä¸»åº”ç”¨ä¾§ï¼šProvider</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// apps/main/src/stores/shared-provider.ts</span>
<span class="hljs-keyword">import</span> { watch } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> { bus } <span class="hljs-keyword">from</span> <span class="hljs-string">'wujie'</span>

<span class="hljs-comment">// äº‹ä»¶å¸¸é‡å°±åœ°å®šä¹‰ï¼Œä¸å¼•å…¥é¢å¤–åŒ…</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">SHARED_EVENTS</span> = {
  <span class="hljs-attr">AUTH_UPDATED</span>: <span class="hljs-string">'SHARED:AUTH_UPDATED'</span>,
  <span class="hljs-attr">TOKEN_REFRESHED</span>: <span class="hljs-string">'SHARED:TOKEN_REFRESHED'</span>,
  <span class="hljs-attr">DICT_UPDATED</span>: <span class="hljs-string">'SHARED:DICT_UPDATED'</span>,
  <span class="hljs-attr">LOCALE_CHANGED</span>: <span class="hljs-string">'SHARED:LOCALE_CHANGED'</span>,
  <span class="hljs-attr">LOGOUT</span>: <span class="hljs-string">'SHARED:LOGOUT'</span>,
} <span class="hljs-keyword">as</span> <span class="hljs-keyword">const</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">setupSharedStoreProvider</span>(<span class="hljs-params"/>): <span class="hljs-built_in">void</span> {
  <span class="hljs-keyword">const</span> userStore = <span class="hljs-title function_">useUserStoreWithOut</span>()
  <span class="hljs-keyword">const</span> dictStore = <span class="hljs-title function_">useDictStoreWithOut</span>()
  <span class="hljs-keyword">const</span> localeStore = <span class="hljs-title function_">useLocaleStoreWithOut</span>()

  <span class="hljs-comment">// ç›´æ¥ watch Pinia store çš„å“åº”å¼å±æ€§</span>
  <span class="hljs-title function_">watch</span>(
    <span class="hljs-function">() =&gt;</span> ({
      <span class="hljs-attr">permissions</span>: userStore.<span class="hljs-property">permissions</span>,
      <span class="hljs-attr">roles</span>: userStore.<span class="hljs-property">roles</span>,
      <span class="hljs-attr">roleId</span>: userStore.<span class="hljs-property">roleId</span>,
      <span class="hljs-attr">userInfo</span>: userStore.<span class="hljs-property">user</span>,
    }),
    <span class="hljs-function">(<span class="hljs-params">newVal</span>) =&gt;</span> {
      bus.$emit(<span class="hljs-variable constant_">SHARED_EVENTS</span>.<span class="hljs-property">AUTH_UPDATED</span>, {
        <span class="hljs-attr">token</span>: <span class="hljs-title function_">getAccessToken</span>(),
        ...newVal,
      })
    },
    { <span class="hljs-attr">deep</span>: <span class="hljs-literal">true</span> },
  )

  <span class="hljs-comment">// å­—å…¸åŠ è½½å®Œæˆåå¹¿æ’­</span>
  <span class="hljs-title function_">watch</span>(
    <span class="hljs-function">() =&gt;</span> dictStore.<span class="hljs-property">isSetDict</span>,
    <span class="hljs-function">(<span class="hljs-params">isSet</span>) =&gt;</span> {
      <span class="hljs-keyword">if</span> (isSet) {
        bus.$emit(<span class="hljs-variable constant_">SHARED_EVENTS</span>.<span class="hljs-property">DICT_UPDATED</span>, {
          <span class="hljs-attr">dictMap</span>: <span class="hljs-title function_">dictMapToRecord</span>(dictStore.<span class="hljs-property">dictMap</span>),
          <span class="hljs-attr">version</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>(),
        })
      }
    },
  )

  <span class="hljs-comment">// è¯­è¨€åˆ‡æ¢</span>
  <span class="hljs-title function_">watch</span>(
    <span class="hljs-function">() =&gt;</span> localeStore.<span class="hljs-property">currentLocale</span>.<span class="hljs-property">lang</span>,
    <span class="hljs-function">(<span class="hljs-params">lang</span>) =&gt;</span> bus.$emit(<span class="hljs-variable constant_">SHARED_EVENTS</span>.<span class="hljs-property">LOCALE_CHANGED</span>, { lang }),
  )

  <span class="hljs-comment">// $subscribe å…œåº•æ£€æµ‹ç™»å‡º</span>
  userStore.$subscribe(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">if</span> (!userStore.<span class="hljs-property">isSetUser</span> &amp;&amp; userStore.<span class="hljs-property">permissions</span>.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) {
      bus.$emit(<span class="hljs-variable constant_">SHARED_EVENTS</span>.<span class="hljs-property">LOGOUT</span>)
    }
  })
}
</code></pre>
<p><strong>å…³é”®ç»†èŠ‚ï¼šç›´æ¥ watch Pinia store çš„å“åº”å¼å±æ€§</strong>ï¼Œè€Œä¸æ˜¯é€šè¿‡ getter å‡½æ•°é—´æ¥è®¿é—®ã€‚è¿™æ˜¯æˆ‘ä»¬è¸©è¿‡çš„å‘â€”â€”å¦‚æœ <code>watch(() =&gt; source.auth().token, ...)</code> ä¸­çš„ <code>source.auth()</code> æ¯æ¬¡è¿”å›æ–°å¯¹è±¡ï¼ŒVue çš„å“åº”å¼è¿½è¸ªä¼šå®Œå…¨å¤±æ•ˆã€‚</p>
<h3 data-id="heading-10">éå“åº”å¼æ•°æ®çš„å¤„ç†</h3>
<p>Token å­˜å‚¨åœ¨ <code>sessionStorage</code>ï¼ˆé€šè¿‡ <code>wsCache</code>ï¼‰ï¼Œä¸æ˜¯ Pinia çš„å“åº”å¼çŠ¶æ€ï¼Œæ— æ³•ç”¨ <code>watch</code> ç›‘å¬ã€‚æˆ‘ä»¬çš„åšæ³•æ˜¯<strong>åœ¨å†™å…¥ç‚¹ä¸»åŠ¨å¹¿æ’­</strong>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// apps/main/src/utils/auth.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">setToken</span> = (<span class="hljs-params">token: TokenType</span>) =&gt; {
  wsCache.<span class="hljs-title function_">set</span>(<span class="hljs-variable constant_">CACHE_KEY</span>.<span class="hljs-property">REFRESH_TOKEN</span>, token.<span class="hljs-property">refreshToken</span>)
  wsCache.<span class="hljs-title function_">set</span>(<span class="hljs-variable constant_">CACHE_KEY</span>.<span class="hljs-property">ACCESS_TOKEN</span>, token.<span class="hljs-property">accessToken</span>)
  <span class="hljs-comment">// Token å†™å…¥åä¸»åŠ¨å¹¿æ’­ï¼ˆåŠ¨æ€ import é¿å…å¾ªç¯ä¾èµ–ï¼‰</span>
  <span class="hljs-keyword">import</span>(<span class="hljs-string">'@/stores/shared-provider'</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">{ emitTokenRefreshed }</span>) =&gt;</span> {
    <span class="hljs-title function_">emitTokenRefreshed</span>()
  })
}
</code></pre>
<p>Logout åŒç†ï¼Œåœ¨ <code>user.ts</code> çš„ <code>logout()</code> action ä¸­ä¸»åŠ¨è°ƒç”¨ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">async</span> <span class="hljs-title function_">logout</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">await</span> <span class="hljs-title function_">logout</span>()
  <span class="hljs-title function_">removeToken</span>()
  <span class="hljs-title function_">emitSharedLogout</span>()  <span class="hljs-comment">// ä¸»åŠ¨å¹¿æ’­ï¼Œç¡®ä¿å­åº”ç”¨æ”¶åˆ°</span>
  <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">resetState</span>()
}
</code></pre>
<h3 data-id="heading-11">åˆå§‹å¿«ç…§æ³¨å…¥</h3>
<p>ä¸»åº”ç”¨çš„ <code>App.vue</code> é€šè¿‡ computed æ„å»º propsï¼Œæ¯æ¬¡ Store å˜åŒ–è‡ªåŠ¨æ›´æ–°ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;WujieVue
  v-for="app in loadedApps"
  :key="app.name"
  :props="sharedProps"
  :alive="true"
/&gt;

&lt;script setup&gt;
const sharedProps = computed(() =&gt; ({
  $shared: {
    auth: { token, permissions, roles, userInfo, ... },
    dict: { dictMap },
    locale: { lang },
  },
  // å‘åå…¼å®¹æ—§å­åº”ç”¨
  token: getAccessToken(),
  userInfo: userStore.user,
}))
&lt;/script&gt;
</code></pre>
<h3 data-id="heading-12">å­åº”ç”¨ä¾§ï¼šåªè¯»æ¶ˆè´¹</h3>
<p>å­åº”ç”¨<strong>ä¸éœ€è¦å®‰è£…ä»»ä½•é¢å¤–ä¾èµ–</strong>ï¼Œç›´æ¥ç”¨ Wujie åŸç”Ÿ APIï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// å†·å¯åŠ¨ï¼šä» props è·å–åˆå§‹æ•°æ®</span>
<span class="hljs-keyword">const</span> wujie = (<span class="hljs-variable language_">window</span> <span class="hljs-keyword">as</span> <span class="hljs-built_in">any</span>).<span class="hljs-property">__WUJIE</span>
<span class="hljs-keyword">const</span> shared = wujie?.<span class="hljs-property">props</span>?.<span class="hljs-property">$shared</span>

<span class="hljs-keyword">if</span> (shared) {
  <span class="hljs-comment">// å¾®å‰ç«¯ç¯å¢ƒï¼šä½¿ç”¨ä¸»åº”ç”¨çš„æ•°æ®</span>
  authStore.<span class="hljs-title function_">setToken</span>(shared.<span class="hljs-property">auth</span>.<span class="hljs-property">token</span>)
  authStore.<span class="hljs-title function_">setPermissions</span>(shared.<span class="hljs-property">auth</span>.<span class="hljs-property">permissions</span>)
  dictStore.<span class="hljs-title function_">setDictMap</span>(shared.<span class="hljs-property">dict</span>.<span class="hljs-property">dictMap</span>)
  i18n.<span class="hljs-property">global</span>.<span class="hljs-property">locale</span>.<span class="hljs-property">value</span> = shared.<span class="hljs-property">locale</span>.<span class="hljs-property">lang</span>
} <span class="hljs-keyword">else</span> {
  <span class="hljs-comment">// ç‹¬ç«‹è¿è¡Œï¼šèµ°æœ¬åœ° API</span>
  <span class="hljs-keyword">await</span> authStore.<span class="hljs-title function_">fetchUserInfo</span>()
  <span class="hljs-keyword">await</span> dictStore.<span class="hljs-title function_">fetchDictData</span>()
}

<span class="hljs-comment">// çƒ­æ›´æ–°ï¼šç›‘å¬ bus äº‹ä»¶</span>
wujie?.<span class="hljs-property">bus</span>?.$on(<span class="hljs-string">'SHARED:TOKEN_REFRESHED'</span>, <span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {
  authStore.<span class="hljs-title function_">setToken</span>(data.<span class="hljs-property">token</span>)
})
wujie?.<span class="hljs-property">bus</span>?.$on(<span class="hljs-string">'SHARED:LOCALE_CHANGED'</span>, <span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {
  i18n.<span class="hljs-property">global</span>.<span class="hljs-property">locale</span>.<span class="hljs-property">value</span> = data.<span class="hljs-property">lang</span>
})
wujie?.<span class="hljs-property">bus</span>?.$on(<span class="hljs-string">'SHARED:LOGOUT'</span>, <span class="hljs-function">() =&gt;</span> {
  authStore.<span class="hljs-title function_">clearLocal</span>()
  router.<span class="hljs-title function_">push</span>(<span class="hljs-string">'/login'</span>)
})
</code></pre>
<p>é€šè¿‡ <code>__WUJIE</code> æ˜¯å¦å­˜åœ¨æ¥åˆ¤æ–­è¿è¡Œç¯å¢ƒï¼Œ<strong>å¾®å‰ç«¯ç¯å¢ƒèµ° props/busï¼Œç‹¬ç«‹è¿è¡Œèµ°æœ¬åœ° API</strong>ï¼Œå­åº”ç”¨å§‹ç»ˆä¿æŒç‹¬ç«‹å¯è¿è¡Œã€‚</p>
<h2 data-id="heading-13">æ•°æ®æµå…¨æ™¯</h2>
<pre><code class="hljs language-ruby" lang="ruby">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ä¸»åº”ç”¨                              â”‚
â”‚                                                          â”‚
â”‚  <span class="hljs-variable constant_">API</span> è¯·æ±‚ â†’ userStore / dictStore / localeStore          â”‚
â”‚                        â”‚                                  â”‚
â”‚              shared-provider.ts                           â”‚
â”‚              (watch å“åº”å¼å±æ€§ â†’ bus.<span class="hljs-variable">$emit</span>)                â”‚
â”‚                        â”‚                                  â”‚
â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚            â–¼           â–¼           â–¼                      â”‚
â”‚       wujie props   wujie bus   tabsStore ç­‰              â”‚
â”‚       (<span class="hljs-variable">$shared</span>)     (<span class="hljs-variable constant_">SHARED</span><span class="hljs-symbol">:*</span>)                            â”‚
â”‚            â”‚           â”‚                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚           â”‚
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â–¼         â–¼           â–¼         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”
â”‚ doc  â”‚ â”‚ ibs  â”‚ â”‚ mkt  â”‚ â”‚ ...  â”‚
â”‚      â”‚ â”‚      â”‚ â”‚      â”‚ â”‚      â”‚
â”‚ åªè¯» â”‚ â”‚ åªè¯» â”‚ â”‚ åªè¯» â”‚ â”‚ åªè¯» â”‚
â”‚ æ¶ˆè´¹ â”‚ â”‚ æ¶ˆè´¹ â”‚ â”‚ æ¶ˆè´¹ â”‚ â”‚ æ¶ˆè´¹ â”‚
â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h2 data-id="heading-14">è¸©å‘è®°å½•</h2>
<h3 data-id="heading-15">å‘ 1ï¼šwatch getter è¿”å›æ–°å¯¹è±¡å¯¼è‡´å“åº”å¼å¤±æ•ˆ</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// âŒ é”™è¯¯ï¼šæ¯æ¬¡è°ƒç”¨ source.auth() è¿”å›æ–°å¯¹è±¡ï¼Œwatch è¿½è¸ªä¸åˆ°å˜åŒ–</span>
<span class="hljs-title function_">watch</span>(<span class="hljs-function">() =&gt;</span> source.<span class="hljs-title function_">auth</span>().<span class="hljs-property">token</span>, <span class="hljs-function">(<span class="hljs-params">token</span>) =&gt;</span> { ... })

<span class="hljs-comment">// âœ… æ­£ç¡®ï¼šç›´æ¥ watch Pinia store çš„å“åº”å¼å±æ€§</span>
<span class="hljs-title function_">watch</span>(<span class="hljs-function">() =&gt;</span> userStore.<span class="hljs-property">permissions</span>, <span class="hljs-function">(<span class="hljs-params">permissions</span>) =&gt;</span> { ... })
</code></pre>
<p>è¿™æ˜¯ Vue å“åº”å¼ç³»ç»Ÿçš„åŸºæœ¬åŸç†ï¼Œä½†åœ¨æŠ½è±¡å±‚è¿‡å¤šæ—¶å¾ˆå®¹æ˜“å¿½ç•¥ã€‚<strong>getter å‡½æ•°å¦‚æœæ¯æ¬¡è¿”å›æ–°çš„æ™®é€šå¯¹è±¡ï¼ŒVue æ— æ³•å»ºç«‹ä¾èµ–è¿½è¸ª</strong>ã€‚</p>
<h3 data-id="heading-16">å‘ 2ï¼šdictStore.dictMap æ˜¯ Map ä¸æ˜¯ Object</h3>
<p>Pinia store ä¸­å­—å…¸æ•°æ®ç”¨ <code>Map&lt;string, any&gt;</code> å­˜å‚¨ï¼Œä½†è·¨ iframe context ä¼ è¾“æ—¶ Map æ— æ³•æ­£ç¡®åºåˆ—åŒ–ã€‚éœ€è¦è½¬æ¢ä¸ºæ™®é€š Recordï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">dictMapToRecord</span>(<span class="hljs-params">dictMap: <span class="hljs-built_in">any</span></span>): <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">any</span>[]&gt; {
  <span class="hljs-keyword">const</span> <span class="hljs-attr">result</span>: <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">any</span>[]&gt; = {}
  <span class="hljs-keyword">if</span> (dictMap <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Map</span>) {
    dictMap.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">value, key</span>) =&gt;</span> { result[key] = value })
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>(result, dictMap)
  }
  <span class="hljs-keyword">return</span> result
}
</code></pre>
<h3 data-id="heading-17">å‘ 3ï¼šToken å­˜åœ¨ sessionStorage ä¸­ï¼Œä¸æ˜¯å“åº”å¼çš„</h3>
<p>Token é€šè¿‡ <code>wsCache</code>ï¼ˆå°è£…çš„ <code>web-storage-cache</code>ï¼‰å­˜å‚¨åœ¨ sessionStorage ä¸­ï¼Œä¸åœ¨ Pinia state é‡Œï¼Œ<code>watch</code> ç›‘å¬ä¸åˆ°ã€‚</p>
<p>è§£å†³æ–¹æ¡ˆï¼š<strong>åœ¨å†™å…¥ç‚¹ä¸»åŠ¨å¹¿æ’­</strong>ï¼Œè€Œä¸æ˜¯è¯•å›¾ç›‘å¬å­˜å‚¨å˜åŒ–ã€‚ç”¨åŠ¨æ€ <code>import()</code> é¿å…å¾ªç¯ä¾èµ–ã€‚</p>
<h3 data-id="heading-18">å‘ 4ï¼šè¿‡åº¦æŠ½è±¡çš„ä»£ä»·</h3>
<p>æœ€åˆæˆ‘ä»¬è®¾è®¡äº†å®Œæ•´çš„ composable å±‚ï¼ˆ<code>useSharedAuth</code>ã€<code>useSharedDict</code>ã€<code>useSharedLocale</code>ï¼‰ï¼Œæ¯ä¸ªéƒ½æœ‰ fallback æœºåˆ¶ã€readonly åŒ…è£…ã€onScopeDispose æ¸…ç†ã€‚</p>
<p>çœ‹èµ·æ¥å¾ˆä¼˜é›…ï¼Œä½†å®é™…ä¸Šï¼š</p>
<ul>
<li>å­åº”ç”¨åªéœ€è¦è¯» props + ç›‘å¬ busï¼Œ10 è¡Œä»£ç çš„äº‹</li>
<li>å¤šäº†ä¸€ä¸ª npm åŒ…ä¾èµ–ï¼Œå­åº”ç”¨çš„ package.json è¦åŠ ï¼ŒCI è¦è£…</li>
<li>composable å†…éƒ¨çš„ wujie ç¯å¢ƒæ£€æµ‹é€»è¾‘å’Œå­åº”ç”¨è‡ªå·±å†™æ²¡åŒºåˆ«</li>
<li>ç»´æŠ¤æˆæœ¬è¿œå¤§äºæ”¶ç›Š</li>
</ul>
<p><strong>æœ€ç»ˆæˆ‘ä»¬åˆ æ‰äº†æ•´ä¸ªåŒ…</strong>ï¼Œå›å½’æœ€ç®€æ–¹æ¡ˆã€‚</p>
<h2 data-id="heading-19">è®¾è®¡åŸåˆ™æ€»ç»“</h2>

































<table><thead><tr><th>åŸåˆ™</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>ä¸»åº”ç”¨ç‹¬å ç»´æŠ¤</strong></td><td>ç³»ç»Ÿçº§æ•°æ®åªåœ¨ä¸»åº”ç”¨å†™å…¥ï¼Œå­åº”ç”¨åªè¯»</td></tr><tr><td><strong>ä¸è¿‡åº¦è®¾è®¡</strong></td><td>ä¸æ composable æŠ½è±¡å±‚ã€ä¸æé¢å¤– npm åŒ…</td></tr><tr><td><strong>ç”¨å¹³å°èƒ½åŠ›</strong></td><td>Wujie è‡ªå¸¦ props + busï¼Œå¤Ÿç”¨å°±ä¸é€ è½®å­</td></tr><tr><td><strong>åœ¨å†™å…¥ç‚¹å¹¿æ’­</strong></td><td>éå“åº”å¼æ•°æ®ï¼ˆTokenï¼‰åœ¨å†™å…¥æ—¶ä¸»åŠ¨ emit</td></tr><tr><td><strong>å‘åå…¼å®¹</strong></td><td>æ–°å¢ <code>$shared</code> å­—æ®µï¼Œä¿ç•™æ—§çš„ <code>token</code>/<code>userInfo</code></td></tr><tr><td><strong>ç‹¬ç«‹å¯è¿è¡Œ</strong></td><td>å­åº”ç”¨é€šè¿‡ <code>__WUJIE__</code> ç¯å¢ƒæ£€æµ‹ï¼Œéå¾®å‰ç«¯ç¯å¢ƒèµ°æœ¬åœ° API</td></tr></tbody></table>
<h2 data-id="heading-20">æ•ˆæœ</h2>
<ul>
<li><strong>æ¥å£è°ƒç”¨</strong>ï¼šå­—å…¸è¯·æ±‚ä» N+1 æ¬¡é™ä¸º 1 æ¬¡</li>
<li><strong>è¯­è¨€åˆ‡æ¢</strong>ï¼šå®æ—¶åŒæ­¥ï¼Œæ— éœ€åˆ·æ–°</li>
<li><strong>Token åˆ·æ–°</strong>ï¼šä¸»åº”ç”¨åˆ·æ–°å 50ms å†…æ‰€æœ‰å­åº”ç”¨åŒæ­¥</li>
<li><strong>ä»£ç é‡</strong>ï¼šä¸»åº”ç”¨æ–°å¢ 1 ä¸ªæ–‡ä»¶ï¼ˆ~180 è¡Œï¼‰ï¼Œå­åº”ç”¨å„å‡å°‘ 3 ä¸ªå†—ä½™ Store</li>
<li><strong>ä¾èµ–</strong>ï¼šé›¶æ–°å¢ npm åŒ…</li>
</ul>
<h2 data-id="heading-21">é€‚ç”¨åœºæ™¯</h2>
<p>è¿™ä¸ªæ–¹æ¡ˆé€‚ç”¨äºï¼š</p>
<ul>
<li>åŸºäº Wujieï¼ˆæˆ–ç±»ä¼¼ iframe æ²™ç®±æ–¹æ¡ˆï¼‰çš„å¾®å‰ç«¯æ¶æ„</li>
<li>ä¸»åº”ç”¨æ˜¯å”¯ä¸€çš„ç³»ç»Ÿçº§æ•°æ®ç®¡ç†è€…</li>
<li>å­åº”ç”¨æ•°é‡ &gt; 2ï¼Œä¸”å…±äº«ç”¨æˆ·/æƒé™/å­—å…¸/è¯­è¨€ç­‰å…¨å±€æ•°æ®</li>
<li>å›¢é˜Ÿå¸Œæœ›ä¿æŒæ¶æ„ç®€æ´ï¼Œé¿å…è¿‡åº¦å·¥ç¨‹åŒ–</li>
</ul>
<p>ä¸é€‚ç”¨äºï¼š</p>
<ul>
<li>å­åº”ç”¨ä¹‹é—´éœ€è¦åŒå‘é€šä¿¡çš„åœºæ™¯ï¼ˆæœ¬æ–¹æ¡ˆæ˜¯å•å‘åªè¯»åˆ†å‘ï¼‰</li>
<li>å­åº”ç”¨éœ€è¦ä¿®æ”¹ç³»ç»Ÿçº§æ•°æ®çš„åœºæ™¯ï¼ˆåº”è¯¥é€šè¿‡ bus äº‹ä»¶è¯·æ±‚ä¸»åº”ç”¨ä¿®æ”¹ï¼‰</li>
</ul>
<hr/>
<p><em>æœ¬æ–‡åŸºäº Wujie 1.0 + Vue 3.5 + Pinia 3 çš„ç”Ÿäº§å®è·µï¼Œå¦‚æœ‰é—®é¢˜æ¬¢è¿äº¤æµã€‚</em></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[React Hooks åœ¨ Table Column Render å›è°ƒä¸­çš„ä½¿ç”¨é™·é˜±]]></title>    <link>https://juejin.cn/post/7605164560711155738</link>    <guid>https://juejin.cn/post/7605164560711155738</guid>    <pubDate>2026-02-11T06:01:33.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605164560711155738" data-draft-id="7605164560711139354" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="React Hooks åœ¨ Table Column Render å›è°ƒä¸­çš„ä½¿ç”¨é™·é˜±"/> <meta itemprop="keywords" content="å‰ç«¯,é¢è¯•,React.js"/> <meta itemprop="datePublished" content="2026-02-11T06:01:33.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åˆ€ç–¤"/> <meta itemprop="url" content="https://juejin.cn/user/2546894374183677"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            React Hooks åœ¨ Table Column Render å›è°ƒä¸­çš„ä½¿ç”¨é™·é˜±
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2546894374183677/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åˆ€ç–¤
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-11T06:01:33.000Z" title="Wed Feb 11 2026 06:01:33 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ğŸ“‹ é—®é¢˜æè¿°</h2>
<p>åœ¨ä½¿ç”¨ Ant Design Table ç»„ä»¶æ—¶ï¼Œå°è¯•å°†åŒ…å« <code>useState</code> Hook çš„ä»£ç ä»å­ç»„ä»¶å†…è”åˆ° <code>Column</code> çš„ <code>render</code> å›è°ƒä¸­ï¼Œå¯¼è‡´é¡µé¢é»‘å±ã€‚</p>
<h3 data-id="heading-1">åœºæ™¯è¿˜åŸ</h3>
<p><strong>åŸå§‹å®ç°ï¼ˆæ­£å¸¸å·¥ä½œï¼‰ï¼š</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">// editButton.tsx - ç‹¬ç«‹å­ç»„ä»¶</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Button</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"antd"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">EditModal</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"./edit"</span>;
<span class="hljs-keyword">import</span> { useState } <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">EditButton</span>(<span class="hljs-params">{ data }</span>) {
  <span class="hljs-keyword">const</span> [editOpen, setEditOpen] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">onEdit</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-title function_">setEditOpen</span>(<span class="hljs-literal">true</span>);
  };

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"link"</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{onEdit}</span>&gt;</span>
        ç¼–è¾‘
      <span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">EditModal</span> <span class="hljs-attr">isModalOpen</span>=<span class="hljs-string">{editOpen}</span> <span class="hljs-attr">setIsModalOpen</span>=<span class="hljs-string">{setEditOpen}</span> /&gt;</span>
    <span class="hljs-tag">&lt;/&gt;</span></span>
  );
}
</code></pre>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">// index.tsx - çˆ¶ç»„ä»¶ä¸­ä½¿ç”¨</span>
&lt;<span class="hljs-title class_">Column</span>
  title=<span class="hljs-string">"æ“ä½œ"</span>
  dataIndex=<span class="hljs-string">"action"</span>
  key=<span class="hljs-string">"action"</span>
  render={<span class="hljs-function">(<span class="hljs-params">_: <span class="hljs-built_in">any</span>, record: <span class="hljs-built_in">any</span></span>) =&gt;</span> {
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">EditButton</span> <span class="hljs-attr">data</span>=<span class="hljs-string">{record}</span> /&gt;</span></span>; <span class="hljs-comment">// âœ… æ­£å¸¸å·¥ä½œ</span>
  }}
/&gt;
</code></pre>
<p><strong>é”™è¯¯å®ç°ï¼ˆå¯¼è‡´é»‘å±ï¼‰ï¼š</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">// index.tsx - ç›´æ¥åœ¨ render å›è°ƒä¸­ä½¿ç”¨ Hook</span>
&lt;<span class="hljs-title class_">Column</span>
  title=<span class="hljs-string">"æ“ä½œ"</span>
  dataIndex=<span class="hljs-string">"action"</span>
  key=<span class="hljs-string">"action"</span>
  render={<span class="hljs-function">(<span class="hljs-params">_: <span class="hljs-built_in">any</span>, record: <span class="hljs-built_in">any</span></span>) =&gt;</span> {
    <span class="hljs-comment">// âŒ é”™è¯¯ï¼šåœ¨å›è°ƒå‡½æ•°ä¸­ä½¿ç”¨ Hook</span>
    <span class="hljs-keyword">const</span> [editOpen, setEditOpen] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);

    <span class="hljs-keyword">const</span> <span class="hljs-title function_">onEdit</span> = (<span class="hljs-params"/>) =&gt; {
      <span class="hljs-title function_">setEditOpen</span>(<span class="hljs-literal">true</span>);
    };

    <span class="hljs-keyword">return</span> (
      <span class="xml"><span class="hljs-tag">&lt;&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"link"</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{onEdit}</span>&gt;</span>
          ç¼–è¾‘
        <span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">EditModal</span> <span class="hljs-attr">isModalOpen</span>=<span class="hljs-string">{editOpen}</span> <span class="hljs-attr">setIsModalOpen</span>=<span class="hljs-string">{setEditOpen}</span> /&gt;</span>
      <span class="hljs-tag">&lt;/&gt;</span></span>
    );
  }}
/&gt;
</code></pre>
<h2 data-id="heading-2">ğŸ” é—®é¢˜åŸå› åˆ†æ</h2>
<h3 data-id="heading-3">æ ¹æœ¬åŸå› </h3>
<p><strong>è¿åäº† React Hooks çš„ä½¿ç”¨è§„åˆ™ï¼šHooks åªèƒ½åœ¨ React å‡½æ•°ç»„ä»¶çš„é¡¶å±‚è°ƒç”¨ï¼Œä¸èƒ½åœ¨æ™®é€šå‡½æ•°ã€å›è°ƒå‡½æ•°ã€å¾ªç¯æˆ–æ¡ä»¶è¯­å¥ä¸­è°ƒç”¨ã€‚</strong></p>
<h3 data-id="heading-4">æŠ€æœ¯ç»†èŠ‚</h3>
<ol>
<li>
<p><strong><code>render</code> å›è°ƒçš„æœ¬è´¨</strong></p>
<ul>
<li><code>Table.Column</code> çš„ <code>render</code> å±æ€§æ¥æ”¶çš„æ˜¯ä¸€ä¸ª<strong>æ™®é€šå‡½æ•°</strong>ï¼Œä¸æ˜¯ React ç»„ä»¶å‡½æ•°</li>
<li>è¿™ä¸ªå‡½æ•°åœ¨æ¯æ¬¡æ¸²æŸ“æ—¶è¢«è°ƒç”¨ï¼Œç”¨äºç”Ÿæˆæ¯ä¸€è¡Œçš„æ¸²æŸ“å†…å®¹</li>
<li>React æ— æ³•åœ¨è¿™ä¸ªå‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­è¿½è¸ª Hook çš„è°ƒç”¨é¡ºåº</li>
</ul>
</li>
<li>
<p><strong>React Hooks çš„å·¥ä½œåŸç†</strong></p>
<ul>
<li>Hooks ä¾èµ–äº React çš„å†…éƒ¨æœºåˆ¶æ¥ç»´æŠ¤çŠ¶æ€å’Œå‰¯ä½œç”¨</li>
<li>React é€šè¿‡<strong>è°ƒç”¨é¡ºåº</strong>æ¥è¯†åˆ«å’Œç®¡ç†æ¯ä¸ª Hook</li>
<li>å½“ Hook åœ¨éç»„ä»¶å‡½æ•°ä¸­è°ƒç”¨æ—¶ï¼ŒReact æ— æ³•æ­£ç¡®å»ºç«‹ Hook çš„è°ƒç”¨é“¾ï¼Œå¯¼è‡´è¿è¡Œæ—¶é”™è¯¯</li>
</ul>
</li>
<li>
<p><strong>é”™è¯¯è¡¨ç°</strong></p>
<ul>
<li>å¼€å‘ç¯å¢ƒï¼šæ§åˆ¶å°æŠ¥é”™ <code>Invalid hook call. Hooks can only be called inside the body of a function component.</code></li>
<li>é¡µé¢è¡¨ç°ï¼šç™½å±/é»‘å±ï¼ˆReact é”™è¯¯è¾¹ç•Œæ•è·é”™è¯¯ï¼Œå¯¼è‡´æ•´ä¸ªç»„ä»¶æ ‘å´©æºƒï¼‰</li>
</ul>
</li>
</ol>
<h3 data-id="heading-5">é”™è¯¯ä¿¡æ¯ç¤ºä¾‹</h3>
<pre><code class="hljs language-sql" lang="sql">Error: Invalid hook call. Hooks can <span class="hljs-keyword">only</span> be <span class="hljs-keyword">called</span> inside the body <span class="hljs-keyword">of</span> a <span class="hljs-keyword">function</span> component.
This could happen <span class="hljs-keyword">for</span> <span class="hljs-keyword">one</span> <span class="hljs-keyword">of</span> the following reasons:
<span class="hljs-number">1.</span> You might have mismatching versions <span class="hljs-keyword">of</span> React <span class="hljs-keyword">and</span> the renderer (such <span class="hljs-keyword">as</span> React DOM)
<span class="hljs-number">2.</span> You might be breaking the Rules <span class="hljs-keyword">of</span> Hooks
<span class="hljs-number">3.</span> You might have more than <span class="hljs-keyword">one</span> <span class="hljs-keyword">copy</span> <span class="hljs-keyword">of</span> React <span class="hljs-keyword">in</span> the same app
</code></pre>
<h2 data-id="heading-6">âœ… è§£å†³æ–¹æ¡ˆ</h2>
<h3 data-id="heading-7">æ–¹æ¡ˆä¸€ï¼šä¿æŒå­ç»„ä»¶ç‹¬ç«‹ï¼ˆæ¨èï¼‰</h3>
<p><strong>ä¼˜ç‚¹ï¼š</strong></p>
<ul>
<li>ç¬¦åˆ React ç»„ä»¶åŒ–è®¾è®¡åŸåˆ™</li>
<li>æ¯è¡Œæ•°æ®æ‹¥æœ‰ç‹¬ç«‹çš„çŠ¶æ€ç®¡ç†</li>
<li>ä»£ç æ¸…æ™°ï¼Œæ˜“äºç»´æŠ¤å’Œæµ‹è¯•</li>
<li>æ€§èƒ½ä¼˜åŒ–ï¼šå¯ä»¥å•ç‹¬å¯¹å­ç»„ä»¶è¿›è¡Œ memo ä¼˜åŒ–</li>
</ul>
<p><strong>å®ç°ï¼š</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">// editButton.tsx</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">EditButton</span>(<span class="hljs-params">{ data }</span>) {
  <span class="hljs-keyword">const</span> [editOpen, setEditOpen] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);
  <span class="hljs-comment">// ... å…¶ä»–é€»è¾‘</span>
  <span class="hljs-keyword">return</span> (<span class="hljs-comment">/* ... */</span>);
}

<span class="hljs-comment">// index.tsx</span>
&lt;<span class="hljs-title class_">Column</span>
  title=<span class="hljs-string">"æ“ä½œ"</span>
  render={<span class="hljs-function">(<span class="hljs-params">_: <span class="hljs-built_in">any</span>, record: <span class="hljs-built_in">any</span></span>) =&gt;</span> {
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">EditButton</span> <span class="hljs-attr">data</span>=<span class="hljs-string">{record}</span> /&gt;</span></span>; <span class="hljs-comment">// âœ… æ­£ç¡®</span>
  }}
/&gt;
</code></pre>
<h3 data-id="heading-8">æ–¹æ¡ˆäºŒï¼šåœ¨çˆ¶ç»„ä»¶é¡¶å±‚ç®¡ç†çŠ¶æ€</h3>
<p>å¦‚æœéœ€è¦åœ¨çˆ¶ç»„ä»¶å±‚é¢ç»Ÿä¸€ç®¡ç†å¼¹çª—çŠ¶æ€ï¼ˆä¾‹å¦‚ï¼šåŒä¸€æ—¶é—´åªå…è®¸æ‰“å¼€ä¸€ä¸ªå¼¹çª—ï¼‰ï¼Œå¯ä»¥åœ¨çˆ¶ç»„ä»¶é¡¶å±‚ä½¿ç”¨ Hookï¼š</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">// index.tsx</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">PolicyTextConfig</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// âœ… åœ¨ç»„ä»¶é¡¶å±‚å£°æ˜çŠ¶æ€</span>
  <span class="hljs-keyword">const</span> [editingRecord, setEditingRecord] = useState&lt;<span class="hljs-built_in">any</span>&gt;(<span class="hljs-literal">null</span>);
  <span class="hljs-keyword">const</span> [editOpen, setEditOpen] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleEdit</span> = (<span class="hljs-params">record: <span class="hljs-built_in">any</span></span>) =&gt; {
    <span class="hljs-title function_">setEditingRecord</span>(record);
    <span class="hljs-title function_">setEditOpen</span>(<span class="hljs-literal">true</span>);
  };

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Table</span> <span class="hljs-attr">dataSource</span>=<span class="hljs-string">{tableData}</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Column</span>
          <span class="hljs-attr">title</span>=<span class="hljs-string">"æ“ä½œ"</span>
          <span class="hljs-attr">render</span>=<span class="hljs-string">{(_:</span> <span class="hljs-attr">any</span>, <span class="hljs-attr">record:</span> <span class="hljs-attr">any</span>) =&gt;</span> {
            // âœ… render å›è°ƒä¸­åªè°ƒç”¨æ™®é€šå‡½æ•°ï¼Œä¸ä½¿ç”¨ Hook
            return (
              <span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"link"</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> handleEdit(record)}&gt;
                ç¼–è¾‘
              <span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span>
            );
          }}
        /&gt;
      <span class="hljs-tag">&lt;/<span class="hljs-name">Table</span>&gt;</span>

      {/* âœ… å¼¹çª—æ”¾åœ¨ç»„ä»¶é¡¶å±‚ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">EditModal</span>
        <span class="hljs-attr">isModalOpen</span>=<span class="hljs-string">{editOpen}</span>
        <span class="hljs-attr">setIsModalOpen</span>=<span class="hljs-string">{setEditOpen}</span>
        <span class="hljs-attr">data</span>=<span class="hljs-string">{editingRecord}</span>
      /&gt;</span>
    <span class="hljs-tag">&lt;/&gt;</span></span>
  );
}
</code></pre>
<h2 data-id="heading-9">ğŸ“š çŸ¥è¯†ç‚¹æ€»ç»“</h2>
<h3 data-id="heading-10">React Hooks è§„åˆ™</h3>
<ol>
<li>
<p><strong>åªåœ¨é¡¶å±‚è°ƒç”¨ Hook</strong></p>
<ul>
<li>âœ… åœ¨å‡½æ•°ç»„ä»¶çš„æœ€é¡¶å±‚</li>
<li>âœ… åœ¨è‡ªå®šä¹‰ Hook çš„æœ€é¡¶å±‚</li>
<li>âŒ ä¸åœ¨å¾ªç¯ã€æ¡ä»¶æˆ–åµŒå¥—å‡½æ•°ä¸­</li>
<li>âŒ ä¸åœ¨æ™®é€šå›è°ƒå‡½æ•°ä¸­</li>
</ul>
</li>
<li>
<p><strong>åªåœ¨ React å‡½æ•°ä¸­è°ƒç”¨ Hook</strong></p>
<ul>
<li>âœ… React å‡½æ•°ç»„ä»¶</li>
<li>âœ… è‡ªå®šä¹‰ Hook</li>
<li>âŒ æ™®é€š JavaScript å‡½æ•°</li>
<li>âŒ äº‹ä»¶å¤„ç†å‡½æ•°</li>
<li>âŒ æ¸²æŸ“å›è°ƒå‡½æ•°ï¼ˆå¦‚ <code>render</code>ã€<code>map</code> å›è°ƒç­‰ï¼‰</li>
</ul>
</li>
</ol>
<h3 data-id="heading-11">å¸¸è§é™·é˜±åœºæ™¯</h3>








































<table><thead><tr><th>åœºæ™¯</th><th>æ˜¯å¦æ­£ç¡®</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>ç»„ä»¶é¡¶å±‚ <code>useState</code></td><td>âœ…</td><td>æ­£ç¡®ç”¨æ³•</td></tr><tr><td>è‡ªå®šä¹‰ Hook ä¸­ <code>useState</code></td><td>âœ…</td><td>æ­£ç¡®ç”¨æ³•</td></tr><tr><td><code>map</code> å›è°ƒä¸­ <code>useState</code></td><td>âŒ</td><td>é”™è¯¯ï¼šæ™®é€šå‡½æ•°</td></tr><tr><td><code>onClick</code> ä¸­ <code>useState</code></td><td>âŒ</td><td>é”™è¯¯ï¼šäº‹ä»¶å¤„ç†å‡½æ•°</td></tr><tr><td><code>Table.Column render</code> ä¸­ <code>useState</code></td><td>âŒ</td><td>é”™è¯¯ï¼šæ¸²æŸ“å›è°ƒå‡½æ•°</td></tr><tr><td>æ¡ä»¶è¯­å¥ä¸­ <code>useState</code></td><td>âŒ</td><td>é”™è¯¯ï¼šè¿åè°ƒç”¨é¡ºåºè§„åˆ™</td></tr></tbody></table>
<h2 data-id="heading-12">ğŸ¯ æœ€ä½³å®è·µ</h2>
<ol>
<li>
<p><strong>ç»„ä»¶åŒ–ä¼˜å…ˆ</strong></p>
<ul>
<li>éœ€è¦çŠ¶æ€ç®¡ç†çš„ UI ç‰‡æ®µï¼Œä¼˜å…ˆæå–ä¸ºç‹¬ç«‹ç»„ä»¶</li>
<li>ä¿æŒç»„ä»¶çš„å•ä¸€èŒè´£åŸåˆ™</li>
</ul>
</li>
<li>
<p><strong>çŠ¶æ€æå‡ vs çŠ¶æ€ä¸‹æ²‰</strong></p>
<ul>
<li>å¦‚æœå¤šä¸ªç»„ä»¶éœ€è¦å…±äº«çŠ¶æ€ â†’ çŠ¶æ€æå‡åˆ°çˆ¶ç»„ä»¶</li>
<li>å¦‚æœçŠ¶æ€åªå±äºå•ä¸ªç»„ä»¶ â†’ ä¿æŒåœ¨ç»„ä»¶å†…éƒ¨</li>
</ul>
</li>
<li>
<p><strong>ä»£ç å®¡æŸ¥æ£€æŸ¥ç‚¹</strong></p>
<ul>
<li>æ£€æŸ¥æ‰€æœ‰ Hook è°ƒç”¨æ˜¯å¦åœ¨ç»„ä»¶é¡¶å±‚</li>
<li>æ£€æŸ¥æ˜¯å¦æœ‰åœ¨å›è°ƒå‡½æ•°ä¸­ä½¿ç”¨ Hook çš„æƒ…å†µ</li>
<li>ä½¿ç”¨ ESLint æ’ä»¶ <code>eslint-plugin-react-hooks</code> è‡ªåŠ¨æ£€æµ‹</li>
</ul>
</li>
</ol>
<h2 data-id="heading-13">ğŸ”§ è°ƒè¯•æŠ€å·§</h2>
<ol>
<li>
<p><strong>æŸ¥çœ‹æ§åˆ¶å°é”™è¯¯</strong></p>
<ul>
<li>React å¼€å‘æ¨¡å¼ä¼šç»™å‡ºæ˜ç¡®çš„é”™è¯¯æç¤º</li>
<li>å…³æ³¨ "Invalid hook call" ç›¸å…³é”™è¯¯</li>
</ul>
</li>
<li>
<p><strong>ä½¿ç”¨ React DevTools</strong></p>
<ul>
<li>æ£€æŸ¥ç»„ä»¶æ ‘ç»“æ„</li>
<li>æŸ¥çœ‹ Hook è°ƒç”¨æƒ…å†µ</li>
</ul>
</li>
<li>
<p><strong>ESLint é…ç½®</strong></p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"plugins"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"react-hooks"</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"rules"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"react-hooks/rules-of-hooks"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"error"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"react-hooks/exhaustive-deps"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"warn"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
</li>
</ol>
<h2 data-id="heading-14">ğŸ“ æ€»ç»“</h2>
<p>è¿™æ¬¡è¸©å‘çš„æ ¸å¿ƒæ•™è®­æ˜¯ï¼š<strong>React Hooks æœ‰ä¸¥æ ¼çš„è°ƒç”¨è§„åˆ™ï¼Œä»»ä½•è¿åè§„åˆ™çš„ä½¿ç”¨éƒ½ä¼šå¯¼è‡´è¿è¡Œæ—¶é”™è¯¯ã€‚</strong> åœ¨ Ant Design Table çš„ <code>render</code> å›è°ƒä¸­ï¼Œåº”è¯¥åªè¿”å› JSX æˆ–è°ƒç”¨æ™®é€šå‡½æ•°ï¼Œè€Œå°†éœ€è¦ Hook çš„é€»è¾‘å°è£…åœ¨ç‹¬ç«‹çš„ç»„ä»¶ä¸­ã€‚</p>
<p>é€šè¿‡è¿™æ¬¡é—®é¢˜ï¼Œæˆ‘ä»¬æ›´åŠ ç†è§£äº†ï¼š</p>
<ul>
<li>React Hooks çš„è®¾è®¡åŸç†å’Œé™åˆ¶</li>
<li>ç»„ä»¶åŒ–è®¾è®¡çš„é‡è¦æ€§</li>
<li>ä»£ç é‡æ„æ—¶éœ€è¦ä¿æŒå¯¹ Hook è§„åˆ™çš„æ•æ„Ÿæ€§</li>
</ul>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å­—èŠ‚è·³åŠ¨Javaå²—é¢è¯•å¸¸è§é¢˜]]></title>    <link>https://juejin.cn/post/7605135197166354482</link>    <guid>https://juejin.cn/post/7605135197166354482</guid>    <pubDate>2026-02-11T06:10:17.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605135197166354482" data-draft-id="7605173538416984074" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å­—èŠ‚è·³åŠ¨Javaå²—é¢è¯•å¸¸è§é¢˜"/> <meta itemprop="keywords" content="åç«¯,é¢è¯•,Java"/> <meta itemprop="datePublished" content="2026-02-11T06:10:17.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Javaæ°´è§£"/> <meta itemprop="url" content="https://juejin.cn/user/2441349519143037"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å­—èŠ‚è·³åŠ¨Javaå²—é¢è¯•å¸¸è§é¢˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2441349519143037/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Javaæ°´è§£
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-11T06:10:17.000Z" title="Wed Feb 11 2026 06:10:17 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»23åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>1.####Â  <strong>ã€ä»€ä¹ˆæƒ…å†µä¸‹ä¼šäº§ç”ŸStackOverflowErrorï¼ˆæ ˆæº¢å‡ºï¼‰å’ŒOutOfMemoryErrorï¼ˆå †æº¢å‡ºï¼‰æ€ä¹ˆæ’æŸ¥Â Â Â  éš¾åº¦ç³»æ•°ï¼šâ­â­</strong></p>
<ol>
<li>
<p>å¼•å‘ StackOverFlowError çš„å¸¸è§åŸå› æœ‰ä»¥ä¸‹å‡ ç§</p>
<ul>
<li>æ— é™é€’å½’å¾ªç¯è°ƒç”¨ï¼ˆæœ€å¸¸è§ï¼‰</li>
<li>æ‰§è¡Œäº†å¤§é‡æ–¹æ³•ï¼Œå¯¼è‡´çº¿ç¨‹æ ˆç©ºé—´è€—å°½</li>
<li>æ–¹æ³•å†…å£°æ˜äº†æµ·é‡çš„å±€éƒ¨å˜é‡</li>
<li>native ä»£ç æœ‰æ ˆä¸Šåˆ†é…çš„é€»è¾‘ï¼Œå¹¶ä¸”è¦æ±‚çš„å†…å­˜è¿˜ä¸å°ï¼Œæ¯”å¦‚Â java.net.SocketInputStream.read0Â ä¼šåœ¨æ ˆä¸Šè¦æ±‚åˆ†é…ä¸€ä¸ª 64KB çš„ç¼“å­˜ï¼ˆ64ä½ Linuxï¼‰ã€‚</li>
</ul>
</li>
<li>
<p>å¼•å‘ OutOfMemoryErrorçš„å¸¸è§åŸå› æœ‰ä»¥ä¸‹å‡ ç§</p>
<ul>
<li>å†…å­˜ä¸­åŠ è½½çš„æ•°æ®é‡è¿‡äºåºå¤§ï¼Œå¦‚ä¸€æ¬¡ä»æ•°æ®åº“å–å‡ºè¿‡å¤šæ•°æ®</li>
<li>é›†åˆç±»ä¸­æœ‰å¯¹å¯¹è±¡çš„å¼•ç”¨ï¼Œä½¿ç”¨å®Œåæœªæ¸…ç©ºï¼Œä½¿å¾—JVMä¸èƒ½å›æ”¶</li>
<li>ä»£ç ä¸­å­˜åœ¨æ­»å¾ªç¯æˆ–å¾ªç¯äº§ç”Ÿè¿‡å¤šé‡å¤çš„å¯¹è±¡å®ä½“</li>
<li>å¯åŠ¨å‚æ•°å†…å­˜å€¼è®¾å®šçš„è¿‡å°</li>
</ul>
</li>
<li>
<p>æ’æŸ¥ï¼šå¯ä»¥é€šè¿‡jvisualvmè¿›è¡Œå†…å­˜å¿«ç…§åˆ†æ</p>
</li>
<li>
<p>æ ˆæº¢å‡ºã€å †æº¢å‡ºæ¡ˆä¾‹æ¼”ç¤º</p>
</li>
</ol>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/da6e8025bafb467390fd14f56ab290d0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YeawtOinow==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771396836&amp;x-signature=Vdre2PriOkM4TAS7Gvn1%2BZHZmrU%3D" alt="" loading="lazy"/></p>
<p>Â publicÂ classÂ StackOverFlowTestÂ {<br/>
privateÂ staticÂ intÂ countÂ =Â 1;<br/>
publicÂ staticÂ voidÂ main(String[]Â args)Â {<br/>
//æ¨¡æ‹Ÿæ ˆæº¢å‡º<br/>
//getDieCircle();</p>
<p>//æ¨¡æ‹Ÿå †æº¢å‡º<br/>
getOutOfMem();<br/>
}</p>
<p>Â Â publicÂ staticÂ voidÂ getDieCircle(){<br/>
System.out.println(count++);<br/>
getDieCircle();<br/>
}</p>
<p>Â Â publicÂ staticÂ voidÂ getOutOfMem(){<br/>
whileÂ (true)Â {<br/>
ObjectÂ oÂ =Â newÂ Object();<br/>
System.out.println(o);<br/>
}<br/>
}<br/>
}</p>
<p>Java</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d73fbb8fdb1a4cecb8d4bbbd25ae878d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YeawtOinow==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771396836&amp;x-signature=A6M59y3Uinvu%2BeC5ad1kyrAQ%2FHA%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/923e3f9edb76499e98af86775b1fe53a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YeawtOinow==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771396836&amp;x-signature=z35LDQ9lOREOFy2zjFWMFC%2FvFUs%3D" alt="" loading="lazy"/></p>
<blockquote>
<blockquote>
<p><strong>ç¯‡å¹…é™åˆ¶ä¸‹é¢å°±åªèƒ½ç»™å¤§å®¶å±•ç¤ºå°å†Œéƒ¨åˆ†å†…å®¹äº†ã€‚æ•´ç†äº†ä¸€ä»½æ ¸å¿ƒé¢è¯•ç¬”è®°åŒ…æ‹¬äº†ï¼šJavaé¢è¯•ã€Springã€JVMã€MyBatisã€Redisã€MySQLã€å¹¶å‘ç¼–ç¨‹ã€å¾®æœåŠ¡ã€Linuxã€Springbootã€SpringCloudã€MQã€Kafka é¢è¯•ä¸“é¢˜</strong></p>
<blockquote>
</blockquote>
<p><strong>éœ€è¦å…¨å¥—é¢è¯•ç¬”è®°åŠç­”æ¡ˆã€æ‰«ä¸€æ‰«ã€‘</strong> Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â å³å¯å…è´¹è·å–**</p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/659d8d32094f4d318d5cafb036712d11~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YeawtOinow==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771396836&amp;x-signature=q6S%2Bt08A2wQGWu5bzK7gs7ttKlM%3D" alt="8fbf1ef8b61e2dbbb33b7690a41d12e.png" loading="lazy"/></p>
</blockquote>
<h4 data-id="heading-0"><a href="https://link.juejin.cn/?target=" target="_blank" title="https://link.juejin.cn/?target="/><strong>6ã€ä»€ä¹ˆæ˜¯çº¿ç¨‹æ± ï¼Œçº¿ç¨‹æ± æœ‰å“ªäº›ï¼ˆåˆ›å»ºï¼‰Â Â Â  éš¾åº¦ç³»æ•°ï¼šâ­</strong></h4>
<p>çº¿ç¨‹æ± å°±æ˜¯äº‹å…ˆå°†å¤šä¸ªçº¿ç¨‹å¯¹è±¡æ”¾åˆ°ä¸€ä¸ªå®¹å™¨ä¸­ï¼Œå½“ä½¿ç”¨çš„æ—¶å€™å°±ä¸ç”¨ new çº¿ç¨‹è€Œæ˜¯ç›´æ¥å»æ± ä¸­æ‹¿çº¿ç¨‹å³å¯ï¼ŒèŠ‚çœäº†å¼€è¾Ÿå­çº¿ç¨‹çš„æ—¶é—´ï¼Œæé«˜çš„ä»£ç æ‰§è¡Œæ•ˆç‡</p>
<p>åœ¨ JDK çš„ java.util.concurrent.Executors ä¸­æä¾›äº†ç”Ÿæˆå¤šç§çº¿ç¨‹æ± çš„é™æ€æ–¹æ³•ã€‚</p>
<p>ExecutorService newCachedThreadPool = Executors.newCachedThreadPool();</p>
<p>ExecutorService newFixedThreadPool = Executors.newFixedThreadPool(4);</p>
<p>ScheduledExecutorService newScheduledThreadPool = Executors.newScheduledThreadPool(4);</p>
<p>ExecutorService newSingleThreadExecutor = Executors.newSingleThreadExecutor();</p>
<p>ç„¶åè°ƒç”¨ä»–ä»¬çš„ execute æ–¹æ³•å³å¯ã€‚</p>
<p>è¿™4ç§çº¿ç¨‹æ± åº•å±‚ å…¨éƒ¨æ˜¯ThreadPoolExecutorå¯¹è±¡çš„å®ç°ï¼Œé˜¿é‡Œè§„èŒƒæ‰‹å†Œä¸­è§„å®šçº¿ç¨‹æ± é‡‡ç”¨ThreadPoolExecutorè‡ªå®šä¹‰çš„ï¼Œå®é™…å¼€å‘ä¹Ÿæ˜¯ã€‚</p>
<ol>
<li><strong>newCachedThreadPool</strong></li>
</ol>
<p>åˆ›å»ºä¸€ä¸ªå¯ç¼“å­˜çº¿ç¨‹æ± ï¼Œå¦‚æœçº¿ç¨‹æ± é•¿åº¦è¶…è¿‡å¤„ç†éœ€è¦ï¼Œå¯çµæ´»å›æ”¶ç©ºé—²çº¿ç¨‹ï¼Œè‹¥æ— å¯å›æ”¶ï¼Œåˆ™æ–°å»ºçº¿ç¨‹ã€‚è¿™ç§ç±»å‹çš„çº¿ç¨‹æ± ç‰¹ç‚¹æ˜¯ï¼š</p>
<p>å·¥ä½œçº¿ç¨‹çš„åˆ›å»ºæ•°é‡å‡ ä¹æ²¡æœ‰é™åˆ¶(å…¶å®ä¹Ÿæœ‰é™åˆ¶çš„,æ•°ç›®ä¸ºInterger. MAX_VALUE), è¿™æ ·å¯çµæ´»çš„å¾€çº¿ç¨‹æ± ä¸­æ·»åŠ çº¿ç¨‹ã€‚</p>
<p>å¦‚æœé•¿æ—¶é—´æ²¡æœ‰å¾€çº¿ç¨‹æ± ä¸­æäº¤ä»»åŠ¡ï¼Œå³å¦‚æœå·¥ä½œçº¿ç¨‹ç©ºé—²äº†æŒ‡å®šçš„æ—¶é—´(é»˜è®¤ä¸º1åˆ†é’Ÿ)ï¼Œåˆ™è¯¥å·¥ä½œçº¿ç¨‹å°†è‡ªåŠ¨ç»ˆæ­¢ã€‚ç»ˆæ­¢åï¼Œå¦‚æœä½ åˆæäº¤äº†æ–°çš„ä»»åŠ¡ï¼Œåˆ™çº¿ç¨‹æ± é‡æ–°åˆ›å»ºä¸€ä¸ªå·¥ä½œçº¿ç¨‹ã€‚</p>
<p>åœ¨ä½¿ç”¨CachedThreadPoolæ—¶ï¼Œä¸€å®šè¦æ³¨æ„æ§åˆ¶ä»»åŠ¡çš„æ•°é‡ï¼Œå¦åˆ™ï¼Œç”±äºå¤§é‡çº¿ç¨‹åŒæ—¶è¿è¡Œï¼Œå¾ˆæœ‰ä¼šé€ æˆç³»ç»Ÿç˜«ç—ªã€‚</p>
<ol>
<li><strong>newFixedThreadPool</strong></li>
</ol>
<p>åˆ›å»ºä¸€ä¸ªæŒ‡å®šå·¥ä½œçº¿ç¨‹æ•°é‡çš„çº¿ç¨‹æ± ã€‚æ¯å½“æäº¤ä¸€ä¸ªä»»åŠ¡å°±åˆ›å»ºä¸€ä¸ªå·¥ä½œçº¿ç¨‹ï¼Œå¦‚æœå·¥ä½œçº¿ç¨‹æ•°é‡è¾¾åˆ°çº¿ç¨‹æ± åˆå§‹çš„æœ€å¤§æ•°ï¼Œåˆ™å°†æäº¤çš„ä»»åŠ¡å­˜å…¥åˆ°æ± é˜Ÿåˆ—ä¸­ã€‚FixedThreadPoolæ˜¯ä¸€ä¸ªå…¸å‹ä¸”ä¼˜ç§€çš„çº¿ç¨‹æ± ï¼Œå®ƒå…·æœ‰çº¿ç¨‹æ± æé«˜ç¨‹åºæ•ˆç‡å’ŒèŠ‚çœåˆ›å»ºçº¿ç¨‹æ—¶æ‰€è€—çš„å¼€é”€çš„ä¼˜ç‚¹ã€‚ä½†æ˜¯ï¼Œåœ¨çº¿ç¨‹æ± ç©ºé—²æ—¶ï¼Œå³çº¿ç¨‹æ± ä¸­æ²¡æœ‰å¯è¿è¡Œä»»åŠ¡æ—¶ï¼Œå®ƒä¸ä¼šé‡Šæ”¾å·¥ä½œçº¿ç¨‹ï¼Œè¿˜ä¼šå ç”¨ä¸€å®šçš„ç³»ç»Ÿèµ„æºã€‚</p>
<ol>
<li><strong>newSingleThreadExecutor</strong></li>
</ol>
<p>åˆ›å»ºä¸€ä¸ªå•çº¿ç¨‹åŒ–çš„Executorï¼Œå³åªåˆ›å»ºå”¯ä¸€çš„å·¥ä½œè€…çº¿ç¨‹æ¥æ‰§è¡Œä»»åŠ¡ï¼Œå®ƒåªä¼šç”¨å”¯ä¸€çš„å·¥ä½œçº¿ç¨‹æ¥æ‰§è¡Œä»»åŠ¡ï¼Œä¿è¯æ‰€æœ‰ä»»åŠ¡æŒ‰ç…§æŒ‡å®šé¡ºåº(FIFO, LIFO, ä¼˜å…ˆçº§)æ‰§è¡Œã€‚å¦‚æœè¿™ä¸ªçº¿ç¨‹å¼‚å¸¸ç»“æŸï¼Œä¼šæœ‰å¦ä¸€ä¸ªå–ä»£å®ƒï¼Œä¿è¯é¡ºåºæ‰§è¡Œã€‚å•å·¥ä½œçº¿ç¨‹æœ€å¤§çš„ç‰¹ç‚¹æ˜¯å¯ä¿è¯é¡ºåºåœ°æ‰§è¡Œå„ä¸ªä»»åŠ¡ï¼Œå¹¶ä¸”åœ¨ä»»æ„ç»™å®šçš„æ—¶é—´ä¸ä¼šæœ‰å¤šä¸ªçº¿ç¨‹æ˜¯æ´»åŠ¨çš„ã€‚</p>
<ol>
<li><strong>newScheduleThreadPool</strong></li>
</ol>
<p>åˆ›å»ºä¸€ä¸ªå®šé•¿çš„çº¿ç¨‹æ± ï¼Œè€Œä¸”æ”¯æŒå®šæ—¶çš„ä»¥åŠå‘¨æœŸæ€§çš„ä»»åŠ¡æ‰§è¡Œã€‚ä¾‹å¦‚å»¶è¿Ÿ3ç§’æ‰§è¡Œã€‚</p>
<h4 data-id="heading-1"><a href="https://link.juejin.cn/?target=" target="_blank" title="https://link.juejin.cn/?target="/><strong>7ã€ä¸ºä»€ä¹ˆè¦ä½¿ç”¨çº¿ç¨‹æ± Â Â Â  éš¾åº¦ç³»æ•°ï¼šâ­</strong></h4>
<ol>
<li>çº¿ç¨‹æ± åšçš„å·¥ä½œä¸»è¦æ˜¯æ§åˆ¶è¿è¡Œçš„çº¿ç¨‹æ•°é‡ï¼Œå¤„ç†è¿‡ç¨‹ä¸­å°†ä»»åŠ¡æ”¾å…¥é˜Ÿåˆ—ï¼Œç„¶ååœ¨çº¿ç¨‹åˆ›å»ºåå¯åŠ¨è¿™äº›ä»»åŠ¡ï¼Œå¦‚æœçº¿ç¨‹æ•°é‡è¶…è¿‡äº†æœ€ å¤§æ•°é‡ï¼Œè¶…å‡ºæ•°é‡çš„çº¿ç¨‹æ’é˜Ÿç­‰å€™ï¼Œç­‰å…¶å®ƒçº¿ç¨‹æ‰§è¡Œå®Œæ¯•ï¼Œå†ä»é˜Ÿåˆ—ä¸­å–å‡ºä»»åŠ¡æ¥æ‰§è¡Œã€‚</li>
<li>ä¸»è¦ç‰¹ç‚¹:çº¿ç¨‹å¤ç”¨;æ§åˆ¶æœ€å¤§å¹¶å‘æ•°:ç®¡ç†çº¿ç¨‹ã€‚</li>
</ol>
<p>ç¬¬ä¸€:é™ä½èµ„æºæ¶ˆè€—ã€‚é€šè¿‡é‡å¤åˆ©ç”¨å·±åˆ›å»ºçš„çº¿ç¨‹é™ä½çº¿ç¨‹åˆ›å»ºå’Œé”€æ¯é€ æˆçš„æ¶ˆè€—ã€‚</p>
<p>ç¬¬äºŒ:æé«˜å“åº”é€Ÿåº¦ã€‚å½“ä»»åŠ¡åˆ°è¾¾æ—¶ï¼Œä»»åŠ¡å¯ä»¥ä¸éœ€è¦çš„ç­‰åˆ°çº¿ç¨‹åˆ›å»ºå°±èƒ½ç«‹å³æ‰§è¡Œã€‚</p>
<p>ç¬¬ä¸‰:æé«˜çº¿ç¨‹çš„å¯ç®¡ç†æ€§ã€‚çº¿ç¨‹æ˜¯ç¨€ç¼ºèµ„æºï¼Œå¦‚æœæ— é™åˆ¶çš„åˆ›å»ºï¼Œä¸ä»…ä¼šæ¶ˆè€—ç³»ç»Ÿèµ„æºï¼Œè¿˜ä¼šé™ä½ç³»ç»Ÿçš„ç¨³å®šæ€§ï¼Œä½¿ç”¨çº¿ç¨‹æ± å¯ä»¥è¿› è¡Œç»Ÿä¸€çš„åˆ†é…ï¼Œè°ƒä¼˜å’Œç›‘æ§</p>
<h4 data-id="heading-2"><a href="https://link.juejin.cn/?target=" target="_blank" title="https://link.juejin.cn/?target="/><strong>8ã€çº¿ç¨‹æ± åº•å±‚å·¥ä½œåŸç†Â Â Â  éš¾åº¦ç³»æ•°ï¼šâ­</strong></h4>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/44ee815034be4be48226be1219e73109~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YeawtOinow==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771396836&amp;x-signature=FF1uZ7wv3hC3Lt69gEq88aj81c8%3D" alt="" loading="lazy"/></p>
<ol>
<li>ç¬¬ä¸€æ­¥ï¼šçº¿ç¨‹æ± åˆšåˆ›å»ºçš„æ—¶å€™ï¼Œé‡Œé¢æ²¡æœ‰ä»»ä½•çº¿ç¨‹ï¼Œç­‰åˆ°æœ‰ä»»åŠ¡è¿‡æ¥çš„æ—¶å€™æ‰ä¼šåˆ›å»ºçº¿ç¨‹ã€‚å½“ç„¶ä¹Ÿå¯ä»¥è°ƒç”¨Â prestartAllCoreThreads()Â æˆ–è€…Â prestartCoreThread()Â æ–¹æ³•é¢„åˆ›å»ºcorePoolSizeä¸ªçº¿ç¨‹</li>
<li>ç¬¬äºŒæ­¥ï¼šè°ƒç”¨execute()æäº¤ä¸€ä¸ªä»»åŠ¡æ—¶ï¼Œå¦‚æœå½“å‰çš„å·¥ä½œçº¿ç¨‹æ•°&lt;corePoolSizeï¼Œç›´æ¥åˆ›å»ºæ–°çš„çº¿ç¨‹æ‰§è¡Œè¿™ä¸ªä»»åŠ¡</li>
<li>ç¬¬ä¸‰æ­¥ï¼šå¦‚æœå½“æ—¶å·¥ä½œçº¿ç¨‹æ•°é‡&gt;=corePoolSizeï¼Œä¼šå°†ä»»åŠ¡æ”¾å…¥ä»»åŠ¡é˜Ÿåˆ—ä¸­ç¼“å­˜</li>
<li>ç¬¬å››æ­¥ï¼šå¦‚æœé˜Ÿåˆ—å·²æ»¡ï¼Œå¹¶ä¸”çº¿ç¨‹æ± ä¸­å·¥ä½œçº¿ç¨‹çš„æ•°é‡&lt;maximumPoolSizeï¼Œè¿˜æ˜¯ä¼šåˆ›å»ºçº¿ç¨‹æ‰§è¡Œè¿™ä¸ªä»»åŠ¡</li>
<li>ç¬¬äº”æ­¥ï¼šå¦‚æœé˜Ÿåˆ—å·²æ»¡ï¼Œå¹¶ä¸”çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹å·²è¾¾åˆ°maximumPoolSizeï¼Œè¿™ä¸ªæ—¶å€™ä¼šæ‰§è¡Œæ‹’ç»ç­–ç•¥ï¼ŒJAVAçº¿ç¨‹æ± é»˜è®¤çš„ç­–ç•¥æ˜¯AbortPolicyï¼Œå³æŠ›å‡ºRejectedExecutionExceptionå¼‚å¸¸</li>
</ol>
<h4 data-id="heading-3"><a href="https://link.juejin.cn/?target=" target="_blank" title="https://link.juejin.cn/?target="/><strong>9ã€ThreadPoolExecutorå¯¹è±¡æœ‰å“ªäº›å‚æ•° æ€ä¹ˆè®¾å®šæ ¸å¿ƒçº¿ç¨‹æ•°å’Œæœ€å¤§çº¿ç¨‹æ•° æ‹’ç»ç­–ç•¥æœ‰å“ªäº›Â Â Â  éš¾åº¦ç³»æ•°ï¼šâ­</strong></h4>
<p><strong>å‚æ•°ä¸ä½œç”¨ï¼š</strong> Â å…±7ä¸ªå‚æ•°</p>
<ol>
<li><strong>corePoolSizeï¼š</strong> Â æ ¸å¿ƒçº¿ç¨‹æ•°ï¼Œ</li>
</ol>
<p>åœ¨ThreadPoolExecutorä¸­æœ‰ä¸€ä¸ªä¸å®ƒç›¸å…³çš„é…ç½®ï¼šallowCoreThreadTimeOutï¼ˆé»˜è®¤ä¸ºfalseï¼‰ï¼Œå½“allowCoreThreadTimeOutä¸ºfalseæ—¶ï¼Œæ ¸å¿ƒçº¿ç¨‹ä¼šä¸€ç›´å­˜æ´»ï¼Œå“ªæ€•æ˜¯ä¸€ç›´ç©ºé—²ç€ã€‚è€Œå½“allowCoreThreadTimeOutä¸ºtrueæ—¶æ ¸å¿ƒçº¿ç¨‹ç©ºé—²æ—¶é—´è¶…è¿‡keepAliveTimeæ—¶ä¼šè¢«å›æ”¶ã€‚</p>
<ol>
<li><strong>maximumPoolSizeï¼š</strong> Â æœ€å¤§çº¿ç¨‹æ•°</li>
</ol>
<p>çº¿ç¨‹æ± èƒ½å®¹çº³çš„æœ€å¤§çº¿ç¨‹æ•°ï¼Œå½“çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹è¾¾åˆ°æœ€å¤§æ—¶ï¼Œæ­¤æ—¶æ·»åŠ ä»»åŠ¡å°†ä¼šé‡‡ç”¨æ‹’ç»ç­–ç•¥ï¼Œé»˜è®¤çš„æ‹’ç»ç­–ç•¥æ˜¯æŠ›å‡ºä¸€ä¸ªè¿è¡Œæ—¶é”™è¯¯ï¼ˆRejectedExecutionExceptionï¼‰ã€‚å€¼å¾—ä¸€æçš„æ˜¯ï¼Œå½“åˆå§‹åŒ–æ—¶ç”¨çš„å·¥ä½œé˜Ÿåˆ—ä¸ºLinkedBlockingDequeæ—¶ï¼Œè¿™ä¸ªå€¼å°†æ— æ•ˆã€‚</p>
<ol>
<li><strong>keepAliveTimeï¼š</strong> Â å­˜æ´»æ—¶é—´ï¼Œ</li>
</ol>
<p>å½“éæ ¸å¿ƒç©ºé—²è¶…è¿‡è¿™ä¸ªæ—¶é—´å°†è¢«å›æ”¶ï¼ŒåŒæ—¶ç©ºé—²æ ¸å¿ƒçº¿ç¨‹æ˜¯å¦å›æ”¶å—allowCoreThreadTimeOutå½±å“ã€‚</p>
<ol>
<li><strong>unitï¼š</strong> Â keepAliveTimeçš„å•ä½ã€‚</li>
<li><strong>workQueueï¼š</strong> Â ä»»åŠ¡é˜Ÿåˆ—</li>
</ol>
<p>å¸¸ç”¨æœ‰ä¸‰ç§é˜Ÿåˆ—ï¼Œå³SynchronousQueue,LinkedBlockingDequeï¼ˆæ— ç•Œé˜Ÿåˆ—ï¼‰,ArrayBlockingQueueï¼ˆæœ‰ç•Œé˜Ÿåˆ—ï¼‰ã€‚</p>
<ol>
<li><strong>threadFactoryï¼š</strong> Â çº¿ç¨‹å·¥å‚ï¼Œ</li>
</ol>
<p>ThreadFactoryæ˜¯ä¸€ä¸ªæ¥å£ï¼Œç”¨æ¥åˆ›å»ºworkerã€‚é€šè¿‡çº¿ç¨‹å·¥å‚å¯ä»¥å¯¹çº¿ç¨‹çš„ä¸€äº›å±æ€§è¿›è¡Œå®šåˆ¶ã€‚é»˜è®¤ç›´æ¥æ–°å»ºçº¿ç¨‹ã€‚</p>
<ol>
<li><strong>RejectedExecutionHandlerï¼š</strong> Â æ‹’ç»ç­–ç•¥</li>
</ol>
<p>ä¹Ÿæ˜¯ä¸€ä¸ªæ¥å£ï¼Œåªæœ‰ä¸€ä¸ªæ–¹æ³•ï¼Œå½“çº¿ç¨‹æ± ä¸­çš„èµ„æºå·²ç»å…¨éƒ¨ä½¿ç”¨ï¼Œæ·»åŠ æ–°çº¿ç¨‹è¢«æ‹’ç»æ—¶ï¼Œä¼šè°ƒç”¨RejectedExecutionHandlerçš„rejectedExecutionæ³•ã€‚é»˜è®¤æ˜¯æŠ›å‡ºä¸€ä¸ªè¿è¡Œæ—¶å¼‚å¸¸ã€‚</p>
<p><strong>çº¿ç¨‹æ± å¤§å°è®¾ç½®ï¼š</strong></p>
<ol>
<li>éœ€è¦åˆ†æçº¿ç¨‹æ± æ‰§è¡Œçš„ä»»åŠ¡çš„ç‰¹æ€§ï¼š CPU å¯†é›†å‹è¿˜æ˜¯ IO å¯†é›†å‹</li>
<li>æ¯ä¸ªä»»åŠ¡æ‰§è¡Œçš„å¹³å‡æ—¶é•¿å¤§æ¦‚æ˜¯å¤šå°‘ï¼Œè¿™ä¸ªä»»åŠ¡çš„æ‰§è¡Œæ—¶é•¿å¯èƒ½è¿˜è·Ÿä»»åŠ¡å¤„ç†é€»è¾‘æ˜¯å¦æ¶‰åŠåˆ°ç½‘ç»œä¼ è¾“ä»¥åŠåº•å±‚ç³»ç»Ÿèµ„æºä¾èµ–æœ‰å…³ç³»</li>
</ol>
<p>å¦‚æœæ˜¯ CPU å¯†é›†å‹ï¼Œä¸»è¦æ˜¯æ‰§è¡Œè®¡ç®—ä»»åŠ¡ï¼Œå“åº”æ—¶é—´å¾ˆå¿«ï¼Œcpu ä¸€ç›´åœ¨è¿è¡Œï¼Œè¿™ç§ä»»åŠ¡ cpuçš„åˆ©ç”¨ç‡å¾ˆé«˜ï¼Œé‚£ä¹ˆçº¿ç¨‹æ•°çš„é…ç½®åº”è¯¥æ ¹æ® CPU æ ¸å¿ƒæ•°æ¥å†³å®šï¼ŒCPU æ ¸å¿ƒæ•°=æœ€å¤§åŒæ—¶æ‰§è¡Œçº¿ç¨‹æ•°ï¼ŒåŠ å…¥ CPU æ ¸å¿ƒæ•°ä¸º 4ï¼Œé‚£ä¹ˆæœåŠ¡å™¨æœ€å¤šèƒ½åŒæ—¶æ‰§è¡Œ 4 ä¸ªçº¿ç¨‹ã€‚è¿‡å¤šçš„çº¿ç¨‹ä¼šå¯¼è‡´ä¸Šä¸‹æ–‡åˆ‡æ¢åè€Œä½¿å¾—æ•ˆç‡é™ä½ã€‚é‚£çº¿ç¨‹æ± çš„æœ€å¤§çº¿ç¨‹æ•°å¯ä»¥é…ç½®ä¸º cpu æ ¸å¿ƒæ•°+1 å¦‚æœæ˜¯ IO å¯†é›†å‹ï¼Œä¸»è¦æ˜¯è¿›è¡Œ IO æ“ä½œï¼Œæ‰§è¡Œ IO æ“ä½œçš„æ—¶é—´è¾ƒé•¿ï¼Œè¿™æ˜¯ cpu å‡ºäºç©ºé—²çŠ¶æ€ï¼Œå¯¼è‡´ cpu çš„åˆ©ç”¨ç‡ä¸é«˜ï¼Œè¿™ç§æƒ…å†µä¸‹å¯ä»¥å¢åŠ çº¿ç¨‹æ± çš„å¤§å°ã€‚è¿™ç§æƒ…å†µä¸‹å¯ä»¥ç»“åˆçº¿ç¨‹çš„ç­‰å¾…æ—¶é•¿æ¥åšåˆ¤æ–­ï¼Œç­‰å¾…æ—¶é—´è¶Šé«˜ï¼Œé‚£ä¹ˆçº¿ç¨‹æ•°ä¹Ÿç›¸å¯¹è¶Šå¤šã€‚ä¸€èˆ¬å¯ä»¥é…ç½® cpu æ ¸å¿ƒæ•°çš„ 2 å€ã€‚</p>
<p>ä¸€ä¸ªå…¬å¼ï¼šçº¿ç¨‹æ± è®¾å®šæœ€ä½³çº¿ç¨‹æ•°ç›® = ï¼ˆï¼ˆçº¿ç¨‹æ± è®¾å®šçš„çº¿ç¨‹ç­‰å¾…æ—¶é—´+çº¿ç¨‹ CPU æ—¶é—´ï¼‰/<br/>
çº¿ç¨‹ CPU æ—¶é—´ ï¼‰* CPU æ•°ç›®</p>
<p>è¿™ä¸ªå…¬å¼çš„çº¿ç¨‹ cpu æ—¶é—´æ˜¯é¢„ä¼°çš„ç¨‹åºå•ä¸ªçº¿ç¨‹åœ¨ cpu ä¸Šè¿è¡Œçš„æ—¶é—´ï¼ˆé€šå¸¸ä½¿ç”¨ loadrunneræµ‹è¯•å¤§é‡è¿è¡Œæ¬¡æ•°æ±‚å‡ºå¹³å‡å€¼ï¼‰</p>
<p><strong>æ‹’ç»ç­–ç•¥ï¼š</strong></p>
<ol>
<li>AbortPolicyï¼šç›´æ¥æŠ›å‡ºå¼‚å¸¸ï¼Œé»˜è®¤ç­–ç•¥ï¼›</li>
<li>CallerRunsPolicyï¼šç”¨è°ƒç”¨è€…æ‰€åœ¨çš„çº¿ç¨‹æ¥æ‰§è¡Œä»»åŠ¡ï¼›</li>
<li>DiscardOldestPolicyï¼šä¸¢å¼ƒé˜»å¡é˜Ÿåˆ—ä¸­é æœ€å‰çš„ä»»åŠ¡ï¼Œå¹¶æ‰§è¡Œå½“å‰ä»»åŠ¡ï¼›</li>
<li>DiscardPolicyï¼šç›´æ¥ä¸¢å¼ƒä»»åŠ¡ï¼›å½“ç„¶ä¹Ÿå¯ä»¥æ ¹æ®åº”ç”¨åœºæ™¯å®ç° RejectedExecutionHandler æ¥å£ï¼Œè‡ªå®šä¹‰é¥±å’Œç­–ç•¥ï¼Œå¦‚è®°å½•æ—¥å¿—æˆ–æŒä¹…åŒ–å­˜å‚¨ä¸èƒ½å¤„ç†çš„ä»»åŠ¡</li>
</ol>
<h4 data-id="heading-4"><a href="https://link.juejin.cn/?target=" target="_blank" title="https://link.juejin.cn/?target="/><strong>10ã€å¸¸è§çº¿ç¨‹å®‰å…¨çš„å¹¶å‘å®¹å™¨æœ‰å“ªäº›Â Â Â  éš¾åº¦ç³»æ•°ï¼šâ­</strong></h4>
<ol>
<li>CopyOnWriteArrayListã€CopyOnWriteArraySetã€ConcurrentHashMap</li>
<li>CopyOnWriteArrayListã€CopyOnWriteArraySeté‡‡ç”¨å†™æ—¶å¤åˆ¶å®ç°çº¿ç¨‹å®‰å…¨</li>
<li>ConcurrentHashMapé‡‡ç”¨åˆ†æ®µé”çš„æ–¹å¼å®ç°çº¿ç¨‹å®‰å…¨</li>
</ol>
<h4 data-id="heading-5"><a href="https://link.juejin.cn/?target=" target="_blank" title="https://link.juejin.cn/?target="/><strong>11ã€AtomicåŸå­ç±»äº†è§£å¤šå°‘ åŸç†æ˜¯ä»€ä¹ˆÂ Â Â  éš¾åº¦ç³»æ•°ï¼šâ­</strong></h4>
<p>Java çš„åŸå­ç±»éƒ½å­˜æ”¾åœ¨å¹¶å‘åŒ… java.util.concurrent.atomicä¸‹ï¼Œå¦‚ä¸‹å›¾ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c77627faf93a431eb7e32570e52ce7c7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YeawtOinow==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771396836&amp;x-signature=UDnfr3XC3tPZ18YipDpA7dBNs8k%3D" alt="" loading="lazy"/></p>
<p><strong>åŸºæœ¬ç±»å‹</strong></p>
<ul>
<li>ä½¿ç”¨åŸå­çš„æ–¹å¼æ›´æ–°åŸºæœ¬ç±»å‹</li>
<li>AtomicIntegerï¼šæ•´å‹åŸå­ç±»</li>
<li>AtomicLongï¼šé•¿æ•´å‹åŸå­ç±»</li>
<li>AtomicBooleanï¼šå¸ƒå°”å‹åŸå­ç±»</li>
</ul>
<p><strong>æ•°ç»„ç±»å‹</strong></p>
<ul>
<li>ä½¿ç”¨åŸå­çš„æ–¹å¼æ›´æ–°æ•°ç»„é‡Œçš„æŸä¸ªå…ƒç´ </li>
<li>AtomicIntegerArrayï¼šæ•´å½¢æ•°ç»„åŸå­ç±»</li>
<li>AtomicLongArrayï¼šé•¿æ•´å½¢æ•°ç»„åŸå­ç±»</li>
<li>AtomicReferenceArrayï¼šå¼•ç”¨ç±»å‹æ•°ç»„åŸå­ç±»</li>
</ul>
<p><strong>å¼•ç”¨ç±»å‹</strong></p>
<ul>
<li>AtomicReferenceï¼šå¼•ç”¨ç±»å‹åŸå­ç±»</li>
<li>AtomicStampedReferenceï¼šåŸå­æ›´æ–°å¼•ç”¨ç±»å‹é‡Œçš„å­—æ®µåŸå­ç±»</li>
<li>AtomicMarkableReference ï¼šåŸå­æ›´æ–°å¸¦æœ‰æ ‡è®°ä½çš„å¼•ç”¨ç±»å‹</li>
<li>AtomicIntegerFieldUpdaterï¼šåŸå­æ›´æ–°æ•´å½¢å­—æ®µçš„æ›´æ–°å™¨</li>
<li>AtomicLongFieldUpdaterï¼šåŸå­æ›´æ–°é•¿æ•´å½¢å­—æ®µçš„æ›´æ–°å™¨</li>
<li>AtomicStampedReferenceï¼šåŸå­æ›´æ–°å¸¦æœ‰ç‰ˆæœ¬å·çš„å¼•ç”¨ç±»å‹ã€‚è¯¥ç±»å°†æ•´æ•°å€¼ä¸å¼•ç”¨å…³è”èµ·æ¥ï¼Œå¯ç”¨äºè§£å†³åŸå­çš„æ›´æ–°æ•°æ®å’Œæ•°æ®çš„ç‰ˆæœ¬å·ï¼Œä»¥åŠè§£å†³ä½¿ç”¨ CAS è¿›è¡ŒåŸå­æ›´æ–°æ—¶å¯èƒ½å‡ºç°çš„ ABA é—®é¢˜</li>
</ul>
<ol>
<li>AtomicInteger ç±»åˆ©ç”¨ CAS (Compare and Swap) + volatile + native æ–¹æ³•æ¥ä¿è¯åŸå­æ“ä½œï¼Œä»è€Œé¿å… synchronized çš„é«˜å¼€é”€ï¼Œæ‰§è¡Œæ•ˆç‡å¤§ä¸ºæå‡ã€‚</li>
<li>CAS çš„åŸç†ï¼Œæ˜¯æ‹¿æœŸæœ›å€¼å’ŒåŸæœ¬çš„å€¼ä½œæ¯”è¾ƒï¼Œå¦‚æœç›¸åŒï¼Œåˆ™æ›´æ–°æˆæ–°çš„å€¼ã€‚UnSafe ç±»çš„ objectFieldOffset() æ–¹æ³•æ˜¯ä¸ªæœ¬åœ°æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•æ˜¯ç”¨æ¥æ‹¿â€œåŸå€¼â€çš„å†…å­˜åœ°å€ï¼Œè¿”å›å€¼æ˜¯ valueOffsetï¼›å¦å¤–ï¼Œvalue æ˜¯ä¸€ä¸ª volatile å˜é‡ï¼Œå› æ­¤ JVM æ€»æ˜¯å¯ä»¥ä¿è¯ä»»æ„æ—¶åˆ»çš„ä»»ä½•çº¿ç¨‹æ€»èƒ½æ‹¿åˆ°è¯¥å˜é‡çš„æœ€æ–°å€¼ã€‚</li>
</ol>
<h4 data-id="heading-6"><a href="https://link.juejin.cn/?target=" target="_blank" title="https://link.juejin.cn/?target="/><strong>12ã€synchronizedåº•å±‚å®ç°æ˜¯ä»€ä¹ˆ lockåº•å±‚æ˜¯ä»€ä¹ˆ æœ‰ä»€ä¹ˆåŒºåˆ«Â Â Â  éš¾åº¦ç³»æ•°ï¼šâ­â­â­</strong></h4>
<p><strong>SynchronizedåŸç†ï¼š</strong></p>
<p>æ–¹æ³•çº§çš„åŒæ­¥æ˜¯éšå¼ï¼Œå³æ— éœ€é€šè¿‡å­—èŠ‚ç æŒ‡ä»¤æ¥æ§åˆ¶çš„ï¼Œå®ƒå®ç°åœ¨æ–¹æ³•è°ƒç”¨å’Œè¿”å›æ“ä½œä¹‹ä¸­ã€‚JVMå¯ä»¥ä»æ–¹æ³•å¸¸é‡æ± ä¸­çš„æ–¹æ³•è¡¨ç»“æ„(method_info Structure) ä¸­çš„ ACC_SYNCHRONIZED è®¿é—®æ ‡å¿—åŒºåˆ†ä¸€ä¸ªæ–¹æ³•æ˜¯å¦åŒæ­¥æ–¹æ³•ã€‚å½“æ–¹æ³•è°ƒç”¨æ—¶ï¼Œè°ƒç”¨æŒ‡ä»¤å°†ä¼š æ£€æŸ¥æ–¹æ³•çš„ ACC_SYNCHRONIZED è®¿é—®æ ‡å¿—æ˜¯å¦è¢«è®¾ç½®ï¼Œå¦‚æœè®¾ç½®äº†ï¼Œæ‰§è¡Œçº¿ç¨‹å°†å…ˆæŒæœ‰monitorï¼ˆè™šæ‹Ÿæœºè§„èŒƒä¸­ç”¨çš„æ˜¯ç®¡ç¨‹ä¸€è¯ï¼‰ï¼Œç„¶åå†æ‰§è¡Œæ–¹æ³•ï¼Œæœ€åå†æ–¹æ³•å®Œæˆ(æ— è®ºæ˜¯æ­£å¸¸å®Œæˆè¿˜æ˜¯éæ­£å¸¸å®Œæˆ)æ—¶é‡Šæ”¾monitorã€‚</p>
<p>ä»£ç å—çš„åŒæ­¥æ˜¯åˆ©ç”¨monitorenterå’Œmonitorexitè¿™ä¸¤ä¸ªå­—èŠ‚ç æŒ‡ä»¤ã€‚å®ƒä»¬åˆ†åˆ«ä½äºåŒæ­¥ä»£ç å—çš„å¼€å§‹å’Œç»“æŸä½ç½®ã€‚å½“jvmæ‰§è¡Œåˆ°monitorenteræŒ‡ä»¤æ—¶ï¼Œå½“å‰çº¿ç¨‹è¯•å›¾è·å–monitorå¯¹è±¡çš„æ‰€æœ‰æƒï¼Œå¦‚æœæœªåŠ é”æˆ–è€…å·²ç»è¢«å½“å‰çº¿ç¨‹æ‰€æŒæœ‰ï¼Œå°±æŠŠé”çš„è®¡æ•°å™¨+1ï¼›å½“æ‰§è¡ŒmonitorexitæŒ‡ä»¤æ—¶ï¼Œé”è®¡æ•°å™¨-1ï¼›å½“é”è®¡æ•°å™¨ä¸º0æ—¶ï¼Œè¯¥é”å°±è¢«é‡Šæ”¾äº†ã€‚å¦‚æœè·å–monitorå¯¹è±¡å¤±è´¥ï¼Œè¯¥çº¿ç¨‹åˆ™ä¼šè¿›å…¥é˜»å¡çŠ¶æ€ï¼Œç›´åˆ°å…¶ä»–çº¿ç¨‹é‡Šæ”¾é”ã€‚</p>
<p><strong>LockåŸç†ï¼š</strong></p>
<ol>
<li>Lockçš„å­˜å‚¨ç»“æ„ï¼šä¸€ä¸ªintç±»å‹çŠ¶æ€å€¼ï¼ˆç”¨äºé”çš„çŠ¶æ€å˜æ›´ï¼‰ï¼Œä¸€ä¸ªåŒå‘é“¾è¡¨ï¼ˆç”¨äºå­˜å‚¨ç­‰å¾…ä¸­çš„çº¿ç¨‹ï¼‰</li>
<li>Lockè·å–é”çš„è¿‡ç¨‹ï¼šæœ¬è´¨ä¸Šæ˜¯é€šè¿‡CASæ¥è·å–çŠ¶æ€å€¼ä¿®æ”¹ï¼Œå¦‚æœå½“åœºæ²¡è·å–åˆ°ï¼Œä¼šå°†è¯¥çº¿ç¨‹æ”¾åœ¨çº¿ç¨‹ç­‰å¾…é“¾è¡¨ä¸­ã€‚</li>
<li>Locké‡Šæ”¾é”çš„è¿‡ç¨‹ï¼šä¿®æ”¹çŠ¶æ€å€¼ï¼Œè°ƒæ•´ç­‰å¾…é“¾è¡¨ã€‚</li>
<li>Lockå¤§é‡ä½¿ç”¨CAS+è‡ªæ—‹ã€‚å› æ­¤æ ¹æ®CASç‰¹æ€§ï¼Œlockå»ºè®®ä½¿ç”¨åœ¨ä½é”å†²çªçš„æƒ…å†µä¸‹ã€‚</li>
</ol>
<blockquote>
<blockquote>
<p><strong>ç¯‡å¹…é™åˆ¶ä¸‹é¢å°±åªèƒ½ç»™å¤§å®¶å±•ç¤ºå°å†Œéƒ¨åˆ†å†…å®¹äº†ã€‚æ•´ç†äº†ä¸€ä»½æ ¸å¿ƒé¢è¯•ç¬”è®°åŒ…æ‹¬äº†ï¼šJavaé¢è¯•ã€Springã€JVMã€MyBatisã€Redisã€MySQLã€å¹¶å‘ç¼–ç¨‹ã€å¾®æœåŠ¡ã€Linuxã€Springbootã€SpringCloudã€MQã€Kafka é¢è¯•ä¸“é¢˜</strong></p>
<blockquote>
</blockquote>
<p><strong>éœ€è¦å…¨å¥—é¢è¯•ç¬”è®°åŠç­”æ¡ˆã€æ‰«ä¸€æ‰«ã€‘</strong> Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â å³å¯å…è´¹è·å–**</p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/23b61036f41c4fda9246292304671768~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YeawtOinow==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771396836&amp;x-signature=s3TdBL41MXP%2FgGIA2%2FWTdXpRUDI%3D" alt="8fbf1ef8b61e2dbbb33b7690a41d12e.png" loading="lazy"/></p>
</blockquote>
<p><strong>Lockä¸synchronizedçš„åŒºåˆ«ï¼š</strong></p>
<ol>
<li>Lockçš„åŠ é”å’Œè§£é”éƒ½æ˜¯ç”±javaä»£ç é…åˆnativeæ–¹æ³•ï¼ˆè°ƒç”¨æ“ä½œç³»ç»Ÿçš„ç›¸å…³æ–¹æ³•ï¼‰å®ç°çš„ï¼Œè€Œsynchronizeçš„åŠ é”å’Œè§£é”çš„è¿‡ç¨‹æ˜¯ç”±JVMç®¡ç†çš„</li>
<li>å½“ä¸€ä¸ªçº¿ç¨‹ä½¿ç”¨synchronizeè·å–é”æ—¶ï¼Œè‹¥é”è¢«å…¶ä»–çº¿ç¨‹å ç”¨ç€ï¼Œé‚£ä¹ˆå½“å‰åªèƒ½è¢«é˜»å¡ï¼Œç›´åˆ°æˆåŠŸè·å–é”ã€‚è€ŒLockåˆ™æä¾›è¶…æ—¶é”å’Œå¯ä¸­æ–­ç­‰æ›´åŠ çµæ´»çš„æ–¹å¼ï¼Œåœ¨æœªèƒ½è·å–é”çš„Â Â Â Â  æ¡ä»¶ä¸‹æä¾›ä¸€ç§é€€å‡ºçš„æœºåˆ¶ã€‚</li>
<li>ä¸€ä¸ªé”å†…éƒ¨å¯ä»¥æœ‰å¤šä¸ªConditionå®ä¾‹ï¼Œå³æœ‰å¤šè·¯æ¡ä»¶é˜Ÿåˆ—ï¼Œè€Œsynchronizeåªæœ‰ä¸€è·¯æ¡ä»¶é˜Ÿåˆ—ï¼›åŒæ ·Conditionä¹Ÿæä¾›çµæ´»çš„é˜»å¡æ–¹å¼ï¼Œåœ¨æœªè·å¾—é€šçŸ¥ä¹‹å‰å¯ä»¥é€šè¿‡ä¸­æ–­çº¿ç¨‹ä»¥Â Â Â  åŠè®¾ç½®ç­‰å¾…æ—¶é™ç­‰æ–¹å¼é€€å‡ºæ¡ä»¶é˜Ÿåˆ—ã€‚</li>
<li>synchronizeå¯¹çº¿ç¨‹çš„åŒæ­¥ä»…æä¾›ç‹¬å æ¨¡å¼ï¼Œè€ŒLockå³å¯ä»¥æä¾›ç‹¬å æ¨¡å¼ï¼Œä¹Ÿå¯ä»¥æä¾›å…±äº«æ¨¡å¼</li>
</ol>

































<table><thead><tr><th>synchronized Â </th><th>Lock Â </th></tr></thead><tbody><tr><td>å…³é”®å­— Â </td><td>ç±» Â </td></tr><tr><td>è‡ªåŠ¨åŠ é”å’Œé‡Šæ”¾é” Â </td><td>éœ€è¦æ‰‹åŠ¨è°ƒç”¨unlockæ–¹æ³•é‡Šæ”¾é” Â </td></tr><tr><td>jvmå±‚é¢çš„é” Â </td><td>APIå±‚é¢çš„é” Â </td></tr><tr><td>éå…¬å¹³é” Â </td><td>å¯ä»¥é€‰æ‹©å…¬å¹³æˆ–è€…éå…¬å¹³é” Â </td></tr><tr><td>é”æ˜¯ä¸€ä¸ªå¯¹è±¡,å¹¶ä¸”é”çš„ä¿¡æ¯ä¿å­˜åœ¨äº†å¯¹è±¡ä¸­ Â </td><td>ä»£ç ä¸­é€šè¿‡intç±»å‹çš„stateæ ‡è¯† Â </td></tr><tr><td>æœ‰ä¸€ä¸ªé”å‡çº§çš„è¿‡ç¨‹ Â </td><td>æ—  Â </td></tr></tbody></table>
<h4 data-id="heading-7"><a href="https://link.juejin.cn/?target=" target="_blank" title="https://link.juejin.cn/?target="/><strong>13ã€äº†è§£ConcurrentHashMapå— ä¸ºä»€ä¹ˆæ€§èƒ½æ¯”HashTableé«˜ï¼Œè¯´ä¸‹åŸç†Â Â Â  éš¾åº¦ç³»æ•°ï¼šâ­â­</strong></h4>
<p>ConcurrentHashMapæ˜¯çº¿ç¨‹å®‰å…¨çš„Mapå®¹å™¨ï¼ŒJDK8ä¹‹å‰ï¼ŒConcurrentHashMapä½¿ç”¨é”åˆ†æ®µæŠ€æœ¯ï¼Œå°†æ•°æ®åˆ†æˆä¸€æ®µæ®µå­˜å‚¨ï¼Œæ¯ä¸ªæ•°æ®æ®µé…ç½®ä¸€æŠŠé”ï¼Œå³segmentç±»ï¼Œè¿™ä¸ªç±»ç»§æ‰¿ReentrantLockæ¥ä¿è¯çº¿ç¨‹å®‰å…¨ï¼ŒJKD8çš„ç‰ˆæœ¬å–æ¶ˆSegmentè¿™ä¸ªåˆ†æ®µé”æ•°æ®ç»“æ„ï¼Œåº•å±‚ä¹Ÿæ˜¯ä½¿ç”¨Nodeæ•°ç»„+é“¾è¡¨+çº¢é»‘æ ‘ï¼Œä»è€Œå®ç°å¯¹æ¯ä¸€æ®µæ•°æ®å°±è¡ŒåŠ é”ï¼Œä¹Ÿå‡å°‘äº†å¹¶å‘å†²çªçš„æ¦‚ç‡ã€‚</p>
<p>hashtableç±»åŸºæœ¬ä¸Šæ‰€æœ‰çš„æ–¹æ³•éƒ½æ˜¯é‡‡ç”¨synchronizedè¿›è¡Œçº¿ç¨‹å®‰å…¨æ§åˆ¶ï¼Œé«˜å¹¶å‘æƒ…å†µä¸‹æ•ˆç‡å°±é™ä½ ï¼ŒConcurrentHashMapæ˜¯é‡‡ç”¨äº†åˆ†æ®µé”çš„æ€æƒ³æé«˜æ€§èƒ½ï¼Œé”ç²’åº¦æ›´ç»†åŒ–</p>
<h4 data-id="heading-8"><a href="https://link.juejin.cn/?target=" target="_blank" title="https://link.juejin.cn/?target="/><strong>14ã€ConcurrentHashMapåº•å±‚åŸç†Â Â Â  éš¾åº¦ç³»æ•°ï¼šâ­â­â­</strong></h4>
<ol>
<li>
<p>Java7 ä¸­ ConcurrentHashMap ä½¿ç”¨çš„åˆ†æ®µé”ï¼Œä¹Ÿå°±æ˜¯æ¯ä¸€ä¸ª Segment ä¸ŠåŒæ—¶åªæœ‰ä¸€ä¸ªçº¿ç¨‹å¯ä»¥æ“ä½œï¼Œæ¯ä¸€ä¸ª Segment éƒ½æ˜¯ä¸€ä¸ªç±»ä¼¼ HashMap æ•°ç»„çš„ç»“æ„ï¼Œå®ƒå¯ä»¥æ‰©å®¹ï¼Œå®ƒçš„å†²çªä¼šè½¬åŒ–ä¸ºé“¾è¡¨ã€‚ä½†æ˜¯ Segment çš„ä¸ªæ•°ä¸€ä½†åˆå§‹åŒ–å°±ä¸èƒ½æ”¹å˜ã€‚</p>
<p>Â </p>
</li>
</ol>

<pre><code class="hljs language-ini" lang="ini">public V put(K key, V value) {
Â Â Â  Segment&lt;K,V&gt; s<span class="hljs-comment">;</span>
Â Â Â  if (<span class="hljs-attr">value</span> == null)
Â Â Â Â Â Â Â  throw new NullPointerException()<span class="hljs-comment">;</span>
Â Â Â  int <span class="hljs-attr">hash</span> = hash(key)<span class="hljs-comment">;</span>
Â Â Â  // hash å€¼æ— ç¬¦å·å³ç§» 28ä½ï¼ˆåˆå§‹åŒ–æ—¶è·å¾—ï¼‰ï¼Œç„¶åä¸ <span class="hljs-attr">segmentMask</span>=<span class="hljs-number">15</span> åšä¸è¿ç®—
Â Â Â  // å…¶å®ä¹Ÿå°±æ˜¯æŠŠé«˜4ä½ä¸segmentMaskï¼ˆ1111ï¼‰åšä¸è¿ç®—
 
Â  // <span class="hljs-attr">this.segmentMask</span> = ssize - <span class="hljs-number">1</span><span class="hljs-comment">;</span>
Â Â  //å¯¹hashå€¼è¿›è¡Œå³ç§»segmentShiftä½ï¼Œè®¡ç®—å…ƒç´ å¯¹åº”segmentä¸­æ•°ç»„ä¸‹è¡¨çš„ä½ç½®
Â Â  //æŠŠhashå³ç§»segmentShiftï¼Œç›¸å½“äºåªè¦hashå€¼çš„é«˜32-segmentShiftä½ï¼Œå³ç§»çš„ç›®çš„æ˜¯ä¿ç•™äº†hashå€¼çš„é«˜ä½ã€‚ç„¶åå’ŒsegmentMaskä¸æ“ä½œè®¡ç®—å…ƒç´ åœ¨segmentæ•°ç»„ä¸­çš„ä¸‹è¡¨
Â Â Â  int <span class="hljs-attr">j</span> = (hash &gt;&gt;&gt; segmentShift) &amp; segmentMask<span class="hljs-comment">;</span>
Â Â  //ä½¿ç”¨unsafeå¯¹è±¡è·å–æ•°ç»„ä¸­ç¬¬jä¸ªä½ç½®çš„å€¼ï¼Œåé¢åŠ ä¸Šçš„æ˜¯åç§»é‡
Â Â Â  if ((<span class="hljs-attr">s</span> = (Segment&lt;K,V&gt;)UNSAFE.getObjectÂ Â Â Â Â Â Â Â Â  // nonvolatile<span class="hljs-comment">; recheck</span>
Â Â Â Â Â Â Â Â  (segments, (j &lt;&lt; SSHIFT) + SBASE)) == null) //Â  in ensureSegment
Â Â Â Â Â Â Â  // å¦‚æœæŸ¥æ‰¾åˆ°çš„ Segment ä¸ºç©ºï¼Œåˆå§‹åŒ–
Â Â Â Â Â Â Â  <span class="hljs-attr">s</span> = ensureSegment(j)<span class="hljs-comment">;</span>
Â Â  //æ’å…¥segmentå¯¹è±¡
Â Â Â  return s.put(key, hash, value, false)<span class="hljs-comment">;</span>
}
 
/**
Â * Returns the segment for the given index, creating it and
Â * recording in segment table (via CAS) if not already present.
Â *
Â * @param k the index
Â * @return the segment
Â */
@SuppressWarnings("unchecked")
private Segment&lt;K,V&gt; ensureSegment(int k) {
Â Â Â  final Segment&lt;K,V&gt;<span class="hljs-section">[]</span> <span class="hljs-attr">ss</span> = this.segments<span class="hljs-comment">;</span>
Â Â Â  long <span class="hljs-attr">u</span> = (k &lt;&lt; SSHIFT) + SBASE<span class="hljs-comment">; // raw offset</span>
Â Â Â  Segment&lt;K,V&gt; seg<span class="hljs-comment">;</span>
Â Â Â  // åˆ¤æ–­ u ä½ç½®çš„ Segment æ˜¯å¦ä¸ºnull
Â Â Â  if ((<span class="hljs-attr">seg</span> = (Segment&lt;K,V&gt;)UNSAFE.getObjectVolatile(ss, u)) == null) {
Â Â Â Â Â Â Â  Segment&lt;K,V&gt; <span class="hljs-attr">proto</span> = ss[<span class="hljs-number">0</span>]<span class="hljs-comment">; // use segment 0 as prototype</span>
Â Â Â Â Â Â Â  // è·å–0å· segment é‡Œçš„ HashEntry&lt;K,V&gt; åˆå§‹åŒ–é•¿åº¦
Â Â Â Â Â Â Â  int <span class="hljs-attr">cap</span> = proto.table.length<span class="hljs-comment">;</span>
Â Â Â Â Â Â Â  // è·å–0å· segment é‡Œçš„ hash è¡¨é‡Œçš„æ‰©å®¹è´Ÿè½½å› å­ï¼Œæ‰€æœ‰çš„ segment çš„ loadFactor æ˜¯ç›¸åŒçš„
Â Â Â Â Â Â Â  float <span class="hljs-attr">lf</span> = proto.loadFactor<span class="hljs-comment">;</span>
Â Â Â Â Â Â Â  // è®¡ç®—æ‰©å®¹é˜€å€¼
Â Â Â Â Â Â Â  int <span class="hljs-attr">threshold</span> = (int)(cap * lf)<span class="hljs-comment">;</span>
Â Â Â Â Â Â Â  // åˆ›å»ºä¸€ä¸ª cap å®¹é‡çš„ HashEntry æ•°ç»„
Â Â Â Â Â Â Â  HashEntry&lt;K,V&gt;<span class="hljs-section">[]</span> <span class="hljs-attr">tab</span> = (HashEntry&lt;K,V&gt;[])new HashEntry[cap]<span class="hljs-comment">;</span>
Â Â Â Â Â Â Â  if ((<span class="hljs-attr">seg</span> = (Segment&lt;K,V&gt;)UNSAFE.getObjectVolatile(ss, u)) == null) { // recheck
Â Â Â Â Â Â Â Â Â Â Â  // å†æ¬¡æ£€æŸ¥ u ä½ç½®çš„ Segment æ˜¯å¦ä¸ºnullï¼Œå› ä¸ºè¿™æ—¶å¯èƒ½æœ‰å…¶ä»–çº¿ç¨‹è¿›è¡Œäº†æ“ä½œ
Â Â Â Â Â Â Â Â Â Â Â  Segment&lt;K,V&gt; <span class="hljs-attr">s</span> = new Segment&lt;K,V&gt;(lf, threshold, tab)<span class="hljs-comment">;</span>
Â Â Â Â Â Â Â Â Â Â Â  // è‡ªæ—‹æ£€æŸ¥ u ä½ç½®çš„ Segment æ˜¯å¦ä¸ºnull
Â Â Â Â Â Â Â Â Â Â Â  while ((<span class="hljs-attr">seg</span> = (Segment&lt;K,V&gt;)UNSAFE.getObjectVolatile(ss, u))
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  == null) {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  // ä½¿ç”¨CAS èµ‹å€¼ï¼Œåªä¼šæˆåŠŸä¸€æ¬¡
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  if (UNSAFE.compareAndSwapObject(ss, u, null, <span class="hljs-attr">seg</span> = s))
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  break<span class="hljs-comment">;</span>
Â Â Â Â Â Â Â Â Â Â Â  }
Â Â Â Â Â Â Â  }
Â Â Â  }
Â Â Â  return seg<span class="hljs-comment">;</span>
}
 
final V put(K key, int hash, V value, boolean onlyIfAbsent) {
Â Â Â  // è·å– ReentrantLock ç‹¬å é”ï¼Œè·å–ä¸åˆ°ï¼ŒscanAndLockForPut è·å–ã€‚
Â Â Â  HashEntry&lt;K,V&gt; <span class="hljs-attr">node</span> = tryLock() ? null : scanAndLockForPut(key, hash, value)<span class="hljs-comment">;</span>
Â Â Â  V oldValue<span class="hljs-comment">;</span>
Â Â Â  try {
Â Â Â Â Â Â Â  HashEntry&lt;K,V&gt;<span class="hljs-section">[]</span> <span class="hljs-attr">tab</span> = table<span class="hljs-comment">;</span>
Â Â Â Â Â  Â Â // è®¡ç®—è¦putçš„æ•°æ®ä½ç½®
Â Â Â Â Â Â Â  int <span class="hljs-attr">index</span> = (tab.length - <span class="hljs-number">1</span>) &amp; hash<span class="hljs-comment">;</span>
Â Â Â Â Â Â Â  // CAS è·å– index åæ ‡çš„å€¼
Â Â Â Â Â Â Â  HashEntry&lt;K,V&gt; <span class="hljs-attr">first</span> = entryAt(tab, index)<span class="hljs-comment">;</span>
Â Â Â Â Â Â Â  for (HashEntry&lt;K,V&gt; <span class="hljs-attr">e</span> = first<span class="hljs-comment">;;) {</span>
Â Â Â Â Â Â Â Â Â Â Â  if (e != null) {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  // æ£€æŸ¥æ˜¯å¦ key å·²ç»å­˜åœ¨ï¼Œå¦‚æœå­˜åœ¨ï¼Œåˆ™éå†é“¾è¡¨å¯»æ‰¾ä½ç½®ï¼Œæ‰¾åˆ°åæ›¿æ¢ value
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  K k<span class="hljs-comment">;</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  if ((<span class="hljs-attr">k</span> = e.key) == key ||
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  (<span class="hljs-attr">e.hash</span> == hash &amp;&amp; key.equals(k))) {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  <span class="hljs-attr">oldValue</span> = e.value<span class="hljs-comment">;</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  if (!onlyIfAbsent) {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  <span class="hljs-attr">e.value</span> = value<span class="hljs-comment">;</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  ++modCount<span class="hljs-comment">;</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  }
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  break<span class="hljs-comment">;</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  }
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  <span class="hljs-attr">e</span> = e.next<span class="hljs-comment">;</span>
Â Â Â Â Â Â Â Â Â Â Â  }
Â Â Â Â Â Â Â Â Â Â Â  else {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  // first æœ‰å€¼æ²¡è¯´æ˜ index ä½ç½®å·²ç»æœ‰å€¼äº†ï¼Œæœ‰å†²çªï¼Œé“¾è¡¨å¤´æ’æ³•ã€‚
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  if (node != null)
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  node.setNext(first)<span class="hljs-comment">;</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  else
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  <span class="hljs-attr">node</span> = new HashEntry&lt;K,V&gt;(hash, key, value, first)<span class="hljs-comment">;</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  int <span class="hljs-attr">c</span> = count + <span class="hljs-number">1</span><span class="hljs-comment">;</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  // å®¹é‡å¤§äºæ‰©å®¹é˜€å€¼ï¼Œå°äºæœ€å¤§å®¹é‡ï¼Œè¿›è¡Œæ‰©å®¹
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  if (c &gt; threshold &amp;&amp; tab.length &lt; MAXIMUM_CAPACITY)
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  rehash(node)<span class="hljs-comment">;</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  else
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  // index ä½ç½®èµ‹å€¼ nodeï¼Œnode å¯èƒ½æ˜¯ä¸€ä¸ªå…ƒç´ ï¼Œä¹Ÿå¯èƒ½æ˜¯ä¸€ä¸ªé“¾è¡¨çš„è¡¨å¤´
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  setEntryAt(tab, index, node)<span class="hljs-comment">;</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  ++modCount<span class="hljs-comment">;</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  <span class="hljs-attr">count</span> = c<span class="hljs-comment">;</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  <span class="hljs-attr">oldValue</span> = null<span class="hljs-comment">;</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  break<span class="hljs-comment">;</span>
Â Â Â Â Â Â Â Â Â Â Â  }
Â Â Â Â Â Â Â  }
Â Â Â  } finally {
Â Â Â Â Â Â Â  unlock()<span class="hljs-comment">;</span>
Â Â Â  }
Â Â Â  return oldValue<span class="hljs-comment">;</span>
}
è¿è¡Œé¡¹ç›®å¹¶ä¸‹è½½æºç 
</code></pre>
<p>Java</p>
<ol>
<li>Java8 ä¸­çš„ ConcurrentHashMap ä½¿ç”¨çš„ Synchronized é”åŠ  CAS çš„æœºåˆ¶ã€‚ç»“æ„Node æ•°ç»„ + é“¾è¡¨ / çº¢é»‘æ ‘ï¼ŒNode æ˜¯ç±»ä¼¼äºä¸€ä¸ª HashEntry çš„ç»“æ„ã€‚å®ƒçš„å†²çªå†è¾¾åˆ°ä¸€å®šå¤§å°æ—¶ä¼šè½¬åŒ–æˆçº¢é»‘æ ‘ï¼Œåœ¨å†²çªå°äºä¸€å®šæ•°é‡æ—¶åˆé€€å›é“¾è¡¨ã€‚</li>
</ol>

<pre><code class="hljs language-ini" lang="ini">public V put(K key, V value) {
Â Â Â  return putVal(key, value, false)<span class="hljs-comment">;</span>
}
 
/** Implementation for put and putIfAbsent */
final V putVal(K key, V value, boolean onlyIfAbsent) {
Â Â Â  // key å’Œ value ä¸èƒ½ä¸ºç©º
Â Â Â  if (<span class="hljs-attr">key</span> == null || value == null) throw new NullPointerException()<span class="hljs-comment">;</span>
Â Â Â  int <span class="hljs-attr">hash</span> = spread(key.hashCode())<span class="hljs-comment">;</span>
Â Â Â  int <span class="hljs-attr">binCount</span> = <span class="hljs-number">0</span><span class="hljs-comment">;</span>
Â Â Â  for (Node&lt;K,V&gt;<span class="hljs-section">[]</span> <span class="hljs-attr">tab</span> = table<span class="hljs-comment">;;) {</span>
Â Â Â Â Â Â Â  // <span class="hljs-attr">f</span> = ç›®æ ‡ä½ç½®å…ƒç´ 
Â Â Â Â Â Â Â  Node&lt;K,V&gt; f<span class="hljs-comment">; int n, i, fh;// fh åé¢å­˜æ”¾ç›®æ ‡ä½ç½®çš„å…ƒç´  hash å€¼</span>
Â Â Â Â Â Â Â  if (<span class="hljs-attr">tab</span> == null || (n = tab.length) == <span class="hljs-number">0</span>)
Â Â Â Â Â Â Â Â Â Â Â  // æ•°ç»„æ¡¶ä¸ºç©ºï¼Œåˆå§‹åŒ–æ•°ç»„æ¡¶ï¼ˆè‡ªæ—‹+CAS)
Â Â Â Â Â Â Â Â Â Â Â  <span class="hljs-attr">tab</span> = initTable()<span class="hljs-comment">;</span>
Â Â Â Â Â Â Â  else if ((<span class="hljs-attr">f</span> = tabAt(tab, i = (n - <span class="hljs-number">1</span>) &amp; hash)) == null) {
Â Â Â Â Â Â Â Â Â Â Â  // æ¡¶å†…ä¸ºç©ºï¼ŒCAS æ”¾å…¥ï¼Œä¸åŠ é”ï¼ŒæˆåŠŸäº†å°±ç›´æ¥ break è·³å‡º
Â Â Â Â Â Â Â Â Â Â Â  if (casTabAt(tab, i, null,new Node&lt;K,V&gt;(hash, key, value, null)))
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  break<span class="hljs-comment">;Â  // no lock when adding to empty bin</span>
Â Â Â Â Â Â Â  }
Â Â Â Â Â Â Â  else if ((<span class="hljs-attr">fh</span> = f.hash) == MOVED)
Â Â Â Â Â Â Â Â Â Â Â  <span class="hljs-attr">tab</span> = helpTransfer(tab, f)<span class="hljs-comment">;</span>
Â Â Â Â Â Â Â  else {
Â Â Â Â Â Â Â Â Â Â Â  V <span class="hljs-attr">oldVal</span> = null<span class="hljs-comment">;</span>
Â Â Â Â Â Â Â Â Â Â Â  // ä½¿ç”¨ synchronized åŠ é”åŠ å…¥èŠ‚ç‚¹
Â Â Â Â Â Â Â Â Â Â Â  synchronized (f) {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  if (tabAt(tab, i) == f) {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  // è¯´æ˜æ˜¯é“¾è¡¨
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  if (fh &gt;= 0) {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  <span class="hljs-attr">binCount</span> = <span class="hljs-number">1</span><span class="hljs-comment">;</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  // å¾ªç¯åŠ å…¥æ–°çš„æˆ–è€…è¦†ç›–èŠ‚ç‚¹
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  for (Node&lt;K,V&gt; <span class="hljs-attr">e</span> = f<span class="hljs-comment">;; ++binCount) {</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  K ek<span class="hljs-comment">;</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  if (<span class="hljs-attr">e.hash</span> == hash &amp;&amp;
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  ((<span class="hljs-attr">ek</span> = e.key) == key ||
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  (ek != null &amp;&amp; key.equals(ek)))) {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  <span class="hljs-attr">oldVal</span> = e.val<span class="hljs-comment">;</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  if (!onlyIfAbsent)
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  Â Â Â <span class="hljs-attr">e.val</span> = value<span class="hljs-comment">;</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  break<span class="hljs-comment">;</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  }
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  Node&lt;K,V&gt; <span class="hljs-attr">pred</span> = e<span class="hljs-comment">;</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  if ((<span class="hljs-attr">e</span> = e.next) == null) {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  <span class="hljs-attr">pred.next</span> = new Node&lt;K,V&gt;(hash, key,
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  value, null)<span class="hljs-comment">;</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  break<span class="hljs-comment">;</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  }
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  }
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  }
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  else if (f instanceof TreeBin) {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  // çº¢é»‘æ ‘
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  Node&lt;K,V&gt; p<span class="hljs-comment">;</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  <span class="hljs-attr">binCount</span> = <span class="hljs-number">2</span><span class="hljs-comment">;</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  if ((<span class="hljs-attr">p</span> = ((TreeBin&lt;K,V&gt;)f).putTreeVal(hash, key,
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  value)) != null) {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  <span class="hljs-attr">oldVal</span> = p.val<span class="hljs-comment">;</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  if (!onlyIfAbsent)
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  <span class="hljs-attr">p.val</span> = value<span class="hljs-comment">;</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  }
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  Â Â }
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  }
Â Â Â Â Â Â Â Â Â Â Â  }
Â Â Â Â Â Â Â Â Â Â Â  if (binCount != 0) {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  if (binCount &gt;= TREEIFY_THRESHOLD)
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  treeifyBin(tab, i)<span class="hljs-comment">;</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  if (oldVal != null)
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  return oldVal<span class="hljs-comment">;</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  break<span class="hljs-comment">;</span>
Â Â Â Â Â Â Â Â Â Â Â  }
Â Â Â Â Â Â Â  }
Â Â Â  }
Â Â Â  addCount(1L, binCount)<span class="hljs-comment">;</span>
Â Â Â  return null<span class="hljs-comment">;</span>
}
è¿è¡Œé¡¹ç›®å¹¶ä¸‹è½½æºç 
</code></pre>
<p>Java</p>
<h4 data-id="heading-9"><a href="https://link.juejin.cn/?target=" target="_blank" title="https://link.juejin.cn/?target="/><strong>15ã€äº†è§£volatileå…³é”®å­—ä¸Â Â Â  éš¾åº¦ç³»æ•°ï¼šâ­</strong></h4>
<ol>
<li>volatileæ˜¯Javaæä¾›çš„æœ€è½»é‡çº§çš„åŒæ­¥æœºåˆ¶ï¼Œä¿è¯äº†å…±äº«å˜é‡çš„å¯è§æ€§ï¼Œè¢«volatileå…³é”®å­—ä¿®é¥°çš„å˜é‡ï¼Œå¦‚æœå€¼å‘ç”Ÿäº†å˜åŒ–ï¼Œå…¶ä»–çº¿ç¨‹ç«‹åˆ»å¯è§ï¼Œé¿å…å‡ºç°è„è¯»ç°è±¡ã€‚</li>
<li>volatileç¦æ­¢äº†æŒ‡ä»¤é‡æ’ï¼Œå¯ä»¥ä¿è¯ç¨‹åºæ‰§è¡Œçš„æœ‰åºæ€§ï¼Œä½†æ˜¯ç”±äºç¦æ­¢äº†æŒ‡ä»¤é‡æ’ï¼Œæ‰€ä»¥JVMç›¸å…³çš„ä¼˜åŒ–æ²¡äº†ï¼Œæ•ˆç‡ä¼šåå¼±</li>
</ol>
<h4 data-id="heading-10"><a href="https://link.juejin.cn/?target=" target="_blank" title="https://link.juejin.cn/?target="/><strong>16ã€synchronizedå’Œvolatileæœ‰ä»€ä¹ˆåŒºåˆ«Â Â Â  éš¾åº¦ç³»æ•°ï¼šâ­â­</strong></h4>
<ol>
<li>volatileæœ¬è´¨æ˜¯å‘Šè¯‰JVMå½“å‰å˜é‡åœ¨å¯„å­˜å™¨ä¸­çš„å€¼æ˜¯ä¸ç¡®å®šçš„ï¼Œéœ€è¦ä»ä¸»å­˜ä¸­è¯»å–ï¼Œsynchronizedåˆ™æ˜¯é”å®šå½“å‰å˜é‡ï¼Œåªæœ‰å½“å‰çº¿ç¨‹å¯ä»¥è®¿é—®è¯¥å˜é‡ï¼Œå…¶ä»–çº¿ç¨‹è¢«é˜»å¡ä½ã€‚</li>
<li>volatileä»…èƒ½ç”¨åœ¨å˜é‡çº§åˆ«ï¼Œè€Œsynchronizedå¯ä»¥ä½¿ç”¨åœ¨å˜é‡ã€æ–¹æ³•ã€ç±»çº§åˆ«ã€‚</li>
<li>volatileä»…èƒ½å®ç°å˜é‡çš„ä¿®æ”¹å¯è§æ€§ï¼Œä¸èƒ½ä¿è¯åŸå­æ€§ï¼›è€Œsynchronizedåˆ™å¯ä»¥ä¿è¯å˜é‡çš„ä¿®æ”¹å¯è§æ€§å’ŒåŸå­æ€§ã€‚</li>
<li>volatileä¸ä¼šé€ æˆçº¿ç¨‹é˜»å¡ï¼Œsynchronizedå¯èƒ½ä¼šé€ æˆçº¿ç¨‹é˜»å¡ã€‚</li>
<li>volatileæ ‡è®°çš„å˜é‡ä¸ä¼šè¢«ç¼–è¯‘å™¨ä¼˜åŒ–ï¼Œsynchronizedæ ‡è®°çš„å˜é‡å¯ä»¥è¢«ç¼–è¯‘å™¨ä¼˜åŒ–ã€‚</li>
</ol>
<h4 data-id="heading-11"><a href="https://link.juejin.cn/?target=" target="_blank" title="https://link.juejin.cn/?target="/><strong>17ã€Javaç±»åŠ è½½è¿‡ç¨‹Â Â Â  éš¾åº¦ç³»æ•°ï¼šâ­</strong></h4>
<ol>
<li>åŠ è½½ åŠ è½½æ—¶ç±»åŠ è½½çš„ç¬¬ä¸€ä¸ªè¿‡ç¨‹ï¼Œåœ¨è¿™ä¸ªé˜¶æ®µï¼Œå°†å®Œæˆä¸€ä¸‹ä¸‰ä»¶äº‹æƒ…ï¼š</li>
</ol>
<p>é€šè¿‡ä¸€ä¸ªç±»çš„å…¨é™å®šåè·å–è¯¥ç±»çš„äºŒè¿›åˆ¶æµã€‚</p>
<p>å°†è¯¥äºŒè¿›åˆ¶æµä¸­çš„é™æ€å­˜å‚¨ç»“æ„è½¬åŒ–ä¸ºæ–¹æ³•å»è¿è¡Œæ—¶æ•°æ®ç»“æ„ã€‚Â </p>
<p>åœ¨å†…å­˜ä¸­ç”Ÿæˆè¯¥ç±»çš„Classå¯¹è±¡ï¼Œä½œä¸ºè¯¥ç±»çš„æ•°æ®è®¿é—®å…¥å£ã€‚</p>
<ol>
<li>éªŒè¯ éªŒè¯çš„ç›®çš„æ˜¯ä¸ºäº†ç¡®ä¿Classæ–‡ä»¶çš„å­—èŠ‚æµä¸­çš„ä¿¡æ¯ä¸å›å±å®³åˆ°è™šæ‹Ÿæœº.åœ¨è¯¥é˜¶æ®µä¸»è¦å®Œæˆä»¥ä¸‹å››é’ŸéªŒè¯:</li>
</ol>
<p>æ–‡ä»¶æ ¼å¼éªŒè¯ï¼šéªŒè¯å­—èŠ‚æµæ˜¯å¦ç¬¦åˆClassæ–‡ä»¶çš„è§„èŒƒï¼Œå¦‚ä¸»æ¬¡ç‰ˆæœ¬å·æ˜¯å¦åœ¨å½“å‰è™šæ‹ŸæœºèŒƒå›´å†…ï¼Œå¸¸é‡æ± ä¸­çš„å¸¸é‡æ˜¯å¦æœ‰ä¸è¢«æ”¯æŒçš„ç±»å‹.</p>
<p>å…ƒæ•°æ®éªŒè¯:å¯¹å­—èŠ‚ç æè¿°çš„ä¿¡æ¯è¿›è¡Œè¯­ä¹‰åˆ†æï¼Œå¦‚è¿™ä¸ªç±»æ˜¯å¦æœ‰çˆ¶ç±»ï¼Œæ˜¯å¦é›†æˆäº†ä¸è¢«ç»§æ‰¿çš„ç±»ç­‰ã€‚</p>
<p>å­—èŠ‚ç éªŒè¯ï¼šæ˜¯æ•´ä¸ªéªŒè¯è¿‡ç¨‹ä¸­æœ€å¤æ‚çš„ä¸€ä¸ªé˜¶æ®µï¼Œé€šè¿‡éªŒè¯æ•°æ®æµå’Œæ§åˆ¶æµçš„åˆ†æï¼Œç¡®å®šç¨‹åºè¯­ä¹‰æ˜¯å¦æ­£ç¡®ï¼Œä¸»è¦é’ˆå¯¹æ–¹æ³•ä½“çš„éªŒè¯ã€‚å¦‚ï¼šæ–¹æ³•ä¸­çš„ç±»å‹è½¬æ¢æ˜¯å¦æ­£ç¡®ï¼Œè·³è½¬æŒ‡ä»¤æ˜¯å¦æ­£ç¡®ç­‰ã€‚</p>
<p>ç¬¦å·å¼•ç”¨éªŒè¯ï¼šè¿™ä¸ªåŠ¨ä½œåœ¨åé¢çš„è§£æè¿‡ç¨‹ä¸­å‘ç”Ÿï¼Œä¸»è¦æ˜¯ä¸ºäº†ç¡®ä¿è§£æåŠ¨ä½œèƒ½æ­£ç¡®æ‰§è¡Œã€‚</p>
<ol>
<li>å‡†å¤‡</li>
</ol>
<p>å‡†å¤‡é˜¶æ®µæ˜¯ä¸ºç±»çš„é™æ€å˜é‡åˆ†é…å†…å­˜å¹¶å°†å…¶åˆå§‹åŒ–ä¸ºé»˜è®¤å€¼ï¼Œè¿™äº›å†…å­˜éƒ½å°†åœ¨æ–¹æ³•åŒºä¸­è¿›è¡Œåˆ†é…ã€‚å‡†å¤‡é˜¶æ®µä¸åˆ†é…ç±»ä¸­çš„å®ä¾‹å˜é‡çš„å†…å­˜ï¼Œå®ä¾‹å˜é‡å°†ä¼šåœ¨å¯¹è±¡å®ä¾‹åŒ–æ—¶éšç€å¯¹è±¡ä¸€èµ·åˆ†é…åœ¨Javaå †ä¸­ã€‚</p>
<ol>
<li>è§£æ</li>
</ol>
<p>è¯¥é˜¶æ®µä¸»è¦å®Œæˆç¬¦å·å¼•ç”¨åˆ°ç›´æ¥å¼•ç”¨çš„è½¬æ¢åŠ¨ä½œã€‚è§£æåŠ¨ä½œå¹¶ä¸ä¸€å®šåœ¨åˆå§‹åŒ–åŠ¨ä½œå®Œæˆä¹‹å‰ï¼Œä¹Ÿæœ‰å¯èƒ½åœ¨åˆå§‹åŒ–ä¹‹åã€‚</p>
<ol>
<li>åˆå§‹åŒ–</li>
</ol>
<p>åˆå§‹åŒ–æ—¶ç±»åŠ è½½çš„æœ€åä¸€æ­¥ï¼Œå‰é¢çš„ç±»åŠ è½½è¿‡ç¨‹ï¼Œé™¤äº†åœ¨åŠ è½½é˜¶æ®µç”¨æˆ·åº”ç”¨ç¨‹åºå¯ä»¥é€šè¿‡è‡ªå®šä¹‰ç±»åŠ è½½å™¨å‚ä¸ä¹‹å¤–ï¼Œå…¶ä½™åŠ¨ä½œå®Œå…¨ç”±è™šæ‹Ÿæœºä¸»å¯¼å’Œæ§åˆ¶ã€‚åˆ°äº†åˆå§‹åŒ–é˜¶æ®µï¼Œæ‰çœŸæ­£å¼€å§‹æ‰§è¡Œç±»ä¸­å®šä¹‰çš„</p>
<h4 data-id="heading-12"><a href="https://link.juejin.cn/?target=" target="_blank" title="https://link.juejin.cn/?target="/><strong>18ã€ä»€ä¹ˆæ˜¯ç±»åŠ è½½å™¨ï¼Œç±»åŠ è½½å™¨æœ‰å“ªäº›Â  éš¾åº¦ç³»æ•°ï¼šâ­</strong></h4>
<p>ç±»åŠ è½½å™¨å°±æ˜¯æŠŠç±»æ–‡ä»¶åŠ è½½åˆ°è™šæ‹Ÿæœºä¸­ï¼Œä¹Ÿå°±æ˜¯è¯´é€šè¿‡ä¸€ä¸ªç±»çš„å…¨é™å®šåæ¥è·å–æè¿°è¯¥ç±»çš„äºŒè¿›åˆ¶å­—èŠ‚æµã€‚</p>
<ol>
<li>ä¸»è¦æœ‰ä»¥ä¸‹å››ç§ç±»åŠ è½½å™¨</li>
</ol>
<p>å¯åŠ¨ç±»åŠ è½½å™¨(Bootstrap ClassLoader)ç”¨æ¥åŠ è½½javaæ ¸å¿ƒç±»åº“ï¼Œæ— æ³•è¢«javaç¨‹åºç›´æ¥å¼•ç”¨</p>
<p>æ‰©å±•ç±»åŠ è½½å™¨(extension class loader):å®ƒç”¨æ¥åŠ è½½ Java çš„æ‰©å±•åº“ã€‚Java è™šæ‹Ÿæœºçš„å®ç°ä¼šæä¾›ä¸€ä¸ªæ‰©å±•åº“ç›®å½•ã€‚è¯¥ç±»åŠ è½½å™¨åœ¨æ­¤ç›®å½•é‡Œé¢æŸ¥æ‰¾å¹¶åŠ è½½ Java ç±»</p>
<p>ç³»ç»Ÿç±»åŠ è½½å™¨ï¼ˆsystem class loaderï¼‰ä¹Ÿå«åº”ç”¨ç±»åŠ è½½å™¨ï¼šå®ƒæ ¹æ® Java åº”ç”¨çš„ç±»è·¯å¾„ï¼ˆCLASSPATHï¼‰æ¥åŠ è½½ Java ç±»ã€‚ä¸€èˆ¬æ¥è¯´ï¼ŒJava åº”ç”¨çš„ç±»éƒ½æ˜¯ç”±å®ƒæ¥å®ŒæˆåŠ è½½çš„ã€‚å¯ä»¥é€šè¿‡ ClassLoader.getSystemClassLoader()æ¥è·å–å®ƒ</p>
<p>ç”¨æˆ·è‡ªå®šä¹‰ç±»åŠ è½½å™¨ï¼Œé€šè¿‡ç»§æ‰¿ java.lang.ClassLoaderç±»çš„æ–¹å¼å®ç°</p>
<ol>
<li>
<p>ä»€ä¹ˆæ—¶å€™ä¼šä½¿ç”¨åˆ°åŠ è½½å™¨ï¼Ÿjavaä¸­çš„åŠ è½½å™¨æ˜¯æŒ‰éœ€åŠ è½½ï¼Œä»€ä¹ˆæ—¶å€™ç”¨åˆ°ï¼Œä»€ä¹ˆæ—¶å€™åŠ è½½</p>
<ul>
<li>newå¯¹è±¡çš„æ—¶å€™</li>
<li>è®¿é—®æŸä¸ªç±»æˆ–è€…æ¥å£çš„é™æ€å˜é‡ï¼Œæˆ–è€…å¯¹è¯¥é™æ€å˜é‡èµ‹å€¼æ—¶</li>
<li>è°ƒç”¨ç±»çš„é™æ€æ–¹æ³•æ—¶</li>
<li>åå°„</li>
<li>åˆå§‹åŒ–ä¸€ä¸ªç±»çš„å­ç±»æ—¶ï¼Œå…¶çˆ¶ç±»é¦–å…ˆä¼šè¢«åŠ è½½</li>
<li>JVMå¯åŠ¨æ—¶æ ‡æ˜çš„å¯åŠ¨ç±»ï¼Œä¹Ÿå°±æ˜¯æ–‡ä»¶åå’Œç±»åç›¸åŒçš„é‚£ä¸ªç±»</li>
</ul>
</li>
</ol>
<h4 data-id="heading-13"><a href="https://link.juejin.cn/?target=" target="_blank" title="https://link.juejin.cn/?target="/><strong>19ã€ç®€è¿°javaå†…å­˜åˆ†é…ä¸å›æ”¶ç­–ç•¥ä»¥åŠMinor GCå’ŒMajor GCï¼ˆfull GCï¼‰Â Â Â Â  éš¾åº¦ç³»æ•°ï¼šâ­â­</strong></h4>
<ol>
<li><strong>å†…å­˜åˆ†é…</strong></li>
</ol>
<p><strong>æ ˆåŒº</strong>ï¼šæ ˆåˆ†ä¸ºjavaè™šæ‹Ÿæœºæ ˆå’Œæœ¬åœ°æ–¹æ³•æ ˆ</p>
<p><strong>å †åŒº</strong>ï¼šå †è¢«æ‰€æœ‰çº¿ç¨‹å…±äº«åŒºåŸŸï¼Œåœ¨è™šæ‹Ÿæœºå¯åŠ¨æ—¶åˆ›å»ºï¼Œå”¯ä¸€ç›®çš„å­˜æ”¾å¯¹è±¡å®ä¾‹ã€‚å †åŒºæ˜¯gcçš„ä¸»è¦åŒºåŸŸï¼Œé€šå¸¸æƒ…å†µä¸‹åˆ†ä¸ºä¸¤ä¸ªåŒºå—å¹´è½»ä»£å’Œå¹´è€ä»£ã€‚æ›´ç»†ä¸€ç‚¹å¹´è½»ä»£åˆåˆ†ä¸ºEdenåŒºï¼Œä¸»è¦æ”¾æ–°åˆ›å»ºå¯¹è±¡ï¼ŒFrom survivor å’Œ To survivor ä¿å­˜gcåå¹¸å­˜ä¸‹çš„å¯¹è±¡ï¼Œé»˜è®¤æƒ…å†µä¸‹å„è‡ªå æ¯” 8:1:1ã€‚</p>
<p><strong>æ–¹æ³•åŒº</strong>ï¼šè¢«æ‰€æœ‰çº¿ç¨‹å…±äº«åŒºåŸŸï¼Œç”¨äºå­˜æ”¾å·²è¢«è™šæ‹ŸæœºåŠ è½½çš„ç±»ä¿¡æ¯ï¼Œå¸¸é‡ï¼Œé™æ€å˜é‡ç­‰æ•°æ®ã€‚è¢«Javaè™šæ‹Ÿæœºæè¿°ä¸ºå †çš„ä¸€ä¸ªé€»è¾‘éƒ¨åˆ†ã€‚ä¹ æƒ¯æ˜¯ä¹Ÿå«å®ƒæ°¸ä¹…ä»£ï¼ˆpermanment generationï¼‰</p>
<p><strong>ç¨‹åºè®¡æ•°å™¨</strong>ï¼šå½“å‰çº¿ç¨‹æ‰€æ‰§è¡Œçš„è¡Œå·æŒ‡ç¤ºå™¨ã€‚é€šè¿‡æ”¹å˜è®¡æ•°å™¨çš„å€¼æ¥ç¡®å®šä¸‹ä¸€æ¡æŒ‡ä»¤ï¼Œæ¯”å¦‚å¾ªç¯ï¼Œåˆ†æ”¯ï¼Œè·³è½¬ï¼Œå¼‚å¸¸å¤„ç†ï¼Œçº¿ç¨‹æ¢å¤ç­‰éƒ½æ˜¯ä¾èµ–è®¡æ•°å™¨æ¥å®Œæˆã€‚çº¿ç¨‹ç§æœ‰çš„ã€‚</p>
<ol>
<li>
<p><strong>å›æ”¶ç­–ç•¥ä»¥åŠMinor GCå’ŒMajor GC</strong></p>
<ul>
<li>å¯¹è±¡ä¼˜å…ˆåœ¨å †çš„EdenåŒºåˆ†é…</li>
<li>å¤§å¯¹è±¡ç›´æ¥è¿›å…¥è€å¹´ä»£</li>
<li>é•¿æœŸå­˜æ´»çš„å¯¹è±¡å°†ç›´æ¥è¿›å…¥è€å¹´ä»£</li>
</ul>
</li>
</ol>
<p>å½“EdenåŒºæ²¡æœ‰è¶³å¤Ÿçš„ç©ºé—´è¿›è¡Œåˆ†é…æ—¶ï¼Œè™šæ‹Ÿæœºä¼šæ‰§è¡Œä¸€æ¬¡Minor GC.Minor GCé€šå¸¸å‘ç”Ÿåœ¨æ–°ç”Ÿä»£çš„EdenåŒºï¼Œåœ¨è¿™ä¸ªåŒºçš„å¯¹è±¡ç”Ÿå­˜æœŸçŸ­ï¼Œå¾€å¾€å‘ç”ŸGCçš„é¢‘ç‡è¾ƒé«˜ï¼Œå›æ”¶é€Ÿåº¦æ¯”è¾ƒå¿«;Full Gc/Major GC å‘ç”Ÿåœ¨è€å¹´ä»£ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œè§¦å‘è€å¹´ä»£GCçš„æ—¶å€™ä¸ä¼šè§¦å‘Minor GC,ä½†æ˜¯é€šè¿‡é…ç½®ï¼Œå¯ä»¥åœ¨Full GCä¹‹å‰è¿›è¡Œä¸€æ¬¡Minor GCè¿™æ ·å¯ä»¥åŠ å¿«è€å¹´ä»£çš„å›æ”¶é€Ÿåº¦ã€‚</p>
<h4 data-id="heading-14"><a href="https://link.juejin.cn/?target=" target="_blank" title="https://link.juejin.cn/?target="/><strong>20ã€å¦‚ä½•æŸ¥çœ‹javaæ­»é”Â Â Â Â  éš¾åº¦ç³»æ•°ï¼šâ­</strong></h4>
<pre><code class="hljs language-java" lang="java">####æ¼”ç¤ºæ­»é”
<span class="hljs-keyword">package</span> com.ssg.mst;
<span class="hljs-keyword">public</span> class æ­»é” {
 
Â Â Â  <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">lock1</span> <span class="hljs-operator">=</span> <span class="hljs-string">"lock1"</span>;
Â Â Â  <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">lock2</span> <span class="hljs-operator">=</span> <span class="hljs-string">"lock2"</span>;
Â Â Â  <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
Â Â Â Â Â Â Â  <span class="hljs-type">Thread</span> <span class="hljs-variable">thread1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; {
Â Â Â Â Â Â Â Â Â Â Â  <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  <span class="hljs-keyword">synchronized</span> (lock1) {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  <span class="hljs-keyword">try</span> {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  System.out.println(Thread.currentThread().getName() + lock1);
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  Thread.sleep(<span class="hljs-number">1000</span>);
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  <span class="hljs-keyword">synchronized</span> (lock2){
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  System.out.println(Thread.currentThread().getName() + lock2);
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  }
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  } <span class="hljs-keyword">catch</span> (InterruptedException e) {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(e);
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  }
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  }
Â Â Â Â Â Â Â Â Â Â Â  }
Â Â Â Â Â Â Â  });
 
Â Â Â Â Â Â Â  <span class="hljs-type">Thread</span> <span class="hljs-variable">thread2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; {
Â Â Â Â Â Â Â Â Â Â Â  <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  <span class="hljs-keyword">synchronized</span> (lock2) {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  <span class="hljs-keyword">try</span> {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  System.out.println(Thread.currentThread().getName() + lock2);
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  Thread.sleep(<span class="hljs-number">1000</span>);
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  <span class="hljs-keyword">synchronized</span> (lock1){
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  System.out.println(Thread.currentThread().getName() + lock1);
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  }
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  } <span class="hljs-keyword">catch</span> (InterruptedException e) {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(e);
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  }
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  }
Â Â Â Â Â Â Â Â Â Â Â  }
Â Â Â Â Â Â Â  });
 
Â Â Â Â Â Â Â  thread1.start();
Â Â Â Â Â Â Â  thread2.start();
Â Â  Â }
}
è¿è¡Œé¡¹ç›®å¹¶ä¸‹è½½æºç 
</code></pre>
<p>Java</p>
<p>æ­»é”ä»£ç æ¼”ç¤º</p>
<ol>
<li>ç¨‹åºè¿è¡Œï¼Œè¿›ç¨‹æ²¡æœ‰åœæ­¢ã€‚</li>
</ol>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/343ad9d79ff14f2fbdbf68bc38b6fc53~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YeawtOinow==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771396836&amp;x-signature=xzSs8A3XgfGEQ0LpCeYG178XNXQ%3D" alt="" loading="lazy"/></p>
<ol>
<li>é€šè¿‡jpsæŸ¥çœ‹javaè¿›ç¨‹ï¼Œæ‰¾åˆ°æ²¡æœ‰åœæ­¢çš„è¿›ç¨‹</li>
</ol>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f4ba1cd42c0f42ecbe6c238e08fd3b4c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YeawtOinow==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771396836&amp;x-signature=8eDpN2xxdS%2BZLyJ6EIUf%2FK%2BwhTA%3D" alt="" loading="lazy"/></p>
<ol>
<li>é€šè¿‡jstack 9060 æŸ¥çœ‹è¿›ç¨‹å…·ä½“æ‰§è¡Œä¿¡æ¯</li>
</ol>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7ec5cebfa4ec4a97915de5351069759b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YeawtOinow==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771396836&amp;x-signature=EANngeE2XklCTGDJpav7qZRsxPk%3D" alt="" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ·±å…¥ç†è§£ INPï¼šä»åŸç†åˆ°å®æˆ˜çš„å‰ç«¯äº¤äº’æ€§èƒ½ä¼˜åŒ–]]></title>    <link>https://juejin.cn/post/7605106957133856802</link>    <guid>https://juejin.cn/post/7605106957133856802</guid>    <pubDate>2026-02-11T06:20:50.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605106957133856802" data-draft-id="7601374137412829219" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ·±å…¥ç†è§£ INPï¼šä»åŸç†åˆ°å®æˆ˜çš„å‰ç«¯äº¤äº’æ€§èƒ½ä¼˜åŒ–"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,æ€§èƒ½ä¼˜åŒ–"/> <meta itemprop="datePublished" content="2026-02-11T06:20:50.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æµè§ˆå™¨APIè°ƒç”¨å·¥ç¨‹å¸ˆ_Taylor"/> <meta itemprop="url" content="https://juejin.cn/user/3104676568630520"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ·±å…¥ç†è§£ INPï¼šä»åŸç†åˆ°å®æˆ˜çš„å‰ç«¯äº¤äº’æ€§èƒ½ä¼˜åŒ–
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3104676568630520/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æµè§ˆå™¨APIè°ƒç”¨å·¥ç¨‹å¸ˆ_Taylor
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-11T06:20:50.000Z" title="Wed Feb 11 2026 06:20:50 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    10
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">èƒŒæ™¯</h2>
<p>æœ€è¿‘æœ‰åšä¸€äº›INPä¼˜åŒ–ç›¸å…³ï¼Œç®€å•è®°å½•ä¸€ä¸‹ã€‚</p>
<p>INPé«˜çš„é‡ç¾åŒºå°±æ˜¯æ‰‹æœºç«¯ï¼Œ æ‰‹æœº CPU å¼±ã€çº¿ç¨‹ç´§å¼ ï¼ŒINP é«˜åŸºæœ¬éƒ½å‡ºåœ¨ç§»åŠ¨ç«¯ã€‚</p>
<h2 data-id="heading-1">ä»€ä¹ˆæ˜¯Â INPï¼Ÿ</h2>
<p><strong>INPï¼ˆInteractionÂ toÂ NextÂ Paintï¼Œäº¤äº’åˆ°ä¸‹ä¸€æ¬¡ç»˜åˆ¶ï¼‰</strong>Â æ˜¯Â GoogleÂ CoreÂ WebÂ VitalsÂ ä¸­è¯„ä¼°ç½‘é¡µäº¤äº’å“åº”æ€§çš„æ ¸å¿ƒæŒ‡æ ‡ã€‚è‡ªÂ 2024Â å¹´Â 3Â æœˆèµ·ï¼ŒINPÂ æ­£å¼å–ä»£äº†æ—§çš„Â FIDï¼ˆFirstÂ InputÂ Delayï¼‰ï¼Œæˆä¸ºè¡¡é‡ç”¨æˆ·äº¤äº’ä½“éªŒçš„ä¸»è¦æ ‡å‡†ã€‚</p>
<h2 data-id="heading-2">ä¼˜åŒ–INPæœ‰ä»€ä¹ˆç”¨ï¼Ÿ</h2>
<ul>
<li>
<p>ğŸ“± <strong>ä½“éªŒå±‚é¢</strong>ï¼šè§£å†³ç§»åŠ¨ç«¯ç‚¹å‡»å¡é¡¿ã€æ— å“åº”ï¼Œè®©äº¤äº’ç§’åé¦ˆï¼Œå¤§å¹…æå‡æµç•…åº¦ã€‚</p>
</li>
<li>
<p>ğŸ” <strong>SEO å±‚é¢</strong>ï¼šINP æ˜¯ Google Core Web Vitals æ ¸å¿ƒæŒ‡æ ‡ï¼Œè¾¾æ ‡æœ‰åˆ©äºæœç´¢æ’åä¸æµé‡ã€‚</p>
</li>
<li>
<p>ğŸ’° <strong>ä¸šåŠ¡å±‚é¢</strong>ï¼šäº¤äº’æ›´æµç•…ï¼Œç”¨æˆ·æµå¤±æ›´å°‘ï¼Œç•™å­˜ã€è½¬åŒ–ç‡æ›´é«˜ã€‚</p>
</li>
<li>
<p>ğŸ›  <strong>æŠ€æœ¯å±‚é¢</strong>ï¼šæ‹†åˆ†é•¿ä»»åŠ¡ã€ä¼˜åŒ–ä¸»çº¿ç¨‹ï¼Œè®©é¡¹ç›®æ•´ä½“æ¶æ„æ›´è½»ã€æ›´å¿«ã€æ›´æ˜“ç»´æŠ¤ã€‚</p>
</li>
</ul>
<h2 data-id="heading-3">INPÂ vsÂ FIDï¼šä¸ºä»€ä¹ˆè¦æ¢ï¼Ÿ</h2>






























<table><thead><tr><th>å¯¹æ¯”ç»´åº¦</th><th>FIDÂ (æ—§æŒ‡æ ‡)</th><th>INPÂ (æ–°æŒ‡æ ‡)</th></tr></thead><tbody><tr><td>æµ‹é‡èŒƒå›´</td><td>ä»…ç¬¬ä¸€æ¬¡äº¤äº’</td><td><strong>å…¨ç”Ÿå‘½å‘¨æœŸæ‰€æœ‰äº¤äº’</strong></td></tr><tr><td>æµ‹é‡å†…å®¹</td><td>ä»…è¾“å…¥å»¶è¿Ÿ</td><td><strong>è¾“å…¥Â +Â å¤„ç†Â +Â æ¸²æŸ“</strong>Â å…¨é“¾è·¯</td></tr><tr><td>çœŸå®æ€§</td><td>ç‰‡é¢</td><td>æ›´å…¨é¢ã€æ›´çœŸå®</td></tr><tr><td>ä¼˜åŒ–æŒ‡å¯¼</td><td>åªå…³æ³¨é¦–æ¬¡äº¤äº’</td><td>å…³æ³¨æ‰€æœ‰äº¤äº’åœºæ™¯</td></tr></tbody></table>
<p><strong>ç®€å•æ¥è¯´</strong>ï¼šFIDÂ åªæ˜¯"å¼€èƒƒèœ"ï¼ŒINPÂ æ‰æ˜¯"å…¨å¸­å®´"â€”â€”å®ƒèƒ½çœŸæ­£åæ˜ ç”¨æˆ·åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­çš„å®Œæ•´ä½“éªŒã€‚</p>
<hr/>
<h2 data-id="heading-4">INPÂ æµ‹é‡çš„æ˜¯ä»€ä¹ˆï¼Ÿ</h2>
<p>INPÂ æµ‹é‡çš„æ˜¯ï¼š<strong>ç”¨æˆ·è¿›è¡Œä¸€æ¬¡æœ‰æ•ˆäº¤äº’ï¼ˆç‚¹å‡»ã€ç‚¹æŒ‰ã€é”®ç›˜è¾“å…¥ï¼‰åï¼Œåˆ°æµè§ˆå™¨å®Œæˆä¸‹ä¸€æ¬¡è§†è§‰æ›´æ–°ï¼ˆpaintï¼‰æ‰€èŠ±è´¹çš„æ€»æ—¶é—´ã€‚</strong></p>
<h3 data-id="heading-5">æ—¶åºå›¾è§£</h3>
<pre><code class="hljs language-plaintext" lang="plaintext">ç”¨æˆ·äº¤äº’ï¼ˆclick/tap/keypressï¼‰
        â”‚
        â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  è¾“å…¥å»¶è¿Ÿ   â”‚ â†’ â”‚  äº‹ä»¶å¤„ç†   â”‚ â†’ â”‚ æ ·å¼è®¡ç®— + å¸ƒå±€ + ç»˜åˆ¶  â”‚ â†’ ä¸‹ä¸€å¸§ paint
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ INP å®Œæ•´è€—æ—¶ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶


</code></pre>
<blockquote>
<p>ğŸ“ŒÂ <strong>å…³é”®ç‚¹</strong>ï¼šINPÂ çš„æœ€ç»ˆå€¼Â =Â é¡µé¢ç”Ÿå‘½å‘¨æœŸä¸­æ‰€æœ‰æœ‰æ•ˆäº¤äº’é‡Œ<strong>æœ€æ…¢çš„é‚£ä¸€æ¬¡</strong>ï¼ˆå–ç¬¬Â 75Â ç™¾åˆ†ä½ï¼‰</p>
</blockquote>
<h2 data-id="heading-6">è¯„åˆ†æ ‡å‡†ï¼ˆ2025â€“2026ï¼‰</h2>
<p>æ ¹æ®Â GoogleÂ å®˜æ–¹æ ‡å‡†ï¼ŒINPÂ ä»¥ç¬¬Â 75Â ç™¾åˆ†ä½ï¼ˆP75ï¼‰è¿›è¡Œè¯„ä¼°ï¼š</p>

























<table><thead><tr><th>ç­‰çº§</th><th>é˜ˆå€¼</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td>ğŸŸ¢Â <strong>è‰¯å¥½</strong>Â (Good)</td><td>â‰¤Â 200Â ms</td><td>å“åº”è¿…é€Ÿï¼Œç”¨æˆ·ä½“éªŒä¼˜ç§€</td></tr><tr><td>ğŸŸ¡Â <strong>éœ€æ”¹è¿›</strong>Â (NeedsÂ Improvement)</td><td>200â€“500Â ms</td><td>æœ‰æ˜æ˜¾å»¶è¿Ÿæ„Ÿï¼Œéœ€è¦ä¼˜åŒ–</td></tr><tr><td>ğŸ”´Â <strong>è¾ƒå·®</strong>Â (Poor)</td><td>&gt;Â 500Â ms</td><td>ä¸¥é‡å¡é¡¿ï¼Œä½“éªŒç³Ÿç³•</td></tr></tbody></table>
<p><strong>ä¼˜åŒ–ç›®æ ‡</strong>ï¼šç¡®ä¿Â 75%Â ä»¥ä¸Šçš„ç”¨æˆ·äº¤äº’å“åº”æ—¶é—´æ§åˆ¶åœ¨Â <strong>200Â msÂ ä»¥å†…</strong>ã€‚</p>
<h2 data-id="heading-7">å¦‚ä¸‹æ˜¯è°·æ­Œæœç´¢æ§åˆ¶å°çœ‹åˆ°çš„INPé«˜çš„é¡µé¢ï¼Œæç¤ºå’±éœ€è¦ä¼˜åŒ–æå‡å‘¢</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3f28c94c680e4d9ba760936d853a7cc2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rWP6KeI5ZmoQVBJ6LCD55So5bel56iL5biIX1RheWxvcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771396370&amp;x-signature=os6YipZtG7CbC13fh8S1%2Bt9ybg8%3D" alt="1770779737686_00af473a3546431c8782fc39930c2adb.png" loading="lazy"/></p>
<h2 data-id="heading-8">ä¸ºä»€ä¹ˆÂ INPÂ ä¼šå˜å·®ï¼Ÿ</h2>
<h3 data-id="heading-9">æ ¸å¿ƒåŸå› </h3>
<p><strong>ä¸»çº¿ç¨‹ä¸Šå­˜åœ¨é•¿ä»»åŠ¡ï¼ˆLongÂ TaskÂ &gt;Â 50Â msï¼‰</strong>ï¼Œé˜»å¡äº†æµè§ˆå™¨å¤„ç†åç»­äº¤äº’å’Œæ¸²æŸ“ã€‚</p>
<h3 data-id="heading-10">å…¸å‹åœºæ™¯</h3>
<pre><code class="hljs language-plaintext" lang="plaintext">ç”¨æˆ·ç‚¹å‡»æŒ‰é’® 
    â†’ setLoading(true) 
    â†’ ç«‹å³æ‰§è¡Œ 200â€“500 ms çš„é‡è®¡ç®—/ç½‘ç»œè¯·æ±‚/å¤æ‚ DOM æ“ä½œ 
    â†’ ç”¨æˆ·è¿Ÿè¿Ÿçœ‹ä¸åˆ° loading çŠ¶æ€
    â†’ æ„Ÿè§‰å¡é¡¿ã€æ— å“åº”


</code></pre>
<p>é—®é¢˜åœ¨äºï¼š<strong>setLoading(true)Â è™½ç„¶è°ƒç”¨äº†ï¼Œä½†ç”±äºä¸»çº¿ç¨‹è¢«é•¿ä»»åŠ¡å ç”¨ï¼Œæµè§ˆå™¨æ ¹æœ¬æ²¡æœºä¼šæ¸²æŸ“è¿™ä¸ªçŠ¶æ€å˜åŒ–ï¼</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5a3e57c4af114983955e8b69f3921213~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rWP6KeI5ZmoQVBJ6LCD55So5bel56iL5biIX1RheWxvcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771396370&amp;x-signature=z%2FtS8DqtRAR6%2BUCODf%2FIkn1TXNo%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-11">ä¸‰ä¸ªé˜¶æ®µçš„é—®é¢˜åˆ†å¸ƒ</h3>
<p>æ ¹æ®å®é™…é¡¹ç›®ç»éªŒï¼Œä¸‰ä¸ªé˜¶æ®µçš„é—®é¢˜åˆ†å¸ƒå¤§è‡´å¦‚ä¸‹ï¼š</p>
<ul>
<li>
<p><strong>è¾“å…¥å»¶è¿Ÿ</strong>ï¼š30%Â -Â é€šå¸¸æ˜¯ç¬¬ä¸‰æ–¹è„šæœ¬ã€åˆå§‹åŒ–ä»»åŠ¡</p>
</li>
<li>
<p><strong>äº‹ä»¶å¤„ç†</strong>ï¼š50%Â -Â æœ€å¸¸è§çš„é—®é¢˜ï¼Œä¸šåŠ¡é€»è¾‘å¤æ‚</p>
</li>
<li>
<p><strong>å‘ˆç°å»¶è¿Ÿ</strong>ï¼š20%Â -Â DOMÂ æ“ä½œã€å¸ƒå±€è®¡ç®—</p>
</li>
</ul>
<hr/>
<h2 data-id="heading-12">INPÂ çš„ä¸‰ä¸ªé˜¶æ®µè¯¦è§£</h2>
<p>INPÂ çš„æµ‹é‡èŒƒå›´æ¶µç›–ä¸‰ä¸ªå…³é”®é˜¶æ®µï¼Œæ¯ä¸ªé˜¶æ®µéƒ½å¯èƒ½æˆä¸ºæ€§èƒ½ç“¶é¢ˆã€‚æ·±å…¥ç†è§£è¿™ä¸‰ä¸ªé˜¶æ®µï¼Œæ˜¯ä¼˜åŒ–Â INPÂ çš„åŸºç¡€ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7d468f757de14221935dcfce22c01a29~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rWP6KeI5ZmoQVBJ6LCD55So5bel56iL5biIX1RheWxvcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771396370&amp;x-signature=VkyBxZ3W2V17OYPTdQq0FOC5PAI%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-13">é˜¶æ®µä¸€ï¼šè¾“å…¥å»¶è¿Ÿï¼ˆInputÂ Delayï¼‰</h3>
<p><strong>å®šä¹‰</strong>ï¼šä»ç”¨æˆ·è§¦å‘äº¤äº’åˆ°äº‹ä»¶å¤„ç†å™¨å¼€å§‹æ‰§è¡Œä¹‹é—´çš„ç­‰å¾…æ—¶é—´ã€‚</p>
<p><strong>åŸå› </strong>ï¼šä¸»çº¿ç¨‹è¢«å…¶ä»–ä»»åŠ¡å ç”¨ï¼ˆé•¿ä»»åŠ¡Â &gt;Â 50msã€åŒæ­¥æ¸²æŸ“ã€ç¬¬ä¸‰æ–¹è„šæœ¬ã€åƒåœ¾å›æ”¶ï¼‰ï¼Œæµè§ˆå™¨æ— æ³•ç«‹å³å“åº”äº¤äº’ã€‚</p>
<p><strong>æ¡ˆä¾‹</strong>ï¼š<strong>æ¯”å¦‚å¦‚ä¸‹ï¼Œè¾“å…¥å»¶è¿Ÿ348msï¼Œè„šæœ¬åŠ è½½é˜»å¡äº†äº¤äº’</strong>
å¯¼è‡´ç”¨æˆ·äº¤äº’å¡é¡¿</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/64821c46b4a24ccb9ca03f1f1e04e22e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rWP6KeI5ZmoQVBJ6LCD55So5bel56iL5biIX1RheWxvcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771396370&amp;x-signature=LAgGThGZ50xGTipgjixCAnPahIQ%3D" alt="f41ca817c123575b3394dbeab12da896.png" loading="lazy"/></p>
<h4 data-id="heading-14">ä¼˜åŒ–ç­–ç•¥</h4>
<ul>
<li>
<p>æ‹†åˆ†é•¿ä»»åŠ¡ï¼šä½¿ç”¨Â <code>scheduler.yield()</code>Â æˆ–Â scheduler.postTaskÂ è®©å‡ºä¸»çº¿ç¨‹</p>
</li>
<li>
<p>å»¶è¿Ÿéå…³é”®ä»»åŠ¡ï¼šä½¿ç”¨Â <code>requestIdleCallback</code>Â åœ¨ç©ºé—²æ—¶æ‰§è¡Œ</p>
</li>
<li>
<p>ä¼˜åŒ–ç¬¬ä¸‰æ–¹è„šæœ¬ï¼šå¼‚æ­¥åŠ è½½ã€å»¶è¿Ÿæ‰§è¡Œ</p>
</li>
</ul>
<hr/>
<h3 data-id="heading-15">é˜¶æ®µäºŒï¼šäº‹ä»¶å¤„ç†ï¼ˆProcessingÂ Timeï¼‰</h3>
<p><strong>å®šä¹‰</strong>ï¼šäº‹ä»¶å¤„ç†å™¨ä»å¼€å§‹æ‰§è¡Œåˆ°æ‰§è¡Œå®Œæˆæ‰€èŠ±è´¹çš„æ—¶é—´ã€‚</p>
<p><strong>åŸå› </strong>ï¼šå¤„ç†å™¨å†…éƒ¨æ‰§è¡Œè€—æ—¶æ“ä½œï¼ˆå¤æ‚è®¡ç®—ã€å¤§é‡Â DOMÂ æ“ä½œã€åŒæ­¥ç½‘ç»œè¯·æ±‚ã€å¼ºåˆ¶åŒæ­¥å¸ƒå±€ï¼‰ï¼Œé˜»å¡ä¸»çº¿ç¨‹ã€‚</p>
<h4 data-id="heading-16">å®é™…æ¡ˆä¾‹</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// âŒ é—®é¢˜ï¼šç”¨æˆ·ç‚¹å‡»æ›´æ¢èƒŒæ™¯ï¼Œä½†ç”»å¸ƒæ“ä½œè€—æ—¶ï¼Œçœ‹ä¸åˆ°å³æ—¶åé¦ˆ</span>
<span class="hljs-comment">// æ¥æºï¼šsrc/core/FTCanvasRenderer.ts - updateBackground</span>
<span class="hljs-keyword">async</span> <span class="hljs-title function_">updateBackground</span>(<span class="hljs-params">{ bgUrl, bgColor, size, callback }</span>) {
  <span class="hljs-title class_">FTBgremoveStore</span>.<span class="hljs-property">changeBackgroundLoading</span> = <span class="hljs-literal">true</span>;  <span class="hljs-comment">// çŠ¶æ€å·²æ›´æ–°ï¼Œä½†æµè§ˆå™¨è¿˜æ²¡æ¸²æŸ“</span>
  
  <span class="hljs-comment">// åŒæ­¥æ‰§è¡Œè€—æ—¶æ“ä½œï¼Œé˜»å¡ä¸»çº¿ç¨‹</span>
  <span class="hljs-keyword">const</span> blobUrl = <span class="hljs-keyword">await</span> <span class="hljs-title class_">FTBlobCacheManager</span>.<span class="hljs-title function_">getInstance</span>().<span class="hljs-title function_">addCache</span>(bgUrl);  <span class="hljs-comment">// 100-200ms</span>
  bg.<span class="hljs-title function_">setSource</span>(blobUrl, <span class="hljs-string">"imageUrl"</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">blurBackground</span>(currentPageData.<span class="hljs-property">blurValue</span> || <span class="hljs-number">0</span>);  <span class="hljs-comment">// 50-100ms æ¨¡ç³Šå¤„ç†</span>
    fabricCanvas.<span class="hljs-title function_">requestRenderAll</span>();  <span class="hljs-comment">// è§¦å‘é‡ç»˜</span>
    <span class="hljs-title class_">FTBgremoveStore</span>.<span class="hljs-property">changeBackgroundLoading</span> = <span class="hljs-literal">false</span>;
  });
}

<span class="hljs-comment">// âœ… ä¼˜åŒ–ï¼šå…ˆè®©æµè§ˆå™¨æ¸²æŸ“åé¦ˆï¼Œå†æ‰§è¡Œè€—æ—¶æ“ä½œ</span>
<span class="hljs-keyword">import</span> { nextTick } <span class="hljs-keyword">from</span> <span class="hljs-string">'src/utils'</span>;

<span class="hljs-keyword">async</span> <span class="hljs-title function_">updateBackground</span>(<span class="hljs-params">{ bgUrl, bgColor, size, callback }</span>) {
  <span class="hljs-title class_">FTBgremoveStore</span>.<span class="hljs-property">changeBackgroundLoading</span> = <span class="hljs-literal">true</span>;
  
  <span class="hljs-comment">// è®©å‡ºä¸»çº¿ç¨‹ï¼Œç¡®ä¿æµè§ˆå™¨å…ˆæ¸²æŸ“ loading çŠ¶æ€</span>
  <span class="hljs-keyword">await</span> <span class="hljs-title function_">nextTick</span>();
  
  <span class="hljs-comment">// ç°åœ¨æ‰§è¡Œè€—æ—¶æ“ä½œ</span>
  <span class="hljs-keyword">const</span> blobUrl = <span class="hljs-keyword">await</span> <span class="hljs-title class_">FTBlobCacheManager</span>.<span class="hljs-title function_">getInstance</span>().<span class="hljs-title function_">addCache</span>(bgUrl);
  bg.<span class="hljs-title function_">setSource</span>(blobUrl, <span class="hljs-string">"imageUrl"</span>, <span class="hljs-keyword">async</span> () =&gt; {
    <span class="hljs-keyword">await</span> <span class="hljs-title function_">nextTick</span>();  <span class="hljs-comment">// å†æ¬¡è®©å‡ºï¼Œç¡®ä¿æ¨¡ç³Šå¤„ç†ä¸é˜»å¡</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">blurBackground</span>(currentPageData.<span class="hljs-property">blurValue</span> || <span class="hljs-number">0</span>);
    fabricCanvas.<span class="hljs-title function_">requestRenderAll</span>();
    <span class="hljs-title class_">FTBgremoveStore</span>.<span class="hljs-property">changeBackgroundLoading</span> = <span class="hljs-literal">false</span>;
  });
}


</code></pre>
<h4 data-id="heading-17">ä¼˜åŒ–ç­–ç•¥</h4>
<ul>
<li>
<p>å…ˆåé¦ˆå†å¤„ç†ï¼šä½¿ç”¨Â <code>nextTick()</code>Â è®©æµè§ˆå™¨å…ˆæ¸²æŸ“çŠ¶æ€å˜åŒ–</p>
</li>
<li>
<p>æ‹†åˆ†é•¿ä»»åŠ¡ï¼šå°†è€—æ—¶æ“ä½œæ‹†æˆå¤šä¸ªå°ä»»åŠ¡</p>
</li>
<li>
<p>ä½¿ç”¨Â WebÂ Workerï¼šå°†è®¡ç®—å¯†é›†å‹ä»»åŠ¡ç§»åˆ°Â WorkerÂ çº¿ç¨‹</p>
</li>
</ul>
<hr/>
<h3 data-id="heading-18">é˜¶æ®µä¸‰ï¼šå‘ˆç°å»¶è¿Ÿï¼ˆPresentationÂ Delayï¼‰</h3>
<p><strong>å®šä¹‰</strong>ï¼šä»äº‹ä»¶å¤„ç†å™¨æ‰§è¡Œå®Œæˆï¼Œåˆ°æµè§ˆå™¨å®Œæˆä¸‹ä¸€æ¬¡Â paintï¼ˆç»˜åˆ¶ï¼‰ä¹‹é—´çš„æ—¶é—´ã€‚</p>
<p><strong>åŸå› </strong>ï¼šæµè§ˆå™¨æ¸²æŸ“ç®¡é“ï¼ˆæ ·å¼è®¡ç®—Â â†’Â å¸ƒå±€Â â†’Â ç»˜åˆ¶Â â†’Â åˆæˆï¼‰è€—æ—¶è¿‡é•¿ï¼Œå¸¸è§é—®é¢˜åŒ…æ‹¬å¼ºåˆ¶åŒæ­¥å¸ƒå±€ã€å¤§é‡é‡æ’ã€å¤æ‚Â CSSÂ é€‰æ‹©å™¨ã€‚</p>
<h4 data-id="heading-19">ä¼˜åŒ–ç­–ç•¥</h4>
<ul>
<li>
<p>é¿å…å¼ºåˆ¶åŒæ­¥å¸ƒå±€ï¼šå…ˆæ‰¹é‡è¯»å–å¸ƒå±€å±æ€§ï¼Œå†æ‰¹é‡å†™å…¥Â DOM</p>
</li>
<li>
<p>å‡å°‘é‡æ’é‡ç»˜</p>
</li>
<li>
<p>ä¼˜åŒ–Â CSSÂ é€‰æ‹©å™¨ï¼šé¿å…æ·±å±‚åµŒå¥—ï¼Œä½¿ç”¨ç±»é€‰æ‹©å™¨</p>
</li>
</ul>
<hr/>
<h2 data-id="heading-20">INPä¼˜åŒ–æ ¸å¿ƒæ€è·¯</h2>
<blockquote>
<p>ğŸ¯Â <strong>æ ¸å¿ƒåŸåˆ™</strong>ï¼š<strong>è®©ç”¨æˆ·äº¤äº’åçš„ç¬¬ä¸€ä¸ªÂ paintÂ å°½å¿«å‘ç”Ÿï¼ŒæŠŠé‡çš„ã€éå¿…é¡»ç«‹å³æ‰§è¡Œçš„å·¥ä½œå»¶è¿Ÿæˆ–æ‹†åˆ†</strong>ã€‚</p>
</blockquote>
<p>è¿™æ ·åšèƒ½è®©ä½ æ¨è¿Ÿæ‰§è¡Œçš„ä»»åŠ¡ä¸ç®—åœ¨INPæ—¶é—´è®¡ç®—å†…</p>
<h3 data-id="heading-21">âŒÂ é”™è¯¯ç¤ºèŒƒï¼šé˜»å¡æ¸²æŸ“</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// æ¥æºï¼šsrc/store/FTBgremoveStore.tsx - handleLoadSimplifyCanvas</span>
<span class="hljs-keyword">async</span> <span class="hljs-title function_">handleLoadSimplifyCanvas</span>(<span class="hljs-params">imgUrl, id, closeLoading = <span class="hljs-literal">true</span></span>) {
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">cutoutLoading</span> = <span class="hljs-literal">true</span>;  <span class="hljs-comment">// è°ƒç”¨äº†ï¼Œä½†...</span>
  
  <span class="hljs-comment">// ç«‹å³æ‰§è¡Œè€—æ—¶æ“ä½œï¼Œé˜»å¡ä¸»çº¿ç¨‹</span>
  <span class="hljs-keyword">const</span> img = <span class="hljs-keyword">await</span> <span class="hljs-title function_">loadImageByUrl</span>(imgUrl);  <span class="hljs-comment">// 100ms åŠ è½½å›¾ç‰‡</span>
  <span class="hljs-keyword">await</span> <span class="hljs-title class_">FTSimpleCanvasRenderInstance</span>.<span class="hljs-title function_">uploadTop</span>(imgUrl);  <span class="hljs-comment">// 80ms ä¸Šä¼ åˆ°ç”»å¸ƒ</span>
  <span class="hljs-keyword">await</span> <span class="hljs-title class_">FTSimpleCanvasRenderInstance</span>.<span class="hljs-title function_">uploadBack</span>(page.<span class="hljs-property">backgroundColor</span>);  <span class="hljs-comment">// 50ms è®¾ç½®èƒŒæ™¯</span>
  <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setCurrentPage</span>({ <span class="hljs-attr">cutOriginUrl</span>: imgUrl, <span class="hljs-attr">cropImage</span>: image, ... });  <span class="hljs-comment">// åŒæ­¥æ›´æ–°çŠ¶æ€</span>
  
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">cutoutLoading</span> = <span class="hljs-literal">false</span>;
}


</code></pre>
<h3 data-id="heading-22">âœ…Â æ­£ç¡®ç¤ºèŒƒï¼šå…ˆåé¦ˆï¼Œå†å¹²æ´»</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { nextTick } <span class="hljs-keyword">from</span> <span class="hljs-string">'src/utils'</span>;

<span class="hljs-keyword">async</span> <span class="hljs-title function_">handleLoadSimplifyCanvas</span>(<span class="hljs-params">imgUrl, id, closeLoading = <span class="hljs-literal">true</span></span>) {
  <span class="hljs-comment">// 1. åŒæ­¥æ›´æ–°çŠ¶æ€</span>
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">cutoutLoading</span> = <span class="hljs-literal">true</span>;

  <span class="hljs-comment">// 2. å…³é”®ï¼šè®©å‡ºä¸»çº¿ç¨‹ï¼Œç»™æµè§ˆå™¨æ¸²æŸ“æœºä¼š</span>
  <span class="hljs-keyword">await</span> <span class="hljs-title function_">nextTick</span>();  <span class="hljs-comment">// æµè§ˆå™¨æœ‰æœºä¼šæ¸²æŸ“ loading çŠ¶æ€</span>

  <span class="hljs-comment">// 3. ç°åœ¨æ‰å¼€å§‹æ‰§è¡Œé‡ä»»åŠ¡</span>
  <span class="hljs-keyword">const</span> img = <span class="hljs-keyword">await</span> <span class="hljs-title function_">loadImageByUrl</span>(imgUrl);
  <span class="hljs-keyword">await</span> <span class="hljs-title class_">FTSimpleCanvasRenderInstance</span>.<span class="hljs-title function_">uploadTop</span>(imgUrl);
  <span class="hljs-keyword">await</span> <span class="hljs-title class_">FTSimpleCanvasRenderInstance</span>.<span class="hljs-title function_">uploadBack</span>(page.<span class="hljs-property">backgroundColor</span>);
  
  <span class="hljs-comment">// å†æ¬¡è®©å‡ºï¼Œç¡®ä¿çŠ¶æ€æ›´æ–°èƒ½åŠæ—¶æ¸²æŸ“</span>
  <span class="hljs-keyword">await</span> <span class="hljs-title function_">nextTick</span>();
  <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setCurrentPage</span>({ <span class="hljs-attr">cutOriginUrl</span>: imgUrl, <span class="hljs-attr">cropImage</span>: image, ... });
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">cutoutLoading</span> = <span class="hljs-literal">false</span>;
}


</code></pre>
<p><strong>æ‹†åˆ†å’Œè°ƒåº¦ä»»åŠ¡ã€è®©äº‹ä»¶èƒ½å¿«é€Ÿå“åº”ã€‚</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/20b8357657954e3e947f2ec77d863bc5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rWP6KeI5ZmoQVBJ6LCD55So5bel56iL5biIX1RheWxvcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771396370&amp;x-signature=2ycukGcd%2FKvHwLg26cescNignhY%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-23">å·¥å…·å‡½æ•°ï¼šnextTickÂ å®ç°</h2>
<p>é¡¹ç›®ä¸­å·²ç»å®ç°äº†ä¼˜åŒ–çš„Â <code>nextTick</code>Â å‡½æ•°ï¼ˆ<code>src/utils/index.ts</code>ï¼‰ï¼Œé€šè¿‡è®©å‡ºä¸»çº¿ç¨‹æ§åˆ¶æƒï¼Œç¡®ä¿æµè§ˆå™¨æœ‰æœºä¼šå®Œæˆæ¸²æŸ“å’Œå“åº”ç”¨æˆ·äº¤äº’ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">/**
 * nextTick - å°†ä»»åŠ¡æ¨è¿Ÿæ‰§è¡Œï¼Œä¼˜åŒ– INP (Interaction to Next Paint)
 *
 * æ”¹è¿›ç‚¹ï¼š
 * 1. ä¼˜å…ˆä½¿ç”¨ scheduler.postTask (å¦‚æœå¯ç”¨) æ¥æ›´å¥½åœ°æ§åˆ¶ä»»åŠ¡ä¼˜å…ˆçº§
 * 2. ä½¿ç”¨ MessageChannel ç¡®ä¿ä»»åŠ¡åœ¨ä¸‹ä¸€ä¸ªäº‹ä»¶å¾ªç¯æ‰§è¡Œï¼Œä¸é˜»å¡æ¸²æŸ“
 * 3. åŒé‡ requestAnimationFrame ä½œä¸ºé™çº§æ–¹æ¡ˆï¼Œç¡®ä¿ DOM æ›´æ–°åæ‰§è¡Œ
 *
 * <span class="hljs-doctag">@param</span> callBack è¦æ‰§è¡Œçš„å›è°ƒå‡½æ•°
 * <span class="hljs-doctag">@returns</span> Promise&lt;void&gt;
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">nextTick</span>(<span class="hljs-params">callBack?: () =&gt; <span class="hljs-keyword">void</span></span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-keyword">void</span>&gt;(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> {
    <span class="hljs-comment">// ä¼˜å…ˆä½¿ç”¨ scheduler.postTask (Chrome 94+, æ›´å¥½çš„ä»»åŠ¡è°ƒåº¦)</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> (<span class="hljs-variable language_">window</span> <span class="hljs-keyword">as</span> any).<span class="hljs-property">scheduler</span> !== <span class="hljs-string">'undefined'</span> &amp;&amp; (<span class="hljs-variable language_">window</span> <span class="hljs-keyword">as</span> any).<span class="hljs-property">scheduler</span>.<span class="hljs-property">postTask</span>) {
      (<span class="hljs-variable language_">window</span> <span class="hljs-keyword">as</span> any).<span class="hljs-property">scheduler</span>.<span class="hljs-title function_">postTask</span>(<span class="hljs-function">() =&gt;</span> {
        callBack?.();
        <span class="hljs-title function_">resolve</span>();
      }, { <span class="hljs-attr">priority</span>: <span class="hljs-string">'user-blocking'</span> });
      <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-comment">// ä½¿ç”¨ MessageChannel ç¡®ä¿åœ¨ä¸‹ä¸€ä¸ªäº‹ä»¶å¾ªç¯æ‰§è¡Œï¼Œä¸é˜»å¡æ¸²æŸ“</span>
    <span class="hljs-comment">// è¿™å¯¹äº INP ä¼˜åŒ–å¾ˆé‡è¦ï¼Œå› ä¸ºå®ƒè®©æµè§ˆå™¨æœ‰æœºä¼šå¤„ç†ç”¨æˆ·äº¤äº’</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-title class_">MessageChannel</span> !== <span class="hljs-string">'undefined'</span>) {
      <span class="hljs-keyword">const</span> channel = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MessageChannel</span>();
      channel.<span class="hljs-property">port1</span>.<span class="hljs-property">onmessage</span> = <span class="hljs-function">() =&gt;</span> {
        callBack?.();
        <span class="hljs-title function_">resolve</span>();
      };
      channel.<span class="hljs-property">port2</span>.<span class="hljs-title function_">postMessage</span>(<span class="hljs-literal">null</span>);
      <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-comment">// é™çº§æ–¹æ¡ˆï¼šåŒé‡ requestAnimationFrame</span>
    <span class="hljs-comment">// ç¬¬ä¸€ä¸ª rAF ç¡®ä¿åœ¨æµè§ˆå™¨é‡ç»˜ä¹‹å‰ï¼Œç¬¬äºŒä¸ª rAF ç¡®ä¿åœ¨é‡ç»˜ä¹‹å</span>
    <span class="hljs-comment">// è¿™æ ·å¯ä»¥ç¡®ä¿ DOM æ›´æ–°å·²ç»å®Œæˆ</span>
    <span class="hljs-keyword">if</span> (requestAnimationFrame) {
      <span class="hljs-title function_">requestAnimationFrame</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-title function_">requestAnimationFrame</span>(<span class="hljs-function">() =&gt;</span> {
          callBack?.();
          <span class="hljs-title function_">resolve</span>();
        });
      });
      <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-comment">// æœ€åçš„é™çº§æ–¹æ¡ˆ</span>
    <span class="hljs-keyword">if</span> (setImmediate) {
      <span class="hljs-title function_">setImmediate</span>(<span class="hljs-function">() =&gt;</span> {
        callBack?.();
        <span class="hljs-title function_">resolve</span>();
      });
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
        callBack?.();
        <span class="hljs-title function_">resolve</span>();
      }, <span class="hljs-number">0</span>);
    }
  });
}


</code></pre>
<h3 data-id="heading-24">ä½¿ç”¨ç¤ºä¾‹</h3>
<p>ä½¿ç”¨Â <code>nextTick()</code>Â ä¸»åŠ¨è®©æ­¥ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ä½¿ç”¨é¡¹ç›®ä¸­çš„ nextTick å‡½æ•°</span>
<span class="hljs-keyword">import</span> { nextTick } <span class="hljs-keyword">from</span> <span class="hljs-string">'src/utils'</span>;

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">processHeavyCanvas</span>(<span class="hljs-params"/>) {
  <span class="hljs-title function_">doLightWork</span>();
  
  <span class="hljs-comment">// è®©æµè§ˆå™¨æœ‰æœºä¼šå¤„ç†å¾…æ¸²æŸ“çš„å¸§å’Œç”¨æˆ·äº¤äº’</span>
  <span class="hljs-keyword">await</span> <span class="hljs-title function_">nextTick</span>();
  <span class="hljs-comment">// è¿™æ ·doHeavyWorkä¼šè¢«æ‹†åˆ†æˆå•ç‹¬ä»»åŠ¡å»¶è¿Ÿæ‰§è¡Œ</span>
  <span class="hljs-title function_">doHeavyWork</span>();
}


</code></pre>
<h3 data-id="heading-25">ä¸ºä»€ä¹ˆé€‰æ‹©è¿™äº›Â APIï¼Ÿ</h3>






























<table><thead><tr><th>API</th><th>ä¼˜ç‚¹</th><th>å…¼å®¹æ€§</th></tr></thead><tbody><tr><td><code>scheduler.postTask</code></td><td>æ”¯æŒä¼˜å…ˆçº§æ§åˆ¶ï¼Œä¸“ä¸ºä»»åŠ¡è°ƒåº¦è®¾è®¡</td><td>ChromeÂ 94+</td></tr><tr><td><code>MessageChannel</code></td><td>å®ä»»åŠ¡ï¼Œç¡®ä¿åœ¨æ¸²æŸ“åæ‰§è¡Œ</td><td>å¹¿æ³›æ”¯æŒ</td></tr><tr><td>åŒé‡Â <code>rAF</code></td><td>ç¡®ä¿åœ¨ä¸‹ä¸€å¸§æ¸²æŸ“å®Œæˆåæ‰§è¡Œ</td><td>å¹¿æ³›æ”¯æŒ</td></tr><tr><td><code>setTimeout(0)</code></td><td>æœ€ç»ˆå…œåº•æ–¹æ¡ˆ</td><td>å…¨å¹³å°</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-26">å®æˆ˜æ£€æµ‹ä¸è°ƒè¯•</h2>
<h3 data-id="heading-27">ä½¿ç”¨Â ChromeÂ DevToolsÂ åˆ†æÂ INP</h3>
<p>cpuÂ 4Â -Â 6å€é™é€Ÿï¼Œæ¨¡æ‹Ÿä½æ€§èƒ½è®¾å¤‡ã€‚Â å¯¹æ¯”æœ¬åœ°å’Œçº¿ä¸Š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f1b7101b35d0435eb70f3e1f4e2c87b4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rWP6KeI5ZmoQVBJ6LCD55So5bel56iL5biIX1RheWxvcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771396370&amp;x-signature=t7A02hpLoSso1HajyRFaokKah5M%3D" alt="image.png" loading="lazy"/></p>
<p>ç‚¹ç‚¹åŠŸèƒ½ï¼Œè§‚å¯Ÿ<code>Performace</code>é¢æ¿å®æ—¶çš„INP</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f1dd8810e3714d6cac92f90cd87f4f77~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rWP6KeI5ZmoQVBJ6LCD55So5bel56iL5biIX1RheWxvcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771396370&amp;x-signature=ZN9t0qiW%2Fa%2Fb3mWsVnzfyAysNs4%3D" alt="image.png" loading="lazy"/></p>
<p>æ¯æ¬¡äº¤äº’çš„å®æ—¶INPéƒ½ä¼šè®°å½•åœ¨è¿™é‡Œã€‚
å¤šç‚¹ç‚¹è‡ªå·±çš„é¡¹ç›®ï¼Œé¡ºç€INPå˜é«˜çš„é‚£ä¸€æ­¥æ“ä½œæ‰¾é—®é¢˜å³å¯ã€‚</p>
<h3 data-id="heading-28">ä½¿ç”¨Â WebÂ VitalsÂ åº“ç›‘æ§</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { onINP } <span class="hljs-keyword">from</span> <span class="hljs-string">'web-vitals'</span>;

<span class="hljs-title function_">onINP</span>(<span class="hljs-function">(<span class="hljs-params">metric</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'INP:'</span>, metric.<span class="hljs-property">value</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Entries:'</span>, metric.<span class="hljs-property">entries</span>);
  
  <span class="hljs-comment">// ä¸ŠæŠ¥åˆ°åˆ†æå¹³å°</span>
  <span class="hljs-keyword">if</span> (metric.<span class="hljs-property">value</span> &gt; <span class="hljs-number">200</span>) {
    analytics.<span class="hljs-title function_">track</span>(<span class="hljs-string">'slow_interaction'</span>, {
      <span class="hljs-attr">value</span>: metric.<span class="hljs-property">value</span>,
      <span class="hljs-attr">entries</span>: metric.<span class="hljs-property">entries</span>,
      <span class="hljs-attr">target</span>: metric.<span class="hljs-property">entries</span>[<span class="hljs-number">0</span>]?.<span class="hljs-property">target</span>,
    });
  }
});


</code></pre>
<h3 data-id="heading-29">åˆ†æçº¿ä¸Šç”¨æˆ·çœŸå®æŒ‡æ ‡</h3>
<p>æŸ¥çœ‹çº¿ä¸ŠçœŸå®ç”¨æˆ·æŒ‡æ ‡</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fpagespeed.web.dev%2F" target="_blank" title="https://pagespeed.web.dev/" ref="nofollow noopener noreferrer">pagespeed.web.dev/</a></p>
<p>ChromeÂ ç”¨æˆ·ä½“éªŒæŠ¥å‘Š(crux)</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fcruxvis.withgoogle.com%2F" target="_blank" title="https://cruxvis.withgoogle.com/" ref="nofollow noopener noreferrer">cruxvis.withgoogle.com/</a></p>
<hr/>
<h2 data-id="heading-30">æ€»ç»“</h2>
<h3 data-id="heading-31">æ ¸å¿ƒè¦ç‚¹</h3>
<ol>
<li>
<p><strong>INPÂ æµ‹é‡ä¸‰ä¸ªé˜¶æ®µ</strong>ï¼šè¾“å…¥å»¶è¿Ÿã€äº‹ä»¶å¤„ç†ã€å‘ˆç°å»¶è¿Ÿ</p>
</li>
<li>
<p><strong>ä¼˜åŒ–ç›®æ ‡</strong>ï¼šç¡®ä¿Â 75%Â çš„äº¤äº’åœ¨Â 200msÂ å†…å®Œæˆ</p>
</li>
<li>
<p><strong>æ ¸å¿ƒç­–ç•¥</strong>ï¼šå…ˆåé¦ˆï¼Œå†å¤„ç†ï¼›æ‹†åˆ†é•¿ä»»åŠ¡ï¼›è®©å‡ºä¸»çº¿ç¨‹</p>
</li>
<li>
<p><strong>å·¥å…·æ”¯æŒ</strong>ï¼šä½¿ç”¨Â <code>nextTick</code>ã€<code>scheduler.yield()</code>ã€WebÂ Worker</p>
</li>
<li>
<p><strong>çœŸå®ç”¨æˆ·INPè§‚å¯Ÿ</strong>: cruxæŸ¥çœ‹ç”¨æˆ·çœŸå®INPå˜åŒ–ï¼ŒæŒç»­ä¼˜åŒ–ã€‚</p>
</li>
</ol>
<blockquote>
<p><strong>INPÂ ä¼˜åŒ–çš„æœ¬è´¨æ˜¯ï¼šè®©ç”¨æˆ·"æ„Ÿè§‰"äº¤äº’æ˜¯å³æ—¶å“åº”çš„ï¼Œå“ªæ€•åå°è¿˜åœ¨é»˜é»˜å¹²æ´»ã€‚</strong></p>
</blockquote>
<p><strong>å‚è€ƒèµ„æ–™</strong>ï¼š</p>
<ul>
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fweb.dev%2Finp%2F" target="_blank" title="https://web.dev/inp/" ref="nofollow noopener noreferrer">Web.devÂ -Â INP</a></p>
</li>
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.chrome.com%2Fdocs%2Fdevtools%2Fperformance%2F" target="_blank" title="https://developer.chrome.com/docs/devtools/performance/" ref="nofollow noopener noreferrer">ChromeÂ DevToolsÂ Performance</a></p>
</li>
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fweb.dev%2Fvitals%2F" target="_blank" title="https://web.dev/vitals/" ref="nofollow noopener noreferrer">WebÂ Vitals</a></p>
</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Swift å¹¶å‘ç¼–ç¨‹æ·±åº¦è§£æï¼šä» async/await åˆ°æ™ºèƒ½è°ƒåº¦]]></title>    <link>https://juejin.cn/post/7605164560711401498</link>    <guid>https://juejin.cn/post/7605164560711401498</guid>    <pubDate>2026-02-11T06:23:21.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605164560711401498" data-draft-id="7605041556657127433" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Swift å¹¶å‘ç¼–ç¨‹æ·±åº¦è§£æï¼šä» async/await åˆ°æ™ºèƒ½è°ƒåº¦"/> <meta itemprop="keywords" content="Swift"/> <meta itemprop="datePublished" content="2026-02-11T06:23:21.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="sweetä¸¶"/> <meta itemprop="url" content="https://juejin.cn/user/3227821869921646"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Swift å¹¶å‘ç¼–ç¨‹æ·±åº¦è§£æï¼šä» async/await åˆ°æ™ºèƒ½è°ƒåº¦
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3227821869921646/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    sweetä¸¶
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-11T06:23:21.000Z" title="Wed Feb 11 2026 06:23:21 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æ·±å…¥ç†è§£ Swift 5.5+ çš„ç°ä»£å¹¶å‘æ¨¡å‹ï¼ŒæŒæ¡å¦‚ä½•ç¼–å†™å®‰å…¨é«˜æ•ˆçš„å¤šçº¿ç¨‹ä»£ç </p>
</blockquote>
<hr/>
<h2 data-id="heading-0">å¼•è¨€ï¼šä¸ºä»€ä¹ˆéœ€è¦æ–°çš„å¹¶å‘æ¨¡å‹ï¼Ÿ</h2>
<p>åœ¨ä¼ ç»Ÿ iOS/macOS å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ GCDï¼ˆGrand Central Dispatchï¼‰æˆ– OperationQueue æ¥å¤„ç†å¹¶å‘ä»»åŠ¡ã€‚ç„¶è€Œï¼Œè¿™äº›æŠ€æœ¯å­˜åœ¨ä¸€äº›ç—›ç‚¹ï¼š</p>
<ol>
<li><strong>å›è°ƒåœ°ç‹±</strong>ï¼šå¤šå±‚åµŒå¥—çš„å›è°ƒéš¾ä»¥é˜…è¯»å’Œç»´æŠ¤</li>
<li><strong>æ‰‹åŠ¨å†…å­˜ç®¡ç†</strong>ï¼šå®¹æ˜“å¿˜è®° weak self å¯¼è‡´å†…å­˜æ³„æ¼</li>
<li><strong>çº¿ç¨‹çˆ†ç‚¸</strong>ï¼šè¿‡åº¦åˆ›å»ºçº¿ç¨‹æ¶ˆè€—ç³»ç»Ÿèµ„æº</li>
<li><strong>æ•°æ®ç«äº‰</strong>ï¼šå…±äº«çŠ¶æ€éœ€è¦æ‰‹åŠ¨åŠ é”ï¼Œå®¹æ˜“å‡ºé”™</li>
</ol>
<p>Swift 5.5 å¼•å…¥çš„ async/await å’Œç»“æ„åŒ–å¹¶å‘è§£å†³äº†è¿™äº›é—®é¢˜ï¼Œæä¾›äº†æ›´å®‰å…¨ã€æ›´ç®€æ´çš„å¹¶å‘ç¼–ç¨‹æ–¹å¼ï¼ŒiOS 13ä»¥ä¸Šæ˜¯æ”¯æŒçš„ã€‚</p>
<hr/>
<h2 data-id="heading-1">ç¬¬ä¸€éƒ¨åˆ†ï¼šasync/await åŸºç¡€è¯­æ³•</h2>
<h3 data-id="heading-2">1.1 å¼‚æ­¥å‡½æ•°å£°æ˜</h3>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// ä¼ ç»Ÿå›è°ƒæ–¹å¼</span>
<span class="hljs-keyword">func</span> <span class="hljs-title function_">fetchUser</span>(<span class="hljs-params">completion</span>: <span class="hljs-keyword">@escaping</span> (<span class="hljs-type">Result</span>&lt;<span class="hljs-type">User</span>, <span class="hljs-type">Error</span>&gt;) -&gt; <span class="hljs-type">Void</span>)

<span class="hljs-comment">// å¼‚æ­¥å‡½æ•°æ–¹å¼</span>
<span class="hljs-keyword">func</span> <span class="hljs-title function_">fetchUser</span>() <span class="hljs-keyword">async</span> <span class="hljs-keyword">throws</span> -&gt; <span class="hljs-type">User</span>
</code></pre>
<h3 data-id="heading-3">1.2 å¼‚æ­¥å‡½æ•°è°ƒç”¨</h3>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// ä½¿ç”¨ await è°ƒç”¨å¼‚æ­¥å‡½æ•°</span>
<span class="hljs-keyword">do</span> {
    <span class="hljs-keyword">let</span> user <span class="hljs-operator">=</span> <span class="hljs-keyword">try</span> <span class="hljs-keyword">await</span> fetchUser()
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"ç”¨æˆ·: <span class="hljs-subst">\(user.name)</span>"</span>)
} <span class="hljs-keyword">catch</span> {
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"é”™è¯¯: <span class="hljs-subst">\(error)</span>"</span>)
}
</code></pre>
<hr/>
<h2 data-id="heading-4">ç¬¬äºŒéƒ¨åˆ†ï¼šasync let ä¸ç»“æ„åŒ–å¹¶å‘</h2>
<h3 data-id="heading-5">2.1 å¹¶å‘å¯åŠ¨å¤šä¸ªä»»åŠ¡</h3>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// åŒæ—¶å¯åŠ¨å¤šä¸ªå¼‚æ­¥ä»»åŠ¡</span>
<span class="hljs-keyword">func</span> <span class="hljs-title function_">loadDashboard</span>() <span class="hljs-keyword">async</span> <span class="hljs-keyword">throws</span> -&gt; <span class="hljs-type">Dashboard</span> {
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">let</span> user <span class="hljs-operator">=</span> fetchUser()          <span class="hljs-comment">// ç«‹å³å¼€å§‹</span>
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">let</span> orders <span class="hljs-operator">=</span> fetchOrders()      <span class="hljs-comment">// ç«‹å³å¼€å§‹</span>
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">let</span> messages <span class="hljs-operator">=</span> fetchMessages()  <span class="hljs-comment">// ç«‹å³å¼€å§‹</span>
    
    <span class="hljs-comment">// ç­‰å¾…æ‰€æœ‰ä»»åŠ¡å®Œæˆ</span>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">try</span> <span class="hljs-keyword">await</span> <span class="hljs-type">Dashboard</span>(
        user: user,
        orders: orders,
        messages: messages
    )
}
</code></pre>
<h3 data-id="heading-6">2.2 ä¸é¡ºåºæ‰§è¡Œçš„å¯¹æ¯”</h3>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// å¹¶å‘æ‰§è¡Œï¼ˆæ€»è€—æ—¶ â‰ˆ æœ€æ…¢çš„ä»»åŠ¡ï¼‰</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">let</span> a <span class="hljs-operator">=</span> taskA()  <span class="hljs-comment">// 0-1ç§’</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">let</span> b <span class="hljs-operator">=</span> taskB()  <span class="hljs-comment">// 0-2ç§’</span>
<span class="hljs-keyword">let</span> results <span class="hljs-operator">=</span> <span class="hljs-keyword">await</span> (a, b)  <span class="hljs-comment">// æ€»è€—æ—¶: 2ç§’</span>

<span class="hljs-comment">// é¡ºåºæ‰§è¡Œï¼ˆæ€»è€—æ—¶ = æ‰€æœ‰ä»»åŠ¡æ—¶é—´ä¹‹å’Œï¼‰</span>
<span class="hljs-keyword">let</span> a <span class="hljs-operator">=</span> <span class="hljs-keyword">await</span> taskA()  <span class="hljs-comment">// 0-1ç§’</span>
<span class="hljs-keyword">let</span> b <span class="hljs-operator">=</span> <span class="hljs-keyword">await</span> taskB()  <span class="hljs-comment">// 1-3ç§’ï¼ˆç­‰Aå®Œæˆåæ‰å¼€å§‹ï¼‰</span>
<span class="hljs-comment">// æ€»è€—æ—¶: 3ç§’</span>
</code></pre>
<h3 data-id="heading-7">2.3 é‡è¦æ¦‚å¿µæ¾„æ¸…</h3>
<p><strong>Q: <code>async let user = fetchUser()</code> ç«‹å³è¿”å›ä»€ä¹ˆï¼Ÿ</strong>
A: å®ƒä¸ç«‹å³è¿”å›æ•°æ®ï¼Œè€Œæ˜¯è¿”å›ä¸€ä¸ª<strong>å¼‚æ­¥ä»»åŠ¡å¥æŸ„</strong>ã€‚å®é™…æ•°æ®åœ¨ <code>await</code> æ—¶è·å–ã€‚</p>
<p><strong>Q: å¤šä¸ª <code>async let</code> ç›¸å½“äº GCD çš„å¼‚æ­¥ä»»åŠ¡å—ï¼Ÿ</strong>
A: ç›¸ä¼¼ä½†æœ‰é‡è¦åŒºåˆ«ã€‚<code>async let</code> æ˜¯ç»“æ„åŒ–å¹¶å‘çš„ä¸€éƒ¨åˆ†ï¼Œä»»åŠ¡ç”Ÿå‘½å‘¨æœŸè‡ªåŠ¨ç®¡ç†ï¼Œæ”¯æŒå–æ¶ˆå’Œé”™è¯¯ä¼ æ’­ã€‚</p>
<hr/>
<h2 data-id="heading-8">ç¬¬ä¸‰éƒ¨åˆ†ï¼šæ•°æ®å®‰å…¨ä¸çº¿ç¨‹è°ƒåº¦</h2>
<h3 data-id="heading-9">3.1 æ•°æ®ç«äº‰çš„è§£å†³æ–¹æ¡ˆ</h3>
<h4 data-id="heading-10">æ–¹æ¡ˆä¸€ï¼šä½¿ç”¨ Actorï¼ˆé“¶è¡ŒæŸœå°æ¨¡å‹ï¼‰</h4>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">actor</span> <span class="hljs-title class_">UserCache</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> storage: [<span class="hljs-type">String</span>: <span class="hljs-type">User</span>] <span class="hljs-operator">=</span> [:]
    
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">getUser</span>(<span class="hljs-params">id</span>: <span class="hljs-type">String</span>) -&gt; <span class="hljs-type">User</span>? {
        <span class="hljs-keyword">return</span> storage[id]
    }
    
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">setUser</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">user</span>: <span class="hljs-type">User</span>, <span class="hljs-params">for</span> <span class="hljs-params">id</span>: <span class="hljs-type">String</span>) {
        storage[id] <span class="hljs-operator">=</span> user
    }
}

<span class="hljs-comment">// ä½¿ç”¨æ—¶è‡ªåŠ¨åºåˆ—åŒ–è®¿é—®</span>
<span class="hljs-keyword">let</span> cache <span class="hljs-operator">=</span> <span class="hljs-type">UserCache</span>()
<span class="hljs-keyword">let</span> user <span class="hljs-operator">=</span> <span class="hljs-keyword">await</span> cache.getUser(id: <span class="hljs-string">"123"</span>)  <span class="hljs-comment">// è‡ªåŠ¨æ’é˜Ÿç­‰å¾…</span>
</code></pre>
<p><strong>åŸç†</strong>ï¼šç¼–è¯‘å™¨å¼ºåˆ¶åŒä¸€æ—¶é—´åªæœ‰ä¸€ä¸ªä»»åŠ¡èƒ½è®¿é—® Actor å†…éƒ¨çŠ¶æ€ï¼Œé€šè¿‡æ¶ˆæ¯ä¼ é€’æ¨¡å‹ç¡®ä¿å®‰å…¨ã€‚</p>
<h4 data-id="heading-11">æ–¹æ¡ˆäºŒï¼šä½¿ç”¨å€¼è¯­ä¹‰ï¼ˆå‘å¤å°ä»¶æ¨¡å‹ï¼‰</h4>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">UserProfile</span> {
    <span class="hljs-keyword">let</span> user: <span class="hljs-type">User</span>
    <span class="hljs-keyword">var</span> settings: <span class="hljs-type">Settings</span>
    <span class="hljs-comment">// ç»“æ„ä½“æ˜¯å€¼ç±»å‹ï¼Œå¤åˆ¶å®‰å…¨</span>
}

<span class="hljs-keyword">func</span> <span class="hljs-title function_">processProfile</span>(<span class="hljs-params">profile</span>: <span class="hljs-type">UserProfile</span>) <span class="hljs-keyword">async</span> {
    <span class="hljs-comment">// æ¯ä¸ªä»»åŠ¡è·å–ç‹¬ç«‹çš„å‰¯æœ¬</span>
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">let</span> task1 <span class="hljs-operator">=</span> {
        <span class="hljs-keyword">var</span> copy <span class="hljs-operator">=</span> profile
        copy.settings.theme <span class="hljs-operator">=</span> .dark
        <span class="hljs-keyword">return</span> copy
    }()
    
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">let</span> task2 <span class="hljs-operator">=</span> {
        <span class="hljs-keyword">var</span> copy <span class="hljs-operator">=</span> profile
        copy.settings.fontSize <span class="hljs-operator">=</span> <span class="hljs-number">16</span>
        <span class="hljs-keyword">return</span> copy
    }()
    
    <span class="hljs-keyword">let</span> results <span class="hljs-operator">=</span> <span class="hljs-keyword">await</span> (task1, task2)  <span class="hljs-comment">// ç‹¬ç«‹ä¿®æ”¹ï¼Œäº’ä¸å½±å“</span>
}
</code></pre>
<p><strong>åŸç†</strong>ï¼šé€šè¿‡å¤åˆ¶è€Œéå…±äº«ï¼Œä»æ ¹æœ¬ä¸Šæ¶ˆé™¤æ•°æ®ç«äº‰çš„å¯èƒ½æ€§ã€‚</p>
<h3 data-id="heading-12">3.2 æ™ºèƒ½çº¿ç¨‹è°ƒåº¦</h3>
<p><strong>Q: <code>async let</code> ä»»åŠ¡åœ¨å“ªä¸ªçº¿ç¨‹æ‰§è¡Œï¼Ÿ</strong>
A: Swift å¹¶å‘è¿è¡Œæ—¶<strong>æ™ºèƒ½å†³å®š</strong>ï¼ŒåŸºäºä»¥ä¸‹å› ç´ ï¼š</p>
<ol>
<li><strong>å½“å‰çº¿ç¨‹è´Ÿè½½</strong> - å¤ªå¿™å°±è°ƒåº¦åˆ°å…¶ä»–çº¿ç¨‹</li>
<li><strong>ä»»åŠ¡ç±»å‹</strong> - I/Oå¯†é›†å‹ vs CPUå¯†é›†å‹</li>
<li><strong>ä¼˜å…ˆçº§</strong> - é«˜ä¼˜å…ˆçº§ä»»åŠ¡å¯èƒ½æ›´å¿«æ‰§è¡Œ</li>
<li><strong>ç¡¬ä»¶èµ„æº</strong> - CPUæ ¸å¿ƒæ•°ã€å½“å‰è´Ÿè½½</li>
<li><strong>æ‰§è¡Œå™¨çº¦æŸ</strong> - å¦‚ <code>@MainActor</code> å¼ºåˆ¶ä¸»çº¿ç¨‹</li>
</ol>
<p><strong>æ™ºèƒ½è°ƒåº¦çš„å…·ä½“è¡¨ç°ï¼š</strong></p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-meta">@MainActor</span>
<span class="hljs-keyword">func</span> <span class="hljs-title function_">updateUIWithData</span>() <span class="hljs-keyword">async</span> {
    <span class="hljs-comment">// ä»ä¸»çº¿ç¨‹è°ƒç”¨ï¼Œä½†ä¼šè‡ªåŠ¨ä¼˜åŒ–</span>
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">let</span> data <span class="hljs-operator">=</span> fetchHeavyData()  <span class="hljs-comment">// è¿è¡Œæ—¶ï¼šè¿™ä¸ªä¼šé˜»å¡ â†’ è°ƒåº¦åˆ°åå°çº¿ç¨‹</span>
    
    <span class="hljs-keyword">let</span> processed <span class="hljs-operator">=</span> <span class="hljs-keyword">await</span> process(data)  <span class="hljs-comment">// å¯èƒ½åœ¨åå°çº¿ç¨‹ç»§ç»­å¤„ç†</span>
    
    <span class="hljs-comment">// æ›´æ–°UIæ—¶è‡ªåŠ¨å›åˆ°ä¸»çº¿ç¨‹</span>
    <span class="hljs-keyword">self</span>.label.text <span class="hljs-operator">=</span> processed.title
}
</code></pre>
<h3 data-id="heading-13">3.3 ä»€ä¹ˆæ—¶å€™éœ€è¦æ˜¾å¼æ§åˆ¶çº¿ç¨‹ï¼Ÿ</h3>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// 1. UIæ“ä½œå¿…é¡»ä¸»çº¿ç¨‹</span>
<span class="hljs-meta">@MainActor</span>
<span class="hljs-keyword">func</span> <span class="hljs-title function_">updateUI</span>() {
    <span class="hljs-comment">// ç¼–è¯‘æ—¶ç¡®ä¿åœ¨ä¸»çº¿ç¨‹</span>
}

<span class="hljs-comment">// 2. CPUå¯†é›†å‹é•¿æ—¶é—´è®¡ç®—</span>
<span class="hljs-keyword">func</span> <span class="hljs-title function_">processImage</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">image</span>: <span class="hljs-type">UIImage</span>) <span class="hljs-keyword">async</span> -&gt; <span class="hljs-type">UIImage</span> {
    <span class="hljs-comment">// æ˜ç¡®æŒ‡å®šåœ¨ç‹¬ç«‹çº¿ç¨‹æ‰§è¡Œ</span>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> <span class="hljs-type">Task</span>.detached {
        <span class="hljs-keyword">return</span> image.applyFilters()  <span class="hljs-comment">// è€—æ—¶çš„å›¾åƒå¤„ç†</span>
    }.value
}

<span class="hljs-comment">// 3. ä¸åº”è¯¥å¹²é¢„çš„æ¡ˆä¾‹</span>
<span class="hljs-comment">// âŒ ä¸è¦è¿™æ ·ï¼šç ´åäº†æ™ºèƒ½è°ƒåº¦</span>
<span class="hljs-type">Task</span> {
    <span class="hljs-type">DispatchQueue</span>.global().async {
        <span class="hljs-keyword">await</span> someAsyncWork()
    }
}

<span class="hljs-comment">// âœ… åº”è¯¥è¿™æ ·ï¼šä¿¡ä»»è¿è¡Œæ—¶</span>
<span class="hljs-type">Task</span> {
    <span class="hljs-keyword">await</span> someAsyncWork()  <span class="hljs-comment">// è®©ç³»ç»Ÿå†³å®šæœ€ä½³æ‰§è¡Œæ–¹å¼</span>
}
</code></pre>
<hr/>
<h2 data-id="heading-14">ç¬¬å››éƒ¨åˆ†ï¼šå®é™…åº”ç”¨æ¨¡å¼</h2>
<h3 data-id="heading-15">4.1 ç½‘ç»œè¯·æ±‚ç»„åˆ</h3>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">class</span> <span class="hljs-title class_">UserService</span> {
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">loadFullProfile</span>(<span class="hljs-params">userId</span>: <span class="hljs-type">String</span>) <span class="hljs-keyword">async</span> <span class="hljs-keyword">throws</span> -&gt; <span class="hljs-type">FullProfile</span> {
        <span class="hljs-comment">// å¹¶å‘è·å–æ‰€æœ‰æ•°æ®</span>
        <span class="hljs-keyword">async</span> <span class="hljs-keyword">let</span> userInfo <span class="hljs-operator">=</span> fetchUserInfo(userId)
        <span class="hljs-keyword">async</span> <span class="hljs-keyword">let</span> posts <span class="hljs-operator">=</span> fetchUserPosts(userId)
        <span class="hljs-keyword">async</span> <span class="hljs-keyword">let</span> friends <span class="hljs-operator">=</span> fetchUserFriends(userId)
        <span class="hljs-keyword">async</span> <span class="hljs-keyword">let</span> preferences <span class="hljs-operator">=</span> fetchUserPreferences(userId)
        
        <span class="hljs-comment">// ç­‰å¾…æ‰€æœ‰ç»“æœ</span>
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">try</span> <span class="hljs-keyword">await</span> <span class="hljs-type">FullProfile</span>(
            info: userInfo,
            posts: posts,
            friends: friends,
            preferences: preferences
        )
    }
    
    <span class="hljs-comment">// å¯¹æ¯”ä¼ ç»Ÿå›è°ƒæ–¹å¼</span>
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">loadFullProfileOld</span>(<span class="hljs-params">userId</span>: <span class="hljs-type">String</span>, 
                           <span class="hljs-params">completion</span>: <span class="hljs-keyword">@escaping</span> (<span class="hljs-type">Result</span>&lt;<span class="hljs-type">FullProfile</span>, <span class="hljs-type">Error</span>&gt;) -&gt; <span class="hljs-type">Void</span>) {
        fetchUserInfo(userId) { result1 <span class="hljs-keyword">in</span>
            <span class="hljs-keyword">switch</span> result1 {
            <span class="hljs-keyword">case</span> .success(<span class="hljs-keyword">let</span> userInfo):
                <span class="hljs-keyword">self</span>.fetchUserPosts(userId) { result2 <span class="hljs-keyword">in</span>
                    <span class="hljs-keyword">switch</span> result2 {
                    <span class="hljs-keyword">case</span> .success(<span class="hljs-keyword">let</span> posts):
                        <span class="hljs-comment">// æ›´å¤šåµŒå¥—...</span>
                    <span class="hljs-keyword">case</span> .failure(<span class="hljs-keyword">let</span> error):
                        completion(.failure(error))
                    }
                }
            <span class="hljs-keyword">case</span> .failure(<span class="hljs-keyword">let</span> error):
                completion(.failure(error))
            }
        }
    }
}
</code></pre>
<h3 data-id="heading-16">4.2 é™åˆ¶å¹¶å‘æ•°é‡</h3>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">func</span> <span class="hljs-title function_">downloadMultipleFiles</span>(<span class="hljs-params">urls</span>: [<span class="hljs-type">URL</span>], <span class="hljs-params">maxConcurrent</span>: <span class="hljs-type">Int</span> <span class="hljs-operator">=</span> <span class="hljs-number">4</span>) <span class="hljs-keyword">async</span> <span class="hljs-keyword">throws</span> -&gt; [<span class="hljs-type">Data</span>] {
    <span class="hljs-comment">// ä½¿ç”¨ TaskGroup æ§åˆ¶å¹¶å‘æ•°</span>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">try</span> <span class="hljs-keyword">await</span> withThrowingTaskGroup(of: <span class="hljs-type">Data</span>.<span class="hljs-keyword">self</span>) { group <span class="hljs-keyword">in</span>
        <span class="hljs-keyword">var</span> results: [<span class="hljs-type">Data</span>] <span class="hljs-operator">=</span> []
        results.reserveCapacity(urls.count)
        
        <span class="hljs-comment">// åˆ†æ‰¹å¤„ç†ï¼Œé™åˆ¶å¹¶å‘æ•°</span>
        <span class="hljs-keyword">for</span> index <span class="hljs-keyword">in</span> urls.indices {
            <span class="hljs-keyword">if</span> group.taskCount <span class="hljs-operator">&gt;=</span> maxConcurrent {
                <span class="hljs-comment">// ç­‰å¾…ä¸€ä¸ªä»»åŠ¡å®Œæˆå†æ·»åŠ æ–°çš„</span>
                <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> result <span class="hljs-operator">=</span> <span class="hljs-keyword">try</span> <span class="hljs-keyword">await</span> group.next() {
                    results.append(result)
                }
            }
            
            group.addTask {
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">try</span> <span class="hljs-keyword">await</span> downloadFile(from: urls[index])
            }
        }
        
        <span class="hljs-comment">// æ”¶é›†å‰©ä½™ç»“æœ</span>
        <span class="hljs-keyword">for</span> <span class="hljs-keyword">try</span> <span class="hljs-keyword">await</span> result <span class="hljs-keyword">in</span> group {
            results.append(result)
        }
        
        <span class="hljs-keyword">return</span> results
    }
}
</code></pre>
<hr/>
<h2 data-id="heading-17">ç¬¬äº”éƒ¨åˆ†ï¼šä¸ç³»ç»Ÿæ¡†æ¶çš„é›†æˆ</h2>
<h3 data-id="heading-18">5.1 iOS 13+ çš„ç³»ç»Ÿ API æ›´æ–°</h3>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// iOS 13+ æä¾›äº†å¼‚æ­¥ç‰ˆæœ¬çš„ openURL</span>
<span class="hljs-keyword">func</span> <span class="hljs-title function_">openSettings</span>() <span class="hljs-keyword">async</span> -&gt; <span class="hljs-type">Bool</span> {
    <span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> url <span class="hljs-operator">=</span> <span class="hljs-type">URL</span>(string: <span class="hljs-type">UIApplication</span>.openSettingsURLString) <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
    }
    
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> <span class="hljs-type">UIApplication</span>.shared.open(url)
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-type">Task</span> {
    <span class="hljs-keyword">let</span> success <span class="hljs-operator">=</span> <span class="hljs-keyword">await</span> openSettings()
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"è®¾ç½®åº”ç”¨æ‰“å¼€<span class="hljs-subst">\(success <span class="hljs-operator">?</span> <span class="hljs-string">"æˆåŠŸ"</span> : <span class="hljs-string">"å¤±è´¥"</span>)</span>"</span>)
}

<span class="hljs-comment">// ä¸ºä»€ä¹ˆä½¿ç”¨Taskï¼Ÿ</span>
<span class="hljs-comment">// âŒ é”™è¯¯ï¼šä¸èƒ½åœ¨åŒæ­¥å‡½æ•°ä¸­ç›´æ¥ä½¿ç”¨ await</span>
<span class="hljs-keyword">func</span> <span class="hljs-title function_">buttonTapped</span>() {
    <span class="hljs-keyword">let</span> success <span class="hljs-operator">=</span> <span class="hljs-keyword">await</span> openSettings()  <span class="hljs-comment">// ç¼–è¯‘é”™è¯¯ï¼</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"ç»“æœ: <span class="hljs-subst">\(success)</span>"</span>)
}

<span class="hljs-comment">// âœ… æ­£ç¡®ï¼šéœ€è¦ Task åŒ…è£…</span>
<span class="hljs-keyword">func</span> <span class="hljs-title function_">buttonTapped</span>() {
    <span class="hljs-type">Task</span> {  <span class="hljs-comment">// åˆ›å»ºå¼‚æ­¥æ‰§è¡Œç¯å¢ƒ</span>
        <span class="hljs-keyword">let</span> success <span class="hljs-operator">=</span> <span class="hljs-keyword">await</span> openSettings()
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"ç»“æœ: <span class="hljs-subst">\(success)</span>"</span>)
    }
}
</code></pre>
<h3 data-id="heading-19">5.2 é€‚é…æ—§ç‰ˆæœ¬ç³»ç»Ÿ</h3>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// ä¸º iOS 13+ æä¾›å…¼å®¹æ–¹æ¡ˆ</span>
<span class="hljs-keyword">func</span> <span class="hljs-title function_">openURL</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">url</span>: <span class="hljs-type">URL</span>) <span class="hljs-keyword">async</span> -&gt; <span class="hljs-type">Bool</span> {
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">#available</span>(<span class="hljs-keyword">iOS</span> <span class="hljs-number">13.0</span>, <span class="hljs-operator">*</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> <span class="hljs-type">UIApplication</span>.shared.open(url)
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-comment">// ä½¿ç”¨ continuation æ¡¥æ¥åˆ° async/await</span>
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> withCheckedContinuation { continuation <span class="hljs-keyword">in</span>
            <span class="hljs-type">UIApplication</span>.shared.open(url) { success <span class="hljs-keyword">in</span>
                continuation.resume(returning: success)
            }
        }
    }
}
</code></pre>
<hr/>
<h2 data-id="heading-20">ç¬¬å…­éƒ¨åˆ†ï¼šæœ€ä½³å®è·µæ€»ç»“</h2>
<h3 data-id="heading-21">6.1 ä»£ç ç»„ç»‡åŸåˆ™</h3>
<ol>
<li><strong>ä¼˜å…ˆä½¿ç”¨ async/await</strong> æ›¿ä»£å›è°ƒ</li>
<li><strong>åˆç†ä½¿ç”¨ async let</strong> è¿›è¡Œå¹¶å‘ï¼Œä½†æ³¨æ„æ•°é‡æ§åˆ¶</li>
<li><strong>ä½¿ç”¨ Actor ä¿æŠ¤å…±äº«çŠ¶æ€</strong>ï¼Œé¿å…æ‰‹åŠ¨é”</li>
<li><strong>å°½é‡ä½¿ç”¨å€¼ç±»å‹</strong>ï¼Œå‡å°‘å…±äº«å¯å˜çŠ¶æ€</li>
</ol>
<h3 data-id="heading-22">6.2 æ¶æ„è®¾è®¡å»ºè®®</h3>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// æ¨èçš„å±‚æ¬¡ç»“æ„ï¼š</span>
<span class="hljs-comment">// UIå±‚ (@MainActor) - å¤„ç†ç”¨æˆ·äº¤äº’å’Œç•Œé¢æ›´æ–°</span>
<span class="hljs-comment">// ä¸šåŠ¡å±‚ (æ··åˆ) - åè°ƒæ•°æ®æµï¼Œå¤„ç†ä¸šåŠ¡é€»è¾‘</span>
<span class="hljs-comment">// æ•°æ®å±‚ (async/await) - ç½‘ç»œè¯·æ±‚ã€æ•°æ®åº“æ“ä½œ</span>
<span class="hljs-comment">// å·¥å…·å±‚ (å€¼ç±»å‹) - çº¯å‡½æ•°è®¡ç®—ã€æ•°æ®å¤„ç†</span>

<span class="hljs-meta">@MainActor</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ViewController</span>: <span class="hljs-title class_">UIViewController</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">let</span> viewModel: <span class="hljs-type">UserViewModel</span>
    
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">loadData</span>() <span class="hljs-keyword">async</span> {
        <span class="hljs-keyword">await</span> viewModel.loadUserData()
        updateUI()
    }
}

<span class="hljs-keyword">actor</span> <span class="hljs-title class_">UserViewModel</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">let</span> repository: <span class="hljs-type">UserRepository</span>
    
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">loadUserData</span>() <span class="hljs-keyword">async</span> {
        <span class="hljs-keyword">let</span> user <span class="hljs-operator">=</span> <span class="hljs-keyword">await</span> repository.fetchUser()
        <span class="hljs-comment">// å¤„ç†ä¸šåŠ¡é€»è¾‘</span>
    }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">UserRepository</span> {
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">fetchUser</span>() <span class="hljs-keyword">async</span> <span class="hljs-keyword">throws</span> -&gt; <span class="hljs-type">User</span> {
        <span class="hljs-comment">// æ•°æ®å±‚æ“ä½œ</span>
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">try</span> <span class="hljs-keyword">await</span> apiClient.fetchUser()
    }
}
</code></pre>
<h2 data-id="heading-23">ç¬¬ä¸ƒéƒ¨åˆ†ï¼šå†…éƒ¨åŸç†æœºåˆ¶</h2>
<p>Swiftçš„async/awaitåŸºäºåç¨‹å®ç°ï¼š
æŠ€æœ¯å…³ç³»ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// 1ä¸ªçº¿ç¨‹ä¸Šå¯ä»¥è¿è¡Œå¤šä¸ªåç¨‹</span>
<span class="hljs-title class_">Thread</span> <span class="hljs-attr">A</span>: [åç¨‹<span class="hljs-number">1</span>è¿è¡Œ] â†’ [åç¨‹<span class="hljs-number">2</span>è¿è¡Œ] â†’ [åç¨‹<span class="hljs-number">1</span>æ¢å¤] â†’ [åç¨‹<span class="hljs-number">3</span>è¿è¡Œ]
                â†‘           â†‘           â†‘           â†‘
           é‡åˆ°<span class="hljs-keyword">await</span>æŒ‚èµ· é‡åˆ°<span class="hljs-keyword">await</span>æŒ‚èµ· ç»“æœè¿”å›æ¢å¤ é‡åˆ°<span class="hljs-keyword">await</span>æŒ‚èµ·

<span class="hljs-comment">// åç¨‹åœ¨æŒ‚èµ·æ—¶é‡Šæ”¾çº¿ç¨‹ï¼Œè®©å…¶ä»–åç¨‹ä½¿ç”¨</span>

<span class="hljs-comment">// ä¼ ç»Ÿçº¿ç¨‹ vs åç¨‹</span>

<span class="hljs-comment">// çº¿ç¨‹ï¼šæ“ä½œç³»ç»Ÿè°ƒåº¦ï¼Œä¸Šä¸‹æ–‡åˆ‡æ¢æˆæœ¬é«˜</span>
<span class="hljs-title class_">Thread</span> <span class="hljs-number">1</span>: [è¿è¡Œ] â†’ [é˜»å¡ç­‰å¾…I/O] â†’ [è¿è¡Œ]
<span class="hljs-title class_">Thread</span> <span class="hljs-number">2</span>: [ç­‰å¾…] â†’ [è¿è¡Œ] â†’ [ç­‰å¾…]

<span class="hljs-comment">// åç¨‹ï¼šç”¨æˆ·æ€è°ƒåº¦ï¼Œè½»é‡çº§</span>
åç¨‹ <span class="hljs-attr">A</span>: [è¿è¡Œ] â†’ [æŒ‚èµ·] â†’ [è¿è¡Œ]
åç¨‹ <span class="hljs-attr">B</span>:     [è¿è¡Œ] â†’ [æŒ‚èµ·]
<span class="hljs-comment">// åœ¨åŒä¸€çº¿ç¨‹ä¸Šäº¤æ›¿æ‰§è¡Œï¼Œæ²¡æœ‰çº¿ç¨‹åˆ‡æ¢å¼€é”€</span>
</code></pre>
<p>ç»“åˆå®é™…ä»£ç è¯´æ˜ï¼š</p>
<pre><code class="hljs language-Swift" lang="Swift"><span class="hljs-comment">// è§„åˆ™1ï¼šä¸€ä¸ªåç¨‹å¿…é¡»åœ¨ä¸€ä¸ªçº¿ç¨‹ä¸Šè¿è¡Œ</span>
<span class="hljs-comment">// è§„åˆ™2ï¼šåç¨‹åªèƒ½åœ¨ç‰¹å®šç‚¹æŒ‚èµ·ï¼ˆawaitå¤„ï¼‰</span>
<span class="hljs-comment">// è§„åˆ™3ï¼šæŒ‚èµ·çš„åç¨‹ä¸å ç”¨çº¿ç¨‹</span>

<span class="hljs-comment">// ç¤ºä¾‹ï¼š</span>
<span class="hljs-keyword">func</span> <span class="hljs-title function_">fetchMultipleResources</span>() <span class="hljs-keyword">async</span> {
    <span class="hljs-comment">// å¼€å§‹ï¼šåœ¨ä¸»çº¿ç¨‹è¿è¡Œï¼ˆå¦‚æœä»@MainActorè°ƒç”¨ï¼‰</span>
    
    <span class="hljs-keyword">let</span> data1 <span class="hljs-operator">=</span> <span class="hljs-keyword">await</span> fetchData()  <span class="hljs-comment">// æŒ‚èµ·ç‚¹1</span>
    <span class="hljs-comment">// æŒ‚èµ·ï¼šé‡Šæ”¾ä¸»çº¿ç¨‹ï¼Œå…¶ä»–åç¨‹å¯ç”¨</span>
    
    <span class="hljs-comment">// æ¢å¤ï¼šå¯èƒ½åœ¨ä»»æ„çº¿ç¨‹ï¼ˆä¸ä¸€å®šæ˜¯ä¸»çº¿ç¨‹ï¼‰</span>
    process(data1)  <span class="hljs-comment">// åœ¨æŸä¸ªåå°çº¿ç¨‹æ‰§è¡Œ</span>
    
    <span class="hljs-keyword">let</span> data2 <span class="hljs-operator">=</span> <span class="hljs-keyword">await</span> fetchData()  <span class="hljs-comment">// æŒ‚èµ·ç‚¹2</span>
    <span class="hljs-comment">// å†æ¬¡æŒ‚èµ·...</span>
    
    <span class="hljs-comment">// æœ€åå¦‚æœéœ€è¦æ›´æ–°UIï¼Œè¦ç¡®ä¿åœ¨ä¸»çº¿ç¨‹</span>
    <span class="hljs-keyword">await</span> <span class="hljs-type">MainActor</span>.run {
        updateUI(data1, data2)
    }
}
</code></pre>
<h2 data-id="heading-24">ç»“è¯­</h2>
<p>Swift çš„ç°ä»£å¹¶å‘æ¨¡å‹ä»£è¡¨äº†å¹¶å‘ç¼–ç¨‹çš„èŒƒå¼è½¬å˜ï¼š</p>
<ol>
<li><strong>ä»æ‰‹åŠ¨è°ƒåº¦åˆ°æ™ºèƒ½è°ƒåº¦</strong> - ä¿¡ä»»è¿è¡Œæ—¶åšå‡ºæœ€ä¼˜å†³ç­–</li>
<li><strong>ä»å›è°ƒåœ°ç‹±åˆ°çº¿æ€§ä»£ç </strong> - ä½¿ç”¨ async/await ç®€åŒ–å¼‚æ­¥æµç¨‹</li>
<li><strong>ä»å®¹æ˜“å‡ºé”™åˆ°å†…å­˜å®‰å…¨</strong> - é€šè¿‡ Actor å’Œå€¼è¯­ä¹‰é¿å…æ•°æ®ç«äº‰</li>
<li><strong>ä»å¤æ‚ç®¡ç†åˆ°ç»“æ„åŒ–</strong> - è‡ªåŠ¨å¤„ç†ä»»åŠ¡ç”Ÿå‘½å‘¨æœŸå’Œå–æ¶ˆ</li>
</ol>
<p>è™½ç„¶å­¦ä¹ æ›²çº¿æ¯” GCD æ›´é™¡å³­ï¼Œä½†ä¸€æ—¦æŒæ¡ï¼Œä½ å°†èƒ½ç¼–å†™å‡ºæ›´å®‰å…¨ã€æ›´ç®€æ´ã€æ›´é«˜æ•ˆçš„å¹¶å‘ä»£ç ã€‚</p>
<hr/>
<p><strong>è¿›ä¸€æ­¥å­¦ä¹ èµ„æºï¼š</strong></p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.swift.org%2Fswift-book%2FLanguageGuide%2FConcurrency.html" target="_blank" title="https://docs.swift.org/swift-book/LanguageGuide/Concurrency.html" ref="nofollow noopener noreferrer">Swift å®˜æ–¹å¹¶å‘æŒ‡å—</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.apple.com%2Fvideos%2Fplay%2Fwwdc2021%2F10132%2F" target="_blank" title="https://developer.apple.com/videos/play/wwdc2021/10132/" ref="nofollow noopener noreferrer">Apple çš„ Swift å¹¶å‘è§†é¢‘ç³»åˆ—</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fapple%2Fswift-evolution%2Fblob%2Fmain%2Fproposals%2F0296-async-await.md" target="_blank" title="https://github.com/apple/swift-evolution/blob/main/proposals/0296-async-await.md" ref="nofollow noopener noreferrer">Swift å¹¶å‘è®¾è®¡æ¨¡å¼</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[AgentTeams ä¸ Subagentsï¼šå¤šæ™ºèƒ½ä½“ç³»ç»Ÿçš„æœ€ä½³å®è·µ]]></title>    <link>https://juejin.cn/post/7605164560711073818</link>    <guid>https://juejin.cn/post/7605164560711073818</guid>    <pubDate>2026-02-11T05:47:40.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605164560711073818" data-draft-id="7605164560711024666" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="AgentTeams ä¸ Subagentsï¼šå¤šæ™ºèƒ½ä½“ç³»ç»Ÿçš„æœ€ä½³å®è·µ"/> <meta itemprop="keywords" content="AIç¼–ç¨‹,Claude"/> <meta itemprop="datePublished" content="2026-02-11T05:47:40.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°ç¢—ç»†é¢"/> <meta itemprop="url" content="https://juejin.cn/user/1618104611770958"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            AgentTeams ä¸ Subagentsï¼šå¤šæ™ºèƒ½ä½“ç³»ç»Ÿçš„æœ€ä½³å®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1618104611770958/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°ç¢—ç»†é¢
  </span> <!----> <!----> <div class="vip-level" data-v-cd7d0a50="" data-v-292f6e48=""><span class="tooltip" data-v-cd7d0a50=""><div class="byte-tooltip byte-tooltip--dark" style="display:none;">
        VIP.5 å¦‚é±¼å¾—æ°´
      </div><span class="byte-tooltip__wrapper"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8AQMAAAAAMksxAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAA5JREFUKM9jGAWjAAcAAAIcAAE27nY6AAAAAElFTkSuQmCC" alt="VIP.5 å¦‚é±¼å¾—æ°´" title="VIP.5 å¦‚é±¼å¾—æ°´" class="lazy" style="aspect-ratio:NaN;" data-v-5244ef91="" data-v-cd7d0a50=""/></span></span></div> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-11T05:47:40.000Z" title="Wed Feb 11 2026 05:47:40 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#2b2b2b;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(159,219,252,.15) 3%,transparent 0),linear-gradient(1turn,rgba(159,219,252,.15) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin-top:35px;margin-bottom:10px;color:#4dd0e1}.markdown-body h1{font-size:30px;text-align:center;position:relative;width:max-content;margin:0 auto}.markdown-body h1:before{position:absolute;content:"";z-index:-1;top:-20px;height:100%;width:100px;left:0;right:0;margin:0 auto;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADsAAAA6CAYAAAAOeSEWAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAABkLSURBVGhDtZoHnJ1llcbP3Om9ZiYzmfSQhCQQIbRQVQKI9CYC68qKriJK0UXcZRcINqStIoiIqKCi1NACQihBWiCkkJ5MJlMyvd7p7d759v989/sy34yTbIj48Atz71ff855znvOc971xDrB/EtoGI7a9Z8Aq+wZML0mNj7dE95NZ1OKsj1dHo1GbnJpss9OTbWJyonvun4VP1Njuoagtb+m0it4By0iIt8LEeMvkr8XFWcfgkA1gYDLf47i2PzpsyU7UspKSLDoctagTZ7Vc08MzClMS7awJ2ZaflBB78CeET8TYla1dtrKt2w5KS7YCDGzEoz2RqKUmhGw6x2bhuXyOp2BoRXef1Q1E7Lj8TIsMD1sbxu1kcnYSAX1810RMTUmyMB7f2j1gC7NS7byinNiL/kH8Q8a+2NRh77b32El56VaPAe0YeGR2mh2bm+FdMRqP1rbZe+3dFsHT35qcb/Oz0rwzo7Gxs9feYPLS4kM2h8lawee5hPmlJXneFQeGAzJ2F564v7rFzi7Msu3d/Xgjzq5g8ArX8VCNN2vJ28daey0zZJabmGCLslP5HOf+Oygr3UzDGOf+JxrauXfQjslJt+dbuuyMgiwmk+sPAB/b2Lt2NdoMZnuY21qHIvbvUyZ4Z0ZQiXGrWjvsmPxsK4R0nmHA8ZCTQvxVQn5eRipklIBtcVbV1WtHYsjati47ZWKuTUpP9Z4yGk/xDBGe3v1mW4/dOrvYO7P/2G9jRSjf31FnXyaUXiB8r51WaJkM3kcfOSa2FR6qarIenooTLQHPLcC4mYThyw1tVpKWYlVERlZ8nC3Oz3Jzdn1nn5uvQ8OOHYvhR/CvsqffJbkCkZTvcYZ6Z0WTfTovw5Y1dtjXp+TbFPhgf7FfxpYxuMfr2uwo8rEtMmwXF+d6Z8wGmIR2PLyjo8cqOFffP2SLGexJEJCP9R29thkPXlpa4A5Y3w/jmuVNYYwO2QkY7WMtz3mVcE1hkualJdmSolzX8GnpKd4VZq80d1o7zN0RdWxGaqItgbn3B/+vsasgh/UMNBOvzYMZDxtDKp289KGaVguFQvb1yQWWwuB97GaSXqUUnVaYbSUwrDCEBz/C2CM8EhNrP13fbkeSh3OJgCAe2N1CWXKsGOc6TOr5U4q8MwYhDtkTda02MyPN+nnGBQEH7A37NHYz5KOZVv08qyjbSseEzKauPnsMj98wc6Ibcj5UUv7M8QWZTE52jEwGOVaD8U1Dw1YNWX0qM8VKyb80L/TrOPYOzH4KBJQTrK8M7+7KZjuM63sHBt17FubGoibCuf+tarWFGUmuwWeT8/vCXo1tZOYeZcazCaez8MwEzzM+HqhqtiJI5twxL1jeGLYk7jmKMF1JOCbg6Qj5nAdRqX7q3BYm8VAmQvW1lfcMc58IT95uIA3q+gftrDHPXUXJWkVEHJme5Bp5UmHsvIZ/O3l8ECE/FWcsItX2hr0ae8O2Wjs+J43QTbOZzGYQ/7Wtxq6eXjRK3r0By4YJ6Ty8EiYSJqcm2eGeV4Pox/ANENJR49RiEdfqcLflUJrEBZqgxYHrBjn2ExFURqKdVETN9YirJxKxR2rbrYeQv5ISmB6IsiDGNfZGWPeMgkzr58xnPaJ5p6XDZPKz4T77wayJ7jGhhXLwanOHTWBgq5n5q6YUwNJ7l3kKcRl7OJ7fF56l1GzvHbSD8dghTPi0wIRfv6XafjJ3ssv0PnZQ7nZx/etwzO1zJ3lHR2OETTw8x0tOx1AN3De0D7YV+63oGthjaJQ5Ur7eVVZjcdGInUyuaT73ZWg3efV8fZs7cc2E777Qi5eunVbghvPPymrt/krKGfcLd8ybYjdxrK6333Z09rjHZkNuLYzz0uIc+xWCZzz8nbHbe4dsY1e/XUOY+nimvtUaSazv4jXhaQasSbmYmpuenGwHZ8TKggSEQm08rMD7ahBOoExcMqXQegjnZ+CEvaEa1ZQUQkt39dj0zDS7krq+ARmpdws/nlNqD9WFbWN7l5u3wr9MyrcXKUsqWy3jTOaoML4DdaQ83YIoT4VYpEXvYQZLmbX5SLohBrgOj186Kc/iKTUPUhq+Rrm5ekOl3TWv1Mr6hqwbY0VOQXwEo+Moq4Z47q5qsU489G944LyJOW4LOLZOKtT/iI6+nGe/0dhuEd4ltj2NmiuCU4hnk5fHIi7+RK4uTEu0e+s7rAiRcw1CYy3OejvcYz+eXeI9MYY9nu3lYZl0KavJJ7Vjibzgjp319rUZE20j7CkJqFr5JQYgQ39f3eQaKpQk0afy8nl4uBzvjUUTRk7k3iebOm0pabDiyFn2XGu3dRME41CGVeBVqSiVnc6hIUpekp1VjHLDSOEcQlui5W/U8C7IKREjv1Gabw3wRwUTvpv7jybPtzHmIPZ49q6KRjuccqBQVCOtGvqXhrCFUUXJzOYSHt7Kw5Ix9H08dSje1o1JyL73IYXpEMmE5CRbw6wuykx2pR+Pd6/J4JpLiJKV6N9OnrcQNfQ0Zem6qQX2MmFXyWTE+DMO0kGx4e08DEjnXbsYuOq7niHB8jdY/wQ8Srm2XCZZUrOakF1CY5EKX0h93Tu/1J4kRdbDMT8MamgZK9xe3uDcvrPe++Y4f61rcZr7B53rN1c5N2ytcV5rCrvHt3T2Og19g+5nH7dvq3bqunr4NOwgK2MHA1jeEDuG7HNuLmtw7qpocl5t6nCPvdTQ7v4N4u3WTqeyu9cZHIo4f6lqdFoHh7wzMbzDeeGv3Hvzjlrnh2W1zofhHuftxpFn3VFe7zxS0+p0DlKVPbhhvBxhvwiFMgfP+mjHA08gEC4pybeLyK1iZldh8zC5VJQyUl8l59KZ0WJk2xaiYWxNrkXXJhA8r3PvZRur7ZZZRfadaRPsfiTmX9HGajC2tXd6V8dQTMhX0h8rNdJx9Ra8F8SbRNLzhPRnJmTZIUTYueTyWxyr7uv3rjC3OkzE8495oS+4xq6D5WoI0bO5WVCOSerl8rIeBrOI/Hkaw6ME5W1zSuzx2la3CRdWi3zIG+FDBvUp9LMgI/vggUmE7KkT81yGvOOgEYa/aUahhRAF5xLec3OzbF1r2O17BbVxIi7hzJIC64IYhXdJA+nh/5xVbOmE9J0QqjSxWk0pp37M2YEtgjS8GpimACu7xkqxdKJ6fEXyYl2Lre0ZtC8yELVewtWUnbfCPIhrvgDFz8WI5yhJKgcnFMZWEFrwhgzo5uWDDDA1oGSOzcu0xfx7vTlsv6posIMpJ6cGWPiw/BxL4PU7vbrpjgf8bMdu5OYwOdhm83DARUSa0ELknYIeEAaILuWxlhGa0M8+EuJCrpJT+ymENhN60pXBxa3LZ5TsucnlGaCmIEQ4Evru91yuz0xMtKaeXluI5zdh9Mm8vAlBn4aR07X64EH3vEKdXQkZJXPP/JxMvNRpLxEtHZ5RQgmNewnpouvVTpYTHdfOnmy5kFUGnpRTfEhXD9DiBdFFJB0/YWS9aj6pmc89r0BaQmgTRkgI+EsdKsYasJZOBF+QqTH474NK7LbyBvf7W+RgOxNyxfQY2/2hrp2+NkroxrzrQ55fSZkpJIa28znCgF6rb7H1hOSslATyvNflAh9pvHcX3lVE/Ya8FjTJIexa2Rq77nfU96unTnD7aME3+TAm6BFKYrPnqCNIqV5sq0ZGCiEV+Db+qWMQqpFgb5KPx48R6omeDl2EuP9DTYt9iGA/f1KBS1w/La+H4ktsSmLItvZHXLUkrCeflVtJ9DVVg1H7+sxiGvVM975rZpfabuqHVhuP5F1vewav5O8GamUe91yDanoYw47FWzC929O+DJnKA2opFY1Rjru5CE7kOcO0jJtQVUIynzuZEMeb+1CEOFXN8iFSGeRpCm1BTlJxVg49Azm819SO7Bu0axEbwn27GuxMck+TMQHDP8fn48gfDVIL4R8xKVPJ73MQBUIfA/Z54LMw5vmlE+w+VFo2A78X/SsyPA/RMD0z3e2qVLtfo7aeBslpMX0N0TEnLcUlKym1jyBFqSohmYntI5enBhYB9CY/2kNarhwJhNiMtRGyWnkQdKaCFyQwgydjyNUw4VchKxXv2/DoKdC+lkQbCX1NlKCGvJiBJkSGbCus6jfo4yGBNySgr+u7e20BCsxdVAcFlJ/tHd32+cIsNxSXUULUUx+dg/d47g7OPYFw2MxkSuyMwLHVTI6PBN6dS8Sppw45zHJSgDXV3aQzmz40Z6fDgBfiAXU0uZxby2zejee+j3eltoQMzhV6qSBogXwrEXDj7ElWxUQ8RrnSaoU0dxIsKaiMvMykXTu90NqJsGHP4z78SdLigUrLKat32nFwy/E07pfDFRdQ/7N5r57pQ1482uvWhMGhQcviGkVrKDUp0ToCxfhQal5n4Hs/g1jOgH4LWdwFOd1b1WzHET4vLZppv+Czjxo840OrDlG8jAJzv2tp5mLK1dsU/lfIOeWy5NxFxfl2BoYImlQtx9QF6mJRQKBsQYYuO2yaLYPBUXvu/VqYPxtHhNy7Y4hCkNLGPtKSklzCVKSHtMQxcqm5Kw1DhI2PTGZtcGDAvoLQ/u7MifYtWFBlxz2H9zo8RkwKzC5UYiG+p44ccqE62YAxLeT/TOpf8MXx8Qk0IJFRY1Go+viQVJpE5Ehjf49xfAZeqGIy/7us3nqxwQfCkjZypPxobVr/6YpQHIalUvuCyEwbSXC9PC8QnkFcXlrgLpoLIhIfKuaqlQkYIAwQnr/f3eyu7KttOw2lNpv8/BPHyjzVNER3o72gvEBKqRMTflndbP8BMweRDyeciEj5bFayFXqTLzheivgYJC0jwzwHa0MDDEotm48ndze5BBBElAnxxcRYHAFh3FfZaA9UNRmC354kNwUx8eHkmVj5dcTE5ZMnuEyr1QqlhtaJLuOYZv4v3KNo0TKrGPUZ1NILPKuWcvVn5Trv10SMB6h0j/ARMnlOuafCBIfnSWEx/Raif3HDzofYMM31dOyY9LBaLK3TjoX2fEqT4+2qaUVWSTQvyM6wC8nNJyEetXIyuLKrx04P7MKNnbJZlKUtNAIHo7i2dA/YU3Vtdi5l6jCepXy8hOedSSSsI8/HQg5Q+gxTKXwkMHkbESo+hjG0lbRRzQ3Fc5LOzDuFhs3Ptumpie7ilRDhlEJOq/hjsZljCxjkt7fWuPS/EekpXMggJQIk0G+eN9Xu2VmHWIkJe0nJRN4ptBBit2yutG9ML7J1DHAxebiAMrZ4VZlduqGS8I2tJc2iborUxmIN79c+kTovFxivPvrcSaP3n7RSKYTUmKt4N3rMOcw4JOneD3sP956jNaMglIeTER5Xbdlt15Tm2W10NEsYrA/N5JLCHHsR9tSqwxq08G3bqm1ZTbOtagnbo6SLvH/VzBL7W7jPzqFea0LmMLFzUuLtdwumuO3i1Vtq7OK15Xgw3l1PDmIXak+6QBEkvB9YJIzBcc/L20JIYaSZ/qAzVm5Ut4oowk3QehC+N3xo/1wTqt7zsYawfX9no9XjqdPXVLhrwyo/wucJYQkE1e4j8rLcBuHUItQQKqgMXb6LGvxFQlXw33AdZLR0V5P9Fr29lP73scNnosoyvdWPv4fPJ+uJrLVtMakqaL1M1cTvv0OLIZE6wk2a2IcIRUQh+DaejpdcXepBa7bKDRGM9PIVxTl2EwarZ72rooVuY4RQtMypdk6e1lLLehhY2lt7QEd7WxlCDvdIli6E9B4+ZIodmZEMccUGqgiZOqru9tkR3iJ8nCcXRWRZCSPMLPEjlx2LjQL1OM5qKAm+vhSuRqSfV5Ttrg8FdWcrnhMqCTex7DEM6qTsVEuM1+8hovaHQ6e6a1Fz0xLd3nUt4ToWWuzWNkhcoAIIjUx2ZpxjLzWF9+SYmngR1lok4TEoJxGfuijhI/7OICoFmadl2llcL9b1oRVJtbD+JLlv1KrhHG5811t9ELbzgk14ICUwqE+TDzftqHPz98vUSy3jSIwP8dCpkNqLDPTx+rArz4T5qLG3G2PrvJKKPoLBWE501NC3ilUX5mVjVIb9nIbgWcpPMiSXjbcL8K62UkR86m1/yfkSeMaHFuK04X0CE3J6SWzFUxw0BSNHlSzi3RmIRJwHq5udO3c16quLp6sbnffbupxbt+12vzOrzuvNHc7ycRbIxuJHgYU7YSASdQgxp7qz2ynv6HJeqW91doa7nLruXof+17sqhhu31Xif9o7HalqczV29Dnrb/f5EXZvzdH27U98/6LR5i3N0UM5zjHU71/lwjRWWltU5CAIn7F1MqLp/r9hQ5RoaxG+qmrxP4yNKcfsFLwuiprffeb2l03m2scO5h3Or2rudzjGrhk8x4Cqu2xcexilBvNEcdi5Yu4tKF3Ue4tzPy+td5/1md4tzw5iJ27NuXEYobYUdlb8z6GTWkdxaCvk2zHjd5mpKQ459mv5TkAp6mQb9Aq9HHQ8S6mrZnuc6vUG6WHusIhCJGNXl9byvnJyaiE7+Eoz8c5TYNQiUveENGpJpcIJ+biS8R0+rlcazGNs7pKB+zPLTOSX2KNWhlDAf4r2Spj72JORB5OyHULX+dlD/FOky/HFy5ygYU0sey/i8moeqdunXK1qC3RuaMOYHlI/raQMl3M+EeTV5WxD3Km8a8PkM8nr648sQ9+esKbf5e/nxiKBfAOQkxbv3SU9LYmqPV9V/Pn+V20VwTyVjTqCI6edEQUOFUXs9WmfSll8DyX2dt7GlnwkswaM3l9XZ0oNK3MTXbxpOV2sGk69s6XCJw4cY8KbyRrt9TrHt7Bm0rRBQe1+fHUWNfaapU0KbqxzbORC1M/LS3dJwIl3KOrwykQG/E+61q+isgniztdOKqNOziDgZqZIzFwPvqGiyg5NCtoCqoG5NxHhPZTOsnORulKskjoKMDeLuXQ3OmnC3syxARFXdfc57LR3OrdtrvSOOs55rnqhtcdoGhpxHdjc5EfJUuHZTlftX+G15rXPlhkrnLe59F7Lz8VGHdg8c5y2OLeMZ126qduq9XC3v7nd+FchLvYPJd15gPCu8XQnh/qpm59WGVudZzvvQO97kXTcGxhnEuJvR39tWY8cwK4uhcikk4a3Gdstg9l5B2t0wfaTdWkEou5vCPOV5PH73vFL3+DfXltnh6OxjkJD6Wd5F3g88tMe6CW/7YmI99VIL4u0oqUK8ocW4d8hFrXMVoOQU8s3U97MnjvDD/XRYkyhHM1MT3GVZQR2Tdv70U8EbA5vlo+CaPAaaSWoZXm50otGodxQ6L6txGKxzw5ZYORrBsPPrykZKQIy1n8bTjwb2fO4Te3ue7x6KOKvaYns1wtIddd4nx3mwot55qyl2360cp81zurg+CGqwU8v4/Of5uAVvPgObrwvHomY8jOtZ4fXWLnefdHVXv9044+8ZklCx75DXwcV1Sb27y+vInUQEuVYSaMgRJYfAwtoj0raFxIUW1A8nz35f02qLc9Lc9lG7CBkwtUR7bf+A+5uL6ehnH9Lat+5sIEfj3Cbj3NKRvP7Rjlo7FSmqavKvpSP8MRZ7NVbQYLSkqlC9ZW4sPH18gBTcORjrhMWmQWzFmK2UsvO90qQ1oZcI8UhkCLZPtRqMy0NirobAvjIpb4/sW06qKGyPR2oGIdlazjOOTk+kLYzaaYGSp63Wz6HsXsQ51wd+LTAuZOy+8GBNq7tF+IOdDU4kENJthNID5YRafZtzZ3mDs9LbRgzixcZ2l1h83OKFbDmEd0/FiFp7DWHgp0AQGzq6nf8hPF+oa3EehOz0ziCWcm4NpBRMhX1hn571oR9wqVVSDVPtUi32sQ0vbu7scZdY9aOt2ZSEL9BEBIW+dv20AKDd9/ep09oimYqHpyImkKDuRllS4PrlHNuIqDmCJmNJQba7q1joEaUQJuR/WdXsLrJrq/L6cdJsPOyXscJ7GLKqo8cOpqhrO//yQG6oS3kZwS9xPkRB3wi7diFMtDN+PLk5m1ath+8f0Fy80dbjhvVXub+U5mEqeal27UP+dWpPlknNxW79Ak6/7Tg3UMOF52j1xA1qK7Trd6nXC+8P9ttYQcumIonLSnJtBdJNa77axw1C2x3qR4Wqnj73x9f6MbV+CCYFBZO6y51aSh3gzVrsmwzJnULEbCJC1oZ7vIZ/9Iqmfvn2u5oWO5n8fApxcuWUApum5diPgY9lrA9EtvUNOzYf8vqAcJPsU5iOh7XtXQgt2uZhjKU2amF7HQyfEYWcZk5yQ1RDKNrLcq02k/9IGmldrB93KiokPw8EB2SsoKWXO5FmxXhlckqi+3vEUvLqwok5PHVkIWAszlqzy1p54zuLpnPZ3q9bod08JlLSb5DrNxDm38Sbvsg5EBywsT7oH+3XNW3uasGirFSrxRNdCllKiPZHZzJYLZb5qEcpae3pxMCuu9oibS5/QCOiLcYUrp+MmtJeURjFdVlxzqiae6D4h40NQt54HyGv3JRo10aVfv8YhtC0pSlVKcPFuxIXahr08mzCO4VzMlLSsZuomZ+RaucU0rXsw/sfF5+osUFonWob/7TrLdaUgdpV93fl9X+VIC0Y6tek2uI8OD3J5gT2Vj9ZmP0f4IM4iY7RQ5gAAAAASUVORK5CYII=) no-repeat 50%;background-size:64px 64px;opacity:.84}.markdown-body h1:after{position:absolute;content:"";width:150%;left:-25%;height:50%;bottom:12px;border-radius:50%;background:linear-gradient(transparent 80%,rgba(77,208,225,.8));background-size:400% 200%;opacity:.6;animation:h1Animate 6s linear infinite}@keyframes h1Animate{0%{background-position:100% 100%}50%{background-position:100% 50%}to{background-position:100% 100%}}.markdown-body h2{display:block;border-bottom:4px solid #4dd0e1;position:relative;font-size:24px;padding:12px 32px;margin:30px 0}.markdown-body h2:before{width:24px;height:24px;left:0;top:0;margin:auto;background-size:24px 24px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADGklEQVRYR81X32vTYBQ999s6mFjQgQ+DrbHiVFZYU4cDcQ/6pGhTFVYFEXGi82H+Bz448UnEF1Fx9ccEEcXpZE3d5tP2ooKiTacTHaLNpigMHDgnU9tcSbrWrkwWR0sbyEOSe885ObnfvV8IRT6oyPwoLQHBx+OVM5WJvSyEVAhnBOjt7yU/+/rr6r6l8TMO+F/EN0JQhICqQpD/xaRpcpAc9tS+M+9lBCia/oqBamK+zeDuQogQZaKJk3wcQjxSva7tGQGB2Ke1zIk3DNyMyNL+QpCnMQOaPsDAVuGAp9cjvbYc8Ec/bCYSg0zoiHilk1tHxqsqEsYlML4kjIpT/eurJxRNPweQU5VdrWaOEo1fgKAVbBgXIz73kF3R/ph+ghgdzMYWM29eAWlBJqgZaFlFYtC6nhWpaDqnSGlIlV1WjJ3DloDNgyNLncudqgX//Ucg3LxuStHGuhi8pqKCW3rqV342rwFjRznKm+/LNaN2yC237ThgF2wxcfMLeP6+ncrKzoPoKTGeLQbYbg4TNoC5iZPJY5HGVRdSNZAWYBclD3FzBQzrR8hACAKdzBzKA/4/IYioDQaOskBbpEG6PO8qKKSAEi3CnEb0Pw4oMf0OmKbTDWqh3Lw6EIiNBZi5lxh3wz4puBD5ovqAMvxhHSdFKxE1CQe3m/07TeTX4lcJdAhE+1Sv65Z5P/ByvIGTRowIZ9igbtXnmrOsbTvgj+kHBNMuBu9OdVw8EeU4nC1A0cYmAHZOTRrLhra4Z8ywnSN6vZHAFTA2WnnMfQB3qz73ddsOZM8CACFDIPSgQXqebXEgqgeZcAeEe6pXasm1f8ew3igMtAHWac0Uc/jYdyAaP0xEBwFsmgUPqbJ0NE2UKj4EGcahiOzuyhagaHpnmtgcVgTcCMuua7YdyAHbA3ArQNscVFbb4635aD6fnYaTvxxi9UNP7ddMXaRWVBdAcaLk6bDXPZCNZ9uBXEsDUX1T2Cc9yjig6Z0EHg3LK8/aqf6MwJKchkXfks1+0+JtSq3qLPa23BRR1B+T/6nkfMaW1r9hPt/MLtYfTLEpP+T9FNoAAAAASUVORK5CYII=)}.markdown-body h2:after,.markdown-body h2:before{content:"";display:block;position:absolute;bottom:0}.markdown-body h2:after{right:0;width:400px;height:10px;border-top-right-radius:24px;background:linear-gradient(90deg,#fff,#4dd0e1);max-width:50vw}.markdown-body h3{margin:30px 0;font-size:18px;position:relative;padding:4px 32px;width:max-content}.markdown-body h3:before{border-bottom:2px solid #4dd0e1;width:100%;content:"";display:block;height:28px;position:absolute;left:0;top:0;bottom:-2px;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);background-repeat:no-repeat;animation:h3AnimationBefore 2s infinite alternate}@keyframes h3AnimationBefore{0%{width:28px}25%{width:100%}50%{width:100%}to{width:100%}}.markdown-body h3:after{content:"";display:block;width:28px;height:28px;position:absolute;border:2px solid #4dd0e1;border-radius:50%;right:-15px;top:0;bottom:0;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);animation:h3AnimationAfter 2s infinite alternate}@keyframes h3AnimationAfter{0%{transform:rotate(0)}10%{transform:rotate(0)}50%{transform:rotate(-1turn)}to{transform:rotate(-1turn)}}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin:22px 0;letter-spacing:2px;font-size:14px;word-spacing:2px}.markdown-body img{max-width:80%;border-radius:6px;display:block;margin:20px auto!important;object-fit:contain;box-shadow:0 0 16px hsla(0,0%,43.1%,.45)}.markdown-body figcaption{display:block;font-size:13px;color:#2b2b2b}.markdown-body figcaption:before{content:"";background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAGFBMVEVHcExAuPtAuPpAuPtAuPpAuPtAvPxAuPokzOX5AAAAB3RSTlMAkDLqNegkoiUM7wAAAGBJREFUKM9jYBhcgMkBTUDVBE1BeDGqEtXychNUBeXlKEqACsrLQxB8lnCQQClCiWt5OYoSiAIkJVAF5eVBqAqAShTAAs7l5ShKWMwRAmAlSArASpAVgJUkCqIAscESHwCVVjMBK9JnbQAAAABJRU5ErkJggg==);display:inline-block;width:18px;height:18px;background-size:18px;background-repeat:no-repeat;background-position:50%;margin-right:5px;margin-bottom:-5px}.markdown-body hr{border:none;border-top:1px solid #4dd0e1;margin-top:32px;margin-bottom:32px}.markdown-body del{color:#4dd0e1}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(77,208,225,.08);color:#26c6da;padding:.195em .4em}.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#4dd0e1;border-bottom:1px solid #4dd0e1;font-weight:400;text-decoration:none;margin:0 4px}.markdown-body a:active,.markdown-body a:hover{background-color:rgba(77,208,225,.1)}.markdown-body strong{color:#26c6da}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{font-style:normal;color:#4dd0e1;font-weight:700}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(77,208,225,.05)}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{margin:2em 0;padding:24px 32px;border-left:4px solid #26c6da;background:rgba(77,208,225,.15);position:relative}.markdown-body blockquote:before{content:"â";top:8px;left:8px;color:#4dd0e1;font-size:30px;line-height:1;font-weight:700;position:absolute;opacity:.7}.markdown-body blockquote:after{content:"â";font-size:30px;position:absolute;right:8px;bottom:0;color:#4dd0e1;opacity:.7}.markdown-body blockquote p{color:#595959;line-height:2}.markdown-body ol,.markdown-body ul{color:#595959;padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="vs2015">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#1e1e1e;color:#dcdcdc}.hljs-keyword,.hljs-link,.hljs-literal,.hljs-name,.hljs-symbol{color:#569cd6}.hljs-link{text-decoration:underline}.hljs-built_in,.hljs-type{color:#4ec9b0}.hljs-class,.hljs-number{color:#b8d7a3}.hljs-meta-string,.hljs-string{color:#d69d85}.hljs-regexp,.hljs-template-tag{color:#9a5334}.hljs-formula,.hljs-function,.hljs-params,.hljs-subst,.hljs-title{color:#dcdcdc}.hljs-comment,.hljs-quote{color:#57a64a;font-style:italic}.hljs-doctag{color:#608b4e}.hljs-meta,.hljs-meta-keyword,.hljs-tag{color:#9b9b9b}.hljs-template-variable,.hljs-variable{color:#bd63c5}.hljs-attr,.hljs-attribute,.hljs-builtin-name{color:#9cdcfe}.hljs-section{color:gold}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-bullet,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-id,.hljs-selector-pseudo,.hljs-selector-tag{color:#d7ba7d}.hljs-addition{background-color:#144212}.hljs-addition,.hljs-deletion{display:inline-block;width:100%}.hljs-deletion{background-color:#600}</style><h2 data-id="heading-0">AgentTeams ä¸ Subagentsï¼šå¤šæ™ºèƒ½ä½“ç³»ç»Ÿçš„æœ€ä½³å®è·µ</h2>
<blockquote>
<p>åŸåˆ›æŠ€æœ¯æ–‡ç« ï¼Œé¦–å‘äºæ˜é‡‘
ä½œè€…ï¼šAsher | é˜…è¯»æ—¶é—´ï¼š10 åˆ†é’Ÿ | éš¾åº¦ï¼šä¸­çº§</p>
</blockquote>
<h3 data-id="heading-1">å‰è¨€</h3>
<p>éšç€å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰æŠ€æœ¯çš„å¿«é€Ÿå‘å±•ï¼Œ<strong>AI Agent</strong> æ­£åœ¨ä»å•ä¸€æ™ºèƒ½ä½“å‘<strong>å¤šæ™ºèƒ½ä½“åä½œç³»ç»Ÿ</strong>æ¼”è¿›ã€‚åœ¨å®é™…åº”ç”¨ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸é¢ä¸´è¿™æ ·çš„é—®é¢˜ï¼š</p>
<ul>
<li>ä»€ä¹ˆæ—¶å€™åº”è¯¥ç”¨å¤šä¸ª Agent åä½œï¼Ÿä»€ä¹ˆæ—¶å€™ç”¨å•ä¸ª Agent å°±å¤Ÿäº†ï¼Ÿ</li>
<li>AgentTeams å’Œ Subagents æœ‰ä»€ä¹ˆæœ¬è´¨åŒºåˆ«ï¼Ÿå¦‚ä½•æ­£ç¡®é€‰æ‹©ï¼Ÿ</li>
<li>å¦‚ä½•è®¾è®¡é«˜æ•ˆçš„å¤šæ™ºèƒ½ä½“ç³»ç»Ÿï¼Ÿæœ‰å“ªäº›æœ€ä½³å®è·µï¼Ÿ</li>
</ul>
<p>æœ¬æ–‡åŸºäº BMADï¼ˆBuild, Monitor, Analyze, Deployï¼‰æ¡†æ¶çš„å®æˆ˜ç»éªŒï¼Œæ·±å…¥è§£æ <strong>AgentTeams</strong> å’Œ <strong>Subagents</strong> çš„æ ¸å¿ƒå·®å¼‚ã€ä½¿ç”¨æ–¹æ³•å’Œåº”ç”¨åœºæ™¯ï¼Œå¹¶æä¾›ä¸€å¥—å®Œæ•´çš„è®¾è®¡å†³ç­–æ¡†æ¶ã€‚</p>
<hr/>
<h3 data-id="heading-2">ä¸€ã€æ ¸å¿ƒæ¦‚å¿µï¼šä»€ä¹ˆæ˜¯ AgentTeams å’Œ Subagentsï¼Ÿ</h3>
<h4 data-id="heading-3">1.1 AgentTeamsï¼šåä½œå‹æ™ºèƒ½ä½“å›¢é˜Ÿ</h4>
<p><strong>AgentTeamsï¼ˆæ™ºèƒ½ä½“å›¢é˜Ÿï¼‰</strong> æ˜¯ç”±å¤šä¸ª<strong>å…·æœ‰ç‹¬ç«‹äººæ ¼ã€ä¸“ä¸šé¢†åŸŸå’Œæ²Ÿé€šé£æ ¼</strong>çš„ Agent ç»„æˆçš„åä½œç³»ç»Ÿã€‚å®ƒä»¬é€šè¿‡ä¸€ä¸ª**åè°ƒå™¨ï¼ˆOrchestratorï¼‰**æ¥ç®¡ç†å¯¹è¯æµç¨‹ï¼Œå®ç°è‡ªç„¶çš„å¤šæ™ºèƒ½ä½“è®¨è®ºã€‚</p>
<p><strong>æ ¸å¿ƒç‰¹å¾ï¼š</strong></p>
<pre><code class="hljs">ğŸ­ ç‹¬ç«‹äººæ ¼  æ¯ä¸ª Agent æœ‰ç‹¬ç‰¹çš„ä¸ªæ€§ã€è¯´è¯æ–¹å¼å’Œä¸“ä¸šè§†è§’
ğŸ¯ ä¸“ä¸šåˆ†å·¥  ä¸åŒ Agent è´Ÿè´£ä¸åŒé¢†åŸŸï¼ˆåˆ†æå¸ˆã€æ¶æ„å¸ˆã€è®¾è®¡å¸ˆç­‰ï¼‰
ğŸ”„ å¯¹è¯åä½œ  Agent ä¹‹é—´å¯ä»¥ç›¸äº’å¯¹è¯ã€è¾©è®ºã€è¡¥å……
ğŸ§  é›†ä½“æ™ºæ…§  é€šè¿‡å¤šè§†è§’ç¢°æ’äº§ç”Ÿè¶…è¶Šå• Agent çš„æ´è§
</code></pre>
<p><strong>æ¶æ„ç¤ºæ„ï¼š</strong></p>
<pre><code class="hljs language-markdown" lang="markdown">ç”¨æˆ·è¯·æ±‚
<span class="hljs-code">    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Orchestrator (åè°ƒå™¨)    â”‚
â”‚  - ç†è§£ç”¨æˆ·æ„å›¾             â”‚
â”‚  - é€‰æ‹©ç›¸å…³ Agent            â”‚
â”‚  - ç®¡ç†å¯¹è¯æµç¨‹             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â†“       â†“           â†“
â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”
â”‚åˆ†æ â”‚ â”‚æ¶æ„ â”‚   â”‚è®¾è®¡ â”‚
â”‚ Agentâ”‚ â”‚Agentâ”‚   â”‚Agentâ”‚
â””â”€â”€â”¬â”€â”€â”˜ â””â”€â”€â”¬â”€â”€â”˜   â””â”€â”€â”¬â”€â”€â”˜
   â”‚        â”‚          â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â†“
    ååŒè®¨è®º/è¾©è®º
            â†“
        ç»¼åˆè¾“å‡º
</span></code></pre>
<p><strong>å®é™…æ¡ˆä¾‹ï¼šBMAD çš„ Party Mode</strong></p>
<p>BMAD æ¡†æ¶ä¸­çš„ <strong>Party Mode</strong> æ˜¯ AgentTeams çš„å…¸å‹å®ç°ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># _bmad/core/workflows/party-mode/workflow.md</span>
<span class="hljs-string">**Goal:**</span> <span class="hljs-string">Orchestrates</span> <span class="hljs-string">group</span> <span class="hljs-string">discussions</span> <span class="hljs-string">between</span> <span class="hljs-string">all</span> <span class="hljs-string">installed</span> <span class="hljs-string">BMAD</span> <span class="hljs-string">agents,</span>
<span class="hljs-string">enabling</span> <span class="hljs-string">natural</span> <span class="hljs-string">multi-agent</span> <span class="hljs-string">conversations</span>

<span class="hljs-string">**Agent</span> <span class="hljs-string">Selection</span> <span class="hljs-string">Intelligence:**</span>
<span class="hljs-bullet">-</span> <span class="hljs-string">Analyze</span> <span class="hljs-string">user's</span> <span class="hljs-string">message</span> <span class="hljs-string">for</span> <span class="hljs-string">domain</span> <span class="hljs-string">and</span> <span class="hljs-string">expertise</span> <span class="hljs-string">requirements</span>
<span class="hljs-bullet">-</span> <span class="hljs-string">Select</span> <span class="hljs-number">2</span><span class="hljs-number">-3</span> <span class="hljs-string">most</span> <span class="hljs-string">relevant</span> <span class="hljs-string">agents</span> <span class="hljs-string">for</span> <span class="hljs-string">balanced</span> <span class="hljs-string">perspective</span>
<span class="hljs-bullet">-</span> <span class="hljs-string">Enable</span> <span class="hljs-string">natural</span> <span class="hljs-string">cross-talk</span> <span class="hljs-string">and</span> <span class="hljs-string">agent-to-agent</span> <span class="hljs-string">interactions</span>
</code></pre>
<p>å½“ç”¨æˆ·å‘èµ· Party Mode æ—¶ï¼Œæ‰€æœ‰ä¸“ä¸š Agentï¼ˆåˆ†æå¸ˆã€æ¶æ„å¸ˆã€è®¾è®¡å¸ˆã€å¼€å‘äººå‘˜ã€QA ç­‰ï¼‰ä¼šèšåœ¨ä¸€èµ·ï¼Œé’ˆå¯¹ç”¨æˆ·çš„é—®é¢˜è¿›è¡Œ<strong>å¤šè§†è§’è®¨è®º</strong>ã€‚</p>
<hr/>
<h4 data-id="heading-4">1.2 Subagentsï¼šä»»åŠ¡å‹å­æ™ºèƒ½ä½“</h4>
<p><strong>Subagentsï¼ˆå­æ™ºèƒ½ä½“ï¼‰</strong> æ˜¯ä»ä¸» Agent æ´¾ç”Ÿå‡ºæ¥çš„ã€ç”¨äº<strong>éš”ç¦»ç‰¹å®šä»»åŠ¡</strong>çš„åŠŸèƒ½æ¨¡å—ã€‚å®ƒä»¬é€šå¸¸æ²¡æœ‰ç‹¬ç«‹äººæ ¼ï¼Œè€Œæ˜¯ä½œä¸ºä¸» Agent çš„"å·¥å…·"æ¥æ‰§è¡Œå…·ä½“ä»»åŠ¡ã€‚</p>
<p><strong>æ ¸å¿ƒç‰¹å¾ï¼š</strong></p>
<pre><code class="hljs">ğŸ”§ åŠŸèƒ½å¯¼å‘  ä¸“æ³¨äºç‰¹å®šä»»åŠ¡ï¼Œä¸å…·å¤‡ç‹¬ç«‹äººæ ¼
ğŸ§© æ¨¡å—åŒ–è®¾è®¡  ä½œä¸ºåŠŸèƒ½æ¨¡å—è¢«ä¸» Agent è°ƒç”¨
ğŸ“¦ ä¸Šä¸‹æ–‡éš”ç¦»  æ¯ä¸ªå­ Agent æœ‰ç‹¬ç«‹çš„ä¸Šä¸‹æ–‡ç©ºé—´
âš¡ ä»»åŠ¡ä¸“ä¸€  å¤„ç†å®Œåè¿”å›ç»“æœï¼Œä¸å‚ä¸æŒä¹…å¯¹è¯
</code></pre>
<p><strong>æ¶æ„ç¤ºæ„ï¼š</strong></p>
<pre><code class="hljs language-css" lang="css">ä¸» Agent (Context Window)
â”œâ”€â”€ ä»»åŠ¡ <span class="hljs-selector-tag">A</span>
â”‚   â””â”€â”€ è°ƒç”¨ Subagent <span class="hljs-selector-tag">A</span> (ç‹¬ç«‹ä¸Šä¸‹æ–‡)
â”‚       â””â”€â”€ è¿”å›ç»“æœ <span class="hljs-selector-tag">A</span>
â”œâ”€â”€ ä»»åŠ¡ <span class="hljs-selector-tag">B</span>
â”‚   â””â”€â”€ è°ƒç”¨ Subagent <span class="hljs-selector-tag">B</span> (ç‹¬ç«‹ä¸Šä¸‹æ–‡)
â”‚       â””â”€â”€ è¿”å›ç»“æœ <span class="hljs-selector-tag">B</span>
â””â”€â”€ ç»¼åˆç»“æœ <span class="hljs-selector-tag">A</span> + <span class="hljs-selector-tag">B</span>
</code></pre>
<p><strong>å®é™…æ¡ˆä¾‹ï¼šBMAD çš„ PRD åˆ›å»ºæµç¨‹</strong></p>
<p>åœ¨åˆ›å»ºäº§å“éœ€æ±‚æ–‡æ¡£ï¼ˆPRDï¼‰æ—¶ï¼Œä¸» Agent ä¼šå°†ä¸åŒç« èŠ‚çš„å¤„ç†å§”æ‰˜ç»™ Subagentsï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># _bmad/bmm/workflows/2-plan-workflows/create-prd/steps-e/step-e-01b-legacy-conversion.md</span>

<span class="hljs-string">**Try</span> <span class="hljs-string">to</span> <span class="hljs-string">use</span> <span class="hljs-string">Task</span> <span class="hljs-string">tool</span> <span class="hljs-string">with</span> <span class="hljs-string">sub-agent:**</span>

<span class="hljs-string">å½“å¤„ç†å¤æ‚ç« èŠ‚æ—¶ï¼Œä¸»</span> <span class="hljs-string">Agent</span> <span class="hljs-string">ä¼šï¼š</span>
<span class="hljs-number">1</span><span class="hljs-string">.</span> <span class="hljs-string">è¯†åˆ«éœ€è¦æ·±åº¦å¤„ç†çš„ç« èŠ‚</span>
<span class="hljs-number">2</span><span class="hljs-string">.</span> <span class="hljs-string">åˆ›å»º</span> <span class="hljs-string">Subagent</span> <span class="hljs-string">ä¸“é—¨å¤„ç†è¯¥ç« èŠ‚</span>
<span class="hljs-number">3</span><span class="hljs-string">.</span> <span class="hljs-string">Subagent</span> <span class="hljs-string">æ‹¥æœ‰ç‹¬ç«‹çš„ä¸Šä¸‹æ–‡å’ŒçŸ¥è¯†åº“</span>
<span class="hljs-number">4</span><span class="hljs-string">.</span> <span class="hljs-string">å¤„ç†å®Œæˆåè¿”å›ç»“æœç»™ä¸»</span> <span class="hljs-string">Agent</span>
<span class="hljs-number">5</span><span class="hljs-string">.</span> <span class="hljs-string">ä¸»</span> <span class="hljs-string">Agent</span> <span class="hljs-string">æ•´åˆæ‰€æœ‰</span> <span class="hljs-string">Subagent</span> <span class="hljs-string">çš„è¾“å‡º</span>
</code></pre>
<p>è¿™ç§æ–¹å¼çš„ä¼˜åŠ¿æ˜¯<strong>é˜²æ­¢ä¸Šä¸‹æ–‡é›ªçƒ</strong>ï¼ˆcontext snowballï¼‰ï¼Œé¿å…å•ä¸€ Agent çš„ä¸Šä¸‹æ–‡è¢«è¿‡å¤šä¿¡æ¯æ±¡æŸ“ã€‚</p>
<hr/>
<h3 data-id="heading-5">äºŒã€æ ¸å¿ƒå·®å¼‚å¯¹æ¯”è¡¨</h3>


















































<table><thead><tr><th>ç»´åº¦</th><th>AgentTeams</th><th>Subagents</th></tr></thead><tbody><tr><td><strong>å®šä¹‰</strong></td><td>å¤šä¸ªç‹¬ç«‹äººæ ¼çš„ Agent åä½œ</td><td>å•ä¸€ Agent çš„åŠŸèƒ½æ¨¡å—</td></tr><tr><td><strong>äººæ ¼</strong></td><td>âœ… æ¯ä¸ªæœ‰ç‹¬ç«‹äººæ ¼å’Œæ²Ÿé€šé£æ ¼</td><td>âŒ æ— ç‹¬ç«‹äººæ ¼ï¼Œä½œä¸ºå·¥å…·å­˜åœ¨</td></tr><tr><td><strong>å…³ç³»</strong></td><td>å¹³ç­‰åä½œï¼Œç›¸äº’å¯¹è¯</td><td>ä¸»ä»å…³ç³»ï¼Œä¸» Agent è°ƒç”¨</td></tr><tr><td><strong>ä¸Šä¸‹æ–‡</strong></td><td>å…±äº«å¯¹è¯å†å²</td><td>ç‹¬ç«‹ä¸Šä¸‹æ–‡ç©ºé—´</td></tr><tr><td><strong>äº¤äº’æ–¹å¼</strong></td><td>è‡ªç„¶å¯¹è¯ã€è¾©è®ºã€è¡¥å……</td><td>å‡½æ•°è°ƒç”¨ã€ä»»åŠ¡å§”æ‰˜</td></tr><tr><td><strong>ç”Ÿå‘½å‘¨æœŸ</strong></td><td>æŒç»­å­˜åœ¨ï¼Œéšæ—¶å¯å”¤é†’</td><td>æŒ‰éœ€åˆ›å»ºï¼Œç”¨å®Œå³é”€</td></tr><tr><td><strong>è¾“å‡ºå½¢å¼</strong></td><td>å¤šè§†è§’çš„ç»¼åˆç»“è®º</td><td>ä»»åŠ¡æ‰§è¡Œç»“æœ</td></tr><tr><td><strong>é€‚ç”¨è§„æ¨¡</strong></td><td>3-10 ä¸ª Agentï¼ˆæœ€ä½³å®è·µï¼‰</td><td>ä¸é™ï¼ŒæŒ‰éœ€åˆ›å»º</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-6">ä¸‰ã€ä½¿ç”¨åœºæ™¯æ·±åº¦è§£æ</h3>
<h4 data-id="heading-7">3.1 AgentTeams é€‚ç”¨åœºæ™¯</h4>
<h5 data-id="heading-8">âœ… åœºæ™¯ 1ï¼šéœ€è¦å¤šä¸“ä¸šè§†è§’çš„å¤æ‚å†³ç­–</h5>
<p><strong>æ¡ˆä¾‹ï¼šæŠ€æœ¯æ–¹æ¡ˆè¯„å®¡</strong></p>
<pre><code class="hljs language-arduino" lang="arduino">ç”¨æˆ·ï¼š<span class="hljs-string">"æˆ‘ä»¬æ­£åœ¨è®¾è®¡ä¸€ä¸ªåˆ†å¸ƒå¼ç¼“å­˜ç³»ç»Ÿï¼Œéœ€è¦æŠ€æœ¯æ–¹æ¡ˆå»ºè®®"</span>

Party Mode æ¿€æ´»ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
| ğŸ”· <span class="hljs-built_in">Winston</span> (Architect)                  |
| <span class="hljs-string">"ä»ç³»ç»Ÿæ¶æ„è§’åº¦ï¼Œæˆ‘å»ºè®®ç”¨ä¸€è‡´æ€§å“ˆå¸Œ..."</span>    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
| ğŸ“Š <span class="hljs-built_in">Mary</span> (Business Analyst)                |
| <span class="hljs-string">"ä½†æˆæœ¬å¦‚ä½•ï¼Ÿæ˜¯å¦èƒ½æ»¡è¶³ä¸šåŠ¡ SLAï¼Ÿ"</span>           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
| ğŸ’» <span class="hljs-built_in">Dev</span> (Developer)                       |
| <span class="hljs-string">"å®ç°å¤æ‚åº¦å¦‚ä½•ï¼Ÿå›¢é˜Ÿæœ‰æ²¡æœ‰ç›¸å…³ç»éªŒï¼Ÿ"</span>        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
| âœ… <span class="hljs-built_in">QA</span> (Quality Assurance)                 |
| <span class="hljs-string">"æˆ‘éœ€è¦è€ƒè™‘å¯æµ‹è¯•æ€§å’Œç›‘æ§..."</span>              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆé€‚åˆï¼š</strong></p>
<ul>
<li>éœ€è¦æ¶æ„ã€ä¸šåŠ¡ã€å¼€å‘ã€æµ‹è¯•å¤šä¸ªè§†è§’</li>
<li>Agent ä¹‹é—´å¯ä»¥ç›¸äº’è´¨ç–‘å’Œè¡¥å……</li>
<li>æœ€ç»ˆç»“è®ºæ˜¯é›†ä½“æ™ºæ…§çš„ç»¼åˆ</li>
</ul>
<hr/>
<h5 data-id="heading-9">âœ… åœºæ™¯ 2ï¼šåˆ›æ„å¤´è„‘é£æš´</h5>
<p><strong>æ¡ˆä¾‹ï¼šæ–°äº§å“åŠŸèƒ½è®¾è®¡</strong></p>
<pre><code class="hljs language-vbnet" lang="vbnet">ç”¨æˆ·ï¼š<span class="hljs-string">"æˆ‘ä»¬æƒ³è®¾è®¡ä¸€ä¸ªæ™ºèƒ½æ—¥ç¨‹æ¨èåŠŸèƒ½"</span>

Mary (BA): <span class="hljs-string">"ç”¨æˆ·ç—›ç‚¹æ˜¯ä»€ä¹ˆï¼Ÿç°æœ‰æ–¹æ¡ˆæœ‰ä»€ä¹ˆä¸è¶³ï¼Ÿ"</span>
Zara (UX): <span class="hljs-string">"UI/UX åº”è¯¥æ€ä¹ˆè®¾è®¡ï¼Ÿäº¤äº’æµç¨‹ï¼Ÿ"</span>
Winston (Architect): <span class="hljs-string">"æŠ€æœ¯ä¸Šå¦‚ä½•å®ç°ï¼Ÿæ¨èç®—æ³•ï¼Ÿ"</span>
<span class="hljs-symbol">Dev:</span> <span class="hljs-string">"å·¥ç¨‹å¯è¡Œæ€§å¦‚ä½•ï¼Ÿéœ€è¦å“ªäº› APIï¼Ÿ"</span>
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆé€‚åˆï¼š</strong></p>
<ul>
<li>åˆ›æ„éœ€è¦ç¢°æ’</li>
<li>ä¸åŒè§’è‰²è´¡çŒ®ä¸åŒç»´åº¦çš„æƒ³æ³•</li>
<li>è‡ªç„¶å¯¹è¯æ›´å®¹æ˜“æ¿€å‘çµæ„Ÿ</li>
</ul>
<hr/>
<h5 data-id="heading-10">âœ… åœºæ™¯ 3ï¼šäº‰è®®æ€§é—®é¢˜è®¨è®º</h5>
<p><strong>æ¡ˆä¾‹ï¼šæŠ€æœ¯é€‰å‹å†³ç­–</strong></p>
<pre><code class="hljs language-vbnet" lang="vbnet"><span class="hljs-symbol">Winston:</span> <span class="hljs-string">"ä»æ¶æ„è§’åº¦ï¼Œæˆ‘é€‰æ–¹æ¡ˆ A..."</span>
<span class="hljs-symbol">Dev:</span> <span class="hljs-string">"ä½†æ–¹æ¡ˆ A çš„æ€§èƒ½æœ‰é—®é¢˜ï¼Œæˆ‘å»ºè®®æ–¹æ¡ˆ B..."</span>
<span class="hljs-symbol">QA:</span> <span class="hljs-string">"ä¸¤ä¸ªæ–¹æ¡ˆçš„å¯æµ‹è¯•æ€§éƒ½ä¸å¤ªç†æƒ³..."</span>
<span class="hljs-symbol">Mary:</span> <span class="hljs-string">"æˆæœ¬å’Œæ”¶ç›Šå‘¢ï¼Ÿæ—¶é—´æˆæœ¬å¦‚ä½•ï¼Ÿ"</span>
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆé€‚åˆï¼š</strong></p>
<ul>
<li>Agent ä¹‹é—´å¯ä»¥è¾©è®º</li>
<li>é¿å…"ä¸€è¨€å ‚"</li>
<li>æœ€ç»ˆå†³ç­–æ›´å…¨é¢</li>
</ul>
<hr/>
<h4 data-id="heading-11">3.2 Subagents é€‚ç”¨åœºæ™¯</h4>
<h5 data-id="heading-12">âœ… åœºæ™¯ 1ï¼šæ·±åº¦æ–‡æ¡£åˆ†æ</h5>
<p><strong>æ¡ˆä¾‹ï¼šåˆ†æå¤§å‹ PRD æ–‡æ¡£</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># ä¸» Agent ä¸Šä¸‹æ–‡ï¼ˆç©ºé—´æœ‰é™ï¼‰</span>
ä¸» Agent éœ€è¦åˆ†æ <span class="hljs-number">5000</span> è¡Œçš„ PRD æ–‡æ¡£

âŒ å¦‚æœç›´æ¥å…¨éƒ¨åŠ è½½ï¼š
    â†’ ä¸Šä¸‹æ–‡çˆ†ç‚¸
    â†’ å…³é”®ä¿¡æ¯è¢«æ·¹æ²¡
    â†’ éš¾ä»¥èšç„¦

âœ… ä½¿ç”¨ Subagents:
    <span class="hljs-keyword">for</span> chapter <span class="hljs-keyword">in</span> prd.chapters:
        subagent = create_subagent(chapter)
        result = subagent.analyze()
        results.append(result)

    ä¸» Agent æ•´åˆ resultsï¼Œæå–å…³é”®ä¿¡æ¯
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆé€‚åˆï¼š</strong></p>
<ul>
<li>é¿å…ä¸Šä¸‹æ–‡é›ªçƒ</li>
<li>æ¯ä¸ª Subagent ä¸“æ³¨åˆ†æç‰¹å®šç« èŠ‚</li>
<li>æé«˜åˆ†ææ·±åº¦å’Œå‡†ç¡®æ€§</li>
</ul>
<hr/>
<h5 data-id="heading-13">âœ… åœºæ™¯ 2ï¼šå¹¶è¡Œå¤„ç†ç‹¬ç«‹ä»»åŠ¡</h5>
<p><strong>æ¡ˆä¾‹ï¼šä»£ç å®¡æŸ¥çš„å¤šç»´åº¦åˆ†æ</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># åŒæ—¶è°ƒç”¨å¤šä¸ª Subagents å¹¶è¡Œå¤„ç†</span>
results = parallel_execute([
    create_subagent(<span class="hljs-string">"security_check"</span>, code),
    create_subagent(<span class="hljs-string">"performance_check"</span>, code),
    create_subagent(<span class="hljs-string">"style_check"</span>, code),
    create_subagent(<span class="hljs-string">"test_coverage_check"</span>, code)
])

<span class="hljs-comment"># ä¸» Agent ç»¼åˆç»“æœ</span>
final_report = consolidate(results)
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆé€‚åˆï¼š</strong></p>
<ul>
<li>ä»»åŠ¡ä¹‹é—´ç›¸äº’ç‹¬ç«‹</li>
<li>å¯ä»¥å¹¶è¡Œæ‰§è¡Œï¼Œæé«˜æ•ˆç‡</li>
<li>ç»“æœæ ‡å‡†åŒ–ï¼Œæ˜“äºæ•´åˆ</li>
</ul>
<hr/>
<h5 data-id="heading-14">âœ… åœºæ™¯ 3ï¼šå·¥å…·å°è£…å’Œå¤ç”¨</h5>
<p><strong>æ¡ˆä¾‹ï¼šæ•°æ®åº“æŸ¥è¯¢å·¥å…·</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># ä¸» Agent å®šä¹‰ä¸€ä¸ª Subagent ä½œä¸ºå·¥å…·</span>
<span class="hljs-meta">@subagent</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">query_database</span>(<span class="hljs-params">query</span>):
    <span class="hljs-comment"># æ‰§è¡Œæ•°æ®åº“æŸ¥è¯¢</span>
    <span class="hljs-comment"># è¿”å›ç»“æœ</span>
    <span class="hljs-keyword">pass</span>

<span class="hljs-comment"># ä¸» Agent åœ¨éœ€è¦æ—¶è°ƒç”¨</span>
ä¸» Agent: <span class="hljs-string">"æŸ¥è¯¢è¿‡å» 30 å¤©çš„é”€å”®é¢"</span>
    â†“
è°ƒç”¨ query_database Subagent
    â†“
è¿”å›æ•°æ®
    â†“
ä¸» Agent è¿›è¡Œåˆ†æå’Œå±•ç¤º
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆé€‚åˆï¼š</strong></p>
<ul>
<li>å°†å¤æ‚æ“ä½œå°è£…ä¸º Subagent</li>
<li>ä¸» Agent ä¸éœ€è¦çŸ¥é“å®ç°ç»†èŠ‚</li>
<li>æé«˜ä»£ç å¤ç”¨æ€§</li>
</ul>
<hr/>
<h3 data-id="heading-15">å››ã€è®¾è®¡å†³ç­–æ¡†æ¶</h3>
<h4 data-id="heading-16">4.1 é€‰æ‹©æµç¨‹å›¾</h4>
<pre><code class="hljs language-scss" lang="scss">å¼€å§‹
    â†“
ä»»åŠ¡æ˜¯å¦éœ€è¦**å¤šä¸ªä¸“ä¸šè§†è§’**ï¼Ÿ
    â”œâ”€ æ˜¯ â†’ AgentTeams
    â”‚   â””â”€ Agent ä¹‹é—´éœ€è¦**ç›¸äº’å¯¹è¯/è¾©è®º**ï¼Ÿ
    â”‚       â”œâ”€ æ˜¯ â†’ ğŸ¯ **AgentTeams** (Party Mode)
    â”‚       â””â”€ å¦ â†’ è€ƒè™‘æ˜¯å¦åº”è¯¥ç”¨å•ä¸€ Agent
    â”‚
    â””â”€ å¦ â†’ å•ä¸€ Agent è¶³å¤Ÿ
        â””â”€ ä»»åŠ¡æ˜¯å¦ä¼šå¯¼è‡´**ä¸Šä¸‹æ–‡çˆ†ç‚¸**ï¼Ÿ
            â”œâ”€ æ˜¯ â†’ ğŸ§© **Subagents** (ä»»åŠ¡æ‹†åˆ† + ä¸Šä¸‹æ–‡éš”ç¦»)
            â””â”€ å¦ â†’ å•ä¸€ Agent ç›´æ¥å¤„ç†
</code></pre>
<h4 data-id="heading-17">4.2 æ£€æŸ¥æ¸…å•</h4>
<h5 data-id="heading-18">AgentTeams æ£€æŸ¥æ¸…å•</h5>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> éœ€è¦ <strong>2 ä¸ªä»¥ä¸Šä¸“ä¸šè§’è‰²</strong>çš„è¾“å…¥</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> Agent ä¹‹é—´éœ€è¦<strong>ç›¸äº’å¯¹è¯æˆ–è¾©è®º</strong></li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> è¾“å‡ºéœ€è¦<strong>å¤šè§†è§’ç»¼åˆ</strong></li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> Agent æ•°é‡åœ¨ <strong>3-10 ä¸ª</strong>ä¹‹é—´ï¼ˆæœ€ä½³å®è·µï¼‰</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> æœ‰æ˜ç¡®çš„<strong>åè°ƒå™¨</strong>ï¼ˆOrchestratorï¼‰</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> Agent ä¹‹é—´æœ‰<strong>äº’è¡¥æ€§</strong>ï¼ˆè€Œéé‡å¤ï¼‰</li>
</ul>
<h5 data-id="heading-19">Subagents æ£€æŸ¥æ¸…å•</h5>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> ä»»åŠ¡å¯ä»¥<strong>æ¨¡å—åŒ–æ‹†åˆ†</strong></li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> å­ä»»åŠ¡ä¹‹é—´<strong>ç›¸äº’ç‹¬ç«‹</strong></li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> éœ€è¦<strong>é˜²æ­¢ä¸Šä¸‹æ–‡é›ªçƒ</strong></li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> å­ä»»åŠ¡æœ‰<strong>æ ‡å‡†åŒ–è¾“å‡ºæ ¼å¼</strong></li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> å¯ä»¥<strong>å¹¶è¡Œæ‰§è¡Œ</strong></li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> Subagent ä¸éœ€è¦<strong>ç‹¬ç«‹äººæ ¼</strong></li>
</ul>
<hr/>
<h3 data-id="heading-20">äº”ã€æœ€ä½³å®è·µä¸é™·é˜±</h3>
<h4 data-id="heading-21">5.1 AgentTeams æœ€ä½³å®è·µ</h4>
<h5 data-id="heading-22">âœ… å®è·µ 1ï¼šåˆç†æ§åˆ¶å›¢é˜Ÿè§„æ¨¡</h5>
<p><strong>åæ¨¡å¼ï¼š</strong></p>
<pre><code class="hljs language-markdown" lang="markdown">âŒ åˆ›å»º 20 ä¸ª Agent çš„è¶…å¤§å›¢é˜Ÿ
<span class="hljs-code">    â†’ å¯¹è¯æ··ä¹±ï¼Œéš¾ä»¥åè°ƒ
    â†’ å“åº”æ—¶é—´é•¿
    â†’ ä¿¡æ¯è¿‡è½½
</span></code></pre>
<p><strong>æœ€ä½³å®è·µï¼š</strong></p>
<pre><code class="hljs language-markdown" lang="markdown">âœ… 3-5 ä¸ªæ ¸å¿ƒ Agentï¼ŒæŒ‰éœ€æ‰©å±•
<span class="hljs-bullet">    -</span> æ ¸å¿ƒå›¢é˜Ÿï¼šåˆ†æå¸ˆ + æ¶æ„å¸ˆ + å¼€å‘
<span class="hljs-bullet">    -</span> æŒ‰éœ€è¡¥å……ï¼šQAã€è®¾è®¡å¸ˆã€PM
<span class="hljs-bullet">    -</span> é¿å…å†—ä½™è§’è‰²
</code></pre>
<hr/>
<h5 data-id="heading-23">âœ… å®è·µ 2ï¼šè®¾è®¡æ˜ç¡®çš„åè°ƒé€»è¾‘</h5>
<p><strong>BMAD Party Mode çš„åè°ƒè§„åˆ™ï¼š</strong></p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># Agent Selection Intelligence</span>
<span class="hljs-bullet">-</span> <span class="hljs-string">åˆ†æç”¨æˆ·æ¶ˆæ¯çš„é¢†åŸŸå’Œä¸“é•¿éœ€æ±‚</span>
<span class="hljs-bullet">-</span> <span class="hljs-string">æ ¹æ®è§’è‰²ã€èƒ½åŠ›å’ŒåŸåˆ™é€‰æ‹©</span> <span class="hljs-number">2</span><span class="hljs-number">-3</span> <span class="hljs-string">ä¸ªæœ€ç›¸å…³çš„</span> <span class="hljs-string">Agent</span>
<span class="hljs-bullet">-</span> <span class="hljs-string">è€ƒè™‘å¯¹è¯ä¸Šä¸‹æ–‡å’Œä¹‹å‰</span> <span class="hljs-string">Agent</span> <span class="hljs-string">çš„è´¡çŒ®</span>
<span class="hljs-bullet">-</span> <span class="hljs-string">ç¡®ä¿è§†è§’çš„å¹³è¡¡æ€§</span>

<span class="hljs-comment"># Priority Handling</span>
<span class="hljs-bullet">-</span> <span class="hljs-string">å¦‚æœç”¨æˆ·ç‚¹åæŸä¸ª</span> <span class="hljs-string">Agentï¼Œä¼˜å…ˆè¯¥</span> <span class="hljs-string">Agent</span> <span class="hljs-string">+</span> <span class="hljs-number">1</span><span class="hljs-number">-2</span> <span class="hljs-string">ä¸ªäº’è¡¥</span> <span class="hljs-string">Agent</span>
<span class="hljs-bullet">-</span> <span class="hljs-string">è½®æ¢</span> <span class="hljs-string">Agent</span> <span class="hljs-string">é€‰æ‹©ï¼Œç¡®ä¿å¤šå…ƒå‚ä¸</span>
<span class="hljs-bullet">-</span> <span class="hljs-string">å¯ç”¨è‡ªç„¶çš„è·¨å¯¹è¯å’Œ</span> <span class="hljs-string">Agent</span> <span class="hljs-string">é—´äº’åŠ¨</span>
</code></pre>
<hr/>
<h5 data-id="heading-24">âœ… å®è·µ 3ï¼šä¿æŒ Agent ä¸ªæ€§ä¸€è‡´æ€§</h5>
<p><strong>ç¤ºä¾‹ï¼šBMAD Agent ä¸ªæ€§å®šä¹‰</strong></p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># Winston (Architect)</span>
<span class="hljs-attr">role:</span> <span class="hljs-string">System</span> <span class="hljs-string">Architect</span> <span class="hljs-string">+</span> <span class="hljs-string">Technical</span> <span class="hljs-string">Design</span> <span class="hljs-string">Leader</span>
<span class="hljs-attr">communication_style:</span> <span class="hljs-string">"Speaks in calm, pragmatic tones,
                    balancing 'what could be' with 'what should be'"</span>
<span class="hljs-attr">principles:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">"Embrace boring technology for stability"</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">"Design simple solutions that scale when needed"</span>

<span class="hljs-comment"># Mary (Business Analyst)</span>
<span class="hljs-attr">communication_style:</span> <span class="hljs-string">"Speaks with the excitement of a treasure hunter
                      - thrilled by every clue"</span>
<span class="hljs-attr">principles:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">"Ground findings in verifiable evidence"</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">"Every business challenge has root causes waiting to be discovered"</span>
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆé‡è¦ï¼š</strong></p>
<ul>
<li>è®©ç”¨æˆ·äº§ç”Ÿä¿¡ä»»æ„Ÿå’Œä»£å…¥æ„Ÿ</li>
<li>ä¸åŒè§†è§’çš„ç¢°æ’æ›´æœ‰ä»·å€¼</li>
<li>é¿å…"åƒäººä¸€é¢"</li>
</ul>
<hr/>
<h4 data-id="heading-25">5.2 Subagents æœ€ä½³å®è·µ</h4>
<h5 data-id="heading-26">âœ… å®è·µ 1ï¼šä»»åŠ¡æ‹†åˆ†è¦åˆç†</h5>
<p><strong>åæ¨¡å¼ï¼š</strong></p>
<pre><code class="hljs language-markdown" lang="markdown">âŒ è¿‡åº¦æ‹†åˆ†
<span class="hljs-code">    ä¸» Agent è°ƒç”¨ 50 ä¸ª Subagents
    â†’ è°ƒåº¦å¼€é”€è¿‡å¤§
    â†’ é€šä¿¡æˆæœ¬é«˜
    â†’ éš¾ä»¥è°ƒè¯•
</span></code></pre>
<p><strong>æœ€ä½³å®è·µï¼š</strong></p>
<pre><code class="hljs language-markdown" lang="markdown">âœ… åˆç†æ‹†åˆ†ï¼ˆ3-7 ä¸ª Subagentsï¼‰
<span class="hljs-bullet">    -</span> æŒ‰åŠŸèƒ½æ¨¡å—æ‹†åˆ†
<span class="hljs-bullet">    -</span> æŒ‰æ•°æ®ç»´åº¦æ‹†åˆ†
<span class="hljs-bullet">    -</span> ç¡®ä¿æ¯ä¸ª Subagent æœ‰æ˜ç¡®ä»·å€¼
</code></pre>
<hr/>
<h5 data-id="heading-27">âœ… å®è·µ 2ï¼šæ ‡å‡†åŒ–è¾“å‡ºæ ¼å¼</h5>
<p><strong>BMAD çš„ Subagent è¾“å‡ºæ¨¡æ¿ï¼š</strong></p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># æ¯ä¸ª Subagent è¿”å›ç»“æ„åŒ–ç»“æœ</span>
<span class="hljs-attr">subagent_output:</span>
  <span class="hljs-attr">summary:</span> <span class="hljs-string">"ç®€è¦æ€»ç»“"</span>
  <span class="hljs-attr">details:</span> <span class="hljs-string">"è¯¦ç»†ä¿¡æ¯"</span>
  <span class="hljs-attr">findings:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">"å‘ç° 1"</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">"å‘ç° 2"</span>
  <span class="hljs-attr">recommendations:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">"å»ºè®® 1"</span>
  <span class="hljs-attr">confidence:</span> <span class="hljs-number">0.85</span>  <span class="hljs-comment"># ç½®ä¿¡åº¦</span>
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆé‡è¦ï¼š</strong></p>
<ul>
<li>ä¸» Agent å®¹æ˜“æ•´åˆç»“æœ</li>
<li>å¯ä»¥è‡ªåŠ¨åŒ–å¤„ç†</li>
<li>ä¾¿äºè´¨é‡è¯„ä¼°</li>
</ul>
<hr/>
<h5 data-id="heading-28">âœ… å®è·µ 3ï¼šåˆç†åˆ©ç”¨å¹¶è¡Œèƒ½åŠ›</h5>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># å¹¶è¡Œè°ƒç”¨å¤šä¸ª Subagents</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">parallel_analysis</span>(<span class="hljs-params">code</span>):
    results = <span class="hljs-keyword">await</span> asyncio.gather(
        security_check(code),
        performance_check(code),
        style_check(code),
        test_coverage_check(code)
    )
    <span class="hljs-keyword">return</span> consolidate(results)
</code></pre>
<p><strong>æ€§èƒ½æå‡ï¼š</strong></p>
<ul>
<li>ä¸²è¡Œæ‰§è¡Œï¼š4 ä¸ªä»»åŠ¡ Ã— 10 ç§’ = 40 ç§’</li>
<li>å¹¶è¡Œæ‰§è¡Œï¼šmax(10, 10, 10, 10) = 10 ç§’</li>
<li><strong>æå‡ 4 å€ï¼</strong></li>
</ul>
<hr/>
<h4 data-id="heading-29">5.3 å¸¸è§é™·é˜±</h4>
<h5 data-id="heading-30">âš ï¸ é™·é˜± 1ï¼šæ··æ·† AgentTeams å’Œ Subagents</h5>
<p><strong>é”™è¯¯ç†è§£ï¼š</strong></p>
<pre><code class="hljs language-arduino" lang="arduino">âŒ <span class="hljs-string">"æˆ‘ç”¨ 10 ä¸ª Subagentsï¼Œè¿™å°±æ˜¯ AgentTeams å§ï¼Ÿ"</span>
    â†’ é”™ï¼Subagents æ²¡æœ‰ç‹¬ç«‹äººæ ¼ï¼Œä¸èƒ½å¯¹è¯
</code></pre>
<p><strong>æ­£ç¡®ç†è§£ï¼š</strong></p>
<pre><code class="hljs language-ini" lang="ini">âœ… <span class="hljs-attr">AgentTeams</span> = å¤šä¸ªæœ‰ç‹¬ç«‹äººæ ¼çš„ Agent åä½œ
âœ… <span class="hljs-attr">Subagents</span> = å•ä¸€ Agent çš„åŠŸèƒ½æ¨¡å—
</code></pre>
<hr/>
<h5 data-id="heading-31">âš ï¸ é™·é˜± 2ï¼šè¿‡åº¦ä½¿ç”¨ AgentTeams</h5>
<p><strong>åæ¨¡å¼ï¼š</strong></p>
<pre><code class="hljs language-erlang" lang="erlang">âŒ ç®€å•ä»»åŠ¡ä¹Ÿç”¨ Party Mode
    ç”¨æˆ·ï¼š<span class="hljs-string">"æ€ä¹ˆç”¨ Git æäº¤ä»£ç ï¼Ÿ"</span>
    â†’ è°ƒç”¨ <span class="hljs-number">5</span> ä¸ª Agent è®¨è®º...
    â†’ æµªè´¹èµ„æºï¼Œå“åº”æ…¢
</code></pre>
<p><strong>æ­£ç¡®åšæ³•ï¼š</strong></p>
<pre><code class="hljs">âœ… ç®€å•é—®é¢˜ç”¨å•ä¸€ Agent
âœ… å¤æ‚é—®é¢˜æ‰ç”¨ AgentTeams
</code></pre>
<hr/>
<h5 data-id="heading-32">âš ï¸ é™·é˜± 3ï¼šå¿½è§†ä¸Šä¸‹æ–‡ç®¡ç†</h5>
<p><strong>åæ¨¡å¼ï¼š</strong></p>
<pre><code class="hljs language-markdown" lang="markdown">âŒ Subagents å…±äº«ä¸Šä¸‹æ–‡
<span class="hljs-code">    â†’ ä¿¡æ¯æ³„éœ²
    â†’ æ±¡æŸ“ä¸» Agent çš„ä¸Šä¸‹æ–‡
</span></code></pre>
<p><strong>æ­£ç¡®åšæ³•ï¼š</strong></p>
<pre><code class="hljs">âœ… æ¯ä¸ª Subagent æœ‰ç‹¬ç«‹ä¸Šä¸‹æ–‡
âœ… åªè¿”å›å…³é”®ç»“æœç»™ä¸» Agent
âœ… åŠæ—¶æ¸…ç†æ— ç”¨ä¸Šä¸‹æ–‡
</code></pre>
<hr/>
<h3 data-id="heading-33">å…­ã€å®æˆ˜æ¡ˆä¾‹ï¼šBMAD æ¡†æ¶çš„åº”ç”¨</h3>
<h4 data-id="heading-34">6.1 BMAD AgentTeamsï¼šParty Mode å®ç°</h4>
<p><strong>æ¶æ„å›¾ï¼š</strong></p>
<pre><code class="hljs language-scss" lang="scss">Party Mode Orchestrator
         â†“
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”
    â†“         â†“     â†“    â†“     â†“
 ğŸ“ŠMary    ğŸ—ï¸Winston  ğŸ’»Dev  âœ…QA  ğŸ¨Zara
 Analyst   Architect  Dev    QA   Designer
 (BA)       (Arch)          (Test)  (UX)
</code></pre>
<h4 data-id="heading-35">6.2 BMAD Subagentsï¼šPRD åˆ›å»ºæµç¨‹</h4>
<p><strong>æµç¨‹å›¾ï¼š</strong></p>
<pre><code class="hljs language-scss" lang="scss">ä¸» Agent (Create PRD Workflow)
         â†“
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â†“            â†“            â†“          â†“
Subagent <span class="hljs-number">1</span>   Subagent <span class="hljs-number">2</span>   Subagent <span class="hljs-number">3</span>   ...
(åˆ†æéœ€æ±‚)   (ç¼–å†™åŠŸèƒ½)   (è¯„å®¡è´¨é‡)
    â†“            â†“            â†“
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
       æ•´åˆæ‰€æœ‰ç»“æœ
              â†“
        ç”Ÿæˆæœ€ç»ˆ PRD
</code></pre>
<hr/>
<h3 data-id="heading-36">ä¸ƒã€æ€»ç»“ä¸å±•æœ›</h3>
<h4 data-id="heading-37">7.1 æ ¸å¿ƒè¦ç‚¹å›é¡¾</h4>






























<table><thead><tr><th>ç»´åº¦</th><th>AgentTeams</th><th>Subagents</th></tr></thead><tbody><tr><td><strong>æ ¸å¿ƒä»·å€¼</strong></td><td>é›†ä½“æ™ºæ…§ã€å¤šè§†è§’ç¢°æ’</td><td>æ¨¡å—åŒ–ã€ä¸Šä¸‹æ–‡éš”ç¦»</td></tr><tr><td><strong>é€‚ç”¨åœºæ™¯</strong></td><td>å¤æ‚å†³ç­–ã€å¤´è„‘é£æš´ã€äº‰è®®è®¨è®º</td><td>æ·±åº¦åˆ†æã€å¹¶è¡Œå¤„ç†ã€å·¥å…·å°è£…</td></tr><tr><td><strong>å…³é”®ç‰¹å¾</strong></td><td>ç‹¬ç«‹äººæ ¼ã€ç›¸äº’å¯¹è¯ã€åè°ƒå™¨</td><td>åŠŸèƒ½å¯¼å‘ã€æŒ‰éœ€è°ƒç”¨ã€ç‹¬ç«‹ä¸Šä¸‹æ–‡</td></tr><tr><td><strong>è®¾è®¡åŸåˆ™</strong></td><td>æ§åˆ¶è§„æ¨¡ï¼ˆ3-10 ä¸ªï¼‰ã€æ˜ç¡®åè°ƒã€ä¿æŒä¸ªæ€§</td><td>åˆç†æ‹†åˆ†ã€æ ‡å‡†åŒ–è¾“å‡ºã€åˆ©ç”¨å¹¶è¡Œ</td></tr></tbody></table>
<hr/>
<h4 data-id="heading-38">7.2 é€‰æ‹©å†³ç­–çŸ©é˜µ</h4>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-code">                    ä»»åŠ¡å¤æ‚åº¦
                      â†—      â†˜
                   ç®€å•          å¤æ‚
                    â†“            â†“
             å•ä¸€ Agent      AgentTeams
                    â†“
            æ˜¯å¦éœ€è¦ä¸Šä¸‹æ–‡éš”ç¦»ï¼Ÿ
                 â†“
           æ˜¯ â†’ Subagents
           å¦ â†’ å•ä¸€ Agent
</span></code></pre>
<hr/>
<h4 data-id="heading-39">7.3 æœªæ¥å±•æœ›</h4>
<p><strong>è¶‹åŠ¿ 1ï¼šæ›´æ™ºèƒ½çš„åè°ƒç®—æ³•</strong></p>
<ul>
<li>åŸºäºå¼ºåŒ–å­¦ä¹ çš„ Agent é€‰æ‹©</li>
<li>åŠ¨æ€è°ƒæ•´å›¢é˜Ÿè§„æ¨¡</li>
<li>ä¸ªæ€§åŒ–åä½œæ¨¡å¼</li>
</ul>
<p><strong>è¶‹åŠ¿ 2ï¼šè·¨ Agent çš„çŸ¥è¯†å…±äº«</strong></p>
<ul>
<li>Agent ä¹‹é—´çš„ç»éªŒç§¯ç´¯</li>
<li>å…±äº«çŸ¥è¯†å›¾è°±</li>
<li>é›†ä½“å­¦ä¹ æœºåˆ¶</li>
</ul>
<p><strong>è¶‹åŠ¿ 3ï¼šæ··åˆæ¨¡å¼</strong></p>
<ul>
<li>AgentTeams å†…éƒ¨ä½¿ç”¨ Subagents</li>
<li>çµæ´»åˆ‡æ¢åä½œæ¨¡å¼</li>
<li>æ›´é«˜æ•ˆçš„èµ„æºåˆ©ç”¨</li>
</ul>
<h3 data-id="heading-40">ç»“è¯­</h3>
<p>AgentTeams å’Œ Subagents æ˜¯å¤šæ™ºèƒ½ä½“ç³»ç»Ÿä¸­çš„ä¸¤ç§æ ¸å¿ƒæ¨¡å¼ï¼Œå®ƒä»¬å„æœ‰ä¾§é‡ã€äº’è¡¥æ€§å¼ºã€‚<strong>AgentTeams é€‚åˆéœ€è¦é›†ä½“æ™ºæ…§çš„åœºæ™¯ï¼ŒSubagents é€‚åˆéœ€è¦æ¨¡å—åŒ–éš”ç¦»çš„åœºæ™¯ã€‚</strong></p>
<p>æ­£ç¡®ç†è§£å¹¶åº”ç”¨è¿™ä¸¤ç§æ¨¡å¼ï¼Œå¯ä»¥æ˜¾è‘—æå‡ AI Agent ç³»ç»Ÿçš„èƒ½åŠ›ä¸Šé™å’Œå¼€å‘æ•ˆç‡ã€‚å¸Œæœ›æœ¬æ–‡èƒ½å¸®åŠ©ä½ åœ¨å®é™…é¡¹ç›®ä¸­åšå‡ºæ›´å¥½çš„æŠ€æœ¯å†³ç­–ï¼</p>
<hr/>
<p><strong>å¦‚æœè¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©ï¼Œæ¬¢è¿ç‚¹èµã€æ”¶è—ã€è¯„è®ºï¼æœ‰ä»»ä½•é—®é¢˜ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºè®¨è®ºï½</strong></p>
<hr/>
<p><strong>å…¨æ–‡å®Œï¼</strong></p>
<blockquote>
<p>Happy Coding! ğŸš€</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ğŸš€ Vercel AI SDK ä½¿ç”¨æŒ‡å—ï¼šNuxt 3 + Element Plus å®ç°ç¬¬ä¸€ä¸ªAI èŠå¤©åº”ç”¨]]></title>    <link>https://juejin.cn/post/7605114266024001587</link>    <guid>https://juejin.cn/post/7605114266024001587</guid>    <pubDate>2026-02-11T06:12:13.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605114266024001587" data-draft-id="7605136148592066587" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ğŸš€ Vercel AI SDK ä½¿ç”¨æŒ‡å—ï¼šNuxt 3 + Element Plus å®ç°ç¬¬ä¸€ä¸ªAI èŠå¤©åº”ç”¨"/> <meta itemprop="keywords" content="Vue.js,Agent"/> <meta itemprop="datePublished" content="2026-02-11T06:12:13.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ZaneAI"/> <meta itemprop="url" content="https://juejin.cn/user/186266444380203"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ğŸš€ Vercel AI SDK ä½¿ç”¨æŒ‡å—ï¼šNuxt 3 + Element Plus å®ç°ç¬¬ä¸€ä¸ªAI èŠå¤©åº”ç”¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/186266444380203/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ZaneAI
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-11T06:12:13.000Z" title="Wed Feb 11 2026 06:12:13 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>Vercel AI SDK æ˜¯ç›®å‰å‰ç«¯åœˆæœ€ç«çš„ AI å¼€å‘åº“ä¹‹ä¸€ï¼Œå®ƒæä¾›äº†ä¸€å¥—ç»Ÿä¸€çš„æ¥å£æ¥å¯¹æ¥å„ç§å¤§æ¨¡å‹ï¼ˆOpenAI, Anthropic, Mistral ç­‰ï¼‰ã€‚ä½†æ˜¯ï¼Œå®˜æ–¹æ–‡æ¡£ä¸»è¦ä»¥ OpenAI æˆ– Vercel AI Gateway ä¸ºä¾‹ï¼Œå¯¹äºå›½å†…å¼€å‘è€…æ¥è¯´ï¼Œç½‘ç»œè¿æ¥å’Œæ”¯ä»˜å¾€å¾€æ˜¯æœ€å¤§çš„ç—›ç‚¹ã€‚</p>
<p>ä»Šå¤©è¿™ç¯‡æ•™ç¨‹ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ <strong>Nuxt 3</strong> ç»“åˆ <strong>Vercel AI SDK</strong>ï¼Œå¹¶æ¥å…¥å›½å†…å¼ºå¤§çš„ <strong>DeepSeekï¼ˆæ·±åº¦æ±‚ç´¢ï¼‰</strong> APIï¼Œæ‰‹æŠŠæ‰‹å¸¦ä½ å¼€å‘ä¸€ä¸ªä¸æ»‘çš„ AI èŠå¤©åº”ç”¨ã€‚</p>
<p><strong>ä¸ºä»€ä¹ˆé€‰æ‹©è¿™å¥—æŠ€æœ¯æ ˆï¼Ÿ</strong></p>
<ul>
<li><strong>Nuxt 3</strong>: Vue 3 çš„æœ€ä½³å…¨æ ˆæ¡†æ¶ï¼Œå¼€å‘ä½“éªŒæä½³ã€‚</li>
<li><strong>Vercel AI SDK (Core + Vue)</strong>: å¤„ç†æµå¼ä¼ è¾“ï¼ˆStreamingï¼‰å’ŒçŠ¶æ€ç®¡ç†çš„ç¥å™¨ï¼Œçœå»è‡ªå·±å†™ WebSocket æˆ– SSE çš„éº»çƒ¦ã€‚</li>
<li><strong>DeepSeek</strong>: å›½å†…é¡¶å°–å¤§æ¨¡å‹ï¼ŒAPI å®Œå…¨å…¼å®¹ OpenAI æ ¼å¼ï¼Œä»·æ ¼äº²æ°‘ä¸”æ— éœ€å¤æ‚çš„ç½‘ç»œé…ç½®ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-1">å‡†å¤‡å·¥ä½œ</h2>
<ol>
<li><strong>Node.js ç¯å¢ƒ</strong>: å»ºè®® v18 æˆ–æ›´é«˜ç‰ˆæœ¬ã€‚</li>
<li><strong>DeepSeek API Key</strong>: å» <a href="https://link.juejin.cn?target=https%3A%2F%2Fplatform.deepseek.com%2F" target="_blank" title="https://platform.deepseek.com/" ref="nofollow noopener noreferrer">DeepSeek å¼€æ”¾å¹³å°</a> ç”³è¯·ä¸€ä¸ª API Keyã€‚ï¼ˆä½ ä¹Ÿå¯ä»¥ç”¨ Moonshot/Kimiã€é˜¿é‡Œé€šä¹‰åƒé—®ç­‰æ”¯æŒ OpenAI å…¼å®¹åè®®çš„å›½å†…æ¨¡å‹ï¼Œé…ç½®æ–¹æ³•ç±»ä¼¼ï¼‰ã€‚</li>
</ol>
<hr/>
<h2 data-id="heading-2">ç¬¬ä¸€æ­¥ï¼šåˆå§‹åŒ– Nuxt é¡¹ç›®</h2>
<p>æ‰“å¼€ç»ˆç«¯ï¼Œä½¿ç”¨ <code>nuxi</code> åˆ›å»ºä¸€ä¸ªæ–°çš„ Nuxt é¡¹ç›®ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">npx nuxi@latest init my-ai-app
<span class="hljs-built_in">cd</span> my-ai-app

</code></pre>
<p>å®‰è£…ä¾èµ–ï¼ˆå»ºè®®ä½¿ç”¨ pnpm æˆ– npmï¼‰ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">npm install

</code></pre>
<hr/>
<h2 data-id="heading-3">ç¬¬äºŒæ­¥ï¼šå®‰è£… AI SDK å’Œç›¸å…³ä¾èµ–</h2>
<p>æˆ‘ä»¬éœ€è¦å®‰è£… <code>ai</code> æ ¸å¿ƒåº“ã€<code>@ai-sdk/core</code> æ ¸å¿ƒæ¨¡å—ã€Vue é€‚é…åº“ä»¥åŠ OpenAI é€‚é…å™¨ã€‚åŒæ—¶å®‰è£… <code>zod</code> ç”¨äºå®šä¹‰æ•°æ®ç»“æ„ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">npm install ai @ai-sdk/core @ai-sdk/vue @ai-sdk/openai zod

</code></pre>
<blockquote>
<p><strong>æ³¨æ„</strong>ï¼šè¿™é‡Œæˆ‘ä»¬è™½ç„¶ç”¨çš„æ˜¯ DeepSeekï¼Œä½†å› ä¸ºé€šè¿‡ OpenAI åè®®è°ƒç”¨ï¼Œæ‰€ä»¥å®‰è£… <code>@ai-sdk/openai</code> æ˜¯æ­£ç¡®çš„åšæ³•ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-4">ç¬¬ä¸‰æ­¥ï¼šé…ç½®ç¯å¢ƒå˜é‡</h2>
<p>åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª <code>.env</code> æ–‡ä»¶ï¼Œå¡«å…¥ä½ çš„ DeepSeek API Keyã€‚</p>
<pre><code class="hljs language-env" lang="env"># .env æ–‡ä»¶
NUXT_DEEPSEEK_API_KEY=sk-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

</code></pre>
<p>æ¥ä¸‹æ¥ï¼Œä¸ºäº†è®© Nuxt èƒ½è¯»å–åˆ°è¿™ä¸ªå˜é‡ï¼Œæˆ‘ä»¬éœ€è¦ä¿®æ”¹ <code>nuxt.config.ts</code>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// nuxt.config.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineNuxtConfig</span>({
  <span class="hljs-attr">compatibilityDate</span>: <span class="hljs-string">'2024-11-01'</span>,
  <span class="hljs-attr">devtools</span>: { <span class="hljs-attr">enabled</span>: <span class="hljs-literal">true</span> },
  
  <span class="hljs-comment">// å°†ç¯å¢ƒå˜é‡æš´éœ²ç»™æœåŠ¡ç«¯è¿è¡Œæ—¶</span>
  <span class="hljs-attr">runtimeConfig</span>: {
    <span class="hljs-attr">deepseekApiKey</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">NUXT_DEEPSEEK_API_KEY</span>,
  },
})

</code></pre>
<hr/>
<h2 data-id="heading-5">ç¬¬å››æ­¥ï¼šåˆ›å»ºåç«¯ API è·¯ç”± (æ ¸å¿ƒ)</h2>
<p>è¿™æ˜¯æœ€å…³é”®çš„ä¸€æ­¥ã€‚æˆ‘ä»¬éœ€è¦åœ¨ Nuxt çš„æœåŠ¡ç«¯åˆ›å»ºä¸€ä¸ª API æ¥å£ï¼Œç”¨æ¥å¤„ç†å‰ç«¯å‘æ¥çš„æ¶ˆæ¯ï¼Œå¹¶è°ƒç”¨ DeepSeek æ¨¡å‹ï¼Œæœ€åå°†ç»“æœä»¥**æµï¼ˆStreamï¼‰**çš„å½¢å¼è¿”å›ç»™å‰ç«¯ã€‚</p>
<p>åˆ›å»ºæ–‡ä»¶ <code>server/api/chat.ts</code>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// server/api/chat.ts</span>
<span class="hljs-keyword">import</span> { createOpenAI } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ai-sdk/openai'</span>;
<span class="hljs-keyword">import</span> { streamText } <span class="hljs-keyword">from</span> <span class="hljs-string">'ai'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineLazyEventHandler</span>(<span class="hljs-keyword">async</span> () =&gt; {
  <span class="hljs-keyword">const</span> config = <span class="hljs-title function_">useRuntimeConfig</span>();
  <span class="hljs-keyword">const</span> apiKey = config.<span class="hljs-property">deepseekApiKey</span>;

  <span class="hljs-keyword">if</span> (!apiKey) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'æœªæ‰¾åˆ° DeepSeek API Key'</span>);

  <span class="hljs-comment">// 1. åˆå§‹åŒ– OpenAI å®¢æˆ·ç«¯ï¼Œä½†åœ¨ baseURL ä¸­æŒ‡å‘ DeepSeek çš„åœ°å€</span>
  <span class="hljs-keyword">const</span> deepseek = <span class="hljs-title function_">createOpenAI</span>({
    <span class="hljs-attr">apiKey</span>: apiKey,
    <span class="hljs-attr">baseURL</span>: <span class="hljs-string">'https://api.deepseek.com'</span>, <span class="hljs-comment">// DeepSeek çš„å®˜æ–¹ API åœ°å€</span>
  });

  <span class="hljs-keyword">return</span> <span class="hljs-title function_">defineEventHandler</span>(<span class="hljs-keyword">async</span> (event) =&gt; {
    <span class="hljs-comment">// 2. è§£æå‰ç«¯ä¼ æ¥çš„è¯·æ±‚ä½“</span>
    <span class="hljs-keyword">const</span> { messages } = <span class="hljs-keyword">await</span> <span class="hljs-title function_">readBody</span>(event);

    <span class="hljs-comment">// 3. è°ƒç”¨æ¨¡å‹</span>
    <span class="hljs-keyword">const</span> result = <span class="hljs-title function_">streamText</span>({
      <span class="hljs-comment">// ä½¿ç”¨ deepseek-chat æ¨¡å‹</span>
      <span class="hljs-attr">model</span>: <span class="hljs-title function_">deepseek</span>(<span class="hljs-string">'deepseek-chat'</span>),
      <span class="hljs-comment">// ç›´æ¥ä½¿ç”¨ messagesï¼ˆAI SDK v4+ å·²å†…ç½®è½¬æ¢ï¼‰</span>
      messages,
      <span class="hljs-comment">// å¯é€‰ï¼šè®¾ç½®ç³»ç»Ÿæç¤ºè¯</span>
      <span class="hljs-attr">system</span>: <span class="hljs-string">'ä½ æ˜¯ä¸€ä¸ªä¹äºåŠ©äººçš„ä¸­æ–‡ AI åŠ©æ‰‹ã€‚'</span>,
    });

    <span class="hljs-comment">// 4. å°†æµå¼å“åº”è¿”å›ç»™å‰ç«¯</span>
    <span class="hljs-keyword">return</span> result.<span class="hljs-title function_">toDataStreamResponse</span>();
  });
});

</code></pre>
<p><strong>ä»£ç è§£æï¼š</strong></p>
<ul>
<li><code>createOpenAI</code>: æˆ‘ä»¬åˆ©ç”¨è¿™ä¸ªå·¥å‚å‡½æ•°åˆ›å»ºäº†ä¸€ä¸ªè‡ªå®šä¹‰çš„ providerï¼Œå°† <code>baseURL</code> æŒ‡å‘ DeepSeekï¼Œä»è€Œå®Œç¾å¤ç”¨ OpenAI çš„ SDK é€»è¾‘ã€‚</li>
<li><code>streamText</code>: è¿™æ˜¯ AI SDK çš„æ ¸å¿ƒå‡½æ•°ï¼Œè´Ÿè´£å‘æ¨¡å‹å‘èµ·æµå¼è¯·æ±‚ã€‚</li>
<li><code>toDataStreamResponse()</code>: å°† AI çš„å›å¤é€šè¿‡ HTTP Response Stream å®æ—¶æ¨æµç»™å‰ç«¯ï¼Œå®ç°â€œæ‰“å­—æœºâ€æ•ˆæœã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-6">ç¬¬äº”æ­¥ï¼šæ„å»ºå‰ç«¯ UI</h2>
<p>ç°åœ¨å›åˆ°å‰ç«¯ï¼Œä½¿ç”¨ <code>@ai-sdk/vue</code> æä¾›çš„ <code>useChat</code> é’©å­ï¼Œå®ƒå¸®æˆ‘ä»¬å°è£…äº†å‘é€æ¶ˆæ¯ã€åŠ è½½çŠ¶æ€ã€è‡ªåŠ¨è¿½åŠ æ¶ˆæ¯åˆ—è¡¨ç­‰æ‰€æœ‰é€»è¾‘ã€‚</p>
<p>ä¿®æ”¹ <code>app.vue</code> (æˆ–è€… <code>pages/index.vue</code>)ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;script setup lang="ts"&gt;
import { useChat } from '@ai-sdk/vue';

// ä½¿ç”¨ useChat é’©å­
// å®ƒä¼šè‡ªåŠ¨è°ƒç”¨ /api/chat æ¥å£
const { messages, input, handleInputChange, handleSubmit, isLoading } = useChat();
&lt;/script&gt;

&lt;template&gt;
  &lt;div class="container"&gt;
    &lt;header&gt;
      &lt;h1&gt;DeepSeek AI åŠ©æ‰‹&lt;/h1&gt;
    &lt;/header&gt;

    &lt;div class="chat-box"&gt;
      &lt;div v-for="m in messages" :key="m.id" class="message" :class="m.role"&gt;
        &lt;div class="role-label"&gt;{{ m.role === 'user' ? 'æˆ‘' : 'DeepSeek' }}:&lt;/div&gt;
        &lt;div class="content"&gt;{{ m.content }}&lt;/div&gt;
      &lt;/div&gt;
      
      &lt;div v-if="isLoading &amp;&amp; messages[messages.length - 1]?.role === 'user'" class="loading"&gt;
        æ€è€ƒä¸­...
      &lt;/div&gt;
    &lt;/div&gt;

    &lt;form @submit="handleSubmit" class="input-area"&gt;
      &lt;input
        class="input-box"
        :value="input"
        placeholder="è¾“å…¥ä½ æƒ³é—®çš„é—®é¢˜..."
        @change="handleInputChange"
      /&gt;
      &lt;button type="submit" :disabled="isLoading"&gt;å‘é€&lt;/button&gt;
    &lt;/form&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;style scoped&gt;
/* ç®€å•çš„æ ·å¼ç¾åŒ– */
.container {
  max-width: 800px;
  margin: 0 auto;
  padding: 20px;
  font-family: sans-serif;
  height: 100vh;
  display: flex;
  flex-direction: column;
}

header {
  text-align: center;
  margin-bottom: 20px;
  border-bottom: 1px solid #eee;
}

.chat-box {
  flex: 1;
  overflow-y: auto;
  padding: 10px;
  border: 1px solid #ddd;
  border-radius: 8px;
  margin-bottom: 20px;
  background-color: #f9f9f9;
}

.message {
  margin-bottom: 15px;
  padding: 10px;
  border-radius: 6px;
}

.message.user {
  background-color: #e3f2fd;
  align-self: flex-end;
}

.message.assistant {
  background-color: #fff;
  border: 1px solid #eee;
}

.role-label {
  font-weight: bold;
  font-size: 0.8rem;
  margin-bottom: 4px;
  color: #666;
}

.content {
  white-space: pre-wrap; /* ä¿ç•™æ¢è¡Œæ ¼å¼ */
  line-height: 1.6;
}

.input-area {
  display: flex;
  gap: 10px;
}

.input-box {
  flex: 1;
  padding: 12px;
  border: 1px solid #ccc;
  border-radius: 4px;
  font-size: 16px;
}

button {
  padding: 0 20px;
  background-color: #1976d2;
  color: white;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  font-size: 16px;
}

button:disabled {
  background-color: #ccc;
  cursor: not-allowed;
}

.loading {
  font-size: 0.8rem;
  color: #999;
  margin-left: 10px;
}
&lt;/style&gt;

</code></pre>
<hr/>
<h2 data-id="heading-7">ç¬¬å…­æ­¥ï¼šè¿è¡Œæµ‹è¯•</h2>
<p>ä¸€åˆ‡å°±ç»ªï¼è¿è¡Œé¡¹ç›®ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">npm run dev

</code></pre>
<p>æ‰“å¼€æµè§ˆå™¨è®¿é—® <code>http://localhost:3000</code>ã€‚</p>
<ol>
<li>åœ¨è¾“å…¥æ¡†è¾“å…¥â€œä½ å¥½ï¼Œè¯·ä»‹ç»ä¸€ä¸‹ä½ è‡ªå·±â€ã€‚</li>
<li>ç‚¹å‡»å‘é€ã€‚</li>
<li>ä½ åº”è¯¥èƒ½çœ‹åˆ° DeepSeek å‡ ä¹ç¬é—´å¼€å§‹é€å­—è¾“å‡ºå›å¤ï¼Œä½“éªŒéå¸¸æµç•…ã€‚</li>
</ol>
<hr/>
<h2 data-id="heading-8">è¿›é˜¶ï¼šå¦‚ä½•é›†æˆç»„ä»¶åº“ï¼ˆå¦‚ Element Plusï¼‰</h2>
<p>å¦‚æœè¦åœ¨å®é™…é¡¹ç›®ä¸­ä½¿ç”¨ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šé…åˆå›½å†…å¸¸ç”¨çš„ç»„ä»¶åº“ <strong>Element Plus</strong>ã€‚</p>
<ol>
<li>å®‰è£… Element Plus: <code>npm install element-plus</code> (å¹¶æŒ‰ Nuxt å®˜æ–¹æ–‡æ¡£é…ç½®)ã€‚</li>
<li>æ›¿æ¢ <code>app.vue</code> ä¸­çš„åŸç”Ÿæ ‡ç­¾ï¼š</li>
</ol>
<pre><code class="hljs language-vue" lang="vue">&lt;script setup lang="ts"&gt;
import { useChat } from '@ai-sdk/vue';

// ä½¿ç”¨ useChat é’©å­ï¼Œå¹¶æŒ‡å®š API ç«¯ç‚¹
const { messages, input, handleInputChange, handleSubmit, isLoading } = useChat({
  api: '/api/chat',
});
&lt;/script&gt;

&lt;template&gt;
  &lt;div class="chat-container"&gt;
    &lt;el-scrollbar height="600px"&gt;
      &lt;div v-for="m in messages" :key="m.id"&gt;
        &lt;el-card shadow="hover" :style="{ marginBottom: '10px', marginLeft: m.role === 'user' ? '50px' : '0', marginRight: m.role === 'user' ? '0' : '50px' }"&gt;
          &lt;template #header&gt;
             &lt;el-tag :type="m.role === 'user' ? 'primary' : 'success'"&gt;{{ m.role === 'user' ? 'User' : 'AI' }}&lt;/el-tag&gt;
          &lt;/template&gt;
          &lt;div style="white-space: pre-wrap;"&gt;{{ m.content }}&lt;/div&gt;
        &lt;/el-card&gt;
      &lt;/div&gt;
    &lt;/el-scrollbar&gt;
    
    &lt;div style="margin-top: 20px; display: flex;"&gt;
      &lt;!-- æ³¨æ„ï¼šinput æ˜¯ Refï¼Œéœ€è¦ç”¨ :modelValue è€Œä¸æ˜¯ v-model --&gt;
      &lt;el-input 
        :modelValue="input" 
        @update:modelValue="input = $event"
        placeholder="è¯·è¾“å…¥å†…å®¹" 
        @keydown.enter="handleSubmit" 
      /&gt;
      &lt;el-button type="primary" @click="handleSubmit" :loading="isLoading" style="margin-left: 10px;"&gt;å‘é€&lt;/el-button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;

</code></pre>
<p><em>æ³¨æ„ï¼š<code>useChat</code> è¿”å›çš„ <code>input</code> æ˜¯ä¸€ä¸ª Ref å“åº”å¼å¯¹è±¡ï¼Œåœ¨ Element Plus ä¸­éœ€è¦ä½¿ç”¨ <code>:modelValue</code> + <code>@update:modelValue</code> çš„æ–¹å¼æ¥å®ç°åŒå‘ç»‘å®šï¼Œæˆ–è€…ç›´æ¥ç»‘å®šäº‹ä»¶ã€‚</em></p>
<hr/>
<h2 data-id="heading-9">æ€»ç»“</h2>
<p>é€šè¿‡è¿™ç¯‡æ•™ç¨‹ï¼Œæˆ‘ä»¬æˆåŠŸå®ç°äº†ï¼š</p>
<ol>
<li><strong>Nuxt 3</strong> å…¨æ ˆæ¡†æ¶æ­å»ºã€‚</li>
<li><strong>Vercel AI SDK</strong> æ¥å…¥æ ‡å‡† OpenAI åè®®ã€‚</li>
<li><strong>DeepSeek</strong> å›½å†… API çš„æ— ç¼é›†æˆã€‚</li>
</ol>
<p>å¿«å»è¯•è¯•å§ï¼å¦‚æœè§‰å¾—æœ‰ç”¨ï¼Œè®°å¾—ç‚¹èµæ”¶è—å“¦ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸‡å­—é•¿æ–‡ä¹‹â€”â€”AIè½åœ°è§„èŒƒ]]></title>    <link>https://juejin.cn/post/7605105527257759744</link>    <guid>https://juejin.cn/post/7605105527257759744</guid>    <pubDate>2026-02-11T05:49:55.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605105527257759744" data-draft-id="7605106957133709346" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸‡å­—é•¿æ–‡ä¹‹â€”â€”AIè½åœ°è§„èŒƒ "/> <meta itemprop="keywords" content="AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2026-02-11T05:49:55.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="codingWhat"/> <meta itemprop="url" content="https://juejin.cn/user/2189882895642728"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸‡å­—é•¿æ–‡ä¹‹â€”â€”AIè½åœ°è§„èŒƒ 
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2189882895642728/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    codingWhat
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-11T05:49:55.000Z" title="Wed Feb 11 2026 05:49:55 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    41
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»15åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>è¿™å‡ å¤©ï¼Œä¸çŸ¥é“ä½ å–æ²¡å–åˆ°åƒé—®appè¯·å®¢çš„å¥¶èŒ¶ï¼Œåæ­£æˆ‘æ˜¯å–åˆ°äº†ï¼Œè€Œä¸”ä¸€è¾¹å–ä¸€è¾¹åœ¨å†™æ–‡ç« ~<br/>
<br/>
AIå·²ç»èµ°å…¥æ™®é€šå¤§ä¼—çš„ç”Ÿæ´»ï¼Œé‚£ä¹ˆåœ¨ç¨‹åºå‘˜çš„ä¸–ç•Œä¸­å‘¢ï¼Ÿåªä¼šæ›´æ¿€çƒˆï¼éšç€AIçš„æµªæ½®æ»šæ»šå‰è¿›ï¼Œæˆ‘ä»¬çš„å·¥ä½œä¸­ä¸€å®šæˆ–å¤šæˆ–å°‘ä½¿ç”¨åˆ°äº†AIå·¥å…·ã€‚æ¯”å¦‚ä¸€å¼€å§‹çš„vscodeä¸­çš„ä»£ç æç¤ºæ’ä»¶ï¼Œå¦‚GitHub Copilotã€é€šä¹‰çµç ç­‰ï¼Œåˆ°ç°åœ¨çš„ä»£ç ç”Ÿæˆç¼–è¾‘å™¨ï¼Œå¦‚Cursorã€Traeç­‰ã€‚<br/>
<br/>
ä¸€å¼€å§‹å°è¯•ä½¿ç”¨å¦‚Cursoræ—¶ï¼Œä¼šä¸ç¦æ„Ÿå¹ï¼Œ<code>è¿™ä¸ªçœŸç‰›å•Šï¼</code><strong>çœ¼çœ‹AIå†™ä»£ç ï¼Œçœ¼çœ‹æˆ‘è¦å¤±ä¸šï¼Ÿâ€œä¸ç®¡â€ï¼Œè®©æˆ‘æ¥æŒ‘æŒ‘åˆºï¼š</strong><br/>
<br/>
<em>ä½ çœ‹ï¼Œä»–ç”Ÿæˆçš„ä»£ç é£æ ¼å’Œç°æœ‰å·¥ç¨‹ä¸ä¸€è‡´ï¼›<br/>ä½ çœ‹ï¼Œä½ çœ‹ï¼Œä»–éœ€æ±‚ç†è§£æ­ªäº†å•Šï¼Œéœ€æ±‚ä½ æ¥çœ‹çœ‹ï¼Œæ˜¯ä¸æ˜¯ç†è§£é”™äº†ï¼›<br/>ä½ çœ‹ï¼Œä½ çœ‹ï¼Œä½ çœ‹ï¼Œä»–æ¯æ¬¡ç”Ÿæˆçš„ä»£ç éƒ½ä¸ä¸€è‡´å•Šï¼Œè¿™æ€ä¹ˆç»´æŠ¤å•Šï¼Œababab~ ~ ~</em><br/>
<br/>
é‚£ä¹ˆï¼ŒçœŸè¦æ”¾å¼ƒAIå—ï¼Ÿé‚£è‚¯å®šä¸èƒ½ï¼Œæ¯•ç«Ÿèƒ½å¹²æ´»å•Šï¼›é‚£é—®é¢˜æ¥äº†ï¼Œæ€ä¹ˆè®©ä»–æ›´è¶æ‰‹äº›å‘¢ï¼Ÿåœ¨åŠªåŠ›è¿‘ä¸€å¹´åï¼Œæˆ‘å°è¯•å†™ä¸€å†™åœ¨ç°æœ‰å·¥ç¨‹ä¸­è®© AI è¾…åŠ©å¼€å‘èƒ½å¤Ÿç¨³å®šè½åœ°çš„ä¸€äº›è§„èŒƒä¸å®è·µã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-0">ä¸€ã€ä¸ºä»€ä¹ˆéœ€è¦ã€ŒAI è½åœ°è§„èŒƒã€</h2>
<p>åœ¨çœŸå®ä¸šåŠ¡é¡¹ç›®é‡Œå¼•å…¥ AIï¼ˆå¦‚ Cursorã€Claude Codeã€Traeï¼‰å†™ä»£ç æ—¶ï¼Œå¸¸é‡åˆ°ï¼š</p>
<ul>
<li><strong>ç”Ÿæˆä»£ç é£æ ¼ä¸ç°æœ‰å·¥ç¨‹ä¸ä¸€è‡´</strong>ï¼šç›®å½•ã€å‘½åã€ç»„ä»¶ç»“æ„å„å†™å„çš„ã€‚</li>
<li><strong>éœ€æ±‚ç†è§£åå·®</strong>ï¼šç¼ºå°‘ç»“æ„åŒ–éœ€æ±‚ä¸æ¥å£è¯´æ˜ï¼ŒAI åªèƒ½â€œçŒœä¸šåŠ¡â€ï¼Œæ›´å®¹æ˜“å‡ºç°å¹»è§‰ã€‚</li>
<li><strong>å¯ç»´æŠ¤æ€§å·®</strong>ï¼šæ²¡æœ‰ç»Ÿä¸€è§„åˆ™ï¼Œåäººæˆ– AI éš¾ä»¥åœ¨æ—¢æœ‰çº¦å®šä¸‹ç»­å†™ã€‚</li>
</ul>
<p>è¦è§£å†³è¿™äº›é—®é¢˜ï¼Œéœ€è¦ä¸¤ä»¶äº‹åŒæ—¶åˆ°ä½ï¼š</p>
<ol>
<li><strong>è¾“å…¥è§„èŒƒ</strong>ï¼šéœ€æ±‚ã€æ¥å£ã€é…ç½®ç­‰å†™æˆã€ŒAI å¯è¯»ã€å¯æ‰§è¡Œã€çš„ç»“æ„åŒ–æ–‡æ¡£ã€‚</li>
<li><strong>è¾“å‡ºè§„èŒƒ</strong>ï¼šç”¨é¡¹ç›®è§„åˆ™ï¼ˆå¦‚ Cursor Rulesï¼‰çº¦æŸ AI çš„ç›®å½•ã€å‘½åã€ç»„ä»¶ä¸æ¥å£å†™æ³•ã€‚</li>
</ol>
<p>ä¸‹é¢ä»¥ä¸€ä¸ªvueé¡¹ç›®ä¸­çš„æ¨¡å—ã€Œxxxxç¼´è´¹è®°å½•æŸ¥è¯¢ã€å’Œ <code>xxx-xxx-h5-rules</code> ä¸ºä¾‹ï¼Œè¯´è¯´æˆ‘ä»¬å›¢é˜Ÿæ˜¯å¦‚ä½•åšçš„ã€‚</p>
<hr/>
<h2 data-id="heading-1">äºŒã€è¾“å…¥è§„èŒƒï¼šæŠŠéœ€æ±‚å†™æˆ AI è¯»å¾—æ‡‚çš„è¯­è¨€</h2>
<p>AI è½åœ°çš„å‰ææ˜¯ï¼š<strong>éœ€æ±‚ä¸æ¥å£è¢«æ¸…æ™°ã€ç»“æ„åŒ–åœ°å†™å‡ºæ¥</strong>ï¼Œè€Œä¸æ˜¯åªå­˜åœ¨äºå£å¤´ä¸Šæˆ–é›¶æ•£çš„èŠå¤©é‡Œï¼ˆæ¯”å¦‚å¤šè½®å¯¹è¯ï¼Œè¿™æ ·åªä¼šè®©ä»£ç æˆä¸ºä¸€å¨ï¼Œï¼Œï¼Œï¼‰ã€‚</p>
<h3 data-id="heading-2">2.1 åŠŸèƒ½æ–‡æ¡£ç»“æ„</h3>
<pre><code class="hljs language-bash" lang="bash">xxxxç¼´è´¹è®°å½•æŸ¥è¯¢/
â”œâ”€â”€ xxxxç¼´è´¹è®°å½•æŸ¥è¯¢-éœ€æ±‚.md         <span class="hljs-comment"># åŠŸèƒ½æ¦‚è¿°ã€æµç¨‹ã€é¡µé¢ä¸è§„åˆ™</span>
â”œâ”€â”€ xxxxç¼´è´¹è®°å½•æŸ¥è¯¢æ¥å£-éœ€æ±‚.md     <span class="hljs-comment"># æ¥å£å…¥å‚ã€å‡ºå‚ã€å–å€¼ä¸è§„åˆ™</span>
â”œâ”€â”€ ç³»ç»Ÿå‚æ•°é…ç½®.md                <span class="hljs-comment"># æç¤ºä¿¡æ¯ã€å¼€å…³ç­‰å¯é…ç½®é¡¹</span>
â””â”€â”€ åŸå‹æ–‡ä»¶/                     <span class="hljs-comment"># HTML/CSS/JS åŸå‹</span>
</code></pre>
<ul>
<li><strong>éœ€æ±‚æ–‡æ¡£(å‰ç«¯ç”¨)</strong>ï¼šåŠŸèƒ½æ¦‚è¿°ã€æµç¨‹å›¾ï¼ˆå¦‚ Mermaidï¼‰ã€é¡µé¢åˆ†åŒºï¼ˆå¯¼èˆªæ ã€æŸ¥è¯¢åŒºã€åˆ—è¡¨åŒºï¼‰ã€æ§ä»¶è¡¨ï¼ˆåç§°ã€ç±»å‹ã€å¿…å½•ã€è§„åˆ™ã€æ•°æ®å…ƒï¼‰ã€é¡µé¢è§„åˆ™ï¼ˆå¦‚ 4.1 é¡µé¢åˆå§‹åŒ–ã€4.2 xxæ•°æ®æŸ¥è¯¢è§„åˆ™ï¼‰ã€‚</li>
<li><strong>æ¥å£éœ€æ±‚æ–‡æ¡£ï¼ˆåç«¯ç”¨ï¼‰</strong>ï¼šæ¥å£æ¦‚è¿°ã€å…¥å‚/å‡ºå‚è¡¨ï¼ˆå«æ•°æ®å…ƒæ ‡è¯†ã€å­—æ®µåã€ç±»å‹ã€æ˜¯å¦å¯ç©ºï¼‰ã€æ¥å£è§„åˆ™ï¼ˆå…¥å‚æ ¡éªŒã€è¡¨æ¥æºã€å–å€¼è§„åˆ™ï¼‰ã€‚</li>
<li><strong>ç³»ç»Ÿå‚æ•°é…ç½®ï¼ˆå…±ç”¨ï¼‰</strong>ï¼šæŒ‰æ¨¡å—/é¡µé¢åˆ—å‡ºå¯é…ç½®é¡¹ï¼ˆå¦‚ä¸»é¡µé¢æç¤ºä¿¡æ¯ï¼‰ï¼Œä¾¿äºå‰ç«¯ä»é…ç½®è¯»å–è€Œéå†™æ­»ã€‚</li>
</ul>
<p>è¿™ç±»ç»“æ„è®© AI èƒ½å¤Ÿï¼šæŒ‰ã€Œé¡µé¢ + æ§ä»¶ + è§„åˆ™ã€ç”Ÿæˆé¡µé¢ä¸äº¤äº’ï¼›æŒ‰ã€Œå…¥å‚/å‡ºå‚ + è§„åˆ™ã€ç”Ÿæˆ API è°ƒç”¨ä¸ DTOï¼›æŒ‰ã€Œé…ç½®é¡¹ã€ç”Ÿæˆä» store/config è¯»å–çš„æç¤ºæˆ–å¼€å…³ã€‚</p>
<hr/>
<h3 data-id="heading-3">2.2 AIä¸‹çš„éœ€æ±‚æ–‡æ¡£è¯¥æ€ä¹ˆå†™</h3>
<h3 data-id="heading-4"><code>ç»Ÿä¸€ä½¿ç”¨å¯¹AIæ›´å‹å¥½çš„.mdæ–‡æ¡£ç¼–å†™éœ€æ±‚ï¼Œè¿™å¯¹éœ€æ±‚ä¾§çš„åŒå­¦ä¹Ÿæ˜¯ä¸€ä¸ªä¸å°çš„æŒ‘æˆ˜ï¼Œä½†æˆ‘ä»¬è®¤ä¸ºè¿™æ˜¯å¾ˆæœ‰å¿…è¦çš„ï¼</code></h3>
<p><strong>ä¸€ã€åŠŸèƒ½æ¦‚è¿°</strong></p>
<p>ç”¨ä¸€ä¸¤å¥è¯è¯´æ˜åŠŸèƒ½é¢å‘è°ã€åšä»€ä¹ˆã€èŒƒå›´æ˜¯ä»€ä¹ˆã€‚ä¾‹å¦‚ï¼š</p>
<blockquote>
<p>æœ¬åŠŸèƒ½æ”¯æŒxxx</p>
</blockquote>
<ul>
<li><strong>å¯¹ AI çš„ç”¨é€”</strong>ï¼šç¡®å®šæ¨¡å—è¾¹ç•Œã€é¡µé¢æ ‡é¢˜ã€è·¯ç”±å‘½åã€‚</li>
</ul>
<p><strong>äºŒã€è¯¦ç»†æµç¨‹</strong></p>
<p>å…ˆç”»æµç¨‹å›¾ï¼ˆå»ºè®®ç”¨ Mermaidï¼‰ï¼Œå†é…ç®€çŸ­æµç¨‹è¯´æ˜ã€‚ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    actor ç”¨æˆ·
    participant æœ¬åŠŸèƒ½ as æœ¬åŠŸèƒ½
    participant å¤–éƒ¨ç³»ç»Ÿ as å¤–éƒ¨ç³»ç»Ÿ
    rect rgba(135, 206, 250, 0.4)
        Note over ç”¨æˆ·,å¤–éƒ¨ç³»ç»Ÿ: 1. ã€é¡µé¢åˆå§‹åŒ–ã€‘
        ç”¨æˆ·-&gt;&gt;æœ¬åŠŸèƒ½: 1) è®¿é—®xxxxç¼´è´¹è®°å½•æŸ¥è¯¢é¡µé¢
        æœ¬åŠŸèƒ½-&gt;&gt;å¤–éƒ¨ç³»ç»Ÿ: å¼•ç”¨4.1è§„åˆ™åˆå§‹åŒ–
        å¤–éƒ¨ç³»ç»Ÿ--&gt;&gt;æœ¬åŠŸèƒ½: è¿”å›åˆå§‹åŒ–é…ç½®åŠæ•°æ®
        æœ¬åŠŸèƒ½--&gt;&gt;ç”¨æˆ·: å±•ç¤ºxxxxç¼´è´¹è®°å½•
    end
</code></pre>
<p>æµç¨‹è¯´æ˜ç¤ºä¾‹ï¼š</p>
<blockquote>
<ol>
<li>ã€é¡µé¢åˆå§‹åŒ–ã€‘è®¿é—®åŠŸèƒ½åï¼Œç³»ç»Ÿè·å–ä¸ªäººä¿¡æ¯åŠç¼´è´¹åˆ—è¡¨æ•°æ®ï¼Œå±•ç¤ºxxxxç¼´è´¹è®°å½•æŸ¥è¯¢ä¸»é¡µã€‚å¼•ç”¨ 4.1 è§„åˆ™åˆå§‹åŒ–ã€‚</li>
</ol>
</blockquote>
<ul>
<li><strong>å†™æ³•è¦ç‚¹</strong>ï¼šæµç¨‹ä¸åæ–‡ã€Œå››ã€é¡µé¢è§„åˆ™è¯´æ˜ã€ä¸­çš„è§„åˆ™ç¼–å·å¯¹åº”ï¼ˆå¦‚â€œå¼•ç”¨ 4.1â€ï¼‰ï¼Œä¾¿äºå®ç°æ—¶æŒ‰è§„åˆ™å†™åˆå§‹åŒ–é€»è¾‘ã€‚</li>
<li><strong>å¯¹ AI çš„ç”¨é€”</strong>ï¼šç”Ÿæˆ mounted/created ä¸­çš„è°ƒç”¨é¡ºåºï¼ŒçŸ¥é“å…ˆå–é…ç½®å†å–åˆ—è¡¨ã€‚</li>
</ul>
<p><strong>ä¸‰ã€é¡µé¢éœ€æ±‚åˆ†æ</strong></p>
<p>æŒ‰<strong>é¡µé¢ â†’ åŒºåŸŸ â†’ æ§ä»¶</strong>åˆ†å±‚ï¼Œç”¨è¡¨æ ¼æŠŠæ¯ä¸ªåŒºåŸŸçš„æ§ä»¶å†™æ¸…æ¥šã€‚</p>
<ul>
<li>
<p><strong>å¯¼èˆªæ </strong>ï¼šæ“ä½œæŒ‰é’® + æ ‡é¢˜ã€‚ç”¨è¡¨æ ¼å¼åˆ—å‡ºæ§ä»¶åç§°ã€å¯æ“ä½œã€æ§ä»¶ç±»å‹ã€äº¤äº’äº‹ä»¶åŠè§„åˆ™ï¼›æ ‡é¢˜å•ç‹¬ä¸€è¡Œè¯´æ˜ã€‚</p>
</li>
<li>
<p><strong>é¡µé¢æç¤ºåŒºåŸŸ</strong>ï¼šä¸å†™æ­»æ–‡æ¡ˆï¼Œè€Œæ˜¯<strong>å¼•ç”¨é…ç½®</strong>ã€‚ä¾‹å¦‚ï¼š</p>
<blockquote>
<p>æç¤ºå†…å®¹å–è‡ªã€Œç³»ç»Ÿå‚æ•°é…ç½®.mdã€ï¼Œå…·ä½“è·¯å¾„ï¼šxxxxç¼´è´¹è®°å½•æŸ¥è¯¢ â†’ ä¸»é¡µé¢æç¤ºä¿¡æ¯å‚æ•°é…ç½®ï¼Œè‹¥æœªé…ç½®åˆ™ä¸æ˜¾ç¤ºã€‚</p>
</blockquote>
<p>è¿™æ · AI ä¼šç”Ÿæˆã€Œä»é…ç½®è¯»å–ï¼Œæœªé…ç½®åˆ™ä¸å±•ç¤ºã€çš„é€»è¾‘ï¼Œè€Œä¸æ˜¯å†™æ­»ä¸€æ®µæ–‡å­—ã€‚</p>
</li>
<li>
<p><strong>æŸ¥è¯¢æ¡ä»¶é€‰æ‹©åŒºåŸŸ</strong>ï¼šç”¨<strong>ä¸€å¼ è¡¨</strong>ç»Ÿä¸€æè¿°æ§ä»¶ï¼Œåˆ—å»ºè®®åŒ…å«ï¼š</p>

































<table><thead><tr><th>åˆ—å</th><th>è¯´æ˜ä¸ç¤ºä¾‹</th></tr></thead><tbody><tr><td>æ§ä»¶åç§°</td><td>xxx</td></tr><tr><td>æ§ä»¶ç±»å‹</td><td>å¹´åº¦é€‰æ‹©æ¡†ã€ä¸‹æ‹‰æ¡†</td></tr><tr><td>å¯æ“ä½œ/å¿…å½•/æ˜¯å¦å¯è§</td><td>Y/Nï¼Œä¾¿äºåšæ ¡éªŒä¸å±•ç¤º</td></tr><tr><td>åˆå§‹çŠ¶æ€/æ•°æ®</td><td>é»˜è®¤å½“å‰ç³»ç»Ÿå¹´åº¦ã€æš—æ–‡ã€Œè¯·é€‰æ‹©ã€</td></tr><tr><td>æ“ä½œè§„åˆ™åŠå–æ•°å£å¾„</td><td>æ ¼å¼ YYYYã€æœ€å¤§ä¸è¶…è¿‡å½“å‰å¹´åº¦ã€ä¸‹æ‹‰é€‰é¡¹ï¼šxxxxï¼›å¼•ç”¨â€œxxæ•°æ®æŸ¥è¯¢è§„åˆ™â€</td></tr><tr><td>æ•°æ®å…ƒå­—æ®µå</td><td>ä¸æ¥å£å¯¹é½</td></tr></tbody></table>
<p>ç¤ºä¾‹ï¼ˆèŠ‚é€‰ï¼‰ï¼š</p>
































<table><thead><tr><th align="left">æ§ä»¶åç§°</th><th align="left">æ§ä»¶ç±»å‹</th><th align="left">å¯æ“ä½œ</th><th align="left">å¿…å½•</th><th align="left">æ˜¯å¦å¯è§</th><th align="left">åˆå§‹çŠ¶æ€/æ•°æ®</th><th align="left">æ“ä½œè§„åˆ™åŠå–æ•°å£å¾„</th></tr></thead><tbody><tr><td align="left">å¹´åº¦</td><td align="left">å¹´åº¦é€‰æ‹©æ¡†</td><td align="left">Y</td><td align="left">Y</td><td align="left">Y</td><td align="left">é»˜è®¤æ˜¾ç¤ºå½“å‰ç³»ç»Ÿå¹´åº¦</td><td align="left">æ ¼å¼ YYYYï¼›æœ€å¤§ä¸èƒ½è¶…è¿‡å½“å‰ç³»ç»Ÿå¹´åº¦ã€‚å¼•ç”¨â€œxxæ•°æ®æŸ¥è¯¢è§„åˆ™ã€xxç»„ä»¶â€</td></tr><tr><td align="left">xx</td><td align="left">ä¸‹æ‹‰æ¡†</td><td align="left">Y</td><td align="left">N</td><td align="left">Y</td><td align="left">æš—æ–‡ï¼šè¯·é€‰æ‹©</td><td align="left">ä¸‹æ‹‰é€‰é¡¹ï¼šxxxã€‚å¼•ç”¨â€œxxæ•°æ®æŸ¥è¯¢è§„åˆ™â€</td></tr></tbody></table>
</li>
<li>
<p><strong>åˆ—è¡¨åŒºåŸŸ</strong>ï¼šåŒæ ·ç”¨è¡¨åˆ—å‡ºã€Œå±•ç¤ºé¡¹ + å–æ•°å£å¾„ + æ•°æ®å…ƒã€ã€‚ä¾‹å¦‚ç¼´è´¹é‡‘é¢å†™æ¸…å•ä½ã€æ ¼å¼ï¼ˆï¿¥ã€ä¿ç•™ä¸¤ä½å°æ•°ï¼‰ã€‚<br/>
è¿™æ · AI èƒ½ç›´æ¥ç”Ÿæˆåˆ—è¡¨åˆ—å®šä¹‰å’Œæ ¼å¼åŒ–é€»è¾‘ã€‚</p>
</li>
</ul>
<p><strong>å››ã€é¡µé¢è§„åˆ™è¯´æ˜</strong></p>
<p>ç”¨<strong>ç¼–å·è§„åˆ™</strong>æŠŠã€Œé¡µé¢åˆå§‹åŒ–ã€ã€ŒæŸ¥è¯¢è§„åˆ™ã€ç­‰è¯´æ¸…æ¥šï¼Œå¹¶ä¸å‰æ–‡å¼•ç”¨ä¸€è‡´ã€‚</p>
<ul>
<li>
<p><strong>4.1 é¡µé¢åˆå§‹åŒ–</strong>ï¼šé€æ¡å†™â€œæ ¹æ®å“ªä»½é…ç½®åšå“ªä»¶äº‹â€â€œæ ¹æ®å“ªæ¡è§„åˆ™åˆå§‹åŒ–æ•°æ®â€ã€‚ä¾‹å¦‚ï¼š</p>
<ul>
<li>æ ¹æ®ã€Šç³»ç»Ÿå‚æ•°é…ç½®.mdã€‹å¯¹â€œé¡µé¢æç¤ºåŒºåŸŸâ€è¿›è¡Œåˆå§‹å±•ç¤ºã€‚</li>
<li>æ ¹æ®â€œxxæ•°æ®æŸ¥è¯¢è§„åˆ™â€åˆå§‹åŒ–å±•ç¤ºé¡µé¢æ•°æ®ã€‚</li>
</ul>
</li>
<li>
<p><strong>4.2 ç¼´è´¹æ•°æ®æŸ¥è¯¢è§„åˆ™</strong>ï¼š</p>
<ul>
<li>å…ˆå†™<strong>æŸ¥è¯¢æ¡ä»¶è½¬æ¢</strong>ï¼›</li>
<li>å†å†™è°ƒç”¨å“ªä¸ªæ¥å£ã€‚<br/>
AI å¯æ ¹æ®è§„åˆ™ç”ŸæˆæŸ¥è¯¢å‚æ•°ç»„è£…å’Œæ¥å£è°ƒç”¨ã€‚</li>
</ul>
</li>
</ul>
<h3 data-id="heading-5">2.3 æˆ‘ä»¬ä¸ºä»€ä¹ˆè§„å®šè¿™æ ·å†™éœ€æ±‚æ–‡æ¡£ï¼Ÿ</h3>








































<table><thead><tr><th>ç»´åº¦</th><th>å†™æ³•</th><th>å¥½å¤„</th></tr></thead><tbody><tr><td><strong>ç»“æ„åŒ–</strong></td><td>åŠŸèƒ½æ¦‚è¿° â†’ æµç¨‹ â†’ é¡µé¢åˆ†æ â†’ è§„åˆ™è¯´æ˜ï¼›æ¥å£æ¦‚è¿° â†’ å…¥å‚/å‡ºå‚ â†’ æ¥å£è§„åˆ™</td><td>å±‚æ¬¡æ¸…æ™°ï¼ŒAI å’Œäººéƒ½èƒ½æŒ‰ç« èŠ‚å®šä½ï¼›å…ˆâ€œåšä»€ä¹ˆâ€å†â€œæ€ä¹ˆåšâ€ï¼Œå‡å°‘é—æ¼ã€‚</td></tr><tr><td><strong>è¡¨æ ¼åŒ–</strong></td><td>æ§ä»¶è¡¨ã€å…¥å‚è¡¨ã€å‡ºå‚è¡¨ã€ä»£ç æ˜ å°„è¡¨</td><td>æœºå™¨å¯è¯»æ€§å¼ºï¼ŒAI å¯ç›´æ¥ç”¨äºç”Ÿæˆè¡¨å•å­—æ®µã€è¯·æ±‚å‚æ•°ã€åˆ—è¡¨åˆ—ã€å¸¸é‡æ˜ å°„ï¼›å‰åç«¯å¯¹é½åŒä¸€å¼ è¡¨ï¼Œå­—æ®µåå’Œç±»å‹ä¸€è‡´ã€‚</td></tr><tr><td><strong>å¼•ç”¨ä¸ç¼–å·</strong></td><td>â€œå¼•ç”¨ 4.1 è§„åˆ™â€â€œ<code>å¼•ç”¨xxxzç»„ä»¶</code>â€â€œå¼•ç”¨xxæ•°æ®æŸ¥è¯¢è§„åˆ™â€â€œæ ¹æ®ç³»ç»Ÿå‚æ•°é…ç½®.mdâ€</td><td>éœ€æ±‚å†…å¯è¿½æº¯ï¼Œå®ç°æ—¶æŒ‰ç¼–å·æ‰¾åˆ°å¯¹åº”è§„åˆ™åŠç»„ä»¶ï¼›æç¤ºåŒºã€æŸ¥è¯¢é€»è¾‘ç­‰ä¸å†™æ­»ï¼Œä¾¿äºå¤šåœ°åŒºé…ç½®ã€‚</td></tr><tr><td><strong>æ•°æ®å…ƒä¸å–æ•°å£å¾„</strong></td><td>æ•°æ®å…ƒæ ‡è¯†ç¬¦ã€å­—æ®µåã€å–æ•°å£å¾„ã€æ ¼å¼å¤‡æ³¨</td><td>ä¸æ ‡å‡†æ•°æ®å…ƒä¸€è‡´ï¼Œåˆ©äºå¯¹æ¥ï¼›å–æ•°å£å¾„è®©å‰ç«¯çŸ¥é“å“ªäº›å­—æ®µæ˜¯åç«¯è®¡ç®—ã€å¦‚ä½•å±•ç¤ºã€‚</td></tr><tr><td><strong>æµç¨‹ + è§„åˆ™</strong></td><td>Mermaid æµç¨‹å›¾ + è§„åˆ™ç¼–å·</td><td>å…ˆæœ‰æ—¶åºå†æœ‰æ¡æ–‡ï¼ŒAI èƒ½ç”Ÿæˆæ­£ç¡®çš„è°ƒç”¨é¡ºåºå’Œåˆå§‹åŒ–é€»è¾‘ï¼›è§„åˆ™å¯å•ç‹¬å®ç°ã€å•ç‹¬æµ‹è¯•ã€‚</td></tr><tr><td><strong>é…ç½®ä¸ä»£ç åˆ†ç¦»</strong></td><td>æç¤ºå†…å®¹å–è‡ªç³»ç»Ÿå‚æ•°é…ç½®ã€è‹¥æœªé…ç½®åˆ™ä¸æ˜¾ç¤º</td><td>æ–‡æ¡ˆå’Œå¼€å…³å¯é…ç½®ï¼ŒAI ç”Ÿæˆâ€œè¯»é…ç½®å†å±•ç¤ºâ€çš„ä»£ç ï¼Œé¿å…ç¡¬ç¼–ç ï¼Œä¾¿äºå¤šç¯å¢ƒã€‚</td></tr></tbody></table>
<p>æ•´ä½“ä¸Šï¼Œ<strong>éœ€æ±‚æ–‡æ¡£æŒ‰â€œæ¦‚è¿° â†’ æµç¨‹ â†’ é¡µé¢/æ¥å£è¡¨æ ¼ â†’ è§„åˆ™è¯´æ˜â€æ¥å†™ï¼Œå¹¶ç”¨è¡¨æ ¼å’Œç¼–å·æŠŠæ§ä»¶ã€å­—æ®µã€æ˜ å°„ã€è§„åˆ™ã€ç»„ä»¶ç¼–å·å›ºå®šä¸‹æ¥</strong>ï¼Œæ—¢èƒ½è®©äººä¸€çœ¼çœ‹æ‡‚ï¼Œä¹Ÿèƒ½è®© AI æŒ‰è¡¨ç”Ÿæˆä»£ç ã€æŒ‰è§„åˆ™ç”Ÿæˆé€»è¾‘ï¼Œå‡å°‘æ­§ä¹‰å’Œè¿”å·¥ï¼Œä¹Ÿæ–¹ä¾¿åç»­çš„1â€”Nè¿­ä»£ã€‚</p>
<hr/>
<h3 data-id="heading-6">2.4 éœ€æ±‚æ–‡æ¡£ä¸­å»ºè®®åŒ…å«çš„è¦ç´ </h3>








































<table><thead><tr><th>è¦ç´ </th><th>è¯´æ˜</th><th>å¯¹ AI çš„ç”¨é€”</th></tr></thead><tbody><tr><td>åŠŸèƒ½æ¦‚è¿°</td><td>ä¸€ä¸¤å¥è¯è¯´æ¸…åŠŸèƒ½åšä»€ä¹ˆã€è°ç”¨</td><td>ç¡®å®šæ¨¡å—è¾¹ç•Œã€è·¯ç”±/èœå•å‘½å</td></tr><tr><td>æµç¨‹å›¾</td><td>ç”¨ Mermaid ç­‰ç”»æ¸…ä¸»æµç¨‹</td><td>ç”Ÿæˆé¡ºåºé€»è¾‘ã€è°ƒç”¨å…³ç³»</td></tr><tr><td>é¡µé¢åˆ†åŒº</td><td>å¯¼èˆªæ ã€æç¤ºåŒºã€æŸ¥è¯¢åŒºã€åˆ—è¡¨åŒºç­‰</td><td>å¯¹åº” template åŒºå—ä¸ç»„ä»¶</td></tr><tr><td>æ§ä»¶è¡¨</td><td>æ§ä»¶åç§°ã€ç±»å‹ã€å¿…å½•ã€å¯è§æ€§ã€åˆå§‹å€¼ã€æ“ä½œè§„åˆ™ã€æ•°æ®å…ƒ</td><td>ç”Ÿæˆè¡¨å•é¡¹ã€æ ¡éªŒã€å­—æ®µç»‘å®š</td></tr><tr><td>æ•°æ®å…ƒ</td><td>ä¸­æ–‡åã€æ ‡è¯†ç¬¦ã€å­—æ®µåã€ç±»å‹ã€é•¿åº¦</td><td>ä¸æ¥å£å­—æ®µã€DTO å¯¹é½</td></tr><tr><td>é¡µé¢è§„åˆ™</td><td>å¦‚ã€Œ4.1 é¡µé¢åˆå§‹åŒ–ã€ã€Œ4.2 xxæ•°æ®æŸ¥è¯¢è§„åˆ™ã€</td><td>ç”Ÿæˆ mounted/created é€»è¾‘ä¸æŸ¥è¯¢æ¡ä»¶è½¬æ¢</td></tr></tbody></table>
<p>æ¥å£éœ€æ±‚æ–‡æ¡£ä¸­åˆ™å»ºè®®åŒ…å«ï¼š</p>
<ul>
<li>æ¥å£æ¦‚è¿°ã€å…¥å‚/å‡ºå‚è¡¨ï¼ˆå«æ•°æ®å…ƒä¸æ£€ç´¢ç­–ç•¥ï¼‰ï¼›</li>
<li>å…¥å‚æ ¡éªŒã€æ¶‰åŠè¡¨ã€å…³é”®å–å€¼è§„åˆ™ã€‚</li>
</ul>
<p>è¿™æ · AI ç”Ÿæˆçš„ API å°è£…ã€è¯·æ±‚å‚æ•°å’Œ DTO æ‰èƒ½ä¸åç«¯çº¦å®šä¸€è‡´ã€‚</p>
<h3 data-id="heading-7">2.5 ç³»ç»Ÿå‚æ•°é…ç½®çš„ç”¨æ³•ï¼ˆå¯é€‰ï¼‰</h3>
<p>ã€Œç³»ç»Ÿå‚æ•°é…ç½®.mdã€ä¸­æŒ‰æ¨¡å—åˆ—å‡ºã€Œä¸»é¡µé¢æç¤ºä¿¡æ¯å‚æ•°é…ç½®ã€ç­‰ï¼Œå¹¶è¯´æ˜ä½¿ç”¨åœºæ™¯ã€é…ç½®é¡¹ã€é»˜è®¤å€¼ã€‚<br/>
å‰ç«¯åº”ï¼š<strong>ä»é…ç½®è¯»å–æç¤ºè¯­ç­‰</strong>ï¼Œè€Œä¸æ˜¯åœ¨é¡µé¢é‡Œå†™æ­»ã€‚è¿™æ · AI ç”Ÿæˆçš„ä»£ç ä¼šå»è¯» <code>state.configs</code> æˆ–ç­‰ä»·é…ç½®ï¼Œä¾¿äºå¤šåœ°åŒº/å¤šç¯å¢ƒå·®å¼‚åŒ–ã€‚</p>
<hr/>
<h2 data-id="heading-8">ä¸‰ã€è¾“å‡ºè§„èŒƒï¼šç”¨é¡¹ç›®è§„åˆ™çº¦æŸ AI çš„ä»£ç </h2>
<p>æœ‰äº†æ¸…æ™°è¾“å…¥ï¼Œè¿˜éœ€è¦<strong>ç»Ÿä¸€è¾“å‡º</strong>ï¼šç›®å½•ã€å‘½åã€ç»„ä»¶ç»“æ„ã€API ä¸çŠ¶æ€ç®¡ç†æ–¹å¼éƒ½è¦å’Œç°æœ‰é¡¹ç›®ä¸€è‡´ã€‚æœ¬é¡¹ç›®ä¸­é€šè¿‡ <strong>xxx-xxx-h5-rules</strong> æ‰¿æ‹…è¿™ä¸€è§’è‰²ã€‚</p>
<h3 data-id="heading-9">3.1 è§„åˆ™ä½“ç³»æ¦‚è§ˆï¼ˆxxx-xxx-h5-rulesï¼‰</h3>








































<table><thead><tr><th>è§„åˆ™æ–‡ä»¶</th><th>ä½œç”¨</th><th>å¯¹ AI çš„çº¦æŸ</th></tr></thead><tbody><tr><td>project-structure.mdc</td><td>é¡¹ç›®ç»“æ„ã€å…¥å£ã€è·¯ç”±ä½ç½®</td><td>æ–°æ¨¡å—æ”¾åœ¨å“ªã€å¦‚ä½•æ‹†ç›®å½•</td></tr><tr><td>vue-coding-standards.mdc</td><td>Vue ç»„ä»¶é¡ºåºã€JS è§„èŒƒã€è·¯ç”±/Vuex/API çº¦å®š</td><td>ç»„ä»¶ç»“æ„ã€å‘½åã€mapState/mapMutations ç”¨æ³•</td></tr><tr><td>component-development.mdc</td><td>é€šç”¨/ä¸šåŠ¡ç»„ä»¶ã€æ ‡å‡†çˆ¶/å­é¡µé¢ç»“æ„</td><td>é¡µé¢ç”¨ xxx + keep-aliveã€å­é¡µé¢ name ä¸ class å‘½å</td></tr><tr><td>api-integration.mdc</td><td>HTTP å°è£…ã€æ¥å£ç»„ç»‡ã€é”™è¯¯ä¸åŠ å¯†</td><td>api æ¨¡å—å†™æ³•ã€http ä½¿ç”¨æ–¹å¼</td></tr><tr><td>business-modules.mdc</td><td>ä¸šåŠ¡æ¨¡å—åˆ—è¡¨ã€æ–°å¢æ¨¡å—æ­¥éª¤</td><td>è·¯ç”±/store/api æ³¨å†Œé¡ºåºä¸å‘½å</td></tr><tr><td>build-deployment.mdc</td><td>æ„å»ºã€ç¯å¢ƒã€éƒ¨ç½²</td><td>ä¸éšæ„æ”¹æ„å»ºä¸å…¬å…±è·¯å¾„</td></tr></tbody></table>
<p>è¿™äº›è§„åˆ™åº”è¢« Cursor ç­‰å·¥å…·è¯†åˆ«ï¼ˆå¦‚é€šè¿‡ <code>.cursor/rules</code> æˆ–è¯´æ˜ä¸­å¼•ç”¨ï¼‰ï¼Œè®© AI åœ¨ç”Ÿæˆä»£ç æ—¶é»˜è®¤éµå¾ªã€‚</p>
<h3 data-id="heading-10">3.2 éƒ¨åˆ† mdc æ–‡æ¡£è¯´æ˜</h3>
<p>è§„åˆ™æ–‡ä»¶ä¸åªæœ‰ä»£ç ï¼Œè€Œæ˜¯ã€Œè¯´æ˜ + åˆ—è¡¨ + ç›®å½•æ ‘ + ä»£ç å—ã€ç»„åˆã€‚ä¸‹é¢æŒ‰æ–‡ä»¶æ‘˜å½•éƒ¨åˆ†åŸæ–‡ï¼Œä¾›å¤§å®¶å‚è€ƒã€‚</p>
<hr/>
<p><strong>README.mdcï¼ˆæ€»è§ˆï¼‰</strong></p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-meta">---</span>
<span class="hljs-attr">alwaysApply:</span> <span class="hljs-literal">true</span>
<span class="hljs-attr">description:</span> <span class="hljs-string">xxx-xxx-h5</span> <span class="hljs-string">é¡¹ç›®è§„åˆ™æ€»è§ˆ</span>
<span class="hljs-meta">---
</span>
<span class="hljs-comment"># xxx-xxx-h5 é¡¹ç›®è§„åˆ™æ€»è§ˆ</span>

<span class="hljs-comment">## è§„åˆ™æ–‡ä»¶è¯´æ˜</span>

<span class="hljs-string">æœ¬ç›®å½•åŒ…å«</span> <span class="hljs-string">xxx-xxx-h5</span> <span class="hljs-string">é¡¹ç›®çš„æ‰€æœ‰</span> <span class="hljs-string">Cursor</span> <span class="hljs-string">è§„åˆ™æ–‡ä»¶ï¼Œç”¨äºæŒ‡å¯¼</span> <span class="hljs-string">AI</span> <span class="hljs-string">åŠ©æ‰‹æ›´å¥½åœ°ç†è§£å’Œå¼€å‘è¯¥é¡¹ç›®ã€‚</span>

<span class="hljs-comment">### è§„åˆ™æ–‡ä»¶åˆ—è¡¨</span>

<span class="hljs-number">1</span><span class="hljs-string">.</span> <span class="hljs-string">**project-structure.mdc**</span> <span class="hljs-bullet">-</span> <span class="hljs-string">é¡¹ç›®ç»“æ„æŒ‡å—</span>
   <span class="hljs-bullet">-</span> <span class="hljs-string">é¡¹ç›®æ¦‚è¿°å’Œæ ¸å¿ƒç›®å½•ç»“æ„</span>
   <span class="hljs-bullet">-</span> <span class="hljs-string">æ¨¡å—åŒ–æ¶æ„ç‰¹ç‚¹è¯´æ˜</span>
   <span class="hljs-bullet">-</span> <span class="hljs-string">ä¸»è¦å…¥å£æ–‡ä»¶å’Œé…ç½®æ–‡ä»¶ä½ç½®</span>

<span class="hljs-number">2</span><span class="hljs-string">.</span> <span class="hljs-string">**vue-coding-standards.mdc**</span> <span class="hljs-bullet">-</span> <span class="hljs-string">Vue</span> <span class="hljs-number">2.</span><span class="hljs-string">x</span> <span class="hljs-string">ç¼–ç è§„èŒƒ</span>
   <span class="hljs-bullet">-</span> <span class="hljs-string">Vue</span> <span class="hljs-string">ç»„ä»¶å¼€å‘è§„èŒƒ</span>
   <span class="hljs-bullet">-</span> <span class="hljs-string">JavaScript</span> <span class="hljs-string">ç¼–ç æ ‡å‡†</span>
   <span class="hljs-bullet">-</span> <span class="hljs-string">è·¯ç”±å’ŒçŠ¶æ€ç®¡ç†è§„èŒƒ</span>
   <span class="hljs-string">...</span>
</code></pre>
<ul>
<li>ç”¨ <strong>frontmatter</strong> å£°æ˜ <code>alwaysApply: true</code>ã€<code>description</code>ï¼Œä¾¿äº Cursor æŒ‰éœ€åŠ è½½æˆ–å¸¸é©»ã€‚</li>
<li>ç”¨ <strong>ç¼–å·åˆ—è¡¨ + å­é¡¹</strong> è¯´æ¸…æ¯ä¸ªè§„åˆ™æ–‡ä»¶è´Ÿè´£ä»€ä¹ˆï¼ŒAI èƒ½å¿«é€Ÿåˆ¤æ–­è¯¥æŸ¥å“ªä¸ªæ–‡ä»¶ã€‚</li>
</ul>
<hr/>
<p><strong>project-structure.mdcï¼ˆç»“æ„è¯´æ˜ï¼‰</strong></p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># xxx-xxx-h5 é¡¹ç›®ç»“æ„æŒ‡å—</span>

<span class="hljs-section">## é¡¹ç›®æ¦‚è¿°</span>
xxx-xxx-h5 æ˜¯ä¸€ä¸ªåŸºäº Vue 2.x çš„ H5 åº”ç”¨ï¼Œé‡‡ç”¨æ¨¡å—åŒ–æ¶æ„è®¾è®¡ã€‚

<span class="hljs-section">## æ ¸å¿ƒç›®å½•ç»“æ„</span>

<span class="hljs-section">### ä¸»è¦å…¥å£æ–‡ä»¶</span>
<span class="hljs-bullet">-</span> main.js - åº”ç”¨ä¸»å…¥å£ï¼Œé…ç½® Vue å®ä¾‹å’Œå…¨å±€æ’ä»¶
<span class="hljs-bullet">-</span> App.vue - æ ¹ç»„ä»¶
<span class="hljs-bullet">-</span> vue.config.js - Vue CLI é…ç½®æ–‡ä»¶

<span class="hljs-section">### è·¯ç”±ç³»ç»Ÿ</span>
<span class="hljs-bullet">-</span> router/index.js - ä¸»è·¯ç”±é…ç½®ï¼ŒåŒ…å«æ‰€æœ‰æ¨¡å—è·¯ç”±
<span class="hljs-bullet">-</span> router/ - å„åŠŸèƒ½æ¨¡å—çš„è·¯ç”±é…ç½®
...

<span class="hljs-section">## æ¨¡å—åŒ–æ¶æ„ç‰¹ç‚¹</span>
é¡¹ç›®é‡‡ç”¨åŠŸèƒ½æ¨¡å—åŒ–è®¾è®¡ï¼Œæ¯ä¸ªä¸šåŠ¡åŠŸèƒ½éƒ½æœ‰å¯¹åº”çš„ï¼š
<span class="hljs-bullet">-</span> è·¯ç”±é…ç½® (router/)
<span class="hljs-bullet">-</span> çŠ¶æ€ç®¡ç† (store/)
<span class="hljs-bullet">-</span> API æ¥å£ (api/)
<span class="hljs-bullet">-</span> é¡µé¢ç»„ä»¶ (views/)

è¿™ç§è®¾è®¡ä¾¿äºç»´æŠ¤å’Œæ‰©å±•æ–°åŠŸèƒ½ã€‚
</code></pre>
<ul>
<li><strong>å…ˆæ¦‚è¿°å†æ‹†ç›®å½•</strong>ï¼Œ<code>AI èƒ½å»ºç«‹ã€Œæ¨¡å— = router + store + api + viewsã€çš„å¿ƒæ™ºæ¨¡å‹</code>ã€‚</li>
<li>æ— ä»£ç ä¹Ÿå¯çº¦æŸã€Œæ–°æ¨¡å—è¯¥å»ºå“ªäº›ç›®å½•ã€æ”¾åœ¨å“ªã€ã€‚</li>
</ul>
<hr/>
<p><strong>vue-coding-standards.mdc</strong></p>
<pre><code class="hljs language-markdown" lang="markdown">---
globs: <span class="hljs-emphasis">*.vue,*</span>.js
<span class="hljs-section">description: Vue 2.x ç¼–ç è§„èŒƒå’Œæœ€ä½³å®è·µ
---</span>

<span class="hljs-section">### ç»„ä»¶å‘½å</span>
<span class="hljs-bullet">-</span> ç»„ä»¶åä½¿ç”¨ PascalCase
<span class="hljs-bullet">-</span> æ–‡ä»¶åä¸ç»„ä»¶åä¿æŒä¸€è‡´

<span class="hljs-section">### è·¯ç”±å‘½å</span>
<span class="hljs-bullet">-</span> è·¯ç”±åç§°ä½¿ç”¨ camelCase
<span class="hljs-bullet">-</span> è·¯å¾„ä½¿ç”¨ kebab-case
<span class="hljs-bullet">-</span> æ¨¡å—è·¯ç”±ç»Ÿä¸€å¯¼å…¥åˆ°ä¸»è·¯ç”±
<span class="hljs-bullet">-</span> ä½¿ç”¨å¸¸é‡å¯¼å‡ºè·¯ç”±åç§°ï¼Œä¾¿äºç»´æŠ¤
</code></pre>
<ul>
<li><strong>globs</strong> é™å®šåªåœ¨ <code>*.vue,*.js</code> ä¸‹ç”Ÿæ•ˆï¼Œé¿å…åœ¨æ— å…³æ–‡ä»¶ä¸­è¯¯ç”¨ã€‚</li>
<li><strong>æ¡æ–‡å¼çº¦å®š</strong>ï¼ˆå‘½åã€è·¯å¾„ã€å¸¸é‡ï¼‰æ— éœ€ä»£ç ä¹Ÿèƒ½çº¦æŸç”Ÿæˆç»“æœã€‚</li>
</ul>
<p>åŒä¸€æ–‡ä»¶å†…å†é…ã€Œè·å–ç³»ç»Ÿé…ç½®ã€çš„<strong>è¯´æ˜ + æ³¨æ„äº‹é¡¹ + ä»£ç </strong>ï¼šè§„åˆ™é‡Œå…ˆå†™ã€Œåœ¨ç»„ä»¶ä¸­è·å–ç³»ç»Ÿé…ç½®å¿…é¡»ä½¿ç”¨ä»¥ä¸‹æ–¹å¼ã€ï¼Œå†è´´ä»£ç ï¼›æ¥ç€ç”¨<strong>æ³¨æ„äº‹é¡¹</strong>åˆ—å‡ºå››æ¡ï¼ˆç”¨æˆ·ä¿¡æ¯èµ° gettersã€ç³»ç»Ÿé…ç½®èµ° stateã€ç®­å¤´å‡½æ•°ã€é¿å…åœ¨ methods é‡Œè®¿é—® storeï¼‰ã€‚ç¤ºä¾‹ä»£ç ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// vue-coding-standards.mdc ä¸­è§„å®šçš„æ–¹å¼</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-attr">computed</span>: {
    <span class="hljs-attr">sbfConfigs</span>: <span class="hljs-function">(<span class="hljs-params">vm</span>) =&gt;</span> {
      <span class="hljs-keyword">return</span> vm.<span class="hljs-property">$store</span>.<span class="hljs-property">state</span>.<span class="hljs-property">configs</span>.<span class="hljs-property">xxx</span>
    }
  }
}
</code></pre>
<ul>
<li><strong>å…ˆå†™ã€Œå¿…é¡»ä½¿ç”¨ä»¥ä¸‹æ–¹å¼ã€å†è´´ä»£ç </strong>ï¼ŒAI ä¼šä¼˜å…ˆé‡‡ç”¨è¯¥å†™æ³•ã€‚</li>
<li><strong>æ³¨æ„äº‹é¡¹</strong> èƒ½å‡å°‘ã€Œèƒ½è·‘ä½†ä¸ç¬¦åˆé¡¹ç›®ä¹ æƒ¯ã€çš„ç”Ÿæˆï¼ˆå¦‚æŠŠ config æ”¾åœ¨ methods é‡Œï¼‰ã€‚</li>
</ul>
<hr/>
<p><strong>component-development.mdc</strong></p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section">### ç»„ä»¶è®¾è®¡åŸåˆ™</span>
<span class="hljs-bullet">-</span> å•ä¸€èŒè´£ï¼šæ¯ä¸ªç»„ä»¶åªè´Ÿè´£ä¸€ä¸ªåŠŸèƒ½
<span class="hljs-bullet">-</span> å¯å¤ç”¨æ€§ï¼šç»„ä»¶åº”è¯¥å¯ä»¥åœ¨ä¸åŒåœºæ™¯ä¸‹å¤ç”¨
<span class="hljs-bullet">-</span> å¯é…ç½®æ€§ï¼šé€šè¿‡ props æä¾›çµæ´»çš„é…ç½®é€‰é¡¹
<span class="hljs-bullet">-</span> å¯æ‰©å±•æ€§ï¼šæ”¯æŒæ’æ§½å’Œäº‹ä»¶æ‰©å±•

<span class="hljs-section">### æ ‡å‡†é¡µé¢ç»„ä»¶ç»“æ„</span>
<span class="hljs-bullet">-</span> é¡µé¢ç»„ä»¶æ”¾åœ¨ <span class="hljs-code">`views/`</span> ç›®å½•
<span class="hljs-bullet">-</span> æŒ‰åŠŸèƒ½æ¨¡å—ç»„ç»‡å­ç›®å½•
<span class="hljs-bullet">-</span> ç»„ä»¶åä½¿ç”¨ <span class="hljs-code">`moduleName.pageName`</span> æ ¼å¼
<span class="hljs-bullet">-</span> çˆ¶çº§ç»„ä»¶ä½¿ç”¨ <span class="hljs-code">`xxTransition`</span> å’Œ <span class="hljs-code">`keep-alive`</span>
</code></pre>
<ul>
<li><strong>è®¾è®¡åŸåˆ™</strong> æ˜¯çº¯æ–‡å­—ï¼Œä½†èƒ½å¼•å¯¼ AI ä¸å†™ã€Œå¤§è€Œå…¨ã€çš„å•æ–‡ä»¶é¡µé¢ã€‚</li>
<li><strong>æ ‡å‡†é¡µé¢ç»„ä»¶ç»“æ„</strong> å››æ¡ç›´æ¥å¯¹åº”ã€Œæ”¾å“ªã€æ€ä¹ˆå‘½åã€ç”¨ä»€ä¹ˆåŒ…è£¹ã€ï¼Œå’Œåé¢çš„ä»£ç å—ä¸€è‡´ã€‚</li>
</ul>
<hr/>
<p><strong>api-integration.mdc</strong></p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section">### æ¨¡å—åŒ– API ç»“æ„</span>
api/
â”œâ”€â”€ index.js              # API ä¸»å…¥å£
â”œâ”€â”€ account.js            # è´¦æˆ·ç›¸å…³æ¥å£
â”œâ”€â”€ apply.js              # ç”³è¯·ç›¸å…³æ¥å£
â”œâ”€â”€ basecode.js           # åŸºç¡€ä»£ç æ¥å£
â”œâ”€â”€ pay.js                # æ”¯ä»˜ç›¸å…³æ¥å£
â””â”€â”€ ...                   # å…¶ä»–ä¸šåŠ¡æ¨¡å—æ¥å£

<span class="hljs-section">### æ ¸å¿ƒ HTTP é…ç½®</span>
<span class="hljs-bullet">-</span> core/http.js - åŸºç¡€ HTTP é…ç½®
<span class="hljs-bullet">-</span> core/httpEncrypt.js - åŠ å¯† HTTP é…ç½®
<span class="hljs-bullet">-</span> core/BusinessError.js - ä¸šåŠ¡é”™è¯¯å¤„ç†
</code></pre>
<ul>
<li><strong>ç›®å½•æ ‘</strong> è®© AI çŸ¥é“æ–°æ¨¡å—çš„ api æ–‡ä»¶åº”æ”¾åœ¨å“ªã€å¦‚ä½•ä¸ index æŒ‚è½½ã€‚</li>
<li><strong>æ ¸å¿ƒ HTTP é…ç½®</strong> åˆ—å‡ºæ–‡ä»¶ä¸èŒè´£ï¼Œç”Ÿæˆè¯·æ±‚ä»£ç æ—¶ä¼šè”æƒ³åˆ°ç”¨ <code>@/core/http</code>ã€BusinessErrorã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-11">3.3 è¿™æ ·å†™ mdc è§„åˆ™çš„å¥½å¤„</h3>

































<table><thead><tr><th>å†™æ³•</th><th>å¥½å¤„</th></tr></thead><tbody><tr><td><strong>frontmatterï¼ˆalwaysApply / globs / descriptionï¼‰</strong></td><td>å·¥å…·å¯æŒ‰è·¯å¾„æˆ–å…¨å±€å†³å®šä½•æ—¶æ³¨å…¥è§„åˆ™ï¼Œå‡å°‘æ— å…³ä¸Šä¸‹æ–‡ï¼›description ä¾¿äºäººå’Œ AI å¿«é€Ÿç†è§£æ–‡ä»¶ç”¨é€”ã€‚</td></tr><tr><td><strong>åˆ†æ–‡ä»¶ï¼ˆç»“æ„ / Vue / ç»„ä»¶ / API / ä¸šåŠ¡ / æ„å»ºï¼‰</strong></td><td>å•æ–‡ä»¶çŸ­å°ã€èŒè´£æ¸…æ™°ï¼ŒAI æ£€ç´¢æ—¶å®¹æ˜“å‘½ä¸­ã€Œè·¯ç”±ã€ã€Œç»„ä»¶ã€ã€ŒAPIã€ç­‰å…³é”®è¯ï¼›åç»­å¢åˆ è§„åˆ™ä¸å½±å“å…¶ä»–é¢†åŸŸã€‚</td></tr><tr><td><strong>è¯´æ˜ + åˆ—è¡¨ + ä»£ç ä¸€èµ·å†™</strong></td><td>æ—¢æœ‰ã€Œå¿…é¡»ã€ã€Œåº”ã€ç­‰çº¦æŸæ€§æ–‡å­—ï¼Œåˆæœ‰å¯å¤åˆ¶çš„æ¨¡æ¿ä»£ç ï¼ŒAI æ—¢çŸ¥é“ã€Œä¸ºä»€ä¹ˆè¿™æ ·ã€åˆçŸ¥é“ã€Œé•¿ä»€ä¹ˆæ ·ã€ï¼Œç”Ÿæˆæ—¶æ›´å°‘åç¦»ã€‚</td></tr><tr><td><strong>æ³¨æ„äº‹é¡¹ / å‘½åè§„èŒƒç­‰æ¡æ–‡</strong></td><td>ä¸ä¾èµ–ä»£ç ä¹Ÿèƒ½çº¦æŸå‘½åã€æ•°æ®æ¥æºï¼ˆå¦‚ config åªä» computed å–ï¼‰ã€é”™è¯¯å¤„ç†æ–¹å¼ï¼Œé¿å…ã€Œé£æ ¼æ­£ç¡®ä½†ç»†èŠ‚ä¸ç¬¦åˆé¡¹ç›®ä¹ æƒ¯ã€ã€‚</td></tr><tr><td><strong>ç›®å½•æ ‘ä¸å…¥å£è¯´æ˜</strong></td><td>æ˜ç¡®æ–°æ¨¡å—è¯¥å»ºå“ªäº›ç›®å½•ã€åœ¨ index é‡Œå¦‚ä½•æŒ‚è½½ï¼ŒAI ç”Ÿæˆçš„ç›®å½•å’Œ import å…³ç³»æ›´ä¸€è‡´ã€‚</td></tr><tr><td><strong>æ ‡å‡†æ¨¡å¼ + å¤æ‚æ¨¡å¼å¹¶å­˜</strong></td><td>ç®€å•ä¸šåŠ¡ç”¨æ ‡å‡†æ¨¡å¼ï¼ˆreset/setã€queryListï¼‰ï¼Œå¤æ‚ä¸šåŠ¡ç”¨ actions/gettersï¼ŒAI èƒ½æŒ‰éœ€æ±‚é€‰æ¨¡æ¿ï¼Œè€Œä¸æ˜¯è‡ªå·±å‘æ˜ä¸€å¥—ã€‚</td></tr></tbody></table>
<p><code>æ•´ä½“ä¸Šï¼Œ**æŠŠè§„åˆ™å†™æˆã€Œå¯æ‰§è¡Œçš„è¯´æ˜ + å¯ç²˜è´´çš„ä»£ç ã€**ï¼Œå¹¶é…åˆ frontmatter ä¸åˆ†æ–‡ä»¶ç»„ç»‡ï¼Œèƒ½è®© AI åœ¨æ­£ç¡®æ—¶æœºã€æ­£ç¡®èŒƒå›´å†…å¥—ç”¨çº¦å®šï¼Œå‡å°‘åå¤ä¿®æ”¹å’Œé£æ ¼æ¼‚ç§»ï¼Œä¹Ÿä¾¿äºæ–°äººæˆ–åç»­ AI ç»§æ‰¿åŒä¸€å¥—è§„èŒƒã€‚</code></p>
<h2 data-id="heading-12">å››ã€æ€»ç»“</h2>
<ol>
<li>
<p><strong>æ–°åŠŸèƒ½å…ˆå†™æ¸…éœ€æ±‚ä¸æ¥å£</strong><br/>
è‡³å°‘å…·å¤‡ï¼šåŠŸèƒ½éœ€æ±‚ï¼ˆå«æµç¨‹ä¸é¡µé¢åˆ†æï¼‰ã€æ¥å£éœ€æ±‚ï¼ˆå…¥å‚/å‡ºå‚/è§„åˆ™ï¼‰ã€ä¸å‰ç«¯ç›¸å…³çš„ç³»ç»Ÿå‚æ•°é…ç½®ã€‚</p>
</li>
<li>
<p><strong>æŠŠé¡¹ç›®è§„åˆ™æ˜¾å¼åŒ–</strong><br/>
åƒ xxx-xxx-h5-rules ä¸€æ ·ï¼ŒæŠŠç»“æ„ã€Vueã€ç»„ä»¶ã€APIã€ä¸šåŠ¡æ¨¡å—ã€æ„å»ºæ‹†æˆç‹¬ç«‹è§„åˆ™æ–‡ä»¶ï¼Œå¹¶è®© AI åœ¨ä¸Šä¸‹æ–‡ä¸­èƒ½è¯»åˆ°è¿™äº›è§„åˆ™ã€‚</p>
</li>
<li>
<p><strong>æ¨¡å—å‘½åä¸æ³¨å†Œç»Ÿä¸€</strong><br/>
ä¸šåŠ¡æ¨¡å—ç”¨æ‹¼éŸ³é¦–å­—æ¯ï¼›æ–°å¢æ¨¡å—ä¸¥æ ¼æŒ‰ router â†’ store â†’ api â†’ views çš„é¡ºåºæ³¨å†Œï¼Œå¹¶åœ¨ä¸»å…¥å£ä¸­æŒ‚è½½ã€‚</p>
</li>
<li>
<p><strong>é…ç½®ä¸æ•°æ®å…ƒä¸å†™æ­»</strong><br/>
æç¤ºè¯­ã€å¼€å…³ç­‰èµ°ç³»ç»Ÿå‚æ•°é…ç½®ï¼›å­—æ®µåã€æ•°æ®å…ƒä¸æ¥å£æ–‡æ¡£ä¸€è‡´ï¼Œä¾¿äºå‰åç«¯è”è°ƒä¸ AI äºŒæ¬¡ä¿®æ”¹ã€‚</p>
</li>
<li>
<p><strong>ç”¨ç°æœ‰æ¨¡å—å½“æ¨¡æ¿</strong><br/>
è®© AI å‚è€ƒå†å²æ¨¡å—çš„ router/store/api/views å®ç°æ–¹å¼ï¼Œå†ç»“åˆéœ€æ±‚ä¸æ¥å£æ–‡æ¡£ç”Ÿæˆæ–°æ¨¡å—ï¼Œå¯å‡å°‘é£æ ¼åå·®ã€‚</p>
</li>
</ol>
<hr/>
<h2 data-id="heading-13">äº”ã€ç»“è¯­</h2>
<p>AI è¦åœ¨ç°æœ‰å·¥ç¨‹é‡Œç¨³å®šè½åœ°ï¼Œä¸èƒ½åªé ã€Œè¯´äººè¯ã€æéœ€æ±‚ï¼Œè€Œè¦ï¼š</p>
<ul>
<li><strong>è¾“å…¥ä¾§</strong>ï¼š<code>æŠŠéœ€æ±‚ã€æ¥å£ã€é…ç½®å†™æˆç»“æ„åŒ–ã€å¯æ£€ç´¢çš„æ–‡æ¡£ï¼ŒåæœŸå¯å¼•å…¥å‘é‡åº“ç¼–æ’</code>ï¼›</li>
<li><strong>è¾“å‡ºä¾§</strong>ï¼š<code>ç”¨é¡¹ç›®è§„åˆ™ï¼ˆå¦‚ xxx-xxx-h5-rulesï¼‰çº¦æŸç›®å½•ã€å‘½åã€ç»„ä»¶ã€API å’ŒçŠ¶æ€ç®¡ç†</code>ã€‚</li>
</ul>
<p><strong>AI è½åœ°è§„èŒƒ</strong>æ˜¯ä¸€ä¸ªç³»ç»ŸåŒ–å·¥ç¨‹ï¼Œæœ¬æ–‡ä»…ä»‹ç»äº†éœ€æ±‚ä¾§å’Œä»£ç ç”Ÿæˆä¾§éƒ¨åˆ†ï¼Œè¿˜æœ‰å¾ˆå¤šåœ°æ–¹æ²¡æœ‰æåˆ°ï¼Œè°¨ä¾›å¤§å®¶å‚è€ƒã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[SpringBoot + è§„åˆ™æ‰§è¡Œæ²™ç®± + è¶…æ—¶ç†”æ–­ï¼šé˜²æ­¢è„šæœ¬æ­»å¾ªç¯æ‹–å®æ•´ä¸ªæœåŠ¡]]></title>    <link>https://juejin.cn/post/7605051886435090495</link>    <guid>https://juejin.cn/post/7605051886435090495</guid>    <pubDate>2026-02-11T06:25:04.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605051886435090495" data-draft-id="7605142381152190527" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="SpringBoot + è§„åˆ™æ‰§è¡Œæ²™ç®± + è¶…æ—¶ç†”æ–­ï¼šé˜²æ­¢è„šæœ¬æ­»å¾ªç¯æ‹–å®æ•´ä¸ªæœåŠ¡"/> <meta itemprop="keywords" content="åç«¯,Java"/> <meta itemprop="datePublished" content="2026-02-11T06:25:04.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="whatä¸¶k"/> <meta itemprop="url" content="https://juejin.cn/user/2578801884147418"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            SpringBoot + è§„åˆ™æ‰§è¡Œæ²™ç®± + è¶…æ—¶ç†”æ–­ï¼šé˜²æ­¢è„šæœ¬æ­»å¾ªç¯æ‹–å®æ•´ä¸ªæœåŠ¡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2578801884147418/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    whatä¸¶k
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-11T06:25:04.000Z" title="Wed Feb 11 2026 06:25:04 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»20åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">SpringBoot + è§„åˆ™æ‰§è¡Œæ²™ç®± + è¶…æ—¶ç†”æ–­ï¼šé˜²æ­¢è„šæœ¬æ­»å¾ªç¯æ‹–å®æ•´ä¸ªæœåŠ¡</h2>
<p>åœ¨åç«¯æœåŠ¡å¼€å‘ä¸­ï¼ŒåŠ¨æ€è§„åˆ™æ‰§è¡Œæ˜¯ä¸€ä¸ªéå¸¸å¸¸è§çš„åœºæ™¯â€”â€”æ¯”å¦‚é£æ§è§„åˆ™ã€å®šä»·è§„åˆ™ã€æµç¨‹è·³è½¬è§„åˆ™ç­‰ã€‚ä¸ºäº†æå‡çµæ´»æ€§ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šå…è®¸ä¸šåŠ¡äººå‘˜é€šè¿‡è„šæœ¬ï¼ˆå¦‚ Groovyã€QLExpressï¼‰åŠ¨æ€é…ç½®è§„åˆ™ï¼Œè€Œéæ¯æ¬¡éƒ½ä¿®æ”¹ä»£ç ã€é‡å¯æœåŠ¡ã€‚ä½†éšä¹‹è€Œæ¥çš„ä¸€ä¸ªè‡´å‘½é£é™©æ˜¯ï¼šå¦‚æœè„šæœ¬ä¸­å‡ºç°æ­»å¾ªç¯ã€æ— é™é€’å½’ï¼Œæˆ–è€…æ‰§è¡Œæ—¶é—´è¿‡é•¿ï¼Œä¼šç›´æ¥è€—å°½æœåŠ¡çº¿ç¨‹æ± èµ„æºï¼Œå¯¼è‡´æ•´ä¸ªæœåŠ¡é›ªå´©ï¼Œç”šè‡³å®•æœºã€‚</p>
<p>æœ¬æ–‡å°†åˆ†äº«ä¸€å¥—åŸºäº SpringBoot çš„è§£å†³æ–¹æ¡ˆï¼šé€šè¿‡ã€Œè§„åˆ™æ‰§è¡Œæ²™ç®±ã€å®ç°è„šæœ¬ä¸ä¸»æœåŠ¡çš„éš”ç¦»ï¼Œç»“åˆã€Œè¶…æ—¶ç†”æ–­æœºåˆ¶ã€å¼ºåˆ¶ä¸­æ–­å¼‚å¸¸è„šæœ¬ï¼ŒåŒé‡ä¿éšœæœåŠ¡ç¨³å®šæ€§ï¼Œå½»åº•è§£å†³è„šæœ¬å¼‚å¸¸æ‹–å®æœåŠ¡çš„é—®é¢˜ã€‚æ–¹æ¡ˆå…¼é¡¾å®ç”¨æ€§å’Œå¯æ‰©å±•æ€§ï¼Œå¯ç›´æ¥åº”ç”¨äºç”Ÿäº§ç¯å¢ƒã€‚</p>
<h2 data-id="heading-1">ä¸€ã€æ ¸å¿ƒç—›ç‚¹ï¼šä¸ºä»€ä¹ˆè„šæœ¬å¼‚å¸¸ä¼šæ‹–å®æ•´ä¸ªæœåŠ¡ï¼Ÿ</h2>
<p>åœ¨æ²¡æœ‰éš”ç¦»å’Œç†”æ–­æœºåˆ¶çš„æƒ…å†µä¸‹ï¼Œè„šæœ¬æ‰§è¡Œçš„é£é™©ä¸»è¦é›†ä¸­åœ¨ 3 ä¸ªæ–¹é¢ï¼Œæœ€ç»ˆéƒ½ä¼šæŒ‡å‘æœåŠ¡ä¸å¯ç”¨ï¼š</p>
<ol>
<li>â€‹<strong>çº¿ç¨‹èµ„æºè€—å°½</strong>â€‹ï¼šSpringBoot é»˜è®¤ä½¿ç”¨ Tomcat çº¿ç¨‹æ± å¤„ç†è¯·æ±‚ï¼Œçº¿ç¨‹æ•°é‡æœ‰é™ï¼ˆé»˜è®¤æ ¸å¿ƒçº¿ç¨‹ 10 ä¸ªï¼Œæœ€å¤§çº¿ç¨‹ 200 ä¸ªï¼‰ã€‚å¦‚æœè„šæœ¬å‡ºç°æ­»å¾ªç¯ï¼Œæ‰§è¡Œçº¿ç¨‹ä¼šä¸€ç›´è¢«å ç”¨ï¼Œæ— æ³•é‡Šæ”¾ï¼›å½“è¿™ç±»å¼‚å¸¸è¯·æ±‚å¢å¤šæ—¶ï¼Œçº¿ç¨‹æ± ä¼šå¿«é€Ÿè¢«å æ»¡ï¼Œæ–°çš„è¯·æ±‚æ— æ³•å¤„ç†ï¼ŒæœåŠ¡ç›´æ¥å¡æ­»ã€‚</li>
<li>â€‹<strong>èµ„æºæ³„éœ²</strong>â€‹ï¼šå¼‚å¸¸è„šæœ¬å¯èƒ½ä¼šé¢‘ç¹åˆ›å»ºå¯¹è±¡ã€å ç”¨ IO èµ„æºï¼Œä¸”æ— æ³•æ­£å¸¸é‡Šæ”¾ï¼Œé•¿æœŸè¿è¡Œä¼šå¯¼è‡´ JVM å†…å­˜æº¢å‡ºï¼ˆOOMï¼‰ï¼Œæœ€ç»ˆæœåŠ¡å®•æœºã€‚</li>
<li>â€‹<strong>æ— è¾¹ç•Œå½±å“</strong>â€‹ï¼šè„šæœ¬æ‰§è¡Œä¸ä¸»æœåŠ¡å…±ç”¨ä¸€ä¸ª JVM è¿›ç¨‹ï¼Œè„šæœ¬ä¸­çš„æ¶æ„ä»£ç ï¼ˆæˆ–è¯¯å†™ä»£ç ï¼‰å¯èƒ½ä¼šç›´æ¥æ“ä½œä¸»æœåŠ¡çš„æ ¸å¿ƒèµ„æºï¼ˆå¦‚ä¿®æ”¹é™æ€å˜é‡ã€è°ƒç”¨å±é™©æ–¹æ³•ï¼‰ï¼Œå¼•å‘ä¸å¯æ§çš„çº¿ä¸Šäº‹æ•…ã€‚</li>
</ol>
<p>ä¸¾ä¸ªçœŸå®æ¡ˆä¾‹ï¼šæŸé£æ§ç³»ç»Ÿä¸­ï¼Œä¸šåŠ¡äººå‘˜é…ç½®çš„ Groovy è„šæœ¬å› é€»è¾‘ç–æ¼å‡ºç°æ­»å¾ªç¯ï¼Œå•ä¸ªè¯·æ±‚æ‰§è¡Œæ—¶é—´è¶…è¿‡ 10 åˆ†é’Ÿï¼Œå¯¼è‡´ Tomcat çº¿ç¨‹æ± è¢«å æ»¡ï¼Œæ•´ä¸ªé£æ§æœåŠ¡ç˜«ç—ªï¼Œå½±å“äº†æ ¸å¿ƒäº¤æ˜“æµç¨‹ï¼Œé€ æˆäº†ä¸¥é‡çš„ç»æµæŸå¤±ã€‚</p>
<p>å› æ­¤ï¼Œå¯¹äºåŠ¨æ€è„šæœ¬æ‰§è¡Œåœºæ™¯ï¼Œã€Œéš”ç¦»ã€å’Œã€Œç†”æ–­ã€ç¼ºä¸€ä¸å¯â€”â€”æ²™ç®±è´Ÿè´£éš”ç¦»ï¼Œé˜²æ­¢è„šæœ¬å½±å“ä¸»æœåŠ¡ï¼›ç†”æ–­è´Ÿè´£å…œåº•ï¼Œé˜²æ­¢å¼‚å¸¸è„šæœ¬é•¿æœŸå ç”¨èµ„æºã€‚</p>
<h2 data-id="heading-2">äºŒã€æ–¹æ¡ˆè®¾è®¡ï¼šSpringBoot + æ²™ç®± + è¶…æ—¶ç†”æ–­ ä¸‰é‡ä¿éšœ</h2>
<p>æœ¬æ¬¡æ–¹æ¡ˆçš„æ ¸å¿ƒæ€è·¯æ˜¯ã€Œåˆ†å±‚éš”ç¦»ã€è¶…æ—¶å…œåº•ã€å¼‚å¸¸ç†”æ–­ã€ï¼Œæ•´ä½“æ¶æ„åˆ†ä¸º 3 å±‚ï¼Œå„å±‚èŒè´£æ¸…æ™°ï¼ŒååŒå·¥ä½œï¼š</p>
<h3 data-id="heading-3">2.1 æ¶æ„åˆ†å±‚è¯´æ˜</h3>
<ol>
<li>â€‹**åº”ç”¨å±‚ï¼ˆSpringBootï¼‰**â€‹ï¼šè´Ÿè´£æ¥æ”¶è¯·æ±‚ã€å‚æ•°æ ¡éªŒã€ç»“æœè¿”å›ï¼Œä»¥åŠæ•´åˆæ²™ç®±å’Œç†”æ–­ç»„ä»¶ï¼Œæä¾›ç»Ÿä¸€çš„è§„åˆ™æ‰§è¡Œå…¥å£ã€‚</li>
<li>â€‹**éš”ç¦»å±‚ï¼ˆè§„åˆ™æ‰§è¡Œæ²™ç®±ï¼‰**â€‹ï¼šé‡‡ç”¨ã€Œè½»é‡çº§æ²™ç®±æ¡†æ¶ã€ï¼Œä¸ºè„šæœ¬æ‰§è¡Œæä¾›ç‹¬ç«‹çš„è¿è¡Œç¯å¢ƒâ€”â€”åŒ…æ‹¬ç‹¬ç«‹çš„ç±»åŠ è½½å™¨ã€çº¿ç¨‹æ± ã€èµ„æºé™åˆ¶ï¼Œç¡®ä¿è„šæœ¬æ‰§è¡Œä¸ä¼šå½±å“ä¸»æœåŠ¡çš„ JVM è¿›ç¨‹å’Œçº¿ç¨‹èµ„æºã€‚</li>
<li>â€‹**å…œåº•å±‚ï¼ˆè¶…æ—¶ç†”æ–­ï¼‰**â€‹ï¼šåŸºäº Resilience4j å®ç°è¶…æ—¶æ§åˆ¶å’Œç†”æ–­æœºåˆ¶ï¼Œå½“è„šæœ¬æ‰§è¡Œè¶…æ—¶æˆ–å¼‚å¸¸é¢‘ç‡è¿‡é«˜æ—¶ï¼Œç›´æ¥ä¸­æ–­æ‰§è¡Œå¹¶è¿”å›é™çº§ç»“æœï¼Œé¿å…èµ„æºæµªè´¹ã€‚</li>
</ol>
<h3 data-id="heading-4">2.2 æ ¸å¿ƒç»„ä»¶é€‰å‹</h3>
<p>é€‰å‹åŸåˆ™ï¼šè½»é‡ã€æ˜“é›†æˆã€ç”Ÿäº§å¯ç”¨ï¼Œé¿å…å¼•å…¥è¿‡é‡çš„ä¾èµ–å¯¼è‡´æœåŠ¡æ€§èƒ½æŸè€—ã€‚</p>
<ul>
<li>â€‹<strong>åŸºç¡€æ¡†æ¶</strong>â€‹ï¼šSpringBoot 2.7.xï¼ˆç¨³å®šç‰ˆï¼Œå…¼å®¹æ€§å¥½ï¼Œç”Ÿæ€å®Œå–„ï¼‰ã€‚</li>
<li>â€‹<strong>è„šæœ¬å¼•æ“</strong>â€‹ï¼šGroovyï¼ˆåŠ¨æ€æ€§å¼ºï¼Œè¯­æ³•æ¥è¿‘ Javaï¼Œä¸ SpringBoot é›†æˆå‹å¥½ï¼Œé€‚åˆä¸šåŠ¡è§„åˆ™ç¼–å†™ï¼‰ã€‚</li>
<li>â€‹<strong>è§„åˆ™æ²™ç®±</strong>â€‹ï¼šAlibaba Sandbox4Jï¼ˆè½»é‡çº§ Java æ²™ç®±ï¼Œæ— éœ€ä¿®æ”¹ JVM å‚æ•°ï¼Œæ”¯æŒç±»åŠ è½½éš”ç¦»ã€èµ„æºé™åˆ¶ï¼Œæ€§èƒ½æŸè€—ä½ï¼‰ã€‚</li>
<li>â€‹<strong>è¶…æ—¶ç†”æ–­</strong>â€‹ï¼šResilience4jï¼ˆè½»é‡çº§ç†”æ–­æ¡†æ¶ï¼ŒåŸºäº Java 8ï¼Œæ”¯æŒè¶…æ—¶ã€ç†”æ–­ã€é™æµç­‰åŠŸèƒ½ï¼Œæ¯” Hystrix æ›´è½»é‡ï¼Œæ›´é€‚åˆ SpringBoot 2.x ç‰ˆæœ¬ï¼‰ã€‚</li>
</ul>
<h2 data-id="heading-5">ä¸‰ã€å®æ“å®ç°ï¼šä»é›¶æ­å»ºå¯è½åœ°çš„è§£å†³æ–¹æ¡ˆ</h2>
<p>ä¸‹é¢æˆ‘ä»¬ä¸€æ­¥æ­¥å®ç°æ•´ä¸ªæ–¹æ¡ˆï¼Œä»ç¯å¢ƒæ­å»ºã€æ ¸å¿ƒä»£ç å¼€å‘ï¼Œåˆ°æµ‹è¯•éªŒè¯ï¼Œç¡®ä¿æ¯ä¸€æ­¥éƒ½å¯å¤åˆ¶ã€å¯è½åœ°ã€‚</p>
<h3 data-id="heading-6">3.1 ç¯å¢ƒæ­å»ºï¼šå¼•å…¥ä¾èµ–</h3>
<p>åœ¨ SpringBoot é¡¹ç›®çš„ pom.xml ä¸­å¼•å…¥æ ¸å¿ƒä¾èµ–ï¼Œæ³¨æ„ç‰ˆæœ¬å…¼å®¹æ€§ï¼ˆå·²éªŒè¯ä»¥ä¸‹ç‰ˆæœ¬å¯æ­£å¸¸è¿è¡Œï¼‰ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- SpringBoot åŸºç¡€ä¾èµ– --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

<span class="hljs-comment">&lt;!-- Groovy è„šæœ¬å¼•æ“ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.codehaus.groovy<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>groovy-all<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.0.17<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">type</span>&gt;</span>pom<span class="hljs-tag">&lt;/<span class="hljs-name">type</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

<span class="hljs-comment">&lt;!-- Alibaba Sandbox4J æ²™ç®± --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.alibaba<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>sandbox4j-core<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

<span class="hljs-comment">&lt;!-- Resilience4j è¶…æ—¶ç†”æ–­ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.github.resilience4j<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>resilience4j-spring-boot2<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.9.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

<span class="hljs-comment">&lt;!-- æµ‹è¯•ä¾èµ– --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>test<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<h3 data-id="heading-7">3.2 æ ¸å¿ƒå¼€å‘ï¼šæ²™ç®±é…ç½®ä¸è„šæœ¬æ‰§è¡Œå°è£…</h3>
<p>æ²™ç®±çš„æ ¸å¿ƒä½œç”¨æ˜¯ã€Œéš”ç¦»ã€ï¼Œæˆ‘ä»¬éœ€è¦é…ç½®æ²™ç®±çš„è¿è¡Œç¯å¢ƒï¼ŒåŒ…æ‹¬ç±»åŠ è½½éš”ç¦»ã€çº¿ç¨‹æ± éš”ç¦»ã€èµ„æºé™åˆ¶ï¼ˆå¦‚ CPUã€å†…å­˜ï¼‰ï¼Œç„¶åå°è£…è„šæœ¬æ‰§è¡Œçš„ç»Ÿä¸€å…¥å£ã€‚</p>
<h4 data-id="heading-8">3.2.1 æ²™ç®±é…ç½®ç±»</h4>
<p>é€šè¿‡ Sandbox4J çš„ API é…ç½®æ²™ç®±ï¼Œç¡®ä¿è„šæœ¬æ‰§è¡Œåœ¨ç‹¬ç«‹çš„ç¯å¢ƒä¸­ï¼Œç¦æ­¢è®¿é—®ä¸»æœåŠ¡çš„æ ¸å¿ƒç±»å’Œæ–¹æ³•ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> com.alibaba.sandbox4j.api.Sandbox;
<span class="hljs-keyword">import</span> com.alibaba.sandbox4j.api.SandboxConfig;
<span class="hljs-keyword">import</span> com.alibaba.sandbox4j.api.SandboxFactory;
<span class="hljs-keyword">import</span> com.alibaba.sandbox4j.enums.IsolationLevel;
<span class="hljs-keyword">import</span> org.springframework.context.annotation.Bean;
<span class="hljs-keyword">import</span> org.springframework.context.annotation.Configuration;

<span class="hljs-keyword">import</span> java.util.concurrent.LinkedBlockingQueue;
<span class="hljs-keyword">import</span> java.util.concurrent.ThreadPoolExecutor;
<span class="hljs-keyword">import</span> java.util.concurrent.TimeUnit;

<span class="hljs-comment">/**
 * è§„åˆ™æ‰§è¡Œæ²™ç®±é…ç½®ç±»ï¼šå®ç°è„šæœ¬ä¸ä¸»æœåŠ¡çš„éš”ç¦»
 */</span>
<span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RuleSandboxConfig</span> {

    <span class="hljs-comment">/**
     * é…ç½®æ²™ç®±ï¼šéš”ç¦»çº§åˆ«ä¸ºTHREADï¼ˆçº¿ç¨‹éš”ç¦»ï¼‰ï¼Œå¹¶æŒ‡å®šç‹¬ç«‹çº¿ç¨‹æ± 
     */</span>
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> Sandbox <span class="hljs-title function_">ruleSandbox</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// 1. é…ç½®æ²™ç®±åŸºç¡€å‚æ•°</span>
        <span class="hljs-type">SandboxConfig</span> <span class="hljs-variable">config</span> <span class="hljs-operator">=</span> SandboxConfig.builder()
                <span class="hljs-comment">// éš”ç¦»çº§åˆ«ï¼šTHREADï¼ˆçº¿ç¨‹éš”ç¦»ï¼‰ï¼Œæ”¯æŒç±»åŠ è½½ã€çº¿ç¨‹ã€èµ„æºçš„å®Œå…¨éš”ç¦»</span>
                .isolationLevel(IsolationLevel.THREAD)
                <span class="hljs-comment">// ç¦æ­¢è„šæœ¬è®¿é—®ä¸»æœåŠ¡çš„æ ¸å¿ƒåŒ…ï¼ˆå¯æ ¹æ®å®é™…æƒ…å†µè°ƒæ•´ï¼‰</span>
                .denyPackages(<span class="hljs-string">"com.example.demo.service"</span>, <span class="hljs-string">"com.example.demo.mapper"</span>)
                <span class="hljs-comment">// å…è®¸è„šæœ¬è®¿é—®çš„åŸºç¡€åŒ…ï¼ˆå¦‚å·¥å…·ç±»ï¼‰</span>
                .allowPackages(<span class="hljs-string">"java.lang"</span>, <span class="hljs-string">"java.util"</span>, <span class="hljs-string">"groovy.lang"</span>)
                <span class="hljs-comment">// è„šæœ¬æ‰§è¡Œè¶…æ—¶æ—¶é—´ï¼ˆé»˜è®¤1000msï¼Œè¿™é‡Œå…ˆé…ç½®ï¼Œæœ€ç»ˆä»¥ç†”æ–­è¶…æ—¶ä¸ºå‡†ï¼‰</span>
                .timeout(<span class="hljs-number">1000</span>)
                .timeUnit(TimeUnit.MILLISECONDS)
                <span class="hljs-comment">// é…ç½®æ²™ç®±ç‹¬ç«‹çº¿ç¨‹æ± ï¼ˆé¿å…å ç”¨ä¸»æœåŠ¡çº¿ç¨‹æ± ï¼‰</span>
                .threadPool(ruleSandboxThreadPool())
                .build();

        <span class="hljs-comment">// 2. åˆ›å»ºæ²™ç®±å®ä¾‹ï¼ˆå•ä¾‹ï¼Œå…¨å±€å¤ç”¨ï¼‰</span>
        <span class="hljs-keyword">return</span> SandboxFactory.createSandbox(config);
    }

    <span class="hljs-comment">/**
     * æ²™ç®±ç‹¬ç«‹çº¿ç¨‹æ± ï¼šä¸ä¸»æœåŠ¡çº¿ç¨‹æ± éš”ç¦»ï¼Œé˜²æ­¢è„šæœ¬å¼‚å¸¸å ç”¨ä¸»æœåŠ¡çº¿ç¨‹
     */</span>
    <span class="hljs-keyword">private</span> ThreadPoolExecutor <span class="hljs-title function_">ruleSandboxThreadPool</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadPoolExecutor</span>(
                <span class="hljs-number">5</span>, <span class="hljs-comment">// æ ¸å¿ƒçº¿ç¨‹æ•°ï¼ˆæ ¹æ®è„šæœ¬æ‰§è¡Œå¹¶å‘é‡è°ƒæ•´ï¼‰</span>
                <span class="hljs-number">10</span>, <span class="hljs-comment">// æœ€å¤§çº¿ç¨‹æ•°</span>
                <span class="hljs-number">60</span>, <span class="hljs-comment">// ç©ºé—²çº¿ç¨‹å­˜æ´»æ—¶é—´</span>
                TimeUnit.SECONDS,
                <span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedBlockingQueue</span>&lt;&gt;(<span class="hljs-number">20</span>), <span class="hljs-comment">// ä»»åŠ¡é˜Ÿåˆ—ï¼ˆé¿å…ä»»åŠ¡å †ç§¯ï¼‰</span>
                <span class="hljs-comment">// çº¿ç¨‹å‘½åå‰ç¼€ï¼ˆä¾¿äºæ—¥å¿—æ’æŸ¥ï¼‰</span>
                r -&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(r, <span class="hljs-string">"rule-sandbox-thread-"</span>),
                <span class="hljs-comment">// ä»»åŠ¡æ‹’ç»ç­–ç•¥ï¼šå½“çº¿ç¨‹æ± æ»¡æ—¶ï¼Œæ‹’ç»ä»»åŠ¡å¹¶æŠ›å‡ºå¼‚å¸¸ï¼ˆé¿å…èµ„æºè€—å°½ï¼‰</span>
                <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadPoolExecutor</span>.AbortPolicy()
        );
    }
}
</code></pre>
<h4 data-id="heading-9">3.2.2 è„šæœ¬æ‰§è¡Œå™¨å°è£…</h4>
<p>å°è£…è„šæœ¬æ‰§è¡Œçš„ç»Ÿä¸€å…¥å£ï¼Œæ•´åˆæ²™ç®±å’Œ Groovy è„šæœ¬å¼•æ“ï¼Œæä¾›è„šæœ¬ç¼–è¯‘ã€æ‰§è¡Œã€ç»“æœå¤„ç†çš„ä¸€ç«™å¼æ–¹æ³•ï¼Œå¹¶å¤„ç†æ²™ç®±æ‰§è¡Œè¿‡ç¨‹ä¸­çš„å¼‚å¸¸ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> com.alibaba.sandbox4j.api.Sandbox;
<span class="hljs-keyword">import</span> com.alibaba.sandbox4j.exception.SandboxTimeoutException;
<span class="hljs-keyword">import</span> groovy.lang.GroovyClassLoader;
<span class="hljs-keyword">import</span> groovy.lang.GroovyObject;
<span class="hljs-keyword">import</span> org.springframework.beans.factory.annotation.Autowired;
<span class="hljs-keyword">import</span> org.springframework.stereotype.Component;

<span class="hljs-keyword">import</span> java.util.Map;

<span class="hljs-comment">/**
 * è§„åˆ™è„šæœ¬æ‰§è¡Œå™¨ï¼šå°è£…æ²™ç®±æ‰§è¡Œé€»è¾‘ï¼Œæä¾›ç»Ÿä¸€çš„è„šæœ¬æ‰§è¡Œå…¥å£
 */</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RuleScriptExecutor</span> {

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> Sandbox ruleSandbox;

    <span class="hljs-comment">// Groovyç±»åŠ è½½å™¨ï¼ˆä¸æ²™ç®±ç±»åŠ è½½å™¨éš”ç¦»ï¼‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">GroovyClassLoader</span> <span class="hljs-variable">groovyClassLoader</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">GroovyClassLoader</span>();

    <span class="hljs-comment">/**
     * æ‰§è¡Œè§„åˆ™è„šæœ¬
     * <span class="hljs-doctag">@param</span> script è§„åˆ™è„šæœ¬å†…å®¹ï¼ˆGroovyï¼‰
     * <span class="hljs-doctag">@param</span> paramMap è„šæœ¬æ‰§è¡Œå‚æ•°
     * <span class="hljs-doctag">@return</span> è„šæœ¬æ‰§è¡Œç»“æœ
     * <span class="hljs-doctag">@throws</span> Exception æ‰§è¡Œå¼‚å¸¸ï¼ˆè¶…æ—¶ã€è¯­æ³•é”™è¯¯ã€æƒé™å¼‚å¸¸ç­‰ï¼‰
     */</span>
    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">executeScript</span><span class="hljs-params">(String script, Map&lt;String, Object&gt; paramMap)</span> <span class="hljs-keyword">throws</span> Exception {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// 1. ç¼–è¯‘Groovyè„šæœ¬ï¼ˆç”ŸæˆClasså¯¹è±¡ï¼‰</span>
            Class&lt;?&gt; scriptClass = groovyClassLoader.parseClass(script);
            <span class="hljs-comment">// 2. åˆ›å»ºè„šæœ¬å®ä¾‹</span>
            <span class="hljs-type">GroovyObject</span> <span class="hljs-variable">groovyObject</span> <span class="hljs-operator">=</span> (GroovyObject) scriptClass.newInstance();

            <span class="hljs-comment">// 3. åœ¨æ²™ç®±ä¸­æ‰§è¡Œè„šæœ¬ï¼ˆæ ¸å¿ƒï¼šè„šæœ¬è¿è¡Œåœ¨æ²™ç®±éš”ç¦»ç¯å¢ƒä¸­ï¼‰</span>
            <span class="hljs-comment">// æ²™ç®±æ‰§è¡Œé€»è¾‘ï¼šå°†è„šæœ¬æ‰§è¡Œä»»åŠ¡æäº¤åˆ°æ²™ç®±çº¿ç¨‹æ± ï¼Œç”±æ²™ç®±æ§åˆ¶è¶…æ—¶å’Œèµ„æº</span>
            <span class="hljs-keyword">return</span> ruleSandbox.execute(() -&gt; {
                <span class="hljs-comment">// è·å–è„šæœ¬çš„mainæ–¹æ³•ï¼ˆçº¦å®šè„šæœ¬å¿…é¡»æœ‰mainæ–¹æ³•ï¼Œæ¥æ”¶paramMapå‚æ•°ï¼‰</span>
                <span class="hljs-keyword">return</span> groovyObject.invokeMethod(<span class="hljs-string">"main"</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>[]{paramMap});
            });
        } <span class="hljs-keyword">catch</span> (SandboxTimeoutException e) {
            <span class="hljs-comment">// æ²™ç®±è¶…æ—¶å¼‚å¸¸ï¼ˆä¼šè¢«ç†”æ–­æœºåˆ¶å…œåº•ï¼Œä½†è¿™é‡Œæå‰æ•è·ï¼Œä¾¿äºæ—¥å¿—æ’æŸ¥ï¼‰</span>
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Exception</span>(<span class="hljs-string">"è§„åˆ™è„šæœ¬æ‰§è¡Œè¶…æ—¶ï¼Œå·²è¢«æ²™ç®±ä¸­æ–­"</span>, e);
        } <span class="hljs-keyword">catch</span> (Exception e) {
            <span class="hljs-comment">// å…¶ä»–å¼‚å¸¸ï¼ˆè¯­æ³•é”™è¯¯ã€æƒé™ä¸è¶³ã€æ­»å¾ªç¯ç­‰ï¼‰</span>
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Exception</span>(<span class="hljs-string">"è§„åˆ™è„šæœ¬æ‰§è¡Œå¤±è´¥ï¼š"</span> + e.getMessage(), e);
        }
    }
}
</code></pre>
<h3 data-id="heading-10">3.3 æ ¸å¿ƒå¼€å‘ï¼šè¶…æ—¶ç†”æ–­é…ç½®</h3>
<p>æ²™ç®±è™½ç„¶æä¾›äº†è¶…æ—¶æ§åˆ¶ï¼Œä½†ç†”æ–­æœºåˆ¶èƒ½æä¾›æ›´å…¨é¢çš„å…œåº•â€”â€”æ¯”å¦‚å½“è„šæœ¬é¢‘ç¹è¶…æ—¶ã€å¼‚å¸¸æ—¶ï¼Œç›´æ¥è§¦å‘ç†”æ–­ï¼Œæ‹’ç»æ‰§è¡Œåç»­è¯·æ±‚ï¼Œé¿å…èµ„æºæŒç»­æµªè´¹ã€‚è¿™é‡Œä½¿ç”¨ Resilience4j çš„ @TimeLimiterï¼ˆè¶…æ—¶æ§åˆ¶ï¼‰å’Œ @CircuitBreakerï¼ˆç†”æ–­ï¼‰æ³¨è§£ã€‚</p>
<h4 data-id="heading-11">3.3.1 ç†”æ–­é…ç½®æ–‡ä»¶</h4>
<p>åœ¨ application.yml ä¸­é…ç½® Resilience4j çš„è¶…æ—¶å’Œç†”æ–­å‚æ•°ï¼ŒæŒ‰éœ€è°ƒæ•´ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">resilience4j:</span>
  <span class="hljs-comment"># è¶…æ—¶æ§åˆ¶é…ç½®</span>
  <span class="hljs-attr">timelimiter:</span>
    <span class="hljs-attr">instances:</span>
      <span class="hljs-comment"># è§„åˆ™è„šæœ¬æ‰§è¡Œè¶…æ—¶é…ç½®ï¼ˆä¸æ²™ç®±è¶…æ—¶ä¿æŒä¸€è‡´ï¼ŒåŒé‡ä¿éšœï¼‰</span>
      <span class="hljs-attr">ruleScriptExecutor:</span>
        <span class="hljs-attr">timeoutDuration:</span> <span class="hljs-string">1000ms</span> <span class="hljs-comment"># è¶…æ—¶æ—¶é—´ï¼ˆæ ¸å¿ƒï¼šè¶…è¿‡è¯¥æ—¶é—´ç›´æ¥ä¸­æ–­æ‰§è¡Œï¼‰</span>
        <span class="hljs-attr">cancelRunningFuture:</span> <span class="hljs-literal">true</span> <span class="hljs-comment"># è¶…æ—¶åå–æ¶ˆæ­£åœ¨è¿è¡Œçš„ä»»åŠ¡ï¼ˆå…³é”®ï¼šä¸­æ–­æ­»å¾ªç¯è„šæœ¬ï¼‰</span>
  <span class="hljs-comment"># ç†”æ–­é…ç½®</span>
  <span class="hljs-attr">circuitbreaker:</span>
    <span class="hljs-attr">instances:</span>
      <span class="hljs-comment"># è§„åˆ™è„šæœ¬ç†”æ–­é…ç½®</span>
      <span class="hljs-attr">ruleScriptExecutor:</span>
        <span class="hljs-attr">slidingWindowSize:</span> <span class="hljs-number">10</span> <span class="hljs-comment"># æ»‘åŠ¨çª—å£å¤§å°ï¼ˆç»Ÿè®¡10ä¸ªè¯·æ±‚ï¼‰</span>
        <span class="hljs-attr">failureRateThreshold:</span> <span class="hljs-number">50</span> <span class="hljs-comment"># ç†”æ–­é˜ˆå€¼ï¼šå¤±è´¥ç‡è¶…è¿‡50%è§¦å‘ç†”æ–­</span>
        <span class="hljs-attr">waitDurationInOpenState:</span> <span class="hljs-string">5000ms</span> <span class="hljs-comment"># ç†”æ–­å¼€æ”¾æ—¶é—´ï¼š5ç§’åå°è¯•æ¢å¤</span>
        <span class="hljs-attr">permittedNumberOfCallsInHalfOpenState:</span> <span class="hljs-number">3</span> <span class="hljs-comment"># åŠå¼€çŠ¶æ€å…è®¸çš„è¯·æ±‚æ•°ï¼š3ä¸ªè¯·æ±‚éƒ½æˆåŠŸåˆ™å…³é—­ç†”æ–­</span>
        <span class="hljs-attr">registerHealthIndicator:</span> <span class="hljs-literal">true</span> <span class="hljs-comment"># æ³¨å†Œå¥åº·æŒ‡æ ‡ï¼Œä¾¿äºç›‘æ§</span>
        <span class="hljs-comment"># è§¦å‘ç†”æ–­çš„å¼‚å¸¸ç±»å‹ï¼ˆè¶…æ—¶ã€æ²™ç®±å¼‚å¸¸ã€è„šæœ¬æ‰§è¡Œå¼‚å¸¸ï¼‰</span>
        <span class="hljs-attr">recordExceptions:</span>
          <span class="hljs-bullet">-</span> <span class="hljs-string">java.lang.Exception</span>
        <span class="hljs-comment"># ä¸è§¦å‘ç†”æ–­çš„å¼‚å¸¸ç±»å‹ï¼ˆæŒ‰éœ€é…ç½®ï¼‰</span>
        <span class="hljs-attr">ignoreExceptions:</span>
          <span class="hljs-bullet">-</span> <span class="hljs-string">java.lang.IllegalArgumentException</span>
</code></pre>
<h4 data-id="heading-12">3.3.2 ç†”æ–­æœåŠ¡å°è£…</h4>
<p>å°è£…è§„åˆ™æ‰§è¡ŒæœåŠ¡ï¼Œæ·»åŠ è¶…æ—¶å’Œç†”æ–­æ³¨è§£ï¼Œå®ç°å…œåº•é€»è¾‘ï¼ˆå½“ç†”æ–­è§¦å‘æˆ–æ‰§è¡Œè¶…æ—¶æ—¶ï¼Œè¿”å›é™çº§ç»“æœï¼‰ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> io.github.resilience4j.circuitbreaker.annotation.CircuitBreaker;
<span class="hljs-keyword">import</span> io.github.resilience4j.timelimiter.annotation.TimeLimiter;
<span class="hljs-keyword">import</span> org.springframework.beans.factory.annotation.Autowired;
<span class="hljs-keyword">import</span> org.springframework.stereotype.Service;

<span class="hljs-keyword">import</span> java.util.Map;
<span class="hljs-keyword">import</span> java.util.concurrent.CompletableFuture;

<span class="hljs-comment">/**
 * è§„åˆ™æ‰§è¡ŒæœåŠ¡ï¼šæ•´åˆç†”æ–­æœºåˆ¶ï¼Œæä¾›ç†”æ–­å…œåº•
 */</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RuleExecuteService</span> {

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> RuleScriptExecutor ruleScriptExecutor;

    <span class="hljs-comment">/**
     * æ‰§è¡Œè§„åˆ™è„šæœ¬ï¼šæ·»åŠ è¶…æ—¶ç†”æ–­æ³¨è§£
     * <span class="hljs-doctag">@param</span> script è§„åˆ™è„šæœ¬
     * <span class="hljs-doctag">@param</span> paramMap æ‰§è¡Œå‚æ•°
     * <span class="hljs-doctag">@return</span> æ‰§è¡Œç»“æœï¼ˆCompletableFutureï¼šæ”¯æŒå¼‚æ­¥æ‰§è¡Œï¼Œé€‚é…Resilience4jè¶…æ—¶æ§åˆ¶ï¼‰
     */</span>
    <span class="hljs-meta">@TimeLimiter(name = "ruleScriptExecutor")</span> <span class="hljs-comment">// å…³è”è¶…æ—¶é…ç½®</span>
    <span class="hljs-meta">@CircuitBreaker(
            name = "ruleScriptExecutor", // å…³è”ç†”æ–­é…ç½®
            fallbackMethod = "executeScriptFallback" // ç†”æ–­/è¶…æ—¶å…œåº•æ–¹æ³•
    )</span>
    <span class="hljs-keyword">public</span> CompletableFuture&lt;Object&gt; <span class="hljs-title function_">executeRule</span><span class="hljs-params">(String script, Map&lt;String, Object&gt; paramMap)</span> {
        <span class="hljs-comment">// å¼‚æ­¥æ‰§è¡Œè„šæœ¬ï¼ˆResilience4jçš„è¶…æ—¶æ§åˆ¶åŸºäºå¼‚æ­¥ä»»åŠ¡ï¼‰</span>
        <span class="hljs-keyword">return</span> CompletableFuture.supplyAsync(() -&gt; {
            <span class="hljs-keyword">try</span> {
                <span class="hljs-keyword">return</span> ruleScriptExecutor.executeScript(script, paramMap);
            } <span class="hljs-keyword">catch</span> (Exception e) {
                <span class="hljs-comment">// æŠ›å‡ºå¼‚å¸¸ï¼Œè®©ç†”æ–­æœºåˆ¶æ•è·å¹¶è§¦å‘å…œåº•</span>
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(e);
            }
        });
    }

    <span class="hljs-comment">/**
     * ç†”æ–­/è¶…æ—¶å…œåº•æ–¹æ³•ï¼šå½“è„šæœ¬æ‰§è¡Œè¶…æ—¶ã€ç†”æ–­è§¦å‘æ—¶ï¼Œè¿”å›é»˜è®¤ç»“æœ
     * æ³¨æ„ï¼šæ–¹æ³•å‚æ•°ã€è¿”å›å€¼å¿…é¡»ä¸è¢«ç†”æ–­æ–¹æ³•ä¸€è‡´ï¼Œæœ€åæ·»åŠ ä¸€ä¸ªExceptionå‚æ•°
     */</span>
    <span class="hljs-keyword">public</span> CompletableFuture&lt;Object&gt; <span class="hljs-title function_">executeScriptFallback</span><span class="hljs-params">(String script, Map&lt;String, Object&gt; paramMap, Exception e)</span> {
        <span class="hljs-comment">// æ—¥å¿—è®°å½•å¼‚å¸¸ä¿¡æ¯ï¼ˆä¾¿äºæ’æŸ¥ï¼‰</span>
        System.err.println(<span class="hljs-string">"è§„åˆ™è„šæœ¬æ‰§è¡Œå¼‚å¸¸ï¼ˆç†”æ–­/è¶…æ—¶ï¼‰ï¼š"</span> + e.getMessage());
        <span class="hljs-comment">// è¿”å›é™çº§ç»“æœï¼ˆå¯æ ¹æ®å®é™…ä¸šåŠ¡è°ƒæ•´ï¼Œæ¯”å¦‚è¿”å›é»˜è®¤è§„åˆ™ç»“æœã€æç¤ºç³»ç»Ÿç¹å¿™ç­‰ï¼‰</span>
        <span class="hljs-keyword">return</span> CompletableFuture.completedFuture(<span class="hljs-string">"è§„åˆ™æ‰§è¡Œå¼‚å¸¸ï¼Œè¯·ç¨åé‡è¯•ï¼ˆå…œåº•è¿”å›ï¼‰"</span>);
    }
}
</code></pre>
<h3 data-id="heading-13">3.4 æ¥å£å¼€å‘ï¼šæä¾›å¤–éƒ¨è®¿é—®å…¥å£</h3>
<p>å¼€å‘ä¸€ä¸ªæ¥å£ï¼Œæ¥æ”¶å‰ç«¯ä¼ é€’çš„è§„åˆ™è„šæœ¬å’Œå‚æ•°ï¼Œè°ƒç”¨è§„åˆ™æ‰§è¡ŒæœåŠ¡ï¼Œè¿”å›æ‰§è¡Œç»“æœï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.springframework.beans.factory.annotation.Autowired;
<span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.PostMapping;
<span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.RequestBody;
<span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;
<span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.RestController;

<span class="hljs-keyword">import</span> java.util.Map;
<span class="hljs-keyword">import</span> java.util.concurrent.CompletableFuture;

<span class="hljs-comment">/**
 * è§„åˆ™æ‰§è¡Œæ¥å£ï¼šæä¾›å¤–éƒ¨è®¿é—®å…¥å£
 */</span>
<span class="hljs-meta">@RestController</span>
<span class="hljs-meta">@RequestMapping("/rule")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RuleExecuteController</span> {

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> RuleExecuteService ruleExecuteService;

    <span class="hljs-comment">/**
     * æ‰§è¡Œè§„åˆ™è„šæœ¬æ¥å£
     * <span class="hljs-doctag">@param</span> request åŒ…å«è„šæœ¬å†…å®¹å’Œæ‰§è¡Œå‚æ•°
     * <span class="hljs-doctag">@return</span> è„šæœ¬æ‰§è¡Œç»“æœ
     */</span>
    <span class="hljs-meta">@PostMapping("/execute")</span>
    <span class="hljs-keyword">public</span> CompletableFuture&lt;Object&gt; <span class="hljs-title function_">executeRule</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> RuleExecuteRequest request)</span> {
        <span class="hljs-comment">// å‚æ•°æ ¡éªŒï¼ˆç®€åŒ–ï¼Œå®é™…ç”Ÿäº§éœ€å®Œå–„ï¼‰</span>
        <span class="hljs-keyword">if</span> (request.getScript() == <span class="hljs-literal">null</span> || request.getParamMap() == <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">return</span> CompletableFuture.completedFuture(<span class="hljs-string">"è„šæœ¬å†…å®¹å’Œæ‰§è¡Œå‚æ•°ä¸èƒ½ä¸ºç©º"</span>);
        }
        <span class="hljs-comment">// è°ƒç”¨è§„åˆ™æ‰§è¡ŒæœåŠ¡</span>
        <span class="hljs-keyword">return</span> ruleExecuteService.executeRule(request.getScript(), request.getParamMap());
    }

    <span class="hljs-comment">// è¯·æ±‚å‚æ•°å°è£…</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RuleExecuteRequest</span> {
        <span class="hljs-keyword">private</span> String script; <span class="hljs-comment">// è§„åˆ™è„šæœ¬ï¼ˆGroovyï¼‰</span>
        <span class="hljs-keyword">private</span> Map&lt;String, Object&gt; paramMap; <span class="hljs-comment">// æ‰§è¡Œå‚æ•°</span>

        <span class="hljs-comment">// getter/setter çœç•¥</span>
        <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getScript</span><span class="hljs-params">()</span> { <span class="hljs-keyword">return</span> script; }
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setScript</span><span class="hljs-params">(String script)</span> { <span class="hljs-built_in">this</span>.script = script; }
        <span class="hljs-keyword">public</span> Map&lt;String, Object&gt; <span class="hljs-title function_">getParamMap</span><span class="hljs-params">()</span> { <span class="hljs-keyword">return</span> paramMap; }
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setParamMap</span><span class="hljs-params">(Map&lt;String, Object&gt; paramMap)</span> { <span class="hljs-built_in">this</span>.paramMap = paramMap; }
    }
}
</code></pre>
<h2 data-id="heading-14">å››ã€æµ‹è¯•éªŒè¯ï¼šæ¨¡æ‹Ÿå¼‚å¸¸åœºæ™¯ï¼ŒéªŒè¯æ–¹æ¡ˆæœ‰æ•ˆæ€§</h2>
<p>æ–¹æ¡ˆæ­å»ºå®Œæˆåï¼Œæˆ‘ä»¬éœ€è¦æ¨¡æ‹Ÿ 3 ç§å¼‚å¸¸åœºæ™¯ï¼ŒéªŒè¯æ²™ç®± + ç†”æ–­æ˜¯å¦èƒ½æœ‰æ•ˆä¿æŠ¤æœåŠ¡ï¼šæ­£å¸¸è„šæœ¬ã€æ­»å¾ªç¯è„šæœ¬ã€é¢‘ç¹è¶…æ—¶è„šæœ¬ã€‚</p>
<h3 data-id="heading-15">4.1 æµ‹è¯•å‡†å¤‡</h3>
<p>å¯åŠ¨ SpringBoot æœåŠ¡ï¼Œä½¿ç”¨ Postman è°ƒç”¨æ¥å£ï¼š<a href="https://link.juejin.cn?target=http%3A%2F%2Flocalhost%3A8080%2Frule%2Fexecute%25EF%25BC%258C%25E8%25AF%25B7%25E6%25B1%2582%25E4%25BD%2593%25E6%25A0%25BC%25E5%25BC%258F%25E5%25A6%2582%25E4%25B8%258B%25EF%25BC%259A" target="_blank" title="http://localhost:8080/rule/execute%EF%BC%8C%E8%AF%B7%E6%B1%82%E4%BD%93%E6%A0%BC%E5%BC%8F%E5%A6%82%E4%B8%8B%EF%BC%9A" ref="nofollow noopener noreferrer">http://localhost:8080/rule/executeï¼Œè¯·æ±‚ä½“æ ¼å¼å¦‚ä¸‹ï¼š</a></p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"script"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"æ­¤å¤„å¡«å†™Groovyè„šæœ¬"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"paramMap"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"num1"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">10</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"num2"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">20</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 data-id="heading-16">4.2 åœºæ™¯ 1ï¼šæ­£å¸¸è„šæœ¬ï¼ˆéªŒè¯åŸºç¡€åŠŸèƒ½ï¼‰</h3>
<p>è„šæœ¬å†…å®¹ï¼ˆè®¡ç®—ä¸¤ä¸ªæ•°çš„å’Œï¼‰ï¼š</p>
<pre><code class="hljs language-groovy" lang="groovy">// çº¦å®šçš„mainæ–¹æ³•ï¼Œæ¥æ”¶paramMapå‚æ•°
def main(Map paramMap) {
    def num1 = paramMap.get("num1")
    def num2 = paramMap.get("num2")
    return num1 + num2
}
</code></pre>
<p>æµ‹è¯•ç»“æœï¼šæ¥å£è¿”å› 30ï¼Œæ‰§è¡Œæ—¶é—´çº¦ 50msï¼Œæ²™ç®±å’Œç†”æ–­å‡æœªè§¦å‘ï¼ŒæœåŠ¡æ­£å¸¸ã€‚</p>
<h3 data-id="heading-17">4.3 åœºæ™¯ 2ï¼šæ­»å¾ªç¯è„šæœ¬ï¼ˆéªŒè¯è¶…æ—¶ç†”æ–­ï¼‰</h3>
<p>è„šæœ¬å†…å®¹ï¼ˆæ­»å¾ªç¯ï¼Œæ— æ³•æ­£å¸¸ç»“æŸï¼‰ï¼š</p>
<pre><code class="hljs language-groovy" lang="groovy">def main(Map paramMap) {
    // æ­»å¾ªç¯ï¼Œæ¨¡æ‹Ÿå¼‚å¸¸è„šæœ¬
    while (true) {
        println("æ­»å¾ªç¯æ‰§è¡Œä¸­...")
    }
}
</code></pre>
<p>æµ‹è¯•ç»“æœï¼š</p>
<ol>
<li>è„šæœ¬æ‰§è¡Œ 1000ms åï¼Œè¶…æ—¶ç†”æ–­è§¦å‘ï¼Œæ¥å£è¿”å›å…œåº•ç»“æœï¼šã€Œè§„åˆ™æ‰§è¡Œå¼‚å¸¸ï¼Œè¯·ç¨åé‡è¯•ï¼ˆå…œåº•è¿”å›ï¼‰ã€ã€‚</li>
<li>æŸ¥çœ‹æ—¥å¿—ï¼šæ²™ç®±æŠ›å‡ºè¶…æ—¶å¼‚å¸¸ï¼ŒResilience4j è§¦å‘ç†”æ–­ï¼Œæ­»å¾ªç¯è„šæœ¬è¢«å¼ºåˆ¶ä¸­æ–­ï¼Œæ²™ç®±çº¿ç¨‹æ± çº¿ç¨‹æ­£å¸¸é‡Šæ”¾ã€‚</li>
<li>æœåŠ¡çŠ¶æ€ï¼šä¸»æœåŠ¡çº¿ç¨‹æ± æ— å ç”¨ï¼Œæ¥å£å¯æ­£å¸¸æ¥æ”¶å…¶ä»–è¯·æ±‚ï¼ŒæœåŠ¡ç¨³å®šã€‚</li>
</ol>
<h3 data-id="heading-18">4.4 åœºæ™¯ 3ï¼šé¢‘ç¹è¶…æ—¶è„šæœ¬ï¼ˆéªŒè¯ç†”æ–­é™çº§ï¼‰</h3>
<p>è¿ç»­è°ƒç”¨ 10 æ¬¡æ­»å¾ªç¯è„šæœ¬ï¼ˆè§¦å‘ç†”æ–­é˜ˆå€¼ï¼‰ï¼Œæµ‹è¯•ç»“æœï¼š</p>
<ol>
<li>å‰ 5 æ¬¡è°ƒç”¨ï¼šè§¦å‘è¶…æ—¶ï¼Œè¿”å›å…œåº•ç»“æœï¼Œå¤±è´¥ç‡ 50%ã€‚</li>
<li>ç¬¬ 6 æ¬¡è°ƒç”¨ï¼šç†”æ–­è§¦å‘ï¼ˆå¤±è´¥ç‡è¶…è¿‡ 50%ï¼‰ï¼Œç›´æ¥è¿”å›å…œåº•ç»“æœï¼Œä¸æ‰§è¡Œè„šæœ¬ï¼ˆé¿å…èµ„æºæµªè´¹ï¼‰ã€‚</li>
<li>5 ç§’åï¼ˆç†”æ–­å¼€æ”¾æ—¶é—´ï¼‰ï¼šå°è¯•è°ƒç”¨ï¼Œè‹¥è„šæœ¬æ¢å¤æ­£å¸¸ï¼Œåˆ™ç†”æ–­å…³é—­ï¼›è‹¥ä»å¼‚å¸¸ï¼Œåˆ™ç»§ç»­ä¿æŒç†”æ–­çŠ¶æ€ã€‚</li>
</ol>
<p>ç»“è®ºï¼šæ–¹æ¡ˆèƒ½æœ‰æ•ˆå¤„ç†é¢‘ç¹å¼‚å¸¸çš„è„šæœ¬ï¼Œé¿å…æœåŠ¡èµ„æºè¢«æŒç»­å ç”¨ã€‚</p>
<h2 data-id="heading-19">äº”ã€åŸç†å‰–æï¼šæ²™ç®±éš”ç¦»ä¸ç†”æ–­æœºåˆ¶çš„æ ¸å¿ƒé€»è¾‘</h2>
<p>å¾ˆå¤šå¼€å‘è€…ä¼šç–‘æƒ‘ï¼šæ²™ç®±å’Œç†”æ–­éƒ½æœ‰è¶…æ—¶æ§åˆ¶ï¼Œä¸ºä»€ä¹ˆéœ€è¦åŒé‡é…ç½®ï¼Ÿä¸¤è€…çš„æ ¸å¿ƒé€»è¾‘æ˜¯ä»€ä¹ˆï¼Ÿä¸‹é¢æˆ‘ä»¬ç®€å•å‰–æï¼Œå¸®åŠ©å¤§å®¶ç†è§£æ–¹æ¡ˆçš„è®¾è®¡æ€è·¯ã€‚</p>
<h3 data-id="heading-20">5.1 æ²™ç®±éš”ç¦»çš„æ ¸å¿ƒåŸç†</h3>
<p>æœ¬æ¬¡ä½¿ç”¨çš„ Sandbox4J æ²™ç®±ï¼Œæ ¸å¿ƒæ˜¯ã€Œçº¿ç¨‹éš”ç¦» + ç±»åŠ è½½éš”ç¦»ã€ï¼š</p>
<ul>
<li>â€‹<strong>çº¿ç¨‹éš”ç¦»</strong>â€‹ï¼šæ²™ç®±ä½¿ç”¨ç‹¬ç«‹çš„çº¿ç¨‹æ± æ‰§è¡Œè„šæœ¬ï¼Œä¸ä¸»æœåŠ¡çš„ Tomcat çº¿ç¨‹æ± å®Œå…¨éš”ç¦»ï¼Œå³ä½¿è„šæœ¬æ­»å¾ªç¯ï¼Œå ç”¨çš„ä¹Ÿæ˜¯æ²™ç®±çº¿ç¨‹æ± çš„çº¿ç¨‹ï¼Œä¸ä¼šå½±å“ä¸»æœåŠ¡çš„è¯·æ±‚å¤„ç†ã€‚</li>
<li>â€‹<strong>ç±»åŠ è½½éš”ç¦»</strong>â€‹ï¼šæ²™ç®±æ‹¥æœ‰ç‹¬ç«‹çš„ç±»åŠ è½½å™¨ï¼Œè„šæœ¬ç¼–è¯‘ç”Ÿæˆçš„ Class å¯¹è±¡åªå­˜åœ¨äºæ²™ç®±çš„ç±»åŠ è½½å™¨ä¸­ï¼Œä¸ä¼šæ±¡æŸ“ä¸»æœåŠ¡çš„ç±»åŠ è½½å™¨ï¼›åŒæ—¶ï¼Œé€šè¿‡ allowPackages/denyPackages é…ç½®ï¼Œé™åˆ¶è„šæœ¬çš„è®¿é—®æƒé™ï¼Œé˜²æ­¢è„šæœ¬è°ƒç”¨ä¸»æœåŠ¡çš„æ ¸å¿ƒèµ„æºã€‚</li>
<li>â€‹<strong>èµ„æºé™åˆ¶</strong>â€‹ï¼šæ²™ç®±å¯ä»¥é™åˆ¶è„šæœ¬çš„ CPUã€å†…å­˜å ç”¨ï¼Œé¿å…è„šæœ¬è¿‡åº¦æ¶ˆè€—æœåŠ¡å™¨èµ„æºã€‚</li>
</ul>
<h3 data-id="heading-21">5.2 è¶…æ—¶ç†”æ–­çš„æ ¸å¿ƒåŸç†</h3>
<p>Resilience4j çš„è¶…æ—¶å’Œç†”æ–­æœºåˆ¶ï¼Œæ ¸å¿ƒæ˜¯ã€Œå¼‚æ­¥ä»»åŠ¡æ§åˆ¶ + å¤±è´¥ç‡ç»Ÿè®¡ã€ï¼š</p>
<ul>
<li>â€‹<strong>è¶…æ—¶æ§åˆ¶</strong>â€‹ï¼šé€šè¿‡ @TimeLimiter æ³¨è§£ï¼Œå°†è„šæœ¬æ‰§è¡Œä»»åŠ¡å°è£…ä¸º CompletableFuture å¼‚æ­¥ä»»åŠ¡ï¼Œå½“ä»»åŠ¡æ‰§è¡Œæ—¶é—´è¶…è¿‡é…ç½®çš„ timeoutDuration æ—¶ï¼Œè‡ªåŠ¨å–æ¶ˆä»»åŠ¡ï¼ˆcancelRunningFuture=trueï¼‰ï¼Œä¸­æ–­è„šæœ¬æ‰§è¡Œã€‚</li>
<li>â€‹<strong>ç†”æ–­æœºåˆ¶</strong>â€‹ï¼šé€šè¿‡æ»‘åŠ¨çª—å£ç»Ÿè®¡è„šæœ¬æ‰§è¡Œçš„å¤±è´¥ç‡ï¼ˆè¶…æ—¶ã€å¼‚å¸¸å‡è§†ä¸ºå¤±è´¥ï¼‰ï¼Œå½“å¤±è´¥ç‡è¶…è¿‡é˜ˆå€¼æ—¶ï¼Œè§¦å‘ç†”æ–­ï¼Œè¿›å…¥å¼€æ”¾çŠ¶æ€ï¼›å¼€æ”¾çŠ¶æ€ä¸‹ï¼Œæ‰€æœ‰è¯·æ±‚ç›´æ¥è¿”å›å…œåº•ç»“æœï¼Œä¸æ‰§è¡Œè„šæœ¬ï¼›ç»è¿‡æŒ‡å®šæ—¶é—´åï¼Œè¿›å…¥åŠå¼€çŠ¶æ€ï¼Œå°è¯•æ‰§è¡Œå°‘é‡è¯·æ±‚ï¼Œè‹¥å…¨éƒ¨æˆåŠŸåˆ™å…³é—­ç†”æ–­ï¼Œå¦åˆ™ç»§ç»­ä¿æŒå¼€æ”¾çŠ¶æ€ã€‚</li>
</ul>
<h3 data-id="heading-22">5.3 ä¸ºä»€ä¹ˆéœ€è¦åŒé‡è¶…æ—¶é…ç½®ï¼Ÿ</h3>
<p>æ²™ç®±çš„è¶…æ—¶æ˜¯ã€Œæ²™ç®±å±‚é¢çš„å…œåº•ã€ï¼ŒResilience4j çš„è¶…æ—¶æ˜¯ã€Œåº”ç”¨å±‚é¢çš„å…œåº•ã€ï¼Œä¸¤è€…ååŒå·¥ä½œï¼š</p>
<ul>
<li>æ²™ç®±è¶…æ—¶ï¼šé˜²æ­¢æ²™ç®±çº¿ç¨‹è¢«é•¿æœŸå ç”¨ï¼Œå³ä½¿ Resilience4j å‡ºç°å¼‚å¸¸ï¼Œæ²™ç®±ä¹Ÿèƒ½è‡ªè¡Œä¸­æ–­è„šæœ¬ã€‚</li>
<li>Resilience4j è¶…æ—¶ï¼šè§¦å‘ç†”æ–­æœºåˆ¶ï¼Œå®ç°è¯·æ±‚çº§åˆ«çš„å…œåº•ï¼Œé¿å…é¢‘ç¹è°ƒç”¨å¼‚å¸¸è„šæœ¬ã€‚</li>
</ul>
<p>ä¸¤è€…ä¿æŒè¶…æ—¶æ—¶é—´ä¸€è‡´ï¼Œç¡®ä¿æ— è®ºå“ªä¸€å±‚å…ˆè§¦å‘è¶…æ—¶ï¼Œéƒ½èƒ½å¿«é€Ÿä¸­æ–­è„šæœ¬ï¼Œé‡Šæ”¾èµ„æºã€‚</p>
<h2 data-id="heading-23">å…­ã€ç”Ÿäº§ç¯å¢ƒä¼˜åŒ–å»ºè®®</h2>
<p>ä¸Šè¿°æ–¹æ¡ˆå·²èƒ½æ»¡è¶³åŸºç¡€éœ€æ±‚ï¼Œä½†åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œè¿˜éœ€è¦è¿›è¡Œä»¥ä¸‹ä¼˜åŒ–ï¼Œæå‡ç¨³å®šæ€§å’Œå¯ç»´æŠ¤æ€§ï¼š</p>
<h3 data-id="heading-24">6.1 è„šæœ¬é¢„æ ¡éªŒ</h3>
<p>åœ¨è„šæœ¬æ‰§è¡Œå‰ï¼Œæ·»åŠ é¢„æ ¡éªŒé€»è¾‘ï¼š</p>
<ul>
<li>â€‹<strong>è¯­æ³•æ ¡éªŒ</strong>â€‹ï¼šä½¿ç”¨ Groovy çš„è¯­æ³•è§£æå™¨ï¼Œæ ¡éªŒè„šæœ¬è¯­æ³•æ˜¯å¦æ­£ç¡®ï¼Œé¿å…å› è¯­æ³•é”™è¯¯å¯¼è‡´çš„å¼‚å¸¸ã€‚</li>
<li>â€‹<strong>å±é™©æ–¹æ³•æ ¡éªŒ</strong>â€‹ï¼šç¦æ­¢è„šæœ¬ä½¿ç”¨ System.exit()ã€Runtime.getRuntime().exec()ç­‰å±é™©æ–¹æ³•ï¼Œé˜²æ­¢è„šæœ¬æ¶æ„ç ´åæœåŠ¡ã€‚</li>
<li>â€‹<strong>é€»è¾‘æ ¡éªŒ</strong>â€‹ï¼šç®€å•æ ¡éªŒè„šæœ¬æ˜¯å¦å­˜åœ¨æ˜æ˜¾çš„æ­»å¾ªç¯ï¼ˆå¦‚ while(true)æ— é€€å‡ºæ¡ä»¶ï¼‰ï¼Œå¯é€šè¿‡é™æ€ä»£ç åˆ†æå®ç°ã€‚</li>
</ul>
<p>ä»¥ä¸‹æ˜¯è„šæœ¬é¢„æ ¡éªŒçš„å…·ä½“å®ç°ä»£ç ï¼Œæ•´åˆä¸ºå·¥å…·ç±»ï¼Œå¯ç›´æ¥æ³¨å…¥ä½¿ç”¨ï¼Œæ ¡éªŒå¤±è´¥ç›´æ¥æŠ›å‡ºå¼‚å¸¸ï¼Œé˜»æ–­è„šæœ¬æ‰§è¡Œï¼š</p>
<h4 data-id="heading-25">6.1.1 è„šæœ¬é¢„æ ¡éªŒå·¥å…·ç±»ï¼ˆæ ¸å¿ƒä»£ç ï¼‰</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> groovy.lang.GroovyCodeSource;
<span class="hljs-keyword">import</span> groovy.lang.GroovyShell;
<span class="hljs-keyword">import</span> org.codehaus.groovy.control.CompilationFailedException;
<span class="hljs-keyword">import</span> org.codehaus.groovy.control.CompilerConfiguration;
<span class="hljs-keyword">import</span> org.springframework.stereotype.Component;

<span class="hljs-keyword">import</span> java.util.regex.Matcher;
<span class="hljs-keyword">import</span> java.util.regex.Pattern;

<span class="hljs-comment">/**
 * ç”Ÿäº§ç¯å¢ƒè„šæœ¬é¢„æ ¡éªŒå·¥å…·ç±»ï¼šè¯­æ³•æ ¡éªŒã€å±é™©æ–¹æ³•æ ¡éªŒã€é€»è¾‘æ ¡éªŒ
 */</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ScriptPreCheckUtil</span> {

    <span class="hljs-comment">// å±é™©æ–¹æ³•æ­£åˆ™ï¼šç¦æ­¢System.exitã€Runtime.execç­‰ç ´åæœåŠ¡çš„æ–¹æ³•</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">Pattern</span> <span class="hljs-variable">DANGEROUS_METHOD_PATTERN</span> <span class="hljs-operator">=</span> Pattern.compile(
            <span class="hljs-string">"(System\\.exit\\(|Runtime\\.getRuntime\\(\\)\\.exec\\(|ProcessBuilder\\()"</span>,
            Pattern.CASE_INSENSITIVE
    );

    <span class="hljs-comment">// æ­»å¾ªç¯æ­£åˆ™ï¼šåŒ¹é… while(true)ã€for(;;) ç­‰æ˜æ˜¾æ­»å¾ªç¯ï¼ˆç®€å•æ ¡éªŒï¼Œå¤æ‚åœºæ™¯éœ€ç»“åˆASTåˆ†æï¼‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">Pattern</span> <span class="hljs-variable">DEAD_LOOP_PATTERN</span> <span class="hljs-operator">=</span> Pattern.compile(
            <span class="hljs-string">"(while\\s*\\(\\s*true\\s*\\)|for\\s*\\(\\s*;\\s*;\\s*\\))"</span>,
            Pattern.CASE_INSENSITIVE
    );

    <span class="hljs-comment">// Groovyè„šæœ¬è§£æå™¨ï¼ˆå•ä¾‹å¤ç”¨ï¼Œæå‡æ€§èƒ½ï¼‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> GroovyShell GROOVY_SHELL;

    <span class="hljs-keyword">static</span> {
        <span class="hljs-comment">// é…ç½®Groovyç¼–è¯‘å™¨ï¼šä»…å…è®¸åŸºç¡€è¯­æ³•ï¼Œç¦æ­¢åŠ¨æ€åŠ è½½å±é™©ç±»</span>
        <span class="hljs-type">CompilerConfiguration</span> <span class="hljs-variable">config</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">CompilerConfiguration</span>();
        config.setDisabledGlobalASTTransformations(<span class="hljs-literal">null</span>);
        GROOVY_SHELL = <span class="hljs-keyword">new</span> <span class="hljs-title class_">GroovyShell</span>(config);
    }

    <span class="hljs-comment">/**
     * è„šæœ¬é¢„æ ¡éªŒå…¥å£ï¼šé¡ºåºæ‰§è¡Œè¯­æ³•æ ¡éªŒã€å±é™©æ–¹æ³•æ ¡éªŒã€é€»è¾‘æ ¡éªŒ
     * <span class="hljs-doctag">@param</span> script å¾…æ ¡éªŒçš„Groovyè„šæœ¬
     * <span class="hljs-doctag">@throws</span> IllegalArgumentException æ ¡éªŒå¤±è´¥æŠ›å‡ºå¼‚å¸¸ï¼ŒåŒ…å«å…·ä½“å¤±è´¥åŸå› 
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">preCheckScript</span><span class="hljs-params">(String script)</span> {
        <span class="hljs-comment">// 1. è¯­æ³•æ ¡éªŒ</span>
        checkScriptSyntax(script);
        <span class="hljs-comment">// 2. å±é™©æ–¹æ³•æ ¡éªŒ</span>
        checkDangerousMethod(script);
        <span class="hljs-comment">// 3. æ˜æ˜¾æ­»å¾ªç¯æ ¡éªŒ</span>
        checkDeadLoop(script);
    }

    <span class="hljs-comment">/**
     * è¯­æ³•æ ¡éªŒï¼šä½¿ç”¨Groovyç¼–è¯‘å™¨è§£æè„šæœ¬ï¼Œåˆ¤æ–­æ˜¯å¦å­˜åœ¨è¯­æ³•é”™è¯¯
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">checkScriptSyntax</span><span class="hljs-params">(String script)</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// åŒ…è£…è„šæœ¬ä¸ºGroovyä»£ç æºï¼ŒæŒ‡å®šåç§°ä¾¿äºæ’æŸ¥</span>
            <span class="hljs-type">GroovyCodeSource</span> <span class="hljs-variable">codeSource</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">GroovyCodeSource</span>(script, <span class="hljs-string">"PreCheckScript.groovy"</span>, GroovyShell.DEFAULT_CODE_BASE);
            <span class="hljs-comment">// ç¼–è¯‘è„šæœ¬ï¼Œè‹¥è¯­æ³•é”™è¯¯ä¼šæŠ›å‡ºCompilationFailedException</span>
            GROOVY_SHELL.parse(codeSource);
        } <span class="hljs-keyword">catch</span> (CompilationFailedException e) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(<span class="hljs-string">"è„šæœ¬è¯­æ³•æ ¡éªŒå¤±è´¥ï¼š"</span> + e.getMessage().split(<span class="hljs-string">"\\n"</span>)[<span class="hljs-number">0</span>], e);
        }
    }

    <span class="hljs-comment">/**
     * å±é™©æ–¹æ³•æ ¡éªŒï¼šä½¿ç”¨æ­£åˆ™åŒ¹é…ç¦æ­¢çš„å±é™©æ–¹æ³•ï¼Œé˜²æ­¢è„šæœ¬ç ´åæœåŠ¡
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">checkDangerousMethod</span><span class="hljs-params">(String script)</span> {
        <span class="hljs-type">Matcher</span> <span class="hljs-variable">matcher</span> <span class="hljs-operator">=</span> DANGEROUS_METHOD_PATTERN.matcher(script);
        <span class="hljs-keyword">if</span> (matcher.find()) {
            <span class="hljs-type">String</span> <span class="hljs-variable">dangerousMethod</span> <span class="hljs-operator">=</span> matcher.group(<span class="hljs-number">1</span>);
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(<span class="hljs-string">"è„šæœ¬åŒ…å«ç¦æ­¢ä½¿ç”¨çš„å±é™©æ–¹æ³•ï¼š"</span> + dangerousMethod);
        }
    }

    <span class="hljs-comment">/**
     * æ˜æ˜¾æ­»å¾ªç¯æ ¡éªŒï¼šä½¿ç”¨æ­£åˆ™åŒ¹é…æ— é€€å‡ºæ¡ä»¶çš„æ­»å¾ªç¯ï¼Œç®€å•æ‹¦æˆªå¸¸è§å¼‚å¸¸åœºæ™¯
     * è¯´æ˜ï¼šå¤æ‚æ­»å¾ªç¯ï¼ˆå¦‚while(flag)ä½†flagå§‹ç»ˆä¸ºtrueï¼‰éœ€ç»“åˆASTåˆ†æï¼Œæ­¤å¤„ä¸ºåŸºç¡€æ ¡éªŒ
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">checkDeadLoop</span><span class="hljs-params">(String script)</span> {
        <span class="hljs-type">Matcher</span> <span class="hljs-variable">matcher</span> <span class="hljs-operator">=</span> DEAD_LOOP_PATTERN.matcher(script);
        <span class="hljs-keyword">if</span> (matcher.find()) {
            <span class="hljs-type">String</span> <span class="hljs-variable">deadLoopCode</span> <span class="hljs-operator">=</span> matcher.group(<span class="hljs-number">1</span>);
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(<span class="hljs-string">"è„šæœ¬åŒ…å«æ˜æ˜¾æ­»å¾ªç¯ï¼Œç¦æ­¢æ‰§è¡Œï¼š"</span> + deadLoopCode);
        }
    }
}
</code></pre>
<h4 data-id="heading-26">6.1.2 æ ¡éªŒå·¥å…·ç±»è°ƒç”¨æ–¹å¼ï¼ˆæ•´åˆåˆ°è„šæœ¬æ‰§è¡Œå™¨ï¼‰</h4>
<p>åœ¨ä¹‹å‰å®ç°çš„ RuleScriptExecutor ä¸­ï¼Œæ‰§è¡Œè„šæœ¬å‰è°ƒç”¨é¢„æ ¡éªŒæ–¹æ³•ï¼Œé˜»æ–­å¼‚å¸¸è„šæœ¬æ‰§è¡Œï¼Œä¿®æ”¹åçš„æ ¸å¿ƒä»£ç å¦‚ä¸‹ï¼ˆä»…å±•ç¤ºä¿®æ”¹éƒ¨åˆ†ï¼‰ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.springframework.beans.factory.annotation.Autowired;
<span class="hljs-keyword">import</span> org.springframework.stereotype.Component;

<span class="hljs-keyword">import</span> java.util.Map;

<span class="hljs-comment">/**
 * è§„åˆ™è„šæœ¬æ‰§è¡Œå™¨ï¼šå°è£…æ²™ç®±æ‰§è¡Œé€»è¾‘ï¼Œæä¾›ç»Ÿä¸€çš„è„šæœ¬æ‰§è¡Œå…¥å£
 */</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RuleScriptExecutor</span> {

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> Sandbox ruleSandbox;

    <span class="hljs-comment">// æ³¨å…¥è„šæœ¬é¢„æ ¡éªŒå·¥å…·ç±»</span>
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> ScriptPreCheckUtil scriptPreCheckUtil;

    <span class="hljs-comment">// Groovyç±»åŠ è½½å™¨ï¼ˆä¸æ²™ç®±ç±»åŠ è½½å™¨éš”ç¦»ï¼‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">GroovyClassLoader</span> <span class="hljs-variable">groovyClassLoader</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">GroovyClassLoader</span>();

    <span class="hljs-comment">/**
     * æ‰§è¡Œè§„åˆ™è„šæœ¬ï¼ˆæ–°å¢é¢„æ ¡éªŒæ­¥éª¤ï¼‰
     * <span class="hljs-doctag">@param</span> script è§„åˆ™è„šæœ¬å†…å®¹ï¼ˆGroovyï¼‰
     * <span class="hljs-doctag">@param</span> paramMap è„šæœ¬æ‰§è¡Œå‚æ•°
     * <span class="hljs-doctag">@return</span> è„šæœ¬æ‰§è¡Œç»“æœ
     * <span class="hljs-doctag">@throws</span> Exception æ‰§è¡Œå¼‚å¸¸ï¼ˆè¶…æ—¶ã€è¯­æ³•é”™è¯¯ã€æƒé™å¼‚å¸¸ç­‰ï¼‰
     */</span>
    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">executeScript</span><span class="hljs-params">(String script, Map&lt;String, Object&gt; paramMap)</span> <span class="hljs-keyword">throws</span> Exception {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// æ–°å¢ï¼šè„šæœ¬é¢„æ ¡éªŒï¼ˆæ ¡éªŒå¤±è´¥ç›´æ¥æŠ›å‡ºå¼‚å¸¸ï¼Œä¸è¿›å…¥åç»­æ‰§è¡Œï¼‰</span>
            scriptPreCheckUtil.preCheckScript(script);
            
            <span class="hljs-comment">// 1. ç¼–è¯‘Groovyè„šæœ¬ï¼ˆç”ŸæˆClasså¯¹è±¡ï¼‰</span>
            Class&lt;?&gt; scriptClass = groovyClassLoader.parseClass(script);
            <span class="hljs-comment">// 2. åˆ›å»ºè„šæœ¬å®ä¾‹</span>
            <span class="hljs-type">GroovyObject</span> <span class="hljs-variable">groovyObject</span> <span class="hljs-operator">=</span> (GroovyObject) scriptClass.newInstance();

            <span class="hljs-comment">// 3. åœ¨æ²™ç®±ä¸­æ‰§è¡Œè„šæœ¬ï¼ˆæ ¸å¿ƒï¼šè„šæœ¬è¿è¡Œåœ¨æ²™ç®±éš”ç¦»ç¯å¢ƒä¸­ï¼‰</span>
            <span class="hljs-comment">// æ²™ç®±æ‰§è¡Œé€»è¾‘ï¼šå°†è„šæœ¬æ‰§è¡Œä»»åŠ¡æäº¤åˆ°æ²™ç®±çº¿ç¨‹æ± ï¼Œç”±æ²™ç®±æ§åˆ¶è¶…æ—¶å’Œèµ„æº</span>
            <span class="hljs-keyword">return</span> ruleSandbox.execute(() -&gt; {
                <span class="hljs-comment">// è·å–è„šæœ¬çš„mainæ–¹æ³•ï¼ˆçº¦å®šè„šæœ¬å¿…é¡»æœ‰mainæ–¹æ³•ï¼Œæ¥æ”¶paramMapå‚æ•°ï¼‰</span>
                <span class="hljs-keyword">return</span> groovyObject.invokeMethod(<span class="hljs-string">"main"</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>[]{paramMap});
            });
        } <span class="hljs-keyword">catch</span> (IllegalArgumentException e) {
            <span class="hljs-comment">// æ•è·é¢„æ ¡éªŒå¤±è´¥å¼‚å¸¸ï¼Œå•ç‹¬å¤„ç†ï¼ˆä¾¿äºæ—¥å¿—åŒºåˆ†ï¼‰</span>
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Exception</span>(<span class="hljs-string">"è„šæœ¬é¢„æ ¡éªŒå¤±è´¥ï¼š"</span> + e.getMessage(), e);
        } <span class="hljs-keyword">catch</span> (SandboxTimeoutException e) {
            <span class="hljs-comment">// æ²™ç®±è¶…æ—¶å¼‚å¸¸ï¼ˆä¼šè¢«ç†”æ–­æœºåˆ¶å…œåº•ï¼Œä½†è¿™é‡Œæå‰æ•è·ï¼Œä¾¿äºæ—¥å¿—æ’æŸ¥ï¼‰</span>
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Exception</span>(<span class="hljs-string">"è§„åˆ™è„šæœ¬æ‰§è¡Œè¶…æ—¶ï¼Œå·²è¢«æ²™ç®±ä¸­æ–­"</span>, e);
        } <span class="hljs-keyword">catch</span> (Exception e) {
            <span class="hljs-comment">// å…¶ä»–å¼‚å¸¸ï¼ˆè¯­æ³•é”™è¯¯ã€æƒé™ä¸è¶³ã€æ­»å¾ªç¯ç­‰ï¼‰</span>
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Exception</span>(<span class="hljs-string">"è§„åˆ™è„šæœ¬æ‰§è¡Œå¤±è´¥ï¼š"</span> + e.getMessage(), e);
        }
    }
}
</code></pre>
<p>è¡¥å……è¯´æ˜ï¼š</p>
<ul>
<li>æ ¡éªŒå·¥å…·ç±»é‡‡ç”¨å•ä¾‹ GroovyShellï¼Œé¿å…é¢‘ç¹åˆ›å»ºç¼–è¯‘å™¨å¯¼è‡´çš„æ€§èƒ½æŸè€—ï¼Œé€‚é…ç”Ÿäº§ç¯å¢ƒé«˜å¹¶å‘åœºæ™¯ã€‚</li>
<li>å±é™©æ–¹æ³•æ ¡éªŒå¯æ ¹æ®å®é™…ä¸šåŠ¡æ‰©å±•æ­£åˆ™è¡¨è¾¾å¼ï¼Œæ¯”å¦‚ç¦æ­¢æ–‡ä»¶æ“ä½œï¼ˆnew File()ï¼‰ã€ç½‘ç»œè¯·æ±‚ç­‰ï¼ŒæŒ‰éœ€è°ƒæ•´ã€‚</li>
<li>æ­»å¾ªç¯æ ¡éªŒä¸ºåŸºç¡€ç‰ˆæœ¬ï¼Œè‹¥éœ€æ‹¦æˆªå¤æ‚æ­»å¾ªç¯ï¼ˆå¦‚åŠ¨æ€å˜é‡æ§åˆ¶çš„å¾ªç¯ï¼‰ï¼Œå¯å¼•å…¥ Groovy AST åˆ†ææ¡†æ¶ï¼ˆå¦‚ groovy-astï¼‰ï¼Œè¿›ä¸€æ­¥å®Œå–„æ ¡éªŒé€»è¾‘ã€‚</li>
<li>æ ¡éªŒå¤±è´¥ä¼šç›´æ¥æŠ›å‡ºå¼‚å¸¸ï¼Œè¢«è„šæœ¬æ‰§è¡Œå™¨æ•è·åï¼Œæœ€ç»ˆç”± Resilience4j ç†”æ–­æœºåˆ¶å…œåº•ï¼Œè¿”å›é™çº§ç»“æœï¼Œå½¢æˆå®Œæ•´çš„å¼‚å¸¸é—­ç¯ã€‚</li>
</ul>
<h3 data-id="heading-27">6.2 æ—¥å¿—ä¸ç›‘æ§</h3>
<p>æ·»åŠ å®Œå–„çš„æ—¥å¿—å’Œç›‘æ§ï¼Œä¾¿äºæ’æŸ¥é—®é¢˜ï¼š</p>
<ul>
<li>æ—¥å¿—è®°å½•ï¼šè®°å½•è„šæœ¬æ‰§è¡Œçš„è¯¦ç»†ä¿¡æ¯ï¼ˆè„šæœ¬å†…å®¹ã€å‚æ•°ã€æ‰§è¡Œæ—¶é—´ã€ç»“æœã€å¼‚å¸¸ä¿¡æ¯ï¼‰ï¼Œå°¤å…¶æ˜¯ç†”æ–­å’Œè¶…æ—¶åœºæ™¯çš„æ—¥å¿—ã€‚</li>
<li>ç›‘æ§æŒ‡æ ‡ï¼šé€šè¿‡ Resilience4j çš„ç›‘æ§åŠŸèƒ½ï¼Œæ”¶é›†ç†”æ–­çŠ¶æ€ã€å¤±è´¥ç‡ã€è¶…æ—¶æ¬¡æ•°ç­‰æŒ‡æ ‡ï¼›é€šè¿‡ Prometheus+Grafana å¯è§†åŒ–ç›‘æ§ï¼Œè®¾ç½®å‘Šè­¦ï¼ˆå¦‚ç†”æ–­è§¦å‘ã€æ²™ç®±çº¿ç¨‹æ± æ»¡ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-28">6.3 çº¿ç¨‹æ± ä¼˜åŒ–</h3>
<p>æ ¹æ®ç”Ÿäº§ç¯å¢ƒçš„å¹¶å‘é‡ï¼Œè°ƒæ•´æ²™ç®±çº¿ç¨‹æ± å‚æ•°ï¼š</p>
<ul>
<li>æ ¸å¿ƒçº¿ç¨‹æ•°å’Œæœ€å¤§çº¿ç¨‹æ•°ï¼šæ ¹æ®è„šæœ¬æ‰§è¡Œçš„å¹¶å‘é‡è°ƒæ•´ï¼Œé¿å…çº¿ç¨‹æ•°è¿‡å¤šå¯¼è‡´èµ„æºæµªè´¹ï¼Œæˆ–è¿‡å°‘å¯¼è‡´ä»»åŠ¡å †ç§¯ã€‚</li>
<li>ä»»åŠ¡é˜Ÿåˆ—ï¼šä½¿ç”¨æœ‰ç•Œé˜Ÿåˆ—ï¼Œé¿å…æ— ç•Œé˜Ÿåˆ—å¯¼è‡´ä»»åŠ¡å †ç§¯ï¼Œæœ€ç»ˆå¼•å‘ OOMã€‚</li>
<li>æ‹’ç»ç­–ç•¥ï¼šæ ¹æ®ä¸šåŠ¡éœ€æ±‚é€‰æ‹©æ‹’ç»ç­–ç•¥ï¼Œå¦‚ AbortPolicyï¼ˆç›´æ¥æ‹’ç»ï¼‰ã€CallerRunsPolicyï¼ˆç”±è°ƒç”¨çº¿ç¨‹æ‰§è¡Œï¼Œå…œåº•ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-29">6.4 æ²™ç®±èµ„æºé™åˆ¶ä¼˜åŒ–</h3>
<p>åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œè¿›ä¸€æ­¥é™åˆ¶æ²™ç®±çš„èµ„æºå ç”¨ï¼š</p>
<ul>
<li>CPU é™åˆ¶ï¼šé€šè¿‡ Sandbox4J çš„ cpuQuota é…ç½®ï¼Œé™åˆ¶æ²™ç®±çº¿ç¨‹çš„ CPU ä½¿ç”¨ç‡ï¼ˆå¦‚ 10%ï¼‰ã€‚</li>
<li>å†…å­˜é™åˆ¶ï¼šé™åˆ¶æ²™ç®±æ‰§è¡Œè„šæœ¬æ—¶çš„å †å†…å­˜å ç”¨ï¼Œé¿å…è„šæœ¬åˆ›å»ºå¤§é‡å¯¹è±¡å¯¼è‡´ OOMã€‚</li>
</ul>
<h2 data-id="heading-30">ä¸ƒã€æ€»ç»“</h2>
<p>åŠ¨æ€è§„åˆ™æ‰§è¡Œè™½ç„¶æå‡äº†ä¸šåŠ¡çµæ´»æ€§ï¼Œä½†ä¹Ÿå¸¦æ¥äº†è„šæœ¬å¼‚å¸¸æ‹–å®æœåŠ¡çš„é£é™©ã€‚æœ¬æ–‡æå‡ºçš„ã€ŒSpringBoot + è§„åˆ™æ‰§è¡Œæ²™ç®± + è¶…æ—¶ç†”æ–­ã€æ–¹æ¡ˆï¼Œé€šè¿‡åˆ†å±‚éš”ç¦»ã€åŒé‡å…œåº•ï¼Œå®Œç¾è§£å†³äº†è¿™ä¸€ç—›ç‚¹ï¼š</p>
<ol>
<li>â€‹<strong>æ²™ç®±éš”ç¦»</strong>â€‹ï¼šå®ç°è„šæœ¬ä¸ä¸»æœåŠ¡çš„çº¿ç¨‹ã€ç±»åŠ è½½ã€èµ„æºéš”ç¦»ï¼Œé˜²æ­¢è„šæœ¬å¼‚å¸¸å½±å“ä¸»æœåŠ¡ã€‚</li>
<li>â€‹<strong>è¶…æ—¶ç†”æ–­</strong>â€‹ï¼šå¯¹å¼‚å¸¸è„šæœ¬è¿›è¡Œè¶…æ—¶ä¸­æ–­å’Œç†”æ–­é™çº§ï¼Œé¿å…èµ„æºæŒç»­æµªè´¹ï¼Œä¿éšœæœåŠ¡ç¨³å®šæ€§ã€‚</li>
<li>â€‹<strong>å®æ“æ€§å¼º</strong>â€‹ï¼šæ–¹æ¡ˆåŸºäºä¸»æµæ¡†æ¶ï¼Œä»£ç å¯ç›´æ¥å¤ç”¨ï¼Œæµ‹è¯•éªŒè¯ç®€å•ï¼Œé€‚åˆå¿«é€Ÿè½åœ°åˆ°ç”Ÿäº§ç¯å¢ƒã€‚</li>
</ol>
<p>åœ¨å®é™…ç”Ÿäº§ä¸­ï¼Œå¯æ ¹æ®ä¸šåŠ¡åœºæ™¯è°ƒæ•´æ²™ç®±éš”ç¦»çº§åˆ«ã€ç†”æ–­å‚æ•°ã€çº¿ç¨‹æ± é…ç½®ï¼ŒåŒæ—¶é…åˆè„šæœ¬é¢„æ ¡éªŒã€æ—¥å¿—ç›‘æ§ï¼Œå½¢æˆä¸€å¥—å®Œæ•´çš„åŠ¨æ€è§„åˆ™æ‰§è¡Œå®‰å…¨ä½“ç³»ã€‚å¸Œæœ›æœ¬æ–‡èƒ½ä¸ºåç«¯å¼€å‘è€…æä¾›å‚è€ƒï¼Œå¸®åŠ©å¤§å®¶åœ¨æå‡ä¸šåŠ¡çµæ´»æ€§çš„åŒæ—¶ï¼Œå®ˆä½æœåŠ¡ç¨³å®šæ€§çš„åº•çº¿ã€‚</p>
<p>å…³æ³¨æˆ‘çš„CSDNï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2F" target="_blank" title="https://" ref="nofollow noopener noreferrer">blog.csdn.net/qq_30095907â€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[JDKæºç æ·±æ½œ(äºŒ)ï¼šScheduledExecutorServiceæ ¸å¿ƒå®ç°æœºåˆ¶]]></title>    <link>https://juejin.cn/post/7605136148592230427</link>    <guid>https://juejin.cn/post/7605136148592230427</guid>    <pubDate>2026-02-11T06:34:06.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605136148592230427" data-draft-id="7605114266024067123" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="JDKæºç æ·±æ½œ(äºŒ)ï¼šScheduledExecutorServiceæ ¸å¿ƒå®ç°æœºåˆ¶"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-02-11T06:34:06.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Shepherd"/> <meta itemprop="url" content="https://juejin.cn/user/3415500769991869"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            JDKæºç æ·±æ½œ(äºŒ)ï¼šScheduledExecutorServiceæ ¸å¿ƒå®ç°æœºåˆ¶
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3415500769991869/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Shepherd
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-11T06:34:06.000Z" title="Wed Feb 11 2026 06:34:06 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»13åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">1.æ¦‚è¿°</h2>
<p>åœ¨ç°ä»£åˆ†å¸ƒå¼ç³»ç»Ÿä¸é«˜å¹¶å‘åº”ç”¨çš„æ„å»ºè¿‡ç¨‹ä¸­ï¼Œä»»åŠ¡çš„<strong>å®šæ—¶è§¦å‘</strong>ä¸<strong>å‘¨æœŸæ€§è°ƒåº¦</strong>æ˜¯ä¸å¯æˆ–ç¼ºçš„åŸºç¡€èƒ½åŠ›ã€‚ä»ç®€å•çš„<strong>ç¼“å­˜è¿‡æœŸæ¸…ç†</strong>ã€<strong>å¿ƒè·³æ£€æµ‹ä¿¡å·</strong>ï¼Œåˆ°<strong>å¤æ‚çš„åˆ†å¸ƒå¼ä»»åŠ¡é‡è¯•æœºåˆ¶</strong>ï¼Œå¼€å‘è€…å¯¹è°ƒåº¦å™¨çš„ç²¾åº¦ã€ååé‡ä»¥åŠå¼‚å¸¸å®¹é”™èƒ½åŠ›æå‡ºäº†æé«˜çš„è¦æ±‚ã€‚</p>
<p>åœ¨Javaå¹¶å‘å·¥å…·åŒ…ï¼ˆjava.util.concurrentï¼‰ä¸­ï¼Œ<code>ScheduledExecutorService</code>åŠå…¶æ ¸å¿ƒå®ç°ç±»<code>ScheduledThreadPoolExecutor</code>ï¼ˆä»¥ä¸‹ç®€ç§°STPEï¼‰ä»£è¡¨äº†JDKåœ¨æ—¶é—´é©±åŠ¨ä»»åŠ¡ç®¡ç†é¢†åŸŸçš„æœ€é«˜æ¼”è¿›æˆå°± ã€‚è¿™ä¸€æ¶æ„ä¸ä»…å…‹æœäº†æ—©æœŸ<code>java.util.Timer</code>åœ¨å¤šçº¿ç¨‹åä½œä¸å¼‚å¸¸å¤„ç†ä¸Šçš„ç»“æ„æ€§ç¼ºé™·ï¼Œæ›´é€šè¿‡é›†æˆçº¿ç¨‹æ± æŠ€æœ¯ã€ä¼˜å…ˆé˜Ÿåˆ—ç®—æ³•ä»¥åŠå¤æ‚çš„çº¿ç¨‹åè°ƒæ¨¡å¼ï¼ˆå¦‚Leader-Followeræ¨¡å¼ï¼‰ï¼Œä¸ºå¼€å‘è€…æä¾›äº†ä¸€ä¸ªå·¥ä¸šçº§çš„è°ƒåº¦åŸºçŸ³</p>
<p><code>ScheduledExecutorService</code>åœ¨æˆ‘ä»¬ä¹‹å‰æ€»ç»“åˆ†äº«çš„ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2F2wPSbkvIzRYE4xPrYcQKhw" target="_blank" title="https://mp.weixin.qq.com/s/2wPSbkvIzRYE4xPrYcQKhw" ref="nofollow noopener noreferrer">ç ´å±€å»¶æ—¶ä»»åŠ¡(ä¸‹)ï¼šSpring Boot + DelayQueue ä¼˜é›…å®ç°åˆ†å¸ƒå¼å»¶æ—¶é˜Ÿåˆ—ï¼ˆå®æˆ˜ç¯‡ï¼‰</a>å°±æœ‰å¤§é‡åº”ç”¨ï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥è·³è½¬æŸ¥çœ‹ã€‚</p>
<h2 data-id="heading-1">2.ä»Timeråˆ°ScheduledThreadPoolExecutor</h2>
<p>å¤è€çš„<code>Timer</code>çš„ç¼ºé™·ç—›ç‚¹ï¼šä¸€ä¸ª<code>Timer</code>å®ä¾‹ä»…ç”±ä¸€ä¸ªåå°çº¿ç¨‹é©±åŠ¨ï¼Œè¿™æ„å‘³ç€å¦‚æœæŸä¸ªå®šæ—¶ä»»åŠ¡æ‰§è¡Œæ—¶é—´è¿‡é•¿ï¼Œåç»­æ‰€æœ‰ä»»åŠ¡çš„è°ƒåº¦éƒ½ä¼šè¢«æ¨è¿Ÿï¼Œäº§ç”Ÿæ˜¾è‘—çš„ä»»åŠ¡å †ç§¯æ•ˆåº” ã€‚æ›´è‡´å‘½çš„æ˜¯ï¼Œ<code>Timer</code>ç¼ºä¹åŸºæœ¬çš„å¼‚å¸¸éš”ç¦»æœºåˆ¶ï¼Œè‹¥ä»»ä¸€<code>TimerTask</code>æŠ›å‡ºæœªæ•è·çš„è¿è¡Œæ—¶å¼‚å¸¸ï¼Œå”¯ä¸€çš„åå°çº¿ç¨‹å°†ç›´æ¥ç»ˆæ­¢ï¼Œå¯¼è‡´æ•´ä¸ª<code>Timer</code>å¤±æ•ˆï¼Œæ‰€æœ‰åç»­ä»»åŠ¡å½»åº•åœæ‘†ã€‚</p>
<p>ä¸ºäº†å½»åº•è§£å†³è¿™äº›ç—›ç‚¹ï¼ŒJDK 5.0å¼•å…¥äº†<code>ScheduledThreadPoolExecutor</code>ã€‚ä½œä¸º<code>ThreadPoolExecutor</code>ï¼ˆTPEï¼‰çš„å­ç±»ï¼ŒSTPEç»§æ‰¿äº†å¼ºå¤§çš„çº¿ç¨‹æ± ç®¡ç†èƒ½åŠ›ï¼Œå…è®¸é€šè¿‡å¤šçº¿ç¨‹å¹¶è¡Œå¤„ç†ä»»åŠ¡ï¼Œä»è€Œæ¶ˆé™¤äº†å•çº¿ç¨‹é˜»å¡å¸¦æ¥çš„é£é™© ã€‚åœ¨æ—¶é—´ç²¾åº¦ä¸Šï¼ŒSTPEæ‘’å¼ƒäº†æ˜“å—ç³»ç»Ÿæ—¶é’Ÿè°ƒæ•´å½±å“çš„<code>System.currentTimeMillis()</code>ï¼Œè½¬è€Œé‡‡ç”¨åŸºäºçº³ç§’çš„å•è°ƒæ—¶é’Ÿ<code>System.nanoTime()</code>ï¼Œæå¤§åœ°æå‡äº†ä»»åŠ¡è§¦å‘çš„ç¨³å®šæ€§ã€‚</p>
<p>å…³äº<code>Timer</code>çš„ä½¿ç”¨ç—›ç‚¹å’Œ<code>ScheduledExecutorService</code>çš„ä½¿ç”¨ç¤ºä¾‹ï¼Œè¯·çœ‹ä¹‹å‰æˆ‘ä»¬æ€»ç»“çš„ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2F_-Bu8qWOgskorMNnjyS5DA" target="_blank" title="https://mp.weixin.qq.com/s/_-Bu8qWOgskorMNnjyS5DA" ref="nofollow noopener noreferrer">è¯¦è§£Spring Bootå®šæ—¶ä»»åŠ¡çš„å‡ ç§å®ç°æ–¹æ¡ˆ</a></p>
<p>è¿™é‡Œå°±ä¸å†è¯¦è§£ä»‹ç»äº†ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬æ¥è¯¦è§£çœ‹çœ‹<code>ScheduledExecutorService</code>ä¸<code>ScheduledThreadPoolExecutor</code>çš„æ¶æ„æ¼”è¿›ä¸æ ¸å¿ƒæºç ï¼Œæ·±å…¥äº†è§£å®ç°æœºåˆ¶ä¸åŸç†ã€‚</p>
<h2 data-id="heading-2">3.ScheduledExecutorServiceæ¥å£å®šä¹‰</h2>
<p><code>ScheduledExecutorService</code>æ¥å£é€šè¿‡æ‰©å±•<code>ExecutorService</code>ï¼Œä¸ä»…ç»§æ‰¿äº†ä»»åŠ¡æäº¤ã€å…³é—­ç®¡ç†ç­‰åŸºç¡€APIï¼Œè¿˜å®šä¹‰äº†å››ç§ä¸“é—¨é’ˆå¯¹æ—¶é—´è°ƒåº¦çš„å¥‘çº¦æ–¹æ³•</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-keyword">public</span> interface ScheduledExecutorService extends ExecutorService {
â€‹
 Â  Â <span class="hljs-comment">/**
 Â  Â  * ä¸€æ¬¡æ€§å»¶æ—¶æ‰§è¡Œ
 Â  Â  */</span>
 Â  Â <span class="hljs-function"><span class="hljs-keyword">public</span> ScheduledFuture&lt;?&gt; <span class="hljs-title">schedule</span><span class="hljs-params">(Runnable command, <span class="hljs-type">long</span> delay, TimeUnit unit)</span></span>;
â€‹
 Â  Â <span class="hljs-comment">/**
 Â  Â  * ä¸€æ¬¡æ€§å»¶æ—¶æ‰§è¡Œï¼Œè¿”å›çš„ScheduledFutureå…è®¸è°ƒç”¨è€…å¼‚æ­¥è·å–æ‰§è¡Œç»“æœ
 Â  Â  */</span>
 Â  Â <span class="hljs-keyword">public</span> &lt;V&gt; <span class="hljs-function">ScheduledFuture&lt;V&gt; <span class="hljs-title">schedule</span><span class="hljs-params">(Callable&lt;V&gt; callable, <span class="hljs-type">long</span> delay, TimeUnit unit)</span></span>;
â€‹
 Â  Â <span class="hljs-comment">/**
 Â  Â  * å›ºå®šé¢‘ç‡è°ƒåº¦
 Â  Â  */</span>
 Â  Â <span class="hljs-function"><span class="hljs-keyword">public</span> ScheduledFuture&lt;?&gt; <span class="hljs-title">scheduleAtFixedRate</span><span class="hljs-params">(Runnable command, <span class="hljs-type">long</span> initialDelay, <span class="hljs-type">long</span> period, TimeUnit unit)</span></span>;
â€‹
 Â  Â <span class="hljs-comment">/**
 Â  Â  * å›ºå®šå»¶è¿Ÿè°ƒåº¦
 Â  Â  */</span>
 Â  Â <span class="hljs-function"><span class="hljs-keyword">public</span> ScheduledFuture&lt;?&gt; <span class="hljs-title">scheduleWithFixedDelay</span><span class="hljs-params">(Runnable command, <span class="hljs-type">long</span> initialDelay, <span class="hljs-type">long</span> delay, TimeUnit unit)</span></span>;
â€‹
}
</code></pre>
<p>ä¸€æ¬¡æ€§å»¶æ—¶æ‰§è¡Œçš„æ–¹æ³•æ²¡å•¥å¥½è¯´çš„ï¼Œå°±æ˜¯ç­‰åˆ°å»¶æ—¶æ—¶é—´åˆ°äº†ï¼Œå°±æ‰§è¡Œä»»åŠ¡ï¼Œè¿™é‡Œé‡ç‚¹è¯´ä¸€ä¸‹åé¢ä¸¤ä¸ªæ–¹æ³•ï¼š</p>
<p><strong>å›ºå®šé¢‘ç‡è°ƒåº¦ï¼šscheduleAtFixedRate</strong></p>
<p>è¯¥æ–¹æ³•æ—¨åœ¨ä»¥æ’å®šçš„é¢‘ç‡æ‰§è¡Œä»»åŠ¡ã€‚å…¶è°ƒåº¦åŸºå‡†æ˜¯ä»»åŠ¡çš„å¼€å§‹æ—¶é—´ã€‚å…·ä½“è€Œè¨€ï¼Œå¦‚æœåˆå§‹å»¶è¿Ÿä¸º dï¼Œå‘¨æœŸä¸º pï¼Œåˆ™ä»»åŠ¡çš„ç†è®ºæ‰§è¡Œæ—¶é—´ç‚¹åºåˆ—ä¸ºï¼š</p>
<p>T_n = startTime + d + n*p</p>
<p>è¯¥æ–¹æ³•çš„å…³é”®ç‰¹å¾åœ¨äºå…¶â€œèµ¶å·¥â€æœºåˆ¶ï¼šå¦‚æœæŸæ¬¡ä»»åŠ¡æ‰§è¡Œè€—æ—¶è¶…è¿‡äº†å‘¨æœŸ pï¼Œä¸‹ä¸€æ¬¡ä»»åŠ¡ä¼šåœ¨å½“å‰ä»»åŠ¡å®Œæˆåç«‹å³å¼€å§‹ï¼Œä»¥å°½å¯èƒ½è´´åˆé¢„å®šçš„é¢‘ç‡åºåˆ— ã€‚ç„¶è€Œï¼ŒSTPEä¿è¯åŒä¸€ä»»åŠ¡çš„ä¸åŒæ‰§è¡Œä¸ä¼šé‡å ï¼Œå³å‰ä¸€æ¬¡æ‰§è¡Œæœªç»“æŸï¼Œåä¸€æ¬¡æ‰§è¡Œä¸ä¼šå¯åŠ¨ ã€‚</p>
<p><strong>å›ºå®šå»¶è¿Ÿè°ƒåº¦ï¼šscheduleWithFixedDelay</strong></p>
<p>ä¸å›ºå®šé¢‘ç‡ä¸åŒï¼Œ<code>scheduleWithFixedDelay</code>å…³æ³¨çš„æ˜¯ä»»åŠ¡æ‰§è¡Œç»“æŸä¸ä¸‹ä¸€æ¬¡æ‰§è¡Œå¼€å§‹ä¹‹é—´çš„é—´éš”ã€‚å…¶è°ƒåº¦åŸºå‡†æ˜¯å‰ä¸€æ¬¡ä»»åŠ¡çš„ç»“æŸæ—¶é—´ã€‚å¦‚æœä»»åŠ¡æ‰§è¡Œè€—æ—¶ä¸º Eï¼ŒæŒ‡å®šçš„å»¶è¿Ÿä¸º pï¼Œåˆ™ä¸¤æ¬¡ä»»åŠ¡å¼€å§‹çš„æ—¶é—´é—´éš”å®é™…ä¸º E + p ã€‚è¿™ç§æ¨¡å¼ç‰¹åˆ«é€‚ç”¨äºé‚£äº›å¯¹èµ„æºç‹¬å æœ‰ä¸¥æ ¼è¦æ±‚ï¼Œæˆ–éœ€è¦ç¡®ä¿ä»»åŠ¡ä¹‹é—´æœ‰ç¨³å®šâ€œå†·å´æœŸâ€çš„åœºæ™¯</p>
<h2 data-id="heading-3">4.ScheduledThreadPoolExecutoræ ¸å¿ƒå®ç°</h2>
<p>STPEçš„æ¶æ„è®¾è®¡ä½“ç°äº†æé«˜çš„ä»£ç å¤ç”¨ä¸æ‰©å±•æ€§ã€‚å®ƒåœ¨ç»§æ‰¿<code>ThreadPoolExecutor</code>çš„åŸºç¡€ä¸Šï¼Œé€šè¿‡å†…éƒ¨ç±»<code>ScheduledFutureTask</code>å’Œ<code>DelayedWorkQueue</code>é‡æ„äº†ä»»åŠ¡æäº¤ä¸å­˜å‚¨é€»è¾‘</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b3c39175c1cc4aa6aefb4c3c6d02715c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2hlcGhlcmQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771396445&amp;x-signature=JMEcwktdViEcxpqzRcImxo7HX74%3D" alt="" loading="lazy"/></p>
<p><strong>æ³¨æ„</strong>ï¼šåœ¨æ ‡å‡†çš„<code>ThreadPoolExecutor</code>ä¸­ï¼Œçº¿ç¨‹æ± çš„å¤§å°åœ¨<code>corePoolSize</code>ä¸<code>maximumPoolSize</code>ä¹‹é—´åŠ¨æ€æ³¢åŠ¨ã€‚ç„¶è€Œï¼Œç”±äºSTPEä½¿ç”¨äº†ä¸€ä¸ªç†è®ºä¸Šæ— ç•Œçš„ä¼˜å…ˆé˜Ÿåˆ—<code>DelayedWorkQueue</code>ï¼Œæ ¹æ®TPEçš„æ‰§è¡Œè§„åˆ™ï¼Œåªæœ‰åœ¨é˜Ÿåˆ—æ»¡æ—¶æ‰ä¼šåˆ›å»ºè¶…è¿‡<code>corePoolSize</code>çš„çº¿ç¨‹ ã€‚åœ¨STPEçš„ä¸Šä¸‹æ–‡ä¸­ï¼Œ<code>DelayedWorkQueue</code>æ°¸è¿œä¸ä¼šæŠ¥æ»¡ï¼Œå› æ­¤<code>maximumPoolSize</code>å‚æ•°åœ¨å®é™…è¿è¡Œä¸­å˜å¾—æ¯«æ— æ„ä¹‰ï¼Œçº¿ç¨‹æ± çš„å¤§å°å®é™…ä¸Šè¢«é”šå®šåœ¨<code>corePoolSize</code>ä¸Š ã€‚è¿™ä¸€è®¾è®¡æƒè¡¡ç¡®ä¿äº†è°ƒåº¦å™¨æ‹¥æœ‰ç¨³å®šçš„å·¥ä½œçº¿ç¨‹æ•°ï¼Œé¿å…äº†åœ¨é«˜è´Ÿè½½è°ƒåº¦ä¸‹çš„çº¿ç¨‹é¢‘ç¹åˆ›å»ºä¸é”€æ¯ã€‚</p>
<h4 data-id="heading-4">4.1 ä»»åŠ¡åŒ…è£…å™¨ï¼šScheduledFutureTask</h4>
<p>æ‰€æœ‰æäº¤ç»™STPEçš„ä»»åŠ¡éƒ½ä¼šè¢«åŒ…è£…æˆ<code>ScheduledFutureTask</code>å¯¹è±¡ã€‚è¯¥ç±»ä¸ä»…ä¿å­˜äº†åŸå§‹çš„<code>Runnable</code>æˆ–<code>Callable</code>ï¼Œè¿˜ç»´æŠ¤äº†è°ƒåº¦æ‰€éœ€çš„å…ƒæ•°æ® ï¼š</p>
<ul>
<li><strong>time</strong>ï¼šä»»åŠ¡ä¸‹ä¸€æ¬¡åº”å½“è¢«è§¦å‘çš„ç»å¯¹æ—¶é—´ç‚¹ï¼ˆçº³ç§’å•ä½ï¼‰ ã€‚</li>
<li><strong>period</strong>ï¼šè°ƒåº¦å‘¨æœŸã€‚æ­£æ•°è¡¨ç¤ºå›ºå®šé¢‘ç‡ï¼Œè´Ÿæ•°è¡¨ç¤ºå›ºå®šå»¶è¿Ÿï¼Œé›¶è¡¨ç¤ºä¸€æ¬¡æ€§ä»»åŠ¡ ã€‚</li>
<li><strong>sequenceNumber</strong>ï¼šç”¨äºåœ¨ç›¸åŒè§¦å‘æ—¶é—´ä¸‹æ‰“ç ´åƒµå±€çš„åºåˆ—å·ï¼Œç¡®ä¿è°ƒåº¦æ»¡è¶³FIFOåŸåˆ™ ã€‚</li>
</ul>
<h4 data-id="heading-5">4.2 æ‰©å±•æœºåˆ¶ï¼šdecorateTask</h4>
<p>ä¸ºäº†æ”¯æŒæ‹¦æˆªå™¨æ¨¡å¼æˆ–ç›‘æ§å¢å¼ºï¼ŒSTPEæä¾›äº†<code>decorateTask</code>ä¿æŠ¤æ–¹æ³•ã€‚å­ç±»å¯ä»¥é‡å†™æ­¤æ–¹æ³•ï¼Œåœ¨ä»»åŠ¡è¿›å…¥é˜Ÿåˆ—å‰å¯¹å…¶è¿›è¡ŒäºŒæ¬¡åŒ…è£…æˆ–é™„åŠ ç›‘æ§æŒ‡æ ‡ ã€‚è¿™åœ¨å¤æ‚çš„å¾®æœåŠ¡æ¶æ„ä¸­éå¸¸æœ‰ç”¨ï¼Œä¾‹å¦‚å¯ä»¥å°†åˆ†å¸ƒå¼è¿½è¸ªçš„TraceIdè‡ªåŠ¨é€ä¼ åˆ°å®šæ—¶ä»»åŠ¡çš„æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­ã€‚</p>
<h4 data-id="heading-6">4.3 æ ¸å¿ƒæ•°æ®ç»“æ„ï¼šDelayedWorkQueueçš„æ·±æ½œåˆ†æ</h4>
<p>STPEä¹‹æ‰€ä»¥èƒ½é«˜æ•ˆç®¡ç†æµ·é‡å®šæ—¶ä»»åŠ¡ï¼Œæ ¸å¿ƒåŠŸè‡£æ˜¯å…¶å†…éƒ¨å®ç°çš„<code>DelayedWorkQueue</code>ã€‚è¿™æ˜¯ä¸€ä¸ªåŸºäºäºŒå‰æœ€å°å †ï¼ˆBinary Min-Heapï¼‰ç»“æ„çš„é˜»å¡ä¼˜å…ˆé˜Ÿåˆ— ã€‚</p>
<p><strong>äºŒå‰å †çš„æ•°å­¦ç‰¹å¾ä¸æ€§èƒ½</strong></p>
<p>åœ¨<code>DelayedWorkQueue</code>ä¸­ï¼Œæ¯ä¸ªèŠ‚ç‚¹ä»£è¡¨ä¸€ä¸ªä»»åŠ¡ï¼Œå…¶æ’åºåŸºå‡†æ˜¯ä»»åŠ¡çš„<code>time</code>å±æ€§ã€‚å †é¡¶ï¼ˆindex 0ï¼‰å§‹ç»ˆå­˜æ”¾ç€ç¦»å½“å‰æ—¶é—´æœ€è¿‘ã€å³æœ€å…ˆéœ€è¦æ‰§è¡Œçš„ä»»åŠ¡ ã€‚</p>
<ul>
<li><strong>æŸ¥è¯¢æ•ˆç‡</strong>ï¼šè·å–æœ€è¿‘ä»»åŠ¡çš„æ—¶é—´å¤æ‚åº¦ä¸º O(1) ã€‚</li>
<li><strong>æ’å…¥ä¸åˆ é™¤</strong>ï¼šé€šè¿‡<code>siftUp</code>å’Œ<code>siftDown</code>æ“ä½œï¼Œç»´æŠ¤å †å¹³è¡¡çš„å¤æ‚åº¦ä¸º O(\log n) ã€‚</li>
<li><strong>ç©ºé—´ä¼˜åŒ–</strong>ï¼šä¸ºäº†æé«˜åˆ é™¤æ€§èƒ½ï¼Œä»»åŠ¡å†…éƒ¨ç»´æŠ¤äº†ä¸€ä¸ª<code>heapIndex</code>å­—æ®µï¼Œä½¿å¾—åœ¨ä»»åŠ¡è¢«å–æ¶ˆï¼ˆcancelï¼‰æ—¶ï¼Œå¯ä»¥ç»•è¿‡å…¨é‡æ‰«æï¼Œç›´æ¥å®šä½å¹¶è¿›è¡Œå †é‡æ„ ã€‚</li>
</ul>
<p><strong>åŠ¨æ€æ‰©å®¹ç­–ç•¥</strong></p>
<p><code>DelayedWorkQueue</code>è™½ç„¶é€»è¾‘ä¸Šæ— ç•Œï¼Œä½†ç‰©ç†å†…å­˜æ˜¯æœ‰é™çš„ã€‚å…¶åº•å±‚é‡‡ç”¨æ•°ç»„å­˜å‚¨ï¼Œåˆå§‹å®¹é‡é€šå¸¸è¾ƒå°ã€‚å½“ä»»åŠ¡æ•°è¶…è¿‡å½“å‰æ•°ç»„é•¿åº¦æ—¶ï¼Œå®ƒä¼šè§¦å‘æ‰©å®¹æ“ä½œï¼Œé€šå¸¸å°†å®¹é‡å¢åŠ çº¦50% ã€‚è¿™ç§åˆ†çº§æ‰©å®¹ç­–ç•¥åœ¨å†…å­˜å ç”¨ä¸æ“ä½œå¼€é”€ä¹‹é—´å–å¾—äº†å¹³è¡¡</p>
<p><strong>Leader-Followeræ¨¡å¼ï¼šè§£å†³çº¿ç¨‹é¥¥é¥¿ä¸æƒŠç¾¤æ•ˆåº”</strong></p>
<p>åœ¨å¤šå·¥ä½œçº¿ç¨‹ç¯å¢ƒä¸‹ï¼Œå¦‚ä½•åè°ƒå¤šä¸ªçº¿ç¨‹ç«äº‰å †é¡¶ä»»åŠ¡æ˜¯ä¸€ä¸ªæ€§èƒ½æŒ‘æˆ˜ã€‚å¦‚æœæ‰€æœ‰ç©ºé—²çº¿ç¨‹éƒ½è°ƒç”¨<code>available.awaitNanos(delay)</code>ç­‰å¾…å †é¡¶ä»»åŠ¡ï¼Œé‚£ä¹ˆå½“ä»»åŠ¡æ—¶é—´åˆ°è¾¾æ—¶ï¼Œæ‰€æœ‰çº¿ç¨‹éƒ½ä¼šè¢«åŒæ—¶å”¤é†’ã€‚ç„¶è€Œï¼Œåªæœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½æˆåŠŸå¤ºå–ä»»åŠ¡ï¼Œå…¶ä½™çº¿ç¨‹åˆä¸å¾—ä¸é‡æ–°è¿›å…¥ç¡çœ çŠ¶æ€ï¼Œé€ æˆäº†å¤§é‡çš„æ— æ„ä¹‰ä¸Šä¸‹æ–‡åˆ‡æ¢ ã€‚</p>
<p>ä¸ºäº†ä¼˜åŒ–è¿™ä¸€ç‚¹ï¼ŒSTPEå¼•å…¥äº†<strong>Leader-Follower</strong>æ¨¡å¼çš„ä¸€ç§å˜ä½“ ã€‚</p>
<p><strong>é¢†å¯¼è€…ï¼ˆLeaderï¼‰çš„è§’è‰²å®šä¹‰</strong></p>
<p>åœ¨<code>take()</code>æ–¹æ³•çš„å®ç°é€»è¾‘ä¸­ï¼Œä¸“é—¨è®¾ç«‹äº†ä¸€ä¸ª<code>leader</code>å˜é‡ï¼ˆç±»å‹ä¸º<code>Thread</code>ï¼‰ã€‚å½“é˜Ÿåˆ—é¦–ä¸ªä»»åŠ¡å°šæœªåˆ°æœŸæ—¶ï¼š</p>
<ol>
<li>å¦‚æœå½“å‰å·²ç»å­˜åœ¨<code>leader</code>çº¿ç¨‹ï¼Œæ–°è¿›å…¥çš„çº¿ç¨‹ï¼ˆFollowerï¼‰å°†ç›´æ¥è°ƒç”¨<code>available.await()</code>è¿›è¡Œæ— é™æœŸç­‰å¾…ï¼Œä¸æ¶ˆè€—è®¡æ—¶èµ„æº ã€‚</li>
<li>å¦‚æœæ²¡æœ‰<code>leader</code>çº¿ç¨‹ï¼Œå½“å‰çº¿ç¨‹å°†è‡ªèæˆä¸º<code>leader</code>ï¼Œå¹¶è°ƒç”¨<code>available.awaitNanos(delay)</code>è¿›è¡Œé™æ—¶ç­‰å¾… ã€‚</li>
</ol>
<p><strong>æƒåŠ›çš„æ›´è¿­ä¸ä¿¡å·ä¼ é€’</strong></p>
<p>è¿™ç§è®¾è®¡ç¡®ä¿äº†åœ¨ä»»ä½•æ—¶åˆ»ï¼Œåªæœ‰ä¸€ä¸ªçº¿ç¨‹ï¼ˆLeaderï¼‰åœ¨ç›‘æ§æ—¶é—´çš„æµé€ã€‚å½“è¯¥çº¿ç¨‹é†’æ¥å¹¶æˆåŠŸè·å–ä»»åŠ¡åï¼Œå®ƒåœ¨é€€å‡º<code>take()</code>æ–¹æ³•å‰ï¼Œå¿…é¡»è´Ÿè´£é€šè¿‡<code>available.signal()</code>å”¤é†’ä¸€ä¸ªæ–°çš„Followerçº¿ç¨‹ï¼Œè®©å…¶æ¥æ›¿è‡ªå·±æˆä¸ºæ–°çš„Leader ã€‚ å¦‚æœåœ¨æ­¤æœŸé—´æœ‰æ–°çš„ã€æ›´æ—©è§¦å‘çš„ä»»åŠ¡è¢«åŠ å…¥å †é¡¶ï¼Œæ’å…¥æ“ä½œï¼ˆofferï¼‰ä¼šé€šè¿‡è®¾ç½®<code>leader = null</code>å¹¶å‘é€å”¤é†’ä¿¡å·ï¼Œå¼ºåˆ¶å½“å‰çš„Leader-Followerç»“æ„è¿›è¡Œé‡æ–°æ´—ç‰Œï¼Œç¡®ä¿æ–°ä»»åŠ¡èƒ½åŠæ—¶å¾—åˆ°å“åº”</p>
<p>ä¸ªäººæ„Ÿè§‰<code>DelayedWorkQueue</code>å’Œä¹‹å‰åˆ†æçš„<code>DelayQueue</code>æ˜¯å·®ä¸å¤šçš„ï¼Œç›¸å…³æ–‡ç« ï¼š</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2F06g4jWt0iN9tHNnVzcVkcQ" target="_blank" title="https://mp.weixin.qq.com/s/06g4jWt0iN9tHNnVzcVkcQ" ref="nofollow noopener noreferrer">â° ä¸€æ‹›é²œåƒéå¤©ï¼è¯¦è§£Javaå»¶æ—¶é˜Ÿåˆ—DelayQueueï¼Œä»æ­¤å»¶æ—¶ä»»åŠ¡ä¸å†éš¾!</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2F_apbmRphCNbj6v7wIJZ-kQ" target="_blank" title="https://mp.weixin.qq.com/s/_apbmRphCNbj6v7wIJZ-kQ" ref="nofollow noopener noreferrer">JDKæºç æ·±æ½œ(ä¸€)ï¼šä»æºç çœ‹é€DelayQueueå®ç°</a></p>
<p>é‚£ä¸ºå•¥<code>ScheduledThreadPoolExecutor</code> é€‰æ‹©è‡ªå·±å®ç°ä¸€ä¸ªå†…éƒ¨ç±»å‘¢ï¼Ÿ</p>
<p>ä¸»è¦æ˜¯åŸºäº<strong>æ€§èƒ½ä¼˜åŒ–</strong>å’Œ<strong>æ¶æ„è€¦åˆ</strong>çš„è€ƒé‡ï¼š</p>
<p><strong>ä»»åŠ¡å–æ¶ˆçš„é«˜æ•ˆç§»é™¤</strong>ï¼Œåœ¨æ™®é€šçš„ <code>DelayQueue</code> ä¸­ï¼Œå¦‚æœéœ€è¦ç§»é™¤ä¸€ä¸ªæŒ‡å®šçš„ä»»åŠ¡ï¼ˆä¾‹å¦‚ç”¨æˆ·è°ƒç”¨äº† <code>future.cancel()</code>ï¼‰ï¼Œé˜Ÿåˆ—å¿…é¡»éå†å†…éƒ¨æ•°ç»„æ¥å¯»æ‰¾è¯¥å¯¹è±¡ï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯ O(n)ã€‚</p>
<p>è€Œ <code>DelayedWorkQueue</code> é…åˆå…¶å­˜å‚¨çš„ä»»åŠ¡ç±»å‹ <code>ScheduledFutureTask</code> åšäº†ç‰¹æ®Šä¼˜åŒ–ï¼š</p>
<ul>
<li><strong>heapIndex ç´¢å¼•ï¼š</strong> æ¯ä¸ª <code>ScheduledFutureTask</code> å†…éƒ¨ç»´æŠ¤äº†ä¸€ä¸ª <code>heapIndex</code> å­—æ®µï¼Œè®°å½•äº†è¯¥ä»»åŠ¡åœ¨äºŒå‰å †æ•°ç»„ä¸­çš„å½“å‰ä¸‹æ ‡ ã€‚</li>
<li><strong>å¿«é€Ÿå®šä½ï¼š</strong> å½“ä»»åŠ¡è¢«å–æ¶ˆå¹¶è§¦å‘ç§»é™¤æ“ä½œæ—¶ï¼Œ<code>DelayedWorkQueue</code> å¯ä»¥é€šè¿‡è¿™ä¸ªç´¢å¼•ä»¥ O(1) çš„æ—¶é—´ç›´æ¥å®šä½åˆ°ä»»åŠ¡åœ¨å †ä¸­çš„ä½ç½®ï¼Œç„¶åé€šè¿‡ O(\log n) çš„å †é‡æ„æ“ä½œå°†å…¶ç§»é™¤ ã€‚å¯¹äºé«˜å¹¶å‘ä¸”é¢‘ç¹å–æ¶ˆä»»åŠ¡çš„åœºæ™¯ï¼Œè¿™ç§æ€§èƒ½æå‡æ˜¯å·¨å¤§çš„ã€‚</li>
</ul>
<p><strong>ç±»å‹é€‚é…ï¼š</strong> <code>DelayedWorkQueue</code> ä¸“é—¨ä¸º <code>RunnableScheduledFuture</code> ç±»å‹è®¾è®¡ï¼Œç¡®ä¿äº†é˜Ÿåˆ—ä¸­çš„å…ƒç´ éƒ½å…·å¤‡è°ƒåº¦æ‰€éœ€çš„å…ƒæ•°æ®ï¼ˆå¦‚ <code>time</code> å’Œ <code>period</code>ï¼‰ï¼Œè¿™æ¯”æ³›å‹çš„ <code>DelayQueue</code> åœ¨å†…éƒ¨å¤„ç†ä¸Šæ›´åŠ ç´§å‡‘é«˜æ•ˆ</p>
<p>æ€»çš„æ¥è¯´ï¼Œ<code>DelayedWorkQueue</code> æ˜¯ä¸€ä¸ª<strong>ä¸ºäº† STPE ç‰¹æ®Šè°ƒåº¦éœ€æ±‚è€Œé«˜åº¦å®šåˆ¶åŒ–</strong>çš„â€œé«˜æ€§èƒ½ç‰ˆ DelayQueueâ€ï¼Œå®ƒç‰ºç‰²äº†é€šç”¨æ€§ï¼Œæ¢å–äº†åœ¨ä»»åŠ¡å–æ¶ˆå’Œå¤šçº¿ç¨‹åä½œä¸Šçš„æè‡´æ€§èƒ½ã€‚</p>
<h2 data-id="heading-7">5.ä»»åŠ¡è°ƒåº¦</h2>
<h4 data-id="heading-8">5.1 æäº¤ä»»åŠ¡</h4>
<p>è¿™é‡Œä»¥å›ºå®šé¢‘ç‡è°ƒåº¦ä»»åŠ¡ä¸ºä¾‹å±•å¼€è¯´è¯´ï¼š</p>
<pre><code class="hljs language-scss" lang="scss"> Â  Â public ScheduledFuture&lt;?&gt; <span class="hljs-built_in">scheduleAtFixedRate</span>(Runnable command,
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â long initialDelay,
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â long period,
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â TimeUnit unit) {
 Â  Â  Â  Â <span class="hljs-comment">// ä»»åŠ¡å’Œå•ä½ä¸èƒ½ä¸ºç©º</span>
 Â  Â  Â  Â if (command == null || unit == null)
 Â  Â  Â  Â  Â  Â throw new <span class="hljs-built_in">NullPointerException</span>();
 Â  Â  Â  Â <span class="hljs-comment">// å‘¨æœŸä¸èƒ½å°äº0</span>
 Â  Â  Â  Â if (period &lt;= <span class="hljs-number">0</span>)
 Â  Â  Â  Â  Â  Â throw new <span class="hljs-built_in">IllegalArgumentException</span>();
 Â  Â  Â  Â <span class="hljs-comment">// é€šè¿‡å†…éƒ¨çš„ä»»åŠ¡åŒ…è£…å™¨åˆ›å»ºä¸€ä¸ªä»»åŠ¡</span>
 Â  Â  Â  Â ScheduledFutureTask&lt;Void&gt; sft =
 Â  Â  Â  Â  Â  Â new ScheduledFutureTask&lt;Void&gt;(command,
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â null,
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â triggerTime(initialDelay, unit),
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â unit<span class="hljs-selector-class">.toNanos</span>(period));
 Â  Â  Â  Â <span class="hljs-comment">// æ‰©å±•ç‚¹ï¼šå¯ä»¥é‡å†™decorateTaskï¼Œåœ¨ä»»åŠ¡æ”¾å…¥å»¶æ—¶é˜Ÿåˆ—ä¹‹å‰åšä¸€äº›å¤„ç†ï¼Œå¢å¼ºä»»åŠ¡</span>
 Â  Â  Â  Â <span class="hljs-comment">// decorateTask()é»˜è®¤ä¸åšä»»ä½•å¤„ç†ï¼Œè¿”å›sftï¼Œä¹Ÿå°±æ˜¯ sft == t</span>
 Â  Â  Â  Â RunnableScheduledFuture&lt;Void&gt; t = <span class="hljs-built_in">decorateTask</span>(command, sft);
 Â  Â  Â  Â <span class="hljs-comment">// å‘¨æœŸæ‰§è¡Œé‡æ–°æ’é˜Ÿçš„ä»»åŠ¡æŒ‡å‘å¢å¼ºåçš„ä»»åŠ¡</span>
 Â  Â  Â  Â sft<span class="hljs-selector-class">.outerTask</span> = t;
 Â  Â  Â  Â <span class="hljs-comment">// å»¶æ—¶æ‰§è¡Œä»»åŠ¡</span>
 Â  Â  Â  Â <span class="hljs-built_in">delayedExecute</span>(t);
 Â  Â  Â  Â return t;
 Â   }
</code></pre>
<p>å»¶æ—¶æ‰§è¡Œä»»åŠ¡æ–¹æ³•<code>#delayedExecute()</code></p>
<pre><code class="hljs language-scss" lang="scss"> Â  Â private void <span class="hljs-built_in">delayedExecute</span>(RunnableScheduledFuture&lt;?&gt; task) {
 Â  Â  Â  Â <span class="hljs-comment">// çº¿ç¨‹æ± å…³é—­ï¼Œæ‹’ç»ä»»åŠ¡</span>
 Â  Â  Â  Â if (isShutdown())
 Â  Â  Â  Â  Â  Â <span class="hljs-built_in">reject</span>(task);
 Â  Â  Â  Â else {
 Â  Â  Â  Â  Â  Â <span class="hljs-comment">// å°†ä»»åŠ¡åŠ å…¥delayworkQueueé˜Ÿåˆ—ä¸­</span>
 Â  Â  Â  Â  Â  Â super<span class="hljs-selector-class">.getQueue</span>()<span class="hljs-selector-class">.add</span>(task);
 Â  Â  Â  Â  Â  Â <span class="hljs-comment">// å†æ¬¡åˆ¤æ–­çº¿ç¨‹æ± å…³é—­ï¼Œæ ¹æ®çŠ¶æ€å’Œå…³æœºåè¿è¡Œå‚æ•°çš„è¦æ±‚å–æ¶ˆå¹¶åˆ é™¤å®ƒ</span>
 Â  Â  Â  Â  Â  Â if (isShutdown() &amp;&amp;
 Â  Â  Â  Â  Â  Â  Â  Â !<span class="hljs-built_in">canRunInCurrentRunState</span>(task.isPeriodic()) &amp;&amp;
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-built_in">remove</span>(task))
 Â  Â  Â  Â  Â  Â  Â  Â task<span class="hljs-selector-class">.cancel</span>(false);
 Â  Â  Â  Â  Â  Â else
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-comment">// å¯åŠ¨çº¿ç¨‹, ç¡®ä¿çº¿ç¨‹æ± ä¸­è‡³å°‘æœ‰è¶³å¤Ÿçš„å·¥ä½œçº¿ç¨‹æ¥å¤„ç†ï¼ˆæˆ–ç­‰å¾…ï¼‰æ–°æäº¤åˆ°é˜Ÿåˆ—ä¸­çš„ä»»åŠ¡</span>
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-comment">// åªè¦é˜Ÿåˆ—é‡Œæœ‰ä»»åŠ¡ï¼Œçº¿ç¨‹æ± é‡Œå°±å¿…é¡»è‡³å°‘æœ‰ä¸€ä¸ªçº¿ç¨‹åœ¨ take() ä¸Šé˜»å¡ç­‰å¾…ï¼Œæˆ–è€…çº¿ç¨‹æ•°å·²ç»è¾¾åˆ°äº† corePoolSize çš„ä¸Šé™</span>
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-built_in">ensurePrestart</span>();
 Â  Â  Â   }
 Â   }
</code></pre>
<p>ä½†åœ¨ STPE ä¸­ï¼Œä»»åŠ¡å¾€å¾€æ˜¯â€œå»¶æ—¶â€çš„ï¼Œ å¦‚æœä½ æäº¤äº†ä¸€ä¸ª 10 åˆ†é’Ÿåæ‰§è¡Œçš„ä»»åŠ¡ï¼Œè€Œæ­¤æ—¶çº¿ç¨‹æ± é‡Œä¸€ä¸ªçº¿ç¨‹éƒ½æ²¡æœ‰ï¼ˆæ¯”å¦‚åˆšåˆå§‹åŒ–ï¼‰ï¼Œå¦‚æœæ²¡æœ‰ <code>ensurePrestart()</code>ï¼Œè¿™ä¸ªä»»åŠ¡ä¼šé™é™åœ°èººåœ¨ <code>DelayedWorkQueue</code> é‡Œã€‚</p>
<p><code>ensurePrestart()</code> ä¼šæ£€æŸ¥å½“å‰è¿è¡Œçš„çº¿ç¨‹æ•°ã€‚å¦‚æœçº¿ç¨‹æ•°å°äº <code>corePoolSize</code>ï¼Œå®ƒä¼šå¯åŠ¨ä¸€ä¸ªæ–°çš„æ ¸å¿ƒçº¿ç¨‹ ã€‚è¿™ä¸ªçº¿ç¨‹å¯åŠ¨åä¼šç«‹å³è°ƒç”¨é˜Ÿåˆ—çš„ <code>take()</code> æ–¹æ³•ï¼Œå‘ç°ä»»åŠ¡æœªåˆ°æœŸï¼Œä»è€Œè¿›å…¥ <code>awaitNanos(delay)</code> çŠ¶æ€ï¼Œå®é™…ä¸Šå……å½“äº†è¯¥ä»»åŠ¡çš„â€œå®šæ—¶ç›‘å¬å™¨â€</p>
<p>æ ¹æ® <code>ThreadPoolExecutor</code> çš„é»˜è®¤ç­–ç•¥ï¼Œåªæœ‰åœ¨è°ƒç”¨ <code>execute()</code> æäº¤ä»»åŠ¡æ—¶æ‰ä¼šåˆ›å»ºçº¿ç¨‹ã€‚</p>
<ul>
<li><code>ensurePrestart()</code> å†…éƒ¨é€šå¸¸ä¼šè°ƒç”¨ <code>addWorker(null, true)</code>ï¼ˆæˆ–è€…ç±»ä¼¼çš„ <code>prestartCoreThread()</code> é€»è¾‘ï¼‰ã€‚</li>
<li>å®ƒçš„ç›®æ ‡æ˜¯ä¿è¯ï¼šåªè¦é˜Ÿåˆ—é‡Œæœ‰ä»»åŠ¡ï¼Œæ± å­é‡Œå°±å¿…é¡»è‡³å°‘æœ‰ä¸€ä¸ªçº¿ç¨‹åœ¨ <code>take()</code> ä¸Šé˜»å¡ç­‰å¾…ï¼Œæˆ–è€…çº¿ç¨‹æ•°å·²ç»è¾¾åˆ°äº† <code>corePoolSize</code> çš„ä¸Šé™</li>
</ul>
<h4 data-id="heading-9">5.2 ä»»åŠ¡æ‰§è¡Œä¸é‡è°ƒåº¦çš„é—­ç¯é€»è¾‘</h4>
<p>STPEçš„ä»»åŠ¡æ‰§è¡Œå¹¶éä¸€æ¬¡æ€§çš„ç®€å•è°ƒç”¨ï¼Œè€Œæ˜¯ä¸€ä¸ªæ¶‰åŠçŠ¶æ€è½¬æ¢ã€è®¡ç®—ã€å†å…¥é˜Ÿçš„é—­ç¯è¿‡ç¨‹ã€‚</p>
<p>å½“ä¸€ä¸ªå·¥ä½œçº¿ç¨‹ä»<code>DelayedWorkQueue</code>ä¸­è·å–ä»»åŠ¡åï¼Œå®ƒä¼šè°ƒç”¨<code>ScheduledFutureTask</code>çš„<code>run()</code>æ–¹æ³•ã€‚å…¶å†…éƒ¨æ‰§è¡Œé€»è¾‘å¦‚ä¸‹ ï¼š</p>
<pre><code class="hljs language-scss" lang="scss"> Â  Â  Â  Â public void <span class="hljs-built_in">run</span>() {
 Â  Â  Â  Â  Â  Â <span class="hljs-comment">// åˆ¤æ–­æ˜¯ä¸æ˜¯å‘¨æœŸæ€§ä»»åŠ¡</span>
 Â  Â  Â  Â  Â  Â boolean periodic = <span class="hljs-built_in">isPeriodic</span>();
 Â  Â  Â  Â  Â  Â <span class="hljs-comment">// åˆ¤æ–­å½“å‰ä»»åŠ¡æ˜¯å¦å¯ä»¥è¿è¡Œ</span>
 Â  Â  Â  Â  Â  Â if (!canRunInCurrentRunState(periodic))
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-built_in">cancel</span>(false);
 Â  Â  Â  Â  Â  Â else if (!periodic)
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-comment">// ä¸€æ¬¡æ€§ä»»åŠ¡ç›´æ¥æ‰§è¡Œ</span>
 Â  Â  Â  Â  Â  Â  Â  Â ScheduledFutureTask<span class="hljs-selector-class">.super</span><span class="hljs-selector-class">.run</span>();
 Â  Â  Â  Â  Â  Â else if (ScheduledFutureTask.super.runAndReset()) {
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-comment">// å‘¨æœŸæ€§ä»»åŠ¡å¤„ç†</span>
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-comment">// è®¾ç½®ä¸‹ä¸€æ¬¡æ‰§è¡Œæ—¶é—´</span>
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-built_in">setNextRunTime</span>();
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-comment">// é‡æ–°åŠ å…¥ä»»åŠ¡é˜Ÿåˆ—</span>
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-built_in">reExecutePeriodic</span>(outerTask);
 Â  Â  Â  Â  Â   }
 Â  Â  Â   }
</code></pre>
<p><strong>æ‰§è¡Œæµç¨‹è§£æ:</strong></p>
<ol>
<li>
<p><strong>çŠ¶æ€æ£€æŸ¥</strong>ï¼šç¡®è®¤å½“å‰çº¿ç¨‹æ± çŠ¶æ€å…è®¸ä»»åŠ¡è¿è¡Œã€‚</p>
</li>
<li>
<p><strong>ä¸€æ¬¡æ€§ä»»åŠ¡å¤„ç†</strong>ï¼šå¦‚æœä¸æ˜¯å‘¨æœŸæ€§ä»»åŠ¡ï¼Œç›´æ¥è°ƒç”¨çˆ¶ç±»çš„<code>FutureTask.run()</code>æ‰§è¡Œã€‚</p>
</li>
<li>
<p><strong>å‘¨æœŸæ€§ä»»åŠ¡å¤„ç†</strong>ï¼šè°ƒç”¨<code>runAndReset()</code>ã€‚è¿™æ˜¯ä¸€ä¸ªå…³é”®æ–¹æ³•ï¼Œå®ƒæ‰§è¡Œä»»åŠ¡é€»è¾‘ä½†ä¸è®¾ç½®æœ€ç»ˆçŠ¶æ€ï¼Œä»è€Œä½¿ä»»åŠ¡èƒ½å¤Ÿå¤šæ¬¡å¤ç”¨ã€‚</p>
</li>
<li>
<p><strong>è®¡ç®—ä¸‹æ¬¡æ—¶é—´</strong>ï¼šä»»åŠ¡æˆåŠŸå®Œæˆåï¼Œæ ¹æ®<code>period</code>çš„æ­£è´Ÿå·è°ƒç”¨<code>setNextRunTime()</code> ã€‚</p>
<ul>
<li><strong>Fixed Rate</strong>: time = time + periodã€‚</li>
<li><strong>Fixed Delay</strong>: time = triggerTime(-period)ã€‚</li>
</ul>
</li>
<li>
<p><strong>å†å…¥é˜Ÿï¼ˆreExecutePeriodicï¼‰</strong> ï¼šå°†æ›´æ–°äº†<code>time</code>çš„ä»»åŠ¡é‡æ–°æ’å…¥<code>DelayedWorkQueue</code>ä¸­ï¼Œå¹¶è°ƒç”¨<code>ensurePrestart()</code>ç¡®ä¿æœ‰è¶³å¤Ÿçš„çº¿ç¨‹æ¥å¤„ç†å®ƒ</p>
</li>
</ol>
<p><strong>å¼‚å¸¸çš„â€œé™é»˜æ­»äº¡â€é£é™©</strong></p>
<p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœä»»åŠ¡åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­æŠ›å‡ºå¼‚å¸¸ä¸”æœªè¢«å†…éƒ¨æ•è·ï¼Œ<code>runAndReset()</code>å°†è¿”å›<code>false</code>ï¼Œå¯¼è‡´åç»­çš„å†å…¥é˜Ÿæ­¥éª¤è¢«è·³è¿‡ ã€‚å¯¹äºè°ƒç”¨è€…è€Œè¨€ï¼Œè¿™æ„å‘³ç€å‘¨æœŸæ€§ä»»åŠ¡çªç„¶â€œæ¶ˆå¤±â€äº†ï¼Œä¸”ç”±äºSTPEä¸ä¼šä¸»åŠ¨å‘æ§åˆ¶å°æ‰“å°å¼‚å¸¸æ ˆï¼Œè¿™ç§æ•…éšœæå…·éšè”½æ€§ã€‚å› æ­¤ï¼Œ<strong>ç”Ÿäº§ç¯å¢ƒä¸‹çš„ä»»åŠ¡é€»è¾‘å¿…é¡»åŒ…è£¹åœ¨ä¸¥å¯†çš„<code>try-catch</code>å—ä¸­</strong></p>
<h2 data-id="heading-10">6.æ€»ç»“</h2>
<p><code>ScheduledThreadPoolExecutor</code>ä¸ä»…æ˜¯JDKä¸­ä¸€ä¸ªç®€å•çš„å¹¶å‘å·¥å…·ï¼Œå®ƒæ˜¯å¯¹è®¡ç®—æœºç§‘å­¦ä¸­æ—¶é—´ç®¡ç†ã€ä»»åŠ¡è°ƒåº¦ä»¥åŠåŒæ­¥ç†è®ºçš„æ·±åº¦å®è·µã€‚ä»åŸºäºå †çš„ä¼˜å…ˆé˜Ÿåˆ—è®¾è®¡ï¼Œåˆ°ç²¾å·§çš„Leader-FolloweråŒæ­¥æ¨¡å‹ï¼Œæ¯ä¸€ä¸ªè®¾è®¡ç»†èŠ‚éƒ½æŒ‡å‘äº†é«˜æ€§èƒ½ã€é«˜å¯é ä¸é«˜æ‰©å±•æ€§çš„ç»ˆæç›®æ ‡ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Python å®æˆ˜ï¼šè°ƒç”¨ RPA æ¥å£å®ç°å¤–éƒ¨ç¾¤æˆå‘˜è‡ªåŠ¨é‚€è¯·]]></title>    <link>https://juejin.cn/post/7605128056485543951</link>    <guid>https://juejin.cn/post/7605128056485543951</guid>    <pubDate>2026-02-11T06:34:01.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605128056485543951" data-draft-id="7605106957133905954" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content=" Python å®æˆ˜ï¼šè°ƒç”¨ RPA æ¥å£å®ç°å¤–éƒ¨ç¾¤æˆå‘˜è‡ªåŠ¨é‚€è¯·"/> <meta itemprop="keywords" content="API"/> <meta itemprop="datePublished" content="2026-02-11T06:34:01.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¼å¾®æ”¯æŒ1"/> <meta itemprop="url" content="https://juejin.cn/user/626071981280944"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
             Python å®æˆ˜ï¼šè°ƒç”¨ RPA æ¥å£å®ç°å¤–éƒ¨ç¾¤æˆå‘˜è‡ªåŠ¨é‚€è¯·
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/626071981280944/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¼å¾®æ”¯æŒ1
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-11T06:34:01.000Z" title="Wed Feb 11 2026 06:34:01 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<h2 data-id="heading-0"><strong>â€‹</strong> <strong>â€‹</strong> <strong>QiWeå¼€æ”¾å¹³å° Â· ä¸ªäººåç‰‡</strong></h2>
<p><strong>APIé©±åŠ¨ä¼å¾®</strong> <strong>å¤–éƒ¨ç¾¤</strong> <strong>è‡ªåŠ¨åŒ–ï¼Œè®©å¼€å‘æ›´é«˜æ•ˆ</strong></p>
<p>Â Â Â Â Â Â Â Â å®˜æ–¹ç«™ç‚¹ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.qiweapi.com%2F" title="https://www.qiweapi.com/" target="_blank" ref="nofollow noopener noreferrer">www.qiweapi.com</a></p>
<p>Â Â Â Â Â Â Â Â å¯¹æ¥é€šé“ï¼šè¿›å…¥å®˜æ–¹ç«™ç‚¹è”ç³»å®¢æœ</p>
<p>Â Â Â Â Â Â Â Â å›¢é˜Ÿå®šä½ï¼šä¼å¾®ç”Ÿæ€æ·±åº¦æœåŠ¡ï¼Œä¸“æ³¨ API+RPA èåˆæŠ€æœ¯æ–¹æ¡ˆ</p>
</blockquote>
<p>åœ¨ä¼ä¸šå¾®ä¿¡å®˜æ–¹ API ä¸­ï¼Œé‚€è¯·å¤–éƒ¨è”ç³»äººå…¥ç¾¤æœ‰è¯¸å¤šé™åˆ¶ï¼ˆå¦‚å¿…é¡»æ˜¯å¥½å‹ã€éœ€è¦ç”¨æˆ·æ‰‹åŠ¨ç¡®è®¤ç­‰ï¼‰ã€‚åŸºäº RPA åè®®çš„æ¥å£åˆ™å¯ä»¥é€šè¿‡æ¨¡æ‹Ÿæ“ä½œï¼Œå®ç°æ›´é«˜æ•ˆçš„<strong>ä¸»åŠ¨é‚€è¯·</strong>ã€‚</p>
<h4 data-id="heading-1">1. æ¥å£å‡†å¤‡</h4>
<p>æ ¹æ®æ–‡æ¡£ï¼Œæˆ‘ä»¬éœ€è¦å…³æ³¨ä»¥ä¸‹ä¸¤ä¸ªæ ¸å¿ƒåŠ¨ä½œï¼š</p>
<ul>
<li><strong>è·å–ç¾¤åˆ—è¡¨/è¯¦æƒ…</strong>ï¼šç¡®å®šç›®æ ‡å¤–éƒ¨ç¾¤çš„ <code>room_id</code>ã€‚</li>
<li><strong>å‘é€å¤–éƒ¨ç¾¤é‚€è¯·</strong>ï¼šè°ƒç”¨æ‹‰äººæ¥å£ã€‚</li>
</ul>
<h4 data-id="heading-2">2. åŸºç¡€è¯·æ±‚ç±»å®ç°</h4>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬åˆ©ç”¨ <code>requests</code> åº“ï¼ˆæˆ–å¼‚æ­¥çš„ <code>aiohttp</code>ï¼‰å°è£…ä¸€ä¸ªåŸºç¡€ç±»ï¼Œå¤„ç†æ–‡æ¡£ä¸­è¦æ±‚çš„ <code>Content-Type: application/json</code> å’Œé‰´æƒã€‚</p>
<pre><code class="hljs language-Python" lang="Python"><span class="hljs-keyword">import</span> requests
<span class="hljs-keyword">import</span> json

<span class="hljs-keyword">class</span> <span class="hljs-title class_">QiWeApiConnector</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, server_url, api_key</span>):
        self.server_url = server_url
        self.headers = {
            <span class="hljs-string">"Authorization"</span>: <span class="hljs-string">f"Bearer <span class="hljs-subst">{api_key}</span>"</span>,
            <span class="hljs-string">"Content-Type"</span>: <span class="hljs-string">"application/json"</span>
        }

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">_post</span>(<span class="hljs-params">self, method, data</span>):
        url = <span class="hljs-string">f"<span class="hljs-subst">{self.server_url}</span>/api/<span class="hljs-subst">{method}</span>"</span>
        <span class="hljs-keyword">try</span>:
            response = requests.post(url, headers=self.headers, data=json.dumps(data))
            <span class="hljs-keyword">return</span> response.json()
        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
            <span class="hljs-keyword">return</span> {<span class="hljs-string">"status"</span>: <span class="hljs-string">"error"</span>, <span class="hljs-string">"message"</span>: <span class="hljs-built_in">str</span>(e)}
</code></pre>
<h4 data-id="heading-3">3. åŠŸèƒ½å¼€å‘ï¼šä¸»åŠ¨æ‹‰äººå…¥å¤–éƒ¨ç¾¤</h4>
<p>åœ¨ <code>doc.qiweapi.com</code> çš„æ–‡æ¡£ä¸­ï¼Œæ‹‰äººæ¥å£é€šå¸¸å®šä¹‰ä¸º <code>AddSceneGroupMember</code>ã€‚ä»¥ä¸‹æ˜¯ Python å®ç°é€»è¾‘ï¼š</p>
<pre><code class="hljs language-Python" lang="Python">    <span class="hljs-keyword">def</span> <span class="hljs-title function_">invite_to_external_group</span>(<span class="hljs-params">self, room_id, wxids</span>):
        <span class="hljs-string">"""
        ä¸»åŠ¨æ‹‰äººè¿›å…¥å¤–éƒ¨ç¾¤
        :param room_id: å¤–éƒ¨ç¾¤ID
        :param wxids: å¾…åŠ å…¥æˆå‘˜çš„å¾®ä¿¡å·/wxidåˆ—è¡¨ (List)
        """</span>
        payload = {
            <span class="hljs-string">"room_id"</span>: room_id,
            <span class="hljs-string">"wxids"</span>: wxids,
            <span class="hljs-string">"reason"</span>: <span class="hljs-string">"æ¬¢è¿åŠ å…¥æŠ€æœ¯äº¤æµç¾¤"</span>  <span class="hljs-comment"># éƒ¨åˆ†ç‰ˆæœ¬æ”¯æŒè®¾ç½®é‚€è¯·ç†ç”±</span>
        }
        <span class="hljs-keyword">return</span> self._post(<span class="hljs-string">"AddSceneGroupMember"</span>, payload)

<span class="hljs-comment"># å®ä¾‹åŒ–è°ƒç”¨</span>
api = QiWeApiConnector(<span class="hljs-string">"http://127.0.0.1:8888"</span>, <span class="hljs-string">"your_admin_token"</span>)

<span class="hljs-comment"># ç¤ºä¾‹ï¼šå°†ä¸¤åæ–°å®¢æˆ·æ‹‰å…¥æŒ‡å®šçš„å¤–éƒ¨äº¤æµç¾¤</span>
result = api.invite_to_external_group(
    room_id=<span class="hljs-string">"210xxxxxxxx@chatroom"</span>, 
    wxids=[<span class="hljs-string">"wxid_user123"</span>, <span class="hljs-string">"wxid_user456"</span>]
)

<span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ‰§è¡Œç»“æœ: <span class="hljs-subst">{result}</span>"</span>)
</code></pre>
<h4 data-id="heading-4">4. æ·±åº¦è§£æï¼šå¦‚ä½•è·å–å¤–éƒ¨ç¾¤çš„ <code>room_id</code>ï¼Ÿ</h4>
<p>å¾ˆå¤šå¼€å‘è€…å¡åœ¨â€œä¸çŸ¥é“ç¾¤ IDâ€è¿™ä¸€æ­¥ã€‚åœ¨ RPA ä½“ç³»ä¸‹ï¼Œä½ å¯ä»¥é€šè¿‡ Python è„šæœ¬å®ç°<strong>å®æ—¶åŒæ­¥</strong>ï¼š</p>
<pre><code class="hljs language-Python" lang="Python">    <span class="hljs-keyword">def</span> <span class="hljs-title function_">sync_external_chat_rooms</span>(<span class="hljs-params">self</span>):
        <span class="hljs-string">"""
        è·å–å½“å‰è´¦å·åŠ å…¥çš„æ‰€æœ‰å¤–éƒ¨ç¾¤èŠåˆ—è¡¨
        """</span>
        res = self._post(<span class="hljs-string">"GetChatList"</span>, {<span class="hljs-string">"type"</span>: <span class="hljs-number">2</span>}) <span class="hljs-comment"># 2 é€šå¸¸ä»£è¡¨å¤–éƒ¨ç¾¤</span>
        <span class="hljs-keyword">if</span> res.get(<span class="hljs-string">"code"</span>) == <span class="hljs-number">200</span>:
            <span class="hljs-keyword">for</span> room <span class="hljs-keyword">in</span> res.get(<span class="hljs-string">"data"</span>, []):
                <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ç¾¤å: <span class="hljs-subst">{room[<span class="hljs-string">'nickname'</span>]}</span> | ID: <span class="hljs-subst">{room[<span class="hljs-string">'room_id'</span>]}</span>"</span>)
        <span class="hljs-keyword">return</span> res
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e96af14c24664728a973a6f4afa96ef4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LyB5b6u5pSv5oyBMQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771396441&amp;x-signature=l%2FbOg2QMlZB3Vzp18K10%2F17XxaY%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-5">5. æŠ€æœ¯éš¾ç‚¹ä¸é¿å‘æŒ‡å—</h4>
<ul>
<li><strong>wxid è½¬æ¢</strong>ï¼šç¡®ä¿ä½ ä¼ å…¥çš„æ˜¯ä¼ä¸šå¾®ä¿¡å†…éƒ¨çš„ <code>wxid</code>ã€‚å¦‚æœåªæœ‰æ‰‹æœºå·ï¼Œéœ€è¦å…ˆè°ƒç”¨ <code>SearchContactByPhone</code> æ¥å£è½¬æ¢ã€‚</li>
<li><strong>ç¾¤ç±»å‹æ ¡éªŒ</strong>ï¼šå¤–éƒ¨ç¾¤ï¼ˆExternal Groupï¼‰ä¸å†…éƒ¨ç¾¤åœ¨åº•å±‚åè®®ä¸Šæœ‰æœ¬è´¨åŒºåˆ«ï¼Œè°ƒç”¨æ¥å£æ—¶éœ€ç¡®è®¤ <code>room_id</code> çš„åç¼€æ˜¯å¦ç¬¦åˆå¤–éƒ¨ç¾¤ç‰¹å¾ï¼ˆé€šå¸¸åŒ…å« <code>@chatroom</code> æˆ– <code>@external</code>ï¼‰ã€‚</li>
<li><strong>é¢‘ç‡æ§åˆ¶</strong>ï¼šè™½ç„¶ RPA æ¥å£æ²¡æœ‰å®˜æ–¹ API é‚£æ ·çš„ä¸¥æ ¼é…é¢ï¼Œä½† Python è„šæœ¬æ‰§è¡Œé€Ÿåº¦æå¿«ã€‚å»ºè®®åœ¨æ‰¹é‡æ‹‰äººæ—¶åŠ å…¥ <code>time.sleep(2)</code>ï¼Œæ¨¡æ‹Ÿäººå·¥æ“ä½œé—´éš”ï¼Œè§„é¿é£æ§ã€‚</li>
</ul>
<hr/>
<h4 data-id="heading-6">æ€»ç»“</h4>
<p>é€šè¿‡ Python å¯¹ <code>doc.qiweapi.com</code> æ¥å£çš„äºŒæ¬¡å°è£…ï¼Œå¼€å‘è€…å¯ä»¥å°†åŸæœ¬å¤æ‚çš„åº•å±‚åè®®æ“ä½œç®€åŒ–ä¸ºå‡ è¡Œé€»è¾‘ä»£ç ã€‚è¿™ä¸ºæ„å»ºè‡ªåŠ¨åŒ–è¥é”€ç³»ç»Ÿã€ç¤¾ç¾¤ç®¡ç†æœºå™¨äººæä¾›äº†æå¤§çš„çµæ´»æ€§ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ•™ç¨‹ä¸Šæ–°ï½œå¾®ä¿¡AIå›¢é˜Ÿæå‡ºæ‰©æ•£è¯­è¨€æ¨¡å‹WeDLMï¼Œç›¸è¾ƒvLLMéƒ¨ç½²ARæ¨¡å‹å®ç°3å€æ¨ç†åŠ é€Ÿ]]></title>    <link>https://juejin.cn/post/7605136148592279579</link>    <guid>https://juejin.cn/post/7605136148592279579</guid>    <pubDate>2026-02-11T06:37:49.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605136148592279579" data-draft-id="7605114266024116275" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ•™ç¨‹ä¸Šæ–°ï½œå¾®ä¿¡AIå›¢é˜Ÿæå‡ºæ‰©æ•£è¯­è¨€æ¨¡å‹WeDLMï¼Œç›¸è¾ƒvLLMéƒ¨ç½²ARæ¨¡å‹å®ç°3å€æ¨ç†åŠ é€Ÿ"/> <meta itemprop="keywords" content="æ·±åº¦å­¦ä¹ ,äººå·¥æ™ºèƒ½,è…¾è®¯"/> <meta itemprop="datePublished" content="2026-02-11T06:37:49.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="OpenBayesè´å¼è®¡ç®—"/> <meta itemprop="url" content="https://juejin.cn/user/2793222200375607"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ•™ç¨‹ä¸Šæ–°ï½œå¾®ä¿¡AIå›¢é˜Ÿæå‡ºæ‰©æ•£è¯­è¨€æ¨¡å‹WeDLMï¼Œç›¸è¾ƒvLLMéƒ¨ç½²ARæ¨¡å‹å®ç°3å€æ¨ç†åŠ é€Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2793222200375607/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    OpenBayesè´å¼è®¡ç®—
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-11T06:37:49.000Z" title="Wed Feb 11 2026 06:37:49 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨è§„æ¨¡åŒ–éƒ¨ç½²å’Œå•†ä¸šè½åœ°åœºæ™¯ä¸­ï¼Œæ¨ç†é€Ÿåº¦çš„æƒé‡æ—¥ç›Šæå‡ï¼Œç”šè‡³åœ¨è®¸å¤šæƒ…å†µä¸‹è¶…è¿‡äº†å•çº¯çš„æ¨¡å‹å‚æ•°é‡ï¼Œæˆä¸ºå†³å®šå…¶å·¥ç¨‹ä»·å€¼çš„å…³é”®å› ç´ ã€‚å°½ç®¡è‡ªå›å½’ï¼ˆAutoregressiveï¼ŒARï¼‰ç”ŸæˆèŒƒå¼å‡­å€Ÿç¨³å®šæ€§å’Œæˆç†Ÿç”Ÿæ€ï¼Œä»æ˜¯å½“å‰ä¸»æµè§£ç æ–¹å¼ï¼Œ<strong>ä½†å…¶é€ token ç”Ÿæˆçš„å†…åœ¨æœºåˆ¶ï¼Œä½¿æ¨¡å‹åœ¨æ¨ç†é˜¶æ®µå‡ ä¹æ— æ³•å……åˆ†åˆ©ç”¨å¹¶è¡Œè®¡ç®—èµ„æºã€‚</strong> è¿™ä¸€é™åˆ¶åœ¨é•¿æ–‡æœ¬ç”Ÿæˆã€å¤æ‚æ¨ç†å’Œé«˜å¹¶å‘æœåŠ¡åœºæ™¯ä¸­å°¤ä¸ºçªå‡ºï¼Œä¹Ÿç›´æ¥æ¨é«˜äº†æ¨ç†å»¶è¿Ÿä¸ç®—åŠ›æˆæœ¬ã€‚</p>
<p>ä¸ºçªç ´è¿™ä¸€ç“¶é¢ˆï¼Œç ”ç©¶ç•Œè¿‘å¹´æ¥ä¸æ–­æ¢ç´¢å¹¶è¡Œè§£ç è·¯å¾„ï¼Œ<strong>å…¶ä¸­æ‰©æ•£è¯­è¨€æ¨¡å‹ï¼ˆDiffusion Language Modelsï¼ŒDLMsï¼‰å› å…¶ã€Œæ¯æ­¥ç”Ÿæˆå¤šä¸ª tokenã€çš„ç‰¹æ€§ï¼Œè¢«è§†ä¸ºæœ€å…·æ½œåŠ›çš„æ›¿ä»£æ–¹æ¡ˆä¹‹ä¸€ã€‚</strong> ç„¶è€Œï¼Œç†æƒ³ä¸ç°å®ä¹‹é—´ä»å­˜åœ¨æ˜æ˜¾é¸¿æ²Ÿï¼šåœ¨çœŸå®éƒ¨ç½²ç¯å¢ƒä¸­ï¼Œè®¸å¤š DLLMs å¹¶æœªå±•ç°å‡ºé¢„æœŸä¸­çš„é€Ÿåº¦ä¼˜åŠ¿ï¼Œç”šè‡³åœ¨æ€§èƒ½ä¸Šéš¾ä»¥è¶…è¶Šé«˜åº¦ä¼˜åŒ–çš„ AR æ¨ç†å¼•æ“ï¼ˆå¦‚ vLLMï¼‰ã€‚é—®é¢˜å¹¶éæºäºå¹¶è¡Œæœ¬èº«ï¼Œè€Œæ˜¯éšè—åœ¨æ¨¡å‹ç»“æ„ä¸ç³»ç»Ÿå±‚é¢çš„æ·±å±‚å†²çªä¹‹ä¸­â€”â€”<strong>å¤§é‡ç°æœ‰æ‰©æ•£æ–¹æ³•ä¾èµ–åŒå‘æ³¨æ„åŠ›æœºåˆ¶ï¼Œç ´åäº†å‰ç¼€ KV ç¼“å­˜è¿™ä¸€ç°ä»£æ¨ç†ç³»ç»Ÿçš„æ•ˆç‡åŸºçŸ³ï¼Œè¿«ä½¿æ¨¡å‹åå¤é‡ç®—ä¸Šä¸‹æ–‡ï¼ŒæŠµæ¶ˆäº†å¹¶è¡Œå¸¦æ¥çš„æ½œåœ¨æ”¶ç›Šã€‚</strong></p>
<p>åœ¨æ­¤èƒŒæ™¯ä¸‹ï¼Œ<strong>è…¾è®¯å¾®ä¿¡ AI å›¢é˜Ÿæå‡ºäº† WeDLMï¼ˆWeChat Diffusion Language Modelï¼‰ï¼Œ</strong> è¿™æ˜¯é¦–ä¸ªåœ¨å·¥ä¸šçº§æ¨ç†å¼•æ“ï¼ˆvLLMï¼‰ä¼˜åŒ–æ¡ä»¶ä¸‹ï¼Œæ¨ç†é€Ÿåº¦è¶…è¶ŠåŒç­‰ AR æ¨¡å‹çš„æ‰©æ•£è¯­è¨€æ¨¡å‹ã€‚å…¶æ ¸å¿ƒæ€æƒ³æ˜¯åœ¨ä¿æŒä¸¥æ ¼å› æœæ©ç çš„å‰æä¸‹ï¼Œè®©æ¯ä¸ªè¢«æ©ç ä½ç½®éƒ½èƒ½å¤Ÿæ¡ä»¶åŒ–äºå½“å‰æ‰€æœ‰å·²è§‚æµ‹çš„ tokenã€‚ä¸ºæ­¤ï¼Œç ”ç©¶äººå‘˜å¼•å…¥äº†ä¸€ç§æ‹“æ‰‘é‡æ’ï¼ˆTopological Reorderingï¼‰æ–¹æ³•ï¼Œåœ¨ä¸æ”¹å˜ token é€»è¾‘ä½ç½®çš„æƒ…å†µä¸‹ï¼Œå°†å·²è§‚æµ‹ token ç§»åŠ¨åˆ°ç‰©ç†ä¸Šçš„å‰ç¼€åŒºåŸŸã€‚</p>
<p>å®éªŒç»“æœè¡¨æ˜ï¼ŒWeDLM åœ¨ä¿æŒå¼ºè‡ªå›å½’ backbones ç”Ÿæˆè´¨é‡çš„åŒæ—¶ï¼Œå®ç°äº†æ˜¾è‘—çš„æ¨ç†åŠ é€Ÿï¼Œå…·ä½“è€Œè¨€ï¼Œå…¶åœ¨æ•°å­¦æ¨ç†ç­‰ä»»åŠ¡ä¸Šç›¸è¾ƒ vLLM éƒ¨ç½²çš„ AR æ¨¡å‹å®ç°äº† 3 å€ä»¥ä¸ŠåŠ é€Ÿï¼Œä½ç†µåœºæ™¯çš„æ¨ç†æ•ˆç‡æé€Ÿæ›´æ˜¯è¾¾åˆ° 10 å€ä»¥ä¸Šã€‚</p>
<p>ç›®å‰ï¼Œã€ŒWeDLM é«˜æ•ˆå¤§è¯­è¨€æ¨¡å‹è§£ç æ¡†æ¶ã€å·²ä¸Šçº¿ OpenBayes å®˜ç½‘çš„æ•™ç¨‹ç‰ˆå—ï¼Œç‚¹å‡»ä¸‹æ–¹é“¾æ¥å³å¯ä½“éªŒä¸€é”®éƒ¨ç½²æ•™ç¨‹ â¬‡ï¸</p>
<p><strong>æ•™ç¨‹é“¾æ¥ï¼š</strong></p>
<p><em><strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fgo.openbayes.com%2F9ooQJ" target="_blank" title="https://go.openbayes.com/9ooQJ" ref="nofollow noopener noreferrer">go.openbayes.com/9ooQJ</a></strong></em></p>
<p><strong>Demo è¿è¡Œ</strong></p>
<p><strong>01</strong></p>
<p><strong>Demo è¿è¡Œé˜¶æ®µ</strong></p>
<p>1.ç™»å½• OpenBayes.comï¼Œåœ¨ã€Œå…¬å…±æ•™ç¨‹ã€é¡µé¢ï¼Œé€‰æ‹©ã€ŒWeDLM é«˜æ•ˆå¤§è¯­è¨€æ¨¡å‹è§£ç æ¡†æ¶ã€æ•™ç¨‹ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4ba12501e86c4a0fb9bc2df216bc5044~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT3BlbkJheWVz6LSd5byP6K6h566X:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771396669&amp;x-signature=Qxz5WukftafNFd1Qq9c9QxXgtEE%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>2.é¡µé¢è·³è½¬åï¼Œç‚¹å‡»å³ä¸Šè§’ã€Œå…‹éš†ã€ï¼Œå°†è¯¥æ•™ç¨‹å…‹éš†è‡³è‡ªå·±çš„å®¹å™¨ä¸­ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4727f3045b1c4d6d96f1d0e49c48cb52~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT3BlbkJheWVz6LSd5byP6K6h566X:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771396669&amp;x-signature=3dSBSZcYV4%2FGPuAE085maf1x9X8%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>3.é€‰æ‹©ã€ŒNVIDIA GeForce RTX 5090ã€ä»¥åŠã€ŒPyTorchã€é•œåƒï¼ŒæŒ‰ç…§éœ€æ±‚é€‰æ‹©ã€ŒæŒ‰é‡ä»˜è´¹ã€æˆ–ã€ŒåŒ…æ—¥/å‘¨/æœˆã€ï¼Œç‚¹å‡»ã€Œç»§ç»­æ‰§è¡Œã€ã€‚æ–°ç”¨æˆ·ä½¿ç”¨ä¸‹æ–¹é‚€è¯·é“¾æ¥æ³¨å†Œï¼Œå³å¯è·å¾—æ»¡ Â¥10 èµ  Â¥10 ä¼˜æƒ åˆ¸ï¼Œæ›´æœ‰æœºä¼šè·å¾— Â¥15 èµ é‡‘ï¼</p>
<p>å°è´æ€»ä¸“å±é‚€è¯·é“¾æ¥ï¼ˆç›´æ¥å¤åˆ¶åˆ°æµè§ˆå™¨æ‰“å¼€ï¼‰ï¼š</p>
<p><strong><strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fgo.openbayes.com%2F9S6D******r" target="_blank" title="https://go.openbayes.com/9S6D******r" ref="nofollow noopener noreferrer">go.openbayes.com/9S6D******r</a></strong></strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d952164b764d4666a8068476e69c0a5b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT3BlbkJheWVz6LSd5byP6K6h566X:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771396669&amp;x-signature=9EtIZ7mPINwlePxg8VVxd4cJKTU%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cd938dfd5db140f3921f8cfb0089b9f6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT3BlbkJheWVz6LSd5byP6K6h566X:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771396669&amp;x-signature=Ykwy%2BGEjI2TZQPa45d7B73vhp5Q%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>4.ç­‰å¾…åˆ†é…èµ„æºï¼Œå½“çŠ¶æ€å˜ä¸ºã€Œè¿è¡Œä¸­ã€åï¼Œç‚¹å‡»ã€Œæ‰“å¼€å·¥ä½œç©ºé—´ã€è¿›å…¥ Jupyter Workspaceã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/336725070bd74f52a8765d2d28dddff9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT3BlbkJheWVz6LSd5byP6K6h566X:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771396669&amp;x-signature=ma35YJ54syg63h6ux3IlKInhDLA%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong>02</strong></p>
<p><strong>æ•ˆæœæ¼”ç¤º</strong></p>
<p>é¡µé¢è·³è½¬åï¼Œç‚¹å‡»å·¦ä¾§ README é¡µé¢ï¼Œè¿›å…¥åç‚¹å‡»ä¸Šæ–¹ã€Œè¿è¡Œã€ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1806815fa1d449e3ae0fdfaaa255516b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT3BlbkJheWVz6LSd5byP6K6h566X:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771396669&amp;x-signature=VKYM%2B%2B5P%2FLGJ9WHUuqE2CWzBysA%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/820b3fca18c94e5cb02dc40ec1386d52~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT3BlbkJheWVz6LSd5byP6K6h566X:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771396669&amp;x-signature=kEMYjIYeFmbtB7aLEa1RXgs6rms%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å¾…è¿è¡Œå®Œæˆï¼Œå³å¯ç‚¹å‡»å³ä¾§ API åœ°å€è·³è½¬è‡³ demo é¡µé¢ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5596b32541fb448ca50f05fe520f1ad4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT3BlbkJheWVz6LSd5byP6K6h566X:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771396669&amp;x-signature=HfuGhNlsjTKOLrAH82kA0%2BNo13Q%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/880889fb142843f0ad6c2947cac53df6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT3BlbkJheWVz6LSd5byP6K6h566X:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771396669&amp;x-signature=5igAYDz3an%2BKy5ZN4hajD9U6U%2FM%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong>æ•™ç¨‹é“¾æ¥ï¼š</strong></p>
<p><em><strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fgo.openbayes.com%2F9ooQJ" target="_blank" title="https://go.openbayes.com/9ooQJ" ref="nofollow noopener noreferrer">go.openbayes.com/9ooQJ</a></strong></em></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item>  </channel></rss>