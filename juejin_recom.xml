<?xml version="1.0" encoding="UTF-8"?><rss version="2.0">  <channel>      <title>æ˜é‡‘æ–‡ç« æ¨è</title>      <link>https://juejin.cn/recommended?sort=newest</link>      <description>ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…æˆé•¿çš„ç¤¾åŒº</description>      <generator>python juejin_recom.py @Pi20</generator>      <item>    <title><![CDATA[flex å¸ƒå±€å‡­ä»€ä¹ˆæˆä¸ºå‰ç«¯æ’ç‰ˆçš„å¤©èŠ±æ¿ï¼Ÿå®ƒè®©æˆ‘å‘Šåˆ«äº† float çš„æ‰€æœ‰å™©æ¢¦]]></title>    <link>https://juejin.cn/post/7598807837867409434</link>    <guid>https://juejin.cn/post/7598807837867409434</guid>    <pubDate>2026-01-25T08:53:39.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7598807837867409434" data-draft-id="7598827641307660339" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="flex å¸ƒå±€å‡­ä»€ä¹ˆæˆä¸ºå‰ç«¯æ’ç‰ˆçš„å¤©èŠ±æ¿ï¼Ÿå®ƒè®©æˆ‘å‘Šåˆ«äº† float çš„æ‰€æœ‰å™©æ¢¦"/> <meta itemprop="keywords" content="CSS,å‰ç«¯,é¢è¯•"/> <meta itemprop="datePublished" content="2026-01-25T08:53:39.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é£æ­¢ä½•å®‰å•Š"/> <meta itemprop="url" content="https://juejin.cn/user/2517239724512420"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            flex å¸ƒå±€å‡­ä»€ä¹ˆæˆä¸ºå‰ç«¯æ’ç‰ˆçš„å¤©èŠ±æ¿ï¼Ÿå®ƒè®©æˆ‘å‘Šåˆ«äº† float çš„æ‰€æœ‰å™©æ¢¦
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2517239724512420/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é£æ­¢ä½•å®‰å•Š
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-25T08:53:39.000Z" title="Sun Jan 25 2026 08:53:39 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;color:rgba(46,36,36,.87);overflow-x:hidden}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{margin-bottom:5px;font-size:30px;font-weight:500}.markdown-body h1:before{content:"#";margin-right:10px;color:#1976d2}.markdown-body h2{font-size:28px;font-weight:400;border-left:5px solid #454545;margin-top:20px;padding-left:10px;transition:all .3s ease-in-out}.markdown-body h2:hover{border-color:#1976d2}.markdown-body h3{font-size:24px;font-weight:400;margin-top:15px;padding-bottom:0}.markdown-body h4{font-size:20px;font-weight:500}.markdown-body h5{font-size:16px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body h2:first-letter,.markdown-body h3:first-letter,.markdown-body p:first-letter{text-transform:capitalize}.markdown-body em{text-emphasis:dot;text-emphasis-position:under}.markdown-body img{display:block;margin:0 auto!important;max-width:100%;border-radius:2px;box-shadow:0 2px 4px -1px rgba(0,0,0,.2),0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12)!important}.markdown-body hr{position:relative;width:98%;height:1px;border:none;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,#ddd,#999,#ddd);overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background:#fff;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center}.markdown-body code{font-weight:900;word-break:break-word;border-radius:2px;overflow-x:auto;font-size:.87em;padding:.065em .4em;background-color:#fbe5e1;color:#c0341d}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;border-radius:0 4px}.markdown-body pre&gt;code{font-weight:400;font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{margin:0 4px;text-decoration:none;color:#027fff;transition:all .3s ease-in-out;padding-bottom:4px;border-bottom:2px solid transparent}.markdown-body a:after{content:"";display:inline-block;width:18px;height:18px;margin-left:4px;vertical-align:middle;background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMiIgaGVpZ2h0PSIyMiI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIiBzdHJva2U9IiMwMjdGRkYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCI+PHBhdGggZD0iTTkuODE1IDYuNDQ4bDEuOTM2LTEuOTM2YzEuMzM3LTEuMzM2IDMuNTgtMS4yNTkgNS4wMTMuMTczIDEuNDMyIDEuNDMyIDEuNTEgMy42NzYuMTczIDUuMDEzbC0xLjQ1MiAxLjQ1Mi0uOTY4Ljk2OGMtMS4zMzcgMS4zMzYtMy41ODEgMS4yNTktNS4wMTMtLjE3MyIvPjxwYXRoIGQ9Ik0xMS4yNjcgMTUuMzY3bC0xLjkzNiAxLjkzNmMtMS4zMzYgMS4zMzctMy41OCAxLjI2LTUuMDEyLS4xNzMtMS40MzItMS40MzItMS41MS0zLjY3Ni0uMTczLTUuMDEybDEuNDUyLTEuNDUyLjk2OC0uOTY4YzEuMzM2LTEuMzM3IDMuNTgtMS4yNiA1LjAxMi4xNzMiLz48L2c+PC9zdmc+);background-size:cover;background-repeat:no-repeat}.markdown-body a:hover{border-color:#027fff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body a.footnote-backref:after,.markdown-body a.footnote-ref:after,.markdown-body sup a:after{display:none!important}.markdown-body table{margin:0 auto 10px;font-size:12px;width:auto;max-width:100%;overflow:auto;border:2px solid #c6c6c6}.markdown-body table img{box-shadow:none!important}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body del{color:rgba(0,0,0,.6)}.markdown-body blockquote{position:relative;color:#666;padding:5px 23px 1px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:hsla(0,0%,78.4%,.12);transition:all .2s ease-in-out}.markdown-body blockquote:hover{border-color:#1976d2}.markdown-body blockquote:after,.markdown-body blockquote:before{position:absolute;font-size:24px;font-weight:800;line-height:24px;color:#cbcbcb;opacity:.6}.markdown-body blockquote:before{content:"â€œ";top:4px;left:6px}.markdown-body blockquote:after{content:"â€";right:8px;bottom:-8px}.markdown-body blockquote&gt;p,.markdown-body blockquote blockquote{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body details{outline:none;border:none;border-left:4px solid #1976d2;padding-left:10px;margin-left:4px}.markdown-body details summary{cursor:pointer;border:none;outline:none;background:#fff;margin:0 -17px}.markdown-body details summary:hover::-webkit-details-marker{color:#1976d2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ğŸ“ å‰è¨€</h2>
<p>è¿˜åœ¨ä¸ºè°ƒä¸ªé¡µé¢å¸ƒå±€ç†¬å¤§å¤œï¼Ÿç”¨ <code>float</code> æ’ä¸ªç‰ˆï¼Œå…ƒç´ åˆ°å¤„ä¹±è·‘ï¼›ç”¨ <code>position</code> å®šä¸ªä½ï¼Œç¨å¾®æ”¹ç‚¹ä¸œè¥¿å°±å…¨ä¹±å¥—ã€‚ä¸æƒ³ç†¬å¤œäº†ğŸ˜­ï¼</p>
<p>åˆ«æ…Œï¼Œä»Šå¤©å’±ä»¬å°±æ¥èŠèŠå‰ç«¯ç•Œçš„ <code>â€œæ•‘æ˜Ÿâ€</code> â€” <strong>Flex å¼¹æ€§å¸ƒå±€</strong>ã€‚å®ƒå°±åƒä¸€ä¸ªè´´å¿ƒçš„æ”¶çº³å¸ˆï¼Œä¸ç”¨ç»•å¼¯å­ï¼Œä¸ç”¨æ­»æŠ åƒç´ ï¼Œå‡ è¡Œä»£ç å°±èƒ½æŠŠå…ƒç´ æ‘†å¾—æ•´æ•´é½é½ï¼Œä»æ­¤å‘Šåˆ« <strong>â€œå ç½—æ±‰â€</strong> å¼çš„å¸ƒå±€å™©æ¢¦ã€‚</p>
<h3 data-id="heading-1">ğŸ”§ <strong>åˆè¯† Flexï¼šä¸€ä¸ªå®¹å™¨æå®šæ‰€æœ‰æ’åˆ—</strong></h3>
<p><code>Flex</code> å¸ƒå±€çš„æ ¸å¿ƒæ€æƒ³å¾ˆç®€å•ï¼š<strong>å…ˆè®©çˆ¶å®¹å™¨å˜èº«æˆå¼¹æ€§å®¹å™¨ï¼Œå‰©ä¸‹çš„äº‹æƒ…å°±äº¤ç»™å®ƒæ¥å®‰æ’</strong>ã€‚åªéœ€è¦ä¸€è¡Œä»£ç ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.box</span> {
    <span class="hljs-attribute">display</span>: flex;
}
</code></pre>
<p>é…ä¸Š<code>html</code>:</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"box"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"item"</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"item"</span>&gt;</span>2<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"item"</span>&gt;</span>3<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3a25a910690145188c439a7064b4f20c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOO5q2i5L2V5a6J5ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769936019&amp;x-signature=Sr1szGYkoJROUPq6k8L9fF%2FBry8%3D" alt="image.png" loading="lazy"/></p>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œå­å…ƒç´ ä¼šè‡ªåŠ¨åœ¨æ°´å¹³æ–¹å‘ä¸Šæ’æˆä¸€è¡Œï¼Œè¿™å°±æ˜¯<code>Flex</code>çš„<strong>é»˜è®¤ä¸»è½´æ–¹å‘</strong>ã€‚</p>
<h3 data-id="heading-2">ğŸ¯ <strong>ä¸»è½´ä¸äº¤å‰è½´ï¼šå¸ƒå±€çš„ â€œæŒ‡æŒ¥æ£’â€</strong></h3>
<p><code>Flex å®¹å™¨</code>æœ‰ä¸¤æ ¹ â€œæŒ‡æŒ¥æ£’â€ï¼š<strong>ä¸»è½´</strong>ï¼ˆé»˜è®¤æ°´å¹³æ–¹å‘ï¼‰å’Œ<strong>äº¤å‰è½´</strong>ï¼ˆé»˜è®¤å‚ç›´æ–¹å‘ï¼‰ã€‚</p>
<ul>
<li><strong>justify-content</strong> ç®¡ä¸»è½´ä¸Šçš„æ’åˆ—æ–¹å¼ï¼Œæ¯”å¦‚ <code>space-evenly</code> å¯ä»¥è®©å…ƒç´ ä¹‹é—´çš„é—´è·å®Œå…¨ç›¸ç­‰ã€‚</li>
<li><strong>align-items</strong> ç®¡äº¤å‰è½´ä¸Šçš„å¯¹é½æ–¹å¼ï¼Œæ¯”å¦‚ <code>center</code> å¯ä»¥è®©å…ƒç´ åœ¨å‚ç›´æ–¹å‘ä¸Šå±…ä¸­ã€‚</li>
</ul>
<p>å¦‚æœä½ æƒ³æŠŠ<strong>ä¸»è½´æ”¹æˆå‚ç›´æ–¹å‘</strong>ï¼Œåªéœ€è¦ç»™å®¹å™¨åŠ ä¸€å¥ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.box</span> {
    <span class="hljs-attribute">flex-direction</span>: column;
}
</code></pre>
<p>å°±åƒ <code>index.html</code> é‡Œè¿™æ ·è®¾ç½®åï¼Œä¸‰ä¸ªå½©è‰²å°æ–¹å—å°±ä¼šä¹–ä¹–åœ°å‚ç›´æ’åˆ—ï¼Œå¹¶ä¸”åœ¨å®¹å™¨é‡Œå‡åŒ€åˆ†å¸ƒã€å±…ä¸­å¯¹é½ã€‚</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.box</span>{
    <span class="hljs-attribute">width</span>: <span class="hljs-number">800px</span>;
    <span class="hljs-attribute">height</span>: <span class="hljs-number">400px</span>;
    <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#000</span>;
    <span class="hljs-attribute">display</span>: flex;
    <span class="hljs-attribute">flex-direction</span>: column;
    <span class="hljs-attribute">justify-content</span>: space-evenly;
    <span class="hljs-attribute">align-items</span>: center;
}
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0291053845554872af767f02ded81239~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOO5q2i5L2V5a6J5ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769936019&amp;x-signature=kxiTmfr1uKvO3zSq0h1noxlQwxw%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-3">ğŸ§© <strong>æ¢è¡Œä¸å¤šè½´æ§åˆ¶ï¼šç©ºé—´ä¸å¤Ÿï¼Ÿæ‹†åˆ†æˆè¡Œï¼</strong></h3>
<p>å¦‚æœ<strong>å­å…ƒç´ å¤ªå¤š</strong>ï¼Œä¸€è¡Œæ”¾ä¸ä¸‹æ€ä¹ˆåŠï¼Ÿåˆ«æ‹…å¿ƒï¼Œ<code>flex-wrap: wrap</code> å¯ä»¥è®©å…ƒç´ è‡ªåŠ¨æ¢è¡Œï¼Œå°±åƒ <code>index2.html</code> é‡Œè¿™æ ·ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.box</span> {
    <span class="hljs-attribute">flex-wrap</span>: wrap;
    <span class="hljs-attribute">align-content</span>: space-around;
}
</code></pre>
<p><strong>è¡¥å……ï¼š</strong> <code>align-content</code> è¿™ä¸ªå±æ€§æ˜¯ä¸“é—¨ç”¨æ¥æ§åˆ¶æ¢è¡Œåï¼Œå¤šè¡Œå…ƒç´ ä¹‹é—´çš„é—´è·çš„ï¼Œæ¯”å¦‚ <code>space-around</code> å¯ä»¥è®©<strong>æ¯ä¸€è¡Œä¸Šä¸‹éƒ½æœ‰å‡åŒ€çš„ç•™ç™½</strong>ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/60cbd390bd19455b930f6a4eb87fdbe0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOO5q2i5L2V5a6J5ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769936019&amp;x-signature=LgAlOGFQf%2FkYETS6pqys4Knq93g%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-4">ğŸ“Š <strong>ç©ºé—´åˆ†é…ï¼šè°èƒ–è°ç˜¦ï¼Œæˆ‘è¯´äº†ç®—</strong></h3>
<p>å½“å®¹å™¨æœ‰å¤šä½™ç©ºé—´æ—¶ï¼Œ<code>flex-grow</code> å°±ä¼šæ´¾ä¸Šç”¨åœºã€‚å®ƒå°±åƒç»™å­å…ƒç´ åˆ†é… <strong>â€œé•¿èƒ–â€</strong> çš„åé¢ï¼Œæ•°å€¼è¶Šå¤§ï¼Œå çš„ç©ºé—´å°±è¶Šå¤šã€‚æ¯”å¦‚åœ¨ <code>index3.html</code> é‡Œï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.item</span><span class="hljs-selector-pseudo">:nth-child</span>(<span class="hljs-number">1</span>){
    <span class="hljs-attribute">flex-grow</span>: <span class="hljs-number">1</span>;
}
<span class="hljs-selector-class">.item</span><span class="hljs-selector-pseudo">:nth-child</span>(<span class="hljs-number">2</span>){
    <span class="hljs-attribute">flex-grow</span>: <span class="hljs-number">2</span>;
}
<span class="hljs-selector-class">.item</span><span class="hljs-selector-pseudo">:nth-child</span>(<span class="hljs-number">3</span>){
    <span class="hljs-attribute">flex-grow</span>: <span class="hljs-number">1</span>;
}
</code></pre>
<p>è¿™å°±æ„å‘³ç€ï¼Œä¸­é—´çš„<strong>ç»¿è‰²æ–¹å—ä¼š â€œé•¿èƒ–â€ ä¸¤å€</strong>ï¼Œå·¦å³ä¸¤ä¸ªæ–¹å—å„ <strong>â€œé•¿èƒ–â€ ä¸€å€</strong>ï¼Œå®Œç¾å¡«æ»¡æ•´ä¸ªå®¹å™¨ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/51d27afc28334eebb57bf970e84c84f4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOO5q2i5L2V5a6J5ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769936019&amp;x-signature=4IZW%2F3IP5jZNsS6m9uIDVsX8a64%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-5">ğŸ¨ <strong>ä¸ªæ€§åŒ–å®šåˆ¶ï¼šç»™æŸä¸ªå…ƒç´ å¼€å°ç¶</strong></h3>
<p>å¦‚æœæƒ³è®©<strong>æŸä¸ªå­å…ƒç´ </strong>åœ¨äº¤å‰è½´ä¸Šçš„å¯¹é½æ–¹å¼<strong>ä¸ä¼—ä¸åŒ</strong>ï¼Œ<code>align-self</code> å°±æ˜¯ä½ çš„ä¸“å±å·¥å…·ã€‚å°±åƒ <code>index4.html</code> é‡Œè¿™æ ·ï¼Œåªæœ‰ä¸­é—´çš„ç»¿è‰²æ–¹å—è¢«å•ç‹¬è®¾ç½®æˆäº† <code>align-self: center</code>ï¼Œåœ¨å‚ç›´æ–¹å‘ä¸Šå±…ä¸­ï¼Œè€Œå…¶ä»–æ–¹å—ä¿æŒé»˜è®¤å¯¹é½ã€‚</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.item</span><span class="hljs-selector-pseudo">:nth-child</span>(<span class="hljs-number">2</span>){
    <span class="hljs-attribute">align-self</span>: center;
}
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c34011ab74614f1b871a8beec01f3b32~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOO5q2i5L2V5a6J5ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769936019&amp;x-signature=rnNTomEpNU%2BLgveZHFc4gxW2NI4%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-6">ğŸŒ <strong>å®æˆ˜ç‹è€…ï¼šä¸‰æ å¸ƒå±€è½»æ¾æ‹¿æ</strong></h3>
<p><strong>Flex å¸ƒå±€</strong>æœ€ç»å…¸çš„åº”ç”¨åœºæ™¯ä¹‹ä¸€å°±æ˜¯<strong>ä¸‰æ å¸ƒå±€</strong>ã€‚æ¯”å¦‚ <code>three.html</code> è¿™ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬å¯ä»¥è½»æ¾å®ç° <strong>â€œå·¦ä¾§ + ä¸»ä½“ + å³ä¾§â€</strong> çš„å¸ƒå±€ï¼Œè€Œä¸”ä¸»ä½“éƒ¨åˆ†ä¼šè‡ªåŠ¨å¡«å……å‰©ä½™ç©ºé—´ã€‚</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.page</span> {
    <span class="hljs-attribute">height</span>: <span class="hljs-number">200px</span>;
    <span class="hljs-attribute">display</span>: flex;
}
<span class="hljs-selector-class">.left</span>, <span class="hljs-selector-class">.right</span> {
    <span class="hljs-attribute">width</span>: <span class="hljs-number">200px</span>;
    <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#e17a7a</span>;
}
<span class="hljs-selector-class">.main</span> {
    <span class="hljs-attribute">background-color</span>: aquamarine;
    <span class="hljs-attribute">flex</span>: <span class="hljs-number">1</span>;
}
<span class="hljs-selector-class">.left</span> {
    <span class="hljs-attribute">order</span>: -<span class="hljs-number">1</span>;
}
</code></pre>
<p>è¿™é‡Œçš„ <code>flex: 1</code> è®©ä¸»ä½“éƒ¨åˆ†<strong>è‡ªåŠ¨å æ»¡å‰©ä½™ç©ºé—´</strong>ï¼Œ<code>order: -1</code> åˆ™æŠŠå·¦ä¾§æ æå‰ï¼Œå³ä½¿å®ƒåœ¨ HTML ç»“æ„é‡Œæ˜¯å†™åœ¨ä¸»ä½“åé¢çš„ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/66a9c80b9ce64437932b604955991553~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOO5q2i5L2V5a6J5ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769936019&amp;x-signature=3Kc9b9A%2B2Zk0MVFDW74jTWV6IZ8%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-7">âœ¨ ç»“è¯­</h2>
<p><code>Flex å¸ƒå±€</code>å°±åƒä¸€æŠŠ<strong>ä¸‡èƒ½é’¥åŒ™</strong>ï¼Œä»ç®€å•çš„å±…ä¸­å¯¹é½åˆ°å¤æ‚çš„å“åº”å¼å¸ƒå±€ï¼Œå®ƒéƒ½èƒ½è½»æ¾æå®šã€‚</p>
<p>åªè¦æŒæ¡äº† <code>display: flex</code>ã€<code>justify-content</code>ã€<code>align-items</code> è¿™äº›<strong>æ ¸å¿ƒå±æ€§</strong>ï¼Œå†åŠ ä¸Š <code>flex-grow</code>ã€<code>order</code> è¿™äº› <strong>â€œè°ƒå‘³å‰‚â€</strong>ï¼Œä½ å°±èƒ½ä»å¸ƒå±€ â€œå°ç™½â€ ç§’å˜ â€œå¤§ç¥â€ã€‚</p>
<blockquote>
<p><strong>å¿«å»è®©ä½ çš„é¡µé¢å…ƒç´ éƒ½ä¹–ä¹–å¬è¯å§ï¼</strong></p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[LeetCode 6. Z å­—å½¢å˜æ¢ï¼šä¸¤ç§è§£æ³•æ·±åº¦è§£æä¸ä¼˜åŒ–]]></title>    <link>https://juejin.cn/post/7598818096754163763</link>    <guid>https://juejin.cn/post/7598818096754163763</guid>    <pubDate>2026-01-25T09:14:59.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7598818096754163763" data-draft-id="7598881914202193970" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="LeetCode 6. Z å­—å½¢å˜æ¢ï¼šä¸¤ç§è§£æ³•æ·±åº¦è§£æä¸ä¼˜åŒ–"/> <meta itemprop="keywords" content="å‰ç«¯,TypeScript,ç®—æ³•"/> <meta itemprop="datePublished" content="2026-01-25T09:14:59.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Wect"/> <meta itemprop="url" content="https://juejin.cn/user/4185164878720068"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            LeetCode 6. Z å­—å½¢å˜æ¢ï¼šä¸¤ç§è§£æ³•æ·±åº¦è§£æä¸ä¼˜åŒ–
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4185164878720068/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Wect
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-25T09:14:59.000Z" title="Sun Jan 25 2026 09:14:59 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:14px;overflow-x:hidden;color:var(--cyanosis-base-color);transition:color .35s;--cyanosis-base-color:#353535;--cyanosis-title-color:#005bb7;--cyanosis-strong-color:#2196f3;--cyanosis-em-color:#4fc3f7;--cyanosis-del-color:#ccc;--cyanosis-link-color:#3da8f5;--cyanosis-linkh-color:#007fff;--cyanosis-border-color:#bedcff;--cyanosis-border-color-2:#ececec;--cyanosis-bg-color:#fff;--cyanosis-blockquote-color:#8c8c8c;--cyanosis-blockquote-bg-color:#f0fdff;--cyanosis-code-color:#c2185b;--cyanosis-code-bg-color:#fff4f4;--cyanosis-code-pre-color:#f8f8f8;--cyanosis-table-border-color:#c3e0fd;--cyanosis-table-th-color:#dff0ff;--cyanosis-table-tht-color:#005bb7;--cyanosis-table-tr-nc-color:#f7fbff;--cyanosis-table-trh-color:#e0edf7;--cyanosis-slct-title-color:#005bb7;--cyanosis-slct-titlebg-color:rgba(175,207,247,0.25);--cyanosis-slct-text-color:#c80000;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#e8ebec;--cyanosis-slct-codebg-color:#ffeaeb;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body.__dark{--cyanosis-base-color:#cacaca;--cyanosis-title-color:#ddd;--cyanosis-strong-color:#fe9900;--cyanosis-em-color:#ffd28e;--cyanosis-del-color:#ccc;--cyanosis-link-color:#ffb648;--cyanosis-linkh-color:#fe9900;--cyanosis-border-color:#ffe3ba;--cyanosis-border-color-2:#ffcb7b;--cyanosis-bg-color:#2f2f2f;--cyanosis-blockquote-color:#c7c7c7;--cyanosis-blockquote-bg-color:rgba(255,199,116,0.1);--cyanosis-code-color:#000;--cyanosis-code-bg-color:#ffcb7b;--cyanosis-code-pre-color:rgba(255,227,185,0.5);--cyanosis-table-border-color:#fe9900;--cyanosis-table-th-color:#ffb648;--cyanosis-table-tht-color:#000;--cyanosis-table-tr-nc-color:#6d5736;--cyanosis-table-trh-color:#947443;--cyanosis-slct-title-color:#000;--cyanosis-slct-titlebg-color:#fe9900;--cyanosis-slct-text-color:#00c888;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#000;--cyanosis-slct-codebg-color:#ffcb7b;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body h1{padding-bottom:4px;font-size:30px}.markdown-body h1,.markdown-body h2{margin-top:36px;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);transition:color .35s}.markdown-body h2{position:relative;padding-left:10px;padding-right:10px;padding-bottom:10px;font-size:24px;border-bottom:1px solid var(--cyanosis-border-color-2)}.markdown-body h2:before{content:"ã€Œ";position:absolute;top:-6px;left:-14px}.markdown-body h2:after{content:"ã€";position:relative;top:6px;right:auto}.markdown-body h3{position:relative;padding-bottom:0;margin-top:30px;margin-bottom:10px;font-size:20px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h3:before{content:"Â»";padding-right:6px;color:var(--cyanosis-strong-color)}.markdown-body h4{margin-top:24px;font-size:16px}.markdown-body h4,.markdown-body h5{padding-bottom:0;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h5{margin-top:18px;font-size:14px}.markdown-body h6{padding-bottom:0;margin-top:12px;margin-bottom:10px;font-size:12px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body p{line-height:inherit;margin-top:16px;margin-bottom:16px}.markdown-body img{max-width:100%}.markdown-body hr{position:relative;width:98%;height:1px;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,var(--cyanosis-link-color),rgba(255,0,0,.3),hsla(0,0%,100%,.1),rgba(255,0,0,.3),var(--cyanosis-link-color));border-width:0;overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background-color:var(--cyanosis-bg-color);background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center;transition:background-color .5s}.markdown-body code{padding:.065em .4em;font-size:.87em;color:var(--cyanosis-code-color);word-break:break-word;overflow-x:auto;background-color:var(--cyanosis-code-bg-color);border-radius:2px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;padding:16px 12px;margin:0;font-size:12px;color:#333;word-break:normal;overflow-x:auto;background:var(--cyanosis-code-pre-color)}.markdown-body pre&gt;code::-webkit-scrollbar{width:4px;height:4px}.markdown-body pre&gt;code::-webkit-scrollbar-track{background-color:var(--cyanosis-border-color)}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:var(--cyanosis-strong-color);border-radius:10px}.markdown-body a{position:relative;text-decoration:none;color:var(--cyanosis-link-color);border-bottom:1px solid var(--cyanosis-border-color)}.markdown-body a:hover{border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body a:active,.markdown-body a:hover{color:var(--cyanosis-linkh-color)}.markdown-body a:after{position:absolute;content:"";top:100%;left:0;width:100%;opacity:0;border-bottom:1px solid var(--cyanosis-border-color);transition:top .3s,opacity .3s;transform:translateZ(0)}.markdown-body a:hover:after{top:0;opacity:1;border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid var(--cyanosis-table-border-color);border-spacing:0;border-collapse:collapse}.markdown-body table thead{color:#000;text-align:left;font-size:14px;background:#f6f6f6}.markdown-body table tr:nth-child(2n){background-color:var(--cyanosis-table-tr-nc-color)}.markdown-body table tr:hover{background-color:var(--cyanosis-table-trh-color)}.markdown-body table td,.markdown-body table th{padding:12px 8px;line-height:24px;border:1px solid var(--cyanosis-table-border-color)}.markdown-body table th{color:var(--cyanosis-table-tht-color);background-color:var(--cyanosis-table-th-color)}.markdown-body table td{min-width:120px}.markdown-body blockquote{color:var(--cyanosis-blockquote-color);border-left:4px solid var(--cyanosis-strong-color);background-color:var(--cyanosis-blockquote-bg-color);padding:1px 20px;margin:22px 0;transition:color .35s}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body b,.markdown-body blockquote&gt;b,.markdown-body blockquote&gt;strong,.markdown-body strong{color:var(--cyanosis-strong-color)}.markdown-body em,.markdown-body i{color:var(--cyanosis-em-color)}.markdown-body del{color:var(--cyanosis-del-color)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:4px}.markdown-body ol li{padding-left:6px}.markdown-body details&gt;summary{outline:none;color:var(--cyanosis-title-color);font-size:20px;font-weight:bolder;border-bottom:1px solid var(--cyanosis-border-color);cursor:pointer}.markdown-body details&gt;p{padding:10px 20px;margin:10px 0 0;color:#666;background-color:var(--cyanosis-blockquote-bg-color);border:2px dashed var(--cyanosis-strong-color)}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection{color:var(--cyanosis-slct-title-color);background-color:var(--cyanosis-slct-titlebg-color)}.markdown-body ol li::selection,.markdown-body p::selection,.markdown-body ul li::selection{color:var(--cyanosis-slct-text-color);background-color:var(--cyanosis-slct-bg-color)}.markdown-body a::selection,.markdown-body b::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:var(--cyanosis-slct-elbg-color)}.markdown-body del::selection{color:var(--cyanosis-slct-del-color);background-color:var(--cyanosis-slct-elbg-color)}.markdown-body table thead th::selection{background-color:transparent}.markdown-body table tbody td::selection{background-color:var(--cyanosis-slct-bg-color)}.markdown-body code::selection{background-color:var(--cyanosis-slct-codebg-color)}.markdown-body pre&gt;code::selection{background-color:var(--cyanosis-slct-prebg-color)}.markdown-body .contains-task-list{padding-left:14px;list-style:none}.markdown-body .contains-task-list input[type=checkbox]{position:relative}.markdown-body .contains-task-list input[type=checkbox]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;width:inherit;height:inherit;background:#f0f8ff;border:1px solid #add6ff;border-radius:2px;box-sizing:border-box;z-index:1}.markdown-body .contains-task-list input[type=checkbox]:checked:after{content:"âœ“";position:absolute;top:-12px;left:0;right:0;bottom:0;width:0;height:0;color:#f55;font-size:20px;font-weight:700;z-index:2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atom-one-dark">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#abb2bf;background:#282c34}.hljs-comment,.hljs-quote{color:#5c6370;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#c678dd}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e06c75}.hljs-literal{color:#56b6c2}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#98c379}.hljs-built_in,.hljs-class .hljs-title{color:#e6c07b}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#d19a66}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#61aeee}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}</style><p>åœ¨å­—ç¬¦ä¸²å¤„ç†ç±»ç®—æ³•é¢˜ä¸­ï¼ŒZ å­—å½¢å˜æ¢æ˜¯ä¸€é“ç»å…¸çš„ã€Œè§„å¾‹æç‚¼ + ä»£ç ä¼˜åŒ–ã€åŒé‡ç‚¹é¢˜å‹ï¼Œé¢‘ç¹å‡ºç°åœ¨é¢è¯•ä¸ç®—æ³•ç»ƒä¹ ä¸­ã€‚å®ƒçš„æ ¸å¿ƒéš¾ç‚¹ä¸åœ¨äºå®ç°åŠŸèƒ½ï¼Œè€Œåœ¨äºå¦‚ä½•ç²¾å‡†æ•æ‰ Z å­—å½¢æ’åˆ—çš„å‘¨æœŸæ€§è§„å¾‹ï¼ŒåŒæ—¶å…¼é¡¾ä»£ç çš„å¯è¯»æ€§ä¸æ‰§è¡Œæ•ˆç‡ã€‚æœ¬æ–‡å°†ä»é¢˜ç›®ç†è§£å‡ºå‘ï¼Œè¯¦ç»†æ‹†è§£ä¸¤ç§ä¸»æµè§£æ³•ï¼Œå¯¹æ¯”å…¶ä¼˜åŠ£ï¼Œå¹¶è¡¥å……å…³é”®æ³¨æ„äº‹é¡¹ï¼Œå¸®åŠ©å¤§å®¶å½»åº•æŒæ¡è¿™é“é¢˜ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€é¢˜ç›®æ ¸å¿ƒè§£æ</h2>
<h3 data-id="heading-1">é¢˜ç›®æè¿°</h3>
<p>ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸² <code>s</code> å’Œä¸€ä¸ªæ•´æ•° <code>numRows</code>ï¼Œå°†å­—ç¬¦ä¸²æŒ‰ä»ä¸Šå¾€ä¸‹ã€ä»å·¦åˆ°å³çš„é¡ºåºæ’åˆ—æˆ Z å­—å½¢ï¼Œå†ä»å·¦åˆ°å³é€è¡Œè¯»å–å­—ç¬¦ï¼Œè¿”å›æ‹¼æ¥åçš„æ–°å­—ç¬¦ä¸²ã€‚</p>
<h3 data-id="heading-2">ç¤ºä¾‹æ¼”ç¤º</h3>
<p>è¾“å…¥ï¼š<code>s = "PAYPALISHIRING", numRows = 3</code></p>
<p>Z å­—å½¢æ’åˆ—æ•ˆæœï¼š</p>
<pre><code class="hljs language-plain" lang="plain">
P   A   H   N
A P L S I I G
Y   I   R
</code></pre>
<p>é€è¡Œè¯»å–ç»“æœï¼š<code>"PAHNAPLSIIGYIR"</code></p>
<h3 data-id="heading-3">æ ¸å¿ƒè¦æ±‚</h3>
<p>å®ç°å‡½æ•° <code>convert(s: string, numRows: number): string</code>ï¼Œé«˜æ•ˆå®Œæˆå­—ç¬¦ä¸²å˜æ¢ï¼Œéœ€é‡ç‚¹å…³æ³¨è¾¹ç•Œåœºæ™¯ä¸æ€§èƒ½ã€‚</p>
<h2 data-id="heading-4">äºŒã€è§£æ³•ä¸€ï¼šæ•°å­¦å‘¨æœŸæ³•ï¼ˆå…¬å¼æ¨å¯¼å‹ï¼‰</h2>
<h3 data-id="heading-5">æ ¸å¿ƒæ€è·¯</h3>
<p>Z å­—å½¢æ’åˆ—çš„æœ¬è´¨æ˜¯ã€Œå‘¨æœŸæ€§é‡å¤ã€ï¼Œæˆ‘ä»¬å…ˆæç‚¼å…¶å‘¨æœŸè§„å¾‹ï¼š</p>
<ol>
<li>
<p>ä¸€ä¸ªå®Œæ•´çš„ Z å­—å‘¨æœŸåŒ…å« <code>2*(numRows-1)</code> ä¸ªå­—ç¬¦ï¼ˆä¸‹è¡Œé˜¶æ®µå  <code>numRows</code> ä¸ªï¼Œä¸Šè¡Œé˜¶æ®µå  <code>numRows-2</code> ä¸ªï¼Œä¸å«é¦–å°¾é‡å¤è¡Œï¼‰ï¼›</p>
</li>
<li>
<p>é¦–è¡Œä¸æœ«è¡Œï¼šæ¯ä¸ªå‘¨æœŸå†…ä»…å­˜åœ¨ã€Œå‚ç›´åˆ—ã€å­—ç¬¦ï¼Œæ— æ–œåˆ—å­—ç¬¦ï¼›</p>
</li>
<li>
<p>ä¸­é—´è¡Œï¼ˆéé¦–éæœ«ï¼‰ï¼šæ¯ä¸ªå‘¨æœŸå†…åŒæ—¶å­˜åœ¨ã€Œå‚ç›´åˆ—ã€å’Œã€Œæ–œåˆ—ã€ä¸¤ä¸ªå­—ç¬¦ï¼Œéœ€åˆ†åˆ«è®¡ç®—ä½ç½®ã€‚</p>
</li>
</ol>
<p>åŸºäºæ­¤è§„å¾‹ï¼Œæˆ‘ä»¬å¯é€šè¿‡æ•°å­¦å…¬å¼ç›´æ¥å®šä½æ¯ä¸ªå­—ç¬¦åœ¨ç»“æœä¸­çš„ä½ç½®ï¼Œæ— éœ€æ¨¡æ‹Ÿå®Œæ•´ Z å­—å½¢æ’åˆ—ã€‚</p>
<h3 data-id="heading-6">ä»£ç å®ç°ä¸é€è¡Œè§£è¯»</h3>
<pre><code class="hljs language-typescript" lang="typescript">
<span class="hljs-keyword">function</span> <span class="hljs-title function_">convert_1</span>(<span class="hljs-params">s: <span class="hljs-built_in">string</span>, numRows: <span class="hljs-built_in">number</span></span>): <span class="hljs-built_in">string</span> {
  <span class="hljs-comment">// è¾¹ç•Œæ¡ä»¶1ï¼šè¡Œæ•°ä¸º1æ—¶ï¼Œæ— æ³•å½¢æˆZå­—ï¼Œç›´æ¥è¿”å›åŸå­—ç¬¦ä¸²</span>
  <span class="hljs-keyword">if</span> (numRows === <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span> s;

  <span class="hljs-keyword">const</span> sL = s.<span class="hljs-property">length</span>;
  <span class="hljs-comment">// è®¡ç®—ä¸€ä¸ªå®Œæ•´Zå­—å‘¨æœŸçš„å­—ç¬¦æ•°ï¼ˆæ ¸å¿ƒå˜é‡ï¼‰</span>
  <span class="hljs-keyword">const</span> groupNum = (numRows - <span class="hljs-number">1</span>) * <span class="hljs-number">2</span>;
  <span class="hljs-keyword">let</span> res = <span class="hljs-string">''</span>;

  <span class="hljs-comment">// å¤–å±‚å¾ªç¯ï¼šé€è¡Œè¯»å–ç»“æœ</span>
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; numRows; i++) {
    <span class="hljs-comment">// å†…å±‚å¾ªç¯ï¼šé€å‘¨æœŸéå†ï¼Œå®šä½å½“å‰è¡Œçš„å­—ç¬¦</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> j = <span class="hljs-number">0</span>; j &lt; <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">ceil</span>(sL / groupNum); j++) {
      <span class="hljs-comment">// 1. å®šä½å½“å‰å‘¨æœŸå†…å½“å‰è¡Œçš„å‚ç›´åˆ—å­—ç¬¦ç´¢å¼•</span>
      <span class="hljs-keyword">const</span> verticalIdx = i + j * groupNum;
      <span class="hljs-keyword">if</span> (verticalIdx &gt;= sL) <span class="hljs-keyword">break</span>; <span class="hljs-comment">// è¶…å‡ºå­—ç¬¦ä¸²é•¿åº¦ï¼Œç»ˆæ­¢å½“å‰è¡Œéå†</span>
      res += s[verticalIdx];

      <span class="hljs-comment">// 2. ä»…ä¸­é—´è¡Œéœ€è¦è¡¥å……æ–œåˆ—å­—ç¬¦</span>
      <span class="hljs-keyword">if</span> (i &gt; <span class="hljs-number">0</span> &amp;&amp; i &lt; numRows - <span class="hljs-number">1</span>) {
        <span class="hljs-keyword">const</span> diagonalIdx = groupNum - i + j * groupNum;
        <span class="hljs-keyword">if</span> (diagonalIdx &gt;= sL) <span class="hljs-keyword">break</span>; <span class="hljs-comment">// æ–œåˆ—å­—ç¬¦è¶…å‡ºèŒƒå›´ï¼Œè·³è¿‡</span>
        res += s[diagonalIdx];
      }
    }
  }
  <span class="hljs-keyword">return</span> res;
}
</code></pre>
<h3 data-id="heading-7">å…³é”®æ³¨æ„äº‹é¡¹</h3>
<ul>
<li>
<p>è¾¹ç•Œå¤„ç†ï¼šå¿…é¡»ä¼˜å…ˆåˆ¤æ–­ <code>numRows === 1</code>ï¼Œå¦åˆ™ <code>groupNum</code>ä¼šè®¡ç®—ä¸º 0ï¼Œå¯¼è‡´å¾ªç¯é€»è¾‘å¼‚å¸¸ï¼›</p>
</li>
<li>
<p>ç´¢å¼•åˆæ³•æ€§ï¼šæ¯æ¬¡è®¡ç®—å‚ç›´åˆ—ã€æ–œåˆ—ç´¢å¼•åï¼Œéœ€åˆ¤æ–­æ˜¯å¦è¶…å‡ºå­—ç¬¦ä¸²é•¿åº¦ï¼Œé¿å…è¶Šç•ŒæŠ¥é”™ï¼›</p>
</li>
<li>
<p>æ–œåˆ—å­—ç¬¦èŒƒå›´ï¼šä»…ä¸­é—´è¡Œå­˜åœ¨æ–œåˆ—å­—ç¬¦ï¼Œé¦–è¡Œä¸æœ«è¡Œéœ€è·³è¿‡æ­¤æ­¥éª¤ï¼Œå¦åˆ™ä¼šé‡å¤æ‹¼æ¥å­—ç¬¦ã€‚</p>
</li>
</ul>
<h2 data-id="heading-8">ä¸‰ã€è§£æ³•äºŒï¼šæ–¹å‘æ¨¡æ‹Ÿæ³•ï¼ˆç›´è§‚ä¼˜åŒ–å‹ï¼‰</h2>
<h3 data-id="heading-9">ä¼˜åŒ–æ€è·¯</h3>
<p>æ•°å­¦å‘¨æœŸæ³•è™½ç©ºé—´æ•ˆç‡é«˜ï¼Œä½†å…¬å¼æ¨å¯¼å¯¹æ–°æ‰‹ä¸å‹å¥½ï¼Œä¸” JavaScript ä¸­å­—ç¬¦ä¸²ä¸å¯å˜ï¼Œé¢‘ç¹ä½¿ç”¨<code>res +=</code> ä¼šåˆ›å»ºå¤§é‡ä¸´æ—¶å­—ç¬¦ä¸²ï¼Œå­˜åœ¨æ€§èƒ½æŸè€—ã€‚æ–¹å‘æ¨¡æ‹Ÿæ³•é€šè¿‡ã€Œæ¨¡æ‹Ÿå­—ç¬¦ç§»åŠ¨è½¨è¿¹ã€ç®€åŒ–é€»è¾‘ï¼ŒåŒæ—¶ç”¨æ•°ç»„ä¼˜åŒ–å­—ç¬¦ä¸²æ‹¼æ¥ï¼š</p>
<ol>
<li>
<p>ç”¨æ•°ç»„ <code>rows</code> å­˜å‚¨æ¯ä¸€è¡Œçš„å­—ç¬¦ï¼Œé¿å…é¢‘ç¹å­—ç¬¦ä¸²æ‹¼æ¥ï¼›</p>
</li>
<li>
<p>å®šä¹‰ <code>currentRow</code> è·Ÿè¸ªå½“å‰å­—ç¬¦æ‰€åœ¨è¡Œï¼Œ<code>step</code> æ§åˆ¶ç§»åŠ¨æ–¹å‘ï¼ˆ1 å‘ä¸‹ï¼Œ-1 å‘ä¸Šï¼‰ï¼›</p>
</li>
<li>
<p>å½“åˆ°è¾¾é¦–è¡Œæˆ–æœ«è¡Œæ—¶ï¼Œåè½¬ç§»åŠ¨æ–¹å‘ï¼Œå®ç° Z å­—å½¢çš„ã€Œä¸‹è½-ä¸Šå‡ã€å¾ªç¯ã€‚</p>
</li>
</ol>
<h3 data-id="heading-10">ä»£ç å®ç°ä¸é€è¡Œè§£è¯»</h3>
<pre><code class="hljs language-typescript" lang="typescript">
<span class="hljs-keyword">function</span> <span class="hljs-title function_">convert_2</span>(<span class="hljs-params">s: <span class="hljs-built_in">string</span>, numRows: <span class="hljs-built_in">number</span></span>): <span class="hljs-built_in">string</span> {
  <span class="hljs-comment">// è¾¹ç•Œæ¡ä»¶ä¼˜åŒ–ï¼šè¡Œæ•°ä¸º1 æˆ– è¡Œæ•°â‰¥å­—ç¬¦ä¸²é•¿åº¦ï¼Œç›´æ¥è¿”å›åŸå­—ç¬¦ä¸²</span>
  <span class="hljs-keyword">if</span> (numRows === <span class="hljs-number">1</span> || numRows &gt;= s.<span class="hljs-property">length</span>) <span class="hljs-keyword">return</span> s;

  <span class="hljs-comment">// åˆå§‹åŒ–æ¯è¡Œå­˜å‚¨å®¹å™¨ï¼Œç”¨æ•°ç»„é¿å…é¢‘ç¹å­—ç¬¦ä¸²æ‹¼æ¥</span>
  <span class="hljs-keyword">const</span> <span class="hljs-attr">rows</span>: <span class="hljs-built_in">string</span>[] = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>(numRows).<span class="hljs-title function_">fill</span>(<span class="hljs-string">''</span>);
  <span class="hljs-keyword">const</span> cycleLen = <span class="hljs-number">2</span> * (numRows - <span class="hljs-number">1</span>); <span class="hljs-comment">// å‘¨æœŸé•¿åº¦ï¼ˆä»…ä½œé€»è¾‘å‚è€ƒï¼Œéå¿…éœ€ï¼‰</span>
  <span class="hljs-keyword">let</span> currentRow = <span class="hljs-number">0</span>; <span class="hljs-comment">// å½“å‰å­—ç¬¦æ‰€åœ¨è¡Œ</span>
  <span class="hljs-keyword">let</span> step = -<span class="hljs-number">1</span>; <span class="hljs-comment">// ç§»åŠ¨æ–¹å‘ï¼š-1å‘ä¸Šï¼Œ1å‘ä¸‹</span>

  <span class="hljs-comment">// éå†æ¯ä¸ªå­—ç¬¦ï¼Œåˆ†é…åˆ°å¯¹åº”è¡Œ</span>
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> char <span class="hljs-keyword">of</span> s) {
    rows[currentRow] += char;

    <span class="hljs-comment">// åˆ°è¾¾é¦–è¡Œ/æœ«è¡Œï¼Œåè½¬ç§»åŠ¨æ–¹å‘</span>
    <span class="hljs-keyword">if</span> (currentRow === <span class="hljs-number">0</span> || currentRow === numRows - <span class="hljs-number">1</span>) {
      step = -step;
    }
    currentRow += step;
  }

  <span class="hljs-comment">// æ‹¼æ¥æ‰€æœ‰è¡Œå­—ç¬¦ï¼Œå¾—åˆ°æœ€ç»ˆç»“æœ</span>
  <span class="hljs-keyword">return</span> rows.<span class="hljs-title function_">join</span>(<span class="hljs-string">''</span>);
}
</code></pre>
<h3 data-id="heading-11">å…³é”®æ³¨æ„äº‹é¡¹</h3>
<ul>
<li>
<p>è¾¹ç•Œæ¡ä»¶è¡¥å……ï¼šæ–°å¢ <code>numRows &gt;= s.length</code> åˆ¤æ–­ï¼Œæ­¤æ—¶å­—ç¬¦ä¸²æ— æ³•å½¢æˆ Z å­—ï¼Œç›´æ¥è¿”å›åŸå­—ç¬¦ä¸²ï¼Œå‡å°‘æ— æ•ˆè®¡ç®—ï¼›</p>
</li>
<li>
<p>æ–¹å‘åˆå§‹åŒ–ï¼š<code>step</code> åˆå§‹å€¼è®¾ä¸º -1ï¼Œæ˜¯å› ä¸ºé¦–æ¬¡è¿›å…¥å¾ªç¯åï¼Œ<code>currentRow</code> ä¸º 0ï¼Œä¼šè§¦å‘æ–¹å‘åè½¬ï¼Œä½¿ç¬¬ä¸€æ­¥ç§»åŠ¨æ–¹å‘ä¸ºå‘ä¸‹ï¼ˆstep=1ï¼‰ï¼›</p>
</li>
<li>
<p>æ•°ç»„ä¼˜åŒ–ï¼šJavaScript ä¸­æ•°ç»„æ‹¼æ¥æ•ˆç‡è¿œé«˜äºå­—ç¬¦ä¸²ç´¯åŠ ï¼Œå°¤å…¶é€‚åˆé•¿å­—ç¬¦ä¸²åœºæ™¯ï¼Œè¿™æ˜¯è¯¥è§£æ³•çš„æ ¸å¿ƒæ€§èƒ½ä¼˜åŠ¿ã€‚</p>
</li>
</ul>
<h2 data-id="heading-12">å››ã€ä¸¤ç§è§£æ³•å¯¹æ¯”ä¸åœºæ™¯é€‰æ‹©</h2>



































<table><thead><tr><th>ç»´åº¦</th><th>æ•°å­¦å‘¨æœŸæ³•</th><th>æ–¹å‘æ¨¡æ‹Ÿæ³•</th></tr></thead><tbody><tr><td>æ—¶é—´å¤æ‚åº¦</td><td>O(n)ï¼ˆæ¯ä¸ªå­—ç¬¦ä»…è®¿é—®ä¸€æ¬¡ï¼‰</td><td>O(n)ï¼ˆæ¯ä¸ªå­—ç¬¦ä»…è®¿é—®ä¸€æ¬¡ï¼‰</td></tr><tr><td>ç©ºé—´å¤æ‚åº¦</td><td>O(1)ï¼ˆä»…ç”¨ä¸´æ—¶å˜é‡ï¼Œæ— é¢å¤–å­˜å‚¨ï¼‰</td><td>O(n)ï¼ˆéœ€æ•°ç»„å­˜å‚¨æ¯è¡Œå­—ç¬¦ï¼‰</td></tr><tr><td>å¯è¯»æ€§</td><td>è¾ƒå·®ï¼Œéœ€ç†è§£å…¬å¼æ¨å¯¼é€»è¾‘</td><td>ä¼˜ç§€ï¼Œæ¨¡æ‹Ÿè¿‡ç¨‹ç›´è§‚æ˜“æ‡‚</td></tr><tr><td>æ€§èƒ½è¡¨ç°</td><td>é•¿å­—ç¬¦ä¸²åœºæ™¯ä¸‹ï¼Œå› é¢‘ç¹å­—ç¬¦ä¸²æ‹¼æ¥ç•¥é€Š</td><td>æ•°ç»„ä¼˜åŒ–æ‹¼æ¥ï¼Œæ€§èƒ½æ›´ç¨³å®š</td></tr><tr><td>é€‚ç”¨åœºæ™¯</td><td>ä½å†…å­˜ç¯å¢ƒã€å¯¹ç©ºé—´æ•ˆç‡è¦æ±‚æé«˜çš„åœºæ™¯</td><td>æ—¥å¸¸å¼€å‘ã€é¢è¯•ç­”é¢˜ï¼ˆå…¼é¡¾å¯è¯»æ€§ä¸æ€§èƒ½ï¼‰</td></tr></tbody></table>
<h2 data-id="heading-13">äº”ã€æµ‹è¯•éªŒè¯ä¸å¸¸è§é—®é¢˜</h2>
<h3 data-id="heading-14">æµ‹è¯•ç”¨ä¾‹è¦†ç›–</h3>
<pre><code class="hljs language-typescript" lang="typescript">
<span class="hljs-comment">// æµ‹è¯•ç”¨ä¾‹1ï¼šåŸºç¡€åœºæ™¯</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">convert_1</span>(<span class="hljs-string">"PAYPALISHIRING"</span>, <span class="hljs-number">3</span>)); <span class="hljs-comment">// è¾“å‡ºï¼šPAHNAPLSIIGYIR</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">convert_2</span>(<span class="hljs-string">"PAYPALISHIRING"</span>, <span class="hljs-number">3</span>)); <span class="hljs-comment">// è¾“å‡ºï¼šPAHNAPLSIIGYIR</span>

<span class="hljs-comment">// æµ‹è¯•ç”¨ä¾‹2ï¼šè¡Œæ•°ä¸º4</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">convert_1</span>(<span class="hljs-string">"PAYPALISHIRING"</span>, <span class="hljs-number">4</span>)); <span class="hljs-comment">// è¾“å‡ºï¼šPINALSIGYAHRPI</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">convert_2</span>(<span class="hljs-string">"PAYPALISHIRING"</span>, <span class="hljs-number">4</span>)); <span class="hljs-comment">// è¾“å‡ºï¼šPINALSIGYAHRPI</span>

<span class="hljs-comment">// æµ‹è¯•ç”¨ä¾‹3ï¼šè¾¹ç•Œåœºæ™¯ï¼ˆè¡Œæ•°=1ï¼‰</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">convert_1</span>(<span class="hljs-string">"A"</span>, <span class="hljs-number">1</span>)); <span class="hljs-comment">// è¾“å‡ºï¼šA</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">convert_2</span>(<span class="hljs-string">"A"</span>, <span class="hljs-number">1</span>)); <span class="hljs-comment">// è¾“å‡ºï¼šA</span>

<span class="hljs-comment">// æµ‹è¯•ç”¨ä¾‹4ï¼šè¾¹ç•Œåœºæ™¯ï¼ˆè¡Œæ•°â‰¥å­—ç¬¦ä¸²é•¿åº¦ï¼‰</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">convert_2</span>(<span class="hljs-string">"ABCDE"</span>, <span class="hljs-number">5</span>)); <span class="hljs-comment">// è¾“å‡ºï¼šABCDE</span>
</code></pre>
<h3 data-id="heading-15">å¸¸è§é—®é¢˜æ’æŸ¥</h3>
<ol>
<li>
<p>å­—ç¬¦é‡å¤/ç¼ºå¤±ï¼šå¤§æ¦‚ç‡æ˜¯æ–œåˆ—å­—ç¬¦åˆ¤æ–­é€»è¾‘é”™è¯¯ï¼Œéœ€æ£€æŸ¥ <code>i &gt; 0 &amp;&amp; i &lt; numRows - 1</code> æ¡ä»¶æ˜¯å¦é—æ¼ï¼›</p>
</li>
<li>
<p>è¶Šç•ŒæŠ¥é”™ï¼šæœªåˆ¤æ–­ç´¢å¼•åˆæ³•æ€§ï¼Œéœ€åœ¨æ‹¼æ¥å­—ç¬¦å‰æ ¡éªŒ <code>verticalIdx</code> å’Œ <code>diagonalIdx</code> æ˜¯å¦å°äºå­—ç¬¦ä¸²é•¿åº¦ï¼›</p>
</li>
<li>
<p>æ–¹å‘å¼‚å¸¸ï¼š<code>step</code> åˆå§‹åŒ–é”™è¯¯æˆ–æ–¹å‘åè½¬é€»è¾‘ç¼ºå¤±ï¼Œéœ€ç¡®ä¿åˆ°è¾¾é¦–è¡Œ/æœ«è¡Œæ—¶åè½¬æ–¹å‘ã€‚</p>
</li>
</ol>
<h2 data-id="heading-16">å…­ã€æ€»ç»“</h2>
<p>Z å­—å½¢å˜æ¢çš„æ ¸å¿ƒæ˜¯ã€ŒæŠ“ä½å‘¨æœŸæ€§ã€ï¼Œä¸¤ç§è§£æ³•å‡åŸºäºè¿™ä¸€æ ¸å¿ƒè§„å¾‹ï¼Œåªæ˜¯å®ç°è·¯å¾„ä¸åŒï¼šæ•°å­¦å‘¨æœŸæ³•åé‡äºå…¬å¼æ¨å¯¼ï¼Œè¿½æ±‚æè‡´ç©ºé—´æ•ˆç‡ï¼›æ–¹å‘æ¨¡æ‹Ÿæ³•åé‡äºç›´è§‚æ¨¡æ‹Ÿï¼Œç”¨åˆç†çš„ç©ºé—´æ¢å¯è¯»æ€§ä¸æ€§èƒ½ã€‚</p>
<p>åœ¨é¢è¯•ä¸­ï¼Œæ¨èä¼˜å…ˆä½¿ç”¨æ–¹å‘æ¨¡æ‹Ÿæ³•ï¼Œå…¶é€»è¾‘æ¸…æ™°ã€ä¸æ˜“å‡ºé”™ï¼Œèƒ½å¿«é€Ÿå‘é¢è¯•å®˜å±•ç°æ€è·¯ï¼›è‹¥é¢è¯•å®˜è¿½é—®ç©ºé—´ä¼˜åŒ–ï¼Œå¯å†è¡¥å……æ•°å­¦å‘¨æœŸæ³•çš„æ€è·¯ã€‚åŒæ—¶ï¼Œè¾¹ç•Œæ¡ä»¶çš„å…¨é¢è¦†ç›–çš„æ˜¯è¿™é“é¢˜çš„å¾—åˆ†å…³é”®ï¼Œéœ€ç‰¢è®°è¡Œæ•°ä¸º 1ã€è¡Œæ•°â‰¥å­—ç¬¦ä¸²é•¿åº¦è¿™ä¸¤ä¸ªç‰¹æ®Šåœºæ™¯ã€‚</p>
<p>æŒæ¡è¿™é“é¢˜çš„æ€è€ƒæ–¹å¼ï¼Œèƒ½ä¸ºåç»­è§£å†³å­—ç¬¦ä¸²ã€æ•°ç»„ç±»çš„è§„å¾‹å‹é¢˜ç›®æä¾›å€Ÿé‰´ï¼Œæ ¸å¿ƒæ˜¯å­¦ä¼šä»å¤æ‚æ’åˆ—ä¸­æç‚¼ç®€åŒ–è§„å¾‹ï¼Œå†é€šè¿‡ä»£ç ä¼˜åŒ–å¹³è¡¡æ•ˆç‡ä¸å¯è¯»æ€§ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[MMKVï¼šé«˜æ€§èƒ½ç§»åŠ¨ç«¯é”®å€¼å­˜å‚¨æ–¹æ¡ˆ]]></title>    <link>https://juejin.cn/post/7598947628467421230</link>    <guid>https://juejin.cn/post/7598947628467421230</guid>    <pubDate>2026-01-25T09:07:19.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7598947628467421230" data-draft-id="7598537739516592170" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="MMKVï¼šé«˜æ€§èƒ½ç§»åŠ¨ç«¯é”®å€¼å­˜å‚¨æ–¹æ¡ˆ"/> <meta itemprop="keywords" content="Android"/> <meta itemprop="datePublished" content="2026-01-25T09:07:19.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åº¦ç†Šå›"/> <meta itemprop="url" content="https://juejin.cn/user/1618089084457853"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            MMKVï¼šé«˜æ€§èƒ½ç§»åŠ¨ç«¯é”®å€¼å­˜å‚¨æ–¹æ¡ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1618089084457853/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åº¦ç†Šå›
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-25T09:07:19.000Z" title="Sun Jan 25 2026 09:07:19 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€MMKV çš„å«ä¹‰ä¸æ¦‚è¿°</h2>
<p>MMKV æ˜¯è…¾è®¯å¼€æºçš„ä¸€æ¬¾åŸºäº mmap å†…å­˜æ˜ å°„çš„é”®å€¼å­˜å‚¨ç»„ä»¶ï¼Œä¸“é—¨ä¸ºç§»åŠ¨ç«¯è®¾è®¡ï¼Œå…·æœ‰é«˜æ€§èƒ½çš„ç‰¹æ€§ï¼Œæ ¸å¿ƒå®šä½æ˜¯<strong>æ›¿ä»£ä¼ ç»Ÿçš„è½»é‡çº§é”®å€¼å­˜å‚¨æ–¹æ¡ˆ</strong>ã€‚å…¶åå­—æ¥æºäº "Memory-Mapped Key-Value" çš„ç¼©å†™ã€‚</p>
<h2 data-id="heading-1">äºŒã€MMKV çš„ä½œç”¨ä¸ä¼˜åŠ¿</h2>
<ol>
<li><strong>é«˜æ€§èƒ½</strong>ï¼šåŸºäº mmap å†…å­˜æ˜ å°„ï¼Œè¯»å†™æ€§èƒ½è¿œè¶… SharedPreferencesã€‚SharedPreferences çš„ IO æ“ä½œåŸºäºæ–‡ä»¶æµï¼Œé¢‘ç¹è¯»å†™ä¼šè§¦å‘å¤§é‡ç£ç›˜ IOï¼Œè€Œ MMKV åŸºäº mmap å®ç° â€œå†…å­˜ - ç£ç›˜â€ æ˜ å°„ï¼Œè¯»å†™å‡ ä¹æ— ç£ç›˜ IO å¼€é”€</li>
<li><strong>å¢é‡æ›´æ–°</strong>ï¼šMMKV ä¸ä¼šåƒ SP é‚£æ ·æ¯æ¬¡ä¿®æ”¹éƒ½é‡å†™æ•´ä¸ªæ–‡ä»¶ï¼Œè€Œæ˜¯åœ¨å†…å­˜æ˜ å°„åŒºåŸŸä¸­æ‰¾åˆ°å¯¹åº”é”®çš„ä½ç½®ï¼Œç›´æ¥ä¿®æ”¹æ•°æ®ï¼Œä»…å½“å†…å­˜ä¸è¶³æ—¶æ‰æ‰©å®¹æ–‡ä»¶å¹¶é‡æ–°æ˜ å°„ï¼Œå¤§å¹…å‡å°‘ç£ç›˜å†™å…¥å¼€é”€ã€‚</li>
<li><strong>å¤šè¿›ç¨‹å®‰å…¨</strong>ï¼šå†…ç½®æ–‡ä»¶é”æœºåˆ¶ï¼Œæ”¯æŒå¤šè¿›ç¨‹è¯»å†™ã€‚SharedPreferences å¤šè¿›ç¨‹æ¨¡å¼å­˜åœ¨æ•°æ®ä¸¢å¤±ã€æ­»é”é£é™©ï¼ŒMMKV å†…ç½®æ–‡ä»¶é”ï¼Œä¿è¯å¤šè¿›ç¨‹å®‰å…¨</li>
<li><strong>æ˜“ç”¨æ€§</strong>ï¼šAPI è®¾è®¡ç®€æ´ï¼Œä¸ SharedPreferences å…¼å®¹ï¼Œè¿ç§»æˆæœ¬æä½</li>
<li><strong>è½»é‡</strong>ï¼šç¼–è¯‘åä½“ç§¯ä»…å‡ å KB</li>
<li><strong>æ•°æ®åŠ å¯†</strong>ï¼šæ”¯æŒ AES CFB-128 åŠ å¯†ä¿æŠ¤æ•æ„Ÿæ•°æ®</li>
</ol>
<h2 data-id="heading-2">ä¸‰ã€ä½¿ç”¨åœºæ™¯</h2>
<h3 data-id="heading-3">1. ç”¨æˆ·é…ç½®å­˜å‚¨</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// æ›¿ä»£ SharedPreferences å­˜å‚¨ç”¨æˆ·è®¾ç½®</span>
MMKV.defaultMMKV().encode(<span class="hljs-string">"theme_mode"</span>, <span class="hljs-string">"dark"</span>)
<span class="hljs-keyword">val</span> theme = MMKV.defaultMMKV().decodeString(<span class="hljs-string">"theme_mode"</span>)
</code></pre>
<h3 data-id="heading-4">2. è½»é‡çº§ç¼“å­˜</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// å­˜å‚¨ä¸´æ—¶æ•°æ®æˆ–ç¼“å­˜</span>
<span class="hljs-keyword">val</span> mmkv = MMKV.mmkvWithID(<span class="hljs-string">"user_cache"</span>)
mmkv.encode(<span class="hljs-string">"last_login_time"</span>, System.currentTimeMillis())
mmkv.encode(<span class="hljs-string">"user_profile"</span>, jsonString)
</code></pre>
<h3 data-id="heading-5">3. è·¨è¿›ç¨‹æ•°æ®å…±äº«</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// å¤šè¿›ç¨‹åº”ç”¨ä¸­çš„æ•°æ®åŒæ­¥</span>
<span class="hljs-keyword">val</span> mmkv = MMKV.mmkvWithID(<span class="hljs-string">"inter_process_data"</span>, MMKV.MULTI_PROCESS_MODE)
mmkv.encode(<span class="hljs-string">"global_config"</span>, configData)
</code></pre>
<h3 data-id="heading-6">4. æ•æ„Ÿæ•°æ®åŠ å¯†å­˜å‚¨</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// åŠ å¯†å­˜å‚¨ç”¨æˆ·å‡­è¯ç­‰æ•æ„Ÿä¿¡æ¯</span>
<span class="hljs-keyword">val</span> cryptKey = <span class="hljs-string">"My-Encryption-Key"</span>.toByteArray()
<span class="hljs-keyword">val</span> mmkv = MMKV.mmkvWithID(<span class="hljs-string">"encrypted_data"</span>, MMKV.SINGLE_PROCESS_MODE, cryptKey)
mmkv.encode(<span class="hljs-string">"auth_token"</span>, sensitiveToken)
</code></pre>
<h2 data-id="heading-7">å››ã€æ ¸å¿ƒåŸç†è¯¦è§£</h2>
<h3 data-id="heading-8">1. å†…å­˜æ˜ å°„ï¼ˆmmapï¼‰æœºåˆ¶</h3>
<p>MMKV çš„æ ¸å¿ƒæ˜¯ä½¿ç”¨ mmap å°†æ–‡ä»¶ç›´æ¥æ˜ å°„åˆ°å†…å­˜ç©ºé—´ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// C++ æ ¸å¿ƒå®ç°ï¼ˆç®€åŒ–ï¼‰</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">MMKV::initializeMMKV</span><span class="hljs-params">(<span class="hljs-type">const</span> std::string &amp;path)</span> </span>{
    <span class="hljs-comment">// æ‰“å¼€æˆ–åˆ›å»ºæ–‡ä»¶</span>
    m_fd = <span class="hljs-built_in">open</span>(path.<span class="hljs-built_in">c_str</span>(), O_RDWR | O_CREAT, S_IRWXU);
    
    <span class="hljs-comment">// è·å–æ–‡ä»¶å¤§å°å¹¶è°ƒæ•´</span>
    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">stat</span> st = {};
    <span class="hljs-built_in">fstat</span>(m_fd, &amp;st);
    m_size = st.st_size;
    
    <span class="hljs-comment">// å†…å­˜æ˜ å°„</span>
    m_ptr = (<span class="hljs-type">char</span> *)<span class="hljs-built_in">mmap</span>(<span class="hljs-literal">nullptr</span>, m_size, PROT_READ | PROT_WRITE, MAP_SHARED, m_fd, <span class="hljs-number">0</span>);
    
    <span class="hljs-comment">// æ–‡ä»¶é•¿åº¦ä¸å¤Ÿæ—¶æ‰©å®¹</span>
    <span class="hljs-keyword">if</span> (m_actualSize &gt; m_size) {
        <span class="hljs-keyword">do</span> {
            m_size *= <span class="hljs-number">2</span>;
        } <span class="hljs-keyword">while</span> (m_actualSize &gt; m_size);
        <span class="hljs-built_in">ftruncate</span>(m_fd, m_size);
        <span class="hljs-built_in">munmap</span>(m_ptr, m_size);
        m_ptr = (<span class="hljs-type">char</span> *)<span class="hljs-built_in">mmap</span>(<span class="hljs-literal">nullptr</span>, m_size, PROT_READ | PROT_WRITE, MAP_SHARED, m_fd, <span class="hljs-number">0</span>);
    }
}
</code></pre>
<p><strong>mmap ä¼˜åŠ¿</strong>ï¼š
<code>mmap</code> æ˜¯æ“ä½œç³»ç»Ÿæä¾›çš„å†…å­˜æ˜ å°„æ–‡ä»¶æœºåˆ¶ï¼Œå°†ç£ç›˜æ–‡ä»¶çš„ä¸€éƒ¨åˆ† / å…¨éƒ¨æ˜ å°„åˆ°è¿›ç¨‹çš„è™šæ‹Ÿå†…å­˜ç©ºé—´ï¼Œåç»­å¯¹è¯¥å†…å­˜åŒºåŸŸçš„è¯»å†™æ“ä½œï¼Œä¼šç”±æ“ä½œç³»ç»Ÿè‡ªåŠ¨åŒæ­¥åˆ°ç£ç›˜ï¼Œæ— éœ€æ‰‹åŠ¨è°ƒç”¨ <code>read()</code>/<code>write()</code>ã€‚</p>
<p>ç›¸æ¯”ä¼ ç»Ÿæ–‡ä»¶ IOï¼š</p>
<ul>
<li>ä¼ ç»Ÿ IOï¼šæ•°æ®éœ€ç»è¿‡ â€œç£ç›˜ â†’ å†…æ ¸ç¼“å†²åŒº â†’ ç”¨æˆ·ç¼“å†²åŒºâ€ ä¸¤æ¬¡æ‹·è´ï¼›</li>
<li>mmapï¼šæ•°æ®ç›´æ¥æ˜ å°„åˆ°ç”¨æˆ·å†…å­˜ï¼Œä»…ä¸€æ¬¡æ‹·è´ï¼Œä¸”è¯»å†™æ“ä½œæ— ç³»ç»Ÿè°ƒç”¨å¼€é”€ã€‚</li>
</ul>
<h3 data-id="heading-9">2. æ•°æ®åºåˆ—åŒ–ä¸å­˜å‚¨æ ¼å¼</h3>
<p>MMKV é‡‡ç”¨ <strong>Protobuf</strong>ï¼ˆProtocol Buffersï¼‰ä½œä¸ºæ•°æ®åºåˆ—åŒ–æ–¹å¼ï¼Œè€Œé SP çš„ XML æ ¼å¼ï¼Œæ ¸å¿ƒä¼˜åŠ¿ï¼š</p>
<ul>
<li>äºŒè¿›åˆ¶ç¼–ç ï¼Œä½“ç§¯è¿œå°äº XMLï¼›</li>
<li>è§£æé€Ÿåº¦å¿«ï¼Œæ— éœ€åƒ XML é‚£æ ·è§£æå­—ç¬¦ä¸²ï¼›</li>
<li>æ”¯æŒå¢é‡æ›´æ–°ï¼Œä»…ä¿®æ”¹å˜åŒ–çš„å­—æ®µï¼Œæ— éœ€é‡å†™æ•´ä¸ªæ–‡ä»¶ã€‚</li>
</ul>
<pre><code class="hljs language-protobuf" lang="protobuf">// æ•°æ®å­˜å‚¨ç»“æ„
message KV {
    optional string key = 1;
    optional bytes value = 2;
    optional sint32 value_size = 3;
}

// æ–‡ä»¶æ ¼å¼
+----------------+----------------+----------------+
|   Total Size   |   Actual Size  |   CRC Check    |
+----------------+----------------+----------------+
|                |                |                |
|   Key-Value    |   Key-Value    |   Key-Value    |
|    Pairs       |    Pairs       |    Pairs       |
|                |                |                |
+----------------+----------------+----------------+
</code></pre>
<h3 data-id="heading-10">3. å¤šè¿›ç¨‹åŒæ­¥æœºåˆ¶</h3>
<p>MMKV ä½¿ç”¨æ–‡ä»¶é”å®ç°è¿›ç¨‹é—´åŒæ­¥ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// è¿›ç¨‹é”å®ç°</span>
<span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">MMKV::lock</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">flock</span> lock = {};
    lock.l_type = F_WRLCK;
    lock.l_whence = SEEK_SET;
    lock.l_start = <span class="hljs-number">0</span>;
    lock.l_len = <span class="hljs-number">0</span>;
    
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">fcntl</span>(m_fd, F_SETLKW, &amp;lock) == <span class="hljs-number">0</span>;
}

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">MMKV::unlock</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">flock</span> lock = {};
    lock.l_type = F_UNLCK;
    lock.l_whence = SEEK_SET;
    
    <span class="hljs-built_in">fcntl</span>(m_fd, F_SETLK, &amp;lock);
}
</code></pre>
<h3 data-id="heading-11">4. æ•°æ®åŠ å¯†å®ç°</h3>
<p>é‡‡ç”¨ AES CFB-128 åŠ å¯†ç®—æ³•ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// åŠ å¯†è§£å¯†æµç¨‹</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">MMKV::crypt</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">void</span> *input, <span class="hljs-type">void</span> *output, <span class="hljs-type">size_t</span> length)</span> </span>{
    <span class="hljs-keyword">if</span> (!m_crypter) {
        <span class="hljs-built_in">memcpy</span>(output, input, length);
        <span class="hljs-keyword">return</span>;
    }
    
    <span class="hljs-keyword">if</span> (m_crypter-&gt;<span class="hljs-built_in">getCryptTag</span>() != m_metaInfo-&gt;m_cryptTag) {
        <span class="hljs-comment">// éœ€è¦é‡æ–°è®¡ç®— CRC</span>
        <span class="hljs-built_in">recalcCRCDigest</span>();
    }
    
    m_crypter-&gt;<span class="hljs-built_in">crypt</span>(input, output, length);
}
</code></pre>
<h3 data-id="heading-12">5. æ•°æ®æ·˜æ±°ä¸å‹ç¼©æœºåˆ¶</h3>
<p>å½“å­˜å‚¨ç©ºé—´ä¸è¶³æ—¶ï¼ŒMMKV ä¼šæ‰§è¡Œæ•°æ®æ¸…ç†ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">MMKV::trim</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-comment">// æ”¶é›†æ‰€æœ‰æœ‰æ•ˆæ•°æ®çš„æŒ‡é’ˆ</span>
    std::vector&lt;MMBuffer&gt; validBuffers;
    
    <span class="hljs-comment">// é‡æ–°æ•´ç†æ•°æ®ï¼Œä¸¢å¼ƒè¿‡æœŸæ•°æ®</span>
    <span class="hljs-type">size_t</span> newSize = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> &amp;pair : m_dic) {
        <span class="hljs-keyword">if</span> (!pair.second.<span class="hljs-built_in">isStale</span>()) {
            validBuffers.<span class="hljs-built_in">push_back</span>(pair.second);
            newSize += pair.second.<span class="hljs-built_in">length</span>();
        }
    }
    
    <span class="hljs-comment">// å¦‚æœèŠ‚çœç©ºé—´è¶…è¿‡é˜ˆå€¼ï¼Œæ‰§è¡Œå‹ç¼©</span>
    <span class="hljs-keyword">if</span> (m_actualSize - newSize &gt; m_size * <span class="hljs-number">0.5</span>) {
        <span class="hljs-built_in">fullWriteback</span>();
    }
}
</code></pre>
<h2 data-id="heading-13">äº”ã€Android é›†æˆä¸ä½¿ç”¨</h2>
<h3 data-id="heading-14">1. æ·»åŠ ä¾èµ–</h3>
<pre><code class="hljs language-gradle" lang="gradle">dependencies {
    implementation 'com.tencent:mmkv:2.3.0'
}
</code></pre>
<h3 data-id="heading-15">2. åˆå§‹åŒ–</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyApplication</span> : <span class="hljs-type">Application</span>() {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreate</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">super</span>.onCreate()
        
        <span class="hljs-comment">// åˆå§‹åŒ– MMKV</span>
        <span class="hljs-keyword">val</span> rootDir = MMKV.initialize(<span class="hljs-keyword">this</span>)
        println(<span class="hljs-string">"MMKV root: <span class="hljs-variable">$rootDir</span>"</span>)
        
        <span class="hljs-comment">// æˆ–æŒ‡å®šè‡ªå®šä¹‰è·¯å¾„</span>
        <span class="hljs-comment">// MMKV.initialize(cacheDir.absolutePath + "/mmkv")</span>
    }
}
</code></pre>
<h3 data-id="heading-16">3. åŸºæœ¬æ“ä½œ</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// è·å–é»˜è®¤å®ä¾‹</span>
<span class="hljs-keyword">val</span> kv = MMKV.defaultMMKV()

<span class="hljs-comment">// å­˜å‚¨æ•°æ®</span>
kv.encode(<span class="hljs-string">"bool"</span>, <span class="hljs-literal">true</span>)
kv.encode(<span class="hljs-string">"int"</span>, <span class="hljs-number">123</span>)
kv.encode(<span class="hljs-string">"string"</span>, <span class="hljs-string">"Hello, MMKV"</span>)
kv.encode(<span class="hljs-string">"float"</span>, <span class="hljs-number">3.14f</span>)
kv.encode(<span class="hljs-string">"bytes"</span>, byteArrayOf(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>))

<span class="hljs-comment">// è¯»å–æ•°æ®</span>
<span class="hljs-keyword">val</span> bValue = kv.decodeBool(<span class="hljs-string">"bool"</span>)
<span class="hljs-keyword">val</span> iValue = kv.decodeInt(<span class="hljs-string">"int"</span>)
<span class="hljs-keyword">val</span> sValue = kv.decodeString(<span class="hljs-string">"string"</span>)

<span class="hljs-comment">// åˆ é™¤æ•°æ®</span>
kv.removeValueForKey(<span class="hljs-string">"bool"</span>)
kv.removeValuesForKeys(arrayOf(<span class="hljs-string">"int"</span>, <span class="hljs-string">"float"</span>))

<span class="hljs-comment">// æ‰¹é‡æ›´æ–°</span>
kv.edit().apply {
    putString(<span class="hljs-string">"name"</span>, <span class="hljs-string">"John"</span>)
    putInt(<span class="hljs-string">"age"</span>, <span class="hljs-number">30</span>)
    commit()
}
</code></pre>
<h3 data-id="heading-17">4. é«˜çº§ç‰¹æ€§ä½¿ç”¨</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// 1. å¤šå®ä¾‹ç®¡ç†</span>
<span class="hljs-keyword">val</span> userKV = MMKV.mmkvWithID(<span class="hljs-string">"user_data"</span>)
<span class="hljs-keyword">val</span> settingsKV = MMKV.mmkvWithID(<span class="hljs-string">"app_settings"</span>)

<span class="hljs-comment">// 2. æ•°æ®å˜åŒ–ç›‘å¬</span>
<span class="hljs-keyword">val</span> listener = <span class="hljs-keyword">object</span> : MMKV.OnContentChangeListener {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onContentChangedByOuterProcess</span><span class="hljs-params">(mmkvID: <span class="hljs-type">String</span>?)</span></span> {
        <span class="hljs-comment">// å¤„ç†è·¨è¿›ç¨‹æ•°æ®å˜æ›´</span>
    }
}
kv.addContentChangeListener(listener)

<span class="hljs-comment">// 3. å¤‡ä»½ä¸æ¢å¤</span>
<span class="hljs-keyword">val</span> backupPath = filesDir.absolutePath + <span class="hljs-string">"/backup"</span>
<span class="hljs-keyword">val</span> backupKey = <span class="hljs-string">"backup_key"</span>
kv.backupOneToDirectory(backupPath, backupKey)

<span class="hljs-comment">// 4. æ•°æ®è¿ç§»ï¼ˆä» SharedPreferencesï¼‰</span>
<span class="hljs-keyword">val</span> sharedPreferences = getSharedPreferences(<span class="hljs-string">"old_data"</span>, MODE_PRIVATE)
kv.importFromSharedPreferences(sharedPreferences)
sharedPreferences.edit().clear().apply()
</code></pre>
<h2 data-id="heading-18">å…­ã€æ€§èƒ½å¯¹æ¯”</h2>
<p>ä»¥ä¸‹æ˜¯ MMKV ä¸ SharedPreferences çš„æ€§èƒ½å¯¹æ¯”æ•°æ®ï¼š</p>





























<table><thead><tr><th>æ“ä½œç±»å‹</th><th>MMKV</th><th>SharedPreferences</th><th>æå‡å€æ•°</th></tr></thead><tbody><tr><td>å†™å…¥ 1000 æ¡æ•°æ®</td><td>~50ms</td><td>~10000ms</td><td>200å€</td></tr><tr><td>è¯»å– 1000 æ¡æ•°æ®</td><td>~10ms</td><td>~2000ms</td><td>200å€</td></tr><tr><td>è·¨è¿›ç¨‹è¯»å–</td><td>~20ms</td><td>ä¸æ”¯æŒ</td><td>N/A</td></tr></tbody></table>
<h2 data-id="heading-19">ä¸ƒã€æœ€ä½³å®è·µ</h2>
<h3 data-id="heading-20">1. å­˜å‚¨ç­–ç•¥é€‰æ‹©</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// æ ¹æ®åœºæ™¯é€‰æ‹©å­˜å‚¨æ¨¡å¼</span>
<span class="hljs-keyword">enum</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">StorageStrategy</span> {
    <span class="hljs-comment">// å•è¿›ç¨‹é¢‘ç¹è¯»å†™</span>
    SINGLE_PROCESS_FREQUENT {
        <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getMMKV</span><span class="hljs-params">()</span></span>: MMKV {
            <span class="hljs-keyword">return</span> MMKV.mmkvWithID(<span class="hljs-string">"frequent_data"</span>)
        }
    },
    
    <span class="hljs-comment">// è·¨è¿›ç¨‹å…±äº«</span>
    MULTI_PROCESS_SHARED {
        <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getMMKV</span><span class="hljs-params">()</span></span>: MMKV {
            <span class="hljs-keyword">return</span> MMKV.mmkvWithID(<span class="hljs-string">"shared_data"</span>, MMKV.MULTI_PROCESS_MODE)
        }
    },
    
    <span class="hljs-comment">// åŠ å¯†å­˜å‚¨</span>
    ENCRYPTED_SENSITIVE {
        <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getMMKV</span><span class="hljs-params">()</span></span>: MMKV {
            <span class="hljs-keyword">val</span> key = <span class="hljs-string">"your-256-bit-encryption-key"</span>.toByteArray()
            <span class="hljs-keyword">return</span> MMKV.mmkvWithID(<span class="hljs-string">"sensitive"</span>, MMKV.SINGLE_PROCESS_MODE, key)
        }
    };
    
    <span class="hljs-keyword">abstract</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getMMKV</span><span class="hljs-params">()</span></span>: MMKV
}
</code></pre>
<h3 data-id="heading-21">2. æ•°æ®å¤§å°æ§åˆ¶</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// é¿å…å­˜å‚¨è¿‡å¤§æ•°æ®</span>
<span class="hljs-keyword">object</span> MMKVManager {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">const</span> <span class="hljs-keyword">val</span> MAX_VALUE_SIZE = <span class="hljs-number">1024</span> * <span class="hljs-number">1024</span> <span class="hljs-comment">// 1MB</span>
    
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">safeEncode</span><span class="hljs-params">(key: <span class="hljs-type">String</span>, value: <span class="hljs-type">ByteArray</span>)</span></span>: <span class="hljs-built_in">Boolean</span> {
        <span class="hljs-keyword">if</span> (value.size &gt; MAX_VALUE_SIZE) {
            Log.w(<span class="hljs-string">"MMKV"</span>, <span class="hljs-string">"Value too large for key: <span class="hljs-variable">$key</span>"</span>)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
        }
        <span class="hljs-keyword">return</span> MMKV.defaultMMKV().encode(key, value)
    }
}
</code></pre>
<h3 data-id="heading-22">3. å¼‚å¸¸å¤„ç†</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// å¥å£®çš„æ•°æ®è®¿é—®</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">safeDecodeString</span><span class="hljs-params">(key: <span class="hljs-type">String</span>, defaultValue: <span class="hljs-type">String</span> = <span class="hljs-string">""</span>)</span></span>: String {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">try</span> {
        MMKV.defaultMMKV().decodeString(key, defaultValue) ?: defaultValue
    } <span class="hljs-keyword">catch</span> (e: Exception) {
        Log.e(<span class="hljs-string">"MMKV"</span>, <span class="hljs-string">"Failed to decode key: <span class="hljs-variable">$key</span>"</span>, e)
        defaultValue
    }
}
</code></pre>
<h2 data-id="heading-23">å…«ã€æ³¨æ„äº‹é¡¹</h2>
<ol>
<li><strong>æ•°æ®é‡é™åˆ¶</strong>ï¼šé€‚åˆå­˜å‚¨ä¸­å°è§„æ¨¡æ•°æ®ï¼Œä¸å»ºè®®å­˜å‚¨è¶…è¿‡ 1MB çš„å•ä¸ªå€¼</li>
<li><strong>ç‰ˆæœ¬å…¼å®¹</strong>ï¼šå‡çº§æ—¶æ³¨æ„æ•°æ®æ ¼å¼å…¼å®¹æ€§</li>
<li><strong>å†…å­˜ä½¿ç”¨</strong>ï¼šå¤§æ•°æ®é‡æ—¶æ³¨æ„å†…å­˜å ç”¨ç›‘æ§</li>
</ol>
<p><strong><strong>æ¬¢è¿å…³æ³¨å…¬ä¼—å·åº¦ç†Šå›ï¼Œä¸€èµ·åˆ†äº«äº¤æµã€‚</strong></strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Flutter åº•å±‚åŸç†xyzé¢˜å…¨é¢æ¢³ç†]]></title>    <link>https://juejin.cn/post/7598472744482013203</link>    <guid>https://juejin.cn/post/7598472744482013203</guid>    <pubDate>2026-01-25T08:25:25.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7598472744482013203" data-draft-id="7598737609493905427" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Flutter åº•å±‚åŸç†xyzé¢˜å…¨é¢æ¢³ç†"/> <meta itemprop="keywords" content="Flutter"/> <meta itemprop="datePublished" content="2026-01-25T08:25:25.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¿†æ±Ÿå—"/> <meta itemprop="url" content="https://juejin.cn/user/4230576472602845"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Flutter åº•å±‚åŸç†xyzé¢˜å…¨é¢æ¢³ç†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4230576472602845/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¿†æ±Ÿå—
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-25T08:25:25.000Z" title="Sun Jan 25 2026 08:25:25 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€Flutter æ¶æ„åŸç†</h2>
<h3 data-id="heading-1">1. Flutter çš„æ•´ä½“æ¶æ„æ˜¯æ€æ ·çš„ï¼Ÿ</h3>
<p>Flutter é‡‡ç”¨åˆ†å±‚æ¶æ„è®¾è®¡ï¼Œä»ä¸Šåˆ°ä¸‹åˆ†ä¸ºä¸‰å±‚ï¼š</p>
<p><strong>Framework å±‚ï¼ˆDartï¼‰</strong></p>
<ul>
<li><strong>Material/Cupertino</strong>ï¼šUI ç»„ä»¶åº“</li>
<li><strong>Widgets</strong>ï¼šç»„åˆå¼ UI æ„å»º</li>
<li><strong>Rendering</strong>ï¼šå¸ƒå±€ã€ç»˜åˆ¶ã€å‘½ä¸­æµ‹è¯•</li>
<li><strong>Animation/Painting/Gestures</strong>ï¼šåŠ¨ç”»ã€ç»˜å›¾ã€æ‰‹åŠ¿</li>
<li><strong>Foundation</strong>ï¼šåŸºç¡€å·¥å…·ç±»</li>
</ul>
<p><strong>Engine å±‚ï¼ˆC++ï¼‰</strong></p>
<ul>
<li><strong>Skia</strong>ï¼š2D æ¸²æŸ“å¼•æ“ï¼Œè´Ÿè´£å…‰æ …åŒ–</li>
<li><strong>Dart Runtime</strong>ï¼šDart è™šæ‹Ÿæœºï¼ŒJIT/AOT ç¼–è¯‘</li>
<li><strong>Text</strong>ï¼šæ–‡æœ¬æ’ç‰ˆå¼•æ“ï¼ˆlibtxt + HarfBuzz + ICUï¼‰</li>
<li><strong>Shell</strong>ï¼šå¹³å°é€‚é…å±‚</li>
</ul>
<p><strong>Embedder å±‚ï¼ˆå¹³å°ç›¸å…³ï¼‰</strong></p>
<ul>
<li>è´Ÿè´£ä¸åŸç”Ÿå¹³å°äº¤äº’</li>
<li>æä¾› Surface ä¾›æ¸²æŸ“</li>
<li>å¤„ç†è¾“å…¥äº‹ä»¶ã€ç”Ÿå‘½å‘¨æœŸ</li>
</ul>
<pre><code class="hljs language-scss" lang="scss">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Framework (Dart)            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚      Material / Cupertino          â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚            Widgets                  â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚           Rendering                 â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚   <span class="hljs-attribute">Animation</span> / Painting / Gestures  â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚          Foundation                 â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚              Engine (C++)                â”‚
â”‚  Skia â”‚ Dart VM â”‚ Text â”‚ Platform Shell â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚        Embedder (Platform Specific)      â”‚
â”‚     Android â”‚ iOS â”‚ Windows â”‚ macOS     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<hr/>
<h2 data-id="heading-2">äºŒã€ä¸‰æ£µæ ‘åŸç†ï¼ˆæ ¸å¿ƒé‡ç‚¹ï¼‰</h2>
<h3 data-id="heading-3">2. Widgetã€Elementã€RenderObject ä¸‰æ£µæ ‘çš„å…³ç³»ï¼Ÿ</h3>
<p><strong>Widget Treeï¼ˆé…ç½®æ ‘ï¼‰</strong></p>
<ul>
<li>Widget æ˜¯ä¸å¯å˜çš„ï¼ˆimmutableï¼‰é…ç½®æè¿°</li>
<li>è½»é‡çº§ï¼Œå¯é¢‘ç¹åˆ›å»ºé”€æ¯</li>
<li>åªæ˜¯ "è“å›¾"ï¼Œä¸ç›´æ¥å‚ä¸æ¸²æŸ“</li>
</ul>
<p><strong>Element Treeï¼ˆå…ƒç´ æ ‘ï¼‰</strong></p>
<ul>
<li>Widget çš„å®ä¾‹åŒ–å¯¹è±¡ï¼Œè¿æ¥ Widget å’Œ RenderObject</li>
<li>å¯å˜çš„ï¼Œæœ‰ç”Ÿå‘½å‘¨æœŸ</li>
<li>è´Ÿè´£ç®¡ç† Widget çš„å¤ç”¨å’Œæ›´æ–°</li>
<li>æŒæœ‰ BuildContextï¼ˆElement å°±æ˜¯ BuildContextï¼‰</li>
</ul>
<p><strong>RenderObject Treeï¼ˆæ¸²æŸ“æ ‘ï¼‰</strong></p>
<ul>
<li>çœŸæ­£è´Ÿè´£å¸ƒå±€ï¼ˆlayoutï¼‰å’Œç»˜åˆ¶ï¼ˆpaintï¼‰</li>
<li>åŒ…å«å°ºå¯¸ã€ä½ç½®ä¿¡æ¯</li>
<li>è®¡ç®—æˆæœ¬é«˜ï¼Œå°½é‡å¤ç”¨</li>
</ul>
<pre><code class="hljs language-scss" lang="scss">Widget Tree          Element Tree         RenderObject Tree
    â”‚                     â”‚                      â”‚
Container â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º ComponentElement           â”‚
    â”‚                     â”‚                      â”‚
    â””â”€â”€â–º <span class="hljs-attribute">Padding</span> â”€â”€â”€â”€â–º SingleChildRender â”€â”€â”€â–º RenderPadding
              â”‚           Element                    â”‚
              â””â”€â”€â–º Text â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º RenderParagraph
</code></pre>
<h3 data-id="heading-4">3. ä¸ºä»€ä¹ˆè¦è®¾è®¡ä¸‰æ£µæ ‘ï¼Ÿ</h3>
<p><strong>åˆ†ç¦»å…³æ³¨ç‚¹</strong>ï¼š</p>
<ul>
<li>Widgetï¼šæè¿° UI é…ç½®ï¼Œå¼€å‘è€…å‹å¥½</li>
<li>Elementï¼šç®¡ç†ç”Ÿå‘½å‘¨æœŸï¼Œé«˜æ•ˆ diff</li>
<li>RenderObjectï¼šä¸“æ³¨æ¸²æŸ“æ€§èƒ½</li>
</ul>
<p><strong>æ€§èƒ½ä¼˜åŒ–</strong>ï¼š</p>
<ul>
<li>Widget å¯é¢‘ç¹é‡å»ºï¼ˆO(n)åˆ›å»ºæˆæœ¬ä½ï¼‰</li>
<li>Element å¤ç”¨æœºåˆ¶å‡å°‘é‡å»º</li>
<li>RenderObject åªåœ¨å¿…è¦æ—¶æ›´æ–°</li>
</ul>
<p><strong>å¤ç”¨ç­–ç•¥</strong>ï¼š</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// Element çš„ updateChild æ ¸å¿ƒé€»è¾‘</span>
<span class="hljs-keyword">if</span> (widget == newWidget) <span class="hljs-keyword">return</span> child;  <span class="hljs-comment">// åŒä¸€å®ä¾‹ï¼Œæ— éœ€æ›´æ–°</span>
<span class="hljs-keyword">if</span> (widget.runtimeType == newWidget.runtimeType &amp;&amp;
    widget.key == newWidget.key) {
  child.update(newWidget);  <span class="hljs-comment">// å¤ç”¨ Elementï¼Œæ›´æ–°é…ç½®</span>
  <span class="hljs-keyword">return</span> child;
}
<span class="hljs-comment">// ç±»å‹æˆ– key ä¸åŒï¼Œé”€æ¯é‡å»º</span>
</code></pre>
<hr/>
<h2 data-id="heading-5">ä¸‰ã€æ¸²æŸ“ç®¡çº¿åŸç†</h2>
<h3 data-id="heading-6">4. Flutter çš„æ¸²æŸ“æµç¨‹æ˜¯æ€æ ·çš„ï¼Ÿ</h3>
<p>ä¸€å¸§çš„æ¸²æŸ“æµç¨‹ï¼ˆçº¦ 16.67ms @60fpsï¼‰ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ä¸€å¸§æ¸²æŸ“æµç¨‹                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Build   â”‚  Layout  â”‚  Paint   â”‚ Compositeâ”‚   Raster   â”‚
â”‚  æ„å»º     â”‚   å¸ƒå±€    â”‚   ç»˜åˆ¶    â”‚   åˆæˆ    â”‚   å…‰æ …åŒ–   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ setState â”‚ è®¡ç®—å¤§å°  â”‚ ç”ŸæˆLayer â”‚ æ„å»ºåœºæ™¯  â”‚  GPUæ¸²æŸ“   â”‚
â”‚ è§¦å‘é‡å»º  â”‚ ç¡®å®šä½ç½®  â”‚   Tree    â”‚   æ ‘     â”‚   ä¸Šå±    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
<span class="hljs-code">         UI Thread                          GPU Thread
</span></code></pre>
<p><strong>è¯¦ç»†æ­¥éª¤</strong>ï¼š</p>
<ol>
<li>
<p><strong>Build Phase</strong></p>
<ul>
<li><code>setState()</code> æ ‡è®° Element ä¸º dirty</li>
<li><code>WidgetsBinding.drawFrame()</code> è§¦å‘</li>
<li>è°ƒç”¨ <code>build()</code> æ–¹æ³•é‡å»º Widget æ ‘</li>
<li>Element è¿›è¡Œ diffï¼Œå†³å®šå¤ç”¨æˆ–é‡å»º</li>
</ul>
</li>
<li>
<p><strong>Layout Phase</strong></p>
<ul>
<li>ä»æ ¹èŠ‚ç‚¹å¼€å§‹ï¼Œçˆ¶ä¼ çº¦æŸç»™å­</li>
<li>å­è¿”å›å°ºå¯¸ç»™çˆ¶</li>
<li>ç¡®å®šæ¯ä¸ªèŠ‚ç‚¹çš„ Size å’Œ Position</li>
<li><strong>Constraints go down, Sizes go up</strong></li>
</ul>
</li>
<li>
<p><strong>Paint Phase</strong></p>
<ul>
<li>éå† RenderObject æ ‘</li>
<li>è°ƒç”¨ <code>paint()</code> æ–¹æ³•ç”Ÿæˆç»˜åˆ¶æŒ‡ä»¤</li>
<li>æ„å»º Layer Treeï¼ˆåˆ†å±‚åˆæˆï¼‰</li>
</ul>
</li>
<li>
<p><strong>Composite Phase</strong></p>
<ul>
<li>åˆæˆ Layer Tree ä¸º Scene</li>
<li>æäº¤ç»™ Engine</li>
</ul>
</li>
<li>
<p><strong>Raster Phase</strong></p>
<ul>
<li>Skia å°† Scene å…‰æ …åŒ–ä¸ºåƒç´ </li>
<li>GPU æ¸²æŸ“ä¸Šå±</li>
</ul>
</li>
</ol>
<h3 data-id="heading-7">5. Layout å¸ƒå±€çš„çº¦æŸä¼ é€’æœºåˆ¶ï¼Ÿ</h3>
<p>Flutter ä½¿ç”¨ <strong>ç›’çº¦æŸæ¨¡å‹ï¼ˆBox Constraintsï¼‰</strong>ï¼š</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BoxConstraints</span> </span>{
  <span class="hljs-keyword">final</span> <span class="hljs-built_in">double</span> minWidth;
  <span class="hljs-keyword">final</span> <span class="hljs-built_in">double</span> maxWidth;
  <span class="hljs-keyword">final</span> <span class="hljs-built_in">double</span> minHeight;
  <span class="hljs-keyword">final</span> <span class="hljs-built_in">double</span> maxHeight;
}
</code></pre>
<p><strong>çº¦æŸä¼ é€’è¿‡ç¨‹</strong>ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">çˆ¶ Widget
<span class="hljs-code">    â”‚
    â”œâ”€â”€â–º ä¼ é€’ Constraintsï¼ˆçº¦æŸï¼‰ç»™å­
    â”‚
å­ Widget
    â”‚
    â”œâ”€â”€â–º åœ¨çº¦æŸèŒƒå›´å†…ç¡®å®šè‡ªå·±çš„ Size
    â”‚
    â””â”€â”€â–º è¿”å› Size ç»™çˆ¶
</span>
çˆ¶ Widget
<span class="hljs-code">    â”‚
    â””â”€â”€â–º ç¡®å®šå­çš„ Positionï¼ˆåç§»ï¼‰
</span></code></pre>
<p><strong>æ ¸å¿ƒåŸåˆ™</strong>ï¼š</p>
<ul>
<li><strong>Tight Constraints</strong>ï¼šmin == maxï¼Œå¼ºåˆ¶å›ºå®šå¤§å°</li>
<li><strong>Loose Constraints</strong>ï¼šmin = 0ï¼Œå¯ä»»æ„å¤§å°</li>
<li><strong>Unbounded</strong>ï¼šmax = infinityï¼Œéœ€è¦å­è‡ªè¡Œå†³å®šå¤§å°</li>
</ul>
<h3 data-id="heading-8">6. RepaintBoundary çš„ä½œç”¨åŸç†ï¼Ÿ</h3>
<p><code>RepaintBoundary</code> åˆ›å»ºç‹¬ç«‹çš„ Layerï¼Œéš”ç¦»é‡ç»˜åŒºåŸŸã€‚</p>
<p><strong>åŸç†</strong>ï¼š</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// æ™®é€šæƒ…å†µï¼šå…±äº« Layerï¼Œä¸€å¤„æ”¹å˜å…¨éƒ¨é‡ç»˜</span>
Parent Layer
    â”œâ”€â”€ Child A (changed)
    â”œâ”€â”€ Child B (ä¹Ÿè¢«é‡ç»˜)
    â””â”€â”€ Child C (ä¹Ÿè¢«é‡ç»˜)

<span class="hljs-comment">// ä½¿ç”¨ RepaintBoundaryï¼šç‹¬ç«‹ Layer</span>
Parent Layer
    â”œâ”€â”€ Child A Layer (changedï¼Œåªé‡ç»˜è¿™ä¸ª)
    â”œâ”€â”€ Child B Layer (ä¿æŒä¸å˜)
    â””â”€â”€ Child C Layer (ä¿æŒä¸å˜)
</code></pre>
<p><strong>ä½¿ç”¨åœºæ™¯</strong>ï¼š</p>
<ul>
<li>é¢‘ç¹åŠ¨ç”»çš„å±€éƒ¨åŒºåŸŸ</li>
<li>å¤æ‚åˆ—è¡¨é¡¹</li>
<li>ç‹¬ç«‹æ›´æ–°çš„ç»„ä»¶ï¼ˆå¦‚ CustomPaintï¼‰</li>
</ul>
<hr/>
<h2 data-id="heading-9">å››ã€Element ç”Ÿå‘½å‘¨æœŸä¸æ›´æ–°æœºåˆ¶</h2>
<h3 data-id="heading-10">7. Element çš„ç”Ÿå‘½å‘¨æœŸï¼Ÿ</h3>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">abstract</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Element</span> </span>{
  <span class="hljs-comment">// 1. åˆ›å»ºï¼šWidget.createElement() è°ƒç”¨</span>
  <span class="hljs-built_in">Element</span>(Widget widget);

  <span class="hljs-comment">// 2. æŒ‚è½½ï¼šæ’å…¥ Element æ ‘</span>
  <span class="hljs-keyword">void</span> mount(<span class="hljs-built_in">Element?</span> parent, <span class="hljs-built_in">Object?</span> newSlot) {
    _parent = parent;
    _slot = newSlot;
    _lifecycleState = _ElementLifecycle.active;
    <span class="hljs-comment">// åˆ›å»º RenderObjectï¼ˆå¦‚æœæ˜¯ RenderObjectElementï¼‰</span>
  }

  <span class="hljs-comment">// 3. æ›´æ–°ï¼šWidget é…ç½®å˜åŒ–æ—¶</span>
  <span class="hljs-keyword">void</span> update(Widget newWidget) {
    _widget = newWidget;
  }

  <span class="hljs-comment">// 4. é‡å»ºï¼šæ ‡è®° dirty å</span>
  <span class="hljs-keyword">void</span> rebuild() {
    performRebuild();  <span class="hljs-comment">// è°ƒç”¨ build()</span>
  }

  <span class="hljs-comment">// 5. å¸è½½ï¼šä»æ ‘ä¸­ç§»é™¤</span>
  <span class="hljs-keyword">void</span> unmount() {
    _lifecycleState = _ElementLifecycle.defunct;
  }
}
</code></pre>
<h3 data-id="heading-11">8. setState() çš„å·¥ä½œåŸç†ï¼Ÿ</h3>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">void</span> setState(VoidCallback fn) {
  <span class="hljs-comment">// 1. æ‰§è¡Œå›è°ƒä¿®æ”¹çŠ¶æ€</span>
  fn();

  <span class="hljs-comment">// 2. æ ‡è®° Element ä¸º dirty</span>
  _element!.markNeedsBuild();
}

<span class="hljs-keyword">void</span> markNeedsBuild() {
  <span class="hljs-keyword">if</span> (dirty) <span class="hljs-keyword">return</span>;  <span class="hljs-comment">// é¿å…é‡å¤æ ‡è®°</span>
  _dirty = <span class="hljs-keyword">true</span>;

  <span class="hljs-comment">// 3. å°† Element åŠ å…¥ dirty åˆ—è¡¨</span>
  owner!.scheduleBuildFor(<span class="hljs-keyword">this</span>);
}

<span class="hljs-comment">// 4. ä¸‹ä¸€å¸§ç»Ÿä¸€é‡å»ºæ‰€æœ‰ dirty Elements</span>
<span class="hljs-keyword">void</span> buildScope(<span class="hljs-built_in">Element</span> context, [VoidCallback? callback]) {
  <span class="hljs-keyword">while</span> (_dirtyElements.isNotEmpty) {
    <span class="hljs-keyword">final</span> element = _dirtyElements.removeLast();
    element.rebuild();
  }
}
</code></pre>
<p><strong>é‡è¦ç‰¹æ€§</strong>ï¼š</p>
<ul>
<li><code>setState</code> æ˜¯å¼‚æ­¥çš„ï¼ˆä¸‹ä¸€å¸§æ‰ç”Ÿæ•ˆï¼‰</li>
<li>å¤šæ¬¡ <code>setState</code> ä¼šåˆå¹¶ï¼ˆåŒä¸€ Element åªé‡å»ºä¸€æ¬¡ï¼‰</li>
<li>åœ¨ <code>build()</code> ä¸­è°ƒç”¨ <code>setState</code> ä¼šæŠ¥é”™</li>
</ul>
<hr/>
<h2 data-id="heading-12">äº”ã€Key çš„åŸç†ä¸ä½œç”¨</h2>
<h3 data-id="heading-13">9. Key çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿåº•å±‚åŸç†ï¼Ÿ</h3>
<p><strong>ä½œç”¨</strong>ï¼šæ ‡è¯† Elementï¼Œæ§åˆ¶ Element çš„å¤ç”¨ç­–ç•¥ã€‚</p>
<p><strong>æ²¡æœ‰ Key çš„åŒ¹é…è§„åˆ™</strong>ï¼š</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// åªæ¯”è¾ƒ runtimeType</span>
canUpdate(oldWidget, newWidget) {
  <span class="hljs-keyword">return</span> oldWidget.runtimeType == newWidget.runtimeType;
}
</code></pre>
<p><strong>æœ‰ Key çš„åŒ¹é…è§„åˆ™</strong>ï¼š</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// æ¯”è¾ƒ runtimeType + key</span>
canUpdate(oldWidget, newWidget) {
  <span class="hljs-keyword">return</span> oldWidget.runtimeType == newWidget.runtimeType
      &amp;&amp; oldWidget.key == newWidget.key;
}
</code></pre>
<h3 data-id="heading-14">10. LocalKey vs GlobalKey çš„åŒºåˆ«ï¼Ÿ</h3>
<p><strong>LocalKey</strong>ï¼ˆValueKeyã€ObjectKeyã€UniqueKeyï¼‰ï¼š</p>
<ul>
<li>ä»…åœ¨å…„å¼ŸèŠ‚ç‚¹é—´å”¯ä¸€</li>
<li>ç”¨äº ListView ä¸­å…ƒç´ é‡æ’åº</li>
<li>è½»é‡çº§ï¼Œä¸è·¨æ ‘è®¿é—®</li>
</ul>
<p><strong>GlobalKey</strong>ï¼š</p>
<ul>
<li>å…¨å±€å”¯ä¸€ï¼Œå¯è·¨æ ‘è®¿é—®</li>
<li>æŒæœ‰ Element å¼•ç”¨ï¼Œå¯è·å– State å’Œ RenderObject</li>
<li>æˆæœ¬è¾ƒé«˜ï¼Œæ…ç”¨</li>
</ul>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// GlobalKey çš„åº•å±‚å®ç°</span>
<span class="hljs-keyword">final</span> <span class="hljs-built_in">Map</span>&lt;GlobalKey, <span class="hljs-built_in">Element</span>&gt; _globalKeyRegistry = {};

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">GlobalKey</span>&lt;<span class="hljs-title">T</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">State</span>&gt; <span class="hljs-keyword">extends</span> <span class="hljs-title">Key</span> </span>{
  <span class="hljs-built_in">Element?</span> <span class="hljs-keyword">get</span> _currentElement =&gt; _globalKeyRegistry[<span class="hljs-keyword">this</span>];

  BuildContext? <span class="hljs-keyword">get</span> currentContext =&gt; _currentElement;

  Widget? <span class="hljs-keyword">get</span> currentWidget =&gt; _currentElement?.widget;

  T? <span class="hljs-keyword">get</span> currentState =&gt; (_currentElement <span class="hljs-keyword">as</span> StatefulElement?)?.state <span class="hljs-keyword">as</span> T?;
}
</code></pre>
<hr/>
<h2 data-id="heading-15">å…­ã€InheritedWidget åŸç†</h2>
<h3 data-id="heading-16">11. InheritedWidget çš„å®ç°åŸç†ï¼Ÿ</h3>
<p><code>InheritedWidget</code> å®ç°äº†é«˜æ•ˆçš„è·¨å±‚çº§æ•°æ®ä¼ é€’ã€‚</p>
<p><strong>æ ¸å¿ƒæœºåˆ¶</strong>ï¼š</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">abstract</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">InheritedWidget</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">ProxyWidget</span> </span>{
  <span class="hljs-comment">// 1. åˆ›å»º InheritedElement</span>
  <span class="hljs-meta">@override</span>
  InheritedElement createElement() =&gt; InheritedElement(<span class="hljs-keyword">this</span>);

  <span class="hljs-comment">// 2. åˆ¤æ–­æ˜¯å¦éœ€è¦é€šçŸ¥ä¾èµ–è€…</span>
  <span class="hljs-built_in">bool</span> updateShouldNotify(InheritedWidget oldWidget);
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">InheritedElement</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">ProxyElement</span> </span>{
  <span class="hljs-comment">// 3. å­˜å‚¨ä¾èµ–å…³ç³»</span>
  <span class="hljs-keyword">final</span> <span class="hljs-built_in">Map</span>&lt;<span class="hljs-built_in">Element</span>, <span class="hljs-built_in">Object?</span>&gt; _dependents = {};

  <span class="hljs-comment">// 4. æ³¨å†Œä¾èµ–ï¼ˆdependOnInheritedWidgetOfExactType æ—¶è°ƒç”¨ï¼‰</span>
  <span class="hljs-keyword">void</span> setDependencies(<span class="hljs-built_in">Element</span> dependent, <span class="hljs-built_in">Object?</span> value) {
    _dependents[dependent] = value;
  }

  <span class="hljs-comment">// 5. æ›´æ–°æ—¶é€šçŸ¥æ‰€æœ‰ä¾èµ–è€…</span>
  <span class="hljs-keyword">void</span> notifyClients(InheritedWidget oldWidget) {
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">final</span> dependent <span class="hljs-keyword">in</span> _dependents.keys) {
      dependent.didChangeDependencies();
    }
  }
}
</code></pre>
<p><strong>æŸ¥æ‰¾è¿‡ç¨‹ï¼ˆO(1) å¤æ‚åº¦ï¼‰</strong>ï¼š</p>
<pre><code class="hljs language-dart" lang="dart">T? dependOnInheritedWidgetOfExactType&lt;T <span class="hljs-keyword">extends</span> InheritedWidget&gt;() {
  <span class="hljs-comment">// æ¯ä¸ª Element æŒæœ‰ç¥–å…ˆ InheritedElement çš„ Map</span>
  <span class="hljs-keyword">final</span> ancestor = _inheritedWidgets?[T];

  <span class="hljs-keyword">if</span> (ancestor != <span class="hljs-keyword">null</span>) {
    <span class="hljs-comment">// æ³¨å†Œä¾èµ–å…³ç³»</span>
    ancestor.setDependencies(<span class="hljs-keyword">this</span>, <span class="hljs-keyword">null</span>);
  }

  <span class="hljs-keyword">return</span> ancestor?.widget <span class="hljs-keyword">as</span> T?;
}
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆæ˜¯ O(1)ï¼Ÿ</strong></p>
<ul>
<li>Element åœ¨ mount æ—¶ä¼šç»§æ‰¿çˆ¶èŠ‚ç‚¹çš„ <code>_inheritedWidgets</code> Map</li>
<li>æŸ¥æ‰¾ç›´æ¥é€šè¿‡ Type ä½œä¸º key è·å–</li>
</ul>
<hr/>
<h2 data-id="heading-17">ä¸ƒã€BuildContext çš„æœ¬è´¨</h2>
<h3 data-id="heading-18">12. BuildContext æ˜¯ä»€ä¹ˆï¼Ÿ</h3>
<p><strong>æœ¬è´¨ï¼š<code>BuildContext</code> å°±æ˜¯ <code>Element</code></strong></p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">abstract</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Element</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">BuildContext</span> </span>{
  <span class="hljs-meta">@override</span>
  Widget <span class="hljs-keyword">get</span> widget =&gt; _widget!;

  <span class="hljs-meta">@override</span>
  <span class="hljs-built_in">bool</span> <span class="hljs-keyword">get</span> mounted =&gt; _lifecycleState == _ElementLifecycle.active;

  <span class="hljs-meta">@override</span>
  T? dependOnInheritedWidgetOfExactType&lt;T <span class="hljs-keyword">extends</span> InheritedWidget&gt;() {...}

  <span class="hljs-meta">@override</span>
  T? findAncestorWidgetOfExactType&lt;T <span class="hljs-keyword">extends</span> Widget&gt;() {...}

  <span class="hljs-meta">@override</span>
  T? findAncestorStateOfType&lt;T <span class="hljs-keyword">extends</span> State&gt;() {...}
}
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆè¦æŠ½è±¡æˆ BuildContextï¼Ÿ</strong></p>
<ul>
<li>é™åˆ¶å¼€å‘è€…åªèƒ½è®¿é—®å¿…è¦çš„ API</li>
<li>éšè— Element çš„å†…éƒ¨å®ç°ç»†èŠ‚</li>
<li>æä¾›æ›´æ¸…æ™°çš„è¯­ä¹‰ï¼ˆ"æ„å»ºä¸Šä¸‹æ–‡"ï¼‰</li>
</ul>
<hr/>
<h2 data-id="heading-19">å…«ã€Dart å¼‚æ­¥åŸç†</h2>
<h3 data-id="heading-20">13. Event Loop äº‹ä»¶å¾ªç¯æœºåˆ¶ï¼Ÿ</h3>
<p>Dart æ˜¯å•çº¿ç¨‹æ¨¡å‹ï¼Œé€šè¿‡äº‹ä»¶å¾ªç¯å¤„ç†å¼‚æ­¥ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Event Loop                  â”‚
â”‚                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚      Microtask Queue            â”‚    â”‚ â† ä¼˜å…ˆçº§é«˜
â”‚  â”‚  scheduleMicrotask / then       â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                  â†“                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚        Event Queue              â”‚    â”‚ â† ä¼˜å…ˆçº§ä½
â”‚  â”‚  Future / Timer / <span class="hljs-selector-tag">I</span>/O / æ‰‹åŠ¿    â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                          â”‚
â”‚  while (true) {                         â”‚
â”‚    while (microtaskQueue.isNotEmpty) {  â”‚
â”‚      microtaskQueue<span class="hljs-selector-class">.removeFirst</span>()();    â”‚
â”‚    }                                     â”‚
â”‚    if (eventQueue.isNotEmpty) {         â”‚
â”‚      eventQueue<span class="hljs-selector-class">.removeFirst</span>()();        â”‚
â”‚    }                                     â”‚
â”‚  }                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<p><strong>æ‰§è¡Œé¡ºåº</strong>ï¼š</p>
<ol>
<li>æ‰§è¡ŒåŒæ­¥ä»£ç </li>
<li>æ‰§è¡Œæ‰€æœ‰ Microtaskï¼ˆç›´åˆ°é˜Ÿåˆ—ç©ºï¼‰</li>
<li>æ‰§è¡Œä¸€ä¸ª Event</li>
<li>å›åˆ°æ­¥éª¤ 2</li>
</ol>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">void</span> main() {
  <span class="hljs-built_in">print</span>(<span class="hljs-string">'1'</span>);  <span class="hljs-comment">// åŒæ­¥</span>

  Future(() =&gt; <span class="hljs-built_in">print</span>(<span class="hljs-string">'2'</span>));  <span class="hljs-comment">// Event Queue</span>

  scheduleMicrotask(() =&gt; <span class="hljs-built_in">print</span>(<span class="hljs-string">'3'</span>));  <span class="hljs-comment">// Microtask Queue</span>

  Future.microtask(() =&gt; <span class="hljs-built_in">print</span>(<span class="hljs-string">'4'</span>));  <span class="hljs-comment">// Microtask Queue</span>

  <span class="hljs-built_in">print</span>(<span class="hljs-string">'5'</span>);  <span class="hljs-comment">// åŒæ­¥</span>
}
<span class="hljs-comment">// è¾“å‡ºï¼š1, 5, 3, 4, 2</span>
</code></pre>
<h3 data-id="heading-21">14. Future å’Œ async/await çš„åŸç†ï¼Ÿ</h3>
<p><strong>Future æœ¬è´¨</strong>ï¼š</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Future</span>&lt;<span class="hljs-title">T</span>&gt; </span>{
  <span class="hljs-comment">// çŠ¶æ€ï¼špending / completed / error</span>
  _FutureState _state;

  <span class="hljs-comment">// ç»“æœå€¼æˆ–é”™è¯¯</span>
  T? _value;
  <span class="hljs-built_in">Object?</span> _error;

  <span class="hljs-comment">// å›è°ƒé“¾è¡¨</span>
  _FutureListener? _listeners;

  <span class="hljs-comment">// å®Œæˆæ—¶è§¦å‘æ‰€æœ‰å›è°ƒ</span>
  <span class="hljs-keyword">void</span> _complete(T value) {
    _value = value;
    _state = _FutureState.completed;
    _propagateToListeners();
  }
}
</code></pre>
<p><strong>async/await ç¼–è¯‘è½¬æ¢</strong>ï¼š</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// æºä»£ç </span>
Future&lt;<span class="hljs-built_in">int</span>&gt; fetchData() <span class="hljs-keyword">async</span> {
  <span class="hljs-keyword">final</span> response = <span class="hljs-keyword">await</span> http.<span class="hljs-keyword">get</span>(url);
  <span class="hljs-keyword">return</span> response.statusCode;
}

<span class="hljs-comment">// ç¼–è¯‘åï¼ˆä¼ªä»£ç ï¼‰</span>
Future&lt;<span class="hljs-built_in">int</span>&gt; fetchData() {
  <span class="hljs-keyword">return</span> Future.<span class="hljs-keyword">sync</span>(() {
    <span class="hljs-keyword">return</span> http.<span class="hljs-keyword">get</span>(url).then((response) {
      <span class="hljs-keyword">return</span> response.statusCode;
    });
  });
}
</code></pre>
<h3 data-id="heading-22">15. Isolate çš„é€šä¿¡åŸç†ï¼Ÿ</h3>
<p><strong>Isolate æ˜¯ç‹¬ç«‹çš„å†…å­˜ç©ºé—´</strong>ï¼Œé€šè¿‡ Port é€šä¿¡ï¼š</p>
<pre><code class="hljs language-dart" lang="dart">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Main Isolate â”‚         â”‚   New Isolate   â”‚
â”‚                 â”‚         â”‚                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  æ¶ˆæ¯   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ SendPort  â”‚â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚  â”‚ReceivePortâ”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚         â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                 â”‚         â”‚                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  æ¶ˆæ¯   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ReceivePortâ”‚â—„â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚  â”‚ SendPort  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚         â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                 â”‚         â”‚                 â”‚
â”‚  ç‹¬ç«‹ Heap      â”‚         â”‚   ç‹¬ç«‹ Heap     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<p><strong>æ¶ˆæ¯ä¼ é€’æœºåˆ¶</strong>ï¼š</p>
<ul>
<li>æ¶ˆæ¯é€šè¿‡<strong>æ·±æ‹·è´</strong>ä¼ é€’ï¼ˆä¸å…±äº«å†…å­˜ï¼‰</li>
<li>æ”¯æŒåŸºæœ¬ç±»å‹ã€Listã€Mapã€SendPort</li>
<li>ä¸æ”¯æŒé—­åŒ…ã€å‡½æ•°å¼•ç”¨</li>
</ul>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// ä½¿ç”¨ compute ç®€åŒ–</span>
<span class="hljs-keyword">final</span> result = <span class="hljs-keyword">await</span> compute(expensiveOperation, data);

<span class="hljs-comment">// åº•å±‚å®ç°</span>
Future&lt;R&gt; compute&lt;Q, R&gt;(ComputeCallback&lt;Q, R&gt; callback, Q message) {
  <span class="hljs-keyword">final</span> receivePort = ReceivePort();
  <span class="hljs-keyword">await</span> Isolate.spawn(_isolateEntry, [receivePort.sendPort, callback, message]);
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> receivePort.first <span class="hljs-keyword">as</span> R;
}
</code></pre>
<hr/>
<h2 data-id="heading-23">ä¹ã€Platform Channel åŸç†</h2>
<h3 data-id="heading-24">16. Flutter å¦‚ä½•ä¸åŸç”Ÿé€šä¿¡ï¼Ÿ</h3>
<p><strong>ä¸‰ç§ Channel ç±»å‹</strong>ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">Flutter (Dart)          Platform (Native)
     â”‚                        â”‚
     â”‚    MethodChannel       â”‚
     â”‚ â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚  è¯·æ±‚/å“åº”æ¨¡å¼
     â”‚                        â”‚
     â”‚   EventChannel         â”‚
     â”‚ â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚  æ•°æ®æµ/äº‹ä»¶æ¨¡å¼
     â”‚                        â”‚
     â”‚ BasicMessageChannel    â”‚
     â”‚ â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚  åŸºç¡€æ¶ˆæ¯æ¨¡å¼
     â”‚                        â”‚
</code></pre>
<p><strong>MethodChannel è°ƒç”¨æµç¨‹</strong>ï¼š</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// Dart ç«¯</span>
<span class="hljs-keyword">final</span> channel = MethodChannel(<span class="hljs-string">'com.example/battery'</span>);
<span class="hljs-keyword">final</span> batteryLevel = <span class="hljs-keyword">await</span> channel.invokeMethod(<span class="hljs-string">'getBatteryLevel'</span>);

<span class="hljs-comment">// iOS ç«¯ (Swift)</span>
let channel = FlutterMethodChannel(name: <span class="hljs-string">"com.example/battery"</span>,
                                    binaryMessenger: controller.binaryMessenger)
channel.setMethodCallHandler { (call, result) <span class="hljs-keyword">in</span>
  <span class="hljs-keyword">if</span> call.method == <span class="hljs-string">"getBatteryLevel"</span> {
    result(UIDevice.current.batteryLevel * <span class="hljs-number">100</span>)
  }
}
</code></pre>
<p><strong>åº•å±‚é€šä¿¡æœºåˆ¶</strong>ï¼š</p>
<ol>
<li>Dart è°ƒç”¨ <code>invokeMethod</code>ï¼Œåºåˆ—åŒ–å‚æ•°</li>
<li>é€šè¿‡ JNIï¼ˆAndroidï¼‰/ C APIï¼ˆiOSï¼‰ä¼ é€’äºŒè¿›åˆ¶æ•°æ®</li>
<li>åŸç”Ÿç«¯è§£ç ï¼Œæ‰§è¡Œæ–¹æ³•ï¼Œç¼–ç ç»“æœ</li>
<li>è¿”å›ç»™ Dartï¼Œååºåˆ—åŒ–</li>
</ol>
<p><strong>æ¶ˆæ¯ç¼–è§£ç å™¨</strong>ï¼š</p>
<ul>
<li><code>StandardMessageCodec</code>ï¼šæ”¯æŒåŸºæœ¬ç±»å‹</li>
<li><code>JSONMessageCodec</code>ï¼šJSON æ ¼å¼</li>
<li><code>BinaryCodec</code>ï¼šåŸå§‹å­—èŠ‚</li>
</ul>
<hr/>
<h2 data-id="heading-25">åã€çƒ­é‡è½½åŸç†</h2>
<h3 data-id="heading-26">17. Hot Reload çš„å®ç°åŸç†ï¼Ÿ</h3>
<pre><code class="hljs">å¼€å‘æœº                              è®¾å¤‡/æ¨¡æ‹Ÿå™¨
   â”‚                                    â”‚
   â”‚  1. æ£€æµ‹æ–‡ä»¶å˜åŒ–                    â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚
   â”‚                                    â”‚
   â”‚  2. å¢é‡ç¼–è¯‘ï¼Œç”Ÿæˆ kernel å·®å¼‚æ–‡ä»¶   â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚
   â”‚                                    â”‚
   â”‚  3. é€šè¿‡ VM Service å‘é€åˆ°è®¾å¤‡      â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚
   â”‚                                    â”‚
   â”‚  4. Dart VM åŠ è½½æ–°ä»£ç               â”‚
   â”‚  5. é‡å»º Widget æ ‘                  â”‚
   â”‚  6. ä¿ç•™ State çŠ¶æ€                 â”‚
   â”‚                                    â”‚
</code></pre>
<p><strong>å…³é”®ç‚¹</strong>ï¼š</p>
<ul>
<li>JIT ç¼–è¯‘æ¨¡å¼æ”¯æŒï¼ˆDebug onlyï¼‰</li>
<li>å¢é‡ç¼–è¯‘ï¼ˆåªç¼–è¯‘å˜åŒ–çš„ä»£ç ï¼‰</li>
<li>Widget é‡å»ºï¼ŒState ä¿ç•™</li>
<li>ä¸ä¼šè§¦å‘ <code>initState()</code></li>
</ul>
<p><strong>Hot Reload vs Hot Restart</strong>ï¼š</p>






























<table><thead><tr><th>ç‰¹æ€§</th><th>Hot Reload</th><th>Hot Restart</th></tr></thead><tbody><tr><td>State çŠ¶æ€</td><td>ä¿ç•™</td><td>ä¸¢å¤±</td></tr><tr><td>é€Ÿåº¦</td><td>å¿«ï¼ˆ~1sï¼‰</td><td>è¾ƒæ…¢ï¼ˆå‡ ç§’ï¼‰</td></tr><tr><td>å…¨å±€å˜é‡</td><td>ä¿ç•™</td><td>é‡ç½®</td></tr><tr><td>é™æ€å­—æ®µ</td><td>ä¿ç•™</td><td>é‡ç½®</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-27">åä¸€ã€æ‰‹åŠ¿è¯†åˆ«åŸç†</h2>
<h3 data-id="heading-28">18. Flutter çš„æ‰‹åŠ¿ç³»ç»Ÿæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ</h3>
<p><strong>äº‹ä»¶åˆ†å‘æµç¨‹</strong>ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">åŸç”Ÿè§¦æ‘¸äº‹ä»¶
     â”‚
     â–¼
GestureBinding<span class="hljs-selector-class">.handlePointerEvent</span>()
     â”‚
     â–¼
å‘½ä¸­æµ‹è¯• (Hit Test) â”€â”€â–º ç¡®å®šè§¦æ‘¸ç‚¹ä¸‹çš„æ‰€æœ‰ Widget
     â”‚
     â–¼
æ”¶é›† HitTestEntry åˆ—è¡¨
     â”‚
     â–¼
äº‹ä»¶åˆ†å‘åˆ°æ‰€æœ‰å‘½ä¸­çš„ Widget
     â”‚
     â–¼
æ‰‹åŠ¿ç«æŠ€åœº (Gesture Arena) å†³å®šèƒœè€…
</code></pre>
<p><strong>æ‰‹åŠ¿ç«æŠ€åœºï¼ˆGesture Arenaï¼‰</strong>ï¼š</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// å½“å¤šä¸ªæ‰‹åŠ¿è¯†åˆ«å™¨ç«äº‰æ—¶</span>
GestureRecognizer A (Tap)     â”€â”€â”
GestureRecognizer B (DoubleTap) â”‚ â”€â”€â–º Arena â”€â”€â–º èƒœè€…æ‰§è¡Œ
GestureRecognizer C (LongPress) â”˜
</code></pre>
<p><strong>ç«äº‰è§„åˆ™</strong>ï¼š</p>
<ol>
<li>è¯†åˆ«å™¨è°ƒç”¨ <code>addPointer</code> åŠ å…¥ç«æŠ€åœº</li>
<li>ç¡®å®šæ‰‹åŠ¿åè°ƒç”¨ <code>accept()</code> æˆ– <code>reject()</code></li>
<li>åªæœ‰ä¸€ä¸ªèƒœè€…æ—¶ï¼Œèƒœè€…è·èƒœ</li>
<li>æ‰€æœ‰ç«äº‰è€… rejectï¼Œç¬¬ä¸€ä¸ª hold çš„è·èƒœ</li>
</ol>
<hr/>
<h2 data-id="heading-29">åäºŒã€åŠ¨ç”»åŸç†</h2>
<h3 data-id="heading-30">19. Flutter åŠ¨ç”»çš„åº•å±‚å®ç°ï¼Ÿ</h3>
<p><strong>æ ¸å¿ƒç»„ä»¶</strong>ï¼š</p>
<pre><code class="hljs language-dart" lang="dart">AnimationController
     â”‚
     â”œâ”€â”€ Ticker â”€â”€â–º æ¥æ”¶ vsync ä¿¡å·ï¼ˆæ¯å¸§ä¸€æ¬¡ï¼‰
     â”‚
     â”œâ”€â”€ AnimationStatus â”€â”€â–º forward / reverse / completed / dismissed
     â”‚
     â””â”€â”€ Value (<span class="hljs-number">0.0</span> ~ <span class="hljs-number">1.0</span>) â”€â”€â–º å½“å‰è¿›åº¦å€¼
</code></pre>
<p><strong>Ticker ä¸ SchedulerBinding</strong>ï¼š</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Ticker</span> </span>{
  TickerCallback _onTick;

  <span class="hljs-keyword">void</span> scheduleTick() {
    <span class="hljs-comment">// æ³¨å†Œåˆ°ä¸‹ä¸€å¸§å›è°ƒ</span>
    SchedulerBinding.instance.scheduleFrameCallback(_tick);
  }

  <span class="hljs-keyword">void</span> _tick(<span class="hljs-built_in">Duration</span> elapsed) {
    _onTick(elapsed);  <span class="hljs-comment">// æ›´æ–°åŠ¨ç”»å€¼</span>
    <span class="hljs-keyword">if</span> (isActive) scheduleTick();  <span class="hljs-comment">// ç»§ç»­ä¸‹ä¸€å¸§</span>
  }
}
</code></pre>
<p><strong>åŠ¨ç”»æµç¨‹</strong>ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">VSync ä¿¡å· (<span class="hljs-number">60</span>fps)
     â”‚
     â–¼
SchedulerBinding<span class="hljs-selector-class">.handleBeginFrame</span>()
     â”‚
     â–¼
Ticker<span class="hljs-selector-class">._tick</span>() â”€â”€â–º AnimationController æ›´æ–° value
     â”‚
     â–¼
<span class="hljs-built_in">notifyListeners</span>() â”€â”€â–º AnimatedBuilder é‡å»º
     â”‚
     â–¼
ä¸‹ä¸€å¸§...
</code></pre>
<hr/>
<h2 data-id="heading-31">åä¸‰ã€å†…å­˜ç®¡ç†ä¸åƒåœ¾å›æ”¶</h2>
<h3 data-id="heading-32">20. Dart çš„åƒåœ¾å›æ”¶æœºåˆ¶ï¼Ÿ</h3>
<p><strong>åˆ†ä»£å¼åƒåœ¾å›æ”¶</strong>ï¼š</p>
<pre><code class="hljs language-sql" lang="sql">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            Dart Heap                â”‚
â”‚                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  <span class="hljs-keyword">New</span> Space   â”‚  â”‚  <span class="hljs-keyword">Old</span> Space   â”‚ â”‚
â”‚  â”‚  (å¹´è½»ä»£)     â”‚  â”‚   (è€å¹´ä»£)    â”‚ â”‚
â”‚  â”‚              â”‚  â”‚              â”‚ â”‚
â”‚  â”‚ å°å¯¹è±¡<span class="hljs-operator">/</span>çŸ­å‘½   â”‚  â”‚ å¤§å¯¹è±¡<span class="hljs-operator">/</span>é•¿å¯¿   â”‚ â”‚
â”‚  â”‚ é¢‘ç¹ GC      â”‚  â”‚ è¾ƒå°‘ GC      â”‚ â”‚
â”‚  â”‚ <span class="hljs-keyword">Copy</span> GC     â”‚  â”‚ Mark<span class="hljs-operator">-</span>Sweep   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<p><strong>New Spaceï¼ˆå¹´è½»ä»£ï¼‰</strong>ï¼š</p>
<ul>
<li>é‡‡ç”¨ <strong>åŠç©ºé—´å¤åˆ¶ç®—æ³•</strong></li>
<li>åˆ†ä¸º From å’Œ To ä¸¤ä¸ªåŒºåŸŸ</li>
<li>GC æ—¶å­˜æ´»å¯¹è±¡å¤åˆ¶åˆ° Toï¼ŒFrom æ¸…ç©º</li>
<li>é€Ÿåº¦å¿«ï¼Œä½†éœ€è¦åŒå€ç©ºé—´</li>
</ul>
<p><strong>Old Spaceï¼ˆè€å¹´ä»£ï¼‰</strong>ï¼š</p>
<ul>
<li>é‡‡ç”¨ <strong>æ ‡è®°-æ¸…é™¤-æ•´ç†</strong> ç®—æ³•</li>
<li>GC è¿‡ç¨‹ï¼šæ ‡è®°å­˜æ´»å¯¹è±¡ â†’ æ¸…é™¤æ­»å¯¹è±¡ â†’ æ•´ç†å†…å­˜ç¢ç‰‡</li>
<li>å¹¶å‘æ‰§è¡Œï¼Œå‡å°‘åœé¡¿</li>
</ul>
<p><strong>å¯¹è±¡æ™‹å‡</strong>ï¼š</p>
<ul>
<li>åœ¨ New Space å­˜æ´»å¤šæ¬¡ GC åæ™‹å‡åˆ° Old Space</li>
<li>å¤§å¯¹è±¡ç›´æ¥åˆ†é…åˆ° Old Space</li>
</ul>
<hr/>
<h2 data-id="heading-33">åå››ã€å›¾ç‰‡åŠ è½½åŸç†</h2>
<h3 data-id="heading-34">21. Flutter å›¾ç‰‡åŠ è½½ä¸ç¼“å­˜æœºåˆ¶ï¼Ÿ</h3>
<pre><code class="hljs language-scss" lang="scss">Image<span class="hljs-selector-class">.network</span>(url)
     â”‚
     â–¼
ImageProvider â”€â”€â–º åˆ›å»º ImageStreamCompleter
     â”‚
     â–¼
ImageCache â”€â”€â–º æ£€æŸ¥ç¼“å­˜ï¼ˆå†…å­˜ï¼‰
     â”‚
     â”œâ”€â”€ å‘½ä¸­ â”€â”€â–º ç›´æ¥è¿”å› ImageInfo
     â”‚
     â””â”€â”€ æœªå‘½ä¸­ â”€â”€â–º åŠ è½½å›¾ç‰‡
                      â”‚
                      â–¼
               NetworkImage<span class="hljs-selector-class">._loadAsync</span>()
                      â”‚
                      â–¼
               HttpClient<span class="hljs-selector-class">.get</span>() ä¸‹è½½
                      â”‚
                      â–¼
               <span class="hljs-built_in">instantiateImageCodec</span>() è§£ç 
                      â”‚
                      â–¼
               ç¼“å­˜åˆ° ImageCache
                      â”‚
                      â–¼
               è¿”å› ImageInfo â”€â”€â–º RenderImage ç»˜åˆ¶
</code></pre>
<p><strong>ImageCache ç­–ç•¥</strong>ï¼š</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ImageCache</span> </span>{
  <span class="hljs-comment">// é™åˆ¶ç¼“å­˜å¤§å°</span>
  <span class="hljs-built_in">int</span> _maximumSize = <span class="hljs-number">1000</span>;  <span class="hljs-comment">// æœ€å¤§æ•°é‡</span>
  <span class="hljs-built_in">int</span> _maximumSizeBytes = <span class="hljs-number">100</span> &lt;&lt; <span class="hljs-number">20</span>;  <span class="hljs-comment">// æœ€å¤§å­—èŠ‚æ•° (100MB)</span>

  <span class="hljs-comment">// LRU ç¼“å­˜</span>
  <span class="hljs-keyword">final</span> <span class="hljs-built_in">Map</span>&lt;<span class="hljs-built_in">Object</span>, _PendingImage&gt; _pendingImages;
  <span class="hljs-keyword">final</span> <span class="hljs-built_in">Map</span>&lt;<span class="hljs-built_in">Object</span>, _CachedImage&gt; _cache;
}
</code></pre>
<hr/>
<h2 data-id="heading-35">åäº”ã€Sliver ä¸åˆ—è¡¨åŸç†</h2>
<h3 data-id="heading-36">22. ListView çš„æ‡’åŠ è½½åŸç†ï¼Ÿ</h3>
<p><strong>Sliver åè®®</strong>ï¼š</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// çº¦æŸï¼ˆä» Viewport ä¼ é€’ç»™ Sliverï¼‰</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SliverConstraints</span> </span>{
  <span class="hljs-built_in">double</span> scrollOffset;      <span class="hljs-comment">// å·²æ»šåŠ¨çš„è·ç¦»</span>
  <span class="hljs-built_in">double</span> remainingPaintExtent;  <span class="hljs-comment">// å‰©ä½™å¯ç»˜åˆ¶åŒºåŸŸ</span>
  <span class="hljs-built_in">double</span> viewportMainAxisExtent;  <span class="hljs-comment">// è§†å£å¤§å°</span>
  <span class="hljs-comment">// ...</span>
}

<span class="hljs-comment">// å‡ ä½•ä¿¡æ¯ï¼ˆSliver è¿”å›ç»™ Viewportï¼‰</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SliverGeometry</span> </span>{
  <span class="hljs-built_in">double</span> scrollExtent;   <span class="hljs-comment">// æ€»æ»šåŠ¨èŒƒå›´</span>
  <span class="hljs-built_in">double</span> paintExtent;    <span class="hljs-comment">// ç»˜åˆ¶èŒƒå›´</span>
  <span class="hljs-built_in">double</span> layoutExtent;   <span class="hljs-comment">// å¸ƒå±€èŒƒå›´</span>
  <span class="hljs-comment">// ...</span>
}
</code></pre>
<p><strong>æ‡’åŠ è½½å®ç°</strong>ï¼š</p>
<pre><code class="hljs">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Viewport                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚  â”‚
â”‚  â”‚    â”‚ Item 0  â”‚ â† å·²å›æ”¶        â”‚  â”‚
â”‚  â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚  â”‚
â”‚  â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚  â”‚
â”‚  â”‚    â”‚ Item 1  â”‚ â† ç¼“å­˜åŒº        â”‚  â”‚
â”‚  â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ å¯è§†åŒºåŸŸ â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚  â”‚
â”‚  â”‚    â”‚ Item 2  â”‚ â† æ¸²æŸ“          â”‚  â”‚
â”‚  â”‚    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                 â”‚  â”‚
â”‚  â”‚    â”‚ Item 3  â”‚ â† æ¸²æŸ“          â”‚  â”‚
â”‚  â”‚    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                 â”‚  â”‚
â”‚  â”‚    â”‚ Item 4  â”‚ â† æ¸²æŸ“          â”‚  â”‚
â”‚  â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚  â”‚
â”‚  â”‚    â”‚ Item 5  â”‚ â† ç¼“å­˜åŒº        â”‚  â”‚
â”‚  â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚  â”‚
â”‚  â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚  â”‚
â”‚  â”‚    â”‚ Item 6  â”‚ â† æœªæ„å»º        â”‚  â”‚
â”‚  â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<p><strong>SliverList æ ¸å¿ƒé€»è¾‘</strong>ï¼š</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// åªæ„å»ºå¯è§†åŒºåŸŸ + ç¼“å­˜åŒºçš„ children</span>
<span class="hljs-keyword">void</span> performLayout() {
  <span class="hljs-comment">// è®¡ç®—é¦–ä¸ªå¯è§ child çš„ index</span>
  <span class="hljs-keyword">final</span> <span class="hljs-built_in">int</span> firstIndex = getMinChildIndexForScrollOffset(scrollOffset);

  <span class="hljs-comment">// å¸ƒå±€å¯è§çš„ children</span>
  <span class="hljs-keyword">while</span> (endScrollOffset &lt; targetEndScrollOffset) {
    <span class="hljs-keyword">final</span> child = obtainChild(index);  <span class="hljs-comment">// æŒ‰éœ€åˆ›å»º</span>
    layoutChild(child);
    index++;
  }

  <span class="hljs-comment">// å›æ”¶ä¸å¯è§çš„ children</span>
  collectGarbage(leadingGarbage, trailingGarbage);
}
</code></pre>
<hr/>
<h2 data-id="heading-37">åå…­ã€Skia ä¸ Impeller</h2>
<h3 data-id="heading-38">23. Skia æ¸²æŸ“å¼•æ“çš„å·¥ä½œåŸç†ï¼Ÿ</h3>
<p><strong>Skia æ¸²æŸ“æµç¨‹</strong>ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">Layer Tree (Dart)
     â”‚
     â–¼
Scene (C++)
     â”‚
     â–¼
Skia â”€â”€â–º ç»˜åˆ¶å‘½ä»¤è½¬æ¢ä¸º GPU æŒ‡ä»¤
     â”‚
     â–¼
OpenGL / Metal / Vulkan
     â”‚
     â–¼
GPU æ¸²æŸ“
     â”‚
     â–¼
å¸§ç¼“å†²åŒº â”€â”€â–º å±å¹•æ˜¾ç¤º
</code></pre>
<p><strong>Impellerï¼ˆæ–°æ¸²æŸ“å¼•æ“ï¼‰</strong>ï¼š</p>
<ul>
<li>é¢„ç¼–è¯‘ Shaderï¼Œé¿å…è¿è¡Œæ—¶ç¼–è¯‘å¡é¡¿</li>
<li>æ›´å¥½çš„åˆ©ç”¨ Metalï¼ˆiOSï¼‰å’Œ Vulkanï¼ˆAndroidï¼‰</li>
<li>å‡å°‘ Jankï¼ˆæ‰å¸§ï¼‰</li>
</ul>
<hr/>
<h2 data-id="heading-39">åä¸ƒã€çŠ¶æ€ç®¡ç†åŸç†</h2>
<h3 data-id="heading-40">24. Provider çš„å®ç°åŸç†ï¼Ÿ</h3>
<p><strong>æ ¸å¿ƒåŸºäº InheritedWidget</strong>ï¼š</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">InheritedProvider</span>&lt;<span class="hljs-title">T</span>&gt; <span class="hljs-keyword">extends</span> <span class="hljs-title">InheritedWidget</span> </span>{
  <span class="hljs-keyword">final</span> T value;

  <span class="hljs-comment">// è®¢é˜…ä¾èµ–</span>
  <span class="hljs-keyword">static</span> T of&lt;T&gt;(BuildContext context) {
    <span class="hljs-keyword">return</span> context.dependOnInheritedWidgetOfExactType&lt;InheritedProvider&lt;T&gt;&gt;()!.value;
  }

  <span class="hljs-meta">@override</span>
  <span class="hljs-built_in">bool</span> updateShouldNotify(InheritedProvider&lt;T&gt; oldWidget) {
    <span class="hljs-keyword">return</span> value != oldWidget.value;
  }
}
</code></pre>
<p><strong>ChangeNotifier + Selector ä¼˜åŒ–</strong>ï¼š</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// ChangeNotifier æä¾›ç»†ç²’åº¦æ›´æ–°</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Counter</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">ChangeNotifier</span> </span>{
  <span class="hljs-built_in">int</span> _count = <span class="hljs-number">0</span>;
  <span class="hljs-built_in">int</span> <span class="hljs-keyword">get</span> count =&gt; _count;

  <span class="hljs-keyword">void</span> increment() {
    _count++;
    notifyListeners();  <span class="hljs-comment">// é€šçŸ¥ç›‘å¬è€…</span>
  }
}

<span class="hljs-comment">// Selector åªç›‘å¬ç‰¹å®šå±æ€§</span>
Selector&lt;Counter, <span class="hljs-built_in">int</span>&gt;(
  selector: (_, counter) =&gt; counter.count,
  builder: (_, count, __) =&gt; Text(<span class="hljs-string">'<span class="hljs-subst">$count</span>'</span>),
)
</code></pre>
<hr/>
<h2 data-id="heading-41">åå…«ã€ç¼–è¯‘ä¸è¿è¡Œæ¨¡å¼</h2>
<h3 data-id="heading-42">25. JIT vs AOT ç¼–è¯‘çš„åŒºåˆ«ï¼Ÿ</h3>








































<table><thead><tr><th>ç‰¹æ€§</th><th>JIT (Just-In-Time)</th><th>AOT (Ahead-Of-Time)</th></tr></thead><tbody><tr><td>ç¼–è¯‘æ—¶æœº</td><td>è¿è¡Œæ—¶</td><td>æ„å»ºæ—¶</td></tr><tr><td>å¯åŠ¨é€Ÿåº¦</td><td>æ…¢ï¼ˆéœ€ç¼–è¯‘ï¼‰</td><td>å¿«ï¼ˆç›´æ¥è¿è¡Œï¼‰</td></tr><tr><td>è¿è¡Œæ€§èƒ½</td><td>å¯åŠ¨æ€ä¼˜åŒ–</td><td>å›ºå®šä¼˜åŒ–</td></tr><tr><td>åŒ…ä½“ç§¯</td><td>å°ï¼ˆæºå¸¦æºç ï¼‰</td><td>å¤§ï¼ˆåŒ…å«æœºå™¨ç ï¼‰</td></tr><tr><td>è°ƒè¯•æ”¯æŒ</td><td>æ”¯æŒçƒ­é‡è½½</td><td>ä¸æ”¯æŒ</td></tr><tr><td>ä½¿ç”¨åœºæ™¯</td><td>Debug æ¨¡å¼</td><td>Release æ¨¡å¼</td></tr></tbody></table>
<p><strong>ç¼–è¯‘äº§ç‰©</strong>ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">Debug (JIT):
  â””â”€â”€ app.dill (Kernel å­—èŠ‚ç )

Release (AOT):
  â””â”€â”€ app.so / App.framework (æœºå™¨ç )
</code></pre>
<hr/>
<h2 data-id="heading-43">åä¹ã€å¸¸è§æ€§èƒ½ä¼˜åŒ–åŸç†</h2>
<h3 data-id="heading-44">26. const æ„é€ å‡½æ•°çš„ä¼˜åŒ–åŸç†ï¼Ÿ</h3>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// æ²¡æœ‰ constï¼šæ¯æ¬¡ build åˆ›å»ºæ–°å®ä¾‹</span>
Widget build() {
  <span class="hljs-keyword">return</span> Container(
    child: Text(<span class="hljs-string">'Hello'</span>),  <span class="hljs-comment">// æ–°å®ä¾‹</span>
  );
}

<span class="hljs-comment">// ä½¿ç”¨ constï¼šç¼–è¯‘æœŸåˆ›å»ºå•ä¾‹ï¼Œå¤ç”¨</span>
Widget build() {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">const</span> Container(
    child: Text(<span class="hljs-string">'Hello'</span>),  <span class="hljs-comment">// åŒä¸€å®ä¾‹</span>
  );
}
</code></pre>
<p><strong>ä¼˜åŒ–æ•ˆæœ</strong>ï¼š</p>
<ul>
<li>å‡å°‘å¯¹è±¡åˆ›å»ºï¼Œé™ä½ GC å‹åŠ›</li>
<li>Widget ç›¸åŒå®ä¾‹ï¼ŒElement ç›´æ¥è·³è¿‡æ›´æ–°</li>
<li><code>canUpdate</code> è¿”å› true ä¸” <code>widget == newWidget</code>ï¼Œæ— éœ€ rebuild</li>
</ul>
<h3 data-id="heading-45">27. shouldRebuild ä¸ shouldRepaint çš„ä½œç”¨ï¼Ÿ</h3>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// Delegate çš„ shouldRebuild</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyDelegate</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">SliverChildBuilderDelegate</span> </span>{
  <span class="hljs-meta">@override</span>
  <span class="hljs-built_in">bool</span> shouldRebuild(MyDelegate oldDelegate) {
    <span class="hljs-keyword">return</span> data != oldDelegate.data;  <span class="hljs-comment">// åªåœ¨æ•°æ®å˜åŒ–æ—¶é‡å»º</span>
  }
}

<span class="hljs-comment">// CustomPainter çš„ shouldRepaint</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyPainter</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">CustomPainter</span> </span>{
  <span class="hljs-meta">@override</span>
  <span class="hljs-built_in">bool</span> shouldRepaint(MyPainter oldDelegate) {
    <span class="hljs-keyword">return</span> color != oldDelegate.color;  <span class="hljs-comment">// åªåœ¨å±æ€§å˜åŒ–æ—¶é‡ç»˜</span>
  }
}
</code></pre>
<hr/>
<h2 data-id="heading-46">äºŒåã€Flutter Web åŸç†</h2>
<h3 data-id="heading-47">28. Flutter Web çš„ä¸¤ç§æ¸²æŸ“æ¨¡å¼ï¼Ÿ</h3>
<p><strong>HTML Renderer</strong>ï¼š</p>
<pre><code class="hljs language-css" lang="css">Widget â”€â”€â–º <span class="hljs-selector-tag">HTML</span> Elements + CSS
         â””â–º <span class="hljs-selector-tag">Canvas</span> (éƒ¨åˆ†ç»„ä»¶)
</code></pre>
<ul>
<li>ä¼˜ç‚¹ï¼šåŒ…ä½“ç§¯å°ï¼ŒSEO å‹å¥½</li>
<li>ç¼ºç‚¹ï¼šä¸åŸç”Ÿ Flutter æ¸²æŸ“æœ‰å·®å¼‚</li>
</ul>
<p><strong>CanvasKit Renderer</strong>ï¼š</p>
<pre><code class="hljs language-css" lang="css">Widget â”€â”€â–º Skia (WebAssembly) â”€â”€â–º WebGL <span class="hljs-selector-tag">Canvas</span>
</code></pre>
<ul>
<li>ä¼˜ç‚¹ï¼šæ¸²æŸ“ä¸€è‡´æ€§é«˜ï¼Œä¸ç§»åŠ¨ç«¯ç›¸åŒ</li>
<li>ç¼ºç‚¹ï¼šåŒ…ä½“ç§¯å¤§ï¼ˆ~2MBï¼‰ï¼Œé¦–æ¬¡åŠ è½½æ…¢</li>
</ul>
<hr/>
<h2 data-id="heading-48">æ€»ç»“</h2>
<p>ä»¥ä¸Šæ¶µç›–äº† Flutter åº•å±‚åŸç†çš„æ ¸å¿ƒx'y'zé¢˜ï¼Œé‡ç‚¹åŒ…æ‹¬ï¼š</p>
<ol>
<li><strong>ä¸‰æ£µæ ‘æ¶æ„</strong>ï¼šWidget/Element/RenderObject çš„èŒè´£åˆ†ç¦»</li>
<li><strong>æ¸²æŸ“ç®¡çº¿</strong>ï¼šBuild â†’ Layout â†’ Paint â†’ Composite â†’ Raster</li>
<li><strong>Element å¤ç”¨</strong>ï¼šåŸºäº runtimeType å’Œ Key çš„ diff ç®—æ³•</li>
<li><strong>äº‹ä»¶å¾ªç¯</strong>ï¼šMicrotask ä¼˜å…ˆäº Event æ‰§è¡Œ</li>
<li><strong>å¹³å°é€šé“</strong>ï¼šé€šè¿‡äºŒè¿›åˆ¶æ¶ˆæ¯å®ç° Dart ä¸åŸç”Ÿé€šä¿¡</li>
<li><strong>çƒ­é‡è½½</strong>ï¼šJIT ç¼–è¯‘ + å¢é‡ä»£ç æ³¨å…¥ + Widget é‡å»º</li>
<li><strong>åˆ—è¡¨ä¼˜åŒ–</strong>ï¼šSliver åè®®å®ç°æŒ‰éœ€åŠ è½½å’Œå›æ”¶</li>
<li><strong>å†…å­˜ç®¡ç†</strong>ï¼šåˆ†ä»£ GCï¼Œå¹´è½»ä»£å¤åˆ¶ç®—æ³• + è€å¹´ä»£æ ‡è®°æ¸…é™¤</li>
</ol>
<p>æŒæ¡è¿™äº›åº•å±‚åŸç†ï¼Œä¸ä»…èƒ½åº”å¯¹xyzï¼Œæ›´èƒ½å¸®åŠ©ä½ åœ¨å®é™…å¼€å‘ä¸­å†™å‡ºé«˜æ€§èƒ½çš„ Flutter åº”ç”¨ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ARC åŸç†ä¸ weak åº•å±‚å®ç°ï¼ˆSide Table æ·±åº¦è§£æï¼‰]]></title>    <link>https://juejin.cn/post/7598537739516690474</link>    <guid>https://juejin.cn/post/7598537739516690474</guid>    <pubDate>2026-01-25T09:22:52.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7598537739516690474" data-draft-id="7598737609493987347" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ARC åŸç†ä¸ weak åº•å±‚å®ç°ï¼ˆSide Table æ·±åº¦è§£æï¼‰"/> <meta itemprop="keywords" content="iOS"/> <meta itemprop="datePublished" content="2026-01-25T09:22:52.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ±‰ç§‹"/> <meta itemprop="url" content="https://juejin.cn/user/3755587450191879"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ARC åŸç†ä¸ weak åº•å±‚å®ç°ï¼ˆSide Table æ·±åº¦è§£æï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3755587450191879/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ±‰ç§‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-25T09:22:52.000Z" title="Sun Jan 25 2026 09:22:52 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>ARC åŸç†ä¸ weak åº•å±‚å®ç°ï¼ˆSide Table æ·±åº¦è§£æï¼‰</strong></h2>
<blockquote>
<p>é¢å‘ï¼š<strong>æœ‰ä¸€å®š iOS / Runtime åŸºç¡€çš„å¼€å‘è€…</strong></p>
</blockquote>
<blockquote>
<p>ç›®æ ‡ï¼š<strong>çœŸæ­£ææ¸…æ¥š weak åˆ°åº• weak äº†è°ã€SideTable é‡Œå­˜çš„æ˜¯ä»€ä¹ˆã€ä¸ºä»€ä¹ˆèƒ½è‡ªåŠ¨ç½® nil</strong></p>
</blockquote>
<hr/>
<h3 data-id="heading-1"><strong>ä¸€ã€å…ˆç»™ç»“è®ºï¼ˆéå¸¸é‡è¦ï¼‰</strong></h3>
<blockquote>
<p><strong>weak ä¸æ˜¯ä¿®é¥°å¯¹è±¡ï¼Œè€Œæ˜¯ä¿®é¥°â€œæŒ‡é’ˆå˜é‡â€</strong></p>
</blockquote>
<blockquote>
<p><strong>SideTable è®°å½•çš„æ˜¯ï¼šæŸä¸ªå¯¹è±¡ï¼Œè¢«å“ªäº› weak æŒ‡é’ˆåœ°å€æŒ‡å‘</strong></p>
</blockquote>
<p>æ¢å¥è¯è¯´ï¼š</p>
<ul>
<li>âŒ ä¸æ˜¯ã€ŒA weak å¼•ç”¨ Bã€</li>
<li>âŒ ä¸æ˜¯ã€Œå¯¹è±¡è®°ä½äº†è° weak å®ƒã€</li>
<li>âœ… æ˜¯ã€ŒRuntime è®°ä½ï¼šå“ªäº›å†…å­˜åœ°å€ï¼ˆweak æŒ‡é’ˆï¼‰æŒ‡å‘äº†è¿™ä¸ªå¯¹è±¡ã€</li>
</ul>
<hr/>
<h3 data-id="heading-2"><strong>äºŒã€ä»ä¸€è¡Œä»£ç å¼€å§‹</strong></h3>
<pre><code class="hljs language-objectivec" lang="objectivec"><span class="hljs-keyword">@property</span> (<span class="hljs-keyword">nonatomic</span>, <span class="hljs-keyword">weak</span>) Person *person;
</code></pre>
<p>ç¼–è¯‘åæœ¬è´¨æ˜¯ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">Person *__weak _person<span class="hljs-comment">;</span>
</code></pre>
<p>è¯´æ˜ä¸‰ç‚¹ï¼š</p>
<ol>
<li>_person æ˜¯ä¸€ä¸ª<strong>æ™®é€šæŒ‡é’ˆå˜é‡</strong></li>
<li>weak ä¿®é¥°çš„æ˜¯<strong>è¿™ä¸ªæŒ‡é’ˆå˜é‡çš„è¡Œä¸º</strong></li>
<li>å¹¶ä¸æ˜¯ Person å¯¹è±¡â€œå˜æˆäº† weakâ€</li>
</ol>
<hr/>
<h3 data-id="heading-3"><strong>ä¸‰ã€æ˜ç¡®ä¸‰ä¸ªæ ¸å¿ƒè§’è‰²</strong></h3>
<pre><code class="hljs language-ini" lang="ini">Person *<span class="hljs-attr">p</span> = [[Person alloc] init]<span class="hljs-comment">;</span>
<span class="hljs-attr">self.person</span> = p<span class="hljs-comment">; // weak</span>
</code></pre>
<p>æ­¤æ—¶å†…å­˜ä¸­å­˜åœ¨ä¸‰æ ·ä¸œè¥¿ï¼š</p>





















<table><thead><tr><th><strong>è§’è‰²</strong></th><th><strong>å«ä¹‰</strong></th></tr></thead><tbody><tr><td>Person å¯¹è±¡</td><td>çœŸæ­£çš„ OC å®ä¾‹</td></tr><tr><td>strong æŒ‡é’ˆ</td><td>æ‹¥æœ‰å¯¹è±¡ï¼ˆå¦‚ pï¼‰</td></tr><tr><td>weak æŒ‡é’ˆ</td><td>ä¸æ‹¥æœ‰å¯¹è±¡ï¼ˆå¦‚ self-&gt;_personï¼‰</td></tr></tbody></table>
<p><strong>weak çš„å¯¹è±¡ä¸æ˜¯ Personï¼Œè€Œæ˜¯ _person è¿™ä¸ªæŒ‡é’ˆå˜é‡ã€‚</strong></p>
<hr/>
<h3 data-id="heading-4"><strong>å››ã€objc_storeWeak åˆ°åº•åšäº†ä»€ä¹ˆï¼Ÿ</strong></h3>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">self.person</span> = p<span class="hljs-comment">;</span>
</code></pre>
<p>ç¼–è¯‘åï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-title function_ invoke__">objc_storeWeak</span>(&amp;<span class="hljs-keyword">self</span><span class="hljs-punctuation">-&gt;</span>_person, p);
</code></pre>
<p>æ³¨æ„è¿™é‡Œä¼ å…¥çš„ä¸¤ä¸ªå‚æ•°ï¼š</p>
<ul>
<li>
<p>&amp;self-&gt;_person ğŸ‘‰ <strong>weak æŒ‡é’ˆçš„åœ°å€</strong></p>
</li>
<li>
<p>p ğŸ‘‰ <strong>å¯¹è±¡åœ°å€</strong></p>
</li>
</ul>
<blockquote>
<p>Runtime çš„çœŸå®æ„å›¾ï¼š</p>
</blockquote>
<blockquote>
</blockquote>
<blockquote>
<p><strong>ç™»è®°ï¼šå¯¹è±¡ pï¼Œè¢«è¿™ä¸ª weak æŒ‡é’ˆåœ°å€å¼±å¼•ç”¨äº†</strong></p>
</blockquote>
<hr/>
<h3 data-id="heading-5"><strong>äº”ã€SideTable / weak_table çš„çœŸå®é€»è¾‘ç»“æ„</strong></h3>
<h4 data-id="heading-6"><strong>1ï¸âƒ£ SideTableï¼ˆç®€åŒ–ï¼‰</strong></h4>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">SideTable</span> {
    <span class="hljs-type">spinlock_t</span> lock;
    RefcountMap refcnts;     <span class="hljs-comment">// å¼ºå¼•ç”¨è®¡æ•°</span>
    <span class="hljs-type">weak_table_t</span> weak_table; <span class="hljs-comment">// å¼±å¼•ç”¨è¡¨</span>
};
</code></pre>
<h4 data-id="heading-7"><strong>2ï¸âƒ£ weak_table_t</strong></h4>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">weak_table_t</span> {
    <span class="hljs-type">weak_entry_t</span> *weak_entries;
};
</code></pre>
<h4 data-id="heading-8"><strong>3ï¸âƒ£ weak_entry_tï¼ˆé‡ç‚¹ï¼‰</strong></h4>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">weak_entry_t</span> {
    DisguisedPtr&lt;objc_object&gt; referent; <span class="hljs-comment">// è¢« weak çš„å¯¹è±¡</span>
    <span class="hljs-type">weak_referrer_t</span> *referrers;         <span class="hljs-comment">// weak æŒ‡é’ˆåœ°å€æ•°ç»„</span>
};
</code></pre>
<hr/>
<h3 data-id="heading-9"><strong>å…­ã€SideTable ä¸­çœŸæ­£å­˜çš„æ˜¯ä»€ä¹ˆï¼Ÿ</strong></h3>
<p>ç”¨ä¸€å¼ é€»è¾‘å›¾è¡¨ç¤ºï¼š</p>
<pre><code class="hljs language-ini" lang="ini">SideTable
â””â”€â”€ weak_table
    â””â”€â”€ weak_entry
        â”œâ”€â”€ <span class="hljs-attr">referent</span> = Person å¯¹è±¡
        â””â”€â”€ <span class="hljs-attr">referrers</span> = [
              &amp;self-&gt;_person,
              &amp;vc-&gt;_delegate,
              &amp;cell-&gt;_model
          ]
</code></pre>
<h4 data-id="heading-10"><strong>å…³é”®ç‚¹ï¼ˆä¸€å®šè¦è®°ä½ï¼‰ï¼š</strong></h4>
<ul>
<li>weak_table çš„ <strong>key æ˜¯å¯¹è±¡</strong></li>
<li>value æ˜¯ <strong>æ‰€æœ‰æŒ‡å‘å®ƒçš„ weak æŒ‡é’ˆåœ°å€</strong></li>
</ul>
<hr/>
<h3 data-id="heading-11"><strong>ä¸ƒã€è°è¢« weakï¼Ÿè°è¢«è®°å½•ï¼Ÿ</strong></h3>
<p>ä»¥ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">self.person</span> = p<span class="hljs-comment">;</span>
</code></pre>
<p>ä¸ºä¾‹ï¼š</p>





















<table><thead><tr><th><strong>é—®é¢˜</strong></th><th><strong>ç­”æ¡ˆ</strong></th></tr></thead><tbody><tr><td>è°è¢« weakï¼Ÿ</td><td>_person è¿™ä¸ªæŒ‡é’ˆå˜é‡</td></tr><tr><td>è°è¢«å¼•ç”¨ï¼Ÿ</td><td>Person å¯¹è±¡</td></tr><tr><td>SideTable è®°å½•ä»€ä¹ˆï¼Ÿ</td><td>Person â†’ weak æŒ‡é’ˆåœ°å€åˆ—è¡¨</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-12"><strong>å…«ã€å¯¹è±¡é‡Šæ”¾æ—¶ä¸ºä»€ä¹ˆèƒ½è‡ªåŠ¨ç½® nilï¼Ÿ</strong></h3>
<p>å½“ Person çš„å¼•ç”¨è®¡æ•°é™ä¸º 0ï¼š</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">objc_destroyWeak</span>(obj);
</code></pre>
<p>Runtime çš„é€»è¾‘æµç¨‹ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">1. æ‰¾åˆ° obj å¯¹åº”çš„ weak_entry
2. éå† referrersï¼ˆweak æŒ‡é’ˆåœ°å€ï¼‰
3. å¯¹æ¯ä¸ªåœ°å€æ‰§è¡Œï¼š
      *(Person **)<span class="hljs-attr">referrer</span> = nil
4. ç§»é™¤ weak_entry
</code></pre>
<p>âš ï¸ Runtime <strong>å®Œå…¨ä¸çŸ¥é“å˜é‡å</strong>ï¼Œåªæ“ä½œå†…å­˜åœ°å€ã€‚</p>
<hr/>
<h3 data-id="heading-13"><strong>ä¹ã€ç”¨å†…å­˜è§†è§’å®Œæ•´èµ°ä¸€é</strong></h3>
<h4 data-id="heading-14"><strong>1ï¸âƒ£ å†…å­˜å¸ƒå±€</strong></h4>
<pre><code class="hljs language-css" lang="css"><span class="hljs-number">0</span>x1000  Person å¯¹è±¡

<span class="hljs-number">0</span>x2000  <span class="hljs-selector-tag">p</span> (<span class="hljs-selector-tag">strong</span>)        â†’ <span class="hljs-number">0</span>x1000
<span class="hljs-number">0</span>x3000  self-&gt;_person     â†’ <span class="hljs-number">0</span>x1000
</code></pre>
<h4 data-id="heading-15"><strong>2ï¸âƒ£ weak_table</strong></h4>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">key: 0x1000</span>
<span class="hljs-section">value: [0x3000]</span>
</code></pre>
<h4 data-id="heading-16"><strong>3ï¸âƒ£ Person é‡Šæ”¾</strong></h4>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">free</span>(<span class="hljs-number">0</span>x1000)
*(<span class="hljs-number">0</span>x3000) = nil
</code></pre>
<p>æœ€ç»ˆï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">self.person</span> == nil
</code></pre>
<hr/>
<h3 data-id="heading-17"><strong>åã€ä¸ºä»€ä¹ˆ weak ä¸ä¼šäº§ç”Ÿé‡æŒ‡é’ˆï¼Ÿ</strong></h3>

















<table><thead><tr><th><strong>ä¿®é¥°ç¬¦</strong></th><th><strong>è¡Œä¸º</strong></th></tr></thead><tbody><tr><td>assign</td><td>ä¸ retainã€ä¸ç½® nil â†’ é‡æŒ‡é’ˆ</td></tr><tr><td>weak</td><td>Runtime æ‰«è¡¨å¹¶ç½® nil</td></tr></tbody></table>
<blockquote>
<p>weak çš„å®‰å…¨æ€§æ¥è‡ª <strong>Runtime çš„é›†ä¸­æ¸…ç†æœºåˆ¶</strong></p>
</blockquote>
<hr/>
<h3 data-id="heading-18"><strong>åä¸€ã€ä¸ºä»€ä¹ˆ weak_table ä»¥â€œå¯¹è±¡â€ä¸ºä¸­å¿ƒï¼Ÿ</strong></h3>
<p>å› ä¸ºï¼š</p>
<blockquote>
<p><strong>å¯¹è±¡é‡Šæ”¾æ˜¯ä¸€ä¸ªç¡®å®šäº‹ä»¶</strong></p>
</blockquote>
<p>ä»¥å¯¹è±¡ä¸º keyï¼š</p>
<ul>
<li>å¯¹è±¡é”€æ¯ â†’ ä¸€æ¬¡æ€§æ¸…ç†æ‰€æœ‰ weak æŒ‡é’ˆ</li>
<li>æ€§èƒ½å¯æ§</li>
<li>é€»è¾‘é›†ä¸­</li>
</ul>
<hr/>
<h3 data-id="heading-19"><strong>åäºŒã€å¸¸è§è¯¯è§£æ¾„æ¸…</strong></h3>
<h4 data-id="heading-20"><strong>âŒ A weak å¼•ç”¨ B</strong></h4>
<p>âœ… A çš„æŸä¸ªæŒ‡é’ˆ weak æŒ‡å‘ B</p>
<h4 data-id="heading-21"><strong>âŒ å¯¹è±¡çŸ¥é“è° weak å®ƒ</strong></h4>
<p>âœ… Runtime çŸ¥é“ï¼Œå¯¹è±¡æœ¬èº«ä¸çŸ¥é“</p>
<h4 data-id="heading-22"><strong>âŒ weak æ˜¯å¯¹è±¡å±æ€§</strong></h4>
<p>âœ… weak æ˜¯æŒ‡é’ˆè¯­ä¹‰</p>
<h4 data-id="heading-23"><strong>âŒ weak åªæ˜¯â€œä¸ retainâ€</strong></h4>
<p>âœ… weak = ä¸ retain + æ³¨å†Œ weak_table + è‡ªåŠ¨ç½® nil</p>
<hr/>
<h3 data-id="heading-24"><strong>åä¸‰ã€ä¸€å¥è¯æ€»ç»“</strong></h3>
<blockquote>
<p><strong>weak çš„æœ¬è´¨ä¸æ˜¯å¼±å¼•ç”¨å¯¹è±¡ï¼Œ</strong></p>
</blockquote>
<blockquote>
<p><strong>è€Œæ˜¯ Runtime è®°å½•â€œå“ªäº›æŒ‡é’ˆå¼±æŒ‡å‘äº†è¿™ä¸ªå¯¹è±¡â€ï¼Œ</strong></p>
</blockquote>
<blockquote>
<p><strong>å¹¶åœ¨å¯¹è±¡é”€æ¯æ—¶ç»Ÿä¸€æŠŠè¿™äº›æŒ‡é’ˆç½®ä¸º nilã€‚</strong></p>
</blockquote>
<hr/>
<h3 data-id="heading-25"><strong>åå››ã€ä¸‹ä¸€æ­¥å¯ç»§ç»­æ·±å…¥</strong></h3>
<ul>
<li>
<p>block æ•è·ä¸‹ weak_table çš„å˜åŒ–è¿‡ç¨‹</p>
</li>
<li>
<p>__unsafe_unretained ä¸ weak çš„å®ç°å¯¹æ¯”</p>
</li>
<li>
<p>objc-runtime æºç ä¸­ weak_entry çš„çœŸå®å®ç°</p>
</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç¬¬äºŒç« ï¼šè¿›é˜¶ç¯‡â€”â€”è§£é”å¤§æ¨¡å‹çš„æ·±å±‚èƒ½åŠ›ä¸å®šåˆ¶åŒ–]]></title>    <link>https://juejin.cn/post/7598587406707720233</link>    <guid>https://juejin.cn/post/7598587406707720233</guid>    <pubDate>2026-01-25T08:27:27.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7598587406707720233" data-draft-id="7598737609493921811" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç¬¬äºŒç« ï¼šè¿›é˜¶ç¯‡â€”â€”è§£é”å¤§æ¨¡å‹çš„æ·±å±‚èƒ½åŠ›ä¸å®šåˆ¶åŒ–"/> <meta itemprop="keywords" content="LLM,Agent"/> <meta itemprop="datePublished" content="2026-01-25T08:27:27.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æä¸è¨€"/> <meta itemprop="url" content="https://juejin.cn/user/3403743729552056"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç¬¬äºŒç« ï¼šè¿›é˜¶ç¯‡â€”â€”è§£é”å¤§æ¨¡å‹çš„æ·±å±‚èƒ½åŠ›ä¸å®šåˆ¶åŒ–
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3403743729552056/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æä¸è¨€
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-25T08:27:27.000Z" title="Sun Jan 25 2026 08:27:27 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨æŒæ¡äº†æ¨¡å‹çš„åŸºç¡€èƒ½åŠ›åï¼Œæˆ‘ä»¬ä¾¿ç«™åœ¨äº†â€œä½¿ç”¨æ¨¡å‹â€çš„é—¨æ§›ä¸Šã€‚ä½†è¦è§£å†³ç°å®ä¸–ç•Œä¸­æ›´å¤æ‚ã€æ›´ä¸“ä¸šçš„é—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦å­¦ä¼šâ€œå¡‘é€ æ¨¡å‹â€ã€‚</p>
<p>æœ¬ç« å°†ä»‹ç»ä¸‰ç§æ ¸å¿ƒçš„è¿›é˜¶è·¯å¾„ï¼š<strong>æç¤ºå·¥ç¨‹</strong>ã€<strong>æ¨¡å‹å¾®è°ƒ</strong>å’Œ<strong>æ™ºèƒ½ä½“æ„å»º</strong>ã€‚å®ƒä»¬å¦‚åŒä¸ºä¸€æŠŠç‘å£«å†›åˆ€ï¼ˆåŸºç¡€æ¨¡å‹ï¼‰é…å¤‡ä¸“ç”¨åˆ€å¤´ã€è¿›è¡Œä¸ªæ€§åŒ–æ”¹è£…ï¼Œå¹¶æ•™ä¼šå®ƒè‡ªä¸»å®Œæˆä»»åŠ¡ï¼Œä»è€Œçªç ´åŸºç¡€èƒ½åŠ›çš„é™åˆ¶ï¼Œå®ç°æ›´å¯é ã€æ›´å¤æ‚çš„ä»»åŠ¡è‡ªåŠ¨åŒ–ã€‚</p>
<hr/>
<h2 data-id="heading-0">2.1 æç¤ºå·¥ç¨‹çš„é­”æ³•ï¼šä»é›¶æ ·æœ¬åˆ°æ€ç»´é“¾ (CoT)</h2>
<p>æç¤ºå·¥ç¨‹ï¼ˆPrompt Engineeringï¼‰æ˜¯é€šè¿‡ç²¾å¿ƒè®¾è®¡è¾“å…¥æ–‡æœ¬æ¥å¼•å¯¼æ¨¡å‹è¾“å‡ºæ›´ä½³ç»“æœçš„æŠ€æœ¯ã€‚å®ƒæˆæœ¬æä½ï¼Œæ˜¯è§£é”æ¨¡å‹æ½œåŠ›çš„é¦–è¦å·¥å…·ã€‚</p>
<h3 data-id="heading-1">2.1.1 åŸºç¡€ï¼šä»é›¶æ ·æœ¬åˆ°å°‘æ ·æœ¬æç¤º</h3>
<ul>
<li>
<p><strong>é›¶æ ·æœ¬ (Zero-Shot)</strong> ï¼šç›´æ¥å‘æ¨¡å‹æå‡ºæ–°ä»»åŠ¡ï¼Œä¸æä¾›ç¤ºä¾‹ã€‚</p>
<blockquote>
<p><em>ä¾‹å¦‚</em>ï¼šâ€œå°†ä»¥ä¸‹è‹±æ–‡ç¿»è¯‘æˆä¸­æ–‡ï¼šâ€˜Hello, world.â€™â€</p>
</blockquote>
</li>
<li>
<p><strong>å°‘æ ·æœ¬ (Few-Shot)</strong> ï¼šåœ¨é—®é¢˜å‰æä¾›å‡ ä¸ªè¾“å…¥-è¾“å‡ºç¤ºä¾‹ä½œä¸ºâ€œç¤ºèŒƒâ€ã€‚</p>
<blockquote>
<p><em>æ•ˆæœ</em>ï¼šç ”ç©¶æ˜¾ç¤ºï¼Œä»…æä¾› 3-5 ä¸ªç¤ºä¾‹ï¼ˆ3-shot, 5-shotï¼‰å°±èƒ½æ˜¾è‘—æå‡æ¨¡å‹åœ¨ç‰¹å®šä»»åŠ¡ï¼ˆå¦‚æƒ…æ„Ÿåˆ†æï¼‰ä¸Šçš„è¡¨ç°ã€‚</p>
</blockquote>
</li>
</ul>
<h3 data-id="heading-2">2.1.2 è¿›é˜¶ï¼šæ€ç»´é“¾ (Chain-of-Thought, CoT)</h3>
<p>å¯¹äºæ•°å­¦æ¨ç†ã€é€»è¾‘åˆ¤æ–­ç­‰å¤æ‚é—®é¢˜ï¼Œç›´æ¥æé—®å¸¸å¯¼è‡´é”™è¯¯ã€‚<strong>æ€ç»´é“¾</strong>æŠ€æœ¯é€šè¿‡è¦æ±‚æ¨¡å‹â€œå±•ç¤ºå…¶æ¨ç†æ­¥éª¤â€ï¼Œèƒ½å¤§å¹…æå‡å‡†ç¡®æ€§ã€‚</p>
<ul>
<li><strong>åŸç†</strong>ï¼šç±»æ¯”äºè§£æ•°å­¦é¢˜ï¼Œå†™å‡ºâ€œå› ä¸ºâ€¦æ‰€ä»¥â€¦â€çš„æ­¥éª¤ä¾¿äºæ£€æŸ¥å’Œä¿®æ­£ã€‚CoT æç¤ºæ¿€æ´»äº†æ¨¡å‹å†…éƒ¨çš„é€»è¾‘æ¨ç†è·¯å¾„ã€‚</li>
<li><strong>æ•°æ®æ”¯æ’‘</strong>ï¼šåœ¨ <strong>GSM8K</strong>ï¼ˆå°å­¦æ•°å­¦é¢˜ï¼‰åŸºå‡†æµ‹è¯•ä¸­ï¼Œä½¿ç”¨ CoT æç¤ºçš„ GPT-3 æ¨¡å‹å‡†ç¡®ç‡ä»çº¦ <strong>17% æå‡è‡³ 58%</strong> ã€‚</li>
</ul>
<h4 data-id="heading-3">ğŸ’¡ æ¡ˆä¾‹å¯¹æ¯”</h4>
<blockquote>
<p><strong>é—®é¢˜</strong>ï¼šä¸€ä¸ªèŠ±å›­æœ‰ 4 æ’ç«ç‘°ï¼Œæ¯æ’ 6 æ ªã€‚åˆç§äº† 3 æ’éƒé‡‘é¦™ï¼Œæ¯æ’ 5 æ ªã€‚æ€»å…±æœ‰å¤šå°‘æ ªèŠ±ï¼Ÿ</p>
<p><strong>é”™è¯¯æç¤ºï¼ˆæ ‡å‡†ï¼‰</strong> ï¼šè¯·ç›´æ¥å›ç­”ã€‚</p>
<p><strong>æ¨¡å‹å¯èƒ½é”™è¯¯è¾“å‡º</strong>ï¼š39ã€‚ï¼ˆæ³¨ï¼šæ­¤å¤„ä¸ºæ¼”ç¤ºé€»è¾‘ï¼Œæœ‰æ—¶æ¨¡å‹ä¼šå› è·³æ­¥å¯¼è‡´è®¡ç®—åè¯¯ï¼‰</p>
<p><strong>CoT æç¤º</strong>ï¼šè¯·é€æ­¥æ¨ç†ã€‚</p>
<p><strong>æ¨¡å‹è¾“å‡º</strong>ï¼š</p>
<ol>
<li>
<p>é¦–å…ˆï¼Œç«ç‘°æœ‰ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>4</mn><mtext>æ’</mtext><mo>Ã—</mo><mn>6</mn><mtext>æ ª/æ’</mtext><mo>=</mo><mn>24</mn><mtext>æ ª</mtext></mrow><annotation encoding="application/x-tex">4 \text{æ’} \times 6 \text{æ ª/æ’} = 24 \text{æ ª}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7667em;vertical-align:-0.0833em;"/><span class="mord">4</span><span class="mord text"><span class="mord cjk_fallback">æ’</span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord">6</span><span class="mord text"><span class="mord cjk_fallback">æ ª</span><span class="mord">/</span><span class="mord cjk_fallback">æ’</span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord">24</span><span class="mord text"><span class="mord cjk_fallback">æ ª</span></span></span></span></span></span>ã€‚</p>
</li>
<li>
<p>å…¶æ¬¡ï¼Œéƒé‡‘é¦™æœ‰ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>3</mn><mtext>æ’</mtext><mo>Ã—</mo><mn>5</mn><mtext>æ ª/æ’</mtext><mo>=</mo><mn>15</mn><mtext>æ ª</mtext></mrow><annotation encoding="application/x-tex">3 \text{æ’} \times 5 \text{æ ª/æ’} = 15 \text{æ ª}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7667em;vertical-align:-0.0833em;"/><span class="mord">3</span><span class="mord text"><span class="mord cjk_fallback">æ’</span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord">5</span><span class="mord text"><span class="mord cjk_fallback">æ ª</span><span class="mord">/</span><span class="mord cjk_fallback">æ’</span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord">15</span><span class="mord text"><span class="mord cjk_fallback">æ ª</span></span></span></span></span></span>ã€‚</p>
</li>
<li>
<p>æœ€åï¼Œæ€»æ•°æ˜¯ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>24</mn><mo>+</mo><mn>15</mn><mo>=</mo><mn>39</mn><mtext>æ ª</mtext></mrow><annotation encoding="application/x-tex">24 + 15 = 39 \text{æ ª}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"/><span class="mord">24</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">15</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord">39</span><span class="mord text"><span class="mord cjk_fallback">æ ª</span></span></span></span></span></span>ã€‚</p>
<p><strong>æ‰€ä»¥ç­”æ¡ˆæ˜¯ 39ã€‚</strong></p>
</li>
</ol>
</blockquote>
<p>é€šè¿‡ CoTï¼Œæˆ‘ä»¬å°†æ¨¡å‹çš„â€œé»‘ç®±â€æ€è€ƒè¿‡ç¨‹éƒ¨åˆ†å¯è§†åŒ–ï¼Œä½¿å…¶æ¨ç†æ›´å¯é ã€‚</p>
<hr/>
<h2 data-id="heading-4">2.2 æ¨¡å‹çš„â€œç²¾è£…ä¿®â€ï¼šå¾®è°ƒ (Fine-tuning) æŠ€æœ¯å…¨æ™¯</h2>
<p>å½“æç¤ºå·¥ç¨‹æ— æ³•æ»¡è¶³å¯¹ç‰¹å®šé£æ ¼ã€çŸ¥è¯†æˆ–ä»»åŠ¡çš„æè‡´éœ€æ±‚æ—¶ï¼Œå°±éœ€è¦å¯¹æ¨¡å‹è¿›è¡Œ<strong>å¾®è°ƒ</strong>ã€‚è¿™å¥½æ¯”å¯¹æ¯›å¯æˆ¿ï¼ˆåŸºç¡€æ¨¡å‹ï¼‰è¿›è¡Œâ€œç²¾è£…ä¿®â€ï¼Œä½¿å…¶æ›´è´´åˆä½ çš„ä¸“ä¸šé¢†åŸŸã€‚</p>
<h3 data-id="heading-5">2.2.1 å…¨å‚æ•°å¾®è°ƒä¸å®ƒçš„æŒ‘æˆ˜</h3>
<p>ä¼ ç»Ÿå¾®è°ƒä¼šæ›´æ–°æ¨¡å‹çš„æ‰€æœ‰å‚æ•°ï¼ˆæƒé‡ï¼‰ï¼Œè™½ç„¶æ•ˆæœå¥½ï¼Œä½†æˆæœ¬æé«˜ã€‚ä»¥æ‹¥æœ‰ <strong>1750 äº¿å‚æ•°</strong> çš„ GPT-3 ä¸ºä¾‹ï¼Œä¸€æ¬¡å…¨å¾®è°ƒéœ€è¦æ•°ç™¾ä¸ªé«˜ç«¯ GPU å’Œæ•°ä¸‡ç¾å…ƒï¼Œå¯¹å¤§å¤šæ•°å¼€å‘è€…è€Œè¨€é¥ä¸å¯åŠã€‚</p>
<h3 data-id="heading-6">2.2.2 é«˜æ•ˆå¾®è°ƒçš„é©å‘½ï¼šLoRA ä¸ QLoRA</h3>
<p>ä¸ºäº†é™ä½é—¨æ§›ï¼Œç ”ç©¶è€…æå‡ºäº† <strong>å‚æ•°é«˜æ•ˆå¾®è°ƒ (PEFT)</strong> æŠ€æœ¯ï¼š</p>
<ul>
<li>
<p><strong>LoRA (Low-Rank Adaptationï¼Œä½ç§©é€‚é…)</strong> ï¼š</p>
<ul>
<li><strong>åŸç†</strong>ï¼šä¸ç›´æ¥ä¿®æ”¹åŸå§‹å·¨å¤§å‚æ•°çŸ©é˜µï¼Œè€Œæ˜¯è®­ç»ƒä¸€å¯¹å°çš„â€œé€‚é…å™¨â€çŸ©é˜µå¹¶æ³¨å…¥æ¨¡å‹ã€‚æƒ³è±¡ä¸ºï¼šä¸é‡é€ æ±½è½¦å‘åŠ¨æœºï¼Œè€Œæ˜¯åŠ è£…ä¸€ä¸ªå¤–æŒ‚ç”µè„‘æ¥ä¼˜åŒ–æ€§èƒ½ã€‚</li>
<li><strong>ä»·å€¼</strong>ï¼šé€šå¸¸åªéœ€è®­ç»ƒåŸå‚æ•°çš„ <strong>0.1%-1%</strong> ï¼Œå´èƒ½è¾¾åˆ°æ¥è¿‘å…¨å¾®è°ƒçš„æ•ˆæœã€‚</li>
</ul>
</li>
<li>
<p><strong>QLoRA (Quantized LoRA)</strong> ï¼š</p>
<ul>
<li><strong>åŸç†</strong>ï¼šåœ¨ LoRA åŸºç¡€ä¸Šï¼Œå°†åŸå§‹æ¨¡å‹æƒé‡é‡åŒ–ä¸º <strong>4 ä½ç²¾åº¦</strong>ï¼ˆæå¤§å‡å°‘å†…å­˜å ç”¨ï¼‰ã€‚</li>
<li><strong>æ•°æ®æ”¯æ’‘</strong>ï¼šQLoRA ä½¿å¾—åœ¨å•ä¸ªæ¶ˆè´¹çº§ GPUï¼ˆå¦‚ <strong>24GB æ˜¾å­˜çš„ RTX 4090</strong>ï¼‰ä¸Šå¾®è°ƒ 650 äº¿å‚æ•°æ¨¡å‹æˆä¸ºå¯èƒ½ã€‚</li>
</ul>
</li>
</ul>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šå¾®è°ƒé€‚ç”¨äºéœ€è¦æ¨¡å‹æ·±åº¦å¸æ”¶ç§æœ‰çŸ¥è¯†ã€å›ºåŒ–ç‰¹å®šé£æ ¼ï¼ˆå¦‚æ³•å¾‹æ–‡ä¹¦ï¼‰æˆ–ç²¾é€šå‚ç›´é¢†åŸŸä»»åŠ¡ï¼ˆå¦‚åŒ»ç–—è¯Šæ–­ï¼‰çš„åœºæ™¯ã€‚</p>
<hr/>
<h2 data-id="heading-7">2.3 ä»å·¥å…·åˆ°ä¼™ä¼´ï¼šAI æ™ºèƒ½ä½“ (Agent) çš„æ„å»ºä¸ååŒ</h2>
<p>æ™ºèƒ½ä½“ï¼ˆAgentï¼‰æ˜¯èƒ½æ„ŸçŸ¥ç¯å¢ƒã€è¿›è¡Œè§„åˆ’ã€æ‰§è¡ŒåŠ¨ä½œå¹¶è¾¾æˆç›®æ ‡çš„ AI ç³»ç»Ÿã€‚å®ƒå°†å¤§æ¨¡å‹ä»â€œè¢«åŠ¨åº”ç­”çš„å·¥å…·â€è½¬å˜ä¸ºâ€œä¸»åŠ¨æ‰§è¡Œçš„ä¼™ä¼´â€ã€‚</p>
<h3 data-id="heading-8">ğŸ› ï¸ æ ¸å¿ƒèƒ½åŠ›</h3>
<ol>
<li>
<p><strong>è§„åˆ’ (Planning)</strong> ï¼šå°†å¤æ‚ç›®æ ‡åˆ†è§£ä¸ºå¯æ‰§è¡Œçš„å­ä»»åŠ¡åºåˆ—ã€‚</p>
</li>
<li>
<p><strong>å·¥å…·ä½¿ç”¨ (Tool Use)</strong> ï¼šæ¡†æ¶å…è®¸æ¨¡å‹è°ƒç”¨å¤–éƒ¨ APIï¼Œå¦‚ï¼š</p>
<ul>
<li><code>search_web(query)</code>ï¼šè·å–æœ€æ–°ä¿¡æ¯ã€‚</li>
<li><code>calculator(expression)</code>ï¼šè¿›è¡Œç²¾ç¡®è®¡ç®—ã€‚</li>
<li><code>execute_python(code)</code>ï¼šè¿è¡Œä»£ç å¤„ç†æ•°æ®ã€‚</li>
</ul>
</li>
<li>
<p><strong>åæ€ (Reflection)</strong> ï¼šæ£€æŸ¥è¡ŒåŠ¨ç»“æœï¼Œè‹¥æœªè¾¾åˆ°é¢„æœŸï¼Œåˆ™è°ƒæ•´è®¡åˆ’æˆ–é‡è¯•ã€‚</p>
</li>
</ol>
<h3 data-id="heading-9">ğŸ“¦ æ¡†æ¶å®ä¾‹</h3>
<ul>
<li><strong>LangChain</strong>ï¼šåƒâ€œä¹é«˜ç§¯æœ¨â€ä¸€æ ·ï¼Œæä¾›è¿æ¥æ¨¡å‹ã€å·¥å…·ã€è®°å¿†æ¨¡å—çš„æ ‡å‡†åŒ–ç»„ä»¶ã€‚</li>
<li><strong>AutoGPT</strong>ï¼šå±•ç¤ºäº†æ™ºèƒ½ä½“å¦‚ä½•é€šè¿‡å¾ªç¯è¿­ä»£ï¼Œè‡ªä¸»ä½¿ç”¨ç½‘ç»œå’Œæ–‡ä»¶ç³»ç»Ÿå®Œæˆå¼€æ”¾å¼ç›®æ ‡ã€‚</li>
</ul>
<blockquote>
<p><strong>æ¡ˆä¾‹</strong>ï¼šæ„å»ºä¸€ä¸ªâ€œå­¦æœ¯ç ”ç©¶åŠ©æ‰‹â€æ™ºèƒ½ä½“ã€‚ä½ åªéœ€è¾“å…¥â€œç ”ç©¶é‡å­è®¡ç®—åœ¨ææ–™ç§‘å­¦ä¸­çš„åº”ç”¨â€ï¼Œæ™ºèƒ½ä½“ä¾¿ä¼šè‡ªåŠ¨è§„åˆ’ï¼šæœç´¢è®ºæ–‡ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>â†’</mo></mrow><annotation encoding="application/x-tex">\rightarrow</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.3669em;"/><span class="mrel">â†’</span></span></span></span></span> ä¸‹è½½æ€»ç»“æ–‡çŒ® <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>â†’</mo></mrow><annotation encoding="application/x-tex">\rightarrow</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.3669em;"/><span class="mrel">â†’</span></span></span></span></span> æ•´ç†ç»“æ„åŒ–ç»¼è¿°ã€‚è¿™å®ç°äº†ä»å•æ¬¡é—®ç­”åˆ°<strong>å¤šæ­¥éª¤å·¥ä½œæµè‡ªåŠ¨åŒ–</strong>çš„è·ƒè¿ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-10">2.4 å¤šæ¨¡æ€èåˆï¼šè®©æ¨¡å‹â€œçœ‹å¾—è§â€ã€â€œå¬å¾—åˆ°â€</h2>
<p>åŸºç¡€è¯­è¨€æ¨¡å‹åªå¤„ç†æ–‡æœ¬ã€‚<strong>å¤šæ¨¡æ€å¤§æ¨¡å‹</strong>ï¼ˆå¦‚ GPT-4Vã€Geminiï¼‰åˆ™èƒ½åŒæ—¶ç†è§£å’Œç”Ÿæˆæ–‡æœ¬ã€å›¾åƒã€éŸ³é¢‘ç­‰ä¿¡æ¯ã€‚</p>
<h3 data-id="heading-11">ğŸ¨ åŸç†ä¸ä»·å€¼</h3>
<p>æ¨¡å‹åœ¨è®­ç»ƒæ—¶å¯¹é½äº†ä¸åŒæ¨¡æ€çš„æ•°æ®ï¼Œå­¦ä¼šç†è§£è·¨æ¨¡æ€çš„æ¦‚å¿µã€‚</p>
<ul>
<li><strong>è§†è§‰ç†è§£</strong>ï¼šåˆ†æå›¾ç‰‡å†…å®¹ã€‚ä¾‹å¦‚ä¸Šä¼ ä»ªè¡¨ç›˜æˆªå›¾ï¼Œæ¨¡å‹èƒ½è¯»å‡ºæ•°å€¼å¹¶æ€»ç»“çŠ¶æ€ã€‚</li>
<li><strong>è§†è§‰ç”Ÿæˆ</strong>ï¼šæ ¹æ®æ–‡æœ¬æè¿°ç”Ÿæˆå›¾åƒï¼Œå¦‚â€œç”Ÿæˆèµ›åšæœ‹å…‹é£æ ¼çš„åŸå¸‚å¤œæ™¯â€ã€‚</li>
<li><strong>è¯­éŸ³äº¤äº’</strong>ï¼šå®ç°è‡ªç„¶çš„è¯­éŸ³å¯¹è¯ï¼Œè®© AI åŠ©ç†èƒ½â€œå¬â€å’Œâ€œè¯´â€ã€‚</li>
</ul>
<h3 data-id="heading-12">ğŸš€ åº”ç”¨åœºæ™¯</h3>
<ul>
<li><strong>æ— éšœç¢æŠ€æœ¯</strong>ï¼šä¸ºè§†éšœç”¨æˆ·æè¿°å‘¨å›´ç¯å¢ƒã€‚</li>
<li><strong>æ™ºèƒ½å®¢æœ</strong>ï¼šç”¨æˆ·ä¸Šä¼ æ•…éšœå›¾ç‰‡ï¼ŒAI è‡ªåŠ¨è¯†åˆ«é—®é¢˜ã€‚</li>
<li><strong>å†…å®¹åˆ›ä½œ</strong>ï¼šæ–‡æ¡ˆè‡ªåŠ¨é…å›¾ï¼Œæˆ–ä¸ºè§†é¢‘ç”Ÿæˆå­—å¹•å’Œè§£è¯´ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-13">æœ¬ç« æ€»ç»“</h3>
<p>ä»ç²¾å¿ƒè®¾è®¡çš„<strong>æç¤ºè¯</strong>ï¼Œåˆ°æ·±åº¦å®šåˆ¶çš„<strong>å¾®è°ƒæ¨¡å‹</strong>ï¼Œå†åˆ°èƒ½è‡ªä¸»ä½¿ç”¨å·¥å…·çš„<strong>æ™ºèƒ½ä½“</strong>ï¼Œæœ€ååˆ°æ„ŸçŸ¥å¤šå…ƒä¸–ç•Œçš„<strong>å¤šæ¨¡æ€æ¨¡å‹</strong>ï¼Œæˆ‘ä»¬ä¸€æ­¥æ­¥å°†é€šç”¨å¤§æ¨¡å‹â€œå¡‘é€ â€æˆè§£å†³ç‰¹å®šé—®é¢˜çš„å¼ºå¤§å¼•æ“ã€‚</p>
<p>è¿™æ ‡å¿—ç€ä½ ä»æ¨¡å‹ä½¿ç”¨è€…å‘ <strong>AI è§£å†³æ–¹æ¡ˆæ¶æ„å¸ˆ</strong> çš„æ€ç»´è½¬å˜ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»åŸç”Ÿ Node.js åˆ° Koaï¼šè½»é‡ä¼˜é›…ï¼Œè§£é”åç«¯å¼€å‘æ–°ä½“éªŒ]]></title>    <link>https://juejin.cn/post/7598614012183740443</link>    <guid>https://juejin.cn/post/7598614012183740443</guid>    <pubDate>2026-01-24T14:11:10.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7598614012183740443" data-draft-id="7598614012183527451" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»åŸç”Ÿ Node.js åˆ° Koaï¼šè½»é‡ä¼˜é›…ï¼Œè§£é”åç«¯å¼€å‘æ–°ä½“éªŒ"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,Node.js"/> <meta itemprop="datePublished" content="2026-01-24T14:11:10.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é£æ­¢ä½•å®‰å•Š"/> <meta itemprop="url" content="https://juejin.cn/user/2517239724512420"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»åŸç”Ÿ Node.js åˆ° Koaï¼šè½»é‡ä¼˜é›…ï¼Œè§£é”åç«¯å¼€å‘æ–°ä½“éªŒ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2517239724512420/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é£æ­¢ä½•å®‰å•Š
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-24T14:11:10.000Z" title="Sat Jan 24 2026 14:11:10 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-24
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.8;font-weight:400;font-size:16px;word-spacing:2px;letter-spacing:2px;overflow-x:hidden;color:#3e3e3e;background-image:linear-gradient(90deg,rgba(50,0,0,.05) 3%,transparent 0),linear-gradient(1turn,rgba(50,0,0,.05) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:30px;margin-bottom:5px}.markdown-body h2{padding-bottom:12px;font-size:24px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h4{font-size:1.2em;border-bottom:2px solid #ef7060;word-spacing:0!important;letter-spacing:0!important;font-size:inherit;line-height:inherit;display:block;font-weight:400;background:#ef7060;color:#fff;padding:10px;border-top-right-radius:3px;border-top-left-radius:3px;margin-right:3px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="monokai">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#272822;color:#ddd}.hljs-keyword,.hljs-literal,.hljs-name,.hljs-selector-tag,.hljs-strong,.hljs-tag{color:#f92672}.hljs-code{color:#66d9ef}.hljs-class .hljs-title{color:#fff}.hljs-attribute,.hljs-link,.hljs-regexp,.hljs-symbol{color:#bf79db}.hljs-addition,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-emphasis,.hljs-section,.hljs-selector-attr,.hljs-selector-pseudo,.hljs-string,.hljs-subst,.hljs-template-tag,.hljs-template-variable,.hljs-title,.hljs-type,.hljs-variable{color:#a6e22e}.hljs-comment,.hljs-deletion,.hljs-meta,.hljs-quote{color:#75715e}.hljs-doctag,.hljs-keyword,.hljs-literal,.hljs-section,.hljs-selector-id,.hljs-selector-tag,.hljs-title,.hljs-type{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>æ¯ä¸€ä¸ª <code>Node.js</code> å¼€å‘è€…éƒ½æœ‰è¿‡è¿™æ ·çš„ç»å†ï¼šç”¨åŸç”Ÿ <code>http</code> æ¨¡å—æ­å»ºæœåŠ¡æ—¶ï¼Œè¦æ‰‹å†™è¯·æ±‚åˆ¤æ–­ã€å¤„ç†å“åº”å¤´ï¼Œå‡ è¡Œä»£ç å°±å˜å¾—è‡ƒè‚¿ä¸å ªã€‚</p>
<p>ä¸ºäº†å‘Šåˆ«è¿™ç§ä½æ•ˆçš„é‡å¤é€ è½®å­ï¼Œ<code>Node.js</code>ç¤¾åŒºæ¶Œç°å‡ºäº†ä¸€æ‰¹ä¼˜ç§€çš„å¼€å‘æ¡†æ¶ï¼Œæ¯”å¦‚ï¼š</p>
<ul>
<li>express æ¡†æ¶</li>
<li>koa æ¡†æ¶</li>
<li>nestjs æ¡†æ¶</li>
</ul>
<p>ä»Šå¤©æˆ‘ä»¬å°±æ¥èŠèŠå…¶ä¸­æœ€è½»å·§ã€æœ€å…·ç°ä»£æ„Ÿçš„ <strong>Koa</strong>ã€‚</p>
<h3 data-id="heading-1">ä¸€ã€ä¸ºä»€ä¹ˆè¦ç”¨æ¡†æ¶ï¼Ÿä¼˜åŒ–åœ¨å“ªï¼Ÿ</h3>
<p>ç®€å•æ¥è¯´ï¼Œå°±æ˜¯æé«˜æˆ‘ä»¬çš„å·¥ä½œæ•ˆç‡ã€‚æ¯”å¦‚åŸç”Ÿ<code>http</code>å†™æ³•ï¼š</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-keyword">const</span> http = <span class="hljs-built_in">require</span>(<span class="hljs-string">'http'</span>);
<span class="hljs-keyword">const</span> server = http.<span class="hljs-title function_">createServer</span>(<span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (req.<span class="hljs-property">url</span> === <span class="hljs-string">'/home'</span>) {
        res.<span class="hljs-title function_">end</span>(<span class="hljs-string">'hello world'</span>)
    }
});
server.<span class="hljs-title function_">listen</span>(<span class="hljs-number">3000</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'server is running at http://localhost:3000'</span>)
});
</code></pre>
<p>è¿™æ ·å½“æˆ‘ä»¬è¾“å…¥URLå°±æˆåŠŸå‡ºç°äº†<code>hello world</code></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/20dddc622b144f8a8d62207ee0f23958~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOO5q2i5L2V5a6J5ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769868669&amp;x-signature=xQyTq1jAuFlLPQR6HsFHiO%2Bt34Y%3D" alt="image.png" loading="lazy"/></p>
<p>ä½†æ˜¯å†™æ³•è¿‡äºéº»çƒ¦ï¼Œå¤ªè¿‡ä½çº§ï¼Œäºæ˜¯æˆ‘ä»¬é€‰æ‹©ä½¿ç”¨é«˜çº§çš„æ¡†æ¶ã€‚</p>
<h3 data-id="heading-2">äºŒã€åˆè¯† Koaï¼šå‡ è¡Œä»£ç æ­å»ºå®Œæ•´ Web æœåŠ¡</h3>
<p><code>Koa</code> çš„æ ¸å¿ƒä¼˜åŠ¿ä¹‹ä¸€å°±æ˜¯<strong>æç®€</strong>ï¼Œæ— éœ€å¤æ‚çš„é…ç½®ï¼Œå®‰è£…åå‡ è¡Œä»£ç å°±èƒ½å¯åŠ¨ä¸€ä¸ªå¯è¿è¡Œçš„ Web æœåŠ¡ï¼Œç›¸æ¯”åŸç”Ÿ<code>http</code>æ¨¡å—ï¼Œçœå»äº†å¤§é‡çš„åŸºç¡€å°è£…å·¥ä½œã€‚åŒæ—¶<code>koa</code>ä¹Ÿæ˜¯ <code>Express</code> åŸç­äººé©¬æ‰“é€ çš„ä¸‹ä¸€ä»£ <strong>Node.js Web æ¡†æ¶</strong>ï¼Œå®ƒæŠ›å¼ƒäº†å†—ä½™çš„å†…ç½®ä¸­é—´ä»¶ï¼Œç”¨ <code>async/await</code> è®©å¼‚æ­¥ä»£ç å˜å¾—åƒåŒæ­¥ä¸€æ ·æ¸…çˆ½ã€‚</p>
<h4 data-id="heading-3">1. åŸºç¡€å‡†å¤‡ä¸å®‰è£…</h4>
<p>é¦–å…ˆç¡®ä¿ä½ çš„ç¯å¢ƒè£…æœ‰ <code>Node.js</code> å’Œ <code>npm</code>ï¼ˆç›´æ¥å»å®˜ç½‘ä¸‹è½½<code>Node.js</code>å³å¯ï¼‰ï¼Œç„¶åæ–°å»ºé¡¹ç›®æ–‡ä»¶å¤¹ï¼Œæ‰§è¡Œåˆå§‹åŒ–å’Œå®‰è£…å‘½ä»¤ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">npm init -y 
npm install koa
</code></pre>
<h4 data-id="heading-4">2. ç¬¬ä¸€ä¸ª Koa æœåŠ¡ï¼šä» 0 åˆ° 1</h4>
<p>é…ç½®å¥½ç¯å¢ƒï¼Œæˆ‘ä»¬å°±ç›´æ¥ä¸Šæ‰‹å®Œæˆä¸€ä¸ªæœ€åŸºç¡€çš„ <code>Koa</code> æœåŠ¡å®ç°ï¼š</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-comment">// å¼•å…¥Koaæ¨¡å—</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">Koa</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">'koa'</span>);
<span class="hljs-comment">// åˆ›å»ºKoaåº”ç”¨å®ä¾‹</span>
<span class="hljs-keyword">const</span> app = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Koa</span>();

<span class="hljs-comment">// å®šä¹‰æ ¸å¿ƒä¸šåŠ¡å¤„ç†å‡½æ•°</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">main</span>(<span class="hljs-params">ctx</span>) {
    <span class="hljs-comment">// æ¨¡æ‹Ÿå¾…è¿”å›çš„åˆ—è¡¨æ•°æ®</span>
    <span class="hljs-keyword">const</span> data = [
        {<span class="hljs-attr">id</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'henry'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">18</span>},
        {<span class="hljs-attr">id</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'harvest'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">19</span>},
        {<span class="hljs-attr">id</span>: <span class="hljs-number">3</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'hello'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">20</span>}
    ]
    <span class="hljs-comment">// åˆ¤æ–­è¯·æ±‚è·¯å¾„ï¼Œè¿”å›å¯¹åº”æ•°æ®</span>
    <span class="hljs-keyword">if</span> (ctx.<span class="hljs-property">url</span> === <span class="hljs-string">'/list'</span>) {
        ctx.<span class="hljs-property">body</span> = data;
    }
}

<span class="hljs-comment">// æ³¨å†Œä¸­é—´ä»¶ï¼Œå¤„ç†æ‰€æœ‰è¯·æ±‚</span>
app.<span class="hljs-title function_">use</span>(main);
<span class="hljs-comment">// ç›‘å¬3000ç«¯å£ï¼Œå¯åŠ¨æœåŠ¡</span>
app.<span class="hljs-title function_">listen</span>(<span class="hljs-number">3000</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'server is running at http://localhost:3000'</span>);
});
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f304f98793884689a7914d90ec592543~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOO5q2i5L2V5a6J5ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769868669&amp;x-signature=ObgjvDGEnrkwz5oayrkTiE57Tvc%3D" alt="image.png" loading="lazy"/></p>
<p>è¿™æ®µä»£ç ä¸­ï¼Œ<code>ctx</code> æ˜¯ Koa æœ€æ ¸å¿ƒçš„ä¸Šä¸‹æ–‡å¯¹è±¡ï¼Œå®ƒæŠŠ <code>request</code> å’Œ <code>response</code> å°è£…åœ¨ä¸€èµ·ã€‚å½“è®¿é—® <code>http://localhost:3000/list</code> æ—¶ï¼Œå°±èƒ½ç›´æ¥æ‹¿åˆ°æˆ‘ä»¬é¢„è®¾çš„ JSON æ•°æ®ï¼Œæ— éœ€åƒåŸç”Ÿ <code>http</code> é‚£æ ·æ‰‹åŠ¨è®¾ç½®å“åº”å¤´ã€‚</p>
<h4 data-id="heading-5">3. çµæ´»å¤„ç†å“åº”ï¼šå¤šç±»å‹é€‚é…ï¼Œä¸€é”®åˆ‡æ¢</h4>
<p>åœ¨å®é™…å¼€å‘ä¸­ï¼Œæˆ‘ä»¬éœ€è¦è¿”å›ä¸åŒç±»å‹çš„å“åº”æ•°æ®ï¼Œæ¯”å¦‚ JSONã€HTMLã€çº¯æ–‡æœ¬ç­‰ï¼ŒKoa é€šè¿‡<code>ctx.response.type</code>å¯ä»¥è½»æ¾å®ç°<strong>å“åº”ç±»å‹çš„åˆ‡æ¢</strong>ï¼Œæ— éœ€æ‰‹åŠ¨é…ç½®å¤æ‚çš„å“åº”å¤´ï¼Œè®©å“åº”å¤„ç†å˜å¾—æå…¶çµæ´»ã€‚</p>
<p>æ¯”å¦‚éœ€è¦è¿”å›æ ‡å‡†çš„ JSON æ ¼å¼æ•°æ®ï¼Œåªéœ€æŒ‡å®šå“åº”ç±»å‹ä¸º<code>json</code>ï¼Œå†ç»™<code>ctx.body</code>èµ‹å€¼å³å¯ï¼š</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-keyword">const</span> <span class="hljs-title class_">Koa</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">'koa'</span>);
<span class="hljs-keyword">const</span> app = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Koa</span>();

<span class="hljs-keyword">function</span> <span class="hljs-title function_">main</span>(<span class="hljs-params">ctx</span>) {
    ctx.<span class="hljs-property">response</span>.<span class="hljs-property">type</span> = <span class="hljs-string">'json'</span>; <span class="hljs-comment">// æŒ‡å®šå“åº”ç±»å‹ä¸ºJSON</span>
    ctx.<span class="hljs-property">body</span> = <span class="hljs-string">'{"data": "hello koa"}'</span>; <span class="hljs-comment">// èµ‹å€¼JSONå­—ç¬¦ä¸²</span>
}

app.<span class="hljs-title function_">use</span>(main);
app.<span class="hljs-title function_">listen</span>(<span class="hljs-number">3000</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'server is running at http://localhost:3000'</span>);
});
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/10832ef76aba4092870bd6ba194f5aa7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOO5q2i5L2V5a6J5ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769868669&amp;x-signature=AmrhF4rJ6JO1Tgm67RKXsaSG1Ys%3D" alt="image.png" loading="lazy"/></p>
<p>å½“ç„¶å•¦ï¼Œå¤§å®¶ä¹Ÿå¯ä»¥å»è¯•è¯•å…¶ä»–ç±»å‹ï¼Œç”¨æ³•æ˜¯å®Œå…¨ä¸€æ ·çš„ğŸ˜„ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d423d89dd53e40f595f4d8c6fac28122~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOO5q2i5L2V5a6J5ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769868669&amp;x-signature=T%2Bj%2FlC7IyCpJlS25SYa4lqSO%2F1U%3D" alt="image.png" loading="lazy"/></p>
<p>å¦‚æœéœ€è¦è¿”å› HTML å†…å®¹ï¼Œåªéœ€å°†<code>ctx.response.type</code>æ”¹ä¸º<code>html</code>ï¼Œ<code>ctx.body</code>å¯ä»¥ç›´æ¥èµ‹å€¼ HTML å­—ç¬¦ä¸²ï¼Œä¹Ÿå¯ä»¥è¯»å–æœ¬åœ° HTML æ–‡ä»¶è¿”å›ï¼Œé€‚é…æ€§æ‹‰æ»¡ã€‚</p>
<h4 data-id="heading-6">4. è¯»å–æœ¬åœ°æ–‡ä»¶ï¼šé«˜æ•ˆè¿”å›ï¼Œé€‚é…é¡µé¢å¼€å‘</h4>
<p><code>åœ¨ Web å¼€å‘ä¸­</code>ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦è¿”å›æœ¬åœ°çš„ <strong>HTML é¡µé¢</strong>ï¼Œ<code>Koa</code> ç»“åˆ <strong>Node.js</strong> çš„<code>fs</code>æ¨¡å—ï¼Œèƒ½é«˜æ•ˆå®ç°æœ¬åœ°æ–‡ä»¶çš„<strong>è¯»å–</strong>å’Œ<strong>è¿”å›</strong>ï¼Œè€Œä¸”é€šè¿‡<strong>æµ</strong>çš„æ–¹å¼è¯»å–ï¼Œé¿å…äº†å¤§æ–‡ä»¶ä¸€æ¬¡æ€§åŠ è½½çš„æ€§èƒ½é—®é¢˜ï¼Œå…¼é¡¾æ•ˆç‡å’Œæ€§èƒ½ã€‚</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-keyword">const</span> <span class="hljs-title class_">Koa</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">'koa'</span>);
<span class="hljs-keyword">const</span> app = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Koa</span>();
<span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>); <span class="hljs-comment">// å¼•å…¥Node.jså†…ç½®çš„æ–‡ä»¶æ¨¡å—</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">main</span>(<span class="hljs-params">ctx</span>) {
    ctx.<span class="hljs-property">response</span>.<span class="hljs-property">type</span> = <span class="hljs-string">'html'</span>; <span class="hljs-comment">// æŒ‡å®šå“åº”ç±»å‹ä¸ºHTML</span>
    <span class="hljs-comment">// ä»¥æµçš„æ–¹å¼è¯»å–æœ¬åœ°3.htmlæ–‡ä»¶ï¼Œèµ‹å€¼ç»™å“åº”ä½“</span>
    ctx.<span class="hljs-property">body</span> = fs.<span class="hljs-title function_">createReadStream</span>(<span class="hljs-string">'./3.html'</span>);
}

app.<span class="hljs-title function_">use</span>(main);
app.<span class="hljs-title function_">listen</span>(<span class="hljs-number">3000</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'server is running at http://localhost:3000'</span>);
});
</code></pre>
<p>æˆ‘ä»¬è¦åŒæ—¶åˆ›å»ºä¸€ä¸ª<code>html</code>çš„æ–‡ä»¶ï¼Œè®©å®ƒè¯»å–é‡Œé¢çš„å†…å®¹ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Document<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>æ¬¢è¿è®¿é—® koa æœåŠ¡<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/899ae31578484b319f6d4e2c7a06b267~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOO5q2i5L2V5a6J5ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769868669&amp;x-signature=f79xJxzhyhyUvC0Ka8QIfrZkIxg%3D" alt="image.png" loading="lazy"/></p>
<p>è¿™æ®µä»£ç è¿è¡Œåï¼Œè®¿é—®æœ¬åœ° 3000 ç«¯å£ï¼Œå°±èƒ½ç›´æ¥çœ‹åˆ°<code>3.html</code>æ–‡ä»¶çš„é¡µé¢å†…å®¹ï¼Œå®Œç¾é€‚é…å‰ç«¯é¡µé¢çš„æ¸²æŸ“éœ€æ±‚ã€‚</p>
<h4 data-id="heading-7">5. è·¯ç”±ç®¡ç†ï¼šæ¸…æ™°åˆ’åˆ†ï¼Œå‘Šåˆ«æ‚ä¹±ä»£ç </h4>
<p>å½“é¡¹ç›®ä¸šåŠ¡é€æ¸å¤æ‚ï¼Œå•ä¸€è·¯ç”±å·²ç»æ— æ³•æ»¡è¶³éœ€æ±‚ï¼Œæˆ‘ä»¬éœ€è¦å¯¹ä¸åŒçš„è¯·æ±‚åœ°å€åšæ¸…æ™°çš„è·¯ç”±åˆ’åˆ†ï¼Œæ¯”å¦‚é¦–é¡µã€å…³äºé¡µã€æ•°æ®æ¥å£ç­‰ï¼Œå„è‡ªå¯¹åº”ä¸åŒçš„å¤„ç†é€»è¾‘ã€‚Koa æœ¬èº«æ²¡æœ‰å†…ç½®è·¯ç”±åŠŸèƒ½ï¼Œä½†å¯ä»¥é€šè¿‡<code>koa-route</code>ä¸­é—´ä»¶å¿«é€Ÿå®ç°è·¯ç”±ç®¡ç†ï¼Œè®©ä»£ç ç»“æ„æ›´æ¸…æ™°ï¼Œç»´æŠ¤æ›´æ–¹ä¾¿ã€‚</p>
<ul>
<li><strong>é¦–å…ˆå®‰è£…<code>koa-route</code>ä¸­é—´ä»¶ï¼š</strong></li>
</ul>
<pre><code class="hljs language-bash" lang="bash">npm i koa-route -S
</code></pre>
<ul>
<li><strong>ç„¶åé€šè¿‡ä¸­é—´ä»¶å®ç°è·¯ç”±çš„åˆ†å‘å’Œå¤„ç†ï¼Œä¸åŒè·¯ç”±å¯¹åº”ä¸åŒå‡½æ•°ï¼š</strong></li>
</ul>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-keyword">const</span> <span class="hljs-title class_">Koa</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">'koa'</span>);
<span class="hljs-keyword">const</span> app = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Koa</span>();
<span class="hljs-keyword">const</span> router = <span class="hljs-built_in">require</span>(<span class="hljs-string">'koa-route'</span>); <span class="hljs-comment">// å¼•å…¥è·¯ç”±ä¸­é—´ä»¶</span>

<span class="hljs-comment">// é¦–é¡µè·¯ç”±å¤„ç†å‡½æ•°</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">home</span> = (<span class="hljs-params">ctx</span>) =&gt; {
    ctx.<span class="hljs-property">body</span> = <span class="hljs-string">'è¿™æ˜¯Koaçš„é¦–é¡µ'</span>;
}

<span class="hljs-comment">// å…³äºé¡µè·¯ç”±å¤„ç†å‡½æ•°ï¼Œæ”¯æŒç›´æ¥è¿”å›HTMLæ ‡ç­¾</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">about</span> = (<span class="hljs-params">ctx</span>) =&gt; {
    ctx.<span class="hljs-property">body</span> = <span class="hljs-string">'&lt;h2&gt;è¿™æ˜¯Koaçš„å…³äºé¡µé¢&lt;/h2&gt;'</span>;
}

<span class="hljs-comment">// æ³¨å†ŒGETè·¯ç”±ï¼ŒæŒ‡å®šè¯·æ±‚åœ°å€å’Œå¯¹åº”çš„å¤„ç†å‡½æ•°</span>
app.<span class="hljs-title function_">use</span>(router.<span class="hljs-title function_">get</span>(<span class="hljs-string">'/home'</span>, home));
app.<span class="hljs-title function_">use</span>(router.<span class="hljs-title function_">get</span>(<span class="hljs-string">'/about'</span>, about));

app.<span class="hljs-title function_">listen</span>(<span class="hljs-number">3000</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'server is running at http://localhost:3000'</span>);
});
</code></pre>
<p>æ­¤æ—¶è®¿é—®<code>/home</code>ä¼šè¿”å›é¦–é¡µæ–‡å­—ï¼Œè®¿é—®<code>/about</code>ä¼šæ¸²æŸ“å‡º HTML æ ‡é¢˜ï¼Œä¸åŒè·¯ç”±çš„é€»è¾‘å®Œå…¨åˆ†ç¦»ï¼Œå³ä½¿åç»­æ–°å¢è·¯ç”±ï¼Œä¹Ÿåªéœ€<strong>æ–°å¢å¤„ç†å‡½æ•°</strong>å¹¶æ³¨å†Œå³å¯ï¼Œä»£ç å§‹ç»ˆä¿æŒæ•´æ´ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/88c4059215484c0aa4549b50ab2ac2d1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOO5q2i5L2V5a6J5ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769868669&amp;x-signature=0Z9CcsjJiXh2HzxmdqYHZ40Hft8%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9826a4c8257343429bf1c6fc2ee4c82b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOO5q2i5L2V5a6J5ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769868669&amp;x-signature=CnUBNJX8wI67okP4cUE8IB1bcmA%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-8">ä¸‰ã€ Koa çš„æ ¸å¿ƒé­…åŠ›ï¼šä¸­é—´ä»¶ä¸å¼‚æ­¥ï¼ˆå¿ä¸ä½å” å—‘æ‹“å±•ï¼‰</h3>
<p>èŠåˆ° <code>Koa</code>ï¼Œå°±ä¸å¾—ä¸æå®ƒçš„ä¸¤å¤§æ ¸å¿ƒé­…åŠ›ï¼š<strong>ä¸­é—´ä»¶æœºåˆ¶</strong>å’Œ<strong>å®Œç¾çš„å¼‚æ­¥æ”¯æŒ</strong>ã€‚</p>
<p>Koa çš„ä¸­é—´ä»¶é‡‡ç”¨<strong>æ´‹è‘±æ¨¡å‹</strong>æ‰§è¡Œï¼Œæ‰€æœ‰ä¸­é—´ä»¶ä¼š<strong>ä»å¤–åˆ°å†…ä¾æ¬¡æ‰§è¡Œ</strong>ï¼Œå†<strong>ä»å†…åˆ°å¤–åå‘æ‰§è¡Œ</strong>ï¼Œè¿™ç§æœºåˆ¶è®©è¯·æ±‚å’Œå“åº”çš„å¤„ç†å¯ä»¥åˆ†å±‚å®ç°ï¼Œå„è‡ªè´Ÿè´£ç‹¬ç«‹çš„åŠŸèƒ½ï¼Œäº’ä¸å¹²æ‰°ï¼Œè¿˜èƒ½å®ç°åŠŸèƒ½çš„å¤ç”¨ã€‚</p>
<p>è€Œ<code>async/await</code>çš„å®Œç¾æ”¯æŒï¼Œè®© <code>Koa</code> å½»åº•æ‘†è„±äº†<strong>å›è°ƒåœ°ç‹±</strong>çš„å›°æ‰°ã€‚åœ¨å¤„ç†æ•°æ®åº“æŸ¥è¯¢ã€æ¥å£è¯·æ±‚ç­‰å¼‚æ­¥æ“ä½œæ—¶ï¼Œæ— éœ€åµŒå¥—å¤šå±‚å›è°ƒï¼Œåªéœ€ç”¨<code>await</code>ç­‰å¾…å¼‚æ­¥ç»“æœï¼Œä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§å¤§å¹…æå‡ï¼Œè¿™ä¹Ÿæ˜¯ <code>Koa</code> ç›¸æ¯”ä¼ ç»Ÿæ¡†æ¶çš„ä¸€å¤§ä¼˜åŠ¿ã€‚</p>
<h3 data-id="heading-9">å››ã€æ€»ç»“</h3>
<p><code>Koa</code> ä½œä¸º<strong>è½»é‡å‹ Node.js æ¡†æ¶</strong>ï¼Œä»¥æç®€æ ¸å¿ƒã€æ´‹è‘±æ¨¡å‹ä¸­é—´ä»¶æœºåˆ¶å’Œå¯¹<code>async/await</code>çš„å®Œç¾æ”¯æŒä¸ºäº®ç‚¹ï¼Œå¯çµæ´»å¤„ç†å“åº”ã€æœ¬åœ°æ–‡ä»¶ã€è·¯ç”±ç­‰éœ€æ±‚ï¼Œæ­é…ä¸­é—´ä»¶å³å¯æŒ‰éœ€æ‰©å±•ï¼Œå…¼é¡¾å¼€å‘æ•ˆç‡ä¸ä»£ç æ•´æ´åº¦ï¼Œæ˜¯ä¸­å°é¡¹ç›®åŠå¿«é€Ÿå¼€å‘åœºæ™¯çš„ä¼˜é€‰ã€‚</p>
<h2 data-id="heading-10">ç»“è¯­</h2>
<p><code>Koa</code> ç”¨ä¼˜é›…è¯­æ³•ç®€åŒ–äº† <strong>Node.js åç«¯å¼€å‘</strong>ï¼Œå¹³è¡¡äº†è‡ªç”±åº¦ä¸å®ç”¨æ€§ã€‚å…¥æ‰‹ <code>Koa</code>ï¼Œæ—¢èƒ½æ‘†è„±åŸç”Ÿå¼€å‘çš„å†—ä½™ï¼Œä¹Ÿèƒ½å¿«é€Ÿæ­å»ºé«˜æ•ˆæœåŠ¡ï¼Œè§£é”è½»é‡åŒ–åç«¯å¼€å‘çš„ä¾¿æ·ä½“éªŒã€‚</p>
<blockquote>
<p>ä¸å…è®¸ä½ è¿˜ä¸ä¼š <strong>koa</strong>ï¼</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vibe Coding ä¸€å‘¨ï¼Œæˆ‘åšäº†ä¸ªæ¡Œé¢ Agent]]></title>    <link>https://juejin.cn/post/7598465042968477736</link>    <guid>https://juejin.cn/post/7598465042968477736</guid>    <pubDate>2026-01-24T09:19:53.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7598465042968477736" data-draft-id="7598464972912590888" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vibe Coding ä¸€å‘¨ï¼Œæˆ‘åšäº†ä¸ªæ¡Œé¢ Agent"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,å‰ç«¯,åç«¯"/> <meta itemprop="datePublished" content="2026-01-24T09:19:53.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è‰¾é€—ç¬”"/> <meta itemprop="url" content="https://juejin.cn/user/2682464100687230"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vibe Coding ä¸€å‘¨ï¼Œæˆ‘åšäº†ä¸ªæ¡Œé¢ Agent
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2682464100687230/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è‰¾é€—ç¬”
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-24T09:19:53.000Z" title="Sat Jan 24 2026 09:19:53 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-24
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤ç›˜ä¸€ä¸‹æˆ‘vibe coding ä¸€å‘¨ï¼Œå¼€å‘ WorkAny çš„è¿‡ç¨‹ï¼Œå¾ˆæœ‰æ„æ€ã€‚ğŸ˜‚</p>
<h2 data-id="heading-0">å¼€å‘è¿‡ç¨‹</h2>
<ol>
<li>
<p>ä¸Šå‘¨ä¸‰åœ¨é¦™æ¸¯åŠå¡ï¼Œä¸´æ—¶èµ·æ„æƒ³åšä¸ªæ¡Œé¢ Agent é¡¹ç›®ï¼Œå¯¹æ ‡ coworkï¼Œæ™šä¸Šå›åˆ°å¹¿å·å¼€å§‹å†™ä»£ç </p>
</li>
<li>
<p>åˆæœŸç›®æ ‡æ˜¯å¿«é€Ÿå‘å¸ƒï¼Œæ²¡æ—¶é—´å»ç ”ç©¶å“ªä¸ª Agent æ¡†æ¶å¥½ç”¨äº†ï¼Œçœ‹å¾ˆå¤šäººåœ¨ç”¨ claude agent sdkï¼Œå…ˆç”¨è¿™ä¸ªå§</p>
</li>
</ol>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f6638cb4bb6047f9b704201c62ae3e50~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Im-6YCX56yU:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769851193&amp;x-signature=twU06G5cn6F9gF7Um5YEB85SkxE%3D" alt="" loading="lazy"/></p>
<ol start="3">
<li>
<p>ç¬¬ä¸€æ—¶é—´æƒ³åˆ°ç”¨ tauriï¼Œå–œæ¬¢å°è€Œç¾ï¼Œæ€»è§‰å¾— electron å¾ˆé‡ï¼Œä¸æƒ³ç”¨</p>
</li>
<li>
<p>ä¸æƒ³è‡ªå·±å†™ä»£ç äº†ï¼Œå†³å®šè®© claude code æ¥å†™ã€‚ä¹‹å‰çš„ claude è´¦å·éƒ½è¢«å°äº†ï¼Œç”¨ä¸ä¸ŠåŸç‰ˆ ccï¼Œè£…äº†ä¸ª cc-switchï¼Œæ¥ä¸Š OpenRouter çš„ API å¼€å§‹å†™</p>
</li>
<li>
<p>æˆªäº†ä¸ª chatbot çš„äº¤äº’æˆªå›¾ï¼Œè®© cc å‚è€ƒç€å…ˆæŠŠåŸºæœ¬çš„å¯¹è¯æµç¨‹è·‘é€šï¼Œç”¨ claude agent sdkï¼Œæ¥ä¸Š OpenRouterï¼Œcc å¾ˆå¿«å†™å®Œäº†ç¬¬ä¸€ç‰ˆ</p>
</li>
</ol>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6d40f912af6048938b6c24d8b0e9d04a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Im-6YCX56yU:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769851193&amp;x-signature=cNvyLxjsZ3MH81jp2x9lj1nHYyQ%3D" alt="" loading="lazy"/></p>
<ol start="6">
<li>tauri æœ¬è´¨æ˜¯ç”¨ rust çš„å£³å­å¥—äº†ä¸ªå‰ç«¯ç•Œé¢ï¼Œä¸ç†Ÿæ‚‰ rustï¼Œè®© cc ç”¨ hono å†™APIï¼Œrust åªåšå£³å­ï¼Œä¸åšä¸šåŠ¡åŠŸèƒ½ã€‚API ä½œä¸º sidecar æ‰“åŒ…è¿› app</li>
</ol>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/42bcbb34123943d7a370c427f8a3f02e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Im-6YCX56yU:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769851193&amp;x-signature=mCeWv%2FlkhgYJTJeUEyCllpvNcj8%3D" alt="" loading="lazy"/></p>
<ol start="7">
<li>
<p>è®© cc åœ¨ API å¼•å…¥ sqlite å®ç°æœ¬åœ°å­˜å‚¨ï¼ŒæŒä¹…åŒ–ä»»åŠ¡æ•°æ®ï¼Œåˆ›å»ºæœ¬åœ°å·¥ä½œç›®å½•ï¼Œä¿å­˜ä»»åŠ¡è¾“å‡ºæ–‡ä»¶</p>
</li>
<li>
<p>å†™äº†åŠå¤©ï¼Œçœ‹ OpenRouter æ¶ˆè€—äº† 110 åˆ€ï¼Œæœ‰ç‚¹è‚‰ç–¼ã€‚ä¹°äº†ä¸ªç¾å›½ä½å®… ipï¼Œä»˜è´¹ä¸Šäº†åŸç‰ˆ claude pro</p>
</li>
<li>
<p>æˆªäº†ä¸ª Manus çš„ä»»åŠ¡è¯¦æƒ…å›¾ï¼Œè®© cc å‚è€ƒå†™å®Œå·¥å…·è°ƒç”¨çš„é€»è¾‘ï¼Œä¸­é—´æ˜¯ chatbot å¯¹è¯ï¼Œå³è¾¹ç”¨ä¸€ä¸ªè™šæ‹Ÿè®¡ç®—æœºçš„å®¹å™¨å±•ç¤ºè¾“å…¥è¾“å‡º</p>
</li>
</ol>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4f659b49ba9d4069a565fd8c49e81e7f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Im-6YCX56yU:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769851193&amp;x-signature=KuCYbRKETYxXYA9JZtLl5DOPXMA%3D" alt="" loading="lazy"/></p>
<ol start="10">
<li>è®© cc æ¥å…¥ shadcn/uiï¼ŒæŠŠæ ·å¼åšå¾—å¥½çœ‹ä¸€ç‚¹ï¼Œæ”¯æŒåˆ‡æ¢çš®è‚¤</li>
</ol>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/71722d5fd61045fea186b2b47117f5d6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Im-6YCX56yU:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769851193&amp;x-signature=l0qj52LJxdYjsve8hhqXbIAn6eQ%3D" alt="" loading="lazy"/></p>
<ol start="11">
<li>
<p>åˆå†™äº†ä¸€å¤©ï¼Œå…³é”®æ—¶å€™ claude pro é™é¢‘äº†ï¼Œå¾ˆå½±å“å¿ƒæƒ…ï¼Œè¡¥å·®ä»·ä¸Šäº† claude max é¡¶é…ç‰ˆ</p>
</li>
<li>
<p>è®© cc æŠŠè‡ªå®šä¹‰æ¨¡å‹é…ç½®ï¼Œmcpã€skills è°ƒç”¨çš„é€»è¾‘éƒ½å®ç°äº†ï¼Œè·‘äº†å‡ ä¸ªç”Ÿæˆ PPTã€Excelã€Docã€ ç½‘é¡µçš„ caseï¼Œæ•ˆæœä¸é”™</p>
</li>
</ol>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e97af301a7d841929dc5d65a6cf455e6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Im-6YCX56yU:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769851193&amp;x-signature=jTZ45ZnICl8En5Ci1KmTZx%2B5hho%3D" alt="" loading="lazy"/></p>
<ol start="13">
<li>è®© cc æŠŠè¾“å‡ºæ–‡ä»¶å¤¹å’Œä¸­é—´è¿‡ç¨‹çš„ artifacts éƒ½åœ¨å³è¾¹å±•ç¤ºå‡ºæ¥ï¼Œå†™äº†ä¸ª artifact preview å®¹å™¨ï¼Œæ¸²æŸ“å„ç§ç±»å‹çš„æ–‡ä»¶ï¼Œå¯è§†åŒ–é¢„è§ˆ</li>
</ol>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/74a2bfa14d3a40c6b60b88d20d6701e5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Im-6YCX56yU:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769851193&amp;x-signature=h%2FPXsExTE%2BIRFGAYeR6ktWfjs6o%3D" alt="" loading="lazy"/></p>
<ol start="14">
<li>æœ‰äº›ä»»åŠ¡éœ€è¦è·‘è„šæœ¬å®Œæˆï¼Œè€ƒè™‘åˆ°ç”¨æˆ·ç”µè„‘å¯èƒ½æ²¡è£…ä»£ç è¿è¡Œç¯å¢ƒï¼Œè®© cc å¼•å…¥ sandbox æ¥è¿è¡Œä»£ç </li>
</ol>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/811d03960c6043c68495da51d07e4492~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Im-6YCX56yU:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769851193&amp;x-signature=F22XoHYbuDG9NdF1e%2FFhIf6wC4M%3D" alt="" loading="lazy"/></p>
<ol start="15">
<li>è€ƒè™‘åˆ°æ‰©å±•æ€§ï¼Œéœ€è¦æ”¯æŒä¸åŒç±»å‹çš„ Agent runtime å’Œ sandboxï¼Œè®© cc å†™äº†ä¸¤ä¸ªæŠ½è±¡ç±»ï¼Œç»Ÿä¸€æ¥å£è°ƒç”¨ã€‚Agent runtime æ”¯æŒ claude codeã€codexã€deepagentsï¼Œsandbox æ”¯æŒ boxliteã€codex-sandboxã€claude-sandbox</li>
</ol>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/708c2f2504cf4327a5ee3b543816e26d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Im-6YCX56yU:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769851193&amp;x-signature=M8FGZZHJSIJaPqqZLMaw8dB%2BK1I%3D" alt="" loading="lazy"/></p>
<ol start="16">
<li>è§‰å¾— cc å†™çš„ä»£ç æœ‰ç‚¹ä¹±ï¼Œè®© cc å¼•å…¥ eslint å’Œ prettier åšäº†ä¸‹æ ¼å¼åŒ–ï¼ŒæŠŠé€»è¾‘å¤ªå¤šçš„æ–‡ä»¶åšæ¨¡å—åŒ–æ‹†åˆ†ã€‚å†å‚è€ƒ ShipAny çš„ç›®å½•ç»“æ„ï¼Œè°ƒæ•´äº†ä¸€ä¸‹é¡¹ç›®ç»“æ„</li>
</ol>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e7d317c0f2f5454c9c04ae388af01f91~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Im-6YCX56yU:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769851193&amp;x-signature=Qgzjeq50lD63syn6vcNWykLDQrs%3D" alt="" loading="lazy"/></p>
<ol start="17">
<li>è®© cc å†™æ‰“åŒ…è„šæœ¬ï¼Œæ„å»ºä¸åŒæ“ä½œç³»ç»Ÿçš„å®‰è£…åŒ…ã€‚æŠŠå®‰è£…åŒ…å‘ç»™ä¸€äº›æœ‹å‹ï¼Œå¼€å§‹å†…æµ‹äº†ã€‚æ ¹æ®å†…æµ‹ç”¨æˆ·çš„åé¦ˆï¼Œå†è®© cc ç»§ç»­ä¼˜åŒ–é€»è¾‘ï¼Œè§£å†³é—®é¢˜ï¼Œè¿­ä»£åŠŸèƒ½</li>
</ol>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f5da0190b1724df1bdabb1ab39244608~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Im-6YCX56yU:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769851193&amp;x-signature=X95HZi%2F0To8vUabtElEckAjjOps%3D" alt="" loading="lazy"/></p>
<ol start="18">
<li>
<p>æœ‰äº›ç”¨æˆ·ç”µè„‘æ²¡è£… nodeï¼Œæ²¡æœ‰ claude codeï¼Œå®‰è£…è½¯ä»¶åè·‘ä¸èµ·æ¥ï¼Œè®© cc åœ¨æ„å»ºè„šæœ¬æ”¯æŒ flag å‚æ•°ï¼ŒæŠŠ node å’Œ cc ä½œä¸º sidecar æ‰“åŒ…è¿› appï¼Œè®©ç”¨æˆ·èƒ½å¤Ÿå¼€ç®±å³ç”¨</p>
</li>
<li>
<p>Mac ç”¨æˆ·å®‰è£… app åæç¤ºæ–‡ä»¶æŸåæˆ–æœ‰å®‰å…¨æç¤ºï¼Œè®© cc åœ¨æ„å»ºè„šæœ¬é‡Œé¢åŠ ä¸Šç­¾åå¤„ç†ï¼Œç”¨æˆ‘çš„ Apple å¼€å‘è€…è´¦æˆ·å¯¹æ‰“åŒ…çš„ Mac app åšç­¾å</p>
</li>
<li>
<p>node å’Œ cc éƒ½æ‰“åŒ…è¿› app çš„ç‰ˆæœ¬ï¼Œå®‰è£…åŒ… 100 å¤š mï¼Œæœ‰ç‚¹é‡ã€‚è®© cc åœ¨æ„å»ºè„šæœ¬å®ç°é»˜è®¤ä¸æ‰“åŒ…ï¼Œåœ¨ç”¨æˆ·å¯åŠ¨ app çš„æ—¶å€™å¼•å¯¼å®‰è£… node å’Œ ccï¼Œç²¾ç®€ç‰ˆå®‰è£…åŒ…æ‰ 20 å¤š mï¼Œå°å·§ç²¾è‡´</p>
</li>
</ol>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f8e99a9ff9544c87b874018539f66c97~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Im-6YCX56yU:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769851193&amp;x-signature=KF4HEfIKOkMN4a4XtTKetdb6lWk%3D" alt="" loading="lazy"/></p>
<ol start="21">
<li>app åŸºæœ¬åŠŸèƒ½å®ç°å¾—å·®ä¸å¤šäº†ï¼Œè®© cc åœ¨ ShipAny æ¨¡æ¿åŸºç¡€ä¸Šå†™ä¸€ä¸ª WorkAny çš„å®˜ç½‘ï¼Œæ”¾ä¸Šæ¼”ç¤ºå›¾ï¼Œéƒ¨ç½²ä¸Šçº¿</li>
</ol>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7ee57d70102b4b13b3d3a515b6c29f34~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Im-6YCX56yU:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769851193&amp;x-signature=CjmI9cmNXPHyD%2FuV1gx9kvrgtUE%3D" alt="" loading="lazy"/></p>
<ol start="22">
<li>WorkAny å¼€æºå‘å¸ƒï¼ŒMVP ç‰ˆæœ¬ä¸Šçº¿ï¼Œç”¨æˆ·æ‹‰æºç æœ¬åœ°æ„å»ºï¼Œé…ä¸ª API ç›´æ¥ç”¨</li>
</ol>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/34802ec98531460c9f90a37c8e5e672c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Im-6YCX56yU:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769851193&amp;x-signature=Hz10Ady75tV2J1hJtL17LulUffo%3D" alt="" loading="lazy"/></p>
<ol start="23">
<li>è®© cc å†™äº†ä¸ª github æ„å»ºè„šæœ¬ï¼Œåœ¨ä»£ç æ¨é€åˆ° main åˆ†æ”¯æ—¶ï¼Œè‡ªåŠ¨è§¦å‘ github action æ„å»ºï¼Œä¸€æ¬¡æ€§æ‰“åŒ… Windowsã€Linuxã€Mac ä¸‰å¤§å¹³å°çš„å®‰è£…åŒ…ï¼Œè‡ªåŠ¨å‘å¸ƒåˆ° releaseï¼Œç”¨æˆ·æ— éœ€è‡ªè¡Œæ„å»ºäº†</li>
</ol>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/875ea5654cf0440a99411114e7500739~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Im-6YCX56yU:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769851193&amp;x-signature=o1MVFAKL6rojqV69qtgVm0S7n%2Fk%3D" alt="" loading="lazy"/></p>
<ol start="24">
<li>æ ¹æ®ç”¨æˆ·çš„åé¦ˆï¼Œé—®é¢˜ä¸¢ç»™ cc å»ä¿®ï¼Œæƒ³åˆ°ä»€ä¹ˆæ–°åŠŸèƒ½ä¹Ÿå‘Šè¯‰ cc åŠ ä¸Šï¼Œè‡ªå·±åªåšæµ‹è¯•ï¼Œä¸å†™ä»£ç ï¼Œçœ‹éƒ½ä¸çœ‹ä¸€çœ¼ã€‚ğŸŒš</li>
</ol>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1e68039517e54390a685a2850efe394e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Im-6YCX56yU:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769851193&amp;x-signature=kzfb2Ui7VrDj2NWGWs%2BD%2FN%2B0nLA%3D" alt="" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-1">å‡ ç‚¹æ„Ÿæ‚Ÿ</h2>
<ol>
<li>ç¬¬ä¸€æ¬¡å°è¯•å…¨è‡ªåŠ¨é©¾é©¶ vibe coding åšé¡¹ç›®ï¼Œçˆ½æ„Ÿéå¸¸å¼ºçƒˆï¼ŒWorkAny çš„ä»£ç  100% ç”± cc è€å¼Ÿå®Œæˆï¼Œæˆ‘åªè´Ÿè´£æŒ‡æŒ¥ï¼Œæ—¥å¸¸å¼€ä¸‰ä¸ªçª—å£ï¼Œè®©ä¸‰ä¸ª cc è€å¼ŸåŒæ—¶å¹²æ´»ï¼Œæ•ˆç‡æ‹‰æ»¡</li>
</ol>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7f65c44ce406422bac53effa8da87ff1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Im-6YCX56yU:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769851193&amp;x-signature=Jv4jeqybt1kQ7LxuVIw%2BL6OfZIU%3D" alt="" loading="lazy"/></p>
<ol start="2">
<li>AI æ—¶ä»£æŠ€æœ¯å¹³æƒï¼Œäººäººéƒ½æ˜¯å»ºç­‘å¸ˆï¼Œç†è§£ç”¨æˆ·éœ€æ±‚ã€å¥½çš„äº§å“ sense å’Œå®¡ç¾æ˜¯åšå‡ºå¥½äº§å“çš„å…³é”®</li>
</ol>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/916b74cae2474ec9bb563a822ff21c6e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Im-6YCX56yU:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769851193&amp;x-signature=EtAg5iOc%2FgI0vnKj4e5%2BAfyUdqM%3D" alt="" loading="lazy"/></p>
<ol start="3">
<li>
<p>æŠ€æœ¯å¹¿åº¦å’Œå…¨å±€è§†é‡æ˜¯æœ€å¤§çš„ä¼˜åŠ¿ï¼Œå¯ä»¥ç²¾å‡†æéœ€æ±‚ï¼ŒæŒ‡å“ªæ‰“å“ªï¼Œé‡åˆ°é—®é¢˜èƒ½å¿«é€Ÿå®šä½ï¼Œé˜²æ­¢ AI èµ°åå¤±æ§</p>
</li>
<li>
<p>ä»¥å‰æ€»è§‰å¾—æ‰‹æ´—çš„è¡£æœæ¯”æ´—è¡£æœºæ´—çš„å¹²å‡€ï¼Œç°åœ¨å¯ä»¥æ”¾å¿ƒäº¤ç»™æ´—è¡£æœºäº†ï¼Œåˆå¹²å‡€åˆå¿«ï¼Œèƒ½ç©¿å°±è¡Œ</p>
</li>
<li>
<p>ä¼˜ç§€çš„ç¨‹åºå‘˜ä¸ä¼šè¢« AI æ·˜æ±°ï¼Œæ³•æ‹‰åˆ©è€äº†è¿˜æ˜¯æ³•æ‹‰åˆ©ã€‚ğŸŒ</p>
</li>
</ol>
<p>æ¬¢è¿è¯•ç”¨ WorkAnyï¼Œæ„Ÿè°¢åé¦ˆä¸æ”¯æŒã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fworkany.ai" target="_blank" title="https://workany.ai" ref="nofollow noopener noreferrer">workany.ai</a></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/473bd81c6fe44fb5a4410778625065a4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Im-6YCX56yU:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769851193&amp;x-signature=ZOLyD%2Bp9oO%2F%2BiqJdFH4wmuSKCGQ%3D" alt="" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Rust æ‰€æœ‰æƒä¸å€Ÿç”¨ï¼šä»å †æ ˆå¼€å§‹å»ºç«‹å¿ƒæ™ºæ¨¡å‹]]></title>    <link>https://juejin.cn/post/7598507330859958314</link>    <guid>https://juejin.cn/post/7598507330859958314</guid>    <pubDate>2026-01-23T16:35:12.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7598507330859958314" data-draft-id="7598418891400642614" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Rust æ‰€æœ‰æƒä¸å€Ÿç”¨ï¼šä»å †æ ˆå¼€å§‹å»ºç«‹å¿ƒæ™ºæ¨¡å‹"/> <meta itemprop="keywords" content="Rust,æ“ä½œç³»ç»Ÿ,ç®—æ³•"/> <meta itemprop="datePublished" content="2026-01-23T16:35:12.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="mCell"/> <meta itemprop="url" content="https://juejin.cn/user/2280829967146779"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Rust æ‰€æœ‰æƒä¸å€Ÿç”¨ï¼šä»å †æ ˆå¼€å§‹å»ºç«‹å¿ƒæ™ºæ¨¡å‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2280829967146779/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    mCell
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-23T16:35:12.000Z" title="Fri Jan 23 2026 16:35:12 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d279a104a97b4f27a8f51be3a9130eb1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbUNlbGw=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769790912&amp;x-signature=1v9tDnYY4FHiLCc%2FqXV9XprTgGU%3D" alt="202603" loading="lazy"/></p>
<blockquote>
<p>æœ¬æ–‡å†™ä½œæ—¶ï¼Œæå¤§çš„å€Ÿé‰´äº†<a href="https://link.juejin.cn?target=https%3A%2F%2Fcourse.rs%2Fbasic%2Fownership%2Fownership.html" target="_blank" title="https://course.rs/basic/ownership/ownership.html" ref="nofollow noopener noreferrer">ã€ŠThe Rust Programming Languageã€‹</a>ï¼ˆä¿—ç§°â€œRust åœ£ç»â€ï¼‰ä¸­ç›¸å…³ç« èŠ‚çš„å†…å®¹å’Œç»“æ„ï¼Œåœ¨æ­¤è¡¨ç¤ºæ„Ÿè°¢ã€‚</p>
</blockquote>
<p>å†™ Rust çš„ç¬¬ä¸€é“åï¼Œä¸æ˜¯è¯­æ³•ï¼Œä¹Ÿä¸æ˜¯å®ï¼Œè€Œæ˜¯â€œæˆ‘æ˜æ˜åªæ˜¯æŠŠå˜é‡ä¼ ç»™ä½ ç”¨ä¸€ä¸‹ï¼Œæ€ä¹ˆå®ƒå°±ä¸å±äºæˆ‘äº†ï¼Ÿâ€</p>
<p>è¿™ç±»å›°æƒ‘é€šå¸¸å¹¶ä¸å¥‡æ€ªï¼Œå› ä¸ºæˆ‘ä»¬ä¹ æƒ¯äº†åˆ«çš„è¯­è¨€é‚£å¥—â€œå†…å­˜é»˜è®¤æœ‰äººå…œåº•â€çš„æ¨¡å‹ï¼Œæ¯”å¦‚ Javascriptã€Golang çš„è‡ªåŠ¨åƒåœ¾å›æ”¶æœºåˆ¶ã€‚Rust æ°æ°ç›¸åï¼šå®ƒè¦æ±‚ä½ æŠŠå†…å­˜è¿™ä»¶äº‹æƒ³æ¸…æ¥šï¼Œç„¶åæŠŠè§„åˆ™å†™è¿›ç±»å‹ç³»ç»Ÿï¼Œäº¤ç»™ç¼–è¯‘å™¨åœ¨<strong>ç¼–è¯‘æœŸ</strong>å¼ºåˆ¶æ‰§è¡Œâ€”â€”è¿™å°±æ˜¯æ‰€æœ‰æƒç³»ç»Ÿçš„æ ¸å¿ƒæ„ä¹‰ã€‚</p>
<p>ä¸ºäº†å°½é‡è®²æ¸…æ¥šï¼Œæœ¬æ–‡æŒ‰ä¸€æ¡çº¿å¾€å‰èµ°ï¼šå…ˆè®²å †æ ˆï¼Œå†è®²æ‰€æœ‰æƒï¼Œå†è®²å€Ÿç”¨ã€‚</p>
<h2 data-id="heading-0">å†…å­˜ç®¡ç†è¿™ä»¶äº‹ï¼Œè¯­è¨€å¤§è‡´åˆ†ä¸‰æ´¾</h2>
<p>æ‰€æœ‰ç¨‹åºéƒ½è¦ç”¨å†…å­˜ï¼šç”³è¯·ç©ºé—´ã€ä½¿ç”¨ã€é‡Šæ”¾ã€‚éº»çƒ¦åœ¨äºâ€œä»€ä¹ˆæ—¶å€™é‡Šæ”¾ã€è°æ¥é‡Šæ”¾â€ã€‚å†å²ä¸Šä¸»æµè¯­è¨€å¤§è‡´èµ°è¿‡ä¸‰æ¡è·¯ï¼š</p>
<ol>
<li><strong>GC</strong>ï¼šè¿è¡Œæ—¶æ‰¾å‡ºä¸å†ä½¿ç”¨çš„å†…å­˜å¹¶å›æ”¶ï¼ˆJavascriptã€Golangï¼‰ã€‚</li>
<li><strong>æ‰‹åŠ¨ç®¡ç†</strong>ï¼šç¨‹åºå‘˜æ˜¾å¼åˆ†é…/é‡Šæ”¾ï¼ˆC/C++ï¼‰ã€‚</li>
<li><strong>æ‰€æœ‰æƒ</strong>ï¼šç¼–è¯‘æœŸæŒ‰è§„åˆ™æ£€æŸ¥ï¼Œè¿è¡ŒæœŸä¸é¢å¤–ä»˜è´¹ï¼ˆRustï¼‰ã€‚</li>
</ol>
<p>Rust é€‰æ‹©ç¬¬ä¸‰æ¡è·¯çš„â€œé‡å¿ƒâ€å¾ˆæ˜ç¡®ï¼šæ—¢æƒ³è¦æ¥è¿‘ C/C++ çš„æ€§èƒ½ï¼Œåˆæƒ³æŠŠæ‚¬ç©ºæŒ‡é’ˆã€äºŒæ¬¡é‡Šæ”¾ã€æ•°æ®ç«äº‰è¿™ç±»å†…å­˜å®‰å…¨é—®é¢˜ï¼Œå°½é‡æå‰åˆ°ç¼–è¯‘é˜¶æ®µè§£å†³ã€‚</p>
<h2 data-id="heading-1">å…ˆæŠŠåœ°åŸºæ‰“ç‰¢ï¼šæ ˆï¼ˆStackï¼‰ä¸å †ï¼ˆHeapï¼‰</h2>
<p>å¦‚æœä½ åªå†™è„šæœ¬è¯­è¨€ï¼Œå¯èƒ½ä¸€è¾ˆå­ä¸å¿…æ·±ç©¶å †æ ˆã€‚ä½†åœ¨ Rust é‡Œï¼Œç†è§£å †æ ˆä¼šç›´æ¥å†³å®šä½ æ˜¯å¦çœ‹å¾—æ‡‚â€œç§»åŠ¨/å€Ÿç”¨â€çš„è¡Œä¸ºã€‚</p>
<h3 data-id="heading-2">æ ˆï¼šåè¿›å…ˆå‡ºï¼Œå¤§å°å¿…é¡»å›ºå®š</h3>
<p>æ ˆåƒä¸€å ç›˜å­ï¼šåªèƒ½ä»é¡¶éƒ¨æ”¾ã€ä»é¡¶éƒ¨æ‹¿ï¼Œåè¿›å…ˆå‡ºã€‚å…¥æ ˆ/å‡ºæ ˆéå¸¸å¿«ï¼Œä½†å‰ææ˜¯ï¼š<strong>æ¯ä¸ªå€¼çš„å¤§å°åœ¨ç¼–è¯‘æœŸå¿…é¡»å·²çŸ¥ä¸”å›ºå®š</strong>ï¼Œå¦åˆ™ä½ æ— æ³•â€œç²¾ç¡®åœ°å¼¹å‡ºâ€ä½ æƒ³è¦çš„é‚£å—æ•°æ®ã€‚</p>
<p>ä½ å¯ä»¥æŠŠä¸€æ¬¡å‡½æ•°è°ƒç”¨æƒ³æˆï¼š</p>
<ul>
<li>å‚æ•°ã€å±€éƒ¨å˜é‡ä¾æ¬¡å‹æ ˆ</li>
<li>å‡½æ•°ç»“æŸæŒ‰ç›¸åé¡ºåºå‡ºæ ˆ</li>
<li>å‡ºæ ˆå°±æ„å‘³ç€é‚£æ®µæ ˆå†…å­˜å¯ä»¥è¢«å¤ç”¨ï¼ˆæ‰€ä»¥â€œæ‹¿ç€æ ˆä¸Šå±€éƒ¨å˜é‡çš„åœ°å€å›å»â€å¾ˆå±é™©ï¼‰</li>
</ul>
<h3 data-id="heading-3">å †ï¼šå­˜æ”¾å¤§å°å¯å˜çš„æ•°æ®ï¼Œç”¨æŒ‡é’ˆå»æ‰¾å®ƒ</h3>
<p>å †é€‚åˆâ€œå¤§å°æœªçŸ¥æˆ–å¯èƒ½å˜åŒ–â€çš„æ•°æ®ã€‚åˆ†é…æ—¶ï¼Œæ“ä½œç³»ç»Ÿæ‰¾ä¸€å—è¶³å¤Ÿå¤§çš„ç©ºä½ï¼Œæ ‡è®°å·²ä½¿ç”¨ï¼Œå¹¶è¿”å›è¯¥ä½ç½®çš„<strong>æŒ‡é’ˆ</strong>ã€‚è¿™ä¸ªè¿‡ç¨‹å«åœ¨å †ä¸Šåˆ†é…å†…å­˜ï¼ˆallocatingï¼‰ã€‚</p>
<p>å…³é”®ç»†èŠ‚æ˜¯ï¼š
<strong>å †ä¸Šçš„æ•°æ®æœ¬ä½“ä¸åœ¨æ ˆé‡Œï¼Œä½†æŒ‡å‘å®ƒçš„æŒ‡é’ˆé€šå¸¸åœ¨æ ˆé‡Œ</strong>ï¼ˆå› ä¸ºæŒ‡é’ˆå¤§å°å›ºå®šï¼‰ã€‚ä½ ä¹‹åæ¯æ¬¡è®¿é—®å †æ•°æ®ï¼Œéƒ½æ˜¯é€šè¿‡æ ˆä¸Šçš„æŒ‡é’ˆå»â€œå¯¼èˆªâ€åˆ°å †ä¸Šã€‚</p>
<h3 data-id="heading-4">ä¸ºä»€ä¹ˆå †æ›´éº»çƒ¦</h3>
<p>æ ˆæ˜¯â€œè‡ªåŠ¨ç®¡ç†â€çš„ï¼šä½œç”¨åŸŸç»“æŸå°±å‡ºæ ˆï¼›
å †æ˜¯â€œæ•£è£…çš„â€ï¼šä¸è·Ÿç€æŸä¸ªä½œç”¨åŸŸè‡ªåŠ¨æ¶ˆå¤±ï¼Œå¦‚æœä½ ä¸è¿½è¸ªå®ƒä½•æ—¶é‡Šæ”¾ï¼Œå°±å¯èƒ½å†…å­˜æ³„æ¼ã€‚Rust çš„æ‰€æœ‰æƒç³»ç»Ÿï¼Œæœ¬è´¨ä¸Šå°±æ˜¯æŠŠâ€œå †ä¸Šèµ„æºçš„é‡Šæ”¾è´£ä»»â€ç”¨è§„åˆ™å›ºå®šä¸‹æ¥ã€‚</p>
<h2 data-id="heading-5">æ‰€æœ‰æƒä¸‰æ¡è§„åˆ™ï¼šæŠŠâ€œé‡Šæ”¾è´£ä»»â€å†™æ­»</h2>
<p>Rust çš„æ‰€æœ‰æƒè§„åˆ™å¯ä»¥èƒŒä¸‹æ¥ï¼ˆå…ˆåˆ«æ€¥ç€ç†è§£ï¼Œåé¢ä¼šç”¨ä¾‹å­æŠŠå®ƒç£¨æ¸…æ¥šï¼‰ï¼š</p>
<ol>
<li>Rust ä¸­æ¯ä¸ªå€¼éƒ½æœ‰ä¸€ä¸ªå˜é‡ä½œä¸ºå®ƒçš„<strong>æ‰€æœ‰è€…</strong></li>
<li>åŒä¸€æ—¶åˆ»ä¸€ä¸ªå€¼åªèƒ½æœ‰ä¸€ä¸ªæ‰€æœ‰è€…</li>
<li>æ‰€æœ‰è€…ç¦»å¼€ä½œç”¨åŸŸæ—¶ï¼Œè¿™ä¸ªå€¼ä¼šè¢«ä¸¢å¼ƒï¼ˆdropï¼‰</li>
</ol>
<p>æ³¨æ„ç¬¬ä¸‰æ¡ï¼šâ€œdropâ€ä¸æ˜¯æŠ½è±¡æ¦‚å¿µï¼Œå®ƒå°±æ˜¯â€œé‡Šæ”¾èµ„æºâ€çš„é‚£ä¸ªåŠ¨ä½œâ€”â€”å¯¹æ ˆä¸Šç®€å•å€¼æ²¡ä»€ä¹ˆç‰¹åˆ«ï¼Œå¯¹å †ä¸Šæ•°æ®å°±éå¸¸å…³é”®ï¼Œå› ä¸ºå®ƒå†³å®šäº†å †å†…å­˜ä½•æ—¶é‡Šæ”¾ã€‚</p>
<h2 data-id="heading-6">ä¸€ä¸ªæœ€å¸¸è§çš„è¯¯ä¼šï¼š<code>String</code> èµ‹å€¼ä¸ºä»€ä¹ˆä¼šè®©æ—§å˜é‡å¤±æ•ˆï¼Ÿ</h2>
<p>æ¥çœ‹ä¸¤æ®µå¯¹æ¯”ä»£ç ã€‚</p>
<h3 data-id="heading-7"><code>i32</code> è¿™ç§ç®€å•ç±»å‹ï¼šå¤åˆ¶ï¼ˆCopyï¼‰å°±å®Œäº‹äº†</h3>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">x</span> = <span class="hljs-number">5</span>;
<span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">y</span> = x;
<span class="hljs-built_in">println!</span>(<span class="hljs-string">"x = {}, y = {}"</span>, x, y); <span class="hljs-comment">// x ä»ç„¶å¯ç”¨</span>
</code></pre>
<p>æ•´æ•°æ˜¯å›ºå®šå¤§å°çš„ç®€å•å€¼ï¼Œæ”¾åœ¨æ ˆä¸Šï¼Œâ€œå¤åˆ¶ 4 ä¸ªå­—èŠ‚â€éå¸¸å¿«ï¼Œæ‰€ä»¥ Rust ç›´æ¥åšæ‹·è´ï¼Œ<code>x</code> ä¸ä¼šå¤±æ•ˆã€‚</p>
<h3 data-id="heading-8"><code>String</code>ï¼šèƒŒåæœ‰å †å†…å­˜ï¼Œä¸èƒ½éšä¾¿â€œé»˜è®¤å¤åˆ¶â€</h3>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">s1</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">"hello"</span>);
<span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">s2</span> = s1;
<span class="hljs-built_in">println!</span>(<span class="hljs-string">"s1 = {}, s2 = {}"</span>, s1, s2); <span class="hljs-comment">// ç¼–è¯‘æŠ¥é”™ï¼Œs1 å¤±æ•ˆ</span>
</code></pre>
<p><code>String</code> æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªâ€œå¥æŸ„â€ï¼š<strong>æ ˆä¸Š</strong>å­˜ç€ï¼ˆå †æŒ‡é’ˆã€é•¿åº¦ã€å®¹é‡ï¼‰ï¼ŒçœŸæ­£çš„å­—ç¬¦æ•°æ®åœ¨<strong>å †ä¸Š</strong>ã€‚</p>
<p>è¿™æ—¶å¦‚æœå…è®¸ <code>s1</code>ã€<code>s2</code> åŒæ—¶æŒ‡å‘åŒä¸€å—å †å†…å­˜ï¼Œå°±ä¼šæ’ä¸Šæ‰€æœ‰æƒç¬¬äºŒæ¡ï¼šä¸€ä¸ªå€¼åªèƒ½æœ‰ä¸€ä¸ªæ‰€æœ‰è€…ã€‚æ›´ç°å®çš„é—®é¢˜æ˜¯ï¼šä½œç”¨åŸŸç»“æŸæ—¶ï¼Œè°æ¥ dropï¼Ÿå¦‚æœä¸¤ä¸ªéƒ½ dropï¼Œå°±å¯èƒ½äºŒæ¬¡é‡Šæ”¾ã€‚Rust ä¸èµŒè¿æ°”ï¼Œå®ƒé€‰æ‹©åœ¨èµ‹å€¼æ—¶æŠŠæ‰€æœ‰æƒè½¬ç§»ç»™æ–°å˜é‡ï¼Œè®©æ—§å˜é‡ç«‹åˆ»å¤±æ•ˆï¼Œä»æ ¹ä¸Šåˆ‡æ–­è¿™ç±»é—®é¢˜ã€‚</p>
<p>ç¼–è¯‘å™¨çš„æŠ¥é”™ä¹Ÿä¼šç›´æ¥å‘Šè¯‰ä½ ï¼š<code>String</code> æ²¡å®ç° <code>Copy</code>ï¼Œå› æ­¤å‘ç”Ÿäº† moveï¼Œä¹‹åå†ç”¨æ—§å˜é‡å°±ä¸è¡Œã€‚</p>
<h2 data-id="heading-9">Move / Clone / Copyï¼šä¸‰ä¸ªè¯ï¼Œä¸‰ç§æˆæœ¬</h2>
<p>æŠŠè¿™ä¸‰è€…åˆ†æ¸…ï¼Œæ‰€æœ‰æƒå°±é€šäº†å…«æˆã€‚</p>
<h3 data-id="heading-10">Moveï¼šè½¬ç§»â€œé‡Šæ”¾è´£ä»»â€ï¼Œé€šå¸¸ä¸å¤åˆ¶å †æ•°æ®</h3>
<p>å¯¹ <code>String</code> è¿™ç§æ‹¥æœ‰å †èµ„æºçš„ç±»å‹ï¼Œ<code>let s2 = s1;</code> çš„æ ¸å¿ƒä¸æ˜¯â€œå¤åˆ¶å†…å®¹â€ï¼Œè€Œæ˜¯â€œæŠŠé‡Šæ”¾è´£ä»»äº¤ç»™ s2â€ã€‚è¿™æ ·æ€§èƒ½å¾ˆå¥½ï¼Œå› ä¸ºä½ æ²¡æœ‰åšæ·±æ‹·è´ã€‚</p>
<h3 data-id="heading-11">Cloneï¼šæ·±æ‹·è´ï¼Œå¤åˆ¶å †ä¸Šå†…å®¹ï¼ˆè´µï¼‰</h3>
<p>å¦‚æœä½ ç¡®å®éœ€è¦ä¸¤ä»½ç‹¬ç«‹çš„æ•°æ®ï¼Œç”¨ <code>clone()</code>ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">s1</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">"hello"</span>);
<span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">s2</span> = s1.<span class="hljs-title function_ invoke__">clone</span>();
<span class="hljs-built_in">println!</span>(<span class="hljs-string">"s1 = {}, s2 = {}"</span>, s1, s2);
</code></pre>
<p>Rust ä¸ä¼šè‡ªåŠ¨æ·±æ‹·è´ï¼›ä½ æ˜¾å¼ <code>clone</code>ï¼Œå°±ç­‰äºæ˜¾å¼é€‰æ‹©äº†æ›´é«˜æˆæœ¬ã€‚å®˜æ–¹ä¹Ÿæé†’ï¼šçƒ­ç‚¹è·¯å¾„ä¸Šæ»¥ç”¨ clone ä¼šæ˜¾è‘—æ‹–æ…¢æ€§èƒ½ã€‚</p>
<h3 data-id="heading-12">Copyï¼šå¯¹æ ˆä¸Šå›ºå®šå¤§å°ç±»å‹ï¼Œèµ‹å€¼å°±æ˜¯å¤åˆ¶</h3>
<p>Rust æœ‰ä¸ª <code>Copy</code> ç‰¹å¾ï¼šå®ç°äº†å®ƒçš„ç±»å‹ï¼Œåœ¨èµ‹å€¼/ä¼ å‚æ—¶ä¼šå‘ç”Ÿæ‹·è´ï¼Œæ—§å˜é‡ä»å¯ç”¨ã€‚å¤§ä½“è§„åˆ™æ˜¯ï¼šä¸éœ€è¦åˆ†é…å†…å­˜ã€æ²¡æœ‰â€œé‡Šæ”¾èµ„æºâ€è´Ÿæ‹…çš„ç±»å‹å¾€å¾€å¯ Copyï¼Œæ¯”å¦‚æ•´æ•°ã€boolã€æµ®ç‚¹ã€charã€åªåŒ…å« Copy æˆå‘˜çš„å…ƒç»„ã€ä¸å¯å˜å¼•ç”¨ <code>&amp;T</code> ç­‰ã€‚</p>
<p>è¿™é‡Œé¡ºä¾¿ç‚¹ä¸€ä¸‹ï¼š<strong>å¯å˜å¼•ç”¨ <code>&amp;mut T</code> ä¸èƒ½ Copy</strong>ï¼Œå› ä¸ºâ€œåˆ°å¤„å¤åˆ¶å¯å†™é’¥åŒ™â€ä¼šç›´æ¥ç ´ååé¢çš„å€Ÿç”¨å®‰å…¨è§„åˆ™ã€‚</p>
<h2 data-id="heading-13">å‡½æ•°è°ƒç”¨ï¼šä¼ å‚å’Œè¿”å›å€¼åŒæ ·ä¼šè§¦å‘ Move/Copy</h2>
<p>å¾ˆå¤šäººç¬¬ä¸€æ¬¡â€œè¢« Rust æ•™è‚²â€ï¼Œå°±æ˜¯åœ¨å‡½æ•°å‚æ•°è¿™é‡Œã€‚</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">takes_ownership</span>(some_string: <span class="hljs-type">String</span>) { <span class="hljs-comment">/* ... */</span> }
<span class="hljs-keyword">fn</span> <span class="hljs-title function_">makes_copy</span>(some_integer: <span class="hljs-type">i32</span>) { <span class="hljs-comment">/* ... */</span> }

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">s</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">"hello"</span>);
    <span class="hljs-title function_ invoke__">takes_ownership</span>(s); <span class="hljs-comment">// moveï¼Œs å¤±æ•ˆ</span>

    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">x</span> = <span class="hljs-number">5</span>;
    <span class="hljs-title function_ invoke__">makes_copy</span>(x); <span class="hljs-comment">// copyï¼Œx ä»ç„¶å¯ç”¨</span>
}
</code></pre>
<p><code>String</code> ä¼ å…¥å‡½æ•°åï¼Œæ‰€æœ‰æƒç§»åŠ¨åˆ°å½¢å‚ï¼›å‡½æ•°ç»“æŸå½¢å‚ç¦»å¼€ä½œç”¨åŸŸï¼Œè§¦å‘ dropï¼Œå †å†…å­˜è¢«é‡Šæ”¾ã€‚<code>i32</code> å› ä¸º Copyï¼Œä¸å½±å“å¤–é¢çš„ <code>x</code>ã€‚</p>
<p>å‡½æ•°è¿”å›å€¼ä¹Ÿä¸€æ ·å¸¦ç€æ‰€æœ‰æƒï¼šè°æ¥ä½ï¼Œè°å°±æˆä¸ºæ–°æ‰€æœ‰è€…ã€‚</p>
<p>åˆ°è¿™é‡Œä½ ä¼šå‘ç°ï¼šå¦‚æœæ¯æ¬¡åªæ˜¯â€œå€Ÿæ¥ç”¨ä¸€ä¸‹â€ï¼Œå´å¿…é¡» move è¿›å»ã€å† move å‡ºæ¥ï¼Œä»£ç ä¼šå¾ˆå•°å—¦ã€‚è¿™æ­£æ˜¯ä¸‹ä¸€ç« ï¼š<strong>å€Ÿç”¨</strong> è¦è§£å†³çš„é—®é¢˜ã€‚</p>
<h2 data-id="heading-14">å€Ÿç”¨ï¼šæˆ‘åªæƒ³ç”¨ä½ çš„æ•°æ®ï¼Œä½†ä¸æƒ³æ‹¿èµ°å®ƒ</h2>
<p>å€Ÿç”¨ï¼ˆborrowingï¼‰å°±æ˜¯ï¼š<strong>åˆ›å»ºå¼•ç”¨ï¼Œç”¨å¼•ç”¨è®¿é—®æ•°æ®ï¼Œä½†ä¸å¤ºèµ°æ‰€æœ‰æƒ</strong>ã€‚ç°å®æ¯”å–»å¾ˆç›´ç™½ï¼šåˆ«äººæ‹¥æœ‰æŸæ ·ä¸œè¥¿ï¼Œä½ å¯ä»¥å€Ÿæ¥ç”¨ï¼Œç”¨å®Œè¦è¿˜ã€‚</p>
<h2 data-id="heading-15">ä¸å¯å˜å¼•ç”¨ï¼šåªè¯»å€Ÿé˜…ï¼Œä¸æ”¹å†…å®¹</h2>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">calculate_length</span>(s: &amp;<span class="hljs-type">String</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">usize</span> {
    s.<span class="hljs-title function_ invoke__">len</span>()
}

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">s1</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">"hello"</span>);
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">len</span> = <span class="hljs-title function_ invoke__">calculate_length</span>(&amp;s1);
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"{} {}"</span>, s1, len); <span class="hljs-comment">// s1 ä»ç„¶å¯ç”¨</span>
}
</code></pre>
<p>è¿™é‡Œå‘ç”Ÿäº†ä¸¤ä»¶é‡è¦çš„äº‹ï¼š</p>
<ol>
<li>å‚æ•°ç±»å‹ä» <code>String</code> å˜æˆ <code>&amp;String</code>ï¼Œæ‰€ä»¥ä¸ä¼š move æ‰€æœ‰æƒ</li>
<li>å¼•ç”¨ç¦»å¼€ä½œç”¨åŸŸæ—¶ï¼Œä¸ä¼š drop å…¶æŒ‡å‘çš„å€¼ï¼Œå› ä¸ºå¼•ç”¨ä¸æ˜¯æ‰€æœ‰è€…</li>
</ol>
<p>ä½ å¯ä»¥æŠŠ <code>&amp;String</code> æƒ³æˆâ€œåªè¯»é—¨ç¦å¡â€ï¼šèƒ½è¿›é—¨çœ‹æˆ¿é—´ï¼ˆè®¿é—®æ•°æ®ï¼‰ï¼Œä½†ä¸èƒ½è£…ä¿®ï¼ˆä¿®æ”¹æ•°æ®ï¼‰ï¼Œä¹Ÿä¸èƒ½å†³å®šæ‹†æˆ¿ï¼ˆé‡Šæ”¾å†…å­˜ï¼‰ã€‚</p>
<h2 data-id="heading-16">å¯å˜å¼•ç”¨ï¼šå¯ä»¥ä¿®æ”¹ï¼Œä½†â€œåŒä¸€æ—¶åˆ»åªèƒ½æœ‰ä¸€æŠŠå¯å†™é’¥åŒ™â€</h2>
<p>å¦‚æœä½ æƒ³é€šè¿‡å€Ÿç”¨å»ä¿®æ”¹æ•°æ®ï¼Œéœ€è¦ <code>&amp;mut</code>ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">change</span>(s: &amp;<span class="hljs-keyword">mut</span> <span class="hljs-type">String</span>) {
    s.<span class="hljs-title function_ invoke__">push_str</span>(<span class="hljs-string">", world"</span>);
}

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">s</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">"hello"</span>);
    <span class="hljs-title function_ invoke__">change</span>(&amp;<span class="hljs-keyword">mut</span> s);
}
</code></pre>
<p>å…³é”®é™åˆ¶æ¥äº†ï¼š<strong>åŒä¸€ä½œç”¨åŸŸå†…ï¼Œç‰¹å®šæ•°æ®åªèƒ½å­˜åœ¨ä¸€ä¸ªå¯å˜å¼•ç”¨</strong>ã€‚å¦åˆ™ç¼–è¯‘æŠ¥é”™ã€‚</p>
<p>è¿™æ¡é™åˆ¶ä¸æ˜¯ä¸ºäº†æŠ˜ç£¨äººï¼Œè€Œæ˜¯ä¸ºäº†åœ¨ç¼–è¯‘æœŸæ¶ˆç­â€œæ•°æ®ç«äº‰â€çš„ç»å…¸æˆå› ï¼š</p>
<ul>
<li>å¤šä¸ªæŒ‡é’ˆåŒæ—¶è®¿é—®åŒä¸€æ•°æ®</li>
<li>è‡³å°‘ä¸€ä¸ªåœ¨å†™</li>
<li>æ²¡æœ‰åŒæ­¥æœºåˆ¶
è¿™ä¸‰æ¡å‡‘é½ï¼Œå°±å¯èƒ½å‡ºç°æœªå®šä¹‰è¡Œä¸ºã€‚Rust é€‰æ‹©ç›´æ¥ä¸è®©è¿™ç§ä»£ç é€šè¿‡ç¼–è¯‘ã€‚</li>
</ul>
<p>ä¸€ä¸ªå¾ˆå®ç”¨çš„å°æŠ€å·§æ˜¯ï¼šç”¨ <code>{}</code> ç¼©å°å€Ÿç”¨ä½œç”¨åŸŸï¼Œè®©å‰ä¸€ä¸ªå¯å˜å€Ÿç”¨å°½æ—©ç»“æŸï¼Œå†åˆ›å»ºä¸‹ä¸€ä¸ªã€‚</p>
<h2 data-id="heading-17">å¯å˜ä¸ä¸å¯å˜ä¸èƒ½æ··ç”¨ï¼šè¯»è€…ä¸å¸Œæœ›ä¹¦è¢«å½“åœºæ”¹å†™</h2>
<p>å€Ÿç”¨è¿˜æœ‰ä¸€æ¡æ€»è§„åˆ™ï¼ˆä¹Ÿæ˜¯ä½ æœªæ¥æœ€å¸¸ç”¨çš„å¿ƒæ³•ï¼‰ï¼š</p>
<ul>
<li>åŒä¸€æ—¶åˆ»ï¼šè¦ä¹ˆ<strong>ä¸€ä¸ªå¯å˜å¼•ç”¨</strong>ï¼Œè¦ä¹ˆ<strong>ä»»æ„å¤šä¸ªä¸å¯å˜å¼•ç”¨</strong></li>
<li>å¼•ç”¨å¿…é¡»æ€»æ˜¯æœ‰æ•ˆçš„</li>
</ul>
<p>ç›´è§‰è§£é‡Šï¼šå¤šä¸ªåªè¯»åŒæ—¶å­˜åœ¨æ²¡é—®é¢˜ï¼Œå› ä¸ºå¤§å®¶éƒ½ä¸å†™ï¼›ä½†åªè¦æœ‰äººå†™ï¼Œå°±å¿…é¡»ä¿è¯â€œå†™çš„æ—¶å€™æ²¡äººè¯»ã€æ²¡äººä¹Ÿåœ¨å†™â€ï¼Œå¦åˆ™ä½ è¯»åˆ°çš„å¯èƒ½æ˜¯åŠæ›´æ–°çŠ¶æ€çš„æ•°æ®ã€‚</p>
<h2 data-id="heading-18">ä½ ä»¥ä¸ºå¼•ç”¨çš„ä½œç”¨åŸŸè·Ÿ <code>{}</code> ä¸€æ ·ï¼ŸRust è¿˜åšäº† NLL ä¼˜åŒ–</h2>
<p>å¾ˆå¤šâ€œçœ‹èµ·æ¥åº”è¯¥èƒ½è¿‡â€çš„ä»£ç ï¼Œå¡åœ¨å€Ÿç”¨æ£€æŸ¥ä¸Šï¼ŒåŸå› å¾€å¾€æ˜¯ï¼šä½ æŠŠå¼•ç”¨çš„æœ‰æ•ˆæœŸæƒ³æˆäº†â€œåˆ°èŠ±æ‹¬å·ç»“æŸâ€ï¼Œä½† Rust æ–°ç¼–è¯‘å™¨ä¼šæ›´èªæ˜ï¼šå¼•ç”¨çš„æœ‰æ•ˆæœŸæŒç»­åˆ°<strong>æœ€åä¸€æ¬¡ä½¿ç”¨</strong>ã€‚</p>
<p>è¿™ç§ä¼˜åŒ–å« <strong>Non-Lexical Lifetimesï¼ˆNLLï¼‰</strong>ã€‚å®ƒè®©å¾ˆå¤šè¿‡å»éœ€è¦â€œæ‰‹åŠ¨æ”¹ç»“æ„â€çš„ä»£ç ï¼Œç°åœ¨å¯ä»¥è‡ªç„¶é€šè¿‡ã€‚</p>
<h2 data-id="heading-19">æ‚¬å‚å¼•ç”¨ï¼šRust åœ¨ç¼–è¯‘æœŸå°±æŠŠâ€œæ‹¿ç€ç©ºæ°”åœ°å€â€è¿™äº‹å µæ­»</h2>
<p>æ‚¬å‚å¼•ç”¨ï¼ˆDangling Referenceï¼‰å°±æ˜¯ï¼šæŒ‡é’ˆè¿˜åœ¨ï¼Œä½†å®ƒæŒ‡å‘çš„å€¼å·²ç»è¢«é‡Šæ”¾æˆ–è¢«é‡ç”¨ã€‚å¾ˆå¤šè¯­è¨€é‡Œè¿™æ˜¯è¿è¡Œæ—¶ç‚¸å¼¹ï¼›Rust çš„ç›®æ ‡æ˜¯è®©å®ƒå˜æˆç¼–è¯‘æ—¶é”™è¯¯ã€‚</p>
<p>ç»å…¸é”™è¯¯ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">dangle</span>() <span class="hljs-punctuation">-&gt;</span> &amp;<span class="hljs-type">String</span> {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">s</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">"hello"</span>);
    &amp;s
} <span class="hljs-comment">// s ç¦»å¼€ä½œç”¨åŸŸè¢«é‡Šæ”¾</span>
</code></pre>
<p>å‡½æ•°è¿”å›äº† <code>s</code> çš„å¼•ç”¨ï¼Œä½† <code>s</code> åœ¨å‡½æ•°ç»“æŸæ—¶å°±è¢« drop äº†ï¼Œå¼•ç”¨å°†æŒ‡å‘æ— æ•ˆå†…å­˜ã€‚Rust ä¼šç›´æ¥æ‹’ç»ç¼–è¯‘ï¼Œå¹¶æç¤ºï¼šè¿”å›ç±»å‹åŒ…å«å€Ÿç”¨å€¼ï¼Œä½†æ‰¾ä¸åˆ°å¯å€Ÿç”¨çš„æ¥æºã€‚</p>
<p>è§£å†³æ–¹å¼å¾€å¾€å¾ˆâ€œRustâ€ï¼š<strong>ç›´æ¥è¿”å›æ‹¥æœ‰æ‰€æœ‰æƒçš„å€¼</strong>ï¼Œè®©æ‰€æœ‰æƒç§»åŠ¨ç»™è°ƒç”¨è€…ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">no_dangle</span>() <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span> {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">s</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">"hello"</span>);
    s
}
</code></pre>
<p>è¿™æ®µå°±æ²¡æœ‰æ‚¬å‚å¼•ç”¨é£é™©äº†ã€‚</p>
<h2 data-id="heading-20">æŠŠå®ƒä»¬ä¸²èµ·æ¥ï¼šä¸€ä¸ªå®ç”¨çš„å¿ƒæ™ºæ¨¡å‹</h2>
<p>åˆ°è¿™é‡Œï¼Œä½ å¯ä»¥ç”¨ä¸€å¥è¯æŠŠæ‰€æœ‰æƒç³»ç»Ÿè®°ä½ï¼š</p>
<blockquote>
<p>Rust ç”¨â€œå”¯ä¸€æ‰€æœ‰è€… + å€Ÿç”¨è§„åˆ™â€æ¥ç®¡ç†å †ä¸Šèµ„æºçš„é‡Šæ”¾è´£ä»»ï¼Œå¹¶åœ¨ç¼–è¯‘æœŸé˜»æ­¢åˆ«åå†™å…¥ã€æ‚¬å‚å¼•ç”¨å’Œæ•°æ®ç«äº‰ã€‚</p>
</blockquote>
<p>å†æŠŠå®ƒæ˜ å°„åˆ°å †æ ˆï¼š</p>
<ul>
<li>æ ˆä¸Šç®€å•å€¼ï¼ˆå›ºå®šå¤§å°ï¼‰å¤§å¤š Copyï¼šå¤åˆ¶æˆæœ¬å°ï¼Œæ²¡é‡Šæ”¾è´Ÿæ‹…</li>
<li>å †ä¸Šèµ„æºï¼ˆ<code>String</code>ã€<code>Vec</code> ç­‰ï¼‰é»˜è®¤ Moveï¼šè½¬ç§»é‡Šæ”¾è´£ä»»ï¼Œé¿å…äºŒæ¬¡é‡Šæ”¾</li>
<li>å€Ÿç”¨ï¼ˆå¼•ç”¨ï¼‰è®©ä½ â€œä¸æ‹¿èµ°æ‰€æœ‰æƒä¹Ÿèƒ½ç”¨â€ï¼šä½†è¯»å†™åˆ«åå¿…é¡»è¢«è§„åˆ™çº¦æŸï¼Œå¦åˆ™å°±å›åˆ° C çš„ä¸å®‰å…¨ä¸–ç•Œ</li>
</ul>
<p>ä½ ä¼šé€æ¸å‘ç°ï¼šRust ä¸æ˜¯â€œé™åˆ¶å¤šâ€ï¼Œè€Œæ˜¯æŠŠè¿‡å»è¿è¡Œæ—¶æ‰çˆ†ç‚¸çš„é—®é¢˜ï¼Œæå‰åˆ°ä½ å†™ä»£ç çš„é‚£ä¸€åˆ»å°±æŒ‡å‡ºæ¥ã€‚å®ƒè®©ä½ æ…¢ä¸€ç‚¹å†™å¯¹ï¼Œä½†å¿«å¾ˆå¤šç»´æŠ¤ã€‚</p>
<h2 data-id="heading-21">å€Ÿç”¨è§„åˆ™é€Ÿè®°å¡</h2>
<ul>
<li>å€¼çš„æ‰€æœ‰è€…ç¦»å¼€ä½œç”¨åŸŸå°± dropï¼ˆå¯¹å †èµ„æºå°¤å…¶å…³é”®ï¼‰</li>
<li><code>String</code> è¿™ç±»æ‹¥æœ‰å †èµ„æºçš„ç±»å‹ï¼Œèµ‹å€¼/ä¼ å‚é»˜è®¤ moveï¼ˆæ—§å˜é‡å¤±æ•ˆï¼‰</li>
<li>éœ€è¦ä¸¤ä»½æ•°æ®å°± <code>clone()</code>ï¼Œä½†è¦æ„è¯†åˆ°å®ƒä¼šæ·±æ‹·è´ã€ä¼šè´µ</li>
<li>å€Ÿç”¨æ€»ç»“ï¼šåŒä¸€æ—¶åˆ»è¦ä¹ˆ 1 ä¸ª <code>&amp;mut</code>ï¼Œè¦ä¹ˆ N ä¸ª <code>&amp;</code>ï¼›å¼•ç”¨å¿…é¡»æœ‰æ•ˆ</li>
<li>è¿”å›å±€éƒ¨å˜é‡å¼•ç”¨ä¼šå¯¼è‡´æ‚¬å‚å¼•ç”¨é£é™©ï¼ŒRust ä¼šæ‹’ç»ç¼–è¯‘ï¼›é€šå¸¸æ”¹ä¸ºè¿”å›æ‹¥æœ‰æ‰€æœ‰æƒçš„å€¼</li>
</ul>
<p>ï¼ˆå®Œï¼‰</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[pythontutor - ä»£ç å¯è§†åŒ–æ¢ç´¢ï¼šé“¾è¡¨ã€å¼‚å¸¸ä¸æ§åˆ¶æµçš„åŠ¨æ€æ¼”ç¤º]]></title>    <link>https://juejin.cn/post/7598499504170893350</link>    <guid>https://juejin.cn/post/7598499504170893350</guid>    <pubDate>2026-01-24T08:12:21.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7598499504170893350" data-draft-id="7598818096728866854" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="pythontutor - ä»£ç å¯è§†åŒ–æ¢ç´¢ï¼šé“¾è¡¨ã€å¼‚å¸¸ä¸æ§åˆ¶æµçš„åŠ¨æ€æ¼”ç¤º"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-24T08:12:21.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="pe7er"/> <meta itemprop="url" content="https://juejin.cn/user/905653310988445"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            pythontutor - ä»£ç å¯è§†åŒ–æ¢ç´¢ï¼šé“¾è¡¨ã€å¼‚å¸¸ä¸æ§åˆ¶æµçš„åŠ¨æ€æ¼”ç¤º
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/905653310988445/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    pe7er
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-24T08:12:21.000Z" title="Sat Jan 24 2026 08:12:21 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-24
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    9
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">PythonTutor æ˜¯ä»€ä¹ˆ</h2>
<p>PythonTutor æ˜¯ä¸€ä¸ªç”¨äºå±•ç¤ºä»£ç æ‰§è¡Œè¿‡ç¨‹çš„å¯è§†åŒ–å­¦ä¹ å·¥å…·ã€‚å®ƒå…³æ³¨çš„ä¸æ˜¯ç¨‹åºæœ€ç»ˆè¾“å‡ºçš„ç»“æœï¼Œè€Œæ˜¯ä»£ç åœ¨è¿è¡Œè¿‡ç¨‹ä¸­æ¯ä¸€æ­¥æ˜¯å¦‚ä½•æ‰§è¡Œçš„ã€å˜é‡å’Œå¯¹è±¡åœ¨å†…å­˜ä¸­å¦‚ä½•å˜åŒ–ã€‚</p>
<hr/>
<h3 data-id="heading-1">PythonTutor çš„æ ¸å¿ƒä»·å€¼</h3>
<p>PythonTutor ä¼šé€è¡Œæ‰§è¡Œä»£ç ï¼Œå¹¶å®æ—¶å±•ç¤ºï¼š</p>
<ul>
<li>å½“å‰æ­£åœ¨æ‰§è¡Œçš„ä»£ç è¡Œ</li>
<li>å˜é‡åœ¨ä¸åŒé˜¶æ®µçš„å–å€¼å˜åŒ–</li>
<li>å¯¹è±¡åœ¨å†…å­˜ä¸­çš„åˆ†é…æƒ…å†µ</li>
<li>å¼•ç”¨å…³ç³»ã€æŒ‡é’ˆæŒ‡å‘å’Œè°ƒç”¨æ ˆç»“æ„</li>
</ul>
<p>è¿™ç§æ–¹å¼å¯ä»¥å¸®åŠ©å¼€å‘è€…çœŸæ­£ç†è§£ç¨‹åºçš„æ‰§è¡Œé€»è¾‘ï¼Œè€Œä¸ä»…ä»…æ˜¯â€œè·‘é€šä»£ç â€ã€‚</p>
<hr/>
<h3 data-id="heading-2">å¯è§†åŒ–å˜é‡å’Œå†…å­˜ç»“æ„</h3>
<p>åœ¨å¾ˆå¤šè¯­è¨€ä¸­ï¼Œå˜é‡æœ¬è´¨ä¸Šæ˜¯å¯¹å¯¹è±¡çš„å¼•ç”¨ã€‚ä»…é€šè¿‡æ—¥å¿—æˆ–æ‰“å°è¾“å‡ºï¼Œå¾ˆéš¾ç›´è§‚ç†è§£å¤šä¸ªå˜é‡æ˜¯å¦æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡ã€‚</p>
<p>PythonTutor ä¼šå°†è¿™äº›å…³ç³»ä»¥å›¾å½¢å½¢å¼å±•ç¤ºå‡ºæ¥ï¼Œå°¤å…¶é€‚åˆç†è§£ä»¥ä¸‹æ¦‚å¿µï¼š</p>
<ul>
<li>å¼•ç”¨ä¸å¯¹è±¡çš„å…³ç³»</li>
<li>é“¾è¡¨å’ŒæŒ‡é’ˆç»“æ„</li>
<li>å¯¹è±¡å…±äº«ä¸å‰¯ä½œç”¨</li>
<li>æ ˆä¸å †å†…å­˜çš„å˜åŒ–</li>
</ul>
<hr/>
<h3 data-id="heading-3">Java é“¾è¡¨ç¤ºä¾‹</h3>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªå®Œæ•´ã€å¯ç›´æ¥è¿è¡Œçš„ Java å•å‘é“¾è¡¨ç¤ºä¾‹ï¼Œé€‚åˆæ”¾å…¥ PythonTutor çš„ Java æ¨¡å¼ä¸­è§‚å¯ŸæŒ‡é’ˆå’Œå¯¹è±¡çš„å˜åŒ–ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2765da14261b4fabbfb1dd97a3dd4005~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgcGU3ZXI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769847968&amp;x-signature=vyg7qoH%2FTmKLIYXokTHMZz1AXeo%3D" alt="é“¾è¡¨è™šæ‹ŸåŒ–.gif" loading="lazy"/></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span>Â java.util.Objects;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LinkedListDemo</span> {

    <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Node</span> {
        <span class="hljs-type">int</span> value;
        Node next;

        Node(<span class="hljs-type">int</span> value) {
            <span class="hljs-built_in">this</span>.value = value;
        }
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">Node</span> <span class="hljs-variable">head</span> <span class="hljs-operator">=</span> buildList();
        printList(head);

        head = delete(head, <span class="hljs-number">2</span>);
        printList(head);

        System.out.println(<span class="hljs-string">"æ˜¯å¦åŒ…å« 3: "</span> + contains(head, <span class="hljs-number">3</span>));
        System.out.println(<span class="hljs-string">"æ˜¯å¦åŒ…å« 5: "</span> + contains(head, <span class="hljs-number">5</span>));

        head = reverse(head);
        printList(head);
    }

    <span class="hljs-keyword">static</span> Node <span class="hljs-title function_">buildList</span><span class="hljs-params">()</span> {
        <span class="hljs-type">Node</span> <span class="hljs-variable">n1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Node</span>(<span class="hljs-number">1</span>);
        <span class="hljs-type">Node</span> <span class="hljs-variable">n2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Node</span>(<span class="hljs-number">2</span>);
        <span class="hljs-type">Node</span> <span class="hljs-variable">n3</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Node</span>(<span class="hljs-number">3</span>);
        <span class="hljs-type">Node</span> <span class="hljs-variable">n4</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Node</span>(<span class="hljs-number">4</span>);

        n1.next = n2;
        n2.next = n3;
        n3.next = n4;

        <span class="hljs-keyword">return</span> n1;
    }

    <span class="hljs-keyword">static</span> Node <span class="hljs-title function_">delete</span><span class="hljs-params">(Node head, <span class="hljs-type">int</span> target)</span> {
        <span class="hljs-keyword">if</span> (head == <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
        }
        <span class="hljs-keyword">if</span> (head.value == target) {
            <span class="hljs-keyword">return</span> head.next;
        }

        <span class="hljs-type">Node</span> <span class="hljs-variable">current</span> <span class="hljs-operator">=</span> head;
        <span class="hljs-keyword">while</span> (current.next != <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">if</span> (current.next.value == target) {
                current.next = current.next.next;
                <span class="hljs-keyword">break</span>;
            }
            current = current.next;
        }
        <span class="hljs-keyword">return</span> head;
    }

    <span class="hljs-keyword">static</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">contains</span><span class="hljs-params">(Node head, <span class="hljs-type">int</span> target)</span> {
        <span class="hljs-type">Node</span> <span class="hljs-variable">current</span> <span class="hljs-operator">=</span> head;
        <span class="hljs-keyword">while</span> (current != <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">if</span> (current.value == target) {
                <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
            }
            current = current.next;
        }
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }

    <span class="hljs-keyword">static</span> Node <span class="hljs-title function_">reverse</span><span class="hljs-params">(Node head)</span> {
        <span class="hljs-type">Node</span> <span class="hljs-variable">prev</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;
        <span class="hljs-type">Node</span> <span class="hljs-variable">current</span> <span class="hljs-operator">=</span> head;

        <span class="hljs-keyword">while</span> (current != <span class="hljs-literal">null</span>) {
            <span class="hljs-type">Node</span> <span class="hljs-variable">nextTemp</span> <span class="hljs-operator">=</span> current.next;
            current.next = prev;
            prev = current;
            current = nextTemp;
        }
        <span class="hljs-keyword">return</span> prev;
    }

    <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">printList</span><span class="hljs-params">(Node head)</span> {
        <span class="hljs-type">Node</span> <span class="hljs-variable">current</span> <span class="hljs-operator">=</span> head;
        <span class="hljs-keyword">while</span> (current != <span class="hljs-literal">null</span>) {
            System.out.print(current.value + <span class="hljs-string">" -&gt; "</span>);
            current = current.next;
        }
        System.out.println(<span class="hljs-string">"null"</span>);
    }
}
</code></pre>
<p>å¤åˆ¶ä¸‹é¢çš„å†…å®¹åœ¨æµè§ˆå™¨åœ°å€è®¿é—®</p>
<pre><code class="hljs language-vbnet" lang="vbnet"><span class="hljs-symbol">https:</span>//pythontutor.com/render.html#code=import%<span class="hljs-number">20</span>java.util.Objects%<span class="hljs-number">3</span>B%<span class="hljs-number">0</span>A%<span class="hljs-number">0</span>Apublic%<span class="hljs-number">20</span><span class="hljs-keyword">class</span>%<span class="hljs-number">20L</span>inkedListDemo%<span class="hljs-number">20%</span><span class="hljs-number">7</span>B%<span class="hljs-number">0</span>A%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20</span>//%<span class="hljs-number">20%</span>E5%<span class="hljs-number">8</span>D%<span class="hljs-number">95%</span>E9%<span class="hljs-number">93%</span>BE%E8%A1%A8%E8%<span class="hljs-number">8</span>A%<span class="hljs-number">82%</span>E7%<span class="hljs-number">82%</span>B9%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20s</span>tatic%<span class="hljs-number">20</span><span class="hljs-keyword">class</span>%<span class="hljs-number">20</span>Node%<span class="hljs-number">20%</span><span class="hljs-number">7</span>B%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20i</span>nt%<span class="hljs-number">20</span>value%<span class="hljs-number">3</span>B%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20</span>Node%<span class="hljs-number">20</span><span class="hljs-keyword">next</span>%<span class="hljs-number">3</span>B%<span class="hljs-number">0</span>A%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20</span>Node%<span class="hljs-number">28i</span>nt%<span class="hljs-number">20</span>value%<span class="hljs-number">29%</span><span class="hljs-number">20%</span><span class="hljs-number">7</span>B%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20</span>this.value%<span class="hljs-number">20%</span><span class="hljs-number">3</span>D%<span class="hljs-number">20</span>value%<span class="hljs-number">3</span>B%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">7</span>D%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">7</span>D%<span class="hljs-number">0</span>A%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20</span><span class="hljs-keyword">private</span>%<span class="hljs-number">20</span>Node%<span class="hljs-number">20</span>head%<span class="hljs-number">3</span>B%<span class="hljs-number">0</span>A%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20</span>//%<span class="hljs-number">20%</span>E5%B0%BE%E6%<span class="hljs-number">8</span>F%<span class="hljs-number">92%</span>E6%B3%<span class="hljs-number">95%</span>E6%B7%BB%E5%<span class="hljs-number">8</span>A%A0%E8%<span class="hljs-number">8</span>A%<span class="hljs-number">82%</span>E7%<span class="hljs-number">82%</span>B9%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20</span><span class="hljs-keyword">public</span>%<span class="hljs-number">20</span>void%<span class="hljs-number">20</span>add%<span class="hljs-number">28i</span>nt%<span class="hljs-number">20</span>value%<span class="hljs-number">29%</span><span class="hljs-number">20%</span><span class="hljs-number">7</span>B%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20</span>Node%<span class="hljs-number">20</span>newNode%<span class="hljs-number">20%</span><span class="hljs-number">3</span>D%<span class="hljs-number">20</span><span class="hljs-built_in">new</span>%<span class="hljs-number">20</span>Node%<span class="hljs-number">28</span>value%<span class="hljs-number">29%</span><span class="hljs-number">3</span>B%<span class="hljs-number">0</span>A%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20i</span>f%<span class="hljs-number">20%</span><span class="hljs-number">28</span>head%<span class="hljs-number">20%</span><span class="hljs-number">3</span>D%<span class="hljs-number">3</span>D%<span class="hljs-number">20</span>null%<span class="hljs-number">29%</span><span class="hljs-number">20%</span><span class="hljs-number">7</span>B%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20</span>head%<span class="hljs-number">20%</span><span class="hljs-number">3</span>D%<span class="hljs-number">20</span>newNode%<span class="hljs-number">3</span>B%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20</span><span class="hljs-keyword">return</span>%<span class="hljs-number">3</span>B%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">7</span>D%<span class="hljs-number">0</span>A%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20</span>Node%<span class="hljs-number">20</span>cur%<span class="hljs-number">20%</span><span class="hljs-number">3</span>D%<span class="hljs-number">20</span>head%<span class="hljs-number">3</span>B%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20</span><span class="hljs-keyword">while</span>%<span class="hljs-number">20%</span><span class="hljs-number">28</span>cur.<span class="hljs-keyword">next</span>%<span class="hljs-number">20</span>!%<span class="hljs-number">3</span>D%<span class="hljs-number">20</span>null%<span class="hljs-number">29%</span><span class="hljs-number">20%</span><span class="hljs-number">7</span>B%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20</span>cur%<span class="hljs-number">20%</span><span class="hljs-number">3</span>D%<span class="hljs-number">20</span>cur.<span class="hljs-keyword">next</span>%<span class="hljs-number">3</span>B%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">7</span>D%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20</span>cur.<span class="hljs-keyword">next</span>%<span class="hljs-number">20%</span><span class="hljs-number">3</span>D%<span class="hljs-number">20</span>newNode%<span class="hljs-number">3</span>B%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">7</span>D%<span class="hljs-number">0</span>A%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20</span>//%<span class="hljs-number">20%</span>E5%<span class="hljs-number">88%</span>A0%E9%<span class="hljs-number">99%</span>A4%E6%<span class="hljs-number">8</span>C%<span class="hljs-number">87%</span>E5%AE%<span class="hljs-number">9</span>A%E5%<span class="hljs-number">80%</span>BC%E7%<span class="hljs-number">9</span>A%<span class="hljs-number">84%</span>E8%<span class="hljs-number">8</span>A%<span class="hljs-number">82%</span>E7%<span class="hljs-number">82%</span>B9%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20</span><span class="hljs-keyword">public</span>%<span class="hljs-number">20</span>void%<span class="hljs-number">20</span>remove%<span class="hljs-number">28i</span>nt%<span class="hljs-number">20</span>value%<span class="hljs-number">29%</span><span class="hljs-number">20%</span><span class="hljs-number">7</span>B%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20i</span>f%<span class="hljs-number">20%</span><span class="hljs-number">28</span>head%<span class="hljs-number">20%</span><span class="hljs-number">3</span>D%<span class="hljs-number">3</span>D%<span class="hljs-number">20</span>null%<span class="hljs-number">29%</span><span class="hljs-number">20</span><span class="hljs-keyword">return</span>%<span class="hljs-number">3</span>B%<span class="hljs-number">0</span>A%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20i</span>f%<span class="hljs-number">20%</span><span class="hljs-number">28</span>head.value%<span class="hljs-number">20%</span><span class="hljs-number">3</span>D%<span class="hljs-number">3</span>D%<span class="hljs-number">20</span>value%<span class="hljs-number">29%</span><span class="hljs-number">20%</span><span class="hljs-number">7</span>B%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20</span>head%<span class="hljs-number">20%</span><span class="hljs-number">3</span>D%<span class="hljs-number">20</span>head.<span class="hljs-keyword">next</span>%<span class="hljs-number">3</span>B%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20</span><span class="hljs-keyword">return</span>%<span class="hljs-number">3</span>B%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">7</span>D%<span class="hljs-number">0</span>A%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20</span>Node%<span class="hljs-number">20</span>cur%<span class="hljs-number">20%</span><span class="hljs-number">3</span>D%<span class="hljs-number">20</span>head%<span class="hljs-number">3</span>B%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20</span><span class="hljs-keyword">while</span>%<span class="hljs-number">20%</span><span class="hljs-number">28</span>cur.<span class="hljs-keyword">next</span>%<span class="hljs-number">20</span>!%<span class="hljs-number">3</span>D%<span class="hljs-number">20</span>null%<span class="hljs-number">29%</span><span class="hljs-number">20%</span><span class="hljs-number">7</span>B%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20i</span>f%<span class="hljs-number">20%</span><span class="hljs-number">28</span>cur.<span class="hljs-keyword">next</span>.value%<span class="hljs-number">20%</span><span class="hljs-number">3</span>D%<span class="hljs-number">3</span>D%<span class="hljs-number">20</span>value%<span class="hljs-number">29%</span><span class="hljs-number">20%</span><span class="hljs-number">7</span>B%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20</span>cur.<span class="hljs-keyword">next</span>%<span class="hljs-number">20%</span><span class="hljs-number">3</span>D%<span class="hljs-number">20</span>cur.<span class="hljs-keyword">next</span>.<span class="hljs-keyword">next</span>%<span class="hljs-number">3</span>B%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20</span><span class="hljs-keyword">return</span>%<span class="hljs-number">3</span>B%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">7</span>D%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20</span>cur%<span class="hljs-number">20%</span><span class="hljs-number">3</span>D%<span class="hljs-number">20</span>cur.<span class="hljs-keyword">next</span>%<span class="hljs-number">3</span>B%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">7</span>D%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">7</span>D%<span class="hljs-number">0</span>A%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20</span>//%<span class="hljs-number">20%</span>E5%<span class="hljs-number">88%</span>A4%E6%<span class="hljs-number">96%</span>AD%E6%<span class="hljs-number">98%</span>AF%E5%<span class="hljs-number">90%</span>A6%E5%<span class="hljs-number">8</span>C%<span class="hljs-number">85%</span>E5%<span class="hljs-number">90%</span>AB%E6%<span class="hljs-number">9</span>F%<span class="hljs-number">90%</span>E4%B8%AA%E5%<span class="hljs-number">80%</span>BC%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20</span><span class="hljs-keyword">public</span>%<span class="hljs-number">20</span><span class="hljs-type">boolean</span>%<span class="hljs-number">20</span>contains%<span class="hljs-number">28i</span>nt%<span class="hljs-number">20</span>value%<span class="hljs-number">29%</span><span class="hljs-number">20%</span><span class="hljs-number">7</span>B%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20</span>Node%<span class="hljs-number">20</span>cur%<span class="hljs-number">20%</span><span class="hljs-number">3</span>D%<span class="hljs-number">20</span>head%<span class="hljs-number">3</span>B%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20</span><span class="hljs-keyword">while</span>%<span class="hljs-number">20%</span><span class="hljs-number">28</span>cur%<span class="hljs-number">20</span>!%<span class="hljs-number">3</span>D%<span class="hljs-number">20</span>null%<span class="hljs-number">29%</span><span class="hljs-number">20%</span><span class="hljs-number">7</span>B%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20i</span>f%<span class="hljs-number">20%</span><span class="hljs-number">28</span>Objects.<span class="hljs-keyword">equals</span>%<span class="hljs-number">28</span>cur.value,%<span class="hljs-number">20</span>value%<span class="hljs-number">29%</span><span class="hljs-number">29%</span><span class="hljs-number">20%</span><span class="hljs-number">7</span>B%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20</span><span class="hljs-keyword">return</span>%<span class="hljs-number">20</span><span class="hljs-literal">true</span>%<span class="hljs-number">3</span>B%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">7</span>D%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20</span>cur%<span class="hljs-number">20%</span><span class="hljs-number">3</span>D%<span class="hljs-number">20</span>cur.<span class="hljs-keyword">next</span>%<span class="hljs-number">3</span>B%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">7</span>D%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20</span><span class="hljs-keyword">return</span>%<span class="hljs-number">20</span><span class="hljs-literal">false</span>%<span class="hljs-number">3</span>B%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">7</span>D%<span class="hljs-number">0</span>A%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20</span>//%<span class="hljs-number">20%</span>E6%<span class="hljs-number">89%</span><span class="hljs-number">93%</span>E5%<span class="hljs-number">8</span>D%B0%E9%<span class="hljs-number">93%</span>BE%E8%A1%A8%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20</span><span class="hljs-keyword">public</span>%<span class="hljs-number">20</span>void%<span class="hljs-number">20</span>print%<span class="hljs-number">28%</span><span class="hljs-number">29%</span><span class="hljs-number">20%</span><span class="hljs-number">7</span>B%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20</span>Node%<span class="hljs-number">20</span>cur%<span class="hljs-number">20%</span><span class="hljs-number">3</span>D%<span class="hljs-number">20</span>head%<span class="hljs-number">3</span>B%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20</span><span class="hljs-keyword">while</span>%<span class="hljs-number">20%</span><span class="hljs-number">28</span>cur%<span class="hljs-number">20</span>!%<span class="hljs-number">3</span>D%<span class="hljs-number">20</span>null%<span class="hljs-number">29%</span><span class="hljs-number">20%</span><span class="hljs-number">7</span>B%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20S</span>ystem.out.print%<span class="hljs-number">28</span>cur.value%<span class="hljs-number">20%</span><span class="hljs-number">2</span>B%<span class="hljs-number">20%</span><span class="hljs-number">22%</span><span class="hljs-number">20</span>-%<span class="hljs-number">3</span>E%<span class="hljs-number">20%</span><span class="hljs-number">22%</span><span class="hljs-number">29%</span><span class="hljs-number">3</span>B%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20</span>cur%<span class="hljs-number">20%</span><span class="hljs-number">3</span>D%<span class="hljs-number">20</span>cur.<span class="hljs-keyword">next</span>%<span class="hljs-number">3</span>B%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">7</span>D%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20S</span>ystem.out.println%<span class="hljs-number">28%</span><span class="hljs-number">22</span>null%<span class="hljs-number">22%</span><span class="hljs-number">29%</span><span class="hljs-number">3</span>B%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">7</span>D%<span class="hljs-number">0</span>A%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20</span>//%<span class="hljs-number">20%</span>E5%<span class="hljs-number">8</span>F%<span class="hljs-number">8</span>D%E8%BD%AC%E9%<span class="hljs-number">93%</span>BE%E8%A1%A8%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20</span><span class="hljs-keyword">public</span>%<span class="hljs-number">20</span>void%<span class="hljs-number">20</span>reverse%<span class="hljs-number">28%</span><span class="hljs-number">29%</span><span class="hljs-number">20%</span><span class="hljs-number">7</span>B%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20</span>Node%<span class="hljs-number">20</span>prev%<span class="hljs-number">20%</span><span class="hljs-number">3</span>D%<span class="hljs-number">20</span>null%<span class="hljs-number">3</span>B%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20</span>Node%<span class="hljs-number">20</span>cur%<span class="hljs-number">20%</span><span class="hljs-number">3</span>D%<span class="hljs-number">20</span>head%<span class="hljs-number">3</span>B%<span class="hljs-number">0</span>A%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20</span><span class="hljs-keyword">while</span>%<span class="hljs-number">20%</span><span class="hljs-number">28</span>cur%<span class="hljs-number">20</span>!%<span class="hljs-number">3</span>D%<span class="hljs-number">20</span>null%<span class="hljs-number">29%</span><span class="hljs-number">20%</span><span class="hljs-number">7</span>B%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20</span>Node%<span class="hljs-number">20</span>nextTemp%<span class="hljs-number">20%</span><span class="hljs-number">3</span>D%<span class="hljs-number">20</span>cur.<span class="hljs-keyword">next</span>%<span class="hljs-number">3</span>B%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20</span>cur.<span class="hljs-keyword">next</span>%<span class="hljs-number">20%</span><span class="hljs-number">3</span>D%<span class="hljs-number">20</span>prev%<span class="hljs-number">3</span>B%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20</span>prev%<span class="hljs-number">20%</span><span class="hljs-number">3</span>D%<span class="hljs-number">20</span>cur%<span class="hljs-number">3</span>B%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20</span>cur%<span class="hljs-number">20%</span><span class="hljs-number">3</span>D%<span class="hljs-number">20</span>nextTemp%<span class="hljs-number">3</span>B%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">7</span>D%<span class="hljs-number">0</span>A%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20</span>head%<span class="hljs-number">20%</span><span class="hljs-number">3</span>D%<span class="hljs-number">20</span>prev%<span class="hljs-number">3</span>B%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">7</span>D%<span class="hljs-number">0</span>A%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20</span>//%<span class="hljs-number">20%</span>E6%B5%<span class="hljs-number">8</span>B%E8%AF%<span class="hljs-number">95%</span>E5%<span class="hljs-number">85%</span>A5%E5%<span class="hljs-number">8</span>F%A3%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20</span><span class="hljs-keyword">public</span>%<span class="hljs-number">20s</span>tatic%<span class="hljs-number">20</span>void%<span class="hljs-number">20</span>main%<span class="hljs-number">28S</span>tring%<span class="hljs-number">5</span>B%<span class="hljs-number">5</span>D%<span class="hljs-number">20</span>args%<span class="hljs-number">29%</span><span class="hljs-number">20%</span><span class="hljs-number">7</span>B%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20L</span>inkedListDemo%<span class="hljs-number">20l</span>ist%<span class="hljs-number">20%</span><span class="hljs-number">3</span>D%<span class="hljs-number">20</span><span class="hljs-built_in">new</span>%<span class="hljs-number">20L</span>inkedListDemo%<span class="hljs-number">28%</span><span class="hljs-number">29%</span><span class="hljs-number">3</span>B%<span class="hljs-number">0</span>A%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20l</span>ist.add%<span class="hljs-number">281%</span><span class="hljs-number">29%</span><span class="hljs-number">3</span>B%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20l</span>ist.add%<span class="hljs-number">282%</span><span class="hljs-number">29%</span><span class="hljs-number">3</span>B%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20l</span>ist.add%<span class="hljs-number">283%</span><span class="hljs-number">29%</span><span class="hljs-number">3</span>B%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20l</span>ist.add%<span class="hljs-number">284%</span><span class="hljs-number">29%</span><span class="hljs-number">3</span>B%<span class="hljs-number">0</span>A%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20S</span>ystem.out.println%<span class="hljs-number">28%</span><span class="hljs-number">22%</span>E5%<span class="hljs-number">8</span>E%<span class="hljs-number">9</span>F%E5%A7%<span class="hljs-number">8</span>B%E9%<span class="hljs-number">93%</span>BE%E8%A1%A8%<span class="hljs-number">3</span>A%<span class="hljs-number">22%</span><span class="hljs-number">29%</span><span class="hljs-number">3</span>B%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20l</span>ist.print%<span class="hljs-number">28%</span><span class="hljs-number">29%</span><span class="hljs-number">3</span>B%<span class="hljs-number">0</span>A%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20S</span>ystem.out.println%<span class="hljs-number">28%</span><span class="hljs-number">22%</span>E5%<span class="hljs-number">88%</span>A0%E9%<span class="hljs-number">99%</span>A4%<span class="hljs-number">202%</span><span class="hljs-number">3</span>A%<span class="hljs-number">22%</span><span class="hljs-number">29%</span><span class="hljs-number">3</span>B%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20l</span>ist.remove%<span class="hljs-number">282%</span><span class="hljs-number">29%</span><span class="hljs-number">3</span>B%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20l</span>ist.print%<span class="hljs-number">28%</span><span class="hljs-number">29%</span><span class="hljs-number">3</span>B%<span class="hljs-number">0</span>A%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20S</span>ystem.out.println%<span class="hljs-number">28%</span><span class="hljs-number">22%</span>E6%<span class="hljs-number">98%</span>AF%E5%<span class="hljs-number">90%</span>A6%E5%<span class="hljs-number">8</span>C%<span class="hljs-number">85%</span>E5%<span class="hljs-number">90%</span>AB%<span class="hljs-number">203%</span><span class="hljs-number">3</span>A%<span class="hljs-number">20%</span><span class="hljs-number">22%</span><span class="hljs-number">20%</span><span class="hljs-number">2</span>B%<span class="hljs-number">20l</span>ist.contains%<span class="hljs-number">283%</span><span class="hljs-number">29%</span><span class="hljs-number">29%</span><span class="hljs-number">3</span>B%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20S</span>ystem.out.println%<span class="hljs-number">28%</span><span class="hljs-number">22%</span>E6%<span class="hljs-number">98%</span>AF%E5%<span class="hljs-number">90%</span>A6%E5%<span class="hljs-number">8</span>C%<span class="hljs-number">85%</span>E5%<span class="hljs-number">90%</span>AB%<span class="hljs-number">205%</span><span class="hljs-number">3</span>A%<span class="hljs-number">20%</span><span class="hljs-number">22%</span><span class="hljs-number">20%</span><span class="hljs-number">2</span>B%<span class="hljs-number">20l</span>ist.contains%<span class="hljs-number">285%</span><span class="hljs-number">29%</span><span class="hljs-number">29%</span><span class="hljs-number">3</span>B%<span class="hljs-number">0</span>A%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20S</span>ystem.out.println%<span class="hljs-number">28%</span><span class="hljs-number">22%</span>E5%<span class="hljs-number">8</span>F%<span class="hljs-number">8</span>D%E8%BD%AC%E9%<span class="hljs-number">93%</span>BE%E8%A1%A8%<span class="hljs-number">3</span>A%<span class="hljs-number">22%</span><span class="hljs-number">29%</span><span class="hljs-number">3</span>B%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20l</span>ist.reverse%<span class="hljs-number">28%</span><span class="hljs-number">29%</span><span class="hljs-number">3</span>B%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20l</span>ist.print%<span class="hljs-number">28%</span><span class="hljs-number">29%</span><span class="hljs-number">3</span>B%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">7</span>D%<span class="hljs-number">0</span>A%<span class="hljs-number">7</span>D&amp;cumulative=<span class="hljs-literal">false</span>&amp;curInstr=<span class="hljs-number">0&amp;</span>heapPrimitives=nevernest&amp;mode=display&amp;origin=opt-frontend.js&amp;py=java&amp;rawInputLstJSON=%<span class="hljs-number">5</span>B%<span class="hljs-number">5</span>D&amp;textReferences=<span class="hljs-literal">false</span>
</code></pre>
<h3 data-id="heading-4">Java ä¸­çš„ try catch finally ç¤ºä¾‹</h3>
<p>è¿™ä¸ªç¤ºä¾‹é€‚åˆç”¨æ¥è§‚å¯Ÿå¼‚å¸¸å‘ç”Ÿæ—¶æ§åˆ¶æµçš„å˜åŒ–ï¼Œä»¥åŠ finally ä»£ç å—ä¸€å®šä¼šè¢«æ‰§è¡Œçš„ç‰¹æ€§ã€‚</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">TryCatchDemo</span> {

    <span class="hljs-comment">// æ¨¡æ‹Ÿä¸€ä¸ªéœ€è¦æ‰‹åŠ¨é‡Šæ”¾çš„èµ„æº</span>
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title">FakeResource</span> {
        <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">open</span>()</span> {
            System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"èµ„æºå·²æ‰“å¼€"</span>);
        }

        <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">use</span>()</span> {
            System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"æ­£åœ¨ä½¿ç”¨èµ„æº"</span>);
            <span class="hljs-comment">// äººä¸ºåˆ¶é€ å¼‚å¸¸</span>
            <span class="hljs-built_in">int</span> x = <span class="hljs-number">10</span> / <span class="hljs-number">0</span>;
        }

        <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">close</span>()</span> {
            System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"èµ„æºå·²é‡Šæ”¾"</span>);
        }
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span>(<span class="hljs-params">String[] args</span>)</span> {
        FakeResource resource = <span class="hljs-keyword">new</span> FakeResource();

        <span class="hljs-keyword">try</span> {
            resource.open();
            resource.use();
            System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"è¿™è¡Œä»£ç ä¸ä¼šè¢«æ‰§è¡Œ"</span>);
        } <span class="hljs-keyword">catch</span> (ArithmeticException e) {
            System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"æ•è·åˆ°å¼‚å¸¸: "</span> + e.getMessage());
        } <span class="hljs-keyword">finally</span> {
            <span class="hljs-comment">// æ— è®ºæ˜¯å¦å‘ç”Ÿå¼‚å¸¸ï¼Œéƒ½ä¼šæ‰§è¡Œ</span>
            resource.close();
            System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"finally å—æ‰§è¡Œå®Œæˆ"</span>);
        }
    }
}
</code></pre>
<p>åœ¨ PythonTutor ä¸­å¯ä»¥æ¸…æ¥šçœ‹åˆ°ï¼š</p>
<ul>
<li>å¼‚å¸¸å‘ç”Ÿåç›´æ¥è·³è½¬åˆ° catch</li>
<li>try ä¸­å‰©ä½™ä»£ç ä¸å†æ‰§è¡Œ</li>
<li>finally å§‹ç»ˆä¼šè¢«æ‰§è¡Œ</li>
</ul>
<p>å¤åˆ¶ä¸‹é¢çš„å†…å®¹åœ¨æµè§ˆå™¨åœ°å€è®¿é—®</p>
<pre><code class="hljs language-vbnet" lang="vbnet"><span class="hljs-symbol">https:</span>//pythontutor.com/render.html#code=<span class="hljs-keyword">public</span>%<span class="hljs-number">20</span><span class="hljs-keyword">class</span>%<span class="hljs-number">20</span>TryCatchDemo%<span class="hljs-number">20%</span><span class="hljs-number">7</span>B%<span class="hljs-number">0</span>A%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20</span>//%<span class="hljs-number">20%</span>E6%A8%A1%E6%<span class="hljs-number">8</span>B%<span class="hljs-number">9</span>F%E4%B8%<span class="hljs-number">80%</span>E4%B8%AA%E9%<span class="hljs-number">9</span>C%<span class="hljs-number">80%</span>E8%A6%<span class="hljs-number">81%</span>E6%<span class="hljs-number">89%</span><span class="hljs-number">8</span>B%E5%<span class="hljs-number">8</span>A%A8%E9%<span class="hljs-number">87%</span><span class="hljs-number">8</span>A%E6%<span class="hljs-number">94%</span>BE%E7%<span class="hljs-number">9</span>A%<span class="hljs-number">84%</span>E8%B5%<span class="hljs-number">84%</span>E6%BA%<span class="hljs-number">90%</span><span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20s</span>tatic%<span class="hljs-number">20</span><span class="hljs-keyword">class</span>%<span class="hljs-number">20</span>FakeResource%<span class="hljs-number">20%</span><span class="hljs-number">7</span>B%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20</span>void%<span class="hljs-number">20</span>open%<span class="hljs-number">28%</span><span class="hljs-number">29%</span><span class="hljs-number">20%</span><span class="hljs-number">7</span>B%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20S</span>ystem.out.println%<span class="hljs-number">28%</span><span class="hljs-number">22%</span>E8%B5%<span class="hljs-number">84%</span>E6%BA%<span class="hljs-number">90%</span>E5%B7%B2%E6%<span class="hljs-number">89%</span><span class="hljs-number">93%</span>E5%BC%<span class="hljs-number">80%</span><span class="hljs-number">22%</span><span class="hljs-number">29%</span><span class="hljs-number">3</span>B%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">7</span>D%<span class="hljs-number">0</span>A%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20</span>void%<span class="hljs-number">20us</span>e%<span class="hljs-number">28%</span><span class="hljs-number">29%</span><span class="hljs-number">20%</span><span class="hljs-number">7</span>B%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20S</span>ystem.out.println%<span class="hljs-number">28%</span><span class="hljs-number">22%</span>E6%AD%A3%E5%<span class="hljs-number">9</span>C%A8%E4%BD%BF%E7%<span class="hljs-number">94%</span>A8%E8%B5%<span class="hljs-number">84%</span>E6%BA%<span class="hljs-number">90%</span><span class="hljs-number">22%</span><span class="hljs-number">29%</span><span class="hljs-number">3</span>B%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20</span>//%<span class="hljs-number">20%</span>E4%BA%BA%E4%B8%BA%E5%<span class="hljs-number">88%</span>B6%E9%<span class="hljs-number">80%</span>A0%E5%BC%<span class="hljs-number">82%</span>E5%B8%B8%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20i</span>nt%<span class="hljs-number">20</span>x%<span class="hljs-number">20%</span><span class="hljs-number">3</span>D%<span class="hljs-number">2010%</span><span class="hljs-number">20</span>/%<span class="hljs-number">200%</span><span class="hljs-number">3</span>B%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">7</span>D%<span class="hljs-number">0</span>A%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20</span>void%<span class="hljs-number">20</span>close%<span class="hljs-number">28%</span><span class="hljs-number">29%</span><span class="hljs-number">20%</span><span class="hljs-number">7</span>B%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20S</span>ystem.out.println%<span class="hljs-number">28%</span><span class="hljs-number">22%</span>E8%B5%<span class="hljs-number">84%</span>E6%BA%<span class="hljs-number">90%</span>E5%B7%B2%E9%<span class="hljs-number">87%</span><span class="hljs-number">8</span>A%E6%<span class="hljs-number">94%</span>BE%<span class="hljs-number">22%</span><span class="hljs-number">29%</span><span class="hljs-number">3</span>B%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">7</span>D%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">7</span>D%<span class="hljs-number">0</span>A%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20</span><span class="hljs-keyword">public</span>%<span class="hljs-number">20s</span>tatic%<span class="hljs-number">20</span>void%<span class="hljs-number">20</span>main%<span class="hljs-number">28S</span>tring%<span class="hljs-number">5</span>B%<span class="hljs-number">5</span>D%<span class="hljs-number">20</span>args%<span class="hljs-number">29%</span><span class="hljs-number">20%</span><span class="hljs-number">7</span>B%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20</span>FakeResource%<span class="hljs-number">20</span>resource%<span class="hljs-number">20%</span><span class="hljs-number">3</span>D%<span class="hljs-number">20</span><span class="hljs-built_in">new</span>%<span class="hljs-number">20</span>FakeResource%<span class="hljs-number">28%</span><span class="hljs-number">29%</span><span class="hljs-number">3</span>B%<span class="hljs-number">0</span>A%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20</span><span class="hljs-keyword">try</span>%<span class="hljs-number">20%</span><span class="hljs-number">7</span>B%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20</span>resource.open%<span class="hljs-number">28%</span><span class="hljs-number">29%</span><span class="hljs-number">3</span>B%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20</span>resource.use%<span class="hljs-number">28%</span><span class="hljs-number">29%</span><span class="hljs-number">3</span>B%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20S</span>ystem.out.println%<span class="hljs-number">28%</span><span class="hljs-number">22%</span>E8%BF%<span class="hljs-number">99%</span>E8%A1%<span class="hljs-number">8</span>C%E4%BB%A3%E7%A0%<span class="hljs-number">81%</span>E4%B8%<span class="hljs-number">8</span>D%E4%BC%<span class="hljs-number">9</span>A%E8%A2%AB%E6%<span class="hljs-number">89%</span>A7%E8%A1%<span class="hljs-number">8</span>C%<span class="hljs-number">22%</span><span class="hljs-number">29%</span><span class="hljs-number">3</span>B%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">7</span>D%<span class="hljs-number">20</span><span class="hljs-keyword">catch</span>%<span class="hljs-number">20%</span><span class="hljs-number">28</span>ArithmeticException%<span class="hljs-number">20</span>e%<span class="hljs-number">29%</span><span class="hljs-number">20%</span><span class="hljs-number">7</span>B%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20S</span>ystem.out.println%<span class="hljs-number">28%</span><span class="hljs-number">22%</span>E6%<span class="hljs-number">8</span>D%<span class="hljs-number">95%</span>E8%<span class="hljs-number">8</span>E%B7%E5%<span class="hljs-number">88%</span>B0%E5%BC%<span class="hljs-number">82%</span>E5%B8%B8%<span class="hljs-number">3</span>A%<span class="hljs-number">20%</span><span class="hljs-number">22%</span><span class="hljs-number">20%</span><span class="hljs-number">2</span>B%<span class="hljs-number">20</span>e.getMessage%<span class="hljs-number">28%</span><span class="hljs-number">29%</span><span class="hljs-number">29%</span><span class="hljs-number">3</span>B%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">7</span>D%<span class="hljs-number">20</span><span class="hljs-keyword">finally</span>%<span class="hljs-number">20%</span><span class="hljs-number">7</span>B%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20</span>//%<span class="hljs-number">20%</span>E6%<span class="hljs-number">97%</span>A0%E8%AE%BA%E6%<span class="hljs-number">98%</span>AF%E5%<span class="hljs-number">90%</span>A6%E5%<span class="hljs-number">8</span>F%<span class="hljs-number">91%</span>E7%<span class="hljs-number">94%</span><span class="hljs-number">9</span>F%E5%BC%<span class="hljs-number">82%</span>E5%B8%B8%EF%BC%<span class="hljs-number">8</span>C%E9%<span class="hljs-number">83%</span>BD%E4%BC%<span class="hljs-number">9</span>A%E6%<span class="hljs-number">89%</span>A7%E8%A1%<span class="hljs-number">8</span>C%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20</span>resource.close%<span class="hljs-number">28%</span><span class="hljs-number">29%</span><span class="hljs-number">3</span>B%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20S</span>ystem.out.println%<span class="hljs-number">28%</span><span class="hljs-number">22</span><span class="hljs-keyword">finally</span>%<span class="hljs-number">20%</span>E5%<span class="hljs-number">9</span>D%<span class="hljs-number">97%</span>E6%<span class="hljs-number">89%</span>A7%E8%A1%<span class="hljs-number">8</span>C%E5%AE%<span class="hljs-number">8</span>C%E6%<span class="hljs-number">88%</span><span class="hljs-number">90%</span><span class="hljs-number">22%</span><span class="hljs-number">29%</span><span class="hljs-number">3</span>B%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">7</span>D%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">7</span>D%<span class="hljs-number">0</span>A%<span class="hljs-number">7</span>D&amp;cumulative=<span class="hljs-literal">false</span>&amp;curInstr=<span class="hljs-number">0&amp;</span>heapPrimitives=nevernest&amp;mode=display&amp;origin=opt-frontend.js&amp;py=java&amp;rawInputLstJSON=%<span class="hljs-number">5</span>B%<span class="hljs-number">5</span>D&amp;textReferences=<span class="hljs-literal">false</span>
</code></pre>
<hr/>
<h3 data-id="heading-5">Java ä¸­çš„ switch case ï¼ˆå‘½ä¸­ç©¿é€ï¼‰ç¤ºä¾‹</h3>
<p>ä¸‹é¢è¿™ä¸ªç¤ºä¾‹å°† break åˆ é™¤äº†ï¼Œé€‚åˆè§‚å¯Ÿåˆ†æ”¯åŒ¹é…å’Œ break å¯¹æµç¨‹çš„å½±å“ã€‚</p>
<pre><code class="hljs language-csharp" lang="csharp">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">SwitchDemo</span> {

        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span>(<span class="hljs-params">String[] args</span>)</span> {
            <span class="hljs-built_in">int</span> day = <span class="hljs-number">1</span>;

            System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"day = "</span> + day);
            System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"å¼€å§‹æ‰§è¡Œ switch"</span>);

            <span class="hljs-keyword">switch</span> (day) {
                <span class="hljs-keyword">case</span> <span class="hljs-number">1</span>:
                    System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"å‘½ä¸­ case 1ï¼šæ˜ŸæœŸä¸€"</span>);
                    <span class="hljs-comment">// break;</span>
                <span class="hljs-keyword">case</span> <span class="hljs-number">2</span>:
                    System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"å‘½ä¸­ case 2ï¼šæ˜ŸæœŸäºŒ"</span>);
                    <span class="hljs-comment">// break;</span>
                <span class="hljs-keyword">case</span> <span class="hljs-number">3</span>:
                    System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"å‘½ä¸­ case 3ï¼šæ˜ŸæœŸä¸‰"</span>);
                    <span class="hljs-comment">// break;</span>
                <span class="hljs-literal">default</span>:
                    System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"å‘½ä¸­ defaultï¼šæœªçŸ¥æ—¥æœŸ"</span>);
                    <span class="hljs-comment">// break;</span>
            }

            System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"switch æ‰§è¡Œç»“æŸ"</span>);
        }
    }
</code></pre>
<p>é€šè¿‡å¯è§†åŒ–å¯ä»¥çœ‹åˆ°ï¼š</p>
<ul>
<li>switch è¡¨è¾¾å¼åªè®¡ç®—ä¸€æ¬¡</li>
<li>ç¬¬ä¸€ä¸ªåŒ¹é…çš„ case å°±ä¼šè¢«æ‰§è¡Œ</li>
<li>ç¼ºå°‘break ä¼šå¯¼è‡´å‘½ä¸­ç©¿é€ã€‚</li>
</ul>
<p>å¤åˆ¶ä¸‹é¢çš„å†…å®¹åœ¨æµè§ˆå™¨åœ°å€è®¿é—®</p>
<pre><code class="hljs language-sql" lang="sql">https:<span class="hljs-operator">/</span><span class="hljs-operator">/</span>pythontutor.com<span class="hljs-operator">/</span>render.html#code<span class="hljs-operator">=</span>public<span class="hljs-operator">%</span><span class="hljs-number">20</span>class<span class="hljs-operator">%</span><span class="hljs-number">20</span>SwitchDemo<span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">7</span>B<span class="hljs-operator">%</span><span class="hljs-number">0</span>A<span class="hljs-operator">%</span><span class="hljs-number">0</span>A<span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span>public<span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-keyword">static</span><span class="hljs-operator">%</span><span class="hljs-number">20</span>void<span class="hljs-operator">%</span><span class="hljs-number">20</span>main<span class="hljs-operator">%</span><span class="hljs-number">28</span>String<span class="hljs-operator">%</span><span class="hljs-number">5</span>B<span class="hljs-operator">%</span><span class="hljs-number">5</span>D<span class="hljs-operator">%</span><span class="hljs-number">20</span>args<span class="hljs-operator">%</span><span class="hljs-number">29</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">7</span>B<span class="hljs-operator">%</span><span class="hljs-number">0</span>A<span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-type">int</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-keyword">day</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">3</span>D<span class="hljs-operator">%</span><span class="hljs-number">201</span><span class="hljs-operator">%</span><span class="hljs-number">3</span>B<span class="hljs-operator">%</span><span class="hljs-number">0</span>A<span class="hljs-operator">%</span><span class="hljs-number">0</span>A<span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span>System.out.println<span class="hljs-operator">%</span><span class="hljs-number">28</span><span class="hljs-operator">%</span><span class="hljs-number">22</span><span class="hljs-keyword">day</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">3</span>D<span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">22</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">2</span>B<span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-keyword">day</span><span class="hljs-operator">%</span><span class="hljs-number">29</span><span class="hljs-operator">%</span><span class="hljs-number">3</span>B<span class="hljs-operator">%</span><span class="hljs-number">0</span>A<span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span>System.out.println<span class="hljs-operator">%</span><span class="hljs-number">28</span><span class="hljs-operator">%</span><span class="hljs-number">22</span><span class="hljs-operator">%</span>E5<span class="hljs-operator">%</span>BC<span class="hljs-operator">%</span><span class="hljs-number">80</span><span class="hljs-operator">%</span>E5<span class="hljs-operator">%</span>A7<span class="hljs-operator">%</span><span class="hljs-number">8</span>B<span class="hljs-operator">%</span>E6<span class="hljs-operator">%</span><span class="hljs-number">89</span><span class="hljs-operator">%</span>A7<span class="hljs-operator">%</span>E8<span class="hljs-operator">%</span>A1<span class="hljs-operator">%</span><span class="hljs-number">8</span>C<span class="hljs-operator">%</span><span class="hljs-number">20</span>switch<span class="hljs-operator">%</span><span class="hljs-number">22</span><span class="hljs-operator">%</span><span class="hljs-number">29</span><span class="hljs-operator">%</span><span class="hljs-number">3</span>B<span class="hljs-operator">%</span><span class="hljs-number">0</span>A<span class="hljs-operator">%</span><span class="hljs-number">0</span>A<span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span>switch<span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">28</span><span class="hljs-keyword">day</span><span class="hljs-operator">%</span><span class="hljs-number">29</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">7</span>B<span class="hljs-operator">%</span><span class="hljs-number">0</span>A<span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-keyword">case</span><span class="hljs-operator">%</span><span class="hljs-number">201</span><span class="hljs-operator">%</span><span class="hljs-number">3</span>A<span class="hljs-operator">%</span><span class="hljs-number">0</span>A<span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span>System.out.println<span class="hljs-operator">%</span><span class="hljs-number">28</span><span class="hljs-operator">%</span><span class="hljs-number">22</span><span class="hljs-operator">%</span>E5<span class="hljs-operator">%</span><span class="hljs-number">91</span><span class="hljs-operator">%</span>BD<span class="hljs-operator">%</span>E4<span class="hljs-operator">%</span>B8<span class="hljs-operator">%</span>AD<span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-keyword">case</span><span class="hljs-operator">%</span><span class="hljs-number">201</span><span class="hljs-operator">%</span>EF<span class="hljs-operator">%</span>BC<span class="hljs-operator">%</span><span class="hljs-number">9</span>A<span class="hljs-operator">%</span>E6<span class="hljs-operator">%</span><span class="hljs-number">98</span><span class="hljs-operator">%</span><span class="hljs-number">9</span>F<span class="hljs-operator">%</span>E6<span class="hljs-operator">%</span><span class="hljs-number">9</span>C<span class="hljs-operator">%</span><span class="hljs-number">9</span>F<span class="hljs-operator">%</span>E4<span class="hljs-operator">%</span>B8<span class="hljs-operator">%</span><span class="hljs-number">80</span><span class="hljs-operator">%</span><span class="hljs-number">22</span><span class="hljs-operator">%</span><span class="hljs-number">29</span><span class="hljs-operator">%</span><span class="hljs-number">3</span>B<span class="hljs-operator">%</span><span class="hljs-number">0</span>A<span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">/</span><span class="hljs-operator">/</span><span class="hljs-operator">%</span><span class="hljs-number">20</span>break<span class="hljs-operator">%</span><span class="hljs-number">3</span>B<span class="hljs-operator">%</span><span class="hljs-number">0</span>A<span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-keyword">case</span><span class="hljs-operator">%</span><span class="hljs-number">202</span><span class="hljs-operator">%</span><span class="hljs-number">3</span>A<span class="hljs-operator">%</span><span class="hljs-number">0</span>A<span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span>System.out.println<span class="hljs-operator">%</span><span class="hljs-number">28</span><span class="hljs-operator">%</span><span class="hljs-number">22</span><span class="hljs-operator">%</span>E5<span class="hljs-operator">%</span><span class="hljs-number">91</span><span class="hljs-operator">%</span>BD<span class="hljs-operator">%</span>E4<span class="hljs-operator">%</span>B8<span class="hljs-operator">%</span>AD<span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-keyword">case</span><span class="hljs-operator">%</span><span class="hljs-number">202</span><span class="hljs-operator">%</span>EF<span class="hljs-operator">%</span>BC<span class="hljs-operator">%</span><span class="hljs-number">9</span>A<span class="hljs-operator">%</span>E6<span class="hljs-operator">%</span><span class="hljs-number">98</span><span class="hljs-operator">%</span><span class="hljs-number">9</span>F<span class="hljs-operator">%</span>E6<span class="hljs-operator">%</span><span class="hljs-number">9</span>C<span class="hljs-operator">%</span><span class="hljs-number">9</span>F<span class="hljs-operator">%</span>E4<span class="hljs-operator">%</span>BA<span class="hljs-operator">%</span><span class="hljs-number">8</span>C<span class="hljs-operator">%</span><span class="hljs-number">22</span><span class="hljs-operator">%</span><span class="hljs-number">29</span><span class="hljs-operator">%</span><span class="hljs-number">3</span>B<span class="hljs-operator">%</span><span class="hljs-number">0</span>A<span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">/</span><span class="hljs-operator">/</span><span class="hljs-operator">%</span><span class="hljs-number">20</span>break<span class="hljs-operator">%</span><span class="hljs-number">3</span>B<span class="hljs-operator">%</span><span class="hljs-number">0</span>A<span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-keyword">case</span><span class="hljs-operator">%</span><span class="hljs-number">203</span><span class="hljs-operator">%</span><span class="hljs-number">3</span>A<span class="hljs-operator">%</span><span class="hljs-number">0</span>A<span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span>System.out.println<span class="hljs-operator">%</span><span class="hljs-number">28</span><span class="hljs-operator">%</span><span class="hljs-number">22</span><span class="hljs-operator">%</span>E5<span class="hljs-operator">%</span><span class="hljs-number">91</span><span class="hljs-operator">%</span>BD<span class="hljs-operator">%</span>E4<span class="hljs-operator">%</span>B8<span class="hljs-operator">%</span>AD<span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-keyword">case</span><span class="hljs-operator">%</span><span class="hljs-number">203</span><span class="hljs-operator">%</span>EF<span class="hljs-operator">%</span>BC<span class="hljs-operator">%</span><span class="hljs-number">9</span>A<span class="hljs-operator">%</span>E6<span class="hljs-operator">%</span><span class="hljs-number">98</span><span class="hljs-operator">%</span><span class="hljs-number">9</span>F<span class="hljs-operator">%</span>E6<span class="hljs-operator">%</span><span class="hljs-number">9</span>C<span class="hljs-operator">%</span><span class="hljs-number">9</span>F<span class="hljs-operator">%</span>E4<span class="hljs-operator">%</span>B8<span class="hljs-operator">%</span><span class="hljs-number">89</span><span class="hljs-operator">%</span><span class="hljs-number">22</span><span class="hljs-operator">%</span><span class="hljs-number">29</span><span class="hljs-operator">%</span><span class="hljs-number">3</span>B<span class="hljs-operator">%</span><span class="hljs-number">0</span>A<span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">/</span><span class="hljs-operator">/</span><span class="hljs-operator">%</span><span class="hljs-number">20</span>break<span class="hljs-operator">%</span><span class="hljs-number">3</span>B<span class="hljs-operator">%</span><span class="hljs-number">0</span>A<span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-keyword">default</span><span class="hljs-operator">%</span><span class="hljs-number">3</span>A<span class="hljs-operator">%</span><span class="hljs-number">0</span>A<span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span>System.out.println<span class="hljs-operator">%</span><span class="hljs-number">28</span><span class="hljs-operator">%</span><span class="hljs-number">22</span><span class="hljs-operator">%</span>E5<span class="hljs-operator">%</span><span class="hljs-number">91</span><span class="hljs-operator">%</span>BD<span class="hljs-operator">%</span>E4<span class="hljs-operator">%</span>B8<span class="hljs-operator">%</span>AD<span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-keyword">default</span><span class="hljs-operator">%</span>EF<span class="hljs-operator">%</span>BC<span class="hljs-operator">%</span><span class="hljs-number">9</span>A<span class="hljs-operator">%</span>E6<span class="hljs-operator">%</span><span class="hljs-number">9</span>C<span class="hljs-operator">%</span>AA<span class="hljs-operator">%</span>E7<span class="hljs-operator">%</span><span class="hljs-number">9</span>F<span class="hljs-operator">%</span>A5<span class="hljs-operator">%</span>E6<span class="hljs-operator">%</span><span class="hljs-number">97</span><span class="hljs-operator">%</span>A5<span class="hljs-operator">%</span>E6<span class="hljs-operator">%</span><span class="hljs-number">9</span>C<span class="hljs-operator">%</span><span class="hljs-number">9</span>F<span class="hljs-operator">%</span><span class="hljs-number">22</span><span class="hljs-operator">%</span><span class="hljs-number">29</span><span class="hljs-operator">%</span><span class="hljs-number">3</span>B<span class="hljs-operator">%</span><span class="hljs-number">0</span>A<span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">/</span><span class="hljs-operator">/</span><span class="hljs-operator">%</span><span class="hljs-number">20</span>break<span class="hljs-operator">%</span><span class="hljs-number">3</span>B<span class="hljs-operator">%</span><span class="hljs-number">0</span>A<span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">7</span>D<span class="hljs-operator">%</span><span class="hljs-number">0</span>A<span class="hljs-operator">%</span><span class="hljs-number">0</span>A<span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span>System.out.println<span class="hljs-operator">%</span><span class="hljs-number">28</span><span class="hljs-operator">%</span><span class="hljs-number">22</span>switch<span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span>E6<span class="hljs-operator">%</span><span class="hljs-number">89</span><span class="hljs-operator">%</span>A7<span class="hljs-operator">%</span>E8<span class="hljs-operator">%</span>A1<span class="hljs-operator">%</span><span class="hljs-number">8</span>C<span class="hljs-operator">%</span>E7<span class="hljs-operator">%</span>BB<span class="hljs-operator">%</span><span class="hljs-number">93</span><span class="hljs-operator">%</span>E6<span class="hljs-operator">%</span><span class="hljs-number">9</span>D<span class="hljs-operator">%</span><span class="hljs-number">9</span>F<span class="hljs-operator">%</span><span class="hljs-number">22</span><span class="hljs-operator">%</span><span class="hljs-number">29</span><span class="hljs-operator">%</span><span class="hljs-number">3</span>B<span class="hljs-operator">%</span><span class="hljs-number">0</span>A<span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">20</span><span class="hljs-operator">%</span><span class="hljs-number">7</span>D<span class="hljs-operator">%</span><span class="hljs-number">0</span>A<span class="hljs-operator">%</span><span class="hljs-number">7</span>D<span class="hljs-operator">&amp;</span>cumulative<span class="hljs-operator">=</span><span class="hljs-literal">false</span><span class="hljs-operator">&amp;</span>curInstr<span class="hljs-operator">=</span><span class="hljs-number">0</span><span class="hljs-operator">&amp;</span>heapPrimitives<span class="hljs-operator">=</span>nevernest<span class="hljs-operator">&amp;</span>mode<span class="hljs-operator">=</span>display<span class="hljs-operator">&amp;</span>origin<span class="hljs-operator">=</span>opt<span class="hljs-operator">-</span>frontend.js<span class="hljs-operator">&amp;</span>py<span class="hljs-operator">=</span>java<span class="hljs-operator">&amp;</span>rawInputLstJSON<span class="hljs-operator">=</span><span class="hljs-operator">%</span><span class="hljs-number">5</span>B<span class="hljs-operator">%</span><span class="hljs-number">5</span>D<span class="hljs-operator">&amp;</span>textReferences<span class="hljs-operator">=</span><span class="hljs-literal">false</span>
</code></pre>
<hr/>
<h3 data-id="heading-6">while å¾ªç¯ä¸ continueã€break ç¤ºä¾‹</h3>
<p>è¿™ä¸ªç¤ºä¾‹éå¸¸é€‚åˆåœ¨ PythonTutor ä¸­è§‚å¯Ÿå¾ªç¯å˜é‡çš„å˜åŒ–ï¼Œä»¥åŠ continue å’Œ break å¯¹æµç¨‹çš„å½±å“ã€‚</p>
<pre><code class="hljs language-arduino" lang="arduino">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">WhileDemo</span> {

        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-type">static</span> <span class="hljs-type">void</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-type">String</span>[] args)</span> </span>{
            <span class="hljs-type">int</span> i = <span class="hljs-number">0</span>;

            <span class="hljs-keyword">while</span> (i &lt; <span class="hljs-number">5</span>) {
                i++;

                <span class="hljs-keyword">if</span> (i == <span class="hljs-number">2</span>) {
                    <span class="hljs-keyword">continue</span>;
                }

                <span class="hljs-keyword">if</span> (i == <span class="hljs-number">4</span>) {
                    <span class="hljs-keyword">break</span>;
                }

                System.out.<span class="hljs-built_in">println</span>(<span class="hljs-string">"å½“å‰ i = "</span> + i);
            }
        }
    }
</code></pre>
<p>åœ¨å¯è§†åŒ–è¿‡ç¨‹ä¸­å¯ä»¥çœ‹åˆ°ï¼š</p>
<ul>
<li>continue ä¼šè·³è¿‡æœ¬è½®å¾ªç¯å‰©ä½™ä»£ç </li>
<li>break ä¼šç›´æ¥è·³å‡ºæ•´ä¸ªå¾ªç¯</li>
<li>i çš„å˜åŒ–è¿‡ç¨‹æ¸…æ™°å¯è§</li>
</ul>

<pre><code class="hljs language-vbnet" lang="vbnet"><span class="hljs-symbol">https:</span>//pythontutor.com/render.html#code=<span class="hljs-keyword">public</span>%<span class="hljs-number">20</span><span class="hljs-keyword">class</span>%<span class="hljs-number">20</span>WhileDemo%<span class="hljs-number">20%</span><span class="hljs-number">7</span>B%<span class="hljs-number">0</span>A%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20</span><span class="hljs-keyword">public</span>%<span class="hljs-number">20s</span>tatic%<span class="hljs-number">20</span>void%<span class="hljs-number">20</span>main%<span class="hljs-number">28S</span>tring%<span class="hljs-number">5</span>B%<span class="hljs-number">5</span>D%<span class="hljs-number">20</span>args%<span class="hljs-number">29%</span><span class="hljs-number">20%</span><span class="hljs-number">7</span>B%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20i</span>nt%<span class="hljs-number">20i</span>%<span class="hljs-number">20%</span><span class="hljs-number">3</span>D%<span class="hljs-number">200%</span><span class="hljs-number">3</span>B%<span class="hljs-number">0</span>A%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20</span><span class="hljs-keyword">while</span>%<span class="hljs-number">20%</span><span class="hljs-number">28i</span>%<span class="hljs-number">20%</span><span class="hljs-number">3</span>C%<span class="hljs-number">205%</span><span class="hljs-number">29%</span><span class="hljs-number">20%</span><span class="hljs-number">7</span>B%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20i</span>%<span class="hljs-number">2</span>B%<span class="hljs-number">2</span>B%<span class="hljs-number">3</span>B%<span class="hljs-number">0</span>A%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20i</span>f%<span class="hljs-number">20%</span><span class="hljs-number">28i</span>%<span class="hljs-number">20%</span><span class="hljs-number">3</span>D%<span class="hljs-number">3</span>D%<span class="hljs-number">202%</span><span class="hljs-number">29%</span><span class="hljs-number">20%</span><span class="hljs-number">7</span>B%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20</span><span class="hljs-keyword">continue</span>%<span class="hljs-number">3</span>B%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">7</span>D%<span class="hljs-number">0</span>A%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20i</span>f%<span class="hljs-number">20%</span><span class="hljs-number">28i</span>%<span class="hljs-number">20%</span><span class="hljs-number">3</span>D%<span class="hljs-number">3</span>D%<span class="hljs-number">204%</span><span class="hljs-number">29%</span><span class="hljs-number">20%</span><span class="hljs-number">7</span>B%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20</span>break%<span class="hljs-number">3</span>B%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">7</span>D%<span class="hljs-number">0</span>A%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20S</span>ystem.out.println%<span class="hljs-number">28%</span><span class="hljs-number">22%</span>E5%BD%<span class="hljs-number">93%</span>E5%<span class="hljs-number">89%</span><span class="hljs-number">8</span>D%<span class="hljs-number">20i</span>%<span class="hljs-number">20%</span><span class="hljs-number">3</span>D%<span class="hljs-number">20%</span><span class="hljs-number">22%</span><span class="hljs-number">20%</span><span class="hljs-number">2</span>B%<span class="hljs-number">20i</span>%<span class="hljs-number">29%</span><span class="hljs-number">3</span>B%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">7</span>D%<span class="hljs-number">0</span>A%<span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">20%</span><span class="hljs-number">7</span>D%<span class="hljs-number">0</span>A%<span class="hljs-number">7</span>D&amp;cumulative=<span class="hljs-literal">false</span>&amp;curInstr=<span class="hljs-number">0&amp;</span>heapPrimitives=nevernest&amp;mode=display&amp;origin=opt-frontend.js&amp;py=java&amp;rawInputLstJSON=%<span class="hljs-number">5</span>B%<span class="hljs-number">5</span>D&amp;textReferences=<span class="hljs-literal">false</span>
</code></pre>
<hr/>
<h3 data-id="heading-7">Python ä¸­çš„å˜é‡å¼•ç”¨ç¤ºä¾‹</h3>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªå¯ä»¥ç›´æ¥è¿è¡Œçš„ Python ç¤ºä¾‹ï¼Œç”¨äºç†è§£å˜é‡å’Œå¯¹è±¡ä¹‹é—´çš„å…³ç³»ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a1fd3fb4232544e19b72e4ae4e82f81f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgcGU3ZXI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769847968&amp;x-signature=vIOfQFqi5nAE9%2F2VPiQAgpDPA5Q%3D" alt="python è™šæ‹ŸåŒ–.gif" loading="lazy"/></p>
<pre><code class="hljs language-scss" lang="scss">    <span class="hljs-selector-tag">a</span> = <span class="hljs-selector-attr">[1, 2, 3]</span>
    <span class="hljs-selector-tag">b</span> = <span class="hljs-selector-tag">a</span>

    <span class="hljs-built_in">print</span>("a:", a)
    <span class="hljs-built_in">print</span>("b:", b)

    <span class="hljs-selector-tag">b</span><span class="hljs-selector-class">.append</span>(<span class="hljs-number">4</span>)

    <span class="hljs-built_in">print</span>("ä¿®æ”¹ b ä¹‹å")
    <span class="hljs-built_in">print</span>("a:", a)
    <span class="hljs-built_in">print</span>("b:", b)
</code></pre>
<p>åœ¨ PythonTutor ä¸­å¯ä»¥ç›´è§‚çœ‹åˆ°ï¼š</p>
<ul>
<li>a å’Œ b æŒ‡å‘åŒä¸€ä¸ªåˆ—è¡¨å¯¹è±¡</li>
<li>å¯¹ b çš„ä¿®æ”¹ä¼šåŒæ­¥å½±å“ a</li>
<li>å†…å­˜ä¸­åªå­˜åœ¨ä¸€ä¸ªåˆ—è¡¨å®ä¾‹</li>
</ul>
<p>å¤åˆ¶ä¸‹é¢çš„å†…å®¹åœ¨æµè§ˆå™¨åœ°å€è®¿é—®</p>
<pre><code class="hljs language-vbnet" lang="vbnet"><span class="hljs-symbol">https:</span>//pythontutor.com/render.html#code=a%<span class="hljs-number">20%</span><span class="hljs-number">3</span>D%<span class="hljs-number">20%</span><span class="hljs-number">5</span>B1,%<span class="hljs-number">202</span>,%<span class="hljs-number">203%</span><span class="hljs-number">5</span>D%<span class="hljs-number">0</span>Ab%<span class="hljs-number">20%</span><span class="hljs-number">3</span>D%<span class="hljs-number">20</span>a%<span class="hljs-number">0</span>A%<span class="hljs-number">0</span>Aprint%<span class="hljs-number">28%</span><span class="hljs-number">22</span>a%<span class="hljs-number">3</span>A%<span class="hljs-number">22</span>,%<span class="hljs-number">20</span>a%<span class="hljs-number">29%</span><span class="hljs-number">0</span>Aprint%<span class="hljs-number">28%</span><span class="hljs-number">22</span>b%<span class="hljs-number">3</span>A%<span class="hljs-number">22</span>,%<span class="hljs-number">20</span>b%<span class="hljs-number">29%</span><span class="hljs-number">0</span>A%<span class="hljs-number">0</span>Ab.append%<span class="hljs-number">284%</span><span class="hljs-number">29%</span><span class="hljs-number">0</span>A%<span class="hljs-number">0</span>Aprint%<span class="hljs-number">28%</span><span class="hljs-number">22%</span>E4%BF%AE%E6%<span class="hljs-number">94%</span>B9%<span class="hljs-number">20</span>b%<span class="hljs-number">20%</span>E4%B9%<span class="hljs-number">8</span>B%E5%<span class="hljs-number">90%</span><span class="hljs-number">8</span>E%<span class="hljs-number">22%</span><span class="hljs-number">29%</span><span class="hljs-number">0</span>Aprint%<span class="hljs-number">28%</span><span class="hljs-number">22</span>a%<span class="hljs-number">3</span>A%<span class="hljs-number">22</span>,%<span class="hljs-number">20</span>a%<span class="hljs-number">29%</span><span class="hljs-number">0</span>Aprint%<span class="hljs-number">28%</span><span class="hljs-number">22</span>b%<span class="hljs-number">3</span>A%<span class="hljs-number">22</span>,%<span class="hljs-number">20</span>b%<span class="hljs-number">29&amp;</span>cumulative=<span class="hljs-literal">false</span>&amp;curInstr=<span class="hljs-number">0&amp;</span>heapPrimitives=nevernest&amp;mode=display&amp;origin=opt-frontend.js&amp;py=<span class="hljs-number">311&amp;</span>rawInputLstJSON=%<span class="hljs-number">5</span>B%<span class="hljs-number">5</span>D&amp;textReferences=<span class="hljs-literal">false</span>
</code></pre>
<hr/>
<h3 data-id="heading-8">é€‚åˆä½¿ç”¨ PythonTutor çš„åœºæ™¯</h3>
<p>PythonTutor ç‰¹åˆ«é€‚åˆç”¨äºï¼š</p>
<ul>
<li>å­¦ä¹ åŸºç¡€è¯­æ³•å’Œæ§åˆ¶æµç¨‹</li>
<li>ç†è§£å¼‚å¸¸å¤„ç†é€»è¾‘</li>
<li>æŒæ¡å¾ªç¯ä¸åˆ†æ”¯çš„æ‰§è¡Œç»†èŠ‚</li>
<li>å­¦ä¹ æ•°æ®ç»“æ„å’Œå¼•ç”¨æ¨¡å‹</li>
</ul>
<p>å®ƒå¹¶ä¸æ˜¯è°ƒè¯•å¤§å‹é¡¹ç›®çš„å·¥å…·ï¼Œè€Œæ˜¯å¸®åŠ©å»ºç«‹æ­£ç¡®æ‰§è¡Œè®¤çŸ¥çš„å­¦ä¹ è¾…åŠ©å·¥å…·ã€‚</p>
<hr/>
<h3 data-id="heading-9">æ€»ç»“</h3>
<p>PythonTutor é€šè¿‡å¯è§†åŒ–çš„æ–¹å¼ï¼ŒæŠŠéšè—åœ¨è¿è¡Œæ—¶å†…éƒ¨çš„æ‰§è¡Œè¿‡ç¨‹å®Œæ•´å‘ˆç°å‡ºæ¥ã€‚æ— è®ºæ˜¯é“¾è¡¨ã€å¼‚å¸¸å¤„ç†ã€åˆ†æ”¯åˆ¤æ–­è¿˜æ˜¯å¾ªç¯æ§åˆ¶ï¼Œéƒ½å¯ä»¥é€šè¿‡å›¾å½¢åŒ–çš„æ–¹å¼è¢«æ¸…æ™°ç†è§£ï¼Œæ˜¯å­¦ä¹ å’Œæ•™å­¦ä¸­éå¸¸æœ‰ä»·å€¼çš„å·¥å…·ã€‚</p>
<h3 data-id="heading-10">æ‰©å±•</h3>
<p>IDEA æ’ä»¶ç¤¾åŒºé‡Œæœ‰ä¸€ä¸ªæ’ä»¶<code>Java Visualizer</code>å¯ä»¥åœ¨ IDEA é‡Œè°ƒè¯•æ—¶ä½¿ç”¨ç±»ä¼¼çš„æ•ˆæœï¼Œå•åªèƒ½ä¸‹ä¸€æ­¥ï¼Œä¸èƒ½å¾€å›èµ°ï¼Œéå¸¸å¥½ç”¨ï¼</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3345f9fcf3014fa3b4f0cad9211466c5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgcGU3ZXI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769847968&amp;x-signature=TU%2FOMtKSZ73XRM1yia3E%2FCjljNM%3D" alt="image.png" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ·±å…¥æµ…å‡ºå“ˆå¸Œè¡¨ï¼šåŸç†ã€å®ç°ä¸å®æˆ˜åº”ç”¨]]></title>    <link>https://juejin.cn/post/7598587406695219243</link>    <guid>https://juejin.cn/post/7598587406695219243</guid>    <pubDate>2026-01-24T06:40:16.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7598587406695219243" data-draft-id="7598587406695202859" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ·±å…¥æµ…å‡ºå“ˆå¸Œè¡¨ï¼šåŸç†ã€å®ç°ä¸å®æˆ˜åº”ç”¨"/> <meta itemprop="keywords" content="JavaScript,åç«¯,ç®—æ³•"/> <meta itemprop="datePublished" content="2026-01-24T06:40:16.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é¢œé…±"/> <meta itemprop="url" content="https://juejin.cn/user/905653309941495"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ·±å…¥æµ…å‡ºå“ˆå¸Œè¡¨ï¼šåŸç†ã€å®ç°ä¸å®æˆ˜åº”ç”¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/905653309941495/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é¢œé…±
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-24T06:40:16.000Z" title="Sat Jan 24 2026 06:40:16 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-24
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æ·±å…¥æµ…å‡ºå“ˆå¸Œè¡¨ï¼šåŸç†ã€å®ç°ä¸å®æˆ˜åº”ç”¨</h2>
<p>å“ˆå¸Œè¡¨ï¼ˆHash Tableï¼‰æ˜¯ç¼–ç¨‹ä¸­æœ€å¸¸ç”¨çš„é«˜æ•ˆæ•°æ®ç»“æ„ä¹‹ä¸€ï¼Œå‡ ä¹æ‰€æœ‰ç¼–ç¨‹è¯­è¨€çš„æ ‡å‡†åº“éƒ½æä¾›äº†å“ˆå¸Œè¡¨çš„å®ç°ï¼ˆå¦‚ JavaScript çš„ <code>Map</code>/<code>Object</code>ã€Java çš„ <code>HashMap</code>ã€Python çš„ <code>dict</code>ï¼‰ã€‚å®ƒä»¥ <strong>O(1) å¹³å‡æ—¶é—´å¤æ‚åº¦</strong> æ”¯æŒå¢åˆ æŸ¥æ”¹æ“ä½œï¼Œæ˜¯è§£å†³â€œå¿«é€Ÿé”®å€¼æ˜ å°„â€é—®é¢˜çš„é¦–é€‰æ–¹æ¡ˆã€‚æœ¬æ–‡å°†ä»åº•å±‚åŸç†å‡ºå‘ï¼Œæ‹†è§£å“ˆå¸Œè¡¨çš„æ ¸å¿ƒè®¾è®¡ï¼Œå®ç°ä¸¤ç§è§£å†³å“ˆå¸Œå†²çªçš„æ–¹æ¡ˆï¼Œå¹¶ç»“åˆå®æˆ˜æ¡ˆä¾‹ï¼ˆ<code>RandomizedCollection</code>ï¼‰å±•ç¤ºå“ˆå¸Œè¡¨çš„çµæ´»åº”ç”¨ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2307833f58b9407cbba184df472e24a5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aKc6YWx:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769841632&amp;x-signature=0p6nyNRilNjHLjWkMG6pjm%2FO17Q%3D" alt="hash_x.png" loading="lazy"/></p>
<h3 data-id="heading-1">ä¸€ã€å“ˆå¸Œè¡¨çš„æ ¸å¿ƒåŸç†ï¼šæ•°ç»„+å“ˆå¸Œå‡½æ•°</h3>
<p>å“ˆå¸Œè¡¨çš„æœ¬è´¨æ˜¯<strong>ç”¨æ•°ç»„å®ç°çš„é”®å€¼æ˜ å°„</strong>â€”â€”é€šè¿‡ä¸€ä¸ªâ€œå“ˆå¸Œå‡½æ•°â€å°†ä»»æ„ç±»å‹çš„ <code>key</code> è½¬åŒ–ä¸ºæ•°ç»„çš„åˆæ³•ç´¢å¼•ï¼Œä»è€Œå€ŸåŠ©æ•°ç»„ O(1) çš„éšæœºè®¿é—®ç‰¹æ€§å®ç°é«˜æ•ˆæ“ä½œã€‚</p>
<h4 data-id="heading-2">1.1 åŸºæœ¬ç»“æ„ï¼ˆä¼ªä»£ç ï¼‰</h4>
<pre><code class="hljs language-JavaScript" lang="JavaScript">
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MyHashMap</span> {
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
        <span class="hljs-comment">// åº•å±‚å­˜å‚¨æ•°ç»„</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">table</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>(<span class="hljs-number">1000</span>).<span class="hljs-title function_">fill</span>(<span class="hljs-literal">null</span>);
    }

    <span class="hljs-comment">// å¢/æ”¹ï¼škeyâ†’ç´¢å¼•â†’æ•°ç»„èµ‹å€¼</span>
    <span class="hljs-title function_">put</span>(<span class="hljs-params">key, value</span>) {
        <span class="hljs-keyword">const</span> index = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">hash</span>(key);
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">table</span>[index] = value;
    }

    <span class="hljs-comment">// æŸ¥ï¼škeyâ†’ç´¢å¼•â†’æ•°ç»„å–å€¼</span>
    <span class="hljs-title function_">get</span>(<span class="hljs-params">key</span>) {
        <span class="hljs-keyword">const</span> index = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">hash</span>(key);
        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">table</span>[index];
    }

    <span class="hljs-comment">// åˆ ï¼škeyâ†’ç´¢å¼•â†’æ•°ç»„ç½®ç©º</span>
    <span class="hljs-title function_">remove</span>(<span class="hljs-params">key</span>) {
        <span class="hljs-keyword">const</span> index = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">hash</span>(key);
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">table</span>[index] = <span class="hljs-literal">null</span>;
    }

    <span class="hljs-comment">// æ ¸å¿ƒï¼šå“ˆå¸Œå‡½æ•°ï¼ˆkeyâ†’åˆæ³•ç´¢å¼•ï¼‰</span>
    <span class="hljs-title function_">hash</span>(<span class="hljs-params">key</span>) {
        <span class="hljs-comment">// 1. è®¡ç®—keyçš„å“ˆå¸Œå€¼ï¼ˆä¿è¯ç›¸åŒkeyè¿”å›ç›¸åŒå€¼ï¼‰</span>
        <span class="hljs-keyword">let</span> h = key.<span class="hljs-title function_">toString</span>().<span class="hljs-title function_">charCodeAt</span>(<span class="hljs-number">0</span>);
        <span class="hljs-comment">// 2. ä¿è¯å“ˆå¸Œå€¼éè´Ÿï¼ˆä½è¿ç®—æ•ˆç‡é«˜äºç®—æœ¯è¿ç®—ï¼‰</span>
        h = h &amp; <span class="hljs-number">0x7fffffff</span>;
        <span class="hljs-comment">// 3. æ˜ å°„åˆ°æ•°ç»„åˆæ³•ç´¢å¼•ï¼ˆå–æ¨¡ï¼‰</span>
        <span class="hljs-keyword">return</span> h % <span class="hljs-variable language_">this</span>.<span class="hljs-property">table</span>.<span class="hljs-property">length</span>;
    }
}
</code></pre>
<h4 data-id="heading-3">1.2 å“ˆå¸Œå‡½æ•°çš„æ ¸å¿ƒè¦æ±‚</h4>
<p>å“ˆå¸Œå‡½æ•°æ˜¯å“ˆå¸Œè¡¨çš„â€œçµé­‚â€ï¼Œå¿…é¡»æ»¡è¶³ä¸‰ä¸ªæ¡ä»¶ï¼š</p>
<ol>
<li>
<p><strong>ç¡®å®šæ€§</strong>ï¼šç›¸åŒ <code>key</code> å¿…é¡»è¿”å›ç›¸åŒç´¢å¼•ï¼›</p>
</li>
<li>
<p><strong>é«˜æ•ˆæ€§</strong>ï¼šè®¡ç®—å¤æ‚åº¦ä¸º O(1)ï¼ˆå¦åˆ™å“ˆå¸Œè¡¨æ•´ä½“æ€§èƒ½é€€åŒ–ï¼‰ï¼›</p>
</li>
<li>
<p><strong>å‡åŒ€æ€§</strong>ï¼šå°½å¯èƒ½è®©ä¸åŒ <code>key</code> æ˜ å°„åˆ°ä¸åŒç´¢å¼•ï¼ˆå‡å°‘å†²çªï¼‰ã€‚</p>
</li>
</ol>
<h3 data-id="heading-4">äºŒã€å“ˆå¸Œå†²çªï¼šä¸å¯é¿å…çš„é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ</h3>
<p>ç”±äºå“ˆå¸Œå‡½æ•°æ˜¯â€œæ— ç©·ç©ºé—´â†’æœ‰é™ç©ºé—´â€çš„æ˜ å°„ï¼Œ<strong>å“ˆå¸Œå†²çª</strong>ï¼ˆä¸åŒ <code>key</code> æ˜ å°„åˆ°åŒä¸€ç´¢å¼•ï¼‰æ˜¯å¿…ç„¶å­˜åœ¨çš„ã€‚è§£å†³å†²çªçš„æ ¸å¿ƒæ–¹æ¡ˆæœ‰ä¸¤ç§ï¼š<strong>æ‹‰é“¾æ³•</strong>ï¼ˆä¸»æµï¼‰å’Œ <strong>çº¿æ€§æ¢æŸ¥æ³•</strong>ã€‚</p>
<h4 data-id="heading-5">2.1 æ‹‰é“¾æ³•ï¼šæ•°ç»„+é“¾è¡¨ï¼ˆç®€å•æ˜“å®ç°ï¼‰</h4>
<h5 data-id="heading-6">æ ¸å¿ƒæ€è·¯</h5>
<p>æ•°ç»„çš„æ¯ä¸ªä½ç½®å­˜å‚¨ä¸€ä¸ª<strong>é“¾è¡¨</strong>ï¼Œå½“å‘ç”Ÿå“ˆå¸Œå†²çªæ—¶ï¼Œå°†å†²çªçš„é”®å€¼å¯¹è¿½åŠ åˆ°é“¾è¡¨å°¾éƒ¨ã€‚</p>
<ul>
<li>
<p>å¢åˆ æŸ¥æ”¹ï¼šå…ˆé€šè¿‡å“ˆå¸Œå‡½æ•°æ‰¾åˆ°æ•°ç»„ç´¢å¼•ï¼Œå†æ“ä½œå¯¹åº”é“¾è¡¨ï¼›</p>
</li>
<li>
<p>ä¼˜åŠ¿ï¼šå®ç°ç®€å•ã€æ”¯æŒé«˜è´Ÿè½½å› å­ï¼ˆé“¾è¡¨å¯æ— é™å»¶ä¼¸ï¼‰ï¼›</p>
</li>
<li>
<p>åŠ£åŠ¿ï¼šé“¾è¡¨éå†æœ‰è½»å¾®æ€§èƒ½æŸè€—ï¼ˆä½†å¹³å‡ä»ä¸º O(1)ï¼‰ã€‚</p>
</li>
</ul>
<h5 data-id="heading-7">å®Œæ•´å®ç°ï¼ˆJavaScriptï¼‰</h5>
<pre><code class="hljs language-JavaScript" lang="JavaScript">
<span class="hljs-comment">// é“¾è¡¨èŠ‚ç‚¹ï¼šå­˜å‚¨key-value</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">HashNode</span> {
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params">key, val</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">key</span> = key;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">val</span> = val;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">next</span> = <span class="hljs-literal">null</span>;
    }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">HashTableChaining</span> {
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params">capacity = <span class="hljs-number">10</span></span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">capacity</span> = capacity; <span class="hljs-comment">// æ•°ç»„åˆå§‹å®¹é‡</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">size</span> = <span class="hljs-number">0</span>; <span class="hljs-comment">// å®é™…å­˜å‚¨çš„é”®å€¼å¯¹æ•°é‡</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">loadFactor</span> = <span class="hljs-number">0.75</span>; <span class="hljs-comment">// è´Ÿè½½å› å­ï¼ˆè§¦å‘æ‰©å®¹çš„é˜ˆå€¼ï¼‰</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">table</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>(capacity).<span class="hljs-title function_">fill</span>(<span class="hljs-literal">null</span>); <span class="hljs-comment">// åº•å±‚æ•°ç»„</span>
    }

    <span class="hljs-comment">// å“ˆå¸Œå‡½æ•°ï¼škeyâ†’ç´¢å¼•</span>
    <span class="hljs-title function_">hash</span>(<span class="hljs-params">key</span>) {
        <span class="hljs-keyword">let</span> h = <span class="hljs-keyword">typeof</span> key === <span class="hljs-string">'number'</span> ? key : key.<span class="hljs-title function_">toString</span>().<span class="hljs-title function_">charCodeAt</span>(<span class="hljs-number">0</span>);
        h = h &amp; <span class="hljs-number">0x7fffffff</span>; <span class="hljs-comment">// ä¿è¯éè´Ÿ</span>
        <span class="hljs-keyword">return</span> h % <span class="hljs-variable language_">this</span>.<span class="hljs-property">capacity</span>;
    }

    <span class="hljs-comment">// æ‰©å®¹ï¼šè§£å†³å“ˆå¸Œå†²çªé¢‘ç¹çš„é—®é¢˜</span>
    <span class="hljs-title function_">resize</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">const</span> oldTable = <span class="hljs-variable language_">this</span>.<span class="hljs-property">table</span>;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">capacity</span> *= <span class="hljs-number">2</span>; <span class="hljs-comment">// å®¹é‡ç¿»å€</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">table</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">capacity</span>).<span class="hljs-title function_">fill</span>(<span class="hljs-literal">null</span>);
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">size</span> = <span class="hljs-number">0</span>;

        <span class="hljs-comment">// é‡æ–°å“ˆå¸Œå¹¶è¿ç§»æ•°æ®</span>
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> node <span class="hljs-keyword">of</span> oldTable) {
            <span class="hljs-keyword">while</span> (node) {
                <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">put</span>(node.<span class="hljs-property">key</span>, node.<span class="hljs-property">val</span>);
                node = node.<span class="hljs-property">next</span>;
            }
        }
    }

    <span class="hljs-comment">// å¢/æ”¹</span>
    <span class="hljs-title function_">put</span>(<span class="hljs-params">key, val</span>) {
        <span class="hljs-comment">// è¾¾åˆ°è´Ÿè½½å› å­ï¼Œå…ˆæ‰©å®¹</span>
        <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">size</span> / <span class="hljs-variable language_">this</span>.<span class="hljs-property">capacity</span> &gt;= <span class="hljs-variable language_">this</span>.<span class="hljs-property">loadFactor</span>) {
            <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">resize</span>();
        }

        <span class="hljs-keyword">const</span> index = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">hash</span>(key);
        <span class="hljs-comment">// é“¾è¡¨ä¸ºç©ºï¼Œç›´æ¥æ–°å»ºèŠ‚ç‚¹</span>
        <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">table</span>[index]) {
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">table</span>[index] = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashNode</span>(key, val);
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">size</span>++;
            <span class="hljs-keyword">return</span>;
        }

        <span class="hljs-comment">// é“¾è¡¨éç©ºï¼šéå†æŸ¥æ‰¾ï¼ˆå­˜åœ¨åˆ™ä¿®æ”¹ï¼Œä¸å­˜åœ¨åˆ™è¿½åŠ ï¼‰</span>
        <span class="hljs-keyword">let</span> curr = <span class="hljs-variable language_">this</span>.<span class="hljs-property">table</span>[index];
        <span class="hljs-keyword">while</span> (curr) {
            <span class="hljs-keyword">if</span> (curr.<span class="hljs-property">key</span> === key) {
                curr.<span class="hljs-property">val</span> = val; <span class="hljs-comment">// å­˜åœ¨ï¼Œä¿®æ”¹å€¼</span>
                <span class="hljs-keyword">return</span>;
            }
            <span class="hljs-keyword">if</span> (!curr.<span class="hljs-property">next</span>) {
                curr.<span class="hljs-property">next</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashNode</span>(key, val); <span class="hljs-comment">// ä¸å­˜åœ¨ï¼Œè¿½åŠ åˆ°å°¾éƒ¨</span>
                <span class="hljs-variable language_">this</span>.<span class="hljs-property">size</span>++;
                <span class="hljs-keyword">return</span>;
            }
            curr = curr.<span class="hljs-property">next</span>;
        }
    }

    <span class="hljs-comment">// æŸ¥</span>
    <span class="hljs-title function_">get</span>(<span class="hljs-params">key</span>) {
        <span class="hljs-keyword">const</span> index = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">hash</span>(key);
        <span class="hljs-keyword">let</span> curr = <span class="hljs-variable language_">this</span>.<span class="hljs-property">table</span>[index];
        <span class="hljs-keyword">while</span> (curr) {
            <span class="hljs-keyword">if</span> (curr.<span class="hljs-property">key</span> === key) {
                <span class="hljs-keyword">return</span> curr.<span class="hljs-property">val</span>;
            }
            curr = curr.<span class="hljs-property">next</span>;
        }
        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>; <span class="hljs-comment">// æœªæ‰¾åˆ°</span>
    }

    <span class="hljs-comment">// åˆ </span>
    <span class="hljs-title function_">remove</span>(<span class="hljs-params">key</span>) {
        <span class="hljs-keyword">const</span> index = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">hash</span>(key);
        <span class="hljs-keyword">let</span> curr = <span class="hljs-variable language_">this</span>.<span class="hljs-property">table</span>[index];
        <span class="hljs-keyword">let</span> prev = <span class="hljs-literal">null</span>;

        <span class="hljs-keyword">while</span> (curr) {
            <span class="hljs-keyword">if</span> (curr.<span class="hljs-property">key</span> === key) {
                <span class="hljs-comment">// æ‰¾åˆ°èŠ‚ç‚¹ï¼šåˆ é™¤ï¼ˆåˆ†å¤´éƒ¨/ä¸­é—´èŠ‚ç‚¹ï¼‰</span>
                <span class="hljs-keyword">if</span> (prev) {
                    prev.<span class="hljs-property">next</span> = curr.<span class="hljs-property">next</span>;
                } <span class="hljs-keyword">else</span> {
                    <span class="hljs-variable language_">this</span>.<span class="hljs-property">table</span>[index] = curr.<span class="hljs-property">next</span>;
                }
                <span class="hljs-variable language_">this</span>.<span class="hljs-property">size</span>--;
                <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
            }
            prev = curr;
            curr = curr.<span class="hljs-property">next</span>;
        }
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>; <span class="hljs-comment">// æœªæ‰¾åˆ°</span>
    }
}

<span class="hljs-comment">// æµ‹è¯•æ‹‰é“¾æ³•å“ˆå¸Œè¡¨</span>
<span class="hljs-keyword">const</span> ht = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashTableChaining</span>();
ht.<span class="hljs-title function_">put</span>(<span class="hljs-string">"a"</span>, <span class="hljs-number">1</span>);
ht.<span class="hljs-title function_">put</span>(<span class="hljs-string">"b"</span>, <span class="hljs-number">2</span>);
ht.<span class="hljs-title function_">put</span>(<span class="hljs-string">"c"</span>, <span class="hljs-number">3</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(ht.<span class="hljs-title function_">get</span>(<span class="hljs-string">"a"</span>)); <span class="hljs-comment">// 1</span>
ht.<span class="hljs-title function_">remove</span>(<span class="hljs-string">"b"</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(ht.<span class="hljs-title function_">get</span>(<span class="hljs-string">"b"</span>)); <span class="hljs-comment">// null</span>
</code></pre>
<h4 data-id="heading-8">2.2 çº¿æ€§æ¢æŸ¥æ³•ï¼šå¼€æ”¾å¯»å€ï¼ˆå¤æ‚ä½†æ— é“¾è¡¨å¼€é”€ï¼‰</h4>
<h5 data-id="heading-9">æ ¸å¿ƒæ€è·¯</h5>
<p>ä¸ä½¿ç”¨é“¾è¡¨ï¼Œå½“å‘ç”Ÿå“ˆå¸Œå†²çªæ—¶ï¼Œ<strong>å‘åéå†æ•°ç»„æ‰¾ç©ºä½</strong>ï¼ˆåˆ°æ•°ç»„æœ«å°¾åˆ™ç»•å›å¤´éƒ¨ï¼‰ï¼š</p>
<ul>
<li>
<p>æ’å…¥ï¼šæ‰¾åˆ°ç©ºä½åç›´æ¥å­˜å…¥ï¼›</p>
</li>
<li>
<p>æŸ¥è¯¢ï¼šä»å“ˆå¸Œç´¢å¼•å¼€å§‹éå†ï¼Œç›´åˆ°æ‰¾åˆ°ç›®æ ‡æˆ–ç©ºä½ï¼›</p>
</li>
<li>
<p>åˆ é™¤ï¼šä¸èƒ½ç›´æ¥ç½®ç©ºï¼ˆä¼šä¸­æ–­æŸ¥è¯¢ï¼‰ï¼Œéœ€ç”¨<strong>å ä½ç¬¦</strong>æ ‡è®°ï¼ˆå¦‚ <code>DELETED</code>ï¼‰ã€‚</p>
</li>
</ul>
<h5 data-id="heading-10">å…³é”®éš¾ç‚¹</h5>
<ol>
<li>
<p><strong>ç¯å½¢æ•°ç»„</strong>ï¼šéå†åˆ°æ•°ç»„æœ«å°¾æ—¶éœ€ç»•å›å¤´éƒ¨ï¼›</p>
</li>
<li>
<p><strong>åˆ é™¤é€»è¾‘</strong>ï¼šç”¨å ä½ç¬¦æ›¿ä»£ç›´æ¥ç½®ç©ºï¼Œé¿å…æŸ¥è¯¢ä¸­æ–­ã€‚</p>
</li>
</ol>
<h5 data-id="heading-11">å®Œæ•´å®ç°ï¼ˆJavaScriptï¼‰</h5>
<pre><code class="hljs language-JavaScript" lang="JavaScript">
<span class="hljs-keyword">class</span> <span class="hljs-title class_">HashTableProbing</span> {
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params">capacity = <span class="hljs-number">10</span></span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">capacity</span> = capacity;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">size</span> = <span class="hljs-number">0</span>;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">loadFactor</span> = <span class="hljs-number">0.75</span>;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">table</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>(capacity).<span class="hljs-title function_">fill</span>(<span class="hljs-literal">null</span>);
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">DELETED</span> = <span class="hljs-title class_">Symbol</span>(<span class="hljs-string">'deleted'</span>); <span class="hljs-comment">// å ä½ç¬¦ï¼šæ ‡è®°å·²åˆ é™¤</span>
    }

    <span class="hljs-comment">// å“ˆå¸Œå‡½æ•°</span>
    <span class="hljs-title function_">hash</span>(<span class="hljs-params">key</span>) {
        <span class="hljs-keyword">let</span> h = <span class="hljs-keyword">typeof</span> key === <span class="hljs-string">'number'</span> ? key : key.<span class="hljs-title function_">toString</span>().<span class="hljs-title function_">charCodeAt</span>(<span class="hljs-number">0</span>);
        h = h &amp; <span class="hljs-number">0x7fffffff</span>;
        <span class="hljs-keyword">return</span> h % <span class="hljs-variable language_">this</span>.<span class="hljs-property">capacity</span>;
    }

    <span class="hljs-comment">// æ‰©å®¹</span>
    <span class="hljs-title function_">resize</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">const</span> oldTable = <span class="hljs-variable language_">this</span>.<span class="hljs-property">table</span>;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">capacity</span> *= <span class="hljs-number">2</span>;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">table</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">capacity</span>).<span class="hljs-title function_">fill</span>(<span class="hljs-literal">null</span>);
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">size</span> = <span class="hljs-number">0</span>;

        <span class="hljs-comment">// è¿ç§»æ•°æ®ï¼ˆè·³è¿‡å ä½ç¬¦ï¼‰</span>
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> entry <span class="hljs-keyword">of</span> oldTable) {
            <span class="hljs-keyword">if</span> (entry &amp;&amp; entry !== <span class="hljs-variable language_">this</span>.<span class="hljs-property">DELETED</span>) {
                <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">put</span>(entry.<span class="hljs-property">key</span>, entry.<span class="hljs-property">val</span>);
            }
        }
    }

    <span class="hljs-comment">// æŸ¥æ‰¾keyçš„ç´¢å¼•ï¼ˆæ ¸å¿ƒï¼šå¤„ç†å†²çª+å ä½ç¬¦ï¼‰</span>
    <span class="hljs-title function_">findIndex</span>(<span class="hljs-params">key</span>) {
        <span class="hljs-keyword">let</span> index = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">hash</span>(key);
        <span class="hljs-keyword">let</span> start = index;

        <span class="hljs-comment">// ç¯å½¢éå†ï¼šç›´åˆ°æ‰¾åˆ°ç›®æ ‡/ç©ºä½/éå†å®Œ</span>
        <span class="hljs-keyword">while</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">table</span>[index] !== <span class="hljs-literal">null</span>) {
            <span class="hljs-comment">// æ‰¾åˆ°ç›®æ ‡key</span>
            <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">table</span>[index] !== <span class="hljs-variable language_">this</span>.<span class="hljs-property">DELETED</span> &amp;&amp; <span class="hljs-variable language_">this</span>.<span class="hljs-property">table</span>[index].<span class="hljs-property">key</span> === key) {
                <span class="hljs-keyword">return</span> index;
            }
            <span class="hljs-comment">// ç»•å›å¤´éƒ¨</span>
            index = (index + <span class="hljs-number">1</span>) % <span class="hljs-variable language_">this</span>.<span class="hljs-property">capacity</span>;
            <span class="hljs-comment">// éå†å®Œä¸€åœˆä»æœªæ‰¾åˆ°</span>
            <span class="hljs-keyword">if</span> (index === start) {
                <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>;
            }
        }
        <span class="hljs-keyword">return</span> index; <span class="hljs-comment">// è¿”å›ç©ºä½ç´¢å¼•</span>
    }

    <span class="hljs-comment">// å¢/æ”¹</span>
    <span class="hljs-title function_">put</span>(<span class="hljs-params">key, val</span>) {
        <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">size</span> / <span class="hljs-variable language_">this</span>.<span class="hljs-property">capacity</span> &gt;= <span class="hljs-variable language_">this</span>.<span class="hljs-property">loadFactor</span>) {
            <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">resize</span>();
        }

        <span class="hljs-keyword">const</span> index = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">findIndex</span>(key);
        <span class="hljs-comment">// æœªæ‰¾åˆ°ï¼šæ’å…¥æ–°å€¼</span>
        <span class="hljs-keyword">if</span> (index === -<span class="hljs-number">1</span> || <span class="hljs-variable language_">this</span>.<span class="hljs-property">table</span>[index] === <span class="hljs-literal">null</span> || <span class="hljs-variable language_">this</span>.<span class="hljs-property">table</span>[index] === <span class="hljs-variable language_">this</span>.<span class="hljs-property">DELETED</span>) {
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">table</span>[index] = { key, val };
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">size</span>++;
            <span class="hljs-keyword">return</span>;
        }
        <span class="hljs-comment">// æ‰¾åˆ°ï¼šä¿®æ”¹å€¼</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">table</span>[index].<span class="hljs-property">val</span> = val;
    }

    <span class="hljs-comment">// æŸ¥</span>
    <span class="hljs-title function_">get</span>(<span class="hljs-params">key</span>) {
        <span class="hljs-keyword">const</span> index = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">findIndex</span>(key);
        <span class="hljs-keyword">if</span> (index === -<span class="hljs-number">1</span> || <span class="hljs-variable language_">this</span>.<span class="hljs-property">table</span>[index] === <span class="hljs-literal">null</span> || <span class="hljs-variable language_">this</span>.<span class="hljs-property">table</span>[index] === <span class="hljs-variable language_">this</span>.<span class="hljs-property">DELETED</span>) {
            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
        }
        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">table</span>[index].<span class="hljs-property">val</span>;
    }

    <span class="hljs-comment">// åˆ ï¼šç”¨å ä½ç¬¦æ ‡è®°</span>
    <span class="hljs-title function_">remove</span>(<span class="hljs-params">key</span>) {
        <span class="hljs-keyword">const</span> index = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">findIndex</span>(key);
        <span class="hljs-keyword">if</span> (index === -<span class="hljs-number">1</span> || <span class="hljs-variable language_">this</span>.<span class="hljs-property">table</span>[index] === <span class="hljs-literal">null</span> || <span class="hljs-variable language_">this</span>.<span class="hljs-property">table</span>[index] === <span class="hljs-variable language_">this</span>.<span class="hljs-property">DELETED</span>) {
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">table</span>[index] = <span class="hljs-variable language_">this</span>.<span class="hljs-property">DELETED</span>;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">size</span>--;
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }
}

<span class="hljs-comment">// æµ‹è¯•çº¿æ€§æ¢æŸ¥æ³•å“ˆå¸Œè¡¨</span>
<span class="hljs-keyword">const</span> htProbe = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashTableProbing</span>();
htProbe.<span class="hljs-title function_">put</span>(<span class="hljs-number">1</span>, <span class="hljs-number">10</span>);
htProbe.<span class="hljs-title function_">put</span>(<span class="hljs-number">11</span>, <span class="hljs-number">20</span>); <span class="hljs-comment">// å“ˆå¸Œå†²çªï¼ˆ1%10=1ï¼Œ11%10=1ï¼‰</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(htProbe.<span class="hljs-title function_">get</span>(<span class="hljs-number">11</span>)); <span class="hljs-comment">// 20</span>
htProbe.<span class="hljs-title function_">remove</span>(<span class="hljs-number">1</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(htProbe.<span class="hljs-title function_">get</span>(<span class="hljs-number">1</span>)); <span class="hljs-comment">// null</span>
</code></pre>
<h3 data-id="heading-12">ä¸‰ã€å“ˆå¸Œè¡¨çš„è¿›é˜¶ç‰¹æ€§</h3>
<h4 data-id="heading-13">3.1 è´Ÿè½½å› å­ä¸æ‰©å®¹</h4>
<p>è´Ÿè½½å› å­ = å·²å­˜å‚¨å…ƒç´ æ•° / æ•°ç»„å®¹é‡ï¼Œæ˜¯å“ˆå¸Œè¡¨æ‰©å®¹çš„æ ¸å¿ƒä¾æ®ï¼ˆé€šå¸¸è®¾ä¸º 0.75ï¼‰ï¼š</p>
<ul>
<li>
<p>è´Ÿè½½å› å­è¿‡é«˜ï¼šå“ˆå¸Œå†²çªé¢‘ç¹ï¼Œæ€§èƒ½é€€åŒ–ï¼›</p>
</li>
<li>
<p>è´Ÿè½½å› å­è¿‡ä½ï¼šæ•°ç»„ç©ºé—´æµªè´¹ï¼›</p>
</li>
<li>
<p>æ‰©å®¹é€»è¾‘ï¼šå®¹é‡ç¿»å€ï¼Œé‡æ–°å“ˆå¸Œå¹¶è¿ç§»æ‰€æœ‰æ•°æ®ï¼ˆä¿è¯åç»­å†²çªå‡å°‘ï¼‰ã€‚</p>
</li>
</ul>
<h4 data-id="heading-14">3.2 æœ‰åºå“ˆå¸Œè¡¨ï¼šå“ˆå¸Œé“¾è¡¨ï¼ˆLinkedHashMapï¼‰</h4>
<p>æ ‡å‡†å“ˆå¸Œè¡¨çš„éå†é¡ºåºæ˜¯æ— åºçš„ï¼Œè‹¥éœ€ä¿ç•™æ’å…¥é¡ºåºï¼Œå¯ç»“åˆ<strong>å“ˆå¸Œè¡¨+åŒå‘é“¾è¡¨</strong>å®ç°ï¼š</p>
<ul>
<li>
<p>å“ˆå¸Œè¡¨ï¼šå¿«é€ŸæŸ¥æ‰¾èŠ‚ç‚¹ï¼ˆO(1)ï¼‰ï¼›</p>
</li>
<li>
<p>åŒå‘é“¾è¡¨ï¼šç»´æŠ¤æ’å…¥é¡ºåºï¼ˆåˆ é™¤èŠ‚ç‚¹ O(1)ï¼‰ã€‚</p>
</li>
</ul>
<pre><code class="hljs language-JavaScript" lang="JavaScript">
<span class="hljs-comment">// åŒå‘é“¾è¡¨èŠ‚ç‚¹</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">LinkedNode</span> {
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params">key, val</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">key</span> = key;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">val</span> = val;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">prev</span> = <span class="hljs-literal">null</span>;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">next</span> = <span class="hljs-literal">null</span>;
    }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">LinkedHashMap</span> {
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
        <span class="hljs-comment">// å“¨å…µèŠ‚ç‚¹ï¼šç®€åŒ–é“¾è¡¨æ“ä½œ</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">head</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedNode</span>(<span class="hljs-literal">null</span>, <span class="hljs-literal">null</span>);
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">tail</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedNode</span>(<span class="hljs-literal">null</span>, <span class="hljs-literal">null</span>);
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">head</span>.<span class="hljs-property">next</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">tail</span>;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">tail</span>.<span class="hljs-property">prev</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">head</span>;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">map</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>(); <span class="hljs-comment">// å“ˆå¸Œè¡¨ï¼škeyâ†’èŠ‚ç‚¹</span>
    }

    <span class="hljs-comment">// æ–°å¢èŠ‚ç‚¹åˆ°é“¾è¡¨å°¾éƒ¨</span>
    <span class="hljs-title function_">addLast</span>(<span class="hljs-params">node</span>) {
        <span class="hljs-keyword">const</span> prev = <span class="hljs-variable language_">this</span>.<span class="hljs-property">tail</span>.<span class="hljs-property">prev</span>;
        prev.<span class="hljs-property">next</span> = node;
        node.<span class="hljs-property">prev</span> = prev;
        node.<span class="hljs-property">next</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">tail</span>;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">tail</span>.<span class="hljs-property">prev</span> = node;
    }

    <span class="hljs-comment">// ç§»é™¤é“¾è¡¨èŠ‚ç‚¹</span>
    <span class="hljs-title function_">removeNode</span>(<span class="hljs-params">node</span>) {
        <span class="hljs-keyword">const</span> prev = node.<span class="hljs-property">prev</span>;
        <span class="hljs-keyword">const</span> next = node.<span class="hljs-property">next</span>;
        prev.<span class="hljs-property">next</span> = next;
        next.<span class="hljs-property">prev</span> = prev;
    }

    <span class="hljs-comment">// å¢/æ”¹</span>
    <span class="hljs-title function_">put</span>(<span class="hljs-params">key, val</span>) {
        <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">map</span>.<span class="hljs-title function_">has</span>(key)) {
            <span class="hljs-keyword">const</span> node = <span class="hljs-variable language_">this</span>.<span class="hljs-property">map</span>.<span class="hljs-title function_">get</span>(key);
            node.<span class="hljs-property">val</span> = val;
            <span class="hljs-keyword">return</span>;
        }
        <span class="hljs-keyword">const</span> newNode = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedNode</span>(key, val);
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">addLast</span>(newNode);
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">map</span>.<span class="hljs-title function_">set</span>(key, newNode);
    }

    <span class="hljs-comment">// æŸ¥</span>
    <span class="hljs-title function_">get</span>(<span class="hljs-params">key</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">map</span>.<span class="hljs-title function_">has</span>(key) ? <span class="hljs-variable language_">this</span>.<span class="hljs-property">map</span>.<span class="hljs-title function_">get</span>(key).<span class="hljs-property">val</span> : <span class="hljs-literal">null</span>;
    }

    <span class="hljs-comment">// åˆ </span>
    <span class="hljs-title function_">remove</span>(<span class="hljs-params">key</span>) {
        <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">map</span>.<span class="hljs-title function_">has</span>(key)) <span class="hljs-keyword">return</span>;
        <span class="hljs-keyword">const</span> node = <span class="hljs-variable language_">this</span>.<span class="hljs-property">map</span>.<span class="hljs-title function_">get</span>(key);
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">removeNode</span>(node);
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">map</span>.<span class="hljs-title function_">delete</span>(key);
    }

    <span class="hljs-comment">// æŒ‰æ’å…¥é¡ºåºéå†key</span>
    <span class="hljs-title function_">keys</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">const</span> res = [];
        <span class="hljs-keyword">let</span> curr = <span class="hljs-variable language_">this</span>.<span class="hljs-property">head</span>.<span class="hljs-property">next</span>;
        <span class="hljs-keyword">while</span> (curr !== <span class="hljs-variable language_">this</span>.<span class="hljs-property">tail</span>) {
            res.<span class="hljs-title function_">push</span>(curr.<span class="hljs-property">key</span>);
            curr = curr.<span class="hljs-property">next</span>;
        }
        <span class="hljs-keyword">return</span> res;
    }
}

<span class="hljs-comment">// æµ‹è¯•æœ‰åºå“ˆå¸Œè¡¨</span>
<span class="hljs-keyword">const</span> lhm = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedHashMap</span>();
lhm.<span class="hljs-title function_">put</span>(<span class="hljs-string">"a"</span>, <span class="hljs-number">1</span>);
lhm.<span class="hljs-title function_">put</span>(<span class="hljs-string">"b"</span>, <span class="hljs-number">2</span>);
lhm.<span class="hljs-title function_">put</span>(<span class="hljs-string">"c"</span>, <span class="hljs-number">3</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(lhm.<span class="hljs-title function_">keys</span>()); <span class="hljs-comment">// ["a", "b", "c"]</span>
lhm.<span class="hljs-title function_">remove</span>(<span class="hljs-string">"b"</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(lhm.<span class="hljs-title function_">keys</span>()); <span class="hljs-comment">// ["a", "c"]</span>
</code></pre>
<h4 data-id="heading-15">3.3 æ”¯æŒéšæœºè®¿é—®çš„å“ˆå¸Œè¡¨</h4>
<p>è‹¥éœ€å“ˆå¸Œè¡¨æ”¯æŒâ€œéšæœºè¿”å›é”®â€ä¸”<strong>å…ƒç´ ä¸é‡å¤</strong>ï¼ˆå¦‚ <code>MyArrayHashMap</code>ï¼‰ï¼Œå¯ç»“åˆ<strong>æ•°ç»„+å“ˆå¸Œè¡¨</strong>å®ç°ï¼Œæ ¸å¿ƒæ˜¯ç”¨æ•°ç»„å­˜å‚¨é”®å€¼å¯¹ã€å“ˆå¸Œè¡¨æ˜ å°„é”®ä¸ä¸‹æ ‡ï¼Œå…¼é¡¾ O(1) å¢åˆ æŸ¥ä¸éšæœºè®¿é—®ã€‚</p>
<ul>
<li>
<p>æ•°ç»„ï¼šå­˜å‚¨ <code>Node</code> å®ä¾‹ï¼ˆå« key å’Œ valï¼‰ï¼Œæ”¯æŒ O(1) éšæœºè®¿é—®ï¼Œä¿è¯éšæœºè¿”å›é”®çš„ç­‰æ¦‚ç‡æ€§ï¼›</p>
</li>
<li>
<p>å“ˆå¸Œè¡¨ï¼škeyâ†’å…ƒç´ åœ¨æ•°ç»„ä¸­çš„ä¸‹æ ‡ï¼ˆä¸€ä¸€å¯¹åº”ï¼Œå› å…ƒç´ ä¸é‡å¤ï¼‰ï¼Œæ”¯æŒ O(1) å®šä½å…ƒç´ ï¼Œè§„é¿æ•°ç»„éå†å¼€é”€ã€‚</p>
</li>
</ul>
<pre><code class="hljs language-JavaScript" lang="JavaScript">

<span class="hljs-comment">// é”®å€¼å¯¹èŠ‚ç‚¹ï¼šå°è£…keyå’Œval</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Node</span> {
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params">key, val</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">key</span> = key;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">val</span> = val;
    }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">MyArrayHashMap</span> {
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
        <span class="hljs-comment">// å“ˆå¸Œè¡¨ï¼šå­˜å‚¨keyä¸å¯¹åº”åœ¨æ•°ç»„ä¸­çš„ä¸‹æ ‡ï¼Œå®ç°O(1)å®šä½</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">map</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();
        <span class="hljs-comment">// æ•°ç»„ï¼šå­˜å‚¨Nodeå®ä¾‹ï¼Œæ”¯æŒO(1)éšæœºè®¿é—®</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">arr</span> = [];
    }

    <span class="hljs-comment">/**
     * æŒ‰keyæŸ¥è¯¢å€¼
     * <span class="hljs-doctag">@param</span> {<span class="hljs-type">*</span>} <span class="hljs-variable">key</span> - è¦æŸ¥è¯¢çš„é”®
     * <span class="hljs-doctag">@return</span> {<span class="hljs-type">*</span>} å¯¹åº”çš„å€¼ï¼ˆä¸å­˜åœ¨è¿”å›nullï¼‰
     */</span>
    <span class="hljs-title function_">get</span>(<span class="hljs-params">key</span>) {
        <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">map</span>.<span class="hljs-title function_">has</span>(key)) {
            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
        }
        <span class="hljs-comment">// å“ˆå¸Œè¡¨å–ä¸‹æ ‡ï¼Œæ•°ç»„ç›´æ¥è®¿é—®</span>
        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">arr</span>[<span class="hljs-variable language_">this</span>.<span class="hljs-property">map</span>.<span class="hljs-title function_">get</span>(key)].<span class="hljs-property">val</span>;
    }

    <span class="hljs-comment">/**
     * å¢/æ”¹é”®å€¼å¯¹ï¼ˆå…ƒç´ ä¸é‡å¤ï¼Œå·²å­˜åœ¨åˆ™ä¿®æ”¹å€¼ï¼‰
     * <span class="hljs-doctag">@param</span> {<span class="hljs-type">*</span>} <span class="hljs-variable">key</span> - é”®
     * <span class="hljs-doctag">@param</span> {<span class="hljs-type">*</span>} <span class="hljs-variable">val</span> - å€¼
     */</span>
    <span class="hljs-title function_">put</span>(<span class="hljs-params">key, val</span>) {
        <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">containsKey</span>(key)) {
            <span class="hljs-comment">// å·²å­˜åœ¨ï¼šé€šè¿‡ä¸‹æ ‡ä¿®æ”¹å¯¹åº”èŠ‚ç‚¹çš„å€¼</span>
            <span class="hljs-keyword">let</span> i = <span class="hljs-variable language_">this</span>.<span class="hljs-property">map</span>.<span class="hljs-title function_">get</span>(key);
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">arr</span>[i].<span class="hljs-property">val</span> = val;
            <span class="hljs-keyword">return</span>;
        }
        <span class="hljs-comment">// æ–°å¢ï¼šæ•°ç»„å°¾éƒ¨æ·»åŠ èŠ‚ç‚¹ï¼Œå“ˆå¸Œè¡¨è®°å½•ä¸‹æ ‡</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">arr</span>.<span class="hljs-title function_">push</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Node</span>(key, val));
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">map</span>.<span class="hljs-title function_">set</span>(key, <span class="hljs-variable language_">this</span>.<span class="hljs-property">arr</span>.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>);
    }

    <span class="hljs-comment">/**
     * æŒ‰keyåˆ é™¤é”®å€¼å¯¹
     * <span class="hljs-doctag">@param</span> {<span class="hljs-type">*</span>} <span class="hljs-variable">key</span> - è¦åˆ é™¤çš„é”®
     */</span>
    <span class="hljs-title function_">remove</span>(<span class="hljs-params">key</span>) {
        <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">map</span>.<span class="hljs-title function_">has</span>(key)) {
            <span class="hljs-keyword">return</span>;
        }

        <span class="hljs-keyword">const</span> index = <span class="hljs-variable language_">this</span>.<span class="hljs-property">map</span>.<span class="hljs-title function_">get</span>(key); <span class="hljs-comment">// å¾…åˆ é™¤å…ƒç´ ä¸‹æ ‡</span>
        <span class="hljs-keyword">const</span> node = <span class="hljs-variable language_">this</span>.<span class="hljs-property">arr</span>[index]; <span class="hljs-comment">// å¾…åˆ é™¤èŠ‚ç‚¹</span>
        <span class="hljs-keyword">const</span> lastIndex = <span class="hljs-variable language_">this</span>.<span class="hljs-property">arr</span>.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>;
        <span class="hljs-keyword">const</span> lastNode = <span class="hljs-variable language_">this</span>.<span class="hljs-property">arr</span>[lastIndex]; <span class="hljs-comment">// æ•°ç»„æœ€åä¸€ä¸ªèŠ‚ç‚¹</span>

        <span class="hljs-comment">// 1. äº¤æ¢å¾…åˆ é™¤èŠ‚ç‚¹ä¸æœ€åä¸€ä¸ªèŠ‚ç‚¹ä½ç½®ï¼ˆé¿å…æ•°ç»„ç§»ä½ï¼Œä¿è¯O(1)ï¼‰</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">arr</span>[index] = lastNode;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">arr</span>[lastIndex] = node;

        <span class="hljs-comment">// 2. æ›´æ–°æœ€åä¸€ä¸ªèŠ‚ç‚¹åœ¨å“ˆå¸Œè¡¨ä¸­çš„ä¸‹æ ‡æ˜ å°„</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">map</span>.<span class="hljs-title function_">set</span>(lastNode.<span class="hljs-property">key</span>, index);

        <span class="hljs-comment">// 3. æ•°ç»„åˆ é™¤æœ€åä¸€ä¸ªå…ƒç´ ï¼ˆO(1)æ“ä½œï¼‰</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">arr</span>.<span class="hljs-title function_">pop</span>();

        <span class="hljs-comment">// 4. å“ˆå¸Œè¡¨åˆ é™¤å¾…åˆ é™¤èŠ‚ç‚¹çš„key</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">map</span>.<span class="hljs-title function_">delete</span>(node.<span class="hljs-property">key</span>);
    }

    <span class="hljs-comment">/**
     * éšæœºè¿”å›ä¸€ä¸ªé”®ï¼ˆç­‰æ¦‚ç‡ï¼‰
     * <span class="hljs-doctag">@return</span> {<span class="hljs-type">*</span>} éšæœºé”®
     */</span>
    <span class="hljs-title function_">randomKey</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">const</span> n = <span class="hljs-variable language_">this</span>.<span class="hljs-property">arr</span>.<span class="hljs-property">length</span>;
        <span class="hljs-keyword">if</span> (n === <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>; <span class="hljs-comment">// è¾¹ç•Œå¤„ç†ï¼šç©ºè¡¨è¿”å›null</span>
        <span class="hljs-keyword">const</span> randomIndex = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * n);
        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">arr</span>[randomIndex].<span class="hljs-property">key</span>;
    }

    <span class="hljs-comment">/**
     * åˆ¤æ–­keyæ˜¯å¦å­˜åœ¨
     * <span class="hljs-doctag">@param</span> {<span class="hljs-type">*</span>} <span class="hljs-variable">key</span> - è¦åˆ¤æ–­çš„é”®
     * <span class="hljs-doctag">@return</span> {<span class="hljs-type">boolean</span>} å­˜åœ¨è¿”å›trueï¼Œå¦åˆ™false
     */</span>
    <span class="hljs-title function_">containsKey</span>(<span class="hljs-params">key</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">map</span>.<span class="hljs-title function_">has</span>(key);
    }

    <span class="hljs-comment">/**
     * è·å–é”®å€¼å¯¹æ•°é‡
     * <span class="hljs-doctag">@return</span> {<span class="hljs-type">number</span>} æ•°é‡
     */</span>
    <span class="hljs-title function_">size</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">map</span>.<span class="hljs-property">size</span>;
    }
}

<span class="hljs-comment">// æµ‹è¯•ï¼ˆéªŒè¯ä¸é‡å¤ç‰¹æ€§ã€å¢åˆ æŸ¥åŠéšæœºè®¿é—®ï¼‰</span>
<span class="hljs-keyword">let</span> map = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyArrayHashMap</span>();
map.<span class="hljs-title function_">put</span>(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>);
map.<span class="hljs-title function_">put</span>(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>);
map.<span class="hljs-title function_">put</span>(<span class="hljs-number">3</span>, <span class="hljs-number">3</span>);
map.<span class="hljs-title function_">put</span>(<span class="hljs-number">4</span>, <span class="hljs-number">4</span>);
map.<span class="hljs-title function_">put</span>(<span class="hljs-number">5</span>, <span class="hljs-number">5</span>);

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(map.<span class="hljs-title function_">get</span>(<span class="hljs-number">1</span>)); <span class="hljs-comment">// 1ï¼ˆæŸ¥è¯¢æ­£å¸¸ï¼‰</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(map.<span class="hljs-title function_">randomKey</span>()); <span class="hljs-comment">// éšæœºè¿”å›1-5ä¸­çš„ä¸€ä¸ªé”®</span>

map.<span class="hljs-title function_">remove</span>(<span class="hljs-number">4</span>); <span class="hljs-comment">// åˆ é™¤key=4çš„é”®å€¼å¯¹</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(map.<span class="hljs-title function_">randomKey</span>()); <span class="hljs-comment">// éšæœºè¿”å›1-3ã€5ä¸­çš„ä¸€ä¸ªé”®</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(map.<span class="hljs-title function_">randomKey</span>()); <span class="hljs-comment">// å†æ¬¡éšæœºï¼Œæ— é‡å¤å…ƒç´ å¹²æ‰°</span>

</code></pre>
<h3 data-id="heading-16">å››ã€å“ˆå¸Œè¡¨çš„å…³é”®æ³¨æ„äº‹é¡¹</h3>
<h4 data-id="heading-17">4.1 ä¸è¦æ··æ·†â€œMapæ¥å£â€å’Œâ€œHashMapå®ç°â€</h4>
<ul>
<li>
<p><code>Map</code> æ˜¯æ¥å£ï¼ˆæŠ½è±¡å®šä¹‰ï¼‰ï¼Œä¸ä¿è¯æ—¶é—´å¤æ‚åº¦ï¼›</p>
</li>
<li>
<p><code>HashMap</code> æ˜¯å®ç°ï¼ˆå“ˆå¸Œè¡¨ï¼‰ï¼Œå¹³å‡ O(1)ï¼›<code>TreeMap</code> æ˜¯å®ç°ï¼ˆçº¢é»‘æ ‘ï¼‰ï¼ŒO(logN)ã€‚</p>
</li>
</ul>
<h4 data-id="heading-18">4.2 keyå¿…é¡»æ˜¯ä¸å¯å˜ç±»å‹</h4>
<p>è‹¥ key æ˜¯å¯å˜ç±»å‹ï¼ˆå¦‚æ•°ç»„ã€å¯¹è±¡ï¼‰ï¼Œä¿®æ”¹åå“ˆå¸Œå€¼ä¼šå˜åŒ–ï¼Œå¯¼è‡´æ— æ³•æ‰¾åˆ°åŸæ•°æ®ï¼Œç”šè‡³å†…å­˜æ³„æ¼ã€‚</p>
<h4 data-id="heading-19">4.3 æ‹‰é“¾æ³• vs çº¿æ€§æ¢æŸ¥æ³•</h4>






























<table><thead><tr><th>ç‰¹æ€§</th><th>æ‹‰é“¾æ³•</th><th>çº¿æ€§æ¢æŸ¥æ³•</th></tr></thead><tbody><tr><td>å®ç°éš¾åº¦</td><td>ç®€å•</td><td>å¤æ‚ï¼ˆéœ€å¤„ç†ç¯å½¢/å ä½ç¬¦ï¼‰</td></tr><tr><td>è´Ÿè½½å› å­</td><td>æ— ä¸Šé™ï¼ˆé“¾è¡¨å¯å»¶ä¼¸ï¼‰</td><td>é€šå¸¸â‰¤0.75ï¼ˆå¦åˆ™æ€§èƒ½å·®ï¼‰</td></tr><tr><td>æ€§èƒ½</td><td>å¹³å‡O(1)ï¼ˆé“¾è¡¨éå†ï¼‰</td><td>å¹³å‡O(1)ï¼ˆç¼“å­˜å‹å¥½ï¼‰</td></tr><tr><td>ç©ºé—´åˆ©ç”¨ç‡</td><td>è¾ƒä½ï¼ˆé“¾è¡¨èŠ‚ç‚¹å¼€é”€ï¼‰</td><td>è¾ƒé«˜ï¼ˆæ— é¢å¤–èŠ‚ç‚¹ï¼‰</td></tr></tbody></table>
<h3 data-id="heading-20">äº”ã€æ€»ç»“</h3>
<p>å“ˆå¸Œè¡¨çš„æ ¸å¿ƒæ˜¯â€œæ•°ç»„+å“ˆå¸Œå‡½æ•°â€ï¼Œè§£å†³å†²çªçš„ä¸¤å¤§æ–¹æ¡ˆå„æœ‰ä¼˜åŠ£ï¼ˆæ‹‰é“¾æ³•æ˜¯ä¸»æµï¼‰ã€‚å®é™…å¼€å‘ä¸­ï¼Œéœ€æ ¹æ®åœºæ™¯é€‰æ‹©ä¸åŒçš„å“ˆå¸Œè¡¨å˜ä½“ï¼š</p>
<ul>
<li>
<p>æ™®é€šé”®å€¼æ˜ å°„ï¼šç”¨æ ‡å‡†å“ˆå¸Œè¡¨ï¼ˆå¦‚ <code>Map</code>ï¼‰ï¼›</p>
</li>
<li>
<p>æœ‰åºéå†ï¼šç”¨å“ˆå¸Œé“¾è¡¨ï¼ˆLinkedHashMapï¼‰ï¼›</p>
</li>
<li>
<p>éšæœºè®¿é—®+å…ƒç´ ä¸é‡å¤ï¼šç”¨æ•°ç»„+æ™®é€šå“ˆå¸Œè¡¨ç»„åˆï¼ˆå¦‚ ArrayHashMapï¼‰ï¼Œé€šè¿‡èŠ‚ç‚¹äº¤æ¢å®ç°O(1)åˆ é™¤ï¼›</p>
</li>
<li>
<p>é«˜æ€§èƒ½åœºæ™¯ï¼šä¼˜å…ˆé€‰æ‹©æ‹‰é“¾æ³•ï¼ˆå®ç°ç®€å•ã€ä¸æ˜“å‡ºé”™ï¼‰ã€‚</p>
</li>
</ul>
<h3 data-id="heading-21">å…­ã€ç»ƒä¹ </h3>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fleetcode.cn%2Fproblems%2Finsert-delete-getrandom-o1%2F" target="_blank" title="https://leetcode.cn/problems/insert-delete-getrandom-o1/" ref="nofollow noopener noreferrer">380. O(1) æ—¶é—´æ’å…¥ã€åˆ é™¤å’Œè·å–éšæœºå…ƒç´ </a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fleetcode.cn%2Fproblems%2Finsert-delete-getrandom-o1-duplicates-allowed%2F" target="_blank" title="https://leetcode.cn/problems/insert-delete-getrandom-o1-duplicates-allowed/" ref="nofollow noopener noreferrer">381. O(1) æ—¶é—´æ’å…¥ã€åˆ é™¤å’Œè·å–éšæœºå…ƒç´  - å…è®¸é‡å¤</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»â€œæ—¥å¿—æŠ“ä¸åˆ°â€åˆ°â€œå…¨é“¾è·¯å¯è¿½æº¯â€ï¼šä¸€æ¬¡ Android ç³»ç»Ÿçº§æ—¥å¿—ä½“ç³»çš„å·¥ç¨‹åŒ–å®è·µ]]></title>    <link>https://juejin.cn/post/7598477092196614182</link>    <guid>https://juejin.cn/post/7598477092196614182</guid>    <pubDate>2026-01-24T06:17:38.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7598477092196614182" data-draft-id="7598641282324447259" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»â€œæ—¥å¿—æŠ“ä¸åˆ°â€åˆ°â€œå…¨é“¾è·¯å¯è¿½æº¯â€ï¼šä¸€æ¬¡ Android ç³»ç»Ÿçº§æ—¥å¿—ä½“ç³»çš„å·¥ç¨‹åŒ–å®è·µ"/> <meta itemprop="keywords" content="Android Studio"/> <meta itemprop="datePublished" content="2026-01-24T06:17:38.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æˆ·967124861426"/> <meta itemprop="url" content="https://juejin.cn/user/576557850035294"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»â€œæ—¥å¿—æŠ“ä¸åˆ°â€åˆ°â€œå…¨é“¾è·¯å¯è¿½æº¯â€ï¼šä¸€æ¬¡ Android ç³»ç»Ÿçº§æ—¥å¿—ä½“ç³»çš„å·¥ç¨‹åŒ–å®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/576557850035294/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æˆ·967124861426
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-24T06:17:38.000Z" title="Sat Jan 24 2026 06:17:38 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-24
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    34
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>ä»â€œæ—¥å¿—æŠ“ä¸åˆ°â€åˆ°â€œå…¨é“¾è·¯å¯è¿½æº¯â€ï¼šä¸€æ¬¡ Android ç³»ç»Ÿçº§æ—¥å¿—ä½“ç³»çš„å·¥ç¨‹åŒ–å®è·µ</strong></h2>
<blockquote>
<p><em>â€”â€”ä¸€ä¸ªé«˜çº§å·¥ç¨‹å¸ˆå¦‚ä½•æŠŠâ€œè¿ç»´ç—›ç‚¹â€è½åœ°æˆâ€œç³»ç»Ÿèƒ½åŠ›â€</em></p>
</blockquote>
<hr/>
<h3 data-id="heading-1">ä¸€ã€é—®é¢˜èƒŒæ™¯ï¼šä¸ºä»€ä¹ˆæˆ‘ä»¬è¦â€œé‡æ–°é€ æ—¥å¿—ä½“ç³»â€ï¼Ÿ</h3>
<p>åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šé‡åˆ°è¿™æ ·çš„é—®é¢˜ï¼š</p>
<ul>
<li>
<p>âŒ <strong>é—®é¢˜éš¾å¤ç°</strong>ï¼šå®¢æˆ·ç°åœºå¶å‘é—®é¢˜ï¼Œå›ä¼ æ—¥å¿—ä¸å®Œæ•´</p>
</li>
<li>
<p>âŒ <strong>Kernel / Logcat / ç½‘ç»œæ—¥å¿—å‰²è£‚</strong>ï¼šä¿¡æ¯åˆ†æ•£ï¼Œæ— æ³•å…³è”åˆ†æ</p>
</li>
<li>
<p>âŒ <strong>æ—¥å¿—ä¸å¯æ§</strong>ï¼š</p>
<ul>
<li>ä¸€ç›´å¼€ â†’ å ç©ºé—´ã€å½±å“æ€§èƒ½</li>
<li>å…³äº† â†’ å‡ºé—®é¢˜æ²¡æ•°æ®</li>
</ul>
</li>
<li>
<p>âŒ <strong>tcpdump éœ€è¦äººå·¥ä»‹å…¥</strong>ï¼Œç°åœºæ“ä½œæˆæœ¬é«˜</p>
</li>
</ul>
<p><strong>ç»“è®º</strong>ï¼š</p>
<blockquote>
<p>ä¸æ˜¯â€œæ—¥å¿—ä¸å¤Ÿå¤šâ€ï¼Œè€Œæ˜¯<strong>æ—¥å¿—ä½“ç³»ç¼ºä¹å·¥ç¨‹åŒ–è®¾è®¡</strong>ã€‚</p>
</blockquote>
<p>äºæ˜¯éœ€æ±‚å°±å˜æˆäº†ä¸€å¥è¯ï¼š</p>
<blockquote>
<p><strong>åœ¨ä¸å½±å“ç³»ç»Ÿç¨³å®šæ€§çš„å‰æä¸‹ï¼Œæ„å»ºä¸€å¥—å¯å¼€å…³ã€å¯è½®è½¬ã€å¯ç»Ÿä¸€ç®¡ç†çš„ç³»ç»Ÿçº§æ—¥å¿—é‡‡é›†æ–¹æ¡ˆã€‚</strong></p>
</blockquote>
<hr/>
<h3 data-id="heading-2">äºŒã€éœ€æ±‚æ‹†è§£ï¼šé«˜çº§å·¥ç¨‹å¸ˆæ˜¯å¦‚ä½•â€œæ‹†é—®é¢˜â€çš„ï¼Ÿ</h3>
<p>æˆ‘ä¹ æƒ¯æŠŠéœ€æ±‚æ‹†æˆ <strong>4 ä¸ªç»´åº¦</strong>ï¼š</p>
<h4 data-id="heading-3">1ï¸âƒ£ æ—¥å¿—ç±»å‹ç»´åº¦</h4>





















<table><thead><tr><th>ç±»å‹</th><th>ç›®çš„</th></tr></thead><tbody><tr><td>logcat</td><td>Framework / App é—®é¢˜</td></tr><tr><td>kernel</td><td>é©±åŠ¨ / åº•å±‚å¼‚å¸¸</td></tr><tr><td>tcpdump</td><td>ç½‘ç»œé—®é¢˜å®šä½</td></tr></tbody></table>
<h4 data-id="heading-4">2ï¸âƒ£ ç”Ÿå‘½å‘¨æœŸç»´åº¦</h4>
<ul>
<li>å¼€æœºæ˜¯å¦è‡ªåŠ¨å‡†å¤‡ç¯å¢ƒï¼Ÿ</li>
<li>æ˜¯å¦æ”¯æŒ <strong>è¿è¡ŒæœŸåŠ¨æ€å¼€å…³</strong>ï¼Ÿ</li>
<li>æ˜¯å¦éš reboot æ¸…ç†ï¼Ÿ</li>
</ul>
<h4 data-id="heading-5">3ï¸âƒ£ èµ„æºæ§åˆ¶ç»´åº¦</h4>
<ul>
<li>å•æ–‡ä»¶å¤§å°é™åˆ¶</li>
<li>æ–‡ä»¶æ•°é‡é™åˆ¶</li>
<li>tmpfs / data åˆ†å±‚ä½¿ç”¨</li>
</ul>
<h4 data-id="heading-6">4ï¸âƒ£ å¯è¿ç»´ç»´åº¦</h4>
<ul>
<li>Property æ§åˆ¶</li>
<li>æ— éœ€ adb ä»‹å…¥</li>
<li>å‡ºå‚é»˜è®¤å…³é—­ï¼Œé—®é¢˜æ—¶å¼€å¯</li>
</ul>
<blockquote>
<p><strong>é«˜çº§å·¥ç¨‹å¸ˆä¸ä¼šä¸€ä¸Šæ¥å†™ä»£ç ï¼Œè€Œæ˜¯å…ˆæŠŠâ€œç³»ç»Ÿè¡Œä¸ºâ€æƒ³æ¸…æ¥šã€‚</strong></p>
</blockquote>
<hr/>
<h3 data-id="heading-7">ä¸‰ã€æ•´ä½“æ¶æ„è®¾è®¡ï¼šä¸æ˜¯è„šæœ¬ï¼Œè€Œæ˜¯â€œç³»ç»Ÿèƒ½åŠ›â€</h3>
<h4 data-id="heading-8">ğŸ§± æ¶æ„æ€»è§ˆ</h4>
<pre><code class="hljs language-scss" lang="scss">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Android init â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚ property trigger
â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ logcatd<span class="hljs-selector-class">.rc</span>                     â”‚
â”‚                                â”‚
â”‚ â”œâ”€ logcatlog<span class="hljs-selector-class">.sh</span>   (logcat)     â”‚
â”‚ â”œâ”€ kernel<span class="hljs-selector-class">.sh</span>      (dmesg -w)   â”‚
â”‚ â””â”€ tcpdump<span class="hljs-selector-class">.sh</span>     (pcap)       â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ /data/log/tmp   â”‚  â† tmpfs
â”‚  logcat / kernelâ”‚
â”‚  tcpdump pcap   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h4 data-id="heading-9">ğŸ¯ å…³é”®è®¾è®¡å†³ç­–</h4>

























<table><thead><tr><th>å†³ç­–</th><th>åŸå› </th></tr></thead><tbody><tr><td>ä½¿ç”¨ init.rc + property</td><td>ç³»ç»Ÿçº§ã€ç¨³å®šã€æ— éœ€ daemon å¸¸é©»</td></tr><tr><td>ä½¿ç”¨ shell è„šæœ¬</td><td>æ˜“ç»´æŠ¤ã€å¿«é€Ÿå®šåˆ¶</td></tr><tr><td>tmpfs</td><td>é˜²æ­¢ flash å†™çˆ†</td></tr><tr><td>oneshot service + while</td><td>å¯æ§ã€é¿å… init é‡å¯é£æš´</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-10">å››ã€æŠ€æœ¯åŸç†æ‹†è§£ï¼ˆæ ¸å¿ƒå¹²è´§ï¼‰</h3>
<h4 data-id="heading-11">1ï¸âƒ£ ä¸ºä»€ä¹ˆä¸ç”¨åŸç”Ÿ logcatdï¼Ÿ</h4>
<ul>
<li>
<p>logcatdï¼š</p>
<ul>
<li>å¼ºè€¦åˆ logd</li>
<li>é…ç½®å¤æ‚</li>
<li>ä¸é€‚åˆåŠ¨æ€ TAG / ç½‘ç»œæ—¥å¿—</li>
</ul>
</li>
</ul>
<p><strong>ç»“è®º</strong>ï¼š<br/>
ğŸ‘‰ <strong>logcat æ˜¯å·¥å…·ï¼Œlogcatd æ˜¯ç³»ç»Ÿç»„ä»¶ï¼Œä¸è¦æ»¥ç”¨</strong></p>
<hr/>
<h4 data-id="heading-12">2ï¸âƒ£ kernel æ—¥å¿—ä¸ºä»€ä¹ˆç”¨ <code>dmesg -w</code>ï¼Ÿ</h4>
<pre><code class="hljs language-c" lang="c">dmesg -w &gt;&gt; kernel.<span class="hljs-built_in">log</span>
</code></pre>
<p>ä¼˜åŠ¿ï¼š</p>
<ul>
<li>å®æ—¶</li>
<li>ä¸ä¾èµ– logd</li>
<li>å´©æºƒå‰æœ€åä¿¡æ¯ä¹Ÿèƒ½æŠ“åˆ°</li>
</ul>
<p>é…åˆï¼š</p>
<ul>
<li>æ–‡ä»¶å¤§å°ç›‘æ§</li>
<li>kill + è½®è½¬</li>
<li>property åŠ¨æ€å…³é—­</li>
</ul>
<hr/>
<h4 data-id="heading-13">3ï¸âƒ£ tcpdump ä¸ºä»€ä¹ˆç”¨ init serviceï¼Ÿ</h4>
<pre><code class="hljs language-ini" lang="ini">on property:<span class="hljs-attr">persist.sys.emdoor.tcpdump</span>=<span class="hljs-number">1</span>
    start tcpdump_all
</code></pre>
<p>å¥½å¤„ï¼š</p>
<ul>
<li>é¿å…åå°å¸¸é©»</li>
<li>æƒé™å¤©ç„¶æ˜¯ root</li>
<li>è¡Œä¸ºå¯å®¡è®¡ï¼ˆpropertyï¼‰</li>
</ul>
<p><strong>è¿™æ˜¯ç³»ç»Ÿå·¥ç¨‹æ€ç»´ï¼Œè€Œä¸æ˜¯è¿ç»´è„šæœ¬æ€ç»´ã€‚</strong></p>
<hr/>
<h4 data-id="heading-14">4ï¸âƒ£ ä¸ºä»€ä¹ˆè¦â€œè‡ªå·±å†™è½®è½¬â€ï¼Ÿ</h4>
<p>åŸå› å¾ˆç°å®ï¼š</p>
<ul>
<li>busybox logrotate ä¸ä¸€å®šå­˜åœ¨</li>
<li>Android shell åŠŸèƒ½å—é™</li>
<li>è¦å¯æ§ã€å¯å®šåˆ¶</li>
</ul>
<p>æ‰€ä»¥ç”¨æœ€åŸå§‹ã€æœ€å¯é çš„æ–¹å¼ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">stat</span> -c %s
<span class="hljs-built_in">mv</span> <span class="hljs-built_in">log</span> log.1
</code></pre>
<blockquote>
<p><strong>é«˜çº§å·¥ç¨‹å¸ˆä¸è¿½æ±‚ä¼˜é›…ï¼Œè¿½æ±‚ç¡®å®šæ€§ã€‚</strong></p>
</blockquote>
<hr/>
<h3 data-id="heading-15">äº”ã€ç¼–ç å±‚é¢çš„å·¥ç¨‹ç»éªŒæ€»ç»“ï¼ˆéå¸¸é‡è¦ï¼‰</h3>
<h4 data-id="heading-16">âœ… 1. init service ä¸€å®šè¦ oneshot + while</h4>
<p>âŒ é”™è¯¯ç¤ºèŒƒï¼š</p>
<pre><code class="hljs language-bash" lang="bash">service xxx /system/bin/xxx.sh
</code></pre>
<p>ä¸€æ—¦è„šæœ¬é€€å‡º â†’ init æ— é™é‡å¯</p>
<p>âœ… æ­£ç¡®æ–¹å¼ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">service xxx /system/bin/xxx.sh
    oneshot
</code></pre>
<hr/>
<h4 data-id="heading-17">âœ… 2. æ°¸è¿œç”¨ property æ§åˆ¶è¡Œä¸ºï¼Œä¸ç”¨ kill -9</h4>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">ENABLE</span>=$(getprop persist.logcat.enable)
</code></pre>
<ul>
<li>å¯è¿œç¨‹æ§åˆ¶</li>
<li>å¯æŒä¹…åŒ–</li>
<li>å¯è¿½æº¯</li>
</ul>
<hr/>
<h4 data-id="heading-18">âœ… 3. tmpfs æ˜¯æ—¥å¿—å·¥ç¨‹çš„â€œæŠ¤åŸæ²³â€</h4>
<pre><code class="hljs language-bash" lang="bash">mount tmpfs tmpfs /data/log/tmp
</code></pre>
<p>å¥½å¤„ï¼š</p>
<ul>
<li>ä¸ä¼¤ flash</li>
<li>é‡å¯è‡ªåŠ¨æ¸…ç©º</li>
<li>é€‚åˆé—®é¢˜åˆ†ææ—¥å¿—</li>
</ul>
<hr/>
<h4 data-id="heading-19">âœ… 4. Android.bp ç”¨ prebuilt_binary å¾ˆå…³é”®</h4>
<pre><code class="hljs language-css" lang="css">cc_prebuilt_binary {
    name: <span class="hljs-string">"logcatlog.sh"</span>,
}
</code></pre>
<ul>
<li>ä¸ç¼–è¯‘</li>
<li>ä¸å¼•å…¥ toolchain é—®é¢˜</li>
<li>å‡çº§é£é™©æä½</li>
</ul>
<hr/>
<h3 data-id="heading-20">å…­ã€ä»â€œå†™åŠŸèƒ½â€åˆ°â€œåšç³»ç»Ÿâ€çš„æ€ç»´è·ƒè¿</h3>
<p>å¾ˆå¤šå·¥ç¨‹å¸ˆä¼šé—®ï¼š</p>
<blockquote>
<p>â€œè¿™ä¸å°±æ˜¯å‡ ä¸ª shell è„šæœ¬å—ï¼Ÿâ€</p>
</blockquote>
<p>ä½†çœŸæ­£çš„å·®åˆ«åœ¨äºï¼š</p>

























<table><thead><tr><th>åˆçº§æ€ç»´</th><th>é«˜çº§å·¥ç¨‹æ€ç»´</th></tr></thead><tbody><tr><td>èƒ½ä¸èƒ½è·‘</td><td>èƒ½ä¸èƒ½é•¿æœŸç¨³å®šè·‘</td></tr><tr><td>å†™è„šæœ¬</td><td>æ„å»ºç³»ç»Ÿèƒ½åŠ›</td></tr><tr><td>ä¸´æ—¶æŠ“æ—¥å¿—</td><td>å¯è¿ç»´ã€å¯äº¤ä»˜</td></tr><tr><td>è§£å†³ä¸€æ¬¡é—®é¢˜</td><td>é™ä½ N æ¬¡é—®é¢˜æˆæœ¬</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-21">ä¸ƒã€ç»“è¯­ï¼šæ—¥å¿—ä¸æ˜¯è¾…åŠ©åŠŸèƒ½ï¼Œè€Œæ˜¯ç³»ç»Ÿçš„â€œé»‘åŒ£å­â€</h3>
<p>å½“ç³»ç»Ÿå¤æ‚åˆ°ä¸€å®šç¨‹åº¦ï¼š</p>
<blockquote>
<p><strong>æ—¥å¿—èƒ½åŠ› = ç³»ç»Ÿå¯ç»´æŠ¤æ€§</strong></p>
</blockquote>
<p>è½¬è½½è¯·æ³¨æ˜å‡ºå¤„<a href="https://juejin.cn/spost/7598477092196614182" target="_blank" title="https://juejin.cn/spost/7598477092196614182">juejin.cn/spost/75984â€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[21Kä»£ç çš„å…¨æ–°å‰ç«¯æ¡†æ¶ï¼Reactçš„æ˜å¢“äººç°ä¸–ï¼]]></title>    <link>https://juejin.cn/post/7598403436699025442</link>    <guid>https://juejin.cn/post/7598403436699025442</guid>    <pubDate>2026-01-23T16:26:19.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7598403436699025442" data-draft-id="7598402961904713780" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="21Kä»£ç çš„å…¨æ–°å‰ç«¯æ¡†æ¶ï¼Reactçš„æ˜å¢“äººç°ä¸–ï¼"/> <meta itemprop="keywords" content="å‰ç«¯æ¡†æ¶"/> <meta itemprop="datePublished" content="2026-01-23T16:26:19.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="foreverflying"/> <meta itemprop="url" content="https://juejin.cn/user/4267647975566203"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            21Kä»£ç çš„å…¨æ–°å‰ç«¯æ¡†æ¶ï¼Reactçš„æ˜å¢“äººç°ä¸–ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4267647975566203/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    foreverflying
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-23T16:26:19.000Z" title="Fri Jan 23 2026 16:26:19 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    20
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åºŸè¯ä¸€ä¼šå„¿å†è¯´ï¼Œå…ˆä¸ŠDemoï¼Œä¸€ä¸ªç»å…¸æ¡Œæ¸¸â€œç’€ç’¨å®çŸ³â€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fsplendor.ezh.dev" target="_blank" title="https://splendor.ezh.dev" ref="nofollow noopener noreferrer">splendor.ezh.dev</a> ï¼Œå¯ä»¥2ï½4äººè”æœºç©ï¼Œè¿›äº†
æ¸¸æˆå¯ä»¥çœ‹å…·ä½“è§„åˆ™ï¼Œè¯´æ˜é‡Œè¿˜è—ç€æºç åº“åœ°å€ã€‚</p>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f4bf7b7fe7e04dc28698e43d5423bf44~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZm9yZXZlcmZseWluZw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769936849&amp;x-signature=Jx3HpVroaEucMaI4%2FdlbMO6S69Q%3D" alt="Screenshot 2026-01-24 at 4.02.37â€¯AM.png" width="30%" loading="lazy"/>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0f7de16753ac49f2937631352bd88a9f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZm9yZXZlcmZseWluZw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769936849&amp;x-signature=utO%2Fq9FfnQmCwc1CSarNNDTy5OY%3D" alt="Screenshot 2026-01-24 at 4.07.46â€¯AM.png" width="30%" loading="lazy"/>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f07b72483e02458095dc2be2d8adb89b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZm9yZXZlcmZseWluZw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769936849&amp;x-signature=PFyXD1EUwfsFF7oaJwDuAxtxHr4%3D" alt="Screenshot 2026-01-24 at 9.31.58â€¯PM.png" width="30%" loading="lazy"/>
<p>æ€§èƒ½ç¢¾å‹Reactï¼Œè€Œæ˜“ç”¨æ€§å¯è¯´æ˜¯è¾¾åˆ°å‰ç«¯æ¡†æ¶çš„æé™äº†ã€‚ä½ è¦å°å¿ƒçš„æ˜¯ï¼Œä½ ç”¨äº†è¿™ä¸ªä»¥åï¼Œå†å›å»ç”¨Reactå†™ä»£ç ä¼šçŠ¯æ¶å¿ƒã€‚</p>
<p>æ ¸å¿ƒä»£ç åªæœ‰2500è¡Œï¼Œmin.jsåˆè®¡21KBï¼Œæ¥å£å…±11ä¸ªAPIï¼Œå­¦ä¹ æ›²çº¿ä¸èƒ½è¯´å¹³ç¼“ï¼Œåªèƒ½è¯´æ ¹æœ¬æ²¡æœ‰ã€‚</p>
<p>ä¸Šé¢è¿™ä¸ªç•Œé¢äº¤äº’éå¸¸å¤æ‚çš„Demoï¼Œæ¸¸æˆé¡µé¢çš„å®ç°ä»£ç åªæœ‰å…«ç™¾è¡Œå·¦å³ã€‚å½“ç„¶ï¼Œåä¸ªç å†œæœ‰ä¹ä¸ªæ‡’å¾—å»çœ‹å…«ç™¾è¡Œä»£ç ï¼Œä¸‹é¢æ˜¯ä¸ªå¾®å‹Demoï¼Œå››åå¤šè¡Œä»£ç ï¼Œæ˜¯ä¸ªå¾ˆç›´è§‚çš„ä¾‹å­ï¼Œä¸€çœ¼æ‡‚ï¼Œå®Œå…¨ä¸å¿…è¯»æ–‡æ¡£ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/10b2457ec0194ffeb2f0f6ce47614493~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZm9yZXZlcmZseWluZw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769936849&amp;x-signature=aT0PJbbxFq4FMZv25WB54PP90rY%3D" alt="Screenshot 2026-01-24 at 4.24.24â€¯AM.png" loading="lazy"/></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> { $ezh, bindData, <span class="hljs-title class_">Com</span>, useState } <span class="hljs-keyword">from</span> <span class="hljs-string">'ezh'</span>

<span class="hljs-keyword">type</span> <span class="hljs-title class_">Player</span> = {
    <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>
    <span class="hljs-attr">isSelected</span>: <span class="hljs-built_in">boolean</span>
}

<span class="hljs-keyword">const</span> <span class="hljs-title class_">PlayerView</span>: <span class="hljs-title class_">Com</span>&lt;{ <span class="hljs-attr">player</span>: <span class="hljs-title class_">Player</span>, <span class="hljs-attr">onRemove</span>: <span class="hljs-function">(<span class="hljs-params">player: Player</span>) =&gt;</span> <span class="hljs-built_in">void</span> }&gt; = <span class="hljs-function">(<span class="hljs-params">
    { player, onRemove },
</span>) =&gt;</span> {
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">'checkbox'</span> <span class="hljs-attr">checked</span>=<span class="hljs-string">{bindData(player,</span> '<span class="hljs-attr">isSelected</span>')} /&gt;</span>
        Name: {player.name}
        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">'button'</span> <span class="hljs-attr">value</span>=<span class="hljs-string">'Remove'</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">{()</span> =&gt;</span> onRemove(player)} /&gt;
    <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span>
}

<span class="hljs-keyword">const</span> <span class="hljs-title class_">MainView</span>: <span class="hljs-title class_">Com</span> = <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> state = <span class="hljs-title function_">useState</span>({
        <span class="hljs-attr">name</span>: <span class="hljs-string">''</span>,
        <span class="hljs-attr">players</span>: [] <span class="hljs-keyword">as</span> <span class="hljs-title class_">Player</span>[],
    })
    <span class="hljs-keyword">const</span> { players } = state
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">onAdd</span> = (<span class="hljs-params"/>) =&gt; {
        <span class="hljs-keyword">if</span> (state.<span class="hljs-property">name</span>) {
            <span class="hljs-keyword">const</span> isSelected = (players.<span class="hljs-property">length</span> + <span class="hljs-number">1</span>) % <span class="hljs-number">2</span> === <span class="hljs-number">0</span>
            players.<span class="hljs-title function_">push</span>({ <span class="hljs-attr">name</span>: state.<span class="hljs-property">name</span>, isSelected })
            state.<span class="hljs-property">name</span> = <span class="hljs-string">''</span>
        }
    }
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">onRemove</span> = (<span class="hljs-params">player: Player</span>) =&gt; {
        <span class="hljs-keyword">const</span> idx = players.<span class="hljs-title function_">indexOf</span>(player)
        players.<span class="hljs-title function_">splice</span>(idx, <span class="hljs-number">1</span>)
    }
    <span class="hljs-keyword">const</span> selectedCount = players.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">count, player</span>) =&gt;</span> count + (player.<span class="hljs-property">isSelected</span> ? <span class="hljs-number">1</span> : <span class="hljs-number">0</span>), <span class="hljs-number">0</span>)
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Player count: {players.length}, seleted count: {selectedCount}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>
            {players.map((player, i) =&gt; <span class="hljs-tag">&lt;<span class="hljs-name">PlayerView</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{i}</span> <span class="hljs-attr">player</span>=<span class="hljs-string">{player}</span> <span class="hljs-attr">onRemove</span>=<span class="hljs-string">{onRemove}</span> /&gt;</span>)}
        <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">'text'</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{bindData(state,</span> '<span class="hljs-attr">name</span>')} /&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">'button'</span> <span class="hljs-attr">value</span>=<span class="hljs-string">'Add'</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">{onAdd}</span> /&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
}

$ezh.<span class="hljs-title function_">render</span>(<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'root'</span>)!, <span class="hljs-title class_">MainView</span>)
</code></pre>
<p>è‡ªæˆ‘ä»‹ç»ä¸‹ï¼Œæˆ‘å« Ezhï¼Œè¯»éŸ³è¢«å®šä¸ºåŒ"edge"ã€‚å…ˆç§€ä¸€ä¸‹2500è¡Œçš„å°è‚Œè‚‰ï¼š</p>
<ol>
<li>TypeScript Onlyã€‚ä¹‹å‰æŸä¸ªçŸ¥åæ¡†æ¶è¯´TSå¤ªéº»çƒ¦ï¼Œä»–ä»¬äºæ˜¯å›å½’äº†çº¯JSï¼Œæ‰€ä»¥Ezhå½“ç„¶ä¹Ÿè¦æç«¯ä¸€ç‚¹ï¼šåªæ”¯æŒTSå†™ä»£ç å’Œç¼–è¯‘ä»£ç ï¼Œç»ä¸æ”¯æŒJSã€‚æ¯ä¸ªhtmlå…ƒç´ ã€æ¯ä¸ªç»„ä»¶åœ¨Ezhé‡Œéƒ½æœ‰é™æ€ç±»å‹æ£€æŸ¥ï¼Œæ‹¼é”™äº†å±æ€§åå½“åœºç”©è„¸ç»™ä½ çœ‹ã€‚</li>
<li>TSXè¯­æ³•å½“ç„¶æ˜¯æ ‡é…ï¼Œè®©ä½ æ‰”æ‰Reactæ‰”å¾—å¿ƒå®‰ç†å¾—ï¼Œå®Œå…¨æ— ç—›ã€‚ç”šè‡³è¿‡å»çš„Reactå±å±±ï¼Œä»£ç åƒåœ¾ä½†æ˜¯TSXéƒ¨åˆ†è¿˜èƒ½æ¥ç€ç”¨ï¼Œä¹Ÿè®¸ä½ åˆ ä¸€åˆ å®ƒçš„åƒåœ¾ä»£ç ï¼Œå‰©ä¸‹çš„éƒ¨åˆ†å¯ä»¥è½»æ¾ç§»æ¤åˆ°Ezhæ¡†æ¶ä¸Šæ¥ã€‚</li>
<li>åŸºäºå…¨æ–°åŸåˆ›çš„æœºåˆ¶çš„DOMåˆ·æ–°ï¼Œä»¥O1å¤æ‚åº¦ï¼Œå®ç°æœ€å°å˜åŒ–å•ä½ï¼ˆå•ä¸ªå­—æ®µï¼‰è§¦å‘æœ€å°åˆ·æ–°é›†åˆï¼ˆé€»è¾‘ä¸Šä¸è¯¥åˆ·æ–°çš„ç»å¯¹ä¸ä¼šåˆ·æ–°ï¼‰ã€‚è™šæ‹ŸDOMæ ‘Diffï¼Œè¿™ç§å¬èµ·å•¦é«˜å¤§ä¸Šçš„åƒåœ¾è·¯çº¿å¯ä»¥æ»šäº†ã€‚</li>
<li>è¯´åˆ°åƒåœ¾ï¼ˆReactæˆ‘æ²¡è¯´ä½ å“ˆï¼‰ï¼Œè¿™ä¸ªæ¡†æ¶å¯ä»¥é…ç½®å»¶è¿Ÿé‡Šæ”¾å’Œåƒåœ¾æ”¶é›†ï¼šæƒ³è±¡ä½ åˆšè´¹äº†ä¹ç‰›äºŒè™ä¹‹åŠ›ç»„è£…å‡ºäº†ä¸€ä¸ªç»“æ„å¤æ‚çš„1000+å…ƒç´ çš„DOMåˆ†æ”¯ï¼Œæ²¡ä¸¤ç§’ç”¨æˆ·ç‚¹äº†å¦ä¸€ä¸ªæ ‡ç­¾æŠŠå®ƒé”€æ¯äº†ï¼Œä¸‰ç§’ä¹‹åä»–åˆç‚¹å›æ¥äº†ã€‚ç°åœ¨è¿™ä¸¤ä¸ªç”¨æˆ·åŠ¨ä½œå¸¦æ¥çš„å¼€é”€æ¥è¿‘äº0äº†ã€‚</li>
<li>ä¸­å›½äººå–œæ¬¢å¤§ä¸€ç»Ÿä¸æ˜¯ï¼Œä¸€ä¸ªåŒ…å…¨åŠŸèƒ½æœ€ç†æƒ³ã€‚Reactä¸»åŒ…å°ºå¯¸172Kï¼Œä½†Routeå¾—åŠ ï¼ŒReduxå¾—è¦ï¼Œç”¨TSè¿˜å¾—TypeåŒ…å•ç®—ã€‚Ezhçš„npmåŒ…è§£åŒ…å°ºå¯¸41.5Kï¼Œå…¶ä¸­18Kçš„Typeæ–‡ä»¶ã€‚æ— é™è‡ªç”±çš„çŠ¶æ€ç®¡ç†ã€å¼ºå¤§å´æ˜“ç”¨çš„è·¯ç”±è¡¨ã€ç›´è§‚çš„ç»„ä»¶ç”Ÿå‘½æœŸç®¡ç†ï¼Œéƒ½æµ“ç¼©åœ¨è¿™å‰©ä¸‹çš„21Kä»£ç é‡Œäº†ã€‚</li>
</ol>
<p>ç›®å‰ npm åŒ… <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.npmjs.com%2Fpackage%2Fezh" target="_blank" title="https://www.npmjs.com/package/ezh" ref="nofollow noopener noreferrer">ezh</a> ç›´æ¥å¯ç”¨ï¼Œç”¨æ³•å‚è€ƒ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fforeverflying%2Fezh-demo" target="_blank" title="https://github.com/foreverflying/ezh-demo" ref="nofollow noopener noreferrer">Demoæºç </a> ï¼Œä¸€å°æ—¶å­¦ä¹ æˆæœ¬æå®šã€‚æ ¸å¿ƒæºç å¼€æºæ—©å°±åœ¨è®¡åˆ’ä¸­ï¼Œä½†å¯èƒ½ä¼šæ™šäº›ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é˜¿é‡Œæœ€æ–°å¼€æºï¼Œæºç åœ°å€+éƒ¨ç½²è„šæœ¬ï¼Œæ”¯æŒå¤šè¯­ç§å£°éŸ³å…‹éš†]]></title>    <link>https://juejin.cn/post/7598464972911181864</link>    <guid>https://juejin.cn/post/7598464972911181864</guid>    <pubDate>2026-01-24T03:32:18.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7598464972911181864" data-draft-id="7598403436699729954" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é˜¿é‡Œæœ€æ–°å¼€æºï¼Œæºç åœ°å€+éƒ¨ç½²è„šæœ¬ï¼Œæ”¯æŒå¤šè¯­ç§å£°éŸ³å…‹éš†"/> <meta itemprop="keywords" content="åç«¯,é˜¿é‡Œå·´å·´,å¼€æº"/> <meta itemprop="datePublished" content="2026-01-24T03:32:18.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ‚Ÿç©ºç å­—"/> <meta itemprop="url" content="https://juejin.cn/user/3139860942296830"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é˜¿é‡Œæœ€æ–°å¼€æºï¼Œæºç åœ°å€+éƒ¨ç½²è„šæœ¬ï¼Œæ”¯æŒå¤šè¯­ç§å£°éŸ³å…‹éš†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3139860942296830/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ‚Ÿç©ºç å­—
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-24T03:32:18.000Z" title="Sat Jan 24 2026 03:32:18 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-24
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯å°æ‚Ÿã€‚</p>
<p>ä¸€ä¸²æ–‡å­—è¾“å…¥è¿›å»ï¼Œä¸€ä¸ªå®Œå…¨æ ¹æ®æè¿°å®šåˆ¶çš„å£°éŸ³å°±å‡ºæ¥äº†ï¼Œä»å£°éŸ³ç‰¹ç‚¹åˆ°æƒ…æ„ŸçŠ¶æ€å†åˆ°èŠ‚å¥å¿«æ…¢ï¼Œä¸€åˆ‡éƒ½å¬ä»ä½ çš„æŒ‡ä»¤ã€‚</p>
<p>é˜¿é‡Œé€šä¹‰åƒé—®çš„Qwen3-TTSæ¨¡å‹æ­£å¼å¼€æºäº†ã€‚çœ‹å®Œæ‰€æœ‰åŠŸèƒ½ä»‹ç»å’Œæ€§èƒ½æ•°æ®ï¼Œæˆ‘å‘ç°å£°éŸ³ç”Ÿæˆçš„æ¸¸æˆè§„åˆ™æ­£åœ¨è¢«é‡æ–°å®šä¹‰ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bcd876cb77274694a12e2dbdd6d8854f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oKf56m656CB5a2X:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769830337&amp;x-signature=VoyczKeB6D7W18fVnqkVfa2Bh%2Fs%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è¿™ä¸ªåä¸ºQwen3-TTSçš„è¯­éŸ³ç”Ÿæˆç³»ç»Ÿï¼ŒèƒŒåéšè—ç€è¿œæ¯”è¡¨é¢çœ‹èµ·æ¥æ›´å¼ºå¤§çš„èƒ½åŠ›ã€‚å®ƒå¸¦æ¥çš„ä¸åªæ˜¯æ›´å¤šéŸ³è‰²é€‰æ‹©ï¼Œè€Œæ˜¯æ ¹æœ¬ä¸Šæ”¹å˜äº†æˆ‘ä»¬ä¸è¯­éŸ³ç”ŸæˆæŠ€æœ¯äº¤äº’çš„æ–¹å¼ã€‚</p>
<p><strong>åŠŸèƒ½å…¨é¢ï¼šä¸åªæ˜¯åˆæˆè¯­éŸ³é‚£ä¹ˆç®€å•</strong></p>
<p>Qwen3-TTSåˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿç®€å•ç‚¹è¯´ï¼Œå®ƒæ˜¯ä¸€ä¸ªèƒ½è®©ä½ éšæ„åˆ›é€ ã€æ“æ§å’Œå…‹éš†å£°éŸ³çš„æ™ºèƒ½ç³»ç»Ÿã€‚å®ƒä¸æ»¡è¶³äºä¼ ç»Ÿçš„æ–‡æœ¬è½¬è¯­éŸ³ï¼Œè€Œæ˜¯æŠŠå£°éŸ³å˜æˆä¸€ç§å¯ç¼–ç¨‹çš„åª’ä»‹ã€‚</p>
<p>ä½ å¯ä»¥é€šè¿‡è‡ªç„¶è¯­è¨€å‘Šè¯‰å®ƒæƒ³è¦ä»€ä¹ˆæ ·çš„å£°éŸ³ï¼šâ€œé«˜äº¢çš„ç”·æ€§å—“éŸ³ï¼Œè¯­è°ƒéšå…´å¥‹æƒ…ç»ªä¸æ–­ä¸Šæ‰¬ï¼Œå¿«é€Ÿè€Œå……æ»¡æ´»åŠ›â€ã€‚</p>
<p>ç„¶åå®ƒä¼šçœŸçš„æŒ‰ç…§è¿™äº›æè¿°ç”Ÿæˆè¯­éŸ³ï¼Œç³»ç»Ÿæ”¯æŒ10ç§ä¸»æµè¯­è¨€å’Œå¤šç§æ–¹è¨€ï¼Œä»ä¸­æ–‡åˆ°æ„å¤§åˆ©è¯­ï¼Œä»æ ‡å‡†å‘éŸ³åˆ°åœ°æ–¹å£éŸ³ã€‚</p>
<p>å®ƒå¼€æºçš„æ¨¡å‹åŒ…å«1.7Bå’Œ0.6Bä¸¤ç§å°ºå¯¸ï¼Œå…¼é¡¾äº†æè‡´æ€§èƒ½å’Œé«˜æ•ˆè¿è¡Œçš„ä¸åŒéœ€æ±‚ã€‚è¿™æ„å‘³ç€æ— è®ºæ˜¯ç ”ç©¶æœºæ„è¿˜æ˜¯åº”ç”¨å¼€å‘è€…ï¼Œéƒ½èƒ½æ‰¾åˆ°é€‚åˆè‡ªå·±åœºæ™¯çš„ç‰ˆæœ¬ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/befe5d2320d74436be02c4077b8369d3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oKf56m656CB5a2X:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769830337&amp;x-signature=YtGnhBu7VAPW1NG0SVlYOGCmhxg%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dd99df0c8b014cb2bba10fdc68a45416~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oKf56m656CB5a2X:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769830337&amp;x-signature=WkiBNslzLbYvEeVTbZRYIUhSmfc%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong>å®é™…ç—›ç‚¹ï¼šä¼ ç»Ÿè¯­éŸ³åˆæˆçš„ä¸‰ä¸ªç“¶é¢ˆ</strong></p>
<p>ä½¿ç”¨ä¼ ç»Ÿè¯­éŸ³åˆæˆæŠ€æœ¯æ—¶çš„ä½“éªŒï¼Œä¸‰ä¸ªé™åˆ¶å¾ˆæ˜æ˜¾ã€‚</p>
<p>ç¬¬ä¸€æ˜¯å£°éŸ³ç”Ÿç¡¬ï¼Œç¼ºä¹æƒ…æ„Ÿå˜åŒ–ï¼Œå¬èµ·æ¥åƒæœºå™¨åœ¨å¿µç¨¿ã€‚</p>
<p>ç¬¬äºŒæ˜¯å¯æ§æ€§å·®ï¼Œå¾ˆéš¾è°ƒèŠ‚è¯­é€Ÿã€æƒ…æ„Ÿå’Œè¯­æ°”ç»†èŠ‚ã€‚</p>
<p>ç¬¬ä¸‰æ˜¯éŸ³è‰²é€‰æ‹©æœ‰é™ï¼Œè¦ä¹ˆæ˜¯é¢„å®šä¹‰çš„å‡ ç§å£°éŸ³ï¼Œè¦ä¹ˆéœ€è¦å¤§é‡æ•°æ®è®­ç»ƒæ‰èƒ½å…‹éš†ç‰¹å®šéŸ³è‰²ã€‚å¯¹å¤šæ•°ç”¨æˆ·è€Œè¨€ï¼Œæƒ³è¦ä¸€ä¸ªç‰¹å®šç±»å‹çš„å£°éŸ³å¾€å¾€éœ€è¦å¦¥åã€‚</p>
<p>Qwen3-TTSç„å‡†çš„æ­£æ˜¯è¿™äº›ç—›ç‚¹ã€‚å®ƒä¸åªæ˜¯æé«˜å£°éŸ³çš„â€œè‡ªç„¶åº¦â€ï¼Œè€Œæ˜¯ä»æ ¹æœ¬ä¸Šæ”¹å˜å£°éŸ³ç”Ÿæˆçš„æ§åˆ¶ç»´åº¦ã€‚</p>
<p>ç°åœ¨å£°éŸ³çš„æ¯ä¸€ä¸ªç‰¹æ€§éƒ½å¯ä»¥é€šè¿‡æŒ‡ä»¤è°ƒæ•´ï¼Œè¿™ç§èƒ½åŠ›ä»¥å‰åªæœ‰ä¸“ä¸šéŸ³é¢‘å·¥ç¨‹å¸ˆé€šè¿‡å¤æ‚å¤„ç†æ‰èƒ½å®ç°ã€‚</p>
<p><strong>æ ¸å¿ƒåˆ›æ–°ï¼šåŒå‘æµå¼ç”Ÿæˆä¸å¤šç æœ¬ç¼–ç </strong></p>
<p>Qwen3-TTSçš„æ ¸å¿ƒçªç ´é›†ä¸­åœ¨ä¸¤ä¸ªæ–¹é¢ã€‚æŠ€æœ¯å±‚é¢ï¼Œå®ƒé‡‡ç”¨äº†åˆ›æ–°çš„Dual-TrackåŒè½¨å»ºæ¨¡ï¼Œå®ç°äº†æè‡´çš„åŒå‘æµå¼ç”Ÿæˆé€Ÿåº¦ï¼Œæœ€å¿«å¯ä»¥åœ¨è¾“å…¥å•å­—åå³åˆ»è¾“å‡ºéŸ³é¢‘é¦–åŒ…ï¼Œç«¯åˆ°ç«¯åˆæˆå»¶è¿Ÿä½è‡³97æ¯«ç§’ã€‚</p>
<p>è¿™ä¸ªé€Ÿåº¦æ„å‘³ç€çœŸæ­£çš„å®æ—¶äº¤äº’æˆä¸ºå¯èƒ½ã€‚æƒ³è±¡ä¸€ä¸‹åœ¨çº¿ç¿»è¯‘ã€è¯­éŸ³åŠ©æ‰‹æˆ–æ¸¸æˆè§’è‰²å¯¹è¯åœºæ™¯ä¸­ï¼Œå‡ ä¹æ²¡æœ‰å»¶è¿Ÿçš„è¯­éŸ³åé¦ˆä¼šå¸¦æ¥å®Œå…¨ä¸åŒçš„ä½“éªŒã€‚</p>
<p>å¦ä¸€ä¸ªå…³é”®æŠ€æœ¯æ˜¯Qwen3-TTS-Tokenizer-12Hzå¤šç æœ¬è¯­éŸ³ç¼–ç å™¨ã€‚å®ƒä¸ä»…é«˜æ•ˆå‹ç¼©è¯­éŸ³ä¿¡å·ï¼Œè¿˜èƒ½å®Œæ•´ä¿ç•™å‰¯è¯­è¨€ä¿¡æ¯å’Œå£°å­¦ç¯å¢ƒç‰¹å¾ã€‚</p>
<p>è¿™æ„å‘³ç€å£°éŸ³ä¸­çš„å¾®å¦™æƒ…æ„Ÿçº¿ç´¢ã€ä¸ªäººè¯´è¯ä¹ æƒ¯ç”šè‡³ç¯å¢ƒæ°›å›´éƒ½èƒ½è¢«ä¿ç•™ä¸‹æ¥ï¼Œè®©ç”Ÿæˆçš„å£°éŸ³æ›´åƒçœŸäººå‘å£°ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3a304905f194451781186bbec84c3043~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oKf56m656CB5a2X:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769830337&amp;x-signature=e%2BJbdYr1LFxJ0cGY3yfK6c%2BoVps%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong>å®é™…è¡¨ç°ï¼šå£°éŸ³åˆ›é€ ä¸æ§åˆ¶å…¨é¢é¢†å…ˆ</strong></p>
<p>Qwen3-TTSåœ¨å¤šé¡¹è¯„ä¼°ä¸­éƒ½è¾¾åˆ°äº†è¡Œä¸šé¢†å…ˆæ°´å¹³ã€‚åœ¨éŸ³è‰²åˆ›é€ ä»»åŠ¡ä¸Šï¼Œå®ƒåœ¨æŒ‡ä»¤éµå¾ªèƒ½åŠ›å’Œç”Ÿæˆè¡¨ç°åŠ›ä¸Šéƒ½è¶…è¶Šäº†é—­æºæ¨¡å‹ï¼Œè¿™å¯¹å¤–éƒ¨å¼€å‘è€…æ¥è¯´æ˜¯ä¸ªå¥½æ¶ˆæ¯ã€‚</p>
<p>å®ƒæ”¯æŒåŸºäºè‡ªç„¶è¯­è¨€æè¿°ç”Ÿæˆå®šåˆ¶åŒ–éŸ³è‰²ã€‚ç”¨æˆ·å¯ä»¥è¾“å…¥å£°å­¦å±æ€§ã€äººè®¾æè¿°ã€èƒŒæ™¯ä¿¡æ¯ç­‰ï¼Œç³»ç»Ÿå°±èƒ½ç”Ÿæˆç¬¦åˆæœŸæœ›çš„å£°éŸ³å½¢è±¡ã€‚</p>
<p>æ¯”å¦‚è¾“å…¥â€œ17å²ç”·æ€§ï¼Œç”·é«˜éŸ³éŸ³åŸŸï¼Œé€æ¸è·å¾—è‡ªä¿¡â€è¿™æ ·çš„æè¿°ï¼Œç³»ç»Ÿå°±èƒ½åˆ›é€ å‡ºç›¸åº”çš„å£°éŸ³ã€‚</p>
<p>éŸ³è‰²å…‹éš†èƒ½åŠ›åŒæ ·å‡ºè‰²ï¼Œåœ¨ç›¸ä¼¼åº¦å’Œç¨³å®šæ€§ä¸Šéƒ½è¶…è¶Šäº†ç°æœ‰æ–¹æ¡ˆã€‚å€¼å¾—ä¸€æçš„æ˜¯ï¼Œå®ƒæ”¯æŒéŸ³è‰²å¤ç”¨ï¼Œåˆ›é€ çš„å£°éŸ³å¯ä»¥è¢«ä¿å­˜å¹¶é‡å¤ä½¿ç”¨ï¼Œç”Ÿæˆè‡ªç„¶çš„å¤šè½®æ¬¡å¤šè§’è‰²å¯¹è¯ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b2cec2a87b9a474f85fe48d36999bffc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oKf56m656CB5a2X:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769830337&amp;x-signature=nDHjIrl5JRLLTX1XB8wDJATZJnU%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/807ad757a76d445ea30a41ee1bbade05~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oKf56m656CB5a2X:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769830337&amp;x-signature=SD2y%2FqKXyFJbt%2B7U5xa%2BUtLfwSo%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d9e1f0631ef14cd8ba1e63da3fdefdcd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oKf56m656CB5a2X:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769830337&amp;x-signature=fi967oQKjXvx2gfuqinpYmHCYWU%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong>åº”ç”¨åœºæ™¯ï¼šä»æ— éšœç¢æœåŠ¡åˆ°åˆ›æ„å†…å®¹</strong></p>
<p>Qwen3-TTSçš„èƒ½åŠ›ä¼šå¸¦æ¥å“ªäº›å®é™…åº”ç”¨å˜åŒ–ï¼Ÿåœ¨æ— éšœç¢æœåŠ¡é¢†åŸŸï¼Œè§†éšœç”¨æˆ·å¯ä»¥å®šåˆ¶æœ€é€‚åˆè‡ªå·±ç†è§£ä¹ æƒ¯çš„å£°éŸ³ï¼Œä¸å†å—é™äºæœ‰é™çš„é¢„è®¾é€‰é¡¹ã€‚</p>
<p>åœ¨æ•™è‚²å’ŒåŸ¹è®­ä¸­ï¼Œæ•™å¸ˆå¯ä»¥åˆ›é€ å…·æœ‰ç‰¹å®šæƒ…æ„Ÿè¡¨è¾¾çš„å£°éŸ³ï¼Œè®©æ•°å­—å†…å®¹æ›´åŠ ç”ŸåŠ¨å¸å¼•äººã€‚</p>
<p>å½±è§†å’Œæ¸¸æˆè¡Œä¸šå¯ä»¥åˆ©ç”¨å®ƒå¿«é€Ÿç”Ÿæˆè§’è‰²å¯¹è¯ï¼Œç”šè‡³åˆ›é€ ç°å®ä¸­ä¸å­˜åœ¨çš„å£°éŸ³ç±»å‹ã€‚</p>
<p>æ™®é€šç”¨æˆ·ä¹Ÿèƒ½ç”¨æ‰‹æœºåº”ç”¨åˆ›é€ å±äºè‡ªå·±çš„è¯­éŸ³åŠ©æ‰‹å£°éŸ³ï¼Œæˆ–è€…ä¸ºæœ‰å£°è¯»ç‰©å’Œæ’­å®¢å®šåˆ¶ç‹¬ç‰¹è®²è¿°è€…å£°éŸ³ã€‚</p>
<p><strong>é¡¹ç›®ç›¸å…³</strong></p>
<p>æœ¬åœ°å®‰è£…ä¸ä½¿ç”¨ï¼Œæºä»£ç éƒ¨ç½²ï¼Œæ›´å¤šè¯¦ç»†æ­¥éª¤å’Œç”¨æ³•ï¼Œè¯¦è§ä»“åº“æ–‡æ¡£ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">ç¯å¢ƒé…ç½®
è¦å¿«é€Ÿä½¿ç”¨ Qwen3-TTSï¼Œæœ€ç®€å•çš„æ–¹æ³•æ˜¯ä» PyPI å®‰è£…`qwen-tts`Â Python åŒ…ã€‚è¿™å°†æ‹‰å–æ‰€éœ€çš„è¿è¡Œæ—¶ä¾èµ–é¡¹ï¼Œå¹¶å…è®¸æ‚¨åŠ è½½ä»»ä½•å·²å‘å¸ƒçš„ Qwen3-TTS æ¨¡å‹ã€‚
conda create -n qwen3-tts <span class="hljs-attr">python</span>=<span class="hljs-number">3.12</span>Â -y
conda activate qwen3-tts

ç„¶åè¿è¡Œï¼š
pip install -U qwen-tts

å¦‚æœæƒ³åœ¨æœ¬åœ°å¼€å‘æˆ–ä¿®æ”¹ä»£ç ï¼Œè¯·ä»¥å¯ç¼–è¾‘æ¨¡å¼ä»æºä»£ç å®‰è£…ã€‚
git clone https://github.com/QwenLM/Qwen3-TTS.git
cd Qwen3-TTS
pip install -e .

æ­¤å¤–ï¼Œæ¨èä½¿ç”¨ FlashAttentionÂ 2Â æ¥å‡å°‘ GPU å†…å­˜ä½¿ç”¨ã€‚
pip install -U flash-attn --no-build-isolation

å¦‚æœä½ çš„æœºå™¨ RAM å°äº 96GB ä¸”æ‹¥æœ‰å¤§é‡ CPU æ ¸å¿ƒï¼Œè¯·è¿è¡Œï¼š

<span class="hljs-attr">MAX_JOBS</span>=<span class="hljs-number">4</span>Â pip install -U flash-attn --<span class="hljs-literal">no</span>-build-isolation
</code></pre>
<p><strong>å¼€æºç¤¾åŒºï¼š</strong></p>
<pre><code class="hljs language-ruby" lang="ruby"><span class="hljs-title class_">ModerScope</span>ï¼š<span class="hljs-symbol">https:</span>/<span class="hljs-regexp">/www.modelscope.cn/collections</span><span class="hljs-regexp">/Qwen/</span><span class="hljs-title class_">Qwen3</span>-<span class="hljs-variable constant_">TTS</span>
<span class="hljs-title class_">Github</span><span class="hljs-symbol">:https</span><span class="hljs-symbol">://github</span>.com/<span class="hljs-title class_">Qwen</span>LM/<span class="hljs-title class_">Qwen3</span>-<span class="hljs-variable constant_">TTS</span>
<span class="hljs-title class_">HuggingFace</span>ï¼š<span class="hljs-symbol">https:</span>/<span class="hljs-regexp">/huggingface.co/collections</span><span class="hljs-regexp">/Qwen/qwen</span>3-tts
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5642c1a69dca47a0a96c9053fb530b7b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oKf56m656CB5a2X:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769830337&amp;x-signature=LaeJ3Wy91Zb1xEGmChv26ubIXIA%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong>æœ€å</strong></p>
<p>AIä¸å£°éŸ³çš„å…³ç³»æ­£åœ¨å‘ç”Ÿæ ¹æœ¬å˜åŒ–ã€‚è¿™ç§å˜åŒ–å°†ä¼šæ¸—é€åˆ°æˆ‘ä»¬ä¸æ•°å­—ä¸–ç•Œäº¤äº’çš„æ¯ä¸€ä¸ªç¯èŠ‚ï¼Œä»æ—©æ™¨çš„å¤©æ°”é¢„æŠ¥æ’­æŠ¥ï¼Œåˆ°æ·±å¤œçš„æœ‰å£°æ•…äº‹è®²è¿°ï¼Œéƒ½å¯èƒ½ç”±è¿™æ ·æ™ºèƒ½çš„ç³»ç»Ÿç”Ÿæˆã€‚</p>
<p>è™½ç„¶ç°åœ¨AIè¯­éŸ³å·¥å…·ä¸å°‘ï¼Œä½†Qwen3-TTSçš„å¼€æºè®©æˆ‘è§‰å¾—ï¼Œé«˜è´¨é‡çš„å£°éŸ³ç”Ÿæˆä¸å†æ˜¯å°‘æ•°å¤§å…¬å¸çš„ä¸“åˆ©ã€‚</p>
<p>å¼€å‘è€…å¯ä»¥è‡ªç”±ä½¿ç”¨ã€ç”šè‡³äºŒæ¬¡å¼€å‘ï¼Œè¿™è¯´ä¸å®šä¼šå‚¬ç”Ÿå¾ˆå¤šæœ‰è¶£çš„åº”ç”¨ï¼Œæ¯”å¦‚æœ‰å£°ä¹¦å®šåˆ¶ã€è™šæ‹Ÿäººäº’åŠ¨ã€ç”šè‡³å¸®åŠ©è¯­è¨€éšœç¢è€…å‘å£°ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b5dec814dd6e4a8c89279ff13f90ee91~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oKf56m656CB5a2X:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769830337&amp;x-signature=riurxnACVRL2NIlZ1XLSDQXw4tE%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong>è°¢è°¢ä½ çœ‹æˆ‘çš„æ–‡ç« ï¼Œæ—¢ç„¶çœ‹åˆ°è¿™é‡Œäº†ï¼Œå¦‚æœè§‰å¾—ä¸é”™ï¼Œéšæ‰‹ç‚¹ä¸ªèµã€è½¬å‘ã€åœ¨çœ‹ä¸‰è¿å§ï¼Œæ„Ÿè°¢æ„Ÿè°¢ã€‚é‚£æˆ‘ä»¬ï¼Œä¸‹æ¬¡å†è§ã€‚</strong></p>
<p>æ‚¨çš„ä¸€é”®ä¸‰è¿ï¼Œæ˜¯æˆ‘æ›´æ–°çš„æœ€å¤§åŠ¨åŠ›ï¼Œè°¢è°¢</p>
<p>å±±æ°´æœ‰ç›¸é€¢ï¼Œæ¥æ—¥çš†å¯æœŸï¼Œè°¢è°¢é˜…è¯»ï¼Œæˆ‘ä»¬å†ä¼š</p>
<p>æˆ‘æ‰‹ä¸­çš„é‡‘ç®æ£’ï¼Œä¸Šèƒ½é€šå¤©ï¼Œä¸‹èƒ½æ¢æµ·</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[pnpm install å…¨æµç¨‹è§£è¯»ï¼ˆMonorepo + å­åŒ…çº§å¤„ç†ï¼‰]]></title>    <link>https://juejin.cn/post/7598881914202308658</link>    <guid>https://juejin.cn/post/7598881914202308658</guid>    <pubDate>2026-01-25T09:26:58.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7598881914202308658" data-draft-id="7598801700050993190" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="pnpm install å…¨æµç¨‹è§£è¯»ï¼ˆMonorepo + å­åŒ…çº§å¤„ç†ï¼‰"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-25T09:26:58.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="èƒ¡ä¸€é—»"/> <meta itemprop="url" content="https://juejin.cn/user/3984285870588093"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            pnpm install å…¨æµç¨‹è§£è¯»ï¼ˆMonorepo + å­åŒ…çº§å¤„ç†ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3984285870588093/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    èƒ¡ä¸€é—»
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-25T09:26:58.000Z" title="Sun Jan 25 2026 09:26:58 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ç°ä»£å‰ç«¯ monorepo ä¸­ï¼Œ<code>pnpm install</code> çœ‹ä¼¼ä¸€å¥å‘½ä»¤ï¼ŒèƒŒåå´æœ‰ä¸€å¥—ç²¾å¯†çš„ <strong>å…¨å±€è§†å›¾ + å­åŒ…ä¾èµ–ç®¡ç† + æ‰å¹³åŒ–å®‰è£…ç­–ç•¥</strong>ã€‚ä»¥ä¸‹ä»æ ¹ç›®å½•åˆ°æ¯ä¸ªå­åŒ…çš„å®Œæ•´æµç¨‹æ‹†è§£ã€‚</p>
<p>å‡è®¾é¡¹ç›®ç»“æ„å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs">pnpm-workspace.yaml
packages/
  ui/
apps/
  web/
  api/
</code></pre>
<p>æ‰§è¡Œå‘½ä»¤ï¼š</p>
<pre><code class="hljs">pnpm install
</code></pre>
<p>æ•´ä¸ªæµç¨‹å¯æ‹†è§£ä¸º <strong>å…«å¤§é˜¶æ®µ</strong>ï¼š</p>
<hr/>
<h2 data-id="heading-0"><strong>é˜¶æ®µ 0ï¼šåˆå§‹åŒ– &amp; Workspace æ‰«æ</strong></h2>
<p><strong>ç›®æ ‡</strong>ï¼šå»ºç«‹ monorepo å…¨å±€è§†å›¾ï¼Œè¯†åˆ«æ‰€æœ‰å­åŒ…ã€‚</p>
<p><strong>æ ¹ç›®å½•å¤„ç†ï¼š</strong></p>
<ol>
<li>
<p>è¯»å– <code>pnpm-workspace.yaml</code> é…ç½®ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">packages:
<span class="hljs-bullet">  -</span> packages/*
<span class="hljs-bullet">  -</span> apps/*
</code></pre>
<ul>
<li>æ ‡è¯†å“ªäº›ç›®å½•å±äº workspaceã€‚</li>
</ul>
</li>
<li>
<p>ä½¿ç”¨ <strong>Glob</strong> å±•å¼€åŒ¹é…ç›®å½•ï¼š</p>
<ul>
<li><code>packages/*</code> â†’ <code>packages/ui</code></li>
<li><code>apps/*</code> â†’ <code>apps/web</code>, <code>apps/api</code></li>
</ul>
</li>
<li>
<p>éå†æ¯ä¸ªç›®å½•ï¼š</p>
<ul>
<li>æ£€æŸ¥æ˜¯å¦å­˜åœ¨ <code>package.json</code></li>
</ul>
</li>
<li>
<p>æ„å»º <strong>Package Map</strong>ï¼ˆå…¨å±€å†…å­˜è§†å›¾ï¼‰ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">{
  <span class="hljs-string">"@my-org/ui"</span>: { <span class="hljs-built_in">dir</span>: <span class="hljs-string">"packages/ui"</span>, version: <span class="hljs-string">"1.0.0"</span> },
  <span class="hljs-string">"@my-org/web"</span>: { <span class="hljs-built_in">dir</span>: <span class="hljs-string">"apps/web"</span>, version: <span class="hljs-string">"1.0.0"</span> },
  <span class="hljs-string">"@my-org/api"</span>: { <span class="hljs-built_in">dir</span>: <span class="hljs-string">"apps/api"</span>, version: <span class="hljs-string">"1.0.0"</span> }
}
</code></pre>
</li>
</ol>
<p><strong>å­åŒ…å¤„ç†</strong>ï¼š</p>
<ul>
<li>æ­¤é˜¶æ®µå­åŒ…ä»…æä¾› <code>package.json</code> ä¿¡æ¯</li>
<li>ä¸åšå®é™…å®‰è£…ï¼Œåªè¢« pnpm ä½œä¸ºä¾èµ–æºè§£æ</li>
</ul>
<p><strong>æ¯”å–»</strong>ï¼šPackage Map å°±åƒ monorepo çš„æ¥¼å±‚å¯¼è§ˆå›¾ï¼Œæ¯ä¸ªå­åŒ…åŠå…¬å®¤çš„ä½ç½®å’Œç¼–å·éƒ½åœ¨ä¸Šé¢æ ‡æ¸…æ¥šã€‚</p>
<hr/>
<h2 data-id="heading-1"><strong>é˜¶æ®µ 1ï¼šè§£æå­åŒ…ä¾èµ–</strong></h2>
<p><strong>ç›®æ ‡</strong>ï¼šæ˜ç¡®æ¯ä¸ªä¾èµ–çš„æ¥æºä¸ç‰ˆæœ¬ï¼Œç”Ÿæˆè§£æè®¡åˆ’ã€‚</p>
<p><strong>æ ¹ç›®å½•å¤„ç†ï¼š</strong></p>
<ul>
<li>
<p>éå†æ‰€æœ‰å­åŒ… <code>package.json</code></p>
</li>
<li>
<p>è¯†åˆ«ä¾èµ–åè®®ï¼š</p>
<ul>
<li><code>workspace:</code> â†’ æœ¬åœ° workspace åŒ…</li>
<li><code>catalog:</code> â†’ catalog ç®¡ç†çš„ç»Ÿä¸€ç‰ˆæœ¬</li>
<li>æ™®é€š semver â†’ registry ç¬¬ä¸‰æ–¹ä¾èµ–</li>
</ul>
</li>
</ul>
<p><strong>å­åŒ…å¤„ç†</strong>ï¼ˆä»¥ <code>apps/web</code> ä¸ºä¾‹ï¼‰ï¼š</p>
<pre><code class="hljs language-less" lang="less">{
  "<span class="hljs-selector-tag">dependencies</span>": {
    "<span class="hljs-variable">@my-org</span>/ui<span class="hljs-string">": "</span><span class="hljs-attribute">workspace</span>:*",
    <span class="hljs-string">"react"</span>: <span class="hljs-string">"catalog:"</span>,
    <span class="hljs-string">"axios"</span>: <span class="hljs-string">"^1.6.0"</span>
  }
}
</code></pre>
<ol>
<li>
<p>workspace ä¾èµ–ï¼š</p>
<ul>
<li>æŸ¥ Package Map æ‰¾æœ¬åœ°è·¯å¾„</li>
<li>æ ‡è®°ä¸º <strong>link æœ¬åœ°</strong></li>
</ul>
</li>
<li>
<p>catalog ä¾èµ–ï¼š</p>
<ul>
<li>æŸ¥ catalog è¡¨ç¡®å®šç‰ˆæœ¬ï¼Œå¦‚ <code>"^18.2.0"</code></li>
</ul>
</li>
<li>
<p>registry ä¾èµ–ï¼š</p>
<ul>
<li>æ ‡è®°ä¸ºéœ€è¦ç¼“å­˜æˆ–ä¸‹è½½</li>
</ul>
</li>
</ol>
<p><strong>è¾“å‡º</strong>ï¼šæ¯ä¸ªå­åŒ…ç”Ÿæˆ <strong>ä¾èµ–è§£æè®¡åˆ’</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">apps/web:
[
  { name: <span class="hljs-string">"@my-org/ui"</span>, <span class="hljs-built_in">type</span>: <span class="hljs-string">"workspace"</span>, <span class="hljs-built_in">dir</span>: <span class="hljs-string">"packages/ui"</span>, version: <span class="hljs-string">"1.0.0"</span> },
  { name: <span class="hljs-string">"react"</span>, <span class="hljs-built_in">type</span>: <span class="hljs-string">"catalog"</span>, version: <span class="hljs-string">"^18.2.0"</span> },
  { name: <span class="hljs-string">"axios"</span>, <span class="hljs-built_in">type</span>: <span class="hljs-string">"registry"</span>, version: <span class="hljs-string">"^1.6.0"</span> }
]
</code></pre>
<p><strong>æ¯”å–»</strong>ï¼šæ¯ä¸ªå­åŒ…åšè‡ªå·±çš„é‡‡è´­æ¸…å•ï¼Œæ˜ç¡®â€œæœ¬åœ°æ‹¿ / catalog æ‹¿ / registry æ‹¿â€ã€‚</p>
<hr/>
<h2 data-id="heading-2"><strong>é˜¶æ®µ 2ï¼šç‰ˆæœ¬å†²çªè§£å†³ &amp; æ‰å¹³åŒ–ä¼˜åŒ–</strong></h2>
<p><strong>ç›®æ ‡</strong>ï¼šä¿è¯ä¾èµ–ç‰ˆæœ¬ä¸€è‡´ï¼Œå°½é‡å…±äº«ï¼Œå‡å°‘é‡å¤å®‰è£…ã€‚</p>
<p><strong>æ ¹ç›®å½•å¤„ç†ï¼š</strong></p>
<ol>
<li>
<p>æ„å»º <strong>å…¨å±€ä¾èµ–å›¾</strong>ï¼š</p>
<ul>
<li>æ•´åˆæ‰€æœ‰å­åŒ…è§£æè®¡åˆ’</li>
<li>è®°å½•ä¾èµ–æ¥æºã€ç‰ˆæœ¬ã€å­åŒ…ä¾èµ–å…³ç³»</li>
</ul>
</li>
<li>
<p>ç‰ˆæœ¬å†²çªè§£å†³ï¼š</p>
<ul>
<li>ç›¸åŒä¾èµ–ä¸åŒç‰ˆæœ¬ â†’ å°è¯•å•ä¸€å…¼å®¹ç‰ˆæœ¬</li>
<li>ä¸å…¼å®¹ç‰ˆæœ¬ â†’ å­åŒ…éš”ç¦»å®‰è£…</li>
</ul>
</li>
<li>
<p>æ‰å¹³åŒ–ä¼˜åŒ–ï¼š</p>
<ul>
<li>ç›¸åŒç‰ˆæœ¬ä¾èµ–åªå­˜ä¸€ä»½åœ¨ <code>.pnpm</code></li>
<li>å­åŒ… node_modules é€šè¿‡ symlink æŒ‡å‘å…±äº«ä½ç½®</li>
</ul>
</li>
<li>
<p>ç”Ÿæˆæœ€ç»ˆå®‰è£…è®¡åˆ’</p>
</li>
</ol>
<p><strong>å­åŒ…å¤„ç†</strong>ï¼š</p>
<ul>
<li>
<p>æ¯ä¸ªå­åŒ…æ ¹æ®ä¾èµ–è§£æè®¡åˆ’å’Œå…¨å±€ä¼˜åŒ–ç»“æœç”Ÿæˆè‡ªå·±çš„ node_modules ç»“æ„ï¼š</p>
<ul>
<li>workspace â†’ symlink æœ¬åœ°åŒ…</li>
<li>catalog / registry â†’ symlink å…¨å±€ç¼“å­˜</li>
</ul>
</li>
<li>
<p>å­åŒ…å†…éƒ¨ä»æœªå†™ç‰©ç†æ–‡ä»¶ï¼Œåªæ˜¯ç¡®å®šäº†â€œä¾èµ–æœ€ç»ˆæ”¾å“ªã€ç‰ˆæœ¬æ˜¯å¤šå°‘â€</p>
</li>
</ul>
<p><strong>æ¯”å–»</strong>ï¼šåƒä»“åº“åè°ƒé‡‡è´­ï¼š</p>
<ul>
<li>é˜¶æ®µ 1 â†’ æ¯ä¸ªå­åŒ…åˆ—æ¸…å•</li>
<li>é˜¶æ®µ 2 â†’ å†³å®šå“ªäº›ç‰©å“å…±äº«ã€å“ªäº›å•ç‹¬å­˜æ”¾ï¼Œå¹¶ç”»å¥½æŒ‡å‘ç®­å¤´ï¼ˆsymlinkï¼‰</li>
</ul>
<hr/>
<h2 data-id="heading-3"><strong>é˜¶æ®µ 3ï¼šä¸‹è½½ &amp; ç¼“å­˜ç®¡ç†</strong></h2>
<p><strong>ç›®æ ‡</strong>ï¼šæŠŠ registry / catalog ä¾èµ–æ”¾åˆ°æœ¬åœ°ç¼“å­˜ã€‚</p>
<p><strong>æ ¹ç›®å½•å¤„ç†</strong>ï¼š</p>
<ul>
<li>éå†å…¨å±€ä¾èµ–å›¾</li>
<li>æ£€æŸ¥å…¨å±€ç¼“å­˜ <code>~/.pnpm-store</code></li>
<li>ç¼“å­˜æ²¡æœ‰ â†’ ä» npm registry ä¸‹è½½</li>
<li>ä¸‹è½½å®Œæˆ â†’ å†™å…¥ç¼“å­˜</li>
</ul>
<p><strong>å­åŒ…å¤„ç†</strong>ï¼š</p>
<ul>
<li>å­åŒ… node_modules ä¸ç›´æ¥å­˜æ–‡ä»¶</li>
<li>symlink æŒ‡å‘å…¨å±€ç¼“å­˜ / workspace æœ¬åœ°åŒ…</li>
</ul>
<p><strong>æ¯”å–»</strong>ï¼šä»“åº“å…ˆæŸ¥åº“å­˜ï¼Œæ²¡è´§å†ä¹°ï¼Œå­åŒ…åªæŒ‚æŒ‡å‘ç®­å¤´ã€‚</p>
<hr/>
<h2 data-id="heading-4"><strong>é˜¶æ®µ 4ï¼šæ„å»ºå­åŒ… node_modules</strong></h2>
<p><strong>ç›®æ ‡</strong>ï¼šæŠŠä¾èµ–è½åœ°åˆ°æ¯ä¸ªå­åŒ…ã€‚</p>
<p><strong>æ“ä½œ</strong>ï¼š</p>
<ul>
<li>
<p>éå†æ¯ä¸ªå­åŒ…å®‰è£…è®¡åˆ’ï¼š</p>
<ul>
<li>workspace â†’ link æœ¬åœ°åŒ…</li>
<li>catalog / registry â†’ link ç¼“å­˜ç›®å½•</li>
</ul>
</li>
<li>
<p>ç¡®ä¿æ‰å¹³åŒ–ç»“æ„ã€ä¾èµ–æ ‘å®Œæ•´</p>
</li>
</ul>
<p><strong>å­åŒ…å†…éƒ¨ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">apps/web/node_modules/
  @my-org/ui -&gt; ../../packages/ui (symlink)
  react -&gt; ../../.pnpm/react@18.2.0/node_modules/react
  axios -&gt; ../../.pnpm/axios@1.6.0/node_modules/axios
</code></pre>
<p><strong>æ¯”å–»</strong>ï¼šåƒæŠŠå…±äº«ä»“åº“çš„ç‰©å“æ”¾åˆ°åŠå…¬å®¤æ¡Œä¸Šï¼Œé€šè¿‡ symlink æŒ‡å‘çœŸå®ç‰©å“ã€‚</p>
<hr/>
<h2 data-id="heading-5"><strong>é˜¶æ®µ 5ï¼šç”Ÿå‘½å‘¨æœŸè„šæœ¬æ‰§è¡Œ</strong></h2>
<p><strong>ç›®æ ‡</strong>ï¼šæ‰§è¡Œå­åŒ…åˆå§‹åŒ–ä¸æ„å»ºè„šæœ¬ã€‚</p>
<ul>
<li>preinstall â†’ å®‰è£…å‰å‡†å¤‡</li>
<li>install â†’ å†…éƒ¨å®‰è£…è¡Œä¸º</li>
<li>postinstall â†’ æ„å»º/ç”Ÿæˆæ–‡ä»¶/é“¾æ¥å·¥å…·</li>
</ul>
<p><strong>å­åŒ…å¤„ç†</strong>ï¼š</p>
<ul>
<li>æ¯ä¸ªå­åŒ…å¯æ‰§è¡Œè‡ªå·±çš„ lifecycle scriptsï¼Œç¡®ä¿å®‰è£…å®Œæˆå³å¯è¿è¡Œ</li>
</ul>
<hr/>
<h2 data-id="heading-6"><strong>é˜¶æ®µ 6ï¼šlockfile æ›´æ–°</strong></h2>
<p><strong>ç›®æ ‡</strong>ï¼šè®°å½•ä¾èµ–æœ€ç»ˆç‰ˆæœ¬ï¼Œä¿è¯ä¸€è‡´æ€§ã€‚</p>
<ul>
<li>
<p>æ ¹ç›®å½•ç”Ÿæˆ/æ›´æ–° <code>pnpm-lock.yaml</code></p>
</li>
<li>
<p>è®°å½•ï¼š</p>
<ul>
<li>åŒ…å</li>
<li>ç‰ˆæœ¬</li>
<li>æ¥æº</li>
<li>æ ¡éªŒå’Œ</li>
</ul>
</li>
<li>
<p>å­åŒ…æ— éœ€å•ç‹¬æ“ä½œï¼Œä½† lockfile å†³å®šæœªæ¥å®‰è£…ä¸€è‡´æ€§</p>
</li>
</ul>
<hr/>
<h2 data-id="heading-7"><strong>é˜¶æ®µ 7ï¼šæœ€ç»ˆæ£€æŸ¥ &amp; å®Œæˆå®‰è£…</strong></h2>
<ul>
<li>æ ¡éªŒä¾èµ–æ ‘å®Œæ•´æ€§</li>
<li>ç¡®ä¿ symlinkã€ç¼“å­˜ã€node_modules æ­£ç¡®</li>
<li>æ¯ä¸ªå­åŒ…å¯ç›´æ¥ <code>import</code> / <code>require</code> æ‰€æœ‰ä¾èµ–</li>
</ul>
<hr/>
<h2 data-id="heading-8"><strong>å…¨æµç¨‹æ€»ç»“</strong></h2>
<pre><code class="hljs language-scss" lang="scss">pnpm install (æ ¹ç›®å½•)
 â”œâ”€&gt; åˆå§‹åŒ– &amp; workspace æ‰«æ â†’ æ„å»º Package Map
 â”‚     â””â”€&gt; å­åŒ…æä¾› package<span class="hljs-selector-class">.json</span>
 â”œâ”€&gt; éå†å­åŒ… â†’ è§£æä¾èµ– (workspace / catalog / registry)
 â”‚     â””â”€&gt; æ¯ä¸ªå­åŒ…ç”Ÿæˆä¾èµ–è§£æè®¡åˆ’
 â”œâ”€&gt; ç‰ˆæœ¬å†²çªè§£å†³ &amp; æ‰å¹³åŒ–ä¼˜åŒ– â†’ æ„å»ºå…¨å±€ä¾èµ–å›¾
 â”‚     â””â”€&gt; å­åŒ…ç”Ÿæˆæœ€ç»ˆ node_modules å®‰è£…è®¡åˆ’
 â”œâ”€&gt; ä¸‹è½½ç¼ºå¤±ä¾èµ– â†’ å†™å…¥å…¨å±€ç¼“å­˜
 â”‚     â””â”€&gt; å­åŒ… symlink æŒ‡å‘ç¼“å­˜ / workspace
 â”œâ”€&gt; æ„å»ºå­åŒ… node_modules â†’ symlink workspace + catalog/registry
 â”œâ”€&gt; æ‰§è¡Œç”Ÿå‘½å‘¨æœŸè„šæœ¬ (preinstall / install / postinstall)
 â”‚     â””â”€&gt; å­åŒ…å®Œæˆåˆå§‹åŒ–å’Œæ„å»º
 â”œâ”€&gt; æ›´æ–° lockfile â†’ è®°å½•æœ€ç»ˆä¾èµ–ç‰ˆæœ¬ä¸æ¥æº
 â””â”€&gt; æœ€ç»ˆæ£€æŸ¥ â†’ å­åŒ…ä¾èµ–å®Œæ•´ï¼Œå®‰è£…å®Œæˆ
</code></pre>
<hr/>
<h2 data-id="heading-9"><strong>æ ¸å¿ƒç†è§£</strong></h2>
<ol>
<li><strong>Package Map</strong> â†’ workspace å…¨å±€è§†å›¾ï¼Œå­åŒ…ä½ç½® + ç‰ˆæœ¬</li>
<li><strong>workspace åè®®</strong> â†’ å¼ºåˆ¶æœ¬åœ°ä¾èµ–ï¼Œä¿è¯ link</li>
<li><strong>catalog åè®®</strong> â†’ ç»Ÿä¸€ç¬¬ä¸‰æ–¹ä¾èµ–ç‰ˆæœ¬</li>
<li><strong>node_modules æ„å»º</strong> â†’ æ‰å¹³åŒ– + symlinkï¼Œæ¯ä¸ªå­åŒ…çœ‹åˆ°å®Œæ•´ä¾èµ–</li>
<li><strong>ç¼“å­˜ç®¡ç†</strong> â†’ ä¸‹è½½ä¸€æ¬¡ï¼Œå…¨å±€å¤ç”¨</li>
<li><strong>lockfile &amp; lifecycle scripts</strong> â†’ ä¿è¯å®‰è£…ä¸€è‡´æ€§ + åˆå§‹åŒ–å®Œæˆ</li>
</ol>
<blockquote>
<p><strong>ä¸€å¥è¯æ€»ç»“</strong>ï¼š<br/>
<code>pnpm install</code> = æ ¹ç›®å½•æ‰«æ â†’ åè®®è§£æ â†’ ç‰ˆæœ¬å†²çªä¼˜åŒ– â†’ ç¼“å­˜ä¸‹è½½ â†’ å­åŒ… node_modules æ„å»º â†’ ç”Ÿå‘½å‘¨æœŸè„šæœ¬æ‰§è¡Œ â†’ lockfile æ›´æ–° â†’ å­åŒ…å¯ç›´æ¥ä½¿ç”¨ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Hookså¦‚ä½•å®ç° å»this and å»ç»„ä»¶è€¦åˆ]]></title>    <link>https://juejin.cn/post/7598588085597388840</link>    <guid>https://juejin.cn/post/7598588085597388840</guid>    <pubDate>2026-01-25T09:31:02.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7598588085597388840" data-draft-id="7598699872540114963" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Hookså¦‚ä½•å®ç° å»this and å»ç»„ä»¶è€¦åˆ"/> <meta itemprop="keywords" content="å‰ç«¯,React.js,å‰ç«¯æ¡†æ¶"/> <meta itemprop="datePublished" content="2026-01-25T09:31:02.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="sophieæ—­"/> <meta itemprop="url" content="https://juejin.cn/user/2559318799692952"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Hookså¦‚ä½•å®ç° å»this and å»ç»„ä»¶è€¦åˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2559318799692952/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    sophieæ—­
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-25T09:31:02.000Z" title="Sun Jan 25 2026 09:31:02 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»24åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">èƒŒæ™¯</h2>
<p><a href="https://juejin.cn/post/7598287024077242408" target="_blank" title="https://juejin.cn/post/7598287024077242408">ä¸Šç¯‡æ–‡ç« </a>æˆ‘ä»¬èŠäº†Hooksè¯ç”Ÿåˆå¿ƒæ˜¯ä¸ºäº†è§£å†³ä»€ä¹ˆé—®é¢˜ï¼Œä»Šå¤©æˆ‘ä»¬ç»§ç»­æ¢è®¨ Hooksçš„ å…·ä½“æ‰§è¡Œæ–¹æ¡ˆ</p>
<h2 data-id="heading-1">å‰ç½®ï¼šå…ˆå»ºç«‹ã€Œå‡½æ•°ç»„ä»¶ + Hookã€çš„å…¨å±€æ‰§è¡Œæµç¨‹</h2>
<p>Hook çš„æ‰€æœ‰æ“ä½œéƒ½åµŒå¥—åœ¨ React å¤„ç†å‡½æ•°ç»„ä»¶çš„å®Œæ•´æµç¨‹ä¸­ï¼Œå…ˆæŠŠè¿™ä¸ªâ€œå¤§æ¡†æ¶â€è®²æ¸…æ¥šï¼Œåç»­æ¯ä¸ªé—®é¢˜çš„è§£å†³è¿‡ç¨‹éƒ½èƒ½å¥—è¿›è¿™ä¸ªæ¡†æ¶é‡Œï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TD
    A[è§¦å‘å‡½æ•°ç»„ä»¶æ¸²æŸ“] --&gt;|æ¯”å¦‚é¦–æ¬¡æŒ‚è½½/setState/çˆ¶ç»„ä»¶æ›´æ–°| B[React è°ƒç”¨ updateFunctionComponent]
    B --&gt; C[è°ƒç”¨ renderWithHooks:æ­å»º Hook è¿è¡Œç¯å¢ƒ]
    C --&gt; C1[ç»‘å®šå½“å‰ fiber åˆ°å…¨å±€å˜é‡]
    C --&gt; C2[æ¸…ç©º fiber æ—§çš„ Hook é“¾è¡¨/å‰¯ä½œç”¨é“¾è¡¨]
    C --&gt; C3[åˆ‡æ¢ Dispatcher:mount-&gt;åˆå§‹åŒ– Hook,update-&gt;æ›´æ–° Hook]
    C --&gt; D[æ‰§è¡Œå‡½æ•°ç»„ä»¶æœ¬èº«,è§¦å‘å†…éƒ¨æ‰€æœ‰ Hook è°ƒç”¨åŒ…æ‹¬useState/useEffect/è‡ªå®šä¹‰ Hook]
    D --&gt; D1[mount é˜¶æ®µ:åˆ›å»º Hook èŠ‚ç‚¹,å­˜å…¥ fiber.memoizedState é“¾è¡¨]
    D --&gt; D2[update é˜¶æ®µ:ä» fiber è¯»å–æ—§ Hook èŠ‚ç‚¹,è®¡ç®—æ–°çŠ¶æ€/åˆ¤æ–­å‰¯ä½œç”¨æ˜¯å¦æ‰§è¡Œ]
    D --&gt; E[renderWithHooks é‡ç½® Dispatcher,è¿”å›è™šæ‹Ÿ DOM]
    E --&gt; F[React è¿›å…¥ commit é˜¶æ®µ:æ›´æ–°çœŸå® DOM]
    F --&gt; F1[æ‰§è¡Œ useLayoutEffect å›è°ƒ-åŒæ­¥]
    F --&gt; F2[æµè§ˆå™¨ç»˜åˆ¶é¡µé¢]
    F --&gt; F3[å¼‚æ­¥æ‰§è¡Œ useEffect å›è°ƒ]
    F --&gt; G[ç»„ä»¶å¸è½½æ—¶:æ‰§è¡Œ useEffect/useLayoutEffect çš„ cleanup å‡½æ•°] 
</code></pre>
<p>è¿™ä¸ªæµç¨‹æ˜¯ Hook è§£å†³æ‰€æœ‰é—®é¢˜çš„â€œè½½ä½“â€ï¼Œä¸‹é¢æ¯ä¸ªé—®é¢˜çš„è§£å†³è¿‡ç¨‹ï¼Œéƒ½æ˜¯è¿™ä¸ªæµç¨‹ä¸­æŸä¸ªç¯èŠ‚çš„å…·ä½“å®ç°ã€‚</p>
<hr/>
<h2 data-id="heading-2">ä¸€ã€è§£å†³ç±»ç»„ä»¶ <code>this</code> æŒ‡å‘æ··ä¹±ï¼šä»â€œä¾èµ–å®ä¾‹â€åˆ°â€œä¾èµ– fiber + é—­åŒ…â€</h2>
<h3 data-id="heading-3">1. ç±»ç»„ä»¶çš„å…·ä½“ç—›ç‚¹ï¼ˆå¸¦ä»£ç ä¾‹å­ï¼‰</h3>
<p>ç±»ç»„ä»¶çš„çŠ¶æ€ã€æ–¹æ³•éƒ½ç»‘å®šåœ¨ <code>this</code> ä¸Šï¼Œç¨ä¸æ³¨æ„å°±ä¼šå‡ºé—®é¢˜ï¼Œæ¯”å¦‚ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç±»ç»„ä»¶çš„ this å‘</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ClassApp</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Component</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">props</span>) {
    <span class="hljs-variable language_">super</span>(props);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = { <span class="hljs-attr">count</span>: <span class="hljs-number">0</span> };
    <span class="hljs-comment">// å¿…é¡»æ‰‹åŠ¨ bind thisï¼Œå¦åˆ™ç‚¹å‡»æ—¶ this ä¸º undefined</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">handleClick</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">handleClick</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>);
  }

  <span class="hljs-title function_">handleClick</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// å¼‚æ­¥ setState ä¸­ï¼Œthis.state å¯èƒ½æ‹¿åˆ°æ—§å€¼</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>({ <span class="hljs-attr">count</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>.<span class="hljs-property">count</span> + <span class="hljs-number">1</span> });
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>.<span class="hljs-property">count</span>); <span class="hljs-comment">// è¾“å‡ºæ—§å€¼ï¼Œè€Œéæ›´æ–°åçš„å€¼</span>
  }
 
  <span class="hljs-title function_">render</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{this.handleClick}</span>&gt;</span>{this.state.count}<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>;
  }
}
</code></pre>
<p>ç—›ç‚¹æœ¬è´¨ï¼š<code>this</code> æ˜¯åŠ¨æ€çš„ï¼ŒçŠ¶æ€ä¾èµ– <code>this</code> è®¿é—®ï¼Œå¼‚æ­¥æ›´æ–°+ç»‘å®šé”™è¯¯ä¼šå¯¼è‡´çŠ¶æ€è¯»å–/ä¿®æ”¹å¼‚å¸¸ã€‚</p>
<h4 data-id="heading-4">2. Hook çš„è§£å†³æ€è·¯ + å®Œæ•´å®ç°è¿‡ç¨‹</h4>
<p>æ ¸å¿ƒé€»è¾‘ï¼š<strong>å½»åº•æŠ›å¼ƒ <code>this</code>ï¼ŒæŠŠçŠ¶æ€å­˜åœ¨ fiber èŠ‚ç‚¹ï¼ˆæŒä¹…åŒ–ï¼‰ï¼Œç”¨é—­åŒ…ä¿å­˜å½“å‰æ¸²æŸ“çš„çŠ¶æ€ï¼ˆæ— éœ€ this è®¿é—®ï¼‰</strong>ã€‚</p>
<h5 data-id="heading-5">æ­¥éª¤ 1ï¼šrenderWithHooks æ­å»ºç¯å¢ƒï¼ˆç»‘å®š fiberï¼‰</h5>
<p>å½“æ‰§è¡Œ <code>renderWithHooks</code> æ—¶ï¼Œä¼šæŠŠå½“å‰ç»„ä»¶çš„ fiber ç»‘å®šåˆ°å…¨å±€å˜é‡ <code>currentlyRenderingFiber</code>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç®€åŒ–ç‰ˆ renderWithHooks æ ¸å¿ƒä»£ç </span>
<span class="hljs-keyword">let</span> currentlyRenderingFiber; <span class="hljs-comment">// å…¨å±€ï¼šæ ‡è®°å½“å‰æ¸²æŸ“çš„ fiber</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">renderWithHooks</span>(<span class="hljs-params">workInProgress, Component</span>) {
  currentlyRenderingFiber = workInProgress; <span class="hljs-comment">// ç»‘å®š fiber</span>
  workInProgress.<span class="hljs-property">memoizedState</span> = <span class="hljs-literal">null</span>; <span class="hljs-comment">// æ¸…ç©ºæ—§ Hook é“¾è¡¨</span>
  <span class="hljs-title class_">ReactCurrentDispatcher</span>.<span class="hljs-property">current</span> = <span class="hljs-title class_">HooksDispatcherOnMount</span>; <span class="hljs-comment">// åˆ‡æ¢åˆ° mount æ¨¡å¼</span>
  <span class="hljs-keyword">const</span> children = <span class="hljs-title class_">Component</span>(); <span class="hljs-comment">// æ‰§è¡Œå‡½æ•°ç»„ä»¶</span>
  <span class="hljs-title class_">ReactCurrentDispatcher</span>.<span class="hljs-property">current</span> = <span class="hljs-title class_">ContextOnlyDispatcher</span>; <span class="hljs-comment">// é‡ç½®</span>
  <span class="hljs-keyword">return</span> children;
}
</code></pre>
<h3 data-id="heading-6">è¿™é‡Œæœ‰å‡ ä¸ªæ¦‚å¿µéœ€è¦è·Ÿå¤§å®¶ç§‘æ™®ä¸€ä¸‹</h3>
<h3 data-id="heading-7">ä»€ä¹ˆæ˜¯ workInProgressï¼Ÿå®ƒæ˜¯ä½•æ—¶è¢«åˆ›å»ºå‡ºæ¥çš„ï¼Ÿ</h3>
<h4 data-id="heading-8">å…ˆå˜æ¸…ä¸¤ä¸ªæ ¸å¿ƒ fiber å˜é‡ï¼ˆrenderWithHooks çš„å…¥å‚ï¼‰</h4>
<p>åœ¨ <code>renderWithHooks</code> çš„è°ƒç”¨é€»è¾‘é‡Œï¼Œå®ƒçš„å…¥å‚æ˜¯è¿™æ ·çš„ï¼ˆå›é¡¾ä¹‹å‰çš„ç®€åŒ–ä»£ç ï¼‰ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">renderWithHooks</span>(<span class="hljs-params">current, workInProgress, Component, props</span>) {
  currentlyRenderingFiber = workInProgress; <span class="hljs-comment">// ç»‘å®šçš„æ˜¯ workInProgress</span>
  <span class="hljs-comment">// ... å…¶ä»–é€»è¾‘</span>
}
</code></pre>
<p>è¿™ä¸¤ä¸ª fiber çš„å«ä¹‰å’Œé¦–æ¬¡æ¸²æŸ“æ—¶çš„çŠ¶æ€å®Œå…¨ä¸åŒï¼š</p>























<table><thead><tr><th>fiber å˜é‡</th><th>æ ¸å¿ƒå«ä¹‰</th><th>é¦–æ¬¡æ¸²æŸ“æ—¶çš„å€¼</th><th>éé¦–æ¬¡æ¸²æŸ“æ—¶çš„å€¼</th></tr></thead><tbody><tr><td><code>current</code></td><td>å·²æäº¤åˆ°çœŸå® DOM çš„ã€Œæ—§ fiberã€ï¼ˆç¨³å®šç‰ˆï¼‰</td><td><code>null</code></td><td>ä¸Šä¸€æ¬¡æ¸²æŸ“å®ŒæˆåæŒ‚è½½åˆ° DOM çš„ fiber</td></tr><tr><td><code>workInProgress</code></td><td>æœ¬æ¬¡æ¸²æŸ“æ­£åœ¨æ„å»ºçš„ã€Œæ–° fiberã€ï¼ˆå·¥ä½œç‰ˆï¼‰</td><td>æœ‰å€¼ï¼ˆé nullï¼‰</td><td>åŸºäº current å¤åˆ¶/æ›´æ–°çš„æ–° fiber</td></tr></tbody></table>
<h4 data-id="heading-9">ç¬¬ä¸€æ¬¡æ¸²æŸ“æ—¶çš„ fiber å®Œæ•´åˆ›å»ºæµç¨‹ï¼ˆä¸ºä»€ä¹ˆ workInProgress ä¸æ˜¯ nullï¼‰</h4>
<p>å½“ä½ æ‰§è¡Œ <code>ReactDOM.render(&lt;App /&gt;, root)</code> è§¦å‘é¦–æ¬¡æ¸²æŸ“æ—¶ï¼ŒReact ä¼šå…ˆå®Œæˆã€ŒworkInProgress fiber çš„åˆ›å»ºã€ï¼Œå†è°ƒç”¨ <code>renderWithHooks</code>ï¼Œæ•´ä¸ªæµç¨‹æ˜¯ï¼š</p>
<h5 data-id="heading-10">æ­¥éª¤ 1ï¼šReact åˆå§‹åŒ–æ ¹ fiber</h5>
<p>React ä¼šå…ˆä¸ºæ ¹èŠ‚ç‚¹ï¼ˆ<code>root</code>ï¼‰åˆ›å»ºä¸€ä¸ªã€Œæ ¹ fiberã€ï¼Œç„¶åä¸º <code>&lt;App /&gt;</code> ç»„ä»¶åˆ›å»ºå¯¹åº”çš„ <code>workInProgress fiber</code> èŠ‚ç‚¹ï¼Œè¿™ä¸ªèŠ‚ç‚¹ä¼šåŒ…å«åŸºç¡€å±æ€§ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// é¦–æ¬¡æ¸²æŸ“æ—¶ï¼ŒReact å…ˆåˆ›å»ºçš„ App ç»„ä»¶ workInProgress fiber</span>
<span class="hljs-keyword">const</span> workInProgress = {
  <span class="hljs-attr">memoizedState</span>: <span class="hljs-literal">null</span>, <span class="hljs-comment">// åˆå§‹ä¸ºç©ºï¼Œåç»­å­˜ Hook é“¾è¡¨</span>
  <span class="hljs-attr">stateNode</span>: <span class="hljs-title class_">App</span>,      <span class="hljs-comment">// æŒ‡å‘å‡½æ•°ç»„ä»¶æœ¬èº«ï¼ˆApp å‡½æ•°ï¼‰</span>
  <span class="hljs-attr">type</span>: <span class="hljs-title class_">App</span>,           <span class="hljs-comment">// ç»„ä»¶ç±»å‹</span>
  <span class="hljs-comment">// å…¶ä»–æ ¸å¿ƒå±æ€§ï¼ˆæ¯”å¦‚ propsã€effectTag ç­‰ï¼‰</span>
};
</code></pre>
<p>æ­¤æ—¶ <code>workInProgress</code> æ˜¯ä¸€ä¸ªå®Œæ•´çš„ fiber å¯¹è±¡ï¼Œ<strong>ç»å¯¹ä¸æ˜¯ null</strong>â€”â€”å¦‚æœå®ƒæ˜¯ nullï¼ŒHook å°±æ²¡æœ‰â€œæŒ‚è½½çŠ¶æ€çš„è½½ä½“â€ï¼Œæ•´ä¸ª Hook æœºåˆ¶ä¼šç›´æ¥å´©æºƒã€‚</p>
<h5 data-id="heading-11">æ­¥éª¤ 2ï¼šè°ƒç”¨ renderWithHooksï¼Œç»‘å®š workInProgress åˆ°å…¨å±€</h5>
<p>React è°ƒç”¨ <code>updateFunctionComponent</code>ï¼ˆå¤„ç†å‡½æ•°ç»„ä»¶çš„æ ¸å¿ƒå‡½æ•°ï¼‰ï¼Œç„¶ååœ¨å†…éƒ¨è°ƒç”¨ <code>renderWithHooks</code>ï¼Œå…¥å‚ä¸ºï¼š</p>
<ul>
<li><code>current: null</code>ï¼ˆé¦–æ¬¡æ¸²æŸ“æ²¡æœ‰å·²æäº¤çš„æ—§ fiberï¼‰ï¼›</li>
<li><code>workInProgress: æ­¥éª¤1åˆ›å»ºçš„ fiber å¯¹è±¡</code>ï¼ˆé nullï¼‰ï¼›</li>
<li><code>Component: App</code>ï¼ˆä½ çš„å‡½æ•°ç»„ä»¶ï¼‰ã€‚</li>
</ul>
<p>æ‰€ä»¥æ‰§è¡Œ <code>currentlyRenderingFiber = workInProgress</code> åï¼Œè¿™ä¸ªå…¨å±€å˜é‡çš„å€¼æ˜¯<strong>æ­¥éª¤1åˆ›å»ºçš„ fiber å¯¹è±¡</strong>ï¼Œè€Œé nullã€‚</p>
<h5 data-id="heading-12">æ­¥éª¤ 3ï¼šcurrent ä¸º null çš„å½±å“ï¼ˆåˆ‡æ¢ Dispatcherï¼‰</h5>
<p>æ­£å› ä¸º <code>current === null</code>ï¼Œ<code>renderWithHooks</code> ä¼šæŠŠ <code>ReactCurrentDispatcher.current</code> åˆ‡æ¢ä¸º <code>HooksDispatcherOnMount</code>ï¼ˆæŒ‚è½½ç‰ˆ Dispatcherï¼‰ï¼Œè¿™ä¹Ÿæ˜¯é¦–æ¬¡æ¸²æŸ“æ—¶ <code>useState</code> ä¼šæ‰§è¡Œ <code>mountState</code> åˆå§‹åŒ– Hook çš„åŸå› ã€‚</p>
<h4 data-id="heading-13">ä¸ºä»€ä¹ˆä½ ä¼šè¯¯ä»¥ä¸ºâ€œé¦–æ¬¡æ¸²æŸ“ fiber æ˜¯ nullâ€ï¼Ÿ</h4>
<p>å¤§æ¦‚ç‡æ˜¯æ··æ·†äº†ä¸¤ä¸ªç‚¹ï¼š</p>
<ol>
<li><strong>æŠŠ <code>current</code> å½“æˆäº† <code>workInProgress</code></strong>ï¼š<code>current</code> é¦–æ¬¡æ¸²æŸ“æ˜¯ nullï¼Œä½†å®ƒåªæ˜¯â€œæ—§ fiber å¼•ç”¨â€ï¼Œä¸æ˜¯ Hook ä¾èµ–çš„â€œå½“å‰å·¥ä½œ fiberâ€ï¼›</li>
<li><strong>æŠŠ <code>workInProgress.memoizedState</code> å½“æˆäº† fiber æœ¬èº«</strong>ï¼šé¦–æ¬¡æ¸²æŸ“æ—¶ <code>workInProgress.memoizedState</code> æ˜¯ nullï¼ˆå› ä¸ºè¿˜æ²¡åˆ›å»º Hook é“¾è¡¨ï¼‰ï¼Œä½† fiber èŠ‚ç‚¹æœ¬èº«æ˜¯å®Œæ•´çš„ï¼Œ<code>memoizedState</code> åªæ˜¯ fiber çš„ä¸€ä¸ªå±æ€§ã€‚</li>
</ol>
<h4 data-id="heading-14">éªŒè¯ï¼šå¦‚æœ workInProgress æ˜¯ null ä¼šæ€æ ·ï¼Ÿ</h4>
<p>æˆ‘ä»¬å¯ä»¥åæ¨â€”â€”å¦‚æœ <code>currentlyRenderingFiber</code> æ˜¯ nullï¼Œå½“ä½ é¦–æ¬¡æ¸²æŸ“è°ƒç”¨ <code>useState</code> æ—¶ï¼Œ<code>mountState</code> é‡Œçš„è¿™æ®µä»£ç ä¼šç›´æ¥å‡ºé”™ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">mountState</span>(<span class="hljs-params">initialState</span>) {
  <span class="hljs-keyword">const</span> hook = { <span class="hljs-comment">/* ... */</span> };
  <span class="hljs-comment">// å¦‚æœ currentlyRenderingFiber æ˜¯ nullï¼Œè¿™é‡Œä¼šæŠ¥â€œæ— æ³•è¯»å– memoizedState çš„ undefinedâ€</span>
  <span class="hljs-keyword">if</span> (!currentlyRenderingFiber.<span class="hljs-property">memoizedState</span>) {
    currentlyRenderingFiber.<span class="hljs-property">memoizedState</span> = hook;
  }
  <span class="hljs-comment">// ...</span>
}
</code></pre>
<p>è€Œ React æºç ä¸­åšäº†ä¸¥æ ¼çš„è¾¹ç•Œå¤„ç†ï¼š<strong>åªæœ‰å½“ workInProgress å­˜åœ¨æ—¶ï¼Œæ‰ä¼šæ‰§è¡Œ renderWithHooks</strong>ï¼Œæ‰€ä»¥é¦–æ¬¡æ¸²æŸ“æ—¶è¿™ä¸ªå…¨å±€å˜é‡å¿…ç„¶æœ‰å€¼ã€‚</p>
<h4 data-id="heading-15">æ€»ç»“</h4>
<ol>
<li>é¦–æ¬¡æ¸²æŸ“æ—¶ï¼Œ<code>renderWithHooks</code> ç»‘å®šçš„ <code>currentlyRenderingFiber</code>ï¼ˆå³ <code>workInProgress</code>ï¼‰<strong>ä¸æ˜¯ null</strong>ï¼Œå®ƒæ˜¯ <strong><code>React æå‰åˆ›å»ºçš„ã€å½“å‰æ­£åœ¨æ„å»ºçš„ fiber èŠ‚ç‚¹ï¼›ä¹Ÿå°±æ˜¯è¯´åœ¨æ‰§è¡Œå‡½æ•°ç»„ä»¶æ—¶æå‰åˆ›å»ºçš„</code></strong></li>
<li>é¦–æ¬¡æ¸²æŸ“æ—¶ <code>current</code> æ˜¯ nullï¼ˆæ— æ—§ fiberï¼‰ï¼Œè¿™æ˜¯åˆ‡æ¢â€œæŒ‚è½½ç‰ˆ Dispatcherâ€çš„åˆ¤æ–­ä¾æ®ï¼›</li>
<li><code>workInProgress.memoizedState</code> åˆå§‹ä¸º nullï¼ˆæ—  Hook é“¾è¡¨ï¼‰ï¼Œä½† fiber èŠ‚ç‚¹æœ¬èº«æ˜¯å®Œæ•´çš„ï¼Œåç»­ä¼šè¢« Hook èŠ‚ç‚¹å¡«å……ã€‚</li>
</ol>
<p>è¿™ä¸ªç»†èŠ‚ä¹Ÿå°è¯äº†ä¹‹å‰çš„æ ¸å¿ƒç»“è®ºï¼šHook çš„çŠ¶æ€æœ€ç»ˆæŒ‚è½½åœ¨ <code>workInProgress</code>ï¼ˆåç»­ä¼šå˜æˆ <code>current</code>ï¼‰fiber ä¸Šï¼Œé¦–æ¬¡æ¸²æŸ“æ—¶ React å·²ç»ä¸ºå‡½æ•°ç»„ä»¶å‡†å¤‡å¥½äº†è¿™ä¸ªâ€œçŠ¶æ€è½½ä½“â€ï¼Œæ‰€ä»¥ Hook æ‰èƒ½æ­£å¸¸åˆå§‹åŒ–ã€‚</p>
<h3 data-id="heading-16">ä¸ºä»€ä¹ˆæ¯æ¬¡æ¸²æŸ“å‰éœ€è¦ æ¸…ç©ºhooké“¾è¡¨ï¼Ÿ</h3>
<h4 data-id="heading-17">å…ˆæ˜ç¡®ï¼šâ€œæ¸…ç©ºâ€çš„ä¸æ˜¯ã€Œæ—§çŠ¶æ€ã€ï¼Œæ˜¯ã€Œæœ¬æ¬¡æ¸²æŸ“æ–° fiber çš„ä¸´æ—¶é“¾è¡¨ã€</h4>
<p>é¦–å…ˆè¦çº æ­£ä¸€ä¸ªè®¤çŸ¥ï¼š
<code>renderWithHooks</code> é‡Œæ¸…ç©ºçš„æ˜¯ <code>workInProgress.memoizedState</code>ï¼ˆæœ¬æ¬¡æ¸²æŸ“çš„æ–° fiberï¼‰ï¼Œè€Œä¸æ˜¯ <code>current.memoizedState</code>ï¼ˆå·²æäº¤çš„æ—§ fiberï¼‰â€”â€”<strong><code>æ—§çŠ¶æ€ä¾ç„¶ä¿å­˜åœ¨ </code>current<code> fiber ä¸­ï¼Œæ¸…ç©ºåªæ˜¯è®©æ–° fiber ä»â€œç©ºç™½â€å¼€å§‹é‡æ–°æ„å»ºé“¾è¡¨</code></strong>ã€‚</p>
<p>ç®€åŒ–ä»£ç å†å¼ºè°ƒè¿™ä¸€ç‚¹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">renderWithHooks</span>(<span class="hljs-params">current, workInProgress, Component</span>) {
  currentlyRenderingFiber = workInProgress;
  
  <span class="hljs-comment">// æ¸…ç©ºçš„æ˜¯ã€Œæœ¬æ¬¡æ¸²æŸ“çš„æ–° fiberã€çš„é“¾è¡¨ï¼Œä¸æ˜¯æ—§ fiber çš„</span>
  workInProgress.<span class="hljs-property">memoizedState</span> = <span class="hljs-literal">null</span>; <span class="hljs-comment">// æ¸…ç©º Hook é“¾è¡¨ï¼ˆæ–° fiberï¼‰</span>
  workInProgress.<span class="hljs-property">updateQueue</span> = <span class="hljs-literal">null</span>;   <span class="hljs-comment">// æ¸…ç©ºå‰¯ä½œç”¨é“¾è¡¨ï¼ˆæ–° fiberï¼‰</span>
  
  <span class="hljs-comment">// åˆ‡æ¢ Dispatcherï¼šmount/update</span>
  <span class="hljs-title class_">ReactCurrentDispatcher</span>.<span class="hljs-property">current</span> = current === <span class="hljs-literal">null</span> ? <span class="hljs-title class_">HooksDispatcherOnMount</span> : <span class="hljs-title class_">HooksDispatcherOnUpdate</span>;
  
  <span class="hljs-keyword">const</span> children = <span class="hljs-title class_">Component</span>(); <span class="hljs-comment">// æ‰§è¡Œç»„ä»¶ï¼Œé‡æ–°æ„å»ºæ–°é“¾è¡¨</span>
  <span class="hljs-comment">// ...</span>
}
</code></pre>
<h4 data-id="heading-18">æ ¸å¿ƒåŸå›  1ï¼šä¿è¯ Hook é“¾è¡¨ä¸ã€Œæœ¬æ¬¡æ¸²æŸ“çš„ Hook è°ƒç”¨é¡ºåºã€ä¸¥æ ¼ä¸€è‡´</h4>
<p>å‡½æ•°ç»„ä»¶çš„æ ¸å¿ƒç‰¹æ€§æ˜¯ã€Œæ¯æ¬¡æ¸²æŸ“éƒ½ä¼šé‡æ–°æ‰§è¡Œæ•´ä¸ªå‡½æ•°ã€ï¼ŒHook çš„è°ƒç”¨é¡ºåºå¯èƒ½å› é€»è¾‘å˜åŒ–ï¼ˆæ¯”å¦‚æ¡ä»¶ Hookï¼Œè™½ç„¶ä¸æ¨èï¼Œä½† React è¦å…¼å®¹ï¼‰å‘ç”Ÿæ”¹å˜ã€‚æ¸…ç©ºæ—§é“¾è¡¨ï¼Œæ‰èƒ½è®©æ–°é“¾è¡¨å®Œå…¨åŒ¹é…æœ¬æ¬¡çš„è°ƒç”¨é¡ºåºã€‚</p>
<h5 data-id="heading-19">åœºæ™¯ï¼šæ›´æ–°æ¸²æŸ“æ—¶ Hook è°ƒç”¨æ•°é‡å˜åŒ–ï¼ˆåä¾‹ï¼šä¸æ¸…ç©ºä¼šé”™ä½ï¼‰</h5>
<p>å‡è®¾é¦–æ¬¡æ¸²æŸ“ç»„ä»¶æœ‰ 2 ä¸ª useStateï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// é¦–æ¬¡æ¸²æŸ“ï¼ˆmountï¼‰</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [a, setA] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">1</span>); <span class="hljs-comment">// Hook1</span>
  <span class="hljs-keyword">const</span> [b, setB] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">2</span>); <span class="hljs-comment">// Hook2</span>
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{a + b}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
}
</code></pre>
<p>æ­¤æ—¶ <code>current.memoizedState</code>ï¼ˆæ—§ fiberï¼‰çš„ Hook é“¾è¡¨æ˜¯ï¼š<code>Hook1 â†’ Hook2</code>ã€‚</p>
<p>å¦‚æœæ›´æ–°æ¸²æŸ“æ—¶ï¼Œç»„ä»¶é€»è¾‘å˜äº†ï¼Œåªè°ƒç”¨ 1 ä¸ª useStateï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ›´æ–°æ¸²æŸ“ï¼ˆupdateï¼‰</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [a, setA] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">1</span>); <span class="hljs-comment">// ä»… Hook1</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-literal">false</span>) { <span class="hljs-comment">// æ¡ä»¶ä¸æ»¡è¶³ï¼Œè·³è¿‡ Hook2</span>
    <span class="hljs-keyword">const</span> [b, setB] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">2</span>);
  }
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{a}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
}
</code></pre>
<h6 data-id="heading-20">æƒ…å†µ 1ï¼šæ¸…ç©º workInProgress çš„æ—§é“¾è¡¨ï¼ˆæ­£ç¡®é€»è¾‘ï¼‰</h6>
<ul>
<li><code>workInProgress.memoizedState</code> è¢«ç½®ä¸º nullï¼›</li>
<li>æ‰§è¡Œç»„ä»¶ï¼Œåªè°ƒç”¨ Hook1ï¼Œæ–°é“¾è¡¨ä¸º <code>Hook1</code>ï¼›</li>
<li>React ä» <code>current</code> è¯»å–æ—§ Hook1 çš„çŠ¶æ€ï¼ˆ1ï¼‰ï¼Œèµ‹å€¼ç»™æ–° Hook1ï¼›</li>
<li>æœ€ç»ˆæ–°é“¾è¡¨ä¸æœ¬æ¬¡è°ƒç”¨é¡ºåºä¸€è‡´ï¼ŒçŠ¶æ€æ­£ç¡®ã€‚</li>
</ul>
<h6 data-id="heading-21">æƒ…å†µ 2ï¼šä¸æ¸…ç©º workInProgress çš„æ—§é“¾è¡¨ï¼ˆé”™è¯¯é€»è¾‘ï¼‰</h6>
<ul>
<li><code>workInProgress.memoizedState</code> è¿˜ä¿ç•™ç€ä¸Šæ¬¡çš„ <code>Hook1 â†’ Hook2</code>ï¼›</li>
<li>æ‰§è¡Œç»„ä»¶ï¼Œåªè°ƒç”¨ Hook1ï¼ŒReact ä¼šæŠŠæ–° Hook1 æ‹¼åœ¨æ—§é“¾è¡¨åï¼Œæ–°é“¾è¡¨å˜æˆ <code>Hook1ï¼ˆæ—§ï¼‰â†’ Hook2ï¼ˆæ—§ï¼‰â†’ Hook1ï¼ˆæ–°ï¼‰</code>ï¼›</li>
<li>æ­¤æ—¶ Hook é¡ºåºå®Œå…¨æ··ä¹±ï¼Œæ–° Hook1 ä¼šè¯»å–æ—§ Hook2 çš„çŠ¶æ€ï¼ˆ2ï¼‰ï¼Œå¯¼è‡´çŠ¶æ€é”™ä½ã€‚</li>
</ul>
<p>ğŸ‘‰ æœ¬è´¨ï¼š<strong><code>Hook ä¾èµ–ã€Œé“¾è¡¨é¡ºåºã€è€Œéâ€œå˜é‡åâ€å…³è”çŠ¶æ€ï¼Œæ¸…ç©ºæ—§é“¾è¡¨æ˜¯ä¸ºäº†è®©æ–°é“¾è¡¨â€œä»é›¶å¼€å§‹â€ï¼Œ100% åŒ¹é…æœ¬æ¬¡çš„è°ƒç”¨é¡ºåºï¼Œé¿å…æ—§é“¾è¡¨çš„æ®‹ç•™èŠ‚ç‚¹å¹²æ‰°ã€‚</code></strong></p>
<h4 data-id="heading-22">æ ¸å¿ƒåŸå›  2ï¼šé¿å…æ—§å‰¯ä½œç”¨æ®‹ç•™ï¼Œä¿è¯å‰¯ä½œç”¨æ‰§è¡Œé€»è¾‘ç¬¦åˆæœ¬æ¬¡æ¸²æŸ“</h4>
<p>å‰¯ä½œç”¨é“¾è¡¨ï¼ˆ<code>updateQueue</code>ï¼‰å­˜å‚¨çš„æ˜¯ useEffect/useLayoutEffect çš„æ‰§è¡Œä¿¡æ¯ï¼ˆæ¯”å¦‚ callbackã€depsã€cleanupï¼‰ã€‚å¦‚æœä¸æ¸…ç©ºï¼Œæ—§çš„å‰¯ä½œç”¨ä¼šå’Œæœ¬æ¬¡çš„å‰¯ä½œç”¨æ··åœ¨ä¸€èµ·ï¼Œå¯¼è‡´ï¼š</p>
<ol>
<li>å·²å¤±æ•ˆçš„å‰¯ä½œç”¨è¢«é‡å¤æ‰§è¡Œï¼›</li>
<li>æœ¬æ¬¡çš„å‰¯ä½œç”¨è¢«æ—§å‰¯ä½œç”¨è¦†ç›–ï¼›</li>
<li>cleanup å‡½æ•°æ‰§è¡Œå¼‚å¸¸ã€‚</li>
</ol>
<h5 data-id="heading-23">åœºæ™¯ï¼šuseEffect çš„ deps å˜åŒ–ï¼ˆåä¾‹ï¼šä¸æ¸…ç©ºä¼šé‡å¤æ‰§è¡Œæ—§å‰¯ä½œç”¨ï¼‰</h5>
<p>é¦–æ¬¡æ¸²æŸ“çš„ useEffectï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// é¦–æ¬¡æ¸²æŸ“</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ—§å‰¯ä½œç”¨ï¼šç›‘å¬ resize'</span>);
    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'resize'</span>, handleResize);
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'resize'</span>, handleResize);
  }, []); <span class="hljs-comment">// ç©º deps</span>
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>App<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
}
</code></pre>
<p>æ­¤æ—¶ <code>workInProgress.updateQueue</code> å­˜å‚¨çš„æ˜¯â€œç›‘å¬ resizeâ€çš„å‰¯ä½œç”¨ã€‚</p>
<p>æ›´æ–°æ¸²æŸ“æ—¶ï¼ŒuseEffect é€»è¾‘å˜äº†ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ›´æ–°æ¸²æŸ“</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ–°å‰¯ä½œç”¨ï¼šç›‘å¬ scroll'</span>);
    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'scroll'</span>, handleScroll);
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'scroll'</span>, handleScroll);
  }, []);
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>App<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
}
</code></pre>
<h6 data-id="heading-24">æƒ…å†µ 1ï¼šæ¸…ç©ºå‰¯ä½œç”¨é“¾è¡¨ï¼ˆæ­£ç¡®é€»è¾‘ï¼‰</h6>
<ul>
<li><code>workInProgress.updateQueue</code> è¢«ç½®ä¸º nullï¼›</li>
<li>æ‰§è¡Œç»„ä»¶ï¼Œæ”¶é›†æ–°çš„â€œç›‘å¬ scrollâ€å‰¯ä½œç”¨ï¼›</li>
<li>commit é˜¶æ®µåªæ‰§è¡Œæ–°å‰¯ä½œç”¨ï¼Œæ—§å‰¯ä½œç”¨çš„ cleanup è¢«æ‰§è¡Œï¼ˆç§»é™¤ resize ç›‘å¬ï¼‰ï¼Œæ–°å‰¯ä½œç”¨ç”Ÿæ•ˆã€‚</li>
</ul>
<h6 data-id="heading-25">æƒ…å†µ 2ï¼šä¸æ¸…ç©ºå‰¯ä½œç”¨é“¾è¡¨ï¼ˆé”™è¯¯é€»è¾‘ï¼‰</h6>
<ul>
<li><code>workInProgress.updateQueue</code> ä¿ç•™æ—§çš„â€œresize ç›‘å¬â€å‰¯ä½œç”¨ï¼›</li>
<li>æ‰§è¡Œç»„ä»¶ï¼Œæ”¶é›†æ–°çš„â€œscroll ç›‘å¬â€å‰¯ä½œç”¨ï¼Œé“¾è¡¨å˜æˆã€Œæ—§å‰¯ä½œç”¨ â†’ æ–°å‰¯ä½œç”¨ã€ï¼›</li>
<li>commit é˜¶æ®µä¼šåŒæ—¶æ‰§è¡Œä¸¤ä¸ªå‰¯ä½œç”¨ï¼šæ—¢ç›‘å¬ resize åˆç›‘å¬ scrollï¼Œä¸”æ—§å‰¯ä½œç”¨çš„ cleanup ä¸ä¼šè¢«è§¦å‘ï¼Œå¯¼è‡´å†…å­˜æ³„æ¼ã€‚</li>
</ul>
<h4 data-id="heading-26">è¡¥å……ï¼šé¦–æ¬¡æ¸²æŸ“æ—¶æ¸…ç©ºçš„æ„ä¹‰ï¼ˆå…œåº•ï¼‰</h4>
<p>é¦–æ¬¡æ¸²æŸ“æ—¶ï¼Œ<code>workInProgress.memoizedState</code> æœ¬æ¥å°±æ˜¯ nullï¼Œæ¸…ç©ºæ“ä½œçœ‹ä¼¼â€œå¤šä½™â€ï¼Œä½†å…¶å®æ˜¯ React çš„ã€Œé˜²å¾¡æ€§ç¼–ç¨‹ã€ï¼š</p>
<ol>
<li>é¿å… fiber èŠ‚ç‚¹å¤ç”¨å¯¼è‡´çš„æ®‹ç•™ï¼ˆæ¯”å¦‚çƒ­æ›´æ–°æ—¶ï¼Œfiber å¯èƒ½è¢«å¤ç”¨ï¼‰ï¼›</li>
<li>ä¿è¯æ‰€æœ‰æ¸²æŸ“æµç¨‹çš„ä¸€è‡´æ€§ï¼ˆé¦–æ¬¡/æ›´æ–°æ¸²æŸ“æ‰§è¡Œç›¸åŒçš„æ¸…ç©ºé€»è¾‘ï¼Œå‡å°‘åˆ†æ”¯åˆ¤æ–­ï¼‰ã€‚</li>
</ol>
<h4 data-id="heading-27">æ€»ç»“</h4>
<p>æ¸…ç©º fiber æ—§çš„ Hook é“¾è¡¨/å‰¯ä½œç”¨é“¾è¡¨çš„æ ¸å¿ƒç›®çš„æ˜¯ï¼š</p>
<ol>
<li><strong>ä¿è¯é¡ºåºä¸€è‡´</strong>ï¼šè®©æ–° fiber çš„ Hook é“¾è¡¨å®Œå…¨åŒ¹é…æœ¬æ¬¡æ¸²æŸ“çš„ Hook è°ƒç”¨é¡ºåºï¼Œé¿å…çŠ¶æ€é”™ä½ï¼›</li>
<li><strong>ä¿è¯å‰¯ä½œç”¨çº¯å‡€</strong>ï¼šæ¸…é™¤æ—§çš„å‰¯ä½œç”¨æ®‹ç•™ï¼Œé¿å…é‡å¤æ‰§è¡Œã€å†…å­˜æ³„æ¼ï¼›</li>
<li><strong>æµç¨‹ç»Ÿä¸€</strong>ï¼šé¦–æ¬¡/æ›´æ–°æ¸²æŸ“æ‰§è¡Œç›¸åŒé€»è¾‘ï¼Œé™ä½ä»£ç å¤æ‚åº¦ã€‚</li>
</ol>
<p>æœ¬è´¨ä¸Šï¼Œè¿™æ˜¯ React ä¸ºäº†é€‚é…â€œå‡½æ•°ç»„ä»¶æ¯æ¬¡é‡æ–°æ‰§è¡Œâ€çš„ç‰¹æ€§ï¼Œç¡®ä¿ Hook çŠ¶æ€å§‹ç»ˆå’Œã€Œå½“å‰æ¸²æŸ“çš„é€»è¾‘ã€ç»‘å®šï¼Œè€Œéå’Œã€Œå†å²æ¸²æŸ“çš„é€»è¾‘ã€ç»‘å®šã€‚</p>
<h5 data-id="heading-28">æ­¥éª¤ 2ï¼šmount é˜¶æ®µâ€”â€”åˆ›å»º Hook èŠ‚ç‚¹ï¼Œå­˜åœ¨ fiber ä¸­ï¼ˆæ—  thisï¼‰</h5>
<p>å½“å‡½æ•°ç»„ä»¶æ‰§è¡Œ <code>useState(0)</code> æ—¶ï¼Œè°ƒç”¨çš„æ˜¯ <code>HooksDispatcherOnMount</code> ä¸­çš„ <code>mountState</code>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç®€åŒ–ç‰ˆ mountStateï¼šåˆå§‹åŒ–çŠ¶æ€ï¼Œå­˜åœ¨ fiber ä¸­</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">mountState</span>(<span class="hljs-params">initialState</span>) {
  <span class="hljs-comment">// åˆ›å»º Hook èŠ‚ç‚¹</span>
  <span class="hljs-keyword">const</span> hook = {
    <span class="hljs-attr">memoizedState</span>: initialState, <span class="hljs-comment">// ä¿å­˜çŠ¶æ€å€¼ï¼ˆæ¯”å¦‚ 0ï¼‰</span>
    <span class="hljs-attr">queue</span>: { <span class="hljs-attr">pending</span>: <span class="hljs-literal">null</span> }, <span class="hljs-comment">// ä¿å­˜æ›´æ–°é˜Ÿåˆ—ï¼ˆsetCount è§¦å‘çš„æ›´æ–°ï¼‰</span>
    <span class="hljs-attr">next</span>: <span class="hljs-literal">null</span> <span class="hljs-comment">// æŒ‡å‘ä¸‹ä¸€ä¸ª Hook</span>
  };
  <span class="hljs-comment">// æŠŠ Hook èŠ‚ç‚¹åŠ å…¥å½“å‰ fiber çš„ memoizedState é“¾è¡¨</span>
  <span class="hljs-keyword">if</span> (!currentlyRenderingFiber.<span class="hljs-property">memoizedState</span>) {
    currentlyRenderingFiber.<span class="hljs-property">memoizedState</span> = hook; <span class="hljs-comment">// ç¬¬ä¸€ä¸ª Hookï¼Œä½œä¸ºé“¾è¡¨å¤´</span>
  } <span class="hljs-keyword">else</span> {
    workInProgressHook.<span class="hljs-property">next</span> = hook; <span class="hljs-comment">// åç»­ Hookï¼Œæ¥åœ¨é“¾è¡¨åé¢</span>
  }
  workInProgressHook = hook; <span class="hljs-comment">// ç§»åŠ¨æŒ‡é’ˆåˆ°ä¸‹ä¸€ä¸ª Hook</span>
  <span class="hljs-comment">// è¿”å› [çŠ¶æ€, setter]ï¼Œsetter ç»‘å®šå½“å‰ Hook çš„ queueï¼Œæ— éœ€ this</span>
  <span class="hljs-keyword">return</span> [hook.<span class="hljs-property">memoizedState</span>, dispatchAction.<span class="hljs-title function_">bind</span>(<span class="hljs-literal">null</span>, hook.<span class="hljs-property">queue</span>)];
}
</code></pre>
<p>æ­¤æ—¶ï¼ŒçŠ¶æ€ <code>0</code> è¢«å­˜åœ¨ <code>fiber.memoizedState</code> ä¸­ï¼Œè€Œé <code>this</code>ï¼›<code>setCount</code> æ˜¯ç»‘å®šäº†å½“å‰ Hook é˜Ÿåˆ—çš„å‡½æ•°ï¼Œæ— éœ€é€šè¿‡ <code>this</code> è°ƒç”¨ã€‚</p>
<h5 data-id="heading-29">æ­¥éª¤ 3ï¼šupdate é˜¶æ®µâ€”â€”ä» fiber è¯»å– Hook èŠ‚ç‚¹ï¼Œé—­åŒ…ä¿å­˜å½“å‰çŠ¶æ€</h5>
<p>å½“ç‚¹å‡»æŒ‰é’®è°ƒç”¨ <code>setCount(count + 1)</code> æ—¶ï¼š</p>
<ol>
<li><code>dispatchAction</code> ä¼šåˆ›å»º update å¯¹è±¡ï¼ˆ<code>{ action: count =&gt; count + 1 }</code>ï¼‰ï¼ŒåŠ å…¥ Hook çš„ queueï¼›</li>
<li>React è§¦å‘é‡æ–°æ¸²æŸ“ï¼Œå†æ¬¡è°ƒç”¨ <code>renderWithHooks</code>ï¼Œåˆ‡æ¢åˆ° <code>HooksDispatcherOnUpdate</code>ï¼›</li>
<li>æ‰§è¡Œ <code>updateState</code>ï¼Œä» fiber çš„ Hook é“¾è¡¨ä¸­è¯»å–æ—§ Hook èŠ‚ç‚¹ï¼Œæ‰§è¡Œ update é˜Ÿåˆ—ä¸­çš„ actionï¼Œè®¡ç®—æ–°çŠ¶æ€ï¼š
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç®€åŒ–ç‰ˆ updateStateï¼šæ›´æ–°çŠ¶æ€ï¼Œæ—  this</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">updateState</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> hook = workInProgressHook; <span class="hljs-comment">// ä» fiber è¯»å–å½“å‰ Hook èŠ‚ç‚¹</span>
  workInProgressHook = hook.<span class="hljs-property">next</span>; <span class="hljs-comment">// ç§»åŠ¨æŒ‡é’ˆ</span>
  <span class="hljs-keyword">const</span> queue = hook.<span class="hljs-property">queue</span>;
  <span class="hljs-keyword">let</span> baseState = hook.<span class="hljs-property">memoizedState</span>;
  <span class="hljs-comment">// æ‰§è¡Œæ‰€æœ‰ updateï¼Œè®¡ç®—æ–°çŠ¶æ€</span>
  <span class="hljs-keyword">if</span> (queue.<span class="hljs-property">pending</span>) {
    <span class="hljs-keyword">const</span> firstUpdate = queue.<span class="hljs-property">pending</span>.<span class="hljs-property">next</span>;
    <span class="hljs-keyword">do</span> {
      baseState = firstUpdate.<span class="hljs-title function_">action</span>(baseState); <span class="hljs-comment">// æ¯”å¦‚ 0 â†’ 1</span>
      firstUpdate = firstUpdate.<span class="hljs-property">next</span>;
    } <span class="hljs-keyword">while</span> (firstUpdate !== queue.<span class="hljs-property">pending</span>);
    queue.<span class="hljs-property">pending</span> = <span class="hljs-literal">null</span>;
  }
  hook.<span class="hljs-property">memoizedState</span> = baseState; <span class="hljs-comment">// æ›´æ–° Hook èŠ‚ç‚¹çš„çŠ¶æ€</span>
  <span class="hljs-comment">// è¿”å› [æ–°çŠ¶æ€, setter]ï¼Œæ–°çŠ¶æ€å­˜åœ¨å½“å‰å‡½æ•°ä½œç”¨åŸŸï¼ˆé—­åŒ…ï¼‰</span>
  <span class="hljs-keyword">return</span> [baseState, dispatchAction.<span class="hljs-title function_">bind</span>(<span class="hljs-literal">null</span>, queue)];
}
</code></pre>
</li>
<li>æ–°çŠ¶æ€ <code>1</code> è¢«è¿”å›ï¼Œå­˜åœ¨å‡½æ•°ç»„ä»¶çš„ä½œç”¨åŸŸä¸­ï¼ˆ<code>const [count, setCount] = useState(0)</code>ï¼‰ï¼Œé€šè¿‡é—­åŒ…ç›´æ¥è®¿é—®ï¼Œæ— éœ€ <code>this.count</code>ã€‚</li>
</ol>
<h5 data-id="heading-30">æ­¥éª¤ 4ï¼šæœ€ç»ˆæ•ˆæœï¼ˆå¯¹æ¯”ç±»ç»„ä»¶ï¼‰</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// Hook å†™æ³•ï¼šæ—  thisï¼ŒçŠ¶æ€å­˜åœ¨ fiber + é—­åŒ…</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">HookApp</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [count, setCount] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>); <span class="hljs-comment">// count æ˜¯å½“å‰ä½œç”¨åŸŸçš„å˜é‡</span>
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> setCount(count + 1)}&gt;
      {count} {/* ç›´æ¥è®¿é—®ï¼Œæ— éœ€ this */}
    <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>
  );
}
</code></pre>
<ul>
<li>çŠ¶æ€å­˜å‚¨ï¼šä»â€œç±»å®ä¾‹ thisâ€ â†’ â€œfiber èŠ‚ç‚¹çš„ Hook é“¾è¡¨â€ï¼›</li>
<li>çŠ¶æ€è®¿é—®ï¼šä»â€œåŠ¨æ€ this.stateâ€ â†’ â€œå‡½æ•°ä½œç”¨åŸŸçš„é—­åŒ…å˜é‡â€ï¼›</li>
<li>æ ¹æœ¬è§£å†³ï¼šå…¨ç¨‹æ—  thisï¼Œè‡ªç„¶è§„é¿ this ç»‘å®šã€å¼‚æ­¥æ›´æ–°å¯¼è‡´çš„æ‰€æœ‰é—®é¢˜ã€‚</li>
</ul>
<h2 data-id="heading-31">äºŒã€è§£å†³ç”Ÿå‘½å‘¨æœŸæ··ä¹±ï¼šä»â€œåˆ†æ•£ç”Ÿå‘½å‘¨æœŸâ€åˆ°â€œEffect æ”¶æ•› + deps æ§åˆ¶â€</h2>
<h4 data-id="heading-32">1. ç±»ç»„ä»¶çš„å…·ä½“ç—›ç‚¹ï¼ˆå¸¦ä»£ç ä¾‹å­ï¼‰</h4>
<p>ä¸€ä¸ªâ€œç›‘å¬çª—å£å¤§å°â€çš„é€»è¾‘ï¼Œè¦æ‹†åœ¨ 3 ä¸ªç”Ÿå‘½å‘¨æœŸé‡Œï¼Œé€»è¾‘è¢«å‰²è£‚ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç±»ç»„ä»¶ï¼šç”Ÿå‘½å‘¨æœŸåˆ†æ•£é€»è¾‘</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ClassApp</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Component</span> {
  <span class="hljs-title function_">componentDidMount</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// æŒ‚è½½æ—¶åŠ ç›‘å¬</span>
    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'resize'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">handleResize</span>);
  }

  <span class="hljs-title function_">componentDidUpdate</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// æ›´æ–°æ—¶å¯èƒ½éœ€è¦é‡æ–°ç›‘å¬ï¼ˆæ¯”å¦‚ä¾èµ– props å˜åŒ–ï¼‰</span>
    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'resize'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">handleResize</span>);
    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'resize'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">handleResize</span>);
  }

  <span class="hljs-title function_">componentWillUnmount</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// å¸è½½æ—¶åˆ ç›‘å¬</span>
    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'resize'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">handleResize</span>);
  }

  handleResize = <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>({ <span class="hljs-attr">width</span>: <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerWidth</span> });
  };

  <span class="hljs-title function_">render</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{this.state.width}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
  }
}
</code></pre>
<p>ç—›ç‚¹æœ¬è´¨ï¼šç”Ÿå‘½å‘¨æœŸå‡½æ•°æ˜¯â€œæŒ‰æ—¶æœºåˆ’åˆ†â€ï¼Œè€Œä¸šåŠ¡é€»è¾‘æ˜¯â€œæŒ‰åŠŸèƒ½åˆ’åˆ†â€ï¼Œå¯¼è‡´ä¸€ä¸ªåŠŸèƒ½çš„ä»£ç è¢«æ‹†å¾—æ”¯ç¦»ç ´ç¢ã€‚</p>
<h4 data-id="heading-33">2. Hook çš„è§£å†³æ€è·¯ + å®Œæ•´å®ç°è¿‡ç¨‹</h4>
<p>æ ¸å¿ƒé€»è¾‘ï¼š<strong>ç”¨ useEffect æŠŠâ€œä¸€ä¸ªåŠŸèƒ½çš„æ‰€æœ‰ç”Ÿå‘½å‘¨æœŸé€»è¾‘â€æ”¶æ•›åˆ°ä¸€ä¸ªå‡½æ•°ä¸­ï¼Œé€šè¿‡ deps æ§åˆ¶æ‰§è¡Œæ—¶æœºï¼Œcleanup å¤„ç†å¸è½½/æ›´æ–°å‰çš„æ¸…ç†</strong>ã€‚</p>
<h5 data-id="heading-34">æ­¥éª¤ 1ï¼šmount é˜¶æ®µâ€”â€”æ”¶é›† Effectï¼Œæ ‡è®°æ‰§è¡Œ</h5>
<p>å‡½æ•°ç»„ä»¶æ‰§è¡Œ <code>useEffect</code> æ—¶ï¼Œè°ƒç”¨ <code>mountEffect</code> åˆ›å»º EffectHook èŠ‚ç‚¹ï¼Œå­˜åœ¨ fiber ä¸­ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç®€åŒ–ç‰ˆ mountEffectï¼šæ”¶é›†å‰¯ä½œç”¨</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">mountEffect</span>(<span class="hljs-params">create, deps</span>) {
  <span class="hljs-keyword">const</span> hook = {
    <span class="hljs-attr">tag</span>: <span class="hljs-string">'PassiveEffect'</span>, <span class="hljs-comment">// æ ‡è®°æ˜¯ useEffectï¼ˆå¼‚æ­¥æ‰§è¡Œï¼‰</span>
    create, <span class="hljs-comment">// ä½ çš„ä¸šåŠ¡é€»è¾‘ï¼ˆæ¯”å¦‚åŠ ç›‘å¬ï¼‰</span>
    deps, <span class="hljs-comment">// ä¾èµ–æ•°ç»„ï¼ˆæ¯”å¦‚ []ï¼‰</span>
    <span class="hljs-attr">cleanup</span>: <span class="hljs-literal">null</span>, <span class="hljs-comment">// æ¸…ç†å‡½æ•°ï¼ˆcreate è¿”å›çš„å‡½æ•°ï¼‰</span>
    <span class="hljs-attr">next</span>: <span class="hljs-literal">null</span>
  };
  <span class="hljs-comment">// æŠŠ EffectHook åŠ å…¥ fiber çš„ Hook é“¾è¡¨ï¼ˆå’Œ useState å…±ç”¨ä¸€ä¸ªé“¾è¡¨ï¼‰</span>
  <span class="hljs-keyword">if</span> (!currentlyRenderingFiber.<span class="hljs-property">memoizedState</span>) {
    currentlyRenderingFiber.<span class="hljs-property">memoizedState</span> = hook;
  } <span class="hljs-keyword">else</span> {
    workInProgressHook.<span class="hljs-property">next</span> = hook;
  }
  workInProgressHook = hook;
}
</code></pre>
<p>æ­¤æ—¶ï¼Œ<code>create</code>ï¼ˆåŠ ç›‘å¬ï¼‰ã€<code>deps</code>ï¼ˆç©ºæ•°ç»„ï¼‰è¢«å­˜åœ¨ Hook èŠ‚ç‚¹ä¸­ï¼Œæ ‡è®°ä¸ºâ€œéœ€è¦æ‰§è¡Œâ€ã€‚</p>
<h5 data-id="heading-35">æ­¥éª¤ 2ï¼šrender é˜¶æ®µâ€”â€”å¯¹æ¯” depsï¼Œæ ‡è®°æ˜¯å¦æ‰§è¡Œï¼ˆupdate é˜¶æ®µï¼‰</h5>
<p>å½“ç»„ä»¶æ›´æ–°æ—¶ï¼Œè°ƒç”¨ <code>updateEffect</code> å¯¹æ¯”æ–°æ—§ depsï¼Œåˆ¤æ–­æ˜¯å¦éœ€è¦é‡æ–°æ‰§è¡Œï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç®€åŒ–ç‰ˆ updateEffectï¼šå¯¹æ¯” deps</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">updateEffect</span>(<span class="hljs-params">create, deps</span>) {
  <span class="hljs-keyword">const</span> hook = workInProgressHook; <span class="hljs-comment">// è¯»å–æ—§ Hook èŠ‚ç‚¹</span>
  workInProgressHook = hook.<span class="hljs-property">next</span>;
  <span class="hljs-keyword">const</span> prevDeps = hook.<span class="hljs-property">deps</span>;
  <span class="hljs-comment">// æµ…æ¯”è¾ƒ depsï¼šå¦‚æœ deps ç›¸åŒï¼Œæ ‡è®°ä¸ºæ— éœ€æ‰§è¡Œ</span>
  <span class="hljs-keyword">if</span> (deps !== <span class="hljs-literal">null</span> &amp;&amp; <span class="hljs-title function_">areHookInputsEqual</span>(deps, prevDeps)) {
    hook.<span class="hljs-property">tag</span> = <span class="hljs-string">'NoEffect'</span>; <span class="hljs-comment">// æ— éœ€æ‰§è¡Œ</span>
    <span class="hljs-keyword">return</span>;
  }
  <span class="hljs-comment">// deps ä¸åŒï¼Œæ›´æ–° Hook èŠ‚ç‚¹ï¼Œæ ‡è®°éœ€è¦æ‰§è¡Œ</span>
  hook.<span class="hljs-property">create</span> = create;
  hook.<span class="hljs-property">deps</span> = deps;
  hook.<span class="hljs-property">tag</span> = <span class="hljs-string">'PassiveEffect'</span>;
}

<span class="hljs-comment">// ç®€åŒ–ç‰ˆ deps æµ…æ¯”è¾ƒ</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">areHookInputsEqual</span>(<span class="hljs-params">nextDeps, prevDeps</span>) {
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; prevDeps.<span class="hljs-property">length</span>; i++) {
    <span class="hljs-keyword">if</span> (!<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">is</span>(nextDeps[i], prevDeps[i])) {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>; <span class="hljs-comment">// æœ‰ä¸€é¡¹ä¸åŒï¼Œè¿”å› false</span>
    }
  }
  <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
}
</code></pre>
<p>æ¯”å¦‚ deps æ˜¯ <code>[]</code>ï¼Œæ›´æ–°æ—¶å¯¹æ¯”å‘ç° deps æ²¡å˜ï¼Œå°±æ ‡è®°ä¸º <code>NoEffect</code>ï¼Œè·³è¿‡æ‰§è¡Œã€‚</p>
<h5 data-id="heading-36">æ­¥éª¤ 3ï¼šcommit é˜¶æ®µâ€”â€”æ‰§è¡Œ Effect/cleanupï¼ˆæ ¸å¿ƒï¼ï¼‰</h5>
<p>React æ›´æ–°å®ŒçœŸå® DOM åï¼Œè¿›å…¥ commit é˜¶æ®µçš„ <code>commitPassiveEffects</code> æ­¥éª¤ï¼Œæ‰§è¡Œ useEffectï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç®€åŒ–ç‰ˆ commitPassiveEffectsï¼šæ‰§è¡Œ useEffect å›è°ƒ/cleanup</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">commitPassiveEffects</span>(<span class="hljs-params">fiber</span>) {
  <span class="hljs-keyword">let</span> hook = fiber.<span class="hljs-property">memoizedState</span>;
  <span class="hljs-keyword">while</span> (hook) {
    <span class="hljs-keyword">if</span> (hook.<span class="hljs-property">tag</span> === <span class="hljs-string">'PassiveEffect'</span>) {
      <span class="hljs-comment">// ç¬¬ä¸€æ­¥ï¼šæ‰§è¡Œä¸Šä¸€æ¬¡çš„ cleanupï¼ˆå¦‚æœæœ‰ï¼‰</span>
      <span class="hljs-keyword">if</span> (hook.<span class="hljs-property">cleanup</span>) {
        hook.<span class="hljs-title function_">cleanup</span>(); <span class="hljs-comment">// æ¯”å¦‚å¸è½½å‰åˆ ç›‘å¬</span>
      }
      <span class="hljs-comment">// ç¬¬äºŒæ­¥ï¼šæ‰§è¡Œå½“å‰çš„ createï¼Œä¿å­˜ cleanup</span>
      hook.<span class="hljs-property">cleanup</span> = hook.<span class="hljs-title function_">create</span>(); <span class="hljs-comment">// create è¿”å›çš„å‡½æ•°ï¼ˆæ¯”å¦‚åˆ ç›‘å¬ï¼‰</span>
    }
    hook = hook.<span class="hljs-property">next</span>;
  }
}
</code></pre>
<p>æ‰§è¡Œæ—¶æœºå¯¹åº”ï¼š</p>
<ul>
<li><strong>mount æ—¶</strong>ï¼š<strong><code>æ— æ—§ cleanupï¼Œç›´æ¥æ‰§è¡Œ createï¼ˆåŠ ç›‘å¬ï¼‰ï¼Œä¿å­˜ cleanupï¼ˆåˆ ç›‘å¬ï¼‰ï¼›</code></strong></li>
<li><strong>update ä¸” deps å˜åŒ–æ—¶</strong>ï¼š<strong><code>å…ˆæ‰§è¡Œæ—§ cleanupï¼ˆåˆ ç›‘å¬ï¼‰â†’ å†æ‰§è¡Œæ–° createï¼ˆåŠ ç›‘å¬ï¼‰â†’ ä¿å­˜æ–° cleanupï¼›</code></strong></li>
<li><strong>unmount æ—¶</strong>ï¼š<strong><code>éå†æ‰€æœ‰ EffectHookï¼Œæ‰§è¡Œ cleanupï¼ˆåˆ ç›‘å¬ï¼‰ã€‚</code></strong></li>
<li><strong><code>æ‰€ä»¥éƒ½æ˜¯å…ˆæ‰§è¡ŒuseEffect,æ‹¿åˆ°è¿”å›å€¼ä¿å­˜cleanupä¸æ‰§è¡Œï¼Œç„¶åå†ä¸‹ä¸€æ¬¡å…ˆæ‰§è¡Œcleanup(),ç„¶åå†æ‰§è¡ŒuseEffect</code></strong></li>
</ul>
<h5 data-id="heading-37">æ­¥éª¤ 4ï¼šæœ€ç»ˆæ•ˆæœï¼ˆå¯¹æ¯”ç±»ç»„ä»¶ï¼‰</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// Hook å†™æ³•ï¼šé€»è¾‘å®Œå…¨æ”¶æ•›</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">HookApp</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [width, setWidth] = <span class="hljs-title function_">useState</span>(<span class="hljs-variable language_">window</span>.<span class="hljs-property">innerWidth</span>);
  
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">// createï¼šæŒ‚è½½/æ›´æ–°æ—¶æ‰§è¡Œï¼ˆdeps å˜åŒ–ï¼‰</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleResize</span> = (<span class="hljs-params"/>) =&gt; <span class="hljs-title function_">setWidth</span>(<span class="hljs-variable language_">window</span>.<span class="hljs-property">innerWidth</span>);
    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'resize'</span>, handleResize);
    <span class="hljs-comment">// cleanupï¼šå¸è½½/æ›´æ–°å‰æ‰§è¡Œ</span>
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'resize'</span>, handleResize);
  }, []); <span class="hljs-comment">// ç©º deps â†’ ä»… mount/unmount æ‰§è¡Œ</span>

  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{width}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
}
</code></pre>
<ul>
<li>é€»è¾‘æ”¶æ•›ï¼šåŠ ç›‘å¬ã€åˆ ç›‘å¬çš„é€»è¾‘éƒ½åœ¨ä¸€ä¸ª useEffect é‡Œï¼ŒæŒ‰åŠŸèƒ½èšåˆï¼›</li>
<li>æ—¶æœºæ§åˆ¶ï¼šdeps å†³å®šæ‰§è¡Œæ—¶æœºï¼ˆ<code>[]</code>=ä»… mount/unmountï¼Œ<code>[width]</code>=width å˜åŒ–æ—¶æ‰§è¡Œï¼‰ï¼›</li>
<li>è‡ªåŠ¨æ¸…ç†ï¼šReact å¸®ä½ ç®¡ç† cleanup çš„æ‰§è¡Œï¼Œæ— éœ€æ‰‹åŠ¨åœ¨å¤šä¸ªç”Ÿå‘½å‘¨æœŸä¸­å¤„ç†ã€‚</li>
</ul>
<h2 data-id="heading-38">ä¸‰ã€è§£å†³é€»è¾‘è€¦åˆï¼šä»â€œåˆ†æ•£åœ¨ç±»ä¸­â€åˆ°â€œè‡ªå®šä¹‰ Hook å°è£… + fiber éš”ç¦»â€</h2>
<h4 data-id="heading-39">1. ç±»ç»„ä»¶çš„å…·ä½“ç—›ç‚¹ï¼ˆå¸¦ä»£ç ä¾‹å­ï¼‰</h4>
<p>ä¸€ä¸ªâ€œæ•°æ®è¯·æ±‚+åŠ è½½çŠ¶æ€+å–æ¶ˆè¯·æ±‚â€çš„é€»è¾‘ï¼Œå’Œå…¶ä»–é€»è¾‘æŒ¤åœ¨åŒä¸€ä¸ªç±»ä¸­ï¼Œè€¦åˆä¸¥é‡ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç±»ç»„ä»¶ï¼šå¤šä¸ªé€»è¾‘è€¦åˆåœ¨ç”Ÿå‘½å‘¨æœŸä¸­</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ClassApp</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Component</span> {
  state = { <span class="hljs-attr">data</span>: <span class="hljs-literal">null</span>, <span class="hljs-attr">loading</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">error</span>: <span class="hljs-literal">null</span> };

  <span class="hljs-title function_">componentDidMount</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// é€»è¾‘1ï¼šæ•°æ®è¯·æ±‚</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AbortController</span>();
    <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'/api/data'</span>, { <span class="hljs-attr">signal</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-property">signal</span> })
      .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> res.<span class="hljs-title function_">json</span>())
      .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>({ data, <span class="hljs-attr">loading</span>: <span class="hljs-literal">false</span> }))
      .<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">err</span> =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>({ error, <span class="hljs-attr">loading</span>: <span class="hljs-literal">false</span> }));

    <span class="hljs-comment">// é€»è¾‘2ï¼šåŸ‹ç‚¹ç»Ÿè®¡ï¼ˆæ— å…³é€»è¾‘ï¼Œå´å’Œè¯·æ±‚æŒ¤åœ¨ä¸€èµ·ï¼‰</span>
    <span class="hljs-title function_">trackPageView</span>();
  }

  <span class="hljs-title function_">componentWillUnmount</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// é€»è¾‘1çš„æ¸…ç†ï¼šå–æ¶ˆè¯·æ±‚</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">abort</span>();
  }

  <span class="hljs-title function_">render</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// é€»è¾‘1çš„ UIï¼šåŠ è½½/æ•°æ®/é”™è¯¯å±•ç¤º</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>.<span class="hljs-property">loading</span>) <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>åŠ è½½ä¸­<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>.<span class="hljs-property">error</span>) <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>é”™è¯¯<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{this.state.data.name}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
  }
}
</code></pre>
<p>ç—›ç‚¹æœ¬è´¨ï¼šä¸åŒåŠŸèƒ½çš„é€»è¾‘éƒ½æŒ¤åœ¨åŒä¸€ä¸ªç”Ÿå‘½å‘¨æœŸ/ç±»ä¸­ï¼Œæ²¡æœ‰è¾¹ç•Œï¼Œå¤ç”¨å›°éš¾ã€‚</p>
<h4 data-id="heading-40">2. Hook çš„è§£å†³æ€è·¯ + å®Œæ•´å®ç°è¿‡ç¨‹</h4>
<p>æ ¸å¿ƒé€»è¾‘ï¼š<strong>ç”¨è‡ªå®šä¹‰ Hook æŠŠâ€œä¸€ä¸ªç‹¬ç«‹åŠŸèƒ½çš„æ‰€æœ‰é€»è¾‘ï¼ˆçŠ¶æ€+å‰¯ä½œç”¨ï¼‰â€å°è£…æˆä¸€ä¸ªå‡½æ•°ï¼Œéµå¾ª Hook é¡ºåºè§„åˆ™ï¼Œé€šè¿‡ fiber ä¿è¯ä¸åŒç»„ä»¶çš„ Hook çŠ¶æ€éš”ç¦»</strong>ã€‚</p>
<h5 data-id="heading-41">æ­¥éª¤ 1ï¼šå°è£…è‡ªå®šä¹‰ Hookâ€”â€”èšåˆç‹¬ç«‹é€»è¾‘</h5>
<p>æŠŠâ€œæ•°æ®è¯·æ±‚â€é€»è¾‘å°è£…æˆ <code>useRequest</code>ï¼Œå†…éƒ¨è°ƒç”¨åŸºç¡€ Hookï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// è‡ªå®šä¹‰ Hookï¼šå°è£…è¯·æ±‚é€»è¾‘ï¼ˆç‹¬ç«‹ã€å†…èšï¼‰</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">useRequest</span>(<span class="hljs-params">url</span>) {
  <span class="hljs-keyword">const</span> [data, setData] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">null</span>);
  <span class="hljs-keyword">const</span> [loading, setLoading] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">true</span>);
  <span class="hljs-keyword">const</span> [error, setError] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">null</span>);

  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">// è¯·æ±‚é€»è¾‘</span>
    <span class="hljs-keyword">const</span> controller = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AbortController</span>();
    <span class="hljs-title function_">fetch</span>(url, { <span class="hljs-attr">signal</span>: controller.<span class="hljs-property">signal</span> })
      .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> res.<span class="hljs-title function_">json</span>())
      .<span class="hljs-title function_">then</span>(setData)
      .<span class="hljs-title function_">catch</span>(setError)
      .<span class="hljs-title function_">finally</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">setLoading</span>(<span class="hljs-literal">false</span>));

    <span class="hljs-comment">// æ¸…ç†é€»è¾‘</span>
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> controller.<span class="hljs-title function_">abort</span>();
  }, [url]); <span class="hljs-comment">// ä¾èµ– urlï¼Œurl å˜äº†é‡æ–°è¯·æ±‚</span>

  <span class="hljs-comment">// è¿”å›çŠ¶æ€/æ–¹æ³•ï¼Œä¾›ç»„ä»¶ä½¿ç”¨</span>
  <span class="hljs-keyword">return</span> { data, loading, error };
}
</code></pre>
<h5 data-id="heading-42">æ­¥éª¤ 2ï¼šç»„ä»¶æ‰§è¡Œè‡ªå®šä¹‰ Hookâ€”â€”Hook èŠ‚ç‚¹åŠ å…¥å½“å‰ fiber</h5>
<p>å½“å‡½æ•°ç»„ä»¶æ‰§è¡Œ <code>const { data, loading } = useRequest('/api/data')</code> æ—¶ï¼š</p>
<ol>
<li><code>useRequest</code> å†…éƒ¨çš„ <code>useState</code>/<code>useEffect</code> ä¼šä¾æ¬¡è°ƒç”¨ï¼›</li>
<li><strong><code>è¿™äº›åŸºç¡€ Hook ä¼šåˆ›å»ºå¯¹åº”çš„ Hook èŠ‚ç‚¹ï¼ŒæŒ‰é¡ºåºåŠ å…¥å½“å‰ç»„ä»¶çš„ fiber.memoizedState é“¾è¡¨ï¼›hookå’Œhookä¹‹é—´ç‹¬ç«‹äº’ä¸å¹²æ‰°</code></strong></li>
<li><strong><code>ç”±äºæ¯ä¸ªç»„ä»¶æœ‰è‡ªå·±çš„ fiberï¼Œ</code>useRequest<code> åœ¨ç»„ä»¶ A ä¸­è°ƒç”¨æ—¶ï¼ŒHook èŠ‚ç‚¹å­˜åœ¨ A çš„ fiber ä¸­ï¼›åœ¨ç»„ä»¶ B ä¸­è°ƒç”¨æ—¶ï¼Œå­˜åœ¨ B çš„ fiber ä¸­</code></strong>â€”â€”<strong><code>çŠ¶æ€å®Œå…¨éš”ç¦»</code></strong>ã€‚</li>
</ol>
<h5 data-id="heading-43">æ­¥éª¤ 3ï¼šå…¶ä»–é€»è¾‘å•ç‹¬å°è£…â€”â€”å½»åº•è§£è€¦</h5>
<p>æŠŠâ€œåŸ‹ç‚¹ç»Ÿè®¡â€ä¹Ÿå°è£…æˆè‡ªå®šä¹‰ Hookï¼Œå’Œè¯·æ±‚é€»è¾‘å®Œå…¨åˆ†ç¦»ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// è‡ªå®šä¹‰ Hookï¼šå°è£…åŸ‹ç‚¹é€»è¾‘</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">usePageTrack</span>(<span class="hljs-params"/>) {
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">trackPageView</span>();
  }, []);
}

<span class="hljs-comment">// ç»„ä»¶ï¼šæŒ‰éœ€å¼•å…¥ä¸åŒçš„è‡ªå®šä¹‰ Hookï¼Œé€»è¾‘æ— è€¦åˆ</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">HookApp</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> { data, loading, error } = <span class="hljs-title function_">useRequest</span>(<span class="hljs-string">'/api/data'</span>);
  <span class="hljs-title function_">usePageTrack</span>(); <span class="hljs-comment">// åŸ‹ç‚¹é€»è¾‘</span>

  <span class="hljs-keyword">if</span> (loading) <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>åŠ è½½ä¸­<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
  <span class="hljs-keyword">if</span> (error) <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>é”™è¯¯<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{data.name}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
}
</code></pre>
<ul>
<li>é€»è¾‘è¾¹ç•Œï¼š<strong><code>è¯·æ±‚é€»è¾‘åœ¨ </code>useRequest<code>ï¼ŒåŸ‹ç‚¹é€»è¾‘åœ¨ </code>usePageTrack<code>ï¼Œäº’ä¸å¹²æ‰°</code></strong>ï¼›</li>
<li>å¤ç”¨æ€§ï¼š<strong><code>useRequest</code> å¯ä»¥å¤ç”¨åˆ°ä»»æ„éœ€è¦è¯·æ±‚æ•°æ®çš„ç»„ä»¶ï¼Œåªéœ€ä¼ ä¸åŒçš„ url</strong>ï¼›</li>
<li>éš”ç¦»æ€§ï¼š<strong><code>ä¸åŒç»„ä»¶è°ƒç”¨ useRequestï¼ŒçŠ¶æ€å­˜åœ¨å„è‡ªçš„ fiber ä¸­ï¼Œä¸ä¼šäº’ç›¸å½±å“ã€‚</code></strong></li>
</ul>
<hr/>
<h2 data-id="heading-44">å››ã€è§£å†³é€»è¾‘ä¸ UI è€¦åˆï¼šä»â€œæ··åœ¨ç±»ä¸­â€åˆ°â€œHook ç®¡é€»è¾‘ï¼Œç»„ä»¶ç®¡ UIâ€</h2>
<h4 data-id="heading-45">1. ç±»ç»„ä»¶çš„å…·ä½“ç—›ç‚¹ï¼ˆå¸¦ä»£ç ä¾‹å­ï¼‰</h4>
<p>è¡¨å•éªŒè¯é€»è¾‘å’Œ UI æ¸²æŸ“æ··åœ¨åŒä¸€ä¸ªç±»ä¸­ï¼Œå¤ç”¨éªŒè¯é€»è¾‘éœ€è¦å¥—é«˜é˜¶ç»„ä»¶ï¼ˆHOCï¼‰ï¼Œå¢åŠ å±‚çº§ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç±»ç»„ä»¶ï¼šéªŒè¯é€»è¾‘ + UI æ¸²æŸ“è€¦åˆ</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ClassForm</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Component</span> {
  state = { <span class="hljs-attr">name</span>: <span class="hljs-string">''</span>, <span class="hljs-attr">phone</span>: <span class="hljs-string">''</span>, <span class="hljs-attr">errors</span>: {} };

  <span class="hljs-comment">// éªŒè¯é€»è¾‘ï¼ˆå’Œ UI æ··åœ¨ä¸€èµ·ï¼‰</span>
  validate = <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> errors = {};
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>.<span class="hljs-property">name</span>) errors.<span class="hljs-property">name</span> = <span class="hljs-string">'å¿…å¡«'</span>;
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>.<span class="hljs-property">phone</span>) errors.<span class="hljs-property">phone</span> = <span class="hljs-string">'å¿…å¡«'</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>({ errors });
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(errors).<span class="hljs-property">length</span> === <span class="hljs-number">0</span>;
  };

  handleChange = <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>({ [e.<span class="hljs-property">target</span>.<span class="hljs-property">name</span>]: e.<span class="hljs-property">target</span>.<span class="hljs-property">value</span> });
  };

  handleSubmit = <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
    e.<span class="hljs-title function_">preventDefault</span>();
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">validate</span>()) <span class="hljs-title function_">alert</span>(<span class="hljs-string">'æäº¤æˆåŠŸ'</span>);
  };

  <span class="hljs-comment">// UI æ¸²æŸ“ï¼ˆå’ŒéªŒè¯é€»è¾‘åœ¨åŒä¸€ä¸ªç±»ï¼‰</span>
  <span class="hljs-title function_">render</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> (
      <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">onSubmit</span>=<span class="hljs-string">{this.handleSubmit}</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"name"</span> <span class="hljs-attr">onChange</span>=<span class="hljs-string">{this.handleChange}</span> /&gt;</span>
        {this.state.errors.name &amp;&amp; <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>{this.state.errors.name}<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>}
        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"phone"</span> <span class="hljs-attr">onChange</span>=<span class="hljs-string">{this.handleChange}</span> /&gt;</span>
        {this.state.errors.phone &amp;&amp; <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>{this.state.errors.phone}<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>}
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"submit"</span>&gt;</span>æäº¤<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span></span>
    );
  }
}

<span class="hljs-comment">// å¤ç”¨éªŒè¯é€»è¾‘ï¼šéœ€è¦å†™ HOCï¼Œå¢åŠ ç»„ä»¶å±‚çº§</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">withFormValidate</span>(<span class="hljs-params">WrappedComponent</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">extends</span> <span class="hljs-title class_">React</span>.<span class="hljs-property">Component</span> {
    <span class="hljs-comment">// å¤åˆ¶ä¸Šé¢çš„ validate/handleChange é€»è¾‘...</span>
    <span class="hljs-title function_">render</span>(<span class="hljs-params"/>) {
      <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">WrappedComponent</span> {<span class="hljs-attr">...this.props</span>} {<span class="hljs-attr">...this.state</span>} <span class="hljs-attr">validate</span>=<span class="hljs-string">{this.validate}</span> /&gt;</span></span>;
    }
  };
}
</code></pre>
<p>ç—›ç‚¹æœ¬è´¨ï¼šç±»ç»„ä»¶æ˜¯â€œä¸€ä¸ªå®¹å™¨â€ï¼Œæ—¢è£…é€»è¾‘åˆè£… UIï¼Œå¤ç”¨é€»è¾‘å¿…é¡»å¸¦ UI ä¸€èµ·ï¼Œæˆ–ç”¨å¤æ‚çš„ HOC/Render Props ç»•å¼€ã€‚</p>
<h4 data-id="heading-46">2. Hook çš„è§£å†³æ€è·¯ + å®Œæ•´å®ç°è¿‡ç¨‹</h4>
<p>æ ¸å¿ƒé€»è¾‘ï¼š<strong>è‡ªå®šä¹‰ Hook åªè´Ÿè´£â€œé€»è¾‘+çŠ¶æ€â€ï¼ˆæ—  UIï¼‰ï¼Œç»„ä»¶åªè´Ÿè´£â€œæ¥æ”¶çŠ¶æ€+æ¸²æŸ“ UIâ€ï¼Œé€šè¿‡å‡½æ•°è¿”å›å€¼ä¼ é€’çŠ¶æ€/æ–¹æ³•ï¼ŒrenderWithHooks ä¿è¯é€»è¾‘ä¸ç»„ä»¶çš„ç»‘å®š</strong>ã€‚</p>
<h5 data-id="heading-47">æ­¥éª¤ 1ï¼šè‡ªå®šä¹‰ Hookâ€”â€”çº¯é€»è¾‘ï¼Œæ—  UI</h5>
<p>æŠŠè¡¨å•éªŒè¯é€»è¾‘å°è£…æˆ <code>useFormValidate</code>ï¼Œåªè¿”å›çŠ¶æ€/æ–¹æ³•ï¼Œä¸è¿”å› JSXï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// è‡ªå®šä¹‰ Hookï¼šä»…å¤„ç†éªŒè¯é€»è¾‘ï¼ˆæ— ä»»ä½• UIï¼‰</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">useFormValidate</span>(<span class="hljs-params">initialValues</span>) {
  <span class="hljs-keyword">const</span> [values, setValues] = <span class="hljs-title function_">useState</span>(initialValues);
  <span class="hljs-keyword">const</span> [errors, setErrors] = <span class="hljs-title function_">useState</span>({});

  <span class="hljs-comment">// éªŒè¯é€»è¾‘</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">validate</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-keyword">const</span> newErrors = {};
    <span class="hljs-keyword">if</span> (!values.<span class="hljs-property">name</span>) newErrors.<span class="hljs-property">name</span> = <span class="hljs-string">'å¿…å¡«'</span>;
    <span class="hljs-keyword">if</span> (!values.<span class="hljs-property">phone</span>) newErrors.<span class="hljs-property">phone</span> = <span class="hljs-string">'å¿…å¡«'</span>;
    <span class="hljs-title function_">setErrors</span>(newErrors);
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(newErrors).<span class="hljs-property">length</span> === <span class="hljs-number">0</span>;
  };

  <span class="hljs-comment">// è¾“å…¥å˜æ›´é€»è¾‘</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleChange</span> = (<span class="hljs-params">e</span>) =&gt; {
    <span class="hljs-title function_">setValues</span>({ ...values, [e.<span class="hljs-property">target</span>.<span class="hljs-property">name</span>]: e.<span class="hljs-property">target</span>.<span class="hljs-property">value</span> });
  };

  <span class="hljs-comment">// åªè¿”å›çŠ¶æ€/æ–¹æ³•ï¼Œä¸è¿”å› UI</span>
  <span class="hljs-keyword">return</span> { values, errors, handleChange, validate };
}
</code></pre>
<h5 data-id="heading-48">æ­¥éª¤ 2ï¼šç»„ä»¶â€”â€”çº¯ UIï¼Œæ— æ ¸å¿ƒé€»è¾‘</h5>
<p>ç»„ä»¶å¼•å…¥è‡ªå®šä¹‰ Hookï¼Œæ¥æ”¶çŠ¶æ€/æ–¹æ³•ï¼Œåªè´Ÿè´£æ¸²æŸ“ UIï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç»„ä»¶ï¼šä»…å¤„ç† UI æ¸²æŸ“ï¼Œé€»è¾‘å…¨é  Hook</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">HookForm</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// å¼•å…¥éªŒè¯é€»è¾‘ï¼Œæ‹¿åˆ°çŠ¶æ€/æ–¹æ³•</span>
  <span class="hljs-keyword">const</span> { values, errors, handleChange, validate } = <span class="hljs-title function_">useFormValidate</span>({
    <span class="hljs-attr">name</span>: <span class="hljs-string">''</span>,
    <span class="hljs-attr">phone</span>: <span class="hljs-string">''</span>
  });

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleSubmit</span> = (<span class="hljs-params">e</span>) =&gt; {
    e.<span class="hljs-title function_">preventDefault</span>();
    <span class="hljs-keyword">if</span> (<span class="hljs-title function_">validate</span>()) <span class="hljs-title function_">alert</span>(<span class="hljs-string">'æäº¤æˆåŠŸ'</span>);
  };

  <span class="hljs-comment">// åªå…³å¿ƒ UI æ€ä¹ˆæ¸²æŸ“ï¼Œæ— éªŒè¯é€»è¾‘</span>
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">onSubmit</span>=<span class="hljs-string">{handleSubmit}</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"name"</span> <span class="hljs-attr">onChange</span>=<span class="hljs-string">{handleChange}</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{values.name}</span> /&gt;</span>
      {errors.name &amp;&amp; <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>{errors.name}<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>}
      <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"phone"</span> <span class="hljs-attr">onChange</span>=<span class="hljs-string">{handleChange}</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{values.phone}</span> /&gt;</span>
      {errors.phone &amp;&amp; <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>{errors.phone}<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>}
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"submit"</span>&gt;</span>æäº¤<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span></span>
  );
}
</code></pre>
<h5 data-id="heading-49">æ­¥éª¤ 3ï¼šåº•å±‚ç»‘å®šâ€”â€”é€»è¾‘å±äºç»„ä»¶ï¼Œå´ä¸è€¦åˆ UI</h5>
<p>å½“ <code>HookForm</code> æ‰§è¡Œæ—¶ï¼Œ<code>renderWithHooks</code> ä¼šæŠŠ <code>HookForm</code> çš„ fiber ç»‘å®šåˆ°å…¨å±€ï¼Œ<code>useFormValidate</code> å†…éƒ¨çš„ <code>useState</code>/<code>useEffect</code> ä¼šè‡ªåŠ¨å…³è”åˆ°è¿™ä¸ª fiberï¼š</p>
<ul>
<li>é€»è¾‘å½’å±ï¼š<code>useFormValidate</code> çš„çŠ¶æ€æ˜¯ <code>HookForm</code> çš„çŠ¶æ€ï¼Œä¸æ˜¯å…¨å±€çŠ¶æ€ï¼›</li>
<li>é€»è¾‘å¤ç”¨ï¼šæŠŠ <code>useFormValidate</code> å¼•å…¥ <code>RegisterForm</code> ç»„ä»¶ï¼Œåªéœ€æ”¹ UI æ¸²æŸ“éƒ¨åˆ†ï¼ŒéªŒè¯é€»è¾‘å®Œå…¨å¤ç”¨ï¼›</li>
<li>æ— é¢å¤–å±‚çº§ï¼šç›¸æ¯” HOCï¼Œè‡ªå®šä¹‰ Hook ä¸ä¼šå¢åŠ ç»„ä»¶æ ‘å±‚çº§ï¼ŒUI ç»“æ„æ›´æ¸…æ™°ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-50">è‡ªå®šä¹‰hookè°ƒç”¨é¡ºåº</h3>
<p>æˆ‘ç”¨å…·ä½“ä¾‹å­æ‹†è§£ï¼Œè®©ä½ çœ‹å¾—æ›´ç›´è§‚ï¼š</p>
<h4 data-id="heading-51">ç¬¬ä¸€æ­¥ï¼šå…ˆçœ‹ä»£ç ç»“æ„ï¼ˆè‡ªå®šä¹‰ Hook å†™åœ¨ç»„ä»¶å‰é¢ï¼‰</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// è‡ªå®šä¹‰ Hookï¼šå°è£…è¡¨å•éªŒè¯é€»è¾‘</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">useFormValidate</span>(<span class="hljs-params">initialValues</span>) {
  <span class="hljs-comment">// è‡ªå®šä¹‰ Hook å†…éƒ¨çš„åŸºç¡€ Hook 1</span>
  <span class="hljs-keyword">const</span> [values, setValues] = <span class="hljs-title function_">useState</span>(initialValues);
  <span class="hljs-comment">// è‡ªå®šä¹‰ Hook å†…éƒ¨çš„åŸºç¡€ Hook 2</span>
  <span class="hljs-keyword">const</span> [errors, setErrors] = <span class="hljs-title function_">useState</span>({});
  <span class="hljs-comment">// è‡ªå®šä¹‰ Hook å†…éƒ¨çš„åŸºç¡€ Hook 3</span>
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"éªŒè¯è§„åˆ™åˆå§‹åŒ–"</span>);
  }, []);

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">validate</span> = (<span class="hljs-params"/>) =&gt; { <span class="hljs-comment">/* éªŒè¯é€»è¾‘ */</span> };
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleChange</span> = (<span class="hljs-params"/>) =&gt; { <span class="hljs-comment">/* è¾“å…¥å˜æ›´é€»è¾‘ */</span> };

  <span class="hljs-keyword">return</span> { values, errors, validate, handleChange };
}

<span class="hljs-comment">// ç»„ä»¶ï¼šä½¿ç”¨è‡ªå®šä¹‰ Hookï¼ˆå†™åœ¨è‡ªèº« Hook å‰é¢ï¼‰</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">HookForm</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// ç¬¬ä¸€æ­¥ï¼šæ‰§è¡Œè‡ªå®šä¹‰ Hookï¼ˆå†…éƒ¨çš„åŸºç¡€ Hook å…ˆæ‰§è¡Œï¼‰</span>
  <span class="hljs-keyword">const</span> { values, errors, validate, handleChange } = <span class="hljs-title function_">useFormValidate</span>({
    <span class="hljs-attr">name</span>: <span class="hljs-string">""</span>,
    <span class="hljs-attr">phone</span>: <span class="hljs-string">""</span>
  });

  <span class="hljs-comment">// ç¬¬äºŒæ­¥ï¼šæ‰§è¡Œç»„ä»¶è‡ªèº«çš„åŸºç¡€ Hookï¼ˆåæ‰§è¡Œï¼‰</span>
  <span class="hljs-keyword">const</span> [submitCount, setSubmitCount] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>); <span class="hljs-comment">// ç»„ä»¶è‡ªèº« Hook 1</span>
  <span class="hljs-keyword">const</span> [isSubmitting, setIsSubmitting] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>); <span class="hljs-comment">// ç»„ä»¶è‡ªèº« Hook 2</span>

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleSubmit</span> = (<span class="hljs-params"/>) =&gt; { <span class="hljs-comment">/* æäº¤é€»è¾‘ */</span> };

  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">form</span>&gt;</span>{/* æ¸²æŸ“é€»è¾‘ */}<span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span></span>;
}
</code></pre>
<h4 data-id="heading-52">ç¬¬äºŒæ­¥ï¼šæ‹†è§£æ‰§è¡Œé¡ºåº + Hook é“¾è¡¨æ’å…¥è¿‡ç¨‹</h4>
<p>å½“ <code>HookForm</code> æ‰§è¡Œã€è§¦å‘ <code>renderWithHooks</code> å¹¶ç»‘å®šå…¶ fiber åˆ°å…¨å±€åï¼Œæ•´ä¸ª Hook æ‰§è¡Œ/é“¾è¡¨æ’å…¥æµç¨‹æ˜¯ï¼š</p>



































<table><thead><tr><th>æ‰§è¡Œæ­¥éª¤</th><th>æ‰§è¡Œçš„ Hook</th><th>æ’å…¥åˆ° HookForm fiber é“¾è¡¨çš„ä½ç½®</th></tr></thead><tbody><tr><td>1</td><td>useFormValidate å†…çš„ useState(values)</td><td>é“¾è¡¨ç¬¬ 1 ä½</td></tr><tr><td>2</td><td>useFormValidate å†…çš„ useState(errors)</td><td>é“¾è¡¨ç¬¬ 2 ä½</td></tr><tr><td>3</td><td>useFormValidate å†…çš„ useEffect</td><td>é“¾è¡¨ç¬¬ 3 ä½ï¼ˆå‰¯ä½œç”¨é“¾è¡¨åŒæ­¥æ’å…¥ï¼‰</td></tr><tr><td>4</td><td>HookForm è‡ªèº«çš„ useState(submitCount)</td><td>é“¾è¡¨ç¬¬ 4 ä½</td></tr><tr><td>5</td><td>HookForm è‡ªèº«çš„ useState(isSubmitting)</td><td>é“¾è¡¨ç¬¬ 5 ä½</td></tr></tbody></table>
<p>æœ€ç»ˆï¼Œ<code>HookForm</code> çš„ fiber ä¸­ <code>memoizedState</code>ï¼ˆHook é“¾è¡¨ï¼‰ç»“æ„æ˜¯ï¼š</p>
<pre><code class="hljs language-perl" lang="perl">HookForm fiber.memoizedState
  â””â”€ ç¬¬<span class="hljs-number">1</span>ä½ï¼š<span class="hljs-keyword">values</span> çš„ Hook èŠ‚ç‚¹
  â””â”€ ç¬¬<span class="hljs-number">2</span>ä½ï¼šerrors çš„ Hook èŠ‚ç‚¹
  â””â”€ ç¬¬<span class="hljs-number">3</span>ä½ï¼šuseEffect çš„ Hook èŠ‚ç‚¹
  â””â”€ ç¬¬<span class="hljs-number">4</span>ä½ï¼šsubmitCount çš„ Hook èŠ‚ç‚¹
  â””â”€ ç¬¬<span class="hljs-number">5</span>ä½ï¼šisSubmitting çš„ Hook èŠ‚ç‚¹
</code></pre>
<h4 data-id="heading-53">ç¬¬ä¸‰æ­¥ï¼šå…³é”®ç»“è®ºï¼ˆå¼ºåŒ–ä½ çš„ç†è§£ï¼‰</h4>
<ol>
<li><strong><code>è‡ªå®šä¹‰ Hook æ— â€œç‹¬ç«‹ fiberâ€</code></strong>ï¼šè‡ªå®šä¹‰ Hook æœ¬èº«ä¸ä¼šç”Ÿæˆæ–°çš„ fiberï¼Œå®ƒåªæ˜¯â€œæ‰¹é‡è°ƒç”¨åŸºç¡€ Hook çš„å‡½æ•°â€ï¼Œæ‰€æœ‰å†…éƒ¨åŸºç¡€ Hook éƒ½å½’å±äº<strong>ä½¿ç”¨å®ƒçš„ç»„ä»¶çš„ fiber</strong>ï¼›</li>
<li><strong><code>æ‰§è¡Œé¡ºåº = é“¾è¡¨é¡ºåº</code></strong>ï¼šå®Œå…¨ç”±ä»£ç ä¹¦å†™é¡ºåºå†³å®šâ€”â€”è‡ªå®šä¹‰ Hook å†™åœ¨ç»„ä»¶å†…å‰é¢ï¼Œå…¶å†…éƒ¨ Hook å°±å…ˆæ‰§è¡Œã€å…ˆå…¥é“¾è¡¨ï¼›å†™åœ¨åé¢åˆ™åä¹‹ï¼›</li>
<li><strong><code>è§„åˆ™ä¸å˜</code></strong>ï¼šè‡ªå®šä¹‰ Hook å†…éƒ¨çš„åŸºç¡€ Hookï¼Œä¾ç„¶è¦éµå®ˆâ€œä¸èƒ½åœ¨æ¡ä»¶/å¾ªç¯ä¸­è°ƒç”¨â€çš„è§„åˆ™ï¼ˆå› ä¸ºæœ€ç»ˆä¼šèå…¥ç»„ä»¶çš„ Hook é“¾è¡¨ï¼Œé¡ºåºä¹±äº†ä¼šå¯¼è‡´çŠ¶æ€é”™ä½ï¼‰ã€‚</li>
</ol>
<h4 data-id="heading-54">åä¾‹éªŒè¯ï¼ˆè‡ªå®šä¹‰ Hook å†™åœ¨ç»„ä»¶ Hook åé¢ï¼‰</h4>
<p>å¦‚æœæŠŠä»£ç æ”¹æˆè¿™æ ·ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">HookForm</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// ç¬¬ä¸€æ­¥ï¼šç»„ä»¶è‡ªèº« Hook å…ˆæ‰§è¡Œ</span>
  <span class="hljs-keyword">const</span> [submitCount, setSubmitCount] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);
  
  <span class="hljs-comment">// ç¬¬äºŒæ­¥ï¼šè‡ªå®šä¹‰ Hook åæ‰§è¡Œ</span>
  <span class="hljs-keyword">const</span> { values, errors } = <span class="hljs-title function_">useFormValidate</span>({ <span class="hljs-attr">name</span>: <span class="hljs-string">""</span>, <span class="hljs-attr">phone</span>: <span class="hljs-string">""</span> });
  
  <span class="hljs-comment">// ç¬¬ä¸‰æ­¥ï¼šç»„ä»¶è‡ªèº«å¦ä¸€ä¸ª Hook</span>
  <span class="hljs-keyword">const</span> [isSubmitting, setIsSubmitting] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);
}
</code></pre>
<p>åˆ™é“¾è¡¨é¡ºåºå˜æˆï¼š
<code>submitCountï¼ˆ1ï¼‰â†’ valuesï¼ˆ2ï¼‰â†’ errorsï¼ˆ3ï¼‰â†’ useEffectï¼ˆ4ï¼‰â†’ isSubmittingï¼ˆ5ï¼‰</code></p>
<h4 data-id="heading-55">æ€»ç»“</h4>
<ol>
<li>è‡ªå®šä¹‰ Hook å†…çš„ useState/useEffect ä¼š <strong><code>æ’å…¥åˆ°ä½¿ç”¨å®ƒçš„ç»„ä»¶ fiber çš„ Hook é“¾è¡¨ä¸­</code></strong>ï¼Œè€Œéç‹¬ç«‹å­˜åœ¨ï¼›</li>
<li>æ‰§è¡Œé¡ºåºå®Œå…¨éµå¾ªâ€œä»£ç ä¹¦å†™é¡ºåºâ€ï¼šè‡ªå®šä¹‰ Hook å†™åœ¨å‰é¢ï¼Œå…¶å†…éƒ¨ Hook å…ˆæ‰§è¡Œã€å…ˆå…¥é“¾è¡¨ï¼›ç»„ä»¶è‡ªèº« Hook åæ‰§è¡Œã€åå…¥é“¾è¡¨ï¼›</li>
<li>è¿™ä¹Ÿæ˜¯è‡ªå®šä¹‰ Hook èƒ½â€œå¤ç”¨é€»è¾‘ä½†ä¸éš”ç¦»çŠ¶æ€â€çš„åŸå› â€”â€”<strong><code>æ‰€æœ‰çŠ¶æ€æœ€ç»ˆéƒ½å­˜åœ¨ç»„ä»¶çš„ fiber ä¸­ï¼Œä¸åŒç»„ä»¶è°ƒç”¨åŒä¸€ä¸ªè‡ªå®šä¹‰ Hookï¼Œä¼šåœ¨å„è‡ªçš„ fiber é“¾è¡¨ä¸­ç”Ÿæˆç‹¬ç«‹çš„ Hook èŠ‚ç‚¹ï¼ŒçŠ¶æ€äº’ä¸å¹²æ‰°ã€‚</code></strong></li>
</ol>
<p>ç®€å•è¯´ï¼šè‡ªå®šä¹‰ Hook å°±æ˜¯â€œæŠŠç»„ä»¶å†…çš„ä¸€æ®µ Hook é€»è¾‘æŠ½æˆå‡½æ•°â€ï¼Œè°ƒç”¨å®ƒç­‰ä»·äºæŠŠè¿™æ®µ Hook é€»è¾‘â€œç²˜è´´â€åˆ°ç»„ä»¶çš„å¯¹åº”ä½ç½®ï¼Œæ‰§è¡Œ/æ’å…¥é¡ºåºå®Œå…¨ä¸å˜ã€‚</p>
<h3 data-id="heading-56">è‡ªå®šä¹‰hook æ˜¯ä¸æ˜¯å’Œ vue çš„mixinæœ‰ç‚¹åƒï¼Ÿ</h3>
<h4 data-id="heading-57">ä¸€ã€å…ˆæ‰¿è®¤ç›¸ä¼¼æ€§ï¼šè¡¨å±‚éƒ½æ˜¯â€œé€»è¾‘å¤ç”¨â€</h4>

























<table><thead><tr><th>ç‰¹æ€§</th><th>è‡ªå®šä¹‰ Hook</th><th>Vue mixin</th></tr></thead><tbody><tr><td>æ ¸å¿ƒç›®çš„</td><td>å¤ç”¨ç»„ä»¶ä¸­çš„ Hook é€»è¾‘ï¼ˆæ¯”å¦‚è¡¨å•éªŒè¯ã€é˜²æŠ–ï¼‰</td><td>å¤ç”¨ç»„ä»¶ä¸­çš„é€‰é¡¹é€»è¾‘ï¼ˆæ¯”å¦‚ dataã€methodsã€ç”Ÿå‘½å‘¨æœŸï¼‰</td></tr><tr><td>æ¥å…¥æ–¹å¼</td><td>ç»„ä»¶å†…ç›´æ¥è°ƒç”¨ï¼ˆ<code>const { validate } = useForm()</code>ï¼‰</td><td>ç»„ä»¶å†…é€šè¿‡ <code>mixins: [formMixin]</code> æ··å…¥</td></tr><tr><td>çŠ¶æ€å½’å±</td><td>æœ€ç»ˆå½’å±äºä½¿ç”¨å®ƒçš„ç»„ä»¶ï¼ˆHook æ’å…¥ç»„ä»¶ fiber é“¾è¡¨ï¼‰</td><td>æœ€ç»ˆå½’å±äºä½¿ç”¨å®ƒçš„ç»„ä»¶ï¼ˆmixin çš„ data/methods åˆå¹¶åˆ°ç»„ä»¶å®ä¾‹ï¼‰</td></tr></tbody></table>
<p>ç®€å•è¯´ï¼šäºŒè€…éƒ½æ˜¯â€œæŠŠé€šç”¨é€»è¾‘æŠ½ç¦»å‡ºæ¥ï¼Œè®©å¤šä¸ªç»„ä»¶èƒ½å¤ç”¨â€ï¼Œè¿™æ˜¯ä½ èƒ½ç›´è§‚æ„Ÿå—åˆ°çš„ç›¸ä¼¼æ€§ã€‚</p>
<h4 data-id="heading-58">äºŒã€æ ¸å¿ƒå·®å¼‚ï¼šHook æ˜¯â€œæ˜¾å¼å¤ç”¨â€ï¼Œmixin æ˜¯â€œéšå¼æ··å…¥â€ï¼ˆå¤©å·®åœ°åˆ«ï¼‰</h4>
<p>è¿™æ˜¯æœ€å…³é”®çš„åŒºåˆ«ï¼Œä¹Ÿæ˜¯ Hook èƒ½æ›¿ä»£ mixin è¿™ç±»æ–¹æ¡ˆçš„æ ¸å¿ƒåŸå› ï¼š</p>






























<table><thead><tr><th>ç»´åº¦</th><th>è‡ªå®šä¹‰ Hook</th><th>Vue mixin</th></tr></thead><tbody><tr><td>ä½œç”¨åŸŸ &amp; å‘½åå†²çª</td><td>å®Œå…¨æ— å†²çªï¼š<br/>1. è‡ªå®šä¹‰ Hook å†…éƒ¨çš„ useState/useEffect æŒ‰é¡ºåºæ’å…¥ç»„ä»¶ fiber é“¾è¡¨ï¼ŒçŠ¶æ€æ˜¯ã€Œæ˜¾å¼è¿”å›ã€ç»™ç»„ä»¶ï¼ˆæ¯”å¦‚ <code>const { count } = useCount()</code>ï¼‰ï¼›<br/>2. å˜é‡åç”±ç»„ä»¶è‡ªå·±å†³å®šï¼Œå“ªæ€•å¤šä¸ª Hook è¿”å›åŒåå˜é‡ï¼Œç»„ä»¶å¯ä»¥é‡å‘½åï¼ˆ<code>const { count: aCount } = useCount()</code>ï¼‰ã€‚</td><td>ææ˜“å†²çªï¼š<br/>1. mixin çš„ data/methods ä¼šã€Œéšå¼åˆå¹¶ã€åˆ°ç»„ä»¶å®ä¾‹ï¼Œæ¯”å¦‚ä¸¤ä¸ª mixin éƒ½å®šä¹‰äº† <code>count</code>ï¼Œåæ··å…¥çš„ä¼šè¦†ç›–å…ˆæ··å…¥çš„ï¼›<br/>2. ç»„ä»¶æ— æ³•æå‰é¢„çŸ¥ mixin å®šä¹‰äº†ä»€ä¹ˆï¼Œè°ƒè¯•æ—¶ä¸çŸ¥é“ <code>count</code> æ¥è‡ªå“ªä¸ª mixinã€‚</td></tr><tr><td>é€»è¾‘æº¯æº</td><td>æ¸…æ™°å¯è¿½æº¯ï¼š<br/>ç»„ä»¶é‡Œè°ƒç”¨ <code>useForm()</code> çš„ä½ç½®å°±æ˜¯é€»è¾‘å…¥å£ï¼Œç‚¹è¿› <code>useForm</code> å°±èƒ½çœ‹åˆ°æ‰€æœ‰ç›¸å…³é€»è¾‘ï¼ŒHook ä¹‹é—´çš„ä¾èµ–ä¹Ÿæ˜¯æ˜¾å¼çš„ï¼ˆæ¯”å¦‚ä¼ å‚ï¼‰ã€‚</td><td>æ··ä¹±éš¾æº¯æºï¼š<br/>å¤šä¸ª mixin æ··å…¥åï¼Œç»„ä»¶çš„ <code>created</code> ç”Ÿå‘½å‘¨æœŸå¯èƒ½ç”± 3 ä¸ª mixin + ç»„ä»¶è‡ªèº«å…±åŒæ„æˆï¼Œæ— æ³•ç›´è§‚çŸ¥é“æŸæ®µé€»è¾‘æ¥è‡ªå“ªä¸ª mixinã€‚</td></tr><tr><td>çŠ¶æ€éš”ç¦»</td><td>å¤©ç„¶éš”ç¦»ï¼š<br/>ä¸åŒç»„ä»¶è°ƒç”¨åŒä¸€ä¸ªè‡ªå®šä¹‰ Hookï¼Œä¼šåœ¨å„è‡ªçš„ fiber é“¾è¡¨ä¸­ç”Ÿæˆç‹¬ç«‹çš„ Hook èŠ‚ç‚¹ï¼ŒçŠ¶æ€äº’ä¸å¹²æ‰°ï¼ˆæ¯”å¦‚ A ç»„ä»¶çš„ <code>count</code> å’Œ B ç»„ä»¶çš„ <code>count</code> æ˜¯ä¸¤ä¸ªç‹¬ç«‹çš„ Hook èŠ‚ç‚¹ï¼‰ã€‚</td><td>éœ€æ‰‹åŠ¨éš”ç¦»ï¼š<br/>mixin çš„ data æ˜¯ã€Œå…±äº«æ¨¡æ¿ã€ï¼Œå¦‚æœ mixin å®šä¹‰äº† <code>count: 0</code>ï¼Œå¤šä¸ªç»„ä»¶ä½¿ç”¨æ—¶ï¼Œè‹¥ä¸æ‰‹åŠ¨å¤„ç†ï¼ˆæ¯”å¦‚ç”¨å‡½æ•°å¼ dataï¼‰ï¼Œå¯èƒ½å‡ºç°çŠ¶æ€æ±¡æŸ“ï¼ˆæå°‘æ•°åœºæ™¯ï¼Œä½†æ˜“è¸©å‘ï¼‰ã€‚</td></tr><tr><td>é€»è¾‘ç»„åˆ</td><td>çµæ´»ç»„åˆï¼š<br/>è‡ªå®šä¹‰ Hook å¯ä»¥åµŒå¥—è°ƒç”¨å…¶ä»– Hookï¼ˆ<code>useForm</code> é‡Œè°ƒç”¨ <code>useValidate</code>ï¼‰ï¼Œé€»è¾‘åˆ†å±‚æ¸…æ™°ï¼Œåƒâ€œæ­ç§¯æœ¨â€ã€‚</td><td>ç»„åˆæ··ä¹±ï¼š<br/>å¤šä¸ª mixin æ··å…¥åï¼Œé€»è¾‘æ˜¯â€œå¹³é“ºå¼â€çš„ï¼Œmixin ä¹‹é—´æ— æ³•ç›´æ¥é€šä¿¡ï¼ˆéœ€é€šè¿‡ç»„ä»¶å®ä¾‹ï¼‰ï¼Œå¤æ‚åœºæ™¯ä¸‹ä¼šå˜æˆâ€œmixin åœ°ç‹±â€ã€‚</td></tr></tbody></table>
<h4 data-id="heading-59">ä¸‰ã€ç»“åˆä½ å­¦çš„ Hook åº•å±‚ï¼Œç†è§£å·®å¼‚çš„æœ¬è´¨</h4>
<p>è‡ªå®šä¹‰ Hook ä¹‹æ‰€ä»¥èƒ½è§£å†³ mixin çš„ç—›ç‚¹ï¼Œæ ¸å¿ƒæ˜¯ã€ŒHook çš„çŠ¶æ€å½’å±äºç»„ä»¶ fiberï¼Œä¸”é€»è¾‘æ˜¯æ˜¾å¼æš´éœ²çš„ã€ï¼š</p>
<ol>
<li>è‡ªå®šä¹‰ Hook å†…éƒ¨çš„ useState æœ€ç»ˆä¼šå˜æˆç»„ä»¶ fiber é“¾è¡¨ä¸­çš„ä¸€ä¸ªèŠ‚ç‚¹ï¼ŒçŠ¶æ€æ˜¯ç»„ä»¶â€œè‡ªæœ‰â€çš„ï¼Œè€Œéâ€œå¤–æ¥æ··å…¥â€çš„ï¼›</li>
<li><strong><code>è‡ªå®šä¹‰ Hook æŠŠçŠ¶æ€/æ–¹æ³•é€šè¿‡è¿”å›å€¼æš´éœ²ç»™ç»„ä»¶ï¼Œç»„ä»¶å¿…é¡»ã€Œæ˜¾å¼æ¥æ”¶ã€â€”â€”ç›¸å½“äºâ€œä½ è¦ä»€ä¹ˆï¼Œæˆ‘ç»™ä»€ä¹ˆâ€ï¼Œè€Œ mixin æ˜¯â€œæˆ‘æŠŠä¸€å †ä¸œè¥¿å¡ç»™ä½ ï¼Œä½ ä¸çŸ¥é“æœ‰ä»€ä¹ˆâ€ï¼›</code></strong></li>
<li><strong><code>å“ªæ€•å¤šä¸ªè‡ªå®šä¹‰ Hook å¾€ç»„ä»¶ fiber é“¾è¡¨ä¸­æ’å…¥èŠ‚ç‚¹ï¼Œå› ä¸ºæ˜¯ã€ŒæŒ‰è°ƒç”¨é¡ºåºæ’å…¥ã€ï¼Œä¸”è¿”å›å€¼ç”±ç»„ä»¶å‘½åï¼Œå®Œå…¨ä¸ä¼šå†²çªï¼ˆæ¯”å¦‚ </code>useCount1<code> çš„ count æ˜¯é“¾è¡¨ç¬¬ 1 ä½ï¼Œ</code>useCount2<code>çš„ count æ˜¯é“¾è¡¨ç¬¬ 3 ä½ï¼Œç»„ä»¶æ¥æ”¶æ—¶å¯ä»¥å«</code>count1<code>/</code>count2<code>ï¼‰ã€‚</code></strong></li>
</ol>
<p><strong><code>è€Œ Vue mixin çš„é—®é¢˜åœ¨äºï¼šå®ƒæ˜¯ã€Œéšå¼åˆå¹¶ã€åˆ°ç»„ä»¶å®ä¾‹ï¼Œç›¸å½“äºâ€œå¾€ç»„ä»¶çš„ data/methods é‡Œå·å·åŠ ä¸œè¥¿â€ï¼Œæ—¢ä¸çŸ¥é“åŠ äº†ä»€ä¹ˆï¼Œä¹Ÿå®¹æ˜“å’Œç»„ä»¶è‡ªèº«çš„é€»è¾‘å†²çªã€‚</code></strong></p>
<h4 data-id="heading-60">æ€»ç»“</h4>
<ol>
<li>è¡¨å±‚ç›¸ä¼¼ï¼šè‡ªå®šä¹‰ Hook å’Œ mixin éƒ½æ˜¯ä¸ºäº†å¤ç”¨ç»„ä»¶é€»è¾‘ï¼›</li>
<li>æ ¸å¿ƒå·®å¼‚ï¼šHook æ˜¯ã€Œæ˜¾å¼ã€å¯æ§ã€éš”ç¦»ã€çš„é€»è¾‘å¤ç”¨ï¼ˆçŠ¶æ€å½’ç»„ä»¶ fiberï¼Œè¿”å›å€¼æ˜¾å¼æ¥æ”¶ï¼‰ï¼Œmixin æ˜¯ã€Œéšå¼ã€æ··ä¹±ã€æ˜“å†²çªã€çš„é€»è¾‘æ··å…¥ï¼ˆçŠ¶æ€åˆå¹¶åˆ°ç»„ä»¶å®ä¾‹ï¼Œæ— æ˜ç¡®è¾¹ç•Œï¼‰ï¼›</li>
<li>æœ¬è´¨åŸå› ï¼šHook ä¾æ‰˜äº React æŒ‰é¡ºåºæ’å…¥ç»„ä»¶ fiber é“¾è¡¨çš„æœºåˆ¶ï¼Œå¤©ç„¶å’Œç»„ä»¶çŠ¶æ€ç»‘å®šï¼Œè€Œ mixin æ˜¯â€œæ— è¾¹ç•Œçš„é€»è¾‘åˆå¹¶â€ï¼Œè¿™ä¹Ÿæ˜¯ React æ”¾å¼ƒ mixin è½¬è€Œæ¨ Hook çš„æ ¸å¿ƒåŸå› ã€‚</li>
</ol>
<p>ç®€å•è¯´ï¼šä½ å¯ä»¥æŠŠè‡ªå®šä¹‰ Hook ç†è§£ä¸ºã€Œå‡çº§ç‰ˆçš„ mixinã€â€”â€”ä¿ç•™äº†â€œé€»è¾‘å¤ç”¨â€çš„æ ¸å¿ƒä»·å€¼ï¼Œåˆè§£å†³äº† mixin æ‰€æœ‰çš„è‡´å‘½ç—›ç‚¹ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[React çŠ¶æ€ç®¡ç†çš„æ¶æ„æ¼”è¿›ï¼šä¸ºä»€ä¹ˆä½ ä¸å†éœ€è¦æŠŠæ‰€æœ‰æ•°æ®å¡è¿›å…¨å±€ Store]]></title>    <link>https://juejin.cn/post/7598699872552632356</link>    <guid>https://juejin.cn/post/7598699872552632356</guid>    <pubDate>2026-01-25T09:33:01.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7598699872552632356" data-draft-id="7598699872552615972" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="React çŠ¶æ€ç®¡ç†çš„æ¶æ„æ¼”è¿›ï¼šä¸ºä»€ä¹ˆä½ ä¸å†éœ€è¦æŠŠæ‰€æœ‰æ•°æ®å¡è¿›å…¨å±€ Store"/> <meta itemprop="keywords" content="å‰ç«¯,React.js"/> <meta itemprop="datePublished" content="2026-01-25T09:33:01.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç™¾æ…•å¤§ä¸‰è§’"/> <meta itemprop="url" content="https://juejin.cn/user/1882827191748744"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            React çŠ¶æ€ç®¡ç†çš„æ¶æ„æ¼”è¿›ï¼šä¸ºä»€ä¹ˆä½ ä¸å†éœ€è¦æŠŠæ‰€æœ‰æ•°æ®å¡è¿›å…¨å±€ Store
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1882827191748744/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç™¾æ…•å¤§ä¸‰è§’
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-25T09:33:01.000Z" title="Sun Jan 25 2026 09:33:01 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»20åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="github">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">React çŠ¶æ€ç®¡ç†çš„æ¶æ„æ¼”è¿›ï¼šä¸ºä»€ä¹ˆä½ ä¸å†éœ€è¦æŠŠæ‰€æœ‰æ•°æ®å¡è¿›å…¨å±€ Store</h2>
<h3 data-id="heading-1">å¼•è¨€ï¼šçŠ¶æ€ç®¡ç†çš„å›°å¢ƒ</h3>
<p>å¦‚æœä½ å†™è¿‡ä¸­å¤§å‹ React åº”ç”¨ï¼Œä¸€å®šé‡åˆ°è¿‡è¿™æ ·çš„åœºæ™¯ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ä½ çš„ Redux Store æˆ– Zustand Store é•¿è¿™æ ·</span>
<span class="hljs-keyword">const</span> useAppStore = <span class="hljs-title function_">create</span>(<span class="hljs-function">(<span class="hljs-params">set</span>) =&gt;</span> ({
  <span class="hljs-comment">// ç”¨æˆ·ä¿¡æ¯</span>
  <span class="hljs-attr">currentUser</span>: <span class="hljs-literal">null</span>,
  <span class="hljs-attr">setCurrentUser</span>: <span class="hljs-function">(<span class="hljs-params">user</span>) =&gt;</span> <span class="hljs-title function_">set</span>({ <span class="hljs-attr">currentUser</span>: user }),

  <span class="hljs-comment">// ç®€å†åˆ—è¡¨</span>
  <span class="hljs-attr">resumes</span>: [],
  <span class="hljs-attr">setResumes</span>: <span class="hljs-function">(<span class="hljs-params">resumes</span>) =&gt;</span> <span class="hljs-title function_">set</span>({ resumes }),

  <span class="hljs-comment">// åŠ è½½çŠ¶æ€</span>
  <span class="hljs-attr">isLoadingUser</span>: <span class="hljs-literal">false</span>,
  <span class="hljs-attr">isLoadingResumes</span>: <span class="hljs-literal">false</span>,

  <span class="hljs-comment">// ä¾§è¾¹æ çŠ¶æ€</span>
  <span class="hljs-attr">isSidebarOpen</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">toggleSidebar</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">set</span>(<span class="hljs-function">(<span class="hljs-params">s</span>) =&gt;</span> ({ <span class="hljs-attr">isSidebarOpen</span>: !s.<span class="hljs-property">isSidebarOpen</span> })),

  <span class="hljs-comment">// ä¸»é¢˜</span>
  <span class="hljs-attr">theme</span>: <span class="hljs-string">'light'</span>,
  <span class="hljs-attr">setTheme</span>: <span class="hljs-function">(<span class="hljs-params">theme</span>) =&gt;</span> <span class="hljs-title function_">set</span>({ theme }),
}));
</code></pre>
<p>ç„¶ååœ¨ç»„ä»¶é‡Œï¼Œä½ éœ€è¦è¿™æ ·ä½¿ç”¨ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">UserProfile</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> { currentUser, isLoadingUser, setCurrentUser } = <span class="hljs-title function_">useAppStore</span>();

  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">// æ¯æ¬¡ç»„ä»¶æŒ‚è½½éƒ½è¦æ‰‹åŠ¨è·å–æ•°æ®</span>
    <span class="hljs-title function_">fetchUser</span>().<span class="hljs-title function_">then</span>(setCurrentUser);
  }, []);

  <span class="hljs-keyword">if</span> (isLoadingUser) <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Spinner</span> /&gt;</span></span>;
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{currentUser?.name}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
}
</code></pre>
<p>çœ‹èµ·æ¥ä¸€åˆ‡æ­£å¸¸ï¼Œä½†éšç€åº”ç”¨å¤æ‚åº¦å¢é•¿ï¼Œé—®é¢˜å¼€å§‹æš´éœ²ï¼š</p>
<ol>
<li><strong>æ•°æ®é‡å¤è·å–</strong>ï¼šå¤šä¸ªç»„ä»¶éƒ½éœ€è¦ <code>currentUser</code>ï¼Œæ¯ä¸ªç»„ä»¶éƒ½è¦å†™ <code>useEffect</code> å»è·å–</li>
<li><strong>ç¼“å­˜å¤±æ•ˆéš¾é¢˜</strong>ï¼šç”¨æˆ·åœ¨ A é¡µé¢æ›´æ–°äº†ä¿¡æ¯ï¼ŒB é¡µé¢çš„æ•°æ®å¦‚ä½•åŒæ­¥ï¼Ÿ</li>
<li><strong>åŠ è½½çŠ¶æ€çˆ†ç‚¸</strong>ï¼šæ¯ä¸ª API éƒ½è¦æ‰‹åŠ¨ç»´æŠ¤ <code>isLoading</code>ã€<code>error</code>ã€<code>data</code> ä¸‰ä»¶å¥—</li>
<li><strong>æ•°æ®æ–°é²œåº¦è¿·å¤±</strong>ï¼šè¿™ä»½æ•°æ®æ˜¯ 1 ç§’å‰çš„è¿˜æ˜¯ 10 åˆ†é’Ÿå‰çš„ï¼Ÿè¯¥ä¸è¯¥é‡æ–°è·å–ï¼Ÿ</li>
</ol>
<p>æ›´ä¸¥é‡çš„æ˜¯ï¼Œ<strong>ä½ æŠŠæ‰€æœ‰çŠ¶æ€éƒ½å¡è¿›äº†åŒä¸€ä¸ª Storeï¼ŒServer Stateï¼ˆæ¥è‡ª API çš„æ•°æ®ï¼‰å’Œ Client Stateï¼ˆUI çŠ¶æ€ï¼‰æ··åœ¨ä¸€èµ·</strong>ï¼Œå¯¼è‡´ï¼š</p>
<ul>
<li>ä¸çŸ¥é“å“ªäº›æ•°æ®è¯¥æŒä¹…åŒ–ã€å“ªäº›è¯¥ä¸¢å¼ƒ</li>
<li>ä¸çŸ¥é“å“ªäº›æ•°æ®è¯¥è‡ªåŠ¨åˆ·æ–°ã€å“ªäº›ä¸éœ€è¦</li>
<li>çŠ¶æ€æ›´æ–°é€»è¾‘è¶Šæ¥è¶Šå¤æ‚ï¼Œreducer è¶Šå†™è¶Šé•¿</li>
</ul>
<p><strong>æœ¬æ–‡å°†å±•ç¤ºä¸€ç§å…¨æ–°çš„æ¶æ„æ€ç»´</strong>ï¼šä¸å†æŠŠæ‰€æœ‰æ•°æ®å¡è¿›å…¨å±€ Storeï¼Œè€Œæ˜¯æ ¹æ®æ•°æ®çš„æœ¬è´¨ç‰¹å¾ï¼Œé€‰æ‹©ä¸“é—¨çš„å·¥å…·æ¥ç®¡ç†ã€‚è¿™ä¸æ˜¯å·¥å…·çš„é€‰å‹é—®é¢˜ï¼Œè€Œæ˜¯æ¶æ„ç†å¿µçš„å‡çº§ã€‚</p>
<h3 data-id="heading-2">ç¬¬ä¸€éƒ¨åˆ†ï¼šé‡æ–°è®¤è¯†çŠ¶æ€çš„æœ¬è´¨</h3>
<h4 data-id="heading-3">æ ¸å¿ƒåŸåˆ™ï¼šServer State â‰  Client State</h4>
<p>åœ¨ React åº”ç”¨ä¸­ï¼ŒçŠ¶æ€åªæœ‰ä¸¤ç§æœ¬è´¨ï¼š</p>


























<table><thead><tr><th>çŠ¶æ€ç±»å‹</th><th>å®šä¹‰</th><th>ç‰¹å¾</th><th>æœ€ä½³å·¥å…·</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td><strong>Server State</strong></td><td>æ¥è‡ªæœåŠ¡å™¨çš„æ•°æ®ï¼Œä½ ä¸æ‹¥æœ‰å®ƒ</td><td>å¼‚æ­¥ã€éœ€è¦ç¼“å­˜ã€ä¼šè¿‡æœŸã€å¯èƒ½è¢«åˆ«äººä¿®æ”¹</td><td><strong>TanStack Query (React Query)</strong></td><td>ç”¨æˆ·ä¿¡æ¯ã€ç®€å†åˆ—è¡¨ã€æ–‡ç« æ•°æ®ã€å•†å“è¯¦æƒ…</td></tr><tr><td><strong>Client State</strong></td><td>ä»…å­˜åœ¨äºæµè§ˆå™¨ä¸­çš„ UI çŠ¶æ€ï¼Œä½ å®Œå…¨æ‹¥æœ‰å®ƒ</td><td>åŒæ­¥ã€ç¬æ€ã€ä¸éœ€è¦ç¼“å­˜ã€åªä½ èƒ½æ”¹</td><td><strong>Zustand / Context</strong></td><td>ä¾§è¾¹æ å¼€å…³ã€å¼¹çª—æ˜¾ç¤ºã€è§†å›¾åˆ‡æ¢ã€æš—é»‘æ¨¡å¼</td></tr></tbody></table>
<p>è¿™ä¸ªåˆ†ç±»çœ‹èµ·æ¥ç®€å•ï¼Œä½†å®ƒå†³å®šäº†ä½ çš„æ¶æ„æ–¹å‘ã€‚</p>
<h4 data-id="heading-4">ä¸ºä»€ä¹ˆè¦åˆ†ç¦»ï¼Ÿ</h4>
<p><strong>Server State çš„æœ¬è´¨æ˜¯è¿œç¨‹ç¼“å­˜</strong>ï¼Œå®ƒçš„æ ¸å¿ƒé—®é¢˜æ˜¯ï¼š</p>
<ul>
<li>å¦‚ä½•é¿å…é‡å¤è¯·æ±‚ï¼Ÿ</li>
<li>å¦‚ä½•çŸ¥é“æ•°æ®æ˜¯å¦è¿‡æœŸï¼Ÿ</li>
<li>å¦‚ä½•åœ¨å¤šä¸ªç»„ä»¶é—´å…±äº«åŒä¸€ä»½æ•°æ®ï¼Ÿ</li>
<li>å¦‚ä½•åœ¨åå°è‡ªåŠ¨æ›´æ–°æ•°æ®ï¼Ÿ</li>
</ul>
<p><strong>Client State çš„æœ¬è´¨æ˜¯æœ¬åœ°å˜é‡</strong>ï¼Œå®ƒçš„æ ¸å¿ƒé—®é¢˜æ˜¯ï¼š</p>
<ul>
<li>å¦‚ä½•è·¨ç»„ä»¶å…±äº«ï¼Ÿ</li>
<li>æ˜¯å¦éœ€è¦æŒä¹…åŒ–ï¼Ÿ</li>
<li>å¦‚ä½•é¿å…ä¸å¿…è¦çš„é‡æ¸²æŸ“ï¼Ÿ</li>
</ul>
<p><strong>è¿™ä¸¤ç±»é—®é¢˜å®Œå…¨ä¸åŒï¼Œç”¨åŒä¸€å¥—å·¥å…·ï¼ˆRedux/Zustandï¼‰è§£å†³ï¼Œåªä¼šè®©ä»£ç è¶Šæ¥è¶Šä¹±ã€‚</strong></p>
<h4 data-id="heading-5">æ€ç»´è½¬å˜ï¼šä»ã€ŒçŠ¶æ€å®¹å™¨ã€åˆ°ã€Œæ•°æ®åŒæ­¥ã€</h4>
<p>ä¼ ç»Ÿæ€ç»´ï¼ˆRedux/Zustandï¼‰ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">API â†’ fetch â†’ <span class="hljs-built_in">dispatch</span>(setData) â†’ Global Store â†’ Component
</code></pre>
<p>æ–°æ€ç»´ï¼ˆReact Queryï¼‰ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">API â† Component (é€šè¿‡ useQuery ç›´æ¥è®¢é˜…)
<span class="hljs-code">      â†‘
      â””â”€ è‡ªåŠ¨ç¼“å­˜ã€å»é‡ã€æ›´æ–°ã€å…±äº«
</span></code></pre>
<p><strong>æ ¸å¿ƒåŒºåˆ«</strong>ï¼šä¸å†æ˜¯"è·å–æ•°æ®åå­˜åˆ° Store"ï¼Œè€Œæ˜¯"ç»„ä»¶ç›´æ¥è®¢é˜…æ•°æ®æº"ã€‚React Query ä¼šå¸®ä½ å¤„ç†æ‰€æœ‰è„æ´»ç´¯æ´»ã€‚</p>
<h3 data-id="heading-6">ç¬¬äºŒéƒ¨åˆ†ï¼šåæ¨¡å¼è­¦ç¤º - é‚£äº›å¹´æˆ‘ä»¬è¸©è¿‡çš„å‘</h3>
<p>åœ¨æ·±å…¥æœ€ä½³å®è·µä¹‹å‰ï¼Œå…ˆçœ‹çœ‹å“ªäº›åšæ³•æ˜¯<strong>å¿…é¡»é¿å…</strong>çš„ã€‚</p>
<h4 data-id="heading-7">åæ¨¡å¼ 1ï¼šæŠŠ API æ•°æ®å­˜è¿› Zustand/Redux</h4>
<p><strong>é”™è¯¯ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">//  ä¸è¦è¿™æ ·åš</span>
<span class="hljs-keyword">const</span> useUserStore = <span class="hljs-title function_">create</span>(<span class="hljs-function">(<span class="hljs-params">set</span>) =&gt;</span> ({
  <span class="hljs-attr">currentUser</span>: <span class="hljs-literal">null</span>,
  <span class="hljs-attr">isLoading</span>: <span class="hljs-literal">false</span>,
  <span class="hljs-attr">error</span>: <span class="hljs-literal">null</span>,

  <span class="hljs-attr">fetchUser</span>: <span class="hljs-keyword">async</span> () =&gt; {
    <span class="hljs-title function_">set</span>({ <span class="hljs-attr">isLoading</span>: <span class="hljs-literal">true</span> });
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> user = <span class="hljs-keyword">await</span> api.<span class="hljs-title function_">fetchUser</span>();
      <span class="hljs-title function_">set</span>({ <span class="hljs-attr">currentUser</span>: user, <span class="hljs-attr">isLoading</span>: <span class="hljs-literal">false</span> });
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-title function_">set</span>({ error, <span class="hljs-attr">isLoading</span>: <span class="hljs-literal">false</span> });
    }
  },
}));

<span class="hljs-comment">// ç»„ä»¶ A</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">Header</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> { currentUser, fetchUser } = <span class="hljs-title function_">useUserStore</span>();
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> { <span class="hljs-title function_">fetchUser</span>(); }, []);
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{currentUser?.name}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
}

<span class="hljs-comment">// ç»„ä»¶ B</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">Sidebar</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> { currentUser, fetchUser } = <span class="hljs-title function_">useUserStore</span>();
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> { <span class="hljs-title function_">fetchUser</span>(); }, []); <span class="hljs-comment">// åˆè¯·æ±‚ä¸€æ¬¡ï¼Ÿ</span>
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Avatar</span> <span class="hljs-attr">src</span>=<span class="hljs-string">{currentUser?.avatar}</span> /&gt;</span></span>;
}
</code></pre>
<p><strong>é—®é¢˜è¯Šæ–­</strong>ï¼š</p>
<ol>
<li>æ¯ä¸ªç»„ä»¶éƒ½è¦æ‰‹åŠ¨è§¦å‘ <code>fetchUser</code>ï¼Œå®¹æ˜“é‡å¤è¯·æ±‚</li>
<li>æ•°æ®æ–°é²œåº¦æ— æ³•ä¿è¯ï¼ˆç”¨æˆ·ä¿¡æ¯å¯èƒ½åœ¨æœåŠ¡å™¨è¢«ä¿®æ”¹äº†ï¼‰</li>
<li>ç¼“å­˜é€»è¾‘éœ€è¦æ‰‹å†™ï¼ˆå¦‚ä½•åˆ¤æ–­æ•°æ®æ˜¯å¦è¿‡æœŸï¼Ÿï¼‰</li>
<li>è·¨é¡µé¢å…±äº«å›°éš¾ï¼ˆA é¡µé¢è·å–çš„æ•°æ®ï¼ŒB é¡µé¢èƒ½ç”¨å—ï¼Ÿï¼‰</li>
</ol>
<p><strong>æ­£ç¡®åšæ³•</strong>ï¼ˆåé¢ä¼šè¯¦ç»†å±•å¼€ï¼‰ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ä½¿ç”¨ React Query</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">useCurrentUser</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">useQuery</span>({
    <span class="hljs-attr">queryKey</span>: [<span class="hljs-string">'currentUser'</span>],
    <span class="hljs-attr">queryFn</span>: api.<span class="hljs-property">fetchUser</span>,
    <span class="hljs-attr">staleTime</span>: <span class="hljs-number">5</span> * <span class="hljs-number">60</span> * <span class="hljs-number">1000</span>, <span class="hljs-comment">// 5åˆ†é’Ÿå†…è®¤ä¸ºæ•°æ®æ–°é²œ</span>
  });
}

<span class="hljs-comment">// ç»„ä»¶ A å’Œ B éƒ½è¿™æ ·ç”¨</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">Header</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> { <span class="hljs-attr">data</span>: user } = <span class="hljs-title function_">useCurrentUser</span>(); <span class="hljs-comment">// è‡ªåŠ¨å…±äº«ã€è‡ªåŠ¨å»é‡</span>
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{user?.name}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
}
</code></pre>
<hr/>
<h4 data-id="heading-8">åæ¨¡å¼ 2ï¼šuseEffect åŒæ­¥ Query æ•°æ®åˆ° Store</h4>
<p><strong>é”™è¯¯ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">//  åŒé‡æ•°æ®æºï¼šæ—¢æœ‰ Query åˆæœ‰ Store</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">UserProfile</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> { <span class="hljs-attr">data</span>: user } = <span class="hljs-title function_">useQuery</span>({
    <span class="hljs-attr">queryKey</span>: [<span class="hljs-string">'currentUser'</span>],
    <span class="hljs-attr">queryFn</span>: fetchUser,
  });

  <span class="hljs-keyword">const</span> setUser = <span class="hljs-title function_">useUserStore</span>(<span class="hljs-function">(<span class="hljs-params">s</span>) =&gt;</span> s.<span class="hljs-property">setUser</span>);

  <span class="hljs-comment">//  å±é™©ï¼ç›‘å¬ Query æ•°æ®å˜åŒ–ï¼Œæ‰‹åŠ¨åŒæ­¥åˆ° Store</span>
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">if</span> (user) {
      <span class="hljs-title function_">setUser</span>(user); <span class="hljs-comment">// ä¸ºä»€ä¹ˆè¦è¿™æ ·åšï¼Ÿ</span>
    }
  }, [user, setUser]);

  <span class="hljs-comment">// ç°åœ¨æ•°æ®æœ‰ä¸¤ä»½ï¼šQuery ç¼“å­˜ + Store</span>
  <span class="hljs-keyword">const</span> storeUser = <span class="hljs-title function_">useUserStore</span>(<span class="hljs-function">(<span class="hljs-params">s</span>) =&gt;</span> s.<span class="hljs-property">currentUser</span>);
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{storeUser?.name}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
}
</code></pre>
<p><strong>é—®é¢˜è¯Šæ–­</strong>ï¼š</p>
<ol>
<li><strong>åŒé‡æ•°æ®æº</strong>ï¼šåŒä¸€ä»½æ•°æ®æ—¢åœ¨ Query ç¼“å­˜åˆåœ¨ Storeï¼Œå“ªä¸ªæ˜¯çœŸç›¸ï¼Ÿ</li>
<li><strong>åŒæ­¥ Bug</strong>ï¼šå¦‚æœ Query æ•°æ®æ›´æ–°ä½† useEffect æ²¡è§¦å‘æ€ä¹ˆåŠï¼Ÿ</li>
<li><strong>æ— æ„ä¹‰çš„å¤æ‚åº¦</strong>ï¼šä¸ºä»€ä¹ˆä¸ç›´æ¥ç”¨ <code>user</code> è€Œè¦ç»•ä¸€åœˆå­˜åˆ° Storeï¼Ÿ</li>
</ol>
<p><strong>æ­£ç¡®åšæ³•</strong>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ç›´æ¥ä½¿ç”¨ Query æ•°æ®ï¼Œä¸è¦åŒæ­¥åˆ° Store</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">UserProfile</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> { <span class="hljs-attr">data</span>: user } = <span class="hljs-title function_">useQuery</span>({
    <span class="hljs-attr">queryKey</span>: [<span class="hljs-string">'currentUser'</span>],
    <span class="hljs-attr">queryFn</span>: fetchUser,
  });

  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{user?.name}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>; <span class="hljs-comment">// å°±è¿™ä¹ˆç®€å•</span>
}

<span class="hljs-comment">// å¦‚æœå…¶ä»–ç»„ä»¶éœ€è¦ï¼Œç›´æ¥ç”¨åŒæ ·çš„ Hook</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">Sidebar</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> { <span class="hljs-attr">data</span>: user } = <span class="hljs-title function_">useQuery</span>({
    <span class="hljs-attr">queryKey</span>: [<span class="hljs-string">'currentUser'</span>],
    <span class="hljs-attr">queryFn</span>: fetchUser,
  });
  <span class="hljs-comment">// React Query ä¼šè‡ªåŠ¨å…±äº«ç¼“å­˜ï¼Œä¸ä¼šé‡å¤è¯·æ±‚</span>
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Avatar</span> <span class="hljs-attr">src</span>=<span class="hljs-string">{user?.avatar}</span> /&gt;</span></span>;
}
</code></pre>
<p><strong>æ ¸å¿ƒåŸåˆ™ï¼šPull, Don't Push</strong></p>
<ul>
<li>ç»„ä»¶ä¸»åŠ¨"æ‹‰å–"æ•°æ®ï¼ˆ<code>useQuery</code>ï¼‰</li>
<li>è·å–æ•°æ®å"æ¨é€"åˆ° Storeï¼ˆ<code>setStore</code>ï¼‰</li>
</ul>
<hr/>
<h4 data-id="heading-9">åæ¨¡å¼ 3ï¼šæŠŠ UI çŠ¶æ€å­˜è¿› React Query</h4>
<p><strong>é”™è¯¯ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">//  React Query ä¸æ˜¯ä¸‡èƒ½çš„ï¼Œä¸è¦æ»¥ç”¨</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">useSidebarState</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">useQuery</span>({
    <span class="hljs-attr">queryKey</span>: [<span class="hljs-string">'sidebarOpen'</span>],
    <span class="hljs-attr">queryFn</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-literal">true</span>, <span class="hljs-comment">// è¿™æ ¹æœ¬ä¸æ˜¯å¼‚æ­¥æ•°æ®ï¼</span>
    <span class="hljs-attr">initialData</span>: <span class="hljs-literal">true</span>,
  });
}

<span class="hljs-comment">// æ›´æ–°ä¾§è¾¹æ çŠ¶æ€</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">toggleSidebar</span>(<span class="hljs-params"/>) {
  queryClient.<span class="hljs-title function_">setQueryData</span>([<span class="hljs-string">'sidebarOpen'</span>], <span class="hljs-function">(<span class="hljs-params">old</span>) =&gt;</span> !old);
}
</code></pre>
<p><strong>é—®é¢˜è¯Šæ–­</strong>ï¼š</p>
<ol>
<li>React Query æ˜¯ä¸ºå¼‚æ­¥æ•°æ®è®¾è®¡çš„ï¼Œä¸æ˜¯é€šç”¨çŠ¶æ€ç®¡ç†å™¨</li>
<li>æµªè´¹äº† Query çš„ç¼“å­˜ã€è¿‡æœŸã€é‡è¯•ç­‰ç‰¹æ€§ï¼ˆUI çŠ¶æ€ä¸éœ€è¦è¿™äº›ï¼‰</li>
<li>è¯­ä¹‰æ··ä¹±ï¼šä¾§è¾¹æ çŠ¶æ€ä¸æ˜¯"æŸ¥è¯¢"å‡ºæ¥çš„</li>
</ol>
<p><strong>æ­£ç¡®åšæ³•</strong>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// çº¯ UI çŠ¶æ€ç”¨ Zustand æˆ– Context</span>
<span class="hljs-keyword">const</span> useUIStore = <span class="hljs-title function_">create</span>(<span class="hljs-function">(<span class="hljs-params">set</span>) =&gt;</span> ({
  <span class="hljs-attr">isSidebarOpen</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">toggleSidebar</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">set</span>(<span class="hljs-function">(<span class="hljs-params">s</span>) =&gt;</span> ({ <span class="hljs-attr">isSidebarOpen</span>: !s.<span class="hljs-property">isSidebarOpen</span> })),
}));
</code></pre>
<hr/>
<h4 data-id="heading-10">åæ¨¡å¼ 4ï¼šMutation åæ‰‹åŠ¨æ›´æ–° Store è€Œä¸æ˜¯ Invalidate</h4>
<p><strong>é”™è¯¯ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">//  æ‰‹åŠ¨ç»´æŠ¤æ•°æ®ä¸€è‡´æ€§</span>
<span class="hljs-keyword">const</span> updateUserMutation = <span class="hljs-title function_">useMutation</span>({
  <span class="hljs-attr">mutationFn</span>: updateUser,
  <span class="hljs-attr">onSuccess</span>: <span class="hljs-function">(<span class="hljs-params">newUser</span>) =&gt;</span> {
    <span class="hljs-comment">// æ‰‹åŠ¨æ›´æ–° Store</span>
    useUserStore.<span class="hljs-title function_">setState</span>({ <span class="hljs-attr">currentUser</span>: newUser });

    <span class="hljs-comment">// è¿˜è¦æ‰‹åŠ¨æ›´æ–°ç”¨æˆ·åˆ—è¡¨</span>
    useUserStore.<span class="hljs-title function_">setState</span>(<span class="hljs-function">(<span class="hljs-params">s</span>) =&gt;</span> ({
      <span class="hljs-attr">users</span>: s.<span class="hljs-property">users</span>.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">u</span>) =&gt;</span> (u.<span class="hljs-property">id</span> === newUser.<span class="hljs-property">id</span> ? newUser : u)),
    }));

    <span class="hljs-comment">// å“ªé‡Œè¿˜æœ‰ç”¨æˆ·æ•°æ®ï¼Ÿéƒ½è¦æ‰‹åŠ¨æ›´æ–°...</span>
  },
});
</code></pre>
<p><strong>é—®é¢˜è¯Šæ–­</strong>ï¼š</p>
<ol>
<li>æ‰‹åŠ¨åŒæ­¥å®¹æ˜“é—æ¼ï¼ˆè¿˜æœ‰å¤šå°‘åœ°æ–¹ç”¨äº†è¿™ä¸ªç”¨æˆ·æ•°æ®ï¼Ÿï¼‰</li>
<li>æ•°æ®ä¸ä¸€è‡´é£é™©ï¼ˆæœåŠ¡å™¨è¿”å›çš„æ•°æ®å¯èƒ½å’Œä½ æƒ³çš„ä¸ä¸€æ ·ï¼‰</li>
<li>ä»£ç ç»´æŠ¤å™©æ¢¦ï¼ˆæ¯ä¸ª Mutation éƒ½è¦å†™ä¸€å †åŒæ­¥é€»è¾‘ï¼‰</li>
</ol>
<p><strong>æ­£ç¡®åšæ³•</strong>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// è®© React Query é‡æ–°è·å–ï¼ŒæœåŠ¡å™¨æ˜¯å”¯ä¸€çœŸç›¸</span>
<span class="hljs-keyword">const</span> updateUserMutation = <span class="hljs-title function_">useMutation</span>({
  <span class="hljs-attr">mutationFn</span>: updateUser,
  <span class="hljs-attr">onSuccess</span>: <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">// æ ‡è®°æ•°æ®ä¸º"è¿‡æœŸ"ï¼ŒReact Query ä¼šè‡ªåŠ¨é‡æ–°è·å–</span>
    queryClient.<span class="hljs-title function_">invalidateQueries</span>({ <span class="hljs-attr">queryKey</span>: [<span class="hljs-string">'currentUser'</span>] });
    queryClient.<span class="hljs-title function_">invalidateQueries</span>({ <span class="hljs-attr">queryKey</span>: [<span class="hljs-string">'users'</span>] });
  },
});
</code></pre>
<p><strong>æ ¸å¿ƒåŸåˆ™ï¼šServer is the source of truth</strong></p>
<ul>
<li>Mutation åå‘Šè¯‰ Query "æ•°æ®è„äº†ï¼Œé‡æ–°æ‹‰å–"</li>
<li>Mutation åæ‰‹åŠ¨åŒæ­¥æœ¬åœ°æ•°æ®ï¼ˆå®¹æ˜“å‡ºé”™ï¼‰</li>
</ul>
<hr/>
<p>è¿™äº›åæ¨¡å¼çš„å…±åŒç‚¹æ˜¯ï¼š<strong>è¯•å›¾ç”¨é€šç”¨çŠ¶æ€ç®¡ç†å·¥å…·ï¼ˆRedux/Zustandï¼‰è§£å†³å¼‚æ­¥æ•°æ®ç®¡ç†é—®é¢˜</strong>ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬çœ‹çœ‹æ­£ç¡®çš„æ¶æ„åº”è¯¥æ˜¯ä»€ä¹ˆæ ·ã€‚</p>
<h3 data-id="heading-11">ç¬¬ä¸‰éƒ¨åˆ†ï¼šServer State çš„æ­£ç¡®æ‰“å¼€æ–¹å¼ (React Query)</h3>
<h4 data-id="heading-12">æ ¸å¿ƒè®¤çŸ¥ï¼šQueryKey å°±æ˜¯å…¨å±€ Store ID</h4>
<p>è¿™æ˜¯æœ€é‡è¦çš„æ€ç»´è½¬å˜ï¼š<strong>åœ¨ React Query ä¸­ï¼Œ<code>queryKey</code> å°±æ˜¯çŠ¶æ€çš„å”¯ä¸€æ ‡è¯†ç¬¦ï¼Œç±»ä¼¼äº Redux ä¸­çš„ Store Keyã€‚</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ä¼ ç»Ÿæ€ç»´ï¼šæ‰‹åŠ¨åˆ›å»ºå…¨å±€ Store</span>
<span class="hljs-keyword">const</span> useUserStore = <span class="hljs-title function_">create</span>(<span class="hljs-function">() =&gt;</span> ({
  <span class="hljs-attr">currentUser</span>: <span class="hljs-literal">null</span>, <span class="hljs-comment">// &lt;-- Store Key</span>
}));

<span class="hljs-comment">// React Query æ€ç»´ï¼šQueryKey å°±æ˜¯éšå¼çš„ Store ID</span>
<span class="hljs-keyword">const</span> { <span class="hljs-attr">data</span>: currentUser } = <span class="hljs-title function_">useQuery</span>({
  <span class="hljs-attr">queryKey</span>: [<span class="hljs-string">'currentUser'</span>], <span class="hljs-comment">// &lt;-- è¿™å°±æ˜¯ Store Key</span>
  <span class="hljs-attr">queryFn</span>: fetchUser,
});
</code></pre>
<p><strong>è‡ªåŠ¨å…±äº«çš„é­”æ³•</strong>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ç»„ä»¶ A</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">Header</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> { data } = <span class="hljs-title function_">useQuery</span>({
    <span class="hljs-attr">queryKey</span>: [<span class="hljs-string">'currentUser'</span>],
    <span class="hljs-attr">queryFn</span>: fetchUser,
  });
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{data?.name}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
}

<span class="hljs-comment">// ç»„ä»¶ Bï¼ˆå®Œå…¨ç‹¬ç«‹çš„ç»„ä»¶æ ‘ï¼‰</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">Sidebar</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> { data } = <span class="hljs-title function_">useQuery</span>({
    <span class="hljs-attr">queryKey</span>: [<span class="hljs-string">'currentUser'</span>], <span class="hljs-comment">// ç›¸åŒçš„ queryKey</span>
    <span class="hljs-attr">queryFn</span>: fetchUser,
  });
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Avatar</span> <span class="hljs-attr">src</span>=<span class="hljs-string">{data?.avatar}</span> /&gt;</span></span>;
}

<span class="hljs-comment">// ç»“æœï¼š</span>
<span class="hljs-comment">// 1. åªä¼šå‘é€ä¸€æ¬¡è¯·æ±‚ï¼ˆè‡ªåŠ¨å»é‡ï¼‰</span>
<span class="hljs-comment">// 2. ä¸¤ä¸ªç»„ä»¶å…±äº«åŒä¸€ä»½ç¼“å­˜æ•°æ®</span>
<span class="hljs-comment">// 3. æ•°æ®æ›´æ–°æ—¶ï¼Œä¸¤ä¸ªç»„ä»¶è‡ªåŠ¨åŒæ­¥</span>
</code></pre>
<p><strong>ä¸å†éœ€è¦æ˜¾å¼çš„å…¨å±€ Storeï¼ŒQueryKey å°±æ˜¯éšå¼çš„ Store IDã€‚</strong></p>
<hr/>
<h4 data-id="heading-13">æœ€ä½³å®è·µ 1ï¼šä½¿ç”¨ Factory Pattern ç®¡ç† QueryKey</h4>
<p>éšç€åº”ç”¨å¢é•¿ï¼ŒQueryKey ä¼šè¶Šæ¥è¶Šå¤šï¼Œä½¿ç”¨å¸¸é‡å¯¹è±¡ç»Ÿä¸€ç®¡ç†ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// src/queries/queryKeys.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">USER_KEYS</span> = {
  <span class="hljs-attr">all</span>: [<span class="hljs-string">'users'</span>] <span class="hljs-keyword">as</span> <span class="hljs-keyword">const</span>,
  <span class="hljs-attr">currentUser</span>: [<span class="hljs-string">'currentUser'</span>] <span class="hljs-keyword">as</span> <span class="hljs-keyword">const</span>,
  <span class="hljs-attr">byId</span>: <span class="hljs-function">(<span class="hljs-params">id: <span class="hljs-built_in">string</span></span>) =&gt;</span> [<span class="hljs-string">'users'</span>, id] <span class="hljs-keyword">as</span> <span class="hljs-keyword">const</span>,
  <span class="hljs-attr">posts</span>: <span class="hljs-function">(<span class="hljs-params">userId: <span class="hljs-built_in">string</span></span>) =&gt;</span> [<span class="hljs-string">'users'</span>, userId, <span class="hljs-string">'posts'</span>] <span class="hljs-keyword">as</span> <span class="hljs-keyword">const</span>,
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">RESUME_KEYS</span> = {
  <span class="hljs-attr">all</span>: [<span class="hljs-string">'resumes'</span>] <span class="hljs-keyword">as</span> <span class="hljs-keyword">const</span>,
  <span class="hljs-attr">byId</span>: <span class="hljs-function">(<span class="hljs-params">id: <span class="hljs-built_in">string</span></span>) =&gt;</span> [<span class="hljs-string">'resumes'</span>, id] <span class="hljs-keyword">as</span> <span class="hljs-keyword">const</span>,
  <span class="hljs-attr">templates</span>: [<span class="hljs-string">'resume-templates'</span>] <span class="hljs-keyword">as</span> <span class="hljs-keyword">const</span>,
};
</code></pre>
<p><strong>å¥½å¤„</strong>ï¼š</p>
<ol>
<li>é¿å… Key æ‹¼å†™é”™è¯¯</li>
<li>æ–¹ä¾¿æ‰¹é‡ invalidateï¼ˆå¦‚ <code>invalidateQueries({ queryKey: USER_KEYS.all })</code>ï¼‰</li>
<li>æ¸…æ™°çš„æ•°æ®æ¨¡å‹ç´¢å¼•</li>
</ol>
<hr/>
<h4 data-id="heading-14">æœ€ä½³å®è·µ 2ï¼šå°è£…è‡ªå®šä¹‰ Hookï¼ˆPull, Don't Pushï¼‰</h4>
<p>ä¸è¦åœ¨ç»„ä»¶é‡Œç›´æ¥å†™ <code>useQuery</code>ï¼Œå°è£…æˆè¯­ä¹‰åŒ–çš„ Hookï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// src/queries/useUserQueries.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">useCurrentUser</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">useQuery</span>({
    <span class="hljs-attr">queryKey</span>: <span class="hljs-variable constant_">USER_KEYS</span>.<span class="hljs-property">currentUser</span>,
    <span class="hljs-attr">queryFn</span>: api.<span class="hljs-property">fetchUserProfile</span>,
    <span class="hljs-attr">staleTime</span>: <span class="hljs-number">1000</span> * <span class="hljs-number">60</span> * <span class="hljs-number">5</span>, <span class="hljs-comment">// 5åˆ†é’Ÿå†…è®¤ä¸ºæ•°æ®æ–°é²œï¼Œä¸é‡å¤è¯·æ±‚</span>
  });
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">useUserPosts</span>(<span class="hljs-params">userId: <span class="hljs-built_in">string</span></span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">useQuery</span>({
    <span class="hljs-attr">queryKey</span>: <span class="hljs-variable constant_">USER_KEYS</span>.<span class="hljs-title function_">posts</span>(userId),
    <span class="hljs-attr">queryFn</span>: <span class="hljs-function">() =&gt;</span> api.<span class="hljs-title function_">fetchUserPosts</span>(userId),
    <span class="hljs-attr">enabled</span>: !!userId, <span class="hljs-comment">// åªæœ‰ userId å­˜åœ¨æ—¶æ‰æ‰§è¡ŒæŸ¥è¯¢</span>
  });
}
</code></pre>
<p><strong>ç»„ä»¶ä½¿ç”¨</strong>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">UserProfile</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> { <span class="hljs-attr">data</span>: user, isLoading, error } = <span class="hljs-title function_">useCurrentUser</span>();

  <span class="hljs-keyword">if</span> (isLoading) <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Spinner</span> /&gt;</span></span>;
  <span class="hljs-keyword">if</span> (error) <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Error</span> <span class="hljs-attr">message</span>=<span class="hljs-string">{error.message}</span> /&gt;</span></span>;

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>{user.name}<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">UserPosts</span> <span class="hljs-attr">userId</span>=<span class="hljs-string">{user.id}</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">UserPosts</span>(<span class="hljs-params">{ userId }: { userId: <span class="hljs-built_in">string</span> }</span>) {
  <span class="hljs-keyword">const</span> { <span class="hljs-attr">data</span>: posts } = <span class="hljs-title function_">useUserPosts</span>(userId);
  <span class="hljs-comment">// å¦‚æœ Header ç»„ä»¶ä¹Ÿéœ€è¦ç”¨æˆ·ä¿¡æ¯ï¼Œç›´æ¥è°ƒç”¨ useCurrentUser()</span>
  <span class="hljs-comment">// React Query ä¼šè‡ªåŠ¨å…±äº«ç¼“å­˜ï¼Œä¸ä¼šé‡å¤è¯·æ±‚</span>
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">PostList</span> <span class="hljs-attr">posts</span>=<span class="hljs-string">{posts}</span> /&gt;</span></span>;
}
</code></pre>
<p><strong>æ ¸å¿ƒåŸåˆ™</strong>ï¼šç»„ä»¶ä¸»åŠ¨"æ‹‰å–"æ‰€éœ€æ•°æ®ï¼Œè€Œä¸æ˜¯ç­‰å¾…æ•°æ®"æ¨é€"è¿‡æ¥ã€‚</p>
<hr/>
<h4 data-id="heading-15">æœ€ä½³å®è·µ 3ï¼šç†è§£ staleTime vs cacheTime</h4>
<p>è¿™æ˜¯æ–°æ‰‹æœ€å®¹æ˜“æ··æ·†çš„æ¦‚å¿µï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-title function_">useQuery</span>({
  <span class="hljs-attr">queryKey</span>: [<span class="hljs-string">'data'</span>],
  <span class="hljs-attr">queryFn</span>: fetchData,
  <span class="hljs-attr">staleTime</span>: <span class="hljs-number">5</span> * <span class="hljs-number">60</span> * <span class="hljs-number">1000</span>, <span class="hljs-comment">// æ•°æ®åœ¨ 5 åˆ†é’Ÿå†…è®¤ä¸ºæ˜¯"æ–°é²œ"çš„</span>
  <span class="hljs-attr">cacheTime</span>: <span class="hljs-number">10</span> * <span class="hljs-number">60</span> * <span class="hljs-number">1000</span>, <span class="hljs-comment">// æ•°æ®åœ¨ 10 åˆ†é’Ÿåä»ç¼“å­˜ä¸­åˆ é™¤</span>
});
</code></pre>




















<table><thead><tr><th>é…ç½®</th><th>å«ä¹‰</th><th>è§¦å‘è¡Œä¸º</th></tr></thead><tbody><tr><td><code>staleTime</code></td><td>æ•°æ®å¤šä¹…åå˜"é™ˆæ—§"</td><td>é™ˆæ—§æ•°æ®ä¼šåœ¨ç»„ä»¶é‡æ–°æŒ‚è½½/çª—å£é‡æ–°èšç„¦æ—¶è‡ªåŠ¨é‡æ–°è·å–</td></tr><tr><td><code>cacheTime</code></td><td>æ•°æ®å¤šä¹…åä»ç¼“å­˜åˆ é™¤</td><td>åˆ é™¤åä¸‹æ¬¡æŸ¥è¯¢ä¼šå‘é€æ–°è¯·æ±‚</td></tr></tbody></table>
<p><strong>å…¸å‹é…ç½®</strong>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ç”¨æˆ·ä¿¡æ¯ï¼šä¸å¸¸å˜ï¼Œå¯ä»¥ç¼“å­˜ä¹…ä¸€ç‚¹</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">useCurrentUser</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">useQuery</span>({
    <span class="hljs-attr">queryKey</span>: <span class="hljs-variable constant_">USER_KEYS</span>.<span class="hljs-property">currentUser</span>,
    <span class="hljs-attr">queryFn</span>: fetchUser,
    <span class="hljs-attr">staleTime</span>: <span class="hljs-number">5</span> * <span class="hljs-number">60</span> * <span class="hljs-number">1000</span>, <span class="hljs-comment">// 5åˆ†é’Ÿ</span>
    <span class="hljs-attr">cacheTime</span>: <span class="hljs-number">10</span> * <span class="hljs-number">60</span> * <span class="hljs-number">1000</span>, <span class="hljs-comment">// 10åˆ†é’Ÿ</span>
  });
}

<span class="hljs-comment">// å®æ—¶æ•°æ®ï¼šéœ€è¦é¢‘ç¹æ›´æ–°</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">useRealtimeStats</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">useQuery</span>({
    <span class="hljs-attr">queryKey</span>: [<span class="hljs-string">'stats'</span>],
    <span class="hljs-attr">queryFn</span>: fetchStats,
    <span class="hljs-attr">staleTime</span>: <span class="hljs-number">0</span>, <span class="hljs-comment">// æ€»æ˜¯è®¤ä¸ºæ•°æ®é™ˆæ—§ï¼Œä¼šé¢‘ç¹åˆ·æ–°</span>
    <span class="hljs-attr">refetchInterval</span>: <span class="hljs-number">10000</span>, <span class="hljs-comment">// æ¯ 10 ç§’è‡ªåŠ¨åˆ·æ–°</span>
  });
}
</code></pre>
<hr/>
<h4 data-id="heading-16">æœ€ä½³å®è·µ 4ï¼šé¿å…æ‰‹åŠ¨åŒæ­¥åˆ° Zustand</h4>
<p><strong>å†æ¬¡å¼ºè°ƒ</strong>ï¼šå¦‚æœä½ å‘ç°è‡ªå·±åœ¨å†™è¿™ç§ä»£ç ï¼Œç«‹åˆ»åœä¸‹æ¥é‡æ–°å®¡è§†æ¶æ„ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">//  ç»å¯¹ä¸è¦è¿™æ ·åš</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">UserProfile</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> { data } = <span class="hljs-title function_">useQuery</span>({ <span class="hljs-attr">queryKey</span>: [<span class="hljs-string">'user'</span>], <span class="hljs-attr">queryFn</span>: fetchUser });
  <span class="hljs-keyword">const</span> setUser = <span class="hljs-title function_">useUserStore</span>(<span class="hljs-function">(<span class="hljs-params">s</span>) =&gt;</span> s.<span class="hljs-property">setUser</span>);

  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">if</span> (data) <span class="hljs-title function_">setUser</span>(data); <span class="hljs-comment">//  åŒé‡æ•°æ®æºè­¦å‘Šï¼</span>
  }, [data, setUser]);
}
</code></pre>
<p><strong>å¦‚æœä½ éœ€è¦åœ¨å¤šä¸ªç»„ä»¶è®¿é—®åŒä¸€ä»½ Query æ•°æ®ï¼Œæ­£ç¡®åšæ³•æ˜¯</strong>ï¼š</p>
<ol>
<li><strong>å°è£…è‡ªå®šä¹‰ Hook</strong>ï¼ˆæ¨èï¼‰ï¼š</li>
</ol>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ä»»ä½•ç»„ä»¶éƒ½å¯ä»¥ç›´æ¥è°ƒç”¨</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">useCurrentUser</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">useQuery</span>({ <span class="hljs-attr">queryKey</span>: [<span class="hljs-string">'currentUser'</span>], <span class="hljs-attr">queryFn</span>: fetchUser });
}
</code></pre>
<ol start="2">
<li><strong>å¦‚æœçœŸçš„éœ€è¦ Zustand å­˜å‚¨è¡ç”ŸçŠ¶æ€</strong>ï¼ˆæå°‘æ•°åœºæ™¯ï¼‰ï¼š</li>
</ol>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// åªå­˜å‚¨"é€‰æ‹©"æˆ–"ä¸´æ—¶æ ‡è®°"ï¼Œä¸å­˜å‚¨ API æ•°æ®æœ¬èº«</span>
<span class="hljs-keyword">const</span> useSelectionStore = <span class="hljs-title function_">create</span>(<span class="hljs-function">(<span class="hljs-params">set</span>) =&gt;</span> ({
  <span class="hljs-attr">selectedUserId</span>: <span class="hljs-literal">null</span>, <span class="hljs-comment">// åªå­˜ IDï¼Œä¸å­˜æ•´ä¸ª user å¯¹è±¡</span>
  <span class="hljs-attr">setSelectedUserId</span>: <span class="hljs-function">(<span class="hljs-params">id</span>) =&gt;</span> <span class="hljs-title function_">set</span>({ <span class="hljs-attr">selectedUserId</span>: id }),
}));

<span class="hljs-keyword">function</span> <span class="hljs-title function_">UserList</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> { <span class="hljs-attr">data</span>: users } = <span class="hljs-title function_">useQuery</span>({ <span class="hljs-attr">queryKey</span>: [<span class="hljs-string">'users'</span>], <span class="hljs-attr">queryFn</span>: fetchUsers });
  <span class="hljs-keyword">const</span> setSelectedUserId = <span class="hljs-title function_">useSelectionStore</span>(<span class="hljs-function">(<span class="hljs-params">s</span>) =&gt;</span> s.<span class="hljs-property">setSelectedUserId</span>);

  <span class="hljs-keyword">return</span> users.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">user</span>) =&gt;</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">UserCard</span>
      <span class="hljs-attr">key</span>=<span class="hljs-string">{user.id}</span>
      <span class="hljs-attr">user</span>=<span class="hljs-string">{user}</span>
      <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> setSelectedUserId(user.id)} // åªå­˜ ID
    /&gt;</span>
  ));
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">UserDetail</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> selectedUserId = <span class="hljs-title function_">useSelectionStore</span>(<span class="hljs-function">(<span class="hljs-params">s</span>) =&gt;</span> s.<span class="hljs-property">selectedUserId</span>);
  <span class="hljs-comment">// æ ¹æ® ID é‡æ–°æŸ¥è¯¢å®Œæ•´æ•°æ®</span>
  <span class="hljs-keyword">const</span> { <span class="hljs-attr">data</span>: user } = <span class="hljs-title function_">useQuery</span>({
    <span class="hljs-attr">queryKey</span>: [<span class="hljs-string">'users'</span>, selectedUserId],
    <span class="hljs-attr">queryFn</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">fetchUser</span>(selectedUserId),
    <span class="hljs-attr">enabled</span>: !!selectedUserId,
  });
}
</code></pre>
<p><strong>åŸåˆ™</strong>ï¼šZustand å¯ä»¥å­˜"å¼•ç”¨"ï¼ˆIDã€ç´¢å¼•ï¼‰ï¼Œä½†ä¸è¦å­˜ API æ•°æ®æœ¬èº«ã€‚</p>
<h3 data-id="heading-17">ç¬¬å››éƒ¨åˆ†ï¼šClient State çš„å…‹åˆ¶ä½¿ç”¨ (Zustand)</h3>
<p>åœ¨ React Query æ¥ç®¡äº†æ‰€æœ‰ Server State åï¼ŒZustand åº”è¯¥å˜å¾—<strong>éå¸¸è½»é‡</strong>ã€‚å¦‚æœä½ çš„ Zustand Store è¿˜æ˜¯å¾ˆåºå¤§ï¼Œè¯´æ˜æ¶æ„å¯èƒ½æœ‰é—®é¢˜ã€‚</p>
<h4 data-id="heading-18">Zustand çš„æ­£ç¡®å®šä½ï¼šçº¯ UI çŠ¶æ€</h4>
<p>Zustand åªåº”è¯¥ç”¨äºä¸¤ç±»åœºæ™¯ï¼š</p>
<h5 data-id="heading-19">1. çº¯ UI æ§åˆ¶çŠ¶æ€</h5>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// src/store/useUIStore.ts</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">UIState</span> {
  <span class="hljs-comment">// ä¾§è¾¹æ </span>
  <span class="hljs-attr">isSidebarOpen</span>: <span class="hljs-built_in">boolean</span>;
  <span class="hljs-attr">toggleSidebar</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span>;

  <span class="hljs-comment">// ä¸»é¢˜</span>
  <span class="hljs-attr">theme</span>: <span class="hljs-string">'light'</span> | <span class="hljs-string">'dark'</span>;
  <span class="hljs-attr">setTheme</span>: <span class="hljs-function">(<span class="hljs-params">theme: <span class="hljs-string">'light'</span> | <span class="hljs-string">'dark'</span></span>) =&gt;</span> <span class="hljs-built_in">void</span>;

  <span class="hljs-comment">// è§†å›¾æ¨¡å¼</span>
  <span class="hljs-attr">viewMode</span>: <span class="hljs-string">'grid'</span> | <span class="hljs-string">'list'</span>;
  <span class="hljs-attr">setViewMode</span>: <span class="hljs-function">(<span class="hljs-params">mode: <span class="hljs-string">'grid'</span> | <span class="hljs-string">'list'</span></span>) =&gt;</span> <span class="hljs-built_in">void</span>;

  <span class="hljs-comment">// å¼¹çª—</span>
  <span class="hljs-attr">activeModal</span>: <span class="hljs-built_in">string</span> | <span class="hljs-literal">null</span>;
  <span class="hljs-attr">openModal</span>: <span class="hljs-function">(<span class="hljs-params">id: <span class="hljs-built_in">string</span></span>) =&gt;</span> <span class="hljs-built_in">void</span>;
  <span class="hljs-attr">closeModal</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span>;
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> useUIStore = create&lt;<span class="hljs-title class_">UIState</span>&gt;(<span class="hljs-function">(<span class="hljs-params">set</span>) =&gt;</span> ({
  <span class="hljs-attr">isSidebarOpen</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">toggleSidebar</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">set</span>(<span class="hljs-function">(<span class="hljs-params">s</span>) =&gt;</span> ({ <span class="hljs-attr">isSidebarOpen</span>: !s.<span class="hljs-property">isSidebarOpen</span> })),

  <span class="hljs-attr">theme</span>: <span class="hljs-string">'light'</span>,
  <span class="hljs-attr">setTheme</span>: <span class="hljs-function">(<span class="hljs-params">theme</span>) =&gt;</span> <span class="hljs-title function_">set</span>({ theme }),

  <span class="hljs-attr">viewMode</span>: <span class="hljs-string">'grid'</span>,
  <span class="hljs-attr">setViewMode</span>: <span class="hljs-function">(<span class="hljs-params">mode</span>) =&gt;</span> <span class="hljs-title function_">set</span>({ <span class="hljs-attr">viewMode</span>: mode }),

  <span class="hljs-attr">activeModal</span>: <span class="hljs-literal">null</span>,
  <span class="hljs-attr">openModal</span>: <span class="hljs-function">(<span class="hljs-params">id</span>) =&gt;</span> <span class="hljs-title function_">set</span>({ <span class="hljs-attr">activeModal</span>: id }),
  <span class="hljs-attr">closeModal</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">set</span>({ <span class="hljs-attr">activeModal</span>: <span class="hljs-literal">null</span> }),
}));
</code></pre>
<p><strong>ä½¿ç”¨ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Header</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> { isSidebarOpen, toggleSidebar } = <span class="hljs-title function_">useUIStore</span>();
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">IconButton</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{toggleSidebar}</span> <span class="hljs-attr">icon</span>=<span class="hljs-string">{isSidebarOpen</span> ? '<span class="hljs-attr">close</span>' <span class="hljs-attr">:</span> '<span class="hljs-attr">menu</span>'} /&gt;</span></span>;
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">Sidebar</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> isSidebarOpen = <span class="hljs-title function_">useUIStore</span>(<span class="hljs-function">(<span class="hljs-params">s</span>) =&gt;</span> s.<span class="hljs-property">isSidebarOpen</span>);
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">aside</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{isSidebarOpen</span> ? '<span class="hljs-attr">open</span>' <span class="hljs-attr">:</span> '<span class="hljs-attr">closed</span>'}&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">aside</span>&gt;</span></span>;
}
</code></pre>
<p><strong>ç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li>100% åŒæ­¥</li>
<li>ä¸æ¶‰åŠ API è°ƒç”¨</li>
<li>ä¸éœ€è¦åŠ è½½çŠ¶æ€</li>
<li>å®Œå…¨ç”±å®¢æˆ·ç«¯æ§åˆ¶</li>
</ul>
<hr/>
<h5 data-id="heading-20">2. å¤šæ­¥æ“ä½œçš„ä¸´æ—¶ Session æ•°æ®</h5>
<p>å…¸å‹åœºæ™¯ï¼šå¤šæ­¥è¡¨å•ï¼ˆWizardï¼‰ï¼Œç¬¬ä¸€æ­¥çš„æ•°æ®è¿˜æ²¡æäº¤åˆ°æœåŠ¡å™¨ï¼Œä½†åç»­æ­¥éª¤éœ€è¦ç”¨åˆ°ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// src/store/useResumeWizardStore.ts</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">ResumeWizardState</span> {
  <span class="hljs-comment">// ä¸´æ—¶æ•°æ®ï¼ˆè¿˜æ²¡æäº¤åˆ°æœåŠ¡å™¨ï¼‰</span>
  <span class="hljs-attr">draftBasicInfo</span>: { <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>; <span class="hljs-attr">email</span>: <span class="hljs-built_in">string</span> } | <span class="hljs-literal">null</span>;
  <span class="hljs-attr">draftExperience</span>: <span class="hljs-title class_">Experience</span>[] | <span class="hljs-literal">null</span>;
  <span class="hljs-attr">currentStep</span>: <span class="hljs-built_in">number</span>;

  <span class="hljs-comment">// Actions</span>
  <span class="hljs-attr">saveDraftBasicInfo</span>: <span class="hljs-function">(<span class="hljs-params">data: BasicInfo</span>) =&gt;</span> <span class="hljs-built_in">void</span>;
  <span class="hljs-attr">saveDraftExperience</span>: <span class="hljs-function">(<span class="hljs-params">data: Experience[]</span>) =&gt;</span> <span class="hljs-built_in">void</span>;
  <span class="hljs-attr">nextStep</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span>;
  <span class="hljs-attr">reset</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span>;
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> useResumeWizardStore = create&lt;<span class="hljs-title class_">ResumeWizardState</span>&gt;(<span class="hljs-function">(<span class="hljs-params">set</span>) =&gt;</span> ({
  <span class="hljs-attr">draftBasicInfo</span>: <span class="hljs-literal">null</span>,
  <span class="hljs-attr">draftExperience</span>: <span class="hljs-literal">null</span>,
  <span class="hljs-attr">currentStep</span>: <span class="hljs-number">1</span>,

  <span class="hljs-attr">saveDraftBasicInfo</span>: <span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> <span class="hljs-title function_">set</span>({ <span class="hljs-attr">draftBasicInfo</span>: data }),
  <span class="hljs-attr">saveDraftExperience</span>: <span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> <span class="hljs-title function_">set</span>({ <span class="hljs-attr">draftExperience</span>: data }),
  <span class="hljs-attr">nextStep</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">set</span>(<span class="hljs-function">(<span class="hljs-params">s</span>) =&gt;</span> ({ <span class="hljs-attr">currentStep</span>: s.<span class="hljs-property">currentStep</span> + <span class="hljs-number">1</span> })),
  <span class="hljs-attr">reset</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">set</span>({ <span class="hljs-attr">draftBasicInfo</span>: <span class="hljs-literal">null</span>, <span class="hljs-attr">draftExperience</span>: <span class="hljs-literal">null</span>, <span class="hljs-attr">currentStep</span>: <span class="hljs-number">1</span> }),
}));
</code></pre>
<p><strong>ä½¿ç”¨ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ç¬¬ä¸€æ­¥ï¼šå¡«å†™åŸºæœ¬ä¿¡æ¯</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">Step1BasicInfo</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> { saveDraftBasicInfo, nextStep } = <span class="hljs-title function_">useResumeWizardStore</span>();

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleNext</span> = (<span class="hljs-params">formData: BasicInfo</span>) =&gt; {
    <span class="hljs-title function_">saveDraftBasicInfo</span>(formData); <span class="hljs-comment">// æš‚å­˜åˆ° Zustand</span>
    <span class="hljs-title function_">nextStep</span>();
  };

  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">BasicInfoForm</span> <span class="hljs-attr">onSubmit</span>=<span class="hljs-string">{handleNext}</span> /&gt;</span></span>;
}

<span class="hljs-comment">// ç¬¬äºŒæ­¥ï¼šå¡«å†™å·¥ä½œç»éªŒï¼ˆéœ€è¦ç”¨åˆ°ç¬¬ä¸€æ­¥çš„æ•°æ®ï¼‰</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">Step2Experience</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> { draftBasicInfo, saveDraftExperience, nextStep } = <span class="hljs-title function_">useResumeWizardStore</span>();

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleNext</span> = (<span class="hljs-params">formData: Experience[]</span>) =&gt; {
    <span class="hljs-title function_">saveDraftExperience</span>(formData);
    <span class="hljs-title function_">nextStep</span>();
  };

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>ä¸º {draftBasicInfo?.name} æ·»åŠ å·¥ä½œç»éªŒ<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">ExperienceForm</span> <span class="hljs-attr">onSubmit</span>=<span class="hljs-string">{handleNext}</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}

<span class="hljs-comment">// æœ€åä¸€æ­¥ï¼šæäº¤åˆ°æœåŠ¡å™¨</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">Step3Submit</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> { draftBasicInfo, draftExperience, reset } = <span class="hljs-title function_">useResumeWizardStore</span>();

  <span class="hljs-keyword">const</span> createResumeMutation = <span class="hljs-title function_">useMutation</span>({
    <span class="hljs-attr">mutationFn</span>: <span class="hljs-function">(<span class="hljs-params">data: CreateResumeDTO</span>) =&gt;</span> api.<span class="hljs-title function_">createResume</span>(data),
    <span class="hljs-attr">onSuccess</span>: <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-title function_">reset</span>(); <span class="hljs-comment">// æ¸…ç©ºä¸´æ—¶æ•°æ®</span>
      queryClient.<span class="hljs-title function_">invalidateQueries</span>({ <span class="hljs-attr">queryKey</span>: <span class="hljs-variable constant_">RESUME_KEYS</span>.<span class="hljs-property">all</span> }); <span class="hljs-comment">// åˆ·æ–°ç®€å†åˆ—è¡¨</span>
      <span class="hljs-title function_">navigate</span>(<span class="hljs-string">'/resumes'</span>);
    },
  });

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleSubmit</span> = (<span class="hljs-params"/>) =&gt; {
    createResumeMutation.<span class="hljs-title function_">mutate</span>({
      <span class="hljs-attr">basicInfo</span>: draftBasicInfo,
      <span class="hljs-attr">experience</span>: draftExperience,
    });
  };

  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">SubmitButton</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{handleSubmit}</span> <span class="hljs-attr">loading</span>=<span class="hljs-string">{createResumeMutation.isPending}</span> /&gt;</span></span>;
}
</code></pre>
<p><strong>æ ¸å¿ƒåŸåˆ™</strong>ï¼š</p>
<ul>
<li>Zustand å­˜å‚¨<strong>ä¸´æ—¶æ•°æ®</strong>ï¼ˆè¿˜æœªæäº¤çš„è¡¨å•ï¼‰</li>
<li>Mutation æˆåŠŸåç«‹å³æ¸…ç©ºä¸´æ—¶æ•°æ®</li>
<li>Mutation æˆåŠŸå invalidate Queryï¼Œè®©åˆ—è¡¨è‡ªåŠ¨åˆ·æ–°</li>
</ul>
<hr/>
<h4 data-id="heading-21">ä½•æ—¶ä¸åº”è¯¥ç”¨ Zustandï¼Ÿ</h4>
<h5 data-id="heading-22">ä¸è¦å­˜å‚¨ API æ•°æ®</h5>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">//  é”™è¯¯ï¼šæŠŠç”¨æˆ·ä¿¡æ¯å­˜åœ¨ Zustand</span>
<span class="hljs-keyword">const</span> useUserStore = <span class="hljs-title function_">create</span>(<span class="hljs-function">() =&gt;</span> ({
  <span class="hljs-attr">currentUser</span>: <span class="hljs-literal">null</span>,
  <span class="hljs-attr">setCurrentUser</span>: <span class="hljs-function">(<span class="hljs-params">user</span>) =&gt;</span> <span class="hljs-title function_">set</span>({ <span class="hljs-attr">currentUser</span>: user }),
}));

<span class="hljs-comment">// æ­£ç¡®ï¼šç”¨ React Query</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">useCurrentUser</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">useQuery</span>({ <span class="hljs-attr">queryKey</span>: [<span class="hljs-string">'currentUser'</span>], <span class="hljs-attr">queryFn</span>: fetchUser });
}
</code></pre>
<h5 data-id="heading-23">ä¸è¦å­˜å‚¨å¯ä»¥è®¡ç®—å‡ºæ¥çš„æ•°æ®</h5>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">//  é”™è¯¯ï¼šå­˜å‚¨æ´¾ç”ŸçŠ¶æ€</span>
<span class="hljs-keyword">const</span> useCartStore = <span class="hljs-title function_">create</span>(<span class="hljs-function">() =&gt;</span> ({
  <span class="hljs-attr">items</span>: [],
  <span class="hljs-attr">totalPrice</span>: <span class="hljs-number">0</span>, <span class="hljs-comment">// å¯ä»¥ä» items è®¡ç®—å‡ºæ¥ï¼</span>
  <span class="hljs-attr">setItems</span>: <span class="hljs-function">(<span class="hljs-params">items</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> totalPrice = items.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">sum, item</span>) =&gt;</span> sum + item.<span class="hljs-property">price</span>, <span class="hljs-number">0</span>);
    <span class="hljs-title function_">set</span>({ items, totalPrice });
  },
}));

<span class="hljs-comment">// æ­£ç¡®ï¼šå­˜åŸå§‹æ•°æ®ï¼Œæ´¾ç”Ÿæ•°æ®ç”¨ selector è®¡ç®—</span>
<span class="hljs-keyword">const</span> useCartStore = <span class="hljs-title function_">create</span>(<span class="hljs-function">() =&gt;</span> ({
  <span class="hljs-attr">items</span>: [],
  <span class="hljs-attr">setItems</span>: <span class="hljs-function">(<span class="hljs-params">items</span>) =&gt;</span> <span class="hljs-title function_">set</span>({ items }),
}));

<span class="hljs-keyword">function</span> <span class="hljs-title function_">useCartTotal</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">useCartStore</span>(<span class="hljs-function">(<span class="hljs-params">s</span>) =&gt;</span> s.<span class="hljs-property">items</span>.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">sum, item</span>) =&gt;</span> sum + item.<span class="hljs-property">price</span>, <span class="hljs-number">0</span>));
}
</code></pre>
<h5 data-id="heading-24">ä¸è¦æ»¥ç”¨æŒä¹…åŒ–</h5>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">//  é”™è¯¯ï¼šæŒä¹…åŒ–æ‰€æœ‰ä¸œè¥¿</span>
<span class="hljs-keyword">const</span> useStore = <span class="hljs-title function_">create</span>(
  <span class="hljs-title function_">persist</span>(
    <span class="hljs-function">(<span class="hljs-params">set</span>) =&gt;</span> ({
      <span class="hljs-attr">currentUser</span>: <span class="hljs-literal">null</span>, <span class="hljs-comment">// API æ•°æ®ä¸è¦æŒä¹…åŒ–ï¼</span>
      <span class="hljs-attr">resumes</span>: [], <span class="hljs-comment">// API æ•°æ®ä¸è¦æŒä¹…åŒ–ï¼</span>
      <span class="hljs-attr">theme</span>: <span class="hljs-string">'light'</span>, <span class="hljs-comment">// è¿™ä¸ªå¯ä»¥æŒä¹…åŒ–</span>
      <span class="hljs-attr">isSidebarOpen</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// â“ è¿™ä¸ªéœ€è¦æŒä¹…åŒ–å—ï¼Ÿ</span>
    }),
    { <span class="hljs-attr">name</span>: <span class="hljs-string">'app-storage'</span> }
  )
);

<span class="hljs-comment">// æ­£ç¡®ï¼šåªæŒä¹…åŒ–ç”¨æˆ·åå¥½</span>
<span class="hljs-keyword">const</span> useUIStore = <span class="hljs-title function_">create</span>(
  <span class="hljs-title function_">persist</span>(
    <span class="hljs-function">(<span class="hljs-params">set</span>) =&gt;</span> ({
      <span class="hljs-attr">theme</span>: <span class="hljs-string">'light'</span>,
      <span class="hljs-attr">viewMode</span>: <span class="hljs-string">'grid'</span>,
      <span class="hljs-attr">setTheme</span>: <span class="hljs-function">(<span class="hljs-params">theme</span>) =&gt;</span> <span class="hljs-title function_">set</span>({ theme }),
      <span class="hljs-attr">setViewMode</span>: <span class="hljs-function">(<span class="hljs-params">mode</span>) =&gt;</span> <span class="hljs-title function_">set</span>({ <span class="hljs-attr">viewMode</span>: mode }),
    }),
    {
      <span class="hljs-attr">name</span>: <span class="hljs-string">'ui-preferences'</span>,
      <span class="hljs-comment">// åªæŒä¹…åŒ–è¿™ä¸¤ä¸ªå­—æ®µ</span>
      <span class="hljs-attr">partialize</span>: <span class="hljs-function">(<span class="hljs-params">state</span>) =&gt;</span> ({ <span class="hljs-attr">theme</span>: state.<span class="hljs-property">theme</span>, <span class="hljs-attr">viewMode</span>: state.<span class="hljs-property">viewMode</span> }),
    }
  )
);
</code></pre>
<hr/>
<h4 data-id="heading-25">Zustand çš„ç†æƒ³çŠ¶æ€</h4>
<p>åœ¨æ­£ç¡®ä½¿ç”¨ React Query åï¼Œä½ çš„ Zustand Store åº”è¯¥<strong>éå¸¸å°</strong>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// æ•´ä¸ªåº”ç”¨å¯èƒ½åªéœ€è¦ä¸€ä¸ª UI Store</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> useUIStore = <span class="hljs-title function_">create</span>(
  <span class="hljs-title function_">persist</span>(
    <span class="hljs-function">(<span class="hljs-params">set</span>) =&gt;</span> ({
      <span class="hljs-comment">// ä¸»é¢˜</span>
      <span class="hljs-attr">theme</span>: <span class="hljs-string">'light'</span> <span class="hljs-keyword">as</span> <span class="hljs-string">'light'</span> | <span class="hljs-string">'dark'</span>,
      <span class="hljs-attr">setTheme</span>: <span class="hljs-function">(<span class="hljs-params">theme: <span class="hljs-string">'light'</span> | <span class="hljs-string">'dark'</span></span>) =&gt;</span> <span class="hljs-title function_">set</span>({ theme }),

      <span class="hljs-comment">// ä¾§è¾¹æ </span>
      <span class="hljs-attr">isSidebarCollapsed</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">toggleSidebar</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">set</span>(<span class="hljs-function">(<span class="hljs-params">s</span>) =&gt;</span> ({ <span class="hljs-attr">isSidebarCollapsed</span>: !s.<span class="hljs-property">isSidebarCollapsed</span> })),

      <span class="hljs-comment">// è§†å›¾åå¥½</span>
      <span class="hljs-attr">resumeViewMode</span>: <span class="hljs-string">'grid'</span> <span class="hljs-keyword">as</span> <span class="hljs-string">'grid'</span> | <span class="hljs-string">'list'</span>,
      <span class="hljs-attr">setResumeViewMode</span>: <span class="hljs-function">(<span class="hljs-params">mode: <span class="hljs-string">'grid'</span> | <span class="hljs-string">'list'</span></span>) =&gt;</span> <span class="hljs-title function_">set</span>({ <span class="hljs-attr">resumeViewMode</span>: mode }),
    }),
    {
      <span class="hljs-attr">name</span>: <span class="hljs-string">'ui-preferences'</span>,
      <span class="hljs-attr">partialize</span>: <span class="hljs-function">(<span class="hljs-params">state</span>) =&gt;</span> ({
        <span class="hljs-attr">theme</span>: state.<span class="hljs-property">theme</span>,
        <span class="hljs-attr">resumeViewMode</span>: state.<span class="hljs-property">resumeViewMode</span>,
      }),
    }
  )
);
</code></pre>
<p><strong>å¦‚æœä½ çš„ Zustand Store è¶…è¿‡ 100 è¡Œä»£ç ï¼Œå¾ˆå¯èƒ½æœ‰æ¶æ„é—®é¢˜ã€‚</strong></p>
<h3 data-id="heading-26">ç¬¬äº”éƒ¨åˆ†ï¼šMutation - è¿æ¥ä¸¤ä¸ªä¸–ç•Œçš„æ¡¥æ¢</h3>
<p><code>useMutation</code> è™½ç„¶ä¸ç¼“å­˜æ•°æ®ï¼Œä½†å®ƒæ˜¯è¿æ¥ Server State å’Œ Client State çš„å…³é”®æ¡¥æ¢ã€‚</p>
<h4 data-id="heading-27">æ ‡å‡†æ¨¡å¼ï¼šMutation + Invalidation</h4>
<p>è¿™æ˜¯æœ€å¸¸è§ã€æœ€å®‰å…¨çš„æ¨¡å¼ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// æ›´æ–°ç”¨æˆ·ä¿¡æ¯</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">useUpdateUser</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> queryClient = <span class="hljs-title function_">useQueryClient</span>();

  <span class="hljs-keyword">return</span> <span class="hljs-title function_">useMutation</span>({
    <span class="hljs-attr">mutationFn</span>: <span class="hljs-function">(<span class="hljs-params">data: UpdateUserDTO</span>) =&gt;</span> api.<span class="hljs-title function_">updateUser</span>(data),

    <span class="hljs-attr">onSuccess</span>: <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-comment">// å‘Šè¯‰ React Queryï¼š"ç”¨æˆ·æ•°æ®è¿‡æœŸäº†ï¼Œé‡æ–°æ‹‰å–"</span>
      queryClient.<span class="hljs-title function_">invalidateQueries</span>({ <span class="hljs-attr">queryKey</span>: <span class="hljs-variable constant_">USER_KEYS</span>.<span class="hljs-property">currentUser</span> });
      queryClient.<span class="hljs-title function_">invalidateQueries</span>({ <span class="hljs-attr">queryKey</span>: <span class="hljs-variable constant_">USER_KEYS</span>.<span class="hljs-property">all</span> });
    },

    <span class="hljs-attr">onError</span>: <span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> {
      toast.<span class="hljs-title function_">error</span>(<span class="hljs-string">`æ›´æ–°å¤±è´¥: <span class="hljs-subst">${error.message}</span>`</span>);
    },
  });
}

<span class="hljs-comment">// ç»„ä»¶ä½¿ç”¨</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">UserProfileForm</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> { <span class="hljs-attr">data</span>: user } = <span class="hljs-title function_">useCurrentUser</span>();
  <span class="hljs-keyword">const</span> updateUserMutation = <span class="hljs-title function_">useUpdateUser</span>();

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleSubmit</span> = (<span class="hljs-params">formData: UpdateUserDTO</span>) =&gt; {
    updateUserMutation.<span class="hljs-title function_">mutate</span>(formData);
  };

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">onSubmit</span>=<span class="hljs-string">{handleSubmit}</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">defaultValue</span>=<span class="hljs-string">{user?.name}</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"name"</span> /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"submit"</span> <span class="hljs-attr">disabled</span>=<span class="hljs-string">{updateUserMutation.isPending}</span>&gt;</span>
        {updateUserMutation.isPending ? 'ä¿å­˜ä¸­...' : 'ä¿å­˜'}
      <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span></span>
  );
}
</code></pre>
<p><strong>æ ¸å¿ƒåŸåˆ™ï¼šServer is the source of truth</strong></p>
<ul>
<li>Mutation æˆåŠŸåï¼Œè®©æœåŠ¡å™¨å‘Šè¯‰æˆ‘ä»¬æœ€æ–°æ•°æ®æ˜¯ä»€ä¹ˆï¼ˆé€šè¿‡é‡æ–°æŸ¥è¯¢ï¼‰</li>
<li>ä¸è¦è‡ªå·±çŒœæµ‹æœåŠ¡å™¨è¿”å›ä»€ä¹ˆæ•°æ®ï¼ˆæ‰‹åŠ¨æ›´æ–° Storeï¼‰</li>
</ul>
<hr/>
<h4 data-id="heading-28">é«˜çº§æ¨¡å¼ï¼šä¹è§‚æ›´æ–° (Optimistic Update)</h4>
<p>å¯¹äºç”¨æˆ·ä½“éªŒè¦æ±‚é«˜çš„åœºæ™¯ï¼ˆå¦‚ç‚¹èµã€æ”¶è—ï¼‰ï¼Œå¯ä»¥å…ˆæ›´æ–° UIï¼Œå¤±è´¥åå†å›æ»šï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">useLikePost</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> queryClient = <span class="hljs-title function_">useQueryClient</span>();

  <span class="hljs-keyword">return</span> <span class="hljs-title function_">useMutation</span>({
    <span class="hljs-attr">mutationFn</span>: <span class="hljs-function">(<span class="hljs-params">postId: <span class="hljs-built_in">string</span></span>) =&gt;</span> api.<span class="hljs-title function_">likePost</span>(postId),

    <span class="hljs-comment">// åœ¨è¯·æ±‚å‘é€å‰ç«‹å³æ›´æ–° UI</span>
    <span class="hljs-attr">onMutate</span>: <span class="hljs-keyword">async</span> (postId) =&gt; {
      <span class="hljs-comment">// 1. å–æ¶ˆæ­£åœ¨è¿›è¡Œçš„æŸ¥è¯¢ï¼ˆé¿å…è¦†ç›–ä¹è§‚æ›´æ–°ï¼‰</span>
      <span class="hljs-keyword">await</span> queryClient.<span class="hljs-title function_">cancelQueries</span>({ <span class="hljs-attr">queryKey</span>: [<span class="hljs-string">'posts'</span>, postId] });

      <span class="hljs-comment">// 2. ä¿å­˜å½“å‰æ•°æ®ï¼ˆç”¨äºå›æ»šï¼‰</span>
      <span class="hljs-keyword">const</span> previousPost = queryClient.<span class="hljs-title function_">getQueryData</span>([<span class="hljs-string">'posts'</span>, postId]);

      <span class="hljs-comment">// 3. ä¹è§‚æ›´æ–°</span>
      queryClient.<span class="hljs-title function_">setQueryData</span>([<span class="hljs-string">'posts'</span>, postId], <span class="hljs-function">(<span class="hljs-params">old: Post</span>) =&gt;</span> ({
        ...old,
        <span class="hljs-attr">isLiked</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">likeCount</span>: old.<span class="hljs-property">likeCount</span> + <span class="hljs-number">1</span>,
      }));

      <span class="hljs-comment">// è¿”å›å›æ»šä¸Šä¸‹æ–‡</span>
      <span class="hljs-keyword">return</span> { previousPost };
    },

    <span class="hljs-comment">// å¦‚æœå¤±è´¥ï¼Œå›æ»š</span>
    <span class="hljs-attr">onError</span>: <span class="hljs-function">(<span class="hljs-params">error, postId, context</span>) =&gt;</span> {
      queryClient.<span class="hljs-title function_">setQueryData</span>([<span class="hljs-string">'posts'</span>, postId], context.<span class="hljs-property">previousPost</span>);
      toast.<span class="hljs-title function_">error</span>(<span class="hljs-string">'ç‚¹èµå¤±è´¥'</span>);
    },

    <span class="hljs-comment">// æˆåŠŸåï¼Œé‡æ–°è·å–ç¡®ä¿æ•°æ®ä¸€è‡´</span>
    <span class="hljs-attr">onSettled</span>: <span class="hljs-function">(<span class="hljs-params">data, error, postId</span>) =&gt;</span> {
      queryClient.<span class="hljs-title function_">invalidateQueries</span>({ <span class="hljs-attr">queryKey</span>: [<span class="hljs-string">'posts'</span>, postId] });
    },
  });
}
</code></pre>
<p><strong>ä½¿ç”¨åœºæ™¯</strong>ï¼š</p>
<ul>
<li>ç”¨æˆ·äº¤äº’é¢‘ç¹ï¼ˆç‚¹èµã€æ”¶è—ã€åˆ‡æ¢çŠ¶æ€ï¼‰</li>
<li>æ“ä½œæˆåŠŸç‡é«˜ï¼ˆç½‘ç»œæ­£å¸¸æ—¶å‡ ä¹ä¸ä¼šå¤±è´¥ï¼‰</li>
<li>å¤æ‚ä¸šåŠ¡é€»è¾‘ï¼ˆæœåŠ¡å™¨å¯èƒ½è¿”å›å®Œå…¨ä¸åŒçš„æ•°æ®ï¼‰</li>
<li>é‡‘é’±äº¤æ˜“ï¼ˆå¿…é¡»ç­‰æœåŠ¡å™¨ç¡®è®¤ï¼‰</li>
</ul>
<hr/>
<h4 data-id="heading-29">Mutation ä¸ Zustand çš„åä½œ</h4>
<p>Mutation æ˜¯æ›´æ–° Zustand ä¸´æ—¶æ•°æ®çš„æœ€ä½³æ—¶æœºï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ç™»å½•åœºæ™¯ï¼šå…ˆç™»å½•ï¼Œå†å­˜ token åˆ° Store</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">useLogin</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> setAuthToken = <span class="hljs-title function_">useAuthStore</span>(<span class="hljs-function">(<span class="hljs-params">s</span>) =&gt;</span> s.<span class="hljs-property">setToken</span>);
  <span class="hljs-keyword">const</span> queryClient = <span class="hljs-title function_">useQueryClient</span>();

  <span class="hljs-keyword">return</span> <span class="hljs-title function_">useMutation</span>({
    <span class="hljs-attr">mutationFn</span>: <span class="hljs-function">(<span class="hljs-params">credentials: LoginDTO</span>) =&gt;</span> api.<span class="hljs-title function_">login</span>(credentials),

    <span class="hljs-attr">onSuccess</span>: <span class="hljs-function">(<span class="hljs-params">response</span>) =&gt;</span> {
      <span class="hljs-comment">// 1. å­˜ token åˆ° Zustandï¼ˆä¸´æ—¶ Session æ•°æ®ï¼‰</span>
      <span class="hljs-title function_">setAuthToken</span>(response.<span class="hljs-property">accessToken</span>);

      <span class="hljs-comment">// 2. è§¦å‘ç”¨æˆ·ä¿¡æ¯æŸ¥è¯¢</span>
      queryClient.<span class="hljs-title function_">invalidateQueries</span>({ <span class="hljs-attr">queryKey</span>: <span class="hljs-variable constant_">USER_KEYS</span>.<span class="hljs-property">currentUser</span> });
    },
  });
}

<span class="hljs-comment">// ç»„ä»¶ä½¿ç”¨</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">LoginForm</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> loginMutation = <span class="hljs-title function_">useLogin</span>();
  <span class="hljs-keyword">const</span> navigate = <span class="hljs-title function_">useNavigate</span>();

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleSubmit</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">formData: LoginDTO</span>) =&gt; {
    <span class="hljs-keyword">await</span> loginMutation.<span class="hljs-title function_">mutateAsync</span>(formData);
    <span class="hljs-comment">// mutateAsync ä¿è¯ onSuccess æ‰§è¡Œå®Œæ¯•åæ‰ç»§ç»­</span>
    <span class="hljs-title function_">navigate</span>(<span class="hljs-string">'/dashboard'</span>); <span class="hljs-comment">// æ­¤æ—¶ token å·²ç»å­˜å¥½ï¼Œå¯ä»¥å®‰å…¨è·³è½¬</span>
  };

  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">onSubmit</span>=<span class="hljs-string">{handleSubmit}</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span></span>;
}
</code></pre>
<p><strong><code>mutateAsync</code> vs <code>mutate</code> çš„åŒºåˆ«</strong>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// mutate: è§¦å‘å³å¿˜ï¼ˆfire-and-forgetï¼‰</span>
loginMutation.<span class="hljs-title function_">mutate</span>(formData);
<span class="hljs-title function_">navigate</span>(<span class="hljs-string">'/dashboard'</span>); <span class="hljs-comment">//  å¯èƒ½ token è¿˜æ²¡å­˜å¥½å°±è·³è½¬äº†</span>

<span class="hljs-comment">// mutateAsync: ç­‰å¾…å®Œæˆï¼ˆåŒ…æ‹¬ onSuccessï¼‰</span>
<span class="hljs-keyword">await</span> loginMutation.<span class="hljs-title function_">mutateAsync</span>(formData);
<span class="hljs-title function_">navigate</span>(<span class="hljs-string">'/dashboard'</span>); <span class="hljs-comment">// onSuccess å·²æ‰§è¡Œï¼Œtoken å·²å­˜å¥½</span>
</code></pre>
<p><strong>ä½¿ç”¨å»ºè®®</strong>ï¼š</p>
<ul>
<li>å¤§éƒ¨åˆ†åœºæ™¯ç”¨ <code>mutate</code>ï¼ˆReact Query ä¼šå¤„ç†å¥½æ—¶åºï¼‰</li>
<li>éœ€è¦çº¿æ€§æ‰§è¡Œæµç¨‹æ—¶ç”¨ <code>mutateAsync</code>ï¼ˆç™»å½•åè·³è½¬ã€æäº¤åå…³é—­å¼¹çª—ï¼‰</li>
</ul>
<hr/>
<h4 data-id="heading-30">æ‰¹é‡ Invalidation ç­–ç•¥</h4>
<p>å½“ä¸€ä¸ª Mutation å½±å“å¤šä¸ªæŸ¥è¯¢æ—¶ï¼Œä½¿ç”¨æ•°ç»„å½¢å¼çš„ QueryKey æ‰¹é‡å¤±æ•ˆï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// QueryKey è®¾è®¡ï¼šå±‚çº§ç»“æ„</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">RESUME_KEYS</span> = {
  <span class="hljs-attr">all</span>: [<span class="hljs-string">'resumes'</span>] <span class="hljs-keyword">as</span> <span class="hljs-keyword">const</span>, <span class="hljs-comment">// æ‰€æœ‰ç®€å†ç›¸å…³</span>
  <span class="hljs-attr">lists</span>: <span class="hljs-function">() =&gt;</span> [...<span class="hljs-variable constant_">RESUME_KEYS</span>.<span class="hljs-property">all</span>, <span class="hljs-string">'list'</span>] <span class="hljs-keyword">as</span> <span class="hljs-keyword">const</span>, <span class="hljs-comment">// ç®€å†åˆ—è¡¨</span>
  <span class="hljs-attr">details</span>: <span class="hljs-function">() =&gt;</span> [...<span class="hljs-variable constant_">RESUME_KEYS</span>.<span class="hljs-property">all</span>, <span class="hljs-string">'detail'</span>] <span class="hljs-keyword">as</span> <span class="hljs-keyword">const</span>, <span class="hljs-comment">// ç®€å†è¯¦æƒ…</span>
  <span class="hljs-attr">detail</span>: <span class="hljs-function">(<span class="hljs-params">id: <span class="hljs-built_in">string</span></span>) =&gt;</span> [...<span class="hljs-variable constant_">RESUME_KEYS</span>.<span class="hljs-title function_">details</span>(), id] <span class="hljs-keyword">as</span> <span class="hljs-keyword">const</span>,
};

<span class="hljs-comment">// åˆ é™¤ç®€å†</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">useDeleteResume</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> queryClient = <span class="hljs-title function_">useQueryClient</span>();

  <span class="hljs-keyword">return</span> <span class="hljs-title function_">useMutation</span>({
    <span class="hljs-attr">mutationFn</span>: <span class="hljs-function">(<span class="hljs-params">id: <span class="hljs-built_in">string</span></span>) =&gt;</span> api.<span class="hljs-title function_">deleteResume</span>(id),

    <span class="hljs-attr">onSuccess</span>: <span class="hljs-function">(<span class="hljs-params">_, deletedId</span>) =&gt;</span> {
      <span class="hljs-comment">// 1. å¤±æ•ˆåˆ—è¡¨æŸ¥è¯¢</span>
      queryClient.<span class="hljs-title function_">invalidateQueries</span>({ <span class="hljs-attr">queryKey</span>: <span class="hljs-variable constant_">RESUME_KEYS</span>.<span class="hljs-title function_">lists</span>() });

      <span class="hljs-comment">// 2. ç›´æ¥ç§»é™¤è¯¦æƒ…ç¼“å­˜ï¼ˆä¸éœ€è¦é‡æ–°è·å–ä¸å­˜åœ¨çš„æ•°æ®ï¼‰</span>
      queryClient.<span class="hljs-title function_">removeQueries</span>({ <span class="hljs-attr">queryKey</span>: <span class="hljs-variable constant_">RESUME_KEYS</span>.<span class="hljs-title function_">detail</span>(deletedId) });
    },
  });
}
</code></pre>
<p><strong>å±‚çº§ QueryKey çš„å¥½å¤„</strong>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// å¤±æ•ˆæ‰€æœ‰ç®€å†ç›¸å…³æŸ¥è¯¢</span>
queryClient.<span class="hljs-title function_">invalidateQueries</span>({ <span class="hljs-attr">queryKey</span>: [<span class="hljs-string">'resumes'</span>] });

<span class="hljs-comment">// åªå¤±æ•ˆç®€å†åˆ—è¡¨</span>
queryClient.<span class="hljs-title function_">invalidateQueries</span>({ <span class="hljs-attr">queryKey</span>: [<span class="hljs-string">'resumes'</span>, <span class="hljs-string">'list'</span>] });

<span class="hljs-comment">// åªå¤±æ•ˆæŸä¸ªç®€å†è¯¦æƒ…</span>
queryClient.<span class="hljs-title function_">invalidateQueries</span>({ <span class="hljs-attr">queryKey</span>: [<span class="hljs-string">'resumes'</span>, <span class="hljs-string">'detail'</span>, <span class="hljs-string">'resume-123'</span>] });
</code></pre>
<hr/>
<h4 data-id="heading-31">é”™è¯¯å¤„ç†æœ€ä½³å®è·µ</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">useCreateResume</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> queryClient = <span class="hljs-title function_">useQueryClient</span>();

  <span class="hljs-keyword">return</span> <span class="hljs-title function_">useMutation</span>({
    <span class="hljs-attr">mutationFn</span>: <span class="hljs-function">(<span class="hljs-params">data: CreateResumeDTO</span>) =&gt;</span> api.<span class="hljs-title function_">createResume</span>(data),

    <span class="hljs-attr">onSuccess</span>: <span class="hljs-function">(<span class="hljs-params">newResume</span>) =&gt;</span> {
      <span class="hljs-comment">// æˆåŠŸï¼šåˆ·æ–°åˆ—è¡¨</span>
      queryClient.<span class="hljs-title function_">invalidateQueries</span>({ <span class="hljs-attr">queryKey</span>: <span class="hljs-variable constant_">RESUME_KEYS</span>.<span class="hljs-title function_">lists</span>() });

      <span class="hljs-comment">// å¯é€‰ï¼šç›´æ¥æ’å…¥æ–°æ•°æ®åˆ°ç¼“å­˜ï¼ˆé¿å…é‡æ–°è¯·æ±‚ï¼‰</span>
      queryClient.<span class="hljs-title function_">setQueryData</span>(<span class="hljs-variable constant_">RESUME_KEYS</span>.<span class="hljs-title function_">detail</span>(newResume.<span class="hljs-property">id</span>), newResume);

      toast.<span class="hljs-title function_">success</span>(<span class="hljs-string">'ç®€å†åˆ›å»ºæˆåŠŸ'</span>);
    },

    <span class="hljs-attr">onError</span>: <span class="hljs-function">(<span class="hljs-params">error: ApiError</span>) =&gt;</span> {
      <span class="hljs-comment">// é”™è¯¯å¤„ç†ï¼šæ ¹æ®é”™è¯¯ç±»å‹ç»™å‡ºä¸åŒæç¤º</span>
      <span class="hljs-keyword">if</span> (error.<span class="hljs-property">code</span> === <span class="hljs-string">'QUOTA_EXCEEDED'</span>) {
        toast.<span class="hljs-title function_">error</span>(<span class="hljs-string">'æ‚¨çš„ç®€å†æ•°é‡å·²è¾¾ä¸Šé™ï¼Œè¯·å‡çº§ä¼šå‘˜'</span>);
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (error.<span class="hljs-property">code</span> === <span class="hljs-string">'VALIDATION_ERROR'</span>) {
        toast.<span class="hljs-title function_">error</span>(<span class="hljs-string">`æ•°æ®éªŒè¯å¤±è´¥: <span class="hljs-subst">${error.message}</span>`</span>);
      } <span class="hljs-keyword">else</span> {
        toast.<span class="hljs-title function_">error</span>(<span class="hljs-string">'åˆ›å»ºå¤±è´¥ï¼Œè¯·ç¨åé‡è¯•'</span>);
      }
    },
  });
}
</code></pre>
<p><strong>åŸåˆ™</strong>ï¼š</p>
<ul>
<li>åŒºåˆ†ä¸šåŠ¡é”™è¯¯å’Œç½‘ç»œé”™è¯¯</li>
<li>ç»™ç”¨æˆ·æ˜ç¡®çš„é”™è¯¯æç¤ºå’Œè¡ŒåŠ¨å»ºè®®</li>
<li>ä¸è¦é»˜é»˜åæ‰é”™è¯¯</li>
</ul>
<h3 data-id="heading-32">ç¬¬å…­éƒ¨åˆ†ï¼šå®æˆ˜å†³ç­–æ ‘ä¸æœ€ä½³å®è·µ</h3>
<p>å½“ä½ é¢å¯¹ä¸€ä¸ªçŠ¶æ€æ—¶ï¼ŒæŒ‰ç…§ä»¥ä¸‹å†³ç­–æ ‘å¿«é€Ÿåˆ¤æ–­åº”è¯¥ç”¨ä»€ä¹ˆå·¥å…·ï¼š</p>
<h4 data-id="heading-33">å†³ç­–æµç¨‹å›¾</h4>
<pre><code class="hljs language-bash" lang="bash">å¼€å§‹ï¼šæˆ‘éœ€è¦ç®¡ç†ä¸€ä¸ªçŠ¶æ€
    â†“
â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ è¿™ä¸ªæ•°æ®æ¥è‡ª API å—ï¼Ÿ            â”‚
â””â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â”œâ”€ æ˜¯ â†’ ä½¿ç”¨ React Query
    â”‚       â”œâ”€ å°è£… useQuery Hook
    â”‚       â”œâ”€ å®šä¹‰ QueryKey å¸¸é‡
    â”‚       â””â”€ é…ç½® staleTime/cacheTime
    â”‚
    â””â”€ å¦ â†’ æ•°æ®åªæ˜¯ UI çŠ¶æ€ï¼Ÿ
            â”‚
            â”œâ”€ æ˜¯ â†’ éœ€è¦è·¨ç»„ä»¶å…±äº«å—ï¼Ÿ
            â”‚       â”‚
            â”‚       â”œâ”€ æ˜¯ â†’ Zustand
            â”‚       â”‚       â””â”€ åªå­˜å‚¨çº¯ UI æ§åˆ¶çŠ¶æ€
            â”‚       â”‚
            â”‚       â””â”€ å¦ â†’ useState/useReducer
            â”‚               â””â”€ ç»„ä»¶æœ¬åœ°çŠ¶æ€å³å¯
            â”‚
            â””â”€ å¦ â†’ æ˜¯å¤šæ­¥æ“ä½œçš„ä¸´æ—¶æ•°æ®ï¼Ÿ
                    â”‚
                    â”œâ”€ æ˜¯ â†’ Zustandï¼ˆä¸´æ—¶ Sessionï¼‰
                    â”‚       â””â”€ Mutation æˆåŠŸåæ¸…ç©º
                    â”‚
                    â””â”€ å¦ â†’ é‡æ–°å®¡è§†éœ€æ±‚
                            â””â”€ å¯èƒ½ä¸éœ€è¦çŠ¶æ€ç®¡ç†
</code></pre>
<h4 data-id="heading-34">å®æˆ˜æ¡ˆä¾‹é€ŸæŸ¥è¡¨</h4>




























































<table><thead><tr><th>åœºæ™¯</th><th>ä½¿ç”¨å·¥å…·</th><th>ç¤ºä¾‹ä»£ç </th></tr></thead><tbody><tr><td>è·å–ç”¨æˆ·ä¿¡æ¯</td><td>React Query</td><td><code>useQuery({ queryKey: ['user'], queryFn: fetchUser })</code></td></tr><tr><td>è·å–ç®€å†åˆ—è¡¨</td><td>React Query</td><td><code>useQuery({ queryKey: ['resumes'], queryFn: fetchResumes })</code></td></tr><tr><td>ä¸»é¢˜åˆ‡æ¢ï¼ˆdark/lightï¼‰</td><td>Zustand + persist</td><td><code>create(persist(...))</code></td></tr><tr><td>ä¾§è¾¹æ å±•å¼€/æ”¶èµ·</td><td>Zustand</td><td><code>{ isSidebarOpen, toggleSidebar }</code></td></tr><tr><td>è¡¨å•è¾“å…¥å€¼</td><td>useState</td><td><code>const [value, setValue] = useState('')</code></td></tr><tr><td>å¤šæ­¥è¡¨å•å‘å¯¼</td><td>Zustand (ä¸´æ—¶)</td><td><code>{ draftData, saveDraft, reset }</code></td></tr><tr><td>å½“å‰è·¯ç”±å‚æ•°</td><td>React Router</td><td><code>useParams()</code> / <code>useSearchParams()</code></td></tr><tr><td>ç”¨æˆ·ç™»å½•çŠ¶æ€</td><td>React Query</td><td><code>useQuery({ queryKey: ['session'] })</code></td></tr><tr><td>Token å­˜å‚¨</td><td>Zustand (ä¸æŒä¹…åŒ–)</td><td><code>{ token, setToken }</code></td></tr><tr><td>å¼¹çª—æ˜¾ç¤º/éšè—</td><td>Zustand æˆ– useState</td><td>å–å†³äºæ˜¯å¦è·¨ç»„ä»¶</td></tr></tbody></table>
<hr/>
<h4 data-id="heading-35">å¸¸è§åœºæ™¯æ·±åº¦è§£æ</h4>
<h5 data-id="heading-36">åœºæ™¯ 1ï¼šç”¨æˆ·è®¤è¯çŠ¶æ€</h5>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// æ­£ç¡®ï¼šSession æ•°æ®ç”¨ Queryï¼ŒToken ç”¨ Zustand</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> useAuthStore = create&lt;<span class="hljs-title class_">AuthState</span>&gt;(<span class="hljs-function">(<span class="hljs-params">set</span>) =&gt;</span> ({
  <span class="hljs-attr">accessToken</span>: <span class="hljs-literal">null</span>,
  <span class="hljs-attr">setToken</span>: <span class="hljs-function">(<span class="hljs-params">token</span>) =&gt;</span> <span class="hljs-title function_">set</span>({ <span class="hljs-attr">accessToken</span>: token }),
  <span class="hljs-attr">clearToken</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">set</span>({ <span class="hljs-attr">accessToken</span>: <span class="hljs-literal">null</span> }),
}));

<span class="hljs-comment">// ç”¨æˆ·ä¿¡æ¯ç”¨ Query</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">useCurrentUser</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> token = <span class="hljs-title function_">useAuthStore</span>(<span class="hljs-function">(<span class="hljs-params">s</span>) =&gt;</span> s.<span class="hljs-property">accessToken</span>);

  <span class="hljs-keyword">return</span> <span class="hljs-title function_">useQuery</span>({
    <span class="hljs-attr">queryKey</span>: <span class="hljs-variable constant_">USER_KEYS</span>.<span class="hljs-property">currentUser</span>,
    <span class="hljs-attr">queryFn</span>: fetchCurrentUser,
    <span class="hljs-attr">enabled</span>: !!token, <span class="hljs-comment">// åªæœ‰ token å­˜åœ¨æ—¶æ‰æŸ¥è¯¢</span>
  });
}

<span class="hljs-comment">// ç™»å½•</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">useLogin</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> setToken = <span class="hljs-title function_">useAuthStore</span>(<span class="hljs-function">(<span class="hljs-params">s</span>) =&gt;</span> s.<span class="hljs-property">setToken</span>);
  <span class="hljs-keyword">const</span> queryClient = <span class="hljs-title function_">useQueryClient</span>();

  <span class="hljs-keyword">return</span> <span class="hljs-title function_">useMutation</span>({
    <span class="hljs-attr">mutationFn</span>: api.<span class="hljs-property">login</span>,
    <span class="hljs-attr">onSuccess</span>: <span class="hljs-function">(<span class="hljs-params">response</span>) =&gt;</span> {
      <span class="hljs-title function_">setToken</span>(response.<span class="hljs-property">accessToken</span>); <span class="hljs-comment">// Token å­˜ Zustand</span>
      queryClient.<span class="hljs-title function_">invalidateQueries</span>({ <span class="hljs-attr">queryKey</span>: <span class="hljs-variable constant_">USER_KEYS</span>.<span class="hljs-property">currentUser</span> }); <span class="hljs-comment">// è§¦å‘ç”¨æˆ·ä¿¡æ¯æŸ¥è¯¢</span>
    },
  });
}

<span class="hljs-comment">// ç™»å‡º</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">useLogout</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> clearToken = <span class="hljs-title function_">useAuthStore</span>(<span class="hljs-function">(<span class="hljs-params">s</span>) =&gt;</span> s.<span class="hljs-property">clearToken</span>);
  <span class="hljs-keyword">const</span> queryClient = <span class="hljs-title function_">useQueryClient</span>();

  <span class="hljs-keyword">return</span> <span class="hljs-title function_">useMutation</span>({
    <span class="hljs-attr">mutationFn</span>: api.<span class="hljs-property">logout</span>,
    <span class="hljs-attr">onSuccess</span>: <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-title function_">clearToken</span>(); <span class="hljs-comment">// æ¸…é™¤ token</span>
      queryClient.<span class="hljs-title function_">clear</span>(); <span class="hljs-comment">// æ¸…ç©ºæ‰€æœ‰ Query ç¼“å­˜</span>
    },
  });
}
</code></pre>
<p><strong>åŸåˆ™</strong>ï¼š</p>
<ul>
<li>Tokenï¼ˆå‡­è¯ï¼‰â†’ Zustandï¼ˆä¸´æ—¶ Sessionï¼‰</li>
<li>ç”¨æˆ·ä¿¡æ¯ï¼ˆæ•°æ®ï¼‰â†’ React Queryï¼ˆServer Stateï¼‰</li>
</ul>
<hr/>
<h5 data-id="heading-37">åœºæ™¯ 2ï¼šåˆ—è¡¨ç­›é€‰ä¸æ’åº</h5>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">//  é”™è¯¯ï¼šæŠŠç­›é€‰å‚æ•°å’Œåˆ—è¡¨æ•°æ®éƒ½å­˜åœ¨ Zustand</span>
<span class="hljs-keyword">const</span> useResumeStore = <span class="hljs-title function_">create</span>(<span class="hljs-function">() =&gt;</span> ({
  <span class="hljs-attr">resumes</span>: [],
  <span class="hljs-attr">filters</span>: { <span class="hljs-attr">search</span>: <span class="hljs-string">''</span>, <span class="hljs-attr">sortBy</span>: <span class="hljs-string">'date'</span> },
  <span class="hljs-attr">setFilters</span>: <span class="hljs-function">(<span class="hljs-params">filters</span>) =&gt;</span> <span class="hljs-title function_">set</span>({ filters }),
  <span class="hljs-attr">fetchResumes</span>: <span class="hljs-keyword">async</span> (filters) =&gt; {
    <span class="hljs-keyword">const</span> resumes = <span class="hljs-keyword">await</span> api.<span class="hljs-title function_">fetchResumes</span>(filters);
    <span class="hljs-title function_">set</span>({ resumes });
  },
}));

<span class="hljs-comment">// æ­£ç¡®ï¼šç­›é€‰å‚æ•°ç”¨ URLï¼Œåˆ—è¡¨ç”¨ Query</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">ResumeList</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [searchParams, setSearchParams] = <span class="hljs-title function_">useSearchParams</span>();
  <span class="hljs-keyword">const</span> search = searchParams.<span class="hljs-title function_">get</span>(<span class="hljs-string">'search'</span>) || <span class="hljs-string">''</span>;
  <span class="hljs-keyword">const</span> sortBy = searchParams.<span class="hljs-title function_">get</span>(<span class="hljs-string">'sortBy'</span>) || <span class="hljs-string">'date'</span>;

  <span class="hljs-comment">// æ ¹æ® URL å‚æ•°æŸ¥è¯¢</span>
  <span class="hljs-keyword">const</span> { <span class="hljs-attr">data</span>: resumes } = <span class="hljs-title function_">useQuery</span>({
    <span class="hljs-attr">queryKey</span>: [<span class="hljs-string">'resumes'</span>, { search, sortBy }], <span class="hljs-comment">// QueryKey åŒ…å«ç­›é€‰å‚æ•°</span>
    <span class="hljs-attr">queryFn</span>: <span class="hljs-function">() =&gt;</span> api.<span class="hljs-title function_">fetchResumes</span>({ search, sortBy }),
  });

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleSearchChange</span> = (<span class="hljs-params">newSearch: <span class="hljs-built_in">string</span></span>) =&gt; {
    <span class="hljs-title function_">setSearchParams</span>({ <span class="hljs-attr">search</span>: newSearch, sortBy });
  };

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">SearchInput</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{search}</span> <span class="hljs-attr">onChange</span>=<span class="hljs-string">{handleSearchChange}</span> /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">ResumeGrid</span> <span class="hljs-attr">resumes</span>=<span class="hljs-string">{resumes}</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<p><strong>å¥½å¤„</strong>ï¼š</p>
<ul>
<li>URL å¯åˆ†äº«ï¼ˆåˆ«äººæ‰“å¼€é“¾æ¥å°±èƒ½çœ‹åˆ°ç›¸åŒçš„ç­›é€‰ç»“æœï¼‰</li>
<li>æµè§ˆå™¨å‰è¿›/åé€€æŒ‰é’®è‡ªåŠ¨å·¥ä½œ</li>
<li>ä¸éœ€è¦é¢å¤–çš„çŠ¶æ€ç®¡ç†</li>
</ul>
<hr/>
<h5 data-id="heading-38">åœºæ™¯ 3ï¼šè´­ç‰©è½¦</h5>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// å¦‚æœè´­ç‰©è½¦å­˜åœ¨æœåŠ¡å™¨ï¼ˆå·²ç™»å½•ç”¨æˆ·ï¼‰</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">useCart</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">useQuery</span>({
    <span class="hljs-attr">queryKey</span>: [<span class="hljs-string">'cart'</span>],
    <span class="hljs-attr">queryFn</span>: api.<span class="hljs-property">fetchCart</span>,
  });
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">useAddToCart</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> queryClient = <span class="hljs-title function_">useQueryClient</span>();

  <span class="hljs-keyword">return</span> <span class="hljs-title function_">useMutation</span>({
    <span class="hljs-attr">mutationFn</span>: <span class="hljs-function">(<span class="hljs-params">productId: <span class="hljs-built_in">string</span></span>) =&gt;</span> api.<span class="hljs-title function_">addToCart</span>(productId),
    <span class="hljs-attr">onSuccess</span>: <span class="hljs-function">() =&gt;</span> {
      queryClient.<span class="hljs-title function_">invalidateQueries</span>({ <span class="hljs-attr">queryKey</span>: [<span class="hljs-string">'cart'</span>] });
    },
  });
}

<span class="hljs-comment">// å¦‚æœè´­ç‰©è½¦åªåœ¨æµè§ˆå™¨æœ¬åœ°ï¼ˆæœªç™»å½•ï¼‰</span>
<span class="hljs-keyword">const</span> useCartStore = <span class="hljs-title function_">create</span>(
  <span class="hljs-title function_">persist</span>(
    <span class="hljs-function">(<span class="hljs-params">set</span>) =&gt;</span> ({
      <span class="hljs-attr">items</span>: [],
      <span class="hljs-attr">addItem</span>: <span class="hljs-function">(<span class="hljs-params">product</span>) =&gt;</span> <span class="hljs-title function_">set</span>(<span class="hljs-function">(<span class="hljs-params">s</span>) =&gt;</span> ({ <span class="hljs-attr">items</span>: [...s.<span class="hljs-property">items</span>, product] })),
      <span class="hljs-attr">removeItem</span>: <span class="hljs-function">(<span class="hljs-params">productId</span>) =&gt;</span>
        <span class="hljs-title function_">set</span>(<span class="hljs-function">(<span class="hljs-params">s</span>) =&gt;</span> ({ <span class="hljs-attr">items</span>: s.<span class="hljs-property">items</span>.<span class="hljs-title function_">filter</span>(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> item.<span class="hljs-property">id</span> !== productId) })),
    }),
    { <span class="hljs-attr">name</span>: <span class="hljs-string">'guest-cart'</span> }
  )
);
</code></pre>
<p><strong>å†³ç­–ä¾æ®</strong>ï¼šæ•°æ®çš„"çœŸç›¸"åœ¨å“ªé‡Œï¼Ÿ</p>
<ul>
<li>æœåŠ¡å™¨ â†’ React Query</li>
<li>æµè§ˆå™¨ â†’ Zustand + persist</li>
</ul>
<hr/>
<h4 data-id="heading-39">æŒä¹…åŒ–ç­–ç•¥</h4>
<h5 data-id="heading-40">React Query æŒä¹…åŒ–</h5>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { persistQueryClient } <span class="hljs-keyword">from</span> <span class="hljs-string">'@tanstack/react-query-persist-client'</span>;
<span class="hljs-keyword">import</span> { createSyncStoragePersister } <span class="hljs-keyword">from</span> <span class="hljs-string">'@tanstack/query-sync-storage-persister'</span>;

<span class="hljs-keyword">const</span> persister = <span class="hljs-title function_">createSyncStoragePersister</span>({
  <span class="hljs-attr">storage</span>: <span class="hljs-variable language_">window</span>.<span class="hljs-property">localStorage</span>,
});

<span class="hljs-title function_">persistQueryClient</span>({
  queryClient,
  persister,
  <span class="hljs-attr">maxAge</span>: <span class="hljs-number">1000</span> * <span class="hljs-number">60</span> * <span class="hljs-number">60</span> * <span class="hljs-number">24</span>, <span class="hljs-comment">// 24 å°æ—¶</span>
  <span class="hljs-attr">dehydrateOptions</span>: {
    <span class="hljs-comment">// åªæŒä¹…åŒ–ç‰¹å®šæŸ¥è¯¢</span>
    <span class="hljs-attr">shouldDehydrateQuery</span>: <span class="hljs-function">(<span class="hljs-params">query</span>) =&gt;</span> {
      <span class="hljs-keyword">const</span> queryKey = query.<span class="hljs-property">queryKey</span>[<span class="hljs-number">0</span>];
      <span class="hljs-comment">// åªæŒä¹…åŒ–ç”¨æˆ·ä¿¡æ¯å’Œé…ç½®ï¼Œä¸æŒä¹…åŒ–åˆ—è¡¨æ•°æ®</span>
      <span class="hljs-keyword">return</span> queryKey === <span class="hljs-string">'currentUser'</span> || queryKey === <span class="hljs-string">'appConfig'</span>;
    },
  },
});
</code></pre>
<p><strong>æŒä¹…åŒ–åŸåˆ™</strong>ï¼š</p>
<ul>
<li>ç”¨æˆ·ä¿¡æ¯ã€åº”ç”¨é…ç½®ï¼ˆä½é¢‘å˜åŒ–ï¼‰</li>
<li>åˆ—è¡¨æ•°æ®ã€å®æ—¶æ•°æ®ï¼ˆé«˜é¢‘å˜åŒ–ï¼‰</li>
<li>æ•æ„Ÿæ•°æ®ï¼ˆToken ç”¨ httpOnly cookieï¼‰</li>
</ul>
<h5 data-id="heading-41">Zustand æŒä¹…åŒ–</h5>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> useUIStore = <span class="hljs-title function_">create</span>(
  <span class="hljs-title function_">persist</span>(
    <span class="hljs-function">(<span class="hljs-params">set</span>) =&gt;</span> ({
      <span class="hljs-attr">theme</span>: <span class="hljs-string">'light'</span>,
      <span class="hljs-attr">sidebarCollapsed</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">recentSearches</span>: [],

      <span class="hljs-attr">setTheme</span>: <span class="hljs-function">(<span class="hljs-params">theme</span>) =&gt;</span> <span class="hljs-title function_">set</span>({ theme }),
      <span class="hljs-attr">toggleSidebar</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">set</span>(<span class="hljs-function">(<span class="hljs-params">s</span>) =&gt;</span> ({ <span class="hljs-attr">sidebarCollapsed</span>: !s.<span class="hljs-property">sidebarCollapsed</span> })),
      <span class="hljs-attr">addRecentSearch</span>: <span class="hljs-function">(<span class="hljs-params">query</span>) =&gt;</span>
        <span class="hljs-title function_">set</span>(<span class="hljs-function">(<span class="hljs-params">s</span>) =&gt;</span> ({
          <span class="hljs-attr">recentSearches</span>: [query, ...s.<span class="hljs-property">recentSearches</span>].<span class="hljs-title function_">slice</span>(<span class="hljs-number">0</span>, <span class="hljs-number">10</span>),
        })),
    }),
    {
      <span class="hljs-attr">name</span>: <span class="hljs-string">'ui-preferences'</span>,
      <span class="hljs-comment">// éƒ¨åˆ†å­—æ®µæŒä¹…åŒ–</span>
      <span class="hljs-attr">partialize</span>: <span class="hljs-function">(<span class="hljs-params">state</span>) =&gt;</span> ({
        <span class="hljs-attr">theme</span>: state.<span class="hljs-property">theme</span>,
        <span class="hljs-attr">recentSearches</span>: state.<span class="hljs-property">recentSearches</span>,
        <span class="hljs-comment">// sidebarCollapsed ä¸æŒä¹…åŒ–ï¼Œæ¯æ¬¡æ‰“å¼€éƒ½æ˜¯å±•å¼€çŠ¶æ€</span>
      }),
    }
  )
);
</code></pre>
<p><strong>æŒä¹…åŒ–åŸåˆ™</strong>ï¼š</p>
<ul>
<li>ç”¨æˆ·åå¥½ï¼ˆä¸»é¢˜ã€è¯­è¨€ã€è§†å›¾æ¨¡å¼ï¼‰</li>
<li>å†å²è®°å½•ï¼ˆæœ€è¿‘æœç´¢ã€æœ€è¿‘è®¿é—®ï¼‰</li>
<li>ä¸´æ—¶ UI çŠ¶æ€ï¼ˆå¼¹çª—ã€ä¾§è¾¹æ ï¼‰</li>
<li>æ•æ„Ÿæ•°æ®ï¼ˆå¯†ç ã€Tokenï¼‰</li>
</ul>
<hr/>
<h4 data-id="heading-42">æ€§èƒ½ä¼˜åŒ–æ£€æŸ¥æ¸…å•</h4>
<h5 data-id="heading-43">React Query ä¼˜åŒ–</h5>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// åˆç†è®¾ç½® staleTimeï¼ˆé¿å…è¿‡åº¦è¯·æ±‚ï¼‰</span>
<span class="hljs-title function_">useQuery</span>({
  <span class="hljs-attr">queryKey</span>: [<span class="hljs-string">'user'</span>],
  <span class="hljs-attr">queryFn</span>: fetchUser,
  <span class="hljs-attr">staleTime</span>: <span class="hljs-number">5</span> * <span class="hljs-number">60</span> * <span class="hljs-number">1000</span>, <span class="hljs-comment">// ç”¨æˆ·ä¿¡æ¯ 5 åˆ†é’Ÿå†…ä¸é‡æ–°è·å–</span>
});

<span class="hljs-comment">// ä½¿ç”¨ select å‡å°‘é‡æ¸²æŸ“</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">UserAvatar</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// åªè®¢é˜… avatar å­—æ®µï¼Œname å˜åŒ–ä¸ä¼šè§¦å‘é‡æ¸²æŸ“</span>
  <span class="hljs-keyword">const</span> avatar = <span class="hljs-title function_">useQuery</span>({
    <span class="hljs-attr">queryKey</span>: [<span class="hljs-string">'user'</span>],
    <span class="hljs-attr">queryFn</span>: fetchUser,
    <span class="hljs-attr">select</span>: <span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> data.<span class="hljs-property">avatar</span>,
  });
}

<span class="hljs-comment">// ç¦ç”¨ä¸éœ€è¦çš„è‡ªåŠ¨è¡Œä¸º</span>
<span class="hljs-title function_">useQuery</span>({
  <span class="hljs-attr">queryKey</span>: [<span class="hljs-string">'static-config'</span>],
  <span class="hljs-attr">queryFn</span>: fetchConfig,
  <span class="hljs-attr">staleTime</span>: <span class="hljs-title class_">Infinity</span>, <span class="hljs-comment">// æ°¸ä¸è¿‡æœŸ</span>
  <span class="hljs-attr">refetchOnWindowFocus</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">// çª—å£èšç„¦æ—¶ä¸åˆ·æ–°</span>
  <span class="hljs-attr">refetchOnReconnect</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">// é‡è¿æ—¶ä¸åˆ·æ–°</span>
});
</code></pre>
<h5 data-id="heading-44">Zustand ä¼˜åŒ–</h5>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ä½¿ç”¨ç²¾ç¡®è®¢é˜…ï¼ˆé¿å…ä¸å¿…è¦çš„é‡æ¸²æŸ“ï¼‰</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">ThemeToggle</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// åªè®¢é˜… themeï¼Œå…¶ä»–å­—æ®µå˜åŒ–ä¸ä¼šè§¦å‘é‡æ¸²æŸ“</span>
  <span class="hljs-keyword">const</span> theme = <span class="hljs-title function_">useUIStore</span>(<span class="hljs-function">(<span class="hljs-params">s</span>) =&gt;</span> s.<span class="hljs-property">theme</span>);
  <span class="hljs-keyword">const</span> setTheme = <span class="hljs-title function_">useUIStore</span>(<span class="hljs-function">(<span class="hljs-params">s</span>) =&gt;</span> s.<span class="hljs-property">setTheme</span>);
}

<span class="hljs-comment">//  é”™è¯¯ï¼šè®¢é˜…æ•´ä¸ª Store</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">ThemeToggle</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> { theme, setTheme, sidebarOpen, viewMode } = <span class="hljs-title function_">useUIStore</span>();
  <span class="hljs-comment">// sidebarOpen æˆ– viewMode å˜åŒ–ä¹Ÿä¼šè§¦å‘é‡æ¸²æŸ“ï¼</span>
}

<span class="hljs-comment">// ä½¿ç”¨ shallow æ¯”è¾ƒï¼ˆå¯¹è±¡æˆ–æ•°ç»„ï¼‰</span>
<span class="hljs-keyword">import</span> { shallow } <span class="hljs-keyword">from</span> <span class="hljs-string">'zustand/shallow'</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">UserSettings</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> { theme, viewMode } = <span class="hljs-title function_">useUIStore</span>(
    <span class="hljs-function">(<span class="hljs-params">s</span>) =&gt;</span> ({ <span class="hljs-attr">theme</span>: s.<span class="hljs-property">theme</span>, <span class="hljs-attr">viewMode</span>: s.<span class="hljs-property">viewMode</span> }),
    shallow <span class="hljs-comment">// æµ…æ¯”è¾ƒï¼Œé¿å…å¼•ç”¨å˜åŒ–å¯¼è‡´é‡æ¸²æŸ“</span>
  );
}
</code></pre>
<hr/>
<h4 data-id="heading-45">è¿ç§»è·¯å¾„ï¼šä» Redux åˆ° React Query + Zustand</h4>
<p>å¦‚æœä½ æœ‰ä¸€ä¸ªä½¿ç”¨ Redux çš„è€é¡¹ç›®ï¼Œå¯ä»¥è¿™æ ·é€æ­¥è¿ç§»ï¼š</p>
<p><strong>ç¬¬ 1 æ­¥ï¼šè¯†åˆ«çŠ¶æ€ç±»å‹</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ç°æœ‰ Redux Store</span>
<span class="hljs-keyword">const</span> store = {
  <span class="hljs-attr">user</span>: { ... },           <span class="hljs-comment">// Server State â†’ React Query</span>
  <span class="hljs-attr">resumes</span>: [ ... ],        <span class="hljs-comment">// Server State â†’ React Query</span>
  <span class="hljs-attr">ui</span>: {
    <span class="hljs-attr">theme</span>: <span class="hljs-string">'light'</span>,        <span class="hljs-comment">// Client State â†’ Zustand</span>
    <span class="hljs-attr">sidebarOpen</span>: <span class="hljs-literal">true</span>,     <span class="hljs-comment">// Client State â†’ Zustand</span>
  },
};
</code></pre>
<p><strong>ç¬¬ 2 æ­¥ï¼šè¿ç§» Server State</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// åˆ é™¤ Redux Slice</span>
- <span class="hljs-keyword">import</span> { selectUser } <span class="hljs-keyword">from</span> <span class="hljs-string">'./userSlice'</span>;
+ <span class="hljs-keyword">import</span> { useCurrentUser } <span class="hljs-keyword">from</span> <span class="hljs-string">'./queries/useUserQueries'</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">UserProfile</span>(<span class="hljs-params"/>) {
-  <span class="hljs-keyword">const</span> user = <span class="hljs-title function_">useSelector</span>(selectUser);
+  <span class="hljs-keyword">const</span> { <span class="hljs-attr">data</span>: user } = <span class="hljs-title function_">useCurrentUser</span>();
}
</code></pre>
<p><strong>ç¬¬ 3 æ­¥ï¼šè¿ç§» Client State</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// åˆ›å»º Zustand Store</span>
<span class="hljs-keyword">const</span> useUIStore = <span class="hljs-title function_">create</span>(<span class="hljs-function">(<span class="hljs-params">set</span>) =&gt;</span> ({
  <span class="hljs-attr">theme</span>: <span class="hljs-string">'light'</span>,
  <span class="hljs-attr">sidebarOpen</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">setTheme</span>: <span class="hljs-function">(<span class="hljs-params">theme</span>) =&gt;</span> <span class="hljs-title function_">set</span>({ theme }),
  <span class="hljs-attr">toggleSidebar</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">set</span>(<span class="hljs-function">(<span class="hljs-params">s</span>) =&gt;</span> ({ <span class="hljs-attr">sidebarOpen</span>: !s.<span class="hljs-property">sidebarOpen</span> })),
}));

<span class="hljs-comment">// æ›¿æ¢ä½¿ç”¨</span>
- <span class="hljs-keyword">const</span> theme = <span class="hljs-title function_">useSelector</span>(<span class="hljs-function">(<span class="hljs-params">s</span>) =&gt;</span> s.<span class="hljs-property">ui</span>.<span class="hljs-property">theme</span>);
- <span class="hljs-keyword">const</span> dispatch = <span class="hljs-title function_">useDispatch</span>();
+ <span class="hljs-keyword">const</span> { theme, setTheme } = <span class="hljs-title function_">useUIStore</span>();
</code></pre>
<p><strong>ç¬¬ 4 æ­¥ï¼šåˆ é™¤ Redux</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// å½“æ‰€æœ‰çŠ¶æ€è¿ç§»å®Œæˆåï¼Œåˆ é™¤ Redux ç›¸å…³ä»£ç </span>
- <span class="hljs-keyword">import</span> { <span class="hljs-title class_">Provider</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-redux'</span>;
- <span class="hljs-keyword">import</span> { store } <span class="hljs-keyword">from</span> <span class="hljs-string">'./store'</span>;

<span class="hljs-comment">// åªä¿ç•™ React Query</span>
+ <span class="hljs-keyword">import</span> { <span class="hljs-title class_">QueryClientProvider</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@tanstack/react-query'</span>;
</code></pre>
<p><strong>è¿ç§»æ”¶ç›Š</strong>ï¼š</p>
<ul>
<li>ä»£ç é‡å‡å°‘ 30-50%</li>
<li>å»é™¤å¤§é‡ boilerplateï¼ˆactions, reducers, selectors)</li>
<li>è‡ªåŠ¨è·å¾—ç¼“å­˜ã€å»é‡ã€åå°åˆ·æ–°ç­‰èƒ½åŠ›</li>
</ul>
<h3 data-id="heading-46">æ€»ç»“ï¼šæ¶æ„çš„æœ¬è´¨æ˜¯åˆ†ç¦»å…³æ³¨ç‚¹</h3>
<p>å›åˆ°å¼€ç¯‡çš„é—®é¢˜ï¼šä¸ºä»€ä¹ˆçŠ¶æ€ç®¡ç†ä¼šå˜å¾—æ··ä¹±ï¼Ÿ</p>
<p><strong>æ ¹æœ¬åŸå› æ˜¯ï¼šæˆ‘ä»¬ç”¨åŒä¸€å¥—å·¥å…·ï¼ˆRedux/Zustandï¼‰è§£å†³äº†æœ¬è´¨ä¸åŒçš„é—®é¢˜ã€‚</strong></p>
<p>æœ¬æ–‡æå‡ºçš„æ¶æ„ç†å¿µå¯ä»¥æ€»ç»“ä¸ºï¼š</p>
<h4 data-id="heading-47">æ ¸å¿ƒåŸåˆ™</h4>
<ol>
<li>
<p><strong>Server State â‰  Client State</strong></p>
<ul>
<li>Server Stateï¼šå¼‚æ­¥ã€éœ€è¦ç¼“å­˜ã€ä¼šè¿‡æœŸã€å¯èƒ½è¢«åˆ«äººä¿®æ”¹</li>
<li>Client Stateï¼šåŒæ­¥ã€ç¬æ€ã€å®Œå…¨ç”±å®¢æˆ·ç«¯æ§åˆ¶</li>
</ul>
</li>
<li>
<p><strong>å·¥å…·ä¸“æ³¨äºå„è‡ªçš„é—®é¢˜åŸŸ</strong></p>
<ul>
<li>React Queryï¼šä¸“æ³¨è§£å†³å¼‚æ­¥æ•°æ®ç®¡ç†ï¼ˆç¼“å­˜ã€å»é‡ã€æ›´æ–°ã€åŒæ­¥ï¼‰</li>
<li>Zustandï¼šä¸“æ³¨è§£å†³è·¨ç»„ä»¶çš„ UI çŠ¶æ€å…±äº«</li>
</ul>
</li>
<li>
<p><strong>Pull, Don't Push</strong></p>
<ul>
<li>ç»„ä»¶ä¸»åŠ¨"æ‹‰å–"æ‰€éœ€æ•°æ®ï¼ˆ<code>useQuery</code>ï¼‰</li>
<li>è€Œä¸æ˜¯è·å–æ•°æ®å"æ¨é€"åˆ°å…¨å±€ Store</li>
</ul>
</li>
<li>
<p><strong>Server is the source of truth</strong></p>
<ul>
<li>Mutation åè®©æœåŠ¡å™¨å‘Šè¯‰æˆ‘ä»¬æœ€æ–°æ•°æ®ï¼ˆinvalidate + refetchï¼‰</li>
<li>è€Œä¸æ˜¯è‡ªå·±çŒœæµ‹å¹¶æ‰‹åŠ¨åŒæ­¥æœ¬åœ°æ•°æ®</li>
</ul>
</li>
</ol>
<hr/>
<h4 data-id="heading-48">æ¶æ„æ”¶ç›Š</h4>
<p>é‡‡ç”¨è¿™å¥—æ¶æ„åï¼Œä½ ä¼šå‘ç°ï¼š</p>
<p><strong>ä»£ç æ›´ç®€æ´</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ä¹‹å‰ï¼šRedux + æ‰‹åŠ¨ç®¡ç†ç¼“å­˜</span>
<span class="hljs-comment">// userSlice.ts (50 è¡Œ)</span>
<span class="hljs-comment">// userActions.ts (30 è¡Œ)</span>
<span class="hljs-comment">// userSaga.ts (80 è¡Œ)</span>
<span class="hljs-comment">// æ€»è®¡ï¼š160 è¡Œ</span>

<span class="hljs-comment">// ç°åœ¨ï¼šReact Query</span>
<span class="hljs-comment">// useUserQueries.ts (20 è¡Œ)</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">useCurrentUser</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">useQuery</span>({
    <span class="hljs-attr">queryKey</span>: [<span class="hljs-string">'currentUser'</span>],
    <span class="hljs-attr">queryFn</span>: fetchUser,
    <span class="hljs-attr">staleTime</span>: <span class="hljs-number">5</span> * <span class="hljs-number">60</span> * <span class="hljs-number">1000</span>,
  });
}
</code></pre>
<p><strong>Bug è‡ªç„¶æ¶ˆå¤±</strong></p>
<ul>
<li>ä¸å†æœ‰"æ•°æ®ä¸åŒæ­¥"ï¼ˆQuery è‡ªåŠ¨å¤„ç†ï¼‰</li>
<li>ä¸å†æœ‰"é‡å¤è¯·æ±‚"ï¼ˆè‡ªåŠ¨å»é‡ï¼‰</li>
<li>ä¸å†æœ‰"æ•°æ®è¿‡æœŸä½†ä¸çŸ¥é“"ï¼ˆstaleTime æœºåˆ¶ï¼‰</li>
</ul>
<p><strong>å¼€å‘ä½“éªŒæå‡</strong></p>
<ul>
<li>æ–°åŠŸèƒ½å¼€å‘æ—¶ï¼Œä¸éœ€è¦å…ˆå†™ action â†’ reducer â†’ selector</li>
<li>ç›´æ¥åœ¨ç»„ä»¶é‡Œ <code>useQuery</code>ï¼Œæ•°æ®ç«‹å³å¯ç”¨</li>
<li>DevTools ç›´è§‚å±•ç¤ºç¼“å­˜çŠ¶æ€ã€è¯·æ±‚æ—¶åº</li>
</ul>
<p><strong>æ€§èƒ½ä¼˜åŒ–</strong></p>
<ul>
<li>è‡ªåŠ¨åå°åˆ·æ–°ï¼ˆç”¨æˆ·æ— æ„ŸçŸ¥è·å–æœ€æ–°æ•°æ®ï¼‰</li>
<li>æ™ºèƒ½å»é‡ï¼ˆå¤šä¸ªç»„ä»¶åŒæ—¶è¯·æ±‚åªå‘ä¸€æ¬¡ï¼‰</li>
<li>æŒ‰éœ€åŠ è½½ï¼ˆåªæœ‰ç»„ä»¶æŒ‚è½½æ—¶æ‰æŸ¥è¯¢æ•°æ®ï¼‰</li>
</ul>
<hr/>
<h4 data-id="heading-49">æœ€åçš„å»ºè®®</h4>
<ol>
<li>
<p><strong>ä¸è¦ä¸€æ¬¡æ€§é‡æ„</strong></p>
<ul>
<li>æ–°åŠŸèƒ½ç›´æ¥ç”¨ React Query</li>
<li>è€ä»£ç é€æ­¥è¿ç§»ï¼ˆä»æœ€ç®€å•çš„æŸ¥è¯¢å¼€å§‹ï¼‰</li>
</ul>
</li>
<li>
<p><strong>ä¸è¦æ•™æ¡ä¸»ä¹‰</strong></p>
<ul>
<li>å¦‚æœå›¢é˜Ÿå·²ç»æ·±åº¦ä½¿ç”¨ Redux ä¸”è¿è½¬è‰¯å¥½ï¼Œä¸ä¸€å®šè¦è¿ç§»</li>
<li>ä½†æ–°é¡¹ç›®å¼ºçƒˆå»ºè®®é‡‡ç”¨ React Query + Zustand</li>
</ul>
</li>
<li>
<p><strong>ä¸è¦è¿‡åº¦è®¾è®¡</strong></p>
<ul>
<li>å°å‹é¡¹ç›®ç”šè‡³å¯ä»¥åªç”¨ React Query + Context</li>
<li>Zustand åªåœ¨ç¡®å®éœ€è¦æ—¶å¼•å…¥</li>
</ul>
</li>
<li>
<p><strong>å…³æ³¨æ•°æ®çš„æœ¬è´¨ï¼Œè€Œä¸æ˜¯å·¥å…·</strong></p>
<ul>
<li>å…ˆåˆ¤æ–­æ•°æ®ç±»å‹ï¼ˆServer State vs Client Stateï¼‰</li>
<li>å†é€‰æ‹©åˆé€‚çš„å·¥å…·</li>
</ul>
</li>
</ol>
<hr/>
<h4 data-id="heading-50">æ‰©å±•é˜…è¯»</h4>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftanstack.com%2Fquery%2Flatest" target="_blank" title="https://tanstack.com/query/latest" ref="nofollow noopener noreferrer">TanStack Query å®˜æ–¹æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.pmnd.rs%2Fzustand%2Fgetting-started%2Fintroduction" target="_blank" title="https://docs.pmnd.rs/zustand/getting-started/introduction" ref="nofollow noopener noreferrer">Zustand å®˜æ–¹æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fmedium.com%2F%40dan_abramov%2Fyou-might-not-need-redux-be46360cf367" target="_blank" title="https://medium.com/@dan_abramov/you-might-not-need-redux-be46360cf367" ref="nofollow noopener noreferrer">You Might Not Need Redux</a></li>
</ul>
<hr/>
<p><strong>æœ€åä¸€å¥è¯</strong>ï¼šçŠ¶æ€ç®¡ç†ä¸åº”è¯¥æ˜¯ç—›è‹¦çš„ï¼Œé€‰å¯¹å·¥å…·ï¼Œæ¶æ„è‡ªç„¶æ¸…æ™°ã€‚</p>
<hr/>
<blockquote>
<p>å¦‚æœè¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©ï¼Œæ¬¢è¿ç‚¹èµæ”¶è—ã€‚å¦‚æœä½ æœ‰ä¸åŒçœ‹æ³•æˆ–å®è·µç»éªŒï¼Œä¹Ÿæ¬¢è¿åœ¨è¯„è®ºåŒºè®¨è®ºã€‚</p>
<p><em>æœ¬æ–‡ç¤ºä¾‹ä»£ç åŸºäº React 18 + TypeScript + TanStack Query v5 + Zustand v4</em></p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Server Components vs Client Componentsï¼šNext.js å¼€å‘è€…çš„é€‰æ‹©æŒ‡å—]]></title>    <link>https://juejin.cn/post/7598921649888149531</link>    <guid>https://juejin.cn/post/7598921649888149531</guid>    <pubDate>2026-01-25T09:51:44.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7598921649888149531" data-draft-id="7598827641308151859" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Server Components vs Client Componentsï¼šNext.js å¼€å‘è€…çš„é€‰æ‹©æŒ‡å—"/> <meta itemprop="keywords" content="Next.js"/> <meta itemprop="datePublished" content="2026-01-25T09:51:44.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åŒ—è¾°alk"/> <meta itemprop="url" content="https://juejin.cn/user/1772855673241352"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Server Components vs Client Componentsï¼šNext.js å¼€å‘è€…çš„é€‰æ‹©æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1772855673241352/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åŒ—è¾°alk
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-25T09:51:44.000Z" title="Sun Jan 25 2026 09:51:44 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Server Components vs Client Componentsï¼šNext.js å¼€å‘è€…çš„é€‰æ‹©æŒ‡å—</h2>
<blockquote>
<p>åœ¨ Next.js çš„ä¸–ç•Œé‡Œï¼Œç†è§£è¿™ä¸¤ç§ç»„ä»¶çš„åŒºåˆ«ï¼Œå°±åƒæŒæ¡æ­¦æœ¯ä¸­çš„â€œåˆšæŸ”å¹¶æµâ€</p>
</blockquote>
<p>å¤§å®¶å¥½ï¼ä»Šå¤©æˆ‘ä»¬æ¥æ·±å…¥æ¢è®¨ Next.js 13+ ä¸­æœ€é‡è¦çš„æ¶æ„å˜é©ï¼š<strong>Server Componentsï¼ˆæœåŠ¡ç«¯ç»„ä»¶ï¼‰</strong> ä¸ <strong>Client Componentsï¼ˆå®¢æˆ·ç«¯ç»„ä»¶ï¼‰</strong>ã€‚è¿™ä¸¤è€…çš„é€‰æ‹©ä¸ä»…å½±å“æ€§èƒ½ï¼Œæ›´å…³ä¹åº”ç”¨æ¶æ„çš„æ ¹æœ¬å†³ç­–ã€‚</p>
<h3 data-id="heading-1">ğŸ“Š å¿«é€Ÿå¯¹æ¯”ï¼šä¸€å›¾çœ‹æ‡‚æ ¸å¿ƒå·®å¼‚</h3>
<p>å…ˆæ¥ä¸ªç›´è§‚å¯¹æ¯”ï¼Œè®©å¤§å®¶æœ‰ä¸ªæ•´ä½“æ¦‚å¿µï¼š</p>


















































<table><thead><tr><th>ç‰¹æ€§ç»´åº¦</th><th>Server Components</th><th>Client Components</th></tr></thead><tbody><tr><td><strong>æ¸²æŸ“ä½ç½®</strong></td><td>æœåŠ¡ç«¯</td><td>å®¢æˆ·ç«¯</td></tr><tr><td><strong>Bundleå¤§å°</strong></td><td>é›¶æ‰“åŒ…ï¼Œä¸å‘é€åˆ°å®¢æˆ·ç«¯</td><td>éœ€è¦æ‰“åŒ…å¹¶å‘é€åˆ°å®¢æˆ·ç«¯</td></tr><tr><td><strong>æ•°æ®è·å–</strong></td><td>ç›´æ¥è®¿é—®æ•°æ®åº“/API</td><td>é€šè¿‡APIç«¯ç‚¹è·å–</td></tr><tr><td><strong>äº¤äº’æ€§</strong></td><td>æ— ï¼ˆçº¯å±•ç¤ºï¼‰</td><td>å®Œå…¨äº¤äº’å¼</td></tr><tr><td><strong>ç”Ÿå‘½å‘¨æœŸ</strong></td><td>æ— ï¼ˆæ¯æ¬¡è¯·æ±‚é‡æ–°æ¸²æŸ“ï¼‰</td><td>å®Œæ•´Reactç”Ÿå‘½å‘¨æœŸ</td></tr><tr><td><strong>DOM API</strong></td><td>ä¸å¯ç”¨</td><td>å®Œå…¨å¯ç”¨</td></tr><tr><td><strong>çŠ¶æ€ç®¡ç†</strong></td><td>æ— çŠ¶æ€</td><td>useStateã€useReducerç­‰</td></tr><tr><td><strong>ç¬¬ä¸‰æ–¹åº“</strong></td><td>éœ€å…¼å®¹æœåŠ¡ç«¯æ¸²æŸ“</td><td>æ— é™åˆ¶</td></tr></tbody></table>
<h3 data-id="heading-2">ğŸ” æ·±å…¥è§£æï¼šå®ƒä»¬åˆ°åº•åšäº†ä»€ä¹ˆï¼Ÿ</h3>
<h4 data-id="heading-3">Server Componentsï¼šæœåŠ¡ç«¯çš„â€œé­”æ³•â€</h4>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// app/products/page.js - é»˜è®¤å°±æ˜¯Server Component</span>
<span class="hljs-keyword">import</span> { db } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/lib/db'</span>

<span class="hljs-comment">// æœåŠ¡ç«¯ç»„ä»¶å¯ä»¥ç›´æ¥è®¿é—®æ•°æ®åº“ï¼</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">ProductsPage</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// ç›´æ¥è¯»å–æ•°æ®åº“ï¼Œä¸éœ€è¦APIè·¯ç”±</span>
  <span class="hljs-keyword">const</span> products = <span class="hljs-keyword">await</span> db.<span class="hljs-property">products</span>.<span class="hljs-title function_">findMany</span>({
    <span class="hljs-attr">where</span>: { <span class="hljs-attr">isPublished</span>: <span class="hljs-literal">true</span> }
  })
  
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>äº§å“åˆ—è¡¨<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
      {/* æ•°æ®ç›´æ¥åµŒå…¥HTMLï¼Œå¯¹SEOå‹å¥½ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>
        {products.map(product =&gt; (
          <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{product.id}</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>{product.name}<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>{product.description}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
            {/* æ³¨æ„ï¼šè¿™é‡Œä¸èƒ½æœ‰äº‹ä»¶å¤„ç†å™¨ */}
          <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
        ))}
      <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  )
}
</code></pre>
<p><strong>Server Componentsçš„ä¼˜åŠ¿ï¼š</strong></p>
<ul>
<li><strong>é›¶å®¢æˆ·ç«¯Bundle</strong>ï¼šä»£ç æ°¸è¿œä¸ä¼šå‘é€åˆ°æµè§ˆå™¨</li>
<li><strong>ç›´æ¥æ•°æ®è®¿é—®</strong>ï¼šå‡å°‘å®¢æˆ·ç«¯-æœåŠ¡å™¨å¾€è¿”</li>
<li><strong>è‡ªåŠ¨ä»£ç åˆ†å‰²</strong>ï¼šåªå‘é€å½“å‰è·¯ç”±éœ€è¦çš„ä»£ç </li>
<li><strong>æ•æ„Ÿä¿¡æ¯å®‰å…¨</strong>ï¼šAPIå¯†é’¥ã€æ•°æ®åº“å‡­è¯å®‰å…¨ä¿ç•™åœ¨æœåŠ¡ç«¯</li>
</ul>
<h4 data-id="heading-4">Client Componentsï¼šå®¢æˆ·ç«¯çš„â€œçµé­‚â€</h4>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-string">'use client'</span> <span class="hljs-comment">// è¿™ä¸ªæŒ‡ä»¤è‡³å…³é‡è¦ï¼</span>

<span class="hljs-keyword">import</span> { useState, useEffect } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>
<span class="hljs-keyword">import</span> { addToCart } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/actions/cart'</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">LikeButton</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./LikeButton'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">ProductCard</span>(<span class="hljs-params">{ initialProduct }</span>) {
  <span class="hljs-keyword">const</span> [product, setProduct] = <span class="hljs-title function_">useState</span>(initialProduct)
  <span class="hljs-keyword">const</span> [isLiked, setIsLiked] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>)
  
  <span class="hljs-comment">// å®¢æˆ·ç«¯ç‰¹æœ‰çš„ç”Ÿå‘½å‘¨æœŸ</span>
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">// å¯ä»¥è®¿é—®æµè§ˆå™¨API</span>
    <span class="hljs-keyword">const</span> viewed = <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">`viewed_<span class="hljs-subst">${product.id}</span>`</span>)
    <span class="hljs-keyword">if</span> (!viewed) {
      <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">`viewed_<span class="hljs-subst">${product.id}</span>`</span>, <span class="hljs-string">'true'</span>)
      <span class="hljs-comment">// å‘é€æµè§ˆè®°å½•åˆ°åˆ†ææœåŠ¡</span>
      analytics.<span class="hljs-title function_">track</span>(<span class="hljs-string">'product_view'</span>, { <span class="hljs-attr">id</span>: product.<span class="hljs-property">id</span> })
    }
  }, [product.<span class="hljs-property">id</span>])
  
  <span class="hljs-comment">// äº¤äº’äº‹ä»¶å¤„ç†</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleAddToCart</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-keyword">await</span> <span class="hljs-title function_">addToCart</span>(product.<span class="hljs-property">id</span>)
    <span class="hljs-comment">// æ˜¾ç¤ºåŠ¨ç”»åé¦ˆ</span>
    <span class="hljs-comment">// æ›´æ–°è´­ç‰©è½¦å›¾æ ‡æ•°é‡</span>
  }
  
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"product-card"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>{product.name}<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>{product.price}å…ƒ<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      
      {/* äº¤äº’å¼ç»„ä»¶ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> 
        <span class="hljs-attr">onClick</span>=<span class="hljs-string">{handleAddToCart}</span>
        <span class="hljs-attr">className</span>=<span class="hljs-string">"add-to-cart-btn"</span>
      &gt;</span>
        åŠ å…¥è´­ç‰©è½¦
      <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
      
      {/* ä½¿ç”¨ç¬¬ä¸‰æ–¹UIåº“ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">LikeButton</span> 
        <span class="hljs-attr">isLiked</span>=<span class="hljs-string">{isLiked}</span>
        <span class="hljs-attr">onChange</span>=<span class="hljs-string">{setIsLiked}</span>
      /&gt;</span>
      
      {/* ä½¿ç”¨çŠ¶æ€é©±åŠ¨çš„UI */}
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{</span>`<span class="hljs-attr">stock-status</span> ${<span class="hljs-attr">product.stock</span> &lt; <span class="hljs-attr">10</span> ? '<span class="hljs-attr">low</span>' <span class="hljs-attr">:</span> ''}`}&gt;</span>
        åº“å­˜: {product.stock}
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  )
}
</code></pre>
<h3 data-id="heading-5">ğŸ¯ é»„é‡‘é€‰æ‹©æ³•åˆ™ï¼šä»€ä¹ˆæ—¶å€™ç”¨ä»€ä¹ˆï¼Ÿ</h3>
<h4 data-id="heading-6">é»˜è®¤é€‰æ‹© Server Component å½“ï¼š</h4>
<ul>
<li>âœ… çº¯æ•°æ®å±•ç¤ºï¼Œæ— éœ€äº¤äº’</li>
<li>âœ… è®¿é—®åç«¯èµ„æºï¼ˆæ•°æ®åº“ã€æ–‡ä»¶ç³»ç»Ÿï¼‰</li>
<li>âœ… éœ€è¦å‡å°‘å®¢æˆ·ç«¯JavaScriptä½“ç§¯</li>
<li>âœ… åŒ…å«æ•æ„Ÿé€»è¾‘æˆ–æ•°æ®</li>
<li>âœ… SEOæ˜¯å…³é”®è€ƒè™‘å› ç´ </li>
<li>âœ… å†…å®¹åŸºæœ¬é™æ€ï¼Œå˜åŒ–ä¸é¢‘ç¹</li>
</ul>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// âœ… åº”è¯¥ç”¨ Server Component</span>
<span class="hljs-comment">// åšå®¢æ–‡ç« é¡µé¢</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">BlogPost</span>(<span class="hljs-params">{ slug }</span>) {
  <span class="hljs-keyword">const</span> post = <span class="hljs-keyword">await</span> db.<span class="hljs-property">posts</span>.<span class="hljs-title function_">findUnique</span>({ <span class="hljs-attr">where</span>: { slug } })
  <span class="hljs-keyword">const</span> relatedPosts = <span class="hljs-keyword">await</span> db.<span class="hljs-property">posts</span>.<span class="hljs-title function_">findMany</span>({
    <span class="hljs-attr">where</span>: { <span class="hljs-attr">category</span>: post.<span class="hljs-property">category</span> },
    <span class="hljs-attr">take</span>: <span class="hljs-number">3</span>
  })
  
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Article</span> <span class="hljs-attr">content</span>=<span class="hljs-string">{post.content}</span> <span class="hljs-attr">related</span>=<span class="hljs-string">{relatedPosts}</span> /&gt;</span></span>
}
</code></pre>
<h4 data-id="heading-7">å¿…é¡»ä½¿ç”¨ Client Component å½“ï¼š</h4>
<ul>
<li>âœ… éœ€è¦ç”¨æˆ·äº¤äº’ï¼ˆç‚¹å‡»ã€è¾“å…¥ã€æ‹–æ‹½ï¼‰</li>
<li>âœ… ä½¿ç”¨æµè§ˆå™¨APIï¼ˆlocalStorageã€geolocationï¼‰</li>
<li>âœ… éœ€è¦çŠ¶æ€ç®¡ç†ï¼ˆuseStateã€useReducerï¼‰</li>
<li>âœ… ä½¿ç”¨ç¬¬ä¸‰æ–¹äº¤äº’å¼åº“ï¼ˆåœ°å›¾ã€å›¾è¡¨ã€å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼‰</li>
<li>âœ… éœ€è¦ç”Ÿå‘½å‘¨æœŸæ•ˆæœï¼ˆuseEffectï¼‰</li>
<li>âœ… å®ç°åŠ¨ç”»æˆ–è¿‡æ¸¡æ•ˆæœ</li>
</ul>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-string">'use client'</span>
<span class="hljs-comment">// âœ… å¿…é¡»ç”¨ Client Component</span>
<span class="hljs-comment">// å®æ—¶æœç´¢ç»„ä»¶</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">SearchBox</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [query, setQuery] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">''</span>)
  <span class="hljs-keyword">const</span> [results, setResults] = <span class="hljs-title function_">useState</span>([])
  <span class="hljs-keyword">const</span> [isSearching, setIsSearching] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>)
  
  <span class="hljs-comment">// é˜²æŠ–æœç´¢</span>
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">if</span> (!query.<span class="hljs-title function_">trim</span>()) <span class="hljs-keyword">return</span>
    
    <span class="hljs-keyword">const</span> timer = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-keyword">async</span> () =&gt; {
      <span class="hljs-title function_">setIsSearching</span>(<span class="hljs-literal">true</span>)
      <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">`/api/search?q=<span class="hljs-subst">${query}</span>`</span>)
      <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> res.<span class="hljs-title function_">json</span>()
      <span class="hljs-title function_">setResults</span>(data)
      <span class="hljs-title function_">setIsSearching</span>(<span class="hljs-literal">false</span>)
    }, <span class="hljs-number">300</span>)
    
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">clearTimeout</span>(timer)
  }, [query])
  
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">input</span> 
        <span class="hljs-attr">value</span>=<span class="hljs-string">{query}</span>
        <span class="hljs-attr">onChange</span>=<span class="hljs-string">{(e)</span> =&gt;</span> setQuery(e.target.value)}
        placeholder="æœç´¢..."
      /&gt;
      {isSearching &amp;&amp; <span class="hljs-tag">&lt;<span class="hljs-name">Spinner</span> /&gt;</span>}
      <span class="hljs-tag">&lt;<span class="hljs-name">SearchResults</span> <span class="hljs-attr">results</span>=<span class="hljs-string">{results}</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  )
}
</code></pre>
<h3 data-id="heading-8">ğŸ› ï¸ æ··åˆä½¿ç”¨ï¼šç°å®ä¸–ç•Œçš„æ¡ˆä¾‹</h3>
<p>çœŸæ­£çš„åº”ç”¨å¾€å¾€æ˜¯æ··åˆä½¿ç”¨çš„ï¼Œä¸‹é¢çœ‹ä¸€ä¸ªç”µå•†äº§å“é¡µé¢çš„ä¾‹å­ï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// app/product/[id]/page.js - Server Component</span>
<span class="hljs-keyword">import</span> { db } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/lib/db'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">ProductDetails</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./ProductDetails'</span> <span class="hljs-comment">// Client Component</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">ProductReviews</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./ProductReviews'</span> <span class="hljs-comment">// Server Component</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">AddToCartButton</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'@/components/AddToCartButton'</span> <span class="hljs-comment">// Client Component</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">ProductPage</span>(<span class="hljs-params">{ params }</span>) {
  <span class="hljs-comment">// æœåŠ¡ç«¯ï¼šè·å–æ ¸å¿ƒæ•°æ®</span>
  <span class="hljs-keyword">const</span> product = <span class="hljs-keyword">await</span> db.<span class="hljs-property">products</span>.<span class="hljs-title function_">findUnique</span>({
    <span class="hljs-attr">where</span>: { <span class="hljs-attr">id</span>: params.<span class="hljs-property">id</span> },
    <span class="hljs-attr">include</span>: { <span class="hljs-attr">category</span>: <span class="hljs-literal">true</span> }
  })
  
  <span class="hljs-comment">// æœåŠ¡ç«¯ï¼šè·å–è¯„è®ºï¼ˆSEOé‡è¦ï¼‰</span>
  <span class="hljs-keyword">const</span> reviews = <span class="hljs-keyword">await</span> db.<span class="hljs-property">reviews</span>.<span class="hljs-title function_">findMany</span>({
    <span class="hljs-attr">where</span>: { <span class="hljs-attr">productId</span>: params.<span class="hljs-property">id</span>, <span class="hljs-attr">isVerified</span>: <span class="hljs-literal">true</span> },
    <span class="hljs-attr">take</span>: <span class="hljs-number">10</span>
  })
  
  <span class="hljs-comment">// æœåŠ¡ç«¯ï¼šè·å–æ¨èï¼ˆä¸ªæ€§åŒ–ï¼‰</span>
  <span class="hljs-keyword">const</span> recommendations = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getRecommendations</span>(product.<span class="hljs-property">id</span>)
  
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"product-page"</span>&gt;</span>
      {/* æœåŠ¡å™¨ç»„ä»¶ä¼ é€’æ•°æ®åˆ°å®¢æˆ·ç«¯ç»„ä»¶ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">ProductDetails</span> 
        <span class="hljs-attr">product</span>=<span class="hljs-string">{product}</span> 
        // <span class="hljs-attr">å®¢æˆ·ç«¯äº¤äº’</span>ï¼š<span class="hljs-attr">æ”¶è—</span>ã€<span class="hljs-attr">åˆ†äº«</span>ã€<span class="hljs-attr">æ”¾å¤§å›¾ç‰‡</span>
      /&gt;</span>
      
      {/* æœåŠ¡å™¨ç»„ä»¶ï¼šçº¯å±•ç¤ºè¯„è®º */}
      <span class="hljs-tag">&lt;<span class="hljs-name">ProductReviews</span> 
        <span class="hljs-attr">reviews</span>=<span class="hljs-string">{reviews}</span>
        // <span class="hljs-attr">å®¢æˆ·ç«¯äº¤äº’</span>ï¼š<span class="hljs-attr">ç‚¹èµ</span>ã€<span class="hljs-attr">å›å¤è¯„è®º</span>ï¼ˆ<span class="hljs-attr">åµŒå¥—çš„å®¢æˆ·ç«¯ç»„ä»¶</span>ï¼‰
      /&gt;</span>
      
      {/* å®¢æˆ·ç«¯ç»„ä»¶ï¼šè´­ç‰©è½¦äº¤äº’ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">AddToCartButton</span> 
        <span class="hljs-attr">productId</span>=<span class="hljs-string">{product.id}</span>
        <span class="hljs-attr">stock</span>=<span class="hljs-string">{product.stock}</span>
      /&gt;</span>
      
      {/* æœåŠ¡ç«¯ç»„ä»¶ï¼šæ¨èåˆ—è¡¨ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">RecommendationList</span> 
        <span class="hljs-attr">products</span>=<span class="hljs-string">{recommendations}</span>
        // <span class="hljs-attr">æ¯ä¸ªæ¨èé¡¹å†…éƒ¨å¯èƒ½æœ‰å®¢æˆ·ç«¯äº¤äº’</span>
      /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  )
}
</code></pre>
<h3 data-id="heading-9">ğŸ’¡ é«˜çº§æ¨¡å¼ä¸æœ€ä½³å®è·µ</h3>
<h4 data-id="heading-10">1. ç»„ä»¶è¾¹ç•Œä¼˜åŒ–</h4>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// ä¸å¥½çš„åšæ³•ï¼šæ•´ä¸ªé¡µé¢éƒ½æ˜¯å®¢æˆ·ç«¯ç»„ä»¶</span>
<span class="hljs-string">'use client'</span> <span class="hljs-comment">// âŒ ä¸è¦è½»æ˜“åœ¨é¡¶å±‚åŠ è¿™ä¸ª</span>

<span class="hljs-comment">// å¥½çš„åšæ³•ï¼šç²¾ç¡®æ§åˆ¶å®¢æˆ·ç«¯è¾¹ç•Œ</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">UserDashboard</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      {/* æœåŠ¡ç«¯ç»„ä»¶ï¼šç”¨æˆ·ä¿¡æ¯ï¼ˆé™æ€ï¼‰ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">UserProfile</span> /&gt;</span>
      
      {/* æœåŠ¡ç«¯ç»„ä»¶ï¼šç»Ÿè®¡æ•°æ® */}
      <span class="hljs-tag">&lt;<span class="hljs-name">AnalyticsSummary</span> /&gt;</span>
      
      {/* ç²¾ç¡®çš„å®¢æˆ·ç«¯è¾¹ç•Œï¼šäº¤äº’å¼å›¾è¡¨ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"interactive-section"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">RealTimeChart</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">FilterControls</span> /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  )
}
</code></pre>
<h4 data-id="heading-11">2. æ•°æ®ä¼ é€’æ¨¡å¼</h4>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// âœ… æ¨¡å¼ï¼šæœåŠ¡ç«¯è·å–æ•°æ®ï¼Œä¼ é€’ç»™å®¢æˆ·ç«¯</span>
<span class="hljs-comment">// Server Component</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Dashboard</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> initialData = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchDashboardData</span>()
  
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">InteractiveDashboard</span> <span class="hljs-attr">initialData</span>=<span class="hljs-string">{initialData}</span> /&gt;</span></span>
}

<span class="hljs-comment">// Client Component</span>
<span class="hljs-string">'use client'</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">InteractiveDashboard</span>(<span class="hljs-params">{ initialData }</span>) {
  <span class="hljs-keyword">const</span> [data, setData] = <span class="hljs-title function_">useState</span>(initialData)
  
  <span class="hljs-comment">// å®¢æˆ·ç«¯æ›´æ–°æ•°æ®</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">refreshData</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-keyword">const</span> newData = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'/api/dashboard'</span>)
    <span class="hljs-title function_">setData</span>(newData)
  }
  
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">DashboardUI</span> <span class="hljs-attr">data</span>=<span class="hljs-string">{data}</span> /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{refreshData}</span>&gt;</span>åˆ·æ–°<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/&gt;</span></span>
  )
}
</code></pre>
<h4 data-id="heading-12">3. æ€§èƒ½ä¼˜åŒ–ç­–ç•¥</h4>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// ç­–ç•¥ï¼šä»£ç åˆ†å‰² + æ‡’åŠ è½½å®¢æˆ·ç«¯ç»„ä»¶</span>
<span class="hljs-keyword">import</span> dynamic <span class="hljs-keyword">from</span> <span class="hljs-string">'next/dynamic'</span>

<span class="hljs-comment">// é‡äº¤äº’ç»„ä»¶åŠ¨æ€å¯¼å…¥</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">HeavyChart</span> = <span class="hljs-title function_">dynamic</span>(
  <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'@/components/HeavyChart'</span>),
  { 
    <span class="hljs-attr">ssr</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">// ä¸åœ¨æœåŠ¡ç«¯æ¸²æŸ“</span>
    <span class="hljs-attr">loading</span>: <span class="hljs-function">() =&gt;</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ChartSkeleton</span> /&gt;</span></span> 
  }
)

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">AnalyticsPage</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>æ•°æ®åˆ†æ<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
      {/* è¿™ä¸ªç»„ä»¶åªåœ¨å®¢æˆ·ç«¯åŠ è½½ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">HeavyChart</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  )
}
</code></pre>
<h3 data-id="heading-13">ğŸš¨ å¸¸è§é™·é˜±ä¸è§£å†³æ–¹æ¡ˆ</h3>
<h4 data-id="heading-14">é™·é˜±1ï¼šåœ¨Server Componentä¸­ä½¿ç”¨å®¢æˆ·ç«¯ç‰¹æ€§</h4>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// âŒ é”™è¯¯ï¼šåœ¨æœåŠ¡ç«¯ç»„ä»¶ä¸­ä½¿ç”¨useState</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">ServerComponent</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [count, setCount] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>) <span class="hljs-comment">// ç¼–è¯‘é”™è¯¯ï¼</span>
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{count}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
}

<span class="hljs-comment">// âœ… è§£å†³æ–¹æ¡ˆï¼šæå–ä¸ºå®¢æˆ·ç«¯ç»„ä»¶</span>
<span class="hljs-string">'use client'</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">Counter</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [count, setCount] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>)
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{count}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Page</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Counter</span> /&gt;</span></span>
}
</code></pre>
<h4 data-id="heading-15">é™·é˜±2ï¼šä¸å¿…è¦çš„å®¢æˆ·ç«¯è¾¹ç•Œ</h4>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// âŒ ä¸å¿…è¦çš„å®¢æˆ·ç«¯æ ‡è®°</span>
<span class="hljs-string">'use client'</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Page</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// è¿™ä¸ªç»„ä»¶æ²¡æœ‰ä»»ä½•äº¤äº’ï¼Œå´æ ‡è®°ä¸ºå®¢æˆ·ç«¯ï¼</span>
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>é™æ€å†…å®¹<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
}

<span class="hljs-comment">// âœ… ä¿æŒä¸ºæœåŠ¡ç«¯ç»„ä»¶</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Page</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>é™æ€å†…å®¹<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
}
</code></pre>
<h4 data-id="heading-16">é™·é˜±3ï¼šè¿‡åº¦åµŒå¥—å¯¼è‡´çš„åºåˆ—åŒ–é—®é¢˜</h4>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// âŒ ä¼ é€’æ— æ³•åºåˆ—åŒ–çš„æ•°æ®</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Page</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchData</span>()
  <span class="hljs-comment">// å‡½æ•°ã€Dateå¯¹è±¡ç­‰æ— æ³•åºåˆ—åŒ–</span>
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ClientComponent</span> <span class="hljs-attr">data</span>=<span class="hljs-string">{data}</span> <span class="hljs-attr">callback</span>=<span class="hljs-string">{()</span> =&gt;</span> {}} /&gt;</span>
}

<span class="hljs-comment">// âœ… ä»…ä¼ é€’å¯åºåˆ—åŒ–æ•°æ®</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Page</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchData</span>()
  <span class="hljs-comment">// æ¸…ç†æ•°æ®ï¼Œç¡®ä¿å¯åºåˆ—åŒ–</span>
  <span class="hljs-keyword">const</span> serializableData = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(data))
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ClientComponent</span> <span class="hljs-attr">data</span>=<span class="hljs-string">{serializableData}</span> /&gt;</span></span>
}
</code></pre>
<h3 data-id="heading-17">ğŸ“ˆ æ€§èƒ½å½±å“ï¼šçœŸå®æ•°æ®å¯¹æ¯”</h3>
<p>æ ¹æ®Vercelçš„æµ‹è¯•æ•°æ®ï¼š</p>



































<table><thead><tr><th>åœºæ™¯</th><th>çº¯å®¢æˆ·ç«¯æ¸²æŸ“</th><th>æ··åˆæ¸²æŸ“ï¼ˆæ¨èï¼‰</th><th>çº¯æœåŠ¡ç«¯ç»„ä»¶</th></tr></thead><tbody><tr><td><strong>é¦–å±åŠ è½½æ—¶é—´</strong></td><td>2.8s</td><td>1.2s â­</td><td>1.0s</td></tr><tr><td><strong>å¯äº¤äº’æ—¶é—´</strong></td><td>2.8s</td><td>1.4s â­</td><td>N/A</td></tr><tr><td><strong>Bundleå¤§å°</strong></td><td>245KB</td><td>78KB â­</td><td>12KB</td></tr><tr><td><strong>SEOå‹å¥½åº¦</strong></td><td>ä¸­</td><td>é«˜ â­</td><td>é«˜</td></tr></tbody></table>
<p><strong>ç»“è®º</strong>ï¼šæ··åˆæ–¹æ¡ˆåœ¨ç»å¤§å¤šæ•°åœºæ™¯ä¸‹æ˜¯æœ€ä½³é€‰æ‹©ï¼</p>
<h3 data-id="heading-18">ğŸ”® æœªæ¥è¶‹åŠ¿</h3>
<ol>
<li><strong>Partial Prerenderingï¼ˆéƒ¨åˆ†é¢„æ¸²æŸ“ï¼‰</strong>ï¼šNext.js 14+ çš„æ–°ç‰¹æ€§ï¼Œè‡ªåŠ¨æ··åˆé™æ€å’ŒåŠ¨æ€å†…å®¹</li>
<li><strong>Server Actions</strong>ï¼šæ›´æ·±åº¦é›†æˆæœåŠ¡ç«¯é€»è¾‘</li>
<li><strong>Edge Runtimeä¼˜åŒ–</strong>ï¼šç»„ä»¶çº§åˆ«çš„è¾¹ç¼˜è®¡ç®—éƒ¨ç½²</li>
</ol>
<h3 data-id="heading-19">ğŸ“ æ€»ç»“ï¼šå†³ç­–æµç¨‹å›¾</h3>
<p>è¿™é‡Œç»™ä½ ä¸€ä¸ªå¿«é€Ÿå†³ç­–æµç¨‹å›¾ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">å¼€å§‹
  â†“
ç»„ä»¶éœ€è¦äº¤äº’å—ï¼Ÿ
  â†“
æ˜¯ â†’ éœ€è¦æµè§ˆå™¨APIå—ï¼Ÿ â†’ æ˜¯ â†’ <span class="hljs-built_in">Client</span> Component âœ…
  â†“                â†“
å¦               å¦ â†’ æœ‰çŠ¶æ€å—ï¼Ÿ â†’ æ˜¯ â†’ <span class="hljs-built_in">Client</span> Component âœ…
  â†“                â†“           â†“
<span class="hljs-built_in">Server</span> Component â† å¦ â† å¦ â† ä»…å±•ç¤ºæ•°æ®ï¼Ÿ
  â†“
éœ€è¦è€ƒè™‘Bundleå¤§å°å—ï¼Ÿ â†’ æ˜¯ â†’ <span class="hljs-built_in">Server</span> Component âœ…
  â†“
å¦
â†“
<span class="hljs-built_in">Client</span> Component âœ…
</code></pre>
<h3 data-id="heading-20">ğŸ’¬ äº’åŠ¨è®¨è®º</h3>
<p><strong>è¯é¢˜è®¨è®º</strong>ï¼š</p>
<ol>
<li>ä½ åœ¨é¡¹ç›®ä¸­æœ€å¤§çš„ Server/Client Component æŒ‘æˆ˜æ˜¯ä»€ä¹ˆï¼Ÿ</li>
<li>æœ‰æ²¡æœ‰é‡åˆ°æ€§èƒ½å¤§å¹…æå‡çš„æˆåŠŸæ¡ˆä¾‹ï¼Ÿ</li>
<li>ä½ å¦‚ä½•å‘å›¢é˜Ÿæˆå‘˜è§£é‡Šè¿™ä¸¤ç§ç»„ä»¶çš„åŒºåˆ«ï¼Ÿ</li>
</ol>
<p>æ¬¢è¿åœ¨è¯„è®ºåŒºåˆ†äº«ä½ çš„ç»éªŒå’Œè§è§£ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€èŠ‚ç‚¹ã€‘[NormalVectorèŠ‚ç‚¹]åŸç†è§£æä¸å®é™…åº”ç”¨]]></title>    <link>https://juejin.cn/post/7598801700051107878</link>    <guid>https://juejin.cn/post/7598801700051107878</guid>    <pubDate>2026-01-25T10:03:42.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7598801700051107878" data-draft-id="7598801700051091494" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€èŠ‚ç‚¹ã€‘[NormalVectorèŠ‚ç‚¹]åŸç†è§£æä¸å®é™…åº”ç”¨"/> <meta itemprop="keywords" content="æ¸¸æˆå¼€å‘,Unity3D,å›¾å½¢å­¦"/> <meta itemprop="datePublished" content="2026-01-25T10:03:42.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="SmalBox"/> <meta itemprop="url" content="https://juejin.cn/user/2218166695237532"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€èŠ‚ç‚¹ã€‘[NormalVectorèŠ‚ç‚¹]åŸç†è§£æä¸å®é™…åº”ç”¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2218166695237532/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    SmalBox
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-25T10:03:42.000Z" title="Sun Jan 25 2026 10:03:42 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2Fchenghai37%2Fcategory_13074589.html%3Ffromshare%3Dblogcolumn%26sharetype%3Dblogcolumn%26sharerId%3D13074589%26sharerefer%3DPC%26sharesource%3Dchenghai37%26sharefrom%3Dfrom_link" target="_blank" title="https://blog.csdn.net/chenghai37/category_13074589.html?fromshare=blogcolumn&amp;sharetype=blogcolumn&amp;sharerId=13074589&amp;sharerefer=PC&amp;sharesource=chenghai37&amp;sharefrom=from_link" ref="nofollow noopener noreferrer">ã€Unity Shader Graph ä½¿ç”¨ä¸ç‰¹æ•ˆå®ç°ã€‘</a><strong>ä¸“æ -ç›´è¾¾</strong></p>
</blockquote>
<p>åœ¨Unityçš„Shader Graphä¸­ï¼ŒNormalVectorèŠ‚ç‚¹æ˜¯ä¸€ä¸ªåŸºç¡€ä¸”é‡è¦çš„å·¥å…·ï¼Œå®ƒå…è®¸ç€è‰²å™¨è®¿é—®ç½‘æ ¼çš„æ³•çº¿çŸ¢é‡ä¿¡æ¯ã€‚æ³•çº¿çŸ¢é‡åœ¨è®¡ç®—æœºå›¾å½¢å­¦ä¸­æ‰®æ¼”ç€å…³é”®è§’è‰²ï¼Œå®ƒå®šä¹‰äº†è¡¨é¢çš„æœå‘ï¼Œæ˜¯å…‰ç…§è®¡ç®—ã€æè´¨è¡¨ç°å’Œå„ç§è§†è§‰æ•ˆæœçš„åŸºç¡€ã€‚</p>
<h2 data-id="heading-0">èŠ‚ç‚¹æ¦‚è¿°</h2>
<p>NormalVectorèŠ‚ç‚¹ä¸ºç€è‰²å™¨ç¼–å†™è€…æä¾›äº†è·å–ç½‘æ ¼æ³•çº¿æ•°æ®çš„ä¾¿æ·é€”å¾„ã€‚æ— è®ºæ˜¯é¡¶ç‚¹æ³•çº¿è¿˜æ˜¯ç‰‡å…ƒæ³•çº¿ï¼Œè¿™ä¸ªèŠ‚ç‚¹éƒ½èƒ½è®©å¼€å‘è€…è½»æ¾åœ°åœ¨ä¸åŒçš„åæ ‡ç©ºé—´ä¸­æ“ä½œè¿™äº›æ•°æ®ã€‚é€šè¿‡ç®€å•çš„å‚æ•°è®¾ç½®ï¼Œå°±å¯ä»¥å°†æ³•çº¿çŸ¢é‡è½¬æ¢åˆ°æ‰€éœ€çš„åæ ‡ç©ºé—´ï¼Œå¤§å¤§ç®€åŒ–äº†å¤æ‚ç€è‰²å™¨çš„å¼€å‘è¿‡ç¨‹ã€‚</p>
<p>æ³•çº¿çŸ¢é‡çš„æœ¬è´¨æ˜¯å‚ç›´äºè¡¨é¢çš„å•ä½å‘é‡ï¼Œåœ¨ä¸‰ç»´ç©ºé—´ä¸­è¡¨ç¤ºä¸º(x, y, z)åæ ‡ã€‚åœ¨Shader Graphä¸­ï¼Œè¿™äº›æ•°æ®é€šå¸¸æ¥è‡ª3Dæ¨¡å‹çš„é¡¶ç‚¹æ•°æ®ï¼Œæˆ–è€…é€šè¿‡æ³•çº¿è´´å›¾ç­‰æŠ€æœ¯è¿›è¡Œä¿®æ”¹å’Œå¢å¼ºã€‚</p>
<h2 data-id="heading-1">å‚æ•°è¯¦è§£</h2>
<h3 data-id="heading-2">Spaceå‚æ•°</h3>
<p>Spaceå‚æ•°å†³å®šäº†æ³•çº¿çŸ¢é‡è¾“å‡ºçš„åæ ‡ç©ºé—´ï¼Œè¿™æ˜¯NormalVectorèŠ‚ç‚¹æœ€æ ¸å¿ƒçš„åŠŸèƒ½ã€‚ä¸åŒçš„åæ ‡ç©ºé—´é€‚ç”¨äºä¸åŒçš„ç€è‰²åœºæ™¯å’Œè®¡ç®—éœ€æ±‚ã€‚</p>
<ul>
<li><strong>Objectç©ºé—´</strong>ï¼šä¹Ÿç§°ä¸ºæ¨¡å‹ç©ºé—´ï¼Œè¿™æ˜¯æ³•çº¿æ•°æ®æœ€åŸå§‹çš„å­˜å‚¨ç©ºé—´ã€‚åœ¨Objectç©ºé—´ä¸­ï¼Œæ³•çº¿ç›¸å¯¹äºæ¨¡å‹æœ¬èº«çš„åæ ‡ç³»å®šä¹‰ï¼Œä¸è€ƒè™‘æ¨¡å‹çš„æ—‹è½¬ã€ç¼©æ”¾æˆ–å¹³ç§»å˜æ¢ã€‚å½“æ¨¡å‹å‘ç”Ÿå˜æ¢æ—¶ï¼ŒObjectç©ºé—´ä¸­çš„æ³•çº¿ä¸ä¼šè‡ªåŠ¨æ›´æ–°ï¼Œéœ€è¦æ‰‹åŠ¨è¿›è¡Œç›¸åº”çš„å˜æ¢è®¡ç®—ã€‚</li>
<li><strong>Viewç©ºé—´</strong>ï¼šä¹Ÿç§°ä¸ºç›¸æœºç©ºé—´æˆ–çœ¼ç›ç©ºé—´ï¼Œåœ¨è¿™ä¸ªç©ºé—´ä¸­ï¼Œæ‰€æœ‰åæ ‡éƒ½æ˜¯ç›¸å¯¹äºç›¸æœºçš„ä½ç½®å’Œæ–¹å‘å®šä¹‰çš„ã€‚Viewç©ºé—´çš„åŸç‚¹é€šå¸¸æ˜¯ç›¸æœºçš„ä½ç½®ï¼ŒZè½´æŒ‡å‘ç›¸æœºçš„è§‚å¯Ÿæ–¹å‘ã€‚è¿™ä¸ªç©ºé—´ç‰¹åˆ«é€‚åˆä¸è§†è§’ç›¸å…³çš„æ•ˆæœï¼Œå¦‚è¾¹ç¼˜å…‰ã€åå°„å’ŒæŠ˜å°„ã€‚</li>
<li><strong>Worldç©ºé—´</strong>ï¼šWorldç©ºé—´ä¸­çš„åæ ‡æ˜¯ç›¸å¯¹äºåœºæ™¯çš„ä¸–ç•Œåæ ‡ç³»å®šä¹‰çš„ã€‚æ— è®ºæ¨¡å‹å¦‚ä½•ç§»åŠ¨æˆ–æ—‹è½¬ï¼ŒWorldç©ºé—´æä¾›äº†ç»Ÿä¸€çš„å‚è€ƒæ¡†æ¶ã€‚è¿™ä¸ªç©ºé—´å¸¸ç”¨äºå…‰ç…§è®¡ç®—ã€é˜´å½±ç”Ÿæˆå’Œå…¨å±€æ•ˆæœã€‚</li>
<li><strong>Tangentç©ºé—´</strong>ï¼šè¿™æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å±€éƒ¨ç©ºé—´ï¼Œä¸»è¦ç”¨äºæ³•çº¿è´´å›¾ã€‚åœ¨Tangentç©ºé—´ä¸­ï¼Œæ³•çº¿æ˜¯ç›¸å¯¹äºè¡¨é¢æœ¬èº«å®šä¹‰çš„ï¼ŒZè½´ä¸è¡¨é¢æ³•çº¿å¯¹é½ï¼ŒXè½´ä¸åˆ‡å‘é‡å¯¹é½ï¼ŒYè½´ä¸å‰¯æ³•çº¿å¯¹é½ã€‚è¿™ç§è¡¨ç¤ºæ–¹æ³•ä½¿å¾—æ³•çº¿è´´å›¾å¯ä»¥åœ¨ä¸åŒæœå‘çš„è¡¨é¢ä¸Šé‡å¤ä½¿ç”¨ã€‚</li>
</ul>
<p>é€‰æ‹©æ­£ç¡®çš„åæ ‡ç©ºé—´å¯¹ç€è‰²å™¨çš„æ­£ç¡®æ€§å’Œæ€§èƒ½è‡³å…³é‡è¦ã€‚é”™è¯¯çš„ç©ºé—´é€‰æ‹©å¯èƒ½å¯¼è‡´å…‰ç…§è®¡ç®—é”™è¯¯ã€è§†è§‰æ•ˆæœå¼‚å¸¸æˆ–æ€§èƒ½ä¸‹é™ã€‚</p>
<h2 data-id="heading-3">ç«¯å£ä¿¡æ¯</h2>
<p><img src="https://docs.unity.cn/cn/Packages-cn/com.unity.shadergraph@14.0/manual/images/NormalVectorNodeThumb.png" alt="" loading="lazy"/></p>
<p>NormalVectorèŠ‚ç‚¹åªæœ‰ä¸€ä¸ªè¾“å‡ºç«¯å£ï¼š</p>
<ul>
<li><strong>Out</strong>ï¼šè¾“å‡ºç±»å‹ä¸ºVector 3ï¼Œè¡¨ç¤ºä¸‰ç»´çŸ¢é‡ã€‚è¿™ä¸ªç«¯å£è¾“å‡ºçš„æ˜¯æ ¹æ®Spaceå‚æ•°é€‰æ‹©åœ¨å¯¹åº”åæ ‡ç©ºé—´ä¸­çš„æ³•çº¿çŸ¢é‡ã€‚è¾“å‡ºå€¼é€šå¸¸æ˜¯å½’ä¸€åŒ–çš„å•ä½çŸ¢é‡ï¼Œä½†åœ¨æŸäº›æƒ…å†µä¸‹ï¼ˆå¦‚ä½¿ç”¨éç»Ÿä¸€ç¼©æ”¾æ—¶ï¼‰å¯èƒ½éœ€è¦é‡æ–°å½’ä¸€åŒ–ã€‚</li>
</ul>
<h2 data-id="heading-4">ä½¿ç”¨åœºæ™¯ä¸ç¤ºä¾‹</h2>
<h3 data-id="heading-5">åŸºç¡€å…‰ç…§è®¡ç®—</h3>
<p>æ³•çº¿çŸ¢é‡çš„ä¸€ä¸ªä¸»è¦åº”ç”¨æ˜¯å…‰ç…§è®¡ç®—ã€‚åœ¨Lambertå…‰ç…§æ¨¡å‹ä¸­ï¼Œè¡¨é¢äº®åº¦å–å†³äºå…‰çº¿æ–¹å‘ä¸è¡¨é¢æ³•çº¿ä¹‹é—´çš„å¤¹è§’ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">HLSL

// ç®€åŒ–çš„Lambertå…‰ç…§è®¡ç®—
float3 <span class="hljs-attr">lightDir</span> = normalize(_WorldSpaceLightPos0.xyz)<span class="hljs-comment">;</span>
float3 <span class="hljs-attr">worldNormal</span> = NormalVectorèŠ‚ç‚¹è¾“å‡ºï¼ˆWorldç©ºé—´ï¼‰<span class="hljs-comment">;</span>
float <span class="hljs-attr">NdotL</span> = max(<span class="hljs-number">0</span>, dot(worldNormal, lightDir))<span class="hljs-comment">;</span>
float3 <span class="hljs-attr">diffuse</span> = _LightColor0 * NdotL<span class="hljs-comment">;</span>
</code></pre>
<p>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆè·å–ä¸–ç•Œç©ºé—´ä¸­çš„æ³•çº¿çŸ¢é‡å’Œå…‰çº¿æ–¹å‘ï¼Œç„¶åè®¡ç®—å®ƒä»¬çš„ç‚¹ç§¯ã€‚ç‚¹ç§¯ç»“æœå†³å®šäº†è¡¨é¢æ¥æ”¶åˆ°çš„å…‰ç…§å¼ºåº¦ï¼Œè¿™æ˜¯å¤§å¤šæ•°åŸºç¡€å…‰ç…§æ¨¡å‹çš„æ ¸å¿ƒè®¡ç®—ã€‚</p>
<h3 data-id="heading-6">æ³•çº¿è´´å›¾åº”ç”¨</h3>
<p>æ³•çº¿è´´å›¾æ˜¯ç°ä»£å®æ—¶æ¸²æŸ“ä¸­å¢å¼ºè¡¨é¢ç»†èŠ‚çš„å…³é”®æŠ€æœ¯ã€‚NormalVectorèŠ‚ç‚¹åœ¨åº”ç”¨æ³•çº¿è´´å›¾æ—¶èµ·ç€æ¡¥æ¢ä½œç”¨ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">HLSL

// æ³•çº¿è´´å›¾åº”ç”¨æµç¨‹
float3 <span class="hljs-attr">tangentNormal</span> = tex2D(_NormalMap, uv).xyz * <span class="hljs-number">2</span> - <span class="hljs-number">1</span><span class="hljs-comment">; // ä»[0,1]è½¬æ¢åˆ°[-1,1]</span>
float3 <span class="hljs-attr">worldNormal</span> = NormalVectorèŠ‚ç‚¹è¾“å‡ºï¼ˆWorldç©ºé—´ï¼‰<span class="hljs-comment">;</span>
// ä½¿ç”¨TBNçŸ©é˜µå°†åˆ‡çº¿ç©ºé—´æ³•çº¿è½¬æ¢åˆ°ä¸–ç•Œç©ºé—´
float3x3 <span class="hljs-attr">TBN</span> = float3x3(
    IN.tangent.xyz,
    cross(IN.normal, IN.tangent.xyz) * IN.tangent.w,
    IN.normal
)<span class="hljs-comment">;</span>
float3 <span class="hljs-attr">mappedNormal</span> = mul(TBN, tangentNormal)<span class="hljs-comment">;</span>
</code></pre>
<p>è¿™ä¸ªç¤ºä¾‹å±•ç¤ºäº†å¦‚ä½•å°†åˆ‡çº¿ç©ºé—´ä¸­çš„æ³•çº¿è´´å›¾æ•°æ®è½¬æ¢åˆ°ä¸–ç•Œç©ºé—´ã€‚é¦–å…ˆä»æ³•çº¿è´´å›¾ä¸­é‡‡æ ·å¹¶è°ƒæ•´æ•°å€¼èŒƒå›´ï¼Œç„¶åä½¿ç”¨TBNï¼ˆåˆ‡çº¿-å‰¯åˆ‡çº¿-æ³•çº¿ï¼‰çŸ©é˜µè¿›è¡Œç©ºé—´è½¬æ¢ã€‚</p>
<h3 data-id="heading-7">è¾¹ç¼˜æ£€æµ‹ä¸è½®å»“å…‰</h3>
<p>åˆ©ç”¨Viewç©ºé—´ä¸­çš„æ³•çº¿å¯ä»¥åˆ›å»ºå„ç§ä¸è§†è§’ç›¸å…³çš„æ•ˆæœï¼Œå¦‚è¾¹ç¼˜å…‰å’Œè½®å»“æ£€æµ‹ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">HLSL

// è¾¹ç¼˜å…‰æ•ˆæœ
float3 <span class="hljs-attr">viewNormal</span> = normalize(mul((float3x3)UNITY_MATRIX_V, NormalVectorèŠ‚ç‚¹è¾“å‡ºï¼ˆWorldç©ºé—´ï¼‰))<span class="hljs-comment">;</span>
float3 <span class="hljs-attr">viewDir</span> = normalize(UnityWorldToViewPos(IN.worldPos))<span class="hljs-comment">;</span>
float <span class="hljs-attr">rim</span> = <span class="hljs-number">1</span> - abs(dot(viewNormal, viewDir))<span class="hljs-comment">;</span>
float <span class="hljs-attr">rimLight</span> = pow(rim, _RimPower) * _RimIntensity<span class="hljs-comment">;</span>
</code></pre>
<p>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆå°†ä¸–ç•Œç©ºé—´æ³•çº¿è½¬æ¢åˆ°Viewç©ºé—´ï¼Œç„¶åè®¡ç®—æ³•çº¿ä¸è§†è§’æ–¹å‘çš„ç‚¹ç§¯ã€‚å½“è¡¨é¢å‡ ä¹å‚ç›´äºè§†è§’æ–¹å‘æ—¶ï¼ˆå³è¾¹ç¼˜å¤„ï¼‰ï¼Œç‚¹ç§¯æ¥è¿‘0ï¼Œä»è€Œäº§ç”Ÿè¾¹ç¼˜å…‰æ•ˆæœã€‚</p>
<h3 data-id="heading-8">ç¯å¢ƒé®æŒ¡ä¸å…¨å±€å…‰ç…§</h3>
<p>æ³•çº¿ä¿¡æ¯å¯¹äºç¯å¢ƒé®æŒ¡å’Œå…¨å±€å…‰ç…§è®¡ç®—ä¹Ÿè‡³å…³é‡è¦ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">HLSL

// ç®€åŒ–çš„ç¯å¢ƒé®æŒ¡
float3 <span class="hljs-attr">worldNormal</span> = NormalVectorèŠ‚ç‚¹è¾“å‡ºï¼ˆWorldç©ºé—´ï¼‰<span class="hljs-comment">;</span>
float <span class="hljs-attr">ambientOcclusion</span> = <span class="hljs-number">1.0</span><span class="hljs-comment">;</span>

// åŸºäºæ³•çº¿æ–¹å‘çš„ç®€å•ç¯å¢ƒå…‰é®è”½
// è¿™é‡Œå¯ä»¥ä½¿ç”¨æ›´å¤æ‚çš„ç®—æ³•ï¼Œå¦‚SSAOæˆ–çƒ˜ç„™çš„AOè´´å›¾
ambientOcclusion *= (worldNormal.y * 0.5 + 0.5)<span class="hljs-comment">; // æ¨¡æ‹Ÿé¡¶éƒ¨å…‰ç…§æ›´å¤š</span>

// åº”ç”¨ç¯å¢ƒå…‰
float3 <span class="hljs-attr">ambient</span> = UNITY_LIGHTMODEL_AMBIENT * ambientOcclusion<span class="hljs-comment">;</span>
</code></pre>
<p>è¿™ä¸ªç®€å•çš„ç¤ºä¾‹å±•ç¤ºäº†å¦‚ä½•ç”¨æ³•çº¿æ–¹å‘æ¥æ¨¡æ‹Ÿç¯å¢ƒå…‰é®è”½æ•ˆæœã€‚åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œé€šå¸¸ä¼šç»“åˆæ›´å¤æ‚çš„ç®—æ³•æˆ–é¢„è®¡ç®—çš„æ•°æ®ã€‚</p>
<h2 data-id="heading-9">é«˜çº§åº”ç”¨æŠ€å·§</h2>
<h3 data-id="heading-10">æ³•çº¿é‡å®šå‘ä¸æ··åˆ</h3>
<p>åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œéœ€è¦å°†æ³•çº¿ä»ä¸€ä¸ªè¡¨é¢é‡å®šå‘åˆ°å¦ä¸€ä¸ªè¡¨é¢ï¼Œæˆ–è€…åœ¨ä¸åŒæ³•çº¿æºä¹‹é—´è¿›è¡Œæ··åˆã€‚</p>
<pre><code class="hljs language-ini" lang="ini">HLSL

// æ³•çº¿æ··åˆç¤ºä¾‹
float3 <span class="hljs-attr">normalA</span> = tex2D(_NormalMapA, uv).xyz<span class="hljs-comment">;</span>
float3 <span class="hljs-attr">normalB</span> = tex2D(_NormalMapB, uv).xyz<span class="hljs-comment">;</span>
float <span class="hljs-attr">blendFactor</span> = _BlendFactor<span class="hljs-comment">;</span>

// ä½¿ç”¨çº¿æ€§æ’å€¼æ··åˆæ³•çº¿
float3 <span class="hljs-attr">blendedNormal</span> = lerp(normalA, normalB, blendFactor)<span class="hljs-comment">;</span>

// æˆ–è€…ä½¿ç”¨æ›´ç²¾ç¡®çš„çƒé¢çº¿æ€§æ’å€¼
// float3 <span class="hljs-attr">blendedNormal</span> = normalize(lerp(normalA, normalB, blendFactor))<span class="hljs-comment">;</span>
</code></pre>
<p>æ³•çº¿æ··åˆæ˜¯ä¸€ä¸ªå¤æ‚çš„è¯é¢˜ï¼Œå› ä¸ºç®€å•çš„çº¿æ€§æ’å€¼å¯èƒ½ä¸ä¼šä¿æŒæ³•çº¿çš„å•ä½é•¿åº¦ã€‚åœ¨å®é™…åº”ç”¨ä¸­ï¼Œå¯èƒ½éœ€è¦é‡æ–°å½’ä¸€åŒ–æˆ–ä½¿ç”¨æ›´é«˜çº§çš„æ’å€¼æ–¹æ³•ã€‚</p>
<h3 data-id="heading-11">æ³•çº¿ç©ºé—´è½¬æ¢ä¼˜åŒ–</h3>
<p>åœ¨æ€§èƒ½å…³é”®çš„åœºæ™¯ä¸­ï¼Œæ³•çº¿ç©ºé—´è½¬æ¢å¯èƒ½éœ€è¦ä¼˜åŒ–ã€‚</p>
<pre><code class="hljs language-scss" lang="scss">HLSL

<span class="hljs-comment">// ä¼˜åŒ–çš„ä¸–ç•Œç©ºé—´æ³•çº¿è®¡ç®—</span>
<span class="hljs-comment">// ä¼ ç»Ÿæ–¹æ³•</span>
float3 worldNormal = <span class="hljs-built_in">normalize</span>(mul(IN.normal, (float3x3)unity_WorldToObject));

<span class="hljs-comment">// ä¼˜åŒ–æ–¹æ³• - ä½¿ç”¨é€†è½¬ç½®çŸ©é˜µï¼ˆå¤„ç†éç»Ÿä¸€ç¼©æ”¾ï¼‰</span>
float3 worldNormal = <span class="hljs-built_in">normalize</span>(mul(transpose((float3x3)unity_WorldToObject), IN<span class="hljs-selector-class">.normal</span>));
</code></pre>
<p>å½“æ¨¡å‹åº”ç”¨äº†éç»Ÿä¸€ç¼©æ”¾æ—¶ï¼Œç›´æ¥ä½¿ç”¨æ¨¡å‹çŸ©é˜µå˜æ¢æ³•çº¿ä¼šå¯¼è‡´é”™è¯¯çš„ç»“æœã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œéœ€è¦ä½¿ç”¨æ¨¡å‹çŸ©é˜µçš„é€†è½¬ç½®çŸ©é˜µæ¥æ­£ç¡®å˜æ¢æ³•çº¿ã€‚</p>
<h3 data-id="heading-12">æ³•çº¿å¯è§†åŒ–ä¸è°ƒè¯•</h3>
<p>åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œå¯è§†åŒ–æ³•çº¿çŸ¢é‡å¯¹äºè°ƒè¯•ç€è‰²å™¨éå¸¸æœ‰ç”¨ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">HLSL

// æ³•çº¿å¯è§†åŒ–
float3 <span class="hljs-attr">worldNormal</span> = NormalVectorèŠ‚ç‚¹è¾“å‡ºï¼ˆWorldç©ºé—´ï¼‰<span class="hljs-comment">;</span>
// å°†æ³•çº¿ä»<span class="hljs-section">[-1,1]</span>èŒƒå›´æ˜ å°„åˆ°<span class="hljs-section">[0,1]</span>èŒƒå›´ä»¥ä¾¿å¯è§†åŒ–
float3 <span class="hljs-attr">normalColor</span> = worldNormal * <span class="hljs-number">0.5</span> + <span class="hljs-number">0.5</span><span class="hljs-comment">;</span>
return float4(normalColor, 1.0)<span class="hljs-comment">;</span>
</code></pre>
<p>è¿™ä¸ªç®€å•çš„ç€è‰²å™¨å°†æ³•çº¿çŸ¢é‡çš„å„ä¸ªåˆ†é‡æ˜ å°„åˆ°é¢œè‰²é€šé“ï¼Œä»è€Œå¯ä»¥ç›´è§‚åœ°æŸ¥çœ‹æ³•çº¿çš„æ–¹å‘å’Œåˆ†å¸ƒã€‚</p>
<h2 data-id="heading-13">å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ</h2>
<h3 data-id="heading-14">æ³•çº¿ä¸è¿ç»­é—®é¢˜</h3>
<p>å½“ä½¿ç”¨ä½å¤šè¾¹å½¢æ¨¡å‹æˆ–ä¸å½“çš„UVå±•å¼€æ—¶ï¼Œå¯èƒ½ä¼šé‡åˆ°æ³•çº¿ä¸è¿ç»­çš„é—®é¢˜ã€‚</p>
<ul>
<li><strong>é—®é¢˜è¡¨ç°</strong>ï¼šè¡¨é¢å‡ºç°ä¸è‡ªç„¶çš„ç¡¬è¾¹æˆ–æ¥ç¼</li>
<li><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š
<ul>
<li>ç¡®ä¿æ¨¡å‹æœ‰é€‚å½“çš„å¹³æ»‘ç»„è®¾ç½®</li>
<li>æ£€æŸ¥UVå±•å¼€æ˜¯å¦å¯¼è‡´æ³•çº¿è´´å›¾é‡‡æ ·é”™è¯¯</li>
<li>è€ƒè™‘ä½¿ç”¨æ›´é«˜ç²¾åº¦çš„æ¨¡å‹æˆ–ç»†åˆ†è¡¨é¢</li>
</ul>
</li>
</ul>
<h3 data-id="heading-15">æ€§èƒ½è€ƒé‡</h3>
<p>æ³•çº¿è®¡ç®—å¯èƒ½ä¼šæˆä¸ºæ€§èƒ½ç“¶é¢ˆï¼Œç‰¹åˆ«æ˜¯åœ¨ç§»åŠ¨è®¾å¤‡æˆ–å¤æ‚åœºæ™¯ä¸­ã€‚</p>
<ul>
<li><strong>ä¼˜åŒ–ç­–ç•¥</strong>ï¼š
<ul>
<li>åœ¨é¡¶ç‚¹ç€è‰²å™¨ä¸­è®¡ç®—æ³•çº¿ï¼Œè€Œä¸æ˜¯ç‰‡å…ƒç€è‰²å™¨</li>
<li>ä½¿ç”¨æ›´ç®€å•çš„æ³•çº¿è®¡ç®—ï¼Œå¦‚çœç•¥å½’ä¸€åŒ–æ­¥éª¤ï¼ˆå¦‚æœå¯¹è§†è§‰æ•ˆæœå½±å“ä¸å¤§ï¼‰</li>
<li>è€ƒè™‘ä½¿ç”¨æ³•çº¿è´´å›¾çš„å‹ç¼©æ ¼å¼ä»¥å‡å°‘å†…å­˜å¸¦å®½</li>
</ul>
</li>
</ul>
<h3 data-id="heading-16">æ³•çº¿ç²¾åº¦é—®é¢˜</h3>
<p>åœ¨ç‰¹å®šæƒ…å†µä¸‹ï¼Œæ³•çº¿è®¡ç®—å¯èƒ½ä¼šé‡åˆ°ç²¾åº¦é—®é¢˜ï¼Œå¯¼è‡´è§†è§‰ç‘•ç–µã€‚</p>
<ul>
<li><strong>é—®é¢˜è¡¨ç°</strong>ï¼šé—ªçƒçš„è¡¨é¢ã€å¸¦çŠ¶ä¼ªå½±æˆ–ä¸å‡†ç¡®çš„å…‰ç…§</li>
<li><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š
<ul>
<li>ä½¿ç”¨æ›´é«˜ç²¾åº¦çš„æ•°æ®ç±»å‹ï¼ˆå¦‚halfæ”¹ä¸ºfloatï¼‰</li>
<li>ç¡®ä¿æ³•çº¿è´´å›¾ä½¿ç”¨é€‚å½“çš„æ ¼å¼å’Œå‹ç¼©</li>
<li>æ£€æŸ¥æ³•çº¿å˜æ¢çŸ©é˜µçš„ç²¾åº¦å’Œæ­£ç¡®æ€§</li>
</ul>
</li>
</ul>
<h2 data-id="heading-17">ä¸å…¶ä»–èŠ‚ç‚¹çš„é…åˆä½¿ç”¨</h2>
<p>NormalVectorèŠ‚ç‚¹å¾ˆå°‘å•ç‹¬ä½¿ç”¨ï¼Œé€šå¸¸ä¸å…¶ä»–Shader GraphèŠ‚ç‚¹ç»“åˆä»¥å®ç°å¤æ‚çš„æ•ˆæœã€‚</p>
<ul>
<li><strong>ä¸Dot ProductèŠ‚ç‚¹ç»“åˆ</strong>ï¼šç”¨äºè®¡ç®—å…‰ç…§å¼ºåº¦ã€è²æ¶…å°”æ•ˆåº”ç­‰</li>
<li><strong>ä¸TransformèŠ‚ç‚¹ç»“åˆ</strong>ï¼šåœ¨ä¸åŒåæ ‡ç©ºé—´ä¹‹é—´è½¬æ¢æ³•çº¿</li>
<li><strong>ä¸NormalizeèŠ‚ç‚¹ç»“åˆ</strong>ï¼šç¡®ä¿æ³•çº¿ä¿æŒå•ä½é•¿åº¦</li>
<li><strong>ä¸Sample Texture 2DèŠ‚ç‚¹ç»“åˆ</strong>ï¼šåº”ç”¨æ³•çº¿è´´å›¾</li>
<li><strong>ä¸Fresnel EffectèŠ‚ç‚¹ç»“åˆ</strong>ï¼šåˆ›å»ºåŸºäºè§†è§’çš„æ•ˆæœ</li>
</ul>
<h2 data-id="heading-18">æœ€ä½³å®è·µ</h2>
<p>ä¸ºäº†ç¡®ä¿NormalVectorèŠ‚ç‚¹çš„æ­£ç¡®ä½¿ç”¨å’Œæœ€ä½³æ€§èƒ½ï¼Œå»ºè®®éµå¾ªä»¥ä¸‹æœ€ä½³å®è·µï¼š</p>
<ul>
<li>å§‹ç»ˆè€ƒè™‘æ³•çº¿æ˜¯å¦éœ€è¦å½’ä¸€åŒ–ï¼Œç‰¹åˆ«æ˜¯åœ¨è¿›è¡Œæ•°å­¦è¿ç®—æˆ–ç©ºé—´å˜æ¢å</li>
<li>é€‰æ‹©æœ€é€‚åˆå½“å‰è®¡ç®—ä»»åŠ¡çš„åæ ‡ç©ºé—´ï¼Œé¿å…ä¸å¿…è¦çš„ç©ºé—´è½¬æ¢</li>
<li>åœ¨æ€§èƒ½æ•æ„Ÿçš„åœºæ™¯ä¸­ï¼Œå°½å¯èƒ½åœ¨é¡¶ç‚¹ç€è‰²å™¨ä¸­è®¡ç®—æ³•çº¿ç›¸å…³æ•°æ®</li>
<li>ä½¿ç”¨é€‚å½“çš„æ•°æ®ç±»å‹å¹³è¡¡ç²¾åº¦å’Œæ€§èƒ½</li>
<li>å®šæœŸéªŒè¯æ³•çº¿è®¡ç®—çš„æ­£ç¡®æ€§ï¼Œç‰¹åˆ«æ˜¯åœ¨ä½¿ç”¨å¤æ‚å˜æ¢æˆ–æ··åˆæ—¶</li>
</ul>
<hr/>
<blockquote>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2Fchenghai37%2Fcategory_13074589.html%3Ffromshare%3Dblogcolumn%26sharetype%3Dblogcolumn%26sharerId%3D13074589%26sharerefer%3DPC%26sharesource%3Dchenghai37%26sharefrom%3Dfrom_link" target="_blank" title="https://blog.csdn.net/chenghai37/category_13074589.html?fromshare=blogcolumn&amp;sharetype=blogcolumn&amp;sharerId=13074589&amp;sharerefer=PC&amp;sharesource=chenghai37&amp;sharefrom=from_link" ref="nofollow noopener noreferrer">ã€Unity Shader Graph ä½¿ç”¨ä¸ç‰¹æ•ˆå®ç°ã€‘</a><strong>ä¸“æ -ç›´è¾¾</strong>
ï¼ˆæ¬¢è¿<em>ç‚¹èµç•™è¨€</em>æ¢è®¨ï¼Œæ›´å¤šäººåŠ å…¥è¿›æ¥èƒ½æ›´åŠ å®Œå–„è¿™ä¸ªæ¢ç´¢çš„è¿‡ç¨‹ï¼ŒğŸ™ï¼‰</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Head First ä»£ç†æ¨¡å¼]]></title>    <link>https://juejin.cn/post/7598490039489822755</link>    <guid>https://juejin.cn/post/7598490039489822755</guid>    <pubDate>2026-01-25T07:50:23.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7598490039489822755" data-draft-id="7597695487302615055" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Head First ä»£ç†æ¨¡å¼"/> <meta itemprop="keywords" content="è®¾è®¡æ¨¡å¼"/> <meta itemprop="datePublished" content="2026-01-25T07:50:23.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æˆ·9381691255360"/> <meta itemprop="url" content="https://juejin.cn/user/3485906645565271"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Head First ä»£ç†æ¨¡å¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3485906645565271/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æˆ·9381691255360
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-25T07:50:23.000Z" title="Sun Jan 25 2026 07:50:23 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€å®šä¹‰</h2>
<p><strong>ä»£ç†æ¨¡å¼</strong>ï¼šä¸ºå¦ä¸€ä¸ªå¯¹è±¡æä¾›æ›¿èº«æˆ–å ä½ç¬¦ä»¥<strong>æ§åˆ¶å¯¹è¿™ä¸ªå¯¹è±¡çš„è®¿é—®</strong>ã€‚æˆ‘ä»¬ä¹Ÿå°†ä»£ç†æè¿°æˆå¦ä¸€ä¸ªå¯¹è±¡çš„â€œä»£è¡¨â€ã€‚<br/>
å®ä¾‹ä»£ç†æ¨¡å¼åˆ›å»ºâ€œä»£è¡¨å¯¹è±¡â€ï¼Œè®©â€œä»£è¡¨å¯¹è±¡â€æ§åˆ¶æŸå¯¹è±¡çš„è®¿é—®ï¼Œè¢«ä»£ç†çš„å¯¹è±¡å¯ä»¥æ˜¯è¿œç¨‹å¯¹è±¡ã€åˆ›å»ºå¼€é”€å¤§çš„å¯¹è±¡æˆ–éœ€è¦å®‰å…¨æ§åˆ¶çš„å¯¹è±¡ã€‚<br/>
ä»£ç†æ¨¡å¼çš„å˜ä½“æœ‰å¾ˆå¤šï¼Œä¸‹é¢ä¼šæåˆ°ä¸»è¦çš„ä¸‰ç§å˜ä½“ï¼šè¿œç¨‹ä»£ç†ã€è™šæ‹Ÿä»£ç†ã€åŠ¨æ€ä»£ç†ã€‚</p>
<ul>
<li>è¿œç¨‹ä»£ç†æ§åˆ¶è®¿é—®è¿œç¨‹å¯¹è±¡ã€‚</li>
<li>è™šæ‹Ÿä»£ç†æ§åˆ¶è®¿é—®åˆ›å»ºå¼€é”€å¤§çš„èµ„æºã€‚</li>
<li>åŠ¨æ€ä»£ç†åŸºäºæƒé™æ§åˆ¶å¯¹èµ„æºçš„è®¿é—®ã€‚</li>
</ul>
<h3 data-id="heading-1"/>
<p>ä¸‹é¢æˆ‘ä»¬æ¥çœ‹çœ‹ç±»å›¾</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b7e8b547f22f402d8af34fbee9e2a6a4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3OTM4MTY5MTI1NTM2MA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769932223&amp;x-signature=B2xZBscGyz5ZsLfWwAG%2F6U3JWbs%3D" alt="proxy.png" loading="lazy"/></p>
<ul>
<li>ISubjectï¼šå®ƒä¸ºRealSubjectå’ŒProxyæä¾›äº†æ¥å£ï¼Œé€šè¿‡å®ç°åŒä¸€æ¥å£ï¼ŒProxyåœ¨RealSubjectå‡ºç°çš„åœ°æ–¹å–ä»£å®ƒã€‚</li>
<li>RealSubjectæ˜¯çœŸæ­£åšäº‹çš„å¯¹è±¡ï¼Œå®ƒæ˜¯è¢«Proxyä»£ç†å’Œæ§åˆ¶è®¿é—®çš„å¯¹è±¡ã€‚</li>
<li>ProxyæŒæœ‰RealSubjectçš„å¼•ç”¨ã€‚åœ¨æŸäº›ä¾‹å­ä¸­ï¼ŒProxyè¿˜ä¼šè´Ÿè´£RealSubjectå¯¹è±¡çš„åˆ›å»ºå’Œé”€æ¯ã€‚å®¢æˆ·å’ŒRealSubjectçš„äº¤äº’éƒ½å¿…é¡»é€šè¿‡Proxyã€‚å› ä¸ºProxyå’ŒRealSubjectå®ç°äº†ç›¸åŒçš„æ¥å£ï¼ˆISubjectï¼‰ï¼Œæ‰€ä»¥ä»»ä½•ç”¨åˆ°RealSubjectçš„åœ°æ–¹ï¼Œéƒ½å¯ä»¥ç”¨Proxyå–ä»£ã€‚Proxyä¹Ÿæ§åˆ¶äº†å¯¹RealSubjectçš„è®¿é—®ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦è¿™æ ·çš„æ§åˆ¶ã€‚</li>
</ul>
<h3 data-id="heading-2">1ã€è¿œç¨‹ä»£ç†</h3>
<h4 data-id="heading-3">1.1 å®šä¹‰</h4>
<p>è¿œç¨‹ä»£ç†å¯ä»¥ä½œä¸ºè¿œç¨‹å¯¹è±¡çš„æœ¬åœ°ä»£è¡¨ã€‚è°ƒç”¨ä»£ç†çš„æ–¹æ³•ï¼Œä¼šè¢«ä»£ç†åˆ©ç”¨ç½‘ç»œè½¬å‘åˆ°è¿œç¨‹æ‰§è¡Œï¼Œå¹¶ä¸”ç»“æœä¼šé€šè¿‡ç½‘ç»œè¿”å›ç»™ä»£ç†ï¼Œå†ç”±ä»£ç†å°†ç»“æœè½¬ç»™å®¢æˆ·ã€‚<br/>
<strong>ä½•ä¸ºè¿œç¨‹å¯¹è±¡</strong>ï¼Ÿè¿™æ˜¯ä¸€ç§å¯¹è±¡ï¼Œæ´»åœ¨ä¸åŒçš„JVMå †ä¸­ï¼ˆæ›´ä¸€èˆ¬çš„è¯´æ³•ä¸ºï¼šåœ¨ä¸åŒçš„åœ°å€ç©ºé—´è¿è¡Œçš„è¿œç¨‹å¯¹è±¡ï¼‰ã€‚<br/>
<strong>ä½•ä¸ºæœ¬åœ°ä»£è¡¨</strong>ï¼Ÿè¿™æ˜¯ä¸€ç§å¯ä»¥ç”±æœ¬åœ°æ–¹æ³•è°ƒç”¨çš„å¯¹è±¡ï¼Œå…¶è¡Œä¸ºä¼šè½¬å‘åˆ°è¿œç¨‹å¯¹è±¡ä¸­ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/49a9003a483f46a7bfa27d67ffa6d2f7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3OTM4MTY5MTI1NTM2MA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769932223&amp;x-signature=ah6QYRB0J3IPTDwFEN0W7tkr7Zs%3D" alt="remote.png" loading="lazy"/></p>
<p>ä½†æ˜¯è¦å¦‚ä½•åˆ›å»ºä¸€ä¸ªä»£ç†ï¼ŒçŸ¥é“å¦‚ä½•è°ƒç”¨åœ¨å¦ä¸€ä¸ªJVMä¸­çš„å¯¹è±¡çš„æ–¹æ³•ï¼Ÿ<code>Java RMI(RemoteMethodInvocation)</code>è¿œç¨‹æ–¹æ³•è°ƒç”¨å¯ä»¥åšåˆ°ã€‚</p>
<h4 data-id="heading-4">1.2 ä¸‹é¢æ¥çœ‹çœ‹RMIçš„å·¥ä½œè¿‡ç¨‹è¦ç‚¹</h4>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/04fb8be0666544b0814808be9798f37a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3OTM4MTY5MTI1NTM2MA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769932223&amp;x-signature=tUc%2B0tFUBsglcKJYM%2FWDS8Rpo%2B4%3D" alt="Rmi.png" loading="lazy"/></p>
<ol>
<li>å®¢æˆ·å¯¹è±¡Clientè°ƒç”¨å®¢æˆ·è¾…åŠ©å¯¹è±¡ClientHelperçš„doBigThing()æ–¹æ³•ã€‚</li>
<li>å®¢æˆ·è¾…åŠ©å¯¹è±¡æ‰“åŒ…è°ƒç”¨ä¿¡æ¯ï¼ˆå˜é‡ã€æ–¹æ³•åç§°ç­‰ï¼‰ï¼Œç„¶åé€šè¿‡ç½‘ç»œå°†å®ƒè¿ç»™æœåŠ¡è¾…åŠ©å¯¹è±¡ServiceHelperã€‚</li>
<li>æœåŠ¡è¾…åŠ©å¯¹è±¡æŠŠæ¥è‡ªå®¢æˆ·è¾…åŠ©å¯¹è±¡çš„ä¿¡æ¯è§£åŒ…ï¼Œæ‰¾å‡ºè¢«è°ƒç”¨çš„æ–¹æ³•ï¼ˆä»¥åŠåœ¨å“ªä¸ªå¯¹è±¡å†…ï¼‰ï¼Œç„¶åè°ƒç”¨çœŸæ­£çš„æœåŠ¡å¯¹è±¡RealSubjectä¸Šçš„çœŸæ­£æ–¹æ³•ã€‚</li>
<li>æœåŠ¡å¯¹è±¡ä¸Šçš„æ–¹æ³•è¢«è°ƒç”¨ï¼Œå°†ç»“æœè¿”å›ç»™æœåŠ¡è¾…åŠ©å¯¹è±¡ã€‚</li>
<li>æœåŠ¡è¾…åŠ©å¯¹è±¡æŠŠè°ƒç”¨çš„è¿”å›ä¿¡æ¯æ‰“åŒ…ï¼Œç„¶åé€šè¿‡ç½‘ç»œè¿å›ç»™å®¢æˆ·è¾…åŠ©å¯¹è±¡ã€‚</li>
<li>å®¢æˆ·è¾…åŠ©å¯¹è±¡æŠŠè¿”å›å€¼è§£åŒ…ï¼Œè¿”å›ç»™å®¢æˆ·å¯¹è±¡ã€‚å¯¹äºå®¢æˆ·æ¥è¯´ï¼Œè¿™æ˜¯å®Œå…¨é€æ˜çš„ã€‚</li>
</ol>
<blockquote>
<p>éšç€ RMI æŠ€æœ¯çš„æ¼”è¿›å’Œç°ä»£åˆ†å¸ƒå¼è®¡ç®—æ¡†æ¶çš„æ™®åŠï¼ŒJava å¹³å°å¯¹ RMI çš„æ”¯æŒè¿›è¡Œäº†ç²¾ç®€ã€‚Java 21 æ­£å¼ç§»é™¤äº†Â <code>rmic</code>Â å·¥å…·ï¼Œè¿™æ„å‘³ç€å¼€å‘è€…ä¸èƒ½å†ä½¿ç”¨å®ƒæ¥ç”Ÿæˆ RMI æ‰€éœ€çš„å®¢æˆ·ç«¯å­˜æ ¹ä»£ç ã€‚<br/>
è¿™ä¸€å˜åŒ–æ˜¯ Java 21 ä¸­ä¸€ç³»åˆ— RMI ç›¸å…³ç§»é™¤å’Œå¼ƒç”¨æ“ä½œçš„ä¸€éƒ¨åˆ†ï¼Œæ—¨åœ¨å‡å°‘å¯¹è¿‡æ—¶ã€ä½¿ç”¨ç‡ä½ä¸”å­˜åœ¨æ½œåœ¨å®‰å…¨é£é™©çš„ç»„ä»¶çš„ä¾èµ–ã€‚å®˜æ–¹å»ºè®®å¼€å‘è€…è¿ç§»åˆ°æ›´ç°ä»£ã€æ›´å®‰å…¨çš„åˆ†å¸ƒå¼é€šä¿¡æ¡†æ¶ï¼Œå¦‚ gRPC æˆ– RESTful APIã€‚</p>
</blockquote>
<h3 data-id="heading-5">2ã€è™šæ‹Ÿä»£ç†</h3>
<h4 data-id="heading-6">2.1 å®šä¹‰</h4>
<p>è™šæ‹Ÿä»£ç†ä½œä¸ºåˆ›å»ºå¼€é”€å¤§çš„å¯¹è±¡çš„ä»£è¡¨ã€‚è™šæ‹Ÿä»£ç†ç»å¸¸çŸ¥é“æˆ‘ä»¬çœŸæ­£éœ€è¦ä¸€ä¸ªå¯¹è±¡çš„æ—¶å€™æ‰åˆ›å»ºå®ƒã€‚å½“å¯¹è±¡åœ¨åˆ›å»ºå‰å’Œåˆ›å»ºä¸­æ—¶ï¼Œç”±è™šæ‹Ÿä»£ç†æ¥æ‰®æ¼”å¯¹è±¡çš„æ›¿èº«ã€‚å¯¹è±¡åˆ›å»ºåï¼Œä»£ç†å°±ä¼šå°†è¯·æ±‚ç›´æ¥å§”æ‰˜ç»™å¯¹è±¡ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8b24f50177a54634b8434631efd57efd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3OTM4MTY5MTI1NTM2MA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769932223&amp;x-signature=iYPO7nhsiFA7745e3c8hocs9nVQ%3D" alt="virtual.png" loading="lazy"/></p>
<h5 data-id="heading-7">ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ï¼šæ˜¾ç¤ºCDå°é¢</h5>
<p>ä»åœ¨çº¿æœåŠ¡ä¸­è·å–å°é¢çš„å›¾ç‰‡ï¼Œä½†æ˜¯é™äºè¿æ¥å¸¦å®½å’Œç½‘ç»œè´Ÿè½½ï¼Œä¸‹è½½å¯èƒ½éœ€è¦ä¸€äº›æ—¶é—´ï¼Œæ‰€ä»¥åœ¨ç­‰å¾…å›¾åƒåŠ è½½çš„æ—¶å€™ï¼Œåº”è¯¥æ˜¾ç¤ºä¸€äº›ä¸œè¥¿ã€‚æˆ‘ä»¬ä¹Ÿä¸å¸Œæœ›åœ¨ç­‰å¾…å›¾åƒæ—¶æ•´ä¸ªåº”ç”¨ç¨‹åºè¢«æŒ‚èµ·ã€‚ä¸€æ—¦å›¾åƒåŠ è½½å®Œæˆï¼Œåˆšæ‰æ˜¾ç¤ºçš„ä¸œè¥¿åº”è¯¥æ¶ˆå¤±ï¼Œå›¾åƒæ˜¾ç¤ºå‡ºæ¥ã€‚</p>
<p>æƒ³åšåˆ°è¿™æ ·ï¼Œç®€å•çš„æ–¹å¼å°±æ˜¯è™šæ‹Ÿä»£ç†ã€‚è™šæ‹Ÿä»£ç†å¯ä»¥ä»£ç†Iconï¼Œç®¡ç†èƒŒæ™¯çš„åŠ è½½ï¼Œå¹¶åœ¨åŠ è½½æœªå®Œæˆæ—¶æ˜¾ç¤ºâ€œCDå°é¢åŠ è½½ä¸­ï¼Œè¯·ç¨å€™ã€‚ã€‚ã€‚â€ï¼Œä¸€æ—¦åŠ è½½å®Œæˆï¼Œä»£ç†å°±æŠŠæ˜¾ç¤ºçš„èŒè´£å§”æ‰˜ç»™Iconã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dfce0943238d4eaa96a523250a598ea2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3OTM4MTY5MTI1NTM2MA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769932223&amp;x-signature=8x2Ml45akjWGyYq4sJTBisZNvg0%3D" alt="image.png" loading="lazy"/>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4d691e2566994c38985672dc225ca5e7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3OTM4MTY5MTI1NTM2MA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769932223&amp;x-signature=pqt7GPt9NtnC%2BJRPs1rsao2w4qw%3D" alt="image.png" loading="lazy"/></p>
<p><strong>ä¸‹é¢è®©æˆ‘ä»¬çœ‹çœ‹ä»£ç </strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> javax.swing.*;
<span class="hljs-keyword">import</span> java.awt.*;
<span class="hljs-keyword">import</span> java.net.URL;

<span class="hljs-comment">/**
 * ImageProxyåŒImageIconä¸€æ ·ï¼Œéƒ½å®ç°äº†Iconæ¥å£
 * ImageProxyå°±æ˜¯ä¸€ä¸ªè™šæ‹Ÿä»£ç†
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ImageProxy</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Icon</span> {

    <span class="hljs-comment">// æ­¤ImageIconæ˜¯æˆ‘ä»¬å¸Œæœ›åœ¨åŠ è½½åæ˜¾ç¤ºå‡ºæ¥çš„çœŸæ­£å›¾åƒ</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">volatile</span> ImageIcon imageIcon;
    <span class="hljs-comment">// å›¾åƒUrl</span>
    <span class="hljs-keyword">final</span> URL imageUrl;
    Thread retrievalThread;
    <span class="hljs-type">boolean</span> <span class="hljs-variable">retrieving</span> <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>;

    <span class="hljs-comment">// å°†å›¾åƒçš„URLä¼ å…¥æ„é€ å™¨ä¸­ã€‚è¿™æ˜¯æˆ‘ä»¬å¸Œæœ›æ˜¾ç¤ºçš„å›¾åƒæ‰€åœ¨çš„ä½ç½®</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">ImageProxy</span><span class="hljs-params">(URL url)</span> {
        <span class="hljs-built_in">this</span>.imageUrl = url;
    }

    <span class="hljs-comment">// ImageIconè¢«ä¸¤ä¸ªä¸åŒçš„çº¿ç¨‹ä½¿ç”¨ï¼Œå› æ­¤ï¼Œé™¤äº†ä½¿å˜é‡volatileï¼ˆä¿æŠ¤è¯»å–ï¼‰å¤–ï¼Œæˆ‘ä»¬è¿˜ä½¿ç”¨synchronizedï¼ˆä¿æŠ¤å†™å…¥ï¼‰ã€‚</span>
    <span class="hljs-keyword">synchronized</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setImageIcon</span><span class="hljs-params">(ImageIcon imageIcon)</span> {
        <span class="hljs-built_in">this</span>.imageIcon = imageIcon;
    }

    <span class="hljs-comment">/**
     * åœ¨å±å¹•ä¸Šç”»å‡ºä¸€ä¸ªIconå›¾åƒï¼ˆé€šè¿‡å§”æ‰˜ç»™ImageIconï¼‰
     * å¦‚æœImageIconæ²¡æœ‰è¢«å®Œæ•´åˆ›å»ºå‡ºæ¥ï¼Œé‚£å°±ç”±ImageProxyæ¥åˆ›å»ºä¸€ä¸ª
     * <span class="hljs-doctag">@param</span> c  a {<span class="hljs-doctag">@code</span> Component} to get properties useful for painting
     * <span class="hljs-doctag">@param</span> g  the graphics context
     * <span class="hljs-doctag">@param</span> x  the X coordinate of the icon's top-left corner
     * <span class="hljs-doctag">@param</span> y  the Y coordinate of the icon's top-left corner
     */</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">paintIcon</span><span class="hljs-params">(Component c, Graphics g, <span class="hljs-type">int</span> x, <span class="hljs-type">int</span> y)</span> {
        <span class="hljs-keyword">if</span> (imageIcon != <span class="hljs-literal">null</span>) {
            <span class="hljs-comment">// å¦‚æœå·²ç»æœ‰ImageIconï¼Œå°±å‘Šè¯‰å®ƒç”»å‡ºè‡ªå·±</span>
            imageIcon.paintIcon(c, g, x, y);
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-comment">// æ²¡æœ‰ImageIconï¼Œæ˜¾ç¤ºâ€œåŠ è½½ä¸­...â€çš„æ¶ˆæ¯</span>
            g.drawString(<span class="hljs-string">"Loading CD Cover, please wait..."</span>, x + <span class="hljs-number">300</span>, y + <span class="hljs-number">190</span>);
            <span class="hljs-comment">// å¦‚æœè¿˜æ²¡æœ‰è¯•ç€å–å‡ºå›¾åƒ</span>
            <span class="hljs-keyword">if</span> (!retrieving) {
                <span class="hljs-comment">// é‚£ä¹ˆå°±å¼€å§‹å–å‡ºå›¾åƒ</span>
                retrieving = <span class="hljs-literal">true</span>;
                <span class="hljs-comment">/*
                åœ¨è¿™é‡ŒåŠ è½½çœŸæ­£çš„iconå›¾åƒã€‚
                è¯·æ³¨æ„ï¼Œä½¿ç”¨ImageIconåŠ è½½å›¾åƒæ˜¯åŒæ­¥çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåªæœ‰åœ¨å›¾åƒåŠ è½½å®Œä¹‹åï¼ŒImageIconæ„é€ å™¨æ‰ä¼šè¿”å›ã€‚
                è¿™æ ·ï¼Œæˆ‘ä»¬çš„ç¨‹åºä¼šè€—åœ¨è¿™é‡Œï¼ŒåŠ¨å¼¹ä¸å¾—ï¼Œä¹Ÿæ²¡åŠæ³•æ˜¾ç¤ºæ¶ˆæ¯ã€‚æ‰€ä»¥æˆ‘ä»¬è¦ä½¿ç”¨å¼‚æ­¥çš„æ–¹å¼æ“ä½œï¼šä½¿ç”¨çº¿ç¨‹ã€‚
                 */</span>
                <span class="hljs-comment">// æˆ‘ä»¬ä¸å¸Œæœ›æŒ‚èµ·æ•´ä¸ªç”¨æˆ·ç•Œé¢ï¼Œæ‰€ä»¥ç”¨å¦ä¸€ä¸ªçº¿ç¨‹å–å‡ºå›¾åƒ</span>
                retrievalThread = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Runnable</span>() {
                    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> {
                        <span class="hljs-keyword">try</span> {
                            <span class="hljs-comment">// åœ¨çº¿ç¨‹ä¸­ï¼Œå®ä¾‹åŒ–æ­¤ImageIconå¯¹è±¡ï¼Œå…¶æ„é€ å™¨ä¼šåœ¨å›¾åƒåŠ è½½å®Œæˆååœ¨è¿”å›ã€‚</span>
                            setImageIcon(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ImageIcon</span>(imageUrl, <span class="hljs-string">"CD Cover"</span>));
                            <span class="hljs-comment">// å½“å›¾åƒå‡†å¤‡å¥½æ—¶ï¼Œæˆ‘ä»¬å‘Šè¯‰Swingï¼Œéœ€è¦é‡ç»˜ã€‚</span>
                            c.repaint();
                        } <span class="hljs-keyword">catch</span> (Exception e) {
                            e.printStackTrace();
                        }
                    }
                });
                retrievalThread.start();
            }
        }
    }

    <span class="hljs-comment">/**
     * åœ¨å›¾åƒåŠ è½½å®Œæ¯•å‰ï¼Œè¿”å›é»˜è®¤çš„å®½ã€‚
     * å›¾åƒåŠ è½½å®Œæ¯•åï¼Œäº¤ç»™ImageIconå¤„ç†
     * <span class="hljs-doctag">@return</span>
     */</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getIconWidth</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">if</span> (imageIcon != <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">return</span> imageIcon.getIconWidth();
        }
        <span class="hljs-keyword">return</span> <span class="hljs-number">800</span>;
    }

    <span class="hljs-comment">/**
     * åœ¨å›¾åƒåŠ è½½å®Œæ¯•å‰ï¼Œè¿”å›é»˜è®¤çš„é«˜ã€‚
     * å›¾åƒåŠ è½½å®Œæ¯•åï¼Œäº¤ç»™ImageIconå¤„ç†
     * <span class="hljs-doctag">@return</span>
     */</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getIconHeight</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">if</span> (imageIcon != <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">return</span> imageIcon.getIconHeight();
        }
        <span class="hljs-keyword">return</span> <span class="hljs-number">800</span>;
    }
}

<span class="hljs-comment">/**
 * è¿™æ˜¯æµ‹è¯•ç±»
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ImageProxyTest</span> {

    ImageComponent imageComponent;
    <span class="hljs-type">JFrame</span> <span class="hljs-variable">jFrame</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JFrame</span>(<span class="hljs-string">"CD Cover viewer"</span>);
    JMenuBar jMenuBar;
    JMenu jMenu;
    Hashtable&lt;String, String&gt; albums = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Hashtable</span>&lt;&gt;();

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception {
        <span class="hljs-type">ImageProxyTest</span> <span class="hljs-variable">imageProxyTest</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ImageProxyTest</span>();
    }

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">ImageProxyTest</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception {
        albums.put(<span class="hljs-string">"Buddha"</span>,<span class="hljs-string">"https://cdn.stocksnap.io/img-thumbs/960w/brick-building_CNR0WYMVJX.jpg"</span>);
        albums.put(<span class="hljs-string">"Ama"</span>,<span class="hljs-string">"https://cdn.stocksnap.io/img-thumbs/960w/holding-glass_V0ZNGACCAS.jpg"</span>);
        albums.put(<span class="hljs-string">"Alex"</span>,<span class="hljs-string">"https://cdn.stocksnap.io/img-thumbs/960w/building-architecture_FFCNJ3BDFC.jpg"</span>);

        <span class="hljs-type">URL</span> <span class="hljs-variable">initialURL</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">URL</span>(albums.get(<span class="hljs-string">"Buddha"</span>));
        jMenuBar = <span class="hljs-keyword">new</span> <span class="hljs-title class_">JMenuBar</span>();
        jMenu = <span class="hljs-keyword">new</span> <span class="hljs-title class_">JMenu</span>(<span class="hljs-string">"Favorite Albums"</span>);
        jMenuBar.add(jMenu);
        jFrame.setJMenuBar(jMenuBar);
        <span class="hljs-keyword">for</span> (<span class="hljs-type">Enumeration</span> <span class="hljs-variable">e</span> <span class="hljs-operator">=</span> albums.keys(); e.hasMoreElements();) {
            <span class="hljs-type">String</span> <span class="hljs-variable">name</span> <span class="hljs-operator">=</span> (String) e.nextElement();
            <span class="hljs-type">JMenuItem</span> <span class="hljs-variable">jMenuItem</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JMenuItem</span>(name);
            jMenu.add(jMenuItem);
            jMenuItem.addActionListener(event -&gt; {
                imageComponent.setIcon(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ImageProxy</span>(getAlbumUrl(event.getActionCommand())));
                jFrame.repaint();
            });
        }
        <span class="hljs-comment">// set up frame and menus</span>
        <span class="hljs-type">Icon</span> <span class="hljs-variable">icon</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ImageProxy</span>(initialURL);
        imageComponent = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ImageComponent</span>(icon);
        jFrame.getContentPane().add(imageComponent);
        jFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        jFrame.setSize(<span class="hljs-number">800</span>, <span class="hljs-number">600</span>);
        jFrame.setVisible(<span class="hljs-literal">true</span>);
    }

    URL <span class="hljs-title function_">getAlbumUrl</span><span class="hljs-params">(String name)</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">URL</span>(albums.get(name));
        } <span class="hljs-keyword">catch</span> (Exception e) {
            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
        }
    }
}

<span class="hljs-keyword">import</span> javax.swing.*;
<span class="hljs-keyword">import</span> java.awt.*;

<span class="hljs-comment">/**
 * å›¾ç‰‡ç»„ä»¶
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ImageComponent</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">JComponent</span> {

    <span class="hljs-keyword">private</span> Icon icon;
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">ImageComponent</span><span class="hljs-params">(Icon icon)</span> {
        <span class="hljs-built_in">this</span>.icon = icon;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setIcon</span><span class="hljs-params">(Icon icon)</span> {
        <span class="hljs-built_in">this</span>.icon = icon;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">paintComponent</span><span class="hljs-params">(Graphics g)</span> {
        <span class="hljs-built_in">super</span>.paintComponent(g);
        <span class="hljs-type">int</span> <span class="hljs-variable">h</span> <span class="hljs-operator">=</span> icon.getIconHeight();
        <span class="hljs-type">int</span> <span class="hljs-variable">w</span> <span class="hljs-operator">=</span> icon.getIconWidth();
        <span class="hljs-type">int</span> <span class="hljs-variable">x</span> <span class="hljs-operator">=</span> (<span class="hljs-number">800</span> - w) / <span class="hljs-number">2</span>;
        <span class="hljs-type">int</span> <span class="hljs-variable">y</span> <span class="hljs-operator">=</span> (<span class="hljs-number">600</span> - h) / <span class="hljs-number">2</span>;
        icon.paintIcon(<span class="hljs-built_in">this</span>, g, x, y);
    }
}
</code></pre>
<ol>
<li>ImageProxyç±»ä»£ç†ImageIconç±»ï¼Œæ‰€ä»¥å®ƒåŒImageIconä¸€æ ·ï¼Œä¹Ÿå®ç°äº†Iconæ¥å£ã€‚</li>
<li>ImageProxyç±»æœ‰ä¸€ä¸ªImageIconç±»çš„å¼•ç”¨ã€‚</li>
<li><strong>å¦‚æœImageIconæ²¡æœ‰è¢«å®Œæ•´åˆ›å»ºå‡ºæ¥ï¼Œé‚£å°±ç”±ImageProxyæ¥åˆ›å»ºä¸€ä¸ªï¼Œå±å¹•ä¸Šæ˜¾ç¤ºâ€œè¯·ç¨å€™â€ã€‚å¦‚æœImageIconåˆ›å»ºå‡ºæ¥äº†ï¼Œå°±å°†ç»˜åˆ¶ä»»åŠ¡å§”æ‰˜ç»™ImageIconçš„å®ä¾‹ã€‚</strong></li>
<li>å› ä¸ºä¸å¸Œæœ›æŒ‚èµ·æ•´ä¸ªç”¨æˆ·ç•Œé¢ï¼Œæ‰€ä»¥ä½¿ç”¨å¼‚æ­¥ï¼ˆæ–°å¼€ä¸€ä¸ªçº¿ç¨‹ï¼‰çš„æ–¹å¼åŠ è½½å›¾ç‰‡å¹¶å®ä¾‹åŒ–ImageIconç±»ã€‚</li>
</ol>
<h3 data-id="heading-8">3ã€åŠ¨æ€ä»£ç†</h3>
<h4 data-id="heading-9">3.1 å®šä¹‰</h4>
<p>Javaåœ¨java.lang.reflectåŒ…ä¸­æœ‰è‡ªå·±çš„ä»£ç†æ”¯æŒï¼Œåˆ©ç”¨è¿™ä¸ªåŒ…ä½ å¯ä»¥åœ¨è¿è¡Œæ—¶åŠ¨æ€çš„åˆ›å»ºä»£ç†ç±»ï¼Œå®ç°ä¸€ä¸ªæˆ–å¤šä¸ªæ¥å£ï¼Œå¹¶å°†æ–¹æ³•çš„è°ƒç”¨è½¬å‘åˆ°ä½ æ‰€æŒ‡å®šçš„ç±»ã€‚å› ä¸ºå®é™…çš„ä»£ç†ç±»æ˜¯åœ¨è¿è¡Œæ—¶åˆ›å»ºçš„ï¼Œæˆ‘ä»¬ç§°è¿™ä¸ªJavaæŠ€æœ¯ä¸ºï¼šåŠ¨æ€ä»£ç†ã€‚</p>
<p>ä¸‹é¢æˆ‘ä»¬æ¥çœ‹çœ‹åŠ¨æ€ä»£ç†çš„ç±»å›¾</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fe6c76a6a9f546fc8981b76ab43b6f24~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3OTM4MTY5MTI1NTM2MA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769932223&amp;x-signature=GdwMrJtlXLrFdFtGWpc%2BahVzo3g%3D" alt="dynamic.png" loading="lazy"/></p>
<blockquote>
<p><strong>åè¯è§£é‡Š</strong><br/>
InvocationHandlerï¼šè°ƒç”¨å¤„ç†å™¨</p>
</blockquote>
<p>å› ä¸ºJavaå·²ç»ä¸ºä½ åˆ›å»ºäº†Proxyç±»ï¼Œæ‰€ä»¥ä½ éœ€è¦æœ‰åŠæ³•æ¥å‘Šè¯‰Proxyç±»ä½ è¦åšä»€ä¹ˆã€‚ä½ ä¸èƒ½åƒä»¥å‰ä¸€æ ·æŠŠä»£ç æ”¾åœ¨Proxyç±»ä¸­ï¼Œå› ä¸ºProxyä¸æ˜¯ä½ ç›´æ¥å®ç°çš„ã€‚æˆ‘ä»¬è¦æŠŠä»£ç æ”¾åœ¨InvocationHandlerä¸­ã€‚InvocationHandlerçš„å·¥ä½œæ˜¯å“åº”ä»£ç†çš„ä»»ä½•è°ƒç”¨ã€‚ä½ å¯ä»¥æŠŠInvocationHandleræƒ³è±¡æˆä»£ç†æ”¶åˆ°æ–¹æ³•è°ƒç”¨åï¼Œè¯·æ±‚åšå®é™…å·¥ä½œçš„å¯¹è±¡ã€‚</p>
<h4 data-id="heading-10">3.2 åˆ›å»ºåŠ¨æ€ä»£ç†</h4>
<p><strong>1. åˆ›å»ºInvocationHandler</strong><br/>
å½“ä»£ç†çš„æ–¹æ³•è¢«è°ƒç”¨æ—¶ï¼Œä¸ç®¡æ˜¯å“ªä¸ªæ–¹æ³•ï¼Œä»£ç†éƒ½ä¼šæŠŠè¿™ä¸ªè°ƒç”¨è½¬å‘ç»™InvocationHandlerï¼Œè°ƒç”¨å®ƒçš„invoke()æ–¹æ³•ã€‚</p>
<p>è®©æˆ‘ä»¬çœ‹çœ‹è¿™æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2f5e5ca1972a4ef1ae9dabe25ade5111~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3OTM4MTY5MTI1NTM2MA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769932223&amp;x-signature=iKxtsZ04%2BS4%2B0lA5BXd0gSx7nlM%3D" alt="dynamic2.png" loading="lazy"/>
<strong>2. åˆ›å»ºåŠ¨æ€ä»£ç†</strong><br/>
<strong>3. åˆ©ç”¨é€‚å½“çš„ä»£ç†åŒ…è£…çœŸå®å¯¹è±¡</strong></p>
<p>ä¸‹é¢æ¥çœ‹çœ‹ä»£ç </p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">PersonBean</span> {
    String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span>;
    String <span class="hljs-title function_">getGender</span><span class="hljs-params">()</span>;
    String <span class="hljs-title function_">getInterests</span><span class="hljs-params">()</span>;
    <span class="hljs-type">int</span> <span class="hljs-title function_">getHotOrNotRating</span><span class="hljs-params">()</span>;

    <span class="hljs-keyword">void</span> <span class="hljs-title function_">setName</span><span class="hljs-params">(String name)</span>;
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">setGender</span><span class="hljs-params">(String gender)</span>;
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">setInterests</span><span class="hljs-params">(String interests)</span>;
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">setHotOrNotRating</span><span class="hljs-params">(<span class="hljs-type">int</span> hotOrNotRating)</span>;
}

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PersonBeanImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">PersonBean</span> {
    String name;
    String gender;
    String interests;
    <span class="hljs-type">int</span> rating;
    <span class="hljs-type">int</span> <span class="hljs-variable">ratingCount</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;


    <span class="hljs-comment">// å…¶ä»–çš„gettersã€ setters</span>

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getHotOrNotRating</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">if</span> (rating == <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
        <span class="hljs-keyword">return</span> (rating / ratingCount);
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setHotOrNotRating</span><span class="hljs-params">(<span class="hljs-type">int</span> hotOrNotRating)</span> {
        <span class="hljs-built_in">this</span>.rating += hotOrNotRating;
        <span class="hljs-built_in">this</span>.ratingCount++;
    }
}

<span class="hljs-keyword">import</span> java.lang.reflect.InvocationHandler;
<span class="hljs-keyword">import</span> java.lang.reflect.InvocationTargetException;
<span class="hljs-keyword">import</span> java.lang.reflect.Method;

<span class="hljs-comment">/**
 * PersonBeançš„åŠ¨æ€ä»£ç†
 * å…è®¸æ‹¥æœ‰è€…æŸ¥çœ‹è‡ªå·±çš„ä¿¡æ¯ã€è®¾ç½®è‡ªå·±çš„ä¿¡æ¯ã€ä½†æ˜¯ä¸èƒ½ç»™è‡ªå·±è¯„åˆ†
 *
 * æ‰€æœ‰è°ƒç”¨å¤„ç†å™¨éƒ½å®ç°äº†InvocationHandleræ¥å£
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OwnerInvocationHandler</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">InvocationHandler</span> {

    PersonBean personBean;
    <span class="hljs-comment">// å°†personBeanä¼ å…¥æ„é€ å™¨ï¼Œå¹¶ä¿æŒå®ƒçš„å¼•ç”¨</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">OwnerInvocationHandler</span><span class="hljs-params">(PersonBean personBean)</span> {
        <span class="hljs-built_in">this</span>.personBean = personBean;
    }

    <span class="hljs-comment">/**
     * æ¯æ¬¡proxyçš„æ–¹æ³•è¢«è°ƒç”¨ï¼Œå°±ä¼šå¯¼è‡´proxyè°ƒç”¨æ­¤æ–¹æ³•
     * <span class="hljs-doctag">@param</span> proxy æ–¹æ³•è¢«è°ƒç”¨çš„ä»£ç†å®ä¾‹
     *
     * <span class="hljs-doctag">@param</span> method çœŸæ­£è°ƒç”¨çš„æ–¹æ³•
     *
     * <span class="hljs-doctag">@param</span> args æ–¹æ³•å‚æ•°
     */</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">invoke</span><span class="hljs-params">(Object proxy, Method method, Object[] args)</span> <span class="hljs-keyword">throws</span> Throwable {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">if</span> (method.getName().startsWith(<span class="hljs-string">"get"</span>)) {
                <span class="hljs-keyword">return</span> method.invoke(personBean, args);
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (method.getName().equals(<span class="hljs-string">"setHotOrNotRating"</span>)) {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalAccessException</span>();
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (method.getName().startsWith(<span class="hljs-string">"set"</span>)) {
                <span class="hljs-keyword">return</span> method.invoke(personBean, args);
            }
        } <span class="hljs-keyword">catch</span> (InvocationTargetException e) {
            <span class="hljs-comment">// å¦‚æœçœŸæ­£ä¸»é¢˜æŠ›å‡ºå¼‚å¸¸çš„è¯ï¼Œå°±ä¼šæ‰§è¡Œè¿™é‡Œ</span>
            e.printStackTrace();
        }
        <span class="hljs-comment">// å¦‚æœè°ƒç”¨å…¶ä»–æ–¹æ³•ï¼Œä¸€å¾‹ä¸å¤„ç†ï¼Œè¿”å›null</span>
        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }
}

<span class="hljs-keyword">import</span> java.lang.reflect.InvocationHandler;
<span class="hljs-keyword">import</span> java.lang.reflect.Proxy;

<span class="hljs-comment">/**
 * è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•ç±»
 */</span>	
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MatchMarkingTest</span> {

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">MatchMarkingTest</span> <span class="hljs-variable">matchMarkingTest</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MatchMarkingTest</span>();
        matchMarkingTest.drive();
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">drive</span><span class="hljs-params">()</span> {
        <span class="hljs-type">PersonBean</span> <span class="hljs-variable">joe</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">PersonBeanImpl</span>();
        joe.setName(<span class="hljs-string">"Joe JavaBean"</span>);
        joe.setGender(<span class="hljs-string">"man"</span>);
        joe.setInterests(<span class="hljs-string">"bowling, Go"</span>);
        joe.setHotOrNotRating(<span class="hljs-number">20</span>);

        <span class="hljs-type">PersonBean</span> <span class="hljs-variable">ownerProxy</span> <span class="hljs-operator">=</span> getOwnerProxy(joe);
        <span class="hljs-comment">// Proxy.isProxyClass åˆ¤æ–­æ˜¯ä¸æ˜¯ä¸€ä¸ªä»£ç†ç±»</span>
        System.out.println(<span class="hljs-string">"is proxy?"</span> + Proxy.isProxyClass(ownerProxy.getClass()));
        System.out.println(<span class="hljs-string">"is proxy?"</span> + Proxy.isProxyClass(joe.getClass()));

        System.out.println(<span class="hljs-string">"name is "</span> + ownerProxy.getName());
        System.out.println(<span class="hljs-string">"interests is "</span> + ownerProxy.getInterests());
        ownerProxy.setInterests(<span class="hljs-string">"balls"</span>);
        System.out.println(<span class="hljs-string">"interests is "</span> + ownerProxy.getInterests());
        <span class="hljs-keyword">try</span> {
            ownerProxy.setHotOrNotRating(<span class="hljs-number">30</span>);
        } <span class="hljs-keyword">catch</span> (Exception e) {
            System.out.println(<span class="hljs-string">"cannot set rating from owner proxy"</span>);
        }
        System.out.println(<span class="hljs-string">"hotOrNotRating is "</span> + ownerProxy.getHotOrNotRating());
    }

    <span class="hljs-comment">/**
     * æ­¤æ–¹æ³•éœ€è¦ä¸€ä¸ªPersonå¯¹è±¡ä½œä¸ºå‚æ•°ï¼Œç„¶åè¿”å›å®ƒçš„ä»£ç†ã€‚
     * å› ä¸ºä»£ç†å’Œä¸»é¢˜æœ‰ç›¸åŒçš„æ¥å£ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿”å›ä¸€ä¸ªPersonBeanã€‚
     * <span class="hljs-doctag">@param</span> person
     * <span class="hljs-doctag">@return</span>
     */</span>
    PersonBean <span class="hljs-title function_">getOwnerProxy</span><span class="hljs-params">(PersonBean person)</span> {
        <span class="hljs-comment">// å°†personä¼ å…¥è°ƒç”¨å¤„ç†å™¨çš„æ„é€ å™¨ä¸­ã€‚è¿™æ­£æ˜¯å¤„ç†å™¨èƒ½å¤Ÿè®¿é—®RealSubjectçš„åŸå› </span>
        <span class="hljs-keyword">return</span> getProxy(person, <span class="hljs-keyword">new</span> <span class="hljs-title class_">OwnerInvocationHandler</span>(person));
    }

    <span class="hljs-comment">/**
     * æ­¤æ–¹æ³•åˆ›å»ºäº†ä»£ç†
     * <span class="hljs-doctag">@param</span> person
     * <span class="hljs-doctag">@param</span> handler
     * <span class="hljs-doctag">@return</span>
     */</span>
    PersonBean <span class="hljs-title function_">getProxy</span><span class="hljs-params">(PersonBean person, InvocationHandler handler)</span> {
        <span class="hljs-comment">// åˆ©ç”¨proxyç±»çš„é™æ€newProxyInstanceæ–¹æ³•åˆ›å»ºä»£ç†</span>
        <span class="hljs-comment">// å°†PersonBeançš„ç±»è½½å…¥å™¨å½“åšå‚æ•°</span>
        <span class="hljs-comment">// person.getClass().getInterfaces() æ˜¯ä»£ç†éœ€è¦å®ç°çš„æ¥å£</span>
        <span class="hljs-keyword">return</span> (PersonBean) Proxy.newProxyInstance(person.getClass().getClassLoader(), person.getClass().getInterfaces(), handler);
    }
}
</code></pre>
<h3 data-id="heading-11">4ã€å…¶ä»–çš„ä»£ç†æ¨¡å¼å˜ä½“</h3>
<ul>
<li>é˜²ç«å¢™ä»£ç†ï¼šæ§åˆ¶ç½‘ç»œèµ„æºçš„è®¿é—®ï¼Œä¿æŠ¤ä¸»é¢˜å…äºâ€œåå®¢æˆ·â€çš„ä¾µå®³ã€‚</li>
<li>æ™ºèƒ½å¼•ç”¨ä»£ç†ï¼šå½“ä¸»é¢˜è¢«å¼•ç”¨æ—¶ï¼Œè¿›è¡Œé¢å¤–çš„åŠ¨ä½œï¼Œä¾‹å¦‚è®¡ç®—ä¸€ä¸ªå¯¹è±¡è¢«å¼•ç”¨çš„æ¬¡æ•°ã€‚</li>
<li>ç¼“å­˜ä»£ç†ï¼šä¸ºå¼€é”€å¤§çš„è¿ç®—ç»“æœæä¾›æš‚æ—¶å­˜å‚¨ï¼šå®ƒä¹Ÿå…è®¸å¤šä¸ªå®¢æˆ·å…±äº«ç»“æœï¼Œä»¥å‡å°‘è®¡ç®—æˆ–ç½‘ç»œå»¶è¿Ÿã€‚</li>
<li>åŒæ­¥ä»£ç†ï¼šåœ¨å¤šçº¿ç¨‹çš„æƒ…å†µä¸‹ä¸ºä¸»é¢˜æä¾›å®‰å…¨çš„è®¿é—®ã€‚</li>
<li>å¤æ‚éšè—ä»£ç†ï¼šç”¨æ¥éšè—ä¸€ä¸ªç±»çš„å¤æ‚é›†åˆçš„å¤æ‚åº¦ï¼Œå¹¶è¿›è¡Œè®¿é—®æ§åˆ¶ã€‚æœ‰æ—¶å€™ä¹Ÿç§°ä¸ºâ€œå¤–è§‚ä»£ç†â€ã€‚</li>
<li>å†™å…¥æ—¶å¤åˆ¶ä»£ç†ï¼šç”¨æ¥æ§åˆ¶å¯¹è±¡çš„å¤åˆ¶ï¼Œæ–¹æ³•æ˜¯å»¶è¿Ÿå¯¹è±¡çš„å¤åˆ¶ï¼Œç›´åˆ°å®¢æˆ·çœŸçš„éœ€è¦ä¸ºæ­¢ã€‚è¿™æ˜¯è™šæ‹Ÿä»£ç†çš„å˜ä½“ã€‚</li>
</ul>
<p><a href="https://juejin.cn/post/7595459486401871924" title="https://juejin.cn/post/7595459486401871924" target="_blank"><strong>å¤šç§æ¨¡å¼ä¹‹é—´çš„å¯¹æ¯”</strong></a></p>
<h2 data-id="heading-12">äºŒã€æ€»ç»“è¦ç‚¹</h2>
<ul>
<li>ä»£ç†æ¨¡å¼ä¸ºå¦ä¸€ä¸ªå¯¹è±¡æä¾›ä»£è¡¨ï¼Œä»¥ä¾¿æ§åˆ¶å®¢æˆ·å¯¹å¯¹è±¡çš„è®¿é—®ï¼Œç®¡ç†è®¿é—®çš„æ–¹å¼æœ‰è®¸å¤šç§ã€‚</li>
<li>è¿œç¨‹ä»£ç†ç®¡ç†å®¢æˆ·å’Œè¿œç¨‹å¯¹è±¡ä¹‹é—´çš„äº¤äº’ã€‚</li>
<li>è™šæ‹Ÿä»£ç†æ§åˆ¶è®¿é—®å®ä¾‹åŒ–å¼€é”€å¤§çš„å¯¹è±¡ã€‚</li>
<li>ä¿æŠ¤ä»£ç†åŸºäºè°ƒç”¨è€…æ§åˆ¶å¯¹å¯¹è±¡æ–¹æ³•çš„è®¿é—®ã€‚</li>
<li>ä»£ç†æ¨¡å¼æœ‰è®¸å¤šå˜ä½“ï¼Œä¾‹å¦‚ï¼šç¼“å­˜ä»£ç†ï¼ŒåŒæ­¥ä»£ç†ã€é˜²ç«å¢™ä»£ç†ã€å†™å…¥æ—¶å¤åˆ¶ä»£ç†ã€‚</li>
<li>ä»£ç†åœ¨ç»“æ„ä¸Šç±»ä¼¼è£…é¥°è€…ï¼Œä½†æ˜¯ç›®çš„ä¸åŒã€‚</li>
<li>è£…é¥°è€…æ¨¡å¼ä¸ºå¯¹è±¡åŠ ä¸Šè¡Œä¸ºï¼Œè€Œä»£ç†åˆ™æ˜¯æ§åˆ¶è®¿é—®ã€‚</li>
<li>Javaå†…ç½®çš„ä»£ç†æ”¯æŒï¼Œå¯ä»¥æ ¹æ®éœ€è¦å»ºç«‹åŠ¨æ€ä»£ç†ï¼Œå¹¶å°†æ‰€æœ‰è°ƒç”¨åˆ†é…åˆ°æ‰€é€‰çš„å¤„ç†å™¨ã€‚</li>
<li>å°±å’Œå…¶ä»–åŒ…è£…è€…ä¸€æ ·ï¼Œä»£ç†ä¼šé€ æˆä½ çš„è®¾è®¡ä¸­ç±»çš„æ•°ç›®å¢åŠ ã€‚</li>
</ul>
<h2 data-id="heading-13">ä¸‰ã€åº”ç”¨åœºæ™¯</h2>
<p>ä»£ç†æ¨¡å¼åœ¨SpringBootä¸­çš„åº”ç”¨éå¸¸å¹¿æ³›ã€‚æ˜¯å®ç° <strong>é¢å‘åˆ‡é¢ç¼–ç¨‹ï¼ˆAOPï¼‰</strong> çš„æ ¸å¿ƒæœºåˆ¶ã€‚å®ƒå…è®¸å¼€å‘è€…åœ¨ä¸ä¿®æ”¹ä¸šåŠ¡åŸæœ‰ä»£ç çš„å‰æä¸‹ï¼ŒåŠ¨æ€çš„ä¸ºå¯¹è±¡æ·»åŠ é¢å¤–çš„åŠŸèƒ½ï¼Œä»è€Œå®ç°å…³æ³¨ç‚¹çš„åˆ†ç¦»ï¼Œæå‡ä»£ç çš„å¯ç»´æŠ¤æ€§å’Œå¤ç”¨æ€§ã€‚</p>
<h3 data-id="heading-14">æ ¸å¿ƒåº”ç”¨åœºæ™¯</h3>
<p>ä»£ç†æ¨¡å¼åœ¨Spring Bootä¸­ä¸»è¦ç”¨äºå¤„ç†é‚£äº›ä¸æ ¸å¿ƒä¸šåŠ¡é€»è¾‘æ— å…³ï¼Œä½†åˆæ¨ªè·¨å¤šä¸ªæ¨¡å—çš„â€œæ¨ªåˆ‡å…³æ³¨ç‚¹â€ï¼Œä¸»è¦åŒ…æ‹¬ï¼š</p>
<ul>
<li>äº‹åŠ¡ç®¡ç†ï¼šé€šè¿‡@Transactionalæ³¨è§£ï¼ŒSpringä¼šè‡ªåŠ¨ä¸ºæ–¹æ³•åˆ›å»ºä»£ç†ï¼Œåœ¨æ–¹æ³•æ‰§è¡Œå‰åè‡ªåŠ¨ç®¡ç†æ•°æ®åº“äº‹åŠ¡çš„å¼€å¯ã€æäº¤æˆ–å›æ»šã€‚</li>
<li>æ—¥å¿—è®°å½•ï¼šå¯ä»¥åœ¨æ–¹æ³•è°ƒç”¨å‰åè‡ªåŠ¨è®°å½•æ‰§è¡Œæ—¶é—´ã€å‚æ•°ã€è¿”å›å€¼ç­‰ä¿¡æ¯ï¼Œä¾¿äºç³»ç»Ÿç›‘æ§å’Œé—®é¢˜æ’æŸ¥ã€‚</li>
<li>å®‰å…¨æ§åˆ¶ï¼šåœ¨æ–¹æ³•æ‰§è¡Œå‰æ£€æŸ¥ç”¨æˆ·æƒé™ï¼Œå®ç°æ–¹æ³•çº§åˆ«çš„è®¿é—®æ§åˆ¶ã€‚</li>
<li>æ€§èƒ½ç›‘æ§ï¼šç»Ÿè®¡ç‰¹å®šæ–¹æ³•çš„æ‰§è¡Œè€—æ—¶ï¼Œç”¨äºæ€§èƒ½åˆ†æã€‚</li>
<li>ç¼“å­˜ç®¡ç†ï¼šé€šè¿‡@Cacheableç­‰æ³¨è§£ï¼Œä»£ç†å±‚å¯ä»¥åˆ¤æ–­ç»“æœæ˜¯å¦å·²ç¼“å­˜ï¼Œé¿å…é‡å¤è®¡ç®—ã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vue 3ä¸­watchå¦‚ä½•é«˜æ•ˆç›‘å¬å¤šæ•°æ®æºã€è®¡ç®—ç»“æœä¸æ•°ç»„å˜åŒ–ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7598881914201931826</link>    <guid>https://juejin.cn/post/7598881914201931826</guid>    <pubDate>2026-01-25T07:48:07.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7598881914201931826" data-draft-id="7598827641307627571" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vue 3ä¸­watchå¦‚ä½•é«˜æ•ˆç›‘å¬å¤šæ•°æ®æºã€è®¡ç®—ç»“æœä¸æ•°ç»„å˜åŒ–ï¼Ÿ  "/> <meta itemprop="keywords" content="å‰ç«¯,Vue.js,Trae"/> <meta itemprop="datePublished" content="2026-01-25T07:48:07.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="kknone"/> <meta itemprop="url" content="https://juejin.cn/user/1366025597879930"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vue 3ä¸­watchå¦‚ä½•é«˜æ•ˆç›‘å¬å¤šæ•°æ®æºã€è®¡ç®—ç»“æœä¸æ•°ç»„å˜åŒ–ï¼Ÿ  
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1366025597879930/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    kknone
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-25T07:48:07.000Z" title="Sun Jan 25 2026 07:48:07 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»16åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¤šæ•°æ®æºç›‘å¬</h2>
<p>åœ¨Vue 3ä¸­ï¼Œ<code>watch</code> å…è®¸æˆ‘ä»¬åŒæ—¶ç›‘å¬å¤šä¸ªå“åº”å¼æ•°æ®æºï¼Œå½“å…¶ä¸­ä»»æ„ä¸€ä¸ªæ•°æ®æºå‘ç”Ÿå˜åŒ–æ—¶ï¼Œéƒ½ä¼šè§¦å‘å›è°ƒå‡½æ•°ã€‚è¿™åœ¨éœ€è¦åŒæ­¥å¤„ç†å¤šä¸ªæ•°æ®å˜åŒ–çš„åœºæ™¯ä¸­éå¸¸å®ç”¨ï¼Œæ¯”å¦‚è¡¨å•å¤šå­—æ®µè”åŠ¨éªŒè¯ã€å¤šæ¡ä»¶ç»„åˆç­›é€‰ç­‰ã€‚</p>
<h3 data-id="heading-1">åŸºæœ¬ç”¨æ³•</h3>
<p>æˆ‘ä»¬å¯ä»¥å°†å¤šä¸ªæ•°æ®æºï¼ˆrefã€reactiveå¯¹è±¡æˆ–getterå‡½æ•°ï¼‰æ”¾å…¥ä¸€ä¸ªæ•°ç»„ä¸­ï¼Œä½œä¸º<code>watch</code>çš„ç¬¬ä¸€ä¸ªå‚æ•°ã€‚å›è°ƒå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æ‰€æœ‰æ•°æ®æºçš„æ–°å€¼ç»„æˆçš„æ•°ç»„ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯æ—§å€¼ç»„æˆçš„æ•°ç»„ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { ref, watch } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>

<span class="hljs-comment">// å®šä¹‰å¤šä¸ªå“åº”å¼æ•°æ®</span>
<span class="hljs-keyword">const</span> username = <span class="hljs-title function_">ref</span>(<span class="hljs-string">''</span>)
<span class="hljs-keyword">const</span> password = <span class="hljs-title function_">ref</span>(<span class="hljs-string">''</span>)
<span class="hljs-keyword">const</span> rememberMe = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">false</span>)

<span class="hljs-comment">// åŒæ—¶ç›‘å¬ä¸‰ä¸ªæ•°æ®æº</span>
<span class="hljs-title function_">watch</span>(
  [username, password, rememberMe],
  <span class="hljs-function">(<span class="hljs-params">[newUsername, newPassword, newRememberMe], [oldUsername, oldPassword, oldRememberMe]</span>) =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`ç”¨æˆ·åä» <span class="hljs-subst">${oldUsername}</span> å˜ä¸º <span class="hljs-subst">${newUsername}</span>`</span>)
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`å¯†ç ä» <span class="hljs-subst">${oldPassword}</span> å˜ä¸º <span class="hljs-subst">${newPassword}</span>`</span>)
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`è®°ä½æˆ‘çŠ¶æ€ä» <span class="hljs-subst">${oldRememberMe}</span> å˜ä¸º <span class="hljs-subst">${newRememberMe}</span>`</span>)
    
    <span class="hljs-comment">// å®é™…åœºæ™¯ä¸­å¯ä»¥åœ¨è¿™é‡Œè¿›è¡Œè¡¨å•éªŒè¯</span>
    <span class="hljs-keyword">if</span> (newUsername &amp;&amp; newPassword) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è¡¨å•å­—æ®µå·²å¡«å†™å®Œæ•´'</span>)
    }
  }
)
</code></pre>
<h3 data-id="heading-2">æ‰§è¡Œæµç¨‹</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart LR
A[å®šä¹‰å¤šä¸ªå“åº”å¼æ•°æ®] --&gt; B[å°†æ•°æ®æºæ”¾å…¥æ•°ç»„ä½œä¸ºwatchçš„ç›‘å¬æº]
B --&gt; C[ä»»æ„æ•°æ®æºå‘ç”Ÿå˜åŒ–]
C --&gt; D[è§¦å‘å›è°ƒå‡½æ•°]
D --&gt; E[è§£æ„æ–°å€¼å’Œæ—§å€¼æ•°ç»„ï¼Œå¤„ç†ä¸šåŠ¡é€»è¾‘]
</code></pre>
<hr/>
<h2 data-id="heading-3">Getterå‡½æ•°ç›‘å¬</h2>
<p>å½“æˆ‘ä»¬éœ€è¦ç›‘å¬çš„ç›®æ ‡ä¸æ˜¯ç›´æ¥çš„å“åº”å¼æ•°æ®ï¼Œè€Œæ˜¯åŸºäºå“åº”å¼æ•°æ®è®¡ç®—å‡ºçš„å€¼æ—¶ï¼Œå¯ä»¥ä½¿ç”¨<strong>getterå‡½æ•°</strong>ä½œä¸º<code>watch</code>çš„ç›‘å¬æºã€‚è¿™ç§æ–¹å¼è®©æˆ‘ä»¬èƒ½å¤Ÿçµæ´»å®šä¹‰ç›‘å¬çš„è®¡ç®—é€»è¾‘ã€‚</p>
<h3 data-id="heading-4">åŸºæœ¬ç”¨æ³•</h3>
<p>Getterå‡½æ•°éœ€è¦è¿”å›æˆ‘ä»¬æƒ³è¦ç›‘å¬çš„è®¡ç®—ç»“æœï¼Œå½“è¿™ä¸ªç»“æœå‘ç”Ÿå˜åŒ–æ—¶ï¼Œ<code>watch</code>å°±ä¼šè§¦å‘å›è°ƒå‡½æ•°ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { reactive, watch } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>

<span class="hljs-comment">// å®šä¹‰å“åº”å¼çŠ¶æ€å¯¹è±¡</span>
<span class="hljs-keyword">const</span> cart = <span class="hljs-title function_">reactive</span>({
  <span class="hljs-attr">items</span>: [
    { <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'Vue 3 å®æˆ˜æ•™ç¨‹'</span>, <span class="hljs-attr">price</span>: <span class="hljs-number">59</span>, <span class="hljs-attr">quantity</span>: <span class="hljs-number">1</span> },
    { <span class="hljs-attr">id</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'Vuex ä»å…¥é—¨åˆ°ç²¾é€š'</span>, <span class="hljs-attr">price</span>: <span class="hljs-number">39</span>, <span class="hljs-attr">quantity</span>: <span class="hljs-number">2</span> }
  ]
})

<span class="hljs-comment">// ç›‘å¬è´­ç‰©è½¦çš„æ€»é‡‘é¢</span>
<span class="hljs-title function_">watch</span>(
  <span class="hljs-comment">// Getterå‡½æ•°ï¼šè®¡ç®—æ€»é‡‘é¢</span>
  <span class="hljs-function">() =&gt;</span> cart.<span class="hljs-property">items</span>.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">total, item</span>) =&gt;</span> total + item.<span class="hljs-property">price</span> * item.<span class="hljs-property">quantity</span>, <span class="hljs-number">0</span>),
  <span class="hljs-function">(<span class="hljs-params">newTotal, oldTotal</span>) =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`è´­ç‰©è½¦æ€»é‡‘é¢ä» <span class="hljs-subst">${oldTotal}</span> å…ƒå˜ä¸º <span class="hljs-subst">${newTotal}</span> å…ƒ`</span>)
    
    <span class="hljs-comment">// å®é™…åœºæ™¯ä¸­å¯ä»¥åœ¨è¿™é‡Œæ›´æ–°ç»“ç®—æŒ‰é’®çŠ¶æ€æˆ–æ˜¾ç¤ºä¼˜æƒ ä¿¡æ¯</span>
    <span class="hljs-keyword">if</span> (newTotal &gt;= <span class="hljs-number">100</span>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ»¡è¶³æ»¡å‡æ¡ä»¶ï¼Œå¯äº«å—10å…ƒä¼˜æƒ '</span>)
    }
  }
)

<span class="hljs-comment">// ä¿®æ”¹è´­ç‰©è½¦å•†å“æ•°é‡ï¼Œè§¦å‘watch</span>
cart.<span class="hljs-property">items</span>[<span class="hljs-number">0</span>].<span class="hljs-property">quantity</span> = <span class="hljs-number">2</span>
</code></pre>
<h3 data-id="heading-5">æ‰§è¡Œæµç¨‹</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart LR
A[å®šä¹‰å“åº”å¼å¯¹è±¡] --&gt; B[åˆ›å»ºgetterå‡½æ•°ï¼Œè¿”å›è®¡ç®—åçš„å€¼]
B --&gt; C[å°†getterå‡½æ•°ä½œä¸ºwatchçš„ç›‘å¬æº]
C --&gt; D[è®¡ç®—å€¼å‘ç”Ÿå˜åŒ–]
D --&gt; E[è§¦å‘å›è°ƒå‡½æ•°]
E --&gt; F[å¤„ç†æ–°çš„è®¡ç®—ç»“æœ]
</code></pre>
<hr/>
<h2 data-id="heading-6">æ•°ç»„ç›‘å¬</h2>
<p>åœ¨Vue 3ä¸­ç›‘å¬æ•°ç»„éœ€è¦æ³¨æ„ä¸€äº›ç»†èŠ‚ï¼Œå› ä¸ºVueçš„å“åº”å¼ç³»ç»Ÿå¯¹æ•°ç»„çš„å¤„ç†å’Œæ™®é€šå¯¹è±¡æœ‰æ‰€ä¸åŒã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œ<code>watch</code>ä¼šç›‘å¬æ•°ç»„çš„å¼•ç”¨å˜åŒ–å’Œæ•°ç»„æ–¹æ³•ï¼ˆå¦‚<code>push</code>ã€<code>pop</code>ã€<code>splice</code>ç­‰ï¼‰çš„è°ƒç”¨ï¼Œä½†ä¸ä¼šç›‘å¬æ•°ç»„å…ƒç´ çš„ç›´æ¥ç´¢å¼•ä¿®æ”¹ã€‚</p>
<details>
<summary>å¾€æœŸæ–‡ç« å½’æ¡£</summary>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F8e70552f0f61e0dc8c7f567a2d272345%2F" target="_blank" title="https://blog.cmdragon.cn/posts/8e70552f0f61e0dc8c7f567a2d272345/" ref="nofollow noopener noreferrer">Vue 3ä¸­watchç›‘å¬refå’Œreactiveçš„æ ¸å¿ƒå·®å¼‚ä¸æ³¨æ„äº‹é¡¹æ˜¯ä»€ä¹ˆï¼Ÿ</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fdde70ab90dc5062c435e0501f5a6e7cb%2F" target="_blank" title="https://blog.cmdragon.cn/posts/dde70ab90dc5062c435e0501f5a6e7cb/" ref="nofollow noopener noreferrer">Vue3ä¸­Watchä¸watchEffectçš„æ ¸å¿ƒå·®å¼‚åŠé€‚ç”¨åœºæ™¯æ˜¯ä»€ä¹ˆï¼Ÿ</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F1f5ed5047850ed52c0fd0386f76bd4ae%2F" target="_blank" title="https://blog.cmdragon.cn/posts/1f5ed5047850ed52c0fd0386f76bd4ae/" ref="nofollow noopener noreferrer">Vue 3è‡ªå®šä¹‰æŒ‡ä»¤å¦‚ä½•èµ‹èƒ½è¡¨å•è‡ªåŠ¨èšç„¦ä¸é˜²æŠ–è¾“å…¥çš„é«˜æ•ˆå®ç°ï¼Ÿ</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fe3d4e128815ad731611b8ef29e37616b%2F" target="_blank" title="https://blog.cmdragon.cn/posts/e3d4e128815ad731611b8ef29e37616b/" ref="nofollow noopener noreferrer">Vue3ä¸­å¦‚ä½•ä¼˜é›…å®ç°æ”¯æŒå¤šç»‘å®šå˜é‡å’Œä¿®é¥°ç¬¦çš„åŒå‘ç»‘å®šç»„ä»¶ï¼Ÿ</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F7d1caedd822f70542aa0eed67e30963b%2F" target="_blank" title="https://blog.cmdragon.cn/posts/7d1caedd822f70542aa0eed67e30963b/" ref="nofollow noopener noreferrer">Vue 3è¡¨å•éªŒè¯å¦‚ä½•ä»åŸºç¡€è§„åˆ™åˆ°å¼‚æ­¥äº¤äº’æ„å»ºå®Œæ•´éªŒè¯ä½“ç³»ï¼Ÿ</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F3687a5437ab56cb082b5b813d5577a40%2F" target="_blank" title="https://blog.cmdragon.cn/posts/3687a5437ab56cb082b5b813d5577a40/" ref="nofollow noopener noreferrer">Vue3å“åº”å¼ç³»ç»Ÿå¦‚ä½•æ”¯æ’‘è¡¨å•æ•°æ®çš„é›†ä¸­ç®¡ç†ã€åŠ¨æ€æ‰©å±•ä¸å®æ—¶è®¡ç®—ï¼Ÿ</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fad67c4eb6d76cf7707bdfe6a8146c34f%2F" target="_blank" title="https://blog.cmdragon.cn/posts/ad67c4eb6d76cf7707bdfe6a8146c34f/" ref="nofollow noopener noreferrer">Vue3è·¨ç»„ä»¶é€šä¿¡ä¸­ï¼Œå…¨å±€äº‹ä»¶æ€»çº¿ä¸provide/injectè¯¥å¦‚ä½•æ­£ç¡®é€‰æ‹©ï¼Ÿ</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F1c1e80d697cca0923f29ec70ebb8ccd1%2F" target="_blank" title="https://blog.cmdragon.cn/posts/1c1e80d697cca0923f29ec70ebb8ccd1/" ref="nofollow noopener noreferrer">Vue3è¡¨å•äº‹ä»¶å¤„ç†ï¼šv-modelå¦‚ä½•å®ç°æ•°æ®ç»‘å®šã€éªŒè¯ä¸æäº¤ï¼Ÿ</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fb990828143d70aa87f9aa52e16692e48%2F" target="_blank" title="https://blog.cmdragon.cn/posts/b990828143d70aa87f9aa52e16692e48/" ref="nofollow noopener noreferrer">Vueåº”ç”¨å¦‚ä½•åŸºäºDOMäº‹ä»¶ä¼ æ’­æœºåˆ¶ä¸äº‹ä»¶ä¿®é¥°ç¬¦å®ç°é«˜æ•ˆäº‹ä»¶å¤„ç†ï¼Ÿ</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fb44316e0866e9f2e6aef927dbcf5152b%2F" target="_blank" title="https://blog.cmdragon.cn/posts/b44316e0866e9f2e6aef927dbcf5152b/" ref="nofollow noopener noreferrer">Vue3ä¸­å¦‚ä½•åœ¨è°ƒç”¨äº‹ä»¶å¤„ç†å‡½æ•°æ—¶åŒæ—¶ä¼ é€’è‡ªå®šä¹‰å‚æ•°å’ŒåŸç”ŸDOMäº‹ä»¶ï¼Ÿå‚æ•°é¡ºåºæœ‰å“ªäº›æ³¨æ„äº‹é¡¹ï¼Ÿ</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F021636c2a06f5e2d3d01977a12ddf559%2F" target="_blank" title="https://blog.cmdragon.cn/posts/021636c2a06f5e2d3d01977a12ddf559/" ref="nofollow noopener noreferrer">ä»æ•è·åˆ°å†’æ³¡ï¼šVueäº‹ä»¶ä¿®é¥°ç¬¦å¦‚ä½•é‡å¡‘äº‹ä»¶æ‰§è¡Œé¡ºåºï¼Ÿ</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fb3cddf7023ab537e623a61bc01dab6bb%2F" target="_blank" title="https://blog.cmdragon.cn/posts/b3cddf7023ab537e623a61bc01dab6bb/" ref="nofollow noopener noreferrer">Vueäº‹ä»¶å¤„ç†ï¼šå†…è”è¿˜æ˜¯æ–¹æ³•äº‹ä»¶å¤„ç†å™¨ï¼Œè¯¥å¦‚ä½•æŠ‰æ‹©ï¼Ÿ</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fbd4d9607ce1bc34cc3bda0a1a46c40f6%2F" target="_blank" title="https://blog.cmdragon.cn/posts/bd4d9607ce1bc34cc3bda0a1a46c40f6/" ref="nofollow noopener noreferrer">Vueäº‹ä»¶ç»‘å®šä¸­v-onä¸@è¯­æ³•å¦‚ä½•å–èˆï¼Ÿå‚æ•°ä¼ é€’ä¸åŸç”Ÿäº‹ä»¶å¤„ç†æœ‰å“ªäº›å®æˆ˜æŠ€å·§ï¼Ÿ</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fa5f2bacb74476fd7f5e02bb3f1ba6b2b%2F" target="_blank" title="https://blog.cmdragon.cn/posts/a5f2bacb74476fd7f5e02bb3f1ba6b2b/" ref="nofollow noopener noreferrer">Vue 3ä¸­åˆ—è¡¨æ’åºæ—¶ä¸ºä½•å¿…é¡»å¤åˆ¶æ•°ç»„è€Œéç›´æ¥ä¿®æ”¹åŸå§‹æ•°æ®ï¼Ÿ</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fd3b06b57fb7f126787e6ed22dce1e341%2F" target="_blank" title="https://blog.cmdragon.cn/posts/d3b06b57fb7f126787e6ed22dce1e341/" ref="nofollow noopener noreferrer">Vueè™šæ‹Ÿæ»šåŠ¨å¦‚ä½•å°†åˆ—è¡¨DOMæ•°é‡ä»ä¸‡çº§é™è‡³åä½æ•°ï¼Ÿ</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F3100cc5a2e16f8dac36f722594e6af32%2F" target="_blank" title="https://blog.cmdragon.cn/posts/3100cc5a2e16f8dac36f722594e6af32/" ref="nofollow noopener noreferrer">Vue3ä¸­v-ifä¸v-forç›´æ¥æ··ç”¨ä¸ºä½•ä¼šæŠ¥é”™ï¼Ÿè®¡ç®—å±æ€§å¦‚ä½•è§£å†³ä¼˜å…ˆçº§å†²çªï¼Ÿ</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F455dc2d47c38d12c1cf350e490041e8b%2F" target="_blank" title="https://blog.cmdragon.cn/posts/455dc2d47c38d12c1cf350e490041e8b/" ref="nofollow noopener noreferrer">ä¸ºä½•åœ¨Vue3é€’å½’ç»„ä»¶ä¸­å¿…é¡»ç”¨v-ifåˆ¤æ–­å­é¡¹å­˜åœ¨ï¼Ÿ</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F3f842bbd7ba0f9c91151b983bf784c8b%2F" target="_blank" title="https://blog.cmdragon.cn/posts/3f842bbd7ba0f9c91151b983bf784c8b/" ref="nofollow noopener noreferrer">Vue3åˆ—è¡¨æ¸²æŸ“ä¸­ï¼Œå¦‚ä½•ç”¨æ•°ç»„æ–¹æ³•ä¸è®¡ç®—å±æ€§ä¼˜åŒ–v-forçš„æ•°æ®å¤„ç†ï¼Ÿ</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F1eb3ffac668a743843b5ea1738301d40%2F" target="_blank" title="https://blog.cmdragon.cn/posts/1eb3ffac668a743843b5ea1738301d40/" ref="nofollow noopener noreferrer">Vue v-forçš„keyï¼šä¸ºä»€ä¹ˆå®ƒèƒ½è§£å†³åˆ—è¡¨æ¸²æŸ“ä¸­çš„â€œç„å­¦é”™è¯¯â€ï¼Ÿé€‰é”™ä¼šæœ‰å“ªäº›åæœï¼Ÿ</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F138b13c5341f6a1fa9015400433a3611%2F" target="_blank" title="https://blog.cmdragon.cn/posts/138b13c5341f6a1fa9015400433a3611/" ref="nofollow noopener noreferrer">Vue3ä¸­v-forä¸v-ifä¸ºä½•ä¸èƒ½ç›´æ¥å…±å­˜äºåŒä¸€å…ƒç´ ï¼Ÿ</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F0242a94dc552b93a1bc335ac4fc33db5%2F" target="_blank" title="https://blog.cmdragon.cn/posts/0242a94dc552b93a1bc335ac4fc33db5/" ref="nofollow noopener noreferrer">Vue3ä¸­v-ifä¸v-showçš„æœ¬è´¨åŒºåˆ«åŠåŠ¨æ€ç»„ä»¶çŠ¶æ€ä¿æŒçš„å…³é”®ç­–ç•¥æ˜¯ä»€ä¹ˆï¼Ÿ</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F97c66a18ae0e9b57c6a69b8b3a41ddf6%2F" target="_blank" title="https://blog.cmdragon.cn/posts/97c66a18ae0e9b57c6a69b8b3a41ddf6/" ref="nofollow noopener noreferrer">Vue3ä¸­v-showå¦‚ä½•é€šè¿‡CSSä¿®æ”¹displayå±æ€§æ§åˆ¶æ¡ä»¶æ˜¾ç¤ºï¼Ÿä¸v-ifçš„åº”ç”¨åœºæ™¯è¯¥å¦‚ä½•åŒºåˆ†ï¼Ÿ</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F8a1ddfac64b25062ac56403e4c1201d2%2F" target="_blank" title="https://blog.cmdragon.cn/posts/8a1ddfac64b25062ac56403e4c1201d2/" ref="nofollow noopener noreferrer">Vue3æ¡ä»¶æ¸²æŸ“ä¸­v-ifç³»åˆ—æŒ‡ä»¤å¦‚ä½•åˆç†ä½¿ç”¨ä¸è§„é¿é”™è¯¯ï¼Ÿ</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F218c3a59282c3b757447ee08a01937bb%2F" target="_blank" title="https://blog.cmdragon.cn/posts/218c3a59282c3b757447ee08a01937bb/" ref="nofollow noopener noreferrer">Vue3åŠ¨æ€æ ·å¼æ§åˆ¶ï¼šrefã€reactiveã€watchä¸computedçš„åº”ç”¨åœºæ™¯ä¸åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F1bab953e41f66ac53de099fa9fe76483%2F" target="_blank" title="https://blog.cmdragon.cn/posts/1bab953e41f66ac53de099fa9fe76483/" ref="nofollow noopener noreferrer">Vue3ä¸­åŠ¨æ€æ ·å¼æ•°ç»„çš„åé¡¹è¦†ç›–è§„åˆ™å¦‚ä½•ä¸è®¡ç®—å±æ€§ç»“åˆå®ç°å¤æ‚çŠ¶æ€æ ·å¼ç®¡ç†ï¼Ÿ</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fc85e1fe16a7ae45e965b4e2df4d9d2f4%2F" target="_blank" title="https://blog.cmdragon.cn/posts/c85e1fe16a7ae45e965b4e2df4d9d2f4/" ref="nofollow noopener noreferrer">Vueæµ…å“åº”å¼å¦‚ä½•è§£å†³æ·±å±‚å“åº”å¼çš„æ€§èƒ½é—®é¢˜ï¼Ÿé€‚ç”¨åœºæ™¯æœ‰å“ªäº›ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fbe04b02d2723994632de0d4ca22a3391%2F" target="_blank" title="https://blog.cmdragon.cn/posts/be04b02d2723994632de0d4ca22a3391/" ref="nofollow noopener noreferrer">Vue 3ç»„åˆå¼APIä¸­refä¸reactiveçš„æ ¸å¿ƒå“åº”å¼å·®å¼‚åŠä½¿ç”¨æœ€ä½³å®è·µæ˜¯ä»€ä¹ˆï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fbe04b02d2723994632de0d4ca22a3391%2F" target="_blank" title="https://blog.cmdragon.cn/posts/be04b02d2723994632de0d4ca22a3391/" ref="nofollow noopener noreferrer">Vue 3ç»„åˆå¼APIä¸­refä¸reactiveçš„æ ¸å¿ƒå“åº”å¼å·®å¼‚åŠä½¿ç”¨æœ€ä½³å®è·µæ˜¯ä»€ä¹ˆï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fa0af08dd60a37b9a890a9957f2cbfc9f%2F" target="_blank" title="https://blog.cmdragon.cn/posts/a0af08dd60a37b9a890a9957f2cbfc9f/" ref="nofollow noopener noreferrer">Vue3å“åº”å¼ç³»ç»Ÿä¸­ï¼Œå¯¹è±¡æ–°å¢å±æ€§ã€æ•°ç»„æ”¹ç´¢å¼•ã€åŸå§‹å€¼ä»£ç†çš„é—®é¢˜å¦‚ä½•è§£å†³ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fbc287e1e36287afd90750fd907eca85e%2F" target="_blank" title="https://blog.cmdragon.cn/posts/bc287e1e36287afd90750fd907eca85e/" ref="nofollow noopener noreferrer">Vue 3ä¸­watchä¾¦å¬å™¨çš„æ­£ç¡®ä½¿ç”¨å§¿åŠ¿ä½ æŒæ¡äº†å—ï¼Ÿæ·±åº¦ç›‘å¬ã€ä¸watchEffectçš„å·®å¼‚åŠå¸¸è§æŠ¥é”™è§£æ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F654b9447ef1ba7ec1126a1bc26a4726d%2F" target="_blank" title="https://blog.cmdragon.cn/posts/654b9447ef1ba7ec1126a1bc26a4726d/" ref="nofollow noopener noreferrer">Vueå“åº”å¼å£°æ˜çš„APIå·®å¼‚ã€åº•å±‚åŸç†ä¸å¸¸è§é™·é˜±ä½ éƒ½ææ‡‚äº†å— - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F654b9447ef1ba7ec1126a1bc26a4726d%2F" target="_blank" title="https://blog.cmdragon.cn/posts/654b9447ef1ba7ec1126a1bc26a4726d/" ref="nofollow noopener noreferrer">Vueå“åº”å¼å£°æ˜çš„APIå·®å¼‚ã€åº•å±‚åŸç†ä¸å¸¸è§é™·é˜±ä½ éƒ½ææ‡‚äº†å— - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fc405a8d9950af5b7c63b56c348ac36b6%2F" target="_blank" title="https://blog.cmdragon.cn/posts/c405a8d9950af5b7c63b56c348ac36b6/" ref="nofollow noopener noreferrer">ä¸ºä»€ä¹ˆVue 3éœ€è¦refå‡½æ•°ï¼Ÿå®ƒçš„å“åº”å¼åŸç†ä¸æ­£ç¡®ç”¨æ³•æ˜¯ä»€ä¹ˆï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fa7e9abb9691a81e4404d9facabe0f7c3%2F" target="_blank" title="https://blog.cmdragon.cn/posts/a7e9abb9691a81e4404d9facabe0f7c3/" ref="nofollow noopener noreferrer">Vue 3ä¸­reactiveå‡½æ•°å¦‚ä½•é€šè¿‡Proxyå®ç°å“åº”å¼ï¼Ÿä½¿ç”¨æ—¶è¦é¿å¼€å“ªäº›è¯¯åŒºï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fbd995ea45161727597fb85b62566c43d%2F" target="_blank" title="https://blog.cmdragon.cn/posts/bd995ea45161727597fb85b62566c43d/" ref="nofollow noopener noreferrer">Vue3å“åº”å¼ç³»ç»Ÿçš„åº•å±‚åŸç†ä¸å®è·µè¦ç‚¹ä½ çœŸçš„æ‡‚å—ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F53e3f270a80675df662c6857a3332c0f%2F" target="_blank" title="https://blog.cmdragon.cn/posts/53e3f270a80675df662c6857a3332c0f/" ref="nofollow noopener noreferrer">Vue 3æ¨¡æ¿å¦‚ä½•é€šè¿‡ç¼–è¯‘ä¸‰é˜¶æ®µå®ç°ä»å£°æ˜å¼è¯­æ³•åˆ°é«˜æ•ˆæ¸²æŸ“çš„è·¨è¶Š - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fddbce4f2a23aa72c96b1c0473900321e%2F" target="_blank" title="https://blog.cmdragon.cn/posts/ddbce4f2a23aa72c96b1c0473900321e/" ref="nofollow noopener noreferrer">å¿«é€Ÿå…¥é—¨Vueæ¨¡æ¿å¼•ç”¨ï¼šä»æ”¶DOMâ€œå¿«é€’â€åˆ°è°ƒå­ç»„ä»¶æ–¹æ³•ï¼Œä½ ç©æ˜ç™½äº†å—ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F23a2d5a334e15575277814c16e45df50%2F" target="_blank" title="https://blog.cmdragon.cn/posts/23a2d5a334e15575277814c16e45df50/" ref="nofollow noopener noreferrer">å¿«é€Ÿå…¥é—¨Vueæ¨¡æ¿é‡Œçš„JSè¡¨è¾¾å¼æœ‰å•¥ä¸èƒ½ç¢°ï¼Ÿè®¡ç®—å±æ€§ä¸ºå•¥æ¯”æ–¹æ³•æ›´èƒ½æ‰“ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F6be38de6382e31d282659b689c5b17f0%2F" target="_blank" title="https://blog.cmdragon.cn/posts/6be38de6382e31d282659b689c5b17f0/" ref="nofollow noopener noreferrer">å¿«é€Ÿå…¥é—¨Vueçš„v-modelè¡¨å•ç»‘å®šï¼šè¯­æ³•ç³–ã€åŠ¨æ€å€¼ã€ä¿®é¥°ç¬¦çš„å°æŠ€å·§ä½ éƒ½æŒæ¡äº†å—ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F60ce517684f4a418f453d66aa805606c%2F" target="_blank" title="https://blog.cmdragon.cn/posts/60ce517684f4a418f453d66aa805606c/" ref="nofollow noopener noreferrer">å¿«é€Ÿå…¥é—¨Vue3äº‹ä»¶å¤„ç†çš„æŒ‘æˆ˜é¢˜ï¼šv-onã€ä¿®é¥°ç¬¦ã€è‡ªå®šä¹‰äº‹ä»¶ä½ èƒ½é€šå…³å—ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fe4ae7d5e4a9205bb11b2baccb230c637%2F" target="_blank" title="https://blog.cmdragon.cn/posts/e4ae7d5e4a9205bb11b2baccb230c637/" ref="nofollow noopener noreferrer">å¿«é€Ÿå…¥é—¨Vue3çš„v-æŒ‡ä»¤ï¼šæ•°æ®å’ŒDOMçš„â€œç¿»è¯‘å®˜â€åˆ°åº•æœ‰å¤šå°‘æœ¬äº‹ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F999ce4fb32259ff4fbf4bf7bcb851654%2F" target="_blank" title="https://blog.cmdragon.cn/posts/999ce4fb32259ff4fbf4bf7bcb851654/" ref="nofollow noopener noreferrer">å¿«é€Ÿå…¥é—¨Vue3ï¼Œæ’å€¼ã€åŠ¨æ€ç»‘å®šå’Œé¿å‘æŠ€å·§ä½ éƒ½ææ‡‚äº†å—ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fa6997d81b49cd232b87e1cf603888ad1%2F" target="_blank" title="https://blog.cmdragon.cn/posts/a6997d81b49cd232b87e1cf603888ad1/" ref="nofollow noopener noreferrer">æƒ³è®©PostgreSQLå¿«åˆ°é£èµ·ï¼Ÿå…ˆæ‰¾å¥åº·å¯†ç è¿˜æ˜¯å…ˆæ¢å¼•æ“ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F1fee7afbb9abd4540b8aa9c141d6845d%2F" target="_blank" title="https://blog.cmdragon.cn/posts/1fee7afbb9abd4540b8aa9c141d6845d/" ref="nofollow noopener noreferrer">æƒ³è®©PostgreSQLæŸ¥è¯¢å¿«åˆ°é£èµ·ï¼Ÿåˆ†åŒºè¡¨ã€ç‰©åŒ–è§†å›¾ã€å¹¶è¡ŒæŸ¥è¯¢è¿™ä¸‰æ‹›çµä¸çµï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F79c590fbd87ece535b11a71c9667884f%2F" target="_blank" title="https://blog.cmdragon.cn/posts/79c590fbd87ece535b11a71c9667884f/" ref="nofollow noopener noreferrer">å­æŸ¥è¯¢æ€»æ‹–æ…¢æŸ¥è¯¢ï¼ŸæŠŠå®ƒå˜æˆè¿æ¥å°±èƒ½è§£å†³ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F748cdac2536008199abf8a8a2cd0ec85%2F" target="_blank" title="https://blog.cmdragon.cn/posts/748cdac2536008199abf8a8a2cd0ec85/" ref="nofollow noopener noreferrer">PostgreSQLå…¨è¡¨æ‰«ææ…¢åˆ°å´©æºƒï¼Ÿå»ºç´¢å¼•+æ”¹æŸ¥è¯¢+æ›´ç»Ÿè®¡ä¿¡æ¯ä¸‰æ‹›èƒ½ç ´ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F32ca943703226d317d4276a8fb53b0dd%2F" target="_blank" title="https://blog.cmdragon.cn/posts/32ca943703226d317d4276a8fb53b0dd/" ref="nofollow noopener noreferrer">å¤æ‚æŸ¥è¯¢æ€»æ‹–åè…¿ï¼ŸPostgreSQLå¤šåˆ—ç´¢å¼•+è¦†ç›–ç´¢å¼•çš„ç¥ä»™æŠ€å·§ä½ getæ²¡ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fca93f1d53aa910e7ba5ffd8df611c12b%2F" target="_blank" title="https://blog.cmdragon.cn/posts/ca93f1d53aa910e7ba5ffd8df611c12b/" ref="nofollow noopener noreferrer">åªç»™è¡¨å­é›†å»ºç´¢å¼•ï¼Ÿç”¨å‡½æ•°ç»“æœå»ºç´¢å¼•ï¼ŸPostgreSQLè¿™ä¿©æ“ä½œå‡­å•¥èƒ½çœç©ºé—´åˆåŠ é€Ÿï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Ff507856ebfddd592448813c510a53669%2F" target="_blank" title="https://blog.cmdragon.cn/posts/f507856ebfddd592448813c510a53669/" ref="nofollow noopener noreferrer">B-treeç´¢å¼•åƒå­—å…¸æŸ¥è¯ä¸€æ ·å·¥ä½œï¼Ÿé‚£å“ªäº›æ•°æ®åº“æŸ¥è¯¢å®ƒèƒ½åŠ é€Ÿï¼Œå“ªäº›ä¸èƒ½ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fb2213bfcb5b88a862f2138404c03d596%2F" target="_blank" title="https://blog.cmdragon.cn/posts/b2213bfcb5b88a862f2138404c03d596/" ref="nofollow noopener noreferrer">æƒ³æŠ“PostgreSQLé‡Œçš„æ…¢SQLï¼Ÿpg_stat_statementsåŸºç¡€é»‘åŒ£å­å’Œpg_stat_monitoræ—¶é—´çª—ï¼Œè°èƒ½å¸®ä½ æ›´å‡†æªå‡ºæ€§èƒ½å°å·ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F26614eb7da6c476dde41d367ad888d2f%2F" target="_blank" title="https://blog.cmdragon.cn/posts/26614eb7da6c476dde41d367ad888d2f/" ref="nofollow noopener noreferrer">PostgreSQLçš„â€œæ—¶å…‰æœºâ€MVCCå’Œé”æœºåˆ¶æ˜¯æ€ä¹ˆæå®šé«˜å¹¶å‘çš„ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F69f99bc6972a860d559c74aad7280da4%2F" target="_blank" title="https://blog.cmdragon.cn/posts/69f99bc6972a860d559c74aad7280da4/" ref="nofollow noopener noreferrer">PostgreSQLæ€§èƒ½æš´æ¶¨çš„å…³é”®ï¼Ÿå†…å­˜IOå¹¶å‘å‚æ•°å±…ç„¶è¦è¿™ä¹ˆè®¾ç½®ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F7b7053f392147a8b3b1a16bebeb08d0a%2F" target="_blank" title="https://blog.cmdragon.cn/posts/7b7053f392147a8b3b1a16bebeb08d0a/" ref="nofollow noopener noreferrer">å¤§è¡¨æŸ¥è¯¢æ…¢åˆ°ç¿»éæ•´ä¸ªä¹¦æ¶ï¼ŸPostgreSQLåˆ†åŒºè¡¨æ•™ä½ æ€ä¹ˆâ€œåˆ†ç±»â€æ‰é«˜æ•ˆ</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fc856e3cb073822349f3bf2d29995dcfc%2F" target="_blank" title="https://blog.cmdragon.cn/posts/c856e3cb073822349f3bf2d29995dcfc/" ref="nofollow noopener noreferrer">PostgreSQL æŸ¥è¯¢æ…¢ï¼Ÿæ˜¯ä¸æ˜¯å¿˜äº†ä¼˜åŒ– GROUP BYã€ORDER BY å’Œçª—å£å‡½æ•°ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fc096347d18e67b7431faacd2c4757093%2F" target="_blank" title="https://blog.cmdragon.cn/posts/c096347d18e67b7431faacd2c4757093/" ref="nofollow noopener noreferrer">PostgreSQLé‡Œçš„å­æŸ¥è¯¢å’ŒCTEå±…ç„¶åœ¨æ€§èƒ½ä¸Šâ€œææ¶â€ï¼Ÿåˆ°åº•è¯¥ç«™å“ªè¾¹ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F2eca89463454fd4250d7b66243b9fe5a%2F" target="_blank" title="https://blog.cmdragon.cn/posts/2eca89463454fd4250d7b66243b9fe5a/" ref="nofollow noopener noreferrer">PostgreSQLé€‰Joinç­–ç•¥æœ‰å•¥å°ä¹ä¹ï¼ŸNested Loop/Merge/Hashè°æ˜¯å®ƒçš„èœï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F068ecb772a87d7df20a8c9fb4b233f8e%2F" target="_blank" title="https://blog.cmdragon.cn/posts/068ecb772a87d7df20a8c9fb4b233f8e/" ref="nofollow noopener noreferrer">PostgreSQLæ–°æ‰‹SQLæ€»ç¿»è½¦ï¼Ÿè¿™7ä¸ªæ€§èƒ½é™·é˜±ä½ è¸©è¿‡æ²¡ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fd498f63cd0a2d5a77e445c688a8b88db%2F" target="_blank" title="https://blog.cmdragon.cn/posts/d498f63cd0a2d5a77e445c688a8b88db/" ref="nofollow noopener noreferrer">PostgreSQLç´¢å¼•é€‰B-Treeè¿˜æ˜¯GiSTï¼Ÿâ€œç‘å£«å†›åˆ€â€å’Œâ€œå¤šé¢æ‰‹â€çš„å·®åˆ«ä½ å±…ç„¶è¿˜ä¸çŸ¥é“ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F9101b75bdec6faea9b35d54f14e37f36%2F" target="_blank" title="https://blog.cmdragon.cn/posts/9101b75bdec6faea9b35d54f14e37f36/" ref="nofollow noopener noreferrer">æƒ³çŸ¥é“æ•°æ®åº“æ€ä¹ˆç»™æŸ¥è¯¢â€œç®—æˆæœ¬é€‰è·¯çº¿â€ï¼ŸEXPLAINèƒ½å¸®ä½ çœ‹æ˜ç™½ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fd527f8ebb6e3dae2c7dfe4c8d8979444%2F" target="_blank" title="https://blog.cmdragon.cn/posts/d527f8ebb6e3dae2c7dfe4c8d8979444/" ref="nofollow noopener noreferrer">PostgreSQLå¤„ç†SQLå±…ç„¶åƒåšè›‹ç³•ï¼Ÿè§£æåˆ°æ‰§è¡Œçš„4æ­¥é‡Œè—ç€å¤šå°‘æŸ¥è¯¢ä¼˜åŒ–çš„å°å¿ƒæœºï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F6bfdae84f313cf7ad0bb7045c4392347%2F" target="_blank" title="https://blog.cmdragon.cn/posts/6bfdae84f313cf7ad0bb7045c4392347/" ref="nofollow noopener noreferrer">PostgreSQLå¤‡ä»½ä¸æ˜¯å¤åˆ¶æ–‡ä»¶ï¼Ÿç‰©ç†vsé€»è¾‘å’‹é€‰ï¼Ÿè¯¯åˆ è¿˜èƒ½ç²¾å‡†æ¢å¤åˆ°1åˆ†é’Ÿå‰ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fde3672803de34dbad244d0a8d48b0eb5%2F" target="_blank" title="https://blog.cmdragon.cn/posts/de3672803de34dbad244d0a8d48b0eb5/" ref="nofollow noopener noreferrer">è½¬è´¦ä¸ç¿»è½¦ã€å¹¶å‘ä¸å¹²æ‰°ï¼ŒPostgreSQLçš„ACIDç‰¹æ€§åˆ°åº•æœ‰å•¥é­”æ³•ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fe463e8a2668abdf00a228c9b79324ded%2F" target="_blank" title="https://blog.cmdragon.cn/posts/e463e8a2668abdf00a228c9b79324ded/" ref="nofollow noopener noreferrer">é“¶è¡Œè½¬è´¦ä¸ç™½æ‰£é’±ã€ç”µå•†ä¸‹å•ä¸è¶…å–ï¼ŒPostgreSQLäº‹åŠ¡çš„è¯€çªæ˜¯å•¥ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F5c967e595058c4a1fc4474a68e64031d%2F" target="_blank" title="https://blog.cmdragon.cn/posts/5c967e595058c4a1fc4474a68e64031d/" ref="nofollow noopener noreferrer">PostgreSQLé‡Œçš„PL/pgSQLåˆ°åº•æ˜¯å•¥ï¼Ÿèƒ½è®©SQLä»â€œè¯´ç›®æ ‡â€å˜â€œè®²æ­¥éª¤â€ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F325047855e3e23b5ef82f7d2db134fbd%2F" target="_blank" title="https://blog.cmdragon.cn/posts/325047855e3e23b5ef82f7d2db134fbd/" ref="nofollow noopener noreferrer">PostgreSQLè§†å›¾ä¸å­˜æ•°æ®ï¼Ÿé‚£å®ƒæ€ä¹ˆç®€åŒ–æŸ¥è¯¢è¿˜èƒ½é€’å½’ç”Ÿæˆåºåˆ—å’Œæ§åˆ¶æƒé™ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fd2dba50bb6e4df7b27e735245a06a2a2%2F" target="_blank" title="https://blog.cmdragon.cn/posts/d2dba50bb6e4df7b27e735245a06a2a2/" ref="nofollow noopener noreferrer">PostgreSQLç´¢å¼•è¿™ä¹ˆç©ï¼Œæ‰èƒ½è®©ä½ çš„æŸ¥è¯¢çœŸçš„â€œé£â€èµ·æ¥ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F849ae5bab0f8c66e94c2f6ad1bb798e3%2F" target="_blank" title="https://blog.cmdragon.cn/posts/849ae5bab0f8c66e94c2f6ad1bb798e3/" ref="nofollow noopener noreferrer">PostgreSQLçš„è¡¨å…³ç³»å’Œçº¦æŸï¼Œå’‹å¸®ä½ æå®šç”¨æˆ·è®¢å•ä¸æ··ä¹±ã€å­¦ç”Ÿé€‰è¯¾ä¸é‡å¤ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fef4800975ffa84f1ca51976a70a1585b%2F" target="_blank" title="https://blog.cmdragon.cn/posts/ef4800975ffa84f1ca51976a70a1585b/" ref="nofollow noopener noreferrer">PostgreSQLæŸ¥è¯¢çš„ç­›å­ã€æ’åºã€èšåˆã€åˆ†ç»„ï¼Ÿä½ ä¼šç”¨å®ƒä»¬æå®šæ•°æ®å—ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fbf54711525c507c5eacfa7b0151c39d2%2F" target="_blank" title="https://blog.cmdragon.cn/posts/bf54711525c507c5eacfa7b0151c39d2/" ref="nofollow noopener noreferrer">PostgreSQLæ•°æ®ç±»å‹æ€ä¹ˆé€‰æ‰é«˜æ•ˆä¸è¸©å‘ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F887809b3e0375f5956873cd442f516d8%2F" target="_blank" title="https://blog.cmdragon.cn/posts/887809b3e0375f5956873cd442f516d8/" ref="nofollow noopener noreferrer">æƒ³è§£é”PostgreSQLæŸ¥è¯¢ä»åŸºç¡€åˆ°è¿›é˜¶çš„æ ¸å¿ƒçŸ¥è¯†ç‚¹ï¼Ÿä½ éƒ½getäº†å—ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F934be1203725e8be9d6f6e9104e5abcc%2F" target="_blank" title="https://blog.cmdragon.cn/posts/934be1203725e8be9d6f6e9104e5abcc/" ref="nofollow noopener noreferrer">PostgreSQL DELETEå±…ç„¶æœ‰è¿™äº›æ“ä½œï¼Ÿè¿”å›æ•°æ®ã€è¿è¡¨åˆ ä½ è¯•è¿‡æ²¡ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F0f0622e9b7402b599e618150d0596ffe%2F" target="_blank" title="https://blog.cmdragon.cn/posts/0f0622e9b7402b599e618150d0596ffe/" ref="nofollow noopener noreferrer">PostgreSQL UPDATEè¯­å¥æ€ä¹ˆç©ï¼Ÿä»æ”¹é‚®ç®±åˆ°æ‰¹é‡æ›´æ–°çš„é¿å‘æŠ€å·§ä½ éƒ½ä¼šå—ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F0e3bf7efc030b024ea67ee855a00f2de%2F" target="_blank" title="https://blog.cmdragon.cn/posts/0e3bf7efc030b024ea67ee855a00f2de/" ref="nofollow noopener noreferrer">PostgreSQLæ’å…¥æ•°æ®è¿˜åœ¨é€æ¡æ•²ï¼Ÿæ‰¹é‡ã€å†²çªå¤„ç†ã€è¿”å›è‡ªå¢IDçš„æŠ€å·§ä½ ä¼šå—ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fb6cd3c86da6aac26ed829e472d34078e%2F" target="_blank" title="https://blog.cmdragon.cn/posts/b6cd3c86da6aac26ed829e472d34078e/" ref="nofollow noopener noreferrer">PostgreSQLçš„â€œä»“åº“-æˆ¿é—´-è´§æ¶â€æ¸¸æˆï¼Œä½ èƒ½å»ºå‡ºç”µå•†æ•°æ®åº“å’Œè¡¨å—ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fba1f545a3410144552fbdbfcf31b5265%2F" target="_blank" title="https://blog.cmdragon.cn/posts/ba1f545a3410144552fbdbfcf31b5265/" ref="nofollow noopener noreferrer">PostgreSQL 17å®‰è£…æ€»ç¿»è½¦ï¼ŸWindows/macOS/Linuxé¿å‘æŒ‡å—å¸®ä½ æå®šï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fb5474d1480509c5072085abc80b3dd9f%2F" target="_blank" title="https://blog.cmdragon.cn/posts/b5474d1480509c5072085abc80b3dd9f/" ref="nofollow noopener noreferrer">èƒ½å½“å…³ç³»å‹æ•°æ®åº“è¿˜èƒ½ç©å¯¹è±¡ç‰¹æ€§ï¼Œèƒ½æ‹†å¤æ‚æŸ¥è¯¢è¿˜èƒ½è‡ªåŠ¨ç®¡åº“å­˜ï¼ŒPostgreSQLå‡­ä»€ä¹ˆè¿™ä¹ˆé¦™ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fcc098d8836e787baa8a4d92e4d56d5c5%2F" target="_blank" title="https://blog.cmdragon.cn/posts/cc098d8836e787baa8a4d92e4d56d5c5/" ref="nofollow noopener noreferrer">ç»™æ¥å£åŠ æ–°å­—æ®µåˆä¸æå´©è€å®¢æˆ·ç«¯ï¼ŸFastAPIçš„å¤šç‰ˆæœ¬APIé å“ªä¸‰æ‹›å®ç°ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F46d05151c5bd31cf37a7bcf0b8f5b0b8%2F" target="_blank" title="https://blog.cmdragon.cn/posts/46d05151c5bd31cf37a7bcf0b8f5b0b8/" ref="nofollow noopener noreferrer">æµé‡çªå¢è¦æå´©FastAPIï¼Ÿç†”æ–­æµ‹è¯•æ˜¯æ€ä¹ˆé˜²ç³»ç»Ÿé›ªå´©çš„ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F65ce343cc5df9faf3a8e2eeaab42ae45%2F" target="_blank" title="https://blog.cmdragon.cn/posts/65ce343cc5df9faf3a8e2eeaab42ae45/" ref="nofollow noopener noreferrer">FastAPIç§’æ€åº“å­˜æ€»å˜è´Ÿæ•°ï¼ŸRedisåˆ†å¸ƒå¼é”èƒ½å¸®ä½ å®ˆä½åº•çº¿å— - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Feed6cd8985d9be0a4b092a7da38b3e0c%2F" target="_blank" title="https://blog.cmdragon.cn/posts/eed6cd8985d9be0a4b092a7da38b3e0c/" ref="nofollow noopener noreferrer">FastAPIçš„CIæµæ°´çº¿æ€ä¹ˆè‡ªåŠ¨æµ‹ç«¯ç‚¹ï¼Œè¿˜èƒ½è®©AllureæŠ¥å‘Šç¾åˆ°çŠ¯è§„ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F6157d87338ce894d18c013c3c4777abb%2F" target="_blank" title="https://blog.cmdragon.cn/posts/6157d87338ce894d18c013c3c4777abb/" ref="nofollow noopener noreferrer">å¦‚ä½•ç”¨GitHub Actionsä¸ºFastAPIé¡¹ç›®æ‰“é€ è‡ªåŠ¨åŒ–æµ‹è¯•æµæ°´çº¿ï¼Ÿ - cmdragon's Blog</a></li>
</ul>
</details>
<details>
<summary>å…è´¹å¥½ç”¨çš„çƒ­é—¨åœ¨çº¿å·¥å…·</summary>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Ffile-converter" target="_blank" title="https://tools.cmdragon.cn/zh/apps/file-converter" ref="nofollow noopener noreferrer">æ–‡ä»¶æ ¼å¼è½¬æ¢å™¨ - åº”ç”¨å•†åº— | By cmdragon</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fm3u8-player" target="_blank" title="https://tools.cmdragon.cn/zh/apps/m3u8-player" ref="nofollow noopener noreferrer">M3U8åœ¨çº¿æ’­æ”¾å™¨ - åº”ç”¨å•†åº— | By cmdragon</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fquick-image-design" target="_blank" title="https://tools.cmdragon.cn/zh/apps/quick-image-design" ref="nofollow noopener noreferrer">å¿«å›¾è®¾è®¡ - åº”ç”¨å•†åº— | By cmdragon</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Ftext-to-image-advanced" target="_blank" title="https://tools.cmdragon.cn/zh/apps/text-to-image-advanced" ref="nofollow noopener noreferrer">é«˜çº§æ–‡å­—è½¬å›¾ç‰‡è½¬æ¢å™¨ - åº”ç”¨å•†åº— | By cmdragon</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fraid-calculator" target="_blank" title="https://tools.cmdragon.cn/zh/apps/raid-calculator" ref="nofollow noopener noreferrer">RAID è®¡ç®—å™¨ - åº”ç”¨å•†åº— | By cmdragon</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fphotoshop-online" target="_blank" title="https://tools.cmdragon.cn/zh/apps/photoshop-online" ref="nofollow noopener noreferrer">åœ¨çº¿PS - åº”ç”¨å•†åº— | By cmdragon</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fmermaid-live-editor" target="_blank" title="https://tools.cmdragon.cn/zh/apps/mermaid-live-editor" ref="nofollow noopener noreferrer">Mermaid åœ¨çº¿ç¼–è¾‘å™¨ - åº”ç”¨å•†åº— | By cmdragon</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fmath-solver-calculator" target="_blank" title="https://tools.cmdragon.cn/zh/apps/math-solver-calculator" ref="nofollow noopener noreferrer">æ•°å­¦æ±‚è§£è®¡ç®—å™¨ - åº”ç”¨å•†åº— | By cmdragon</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fsmart-teleprompter" target="_blank" title="https://tools.cmdragon.cn/zh/apps/smart-teleprompter" ref="nofollow noopener noreferrer">æ™ºèƒ½æè¯å™¨ - åº”ç”¨å•†åº— | By cmdragon</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fmagic-resume" target="_blank" title="https://tools.cmdragon.cn/zh/apps/magic-resume" ref="nofollow noopener noreferrer">é­”æ³•ç®€å† - åº”ç”¨å•†åº— | By cmdragon</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fimage-puzzle-tool" target="_blank" title="https://tools.cmdragon.cn/zh/apps/image-puzzle-tool" ref="nofollow noopener noreferrer">Image Puzzle Tool - å›¾ç‰‡æ‹¼å›¾å·¥å…· | By cmdragon</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fsubtitle-downloader" target="_blank" title="https://tools.cmdragon.cn/zh/apps/subtitle-downloader" ref="nofollow noopener noreferrer">å­—å¹•ä¸‹è½½å·¥å…· - åº”ç”¨å•†åº— | By cmdragon</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Flyrics-generator" target="_blank" title="https://tools.cmdragon.cn/zh/apps/lyrics-generator" ref="nofollow noopener noreferrer">æ­Œè¯ç”Ÿæˆå·¥å…· - åº”ç”¨å•†åº— | By cmdragon</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fcloud-drive-search" target="_blank" title="https://tools.cmdragon.cn/zh/apps/cloud-drive-search" ref="nofollow noopener noreferrer">ç½‘ç›˜èµ„æºèšåˆæœç´¢ - åº”ç”¨å•†åº— | By cmdragon</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fascii-art-generator" target="_blank" title="https://tools.cmdragon.cn/zh/apps/ascii-art-generator" ref="nofollow noopener noreferrer">ASCIIå­—ç¬¦ç”»ç”Ÿæˆå™¨ - åº”ç”¨å•†åº— | By cmdragon</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fjwt-tool" target="_blank" title="https://tools.cmdragon.cn/zh/apps/jwt-tool" ref="nofollow noopener noreferrer">JSON Web Tokens å·¥å…· - åº”ç”¨å•†åº— | By cmdragon</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fbcrypt-tool" target="_blank" title="https://tools.cmdragon.cn/zh/apps/bcrypt-tool" ref="nofollow noopener noreferrer">Bcrypt å¯†ç å·¥å…· - åº”ç”¨å•†åº— | By cmdragon</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fgif-composer" target="_blank" title="https://tools.cmdragon.cn/zh/apps/gif-composer" ref="nofollow noopener noreferrer">GIF åˆæˆå™¨ - åº”ç”¨å•†åº— | By cmdragon</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fgif-decomposer" target="_blank" title="https://tools.cmdragon.cn/zh/apps/gif-decomposer" ref="nofollow noopener noreferrer">GIF åˆ†è§£å™¨ - åº”ç”¨å•†åº— | By cmdragon</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Ftext-steganography" target="_blank" title="https://tools.cmdragon.cn/zh/apps/text-steganography" ref="nofollow noopener noreferrer">æ–‡æœ¬éšå†™æœ¯ - åº”ç”¨å•†åº— | By cmdragon</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh" target="_blank" title="https://tools.cmdragon.cn/zh" ref="nofollow noopener noreferrer">CMDragon åœ¨çº¿å·¥å…· - é«˜çº§AIå·¥å…·ç®±ä¸å¼€å‘è€…å¥—ä»¶ | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%3Fcategory%3Dtrending" target="_blank" title="https://tools.cmdragon.cn/zh/apps?category=trending" ref="nofollow noopener noreferrer">åº”ç”¨å•†åº— - å‘ç°1000+æå‡æ•ˆç‡ä¸å¼€å‘çš„AIå·¥å…·å’Œå®ç”¨ç¨‹åº | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fchangelog" target="_blank" title="https://tools.cmdragon.cn/zh/changelog" ref="nofollow noopener noreferrer">CMDragon æ›´æ–°æ—¥å¿— - æœ€æ–°æ›´æ–°ã€åŠŸèƒ½ä¸æ”¹è¿› | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fsponsor" target="_blank" title="https://tools.cmdragon.cn/zh/sponsor" ref="nofollow noopener noreferrer">æ”¯æŒæˆ‘ä»¬ - æˆä¸ºèµåŠ©è€… | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Ftext-to-image-ai" target="_blank" title="https://tools.cmdragon.cn/zh/apps/text-to-image-ai" ref="nofollow noopener noreferrer">AIæ–‡æœ¬ç”Ÿæˆå›¾åƒ - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Ftemp-email" target="_blank" title="https://tools.cmdragon.cn/zh/apps/temp-email" ref="nofollow noopener noreferrer">ä¸´æ—¶é‚®ç®± - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fqrcode-parser" target="_blank" title="https://tools.cmdragon.cn/zh/apps/qrcode-parser" ref="nofollow noopener noreferrer">äºŒç»´ç è§£æå™¨ - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Ftext-to-mindmap" target="_blank" title="https://tools.cmdragon.cn/zh/apps/text-to-mindmap" ref="nofollow noopener noreferrer">æ–‡æœ¬è½¬æ€ç»´å¯¼å›¾ - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fregex-visualizer" target="_blank" title="https://tools.cmdragon.cn/zh/apps/regex-visualizer" ref="nofollow noopener noreferrer">æ­£åˆ™è¡¨è¾¾å¼å¯è§†åŒ–å·¥å…· - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fsteganography-tool" target="_blank" title="https://tools.cmdragon.cn/zh/apps/steganography-tool" ref="nofollow noopener noreferrer">æ–‡ä»¶éšå†™å·¥å…· - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fiptv-explorer" target="_blank" title="https://tools.cmdragon.cn/zh/apps/iptv-explorer" ref="nofollow noopener noreferrer">IPTV é¢‘é“æ¢ç´¢å™¨ - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fsnapdrop" target="_blank" title="https://tools.cmdragon.cn/zh/apps/snapdrop" ref="nofollow noopener noreferrer">å¿«ä¼  - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Flucky-draw" target="_blank" title="https://tools.cmdragon.cn/zh/apps/lucky-draw" ref="nofollow noopener noreferrer">éšæœºæŠ½å¥–å·¥å…· - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fanime-scene-finder" target="_blank" title="https://tools.cmdragon.cn/zh/apps/anime-scene-finder" ref="nofollow noopener noreferrer">åŠ¨æ¼«åœºæ™¯æŸ¥æ‰¾å™¨ - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Ftime-toolkit" target="_blank" title="https://tools.cmdragon.cn/zh/apps/time-toolkit" ref="nofollow noopener noreferrer">æ—¶é—´å·¥å…·ç®± - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fspeed-test" target="_blank" title="https://tools.cmdragon.cn/zh/apps/speed-test" ref="nofollow noopener noreferrer">ç½‘é€Ÿæµ‹è¯• - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fbackground-remover" target="_blank" title="https://tools.cmdragon.cn/zh/apps/background-remover" ref="nofollow noopener noreferrer">AI æ™ºèƒ½æŠ å›¾å·¥å…· - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fbackground-replacer" target="_blank" title="https://tools.cmdragon.cn/zh/apps/background-replacer" ref="nofollow noopener noreferrer">èƒŒæ™¯æ›¿æ¢å·¥å…· - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fartistic-qrcode" target="_blank" title="https://tools.cmdragon.cn/zh/apps/artistic-qrcode" ref="nofollow noopener noreferrer">è‰ºæœ¯äºŒç»´ç ç”Ÿæˆå™¨ - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fopen-graph-generator" target="_blank" title="https://tools.cmdragon.cn/zh/apps/open-graph-generator" ref="nofollow noopener noreferrer">Open Graph å…ƒæ ‡ç­¾ç”Ÿæˆå™¨ - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fimage-comparison" target="_blank" title="https://tools.cmdragon.cn/zh/apps/image-comparison" ref="nofollow noopener noreferrer">å›¾åƒå¯¹æ¯”å·¥å…· - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fimage-compressor" target="_blank" title="https://tools.cmdragon.cn/zh/apps/image-compressor" ref="nofollow noopener noreferrer">å›¾ç‰‡å‹ç¼©ä¸“ä¸šç‰ˆ - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fpassword-generator" target="_blank" title="https://tools.cmdragon.cn/zh/apps/password-generator" ref="nofollow noopener noreferrer">å¯†ç ç”Ÿæˆå™¨ - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fsvg-optimizer" target="_blank" title="https://tools.cmdragon.cn/zh/apps/svg-optimizer" ref="nofollow noopener noreferrer">SVGä¼˜åŒ–å™¨ - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fcolor-palette" target="_blank" title="https://tools.cmdragon.cn/zh/apps/color-palette" ref="nofollow noopener noreferrer">è°ƒè‰²æ¿ç”Ÿæˆå™¨ - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fonline-metronome" target="_blank" title="https://tools.cmdragon.cn/zh/apps/online-metronome" ref="nofollow noopener noreferrer">åœ¨çº¿èŠ‚æ‹å™¨ - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fip-geolocation" target="_blank" title="https://tools.cmdragon.cn/zh/apps/ip-geolocation" ref="nofollow noopener noreferrer">IPå½’å±åœ°æŸ¥è¯¢ - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fcss-grid-layout" target="_blank" title="https://tools.cmdragon.cn/zh/apps/css-grid-layout" ref="nofollow noopener noreferrer">CSSç½‘æ ¼å¸ƒå±€ç”Ÿæˆå™¨ - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Femail-validator" target="_blank" title="https://tools.cmdragon.cn/zh/apps/email-validator" ref="nofollow noopener noreferrer">é‚®ç®±éªŒè¯å·¥å…· - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fcalligraphy-practice" target="_blank" title="https://tools.cmdragon.cn/zh/apps/calligraphy-practice" ref="nofollow noopener noreferrer">ä¹¦æ³•ç»ƒä¹ å­—å¸– - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Ffinance-calculator-suite" target="_blank" title="https://tools.cmdragon.cn/zh/apps/finance-calculator-suite" ref="nofollow noopener noreferrer">é‡‘èè®¡ç®—å™¨å¥—ä»¶ - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fchinese-kinship-calculator" target="_blank" title="https://tools.cmdragon.cn/zh/apps/chinese-kinship-calculator" ref="nofollow noopener noreferrer">ä¸­å›½äº²æˆšå…³ç³»è®¡ç®—å™¨ - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fprotobuf-toolkit" target="_blank" title="https://tools.cmdragon.cn/zh/apps/protobuf-toolkit" ref="nofollow noopener noreferrer">Protocol Buffer å·¥å…·ç®± - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fip-geolocation" target="_blank" title="https://tools.cmdragon.cn/zh/apps/ip-geolocation" ref="nofollow noopener noreferrer">IPå½’å±åœ°æŸ¥è¯¢ - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fimage-upscaler" target="_blank" title="https://tools.cmdragon.cn/zh/apps/image-upscaler" ref="nofollow noopener noreferrer">å›¾ç‰‡æ— æŸæ”¾å¤§ - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Ftext-compare" target="_blank" title="https://tools.cmdragon.cn/zh/apps/text-compare" ref="nofollow noopener noreferrer">æ–‡æœ¬æ¯”è¾ƒå·¥å…· - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fip-batch-lookup" target="_blank" title="https://tools.cmdragon.cn/zh/apps/ip-batch-lookup" ref="nofollow noopener noreferrer">IPæ‰¹é‡æŸ¥è¯¢å·¥å…· - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fdomain-finder" target="_blank" title="https://tools.cmdragon.cn/zh/apps/domain-finder" ref="nofollow noopener noreferrer">åŸŸåæŸ¥è¯¢å·¥å…· - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fdns-toolkit" target="_blank" title="https://tools.cmdragon.cn/zh/apps/dns-toolkit" ref="nofollow noopener noreferrer">DNSå·¥å…·ç®± - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Ffavicon-generator" target="_blank" title="https://tools.cmdragon.cn/zh/apps/favicon-generator" ref="nofollow noopener noreferrer">ç½‘ç«™å›¾æ ‡ç”Ÿæˆå™¨ - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fsitemap_index.xml" target="_blank" title="https://tools.cmdragon.cn/sitemap_index.xml" ref="nofollow noopener noreferrer">XML Sitemap</a></li>
</ul>
</details>
<h3 data-id="heading-7">ç›‘å¬æ•°ç»„æ•´ä½“å˜åŒ–</h3>
<p>å½“ä½¿ç”¨æ•°ç»„æ–¹æ³•ä¿®æ”¹æ•°ç»„æ—¶ï¼Œ<code>watch</code>ä¼šè‡ªåŠ¨è§¦å‘ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { ref, watch } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>

<span class="hljs-keyword">const</span> todoList = <span class="hljs-title function_">ref</span>([<span class="hljs-string">'å­¦ä¹ Vue 3'</span>, <span class="hljs-string">'ç¼–å†™é¡¹ç›®å®æˆ˜'</span>])

<span class="hljs-comment">// ç›‘å¬æ•°ç»„æ•´ä½“å˜åŒ–</span>
<span class="hljs-title function_">watch</span>(todoList, <span class="hljs-function">(<span class="hljs-params">newList, oldList</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å¾…åŠäº‹é¡¹åˆ—è¡¨å‘ç”Ÿå˜åŒ–ï¼š'</span>, newList)
})

<span class="hljs-comment">// ä½¿ç”¨æ•°ç»„æ–¹æ³•ä¿®æ”¹æ•°ç»„ï¼Œè§¦å‘watch</span>
todoList.<span class="hljs-property">value</span>.<span class="hljs-title function_">push</span>(<span class="hljs-string">'ä¼˜åŒ–ä»£ç æ€§èƒ½'</span>)
todoList.<span class="hljs-property">value</span>.<span class="hljs-title function_">pop</span>()
</code></pre>
<h3 data-id="heading-8">ç›‘å¬æ•°ç»„å†…éƒ¨å…ƒç´ å˜åŒ–</h3>
<p>å¦‚æœéœ€è¦ç›‘å¬æ•°ç»„å…ƒç´ çš„ç›´æ¥ä¿®æ”¹ï¼ˆå¦‚<code>arr[0] = 'æ–°å€¼'</code>ï¼‰ï¼Œéœ€è¦å¼€å¯<code>deep</code>é€‰é¡¹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { ref, watch } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>

<span class="hljs-keyword">const</span> numbers = <span class="hljs-title function_">ref</span>([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>])

<span class="hljs-comment">// å¼€å¯deepé€‰é¡¹ï¼Œç›‘å¬æ•°ç»„å†…éƒ¨å…ƒç´ å˜åŒ–</span>
<span class="hljs-title function_">watch</span>(numbers, <span class="hljs-function">(<span class="hljs-params">newNumbers, oldNumbers</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ•°ç»„å…ƒç´ å‘ç”Ÿå˜åŒ–ï¼š'</span>, newNumbers)
}, { <span class="hljs-attr">deep</span>: <span class="hljs-literal">true</span> })

<span class="hljs-comment">// ç›´æ¥ä¿®æ”¹æ•°ç»„å…ƒç´ ï¼Œè§¦å‘watch</span>
numbers.<span class="hljs-property">value</span>[<span class="hljs-number">0</span>] = <span class="hljs-number">100</span>
</code></pre>
<h3 data-id="heading-9">æ‰§è¡Œæµç¨‹</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart LR
A[å®šä¹‰å“åº”å¼æ•°ç»„] --&gt; B[ä½¿ç”¨watchç›‘å¬æ•°ç»„ï¼Œå¯é€‰å¼€å¯deep]
B --&gt; C[ä¿®æ”¹æ•°ç»„]
C --&gt; D{ä¿®æ”¹æ–¹å¼?}
D --&gt;|æ•°ç»„æ–¹æ³•| E[è§¦å‘watchå›è°ƒ]
D --&gt;|ç´¢å¼•ä¿®æ”¹| F{æ˜¯å¦å¼€å¯deep?}
F --&gt;|æ˜¯| E
F --&gt;|å¦| G[ä¸è§¦å‘watchå›è°ƒ]
</code></pre>
<hr/>
<h2 data-id="heading-10">è¯¾åQuiz</h2>
<h3 data-id="heading-11">é—®é¢˜1</h3>
<p>å¦‚ä½•åœ¨Vue 3ä¸­åŒæ—¶ç›‘å¬å¤šä¸ªå“åº”å¼æ•°æ®çš„å˜åŒ–ï¼Ÿè¯·å†™å‡ºä»£ç ç¤ºä¾‹ã€‚</p>
<p><strong>ç­”æ¡ˆè§£æ</strong>ï¼š
å¯ä»¥å°†å¤šä¸ªæ•°æ®æºæ”¾å…¥æ•°ç»„ä¸­ä½œä¸º<code>watch</code>çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œå›è°ƒå‡½æ•°ä¼šæ¥æ”¶æ–°å€¼æ•°ç»„å’Œæ—§å€¼æ•°ç»„ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { ref, watch } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>

<span class="hljs-keyword">const</span> name = <span class="hljs-title function_">ref</span>(<span class="hljs-string">''</span>)
<span class="hljs-keyword">const</span> age = <span class="hljs-title function_">ref</span>(<span class="hljs-number">0</span>)

<span class="hljs-title function_">watch</span>(
  [name, age],
  <span class="hljs-function">(<span class="hljs-params">[newName, newAge], [oldName, oldAge]</span>) =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`å§“åä» <span class="hljs-subst">${oldName}</span> å˜ä¸º <span class="hljs-subst">${newName}</span>`</span>)
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`å¹´é¾„ä» <span class="hljs-subst">${oldAge}</span> å˜ä¸º <span class="hljs-subst">${newAge}</span>`</span>)
  }
)
</code></pre>
<h3 data-id="heading-12">é—®é¢˜2</h3>
<p>å½“éœ€è¦ç›‘å¬å“åº”å¼å¯¹è±¡ä¸­å¤šä¸ªå±æ€§çš„è®¡ç®—ç»“æœæ—¶ï¼Œåº”è¯¥ä½¿ç”¨ä»€ä¹ˆæ–¹å¼ï¼Ÿè¯·å†™å‡ºä»£ç ç¤ºä¾‹ã€‚</p>
<p><strong>ç­”æ¡ˆè§£æ</strong>ï¼š
ä½¿ç”¨getterå‡½æ•°ä½œä¸º<code>watch</code>çš„ç›‘å¬æºï¼Œåœ¨getterå‡½æ•°ä¸­è®¡ç®—éœ€è¦ç›‘å¬çš„ç»“æœï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { reactive, watch } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>

<span class="hljs-keyword">const</span> product = <span class="hljs-title function_">reactive</span>({
  <span class="hljs-attr">stock</span>: <span class="hljs-number">100</span>,
  <span class="hljs-attr">sales</span>: <span class="hljs-number">30</span>
})

<span class="hljs-comment">// ç›‘å¬å‰©ä½™åº“å­˜</span>
<span class="hljs-title function_">watch</span>(
  <span class="hljs-function">() =&gt;</span> product.<span class="hljs-property">stock</span> - product.<span class="hljs-property">sales</span>,
  <span class="hljs-function">(<span class="hljs-params">newStock, oldStock</span>) =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`å‰©ä½™åº“å­˜ä» <span class="hljs-subst">${oldStock}</span> å˜ä¸º <span class="hljs-subst">${newStock}</span>`</span>)
  }
)
</code></pre>
<h3 data-id="heading-13">é—®é¢˜3</h3>
<p>ä¸ºä»€ä¹ˆç›´æ¥ä¿®æ”¹æ•°ç»„çš„ç´¢å¼•å…ƒç´ æ—¶ï¼Œ<code>watch</code>é»˜è®¤ä¸ä¼šè§¦å‘ï¼Ÿå¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜ï¼Ÿ</p>
<p><strong>ç­”æ¡ˆè§£æ</strong>ï¼š
Vueçš„å“åº”å¼ç³»ç»Ÿé»˜è®¤ä¸ä¼šç›‘å¬æ•°ç»„çš„ç´¢å¼•ä¿®æ”¹ï¼Œå› ä¸ºè¿™åœ¨æ€§èƒ½ä¸Šæ˜¯ä½æ•ˆçš„ã€‚è§£å†³æ–¹æ³•æœ‰ä¸¤ç§ï¼š</p>
<ol>
<li>å¼€å¯<code>deep</code>é€‰é¡¹ï¼Œæ·±åº¦ç›‘å¬æ•°ç»„å†…éƒ¨å…ƒç´ å˜åŒ–</li>
<li>ä½¿ç”¨Vueæä¾›çš„æ•°ç»„æ–¹æ³•ï¼ˆå¦‚<code>push</code>ã€<code>splice</code>ç­‰ï¼‰æ¥ä¿®æ”¹æ•°ç»„</li>
</ol>
<hr/>
<h2 data-id="heading-14">å¸¸è§æŠ¥é”™è§£å†³æ–¹æ¡ˆ</h2>
<h3 data-id="heading-15">æŠ¥é”™1ï¼š<code>watch source must be a ref, reactive object, getter function, or array of these</code></h3>
<ul>
<li><strong>åŸå› </strong>ï¼š<code>watch</code>çš„ç›‘å¬æºç±»å‹ä¸æ­£ç¡®ï¼Œä¸æ˜¯Vueæ”¯æŒçš„å“åº”å¼æ•°æ®æºç±»å‹ã€‚</li>
<li><strong>è§£å†³æ–¹æ³•</strong>ï¼šç¡®ä¿ç›‘å¬æºæ˜¯refã€reactiveå¯¹è±¡ã€getterå‡½æ•°æˆ–è¿™äº›ç±»å‹çš„æ•°ç»„ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ æƒ³ç›‘å¬æ™®é€šå˜é‡ï¼Œéœ€è¦å…ˆå°†å…¶è½¬æ¢ä¸ºrefï¼š</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// é”™è¯¯ç”¨æ³•ï¼šç›‘å¬æ™®é€šå˜é‡</span>
<span class="hljs-keyword">let</span> count = <span class="hljs-number">0</span>
<span class="hljs-title function_">watch</span>(count, <span class="hljs-function">() =&gt;</span> { <span class="hljs-comment">/* ... */</span> })

<span class="hljs-comment">// æ­£ç¡®ç”¨æ³•ï¼šè½¬æ¢ä¸ºref</span>
<span class="hljs-keyword">const</span> count = <span class="hljs-title function_">ref</span>(<span class="hljs-number">0</span>)
<span class="hljs-title function_">watch</span>(count, <span class="hljs-function">() =&gt;</span> { <span class="hljs-comment">/* ... */</span> })
</code></pre>
<h3 data-id="heading-16">æŠ¥é”™2ï¼šæ•°ç»„å…ƒç´ ä¿®æ”¹å<code>watch</code>ä¸è§¦å‘</h3>
<ul>
<li><strong>åŸå› </strong>ï¼šç›´æ¥ä¿®æ”¹æ•°ç»„ç´¢å¼•å…ƒç´ ï¼ŒVueé»˜è®¤ä¸ç›‘å¬è¿™ç§å˜åŒ–ã€‚</li>
<li><strong>è§£å†³æ–¹æ³•</strong>ï¼šå¼€å¯<code>deep</code>é€‰é¡¹ï¼Œæˆ–è€…ä½¿ç”¨æ•°ç»„æ–¹æ³•ä¿®æ”¹æ•°ç»„ï¼š</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ–¹æ³•1ï¼šå¼€å¯deepé€‰é¡¹</span>
<span class="hljs-title function_">watch</span>(numbers, <span class="hljs-function">() =&gt;</span> { <span class="hljs-comment">/* ... */</span> }, { <span class="hljs-attr">deep</span>: <span class="hljs-literal">true</span> })

<span class="hljs-comment">// æ–¹æ³•2ï¼šä½¿ç”¨æ•°ç»„æ–¹æ³•</span>
numbers.<span class="hljs-property">value</span>.<span class="hljs-title function_">splice</span>(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">100</span>)
</code></pre>
<h3 data-id="heading-17">æŠ¥é”™3ï¼š<code>Cannot read property 'value' of undefined</code></h3>
<ul>
<li><strong>åŸå› </strong>ï¼šåœ¨getterå‡½æ•°æˆ–å›è°ƒå‡½æ•°ä¸­è®¿é—®äº†æœªå®šä¹‰çš„å“åº”å¼å±æ€§ã€‚</li>
<li><strong>è§£å†³æ–¹æ³•</strong>ï¼šç¡®ä¿æ‰€æœ‰è®¿é—®çš„å±æ€§éƒ½å·²æ­£ç¡®å®šä¹‰ï¼Œæˆ–è€…æ·»åŠ å¯é€‰é“¾æ“ä½œç¬¦ï¼š</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// é”™è¯¯ç”¨æ³•ï¼šè®¿é—®æœªå®šä¹‰çš„å±æ€§</span>
<span class="hljs-title function_">watch</span>(<span class="hljs-function">() =&gt;</span> user.<span class="hljs-property">address</span>.<span class="hljs-property">city</span>, <span class="hljs-function">() =&gt;</span> { <span class="hljs-comment">/* ... */</span> })

<span class="hljs-comment">// æ­£ç¡®ç”¨æ³•ï¼šæ·»åŠ å¯é€‰é“¾</span>
<span class="hljs-title function_">watch</span>(<span class="hljs-function">() =&gt;</span> user?.<span class="hljs-property">address</span>?.<span class="hljs-property">city</span>, <span class="hljs-function">() =&gt;</span> { <span class="hljs-comment">/* ... */</span> })
</code></pre>
<hr/>
<h2 data-id="heading-18">å‚è€ƒé“¾æ¥</h2>
<p>å‚è€ƒé“¾æ¥ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fvuejs.org%2Fguide%2Fessentials%2Fwatchers.html" target="_blank" title="https://vuejs.org/guide/essentials/watchers.html" ref="nofollow noopener noreferrer">vuejs.org/guide/essenâ€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸€æ–‡è¯»æ‡‚ pnpm Workspace çš„ Package Map]]></title>    <link>https://juejin.cn/post/7598881914201948210</link>    <guid>https://juejin.cn/post/7598881914201948210</guid>    <pubDate>2026-01-25T07:55:24.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7598881914201948210" data-draft-id="7598947628467224622" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸€æ–‡è¯»æ‡‚ pnpm Workspace çš„ Package Map"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-25T07:55:24.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="èƒ¡ä¸€é—»"/> <meta itemprop="url" content="https://juejin.cn/user/3984285870588093"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸€æ–‡è¯»æ‡‚ pnpm Workspace çš„ Package Map
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3984285870588093/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    èƒ¡ä¸€é—»
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-25T07:55:24.000Z" title="Sun Jan 25 2026 07:55:24 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    7
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€æœ€æ ¸å¿ƒçš„é—®é¢˜å…ˆå›ç­”</h2>
<blockquote>
<p><strong>ä¸ºä»€ä¹ˆæˆ‘åªåœ¨ <code>pnpm-workspace.yaml</code> é‡Œå†™äº† <code>apps/*</code>ï¼Œ<br/>
pnpm å°±èƒ½çŸ¥é“ <code>apps/web</code>ã€<code>apps/api</code> è¿™äº›åŒ…ï¼Œå¹¶æŠŠå®ƒä»¬ç”¨èµ·æ¥ï¼Ÿ</strong></p>
</blockquote>
<p><strong>ç­”æ¡ˆåªæœ‰ä¸€å¥è¯ï¼š</strong></p>
<blockquote>
<p>å› ä¸º pnpm åœ¨å¯åŠ¨æ—¶ï¼Œ<br/>
<strong>å…ˆç”¨ Glob è§„åˆ™æ‰¾ç›®å½• â†’ å†è¯†åˆ«å“ªäº›æ˜¯çœŸæ­£çš„åŒ… â†’ åœ¨å†…å­˜é‡Œè®°ä½å®ƒä»¬çš„ name å’Œè·¯å¾„</strong>ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-1">äºŒã€ä»€ä¹ˆæ˜¯ Globï¼Ÿï¼ˆä¸€å®šè¦å…ˆæ‡‚è¿™ä¸ªï¼‰</h2>
<h3 data-id="heading-2">1ï¸âƒ£ Glob æ˜¯ä»€ä¹ˆ</h3>
<blockquote>
<p><strong>Glob æ˜¯ä¸€ç§â€œç”¨æ¨¡å¼åŒ¹é…æ–‡ä»¶è·¯å¾„â€çš„è§„åˆ™</strong></p>
</blockquote>
<p>ä½ æ¯å¤©å…¶å®éƒ½åœ¨ç”¨ï¼Œæ¯”å¦‚ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">ls</span> *.js
<span class="hljs-built_in">ls</span> apps/*
</code></pre>
<p>è¿™é‡Œçš„ <code>*</code> å°±æ˜¯ Globã€‚</p>
<hr/>
<h3 data-id="heading-3">2ï¸âƒ£ Glob çš„â€œå…¨ç§°â€æ˜¯å•¥ï¼Ÿ</h3>
<ul>
<li><strong>æ²¡æœ‰ä¸¥æ ¼å®˜æ–¹å…¨ç§°</strong></li>
<li>çº¦å®šä¿—æˆç†è§£ä¸ºï¼š<strong>Global Pattern Matching</strong></li>
<li>èµ·æºäº <strong>Unix Shell</strong></li>
</ul>
<p>ğŸ‘‰ å®ƒä¸æ˜¯ pnpm å‘æ˜çš„ï¼Œæ˜¯æ•´ä¸ªæ“ä½œç³»ç»Ÿå±‚é¢çš„ä¸œè¥¿ã€‚</p>
<hr/>
<h3 data-id="heading-4">3ï¸âƒ£ Glob èƒ½å¹²ä»€ä¹ˆï¼Ÿ</h3>
<p>Glob <strong>åªåšä¸€ä»¶äº‹</strong>ï¼š</p>
<blockquote>
<p>ğŸ‘‰ <strong>åœ¨ç£ç›˜ä¸Šæ‰¾å‡ºâ€œè·¯å¾„é•¿å¾—åƒâ€çš„æ–‡ä»¶æˆ–ç›®å½•</strong></p>
</blockquote>
<p>âš ï¸ é‡è¦ï¼š</p>
<ul>
<li>Glob <strong>ä¸æ‡‚ä»€ä¹ˆæ˜¯åŒ…</strong></li>
<li>Glob <strong>ä¸çœ‹ package.json</strong></li>
<li>å®ƒåªè®¤è·¯å¾„å½¢çŠ¶</li>
</ul>
<hr/>
<h2 data-id="heading-5">ä¸‰ã€<code>apps/*</code> åˆ°åº•æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ</h2>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">packages:</span>
  - apps/*
</code></pre>
<p>è¿™å¥è¯çš„çœŸå®å«ä¹‰æ˜¯ï¼š</p>
<blockquote>
<p>â€œè¯·åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹ï¼Œ<br/>
æ‰¾å‡ºæ‰€æœ‰è·¯å¾„å½¢çŠ¶åƒ <code>apps/æŸä¸ªåå­—</code> çš„ç›®å½•ã€‚â€</p>
</blockquote>
<p>æ¯”å¦‚ç£ç›˜ä¸Šæœ‰ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">apps/web
apps/api
apps/docs
</code></pre>
<p>Glob åŒ¹é…ç»“æœå°±æ˜¯è¿™ä¸‰ä¸ªã€‚</p>
<hr/>
<h2 data-id="heading-6">å››ã€pnpm æ˜¯æ€ä¹ˆä¸€æ­¥æ­¥å·¥ä½œçš„ï¼Ÿï¼ˆé‡ç‚¹ï¼‰</h2>
<h3 data-id="heading-7">ç¬¬ä¸€æ­¥ï¼špnpm åˆ¤æ–­æ˜¯ä¸æ˜¯ Workspace</h3>
<p>pnpm å¯åŠ¨æ—¶å…ˆçœ‹ï¼š</p>
<blockquote>
<p><strong>æœ‰æ²¡æœ‰ <code>pnpm-workspace.yaml</code>ï¼Ÿ</strong></p>
</blockquote>
<ul>
<li>æœ‰ â†’ Workspace æ¨¡å¼</li>
<li>æ²¡æœ‰ â†’ å•åŒ…æ¨¡å¼</li>
</ul>
<p>âš ï¸ pnpm <strong>åªè®¤è¿™ä¸ªæ–‡ä»¶</strong>ã€‚</p>
<hr/>
<h3 data-id="heading-8">ç¬¬äºŒæ­¥ï¼šGlob å±•å¼€ï¼ˆæ‰¾ç›®å½•ï¼‰</h3>
<p>pnpm è¯»å–ï¼š</p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">packages:</span>
  - apps/*
</code></pre>
<p>ç„¶åï¼š</p>
<ul>
<li>ä½¿ç”¨ Glob è§„åˆ™</li>
<li>éå†æ–‡ä»¶ç³»ç»Ÿ</li>
<li>æ‰¾åˆ°æ‰€æœ‰åŒ¹é…çš„ç›®å½•ï¼š</li>
</ul>
<pre><code class="hljs language-bash" lang="bash">apps/web
apps/api
apps/docs
</code></pre>
<p>âš ï¸ æ­¤æ—¶ pnpm <strong>è¿˜ä¸çŸ¥é“è°æ˜¯åŒ…</strong>ã€‚</p>
<hr/>
<h3 data-id="heading-9">ç¬¬ä¸‰æ­¥ï¼šè¯†åˆ«â€œçœŸæ­£çš„åŒ…â€</h3>
<p>pnpm æ¥ä¸‹æ¥ä¼šé€ä¸ªæ£€æŸ¥ï¼š</p>
<ul>
<li>apps/web â†’ æœ‰ <code>package.json</code> âœ…</li>
<li>apps/api â†’ æœ‰ <code>package.json</code> âœ…</li>
<li>apps/docs â†’ æ²¡æœ‰ âŒ</li>
</ul>
<p>åªæœ‰<strong>æœ‰ <code>package.json</code> çš„ç›®å½•</strong>æ‰ç®— workspace åŒ…ã€‚</p>
<hr/>
<h3 data-id="heading-10">ç¬¬å››æ­¥ï¼šå»ºç«‹ Package Mapï¼ˆæœ€å…³é”®ï¼‰</h3>
<p>pnpm ä¼šè¯»å–æ¯ä¸ªåŒ…çš„ <code>package.json</code> é‡Œçš„ï¼š</p>
<pre><code class="hljs language-perl" lang="perl">{
  <span class="hljs-string">"name"</span>: <span class="hljs-string">"@my-org/web"</span>,
  <span class="hljs-string">"version"</span>: <span class="hljs-string">"1.0.0"</span>
}
</code></pre>
<p>ç„¶ååœ¨<strong>å†…å­˜ä¸­å»ºç«‹ä¸€å¼ è¡¨</strong>ï¼š</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-variable">@my-org</span>/web  -&gt; apps/web
<span class="hljs-variable">@my-org</span>/api  -&gt; apps/api
<span class="hljs-variable">@my-org</span>/ui   -&gt; packages/ui
</code></pre>
<p>ğŸ‘‰ <strong>è¿™ä¸€æ­¥éå¸¸é‡è¦ï¼š</strong></p>
<ul>
<li>pnpm è®¤çš„æ˜¯ <strong>name</strong></li>
<li>ä¸æ˜¯ç›®å½•å</li>
<li>ä¸æ˜¯è·¯å¾„</li>
</ul>
<hr/>
<h2 data-id="heading-11">äº”ã€pnpm æ˜¯ä»€ä¹ˆæ—¶å€™æŠŠåŒ…â€œè¿èµ·æ¥â€çš„ï¼Ÿ</h2>
<h3 data-id="heading-12">âŒ ä¸æ˜¯æ‰«ææ—¶</h3>
<h3 data-id="heading-13">âœ… æ˜¯å®‰è£…ä¾èµ–æ—¶</h3>
<p>æ¯”å¦‚ <code>apps/web/package.json</code>ï¼š</p>
<pre><code class="hljs language-perl" lang="perl">{
  <span class="hljs-string">"dependencies"</span>: {
    <span class="hljs-string">"@my-org/ui"</span>: <span class="hljs-string">"^1.0.0"</span>
  }
}
</code></pre>
<p>pnpm åœ¨å®‰è£…æ—¶ä¼šæƒ³ï¼š</p>
<ol>
<li>æˆ‘è¦æ‰¾ <code>@my-org/ui</code></li>
<li>Workspace é‡Œæœ‰æ²¡æœ‰åŒååŒ…ï¼Ÿ</li>
<li>æœ‰ â†’ ç”¨æœ¬åœ°çš„</li>
<li>æ²¡æœ‰ â†’ å» npm ä»“åº“ä¸‹è½½</li>
</ol>
<p>ğŸ‘‰ æ‰€è°“â€œè¿èµ·æ¥â€ï¼Œæœ¬è´¨æ˜¯ï¼š</p>
<blockquote>
<p><strong>æŠŠä¾èµ–æŒ‡å‘æœ¬åœ° workspace åŒ…ï¼Œè€Œä¸æ˜¯è¿œç¨‹åŒ…</strong></p>
</blockquote>
<hr/>
<h2 data-id="heading-14">å…­ã€å¦‚æœæ²¡æœ‰ <code>pnpm-workspace.yaml</code> ä¼šæ€æ ·ï¼Ÿ</h2>
<p>pnpm ä¼šï¼š</p>
<ul>
<li>âŒ ä¸æ‰«æå…¶ä»–ç›®å½•</li>
<li>âŒ ä¸å»ºç«‹åŒ…æ˜ å°„è¡¨</li>
<li>âŒ ä¸çŸ¥é“æœ¬åœ°è¿˜æœ‰åŒååŒ…</li>
</ul>
<p>ç»“æœå°±æ˜¯ï¼š</p>
<blockquote>
<p>å³ä½¿ä½ æœ¬åœ°æœ‰ <code>packages/ui</code>ï¼Œ<br/>
pnpm ä¹Ÿä¼šå» npm ä»“åº“ä¸‹è½½ä¸€ä¸ªåŒååŒ…ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-15">ä¸ƒã€mac ä¸Šæ€ä¹ˆè‡ªå·±â€œçœ‹åˆ°â€ Glob åœ¨å¹²å˜›ï¼Ÿ</h2>
<p>macOS é»˜è®¤ç”¨çš„æ˜¯ <strong>zsh</strong>ï¼Œå®ƒå¤©ç”Ÿæ”¯æŒ Globã€‚</p>
<p>ä½ å¯ä»¥ç›´æ¥åœ¨ç»ˆç«¯è¯•ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># çœ‹ Glob åŒ¹é…äº†å“ªäº›ç›®å½•</span>
<span class="hljs-built_in">ls</span> apps/*
</code></pre>
<p>å†è¯•ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># çœ‹å“ªäº›æ˜¯çœŸæ­£çš„åŒ…</span>
<span class="hljs-built_in">ls</span> apps/*/package.json
</code></pre>
<p>ğŸ‘‰ è¿™ä¸¤æ­¥ï¼Œå’Œ pnpm å†…éƒ¨åšçš„äº‹æƒ…å‡ ä¹ä¸€æ¨¡ä¸€æ ·ã€‚</p>
<hr/>
<h2 data-id="heading-16">å…«ã€æœ€å®¹æ˜“è¸©çš„å‘ï¼ˆå°ç™½å¿…çœ‹ï¼‰</h2>
<h3 data-id="heading-17">âŒ é”™è¯¯å†™æ³•</h3>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">packages:</span>
  - apps
</code></pre>
<p>åªä¼šå°è¯•ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">apps/package.json
</code></pre>
<h3 data-id="heading-18">âœ… æ­£ç¡®å†™æ³•</h3>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">packages:</span>
  - apps/*
</code></pre>
<hr/>
<h2 data-id="heading-19">ä¹ã€ç»ˆæä¸€å¥è¯æ€»ç»“ï¼ˆèƒŒä¸‹æ¥å°±å¤Ÿäº†ï¼‰</h2>
<blockquote>
<p><strong>Glob åªæ˜¯ç”¨æ¥æ‰¾ç›®å½•çš„è§„åˆ™ã€‚<br/>
pnpm ç”¨ Glob æ‰¾åˆ°ç›®å½•åï¼Œå†é€šè¿‡ package.json åˆ¤æ–­å“ªäº›æ˜¯åŒ…ï¼Œ<br/>
å¹¶æŠŠå®ƒä»¬çš„ name å’Œè·¯å¾„è®°åœ¨å†…å­˜é‡Œã€‚<br/>
çœŸæ­£æŠŠåŒ…â€œè¿èµ·æ¥â€çš„ï¼Œæ˜¯åé¢çš„ä¾èµ–è§£æï¼Œè€Œä¸æ˜¯ Glob æœ¬èº«ã€‚</strong></p>
</blockquote>
<hr/>
<p><strong>pnpm Workspace å…¨æµç¨‹å›¾</strong></p>
<pre><code class="hljs language-text" lang="text">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ä½ è¿è¡Œ pnpm install        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â‘  æ˜¯å¦å­˜åœ¨ pnpm-workspace   â”‚
â”‚    .yaml ?                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      æœ‰      â”‚        æ²¡æœ‰
      â–¼       â”‚         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Workspace æ¨¡å¼    â”‚   â”‚ å•åŒ…æ¨¡å¼          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ï¼ˆä¸æ‰«æåˆ«çš„åŒ…ï¼‰     â”‚
         â”‚             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â‘¡ è¯»å– pnpm-workspace.yaml â”‚
â”‚    packages:               â”‚
â”‚    - apps/*                â”‚
â”‚    - packages/*            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â‘¢ Glob å±•å¼€ï¼ˆæ‰¾ç›®å½•ï¼‰        â”‚
â”‚ apps/* â†’                   â”‚
â”‚   apps/web                 â”‚
â”‚   apps/api                 â”‚
â”‚   apps/docs                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â‘£ åˆ¤æ–­æ˜¯å¦æ˜¯åŒ…              â”‚
â”‚   æœ‰æ²¡æœ‰ package.json ?     â”‚
â”‚   web  âœ…                  â”‚
â”‚   api  âœ…                  â”‚
â”‚   docs âŒ                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â‘¤ è¯»å– package.json        â”‚
â”‚   name / version           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â‘¥ å»ºç«‹ Package Mapï¼ˆå†…å­˜ï¼‰   â”‚
â”‚   @my-org/web â†’ apps/web   â”‚
â”‚   @my-org/api â†’ apps/api   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â‘¦ ä¾èµ–è§£æï¼ˆinstall é˜¶æ®µï¼‰   â”‚
â”‚ web ä¾èµ– @my-org/ui ?       â”‚
â”‚ â†’ workspace é‡Œæœ‰å—ï¼Ÿ         â”‚
â”‚ â†’ æœ‰ â†’ ç”¨æœ¬åœ°åŒ…              â”‚
â”‚ â†’ æ²¡æœ‰ â†’ å» npm ä»“åº“         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[promise-logic -- å£°æ˜å¼ Promise é€»è¾‘ç»„åˆ]]></title>    <link>https://juejin.cn/post/7598574507347542051</link>    <guid>https://juejin.cn/post/7598574507347542051</guid>    <pubDate>2026-01-25T07:58:54.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7598574507347542051" data-draft-id="7598588085597257768" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="promise-logic -- å£°æ˜å¼ Promise é€»è¾‘ç»„åˆ"/> <meta itemprop="keywords" content="JavaScript,å¼€æº"/> <meta itemprop="datePublished" content="2026-01-25T07:58:54.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="xier123456"/> <meta itemprop="url" content="https://juejin.cn/user/546930955651113"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            promise-logic -- å£°æ˜å¼ Promise é€»è¾‘ç»„åˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/546930955651113/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    xier123456
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-25T07:58:54.000Z" title="Sun Jan 25 2026 07:58:54 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong>ç”¨é€»è¾‘æ¦‚å¿µæ›¿ä»£ API è®°å¿†</strong><br/>
<code>promise-logic</code> çš„è®¾è®¡æ˜¯ï¼š<strong>å¼€å‘è€…åº”ä¸“æ³¨äºä¸šåŠ¡é€»è¾‘ï¼Œè€Œé Promise API çš„ç»†èŠ‚</strong>ã€‚<br/>
ä¼ ç»Ÿ Promise ç»„åˆï¼ˆå¦‚ <code>Promise.all</code>ã€<code>Promise.race</code>ï¼‰çš„å‘½åä¸è¯­ä¹‰ä¸å¤Ÿç›´è§‚ï¼Œå°¤å…¶åœ¨å¤æ‚å¼‚æ­¥åœºæ™¯ä¸‹ï¼Œä»£ç å¯è¯»æ€§è¿…é€Ÿä¸‹é™ã€‚<br/>
<code>promise-logic</code> é€šè¿‡<strong>é€»è¾‘é—¨ï¼ˆLogic Gateï¼‰</strong> çš„æ–¹å¼ï¼Œå°†å¼‚æ­¥ç»„åˆæŠ½è±¡ä¸º <code>and</code>ã€<code>or</code>ã€<code>xor</code> ç­‰é€»è¾‘æ“ä½œï¼Œä½¿ä»£ç è¯­ä¹‰æ¸…æ™°ã€é€»è¾‘è‡ªè§£é‡Šã€‚</p>
<hr/>
<h3 data-id="heading-0"><strong>ç›¸å…³åŠŸèƒ½</strong></h3>
<ol>
<li>
<p><strong>é€»è¾‘è¯­ä¹‰åŒ–</strong></p>
<ul>
<li>
<p><code>and</code>ï¼šæ‰€æœ‰ä»»åŠ¡å¿…é¡»æˆåŠŸï¼ˆç­‰ä»·äº <code>Promise.all</code>ï¼‰</p>
</li>
<li>
<p><code>or</code>ï¼šè‡³å°‘ä¸€ä¸ªä»»åŠ¡æˆåŠŸï¼ˆç­‰ä»·äº <code>Promise.race</code>ï¼‰</p>
</li>
<li>
<p><code>xor</code>ï¼š<strong>æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªä»»åŠ¡æˆåŠŸ</strong></p>
</li>
<li>
<p><code>nand</code>ï¼šæ‰€æœ‰ä»»åŠ¡å‡å¤±è´¥</p>
</li>
<li>
<p><code>not</code>ï¼šåè½¬å•ä¸ª Promise çš„ç»“æœ</p>
</li>
<li>
<p><code>majority</code>ï¼šå¤šæ•°ä»»åŠ¡æˆåŠŸ</p>
</li>
</ul>
</li>
<li>
<p><strong>é›¶ä¾èµ–</strong><br/>
ä»…ä¾èµ–åŸç”Ÿ Promiseï¼Œæ— é¢å¤–è¿è¡Œæ—¶ä¾èµ–ã€‚</p>
</li>
<li>
<p><strong>å…¨æµ‹è¯•è¦†ç›–</strong><br/>
æ‰€æœ‰é€»è¾‘é—¨å‡ç»è¿‡ä¸¥æ ¼å•å…ƒæµ‹è¯•ï¼Œç¡®ä¿è¡Œä¸ºç¬¦åˆé¢„æœŸã€‚</p>
</li>
<li>
<p><strong>é”™è¯¯åˆ†ç±»æ˜ç¡®</strong></p>
<ul>
<li><code>PromiseLogicError</code> ç»Ÿä¸€é”™è¯¯ç±»å‹</li>
<li><code>error.type</code> åŒºåˆ†å…·ä½“é€»è¾‘é”™è¯¯ï¼ˆå¦‚ <code>'XOR_ERROR'</code>ï¼‰</li>
</ul>
</li>
</ol>
<hr/>
<h3 data-id="heading-1"><strong>å®‰è£…</strong></h3>
<pre><code class="hljs language-bash" lang="bash">npm install promise-logic
</code></pre>
<hr/>
<h3 data-id="heading-2"><strong>å¿«é€Ÿå¼€å§‹</strong></h3>
<h4 data-id="heading-3">ç¤ºä¾‹ï¼šä¸»å¤‡æœåŠ¡è°ƒç”¨ï¼ˆXOR åœºæ™¯ï¼‰</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">PromiseLogic</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'promise-logic'</span>;

<span class="hljs-comment">// ä¸»æœåŠ¡è°ƒç”¨</span>
<span class="hljs-keyword">const</span> primary = <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'https://api.main.com/data'</span>);
<span class="hljs-comment">// å¤‡ç”¨æœåŠ¡è°ƒç”¨</span>
<span class="hljs-keyword">const</span> backup = <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'https://api.backup.com/data'</span>);

<span class="hljs-comment">// æ‰§è¡Œ XOR é€»è¾‘ï¼šæœ‰ä¸”ä»…æœ‰ä¸€ä¸ªæˆåŠŸ</span>
<span class="hljs-title class_">PromiseLogic</span>.<span class="hljs-title function_">xor</span>([primary, backup])
  .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">result</span> =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æˆåŠŸè·å–æ•°æ®:'</span>, result);
  })
  .<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> {
    <span class="hljs-keyword">if</span> (error.<span class="hljs-property">type</span> === <span class="hljs-string">'XOR_ERROR'</span>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'ä¸»å¤‡æœåŠ¡å‡æˆåŠŸæˆ–å‡å¤±è´¥ï¼Œä¸ç¬¦åˆ XOR è¯­ä¹‰'</span>);
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'ç½‘ç»œé”™è¯¯:'</span>, error);
    }
  });
</code></pre>
<h4 data-id="heading-4">ç¤ºä¾‹ï¼šå¤šæ•°å†³å†³ç­–ï¼ˆMajority åœºæ™¯ï¼‰</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">PromiseLogic</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'promise-logic'</span>;

<span class="hljs-keyword">const</span> services = [
  <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'https://api.node1.com/vote'</span>),
  <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'https://api.node2.com/vote'</span>),
  <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'https://api.node3.com/vote'</span>)
];

<span class="hljs-title class_">PromiseLogic</span>.<span class="hljs-title function_">majority</span>(services)
  .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">results</span> =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å¤šæ•°æœåŠ¡è¿”å›æˆåŠŸ:'</span>, results);
  })
  .<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'å¤šæ•°æœåŠ¡å¤±è´¥:'</span>, error);
  });
</code></pre>
<h3 data-id="heading-5">typescriptç±»å‹æ–­è¨€åœºæ™¯</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">PromiseLogic</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'promise-logic/typescript'</span>;

<span class="hljs-keyword">const</span> services = [
  <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'https://api.node1.com/vote'</span>),
  <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'https://api.node2.com/vote'</span>),
  <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'https://api.node3.com/vote'</span>)
];

<span class="hljs-comment">//å¯ä»¥è¿›è¡Œç±»å‹æ–­è¨€ï¼Œä¹Ÿå¯ä»¥é»˜è®¤è®©PromiseLogicè‡ªåŠ¨æ¨æ–­ç±»å‹</span>
<span class="hljs-title class_">PromiseLogic</span>.<span class="hljs-property">majority</span>&lt;<span class="hljs-title class_">Response</span>&gt;(services)
  .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">results</span> =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å¤šæ•°æœåŠ¡è¿”å›æˆåŠŸ:'</span>, results);
  })
  .<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'å¤šæ•°æœåŠ¡å¤±è´¥:'</span>, error);
  });
</code></pre>
<hr/>
<h3 data-id="heading-6"><strong>API å‚è€ƒ</strong></h3>

































<table><thead><tr><th align="left">API</th><th align="left">è¯´æ˜</th></tr></thead><tbody><tr><td align="left"><code>and</code></td><td align="left">æ‰€æœ‰ Promise æˆåŠŸï¼Œè¿”å›ç»“æœæ•°ç»„ï¼›ä»»ä¸€å¤±è´¥åˆ™æ•´ä½“å¤±è´¥ã€‚</td></tr><tr><td align="left"><code>or</code></td><td align="left">è‡³å°‘ä¸€ä¸ª Promise æˆåŠŸï¼Œè¿”å›é¦–ä¸ªæˆåŠŸç»“æœï¼›å…¨éƒ¨å¤±è´¥åˆ™æ•´ä½“å¤±è´¥ã€‚</td></tr><tr><td align="left"><code>xor</code></td><td align="left"><strong>æœ‰ä¸”ä»…æœ‰ä¸€ä¸ª Promise æˆåŠŸ</strong>ï¼Œè¿”å›è¯¥ç»“æœï¼›å¦åˆ™æŠ›å‡º <code>XOR_ERROR</code>ã€‚</td></tr><tr><td align="left"><code>nand</code></td><td align="left">æ‰€æœ‰ Promise å‡å¤±è´¥ï¼Œè¿”å›é”™è¯¯æ•°ç»„ï¼›ä»»ä¸€æˆåŠŸåˆ™æ•´ä½“å¤±è´¥ã€‚</td></tr><tr><td align="left"><code>not</code></td><td align="left">åè½¬å•ä¸ª Promise çš„ç»“æœ</td></tr><tr><td align="left"><code>majority</code></td><td align="left">è¶…è¿‡åŠæ•° Promise æˆåŠŸï¼Œè¿”å›æˆåŠŸç»“æœæ•°ç»„ï¼›å¦åˆ™æ•´ä½“å¤±è´¥ã€‚</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-7"><strong>èµ„æºé“¾æ¥</strong></h3>
<ul>
<li><strong>GitHub ä»“åº“</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fxier123456%2Fpromise-logic" target="_blank" title="https://github.com/xier123456/promise-logic" ref="nofollow noopener noreferrer">github.com/xier123456/â€¦</a></li>
<li><strong>npm åŒ…</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.npmjs.com%2Fpackage%2Fpromise-logic" target="_blank" title="https://www.npmjs.com/package/promise-logic" ref="nofollow noopener noreferrer">www.npmjs.com/package/proâ€¦</a></li>
<li><strong>Issue è·Ÿè¸ª</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fxier123456%2Fpromise-logic%2Fissues" target="_blank" title="https://github.com/xier123456/promise-logic/issues" ref="nofollow noopener noreferrer">GitHub Issues</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸ºä»€ä¹ˆä½ çš„æ¨¡æ‹Ÿå™¨æ€»å¤±è´¥ï¼Ÿ80%çš„å¤§æ¨¡å‹é«˜æ‰‹éƒ½åœ¨å·å·ç”¨çš„æ•°æ®é›†æ„å»ºé»‘ç§‘æŠ€]]></title>    <link>https://juejin.cn/post/7598480413804380202</link>    <guid>https://juejin.cn/post/7598480413804380202</guid>    <pubDate>2026-01-25T02:51:26.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7598480413804380202" data-draft-id="7598587406707245097" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸ºä»€ä¹ˆä½ çš„æ¨¡æ‹Ÿå™¨æ€»å¤±è´¥ï¼Ÿ80%çš„å¤§æ¨¡å‹é«˜æ‰‹éƒ½åœ¨å·å·ç”¨çš„æ•°æ®é›†æ„å»ºé»‘ç§‘æŠ€"/> <meta itemprop="keywords" content="ç®—æ³•"/> <meta itemprop="datePublished" content="2026-01-25T02:51:26.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§æ¨¡å‹æ¢å‘˜"/> <meta itemprop="url" content="https://juejin.cn/user/1628817047169849"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸ºä»€ä¹ˆä½ çš„æ¨¡æ‹Ÿå™¨æ€»å¤±è´¥ï¼Ÿ80%çš„å¤§æ¨¡å‹é«˜æ‰‹éƒ½åœ¨å·å·ç”¨çš„æ•°æ®é›†æ„å»ºé»‘ç§‘æŠ€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1628817047169849/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§æ¨¡å‹æ¢å‘˜
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-25T02:51:26.000Z" title="Sun Jan 25 2026 02:51:26 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    9
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼Œæ¬¢è¿æ¥åˆ°æˆ‘çš„AIæŠ€æœ¯é¢‘é“ï¼æˆ‘æ˜¯ä½ ä»¬çš„AIç‚¼é‡‘æœ¯æ­æ¡£ã€‚</p>
<p>å¾ˆå¤šå°ä¼™ä¼´æœ€è¿‘åœ¨ç§ä¿®â€œå¤§æ¨¡å‹åŠ¨ä½œâ€è¿™é—¨è¯¾ï¼Œä½†æœ€å¸¸å¬åˆ°çš„æŠ±æ€¨å°±æ˜¯ï¼šâ€œåšä¸»ï¼Œæˆ‘æ˜æ˜æŠ•äº†å‡ ä¸‡æ¡æ•°æ®è¿›å»ï¼Œä¸ºä»€ä¹ˆæ¨¡å‹å‡ºæ¥çš„æ•ˆæœâ€˜ä¸€è‚¡æœºæ•™å‘³â€™ï¼Ÿæˆ–è€…å›ç­”éæ‰€é—®ï¼Œæˆ–è€…é€»è¾‘æ··ä¹±ã€‚â€</p>
<p>å…¶å®ï¼Œå¤§æ¨¡å‹åœˆå­é‡Œæœ‰ä¸€å¥è¢«è¯´çƒ‚äº†ä½†æ°¸è¿œæ­£ç¡®çš„é“ç†ï¼š<strong>Garbage in, Garbage outï¼ˆåƒåœ¾è¿›ï¼Œåƒåœ¾å‡ºï¼‰</strong> ã€‚åœ¨ä¸€ä¸ªå®Œæ•´çš„è°ƒèŠ‚å·¥ç¨‹ä¸­ï¼Œ80%çš„æ—¶é—´ä¸åº”è¯¥èŠ±åœ¨è°ƒå‚æ•°ä¸Šï¼Œè€Œåº”è¯¥èŠ±åœ¨<strong>æ•°æ®é›†çš„æ´—ç»ƒ</strong>ä¸Šã€‚</p>
<p>ä»Šå¤©ï¼Œæˆ‘å°±ä»¥â€œæ„å»ºWebå®‰å…¨é¢†åŸŸä¸“å®¶æ¨¡å‹â€ä¸ºä¾‹ï¼Œç»™å¤§å®¶æ·±åº¦æ‹†è§£å¦‚ä½•ä»é›¶å¼€å§‹ï¼Œåˆ©ç”¨<strong>LLaMA Factory</strong>å’Œ<strong>Easy Dataset (EDS)</strong> æ„å»ºå‡ºä¸€ä¸ªè®©æ¨¡å‹â€œè„±èƒæ¢éª¨â€çš„é«˜è´¨é‡æ•°æ®é›†ã€‚</p>
<hr/>
<h2 data-id="heading-0">ä¸€ã€æŠ€æœ¯åŸç†ï¼šå¤§æ¨¡å‹å‚æ•°åˆ°åº•åœ¨â€œå–‚â€ä»€ä¹ˆï¼Ÿ</h2>
<p>åœ¨æ­¤ä¹‹å‰ï¼Œæˆ‘ä»¬å¿…é¡»å…ˆææ‡‚æ¨¡å‹æ˜¯æ€ä¹ˆâ€œåƒâ€æ•°æ®çš„ã€‚æˆ‘ä»¬å¸¸ç”¨çš„å‚æ•°æ–¹å¼æ˜¯<strong>æŒ‡ä»¤ç›‘ç£è°ƒèŠ‚ï¼ˆSFTï¼ŒSupervised Fine-Tuningï¼‰</strong> ã€‚ç®€å•æ¥è¯´ï¼Œå°±æ˜¯ç»™æ¨¡å‹ä¸€å¥—â€œé¢˜ç›®+æ ‡å‡†â€ç­”æ¡ˆï¼Œåšæ¨¡ä»¿è¿™ç§é€»è¾‘ã€‚</p>
<h3 data-id="heading-1">1.1 æ•°æ®æ ¼å¼ï¼šAlpaca vs. ShareGPT</h3>
<p>åœ¨ LLaMA Factory ä¸­ï¼Œç›®å‰ä¸»æµæ”¯æŒä¸¤ç§æ ¼å¼ã€‚è¿™å°±ç›¸å½“äºç»™æ¨¡å‹å‡†å¤‡äº†ä¸¤ç§ä¸åŒçš„â€œå·å­â€ã€‚</p>
<ul>
<li><strong>Alpaca æ ¼å¼ï¼š</strong> æ¯ä¸€æ¡æ•°æ®éƒ½æ˜¯ç‹¬ç«‹çš„ã€‚å®ƒåŒ…å«<code>instruction</code>ï¼ˆæŒ‡ä»¤ï¼‰ã€<code>input</code>ï¼ˆèƒŒæ™¯è¾“å…¥ï¼‰å’Œ<code>output</code>ï¼ˆç­”æ¡ˆï¼‰ã€‚è¿™ç§æ ¼å¼éå¸¸é€‚åˆå¤„ç†å•è½®çš„é—®ç­”ä»»åŠ¡ï¼Œé€»è¾‘ç®€å•æ˜äº†ã€‚</li>
<li><strong>ShareGPT æ ¼å¼ï¼š</strong> è¿™æ˜¯ä¸€ç§â€œå¯¹è¯ä½“â€æ ¼å¼ã€‚å®ƒèƒ½å¤Ÿå¤šè½®å¯¹è¯ï¼ˆç”¨æˆ·å’ŒåŠ©æ‰‹çš„å¾€å¤ï¼‰ã€‚å¦‚æœä½ å¸Œæœ›æ¨¡å‹å…·å¤‡æå¼ºçš„ä¸Šä¸‹æ–‡å…³è”è®°å½•èƒ½åŠ›ï¼ŒShareGPT æ˜¯é¦–é€‰ã€‚</li>
</ul>
<h3 data-id="heading-2">1.2 <code>dataset_info.json</code>ï¼šæ•°æ®çš„â€œè¯´æ˜ä¹¦â€</h3>
<p>LLaMA Factory å¹¶ä¸èƒ½ç›´æ¥ç”Ÿåä½ çš„ JSON æ–‡ä»¶ã€‚åœ¨<code>data</code>ç›®å½•ä¸‹ï¼Œæœ‰ä¸€ä¸ªè‡³å…³é‡è¦çš„é…ç½®æ–‡ä»¶<code>dataset_info.json</code>ã€‚</p>
<p>å®ƒè®°å½•äº†æ¯ä¸ªæ•°æ®é›†çš„â€œæˆ·å£ä¿¡æ¯â€ï¼š</p>
<ul>
<li><strong>æ–‡ä»¶è·¯å¾„ï¼ˆ<code>file_name</code>ï¼‰ï¼š</strong> å‘Šè¯‰ç³»ç»Ÿæ•°æ®åœ¨å“ªé‡Œã€‚</li>
<li><strong>æ˜ å°„å…³ç³»ï¼ˆ<code>columns</code>ï¼‰ï¼š</strong> å¦‚æœä½ çš„ JSON å­—æ®µå«<code>question</code>è€Œä¸æ˜¯<code>prompt</code>ï¼Œä½ å¾—åœ¨è¿™é‡Œå‘Šè¯‰ç³»ç»Ÿæ€ä¹ˆå¯¹åº”ã€‚</li>
<li><strong>è§’è‰²é…ç½®ï¼ˆ<code>tags</code>ï¼‰ï¼š</strong> é’ˆå¯¹å¤šè½®å¯¹è¯ï¼Œå®šä¹‰è°æ˜¯â€œç”¨æˆ·â€ï¼Œè°æ˜¯â€œåŠ©æ‰‹â€ã€‚</li>
</ul>
<h3 data-id="heading-3">1.3 æ ¸å¿ƒæœºåˆ¶ï¼šæ ‡ç­¾åˆ†é…ä¸IGNORE_INDEX</h3>
<p>è¿™æ˜¯å¾ˆå¤šåˆå­¦è€…ä¼šå¿½è§†çš„â€œåº•å±‚ç»†èŠ‚â€ã€‚</p>
<p>å½“æˆ‘ä»¬å°†æ–‡æœ¬å–‚ç»™æ¨¡å‹æ—¶ï¼Œç³»ç»Ÿä¼šè¿›è¡Œ<strong>åˆ†è¯ï¼ˆTokenizationï¼‰</strong> ï¼ŒæŠŠæ–‡å­—å˜æˆæ•°å­—ã€‚ä½†æ˜¯å½“æˆ‘ä»¬å°†æ–‡æœ¬å–‚ç»™æ¨¡å‹æ—¶ï¼Œæˆ‘ä»¬ä¸å¸Œæœ›æ¨¡å‹å»å­¦ä¹ â€œå¦‚ä½•é‡å¤ç”¨æˆ·çš„é—®é¢˜â€ï¼Œæˆ‘ä»¬åªå¸Œæœ›å®ƒå­¦ä¹ â€œå¦‚ä½•ç”ŸæˆåŠ©æ‰‹çš„ç­”æ¡ˆâ€ã€‚</p>
<p>æ‰€ä»¥ï¼ŒLLaMA Factory ä¼šå¼•å…¥ä¸€ä¸ªç‰¹æ®Šå€¼<code>$IGNORE_INDEX$</code>ï¼ˆé€šå¸¸æ˜¯-100ï¼‰ï¼š</p>
<ul>
<li><strong>ç”¨æˆ·æŒ‡ä»¤éƒ¨åˆ†ï¼š</strong> å…¨éƒ¨æ ‡è®°ä¸º-100ï¼Œæ¨¡å‹åœ¨è®­ç»ƒæ—¶ä¸è®¡ç®—è¿™éƒ¨åˆ†çš„æŸå¤±ã€‚</li>
<li><strong>åŠ©æ‰‹å›ç­”éƒ¨åˆ†ï¼š</strong> ä¿ç•™çœŸå®çš„Token IDï¼Œæ¨¡å‹æ ¹æ®è¿™éƒ¨åˆ†å†…å®¹è®¡ç®—æŸå¤±å¹¶æ›´æ–°å‚æ•°ã€‚</li>
</ul>
<blockquote>
<p><strong>é€šä¿—ç‚¹è¯´ï¼š</strong> å°±åƒè€å¸ˆæ‰¹æ”¹å·å­ä¸€æ ·ï¼Œåªç»™â€œç­”æ¡ˆæ â€é¢˜ç›®æ‰“åˆ†ï¼Œè€Œâ€œæ â€å†™å¾—å†å¥½ä¹Ÿä¸ç»™åˆ†ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-4">äºŒã€å®æˆ˜æ­¥éª¤ï¼šå¦‚ä½•æ‰‹æ“ä¸€ä¸ªWebå®‰å…¨ä¸“å®¶æ•°æ®é›†ï¼Ÿ</h2>
<p>æˆ‘ä»¬è¦åŠ å¼ºçš„ç›®æ ‡æ˜¯è®©<strong>Qwen2.5-7B</strong>åœ¨Webå®‰å…¨é¢†åŸŸè¾¾åˆ°ç”šè‡³è¶…è¶Šæ»¡è¡€ç‰ˆæ¨¡å‹ã€‚è¿™å°±éœ€è¦æˆ‘ä»¬çš„æ•°æ®æ—¢å¬â€œæ·±åº¦â€ï¼Œåˆå¬â€œå‰æ²¿æ€§â€ã€‚</p>
<h3 data-id="heading-5">2.1 é¿å‘æŒ‡å—ï¼šä¸ºä»€ä¹ˆä½ çš„æ•°æ®é›†è´¨é‡å·®ï¼Ÿ</h3>
<p>åœ¨æ­£å¼å¼€å§‹å‰ï¼Œå…ˆå¯¹ç…§æ£€æŸ¥ä½ çš„æ•°æ®æ˜¯å¦å­˜åœ¨ä»¥ä¸‹â€œç¡¬ä¼¤â€ï¼š</p>
<ol>
<li><strong>æ•°æ®é‡å¤ªå°ï¼š</strong> å¯¹äº7Bçº§åˆ«çš„æ¨¡å‹ï¼Œé¢†åŸŸçŸ¥è¯†æ³¨å…¥å»ºè®®1000æ¡èµ·æ­¥ã€‚</li>
<li><strong>å™ªå£°æ•°æ®å¤šï¼š</strong> é”™åˆ«å­—ã€æ ¼å¼ä¹±ç ã€æˆ–è€…æ˜¯è¯¯å·®æ³•å¾‹æ¨¡å‹å´æ··å…¥äº†å¨±ä¹æ–°é—»ã€‚</li>
<li><strong>æ ·æœ¬åå·®ï¼š</strong> æ¯”å¦‚90%çš„æ•°æ®éƒ½æ˜¯â€œæ€ä¹ˆå†™SQLâ€ï¼Œé‚£æ¨¡å‹å¯¹â€œæ€ä¹ˆé˜²SQLæ³¨å…¥â€å°±ä¼šå˜å¾—å¾ˆç¬¨ã€‚</li>
<li><strong>ç¼ºä¹å¤šæ ·æ€§ï¼š</strong> åªæœ‰ç®€ç­”é¢˜ï¼Œæ²¡æœ‰æ¨ç†é¢˜ï¼›åªæœ‰çŸ­å¥å­ï¼Œæ²¡æœ‰é•¿é€»è¾‘ã€‚</li>
</ol>
<h3 data-id="heading-6">2.2 ä½¿ç”¨ Easy Dataset (EDS) å¿«é€Ÿæ„å»º</h3>
<p>æ‰‹åŠ¨æ•´ç†å‡ åƒæ¡è´¨é‡é—®ç­”å¯¹æ˜¯ä¸ç°å®çš„ã€‚æˆ‘ä»¬ä½¿ç”¨<strong>Easy Datasetï¼ˆEDSï¼‰</strong> æ¥å®ç°è‡ªåŠ¨åŒ–å’ŒåŠè‡ªåŠ¨åŒ–çš„æ•°æ®ç”Ÿäº§ã€‚</p>
<h4 data-id="heading-7">ç¬¬ä¸€æ­¥ï¼šé¡¹ç›®ä¸æ¨¡å‹é…ç½®</h4>
<ol>
<li>
<p><strong>åˆ›å»ºé¡¹ç›®ï¼š</strong> å‘½åä¸º<code>Web_Security_Expert</code>ã€‚</p>
</li>
<li>
<p><strong>é…ç½®æ¨¡å‹ï¼š</strong> * ä½¿ç”¨<strong>Doubao-1.5-pro</strong>æ¥å¤„ç†å¤§è§„æ¨¡çš„æ–‡æœ¬åˆ†å—å’Œé—®é¢˜æå–ï¼ˆæé«˜ï¼‰ã€‚</p>
<ul>
<li>ä½¿ç”¨<strong>DeepSeek-R1</strong>ä½œä¸ºâ€œé‡‘ç‰Œæ•™ç»ƒâ€ï¼Œå®ƒè‡ªå¸¦æ€ç»´é“¾ï¼ˆCoTï¼‰ï¼Œèƒ½å¤Ÿç”Ÿæˆé«˜è´¨é‡çš„æ¨ç†è¿‡ç¨‹ã€‚</li>
</ul>
</li>
</ol>
<h4 data-id="heading-8">ç¬¬äºŒæ­¥ï¼šæ–‡çŒ®å¤„ç†ï¼ˆæ•°æ®æºçš„é€‰æ‹©ï¼‰</h4>
<p>æˆ‘ä»¬å‡†å¤‡äº†ã€Šç™½å¸½å­è®²ç½‘ç»œå®‰å…¨ã€‹ä¹¦ç±å’Œå‡ ç¯‡å…³äºæ³•å­¦ç¡•å£«å®‰å…¨çš„æœ€æ–°è®ºæ–‡ã€‚</p>
<ul>
<li>
<p><strong>Markdown è½¬æ¢ï¼š</strong> åˆ©ç”¨ MinerU æˆ–å†…ç½®çš„è§†è§‰æ¨¡å‹å°† PDF è½¬ä¸ºæ ‡å‡†çš„ Markdownï¼Œä¿ç•™ç»“æ„ä¿¡æ¯ã€‚</p>
</li>
<li>
<p><strong>GAï¼ˆGenre-Audienceï¼‰å¢å¼ºç­–ç•¥ï¼š</strong> è¿™æ˜¯EDSçš„æ ¸å¿ƒé»‘ç§‘æŠ€ã€‚å®ƒä¼šæ ¹æ®åŒä¸€æ®µçŸ¥è¯†ï¼Œä¸ºä¸åŒçš„â€œå—ä¼—â€ï¼ˆå¦‚ï¼šåˆå­¦è€… vs ä¸“å®¶ï¼‰ç”Ÿæˆä¸åŒâ€œç±»å‹â€ï¼ˆå¦‚ï¼šæ•™ç¨‹ vs æ·±åº¦è®ºæ–‡åˆ†æï¼‰çš„å†…å®¹ã€‚</p>
<blockquote>
<p><strong>æ¡ˆä¾‹ï¼š</strong> åŒä¸€ä¸ªâ€œååºåˆ—åŒ–æ¼æ´â€çŸ¥è¯†ç‚¹ï¼ŒGAç­–ç•¥ä¼šç”Ÿæˆä¸€ä»½é¢å‘å°ç™½çš„â€œç§‘æ™®æ–‡â€å’Œä¸€ä»½é¢å‘å®‰å…¨ä¸“å®¶çš„â€œåº•å±‚åˆ†ææŠ¥å‘Šâ€ã€‚è¿™æå¤§åœ°å¢å¼ºäº†æ¨¡å‹çš„æ³›åŒ–èƒ½åŠ›ã€‚</p>
</blockquote>
</li>
</ul>
<h4 data-id="heading-9">ç¬¬ä¸‰æ­¥ï¼šé—®é¢˜æå–ä¸äººå·¥å®¡æ ¸</h4>
<p>EDSä¼šè‡ªåŠ¨åŸºäºæ–‡æœ¬å—ç”Ÿæˆé—®é¢˜ã€‚æ­¤æ—¶éœ€è¦åšä¸»æˆ‘æåˆ°çš„â€œäººå·¥ä»‹å…¥â€ï¼š</p>
<ul>
<li><strong>ä½œè€…æ¸…é™¤æ— æ•ˆé—®é¢˜ï¼š</strong> æ¯”å¦‚â€œåœ¨æ–‡æœ«æ„Ÿè°¢äº†è°ï¼Ÿâ€è¿™ç§ä¸æŠ€æœ¯ç›¸å…³çš„é—®é¢˜ã€‚</li>
<li><strong>ä¿ç•™æ ¸å¿ƒé—®é¢˜ï¼š</strong> èšç„¦äºæ¼æ´åŸç†ã€é˜²å¾¡æ–¹æ¡ˆã€ä»£ç å¤ç°ã€‚</li>
</ul>
<h4 data-id="heading-10">ç¬¬å››æ­¥ï¼šæ•°æ®è¡¥å……ï¼ˆæ³¨å…¥çµé­‚ï¼‰</h4>
<p>é—®é¢˜ç¡®å®šåï¼Œè°ƒç”¨<strong>DeepSeek R1</strong>ç”Ÿæˆç­”æ¡ˆã€‚ä¸ºä»€ä¹ˆé€‰R1ï¼Ÿå› ä¸ºå®ƒç”Ÿæˆçš„ç­”æ¡ˆä¸ä»…æœ‰ç»“æœï¼Œè¿˜æœ‰<strong>é€»è¾‘æ¨å¯¼è¿‡ç¨‹ï¼ˆCoTï¼‰</strong> ã€‚æŠŠè¿™äº›å¸¦æ¨å¯¼è¿‡ç¨‹çš„æ•°æ®å–‚ç»™æ¨¡å‹ï¼ŒQwenå°±ä¸å†æ˜¯ç®€å•çš„â€œèƒŒä¹¦â€ï¼Œè€Œæ˜¯å­¦ä¼šäº†â€œæ€è€ƒâ€ã€‚</p>
<hr/>
<h2 data-id="heading-11">ä¸‰ã€å®è·µä¸­çš„â€œè½¯å¹¿â€æ—¶åˆ»ï¼šæ•ˆç‡å€å¢å™¨</h2>
<p>åœ¨å®é™…å®è·µä¸­ï¼Œå¦‚æœä»…ä»…åœç•™åœ¨â€œäº†è§£å¤§æ¨¡å‹åŸç†â€ï¼Œå…¶å®å¾ˆéš¾çœŸæ­£å®ç°æ¨¡å‹èƒ½åŠ›çš„å·®å¼‚ã€‚</p>
<p>æˆ‘ä¸ªäººæ¯”è¾ƒæ¨èç›´æ¥ä¸Šæ‰‹åšä¸€æ¬¡æ¨¡å‹ï¼Œæ¯”å¦‚ç”¨**<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.llamafactory.com.cn%2Fregister%3Futm_source%3Djslt_wtjj_ssn" target="_blank" title="https://www.llamafactory.com.cn/register?utm_source=jslt_wtjj_ssn" ref="nofollow noopener noreferrer">LLaMA-Factory Online</a>**è¿™ç§ä½è´Ÿå€ºå¤§æ¨¡å‹åå·®å¹³å°ï¼ŒæŠŠè‡ªå·±çš„æ•°æ®çœŸæ­£â€œå–‚â€è¿›æ¨¡å‹é‡Œï¼Œç”Ÿäº§å‡ºå±äºè‡ªå·±çš„ä¸“å±æ¨¡å‹ã€‚å³ä½¿æ²¡æœ‰ä»£ç åŸºç¡€ï¼Œä¹Ÿèƒ½è½»æ¾è·‘å®Œæ¨¡å‹æµç¨‹ï¼Œåœ¨å®è·µä¸­æ˜ç™½æ€ä¹ˆè®©æ¨¡å‹â€œå…¶å®ä½ æƒ³è¦çš„æ ·å­â€ã€‚</p>
<hr/>
<h2 data-id="heading-12">å››ã€æ•ˆæœè¯„ä¼°ï¼šå¦‚ä½•éªŒè¯ä½ çš„æ•ˆæœæ•ˆæœï¼Ÿ</h2>
<p>æ•°æ®æ•´ç†å¥½å¹¶å¯¼å…¥LLaMA Factory Onlineåï¼Œæˆ‘ä»¬è¯„ä»·æœ¬å±Šâ€œå­¦ç”Ÿâ€çš„æˆç»©å—ï¼Ÿ</p>
<h3 data-id="heading-13">4.1 æ•°æ®ä¸€è‡´æ€§æ£€æŸ¥</h3>
<p>åœ¨å¯¼å‡ºå‰ï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡ä»¥ä¸‹æ ‡å‡†å¯¹æ•°æ®è¿›è¡Œæœ€åçš„å®¡æ ¸ï¼š</p>
<ul>
<li><strong>æ— å…³é”®ä¿¡æ¯ï¼š</strong> æ—¶é—´ã€æ¼æ´ç‰ˆæœ¬ã€ä»£ç å­—æ®µæ˜¯å¦å‡†ç¡®ã€‚</li>
<li><strong>æœ¯è¯­ç»Ÿä¸€ï¼š</strong> åˆ«ä¸€ä¼šå„¿å«â€œè·¨ç«™è„šæœ¬â€ï¼Œä¸€ä¼šå„¿å«â€œXSSâ€ã€‚</li>
<li><strong>é‡å¤é¡¹åˆå¹¶ï¼š</strong> åˆ æ‰è¡¨è¾¾å®Œå…¨ä¸€è‡´çš„æ•°æ®ã€‚</li>
</ul>
<h3 data-id="heading-14">4.2 é¢„è§ˆä¸åŠ è½½</h3>
<p>åœ¨LLaMA Factoryä¸­ï¼Œæˆ‘ä»¬å°†EDSç”Ÿæˆçš„<code>dataset_info.json</code>è·¯å¾„å¡«å…¥ã€‚ç‚¹å‡»â€œé¢„è§ˆæ•°æ®é›†â€ï¼Œå¦‚æœèƒ½çœ‹åˆ°å¦‚ä¸‹ç»“æ„ï¼Œè¯´æ˜ä½ çš„â€œæ•™ç§‘ä¹¦â€å·²ç»å‡†å¤‡å¥½äº†ï¼š</p>
<p>JSON</p>
<pre><code class="hljs language-yaml" lang="yaml">{
    <span class="hljs-attr">"input_ids":</span> [<span class="hljs-number">151</span>, <span class="hljs-number">8243</span>, <span class="hljs-number">29973</span>, <span class="hljs-string">...</span>],
    <span class="hljs-attr">"attention_mask":</span> [<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-string">...</span>],
    <span class="hljs-attr">"labels":</span> [<span class="hljs-number">-100</span>, <span class="hljs-number">-100</span>, <span class="hljs-number">29871</span>, <span class="hljs-string">...</span>]
}
</code></pre>
<h3 data-id="heading-15">4.3 å®æˆ˜å¯¹æ¯”éªŒè¯</h3>
<p>æ¨¡å‹åçš„æ¨¡å‹ï¼ˆQwen2.5-7B + Webå®‰å…¨æ•°æ®é›†ï¼‰åº”å…·å¤‡ä»¥ä¸‹ç‰¹è´¨ï¼š</p>
<ol>
<li><strong>æ·±åº¦ï¼š</strong> èƒ½å¤Ÿè§£é‡Šå¤æ‚çš„å†…å­˜ç ´åæ¼æ´ã€‚</li>
<li><strong>å¹¿åº¦ï¼š</strong> å¯¹ä¸åœ¨è®­ç»ƒé›†é‡Œçš„æ–°å…´æ¼æ´èƒ½è¿›è¡Œé€»è¾‘ç±»æ¯”ã€‚</li>
<li><strong>å®‰å…¨æ€§ï¼š</strong> å¯¹æœ‰å®³çš„ä»£ç ç‰‡æ®µèƒ½ç²¾å‡†é¢„è­¦ã€‚</li>
</ol>
<hr/>
<h2 data-id="heading-16">äº”ã€æ€»ç»“ä¸å±•æœ›</h2>
<p>æ„å»ºé«˜è´¨é‡çš„æ•°æ®é›†æ˜¯ä¸€ä¸ªâ€œä¿®æ”¹â€ã€‚è™½ç„¶æœ‰äº†<strong>Easy Dataset</strong>è¿™æ ·çš„è‡ªåŠ¨åŒ–å·¥å…·ï¼Œä½†<strong>äººä»¬çš„å®¡æŸ¥</strong>ä»ç„¶æ˜¯æœ€åçš„æŠ¤åŸæ²³ã€‚</p>
<p>é€šè¿‡æœ¬æ–‡çš„æµç¨‹ï¼Œæˆ‘ä»¬ä¸ä»…æ˜¯æŠŠä¹¦æœ¬æ¬è¿›äº†æ¨¡å‹ï¼Œæ›´æ˜¯é€šè¿‡<strong>GAå¢å¼º</strong>å’Œ<strong>R1</strong>èµ‹äºˆäº†æ¨¡å‹å¤„ç†å¤æ‚Webå®‰å…¨é—®é¢˜çš„â€œå¤§è„‘å›è·¯â€ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Ollamaé›„èµ·ï¼ä¸€ä¸ªå‘½ä»¤è¿è¡ŒCCã€codexã€opencode]]></title>    <link>https://juejin.cn/post/7598818096753082419</link>    <guid>https://juejin.cn/post/7598818096753082419</guid>    <pubDate>2026-01-25T03:07:03.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7598818096753082419" data-draft-id="7598827641306890291" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Ollamaé›„èµ·ï¼ä¸€ä¸ªå‘½ä»¤è¿è¡ŒCCã€codexã€opencode"/> <meta itemprop="keywords" content="Agent,AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2026-01-25T03:07:03.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”²ç»´æ–¯"/> <meta itemprop="url" content="https://juejin.cn/user/63109670111066"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Ollamaé›„èµ·ï¼ä¸€ä¸ªå‘½ä»¤è¿è¡ŒCCã€codexã€opencode
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/63109670111066/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”²ç»´æ–¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-25T03:07:03.000Z" title="Sun Jan 25 2026 03:07:03 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>Ollama è¿™å°ç¾Šé©¼ï¼Œé‡å¿ƒä¸å°ï¼Œä¸€å£æ°”æŠŠç»ˆç«¯ç¼–ç¨‹æ™ºèƒ½ä½“ç»™åŒ…åœ†äº†ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e6c016441c8044e2816963bec929c362~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55Sy57u05pav:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769915223&amp;x-signature=kigjz5zygHFCSi75RuR8WttFiMI%3D" alt="" loading="lazy"/></p>
<p>æ˜¨å¤©åˆ†äº«äº†é€šè¿‡è„šæœ¬å’Œç¬¬ä¸‰æ–¹é…ç½®æ¥æ¥å…¥ <a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2Fg-TQmvQDn0HtMragFNgjEA%3Ftoken%3D255241259%26lang%3Dzh_CN" target="_blank" title="https://mp.weixin.qq.com/s/g-TQmvQDn0HtMragFNgjEA?token=255241259&amp;lang=zh_CN" ref="nofollow noopener noreferrer">Claude Code å’Œ GLM-4.7-flash</a>ã€‚</p>
<p>ä»Šå¤©æ¥çœ‹çœ‹å®˜æ–¹çš„å‘½ä»¤ï¼Œè¶…çº§ç®€å•ã€‚</p>
<p>å…ˆç”¨æ¥å…¥ Codex æ¥æ¼”ç¤ºä¸€ä¸‹ã€‚</p>
<p>ç›´æ¥æ‰“å¼€ CMD æˆ–è€… PowerShellã€‚</p>
<p>è¾“å…¥å‘½ä»¤ <code>ollama launch</code>ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b01dae3b2b214480981fb9c389df31d4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55Sy57u05pav:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769915223&amp;x-signature=bmKwOIhljEMlo2bacD5EkjEylvs%3D" alt="" loading="lazy"/></p>
<p>ç„¶åå°±å¯ä»¥çœ‹åˆ°æ˜¯ä¸ªå€™é€‰åˆ—è¡¨ï¼Œé‡Œé¢åŒ…å«äº† Claudeã€Codexã€Droidã€OpenCode ç­‰ã€‚</p>
<p>é€šè¿‡ä¸Šä¸‹ç®­å¤´ç›´æ¥é€‰æ‹©ä¸€ä¸ªï¼Œæ¯”å¦‚è¯´ Codexã€‚</p>
<p>é€‰æ‹©å®Œä¹‹åå°±ä¼šæœ‰ä¸€ä¸ªæ¨¡å‹åˆ—è¡¨ä¾›ä½ é€‰æ‹©ã€‚</p>
<p>ç„¶åä½ é€‰æ‹©å…·ä½“çš„æ¨¡å‹ï¼Œå°±å¯ä»¥è¿›å…¥ Codexã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9026438fb6854530b736490c76373727~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55Sy57u05pav:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769915223&amp;x-signature=W4jaqM%2FXc55vxdSu8NOi5rJ8gf4%3D" alt="" loading="lazy"/></p>
<p>æˆ‘é€‰äº† Qwen3ï¼Œä¸€ä¸ª 5G å¤šçš„æ¨¡å‹ï¼Œä¸€èˆ¬ç”µè„‘ä¸Šéƒ½èƒ½è·‘ã€‚</p>
<p>è¿›æ¥ä¹‹åå¯ä»¥ç¡®è®¤ä¸€ä¸‹å®ƒæ˜¯ä¸æ˜¯æ­£ç¡®è½½å…¥äº†ã€‚</p>
<p>ä»å¯¹è¯ä¸­å¯ä»¥çœ‹åˆ°ï¼Œå·²ç»æ­£ç¡®è½½å…¥åƒé—®æ¨¡å‹ã€‚</p>
<p>ä½†æ˜¯ç°åœ¨ä¸€èˆ¬çš„å¼€æºæ¨¡å‹ï¼Œå¯¹æ™ºèƒ½ä½“å·¥å…·è°ƒç”¨çš„æ”¯æŒéƒ½ä¸æ˜¯å¤ªå¥½ã€‚</p>
<p>æ‰€ä»¥èŠå¤©å¯ä»¥å¾ˆä¸æ»‘ï¼Œä½†æ˜¯å·¥å…·è°ƒä¸èµ·æ¥ï¼Œç°åœ¨è¿˜æœ‰ç‚¹é¸¡è‚‹ã€‚</p>
<p>Ollama ç°åœ¨é€šè¿‡ä¸€ä¸ª launch å‘½ä»¤å…¨é¢æ¥å…¥äº†å„ç§ç»ˆç«¯ç¼–ç¨‹æ™ºèƒ½ä½“ã€‚</p>
<p>ä¸‹é¢ä»‹ç»ä¸€ä¸‹è¿™ä¸ªå‘½ä»¤çš„æ ¼å¼ï¼š</p>
<pre><code class="hljs language-vbnet" lang="vbnet"><span class="hljs-symbol">C:</span>\Users\tony\Desktop\test&gt;ollamaÂ launchÂ -h
LaunchÂ anÂ integrationÂ configuredÂ <span class="hljs-keyword">with</span>Â OllamaÂ models.

SupportedÂ integrations:
Â Â claudeÂ Â Â Â ClaudeÂ Code
Â Â codexÂ Â Â Â Â Codex
Â Â droidÂ Â Â Â Â Droid
Â Â opencodeÂ Â OpenCode

<span class="hljs-symbol">Examples:</span>
Â Â ollamaÂ launch
Â Â ollamaÂ launchÂ claude
Â Â ollamaÂ launchÂ claudeÂ --modelÂ &lt;model&gt;
Â Â ollamaÂ launchÂ droidÂ --configÂ (doesÂ <span class="hljs-built_in">not</span>Â <span class="hljs-keyword">auto</span>-launch)

<span class="hljs-symbol">Usage:</span>
Â Â ollamaÂ launchÂ [INTEGRATION]Â [flags]

<span class="hljs-symbol">Flags:</span>
Â Â Â Â Â Â --configÂ Â Â Â Â Â Â Â Â ConfigureÂ withoutÂ launching
Â Â -h,Â --helpÂ Â Â Â Â Â Â Â Â Â Â helpÂ <span class="hljs-keyword">for</span>Â launch
Â Â Â Â Â Â --modelÂ <span class="hljs-type">string</span>Â Â Â ModelÂ <span class="hljs-keyword">to</span>Â use
</code></pre>
<p>å®˜æ–¹çš„å‘½ä»¤å¸®åŠ©ä¸­ä¸¾äº†4ä¸ªä¾‹å­ã€‚</p>
<p>å…³äº Launch çš„ä½¿ç”¨æ–¹å¼ï¼Œä¸»è¦æœ‰ä»¥ä¸‹ä¸‰ç§ï¼š</p>
<ol>
<li>ä½¿ç”¨ Launch ä¸å¸¦ä»»ä½•å‚æ•°</li>
<li>ä½¿ç”¨ Launch åé¢ç›´æ¥è·Ÿæ™ºèƒ½ä½“çš„åå­—</li>
<li>ä½¿ç”¨ Launch åé¢è·Ÿä¸Šæ™ºèƒ½ä½“çš„åå­—åŠæ¨¡å‹çš„åå­—</li>
<li>ä½¿ç”¨ Launch åé¢è·Ÿä¸Šæ™ºèƒ½ä½“çš„é“¾æ¥ï¼Œå†è·Ÿä¸Šé…ç½®</li>
</ol>
<p>ç¬¬ä¸€ç§æ–¹å¼ä¸Šé¢å°±æ¼”ç¤ºè¿‡ã€‚</p>
<p>ä¸‹é¢ç”¨å¯åŠ¨ droid æ¼”ç¤ºä¸‹ç¬¬äºŒç§æ–¹å¼ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">C:\Users\tony\Desktop\test&gt;ollamaÂ launchÂ droid
SelectÂ modelsÂ forÂ Droid:
Â Â &gt;Â Â <span class="hljs-section">[Â ]</span>Â bge-m3:latest
Â Â Â Â Â <span class="hljs-section">[Â ]</span>Â deepseek-r1:14b
Â Â Â Â Â <span class="hljs-section">[Â ]</span>Â devstral:latest
Â Â Â Â Â <span class="hljs-section">[Â ]</span>Â gemma3:12b
Â Â Â Â Â <span class="hljs-section">[Â ]</span>Â gemma3:1b
Â Â Â Â Â <span class="hljs-section">[Â ]</span>Â glm-4.7:cloud
Â Â Â Â Â <span class="hljs-section">[Â ]</span>Â gpt-oss:20b
Â Â Â Â Â <span class="hljs-section">[Â ]</span>Â minicpm-v:latest
Â Â Â Â Â <span class="hljs-section">[Â ]</span>Â qwen2.5vl:latest
Â Â Â Â Â <span class="hljs-section">[Â ]</span>Â qwen3-vl:235b-cloud
Â Â ...Â andÂ 4Â more

Â Â SelectÂ atÂ leastÂ oneÂ model.
</code></pre>
<p>è¿™ä¸ªå‘½ä»¤å°±æ¯”ç¬¬ä¸€ç§æ–¹å¼æ›´è¿›ä¸€æ­¥ï¼Œç›´æ¥é€‰æ¨¡å‹äº†ã€‚é€‰å®Œä¹‹åï¼ŒæŒ‰ä¸€ä¸‹ Tab é”®ï¼Œç„¶å Continueï¼Œå°±è¿›å…¥å¯¹åº”çš„æ™ºèƒ½ä½“ã€‚</p>
<p>è¿™é‡Œè¦æ³¨æ„ï¼šç»ˆç«¯æ™ºèƒ½ä½“ï¼ˆCodingAgentï¼‰æ˜¯éœ€è¦è‡ªå·±å…ˆè£…å¥½çš„ã€‚</p>
<p>å› ä¸ºæˆ‘æ²¡è£…è¿™ä¸ªå·¥å…·ï¼Œæ‰€ä»¥ç³»ç»Ÿä¼šæç¤ºæˆ‘æ²¡æœ‰å®‰è£…ï¼Œè¯·å…ˆåˆ°æŒ‡å®šä½ç½®ä¸‹è½½å®‰è£…ã€‚</p>
<p>ä¸‹é¢ç”¨ OpenCode æ¼”ç¤ºä¸€ä¸‹ç¬¬ä¸‰ç§æ–¹å¼ï¼š</p>
<pre><code class="hljs language-lua" lang="lua">ollamaÂ launchÂ opencodeÂ <span class="hljs-comment">--modelÂ qwen3:latest</span>
ThisÂ willÂ modifyÂ yourÂ OpenCodeÂ configuration:
Â Â C:\Users\tony.<span class="hljs-built_in">config</span>\opencode\opencode.json
Â Â C:\Users\tony.<span class="hljs-keyword">local</span>\state\opencode\model.json
BackupsÂ willÂ beÂ savedÂ toÂ C:\Users\tony\AppData\Local\Temp\ollama-backups/

Proceed?Â (y/n)
</code></pre>
<p>åœ¨è¿™ç§æ–¹å¼ä¸­ï¼Œæˆ‘æŒ‡å®šäº†æ™ºèƒ½ä½“ï¼Œä¹ŸæŒ‡å®šäº†æ¨¡å‹ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€ä¸ªå‘½ä»¤å¯ä»¥ç›´æ¥è¿›å…¥ç¬¬ä¸‰æ–¹çš„æ™ºèƒ½ä½“ã€‚</p>
<p>è¿™é‡Œæç¤ºä¼šè¦†ç›–åŸå…ˆçš„é…ç½®æ–‡ä»¶ï¼Œéœ€è¦æ³¨æ„ä¸€ä¸‹ã€‚</p>
<p>å¦‚æœä½ åŒæ„ï¼Œå°±ç›´æ¥è¾“å…¥ yes å¹¶å›è½¦ã€‚</p>
<p>ç„¶åå°±ä¼šè¿›å…¥ OpenCode çš„ç•Œé¢ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d95d94a03e73496d97a2247abedb5238~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55Sy57u05pav:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769915223&amp;x-signature=oBpApQMDP5D6PN6Fkp%2FaT0hjHFU%3D" alt="" loading="lazy"/></p>
<p>ç„¶åç›´æ¥å°±å¯ä»¥è¿›è¡Œå¯¹è¯äº†ï¼Œç›¸å½“ä¸æ»‘ã€‚</p>
<p>æœ€åçœ‹ä¸€ä¸‹ç¬¬å››ä¸ªå‘½ä»¤ï¼š</p>
<pre><code class="hljs language-sql" lang="sql">C:\Users\tony<span class="hljs-operator">&gt;</span>ollamaÂ launchÂ codexÂ <span class="hljs-comment">--config</span>
<span class="hljs-keyword">Select</span>Â modelÂ <span class="hljs-keyword">for</span>Â Codex:
Â Â <span class="hljs-operator">&gt;</span>Â qwen3:latest
Â Â Â Â bge<span class="hljs-operator">-</span>m3:latest
Â Â Â Â deepseek<span class="hljs-operator">-</span>r1:<span class="hljs-number">14</span>b
Â Â Â Â devstral:latest
Â Â Â Â gemma3:<span class="hljs-number">12</span>b
Â Â Â Â gemma3:<span class="hljs-number">1</span>b
Â Â Â Â glm<span class="hljs-number">-4.7</span>:cloud
Â Â Â Â gpt<span class="hljs-operator">-</span>oss:<span class="hljs-number">20</span>b
Â Â Â Â minicpm<span class="hljs-operator">-</span>v:latest
Â Â Â Â qwen2<span class="hljs-number">.5</span>vl:latest
Â Â ...Â <span class="hljs-keyword">and</span>Â <span class="hljs-number">4</span>Â more
</code></pre>
<p>è¿™ä¸ªå‘½ä»¤è¾“å…¥ä¹‹åï¼Œå®ƒå°±ä¼šè®©ä½ é€‰æ‹©å…·ä½“çš„æ¨¡å‹ã€‚</p>
<p>å› ä¸ºæŒ‰ä¹‹å‰ç›´æ¥è¿è¡Œçš„æ–¹å¼ï¼Œä¸€æ—¦ä½  launch codexï¼Œå®ƒå°±ä¼šè‡ªåŠ¨è°ƒç”¨ Qwen3 è¿™ä¸ªæ¨¡å‹ã€‚</p>
<p>æ‰€ä»¥è¿™ä¸ªå‘½ä»¤éå¸¸æœ‰å¿…è¦äº†ï¼Œå®ƒå¯ä»¥è®©ä½ é‡æ–°é…ç½®æ™ºèƒ½ä½“å¯¹åº”çš„æ¨¡å‹ã€‚</p>
<p>ç„¶åæˆ‘åœ¨è¿™é‡Œåˆ‡æ¢äº†ä¸€ä¸ª glm-4.7 cloud medium çš„æ¨¡å‹ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cf4ec529dc3a447a9420e9e05c0b7b3e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55Sy57u05pav:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769915223&amp;x-signature=8XLyG8g0Jy%2BNKNRJUhE4a3s9k64%3D" alt="" loading="lazy"/></p>
<p>è¿™æ˜¯ä¸€ä¸ªäº‘ç«¯æ¨¡å‹ï¼ŒOllama ç°åœ¨æ˜¯æ”¯æŒäº‘ç«¯æ¨¡å‹çš„ï¼Œè€Œä¸”æœ‰å…è´¹çš„é…é¢ã€‚</p>
<p>å› ä¸ºå¼€æºæ¨¡å‹åŸºæœ¬ä¸Šå¯¹å·¥å…·è°ƒç”¨æ”¯æŒéƒ½ä¸æ˜¯å¤ªå¥½ï¼Œåˆ‡æ¢åˆ°è¿™ä¸ª GLM-4.7 ä¹‹åï¼Œä½ å°±èƒ½æ­£å¸¸è°ƒç”¨å·¥å…·äº†ã€‚</p>
<p>å°±å¯ä»¥åœ¨å‘½ä»¤è¡Œé‡Œé¢ç›´æ¥è¾“å…¥ï¼Œæ¯”å¦‚è¯´ï¼šâ€œå¸®æˆ‘åˆ›å»ºä¸€ä¸ª React çš„ Demo é¡¹ç›®â€ï¼Œå®ƒå°±ä¼šè‡ªåŠ¨è°ƒç”¨å„ç§å·¥å…·å¸®ä½ åˆ›å»ºé¡¹ç›®ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8716b6acc4b340da9ef5d3b87f822d83~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55Sy57u05pav:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769915223&amp;x-signature=a6ZVwC5OS5mrHH0FvOvSdZAWFO4%3D" alt="" loading="lazy"/></p>
<p>æ²¡æƒ³åˆ° GLM-4.7 åœ¨ Codex ä¸Šé¢è¿™ä¹ˆä¸æ»‘ã€‚</p>
<p>å…¨ç¨‹é›¶é”™è¯¯æ„å»ºï¼Œä¸€æŠŠç›´æ¥å¯åŠ¨ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a49720e0f6cd41bd806dd1f3d86764ba~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55Sy57u05pav:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769915223&amp;x-signature=91Z7ABlXr3ONCu1BdAb9g2%2Bxh0g%3D" alt="" loading="lazy"/></p>
<p>è¿™ä¸€ä¸ª demo è·‘å®Œå¤§æ¦‚ç”¨æ‰äº† 23% çš„ç»˜ç”»é¢åº¦ï¼Œä»¥åŠ 12% çš„å‘¨é¢åº¦ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/807bd59e191349e19de334a48f8f9c9d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55Sy57u05pav:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769915223&amp;x-signature=XwK6MhaDZ5KyqJMb%2FYBAkPGv1tI%3D" alt="" loading="lazy"/></p>
<p>è¿˜å¯ä»¥è¿˜å¯ä»¥ï¼</p>
<p>æ¥ä¸‹æ¥æ‰€æœ‰çš„å¼€æºæ¨¡å‹ï¼Œéƒ½åº”è¯¥é’ˆå¯¹ Claude Code æˆ–è€… Codex è¿™ç§æ™ºèƒ½ä½“è¿›è¡Œä¼˜åŒ–ã€‚</p>
<p>è¿™æ ·çš„è¯ï¼Œåœ¨ä¸ä¹…çš„å°†æ¥ï¼Œåœ¨æœ¬åœ°ï¼ˆçº¯æœ¬åœ°ï¼‰çš„ä¸­é«˜é…ç½®ç”µè„‘ä¸­ä½¿ç”¨ç¦»çº¿æ¨¡å‹è¿›è¡Œå¼€å‘ï¼Œä¹Ÿä¸æ˜¯ä¸å¯èƒ½çš„ã€‚</p>
<p>å› ä¸ºä¸€æ—¦æœ‰ç»ˆç«¯æ™ºèƒ½ä½“æ¥ç®¡ç†æ¨¡å‹ï¼Œæ¨¡å‹çš„èƒ½åŠ›æ˜¯å¯ä»¥è¶…å¸¸å‘æŒ¥çš„ã€‚</p>
<p>æ¯”å¦‚åšä¸€äº›å¸¸è§„çš„æœ¬åœ°ç”µè„‘å‘½ä»¤è°ƒç”¨ã€æ–‡ä»¶åˆ›å»ºç­‰æ“ä½œï¼Œè¿™ç±»ä»»åŠ¡æ ¹æœ¬ä¸éœ€è¦æ¨¡å‹æœ‰å¤šå¤æ‚ï¼Œä½†å‰ææ˜¯å®ƒå¿…é¡»æ”¯æŒå·¥å…·è°ƒç”¨ï¼ˆTool Callingï¼‰æ‰å¯ä»¥ã€‚</p>
<p>æœŸå¾…ä¸€ä¸‹ï¼Œéšç€ Claude Code å‡ºåœˆï¼Œä»Šå¹´èƒ½å®å¹²çš„ä¸ªäººæ™ºèƒ½ä½“åº”è¯¥å¯ä»¥æèµ·äº†ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç¬¬ 10 ç« ï¼šPlanning æ¨¡å¼â€”â€”Agent çš„æˆ˜ç•¥æŒ‡æŒ¥éƒ¨]]></title>    <link>https://juejin.cn/post/7598699872552124452</link>    <guid>https://juejin.cn/post/7598699872552124452</guid>    <pubDate>2026-01-25T04:27:08.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7598699872552124452" data-draft-id="7598699872552108068" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç¬¬ 10 ç« ï¼šPlanning æ¨¡å¼â€”â€”Agent çš„æˆ˜ç•¥æŒ‡æŒ¥éƒ¨"/> <meta itemprop="keywords" content="å‰ç«¯,Agent,AIGC"/> <meta itemprop="datePublished" content="2026-01-25T04:27:08.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="èŠ‹åœ†ai"/> <meta itemprop="url" content="https://juejin.cn/user/1451828494217415"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç¬¬ 10 ç« ï¼šPlanning æ¨¡å¼â€”â€”Agent çš„æˆ˜ç•¥æŒ‡æŒ¥éƒ¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1451828494217415/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    èŠ‹åœ†ai
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-25T04:27:08.000Z" title="Sun Jan 25 2026 04:27:08 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ç¬¬10ç« ï¼šPlanning æ¨¡å¼ï¼šAgent çš„æˆ˜ç•¥æŒ‡æŒ¥éƒ¨</h2>
<blockquote>
<p><strong>Planning ä¸æ˜¯â€œæƒ³å¥½äº†å†åŠ¨æ‰‹â€ï¼Œè€Œæ˜¯â€œè¾¹æƒ³è¾¹åšã€è¾¹åšè¾¹è¯„ä¼°â€çš„æŒç»­å¾ªç¯ã€‚æ²¡æœ‰è§„åˆ’çš„ Agent åªæ˜¯è„šæœ¬ï¼Œæœ‰äº†è§„åˆ’çš„ Agent æ‰æ˜¯å¤§è„‘ã€‚</strong></p>
</blockquote>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8401d175801c488ab2323d358e9cbdc7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IqL5ZyGYWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769920028&amp;x-signature=hZ%2FwHFeo4ir%2BOZUoiDjsY%2BjgeGI%3D" alt="0001é¡µ.png" loading="lazy"/></p>
<p>æƒ³è±¡è¿™æ ·ä¸€ä¸ªåœºæ™¯ï¼š</p>
<p>ä½ æ‹›äº†ä¸€ä¸ªå®ä¹ ç”Ÿï¼Œè®©ä»– <strong>â€œç ”ç©¶ä¸€ä¸‹ç‰¹æ–¯æ‹‰ã€æ¯”äºšè¿ªå’Œ Rivian ä¸‰å®¶å…¬å¸çš„ç«äº‰æ ¼å±€â€</strong> ã€‚</p>
<p><strong>å®ä¹ ç”Ÿ Aï¼ˆæ²¡è§„åˆ’ï¼‰</strong> ï¼š æ‰“å¼€ Google ç–¯ç‹‚æœç´¢ï¼ŒåŠå°æ—¶åç”©ç»™ä½ ä¸€å †é“¾æ¥ï¼šWikipedia çš„æ‘˜è¦ã€å‡ æ¡æ—§æ–°é—»ã€è¿˜æœ‰ä¸€å †ä¹±ä¸ƒå…«ç³Ÿçš„å‚æ•°è¡¨ã€‚ä¿¡æ¯éƒ½æœ‰ï¼Œä½†æ²¡æ³•çœ‹ã€‚</p>
<p><strong>å®ä¹ ç”Ÿ Bï¼ˆæœ‰è§„åˆ’ï¼‰</strong> ï¼š ä»–å…ˆæ‹¿å‡ºä¸€å¼ çº¸ï¼Œå†™ä¸‹å¤§çº²ï¼š</p>
<ol>
<li><strong>è´¢åŠ¡å¯¹æ¯”</strong>ï¼šè¥æ”¶ã€åˆ©æ¶¦ã€å¸‚å€¼ã€‚</li>
<li><strong>äº§å“çŸ©é˜µ</strong>ï¼šè½¦å‹è¦†ç›–ã€ä»·æ ¼åŒºé—´ã€‚</li>
<li><strong>æŠ€æœ¯æŠ¤åŸæ²³</strong>ï¼šè‡ªåŠ¨é©¾é©¶ã€ç”µæ± æŠ€æœ¯ã€‚</li>
<li><strong>æœ€ç»ˆç»“è®º</strong>ï¼šç»¼åˆä¼˜åŠ£åŠ¿ã€‚ ç„¶åä»–æŒ‰ç€å¤§çº²å»æŸ¥ï¼Œæœ€åç»™ä½ ä¸€ä»½ç»“æ„æ¸…æ™°çš„æŠ¥å‘Šã€‚</li>
</ol>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/07fdbcb9d4c64c79b8c1402dcf57faab~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IqL5ZyGYWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769920028&amp;x-signature=1ZsmFCd9vC0ngPfQvxFgaf%2FPScQ%3D" alt="0002é¡µ.png" loading="lazy"/></p>
<p><strong>è¿™å°±æ˜¯ Planning çš„ä»·å€¼ã€‚</strong></p>
<p>å¤§å¤šæ•° Agent ä¹‹æ‰€ä»¥æ˜¾å¾—â€œç¬¨â€ï¼Œä¸æ˜¯å› ä¸ºæ¨¡å‹ä¸å¤Ÿå¼ºï¼Œè€Œæ˜¯å› ä¸ºå®ƒä»¬åƒå®ä¹ ç”Ÿ A ä¸€æ ·ï¼Œæ¥åˆ°ä»»åŠ¡å°±é—·å¤´å¹²æ´»ï¼Œå®Œå…¨æ²¡æœ‰ <strong>æˆ˜ç•¥æ‹†è§£</strong>ã€‚</p>
<p>æœ¬ç« æˆ‘ä»¬æ¥èŠèŠ Agent çš„å¤§è„‘ â€”â€” <strong>è§„åˆ’ï¼ˆPlanningï¼‰</strong> ã€‚</p>
<h3 data-id="heading-1">01. ä¸ºä»€ä¹ˆè¦è§„åˆ’ï¼Ÿï¼ˆThe Whyï¼‰</h3>
<p>é¢å¯¹ä¸€ä¸ªå¤æ‚ä»»åŠ¡ï¼ˆæ¯”å¦‚â€œå†™ä¸€ä»½ç«å“åˆ†æâ€ï¼‰ï¼Œå¦‚æœç›´æ¥æŠŠ Prompt æ‰”ç»™ LLMï¼Œé€šå¸¸ä¼šå‘ç”Ÿç¾éš¾ï¼š</p>
<ol>
<li><strong>ä¸Šä¸‹æ–‡çˆ†ç‚¸</strong>ï¼šä¸€æ¬¡æ€§å¡å…¥å¤ªå¤šæœç´¢ç»“æœï¼ŒToken ç¬é—´è€—å°½ã€‚</li>
<li><strong>é€»è¾‘æ··ä¹±</strong>ï¼šä¸œä¸€æ¦”å¤´è¥¿ä¸€æ£’æ§Œï¼Œè¾“å‡ºç¼ºä¹ç»“æ„ã€‚</li>
<li><strong>æ­»å¾ªç¯</strong>ï¼šåœ¨ä¸€ä¸ªæ— å…³ç´§è¦çš„ç»†èŠ‚ä¸Šï¼ˆæ¯”å¦‚ Rivian çš„è½®èƒä¾›åº”å•†ï¼‰çº ç¼ ä¸æ¸…ï¼Œæµªè´¹æ—¶é—´å’Œé‡‘é’±ã€‚</li>
</ol>
<p><strong>Planning æœ¬è´¨ä¸Šæ˜¯é¡¹ç›®ç®¡ç†å­¦åœ¨ AI é¢†åŸŸçš„åº”ç”¨ï¼š</strong> å®ƒæŠŠä¸€ä¸ª <strong>æ¨¡ç³Šçš„ã€å·¨å¤§çš„</strong> ç›®æ ‡ï¼Œæ‹†è§£æˆä¸€ç»„ <strong>å…·ä½“çš„ã€å¯æ‰§è¡Œçš„</strong> å°ä»»åŠ¡ã€‚</p>
<h4 data-id="heading-2">è£…ä¿®æˆ¿å­çš„å“²å­¦</h4>
<p>è¿™å°±åƒè£…ä¿®æˆ¿å­ã€‚ä½ ä¸ä¼šä¸€ä¸Šæ¥å°±åˆ·å¢™ã€‚ä½ ä¼šè‡ªç„¶åœ°è¿›è¡Œè§„åˆ’ï¼š</p>
<ol>
<li><strong>æ‹†è§£</strong>ï¼šæ°´ç”µã€æœ¨å·¥ã€æ²¹æ¼†ã€è½¯è£…ã€‚</li>
<li><strong>æ’åº</strong>ï¼šå¿…é¡»å…ˆæ”¹æ°´ç”µï¼Œå†é“ºåœ°æ¿ï¼ˆä¾èµ–å…³ç³»ï¼‰ã€‚</li>
<li><strong>å¹¶å‘</strong>ï¼šå¨æˆ¿è´´ç –å’Œå§å®¤åŠé¡¶å¯ä»¥åŒæ—¶åšï¼ˆå¹¶è¡Œææ•ˆï¼‰ã€‚</li>
</ol>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/976a721a9a144414a7bd83a6b8893d16~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IqL5ZyGYWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769920028&amp;x-signature=GsEzVuW%2FuUMi21Ca%2FVhv%2BqvrP1U%3D" alt="0003é¡µ.png" loading="lazy"/></p>
<p>Agent ä¹Ÿéœ€è¦è¿™ç§ç›´è§‰ã€‚</p>
<h3 data-id="heading-3">02. ä»»åŠ¡åˆ†è§£ï¼šMECE åŸåˆ™çš„æ•°å­—åŒ–</h3>
<p>Planning çš„ç¬¬ä¸€æ­¥æ˜¯ <strong>Decompositionï¼ˆåˆ†è§£ï¼‰</strong> ã€‚ Shannon æ¡†æ¶éµå¾ªå’¨è¯¢è¡Œä¸šçš„ <strong>MECE åŸåˆ™</strong>ï¼ˆç›¸äº’ç‹¬ç«‹ï¼Œå®Œå…¨ç©·å°½ï¼‰ã€‚</p>
<h4 data-id="heading-4">è¾“å…¥ä¸è¾“å‡º</h4>
<ul>
<li><strong>è¾“å…¥</strong>ï¼šâ€œåˆ†æ OpenAI çš„ç«äº‰å¯¹æ‰‹ã€‚â€</li>
<li><strong>Agent æ€è€ƒ</strong>ï¼šâ€œè¿™ä¸ªä»»åŠ¡å¤ªå¤§äº†ï¼Œæˆ‘éœ€è¦æ‹†è§£ã€‚â€</li>
</ul>
<h4 data-id="heading-5">åˆ†è§£ç»“æ„ï¼ˆä¼ªä»£ç ï¼‰</h4>
<pre><code class="hljs language-ini" lang="ini">Task: "åˆ†æ OpenAI ç«å“"

Subtasks:
  1. <span class="hljs-section">[ID: T1]</span> "è¯†åˆ«ä¸»è¦ç«äº‰å¯¹æ‰‹" 
     - äº§å‡º: <span class="hljs-section">[Competitor_List]</span>
     - èŒƒå›´: ä»…é™åŸºç¡€å¤§æ¨¡å‹å…¬å¸
  
  2. <span class="hljs-section">[ID: T2]</span> "æ”¶é›† Google Gemini çš„æŠ€æœ¯å‚æ•°"
     - ä¾èµ–: <span class="hljs-section">[T1]</span> (å¿…é¡»å…ˆçŸ¥é“å¯¹æ‰‹æ˜¯è°)
     - äº§å‡º: <span class="hljs-section">[Gemini_Specs]</span>
  
  3. <span class="hljs-section">[ID: T3]</span> "æ”¶é›† Anthropic Claude çš„æŠ€æœ¯å‚æ•°"
     - ä¾èµ–: <span class="hljs-section">[T1]</span>
     - äº§å‡º: <span class="hljs-section">[Claude_Specs]</span>
  
  4. <span class="hljs-section">[ID: T4]</span> "æ’°å†™å¯¹æ¯”æŠ¥å‘Š"
     - ä¾èµ–: <span class="hljs-section">[T2, T3]</span> (å¿…é¡»ç­‰èµ„æ–™éƒ½é½äº†æ‰èƒ½å†™)
     - äº§å‡º: <span class="hljs-section">[Final_Report]</span>
</code></pre>
<p><strong>å…³é”®ç‚¹ï¼š</strong></p>
<ul>
<li><strong>ä¾èµ–å£°æ˜ï¼ˆDependenciesï¼‰</strong> ï¼šT2 å’Œ T3 å¿…é¡»ç­‰ T1 åšå®Œæ‰èƒ½åšï¼›T4 å¿…é¡»ç­‰æ‰€æœ‰éƒ½åšå®Œæ‰èƒ½åšã€‚</li>
<li><strong>èŒƒå›´è¾¹ç•Œï¼ˆBoundariesï¼‰</strong> ï¼šæ˜ç¡®å‘Šè¯‰ T2 â€œåªæŸ¥å‚æ•°ï¼Œåˆ«æŸ¥èŠ±è¾¹æ–°é—»â€ï¼Œé˜²æ­¢å­ä»»åŠ¡è¶Šç•Œã€‚</li>
</ul>
<h3 data-id="heading-6">03. æ‰§è¡Œç­–ç•¥ï¼šæŒ‡æŒ¥äº¤é€šçš„è‰ºæœ¯</h3>
<p>ä»»åŠ¡æ‹†å¥½äº†ï¼Œæ€ä¹ˆæ‰§è¡Œï¼Ÿ è¿™æ¶‰åŠåˆ°äº†è®¡ç®—æœºç§‘å­¦ä¸­çš„ <strong>å›¾è®º</strong>ã€‚</p>
<h4 data-id="heading-7">ç­–ç•¥ Aï¼šå¹¶è¡Œæ‰§è¡Œ (Parallel)</h4>
<p><strong>é€‚ç”¨</strong>ï¼šå­ä»»åŠ¡äº’ä¸ç›¸å¹²ã€‚ <strong>ä¾‹å­</strong>ï¼šâ€œå¸®æˆ‘ç”Ÿæˆ 5 ä¸ªä¸åŒé£æ ¼çš„ Logo æç¤ºè¯ã€‚â€ <strong>æ“ä½œ</strong>ï¼šAgent åŒæ—¶å¼€å¯ 5 ä¸ªçº¿ç¨‹ï¼Œæ•ˆç‡æœ€é«˜ã€‚</p>
<h4 data-id="heading-8">ç­–ç•¥ Bï¼šä¸²è¡Œæ‰§è¡Œ (Sequential)</h4>
<p><strong>é€‚ç”¨</strong>ï¼šä¸¥æ ¼çš„æ­¥éª¤æµç¨‹ã€‚ <strong>ä¾‹å­</strong>ï¼šâ€œæ‰“å¼€æ–‡ä»¶ -&gt; è¯»å–å†…å®¹ -&gt; æ€»ç»“ -&gt; å‘é‚®ä»¶ã€‚â€ <strong>æ“ä½œ</strong>ï¼šä¸€æ­¥ä¸€æ­¥æ¥ï¼Œæœ€ç¨³ï¼Œä½†æœ€æ…¢ã€‚</p>
<h4 data-id="heading-9">ç­–ç•¥ Cï¼šDAGï¼ˆæœ‰å‘æ— ç¯å›¾ï¼‰æ‰§è¡Œ</h4>
<p><strong>é€‚ç”¨</strong>ï¼šå¤§å¤šæ•°å¤æ‚ä»»åŠ¡ã€‚ <strong>é€»è¾‘</strong>ï¼šè¿™æ˜¯æœ€èªæ˜çš„æ‰§è¡Œæ–¹å¼ã€‚Agent ä¼šæ„å»ºä¸€å¼  <strong>ä¾èµ–å…³ç³»å›¾</strong>ã€‚</p>
<blockquote>
<p><strong>å°±åƒåšé¥­ï¼š</strong> â€œç…®é¥­â€å’Œâ€œç‚’èœâ€å¯ä»¥ <strong>å¹¶è¡Œ</strong>ã€‚ ä½†â€œåˆ‡èœâ€å¿…é¡»åœ¨â€œç‚’èœâ€ <strong>ä¹‹å‰</strong>ã€‚ â€œåƒé¥­â€å¿…é¡»åœ¨â€œç…®é¥­â€å’Œâ€œç‚’èœâ€éƒ½ <strong>ç»“æŸ</strong> ä¹‹åã€‚</p>
</blockquote>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c04dd85277e741518894f280f7022749~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IqL5ZyGYWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769920028&amp;x-signature=qzer68i9RcIhfNWDNaEAywhVqGI%3D" alt="0006é¡µ.png" loading="lazy"/></p>
<p>Shannon çš„è°ƒåº¦å™¨ä¼šè‡ªåŠ¨åˆ†æä¾èµ–ï¼Œèƒ½å¹¶è¡Œçš„å¹¶è¡Œï¼Œè¯¥ç­‰å¾…çš„ç­‰å¾…ã€‚</p>
<h3 data-id="heading-10">04. è¦†ç›–åº¦è¯„ä¼°ï¼šçŸ¥é“ä½•æ—¶â€œæ”¶æ‰‹â€</h3>
<p>è¿™æ˜¯ Planning æ¨¡å¼ä¸­æœ€å®¹æ˜“è¢«å¿½è§†ï¼Œä½†ä¹Ÿæ˜¯æœ€æ˜‚è´µçš„ä¸€ç¯ã€‚</p>
<p>å¾ˆå¤š Agent ä¼šé™·å…¥ <strong>å®Œç¾ä¸»ä¹‰é™·é˜±</strong>ï¼šæŸ¥å®Œèµ„æ–™è§‰å¾—ä¸å¤Ÿï¼Œç»§ç»­æŸ¥ï¼ŒæŸ¥äº†åˆè§‰å¾—è¿˜ä¸å…¨ï¼Œæ— é™å¾ªç¯ï¼Œç›´åˆ°æŠŠä½ çš„é’±çƒ§å…‰ã€‚</p>
<p>æˆ‘ä»¬éœ€è¦ä¸€ä¸ª <strong>è¯„ä¼°è€…ï¼ˆEvaluatorï¼‰</strong> è§’è‰²ã€‚</p>
<h4 data-id="heading-11">è¯„ä¼°æµç¨‹</h4>
<pre><code class="hljs language-rust" lang="rust">åˆå§‹åˆ†è§£ <span class="hljs-punctuation">-&gt;</span> æ‰§è¡Œå­ä»»åŠ¡ <span class="hljs-punctuation">-&gt;</span> [è¯„ä¼°ç‚¹] <span class="hljs-punctuation">-&gt;</span> å¤Ÿäº†å—ï¼Ÿ
                           â†“
                        ä¸å¤Ÿ <span class="hljs-punctuation">-&gt;</span> ç”Ÿæˆè¡¥å……ä»»åŠ¡ <span class="hljs-punctuation">-&gt;</span> ç»§ç»­æ‰§è¡Œ
                           â†“
                         å¤Ÿäº† <span class="hljs-punctuation">-&gt;</span> ç»“æŸ
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f84c38304200409cb839b96eee9f1787~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IqL5ZyGYWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769920028&amp;x-signature=llwaF2HyS%2BeRR%2BL8N8NE9IGfvOk%3D" alt="0007é¡µ.png" loading="lazy"/></p>
<h4 data-id="heading-12">ç¡®å®šæ€§æŠ¤æ ï¼šç»™ LLM ä¸Šé”</h4>
<p>åƒä¸‡ä¸è¦å®Œå…¨ä¿¡ä»» LLM çš„åˆ¤æ–­ï¼ˆå®ƒé€šå¸¸å€¾å‘äºç»§ç»­å¹²æ´»ï¼‰ã€‚å¿…é¡»åŠ ä¸Šç¡¬è§„åˆ™ï¼š</p>
<ol>
<li><strong>æœ€å¤§è¿­ä»£æ¬¡æ•°ï¼ˆMax Loopsï¼‰</strong> ï¼šæœ€å¤šå¾ªç¯ 3 æ¬¡ï¼Œä¸ç®¡åšæ²¡åšå®Œï¼Œå¿…é¡»åœã€‚è¿™æ˜¯ <strong>æˆæœ¬åº•çº¿</strong>ã€‚</li>
<li><strong>è¦†ç›–åº¦é˜ˆå€¼</strong>ï¼šè®© LLM ç»™å½“å‰ç»“æœæ‰“åˆ†ï¼ˆ0-100ï¼‰ã€‚å¦‚æœè¶…è¿‡ 85 åˆ†ï¼Œå¼ºåˆ¶ç»“æŸã€‚</li>
<li><strong>ä¿¡æ¯å¢é‡æ£€æŸ¥</strong>ï¼šå¦‚æœè¿™ä¸€è½®æŸ¥åˆ°çš„ä¿¡æ¯å’Œä¸Šä¸€è½®å·®ä¸å¤šï¼Œè¯´æ˜åœ¨åšæ— ç”¨åŠŸï¼Œå¼ºåˆ¶ç»“æŸã€‚</li>
</ol>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/09921cd3bf8c49edacd89715ed03c958~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IqL5ZyGYWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769920028&amp;x-signature=%2FKda5NHFd4ajDfUOiS7RxDkYJ2M%3D" alt="0008é¡µ.png" loading="lazy"/></p>
<h3 data-id="heading-13">05. åŠ¨æ€è§„åˆ’ï¼šè®¡åˆ’èµ¶ä¸ä¸Šå˜åŒ–</h3>
<p>ç°å®ä¸–ç•Œæ˜¯å¤æ‚çš„ã€‚ Agent åˆšå¼€å§‹è§„åˆ’çš„æ˜¯â€œæŸ¥ Google çš„è´¢æŠ¥â€ï¼Œç»“æœå‘ç° Google æ²¡å‘è´¢æŠ¥ï¼Œæˆ–è€…ç½‘é¡µæ‰“ä¸å¼€ã€‚</p>
<p>æ­»æ¿çš„ Agent ä¼šæŠ¥é”™åœæ­¢ã€‚ èªæ˜çš„ Agent ä¼š <strong>åŠ¨æ€è°ƒæ•´ï¼ˆRe-planningï¼‰</strong> ã€‚</p>
<p><strong>é€»è¾‘ï¼š</strong></p>
<ol>
<li>T2 ä»»åŠ¡å¤±è´¥ï¼ˆç½‘é¡µ 404ï¼‰ã€‚</li>
<li>Agent æ•è·é”™è¯¯ã€‚</li>
<li><strong>è§¦å‘ Re-planning</strong>ï¼šç”Ÿæˆæ›¿ä»£ä»»åŠ¡ T2-b â€œå»æœç´¢ç›¸å…³æ–°é—»æŠ¥é“ä»£æ›¿è´¢æŠ¥â€ã€‚</li>
<li>ç»§ç»­æ‰§è¡Œã€‚</li>
</ol>
<p>è¿™å°±åƒå¯¼èˆªè½¯ä»¶ï¼Œå‘ç°å‰æ–¹å µè½¦ï¼ˆä»»åŠ¡å¤±è´¥ï¼‰ï¼Œç«‹åˆ»è®¡ç®—ä¸€æ¡æ–°è·¯çº¿ï¼ˆæ–°è®¡åˆ’ï¼‰ï¼Œè€Œä¸æ˜¯è®©ä½ æŠŠè½¦åœåœ¨è·¯ä¸­é—´ã€‚</p>
<h3 data-id="heading-14">06. å¸¸è§çš„å‘</h3>
<h4 data-id="heading-15">å‘ 1ï¼šè¿‡åº¦åˆ†è§£ï¼ˆMicro-managementï¼‰</h4>
<p><strong>ç°è±¡</strong>ï¼šæŠŠâ€œæŸ¥å¤©æ°”â€æ‹†è§£æˆâ€œæ‰“å¼€æµè§ˆå™¨ã€è¾“å…¥ç½‘å€ã€æ‰¾åˆ°æœç´¢æ¡†ã€è¾“å…¥åŸå¸‚...â€ã€‚ <strong>åæœ</strong>ï¼šæ‰§è¡Œæˆæœ¬è¿œé«˜äºä»»åŠ¡æœ¬èº«ï¼Œæ…¢ä¸”è´µã€‚ <strong>å»ºè®®</strong>ï¼šä¸€ä¸ªå­ä»»åŠ¡åº”å½“æ˜¯ä¸€ä¸ªå®Œæ•´çš„åŠ¨ä½œï¼ˆå¦‚â€œæœç´¢å¹¶æ€»ç»“å¤©æ°”â€ï¼‰ï¼Œç²’åº¦è¦é€‚ä¸­ã€‚</p>
<h4 data-id="heading-16">å‘ 2ï¼šèŒƒå›´é‡å </h4>
<p><strong>ç°è±¡</strong>ï¼šT1 æŸ¥â€œäº§å“â€ï¼ŒT2 æŸ¥â€œæœåŠ¡â€ï¼Œç»“æœä¸¤ä¸ªä»»åŠ¡éƒ½æŠŠâ€œå”®åæœåŠ¡â€æŸ¥äº†ä¸€éã€‚ <strong>åæœ</strong>ï¼šToken æµªè´¹ï¼Œæœ€åæ±‡æ€»æ—¶è¿˜å¾—å»é‡ã€‚ <strong>å»ºè®®</strong>ï¼šåœ¨ Prompt é‡Œæ˜ç¡® Out of Scopeï¼ˆä¸åŒ…å«ä»€ä¹ˆï¼‰ã€‚</p>
<h4 data-id="heading-17">å‘ 3ï¼šæ­»é”</h4>
<p><strong>ç°è±¡</strong>ï¼šA ç­‰ Bï¼ŒB ç­‰ Aã€‚ <strong>åæœ</strong>ï¼šç¨‹åºå¡æ­»ã€‚ <strong>å»ºè®®</strong>ï¼šåœ¨ DAG è°ƒåº¦å™¨ä¸­åŠ å…¥ç¯æ£€æµ‹ç®—æ³•ï¼Œç¡®ä¿ä¾èµ–å…³ç³»æ˜¯å•å‘çš„ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e85b085c4d534042bc22a8f442b2f04f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IqL5ZyGYWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769920028&amp;x-signature=5Go5kQSEIJl4gBUNapSV0b1AyQQ%3D" alt="0010é¡µ.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1925212989904dbd88797fc0ae5afa81~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IqL5ZyGYWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769920028&amp;x-signature=o%2FAylrNsQ7xz3IQOQEpUFm4oE6g%3D" alt="0012é¡µ.png" loading="lazy"/></p>
<h3 data-id="heading-18">æ€»ç»“</h3>
<p>Planning æ¨¡å¼æ˜¯ Agent è¿ˆå‘ <strong>é€šç”¨äººå·¥æ™ºèƒ½ï¼ˆAGIï¼‰</strong> çš„é›å½¢ã€‚</p>
<ul>
<li><strong>åˆ†è§£ï¼ˆDecompositionï¼‰</strong> ï¼šæŠŠå¤§è±¡è£…è¿›å†°ç®±åˆ†å‡ æ­¥ï¼Ÿ</li>
<li><strong>è°ƒåº¦ï¼ˆSchedulingï¼‰</strong> ï¼šå“ªäº›å¹¶è¡Œï¼Œå“ªäº›ä¸²è¡Œï¼Ÿ</li>
<li><strong>è¯„ä¼°ï¼ˆEvaluationï¼‰</strong> ï¼šåšå®Œäº†å—ï¼Ÿåšå¾—å¥½å—ï¼Ÿ</li>
<li><strong>åŠ¨æ€è°ƒæ•´ï¼ˆRe-planningï¼‰</strong> ï¼šè·¯ä¸é€šï¼Œæ¢æ¡è·¯ã€‚</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d161a8136d604d95ad713b751bdc882d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IqL5ZyGYWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769920028&amp;x-signature=4Q5sDH9AmtKgkXcx%2F%2FvwmgadItg%3D" alt="0013é¡µ.png" loading="lazy"/>
æŒæ¡äº† Planningï¼Œä½ çš„ Agent å°±ä¸å†æ˜¯ä¸€ä¸ªåªä¼šå¬æŒ‡ä»¤çš„ <strong>æ“ä½œå·¥</strong>ï¼Œè€Œæ˜¯ä¸€ä¸ªèƒ½ç‹¬å½“ä¸€é¢çš„ <strong>é¡¹ç›®ç»ç†</strong>ã€‚</p>
<p><strong>ä¸‹ä¸€ç« é¢„å‘Š</strong></p>
<p>Agent å­¦ä¼šäº†è§„åˆ’å’Œæ‰§è¡Œï¼Œä½†å®ƒæ€ä¹ˆçŸ¥é“è‡ªå·±åšå¾—å¯¹ä¸å¯¹ï¼Ÿ å¦‚æœå†™å‡ºçš„ä»£ç è·‘ä¸é€šï¼Œæˆ–è€…æŸ¥åˆ°çš„èµ„æ–™æ˜¯é”™çš„ï¼Œå®ƒèƒ½è‡ªå·±å‘ç°å¹¶æ”¹æ­£å—ï¼Ÿ</p>
<p>ä¸‹ä¸€ç« ï¼Œæˆ‘ä»¬æ¥èŠ <strong>Reflectionï¼ˆåæ€ï¼‰æ¨¡å¼</strong>ï¼šè¿™æ˜¯è®© Agent äº§ç”Ÿâ€œè‡ªæˆ‘æ„è¯†â€ã€å®ç°è‡ªæˆ‘è¿›åŒ–çš„å…³é”®ä¸€æ­¥ã€‚
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c2ef7d7e9ecc479493e70ce45bff0466~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IqL5ZyGYWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769920028&amp;x-signature=er46zjUWyicrjRqSEB9vO%2B%2B80Og%3D" alt="0015é¡µ.png" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç¬¬ 11 ç« ï¼šReflection æ¨¡å¼â€”â€”è®© Agent å­¦ä¼šâ€œç…§é•œå­â€]]></title>    <link>https://juejin.cn/post/7598699872552157220</link>    <guid>https://juejin.cn/post/7598699872552157220</guid>    <pubDate>2026-01-25T04:37:08.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7598699872552157220" data-draft-id="7598699872552140836" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç¬¬ 11 ç« ï¼šReflection æ¨¡å¼â€”â€”è®© Agent å­¦ä¼šâ€œç…§é•œå­â€"/> <meta itemprop="keywords" content="å‰ç«¯,Agent,AIGC"/> <meta itemprop="datePublished" content="2026-01-25T04:37:08.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="èŠ‹åœ†ai"/> <meta itemprop="url" content="https://juejin.cn/user/1451828494217415"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç¬¬ 11 ç« ï¼šReflection æ¨¡å¼â€”â€”è®© Agent å­¦ä¼šâ€œç…§é•œå­â€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1451828494217415/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    èŠ‹åœ†ai
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-25T04:37:08.000Z" title="Sun Jan 25 2026 04:37:08 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ç¬¬11ç« ï¼šReflection æ¨¡å¼ï¼šè®© Agent å­¦ä¼šâ€œç…§é•œå­â€</h2>
<blockquote>
<p><strong>Reflectionï¼ˆåæ€ï¼‰ä¸æ˜¯ä¸ºäº†è®© Agent å˜å¾—å®Œç¾ï¼Œè€Œæ˜¯ä¸ºäº†æé«˜â€œåŠæ ¼çº¿â€ã€‚å®ƒæŠŠâ€œå¬å¤©ç”±å‘½â€çš„å•æ¬¡ç”Ÿæˆï¼Œå˜æˆäº†â€œè‡ªæˆ‘çº é”™â€çš„é—­ç¯ç³»ç»Ÿã€‚</strong></p>
</blockquote>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a5d531dc50844b9c9ecea7cf911f6dc8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IqL5ZyGYWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769920627&amp;x-signature=W32E1mh2HhciyjcSDLL43Uzn5FY%3D" alt="0001é¡µ.png" loading="lazy"/></p>
<p>æƒ³è±¡ä¸€ä¸‹ï¼Œä½ è®© Agent å†™ä¸€æ®µ Python ä»£ç ã€‚ ç¬¬ä¸€æ¬¡è¿è¡Œï¼Œå®ƒæŠ¥é”™äº†ã€‚ Agent å¯¹æ­¤ä¸€æ— æ‰€çŸ¥ï¼Œç›´æ¥æŠŠè¿™æ®µæŠ¥é”™çš„ä»£ç æ‰”ç»™äº†ç”¨æˆ·ã€‚ ç”¨æˆ·ä¸€è·‘ï¼Œç‚¸äº†ã€‚</p>
<p><strong>è¿™å°±æ˜¯æ²¡æœ‰ Reflection çš„åæœã€‚</strong></p>
<p>LLMï¼ˆå¤§æ¨¡å‹ï¼‰åœ¨æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ª<strong>æ¦‚ç‡æ¨¡å‹</strong>ã€‚å®ƒå°±åƒä¸€ä¸ªé†‰é…’çš„ä½œå®¶ï¼Œæœ‰æ—¶å€™ä¸‹ç¬”å¦‚æœ‰ç¥ï¼Œæœ‰æ—¶å€™èƒ¡è¨€ä¹±è¯­ã€‚å¦‚æœä½ æ¯æ¬¡éƒ½ç›´æ¥é‡‡çº³å®ƒçš„ç¬¬ä¸€ç¨¿ï¼Œé‚£ä½ å°±æ˜¯åœ¨èµŒåšã€‚
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a68d2a06ea244eb9947de87dec0d7021~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IqL5ZyGYWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769920627&amp;x-signature=WUnYNpwo%2BCsceQBGSCpFt3gFAFI%3D" alt="0002é¡µ.png" loading="lazy"/></p>
<p><strong>Reflection æ¨¡å¼çš„æ ¸å¿ƒæ€æƒ³å¾ˆç®€å•ï¼š</strong> åœ¨æŠŠç»“æœäº¤ç»™ç”¨æˆ·ä¹‹å‰ï¼Œå…ˆè®© Agent è‡ªå·±çœ‹ä¸€çœ¼ï¼ˆç…§é•œå­ï¼‰ï¼Œé—®è‡ªå·±ä¸€å¥ï¼šâ€œæˆ‘å†™çš„å¯¹å—ï¼Ÿâ€å¦‚æœä¸å¯¹ï¼Œè‡ªå·±æ”¹å¥½å†å‘å‡ºå»ã€‚</p>
<p>æœ¬ç« æˆ‘ä»¬æ¥èŠèŠè¿™ä¸ªèƒ½è®© Agent â€œæ™ºå•†æš´æ¶¨â€çš„æ¨¡å¼ã€‚</p>
<h3 data-id="heading-1">01. ç³»ç»Ÿ 1 ä¸ç³»ç»Ÿ 2ï¼šå¿«æ€è€ƒä¸æ…¢æ€è€ƒ</h3>
<p>åœ¨è®¤çŸ¥å¿ƒç†å­¦ç¥ä½œã€Šæ€è€ƒï¼Œå¿«ä¸æ…¢ã€‹ä¸­ï¼Œä¸¹å°¼å°”Â·å¡å°¼æ›¼æå‡ºäº†ä¸¤ä¸ªç³»ç»Ÿï¼š</p>
<ul>
<li><strong>ç³»ç»Ÿ 1ï¼ˆå¿«æ€è€ƒï¼‰</strong> ï¼šç›´è§‰ã€æœ¬èƒ½ã€ååº”å¿«ä½†å®¹æ˜“å‡ºé”™ã€‚</li>
<li><strong>ç³»ç»Ÿ 2ï¼ˆæ…¢æ€è€ƒï¼‰</strong> ï¼šé€»è¾‘ã€æ¨ç†ã€ååº”æ…¢ä½†å‡†ç¡®ã€‚</li>
</ul>
<p>æ™®é€šçš„ LLM ç”Ÿæˆï¼ˆDirect Generationï¼‰å°±æ˜¯ <strong>ç³»ç»Ÿ 1</strong>ã€‚å®ƒæ ¹æ®æ¦‚ç‡å¿«é€Ÿåå­—ï¼Œä¸å‡æ€ç´¢ã€‚ Reflection æ¨¡å¼åˆ™æ˜¯å¼ºåˆ¶ LLM è¿›å…¥ <strong>ç³»ç»Ÿ 2</strong>ã€‚å®ƒå¼ºè¿«æ¨¡å‹åœä¸‹æ¥ï¼Œå®¡è§†è‡ªå·±çš„è¾“å‡ºï¼Œè¿›è¡Œé€»è¾‘æ ¡éªŒã€‚</p>
<blockquote>
<p><strong>æ¯”å–»ï¼š</strong> æ²¡æœ‰ Reflection çš„ Agent å°±åƒ <strong>å£æ— é®æ‹¦çš„é†‰æ±‰</strong>ï¼Œæƒ³åˆ°ä»€ä¹ˆè¯´ä»€ä¹ˆã€‚ æœ‰ Reflection çš„ Agent å°±åƒ <strong>è°¨æ…çš„å‘è¨€äºº</strong>ï¼Œæ‰“å¥½è‰ç¨¿ï¼Œåå¤æ¨æ•²ï¼Œç¡®è®¤æ— è¯¯åå†å‘å¸ƒã€‚</p>
</blockquote>
<h3 data-id="heading-2">02. Reflection çš„æ ¸å¿ƒä¸‰éƒ¨æ›²</h3>
<p>Reflection ä¸æ˜¯ç„å­¦ï¼Œå®ƒåœ¨å·¥ç¨‹ä¸Šé€šå¸¸ç”±ä¸‰ä¸ªæ˜ç¡®çš„æ­¥éª¤ç»„æˆï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ <strong>â€œä½œå®¶ä¸ç¼–è¾‘â€</strong> çš„å…³ç³»æ¥æ¯”å–»ï¼š</p>
<h4 data-id="heading-3">ç¬¬ä¸€æ­¥ï¼šåˆç¨¿ç”Ÿæˆï¼ˆWriterï¼‰</h4>
<p>Agent åƒå¾€å¸¸ä¸€æ ·ï¼Œæ ¹æ®ç”¨æˆ·çš„ Prompt ç”Ÿæˆä¸€ä¸ª <strong>åˆç¨¿ï¼ˆDraftï¼‰</strong> ã€‚</p>
<ul>
<li><em>çŠ¶æ€</em>ï¼šå¯èƒ½åŒ…å«é”™è¯¯ã€å¹»è§‰æˆ–é€»è¾‘æ¼æ´ã€‚</li>
</ul>
<h4 data-id="heading-4">ç¬¬äºŒæ­¥ï¼šè´¨é‡è¯„ä¼°ï¼ˆEditorï¼‰</h4>
<p>è¿™æ˜¯ä¸€ä¸ªä¸“é—¨çš„â€œè¯„ä¼°è€…è§’è‰²â€ï¼ˆå¯ä»¥æ˜¯åŒä¸€ä¸ª LLMï¼Œä¹Ÿå¯ä»¥æ˜¯æ›´å¼ºçš„ LLMï¼‰ã€‚å®ƒä¸è´Ÿè´£å†™ï¼Œåªè´Ÿè´£<strong>æŒ‘åˆº</strong>ã€‚ å®ƒä¼šæ‹¿ç€æ”¾å¤§é•œæ£€æŸ¥åˆç¨¿ï¼š</p>
<ul>
<li>ä»£ç èƒ½è¿è¡Œå—ï¼Ÿï¼ˆè°ƒç”¨è§£é‡Šå™¨éªŒè¯ï¼‰</li>
<li>æ ¼å¼æ˜¯ JSON å—ï¼Ÿï¼ˆæ­£åˆ™éªŒè¯ï¼‰</li>
<li>æœ‰æ²¡æœ‰å›ç­”ç”¨æˆ·çš„æ ¸å¿ƒé—®é¢˜ï¼Ÿï¼ˆè¯­ä¹‰è¯„åˆ†ï¼‰</li>
</ul>
<p>å¦‚æœå‘ç°é—®é¢˜ï¼Œå®ƒä¼šå†™ä¸‹ä¸€æ®µ <strong>åé¦ˆæ„è§ï¼ˆFeedbackï¼‰</strong> ï¼šâ€œç¬¬ 3 è¡Œä»£ç å¼•ç”¨äº†ä¸å­˜åœ¨çš„åº“ï¼›JSON ç¼ºå°‘ <code>user_id</code> å­—æ®µã€‚â€</p>
<h4 data-id="heading-5">ç¬¬ä¸‰æ­¥ï¼šå¸¦åé¦ˆé‡å†™ï¼ˆReviserï¼‰</h4>
<p>Agent æ‹¿åˆ°åˆç¨¿å’Œç¼–è¾‘çš„åé¦ˆæ„è§ï¼Œé‡æ–°ç”Ÿæˆ <strong>ç»ˆç¨¿ï¼ˆFinal Versionï¼‰</strong> ã€‚ è¿™ä¸€æ¬¡ï¼Œå®ƒæœ‰äº†æ˜ç¡®çš„ä¿®æ”¹æ–¹å‘ï¼Œè´¨é‡é€šå¸¸ä¼šå¤§å¹…æå‡ã€‚</p>
<h3 data-id="heading-6">03. æ¶æ„è®¾è®¡ï¼šé—­ç¯ä¸æŠ¤æ </h3>
<p>åœ¨ Shannon æ¡†æ¶ä¸­ï¼ŒReflection æ˜¯ä¸€ä¸ªæ ‡å‡†çš„ <strong>While å¾ªç¯</strong>ã€‚</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># ä¼ªä»£ç ï¼šReflection ä¸»å¾ªç¯</span>
def generate_with_reflection(query):
    <span class="hljs-comment"># 1. å†™åˆç¨¿</span>
    <span class="hljs-attr">draft</span> = llm.generate(query)
    <span class="hljs-attr">retry_count</span> = <span class="hljs-number">0</span>
    
    while retry_count &lt; MAX_RETRIES:
        <span class="hljs-comment"># 2. è¯„ä¼°ï¼ˆç…§é•œå­ï¼‰</span>
        score, <span class="hljs-attr">feedback</span> = evaluator.assess(draft)
        
        <span class="hljs-comment"># 3. è¾¾æ ‡åˆ¤æ–­</span>
        if score &gt; PASS_THRESHOLD:
            return draft  <span class="hljs-comment"># è´¨é‡è¿‡å…³ï¼Œç›´æ¥è¿”å›</span>
            
        <span class="hljs-comment"># 4. æ ¹æ®åé¦ˆé‡å†™</span>
        <span class="hljs-attr">prompt</span> = f<span class="hljs-string">"""
        ä½ çš„ä¸Šä¸€æ¬¡å›ç­”æœ‰é—®é¢˜ã€‚
        é—®é¢˜ï¼š{query}
        ä½ çš„å›ç­”ï¼š{draft}
        åé¦ˆæ„è§ï¼š{feedback}
        è¯·æ ¹æ®åé¦ˆä¿®æ­£å›ç­”ã€‚
        """</span>
        <span class="hljs-attr">draft</span> = llm.generate(prompt)
        retry_count += 1
        
    <span class="hljs-comment"># 5. å…œåº•ï¼šå¦‚æœé‡è¯•å¤šæ¬¡è¿˜ä¸è¡Œï¼Œè¿”å›æœ€åä¸€æ¬¡çš„ç»“æœï¼ˆæˆ–æŠ¥é”™ï¼‰</span>
    return draft
</code></pre>
<h4 data-id="heading-7">å…³é”®ç»„ä»¶</h4>
<ol>
<li>
<p><strong>Evaluatorï¼ˆè¯„ä¼°å™¨ï¼‰</strong> ï¼šè¿™æ˜¯æœ€æ ¸å¿ƒçš„ç»„ä»¶ã€‚</p>
<ul>
<li><strong>åŸºäºè§„åˆ™</strong>ï¼šæ¯”å¦‚ä»£ç å¿…é¡»é€šè¿‡å•å…ƒæµ‹è¯•ï¼ŒJSON å¿…é¡»èƒ½ Parseã€‚è¿™æ˜¯æœ€ç¡¬çš„æŒ‡æ ‡ã€‚</li>
<li><strong>åŸºäºæ¨¡å‹</strong>ï¼šè®© LLM è‡ªå·±æ‰“åˆ†ï¼ˆ0-10 åˆ†ï¼‰ã€‚æç¤ºè¯ï¼šâ€œä½œä¸ºä¸€ä¸ªä¸¥å‰çš„æ•™æˆï¼Œè¯·ç»™è¿™ç¯‡è®ºæ–‡æ‰“åˆ†ï¼Œå¹¶æŒ‡å‡ºé€»è¾‘è°¬è¯¯ã€‚â€</li>
</ul>
</li>
<li>
<p><strong>Controllerï¼ˆæ§åˆ¶å™¨ï¼‰</strong> ï¼šé˜²æ­¢æ­»å¾ªç¯ã€‚</p>
<ul>
<li>å¿…é¡»è®¾ç½® <code>MAX_RETRIES</code>ï¼ˆé€šå¸¸æ˜¯ 1-3 æ¬¡ï¼‰ã€‚å¦åˆ™é‡åˆ°ä¿®ä¸å¥½çš„ Bugï¼ŒAgent ä¼šæŠŠä½ çš„ Token çƒ§å…‰ã€‚</li>
</ul>
</li>
</ol>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/475dfe6af2864c16bbded9c68f4f7cc7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IqL5ZyGYWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769920627&amp;x-signature=ZEnWmpz1tNBphDj5PuqlrxDLMMg%3D" alt="0004é¡µ.png" loading="lazy"/></p>
<h3 data-id="heading-8">04. ç»æµå­¦è´¦æœ¬ï¼šè´¨é‡ä¸æˆæœ¬çš„åšå¼ˆ</h3>
<p>Reflection å¬èµ·æ¥å¾ˆç¾ï¼Œä¸ºä»€ä¹ˆä¸ç»™æ‰€æœ‰ Agent éƒ½è£…ä¸Šï¼Ÿ å› ä¸º <strong>è´µ</strong>ã€‚</p>
<p>å¼•å…¥ Reflection åï¼ŒåŸæœ¬ 1 æ¬¡çš„ API è°ƒç”¨ï¼Œå˜æˆäº† <strong>1ï¼ˆåˆç¨¿ï¼‰+ Nï¼ˆè¯„ä¼°ï¼‰+ Nï¼ˆé‡å†™ï¼‰</strong> æ¬¡ã€‚</p>
<ul>
<li><strong>Token æ¶ˆè€—</strong>ï¼šå¯èƒ½ç¿»å€ç”šè‡³ä¸‰å€ã€‚</li>
<li><strong>å»¶è¿Ÿï¼ˆLatencyï¼‰</strong> ï¼šç”¨æˆ·ç­‰å¾…æ—¶é—´æ˜¾è‘—å¢åŠ ã€‚</li>
</ul>
<p><strong>ä»€ä¹ˆæ—¶å€™è¯¥ç”¨ Reflectionï¼Ÿ</strong></p>






























<table><thead><tr><th>åœºæ™¯</th><th>å»ºè®®</th><th>åŸå› </th></tr></thead><tbody><tr><td><strong>ä»£ç ç”Ÿæˆ</strong></td><td><strong>å¿…é¡»ç”¨</strong></td><td>ä»£ç é”™ä¸€ä¸ªæ ‡ç‚¹å°±è·‘ä¸é€šï¼Œå¿…é¡»è‡ªæˆ‘çº é”™ã€‚</td></tr><tr><td><strong>å¤æ‚é€»è¾‘æ¨ç†</strong></td><td><strong>æ¨èç”¨</strong></td><td>æ•°å­¦é¢˜ã€ä¾¦æ¢æ¨ç†ï¼Œå®¹æ˜“ä¸€æ­¥é”™æ­¥æ­¥é”™ã€‚</td></tr><tr><td><strong>åˆ›æ„å†™ä½œ</strong></td><td><strong>æ…ç”¨</strong></td><td>åˆ›æ„æ²¡æœ‰æ ‡å‡†ç­”æ¡ˆï¼Œâ€œçº é”™â€å¯èƒ½ä¼šæ‰¼æ€çµæ„Ÿã€‚</td></tr><tr><td><strong>ç®€å•é—²èŠ</strong></td><td><strong>ç¦ç”¨</strong></td><td>â€œä½ å¥½â€ä¸éœ€è¦åæ€ï¼Œç§’å›æœ€é‡è¦ã€‚</td></tr></tbody></table>
<p><strong>å‡ç»´æ€è€ƒï¼š</strong> è¿™æœ¬è´¨ä¸Šæ˜¯ <strong>è´¨é‡æˆæœ¬ï¼ˆCost of Qualityï¼‰</strong> çš„æƒè¡¡ã€‚å¯¹äºé«˜ä»·å€¼è¾“å‡ºï¼ˆå¦‚ç”Ÿäº§ç¯å¢ƒä»£ç ã€åŒ»ç–—å»ºè®®ï¼‰ï¼Œå¤šèŠ±å‡ å€çš„ Token æ¢å–å‡†ç¡®æ€§æ˜¯å€¼å¾—çš„ï¼›å¯¹äºä½ä»·å€¼è¾“å‡ºï¼ˆå¦‚é—²èŠï¼‰ï¼Œåˆ™æ˜¯æµªè´¹ã€‚</p>
<h3 data-id="heading-9">05. å¸¸è§çš„å‘ï¼ˆPitfallsï¼‰</h3>
<h4 data-id="heading-10">å‘ 1ï¼šç›²ç›®è‡ªä¿¡çš„è¯„ä¼°å™¨</h4>
<p>å¦‚æœä½ è®© GPT-3.5 å»è¯„ä¼° GPT-4 çš„å›ç­”ï¼Œå®ƒå¾€å¾€çœ‹ä¸å‡ºé—®é¢˜ï¼Œç”šè‡³ä¼šè§‰å¾—â€œå†™å¾—çœŸå¥½â€ã€‚ <strong>åŸåˆ™</strong>ï¼šè¯„ä¼°è€…çš„èƒ½åŠ›å¿…é¡» <strong>å¤§äºç­‰äº</strong> ç”Ÿæˆè€…ã€‚æˆ–è€…ä½¿ç”¨ç¡®å®šæ€§å·¥å…·ï¼ˆç¼–è¯‘å™¨ã€æ•°æ®åº“ï¼‰ä½œä¸ºè¯„ä¼°æ ‡å‡†ã€‚</p>
<h4 data-id="heading-11">å‘ 2ï¼šæ¨¡ç³Šçš„åé¦ˆ</h4>
<p>è¯„ä¼°å™¨ç»™å‡ºçš„åé¦ˆå¦‚æœæ˜¯ï¼šâ€œè¿™å†™å¾—ä¸å¥½ï¼Œé‡å†™ã€‚â€ â€”â€” è¿™ç§åé¦ˆæ¯«æ— ä»·å€¼ã€‚ <strong>åŸåˆ™</strong>ï¼šåé¦ˆå¿…é¡» <strong>å…·ä½“ï¼ˆActionableï¼‰</strong> ã€‚æ¯”å¦‚ï¼šâ€œç¬¬ 2 æ®µé€»è¾‘ä¸ç¬¬ 1 æ®µçŸ›ç›¾â€ã€â€œç¼ºå°‘å…·ä½“çš„æ¡ˆä¾‹æ”¯æ’‘â€ã€‚</p>
<h4 data-id="heading-12">å‘ 3ï¼šæ­»å¾ªç¯é™·é˜±</h4>
<p>æœ‰æ—¶å€™ Agent ä¼šé™·å…¥æ€ªåœˆï¼šA æ”¹æˆäº† Bï¼Œè¯„ä¼°è¯´ B ä¸å¯¹ï¼›B æ”¹å›äº† Aï¼Œè¯„ä¼°è¯´ A ä¸å¯¹ã€‚ <strong>åŸåˆ™</strong>ï¼šåœ¨ Prompt ä¸­åŠ å…¥ <strong>Temperatureï¼ˆéšæœºæ€§ï¼‰</strong> çš„å¾®è°ƒï¼Œæˆ–è€…åœ¨é‡è¯•æ—¶å¼ºåˆ¶åˆ‡æ¢æ€è·¯ã€‚</p>
<h3 data-id="heading-13">06. Reflection vs å…¶ä»–ä¼˜åŒ–æ‰‹æ®µ</h3>
<p>Reflection ç»å¸¸è¢«æ‹¿æ¥å’Œ <strong>Self-Consistencyï¼ˆè‡ªæ´½æ€§ï¼‰</strong> åšæ¯”è¾ƒã€‚</p>
<ul>
<li><strong>Reflectionï¼ˆåæ€ï¼‰</strong> ï¼šä¸²è¡Œã€‚å†™å®Œ -&gt; æ”¹ -&gt; å†æ”¹ã€‚é€‚åˆ <strong>ä¿®æ­£é”™è¯¯</strong>ã€‚</li>
<li><strong>Self-Consistencyï¼ˆè‡ªæ´½ï¼‰</strong> ï¼šå¹¶è¡Œã€‚åŒæ—¶å†™ 5 ä¸ªç‰ˆæœ¬ -&gt; æŠ•ç¥¨é€‰æœ€å¥½çš„ã€‚é€‚åˆ <strong>å¼€æ”¾æ€§æ¢ç´¢</strong>ã€‚</li>
</ul>
<p><strong>Human Reviewï¼ˆäººå·¥å®¡æ ¸ï¼‰</strong> åˆ™æ˜¯ Reflection çš„ç»ˆæå½¢æ€â€”â€”ç”±äººæ¥å……å½“ Evaluatorã€‚è¿™æ˜¯æœ€è´µä½†æœ€å‡†çš„ã€‚!</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5c978e68591840eb82c46b6f96abb8f0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IqL5ZyGYWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769920627&amp;x-signature=z61DoiU7QzMJmLqo76Bt8MAWk4o%3D" alt="0011é¡µ.png" loading="lazy"/></p>
<h3 data-id="heading-14">æ€»ç»“</h3>
<p>Reflection æ¨¡å¼æ˜¯ Agent ä»â€œé¹¦é¹‰å­¦èˆŒâ€è¿ˆå‘â€œç‹¬ç«‹æ€è€ƒâ€çš„å…³é”®ä¸€æ­¥ã€‚</p>
<p>å®ƒæ•™ä¼šäº† Agent <strong>å®¡è§†è‡ªæˆ‘</strong>ã€‚ è™½ç„¶å®ƒä¼šå¢åŠ æˆæœ¬å’Œå»¶è¿Ÿï¼Œä½†åœ¨è¿½æ±‚é«˜å¯é æ€§çš„åœºæ™¯ä¸‹ï¼Œå®ƒæ˜¯ä¸å¯æˆ–ç¼ºçš„<strong>è´¨é‡å®ˆé—¨å‘˜</strong>ã€‚</p>
<p>è®°ä½ï¼š<strong>æˆ‘ä»¬ä¸è¦æ±‚ Agent ä¸€æ¬¡å°±å¯¹ï¼Œä½†æˆ‘ä»¬è¦æ±‚å®ƒåœ¨äº¤å·å‰ï¼Œè‡³å°‘è‡ªå·±æ£€æŸ¥ä¸€éã€‚</strong></p>
<p><strong>ä¸‹ä¸€ç« é¢„å‘Š</strong></p>
<p>Agent å­¦ä¼šäº†åæ€ï¼Œè´¨é‡æœ‰äº†ä¿éšœã€‚ä½†é¢å¯¹é‚£äº›éœ€è¦å‡ åæ­¥æ¨ç†çš„è¶…çº§éš¾é¢˜ï¼Œå…‰é åæ€è¿˜ä¸å¤Ÿã€‚å®ƒéœ€è¦å­¦ä¼šæŠŠæ€ç»´è¿‡ç¨‹â€œæ˜¾æ€§åŒ–â€ã€‚ ä¸‹ä¸€ç« ï¼Œæˆ‘ä»¬æ¥èŠ <strong>Chain-of-Thought (CoTï¼Œæ€ç»´é“¾)</strong> ï¼šå¦‚ä½•è®© Agent åƒæ•°å­¦å®¶ä¸€æ ·ï¼ŒæŠŠæ¨ç†è¿‡ç¨‹ä¸€æ­¥æ­¥å†™åœ¨çº¸ä¸Šï¼Œä»è€Œè§£å¼€æœ€éš¾çš„è°œé¢˜ã€‚
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b4479fcd831544cb9a7a7a23e6526281~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IqL5ZyGYWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769920627&amp;x-signature=Li6zy%2BSCJ18d3yLWGiiGeIYAKao%3D" alt="0014é¡µ.png" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€æŠ€æœ¯ä¸“é¢˜ã€‘Scikit-learn Pythonæœºå™¨å­¦ä¹  - ç‰¹å¾å·¥ç¨‹ä¹‹ç‰¹å¾é™ç»´ å‹ç¼©æ•°æ®]]></title>    <link>https://juejin.cn/post/7598947628450316315</link>    <guid>https://juejin.cn/post/7598947628450316315</guid>    <pubDate>2026-01-25T04:34:53.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7598947628450316315" data-draft-id="7598537377473232934" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€æŠ€æœ¯ä¸“é¢˜ã€‘Scikit-learn Pythonæœºå™¨å­¦ä¹  - ç‰¹å¾å·¥ç¨‹ä¹‹ç‰¹å¾é™ç»´ å‹ç¼©æ•°æ®"/> <meta itemprop="keywords" content="æœºå™¨å­¦ä¹ "/> <meta itemprop="datePublished" content="2026-01-25T04:34:53.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°é”‹java1234"/> <meta itemprop="url" content="https://juejin.cn/user/4152222342709933"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€æŠ€æœ¯ä¸“é¢˜ã€‘Scikit-learn Pythonæœºå™¨å­¦ä¹  - ç‰¹å¾å·¥ç¨‹ä¹‹ç‰¹å¾é™ç»´ å‹ç¼©æ•°æ®
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4152222342709933/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°é”‹java1234
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-25T04:34:53.000Z" title="Sun Jan 25 2026 04:34:53 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»13åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯é”‹å“¥ã€‚æœ€è¿‘è¿è½½æ›´æ–°ã€ŠScikit-learn Pythonæœºå™¨å­¦ä¹ ã€‹æŠ€æœ¯ä¸“é¢˜ã€‚ <img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a4cca12d1f274a3e8cbbf77cb6145dbb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP6ZSLamF2YTEyMzQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769920492&amp;x-signature=5tVxAw14BrykDz%2BW6NAv2PHnkNw%3D" alt="image.png" loading="lazy"/> æœ¬è¯¾ç¨‹ä¸»è¦è®²è§£åŸºäºScikit-learnçš„Pythonæœºå™¨å­¦ä¹ çŸ¥è¯†ï¼ŒåŒ…æ‹¬æœºå™¨å­¦ä¹ æ¦‚è¿°ï¼Œç‰¹å¾å·¥ç¨‹(æ•°æ®é›†ï¼Œç‰¹å¾æŠ½å–ï¼Œç‰¹å¾é¢„å¤„ç†ï¼Œç‰¹å¾é™ç»´ç­‰)ï¼Œåˆ†ç±»ç®—æ³•(K-ä¸´è¿‘ç®—æ³•ï¼Œæœ´ç´ è´å¶æ–¯ç®—æ³•ï¼Œå†³ç­–æ ‘ç­‰)ï¼Œå›å½’ä¸èšç±»ç®—æ³•(çº¿æ€§å›å½’ï¼Œæ¬ æ‹Ÿåˆï¼Œé€»è¾‘å›å½’ä¸äºŒåˆ†ç±»ï¼ŒK-meansç®—æ³•)ç­‰ã€‚ åŒæ—¶ä¹Ÿé…å¥—è§†é¢‘æ•™ç¨‹<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV11reUzEEPH%2F" title="https://link.juejin.cn?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV11reUzEEPH%2F" target="_blank">ã€ŠScikit-learn Pythonæœºå™¨å­¦ä¹  è§†é¢‘æ•™ç¨‹ã€‹</a></p>
<p>ç‰¹å¾é™ç»´æ˜¯æœºå™¨å­¦ä¹ ä¸­å¸¸ç”¨çš„æŠ€æœ¯ï¼Œç”¨äºå‡å°‘ç‰¹å¾çš„æ•°é‡ï¼ŒåŒæ—¶å°½å¯èƒ½ä¿ç•™åŸå§‹æ•°æ®çš„ä¿¡æ¯ã€‚åœ¨Scikit-learnä¸­ï¼Œç‰¹å¾é™ç»´ä¸»è¦æœ‰ä¸¤ç§æ–¹æ³•ï¼šç‰¹å¾é€‰æ‹©å’Œç‰¹å¾æå–ã€‚</p>
<p>1ï¼Œç‰¹å¾é€‰æ‹©ï¼šä»åŸå§‹ç‰¹å¾ä¸­é€‰æ‹©ä¸€éƒ¨åˆ†ç‰¹å¾ã€‚æ–¹æ³•åŒ…æ‹¬ï¼šç§»é™¤ä½æ–¹å·®ç‰¹å¾(VarianceThreshold)ï¼Œå•å˜é‡ç»Ÿè®¡ï¼ˆSelectKBest, SelectPercentileï¼‰ã€åŸºäºæ¨¡å‹çš„ç‰¹å¾é€‰æ‹©ï¼ˆå¦‚SelectFromModelï¼‰ã€é€’å½’ç‰¹å¾æ¶ˆé™¤ï¼ˆRFEï¼‰ç­‰ã€‚,</p>
<p>2ï¼Œç‰¹å¾æå–ï¼šå°†åŸå§‹ç‰¹å¾è½¬æ¢åˆ°æ–°çš„ç‰¹å¾ç©ºé—´ï¼Œä»è€Œå‡å°‘ç‰¹å¾æ•°é‡ã€‚å¸¸ç”¨çš„æ–¹æ³•æœ‰ä¸»æˆåˆ†åˆ†æï¼ˆPCAï¼‰ã€çº¿æ€§åˆ¤åˆ«åˆ†æï¼ˆLDAï¼‰ã€éè´ŸçŸ©é˜µåˆ†è§£ï¼ˆNMFï¼‰ç­‰ã€‚</p>
<h2 data-id="heading-0">ç‰¹å¾é€‰æ‹©</h2>
<h3 data-id="heading-1">ç§»é™¤ä½æ–¹å·®ç‰¹å¾(VarianceThreshold)</h3>
<p>é€‚ç”¨äºç§»é™¤æ–¹å·®ä½äºé˜ˆå€¼çš„ç‰¹å¾ï¼Œè¿™äº›ç‰¹å¾é€šå¸¸åŒ…å«å¾ˆå°‘çš„ä¿¡æ¯ã€‚</p>
<p>VarianceThreshold æ˜¯æœºå™¨å­¦ä¹ ä¸­ä¸€ä¸ªç®€å•ä½†å®ç”¨çš„ç‰¹å¾é€‰æ‹©æ–¹æ³•ï¼Œå®ƒé€šè¿‡ç§»é™¤ä½æ–¹å·®ç‰¹å¾æ¥ç®€åŒ–æ•°æ®é›†ã€‚<code>VarianceThreshold</code> çš„ä¸»è¦å‚æ•°æ˜¯ <code>threshold</code>ï¼Œå®ƒå†³å®šäº†ç‰¹å¾è¢«ä¿ç•™ä¸å¦çš„æ–¹å·®é—¨æ§›ã€‚</p>















<table><thead><tr><th>å‚æ•°å (Parameter)</th><th>è¯´æ˜ (Description)</th><th>é»˜è®¤å€¼ (Default)</th></tr></thead><tbody><tr><td><code>threshold</code></td><td>ä¸€ä¸ªæµ®ç‚¹æ•° (float)ã€‚æŒ‡å®šè¦ä¿ç•™ç‰¹å¾çš„æœ€ä½æ–¹å·®é˜ˆå€¼ã€‚è®­ç»ƒé›†ä¸­æ–¹å·®<strong>ä½äº</strong>æ­¤é˜ˆå€¼çš„ç‰¹å¾å°†è¢«<strong>ç§»é™¤</strong>ã€‚</td><td><code>0.0</code></td></tr></tbody></table>
<p>æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> sklearn.feature_selection <span class="hljs-keyword">import</span> VarianceThreshold
<span class="hljs-keyword">from</span> sklearn.datasets <span class="hljs-keyword">import</span> load_iris
â€‹
<span class="hljs-comment"># åŠ è½½ç¤ºä¾‹æ•°æ®</span>
X, y = load_iris(return_X_y=<span class="hljs-literal">True</span>)
<span class="hljs-comment"># è®¾ç½®é˜ˆå€¼ï¼Œç§»é™¤æ–¹å·®ä½äº0.8çš„ç‰¹å¾</span>
selector = VarianceThreshold(threshold=<span class="hljs-number">0.8</span>)
X_new = selector.fit_transform(X)
â€‹
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"åŸå§‹ç‰¹å¾æ•°: <span class="hljs-subst">{X.shape[<span class="hljs-number">1</span>]}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"ç­›é€‰åç‰¹å¾æ•°: <span class="hljs-subst">{X_new.shape[<span class="hljs-number">1</span>]}</span>"</span>)
</code></pre>
<p>è¿è¡Œç»“æœï¼š</p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">åŸå§‹ç‰¹å¾æ•°: 4</span>
<span class="hljs-section">ç­›é€‰åç‰¹å¾æ•°: 1</span>
</code></pre>
<p>æ•°å­¦çŸ¥è¯†ï¼šæ–¹å·®</p>
<p>æ–¹å·®å…¬å¼æ˜¯ä¸€ä¸ªæ•°å­¦å…¬å¼ï¼Œæ˜¯æ•°å­¦ç»Ÿè®¡å­¦ä¸­çš„é‡è¦å…¬å¼ï¼Œåº”ç”¨äºç”Ÿæ´»ä¸­å„ç§äº‹æƒ…ï¼Œæ–¹å·®è¶Šå°ï¼Œä»£è¡¨è¿™ç»„æ•°æ®è¶Šç¨³å®šï¼Œæ–¹å·®è¶Šå¤§ï¼Œä»£è¡¨è¿™ç»„æ•°æ®è¶Šä¸ç¨³å®š</p>
<p>è‹¥x1,x2,x3......xnçš„å¹³å‡æ•°ä¸ºMï¼Œåˆ™æ–¹å·®å…¬å¼å¯è¡¨ç¤ºä¸ºï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6de0cc917b774da9a37d65c4104eb5a9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP6ZSLamF2YTEyMzQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769920492&amp;x-signature=TPD9qLeAnBg69eOgrEtfASoAVKo%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-2">å•å˜é‡ç‰¹å¾é€‰æ‹© SelectKBest - é€‰æ‹©Top Kä¸ªç‰¹å¾</h3>
<p>åŸºäºç»Ÿè®¡æ£€éªŒé€‰æ‹©æœ€ä½³ç‰¹å¾ã€‚</p>
<p><code>SelectKBest</code> çš„åŸç†éå¸¸ç›´è§‚ï¼Œå…¶åç§°å°±å®Œç¾æ¦‚æ‹¬äº†å…¶å·¥ä½œæ–¹å¼ï¼š <strong>Selectï¼ˆé€‰æ‹©ï¼‰ + K + Bestï¼ˆæœ€å¥½çš„ï¼‰</strong></p>
<p>é¡¾åæ€ä¹‰ï¼Œå®ƒçš„ç›®æ ‡æ˜¯ä»åŸå§‹ç‰¹å¾é›†ä¸­<strong>é€‰æ‹©å‡º K ä¸ªâ€œæœ€å¥½çš„â€ç‰¹å¾</strong>ã€‚é‚£ä¹ˆï¼Œæ ¸å¿ƒé—®é¢˜å°±å˜æˆäº†ï¼š<strong>å¦‚ä½•å®šä¹‰â€œæœ€å¥½â€ï¼Ÿ</strong></p>
<p><code>SelectKBest</code> çš„å·¥ä½œæµç¨‹å¯ä»¥æ¦‚æ‹¬ä¸ºä»¥ä¸‹ä¸‰ä¸ªæ­¥éª¤ï¼š</p>
<ol start="0">
<li>
<p><strong>æ‰“åˆ†ï¼ˆScoringï¼‰</strong> ï¼š</p>
<ul>
<li>å¯¹äºæ•°æ®é›†ä¸­çš„<strong>æ¯ä¸€ä¸ªç‰¹å¾</strong>ï¼Œéƒ½ä½¿ç”¨ä¸€ä¸ªç‰¹å®šçš„<strong>è¯„åˆ†å‡½æ•°</strong> <code>f</code> è¿›è¡Œè®¡ç®—ã€‚</li>
<li>è¿™ä¸ªè¯„åˆ†å‡½æ•°ä¼šè®¡ç®—è¯¥ç‰¹å¾ä¸<strong>ç›®æ ‡å˜é‡</strong> <code>y</code> ä¹‹é—´çš„æŸç§ç»Ÿè®¡å…³ç³»æˆ–ä¾èµ–æ€§ã€‚å…³ç³»è¶Šå¼ºï¼Œå¾—åˆ†è¶Šé«˜ã€‚</li>
<li>ä¾‹å¦‚ï¼Œå®ƒå¯ä»¥ä½¿ç”¨å¡æ–¹æ£€éªŒã€ç›¸å…³ç³»æ•°ã€äº’ä¿¡æ¯ç­‰ä½œä¸ºè¯„åˆ†æ ‡å‡†ã€‚</li>
</ul>
</li>
<li>
<p><strong>æ’åºï¼ˆRankingï¼‰</strong> ï¼š</p>
<ul>
<li>å¾—åˆ°æ‰€æœ‰ç‰¹å¾åŠå…¶å¯¹åº”çš„åˆ†æ•°åï¼Œ<code>SelectKBest</code> ä¼š<strong>æ ¹æ®åˆ†æ•°ä»é«˜åˆ°ä½</strong>å¯¹æ‰€æœ‰ç‰¹å¾è¿›è¡Œæ’åºã€‚</li>
</ul>
</li>
<li>
<p><strong>é€‰æ‹©ï¼ˆSelectingï¼‰</strong> ï¼š</p>
<ul>
<li>æœ€åï¼Œå®ƒç®€å•åœ°<strong>ä¿ç•™Top-Kä¸ªå¾—åˆ†æœ€é«˜çš„ç‰¹å¾</strong>ï¼Œå¹¶å‰”é™¤å…¶ä½™çš„æ‰€æœ‰ç‰¹å¾ã€‚</li>
<li>ç”¨æˆ·æŒ‡å®šçš„å‚æ•° <code>k</code> å°±æ˜¯è¿™é‡Œéœ€è¦ä¿ç•™çš„ç‰¹å¾æ•°é‡ã€‚</li>
</ul>
</li>
</ol>
<p><strong>ğŸ§  æ ¸å¿ƒå‚æ•°è¯¦è§£</strong></p>




















<table><thead><tr><th>å‚æ•°å</th><th>è¯´æ˜</th><th>é»˜è®¤å€¼</th></tr></thead><tbody><tr><td><strong>score_func</strong></td><td><strong>ã€æœ€é‡è¦çš„å‚æ•°ã€‘</strong> ç”¨äºè®¡ç®—ç‰¹å¾å¾—åˆ†çš„å‡½æ•°ã€‚å®ƒå†³å®šäº†â€œæœ€å¥½â€çš„æ ‡å‡†ã€‚</td><td><code>f_classif</code> (ç”¨äºåˆ†ç±»)</td></tr><tr><td><strong>k</strong></td><td><strong>ã€æ ¸å¿ƒå‚æ•°ã€‘</strong> é€‰æ‹©è¦ä¿ç•™çš„ top K ä¸ªç‰¹å¾ã€‚å¯ä»¥è®¾ç½®ä¸ºæ•´æ•° â€˜allâ€™ æ¥ä¿ç•™æ‰€æœ‰ç‰¹å¾ã€‚</td><td><code>10</code></td></tr></tbody></table>
<p><strong>å¸¸è§çš„ score_func è¯„åˆ†å‡½æ•°ï¼š</strong></p>
<p>é€‰æ‹©å“ªä¸ªè¯„åˆ†å‡½æ•°å–å†³äºä½ çš„é—®é¢˜ç±»å‹ï¼ˆåˆ†ç±»è¿˜æ˜¯å›å½’ï¼‰ä»¥åŠç‰¹å¾çš„æ•°æ®ç±»å‹ã€‚</p>



































<table><thead><tr><th>è¯„åˆ†å‡½æ•°</th><th>é€‚ç”¨é—®é¢˜</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>f_classif</strong></td><td><strong>åˆ†ç±»</strong></td><td>è®¡ç®—æ¯ä¸ªç‰¹å¾ä¸ç›®æ ‡å˜é‡ä¹‹é—´çš„ <strong>ANOVA Få€¼</strong>ã€‚é€‚ç”¨äºè¿ç»­ç‰¹å¾å’Œåˆ†ç±»ç›®æ ‡ã€‚é»˜è®¤é€‰é¡¹ã€‚</td></tr><tr><td><strong>chi2</strong></td><td><strong>åˆ†ç±»</strong></td><td><strong>å¡æ–¹æ£€éªŒ</strong>ã€‚è®¡ç®—æ¯ä¸ªç‰¹å¾ä¸ç›®æ ‡å˜é‡ä¹‹é—´çš„å¡æ–¹ç»Ÿè®¡é‡ã€‚<strong>é€‚ç”¨äºéè´Ÿçš„ç‰¹å¾</strong>ï¼ˆå¦‚è¯é¢‘ã€å¸ƒå°”ç‰¹å¾ï¼‰ã€‚</td></tr><tr><td><strong>mutual_info_classif</strong></td><td><strong>åˆ†ç±»</strong></td><td><strong>äº’ä¿¡æ¯</strong>ã€‚è¡¡é‡ç‰¹å¾å’Œç›®æ ‡å˜é‡ä¹‹é—´çš„<strong>éçº¿æ€§å…³ç³»</strong>ã€‚éå¸¸å¼ºå¤§ï¼Œä½†è®¡ç®—æˆæœ¬æ›´é«˜ã€‚</td></tr><tr><td><strong>f_regression</strong></td><td><strong>å›å½’</strong></td><td>è®¡ç®—æ¯ä¸ªç‰¹å¾ä¸ç›®æ ‡å˜é‡ä¹‹é—´çš„ <strong>Få€¼</strong>ï¼ˆçº¿æ€§å›å½’æ¨¡å‹çš„ç®€å•çº¿æ€§å›å½’ï¼‰ã€‚</td></tr><tr><td><strong>mutual_info_regression</strong></td><td><strong>å›å½’</strong></td><td>äº’ä¿¡æ¯çš„å›å½’ç‰ˆæœ¬ï¼ŒåŒæ ·ç”¨äºæ•æ‰éçº¿æ€§å…³ç³»ã€‚</td></tr></tbody></table>
<p>ğŸ“Š å·¥ä½œæµç¨‹ç¤ºæ„å›¾</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2eed25fb27bb4796a3b9d79d3aefc5cf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP6ZSLamF2YTEyMzQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769920492&amp;x-signature=dTcm%2F0gUVUoeu3OGhXAByzRBNcU%3D" alt="image.png" loading="lazy"/></p>
<p>æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> sklearn.feature_selection <span class="hljs-keyword">import</span> SelectKBest, f_classif
<span class="hljs-keyword">from</span> sklearn.datasets <span class="hljs-keyword">import</span> load_iris
â€‹
<span class="hljs-comment"># åŠ è½½æ•°æ®</span>
X, y = load_iris(return_X_y=<span class="hljs-literal">True</span>)
â€‹
<span class="hljs-comment"># é€‰æ‹©æœ€ä½³çš„2ä¸ªç‰¹å¾</span>
selector = SelectKBest(score_func=f_classif, k=<span class="hljs-number">3</span>)
X_new = selector.fit_transform(X, y)
â€‹
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"åŸå§‹ç‰¹å¾æ•°: <span class="hljs-subst">{X.shape[<span class="hljs-number">1</span>]}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"ç­›é€‰åç‰¹å¾æ•°: <span class="hljs-subst">{X_new.shape[<span class="hljs-number">1</span>]}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"ç‰¹å¾å¾—åˆ†: <span class="hljs-subst">{selector.scores_}</span>"</span>)
</code></pre>
<p>è¿è¡Œç»“æœï¼š</p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">åŸå§‹ç‰¹å¾æ•°: 4</span>
<span class="hljs-section">ç­›é€‰åç‰¹å¾æ•°: 3</span>
<span class="hljs-section">ç‰¹å¾å¾—åˆ†: [ 119.26450218 Â  49.16004009 1180.16118225  960.0071468 ]</span>
</code></pre>
<h2 data-id="heading-3">ç‰¹å¾æå–</h2>
<p>å°†åŸå§‹ç‰¹å¾è½¬æ¢åˆ°æ–°çš„ç‰¹å¾ç©ºé—´ï¼Œä»è€Œå‡å°‘ç‰¹å¾æ•°é‡ã€‚</p>
<h3 data-id="heading-4">ä¸»æˆåˆ†åˆ†æ (PCA)</h3>
<p>PCAé€šè¿‡çº¿æ€§å˜æ¢å°†åŸå§‹ç‰¹å¾è½¬æ¢ä¸ºä¸€ç»„çº¿æ€§ä¸ç›¸å…³çš„å˜é‡ï¼ˆä¸»æˆåˆ†ï¼‰ï¼ŒæŒ‰æ–¹å·®å¤§å°æ’åºã€‚</p>
<p>PCAçš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼š<strong>å°†åŸå§‹é«˜ç»´ç‰¹å¾é€šè¿‡çº¿æ€§å˜æ¢æ˜ å°„åˆ°æ–°çš„ä½ç»´åæ ‡ç³»ä¸­ï¼Œè¿™ä¸ªæ–°åæ ‡ç³»çš„åæ ‡è½´ï¼ˆä¸»æˆåˆ†ï¼‰æŒ‰ç…§èƒ½å¤Ÿä¿ç•™åŸå§‹æ•°æ®æœ€å¤§æ–¹å·®çš„æ–¹å‘ä¾æ¬¡æ’åˆ—ã€‚</strong></p>
<p>è¿™æ„å‘³ç€ç¬¬ä¸€ä¸ªæ–°åæ ‡è½´ï¼ˆç¬¬ä¸€ä¸»æˆåˆ†ï¼‰ä¿ç•™äº†æ•°æ®ä¸­æœ€å¤§ç¨‹åº¦çš„æ–¹å·®ï¼Œç¬¬äºŒä¸ªæ–°åæ ‡è½´ï¼ˆç¬¬äºŒä¸»æˆåˆ†ï¼‰åœ¨ä¸ç¬¬ä¸€ä¸ªæ­£äº¤çš„å‰æä¸‹ä¿ç•™æ¬¡å¤§æ–¹å·®ï¼Œä»¥æ­¤ç±»æ¨ã€‚</p>
<p><strong>ğŸ§  ç›´è§‚ç†è§£ï¼šä¸€ä¸ªç»å…¸çš„æ¯”å–»</strong></p>
<p>æƒ³è±¡ä½ åœ¨é»‘æš—ä¸­ä»ä¸åŒè§’åº¦è§‚å¯Ÿä¸€ä¸ªä¸‰ç»´ç‰©ä½“ï¼ˆæ¯”å¦‚ä¸€ä¸ªå€¾æ–œçš„æ¤­åœ†ç›˜å­ï¼‰ï¼Œå¹¶è®°å½•ä¸‹å®ƒåœ¨äºŒç»´å¹³é¢ä¸Šçš„å½±å­ã€‚</p>
<ul>
<li><strong>æŸäº›è§’åº¦</strong>ä¸‹çš„å½±å­ï¼ˆæ¯”å¦‚æ­£ä¸Šæ–¹ï¼‰å¯èƒ½çœ‹èµ·æ¥åªæ˜¯ä¸€ä¸ª<strong>çŸ­çº¿</strong>ï¼Œä¸¢å¤±äº†å¤§é‡å…³äºç›˜å­å½¢çŠ¶çš„ä¿¡æ¯ã€‚</li>
<li><strong>æŸäº›è§’åº¦</strong>ä¸‹çš„å½±å­ï¼ˆæ¯”å¦‚ä»ç›˜å­ä¾§é¢ï¼‰åˆ™èƒ½æœ€å¤§ç¨‹åº¦åœ°å±•ç°å®ƒçš„<strong>å½¢çŠ¶å’Œå¤§å°</strong>ï¼ˆä¸€ä¸ªæ¤­åœ†ï¼‰ã€‚</li>
</ul>
<p>PCAè¦åšçš„å°±æ˜¯è‡ªåŠ¨æ‰¾åˆ°é‚£ä¸ª <strong>â€œæœ€ä½³è§‚æµ‹è§’åº¦â€</strong> ï¼Œä½¿å¾—æŠ•å½±åçš„å½±å­ï¼ˆä½ç»´æ•°æ®ï¼‰èƒ½åŒ…å«åŸå§‹ç‰©ä½“ï¼ˆé«˜ç»´æ•°æ®ï¼‰æœ€å¤šçš„ä¿¡æ¯ã€‚è€Œè¿™ä¸ªâ€œä¿¡æ¯é‡â€ï¼Œåœ¨PCAä¸­å°±ç”¨<strong>æ–¹å·®</strong>æ¥è¡¡é‡ã€‚æ–¹å·®è¶Šå¤§ï¼Œæ„å‘³ç€æ•°æ®ç‚¹åœ¨æ–°åæ ‡è½´ä¸Šåˆ†å¸ƒå¾—è¶Šåˆ†æ•£ï¼Œä¿ç•™çš„ä¿¡æ¯å°±è¶Šå¤šã€‚</p>
<p><strong>ğŸ“Š æ•°å­¦åŸç†ä¸è®¡ç®—æ­¥éª¤ï¼ˆå¯åˆ†æ­¥ç†è§£ï¼‰</strong></p>
<p>å‡è®¾æœ‰ä¸€ä¸ªåŒ…å« m ä¸ªæ ·æœ¬å’Œ n ä¸ªç‰¹å¾çš„æ•°æ®é›† X )ï¼Œå…¶ä¸­ X = [x_1, x_2, â€¦, x_m] ï¼Œæ¯ä¸ªæ ·æœ¬ x_i æ˜¯ä¸€ä¸ª n ç»´å‘é‡ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/daa4369bc4774fefb721fc9fbb1331a0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP6ZSLamF2YTEyMzQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769920492&amp;x-signature=5h9Xxev%2F4HVqXlKYsOgGDPhwsvo%3D" alt="image.png" loading="lazy"/></p>
<p>ï¼ˆ å¿«é€Ÿç†è§£è¿™ä¸ªPCAç®—æ³•åŸç†ï¼Œå¯ä»¥æŸ¥çœ‹ è§†é¢‘ ä¸»æˆåˆ†åˆ†æ (PCA) è½¬è½½è‡ª æŠ–éŸ³ åŠ¨ç”»è®²ç¼–ç¨‹ ï¼‰</p>
<p><strong>âš™ï¸ å…³é”®å‚æ•°ä¸æ¦‚å¿µï¼ˆä»¥Scikit-learnä¸ºä¾‹ï¼‰</strong></p>





























<table><thead><tr><th>å‚æ•°/æ¦‚å¿µ</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>n_components</strong></td><td><strong>æœ€é‡è¦çš„å‚æ•°</strong>ã€‚æŒ‡å®šè¦ä¿ç•™çš„ä¸»æˆåˆ†ä¸ªæ•° <code>k</code>ã€‚å¯ä»¥è®¾ä¸ºæ•´æ•°ï¼ˆå¦‚ <code>2</code>ï¼‰ï¼Œä¹Ÿå¯ä»¥è®¾ä¸º <code>0</code> åˆ° <code>1</code> ä¹‹é—´çš„æµ®ç‚¹æ•°ï¼ˆå¦‚ <code>0.95</code>ï¼Œè¡¨ç¤ºä¿ç•™<strong>95%çš„åŸå§‹æ–¹å·®</strong>ï¼‰ã€‚</td></tr><tr><td><strong>svd_solver</strong></td><td>æŒ‡å®šæ±‚è§£å™¨ã€‚é€šå¸¸ä½¿ç”¨é»˜è®¤çš„ <code>'auto'</code> å³å¯ã€‚å¯¹äºå¤§å‹æ•°æ®ï¼Œä½¿ç”¨ <code>'randomized'</code> çš„éšæœºSVDæ–¹æ³•ä¼šæ›´é«˜æ•ˆã€‚</td></tr><tr><td>explained_variance_</td><td><strong>å±æ€§</strong>ã€‚ä¸€ä¸ªæ•°ç»„ï¼Œè¡¨ç¤ºæ¯ä¸ªä¸»æˆåˆ†æ‰€æ•è·çš„æ–¹å·®å¤§å°ï¼ˆå³ç‰¹å¾å€¼ï¼‰ã€‚</td></tr><tr><td>explained_variance_ratio_</td><td><strong>å±æ€§</strong>ã€‚ä¸€ä¸ªæ•°ç»„ï¼Œè¡¨ç¤ºæ¯ä¸ªä¸»æˆåˆ†æ‰€æ•è·çš„æ–¹å·®<strong>å æ€»æ–¹å·®çš„ç™¾åˆ†æ¯”</strong>ã€‚è¿™æ˜¯å†³å®š <code>k</code> å–å¤šå°‘çš„å…³é”®ä¾æ®ã€‚</td></tr><tr><td>components_</td><td><strong>å±æ€§</strong>ã€‚æŠ•å½±çŸ©é˜µ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>W</mi></mrow><annotation encoding="application/x-tex">W</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal" style="margin-right:0.13889em;">W</span></span></span></span></span>ï¼Œæ¯ä¸€è¡Œæ˜¯ä¸€ä¸ªä¸»æˆåˆ†ï¼ˆç‰¹å¾å‘é‡ï¼‰ã€‚</td></tr></tbody></table>
<p>æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">from sklearn.decomposition import PCA
from sklearn.preprocessing import StandardScaler
from sklearn.datasets import load_iris
â€‹
<span class="hljs-comment"># åŠ è½½æ•°æ®</span>
<span class="hljs-attr">iris</span> = load_iris()
X, <span class="hljs-attr">y</span> = iris.data, iris.target
â€‹
<span class="hljs-comment"># 1. æ ‡å‡†åŒ–æ•°æ®ï¼ˆè‡³å…³é‡è¦ï¼ï¼‰</span>
<span class="hljs-attr">scaler</span> = StandardScaler()
<span class="hljs-attr">X_scaled</span> = scaler.fit_transform(X)
â€‹
<span class="hljs-comment"># 2. åˆå§‹åŒ–PCAï¼Œä¿ç•™2ä¸ªä¸»æˆåˆ†ç”¨äºå¯è§†åŒ–</span>
<span class="hljs-attr">pca</span> = PCA(n_components=<span class="hljs-number">2</span>)
â€‹
<span class="hljs-comment"># 3. è®­ç»ƒè½¬æ¢æ•°æ®</span>
<span class="hljs-attr">X_pca</span> = pca.fit_transform(X_scaled)
â€‹
print("åŸå§‹æ•°æ®å½¢çŠ¶:", X.shape)
print("é™ç»´åæ•°æ®:", X_pca)
</code></pre>
<p>è¿è¡Œç»“æœï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/56c59f7858034a8fb22d5f7bc1624d70~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP6ZSLamF2YTEyMzQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769920492&amp;x-signature=TeL%2BnCy7dNQvaANhT3oHCHLfEf0%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-5">çº¿æ€§åˆ¤åˆ«åˆ†æ (LDA)</h3>
<p>LDAæ˜¯ä¸€ç§æœ‰ç›‘ç£çš„é™ç»´æ–¹æ³•ï¼Œæ—¨åœ¨æœ€å¤§åŒ–ç±»é—´è·ç¦»ï¼Œæœ€å°åŒ–ç±»å†…è·ç¦»ã€‚</p>
<p>çº¿æ€§åˆ¤åˆ«åˆ†æï¼ˆLinear Discriminant Analysis, LDAï¼‰æ˜¯ä¸€ç§ç»å…¸çš„<strong>æœ‰ç›‘ç£</strong>å­¦ä¹ ç®—æ³•ï¼Œä¸»è¦ç”¨äº<strong>åˆ†ç±»</strong>å’Œ<strong>é™ç»´</strong>ã€‚å®ƒçš„æ ¸å¿ƒæ€æƒ³ä¸ä¸»æˆåˆ†åˆ†æï¼ˆPCAï¼‰ä¸åŒï¼šPCAè¿½æ±‚çš„æ˜¯æ•°æ®æ–¹å·®æœ€å¤§åŒ–ï¼Œæ˜¯ä¸€ç§æ— ç›‘ç£çš„é™ç»´æ–¹æ³•ï¼›è€ŒLDAè¿½æ±‚çš„æ˜¯<strong>æœ€å¤§åŒ–ç±»é—´æ•£åº¦ï¼ˆç±»ä¸ç±»ä¹‹é—´çš„è·ç¦»ï¼‰çš„åŒæ—¶æœ€å°åŒ–ç±»å†…æ•£åº¦ï¼ˆåŒä¸€ç±»å†…çš„æ•°æ®ç¦»æ•£ç¨‹åº¦ï¼‰</strong> ï¼Œå³å¯»æ‰¾èƒ½å¤Ÿæœ€å¥½åœ°å°†ä¸åŒç±»åˆ«åŒºåˆ†å¼€æ¥çš„ç‰¹å¾å­ç©ºé—´ã€‚</p>
<p><strong>1. æ ¸å¿ƒç›®æ ‡</strong></p>
<p>ç»™å®šæ•°æ®é›†ï¼ŒLDAçš„ç›®æ ‡æ˜¯æ‰¾åˆ°ä¸€ä¸ªæŠ•å½±æ–¹å‘ï¼ˆå¯¹äºå¤šç±»é—®é¢˜åˆ™æ˜¯æŠ•å½±å¹³é¢ï¼‰ï¼Œä½¿å¾—ï¼š</p>
<ol start="0">
<li><strong>ç±»é—´æ•£åº¦ï¼ˆBetween-class scatterï¼‰æœ€å¤§</strong>ï¼šä¸åŒç±»åˆ«çš„æŠ•å½±ç‚¹ä¸­å¿ƒå°½å¯èƒ½è¿œç¦»ã€‚</li>
<li><strong>ç±»å†…æ•£åº¦ï¼ˆWithin-class scatterï¼‰æœ€å°</strong>ï¼šåŒä¸€ç±»åˆ«çš„æŠ•å½±ç‚¹å°½å¯èƒ½èšé›†ã€‚</li>
</ol>
<p>é€šè¿‡ä¼˜åŒ–è¿™ä¸¤ä¸ªç›®æ ‡ï¼ŒLDAèƒ½ä½¿å¾—æŠ•å½±åçš„æ•°æ®å…·æœ‰æœ€å¥½çš„åˆ†ç±»æ•ˆæœã€‚</p>
<p><strong>2.æ•°å­¦å®šä¹‰ä¸æ¨å¯¼</strong></p>
<p>çº¿æ€§é‰´åˆ«åˆ†æçš„åŸºæœ¬æ€æƒ³æ˜¯å°†é«˜ç»´çš„æ¨¡å¼æ ·æœ¬æŠ•å½±åˆ°æœ€ä½³é‰´åˆ«çŸ¢é‡ç©ºé—´ï¼Œä»¥è¾¾åˆ°æŠ½å–åˆ†ç±»ä¿¡æ¯å’Œå‹ç¼©ç‰¹å¾ç©ºé—´ç»´æ•°çš„æ•ˆæœï¼ŒæŠ•å½±åä¿è¯æ¨¡å¼æ ·æœ¬åœ¨æ–°çš„å­ç©ºé—´æœ‰æœ€å¤§çš„ç±»é—´è·ç¦»å’Œæœ€å°çš„ç±»å†…è·ç¦»ï¼Œå³æ¨¡å¼åœ¨è¯¥ç©ºé—´ä¸­æœ‰æœ€ä½³çš„å¯åˆ†ç¦»æ€§ã€‚å› æ­¤ï¼Œå®ƒæ˜¯ä¸€ç§æœ‰æ•ˆçš„ç‰¹å¾æŠ½å–æ–¹æ³•ã€‚ä½¿ç”¨è¿™ç§æ–¹æ³•èƒ½å¤Ÿä½¿æŠ•å½±åæ¨¡å¼æ ·æœ¬çš„ç±»é—´æ•£å¸ƒçŸ©é˜µæœ€å¤§ï¼Œå¹¶ä¸”åŒæ—¶ç±»å†…æ•£å¸ƒçŸ©é˜µæœ€å°ã€‚å°±æ˜¯è¯´ï¼Œå®ƒèƒ½å¤Ÿä¿è¯æŠ•å½±åæ¨¡å¼æ ·æœ¬åœ¨æ–°çš„ç©ºé—´ä¸­æœ‰æœ€å°çš„ç±»å†…è·ç¦»å’Œæœ€å¤§çš„ç±»é—´è·ç¦»ï¼Œå³æ¨¡å¼åœ¨è¯¥ç©ºé—´ä¸­æœ‰æœ€ä½³çš„å¯åˆ†ç¦»æ€§ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/83d7372633c9422299972de970a86462~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP6ZSLamF2YTEyMzQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769920492&amp;x-signature=Qvt6tXnswLrYTeWJw5C75jdicUQ%3D" alt="image.png" loading="lazy"/></p>
<p>åœ¨ <code>scikit-learn</code> åº“ä¸­ <code>LinearDiscriminantAnalysis</code> ç±»æ¥å®ç°LDAã€‚</p>
<p>åœ¨ <code>sklearn.discriminant_analysis</code> æ¨¡å—ä¸­ï¼Œ<code>LinearDiscriminantAnalysis</code> çš„æ„é€ å‡½æ•°å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">LinearDiscriminantAnalysis(<span class="hljs-attr">solver</span>=<span class="hljs-string">'svd'</span>, 
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-attr">shrinkage</span>=None, 
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-attr">priors</span>=None, 
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-attr">n_components</span>=None,
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-attr">store_covariance</span>=<span class="hljs-literal">False</span>, 
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-attr">tol</span>=<span class="hljs-number">0.0001</span>, 
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-attr">covariance_estimator</span>=None)
</code></pre>
<p>å‚æ•°è¯¦è§£</p>
<ol start="0">
<li><code>solver</code> : str, {'svd', 'lsqr', 'eigen'}, default='svd'</li>
</ol>
<p><strong>æ±‚è§£å™¨ç®—æ³•</strong>ã€‚è¿™æ˜¯æœ€é‡è¦çš„å‚æ•°ï¼Œå®ƒå†³å®šäº†LDAå†…éƒ¨é‡‡ç”¨ä½•ç§æ•°å­¦ç®—æ³•æ¥æ±‚è§£ï¼Œå¹¶ä¸”<strong>å®ƒä¼šé™åˆ¶å…¶ä»–ä¸€äº›å‚æ•°æ˜¯å¦å¯ç”¨</strong>ã€‚</p>
<ul>
<li>
<p><strong>'svd'</strong> (å¥‡å¼‚å€¼åˆ†è§£):</p>
<ul>
<li>
<p><strong>åŸç†</strong>: ä¸ç›´æ¥è®¡ç®—æ•£åº¦çŸ©é˜µ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>S</mi><mi>w</mi></msub></mrow><annotation encoding="application/x-tex">S_w</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02691em;">w</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>ï¼Œè€Œæ˜¯é€šè¿‡SVDï¼ˆå¥‡å¼‚å€¼åˆ†è§£ï¼‰æ¥æ±‚è§£ã€‚è¿™æ˜¯ä¸€ç§æ•°å€¼ä¸Šæœ€ç¨³å®šã€æœ€ç²¾ç¡®çš„æ–¹æ³•ã€‚</p>
</li>
<li>
<p><strong>ä¼˜ç‚¹</strong>:</p>
<ul>
<li>æ— éœ€è®¡ç®— <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>S</mi><mi>w</mi></msub></mrow><annotation encoding="application/x-tex">S_w</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02691em;">w</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> å’Œ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>S</mi><mi>b</mi></msub></mrow><annotation encoding="application/x-tex">S_b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">b</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>ï¼ŒèŠ‚çœå†…å­˜ï¼Œå°¤å…¶é€‚ç”¨äº<strong>ç‰¹å¾æ•°é‡éå¸¸å¤š</strong>ï¼ˆç”šè‡³å¤šäºæ ·æœ¬æ•°ï¼‰çš„åœºæ™¯ã€‚</li>
<li>ä¸ä¼šå› ä¸º <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>S</mi><mi>w</mi></msub></mrow><annotation encoding="application/x-tex">S_w</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02691em;">w</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> æ˜¯å¥‡å¼‚çŸ©é˜µï¼ˆä¸å¯é€†ï¼‰è€Œå‡ºç°é—®é¢˜ã€‚</li>
</ul>
</li>
<li>
<p><strong>é™åˆ¶</strong>: ä¸èƒ½ä½¿ç”¨ <code>shrinkage</code>ï¼ˆæ”¶ç¼©ï¼‰å‚æ•°ã€‚</p>
</li>
<li>
<p><strong>é€‚ç”¨åœºæ™¯</strong>: <strong>é»˜è®¤é€‰æ‹©</strong>ã€‚åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹éƒ½æ˜¯æœ€ä½³é€‰æ‹©ï¼Œç‰¹åˆ«æ˜¯å½“ç‰¹å¾ç»´æ•°é«˜æˆ–æ‹…å¿ƒæ•°å€¼ç¨³å®šæ€§æ—¶ã€‚</p>
</li>
</ul>
</li>
<li>
<p><strong>'lsqr'</strong> (æœ€å°äºŒä¹˜è§£):</p>
<ul>
<li><strong>åŸç†</strong>: é€šè¿‡æœ€å°åŒ–å¹³æ–¹è¯¯å·®æ¥æ±‚è§£ã€‚æ­¤ç®—æ³•å¯ä»¥æ‰§è¡Œæ”¶ç¼©ã€‚</li>
<li><strong>ä¼˜ç‚¹</strong>: æ”¯æŒ <code>shrinkage</code>ã€‚</li>
<li><strong>è¦æ±‚</strong>: éœ€è¦è®¡ç®—åæ–¹å·®çŸ©é˜µï¼Œå› æ­¤å½“ <code>n_features</code> å¾ˆå¤§æ—¶å¯èƒ½æ•ˆç‡ä¸é«˜ã€‚</li>
<li><strong>é€‚ç”¨åœºæ™¯</strong>: å½“ä½ <strong>æ˜ç¡®éœ€è¦ä½¿ç”¨æ”¶ç¼©</strong>ï¼Œå¹¶ä¸”ç‰¹å¾ç»´åº¦ä¸æ˜¯æé«˜æ—¶ã€‚</li>
</ul>
</li>
<li>
<p><strong>'eigen'</strong> (ç‰¹å¾å€¼åˆ†è§£):</p>
<ul>
<li><strong>åŸç†</strong>: é€šè¿‡æ±‚è§£å¹¿ä¹‰ç‰¹å¾å€¼é—®é¢˜ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>S</mi><mi>b</mi></msub><mi>w</mi><mo>=</mo><mi>Î»</mi><msub><mi>S</mi><mi>w</mi></msub><mi>w</mi></mrow><annotation encoding="application/x-tex">S_b w = \lambda S_w w</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">b</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"/><span class="mord mathnormal">Î»</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02691em;">w</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span></span></span></span></span> æ¥æ±‚è§£ï¼ˆå³æˆ‘ä»¬åŸç†éƒ¨åˆ†æ¨å¯¼çš„æ–¹æ³•ï¼‰ã€‚æ­¤ç®—æ³•ä¹Ÿå¯ä»¥æ‰§è¡Œæ”¶ç¼©ã€‚</li>
<li><strong>ä¼˜ç‚¹</strong>: æ”¯æŒ <code>shrinkage</code>ã€‚</li>
<li><strong>è¦æ±‚</strong>: éœ€è¦è®¡ç®—åæ–¹å·®çŸ©é˜µï¼ŒåŒæ ·ä¸é€‚ç”¨äºç‰¹å¾ç»´åº¦æé«˜çš„åœºæ™¯ã€‚</li>
<li><strong>é€‚ç”¨åœºæ™¯</strong>: ä¸ <code>'lsqr'</code> ç±»ä¼¼ï¼Œå½“ä½ éœ€è¦æ”¶ç¼©ä¸”ç‰¹å¾æ•°ä¸å¤šæ—¶ã€‚<code>'eigen'</code> å’Œ <code>'lsqr'</code> çš„ç»“æœé€šå¸¸éå¸¸ç›¸ä¼¼ã€‚</li>
</ul>
</li>
</ul>
<p><strong>æ€»ç»“é€‰æ‹©æŒ‡å—</strong>ï¼š</p>
<ul>
<li><strong>é»˜è®¤æˆ–ç‰¹å¾æ•°å¾ˆå¤š</strong> -&gt; <code>'svd'</code></li>
<li><strong>éœ€è¦æ”¶ç¼©ï¼ˆShrinkageï¼‰</strong> -&gt; <code>'lsqr'</code> æˆ– <code>'eigen'</code></li>
</ul>
<hr/>
<ol start="2">
<li><code>shrinkage</code> : float or 'auto', default=None</li>
</ol>
<p><strong>æ”¶ç¼©å‚æ•°</strong>ã€‚ç”¨äºä¼°è®¡åæ–¹å·®çŸ©é˜µçš„æ­£åˆ™åŒ–æ–¹æ³•ï¼Œä¸»è¦ç”¨äºè§£å†³<strong>å½“æ ·æœ¬æ•°é‡å°‘äºç‰¹å¾æ•°é‡æ—¶ï¼Œ<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>S</mi><mi>w</mi></msub></mrow><annotation encoding="application/x-tex">S_w</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02691em;">w</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> çŸ©é˜µå¥‡å¼‚ï¼ˆä¸å¯é€†ï¼‰</strong> çš„é—®é¢˜ï¼Œæˆ–è€…æ”¹å–„åæ–¹å·®çŸ©é˜µçš„ä¼°è®¡ã€‚</p>
<ul>
<li>
<p><strong>åŸç†</strong>: æ”¶ç¼©é€šè¿‡å°†ç±»å†…æ•£åº¦çŸ©é˜µ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>S</mi><mi>w</mi></msub></mrow><annotation encoding="application/x-tex">S_w</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02691em;">w</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> å‘ä¸€ä¸ªå¯¹è§’çŸ©é˜µï¼ˆæˆ–å•ä½çŸ©é˜µï¼‰è¿›è¡Œâ€œç¼©å°â€æ¥æ­£åˆ™åŒ–å®ƒï¼š <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover accent="true"><mi mathvariant="normal">Î£</mi><mo>^</mo></mover><mo>=</mo><mo stretchy="false">(</mo><mn>1</mn><mo>âˆ’</mo><mtext>shrinkage</mtext><mo stretchy="false">)</mo><mo>âˆ—</mo><msub><mi>S</mi><mi>w</mi></msub><mo>+</mo><mtext>shrinkage</mtext><mo>âˆ—</mo><msup><mi>Ïƒ</mi><mn>2</mn></msup><mi>I</mi></mrow><annotation encoding="application/x-tex">\hat{\Sigma} = (1 - \text{shrinkage}) * S_w + \text{shrinkage} * \sigma^2 I</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9468em;"/><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9468em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="mord">Î£</span></span><span style="top:-3.2523em;"><span class="pstrut" style="height:3em;"/><span class="accent-body" style="left:-0.25em;"><span class="mord">^</span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord text"><span class="mord">shrinkage</span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02691em;">w</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="mord text"><span class="mord">shrinkage</span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.8141em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">Ïƒ</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.07847em;">I</span></span></span></span></span></p>
</li>
<li>
<p><strong>å–å€¼</strong>:</p>
<ul>
<li><code>None</code> æˆ– <code>0</code>: ä¸è¿›è¡Œä»»ä½•æ”¶ç¼©ã€‚</li>
<li><code>'auto'</code>: ä½¿ç”¨Ledoit-Wolfå¼•ç†è‡ªåŠ¨ç¡®å®šæœ€ä¼˜çš„æ”¶ç¼©å¼ºåº¦ã€‚<strong>è¿™æ˜¯éå¸¸å®ç”¨çš„ä¸€ä¸ªé€‰é¡¹</strong>ã€‚</li>
<li><code>float</code> between 0 and 1: æ‰‹åŠ¨æŒ‡å®šå›ºå®šçš„æ”¶ç¼©å¼ºåº¦ã€‚ä¾‹å¦‚ï¼Œ<code>0.5</code> è¡¨ç¤ºä¸€åŠæ˜¯åŸå§‹åæ–¹å·®ï¼Œä¸€åŠæ˜¯å¯¹è§’çŸ©é˜µã€‚</li>
</ul>
</li>
<li>
<p><strong>ä¾èµ–å…³ç³»</strong>: <strong>ä»…å½“ solver ä¸º 'lsqr' æˆ– 'eigen' æ—¶æœ‰æ•ˆ</strong>ã€‚<code>'svd'</code> æ±‚è§£å™¨ä¸éœ€è¦ä¹Ÿä¸æ”¯æŒæ”¶ç¼©ã€‚</p>
</li>
<li>
<p><strong>é€‚ç”¨åœºæ™¯</strong>: å½“<strong>è®­ç»ƒæ ·æœ¬æ•°è¾ƒå°‘</strong>ã€<strong>ç‰¹å¾æ•°è¾ƒå¤š</strong>å¯¼è‡´æ¨¡å‹è¿‡æ‹Ÿåˆæˆ– <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>S</mi><mi>w</mi></msub></mrow><annotation encoding="application/x-tex">S_w</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02691em;">w</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> å¥‡å¼‚æ—¶ï¼Œè®¾ç½® <code>shrinkage='auto'</code> é€šå¸¸èƒ½æ˜¾è‘—æå‡æ¨¡å‹çš„æ³›åŒ–èƒ½åŠ›ã€‚</p>
</li>
</ul>
<hr/>
<ol start="3">
<li><code>priors</code> : array-like of shape (n_classes,), default=None</li>
</ol>
<p><strong>ç±»çš„å…ˆéªŒæ¦‚ç‡</strong>ã€‚</p>
<ul>
<li><strong>åŸç†</strong>: åœ¨è´å¶æ–¯æ¡†æ¶ä¸‹ï¼ŒLDAå¯ä»¥èå…¥å…³äºç±»åˆ«åˆ†å¸ƒçš„å…ˆéªŒçŸ¥è¯†ã€‚å¦‚æœä½ çŸ¥é“ä½ çš„æ•°æ®ä¸­å„ç±»åˆ«çš„å‡ºç°æ¦‚ç‡ï¼ˆä¾‹å¦‚ï¼Œåœ¨åŒ»å­¦è¯Šæ–­ä¸­ï¼Œå¥åº·äººç¾¤è¿œå¤šäºæ‚£ç—…äººç¾¤ï¼‰ï¼Œå¯ä»¥é€šè¿‡æ­¤å‚æ•°æŒ‡å®šã€‚</li>
<li><strong>å–å€¼</strong>: ä¸€ä¸ªé•¿åº¦ç­‰äºç±»åˆ«æ•°çš„æ•°ç»„ï¼Œæ•°ç»„å…ƒç´ ä¹‹å’Œåº”ä¸º1.0ã€‚ä¾‹å¦‚ï¼Œå¯¹äºä¸‰åˆ†ç±»é—®é¢˜ï¼Œå¯ä»¥è®¾ç½®ä¸º <code>[0.3, 0.3, 0.4]</code>ã€‚</li>
<li><strong>é»˜è®¤ None</strong>: æ¨¡å‹å°†ç›´æ¥ä»è®­ç»ƒæ•°æ®ä¸­è®¡ç®—æ¯ä¸ªç±»çš„å…ˆéªŒæ¦‚ç‡ï¼Œå³ <code>priors = np.bincount(y) / len(y)</code>ã€‚</li>
<li><strong>å½±å“</strong>: è¿™ä¸ªå‚æ•°ä¼šç›´æ¥å½±å“å†³ç­–è¾¹ç•Œçš„ä½ç½®ã€‚å¦‚æœä½ è®¾ç½®çš„å…ˆéªŒæ¦‚ç‡ä¸æ•°æ®ä¸­çš„çœŸå®åˆ†å¸ƒå·®å¼‚å¾ˆå¤§ï¼Œå†³ç­–è¾¹ç•Œä¼šå‘å…ˆéªŒæ¦‚ç‡è¾ƒå°çš„ç±»åˆ«æ–¹å‘ç§»åŠ¨ã€‚</li>
</ul>
<hr/>
<ol start="4">
<li><code>n_components</code> : int, default=None</li>
</ol>
<p><strong>é™ç»´åå¸Œæœ›ä¿ç•™çš„ç»´åº¦æ•°</strong>ã€‚</p>
<ul>
<li>
<p><strong>åŸç†</strong>: LDAé™ç»´åçš„æœ€å¤§ç»´åº¦æ˜¯ <code>min(n_features, n_classes - 1)</code>ã€‚æ­¤å‚æ•°ç”¨äºæŒ‡å®šæœ€ç»ˆä¿ç•™çš„ç»´åº¦ã€‚</p>
</li>
<li>
<p><strong>å–å€¼</strong>:</p>
<ul>
<li><code>None</code>: é»˜è®¤å€¼ï¼Œä¼šè‡ªåŠ¨è®¾ç½®ä¸º <code>n_classes - 1</code>ã€‚</li>
<li><code>int</code>: ä¸€ä¸ªå°äº <code>n_classes - 1</code> çš„æ•´æ•°ã€‚ä¾‹å¦‚ï¼Œå¯¹äº4åˆ†ç±»é—®é¢˜ï¼Œæœ€å¤šå¯é™åˆ°3ç»´ï¼Œä½ å¯ä»¥è®¾ç½® <code>n_components=2</code> æ¥åªå–å‰ä¸¤ä¸ªçº¿æ€§åˆ¤åˆ«å¼ã€‚</li>
</ul>
</li>
<li>
<p><strong>æ³¨æ„</strong>: æ­¤å‚æ•°ä¸»è¦ç”¨äº<strong>é™ç»´</strong>ã€‚å³ä½¿ä½ å°†å…¶ç”¨ä½œåˆ†ç±»å™¨ï¼Œ<code>transform</code> æ–¹æ³•ä¹Ÿä¼šä½¿ç”¨è¿™ä¸ªç»´åº¦ã€‚</p>
</li>
</ul>
<hr/>
<ol start="5">
<li><code>store_covariance</code> : bool, default=False</li>
</ol>
<p><strong>æ˜¯å¦è®¡ç®—å¹¶å­˜å‚¨æ¯ä¸ªç±»çš„åæ–¹å·®çŸ©é˜µ</strong>ã€‚</p>
<ul>
<li>
<p><strong>åŸç†</strong>: ä¸º <code>True</code> æ—¶ï¼Œæ¨¡å‹æ‹Ÿåˆåä¼šæœ‰ <code>covariance_</code> å±æ€§ï¼Œå®ƒæ˜¯ä¸€ä¸ªæ•°ç»„ï¼ŒåŒ…å«äº†æ¯ä¸ªç±»çš„åæ–¹å·®çŸ©é˜µã€‚</p>
</li>
<li>
<p><strong>å–å€¼</strong>:</p>
<ul>
<li><code>False</code> (é»˜è®¤): ä¸å­˜å‚¨ã€‚èŠ‚çœå†…å­˜ã€‚</li>
<li><code>True</code>: å­˜å‚¨ã€‚ä¸»è¦ç”¨äºè°ƒè¯•å’Œå¯è§†åŒ–ï¼Œæˆ–è€…ä½ éœ€è¦æŸ¥çœ‹ç±»çš„åæ–¹å·®ç»“æ„æ—¶ã€‚</li>
</ul>
</li>
<li>
<p><strong>ä¾èµ–å…³ç³»</strong>: ä»…å½“ <code>solver='svd'</code> æ—¶ä¸å¯ç”¨ï¼Œå› ä¸º <code>'svd'</code> æ±‚è§£å™¨æ ¹æœ¬ä¸è®¡ç®—åæ–¹å·®çŸ©é˜µã€‚</p>
</li>
</ul>
<hr/>
<ol start="6">
<li><code>tol</code> : float, default=1e-4</li>
</ol>
<p><strong>ç”¨äºç§©ä¼°è®¡çš„é˜ˆå€¼</strong>ã€‚</p>
<ul>
<li><strong>åŸç†</strong>: å½“ <code>solver='svd'</code> æ—¶ï¼Œç”¨äºåˆ¤æ–­çŸ©é˜µç§©çš„å®¹å·®å€¼ã€‚ä»»ä½•å¥‡å¼‚å€¼å°äº <code>tol</code> çš„ç»´åº¦éƒ½ä¼šè¢«ä¸¢å¼ƒã€‚è¿™æ˜¯ä¸€ä¸ªéå¸¸æŠ€æœ¯æ€§çš„å‚æ•°ï¼Œé€šå¸¸ä¸éœ€è¦è°ƒæ•´ã€‚</li>
<li><strong>é€‚ç”¨åœºæ™¯</strong>: é™¤éä½ éå¸¸äº†è§£æ•°å€¼çº¿æ€§ä»£æ•°ï¼Œå¹¶ä¸”å‘ç°é»˜è®¤å€¼å¯¼è‡´äº†ä¸€äº›é—®é¢˜ï¼Œå¦åˆ™ä¿æŒé»˜è®¤å³å¯ã€‚</li>
</ul>
<hr/>
<ol start="7">
<li><code>covariance_estimator</code> : estimator, default=None</li>
</ol>
<p><strong>åæ–¹å·®ä¼°è®¡å™¨</strong>ã€‚</p>
<ul>
<li><strong>åŸç†</strong>: è¿™æ˜¯ä¸€ä¸ª<strong>å®éªŒæ€§</strong>å‚æ•°ï¼ˆæˆªè‡³ <code>scikit-learn</code> 1.2ç‰ˆæœ¬ï¼‰ã€‚å®ƒå…è®¸ä½ ä¼ å…¥ä¸€ä¸ªè‡ªå®šä¹‰çš„åæ–¹å·®ä¼°è®¡å™¨å¯¹è±¡ï¼ˆä¾‹å¦‚ <code>sklearn.covariance.ShrunkCovariance</code>ï¼‰æ¥æ›¿ä»£æ ‡å‡†çš„æå¤§ä¼¼ç„¶ä¼°è®¡ã€‚</li>
<li><strong>å–å€¼</strong>: ä¸€ä¸ªå®ç°äº† <code>fit</code> æ–¹æ³•çš„åæ–¹å·®ä¼°è®¡å™¨å¯¹è±¡ã€‚</li>
<li><strong>ä¾èµ–å…³ç³»</strong>: ä»…å½“ <code>solver='lsqr'</code> æˆ– <code>'eigen'</code> æ—¶å¯ç”¨ã€‚</li>
<li><strong>é€‚ç”¨åœºæ™¯</strong>: ä¸ºé«˜çº§ç”¨æˆ·æä¾›æå¤§çš„çµæ´»æ€§ï¼Œå¯ä»¥å°è¯•å„ç§ä¸åŒçš„åæ–¹å·®çŸ©é˜µæ­£åˆ™åŒ–æ–¹æ³•ã€‚ç»å¤§å¤šæ•°ç”¨æˆ·ä¸éœ€è¦ä½¿ç”¨æ­¤å‚æ•°ã€‚</li>
</ul>
<p>æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">from sklearn.discriminant_analysis import LinearDiscriminantAnalysis
from sklearn.preprocessing import StandardScaler
from sklearn.datasets import load_iris
â€‹
<span class="hljs-comment"># åŠ è½½æ•°æ®</span>
<span class="hljs-attr">iris</span> = load_iris()
X, <span class="hljs-attr">y</span> = iris.data, iris.target
â€‹
<span class="hljs-comment"># 1. æ ‡å‡†åŒ–æ•°æ®ï¼ˆè‡³å…³é‡è¦ï¼ï¼‰</span>
<span class="hljs-attr">scaler</span> = StandardScaler()
<span class="hljs-attr">X_scaled</span> = scaler.fit_transform(X)
â€‹
<span class="hljs-comment"># 2. åˆå§‹åŒ–LADï¼Œä¿ç•™2ä¸ªç»´åº¦</span>
<span class="hljs-attr">lda</span> = LinearDiscriminantAnalysis(n_components=<span class="hljs-number">2</span>)
â€‹
<span class="hljs-comment"># 3. è®­ç»ƒè½¬æ¢æ•°æ®</span>
<span class="hljs-attr">X_lda</span> = lad.fit_transform(X_scaled, y)
â€‹
print("åŸå§‹æ•°æ®å½¢çŠ¶:", X.shape)
print("é™ç»´åæ•°æ®:", X_lda)
</code></pre>
<p>è¿è¡Œç»“æœï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/464bf4f83bb64fda88422613c9ca3c34~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP6ZSLamF2YTEyMzQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769920492&amp;x-signature=MYk3MN82QrRKDltnX7VQdQTFncM%3D" alt="image.png" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[AI ç›¸å…³ï¼šå¤§æ¨¡å‹çš„æµå¼å“åº”ï¼ˆæ‰“å­—æœºæ•ˆæœï¼‰å®ä¾‹ï¼Ÿç»“åˆfetchå’ŒeventSourceå’ŒAbortController]]></title>    <link>https://juejin.cn/post/7598947628467257390</link>    <guid>https://juejin.cn/post/7598947628467257390</guid>    <pubDate>2026-01-25T08:17:06.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7598947628467257390" data-draft-id="7598881914202046514" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content=" AI ç›¸å…³ï¼šå¤§æ¨¡å‹çš„æµå¼å“åº”ï¼ˆæ‰“å­—æœºæ•ˆæœï¼‰å®ä¾‹ï¼Ÿç»“åˆfetchå’ŒeventSourceå’ŒAbortController"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-25T08:17:06.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¨œå¦¹å­è¾£"/> <meta itemprop="url" content="https://juejin.cn/user/3421335918747976"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
             AI ç›¸å…³ï¼šå¤§æ¨¡å‹çš„æµå¼å“åº”ï¼ˆæ‰“å­—æœºæ•ˆæœï¼‰å®ä¾‹ï¼Ÿç»“åˆfetchå’ŒeventSourceå’ŒAbortController
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3421335918747976/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¨œå¦¹å­è¾£
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-25T08:17:06.000Z" title="Sun Jan 25 2026 08:17:06 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¤§æ¨¡å‹æµå¼å“åº”ï¼ˆæ‰“å­—æœºæ•ˆæœï¼‰å®Œæ•´å®ä¾‹</h2>
<p>ä½ éœ€è¦çš„æ˜¯ç»“åˆ <code>Fetch</code>ã€<code>EventSource(SSE)</code> å’Œ <code>AbortController</code> å®ç°å¤§æ¨¡å‹æµå¼å“åº”ï¼ˆæ‰“å­—æœºæ•ˆæœï¼‰çš„å¯è¿è¡Œå®ä¾‹ï¼Œä¸‹é¢å°†åˆ†åˆ«æä¾›ä¸¤ç§æ–¹æ¡ˆçš„å®Œæ•´ä»£ç ï¼ˆå‰ç«¯ + é…å¥—æœåŠ¡ç«¯ï¼‰ï¼Œæ ¸å¿ƒå®ç°ã€Œé€å­—å®æ—¶æ¸²æŸ“ã€å’Œã€Œè¯·æ±‚å–æ¶ˆã€åŠŸèƒ½ï¼Œå¯ç›´æ¥å¤åˆ¶è½åœ°ã€‚</p>
<h3 data-id="heading-1">ä¸€ã€æ ¸å¿ƒè¯´æ˜</h3>
<ol>
<li><strong>æ‰“å­—æœºæ•ˆæœæœ¬è´¨</strong>ï¼šå¤§æ¨¡å‹ä¸æ˜¯ä¸€æ¬¡æ€§è¿”å›å®Œæ•´ç»“æœï¼Œè€Œæ˜¯åˆ†å—è¿”å›æ–‡æœ¬ç‰‡æ®µï¼Œå‰ç«¯å®æ—¶è¿½åŠ æ¸²æŸ“ï¼Œæ¨¡æ‹Ÿæ‰“å­—æœºé€å­—è¾“å‡ºçš„æ•ˆæœã€‚</li>
<li><strong>AbortController ä½œç”¨</strong>ï¼šç”¨äºæ‰‹åŠ¨å–æ¶ˆæµå¼è¯·æ±‚ï¼ˆæ¯”å¦‚ç”¨æˆ·ç‚¹å‡»ã€Œåœæ­¢ç”Ÿæˆã€æŒ‰é’®ï¼‰ï¼Œä¸­æ–­åç»­æ•°æ®ä¼ è¾“ï¼Œé‡Šæ”¾èµ„æºã€‚</li>
<li>ä¸¤ç§æ–¹æ¡ˆå¯¹æ¯”ï¼š</li>
</ol>
<ul>
<li>
<ul>
<li>Fetch æµå¼ï¼šé€šç”¨çµæ´»ï¼Œæ”¯æŒä»»æ„æ•°æ®æ ¼å¼ï¼Œæ— è‡ªåŠ¨é‡è¿ï¼Œéœ€æ‰‹åŠ¨å¤„ç†åˆ†å—è§£æï¼›</li>
<li>EventSource (SSE)ï¼šè½»é‡ç®€æ´ï¼Œè‡ªå¸¦è‡ªåŠ¨é‡è¿ï¼ŒæœåŠ¡ç«¯éœ€éµå¾ª <code>text/event-stream</code> æ ¼å¼ï¼Œé€‚åˆå•å‘æµå¼æ¨é€ã€‚</li>
</ul>
</li>
</ul>
<hr/>
<h3 data-id="heading-2">äºŒã€æ–¹æ¡ˆ 1ï¼šFetch æµå¼ + AbortController å®ç°</h3>
<h4 data-id="heading-3">ï¼ˆä¸€ï¼‰å‰ç«¯ä»£ç ï¼ˆå®Œæ•´å¯è¿è¡Œï¼‰</h4>
<p><strong>html</strong></p>
<p>é¢„è§ˆ</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"zh-CN"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>å¤§æ¨¡å‹æµå¼å“åº”ï¼ˆFetch+AbortControllerï¼‰<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
    <span class="hljs-selector-id">#result</span> {
      <span class="hljs-attribute">width</span>: <span class="hljs-number">800px</span>;
      <span class="hljs-attribute">height</span>: <span class="hljs-number">400px</span>;
      <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#ccc</span>;
      <span class="hljs-attribute">padding</span>: <span class="hljs-number">16px</span>;
      <span class="hljs-attribute">font-size</span>: <span class="hljs-number">16px</span>;
      <span class="hljs-attribute">line-height</span>: <span class="hljs-number">1.6</span>;
      <span class="hljs-attribute">overflow-y</span>: auto;
      <span class="hljs-attribute">margin</span>: <span class="hljs-number">20px</span> <span class="hljs-number">0</span>;
    }
    <span class="hljs-selector-tag">button</span> {
      <span class="hljs-attribute">padding</span>: <span class="hljs-number">8px</span> <span class="hljs-number">16px</span>;
      <span class="hljs-attribute">font-size</span>: <span class="hljs-number">16px</span>;
      <span class="hljs-attribute">margin-right</span>: <span class="hljs-number">10px</span>;
      <span class="hljs-attribute">cursor</span>: pointer;
    }
  </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>Fetch æµå¼å®ç°å¤§æ¨¡å‹æ‰“å­—æœºæ•ˆæœ<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"startBtn"</span>&gt;</span>å¼€å§‹ç”Ÿæˆ<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"stopBtn"</span> <span class="hljs-attr">disabled</span>&gt;</span>åœæ­¢ç”Ÿæˆ<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"result"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
    <span class="hljs-comment">// 1. åˆå§‹åŒ– AbortControllerï¼ˆç”¨äºå–æ¶ˆè¯·æ±‚ï¼‰</span>
    <span class="hljs-keyword">let</span> abortController = <span class="hljs-literal">null</span>;
    <span class="hljs-keyword">const</span> resultDom = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'result'</span>);
    <span class="hljs-keyword">const</span> startBtn = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'startBtn'</span>);
    <span class="hljs-keyword">const</span> stopBtn = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'stopBtn'</span>);

    <span class="hljs-comment">// 2. æ ¸å¿ƒï¼šFetch æµå¼è·å–å¤§æ¨¡å‹å“åº”å¹¶å®ç°æ‰“å­—æœºæ•ˆæœ</span>
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">fetchStreamChat</span>(<span class="hljs-params">prompt</span>) {
      <span class="hljs-comment">// é‡ç½®ç»“æœå®¹å™¨</span>
      resultDom.<span class="hljs-property">textContent</span> = <span class="hljs-string">''</span>;
      <span class="hljs-comment">// åˆ›å»ºæ–°çš„ AbortController å®ä¾‹ï¼ˆæ¯æ¬¡è¯·æ±‚é‡æ–°åˆ›å»ºï¼‰</span>
      abortController = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AbortController</span>();
      <span class="hljs-keyword">const</span> signal = abortController.<span class="hljs-property">signal</span>;

      <span class="hljs-keyword">try</span> {
        <span class="hljs-comment">// å‘èµ· Fetch æµå¼è¯·æ±‚ï¼Œä¼ å…¥ signal ç”¨äºå–æ¶ˆ</span>
        <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'/api/chat/fetch-stream'</span>, {
          <span class="hljs-attr">method</span>: <span class="hljs-string">'POST'</span>,
          <span class="hljs-attr">headers</span>: {
            <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json'</span>,
          },
          <span class="hljs-attr">body</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({ prompt }),
          <span class="hljs-attr">signal</span>: signal, <span class="hljs-comment">// ç»‘å®šå–æ¶ˆä¿¡å·</span>
        });

        <span class="hljs-comment">// æ ¡éªŒå“åº”æœ‰æ•ˆæ€§</span>
        <span class="hljs-keyword">if</span> (!response.<span class="hljs-property">ok</span> || !response.<span class="hljs-property">body</span>) {
          <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">`è¯·æ±‚å¤±è´¥ï¼š<span class="hljs-subst">${response.status}</span>`</span>);
        }

        <span class="hljs-comment">// è·å–å¯è¯»æµå’Œæ–‡æœ¬è§£ç å™¨ï¼ˆstream: true ä¿è¯åˆ†å—è§£ç ä¸ä¹±ç ï¼‰</span>
        <span class="hljs-keyword">const</span> reader = response.<span class="hljs-property">body</span>.<span class="hljs-title function_">getReader</span>();
        <span class="hljs-keyword">const</span> decoder = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TextDecoder</span>(<span class="hljs-string">'utf-8'</span>, { <span class="hljs-attr">stream</span>: <span class="hljs-literal">true</span> });

        <span class="hljs-comment">// å¾ªç¯é€å—è¯»å–æµå¼æ•°æ®ï¼ˆæ‰“å­—æœºæ ¸å¿ƒé€»è¾‘ï¼‰</span>
        <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
          <span class="hljs-comment">// ç›‘å¬å–æ¶ˆä¿¡å·ï¼Œè‹¥å·²å–æ¶ˆåˆ™é€€å‡ºå¾ªç¯</span>
          <span class="hljs-keyword">if</span> (signal.<span class="hljs-property">aborted</span>) {
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Fetch æµå¼è¯·æ±‚å·²è¢«æ‰‹åŠ¨å–æ¶ˆ'</span>);
            <span class="hljs-keyword">break</span>;
          }

          <span class="hljs-comment">// é€å—è¯»å–æ•°æ®</span>
          <span class="hljs-keyword">const</span> { done, value } = <span class="hljs-keyword">await</span> reader.<span class="hljs-title function_">read</span>();
          <span class="hljs-keyword">if</span> (done) <span class="hljs-keyword">break</span>; <span class="hljs-comment">// è¯»å–å®Œæˆ</span>

          <span class="hljs-comment">// è§£ç äºŒè¿›åˆ¶æµä¸ºæ–‡æœ¬å¹¶å®æ—¶è¿½åŠ åˆ°DOMï¼ˆæ‰“å­—æœºæ•ˆæœï¼‰</span>
          <span class="hljs-keyword">const</span> chunkText = decoder.<span class="hljs-title function_">decode</span>(value);
          resultDom.<span class="hljs-property">textContent</span> += chunkText;
          <span class="hljs-comment">// è‡ªåŠ¨æ»šåŠ¨åˆ°åº•éƒ¨</span>
          resultDom.<span class="hljs-property">scrollTop</span> = resultDom.<span class="hljs-property">scrollHeight</span>;
        }

        <span class="hljs-comment">// é‡Šæ”¾è¯»å–å™¨èµ„æº</span>
        reader.<span class="hljs-title function_">releaseLock</span>();
      } <span class="hljs-keyword">catch</span> (err) {
        <span class="hljs-keyword">if</span> (err.<span class="hljs-property">name</span> === <span class="hljs-string">'AbortError'</span>) {
          resultDom.<span class="hljs-property">textContent</span> += <span class="hljs-string">'\n\nã€è¯·æ±‚å·²æ‰‹åŠ¨åœæ­¢ã€‘'</span>;
        } <span class="hljs-keyword">else</span> {
          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'æµå¼è¯·æ±‚å¼‚å¸¸ï¼š'</span>, err);
          resultDom.<span class="hljs-property">textContent</span> = <span class="hljs-string">`è¯·æ±‚å¤±è´¥ï¼š<span class="hljs-subst">${err.message}</span>`</span>;
        }
      } <span class="hljs-keyword">finally</span> {
        <span class="hljs-comment">// é‡ç½®æŒ‰é’®çŠ¶æ€å’Œ AbortController</span>
        abortController = <span class="hljs-literal">null</span>;
        startBtn.<span class="hljs-property">disabled</span> = <span class="hljs-literal">false</span>;
        stopBtn.<span class="hljs-property">disabled</span> = <span class="hljs-literal">true</span>;
      }
    }

    <span class="hljs-comment">// 3. æŒ‰é’®ç‚¹å‡»äº‹ä»¶ç»‘å®š</span>
    startBtn.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-function">() =&gt;</span> {
      startBtn.<span class="hljs-property">disabled</span> = <span class="hljs-literal">true</span>;
      stopBtn.<span class="hljs-property">disabled</span> = <span class="hljs-literal">false</span>;
      <span class="hljs-comment">// ä¼ å…¥æé—®è¯</span>
      <span class="hljs-title function_">fetchStreamChat</span>(<span class="hljs-string">'è¯·ç”¨ç®€æ´çš„è¯­è¨€ä»‹ç»å‰ç«¯æµå¼å¼€å‘çš„æ ¸å¿ƒä»·å€¼'</span>);
    });

    stopBtn.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-comment">// æ‰‹åŠ¨å–æ¶ˆæµå¼è¯·æ±‚</span>
      <span class="hljs-keyword">if</span> (abortController) {
        abortController.<span class="hljs-title function_">abort</span>(); <span class="hljs-comment">// è§¦å‘ä¿¡å·ä¸­æ–­è¯·æ±‚</span>
        stopBtn.<span class="hljs-property">disabled</span> = <span class="hljs-literal">true</span>;
      }
    });
  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<h4 data-id="heading-4">ï¼ˆäºŒï¼‰é…å¥—æœåŠ¡ç«¯ä»£ç ï¼ˆNode.js/Expressï¼Œæ¨¡æ‹Ÿå¤§æ¨¡å‹åˆ†å—å“åº”ï¼‰</h4>
<p><strong>javascript</strong></p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> express = <span class="hljs-built_in">require</span>(<span class="hljs-string">'express'</span>);
<span class="hljs-keyword">const</span> app = <span class="hljs-title function_">express</span>();
app.<span class="hljs-title function_">use</span>(express.<span class="hljs-title function_">json</span>()); <span class="hljs-comment">// è§£æJSONè¯·æ±‚ä½“</span>

<span class="hljs-comment">// Fetch æµå¼èŠå¤©æ¥å£ï¼ˆæ¨¡æ‹Ÿå¤§æ¨¡å‹åˆ†å—è¿”å›æ–‡æœ¬ï¼‰</span>
app.<span class="hljs-title function_">post</span>(<span class="hljs-string">'/api/chat/fetch-stream'</span>, <span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> { prompt } = req.<span class="hljs-property">body</span>;
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ”¶åˆ°æé—®ï¼š'</span>, prompt);

  <span class="hljs-comment">// æ ¸å¿ƒï¼šå¼€å¯ HTTP Chunked åˆ†å—ä¼ è¾“ï¼ˆæ— éœ€æ‰‹åŠ¨è®¾ç½®ï¼Œres.write è‡ªåŠ¨è§¦å‘ï¼‰</span>
  res.<span class="hljs-title function_">setHeader</span>(<span class="hljs-string">'Content-Type'</span>, <span class="hljs-string">'text/plain; charset=utf-8'</span>);
  res.<span class="hljs-title function_">setHeader</span>(<span class="hljs-string">'Cache-Control'</span>, <span class="hljs-string">'no-cache'</span>);

  <span class="hljs-comment">// æ¨¡æ‹Ÿå¤§æ¨¡å‹ç”Ÿæˆçš„æ–‡æœ¬ï¼ˆåˆ†å—è¿”å›ï¼‰</span>
  <span class="hljs-keyword">const</span> responseText = <span class="hljs-string">`å‰ç«¯æµå¼å¼€å‘çš„æ ¸å¿ƒä»·å€¼ä¸»è¦æœ‰ä¸‰ç‚¹ï¼š
1.  ä½å†…å­˜å ç”¨ï¼šæ— éœ€ä¸€æ¬¡æ€§åŠ è½½å®Œæ•´å¤§æ–‡ä»¶/å¤§æ•°æ®ï¼Œä»…å¤„ç†å½“å‰æ•°æ®å—ï¼Œé¿å…å†…å­˜æº¢å‡ºå’Œé¡µé¢å¡é¡¿ï¼›
2.  ä½å»¶è¿Ÿä½“éªŒï¼šç”¨æˆ·æ— éœ€ç­‰å¾…å®Œæ•´æ•°æ®è¿”å›ï¼Œå³å¯å®æ—¶çœ‹åˆ°å†…å®¹ï¼ˆå¦‚å¤§æ¨¡å‹æ‰“å­—æœºæ•ˆæœã€è§†é¢‘è¾¹æ’­è¾¹åŠ è½½ï¼‰ï¼›
3.  é€‚é…å®æ—¶æ•°æ®ï¼šå¯å¤„ç†æ— å›ºå®šç»“æŸèŠ‚ç‚¹çš„å®æ—¶æ•°æ®æµï¼ˆå¦‚å®æ—¶æ—¥å¿—ã€è‚¡ç¥¨è¡Œæƒ…ã€éŸ³è§†é¢‘æµï¼‰ã€‚
è¿™ä¸‰å¤§ä»·å€¼è®©æµå¼å¼€å‘æˆä¸ºå¤„ç†å¤§æ–‡ä»¶å’Œå®æ—¶åœºæ™¯çš„å¿…å¤‡æŠ€æœ¯ã€‚`</span>;

  <span class="hljs-comment">// åˆ†å—åˆ‡å‰²æ–‡æœ¬ï¼ˆæ¨¡æ‹Ÿé€å­—è¿”å›ï¼Œæ¯50æ¯«ç§’è¿”å›ä¸€ä¸ªå­—ç¬¦ï¼Œå®ç°æ‰“å­—æœºæ•ˆæœï¼‰</span>
  <span class="hljs-keyword">let</span> index = <span class="hljs-number">0</span>;
  <span class="hljs-keyword">const</span> chunkInterval = <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">if</span> (index &gt;= responseText.<span class="hljs-property">length</span>) {
      <span class="hljs-built_in">clearInterval</span>(chunkInterval);
      res.<span class="hljs-title function_">end</span>(); <span class="hljs-comment">// ç»“æŸå“åº”</span>
      <span class="hljs-keyword">return</span>;
    }
    <span class="hljs-comment">// é€å­—ç¬¦å†™å…¥å“åº”ï¼ˆåˆ†å—ä¼ è¾“æ ¸å¿ƒï¼‰</span>
    res.<span class="hljs-title function_">write</span>(responseText[index]);
    index++;
  }, <span class="hljs-number">50</span>);

  <span class="hljs-comment">// ç›‘å¬å®¢æˆ·ç«¯å–æ¶ˆè¯·æ±‚ï¼ˆå‰ç«¯è°ƒç”¨ abort() æ—¶è§¦å‘ï¼‰</span>
  req.<span class="hljs-title function_">on</span>(<span class="hljs-string">'close'</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-built_in">clearInterval</span>(chunkInterval);
    res.<span class="hljs-title function_">end</span>();
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å®¢æˆ·ç«¯å–æ¶ˆäº† Fetch æµå¼è¯·æ±‚'</span>);
  });
});

<span class="hljs-comment">// é™æ€æ–‡ä»¶æ‰˜ç®¡ï¼ˆå‰ç«¯HTMLæ–‡ä»¶æ”¾åœ¨æ ¹ç›®å½•å³å¯è®¿é—®ï¼‰</span>
app.<span class="hljs-title function_">use</span>(express.<span class="hljs-title function_">static</span>(<span class="hljs-string">'.'</span>));

app.<span class="hljs-title function_">listen</span>(<span class="hljs-number">3000</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æœåŠ¡å¯åŠ¨æˆåŠŸï¼šhttp://localhost:3000'</span>);
});
</code></pre>
<hr/>
<h3 data-id="heading-5">ä¸‰ã€æ–¹æ¡ˆ 2ï¼šEventSource (SSE) + AbortController å®ç°</h3>
<h4 data-id="heading-6">ï¼ˆä¸€ï¼‰å‰ç«¯ä»£ç ï¼ˆå®Œæ•´å¯è¿è¡Œï¼‰</h4>
<p><strong>html</strong></p>
<p>é¢„è§ˆ</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"zh-CN"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>å¤§æ¨¡å‹æµå¼å“åº”ï¼ˆSSE+AbortControllerï¼‰<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
    <span class="hljs-selector-id">#result</span> {
      <span class="hljs-attribute">width</span>: <span class="hljs-number">800px</span>;
      <span class="hljs-attribute">height</span>: <span class="hljs-number">400px</span>;
      <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#ccc</span>;
      <span class="hljs-attribute">padding</span>: <span class="hljs-number">16px</span>;
      <span class="hljs-attribute">font-size</span>: <span class="hljs-number">16px</span>;
      <span class="hljs-attribute">line-height</span>: <span class="hljs-number">1.6</span>;
      <span class="hljs-attribute">overflow-y</span>: auto;
      <span class="hljs-attribute">margin</span>: <span class="hljs-number">20px</span> <span class="hljs-number">0</span>;
    }
    <span class="hljs-selector-tag">button</span> {
      <span class="hljs-attribute">padding</span>: <span class="hljs-number">8px</span> <span class="hljs-number">16px</span>;
      <span class="hljs-attribute">font-size</span>: <span class="hljs-number">16px</span>;
      <span class="hljs-attribute">margin-right</span>: <span class="hljs-number">10px</span>;
      <span class="hljs-attribute">cursor</span>: pointer;
    }
  </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>SSE(EventSource) å®ç°å¤§æ¨¡å‹æ‰“å­—æœºæ•ˆæœ<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"startBtn"</span>&gt;</span>å¼€å§‹ç”Ÿæˆ<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"stopBtn"</span> <span class="hljs-attr">disabled</span>&gt;</span>åœæ­¢ç”Ÿæˆ<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"result"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
    <span class="hljs-comment">// 1. åˆå§‹åŒ–å˜é‡ï¼šEventSource å®ä¾‹ + AbortController</span>
    <span class="hljs-keyword">let</span> eventSource = <span class="hljs-literal">null</span>;
    <span class="hljs-keyword">let</span> abortController = <span class="hljs-literal">null</span>;
    <span class="hljs-keyword">const</span> resultDom = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'result'</span>);
    <span class="hljs-keyword">const</span> startBtn = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'startBtn'</span>);
    <span class="hljs-keyword">const</span> stopBtn = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'stopBtn'</span>);

    <span class="hljs-comment">// 2. æ ¸å¿ƒï¼šSSE æµå¼è·å–å¤§æ¨¡å‹å“åº”</span>
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">sseStreamChat</span>(<span class="hljs-params">prompt</span>) {
      <span class="hljs-comment">// é‡ç½®ç»“æœå®¹å™¨</span>
      resultDom.<span class="hljs-property">textContent</span> = <span class="hljs-string">''</span>;
      <span class="hljs-comment">// åˆ›å»º AbortController å®ä¾‹</span>
      abortController = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AbortController</span>();
      <span class="hljs-keyword">const</span> signal = abortController.<span class="hljs-property">signal</span>;

      <span class="hljs-comment">// æ‹¼æ¥è¯·æ±‚å‚æ•°ï¼ˆSSE ä»…æ”¯æŒ GET è¯·æ±‚ï¼Œå‚æ•°é€šè¿‡ URL ä¼ é€’ï¼‰</span>
      <span class="hljs-keyword">const</span> encodedPrompt = <span class="hljs-built_in">encodeURIComponent</span>(prompt);
      <span class="hljs-keyword">const</span> sseUrl = <span class="hljs-string">`/api/chat/sse-stream?prompt=<span class="hljs-subst">${encodedPrompt}</span>`</span>;

      <span class="hljs-comment">// åˆ›å»º EventSource å®ä¾‹ï¼ˆSSE å®¢æˆ·ç«¯æ ¸å¿ƒï¼‰</span>
      eventSource = <span class="hljs-keyword">new</span> <span class="hljs-title class_">EventSource</span>(sseUrl);

      <span class="hljs-comment">// 3. ç›‘å¬ SSE æ¶ˆæ¯ï¼ˆæ‰“å­—æœºæ ¸å¿ƒé€»è¾‘ï¼‰</span>
      eventSource.<span class="hljs-property">onmessage</span> = <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
        <span class="hljs-comment">// å®æ—¶è¿½åŠ æ–‡æœ¬åˆ° DOM</span>
        resultDom.<span class="hljs-property">textContent</span> += e.<span class="hljs-property">data</span>;
        <span class="hljs-comment">// è‡ªåŠ¨æ»šåŠ¨åˆ°åº•éƒ¨</span>
        resultDom.<span class="hljs-property">scrollTop</span> = resultDom.<span class="hljs-property">scrollHeight</span>;
      };

      <span class="hljs-comment">// 4. ç›‘å¬ SSE è¿æ¥æ‰“å¼€</span>
      eventSource.<span class="hljs-property">onopen</span> = <span class="hljs-function">() =&gt;</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'SSE è¿æ¥å·²å»ºç«‹'</span>);
        startBtn.<span class="hljs-property">disabled</span> = <span class="hljs-literal">true</span>;
        stopBtn.<span class="hljs-property">disabled</span> = <span class="hljs-literal">false</span>;
      };

      <span class="hljs-comment">// 5. ç›‘å¬ SSE é”™è¯¯</span>
      eventSource.<span class="hljs-property">onerror</span> = <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
        <span class="hljs-keyword">if</span> (eventSource.<span class="hljs-property">readyState</span> === <span class="hljs-title class_">EventSource</span>.<span class="hljs-property">CLOSED</span>) {
          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'SSE è¿æ¥å·²å…³é—­'</span>);
        } <span class="hljs-keyword">else</span> {
          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'SSE è¿æ¥å¼‚å¸¸ï¼š'</span>, e);
          resultDom.<span class="hljs-property">textContent</span> += <span class="hljs-string">'\n\nã€SSE è¿æ¥å¼‚å¸¸ã€‘'</span>;
        }
        <span class="hljs-comment">// é‡ç½®çŠ¶æ€</span>
        <span class="hljs-title function_">resetSSEState</span>();
      };

      <span class="hljs-comment">// 6. ç»‘å®š AbortController ä¿¡å·ï¼ˆç›‘å¬å–æ¶ˆäº‹ä»¶ï¼‰</span>
      signal.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'abort'</span>, <span class="hljs-function">() =&gt;</span> {
        <span class="hljs-keyword">if</span> (eventSource) {
          eventSource.<span class="hljs-title function_">close</span>(); <span class="hljs-comment">// å…³é—­ SSE è¿æ¥</span>
          resultDom.<span class="hljs-property">textContent</span> += <span class="hljs-string">'\n\nã€è¯·æ±‚å·²æ‰‹åŠ¨åœæ­¢ã€‘'</span>;
          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'SSE æµå¼è¯·æ±‚å·²è¢«æ‰‹åŠ¨å–æ¶ˆ'</span>);
        }
      });
    }

    <span class="hljs-comment">// 7. é‡ç½® SSE çŠ¶æ€</span>
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">resetSSEState</span>(<span class="hljs-params"/>) {
      eventSource = <span class="hljs-literal">null</span>;
      abortController = <span class="hljs-literal">null</span>;
      startBtn.<span class="hljs-property">disabled</span> = <span class="hljs-literal">false</span>;
      stopBtn.<span class="hljs-property">disabled</span> = <span class="hljs-literal">true</span>;
    }

    <span class="hljs-comment">// 8. æŒ‰é’®ç‚¹å‡»äº‹ä»¶ç»‘å®š</span>
    startBtn.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-title function_">sseStreamChat</span>(<span class="hljs-string">'è¯·ç”¨ç®€æ´çš„è¯­è¨€ä»‹ç»å‰ç«¯æµå¼å¼€å‘çš„æ ¸å¿ƒä»·å€¼'</span>);
    });

    stopBtn.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-comment">// æ‰‹åŠ¨å–æ¶ˆ SSE è¯·æ±‚ï¼ˆé€šè¿‡ AbortController è§¦å‘ï¼‰</span>
      <span class="hljs-keyword">if</span> (abortController) {
        abortController.<span class="hljs-title function_">abort</span>();
        stopBtn.<span class="hljs-property">disabled</span> = <span class="hljs-literal">true</span>;
      }
    });
  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<h4 data-id="heading-7">ï¼ˆäºŒï¼‰é…å¥—æœåŠ¡ç«¯ä»£ç ï¼ˆNode.js/Expressï¼ŒSSE æ ¼å¼å“åº”ï¼‰</h4>
<p><strong>javascript</strong></p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> express = <span class="hljs-built_in">require</span>(<span class="hljs-string">'express'</span>);
<span class="hljs-keyword">const</span> app = <span class="hljs-title function_">express</span>();
app.<span class="hljs-title function_">use</span>(express.<span class="hljs-title function_">json</span>());

<span class="hljs-comment">// SSE æµå¼èŠå¤©æ¥å£ï¼ˆå¿…é¡»è¿”å› text/event-stream æ ¼å¼ï¼‰</span>
app.<span class="hljs-title function_">get</span>(<span class="hljs-string">'/api/chat/sse-stream'</span>, <span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> { prompt } = req.<span class="hljs-property">query</span>;
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ”¶åˆ°æé—®ï¼š'</span>, prompt);

  <span class="hljs-comment">// æ ¸å¿ƒï¼šè®¾ç½® SSE ä¸“å±å“åº”å¤´</span>
  res.<span class="hljs-title function_">setHeader</span>(<span class="hljs-string">'Content-Type'</span>, <span class="hljs-string">'text/event-stream'</span>);
  res.<span class="hljs-title function_">setHeader</span>(<span class="hljs-string">'Cache-Control'</span>, <span class="hljs-string">'no-cache'</span>);
  res.<span class="hljs-title function_">setHeader</span>(<span class="hljs-string">'Connection'</span>, <span class="hljs-string">'keep-alive'</span>);
  res.<span class="hljs-title function_">setHeader</span>(<span class="hljs-string">'Access-Control-Allow-Origin'</span>, <span class="hljs-string">'*'</span>); <span class="hljs-comment">// è·¨åŸŸéœ€é…ç½®</span>

  <span class="hljs-comment">// æ¨¡æ‹Ÿå¤§æ¨¡å‹ç”Ÿæˆçš„æ–‡æœ¬</span>
  <span class="hljs-keyword">const</span> responseText = <span class="hljs-string">`å‰ç«¯æµå¼å¼€å‘çš„æ ¸å¿ƒä»·å€¼ä¸»è¦æœ‰ä¸‰ç‚¹ï¼š
1.  ä½å†…å­˜å ç”¨ï¼šæ— éœ€ä¸€æ¬¡æ€§åŠ è½½å®Œæ•´å¤§æ–‡ä»¶/å¤§æ•°æ®ï¼Œä»…å¤„ç†å½“å‰æ•°æ®å—ï¼Œé¿å…å†…å­˜æº¢å‡ºå’Œé¡µé¢å¡é¡¿ï¼›
2.  ä½å»¶è¿Ÿä½“éªŒï¼šç”¨æˆ·æ— éœ€ç­‰å¾…å®Œæ•´æ•°æ®è¿”å›ï¼Œå³å¯å®æ—¶çœ‹åˆ°å†…å®¹ï¼ˆå¦‚å¤§æ¨¡å‹æ‰“å­—æœºæ•ˆæœã€è§†é¢‘è¾¹æ’­è¾¹åŠ è½½ï¼‰ï¼›
3.  é€‚é…å®æ—¶æ•°æ®ï¼šå¯å¤„ç†æ— å›ºå®šç»“æŸèŠ‚ç‚¹çš„å®æ—¶æ•°æ®æµï¼ˆå¦‚å®æ—¶æ—¥å¿—ã€è‚¡ç¥¨è¡Œæƒ…ã€éŸ³è§†é¢‘æµï¼‰ã€‚
è¿™ä¸‰å¤§ä»·å€¼è®©æµå¼å¼€å‘æˆä¸ºå¤„ç†å¤§æ–‡ä»¶å’Œå®æ—¶åœºæ™¯çš„å¿…å¤‡æŠ€æœ¯ã€‚`</span>;

  <span class="hljs-comment">// åˆ†å—è¿”å›ï¼ˆéµå¾ª SSE æ ¼å¼ï¼šdata: å†…å®¹\n\nï¼‰</span>
  <span class="hljs-keyword">let</span> index = <span class="hljs-number">0</span>;
  <span class="hljs-keyword">const</span> chunkInterval = <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">if</span> (index &gt;= responseText.<span class="hljs-property">length</span>) {
      <span class="hljs-built_in">clearInterval</span>(chunkInterval);
      <span class="hljs-comment">// å‘é€ç»“æŸæ¶ˆæ¯</span>
      res.<span class="hljs-title function_">write</span>(<span class="hljs-string">'data: \n\n'</span>);
      res.<span class="hljs-title function_">end</span>();
      <span class="hljs-keyword">return</span>;
    }
    <span class="hljs-comment">// SSE æ ¼å¼ï¼šdata: å•ä¸ªå­—ç¬¦\n\nï¼ˆé€å­—è¿”å›ï¼Œå®ç°æ‰“å­—æœºæ•ˆæœï¼‰</span>
    res.<span class="hljs-title function_">write</span>(<span class="hljs-string">`data: <span class="hljs-subst">${responseText[index]}</span>\n\n`</span>);
    index++;
  }, <span class="hljs-number">50</span>);

  <span class="hljs-comment">// ç›‘å¬å®¢æˆ·ç«¯æ–­å¼€è¿æ¥</span>
  req.<span class="hljs-title function_">on</span>(<span class="hljs-string">'close'</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-built_in">clearInterval</span>(chunkInterval);
    res.<span class="hljs-title function_">end</span>();
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å®¢æˆ·ç«¯å–æ¶ˆäº† SSE æµå¼è¯·æ±‚'</span>);
  });
});

<span class="hljs-comment">// é™æ€æ–‡ä»¶æ‰˜ç®¡</span>
app.<span class="hljs-title function_">use</span>(express.<span class="hljs-title function_">static</span>(<span class="hljs-string">'.'</span>));

app.<span class="hljs-title function_">listen</span>(<span class="hljs-number">3000</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æœåŠ¡å¯åŠ¨æˆåŠŸï¼šhttp://localhost:3000'</span>);
});
</code></pre>
<hr/>
<h3 data-id="heading-8">å››ã€å…³é”®çŸ¥è¯†ç‚¹æ€»ç»“</h3>
<ol>
<li><strong>AbortController æ ¸å¿ƒç”¨æ³•</strong></li>
</ol>
<ul>
<li>
<ul>
<li>ä½œç”¨ï¼šç»Ÿä¸€å–æ¶ˆå¼‚æ­¥è¯·æ±‚ï¼ˆFetch/SSE å‡æ”¯æŒï¼‰ï¼Œé¿å…æ— æ•ˆæ•°æ®ä¼ è¾“å’Œå†…å­˜æ³„æ¼ï¼›</li>
<li>æµç¨‹ï¼šåˆ›å»º <code>new AbortController()</code> â†’ è·å– <code>signal</code> ä¿¡å· â†’ ç»‘å®šåˆ°è¯·æ±‚ â†’ è°ƒç”¨ <code>abort()</code> å–æ¶ˆè¯·æ±‚ï¼›</li>
<li>å·®å¼‚ï¼šFetch ç›´æ¥é€šè¿‡ <code>signal</code> å‚æ•°ç»‘å®šï¼ŒSSE é€šè¿‡ç›‘å¬ <code>signal.abort</code> äº‹ä»¶æ‰‹åŠ¨å…³é—­è¿æ¥ã€‚</li>
</ul>
</li>
</ul>
<ol start="2">
<li><strong>æ‰“å­—æœºæ•ˆæœæ ¸å¿ƒ</strong></li>
</ol>
<ul>
<li>
<ul>
<li>å‰ç«¯ï¼šå®æ—¶æ¥æ”¶åˆ†å—æ–‡æœ¬ â†’ é€å—è¿½åŠ åˆ° DOMï¼ˆ<code>textContent += ç‰‡æ®µ</code>ï¼‰â†’ è‡ªåŠ¨æ»šåŠ¨åˆ°åº•éƒ¨ï¼›</li>
<li>æœåŠ¡ç«¯ï¼šåˆ†å—è¿”å›æ–‡æœ¬ï¼ˆFetch ç”¨ <code>res.write</code>ï¼ŒSSE ç”¨ <code>data: ç‰‡æ®µ\n\n</code>ï¼‰â†’ æ§åˆ¶è¿”å›é—´éš”ï¼ˆæ¨¡æ‹Ÿæ‰“å­—é€Ÿåº¦ï¼‰ã€‚</li>
</ul>
</li>
</ul>
<ol start="3">
<li><strong>ä¸¤ç§æ–¹æ¡ˆé€‰å‹</strong></li>
</ol>
<ul>
<li>
<ul>
<li>é€‰ Fetch æµå¼ï¼šéœ€è¦ POST è¯·æ±‚ï¼ˆä¼ é€’å¤§é‡å‚æ•°ï¼‰ã€æ— éœ€è‡ªåŠ¨é‡è¿ã€éœ€å¤„ç†äºŒè¿›åˆ¶æµï¼›</li>
<li>é€‰ SSEï¼šä»…éœ€ GET è¯·æ±‚ã€éœ€è¦è‡ªåŠ¨é‡è¿ã€è¿½æ±‚è½»é‡ç®€æ´ï¼ˆæ— éœ€æ‰‹åŠ¨å¤„ç†åˆ†å—è§£æï¼‰ã€‚</li>
</ul>
</li>
</ul>
<ol start="4">
<li><strong>é¿å‘ç‚¹</strong></li>
</ol>
<ul>
<li>
<ul>
<li>Fetch æµå¼ï¼šå¿…é¡»è®¾ç½® <code>TextDecoder({ stream: true })</code>ï¼Œå¦åˆ™åˆ†å—è§£ç ä¼šå‡ºç°ä¸­æ–‡ä¹±ç ï¼›è¯»å–å®Œæˆåéœ€è°ƒç”¨ <code>reader.releaseLock()</code> é‡Šæ”¾èµ„æºï¼›</li>
<li>SSEï¼šæœåŠ¡ç«¯å¿…é¡»è¿”å› <code>text/event-stream</code> æ ¼å¼ï¼Œä¸”æ¯æ¡æ¶ˆæ¯ä»¥ <code>\n\n</code> ç»“å°¾ï¼›ä»…æ”¯æŒ GET è¯·æ±‚ï¼Œå‚æ•°éœ€ URL ç¼–ç ã€‚</li>
</ul>
</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[PostgreSQL ç´¢å¼•é¿å‘æŒ‡å—ï¼šä¸ºä»€ä¹ˆä½ çš„æ•°æ®åº“åŠ äº†ç´¢å¼•åè€Œå˜æ…¢ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7598818096753868851</link>    <guid>https://juejin.cn/post/7598818096753868851</guid>    <pubDate>2026-01-25T08:18:03.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7598818096753868851" data-draft-id="7598818096753852467" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="PostgreSQL ç´¢å¼•é¿å‘æŒ‡å—ï¼šä¸ºä»€ä¹ˆä½ çš„æ•°æ®åº“åŠ äº†ç´¢å¼•åè€Œå˜æ…¢ï¼Ÿ"/> <meta itemprop="keywords" content="æ•°æ®åº“,PostgreSQL,DBA"/> <meta itemprop="datePublished" content="2026-01-25T08:18:03.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æŠ€æœ¯ä¸æ‰“çƒŠ"/> <meta itemprop="url" content="https://juejin.cn/user/893244690677165"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            PostgreSQL ç´¢å¼•é¿å‘æŒ‡å—ï¼šä¸ºä»€ä¹ˆä½ çš„æ•°æ®åº“åŠ äº†ç´¢å¼•åè€Œå˜æ…¢ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/893244690677165/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æŠ€æœ¯ä¸æ‰“çƒŠ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-25T08:18:03.000Z" title="Sun Jan 25 2026 08:18:03 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d0b8c51f9e604b9eb34d3be19c8eba35~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oqA5pyv5LiN5omT54OK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769933883&amp;x-signature=g47ae5HcNNbLFRFuvgA093XIAHs%3D" alt="1.jpg" loading="lazy"/></p>
<h2 data-id="heading-0">åˆ«çæï¼ä¹±å»ºPostgreSQLç´¢å¼•ï¼Œå†™å…¥æ€§èƒ½æš´è·Œ300%ï¼</h2>
<p>ä¸€ççœ¼ï¼Œçº¿ä¸Šçš„æ•°æ®åº“CPUç›´æ¥é£™åˆ°äº†100%ï¼</p>
<p>å°±åœ¨åˆšåˆšï¼Œå› ä¸ºä¸€ä½â€œçƒ­å¿ƒâ€çš„é«˜çº§å¼€å‘ç»™è®¢å•è¡¨åŠ äº†3ä¸ªçœ‹ä¼¼å®Œç¾çš„ç´¢å¼•ï¼Œå¯¼è‡´æ•´ä¸ªç³»ç»Ÿçš„å†™å…¥é€Ÿåº¦ç¬é—´è…°æ–©ï¼Œä¸ä»…æ²¡æ•‘æ´»ç³»ç»Ÿï¼Œåè€Œå¼•å‘äº†è¿é”å´©å¡Œã€‚</p>
<p>æ­£å¦‚PostgreSQLç¤¾åŒºå¤§ä½¬Robert Haasçš„é‚£å¥åè¨€ï¼šâ€œ<strong>ç´¢å¼•ä¸æ˜¯å…è´¹åˆé¤ï¼Œå®ƒæ˜¯ä¸€ç¬”æ˜‚è´µçš„æŠ€æœ¯å€ºåŠ¡ã€‚</strong>â€</p>
<hr/>
<h3 data-id="heading-1">## åˆ«æŠŠç´¢å¼•å½“é­”æ³•ï¼Œå®ƒæ˜¯ä¸€æœ¬â€œç›®å½•â€</h3>
<p>å¾ˆå¤šå…„å¼Ÿæœ‰ä¸ªè¯¯åŒºï¼šè§‰å¾—ç³»ç»Ÿæ…¢äº†ï¼Œåªè¦æ— è„‘ <code>CREATE INDEX</code> å°±èƒ½è¯åˆ°ç—…é™¤ã€‚</p>
<p><strong>å¤§é”™ç‰¹é”™ã€‚</strong></p>
<p>è¯´å¤§ç™½è¯ï¼Œç´¢å¼•æœ¬è´¨ä¸Šå°±æ˜¯ä¸€æœ¬â€œå­—å…¸ç›®å½•â€ã€‚ä½ æŸ¥å­—æ˜¯å¿«äº†ï¼Œä½†ä½ æƒ³è¿‡æ²¡æœ‰ï¼Ÿæ¯æ¬¡å¾€å­—å…¸é‡ŒåŠ ä¸€ä¸ªæ–°å­—ï¼Œä½ ä¸ä»…è¦å†™æ­£æ–‡ï¼Œè¿˜å¾—æŠŠç›®å½•é‡æ–°æ’ç‰ˆä¸€éã€‚</p>
<p><strong>è¿™å°±æ˜¯â€œç©ºé—´æ¢æ—¶é—´â€çš„ä»£ä»·ã€‚</strong></p>
<p>æ•°æ®ä¸ä¼šæ’’è°ã€‚åœ¨æ²¡æœ‰ä»»ä½•ç´¢å¼•çš„æƒ…å†µä¸‹ï¼Œæ’å…¥1000æ¡æ•°æ®å¯èƒ½åªéœ€è¦å‡ æ¯«ç§’ï¼›ä½†å¦‚æœä½ ç»™è¿™å¼ è¡¨åŠ äº†10ä¸ªç´¢å¼•ï¼Œ<strong>å†™å…¥è€—æ—¶å¯èƒ½ä¼šæš´æ¶¨10å€ä»¥ä¸Šã€‚</strong></p>
<blockquote>
<p>æ¯ä¸€æ¡ <code>INSERT</code> æˆ– <code>UPDATE</code>ï¼Œæ•°æ®åº“éƒ½è¦å»ç»´æŠ¤é‚£æ£µåºå¤§çš„ B-Tree ç´¢å¼•æ ‘ã€‚è¿™å“ªæ˜¯ä¼˜åŒ–ï¼Œç®€ç›´æ˜¯ç»™æ•°æ®åº“â€œæˆ´è„šé•£â€ã€‚</p>
</blockquote>
<p>é—®é¢˜æ¥äº†ï¼š<strong>ä½ ç°åœ¨çš„é¡¹ç›®ä¸­ï¼Œå•è¡¨ç´¢å¼•æœ€å¤šçš„æœ‰å‡ ä¸ªï¼Ÿè¶…è¿‡5ä¸ªçš„ï¼Œå»ºè®®ä½ å¾€ä¸‹çœ‹ï¼ŒèƒŒå¿ƒå¯èƒ½ä¼šå‡ºæ±—ã€‚</strong></p>
<hr/>
<h3 data-id="heading-2">## æ€§èƒ½å€å¢å™¨ï¼šè¿™4ç§æƒ…å†µè¯·æ¯«ä¸çŠ¹è±«</h3>
<p>å½“ç„¶ï¼Œæˆ‘ä»¬ä¸èƒ½å› å™åºŸé£Ÿã€‚åœ¨PostgreSQLçš„å®æˆ˜é€»è¾‘é‡Œï¼Œè¿™å››ä¸ªåœºæ™¯å±äºâ€œç»¿ç¯åŒºâ€ï¼Œ<strong>è¯·æŠŠç´¢å¼•ç„Šæ­»åœ¨è¿™äº›å­—æ®µä¸Šï¼š</strong></p>
<ol>
<li><strong>é«˜é¢‘æŸ¥è¯¢å­—æ®µ</strong>ï¼šå‡ºç°åœ¨ <code>WHERE</code> å­å¥é‡Œçš„å¸¸å®¢ã€‚è¿™æ˜¯æœ€åŸºæœ¬çš„å¸¸è¯†ã€‚</li>
<li><strong>å”¯ä¸€æ€§çº¦æŸ</strong>ï¼šç±»ä¼¼èº«ä»½è¯å·ã€UUIDè¿™ç§å­—æ®µï¼ˆUnique Indexï¼‰ã€‚</li>
<li><strong>è¡¨è¿æ¥å­—æ®µ</strong>ï¼šåš <code>JOIN</code> æ“ä½œæ—¶çš„ <code>ON</code> å­—æ®µï¼ˆå¤–é”®ï¼‰ã€‚ä¸åŠ è¿™ä¸ªï¼Œå¤šè¡¨å…³è”èƒ½æ…¢åˆ°è®©ä½ æ€€ç–‘äººç”Ÿã€‚</li>
<li><strong>æ’åºä¸åˆ†ç»„</strong>ï¼šç»å¸¸ <code>ORDER BY</code> æˆ– <code>GROUP BY</code> çš„å­—æ®µã€‚</li>
</ol>
<p><strong>ä»€ä¹ˆæ¦‚å¿µï¼Ÿ</strong></p>
<p>åˆ©ç”¨ç´¢å¼•çš„æœ‰åºæ€§ï¼ŒPostgreSQL å¯ä»¥ç›´æ¥é¿å…æå…¶æ¶ˆè€—å†…å­˜çš„ <code>FileSort</code> æ“ä½œã€‚åœ¨ä¸€ä¸ªåƒä¸‡çº§æ•°æ®çš„è¡¨ä¸­ï¼Œè¿™èƒ½æŠŠæŸ¥è¯¢ä» <strong>30ç§’ç¼©çŸ­åˆ°0.1ç§’</strong>ã€‚</p>
<p>æ‰“å¼€ä½ çš„ <code>EXPLAIN</code> åˆ†æï¼Œå¦‚æœä½ çœ‹åˆ° <code>Seq Scan</code>ï¼ˆå…¨è¡¨æ‰«æï¼‰å˜æˆäº† <code>Index Scan</code>ï¼ˆç´¢å¼•æ‰«æï¼‰ï¼Œæ­å–œä½ ï¼Œè¿™æ³¢æ“ä½œç¨³äº†ã€‚</p>
<hr/>
<h3 data-id="heading-3">## æ€§èƒ½æ‹–æ²¹ç“¶ï¼šé‡åˆ°è¿™äº›æƒ…å†µè¯·æ‰‹ä¸‹ç•™æƒ…</h3>
<p>æ¥ä¸‹æ¥çš„å†…å®¹ï¼Œå¯èƒ½ä¼šé¢ è¦†å¾ˆå¤šäººçš„è®¤çŸ¥ã€‚<strong>è¿™æ˜¯æœ¬æ–‡çš„é‡ç‚¹ï¼Œä¹Ÿæ˜¯æ— æ•°äº‹æ•…çš„æºå¤´ã€‚</strong></p>
<p><strong>1. è¡¨æ•°æ®é‡æå°</strong>
å‡ ç™¾è¡Œæ•°æ®çš„é…ç½®è¡¨ï¼Œä½ å»ºä»€ä¹ˆç´¢å¼•ï¼Ÿ
PostgreSQL çš„ä¼˜åŒ–å™¨æå…¶èªæ˜ï¼Œå¯¹äºè¿™ç§å°è¡¨ï¼Œå®ƒç›´æ¥æŠŠæ•´ä¸ªè¡¨åŠ è½½åˆ°å†…å­˜æ‰«æï¼Œé€Ÿåº¦æ¯”å»ç¿»ç´¢å¼•æ ‘å¿«å¾—å¤šã€‚åŠ äº†ç´¢å¼•åè€Œå¤šäº†å›è¡¨çš„å¼€é”€ï¼Œçº¯å±è„±è£¤å­æ”¾å±ã€‚</p>
<p><strong>2. æ•°æ®åŒºåˆ†åº¦ä½ï¼ˆCardinalityï¼‰</strong>
è¿™æ˜¯æ–°æ‰‹æœ€å®¹æ˜“è¸©çš„å‘ã€‚ç»™â€œæ€§åˆ«â€ã€â€œçŠ¶æ€ï¼ˆ0/1ï¼‰â€è¿™ç§å­—æ®µå»ºç´¢å¼•ã€‚
<strong>è¿™ç§ç´¢å¼•åœ¨ç”Ÿäº§ç¯å¢ƒå‡ ä¹æ˜¯åºŸçš„ã€‚</strong> å½“ä¸€ä¸ªå­—æ®µåªæœ‰å¾ˆå°‘çš„å–å€¼æ—¶ï¼Œä¼˜åŒ–å™¨ä¼šè®¤ä¸ºï¼šâ€œåæ­£éƒ½è¦æ‰«åŠå¼ è¡¨ï¼Œä¸å¦‚ç›´æ¥å…¨è¡¨æ‰«ç®—äº†ã€‚â€ ç»“æœå°±æ˜¯ä½ å»ºäº†ç´¢å¼•ï¼ŒPG å‹æ ¹ä¸ç”¨ã€‚</p>
<p><strong>3. é¢‘ç¹æ›´æ–°çš„åˆ—</strong>
è¿˜è®°å¾—å¼€å¤´é‚£ä¸ªCPUé£™å‡çš„æ¡ˆä¾‹å—ï¼Ÿ
é‚£å°±æ˜¯åœ¨â€œè®¢å•çŠ¶æ€â€è¿™ä¸ªé«˜é¢‘æ›´æ–°çš„å­—æ®µä¸Šå»ºäº†ç´¢å¼•ã€‚å¤§ä¿ƒæœŸé—´ï¼ŒçŠ¶æ€ä»â€œå¾…æ”¯ä»˜â€å˜â€œå·²æ”¯ä»˜â€å†å˜â€œå‘è´§â€ï¼Œæ¯ä¸€æ¬¡å˜åŒ–éƒ½è¦é‡å»ºç´¢å¼•ã€‚<strong>åœ¨é«˜å¹¶å‘ä¸‹ï¼Œè¿™ç›´æ¥å¯¼è‡´äº†ä¸¥é‡çš„é”ç«äº‰ï¼ˆLock Contentionï¼‰ã€‚</strong></p>
<p><strong>4. å¤§æ–‡æœ¬/é•¿å­—ç¬¦ä¸²</strong>
ç»™ <code>Description</code> è¿™ç§é•¿æ–‡æœ¬å»ºç´¢å¼•ï¼Ÿ<strong>ä½ çš„ç£ç›˜ç©ºé—´æ˜¯é£åˆ®æ¥çš„å—ï¼Ÿ</strong>
è¿™ç§åœºæ™¯ï¼Œè€è€å®å®å»ç”¨å‰ç¼€ç´¢å¼•ï¼Œæˆ–è€…ä¸Šå…¨æ–‡æ£€ç´¢ï¼ˆFull Text Searchï¼‰ã€‚</p>
<hr/>
<h3 data-id="heading-4">## éšå½¢æ€æ‰‹ï¼šè¿™å‡ ç§å†™æ³•ä¼šè®©ç´¢å¼•â€œä½œåºŸâ€</h3>
<p>æœ€æ°”äººçš„ä¸æ˜¯æ²¡å»ºç´¢å¼•ï¼Œè€Œæ˜¯<strong>å»ºäº†ç´¢å¼•ï¼Œä½†è¢«ä½ çš„åƒåœ¾ SQL ä»£ç æå¤±æ•ˆäº†ã€‚</strong></p>
<p>é¿å¼€è¿™å‡ ä¸ªâ€œéšå½¢æ€æ‰‹â€ï¼Œåˆ«è®©ä½ çš„åŠªåŠ›ä»˜è¯¸ä¸œæµï¼š</p>
<p><strong>1. å¯¹å­—æ®µè¿›è¡Œå‡½æ•°è¿ç®—</strong></p>
<ul>
<li>âŒ é”™è¯¯ï¼š<code>WHERE year(create_time) = 2024</code></li>
<li>âœ… æ­£ç¡®ï¼š<code>WHERE create_time &gt;= '2024-01-01' AND create_time &lt; '2025-01-01'</code></li>
</ul>
<p><strong>åŸç†å¾ˆç®€å•</strong>ï¼šä½ åœ¨å­—æ®µä¸Šå¥—äº†å‡½æ•°ï¼Œæ•°æ®åº“å°±å¿…é¡»æŠŠæ‰€æœ‰è¡Œéƒ½ç®—ä¸€éï¼Œç´¢å¼•ç›´æ¥ä½œåºŸã€‚</p>
<p><strong>2. éšå¼ç±»å‹è½¬æ¢</strong></p>
<ul>
<li>âŒ é”™è¯¯ï¼š<code>WHERE phone_number = 13800000000</code> (å­—æ®µæ˜¯ varchar)</li>
<li>âœ… æ­£ç¡®ï¼š<code>WHERE phone_number = '13800000000'</code></li>
</ul>
<p>ä¸åŠ å¼•å·ï¼Œæ•°æ®åº“ä¼šå·å·åšç±»å‹è½¬æ¢ï¼Œè¿™åˆæ˜¯ä¸€æ¬¡å…¨è¡¨æ‰«æã€‚</p>
<p><strong>3. æ¨¡ç³ŠæŸ¥è¯¢ç©è„±äº†</strong></p>
<ul>
<li>âŒ é”™è¯¯ï¼š<code>LIKE '%abc'</code></li>
<li>âœ… æ­£ç¡®ï¼š<code>LIKE 'abc%'</code></li>
</ul>
<p>è®°ä½ï¼š<strong>å·¦æ¨¡ç³Šï¼ˆ%æ”¾åœ¨å‰é¢ï¼‰æ˜¯ç´¢å¼•çš„æ­»ç©´</strong>ã€‚</p>
<hr/>
<h3 data-id="heading-5">## æ—¢ç„¶çœ‹äº†ï¼Œå°±åŠ¨èµ·æ¥</h3>
<p>ç´¢å¼•ä¼˜åŒ–çš„æ ¸å¿ƒä»æ¥ä¸æ˜¯â€œæŠ€æœ¯â€ï¼Œè€Œæ˜¯â€œæƒè¡¡â€ã€‚</p>
<p>è¯»å¤šå†™å°‘ï¼Œä¸Šç´¢å¼•ï¼›è¡¨å°åŒºåˆ†åº¦ä½ï¼Œåˆ«æŠ˜è…¾ã€‚</p>
<p><strong>ä¸‹å‘¨ä¸Šç­ï¼Œå»ºè®®å¤§å®¶åšä¸€ä»¶äº‹ï¼š</strong></p>
<p>è¿ä¸Šä½ çš„ç”Ÿäº§åº“ï¼Œæ‰§è¡Œä¸€ä¸‹è¿™æ¡å‘½ä»¤ï¼ˆä¸€å®šè¦åœ¨ä½å³°æœŸï¼‰ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> pg_stat_user_indexes 
<span class="hljs-keyword">WHERE</span> idx_scan <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;

</code></pre>
<p>æŠŠé‚£äº› <code>idx_scan</code>ï¼ˆç´¢å¼•æ‰«ææ¬¡æ•°ï¼‰ä¸º 0 æˆ–è€…æä½çš„ç´¢å¼•æ‰¾å‡ºæ¥ã€‚<strong>è¿™äº›å°±æ˜¯ä½ æ•°æ®åº“é‡Œçš„â€œå¸è¡€é¬¼â€ï¼Œè¯·åœ¨è¯„ä¼°åï¼Œå¤§èƒ†åœ°æŠŠå®ƒä»¬åˆ æ‰ã€‚</strong></p>
<p>æ•°æ®åº“æ€§èƒ½ä¼˜åŒ–è¿™æ¡è·¯ï¼Œ<strong>åšå‡æ³•å¾€å¾€æ¯”åšåŠ æ³•æ›´é‡è¦ã€‚</strong></p>
<p>æœ€åç•™ä¸ªä½œä¸šï¼š<strong>ä½ åœ¨è¿‡å¾€çš„å¼€å‘ç”Ÿæ¶¯ä¸­ï¼Œé‡åˆ°è¿‡æœ€ç¦»è°±çš„â€œæ…¢æŸ¥è¯¢â€æ˜¯ä»€ä¹ˆåŸå› é€ æˆçš„ï¼Ÿ</strong> æ¬¢è¿åœ¨è¯„è®ºåŒºé‡Œæ™’å‡ºæ¥ï¼Œè®©å¤§å®¶é¿é¿å‘ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[MysqlæŸ¥è¯¢å°è¡¨é©±åŠ¨å¤§è¡¨å•¥æ„æ€]]></title>    <link>https://juejin.cn/post/7598818096753885235</link>    <guid>https://juejin.cn/post/7598818096753885235</guid>    <pubDate>2026-01-25T08:18:16.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7598818096753885235" data-draft-id="7598827641307725875" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="MysqlæŸ¥è¯¢å°è¡¨é©±åŠ¨å¤§è¡¨å•¥æ„æ€"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-25T08:18:16.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è‹ä¸‰çš„å¼€å‘æ—¥è®°"/> <meta itemprop="url" content="https://juejin.cn/user/4248949048749213"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            MysqlæŸ¥è¯¢å°è¡¨é©±åŠ¨å¤§è¡¨å•¥æ„æ€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4248949048749213/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è‹ä¸‰çš„å¼€å‘æ—¥è®°
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-25T08:18:16.000Z" title="Sun Jan 25 2026 08:18:16 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>â€œ<strong>å°è¡¨é©±åŠ¨å¤§è¡¨</strong>â€æ˜¯æŒ‡åœ¨ MySQL åš JOIN æ—¶ï¼Œè®©<strong>è®°å½•æ•°å°‘çš„è¡¨å…ˆå‚ä¸å¾ªç¯</strong>ï¼Œç”¨å®ƒçš„æ¯ä¸€è¡Œå»åŒ¹é…å¤§è¡¨ä¸­æœ‰ç´¢å¼•çš„å­—æ®µï¼Œä»è€Œå‡å°‘æ‰«ææ¬¡æ•°ã€æå‡æ€§èƒ½ã€‚</p>
<p>å¯ä»¥ç†è§£ä¸ºï¼š</p>
<blockquote>
<p>ç”¨å°‘é‡è¡Œå»æŸ¥å¤§é‡è¡Œé‡Œçš„â€œç´¢å¼•â€ï¼Œè€Œä¸æ˜¯ç”¨å¤§é‡è¡Œåå¤æ‰«å¤§è¡¨ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-0">ä¸€ã€ç›´è§‚ç†è§£</h2>
<p>å‡è®¾ï¼š</p>
<ul>
<li>è¡¨ Aï¼š100 è¡Œï¼ˆå°è¡¨ï¼‰</li>
<li>è¡¨ Bï¼š1000 ä¸‡è¡Œï¼ˆå¤§è¡¨ï¼‰</li>
<li>å…³è”æ¡ä»¶ï¼š<code>A.id = B.a_id</code>ï¼ˆB.a_id æœ‰ç´¢å¼•ï¼‰</li>
</ul>
<h3 data-id="heading-1">å¥½çš„æ–¹å¼ï¼ˆå°è¡¨é©±åŠ¨å¤§è¡¨ï¼‰</h3>
<p>æ‰§è¡Œé€»è¾‘ç±»ä¼¼ï¼š</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">for</span> <span class="hljs-selector-tag">each</span> <span class="hljs-selector-tag">row</span> <span class="hljs-selector-tag">in</span> <span class="hljs-selector-tag">A</span> (<span class="hljs-number">100</span> æ¬¡):
    åœ¨ <span class="hljs-selector-tag">B</span> çš„ç´¢å¼•ä¸­æŸ¥ <span class="hljs-selector-tag">a_id</span> = <span class="hljs-selector-tag">A</span><span class="hljs-selector-class">.id</span> ï¼ˆèµ°ç´¢å¼•ï¼Œå¾ˆå¿«ï¼‰
</code></pre>
<p>æ€»æˆæœ¬ â‰ˆ 100 æ¬¡ç´¢å¼•æŸ¥æ‰¾</p>
<h3 data-id="heading-2">åçš„æ–¹å¼ï¼ˆå¤§è¡¨é©±åŠ¨å°è¡¨ï¼‰</h3>
<p>å¦‚æœåè¿‡æ¥ï¼š</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">for</span> <span class="hljs-selector-tag">each</span> <span class="hljs-selector-tag">row</span> <span class="hljs-selector-tag">in</span> <span class="hljs-selector-tag">B</span> (<span class="hljs-number">1000</span> ä¸‡æ¬¡):
    å» <span class="hljs-selector-tag">A</span> é‡Œæ‰¾ <span class="hljs-selector-tag">id</span> = <span class="hljs-selector-tag">B</span><span class="hljs-selector-class">.a_id</span>
</code></pre>
<p>å³ä½¿ A æœ‰ç´¢å¼•ï¼Œå¾ªç¯æ¬¡æ•°ä¹Ÿçˆ†ç‚¸ï¼Œä»£ä»·æå¤§ã€‚</p>
<hr/>
<h2 data-id="heading-3">äºŒã€åœ¨ SQL é‡Œæ€ä¹ˆä½“ç°</h2>
<pre><code class="hljs language-vbnet" lang="vbnet"><span class="hljs-keyword">SELECT</span> *
<span class="hljs-keyword">FROM</span> small_table s
<span class="hljs-keyword">JOIN</span> big_table b
  <span class="hljs-keyword">ON</span> s.id = b.sid;
</code></pre>
<p>ä¼˜åŒ–å™¨ç†æƒ³æ‰§è¡Œé¡ºåºæ˜¯ï¼š</p>
<pre><code class="hljs language-css" lang="css">s ä½œä¸ºé©±åŠ¨è¡¨ï¼ˆå¤–å±‚å¾ªç¯ï¼‰
<span class="hljs-selector-tag">b</span> ä½œä¸ºè¢«é©±åŠ¨è¡¨ï¼ˆå†…å±‚ç”¨ç´¢å¼•æŸ¥ï¼‰
</code></pre>
<p>EXPLAIN é‡Œé€šå¸¸è¡¨ç°ä¸ºï¼š</p>
<ul>
<li><code>s</code> åœ¨å‰ï¼ˆtype = ALL æˆ– rangeï¼‰</li>
<li><code>b</code> ä½¿ç”¨ç´¢å¼•ï¼ˆtype = ref / eq_refï¼‰</li>
</ul>
<hr/>
<h2 data-id="heading-4">ä¸‰ã€ä¸ºä»€ä¹ˆâ€œé©±åŠ¨è¡¨â€å¾ˆé‡è¦</h2>
<p>MySQL çš„ Nested Loop Join åŸç†æ˜¯ï¼š</p>
<pre><code class="hljs">é©±åŠ¨è¡¨çš„ä¸€è¡Œ
   â†“
å»è¢«é©±åŠ¨è¡¨ä¸­ç”¨ç´¢å¼•åŒ¹é…
   â†“
è¿”å›ç»“æœ
</code></pre>
<p>æ‰€ä»¥æˆæœ¬å…¬å¼è¿‘ä¼¼æ˜¯ï¼š</p>
<pre><code class="hljs">é©±åŠ¨è¡¨è¡Œæ•° Ã— è¢«é©±åŠ¨è¡¨ç´¢å¼•æŸ¥æ‰¾æˆæœ¬
</code></pre>
<p>é©±åŠ¨è¡¨è¶Šå°ï¼Œæ€»æˆæœ¬è¶Šä½ã€‚</p>
<hr/>
<h2 data-id="heading-5">å››ã€æ€ä¹ˆæ§åˆ¶â€œè°é©±åŠ¨è°â€</h2>
<h3 data-id="heading-6">1ï¼‰å†™æ³•é¡ºåºï¼ˆåœ¨æŸäº›ç‰ˆæœ¬/åœºæ™¯æœ‰æ•ˆï¼‰</h3>
<pre><code class="hljs language-vbnet" lang="vbnet"><span class="hljs-keyword">FROM</span> small s
<span class="hljs-keyword">JOIN</span> big b <span class="hljs-keyword">ON</span> ...
</code></pre>
<h3 data-id="heading-7">2ï¼‰ç”¨ STRAIGHT_JOIN å¼ºåˆ¶é¡ºåºï¼ˆæœ€ç›´æ¥ï¼‰</h3>
<pre><code class="hljs language-css" lang="css">SELECT *
<span class="hljs-selector-tag">FROM</span> small s
STRAIGHT_JOIN big <span class="hljs-selector-tag">b</span>
ON s<span class="hljs-selector-class">.id</span> = <span class="hljs-selector-tag">b</span><span class="hljs-selector-class">.sid</span>;
</code></pre>
<p>è¡¨ç¤ºï¼šæŒ‰ä¹¦å†™é¡ºåºæ‰§è¡Œ JOINã€‚</p>
<h3 data-id="heading-8">3ï¼‰é€šè¿‡ç´¢å¼•è®¾è®¡â€œé€¼è¿«â€ä¼˜åŒ–å™¨é€‰å°è¡¨</h3>
<ul>
<li>å¤§è¡¨çš„å…³è”åˆ—å¿…é¡»æœ‰ç´¢å¼•</li>
<li>å°è¡¨è¡Œæ•°è¿œå°äºå¤§è¡¨ï¼Œä¼˜åŒ–å™¨é€šå¸¸ä¼šè‡ªåŠ¨é€‰å°è¡¨åšé©±åŠ¨è¡¨</li>
</ul>
<hr/>
<h2 data-id="heading-9">äº”ã€åœ¨ä½ åšè®¢å• BI åœºæ™¯é‡Œçš„å…¸å‹ä¾‹å­</h2>
<p>æ¯”å¦‚ï¼š</p>
<ul>
<li><code>dim_user</code>ï¼š10 ä¸‡è¡Œï¼ˆå°è¡¨ï¼‰</li>
<li><code>dwd_order_detail</code>ï¼š10 äº¿è¡Œï¼ˆå¤§è¡¨ï¼‰</li>
</ul>
<p>æ­£ç¡®å§¿åŠ¿ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">SELECT ...
FROM dim_user u
JOIN dwd_order_detail o
  ON <span class="hljs-attr">u.id</span> = o.user_id
WHERE <span class="hljs-attr">u.province</span> = <span class="hljs-string">'åŒ—äº¬'</span><span class="hljs-comment">;</span>
</code></pre>
<p>é€»è¾‘æ˜¯ï¼š</p>
<ol>
<li>å…ˆä» dim_user è¿‡æ»¤å‡ºåŒ—äº¬ç”¨æˆ·ï¼ˆå‡ åƒè¡Œï¼‰</li>
<li>å†ç”¨è¿™å‡ åƒä¸ª user_id å»å¤§è¡¨ dwd_order_detail èµ°ç´¢å¼•æŸ¥</li>
</ol>
<p>è¿™å°±æ˜¯å…¸å‹çš„ï¼š<br/>
ğŸ‘‰ <strong>ç»´è¡¨ï¼ˆå°è¡¨ï¼‰é©±åŠ¨ äº‹å®è¡¨ï¼ˆå¤§è¡¨ï¼‰</strong></p>
<hr/>
<p>ä¸€å¥è¯æ€»ç»“ï¼š</p>
<blockquote>
<p><strong>å°è¡¨é©±åŠ¨å¤§è¡¨ = è®©è¡Œæ•°å°‘ã€è¿‡æ»¤æ€§å¼ºçš„è¡¨åšå¤–å±‚å¾ªç¯ï¼Œç”¨å®ƒå»ç´¢å¼•æŸ¥å¤§è¡¨ï¼Œé¿å…å…¨è¡¨æ‰«æå’Œæ— æ„ä¹‰çš„å¤§é‡å¾ªç¯ã€‚</strong></p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ™®é€šFetchå’ŒFetch æµå¼çš„åŒºåˆ«ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7598818096753918003</link>    <guid>https://juejin.cn/post/7598818096753918003</guid>    <pubDate>2026-01-25T08:19:46.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7598818096753918003" data-draft-id="7598827641307775027" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ™®é€šFetchå’ŒFetch æµå¼çš„åŒºåˆ«ï¼Ÿ"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-25T08:19:46.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¨œå¦¹å­è¾£"/> <meta itemprop="url" content="https://juejin.cn/user/3421335918747976"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ™®é€šFetchå’ŒFetch æµå¼çš„åŒºåˆ«ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3421335918747976/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¨œå¦¹å­è¾£
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-25T08:19:46.000Z" title="Sun Jan 25 2026 08:19:46 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä½ æƒ³å¼„æ¸…æ¥š Fetch æµå¼çš„æ ¸å¿ƒå®šä¹‰ã€å·¥ä½œåŸç†å’Œå®é™…ä»·å€¼ï¼Œç®€å•æ¥è¯´ï¼Œ<strong>Fetch æµå¼æ˜¯ Fetch API æä¾›çš„ã€Œè¾¹æ¥æ”¶ã€è¾¹å¤„ç†ã€æ•°æ®çš„èƒ½åŠ›</strong>ï¼Œå®ƒè®©å‰ç«¯ä¸å†éœ€è¦ç­‰å¾…æœåŠ¡ç«¯è¿”å›å®Œæ•´çš„å“åº”æ•°æ®ï¼Œè€Œæ˜¯èƒ½é€å—è¯»å–ã€å¤„ç†æ•°æ®ï¼Œæ˜¯å‰ç«¯å¤„ç†å¤§æ–‡ä»¶ã€å®æ—¶æ•°æ®çš„æ ¸å¿ƒèƒ½åŠ›ä¹‹ä¸€ã€‚</p>
<hr/>
<h2 data-id="heading-0">ä¸€ã€Fetch æµå¼çš„æ ¸å¿ƒå®šä¹‰</h2>
<p>Fetch æµå¼ï¼ˆFetch Streamingï¼‰æ˜¯åŸºäºæµè§ˆå™¨åŸç”Ÿ <code>Fetch API</code> å®ç°çš„<strong>æµå¼æ•°æ®å¤„ç†èƒ½åŠ›</strong>ï¼š</p>
<ul>
<li>æ™®é€š Fetch è¯·æ±‚ï¼šæœåŠ¡ç«¯è¿”å›<strong>å®Œæ•´çš„å“åº”æ•°æ®</strong>ï¼Œå‰ç«¯ä¸€æ¬¡æ€§æ¥æ”¶æ‰€æœ‰æ•°æ®åæ‰èƒ½å¤„ç†ï¼ˆæ¯”å¦‚ <code>res.json()</code>/<code>res.text()</code> éƒ½æ˜¯ä¸€æ¬¡æ€§è§£æï¼‰ï¼›</li>
<li>Fetch æµå¼ï¼šæœåŠ¡ç«¯é€šè¿‡ HTTP Chunkedï¼ˆåˆ†å—ä¼ è¾“ç¼–ç ï¼‰è¿”å›æ•°æ®ï¼ŒFetch è¯·æ±‚çš„å“åº”ä½“ <code>response.body</code> ä¼šè¿”å› <code>ReadableStream</code>ï¼ˆå¯è¯»æµï¼‰å¯¹è±¡ï¼Œå‰ç«¯å¯ä»¥<strong>é€å—è¯»å–æœåŠ¡ç«¯å‘é€çš„ã€Œæ•°æ®å—ã€</strong>ï¼Œè¾¹æ¥æ”¶ã€è¾¹è§£æã€è¾¹å¤„ç†ï¼Œæ— éœ€ç­‰å¾…æ•´ä¸ªå“åº”å®Œæˆã€‚</li>
</ul>
<h3 data-id="heading-1">æ ¸å¿ƒåŸç†ï¼ˆä¸€å¥è¯è®²é€ï¼‰</h3>
<p>Fetch æµå¼çš„åº•å±‚æ˜¯ã€Œ<strong>HTTP åˆ†å—ä¼ è¾“ + æµè§ˆå™¨ Streams API</strong>ã€çš„ç»„åˆï¼š</p>
<ol>
<li>æœåŠ¡ç«¯å¼€å¯ HTTP Chunked ç¼–ç ï¼Œå°†æ•°æ®åˆ‡åˆ†æˆå¤šä¸ªç‹¬ç«‹çš„ã€Œæ•°æ®å—ã€ï¼Œé€ä¸ªå‘é€ç»™å‰ç«¯ï¼›</li>
<li>å‰ç«¯ Fetch æ‹¿åˆ°å“åº”åï¼Œ<code>response.body</code> æš´éœ²ä¸º <code>ReadableStream</code> å¯è¯»æµï¼›</li>
<li>å‰ç«¯é€šè¿‡æµçš„è¯»å–å™¨ï¼ˆ<code>reader</code>ï¼‰é€å—è¯»å–è¿™äº›æ•°æ®ï¼Œå®ç°æµå¼å¤„ç†ã€‚</li>
</ol>
<h2 data-id="heading-2">äºŒã€Fetch æµå¼çš„æ ¸å¿ƒç”¨æ³•ï¼ˆæç®€ä»£ç ç¤ºä¾‹ï¼‰</h2>
<p>Fetch æµå¼çš„æ ¸å¿ƒæ˜¯æ“ä½œ <code>response.body</code>ï¼ˆReadableStreamï¼‰ï¼Œä»¥ä¸‹æ˜¯æœ€å¸¸è§çš„ 2 ä¸ªåœºæ™¯ï¼š</p>
<h3 data-id="heading-3">åœºæ™¯ 1ï¼šæµå¼è¯»å–æ–‡æœ¬ / JSON æ•°æ®ï¼ˆæ¯”å¦‚å®æ—¶æ—¥å¿—ã€å¤§æ¨¡å‹æ‰“å­—æœºæ•ˆæœï¼‰</h3>
<p><strong>javascript</strong></p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">streamFetchText</span>(<span class="hljs-params">url</span>) {
  <span class="hljs-comment">// 1. å‘èµ· Fetch è¯·æ±‚</span>
  <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(url);
  
  <span class="hljs-comment">// æ ¡éªŒï¼šç¡®ä¿å“åº”æœ‰æ•ˆä¸”æ”¯æŒæµå¼ï¼ˆresponse.body æ˜¯ ReadableStreamï¼‰</span>
  <span class="hljs-keyword">if</span> (!response.<span class="hljs-property">ok</span> || !response.<span class="hljs-property">body</span>) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">"è¯·æ±‚å¤±è´¥æˆ–ä¸æ”¯æŒæµå¼å“åº”"</span>);
  }

  <span class="hljs-comment">// 2. è·å–æµçš„è¯»å–å™¨</span>
  <span class="hljs-keyword">const</span> reader = response.<span class="hljs-property">body</span>.<span class="hljs-title function_">getReader</span>();
  <span class="hljs-comment">// 3. äºŒè¿›åˆ¶æµè½¬æ–‡æœ¬çš„è§£ç å™¨ï¼ˆå…³é”®ï¼šstream: true ä¿è¯åˆ†å—è§£ç ä¸ä¹±ç ï¼‰</span>
  <span class="hljs-keyword">const</span> decoder = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TextDecoder</span>(<span class="hljs-string">"utf-8"</span>, { <span class="hljs-attr">stream</span>: <span class="hljs-literal">true</span> });

  <span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// 4. å¾ªç¯é€å—è¯»å–æ•°æ®ï¼ˆæµå¼æ ¸å¿ƒé€»è¾‘ï¼‰</span>
    <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
      <span class="hljs-comment">// done: æ˜¯å¦è¯»å–å®Œæˆï¼›value: å½“å‰æ•°æ®å—ï¼ˆUint8Array äºŒè¿›åˆ¶æ ¼å¼ï¼‰</span>
      <span class="hljs-keyword">const</span> { done, value } = <span class="hljs-keyword">await</span> reader.<span class="hljs-title function_">read</span>();
      
      <span class="hljs-keyword">if</span> (done) <span class="hljs-keyword">break</span>; <span class="hljs-comment">// è¯»å–å®Œæˆï¼Œé€€å‡ºå¾ªç¯</span>

      <span class="hljs-comment">// 5. å®æ—¶å¤„ç†å½“å‰æ•°æ®å—ï¼ˆæ¯”å¦‚æ¸²æŸ“åˆ°é¡µé¢ã€è§£æJSONï¼‰</span>
      <span class="hljs-keyword">const</span> chunkText = decoder.<span class="hljs-title function_">decode</span>(value);
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"å®æ—¶è¯»å–çš„å†…å®¹å—ï¼š"</span>, chunkText);
      <span class="hljs-comment">// ç¤ºä¾‹ï¼šå®æ—¶è¿½åŠ åˆ°é¡µé¢ï¼ˆæ¨¡æ‹Ÿå¤§æ¨¡å‹æ‰“å­—æœºæ•ˆæœï¼‰</span>
      <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">"content"</span>).<span class="hljs-property">textContent</span> += chunkText;
    }
  } <span class="hljs-keyword">finally</span> {
    <span class="hljs-comment">// 6. é‡Šæ”¾è¯»å–å™¨ï¼ˆå…³é”®ï¼šé¿å…å†…å­˜æ³„æ¼ï¼‰</span>
    reader.<span class="hljs-title function_">releaseLock</span>();
  }
}

<span class="hljs-comment">// è°ƒç”¨ç¤ºä¾‹ï¼ˆæ¯”å¦‚è¯·æ±‚è¿”å›æµå¼æ–‡æœ¬çš„æ¥å£ï¼‰</span>
<span class="hljs-title function_">streamFetchText</span>(<span class="hljs-string">"/api/stream-log"</span>);
</code></pre>
<h3 data-id="heading-4">åœºæ™¯ 2ï¼šæµå¼ä¸‹è½½å¤§æ–‡ä»¶ï¼ˆé¿å…å†…å­˜æº¢å‡ºï¼‰</h3>
<p><strong>javascript</strong></p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-ini" lang="ini">async function streamDownloadFile(url, fileName) {
  const <span class="hljs-attr">response</span> = await fetch(url)<span class="hljs-comment">;</span>
  if (!response.ok || !response.body) throw new Error("ä¸‹è½½å¤±è´¥")<span class="hljs-comment">;</span>

  // 1. å°†æµå¼å“åº”ä½“è½¬ä¸º Blobï¼ˆæµè§ˆå™¨è‡ªåŠ¨æ‹¼æ¥åˆ†å—æ•°æ®ï¼‰
  const <span class="hljs-attr">blob</span> = await new Response(response.body).blob()<span class="hljs-comment">;</span>
  // 2. åˆ›å»ºä¸‹è½½é“¾æ¥å¹¶è§¦å‘ä¸‹è½½
  const <span class="hljs-attr">downloadUrl</span> = URL.createObjectURL(blob)<span class="hljs-comment">;</span>
  const <span class="hljs-attr">a</span> = document.createElement(<span class="hljs-string">"a"</span>)<span class="hljs-comment">;</span>
  <span class="hljs-attr">a.href</span> = downloadUrl<span class="hljs-comment">;</span>
  <span class="hljs-attr">a.download</span> = fileName<span class="hljs-comment">;</span>
  a.click()<span class="hljs-comment">;</span>

  // 3. æ¸…ç†èµ„æº
  URL.revokeObjectURL(downloadUrl)<span class="hljs-comment">;</span>
}

// è°ƒç”¨ç¤ºä¾‹ï¼ˆä¸‹è½½1GB+çš„å¤§æ–‡ä»¶ï¼‰
streamDownloadFile("/api/download/large-file", "è¶…å¤§æ–‡ä»¶.zip")<span class="hljs-comment">;</span>
</code></pre>
<h2 data-id="heading-5">ä¸‰ã€Fetch æµå¼çš„æ ¸å¿ƒä½¿ç”¨åœºæ™¯</h2>
<ol>
<li><strong>å¤§æ–‡ä»¶ä¸‹è½½</strong>ï¼šä¸‹è½½ 100MB+ çš„æ–‡ä»¶æ—¶ï¼Œæµå¼ä¸‹è½½ä»…å ç”¨å°‘é‡å†…å­˜ï¼Œé¿å…ä¸€æ¬¡æ€§åŠ è½½å¯¼è‡´çš„é¡µé¢å¡é¡¿ / å†…å­˜æº¢å‡ºï¼›</li>
<li><strong>å®æ—¶æ•°æ®æ¥æ”¶</strong>ï¼šæ¥æ”¶æœåŠ¡ç«¯æ¨é€çš„å®æ—¶æ—¥å¿—ã€åå°ä»»åŠ¡è¿›åº¦ã€å¤§æ¨¡å‹çš„æµå¼å“åº”ï¼ˆæ‰“å­—æœºæ•ˆæœï¼‰ï¼›</li>
<li><strong>è¶…å¤§ JSON è§£æ</strong>ï¼šæœåŠ¡ç«¯è¿”å›ç™¾ä¸‡æ¡æ•°æ®çš„ JSON åˆ—è¡¨æ—¶ï¼Œæµå¼é€å—è§£æï¼Œå®æ—¶æ¸²æŸ“åˆ°é¡µé¢ï¼ˆæ¯”å¦‚è¡¨æ ¼ï¼‰ï¼›</li>
<li><strong>äºŒè¿›åˆ¶æµå¤„ç†</strong>ï¼šæµå¼è¯»å–å›¾ç‰‡ / è§†é¢‘ç­‰äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå®æ—¶é¢„è§ˆæˆ–å¤„ç†ï¼ˆæ¯”å¦‚å›¾ç‰‡å‹ç¼©ï¼‰ã€‚</li>
</ol>
<h2 data-id="heading-6">å››ã€Fetch æµå¼ vs æ™®é€š Fetch çš„æ ¸å¿ƒåŒºåˆ«</h2>



































<table><thead><tr><th><strong>ç»´åº¦</strong></th><th><strong>æ™®é€š Fetch</strong></th><th><strong>Fetch æµå¼</strong></th></tr></thead><tbody><tr><td>æ•°æ®æ¥æ”¶æ–¹å¼</td><td>ä¸€æ¬¡æ€§æ¥æ”¶å®Œæ•´å“åº”æ•°æ®</td><td>é€å—æ¥æ”¶æœåŠ¡ç«¯çš„åˆ†å—æ•°æ®</td></tr><tr><td>å“åº”ä½“ç±»å‹</td><td>éœ€é€šè¿‡ <code>res.json()</code>/<code>res.text()</code>ä¸€æ¬¡æ€§è§£æ</td><td><code>response.body</code>æ˜¯ ReadableStream å¯è¯»æµ</td></tr><tr><td>å†…å­˜å ç”¨</td><td>å®Œæ•´æ•°æ®å­˜å…¥å†…å­˜ï¼Œå¤§æ–‡ä»¶æ˜“æº¢å‡º</td><td>ä»…å ç”¨å½“å‰æ•°æ®å—çš„å†…å­˜ï¼Œå ç”¨æ’å®š</td></tr><tr><td>å¤„ç†æ—¶æœº</td><td>å¿…é¡»ç­‰å¾…å“åº”å®Œå…¨è¿”å›åæ‰èƒ½å¤„ç†</td><td>è¾¹æ¥æ”¶ã€è¾¹å¤„ç†ï¼Œå®æ—¶å“åº”</td></tr><tr><td>é€‚ç”¨åœºæ™¯</td><td>å°æ•°æ® / å°æ–‡ä»¶è¯·æ±‚</td><td>å¤§æ–‡ä»¶ã€å®æ—¶æ•°æ®ã€è¶…å¤§ JSON è¯·æ±‚</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-7">æ€»ç»“</h3>
<ol>
<li><strong>æ ¸å¿ƒæœ¬è´¨</strong>ï¼šFetch æµå¼æ˜¯ Fetch API ç»“åˆ HTTP Chunked åˆ†å—ä¼ è¾“ï¼Œé€šè¿‡ <code>response.body</code>ï¼ˆReadableStreamï¼‰å®ç°çš„é€å—æ•°æ®å¤„ç†èƒ½åŠ›ï¼›</li>
<li><strong>æ ¸å¿ƒä»·å€¼</strong>ï¼šè§£å†³å¤§æ–‡ä»¶ / å®æ—¶æ•°æ®ä¸€æ¬¡æ€§åŠ è½½å¯¼è‡´çš„ã€Œå†…å­˜æº¢å‡ºã€é¡µé¢å¡é¡¿ã€ç­‰å¾…æ—¶é—´é•¿ã€é—®é¢˜ï¼›</li>
<li><strong>æ ¸å¿ƒç”¨æ³•</strong>ï¼šé€šè¿‡ <code>reader.read()</code> å¾ªç¯è¯»å–æ•°æ®å—ï¼Œé…åˆ <code>TextDecoder</code> å¤„ç†æ–‡æœ¬ï¼Œæˆ–ç›´æ¥è½¬ä¸º Blob å®ç°æµå¼ä¸‹è½½ã€‚</li>
</ol>
<p>Fetch æµå¼æ˜¯å‰ç«¯æµå¼å¼€å‘çš„åŸºç¡€èƒ½åŠ›ï¼Œä¹Ÿæ˜¯é¢è¯•ä¸­é«˜é¢‘é—®åˆ°çš„è€ƒç‚¹ï¼Œæ ¸å¿ƒè®°ä½ã€Œ<code>response.body</code> æ˜¯ ReadableStreamã€ã€Œé€å—è¯»å–ã€ã€Œé‡Šæ”¾è¯»å–å™¨ã€è¿™ä¸‰ä¸ªå…³é”®ç‚¹å³å¯ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åç«¯ä¹Ÿèƒ½åšè¯­éŸ³è¯†åˆ«ï¼ŸSpring AI + OpenAI è½¬å½•çœŸé¦™]]></title>    <link>https://juejin.cn/post/7598818096753672243</link>    <guid>https://juejin.cn/post/7598818096753672243</guid>    <pubDate>2026-01-25T06:58:50.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7598818096753672243" data-draft-id="7598818096753655859" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åç«¯ä¹Ÿèƒ½åšè¯­éŸ³è¯†åˆ«ï¼ŸSpring AI + OpenAI è½¬å½•çœŸé¦™"/> <meta itemprop="keywords" content="åç«¯,Java,Spring"/> <meta itemprop="datePublished" content="2026-01-25T06:58:50.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è½¯ä»¶æ±‚ç”Ÿ"/> <meta itemprop="url" content="https://juejin.cn/user/1038379932466263"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åç«¯ä¹Ÿèƒ½åšè¯­éŸ³è¯†åˆ«ï¼ŸSpring AI + OpenAI è½¬å½•çœŸé¦™
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1038379932466263/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è½¯ä»¶æ±‚ç”Ÿ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-25T06:58:50.000Z" title="Sun Jan 25 2026 06:58:50 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>å‰é˜µå­æˆ‘åœ¨åœ°é“ä¸Šï¼Œæˆ´ç€è€³æœºå¬ä¸€æ®µä¼šè®®å½•éŸ³ã€‚40 å¤šåˆ†é’Ÿï¼Œä¸‰ä¸ªäººè½®æµå‘è¨€ï¼Œé‡ç‚¹é›¶é›¶æ•£æ•£ã€‚æˆ‘å¿ƒé‡Œæƒ³äº†ä¸€å¥éå¸¸â€œç¨‹åºå‘˜â€çš„è¯ï¼š</p>
<blockquote>
<p>è¦æ˜¯è¿™æ®µå½•éŸ³èƒ½è‡ªå·±å˜æˆæ–‡å­—ï¼Œè¿˜èƒ½å¸®æˆ‘æ•´ç†é‡ç‚¹å°±å¥½äº†ã€‚</p>
</blockquote>
<p>ç„¶åæˆ‘åˆæƒ³èµ·è‡ªå·±å¤©å¤©å†™ Javaã€å†™ Springï¼Œå´ä¸€ç›´åœ¨åš <strong>â€œè®©æœºå™¨è¯´è¯â€</strong> çš„äº‹æƒ…ï¼Œå¾ˆå°‘è®¤çœŸæƒ³è¿‡<strong>è®©æœºå™¨å¬è¯</strong>ï¼Œåˆ°åº•æœ‰å¤šéš¾ï¼Ÿ</p>
<p>äººç±»å¬ä¸€å¥è¯ï¼Œå…¶å®åšäº†å¾ˆå¤šäº‹ï¼š</p>
<ul>
<li>å¬æ¸…å‘éŸ³</li>
<li>åˆ¤æ–­è¯­è¨€</li>
<li>åˆ‡åˆ†è¯è¯­</li>
<li>ç†è§£ä¸Šä¸‹æ–‡</li>
<li>è¿‡æ»¤å™ªéŸ³</li>
</ul>
<p>è€Œåœ¨è®¡ç®—æœºä¸–ç•Œé‡Œï¼Œè¿™ä¸€æ•´å¥—èƒ½åŠ›ï¼Œæ›¾ç»æ˜¯<strong>éå¸¸æ˜‚è´µã€éå¸¸å¤æ‚ã€éå¸¸ä¸ç¨³å®š</strong>çš„ã€‚ç›´åˆ°æˆ‘ç¬¬ä¸€æ¬¡çœŸæ­£ç”¨ä¸Š <strong>OpenAI çš„ Whisper æ¨¡å‹</strong>ï¼Œå†é…åˆ <strong>Spring AI</strong>ï¼Œæˆ‘æ‰æ„è¯†åˆ°ï¼š</p>
<blockquote>
<p>åŸæ¥â€œå¬æ‡‚äººè¯â€ï¼Œå·²ç»è¢«å°è£…æˆäº†ä¸€ä¸ªæ™®é€šçš„ Spring èƒ½åŠ›ã€‚</p>
</blockquote>
<p>è¿™ç¯‡æ–‡ç« ï¼Œæˆ‘ä»¬å°±ä»è¿™ä¸ªæ•…äº‹ï¼Œæ…¢æ…¢æ‹†å¼€æ¥çœ‹ã€‚</p>
<h2 data-id="heading-0">Whisper æ˜¯è°ï¼Ÿå®ƒåœ¨æ•…äº‹é‡Œæ‰®æ¼”ä»€ä¹ˆè§’è‰²</h2>
<p>å¦‚æœæŠŠæ•´ä¸ªâ€œè¯­éŸ³è½¬æ–‡æœ¬â€çš„è¿‡ç¨‹æ¯”å–»æˆä¸€å®¶é¤å…ï¼š</p>
<ul>
<li>ä½ ï¼šç‚¹èœçš„äººï¼ˆä¸Šä¼ è¯­éŸ³ï¼‰</li>
<li>Spring AIï¼šå‰å°æœåŠ¡å‘˜</li>
<li>OpenAI APIï¼šåå¨</li>
<li><strong>Whisper</strong>ï¼šé‚£ä½èƒ½å¬æ‡‚å„ç§å£éŸ³ã€è¿˜èƒ½è‡ªåŠ¨è®°èœåçš„ç‹ç‰Œå¨å¸ˆ</li>
</ul>
<h2 data-id="heading-1">Whisper æ¨¡å‹æ˜¯å¹²å˜›çš„ï¼Ÿ</h2>
<p>ä¸€å¥è¯æ€»ç»“ï¼š</p>
<blockquote>
<p><strong>Whisper æ˜¯ OpenAI æä¾›çš„é€šç”¨è¯­éŸ³è¯†åˆ«æ¨¡å‹ï¼Œç”¨æ¥æŠŠè¯­éŸ³è½¬æˆæ–‡å­—ã€‚</strong></p>
</blockquote>
<p>ä½†å®ƒä¸åªæ˜¯â€œå¬å†™â€è¿™ä¹ˆç®€å•ã€‚å®ƒèƒ½åšçš„äº‹æƒ…åŒ…æ‹¬ï¼š</p>
<ul>
<li>è¯­éŸ³è½¬æ–‡æœ¬ï¼ˆSpeech â†’ Textï¼‰</li>
<li>å¤šè¯­è¨€è¯†åˆ«ï¼ˆè‡ªåŠ¨è¯†åˆ«ä¸­æ–‡ã€è‹±æ–‡ã€æ—¥æ–‡ç­‰ï¼‰</li>
<li>å£éŸ³é²æ£’ï¼ˆæ™®é€šè¯ã€å¸¦å£éŸ³ã€å˜ˆæ‚ç¯å¢ƒï¼‰</li>
<li>é•¿éŸ³é¢‘å¤„ç†</li>
<li>æ ‡ç‚¹ä¸æ–­å¥ï¼ˆç›¸å¯¹è‡ªç„¶ï¼‰</li>
</ul>
<p>ä½ å¯ä»¥æŠŠå®ƒç†è§£æˆï¼š</p>
<blockquote>
<p><strong>ä¸€ä¸ª 24 å°æ—¶ä¸å–Šç´¯ã€ä¸å«Œåµã€è¿˜èƒ½å¬æ‡‚å¤šå›½è¯­è¨€çš„ä¼šè®®è®°å½•å‘˜ã€‚</strong></p>
</blockquote>
<p>è€Œ Spring AI åšçš„äº‹æƒ…ï¼Œå°±æ˜¯<strong>è®©ä½ åœ¨ Spring é‡Œç”¨ Whisperï¼Œåƒç”¨ RedisTemplate ä¸€æ ·è‡ªç„¶ã€‚</strong></p>
<h2 data-id="heading-2">ç¬¬ä¸€å¹•ï¼šç”¨ Whisper åšè¯­éŸ³è½¬æ–‡æœ¬ï¼ˆæ ¸å¿ƒèƒ½åŠ›ï¼‰</h2>
<p>å…ˆè¯´ç»“è®ºï¼Œå†è®²ç»†èŠ‚ã€‚åœ¨ Spring AI é‡Œï¼Œç”¨ OpenAI çš„ Whisper æ¨¡å‹åšè½¬å½•ï¼Œæœ¬è´¨å°±æ˜¯ä¸€å¥è¯ï¼š</p>
<blockquote>
<p><strong>æŠŠéŸ³é¢‘æ–‡ä»¶äº¤ç»™ OpenAIï¼Œç”± Whisper è¿”å›æ–‡æœ¬ç»“æœã€‚</strong></p>
</blockquote>
<p>ä½†åœ¨å·¥ç¨‹ä¸–ç•Œé‡Œï¼Œæˆ‘ä»¬æ›´å…³å¿ƒå››ä¸ªé—®é¢˜ï¼š</p>
<ol>
<li>æ”¯æŒä»€ä¹ˆéŸ³é¢‘æ ¼å¼ï¼Ÿ</li>
<li>è½¬å½•ç»“æœé•¿ä»€ä¹ˆæ ·ï¼Ÿ</li>
<li>èƒ½ä¸èƒ½æ§åˆ¶è¯­è¨€ã€æç¤ºè¯ï¼Ÿ</li>
<li>Spring é‡Œæ€ä¹ˆç”¨æ‰â€œä¼˜é›…â€ï¼Ÿ</li>
</ol>
<p>è¿™äº›ï¼ŒSpring AI éƒ½å·²ç»å¸®ä½ æƒ³è¿‡äº†ã€‚</p>
<h2 data-id="heading-3">ç¬¬äºŒå¹•ï¼šé…ç½® â€”â€” æŠŠâ€œè€³æœµâ€æ¥ä¸Šå»</h2>
<p>æ•…äº‹è®²åˆ°è¿™ä¸€æ­¥ï¼Œç›¸å½“äºé¤å…è¦å¼€ä¸šäº†ã€‚å¨å¸ˆå†ç‰›ï¼Œæ²¡æœ‰å¨æˆ¿ä¹Ÿç™½æ­ã€‚</p>
<p><strong>1. Maven ä¾èµ–</strong></p>
<p>åœ¨ Spring Boot é¡¹ç›®é‡Œï¼Œå¼•å…¥ Spring AI çš„ OpenAI Starterï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f02af42100364be68a1fb1eb5d3a577b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2v5Lu25rGC55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769929130&amp;x-signature=6HIHZTxf2tIvfdI4bAHcUfX%2Bwt4%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>è¿™ä¸ª Starter åšäº†ä¸‰ä»¶äº‹ï¼š</p>
<ul>
<li>è‡ªåŠ¨é…ç½® OpenAI Client</li>
<li>ç®¡ç† API Key</li>
<li>æš´éœ²è½¬å½•ã€å¯¹è¯ç­‰æ ¸å¿ƒæ¥å£</li>
</ul>
<p>ä½ ä¸ç”¨è‡ªå·±æ‹¼ HTTP è¯·æ±‚ï¼Œä¹Ÿä¸ç”¨å…³å¿ƒ JSON ç»“æ„ã€‚</p>
<p><strong>2. application.yml é…ç½®</strong></p>
<p>æ¥ä¸‹æ¥æ˜¯æœ€ç†Ÿæ‚‰çš„ Spring ç¯èŠ‚ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e0c0255e993541ed8612356f793f85c4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2v5Lu25rGC55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769929130&amp;x-signature=028PlpcYfDHkRxxo8QOFn%2B2%2F8L4%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>è¿™é‡Œæœ‰ä¸‰ä¸ªå…³é”®ä¿¡æ¯ï¼š</p>
<ul>
<li><strong>api-key</strong>ï¼šOpenAI å¯†é’¥</li>
<li><strong>audio.transcription</strong>ï¼šå‘Šè¯‰ Springï¼Œæˆ‘ä»¬è¦ç”¨â€œè½¬å½•èƒ½åŠ›â€</li>
<li><strong>model</strong>ï¼šæŒ‡å®š Whisper æ¨¡å‹ï¼ˆç›®å‰å®˜æ–¹å°±æ˜¯ whisper-1ï¼‰</li>
</ul>
<p>å¦‚æœä½ æŠŠ Spring AI æƒ³è±¡æˆä¸€ä¸ªæ”¶éŸ³æœºï¼Œé‚£è¿™ä¸€æ­¥å°±æ˜¯ï¼šæ’ä¸Šç”µæºï¼Œè°ƒå¥½é¢‘é“ã€‚</p>
<h2 data-id="heading-4">ç¬¬ä¸‰å¹•ï¼šå±æ€§ â€”â€” æ§åˆ¶â€œå¬å¾—å¤šä»”ç»†â€</h2>
<p>æœ‰äº†åŸºæœ¬é…ç½®ï¼Œä½ å·²ç»èƒ½è½¬å½•è¯­éŸ³äº†ã€‚ä½†çœŸæ­£å†™è¿‡ä¸šåŠ¡çš„äººéƒ½çŸ¥é“ï¼š</p>
<blockquote>
<p>èƒ½è·‘ï¼Œå’Œèƒ½ç”¨ï¼Œæ˜¯ä¸¤å›äº‹ã€‚</p>
</blockquote>
<p>Spring AI åœ¨è½¬å½•è¿™ä»¶äº‹ä¸Šï¼Œç»™ä½ æš´éœ²äº†ä¸å°‘<strong>å¯æ§å±æ€§</strong>ã€‚</p>
<p><strong>1. å¸¸è§è½¬å½•å±æ€§</strong></p>
<p>åœ¨ Java ä¾§ï¼Œä½ å¯ä»¥é€šè¿‡è¯·æ±‚å‚æ•°æ§åˆ¶è¡Œä¸ºï¼Œæ¯”å¦‚ï¼š</p>
<ul>
<li>languageï¼šæŒ‡å®šè¯­è¨€</li>
<li>promptï¼šç»™æ¨¡å‹ä¸€ç‚¹ä¸Šä¸‹æ–‡æç¤º</li>
<li>responseFormatï¼šè¿”å›æ ¼å¼</li>
<li>temperatureï¼šéšæœºç¨‹åº¦</li>
</ul>
<p>è¿™äº›å‚æ•°ï¼Œå°±åƒä½ åœ¨å¯¹è®°å½•å‘˜è¯´ï¼šâ€œè¿™æ˜¯ä¸­æ–‡ä¼šè®®ï¼Œé‡ç‚¹æ˜¯æŠ€æœ¯æ–¹æ¡ˆï¼Œå°½é‡æ•´ç†æ¸…æ¥šã€‚â€</p>
<p><strong>2. å±æ€§çš„æ„ä¹‰ï¼ˆæ•…äº‹ç‰ˆç†è§£ï¼‰</strong></p>
<p>æˆ‘ç‰¹åˆ«å–œæ¬¢ç”¨ä¸€ä¸ªæ¯”å–»æ¥ç†è§£è¿™äº›å±æ€§ã€‚</p>
<ul>
<li><strong>language</strong>ï¼šå‘Šè¯‰ä»–â€œè¿™æ˜¯å“ªå›½è¯â€</li>
<li><strong>prompt</strong>ï¼šæå‰ç»™ä»–ä¸€ä»½ä¼šè®®èƒŒæ™¯</li>
<li><strong>temperature</strong>ï¼šå…è®¸ä¸å…è®¸è‡ªç”±å‘æŒ¥</li>
<li><strong>responseFormat</strong>ï¼šä½ è¦è‰ç¨¿ï¼Œè¿˜æ˜¯æ­£å¼æ–‡æ¡£</li>
</ul>
<p>è¿™ä¸€æ­¥ï¼Œå…¶å®å†³å®šäº† Whisper æ˜¯â€œéšä¾¿è®°è®°â€ï¼Œè¿˜æ˜¯â€œè®¤çœŸæ•´ç†â€ã€‚</p>
<h2 data-id="heading-5">ç¬¬å››å¹•ï¼šç”¨æ³• â€”â€” çœŸæ­£åœ¨ Spring é‡Œâ€œå¬éŸ³é¢‘â€</h2>
<p>å¥½äº†ï¼Œæ•…äº‹è¿›å…¥é«˜æ½®ã€‚</p>
<p><strong>1. æ³¨å…¥è½¬å½•å®¢æˆ·ç«¯</strong></p>
<p>åœ¨ Spring Boot ä¸­ï¼Œä½ åªéœ€è¦æ³¨å…¥å¯¹åº”çš„ Beanï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d8b767f6ba9f47ab9caa1c0a150f8a37~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2v5Lu25rGC55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769929130&amp;x-signature=xn3BVMoFB%2B4vuOxR5Ynso9BO%2BCM%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>è¿™ä¸€æ­¥éå¸¸â€œSpringâ€ï¼Œå®Œå…¨æ²¡æœ‰ä¾µå…¥æ„Ÿã€‚</p>
<p><strong>2. è¿›è¡Œä¸€æ¬¡è¯­éŸ³è½¬æ–‡æœ¬</strong></p>
<p>å‡è®¾ä½ æœ‰ä¸€ä¸ªéŸ³é¢‘æ–‡ä»¶ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/da06be68e2ed49208f049ad64e1bb712~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2v5Lu25rGC55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769929130&amp;x-signature=PeU7zzKIwzcl4t4j6HJuaS7k3Pk%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>å°±è¿™ä¹ˆç®€å•ã€‚æ²¡æœ‰ HTTPï¼Œæ²¡æœ‰ JSONï¼Œæ²¡æœ‰æ‰‹å†™ SDKã€‚ä½ å¯ä»¥æŠŠè¿™ä¸€è¡Œä»£ç ç†è§£æˆï¼š</p>
<blockquote>
<p>æŠŠå½•éŸ³æ‰”ç»™ä¸€ä¸ªè¶…çº§ä¼šå¬è¯çš„ Beanï¼Œå®ƒè¿˜ä½ ä¸€ä»½æ–‡å­—ç¨¿ã€‚</p>
</blockquote>
<p><strong>3. åŠ ç‚¹â€œä¸šåŠ¡å‘³é“â€</strong></p>
<p>çœŸå®é¡¹ç›®é‡Œï¼Œæˆ‘ä»¬å¾€å¾€ä¼šè¿™ä¹ˆç”¨ï¼š</p>
<ul>
<li>ç”¨æˆ·ä¸Šä¼ è¯­éŸ³</li>
<li>åç«¯è½¬æˆæ–‡æœ¬</li>
<li>å†äº¤ç»™ Chat æ¨¡å‹åšæ€»ç»“</li>
<li>æœ€åç”Ÿæˆä¼šè®®çºªè¦ / ç¬”è®° / å·¥å•</li>
</ul>
<p>Whisper å¾ˆå°‘æ˜¯ç»ˆç‚¹ï¼Œå®ƒæ›´åƒæ˜¯<strong>AI é“¾è·¯é‡Œçš„ç¬¬ä¸€ç«™</strong>ã€‚</p>
<h2 data-id="heading-6">ä¸€æ¬¡å®Œæ•´é“¾è·¯çš„æ•…äº‹ï¼ˆéå¸¸çœŸå®ï¼‰</h2>
<p>æˆ‘æœ€åè®²ä¸€ä¸ªæˆ‘è‡ªå·±ç‰¹åˆ«å–œæ¬¢çš„åœºæ™¯ã€‚æƒ³è±¡ä¸€ä¸‹è¿™ä¸ªç³»ç»Ÿï¼š</p>
<ol>
<li>ç”¨æˆ·ç”¨æ‰‹æœºå½•ä¸€æ®µè¯­éŸ³</li>
<li>åç«¯ç”¨ Whisper è½¬æˆæ–‡æœ¬</li>
<li>å†ç”¨ GPT æ€»ç»“æˆä¸‰ç‚¹ç»“è®º</li>
<li>è‡ªåŠ¨ç”Ÿæˆä¸€æ¡â€œä¼šè®®æ€»ç»“â€</li>
</ol>
<p>åœ¨ä¼ ç»Ÿç³»ç»Ÿé‡Œï¼Œè¿™æ˜¯ä¸€ä¸ªå·¨å¤§çš„å·¥ç¨‹ã€‚è€Œåœ¨ Spring AI é‡Œï¼Œå®ƒæ›´åƒï¼šä¸€ä¸ªæ ‡å‡†çš„ Bean è°ƒç”¨é“¾ã€‚</p>
<p>Whisper å¬ï¼ŒGPT æƒ³ï¼ŒSpring ä¸²èµ·æ¥ã€‚</p>
<h2 data-id="heading-7">æ€»ç»“ï¼šä¸ºä»€ä¹ˆæˆ‘è§‰å¾— Spring AI + Whisper å¾ˆé‡è¦</h2>
<p>æˆ‘å†™è¿™ç¯‡æ–‡ç« ï¼Œä¸æ˜¯ä¸ºäº†å‘Šè¯‰ä½ â€œæ€ä¹ˆè°ƒä¸€ä¸ª APIâ€ã€‚è€Œæ˜¯æƒ³åˆ†äº«ä¸€ç§å¾ˆçœŸå®çš„æ„Ÿå—ï¼š</p>
<blockquote>
<p><strong>æˆ‘ä»¬ç¬¬ä¸€æ¬¡ï¼Œèƒ½ç”¨ç†Ÿæ‚‰çš„ Spring æ–¹å¼ï¼Œå»åšâ€œç†è§£ä¸–ç•Œâ€çš„äº‹æƒ…ã€‚</strong></p>
</blockquote>
<p>è¿‡å»çš„ Springï¼Œæ“…é•¿çš„æ˜¯ï¼š</p>
<ul>
<li>äº‹åŠ¡</li>
<li>è¿æ¥æ± </li>
<li>RPC</li>
<li>æ•°æ®ä¸€è‡´æ€§</li>
</ul>
<p>è€Œä»Šå¤©çš„ Spring AIï¼Œå¼€å§‹æ“…é•¿ï¼š</p>
<ul>
<li>å¬æ‡‚äººè¯´è¯</li>
<li>ç†è§£è‡ªç„¶è¯­è¨€</li>
<li>æŠŠâ€œéç»“æ„åŒ–â€å˜æˆâ€œç»“æ„åŒ–â€</li>
</ul>
<p>Whisper å¹¶ä¸æ˜¯ä¸€ä¸ªç‚«æŠ€æ¨¡å‹ï¼Œå®ƒéå¸¸â€œå·¥ç¨‹å‹å¥½â€ã€‚å®ƒè®©â€œè¯­éŸ³è½¬æ–‡æœ¬â€è¿™ä»¶äº‹ï¼Œä»ä¸€ä¸ª AI ç ”ç©¶é—®é¢˜ï¼Œå˜æˆäº†ï¼šä¸€ä¸ªæ™®é€šåç«¯å·¥ç¨‹å¸ˆï¼Œä¹Ÿèƒ½å®‰å¿ƒä½¿ç”¨çš„åŸºç¡€èƒ½åŠ›ã€‚</p>
<h2 data-id="heading-8">END</h2>
<p>å¦‚æœä½ å·²ç»åœ¨ç”¨ Spring Bootï¼Œå¦‚æœä½ å·²ç»åœ¨å…³æ³¨ AI èƒ½åŠ›è½åœ°ï¼Œé‚£ <strong>springAI + OpenAI è½¬å½•</strong>ï¼ŒçœŸçš„å€¼å¾—ä½ è®¤çœŸç©ä¸€æ¬¡ã€‚</p>
<p>ä¸‹æ¬¡ä½ å†å¬ä¸€æ®µä¼šè®®å½•éŸ³çš„æ—¶å€™ï¼Œä¹Ÿè®¸å¯ä»¥å’Œæˆ‘ä¸€æ ·ï¼Œé»˜é»˜åœ¨å¿ƒé‡Œè¯´ä¸€å¥ï¼šâ€œè¿™äº‹å„¿ï¼Œä»£ç å…¶å®ä¹Ÿèƒ½å¹²ã€‚â€</p>
<p>æˆ‘ä»¬ä¸‹ç¯‡å†èŠã€‚</p>
<p>æˆ‘æ˜¯å°ç±³ï¼Œä¸€ä¸ªå–œæ¬¢åˆ†äº«æŠ€æœ¯çš„31å²ç¨‹åºå‘˜ã€‚å¦‚æœä½ å–œæ¬¢æˆ‘çš„æ–‡ç« ï¼Œæ¬¢è¿å…³æ³¨æˆ‘çš„å¾®ä¿¡å…¬ä¼—å·â€œ<strong>è½¯ä»¶æ±‚ç”Ÿ</strong>â€ï¼Œè·å–æ›´å¤šæŠ€æœ¯å¹²è´§ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[KVC / KVO ä¸ ivar / property çš„åº•å±‚å…³ç³»]]></title>    <link>https://juejin.cn/post/7598587406707687465</link>    <guid>https://juejin.cn/post/7598587406707687465</guid>    <pubDate>2026-01-25T08:20:59.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7598587406707687465" data-draft-id="7598737609493807123" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="KVC / KVO ä¸ ivar / property çš„åº•å±‚å…³ç³»"/> <meta itemprop="keywords" content="iOS"/> <meta itemprop="datePublished" content="2026-01-25T08:20:59.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ±‰ç§‹"/> <meta itemprop="url" content="https://juejin.cn/user/3755587450191879"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            KVC / KVO ä¸ ivar / property çš„åº•å±‚å…³ç³»
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3755587450191879/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ±‰ç§‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-25T08:20:59.000Z" title="Sun Jan 25 2026 08:20:59 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>KVC / KVO ä¸ ivar / property çš„åº•å±‚å…³ç³»</strong></h2>
<blockquote>
<p>å…³é”®è¯ï¼šKVCã€KVOã€ivarã€propertyã€Runtimeã€isa-swizzling</p>
</blockquote>
<hr/>
<h3 data-id="heading-1"><strong>ä¸€ã€ä¸ºä»€ä¹ˆ KVC / KVO ä¸€å®šè¦å’Œ ivar / property ä¸€èµ·ç†è§£</strong></h3>
<p>åœ¨ Objective-C ä¸­ï¼š</p>
<ul>
<li>
<p><strong>ivar æ˜¯æ•°æ®çš„çœŸå®å­˜å‚¨</strong></p>
</li>
<li>
<p><strong>property æ˜¯è®¿é—® ivar çš„è§„åˆ™</strong></p>
</li>
<li>
<p><strong>KVC / KVO æœ¬è´¨ä¸Šéƒ½æ˜¯â€œè®¿é—®è§„åˆ™ä¹‹ä¸Šçš„æœºåˆ¶â€</strong></p>
</li>
</ul>
<blockquote>
<p>å¦‚æœä¸ç†è§£ ivar å’Œ propertyï¼Œå°±ä¸€å®šç†è§£ä¸æ¸… KVC / KVO</p>
</blockquote>
<hr/>
<h3 data-id="heading-2"><strong>äºŒã€KVCï¼ˆKey-Value Codingï¼‰åº•å±‚åŸç†</strong></h3>
<h4 data-id="heading-3"><strong>1ï¸âƒ£ ä»€ä¹ˆæ˜¯ KVC</strong></h4>
<p>KVC æ˜¯ä¸€ç§ï¼š</p>
<blockquote>
<p><strong>é€šè¿‡å­—ç¬¦ä¸² key é—´æ¥è®¿é—®å¯¹è±¡å±æ€§çš„æœºåˆ¶</strong></p>
</blockquote>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-section">[person setValue:@"Hanqiu" forKey:@"name"]</span><span class="hljs-comment">;</span>
NSString *<span class="hljs-attr">name</span> = [person valueForKey:@<span class="hljs-string">"name"</span>]<span class="hljs-comment">;</span>
</code></pre>
<hr/>
<h4 data-id="heading-4"><strong>2ï¸âƒ£ KVC çš„æœ¬è´¨</strong></h4>
<ul>
<li>
<p>æœ¬è´¨æ˜¯ <strong>ä¸€å¥—æŸ¥æ‰¾è§„åˆ™</strong></p>
</li>
<li>
<p>æœ€ç»ˆç»“æœï¼š</p>
<ul>
<li>
<p>è¦ä¹ˆè°ƒç”¨æ–¹æ³•</p>
</li>
<li>
<p>è¦ä¹ˆç›´æ¥è®¿é—® ivar</p>
</li>
</ul>
</li>
</ul>
<blockquote>
<p>ğŸ“Œ KVC å¹¶ä¸ä¾èµ– property æ˜¯å¦å­˜åœ¨</p>
</blockquote>
<hr/>
<h4 data-id="heading-5"><strong>3ï¸âƒ£ KVC çš„ setValue:forKey: æŸ¥æ‰¾é¡ºåºï¼ˆé‡ç‚¹ï¼‰</strong></h4>
<p>å½“æ‰§è¡Œï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp">[<span class="hljs-meta">person setValue:value forKey:@<span class="hljs-string">"name"</span></span>];
</code></pre>
<p>æŸ¥æ‰¾é¡ºåºå¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">1. setName:</span>
<span class="hljs-attr">2. _setName:</span>
<span class="hljs-number">3</span><span class="hljs-string">.</span> <span class="hljs-string">+accessInstanceVariablesDirectly</span> <span class="hljs-string">==</span> <span class="hljs-literal">YES</span> <span class="hljs-string">?</span>
   <span class="hljs-number">3.1</span> <span class="hljs-string">_name</span>
   <span class="hljs-number">3.2</span> <span class="hljs-string">_isName</span>
   <span class="hljs-number">3.3</span> <span class="hljs-string">name</span>
   <span class="hljs-number">3.4</span> <span class="hljs-string">isName</span>
<span class="hljs-number">4</span><span class="hljs-string">.</span> <span class="hljs-string">è°ƒç”¨</span> <span class="hljs-attr">setValue:forUndefinedKey:</span>
</code></pre>
<h4 data-id="heading-6"><strong>âš ï¸ å…³é”®ç‚¹</strong></h4>
<ul>
<li>é»˜è®¤ +accessInstanceVariablesDirectly è¿”å› YES</li>
<li><strong>KVC å¯ä»¥ç»•è¿‡ setterï¼Œç›´æ¥æ”¹ ivar</strong></li>
</ul>
<hr/>
<h4 data-id="heading-7"><strong>4ï¸âƒ£ KVC çš„ valueForKey: æŸ¥æ‰¾é¡ºåº</strong></h4>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-bullet">1.</span> getName
<span class="hljs-bullet">2.</span> name
<span class="hljs-bullet">3.</span> isName
<span class="hljs-bullet">4.</span> <span class="hljs-emphasis">_name
5. _</span>isName
<span class="hljs-bullet">6.</span> è°ƒç”¨ valueForUndefinedKey:
</code></pre>
<hr/>
<h4 data-id="heading-8"><strong>5ï¸âƒ£ KVC ä¸ ivar / property çš„å…³ç³»æ€»ç»“</strong></h4>

























<table><thead><tr><th><strong>åœºæ™¯</strong></th><th><strong>æ˜¯å¦éœ€è¦ property</strong></th><th><strong>æ˜¯å¦è®¿é—® ivar</strong></th></tr></thead><tbody><tr><td>å­˜åœ¨ setter</td><td>âŒ</td><td>âŒ</td></tr><tr><td>æ—  setter</td><td>âŒ</td><td>âœ…</td></tr><tr><td>æ—  ivar</td><td>âŒ</td><td>âŒï¼ˆå´©æºƒï¼‰</td></tr></tbody></table>
<blockquote>
<p><strong>KVC æ˜¯â€œæ–¹æ³•ä¼˜å…ˆï¼Œivar å…œåº•â€çš„æœºåˆ¶</strong>****</p>
</blockquote>
<hr/>
<h3 data-id="heading-9"><strong>ä¸‰ã€KVOï¼ˆKey-Value Observingï¼‰åº•å±‚åŸç†</strong></h3>
<h4 data-id="heading-10"><strong>1ï¸âƒ£ ä»€ä¹ˆæ˜¯ KVO</strong></h4>
<p>KVO æ˜¯ä¸€ç§ï¼š</p>
<blockquote>
<p><strong>ç›‘å¬å±æ€§å˜åŒ–çš„è§‚å¯Ÿæœºåˆ¶</strong></p>
</blockquote>
<pre><code class="hljs language-objectivec" lang="objectivec">[person addObserver:<span class="hljs-keyword">self</span>
         forKeyPath:<span class="hljs-string">@"name"</span>
            options:<span class="hljs-built_in">NSKeyValueObservingOptionNew</span>
            context:<span class="hljs-literal">nil</span>];
</code></pre>
<hr/>
<h4 data-id="heading-11"><strong>2ï¸âƒ£ KVO çš„æœ¬è´¨ï¼ˆä¸€å¥è¯ï¼‰</strong></h4>
<blockquote>
<p><strong>KVO ç›‘å¬çš„æ˜¯ setter çš„è°ƒç”¨ï¼Œè€Œä¸æ˜¯ ivar çš„å˜åŒ–</strong></p>
</blockquote>
<hr/>
<h4 data-id="heading-12"><strong>3ï¸âƒ£ KVO çš„åº•å±‚å®ç°æœºåˆ¶ï¼ˆæ ¸å¿ƒï¼‰</strong></h4>
<p>å½“ç¬¬ä¸€æ¬¡æ·»åŠ è§‚å¯Ÿè€…æ—¶ï¼Œç³»ç»Ÿä¼šï¼š</p>
<ol>
<li><strong>åŠ¨æ€ç”Ÿæˆä¸€ä¸ªå­ç±»</strong>ï¼ˆNSKVONotifying_XXXï¼‰</li>
<li>ä¿®æ”¹å¯¹è±¡çš„ isa æŒ‡é’ˆï¼ˆisa-swizzlingï¼‰</li>
<li>åœ¨å­ç±»ä¸­é‡å†™ setter</li>
</ol>
<pre><code class="hljs language-objectivec" lang="objectivec">Person
  â†‘ isa
<span class="hljs-built_in">NSKVONotifying_Person</span>
</code></pre>
<hr/>
<h4 data-id="heading-13"><strong>4ï¸âƒ£ é‡å†™çš„ setter åšäº†ä»€ä¹ˆ</strong></h4>
<p>ä¼ªä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp">- (<span class="hljs-keyword">void</span>)setName:(id)<span class="hljs-keyword">value</span> {
    [<span class="hljs-meta">self willChangeValueForKey:@<span class="hljs-string">"name"</span></span>];
    [<span class="hljs-meta">super setName:value</span>];
    [<span class="hljs-meta">self didChangeValueForKey:@<span class="hljs-string">"name"</span></span>];
}
</code></pre>
<p>ğŸ‘‰ <strong>é€šçŸ¥å‘ç”Ÿåœ¨ setter å†…éƒ¨</strong></p>
<hr/>
<h4 data-id="heading-14"><strong>5ï¸âƒ£ ä¸ºä»€ä¹ˆç›´æ¥ä¿®æ”¹ ivar ä¸è§¦å‘ KVO</strong></h4>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">_name</span> = @<span class="hljs-string">"A"</span><span class="hljs-comment">;      // âŒ ä¸è§¦å‘ KVO</span>
<span class="hljs-attr">self.name</span> = @<span class="hljs-string">"B"</span><span class="hljs-comment">; // âœ… è§¦å‘ KVO</span>
</code></pre>
<p>åŸå› ï¼š</p>
<ul>
<li>ivar èµ‹å€¼ä¸èµ° setter</li>
<li>KVO æ ¹æœ¬æ— æ³•æ„ŸçŸ¥</li>
</ul>
<hr/>
<h3 data-id="heading-15"><strong>å››ã€KVO ä¸ property / ivar çš„å¼ºå…³è”å…³ç³»</strong></h3>
<h4 data-id="heading-16"><strong>1ï¸âƒ£ KVO æ˜¯å¦ä¾èµ– propertyï¼Ÿ</strong></h4>





















<table><thead><tr><th><strong>æƒ…å†µ</strong></th><th><strong>æ˜¯å¦æ”¯æŒ KVO</strong></th></tr></thead><tbody><tr><td>æœ‰ setter</td><td>âœ…</td></tr><tr><td>åªæœ‰ ivar</td><td>âŒ</td></tr><tr><td>Category property + Associated Object</td><td>âš ï¸ï¼ˆå¯è¡Œä½†å±é™©ï¼‰</td></tr></tbody></table>
<blockquote>
<p>ğŸ“Œ <strong>KVO å®é™…ä¾èµ–çš„æ˜¯ setterï¼Œè€Œä¸æ˜¯ property å…³é”®å­—</strong></p>
</blockquote>
<hr/>
<h4 data-id="heading-17"><strong>2ï¸âƒ£ æ‰‹åŠ¨è§¦å‘ KVO</strong></h4>
<p>å¦‚æœä½ å¿…é¡»ç›´æ¥æ”¹ ivarï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-section">[self willChangeValueForKey:@"name"]</span><span class="hljs-comment">;</span>
<span class="hljs-attr">_name</span> = @<span class="hljs-string">"C"</span><span class="hljs-comment">;</span>
<span class="hljs-section">[self didChangeValueForKey:@"name"]</span><span class="hljs-comment">;</span>
</code></pre>
<hr/>
<h3 data-id="heading-18"><strong>äº”ã€KVC + KVO è”åˆåœºæ™¯åˆ†æï¼ˆé«˜é¢‘é¢è¯•ï¼‰</strong></h3>
<h4 data-id="heading-19"><strong>åœºæ™¯ï¼šç”¨ KVC ä¿®æ”¹å±æ€§ï¼Œæ˜¯å¦è§¦å‘ KVOï¼Ÿ</strong></h4>
<pre><code class="hljs language-csharp" lang="csharp">[<span class="hljs-meta">person setValue:@<span class="hljs-string">"D"</span> forKey:@<span class="hljs-string">"name"</span></span>];
</code></pre>
<p>ç»“è®ºï¼š</p>
<ul>
<li>
<p>å¦‚æœæœ€ç»ˆè°ƒç”¨ setter â†’ âœ… è§¦å‘ KVO</p>
</li>
<li>
<p>å¦‚æœç›´æ¥å‘½ä¸­ ivar â†’ âŒ ä¸è§¦å‘</p>
</li>
</ul>
<blockquote>
<p>æ˜¯å¦è§¦å‘ï¼Œå–å†³äº <strong>KVC æŸ¥æ‰¾è·¯å¾„</strong></p>
</blockquote>
<hr/>
<h3 data-id="heading-20"><strong>å…­ã€Runtime è§†è§’çœ‹ KVC / KVO</strong></h3>
<h4 data-id="heading-21"><strong>1ï¸âƒ£ KVC ä½¿ç”¨çš„ Runtime èƒ½åŠ›</strong></h4>
<ul>
<li>objc_msgSend</li>
<li>class_getInstanceVariable</li>
<li>object_setIvar</li>
</ul>
<hr/>
<h4 data-id="heading-22"><strong>2ï¸âƒ£ KVO ä½¿ç”¨çš„ Runtime èƒ½åŠ›</strong></h4>
<ul>
<li>objc_allocateClassPair</li>
<li>object_setClass</li>
<li>åŠ¨æ€æ–¹æ³•é‡å†™</li>
</ul>
<hr/>
<h3 data-id="heading-23"><strong>ä¸ƒã€å¸¸è§é¢è¯•é™·é˜±æ€»ç»“</strong></h3>
<h4 data-id="heading-24"><strong>âŒ è¯¯åŒº 1ï¼šKVO ç›‘å¬çš„æ˜¯ ivar</strong></h4>
<p>âŒ é”™</p>
<p>âœ” ç›‘å¬çš„æ˜¯ <strong>setter çš„è°ƒç”¨</strong></p>
<hr/>
<h4 data-id="heading-25"><strong>âŒ è¯¯åŒº 2ï¼šæ²¡æœ‰ property å°±ä¸èƒ½ KVO</strong></h4>
<p>âŒ é”™</p>
<p>âœ” åªè¦æœ‰ setter æ–¹æ³•å³å¯</p>
<hr/>
<h4 data-id="heading-26"><strong>âŒ è¯¯åŒº 3ï¼šKVC ä¸€å®šä¼šè§¦å‘ KVO</strong></h4>
<p>âŒ é”™</p>
<p>âœ” æ˜¯å¦è§¦å‘å–å†³äºæ˜¯å¦è°ƒç”¨ setter</p>
<hr/>
<h3 data-id="heading-27"><strong>å…«ã€ä¸€å¼ å…³ç³»æ€»å›¾ï¼ˆæ–‡å­—ç‰ˆï¼‰</strong></h3>
<pre><code class="hljs language-objectivec" lang="objectivec">           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚   property   â”‚
           â”‚ <span class="hljs-keyword">getter</span>/<span class="hljs-keyword">setter</span>â”‚
           â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
        KVO ç›‘å¬   â”‚ <span class="hljs-keyword">setter</span>
                  â–¼
               ivarï¼ˆçœŸå®æ•°æ®ï¼‰
                  â–²
                  â”‚
            KVC å…œåº•è®¿é—®
</code></pre>
<hr/>
<h3 data-id="heading-28"><strong>ä¹ã€ç»ˆææ€»ç»“</strong></h3>
<blockquote>
<p><strong>KVC æ˜¯â€œæ–¹æ³•ä¼˜å…ˆã€ivar å…œåº•â€çš„é”®å€¼è®¿é—®æœºåˆ¶ï¼›KVO æ˜¯é€šè¿‡ isa-swizzling é‡å†™ setter æ¥ç›‘å¬å±æ€§å˜åŒ–çš„æœºåˆ¶ï¼Œæœ¬è´¨ä¸ ivar æ— å…³ï¼Œåªä¸ setter æ˜¯å¦è¢«è°ƒç”¨æœ‰å…³ã€‚</strong></p>
</blockquote>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å½“ AI æˆä¸ºç¨‹åºå‘˜ï¼ŒGit å†å²ä¸ºä½•å˜æˆäº†"åƒåœ¾åœº"ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7598699872552517668</link>    <guid>https://juejin.cn/post/7598699872552517668</guid>    <pubDate>2026-01-25T08:12:38.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7598699872552517668" data-draft-id="7598699872552452132" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å½“ AI æˆä¸ºç¨‹åºå‘˜ï¼ŒGit å†å²ä¸ºä½•å˜æˆäº†&quot;åƒåœ¾åœº&quot;ï¼Ÿ"/> <meta itemprop="keywords" content="VibeCoding"/> <meta itemprop="datePublished" content="2026-01-25T08:12:38.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Asklv"/> <meta itemprop="url" content="https://juejin.cn/user/761324741600397"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å½“ AI æˆä¸ºç¨‹åºå‘˜ï¼ŒGit å†å²ä¸ºä½•å˜æˆäº†"åƒåœ¾åœº"ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/761324741600397/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Asklv
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-25T08:12:38.000Z" title="Sun Jan 25 2026 08:12:38 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å…ˆçœ‹å‡ ä¸ªçœŸå®çš„ Git å†å²æˆªå›¾ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">commit</span> <span class="hljs-number">47</span>a2b3c: "fix typo"
<span class="hljs-keyword">commit</span> <span class="hljs-number">46</span>d8e1f: "update"
<span class="hljs-keyword">commit</span> <span class="hljs-number">45</span>c7b2a: "working on it"
<span class="hljs-keyword">commit</span> <span class="hljs-number">44</span>f3a8d: "fix bug"
<span class="hljs-keyword">commit</span> <span class="hljs-number">43e9</span>c5b: "add feature"
<span class="hljs-keyword">commit</span> <span class="hljs-number">42</span>d1a7e: "fix"
<span class="hljs-keyword">commit</span> <span class="hljs-number">41</span>c8f3d: "update code"
...å¾€ä¸‹è¿˜æœ‰ <span class="hljs-number">40</span> ä¸ªç±»ä¼¼çš„ <span class="hljs-keyword">commit</span>
</code></pre>
<p>è¿™æ˜¯æŸä¸ªå›¢é˜Ÿç”¨ Cursor å¼€å‘ä¸€å‘¨åçš„ Git å†å²ã€‚ä¸€ä¸ªç®€å•çš„ç”¨æˆ·ç™»å½•åŠŸèƒ½ï¼ŒAI ä»£ç†ç”Ÿæˆäº† 47 ä¸ª commitsã€‚å…¶ä¸­ 32 ä¸ªæ˜¯ "fix"ã€"update"ã€"working on it" è¿™ç§æ— æ„ä¹‰çš„æ¶ˆæ¯ã€‚</p>
<p>åœ¨ AI ç¼–ç¨‹çš„æ—¶ä»£ï¼Œä½ çš„ Git å†å²è¿˜å¥½å—ï¼Ÿ</p>
<p>å¦‚æœä½ æ˜¯æŠ€æœ¯ Leaderï¼Œçœ‹ç€å›¢é˜Ÿçš„ Git å†å²ä»"ä¸€ç›®äº†ç„¶"å˜æˆ"ä¸å¿ç›´è§†"ï¼ŒCode Review æ—¶è¦ç¿»å‡ åä¸ª commits æ‰èƒ½ç†è§£ä¸€ä¸ªåŠŸèƒ½çš„å®Œæ•´é€»è¾‘ï¼Œæ˜¯ä¸æ˜¯å·²ç»å¼€å§‹æ€€ç–‘äººç”Ÿï¼Ÿ</p>
<p>å¦‚æœä½ æ˜¯ç‹¬ç«‹å¼€å‘è€…ï¼Œç”¨ Claude Code æˆ– Cursor å¼€å‘æ—¶æ•ˆç‡é£èµ·ï¼Œä½†ä¸‰ä¸ªæœˆåå›çœ‹ä»£ç ï¼Œæƒ³æ‰¾"å½“æ—¶ä¸ºä»€ä¹ˆè¿™æ ·å®ç°"çš„åŸå› ï¼Œå´å‘ç° Git å†å²å…¨æ˜¯å™ªéŸ³ï¼Œæ˜¯ä¸æ˜¯è§‰å¾—è‡ªå·±æŒ–äº†ä¸ªå‘æŠŠè‡ªå·±åŸ‹äº†ï¼Ÿ</p>
<p>å¦‚æœä½ æ˜¯å›¢é˜Ÿçš„ MLOpsï¼Œæ¯å¤©å¤„ç†å„ç§"AI ç”Ÿæˆçš„ä»£ç å‡ºé—®é¢˜äº†ï¼Œä½†ä¸çŸ¥é“æ˜¯å“ªæ¬¡æ”¹åŠ¨å¯¼è‡´çš„"å·¥å•ï¼Œç›¯ç€å‡ ç™¾ä¸ªæ— æ„ä¹‰çš„ commits å‘æ„ï¼Œæ˜¯ä¸æ˜¯è§‰å¾—æŠ€æœ¯æ²¡ç”¨åœ¨åˆ€åˆƒä¸Šï¼Ÿ</p>
<p>åˆ«æ€¥ï¼Œä»Šå¤©çš„ä¸»è§’â€”â€”<strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fmemovai%2Fmemov" target="_blank" title="https://github.com/memovai/memov" ref="nofollow noopener noreferrer">MemoV</a>ï¼ˆ<strong>github.com/memovai/memov</strong>ï¼‰</strong>ï¼Œå°±æ˜¯ä½ çš„"å¼€æºè§£è¯"ï¼</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6d620b0787e5425fa0f8b7960c0bbb89~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQXNrbHY=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769933800&amp;x-signature=Tl7GizriFSD8kgBKO2XV7632eGE%3D" alt="" loading="lazy"/></p>
<p>ç®€å•æ¥è¯´ï¼ŒMemoV æ˜¯ä¸“ä¸º AI ç¼–ç¨‹æ—¶ä»£è®¾è®¡çš„ç‰ˆæœ¬æ§åˆ¶å¢å¼ºå±‚ã€‚å®ƒçš„æ ¸å¿ƒèƒ½åŠ›ï¼Œå°±æ˜¯æŠŠ AI çš„æ¯æ¬¡å¯¹è¯å½“ä½œä¸€ä¸ª"å¿«ç…§"ï¼Œè‡ªåŠ¨è®°å½•å®Œæ•´çš„ä¸Šä¸‹æ–‡ï¼ˆä½ çš„æç¤ºè¯ã€AI çš„å“åº”ã€ä»£ç å˜æ›´ã€å†³ç­–è¿‡ç¨‹ï¼‰ï¼Œè®©é¡¹ç›®å†å²ä»"commit å †ç Œ"å˜æˆ"æ•…äº‹çº¿ç´¢"ã€‚</p>
<p><strong>æœ€å…³é”®çš„æ˜¯ï¼Œä½ çš„å¼€å‘æµç¨‹ï¼Œä¸€è¡Œä»£ç éƒ½ä¸ç”¨æ”¹ï¼</strong></p>
<h2 data-id="heading-0">ä¸€ã€AI ç¼–ç¨‹çš„ä¸¤ä¸ª"é™·é˜±"ï¼Œä¸ºä½•éœ€è¦ MemoVï¼Ÿ</h2>
<p>è¦ç†è§£ MemoV çš„ä»·å€¼ï¼Œæˆ‘ä»¬é¦–å…ˆè¦æ˜ç™½ AI ç¼–ç¨‹å’Œäººç±»ç¼–ç¨‹æœ‰ç€æœ¬è´¨çš„ä¸åŒã€‚è¿™ç§å·®å¼‚ä½“ç°åœ¨ä¸¤ä¸ªæ ¸å¿ƒç»´åº¦ä¸Šï¼š<strong>å·¥ä½œæ¨¡å¼</strong>å’Œ<strong>ä¸Šä¸‹æ–‡ç®¡ç†</strong>ã€‚åœ¨æ²¡æœ‰ç®¡ç†æœºåˆ¶çš„æƒ…å†µä¸‹ï¼Œè¿™ä¸¤ä¸ªç»´åº¦éƒ½ä¼šé™·å…¥å›°å¢ƒï¼š</p>
<h3 data-id="heading-1">é™·é˜±ä¸€ï¼šCommit çš„"çˆ†ç‚¸æ€§å¢é•¿"ï¼ˆå†å²æ··ä¹±é—®é¢˜ï¼‰</h3>
<p>ä¼ ç»Ÿçš„ Git å·¥ä½œæµæ˜¯ä¸ºäººç±»è®¾è®¡çš„ã€‚ä¸€ä¸ªæœ‰ç»éªŒçš„å¼€å‘è€…ä¼šï¼š</p>
<ol>
<li>åœ¨è„‘ä¸­æ„æ€å®Œæ•´æ–¹æ¡ˆ</li>
<li>åˆ†é˜¶æ®µå®ç°åŠŸèƒ½</li>
<li>æ¯ä¸ªé€»è¾‘å•å…ƒåˆ›å»ºä¸€ä¸ªæœ‰æ„ä¹‰çš„ commit</li>
<li>Commit æ¶ˆæ¯æè¿°"åšäº†ä»€ä¹ˆ"å’Œ"ä¸ºä»€ä¹ˆ"</li>
</ol>
<p>ä½† AI ä»£ç†çš„å·¥ä½œæ–¹å¼å®Œå…¨ä¸åŒã€‚å®ƒæ˜¯ä¸€ç§<strong>æ¢ç´¢å¼ã€è¿­ä»£å¼</strong>çš„å·¥ä½œæ¨¡å¼ï¼š</p>
<p>è¿™å°±åƒä¸€åœºæ²¡æœ‰è§„åˆ™çš„"å¤§ä¹±æ–—"ã€‚ä¸€ä¸ªæœ¬åº”æ˜¯å•ä¸€é€»è¾‘å•å…ƒçš„åŠŸèƒ½ï¼Œè¢«æ‹†æˆäº†å‡ åä¸ªç¢ç‰‡åŒ–çš„ commitsã€‚ä¸‰ä¸ªæœˆåï¼Œå½“ä½ æƒ³å›æº¯"ä¸ºä»€ä¹ˆç”¨ JWT è€Œä¸æ˜¯ Session"æ—¶ï¼Œä½ éœ€è¦ï¼š</p>
<ol>
<li>åœ¨å‡ åä¸ª commits é‡Œæ‰¾çº¿ç´¢</li>
<li>çŒœæµ‹å“ªä¸ª commit åŒ…å«å…³é”®å†³ç­–</li>
<li>æ‹¼å‡‘æ•£è½çš„ä¸Šä¸‹æ–‡ç¢ç‰‡</li>
<li>å¯èƒ½è¿˜æ˜¯æä¸æ¸…æ¥šå®Œæ•´çš„å†³ç­–è¿‡ç¨‹</li>
</ol>
<h3 data-id="heading-2">é™·é˜±äºŒï¼šä¸Šä¸‹æ–‡çš„"å½»åº•ä¸¢å¤±"ï¼ˆçŸ¥è¯†é»‘æ´é—®é¢˜ï¼‰</h3>
<p>å³ä¾¿ä½ èƒ½å¿å—æ··ä¹±çš„ commit å†å²ï¼Œè¿˜æœ‰ä¸€ä¸ªæ›´è‡´å‘½çš„é—®é¢˜ï¼š<strong>AI å¯¹è¯çš„ä¸Šä¸‹æ–‡å®Œå…¨ä¸¢å¤±äº†</strong>ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/67b13833d937468885b3372eff32141a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQXNrbHY=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769933800&amp;x-signature=PD7rjtgNHcD8BbaAtSddGfXCJwk%3D" alt="" loading="lazy"/><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3239b71ac3e14357bfffde86771cce9c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQXNrbHY=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769933800&amp;x-signature=sfRSChVTPIbuICw%2BTB%2FIZ27P2NI%3D" alt="" loading="lazy"/></p>
<p>Git åªè®°å½•äº†"åšäº†ä»€ä¹ˆ"ï¼ˆå®ç°äº† OAuthï¼‰ï¼Œä½†<strong>ä¸ºä»€ä¹ˆè¿™æ ·åš</strong>ã€<strong>è€ƒè™‘äº†å“ªäº›æ–¹æ¡ˆ</strong>ã€<strong>åšäº†ä»€ä¹ˆæƒè¡¡</strong>è¿™äº›å®è´µçš„å†³ç­–ä¸Šä¸‹æ–‡ï¼Œå…¨éƒ½çƒŸæ¶ˆäº‘æ•£äº†ã€‚</p>
<p>é¢å¯¹ä»¥ä¸Šä¸¤ä¸ªé™·é˜±ï¼ŒMemoV æä¾›äº†ç²¾å‡†ä¸”ä¼˜é›…çš„è§£å†³æ–¹æ¡ˆã€‚å®ƒèƒ½åŒæ—¶è§£å†³å†å²æ··ä¹±å’Œä¸Šä¸‹æ–‡ä¸¢å¤±çš„é—®é¢˜ï¼š</p>
<p><strong>å¯¹äº Commit çˆ†ç‚¸</strong>ï¼šå®ç°"ä¼šè¯çº§å¿«ç…§"</p>
<p>MemoV ä¼šæŠŠä¸€æ¬¡å®Œæ•´çš„ AI å¯¹è¯ï¼ˆå¯èƒ½åŒ…å«å‡ åæ¬¡ä»£ç ä¿®æ”¹ï¼‰å‹ç¼©æˆä¸€ä¸ªæ¸…æ™°çš„å¿«ç…§ã€‚æ¯ä¸ªå¿«ç…§åŒ…å«å®Œæ•´çš„å˜æ›´è¯´æ˜ï¼Œå½»åº•å‘Šåˆ«ç¢ç‰‡åŒ–çš„ commit å†å²ã€‚</p>
<p><strong>å¯¹äºä¸Šä¸‹æ–‡ä¸¢å¤±</strong>ï¼šå®ç°"å®Œæ•´ä¸Šä¸‹æ–‡è®°å½•"</p>
<p>MemoV ä¼šè‡ªåŠ¨è®°å½•æ¯æ¬¡å¯¹è¯çš„å®Œæ•´ä¸Šä¸‹æ–‡ï¼šä½ çš„åŸå§‹æç¤ºã€AI çš„å®Œæ•´å“åº”ã€ä»£ç å˜æ›´è®¡åˆ’ã€ä¿®æ”¹çš„æ–‡ä»¶åˆ—è¡¨ã€‚æœªæ¥å›æº¯æ—¶ï¼Œæ‰€æœ‰å†³ç­–è¿‡ç¨‹ä¸€è§ˆæ— ä½™ã€‚</p>
<p>æ€»ç»“ä¸€ä¸‹ï¼ŒMemoV å¯ä»¥å°† AI ç¼–ç¨‹ä»ä¸€ä¸ªæ··ä¹±ã€ä¸å¯è¿½æº¯çš„"é»‘ç›’"ï¼Œè½¬å˜ä¸ºæ¸…æ™°ã€å¯å›æº¯ã€æœ‰æ•…äº‹çº¿çš„"é€æ˜ç›’"ï¼Œè¿™å°±æ˜¯å®ƒå®ç°ç‰ˆæœ¬æ§åˆ¶ç°ä»£åŒ–çš„æ ¸å¿ƒæ‰€åœ¨ã€‚</p>
<p>ææ‡‚äº†è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬å†æ¥çœ‹ MemoV çš„è®¾è®¡ï¼Œä½ å°±ä¼šè§‰å¾—è±ç„¶å¼€æœ—ã€‚</p>
<h2 data-id="heading-3">äºŒã€ä¸‰æ­¥æå®šï¼Œç®€å•åˆ°ä¸åƒè¯ï¼</h2>
<p>åœ¨ä¼ ç»Ÿçš„å¼€å‘æµç¨‹é‡Œï¼ŒGit ä¸€ç›´æ˜¯ä¸ª"æ‰‹åŠ¨æ¡£"â€”â€”æ¯æ¬¡æ”¹å®Œä»£ç ï¼Œä½ éƒ½è¦è‡ªå·±å†³å®šä»€ä¹ˆæ—¶å€™ commitã€å†™ä»€ä¹ˆæ¶ˆæ¯ã€æ€ä¹ˆç»„ç»‡å†å²ã€‚</p>
<p>ä½† MemoV çš„å‡ºç°ï¼Œå½»åº•æ”¹å˜äº†è¿™ä¸€æ¸¸æˆè§„åˆ™ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5d2622cde6b04491b85a55d9c574a197~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQXNrbHY=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769933800&amp;x-signature=tLx804mKWyFIgVW2rM0F2JIQJdg%3D" alt="" loading="lazy"/><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/43b0e42ea68b435db5db55d19e59e43b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQXNrbHY=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769933800&amp;x-signature=qfbS8K1pPYn%2FgeIYqcMLzOou8EA%3D" alt="" loading="lazy"/></p>
<p>æœ‰äº† MemoVï¼Œä½ å¯ä»¥åƒ"è®¾ç½®è‡ªåŠ¨å­˜æ¡£"ä¸€æ ·ï¼Œè®© AI æ¯æ¬¡å¯¹è¯ç»“æŸåè‡ªåŠ¨è®°å½•å¿«ç…§ï¼Œå‘Šåˆ«æ‰‹åŠ¨ç®¡ç†çš„ç¹çã€‚</p>
<p>åˆ«çœ‹åŠŸèƒ½è¿™ä¹ˆå¼ºå¤§ï¼Œä½†ä½¿ç”¨ MemoV å´è¶…çº§ç®€å•ã€‚å®ƒå°±åƒ AI ç¼–è¾‘å™¨çš„å³æ’å³ç”¨æ‰©å±•åŒ…ï¼Œä¸‰æ­¥æå®šï¼š</p>
<h3 data-id="heading-4">ç¬¬ä¸€æ­¥ï¼šå®‰è£… uvï¼ˆPython åŒ…ç®¡ç†å™¨ï¼‰</h3>
<p>MemoV åŸºäº Python ç”Ÿæ€ï¼Œéœ€è¦å…ˆè£…ä¸€ä¸ªå¿«é€Ÿçš„åŒ…ç®¡ç†å™¨ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># macOS / Linux</span>
curl -LsSf https://astral.sh/uv/install.sh | sh

<span class="hljs-comment"># Windows</span>
powershell -ExecutionPolicy ByPass -c <span class="hljs-string">"irm https://astral.sh/uv/install.ps1 | iex"</span>
</code></pre>
<h3 data-id="heading-5">ç¬¬äºŒæ­¥ï¼šé…ç½® MCP é›†æˆ</h3>
<p>MemoV ä½¿ç”¨ä¸šç•Œæ ‡å‡†çš„ MCPï¼ˆModel Context Protocolï¼‰åè®®ï¼Œä¸€æ¬¡é…ç½®ï¼Œæ‰€æœ‰ AI å·¥å…·é€šç”¨ã€‚</p>
<p><strong>å¦‚æœä½ ç”¨ Claude Code</strong>ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-meta"># åœ¨é¡¹ç›®æ ¹ç›®å½•è¿è¡Œ</span>
claude mcp <span class="hljs-keyword">add</span> mem-mcp --scope project -- uvx --<span class="hljs-keyword">from</span> git+https:<span class="hljs-comment">//github.com/memovai/memov.git mem-mcp-launcher stdio $(pwd)</span>
</code></pre>
<p><strong>å¦‚æœä½ ç”¨ Cursor</strong>ï¼š</p>
<p>æ‰“å¼€ <code>Cursor Settings &gt; MCP</code>ï¼Œæ·»åŠ é…ç½®ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">{
  <span class="hljs-string">"mcpServers"</span>: {
    <span class="hljs-string">"mem-mcp"</span>: {
      <span class="hljs-string">"command"</span>: <span class="hljs-string">"uvx"</span>,
      <span class="hljs-string">"args"</span>: [
        <span class="hljs-string">"--from"</span>,
        <span class="hljs-string">"git+https://github.com/memovai/memov.git"</span>,
        <span class="hljs-string">"mem-mcp-launcher"</span>,
        <span class="hljs-string">"stdio"</span>,
        <span class="hljs-string">"<span class="hljs-variable">${workspaceFolder}</span>"</span>
      ]
    }
  }
}
</code></pre>
<h3 data-id="heading-6">ç¬¬ä¸‰æ­¥ï¼šæ·»åŠ è‡ªåŠ¨å¿«ç…§è§„åˆ™</h3>
<p>è¿™æ˜¯æœ€å…³é”®çš„ä¸€æ­¥ï¼åœ¨ AI ç¼–è¾‘å™¨ä¸­æ·»åŠ ä¸€æ¡è§„åˆ™ï¼Œè®©å®ƒè‡ªåŠ¨è°ƒç”¨ MemoVï¼š</p>
<p><strong>Cursor</strong>: <code>Cursor Settings &gt; Rules</code> æ·»åŠ ï¼š</p>
<pre><code class="hljs language-r" lang="r">After completing <span class="hljs-built_in">any</span> interaction<span class="hljs-punctuation">,</span> always <span class="hljs-built_in">call</span> `use mem snap` to save the snapshot.
</code></pre>
<p><strong>Claude Code</strong>: åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º <code>CLAUDE.md</code>ï¼Œæ·»åŠ ï¼š</p>
<pre><code class="hljs language-r" lang="r"><span class="hljs-comment">## MemoV Rules</span>

After completing <span class="hljs-built_in">any</span> interaction<span class="hljs-punctuation">,</span> always <span class="hljs-built_in">call</span> `use mem snap` to save the snapshot.
</code></pre>
<p><strong>æå®šï¼</strong> çœ‹åˆ° AI ç¼–è¾‘å™¨ä¸­å‡ºç° <code>mem snap</code>ã€<code>mem history</code>ã€<code>mem jump</code> è¿™äº›å·¥å…·ï¼Œå°±è¯´æ˜ä½ å·²ç»æˆåŠŸåŒ–èº«"ç‰ˆæœ¬æ§åˆ¶å¤§å¸ˆ"äº†ã€‚</p>
<p>ä»¥åï¼Œä½ çš„ AI ä»£ç†æ¯æ¬¡å®Œæˆä»»åŠ¡åï¼Œéƒ½ä¼š<strong>è‡ªåŠ¨</strong>è°ƒç”¨ <code>mem snap</code> è®°å½•å¿«ç…§ï¼Œä½ å®Œå…¨ä¸ç”¨æ“å¿ƒï¼</p>
<h2 data-id="heading-7">ä¸‰ã€æ­ç§˜ MemoV æŠ€æœ¯æ ¸å¿ƒï¼Œä¸ªäººå¼€å‘è€…ä¹Ÿèƒ½ç©è½¬ï¼</h2>
<p>ä½ è‚¯å®šå¥½å¥‡ï¼ŒMemoV åˆ°åº•ç”¨äº†ä»€ä¹ˆé»‘ç§‘æŠ€ï¼Œç«Ÿç„¶èƒ½è®© AI è‡ªå·±è®°å½•å¼€å‘è¿‡ç¨‹ï¼Œè¿˜ä¸å½±å“æ­£å¸¸å·¥ä½œæµï¼Ÿ</p>
<p>ç­”æ¡ˆå…¨åœ¨å®ƒçš„æ ¸å¿ƒè®¾è®¡ï¼š<strong>åŸºäº MCP çš„è‡ªåŠ¨å¿«ç…§æœºåˆ¶</strong>ã€‚</p>
<h3 data-id="heading-8">3.1 MemoV æ ¸å¿ƒåŸç†</h3>
<p>MemoV çš„å·¥ä½œåŸç†éå¸¸å·§å¦™ï¼Œä¹Ÿååˆ†ç»å…¸ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b15d25bdf5dc49cc9ccdbfbc6ff5d0b5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQXNrbHY=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769933800&amp;x-signature=KT6VqnfB2DSrGljgMckjjDKmBBA%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c2864b4653a44efd801f5c6b0187acd9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQXNrbHY=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769933800&amp;x-signature=oecfo1FuvRanaHM6kEApo5cQXLk%3D" alt="" loading="lazy"/></p>
<p>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œå®ƒé€šè¿‡ <strong>MCP åè®®</strong>ï¼Œåœ¨ AI ä»£ç†å’Œé¡¹ç›®å†å²ä¹‹é—´å»ºç«‹äº†ä¸€åº§æ¡¥æ¢ã€‚å½“ AI å®Œæˆä»»åŠ¡æ—¶ï¼Œä¼šä¸»åŠ¨è°ƒç”¨ <code>mem snap</code> å·¥å…·ï¼Œä¼ é€’å››ä¸ªå…³é”®ä¿¡æ¯ï¼š</p>
<ol>
<li><strong>user_prompt</strong>ï¼šä½ çš„åŸå§‹éœ€æ±‚</li>
<li><strong>original_response</strong>ï¼šAI çš„å®Œæ•´å›å¤</li>
<li><strong>agent_plan</strong>ï¼šæŒ‰æ–‡ä»¶åˆ—å‡ºçš„å˜æ›´è®¡åˆ’</li>
<li><strong>files_changed</strong>ï¼šä¿®æ”¹çš„æ–‡ä»¶åˆ—è¡¨</li>
</ol>
<p>MemoV æ”¶åˆ°è¿™äº›ä¿¡æ¯åï¼Œä¼šåšä¸‰ä»¶äº‹ï¼š</p>
<ol>
<li>å°†ä¸Šä¸‹æ–‡ä¿å­˜åˆ° <code>.mem/</code> ç›®å½•</li>
<li>ç”Ÿæˆä¸€ä¸ªé«˜è´¨é‡çš„ Git commit</li>
<li>è¿”å›æˆåŠŸæ¶ˆæ¯ç»™ AI</li>
</ol>
<p>æ•´ä¸ªè¿‡ç¨‹ï¼Œä½ çš„å¼€å‘æµç¨‹å®Œå…¨ä¸å—å½±å“ï¼ŒAI ä¹Ÿä¸çŸ¥é“èƒŒåå‘ç”Ÿäº†ä»€ä¹ˆã€‚å°±é è¿™æ‰‹"æ— æ„Ÿé›†æˆ"ï¼Œå®ƒè½»æ¾å®ç°äº†ä¸Šä¸‹æ–‡è®°å½•ã€å†å²ç®¡ç†å’Œæ—¶å…‰å›æº¯ã€‚</p>
<h3 data-id="heading-9">3.2 snap å·¥å…·çš„ç²¾å¦™è®¾è®¡</h3>
<p>è®©æˆ‘ä»¬æ·±å…¥çœ‹çœ‹ <code>mem snap</code>ï¼Œå®ƒè¦æ±‚ AI æŒ‰æ–‡ä»¶æ¢³ç†å‡ºå˜æ›´è®¡åˆ’ï¼Œè¿™å°±åƒæ˜¯è®© AI å†™ä¸€ä»½"æ–½å·¥è¯´æ˜ä¹¦"ã€‚</p>
<p><strong>ä¼ ç»Ÿ Git commit</strong>ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">commit</span>: "implement login feature"
</code></pre>
<p><strong>MemoV å¿«ç…§</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">Prompt: å®ç°ç”¨æˆ·ç™»å½•API

Response: æˆ‘åˆ›å»ºäº†è®¤è¯ç«¯ç‚¹ï¼Œä½¿ç”¨JWT tokenè¿›è¡Œèº«ä»½éªŒè¯...

Plan:
- api/auth.py: æ·»åŠ loginç«¯ç‚¹ï¼Œæ”¯æŒemail/passwordè®¤è¯
- lib/jwt.py: åˆ›å»ºJWT tokenç”Ÿæˆå’ŒéªŒè¯å·¥å…·
- tests/auth.test.py: æ·»åŠ ç™»å½•æµç¨‹æµ‹è¯•ç”¨ä¾‹

Files: api/auth.py, lib/jwt.py, tests/auth.test.py
</code></pre>
<p>çœ‹å‡ºåŒºåˆ«äº†å—ï¼ŸMemoV çš„å¿«ç…§ä¸ä»…è®°å½•äº†"åšäº†ä»€ä¹ˆ"ï¼Œè¿˜è®°å½•äº†"ä¸ºä»€ä¹ˆåš"ã€"æ€ä¹ˆåšçš„"ã€"æ”¹äº†å“ªäº›æ–‡ä»¶"ã€‚</p>
<h3 data-id="heading-10">3.3 æœ¬åœ°ä½“éªŒå®Œæ•´å·¥ä½œæµ</h3>
<p>MemoV çš„å¦ä¸€ä¸ªç²¾é«“è®¾è®¡æ˜¯ï¼š<strong>å®Œå…¨æœ¬åœ°åŒ–ï¼Œæ— éœ€äº‘ç«¯æœåŠ¡</strong>ã€‚</p>
<p>è¿™æ„å‘³ç€ï¼Œåœ¨ä½ è‡ªå·±çš„ç”µè„‘ä¸Šï¼Œå°±èƒ½ä½“éªŒåˆ°å®Œæ•´çš„ç‰ˆæœ¬æ§åˆ¶å¢å¼ºèƒ½åŠ›ã€‚å¯¹äºé‡è§†æ•°æ®å®‰å…¨çš„å›¢é˜Ÿæ¥è¯´ï¼Œè¿™ç®€ç›´æ˜¯ç¦éŸ³ã€‚</p>
<p>å‡è®¾ä½ æƒ³åœ¨ä¸€ä¸ª Next.js é¡¹ç›®ä¸­ä½¿ç”¨ MemoVï¼š</p>
<p><strong>ç¬¬ä¸€æ­¥ï¼šåˆå§‹åŒ–é¡¹ç›®</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">cd</span> your-nextjs-project
mem init  <span class="hljs-comment"># åˆå§‹åŒ–MemoVï¼ˆå¦‚æœå®‰è£…äº†CLIï¼‰</span>
</code></pre>
<p><strong>ç¬¬äºŒæ­¥ï¼šè®© AI å·¥ä½œ</strong></p>
<p>åœ¨ Cursor ä¸­ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">ä½ : å®ç°ä¸€ä¸ªæœç´¢åŠŸèƒ½ï¼Œæ”¯æŒå…¨æ–‡æœç´¢

AI: å¥½çš„ï¼Œæˆ‘ä¼šåˆ›å»ºæœç´¢APIå’Œå‰ç«¯ç»„ä»¶...
<span class="hljs-section">[AIå¼€å§‹å·¥ä½œ]</span>
<span class="hljs-section">[è‡ªåŠ¨è°ƒç”¨ mem snap ä¿å­˜å¿«ç…§]</span>
</code></pre>
<p><strong>ç¬¬ä¸‰æ­¥ï¼šæŸ¥çœ‹å†å²</strong></p>
<pre><code class="hljs language-bash" lang="bash">ä½ : use mem <span class="hljs-built_in">history</span>
</code></pre>
<p>è¾“å‡ºï¼š</p>
<pre><code class="hljs language-bash" lang="bash">å¿«ç…§å†å²

[abc123] å®ç°æœç´¢åŠŸèƒ½ï¼Œæ”¯æŒå…¨æ–‡æœç´¢
  æ—¶é—´: 2åˆ†é’Ÿå‰
  æ–‡ä»¶: api/search.ts, components/SearchBar.tsx
  è®¡åˆ’:
    - api/search.ts: å®ç°å…¨æ–‡æœç´¢ç«¯ç‚¹
    - components/SearchBar.tsx: åˆ›å»ºæœç´¢UIç»„ä»¶

[def456] æ·»åŠ ç”¨æˆ·ç™»å½•åŠŸèƒ½
  æ—¶é—´: 1å°æ—¶å‰
  æ–‡ä»¶: api/auth.ts, lib/jwt.ts
  è®¡åˆ’: ...
</code></pre>
<p><strong>ç¬¬å››æ­¥ï¼šæ—¶å…‰ç©¿æ¢­</strong></p>
<p>å¦‚æœä½ æƒ³å›åˆ°æŸä¸ªå¿«ç…§ï¼š</p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">ä½ : use mem jump abc123</span>
</code></pre>
<p>MemoV ä¼šåˆ›å»ºä¸€ä¸ªæ–°åˆ†æ”¯ï¼Œæ¢å¤åˆ°é‚£ä¸ªæ—¶é—´ç‚¹çš„å®Œæ•´çŠ¶æ€ã€‚æƒ³è±¡ä¸€ä¸‹ï¼Œè¿™å°±åƒæ¸¸æˆé‡Œçš„"è¯»æ¡£"åŠŸèƒ½ï¼</p>
<h2 data-id="heading-11">å››ã€ä¸ºä»€ä¹ˆè¯´ MemoV æ˜¯ AI æ—¶ä»£çš„"å¿…é€‰é¡¹"ï¼Ÿ</h2>
<p>çœ‹åˆ°è¿™é‡Œï¼Œä½ åº”è¯¥æ˜ç™½äº†ï¼ŒMemoV ä»£è¡¨äº†ä¸€ç§æ›´èªæ˜ã€æ›´é€‚åˆ AI æ—¶ä»£çš„ç‰ˆæœ¬æ§åˆ¶æ–¹å¼ã€‚</p>
<h3 data-id="heading-12">é™æœ¬å¢æ•ˆï¼Œç«‹ç«¿è§å½±</h3>
<p>ä¼ ç»Ÿæ–¹å¼ä¸‹ï¼Œä¸€ä¸ªæœˆçš„å¼€å‘å¯èƒ½äº§ç”Ÿ 500+ commitsï¼Œå…¶ä¸­ 60% æ˜¯å™ªéŸ³ã€‚Code Review è¦èŠ±å¤§é‡æ—¶é—´ç†è§£ä¸Šä¸‹æ–‡ã€‚</p>
<p>ç”¨äº† MemoV åï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/01a9ee8dbc68477389dad37fef25d9db~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQXNrbHY=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769933800&amp;x-signature=G%2F9B1RhimfQekr%2B4EX4e3uXrRS8%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/411d309c91c84c80a7ebb731ed82614e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQXNrbHY=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769933800&amp;x-signature=MFKkX9XMjBPRQ2ZB538gNe38Ps4%3D" alt="" loading="lazy"/></p>
<p>æŸå›¢é˜Ÿä½¿ç”¨ MemoV ä¸€ä¸ªæœˆåçš„çœŸå®æ•°æ®ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/13c0638142c14a739bc0b31913b4be6e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQXNrbHY=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769933800&amp;x-signature=hPFfegdyv8Y2mTvEzCwJCvWUgEg%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-13">å®Œç¾é€‚é… AI å·¥ä½œæµ</h3>
<p>MemoV ä¸æ˜¯ç®€å•åœ°"æ¸…ç† Git å†å²"ï¼Œè€Œæ˜¯ä»æ ¹æœ¬ä¸Šé€‚é…äº† AI çš„å·¥ä½œæ¨¡å¼ï¼š</p>
<p><strong>AI çš„æ¢ç´¢å¼å¼€å‘</strong>ï¼šå°è¯•å¤šä¸ªæ–¹æ¡ˆï¼Œæœ€ç»ˆä¿ç•™æœ€ä¼˜è§£<br/>
<strong>MemoV çš„å¿«ç…§æœºåˆ¶</strong>ï¼šåªè®°å½•æœ€ç»ˆç»“æœå’Œå®Œæ•´ä¸Šä¸‹æ–‡</p>
<p><strong>AI çš„è¿­ä»£å¼ä¼˜åŒ–</strong>ï¼šä¸æ–­ä¿®æ”¹ç›´åˆ°æ»¡æ„<br/>
<strong>MemoV çš„è‡ªåŠ¨æ•´åˆ</strong>ï¼šæŠŠæ‰€æœ‰è¿­ä»£å‹ç¼©æˆä¸€ä¸ªæ¸…æ™°å¿«ç…§</p>
<p><strong>AI çš„ä¸Šä¸‹æ–‡ä¾èµ–</strong>ï¼šéœ€è¦è®°ä½ä¹‹å‰çš„å†³ç­–<br/>
<strong>MemoV çš„ä¸Šä¸‹æ–‡ä¿ç•™</strong>ï¼šå®Œæ•´ä¿å­˜å¯¹è¯å†å²</p>
<h3 data-id="heading-14">åŸºäºå¼€æ”¾æ ‡å‡†ï¼Œç”Ÿæ€å‹å¥½</h3>
<p>MemoV é‡‡ç”¨ Anthropic ä¸»å¯¼çš„ <strong>MCPï¼ˆModel Context Protocolï¼‰</strong>ï¼Œè¿™æ˜¯ AI å·¥å…·äº’æ“ä½œçš„å¼€æ”¾æ ‡å‡†ã€‚</p>
<p>å°±åƒ USB-C ç»Ÿä¸€äº†æ•°æ®æ¥å£ï¼ŒMCP æ­£åœ¨ç»Ÿä¸€ AI å·¥å…·çš„é›†æˆæ–¹å¼ã€‚é€‰æ‹© MemoVï¼Œå°±æ˜¯é€‰æ‹©äº†ä¸€ä¸ªé¢å‘æœªæ¥çš„æ–¹æ¡ˆã€‚</p>
<p>ç›®å‰æ”¯æŒçš„ AI å·¥å…·ï¼š</p>
<ul>
<li>Cursorï¼ˆå®Œç¾æ”¯æŒï¼‰</li>
<li>Claude Codeï¼ˆå®˜æ–¹æ¨èï¼‰</li>
<li>VS Code + Continueï¼ˆé€šè¿‡ MCPï¼‰</li>
<li>Windsurfï¼ˆå·²éªŒè¯ï¼‰</li>
<li>å…¶ä»–æ”¯æŒ MCP çš„å·¥å…·</li>
</ul>
<h3 data-id="heading-15">ä¹…ç»æ²™åœºï¼Œå¼€æºå¯ä¿¡</h3>
<p>MemoV ä¸æ˜¯ä¸€ä¸ª"å®éªŒæ€§é¡¹ç›®"ï¼Œè€Œæ˜¯ï¼š</p>
<ul>
<li><strong>100% å¼€æº</strong>ï¼šMIT åè®®ï¼Œä»£ç å®Œå…¨é€æ˜</li>
<li><strong>æ´»è·ƒç»´æŠ¤</strong>ï¼šGitHub ä¸ŠæŒç»­è¿­ä»£</li>
<li><strong>ç¤¾åŒºé©±åŠ¨</strong>ï¼šæ¬¢è¿è´¡çŒ®å’Œåé¦ˆ</li>
<li><strong>æœ¬åœ°ä¼˜å…ˆ</strong>ï¼šæ•°æ®å®Œå…¨åœ¨ä½ çš„æœºå™¨ä¸Š</li>
</ul>
<h2 data-id="heading-16">äº”ã€çœŸå®æ¡ˆä¾‹ï¼šä¸€ä¸ªæŠ€æœ¯åšä¸»çš„ä½“éªŒ</h2>
<p>æ¥è‡ªçŸ¥ä¹ç”¨æˆ· @ææ˜çš„åˆ†äº«ï¼ˆåŒ–åï¼‰ï¼š</p>
<p>æˆ‘æ˜¯ä¸€ä¸ªæŠ€æœ¯åšä¸»ï¼Œç»å¸¸ç”¨ Cursor å¼€å‘ä¸€äº›å°é¡¹ç›®ä½œä¸ºæ•™ç¨‹æ¡ˆä¾‹ã€‚ä¹‹å‰æœ€å¤´ç–¼çš„å°±æ˜¯ Git å†å²â€”â€”AI ç”Ÿæˆçš„ä»£ç ç¡®å®å¿«ï¼Œä½† commits çœŸçš„æ˜¯"æƒ¨ä¸å¿ç¹"ã€‚</p>
<p>ç”¨äº† MemoV ä¸¤å‘¨åï¼Œæˆ‘çš„å·¥ä½œæµå½»åº•æ”¹å˜äº†ï¼š</p>
<p><strong>å¼€å‘é˜¶æ®µ</strong>ï¼šä¸“æ³¨å’Œ AI å¯¹è¯ï¼Œå®Œå…¨ä¸ç®¡ Gitã€‚æ¯æ¬¡ AI å®Œæˆä»»åŠ¡ï¼Œ<code>mem snap</code> è‡ªåŠ¨è®°å½•ï¼Œæˆ‘ç»§ç»­ä¸‹ä¸€ä¸ªéœ€æ±‚ã€‚</p>
<p><strong>å†™æ•™ç¨‹é˜¶æ®µ</strong>ï¼šæ‰“å¼€ <code>mem ui</code>ï¼Œçœ‹åˆ°æ¸…æ™°çš„é¡¹ç›®æ¼”è¿›æ—¶é—´çº¿ã€‚æ¯ä¸ªå¿«ç…§éƒ½æœ‰å®Œæ•´çš„ä¸Šä¸‹æ–‡ï¼Œæˆ‘ç›´æ¥æ ¹æ®å¿«ç…§å†™æ•™ç¨‹ï¼Œæ•ˆç‡è‡³å°‘æå‡ 5 å€ã€‚</p>
<p><strong>æœ€æƒŠå–œçš„æ˜¯</strong>ï¼šæœ‰è¯»è€…é—®"ä¸ºä»€ä¹ˆç”¨è¿™ä¸ªåº“è€Œä¸æ˜¯é‚£ä¸ª"ï¼Œæˆ‘ç›´æ¥ <code>mem show &lt;id&gt;</code> æ‰¾åˆ°å½“æ—¶çš„å¿«ç…§ï¼ŒæŠŠ AI çš„å®Œæ•´æ€è€ƒè¿‡ç¨‹å¤åˆ¶ç»™ä»–ã€‚è¿™ç§é€æ˜åº¦ï¼Œç”¨ä¼ ç»Ÿ Git æ ¹æœ¬åšä¸åˆ°ã€‚</p>
<p>ç°åœ¨æˆ‘çš„æ‰€æœ‰é¡¹ç›®éƒ½åœ¨ç”¨ MemoVï¼ŒçœŸé¦™ï¼</p>
<h2 data-id="heading-17">å…­ã€å¿«é€Ÿå¼€å§‹ï¼Œäº”åˆ†é’Ÿä¸Šæ‰‹</h2>
<p>çœ‹åˆ°è¿™é‡Œï¼Œä½ æ˜¯ä¸æ˜¯å·²ç»è·ƒè·ƒæ¬²è¯•äº†ï¼Ÿ</p>
<h3 data-id="heading-18">æœ€ç®€å®‰è£…ï¼ˆæ¨èï¼‰</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1. å®‰è£…uv</span>
curl -LsSf https://astral.sh/uv/install.sh | sh

<span class="hljs-comment"># 2. åœ¨Cursor/Claude Codeä¸­é…ç½®MCPï¼ˆè§ä¸Šæ–‡ï¼‰</span>

<span class="hljs-comment"># 3. æ·»åŠ è‡ªåŠ¨å¿«ç…§è§„åˆ™ï¼ˆè§ä¸Šæ–‡ï¼‰</span>

<span class="hljs-comment"># æå®šï¼å¼€å§‹äº«å—æ¸…çˆ½çš„ç‰ˆæœ¬æ§åˆ¶</span>
</code></pre>
<h3 data-id="heading-19">é¦–æ¬¡ä½¿ç”¨</h3>
<p>åœ¨ AI ç¼–è¾‘å™¨ä¸­ï¼š</p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">ä½ : å¸®æˆ‘å®ç°ä¸€ä¸ªå¾…åŠäº‹é¡¹åº”ç”¨ï¼ŒåŒ…å«å¢åˆ æ”¹æŸ¥åŠŸèƒ½</span>

<span class="hljs-section">AI: [å¼€å§‹å·¥ä½œ...]</span>
<span class="hljs-section">AI: [è‡ªåŠ¨è°ƒç”¨ mem snap]</span>

<span class="hljs-section">ä½ : use mem history  # æŸ¥çœ‹å¿«ç…§</span>

<span class="hljs-section">ä½ : use mem ui      # æ‰“å¼€Webç•Œé¢å¯è§†åŒ–æŸ¥çœ‹</span>
</code></pre>
<h3 data-id="heading-20">è¿›é˜¶ä½¿ç”¨</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å®‰è£…CLIå·¥å…·ï¼ˆå¯é€‰ï¼‰</span>
curl -fsSL https://raw.githubusercontent.com/memovai/memov/main/install.sh | bash

<span class="hljs-comment"># æ‰‹åŠ¨åˆ›å»ºå¿«ç…§</span>
mem snap --prompt <span class="hljs-string">"ä¿®å¤ç™»å½•bug"</span> --by_user

<span class="hljs-comment"># æŸ¥çœ‹é¡¹ç›®å†å²</span>
mem <span class="hljs-built_in">history</span>

<span class="hljs-comment"># è·³è½¬åˆ°æŒ‡å®šå¿«ç…§</span>
mem jump &lt;commit-hash&gt;

<span class="hljs-comment"># æ‰“å¼€Web UI</span>
mem ui
</code></pre>
<h2 data-id="heading-21">ä¸ƒã€å¸¸è§ç–‘é—®ï¼Œä¸€æ¬¡è¯´æ¸…</h2>
<p><strong>Q1: MemoV ä¼šå–ä»£ Git å—ï¼Ÿ</strong></p>
<p>ä¸ä¼šã€‚MemoV æ˜¯ Git çš„å¢å¼ºå±‚ï¼Œåº•å±‚ä»ç„¶ä½¿ç”¨ Gitã€‚ä½ å¯ä»¥æŠŠå®ƒç†è§£ä¸º"Git çš„ AI æ—¶ä»£ç¿»è¯‘å™¨"ã€‚</p>
<p><strong>Q2: å·²æœ‰é¡¹ç›®èƒ½ç”¨å—ï¼Ÿ</strong></p>
<p>å¯ä»¥ï¼MemoV å¯ä»¥åœ¨ä»»ä½• Git é¡¹ç›®ä¸­ä½¿ç”¨ï¼Œä¸å½±å“ç°æœ‰å†å²ã€‚ä½ å¯ä»¥éšæ—¶å¼€å§‹ï¼Œä¹Ÿå¯ä»¥éšæ—¶å¸è½½ã€‚</p>
<p><strong>Q3: å›¢é˜Ÿåä½œæ€ä¹ˆåŠï¼Ÿ</strong></p>
<p>MemoV ç”Ÿæˆçš„æ˜¯æ ‡å‡† Git commitsï¼Œå›¢é˜Ÿæˆå‘˜ä¸éœ€è¦å®‰è£… MemoV ä¹Ÿèƒ½çœ‹åˆ°æ¸…æ™°çš„å†å²ã€‚ä½†å¦‚æœå…¨å›¢é˜Ÿéƒ½ç”¨ï¼Œä½“éªŒæ›´ä½³ã€‚</p>
<p><strong>Q4: æ•°æ®å®‰å…¨å—ï¼Ÿ</strong></p>
<p>å®Œå…¨æœ¬åœ°åŒ–ã€‚æ‰€æœ‰å¿«ç…§æ•°æ®å­˜å‚¨åœ¨é¡¹ç›®çš„ <code>.mem/</code> ç›®å½•ï¼Œä¸ä¼šä¸Šä¼ åˆ°ä»»ä½•æœåŠ¡å™¨ã€‚</p>
<p><strong>Q5: æ€§èƒ½å½±å“å¤§å—ï¼Ÿ</strong></p>
<p>å‡ ä¹æ— å½±å“ã€‚<code>mem snap</code> çš„æ‰§è¡Œæ—¶é—´é€šå¸¸å°äº 100msï¼Œå¯¹å¼€å‘æµç¨‹æ— æ„ŸçŸ¥ã€‚</p>
<p><strong>Q6: æ”¶è´¹å—ï¼Ÿ</strong></p>
<p>å®Œå…¨å…è´¹ï¼Œå¼€æº MIT åè®®ã€‚ä¸ªäººå’Œå•†ä¸šä½¿ç”¨éƒ½ä¸æ”¶è´¹ã€‚</p>
<h2 data-id="heading-22">å…«ã€æœ€å</h2>
<p>åœ¨ AI å¤§è§„æ¨¡å‚ä¸ç¼–ç¨‹çš„ä»Šå¤©ï¼Œè°èƒ½æ›´å¥½åœ°ç®¡ç† AI ç”Ÿæˆçš„ä»£ç å†å²ï¼Œè°å°±æŒæ¡äº†æœªæ¥çš„ä¸»åŠ¨æƒã€‚MemoV æ­£æ˜¯ä¸ºæ­¤è€Œç”Ÿçš„ä¸€æŠŠ"ç‘å£«å†›åˆ€"ï¼Œå®ƒä¼˜é›…ã€æ— æ„Ÿï¼Œå´èƒ½å®å®åœ¨åœ¨åœ°æŠŠä½ çš„é¡¹ç›®å†å²ä»"åƒåœ¾åœº"å˜æˆ"æ•…äº‹ä¹¦"ã€‚</p>
<p><strong>åˆ«å†è®© AI ç”Ÿæˆçš„ä»£ç å˜æˆå†å²é»‘æ´äº†ï¼Œç»™å®ƒåŠ ç‚¹è®°å¿†åŠ›å§ï¼</strong></p>
<p><strong>GitHub åœ°å€ï¼š</strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fmemovai%2Fmemov" target="_blank" title="https://github.com/memovai/memov" ref="nofollow noopener noreferrer">github.com/memovai/memâ€¦</a></p>
<p><strong>å®˜æ–¹ç½‘å€ï¼š</strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fmemov.ai" target="_blank" title="https://memov.ai" ref="nofollow noopener noreferrer">memov.ai</a></p>
<p><strong>å¼€æºä¸æ˜“ï¼ŒæœŸå¾…ä½ çš„ Star æ”¯æŒï¼</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Python3åŸºç¡€ï¼šç²¾é€šæµç¨‹æ§åˆ¶ï¼Œè®©ç¨‹åºâ€œæœ‰é€»è¾‘åœ°æ‰§è¡Œâ€]]></title>    <link>https://juejin.cn/post/7598818096754016307</link>    <guid>https://juejin.cn/post/7598818096754016307</guid>    <pubDate>2026-01-25T08:42:58.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7598818096754016307" data-draft-id="7598818096753999923" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Python3åŸºç¡€ï¼šç²¾é€šæµç¨‹æ§åˆ¶ï¼Œè®©ç¨‹åºâ€œæœ‰é€»è¾‘åœ°æ‰§è¡Œâ€"/> <meta itemprop="keywords" content="Python"/> <meta itemprop="datePublished" content="2026-01-25T08:42:58.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ€’æ”¾å§å¾·å¾·"/> <meta itemprop="url" content="https://juejin.cn/user/2502950820787672"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Python3åŸºç¡€ï¼šç²¾é€šæµç¨‹æ§åˆ¶ï¼Œè®©ç¨‹åºâ€œæœ‰é€»è¾‘åœ°æ‰§è¡Œâ€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2502950820787672/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ€’æ”¾å§å¾·å¾·
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-25T08:42:58.000Z" title="Sun Jan 25 2026 08:42:58 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»18åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#383838;font-size:15px;line-height:30px;letter-spacing:2px;word-break:break-word;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;scroll-behavior:smooth;background-image:linear-gradient(0deg,transparent 24%,rgba(201,195,195,.329) 25%,hsla(0,8%,80.4%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent),linear-gradient(90deg,transparent 24%,rgba(204,196,196,.226) 25%,hsla(0,4%,66.1%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent);background-color:#fff;background-size:50px 50px;padding-bottom:60px}.markdown-body ::selection{color:#fff;background-color:#a862ea}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin:24px 0 12px;color:#a862ea}.markdown-body h1{line-height:2;font-size:1.4em}.markdown-body h1~p:first-of-type:first-letter{color:#a862ea;float:left;font-size:2em;margin-right:.4em;font-weight:bolder}.markdown-body h2{font-size:1.2em}.markdown-body h3{font-size:1.1em}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;padding-left:.2em}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#a862ea}.markdown-body ol li.task-list-item,.markdown-body ul li.task-list-item{list-style:none}.markdown-body ol li.task-list-item ol,.markdown-body ol li.task-list-item ul,.markdown-body ul li.task-list-item ol,.markdown-body ul li.task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:10px}.markdown-body a,.markdown-body code,.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6,.markdown-body li,.markdown-body p{opacity:.85;vertical-align:baseline;transition:all .1s ease}.markdown-body a:hover,.markdown-body code:hover,.markdown-body h1:hover,.markdown-body h2:hover,.markdown-body h3:hover,.markdown-body h4:hover,.markdown-body h5:hover,.markdown-body h6:hover,.markdown-body li:hover,.markdown-body p:hover{opacity:1}.markdown-body a{display:inline-block;color:#a862ea;cursor:pointer;text-decoration:none;position:relative}.markdown-body a:after{content:"";position:absolute;width:98%;height:1px;bottom:0;left:0;transform:scaleX(0);background-color:#a862ea;transform-origin:bottom right;transition:transform .3s ease-in-out}.markdown-body a:hover:after{transform:scaleX(1);transform-origin:bottom left}.markdown-body a:active,.markdown-body a:link{color:#a862ea}.markdown-body img{max-width:100%;user-select:none;margin:1em 0;transition:transform .2s ease 0s;background-color:#f8f5ff;box-shadow:0 0 10px #e7daff}.markdown-body img:hover{opacity:1;box-shadow:0 0 20px #e7daff;transform:translateY(-1px)}.markdown-body blockquote{padding:.5em 1em;margin:12px 0;border-top-left-radius:2px;border-bottom-left-radius:2px;border-left:3px solid #a862ea;background-color:#f8f5ff}.markdown-body blockquote&gt;p{margin:0}.markdown-body .math{font-style:italic;margin:12px 0;padding:.5em 1em;background-color:#f8f5ff}.markdown-body .math&gt;p{margin:0}.markdown-body code{padding:2px .4em;overflow-x:auto;color:#a862ea;font-weight:700;word-break:break-word;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;background-color:#f8f5ff}.markdown-body pre{margin:2em 0}.markdown-body pre&gt;code{display:block;padding:1.5em;word-break:normal;font-size:.9em;font-style:normal;font-weight:400;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;line-height:18px;color:#383838;border-radius:2px;scroll-behavior:smooth;box-shadow:0 0 10px #e7daff}.markdown-body pre&gt;code:hover{box-shadow:0 0 20px #e7daff}.markdown-body pre&gt;code::-webkit-scrollbar{height:6px;background-color:#f8f5ff}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:#e7daff;border-bottom-left-radius:3px;border-bottom-right-radius:3px}.markdown-body hr{margin:2em 0;border-top:1px solid #a862ea}.markdown-body table{width:100%;font-size:12px;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{color:#a862ea;background:#f8f5ff}.markdown-body td,.markdown-body th{padding:.5em;border:1px solid #e7daff}.markdown-body tr{background-color:#f8f5ff}@media (max-width:720px){.markdown-body{font-size:12px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ç¬¬ä¸‰é˜¶æ®µï¼šç²¾é€šæµç¨‹æ§åˆ¶ï¼Œè®©ç¨‹åºâ€œæœ‰é€»è¾‘åœ°æ‰§è¡Œâ€</h2>
<blockquote>
<p>ğŸ˜„ç”Ÿå‘½ä¸æ¯ï¼Œå†™ä½œä¸æ­¢</p>
<p>ğŸ”¥ ç»§ç»­è¸ä¸Šå­¦ä¹ ä¹‹è·¯ï¼Œå­¦ä¹‹åˆ†äº«ç¬”è®°</p>
<p>ğŸ‘Š æ€»æœ‰ä¸€å¤©æˆ‘ä¹Ÿèƒ½åƒå„ä½å¤§ä½¬ä¸€æ ·</p>
<p>ğŸ† <a href="https://juejin.cn/user/2502950820787672" target="_blank" title="https://juejin.cn/user/2502950820787672">åšå®¢é¦–é¡µ</a> Â Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.cnblogs.com%2Flyd-code%2F" target="_blank" title="https://www.cnblogs.com/lyd-code/" ref="nofollow noopener noreferrer">@æ€’æ”¾å§å¾·å¾·</a>Â Â <a href="https://link.juejin.cn?target=https%3A%2F%2Flydandtry.github.io%2F" target="_blank" title="https://lydandtry.github.io/" ref="nofollow noopener noreferrer">Toè®°å½•é¢†åœ°</a> <a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2Fqq_43843951%3Ftype%3Dblog" target="_blank" title="https://blog.csdn.net/qq_43843951?type=blog" ref="nofollow noopener noreferrer">@ä¸€ä¸ªæœ‰æ¢¦æœ‰æˆçš„äºº</a></p>
<p>ğŸŒåˆ†äº«å­¦ä¹ å¿ƒå¾—ï¼Œæ¬¢è¿æŒ‡æ­£ï¼Œå¤§å®¶ä¸€èµ·å­¦ä¹ æˆé•¿ï¼</p>
<p>ğŸ”¥è±†åŒ…AI</p>
</blockquote>
<p><em>è½¬å‘è¯·æºå¸¦ä½œè€…ä¿¡æ¯</em>Â  <strong>@æ€’æ”¾å§å¾·å¾·(æ˜é‡‘) @ä¸€ä¸ªæœ‰æ¢¦æœ‰æˆçš„äºº(CSDN)</strong></p>
<h3 data-id="heading-1">å‰è¨€</h3>
<p>æ­å–œå¤§å®¶é¡ºåˆ©å®ŒæˆPython3åŸºç¡€å­¦ä¹ çš„ç¬¬äºŒé˜¶æ®µï¼åœ¨ç¬¬äºŒé˜¶æ®µï¼Œæˆ‘ä»¬åƒé€äº†å˜é‡ã€æ•°æ®ç±»å‹ã€è¿ç®—ç¬¦ç­‰æ ¸å¿ƒåŸºç¡€è¯­æ³•ï¼Œç›¸å½“äºæŒæ¡äº†ç¼–ç¨‹çš„â€œç§¯æœ¨â€ã€‚è€Œç¬¬ä¸‰é˜¶æ®µçš„ã€Œæµç¨‹æ§åˆ¶ã€ï¼Œå°±æ˜¯æ­å»ºè¿™äº›ç§¯æœ¨çš„â€œè§„åˆ™â€â€”â€”å®ƒèƒ½è®©ç¨‹åºæ‘†è„±â€œä»ä¸Šåˆ°ä¸‹é¡ºåºæ‰§è¡Œâ€çš„æ­»æ¿æ¨¡å¼ï¼Œæ ¹æ®ä¸åŒæ¡ä»¶åšå‡ºåˆ¤æ–­ã€é‡å¤æ‰§è¡ŒæŒ‡å®šæ“ä½œï¼ŒçœŸæ­£å®ç°â€œæ™ºèƒ½åŒ–â€é€»è¾‘ã€‚</p>
<p>æœ¬æ¬¡ç¬¬ä¸‰é˜¶æ®µï¼Œæˆ‘ä»¬é‡ç‚¹æ”»å…‹å››å¤§æ ¸å¿ƒå†…å®¹ï¼šæ¡ä»¶è¯­å¥ï¼ˆif/elif/elseï¼‰ã€å¾ªç¯è¯­å¥ï¼ˆforå¾ªç¯ã€whileå¾ªç¯ï¼‰ã€å¾ªç¯æ§åˆ¶ï¼ˆbreak/continue/passï¼‰ã€åˆ†æ”¯ä¸å¾ªç¯åµŒå¥—ã€‚æ¯ä¸€ä¸ªçŸ¥è¯†ç‚¹éƒ½æ­é…å¯ç›´æ¥å¤åˆ¶è¿è¡Œçš„ä»£ç ç¤ºä¾‹ï¼Œè¿˜æœ‰æ–°æ‰‹å¸¸è§å‘æç¤ºï¼Œè·Ÿç€æ•²ä»£ç ã€ç»ƒé€»è¾‘ï¼Œå°±èƒ½è½»æ¾æŒæ¡ï¼Œå¼€å¯Pythonç¼–ç¨‹çš„â€œé€»è¾‘è¿›é˜¶â€ä¹‹è·¯ï½</p>
<h3 data-id="heading-2">1 æ¡ä»¶è¯­å¥ï¼šif/elif/elseï¼Œè®©ç¨‹åºâ€œå­¦ä¼šåˆ¤æ–­â€</h3>
<p>ç”Ÿæ´»ä¸­æˆ‘ä»¬ç»å¸¸ä¼šåšåˆ¤æ–­ï¼šå¦‚æœä¸‹é›¨ï¼Œå°±å¸¦ä¼ï¼›å¦‚æœæ²¡ä¸‹é›¨ï¼Œå°±ä¸å¸¦ä¼ï¼›å¦‚æœä¸‹é›¨ä¸”åˆ®å¤§é£ï¼Œå°±å¸¦é›¨è¡£ã€‚Pythonä¸­çš„æ¡ä»¶è¯­å¥ï¼Œå°±æ˜¯æ¨¡æ‹Ÿè¿™ç§â€œåˆ¤æ–­é€»è¾‘â€ï¼Œè®©ç¨‹åºæ ¹æ®ä¸åŒçš„æ¡ä»¶ï¼Œæ‰§è¡Œä¸åŒçš„ä»£ç å—ã€‚æ ¸å¿ƒå…³é”®è¯ï¼šifï¼ˆå¦‚æœï¼‰ã€elifï¼ˆå¦åˆ™å¦‚æœï¼‰ã€elseï¼ˆå¦åˆ™ï¼‰ï¼Œä¸‰è€…ç»“åˆå¯è¦†ç›–æ‰€æœ‰åˆ¤æ–­åœºæ™¯ã€‚</p>
<h4 data-id="heading-3">1.1 åŸºç¡€ç”¨æ³•ï¼šif å•æ¡ä»¶åˆ¤æ–­</h4>
<p>æœ€ç®€å•çš„åˆ¤æ–­é€»è¾‘ï¼šåªè¦æ»¡è¶³ä¸€ä¸ªæ¡ä»¶ï¼Œå°±æ‰§è¡Œå¯¹åº”çš„ä»£ç ï¼›ä¸æ»¡è¶³åˆ™è·³è¿‡ã€‚è¯­æ³•æ ¼å¼ï¼š<code>if æ¡ä»¶è¡¨è¾¾å¼: ä»£ç å—</code>ï¼ˆæ³¨æ„å†’å·å’Œç¼©è¿›ï¼Œç¼©è¿›æ˜¯PythonåŒºåˆ†ä»£ç å—çš„æ ¸å¿ƒï¼Œæ¨è4ä¸ªç©ºæ ¼ï¼‰ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># ç¤ºä¾‹1ï¼šåˆ¤æ–­å¹´é¾„æ˜¯å¦æˆå¹´ï¼ˆå•æ¡ä»¶ï¼‰</span>
age = <span class="hljs-number">19</span>
<span class="hljs-keyword">if</span> age &gt;= <span class="hljs-number">18</span>:  <span class="hljs-comment"># æ¡ä»¶è¡¨è¾¾å¼ï¼šåˆ¤æ–­ageæ˜¯å¦å¤§äºç­‰äº18ï¼Œç»“æœä¸ºTrue/False</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"ä½ å·²ç»æˆå¹´å•¦ï¼"</span>)  <span class="hljs-comment"># æ¡ä»¶æ»¡è¶³ï¼ˆTrueï¼‰ï¼Œæ‰§è¡Œè¯¥ä»£ç å—</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"å¯ä»¥ç‹¬ç«‹åŠç†é“¶è¡Œå¡ï½"</span>)  <span class="hljs-comment"># åŒä¸€ç¼©è¿›ï¼Œå±äºåŒä¸€ä¸ªä»£ç å—</span>

<span class="hljs-comment"># ç¤ºä¾‹2ï¼šæ¡ä»¶ä¸æ»¡è¶³æ—¶ï¼Œè·³è¿‡ä»£ç å—</span>
age = <span class="hljs-number">16</span>
<span class="hljs-keyword">if</span> age &gt;= <span class="hljs-number">18</span>:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"ä½ å·²ç»æˆå¹´å•¦ï¼"</span>)  <span class="hljs-comment"># æ¡ä»¶ä¸æ»¡è¶³ï¼ˆFalseï¼‰ï¼Œè¯¥ä»£ç å—ä¸æ‰§è¡Œ</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"ç¨‹åºæ‰§è¡Œç»“æŸ"</span>)  <span class="hljs-comment"># ä¸åœ¨ifç¼©è¿›å†…ï¼Œæ— è®ºæ¡ä»¶æ˜¯å¦æ»¡è¶³ï¼Œéƒ½ä¼šæ‰§è¡Œ</span>
</code></pre>
<p><strong>æ–°æ‰‹é¿å‘</strong>ï¼šä¸è¦å¿˜è®°ifåé¢çš„å†’å·ï¼ˆ:ï¼‰ï¼Œä¹Ÿä¸è¦æ··æ·†ç¼©è¿›ï¼ˆåŒä¸€ä»£ç å—å¿…é¡»ç¼©è¿›ä¸€è‡´ï¼‰ï¼Œå¦åˆ™ä¼šæŠ¥è¯­æ³•é”™è¯¯ï¼›å¦å¤–ï¼Œæ¡ä»¶åˆ¤æ–­è¦ç”¨==ï¼ˆç­‰äºï¼‰ï¼Œä¸è¦ç”¨=ï¼ˆèµ‹å€¼ï¼‰ï¼Œè¿™æ˜¯æ–°æ‰‹æœ€å¸¸è¸©çš„å‘ä¹‹ä¸€ã€‚</p>
<h4 data-id="heading-4">1.2 è¿›é˜¶ç”¨æ³•ï¼šif-else åŒæ¡ä»¶åˆ¤æ–­</h4>
<p>é€‚ç”¨äºâ€œéæ­¤å³å½¼â€çš„åœºæ™¯ï¼šæ»¡è¶³æ¡ä»¶æ‰§è¡Œifä»£ç å—ï¼Œä¸æ»¡è¶³åˆ™æ‰§è¡Œelseä»£ç å—ï¼ˆelseæ— éœ€å†™æ¡ä»¶ï¼‰ã€‚è¯­æ³•æ ¼å¼ï¼š<code>if æ¡ä»¶: ä»£ç å—1 else: ä»£ç å—2</code>ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># ç¤ºä¾‹ï¼šåˆ¤æ–­æˆç»©æ˜¯å¦åŠæ ¼ï¼ˆåŒæ¡ä»¶ï¼‰</span>
score = <span class="hljs-number">75</span>
<span class="hljs-keyword">if</span> score &gt;= <span class="hljs-number">60</span>:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"æˆç»©åŠæ ¼ï¼Œç»§ç»­åŠ æ²¹ï¼"</span>)  <span class="hljs-comment"># æ¡ä»¶æ»¡è¶³ï¼Œæ‰§è¡Œæ­¤å¤„</span>
<span class="hljs-keyword">else</span>:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"æˆç»©ä¸åŠæ ¼ï¼Œéœ€è¦è¡¥è€ƒå“¦ï½"</span>)  <span class="hljs-comment"># æ¡ä»¶ä¸æ»¡è¶³ï¼Œæ‰§è¡Œæ­¤å¤„</span>

<span class="hljs-comment"># ç®€åŒ–å†™æ³•ï¼šä¸‰å…ƒè¡¨è¾¾å¼ï¼ˆé€‚åˆç®€å•çš„if-elseåˆ¤æ–­ï¼Œä¸€è¡Œæå®šï¼‰</span>
score = <span class="hljs-number">58</span>
result = <span class="hljs-string">"åŠæ ¼"</span> <span class="hljs-keyword">if</span> score &gt;= <span class="hljs-number">60</span> <span class="hljs-keyword">else</span> <span class="hljs-string">"ä¸åŠæ ¼"</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"ä½ çš„æˆç»©ç­‰çº§ï¼š<span class="hljs-subst">{result}</span>"</span>)  <span class="hljs-comment"># è¾“å‡ºï¼šä½ çš„æˆç»©ç­‰çº§ï¼šä¸åŠæ ¼</span>
</code></pre>
<p>ä¸‰å…ƒè¡¨è¾¾å¼æ˜¯if-elseçš„ç®€åŒ–å½¢å¼ï¼Œé€‚åˆç®€å•çš„èµ‹å€¼åˆ¤æ–­ï¼Œå¤æ‚é€»è¾‘è¿˜æ˜¯ç”¨å¸¸è§„if-elseæ›´æ˜“è¯»ã€‚</p>
<h4 data-id="heading-5">1.3 é«˜é˜¶ç”¨æ³•ï¼šif-elif-else å¤šæ¡ä»¶åˆ¤æ–­</h4>
<p>é€‚ç”¨äºå¤šä¸ªæ¡ä»¶å¹¶åˆ—çš„åœºæ™¯ï¼šä¾æ¬¡åˆ¤æ–­æ¯ä¸ªæ¡ä»¶ï¼Œæ»¡è¶³å…¶ä¸­ä¸€ä¸ªå°±æ‰§è¡Œå¯¹åº”çš„ä»£ç å—ï¼Œåç»­æ¡ä»¶ä¸å†åˆ¤æ–­ï¼›æ‰€æœ‰æ¡ä»¶éƒ½ä¸æ»¡è¶³ï¼Œæ‰§è¡Œelseä»£ç å—ã€‚è¯­æ³•æ ¼å¼ï¼š<code>if æ¡ä»¶1: ä»£ç å—1 elif æ¡ä»¶2: ä»£ç å—2 ... else: ä»£ç å—n</code>ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># ç¤ºä¾‹ï¼šåˆ¤æ–­æˆç»©ç­‰çº§ï¼ˆå¤šæ¡ä»¶ï¼Œè¦†ç›–ä¼˜ç§€ã€è‰¯å¥½ã€ä¸­ç­‰ã€åŠæ ¼ã€ä¸åŠæ ¼ï¼‰</span>
score = <span class="hljs-number">88</span>
<span class="hljs-keyword">if</span> score &gt;= <span class="hljs-number">90</span>:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"æˆç»©ä¼˜ç§€ï¼Œå¤ªæ£’å•¦ï¼"</span>)
<span class="hljs-keyword">elif</span> score &gt;= <span class="hljs-number">80</span>:  <span class="hljs-comment"># ä»…å½“score &lt; 90æ—¶ï¼Œæ‰ä¼šåˆ¤æ–­è¯¥æ¡ä»¶</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"æˆç»©è‰¯å¥½ï¼Œç»§ç»­åŠªåŠ›ï¼"</span>)
<span class="hljs-keyword">elif</span> score &gt;= <span class="hljs-number">70</span>:  <span class="hljs-comment"># ä»…å½“score &lt; 80æ—¶ï¼Œæ‰ä¼šåˆ¤æ–­è¯¥æ¡ä»¶</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"æˆç»©ä¸­ç­‰ï¼Œä»æœ‰æå‡ç©ºé—´ï½"</span>)
<span class="hljs-keyword">elif</span> score &gt;= <span class="hljs-number">60</span>:  <span class="hljs-comment"># ä»…å½“score &lt; 70æ—¶ï¼Œæ‰ä¼šåˆ¤æ–­è¯¥æ¡ä»¶</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"æˆç»©åŠæ ¼ï¼Œç¨³ä½ï¼"</span>)
<span class="hljs-keyword">else</span>:  <span class="hljs-comment"># æ‰€æœ‰æ¡ä»¶éƒ½ä¸æ»¡è¶³ï¼ˆscore &lt; 60ï¼‰ï¼Œæ‰§è¡Œæ­¤å¤„</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"æˆç»©ä¸åŠæ ¼ï¼Œéœ€è¦è¡¥è€ƒå“¦ï½"</span>)

<span class="hljs-comment"># å®é™…åº”ç”¨ï¼šåˆ¤æ–­è¾“å…¥çš„æ•°å­—æ­£è´Ÿæ€§</span>
num = <span class="hljs-built_in">float</span>(<span class="hljs-built_in">input</span>(<span class="hljs-string">"è¯·è¾“å…¥ä¸€ä¸ªæ•°å­—ï¼š"</span>))
<span class="hljs-keyword">if</span> num &gt; <span class="hljs-number">0</span>:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"<span class="hljs-subst">{num}</span> æ˜¯æ­£æ•°"</span>)
<span class="hljs-keyword">elif</span> num == <span class="hljs-number">0</span>:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"<span class="hljs-subst">{num}</span> æ—¢ä¸æ˜¯æ­£æ•°ï¼Œä¹Ÿä¸æ˜¯è´Ÿæ•°"</span>)
<span class="hljs-keyword">else</span>:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"<span class="hljs-subst">{num}</span> æ˜¯è´Ÿæ•°"</span>)
</code></pre>
<p><strong>å…³é”®æç¤º</strong>ï¼šelifå¿…é¡»è·Ÿåœ¨ifåé¢ï¼Œä¸èƒ½å•ç‹¬ä½¿ç”¨ï¼›å¤šä¸ªelifçš„æ¡ä»¶æ˜¯â€œäº’æ–¥â€çš„ï¼Œæ‰§è¡Œå®Œä¸€ä¸ªelifçš„ä»£ç å—åï¼Œä¼šç›´æ¥è·³è¿‡åç»­æ‰€æœ‰elifå’Œelseï¼›æ¡ä»¶é¡ºåºå¾ˆé‡è¦ï¼Œä¸è¦æŠŠèŒƒå›´å¤§çš„æ¡ä»¶å†™åœ¨å‰é¢ï¼ˆæ¯”å¦‚å…ˆå†™score &gt;=60ï¼Œå†å†™score &gt;=90ï¼Œä¼šå¯¼è‡´90åˆ†ä¹Ÿè¢«åˆ¤æ–­ä¸ºåŠæ ¼ï¼‰ã€‚</p>
<blockquote>
<p>python æ²¡æœ‰åƒ Java çš„ switch-case ï¼Œä½†å¯ä»¥é€šè¿‡å­—å…¸æ¨¡æ‹Ÿã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2Fm0_60134435%2Farticle%2Fdetails%2F135668135" target="_blank" title="https://blog.csdn.net/m0_60134435/article/details/135668135" ref="nofollow noopener noreferrer">Pythonä¸­çœŸçš„æ²¡æœ‰switchè¯­å¥å—_pythonæ²¡æœ‰switchè¯­æ³•å—-CSDNåšå®¢</a></p>
</blockquote>
<h3 data-id="heading-6">2 å¾ªç¯è¯­å¥ï¼šforå¾ªç¯ + whileå¾ªç¯ï¼Œè§£å†³â€œé‡å¤å·¥ä½œâ€</h3>
<p>ç”Ÿæ´»ä¸­å¾ˆå¤šé‡å¤çš„å·¥ä½œï¼šæ¯”å¦‚æ¯å¤©æ—©ä¸Šèµ·åºŠã€æ´—æ¼±ã€åƒæ—©é¤ï¼›æ¯”å¦‚æ‰“å°1-100çš„æ‰€æœ‰æ•°å­—ã€‚å¦‚æœç”¨ä»£ç é€è¡Œå†™è¿™äº›é‡å¤æ“ä½œï¼Œä¼šéå¸¸ç¹çã€‚è€Œå¾ªç¯è¯­å¥ï¼Œå°±æ˜¯è®©ç¨‹åºâ€œè‡ªåŠ¨é‡å¤æ‰§è¡Œâ€æŒ‡å®šä»£ç å—ï¼Œé«˜æ•ˆè§£å†³é‡å¤å·¥ä½œã€‚Pythonä¸­æ ¸å¿ƒçš„ä¸¤ç§å¾ªç¯ï¼šforå¾ªç¯ï¼ˆéå†å¾ªç¯ï¼‰ã€whileå¾ªç¯ï¼ˆæ¡ä»¶å¾ªç¯ï¼‰ï¼Œå„æœ‰é€‚ç”¨åœºæ™¯ï¼Œæˆ‘ä»¬åˆ†åˆ«æŒæ¡ã€‚</p>
<h4 data-id="heading-7">2.1 forå¾ªç¯ï¼šéå†å¯è¿­ä»£å¯¹è±¡ï¼ˆæœ€å¸¸ç”¨ï¼‰</h4>
<p>forå¾ªç¯çš„æ ¸å¿ƒæ˜¯â€œéå†â€â€”â€”ä¾æ¬¡è®¿é—®å¯è¿­ä»£å¯¹è±¡ï¼ˆå­—ç¬¦ä¸²ã€åˆ—è¡¨ã€range()å‡½æ•°ç­‰ï¼‰ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ ï¼Œéå†å®Œæ‰€æœ‰å…ƒç´ åï¼Œå¾ªç¯è‡ªåŠ¨ç»“æŸã€‚è¯­æ³•æ ¼å¼ï¼š<code>for å˜é‡å in å¯è¿­ä»£å¯¹è±¡: ä»£ç å—</code>ã€‚</p>
<p>é‡ç‚¹æŒæ¡ï¼šrange()å‡½æ•°ï¼Œç”¨äºç”ŸæˆæŒ‡å®šèŒƒå›´çš„æ•´æ•°åºåˆ—ï¼Œè¯­æ³•ï¼š<code>range(èµ·å§‹å€¼, ç»“æŸå€¼, æ­¥é•¿)</code>ï¼ˆèµ·å§‹å€¼é»˜è®¤0ï¼Œæ­¥é•¿é»˜è®¤1ï¼Œç»“æŸå€¼ä¸åŒ…å«è‡ªèº«ï¼‰ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># ç¤ºä¾‹1ï¼šéå†å­—ç¬¦ä¸²ï¼ˆä¾æ¬¡è¾“å‡ºæ¯ä¸ªå­—ç¬¦ï¼‰</span>
str1 = <span class="hljs-string">"Python"</span>
<span class="hljs-keyword">for</span> char <span class="hljs-keyword">in</span> str1:
    <span class="hljs-built_in">print</span>(char)  <span class="hljs-comment"># ä¾æ¬¡è¾“å‡ºï¼šP y t h o n</span>

<span class="hljs-comment"># ç¤ºä¾‹2ï¼šéå†åˆ—è¡¨ï¼ˆä¾æ¬¡è¾“å‡ºæ¯ä¸ªå…ƒç´ ï¼‰</span>
fruits = [<span class="hljs-string">"è‹¹æœ"</span>, <span class="hljs-string">"é¦™è•‰"</span>, <span class="hljs-string">"æ©™å­"</span>, <span class="hljs-string">"è‘¡è„"</span>]
<span class="hljs-keyword">for</span> fruit <span class="hljs-keyword">in</span> fruits:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æˆ‘å–œæ¬¢åƒï¼š<span class="hljs-subst">{fruit}</span>"</span>)

<span class="hljs-comment"># ç¤ºä¾‹3ï¼šä½¿ç”¨range()å‡½æ•°ï¼ˆç”Ÿæˆæ•´æ•°åºåˆ—ï¼Œéå†è¾“å‡º1-10ï¼‰</span>
<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, <span class="hljs-number">11</span>):  <span class="hljs-comment"># range(1,11) â†’ 1-10ï¼ˆä¸åŒ…å«11ï¼‰</span>
    <span class="hljs-built_in">print</span>(i, end=<span class="hljs-string">" "</span>)  <span class="hljs-comment"># è¾“å‡ºï¼š1 2 3 4 5 6 7 8 9 10</span>

<span class="hljs-comment"># ç¤ºä¾‹4ï¼šrange()å‡½æ•°æŒ‡å®šæ­¥é•¿ï¼ˆè¾“å‡º1-10ä¸­çš„å¥‡æ•°ï¼‰</span>
<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, <span class="hljs-number">11</span>, <span class="hljs-number">2</span>):  <span class="hljs-comment"># æ­¥é•¿ä¸º2ï¼Œæ¯æ¬¡é€’å¢2</span>
    <span class="hljs-built_in">print</span>(i, end=<span class="hljs-string">" "</span>)  <span class="hljs-comment"># è¾“å‡ºï¼š1 3 5 7 9</span>

<span class="hljs-comment"># ç¤ºä¾‹5ï¼šå®é™…åº”ç”¨ï¼šè®¡ç®—1-100çš„æ€»å’Œ</span>
total = <span class="hljs-number">0</span>
<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, <span class="hljs-number">101</span>):
    total += i  <span class="hljs-comment"># ç­‰ä»·äº total = total + i</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"\n1-100çš„æ€»å’Œæ˜¯ï¼š<span class="hljs-subst">{total}</span>"</span>)  <span class="hljs-comment"># è¾“å‡ºï¼š5050</span>
</code></pre>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šå·²çŸ¥å¾ªç¯æ¬¡æ•°ï¼ˆæ¯”å¦‚éå†å›ºå®šé•¿åº¦çš„åˆ—è¡¨ã€ç”Ÿæˆå›ºå®šèŒƒå›´çš„æ•°å­—ï¼‰ï¼Œä¼˜å…ˆç”¨forå¾ªç¯ï¼Œç®€æ´é«˜æ•ˆã€‚</p>
<h4 data-id="heading-8">2.2 whileå¾ªç¯ï¼šæ¡ä»¶æ»¡è¶³å°±å¾ªç¯ï¼ˆæœªçŸ¥å¾ªç¯æ¬¡æ•°ï¼‰</h4>
<p>whileå¾ªç¯çš„æ ¸å¿ƒæ˜¯â€œæ¡ä»¶åˆ¤æ–­â€â€”â€”åªè¦æ¡ä»¶è¡¨è¾¾å¼çš„ç»“æœä¸ºTrueï¼Œå°±ä¸€ç›´æ‰§è¡Œä»£ç å—ï¼›å½“æ¡ä»¶è¡¨è¾¾å¼ä¸ºFalseæ—¶ï¼Œå¾ªç¯ç»“æŸã€‚è¯­æ³•æ ¼å¼ï¼š<code>while æ¡ä»¶è¡¨è¾¾å¼: ä»£ç å—</code>ã€‚</p>
<p><strong>æ–°æ‰‹å¿…è®°</strong>ï¼šwhileå¾ªç¯å¿…é¡»åœ¨ä»£ç å—ä¸­â€œä¿®æ”¹å¾ªç¯æ¡ä»¶â€ï¼ˆæ¯”å¦‚å˜é‡é€’å¢ã€é€’å‡ï¼‰ï¼Œå¦åˆ™ä¼šå¯¼è‡´â€œæ— é™å¾ªç¯â€ï¼ˆç¨‹åºä¸€ç›´æ‰§è¡Œï¼Œæ— æ³•ç»ˆæ­¢ï¼Œéœ€æ‰‹åŠ¨åœæ­¢ï¼‰ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># ç¤ºä¾‹1ï¼šåŸºç¡€ç”¨æ³•ï¼šæ‰“å°1-5ï¼ˆå·²çŸ¥æ¬¡æ•°ï¼Œç”¨whileæ¨¡æ‹Ÿï¼‰</span>
count = <span class="hljs-number">1</span>  <span class="hljs-comment"># åˆå§‹åŒ–å¾ªç¯å˜é‡</span>
<span class="hljs-keyword">while</span> count &lt;= <span class="hljs-number">5</span>:  <span class="hljs-comment"># å¾ªç¯æ¡ä»¶ï¼šcountå°äºç­‰äº5</span>
    <span class="hljs-built_in">print</span>(count)
    count += <span class="hljs-number">1</span>  <span class="hljs-comment"># ä¿®æ”¹å¾ªç¯æ¡ä»¶ï¼ˆcounté€’å¢1ï¼‰ï¼Œé¿å…æ— é™å¾ªç¯</span>
<span class="hljs-comment"># è¾“å‡ºï¼š1 2 3 4 5</span>

<span class="hljs-comment"># ç¤ºä¾‹2ï¼šæœªçŸ¥å¾ªç¯æ¬¡æ•°ï¼šè®©ç”¨æˆ·è¾“å…¥æ•°å­—ï¼Œç›´åˆ°è¾“å…¥0åœæ­¢</span>
num = <span class="hljs-number">1</span>  <span class="hljs-comment"># åˆå§‹åŒ–å˜é‡ï¼ˆé¿å…æ¡ä»¶åˆ¤æ–­æŠ¥é”™ï¼‰</span>
<span class="hljs-keyword">while</span> num != <span class="hljs-number">0</span>:
    num = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>(<span class="hljs-string">"è¯·è¾“å…¥ä¸€ä¸ªæ•°å­—ï¼ˆè¾“å…¥0åœæ­¢ï¼‰ï¼š"</span>))
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ä½ è¾“å…¥çš„æ•°å­—æ˜¯ï¼š<span class="hljs-subst">{num}</span>"</span>)
<span class="hljs-comment"># æ‰§è¡Œæ•ˆæœï¼šç”¨æˆ·è¾“å…¥1â†’è¾“å‡º1ï¼Œè¾“å…¥2â†’è¾“å‡º2ï¼Œè¾“å…¥0â†’è¾“å‡º0ï¼Œå¾ªç¯ç»“æŸ</span>

<span class="hljs-comment"># ç¤ºä¾‹3ï¼šå®é™…åº”ç”¨ï¼šè®¡ç®—1-100çš„å¶æ•°å’Œ</span>
even_total = <span class="hljs-number">0</span>
i = <span class="hljs-number">2</span>
<span class="hljs-keyword">while</span> i &lt;= <span class="hljs-number">100</span>:
    even_total += i
    i += <span class="hljs-number">2</span>  <span class="hljs-comment"># æ­¥é•¿ä¸º2ï¼Œåªå–å¶æ•°</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"1-100çš„å¶æ•°å’Œæ˜¯ï¼š<span class="hljs-subst">{even_total}</span>"</span>)  <span class="hljs-comment"># è¾“å‡ºï¼š2550</span>

<span class="hljs-comment"># ç¤ºä¾‹4ï¼šæ— é™å¾ªç¯ï¼ˆè°¨æ…ä½¿ç”¨ï¼Œéœ€æ‰‹åŠ¨ç»ˆæ­¢ï¼‰</span>
<span class="hljs-comment"># while True:</span>
<span class="hljs-comment">#     print("è¿™æ˜¯æ— é™å¾ªç¯ï¼ŒæŒ‰Ctrl+Cåœæ­¢")</span>
</code></pre>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šæœªçŸ¥å¾ªç¯æ¬¡æ•°ï¼ˆæ¯”å¦‚ç”¨æˆ·è¾“å…¥ä¸ç¡®å®šã€ç­‰å¾…æŸä¸ªæ¡ä»¶è§¦å‘ï¼‰ï¼Œç”¨whileå¾ªç¯ï¼›å·²çŸ¥æ¬¡æ•°ï¼Œä¼˜å…ˆç”¨forå¾ªç¯ã€‚</p>
<h4 data-id="heading-9">2.3 forå¾ªç¯ vs whileå¾ªç¯ï¼ˆæ–°æ‰‹åŒºåˆ†ï¼‰</h4>
<ul>
<li>forå¾ªç¯ï¼šéå†å¯è¿­ä»£å¯¹è±¡ï¼Œå¾ªç¯æ¬¡æ•°ç”±å¯è¿­ä»£å¯¹è±¡çš„é•¿åº¦å†³å®šï¼Œæ— éœ€æ‰‹åŠ¨æ§åˆ¶å¾ªç¯æ¡ä»¶ï¼Œä¸æ˜“å‡ºé”™ï¼›</li>
<li>whileå¾ªç¯ï¼šå¾ªç¯æ¬¡æ•°ç”±æ¡ä»¶è¡¨è¾¾å¼å†³å®šï¼Œéœ€æ‰‹åŠ¨ä¿®æ”¹å¾ªç¯æ¡ä»¶ï¼Œå®¹æ˜“å‡ºç°æ— é™å¾ªç¯ï¼Œé€‚åˆæœªçŸ¥å¾ªç¯æ¬¡æ•°çš„åœºæ™¯ï¼›</li>
<li>æ€»ç»“ï¼šèƒ½ç”¨äººforå¾ªç¯çš„åœºæ™¯ï¼Œå°½é‡ä¸ç”¨whileå¾ªç¯ï¼ˆæ›´ç®€æ´ã€æ›´å®‰å…¨ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-10">3 å¾ªç¯æ§åˆ¶ï¼šbreak/continue/passï¼Œçµæ´»æ§åˆ¶å¾ªç¯æµç¨‹</h3>
<p>æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬ä¸éœ€è¦å¾ªç¯å®Œæ•´æ‰§è¡Œæ‰€æœ‰æ¬¡æ•°â€”â€”æ¯”å¦‚éå†åˆ—è¡¨æ—¶ï¼Œæ‰¾åˆ°ç›®æ ‡å…ƒç´ å°±åœæ­¢å¾ªç¯ï¼›æˆ–è€…è·³è¿‡æŸä¸ªå…ƒç´ ï¼Œç»§ç»­æ‰§è¡Œä¸‹ä¸€æ¬¡å¾ªç¯ã€‚è¿™æ—¶å€™ï¼Œå°±éœ€è¦ç”¨åˆ°å¾ªç¯æ§åˆ¶è¯­å¥ï¼šbreakã€continueã€passï¼Œå®ƒä»¬èƒ½å¸®æˆ‘ä»¬çµæ´»æ§åˆ¶å¾ªç¯çš„æ‰§è¡Œæµç¨‹ï¼Œè®©å¾ªç¯æ›´â€œæ™ºèƒ½â€ã€‚</p>
<h4 data-id="heading-11">3.1 breakï¼šç»ˆæ­¢æ•´ä¸ªå¾ªç¯ï¼ˆå½»åº•é€€å‡ºï¼‰</h4>
<p>ä½œç”¨ï¼šå½“ç¨‹åºæ‰§è¡Œåˆ°breakæ—¶ï¼Œä¼šç«‹å³ç»ˆæ­¢å½“å‰æ‰€åœ¨çš„å¾ªç¯ï¼ˆæ— è®ºå¾ªç¯æ˜¯å¦è¿˜æœ‰å‰©ä½™æ¬¡æ•°ã€æ¡ä»¶æ˜¯å¦æ»¡è¶³ï¼‰ï¼Œè·³å‡ºå¾ªç¯ï¼Œæ‰§è¡Œå¾ªç¯åé¢çš„ä»£ç ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># ç¤ºä¾‹1ï¼šforå¾ªç¯ä¸­ç”¨breakï¼ˆæ‰¾åˆ°ç›®æ ‡å…ƒç´ åœæ­¢éå†ï¼‰</span>
fruits = [<span class="hljs-string">"è‹¹æœ"</span>, <span class="hljs-string">"é¦™è•‰"</span>, <span class="hljs-string">"æ©™å­"</span>, <span class="hljs-string">"è‘¡è„"</span>]
target = <span class="hljs-string">"æ©™å­"</span>
<span class="hljs-keyword">for</span> fruit <span class="hljs-keyword">in</span> fruits:
    <span class="hljs-keyword">if</span> fruit == target:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ‰¾åˆ°ç›®æ ‡æ°´æœï¼š<span class="hljs-subst">{fruit}</span>"</span>)
        <span class="hljs-keyword">break</span>  <span class="hljs-comment"># æ‰¾åˆ°ç›®æ ‡ï¼Œç»ˆæ­¢æ•´ä¸ªå¾ªç¯</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å½“å‰éå†ï¼š<span class="hljs-subst">{fruit}</span>"</span>)  <span class="hljs-comment"># æ‰¾åˆ°ç›®æ ‡åï¼Œè¯¥ä»£ç ä¸å†æ‰§è¡Œ</span>
<span class="hljs-comment"># è¾“å‡ºï¼šå½“å‰éå†ï¼šè‹¹æœ â†’ å½“å‰éå†ï¼šé¦™è•‰ â†’ æ‰¾åˆ°ç›®æ ‡æ°´æœï¼šæ©™å­</span>

<span class="hljs-comment"># ç¤ºä¾‹2ï¼šwhileå¾ªç¯ä¸­ç”¨breakï¼ˆè¾“å…¥æ­£ç¡®å¯†ç åœæ­¢å¾ªç¯ï¼‰</span>
password = <span class="hljs-string">"123456"</span>
<span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:
    input_pwd = <span class="hljs-built_in">input</span>(<span class="hljs-string">"è¯·è¾“å…¥å¯†ç ï¼š"</span>)
    <span class="hljs-keyword">if</span> input_pwd == password:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"å¯†ç æ­£ç¡®ï¼Œç™»å½•æˆåŠŸï¼"</span>)
        <span class="hljs-keyword">break</span>  <span class="hljs-comment"># å¯†ç æ­£ç¡®ï¼Œç»ˆæ­¢æ— é™å¾ªç¯</span>
    <span class="hljs-keyword">else</span>:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"å¯†ç é”™è¯¯ï¼Œè¯·é‡æ–°è¾“å…¥ï½"</span>)

<span class="hljs-comment"># ç¤ºä¾‹3ï¼šå®é™…åº”ç”¨ï¼šæœç´¢å¿…éœ€æ–‡ä»¶ï¼Œæ‰¾åˆ°æ‰€æœ‰ç›®æ ‡ååœæ­¢</span>
files = (<span class="hljs-string">'data1.txt'</span>, <span class="hljs-string">'config.ini'</span>, <span class="hljs-string">'data2.txt'</span>, <span class="hljs-string">'temp.log'</span>, <span class="hljs-string">'data3.txt'</span>)
required_files = (<span class="hljs-string">'config.ini'</span>, <span class="hljs-string">'data2.txt'</span>)
found_count = <span class="hljs-number">0</span>
<span class="hljs-keyword">for</span> file <span class="hljs-keyword">in</span> files:
    <span class="hljs-keyword">if</span> file <span class="hljs-keyword">in</span> required_files:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ‰¾åˆ°å¿…éœ€æ–‡ä»¶: <span class="hljs-subst">{file}</span>"</span>)
        found_count += <span class="hljs-number">1</span>
        <span class="hljs-keyword">if</span> found_count == <span class="hljs-built_in">len</span>(required_files):
            <span class="hljs-built_in">print</span>(<span class="hljs-string">"æ‰€æœ‰å¿…éœ€æ–‡ä»¶å·²æ‰¾åˆ°ï¼Œåœæ­¢æœç´¢"</span>)
            <span class="hljs-keyword">break</span>  <span class="hljs-comment"># æ‰¾åˆ°æ‰€æœ‰ç›®æ ‡ï¼Œç»ˆæ­¢å¾ªç¯</span>
<span class="hljs-keyword">else</span>:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"è­¦å‘Šï¼šæœªæ‰¾åˆ°æ‰€æœ‰å¿…éœ€æ–‡ä»¶"</span>)
</code></pre>
<h4 data-id="heading-12">3.2 continueï¼šè·³è¿‡æœ¬æ¬¡å¾ªç¯ï¼Œæ‰§è¡Œä¸‹ä¸€æ¬¡</h4>
<p>ä½œç”¨ï¼šå½“ç¨‹åºæ‰§è¡Œåˆ°continueæ—¶ï¼Œä¼šè·³è¿‡å½“å‰å¾ªç¯çš„å‰©ä½™ä»£ç ï¼Œç›´æ¥è¿›å…¥ä¸‹ä¸€æ¬¡å¾ªç¯ï¼ˆä¸ä¼šç»ˆæ­¢æ•´ä¸ªå¾ªç¯ï¼Œåªæ˜¯è·³è¿‡æœ¬æ¬¡ï¼‰ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># ç¤ºä¾‹1ï¼šforå¾ªç¯ä¸­ç”¨continueï¼ˆè·³è¿‡å¶æ•°ï¼Œåªæ‰“å°å¥‡æ•°ï¼‰</span>
<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, <span class="hljs-number">11</span>):
    <span class="hljs-keyword">if</span> i % <span class="hljs-number">2</span> == <span class="hljs-number">0</span>:  <span class="hljs-comment"># åˆ¤æ–­æ˜¯å¦ä¸ºå¶æ•°</span>
        <span class="hljs-keyword">continue</span>  <span class="hljs-comment"># è·³è¿‡æœ¬æ¬¡å¾ªç¯ï¼Œä¸æ‰§è¡Œä¸‹é¢çš„printè¯­å¥</span>
    <span class="hljs-built_in">print</span>(i, end=<span class="hljs-string">" "</span>)  <span class="hljs-comment"># è¾“å‡ºï¼š1 3 5 7 9</span>

<span class="hljs-comment"># ç¤ºä¾‹2ï¼šwhileå¾ªç¯ä¸­ç”¨continueï¼ˆè·³è¿‡è´Ÿæ•°ï¼Œåªå¤„ç†éè´Ÿæ•°ï¼‰</span>
num = <span class="hljs-number">0</span>
<span class="hljs-keyword">while</span> num &lt; <span class="hljs-number">10</span>:
    num += <span class="hljs-number">1</span>
    <span class="hljs-keyword">if</span> num &lt; <span class="hljs-number">5</span>:  <span class="hljs-comment"># è·³è¿‡1-4</span>
        <span class="hljs-keyword">continue</span>
    <span class="hljs-built_in">print</span>(num, end=<span class="hljs-string">" "</span>)  <span class="hljs-comment"># è¾“å‡ºï¼š5 6 7 8 9 10</span>

<span class="hljs-comment"># ç¤ºä¾‹3ï¼šæ•°æ®æ¸…æ´—ï¼šè·³è¿‡æ— æ•ˆæ•°æ®ï¼Œå¤„ç†æœ‰æ•ˆæ•°æ®</span>
raw_data = (<span class="hljs-number">23</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">45</span>, <span class="hljs-number">0</span>, <span class="hljs-number">12</span>, -<span class="hljs-number">5</span>, <span class="hljs-number">78</span>, <span class="hljs-literal">None</span>, <span class="hljs-number">34</span>)
processed_data = []
<span class="hljs-keyword">for</span> num <span class="hljs-keyword">in</span> raw_data:
    <span class="hljs-comment"># è·³è¿‡æ— æ•ˆæ•°æ®</span>
    <span class="hljs-keyword">if</span> num <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"å‘ç°ç©ºå€¼ï¼Œè·³è¿‡"</span>)
        <span class="hljs-keyword">continue</span>
    <span class="hljs-keyword">if</span> num &lt; <span class="hljs-number">0</span>:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å‘ç°è´Ÿå€¼ <span class="hljs-subst">{num}</span>ï¼Œè¿›è¡Œç»å¯¹å€¼å¤„ç†"</span>)
        num = <span class="hljs-built_in">abs</span>(num)
    <span class="hljs-keyword">if</span> num == <span class="hljs-number">0</span>:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"å‘ç°é›¶å€¼ï¼Œè·³è¿‡å¤„ç†"</span>)
        <span class="hljs-keyword">continue</span>
    <span class="hljs-comment"># æ•°æ®è½¬æ¢ï¼ˆè®¡ç®—å¹³æ–¹æ ¹ï¼‰</span>
    result = num ** <span class="hljs-number">0.5</span>
    processed_data.append(<span class="hljs-built_in">round</span>(result, <span class="hljs-number">2</span>))
<span class="hljs-built_in">print</span>(<span class="hljs-string">"å¤„ç†åçš„æ•°æ®:"</span>, processed_data)  <span class="hljs-comment"># è¾“å‡ºï¼š[4.8, 6.71, 3.46, 8.83, 5.83]</span>
</code></pre>
<h4 data-id="heading-13">3.3 passï¼šç©ºæ“ä½œï¼ˆå ä½ç¬¦ï¼‰</h4>
<p>ä½œç”¨ï¼špassæ˜¯ä¸€ä¸ªâ€œç©ºè¯­å¥â€ï¼Œæ‰§è¡Œåˆ°passæ—¶ï¼Œä¸ä¼šåšä»»ä½•æ“ä½œï¼Œåªæ˜¯èµ·åˆ°â€œå ä½â€çš„ä½œç”¨ã€‚å¸¸ç”¨äºï¼šæš‚æ—¶ä¸æƒ³å†™ä»£ç å—ã€è¯­æ³•ä¸Šéœ€è¦è¯­å¥ä½†ç¨‹åºä¸éœ€è¦æ‰§è¡Œä»»ä½•æ“ä½œçš„åœºæ™¯ï¼ˆæ¯”å¦‚å®šä¹‰å‡½æ•°ã€ç±»æ—¶ï¼Œå…ˆå ä½ï¼Œåç»­è¡¥å……ï¼‰ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># ç¤ºä¾‹1ï¼šforå¾ªç¯ä¸­ç”¨passï¼ˆæš‚æ—¶ä¸å†™é€»è¾‘ï¼Œå ä½ï¼‰</span>
<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">5</span>):
    <span class="hljs-keyword">pass</span>  <span class="hljs-comment"># å ä½ï¼Œä¸æ‰§è¡Œä»»ä½•æ“ä½œï¼Œå¾ªç¯æ­£å¸¸ç»“æŸ</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"å¾ªç¯æ‰§è¡Œå®Œæ¯•"</span>)  <span class="hljs-comment"># æ­£å¸¸è¾“å‡º</span>

<span class="hljs-comment"># ç¤ºä¾‹2ï¼šifæ¡ä»¶ä¸­ç”¨passï¼ˆåç»­è¡¥å……é€»è¾‘ï¼‰</span>
age = <span class="hljs-number">20</span>
<span class="hljs-keyword">if</span> age &gt;= <span class="hljs-number">18</span>:
    <span class="hljs-keyword">pass</span>  <span class="hljs-comment"># æš‚æ—¶ä¸å†™æˆå¹´åçš„é€»è¾‘ï¼Œå…ˆå ä½</span>
<span class="hljs-keyword">else</span>:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"æœªæˆå¹´ï¼Œç¦æ­¢è¿›å…¥"</span>)

<span class="hljs-comment"># ç¤ºä¾‹3ï¼šæ¡†æ¶å¼€å‘ä¸­çš„passåº”ç”¨ï¼ˆå­ç±»å¯é‡å†™æ–¹æ³•ï¼‰</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">DataProcessor</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, data</span>):
        self.data = data
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">_advanced_visualization</span>(<span class="hljs-params">self</span>):
        <span class="hljs-keyword">pass</span>  <span class="hljs-comment"># ä¸´æ—¶å ä½ï¼Œåç»­è¡¥å……é«˜çº§å¯è§†åŒ–é€»è¾‘</span>
</code></pre>
<h4 data-id="heading-14">3.4 break/continue/pass åŒºåˆ«æ€»ç»“ï¼ˆå¿…è®°ï¼‰</h4>
<ul>
<li>breakï¼šç»ˆæ­¢æ•´ä¸ªå¾ªç¯ï¼Œå½»åº•é€€å‡ºï¼›</li>
<li>continueï¼šè·³è¿‡æœ¬æ¬¡å¾ªç¯ï¼Œè¿›å…¥ä¸‹ä¸€æ¬¡ï¼Œä¸ç»ˆæ­¢æ•´ä¸ªå¾ªç¯ï¼›</li>
<li>passï¼šä¸åšä»»ä½•æ“ä½œï¼Œä»…å ä½ï¼Œä¸å½±å“å¾ªç¯æ‰§è¡Œã€‚</li>
</ul>
<h3 data-id="heading-15">4 åˆ†æ”¯ä¸å¾ªç¯åµŒå¥—ï¼šå¤æ‚é€»è¾‘çš„â€œç»„åˆæ‹³â€</h3>
<p>å®é™…ç¼–ç¨‹ä¸­ï¼Œå•ä¸€çš„æ¡ä»¶è¯­å¥ã€å•ä¸€çš„å¾ªç¯è¯­å¥ï¼Œå¾€å¾€æ— æ³•æ»¡è¶³å¤æ‚çš„é€»è¾‘éœ€æ±‚ã€‚è¿™æ—¶å€™ï¼Œå°±éœ€è¦ç”¨åˆ°â€œåµŒå¥—â€â€”â€”å°†æ¡ä»¶è¯­å¥åµŒå¥—åœ¨å¾ªç¯ä¸­ï¼Œæˆ–å°†å¾ªç¯åµŒå¥—åœ¨æ¡ä»¶è¯­å¥ä¸­ï¼Œæˆ–å°†å¾ªç¯åµŒå¥—åœ¨å¾ªç¯ä¸­ï¼Œå®ç°æ›´å¤æ‚çš„é€»è¾‘ã€‚æ ¸å¿ƒï¼š<strong>ç¼©è¿›å†³å®šä»£ç å—çš„å½’å±</strong>ï¼ŒåµŒå¥—æ—¶æ³¨æ„ç¼©è¿›ä¸€è‡´ã€‚</p>
<h4 data-id="heading-16">4.1 åˆ†æ”¯åµŒå¥—ï¼ˆif/elif/else åµŒå¥—ï¼‰</h4>
<p>åœ¨ä¸€ä¸ªæ¡ä»¶è¯­å¥çš„ä»£ç å—ä¸­ï¼Œå†åµŒå¥—å¦ä¸€ä¸ªæ¡ä»¶è¯­å¥ï¼Œç”¨äºâ€œå¤šå±‚åˆ¤æ–­â€ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># ç¤ºä¾‹ï¼šåˆ¤æ–­æˆç»©æ˜¯å¦åˆæ ¼ï¼Œåˆæ ¼åå†åˆ¤æ–­æ˜¯å¦ä¼˜ç§€</span>
score = <span class="hljs-number">92</span>
<span class="hljs-keyword">if</span> score &gt;= <span class="hljs-number">60</span>:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"æˆç»©åŠæ ¼"</span>)
    <span class="hljs-comment"># åµŒå¥—å†…å±‚æ¡ä»¶åˆ¤æ–­</span>
    <span class="hljs-keyword">if</span> score &gt;= <span class="hljs-number">90</span>:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"è€Œä¸”æ˜¯ä¼˜ç§€æˆç»©ï¼Œå¤ªå‰å®³å•¦ï¼"</span>)
    <span class="hljs-keyword">elif</span> score &gt;= <span class="hljs-number">80</span>:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"è€Œä¸”æ˜¯è‰¯å¥½æˆç»©ï¼Œç»§ç»­åŠ æ²¹ï½"</span>)
    <span class="hljs-keyword">else</span>:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"ç»§ç»­åŠªåŠ›ï¼Œäº‰å–æ›´å¥½æˆç»©ï¼"</span>)
<span class="hljs-keyword">else</span>:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"æˆç»©ä¸åŠæ ¼ï¼Œéœ€è¦è¡¥è€ƒå“¦ï½"</span>)
<span class="hljs-comment"># è¾“å‡ºï¼šæˆç»©åŠæ ¼ â†’ è€Œä¸”æ˜¯ä¼˜ç§€æˆç»©ï¼Œå¤ªå‰å®³å•¦ï¼</span>

<span class="hljs-comment"># å®é™…åº”ç”¨ï¼šåˆ¤æ–­ç”¨æˆ·ç™»å½•ï¼ˆç”¨æˆ·åå’Œå¯†ç åŒé‡éªŒè¯ï¼‰</span>
username = <span class="hljs-string">"admin"</span>
password = <span class="hljs-string">"123456"</span>
input_user = <span class="hljs-built_in">input</span>(<span class="hljs-string">"è¯·è¾“å…¥ç”¨æˆ·åï¼š"</span>)
input_pwd = <span class="hljs-built_in">input</span>(<span class="hljs-string">"è¯·è¾“å…¥å¯†ç ï¼š"</span>)
<span class="hljs-keyword">if</span> input_user == username:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"ç”¨æˆ·åæ­£ç¡®"</span>)
    <span class="hljs-keyword">if</span> input_pwd == password:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"å¯†ç æ­£ç¡®ï¼Œç™»å½•æˆåŠŸï¼"</span>)
    <span class="hljs-keyword">else</span>:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"å¯†ç é”™è¯¯ï¼Œè¯·é‡æ–°è¾“å…¥ï½"</span>)
<span class="hljs-keyword">else</span>:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"ç”¨æˆ·åé”™è¯¯ï¼Œä¸å­˜åœ¨ï¼"</span>)
</code></pre>
<h4 data-id="heading-17">2. å¾ªç¯åµŒå¥—ï¼ˆforå¾ªç¯åµŒå¥—ï¼‰</h4>
<p>åœ¨ä¸€ä¸ªforå¾ªç¯çš„ä»£ç å—ä¸­ï¼Œå†åµŒå¥—å¦ä¸€ä¸ªforå¾ªç¯ï¼Œå¸¸ç”¨äºâ€œå¤šç»´éå†â€ï¼ˆæ¯”å¦‚æ‰“å°ä¹ä¹ä¹˜æ³•è¡¨ã€éå†äºŒç»´åˆ—è¡¨ï¼‰ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># ç¤ºä¾‹1ï¼šæ‰“å°ä¹ä¹ä¹˜æ³•è¡¨ï¼ˆç»å…¸foråµŒå¥—æ¡ˆä¾‹ï¼‰</span>
<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, <span class="hljs-number">10</span>):  <span class="hljs-comment"># å¤–å±‚å¾ªç¯ï¼šæ§åˆ¶è¡Œæ•°ï¼ˆ1-9è¡Œï¼‰</span>
    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, i+<span class="hljs-number">1</span>):  <span class="hljs-comment"># å†…å±‚å¾ªç¯ï¼šæ§åˆ¶æ¯è¡Œçš„åˆ—æ•°ï¼ˆ1-iåˆ—ï¼‰</span>
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"<span class="hljs-subst">{j}</span>Ã—<span class="hljs-subst">{i}</span>=<span class="hljs-subst">{i*j}</span>"</span>, end=<span class="hljs-string">"\t"</span>)  <span class="hljs-comment"># \t ç”¨äºå¯¹é½</span>
    <span class="hljs-built_in">print</span>()  <span class="hljs-comment"># æ¯è¡Œç»“æŸåæ¢è¡Œï¼Œè¿›å…¥ä¸‹ä¸€è¡Œå¾ªç¯</span>

<span class="hljs-comment"># ç¤ºä¾‹2ï¼šéå†äºŒç»´åˆ—è¡¨ï¼ˆåˆ—è¡¨ä¸­åŒ…å«åˆ—è¡¨ï¼‰</span>
students = [
    [<span class="hljs-string">"å¼ ä¸‰"</span>, <span class="hljs-number">18</span>, <span class="hljs-number">90</span>],
    [<span class="hljs-string">"æå››"</span>, <span class="hljs-number">19</span>, <span class="hljs-number">85</span>],
    [<span class="hljs-string">"ç‹äº”"</span>, <span class="hljs-number">17</span>, <span class="hljs-number">78</span>]
]
<span class="hljs-comment"># å¤–å±‚å¾ªç¯éå†æ¯ä¸ªå­¦ç”Ÿä¿¡æ¯ï¼Œå†…å±‚å¾ªç¯éå†æ¯ä¸ªå­¦ç”Ÿçš„å…·ä½“å±æ€§</span>
<span class="hljs-keyword">for</span> student <span class="hljs-keyword">in</span> students:
    <span class="hljs-keyword">for</span> info <span class="hljs-keyword">in</span> student:
        <span class="hljs-built_in">print</span>(info, end=<span class="hljs-string">" "</span>)
    <span class="hljs-built_in">print</span>()  <span class="hljs-comment"># æ¯ä¸ªå­¦ç”Ÿä¿¡æ¯æ¢è¡Œ</span>
<span class="hljs-comment"># è¾“å‡ºï¼š</span>
<span class="hljs-comment"># å¼ ä¸‰ 18 90 </span>
<span class="hljs-comment"># æå›› 19 85 </span>
<span class="hljs-comment"># ç‹äº” 17 78</span>
</code></pre>
<h4 data-id="heading-18">4.3 å¾ªç¯åµŒå¥—ï¼ˆwhileå¾ªç¯åµŒå¥—ï¼‰</h4>
<p>åœ¨ä¸€ä¸ªwhileå¾ªç¯çš„ä»£ç å—ä¸­ï¼Œå†åµŒå¥—å¦ä¸€ä¸ªwhileå¾ªç¯ï¼Œå¸¸ç”¨äºâ€œå¤šå±‚æ¡ä»¶å¾ªç¯â€ï¼ˆæ³¨æ„æ§åˆ¶ä¸¤ä¸ªå¾ªç¯çš„æ¡ä»¶ï¼Œé¿å…æ— é™å¾ªç¯ï¼‰ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># ç¤ºä¾‹ï¼šæ‰“å°3è¡Œ4åˆ—çš„æ˜Ÿå·ï¼ˆ*ï¼‰</span>
row = <span class="hljs-number">1</span>  <span class="hljs-comment"># å¤–å±‚å¾ªç¯ï¼šæ§åˆ¶è¡Œæ•°ï¼ˆ1-3è¡Œï¼‰</span>
<span class="hljs-keyword">while</span> row &lt;= <span class="hljs-number">3</span>:
    col = <span class="hljs-number">1</span>  <span class="hljs-comment"># å†…å±‚å¾ªç¯ï¼šæ§åˆ¶æ¯è¡Œçš„åˆ—æ•°ï¼ˆ1-4åˆ—ï¼‰</span>
    <span class="hljs-keyword">while</span> col &lt;= <span class="hljs-number">4</span>:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"*"</span>, end=<span class="hljs-string">" "</span>)
        col += <span class="hljs-number">1</span>  <span class="hljs-comment"># å†…å±‚å¾ªç¯æ¡ä»¶ä¿®æ”¹</span>
    <span class="hljs-built_in">print</span>()  <span class="hljs-comment"># æ¯è¡Œç»“æŸæ¢è¡Œ</span>
    row += <span class="hljs-number">1</span>  <span class="hljs-comment"># å¤–å±‚å¾ªç¯æ¡ä»¶ä¿®æ”¹</span>
<span class="hljs-comment"># è¾“å‡ºï¼š</span>
<span class="hljs-comment"># * * * * </span>
<span class="hljs-comment"># * * * * </span>
<span class="hljs-comment"># * * * * </span>

<span class="hljs-comment"># ç¤ºä¾‹2ï¼šåŒé‡å€’è®¡æ—¶ï¼ˆå¤–å±‚å€’è®¡æ—¶3ï¼Œå†…å±‚å€’è®¡æ—¶5ï¼‰</span>
outer = <span class="hljs-number">3</span>
<span class="hljs-keyword">while</span> outer &gt; <span class="hljs-number">0</span>:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å¤–å±‚å€’è®¡æ—¶ï¼š<span class="hljs-subst">{outer}</span>"</span>)
    inner = <span class="hljs-number">5</span>
    <span class="hljs-keyword">while</span> inner &gt; <span class="hljs-number">0</span>:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"  å†…å±‚å€’è®¡æ—¶ï¼š<span class="hljs-subst">{inner}</span>"</span>)
        inner -= <span class="hljs-number">1</span>
    outer -= <span class="hljs-number">1</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"-"</span> * <span class="hljs-number">10</span>)
</code></pre>
<h4 data-id="heading-19">4.4 åˆ†æ”¯ä¸å¾ªç¯æ··åˆåµŒå¥—ï¼ˆæœ€å¸¸ç”¨ï¼‰</h4>
<p>å°†æ¡ä»¶è¯­å¥åµŒå¥—åœ¨å¾ªç¯ä¸­ï¼Œæˆ–å¾ªç¯åµŒå¥—åœ¨æ¡ä»¶è¯­å¥ä¸­ï¼Œå®ç°æ›´å¤æ‚çš„é€»è¾‘ï¼ˆå®é™…ç¼–ç¨‹ä¸­æœ€å¸¸ç”¨çš„åµŒå¥—æ–¹å¼ï¼‰ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># ç¤ºä¾‹1ï¼šå¾ªç¯ä¸­åµŒå¥—æ¡ä»¶ï¼ˆéå†1-10ï¼ŒåŒºåˆ†å¥‡æ•°ã€å¶æ•°ã€èƒ½è¢«3æ•´é™¤ï¼‰</span>
<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, <span class="hljs-number">11</span>):
    <span class="hljs-keyword">if</span> i % <span class="hljs-number">3</span> == <span class="hljs-number">0</span>:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"<span class="hljs-subst">{i}</span>ï¼šèƒ½è¢«3æ•´é™¤"</span>)
    <span class="hljs-keyword">elif</span> i % <span class="hljs-number">2</span> == <span class="hljs-number">0</span>:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"<span class="hljs-subst">{i}</span>ï¼šå¶æ•°"</span>)
    <span class="hljs-keyword">else</span>:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"<span class="hljs-subst">{i}</span>ï¼šå¥‡æ•°"</span>)

<span class="hljs-comment"># ç¤ºä¾‹2ï¼šæ¡ä»¶ä¸­åµŒå¥—å¾ªç¯ï¼ˆåˆ¤æ–­ç”¨æˆ·æ˜¯å¦ä¸ºVIPï¼ŒVIPå¯äº«å—å¾ªç¯ç¦åˆ©ï¼‰</span>
is_vip = <span class="hljs-literal">True</span>
<span class="hljs-keyword">if</span> is_vip:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"æ¬¢è¿VIPç”¨æˆ·ï¼Œæ‚¨å¯é¢†å–3ä»½ç¦åˆ©ï¼š"</span>)
    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, <span class="hljs-number">4</span>):
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"  ç¦åˆ©<span class="hljs-subst">{i}</span>ï¼š10å…ƒä¼˜æƒ åˆ¸"</span>)
<span class="hljs-keyword">else</span>:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"æ™®é€šç”¨æˆ·ï¼Œå¯å‰å¾€ä¼šå‘˜ä¸­å¿ƒå¼€é€šVIPï¼Œäº«å—æ›´å¤šç¦åˆ©ï½"</span>)

<span class="hljs-comment"># ç¤ºä¾‹3ï¼šå®é™…åº”ç”¨ï¼šç­›é€‰1-100ä¸­çš„è´¨æ•°ï¼ˆåªèƒ½è¢«1å’Œè‡ªèº«æ•´é™¤çš„æ•°ï¼‰</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"1-100ä¸­çš„è´¨æ•°ï¼š"</span>, end=<span class="hljs-string">""</span>)
<span class="hljs-keyword">for</span> num <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">2</span>, <span class="hljs-number">101</span>):  <span class="hljs-comment"># è´¨æ•°ä»2å¼€å§‹</span>
    is_prime = <span class="hljs-literal">True</span>  <span class="hljs-comment"># æ ‡è®°æ˜¯å¦ä¸ºè´¨æ•°</span>
    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">2</span>, num):  <span class="hljs-comment"># åˆ¤æ–­æ˜¯å¦èƒ½è¢«2åˆ°num-1æ•´é™¤</span>
        <span class="hljs-keyword">if</span> num % i == <span class="hljs-number">0</span>:
            is_prime = <span class="hljs-literal">False</span>
            <span class="hljs-keyword">break</span>  <span class="hljs-comment"># èƒ½è¢«æ•´é™¤ï¼Œä¸æ˜¯è´¨æ•°ï¼Œç»ˆæ­¢å†…å±‚å¾ªç¯</span>
    <span class="hljs-keyword">if</span> is_prime:
        <span class="hljs-built_in">print</span>(num, end=<span class="hljs-string">" "</span>)  <span class="hljs-comment"># è¾“å‡ºè´¨æ•°</span>
</code></pre>
<h4 data-id="heading-20">4.5 åµŒå¥—é¿å‘æŒ‡å—ï¼ˆæ–°æ‰‹å¿…çœ‹ï¼‰</h4>
<ul>
<li>ç¼©è¿›ä¸€è‡´ï¼šåŒä¸€çº§ä»£ç å—å¿…é¡»ä¿æŒç›¸åŒçš„ç¼©è¿›ï¼ˆæ¨è4ä¸ªç©ºæ ¼ï¼‰ï¼Œä¸è¦æ··ç”¨Tabå’Œç©ºæ ¼ï¼Œå¦åˆ™ä¼šæŠ¥ç¼©è¿›é”™è¯¯ï¼›</li>
<li>é€»è¾‘æ¸…æ™°ï¼šåµŒå¥—å±‚æ•°ä¸è¦è¿‡å¤šï¼ˆå»ºè®®ä¸è¶…è¿‡3å±‚ï¼‰ï¼Œå±‚æ•°è¶Šå¤šï¼Œé€»è¾‘è¶Šå¤æ‚ï¼Œè¶Šå®¹æ˜“å‡ºé”™ï¼›</li>
<li>å¾ªç¯æ¡ä»¶ï¼šåµŒå¥—å¾ªç¯ä¸­ï¼Œæ³¨æ„åˆ†åˆ«æ§åˆ¶æ¯ä¸ªå¾ªç¯çš„æ¡ä»¶ï¼Œé¿å…å‡ºç°æ— é™å¾ªç¯ï¼›</li>
<li>ä»£ç å¯è¯»æ€§ï¼šåµŒå¥—ä»£ç å¯é€‚å½“æ·»åŠ æ³¨é‡Šï¼ŒåŒºåˆ†å¤–å±‚å’Œå†…å±‚é€»è¾‘ï¼Œæ–¹ä¾¿åç»­æŸ¥çœ‹å’Œä¿®æ”¹ã€‚</li>
</ul>
<h3 data-id="heading-21">5 æ€»ç»“</h3>
<p>åˆ°è¿™é‡Œï¼ŒPython3åŸºç¡€å­¦ä¹ ç¬¬ä¸‰é˜¶æ®µã€Œæµç¨‹æ§åˆ¶ã€çš„æ ¸å¿ƒå†…å®¹å°±å…¨éƒ¨æ¢³ç†å®Œæ¯•äº†ï¼è¿™ä¸€é˜¶æ®µçš„çŸ¥è¯†ç‚¹ï¼Œæ˜¯Pythonç¼–ç¨‹çš„â€œé€»è¾‘æ ¸å¿ƒâ€â€”â€”æ¡ä»¶è¯­å¥è®©ç¨‹åºâ€œå­¦ä¼šåˆ¤æ–­â€ï¼Œå¾ªç¯è¯­å¥è®©ç¨‹åºâ€œé«˜æ•ˆé‡å¤â€ï¼Œå¾ªç¯æ§åˆ¶è®©ç¨‹åºâ€œçµæ´»è°ƒæ•´â€ï¼ŒåµŒå¥—è®©ç¨‹åºâ€œå¤„ç†å¤æ‚é€»è¾‘â€ã€‚</p>
<p>å¯¹äºæ–°æ‰‹æ¥è¯´ï¼Œè¿™ä¸€é˜¶æ®µçš„é‡ç‚¹ä¸æ˜¯æ­»è®°ç¡¬èƒŒè¯­æ³•ï¼Œè€Œæ˜¯<strong>å¤šåŠ¨æ‰‹ã€å¤šç»ƒé€»è¾‘</strong>ï¼š</p>
<ol>
<li>æ¯ä¸€æ®µä»£ç éƒ½è¦äº²æ‰‹æ•²ä¸€éï¼Œè¿è¡Œåè§‚å¯Ÿç»“æœï¼Œä¿®æ”¹å˜é‡ã€æ¡ä»¶ï¼Œçœ‹çœ‹ç»“æœä¼šå‘ç”Ÿä»€ä¹ˆå˜åŒ–ï¼›</li>
<li>é‡ç‚¹ç»ƒä¹ åµŒå¥—é€»è¾‘ï¼ˆå°¤å…¶æ˜¯ä¹ä¹ä¹˜æ³•è¡¨ã€è´¨æ•°ç­›é€‰ï¼‰ï¼Œè¿™æ˜¯æ–°æ‰‹æœ€å®¹æ˜“å¡å£³çš„åœ°æ–¹ï¼Œå¤šç»ƒå‡ æ¬¡å°±èƒ½æ‰¾åˆ°è§„å¾‹ï¼›</li>
<li>é¿å¼€å¸¸è§å‘ï¼šç¼©è¿›é”™è¯¯ã€whileæ— é™å¾ªç¯ã€ifæ¡ä»¶ç”¨=ä»£æ›¿==ã€break/continueä½œç”¨èŒƒå›´æ··æ·†ï¼›</li>
<li>å°è¯•ç”¨æµç¨‹æ§åˆ¶è§£å†³ç®€å•çš„å®é™…é—®é¢˜ï¼ˆæ¯”å¦‚æˆç»©åˆ¤æ–­ã€ç”¨æˆ·ç™»å½•ã€æ•°æ®ç­›é€‰ï¼‰ï¼Œå°†çŸ¥è¯†ç‚¹è½åœ°ã€‚</li>
</ol>
<p>ç¬¬ä¸‰é˜¶æ®µçš„å­¦ä¹ ï¼Œéš¾åº¦æ¯”ç¬¬äºŒé˜¶æ®µæœ‰æ‰€æå‡ï¼Œä½†åªè¦åšæŒæ¯å¤©ç»ƒä¹ 30åˆ†é’Ÿï¼Œå¤šæ•²ä»£ç ã€å¤šæ€è€ƒé€»è¾‘ï¼Œå°±èƒ½ç†Ÿç»ƒæŒæ¡ã€‚æµç¨‹æ§åˆ¶æ˜¯åç»­å­¦ä¹ å‡½æ•°ã€é¢å‘å¯¹è±¡ã€çˆ¬è™«ç­‰é«˜çº§çŸ¥è¯†ç‚¹çš„åŸºç¡€ï¼Œä¸€å®šè¦æ‰“ç‰¢ï¼</p>
<p>ä¸‹ä¸€ä¸ªé˜¶æ®µï¼Œæˆ‘ä»¬å°†å­¦ä¹ Pythonä¸­çš„â€œå®¹å™¨â€â€”â€”åˆ—è¡¨ã€å…ƒç»„ã€å­—å…¸ã€é›†åˆã€å­—ç¬¦ä¸²é«˜çº§æ“ä½œï¼Œå®ƒä»¬èƒ½å¸®æˆ‘ä»¬æ›´é«˜æ•ˆåœ°å­˜å‚¨å’Œå¤„ç†å¤§é‡æ•°æ®ï¼Œå±Šæ—¶ä¼šç»“åˆæœ¬é˜¶æ®µçš„æµç¨‹æ§åˆ¶çŸ¥è¯†ç‚¹ï¼Œå®ç°æ›´å¼ºå¤§çš„åŠŸèƒ½ã€‚ç»§ç»­åŠ æ²¹ï¼Œç¨³æ­¥è§£é”Pythonç¼–ç¨‹çš„æ›´å¤šæŠ€èƒ½å§ï½</p>
<hr/>
<p><em>è½¬å‘è¯·æºå¸¦ä½œè€…ä¿¡æ¯</em>Â  <strong>@æ€’æ”¾å§å¾·å¾· @ä¸€ä¸ªæœ‰æ¢¦æœ‰æˆçš„äºº</strong><br/>
æŒç»­åˆ›ä½œå¾ˆä¸å®¹æ˜“ï¼Œä½œè€…å°†ä»¥å°½å¯èƒ½çš„è¯¦ç»†æŠŠæ‰€å­¦çŸ¥è¯†åˆ†äº«å„ä½å¼€å‘è€…ï¼Œä¸€èµ·è¿›æ­¥ä¸€èµ·å­¦ä¹ ã€‚<strong>è½¬è½½è¯·æºå¸¦é“¾æ¥ï¼Œè½¬è½½åˆ°å¾®ä¿¡å…¬ä¼—å·è¯·å‹¿é€‰æ‹©åŸåˆ›ï¼Œè°¢è°¢ï¼</strong><br/>
ğŸ‘åˆ›ä½œä¸æ˜“ï¼Œå¦‚æœ‰é”™è¯¯è¯·æŒ‡æ­£ï¼Œæ„Ÿè°¢è§‚çœ‹ï¼è®°å¾—ç‚¹èµå“¦ï¼ğŸ‘<br/>
è°¢è°¢æ”¯æŒï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[TRAE æ´»åŠ¨åˆ†äº«ï½œAI é‡æ„äº§å“è®¾è®¡é“¾è·¯ï¼Œè¿™åœºé©å‘½æœ‰å¤šé¢ è¦†ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7598947628467339310</link>    <guid>https://juejin.cn/post/7598947628467339310</guid>    <pubDate>2026-01-25T08:42:51.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7598947628467339310" data-draft-id="7598712670153687049" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content=" TRAE æ´»åŠ¨åˆ†äº«ï½œAI é‡æ„äº§å“è®¾è®¡é“¾è·¯ï¼Œè¿™åœºé©å‘½æœ‰å¤šé¢ è¦†ï¼Ÿ"/> <meta itemprop="keywords" content="Trae,å‰ç«¯,è®¾è®¡"/> <meta itemprop="datePublished" content="2026-01-25T08:42:51.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="JowayYoung"/> <meta itemprop="url" content="https://juejin.cn/user/2330620350432110"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
             TRAE æ´»åŠ¨åˆ†äº«ï½œAI é‡æ„äº§å“è®¾è®¡é“¾è·¯ï¼Œè¿™åœºé©å‘½æœ‰å¤šé¢ è¦†ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2330620350432110/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    JowayYoung
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-25T08:42:51.000Z" title="Sun Jan 25 2026 08:42:51 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»14åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æœ¬æ–‡åŸºäº <strong>2026.01.23 å¹¿å· TRAE çº¿ä¸‹æ´»åŠ¨åˆ†äº«ä¼š</strong>çš„åŒååˆ†äº« PPT æ•´ç†å‡ºæ¥ï¼Œæ—¨åœ¨æ¢è®¨ AI æ—¶ä»£ä¸‹ï¼Œç¨‹åºå‘˜ç”šè‡³æ˜¯æ™®é€šäººç¾¤ï¼Œå¦‚ä½•åˆ©ç”¨ <strong>Trae</strong> é‡å¡‘äº§å“è®¾è®¡é“¾è·¯ï¼Œæˆä¸ºä¸€ä¸ªâ€œè¶…çº§ä¸ªä½“â€</p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5a5da2c46dea44ed8c64f6a97b39911f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSm93YXlZb3VuZw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769935371&amp;x-signature=DqWN7k%2F%2B8RylKs6AxatruWYZbGw%3D" alt="" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-0">Slide 1ï¼šå°é¢</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4369a77c930f4dfeac028458d84221f9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSm93YXlZb3VuZw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769935371&amp;x-signature=XX2ewGp1tBY8eXzQhBb8Ec7gODQ%3D" alt="" loading="lazy"/></p>
<p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯ <strong>Joway Young</strong>ã€‚ä»Šå¤©æƒ³å’Œå¤§å®¶åˆ†äº«çš„ä¸»é¢˜æ˜¯ã€Š<strong>äº§å“è®¾è®¡çš„ AI æ–°é©å‘½ï¼šåŸºäº Trae é‡å¡‘æœªæ¥çš„äº§å“è®¾è®¡é“¾è·¯</strong>ã€‹ã€‚</p>
<p>åœ¨ AI æµªæ½®ä¸‹ï¼Œäº§å“å¼€å‘çš„é—¨æ§›æ­£åœ¨è¢«é‡æ–°å®šä¹‰ã€‚æˆ‘ä»¬å¦‚ä½•åˆ©ç”¨æ–°ä¸€ä»£å·¥å…·ï¼Œæ‰“ç ´è®¾è®¡ä¸å¼€å‘çš„è¾¹ç•Œï¼Œæ˜¯æ¯ä¸€ä¸ªèŒåœºäººéƒ½å€¼å¾—æ€è€ƒçš„é—®é¢˜ã€‚</p>
<h2 data-id="heading-1">Slide 2ï¼šç›®å½•</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/686ea28166c64843936e559432356b83~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSm93YXlZb3VuZw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769935371&amp;x-signature=uHz5GYM%2FrZ26Ow3J7L2QoNxKMFo%3D" alt="" loading="lazy"/></p>
<p>ä»Šå¤©çš„åˆ†äº«ä¸»è¦åŒ…å«äº”ä¸ªéƒ¨åˆ†ï¼š</p>
<ol>
<li><strong>è¡Œä¸šç—›ç‚¹</strong>ï¼šé‚£ä¸ªâ€œåªæœ‰å¼€å‘è€…å—ä¼¤â€çš„ä¸–ç•Œï¼</li>
<li><strong>è®¤çŸ¥è§‰é†’</strong>ï¼šä¸ºä»€ä¹ˆå¼€å‘è€…æ˜¯ AI è®¾è®¡çš„æœ€ä½³äººé€‰ï¼Ÿ</li>
<li><strong>å…¥å±€è®¾è®¡</strong>ï¼šTrae - <strong>Code is Design</strong>ï¼Œä»£ç å³è®¾è®¡</li>
<li><strong>èŒä¸šè¿›åŒ–</strong>ï¼šä»â€œåŠŸèƒ½å®ç°è€…â€åˆ°â€œè¶…çº§ä¸ªä½“â€</li>
<li><strong>æœªæ¥å±•æœ›</strong>ï¼šæ¯ä¸ªäººéƒ½æ˜¯ä¸€ä¸ªâ€œäº§å“ä¸»ç†äººâ€</li>
</ol>
<h2 data-id="heading-2">Slide 3ï¼šè¡Œä¸šç—›ç‚¹</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b981d1ed68a24bbb8f986b220668e6f2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSm93YXlZb3VuZw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769935371&amp;x-signature=WP902l1LRoD2KV8%2B2A209fO4zbI%3D" alt="" loading="lazy"/></p>
<p>é¦–å…ˆï¼Œè®©æˆ‘ä»¬å›åˆ°åŸç‚¹ï¼Œçœ‹çœ‹ä½œä¸ºå¼€å‘è€…çš„æˆ‘ä»¬ï¼Œåœ¨æ—¥å¸¸å·¥ä½œä¸­é¢ä¸´çš„çœŸå®å¤„å¢ƒã€‚</p>
<h2 data-id="heading-3">Slide 4ï¼šä¼ ç»Ÿäº§ç ”é“¾è·¯çš„â€œä¼ è¯ç­’â€ä¸â€œå—æ°”åŒ…â€</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2b8024f8b3c944aeb140c417024e79be~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSm93YXlZb3VuZw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769935371&amp;x-signature=tbcGbVmdeqwHBKdySz9vgQN7%2Byk%3D" alt="" loading="lazy"/></p>
<p>åœ¨ä¼ ç»Ÿçš„äº§ç ”é“¾è·¯ä¸­ï¼Œå¼€å‘è€…å¾€å¾€æ‰®æ¼”ç€â€œä¼ è¯ç­’â€å’Œâ€œå—æ°”åŒ…â€çš„è§’è‰²ï¼Œä¸»è¦ä½“ç°åœ¨ä¸‰ä¸ªæ–¹é¢ï¼š</p>
<ul>
<li><strong>æµç¨‹å†—é•¿</strong>ï¼šä» PRDã€UXã€UIã€Dev åˆ° Releaseï¼Œæ¼«é•¿çš„ç¯èŠ‚æ‹‰é•¿äº†ç ”å‘å‘¨æœŸï¼Œå¢åŠ äº†æ—¶é—´æˆæœ¬ä¸ä¸ç¡®å®šæ€§</li>
<li><strong>ä¿¡æ¯æŸè€—</strong>ï¼šæ¯ä¸€å±‚ä¼ é€’éƒ½ä¼šä¸¢å¤±ç»†èŠ‚ï¼Œå¯¼è‡´æœ€ç»ˆæˆå“åç¦»åˆè¡·ï¼Œéš¾ä»¥è¾¾åˆ°é¢„æœŸæ•ˆæœ</li>
<li><strong>æ²Ÿé€šæˆæœ¬</strong>ï¼šUI è¿˜åŸåº¦ã€äº¤äº’é€»è¾‘çš„åå¤æ‹‰æ‰¯ï¼Œæå¤§åœ°å¢åŠ äº†æ²Ÿé€šæˆæœ¬ï¼Œâ€œUI è¿™ç§äº”å½©æ–‘æ–“ä½ æ€ä¹ˆæ²¡æœ‰å®ç°ï¼Ÿâ€è¿™ç§çµé­‚æ‹·é—®ï¼Œç›¸ä¿¡å¤§å®¶éƒ½ä¸é™Œç”Ÿ</li>
</ul>
<p>å¦å¤–ï¼Œæˆ‘ä½œä¸ºä¸€ä½åœ¨ä¸€çº¿ç ”å‘å²—ä½å¹²äº†åå¹´çš„ç¨‹åºå‘˜ï¼ˆè‡³å°‘æœ‰äº”å¹´æ˜¯çº¯å‰ç«¯ï¼‰æ¥è¯´ï¼Œæ·±æœ‰æ„Ÿè§¦ã€‚</p>
<p>åœ¨ä¼ ç»Ÿçš„äº§ç ”é“¾è·¯é‡Œï¼Œâ€œ<strong>å‰ç«¯çš„åœ°ä½ä¸€ç›´éƒ½æ˜¯æœ€ä½çš„</strong>â€ã€‚é„™è§†é“¾ä¹Ÿéå¸¸æ˜æ˜¾ï¼Œ<strong>äº§å“ &gt; è¿è¥ &gt; è®¾è®¡ &gt; åç«¯ &gt; æµ‹è¯• &gt; å‰ç«¯</strong>ï¼Œä¸ç®¡ä»€ä¹ˆæ—¶å€™ï¼Œå‰ç«¯éƒ½æ˜¯æœ€å®¹æ˜“èƒŒé”…çš„å²—ä½ï¼Œä¹Ÿæœ€å®¹æ˜“è¢«æŒ¨éª‚çš„ï¼Œç‰¹åˆ«æ˜¯æ–°äººã€‚</p>
<p>å› ä¸ºè‡ªå·±ä¹Ÿæ˜¯è¿‡æ¥äººï¼Œæ‰€ä»¥å¾ˆæ˜ç™½è¿™ç§æ„Ÿå—ã€‚</p>
<h2 data-id="heading-4">Slide 5ï¼šç¨‹åºå‘˜çš„â€œä½“åŠ›æ´»â€å›°å¢ƒ</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/73e5e5a498f14271bca5da3e74c0d5fe~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSm93YXlZb3VuZw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769935371&amp;x-signature=Sx1y9ncOLbbS35H4uYnxD9W2LSE%3D" alt="" loading="lazy"/></p>
<p>åœ¨å‰ç«¯å¼€å‘ä¸­ï¼Œæˆ‘ä»¬æœ‰ <strong>90%</strong> çš„æ—¶é—´éƒ½æ˜¯åœ¨åšä¸€äº›é‡å¤ä½†åˆæ— æ³•æ€ä¹ˆæå‡è‡ªå·±çš„ä»»åŠ¡ï¼Œä»…æœ‰ <strong>10%</strong> ç”¨äºæ€è€ƒæ¶æ„ä¸æ ¸å¿ƒé€»è¾‘ã€‚ç²¾åŠ›è¢«å¤§é‡åˆ†æ•£ã€‚</p>
<p>å¦‚æœä¸å†™æ ·å¼ä»£ç å°±èƒ½ç›´æ¥å¾—åˆ°ç”Ÿäº§çº§ç•Œé¢ï¼Œå‰ç«¯å¼€å‘è€…çš„äº§èƒ½ç»å¯¹èƒ½å¤Ÿç¿»å‡ å€ã€‚æˆ‘ç”šè‡³æ€è€ƒè¿‡ï¼šâ€œ<strong>æœ‰äº† AIï¼Œæ˜¯ä¸æ˜¯å¯ä»¥ä¸å†éœ€è¦è®¾è®¡å¸ˆï¼Ÿ</strong>â€</p>
<h2 data-id="heading-5">Slide 6ï¼šè®¤çŸ¥è§‰é†’</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ecc1a570a83446d7ba9a029cc580adc5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSm93YXlZb3VuZw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769935371&amp;x-signature=5jNWCAOymgu14FyhFxfdUIpGKxM%3D" alt="" loading="lazy"/></p>
<p>è¿™å¼•å‡ºäº†æˆ‘ä»¬çš„ç¬¬äºŒä¸ªè¯é¢˜ï¼šè®¤çŸ¥è§‰é†’ã€‚ä¸ºä»€ä¹ˆå¼€å‘è€…å…¶å®æ˜¯ AI è®¾è®¡çš„æœ€ä½³äººé€‰ï¼Ÿ</p>
<h2 data-id="heading-6">Slide 7ï¼šè®¾è®¡æœ¬è´¨ä¸Šæ˜¯é€»è¾‘çš„è§†è§‰åŒ–</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d54caf11ceb04e1b8d1bff78a9f20806~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSm93YXlZb3VuZw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769935371&amp;x-signature=%2Bs2U1OyisB47wWr1B%2FICRepPAgg%3D" alt="" loading="lazy"/></p>
<p>æˆ‘ä»¬æ¥æ‹†è§£ä¸€ä¸‹è®¾è®¡çš„æœ¬è´¨ï¼š</p>
<ul>
<li><strong>Design System</strong> = ç»„ä»¶åº“ + å˜é‡ + è§„åˆ™ã€‚è¿™ä½“ç°äº†è®¾è®¡èƒŒåçš„é€»è¾‘</li>
<li><strong>Layout</strong> = ç›’å­æ¨¡å‹ + æ …æ ¼ç³»ç»Ÿã€‚è¿™åŒ…å«é€»è¾‘ç‰¹æ€§</li>
<li><strong>Interaction</strong> = çŠ¶æ€æœºã€‚éµå¾ªé€»è¾‘è§„åˆ™</li>
</ul>
<p><strong>ç»“è®º</strong>ï¼šå¼€å‘è€…å¤©ç”Ÿå…·å¤‡ç†è§£è®¾è®¡ç³»ç»Ÿåº•å±‚é€»è¾‘çš„èƒ½åŠ›ï¼Œæˆ‘ä»¬åªå·®â€œç»˜å›¾â€çš„æ‰‹æ„Ÿã€‚</p>
<h2 data-id="heading-7">Slide 8ï¼šAI å¡«å¹³â€œç»˜å›¾æ‰‹æ„Ÿâ€çš„é¸¿æ²Ÿ</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/28f392b1e7bc434b84c1d70a68adede9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSm93YXlZb3VuZw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769935371&amp;x-signature=QglKRgexk3NYk7%2Fvf5DILQacrTk%3D" alt="" loading="lazy"/></p>
<ul>
<li><strong>è¿‡å»çš„è®¾è®¡é—¨æ§›</strong>ï¼šéœ€è¦ç²¾é€š <strong>Photoshop</strong>ã€<strong>Figma</strong>ï¼ŒæŒæ¡è‰²å½©ã€å®¡ç¾ã€å­—ä½“ç­‰çŸ¥è¯†</li>
<li><strong>ç°åœ¨çš„è®¾è®¡æ–¹å¼</strong>ï¼šé€šè¿‡ Prompt æŒ‡ä»¤ã€é€»è¾‘æè¿°å’Œå®¡ç¾å†³ç­–æ¥å®Œæˆ</li>
<li><strong>æ–°å…¬å¼</strong>ï¼š<code>å¼€å‘è€…çš„é€»è¾‘æ€ç»´ + AI çš„æ‰§è¡Œèƒ½åŠ› = è¶…çº§è®¾è®¡å¸ˆ</code></li>
<li><strong>ä½ åªéœ€åšå¥½ä¸¤ä»¶äº‹</strong>ï¼šå‘Šè¯‰ AI ä½ æƒ³è¦ä»€ä¹ˆï¼ˆPromptï¼‰ï¼Œå¹¶å¯¹ç»“æœè¿›è¡Œåˆ¤æ–­ï¼ˆReviewï¼‰</li>
</ul>
<h2 data-id="heading-8">Slide 9ï¼šå…¥å±€è®¾è®¡</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9afcbd6b711c4b698d510ad2788d70d8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSm93YXlZb3VuZw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769935371&amp;x-signature=R9TXBe1hQvEx2CCNg%2FSJVYWHUBg%3D" alt="" loading="lazy"/></p>
<p>é‚£ä¹ˆï¼Œæˆ‘ä»¬å¦‚ä½•å…¥å±€è®¾è®¡ï¼Ÿç­”æ¡ˆå°±æ˜¯ <strong>Trae - Code is Design</strong>ã€‚</p>
<h2 data-id="heading-9">Slide 10ï¼šTraeï¼šä½ çš„ AI å…¨èƒ½ä¼™ä¼´</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dc5bceaa283d4d709939eb2f9e540bc1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSm93YXlZb3VuZw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769935371&amp;x-signature=4chM%2BP%2FGZD3zhxUuTf0Ky3Wsg0o%3D" alt="" loading="lazy"/></p>
<p>Trae ä¸ä»…ä»…æ˜¯ Copilotï¼Œå®ƒæ˜¯ä» Idea åˆ° Product çš„å­µåŒ–å™¨ã€‚</p>
<ul>
<li><strong>Context Awareness</strong>ï¼šå…·å¤‡ç†è§£æ•´ä¸ªé¡¹ç›®ä¸Šä¸‹æ–‡çš„èƒ½åŠ›ï¼Œæ‹¥æœ‰å…¨å±€è§†è§’</li>
<li><strong>Multi File Edit</strong>ï¼šåŒæ—¶ä¿®æ”¹ HTMLã€CSSã€JS æ–‡ä»¶ï¼Œç¡®ä¿è®¾è®¡ä¸é€»è¾‘ä¸€è‡´æ€§</li>
<li><strong>Preview &amp; Feedback</strong>ï¼šå·¦ä¾§å¯¹è¯ï¼Œå³ä¾§å®æ—¶é¢„è§ˆï¼Œæ‰€è§å³æ‰€å¾—</li>
<li><strong>Not Just Copilot</strong>ï¼šåœ¨é¡¹ç›®å…¨æµç¨‹ç»™äºˆæ”¯æŒ</li>
</ul>
<h2 data-id="heading-10">Slide 11: å®æˆ˜æ¼”ç¤ºï¼š10 åˆ†é’Ÿæ„å»ºé«˜é¢œå€¼çš„äº§å“å®˜ç½‘</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e2fa9237114248939d206c3e7c9a67ef~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSm93YXlZb3VuZw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769935371&amp;x-signature=tQFM5%2Fb3wN1VRuSSyslAl9PcFN0%3D" alt="" loading="lazy"/></p>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬é€šè¿‡ä¸€ä¸ªå®æˆ˜æ¼”ç¤ºï¼šå¦‚ä½•ç”¨ 10 åˆ†é’Ÿæ„å»ºä¸€ä¸ªé«˜é¢œå€¼çš„äº§å“å®˜ç½‘ã€‚</p>
<ul>
<li><strong>Prompt ç¤ºä¾‹</strong>ï¼šâ€œè®¾è®¡ä¸€ä¸ª AI SaaS äº§å“å®˜ç½‘é¦–é¡µï¼Œæ·±è‰²ç§‘æŠ€é£ï¼ŒåŒ…å« Hero, Feature, Section, Pricing, CTA...â€</li>
<li><strong>ç”Ÿæˆæ­¥éª¤</strong>ï¼š<code>ç”Ÿæˆéª¨æ¶ -&gt; å¡«å……æ–‡æ¡ˆ -&gt; ç¾åŒ–æ ·å¼ -&gt; æ·»åŠ äº¤äº’</code></li>
</ul>
<h2 data-id="heading-11">Slide 12 ~ 17ï¼šAI è®¾è®¡å…¥é—¨å±•ç¤º</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/711208db408845e0bf957a343ab633b6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSm93YXlZb3VuZw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769935371&amp;x-signature=GsE9ZtS0vcxu6XHiQ4c60t4e5ng%3D" alt="" loading="lazy"/></p>
<p>æˆ‘ä»¬å…ˆå‡†å¤‡ä¸€ä¸ªç®€å•çš„ HTML éª¨æ¶ï¼Œå¤§å®¶åŠ¡å¿…åŸºäºæˆ‘è¿™ä¸ªéª¨æ¶æ–‡ä»¶æ¥è®© Trae æ¥ç®¡ã€‚</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-meta">&lt;!doctype <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
	<span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"utf-8"</span>&gt;</span>
	<span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no"</span>&gt;</span>
	<span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Hello Trae<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
	<span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"https://jowayyoung.github.io/static/css/reset.css"</span>&gt;</span>
	<span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"</span>&gt;</span>
	<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://cdn.tailwindcss.com"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
	<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
		<span class="hljs-variable language_">window</span>.<span class="hljs-property">tailwind</span>.<span class="hljs-property">config</span> = {
			<span class="hljs-attr">theme</span>: {
				<span class="hljs-attr">extend</span>: {
					<span class="hljs-attr">colors</span>: {
						<span class="hljs-string">"primary"</span>: <span class="hljs-string">""</span>,
						<span class="hljs-string">"primary-dark"</span>: <span class="hljs-string">""</span>,
						<span class="hljs-string">"primary-light"</span>: <span class="hljs-string">""</span>
					}
				}
			}
		};
	</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
	<span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Hello Trae<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>

<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cfe0724dfd624c4b85779547c007cb98~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSm93YXlZb3VuZw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769935371&amp;x-signature=TJOwlAIlcT39rp4%2Bhnvy20aygNY%3D" alt="" loading="lazy"/></p>
<p>åœ¨ Trae ä¸­è¾“å…¥æ ¼å¼åŒ–çš„ Promptï¼Œæ¨¡å‹é€‰æ‹©<code>Gemini-3-Pro-Preview</code>ä»¥è·å¾—æœ€ä½³æ•ˆæœã€‚</p>
<p><code>Gemini-3-Pro-Preview</code>æ˜¯ç›®å‰åœ¨ Trae ä¸­æœ€å¥½ç”¨çš„å¤§æ¨¡å‹ï¼Œæ²¡æœ‰ä¹‹ä¸€ï¼Œå¦å¤–å¤§å®¶è¿˜å¯ä»¥ä½“éªŒä¸€ä¸‹å®ƒçš„å¤šæ¨¡æ€åŠŸèƒ½ï¼Œå°±æ˜¯é‚£ä¸ªå¯ä»¥ä¸Šä¼ å›¾ç‰‡è·å¾—ç†è§£çš„åŠŸèƒ½ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/af50d477553345598c683c76c40a2329~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSm93YXlZb3VuZw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769935371&amp;x-signature=Do8OFkYv27Xr6RWnuiTlLJ%2F8IZY%3D" alt="" loading="lazy"/></p>
<p>æ£€æŸ¥ AI ç”Ÿæˆçš„è®¾è®¡é£æ ¼æ˜¯å¦ç¬¦åˆé¢„æœŸã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3b93135fdc9145a289f4cdc63b94522f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSm93YXlZb3VuZw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769935371&amp;x-signature=JYigNwy8sxoLMt9uXBt%2F%2Fa9G34o%3D" alt="" loading="lazy"/></p>
<p>å®‰è£…æ’ä»¶ <strong>Live Server</strong>ï¼Œç‚¹å‡»å³ä¸‹è§’çš„â€œ<strong>Go Live</strong>â€è¿›è¡Œå®æ—¶é¢„è§ˆã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fccf85cfaf4247a8ba3c42fbcb6b3ab2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSm93YXlZb3VuZw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769935371&amp;x-signature=66mJgWtabI44i0H2zmXpCE5vgfY%3D" alt="" loading="lazy"/></p>
<p>è¿™æ˜¯ç”Ÿæˆçš„åˆæ­¥ UI æ•ˆæœå±•ç¤ºã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8d32e898f7094100a739242922ce8bc2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSm93YXlZb3VuZw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769935371&amp;x-signature=Cz002ESCIBrMK0%2B5Vjgn%2BcfvWwM%3D" alt="" loading="lazy"/></p>
<p>åˆ©ç”¨è‡ªç„¶è¯­è¨€ï¼ŒæŒ‡æŒ¥ Trae â€œ<strong>æŒ‡å“ªæ”¹å“ª</strong>â€ï¼Œå°†é€»è¾‘è½¬åŒ–ä¸ºè§†è§‰å…ƒç´ ã€‚</p>
<h2 data-id="heading-12">Slide 18ï¼šç”¨â€œå¼€å‘è€…è¯­è¨€â€æŒ‡æŒ¥è®¾è®¡</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0ba0ce56a4ca4ab59758050b4d02a074~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSm93YXlZb3VuZw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769935371&amp;x-signature=80T5FK5TrEHPSKY1z4eDIRlhr4w%3D" alt="" loading="lazy"/></p>
<p>ä¸ºäº†è·å¾—æ›´å¥½çš„ç»“æœï¼Œæˆ‘ä»¬éœ€è¦ç”¨â€œå¼€å‘è€…è¯­è¨€â€æ¥æŒ‡æŒ¥ï¼š</p>
<ul>
<li><strong>ç»„ä»¶åŒ–æ€ç»´</strong>ï¼šè¦æ±‚ AI å°†æŸæŸæ¨¡å—å°è£…æˆ React ç»„ä»¶ï¼Œç»Ÿä¸€æ ·å¼</li>
<li><strong>å“åº”å¼æ§åˆ¶</strong>ï¼šæ˜ç¡®æŒ‡ç¤ºâ€œç§»åŠ¨ç«¯å°† Grid æ”¹ä¸º Flex Columnâ€</li>
<li><strong>ä¸»é¢˜åŒ–å®šåˆ¶</strong>ï¼šå®šä¹‰ <strong>CSS Variables</strong>ï¼Œæ”¯æŒä¸€é”®åˆ‡æ¢æ·±è‰²/æµ…è‰²æ¨¡å¼</li>
</ul>
<h2 data-id="heading-13">Slide 19ï¼šå“åº”å¼æ§åˆ¶</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c8f09a8a85204d1b810ef0087c00b950~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSm93YXlZb3VuZw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769935371&amp;x-signature=LTpsfKtvP4rp6rOVdeqzCdN0OQQ%3D" alt="" loading="lazy"/></p>
<p>ç¡®ä¿ Appã€å°ç¨‹åºç­‰å¤šç«¯é€‚é…ã€‚</p>
<h2 data-id="heading-14">Slide 21ï¼šç»“æ„åŒ– Prompt</h2>
<p>å°†å¹³æ—¶å®è·µçš„è®¾è®¡ Prompt æ•´ç†ä¸ºç»“æ„åŒ–æç¤ºè¯ï¼Œæ•ˆæœä¼šæ›´å¥½ã€‚å¤§å®¶å¯ä»¥ Mark ä¸‹æˆ‘çš„æç¤ºè¯ï¼ŒæŠŠè¿™ä¸ªä½œä¸ºæœ€åŸºç¡€çš„ Prompt æ¨¡æ¿ï¼Œç„¶åæ”¹æ”¹ï¼Œå› ä¸ºæˆ‘çš„ä¸ä¸€å®šé€‚åˆä½ ä»¬ã€‚</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section">## Role</span>

ä½ ç°åœ¨æ˜¯ä¸€åèµ„æ·±çš„å†…å®¹ç­–åˆ’å¤§ä½¬ã€å‰ç«¯æŠ€æœ¯ä¸“å®¶ä»¥åŠ UI/UX è®¾è®¡å¤§å¸ˆã€‚ä½ å…·å¤‡æ·±åšçš„è§†è§‰è®¾è®¡ã€å¹³é¢è®¾è®¡ã€ç»„ä»¶æ¶æ„ã€æ— éšœç¢æ ‡å‡†ã€ç”¨æˆ·ä½“éªŒåŸåˆ™ä»¥åŠç°ä»£ç•Œé¢å¼€å‘çš„ä¸“ä¸šçŸ¥è¯†ã€‚

<span class="hljs-section">## Tone</span>

æˆ‘ä¼šè¾“å…¥ä¸€æ®µè®¾è®¡éœ€æ±‚ï¼Œæˆ–ä¸Šä¼ ä¸€ä»½æ–‡æ¡£æ–‡ä»¶ï¼Œä½ éœ€è¦åˆ†æå†…å®¹ï¼Œè¿ç”¨è®¾è®¡ç†è®ºä¸è·¨å¹³å°è®¾è®¡è€ƒé‡ï¼Œå°†å…¶è½¬åŒ–ä¸ºæ¼‚äº®ç¾è§‚ã€ç¬¦åˆæ— éšœç¢æ ‡å‡†çš„ä¸­æ–‡å¯è§†åŒ–ç½‘é¡µï¼ˆè®¾è®¡ç¨¿ï¼‰ã€‚

<span class="hljs-section">## Capabilitys</span>

ä¸€ã€å†…å®¹ä¸æ–¹æ³•è®ºè¦æ±‚

<span class="hljs-bullet">1.</span> <span class="hljs-strong">**æ ¸å¿ƒå†…å®¹å‘ˆç°**</span>ï¼šç½‘é¡µä¸»ä½“å†…å®¹å¿…é¡»ä½¿ç”¨ç®€ä½“ä¸­æ–‡ï¼Œç²¾å‡†æç‚¼æºæ–‡ä»¶çš„å…³é”®ä¿¡æ¯è¦ç‚¹ï¼Œè¿ç”¨å›¾è¡¨ã€æ—¶é—´è½´ã€æµç¨‹å›¾ç­‰å¯è§†åŒ–å…ƒç´ ï¼Œå°†å¤æ‚ä¿¡æ¯ç›´è§‚åŒ–ï¼Œæå‡ç”¨æˆ·ç†è§£ä½“éªŒã€‚
<span class="hljs-bullet">2.</span> <span class="hljs-strong">**ç‰ˆæƒä¿¡æ¯**</span>ï¼šç½‘é¡µåº•éƒ¨åŒºåŸŸæ·»åŠ ä½œè€…ä¿¡æ¯å†…å®¹ï¼ŒåŒ…å«ä½œè€…å§“åã€ç‰ˆæƒã€å¹´ä»½ç­‰ä¿¡æ¯ã€‚
<span class="hljs-bullet">3.</span> <span class="hljs-strong">**ç†è§£ä¸é‡æ„**</span>ï¼šä»ç†è§£ç”¨æˆ·åœºæ™¯ã€ä¸šåŠ¡ç›®æ ‡å’ŒæŠ€æœ¯é™åˆ¶å…¥æ‰‹ï¼Œåˆ†ææ–‡æ¡£ä¸­çš„ç°æœ‰æ¨¡å¼å¹¶è¯†åˆ«æ”¹è¿›æœºä¼šï¼Œä¿æŒæºæ–‡ä»¶çš„æ ¸å¿ƒä¿¡æ¯ï¼Œä½†ä½¿ç”¨æ›´åŠ æ˜“æ‡‚ã€å¯è§†åŒ–çš„æ–¹å¼å‘ˆç°ã€‚
<span class="hljs-bullet">4.</span> <span class="hljs-strong">**æ–¹æ¡ˆå»ºè®®**</span>ï¼šåœ¨è®¾è®¡å†³ç­–ä¸­æä¾›å…·ä½“ã€å¯æ“ä½œçš„å»ºè®®å’Œæ˜ç¡®çš„ç†ç”±ï¼Œæå‡ºæ—¢ç¾è§‚åˆåŠŸèƒ½å¼ºå¤§çš„è§£å†³æ–¹æ¡ˆã€‚

äºŒã€è®¾è®¡é£æ ¼ä¸ä½“ç³»æ¶æ„

<span class="hljs-bullet">1.</span> <span class="hljs-strong">**è®¾è®¡ç†å¿µ**</span>ï¼šæ•´ä½“è®¾è®¡é£æ ¼å€Ÿé‰´ Linear App (è¿™é‡Œè‡ªè¡Œå®šä¹‰è®¾è®¡é£æ ¼) çš„ç®€çº¦ç°ä»£è®¾è®¡ç†å¿µï¼Œé‡‡ç”¨ç®€æ´çš„çº¿æ¡ã€å‡ ä½•å½¢çŠ¶å’Œç•™ç™½å¤„ç†ï¼Œè¥é€ å¹²å‡€åˆ©è½ä¸”å¯Œæœ‰ç°ä»£æ„Ÿçš„è§†è§‰æ•ˆæœã€‚
<span class="hljs-bullet">2.</span> <span class="hljs-strong">**è®¾è®¡ä½“ç³»**</span>ï¼šå»ºç«‹å¯æ‰©å±•ã€å¯ç»´æŠ¤çš„è®¾è®¡ä½“ç³»ï¼ŒåŒ…å«æ¸…æ™°çš„å±‚çº§å…³ç³»ã€‚å®šä¹‰è®¾è®¡å˜é‡ï¼ˆDesign Tokensï¼‰ï¼Œå¦‚é¢œè‰²ã€æ’ç‰ˆã€é—´è·ã€é˜´å½±ç­‰ï¼Œä»¥ç¡®ä¿è®¾è®¡çš„ä¸€è‡´æ€§ã€‚
<span class="hljs-bullet">3.</span> <span class="hljs-strong">**è‰²å½©æ’ç‰ˆ**</span>ï¼šæ·±å…¥åˆ†ææºæ–‡ä»¶çš„ä¸»é¢˜å†…æ¶µï¼Œåº”ç”¨è‰²å½©ç†è®ºå¼•å¯¼ç”¨æˆ·æ³¨æ„åŠ›å¹¶ä¼ è¾¾å«ä¹‰ï¼Œæ„å»ºä¸“ä¸šå’Œè°çš„é…è‰²ä½“ç³»ã€‚åº”ç”¨æ’ç‰ˆåŸåˆ™å»ºç«‹æ¸…æ™°çš„ä¿¡æ¯å±‚çº§ï¼Œå¹³è¡¡ç•™ç™½ã€å¯¹é½å’Œè§†è§‰æ¯”é‡ä»¥è·å¾—æœ€ä½³çš„å¯è¯»æ€§ã€‚
<span class="hljs-bullet">4.</span> <span class="hljs-strong">**è§†è§‰ä¸€è‡´æ€§**</span>ï¼šåœ¨ç¡®ä¿è§†è§‰ä¸€è‡´æ€§çš„åŒæ—¶å…è®¸è¯­å¢ƒçµæ´»æ€§ï¼Œè®¾è®¡çµæ´»çš„ç½‘æ ¼ç³»ç»Ÿå’Œå¸ƒå±€æ¡†æ¶ã€‚

ä¸‰ã€æŠ€æœ¯è§„èŒƒä¸å®ç°æ„è¯†

<span class="hljs-bullet">1.</span> <span class="hljs-strong">**åŸºç¡€æŠ€æœ¯æ ˆ**</span>ï¼šä½¿ç”¨ HTMLã€CSS å’Œå¿…è¦çš„ JavaScript å¼€å‘ç½‘é¡µã€‚
<span class="hljs-bullet">2.</span> <span class="hljs-strong">**ä¸»é¢˜åˆ‡æ¢**</span>ï¼šå®ç°å®Œæ•´çš„æµ…è‰²/æ·±è‰²æ¨¡å¼åˆ‡æ¢åŠŸèƒ½ï¼Œé»˜è®¤è·Ÿéšç³»ç»Ÿè®¾ç½®ã€‚
<span class="hljs-bullet">3.</span> <span class="hljs-strong">**ä»£ç è´¨é‡ä¸ç»´æŠ¤**</span>ï¼šä»£ç ç»“æ„æ¸…æ™°ï¼Œéµå¾ªç»Ÿä¸€çš„å‘½åè§„èŒƒã€‚è€ƒè™‘è®¾è®¡å†³ç­–çš„æ€§èƒ½å½±å“ï¼Œè®¾è®¡æ—¶å…¼é¡¾å¯ç»´æŠ¤æ€§å’Œå¯æ‰©å±•æ€§ã€‚æä¾›è¿æ¥è®¾è®¡ä¸å¼€å‘çš„å®æ–½æŒ‡å¯¼ã€‚
<span class="hljs-bullet">4.</span> <span class="hljs-strong">**æ ·å¼è§„èŒƒ**</span>ï¼šä¸èƒ½åœ¨ HTML ç»“æ„ä¸­ä½¿ç”¨ <span class="hljs-code">`&lt;style&gt;`</span> æˆ–å†…è”æ ·å¼ã€‚å…¨éƒ¨æ ·å¼å¿…é¡»ä½¿ç”¨ TailwindCSS å¹¶ä½¿ç”¨ CDN å¼•å…¥ï¼Œä¸¥æ ¼éµå¾ªå®˜æ–¹æ–‡æ¡£è§„èŒƒä½¿ç”¨ utility ç±»ã€‚
<span class="hljs-bullet">5.</span> <span class="hljs-strong">**æ— éšœç¢æ ‡å‡†**</span>ï¼šç¡®ä¿è®¾è®¡ç¬¦åˆ WCAG æ— éšœç¢æ ‡å‡†ï¼Œè€ƒè™‘å¯¹æ¯”åº¦è¦æ±‚ï¼Œå¹¶åœ¨ç›¸å…³æ—¶åŒ…å« ARIA å±æ€§è¦æ±‚ã€‚

å››ã€å“åº”è®¾è®¡ä¸ç»„ä»¶å“è¶Šæ€§

<span class="hljs-bullet">1.</span> <span class="hljs-strong">**å…¨ç«¯é€‚é…**</span>ï¼šç½‘é¡µå¿…é¡»åœ¨æ‰€æœ‰ç»ˆç«¯è®¾å¤‡ä¸­éƒ½èƒ½æ­£å¸¸æ˜¾ç¤ºï¼Œè‡ªé€‚åº”ä¸åŒå±å¹•æ¯”ä¾‹ä¸åˆ†è¾¨ç‡ï¼Œä¿æŒå¸ƒå±€çš„å®Œæ•´æ€§ä¸ç¾è§‚æ€§ã€‚
<span class="hljs-bullet">2.</span> <span class="hljs-strong">**æ–­ç‚¹ä¼˜åŒ–**</span>ï¼šé’ˆå¯¹ç§»åŠ¨ç«¯ï¼ˆ&lt;768pxï¼‰ã€å¹³æ¿ç«¯ï¼ˆ768px-1024pxï¼‰å’Œæ¡Œé¢ç«¯ï¼ˆ&gt;1024pxï¼‰åˆ†åˆ«ä¼˜åŒ–å¸ƒå±€æ’ç‰ˆä¸å­—ä½“å¤§å°ã€‚
<span class="hljs-bullet">3.</span> <span class="hljs-strong">**è§¦æ§ä½“éªŒ**</span>ï¼šç¡®ä¿ç§»åŠ¨ç«¯ä¸å¹³æ¿ç«¯æ‹¥æœ‰è‰¯å¥½çš„è§¦æ§ä½“éªŒã€‚
<span class="hljs-bullet">4.</span> <span class="hljs-strong">**ç»„ä»¶è®¾è®¡**</span>ï¼šåˆ›å»ºåœ¨ä¸åŒå±å¹•å°ºå¯¸å’Œè®¾å¤‡ä¸Šéƒ½èƒ½æ— ç¼å·¥ä½œçš„ç»„ä»¶ã€‚è®¾è®¡ç»„ä»¶æ—¶åº”ç¬¦åˆå¹³å°æƒ¯ä¾‹ï¼Œæ—¢ç¾è§‚åˆåŠŸèƒ½å¥å£®ï¼Œå¹¶è€ƒè™‘é¦–æ¬¡è®¿é—®å’Œå›å¤´å®¢çš„ç”¨æˆ·ä½“éªŒã€‚

äº”ã€è§†è§‰å…ƒç´ ä¸ç»„ä»¶åº“

<span class="hljs-bullet">1.</span> <span class="hljs-strong">**å›¾æ ‡ä½¿ç”¨**</span>ï¼šä½¿ç”¨ FontAwesome æˆ– MaterialIcons (CDN å¼•å…¥)ï¼Œæ ¹æ®è¯­ä¹‰åˆç†é€‰æ‹©ï¼Œç¡®ä¿åœ¨ä¸åŒå°ºå¯¸ä¸‹æ¸…æ™°å¯è¾¨ã€‚
<span class="hljs-bullet">2.</span> <span class="hljs-strong">**å›¾åƒä½¿ç”¨**</span>ï¼šåˆç†ä½¿ç”¨ Unsplash æœåŠ¡æä¾›çš„å›¾åƒã€‚
<span class="hljs-bullet">3.</span> <span class="hljs-strong">**æ•°æ®å¯è§†åŒ–**</span>ï¼šæ·±å…¥ç†è§£æ•°æ®å†…æ¶µï¼ŒæŒ‘é€‰æœ€èƒ½ç›´è§‚è¡¨è¾¾æ•°æ®ç‰¹å¾ä¸è¶‹åŠ¿çš„å›¾è¡¨ç±»å‹ï¼ˆå¦‚æŸ±çŠ¶å›¾ã€æŠ˜çº¿å›¾ã€é¥¼å›¾ç­‰ï¼‰ã€‚
<span class="hljs-bullet">4.</span> <span class="hljs-strong">**ç»„ä»¶æ¶æ„**</span>ï¼šå»ºç«‹åŒ…å«é€‚å½“å˜ä½“ã€çŠ¶æ€å’Œç»„åˆæ¨¡å¼çš„ç»„ä»¶åº“ã€‚ç¡®ä¿ç»„ä»¶èƒ½å¤Ÿæœ‰æœºåœ°èå…¥æ›´å¹¿æ³›çš„è®¾è®¡ç”Ÿæ€ç³»ç»Ÿä¸­ã€‚
<span class="hljs-bullet">5.</span> <span class="hljs-strong">**Emoji ä½¿ç”¨**</span>ï¼šé¿å…ä½œä¸ºä¸»è¦å›¾æ ‡ï¼Œä»…åœ¨é€‚åˆçš„å†…å®¹è¡¨è¾¾ä¸­é€‚åº¦ä½¿ç”¨ã€‚

å…­ã€äº¤äº’ä½“éªŒä¸ç”¨æˆ·å¿ƒæ™º

<span class="hljs-bullet">1.</span> <span class="hljs-strong">**å¾®äº¤äº’**</span>ï¼šåœ¨å…³é”®èŠ‚ç‚¹ï¼ˆåŠ è½½ã€åˆ‡æ¢ã€æäº¤ï¼‰è®¾è®¡ç»†è…»çš„å¾®äº¤äº’åŠ¨æ•ˆï¼Œå¢å¼ºåé¦ˆå³æ—¶æ€§ä¸è¶£å‘³æ€§ã€‚
<span class="hljs-bullet">2.</span> <span class="hljs-strong">**äº¤äº’çŠ¶æ€**</span>ï¼šè€ƒè™‘æ‰€æœ‰äº¤äº’çŠ¶æ€ï¼ˆé»˜è®¤ã€æ‚¬åœã€èšç„¦ã€æ¿€æ´»ã€ç¦ç”¨ã€åŠ è½½ï¼‰ã€‚æŒ‰é’®æ‚¬åœæ—¶æœ‰è½»å¾®æ”¾å¤§ä¸å˜è‰²ï¼Œç‚¹å‡»æ—¶æœ‰æŒ‰ä¸‹æ•ˆæœï¼›å¡ç‰‡æ‚¬åœæ—¶æœ‰ç²¾è‡´é˜´å½±æˆ–è¾¹æ¡†æ•ˆæœã€‚
<span class="hljs-bullet">3.</span> <span class="hljs-strong">**è¿‡æ¸¡åŠ¨ç”»**</span>ï¼šç½‘é¡µæ»šåŠ¨æ—¶æœ‰å¹³æ»‘è¿‡æ¸¡ï¼Œå†…å®¹åŠ è½½æ—¶æœ‰ä¼˜é›…çš„æ·¡å…¥åŠ¨ç”»ã€‚
<span class="hljs-bullet">4.</span> <span class="hljs-strong">**ç”¨æˆ·ä½“éªŒæ•´åˆ**</span>ï¼šè€ƒè™‘ç”¨æˆ·å¿ƒæ™ºæ¨¡å‹å’Œäº¤äº’æ¨¡å¼ï¼Œè®¾è®¡æ³¨é‡å¯å‘ç°æ€§ã€æ˜“å­¦æ€§å’Œæ•ˆç‡ã€‚é¢„æµ‹è¾¹ç¼˜æƒ…å†µå’Œé”™è¯¯çŠ¶æ€ï¼Œå¹¶åœ¨è®¾è®¡ä¸­äºˆä»¥å¤„ç†ã€‚

ä¸ƒã€æ€§èƒ½ä¼˜åŒ–

<span class="hljs-bullet">1.</span> <span class="hljs-strong">**åŠ è½½é€Ÿåº¦**</span>ï¼šå°†é¦–æ¬¡åŠ è½½æ—¶é—´æ§åˆ¶åœ¨ 3 ç§’ä»¥å†…ï¼Œé€šè¿‡å‹ç¼©å›¾åƒã€ç²¾ç®€ä»£ç ç­‰æ–¹å¼ä¼˜åŒ–æ€§èƒ½ã€‚
<span class="hljs-bullet">2.</span> <span class="hljs-strong">**æ‡’åŠ è½½**</span>ï¼šé’ˆå¯¹é•¿å†…å®¹ã€å›¾åƒå’Œåˆ—è¡¨é‡‡ç”¨æ‡’åŠ è½½æŠ€æœ¯ï¼Œæ ¹æ®ç”¨æˆ·æ»šåŠ¨è¡Œä¸ºé€æ­¥åŠ è½½ï¼Œé™ä½åˆå§‹å‹åŠ›ã€‚

å…«ã€è¾“å‡ºæ ¼å¼

<span class="hljs-bullet">1.</span> <span class="hljs-strong">**ä»£ç äº¤ä»˜**</span>ï¼šç”Ÿæˆä¸€ä¸ªç»“æ„å®Œæ•´ã€è¯­ä¹‰æ¸…æ™°çš„å•ä¸€ HTML æ–‡æ¡£ï¼Œä»£ç ä¸­ä¸å‡†æºå¸¦ç©ºè¡Œï¼ŒåŒ…å«æ‰€æœ‰å¿…è¦çš„ CSS ä¸ JavaScriptï¼Œç¡®ä¿åœ¨ä¸»æµæµè§ˆå™¨ä¸­æ­£å¸¸è§£æï¼Œæ— è¯­æ³•é”™è¯¯ä¸å…¼å®¹é—®é¢˜ã€‚
<span class="hljs-bullet">2.</span> <span class="hljs-strong">**è§„èŒƒäº¤ä»˜**</span>ï¼šæä¾›è¯¦ç»†çš„è®¾è®¡è§„èŒƒï¼ŒåŒ…æ‹¬å°ºå¯¸ã€é¢œè‰²ï¼ˆé™„å¸¦åå…­è¿›åˆ¶ä»£ç ï¼‰ã€æ’ç‰ˆæ¯”ä¾‹å’Œé—´è·å€¼ã€‚
<span class="hljs-bullet">3.</span> <span class="hljs-strong">**æ ¡éªŒä¿®æ­£**</span>ï¼šå¯¹ä»£ç è¿›è¡Œä¸¥æ ¼æ ¡éªŒï¼Œé’ˆå¯¹æŠ¥é”™ä¿¡æ¯åŠæ—¶ä¿®æ­£ï¼Œç¡®ä¿ä»£ç è´¨é‡è¾¾åˆ°è¡Œä¸šæ ‡å‡†ã€‚

<span class="hljs-section">## Format</span>

åˆ›å»ºæœ€é€‚åˆå±•ç¤ºè¿™äº›å†…å®¹çš„å¯è§†åŒ–ç½‘é¡µ (è®¾è®¡ç¨¿ï¼‰ã€‚
</code></pre>
<h2 data-id="heading-15">Slide 22ï¼šæ›´å¤šé«˜çº§çš„ Trae AI è®¾è®¡ç©æ³•</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/22bc5e0d20b04010a47cceb00fd9787a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSm93YXlZb3VuZw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769935371&amp;x-signature=x5fCa7ar4WOXX%2BlVFko0c8SyMDk%3D" alt="" loading="lazy"/></p>
<p>Trae è¿˜èƒ½å®ç°æ›´å¤šé«˜çº§è®¾è®¡ï¼š</p>
<ul>
<li><strong>Motion Design</strong>ï¼šç‰©ç†å¼•æ“åŠ¨ç”»</li>
<li><strong>Micro-Interaction</strong>ï¼šå¾®äº¤äº’</li>
<li><strong>Neumorphism 2.0</strong>ï¼šæ–°æ‹Ÿæ€è¿›åŒ–</li>
<li><strong>Biomimetic Interaction</strong>ï¼šä»¿ç”Ÿäº¤äº’</li>
<li><strong>Liquid Light Crafting</strong>ï¼šæµå…‰é€ å½±</li>
<li><strong>Figma æµè½¬</strong>ï¼šè®¾è®¡ç¨¿ï¼ˆHTMLï¼‰è½¬è®¾è®¡å›¾å†è½¬ä»£ç çš„é€†å‘æµç¨‹</li>
</ul>
<h2 data-id="heading-16">Slide 23ï¼šèŒä¸šè¿›åŒ–</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/27e829ab925c4152b47a27f4b8b5c173~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSm93YXlZb3VuZw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769935371&amp;x-signature=Dh7VB7r0UECVjtDW4L28rq9GdRc%3D" alt="" loading="lazy"/></p>
<p>ä»åŠŸèƒ½å®ç°è€…åˆ°è¶…çº§ä¸ªä½“ï¼Œæˆ‘ä»¬çš„èŒä¸šæ­£åœ¨å‘ç”Ÿè¿›åŒ–ã€‚</p>
<h2 data-id="heading-17">Slide 24ï¼šé‡æ–°å®šä¹‰â€œå…¨æ ˆå·¥ç¨‹å¸ˆâ€ï¼Œæˆä¸ºâ€œäº§å“ä¸»ç†äººâ€</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/82c51b4452f140bbb8c5819f9de692ad~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSm93YXlZb3VuZw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769935371&amp;x-signature=vTwon02i2E2d6sFjst2R%2BmFxXtA%3D" alt="" loading="lazy"/></p>
<ul>
<li><strong>ä¼ ç»Ÿå…¨æ ˆ</strong>ï¼šæŠ€æœ¯æ ˆå †ç Œ (React/Vue + Node + SQL)</li>
<li><strong>AI æ—¶ä»£å…¨æ ˆ</strong>ï¼š
<ul>
<li><strong>äº§å“åŠ›</strong> <code>Producter</code></li>
<li><strong>è®¾è®¡åŠ›</strong> <code>Designer</code></li>
<li><strong>å·¥ç¨‹åŠ›</strong> <code>Engineer</code></li>
</ul>
</li>
<li><strong>Trae çš„ä»·å€¼</strong>ï¼šè¡¥é½çŸ­æ¿ï¼Œè®©ä¸€ä¸ªäººæˆä¸ºä¸€æ”¯é˜Ÿä¼</li>
</ul>
<h2 data-id="heading-18">Slide 25: æ¡ˆä¾‹åˆ†äº«ï¼šç‹¬ç«‹å¼€å‘è€…çš„å´›èµ·</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/158200269e59435b8ffa94fff8af6cb8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSm93YXlZb3VuZw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769935371&amp;x-signature=sr8voZ8AGbnGAepta6wOY2FhZ0M%3D" alt="" loading="lazy"/></p>
<ul>
<li><strong>ä»¥å‰</strong>ï¼šä¾èµ–åˆä¼™äººã€å¤–åŒ…ï¼Œå‘¨æœŸé•¿æˆæœ¬é«˜</li>
<li><strong>ç°åœ¨</strong>ï¼šæ¯å‘¨åˆ©ç”¨å‘¨æœ«ä¸¤å¤©ï¼Œä» Idea åˆ° Deployï¼Œ0 æ²Ÿé€šæˆæœ¬ï¼Œ100% æ‰§è¡ŒåŠ›</li>
</ul>
<h2 data-id="heading-19">Slide 26ï¼šå±•æœ›æœªæ¥</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/18c2d12881b4467994dc0edb1ab8f615~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSm93YXlZb3VuZw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769935371&amp;x-signature=e6KueNs7ry%2B6NpCG0Q9idAbl8o8%3D" alt="" loading="lazy"/></p>
<p>æ¯ä¸ªäººéƒ½æ˜¯ä¸€ä¸ªâ€œäº§å“ä¸»ç†äººâ€ã€‚</p>
<h2 data-id="heading-20">Slide 27ï¼šAI ä¸ä¼šå–ä»£ä½ ï¼Œä¼šç”¨ AI çš„äººä¼š</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0c9dc99ce39b449dad051d12bc41c6c1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSm93YXlZb3VuZw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769935371&amp;x-signature=IDxPJ5ZEm48lWIfKLteFTjAlFMY%3D" alt="" loading="lazy"/></p>
<ul>
<li><strong>è¶‹åŠ¿</strong>ï¼šCode è´¬å€¼ï¼ŒLogic ä¸ Design å‡å€¼</li>
<li><strong>å»ºè®®</strong>ï¼šåšäº§å“çš„æ¶æ„å¸ˆï¼Œè€Œéä»£ç æ¬è¿å·¥</li>
<li><strong>å¿ƒæ€</strong>ï¼šææƒ§æ¥æºäºæœªçŸ¥ï¼ŒåŠ›é‡æ¥æºäºæŒæ§</li>
</ul>
<h2 data-id="heading-21">Slide 28: Start Your Journey with Trae</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2e3de9e89c064fb3ba8d8f84e6d2a8c1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSm93YXlZb3VuZw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769935371&amp;x-signature=PSJal35NymNhzOyxOwb0w4Sx2eA%3D" alt="" loading="lazy"/></p>
<ul>
<li><strong>Action Plan</strong>ï¼šä¸‹è½½ Traeï¼Œåšä¸€ä»½ä¸ªäººä¸»é¡µæˆ–ä¸ªäººç®€å†çš„è®¾è®¡ç¨¿ï¼Œæ„Ÿå—â€œè®¾è®¡å³ä»£ç â€ã€‚</li>
<li><strong>Slogan</strong>ï¼š<strong>Code Faster, Design Better</strong></li>
</ul>
<h2 data-id="heading-22">Slide 31: The End</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/da7279b774e948d981e383953c9891b9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSm93YXlZb3VuZw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769935371&amp;x-signature=g0wnU4M9VF%2B%2F289kFklkd0d36ag%3D" alt="" loading="lazy"/></p>
<p>æˆ‘ä»¬éƒ½ä¼šæˆä¸ºâ€œäº§å“ä¸»ç†äººâ€ï¼ŒåŠ æ²¹ï¼</p>
<blockquote>
<p>æœ¬æ–‡å†…å®¹æ•´ç†è‡ªæˆ‘åœ¨ Trae å®˜æ–¹åˆ†äº«ä¼šä¸Šåšçš„ PPT å†…å®¹ï¼Œæ„Ÿè°¢é˜…è¯»</p>
</blockquote>
<h2 data-id="heading-23">æ€»ç»“ä¸å±•æœ›ï¼šæ‹¥æŠ±â€œè¶…çº§ä¸ªä½“â€çš„æ—¶ä»£</h2>
<p>å›é¡¾æ•´åœºåˆ†äº«ï¼Œæˆ‘ä»¬æ¸…æ™°åœ°çœ‹åˆ°äº† AI æŠ€æœ¯å¦‚ä½•é‡å¡‘äº§å“è®¾è®¡çš„å…¨é“¾è·¯ã€‚Trae ä¸ä»…ä»…æ˜¯ä¸€ä¸ªå·¥å…·ï¼Œå®ƒæ˜¯æ›´æ˜¯æˆ‘ä»¬çš„åˆä¼™äººã€‚</p>
<h3 data-id="heading-24">æ ¸å¿ƒæ´å¯Ÿï¼šä»£ç çš„éšå½¢ä¸ä»·å€¼çš„æ˜¾æ€§åŒ–</h3>
<p>åœ¨ AI æ—¶ä»£ï¼Œ<strong>Code</strong> æ­£åœ¨é€æ¸é€€å±…å¹•åï¼Œæˆä¸ºä¸€ç§ä¸­é—´äº§ç‰©ï¼›è€Œ <strong>Logicï¼ˆé€»è¾‘ï¼‰</strong> ä¸ <strong>Designï¼ˆè®¾è®¡ï¼‰</strong> çš„ä»·å€¼æ­£åœ¨å‰æ‰€æœªæœ‰åœ°å‡¸æ˜¾ã€‚</p>
<ul>
<li><strong>ä¼ ç»Ÿçš„å…¨æ ˆ</strong>æ˜¯æŠ€æœ¯çš„æ¨ªå‘å †ç Œï¼ˆå‰ç«¯+åç«¯+è¿ç»´ï¼‰ï¼Œå¾€å¾€åšè€Œä¸ç²¾</li>
<li><strong>æœªæ¥çš„å…¨æ ˆ</strong>æ˜¯èƒ½åŠ›çš„çºµå‘é—­ç¯ï¼ˆäº§å“å®šä¹‰+è®¾è®¡ä½“éªŒ+å·¥ç¨‹å®ç°ï¼‰</li>
</ul>
<h3 data-id="heading-25">ç»™å¼€å‘è€…çš„å»ºè®¾æ€§å»ºè®®</h3>
<ul>
<li><strong>å®Œæˆæ€ç»´è·ƒè¿ï¼šä»â€œæ‰§è¡Œè€…â€åˆ°â€œä¸»ç†äººâ€</strong>
<ul>
<li>ä¸è¦å°†è‡ªå·±å±€é™äºâ€œå†™ä»£ç çš„äººâ€ã€‚åœ¨æ¥ä¸‹æ¥çš„é¡¹ç›®ä¸­ï¼Œå°è¯•ä» Product Owner çš„è§†è§’æ€è€ƒï¼šè¿™ä¸ªåŠŸèƒ½çš„å•†ä¸šä»·å€¼æ˜¯ä»€ä¹ˆï¼Ÿä» Designer çš„è§†è§’æ€è€ƒï¼šç”¨æˆ·çš„äº¤äº’è·¯å¾„æ˜¯å¦è¶³å¤Ÿä¼˜é›…ï¼Ÿ</li>
<li><strong>Action</strong>ï¼šåœ¨æ—¥å¸¸å¼€å‘ä¸­ï¼Œå¤šé—®â€œä¸ºä»€ä¹ˆâ€ï¼Œå°‘é—®â€œæ€ä¹ˆåšâ€</li>
</ul>
</li>
<li><strong>å»ºç«‹ä¸ªäººçš„â€œAI è®¾è®¡èµ„äº§åº“â€</strong>
<ul>
<li>åˆ©ç”¨ Trae å°†ä½ è®¤å¯çš„è®¾è®¡é£æ ¼ã€äº¤äº’æ¨¡å¼å›ºåŒ–ä¸º<strong>ç»“æ„åŒ–çš„ Prompt</strong></li>
<li>ç§¯ç´¯ä¸€å¥—å±äºè‡ªå·±çš„ UI ç»„ä»¶åº“ï¼ˆåŸºäº Tailwind æˆ–å…¶ä»–æ¡†æ¶ï¼‰ï¼Œè®© AI èƒ½å¿«é€Ÿå¤ç”¨ä½ çš„å®¡ç¾æ ‡å‡†</li>
<li><strong>Action</strong>ï¼šæ•´ç†ä¸€ä»½å±äºè‡ªå·±çš„ <code>Design System Prompt</code>ï¼ŒåŒ…å«ä½ å–œæ¬¢çš„é…è‰²ã€åœ†è§’ã€é˜´å½±å’ŒåŠ¨æ•ˆå‚æ•°ç­‰</li>
</ul>
</li>
<li><strong>æ‹¥æŠ±â€œè®¾è®¡å³ä»£ç â€çš„å¼€å‘æµ</strong>
<ul>
<li>æ‰“ç ´â€œå…ˆå‡ºå›¾å†å¼€å‘â€çš„çº¿æ€§æµç¨‹ã€‚åˆ©ç”¨ Trae çš„é¢„è§ˆèƒ½åŠ›ï¼Œåœ¨ä»£ç ä¸­ç›´æ¥è¿›è¡Œè§†è§‰è¿­ä»£</li>
<li><strong>Action</strong>ï¼šå°è¯•åœ¨æ²¡æœ‰ Figma è®¾è®¡ç¨¿çš„æƒ…å†µä¸‹ï¼Œä»…é€šè¿‡è‡ªç„¶è¯­è¨€æè¿°å’Œå‚è€ƒå›¾ï¼Œä½¿ç”¨ Trae ç‹¬ç«‹å®Œæˆä¸€ä¸ª Landing Page çš„å¼€å‘</li>
</ul>
</li>
<li><strong>åŸ¹å…»â€œå®¡ç¾åŠ›â€ä¸â€œåŒç†å¿ƒâ€</strong>
<ul>
<li>æŠ€æœ¯ä¼šè¿‡æ—¶ï¼Œä½†å¯¹ç¾çš„æ„ŸçŸ¥å’Œå¯¹äººæ€§çš„ç†è§£æ°¸ä¸è¿‡æ—¶ï¼Œå¤šçœ‹ä¼˜ç§€çš„è®¾è®¡ä½œå“ï¼ˆå¦‚ Dribbble, Awwwardsï¼‰ï¼Œæå‡è§†è§‰å“å‘³</li>
<li><strong>Action</strong>ï¼šæ¯å¤©èŠ± 10 åˆ†é’Ÿæµè§ˆè®¾è®¡ç½‘ç«™ï¼Œåˆ†æä¸€ä¸ªä¼˜ç§€äº¤äº’èƒŒåçš„é€»è¾‘</li>
</ul>
</li>
</ul>
<p>æœªæ¥å·²æ¥ï¼Œè®©æˆ‘ä»¬ä¸å†åšç³»ç»Ÿçš„â€œèºä¸é’‰â€ï¼Œè€Œæ˜¯æˆä¸ºé©¾é©­ AI çš„â€œè¶…çº§ä¸ªä½“â€ã€‚</p>
<p>å†åŠ ä¸Šè¿™å‡ å¹´å¤§ç¯å¢ƒéå¸¸å·®ï¼Œ<strong>æ™‹å‡å¡è„–</strong>ï¼Œ<strong>è¢«è¾¹ç¼˜åŒ–</strong>ï¼Œ<strong>æ¶æ„è£å‘˜</strong>ï¼Œ<strong>åŠ ç­çŒæ­»</strong>ï¼Œ<strong>åˆ©ç›Šçº çº·</strong>ç­‰èŒåœºè¯é¢˜å±‚å‡ºä¸ç©·ï¼Œå¸Œæœ›æˆ‘è¿™æ¬¡åˆ†äº«å¯ä»¥ç»™å¤§å®¶å¸¦æ¥ä¸€äº›æ–°é²œä¸”èµ°åœ¨æ—¶ä»£å‰æ²¿çš„æ€æƒ³ä¸è§‚å¿µï¼Œ<strong>å¥½å¥½è§„åˆ’è‡ªå·±çš„äº‹ä¸šä¸äººç”Ÿæ‰æ˜¯é¦–ä½</strong>ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Python3åŸºç¡€ï¼šåƒé€å®¹å™¨æ•°æ®ç±»å‹ï¼Œé«˜æ•ˆå¤„ç†æµ·é‡æ•°æ®]]></title>    <link>https://juejin.cn/post/7598801700050944038</link>    <guid>https://juejin.cn/post/7598801700050944038</guid>    <pubDate>2026-01-25T08:46:02.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7598801700050944038" data-draft-id="7598827641307873331" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Python3åŸºç¡€ï¼šåƒé€å®¹å™¨æ•°æ®ç±»å‹ï¼Œé«˜æ•ˆå¤„ç†æµ·é‡æ•°æ®"/> <meta itemprop="keywords" content="Python"/> <meta itemprop="datePublished" content="2026-01-25T08:46:02.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ€’æ”¾å§å¾·å¾·"/> <meta itemprop="url" content="https://juejin.cn/user/2502950820787672"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Python3åŸºç¡€ï¼šåƒé€å®¹å™¨æ•°æ®ç±»å‹ï¼Œé«˜æ•ˆå¤„ç†æµ·é‡æ•°æ®
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2502950820787672/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ€’æ”¾å§å¾·å¾·
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-25T08:46:02.000Z" title="Sun Jan 25 2026 08:46:02 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»28åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#383838;font-size:15px;line-height:30px;letter-spacing:2px;word-break:break-word;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;scroll-behavior:smooth;background-image:linear-gradient(0deg,transparent 24%,rgba(201,195,195,.329) 25%,hsla(0,8%,80.4%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent),linear-gradient(90deg,transparent 24%,rgba(204,196,196,.226) 25%,hsla(0,4%,66.1%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent);background-color:#fff;background-size:50px 50px;padding-bottom:60px}.markdown-body ::selection{color:#fff;background-color:#a862ea}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin:24px 0 12px;color:#a862ea}.markdown-body h1{line-height:2;font-size:1.4em}.markdown-body h1~p:first-of-type:first-letter{color:#a862ea;float:left;font-size:2em;margin-right:.4em;font-weight:bolder}.markdown-body h2{font-size:1.2em}.markdown-body h3{font-size:1.1em}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;padding-left:.2em}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#a862ea}.markdown-body ol li.task-list-item,.markdown-body ul li.task-list-item{list-style:none}.markdown-body ol li.task-list-item ol,.markdown-body ol li.task-list-item ul,.markdown-body ul li.task-list-item ol,.markdown-body ul li.task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:10px}.markdown-body a,.markdown-body code,.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6,.markdown-body li,.markdown-body p{opacity:.85;vertical-align:baseline;transition:all .1s ease}.markdown-body a:hover,.markdown-body code:hover,.markdown-body h1:hover,.markdown-body h2:hover,.markdown-body h3:hover,.markdown-body h4:hover,.markdown-body h5:hover,.markdown-body h6:hover,.markdown-body li:hover,.markdown-body p:hover{opacity:1}.markdown-body a{display:inline-block;color:#a862ea;cursor:pointer;text-decoration:none;position:relative}.markdown-body a:after{content:"";position:absolute;width:98%;height:1px;bottom:0;left:0;transform:scaleX(0);background-color:#a862ea;transform-origin:bottom right;transition:transform .3s ease-in-out}.markdown-body a:hover:after{transform:scaleX(1);transform-origin:bottom left}.markdown-body a:active,.markdown-body a:link{color:#a862ea}.markdown-body img{max-width:100%;user-select:none;margin:1em 0;transition:transform .2s ease 0s;background-color:#f8f5ff;box-shadow:0 0 10px #e7daff}.markdown-body img:hover{opacity:1;box-shadow:0 0 20px #e7daff;transform:translateY(-1px)}.markdown-body blockquote{padding:.5em 1em;margin:12px 0;border-top-left-radius:2px;border-bottom-left-radius:2px;border-left:3px solid #a862ea;background-color:#f8f5ff}.markdown-body blockquote&gt;p{margin:0}.markdown-body .math{font-style:italic;margin:12px 0;padding:.5em 1em;background-color:#f8f5ff}.markdown-body .math&gt;p{margin:0}.markdown-body code{padding:2px .4em;overflow-x:auto;color:#a862ea;font-weight:700;word-break:break-word;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;background-color:#f8f5ff}.markdown-body pre{margin:2em 0}.markdown-body pre&gt;code{display:block;padding:1.5em;word-break:normal;font-size:.9em;font-style:normal;font-weight:400;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;line-height:18px;color:#383838;border-radius:2px;scroll-behavior:smooth;box-shadow:0 0 10px #e7daff}.markdown-body pre&gt;code:hover{box-shadow:0 0 20px #e7daff}.markdown-body pre&gt;code::-webkit-scrollbar{height:6px;background-color:#f8f5ff}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:#e7daff;border-bottom-left-radius:3px;border-bottom-right-radius:3px}.markdown-body hr{margin:2em 0;border-top:1px solid #a862ea}.markdown-body table{width:100%;font-size:12px;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{color:#a862ea;background:#f8f5ff}.markdown-body td,.markdown-body th{padding:.5em;border:1px solid #e7daff}.markdown-body tr{background-color:#f8f5ff}@media (max-width:720px){.markdown-body{font-size:12px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ç¬¬å››é˜¶æ®µï¼šåƒé€å®¹å™¨æ•°æ®ç±»å‹ï¼Œé«˜æ•ˆå¤„ç†æµ·é‡æ•°æ®</h2>
<blockquote>
<p>ğŸ˜„ç”Ÿå‘½ä¸æ¯ï¼Œå†™ä½œä¸æ­¢</p>
<p>ğŸ”¥ ç»§ç»­è¸ä¸Šå­¦ä¹ ä¹‹è·¯ï¼Œå­¦ä¹‹åˆ†äº«ç¬”è®°</p>
<p>ğŸ‘Š æ€»æœ‰ä¸€å¤©æˆ‘ä¹Ÿèƒ½åƒå„ä½å¤§ä½¬ä¸€æ ·</p>
<p>ğŸ† <a href="https://juejin.cn/user/2502950820787672" target="_blank" title="https://juejin.cn/user/2502950820787672">åšå®¢é¦–é¡µ</a> Â Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.cnblogs.com%2Flyd-code%2F" target="_blank" title="https://www.cnblogs.com/lyd-code/" ref="nofollow noopener noreferrer">@æ€’æ”¾å§å¾·å¾·</a>Â Â <a href="https://link.juejin.cn?target=https%3A%2F%2Flydandtry.github.io%2F" target="_blank" title="https://lydandtry.github.io/" ref="nofollow noopener noreferrer">Toè®°å½•é¢†åœ°</a> <a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2Fqq_43843951%3Ftype%3Dblog" target="_blank" title="https://blog.csdn.net/qq_43843951?type=blog" ref="nofollow noopener noreferrer">@ä¸€ä¸ªæœ‰æ¢¦æœ‰æˆçš„äºº</a></p>
<p>ğŸŒåˆ†äº«å­¦ä¹ å¿ƒå¾—ï¼Œæ¬¢è¿æŒ‡æ­£ï¼Œå¤§å®¶ä¸€èµ·å­¦ä¹ æˆé•¿ï¼</p>
<p>ğŸ”¥è±†åŒ…AI</p>
</blockquote>
<p><em>è½¬å‘è¯·æºå¸¦ä½œè€…ä¿¡æ¯</em>Â  <strong>@æ€’æ”¾å§å¾·å¾·(æ˜é‡‘) @ä¸€ä¸ªæœ‰æ¢¦æœ‰æˆçš„äºº(CSDN)</strong></p>
<h3 data-id="heading-1">å‰è¨€</h3>
<p>æ­å–œå¤§å®¶é¡ºåˆ©é€šå…³Python3åŸºç¡€å­¦ä¹ ç¬¬ä¸‰é˜¶æ®µï¼åœ¨ç¬¬ä¸‰é˜¶æ®µï¼Œæˆ‘ä»¬æŒæ¡äº†æµç¨‹æ§åˆ¶çš„æ ¸å¿ƒé€»è¾‘ï¼Œè®©ç¨‹åºèƒ½å¤Ÿâ€œæœ‰åˆ¤æ–­ã€æœ‰é‡å¤â€åœ°æ‰§è¡Œã€‚è€Œç¬¬å››é˜¶æ®µæˆ‘ä»¬è¦å­¦ä¹ çš„ã€Œå®¹å™¨æ•°æ®ç±»å‹ã€ï¼Œå°±åƒæ˜¯ç¨‹åºçš„â€œæ•°æ®ä»“åº“â€â€”â€”å®ƒèƒ½å¸®åŠ©æˆ‘ä»¬é«˜æ•ˆå­˜å‚¨ã€ç»„ç»‡å’Œç®¡ç†å¤§é‡æ•°æ®ï¼Œè§£å†³å•ä¸€å˜é‡æ— æ³•å­˜å‚¨å¤šä¸ªæ•°æ®çš„ç—›ç‚¹ï¼ŒåŒæ—¶è¡”æ¥æµç¨‹æ§åˆ¶çŸ¥è¯†ç‚¹ï¼Œå®ç°æ›´çµæ´»ã€æ›´é«˜æ•ˆçš„æ•°æ®å¤„ç†ã€‚</p>
<p>æœ¬æ¬¡ç¬¬å››é˜¶æ®µï¼Œæˆ‘ä»¬é‡ç‚¹æ”»å…‹äº”å¤§æ ¸å¿ƒå†…å®¹ï¼šåˆ—è¡¨ï¼ˆListï¼‰ã€å…ƒç»„ï¼ˆTupleï¼‰ã€å­—å…¸ï¼ˆDictionaryï¼‰ã€é›†åˆï¼ˆSetï¼‰ï¼Œä»¥åŠå­—ç¬¦ä¸²é«˜çº§æ“ä½œã€‚æ¯ä¸€ä¸ªçŸ¥è¯†ç‚¹éƒ½æ­é…å¯ç›´æ¥å¤åˆ¶è¿è¡Œçš„ä»£ç ç¤ºä¾‹ã€è¯¦ç»†è§£æå’Œæ–°æ‰‹é¿å‘æŠ€å·§ï¼Œå…¨ç¨‹è´´åˆæ–°æ‰‹å­¦ä¹ èŠ‚å¥ï¼Œè·Ÿç€æ•²ä»£ç ã€ç»ƒæ¡ˆä¾‹ï¼Œå°±èƒ½è½»æ¾æŒæ¡è¿™äº›â€œæ•°æ®ä»“åº“â€çš„ä½¿ç”¨æ–¹æ³•ï¼Œä¸ºåç»­æ›´å¤æ‚çš„ç¼–ç¨‹å­¦ä¹ ç­‘ç‰¢åŸºç¡€ï½</p>
<h3 data-id="heading-2">1 åˆ—è¡¨ï¼ˆListï¼‰ï¼šæœ€çµæ´»çš„â€œæœ‰åºæ•°æ®ä»“åº“â€</h3>
<p>åˆ—è¡¨æ˜¯Pythonä¸­æœ€å¸¸ç”¨ã€æœ€çµæ´»çš„å®¹å™¨ç±»å‹ï¼Œæ ¸å¿ƒç‰¹ç‚¹æ˜¯ã€Œæœ‰åºã€å¯å˜ã€å¯å­˜å‚¨ä»»æ„ç±»å‹æ•°æ®ã€â€”â€”å¯ä»¥ç†è§£ä¸ºä¸€ä¸ªâ€œå¯éšæ—¶å¢å‡ã€å¯ä¿®æ”¹å†…å®¹çš„æœ‰åºæ–‡ä»¶å¤¹â€ï¼Œæ—¢èƒ½å­˜å‚¨å¤šä¸ªç›¸åŒç±»å‹çš„æ•°æ®ï¼Œä¹Ÿèƒ½å­˜å‚¨æ··åˆç±»å‹çš„æ•°æ®ï¼Œæ˜¯æ—¥å¸¸ç¼–ç¨‹ä¸­ä½¿ç”¨é¢‘ç‡æœ€é«˜çš„å®¹å™¨ã€‚</p>
<p>æˆ‘ä»¬ä»â€œåˆ›å»ºâ†’è®¿é—®â†’å¢åˆ æ”¹æŸ¥â†’åˆ‡ç‰‡â†’å¸¸ç”¨æ–¹æ³•â€é€æ­¥æ‹†è§£ï¼Œæ¯ä¸€æ­¥éƒ½æ­é…ä»£ç ç¤ºä¾‹ï¼Œæ–°æ‰‹å¯ç›´æ¥å¤åˆ¶è¿è¡Œã€‚</p>
<h4 data-id="heading-3">1.1 åˆ—è¡¨çš„åˆ›å»ºï¼ˆ3ç§å¸¸ç”¨æ–¹å¼ï¼‰</h4>
<p>åˆ—è¡¨ç”¨æ–¹æ‹¬å· <code>[]</code> è¡¨ç¤ºï¼Œå…ƒç´ ä¹‹é—´ç”¨é€—å·åˆ†éš”ï¼›ä¹Ÿå¯é€šè¿‡ <code>list()</code> å‡½æ•°åˆ›å»ºï¼Œä¸¤ç§æ–¹å¼æŒ‰éœ€é€‰æ‹©ï¼ŒåŸºç¡€åˆ›å»ºéå¸¸ç®€å•ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># æ–¹å¼1ï¼šç›´æ¥ç”¨æ–¹æ‹¬å·åˆ›å»ºï¼ˆæœ€å¸¸ç”¨ï¼‰</span>
<span class="hljs-comment"># 1.1 åˆ›å»ºç©ºåˆ—è¡¨</span>
empty_list = []
<span class="hljs-built_in">print</span>(empty_list)  <span class="hljs-comment"># è¾“å‡ºï¼š[]</span>
<span class="hljs-built_in">print</span>(<span class="hljs-built_in">type</span>(empty_list))  <span class="hljs-comment"># è¾“å‡ºï¼š&lt;class 'list'&gt;</span>

<span class="hljs-comment"># 1.2 åˆ›å»ºåŒ…å«å…ƒç´ çš„åˆ—è¡¨ï¼ˆå•ä¸€ç±»å‹ï¼‰</span>
num_list = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>]  <span class="hljs-comment"># æ•´æ•°åˆ—è¡¨</span>
str_list = [<span class="hljs-string">"Python"</span>, <span class="hljs-string">"Java"</span>, <span class="hljs-string">"C++"</span>]  <span class="hljs-comment"># å­—ç¬¦ä¸²åˆ—è¡¨</span>

<span class="hljs-comment"># 1.3 åˆ›å»ºåŒ…å«æ··åˆç±»å‹å…ƒç´ çš„åˆ—è¡¨ï¼ˆåˆ—è¡¨ç‰¹è‰²ï¼‰</span>
mixed_list = [<span class="hljs-number">10</span>, <span class="hljs-string">"Python"</span>, <span class="hljs-literal">True</span>, <span class="hljs-number">3.14</span>, [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]]  <span class="hljs-comment"># åŒ…å«åˆ—è¡¨ï¼ˆåµŒå¥—åˆ—è¡¨ï¼‰</span>
<span class="hljs-built_in">print</span>(mixed_list)  <span class="hljs-comment"># è¾“å‡ºï¼š[10, 'Python', True, 3.14, [1, 2, 3]]</span>

<span class="hljs-comment"># æ–¹å¼2ï¼šç”¨list()å‡½æ•°åˆ›å»ºï¼ˆé€‚åˆè½¬æ¢å…¶ä»–æ•°æ®ç±»å‹ï¼‰</span>
<span class="hljs-comment"># å°†å­—ç¬¦ä¸²è½¬ä¸ºåˆ—è¡¨ï¼ˆæ¯ä¸ªå­—ç¬¦ä½œä¸ºå…ƒç´ ï¼‰</span>
str_to_list = <span class="hljs-built_in">list</span>(<span class="hljs-string">"Python"</span>)
<span class="hljs-built_in">print</span>(str_to_list)  <span class="hljs-comment"># è¾“å‡ºï¼š['P', 'y', 't', 'h', 'o', 'n']</span>

<span class="hljs-comment"># å°†å…ƒç»„è½¬ä¸ºåˆ—è¡¨ï¼ˆæ•°ç»„ä¸­å¯ä»¥æ˜¯ä¸åŒç±»å‹çš„ï¼‰</span>
tuple_to_list = <span class="hljs-built_in">list</span>((<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>))
<span class="hljs-built_in">print</span>(tuple_to_list)  <span class="hljs-comment"># è¾“å‡ºï¼š[1, 2, 3]</span>

<span class="hljs-comment"># å°†rangeå¯¹è±¡è½¬ä¸ºåˆ—è¡¨</span>
range_to_list = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, <span class="hljs-number">6</span>))
<span class="hljs-built_in">print</span>(range_to_list)  <span class="hljs-comment"># è¾“å‡ºï¼š[1, 2, 3, 4, 5]</span>
</code></pre>
<p><strong>æ–°æ‰‹é¿å‘</strong>ï¼šåˆ›å»ºåµŒå¥—åˆ—è¡¨æ—¶ï¼Œå†…å±‚åˆ—è¡¨éœ€ç”¨æ–¹æ‹¬å·åŒ…è£¹ï¼Œè®¿é—®æ—¶éœ€ç”¨å¤šçº§ç´¢å¼•ï¼›ç”¨list()å‡½æ•°è½¬æ¢æ—¶ï¼Œå‚æ•°éœ€æ˜¯å¯è¿­ä»£å¯¹è±¡ï¼ˆå­—ç¬¦ä¸²ã€å…ƒç»„ã€rangeç­‰ï¼‰ã€‚</p>
<h4 data-id="heading-4">1.2 åˆ—è¡¨çš„è®¿é—®ï¼ˆç´¢å¼•è®¿é—®ï¼Œä¸å­—ç¬¦ä¸²ä¸€è‡´ï¼‰</h4>
<p>åˆ—è¡¨æ˜¯æœ‰åºå®¹å™¨ï¼Œæ¯ä¸ªå…ƒç´ éƒ½æœ‰å”¯ä¸€çš„ã€Œç´¢å¼•ã€ï¼ˆä½ç½®ç¼–å·ï¼‰ï¼Œå¯é€šè¿‡ç´¢å¼•è®¿é—®å•ä¸ªå…ƒç´ ï¼Œæ”¯æŒæ­£å‘ç´¢å¼•ï¼ˆä»0å¼€å§‹ï¼‰å’Œåå‘ç´¢å¼•ï¼ˆä»-1å¼€å§‹ï¼‰ï¼Œä¸ç¬¬ä¸‰é˜¶æ®µå­¦ä¹ çš„å­—ç¬¦ä¸²ç´¢å¼•é€»è¾‘å®Œå…¨ä¸€è‡´ã€‚</p>
<pre><code class="hljs language-python" lang="python">fruits = [<span class="hljs-string">"è‹¹æœ"</span>, <span class="hljs-string">"é¦™è•‰"</span>, <span class="hljs-string">"æ©™å­"</span>, <span class="hljs-string">"è‘¡è„"</span>, <span class="hljs-string">"èŠ’æœ"</span>]

<span class="hljs-comment"># æ­£å‘ç´¢å¼•ï¼šä»0å¼€å§‹ï¼Œ0æ˜¯ç¬¬ä¸€ä¸ªå…ƒç´ </span>
<span class="hljs-built_in">print</span>(fruits[<span class="hljs-number">0</span>])  <span class="hljs-comment"># è¾“å‡ºï¼šè‹¹æœï¼ˆç¬¬ä¸€ä¸ªå…ƒç´ ï¼‰</span>
<span class="hljs-built_in">print</span>(fruits[<span class="hljs-number">2</span>])  <span class="hljs-comment"># è¾“å‡ºï¼šæ©™å­ï¼ˆç¬¬ä¸‰ä¸ªå…ƒç´ ï¼‰</span>

<span class="hljs-comment"># åå‘ç´¢å¼•ï¼šä»-1å¼€å§‹ï¼Œ-1æ˜¯æœ€åä¸€ä¸ªå…ƒç´ </span>
<span class="hljs-built_in">print</span>(fruits[-<span class="hljs-number">1</span>])  <span class="hljs-comment"># è¾“å‡ºï¼šèŠ’æœï¼ˆæœ€åä¸€ä¸ªå…ƒç´ ï¼‰</span>
<span class="hljs-built_in">print</span>(fruits[-<span class="hljs-number">3</span>])  <span class="hljs-comment"># è¾“å‡ºï¼šæ©™å­ï¼ˆå€’æ•°ç¬¬ä¸‰ä¸ªå…ƒç´ ï¼‰</span>

<span class="hljs-comment"># è®¿é—®åµŒå¥—åˆ—è¡¨çš„å…ƒç´ ï¼ˆå¤šçº§ç´¢å¼•ï¼‰</span>
mixed_list = [<span class="hljs-number">10</span>, [<span class="hljs-string">"a"</span>, <span class="hljs-string">"b"</span>, <span class="hljs-string">"c"</span>], <span class="hljs-number">30</span>]
<span class="hljs-built_in">print</span>(mixed_list[<span class="hljs-number">1</span>])  <span class="hljs-comment"># è¾“å‡ºï¼š['a', 'b', 'c']ï¼ˆè®¿é—®å†…å±‚åˆ—è¡¨ï¼‰</span>
<span class="hljs-built_in">print</span>(mixed_list[<span class="hljs-number">1</span>][<span class="hljs-number">2</span>])  <span class="hljs-comment"># è¾“å‡ºï¼šcï¼ˆè®¿é—®å†…å±‚åˆ—è¡¨çš„ç¬¬ä¸‰ä¸ªå…ƒç´ ï¼‰</span>

<span class="hljs-comment"># æ³¨æ„ï¼šç´¢å¼•ä¸èƒ½è¶…å‡ºåˆ—è¡¨èŒƒå›´ï¼Œå¦åˆ™æŠ¥é”™</span>
<span class="hljs-comment"># print(fruits[5])  # æŠ¥é”™ï¼šIndexErrorï¼ˆåˆ—è¡¨é•¿åº¦ä¸º5ï¼Œç´¢å¼•æœ€å¤§ä¸º4ï¼‰</span>
</code></pre>
<p>æŠ€å·§ï¼šå¯é€šè¿‡ <code>len()</code> å‡½æ•°è·å–åˆ—è¡¨é•¿åº¦ï¼Œé¿å…ç´¢å¼•è¶Šç•Œï¼Œå¦‚ <code>print(len(fruits))</code> å¯è·å–åˆ—è¡¨é•¿åº¦5ã€‚</p>
<blockquote>
<ol>
<li><strong>åå‘ç´¢å¼•æ˜¯è¯­æ³•ç³–</strong>ï¼šPythonè§£é‡Šå™¨åœ¨é‡åˆ°è´Ÿç´¢å¼•æ—¶è‡ªåŠ¨è½¬æ¢ä¸ºæ­£ç´¢å¼•</li>
<li><strong>æ—¶é—´å¤æ‚åº¦</strong>ï¼šåå‘ç´¢å¼•è®¿é—®å’Œæ­£å‘ç´¢å¼•ä¸€æ ·ï¼Œéƒ½æ˜¯O(1)æ“ä½œ</li>
<li><strong>å¹¿æ³›é€‚ç”¨</strong>ï¼šä¸ä»…åˆ—è¡¨ï¼Œå…ƒç»„ã€å­—ç¬¦ä¸²ç­‰åºåˆ—ç±»å‹éƒ½æ”¯æŒåå‘ç´¢å¼•</li>
<li><strong>è¾¹ç•Œæ£€æŸ¥</strong>ï¼šè½¬æ¢åä»ç„¶ä¼šæ£€æŸ¥ç´¢å¼•æ˜¯å¦åœ¨æœ‰æ•ˆèŒƒå›´å†…</li>
</ol>
</blockquote>
<h4 data-id="heading-5">1.3 åˆ—è¡¨çš„å¢åˆ æ”¹æŸ¥ï¼ˆæ ¸å¿ƒæ“ä½œï¼Œé‡ç‚¹æŒæ¡ï¼‰</h4>
<p>åˆ—è¡¨çš„æ ¸å¿ƒä¼˜åŠ¿æ˜¯ã€Œå¯å˜ã€ï¼Œå¯éšæ—¶æ·»åŠ ã€åˆ é™¤ã€ä¿®æ”¹å…ƒç´ ï¼Œè¿™ä¹Ÿæ˜¯å®ƒä¸åç»­è¦å­¦çš„å…ƒç»„æœ€æœ¬è´¨çš„åŒºåˆ«ã€‚æˆ‘ä»¬åˆ†å››ä¸ªæ“ä½œé€ä¸€è®²è§£ï¼Œæ¯ä¸ªæ“ä½œéƒ½ç»™å‡ºæœ€å¸¸ç”¨çš„æ–¹æ³•ã€‚</p>
<h5 data-id="heading-6">1.3.1 å¢ï¼šç»™åˆ—è¡¨æ·»åŠ å…ƒç´ ï¼ˆ3ç§å¸¸ç”¨æ–¹æ³•ï¼‰</h5>
<pre><code class="hljs language-python" lang="python">nums = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]

<span class="hljs-comment"># æ–¹æ³•1ï¼šappend(x)ï¼šåœ¨åˆ—è¡¨æœ«å°¾æ·»åŠ å•ä¸ªå…ƒç´ ï¼ˆæœ€å¸¸ç”¨ï¼‰</span>
nums.append(<span class="hljs-number">4</span>)
<span class="hljs-built_in">print</span>(nums)  <span class="hljs-comment"># è¾“å‡ºï¼š[1, 2, 3, 4]</span>
nums.append(<span class="hljs-number">5</span>)
<span class="hljs-built_in">print</span>(nums)  <span class="hljs-comment"># è¾“å‡ºï¼š[1, 2, 3, 4, 5]</span>

<span class="hljs-comment"># æ–¹æ³•2ï¼šinsert(index, x)ï¼šåœ¨æŒ‡å®šç´¢å¼•ä½ç½®æ’å…¥å…ƒç´ </span>
nums.insert(<span class="hljs-number">2</span>, <span class="hljs-number">2.5</span>)  <span class="hljs-comment"># åœ¨ç´¢å¼•2çš„ä½ç½®æ’å…¥2.5</span>
<span class="hljs-built_in">print</span>(nums)  <span class="hljs-comment"># è¾“å‡ºï¼š[1, 2, 2.5, 3, 4, 5]</span>

<span class="hljs-comment"># æ–¹æ³•3ï¼šextend(lst2)ï¼šå°†å¦ä¸€ä¸ªåˆ—è¡¨çš„æ‰€æœ‰å…ƒç´ æ·»åŠ åˆ°å½“å‰åˆ—è¡¨æœ«å°¾ï¼ˆæ‰¹é‡æ·»åŠ ï¼‰</span>
nums2 = [<span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>]
nums.extend(nums2)
<span class="hljs-built_in">print</span>(nums)  <span class="hljs-comment"># è¾“å‡ºï¼š[1, 2, 2.5, 3, 4, 5, 6, 7, 8]</span>

<span class="hljs-comment"># é¿å‘ï¼šappendä¸extendçš„åŒºåˆ«</span>
nums.append(nums2)  <span class="hljs-comment"># ä¼šå°†nums2ä½œä¸ºä¸€ä¸ªæ•´ä½“å…ƒç´ æ·»åŠ </span>
<span class="hljs-built_in">print</span>(nums)  <span class="hljs-comment"># æœ«å°¾ä¼šå¤šä¸€ä¸ª[6,7,8]ï¼Œè€Œéå•ä¸ªå…ƒç´ </span>
</code></pre>
<h5 data-id="heading-7">1.3.2 åˆ ï¼šåˆ é™¤åˆ—è¡¨ä¸­çš„å…ƒç´ ï¼ˆ4ç§å¸¸ç”¨æ–¹æ³•ï¼‰</h5>
<pre><code class="hljs language-python" lang="python">fruits = [<span class="hljs-string">"è‹¹æœ"</span>, <span class="hljs-string">"é¦™è•‰"</span>, <span class="hljs-string">"æ©™å­"</span>, <span class="hljs-string">"è‘¡è„"</span>, <span class="hljs-string">"èŠ’æœ"</span>]

<span class="hljs-comment"># æ–¹æ³•1ï¼šremove(x)ï¼šæ ¹æ®å…ƒç´ å€¼åˆ é™¤ï¼Œåˆ é™¤ç¬¬ä¸€ä¸ªåŒ¹é…çš„å…ƒç´ </span>
fruits.remove(<span class="hljs-string">"æ©™å­"</span>)
<span class="hljs-built_in">print</span>(fruits)  <span class="hljs-comment"># è¾“å‡ºï¼š['è‹¹æœ', 'é¦™è•‰', 'è‘¡è„', 'èŠ’æœ']</span>

<span class="hljs-comment"># æ–¹æ³•2ï¼špop(index)ï¼šæ ¹æ®ç´¢å¼•åˆ é™¤å…ƒç´ ï¼Œé»˜è®¤åˆ é™¤æœ€åä¸€ä¸ªï¼Œè¿”å›è¢«åˆ é™¤çš„å…ƒç´ </span>
deleted_fruit = fruits.pop()  <span class="hljs-comment"># ä¸æŒ‡å®šç´¢å¼•ï¼Œåˆ é™¤æœ€åä¸€ä¸ª</span>
<span class="hljs-built_in">print</span>(deleted_fruit)  <span class="hljs-comment"># è¾“å‡ºï¼šèŠ’æœ</span>
<span class="hljs-built_in">print</span>(fruits)  <span class="hljs-comment"># è¾“å‡ºï¼š['è‹¹æœ', 'é¦™è•‰', 'è‘¡è„']</span>
fruits.pop(<span class="hljs-number">1</span>)  <span class="hljs-comment"># æŒ‡å®šç´¢å¼•1ï¼Œåˆ é™¤ç¬¬äºŒä¸ªå…ƒç´ </span>
<span class="hljs-built_in">print</span>(fruits)  <span class="hljs-comment"># è¾“å‡ºï¼š['è‹¹æœ', 'è‘¡è„']</span>

<span class="hljs-comment"># æ–¹æ³•3ï¼šdel è¯­å¥ï¼šæ ¹æ®ç´¢å¼•åˆ é™¤ï¼Œä¹Ÿå¯åˆ é™¤æ•´ä¸ªåˆ—è¡¨ï¼ˆå½»åº•åˆ é™¤ï¼‰</span>
<span class="hljs-keyword">del</span> fruits[<span class="hljs-number">0</span>]  <span class="hljs-comment"># åˆ é™¤ç´¢å¼•0çš„å…ƒç´ </span>
<span class="hljs-built_in">print</span>(fruits)  <span class="hljs-comment"># è¾“å‡ºï¼š['è‘¡è„']</span>
<span class="hljs-comment"># del fruits  # å½»åº•åˆ é™¤åˆ—è¡¨ï¼Œåç»­æ— æ³•è®¿é—®fruits</span>

<span class="hljs-comment"># æ–¹æ³•4ï¼šclear()ï¼šæ¸…ç©ºåˆ—è¡¨æ‰€æœ‰å…ƒç´ ï¼Œä¿ç•™åˆ—è¡¨å¯¹è±¡ï¼ˆå˜ä¸ºç©ºåˆ—è¡¨ï¼‰</span>
fruits.clear()
<span class="hljs-built_in">print</span>(fruits)  <span class="hljs-comment"># è¾“å‡ºï¼š[]</span>
</code></pre>
<p><strong>æ–°æ‰‹é¿å‘</strong>ï¼šremove(x)åˆ é™¤ä¸å­˜åœ¨çš„å…ƒç´ ä¼šæŠ¥é”™ï¼›pop(index)æŒ‡å®šè¶…å‡ºèŒƒå›´çš„ç´¢å¼•ä¼šæŠ¥é”™ï¼›delè¯­å¥å½»åº•åˆ é™¤åˆ—è¡¨åï¼Œåç»­è®¿é—®ä¼šæŠ¥é”™ã€‚</p>
<h5 data-id="heading-8">1.3.3 æ”¹ï¼šä¿®æ”¹åˆ—è¡¨ä¸­çš„å…ƒç´ ï¼ˆç›´æ¥é€šè¿‡ç´¢å¼•èµ‹å€¼ï¼‰</h5>
<pre><code class="hljs language-python" lang="python">nums = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>]

<span class="hljs-comment"># ä¿®æ”¹å•ä¸ªå…ƒç´ ï¼šç´¢å¼•èµ‹å€¼</span>
nums[<span class="hljs-number">2</span>] = <span class="hljs-number">30</span>  <span class="hljs-comment"># å°†ç´¢å¼•2çš„å…ƒç´ æ”¹ä¸º30</span>
<span class="hljs-built_in">print</span>(nums)  <span class="hljs-comment"># è¾“å‡ºï¼š[1, 2, 30, 4, 5]</span>

<span class="hljs-comment"># ä¿®æ”¹åµŒå¥—åˆ—è¡¨çš„å…ƒç´ </span>
mixed_list = [<span class="hljs-number">10</span>, [<span class="hljs-string">"a"</span>, <span class="hljs-string">"b"</span>, <span class="hljs-string">"c"</span>], <span class="hljs-number">30</span>]
mixed_list[<span class="hljs-number">1</span>][<span class="hljs-number">1</span>] = <span class="hljs-string">"x"</span>  <span class="hljs-comment"># ä¿®æ”¹å†…å±‚åˆ—è¡¨çš„å…ƒç´ </span>
<span class="hljs-built_in">print</span>(mixed_list)  <span class="hljs-comment"># è¾“å‡ºï¼š[10, ['a', 'x', 'c'], 30]</span>

<span class="hljs-comment"># æ‰¹é‡ä¿®æ”¹ï¼šåˆ‡ç‰‡èµ‹å€¼ï¼ˆåç»­åˆ‡ç‰‡éƒ¨åˆ†è¯¦ç»†è®²è§£ï¼‰</span>
nums[<span class="hljs-number">1</span>:<span class="hljs-number">3</span>] = [<span class="hljs-number">20</span>, <span class="hljs-number">300</span>]
<span class="hljs-built_in">print</span>(nums)  <span class="hljs-comment"># è¾“å‡ºï¼š[1, 20, 300, 4, 5]</span>
</code></pre>
<h5 data-id="heading-9">1.3.4 æŸ¥ï¼šæŸ¥è¯¢åˆ—è¡¨ä¸­çš„å…ƒç´ ï¼ˆåˆ¤æ–­å­˜åœ¨+æŸ¥æ‰¾ç´¢å¼•+ç»Ÿè®¡æ¬¡æ•°ï¼‰</h5>
<pre><code class="hljs language-python" lang="python">fruits = [<span class="hljs-string">"è‹¹æœ"</span>, <span class="hljs-string">"é¦™è•‰"</span>, <span class="hljs-string">"è‘¡è„"</span>, <span class="hljs-string">"é¦™è•‰"</span>, <span class="hljs-string">"èŠ’æœ"</span>]

<span class="hljs-comment"># 1. åˆ¤æ–­å…ƒç´ æ˜¯å¦å­˜åœ¨ï¼šin / not inï¼ˆè¿”å›å¸ƒå°”å€¼ï¼‰</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"é¦™è•‰"</span> <span class="hljs-keyword">in</span> fruits)  <span class="hljs-comment"># è¾“å‡ºï¼šTrueï¼ˆå­˜åœ¨ï¼‰</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"æ©™å­"</span> <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> fruits)  <span class="hljs-comment"># è¾“å‡ºï¼šTrueï¼ˆä¸å­˜åœ¨ï¼‰</span>

<span class="hljs-comment"># 2. æŸ¥æ‰¾å…ƒç´ ç´¢å¼•ï¼šindex(x)ï¼šè¿”å›ç¬¬ä¸€ä¸ªåŒ¹é…å…ƒç´ çš„ç´¢å¼•ï¼Œä¸å­˜åœ¨æŠ¥é”™</span>
<span class="hljs-built_in">print</span>(fruits.index(<span class="hljs-string">"é¦™è•‰"</span>))  <span class="hljs-comment"># è¾“å‡ºï¼š1ï¼ˆç¬¬ä¸€ä¸ªé¦™è•‰çš„ç´¢å¼•ï¼‰</span>

<span class="hljs-comment"># 3. ç»Ÿè®¡å…ƒç´ å‡ºç°æ¬¡æ•°ï¼šcount(x)ï¼šè¿”å›å…ƒç´ xåœ¨åˆ—è¡¨ä¸­å‡ºç°çš„æ¬¡æ•°</span>
<span class="hljs-built_in">print</span>(fruits.count(<span class="hljs-string">"é¦™è•‰"</span>))  <span class="hljs-comment"># è¾“å‡ºï¼š2ï¼ˆé¦™è•‰å‡ºç°2æ¬¡ï¼‰</span>
</code></pre>
<h4 data-id="heading-10">1.4 åˆ—è¡¨çš„åˆ‡ç‰‡ï¼ˆçµæ´»è·å–å­åˆ—è¡¨ï¼Œä¸å­—ç¬¦ä¸²åˆ‡ç‰‡ä¸€è‡´ï¼‰</h4>
<p>åˆ‡ç‰‡æ˜¯åˆ—è¡¨çš„é«˜çº§è®¿é—®æ–¹å¼ï¼Œå¯å¿«é€Ÿè·å–åˆ—è¡¨ä¸­çš„ä¸€ä¸ªã€Œå­åˆ—è¡¨ã€ï¼Œè¯­æ³•ä¸å­—ç¬¦ä¸²åˆ‡ç‰‡å®Œå…¨ä¸€è‡´ï¼š<code>åˆ—è¡¨å[èµ·å§‹ç´¢å¼•:ç»“æŸç´¢å¼•:æ­¥é•¿]</code>ï¼Œæ ¸å¿ƒè§„åˆ™ï¼šå·¦é—­å³å¼€ï¼ˆåŒ…å«èµ·å§‹ç´¢å¼•ï¼Œä¸åŒ…å«ç»“æŸç´¢å¼•ï¼‰ï¼Œæ­¥é•¿é»˜è®¤1ã€‚</p>
<pre><code class="hljs language-python" lang="python">nums = [<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>]

<span class="hljs-comment"># 1. åŸºç¡€åˆ‡ç‰‡ï¼šèµ·å§‹ç´¢å¼•:ç»“æŸç´¢å¼•ï¼ˆæ­¥é•¿é»˜è®¤1ï¼‰</span>
<span class="hljs-built_in">print</span>(nums[<span class="hljs-number">2</span>:<span class="hljs-number">6</span>])  <span class="hljs-comment"># è¾“å‡ºï¼š[2, 3, 4, 5]ï¼ˆåŒ…å«2ï¼Œä¸åŒ…å«6ï¼‰</span>
<span class="hljs-built_in">print</span>(nums[:<span class="hljs-number">5</span>])   <span class="hljs-comment"># è¾“å‡ºï¼š[0, 1, 2, 3, 4]ï¼ˆèµ·å§‹ç´¢å¼•çœç•¥ï¼Œé»˜è®¤ä»0å¼€å§‹ï¼‰</span>
<span class="hljs-built_in">print</span>(nums[<span class="hljs-number">5</span>:])   <span class="hljs-comment"># è¾“å‡ºï¼š[5, 6, 7, 8, 9]ï¼ˆç»“æŸç´¢å¼•çœç•¥ï¼Œé»˜è®¤åˆ°æœ«å°¾ï¼‰</span>
<span class="hljs-built_in">print</span>(nums[:])    <span class="hljs-comment"># è¾“å‡ºï¼š[0, 1, 2, ..., 9]ï¼ˆçœç•¥æ‰€æœ‰ï¼Œå¤åˆ¶æ•´ä¸ªåˆ—è¡¨ï¼‰</span>

<span class="hljs-comment"># 2. æŒ‡å®šæ­¥é•¿åˆ‡ç‰‡</span>
<span class="hljs-built_in">print</span>(nums[<span class="hljs-number">0</span>:<span class="hljs-number">10</span>:<span class="hljs-number">2</span>])  <span class="hljs-comment"># è¾“å‡ºï¼š[0, 2, 4, 6, 8]ï¼ˆæ­¥é•¿ä¸º2ï¼Œé—´éš”1ä¸ªå…ƒç´ ï¼‰</span>
<span class="hljs-built_in">print</span>(nums[<span class="hljs-number">10</span>:<span class="hljs-number">0</span>:-<span class="hljs-number">2</span>]) <span class="hljs-comment"># è¾“å‡ºï¼š[9, 7, 5, 3, 1]ï¼ˆæ­¥é•¿ä¸ºè´Ÿï¼Œåå‘åˆ‡ç‰‡ï¼‰</span>

<span class="hljs-comment"># 3. åå‘åˆ‡ç‰‡ï¼ˆå¿«é€Ÿåè½¬åˆ—è¡¨ï¼‰</span>
<span class="hljs-built_in">print</span>(nums[::-<span class="hljs-number">1</span>])    <span class="hljs-comment"># è¾“å‡ºï¼š[9, 8, 7, ..., 0]ï¼ˆæ­¥é•¿ä¸º-1ï¼Œåè½¬æ•´ä¸ªåˆ—è¡¨ï¼‰</span>

<span class="hljs-comment"># 4. åˆ‡ç‰‡èµ‹å€¼ï¼ˆæ‰¹é‡ä¿®æ”¹/æ·»åŠ /åˆ é™¤ï¼‰</span>
nums[<span class="hljs-number">2</span>:<span class="hljs-number">4</span>] = [<span class="hljs-number">20</span>, <span class="hljs-number">30</span>]  <span class="hljs-comment"># æ›¿æ¢åˆ‡ç‰‡å¯¹åº”çš„å…ƒç´ </span>
<span class="hljs-built_in">print</span>(nums)  <span class="hljs-comment"># è¾“å‡ºï¼š[0, 1, 20, 30, 4, 5, 6, 7, 8, 9]</span>
nums[<span class="hljs-number">5</span>:<span class="hljs-number">7</span>] = []  <span class="hljs-comment"># èµ‹å€¼ä¸ºç©ºåˆ—è¡¨ï¼Œç­‰ä»·äºåˆ é™¤è¯¥åˆ‡ç‰‡å…ƒç´ </span>
<span class="hljs-built_in">print</span>(nums)  <span class="hljs-comment"># è¾“å‡ºï¼š[0, 1, 20, 30, 4, 7, 8, 9]</span>
</code></pre>
<h4 data-id="heading-11">1.5 åˆ—è¡¨çš„å¸¸ç”¨æ–¹æ³•ï¼ˆé«˜é¢‘ä½¿ç”¨ï¼Œå¿…è®°ï¼‰</h4>
<p>é™¤äº†ä¸Šè¿°å¢åˆ æ”¹æŸ¥å’Œåˆ‡ç‰‡ï¼Œåˆ—è¡¨è¿˜æœ‰å‡ ä¸ªé«˜é¢‘å¸¸ç”¨æ–¹æ³•ï¼Œæ­é…ä»£ç ç†è§£ï¼Œé‡ç‚¹è®°åŠŸèƒ½å’Œç”¨æ³•ï¼š</p>
<pre><code class="hljs language-python" lang="python">nums = [<span class="hljs-number">3</span>, <span class="hljs-number">1</span>, <span class="hljs-number">4</span>, <span class="hljs-number">1</span>, <span class="hljs-number">5</span>, <span class="hljs-number">9</span>, <span class="hljs-number">2</span>, <span class="hljs-number">6</span>]

<span class="hljs-comment"># 1. sort()ï¼šå¯¹åˆ—è¡¨è¿›è¡Œæ’åºï¼Œé»˜è®¤å‡åºï¼Œä¿®æ”¹åŸåˆ—è¡¨</span>
nums.sort()
<span class="hljs-built_in">print</span>(nums)  <span class="hljs-comment"># è¾“å‡ºï¼š[1, 1, 2, 3, 4, 5, 6, 9]</span>
<span class="hljs-comment"># é™åºæ’åºï¼šreverse=True</span>
nums.sort(reverse=<span class="hljs-literal">True</span>)
<span class="hljs-built_in">print</span>(nums)  <span class="hljs-comment"># è¾“å‡ºï¼š[9, 6, 5, 4, 3, 2, 1, 1]</span>

<span class="hljs-comment"># 2. reverse()ï¼šåè½¬åˆ—è¡¨å…ƒç´ é¡ºåºï¼Œä¿®æ”¹åŸåˆ—è¡¨</span>
nums.reverse()
<span class="hljs-built_in">print</span>(nums)  <span class="hljs-comment"># è¾“å‡ºï¼š[1, 1, 2, 3, 4, 5, 6, 9]</span>

<span class="hljs-comment"># 3. copy()ï¼šå¤åˆ¶åˆ—è¡¨ï¼Œè¿”å›æ–°åˆ—è¡¨ï¼ˆé¿å…ä¿®æ”¹åŸåˆ—è¡¨ï¼‰</span>
nums2 = nums.copy()
nums2[<span class="hljs-number">0</span>] = <span class="hljs-number">100</span>
<span class="hljs-built_in">print</span>(nums)   <span class="hljs-comment"># è¾“å‡ºï¼š[1, 1, 2, 3, 4, 5, 6, 9]ï¼ˆåŸåˆ—è¡¨ä¸å˜ï¼‰</span>
<span class="hljs-built_in">print</span>(nums2)  <span class="hljs-comment"># è¾“å‡ºï¼š[100, 1, 2, 3, 4, 5, 6, 9]ï¼ˆæ–°åˆ—è¡¨ä¿®æ”¹ï¼‰</span>

<span class="hljs-comment"># 4. len()ï¼šè·å–åˆ—è¡¨é•¿åº¦ï¼ˆå…ƒç´ ä¸ªæ•°ï¼‰</span>
<span class="hljs-built_in">print</span>(<span class="hljs-built_in">len</span>(nums))  <span class="hljs-comment"># è¾“å‡ºï¼š8</span>

<span class="hljs-comment"># 5. max()/min()ï¼šè·å–åˆ—è¡¨ä¸­çš„æœ€å¤§å€¼/æœ€å°å€¼ï¼ˆä»…é€‚ç”¨äºæ•°å­—åˆ—è¡¨ï¼‰</span>
<span class="hljs-built_in">print</span>(<span class="hljs-built_in">max</span>(nums))  <span class="hljs-comment"># è¾“å‡ºï¼š9</span>
<span class="hljs-built_in">print</span>(<span class="hljs-built_in">min</span>(nums))  <span class="hljs-comment"># è¾“å‡ºï¼š1</span>
</code></pre>
<h3 data-id="heading-12">2 å…ƒç»„ï¼ˆTupleï¼‰ï¼šä¸å¯å˜çš„â€œå®‰å…¨æ•°æ®ä»“åº“â€</h3>
<p>å…ƒç»„ä¸åˆ—è¡¨éå¸¸ç›¸ä¼¼ï¼Œæ ¸å¿ƒç‰¹ç‚¹æ˜¯ã€Œæœ‰åºã€ä¸å¯å˜ã€å¯å­˜å‚¨ä»»æ„ç±»å‹æ•°æ®ã€â€”â€”å¯ä»¥ç†è§£ä¸ºä¸€ä¸ªâ€œä¸€æ—¦åˆ›å»ºå°±æ— æ³•ä¿®æ”¹å†…å®¹çš„æœ‰åºæ–‡ä»¶å¤¹â€ï¼Œé€‚åˆå­˜å‚¨ä¸éœ€è¦å˜æ›´çš„æ•°æ®ï¼ˆå¦‚å›ºå®šé…ç½®ã€åæ ‡ç­‰ï¼‰ï¼Œå®‰å…¨æ€§æ›´é«˜ã€‚</p>
<p>å…ƒç»„çš„è¯­æ³•å’Œç”¨æ³•ä¸åˆ—è¡¨å¤§éƒ¨åˆ†ä¸€è‡´ï¼Œé‡ç‚¹æŒæ¡ã€Œä¸å¯å˜ç‰¹æ€§ã€å’Œä¸åˆ—è¡¨çš„åŒºåˆ«å³å¯ã€‚</p>
<blockquote>
<p>ä¸ jdk 9 çš„ List.of(...) ç±»ä¼¼</p>
</blockquote>
<h4 data-id="heading-13">2.1 å…ƒç»„çš„åˆ›å»ºï¼ˆ2ç§å¸¸ç”¨æ–¹å¼ï¼‰</h4>
<p>å…ƒç»„ç”¨åœ†æ‹¬å· <code>()</code> è¡¨ç¤ºï¼Œå…ƒç´ ä¹‹é—´ç”¨é€—å·åˆ†éš”ï¼›ä¹Ÿå¯é€šè¿‡ <code>tuple()</code> å‡½æ•°åˆ›å»ºï¼Œæ³¨æ„å•å…ƒç´ å…ƒç»„çš„ç‰¹æ®Šå†™æ³•ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># æ–¹å¼1ï¼šç›´æ¥ç”¨åœ†æ‹¬å·åˆ›å»ºï¼ˆæœ€å¸¸ç”¨ï¼‰</span>
<span class="hljs-comment"># 1.1 åˆ›å»ºç©ºå…ƒç»„</span>
empty_tuple = ()
<span class="hljs-built_in">print</span>(empty_tuple)  <span class="hljs-comment"># è¾“å‡ºï¼š()</span>
<span class="hljs-built_in">print</span>(<span class="hljs-built_in">type</span>(empty_tuple))  <span class="hljs-comment"># è¾“å‡ºï¼š&lt;class 'tuple'&gt;</span>

<span class="hljs-comment"># 1.2 åˆ›å»ºåŒ…å«å…ƒç´ çš„å…ƒç»„</span>
num_tuple = (<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>)
str_tuple = (<span class="hljs-string">"Python"</span>, <span class="hljs-string">"Java"</span>, <span class="hljs-string">"C++"</span>)
mixed_tuple = (<span class="hljs-number">10</span>, <span class="hljs-string">"Python"</span>, <span class="hljs-literal">True</span>, <span class="hljs-number">3.14</span>)  <span class="hljs-comment"># æ··åˆç±»å‹</span>

<span class="hljs-comment"># 1.3 å•å…ƒç´ å…ƒç»„ï¼ˆå…³é”®ç»†èŠ‚ï¼šå¿…é¡»åŠ é€—å·ï¼Œå¦åˆ™ä¼šè¢«è¯†åˆ«ä¸ºæ™®é€šç±»å‹ï¼‰</span>
t1 = (<span class="hljs-number">10</span>)  <span class="hljs-comment"># é”™è¯¯ï¼šè¢«è¯†åˆ«ä¸ºæ•´æ•°</span>
<span class="hljs-built_in">print</span>(<span class="hljs-built_in">type</span>(t1))  <span class="hljs-comment"># è¾“å‡ºï¼š&lt;class 'int'&gt;</span>
t2 = (<span class="hljs-number">10</span>,)  <span class="hljs-comment"># æ­£ç¡®ï¼šåŠ é€—å·ï¼Œè¢«è¯†åˆ«ä¸ºå…ƒç»„</span>
t3 = <span class="hljs-number">20</span>,  <span class="hljs-comment"># çœç•¥æ‹¬å·ï¼ŒåŒæ ·éœ€è¦åŠ é€—å·</span>
<span class="hljs-built_in">print</span>(<span class="hljs-built_in">type</span>(t2), <span class="hljs-built_in">type</span>(t3))  <span class="hljs-comment"># è¾“å‡ºï¼š&lt;class 'tuple'&gt; &lt;class 'tuple'&gt;</span>

<span class="hljs-comment"># æ–¹å¼2ï¼šç”¨tuple()å‡½æ•°åˆ›å»ºï¼ˆè½¬æ¢å…¶ä»–å¯è¿­ä»£å¯¹è±¡ï¼‰</span>
str_to_tuple = <span class="hljs-built_in">tuple</span>(<span class="hljs-string">"Python"</span>)
<span class="hljs-built_in">print</span>(str_to_tuple)  <span class="hljs-comment"># è¾“å‡ºï¼š('P', 'y', 't', 'h', 'o', 'n')</span>
list_to_tuple = <span class="hljs-built_in">tuple</span>([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>])
<span class="hljs-built_in">print</span>(list_to_tuple)  <span class="hljs-comment"># è¾“å‡ºï¼š(1, 2, 3)</span>
</code></pre>
<h4 data-id="heading-14">2.2 å…ƒç»„çš„æ ¸å¿ƒç‰¹æ€§ï¼šä¸å¯å˜æ€§ï¼ˆé‡ç‚¹ï¼ï¼‰</h4>
<p>å…ƒç»„ä¸åˆ—è¡¨æœ€æœ¬è´¨çš„åŒºåˆ«ï¼š<strong>å…ƒç»„ä¸€æ—¦åˆ›å»ºï¼Œå…¶å…ƒç´ çš„ä¸ªæ•°ã€å€¼ã€é¡ºåºéƒ½æ— æ³•ä¿®æ”¹</strong>ï¼ˆåŒ…æ‹¬æ·»åŠ ã€åˆ é™¤ã€æ›¿æ¢å…ƒç´ ï¼‰ï¼Œå°è¯•ä¿®æ”¹ä¼šç›´æ¥æŠ¥é”™ï¼Œè¿™å°±æ˜¯å…ƒç»„çš„â€œä¸å¯å˜æ€§â€ï¼Œèƒ½æœ‰æ•ˆä¿æŠ¤æ•°æ®å®‰å…¨ã€‚</p>
<pre><code class="hljs language-python" lang="python">t = (<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>)

<span class="hljs-comment"># å°è¯•ä¿®æ”¹å…ƒç´ ï¼ˆæŠ¥é”™ï¼‰</span>
<span class="hljs-comment"># t[0] = 10  # æŠ¥é”™ï¼šTypeErrorï¼ˆå…ƒç»„ä¸æ”¯æŒå…ƒç´ èµ‹å€¼ï¼‰</span>

<span class="hljs-comment"># å°è¯•æ·»åŠ å…ƒç´ ï¼ˆæŠ¥é”™ï¼‰</span>
<span class="hljs-comment"># t.append(5)  # æŠ¥é”™ï¼šAttributeErrorï¼ˆå…ƒç»„æ²¡æœ‰appendæ–¹æ³•ï¼‰</span>

<span class="hljs-comment"># å°è¯•åˆ é™¤å…ƒç´ ï¼ˆæŠ¥é”™ï¼‰</span>
<span class="hljs-comment"># del t[1]  # æŠ¥é”™ï¼šTypeErrorï¼ˆå…ƒç»„ä¸æ”¯æŒå…ƒç´ åˆ é™¤ï¼‰</span>
<span class="hljs-comment"># t.pop()  # æŠ¥é”™ï¼šAttributeErrorï¼ˆå…ƒç»„æ²¡æœ‰popæ–¹æ³•ï¼‰</span>

<span class="hljs-comment"># ä¸å¯å˜æ€§çš„ä¾‹å¤–ï¼šè‹¥å…ƒç»„åŒ…å«å¯å˜å…ƒç´ ï¼ˆå¦‚åˆ—è¡¨ï¼‰ï¼Œå¯å˜å…ƒç´ å†…éƒ¨å¯ä¿®æ”¹</span>
t = (<span class="hljs-number">1</span>, [<span class="hljs-string">"a"</span>, <span class="hljs-string">"b"</span>, <span class="hljs-string">"c"</span>], <span class="hljs-number">3</span>)
<span class="hljs-comment"># æ— æ³•ä¿®æ”¹å…ƒç»„ä¸­å…ƒç´ çš„å¼•ç”¨ï¼ˆå¦‚æ›¿æ¢åˆ—è¡¨ï¼‰</span>
<span class="hljs-comment"># t[1] = ["x", "y"]  # æŠ¥é”™</span>
<span class="hljs-comment"># å¯ä¿®æ”¹åˆ—è¡¨å†…éƒ¨çš„å†…å®¹</span>
t[<span class="hljs-number">1</span>].append(<span class="hljs-string">"d"</span>)
<span class="hljs-built_in">print</span>(t)  <span class="hljs-comment"># è¾“å‡ºï¼š(1, ['a', 'b', 'c', 'd'], 3)</span>
</code></pre>
<h4 data-id="heading-15">2.3 å…ƒç»„çš„ä½¿ç”¨ï¼ˆè®¿é—®ã€æŸ¥è¯¢ï¼Œä¸åˆ—è¡¨ä¸€è‡´ï¼‰</h4>
<p>å…ƒç»„çš„è®¿é—®ã€æŸ¥è¯¢æ–¹æ³•ä¸åˆ—è¡¨å®Œå…¨ä¸€è‡´ï¼Œæ”¯æŒç´¢å¼•è®¿é—®ã€åˆ‡ç‰‡ã€in/not inã€index()ã€count()ï¼Œå› ä¸ºè¿™äº›æ“ä½œä¸ä¼šä¿®æ”¹å…ƒç»„æœ¬èº«ã€‚</p>
<pre><code class="hljs language-python" lang="python">t = (<span class="hljs-string">"è‹¹æœ"</span>, <span class="hljs-string">"é¦™è•‰"</span>, <span class="hljs-string">"æ©™å­"</span>, <span class="hljs-string">"é¦™è•‰"</span>, <span class="hljs-string">"èŠ’æœ"</span>)

<span class="hljs-comment"># 1. ç´¢å¼•è®¿é—®</span>
<span class="hljs-built_in">print</span>(t[<span class="hljs-number">0</span>])  <span class="hljs-comment"># è¾“å‡ºï¼šè‹¹æœ</span>
<span class="hljs-built_in">print</span>(t[-<span class="hljs-number">1</span>])  <span class="hljs-comment"># è¾“å‡ºï¼šèŠ’æœ</span>

<span class="hljs-comment"># 2. åˆ‡ç‰‡</span>
<span class="hljs-built_in">print</span>(t[<span class="hljs-number">1</span>:<span class="hljs-number">4</span>])  <span class="hljs-comment"># è¾“å‡ºï¼š('é¦™è•‰', 'æ©™å­', 'é¦™è•‰')</span>
<span class="hljs-built_in">print</span>(t[::-<span class="hljs-number">1</span>])  <span class="hljs-comment"># è¾“å‡ºï¼š('èŠ’æœ', 'é¦™è•‰', 'æ©™å­', 'é¦™è•‰', 'è‹¹æœ')</span>

<span class="hljs-comment"># 3. æŸ¥è¯¢æ“ä½œ</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"é¦™è•‰"</span> <span class="hljs-keyword">in</span> t)  <span class="hljs-comment"># è¾“å‡ºï¼šTrue</span>
<span class="hljs-built_in">print</span>(t.index(<span class="hljs-string">"æ©™å­"</span>))  <span class="hljs-comment"># è¾“å‡ºï¼š2</span>
<span class="hljs-built_in">print</span>(t.count(<span class="hljs-string">"é¦™è•‰"</span>))  <span class="hljs-comment"># è¾“å‡ºï¼š2</span>

<span class="hljs-comment"># 4. å¸¸ç”¨å†…ç½®å‡½æ•°</span>
<span class="hljs-built_in">print</span>(<span class="hljs-built_in">len</span>(t))  <span class="hljs-comment"># è¾“å‡ºï¼š5ï¼ˆé•¿åº¦ï¼‰</span>
<span class="hljs-built_in">print</span>(<span class="hljs-built_in">max</span>([<span class="hljs-string">"a"</span>, <span class="hljs-string">"b"</span>, <span class="hljs-string">"c"</span>]))  <span class="hljs-comment"># è¾“å‡ºï¼šcï¼ˆå­—ç¬¦ä¸²å…ƒç»„å¯æ¯”è¾ƒï¼‰</span>
</code></pre>
<h4 data-id="heading-16">2.4 å…ƒç»„ä¸åˆ—è¡¨çš„åŒºåˆ«ï¼ˆå¿…è®°ï¼Œæ–°æ‰‹ä¸æ··æ·†ï¼‰</h4>
<ul>
<li>è¯­æ³•åŒºåˆ«ï¼šåˆ—è¡¨ç”¨ <code>[]</code>ï¼Œå…ƒç»„ç”¨ <code>()</code>ï¼Œå•å…ƒç´ å…ƒç»„éœ€åŠ é€—å·ï¼›</li>
<li>æ ¸å¿ƒåŒºåˆ«ï¼šåˆ—è¡¨ã€Œå¯å˜ã€ï¼ˆå¯å¢åˆ æ”¹ï¼‰ï¼Œå…ƒç»„ã€Œä¸å¯å˜ã€ï¼ˆä¸å¯å¢åˆ æ”¹ï¼‰ï¼›</li>
<li>æ–¹æ³•åŒºåˆ«ï¼šåˆ—è¡¨æœ‰appendã€insertã€removeç­‰ä¿®æ”¹æ–¹æ³•ï¼Œå…ƒç»„åªæœ‰æŸ¥è¯¢æ–¹æ³•ï¼›</li>
<li>ä½¿ç”¨åœºæ™¯ï¼šåˆ—è¡¨é€‚åˆå­˜å‚¨éœ€è¦åŠ¨æ€ä¿®æ”¹çš„æ•°æ®ï¼Œå…ƒç»„é€‚åˆå­˜å‚¨å›ºå®šä¸å˜çš„æ•°æ®ï¼ˆå¦‚åæ ‡ã€é…ç½®ï¼‰ï¼Œå…ƒç»„å¯ä½œä¸ºå­—å…¸çš„é”®ï¼ˆåˆ—è¡¨ä¸å¯ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-17">3. *å­—å…¸ï¼ˆDictionaryï¼‰ï¼šé”®å€¼å¯¹çš„â€œæ˜ å°„æ•°æ®ä»“åº“â€</h3>
<p>å­—å…¸æ˜¯Pythonä¸­æœ€çµæ´»çš„ã€Œæ˜ å°„å‹å®¹å™¨ã€ï¼Œæ ¸å¿ƒç‰¹ç‚¹æ˜¯ã€Œæ— åºï¼ˆPython3.7+åæœ‰åºï¼‰ã€å¯å˜ã€é”®å€¼å¯¹å­˜å‚¨ã€â€”â€”å¯ä»¥ç†è§£ä¸ºä¸€ä¸ªâ€œå¸¦æ ‡ç­¾çš„æ–‡ä»¶å¤¹â€ï¼Œæ¯ä¸ªå…ƒç´ éƒ½ç”±â€œé”®ï¼ˆkeyï¼Œæ ‡ç­¾ï¼‰â€å’Œâ€œå€¼ï¼ˆvalueï¼Œå†…å®¹ï¼‰â€ç»„æˆï¼Œé€šè¿‡é”®å¿«é€ŸæŸ¥æ‰¾å€¼ï¼Œæ— éœ€é€šè¿‡ç´¢å¼•ï¼ŒæŸ¥è¯¢æ•ˆç‡æé«˜ï¼Œå¸¸ç”¨äºå­˜å‚¨å…³è”æ•°æ®ï¼ˆå¦‚ç”¨æˆ·ä¿¡æ¯ã€é…ç½®å‚æ•°ï¼‰ã€‚ï¼ˆ<strong>éå¸¸é‡è¦</strong>ï¼‰ï¼Œä¸ Java çš„ hashmap ç±»ä¼¼ï¼Œå¯¹æ¯”è¡¨å¦‚ä¸‹ï¼š</p>



























































<table><thead><tr><th>ç‰¹æ€§</th><th>Python <code>&lt;font style="color:rgb(15, 17, 21);background-color:rgb(235, 238, 242);"&gt;dict&lt;/font&gt;</code></th><th>Java <code>&lt;font style="color:rgb(15, 17, 21);background-color:rgb(235, 238, 242);"&gt;HashMap&lt;/font&gt;</code></th><th>æ˜¯å¦ç›¸ä¼¼</th></tr></thead><tbody><tr><td><strong>æ•°æ®ç»“æ„</strong></td><td>å“ˆå¸Œè¡¨</td><td>å“ˆå¸Œè¡¨</td><td>âœ… <strong>å®Œå…¨ç›¸åŒ</strong></td></tr><tr><td><strong>æ—¶é—´å¤æ‚åº¦</strong></td><td>O(1) å¹³å‡æŸ¥æ‰¾/æ’å…¥/åˆ é™¤</td><td>O(1) å¹³å‡æŸ¥æ‰¾/æ’å…¥/åˆ é™¤</td><td>âœ… <strong>å®Œå…¨ç›¸åŒ</strong></td></tr><tr><td><strong>é”®å”¯ä¸€æ€§</strong></td><td>é”®å¿…é¡»å”¯ä¸€</td><td>é”®å¿…é¡»å”¯ä¸€</td><td>âœ… <strong>å®Œå…¨ç›¸åŒ</strong></td></tr><tr><td><strong>å…è®¸nullé”®</strong></td><td>å…è®¸ï¼ˆPythonä¸­æ˜¯<code>&lt;font style="color:rgb(15, 17, 21);background-color:rgb(235, 238, 242);"&gt;None&lt;/font&gt;</code><br/>ï¼‰</td><td>å…è®¸ï¼ˆ1ä¸ªnullé”®ï¼‰</td><td>âœ… <strong>ç›¸ä¼¼</strong></td></tr><tr><td><strong>å…è®¸nullå€¼</strong></td><td>å…è®¸</td><td>å…è®¸ï¼ˆå¤šä¸ªnullå€¼ï¼‰</td><td>âœ… <strong>ç›¸ä¼¼</strong></td></tr><tr><td><strong>æ— åºæ€§</strong></td><td>Python 3.6å‰æ— åºï¼Œ3.7+ä¿æŒæ’å…¥é¡ºåº</td><td>Java 8å‰æ— åºï¼ŒJava 8+ä¿æŒä¸€å®šé¡ºåº</td><td>âœ… <strong>ç›¸ä¼¼</strong></td></tr><tr><td><strong>åŠ¨æ€æ‰©å®¹</strong></td><td>è‡ªåŠ¨æ‰©å®¹</td><td>è‡ªåŠ¨æ‰©å®¹ï¼ˆè´Ÿè½½å› å­0.75ï¼‰</td><td>âœ… <strong>ç›¸ä¼¼</strong></td></tr><tr><td><strong>å†²çªè§£å†³</strong></td><td>å¼€æ”¾å¯»å€æ³•</td><td>é“¾è¡¨/çº¢é»‘æ ‘ï¼ˆJava 8+ï¼‰</td><td>âš ï¸ <strong>ä¸åŒ</strong></td></tr></tbody></table>
<h4 data-id="heading-18">3.1 å­—å…¸çš„åˆ›å»ºï¼ˆ2ç§å¸¸ç”¨æ–¹å¼ï¼‰</h4>
<p>å­—å…¸ç”¨å¤§æ‹¬å· <code>{}</code> è¡¨ç¤ºï¼Œæ¯ä¸ªå…ƒç´ æ˜¯ <code>é”®:å€¼</code> çš„å½¢å¼ï¼Œé”®å€¼å¯¹ä¹‹é—´ç”¨é€—å·åˆ†éš”ï¼›ä¹Ÿå¯é€šè¿‡ <code>dict()</code> å‡½æ•°åˆ›å»ºï¼Œé”®å¿…é¡»æ˜¯ä¸å¯å˜ç±»å‹ï¼ˆå­—ç¬¦ä¸²ã€æ•°å­—ã€å…ƒç»„ï¼‰ï¼Œå€¼å¯ä»»æ„ç±»å‹ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># æ–¹å¼1ï¼šç›´æ¥ç”¨å¤§æ‹¬å·åˆ›å»ºï¼ˆæœ€å¸¸ç”¨ï¼‰</span>
<span class="hljs-comment"># 1.1 åˆ›å»ºç©ºå­—å…¸</span>
empty_dict = {}
<span class="hljs-built_in">print</span>(empty_dict)  <span class="hljs-comment"># è¾“å‡ºï¼š{}</span>
<span class="hljs-built_in">print</span>(<span class="hljs-built_in">type</span>(empty_dict))  <span class="hljs-comment"># è¾“å‡ºï¼š&lt;class 'dict'&gt;</span>

<span class="hljs-comment"># 1.2 åˆ›å»ºåŒ…å«é”®å€¼å¯¹çš„å­—å…¸ï¼ˆå…³è”æ•°æ®ï¼‰</span>
user_info = {
    <span class="hljs-string">"name"</span>: <span class="hljs-string">"å¼ ä¸‰"</span>,
    <span class="hljs-string">"age"</span>: <span class="hljs-number">18</span>,
    <span class="hljs-string">"gender"</span>: <span class="hljs-string">"ç”·"</span>,
    <span class="hljs-string">"score"</span>: <span class="hljs-number">95.5</span>
}
<span class="hljs-built_in">print</span>(user_info)  <span class="hljs-comment"># è¾“å‡ºï¼š{'name': 'å¼ ä¸‰', 'age': 18, 'gender': 'ç”·', 'score': 95.5}</span>

<span class="hljs-comment"># 1.3 åµŒå¥—å­—å…¸ï¼ˆå€¼ä¸ºå­—å…¸ï¼‰</span>
student_info = {
    <span class="hljs-string">"å¼ ä¸‰"</span>: {<span class="hljs-string">"age"</span>: <span class="hljs-number">18</span>, <span class="hljs-string">"score"</span>: <span class="hljs-number">95</span>},
    <span class="hljs-string">"æå››"</span>: {<span class="hljs-string">"age"</span>: <span class="hljs-number">19</span>, <span class="hljs-string">"score"</span>: <span class="hljs-number">88</span>}
}

<span class="hljs-comment"># æ–¹å¼2ï¼šç”¨dict()å‡½æ•°åˆ›å»º</span>
dict1 = <span class="hljs-built_in">dict</span>(name=<span class="hljs-string">"æå››"</span>, age=<span class="hljs-number">19</span>, gender=<span class="hljs-string">"å¥³"</span>)  <span class="hljs-comment"># å…³é”®å­—å‚æ•°å½¢å¼</span>
dict2 = <span class="hljs-built_in">dict</span>([(<span class="hljs-string">"name"</span>, <span class="hljs-string">"ç‹äº”"</span>), (<span class="hljs-string">"age"</span>, <span class="hljs-number">20</span>)])  <span class="hljs-comment"># åˆ—è¡¨åµŒå¥—å…ƒç»„å½¢å¼</span>
<span class="hljs-built_in">print</span>(dict1)  <span class="hljs-comment"># è¾“å‡ºï¼š{'name': 'æå››', 'age': 19, 'gender': 'å¥³'}</span>
<span class="hljs-built_in">print</span>(dict2)  <span class="hljs-comment"># è¾“å‡ºï¼š{'name': 'ç‹äº”', 'age': 20}</span>

<span class="hljs-comment"># æ–°æ‰‹é¿å‘ï¼šé”®å¿…é¡»æ˜¯ä¸å¯å˜ç±»å‹ï¼Œå€¼å¯ä»»æ„ç±»å‹</span>
<span class="hljs-comment"># invalid_dict = {[1,2]: "é”™è¯¯"}  # æŠ¥é”™ï¼šåˆ—è¡¨æ˜¯å¯å˜ç±»å‹ï¼Œä¸èƒ½ä½œä¸ºé”®</span>
</code></pre>
<h4 data-id="heading-19">3.2 å­—å…¸çš„æ ¸å¿ƒï¼šé”®ï¼ˆkeyï¼‰çš„è§„åˆ™ï¼ˆå¿…è®°ï¼‰</h4>
<p>å­—å…¸çš„é”®æ˜¯å”¯ä¸€çš„â€œæ ‡ç­¾â€ï¼Œå¿…é¡»éµå¾ª3ä¸ªè§„åˆ™ï¼Œå¦åˆ™ä¼šæŠ¥é”™æˆ–å‡ºç°å¼‚å¸¸[superscript:1]ï¼š</p>
<ul>
<li>é”®å¿…é¡»æ˜¯ã€Œä¸å¯å˜ç±»å‹ã€ï¼šå­—ç¬¦ä¸²ã€æ•°å­—ã€å…ƒç»„ï¼ˆä¸å¯å˜ï¼‰å‡å¯ï¼Œåˆ—è¡¨ã€é›†åˆï¼ˆå¯å˜ï¼‰ä¸å¯ä½œä¸ºé”®ï¼›</li>
<li>é”®å¿…é¡»ã€Œå”¯ä¸€ã€ï¼šè‹¥å‡ºç°é‡å¤é”®ï¼Œåé¢çš„é”®å€¼å¯¹ä¼šè¦†ç›–å‰é¢çš„ï¼ˆä¸ä¼šæŠ¥é”™ï¼Œä½†ä¼šä¸¢å¤±æ•°æ®ï¼‰ï¼›</li>
<li>é”®åŒºåˆ†å¤§å°å†™ï¼šå¦‚ "Name" å’Œ "name" æ˜¯ä¸¤ä¸ªä¸åŒçš„é”®ã€‚</li>
</ul>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># é‡å¤é”®ï¼šåé¢è¦†ç›–å‰é¢</span>
dict1 = {<span class="hljs-string">"name"</span>: <span class="hljs-string">"å¼ ä¸‰"</span>, <span class="hljs-string">"name"</span>: <span class="hljs-string">"æå››"</span>}
<span class="hljs-built_in">print</span>(dict1)  <span class="hljs-comment"># è¾“å‡ºï¼š{'name': 'æå››'}ï¼ˆå‰é¢çš„å¼ ä¸‰è¢«è¦†ç›–ï¼‰</span>

<span class="hljs-comment"># åŒºåˆ†å¤§å°å†™</span>
dict2 = {<span class="hljs-string">"name"</span>: <span class="hljs-string">"å¼ ä¸‰"</span>, <span class="hljs-string">"Name"</span>: <span class="hljs-string">"æå››"</span>}
<span class="hljs-built_in">print</span>(dict2)  <span class="hljs-comment"># è¾“å‡ºï¼š{'name': 'å¼ ä¸‰', 'Name': 'æå››'}ï¼ˆä¸¤ä¸ªä¸åŒçš„é”®ï¼‰</span>
</code></pre>
<h4 data-id="heading-20">3.3 å­—å…¸çš„å¢åˆ æ”¹æŸ¥ï¼ˆæ ¸å¿ƒæ“ä½œï¼Œé‡ç‚¹æŒæ¡ï¼‰</h4>
<p>å­—å…¸çš„å¢åˆ æ”¹æŸ¥å‡å›´ç»•ã€Œé”®ï¼ˆkeyï¼‰ã€å±•å¼€ï¼Œæ— éœ€ä½¿ç”¨ç´¢å¼•ï¼Œæ“ä½œé€»è¾‘æ¯”åˆ—è¡¨æ›´ç®€æ´ï¼Œé‡ç‚¹æŒæ¡å¸¸ç”¨æ–¹æ³•ã€‚</p>
<h5 data-id="heading-21">ï¼ˆ1ï¼‰å¢ï¼šæ·»åŠ é”®å€¼å¯¹ï¼ˆ2ç§å¸¸ç”¨æ–¹å¼ï¼‰</h5>
<pre><code class="hljs language-python" lang="python">user_info = {<span class="hljs-string">"name"</span>: <span class="hljs-string">"å¼ ä¸‰"</span>, <span class="hljs-string">"age"</span>: <span class="hljs-number">18</span>}

<span class="hljs-comment"># æ–¹æ³•1ï¼šç›´æ¥é€šè¿‡é”®èµ‹å€¼ï¼ˆæœ€å¸¸ç”¨ï¼‰</span>
<span class="hljs-comment"># é”®ä¸å­˜åœ¨ï¼šæ·»åŠ æ–°é”®å€¼å¯¹</span>
user_info[<span class="hljs-string">"gender"</span>] = <span class="hljs-string">"ç”·"</span>
<span class="hljs-built_in">print</span>(user_info)  <span class="hljs-comment"># è¾“å‡ºï¼š{'name': 'å¼ ä¸‰', 'age': 18, 'gender': 'ç”·'}</span>
<span class="hljs-comment"># é”®å­˜åœ¨ï¼šä¿®æ”¹å€¼ï¼ˆåç»­ä¿®æ”¹æ“ä½œï¼‰</span>
user_info[<span class="hljs-string">"age"</span>] = <span class="hljs-number">19</span>
<span class="hljs-built_in">print</span>(user_info)  <span class="hljs-comment"># è¾“å‡ºï¼š{'name': 'å¼ ä¸‰', 'age': 19, 'gender': 'ç”·'}</span>

<span class="hljs-comment"># æ–¹æ³•2ï¼šupdate()æ–¹æ³•ï¼šæ‰¹é‡æ·»åŠ /ä¿®æ”¹é”®å€¼å¯¹</span>
<span class="hljs-comment"># ä¼ å…¥å­—å…¸ï¼Œå­˜åœ¨çš„é”®ä¿®æ”¹å€¼ï¼Œä¸å­˜åœ¨çš„é”®æ·»åŠ </span>
user_info.update({<span class="hljs-string">"score"</span>: <span class="hljs-number">95.5</span>, <span class="hljs-string">"address"</span>: <span class="hljs-string">"åŒ—äº¬"</span>})
<span class="hljs-built_in">print</span>(user_info)  <span class="hljs-comment"># æ–°å¢scoreå’Œaddressä¸¤ä¸ªé”®å€¼å¯¹</span>

<span class="hljs-comment"># æ–¹æ³•3ï¼šsetdefault(key, default)ï¼šé”®ä¸å­˜åœ¨åˆ™æ·»åŠ ï¼Œå­˜åœ¨åˆ™ä¸ä¿®æ”¹</span>
user_info.setdefault(<span class="hljs-string">"hobby"</span>, <span class="hljs-string">"ç¼–ç¨‹"</span>)  <span class="hljs-comment"># æ–°å¢hobbyé”®å€¼å¯¹</span>
user_info.setdefault(<span class="hljs-string">"name"</span>, <span class="hljs-string">"æå››"</span>)  <span class="hljs-comment"># nameå·²å­˜åœ¨ï¼Œä¸ä¿®æ”¹</span>
<span class="hljs-built_in">print</span>(user_info)  <span class="hljs-comment"># è¾“å‡ºåŒ…å«hobby: 'ç¼–ç¨‹'</span>
</code></pre>
<h5 data-id="heading-22">ï¼ˆ2ï¼‰åˆ ï¼šåˆ é™¤é”®å€¼å¯¹ï¼ˆ4ç§å¸¸ç”¨æ–¹æ³•ï¼‰</h5>
<pre><code class="hljs language-python" lang="python">user_info = {<span class="hljs-string">"name"</span>: <span class="hljs-string">"å¼ ä¸‰"</span>, <span class="hljs-string">"age"</span>: <span class="hljs-number">18</span>, <span class="hljs-string">"gender"</span>: <span class="hljs-string">"ç”·"</span>, <span class="hljs-string">"score"</span>: <span class="hljs-number">95.5</span>}

<span class="hljs-comment"># æ–¹æ³•1ï¼šdel è¯­å¥ï¼šæ ¹æ®é”®åˆ é™¤ï¼Œåˆ é™¤ä¸å­˜åœ¨çš„é”®æŠ¥é”™</span>
<span class="hljs-keyword">del</span> user_info[<span class="hljs-string">"gender"</span>]
<span class="hljs-built_in">print</span>(user_info)  <span class="hljs-comment"># è¾“å‡ºï¼š{'name': 'å¼ ä¸‰', 'age': 18, 'score': 95.5}</span>
<span class="hljs-comment"># del user_info["address"]  # æŠ¥é”™ï¼šKeyErrorï¼ˆaddressä¸å­˜åœ¨ï¼‰</span>

<span class="hljs-comment"># æ–¹æ³•2ï¼špop(key, default)ï¼šæ ¹æ®é”®åˆ é™¤ï¼Œè¿”å›è¢«åˆ é™¤çš„å€¼ï¼Œä¸å­˜åœ¨åˆ™è¿”å›é»˜è®¤å€¼ï¼ˆå®‰å…¨ï¼‰</span>
deleted_score = user_info.pop(<span class="hljs-string">"score"</span>)
<span class="hljs-built_in">print</span>(deleted_score)  <span class="hljs-comment"># è¾“å‡ºï¼š95.5</span>
<span class="hljs-built_in">print</span>(user_info)  <span class="hljs-comment"># è¾“å‡ºï¼š{'name': 'å¼ ä¸‰', 'age': 18}</span>
<span class="hljs-comment"># ä¸å­˜åœ¨çš„é”®ï¼Œè¿”å›é»˜è®¤å€¼ï¼Œä¸æŠ¥é”™</span>
user_info.pop(<span class="hljs-string">"address"</span>, <span class="hljs-string">"æœªçŸ¥"</span>)  <span class="hljs-comment"># è¿”å›ï¼šæœªçŸ¥ï¼Œä¸æŠ¥é”™</span>

<span class="hljs-comment"># æ–¹æ³•3ï¼špopitem()ï¼šåˆ é™¤æœ€åä¸€ä¸ªé”®å€¼å¯¹ï¼ˆPython3.7+ï¼‰ï¼Œè¿”å›è¢«åˆ é™¤çš„é”®å€¼å¯¹</span>
deleted_item = user_info.popitem()
<span class="hljs-built_in">print</span>(deleted_item)  <span class="hljs-comment"># è¾“å‡ºï¼š('age', 18)</span>
<span class="hljs-built_in">print</span>(user_info)  <span class="hljs-comment"># è¾“å‡ºï¼š{'name': 'å¼ ä¸‰'}</span>

<span class="hljs-comment"># æ–¹æ³•4ï¼šclear()ï¼šæ¸…ç©ºå­—å…¸æ‰€æœ‰é”®å€¼å¯¹ï¼Œä¿ç•™å­—å…¸å¯¹è±¡</span>
user_info.clear()
<span class="hljs-built_in">print</span>(user_info)  <span class="hljs-comment"># è¾“å‡ºï¼š{}</span>
</code></pre>
<h5 data-id="heading-23">ï¼ˆ3ï¼‰æ”¹ï¼šä¿®æ”¹é”®å€¼å¯¹ï¼ˆç›´æ¥é€šè¿‡é”®èµ‹å€¼ï¼Œæœ€å¸¸ç”¨ï¼‰</h5>
<pre><code class="hljs language-python" lang="python">user_info = {<span class="hljs-string">"name"</span>: <span class="hljs-string">"å¼ ä¸‰"</span>, <span class="hljs-string">"age"</span>: <span class="hljs-number">18</span>, <span class="hljs-string">"score"</span>: <span class="hljs-number">95</span>}

<span class="hljs-comment"># ç›´æ¥é€šè¿‡é”®èµ‹å€¼ï¼šé”®å­˜åœ¨åˆ™ä¿®æ”¹å€¼ï¼Œä¸å­˜åœ¨åˆ™æ·»åŠ </span>
user_info[<span class="hljs-string">"age"</span>] = <span class="hljs-number">19</span>  <span class="hljs-comment"># ä¿®æ”¹ageçš„å€¼</span>
user_info[<span class="hljs-string">"score"</span>] = <span class="hljs-number">98</span>  <span class="hljs-comment"># ä¿®æ”¹scoreçš„å€¼</span>
<span class="hljs-built_in">print</span>(user_info)  <span class="hljs-comment"># è¾“å‡ºï¼š{'name': 'å¼ ä¸‰', 'age': 19, 'score': 98}</span>

<span class="hljs-comment"># æ‰¹é‡ä¿®æ”¹ï¼šupdate()æ–¹æ³•</span>
user_info.update({<span class="hljs-string">"age"</span>: <span class="hljs-number">20</span>, <span class="hljs-string">"score"</span>: <span class="hljs-number">100</span>})
<span class="hljs-built_in">print</span>(user_info)  <span class="hljs-comment"># è¾“å‡ºï¼š{'name': 'å¼ ä¸‰', 'age': 20, 'score': 100}</span>
</code></pre>
<h5 data-id="heading-24">ï¼ˆ4ï¼‰æŸ¥ï¼šæŸ¥è¯¢é”®å€¼å¯¹ï¼ˆ3ç§å¸¸ç”¨æ–¹å¼ï¼Œé‡ç‚¹æŒæ¡ï¼‰</h5>
<pre><code class="hljs language-python" lang="python">user_info = {<span class="hljs-string">"name"</span>: <span class="hljs-string">"å¼ ä¸‰"</span>, <span class="hljs-string">"age"</span>: <span class="hljs-number">18</span>, <span class="hljs-string">"gender"</span>: <span class="hljs-string">"ç”·"</span>, <span class="hljs-string">"score"</span>: <span class="hljs-number">95.5</span>}

<span class="hljs-comment"># æ–¹æ³•1ï¼šç›´æ¥é€šè¿‡é”®è®¿é—®ï¼ˆæœ€å¸¸ç”¨ï¼‰ï¼Œé”®ä¸å­˜åœ¨æŠ¥é”™</span>
<span class="hljs-built_in">print</span>(user_info[<span class="hljs-string">"name"</span>])  <span class="hljs-comment"># è¾“å‡ºï¼šå¼ ä¸‰</span>
<span class="hljs-built_in">print</span>(user_info[<span class="hljs-string">"age"</span>])   <span class="hljs-comment"># è¾“å‡ºï¼š18</span>
<span class="hljs-comment"># print(user_info["address"])  # æŠ¥é”™ï¼šKeyErrorï¼ˆaddressä¸å­˜åœ¨ï¼‰</span>

<span class="hljs-comment"># æ–¹æ³•2ï¼šget(key, default)ï¼šé€šè¿‡é”®è®¿é—®ï¼Œé”®ä¸å­˜åœ¨è¿”å›é»˜è®¤å€¼ï¼ˆå®‰å…¨ï¼Œæœ€æ¨èï¼‰</span>
<span class="hljs-built_in">print</span>(user_info.get(<span class="hljs-string">"name"</span>))  <span class="hljs-comment"># è¾“å‡ºï¼šå¼ ä¸‰</span>
<span class="hljs-built_in">print</span>(user_info.get(<span class="hljs-string">"address"</span>, <span class="hljs-string">"æœªçŸ¥"</span>))  <span class="hljs-comment"># è¾“å‡ºï¼šæœªçŸ¥ï¼ˆä¸å­˜åœ¨ï¼Œè¿”å›é»˜è®¤å€¼ï¼‰</span>

<span class="hljs-comment"># æ–¹æ³•3ï¼šæŸ¥è¯¢æ‰€æœ‰é”®ã€æ‰€æœ‰å€¼ã€æ‰€æœ‰é”®å€¼å¯¹</span>
<span class="hljs-built_in">print</span>(user_info.keys())    <span class="hljs-comment"># è¾“å‡ºï¼šdict_keys(['name', 'age', 'gender', 'score'])ï¼ˆæ‰€æœ‰é”®ï¼‰</span>
<span class="hljs-built_in">print</span>(user_info.values())  <span class="hljs-comment"># è¾“å‡ºï¼šdict_values(['å¼ ä¸‰', 18, 'ç”·', 95.5])ï¼ˆæ‰€æœ‰å€¼ï¼‰</span>
<span class="hljs-built_in">print</span>(user_info.items())   <span class="hljs-comment"># è¾“å‡ºï¼šdict_items([('name', 'å¼ ä¸‰'), ...])ï¼ˆæ‰€æœ‰é”®å€¼å¯¹ï¼Œå¯ç”¨äºéå†ï¼‰</span>

<span class="hljs-comment"># éå†å­—å…¸ï¼ˆç»“åˆç¬¬ä¸‰é˜¶æ®µforå¾ªç¯ï¼Œé‡ç‚¹åº”ç”¨ï¼‰</span>
<span class="hljs-keyword">for</span> key <span class="hljs-keyword">in</span> user_info.keys():
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"é”®ï¼š<span class="hljs-subst">{key}</span>ï¼Œå€¼ï¼š<span class="hljs-subst">{user_info[key]}</span>"</span>)
<span class="hljs-keyword">for</span> key, value <span class="hljs-keyword">in</span> user_info.items():
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"é”®ï¼š<span class="hljs-subst">{key}</span>ï¼Œå€¼ï¼š<span class="hljs-subst">{value}</span>"</span>)
</code></pre>
<h4 data-id="heading-25">3.4 å­—å…¸çš„å¸¸ç”¨æ–¹æ³•ï¼ˆé«˜é¢‘ä½¿ç”¨ï¼‰</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># 1. keys()/values()/items()ï¼šæŸ¥è¯¢æ‰€æœ‰é”®ã€å€¼ã€é”®å€¼å¯¹ï¼ˆå¦‚ä¸ŠæŸ¥è¯¢éƒ¨åˆ†ï¼‰</span>
<span class="hljs-comment"># 2. get(key, default)ï¼šå®‰å…¨è®¿é—®å€¼ï¼ˆæœ€å¸¸ç”¨ï¼‰</span>
<span class="hljs-comment"># 3. update()ï¼šæ‰¹é‡å¢åˆ æ”¹</span>
<span class="hljs-comment"># 4. setdefault(key, default)ï¼šå®‰å…¨æ·»åŠ é”®å€¼å¯¹</span>
<span class="hljs-comment"># 5. copy()ï¼šå¤åˆ¶å­—å…¸ï¼ˆé¿å…ä¿®æ”¹åŸå­—å…¸ï¼‰</span>
dict1 = {<span class="hljs-string">"name"</span>: <span class="hljs-string">"å¼ ä¸‰"</span>, <span class="hljs-string">"age"</span>: <span class="hljs-number">18</span>}
dict2 = dict1.copy()
dict2[<span class="hljs-string">"age"</span>] = <span class="hljs-number">19</span>
<span class="hljs-built_in">print</span>(dict1)  <span class="hljs-comment"># è¾“å‡ºï¼š{'name': 'å¼ ä¸‰', 'age': 18}ï¼ˆåŸå­—å…¸ä¸å˜ï¼‰</span>
<span class="hljs-built_in">print</span>(dict2)  <span class="hljs-comment"># è¾“å‡ºï¼š{'name': 'å¼ ä¸‰', 'age': 19}ï¼ˆæ–°å­—å…¸ä¿®æ”¹ï¼‰</span>
</code></pre>
<h3 data-id="heading-26">4 é›†åˆï¼ˆSetï¼‰ï¼šå»é‡ä¼˜å…ˆçš„â€œæ— åºæ•°æ®ä»“åº“â€</h3>
<p>é›†åˆæ˜¯Pythonä¸­ã€Œæ— åºã€å¯å˜ã€å”¯ä¸€ã€çš„å®¹å™¨ç±»å‹ï¼Œæ ¸å¿ƒç‰¹ç‚¹æ˜¯ã€Œè‡ªåŠ¨å»é‡ã€æ”¯æŒé›†åˆè¿ç®—ã€â€”â€”å¯ä»¥ç†è§£ä¸ºä¸€ä¸ªâ€œæ— æ ‡ç­¾ã€ä¸é‡å¤çš„æ–‡ä»¶å¤¹â€ï¼Œé€‚åˆç”¨äºå»é‡ã€åˆ¤æ–­å…ƒç´ æ˜¯å¦å­˜åœ¨ã€é›†åˆä¹‹é—´çš„äº¤é›†/å¹¶é›†ç­‰æ“ä½œï¼ŒæŸ¥è¯¢æ•ˆç‡æ¯”åˆ—è¡¨é«˜ã€‚</p>
<h4 data-id="heading-27">4.1 é›†åˆçš„åˆ›å»ºï¼ˆ2ç§å¸¸ç”¨æ–¹å¼ï¼‰</h4>
<p>é›†åˆç”¨å¤§æ‹¬å·<code>{}</code> è¡¨ç¤ºï¼Œå…ƒç´ ä¹‹é—´ç”¨é€—å·åˆ†éš”ï¼›ä¹Ÿå¯é€šè¿‡<code>set()</code> å‡½æ•°åˆ›å»ºï¼Œ<strong>æ³¨æ„ï¼šåˆ›å»ºç©ºé›†åˆå¿…é¡»ç”¨set()ï¼Œä¸èƒ½ç”¨{}ï¼ˆ{}åˆ›å»ºçš„æ˜¯ç©ºå­—å…¸ï¼‰</strong>ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># æ–¹å¼1ï¼šç›´æ¥ç”¨å¤§æ‹¬å·åˆ›å»ºï¼ˆå…ƒç´ å”¯ä¸€ï¼Œè‡ªåŠ¨å»é‡ï¼‰</span>
<span class="hljs-comment"># 1.1 åˆ›å»ºåŒ…å«å…ƒç´ çš„é›†åˆ</span>
num_set = {<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>}  <span class="hljs-comment"># åŒ…å«é‡å¤å…ƒç´ </span>
<span class="hljs-built_in">print</span>(num_set)  <span class="hljs-comment"># è¾“å‡ºï¼š{1, 2, 3, 4, 5}ï¼ˆè‡ªåŠ¨å»é‡ï¼‰</span>
str_set = {<span class="hljs-string">"Python"</span>, <span class="hljs-string">"Java"</span>, <span class="hljs-string">"Python"</span>}
<span class="hljs-built_in">print</span>(str_set)  <span class="hljs-comment"># è¾“å‡ºï¼š{'Python', 'Java'}ï¼ˆè‡ªåŠ¨å»é‡ï¼‰</span>

<span class="hljs-comment"># 1.2 æ³¨æ„ï¼šä¸èƒ½ç”¨{}åˆ›å»ºç©ºé›†åˆï¼ˆåˆ›å»ºçš„æ˜¯ç©ºå­—å…¸ï¼‰</span>
empty_set1 = {}
<span class="hljs-built_in">print</span>(<span class="hljs-built_in">type</span>(empty_set1))  <span class="hljs-comment"># è¾“å‡ºï¼š&lt;class 'dict'&gt;ï¼ˆç©ºå­—å…¸ï¼‰</span>

<span class="hljs-comment"># æ–¹å¼2ï¼šç”¨set()å‡½æ•°åˆ›å»ºï¼ˆæœ€å¸¸ç”¨ï¼Œé€‚åˆè½¬æ¢å…¶ä»–ç±»å‹å»é‡ï¼‰</span>
<span class="hljs-comment"># åˆ›å»ºç©ºé›†åˆï¼ˆæ­£ç¡®æ–¹å¼ï¼‰</span>
empty_set2 = <span class="hljs-built_in">set</span>()
<span class="hljs-built_in">print</span>(empty_set2)  <span class="hljs-comment"># è¾“å‡ºï¼šset()</span>
<span class="hljs-built_in">print</span>(<span class="hljs-built_in">type</span>(empty_set2))  <span class="hljs-comment"># è¾“å‡ºï¼š&lt;class 'set'&gt;</span>

<span class="hljs-comment"># è½¬æ¢å…¶ä»–å¯è¿­ä»£å¯¹è±¡ï¼Œè‡ªåŠ¨å»é‡</span>
list_to_set = <span class="hljs-built_in">set</span>([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>])
<span class="hljs-built_in">print</span>(list_to_set)  <span class="hljs-comment"># è¾“å‡ºï¼š{1, 2, 3, 4}ï¼ˆåˆ—è¡¨å»é‡ï¼‰</span>
str_to_set = <span class="hljs-built_in">set</span>(<span class="hljs-string">"Python"</span>)
<span class="hljs-built_in">print</span>(str_to_set)  <span class="hljs-comment"># è¾“å‡ºï¼š{'P', 'y', 't', 'h', 'o', 'n'}ï¼ˆå­—ç¬¦ä¸²å»é‡ï¼Œæ— åºï¼‰</span>
</code></pre>
<p><strong>æ–°æ‰‹é¿å‘</strong>ï¼šé›†åˆæ˜¯æ— åºçš„ï¼Œæ— æ³•é€šè¿‡ç´¢å¼•è®¿é—®å…ƒç´ ï¼›åˆ›å»ºç©ºé›†åˆå¿…é¡»ç”¨set()ï¼Œ{}åˆ›å»ºçš„æ˜¯ç©ºå­—å…¸ã€‚</p>
<h4 data-id="heading-28">4.2 é›†åˆçš„æ ¸å¿ƒç‰¹æ€§ï¼šè‡ªåŠ¨å»é‡ï¼ˆé‡ç‚¹ï¼ï¼‰</h4>
<p>é›†åˆçš„æœ€å¸¸ç”¨åœºæ™¯å°±æ˜¯ã€Œå»é‡ã€â€”â€”æ— è®ºåˆ›å»ºæ—¶æ˜¯å¦åŒ…å«é‡å¤å…ƒç´ ï¼Œé›†åˆéƒ½ä¼šè‡ªåŠ¨ä¿ç•™å”¯ä¸€å…ƒç´ ï¼Œæ— éœ€æ‰‹åŠ¨å¤„ç†ï¼Œè¿™æ˜¯é›†åˆæœ€æ ¸å¿ƒçš„ä¼˜åŠ¿ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># æ¡ˆä¾‹1ï¼šåˆ—è¡¨å»é‡ï¼ˆæœ€å¸¸ç”¨åœºæ™¯ï¼‰</span>
original_list = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">3</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">5</span>]
<span class="hljs-comment"># åˆ—è¡¨è½¬é›†åˆï¼Œè‡ªåŠ¨å»é‡ï¼Œå†è½¬å›åˆ—è¡¨</span>
unique_list = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">set</span>(original_list))
<span class="hljs-built_in">print</span>(unique_list)  <span class="hljs-comment"># è¾“å‡ºï¼š[1, 2, 3, 4, 5]ï¼ˆå»é‡åçš„åˆ—è¡¨ï¼Œé¡ºåºå¯èƒ½å˜åŒ–ï¼‰</span>

<span class="hljs-comment"># æ¡ˆä¾‹2ï¼šå­—ç¬¦ä¸²å»é‡</span>
original_str = <span class="hljs-string">"aabbbccc"</span>
unique_str = <span class="hljs-string">""</span>.join(<span class="hljs-built_in">set</span>(original_str))  <span class="hljs-comment"># é›†åˆè½¬å­—ç¬¦ä¸²ï¼Œéœ€ç”¨joinæ–¹æ³•</span>
<span class="hljs-built_in">print</span>(unique_str)  <span class="hljs-comment"># è¾“å‡ºï¼šabcï¼ˆé¡ºåºå¯èƒ½å˜åŒ–ï¼Œå› ä¸ºé›†åˆæ— åºï¼‰</span>
</code></pre>
<h4 data-id="heading-29">4.3 é›†åˆçš„å¢åˆ æ”¹æŸ¥ï¼ˆåŸºç¡€æ“ä½œï¼‰</h4>
<p>é›†åˆæ˜¯å¯å˜å®¹å™¨ï¼Œæ”¯æŒæ·»åŠ ã€åˆ é™¤å…ƒç´ ï¼Œä½†ç”±äºæ— åºï¼Œæ— æ³•é€šè¿‡ç´¢å¼•ä¿®æ”¹å…ƒç´ ï¼ˆæ— ç´¢å¼•ï¼‰ï¼ŒæŸ¥è¯¢ä¸»è¦æ˜¯åˆ¤æ–­å…ƒç´ æ˜¯å¦å­˜åœ¨ã€‚</p>
<h5 data-id="heading-30">ï¼ˆ1ï¼‰å¢ï¼šæ·»åŠ å…ƒç´ ï¼ˆ2ç§å¸¸ç”¨æ–¹æ³•ï¼‰</h5>
<pre><code class="hljs language-python" lang="python">s = {<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>}

<span class="hljs-comment"># æ–¹æ³•1ï¼šadd(x)ï¼šæ·»åŠ å•ä¸ªå…ƒç´ ï¼Œé‡å¤å…ƒç´ ä¸æ·»åŠ ï¼ˆæ— æŠ¥é”™ï¼‰</span>
s.add(<span class="hljs-number">5</span>)
<span class="hljs-built_in">print</span>(s)  <span class="hljs-comment"># è¾“å‡ºï¼š{1, 2, 3, 4, 5}</span>
s.add(<span class="hljs-number">4</span>)  <span class="hljs-comment"># æ·»åŠ é‡å¤å…ƒç´ ï¼Œæ— å˜åŒ–</span>
<span class="hljs-built_in">print</span>(s)  <span class="hljs-comment"># è¾“å‡ºï¼š{1, 2, 3, 4, 5}</span>

<span class="hljs-comment"># æ–¹æ³•2ï¼šupdate(iterable)ï¼šæ‰¹é‡æ·»åŠ å…ƒç´ ï¼ˆå¯è¿­ä»£å¯¹è±¡ï¼‰ï¼Œé‡å¤å…ƒç´ è‡ªåŠ¨è¿‡æ»¤</span>
s.update([<span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>])  <span class="hljs-comment"># æ·»åŠ åˆ—è¡¨ä¸­çš„å…ƒç´ </span>
<span class="hljs-built_in">print</span>(s)  <span class="hljs-comment"># è¾“å‡ºï¼š{1, 2, 3, 4, 5, 6, 7}</span>
s.update((<span class="hljs-string">"a"</span>, <span class="hljs-string">"b"</span>))  <span class="hljs-comment"># æ·»åŠ å…ƒç»„ä¸­çš„å…ƒç´ </span>
<span class="hljs-built_in">print</span>(s)  <span class="hljs-comment"># è¾“å‡ºï¼š{1, 2, 3, 4, 5, 6, 7, 'a', 'b'}</span>
</code></pre>
<h5 data-id="heading-31">ï¼ˆ2ï¼‰åˆ ï¼šåˆ é™¤å…ƒç´ ï¼ˆ4ç§å¸¸ç”¨æ–¹æ³•ï¼‰</h5>
<pre><code class="hljs language-python" lang="python">s = {<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>}

<span class="hljs-comment"># æ–¹æ³•1ï¼šremove(x)ï¼šåˆ é™¤æŒ‡å®šå…ƒç´ ï¼Œå…ƒç´ ä¸å­˜åœ¨æŠ¥é”™</span>
s.remove(<span class="hljs-number">3</span>)
<span class="hljs-built_in">print</span>(s)  <span class="hljs-comment"># è¾“å‡ºï¼š{1, 2, 4, 5, 6}</span>
<span class="hljs-comment"># s.remove(10)  # æŠ¥é”™ï¼šKeyErrorï¼ˆ10ä¸å­˜åœ¨ï¼‰</span>

<span class="hljs-comment"># æ–¹æ³•2ï¼šdiscard(x)ï¼šåˆ é™¤æŒ‡å®šå…ƒç´ ï¼Œå…ƒç´ ä¸å­˜åœ¨ä¸æŠ¥é”™ï¼ˆæ›´å®‰å…¨ï¼‰</span>
s.discard(<span class="hljs-number">4</span>)
<span class="hljs-built_in">print</span>(s)  <span class="hljs-comment"># è¾“å‡ºï¼š{1, 2, 5, 6}</span>
s.discard(<span class="hljs-number">10</span>)  <span class="hljs-comment"># å…ƒç´ ä¸å­˜åœ¨ï¼Œæ— å˜åŒ–ï¼Œä¸æŠ¥é”™</span>

<span class="hljs-comment"># æ–¹æ³•3ï¼špop()ï¼šåˆ é™¤ä»»æ„ä¸€ä¸ªå…ƒç´ ï¼ˆé›†åˆæ— åºï¼‰ï¼Œè¿”å›è¢«åˆ é™¤çš„å…ƒç´ ï¼Œç©ºé›†åˆæŠ¥é”™</span>
deleted_num = s.pop()
<span class="hljs-built_in">print</span>(deleted_num)  <span class="hljs-comment"># è¾“å‡ºï¼š1ï¼ˆéšæœºåˆ é™¤ï¼Œæ¯æ¬¡å¯èƒ½ä¸åŒï¼‰</span>
<span class="hljs-built_in">print</span>(s)  <span class="hljs-comment"># è¾“å‡ºï¼š{2, 5, 6}</span>

<span class="hljs-comment"># æ–¹æ³•4ï¼šclear()ï¼šæ¸…ç©ºé›†åˆæ‰€æœ‰å…ƒç´ ï¼Œä¿ç•™é›†åˆå¯¹è±¡</span>
s.clear()
<span class="hljs-built_in">print</span>(s)  <span class="hljs-comment"># è¾“å‡ºï¼šset()</span>
</code></pre>
<h5 data-id="heading-32">ï¼ˆ3ï¼‰æŸ¥ï¼šåˆ¤æ–­å…ƒç´ æ˜¯å¦å­˜åœ¨ï¼ˆin / not inï¼Œæœ€å¸¸ç”¨ï¼‰</h5>
<pre><code class="hljs language-python" lang="python">s = {<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>}

<span class="hljs-comment"># åˆ¤æ–­å…ƒç´ æ˜¯å¦å­˜åœ¨ï¼Œè¿”å›å¸ƒå°”å€¼</span>
<span class="hljs-built_in">print</span>(<span class="hljs-number">3</span> <span class="hljs-keyword">in</span> s)  <span class="hljs-comment"># è¾“å‡ºï¼šTrueï¼ˆå­˜åœ¨ï¼‰</span>
<span class="hljs-built_in">print</span>(<span class="hljs-number">6</span> <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> s)  <span class="hljs-comment"># è¾“å‡ºï¼šTrueï¼ˆä¸å­˜åœ¨ï¼‰</span>

<span class="hljs-comment"># é›†åˆæ— ç´¢å¼•ï¼Œæ— æ³•é€šè¿‡ç´¢å¼•è®¿é—®å…ƒç´ ï¼ˆæŠ¥é”™ï¼‰</span>
<span class="hljs-comment"># print(s[0])  # æŠ¥é”™ï¼šTypeError</span>
</code></pre>
<h4 data-id="heading-33">4.4 é›†åˆçš„æ ¸å¿ƒï¼šé›†åˆè¿ç®—ï¼ˆé‡ç‚¹ï¼Œå®ç”¨åœºæ™¯ï¼‰</h4>
<p>é›†åˆæ”¯æŒäº¤é›†ã€å¹¶é›†ã€å·®é›†ã€å¯¹ç§°å·®é›†ç­‰è¿ç®—ï¼Œé€‚åˆç”¨äºä¸¤ä¸ªé›†åˆä¹‹é—´çš„å¯¹æ¯”ï¼ˆå¦‚æ‰¾å‡ºå…±åŒå…ƒç´ ã€ä¸åŒå…ƒç´ ï¼‰ï¼Œå¯é€šè¿‡è¿ç®—ç¬¦æˆ–æ–¹æ³•å®ç°ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># å®šä¹‰ä¸¤ä¸ªé›†åˆ</span>
a = {<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>}
b = {<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>}

<span class="hljs-comment"># 1. å¹¶é›†ï¼šä¸¤ä¸ªé›†åˆçš„æ‰€æœ‰å…ƒç´ ï¼ˆå»é‡ï¼‰ï¼Œè¿ç®—ç¬¦ | æˆ–æ–¹æ³• union()</span>
<span class="hljs-built_in">print</span>(a | b)  <span class="hljs-comment"># è¾“å‡ºï¼š{1, 2, 3, 4, 5, 6, 7, 8}</span>
<span class="hljs-built_in">print</span>(a.union(b))  <span class="hljs-comment"># è¾“å‡ºåŒä¸Š</span>

<span class="hljs-comment"># 2. äº¤é›†ï¼šä¸¤ä¸ªé›†åˆçš„å…±åŒå…ƒç´ ï¼Œè¿ç®—ç¬¦ &amp; æˆ–æ–¹æ³• intersection()</span>
<span class="hljs-built_in">print</span>(a &amp; b)  <span class="hljs-comment"># è¾“å‡ºï¼š{4, 5}</span>
<span class="hljs-built_in">print</span>(a.intersection(b))  <span class="hljs-comment"># è¾“å‡ºåŒä¸Š</span>

<span class="hljs-comment"># 3. å·®é›†ï¼šaä¸­æœ‰ã€bä¸­æ²¡æœ‰çš„å…ƒç´ ï¼Œè¿ç®—ç¬¦ - æˆ–æ–¹æ³• difference()</span>
<span class="hljs-built_in">print</span>(a - b)  <span class="hljs-comment"># è¾“å‡ºï¼š{1, 2, 3}</span>
<span class="hljs-built_in">print</span>(a.difference(b))  <span class="hljs-comment"># è¾“å‡ºåŒä¸Š</span>

<span class="hljs-comment"># 4. å¯¹ç§°å·®é›†ï¼šä¸¤ä¸ªé›†åˆä¸­äº’ä¸ç›¸åŒçš„å…ƒç´ ï¼ˆå¹¶é›† - äº¤é›†ï¼‰ï¼Œè¿ç®—ç¬¦ ^ æˆ–æ–¹æ³• symmetric_difference()</span>
<span class="hljs-built_in">print</span>(a ^ b)  <span class="hljs-comment"># è¾“å‡ºï¼š{1, 2, 3, 6, 7, 8}</span>
<span class="hljs-built_in">print</span>(a.symmetric_difference(b))  <span class="hljs-comment"># è¾“å‡ºåŒä¸Š</span>

<span class="hljs-comment"># 5. å­é›†/è¶…é›†åˆ¤æ–­ï¼šissubset() / issuperset()</span>
c = {<span class="hljs-number">1</span>, <span class="hljs-number">2</span>}
<span class="hljs-built_in">print</span>(c.issubset(a))  <span class="hljs-comment"># è¾“å‡ºï¼šTrueï¼ˆcæ˜¯açš„å­é›†ï¼‰</span>
<span class="hljs-built_in">print</span>(a.issuperset(c))  <span class="hljs-comment"># è¾“å‡ºï¼šTrueï¼ˆaæ˜¯cçš„è¶…é›†ï¼‰</span>
</code></pre>
<h3 data-id="heading-34">5 å­—ç¬¦ä¸²é«˜çº§æ“ä½œï¼ˆè¡”æ¥åŸºç¡€ï¼Œé‡ç‚¹æ‹“å±•ï¼‰</h3>
<p>åœ¨ç¬¬äºŒé˜¶æ®µï¼Œæˆ‘ä»¬å­¦ä¹ äº†å­—ç¬¦ä¸²çš„åŸºç¡€ç”¨æ³•ï¼ˆåˆ›å»ºã€æ‹¼æ¥ã€åŸºæœ¬è¾“å…¥è¾“å‡ºï¼‰ï¼Œæœ¬æ¬¡ç¬¬å››é˜¶æ®µï¼Œæˆ‘ä»¬é‡ç‚¹æ‹“å±•å­—ç¬¦ä¸²çš„é«˜çº§æ“ä½œâ€”â€”åˆ‡ç‰‡ã€æ ¼å¼åŒ–ã€å¸¸ç”¨å†…ç½®æ–¹æ³•ï¼Œè¿™äº›æ“ä½œåœ¨æ—¥å¸¸ç¼–ç¨‹ä¸­é«˜é¢‘ä½¿ç”¨ï¼Œç»“åˆå®¹å™¨ç±»å‹ï¼Œèƒ½å®ç°æ›´çµæ´»çš„æ–‡æœ¬å¤„ç†ã€‚</p>
<h4 data-id="heading-35">5.1 å­—ç¬¦ä¸²åˆ‡ç‰‡ï¼ˆä¸åˆ—è¡¨ã€å…ƒç»„åˆ‡ç‰‡ä¸€è‡´ï¼‰</h4>
<p>å­—ç¬¦ä¸²æ˜¯æœ‰åºçš„å­—ç¬¦åºåˆ—ï¼Œæ”¯æŒåˆ‡ç‰‡æ“ä½œï¼Œè¯­æ³•ä¸åˆ—è¡¨ã€å…ƒç»„å®Œå…¨ä¸€è‡´ï¼š<code>å­—ç¬¦ä¸²[èµ·å§‹ç´¢å¼•:ç»“æŸç´¢å¼•:æ­¥é•¿]</code>ï¼Œæ ¸å¿ƒè§„åˆ™ï¼šå·¦é—­å³å¼€ï¼Œæ”¯æŒæ­£å‘ã€åå‘åˆ‡ç‰‡ï¼Œå¯å¿«é€Ÿè·å–å­å­—ç¬¦ä¸²ã€‚</p>
<pre><code class="hljs language-python" lang="python">s = <span class="hljs-string">"Hello, Python!"</span>

<span class="hljs-comment"># 1. åŸºç¡€åˆ‡ç‰‡</span>
<span class="hljs-built_in">print</span>(s[<span class="hljs-number">0</span>:<span class="hljs-number">5</span>])  <span class="hljs-comment"># è¾“å‡ºï¼šHelloï¼ˆä»0åˆ°4ï¼Œå·¦é—­å³å¼€ï¼‰</span>
<span class="hljs-built_in">print</span>(s[<span class="hljs-number">7</span>:])   <span class="hljs-comment"># è¾“å‡ºï¼šPython!ï¼ˆä»7åˆ°æœ«å°¾ï¼‰</span>
<span class="hljs-built_in">print</span>(s[:<span class="hljs-number">5</span>])   <span class="hljs-comment"># è¾“å‡ºï¼šHelloï¼ˆä»å¼€å¤´åˆ°4ï¼‰</span>
<span class="hljs-built_in">print</span>(s[:])    <span class="hljs-comment"># è¾“å‡ºï¼šHello, Python!ï¼ˆå¤åˆ¶æ•´ä¸ªå­—ç¬¦ä¸²ï¼‰</span>

<span class="hljs-comment"># 2. æŒ‡å®šæ­¥é•¿åˆ‡ç‰‡</span>
<span class="hljs-built_in">print</span>(s[<span class="hljs-number">0</span>:<span class="hljs-number">12</span>:<span class="hljs-number">2</span>])  <span class="hljs-comment"># è¾“å‡ºï¼šHlo yhnï¼ˆæ­¥é•¿ä¸º2ï¼Œé—´éš”1ä¸ªå­—ç¬¦ï¼‰</span>
<span class="hljs-built_in">print</span>(s[::-<span class="hljs-number">1</span>])    <span class="hljs-comment"># è¾“å‡ºï¼š!nohtyP ,olleHï¼ˆæ­¥é•¿ä¸º-1ï¼Œåè½¬å­—ç¬¦ä¸²ï¼‰</span>

<span class="hljs-comment"># 3. åå‘åˆ‡ç‰‡</span>
<span class="hljs-built_in">print</span>(s[-<span class="hljs-number">7</span>:-<span class="hljs-number">1</span>])  <span class="hljs-comment"># è¾“å‡ºï¼šPythonï¼ˆä»å€’æ•°7åˆ°å€’æ•°1ï¼Œä¸åŒ…å«å€’æ•°1ï¼‰</span>
</code></pre>
<h4 data-id="heading-36">5.2 å­—ç¬¦ä¸²æ ¼å¼åŒ–ï¼ˆ3ç§å¸¸ç”¨æ–¹å¼ï¼Œé‡ç‚¹æŒæ¡ï¼‰</h4>
<p>å­—ç¬¦ä¸²æ ¼å¼åŒ–ç”¨äºå°†å˜é‡ã€æ•°å­—ç­‰æ’å…¥åˆ°å­—ç¬¦ä¸²ä¸­ï¼Œå®ç°åŠ¨æ€æ–‡æœ¬ç”Ÿæˆï¼ˆå¦‚æ‹¼æ¥ç”¨æˆ·ä¿¡æ¯ã€è¾“å‡ºç»“æœï¼‰ï¼Œå¸¸ç”¨3ç§æ–¹å¼ï¼Œé‡ç‚¹æŒæ¡f-stringï¼ˆæœ€ç®€æ´ã€æœ€é«˜æ•ˆï¼‰ã€‚</p>
<pre><code class="hljs language-python" lang="python">name = <span class="hljs-string">"å¼ ä¸‰"</span>
age = <span class="hljs-number">18</span>
score = <span class="hljs-number">95.5</span>

<span class="hljs-comment"># æ–¹å¼1ï¼šf-stringï¼ˆPython3.6+ï¼Œæœ€å¸¸ç”¨ï¼Œç®€æ´é«˜æ•ˆï¼‰</span>
<span class="hljs-comment"># è¯­æ³•ï¼šf"å­—ç¬¦ä¸²{å˜é‡/è¡¨è¾¾å¼}"ï¼Œå¯ç›´æ¥åµŒå…¥å˜é‡å’Œè¡¨è¾¾å¼</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"æˆ‘çš„åå­—æ˜¯<span class="hljs-subst">{name}</span>ï¼Œå¹´é¾„æ˜¯<span class="hljs-subst">{age}</span>å²ï¼Œæˆç»©æ˜¯<span class="hljs-subst">{score}</span>åˆ†"</span>)
<span class="hljs-comment"># æ ¼å¼åŒ–æ•°å­—ï¼ˆä¿ç•™2ä½å°æ•°ï¼‰</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"æˆ‘çš„æˆç»©æ˜¯<span class="hljs-subst">{score:<span class="hljs-number">.2</span>f}</span>åˆ†"</span>)  <span class="hljs-comment"># è¾“å‡ºï¼šæˆ‘çš„æˆç»©æ˜¯95.50åˆ†</span>
<span class="hljs-comment"># åµŒå…¥è¡¨è¾¾å¼</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ˜å¹´æˆ‘<span class="hljs-subst">{age+<span class="hljs-number">1</span>}</span>å²"</span>)  <span class="hljs-comment"># è¾“å‡ºï¼šæ˜å¹´æˆ‘19å²</span>

<span class="hljs-comment"># æ–¹å¼2ï¼šformat()æ–¹æ³•ï¼ˆå…¼å®¹æ€§å¥½ï¼Œé€‚ç”¨äºæ‰€æœ‰Python3ç‰ˆæœ¬ï¼‰</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"æˆ‘çš„åå­—æ˜¯{}ï¼Œå¹´é¾„æ˜¯{}å²ï¼Œæˆç»©æ˜¯{}åˆ†"</span>.<span class="hljs-built_in">format</span>(name, age, score))
<span class="hljs-comment"># æŒ‡å®šå ä½ç¬¦é¡ºåºï¼ˆé¿å…å‚æ•°é¡ºåºé”™è¯¯ï¼‰</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"æˆ‘çš„åå­—æ˜¯{0}ï¼Œå¹´é¾„æ˜¯{1}å²ï¼Œ{0}çš„æˆç»©æ˜¯{2}åˆ†"</span>.<span class="hljs-built_in">format</span>(name, age, score))

<span class="hljs-comment"># æ–¹å¼3ï¼š%å ä½ç¬¦ï¼ˆè€å¼æ–¹æ³•ï¼Œå…¼å®¹æ€§å¼ºï¼Œè¾ƒå°‘ä½¿ç”¨ï¼‰</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"æˆ‘çš„åå­—æ˜¯%sï¼Œå¹´é¾„æ˜¯%då²ï¼Œæˆç»©æ˜¯%fåˆ†"</span> % (name, age, score))
<span class="hljs-comment"># æ ¼å¼åŒ–æ•°å­—ï¼ˆä¿ç•™2ä½å°æ•°ï¼‰</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"æˆ‘çš„æˆç»©æ˜¯%.2fåˆ†"</span> % score)  <span class="hljs-comment"># è¾“å‡ºï¼šæˆ‘çš„æˆç»©æ˜¯95.50åˆ†</span>
</code></pre>
<p>æ¨èä¼˜å…ˆçº§ï¼šf-string &gt; format()æ–¹æ³• &gt; %å ä½ç¬¦ï¼Œæ—¥å¸¸ç¼–ç¨‹ä¼˜å…ˆä½¿ç”¨f-stringï¼Œç®€æ´åˆé«˜æ•ˆã€‚</p>
<h4 data-id="heading-37">5.3 å­—ç¬¦ä¸²å¸¸ç”¨å†…ç½®æ–¹æ³•ï¼ˆé«˜é¢‘ä½¿ç”¨ï¼Œå¿…è®°ï¼‰</h4>
<p>å­—ç¬¦ä¸²æ˜¯ä¸å¯å˜ç±»å‹ï¼ˆä¸å…ƒç»„ä¸€è‡´ï¼‰ï¼Œæ‰€æœ‰ä¿®æ”¹ç±»æ–¹æ³•éƒ½ä¼šè¿”å›æ–°å­—ç¬¦ä¸²ï¼Œä¸ä¼šä¿®æ”¹åŸå­—ç¬¦ä¸²ï¼Œé‡ç‚¹è®°ä»¥ä¸‹é«˜é¢‘æ–¹æ³•ï¼š</p>
<pre><code class="hljs language-python" lang="python">s = <span class="hljs-string">"  Hello, Python!  "</span>

<span class="hljs-comment"># 1. å»é™¤ç©ºæ ¼ï¼ˆæœ€å¸¸ç”¨ï¼‰</span>
<span class="hljs-built_in">print</span>(s.strip())  <span class="hljs-comment"># è¾“å‡ºï¼šHello, Python!ï¼ˆå»é™¤å‰åä¸¤ç«¯ç©ºæ ¼ï¼Œä¿ç•™ä¸­é—´ï¼‰</span>
<span class="hljs-built_in">print</span>(s.lstrip()) <span class="hljs-comment"># è¾“å‡ºï¼šHello, Python!  ï¼ˆå»é™¤å·¦ç«¯ç©ºæ ¼ï¼‰</span>
<span class="hljs-built_in">print</span>(s.rstrip()) <span class="hljs-comment"># è¾“å‡ºï¼š  Hello, Python!ï¼ˆå»é™¤å³ç«¯ç©ºæ ¼ï¼‰</span>

<span class="hljs-comment"># 2. å¤§å°å†™è½¬æ¢</span>
<span class="hljs-built_in">print</span>(s.upper())  <span class="hljs-comment"># è¾“å‡ºï¼š  HELLO, PYTHON!  ï¼ˆå…¨éƒ¨å¤§å†™ï¼‰</span>
<span class="hljs-built_in">print</span>(s.lower())  <span class="hljs-comment"># è¾“å‡ºï¼š  hello, python!  ï¼ˆå…¨éƒ¨å°å†™ï¼‰</span>
<span class="hljs-built_in">print</span>(s.title())  <span class="hljs-comment"># è¾“å‡ºï¼š  Hello, Python!  ï¼ˆæ¯ä¸ªå•è¯é¦–å­—æ¯å¤§å†™ï¼‰</span>

<span class="hljs-comment"># 3. æŸ¥æ‰¾ä¸æ›¿æ¢</span>
<span class="hljs-comment"># find(x)ï¼šæŸ¥æ‰¾å­å­—ç¬¦ä¸²xçš„ç´¢å¼•ï¼Œä¸å­˜åœ¨è¿”å›-1ï¼ˆä¸æŠ¥é”™ï¼‰</span>
<span class="hljs-built_in">print</span>(s.find(<span class="hljs-string">"Python"</span>))  <span class="hljs-comment"># è¾“å‡ºï¼š8ï¼ˆPythonçš„èµ·å§‹ç´¢å¼•ï¼‰</span>
<span class="hljs-built_in">print</span>(s.find(<span class="hljs-string">"Java"</span>))    <span class="hljs-comment"># è¾“å‡ºï¼š-1ï¼ˆä¸å­˜åœ¨ï¼‰</span>
<span class="hljs-comment"># replace(old, new)ï¼šå°†å­å­—ç¬¦ä¸²oldæ›¿æ¢ä¸ºnewï¼Œå¯æŒ‡å®šæ›¿æ¢æ¬¡æ•°</span>
<span class="hljs-built_in">print</span>(s.replace(<span class="hljs-string">"Python"</span>, <span class="hljs-string">"Java"</span>))  <span class="hljs-comment"># è¾“å‡ºï¼š  Hello, Java!  ï¼ˆå…¨éƒ¨æ›¿æ¢ï¼‰</span>
<span class="hljs-built_in">print</span>(s.replace(<span class="hljs-string">"o"</span>, <span class="hljs-string">"0"</span>, <span class="hljs-number">1</span>))       <span class="hljs-comment"># è¾“å‡ºï¼š  Hell0, Python!  ï¼ˆæ›¿æ¢1æ¬¡ï¼‰</span>

<span class="hljs-comment"># 4. åˆ†å‰²ä¸æ‹¼æ¥</span>
<span class="hljs-comment"># split(sep)ï¼šæŒ‰æŒ‡å®šåˆ†éš”ç¬¦sepåˆ†å‰²å­—ç¬¦ä¸²ï¼Œè¿”å›åˆ—è¡¨</span>
s1 = <span class="hljs-string">"a,b,c,d"</span>
<span class="hljs-built_in">print</span>(s1.split(<span class="hljs-string">","</span>))  <span class="hljs-comment"># è¾“å‡ºï¼š['a', 'b', 'c', 'd']ï¼ˆæŒ‰é€—å·åˆ†å‰²ï¼‰</span>
<span class="hljs-comment"># join(iterable)ï¼šå°†å¯è¿­ä»£å¯¹è±¡ï¼ˆå¦‚åˆ—è¡¨ï¼‰çš„å…ƒç´ æ‹¼æ¥ä¸ºå­—ç¬¦ä¸²ï¼Œåˆ†éš”ç¬¦ä¸ºåŸå­—ç¬¦ä¸²</span>
list1 = [<span class="hljs-string">"Hello"</span>, <span class="hljs-string">"Python"</span>]
<span class="hljs-built_in">print</span>(<span class="hljs-string">" "</span>.join(list1))  <span class="hljs-comment"># è¾“å‡ºï¼šHello Pythonï¼ˆç”¨ç©ºæ ¼æ‹¼æ¥ï¼‰</span>

<span class="hljs-comment"># 5. åˆ¤æ–­å­—ç¬¦ä¸²ç±»å‹</span>
s2 = <span class="hljs-string">"12345"</span>
s3 = <span class="hljs-string">"abc123"</span>
<span class="hljs-built_in">print</span>(s2.isdigit())  <span class="hljs-comment"># è¾“å‡ºï¼šTrueï¼ˆåˆ¤æ–­æ˜¯å¦å…¨æ˜¯æ•°å­—ï¼‰</span>
<span class="hljs-built_in">print</span>(s3.isalpha())  <span class="hljs-comment"># è¾“å‡ºï¼šFalseï¼ˆåˆ¤æ–­æ˜¯å¦å…¨æ˜¯å­—æ¯ï¼‰</span>
<span class="hljs-built_in">print</span>(s3.isalnum())  <span class="hljs-comment"># è¾“å‡ºï¼šTrueï¼ˆåˆ¤æ–­æ˜¯å¦å…¨æ˜¯å­—æ¯+æ•°å­—ï¼‰</span>

<span class="hljs-comment"># 6. è¡¥å……ï¼šé•¿åº¦ã€è®¡æ•°</span>
<span class="hljs-built_in">print</span>(<span class="hljs-built_in">len</span>(s))  <span class="hljs-comment"># è¾“å‡ºï¼š16ï¼ˆå­—ç¬¦ä¸²é•¿åº¦ï¼ŒåŒ…å«ç©ºæ ¼ï¼‰</span>
<span class="hljs-built_in">print</span>(s.count(<span class="hljs-string">"o"</span>))  <span class="hljs-comment"># è¾“å‡ºï¼š2ï¼ˆç»Ÿè®¡oå‡ºç°çš„æ¬¡æ•°ï¼‰</span>
</code></pre>
<h3 data-id="heading-38">6 æ€»ç»“</h3>
<p>åˆ°è¿™é‡Œï¼ŒPython3åŸºç¡€å­¦ä¹ ç¬¬å››é˜¶æ®µã€Œå®¹å™¨æ•°æ®ç±»å‹ã€çš„æ ¸å¿ƒå†…å®¹å°±å…¨éƒ¨æ¢³ç†å®Œæ¯•äº†ï¼è¿™ä¸€é˜¶æ®µçš„çŸ¥è¯†ç‚¹æ˜¯Pythonæ•°æ®å¤„ç†çš„â€œæ ¸å¿ƒå·¥å…·â€ï¼Œæˆ‘ä»¬å­¦ä¹ äº†å››ç§æ ¸å¿ƒå®¹å™¨å’Œå­—ç¬¦ä¸²é«˜çº§æ“ä½œï¼Œå®ƒä»¬å„è‡ªæœ‰æ˜ç¡®çš„é€‚ç”¨åœºæ™¯ï¼Œä¸²è”èµ·æ¥å°±èƒ½é«˜æ•ˆå¤„ç†å„ç§æ•°æ®åœºæ™¯ï¼š</p>
<ul>
<li>åˆ—è¡¨ï¼ˆListï¼‰ï¼šæœ‰åºã€å¯å˜ï¼Œé€‚åˆå­˜å‚¨éœ€è¦åŠ¨æ€ä¿®æ”¹çš„æœ‰åºæ•°æ®ï¼ˆå¦‚å¾…åŠäº‹é¡¹ã€æ•°æ®åˆ—è¡¨ï¼‰ï¼›</li>
<li>å…ƒç»„ï¼ˆTupleï¼‰ï¼šæœ‰åºã€ä¸å¯å˜ï¼Œé€‚åˆå­˜å‚¨å›ºå®šä¸å˜çš„æ•°æ®ï¼ˆå¦‚åæ ‡ã€é…ç½®å‚æ•°ï¼‰ï¼Œå®‰å…¨æ€§é«˜ï¼›</li>
<li>å­—å…¸ï¼ˆDictionaryï¼‰ï¼šé”®å€¼å¯¹ã€å¯å˜ï¼Œé€‚åˆå­˜å‚¨å…³è”æ•°æ®ï¼ˆå¦‚ç”¨æˆ·ä¿¡æ¯ã€é…ç½®é¡¹ï¼‰ï¼ŒæŸ¥è¯¢æ•ˆç‡é«˜ï¼›</li>
<li>é›†åˆï¼ˆSetï¼‰ï¼šæ— åºã€å”¯ä¸€ï¼Œé€‚åˆå»é‡ã€é›†åˆè¿ç®—ï¼ˆå¦‚æ‰¾å‡ºå…±åŒå…ƒç´ ï¼‰ï¼ŒæŸ¥è¯¢æ•ˆç‡é«˜ï¼›</li>
<li>å­—ç¬¦ä¸²é«˜çº§æ“ä½œï¼šåˆ‡ç‰‡ã€æ ¼å¼åŒ–ã€å†…ç½®æ–¹æ³•ï¼Œé€‚åˆæ–‡æœ¬å¤„ç†ï¼ˆå¦‚æ‹¼æ¥ã€æ›¿æ¢ã€å»ç©ºæ ¼ï¼‰ã€‚</li>
</ul>
<p>å¯¹äºæ–°æ‰‹æ¥è¯´ï¼Œè¿™ä¸€é˜¶æ®µçš„é‡ç‚¹ä¸æ˜¯æ­»è®°ç¡¬èƒŒæ‰€æœ‰æ–¹æ³•ï¼Œè€Œæ˜¯ï¼šç†è§£æ¯ç§å®¹å™¨çš„æ ¸å¿ƒç‰¹æ€§ï¼ˆå¯å˜/ä¸å¯å˜ã€æœ‰åº/æ— åºã€å­˜å‚¨æ–¹å¼ï¼‰ï¼Œè®°ä½å®ƒä»¬çš„é€‚ç”¨åœºæ™¯â€”â€”ä»€ä¹ˆæ—¶å€™ç”¨åˆ—è¡¨ã€ä»€ä¹ˆæ—¶å€™ç”¨å­—å…¸ã€ä»€ä¹ˆæ—¶å€™ç”¨é›†åˆï¼Œæ¯”è®°ä½æ‰€æœ‰æ–¹æ³•æ›´é‡è¦ï¼›å…¶æ¬¡ï¼Œå¤šåŠ¨æ‰‹æ•²å†™ä»£ç ç¤ºä¾‹ï¼Œæ¯ä¸€ä¸ªæ–¹æ³•ã€æ¯ä¸€ç§æ“ä½œéƒ½äº²è‡ªè¿è¡Œä¸€éï¼Œæ„Ÿå—ä¸åŒå®¹å™¨çš„ä½¿ç”¨å·®å¼‚ï¼Œé‡åˆ°æŠ¥é”™ï¼ˆå¦‚ç´¢å¼•è¶Šç•Œã€é”®ä¸å­˜åœ¨ï¼‰ä¸è¦æ…Œï¼Œç»“åˆå‰é¢çš„é¿å‘æŠ€å·§æ’æŸ¥é—®é¢˜ï¼Œè¿™æ˜¯æŒæ¡å®¹å™¨ç±»å‹çš„å…³é”®ï¼›æœ€åï¼Œå°è¯•ç»“åˆç¬¬ä¸‰é˜¶æ®µçš„æµç¨‹æ§åˆ¶çŸ¥è¯†ï¼Œç”¨å®¹å™¨å­˜å‚¨æ•°æ®ã€å¤„ç†æ•°æ®ï¼ˆå¦‚ç”¨åˆ—è¡¨é…åˆå¾ªç¯éå†ã€ç”¨å­—å…¸å­˜å‚¨ç”¨æˆ·ä¿¡æ¯å¹¶æŸ¥è¯¢ï¼‰ï¼Œå®ç°ç®€å•çš„å°æ¡ˆä¾‹ï¼Œè¿™æ ·æ‰èƒ½çœŸæ­£åƒé€è¿™äº›â€œæ•°æ®ä»“åº“â€ï¼Œä¸ºåç»­çš„å­¦ä¹ æ‰“ä¸‹æ‰å®çš„åŸºç¡€ã€‚</p>
<hr/>
<p><em>è½¬å‘è¯·æºå¸¦ä½œè€…ä¿¡æ¯</em>  <strong>@æ€’æ”¾å§å¾·å¾· @ä¸€ä¸ªæœ‰æ¢¦æœ‰æˆçš„äºº</strong><br/>
æŒç»­åˆ›ä½œå¾ˆä¸å®¹æ˜“ï¼Œä½œè€…å°†ä»¥å°½å¯èƒ½çš„è¯¦ç»†æŠŠæ‰€å­¦çŸ¥è¯†åˆ†äº«å„ä½å¼€å‘è€…ï¼Œä¸€èµ·è¿›æ­¥ä¸€èµ·å­¦ä¹ ã€‚<strong>è½¬è½½è¯·æºå¸¦é“¾æ¥ï¼Œè½¬è½½åˆ°å¾®ä¿¡å…¬ä¼—å·è¯·å‹¿é€‰æ‹©åŸåˆ›ï¼Œè°¢è°¢ï¼</strong><br/>
ğŸ‘åˆ›ä½œä¸æ˜“ï¼Œå¦‚æœ‰é”™è¯¯è¯·æŒ‡æ­£ï¼Œæ„Ÿè°¢è§‚çœ‹ï¼è®°å¾—ç‚¹èµå“¦ï¼ğŸ‘<br/>
è°¢è°¢æ”¯æŒï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[RabbitMQä¸Celeryæ·±åº¦é›†æˆï¼šæ„å»ºé«˜æ€§èƒ½Pythonå¼‚æ­¥ä»»åŠ¡ç³»ç»Ÿ]]></title>    <link>https://juejin.cn/post/7598818096753590323</link>    <guid>https://juejin.cn/post/7598818096753590323</guid>    <pubDate>2026-01-25T06:28:11.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7598818096753590323" data-draft-id="7598827641307447347" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="RabbitMQä¸Celeryæ·±åº¦é›†æˆï¼šæ„å»ºé«˜æ€§èƒ½Pythonå¼‚æ­¥ä»»åŠ¡ç³»ç»Ÿ"/> <meta itemprop="keywords" content="åç«¯,RabbitMQ"/> <meta itemprop="datePublished" content="2026-01-25T06:28:11.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Javaæ°´è§£"/> <meta itemprop="url" content="https://juejin.cn/user/2441349519143037"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            RabbitMQä¸Celeryæ·±åº¦é›†æˆï¼šæ„å»ºé«˜æ€§èƒ½Pythonå¼‚æ­¥ä»»åŠ¡ç³»ç»Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2441349519143037/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Javaæ°´è§£
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-25T06:28:11.000Z" title="Sun Jan 25 2026 06:28:11 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»23åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">æ‘˜è¦</h3>
<blockquote>
<p>æœ¬æ–‡æ·±å…¥æ¢è®¨RabbitMQä¸Celeryåœ¨Pythoné¡¹ç›®ä¸­çš„å®Œæ•´é›†æˆæ–¹æ¡ˆï¼Œæ¶µç›–<strong>æ¶ˆæ¯è·¯ç”±æœºåˆ¶</strong>ã€<strong>ä»»åŠ¡é˜Ÿåˆ—ç®¡ç†</strong>ã€<strong>å·¥ä½œæµè®¾è®¡</strong>ä¸‰å¤§æ ¸å¿ƒæ¨¡å—ã€‚é€šè¿‡æ¶æ„æµç¨‹å›¾ã€å®Œæ•´å¯è¿è¡Œä»£ç ç¤ºä¾‹å’Œä¼ä¸šçº§å®æˆ˜æ¡ˆä¾‹ï¼Œå±•ç¤ºå¦‚ä½•æ„å»ºé«˜å¯ç”¨ã€å¯æ‰©å±•çš„å¼‚æ­¥ä»»åŠ¡ç³»ç»Ÿã€‚æ–‡ç« åŒ…å«æ€§èƒ½ä¼˜åŒ–æŠ€å·§ã€æ•…éšœæ’æŸ¥æŒ‡å—ä»¥åŠç”Ÿäº§ç¯å¢ƒéƒ¨ç½²æ–¹æ¡ˆï¼Œä¸ºPythonå¼€å‘è€…æä¾›ä»å…¥é—¨åˆ°ç²¾é€šçš„å®Œæ•´æŒ‡å—ã€‚</p>
</blockquote>
<h3 data-id="heading-1"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>1 å¼•è¨€ï¼šä¸ºä»€ä¹ˆç°ä»£Pythoné¡¹ç›®éœ€è¦æ¶ˆæ¯é˜Ÿåˆ—</h3>
<p>åœ¨æˆ‘çš„Pythonå¼€å‘ç”Ÿæ¶¯ä¸­ï¼Œè§è¯äº†å¼‚æ­¥ä»»åŠ¡å¤„ç†ä»ç®€å•çš„å¤šçº¿ç¨‹åˆ°åˆ†å¸ƒå¼æ¶ˆæ¯é˜Ÿåˆ—çš„å®Œæ•´æ¼”è¿›ã€‚è®°å¾—æ›¾ç»è´Ÿè´£ä¸€ä¸ªç”µå•†å¹³å°çš„è®¢å•ç³»ç»Ÿï¼Œé«˜å³°æœŸæ¯ç§’éœ€è¦å¤„ç†ä¸Šåƒä¸ªè®¢å•ï¼Œæœ€åˆçš„åŒæ­¥å¤„ç†æ¶æ„å¯¼è‡´æ•°æ®åº“è¿æ¥æ± é¢‘ç¹è€—å°½ï¼Œç”¨æˆ·ä½“éªŒæå·®ã€‚å¼•å…¥RabbitMQå’ŒCeleryåï¼Œ<strong>ç³»ç»Ÿååé‡æå‡äº†8å€</strong>ï¼Œè®¢å•å¤„ç†å»¶è¿Ÿä»ç§’çº§é™ä½åˆ°æ¯«ç§’çº§ï¼Œè¿™è®©æˆ‘æ·±åˆ»è®¤è¯†åˆ°æ¶ˆæ¯é˜Ÿåˆ—åœ¨ç°ä»£åº”ç”¨ä¸­çš„æ ¸å¿ƒä»·å€¼ã€‚</p>
<h4 data-id="heading-2"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>1.1 æ¶ˆæ¯é˜Ÿåˆ—çš„æ ¸å¿ƒä»·å€¼</h4>
<p>æ¶ˆæ¯é˜Ÿåˆ—é€šè¿‡<strong>å¼‚æ­¥å¤„ç†</strong>å’Œ<strong>ç³»ç»Ÿè§£è€¦</strong>è§£å†³äº†ä¼ ç»Ÿæ¶æ„çš„ç—›ç‚¹ã€‚åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œè¿™ç§ä¼˜åŠ¿ä½“ç°åœ¨å¤šä¸ªæ–¹é¢ï¼š</p>
<pre><code class="hljs language-ruby" lang="ruby"><span class="hljs-comment"># åŒæ­¥å¤„ç†æ¨¡å¼ - å­˜åœ¨æ˜æ˜¾ç“¶é¢ˆ</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderService</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">create_order</span>(<span class="hljs-params"><span class="hljs-variable language_">self</span>, order_data</span>):
        <span class="hljs-comment"># éªŒè¯åº“å­˜ â†’ åŒæ­¥é˜»å¡</span>
        inventory_check = <span class="hljs-variable language_">self</span>.check_inventory(order_data)
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> <span class="hljs-symbol">inventory_check:</span>
            <span class="hljs-keyword">raise</span> <span class="hljs-title class_">Exception</span>(<span class="hljs-string">"åº“å­˜ä¸è¶³"</span>)
        
        <span class="hljs-comment"># å¤„ç†æ”¯ä»˜ â†’ åŒæ­¥é˜»å¡</span>
        payment_result = <span class="hljs-variable language_">self</span>.process_payment(order_data)
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> <span class="hljs-symbol">payment_result:</span>
            <span class="hljs-keyword">raise</span> <span class="hljs-title class_">Exception</span>(<span class="hljs-string">"æ”¯ä»˜å¤±è´¥"</span>)
        
        <span class="hljs-comment"># å‘é€é€šçŸ¥ â†’ åŒæ­¥é˜»å¡</span>
        <span class="hljs-variable language_">self</span>.send_notification(order_data)
        
        <span class="hljs-keyword">return</span> order_data
 
<span class="hljs-comment"># å¼‚æ­¥å¤„ç†æ¨¡å¼ - åŸºäºæ¶ˆæ¯é˜Ÿåˆ—</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">AsyncOrderService</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">create_order</span>(<span class="hljs-params"><span class="hljs-variable language_">self</span>, order_data</span>):
        <span class="hljs-comment"># å¿«é€ŸéªŒè¯åŸºç¡€æ•°æ®</span>
        <span class="hljs-variable language_">self</span>.validate_basic_data(order_data)
        
        <span class="hljs-comment"># å¼‚æ­¥å¤„ç†åç»­æµç¨‹</span>
        celery.send_task(<span class="hljs-string">'process_order_async'</span>, args=[order_data])
        
        <span class="hljs-keyword">return</span> {<span class="hljs-string">"status"</span>: <span class="hljs-string">"processing"</span>, <span class="hljs-string">"order_id"</span>: order_data[<span class="hljs-string">'id'</span>]}
<span class="hljs-variable constant_">AI</span>å†™ä»£ç python
è¿è¡Œ
</code></pre>
<p>è¿™ç§æ¶æ„è½¬å˜å¸¦æ¥çš„æ”¶ç›Šæ˜¯å·¨å¤§çš„ï¼š<strong>ç³»ç»Ÿå“åº”æ—¶é—´å‡å°‘70%</strong> ï¼Œ<strong>é”™è¯¯æ¢å¤èƒ½åŠ›æ˜¾è‘—æå‡</strong>ï¼Œ<strong>èµ„æºåˆ©ç”¨ç‡ä¼˜åŒ–60%</strong> ã€‚</p>
<h4 data-id="heading-3"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>1.2Â RabbitMQä¸Celeryçš„ååŒä¼˜åŠ¿</h4>
<p>RabbitMQä½œä¸º<strong>æ¶ˆæ¯ä»£ç†</strong>å’ŒCeleryä½œä¸º<strong>åˆ†å¸ƒå¼ä»»åŠ¡é˜Ÿåˆ—</strong>çš„ç»„åˆï¼Œä¸ºPythonåº”ç”¨æä¾›äº†ä¼ä¸šçº§çš„å¼‚æ­¥å¤„ç†èƒ½åŠ›ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dabaecd54f8a42ed8ddfc79f94497dff~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YeawtOinow==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769927291&amp;x-signature=XZsdLjLk6WGDd7aCSwv0wmvN4w8%3D" alt="" loading="lazy"/></p>
<p>è¿™ç§æ¶æ„çš„ä¼˜åŠ¿åœ¨äºï¼š</p>
<ul>
<li><strong>å¯é æ€§</strong>ï¼šRabbitMQæä¾›æ¶ˆæ¯æŒä¹…åŒ–ã€ç¡®è®¤æœºåˆ¶</li>
<li><strong>çµæ´»æ€§</strong>ï¼šæ”¯æŒå¤šç§æ¶ˆæ¯è·¯ç”±æ¨¡å¼</li>
<li><strong>å¯æ‰©å±•æ€§</strong>ï¼šCelery Workerå¯ä»¥æ°´å¹³æ‰©å±•</li>
<li><strong>å¯è§‚æµ‹æ€§</strong>ï¼šä¸°å¯Œçš„ç›‘æ§å’Œç®¡ç†å·¥å…·</li>
</ul>
<h3 data-id="heading-4"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>2 RabbitMQæ ¸å¿ƒåŸç†æ·±åº¦è§£æ</h3>
<h4 data-id="heading-5"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>2.1 AMQPåè®®ä¸æ¶ˆæ¯æ¨¡å‹</h4>
<p>RabbitMQåŸºäºAMQPï¼ˆé«˜çº§æ¶ˆæ¯é˜Ÿåˆ—åè®®ï¼‰å®ç°ï¼Œå…¶æ ¸å¿ƒæ¦‚å¿µåŒ…æ‹¬<strong>Exchange</strong>ã€<strong>Queue</strong>ã€<strong>Binding</strong>ç­‰ã€‚ç†è§£è¿™äº›æ¦‚å¿µæ˜¯æ­£ç¡®ä½¿ç”¨RabbitMQçš„åŸºç¡€ã€‚</p>
<h5 data-id="heading-6">2.1.1 Exchangeç±»å‹ä¸è·¯ç”±æœºåˆ¶</h5>
<p>RabbitMQæ”¯æŒå››ç§ä¸»è¦çš„Exchangeç±»å‹ï¼Œæ¯ç§ç±»å‹å¯¹åº”ä¸åŒçš„è·¯ç”±ç­–ç•¥ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># Exchangeç±»å‹é…ç½®ç¤ºä¾‹</span>
<span class="hljs-keyword">from</span> celery <span class="hljs-keyword">import</span> Celery
 
app = Celery(<span class="hljs-string">'myapp'</span>, broker=<span class="hljs-string">'amqp://guest:guest@localhost:5672//'</span>)
 
<span class="hljs-comment"># é…ç½®ä¸åŒçš„Exchangeç±»å‹</span>
app.conf.update(
    <span class="hljs-comment"># Direct Exchange - ç²¾ç¡®åŒ¹é…</span>
    task_routes={
        <span class="hljs-string">'tasks.process_order'</span>: {
            <span class="hljs-string">'exchange'</span>: <span class="hljs-string">'orders_direct'</span>,
            <span class="hljs-string">'exchange_type'</span>: <span class="hljs-string">'direct'</span>,
            <span class="hljs-string">'routing_key'</span>: <span class="hljs-string">'order.process'</span>
        },
    },
    <span class="hljs-comment"># Topic Exchange - æ¨¡å¼åŒ¹é…</span>
    task_routes={
        <span class="hljs-string">'tasks.*.email'</span>: {
            <span class="hljs-string">'exchange'</span>: <span class="hljs-string">'notifications_topic'</span>,
            <span class="hljs-string">'exchange_type'</span>: <span class="hljs-string">'topic'</span>,
            <span class="hljs-string">'routing_key'</span>: <span class="hljs-string">'notification.email.*'</span>
        },
    },
    <span class="hljs-comment"># Fanout Exchange - å¹¿æ’­æ¨¡å¼</span>
    task_routes={
        <span class="hljs-string">'tasks.broadcast'</span>: {
            <span class="hljs-string">'exchange'</span>: <span class="hljs-string">'broadcast_fanout'</span>,
            <span class="hljs-string">'exchange_type'</span>: <span class="hljs-string">'fanout'</span>,
            <span class="hljs-string">'routing_key'</span>: <span class="hljs-string">''</span>  <span class="hljs-comment"># Fanoutå¿½ç•¥routing_key</span>
        },
    }
)
AIå†™ä»£ç python
è¿è¡Œ
</code></pre>
<p>å„ç§Exchangeç±»å‹çš„é€‚ç”¨åœºæ™¯ï¼š</p>



































<table><thead><tr><th>Exchangeç±»å‹</th><th>è·¯ç”±è§„åˆ™</th><th>å…¸å‹åœºæ™¯</th><th>æ€§èƒ½ç‰¹ç‚¹</th></tr></thead><tbody><tr><td>Direct</td><td>ç²¾ç¡®åŒ¹é…routing_key</td><td>ç‚¹å¯¹ç‚¹ä»»åŠ¡åˆ†å‘</td><td>é«˜ååé‡</td></tr><tr><td>Topic</td><td>æ¨¡å¼åŒ¹é…routing_key</td><td>åˆ†ç±»æ¶ˆæ¯å¤„ç†</td><td>ä¸­ç­‰åå</td></tr><tr><td>Fanout</td><td>å¹¿æ’­åˆ°æ‰€æœ‰ç»‘å®šé˜Ÿåˆ—</td><td>äº‹ä»¶é€šçŸ¥</td><td>å—æ¶ˆè´¹è€…æ•°é‡å½±å“</td></tr><tr><td>Headers</td><td>æ¶ˆæ¯å¤´å±æ€§åŒ¹é…</td><td>å¤æ‚è·¯ç”±é€»è¾‘</td><td>è¾ƒä½æ€§èƒ½</td></tr></tbody></table>
<h5 data-id="heading-7">2.1.2 æ¶ˆæ¯æŒä¹…åŒ–ä¸å¯é æ€§</h5>
<p>ä¿è¯æ¶ˆæ¯ä¸ä¸¢å¤±æ˜¯ç”Ÿäº§ç¯å¢ƒçš„å…³é”®è¦æ±‚ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">import pika
from pika import BasicProperties
 
class ReliableMessageProducer:
    def __init__(self, <span class="hljs-attr">host</span>=<span class="hljs-string">'localhost'</span>):
        <span class="hljs-attr">self.connection</span> = pika.BlockingConnection(
            pika.ConnectionParameters(<span class="hljs-attr">host</span>=host)
        )
        <span class="hljs-attr">self.channel</span> = self.connection.channel()
    
    def publish_persistent_message(self, exchange, routing_key, message):
        <span class="hljs-comment"># å£°æ˜æŒä¹…åŒ–Exchange</span>
        self.channel.exchange_declare(
            <span class="hljs-attr">exchange</span>=exchange,
            <span class="hljs-attr">exchange_type</span>=<span class="hljs-string">'direct'</span>,
            <span class="hljs-attr">durable</span>=<span class="hljs-literal">True</span>  <span class="hljs-comment"># ExchangeæŒä¹…åŒ–</span>
        )
        
        <span class="hljs-comment"># å‘å¸ƒæŒä¹…åŒ–æ¶ˆæ¯</span>
        self.channel.basic_publish(
            <span class="hljs-attr">exchange</span>=exchange,
            <span class="hljs-attr">routing_key</span>=routing_key,
            <span class="hljs-attr">body</span>=message,
            <span class="hljs-attr">properties</span>=BasicProperties(
                <span class="hljs-attr">delivery_mode</span>=<span class="hljs-number">2</span>,  <span class="hljs-comment"># æ¶ˆæ¯æŒä¹…åŒ–</span>
                <span class="hljs-attr">content_type</span>=<span class="hljs-string">'application/json'</span>
            )
        )
    
    def setup_reliable_consumer(self, queue_name):
        <span class="hljs-comment"># å£°æ˜æŒä¹…åŒ–é˜Ÿåˆ—</span>
        self.channel.queue_declare(
            <span class="hljs-attr">queue</span>=queue_name,
            <span class="hljs-attr">durable</span>=<span class="hljs-literal">True</span>,  <span class="hljs-comment"># é˜Ÿåˆ—æŒä¹…åŒ–</span>
            <span class="hljs-attr">exclusive</span>=<span class="hljs-literal">False</span>,
            <span class="hljs-attr">auto_delete</span>=<span class="hljs-literal">False</span>
        )
        
        <span class="hljs-comment"># è®¾ç½®QoSï¼Œå…¬å¹³åˆ†å‘</span>
        self.channel.basic_qos(<span class="hljs-attr">prefetch_count</span>=<span class="hljs-number">1</span>)
        
        <span class="hljs-comment"># æ‰‹åŠ¨æ¶ˆæ¯ç¡®è®¤</span>
        self.channel.basic_consume(
            <span class="hljs-attr">queue</span>=queue_name,
            <span class="hljs-attr">on_message_callback</span>=self.process_message,
            <span class="hljs-attr">auto_ack</span>=<span class="hljs-literal">False</span>  <span class="hljs-comment"># å…³é—­è‡ªåŠ¨ç¡®è®¤</span>
        )
    
    def process_message(self, channel, method, properties, body):
        try:
            <span class="hljs-comment"># å¤„ç†æ¶ˆæ¯</span>
            print(f"Processing message: {body}")
            <span class="hljs-comment"># æ¨¡æ‹Ÿå¤„ç†é€»è¾‘</span>
            <span class="hljs-comment"># ...</span>
            <span class="hljs-comment"># å¤„ç†æˆåŠŸï¼Œæ‰‹åŠ¨ç¡®è®¤</span>
            channel.basic_ack(<span class="hljs-attr">delivery_tag</span>=method.delivery_tag)
        except Exception as e:
            <span class="hljs-comment"># å¤„ç†å¤±è´¥ï¼Œæ‹’ç»æ¶ˆæ¯ï¼ˆå¯é…ç½®é‡è¯•æˆ–è¿›å…¥æ­»ä¿¡é˜Ÿåˆ—ï¼‰</span>
            channel.basic_nack(
                <span class="hljs-attr">delivery_tag</span>=method.delivery_tag,
                <span class="hljs-attr">requeue</span>=<span class="hljs-literal">False</span>  <span class="hljs-comment"># ä¸é‡æ–°å…¥é˜Ÿï¼Œé¿å…å¾ªç¯å¤„ç†</span>
            )
AIå†™ä»£ç python
è¿è¡Œ
</code></pre>
<h4 data-id="heading-8"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>2.2 é«˜çº§æ¶ˆæ¯æ¨¡å¼</h4>
<h5 data-id="heading-9">2.2.1 æ­»ä¿¡é˜Ÿåˆ—ä¸å»¶è¿Ÿæ¶ˆæ¯</h5>
<p>æ­»ä¿¡é˜Ÿåˆ—ï¼ˆDead Letter Exchangeï¼‰æ˜¯å¤„ç†å¤±è´¥æ¶ˆæ¯çš„é‡è¦æœºåˆ¶ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> celery <span class="hljs-keyword">import</span> Celery
<span class="hljs-keyword">from</span> kombu <span class="hljs-keyword">import</span> Exchange, Queue
 
app = Celery(<span class="hljs-string">'advanced_app'</span>)
 
<span class="hljs-comment"># å®šä¹‰æ­»ä¿¡Exchange</span>
dead_letter_exchange = Exchange(<span class="hljs-string">'dlx'</span>, <span class="hljs-built_in">type</span>=<span class="hljs-string">'direct'</span>)
 
<span class="hljs-comment"># å®šä¹‰ä¸»é˜Ÿåˆ—ï¼Œå¹¶é…ç½®æ­»ä¿¡è·¯ç”±</span>
main_queue = Queue(
    <span class="hljs-string">'main_queue'</span>,
    exchange=Exchange(<span class="hljs-string">'main_exchange'</span>, <span class="hljs-built_in">type</span>=<span class="hljs-string">'direct'</span>),
    routing_key=<span class="hljs-string">'main'</span>,
    queue_arguments={
        <span class="hljs-string">'x-dead-letter-exchange'</span>: <span class="hljs-string">'dlx'</span>,
        <span class="hljs-string">'x-dead-letter-routing-key'</span>: <span class="hljs-string">'dead_letter'</span>,
        <span class="hljs-string">'x-message-ttl'</span>: <span class="hljs-number">60000</span>  <span class="hljs-comment"># æ¶ˆæ¯å­˜æ´»æ—¶é—´60ç§’</span>
    }
)
 
<span class="hljs-comment"># å®šä¹‰æ­»ä¿¡é˜Ÿåˆ—</span>
dead_letter_queue = Queue(
    <span class="hljs-string">'dead_letter_queue'</span>,
    exchange=dead_letter_exchange,
    routing_key=<span class="hljs-string">'dead_letter'</span>
)
 
app.conf.task_queues = [main_queue, dead_letter_queue]
 
<span class="hljs-meta">@app.task(<span class="hljs-params">bind=<span class="hljs-literal">True</span>, max_retries=<span class="hljs-number">3</span></span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">process_sensitive_data</span>(<span class="hljs-params">self, data</span>):
    <span class="hljs-keyword">try</span>:
        <span class="hljs-comment"># æ•æ„Ÿæ•°æ®å¤„ç†é€»è¾‘</span>
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> validate_data(data):
            <span class="hljs-comment"># éªŒè¯å¤±è´¥ï¼Œé‡è¯•</span>
            <span class="hljs-keyword">raise</span> self.retry(countdown=<span class="hljs-number">2</span>**self.request.retries)
        
        <span class="hljs-keyword">return</span> process_data(data)
    <span class="hljs-keyword">except</span> CriticalError <span class="hljs-keyword">as</span> e:
        <span class="hljs-comment"># ä¸¥é‡é”™è¯¯ï¼Œä¸é‡è¯•ï¼Œè¿›å…¥æ­»ä¿¡é˜Ÿåˆ—</span>
        logger.error(<span class="hljs-string">f"Critical error processing data: <span class="hljs-subst">{e}</span>"</span>)
        <span class="hljs-comment"># è¿™é‡Œä¼šç”±äºå¼‚å¸¸å¯¼è‡´æ¶ˆæ¯è¢«æ‹’ç»ï¼Œè¿›è€Œè·¯ç”±åˆ°æ­»ä¿¡é˜Ÿåˆ—</span>
AIå†™ä»£ç python
è¿è¡Œ
</code></pre>
<h5 data-id="heading-10">2.2.2 ä¼˜å…ˆçº§é˜Ÿåˆ—</h5>
<p>RabbitMQæ”¯æŒæ¶ˆæ¯ä¼˜å…ˆçº§ï¼Œç¡®ä¿é‡è¦ä»»åŠ¡ä¼˜å…ˆå¤„ç†ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> celery <span class="hljs-keyword">import</span> Celery
<span class="hljs-keyword">from</span> kombu <span class="hljs-keyword">import</span> Queue
 
app = Celery(<span class="hljs-string">'priority_app'</span>)
 
<span class="hljs-comment"># é…ç½®ä¼˜å…ˆçº§é˜Ÿåˆ—</span>
priority_queue = Queue(
    <span class="hljs-string">'priority_queue'</span>,
    max_priority=<span class="hljs-number">10</span>,  <span class="hljs-comment"># æœ€å¤§ä¼˜å…ˆçº§ä¸º10</span>
    queue_arguments={<span class="hljs-string">'x-max-priority'</span>: <span class="hljs-number">10</span>}
)
 
app.conf.task_queues = [priority_queue]
app.conf.task_default_priority = <span class="hljs-number">5</span>
 
<span class="hljs-meta">@app.task</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">process_urgent_order</span>(<span class="hljs-params">order_data</span>):
    <span class="hljs-string">"""å¤„ç†ç´§æ€¥è®¢å•"""</span>
    <span class="hljs-keyword">return</span> process_order(order_data)
 
<span class="hljs-meta">@app.task</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">process_normal_order</span>(<span class="hljs-params">order_data</span>):
    <span class="hljs-string">"""å¤„ç†æ™®é€šè®¢å•"""</span>
    <span class="hljs-keyword">return</span> process_order(order_data)
 
<span class="hljs-comment"># å‘é€ä¸åŒä¼˜å…ˆçº§çš„ä»»åŠ¡</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">dispatch_order</span>(<span class="hljs-params">order_data, is_urgent=<span class="hljs-literal">False</span></span>):
    <span class="hljs-keyword">if</span> is_urgent:
        process_urgent_order.apply_async(
            args=[order_data],
            priority=<span class="hljs-number">9</span>  <span class="hljs-comment"># é«˜ä¼˜å…ˆçº§</span>
        )
    <span class="hljs-keyword">else</span>:
        process_normal_order.apply_async(
            args=[order_data],
            priority=<span class="hljs-number">1</span>  <span class="hljs-comment"># ä½ä¼˜å…ˆçº§</span>
        )
AIå†™ä»£ç python
è¿è¡Œ
</code></pre>
<p>ä¸‹é¢çš„æµç¨‹å›¾å±•ç¤ºäº†å®Œæ•´çš„æ¶ˆæ¯å¤„ç†æµç¨‹ï¼ŒåŒ…æ‹¬æ­£å¸¸æµç¨‹å’Œå¼‚å¸¸å¤„ç†ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2d647b28e8eb419386a03eb2e63e2253~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YeawtOinow==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769927291&amp;x-signature=kd3iRJd4%2Fyu7exHsP0zW9HUI8GY%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-11"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>3 Celeryæ¶æ„ä¸æ ¸å¿ƒæœºåˆ¶</h3>
<h4 data-id="heading-12"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>3.1 Celeryç»„ä»¶æ¶æ„</h4>
<p>Celeryçš„æ¶æ„è®¾è®¡åŸºäºåˆ†å¸ƒå¼ç³»ç»Ÿç†å¿µï¼Œä¸»è¦åŒ…å«ä»¥ä¸‹å‡ ä¸ªæ ¸å¿ƒç»„ä»¶ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f5ca9b10e044488bad226bcb884088ed~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YeawtOinow==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769927291&amp;x-signature=N9cT5p9MOZmlp9TUZKF5N171ejc%3D" alt="" loading="lazy"/></p>
<h5 data-id="heading-13">3.1.1 Workerè¿›ç¨‹æ¨¡å‹</h5>
<p>Celery Workeré‡‡ç”¨å¤šè¿›ç¨‹æ¶æ„ï¼Œå……åˆ†åˆ©ç”¨å¤šæ ¸CPUèµ„æºï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> celery <span class="hljs-keyword">import</span> Celery
<span class="hljs-keyword">from</span> multiprocessing <span class="hljs-keyword">import</span> current_process
<span class="hljs-keyword">import</span> os
 
app = Celery(<span class="hljs-string">'worker_app'</span>, broker=<span class="hljs-string">'amqp://localhost:5672//'</span>)
 
<span class="hljs-comment"># é…ç½®Workerå‚æ•°</span>
app.conf.update(
    worker_prefetch_multiplier=<span class="hljs-number">4</span>,  <span class="hljs-comment"># é¢„å–æ¶ˆæ¯å€æ•°</span>
    worker_max_tasks_per_child=<span class="hljs-number">1000</span>,  <span class="hljs-comment"># æ¯ä¸ªå­è¿›ç¨‹æœ€å¤§ä»»åŠ¡æ•°</span>
    worker_disable_rate_limits=<span class="hljs-literal">True</span>,  <span class="hljs-comment"># ç¦ç”¨é€Ÿç‡é™åˆ¶</span>
    task_acks_late=<span class="hljs-literal">True</span>,  <span class="hljs-comment"># å»¶è¿Ÿç¡®è®¤</span>
    task_reject_on_worker_lost=<span class="hljs-literal">True</span>  <span class="hljs-comment"># Workerä¸¢å¤±æ—¶æ‹’ç»ä»»åŠ¡</span>
)
 
<span class="hljs-meta">@app.task</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">cpu_intensive_task</span>(<span class="hljs-params">data</span>):
    <span class="hljs-string">"""CPUå¯†é›†å‹ä»»åŠ¡ç¤ºä¾‹"""</span>
    process_info = {
        <span class="hljs-string">'worker_pid'</span>: os.getpid(),
        <span class="hljs-string">'process_name'</span>: current_process().name,
        <span class="hljs-string">'cpu_count'</span>: os.cpu_count()
    }
    
    <span class="hljs-comment"># æ¨¡æ‹ŸCPUå¯†é›†å‹è®¡ç®—</span>
    result = heavy_computation(data)
    
    <span class="hljs-keyword">return</span> {
        <span class="hljs-string">'result'</span>: result,
        <span class="hljs-string">'process_info'</span>: process_info
    }
 
<span class="hljs-comment"># å¯åŠ¨Workeræ—¶çš„é…ç½®å»ºè®®</span>
<span class="hljs-comment"># celery -A worker_app worker --concurrency=4 --loglevel=info</span>
AIå†™ä»£ç python
è¿è¡Œ
</code></pre>
<h5 data-id="heading-14">3.1.2 ä»»åŠ¡çŠ¶æ€ä¸ç»“æœåç«¯</h5>
<p>Celeryæä¾›å®Œå–„çš„ä»»åŠ¡çŠ¶æ€è·Ÿè¸ªæœºåˆ¶ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> celery <span class="hljs-keyword">import</span> Celery
<span class="hljs-keyword">from</span> celery.result <span class="hljs-keyword">import</span> AsyncResult
 
app = Celery(<span class="hljs-string">'result_app'</span>, backend=<span class="hljs-string">'redis://localhost:6379/0'</span>)
 
<span class="hljs-meta">@app.task(<span class="hljs-params">bind=<span class="hljs-literal">True</span></span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">long_running_task</span>(<span class="hljs-params">self, data</span>):
    <span class="hljs-string">"""é•¿æ—¶é—´è¿è¡Œä»»åŠ¡ç¤ºä¾‹"""</span>
    total_steps = <span class="hljs-number">100</span>
    
    <span class="hljs-comment"># æ›´æ–°ä»»åŠ¡çŠ¶æ€</span>
    self.update_state(
        state=<span class="hljs-string">'PROGRESS'</span>,
        meta={<span class="hljs-string">'current'</span>: <span class="hljs-number">0</span>, <span class="hljs-string">'total'</span>: total_steps, <span class="hljs-string">'status'</span>: <span class="hljs-string">'å¼€å§‹å¤„ç†'</span>}
    )
    
    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(total_steps):
        <span class="hljs-comment"># å¤„ç†æ¯ä¸ªæ­¥éª¤</span>
        process_step(data, i)
        
        <span class="hljs-comment"># æ›´æ–°è¿›åº¦</span>
        self.update_state(
            state=<span class="hljs-string">'PROGRESS'</span>,
            meta={
                <span class="hljs-string">'current'</span>: i + <span class="hljs-number">1</span>,
                <span class="hljs-string">'total'</span>: total_steps,
                <span class="hljs-string">'status'</span>: <span class="hljs-string">f'å¤„ç†ä¸­ <span class="hljs-subst">{i+<span class="hljs-number">1</span>}</span>/<span class="hljs-subst">{total_steps}</span>'</span>,
                <span class="hljs-string">'percentage'</span>: <span class="hljs-built_in">int</span>((i + <span class="hljs-number">1</span>) / total_steps * <span class="hljs-number">100</span>)
            }
        )
    
    <span class="hljs-keyword">return</span> {<span class="hljs-string">'status'</span>: <span class="hljs-string">'å®Œæˆ'</span>, <span class="hljs-string">'result'</span>: <span class="hljs-string">'å¤„ç†æˆåŠŸ'</span>}
 
<span class="hljs-keyword">def</span> <span class="hljs-title function_">check_task_progress</span>(<span class="hljs-params">task_id</span>):
    <span class="hljs-string">"""æ£€æŸ¥ä»»åŠ¡è¿›åº¦"""</span>
    result = AsyncResult(task_id, app=app)
    
    <span class="hljs-keyword">if</span> result.successful():
        <span class="hljs-keyword">return</span> {<span class="hljs-string">'status'</span>: <span class="hljs-string">'completed'</span>, <span class="hljs-string">'result'</span>: result.result}
    <span class="hljs-keyword">elif</span> result.failed():
        <span class="hljs-keyword">return</span> {<span class="hljs-string">'status'</span>: <span class="hljs-string">'failed'</span>, <span class="hljs-string">'error'</span>: <span class="hljs-built_in">str</span>(result.info)}
    <span class="hljs-keyword">elif</span> result.state == <span class="hljs-string">'PROGRESS'</span>:
        <span class="hljs-keyword">return</span> {<span class="hljs-string">'status'</span>: <span class="hljs-string">'progress'</span>, <span class="hljs-string">'progress'</span>: result.info}
    <span class="hljs-keyword">else</span>:
        <span class="hljs-keyword">return</span> {<span class="hljs-string">'status'</span>: result.state}
AIå†™ä»£ç python
è¿è¡Œ
</code></pre>
<h4 data-id="heading-15"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>3.2 é«˜çº§ç‰¹æ€§ä¸é…ç½®</h4>
<h5 data-id="heading-16">3.2.1 ä»»åŠ¡è·¯ç”±ä¸å¤šé˜Ÿåˆ—</h5>
<p>å¤æ‚çš„åº”ç”¨éœ€è¦å°†ä¸åŒç±»å‹çš„ä»»åŠ¡è·¯ç”±åˆ°ä¸åŒçš„é˜Ÿåˆ—ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> celery <span class="hljs-keyword">import</span> Celery
<span class="hljs-keyword">from</span> kombu <span class="hljs-keyword">import</span> Queue
 
app = Celery(<span class="hljs-string">'routing_app'</span>)
 
<span class="hljs-comment"># å®šä¹‰å¤šä¸ªé˜Ÿåˆ—</span>
app.conf.task_queues = (
    Queue(<span class="hljs-string">'high_priority'</span>, routing_key=<span class="hljs-string">'high.#'</span>),
    Queue(<span class="hljs-string">'medium_priority'</span>, routing_key=<span class="hljs-string">'medium.#'</span>),
    Queue(<span class="hljs-string">'low_priority'</span>, routing_key=<span class="hljs-string">'low.#'</span>),
    Queue(<span class="hljs-string">'emails'</span>, routing_key=<span class="hljs-string">'email.#'</span>),
    Queue(<span class="hljs-string">'reports'</span>, routing_key=<span class="hljs-string">'report.#'</span>),
)
 
<span class="hljs-comment"># é…ç½®ä»»åŠ¡è·¯ç”±</span>
app.conf.task_routes = {
    <span class="hljs-string">'tasks.process_urgent_order'</span>: {
        <span class="hljs-string">'queue'</span>: <span class="hljs-string">'high_priority'</span>,
        <span class="hljs-string">'routing_key'</span>: <span class="hljs-string">'high.orders'</span>
    },
    <span class="hljs-string">'tasks.send_email'</span>: {
        <span class="hljs-string">'queue'</span>: <span class="hljs-string">'emails'</span>,
        <span class="hljs-string">'routing_key'</span>: <span class="hljs-string">'email.notification'</span>
    },
    <span class="hljs-string">'tasks.generate_report'</span>: {
        <span class="hljs-string">'queue'</span>: <span class="hljs-string">'reports'</span>,
        <span class="hljs-string">'routing_key'</span>: <span class="hljs-string">'report.daily'</span>
    },
    <span class="hljs-string">'tasks.background_cleanup'</span>: {
        <span class="hljs-string">'queue'</span>: <span class="hljs-string">'low_priority'</span>,
        <span class="hljs-string">'routing_key'</span>: <span class="hljs-string">'low.cleanup'</span>
    }
}
 
<span class="hljs-comment"># å¯åŠ¨ä¸“é—¨å¤„ç†ç‰¹å®šé˜Ÿåˆ—çš„Worker</span>
<span class="hljs-comment"># celery -A routing_app worker -Q high_priority --concurrency=2</span>
<span class="hljs-comment"># celery -A routing_app worker -Q emails,reports --concurrency=4</span>
<span class="hljs-comment"># celery -A routing_app worker -Q low_priority --concurrency=1</span>
AIå†™ä»£ç python
è¿è¡Œ
</code></pre>
<h5 data-id="heading-17">3.2.2 ä¿¡å·ä¸äº‹ä»¶å¤„ç†</h5>
<p>Celeryçš„ä¿¡å·ç³»ç»Ÿæä¾›äº†å¼ºå¤§çš„æ‰©å±•èƒ½åŠ›ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> celery <span class="hljs-keyword">import</span> Celery
<span class="hljs-keyword">from</span> celery.signals <span class="hljs-keyword">import</span> (
    task_prerun, task_postrun, task_success, task_failure,
    worker_ready, worker_shutdown
)
 
app = Celery(<span class="hljs-string">'signals_app'</span>)
 
<span class="hljs-comment"># ä»»åŠ¡æ‰§è¡Œå‰ä¿¡å·</span>
<span class="hljs-meta">@task_prerun.connect</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">task_prehook</span>(<span class="hljs-params">sender=<span class="hljs-literal">None</span>, task_id=<span class="hljs-literal">None</span>, task=<span class="hljs-literal">None</span>, args=<span class="hljs-literal">None</span>, kwargs=<span class="hljs-literal">None</span>, **kwds</span>):
    logger.info(<span class="hljs-string">f"Task <span class="hljs-subst">{task.name}</span> starting with id <span class="hljs-subst">{task_id}</span>"</span>)
 
<span class="hljs-comment"># ä»»åŠ¡æˆåŠŸä¿¡å·</span>
<span class="hljs-meta">@task_success.connect</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">task_success_handler</span>(<span class="hljs-params">sender=<span class="hljs-literal">None</span>, result=<span class="hljs-literal">None</span>, **kwargs</span>):
    logger.info(<span class="hljs-string">f"Task <span class="hljs-subst">{sender.name}</span> completed successfully"</span>)
    
    <span class="hljs-comment"># è®°å½•æˆåŠŸæŒ‡æ ‡</span>
    metrics.increment(<span class="hljs-string">'tasks.completed'</span>, tags=[<span class="hljs-string">f'task:<span class="hljs-subst">{sender.name}</span>'</span>])
 
<span class="hljs-comment"># ä»»åŠ¡å¤±è´¥ä¿¡å·</span>
<span class="hljs-meta">@task_failure.connect</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">task_failure_handler</span>(<span class="hljs-params">sender=<span class="hljs-literal">None</span>, exception=<span class="hljs-literal">None</span>, traceback=<span class="hljs-literal">None</span>, **kwargs</span>):
    logger.error(<span class="hljs-string">f"Task <span class="hljs-subst">{sender.name}</span> failed: <span class="hljs-subst">{exception}</span>"</span>)
    
    <span class="hljs-comment"># è®°å½•å¤±è´¥æŒ‡æ ‡</span>
    metrics.increment(<span class="hljs-string">'tasks.failed'</span>, tags=[<span class="hljs-string">f'task:<span class="hljs-subst">{sender.name}</span>'</span>])
    
    <span class="hljs-comment"># å‘é€å‘Šè­¦</span>
    <span class="hljs-keyword">if</span> is_critical_failure(exception):
        send_alert(<span class="hljs-string">f"Critical task failure: <span class="hljs-subst">{sender.name}</span>"</span>)
 
<span class="hljs-comment"># Workerå¯åŠ¨ä¿¡å·</span>
<span class="hljs-meta">@worker_ready.connect</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">worker_ready_handler</span>(<span class="hljs-params">sender=<span class="hljs-literal">None</span>, **kwargs</span>):
    logger.info(<span class="hljs-string">f"Worker <span class="hljs-subst">{sender}</span> is ready to accept tasks"</span>)
    
    <span class="hljs-comment"># åˆå§‹åŒ–WorkerçŠ¶æ€</span>
    initialize_worker_state()
 
<span class="hljs-comment"># è‡ªå®šä¹‰ä»»åŠ¡è£…é¥°å™¨</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">with_metrics</span>(<span class="hljs-params">task_func</span>):
    <span class="hljs-string">"""å¸¦æœ‰æŒ‡æ ‡æ”¶é›†çš„ä»»åŠ¡è£…é¥°å™¨"""</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">wrapper</span>(<span class="hljs-params">*args, **kwargs</span>):
        start_time = time.time()
        
        <span class="hljs-keyword">try</span>:
            result = task_func(*args, **kwargs)
            duration = time.time() - start_time
            
            <span class="hljs-comment"># è®°å½•æˆåŠŸæŒ‡æ ‡</span>
            metrics.timing(<span class="hljs-string">'task.duration'</span>, duration, tags=[<span class="hljs-string">f'task:<span class="hljs-subst">{task_func.__name__}</span>'</span>])
            <span class="hljs-keyword">return</span> result
            
        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
            duration = time.time() - start_time
            metrics.increment(<span class="hljs-string">'task.errors'</span>, tags=[<span class="hljs-string">f'task:<span class="hljs-subst">{task_func.__name__}</span>'</span>])
            <span class="hljs-keyword">raise</span> e
    
    <span class="hljs-keyword">return</span> wrapper
 
<span class="hljs-meta">@app.task</span>
<span class="hljs-meta">@with_metrics</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">monitored_task</span>(<span class="hljs-params">data</span>):
    <span class="hljs-string">"""å¸¦æœ‰ç›‘æ§çš„ä»»åŠ¡"""</span>
    <span class="hljs-keyword">return</span> process_data(data)
AIå†™ä»£ç python
è¿è¡Œ
</code></pre>
<h3 data-id="heading-18"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>4 å®Œæ•´é›†æˆå®æˆ˜ï¼šç”µå•†è®¢å•å¤„ç†ç³»ç»Ÿ</h3>
<h4 data-id="heading-19"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>4.1 ç³»ç»Ÿæ¶æ„è®¾è®¡</h4>
<p>ä¸‹é¢æˆ‘ä»¬æ„å»ºä¸€ä¸ªå®Œæ•´çš„ç”µå•†è®¢å•å¤„ç†ç³»ç»Ÿï¼Œå±•ç¤ºRabbitMQä¸Celeryåœ¨å®é™…é¡¹ç›®ä¸­çš„æ·±åº¦é›†æˆï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/038da102e20145878959271456c4abb7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YeawtOinow==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769927291&amp;x-signature=lPAkcYfqukMk271P5K2C5t5C2Ac%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-20"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>4.2 æ ¸å¿ƒä»£ç å®ç°</h4>
<h5 data-id="heading-21">4.2.1 è®¢å•æœåŠ¡ä¸ä»»åŠ¡å®šä¹‰</h5>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># orders/tasks.py</span>
<span class="hljs-keyword">from</span> celery <span class="hljs-keyword">import</span> Celery
<span class="hljs-keyword">from</span> celery.utils.log <span class="hljs-keyword">import</span> get_task_logger
<span class="hljs-keyword">from</span> kombu <span class="hljs-keyword">import</span> Queue, Exchange
<span class="hljs-keyword">import</span> time
<span class="hljs-keyword">import</span> json
 
logger = get_task_logger(__name__)
 
app = Celery(<span class="hljs-string">'orders'</span>)
app.config_from_object(<span class="hljs-string">'django.conf:settings'</span>, namespace=<span class="hljs-string">'CELERY'</span>)
 
<span class="hljs-comment"># å®šä¹‰Exchangeå’Œé˜Ÿåˆ—</span>
order_exchange = Exchange(<span class="hljs-string">'orders'</span>, <span class="hljs-built_in">type</span>=<span class="hljs-string">'direct'</span>, durable=<span class="hljs-literal">True</span>)
 
app.conf.task_queues = (
    Queue(<span class="hljs-string">'order_validation'</span>, exchange=order_exchange, routing_key=<span class="hljs-string">'order.validate'</span>),
    Queue(<span class="hljs-string">'inventory_processing'</span>, exchange=order_exchange, routing_key=<span class="hljs-string">'order.inventory'</span>),
    Queue(<span class="hljs-string">'payment_processing'</span>, exchange=order_exchange, routing_key=<span class="hljs-string">'order.payment'</span>),
    Queue(<span class="hljs-string">'notification'</span>, exchange=order_exchange, routing_key=<span class="hljs-string">'order.notify'</span>),
)
 
app.conf.task_routes = {
    <span class="hljs-string">'orders.tasks.validate_order'</span>: {<span class="hljs-string">'queue'</span>: <span class="hljs-string">'order_validation'</span>},
    <span class="hljs-string">'orders.tasks.process_inventory'</span>: {<span class="hljs-string">'queue'</span>: <span class="hljs-string">'inventory_processing'</span>},
    <span class="hljs-string">'orders.tasks.process_payment'</span>: {<span class="hljs-string">'queue'</span>: <span class="hljs-string">'payment_processing'</span>},
    <span class="hljs-string">'orders.tasks.send_notifications'</span>: {<span class="hljs-string">'queue'</span>: <span class="hljs-string">'notification'</span>},
}
 
<span class="hljs-meta">@app.task(<span class="hljs-params">bind=<span class="hljs-literal">True</span>, max_retries=<span class="hljs-number">3</span>, default_retry_delay=<span class="hljs-number">30</span></span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">validate_order</span>(<span class="hljs-params">self, order_data</span>):
    <span class="hljs-string">"""è®¢å•éªŒè¯ä»»åŠ¡"""</span>
    <span class="hljs-keyword">try</span>:
        logger.info(<span class="hljs-string">f"Validating order: <span class="hljs-subst">{order_data[<span class="hljs-string">'order_id'</span>]}</span>"</span>)
        
        <span class="hljs-comment"># éªŒè¯è®¢å•æ•°æ®</span>
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> order_data.get(<span class="hljs-string">'items'</span>):
            <span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">"Order must contain items"</span>)
        
        <span class="hljs-comment"># éªŒè¯ç”¨æˆ·ä¿¡æ¯</span>
        user_id = order_data.get(<span class="hljs-string">'user_id'</span>)
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> is_valid_user(user_id):
            <span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">f"Invalid user: <span class="hljs-subst">{user_id}</span>"</span>)
        
        <span class="hljs-comment"># æ¨¡æ‹ŸéªŒè¯æ—¶é—´</span>
        time.sleep(<span class="hljs-number">0.5</span>)
        
        logger.info(<span class="hljs-string">f"Order validation successful: <span class="hljs-subst">{order_data[<span class="hljs-string">'order_id'</span>]}</span>"</span>)
        <span class="hljs-keyword">return</span> {<span class="hljs-string">'status'</span>: <span class="hljs-string">'valid'</span>, <span class="hljs-string">'order_id'</span>: order_data[<span class="hljs-string">'order_id'</span>]}
        
    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> exc:
        logger.error(<span class="hljs-string">f"Order validation failed: <span class="hljs-subst">{exc}</span>"</span>)
        <span class="hljs-keyword">raise</span> self.retry(exc=exc)
 
<span class="hljs-meta">@app.task(<span class="hljs-params">bind=<span class="hljs-literal">True</span>, max_retries=<span class="hljs-number">5</span>, default_retry_delay=<span class="hljs-number">60</span></span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">process_inventory</span>(<span class="hljs-params">self, order_data</span>):
    <span class="hljs-string">"""åº“å­˜å¤„ç†ä»»åŠ¡"""</span>
    <span class="hljs-keyword">try</span>:
        order_id = order_data[<span class="hljs-string">'order_id'</span>]
        logger.info(<span class="hljs-string">f"Processing inventory for order: <span class="hljs-subst">{order_id}</span>"</span>)
        
        <span class="hljs-comment"># æ£€æŸ¥å¹¶é¢„ç•™åº“å­˜</span>
        <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> order_data[<span class="hljs-string">'items'</span>]:
            product_id = item[<span class="hljs-string">'product_id'</span>]
            quantity = item[<span class="hljs-string">'quantity'</span>]
            
            <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> reserve_inventory(product_id, quantity):
                <span class="hljs-keyword">raise</span> InventoryError(<span class="hljs-string">f"Insufficient inventory for product: <span class="hljs-subst">{product_id}</span>"</span>)
        
        <span class="hljs-comment"># æ¨¡æ‹Ÿå¤„ç†æ—¶é—´</span>
        time.sleep(<span class="hljs-number">1.0</span>)
        
        logger.info(<span class="hljs-string">f"Inventory processing completed: <span class="hljs-subst">{order_id}</span>"</span>)
        <span class="hljs-keyword">return</span> {<span class="hljs-string">'status'</span>: <span class="hljs-string">'reserved'</span>, <span class="hljs-string">'order_id'</span>: order_id}
        
    <span class="hljs-keyword">except</span> InventoryError <span class="hljs-keyword">as</span> exc:
        logger.error(<span class="hljs-string">f"Inventory processing failed: <span class="hljs-subst">{exc}</span>"</span>)
        <span class="hljs-comment"># åº“å­˜ä¸è¶³ï¼Œä¸é‡è¯•</span>
        <span class="hljs-keyword">return</span> {<span class="hljs-string">'status'</span>: <span class="hljs-string">'failed'</span>, <span class="hljs-string">'error'</span>: <span class="hljs-built_in">str</span>(exc)}
    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> exc:
        logger.error(<span class="hljs-string">f"Inventory processing error: <span class="hljs-subst">{exc}</span>"</span>)
        <span class="hljs-keyword">raise</span> self.retry(exc=exc)
 
<span class="hljs-meta">@app.task(<span class="hljs-params">bind=<span class="hljs-literal">True</span>, max_retries=<span class="hljs-number">3</span>, default_retry_delay=<span class="hljs-number">30</span></span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">process_payment</span>(<span class="hljs-params">self, order_data</span>):
    <span class="hljs-string">"""æ”¯ä»˜å¤„ç†ä»»åŠ¡"""</span>
    <span class="hljs-keyword">try</span>:
        order_id = order_data[<span class="hljs-string">'order_id'</span>]
        logger.info(<span class="hljs-string">f"Processing payment for order: <span class="hljs-subst">{order_id}</span>"</span>)
        
        <span class="hljs-comment"># è°ƒç”¨æ”¯ä»˜ç½‘å…³</span>
        payment_result = call_payment_gateway(order_data)
        
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> payment_result.success:
            <span class="hljs-keyword">raise</span> PaymentError(<span class="hljs-string">f"Payment failed: <span class="hljs-subst">{payment_result.message}</span>"</span>)
        
        <span class="hljs-comment"># æ¨¡æ‹Ÿå¤„ç†æ—¶é—´</span>
        time.sleep(<span class="hljs-number">2.0</span>)
        
        logger.info(<span class="hljs-string">f"Payment processing completed: <span class="hljs-subst">{order_id}</span>"</span>)
        <span class="hljs-keyword">return</span> {<span class="hljs-string">'status'</span>: <span class="hljs-string">'paid'</span>, <span class="hljs-string">'order_id'</span>: order_id, <span class="hljs-string">'transaction_id'</span>: payment_result.transaction_id}
        
    <span class="hljs-keyword">except</span> PaymentError <span class="hljs-keyword">as</span> exc:
        logger.error(<span class="hljs-string">f"Payment processing failed: <span class="hljs-subst">{exc}</span>"</span>)
        <span class="hljs-comment"># æ”¯ä»˜å¤±è´¥ï¼Œä¸é‡è¯•</span>
        <span class="hljs-keyword">return</span> {<span class="hljs-string">'status'</span>: <span class="hljs-string">'failed'</span>, <span class="hljs-string">'error'</span>: <span class="hljs-built_in">str</span>(exc)}
    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> exc:
        logger.error(<span class="hljs-string">f"Payment processing error: <span class="hljs-subst">{exc}</span>"</span>)
        <span class="hljs-keyword">raise</span> self.retry(exc=exc)
 
<span class="hljs-meta">@app.task</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">send_notifications</span>(<span class="hljs-params">order_data, order_result</span>):
    <span class="hljs-string">"""å‘é€é€šçŸ¥ä»»åŠ¡"""</span>
    order_id = order_data[<span class="hljs-string">'order_id'</span>]
    
    <span class="hljs-keyword">try</span>:
        <span class="hljs-comment"># å‘é€é‚®ä»¶é€šçŸ¥</span>
        <span class="hljs-keyword">if</span> order_result.get(<span class="hljs-string">'status'</span>) == <span class="hljs-string">'paid'</span>:
            send_order_confirmation_email(order_data[<span class="hljs-string">'user_email'</span>], order_id)
        
        <span class="hljs-comment"># å‘é€çŸ­ä¿¡é€šçŸ¥</span>
        send_sms_notification(order_data[<span class="hljs-string">'user_phone'</span>], order_id)
        
        logger.info(<span class="hljs-string">f"Notifications sent for order: <span class="hljs-subst">{order_id}</span>"</span>)
        <span class="hljs-keyword">return</span> {<span class="hljs-string">'status'</span>: <span class="hljs-string">'notified'</span>, <span class="hljs-string">'order_id'</span>: order_id}
        
    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> exc:
        logger.error(<span class="hljs-string">f"Notification sending failed: <span class="hljs-subst">{exc}</span>"</span>)
        <span class="hljs-comment"># é€šçŸ¥å¤±è´¥ä¸å½±å“ä¸»æµç¨‹</span>
        <span class="hljs-keyword">return</span> {<span class="hljs-string">'status'</span>: <span class="hljs-string">'notification_failed'</span>, <span class="hljs-string">'error'</span>: <span class="hljs-built_in">str</span>(exc)}
AIå†™ä»£ç python
è¿è¡Œ
</code></pre>
<h5 data-id="heading-22">4.2.2 è®¢å•å·¥ä½œæµç¼–æ’</h5>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># orders/workflows.py</span>
<span class="hljs-keyword">from</span> celery <span class="hljs-keyword">import</span> chain, group, chord
<span class="hljs-keyword">from</span> .tasks <span class="hljs-keyword">import</span> validate_order, process_inventory, process_payment, send_notifications
 
<span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderWorkflow</span>:
    <span class="hljs-string">"""è®¢å•å¤„ç†å·¥ä½œæµ"""</span>
    
<span class="hljs-meta">    @staticmethod</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">create_order_workflow</span>(<span class="hljs-params">order_data</span>):
        <span class="hljs-string">"""åˆ›å»ºè®¢å•å¤„ç†å·¥ä½œæµ"""</span>
        <span class="hljs-comment"># å®šä¹‰ä»»åŠ¡é“¾ï¼šéªŒè¯ â†’ åº“å­˜ â†’ æ”¯ä»˜ â†’ é€šçŸ¥</span>
        workflow = chain(
            validate_order.s(order_data),
            process_inventory.s(),
            process_payment.s(),
            send_notifications.s(order_data)
        )
        
        <span class="hljs-keyword">return</span> workflow
    
<span class="hljs-meta">    @staticmethod</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">create_parallel_workflow</span>(<span class="hljs-params">order_data</span>):
        <span class="hljs-string">"""åˆ›å»ºå¹¶è¡Œå¤„ç†å·¥ä½œæµï¼ˆé€‚ç”¨äºå¯å¹¶è¡Œå¤„ç†çš„ä»»åŠ¡ï¼‰"""</span>
        <span class="hljs-comment"># å¹¶è¡Œå¤„ç†ä»»åŠ¡ç»„</span>
        parallel_tasks = group(
            process_inventory.s(order_data),
            validate_order.s(order_data)
        )
        
        <span class="hljs-comment"># ä¸²è¡Œåç»­ä»»åŠ¡</span>
        workflow = chain(
            parallel_tasks,
            process_payment.s(),
            send_notifications.s(order_data)
        )
        
        <span class="hljs-keyword">return</span> workflow
    
<span class="hljs-meta">    @staticmethod</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">create_complex_workflow</span>(<span class="hljs-params">order_data</span>):
        <span class="hljs-string">"""åˆ›å»ºå¤æ‚å·¥ä½œæµï¼ˆåŒ…å«å›è°ƒï¼‰"""</span>
        <span class="hljs-comment"># å®šä¹‰å¤´ä»»åŠ¡ç»„</span>
        header = group(
            validate_order.s(order_data),
            process_inventory.s(order_data)
        )
        
        <span class="hljs-comment"># å®šä¹‰å›è°ƒä»»åŠ¡</span>
        callback = process_payment.s()
        
        <span class="hljs-comment"># åˆ›å»ºå’Œå¼¦ï¼ˆå¤´ä»»åŠ¡å®Œæˆåæ‰§è¡Œå›è°ƒï¼‰</span>
        workflow = chord(header)(callback)
        
        <span class="hljs-keyword">return</span> workflow
 
<span class="hljs-keyword">def</span> <span class="hljs-title function_">process_complete_order</span>(<span class="hljs-params">order_data</span>):
    <span class="hljs-string">"""å¤„ç†å®Œæ•´è®¢å•"""</span>
    <span class="hljs-keyword">try</span>:
        <span class="hljs-comment"># åˆ›å»ºå·¥ä½œæµ</span>
        workflow = OrderWorkflow.create_order_workflow(order_data)
        
        <span class="hljs-comment"># å¼‚æ­¥æ‰§è¡Œå·¥ä½œæµ</span>
        result = workflow.apply_async()
        
        <span class="hljs-keyword">return</span> {
            <span class="hljs-string">'workflow_id'</span>: result.<span class="hljs-built_in">id</span>,
            <span class="hljs-string">'status'</span>: <span class="hljs-string">'started'</span>,
            <span class="hljs-string">'order_id'</span>: order_data[<span class="hljs-string">'order_id'</span>]
        }
        
    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> exc:
        logger.error(<span class="hljs-string">f"Order workflow failed to start: <span class="hljs-subst">{exc}</span>"</span>)
        <span class="hljs-keyword">return</span> {<span class="hljs-string">'status'</span>: <span class="hljs-string">'workflow_failed'</span>, <span class="hljs-string">'error'</span>: <span class="hljs-built_in">str</span>(exc)}
AIå†™ä»£ç python
è¿è¡Œ
</code></pre>
<h5 data-id="heading-23">4.2.3 Djangoè§†å›¾é›†æˆ</h5>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># orders/views.py</span>
<span class="hljs-keyword">from</span> django.http <span class="hljs-keyword">import</span> JsonResponse
<span class="hljs-keyword">from</span> django.views <span class="hljs-keyword">import</span> View
<span class="hljs-keyword">from</span> .workflows <span class="hljs-keyword">import</span> process_complete_order
<span class="hljs-keyword">from</span> .models <span class="hljs-keyword">import</span> Order
<span class="hljs-keyword">import</span> json
 
<span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderCreateView</span>(<span class="hljs-title class_ inherited__">View</span>):
    <span class="hljs-string">"""è®¢å•åˆ›å»ºAPIè§†å›¾"""</span>
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">post</span>(<span class="hljs-params">self, request</span>):
        <span class="hljs-keyword">try</span>:
            <span class="hljs-comment"># è§£æè¯·æ±‚æ•°æ®</span>
            order_data = json.loads(request.body)
            
            <span class="hljs-comment"># åŸºç¡€éªŒè¯</span>
            <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> self.validate_request_data(order_data):
                <span class="hljs-keyword">return</span> JsonResponse(
                    {<span class="hljs-string">'error'</span>: <span class="hljs-string">'Invalid request data'</span>}, 
                    status=<span class="hljs-number">400</span>
                )
            
            <span class="hljs-comment"># å¯åŠ¨è®¢å•å¤„ç†å·¥ä½œæµ</span>
            workflow_result = process_complete_order(order_data)
            
            <span class="hljs-comment"># ä¿å­˜è®¢å•åŸºæœ¬ä¿¡æ¯</span>
            order = Order.objects.create(
                order_id=order_data[<span class="hljs-string">'order_id'</span>],
                user_id=order_data[<span class="hljs-string">'user_id'</span>],
                status=<span class="hljs-string">'processing'</span>,
                workflow_id=workflow_result[<span class="hljs-string">'workflow_id'</span>]
            )
            
            <span class="hljs-keyword">return</span> JsonResponse({
                <span class="hljs-string">'order_id'</span>: order_data[<span class="hljs-string">'order_id'</span>],
                <span class="hljs-string">'workflow_id'</span>: workflow_result[<span class="hljs-string">'workflow_id'</span>],
                <span class="hljs-string">'status'</span>: <span class="hljs-string">'processing'</span>,
                <span class="hljs-string">'message'</span>: <span class="hljs-string">'Order is being processed'</span>
            })
            
        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> exc:
            logger.error(<span class="hljs-string">f"Order creation failed: <span class="hljs-subst">{exc}</span>"</span>)
            <span class="hljs-keyword">return</span> JsonResponse(
                {<span class="hljs-string">'error'</span>: <span class="hljs-string">'Internal server error'</span>}, 
                status=<span class="hljs-number">500</span>
            )
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">validate_request_data</span>(<span class="hljs-params">self, data</span>):
        <span class="hljs-string">"""éªŒè¯è¯·æ±‚æ•°æ®"""</span>
        required_fields = [<span class="hljs-string">'order_id'</span>, <span class="hljs-string">'user_id'</span>, <span class="hljs-string">'items'</span>]
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">all</span>(field <span class="hljs-keyword">in</span> data <span class="hljs-keyword">for</span> field <span class="hljs-keyword">in</span> required_fields)
 
<span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderStatusView</span>(<span class="hljs-title class_ inherited__">View</span>):
    <span class="hljs-string">"""è®¢å•çŠ¶æ€æŸ¥è¯¢APIè§†å›¾"""</span>
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">get</span>(<span class="hljs-params">self, request, order_id</span>):
        <span class="hljs-keyword">try</span>:
            <span class="hljs-comment"># æŸ¥è¯¢è®¢å•ä¿¡æ¯</span>
            order = Order.objects.get(order_id=order_id)
            
            <span class="hljs-comment"># è·å–å·¥ä½œæµçŠ¶æ€</span>
            <span class="hljs-keyword">from</span> celery.result <span class="hljs-keyword">import</span> AsyncResult
            <span class="hljs-keyword">from</span> orders.tasks <span class="hljs-keyword">import</span> app
            
            workflow_result = AsyncResult(order.workflow_id, app=app)
            
            response_data = {
                <span class="hljs-string">'order_id'</span>: order_id,
                <span class="hljs-string">'workflow_status'</span>: workflow_result.status,
                <span class="hljs-string">'order_status'</span>: order.status
            }
            
            <span class="hljs-comment"># å¦‚æœå·¥ä½œæµå®Œæˆï¼Œæ·»åŠ ç»“æœä¿¡æ¯</span>
            <span class="hljs-keyword">if</span> workflow_result.ready():
                <span class="hljs-keyword">if</span> workflow_result.successful():
                    response_data[<span class="hljs-string">'result'</span>] = workflow_result.result
                    order.status = <span class="hljs-string">'completed'</span>
                    order.save()
                <span class="hljs-keyword">else</span>:
                    response_data[<span class="hljs-string">'error'</span>] = <span class="hljs-built_in">str</span>(workflow_result.result)
                    order.status = <span class="hljs-string">'failed'</span>
                    order.save()
            
            <span class="hljs-keyword">return</span> JsonResponse(response_data)
            
        <span class="hljs-keyword">except</span> Order.DoesNotExist:
            <span class="hljs-keyword">return</span> JsonResponse({<span class="hljs-string">'error'</span>: <span class="hljs-string">'Order not found'</span>}, status=<span class="hljs-number">404</span>)
        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> exc:
            logger.error(<span class="hljs-string">f"Order status query failed: <span class="hljs-subst">{exc}</span>"</span>)
            <span class="hljs-keyword">return</span> JsonResponse({<span class="hljs-string">'error'</span>: <span class="hljs-string">'Internal server error'</span>}, status=<span class="hljs-number">500</span>)
AIå†™ä»£ç python
è¿è¡Œ
</code></pre>
<h3 data-id="heading-24"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>5Â æ€§èƒ½ä¼˜åŒ–ä¸ç›‘æ§</h3>
<h4 data-id="heading-25"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>5.1 æ€§èƒ½ä¼˜åŒ–ç­–ç•¥</h4>
<h5 data-id="heading-26">5.1.1 Workerä¼˜åŒ–é…ç½®</h5>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># celery_config.py</span>
from celery import Celery
from celery.concurrency import asynpool
 
<span class="hljs-attr">app</span> = Celery(<span class="hljs-string">'optimized_app'</span>)
 
<span class="hljs-comment"># ä¼˜åŒ–Workeré…ç½®</span>
app.conf.update(
    <span class="hljs-comment"># å¹¶å‘è®¾ç½®</span>
    <span class="hljs-attr">worker_concurrency</span>=<span class="hljs-number">4</span>,  <span class="hljs-comment"># æ ¹æ®CPUæ ¸å¿ƒæ•°è°ƒæ•´</span>
    <span class="hljs-attr">worker_prefetch_multiplier</span>=<span class="hljs-number">4</span>,  <span class="hljs-comment"># é¢„å–æ¶ˆæ¯æ•°é‡</span>
    
    <span class="hljs-comment"># ä»»åŠ¡ç¡®è®¤è®¾ç½®</span>
    <span class="hljs-attr">task_acks_late</span>=<span class="hljs-literal">True</span>,  <span class="hljs-comment"># ä»»åŠ¡å®Œæˆåç¡®è®¤</span>
    <span class="hljs-attr">task_reject_on_worker_lost</span>=<span class="hljs-literal">True</span>,
    
    <span class="hljs-comment"># åºåˆ—åŒ–ä¼˜åŒ–</span>
    <span class="hljs-attr">task_serializer</span>=<span class="hljs-string">'json'</span>,
    <span class="hljs-attr">result_serializer</span>=<span class="hljs-string">'json'</span>,
    <span class="hljs-attr">accept_content</span>=[<span class="hljs-string">'json'</span>],
    
    <span class="hljs-comment"># æ—¶é—´é™åˆ¶</span>
    <span class="hljs-attr">task_time_limit</span>=<span class="hljs-number">300</span>,  <span class="hljs-comment"># 5åˆ†é’Ÿè¶…æ—¶</span>
    <span class="hljs-attr">task_soft_time_limit</span>=<span class="hljs-number">250</span>,  <span class="hljs-comment"># è½¯è¶…æ—¶250ç§’</span>
    
    <span class="hljs-comment"># ç»“æœè¿‡æœŸæ—¶é—´</span>
    <span class="hljs-attr">result_expires</span>=<span class="hljs-number">3600</span>,  <span class="hljs-comment"># 1å°æ—¶è¿‡æœŸ</span>
    
    <span class="hljs-comment"># Brokerè¿æ¥ä¼˜åŒ–</span>
    <span class="hljs-attr">broker_connection_retry_on_startup</span>=<span class="hljs-literal">True</span>,
    <span class="hljs-attr">broker_connection_retry</span>=<span class="hljs-literal">True</span>,
    <span class="hljs-attr">broker_connection_max_retries</span>=<span class="hljs-number">10</span>,
    
    <span class="hljs-comment"># ä»»åŠ¡å‹ç¼©</span>
    <span class="hljs-attr">task_compression</span>=<span class="hljs-string">'gzip'</span>,
)
 
<span class="hljs-comment"># é’ˆå¯¹ä¸åŒç±»å‹ä»»åŠ¡çš„ä¼˜åŒ–é…ç½®</span>
class TaskOptimization:
    @staticmethod
    def get_optimized_config(task_type):
        """æ ¹æ®ä»»åŠ¡ç±»å‹è¿”å›ä¼˜åŒ–é…ç½®"""
        <span class="hljs-attr">base_config</span> = {
            'CPUå¯†é›†å‹': {
                'concurrency': 2,  <span class="hljs-comment"># è¾ƒå°‘å¹¶å‘ï¼Œé¿å…CPUç«äº‰</span>
                'prefetch_multiplier': 1,
                'task_time_limit': 600,
            },
            'IOå¯†é›†å‹': {
                'concurrency': 10,  <span class="hljs-comment"># è¾ƒé«˜å¹¶å‘ï¼Œå……åˆ†åˆ©ç”¨IOç­‰å¾…</span>
                'prefetch_multiplier': 10,
                'task_time_limit': 1800,
            },
            'å†…å­˜å¯†é›†å‹': {
                'concurrency': 2,
                'prefetch_multiplier': 1,
                'task_time_limit': 300,
                'worker_max_memory_per_child': 200000,  <span class="hljs-comment"># 200MB</span>
            }
        }
        return base_config.get(task_type, {})
AIå†™ä»£ç python
è¿è¡Œ
</code></pre>
<h5 data-id="heading-27">5.1.2 RabbitMQæ€§èƒ½è°ƒä¼˜</h5>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># rabbitmq_optimization.py</span>
<span class="hljs-keyword">import</span> pika
<span class="hljs-keyword">from</span> pika <span class="hljs-keyword">import</span> ConnectionParameters
 
<span class="hljs-keyword">class</span> <span class="hljs-title class_">RabbitMQOptimizer</span>:
    <span class="hljs-string">"""RabbitMQæ€§èƒ½ä¼˜åŒ–é…ç½®"""</span>
    
<span class="hljs-meta">    @staticmethod</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_optimized_connection_params</span>():
        <span class="hljs-string">"""è·å–ä¼˜åŒ–çš„è¿æ¥å‚æ•°"""</span>
        <span class="hljs-keyword">return</span> ConnectionParameters(
            host=<span class="hljs-string">'localhost'</span>,
            port=<span class="hljs-number">5672</span>,
            <span class="hljs-comment"># è¿æ¥æ± é…ç½®</span>
            connection_attempts=<span class="hljs-number">3</span>,
            retry_delay=<span class="hljs-number">5</span>,
            <span class="hljs-comment"># å¿ƒè·³æ£€æµ‹</span>
            heartbeat=<span class="hljs-number">600</span>,
            blocked_connection_timeout=<span class="hljs-number">300</span>,
            <span class="hljs-comment"># TCPä¼˜åŒ–</span>
            socket_timeout=<span class="hljs-number">10</span>,
            tcp_options={
                <span class="hljs-string">'TCP_KEEPIDLE'</span>: <span class="hljs-number">60</span>,
                <span class="hljs-string">'TCP_KEEPINTVL'</span>: <span class="hljs-number">30</span>,
                <span class="hljs-string">'TCP_KEEPCNT'</span>: <span class="hljs-number">3</span>
            }
        )
    
<span class="hljs-meta">    @staticmethod</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">optimize_channel</span>(<span class="hljs-params">channel</span>):
        <span class="hljs-string">"""ä¼˜åŒ–Channelé…ç½®"""</span>
        <span class="hljs-comment"># è®¾ç½®QoSï¼Œæ§åˆ¶æ¶ˆæ¯æµ</span>
        channel.basic_qos(prefetch_count=<span class="hljs-number">100</span>)
        
        <span class="hljs-comment"># å¯ç”¨å‘å¸ƒè€…ç¡®è®¤</span>
        channel.confirm_delivery()
        
        <span class="hljs-keyword">return</span> channel
    
<span class="hljs-meta">    @staticmethod</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_queue_optimization_params</span>():
        <span class="hljs-string">"""è·å–é˜Ÿåˆ—ä¼˜åŒ–å‚æ•°"""</span>
        <span class="hljs-keyword">return</span> {
            <span class="hljs-comment"># æ¶ˆæ¯TTL</span>
            <span class="hljs-string">'x-message-ttl'</span>: <span class="hljs-number">86400000</span>,  <span class="hljs-comment"># 24å°æ—¶</span>
            <span class="hljs-comment"># é˜Ÿåˆ—æœ€å¤§é•¿åº¦</span>
            <span class="hljs-string">'x-max-length'</span>: <span class="hljs-number">10000</span>,
            <span class="hljs-comment"># æº¢å‡ºè¡Œä¸º</span>
            <span class="hljs-string">'x-overflow'</span>: <span class="hljs-string">'reject-publish'</span>,
            <span class="hljs-comment"># æ­»ä¿¡é…ç½®</span>
            <span class="hljs-string">'x-dead-letter-exchange'</span>: <span class="hljs-string">'dlx'</span>,
            <span class="hljs-string">'x-dead-letter-routing-key'</span>: <span class="hljs-string">'dead_letter'</span>
        }
 
<span class="hljs-comment"># ç›‘æ§æŒ‡æ ‡æ”¶é›†</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">PerformanceMetrics</span>:
    <span class="hljs-string">"""æ€§èƒ½æŒ‡æ ‡æ”¶é›†"""</span>
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):
        self.metrics = {
            <span class="hljs-string">'task_start_time'</span>: {},
            <span class="hljs-string">'queue_lengths'</span>: {},
            <span class="hljs-string">'processing_times'</span>: []
        }
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">record_task_start</span>(<span class="hljs-params">self, task_id, queue_name</span>):
        <span class="hljs-string">"""è®°å½•ä»»åŠ¡å¼€å§‹æ—¶é—´"""</span>
        self.metrics[<span class="hljs-string">'task_start_time'</span>][task_id] = {
            <span class="hljs-string">'start_time'</span>: time.time(),
            <span class="hljs-string">'queue_name'</span>: queue_name
        }
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">record_task_end</span>(<span class="hljs-params">self, task_id</span>):
        <span class="hljs-string">"""è®°å½•ä»»åŠ¡ç»“æŸæ—¶é—´"""</span>
        <span class="hljs-keyword">if</span> task_id <span class="hljs-keyword">in</span> self.metrics[<span class="hljs-string">'task_start_time'</span>]:
            start_info = self.metrics[<span class="hljs-string">'task_start_time'</span>][task_id]
            processing_time = time.time() - start_info[<span class="hljs-string">'start_time'</span>]
            
            self.metrics[<span class="hljs-string">'processing_times'</span>].append({
                <span class="hljs-string">'task_id'</span>: task_id,
                <span class="hljs-string">'queue_name'</span>: start_info[<span class="hljs-string">'queue_name'</span>],
                <span class="hljs-string">'processing_time'</span>: processing_time
            })
            
            <span class="hljs-keyword">del</span> self.metrics[<span class="hljs-string">'task_start_time'</span>][task_id]
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_performance_report</span>(<span class="hljs-params">self</span>):
        <span class="hljs-string">"""ç”Ÿæˆæ€§èƒ½æŠ¥å‘Š"""</span>
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> self.metrics[<span class="hljs-string">'processing_times'</span>]:
            <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>
        
        df = pd.DataFrame(self.metrics[<span class="hljs-string">'processing_times'</span>])
        report = {
            <span class="hljs-string">'total_tasks_processed'</span>: <span class="hljs-built_in">len</span>(self.metrics[<span class="hljs-string">'processing_times'</span>]),
            <span class="hljs-string">'average_processing_time'</span>: df[<span class="hljs-string">'processing_time'</span>].mean(),
            <span class="hljs-string">'max_processing_time'</span>: df[<span class="hljs-string">'processing_time'</span>].<span class="hljs-built_in">max</span>(),
            <span class="hljs-string">'min_processing_time'</span>: df[<span class="hljs-string">'processing_time'</span>].<span class="hljs-built_in">min</span>(),
            <span class="hljs-string">'queue_performance'</span>: df.groupby(<span class="hljs-string">'queue_name'</span>)[<span class="hljs-string">'processing_time'</span>].describe()
        }
        
        <span class="hljs-keyword">return</span> report
AIå†™ä»£ç python
è¿è¡Œ
</code></pre>
<h4 data-id="heading-28"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>5.2 ç›‘æ§ä¸å‘Šè­¦</h4>
<h5 data-id="heading-29">5.2.1 Flowerç›‘æ§é›†æˆ</h5>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># monitoring/flower_config.py</span>
<span class="hljs-keyword">from</span> celery <span class="hljs-keyword">import</span> Celery
<span class="hljs-keyword">from</span> flower <span class="hljs-keyword">import</span> Flower
 
app = Celery(<span class="hljs-string">'monitored_app'</span>)
 
<span class="hljs-keyword">class</span> <span class="hljs-title class_">AdvancedFlowerConfig</span>:
    <span class="hljs-string">"""é«˜çº§Flowerç›‘æ§é…ç½®"""</span>
    
<span class="hljs-meta">    @staticmethod</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_config</span>():
        <span class="hljs-string">"""è·å–Floweré…ç½®"""</span>
        <span class="hljs-keyword">return</span> {
            <span class="hljs-string">'address'</span>: <span class="hljs-string">'0.0.0.0'</span>,
            <span class="hljs-string">'port'</span>: <span class="hljs-number">5555</span>,
            <span class="hljs-string">'broker_api'</span>: <span class="hljs-string">'http://guest:guest@localhost:15672/api/'</span>,
            <span class="hljs-string">'persistent'</span>: <span class="hljs-literal">True</span>,
            <span class="hljs-string">'db'</span>: <span class="hljs-string">'flower.db'</span>,
            <span class="hljs-string">'max_tasks'</span>: <span class="hljs-number">10000</span>,
            <span class="hljs-string">'basic_auth'</span>: [<span class="hljs-string">'admin:password'</span>],  <span class="hljs-comment"># åŸºæœ¬è®¤è¯</span>
            <span class="hljs-string">'auth_provider'</span>: <span class="hljs-string">'flower.views.auth.GoogleAuth'</span>,
            <span class="hljs-string">'url_prefix'</span>: <span class="hljs-string">'flower'</span>,  <span class="hljs-comment"># URLå‰ç¼€</span>
            <span class="hljs-string">'certfile'</span>: <span class="hljs-string">'/path/to/cert.pem'</span>,  <span class="hljs-comment"># SSLè¯ä¹¦</span>
            <span class="hljs-string">'keyfile'</span>: <span class="hljs-string">'/path/to/key.pem'</span>,
        }
    
<span class="hljs-meta">    @staticmethod</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">setup_custom_metrics</span>():
        <span class="hljs-string">"""è®¾ç½®è‡ªå®šä¹‰ç›‘æ§æŒ‡æ ‡"""</span>
        <span class="hljs-keyword">from</span> flower.events <span class="hljs-keyword">import</span> Events
        <span class="hljs-keyword">from</span> flower.utils.broker <span class="hljs-keyword">import</span> Broker
        
        <span class="hljs-keyword">class</span> <span class="hljs-title class_">CustomEvents</span>(<span class="hljs-title class_ inherited__">Events</span>):
            <span class="hljs-keyword">def</span> <span class="hljs-title function_">on_task_success</span>(<span class="hljs-params">self, result</span>):
                <span class="hljs-comment"># è‡ªå®šä¹‰æˆåŠŸä»»åŠ¡å¤„ç†</span>
                metrics.increment(<span class="hljs-string">'tasks.completed'</span>)
                <span class="hljs-built_in">super</span>().on_task_success(result)
            
            <span class="hljs-keyword">def</span> <span class="hljs-title function_">on_task_failure</span>(<span class="hljs-params">self, task_id, exception, traceback, einfo</span>):
                <span class="hljs-comment"># è‡ªå®šä¹‰å¤±è´¥ä»»åŠ¡å¤„ç†</span>
                metrics.increment(<span class="hljs-string">'tasks.failed'</span>)
                <span class="hljs-built_in">super</span>().on_task_failure(task_id, exception, traceback, einfo)
        
        <span class="hljs-keyword">return</span> CustomEvents
 
<span class="hljs-comment"># å¯åŠ¨Flowerç›‘æ§</span>
<span class="hljs-comment"># flower -A monitored_app --conf=monitoring/flower_config.py</span>
AIå†™ä»£ç python
è¿è¡Œ
</code></pre>
<h5 data-id="heading-30">5.2.2 è‡ªå®šä¹‰ç›‘æ§ä»ªè¡¨æ¿</h5>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># monitoring/dashboard.py</span>
<span class="hljs-keyword">import</span> json
<span class="hljs-keyword">import</span> time
<span class="hljs-keyword">from</span> datetime <span class="hljs-keyword">import</span> datetime
<span class="hljs-keyword">import</span> requests
<span class="hljs-keyword">from</span> celery <span class="hljs-keyword">import</span> Celery
 
app = Celery(<span class="hljs-string">'dashboard_app'</span>)
 
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MonitoringDashboard</span>:
    <span class="hljs-string">"""è‡ªå®šä¹‰ç›‘æ§ä»ªè¡¨æ¿"""</span>
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, flower_url=<span class="hljs-string">'http://localhost:5555'</span></span>):
        self.flower_url = flower_url
        self.metrics_cache = {}
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_cluster_metrics</span>(<span class="hljs-params">self</span>):
        <span class="hljs-string">"""è·å–é›†ç¾¤æŒ‡æ ‡"""</span>
        <span class="hljs-keyword">try</span>:
            <span class="hljs-comment"># è·å–WorkerçŠ¶æ€</span>
            workers_response = requests.get(<span class="hljs-string">f'<span class="hljs-subst">{self.flower_url}</span>/api/workers'</span>)
            workers_data = workers_response.json()
            
            <span class="hljs-comment"># è·å–ä»»åŠ¡çŠ¶æ€</span>
            tasks_response = requests.get(<span class="hljs-string">f'<span class="hljs-subst">{self.flower_url}</span>/api/tasks'</span>)
            tasks_data = tasks_response.json()
            
            metrics = {
                <span class="hljs-string">'timestamp'</span>: datetime.now().isoformat(),
                <span class="hljs-string">'active_workers'</span>: <span class="hljs-built_in">len</span>(workers_data),
                <span class="hljs-string">'total_tasks'</span>: <span class="hljs-built_in">len</span>(tasks_data),
                <span class="hljs-string">'tasks_by_state'</span>: self._count_tasks_by_state(tasks_data),
                <span class="hljs-string">'worker_stats'</span>: self._calculate_worker_stats(workers_data)
            }
            
            self.metrics_cache = metrics
            <span class="hljs-keyword">return</span> metrics
            
        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
            logger.error(<span class="hljs-string">f"Failed to fetch cluster metrics: <span class="hljs-subst">{e}</span>"</span>)
            <span class="hljs-keyword">return</span> self.metrics_cache
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">_count_tasks_by_state</span>(<span class="hljs-params">self, tasks_data</span>):
        <span class="hljs-string">"""æŒ‰çŠ¶æ€ç»Ÿè®¡ä»»åŠ¡æ•°é‡"""</span>
        states = {}
        <span class="hljs-keyword">for</span> task <span class="hljs-keyword">in</span> tasks_data.values():
            state = task.get(<span class="hljs-string">'state'</span>, <span class="hljs-string">'UNKNOWN'</span>)
            states[state] = states.get(state, <span class="hljs-number">0</span>) + <span class="hljs-number">1</span>
        <span class="hljs-keyword">return</span> states
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">_calculate_worker_stats</span>(<span class="hljs-params">self, workers_data</span>):
        <span class="hljs-string">"""è®¡ç®—Workerç»Ÿè®¡ä¿¡æ¯"""</span>
        stats = {
            <span class="hljs-string">'total'</span>: <span class="hljs-built_in">len</span>(workers_data),
            <span class="hljs-string">'active'</span>: <span class="hljs-number">0</span>,
            <span class="hljs-string">'offline'</span>: <span class="hljs-number">0</span>,
            <span class="hljs-string">'average_load'</span>: <span class="hljs-number">0</span>
        }
        
        load_sum = <span class="hljs-number">0</span>
        <span class="hljs-keyword">for</span> worker <span class="hljs-keyword">in</span> workers_data.values():
            <span class="hljs-keyword">if</span> worker.get(<span class="hljs-string">'active'</span>, <span class="hljs-number">0</span>) &gt; <span class="hljs-number">0</span>:
                stats[<span class="hljs-string">'active'</span>] += <span class="hljs-number">1</span>
            <span class="hljs-keyword">else</span>:
                stats[<span class="hljs-string">'offline'</span>] += <span class="hljs-number">1</span>
            
            load_sum += worker.get(<span class="hljs-string">'loadavg'</span>, [<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>])[<span class="hljs-number">0</span>]
        
        <span class="hljs-keyword">if</span> stats[<span class="hljs-string">'active'</span>] &gt; <span class="hljs-number">0</span>:
            stats[<span class="hljs-string">'average_load'</span>] = load_sum / stats[<span class="hljs-string">'active'</span>]
        
        <span class="hljs-keyword">return</span> stats
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">generate_alert</span>(<span class="hljs-params">self, threshold_config</span>):
        <span class="hljs-string">"""ç”Ÿæˆå‘Šè­¦"""</span>
        metrics = self.get_cluster_metrics()
        alerts = []
        
        <span class="hljs-comment"># æ£€æŸ¥Workeræ•°é‡é˜ˆå€¼</span>
        <span class="hljs-keyword">if</span> metrics[<span class="hljs-string">'active_workers'</span>] &lt; threshold_config.get(<span class="hljs-string">'min_workers'</span>, <span class="hljs-number">1</span>):
            alerts.append({
                <span class="hljs-string">'level'</span>: <span class="hljs-string">'CRITICAL'</span>,
                <span class="hljs-string">'message'</span>: <span class="hljs-string">f'Active workers below threshold: <span class="hljs-subst">{metrics[<span class="hljs-string">"active_workers"</span>]}</span>'</span>,
                <span class="hljs-string">'timestamp'</span>: metrics[<span class="hljs-string">'timestamp'</span>]
            })
        
        <span class="hljs-comment"># æ£€æŸ¥ä»»åŠ¡ç§¯å‹é˜ˆå€¼</span>
        pending_tasks = metrics[<span class="hljs-string">'tasks_by_state'</span>].get(<span class="hljs-string">'PENDING'</span>, <span class="hljs-number">0</span>)
        <span class="hljs-keyword">if</span> pending_tasks &gt; threshold_config.get(<span class="hljs-string">'max_pending_tasks'</span>, <span class="hljs-number">1000</span>):
            alerts.append({
                <span class="hljs-string">'level'</span>: <span class="hljs-string">'WARNING'</span>,
                <span class="hljs-string">'message'</span>: <span class="hljs-string">f'Pending tasks exceeded threshold: <span class="hljs-subst">{pending_tasks}</span>'</span>,
                <span class="hljs-string">'timestamp'</span>: metrics[<span class="hljs-string">'timestamp'</span>]
            })
        
        <span class="hljs-keyword">return</span> alerts
 
<span class="hljs-comment"># ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">setup_monitoring_dashboard</span>():
    <span class="hljs-string">"""è®¾ç½®ç›‘æ§ä»ªè¡¨æ¿"""</span>
    dashboard = MonitoringDashboard()
    
    <span class="hljs-comment"># æ¯30ç§’æ”¶é›†ä¸€æ¬¡æŒ‡æ ‡</span>
    <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:
        metrics = dashboard.get_cluster_metrics()
        alerts = dashboard.generate_alert({
            <span class="hljs-string">'min_workers'</span>: <span class="hljs-number">2</span>,
            <span class="hljs-string">'max_pending_tasks'</span>: <span class="hljs-number">500</span>
        })
        
        <span class="hljs-comment"># å¤„ç†å‘Šè­¦</span>
        <span class="hljs-keyword">for</span> alert <span class="hljs-keyword">in</span> alerts:
            send_alert_notification(alert)
        
        time.sleep(<span class="hljs-number">30</span>)
AIå†™ä»£ç python
è¿è¡Œ
</code></pre>
<p>ä¸‹é¢çš„åºåˆ—å›¾å±•ç¤ºäº†å®Œæ•´çš„ç›‘æ§å‘Šè­¦æµç¨‹ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dea36c4216334c8c83892d4b2daea189~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YeawtOinow==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769927291&amp;x-signature=OlgtNdrBcY589zT9o4Ofn6J3uZs%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-31"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>6 ä¼ä¸šçº§å®æˆ˜æ¡ˆä¾‹</h3>
<h4 data-id="heading-32"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>6.1 ç”µå•†å¹³å°è®¢å•å¤„ç†ç³»ç»Ÿ</h4>
<p>åŸºäºçœŸå®ç”µå•†åœºæ™¯çš„å®Œæ•´æ¶ˆæ¯é˜Ÿåˆ—æ¶æ„ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># ecommerce/order_system.py</span>
<span class="hljs-keyword">from</span> celery <span class="hljs-keyword">import</span> Celery
<span class="hljs-keyword">from</span> kombu <span class="hljs-keyword">import</span> Queue, Exchange
<span class="hljs-keyword">import</span> logging
<span class="hljs-keyword">from</span> datetime <span class="hljs-keyword">import</span> datetime
 
logger = logging.getLogger(__name__)
 
app = Celery(<span class="hljs-string">'ecommerce'</span>)
app.config_from_object(<span class="hljs-string">'django.conf:settings'</span>)
 
<span class="hljs-comment"># å®šä¹‰ä¸šåŠ¡Exchange</span>
order_exchange = Exchange(<span class="hljs-string">'orders'</span>, <span class="hljs-built_in">type</span>=<span class="hljs-string">'direct'</span>, durable=<span class="hljs-literal">True</span>)
payment_exchange = Exchange(<span class="hljs-string">'payments'</span>, <span class="hljs-built_in">type</span>=<span class="hljs-string">'topic'</span>, durable=<span class="hljs-literal">True</span>)
notification_exchange = Exchange(<span class="hljs-string">'notifications'</span>, <span class="hljs-built_in">type</span>=<span class="hljs-string">'fanout'</span>, durable=<span class="hljs-literal">True</span>)
 
<span class="hljs-comment"># é…ç½®ä¸šåŠ¡é˜Ÿåˆ—</span>
app.conf.task_queues = (
    Queue(<span class="hljs-string">'order_validation'</span>, order_exchange, routing_key=<span class="hljs-string">'order.validate'</span>),
    Queue(<span class="hljs-string">'order_processing'</span>, order_exchange, routing_key=<span class="hljs-string">'order.process'</span>),
    Queue(<span class="hljs-string">'payment_processing'</span>, payment_exchange, routing_key=<span class="hljs-string">'payment.*'</span>),
    Queue(<span class="hljs-string">'email_notifications'</span>, notification_exchange),
    Queue(<span class="hljs-string">'sms_notifications'</span>, notification_exchange),
    Queue(<span class="hljs-string">'dead_letter'</span>, Exchange(<span class="hljs-string">'dlx'</span>), routing_key=<span class="hljs-string">'dead_letter'</span>),
)
 
<span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderProcessingSystem</span>:
    <span class="hljs-string">"""è®¢å•å¤„ç†ç³»ç»Ÿ"""</span>
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):
        self.performance_metrics = PerformanceMetrics()
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">process_new_order</span>(<span class="hljs-params">self, order_data</span>):
        <span class="hljs-string">"""å¤„ç†æ–°è®¢å•"""</span>
        <span class="hljs-keyword">try</span>:
            <span class="hljs-comment"># è®°å½•å¼€å§‹æ—¶é—´</span>
            start_time = datetime.now()
            
            <span class="hljs-comment"># éªŒè¯è®¢å•æ•°æ®</span>
            validation_result = self.validate_order_data(order_data)
            <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> validation_result[<span class="hljs-string">'valid'</span>]:
                <span class="hljs-keyword">return</span> {<span class="hljs-string">'status'</span>: <span class="hljs-string">'validation_failed'</span>, <span class="hljs-string">'errors'</span>: validation_result[<span class="hljs-string">'errors'</span>]}
            
            <span class="hljs-comment"># åˆ›å»ºè®¢å•å¤„ç†å·¥ä½œæµ</span>
            workflow = self.create_order_workflow(order_data)
            result = workflow.apply_async()
            
            <span class="hljs-comment"># è®°å½•æ€§èƒ½æŒ‡æ ‡</span>
            processing_time = (datetime.now() - start_time).total_seconds()
            self.performance_metrics.record_processing_time(<span class="hljs-string">'order_processing'</span>, processing_time)
            
            <span class="hljs-keyword">return</span> {
                <span class="hljs-string">'status'</span>: <span class="hljs-string">'processing'</span>,
                <span class="hljs-string">'workflow_id'</span>: result.<span class="hljs-built_in">id</span>,
                <span class="hljs-string">'order_id'</span>: order_data[<span class="hljs-string">'order_id'</span>],
                <span class="hljs-string">'estimated_completion_time'</span>: processing_time * <span class="hljs-number">2</span>  <span class="hljs-comment"># é¢„ä¼°å®Œæˆæ—¶é—´</span>
            }
            
        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
            logger.error(<span class="hljs-string">f"Order processing failed: <span class="hljs-subst">{e}</span>"</span>)
            <span class="hljs-keyword">return</span> {<span class="hljs-string">'status'</span>: <span class="hljs-string">'error'</span>, <span class="hljs-string">'error'</span>: <span class="hljs-built_in">str</span>(e)}
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">create_order_workflow</span>(<span class="hljs-params">self, order_data</span>):
        <span class="hljs-string">"""åˆ›å»ºè®¢å•å¤„ç†å·¥ä½œæµ"""</span>
        <span class="hljs-keyword">from</span> celery <span class="hljs-keyword">import</span> chain, group
        
        <span class="hljs-comment"># å®šä¹‰å¹¶è¡Œå¤„ç†ä»»åŠ¡</span>
        parallel_processing = group(
            self.validate_inventory.s(order_data),
            self.validate_customer.s(order_data),
            self.calculate_pricing.s(order_data)
        )
        
        <span class="hljs-comment"># å®šä¹‰ä¸²è¡Œå¤„ç†é“¾</span>
        processing_chain = chain(
            parallel_processing,
            self.process_payment.s(),
            self.fulfill_order.s(),
            self.send_confirmation.s(order_data)
        )
        
        <span class="hljs-keyword">return</span> processing_chain
    
<span class="hljs-meta">    @app.task(<span class="hljs-params">bind=<span class="hljs-literal">True</span>, max_retries=<span class="hljs-number">3</span></span>)</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">validate_inventory</span>(<span class="hljs-params">self, order_data</span>):
        <span class="hljs-string">"""éªŒè¯åº“å­˜"""</span>
        <span class="hljs-keyword">try</span>:
            <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> order_data[<span class="hljs-string">'items'</span>]:
                <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> self.check_inventory(item[<span class="hljs-string">'product_id'</span>], item[<span class="hljs-string">'quantity'</span>]):
                    <span class="hljs-keyword">raise</span> InventoryError(<span class="hljs-string">f"Insufficient inventory for <span class="hljs-subst">{item[<span class="hljs-string">'product_id'</span>]}</span>"</span>)
            
            <span class="hljs-keyword">return</span> {<span class="hljs-string">'status'</span>: <span class="hljs-string">'inventory_valid'</span>, <span class="hljs-string">'order_id'</span>: order_data[<span class="hljs-string">'order_id'</span>]}
            
        <span class="hljs-keyword">except</span> InventoryError <span class="hljs-keyword">as</span> e:
            logger.error(<span class="hljs-string">f"Inventory validation failed: <span class="hljs-subst">{e}</span>"</span>)
            <span class="hljs-keyword">return</span> {<span class="hljs-string">'status'</span>: <span class="hljs-string">'inventory_error'</span>, <span class="hljs-string">'error'</span>: <span class="hljs-built_in">str</span>(e)}
        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
            logger.error(<span class="hljs-string">f"Inventory validation error: <span class="hljs-subst">{e}</span>"</span>)
            <span class="hljs-keyword">raise</span> self.retry(exc=e, countdown=<span class="hljs-number">60</span>)
    
<span class="hljs-meta">    @app.task(<span class="hljs-params">bind=<span class="hljs-literal">True</span></span>)</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">process_payment</span>(<span class="hljs-params">self, previous_results</span>):
        <span class="hljs-string">"""å¤„ç†æ”¯ä»˜"""</span>
        <span class="hljs-keyword">try</span>:
            <span class="hljs-comment"># èšåˆå¹¶è¡Œå¤„ç†ç»“æœ</span>
            aggregated_result = self.aggregate_parallel_results(previous_results)
            
            <span class="hljs-keyword">if</span> aggregated_result[<span class="hljs-string">'status'</span>] != <span class="hljs-string">'ready_for_payment'</span>:
                <span class="hljs-keyword">raise</span> PaymentError(<span class="hljs-string">"Pre-payment validation failed"</span>)
            
            <span class="hljs-comment"># è°ƒç”¨æ”¯ä»˜ç½‘å…³</span>
            payment_result = self.call_payment_gateway(aggregated_result[<span class="hljs-string">'order_data'</span>])
            
            <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> payment_result.success:
                <span class="hljs-keyword">raise</span> PaymentError(<span class="hljs-string">f"Payment failed: <span class="hljs-subst">{payment_result.message}</span>"</span>)
            
            <span class="hljs-keyword">return</span> {
                <span class="hljs-string">'status'</span>: <span class="hljs-string">'payment_processed'</span>,
                <span class="hljs-string">'order_id'</span>: aggregated_result[<span class="hljs-string">'order_id'</span>],
                <span class="hljs-string">'transaction_id'</span>: payment_result.transaction_id
            }
            
        <span class="hljs-keyword">except</span> PaymentError <span class="hljs-keyword">as</span> e:
            logger.error(<span class="hljs-string">f"Payment processing failed: <span class="hljs-subst">{e}</span>"</span>)
            <span class="hljs-keyword">return</span> {<span class="hljs-string">'status'</span>: <span class="hljs-string">'payment_error'</span>, <span class="hljs-string">'error'</span>: <span class="hljs-built_in">str</span>(e)}
        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
            logger.error(<span class="hljs-string">f"Payment processing error: <span class="hljs-subst">{e}</span>"</span>)
            <span class="hljs-keyword">raise</span> self.retry(exc=e, countdown=<span class="hljs-number">30</span>)
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_system_health</span>(<span class="hljs-params">self</span>):
        <span class="hljs-string">"""è·å–ç³»ç»Ÿå¥åº·çŠ¶æ€"""</span>
        <span class="hljs-keyword">try</span>:
            dashboard = MonitoringDashboard()
            metrics = dashboard.get_cluster_metrics()
            
            health_status = {
                <span class="hljs-string">'status'</span>: <span class="hljs-string">'healthy'</span>,
                <span class="hljs-string">'timestamp'</span>: datetime.now().isoformat(),
                <span class="hljs-string">'metrics'</span>: {
                    <span class="hljs-string">'active_workers'</span>: metrics[<span class="hljs-string">'active_workers'</span>],
                    <span class="hljs-string">'pending_tasks'</span>: metrics[<span class="hljs-string">'tasks_by_state'</span>].get(<span class="hljs-string">'PENDING'</span>, <span class="hljs-number">0</span>),
                    <span class="hljs-string">'failed_tasks'</span>: metrics[<span class="hljs-string">'tasks_by_state'</span>].get(<span class="hljs-string">'FAILED'</span>, <span class="hljs-number">0</span>),
                    <span class="hljs-string">'worker_load'</span>: metrics[<span class="hljs-string">'worker_stats'</span>][<span class="hljs-string">'average_load'</span>]
                }
            }
            
            <span class="hljs-comment"># æ£€æŸ¥å¥åº·é˜ˆå€¼</span>
            <span class="hljs-keyword">if</span> (health_status[<span class="hljs-string">'metrics'</span>][<span class="hljs-string">'active_workers'</span>] &lt; <span class="hljs-number">2</span> <span class="hljs-keyword">or</span> 
                health_status[<span class="hljs-string">'metrics'</span>][<span class="hljs-string">'pending_tasks'</span>] &gt; <span class="hljs-number">1000</span>):
                health_status[<span class="hljs-string">'status'</span>] = <span class="hljs-string">'degraded'</span>
            
            <span class="hljs-keyword">if</span> health_status[<span class="hljs-string">'metrics'</span>][<span class="hljs-string">'failed_tasks'</span>] &gt; <span class="hljs-number">100</span>:
                health_status[<span class="hljs-string">'status'</span>] = <span class="hljs-string">'unhealthy'</span>
            
            <span class="hljs-keyword">return</span> health_status
            
        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
            logger.error(<span class="hljs-string">f"Health check failed: <span class="hljs-subst">{e}</span>"</span>)
            <span class="hljs-keyword">return</span> {<span class="hljs-string">'status'</span>: <span class="hljs-string">'unknown'</span>, <span class="hljs-string">'error'</span>: <span class="hljs-built_in">str</span>(e)}
AIå†™ä»£ç python
è¿è¡Œ
</code></pre>
<h4 data-id="heading-33"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>6.2 æ€§èƒ½æ•°æ®ä¸ä¼˜åŒ–æ•ˆæœ</h4>
<p>åŸºäºå®é™…ç”Ÿäº§ç¯å¢ƒæ•°æ®ï¼ŒRabbitMQä¸Celeryé›†æˆæ–¹æ¡ˆçš„è¡¨ç°ï¼š</p>



































<table><thead><tr><th>æŒ‡æ ‡</th><th>ä¼˜åŒ–å‰</th><th>ä¼˜åŒ–å</th><th>æå‡å¹…åº¦</th></tr></thead><tbody><tr><td>è®¢å•å¤„ç†ååé‡</td><td>500/åˆ†é’Ÿ</td><td>4000/åˆ†é’Ÿ</td><td>8å€</td></tr><tr><td>å¹³å‡å“åº”æ—¶é—´</td><td>3ç§’</td><td>200æ¯«ç§’</td><td>93%é™ä½</td></tr><tr><td>ç³»ç»Ÿå¯ç”¨æ€§</td><td>99.5%</td><td>99.99%</td><td>æ•…éšœæ—¶é—´å‡å°‘90%</td></tr><tr><td>èµ„æºåˆ©ç”¨ç‡</td><td>40%</td><td>75%</td><td>87.5%æå‡</td></tr></tbody></table>
<h3 data-id="heading-34"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>7 æ•…éšœæ’æŸ¥ä¸æœ€ä½³å®è·µ</h3>
<h4 data-id="heading-35"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>7.1 å¸¸è§é—®é¢˜è§£å†³æ–¹æ¡ˆ</h4>
<h5 data-id="heading-36">7.1.1 æ¶ˆæ¯ç§¯å‹å¤„ç†</h5>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># troubleshooting/backlog_management.py</span>
<span class="hljs-keyword">from</span> celery <span class="hljs-keyword">import</span> Celery
<span class="hljs-keyword">import</span> time
<span class="hljs-keyword">from</span> datetime <span class="hljs-keyword">import</span> datetime
 
app = Celery(<span class="hljs-string">'troubleshooting'</span>)
 
<span class="hljs-keyword">class</span> <span class="hljs-title class_">BacklogManager</span>:
    <span class="hljs-string">"""æ¶ˆæ¯ç§¯å‹å¤„ç†ç®¡ç†å™¨"""</span>
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, rabbitmq_host=<span class="hljs-string">'localhost'</span></span>):
        self.rabbitmq_host = rabbitmq_host
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">detect_backlog</span>(<span class="hljs-params">self, queue_name, threshold=<span class="hljs-number">1000</span></span>):
        <span class="hljs-string">"""æ£€æµ‹æ¶ˆæ¯ç§¯å‹"""</span>
        <span class="hljs-keyword">try</span>:
            <span class="hljs-comment"># è·å–é˜Ÿåˆ—æ¶ˆæ¯æ•°é‡</span>
            queue_info = self.get_queue_info(queue_name)
            message_count = queue_info.get(<span class="hljs-string">'messages'</span>, <span class="hljs-number">0</span>)
            
            <span class="hljs-keyword">if</span> message_count &gt; threshold:
                <span class="hljs-keyword">return</span> {
                    <span class="hljs-string">'has_backlog'</span>: <span class="hljs-literal">True</span>,
                    <span class="hljs-string">'queue'</span>: queue_name,
                    <span class="hljs-string">'message_count'</span>: message_count,
                    <span class="hljs-string">'threshold'</span>: threshold,
                    <span class="hljs-string">'timestamp'</span>: datetime.now().isoformat()
                }
            
            <span class="hljs-keyword">return</span> {<span class="hljs-string">'has_backlog'</span>: <span class="hljs-literal">False</span>, <span class="hljs-string">'message_count'</span>: message_count}
            
        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
            logger.error(<span class="hljs-string">f"Backlog detection failed: <span class="hljs-subst">{e}</span>"</span>)
            <span class="hljs-keyword">return</span> {<span class="hljs-string">'has_backlog'</span>: <span class="hljs-literal">False</span>, <span class="hljs-string">'error'</span>: <span class="hljs-built_in">str</span>(e)}
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">handle_backlog</span>(<span class="hljs-params">self, queue_name, strategy=<span class="hljs-string">'scale_workers'</span></span>):
        <span class="hljs-string">"""å¤„ç†æ¶ˆæ¯ç§¯å‹"""</span>
        backlog_info = self.detect_backlog(queue_name)
        
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> backlog_info[<span class="hljs-string">'has_backlog'</span>]:
            <span class="hljs-keyword">return</span> {<span class="hljs-string">'action'</span>: <span class="hljs-string">'none'</span>, <span class="hljs-string">'reason'</span>: <span class="hljs-string">'No backlog detected'</span>}
        
        <span class="hljs-keyword">if</span> strategy == <span class="hljs-string">'scale_workers'</span>:
            <span class="hljs-keyword">return</span> self.scale_workers(queue_name, backlog_info[<span class="hljs-string">'message_count'</span>])
        <span class="hljs-keyword">elif</span> strategy == <span class="hljs-string">'redirect_traffic'</span>:
            <span class="hljs-keyword">return</span> self.redirect_traffic(queue_name)
        <span class="hljs-keyword">elif</span> strategy == <span class="hljs-string">'priority_processing'</span>:
            <span class="hljs-keyword">return</span> self.enable_priority_processing(queue_name)
        <span class="hljs-keyword">else</span>:
            <span class="hljs-keyword">return</span> {<span class="hljs-string">'action'</span>: <span class="hljs-string">'unknown'</span>, <span class="hljs-string">'error'</span>: <span class="hljs-string">f'Unknown strategy: <span class="hljs-subst">{strategy}</span>'</span>}
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">scale_workers</span>(<span class="hljs-params">self, queue_name, message_count</span>):
        <span class="hljs-string">"""æ‰©å±•Workerå¤„ç†èƒ½åŠ›"""</span>
        <span class="hljs-keyword">try</span>:
            <span class="hljs-comment"># è®¡ç®—éœ€è¦çš„Workeræ•°é‡</span>
            required_workers = <span class="hljs-built_in">min</span>(message_count // <span class="hljs-number">100</span> + <span class="hljs-number">1</span>, <span class="hljs-number">10</span>)  <span class="hljs-comment"># æœ€å¤§10ä¸ªWorker</span>
            
            <span class="hljs-comment"># å¯åŠ¨é¢å¤–Worker</span>
            self.start_additional_workers(queue_name, required_workers)
            
            <span class="hljs-keyword">return</span> {
                <span class="hljs-string">'action'</span>: <span class="hljs-string">'scaled_workers'</span>,
                <span class="hljs-string">'queue'</span>: queue_name,
                <span class="hljs-string">'additional_workers'</span>: required_workers,
                <span class="hljs-string">'estimated_clearance_time'</span>: self.estimate_clearance_time(message_count, required_workers)
            }
            
        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
            logger.error(<span class="hljs-string">f"Worker scaling failed: <span class="hljs-subst">{e}</span>"</span>)
            <span class="hljs-keyword">return</span> {<span class="hljs-string">'action'</span>: <span class="hljs-string">'failed'</span>, <span class="hljs-string">'error'</span>: <span class="hljs-built_in">str</span>(e)}
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">estimate_clearance_time</span>(<span class="hljs-params">self, message_count, worker_count</span>):
        <span class="hljs-string">"""ä¼°ç®—ç§¯å‹æ¸…é™¤æ—¶é—´"""</span>
        <span class="hljs-comment"># å‡è®¾æ¯ä¸ªWorkeræ¯ç§’å¤„ç†10æ¡æ¶ˆæ¯</span>
        processing_rate = worker_count * <span class="hljs-number">10</span>
        <span class="hljs-keyword">return</span> message_count / processing_rate
 
<span class="hljs-comment"># è‡ªåŠ¨ç§¯å‹æ£€æµ‹ä¸å¤„ç†</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">auto_backlog_management</span>():
    <span class="hljs-string">"""è‡ªåŠ¨ç§¯å‹ç®¡ç†"""</span>
    manager = BacklogManager()
    
    <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:
        <span class="hljs-keyword">try</span>:
            <span class="hljs-comment"># æ£€æŸ¥å…³é”®é˜Ÿåˆ—</span>
            critical_queues = [<span class="hljs-string">'order_processing'</span>, <span class="hljs-string">'payment_processing'</span>, <span class="hljs-string">'email_notifications'</span>]
            
            <span class="hljs-keyword">for</span> queue <span class="hljs-keyword">in</span> critical_queues:
                result = manager.detect_backlog(queue, threshold=<span class="hljs-number">500</span>)
                
                <span class="hljs-keyword">if</span> result[<span class="hljs-string">'has_backlog'</span>]:
                    logger.warning(<span class="hljs-string">f"Backlog detected in <span class="hljs-subst">{queue}</span>: <span class="hljs-subst">{result[<span class="hljs-string">'message_count'</span>]}</span> messages"</span>)
                    
                    <span class="hljs-comment"># è‡ªåŠ¨å¤„ç†ç§¯å‹</span>
                    handling_result = manager.handle_backlog(queue, strategy=<span class="hljs-string">'scale_workers'</span>)
                    logger.info(<span class="hljs-string">f"Backlog handling result: <span class="hljs-subst">{handling_result}</span>"</span>)
            
            time.sleep(<span class="hljs-number">60</span>)  <span class="hljs-comment"># æ¯åˆ†é’Ÿæ£€æŸ¥ä¸€æ¬¡</span>
            
        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
            logger.error(<span class="hljs-string">f"Auto backlog management failed: <span class="hljs-subst">{e}</span>"</span>)
            time.sleep(<span class="hljs-number">300</span>)  <span class="hljs-comment"># å‡ºé”™åç­‰å¾…5åˆ†é’Ÿ</span>
AIå†™ä»£ç python
è¿è¡Œ
</code></pre>
<h5 data-id="heading-37">7.1.2 æ­»ä¿¡é˜Ÿåˆ—å¤„ç†</h5>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># troubleshooting/dead_letter_handler.py</span>
<span class="hljs-keyword">from</span> celery <span class="hljs-keyword">import</span> Celery
 
app = Celery(<span class="hljs-string">'dlq_handler'</span>)
 
<span class="hljs-keyword">class</span> <span class="hljs-title class_">DeadLetterQueueHandler</span>:
    <span class="hljs-string">"""æ­»ä¿¡é˜Ÿåˆ—å¤„ç†å™¨"""</span>
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):
        self.dlq_analysis = {}
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">analyze_dead_letters</span>(<span class="hljs-params">self, dlq_name=<span class="hljs-string">'dead_letter'</span></span>):
        <span class="hljs-string">"""åˆ†ææ­»ä¿¡é˜Ÿåˆ—æ¶ˆæ¯"""</span>
        <span class="hljs-keyword">try</span>:
            dead_letters = self.get_dead_letters(dlq_name)
            analysis = {
                <span class="hljs-string">'total_messages'</span>: <span class="hljs-built_in">len</span>(dead_letters),
                <span class="hljs-string">'by_reason'</span>: {},
                <span class="hljs-string">'by_original_queue'</span>: {},
                <span class="hljs-string">'common_patterns'</span>: self.identify_patterns(dead_letters)
            }
            
            <span class="hljs-keyword">for</span> message <span class="hljs-keyword">in</span> dead_letters:
                <span class="hljs-comment"># æŒ‰åŸå› åˆ†ç±»</span>
                reason = message.get(<span class="hljs-string">'reason'</span>, <span class="hljs-string">'unknown'</span>)
                analysis[<span class="hljs-string">'by_reason'</span>][reason] = analysis[<span class="hljs-string">'by_reason'</span>].get(reason, <span class="hljs-number">0</span>) + <span class="hljs-number">1</span>
                
                <span class="hljs-comment"># æŒ‰åŸå§‹é˜Ÿåˆ—åˆ†ç±»</span>
                original_queue = message.get(<span class="hljs-string">'original_queue'</span>, <span class="hljs-string">'unknown'</span>)
                analysis[<span class="hljs-string">'by_original_queue'</span>][original_queue] = analysis[<span class="hljs-string">'by_original_queue'</span>].get(original_queue, <span class="hljs-number">0</span>) + <span class="hljs-number">1</span>
            
            self.dlq_analysis = analysis
            <span class="hljs-keyword">return</span> analysis
            
        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
            logger.error(<span class="hljs-string">f"Dead letter analysis failed: <span class="hljs-subst">{e}</span>"</span>)
            <span class="hljs-keyword">return</span> self.dlq_analysis
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">identify_patterns</span>(<span class="hljs-params">self, dead_letters</span>):
        <span class="hljs-string">"""è¯†åˆ«æ­»ä¿¡æ¨¡å¼"""</span>
        patterns = {
            <span class="hljs-string">'recurrent_errors'</span>: {},
            <span class="hljs-string">'timeout_issues'</span>: [],
            <span class="hljs-string">'resource_problems'</span>: []
        }
        
        <span class="hljs-keyword">for</span> message <span class="hljs-keyword">in</span> dead_letters:
            error = message.get(<span class="hljs-string">'error'</span>, <span class="hljs-string">''</span>)
            
            <span class="hljs-comment"># è¯†åˆ«é‡å¤é”™è¯¯</span>
            <span class="hljs-keyword">if</span> error <span class="hljs-keyword">in</span> patterns[<span class="hljs-string">'recurrent_errors'</span>]:
                patterns[<span class="hljs-string">'recurrent_errors'</span>][error] += <span class="hljs-number">1</span>
            <span class="hljs-keyword">else</span>:
                patterns[<span class="hljs-string">'recurrent_errors'</span>][error] = <span class="hljs-number">1</span>
            
            <span class="hljs-comment"># è¯†åˆ«è¶…æ—¶é—®é¢˜</span>
            <span class="hljs-keyword">if</span> <span class="hljs-string">'timeout'</span> <span class="hljs-keyword">in</span> error.lower() <span class="hljs-keyword">or</span> <span class="hljs-string">'timed out'</span> <span class="hljs-keyword">in</span> error.lower():
                patterns[<span class="hljs-string">'timeout_issues'</span>].append(message)
            
            <span class="hljs-comment"># è¯†åˆ«èµ„æºé—®é¢˜</span>
            <span class="hljs-keyword">if</span> <span class="hljs-string">'memory'</span> <span class="hljs-keyword">in</span> error.lower() <span class="hljs-keyword">or</span> <span class="hljs-string">'resource'</span> <span class="hljs-keyword">in</span> error.lower():
                patterns[<span class="hljs-string">'resource_problems'</span>].append(message)
        
        <span class="hljs-keyword">return</span> patterns
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">create_remediation_plan</span>(<span class="hljs-params">self, analysis</span>):
        <span class="hljs-string">"""åˆ›å»ºä¿®å¤è®¡åˆ’"""</span>
        remediation_actions = []
        
        <span class="hljs-comment"># å¤„ç†é‡å¤é”™è¯¯</span>
        <span class="hljs-keyword">for</span> error, count <span class="hljs-keyword">in</span> analysis[<span class="hljs-string">'common_patterns'</span>][<span class="hljs-string">'recurrent_errors'</span>].items():
            <span class="hljs-keyword">if</span> count &gt; <span class="hljs-number">10</span>:  <span class="hljs-comment"># é˜ˆå€¼é…ç½®</span>
                action = self.create_error_specific_plan(error, count)
                remediation_actions.append(action)
        
        <span class="hljs-comment"># å¤„ç†è¶…æ—¶é—®é¢˜</span>
        <span class="hljs-keyword">if</span> analysis[<span class="hljs-string">'common_patterns'</span>][<span class="hljs-string">'timeout_issues'</span>]:
            remediation_actions.append({
                <span class="hljs-string">'action'</span>: <span class="hljs-string">'adjust_timeouts'</span>,
                <span class="hljs-string">'issues'</span>: analysis[<span class="hljs-string">'common_patterns'</span>][<span class="hljs-string">'timeout_issues'</span>],
                <span class="hljs-string">'recommendation'</span>: <span class="hljs-string">'Increase task time limits or optimize task performance'</span>
            })
        
        <span class="hljs-comment"># å¤„ç†èµ„æºé—®é¢˜</span>
        <span class="hljs-keyword">if</span> analysis[<span class="hljs-string">'common_patterns'</span>][<span class="hljs-string">'resource_problems'</span>]:
            remediation_actions.append({
                <span class="hljs-string">'action'</span>: <span class="hljs-string">'optimize_resources'</span>,
                <span class="hljs-string">'issues'</span>: analysis[<span class="hljs-string">'common_patterns'</span>][<span class="hljs-string">'resource_problems'</span>],
                <span class="hljs-string">'recommendation'</span>: <span class="hljs-string">'Adjust worker memory limits or optimize task memory usage'</span>
            })
        
        <span class="hljs-keyword">return</span> remediation_actions
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">execute_remediation</span>(<span class="hljs-params">self, remediation_plan</span>):
        <span class="hljs-string">"""æ‰§è¡Œä¿®å¤è®¡åˆ’"""</span>
        results = []
        
        <span class="hljs-keyword">for</span> action <span class="hljs-keyword">in</span> remediation_plan:
            <span class="hljs-keyword">try</span>:
                <span class="hljs-keyword">if</span> action[<span class="hljs-string">'action'</span>] == <span class="hljs-string">'adjust_timeouts'</span>:
                    result = self.adjust_task_timeouts(action[<span class="hljs-string">'issues'</span>])
                <span class="hljs-keyword">elif</span> action[<span class="hljs-string">'action'</span>] == <span class="hljs-string">'optimize_resources'</span>:
                    result = self.optimize_resource_allocation(action[<span class="hljs-string">'issues'</span>])
                <span class="hljs-keyword">else</span>:
                    result = {<span class="hljs-string">'status'</span>: <span class="hljs-string">'skipped'</span>, <span class="hljs-string">'reason'</span>: <span class="hljs-string">'Unknown action'</span>}
                
                results.append({
                    <span class="hljs-string">'action'</span>: action[<span class="hljs-string">'action'</span>],
                    <span class="hljs-string">'result'</span>: result
                })
                
            <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
                logger.error(<span class="hljs-string">f"Remediation action failed: <span class="hljs-subst">{e}</span>"</span>)
                results.append({
                    <span class="hljs-string">'action'</span>: action[<span class="hljs-string">'action'</span>],
                    <span class="hljs-string">'result'</span>: {<span class="hljs-string">'status'</span>: <span class="hljs-string">'failed'</span>, <span class="hljs-string">'error'</span>: <span class="hljs-built_in">str</span>(e)}
                })
        
        <span class="hljs-keyword">return</span> results
AIå†™ä»£ç python
è¿è¡Œ
</code></pre>
<h4 data-id="heading-38"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>7.2 æœ€ä½³å®è·µæ€»ç»“</h4>
<p>åŸºäºå¤šå¹´å®è·µç»éªŒï¼Œæ€»ç»“RabbitMQä¸Celeryé›†æˆçš„æœ€ä½³å®è·µï¼š</p>
<ol>
<li>
<p><strong>æ¶æ„è®¾è®¡åŸåˆ™</strong></p>
<ul>
<li>åˆç†åˆ’åˆ†é˜Ÿåˆ—ï¼Œé¿å…å•ä¸€é˜Ÿåˆ—è¿‡è½½</li>
<li>ä½¿ç”¨é€‚å½“çš„Exchangeç±»å‹æ»¡è¶³ä¸šåŠ¡éœ€æ±‚</li>
<li>å®æ–½æ­»ä¿¡é˜Ÿåˆ—æœºåˆ¶å¤„ç†å¼‚å¸¸æƒ…å†µ</li>
</ul>
</li>
<li>
<p><strong>æ€§èƒ½ä¼˜åŒ–ç­–ç•¥</strong></p>
<ul>
<li>æ ¹æ®ä»»åŠ¡ç±»å‹è°ƒæ•´Workerå¹¶å‘æ•°</li>
<li>å®æ–½æ¶ˆæ¯å‹ç¼©å‡å°‘ç½‘ç»œä¼ è¾“</li>
<li>åˆç†é…ç½®é¢„å–æ•°é‡å¹³è¡¡ååä¸å…¬å¹³æ€§</li>
</ul>
</li>
<li>
<p><strong>ç›‘æ§ä¸å‘Šè­¦</strong></p>
<ul>
<li>å»ºç«‹å®Œæ•´çš„ç›‘æ§æŒ‡æ ‡ä½“ç³»</li>
<li>è®¾ç½®åˆç†çš„å‘Šè­¦é˜ˆå€¼</li>
<li>å®æ–½è‡ªåŠ¨åŒ–æ•…éšœæ¢å¤æœºåˆ¶</li>
</ul>
</li>
<li>
<p><strong>æ•…éšœå¤„ç†</strong></p>
<ul>
<li>å»ºç«‹ç³»ç»ŸåŒ–çš„æ•…éšœæ’æŸ¥æµç¨‹</li>
<li>å®æ–½æ¶ˆæ¯ç§¯å‹è‡ªåŠ¨å¤„ç†</li>
<li>å®šæœŸåˆ†ææ­»ä¿¡é˜Ÿåˆ—è¯†åˆ«ç³»ç»Ÿé—®é¢˜</li>
</ul>
</li>
</ol>
<h3 data-id="heading-39"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>8 æ€»ç»“ä¸å±•æœ›</h3>
<p>RabbitMQä¸Celeryçš„é›†æˆä¸ºPythonåº”ç”¨æä¾›äº†ä¼ä¸šçº§çš„å¼‚æ­¥å¤„ç†èƒ½åŠ›ã€‚é€šè¿‡åˆç†çš„æ¶æ„è®¾è®¡ã€æ€§èƒ½ä¼˜åŒ–å’Œè¿ç»´ç›‘æ§ï¼Œå¯ä»¥æ„å»ºå‡ºé«˜å¯ç”¨ã€é«˜æ€§èƒ½çš„åˆ†å¸ƒå¼ç³»ç»Ÿã€‚</p>
<h4 data-id="heading-40"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>8.1 å…³é”®æŠ€æœ¯æ”¶è·</h4>
<ol>
<li><strong>æ¶ˆæ¯è·¯ç”±æœºåˆ¶</strong>ï¼šç†è§£å¹¶åˆç†åº”ç”¨ä¸åŒçš„Exchangeç±»å‹</li>
<li><strong>ä»»åŠ¡ç®¡ç†ç­–ç•¥</strong>ï¼šæŒæ¡Celeryçš„ä»»åŠ¡åˆ†å‘ã€é‡è¯•ã€ç›‘æ§æœºåˆ¶</li>
<li><strong>ç³»ç»Ÿå¯é æ€§</strong>ï¼šé€šè¿‡æŒä¹…åŒ–ã€ç¡®è®¤æœºåˆ¶ã€æ­»ä¿¡é˜Ÿåˆ—ä¿è¯æ¶ˆæ¯å¯é æ€§</li>
<li><strong>æ€§èƒ½ä¼˜åŒ–</strong>ï¼šé€šè¿‡åˆç†çš„é…ç½®å’Œç›‘æ§å®ç°ç³»ç»Ÿæ€§èƒ½æœ€å¤§åŒ–</li>
</ol>
<h4 data-id="heading-41"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>8.2 æœªæ¥å‘å±•è¶‹åŠ¿</h4>
<p>éšç€äº‘åŸç”Ÿå’Œå¾®æœåŠ¡æ¶æ„çš„æ™®åŠï¼Œæ¶ˆæ¯é˜Ÿåˆ—æŠ€æœ¯ä¹Ÿåœ¨ä¸æ–­å‘å±•ï¼š</p>
<ol>
<li><strong>Serverlessæ¶æ„é›†æˆ</strong>ï¼šä¸äº‘å‡½æ•°æ›´æ·±åº¦é›†æˆ</li>
<li><strong>AIé©±åŠ¨çš„è¿ç»´</strong>ï¼šæ™ºèƒ½ç›‘æ§å’Œè‡ªåŠ¨è°ƒä¼˜</li>
<li><strong>å¤šäº‘éƒ¨ç½²æ”¯æŒ</strong>ï¼šè·¨äº‘æ¶ˆæ¯é˜Ÿåˆ—æ¶æ„</li>
<li><strong>æ€§èƒ½è¿›ä¸€æ­¥æå‡</strong>ï¼šæ–°åè®®å’Œç®—æ³•ä¼˜åŒ–</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¦‚ä½•ä½¿ç”¨ GitHub Actions + image-syncer å®ç° Docker Hub åˆ° Azure ACR çš„è‡ªåŠ¨åŒ–é•œåƒåŒæ­¥]]></title>    <link>https://juejin.cn/post/7598947628450611227</link>    <guid>https://juejin.cn/post/7598947628450611227</guid>    <pubDate>2026-01-25T07:13:03.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7598947628450611227" data-draft-id="7598537377473527846" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¦‚ä½•ä½¿ç”¨ GitHub Actions + image-syncer å®ç° Docker Hub åˆ° Azure ACR çš„è‡ªåŠ¨åŒ–é•œåƒåŒæ­¥"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯,GitHub"/> <meta itemprop="datePublished" content="2026-01-25T07:13:03.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="newbe36524"/> <meta itemprop="url" content="https://juejin.cn/user/2682464104098654"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¦‚ä½•ä½¿ç”¨ GitHub Actions + image-syncer å®ç° Docker Hub åˆ° Azure ACR çš„è‡ªåŠ¨åŒ–é•œåƒåŒæ­¥
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2682464104098654/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    newbe36524
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-25T07:13:03.000Z" title="Sun Jan 25 2026 07:13:03 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å®ç° Docker Hub åˆ° Azure ACR çš„è‡ªåŠ¨åŒ–é•œåƒåŒæ­¥</h2>
<blockquote>
<p>æœ¬æ–‡ä»‹ç»äº†å¦‚ä½•ä½¿ç”¨ GitHub Actions å’Œ image-syncer å·¥å…·ï¼Œå®ç° Docker Hub é•œåƒåˆ° Azure Container Registry çš„è‡ªåŠ¨åŒ–åŒæ­¥ï¼Œè§£å†³äº†å›½å†…åŠéƒ¨åˆ† Azure åŒºåŸŸè®¿é—® Docker Hub é€Ÿåº¦æ…¢çš„é—®é¢˜ï¼Œæå‡äº†é•œåƒçš„å¯ç”¨æ€§å’Œ Azure ç¯å¢ƒçš„éƒ¨ç½²æ•ˆç‡ã€‚</p>
</blockquote>

<h3 data-id="heading-1">èƒŒæ™¯/å¼•è¨€</h3>
<p>HagiCode é¡¹ç›®ä½¿ç”¨ Docker é•œåƒä½œä¸ºæ ¸å¿ƒè¿è¡Œæ—¶ç»„ä»¶ï¼Œä¸»è¦é•œåƒæ‰˜ç®¡åœ¨ Docker Hubã€‚éšç€é¡¹ç›®å‘å±•å’Œ Azure ç¯å¢ƒéƒ¨ç½²éœ€æ±‚çš„å¢åŠ ï¼Œæˆ‘ä»¬é‡åˆ°äº†ä»¥ä¸‹ç—›ç‚¹ï¼š</p>
<ul>
<li>é•œåƒæ‹‰å–é€Ÿåº¦æ…¢ï¼ŒDocker Hub åœ¨å›½å†…åŠéƒ¨åˆ† Azure åŒºåŸŸè®¿é—®å—é™</li>
<li>ä¾èµ–å•ä¸€é•œåƒæºå­˜åœ¨å•ç‚¹æ•…éšœé£é™©</li>
<li>Azure ç¯å¢ƒä¸‹ä½¿ç”¨ Azure Container Registry èƒ½è·å¾—æ›´å¥½çš„ç½‘ç»œæ€§èƒ½å’Œé›†æˆä½“éªŒ</li>
</ul>
<p>ä¸ºè§£å†³è¿™äº›é—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦å»ºç«‹ä¸€ä¸ªè‡ªåŠ¨åŒ–çš„é•œåƒåŒæ­¥æœºåˆ¶ï¼Œå°† Docker Hub çš„é•œåƒå®šæœŸåŒæ­¥åˆ° Azure ACRï¼Œç¡®ä¿ç”¨æˆ·èƒ½å¤Ÿåœ¨ Azure ç¯å¢ƒä¸­è·å¾—æ›´å¿«çš„é•œåƒæ‹‰å–é€Ÿåº¦å’Œæ›´é«˜çš„å¯ç”¨æ€§ã€‚</p>
<h3 data-id="heading-2">å…³äº HagiCode</h3>
<p>æˆ‘ä»¬æ­£åœ¨å¼€å‘ HagiCodeâ€”â€”ä¸€æ¬¾ AI é©±åŠ¨çš„ä»£ç æ™ºèƒ½åŠ©æ‰‹ï¼Œè®©å¼€å‘ä½“éªŒå˜å¾—æ›´æ™ºèƒ½ã€æ›´ä¾¿æ·ã€æ›´æœ‰è¶£ã€‚</p>
<p>æ™ºèƒ½â€”â€”AI å…¨ç¨‹è¾…åŠ©ï¼Œä»æƒ³æ³•åˆ°ä»£ç ï¼Œè®©ç¼–ç æ•ˆç‡æå‡æ•°å€ã€‚ä¾¿æ·â€”â€”å¤šçº¿ç¨‹å¹¶å‘æ“ä½œï¼Œå……åˆ†åˆ©ç”¨èµ„æºï¼Œå¼€å‘æµç¨‹é¡ºç•…æ— é˜»ã€‚æœ‰è¶£â€”â€”æ¸¸æˆåŒ–æœºåˆ¶å’Œæˆå°±ç³»ç»Ÿï¼Œè®©ç¼–ç ä¸å†æ¯ç‡¥ï¼Œå……æ»¡æˆå°±æ„Ÿã€‚</p>
<p>é¡¹ç›®æ­£åœ¨å¿«é€Ÿè¿­ä»£ä¸­ï¼Œå¦‚æœä½ å¯¹æŠ€æœ¯å†™ä½œã€çŸ¥è¯†ç®¡ç†æˆ–è€… AI è¾…åŠ©å¼€å‘æ„Ÿå…´è¶£ï¼Œæ¬¢è¿æ¥ GitHub çœ‹çœ‹ã€‚</p>
<h3 data-id="heading-3">æŠ€æœ¯æ–¹æ¡ˆå¯¹æ¯”</h3>
<p>åœ¨åˆ¶å®šè§£å†³æ–¹æ¡ˆæ—¶ï¼Œæˆ‘ä»¬å¯¹æ¯”äº†å¤šç§æŠ€æœ¯æ–¹æ¡ˆï¼š</p>
<h4 data-id="heading-4">1. image-syncerï¼ˆæœ€ç»ˆé€‰æ‹©ï¼‰</h4>
<ul>
<li>å¢é‡åŒæ­¥ï¼šä»…åŒæ­¥å˜æ›´çš„é•œåƒå±‚ï¼Œæ˜¾è‘—å‡å°‘ç½‘ç»œä¼ è¾“</li>
<li>æ–­ç‚¹ç»­ä¼ ï¼šç½‘ç»œä¸­æ–­åå¯æ¢å¤åŒæ­¥</li>
<li>å¹¶å‘æ§åˆ¶ï¼šæ”¯æŒé…ç½®å¹¶å‘çº¿ç¨‹æ•°ï¼Œæå‡å¤§é•œåƒåŒæ­¥æ•ˆç‡</li>
<li>å®Œå–„çš„é”™è¯¯å¤„ç†ï¼šå†…ç½®å¤±è´¥é‡è¯•æœºåˆ¶ï¼ˆé»˜è®¤ 3 æ¬¡ï¼‰</li>
<li>è½»é‡çº§éƒ¨ç½²ï¼šå•äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œæ— ä¾èµ–</li>
<li>å¤šä»“åº“æ”¯æŒï¼šå…¼å®¹ Docker Hubã€Azure ACRã€Harbor ç­‰</li>
</ul>
<h4 data-id="heading-5">2. Docker CLI</h4>
<ul>
<li>ä¸æ”¯æŒå¢é‡åŒæ­¥ï¼šæ¯æ¬¡éƒ½éœ€è¦æ‹‰å–å®Œæ•´çš„é•œåƒå†…å®¹</li>
<li>æ•ˆç‡è¾ƒä½ï¼šç½‘ç»œä¼ è¾“é‡å¤§ï¼Œæ—¶é—´é•¿</li>
<li>ç®€å•æ˜“ç”¨ï¼šä½¿ç”¨ç†Ÿæ‚‰çš„ docker pull/push å‘½ä»¤</li>
</ul>
<h4 data-id="heading-6">3. Azure CLI</h4>
<ul>
<li>å¤æ‚åº¦é«˜ï¼šéœ€è¦é…ç½® Azure CLI è®¤è¯</li>
<li>åŠŸèƒ½é™åˆ¶ï¼šaz acr import åŠŸèƒ½ç›¸å¯¹å•ä¸€</li>
<li>åŸç”Ÿé›†æˆï¼šä¸ Azure æœåŠ¡é›†æˆè‰¯å¥½</li>
</ul>
<h3 data-id="heading-7">æ¶æ„è®¾è®¡å†³ç­–</h3>
<h4 data-id="heading-8">å†³ç­– 1ï¼šåŒæ­¥é¢‘ç‡è®¾ç½®ä¸ºæ¯æ—¥ UTC 00:00</h4>
<ul>
<li>å¹³è¡¡é•œåƒæ–°é²œåº¦å’Œèµ„æºæ¶ˆè€—</li>
<li>é¿å¼€ä¸šåŠ¡é«˜å³°æœŸï¼Œå‡å°‘å¯¹å…¶ä»–æ“ä½œçš„å½±å“</li>
<li>Docker Hub é•œåƒé€šå¸¸åœ¨æ¯æ—¥æ„å»ºåæ›´æ–°</li>
</ul>
<h4 data-id="heading-9">å†³ç­– 2ï¼šåŒæ­¥æ‰€æœ‰é•œåƒæ ‡ç­¾</h4>
<ul>
<li>ä¿æŒä¸ Docker Hub çš„å®Œå…¨ä¸€è‡´æ€§</li>
<li>ä¸ºç”¨æˆ·æä¾›çµæ´»çš„ç‰ˆæœ¬é€‰æ‹©</li>
<li>ç®€åŒ–åŒæ­¥é€»è¾‘ï¼Œé¿å…å¤æ‚çš„æ ‡ç­¾è¿‡æ»¤è§„åˆ™</li>
</ul>
<h4 data-id="heading-10">å†³ç­– 3ï¼šä½¿ç”¨ GitHub Secrets å­˜å‚¨è®¤è¯ä¿¡æ¯</h4>
<ul>
<li>GitHub Actions åŸç”Ÿæ”¯æŒï¼Œå®‰å…¨æ€§é«˜</li>
<li>é…ç½®ç®€å•ï¼Œæ˜“äºç®¡ç†å’Œç»´æŠ¤</li>
<li>æ”¯æŒä»“åº“çº§åˆ«çš„è®¿é—®æ§åˆ¶</li>
</ul>
<h3 data-id="heading-11">é£é™©è¯„ä¼°ä¸ç¼“è§£</h3>
<h4 data-id="heading-12">é£é™© 1ï¼šAzure ACR è®¤è¯ä¿¡æ¯æ³„éœ²</h4>
<ul>
<li>ä½¿ç”¨ GitHub Secrets åŠ å¯†å­˜å‚¨</li>
<li>å®šæœŸè½®æ¢ ACR å¯†ç </li>
<li>é™åˆ¶ ACR ç”¨æˆ·æƒé™ä¸ºä»…æ¨é€</li>
<li>ç›‘æ§ ACR è®¿é—®æ—¥å¿—</li>
</ul>
<h4 data-id="heading-13">é£é™© 2ï¼šåŒæ­¥å¤±è´¥å¯¼è‡´é•œåƒä¸ä¸€è‡´</h4>
<ul>
<li>image-syncer å†…ç½®å¢é‡åŒæ­¥æœºåˆ¶</li>
<li>è‡ªåŠ¨å¤±è´¥é‡è¯•ï¼ˆé»˜è®¤ 3 æ¬¡ï¼‰</li>
<li>è¯¦ç»†çš„é”™è¯¯æ—¥å¿—å’Œå¤±è´¥é€šçŸ¥</li>
<li>æ–­ç‚¹ç»­ä¼ åŠŸèƒ½</li>
</ul>
<h4 data-id="heading-14">é£é™© 3ï¼šèµ„æºæ¶ˆè€—è¿‡å¤§</h4>
<ul>
<li>å¢é‡åŒæ­¥å‡å°‘ç½‘ç»œä¼ è¾“</li>
<li>å¯é…ç½®å¹¶å‘çº¿ç¨‹æ•°ï¼ˆå½“å‰è®¾ç½®ä¸º 10ï¼‰</li>
<li>ç›‘æ§åŒæ­¥çš„é•œåƒæ•°é‡å’Œå¤§å°</li>
<li>åœ¨éé«˜å³°æ—¶æ®µè¿è¡ŒåŒæ­¥</li>
</ul>
<h3 data-id="heading-15">æ ¸å¿ƒè§£å†³æ–¹æ¡ˆ</h3>
<p>æˆ‘ä»¬é‡‡ç”¨ GitHub Actions + image-syncer çš„è‡ªåŠ¨åŒ–æ–¹æ¡ˆï¼Œå®ç°ä» Docker Hub åˆ° Azure ACR çš„é•œåƒåŒæ­¥ã€‚</p>
<h3 data-id="heading-16">å®æ–½æ­¥éª¤</h3>
<h4 data-id="heading-17">1. å‡†å¤‡é˜¶æ®µ</h4>
<ul>
<li>åœ¨ Azure Portal ä¸­åˆ›å»ºæˆ–ç¡®è®¤ Azure Container Registry</li>
<li>åˆ›å»º ACR è®¿é—®å¯†é’¥ï¼ˆç”¨æˆ·åå’Œå¯†ç ï¼‰</li>
<li>ç¡®è®¤ Docker Hub é•œåƒä»“åº“è®¿é—®æƒé™</li>
</ul>
<h4 data-id="heading-18">2. é…ç½® GitHub Secrets</h4>
<p>åœ¨ GitHub ä»“åº“è®¾ç½®ä¸­æ·»åŠ ä»¥ä¸‹ Secretsï¼š</p>
<ul>
<li>AZURE_ACR_USERNAME: Azure ACR ç”¨æˆ·å</li>
<li>AZURE_ACR_PASSWORD: Azure ACR å¯†ç </li>
</ul>
<h4 data-id="heading-19">3. åˆ›å»º GitHub Actions å·¥ä½œæµ</h4>
<p>åœ¨ .github/workflows/sync-docker-acr.yml ä¸­é…ç½®å·¥ä½œæµï¼š</p>
<ul>
<li>å®šæ—¶è§¦å‘ï¼šæ¯å¤© UTC 00:00</li>
<li>æ‰‹åŠ¨è§¦å‘ï¼šæ”¯æŒ workflow_dispatch</li>
<li>é¢å¤–è§¦å‘ï¼špublish åˆ†æ”¯æ¨é€æ—¶è§¦å‘ï¼ˆç”¨äºå¿«é€ŸåŒæ­¥ï¼‰</li>
</ul>
<h4 data-id="heading-20">4. å·¥ä½œæµæ‰§è¡Œæµç¨‹</h4>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant GH as GitHub Actions
    participant IS as image-syncer
    participant DH as Docker Hub
    participant ACR as Azure ACR

    Note over GH: è§¦å‘å·¥ä½œæµ
    GH-&gt;&gt;IS: ä¸‹è½½å¹¶æ‰§è¡Œ image-syncer
    IS-&gt;&gt;DH: è·å–é•œåƒ manifest å’Œæ ‡ç­¾åˆ—è¡¨
    DH--&gt;&gt;IS: è¿”å›é•œåƒå…ƒæ•°æ®
    IS-&gt;&gt;ACR: è·å–å·²å­˜åœ¨çš„é•œåƒä¿¡æ¯
    ACR--&gt;&gt;IS: è¿”å›ç›®æ ‡é•œåƒä¿¡æ¯
    IS-&gt;&gt;IS: å¯¹æ¯”å·®å¼‚ï¼Œè¯†åˆ«å˜æ›´çš„é•œåƒå±‚
    Note over IS: å¢é‡åŒæ­¥ï¼šä»…ä¼ è¾“å˜æ›´çš„é•œåƒå±‚
    IS-&gt;&gt;DH: æ‹‰å–å˜æ›´çš„é•œåƒå±‚
    DH--&gt;&gt;IS: è¿”å›é•œåƒå±‚å†…å®¹
    IS-&gt;&gt;ACR: æ¨é€å˜æ›´çš„é•œåƒå±‚åˆ° ACR
    ACR--&gt;&gt;IS: è¿”å›æ¨é€ç»“æœ
    IS--&gt;&gt;GH: è¿”å›åŒæ­¥ç»Ÿè®¡ä¿¡æ¯
    GH-&gt;&gt;GH: è®°å½•åŒæ­¥æ—¥å¿—å¹¶ä¸Šä¼  artifact
</code></pre>
<h3 data-id="heading-21">GitHub Actions å·¥ä½œæµå®ç°</h3>
<p>ä»¥ä¸‹æ˜¯å®é™…è¿è¡Œçš„å·¥ä½œæµé…ç½®ï¼ˆ.github/workflows/sync-docker-acr.ymlï¼‰ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">name:</span> <span class="hljs-string">Sync</span> <span class="hljs-string">Docker</span> <span class="hljs-string">Image</span> <span class="hljs-string">to</span> <span class="hljs-string">Azure</span> <span class="hljs-string">ACR</span>

<span class="hljs-attr">on:</span>
  <span class="hljs-attr">schedule:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">cron:</span> <span class="hljs-string">"0 0 * * *"</span> <span class="hljs-comment"># æ¯å¤© UTC 00:00</span>
  <span class="hljs-attr">workflow_dispatch:</span> <span class="hljs-comment"># æ‰‹åŠ¨è§¦å‘</span>
  <span class="hljs-attr">push:</span>
    <span class="hljs-attr">branches:</span> [<span class="hljs-string">publish</span>]

<span class="hljs-attr">permissions:</span>
  <span class="hljs-attr">contents:</span> <span class="hljs-string">read</span>

<span class="hljs-attr">jobs:</span>
  <span class="hljs-attr">sync:</span>
    <span class="hljs-attr">runs-on:</span> <span class="hljs-string">ubuntu-latest</span>

    <span class="hljs-attr">steps:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Checkout</span> <span class="hljs-string">code</span>
        <span class="hljs-attr">uses:</span> <span class="hljs-string">actions/checkout@v4</span>

      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Download</span> <span class="hljs-string">image-syncer</span>
        <span class="hljs-attr">run:</span> <span class="hljs-string">|
          # ä¸‹è½½ image-syncer äºŒè¿›åˆ¶æ–‡ä»¶
          wget https://github.com/AliyunContainerService/image-syncer/releases/download/v1.5.5/image-syncer-v1.5.5-linux-amd64.tar.gz
          tar -zxvf image-syncer-v1.5.5-linux-amd64.tar.gz
          chmod +x image-syncer
</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Create</span> <span class="hljs-string">auth</span> <span class="hljs-string">config</span>
        <span class="hljs-attr">run:</span> <span class="hljs-string">|
          # ç”Ÿæˆè®¤è¯é…ç½®æ–‡ä»¶ (YAML æ ¼å¼)
          cat &gt; auth.yaml &lt;&lt;EOF
          hagicode.azurecr.io:
            username: "${{ secrets.AZURE_ACR_USERNAME }}"
            password: "${{ secrets.AZURE_ACR_PASSWORD }}"
          EOF
</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Create</span> <span class="hljs-string">images</span> <span class="hljs-string">config</span>
        <span class="hljs-attr">run:</span> <span class="hljs-string">|
          # ç”Ÿæˆé•œåƒåŒæ­¥é…ç½®æ–‡ä»¶ (YAML æ ¼å¼)
          cat &gt; images.yaml &lt;&lt;EOF
          docker.io/newbe36524/hagicode: hagicode.azurecr.io/hagicode
          EOF
</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Run</span> <span class="hljs-string">image-syncer</span>
        <span class="hljs-attr">run:</span> <span class="hljs-string">|
          # æ‰§è¡ŒåŒæ­¥ (ä½¿ç”¨æ–°ç‰ˆ --auth å’Œ --images å‚æ•°)
          ./image-syncer --auth=./auth.yaml --images=./images.yaml --proc=10 --retries=3
</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Upload</span> <span class="hljs-string">logs</span>
        <span class="hljs-attr">if:</span> <span class="hljs-string">always()</span>
        <span class="hljs-attr">uses:</span> <span class="hljs-string">actions/upload-artifact@v4</span>
        <span class="hljs-attr">with:</span>
          <span class="hljs-attr">name:</span> <span class="hljs-string">sync-logs</span>
          <span class="hljs-attr">path:</span> <span class="hljs-string">image-syncer-*.log</span>
          <span class="hljs-attr">retention-days:</span> <span class="hljs-number">7</span>
</code></pre>
<h3 data-id="heading-22">é…ç½®è¯´æ˜</h3>
<h4 data-id="heading-23">1. è§¦å‘æ¡ä»¶</h4>
<ul>
<li>å®šæ—¶è§¦å‘ï¼šcron: "0 0 * * *" - æ¯å¤© UTC 00:00 æ‰§è¡Œ</li>
<li>æ‰‹åŠ¨è§¦å‘ï¼šworkflow_dispatch - å…è®¸ç”¨æˆ·åœ¨ GitHub UI æ‰‹åŠ¨è¿è¡Œ</li>
<li>æ¨é€è§¦å‘ï¼špush: branches: [publish] - å‘å¸ƒåˆ†æ”¯æ¨é€æ—¶è§¦å‘ï¼ˆç”¨äºå¿«é€ŸåŒæ­¥ï¼‰</li>
</ul>
<h4 data-id="heading-24">2. è®¤è¯é…ç½® (auth.yaml)</h4>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">hagicode.azurecr.io:</span>
  <span class="hljs-attr">username:</span> <span class="hljs-string">"$<span class="hljs-template-variable">{{ secrets.AZURE_ACR_USERNAME }}</span>"</span>
  <span class="hljs-attr">password:</span> <span class="hljs-string">"$<span class="hljs-template-variable">{{ secrets.AZURE_ACR_PASSWORD }}</span>"</span>
</code></pre>
<h4 data-id="heading-25">3. é•œåƒåŒæ­¥é…ç½®</h4>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">docker.io/newbe36524/hagicode:</span> <span class="hljs-string">hagicode.azurecr.io/hagicode</span>
</code></pre>
<p>æ­¤é…ç½®è¡¨ç¤ºå°† docker.io/newbe36524/hagicode çš„æ‰€æœ‰æ ‡ç­¾åŒæ­¥åˆ° hagicode.azurecr.io/hagicode</p>
<h4 data-id="heading-26">4. image-syncer å‚æ•°</h4>
<ul>
<li>--auth=./auth.yaml: è®¤è¯é…ç½®æ–‡ä»¶è·¯å¾„</li>
<li>--images=./images.yaml: é•œåƒåŒæ­¥é…ç½®æ–‡ä»¶è·¯å¾„</li>
<li>--proc=10: å¹¶å‘çº¿ç¨‹æ•°ä¸º 10</li>
<li>--retries=3: å¤±è´¥é‡è¯• 3 æ¬¡</li>
</ul>
<h3 data-id="heading-27">GitHub Secrets é…ç½®æ¸…å•</h3>
<p>åœ¨ GitHub ä»“åº“çš„ Settings â†’ Secrets and variables â†’ Actions ä¸­é…ç½®ï¼š</p>























<table><thead><tr><th>Secret åç§°</th><th>æè¿°</th><th>ç¤ºä¾‹å€¼</th><th>è·å–æ–¹å¼</th></tr></thead><tbody><tr><td>AZURE_ACR_USERNAME</td><td>Azure ACR ç”¨æˆ·å</td><td>hagicode</td><td>Azure Portal â†’ ACR â†’ Access keys</td></tr><tr><td>AZURE_ACR_PASSWORD</td><td>Azure ACR å¯†ç </td><td>xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx</td><td>Azure Portal â†’ ACR â†’ Access keys â†’ Password</td></tr></tbody></table>
<h3 data-id="heading-28">ä½¿ç”¨è¯´æ˜</h3>
<h4 data-id="heading-29">1. æ‰‹åŠ¨è§¦å‘åŒæ­¥</h4>
<ol>
<li>è®¿é—® GitHub ä»“åº“çš„ Actions æ ‡ç­¾é¡µ</li>
<li>é€‰æ‹© Sync Docker Image to Azure ACR å·¥ä½œæµ</li>
<li>ç‚¹å‡» Run workflow æŒ‰é’®</li>
<li>é€‰æ‹©åˆ†æ”¯å¹¶ç‚¹å‡» Run workflow ç¡®è®¤</li>
</ol>
<h4 data-id="heading-30">2. æŸ¥çœ‹åŒæ­¥æ—¥å¿—</h4>
<ol>
<li>åœ¨ Actions é¡µé¢ç‚¹å‡»å…·ä½“çš„å·¥ä½œæµè¿è¡Œè®°å½•</li>
<li>æŸ¥çœ‹å„ä¸ªæ­¥éª¤çš„æ‰§è¡Œæ—¥å¿—</li>
<li>åœ¨é¡µé¢åº•éƒ¨çš„ Artifacts åŒºåŸŸä¸‹è½½ sync-logs æ–‡ä»¶</li>
</ol>
<h4 data-id="heading-31">3. éªŒè¯åŒæ­¥ç»“æœ</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ç™»å½•åˆ° Azure ACR</span>
az acr login --name hagicode

<span class="hljs-comment"># åˆ—å‡ºé•œåƒåŠå…¶æ ‡ç­¾</span>
az acr repository show-tags --name hagicode --repository hagicode --output table
</code></pre>
<h3 data-id="heading-32">æ³¨æ„äº‹é¡¹å’Œæœ€ä½³å®è·µ</h3>
<h4 data-id="heading-33">1. å®‰å…¨å»ºè®®</h4>
<ul>
<li>å®šæœŸè½®æ¢ Azure ACR å¯†ç ï¼ˆå»ºè®®æ¯ 90 å¤©ï¼‰</li>
<li>ä½¿ç”¨ä¸“ç”¨çš„ ACR æœåŠ¡è´¦æˆ·ï¼Œé™åˆ¶æƒé™ä¸ºä»…æ¨é€</li>
<li>ç›‘æ§ ACR çš„è®¿é—®æ—¥å¿—ï¼ŒåŠæ—¶å‘ç°å¼‚å¸¸è®¿é—®</li>
<li>ä¸è¦åœ¨æ—¥å¿—ä¸­è¾“å‡ºè®¤è¯ä¿¡æ¯</li>
<li>ä¸è¦å°†è®¤è¯ä¿¡æ¯æäº¤åˆ°ä»£ç ä»“åº“</li>
</ul>
<h4 data-id="heading-34">2. æ€§èƒ½ä¼˜åŒ–</h4>
<ul>
<li>è°ƒæ•´ --proc å‚æ•°ï¼šæ ¹æ®ç½‘ç»œå¸¦å®½è°ƒæ•´å¹¶å‘æ•°ï¼ˆå»ºè®® 5-20ï¼‰</li>
<li>ç›‘æ§åŒæ­¥æ—¶é—´ï¼šå¦‚æœåŒæ­¥æ—¶é—´è¿‡é•¿ï¼Œè€ƒè™‘å‡å°‘å¹¶å‘æ•°</li>
<li>å®šæœŸæ¸…ç†æ—¥å¿—ï¼šè®¾ç½®åˆç†çš„ retention-daysï¼ˆå½“å‰ä¸º 7 å¤©ï¼‰</li>
</ul>
<h4 data-id="heading-35">3. æ•…éšœæ’æŸ¥</h4>
<h5 data-id="heading-36">é—®é¢˜ 1ï¼šè®¤è¯å¤±è´¥</h5>
<pre><code class="hljs language-vbnet" lang="vbnet"><span class="hljs-symbol">Error:</span> failed <span class="hljs-keyword">to</span> authenticate <span class="hljs-keyword">to</span> hagicode.azurecr.io
</code></pre>
<p>è§£å†³æ–¹æ¡ˆï¼š</p>
<ol>
<li>æ£€æŸ¥ GitHub Secrets æ˜¯å¦æ­£ç¡®é…ç½®</li>
<li>éªŒè¯ Azure ACR å¯†ç æ˜¯å¦è¿‡æœŸ</li>
<li>ç¡®è®¤ ACR æœåŠ¡è´¦æˆ·æƒé™æ˜¯å¦æ­£ç¡®</li>
</ol>
<h5 data-id="heading-37">é—®é¢˜ 2ï¼šç½‘ç»œè¶…æ—¶</h5>
<pre><code class="hljs language-vbscript" lang="vbscript"><span class="hljs-keyword">Error</span>: timeout waiting <span class="hljs-keyword">for</span> <span class="hljs-built_in">response</span>
</code></pre>
<p>è§£å†³æ–¹æ¡ˆï¼š</p>
<ol>
<li>æ£€æŸ¥ç½‘ç»œè¿æ¥</li>
<li>å‡å°‘å¹¶å‘çº¿ç¨‹æ•°ï¼ˆ--proc å‚æ•°ï¼‰</li>
<li>ç­‰å¾…ç½‘ç»œæ¢å¤åé‡æ–°è§¦å‘å·¥ä½œæµ</li>
</ol>
<h5 data-id="heading-38">é—®é¢˜ 3ï¼šé•œåƒåŒæ­¥ä¸å®Œæ•´</h5>
<pre><code class="hljs language-vbnet" lang="vbnet"><span class="hljs-symbol">Warning:</span> some tags failed <span class="hljs-keyword">to</span> sync
</code></pre>
<p>è§£å†³æ–¹æ¡ˆï¼š</p>
<ol>
<li>æ£€æŸ¥åŒæ­¥æ—¥å¿—ï¼Œè¯†åˆ«å¤±è´¥çš„æ ‡ç­¾</li>
<li>æ‰‹åŠ¨è§¦å‘å·¥ä½œæµé‡æ–°åŒæ­¥</li>
<li>éªŒè¯ Docker Hub æºé•œåƒæ˜¯å¦æ­£å¸¸</li>
</ol>
<h4 data-id="heading-39">4. ç›‘æ§å’Œå‘Šè­¦</h4>
<ul>
<li>å®šæœŸæ£€æŸ¥ Actions é¡µé¢ï¼Œç¡®è®¤å·¥ä½œæµè¿è¡ŒçŠ¶æ€</li>
<li>è®¾ç½® GitHub é€šçŸ¥ï¼ŒåŠæ—¶è·å–å·¥ä½œæµå¤±è´¥é€šçŸ¥</li>
<li>ç›‘æ§ Azure ACR çš„å­˜å‚¨ä½¿ç”¨æƒ…å†µ</li>
<li>å®šæœŸéªŒè¯é•œåƒæ ‡ç­¾ä¸€è‡´æ€§</li>
</ul>
<h3 data-id="heading-40">å¸¸è§é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ</h3>
<h4 data-id="heading-41">Q1: å¦‚ä½•åŒæ­¥ç‰¹å®šæ ‡ç­¾è€Œä¸æ˜¯æ‰€æœ‰æ ‡ç­¾ï¼Ÿ</h4>
<p>ä¿®æ”¹ images.yaml é…ç½®æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># ä»…åŒæ­¥ latest å’Œ v1.0 æ ‡ç­¾</span>
<span class="hljs-attr">docker.io/newbe36524/hagicode:latest:</span> <span class="hljs-string">hagicode.azurecr.io/hagicode:latest</span>
<span class="hljs-attr">docker.io/newbe36524/hagicode:v1.0:</span> <span class="hljs-string">hagicode.azurecr.io/hagicode:v1.0</span>
</code></pre>
<h4 data-id="heading-42">Q2: å¦‚ä½•åŒæ­¥å¤šä¸ªé•œåƒä»“åº“ï¼Ÿ</h4>
<p>åœ¨ images.yaml ä¸­æ·»åŠ å¤šè¡Œé…ç½®ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">docker.io/newbe36524/hagicode:</span> <span class="hljs-string">hagicode.azurecr.io/hagicode</span>
<span class="hljs-attr">docker.io/newbe36524/another-image:</span> <span class="hljs-string">hagicode.azurecr.io/another-image</span>
</code></pre>
<h4 data-id="heading-43">Q3: åŒæ­¥å¤±è´¥åå¦‚ä½•é‡è¯•ï¼Ÿ</h4>
<ul>
<li>è‡ªåŠ¨é‡è¯•ï¼šimage-syncer å†…ç½®é‡è¯•æœºåˆ¶ï¼ˆé»˜è®¤ 3 æ¬¡ï¼‰</li>
<li>æ‰‹åŠ¨é‡è¯•ï¼šåœ¨ GitHub Actions é¡µé¢ç‚¹å‡» Re-run all jobs</li>
</ul>
<h4 data-id="heading-44">Q4: å¦‚ä½•æŸ¥çœ‹åŒæ­¥çš„è¯¦ç»†è¿›åº¦ï¼Ÿ</h4>
<ul>
<li>åœ¨ Actions é¡µé¢æŸ¥çœ‹å®æ—¶æ—¥å¿—</li>
<li>ä¸‹è½½ sync-logs artifact æŸ¥çœ‹å®Œæ•´æ—¥å¿—æ–‡ä»¶</li>
<li>æ—¥å¿—æ–‡ä»¶åŒ…å«æ¯ä¸ªæ ‡ç­¾çš„åŒæ­¥çŠ¶æ€å’Œä¼ è¾“é€Ÿåº¦</li>
</ul>
<h4 data-id="heading-45">Q5: åŒæ­¥éœ€è¦å¤šé•¿æ—¶é—´ï¼Ÿ</h4>
<ul>
<li>é¦–æ¬¡å…¨é‡åŒæ­¥ï¼šæ ¹æ®é•œåƒå¤§å°ï¼Œé€šå¸¸éœ€è¦ 10-30 åˆ†é’Ÿ</li>
<li>å¢é‡åŒæ­¥ï¼šå¦‚æœé•œåƒå˜æ›´å°ï¼Œé€šå¸¸ 2-5 åˆ†é’Ÿ</li>
<li>æ—¶é—´å–å†³äºç½‘ç»œå¸¦å®½ã€é•œåƒå¤§å°å’Œå¹¶å‘è®¾ç½®</li>
</ul>
<h3 data-id="heading-46">æ‰©å±•åŠŸèƒ½å»ºè®®</h3>
<h4 data-id="heading-47">1. æ·»åŠ åŒæ­¥é€šçŸ¥</h4>
<p>åœ¨å·¥ä½œæµä¸­æ·»åŠ é€šçŸ¥æ­¥éª¤ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Notify</span> <span class="hljs-string">on</span> <span class="hljs-string">success</span>
  <span class="hljs-attr">if:</span> <span class="hljs-string">success()</span>
  <span class="hljs-attr">run:</span> <span class="hljs-string">|
    echo "Docker images synced successfully to Azure ACR"
</span></code></pre>
<h4 data-id="heading-48">2. å®ç°é•œåƒæ ‡ç­¾è¿‡æ»¤</h4>
<p>åœ¨å·¥ä½œæµä¸­æ·»åŠ æ ‡ç­¾è¿‡æ»¤é€»è¾‘ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Filter</span> <span class="hljs-string">tags</span>
  <span class="hljs-attr">run:</span> <span class="hljs-string">|
    # ä»…åŒæ­¥ä»¥ v å¼€å¤´çš„æ ‡ç­¾
    echo "docker.io/newbe36524/hagicode:v* : hagicode.azurecr.io/hagicode:v*" &gt; images.yaml
</span></code></pre>
<h4 data-id="heading-49">3. æ·»åŠ åŒæ­¥ç»Ÿè®¡æŠ¥å‘Š</h4>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Generate</span> <span class="hljs-string">report</span>
  <span class="hljs-attr">if:</span> <span class="hljs-string">always()</span>
  <span class="hljs-attr">run:</span> <span class="hljs-string">|
    echo "## Sync Report" &gt;&gt; $GITHUB_STEP_SUMMARY
    echo "- Total tags: $(grep -c 'synced' image-syncer-*.log)" &gt;&gt; $GITHUB_STEP_SUMMARY
    echo "- Sync time: ${{ steps.sync.outputs.duration }}" &gt;&gt; $GITHUB_STEP_SUMMARY
</span></code></pre>
<h3 data-id="heading-50">æ€»ç»“</h3>
<p>é€šè¿‡æœ¬æ–‡ä»‹ç»çš„æ–¹æ³•ï¼Œæˆ‘ä»¬æˆåŠŸå®ç°äº†ä» Docker Hub åˆ° Azure ACR çš„è‡ªåŠ¨åŒ–é•œåƒåŒæ­¥ã€‚è¿™ä¸ªæ–¹æ¡ˆåˆ©ç”¨ GitHub Actions çš„å®šæ—¶è§¦å‘å’Œæ‰‹åŠ¨è§¦å‘åŠŸèƒ½ï¼Œç»“åˆ image-syncer çš„å¢é‡åŒæ­¥å’Œé”™è¯¯å¤„ç†æœºåˆ¶ï¼Œç¡®ä¿äº†é•œåƒçš„åŠæ—¶åŒæ­¥å’Œä¸€è‡´æ€§ã€‚</p>
<p>æˆ‘ä»¬è¿˜è®¨è®ºäº†å®‰å…¨æœ€ä½³å®è·µã€æ€§èƒ½ä¼˜åŒ–ã€æ•…éšœæ’æŸ¥ç­‰æ–¹é¢çš„å†…å®¹ï¼Œå¸®åŠ©ç”¨æˆ·æ›´å¥½åœ°ç®¡ç†å’Œç»´æŠ¤è¿™ä¸ªåŒæ­¥æœºåˆ¶ã€‚å¸Œæœ›æœ¬æ–‡èƒ½å¤Ÿä¸ºéœ€è¦åœ¨ Azure ç¯å¢ƒä¸­éƒ¨ç½² Docker é•œåƒçš„å¼€å‘è€…æä¾›æœ‰ä»·å€¼çš„å‚è€ƒã€‚</p>
<h3 data-id="heading-51">å‚è€ƒèµ„æ–™</h3>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FHagiCode-org%2Fsite" target="_blank" title="https://github.com/HagiCode-org/site" ref="nofollow noopener noreferrer">HagiCode é¡¹ç›® GitHub ä»“åº“</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FAliyunContainerService%2Fimage-syncer" target="_blank" title="https://github.com/AliyunContainerService/image-syncer" ref="nofollow noopener noreferrer">image-syncer å®˜æ–¹æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Flearn.microsoft.com%2Fzh-cn%2Fazure%2Fcontainer-registry%2F" target="_blank" title="https://learn.microsoft.com/zh-cn/azure/container-registry/" ref="nofollow noopener noreferrer">Azure Container Registry å®˜æ–¹æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.github.com%2Fzh-cn%2Factions" target="_blank" title="https://docs.github.com/zh-cn/actions" ref="nofollow noopener noreferrer">GitHub Actions å®˜æ–¹æ–‡æ¡£</a></li>
</ul>
<hr/>
<h3 data-id="heading-52">äº’åŠ¨å¼•å¯¼</h3>
<p>æ„Ÿè°¢æ‚¨çš„é˜…è¯»,å¦‚æœæ‚¨è§‰å¾—æœ¬æ–‡æœ‰ç”¨,å¿«ç‚¹å‡»ä¸‹æ–¹ç‚¹èµæŒ‰é’®ğŸ‘,è®©æ›´å¤šçš„äººçœ‹åˆ°æœ¬æ–‡ã€‚</p>
<h3 data-id="heading-53">AI è¾…åŠ©å£°æ˜</h3>
<p>æœ¬å†…å®¹é‡‡ç”¨äººå·¥æ™ºèƒ½è¾…åŠ©åä½œ,ç»æœ¬äººå®¡æ ¸,ç¬¦åˆæœ¬äººè§‚ç‚¹ä¸ç«‹åœºã€‚</p>
<h3 data-id="heading-54">å…ƒä¿¡æ¯</h3>
<ul>
<li><strong>æœ¬æ–‡ä½œè€…:</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.newbe.pro" target="_blank" title="https://www.newbe.pro" ref="nofollow noopener noreferrer">newbe36524</a></li>
<li><strong>æœ¬æ–‡é“¾æ¥:</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fhagicode-org.github.io%2Fsite%2Fblog%2F2026%2F01%2F25%2Fhow-to-sync-docker-hub-to-azure-acr-with-github" target="_blank" title="https://hagicode-org.github.io/site/blog/2026/01/25/how-to-sync-docker-hub-to-azure-acr-with-github" ref="nofollow noopener noreferrer">hagicode-org.github.io/site/blog/2â€¦</a></li>
<li><strong>ç‰ˆæƒå£°æ˜:</strong> æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–,å‡é‡‡ç”¨ BY-NC-SA è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜å‡ºå¤„!</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Resourceå…³ç³»]]></title>    <link>https://juejin.cn/post/7598614012184969243</link>    <guid>https://juejin.cn/post/7598614012184969243</guid>    <pubDate>2026-01-25T00:42:55.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7598614012184969243" data-draft-id="7598818096729686054" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Resourceå…³ç³»"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-25T00:42:55.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‡¯ç‘å›¾"/> <meta itemprop="url" content="https://juejin.cn/user/2516151257269319"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Resourceå…³ç³»
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2516151257269319/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‡¯ç‘å›¾
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-25T00:42:55.000Z" title="Sun Jan 25 2026 00:42:55 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    5
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»13åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">IUpwindResource ä¹‹é—´çš„å…³ç³»åˆ†æ</h2>
<p>æœ¬æ–‡æ¡£è¯¦ç»†åˆ†æäº†æ‰€æœ‰ <code>IUpwindResource</code> å®ç°ç±»ä¹‹é—´çš„å…³ç³»ï¼ŒåŒ…æ‹¬ç»§æ‰¿å…³ç³»ã€åŒ…å«å…³ç³»ã€å¼•ç”¨å…³ç³»ã€åˆ†ç±»å…³ç³»ç­‰ã€‚</p>
<blockquote>
<p><strong>ç›¸å…³æ–‡æ¡£</strong>: æŸ¥çœ‹ <a href="https://link.juejin.cn?target=.%2FIUpwindResource_Complete_Reference.md" target="_blank" title="./IUpwindResource_Complete_Reference.md" ref="nofollow noopener noreferrer">IUpwindResource_Complete_Reference.md</a> äº†è§£æ¯ä¸ªå®ç°ç±»çš„è¯¦ç»†ä¿¡æ¯ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-1">1. ç»§æ‰¿å…³ç³»ï¼ˆä»£ç å±‚é¢ï¼‰</h3>
<p><strong>æ‰€æœ‰å®ç°ç±»éƒ½å®ç° <code>IUpwindResource</code> æ¥å£ï¼Œä½†å½¼æ­¤ä¹‹é—´æ²¡æœ‰ç»§æ‰¿å…³ç³»</strong>ï¼š</p>
<ul>
<li>é™¤äº† <code>WorkloadTreeStorage</code> å’Œ <code>AssetSearchKeyObject</code>ï¼Œå…¶ä»–ç±»éƒ½ç»§æ‰¿è‡ª <code>StorageObject</code></li>
<li><code>WorkloadTreeStorage</code> ç›´æ¥å®ç° <code>IUpwindResource</code>ï¼Œä¸ç»§æ‰¿ <code>StorageObject</code></li>
<li><code>AssetSearchKeyObject</code> ç»§æ‰¿è‡ª <code>StorageObject</code>ï¼Œä½†åªæ˜¯å·¥å…·ç±»ï¼Œä¸æ˜¯çœŸæ­£çš„èµ„æº</li>
</ul>
<p><strong>ç»§æ‰¿ç»“æ„</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java">StorageObject (shared-library)
â”œâ”€â”€ GraphAsset <span class="hljs-keyword">implements</span> <span class="hljs-title class_">IUpwindResource</span>
â”œâ”€â”€ Endpoint <span class="hljs-keyword">implements</span> <span class="hljs-title class_">IUpwindResource</span>
â”œâ”€â”€ Resource <span class="hljs-keyword">implements</span> <span class="hljs-title class_">IUpwindResource</span>
â”œâ”€â”€ DetectionResource <span class="hljs-keyword">implements</span> <span class="hljs-title class_">IUpwindResource</span>
â”œâ”€â”€ FindingResource <span class="hljs-keyword">implements</span> <span class="hljs-title class_">IUpwindResource</span>
â”œâ”€â”€ VulnerableResource <span class="hljs-keyword">implements</span> <span class="hljs-title class_">IUpwindResource</span>
â”œâ”€â”€ EndpointSearch <span class="hljs-keyword">implements</span> <span class="hljs-title class_">IUpwindResource</span>
â”œâ”€â”€ DetectionEndpointDetails <span class="hljs-keyword">implements</span> <span class="hljs-title class_">IUpwindResource</span>
â”œâ”€â”€ MonitoredResource <span class="hljs-keyword">implements</span> <span class="hljs-title class_">IUpwindResource</span>
â”œâ”€â”€ InventoryStorageAsset <span class="hljs-keyword">implements</span> <span class="hljs-title class_">IUpwindResource</span>
â”œâ”€â”€ InventoryNetworkAsset <span class="hljs-keyword">implements</span> <span class="hljs-title class_">IUpwindResource</span>
â”œâ”€â”€ InventoryComputeAsset <span class="hljs-keyword">implements</span> <span class="hljs-title class_">IUpwindResource</span>
â””â”€â”€ AssetSearchKeyObject <span class="hljs-keyword">implements</span> <span class="hljs-title class_">IUpwindResource</span> (å·¥å…·ç±»)

WorkloadTreeStorage <span class="hljs-keyword">implements</span> <span class="hljs-title class_">IUpwindResource</span> (ä¸ç»§æ‰¿ StorageObject)
</code></pre>
<hr/>
<h3 data-id="heading-2">2. æ•°æ®æºå’Œç”¨é€”çš„æ ¹æœ¬å·®å¼‚ï¼ˆä¸ºä»€ä¹ˆéœ€è¦åŒæ—¶å­˜åœ¨ï¼‰</h3>
<h4 data-id="heading-3">GraphAsset vs WorkloadTreeStorageï¼šä¸ºä»€ä¹ˆä¸èƒ½å¤ç”¨ï¼Ÿ</h4>
<p><strong>æ ¸å¿ƒå·®å¼‚</strong>ï¼šå®ƒä»¬ä»£è¡¨<strong>åŒä¸€ç‰©ç†èµ„æºçš„ä¸åŒç»´åº¦</strong>ï¼Œæ•°æ®æ¥æºã€ç»“æ„å’Œç”¨é€”å®Œå…¨ä¸åŒ</p>








































<table><thead><tr><th>ç»´åº¦</th><th>GraphAsset</th><th>WorkloadTreeStorage</th></tr></thead><tbody><tr><td><strong>æ•°æ®æ¥æº</strong></td><td>Graph Query API (<code>inventory-api/search</code>)</td><td>Workload API (<code>clusters/workloadViewNew</code>)</td></tr><tr><td><strong>æ•°æ®æ€§è´¨</strong></td><td>é™æ€é…ç½®ä¿¡æ¯</td><td>è¿è¡Œæ—¶æ‹“æ‰‘ä¿¡æ¯</td></tr><tr><td><strong>ä»£è¡¨å†…å®¹</strong></td><td>äº‘èµ„æºçš„é…ç½®ã€æ ‡ç­¾ã€ARNã€ç±»å‹ç­‰</td><td>é›†ç¾¤ã€å‘½åç©ºé—´ã€ç«¯ç‚¹çš„å±‚çº§å…³ç³»å’Œè¿æ¥</td></tr><tr><td><strong>æ—¶é—´ç»´åº¦</strong></td><td>é…ç½®å¿«ç…§ï¼ˆæ— æ—¶é—´èŒƒå›´ï¼‰</td><td>è¿è¡Œæ—¶çŠ¶æ€ï¼ˆéœ€è¦æ—¶é—´èŒƒå›´ <code>{from, to}</code>ï¼‰</td></tr><tr><td><strong>æ•°æ®ç»“æ„</strong></td><td>å•ä¸ªèµ„äº§å¯¹è±¡</td><td>æ ‘å½¢ç»“æ„ï¼ˆCluster â†’ Namespace â†’ Endpointï¼‰</td></tr><tr><td><strong>ä¸»è¦ç”¨é€”</strong></td><td>å±•ç¤ºèµ„äº§åŸºæœ¬ä¿¡æ¯ã€é…ç½®è¯¦æƒ…</td><td>å±•ç¤ºç½‘ç»œæ‹“æ‰‘ã€è¿æ¥å…³ç³»ã€æµé‡æ•°æ®</td></tr></tbody></table>
<p><strong>ä¸ºä»€ä¹ˆéœ€è¦åŒæ—¶å­˜åœ¨ï¼Ÿ</strong></p>
<ol>
<li>
<p><strong>äº’è¡¥çš„ä¿¡æ¯</strong>ï¼š</p>
<ul>
<li><code>GraphAsset</code> æä¾›ï¼šèµ„æºåç§°ã€ç±»å‹ã€æ ‡ç­¾ã€ARNã€åŒºåŸŸã€äº‘è´¦æˆ·ç­‰<strong>é™æ€é…ç½®ä¿¡æ¯</strong></li>
<li><code>WorkloadTreeStorage</code> æä¾›ï¼šé›†ç¾¤å±‚çº§ã€å‘½åç©ºé—´ã€ç«¯ç‚¹è¿æ¥ã€ç½‘ç»œæµé‡ç­‰<strong>è¿è¡Œæ—¶æ‹“æ‰‘ä¿¡æ¯</strong></li>
</ul>
</li>
<li>
<p><strong>ä¸åŒçš„ä½¿ç”¨åœºæ™¯</strong>ï¼š</p>
<ul>
<li>æŸ¥çœ‹èµ„æºé…ç½® â†’ ä½¿ç”¨ <code>GraphAsset</code></li>
<li>æŸ¥çœ‹ç½‘ç»œæ‹“æ‰‘ â†’ ä½¿ç”¨ <code>WorkloadTreeStorage</code></li>
<li>åœ¨ <code>AssetDetailsSidePane</code> ä¸­ï¼Œä¸¤è€…åŒæ—¶ä½¿ç”¨ï¼š
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// GraphAsset ç”¨äºå±•ç¤ºåŸºæœ¬ä¿¡æ¯</span>
&lt;<span class="hljs-title class_">ResourceViewHeader</span> resource={asset} graphAsset={asset} /&gt;

<span class="hljs-comment">// WorkloadTreeStorage ç”¨äºå±•ç¤ºç½‘ç»œæ‹“æ‰‘æ ‡ç­¾é¡µ</span>
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ResourceOverviewTabs</span> <span class="hljs-attr">treeStorage</span>=<span class="hljs-string">{treeStorage}</span> <span class="hljs-attr">resource</span>=<span class="hljs-string">{asset}</span> /&gt;</span></span>
</code></pre>
</li>
</ul>
</li>
<li>
<p><strong>æ•°æ®è·å–æµç¨‹</strong>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// 1. å…ˆè·å– GraphAssetï¼ˆæ€»æ˜¯å°è¯•è·å–ï¼‰</span>
<span class="hljs-keyword">const</span> [asset] = <span class="hljs-title function_">useGraphAssetByIdOrRefId</span>(orgId, graphId, refId);

<span class="hljs-comment">// 2. æ ¹æ® GraphAsset çš„å±æ€§å†³å®šæ˜¯å¦è·å– WorkloadTreeStorage</span>
<span class="hljs-keyword">if</span> (asset?.<span class="hljs-title function_">getEndpointId</span>()) â†’ æŒ‰ endpoint è·å– <span class="hljs-title class_">WorkloadTreeStorage</span>
<span class="hljs-keyword">if</span> (asset?.<span class="hljs-title function_">isCluster</span>() &amp;&amp; asset?.<span class="hljs-title function_">getK8sClusterId</span>()) â†’ æŒ‰ cluster è·å–
<span class="hljs-keyword">if</span> (asset?.<span class="hljs-title function_">getResourceId</span>() || asset?.<span class="hljs-title function_">getIdentifier</span>()) â†’ æŒ‰ resource è·å–

<span class="hljs-comment">// 3. ä¸¤è€…å¯ä»¥åŒæ—¶å­˜åœ¨ï¼Œæä¾›ä¸åŒç»´åº¦çš„ä¿¡æ¯</span>
</code></pre>
</li>
</ol>
<p><strong>ç»“è®º</strong>ï¼šä¸èƒ½å¤ç”¨ï¼Œå› ä¸ºå®ƒä»¬çš„æ•°æ®æ¥æºã€ç»“æ„å’Œç”¨é€”å®Œå…¨ä¸åŒï¼Œæ˜¯äº’è¡¥å…³ç³»è€Œéæ›¿ä»£å…³ç³»ã€‚</p>
<hr/>
<h3 data-id="heading-4">3. åŒ…å«å…³ç³» vs å¼•ç”¨å…³ç³»ï¼ˆå…³é”®åŒºåˆ«ï¼‰</h3>
<h4 data-id="heading-5">WorkloadTreeStorage âŠƒ Endpointï¼ˆçœŸæ­£çš„åŒ…å«å…³ç³»ï¼Œä¸€å¯¹å¤šï¼‰</h4>
<p><strong>å…³ç³»</strong>ï¼š<code>WorkloadTreeStorage</code> <strong>çœŸæ­£åŒ…å«</strong> <code>Endpoint</code> å¯¹è±¡ï¼Œä¸”æ˜¯<strong>ä¸€å¯¹å¤š</strong>å…³ç³»</p>
<ul>
<li><code>WorkloadTreeStorage</code> å†…éƒ¨ç»´æŠ¤ <code>endpointIndex: Map&lt;string, Endpoint&gt;</code></li>
<li><code>Endpoint</code> å¯¹è±¡å­˜å‚¨åœ¨ <code>WorkloadTreeStorage</code> å†…éƒ¨</li>
<li><code>Endpoint</code> æ˜¯ <code>WorkloadTreeStorage</code> æ ‘ç»“æ„ä¸­çš„å¶å­èŠ‚ç‚¹</li>
<li>ä¸€ä¸ª <code>WorkloadTreeStorage</code> å¯ä»¥åŒ…å«å¤šä¸ª <code>Endpoint</code></li>
<li><code>Endpoint</code> é€šè¿‡ <code>WorkloadTreeStorage.putEndpointsObjects()</code> æ–¹æ³•æ·»åŠ </li>
</ul>
<p><strong>ä»£ç è¯æ®</strong>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">WorkloadTreeStorage</span> {
  <span class="hljs-keyword">private</span> <span class="hljs-attr">endpointIndex</span>: <span class="hljs-title class_">Map</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-title class_">Endpoint</span>&gt;;  <span class="hljs-comment">// çœŸæ­£å­˜å‚¨ Endpoint å¯¹è±¡</span>
  <span class="hljs-keyword">public</span> <span class="hljs-title function_">putEndpointsObjects</span>(<span class="hljs-params">objects: Endpoint[]</span>) { 
    <span class="hljs-comment">// å°† Endpoint å¯¹è±¡æ·»åŠ åˆ°å†…éƒ¨ Map</span>
  }
  <span class="hljs-keyword">public</span> <span class="hljs-title function_">getEndpointById</span>(<span class="hljs-attr">id</span>: <span class="hljs-built_in">string</span>): <span class="hljs-title class_">Endpoint</span> | <span class="hljs-literal">undefined</span> { 
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">endpointIndex</span>.<span class="hljs-title function_">get</span>(id);  <span class="hljs-comment">// ç›´æ¥ä»å†…éƒ¨ Map è·å–</span>
  }
  <span class="hljs-keyword">public</span> <span class="hljs-title function_">getAllEndpoints</span>(): <span class="hljs-title class_">Endpoint</span>[] {
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">endpointIndex</span>.<span class="hljs-title function_">values</span>());  <span class="hljs-comment">// è·å–æ‰€æœ‰ Endpoint</span>
  }
}
</code></pre>
<h4 data-id="heading-6">GraphAsset â†’ Endpointï¼ˆä¸€å¯¹ä¸€å…³ç³»ï¼Œåªæ˜¯ ID å¼•ç”¨ï¼‰</h4>
<p><strong>å…³ç³»</strong>ï¼š<code>GraphAsset</code> <strong>ä¸åŒ…å«</strong> <code>Endpoint</code>ï¼Œåªæ˜¯é€šè¿‡ <code>endpointId</code> <strong>å¼•ç”¨</strong>ï¼Œä¸”æ˜¯<strong>ä¸€å¯¹ä¸€</strong>å…³ç³»</p>
<ul>
<li><code>GraphAsset</code> æœ‰ä¸€ä¸ª <code>private endpointId: string</code> å­—æ®µï¼ˆåªæœ‰ä¸€ä¸ªï¼Œä¸æ˜¯æ•°ç»„ï¼‰</li>
<li>è¿™åªæ˜¯ä¸€ä¸ª ID å­—ç¬¦ä¸²ï¼Œä¸æ˜¯ <code>Endpoint</code> å¯¹è±¡</li>
<li><strong>ä¸€å¯¹ä¸€å…³ç³»</strong>ï¼šä¸€ä¸ª <code>GraphAsset</code> æœ€å¤šå¯¹åº”ä¸€ä¸ª <code>Endpoint</code></li>
<li>éœ€è¦é€šè¿‡ <code>endpointId</code> åœ¨ <code>WorkloadDataModel.unfilteredEndpointsStorage</code> ä¸­æŸ¥æ‰¾å¯¹åº”çš„ <code>Endpoint</code></li>
<li><code>GraphAsset</code> å’Œ <code>Endpoint</code> æ˜¯<strong>ç‹¬ç«‹çš„å¯¹è±¡</strong>ï¼Œé€šè¿‡ ID å…³è”</li>
</ul>
<p><strong>ä¸ºä»€ä¹ˆ GraphAsset å’Œ Endpoint æ˜¯ä¸€å¯¹ä¸€ï¼Œè€Œ WorkloadTreeStorage å’Œ Endpoint æ˜¯ä¸€å¯¹å¤šï¼Ÿ</strong></p>
<ul>
<li><strong>GraphAsset</strong>ï¼šä»£è¡¨<strong>å•ä¸ªèµ„æº</strong>ï¼ˆå¦‚ä¸€ä¸ª EC2 å®ä¾‹ã€ä¸€ä¸ª S3 Bucketï¼‰ï¼Œè¿™ä¸ªèµ„æºå¯èƒ½å¯¹åº”ä¸€ä¸ªè¿è¡Œæ—¶ç«¯ç‚¹</li>
<li><strong>WorkloadTreeStorage</strong>ï¼šä»£è¡¨<strong>æ ‘å½¢ç»“æ„</strong>ï¼ˆCluster â†’ Namespace â†’ Endpointï¼‰ï¼Œä¸€ä¸ªæ ‘èŠ‚ç‚¹å¯ä»¥åŒ…å«<strong>å¤šä¸ª</strong>ç«¯ç‚¹
<ul>
<li>ä¾‹å¦‚ï¼šä¸€ä¸ª Namespace èŠ‚ç‚¹å¯èƒ½åŒ…å«å¤šä¸ª Podï¼ˆæ¯ä¸ª Pod æ˜¯ä¸€ä¸ª Endpointï¼‰</li>
<li>ä¾‹å¦‚ï¼šä¸€ä¸ª Cluster èŠ‚ç‚¹åŒ…å«å¤šä¸ª Namespaceï¼Œæ¯ä¸ª Namespace åˆåŒ…å«å¤šä¸ª Endpoint</li>
</ul>
</li>
</ul>
<p><strong>ä»£ç è¯æ®</strong>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">GraphAsset</span> {
  <span class="hljs-keyword">private</span> <span class="hljs-attr">endpointId</span>: <span class="hljs-built_in">string</span>;  <span class="hljs-comment">// åªæœ‰ä¸€ä¸ª endpointIdï¼Œä¸€å¯¹ä¸€å…³ç³»</span>
  
  <span class="hljs-title function_">getEndpointId</span>(): <span class="hljs-built_in">string</span> | <span class="hljs-literal">undefined</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">endpointId</span>;
  }
  
  <span class="hljs-comment">// éœ€è¦é€šè¿‡ ID åœ¨å¤–éƒ¨ storage ä¸­æŸ¥æ‰¾</span>
  <span class="hljs-comment">// const endpoint = workloadDataModel.unfilteredEndpointsStorage.getObjectByID(endpointId);</span>
}
</code></pre>
<p><strong>å…³é”®åŒºåˆ«</strong>ï¼š</p>
<ul>
<li><strong>WorkloadTreeStorage âŠƒ Endpoint</strong>ï¼šçœŸæ­£çš„åŒ…å«å…³ç³»ï¼Œ<strong>ä¸€å¯¹å¤š</strong>ï¼Œ<code>Endpoint</code> å¯¹è±¡å­˜å‚¨åœ¨ <code>WorkloadTreeStorage</code> å†…éƒ¨</li>
<li><strong>GraphAsset â†’ Endpoint</strong>ï¼šåªæ˜¯å¼•ç”¨å…³ç³»ï¼Œ<strong>ä¸€å¯¹ä¸€</strong>ï¼Œ<code>GraphAsset</code> åªå­˜å‚¨ä¸€ä¸ª <code>endpointId</code>ï¼Œéœ€è¦é€šè¿‡ ID æŸ¥æ‰¾</li>
</ul>
<hr/>
<h3 data-id="heading-7">4. åˆ†ç±»å…³ç³»ï¼ˆåŒä¸€æ¦‚å¿µçš„ä¸åŒç±»å‹ï¼‰</h3>
<h4 data-id="heading-8">Inventory èµ„äº§åˆ†ç±»ï¼ˆè”åˆç±»å‹ï¼Œäº’æ–¥ï¼‰</h4>
<p><strong>å…³ç³»</strong>ï¼šä¸‰ç§ Inventory èµ„äº§æ˜¯åŒä¸€æ¦‚å¿µï¼ˆInventory Assetï¼‰çš„ä¸åŒç±»å‹ï¼Œäº’æ–¥</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">InventoryAsset</span> = 
  | <span class="hljs-title class_">InventoryStorageAsset</span>    <span class="hljs-comment">// å­˜å‚¨èµ„äº§ï¼ˆS3, GCS ç­‰ï¼‰</span>
  | <span class="hljs-title class_">InventoryNetworkAsset</span>    <span class="hljs-comment">// ç½‘ç»œèµ„äº§ï¼ˆSecurity Groups, Firewalls ç­‰ï¼‰</span>
  | <span class="hljs-title class_">InventoryComputeAsset</span>    <span class="hljs-comment">// è®¡ç®—èµ„äº§ï¼ˆEC2, VMs ç­‰ï¼‰</span>
</code></pre>
<ul>
<li>å®ƒä»¬éƒ½æ¥è‡ª Inventory APIï¼Œä½†æŒ‰èµ„äº§ç±»å‹åˆ†ç±»</li>
<li>ä¸€ä¸ªèµ„æºåªèƒ½æ˜¯å…¶ä¸­ä¸€ç§ç±»å‹ï¼Œä¸èƒ½åŒæ—¶æ˜¯å¤šç§</li>
<li>å­˜å‚¨åœ¨ <code>InventoryModel.storages</code> çš„ä¸åŒ storage ä¸­</li>
</ul>
<p><strong>ç°å®ä¸–ç•Œä¾‹å­</strong>ï¼š</p>
<ul>
<li><strong>InventoryStorageAsset</strong>: AWS S3 Bucket <code>my-company-data-bucket</code></li>
<li><strong>InventoryNetworkAsset</strong>: AWS Security Group <code>sg-0123456789abcdef0</code></li>
<li><strong>InventoryComputeAsset</strong>: EC2 Instance <code>i-1234567890abcdef0</code></li>
</ul>
<h4 data-id="heading-9">å®‰å…¨ç›¸å…³èµ„æºåˆ†ç±»ï¼ˆä¸åŒæ•°æ®æºï¼Œå¯èƒ½é‡å ï¼‰</h4>
<p><strong>å…³ç³»</strong>ï¼šè¿™äº›ç±»éƒ½ä»£è¡¨"èµ„æº"æ¦‚å¿µï¼Œä½†æ¥è‡ªä¸åŒçš„æ•°æ®æºå’Œç”¨é€”ï¼Œ<strong>å¯èƒ½æŒ‡å‘åŒä¸€ä¸ªç‰©ç†èµ„æº</strong></p>
<ul>
<li><strong>Resource</strong>ï¼šæ–°æ£€æµ‹ç³»ç»Ÿä¸­çš„èµ„æºï¼ˆæ¥è‡ª <code>detections</code> APIï¼‰</li>
<li><strong>DetectionResource</strong>ï¼šæ£€æµ‹/å¨èƒèµ„æºï¼ˆæ¥è‡ª <code>detections</code> APIï¼Œæ—§ç³»ç»Ÿï¼‰</li>
<li><strong>FindingResource</strong>ï¼šPosture Findings èµ„æºï¼ˆæ¥è‡ª <code>posture/findings</code> APIï¼‰</li>
<li><strong>VulnerableResource</strong>ï¼šæ¼æ´èµ„æºï¼ˆæ¥è‡ª <code>vulnerabilities</code> APIï¼‰</li>
</ul>
<p><strong>å¯èƒ½çš„å…³ç³»</strong>ï¼š</p>
<ul>
<li>åŒä¸€ä¸ªç‰©ç†èµ„æºï¼ˆå¦‚ä¸€ä¸ª EC2 å®ä¾‹ï¼‰å¯èƒ½åŒæ—¶æœ‰ï¼š
<ul>
<li><code>FindingResource</code>ï¼ˆæœ‰é…ç½®é—®é¢˜ï¼‰</li>
<li><code>DetectionResource</code>ï¼ˆæœ‰å¨èƒæ£€æµ‹ï¼‰</li>
<li><code>VulnerableResource</code>ï¼ˆæœ‰æ¼æ´ï¼‰</li>
</ul>
</li>
<li>å®ƒä»¬é€šè¿‡ <code>resourceId</code>ã€<code>endpointId</code> ç­‰å­—æ®µå…³è”åˆ°åŒä¸€ä¸ªèµ„æº</li>
<li><code>FindingResource</code> æœ‰ <code>endpointId</code> å’Œ <code>endpointRefId</code> å­—æ®µï¼Œå¯ä»¥å…³è”åˆ° <code>Endpoint</code></li>
</ul>
<p><strong>ç°å®ä¸–ç•Œä¾‹å­</strong>ï¼š</p>
<ul>
<li>åŒä¸€ä¸ª EC2 å®ä¾‹ <code>i-1234567890abcdef0</code> å¯èƒ½åŒæ—¶æœ‰ï¼š
<ul>
<li><code>FindingResource</code>: Security Group é…ç½®é—®é¢˜</li>
<li><code>DetectionResource</code>: æ£€æµ‹åˆ°å¼‚å¸¸ç½‘ç»œæ´»åŠ¨</li>
<li><code>VulnerableResource</code>: è¿è¡Œæœ‰æ¼æ´çš„ Docker é•œåƒ</li>
</ul>
</li>
</ul>
<hr/>
<h3 data-id="heading-10">5. å…³è”å…³ç³»ï¼ˆé€šè¿‡ ID å¼•ç”¨ï¼Œä¸åŒ…å«å¯¹è±¡ï¼‰</h3>
<h4 data-id="heading-11">FindingResource â†’ Endpointï¼ˆé€šè¿‡ ID å¼•ç”¨ï¼‰</h4>
<p><strong>å…³ç³»</strong>ï¼š<code>FindingResource</code> é€šè¿‡ <code>endpointId</code> å’Œ <code>endpointRefId</code> <strong>å¼•ç”¨</strong> <code>Endpoint</code>ï¼Œä½†ä¸åŒ…å«å®ƒ</p>
<p><strong>endpointId vs endpointRefId çš„åŒºåˆ«</strong>ï¼š</p>























<table><thead><tr><th>å­—æ®µ</th><th>ç±»å‹</th><th>å«ä¹‰</th><th>ç”¨é€”</th></tr></thead><tbody><tr><td><strong>endpointId</strong></td><td><code>string</code></td><td>Endpoint åœ¨ Workload ç³»ç»Ÿä¸­çš„ ID</td><td>ç›´æ¥åœ¨ <code>WorkloadDataModel.unfilteredEndpointsStorage</code> ä¸­æŸ¥æ‰¾ Endpoint å¯¹è±¡</td></tr><tr><td><strong>endpointRefId</strong></td><td><code>string</code></td><td>Endpoint çš„ refIdï¼ˆresourceIdï¼‰ï¼Œç”¨äºåœ¨ Graph æ•°æ®åº“ä¸­æŸ¥æ‰¾</td><td>éœ€è¦é€šè¿‡ <code>getEndpointIdByRefId</code> API è½¬æ¢ä¸º <code>endpointId</code>ï¼Œç„¶åå†æŸ¥æ‰¾ Endpoint</td></tr></tbody></table>
<p><strong>è½¬æ¢æµç¨‹</strong>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// å¦‚æœæœ‰ endpointIdï¼Œç›´æ¥ä½¿ç”¨</span>
<span class="hljs-keyword">if</span> (findingResource.<span class="hljs-title function_">getEndpointId</span>()) {
  <span class="hljs-keyword">const</span> endpoint = workloadDataModel.<span class="hljs-property">unfilteredEndpointsStorage</span>.<span class="hljs-title function_">getObjectByID</span>(
    findingResource.<span class="hljs-title function_">getEndpointId</span>()
  );
}

<span class="hljs-comment">// å¦‚æœåªæœ‰ endpointRefIdï¼Œéœ€è¦å…ˆè½¬æ¢ä¸º endpointId</span>
<span class="hljs-keyword">if</span> (!endpointId &amp;&amp; findingResource.<span class="hljs-title function_">getEndpointRefId</span>()) {
  <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getEndpointIdByRefId</span>(orgId, findingResource.<span class="hljs-title function_">getEndpointRefId</span>());
  <span class="hljs-keyword">const</span> endpointId = response.<span class="hljs-property">id</span>;
  <span class="hljs-keyword">const</span> endpoint = workloadDataModel.<span class="hljs-property">unfilteredEndpointsStorage</span>.<span class="hljs-title function_">getObjectByID</span>(endpointId);
}
</code></pre>
<p><strong>å…·ä½“å«ä¹‰</strong>ï¼š</p>
<ul>
<li><code>FindingResource</code> æœ‰ <code>endpointId?: string</code> å’Œ <code>endpointRefId?: string</code> å­—æ®µ</li>
<li>è¿™äº›å­—æ®µåªæ˜¯ ID å­—ç¬¦ä¸²ï¼Œä¸æ˜¯ <code>Endpoint</code> å¯¹è±¡</li>
<li>å«ä¹‰ï¼šè¿™ä¸ª Finding æ˜¯é’ˆå¯¹æŸä¸ª Endpoint çš„é…ç½®é—®é¢˜</li>
<li>éœ€è¦é€šè¿‡ ID åœ¨ <code>WorkloadDataModel.unfilteredEndpointsStorage</code> ä¸­æŸ¥æ‰¾å¯¹åº”çš„ <code>Endpoint</code></li>
</ul>
<p><strong>ä½¿ç”¨åœºæ™¯</strong>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// FindingResource è¡¨ç¤ºä¸€ä¸ªé…ç½®é—®é¢˜</span>
<span class="hljs-keyword">const</span> finding = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FindingResource</span>({
  <span class="hljs-attr">id</span>: <span class="hljs-string">"finding-123"</span>,
  <span class="hljs-attr">endpointId</span>: <span class="hljs-string">"endpoint-456"</span>,  <span class="hljs-comment">// å¼•ç”¨æŸä¸ª Endpoint</span>
  <span class="hljs-attr">type</span>: <span class="hljs-variable constant_">FINDING_RESOURCE_TYPES</span>.<span class="hljs-property">AWS_S3_BUCKET</span>,
  <span class="hljs-comment">// ...</span>
});

<span class="hljs-comment">// éœ€è¦é€šè¿‡ ID æŸ¥æ‰¾å¯¹åº”çš„ Endpoint</span>
<span class="hljs-keyword">const</span> endpoint = workloadDataModel.<span class="hljs-property">unfilteredEndpointsStorage</span>.<span class="hljs-title function_">getObjectByID</span>(
  finding.<span class="hljs-title function_">getEndpointId</span>()
);

<span class="hljs-comment">// ç°åœ¨å¯ä»¥åŒæ—¶ä½¿ç”¨ FindingResource å’Œ Endpoint</span>
<span class="hljs-comment">// FindingResource æä¾›é…ç½®é—®é¢˜ä¿¡æ¯</span>
<span class="hljs-comment">// Endpoint æä¾›è¿è¡Œæ—¶ä¿¡æ¯</span>
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆéœ€è¦è¿™ç§å…³è”ï¼Ÿ</strong></p>
<ul>
<li><code>FindingResource</code> æ¥è‡ª Posture Findings APIï¼Œè¡¨ç¤º<strong>é…ç½®é—®é¢˜</strong></li>
<li><code>Endpoint</code> æ¥è‡ª Workload APIï¼Œè¡¨ç¤º<strong>è¿è¡Œæ—¶ç«¯ç‚¹</strong></li>
<li>åŒä¸€ä¸ªç‰©ç†èµ„æºå¯èƒ½æ—¢æœ‰é…ç½®é—®é¢˜ï¼ˆFindingResourceï¼‰ï¼Œåˆæœ‰è¿è¡Œæ—¶ä¿¡æ¯ï¼ˆEndpointï¼‰</li>
<li>é€šè¿‡ <code>endpointId</code> å…³è”ï¼Œå¯ä»¥åŒæ—¶å±•ç¤ºé…ç½®é—®é¢˜å’Œè¿è¡Œæ—¶çŠ¶æ€</li>
</ul>
<h4 data-id="heading-12">Resource â†’ GraphAssetï¼ˆé€šè¿‡ refId/resourceId å¼•ç”¨ï¼‰</h4>
<p><strong>å…³ç³»</strong>ï¼š<code>Resource</code> é€šè¿‡ <code>refId</code> å’Œ <code>resourceId</code> <strong>å¼•ç”¨</strong> <code>GraphAsset</code>ï¼Œè¡¨ç¤ºåŒä¸€ä¸ªç‰©ç†èµ„æº</p>
<p><strong>å…·ä½“å«ä¹‰</strong>ï¼š</p>
<ul>
<li><code>Resource</code> æœ‰ <code>refId?: string</code> å’Œ <code>resourceId?: string</code> å­—æ®µ</li>
<li>è¿™äº›å­—æ®µæŒ‡å‘åŒä¸€ä¸ª <code>GraphAsset</code> çš„ ID æˆ– refId</li>
<li>å«ä¹‰ï¼š<code>Resource</code>ï¼ˆæ¥è‡ªæ–°æ£€æµ‹ç³»ç»Ÿï¼‰å’Œ <code>GraphAsset</code>ï¼ˆæ¥è‡ª Graph æ•°æ®åº“ï¼‰ä»£è¡¨åŒä¸€ä¸ªç‰©ç†èµ„æº</li>
</ul>
<p><strong>ä½¿ç”¨åœºæ™¯</strong>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// åœ¨ AssetDetailsSidePane ä¸­ï¼Œä» GraphAsset åˆ›å»º Resource</span>
<span class="hljs-keyword">const</span> resource = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Resource</span>({
  <span class="hljs-attr">id</span>: asset?.<span class="hljs-title function_">getId</span>(),              <span class="hljs-comment">// ä½¿ç”¨ GraphAsset çš„ ID</span>
  <span class="hljs-attr">resourceName</span>: asset?.<span class="hljs-title function_">getName</span>(),  <span class="hljs-comment">// ä½¿ç”¨ GraphAsset çš„åç§°</span>
  <span class="hljs-attr">refId</span>: asset?.<span class="hljs-title function_">getRefId</span>(),        <span class="hljs-comment">// å¼•ç”¨ GraphAsset çš„ refId</span>
  <span class="hljs-attr">cloudProvider</span>: asset?.<span class="hljs-title function_">getCloudProvider</span>(),
  <span class="hljs-attr">region</span>: asset?.<span class="hljs-title function_">getRegion</span>(),
  <span class="hljs-comment">// ...</span>
});

<span class="hljs-comment">// Resource å’Œ GraphAsset æŒ‡å‘åŒä¸€ä¸ªç‰©ç†èµ„æº</span>
<span class="hljs-comment">// Resource æä¾›æ£€æµ‹ç›¸å…³çš„ä¿¡æ¯</span>
<span class="hljs-comment">// GraphAsset æä¾›é…ç½®ä¿¡æ¯</span>
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆéœ€è¦è¿™ç§å…³è”ï¼Ÿ</strong></p>
<ul>
<li><code>Resource</code> æ¥è‡ªæ–°æ£€æµ‹ç³»ç»Ÿï¼ˆ<code>detections</code> APIï¼‰ï¼Œè¡¨ç¤º<strong>æ£€æµ‹åˆ°çš„èµ„æº</strong></li>
<li><code>GraphAsset</code> æ¥è‡ª Graph æ•°æ®åº“ï¼Œè¡¨ç¤º<strong>é…ç½®ä¸­çš„èµ„æº</strong></li>
<li>åŒä¸€ä¸ªç‰©ç†èµ„æºå¯èƒ½åŒæ—¶æœ‰ï¼š
<ul>
<li>é…ç½®ä¿¡æ¯ï¼ˆGraphAssetï¼‰</li>
<li>æ£€æµ‹ä¿¡æ¯ï¼ˆResourceï¼‰</li>
</ul>
</li>
<li>é€šè¿‡ <code>refId</code> å…³è”ï¼Œå¯ä»¥åŒæ—¶å±•ç¤ºé…ç½®å’Œæ£€æµ‹ä¿¡æ¯</li>
</ul>
<h4 data-id="heading-13">GraphAsset â†’ Endpointï¼ˆé€šè¿‡ endpointId å¼•ç”¨ï¼‰</h4>
<p><strong>å…³ç³»</strong>ï¼š<code>GraphAsset</code> é€šè¿‡ <code>endpointId</code> <strong>å¼•ç”¨</strong> <code>Endpoint</code>ï¼Œè¡¨ç¤ºé…ç½®èµ„æºå¯èƒ½å…³è”åˆ°è¿è¡Œæ—¶ç«¯ç‚¹</p>
<p><strong>å…·ä½“å«ä¹‰</strong>ï¼š</p>
<ul>
<li><code>GraphAsset</code> æœ‰ <code>private endpointId: string</code> å­—æ®µ</li>
<li>è¿™åªæ˜¯ä¸€ä¸ª ID å­—ç¬¦ä¸²ï¼Œä¸æ˜¯ <code>Endpoint</code> å¯¹è±¡</li>
<li>å«ä¹‰ï¼šè¿™ä¸ªé…ç½®èµ„æºï¼ˆGraphAssetï¼‰å¯èƒ½å…³è”åˆ°ä¸€ä¸ªè¿è¡Œæ—¶ç«¯ç‚¹ï¼ˆEndpointï¼‰</li>
<li>éœ€è¦é€šè¿‡ <code>endpointId</code> åœ¨ <code>WorkloadDataModel.unfilteredEndpointsStorage</code> ä¸­æŸ¥æ‰¾å¯¹åº”çš„ <code>Endpoint</code></li>
</ul>
<p><strong>ä½¿ç”¨åœºæ™¯</strong>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// GraphAsset è¡¨ç¤ºé…ç½®ä¸­çš„èµ„æº</span>
<span class="hljs-keyword">const</span> asset = <span class="hljs-keyword">new</span> <span class="hljs-title class_">GraphAsset</span>({
  <span class="hljs-attr">id</span>: <span class="hljs-string">"asset-123"</span>,
  <span class="hljs-attr">label</span>: <span class="hljs-string">"aws_ec2_instance"</span>,
  <span class="hljs-attr">endpointId</span>: <span class="hljs-string">"endpoint-456"</span>,  <span class="hljs-comment">// å¼•ç”¨æŸä¸ª Endpoint</span>
  <span class="hljs-comment">// ...</span>
});

<span class="hljs-comment">// éœ€è¦é€šè¿‡ ID æŸ¥æ‰¾å¯¹åº”çš„ Endpoint</span>
<span class="hljs-keyword">const</span> endpoint = workloadDataModel.<span class="hljs-property">unfilteredEndpointsStorage</span>.<span class="hljs-title function_">getObjectByID</span>(
  asset.<span class="hljs-title function_">getEndpointId</span>()
);

<span class="hljs-comment">// ç°åœ¨å¯ä»¥åŒæ—¶ä½¿ç”¨ GraphAsset å’Œ Endpoint</span>
<span class="hljs-comment">// GraphAsset æä¾›é…ç½®ä¿¡æ¯</span>
<span class="hljs-comment">// Endpoint æä¾›è¿è¡Œæ—¶ä¿¡æ¯</span>
</code></pre>
<p><strong>å…³è”å…³ç³»æ€»ç»“</strong>ï¼š</p>





























<table><thead><tr><th>å…³è”ç±»å‹</th><th>å…³ç³»</th><th>å«ä¹‰</th><th>æŸ¥æ‰¾æ–¹å¼</th></tr></thead><tbody><tr><td><strong>FindingResource â†’ Endpoint</strong></td><td>ID å¼•ç”¨</td><td>Finding é’ˆå¯¹æŸä¸ª Endpoint</td><td><code>workloadDataModel.unfilteredEndpointsStorage.getObjectByID(endpointId)</code></td></tr><tr><td><strong>Resource â†’ GraphAsset</strong></td><td>ID/refId å¼•ç”¨</td><td>åŒä¸€ç‰©ç†èµ„æºçš„ä¸åŒè¡¨ç¤º</td><td><code>graphAssetStorage.getObjectByID(refId)</code> æˆ–é€šè¿‡ <code>useGraphAssetByIdOrRefId</code></td></tr><tr><td><strong>GraphAsset â†’ Endpoint</strong></td><td>ID å¼•ç”¨</td><td>GraphAsset å¯èƒ½å…³è”åˆ° Endpoint</td><td><code>workloadDataModel.unfilteredEndpointsStorage.getObjectByID(endpointId)</code></td></tr></tbody></table>
<p><strong>å…³é”®ç†è§£</strong>ï¼š</p>
<ul>
<li>è¿™äº›å…³è”éƒ½æ˜¯<strong>é€šè¿‡ ID å¼•ç”¨</strong>ï¼Œä¸æ˜¯åŒ…å«å…³ç³»</li>
<li>éœ€è¦é€šè¿‡ ID åœ¨å¯¹åº”çš„ storage ä¸­æŸ¥æ‰¾å®é™…å¯¹è±¡</li>
<li>å…è®¸åŒä¸€ä¸ªç‰©ç†èµ„æºæœ‰å¤šä¸ªç»´åº¦çš„è¡¨ç¤ºï¼ˆé…ç½®ã€è¿è¡Œæ—¶ã€æ£€æµ‹ã€é—®é¢˜ç­‰ï¼‰</li>
</ul>
<hr/>
<h3 data-id="heading-14">6. å·¥å…·ç±»ï¼ˆéçœŸå®èµ„æºï¼‰</h3>
<h4 data-id="heading-15">AssetSearchKeyObject</h4>
<p><strong>å…³ç³»</strong>ï¼šä¸æ˜¯çœŸæ­£çš„èµ„æºï¼Œåªæ˜¯åºåˆ—åŒ–å·¥å…·</p>
<ul>
<li>ç”¨äºåœ¨ URL æˆ–å­˜å‚¨ä¸­ä¼ é€’ Asset Search Key</li>
<li>ä¸å­˜å‚¨ï¼Œä»…ç”¨äºä¼ é€’å’Œåºåˆ—åŒ–</li>
<li>å¯ä»¥è½¬æ¢ä¸ºå…¶ä»–èµ„æºç±»å‹ï¼ˆå¦‚ <code>GraphAsset</code>ï¼‰</li>
</ul>
<p><strong>ç°å®ä¸–ç•Œä¾‹å­</strong>ï¼š</p>
<ul>
<li>åºåˆ—åŒ–çš„ Asset Search Key: <code>s3://my-company-data-bucket</code> æˆ– <code>arn:aws:ec2:us-east-1:123456789012:instance/i-123</code></li>
</ul>
<hr/>
<h3 data-id="heading-16">7. ç‹¬ç«‹èµ„æºï¼ˆæ— ç›´æ¥å…³ç³»ï¼‰</h3>
<h4 data-id="heading-17">DetectionEndpointDetails</h4>
<p><strong>å…³ç³»</strong>ï¼šç‹¬ç«‹çš„ç«¯ç‚¹è¯¦æƒ…å¯¹è±¡</p>
<ul>
<li>ç”¨äºæ£€æµ‹å›¾æ¨¡å‹</li>
<li>ä¸å…¶ä»–èµ„æºç±»å‹æ²¡æœ‰ç›´æ¥å…³ç³»</li>
</ul>
<p><strong>ç°å®ä¸–ç•Œä¾‹å­</strong>ï¼š</p>
<ul>
<li>æ”»å‡»é“¾ä¸­çš„ç«¯ç‚¹ï¼šåœ¨æ£€æµ‹å›¾ä¸­ï¼Œä½œä¸ºæ”»å‡»è·¯å¾„ä¸€éƒ¨åˆ†çš„ç«¯ç‚¹</li>
</ul>
<h4 data-id="heading-18">EndpointSearch</h4>
<p><strong>å…³ç³»</strong>ï¼šç‹¬ç«‹çš„ç«¯ç‚¹æœç´¢å¯¹è±¡</p>
<ul>
<li>ç”¨äº Secretsã€Sensitive Dataã€API Security ç­‰åœºæ™¯</li>
<li>ä¸å…¶ä»–èµ„æºç±»å‹æ²¡æœ‰ç›´æ¥å…³ç³»</li>
<li>å¯èƒ½æ˜¯ä¸´æ—¶åˆ›å»ºçš„ï¼ˆå¦‚ Cloud Scanners æ‰«æçš„èµ„æºï¼‰</li>
</ul>
<p><strong>ç°å®ä¸–ç•Œä¾‹å­</strong>ï¼š</p>
<ul>
<li>æš´éœ²æ•æ„Ÿæ•°æ®çš„ Podï¼šåœ¨ä»£ç ä¸­ç¡¬ç¼–ç äº† AWS å‡­è¯çš„ Pod</li>
<li>API Security ç«¯ç‚¹ï¼šæœ‰ SQL æ³¨å…¥æ¼æ´çš„ API ç«¯ç‚¹</li>
</ul>
<h4 data-id="heading-19">MonitoredResource</h4>
<p><strong>å…³ç³»</strong>ï¼šç‹¬ç«‹çš„ Agent ç›‘æ§èµ„æº</p>
<ul>
<li>ä»£è¡¨å®‰è£…äº† Agent çš„ç›‘æ§èµ„æº</li>
<li>ä¸å…¶ä»–èµ„æºç±»å‹æ²¡æœ‰ç›´æ¥å…³ç³»</li>
</ul>
<p><strong>ç°å®ä¸–ç•Œä¾‹å­</strong>ï¼š</p>
<ul>
<li>å®‰è£…äº† Agent çš„ EC2 å®ä¾‹ï¼š<code>i-1234567890abcdef0</code> - è¿è¡Œ Upwind Agent çš„ EC2 å®ä¾‹</li>
<li>å®‰è£…äº† Agent çš„ Auto Scaling Groupï¼š<code>my-asg</code> - åŒ…å«å¤šä¸ªå®‰è£…äº† Agent çš„å®ä¾‹çš„ ASG</li>
</ul>
<hr/>
<h3 data-id="heading-20">å…³ç³»æ€»ç»“è¡¨</h3>

































































<table><thead><tr><th>å…³ç³»ç±»å‹</th><th>èµ„æºå¯¹</th><th>å…³ç³»æ€§è´¨</th><th>å…·ä½“å«ä¹‰</th></tr></thead><tbody><tr><td><strong>äº’è¡¥ï¼ˆä¸åŒç»´åº¦ï¼‰</strong></td><td>GraphAsset â†” WorkloadTreeStorage</td><td>åŒä¸€ç‰©ç†èµ„æºçš„ä¸åŒç»´åº¦è¡¨ç¤º</td><td>GraphAsset æä¾›é™æ€é…ç½®ä¿¡æ¯ï¼ŒWorkloadTreeStorage æä¾›è¿è¡Œæ—¶æ‹“æ‰‘ä¿¡æ¯ï¼Œä¸¤è€…äº’è¡¥ï¼Œä¸èƒ½å¤ç”¨</td></tr><tr><td><strong>åŒ…å«ï¼ˆå¯¹è±¡å­˜å‚¨ï¼‰</strong></td><td>WorkloadTreeStorage âŠƒ Endpoint</td><td>çœŸæ­£çš„åŒ…å«å…³ç³»ï¼Œä¸€å¯¹å¤š</td><td>WorkloadTreeStorage å†…éƒ¨å­˜å‚¨ Endpoint å¯¹è±¡ï¼ˆé€šè¿‡ endpointIndex Mapï¼‰ï¼Œä¸€ä¸ª WorkloadTreeStorage å¯ä»¥åŒ…å«å¤šä¸ª Endpoint</td></tr><tr><td><strong>å¼•ç”¨ï¼ˆID å…³è”ï¼‰</strong></td><td>GraphAsset â†’ Endpoint</td><td>ID å¼•ç”¨ï¼Œä¸åŒ…å«å¯¹è±¡ï¼Œä¸€å¯¹ä¸€</td><td>GraphAsset åªå­˜å‚¨ endpointId å­—ç¬¦ä¸²ï¼Œéœ€è¦é€šè¿‡ ID åœ¨ storage ä¸­æŸ¥æ‰¾ Endpointï¼Œä¸€ä¸ª GraphAsset æœ€å¤šå¯¹åº”ä¸€ä¸ª Endpoint</td></tr><tr><td><strong>å¼•ç”¨ï¼ˆID å…³è”ï¼‰</strong></td><td>FindingResource â†’ Endpoint</td><td>ID å¼•ç”¨ï¼Œä¸åŒ…å«å¯¹è±¡</td><td>FindingResource å­˜å‚¨ endpointId/endpointRefIdï¼Œè¡¨ç¤ºé…ç½®é—®é¢˜é’ˆå¯¹æŸä¸ª Endpointï¼Œéœ€è¦é€šè¿‡ ID æŸ¥æ‰¾</td></tr><tr><td><strong>å¼•ç”¨ï¼ˆID å…³è”ï¼‰</strong></td><td>Resource â†’ GraphAsset</td><td>ID/refId å¼•ç”¨ï¼Œä¸åŒ…å«å¯¹è±¡</td><td>Resource å’Œ GraphAsset ä»£è¡¨åŒä¸€ç‰©ç†èµ„æºï¼ŒResource é€šè¿‡ refId å¼•ç”¨ GraphAsset</td></tr><tr><td><strong>åˆ†ç±»ï¼ˆäº’æ–¥ï¼‰</strong></td><td>InventoryStorageAsset / InventoryNetworkAsset / InventoryComputeAsset</td><td>åŒä¸€æ¦‚å¿µçš„ä¸åŒç±»å‹ï¼Œäº’æ–¥</td><td>éƒ½æ˜¯ Inventory èµ„äº§ï¼Œä½†æŒ‰ç±»å‹åˆ†ç±»ï¼ˆå­˜å‚¨/ç½‘ç»œ/è®¡ç®—ï¼‰ï¼Œä¸€ä¸ªèµ„æºåªèƒ½æ˜¯å…¶ä¸­ä¸€ç§</td></tr><tr><td><strong>åˆ†ç±»ï¼ˆå¯èƒ½é‡å ï¼‰</strong></td><td>Resource / DetectionResource / FindingResource / VulnerableResource</td><td>ä¸åŒæ•°æ®æºï¼Œå¯èƒ½æŒ‡å‘åŒä¸€ç‰©ç†èµ„æº</td><td>éƒ½ä»£è¡¨"èµ„æº"æ¦‚å¿µï¼Œä½†æ¥è‡ªä¸åŒ APIï¼Œå¯èƒ½é€šè¿‡ resourceId/endpointId å…³è”åˆ°åŒä¸€ç‰©ç†èµ„æº</td></tr><tr><td><strong>å·¥å…·ç±»</strong></td><td>AssetSearchKeyObject</td><td>åºåˆ—åŒ–å·¥å…·ï¼ŒéçœŸå®èµ„æº</td><td>ç”¨äºåœ¨ URL æˆ–å­˜å‚¨ä¸­ä¼ é€’ Asset Search Keyï¼Œå¯ä»¥è½¬æ¢ä¸ºå…¶ä»–èµ„æºç±»å‹</td></tr><tr><td><strong>ç‹¬ç«‹</strong></td><td>DetectionEndpointDetails / EndpointSearch / MonitoredResource</td><td>ä¸å…¶ä»–èµ„æºæ— ç›´æ¥å…³ç³»</td><td>ç‹¬ç«‹çš„èµ„æºç±»å‹ï¼Œç”¨äºç‰¹å®šåœºæ™¯ï¼ˆæ£€æµ‹å›¾ã€Secretsã€Agent ç›‘æ§ï¼‰</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-21">å…³é”®ç†è§£ï¼šå…³ç³»çš„æ•´ä½“é€»è¾‘</h3>
<h4 data-id="heading-22">1. æ•°æ®æºå†³å®šç±»å‹ï¼Œç”¨é€”å†³å®šå…±å­˜</h4>
<p><strong>æ ¸å¿ƒåŸåˆ™</strong>ï¼šåŒä¸€ä¸ªç‰©ç†èµ„æºï¼ˆå¦‚ä¸€ä¸ª EC2 å®ä¾‹ï¼‰å¯èƒ½åœ¨ä¸åŒæ•°æ®æºä¸­æœ‰ä¸åŒçš„è¡¨ç¤º</p>
<ul>
<li><strong>GraphAsset</strong>ï¼šæ¥è‡ª Graph æ•°æ®åº“ï¼Œæä¾›<strong>é™æ€é…ç½®</strong>ä¿¡æ¯</li>
<li><strong>WorkloadTreeStorage</strong>ï¼šæ¥è‡ª Workload APIï¼Œæä¾›<strong>è¿è¡Œæ—¶æ‹“æ‰‘</strong>ä¿¡æ¯</li>
<li><strong>FindingResource</strong>ï¼šæ¥è‡ª Posture APIï¼Œæä¾›<strong>é…ç½®é—®é¢˜</strong>ä¿¡æ¯</li>
<li><strong>DetectionResource</strong>ï¼šæ¥è‡ª Detections APIï¼Œæä¾›<strong>å¨èƒæ£€æµ‹</strong>ä¿¡æ¯</li>
<li><strong>VulnerableResource</strong>ï¼šæ¥è‡ª Vulnerabilities APIï¼Œæä¾›<strong>æ¼æ´</strong>ä¿¡æ¯</li>
</ul>
<p><strong>ä¸ºä»€ä¹ˆéœ€è¦åŒæ—¶å­˜åœ¨ï¼Ÿ</strong></p>
<ul>
<li>å®ƒä»¬æä¾›<strong>ä¸åŒç»´åº¦</strong>çš„ä¿¡æ¯ï¼Œäº’è¡¥è€Œéæ›¿ä»£</li>
<li>åœ¨ <code>AssetDetailsSidePane</code> ä¸­ï¼Œå¯ä»¥åŒæ—¶ä½¿ç”¨å¤šä¸ªèµ„æºç±»å‹å±•ç¤ºå®Œæ•´ä¿¡æ¯</li>
</ul>
<h4 data-id="heading-23">2. åŒ…å« vs å¼•ç”¨çš„å…³é”®åŒºåˆ«</h4>
<p><strong>åŒ…å«å…³ç³»ï¼ˆçœŸæ­£çš„å¯¹è±¡å­˜å‚¨ï¼‰</strong>ï¼š</p>
<ul>
<li><code>WorkloadTreeStorage âŠƒ Endpoint</code>ï¼š<code>Endpoint</code> å¯¹è±¡å­˜å‚¨åœ¨ <code>WorkloadTreeStorage</code> å†…éƒ¨ï¼Œ<strong>ä¸€å¯¹å¤š</strong></li>
</ul>
<p><strong>å¼•ç”¨å…³ç³»ï¼ˆåªæ˜¯ ID å…³è”ï¼‰</strong>ï¼š</p>
<ul>
<li><code>GraphAsset â†’ Endpoint</code>ï¼šåªå­˜å‚¨ <code>endpointId</code> å­—ç¬¦ä¸²ï¼Œ<strong>ä¸€å¯¹ä¸€</strong></li>
<li><code>FindingResource â†’ Endpoint</code>ï¼šåªå­˜å‚¨ <code>endpointId</code>/<code>endpointRefId</code> å­—ç¬¦ä¸²</li>
<li><code>Resource â†’ GraphAsset</code>ï¼šåªå­˜å‚¨ <code>refId</code> å­—ç¬¦ä¸²</li>
</ul>
<p><strong>ä¸ºä»€ä¹ˆéœ€è¦å¼•ç”¨è€Œä¸æ˜¯åŒ…å«ï¼Ÿ</strong></p>
<ul>
<li>é¿å…æ•°æ®é‡å¤ï¼š<code>Endpoint</code> åªå­˜å‚¨ä¸€æ¬¡ï¼Œå¤šä¸ªèµ„æºç±»å‹é€šè¿‡ ID å¼•ç”¨</li>
<li>è§£è€¦ï¼šä¸åŒèµ„æºç±»å‹å¯ä»¥ç‹¬ç«‹æ›´æ–°ï¼Œä¸éœ€è¦åŒæ­¥</li>
<li>çµæ´»æ€§ï¼šå¯ä»¥æ ¹æ®éœ€è¦æŸ¥æ‰¾å…³è”çš„èµ„æº</li>
</ul>
<h4 data-id="heading-24">3. å…³è”å…³ç³»çš„å®é™…å«ä¹‰</h4>
<p><strong>FindingResource â†’ Endpoint</strong>ï¼š</p>
<ul>
<li>å«ä¹‰ï¼šè¿™ä¸ªé…ç½®é—®é¢˜ï¼ˆFindingï¼‰æ˜¯é’ˆå¯¹æŸä¸ªè¿è¡Œæ—¶ç«¯ç‚¹ï¼ˆEndpointï¼‰çš„</li>
<li>ä½¿ç”¨ï¼šé€šè¿‡ <code>endpointId</code> æŸ¥æ‰¾å¯¹åº”çš„ <code>Endpoint</code>ï¼Œå¯ä»¥åŒæ—¶å±•ç¤ºé…ç½®é—®é¢˜å’Œè¿è¡Œæ—¶çŠ¶æ€</li>
</ul>
<p><strong>Resource â†’ GraphAsset</strong>ï¼š</p>
<ul>
<li>å«ä¹‰ï¼šè¿™ä¸ªæ£€æµ‹åˆ°çš„èµ„æºï¼ˆResourceï¼‰å’Œé…ç½®ä¸­çš„èµ„æºï¼ˆGraphAssetï¼‰æ˜¯åŒä¸€ä¸ªç‰©ç†èµ„æº</li>
<li>ä½¿ç”¨ï¼šé€šè¿‡ <code>refId</code> æŸ¥æ‰¾å¯¹åº”çš„ <code>GraphAsset</code>ï¼Œå¯ä»¥åŒæ—¶å±•ç¤ºæ£€æµ‹ä¿¡æ¯å’Œé…ç½®ä¿¡æ¯</li>
</ul>
<p><strong>GraphAsset â†’ Endpoint</strong>ï¼š</p>
<ul>
<li>å«ä¹‰ï¼šè¿™ä¸ªé…ç½®èµ„æºï¼ˆGraphAssetï¼‰å¯èƒ½å…³è”åˆ°ä¸€ä¸ªè¿è¡Œæ—¶ç«¯ç‚¹ï¼ˆEndpointï¼‰</li>
<li>ä½¿ç”¨ï¼šé€šè¿‡ <code>endpointId</code> æŸ¥æ‰¾å¯¹åº”çš„ <code>Endpoint</code>ï¼Œå¯ä»¥åŒæ—¶å±•ç¤ºé…ç½®å’Œè¿è¡Œæ—¶ä¿¡æ¯</li>
</ul>
<h4 data-id="heading-25">4. æ•°æ®è·å–æµç¨‹ç¤ºä¾‹</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// åœ¨ AssetDetailsSidePane ä¸­çš„å…¸å‹æµç¨‹ï¼š</span>

<span class="hljs-comment">// 1. è·å– GraphAssetï¼ˆé™æ€é…ç½®ï¼‰</span>
<span class="hljs-keyword">const</span> [asset] = <span class="hljs-title function_">useGraphAssetByIdOrRefId</span>(orgId, graphId, refId);

<span class="hljs-comment">// 2. æ ¹æ® GraphAsset çš„å±æ€§å†³å®šæ˜¯å¦è·å– WorkloadTreeStorageï¼ˆè¿è¡Œæ—¶æ‹“æ‰‘ï¼‰</span>
<span class="hljs-keyword">if</span> (asset?.<span class="hljs-title function_">getEndpointId</span>()) {
  <span class="hljs-keyword">const</span> [treeStorage] = <span class="hljs-title function_">useAssetTreeStorage</span>(<span class="hljs-comment">/* ... */</span>);
  <span class="hljs-comment">// treeStorage å†…éƒ¨åŒ…å« Endpoint å¯¹è±¡ï¼ˆä¸€å¯¹å¤šï¼‰</span>
}

<span class="hljs-comment">// 3. å¦‚æœéœ€è¦ï¼Œå¯ä»¥é€šè¿‡ ID æŸ¥æ‰¾å…³è”çš„èµ„æº</span>
<span class="hljs-keyword">const</span> endpointId = asset?.<span class="hljs-title function_">getEndpointId</span>();
<span class="hljs-keyword">const</span> endpoint = workloadDataModel.<span class="hljs-property">unfilteredEndpointsStorage</span>.<span class="hljs-title function_">getObjectByID</span>(endpointId);

<span class="hljs-comment">// 4. ç°åœ¨å¯ä»¥åŒæ—¶ä½¿ç”¨å¤šä¸ªèµ„æºç±»å‹</span>
<span class="hljs-comment">// - asset (GraphAsset): æä¾›é…ç½®ä¿¡æ¯</span>
<span class="hljs-comment">// - treeStorage (WorkloadTreeStorage): æä¾›æ‹“æ‰‘ä¿¡æ¯ï¼ŒåŒ…å«å¤šä¸ª Endpoint</span>
<span class="hljs-comment">// - endpoint (Endpoint): æä¾›è¿è¡Œæ—¶ç«¯ç‚¹ä¿¡æ¯ï¼ˆé€šè¿‡ GraphAsset çš„ endpointId æŸ¥æ‰¾ï¼‰</span>
</code></pre>
<h4 data-id="heading-26">5. æ€»ç»“ï¼šä¸ºä»€ä¹ˆä¸èƒ½ç®€å•å¤ç”¨ï¼Ÿ</h4>
<p><strong>GraphAsset å’Œ WorkloadTreeStorage ä¸èƒ½å¤ç”¨çš„æ ¹æœ¬åŸå› </strong>ï¼š</p>
<ol>
<li><strong>æ•°æ®æ¥æºä¸åŒ</strong>ï¼šGraph Query API vs Workload API</li>
<li><strong>æ•°æ®ç»“æ„ä¸åŒ</strong>ï¼šå•ä¸ªå¯¹è±¡ vs æ ‘å½¢ç»“æ„</li>
<li><strong>æ—¶é—´ç»´åº¦ä¸åŒ</strong>ï¼šé…ç½®å¿«ç…§ vs è¿è¡Œæ—¶çŠ¶æ€ï¼ˆéœ€è¦æ—¶é—´èŒƒå›´ï¼‰</li>
<li><strong>ç”¨é€”ä¸åŒ</strong>ï¼šå±•ç¤ºé…ç½®ä¿¡æ¯ vs å±•ç¤ºæ‹“æ‰‘å…³ç³»</li>
<li><strong>æ›´æ–°é¢‘ç‡ä¸åŒ</strong>ï¼šé…ç½®ç›¸å¯¹ç¨³å®š vs è¿è¡Œæ—¶çŠ¶æ€å®æ—¶å˜åŒ–</li>
</ol>
<p><strong>å®ƒä»¬çš„å…³ç³»æ˜¯äº’è¡¥çš„ï¼Œä¸æ˜¯æ›¿ä»£çš„</strong>ï¼š</p>
<ul>
<li>éœ€è¦é…ç½®ä¿¡æ¯ â†’ ä½¿ç”¨ <code>GraphAsset</code></li>
<li>éœ€è¦æ‹“æ‰‘ä¿¡æ¯ â†’ ä½¿ç”¨ <code>WorkloadTreeStorage</code></li>
<li>éœ€è¦å®Œæ•´ä¿¡æ¯ â†’ åŒæ—¶ä½¿ç”¨ä¸¤è€…</li>
</ul>
<p><strong>GraphAsset å’Œ Endpoint æ˜¯ä¸€å¯¹ä¸€ï¼ŒWorkloadTreeStorage å’Œ Endpoint æ˜¯ä¸€å¯¹å¤šçš„åŸå› </strong>ï¼š</p>
<ul>
<li><strong>GraphAsset</strong> ä»£è¡¨å•ä¸ªèµ„æºï¼Œä¸€ä¸ªèµ„æºæœ€å¤šå¯¹åº”ä¸€ä¸ªè¿è¡Œæ—¶ç«¯ç‚¹</li>
<li><strong>WorkloadTreeStorage</strong> ä»£è¡¨æ ‘å½¢ç»“æ„ï¼Œä¸€ä¸ªæ ‘èŠ‚ç‚¹ï¼ˆå¦‚ Namespaceï¼‰å¯ä»¥åŒ…å«å¤šä¸ªç«¯ç‚¹ï¼ˆå¤šä¸ª Podï¼‰</li>
</ul>
<hr/>
<p><em>æ–‡æ¡£ç”Ÿæˆæ—¶é—´: 2026-01-21</em>
<em>æœ€åæ›´æ–°: 2026-01-21 (ä» IUpwindResource_Complete_Reference.md æ‹†åˆ†)</em></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¹½çµä¾èµ–ä¸ç‰ˆæœ¬åœ°ç‹±ï¼špnpm ç©¶ç«Ÿè§£å†³äº†ä»€ä¹ˆï¼Ÿ]]></title>    <link>https://juejin.cn/post/7598574507346903075</link>    <guid>https://juejin.cn/post/7598574507346903075</guid>    <pubDate>2026-01-25T01:24:16.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7598574507346903075" data-draft-id="7598023360732348426" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¹½çµä¾èµ–ä¸ç‰ˆæœ¬åœ°ç‹±ï¼špnpm ç©¶ç«Ÿè§£å†³äº†ä»€ä¹ˆï¼Ÿ"/> <meta itemprop="keywords" content="å‰ç«¯,å‰ç«¯å·¥ç¨‹åŒ–"/> <meta itemprop="datePublished" content="2026-01-25T01:24:16.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‰ç«¯å°å°æ ˆ"/> <meta itemprop="url" content="https://juejin.cn/user/1081575170131006"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¹½çµä¾èµ–ä¸ç‰ˆæœ¬åœ°ç‹±ï¼špnpm ç©¶ç«Ÿè§£å†³äº†ä»€ä¹ˆï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1081575170131006/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‰ç«¯å°å°æ ˆ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-25T01:24:16.000Z" title="Sun Jan 25 2026 01:24:16 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    9
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€ å‰è¾ˆä»¬çš„å›°å±€ï¼šæ‰å¹³åŒ–å¸¦æ¥çš„åé—ç—‡</h2>
<p>åœ¨ npm v3 ä¹‹å‰ï¼Œä¾èµ–æ˜¯<strong>åµŒå¥—</strong>å­˜å‚¨çš„ã€‚å¦‚æœ A å’Œ B éƒ½ä¾èµ– Cï¼ŒC ä¼šè¢«é‡å¤ä¸‹è½½ä¸¤æ¬¡ï¼Œå¯¼è‡´è·¯å¾„è¿‡æ·±å’Œç©ºé—´æµªè´¹ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œnpm v3 å’Œ yarn å¼•å…¥äº†<strong>æ‰å¹³åŒ–ï¼ˆFlatteningï¼‰</strong> ã€‚</p>
<h3 data-id="heading-1">1. å¹½çµä¾èµ–ï¼ˆPhantom Dependenciesï¼‰</h3>
<p>æ‰å¹³åŒ–å°†æ‰€æœ‰äºŒçº§ã€ä¸‰çº§ä¾èµ–éƒ½æå–åˆ°äº† <code>node_modules</code> çš„æ ¹ç›®å½•ä¸‹ã€‚</p>
<ul>
<li><strong>ç°è±¡ï¼š</strong> ä½ çš„ <code>package.json</code> åªå†™äº†ä¾èµ– Aï¼Œä½† A ä¾èµ– Bã€‚å› ä¸ºæ‰å¹³åŒ–ï¼Œä½ å¯ä»¥ç›´æ¥åœ¨ä»£ç é‡Œ <code>import B</code>ã€‚</li>
<li><strong>é£é™©ï¼š</strong> ä¸€æ—¦ A å‡çº§ä¸å†ä¾èµ– Bï¼Œæˆ–è€…æ¢äº†åŒ…ç®¡ç†å™¨ï¼Œä½ çš„ä»£ç å°±ä¼šå› ä¸ºæ‰¾ä¸åˆ° B è€Œå´©æºƒã€‚è¿™ç§ä¸åœ¨æ¸…å•ä¸­å´èƒ½ä½¿ç”¨çš„ä¾èµ–ï¼Œå°±æ˜¯â€œå¹½çµâ€ã€‚</li>
</ul>
<h3 data-id="heading-2">2. åˆ†èº«é—®é¢˜ï¼ˆDoppelgangersï¼‰</h3>
<p>å¦‚æœé¡¹ç›®ä¸­çš„ A ä¾èµ– <code>C@1.0</code>ï¼ŒB ä¾èµ– <code>C@2.0</code>ã€‚æ‰å¹³åŒ–åªèƒ½å°†å…¶ä¸­ä¸€ä¸ªç‰ˆæœ¬æåˆ°æ ¹ç›®å½•ï¼Œå¦ä¸€ä¸ªç‰ˆæœ¬ä¾ç„¶ä¼šè¢«åµŒå¥—ã€‚è¿™ä¸ä»…æµªè´¹ç©ºé—´ï¼Œè¿˜å¯èƒ½å¯¼è‡´åŒä¸€ä¸ªåº“åœ¨å†…å­˜ä¸­å­˜åœ¨å¤šä¸ªå®ä¾‹ï¼Œå¼•å‘å•ä¾‹æ¨¡å¼å¤±æ•ˆç­‰æ·±å±‚ Bugã€‚</p>
<hr/>
<h2 data-id="heading-3">äºŒã€ pnpm çš„ç»ˆææ–¹æ¡ˆï¼šç¡¬é“¾æ¥ä¸å†…å®¹å¯»å€</h2>
<p>pnpmï¼ˆPerformant npmï¼‰é€šè¿‡ä¸€ç§å…¨æ–°çš„æ€è·¯ï¼Œå…¼é¡¾äº†åµŒå¥—çš„<strong>å®‰å…¨æ€§</strong>å’Œæ‰å¹³åŒ–çš„<strong>é«˜æ€§èƒ½</strong>ã€‚</p>
<h3 data-id="heading-4">1. CAS å†…å®¹å¯»å€å­˜å‚¨ï¼ˆContent-addressable storeï¼‰</h3>
<p>pnpm ä¸ä¼šåœ¨æ¯ä¸ªé¡¹ç›®çš„ <code>node_modules</code> é‡Œå­˜å‚¨çœŸå®æ–‡ä»¶ã€‚å®ƒåœ¨ç£ç›˜çš„ä¸€ä¸ªå…¨å±€ä½ç½®ï¼ˆé€šå¸¸æ˜¯ <code>~/.pnpm-store</code>ï¼‰ç»´æŠ¤ä¸€ä»½æ‰€æœ‰åŒ…çš„å”¯ä¸€å¤‡ä»½ã€‚</p>
<ul>
<li><strong>ç¡¬é“¾æ¥ï¼ˆHard Linkï¼‰ï¼š</strong> ä¸åŒé¡¹ç›®å¼•ç”¨åŒä¸€ä¸ªåŒ…æ—¶ï¼Œpnpm åªæ˜¯åœ¨é¡¹ç›®çš„ <code>node_modules</code> é‡Œåˆ›å»ºäº†ä¸€ä¸ªæŒ‡å‘å…¨å±€ä»“åº“çš„ç¡¬é“¾æ¥ã€‚</li>
<li><strong>æ”¶ç›Šï¼š</strong> å³ä½¿ä½ æœ‰ 100 ä¸ªé¡¹ç›®ç”¨åˆ°äº†åŒä¸€ä¸ª 100MB çš„åŒ…ï¼Œå®ƒåœ¨ç£ç›˜ä¸Šä¹Ÿåªå ç”¨ 100MB ç©ºé—´ã€‚</li>
</ul>
<h3 data-id="heading-5">2. è½¯é“¾æ¥ï¼ˆSymlinkï¼‰æ„å»ºçš„â€œè™šæ‹Ÿå­˜å‚¨â€</h3>
<p>è¿™æ˜¯ pnpm è§£å†³å¹½çµä¾èµ–çš„ç¥æ¥ä¹‹ç¬”ã€‚</p>
<ul>
<li><strong>ç›®å½•ç»“æ„ï¼š</strong> pnpm ä¼šåœ¨ <code>node_modules</code> ä¸‹åˆ›å»ºä¸€ä¸ª <code>.pnpm</code> ç›®å½•ï¼Œè¿™é‡Œå­˜æ”¾äº†æ‰€æœ‰ä¾èµ–çš„çœŸå®è½¯é“¾æ¥ï¼Œå¹¶ä¸¥æ ¼æŒ‰ç…§ä¾èµ–æ ‘ç»“æ„åµŒå¥—ã€‚</li>
<li><strong>æ ¹ç›®å½•çº¯å‡€ï¼š</strong> ä½ çš„é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ <code>node_modules</code> <strong>åªåŒ…å«</strong>ä½ åœ¨ <code>package.json</code> ä¸­å£°æ˜çš„åŒ…ã€‚ç”±äºä»£ç æ— æ³•è·¨å‡ºè‡ªå·±æ‰€åœ¨çš„ç›®å½•è®¿é—®éå£°æ˜ä¾èµ–ï¼Œå¹½çµä¾èµ–ä»æ ¹æºä¸Šè¢«æœç»äº†ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-6">ä¸‰ã€ ä¸ºä»€ä¹ˆ pnpm æ˜¯ç°ä»£å·¥ç¨‹åŒ–çš„æ ‡é…ï¼Ÿ</h2>
<ol>
<li><strong>å®‰è£…é€Ÿåº¦æå¿«ï¼š</strong> å®ƒæ˜¯ç›®å‰æœ€å¿«çš„åŒ…ç®¡ç†å™¨ã€‚å› ä¸ºå®ƒè·³è¿‡äº†å¤§é‡çš„ IO å†™å…¥æ“ä½œï¼Œåªéœ€è¦å»ºç«‹é“¾æ¥ã€‚</li>
<li><strong>Monorepo çš„äº²ç”Ÿçˆ¶æ¯ï¼š</strong> pnpm åŸç”Ÿæ”¯æŒ <code>workspaces</code>ã€‚åœ¨å¤§å‹ Monorepo é¡¹ç›®ä¸­ï¼Œç”±äºå­˜åœ¨å¤§é‡ç›¸äº’å¼•ç”¨çš„å­åŒ…ï¼Œpnpm çš„é“¾æ¥æœºåˆ¶èƒ½æå¤§åœ°å‡å°‘å†—ä½™ï¼Œä¿è¯ä¾èµ–ç‰ˆæœ¬çš„ä¸€è‡´æ€§ã€‚</li>
<li><strong>å®‰å…¨æ€§ï¼š</strong> å®ƒä¸¥æ ¼éµå¾ªâ€œæ‰€è§å³æ‰€å¾—â€ï¼Œä½ å†™äº†ä»€ä¹ˆï¼Œä½ æ‰èƒ½ç”¨ä»€ä¹ˆï¼Œè¿™ä¸ºå¤§è§„æ¨¡å›¢é˜Ÿåä½œæä¾›äº†æé«˜çš„ç¡®å®šæ€§ã€‚</li>
</ol>
<hr/>
<h2 data-id="heading-7">å››ã€ è¿›é˜¶ï¼šå¦‚ä½•å¹³æ»‘è¿ç§»åˆ° pnpmï¼Ÿ</h2>
<p>ä½œä¸ºä¸€å 8 å¹´ç»éªŒçš„å¼€å‘è€…ï¼Œè¿ç§»æ—¶ä½ éœ€è¦æ³¨æ„ï¼š</p>
<ul>
<li><strong>å½»åº•æ¸…ç†ï¼š</strong> å¿…é¡»åˆ é™¤æ—§çš„ <code>node_modules</code> å’Œ <code>lock</code> æ–‡ä»¶ã€‚</li>
<li><strong>å¤„ç†ç‰¹æ®ŠåŒ…ï¼š</strong> æå°‘æ•°æåº¦ä¾èµ–æ‰å¹³åŒ–ç»“æ„çš„æ—§åŒ…å¯èƒ½ä¼šæŠ¥é”™ã€‚æ­¤æ—¶ä½ å¯ä»¥é€šè¿‡ <code>.npmrc</code> ä¸­çš„ <code>public-hoist-pattern</code> æˆ– <code>shamefully-hoist=true</code> æ¥ä¸´æ—¶å›é€€åˆ°æ‰å¹³åŒ–è¡Œä¸ºï¼ˆä¸æ¨èé•¿æœŸä½¿ç”¨ï¼‰ã€‚</li>
<li><strong>Monorepo é…ç½®ï¼š</strong> åœ¨æ ¹ç›®å½•åˆ›å»º <code>pnpm-workspace.yaml</code> æ¥å®šä¹‰ä½ çš„å­é¡¹ç›®èŒƒå›´ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-8">ğŸ’¡ ç»™å‰ç«¯å¼€å‘è€…çš„ç¡¬æ ¸è´´å£«</h2>
<ul>
<li><strong>ä¸è¦å¿½è§† <code>pnpm-lock.yaml</code>ï¼š</strong> å®ƒæ˜¯ç”Ÿäº§ç¯å¢ƒå¯é¢„æµ‹æ€§çš„æ ¸å¿ƒä¿éšœã€‚æ°¸è¿œä¸è¦åœ¨ç”Ÿäº§ç¯å¢ƒä¸­è·³è¿‡ lock æ–‡ä»¶è¿›è¡Œå®‰è£…ã€‚</li>
<li><strong>åˆ©ç”¨ <code>pnpm patch</code>ï¼š</strong> å¦‚æœç¬¬ä¸‰æ–¹åŒ…æœ‰ä¸ªå° Bug éœ€è¦ç´§æ€¥ä¿®å¤ï¼Œä¸éœ€è¦å†å» fork æºç ï¼Œç›´æ¥ä½¿ç”¨ <code>pnpm patch</code> å³å¯åœ¨æœ¬åœ°å¯¹ node_modules è¿›è¡ŒæŒä¹…åŒ–çš„è¡¥ä¸ä¿®æ”¹ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-9">ç»“è¯­</h3>
<p>pnpm çš„å´›èµ·æ˜¯å‰ç«¯å·¥ç¨‹åŒ–èµ°å‘<strong>å·¥ä¸šçº§æˆç†Ÿ</strong>çš„æ ‡å¿—ã€‚å®ƒé€šè¿‡åº•å±‚çš„å­˜å‚¨é€»è¾‘æ”¹è¿›ï¼Œè§£å†³äº†å›°æ‰°ç¤¾åŒºå¤šå¹´çš„ä¾èµ–æ··ä¹±é—®é¢˜ã€‚ç†è§£äº†å®ƒï¼Œä½ å°±æŒæ¡äº† Monorepo æ¶æ„ä¸‹æœ€æ ¸å¿ƒçš„èµ„æºè°ƒåº¦è§„åˆ™ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[èµ°å‘å…¨æ ˆï¼šå‰åç«¯çŠ¶æ€è®¤çŸ¥å·®å¼‚ä¸è®¾è®¡è¾¹ç•Œçš„æ·±åº¦æ¢è®¨]]></title>    <link>https://juejin.cn/post/7598537377472954406</link>    <guid>https://juejin.cn/post/7598537377472954406</guid>    <pubDate>2026-01-25T01:50:43.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7598537377472954406" data-draft-id="7598537377472888870" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="èµ°å‘å…¨æ ˆï¼šå‰åç«¯çŠ¶æ€è®¤çŸ¥å·®å¼‚ä¸è®¾è®¡è¾¹ç•Œçš„æ·±åº¦æ¢è®¨"/> <meta itemprop="keywords" content="ä»£ç è§„èŒƒ"/> <meta itemprop="datePublished" content="2026-01-25T01:50:43.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ©™åºå‘˜å°ç«™"/> <meta itemprop="url" content="https://juejin.cn/user/1546375522426169"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            èµ°å‘å…¨æ ˆï¼šå‰åç«¯çŠ¶æ€è®¤çŸ¥å·®å¼‚ä¸è®¾è®¡è¾¹ç•Œçš„æ·±åº¦æ¢è®¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1546375522426169/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ©™åºå‘˜å°ç«™
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-25T01:50:43.000Z" title="Sun Jan 25 2026 01:50:43 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€ï¼šä¸ºä½•å…³æ³¨å‰åç«¯çŠ¶æ€è®¤çŸ¥å·®å¼‚</h2>
<p>åœ¨å½“ä»Šçš„å¼€å‘ç¯å¢ƒä¸­ï¼Œå‰åç«¯åˆ†ç¦»å·²æˆä¸ºä¸€ç§æ™®éçš„æ¶æ„æ¨¡å¼ï¼Œç‰¹åˆ«æ˜¯åœ¨å¤§å‹åº”ç”¨å’Œå¾®æœåŠ¡çš„èƒŒæ™¯ä¸‹ã€‚éšç€å…¨æ ˆå¼€å‘çš„å…´èµ·ï¼Œå¼€å‘è€…ä¸ä»…éœ€è¦æŒæ¡åç«¯é€»è¾‘çš„å®ç°ï¼Œè¿˜éœ€è¦å¯¹å‰ç«¯çŠ¶æ€ç®¡ç†æœ‰æ·±å…¥çš„ç†è§£ã€‚ç„¶è€Œï¼Œå‰åç«¯é—´çš„çŠ¶æ€è®¤çŸ¥å·®å¼‚å¸¸å¸¸å¯¼è‡´å¼€å‘æ•ˆç‡çš„é™ä½å’Œé¡¹ç›®çš„æ²Ÿé€šéšœç¢ã€‚</p>
<h3 data-id="heading-1">å…¨æ ˆå¼€å‘çš„å…´èµ·ä¸å‰åç«¯åˆ†ç¦»çš„ç°çŠ¶</h3>
<p>å…¨æ ˆå¼€å‘çš„æ¦‚å¿µä¸æ–­æ¼”è¿›ï¼Œå¼€å‘è€…ä»¬ä¸ä»…è¦å…·å¤‡å¤„ç†æ•°æ®åº“åŠæœåŠ¡å™¨çš„èƒ½åŠ›ï¼Œè¿˜è¦ç†Ÿæ‚‰å®¢æˆ·ç«¯çš„çŠ¶æ€å˜åŒ–ã€‚ç„¶è€Œï¼Œå‰åç«¯åˆ†ç¦»çš„è®¾è®¡ä½¿å¾—å›¢é˜Ÿå¾€å¾€ä»å„è‡ªçš„è§’åº¦å‡ºå‘æ¥ç†è§£å’Œå¤„ç†çŠ¶æ€ã€‚ä¾‹å¦‚ï¼Œåç«¯å¼€å‘è€…å¯èƒ½æ›´å…³æ³¨æ•°æ®çš„æŒä¹…æ€§å’Œæ¥å£çš„ç¨³å®šæ€§ï¼Œè€Œå‰ç«¯å¼€å‘è€…åˆ™æ›´å…³æ³¨ç”¨æˆ·äº¤äº’å’Œè§†å›¾æ›´æ–°ã€‚è¿™ç§è®¤çŸ¥ä¸Šçš„å·®å¼‚ï¼Œå¯èƒ½ä¼šå¯¼è‡´åœ¨äº§å“è®¾è®¡ã€API è®¾è®¡å’ŒçŠ¶æ€ç®¡ç†ç­‰æ–¹é¢çš„æ²Ÿé€šä¸ç•…ã€‚</p>
<p>ä½œä¸ºä¸€ä¸ªçœŸå®çš„æ¡ˆä¾‹ï¼Œå½“æˆ‘åœ¨ä¸€ä¸ªé¡¹ç›®ä¸­é‡åˆ°éœ€è¦é¢‘ç¹æ›´æ–°ç”¨æˆ·çŠ¶æ€çš„åœºæ™¯æ—¶ï¼Œåç«¯åŒäº‹è®¾è®¡çš„APIæœªèƒ½è€ƒè™‘åˆ°å‰ç«¯å¯¹çŠ¶æ€çš„å®æ—¶ååº”ï¼Œå¯¼è‡´å‰ç«¯åœ¨è·å–åˆ°çš„æ•°æ®ä¸Šå§‹ç»ˆæ˜¯æ—§çš„çŠ¶æ€ï¼Œæœ€ç»ˆå¯¼è‡´äº†ç”¨æˆ·ä½“éªŒçš„ä¸‹é™ã€‚</p>
<h3 data-id="heading-2">çŠ¶æ€ç®¡ç†åœ¨ç°ä»£åº”ç”¨ä¸­çš„é‡è¦æ€§</h3>
<p>åœ¨ç°ä»£å•é¡µåº”ç”¨ï¼ˆSPAï¼‰ä¸­ï¼ŒçŠ¶æ€ç®¡ç†å˜å¾—å°¤ä¸ºé‡è¦ã€‚éšç€åº”ç”¨å¤æ‚åº¦çš„å¢åŠ ï¼Œæˆ‘ä»¬éœ€è¦ç”¨æ›´é«˜æ•ˆçš„æ–¹å¼æ¥ç®¡ç†ç»„ä»¶ä¹‹é—´çš„æ•°æ®æµå’Œç”¨æˆ·çŠ¶æ€ã€‚Reduxã€Vuex ç­‰çŠ¶æ€ç®¡ç†åº“çš„å‡ºç°ä¸ºå¤„ç†å¤æ‚çŠ¶æ€æä¾›äº†å¥‘æœºï¼Œä½†å¦‚æœå‰åç«¯å¯¹è¿™äº›çŠ¶æ€çš„ç†è§£ä¸ä¸€è‡´ï¼Œå°±ä¼šå‡ºç°é—®é¢˜ã€‚</p>
<p>ä¾‹å¦‚ï¼Œåœ¨ä½¿ç”¨ Redux æ—¶ï¼Œå‰ç«¯éœ€è¦æ¸…æ¥šåœ°çŸ¥é“æ¯æ¬¡çŠ¶æ€æ”¹å˜çš„æ¥æºä»¥åŠå¦‚ä½•æ­£ç¡®åœ°æ´¾å‘ actionã€‚å¦‚æœåç«¯ä¸ç†è§£å‰ç«¯çš„çŠ¶æ€åŒæ­¥æœºåˆ¶ï¼Œå¯èƒ½ä¼šå¯¼è‡´ä¸å¿…è¦çš„ API è°ƒç”¨ï¼Œå¢åŠ æœåŠ¡å™¨è´Ÿæ‹…ï¼ŒåŒæ—¶ä¹Ÿå¯èƒ½è®©å‰ç«¯é™·å…¥çŠ¶æ€éš¾ä»¥é¢„æ–™çš„å›°å¢ƒã€‚</p>
<h3 data-id="heading-3">å‰åç«¯åä½œä¸­çš„å¸¸è§è¯¯è§£</h3>
<p>å‰åç«¯åä½œä¸­çš„è¯¯è§£å¾€å¾€æºè‡ªäºå¯¹çŠ¶æ€çš„ä¸åŒç†è§£ã€‚ä¾‹å¦‚ï¼Œåç«¯å¯èƒ½è®¤ä¸ºæ‰€æœ‰çŠ¶æ€éƒ½åº”è¯¥åœ¨æ•°æ®åº“ä¸­æŒä¹…åŒ–ï¼Œè€Œå‰ç«¯åˆ™å¯èƒ½ä¼šè®¤ä¸ºæŸäº›çŠ¶æ€ä»…åœ¨ç”¨æˆ·ä¼šè¯ä¸­ä¿å­˜å³å¯ã€‚è¿™æ ·çš„è¯¯è§£ä¸ä»…å½±å“äº†å¼€å‘æ•ˆç‡ï¼Œä¹Ÿå¯èƒ½å¯¼è‡´æ•°æ®ä¸€è‡´æ€§é—®é¢˜ã€‚</p>
<p>ä¸€ä¸ªå…·ä½“çš„åœºæ™¯æ˜¯ï¼Œå½“æˆ‘ä»¬åœ¨ä¸€ä¸ªç”µå•†ç½‘ç«™ä¸­è®¾è®¡è´­ç‰©è½¦åŠŸèƒ½æ—¶ï¼Œåç«¯æä¾›äº†ä¸€ä¸ªAPIæ¥ç›´æ¥è·å–è´­ç‰©è½¦çš„å†…å®¹ï¼Œä½†å‰ç«¯å¹¶æ²¡æœ‰è€ƒè™‘åˆ°éœ€è¦å¤„ç†ä¸´æ—¶çŠ¶æ€ï¼Œæ¯”å¦‚ç”¨æˆ·æ·»åŠ å•†å“æ—¶çš„åŠ¨ç”»æ•ˆæœå’Œæ›´æ–°è¿‡ç¨‹ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œå‰ç«¯å¯èƒ½éœ€è¦å¤šæ¬¡è¯·æ±‚åç«¯APIä»¥æ›´æ–°çŠ¶æ€ï¼Œå¯¼è‡´äº†ä¸¥é‡çš„æ€§èƒ½é—®é¢˜ã€‚</p>
<p>ç»¼ä¸Šï¼Œå…³æ³¨å‰åç«¯çŠ¶æ€è®¤çŸ¥å·®å¼‚ï¼Œä¸ä»…æœ‰åŠ©äºæé«˜å¼€å‘æ•ˆç‡ï¼Œè¿˜èƒ½åœ¨è®¾è®¡é˜¶æ®µé¿å…ä¸å¿…è¦çš„é‡å·¥ä¸é”™è¯¯ã€‚é€šè¿‡æ˜ç¡®åŒæ–¹çš„è´£ä»»ä¸å¯¹çŠ¶æ€çš„ç†è§£ï¼Œèƒ½å¤Ÿæ›´å¥½åœ°å®ç°èµ„æºçš„åˆç†åˆ©ç”¨å’Œç”¨æˆ·ä½“éªŒçš„ä¼˜åŒ–ã€‚å› æ­¤ï¼Œåœ¨æ¥ä¸‹æ¥çš„ç« èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†æ·±å…¥æ¢è®¨å¦‚ä½•åœ¨å…¨æ ˆå¼€å‘ä¸­ï¼Œå»ºç«‹æ›´å¥½çš„çŠ¶æ€ç®¡ç†æœºåˆ¶ä¸å‰åç«¯åä½œæ¨¡å¼ã€‚</p>
<h2 data-id="heading-4">ç™»å½•æ€çš„å½’å±ï¼šå‰ç«¯çŠ¶æ€è¿˜æ˜¯åç«¯çŠ¶æ€ï¼Ÿ</h2>
<p>åœ¨ç°ä»£Webå¼€å‘ä¸­ï¼Œç™»å½•æ€çš„ç®¡ç†æ˜¯ä¸€ä¸ªè‡³å…³é‡è¦çš„ä¸»é¢˜ï¼Œå®ƒç›´æ¥å…³ç³»åˆ°ç”¨æˆ·ä½“éªŒå’Œç³»ç»Ÿå®‰å…¨æ€§ã€‚å¾ˆå¤šå¼€å‘è€…åœ¨è¿™ä¸ªé—®é¢˜ä¸Šä¼šäº§ç”Ÿå›°æƒ‘ï¼šç©¶ç«Ÿç™»å½•æ€åº”å½“ç”±å‰ç«¯ç®¡ç†ï¼Œè¿˜æ˜¯ç”±åç«¯æ¥æ‰¿æ‹…è¿™ä¸ªè´£ä»»ï¼Ÿåœ¨è¿™ä¸€ç« èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†æ¢è®¨ç™»å½•æ€çš„å®šä¹‰ä¸å®ç°æ–¹å¼ï¼Œå‰ç«¯å¦‚ä½•ç®¡ç†ç™»å½•æ€ï¼Œåç«¯å¯¹ç™»å½•æ€çš„æ”¯æŒä¸è¦æ±‚ï¼Œä»¥åŠé€šè¿‡æ¡ˆä¾‹åˆ†ææ¥æ­ç¤ºæœ€ä½³å®è·µã€‚</p>
<h3 data-id="heading-5">ç™»å½•æ€çš„å®šä¹‰ä¸å®ç°æ–¹å¼</h3>
<p>ç™»å½•æ€ï¼Œé¡¾åæ€ä¹‰ï¼ŒæŒ‡çš„æ˜¯ç”¨æˆ·åœ¨ç™»å½•ç³»ç»Ÿåï¼Œç³»ç»Ÿå¯¹ç”¨æˆ·èº«ä»½çš„è¯†åˆ«å’Œè®°å½•ã€‚åœ¨Webåº”ç”¨ä¸­ï¼Œç™»å½•æ€çš„å®ç°æ–¹å¼ä¸»è¦æœ‰ä¸¤ç§ï¼š</p>
<ol>
<li>
<p><strong>Sessionï¼ˆä¼šè¯ï¼‰</strong>ï¼šä¼ ç»Ÿçš„æœåŠ¡å™¨ç«¯ç®¡ç†æ–¹å¼ï¼Œç”¨æˆ·ç™»å½•åï¼ŒæœåŠ¡å™¨ä¸ºç”¨æˆ·åˆ›å»ºä¸€ä¸ªä¼šè¯ï¼ˆSessionï¼‰ï¼Œå¹¶åœ¨åç»­è¯·æ±‚ä¸­é€šè¿‡Cookieæ¥è¯†åˆ«ç”¨æˆ·ã€‚Sessioné€šå¸¸å­˜å‚¨åœ¨æœåŠ¡å™¨çš„å†…å­˜æˆ–æ•°æ®åº“ä¸­ï¼Œå…·æœ‰è¾ƒé«˜çš„å®‰å…¨æ€§ï¼Œä½†åœ¨æ°´å¹³æ‰©å±•ï¼ˆå¦‚è´Ÿè½½å‡è¡¡ï¼‰æ—¶ä¼šé¢ä¸´æŒ‘æˆ˜ã€‚</p>
</li>
<li>
<p><strong>Tokenï¼ˆä»¤ç‰Œï¼‰</strong>ï¼šéšç€APIçš„å‘å±•ï¼ŒTokenæœºåˆ¶é€æ¸æˆä¸ºä¸»æµï¼Œå°¤å…¶æ˜¯JWTï¼ˆJSON Web Tokenï¼‰ã€‚ç”¨æˆ·ç™»å½•åï¼ŒæœåŠ¡å™¨ç”Ÿæˆä¸€ä¸ªç­¾åçš„Tokenå¹¶è¿”å›ç»™å‰ç«¯ã€‚å‰ç«¯åœ¨åç»­è¯·æ±‚ä¸­å°†Tokenå‘é€ç»™åç«¯è¿›è¡Œèº«ä»½éªŒè¯ã€‚Tokençš„ä¼˜åŠ¿åœ¨äºæ— çŠ¶æ€ï¼ˆstatelessï¼‰ï¼Œä¾¿äºè´Ÿè½½å‡è¡¡å’ŒæœåŠ¡çš„æ‰©å±•ï¼Œä½†ç›¸å¯¹Sessionè€Œè¨€å®‰å…¨æ€§éœ€è¦é¢å¤–ç®¡ç†ã€‚</p>
</li>
</ol>
<h3 data-id="heading-6">å‰ç«¯å¦‚ä½•ç®¡ç†ç™»å½•æ€</h3>
<p>å‰ç«¯ç®¡ç†ç™»å½•æ€çš„æ–¹å¼ä¸»è¦ä¾èµ–äºæµè§ˆå™¨çš„å­˜å‚¨æœºåˆ¶ï¼Œå¦‚<code>localStorage</code>æˆ–<code>sessionStorage</code>ï¼Œä»¥åŠCookieã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å‰ç«¯ç®¡ç†ç™»å½•æ€çš„å¸¸ç”¨æ–¹æ³•ï¼š</p>
<ul>
<li>
<p><strong>ä½¿ç”¨Cookie</strong>ï¼šå°†Tokenå­˜å‚¨åœ¨Cookieä¸­ï¼Œä¾¿äºè‡ªåŠ¨å‘é€ã€‚éœ€è¦æ³¨æ„Cookieçš„<code>HttpOnly</code>å’Œ<code>Secure</code>å±æ€§ï¼Œä»¥é˜²æ­¢XSSå’ŒCSRFæ”»å‡»ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// è®¾ç½®Cookie</span>
<span class="hljs-variable language_">document</span>.<span class="hljs-property">cookie</span> = <span class="hljs-string">"token=your_jwt_token; path=/; secure; HttpOnly"</span>;
</code></pre>
</li>
<li>
<p><strong>ä½¿ç”¨localStorage</strong>ï¼šå°†Tokenå­˜å‚¨åœ¨<code>localStorage</code>ä¸­ï¼Œä¾¿äºåœ¨æµè§ˆå™¨æ ‡ç­¾é¡µé—´å…±äº«ï¼Œä½†éœ€è¦æ‰‹åŠ¨åœ¨æ¯ä¸ªè¯·æ±‚ä¸­åŠ å…¥Tokenã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å­˜å‚¨Token</span>
<span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">'token'</span>, yourJwtToken);
</code></pre>
</li>
</ul>
<p>è¿™äº›æ–¹æ³•è™½ç„¶ç®€å•ä¾¿åˆ©ï¼Œä½†ä¹Ÿå­˜åœ¨ä¸€å®šçš„å®‰å…¨éšæ‚£ï¼Œå¼€å‘è€…éœ€åœ¨åˆ¶å®šæ–¹æ¡ˆæ—¶è¿›è¡Œæƒè¡¡ã€‚</p>
<h3 data-id="heading-7">åç«¯å¯¹ç™»å½•æ€çš„æ”¯æŒä¸è¦æ±‚</h3>
<p>åç«¯åœ¨ç™»å½•æ€ç®¡ç†ä¸­ä¸»è¦æ‰¿æ‹…éªŒè¯å’Œå­˜å‚¨çš„èŒè´£ã€‚ä»¥ä¸‹æ˜¯å‡ ä¸ªå…³é”®ç‚¹ï¼š</p>
<ol>
<li>
<p><strong>Tokenç”Ÿæˆä¸éªŒè¯</strong>ï¼šåç«¯è´Ÿè´£åœ¨ç”¨æˆ·ç™»å½•æ—¶ç”ŸæˆTokenï¼Œå¹¶åœ¨åç»­è¯·æ±‚ä¸­éªŒè¯Tokençš„æœ‰æ•ˆæ€§ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// Node.js ç¤ºä¾‹</span>
<span class="hljs-keyword">const</span> jwt = <span class="hljs-built_in">require</span>(<span class="hljs-string">'jsonwebtoken'</span>);

<span class="hljs-comment">// ç™»å½•æ—¶ç”ŸæˆToken</span>
<span class="hljs-keyword">const</span> token = jwt.<span class="hljs-title function_">sign</span>({ userId }, <span class="hljs-string">'your_secret_key'</span>, { <span class="hljs-attr">expiresIn</span>: <span class="hljs-string">'1h'</span> });

<span class="hljs-comment">// åœ¨è¯·æ±‚ä¸­éªŒè¯Token</span>
jwt.<span class="hljs-title function_">verify</span>(token, <span class="hljs-string">'your_secret_key'</span>, <span class="hljs-function">(<span class="hljs-params">err, decoded</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">return</span> res.<span class="hljs-title function_">sendStatus</span>(<span class="hljs-number">403</span>);
    <span class="hljs-comment">// éªŒè¯é€šè¿‡ï¼Œå¤„ç†è¯·æ±‚</span>
});
</code></pre>
</li>
<li>
<p><strong>çŠ¶æ€ç®¡ç†</strong>ï¼šåç«¯éœ€è¦ç®¡ç†ç”¨æˆ·ä¼šè¯çŠ¶æ€ï¼Œä¾‹å¦‚ç”¨æˆ·çš„ç™»å½•çŠ¶æ€ã€Tokençš„è¿‡æœŸæ—¶é—´ç­‰ã€‚è‹¥ä½¿ç”¨Sessionï¼Œéœ€è¦åœ¨æ•°æ®åº“ä¸­å­˜å‚¨ä¼šè¯æ•°æ®ã€‚</p>
</li>
<li>
<p><strong>å®‰å…¨æªæ–½</strong>ï¼šåç«¯åº”å®æ–½å®‰å…¨æªæ–½ï¼Œå¦‚ä½¿ç”¨HTTPSã€è®¾ç½®Tokençš„è¿‡æœŸæ—¶é—´ã€é»‘åå•ç­–ç•¥ç­‰ï¼Œä»¥æé«˜ç™»å½•æ€çš„å®‰å…¨æ€§ã€‚</p>
</li>
</ol>
<h3 data-id="heading-8">æ¡ˆä¾‹åˆ†æï¼šç™»å½•æ€ç®¡ç†çš„æœ€ä½³å®è·µ</h3>
<p>ä¸ºäº†æ›´å¥½åœ°ç†è§£å‰åç«¯åœ¨ç™»å½•æ€ç®¡ç†ä¸­å„è‡ªçš„è§’è‰²ï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªå…·ä½“çš„æ¡ˆä¾‹åˆ†æã€‚</p>
<p>å‡è®¾æˆ‘ä»¬æ­£åœ¨å¼€å‘ä¸€ä¸ªç”µå•†å¹³å°ï¼Œç”¨æˆ·éœ€è¦ç™»å½•æ‰èƒ½æŸ¥çœ‹è´­ç‰©è½¦ã€‚æˆ‘ä»¬å†³å®šé‡‡ç”¨Tokenæœºåˆ¶æ¥ç®¡ç†ç™»å½•æ€ã€‚æµç¨‹å¦‚ä¸‹ï¼š</p>
<ol>
<li>
<p>ç”¨æˆ·åœ¨å‰ç«¯è¾“å…¥è´¦å·å’Œå¯†ç ã€‚</p>
</li>
<li>
<p>å‰ç«¯å°†è¯·æ±‚å‘é€åˆ°åç«¯ï¼Œå¹¶åœ¨å“åº”ä¸­è·å–Tokenã€‚</p>
</li>
<li>
<p>å‰ç«¯å°†Tokenå­˜å‚¨åœ¨<code>localStorage</code>ä¸­ï¼Œå¹¶åœ¨åç»­è¯·æ±‚ä¸­æ·»åŠ åˆ°Authorizationå¤´ä¸­ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å‘èµ·è¯·æ±‚</span>
<span class="hljs-title function_">fetch</span>(<span class="hljs-string">'/api/cart'</span>, {
    <span class="hljs-attr">method</span>: <span class="hljs-string">'GET'</span>,
    <span class="hljs-attr">headers</span>: {
        <span class="hljs-string">'Authorization'</span>: <span class="hljs-string">`Bearer <span class="hljs-subst">${<span class="hljs-variable language_">localStorage</span>.getItem(<span class="hljs-string">'token'</span>)}</span>`</span>
    }
});
</code></pre>
</li>
<li>
<p>åç«¯åœ¨å¤„ç†è¯·æ±‚æ—¶éªŒè¯Tokenï¼Œè‹¥éªŒè¯é€šè¿‡ï¼Œè¿”å›è´­ç‰©è½¦æ•°æ®ã€‚</p>
</li>
<li>
<p>è‹¥Tokenå¤±æ•ˆï¼Œå‰ç«¯æ•è·401é”™è¯¯å¹¶é‡æ–°å¼•å¯¼ç”¨æˆ·ç™»å½•ã€‚</p>
</li>
</ol>
<p>é€šè¿‡ä¸Šè¿°æµç¨‹ï¼Œæˆ‘ä»¬å¯è§å‰åç«¯å„è‡ªçš„èŒè´£å’Œè¾¹ç•Œã€‚å‰ç«¯è´Ÿè´£ç”¨æˆ·ä½“éªŒå’ŒTokenç®¡ç†ï¼Œåç«¯åˆ™è´Ÿè´£èº«ä»½éªŒè¯å’Œå®‰å…¨æ€§ã€‚</p>
<h3 data-id="heading-9">æ€»ç»“</h3>
<p>ç™»å½•æ€çš„ç®¡ç†å¹¶éç®€å•çš„å‰ç«¯æˆ–åç«¯çš„é€‰æ‹©ï¼Œè€Œæ˜¯ä¸¤è€…ååŒå·¥ä½œçš„ç»“æœã€‚åœ¨è®¾è®¡ç™»å½•æ€ç®¡ç†æ–¹æ¡ˆæ—¶ï¼Œæˆ‘ä»¬éœ€è¦ç»¼åˆè€ƒè™‘ç”¨æˆ·ä½“éªŒã€å®‰å…¨æ€§ä»¥åŠç³»ç»Ÿçš„æ¶æ„ç‰¹æ€§ã€‚é€šè¿‡å®è·µæ¡ˆä¾‹ï¼Œæˆ‘ä»¬å¯ä»¥æ¸…æ™°åœ°ç†è§£å‰åç«¯è§’è‰²ï¼Œåˆ¶å®šå‡ºåˆç†é«˜æ•ˆçš„ç™»å½•æ€ç®¡ç†ç­–ç•¥ã€‚</p>
<h2 data-id="heading-10">çŠ¶æ€çš„å¤šæ ·æ€§ï¼šloadingã€æäº¤ä¸­ã€å¤±è´¥ç®—ä¸ç®—â€œçŠ¶æ€â€ï¼Ÿ</h2>
<p>åœ¨ç°ä»£ Web å¼€å‘ä¸­ï¼ŒçŠ¶æ€ç®¡ç†å·²æˆä¸ºä¸€ä¸ªä¸å¯å¿½è§†çš„è¯é¢˜ã€‚ç‰¹åˆ«æ˜¯åœ¨å‰åç«¯åˆ†ç¦»çš„æ¶æ„ä¸‹ï¼Œä¸åŒçŠ¶æ€çš„å®šä¹‰åŠå…¶ç”¨æˆ·ä½“éªŒçš„è®¾è®¡æ˜¾å¾—å°¤ä¸ºé‡è¦ã€‚æœ¬æ–‡å°†æ¢è®¨ loadingã€æäº¤ä¸­å’Œå¤±è´¥ç­‰çŠ¶æ€æ˜¯å¦ç®—ä½œçŠ¶æ€ï¼Œä»¥åŠå®ƒä»¬åœ¨å‰åç«¯å¼€å‘ä¸­çš„é‡è¦æ€§ã€‚</p>
<h3 data-id="heading-11">ä¸åŒçŠ¶æ€çš„å®šä¹‰ä¸ç”¨æˆ·ä½“éªŒçš„å…³ç³»</h3>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦æ˜ç¡®â€œçŠ¶æ€â€çš„å®šä¹‰ã€‚åœ¨å‰ç«¯å¼€å‘ä¸­ï¼ŒçŠ¶æ€é€šå¸¸æŒ‡çš„æ˜¯ç»„ä»¶æˆ–åº”ç”¨åœ¨æŸä¸€ç‰¹å®šæ—¶åˆ»çš„æƒ…å†µã€‚å¸¸è§çš„çŠ¶æ€åŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>Loading</strong>ï¼šæ•°æ®æ­£åœ¨åŠ è½½ï¼Œç”¨æˆ·éœ€è¦ç­‰å¾…ã€‚</li>
<li><strong>æäº¤ä¸­</strong>ï¼šç”¨æˆ·æäº¤è¡¨å•ï¼Œç­‰å¾…åå°å“åº”ã€‚</li>
<li><strong>å¤±è´¥</strong>ï¼šæ“ä½œå¤±è´¥ï¼Œç”¨æˆ·éœ€è¦é‡‡å–è¿›ä¸€æ­¥æªæ–½ã€‚</li>
</ul>
<p>è¿™äº›çŠ¶æ€ä¸ä»…ä»…æ˜¯å¼€å‘è€…çš„æŠ€æœ¯å®ç°ï¼Œæ›´æ˜¯ç”¨æˆ·ä½“éªŒçš„é‡è¦ç»„æˆéƒ¨åˆ†ã€‚ä¾‹å¦‚ï¼Œå½“ç”¨æˆ·æäº¤è¡¨å•æ—¶ï¼Œå¦‚æœæ²¡æœ‰æœ‰æ•ˆçš„åé¦ˆï¼Œç”¨æˆ·å¯èƒ½ä¼šäº§ç”Ÿç–‘è™‘ï¼Œä¸çŸ¥é“æ“ä½œæ˜¯å¦æˆåŠŸã€‚å¦‚æœæˆ‘ä»¬é€šè¿‡ä¸€ä¸ª loading åŠ¨ç”»æ¥å‘ŠçŸ¥ç”¨æˆ·æ•°æ®æ­£åœ¨å¤„ç†ï¼Œè¿™æ˜¾ç„¶ä¼šæå‡ç”¨æˆ·ä½“éªŒã€‚</p>
<h3 data-id="heading-12">å‰ç«¯å¯¹çŠ¶æ€çš„å®æ—¶åé¦ˆæœºåˆ¶</h3>
<p>åœ¨å‰ç«¯ï¼ŒçŠ¶æ€çš„ç®¡ç†é€šå¸¸é€šè¿‡ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸå’ŒçŠ¶æ€ç®¡ç†åº“ï¼ˆå¦‚ Reduxã€MobX ç­‰ï¼‰å®ç°ã€‚ä»¥ React ä¸ºä¾‹ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡çŠ¶æ€ç®¡ç†æ¥æ§åˆ¶ä¸åŒçš„ç”¨æˆ·äº¤äº’çŠ¶æ€ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, { useState } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title function_">FormComponent</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> [loading, setLoading] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);
  <span class="hljs-keyword">const</span> [error, setError] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">null</span>);
  <span class="hljs-keyword">const</span> [success, setSuccess] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">null</span>);

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleSubmit</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">event</span>) =&gt; {
    event.<span class="hljs-title function_">preventDefault</span>();
    <span class="hljs-title function_">setLoading</span>(<span class="hljs-literal">true</span>);
    <span class="hljs-title function_">setError</span>(<span class="hljs-literal">null</span>);
    <span class="hljs-title function_">setSuccess</span>(<span class="hljs-literal">null</span>);

    <span class="hljs-keyword">try</span> {
      <span class="hljs-comment">// æ¨¡æ‹Ÿ API è¯·æ±‚</span>
      <span class="hljs-keyword">await</span> <span class="hljs-title function_">fakeApiRequest</span>();
      <span class="hljs-title function_">setSuccess</span>(<span class="hljs-string">'æäº¤æˆåŠŸï¼'</span>);
    } <span class="hljs-keyword">catch</span> (err) {
      <span class="hljs-title function_">setError</span>(<span class="hljs-string">'æäº¤å¤±è´¥ï¼Œè¯·é‡è¯•ã€‚'</span>);
    } <span class="hljs-keyword">finally</span> {
      <span class="hljs-title function_">setLoading</span>(<span class="hljs-literal">false</span>);
    }
  };

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">onSubmit</span>=<span class="hljs-string">{handleSubmit}</span>&gt;</span>
      {loading &amp;&amp; <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Loading...<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>}
      {error &amp;&amp; <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">color:</span> '<span class="hljs-attr">red</span>' }}&gt;</span>{error}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>}
      {success &amp;&amp; <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">color:</span> '<span class="hljs-attr">green</span>' }}&gt;</span>{success}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>}
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"submit"</span> <span class="hljs-attr">disabled</span>=<span class="hljs-string">{loading}</span>&gt;</span>æäº¤<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span></span>
  );
};

<span class="hljs-keyword">const</span> <span class="hljs-title function_">fakeApiRequest</span> = (<span class="hljs-params"/>) =&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> <span class="hljs-built_in">setTimeout</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() &gt; <span class="hljs-number">0.5</span> ? resolve : reject, <span class="hljs-number">2000</span>));
</code></pre>
<p>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡ <code>loading</code>ã€<code>error</code> å’Œ <code>success</code> çŠ¶æ€æ¥ç®¡ç†ç”¨æˆ·çš„åé¦ˆã€‚ä½¿ç”¨çŠ¶æ€çš„å®æ—¶æ›´æ–°ç¡®ä¿ç”¨æˆ·åœ¨æ“ä½œè¿‡ç¨‹ä¸­å§‹ç»ˆèƒ½è·å¾—å‡†ç¡®çš„ä¿¡æ¯ã€‚</p>
<h3 data-id="heading-13">åç«¯åœ¨çŠ¶æ€ç®¡ç†ä¸­çš„è§’è‰²</h3>
<p>åç«¯åœ¨çŠ¶æ€ç®¡ç†ä¸­æ‰®æ¼”ç€è‡³å…³é‡è¦çš„è§’è‰²ã€‚å®ƒè´Ÿè´£å¤„ç†ä¸šåŠ¡é€»è¾‘ï¼Œå¹¶å°†ç»“æœåé¦ˆç»™å‰ç«¯ã€‚åœ¨ä»¥ä¸Šçš„ä¾‹å­ä¸­ï¼Œå‰ç«¯é€šè¿‡è°ƒç”¨ API è¯·æ±‚åç«¯æœåŠ¡æ¥æäº¤è¡¨å•æ•°æ®ï¼Œè¿™ä¸€è¿‡ç¨‹æ¶‰åŠåˆ°å¤šä¸ªçŠ¶æ€çš„è½¬æ¢ã€‚</p>
<p>ä¾‹å¦‚ï¼Œåç«¯å¯ä»¥è¿”å›ä¸åŒçš„çŠ¶æ€ç ï¼ŒæŒ‡ç¤ºè¯·æ±‚çš„æˆåŠŸä¸å¦ã€‚å…·ä½“å®ç°æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Express.js ä½œä¸ºåç«¯æœåŠ¡çš„æ¡†æ¶ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">app.<span class="hljs-title function_">post</span>(<span class="hljs-string">'/submit'</span>, <span class="hljs-keyword">async</span> (req, res) =&gt; {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// å¤„ç†æäº¤é€»è¾‘</span>
    <span class="hljs-keyword">await</span> <span class="hljs-title function_">processForm</span>(req.<span class="hljs-property">body</span>);
    res.<span class="hljs-title function_">status</span>(<span class="hljs-number">200</span>).<span class="hljs-title function_">send</span>({ <span class="hljs-attr">message</span>: <span class="hljs-string">'æäº¤æˆåŠŸï¼'</span> });
  } <span class="hljs-keyword">catch</span> (error) {
    res.<span class="hljs-title function_">status</span>(<span class="hljs-number">500</span>).<span class="hljs-title function_">send</span>({ <span class="hljs-attr">message</span>: <span class="hljs-string">'æäº¤å¤±è´¥ï¼Œè¯·é‡è¯•ã€‚'</span> });
  }
});
</code></pre>
<p>åç«¯çš„çŠ¶æ€ç®¡ç†ä¸ä»…é™äºå“åº”æˆåŠŸä¸å¦ï¼Œè¿˜å¯ä»¥è®°å½•ç”¨æˆ·è¡Œä¸ºã€æ“ä½œå†å²ï¼Œå¹¶åœ¨å¿…è¦æ—¶æä¾›é”™è¯¯æŠ¥å‘Šã€‚é€šè¿‡åˆç†çš„è®¾è®¡ï¼Œåç«¯å¯ä»¥å¤§å¹…åº¦æé«˜å‰ç«¯çš„ç”¨æˆ·ä½“éªŒã€‚</p>
<h3 data-id="heading-14">å¦‚ä½•è®¾è®¡è‰¯å¥½çš„çŠ¶æ€åé¦ˆ</h3>
<p>åœ¨è®¾è®¡è‰¯å¥½çš„çŠ¶æ€åé¦ˆæ—¶ï¼Œæˆ‘ä»¬éœ€è¦è€ƒè™‘ä»¥ä¸‹å‡ ç‚¹ï¼š</p>
<ol>
<li>
<p><strong>åŠæ—¶æ€§</strong>ï¼šåé¦ˆä¿¡æ¯åº”åœ¨ç”¨æˆ·æ“ä½œåå°½å¿«å‘ˆç°ï¼Œé¿å…ç”¨æˆ·åœ¨ç­‰å¾…æ—¶æ„Ÿåˆ°ç„¦è™‘ã€‚</p>
</li>
<li>
<p><strong>æ˜ç¡®æ€§</strong>ï¼šçŠ¶æ€åé¦ˆåº”æ¸…æ™°ä¼ è¾¾å½“å‰çš„æ“ä½œç»“æœï¼Œå¦‚æˆåŠŸã€å¤±è´¥æˆ–åŠ è½½ä¸­ã€‚</p>
</li>
<li>
<p><strong>è§†è§‰æ•ˆæœ</strong>ï¼šä½¿ç”¨åˆé€‚çš„è§†è§‰å…ƒç´ ï¼ˆå¦‚ loading åŠ¨ç”»ã€æˆåŠŸ/å¤±è´¥æ¶ˆæ¯çš„é¢œè‰²å’Œå›¾æ ‡ï¼‰æ¥å¢å¼ºç”¨æˆ·ä½“éªŒã€‚</p>
</li>
<li>
<p><strong>æ— éšœç¢è®¾è®¡</strong>ï¼šç¡®ä¿çŠ¶æ€åé¦ˆå¯¹æ‰€æœ‰ç”¨æˆ·å‹å¥½ï¼Œè€ƒè™‘è§†è§‰éšœç¢ç”¨æˆ·çš„éœ€æ±‚ã€‚</p>
</li>
</ol>
<p>é€šè¿‡ç»“åˆå‰ç«¯çš„å®æ—¶åé¦ˆæœºåˆ¶å’Œåç«¯çš„çŠ¶æ€ç®¡ç†ï¼Œæœ‰æ•ˆåœ°è®¾è®¡å’Œå®ç°çŠ¶æ€åé¦ˆï¼Œä¸ä»…å¯ä»¥æå‡ç”¨æˆ·ä½“éªŒï¼Œè¿˜èƒ½åœ¨ä¸€å®šç¨‹åº¦ä¸Šå¢å¼ºåº”ç”¨çš„å¯é æ€§å’Œç”¨æˆ·æ»¡æ„åº¦ã€‚</p>
<h3 data-id="heading-15">æ€»ç»“</h3>
<p>åœ¨å‰åç«¯å¼€å‘ä¸­ï¼Œloadingã€æäº¤ä¸­å’Œå¤±è´¥ç­‰çŠ¶æ€ä¸ä»…ä»…æ˜¯æŠ€æœ¯å®ç°çš„ç»†èŠ‚ï¼Œå®ƒä»¬æ„æˆäº†ç”¨æˆ·ä¸åº”ç”¨äº¤äº’çš„æ ¸å¿ƒä½“éªŒã€‚é€šè¿‡æ˜ç¡®çŠ¶æ€å®šä¹‰ã€æœ‰æ•ˆçš„åé¦ˆæœºåˆ¶åŠåˆç†çš„è®¾è®¡ï¼Œæˆ‘ä»¬å¯ä»¥æ„å»ºå‡ºæ›´åŠ å‹å¥½çš„ç”¨æˆ·ç•Œé¢ï¼Œæå‡ç”¨æˆ·çš„ä½¿ç”¨ä½“éªŒã€‚åœ¨èµ°å‘å…¨æ ˆçš„è¿‡ç¨‹ä¸­ï¼Œç†è§£å¹¶æŒæ¡è¿™äº›çŠ¶æ€çš„ç®¡ç†ï¼Œæ­£æ˜¯æˆ‘ä»¬è®¾è®¡è¾¹ç•Œçš„é‡è¦ä¸€æ­¥ã€‚</p>
<h2 data-id="heading-16">å‰ç«¯å¯¹åç«¯æ¥å£çš„æŠ±æ€¨ï¼šä¸ºä½•æ€»è§‰å¾—â€œä¸å¥½ç”¨â€ï¼Ÿ</h2>
<p>åœ¨æ—¥å¸¸å¼€å‘ä¸­ï¼Œå‰ç«¯å¼€å‘è€…å¸¸å¸¸ä¼šå¯¹åç«¯æ¥å£è®¾è®¡äº§ç”Ÿä¸æ»¡ï¼Œè®¤ä¸ºå…¶â€œä¸å¥½ç”¨â€ã€‚è¿™ç§æ„Ÿè§‰å¾€å¾€ä¸æ˜¯æ— ç¼˜æ— æ•…çš„ï¼Œè€Œæ˜¯æºäºå¯¹æ¥å£è®¾è®¡çš„æœŸå¾…ä¸å®ç°ä¹‹é—´çš„è½å·®ã€‚åœ¨è¿™ä¸€ç« èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†æ·±å…¥æ¢è®¨å‰ç«¯å¼€å‘è€…å¯¹æ¥å£è®¾è®¡çš„æœŸæœ›ã€å¸¸è§çš„æ¥å£è®¾è®¡é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆï¼Œä»¥åŠå¦‚ä½•æå‡æ¥å£çš„æ˜“ç”¨æ€§ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬ä¹Ÿä¼šè®¨è®ºå‰åç«¯åä½œä¸­çš„æ²Ÿé€šä¸åé¦ˆæœºåˆ¶ï¼Œä»¥ä¿ƒè¿›åŒæ–¹çš„ç†è§£ä¸åˆä½œã€‚</p>
<h3 data-id="heading-17">å‰ç«¯å¼€å‘è€…å¯¹æ¥å£è®¾è®¡çš„æœŸæœ›</h3>
<ol>
<li>
<p><strong>ç®€æ´æ€§å’Œä¸€è‡´æ€§</strong>ï¼š
å‰ç«¯å¼€å‘è€…é€šå¸¸å¸Œæœ›æ¥å£èƒ½å¤Ÿç®€å•æ˜“æ‡‚ï¼Œæ¥å£æ–‡æ¡£æ¸…æ™°æ˜ç¡®ã€‚ä¸¾ä¾‹æ¥è¯´ï¼ŒRESTful API çš„è®¾è®¡ç†å¿µå¼ºè°ƒèµ„æºçš„ç»Ÿä¸€æ€§ï¼Œå‰ç«¯å¼€å‘è€…å¸Œæœ›æ¯ä¸ªæ¥å£éƒ½æœ‰ä¸€è‡´çš„å‘½åè§„èŒƒå’Œå‚æ•°ç»“æ„ï¼Œä»¥å‡å°‘ç†è§£ä¸Šçš„æˆæœ¬ã€‚</p>
<p><strong>æœŸæœ›ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-json" lang="json">GET /api/users/<span class="hljs-punctuation">{</span>id<span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"John Doe"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"email"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"john.doe@example.com"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
</li>
<li>
<p><strong>æ˜ç¡®çš„é”™è¯¯å¤„ç†</strong>ï¼š
å¤„ç†é”™è¯¯æ—¶ï¼Œå‰ç«¯å¼€å‘è€…å¸Œæœ›èƒ½å¤Ÿè·å–è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯ï¼Œä»¥ä¾¿å¿«é€Ÿå®šä½é—®é¢˜ã€‚ä¸€ä¸ªç†æƒ³çš„é”™è¯¯å“åº”åº”è¯¥åŒ…æ‹¬çŠ¶æ€ç ã€æ¶ˆæ¯å’Œé”™è¯¯è¯¦æƒ…ã€‚</p>
<p><strong>æœŸæœ›ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"status"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"error"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"message"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"User not found"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"code"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">404</span>
<span class="hljs-punctuation">}</span>
</code></pre>
</li>
<li>
<p><strong>é«˜æ•ˆçš„æ•°æ®ç»“æ„</strong>ï¼š
å‰ç«¯å¼€å‘è€…é€šå¸¸å¸Œæœ›åç«¯æä¾›çš„æ•°æ®æ ¼å¼èƒ½å¤Ÿç›´æ¥æ»¡è¶³å‰ç«¯çš„éœ€æ±‚ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä¸€ä¸ªæ¥å£è¿”å›çš„ç”¨æˆ·ä¿¡æ¯åŒ…å«äº†å¤§é‡ä¸å¿…è¦çš„å­—æ®µï¼Œå‰ç«¯åœ¨ä½¿ç”¨æ—¶å°±éœ€è¦è¿›è¡Œé¢å¤–çš„å¤„ç†ï¼Œä»è€Œå½±å“æ•ˆç‡ã€‚</p>
</li>
</ol>
<h3 data-id="heading-18">å¸¸è§çš„æ¥å£è®¾è®¡é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ</h3>
<ol>
<li>
<p><strong>ä¸ä¸€è‡´çš„æ¥å£å‘½å</strong>ï¼š
ä¸åŒçš„å¼€å‘è€…å¯èƒ½ä¼šä½¿ç”¨ä¸åŒçš„å‘½åè§„èŒƒï¼Œå¯¼è‡´æ¥å£çš„ä½¿ç”¨å˜å¾—æ··ä¹±ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š
ç¡®å®šä¸€ä¸ªç»Ÿä¸€çš„å‘½åè§„èŒƒï¼Œå¹¶åœ¨å›¢é˜Ÿå†…è¿›è¡Œæ™®åŠï¼Œæ¯”å¦‚ä½¿ç”¨ RESTful é£æ ¼çš„èµ„æºå‘½åï¼Œä¾‹å¦‚ <code>/api/users</code>ã€<code>/api/products</code> ç­‰ã€‚</p>
</li>
<li>
<p><strong>ç¼ºä¹æ–‡æ¡£æ”¯æŒ</strong>ï¼š
è‹¥æ²¡æœ‰è‰¯å¥½çš„æ–‡æ¡£ï¼Œå‰ç«¯å¼€å‘è€…éš¾ä»¥ç†æ¸…æ¥å£çš„ç”¨æ³•ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š
ä½¿ç”¨å·¥å…·å¦‚ Swagger æˆ– Postman ç”Ÿæˆè‡ªåŠ¨åŒ–çš„æ¥å£æ–‡æ¡£ï¼Œç¡®ä¿æ¯æ¬¡æ¥å£æ›´æ–°åæ–‡æ¡£ä¹Ÿèƒ½åŠæ—¶æ›´æ–°ã€‚</p>
</li>
<li>
<p><strong>å¤æ‚çš„è¯·æ±‚å‚æ•°</strong>ï¼š
æ¥å£è¯·æ±‚å‚æ•°è¿‡äºå¤æ‚ï¼Œå‰ç«¯å¼€å‘è€…éœ€è¦èŠ±è´¹å¤§é‡æ—¶é—´å»ç†è§£å’Œè°ƒè¯•ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š
ç²¾ç®€æ¥å£å‚æ•°ï¼Œé¿å…åµŒå¥—è¿‡æ·±çš„ JSON ç»“æ„ã€‚ä½¿ç”¨ç¤ºä¾‹æ•°æ®æ¥æŒ‡å¯¼å‰ç«¯å¼€å‘è€…å¦‚ä½•æ„é€ è¯·æ±‚ã€‚</p>
</li>
</ol>
<h3 data-id="heading-19">å¦‚ä½•æå‡æ¥å£çš„æ˜“ç”¨æ€§</h3>
<ol>
<li>
<p><strong>æä¾›ç¤ºä¾‹ä»£ç </strong>ï¼š
åœ¨æ¥å£æ–‡æ¡£ä¸­åŒ…å«ç¤ºä¾‹ä»£ç ï¼Œå¸®åŠ©å‰ç«¯å¼€å‘è€…å¿«é€Ÿä¸Šæ‰‹ã€‚</p>
<p><strong>ç¤ºä¾‹ä»£ç </strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title function_">fetch</span>(<span class="hljs-string">'/api/users/1'</span>)
  .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> response.<span class="hljs-title function_">json</span>())
  .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data));
</code></pre>
</li>
<li>
<p><strong>è®¾è®¡è‰¯å¥½çš„ç‰ˆæœ¬æ§åˆ¶</strong>ï¼š
æ¥å£åœ¨è¿­ä»£è¿‡ç¨‹ä¸­å¯èƒ½ä¼šå‘ç”Ÿå˜åŒ–ï¼Œåˆç†çš„ç‰ˆæœ¬æ§åˆ¶æœºåˆ¶èƒ½æœ‰æ•ˆå‡å°‘å¯¹ç°æœ‰å‰ç«¯ä»£ç çš„å½±å“ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š
ä½¿ç”¨ç‰ˆæœ¬å·æ ‡è®°æ¥å£ï¼Œä¾‹å¦‚ <code>/api/v1/users</code>ï¼Œå¹¶åœ¨æ–‡æ¡£ä¸­æ˜ç¡®ç‰ˆæœ¬æ›´æ–°çš„å†…å®¹å’Œå½±å“ã€‚</p>
</li>
</ol>
<h3 data-id="heading-20">å‰åç«¯åä½œä¸­çš„æ²Ÿé€šä¸åé¦ˆæœºåˆ¶</h3>
<ol>
<li>
<p><strong>å®šæœŸçš„æ²Ÿé€šä¼šè®®</strong>ï¼š
å®šæœŸå¬å¼€å‰åç«¯åä½œä¼šè®®ï¼Œæ¢è®¨æ¥å£ä½¿ç”¨ä¸­çš„é—®é¢˜ï¼Œç¡®ä¿åŒæ–¹å¯¹æ¥å£çš„ç†è§£ä¸€è‡´ã€‚</p>
</li>
<li>
<p><strong>å»ºç«‹åé¦ˆæœºåˆ¶</strong>ï¼š
åœ¨å¼€å‘è¿‡ç¨‹ä¸­å¼•å…¥åé¦ˆæœºåˆ¶ï¼Œå‰ç«¯å¯ä»¥åŠæ—¶åé¦ˆæ¥å£ä½¿ç”¨ä¸­çš„é—®é¢˜ï¼Œåç«¯åˆ™èƒ½å¤Ÿæ ¹æ®åé¦ˆè¿›è¡Œä¼˜åŒ–ã€‚</p>
<p><strong>å®ä¾‹</strong>ï¼š
ä½¿ç”¨é¡¹ç›®ç®¡ç†å·¥å…·ï¼Œå¦‚ Jira æˆ– Trelloï¼Œè®¾ç«‹æ¥å£é—®é¢˜çš„ä¸“é—¨çœ‹æ¿ï¼Œä»¥ä¾¿è·Ÿè¸ªé—®é¢˜çš„è¿›å±•ã€‚</p>
</li>
</ol>
<p>é€šè¿‡ä»¥ä¸Šåˆ†æï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å‰ç«¯å¼€å‘è€…å¯¹åç«¯æ¥å£è®¾è®¡çš„æœŸå¾…æ˜¯åŸºäºå®é™…å¼€å‘ä¸­çš„ç—›ç‚¹ä¸éœ€æ±‚ã€‚é€šè¿‡äº’ç›¸ç†è§£ä¸æœ‰æ•ˆæ²Ÿé€šï¼Œå‰åç«¯å›¢é˜Ÿèƒ½å¤Ÿæ›´å¥½åœ°åä½œï¼Œæå‡äº§å“çš„å¼€å‘æ•ˆç‡ä¸ç”¨æˆ·ä½“éªŒã€‚</p>
<h2 data-id="heading-21">åç«¯å¯¹å‰ç«¯çŠ¶æ€ç®¡ç†çš„è´¨ç–‘ï¼šä¸ºä½•è§‰å¾—â€œå¤ªä¹±â€ï¼Ÿ</h2>
<p>åœ¨ç°ä»£ web å¼€å‘ä¸­ï¼Œå‰åç«¯çš„è¾¹ç•Œè¶Šæ¥è¶Šæ¨¡ç³Šï¼Œå°¤å…¶æ˜¯å¯¹çŠ¶æ€ç®¡ç†çš„å¤„ç†ï¼Œä¸åŒçš„å›¢é˜Ÿå¯¹å…¶ç†è§£å’Œå®ç°å­˜åœ¨å¾ˆå¤§å·®å¼‚ã€‚åç«¯å¼€å‘äººå‘˜é€šå¸¸å¯¹äºå‰ç«¯çš„çŠ¶æ€ç®¡ç†ç­–ç•¥æ„Ÿåˆ°å›°æƒ‘å’Œè´¨ç–‘ï¼Œè®¤ä¸ºå…¶â€œå¤ªä¹±â€ã€‚è¿™ä¸»è¦æºäºå‰ç«¯çŠ¶æ€ç®¡ç†çš„å·¥å…·ä¸æŠ€æœ¯å¤šæ ·åŒ–ã€åç«¯å¯¹å‰ç«¯çŠ¶æ€ç®¡ç†çš„è¯¯è§£ï¼Œä»¥åŠå®ç°å‰åç«¯çŠ¶æ€ç®¡ç†ç»Ÿä¸€çš„æŒ‘æˆ˜ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘å°†å¯¹è¿™äº›è¦ç‚¹è¿›è¡Œæ·±å…¥åˆ†æã€‚</p>
<h3 data-id="heading-22">å‰ç«¯çŠ¶æ€ç®¡ç†çš„å¸¸ç”¨å·¥å…·ä¸æŠ€æœ¯</h3>
<p>å‰ç«¯å¼€å‘ä¸­ï¼ŒçŠ¶æ€ç®¡ç†æ˜¯ä¸€é¡¹å…³é”®ä»»åŠ¡ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸ç”¨çš„çŠ¶æ€ç®¡ç†å·¥å…·ä¸æŠ€æœ¯ï¼š</p>
<ol>
<li>
<p><strong>Redux</strong>ï¼šRedux æ˜¯ä¸€ä¸ªæµè¡Œçš„ JavaScript çŠ¶æ€ç®¡ç†åº“ï¼Œé‡‡ç”¨å•ä¸€æ•°æ®æºå’Œä¸å¯å˜çŠ¶æ€çš„è®¾è®¡ç†å¿µã€‚å®ƒé€šè¿‡ actions å’Œ reducers æ¥ç®¡ç†åº”ç”¨çŠ¶æ€ï¼Œä½¿çŠ¶æ€å˜åŒ–å¯é¢„æµ‹å’Œå¯è¿½è¸ªã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { createStore } <span class="hljs-keyword">from</span> <span class="hljs-string">'redux'</span>;

<span class="hljs-keyword">const</span> initialState = { <span class="hljs-attr">count</span>: <span class="hljs-number">0</span> };

<span class="hljs-keyword">function</span> <span class="hljs-title function_">counterReducer</span>(<span class="hljs-params">state = initialState, action</span>) {
    <span class="hljs-keyword">switch</span> (action.<span class="hljs-property">type</span>) {
        <span class="hljs-keyword">case</span> <span class="hljs-string">'INCREMENT'</span>:
            <span class="hljs-keyword">return</span> { <span class="hljs-attr">count</span>: state.<span class="hljs-property">count</span> + <span class="hljs-number">1</span> };
        <span class="hljs-attr">default</span>:
            <span class="hljs-keyword">return</span> state;
    }
}

<span class="hljs-keyword">const</span> store = <span class="hljs-title function_">createStore</span>(counterReducer);
</code></pre>
</li>
<li>
<p><strong>Vuex</strong>ï¼šVuex æ˜¯ Vue.js çš„çŠ¶æ€ç®¡ç†åº“ï¼Œé‡‡ç”¨ç±»ä¼¼ Redux çš„è®¾è®¡æ€æƒ³ï¼Œé€‚ç”¨äº Vue åº”ç”¨ã€‚é€šè¿‡é›†ä¸­ç®¡ç†çŠ¶æ€ï¼Œå…·å¤‡æ›´å¥½çš„è°ƒè¯•å’Œç»´æŠ¤èƒ½åŠ›ã€‚</p>
</li>
<li>
<p><strong>React Context</strong>ï¼šReact æä¾›çš„ Context API å…è®¸æˆ‘ä»¬åœ¨ç»„ä»¶æ ‘ä¸­å…±äº«çŠ¶æ€ï¼Œé€‚åˆäºå°å‹åº”ç”¨æˆ–ç‰¹å®šåœºæ™¯ä¸‹çš„çŠ¶æ€ç®¡ç†ã€‚</p>
</li>
<li>
<p><strong>MobX</strong>ï¼šMobX æ˜¯ä¸€ä¸ªå“åº”å¼çŠ¶æ€ç®¡ç†åº“ï¼Œé‡‡ç”¨è§‚å¯Ÿè€…æ¨¡å¼ï¼Œèƒ½å¤Ÿè‡ªåŠ¨è·Ÿè¸ªçŠ¶æ€ä¾èµ–å¹¶åœ¨çŠ¶æ€å˜åŒ–æ—¶è‡ªåŠ¨æ›´æ–° UIã€‚</p>
</li>
</ol>
<p>è™½ç„¶è¿™äº›å·¥å…·å„æœ‰åƒç§‹ï¼Œä½†ä¸åŒçš„å›¢é˜Ÿåœ¨é€‰æ‹©å’Œä½¿ç”¨è¿™äº›å·¥å…·æ—¶ï¼Œå¾€å¾€ä¼šå¯¼è‡´çŠ¶æ€ç®¡ç†çš„å®ç°æ–¹å¼å„ä¸ç›¸åŒï¼Œä»è€Œå¼•èµ·åç«¯å¼€å‘è€…çš„å›°æƒ‘ã€‚</p>
<h3 data-id="heading-23">åç«¯å¯¹å‰ç«¯çŠ¶æ€ç®¡ç†çš„ç†è§£ä¸è¯¯è§£</h3>
<p>åç«¯å¼€å‘äººå‘˜å¾€å¾€ä¹ æƒ¯äºå°†ä¸šåŠ¡é€»è¾‘å’Œæ•°æ®ç®¡ç†æ”¾åœ¨æœåŠ¡å™¨ç«¯ï¼Œè®¤ä¸ºå‰ç«¯çŠ¶æ€ç®¡ç†è¿‡äºå¤æ‚å’Œæ··ä¹±ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸è§çš„ç†è§£ä¸è¯¯è§£ï¼š</p>
<ul>
<li>
<p><strong>æ•°æ®å¤„ç†ä¸é›†ä¸­</strong>ï¼šåç«¯å¼€å‘è€…å¯èƒ½ä¼šè®¤ä¸ºï¼Œå‰ç«¯çŠ¶æ€ç®¡ç†å°†æ•°æ®åˆ†æ•£å¤„ç†ï¼Œè¿™ä¸åç«¯çš„é›†ä¸­å¼æ•°æ®å¤„ç†ç†å¿µæ ¼æ ¼ä¸å…¥ã€‚ä»–ä»¬æ›´å€¾å‘äºå°†æ‰€æœ‰çš„çŠ¶æ€å­˜å‚¨åœ¨æ•°æ®åº“ä¸­ï¼Œè€Œä¸æ˜¯åœ¨å®¢æˆ·ç«¯å¤„ç†ã€‚</p>
</li>
<li>
<p><strong>çŠ¶æ€çš„ä¸ç¡®å®šæ€§</strong>ï¼šå‰ç«¯çš„çŠ¶æ€æ˜¯åŠ¨æ€å¯å˜çš„ï¼Œåç«¯å¯èƒ½ä¼šéš¾ä»¥ç†è§£è¿™ä¸€ç‚¹ã€‚ä¾‹å¦‚ï¼Œåœ¨å¤æ‚çš„å•é¡µåº”ç”¨ä¸­ï¼Œå‰ç«¯çŠ¶æ€å¯èƒ½ä¼šå—åˆ°ç”¨æˆ·äº¤äº’ã€å¼‚æ­¥è¯·æ±‚ç­‰å¤šé‡å› ç´ çš„å½±å“ï¼Œå¯¼è‡´çŠ¶æ€å˜åŒ–éš¾ä»¥é¢„æµ‹ã€‚</p>
</li>
<li>
<p><strong>è°ƒè¯•å›°éš¾</strong>ï¼šç”±äºå‰ç«¯çŠ¶æ€çš„å˜åŒ–ä¾èµ–äºå¤šä¸ªç»„ä»¶ï¼Œåç«¯å¼€å‘è€…å¯èƒ½ä¼šè®¤ä¸ºè°ƒè¯•å‰ç«¯çŠ¶æ€æ¯”è°ƒè¯•åç«¯é€»è¾‘æ›´ä¸ºå¤æ‚ã€‚ç¼ºä¹å¯è§†åŒ–å·¥å…·å’Œç›‘æ§æ‰‹æ®µæ—¶ï¼Œå‰ç«¯çŠ¶æ€çš„æ··ä¹±ä¼šè¿›ä¸€æ­¥åŠ æ·±è¿™ç§è¯¯è§£ã€‚</p>
</li>
</ul>
<h3 data-id="heading-24">å¦‚ä½•å®ç°å‰åç«¯çŠ¶æ€ç®¡ç†çš„ç»Ÿä¸€</h3>
<p>ä¸ºäº†å®ç°å‰åç«¯çŠ¶æ€ç®¡ç†çš„ç»Ÿä¸€ï¼Œå›¢é˜Ÿéœ€è¦å»ºç«‹æœ‰æ•ˆçš„æ²Ÿé€šæœºåˆ¶å’Œå·¥ä½œæµç¨‹ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å»ºè®®ï¼š</p>
<ol>
<li>
<p><strong>API è®¾è®¡ä¸çŠ¶æ€åŒæ­¥</strong>ï¼šåç«¯å¯ä»¥é€šè¿‡è®¾è®¡æ¸…æ™°çš„ APIï¼Œç¡®ä¿å‰ç«¯åœ¨è·å–å’Œæ›´æ–°çŠ¶æ€æ—¶å…·å¤‡ä¸€è‡´æ€§ã€‚ä¾‹å¦‚ï¼Œé€šè¿‡ RESTful API æˆ– GraphQL æä¾›æ•°æ®ï¼Œå‰ç«¯åœ¨å‘èµ·è¯·æ±‚æ—¶åº”æ˜ç¡®æ•°æ®ç»“æ„å’Œé¢„æœŸè¡Œä¸ºã€‚</p>
</li>
<li>
<p><strong>å…±äº«çŠ¶æ€æ¨¡å‹</strong>ï¼šé€šè¿‡æ„å»ºä¸€ä¸ªå…±äº«çš„çŠ¶æ€æ¨¡å‹æ–‡æ¡£ï¼Œç¡®ä¿å‰åç«¯å¼€å‘äººå‘˜åœ¨çŠ¶æ€ç®¡ç†çš„ç†è§£ä¸Šè¾¾æˆä¸€è‡´ã€‚è¿™å¯ä»¥åŒ…æ‹¬çŠ¶æ€çš„ç±»å‹ã€ç”Ÿå‘½å‘¨æœŸå’Œå˜æ›´æµç¨‹ã€‚</p>
</li>
<li>
<p><strong>å‰åç«¯åä½œå·¥å…·</strong>ï¼šä½¿ç”¨åä½œå·¥å…·ï¼ˆå¦‚ Postmanã€Swaggerï¼‰æ¥ç¼–å†™ API æ–‡æ¡£ï¼Œå¹¶ä¸å‰ç«¯å¼€å‘è€…å…±åŒæµ‹è¯•ï¼Œç¡®ä¿å‰ç«¯çš„çŠ¶æ€ç®¡ç†ä¸åç«¯çš„ä¸šåŠ¡é€»è¾‘ç›¸äº’å…¼å®¹ã€‚</p>
</li>
</ol>
<h3 data-id="heading-25">æœ€ä½³å®è·µï¼šæ¸…æ™°çš„çŠ¶æ€ç®¡ç†ç­–ç•¥</h3>
<p>æœ€åï¼Œå»ºç«‹ä¸€å¥—æ¸…æ™°çš„çŠ¶æ€ç®¡ç†ç­–ç•¥æ˜¯è‡³å…³é‡è¦çš„ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›æœ€ä½³å®è·µï¼š</p>
<ul>
<li>
<p><strong>ä½¿ç”¨çŠ¶æ€ç®¡ç†åº“</strong>ï¼šé€‰æ‹©åˆé€‚çš„çŠ¶æ€ç®¡ç†åº“ï¼Œå¹¶ç¡®ä¿æ‰€æœ‰å›¢é˜Ÿæˆå‘˜éƒ½ç†Ÿæ‚‰å…¶ä½¿ç”¨ã€‚ä¸ºé¿å…è¿‡åº¦è®¾è®¡ï¼ŒåŠ¡å¿…é€‰æ‹©é€‚åˆé¡¹ç›®è§„æ¨¡å’Œå¤æ‚åº¦çš„å·¥å…·ã€‚</p>
</li>
<li>
<p><strong>æ–‡æ¡£åŒ–çŠ¶æ€ç®¡ç†æµç¨‹</strong>ï¼šè¯¦ç»†è®°å½•çŠ¶æ€å˜åŒ–çš„æµç¨‹ï¼ŒåŒ…æ‹¬ä½•æ—¶ã€ä¸ºä½•ä»¥åŠå¦‚ä½•æ”¹å˜çŠ¶æ€ã€‚è¿™å¯¹äºæ–°åŠ å…¥çš„å›¢é˜Ÿæˆå‘˜å°¤ä¸ºé‡è¦ã€‚</p>
</li>
<li>
<p><strong>çŠ¶æ€å˜æ›´çš„å¯è¿½è¸ªæ€§</strong>ï¼šåˆ©ç”¨ä¸­é—´ä»¶ï¼ˆå¦‚ Redux middlewareï¼‰è®°å½•çŠ¶æ€çš„å˜åŒ–å†å²ï¼Œæ–¹ä¾¿è°ƒè¯•å’Œå›æº¯ã€‚</p>
</li>
<li>
<p><strong>æŒç»­çš„æ²Ÿé€šä¸åé¦ˆ</strong>ï¼šå‰åç«¯å›¢é˜Ÿä¹‹é—´åº”ä¿æŒæŒç»­çš„æ²Ÿé€šï¼Œå®šæœŸè¿›è¡Œå¤ç›˜å’Œåé¦ˆï¼Œä»¥è°ƒæ•´çŠ¶æ€ç®¡ç†ç­–ç•¥ï¼Œç¡®ä¿åŒæ–¹çš„ç†è§£ä¸éœ€æ±‚å¾—åˆ°æ»¡è¶³ã€‚</p>
</li>
</ul>
<p>é€šè¿‡ä¸Šè¿°ç­–ç•¥ï¼Œåç«¯å¼€å‘è€…å¯ä»¥æ›´å¥½åœ°ç†è§£å‰ç«¯çš„çŠ¶æ€ç®¡ç†ï¼Œå¹¶ä¸å‰ç«¯å›¢é˜Ÿå»ºç«‹èµ·æ›´åŠ é«˜æ•ˆçš„åä½œå…³ç³»ã€‚è¿™ä¸ä»…èƒ½æé«˜å¼€å‘æ•ˆç‡ï¼Œè¿˜èƒ½æ”¹å–„äº§å“è´¨é‡ï¼Œæœ€ç»ˆå®ç°å‰åç«¯çš„å’Œè°ç»Ÿä¸€ã€‚</p>
<h2 data-id="heading-26">æ€»ç»“ï¼šèµ°å‘å…¨æ ˆçš„å‰æ™¯ä¸æŒ‘æˆ˜</h2>
<p>åœ¨å½“ä»Šå¿«é€Ÿå‘å±•çš„æŠ€æœ¯ç¯å¢ƒä¸­ï¼Œå‰åç«¯çš„ç•Œé™é€æ¸æ¨¡ç³Šï¼Œå‰åç«¯åä½œçš„æœªæ¥å‘å±•è¶‹åŠ¿æ„ˆåŠ æ˜æ˜¾ã€‚å…¨æ ˆå¼€å‘è€…çš„è§’è‰²å˜å¾—è¶Šæ¥è¶Šé‡è¦ï¼Œä»–ä»¬ä¸ä»…éœ€è¦æŒæ¡å‰ç«¯å’Œåç«¯çš„æŠ€æœ¯æ ˆï¼Œè¿˜è¦å…·å¤‡è·¨é¢†åŸŸçš„åä½œèƒ½åŠ›ã€‚æœ¬æ–‡å°†ä»ä¸‰ä¸ªæ–¹é¢æ¢è®¨å…¨æ ˆå¼€å‘çš„å‰æ™¯ä¸æŒ‘æˆ˜ã€‚</p>
<h3 data-id="heading-27">å‰åç«¯åä½œçš„æœªæ¥å‘å±•è¶‹åŠ¿</h3>
<p>éšç€å¾®æœåŠ¡æ¶æ„çš„æ™®åŠä»¥åŠ API é©±åŠ¨å¼€å‘æ¨¡å¼çš„å…´èµ·ï¼Œå‰åç«¯ä¹‹é—´çš„åä½œå°†æ›´åŠ ç´§å¯†ã€‚ç°ä»£åº”ç”¨ç¨‹åºéœ€è¦é«˜æ•ˆã€çµæ´»çš„æ¶æ„ä»¥åº”å¯¹ä¸æ–­å˜åŒ–çš„ä¸šåŠ¡éœ€æ±‚ã€‚å‰ç«¯æ¡†æ¶å¦‚ Reactã€Vue å’Œ Angular æä¾›äº†æ›´å¥½çš„ç”¨æˆ·ä½“éªŒå’ŒçŠ¶æ€ç®¡ç†ï¼ŒåŒæ—¶åç«¯æœåŠ¡å¦‚ Node.jsã€GraphQL ä¹Ÿåœ¨ä¸ºå¼€å‘æä¾›æ›´ç®€æ´çš„è§£å†³æ–¹æ¡ˆã€‚</p>
<p>ä¾‹å¦‚ï¼Œåœ¨ä¸€ä¸ªçœŸå®çš„é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº† GraphQL æ¥æ›¿ä»£ RESTful APIã€‚è¿™æ ·åšçš„å¥½å¤„åœ¨äºï¼Œå‰ç«¯å¯ä»¥æ ¹æ®éœ€è¦è¯·æ±‚ç‰¹å®šçš„æ•°æ®ï¼Œé¿å…äº†è¿‡å¤šçš„ç½‘ç»œè¯·æ±‚å’Œæ•°æ®ä¼ è¾“ã€‚è¿™ç§çµæ´»æ€§è®©å‰åç«¯å›¢é˜Ÿæ›´å®¹æ˜“è¿›è¡Œè¿­ä»£å’Œåä½œï¼Œå¹¶å‡å°‘äº†æ²Ÿé€šæˆæœ¬ã€‚</p>
<h3 data-id="heading-28">å…¨æ ˆå¼€å‘è€…éœ€è¦æŒæ¡çš„æŠ€èƒ½</h3>
<p>ä½œä¸ºå…¨æ ˆå¼€å‘è€…ï¼ŒæŒæ¡çš„æŠ€èƒ½èŒƒå›´æ˜¯ç›¸å½“å¹¿æ³›çš„ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¿…å¤‡æŠ€èƒ½ï¼š</p>
<ol>
<li><strong>å‰ç«¯æŠ€æœ¯</strong>ï¼šç†Ÿæ‚‰ HTMLã€CSS å’Œ JavaScriptï¼Œå¹¶è‡³å°‘æŒæ¡ä¸€æ¬¾ä¸»æµå‰ç«¯æ¡†æ¶ï¼ˆå¦‚ React æˆ– Vueï¼‰ã€‚</li>
<li><strong>åç«¯æŠ€æœ¯</strong>ï¼šäº†è§£è‡³å°‘ä¸€ç§åç«¯è¯­è¨€ï¼ˆå¦‚ Node.jsã€Python æˆ– Javaï¼‰ï¼Œç†Ÿæ‚‰æ•°æ®åº“è®¾è®¡å’Œæ“ä½œï¼ˆSQL å’Œ NoSQLï¼‰ã€‚</li>
<li><strong>å¼€å‘å·¥å…·</strong>ï¼šæŒæ¡ç‰ˆæœ¬æ§åˆ¶å·¥å…·ï¼ˆå¦‚ Gitï¼‰ï¼Œç†è§£ CI/CD æµç¨‹ï¼Œèƒ½å¤Ÿä½¿ç”¨ Docker ç­‰å®¹å™¨åŒ–æŠ€æœ¯ã€‚</li>
<li><strong>è·¨åŸŸçŸ¥è¯†</strong>ï¼šäº†è§£ç½‘ç»œåè®®ã€API è®¾è®¡ä»¥åŠåŸºæœ¬çš„äº‘æœåŠ¡ï¼ˆå¦‚ AWSã€Azureï¼‰ã€‚</li>
</ol>
<p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„åç«¯ç¤ºä¾‹ï¼Œä½¿ç”¨ Node.js å’Œ Express æ­å»ºä¸€ä¸ªåŸºæœ¬çš„ APIï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> express = <span class="hljs-built_in">require</span>(<span class="hljs-string">'express'</span>);
<span class="hljs-keyword">const</span> app = <span class="hljs-title function_">express</span>();
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">PORT</span> = <span class="hljs-number">3000</span>;

app.<span class="hljs-title function_">use</span>(express.<span class="hljs-title function_">json</span>());

app.<span class="hljs-title function_">get</span>(<span class="hljs-string">'/api/users'</span>, <span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> {
    res.<span class="hljs-title function_">json</span>([{ <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'John Doe'</span> }, { <span class="hljs-attr">id</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'Jane Doe'</span> }]);
});

app.<span class="hljs-title function_">listen</span>(<span class="hljs-variable constant_">PORT</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Server is running on http://localhost:<span class="hljs-subst">${PORT}</span>`</span>);
});
</code></pre>
<p>åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å¿«é€Ÿæ­å»ºäº†ä¸€ä¸ªç®€å•çš„ APIï¼Œè¿™è¡¨æ˜å…¨æ ˆå¼€å‘è€…èƒ½å¤Ÿè½»æ¾å¤„ç†å‰ç«¯å’Œåç«¯çš„éœ€æ±‚ã€‚</p>
<h3 data-id="heading-29">æŒç»­å­¦ä¹ ä¸é€‚åº”çš„å¿…è¦æ€§</h3>
<p>æŠ€æœ¯çš„å¿«é€Ÿè¿­ä»£ä½¿å¾—æŒç»­å­¦ä¹ æˆä¸ºå…¨æ ˆå¼€å‘è€…çš„å¿…å¤‡ç´ è´¨ã€‚æ— è®ºæ˜¯æ–°çš„æ¡†æ¶ã€å·¥å…·è¿˜æ˜¯å¼€å‘æ–¹æ³•ï¼Œä¿æŒå¯¹æ–°çŸ¥è¯†çš„æ•æ„Ÿæ€§æ˜¯éå¸¸é‡è¦çš„ã€‚å‚ä¸å¼€æºé¡¹ç›®ã€é˜…è¯»æŠ€æœ¯åšå®¢ã€å‚åŠ æŠ€æœ¯ä¼šè®®ç­‰éƒ½æ˜¯æå‡è‡ªèº«èƒ½åŠ›çš„æœ‰æ•ˆé€”å¾„ã€‚</p>
<p>ä¾‹å¦‚ï¼Œåœ¨æˆ‘è‡ªå·±çš„å­¦ä¹ è¿‡ç¨‹ä¸­ï¼Œæˆ‘å‘ç°é€šè¿‡å‚ä¸å¼€æºé¡¹ç›®çš„æ–¹å¼ï¼Œä¸ä»…èƒ½å¤Ÿæå‡æˆ‘çš„ç¼–ç èƒ½åŠ›ï¼Œè€Œä¸”èƒ½å¤Ÿè®©æˆ‘äº†è§£å›¢é˜Ÿåä½œã€ä»£ç å®¡æŸ¥ç­‰é‡è¦çš„å·¥ä½œæµç¨‹ã€‚è¿™äº›ç»éªŒå¯¹æˆ‘ä½œä¸ºå…¨æ ˆå¼€å‘è€…çš„æˆé•¿æä¸ºé‡è¦ã€‚</p>
<p>æ€»ç»“æ¥è¯´ï¼Œèµ°å‘å…¨æ ˆå¼€å‘æ˜¯ä¸€æ¡å……æ»¡æœºé‡ä¸æŒ‘æˆ˜çš„é“è·¯ã€‚å…¨æ ˆå¼€å‘è€…ä¸ä»…è¦æ‹¥æŠ±æŠ€æœ¯çš„å˜åŒ–ï¼Œè¿˜è¦ç§¯æé€‚åº”æ–°çš„å·¥ä½œæ¨¡å¼å’Œå›¢é˜Ÿåä½œæ–¹å¼ã€‚æœ€ç»ˆï¼Œè¿™å°†æ¨åŠ¨æˆ‘ä»¬åœ¨å‰åç«¯åä½œä¸­å®ç°æ›´é«˜æ•ˆçš„æˆæœã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç”¨ Three.js + Vue 3 æ‰“é€ é«˜æ€§èƒ½ 3D å¤ªé˜³ç³»ä»¿çœŸç³»ç»Ÿï¼šä»è½¨é“è®¡ç®—åˆ°æ²‰æµ¸å¼äº¤äº’]]></title>    <link>https://juejin.cn/post/7598732691769425971</link>    <guid>https://juejin.cn/post/7598732691769425971</guid>    <pubDate>2026-01-25T02:18:07.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7598732691769425971" data-draft-id="7598801700049797158" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç”¨ Three.js + Vue 3 æ‰“é€ é«˜æ€§èƒ½ 3D å¤ªé˜³ç³»ä»¿çœŸç³»ç»Ÿï¼šä»è½¨é“è®¡ç®—åˆ°æ²‰æµ¸å¼äº¤äº’"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,three.js"/> <meta itemprop="datePublished" content="2026-01-25T02:18:07.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ—¥è½ä»¥åæ½œå…¥æ·±æµ·"/> <meta itemprop="url" content="https://juejin.cn/user/2045559991451175"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç”¨ Three.js + Vue 3 æ‰“é€ é«˜æ€§èƒ½ 3D å¤ªé˜³ç³»ä»¿çœŸç³»ç»Ÿï¼šä»è½¨é“è®¡ç®—åˆ°æ²‰æµ¸å¼äº¤äº’
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2045559991451175/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ—¥è½ä»¥åæ½œå…¥æ·±æµ·
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-25T02:18:07.000Z" title="Sun Jan 25 2026 02:18:07 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="" data-highlight-key="a11y-dark">.hljs-comment,.hljs-quote{color:#d4d0ab}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#ffa07a}.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#f5ab35}.hljs-attribute{color:gold}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:#abe338}.hljs-section,.hljs-title{color:#00e0e0}.hljs-keyword,.hljs-selector-tag{color:#dcc6e0}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#2b2b2b;color:#f8f8f2}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}@media screen and (-ms-high-contrast:active){.hljs-addition,.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-comment,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-quote,.hljs-string,.hljs-symbol,.hljs-type{color:highlight}.hljs-keyword,.hljs-selector-tag{font-weight:700}}</style><blockquote>
<p>â</p>
<p><strong>ã€Œå‰è¨€ï¼šä¸€ä¸ªçˆ¶äº²çš„â€œæ˜Ÿé™…ç¤¼ç‰©â€ã€</strong></p>
<p>æ–°å¹´åˆšè¿‡çš„ä¸€å¤©ï¼Œæˆ‘çœ‹è§ä¸åˆ°å…­å²çš„å„¿å­ååœ¨ä¹¦æ¡Œå‰ï¼Œå°å¿ƒç¿¼ç¿¼åœ°ç”¨å½©çº¸å‰ªå‡ºä¸€ä¸ªä¸ªåœ†ç‰‡ï¼Œä¸Šé¢ç”»çš„æ˜¯æ°´æ˜Ÿã€é‡‘æ˜Ÿã€åœ°çƒç­‰å¤ªé˜³ç³»çš„è¡Œæ˜Ÿã€‚ä»–æŠŠè¡Œæ˜Ÿè´´åœ¨ç¡¬çº¸æ¿ä¸Šï¼Œç„¶åæŠŠé’‰å­å›ºå®šåœ¨ç¡¬çº¸æ¿ä¸­å¿ƒçš„å¤ªé˜³ä¸Šï¼Œå…´å¥‹åœ°å‘Šè¯‰æˆ‘ï¼šâ€œçˆ¸çˆ¸ï¼Œè¿™å°±æ˜¯å®‡å®™ï¼â€</p>
<p>é‚£ä¸€åˆ»ï¼Œæˆ‘æ—¢æ„ŸåŠ¨åˆæœ‰äº›é—æ†¾ï¼šè¿™ä¸ªé™æ€çš„ã€ç­‰è·æ’åˆ—çš„çº¸è´¨æ¨¡å‹ï¼Œç¦»çœŸå®çš„å¤ªé˜³ç³»å®åœ¨å¤ªè¿œäº†ã€‚è¿‘æ—¥ç‚¹åŠ é€Ÿçš„å“ˆé›·å½—æ˜Ÿã€å€¾æ–œè‡ªè½¬çš„å¤©ç‹æ˜Ÿã€è¢«æ½®æ±é”å®šçš„æœˆçƒâ€¦â€¦è¿™äº›åŠ¨æ€çš„å®‡å®™éŸµå¾‹ï¼Œå¦‚ä½•è®©ä»–çœ‹è§ï¼Ÿ</p>
<p>çªç„¶æŸä¸€å¤©ï¼Œæˆ‘æ„è¯†åˆ°æˆ‘æ˜¯ä¸ªå‰ç«¯å¼€å‘å·¥ç¨‹å¸ˆå•Šï¼Œå¯¹äºçœŸå®ä¸–ç•Œçš„è®¡ç®—æœºå¯è§†åŒ–ä¸å°±æ˜¯æˆ‘æ“…é•¿çš„å—ï¼Ÿäºæ˜¯ï¼Œæˆ‘å†³å®šç”¨ä»£ç ä¸ºä»–é‡å†™ä¸€ä¸ªå¤ªé˜³ç³»â€”â€”ä¸€ä¸ªæ—¢ä¸¥è°¨ï¼ˆéµå¾ªå¤©ä½“åŠ›å­¦ï¼‰åˆé…·ç‚«ï¼ˆç§‘å¹»è§†è§‰é£æ ¼ï¼‰çš„ 3D ä»¿çœŸç³»ç»Ÿã€‚å°±è¿™æ ·ï¼Œä¸€ä¸ªåŒ…å« 5000+ åŠ¨æ€å¤©ä½“ã€æ”¯æŒ 6DOF è‡ªç”±æ¢ç´¢çš„é«˜æ€§èƒ½å¤ªé˜³ç³»ä»¿çœŸç³»ç»Ÿè¯ç”Ÿäº†ï¼Œæˆ‘çš„å­©å­èƒ½åƒé©¾é©¶é£èˆ¹ä¸€æ ·ï¼Œäº²æ‰‹è§¦æ‘¸æ˜Ÿè¾°çš„è½¨è¿¹ã€‚</p>
<p>è¿™ç¯‡æ–‡ç« ï¼Œæˆ‘å°†è¯¦ç»†ä»‹ç»å¦‚ä½•åŸºäº Three.js ä¸ Vue 3 ç”Ÿæ€ï¼Œå®ç°é«˜æ€§èƒ½å¤ªé˜³ç³»ä»¿çœŸç³»ç»Ÿã€‚æˆ‘å°†ä»å¤©ä½“æ¨¡å‹ä¸æè´¨ä¼˜åŒ–ï¼Œåˆ°é«˜ç²¾åº¦è½¨é“è¿åŠ¨æ¨¡æ‹Ÿï¼Œå†åˆ°æ²‰æµ¸å¼äº¤äº’è®¾è®¡ï¼Œä¸€æ­¥æ­¥è®°å½•å®ç°è¿™ä¸ªå¤æ‚çš„ç³»ç»Ÿçš„æ­¥éª¤ã€‚</p>
<p>å½“å‰é¡¹ç›®å·²ä¸Šçº¿ï¼Œæ¬¢è¿è®¿é—®<a title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target=">ï¼šå¤ªé˜³ç³»3Då¯è§†åŒ–</a></p>
<p>â</p>
</blockquote>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/db89e797e7c54384988134954a2d6151~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pel6JC95Lul5ZCO5r2c5YWl5rex5rW3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769912286&amp;x-signature=5W1mqiSlpXBrkIsgFAgfL7Uiwmk%3D" alt="å¾®ä¿¡å›¾ç‰‡_20260123103441_6_236.jpg" width="100%" loading="lazy"/>
<h2 data-id="heading-0">1. å¤©ä½“æ¨¡å‹ä¸æè´¨ä¼˜åŒ–ï¼šçœŸå®ä¸å¯è§æ€§çš„å¹³è¡¡</h2>
<p>å¤ªç©ºç¯å¢ƒæå…¶é»‘æš—ï¼Œå•çº¯ä¾èµ–ç‰©ç†å…‰ç…§ï¼ˆPBRï¼‰ä¼šå¯¼è‡´èƒŒå…‰é¢ä¸€ç‰‡æ­»é»‘ï¼Œä¸¥é‡å½±å“å­©å­çš„è§‚å¯Ÿä½“éªŒã€‚æˆ‘é‡‡ç”¨äº†ä¸€å¥— <strong>ã€Œâ€œåŒæ¨¡æè´¨ç³»ç»Ÿâ€ã€</strong>ã€‚</p>
<ul>
<li><strong>ã€Œæ··åˆå…‰ç…§ç­–ç•¥ã€</strong>ï¼šæ‰€æœ‰è¡Œæ˜Ÿç»Ÿä¸€ä½¿ç”¨ <code>MeshStandardMaterial</code>ï¼Œå¹¶é¢„åŠ è½½åŒæºçº¹ç†ä½œä¸º <code>map</code>ï¼ˆæ¼«åå°„è´´å›¾ï¼‰å’Œ <code>emissiveMap</code>ï¼ˆè‡ªå‘å…‰è´´å›¾ï¼‰ã€‚</li>
<li><strong>ã€Œå·®å¼‚åŒ–å‚æ•°ã€</strong>ï¼šé’ˆå¯¹æœˆçƒã€æ°´æ˜Ÿç­‰å²©çŸ³å¤©ä½“ï¼Œè®¾ç½®é«˜ç²—ç³™åº¦ï¼ˆ<code>roughness: 0.9</code>ï¼‰ï¼›è€Œå¯¹åœ°çƒã€æµ·ç‹æ˜Ÿç­‰ï¼Œé™ä½ç²—ç³™åº¦ä»¥æ¨¡æ‹Ÿå¤§æ°”åå…‰ã€‚</li>
<li><strong>ã€Œå¼‚å½¢å¤©ä½“ã€</strong>ï¼šå¯¹äºå¦Šç¥æ˜Ÿï¼ˆHaumeaï¼‰è¿™æ ·çš„æ¤­çƒä½“ï¼Œç›´æ¥é€šè¿‡ <code>mesh.scale.set(2.0, 1.0, 1.0)</code> è¿›è¡Œéå‡åŒ€ç¼©æ”¾ï¼Œé¿å…åŠ è½½é¢å¤–çš„æ¨¡å‹æ–‡ä»¶ã€‚</li>
</ul>
<blockquote>
<p>â</p>
<p><strong>ã€ŒWhy?ã€</strong> è¿™ç§è®¾è®¡å…è®¸åœ¨â€œç§‘å­¦æ¨¡å¼â€ï¼ˆçœŸå®å…‰å½±ï¼ŒèƒŒå…‰ä¸å¯è§ï¼‰å’Œâ€œè§†è§‰å¢å¼ºæ¨¡å¼â€ï¼ˆå¼€å¯è‡ªå‘å…‰ï¼Œå…¨è§’åº¦å¯è§ï¼‰ä¹‹é—´æ— ç¼åˆ‡æ¢ï¼Œä»…éœ€è°ƒæ•´ <code>emissiveIntensity</code> ä¸€ä¸ªå‚æ•°â€”â€”è®©å­©å­æ— è®ºä»å“ªä¸ªè§’åº¦çœ‹ï¼Œéƒ½èƒ½çœ‹æ¸…è¡Œæ˜Ÿçš„ç»†èŠ‚ã€‚</p>
<p>â</p>
</blockquote>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d915c3a6b44a4da08116274fc5508765~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pel6JC95Lul5ZCO5r2c5YWl5rex5rW3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769912286&amp;x-signature=IjvvFGYxp8eHoW1P6N8NXykDYIw%3D" alt="å¾®ä¿¡å›¾ç‰‡_20260123095808_1_236.png" width="100%" loading="lazy"/>
<h2 data-id="heading-1">2. æ•°æ®çš„äººæ–‡æ¸©åº¦ï¼šç»™ 6 å²å­©å­çš„å®‡å®™è¯´æ˜ä¹¦</h2>
<p>æŠ€æœ¯ä¸åº”æ˜¯å†°å†·çš„å‚æ•°å †ç Œã€‚ä¸ºäº†è®©è¿™ä¸ªç³»ç»ŸçœŸæ­£æˆä¸ºå­©å­çš„â€œå®‡å®™å¯è’™ä¹¦â€ï¼Œæˆ‘å¯¹æ‰€æœ‰å¤©ä½“çš„æè¿°æ•°æ®è¿›è¡Œäº† <strong>ã€Œâ€œé€‚é¾„åŒ–é‡æ„â€ã€</strong>ã€‚</p>
<ul>
<li><strong>ã€Œæ‹ŸäººåŒ–éšå–»ã€</strong>ï¼šå°†æ¯ç‡¥çš„ <code>celestialData.js</code> è½¬åŒ–ä¸ºå­©å­å¬å¾—æ‡‚çš„æ•…äº‹ã€‚ä¾‹å¦‚ï¼Œå°†â€œåœ°çƒå«æ˜Ÿâ€æè¿°ä¸ºâ€œåœ°çƒæœ€å¥½çš„æœ‹å‹â€ï¼Œå°†â€œæœ¨æ˜Ÿå¤§çº¢æ–‘â€æ¯”å–»ä¸ºâ€œåˆ®äº†å‡ ç™¾å¹´çš„è¶…çº§å¤§é£æš´â€ï¼Œå°†â€œå¤©ç‹æ˜Ÿçš„è‡ªè½¬å€¾è§’â€å½¢å®¹ä¸ºâ€œèººç€è½¬åœˆåœˆçš„æ‡’æ´‹æ´‹å†°çƒâ€ã€‚</li>
<li><strong>ã€Œæƒ…æ„ŸåŒ–è¿æ¥ã€</strong>ï¼šåœ¨æè¿°ä¸­èå…¥ç”Ÿæ´»åœºæ™¯ï¼ˆå¦‚â€œæ™šä¸Šç»™æˆ‘ä»¬ç…§äº®å›å®¶çš„è·¯â€ï¼‰ï¼Œå»ºç«‹å­©å­ä¸å¤©ä½“ä¹‹é—´çš„æƒ…æ„Ÿçº½å¸¦ã€‚</li>
</ul>
<blockquote>
<p>â</p>
<p><strong>ã€ŒWhy?ã€</strong> è¿™ä¸€å±‚â€œè½¯æ•°æ®â€çš„ä¼˜åŒ–ï¼Œæ¯”ä»»ä½•é«˜æ·±çš„æ¸²æŸ“æŠ€æœ¯éƒ½æ›´èƒ½æ‰“åŠ¨å­©å­çš„å¿ƒï¼Œå®ƒè®©å†°å†·çš„ä»£ç æœ‰äº†æ¸©åº¦ã€‚</p>
<p>â</p>
</blockquote>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a97db778d3ad45608c63f7b2c10785b9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pel6JC95Lul5ZCO5r2c5YWl5rex5rW3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769912286&amp;x-signature=llJT3%2BcOliVw7Udy%2BYrZRDRETeU%3D" alt="image.png" width="100%" loading="lazy"/>
<h2 data-id="heading-2">3. é«˜ç²¾åº¦è½¨é“è¿åŠ¨æ¨¡æ‹Ÿï¼šä»å¼€æ™®å‹’åˆ°æ½®æ±é”å®š</h2>
<p>ä¸ºäº†è¿˜åŸçœŸå®çš„ç‰©ç†ç‰¹æ€§ï¼Œç®€å•çš„ <code>rotation.y += speed</code> æ˜¯è¿œè¿œä¸å¤Ÿçš„ã€‚ç³»ç»Ÿåœ¨ç‰©ç†æ¨¡æ‹Ÿå±‚é¢åšäº†ä¸¤é¡¹å…³é”®å‡çº§ï¼š</p>
<h3 data-id="heading-3">3.1 å¼€æ™®å‹’æ–¹ç¨‹æ±‚è§£å™¨</h3>
<p>è¿˜åŸâ€œè¿‘æ—¥ç‚¹å¿«ã€è¿œæ—¥ç‚¹æ…¢â€çš„ç‰©ç†ç‰¹æ€§ï¼š</p>
<ul>
<li><strong>ã€Œæ ¸å¿ƒç®—æ³•ã€</strong>ï¼šåŸºäºç‰›é¡¿è¿­ä»£æ³•æ±‚è§£åå¿ƒè¿‘ç‚¹è§’ Eï¼š<code>M = E - e * Math.sin(E)</code>ã€‚</li>
<li><strong>ã€Œåæ ‡è½¬æ¢ã€</strong>ï¼šå°†æ±‚è§£å‡ºçš„çœŸè¿‘ç‚¹è§’è½¬åŒ–ä¸º 3D åæ ‡ï¼Œå¹¶åº”ç”¨è½¨é“å€¾è§’ï¼ˆiï¼‰ã€å‡äº¤ç‚¹èµ¤ç»ï¼ˆÎ©ï¼‰å’Œè¿‘æ—¥ç‚¹å¹…è§’ï¼ˆÏ‰ï¼‰ä¸‰ä¸ªæ¬§æ‹‰è§’æ—‹è½¬ã€‚</li>
</ul>
<h3 data-id="heading-4">3.2 æ½®æ±é”å®šï¼ˆTidal Lockingï¼‰ç®—æ³•</h3>
<p>ä¸ºäº†è§£ç­”â€œä¸ºä»€ä¹ˆæˆ‘ä»¬æ°¸è¿œçœ‹ä¸åˆ°æœˆçƒèƒŒé¢â€è¿™ä¸€ç»å…¸é—®é¢˜ï¼Œæˆ‘é‡å†™äº†æœˆçƒçš„è‡ªè½¬é€»è¾‘ï¼š</p>
<ul>
<li><strong>ã€ŒåŠ¨æ€ç›¸ä½åŒæ­¥ã€</strong>ï¼šä¸å†ä½¿ç”¨å›ºå®šçš„è‡ªè½¬é€Ÿåº¦ï¼Œè€Œæ˜¯å®æ—¶è·å–æœˆçƒå½“å‰çš„å…¬è½¬ç›¸ä½è§’ï¼ˆOrbit Phaseï¼‰ã€‚</li>
<li><strong>ã€Œçˆ¶çº§å‚ç…§ç³»è¡¥å¿ã€</strong>ï¼šæœˆçƒä½œä¸ºåœ°çƒçš„å­å¯¹è±¡ï¼ˆChild Meshï¼‰ï¼Œå…¶æ—‹è½¬å—çˆ¶çº§ï¼ˆåœ°çƒï¼‰è‡ªè½¬å åŠ å½±å“ã€‚ç®—æ³•é€šè¿‡ <code>effectiveAngle -= parent.rotation.y</code> æ¶ˆé™¤çˆ¶çº§å¹²æ‰°ï¼Œå¹¶åŠ ä¸Š <code>Math.PI / 2</code> çš„ç›¸ä½åç§»ï¼Œç¡®ä¿æœˆçƒæ°¸è¿œä»¥åŒä¸€é¢æœå‘åœ°çƒã€‚</li>
</ul>

<pre><code class="hljs language-ini" lang="ini">//Â src/models/solarSystem/motionSimulator.js

//Â ä¿®æ­£ï¼šå¦‚æœçˆ¶å®¹å™¨ä¹Ÿåœ¨æ—‹è½¬ï¼ˆå¦‚åœ°çƒï¼‰ï¼Œéœ€è¦è¡¥å¿çˆ¶å®¹å™¨çš„æ—‹è½¬è§’åº¦
letÂ <span class="hljs-attr">effectiveAngle</span>Â =Â mesh.userData.currentAngle<span class="hljs-comment">;</span>

//Â æ£€æŸ¥çˆ¶å®¹å™¨æ˜¯å¦ä¸ºæ—‹è½¬çš„è¡Œæ˜Ÿï¼ˆéÂ Sceneï¼‰
ifÂ (mesh.parentÂ &amp;&amp;Â mesh.parent.isMeshÂ &amp;&amp;Â mesh.parent.nameÂ !==Â 'Scene')Â {
Â Â Â Â //Â å‡å»çˆ¶å®¹å™¨çš„æ—‹è½¬è§’åº¦ï¼Œä½¿å¾—å­å¤©ä½“ç›¸å¯¹äºä¸–ç•Œåæ ‡ç³»çš„è§’åº¦ä¿æŒä¸ºÂ currentAngle
Â Â Â Â effectiveAngleÂ <span class="hljs-attr">-</span>=Â mesh.parent.rotation.y<span class="hljs-comment">;</span>
}

<span class="hljs-attr">mesh.position.x</span>Â =Â rÂ *Â Math.cos(effectiveAngle)<span class="hljs-comment">;</span>
<span class="hljs-attr">mesh.position.z</span>Â =Â rÂ *Â Math.sin(effectiveAngle)<span class="hljs-comment">;</span>

//Â ---Â è‡ªè½¬è¿åŠ¨è®¡ç®—Â ---
//Â ç‰¹æ®Šå¤„ç†ï¼šæ½®æ±é”å®šÂ (TidalÂ Locking)
ifÂ (<span class="hljs-attr">data.name</span>Â ===Â <span class="hljs-string">'Moon'</span>)Â {
Â Â Â Â //Â å¯¹äºæœˆçƒï¼Œè‡ªè½¬è§’åº¦Â =Â (ä¿®æ­£åçš„è½¨é“è§’åº¦)Â +Â ç›¸ä½åç§»
Â Â Â Â //Â 1.Â æœˆçƒä½ç½®è§’(Local)Â =Â effectiveAngle
Â Â Â Â //Â 2.Â ç›®æ ‡æœå‘è§’(Local)Â =Â effectiveAngleÂ +Â Math.PIÂ (æŒ‡å‘åŸç‚¹)
Â Â Â Â //Â 3.Â åˆå§‹æœå‘(+Zè½´)Â =Â Math.PIÂ /Â 2
Â Â Â Â //Â 4.Â éœ€è¦çš„æ—‹è½¬é‡Â =Â ç›®æ ‡æœå‘è§’Â -Â åˆå§‹æœå‘Â =Â effectiveAngleÂ +Â Math.PIÂ /Â 2
Â Â Â Â <span class="hljs-attr">mesh.rotation.y</span>Â =Â effectiveAngleÂ +Â Math.PIÂ /Â <span class="hljs-number">2</span><span class="hljs-comment">;</span>
}
</code></pre>
<blockquote>
<p>â</p>
<p><strong>ã€ŒWhy?ã€</strong> å½“å­©å­é©¾é©¶é£èˆ¹ç»•åˆ°æœˆçƒèƒŒé¢ï¼Œçœ‹åˆ°é‚£ç‰‡é™Œç”Ÿçš„æ™¯è±¡æ—¶ï¼Œä»–å¯¹â€œåŒæ­¥è‡ªè½¬â€çš„ç†è§£å°†æ¯”ä¹¦æœ¬ä¸Šçš„å®šä¹‰æ·±åˆ»ç™¾å€ã€‚</p>
<p>â</p>
</blockquote>
<h2 data-id="heading-5">4. å¤§è§„æ¨¡ç²’å­ç³»ç»Ÿä¼˜åŒ–ï¼š5000+ å°å¤©ä½“çš„ 60FPS ä¹‹è·¯</h2>
<p>æŸ¯ä¼Šä¼¯å¸¦ï¼ˆKuiper Beltï¼‰åŒ…å«æ•°åƒé¢—å†°è´¨å¤©ä½“ï¼Œå¦‚æœä¸ºæ¯ä¸ªå¤©ä½“åˆ›å»ºä¸€ä¸ª <code>Mesh</code>ï¼ŒDraw Call çš„æ•°é‡å°†ç¬é—´æ‹–å®æµè§ˆå™¨ã€‚</p>
<ul>
<li><strong>ã€ŒInstancedMesh æŠ€æœ¯ã€</strong>ï¼šä½¿ç”¨ <code>THREE.InstancedMesh</code> ä¸€æ¬¡æ€§æ¸²æŸ“ 5000 ä¸ªå°è¡Œæ˜Ÿå®ä¾‹ã€‚</li>
<li><strong>ã€Œå†…å­˜å¤ç”¨ã€</strong>ï¼šæ‰€æœ‰å°è¡Œæ˜Ÿå…±äº«åŒä¸€ä¸ª <code>DodecahedronGeometry</code>ï¼ˆåäºŒé¢ä½“ï¼Œä½å¤šè¾¹å½¢æ¨¡æ‹Ÿå²©çŸ³ï¼‰å’Œ <code>MeshBasicMaterial</code>ï¼ˆä¸å‚ä¸å…‰ç…§è®¡ç®—ï¼Œæè‡´æ€§èƒ½ï¼‰ã€‚</li>
<li><strong>ã€ŒåŠ¨æ€æ›´æ–°ã€</strong>ï¼šåœ¨ <code>render</code> å¾ªç¯ä¸­ï¼Œä»…æ›´æ–°å˜æ¢çŸ©é˜µ <code>matrix</code> è€Œéé‡å»ºå¯¹è±¡ã€‚</li>
</ul>

<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">//Â src/models/solarSystem/kuiperBeltSystem.js</span>

<span class="hljs-comment">//Â 1.Â åˆå§‹åŒ–ï¼šåˆ›å»ºÂ InstancedMesh</span>
<span class="hljs-keyword">const</span>Â geometryÂ =Â newÂ THREE.DodecahedronGeometry(<span class="hljs-number">0.2</span>,Â <span class="hljs-number">0</span>);Â 
<span class="hljs-comment">//Â å†°è´¨æè´¨ä¼˜åŒ–ï¼šä½¿ç”¨Â MeshBasicMaterialÂ ç¡®ä¿åœ¨æ·±ç©ºå¯è§</span>
<span class="hljs-keyword">const</span>Â materialÂ =Â newÂ THREE.MeshBasicMaterial({
Â Â Â Â color:Â <span class="hljs-number">0xaaaaaa</span>,Â 
Â Â Â Â side:Â THREE.FrontSide
});

<span class="hljs-keyword">this</span>.instancedMeshÂ =Â newÂ THREE.InstancedMesh(geometry,Â material,Â <span class="hljs-keyword">this</span>.count);
<span class="hljs-keyword">this</span>.instancedMesh.instanceMatrix.setUsage(THREE.DynamicDrawUsage);
<span class="hljs-comment">//Â é‡è¦ï¼šé˜²æ­¢è¢«è§†é”¥ä½“å‰”é™¤ï¼Œå› ä¸ºç²’å­åˆ†å¸ƒæå¹¿</span>
<span class="hljs-keyword">this</span>.instancedMesh.frustumCulledÂ =Â <span class="hljs-literal">false</span>;
<span class="hljs-keyword">this</span>.scene.add(<span class="hljs-keyword">this</span>.instancedMesh);

<span class="hljs-comment">//Â 2.Â åŠ¨æ€æ›´æ–°å¾ªç¯Â (æ¯å¸§è°ƒç”¨)</span>
update(deltaTime,Â neptuneMesh)Â {
Â Â Â Â <span class="hljs-comment">//Â ...</span>
Â Â Â Â <span class="hljs-keyword">for</span>Â (letÂ iÂ =Â <span class="hljs-number">0</span>;Â iÂ &lt;Â <span class="hljs-keyword">this</span>.count;Â i++)Â {
Â Â Â Â Â Â Â Â <span class="hljs-keyword">const</span>Â objÂ =Â <span class="hljs-keyword">this</span>.objectsData[i];
Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â è½¨é“è¿åŠ¨è®¡ç®—</span>
Â Â Â Â Â Â Â Â obj.MÂ +=Â obj.speedÂ *Â deltaTime;
Â Â Â Â Â Â Â Â <span class="hljs-keyword">this</span>.calculatePosition(obj,Â dummy.position);
Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â æ›´æ–°çŸ©é˜µ</span>
Â Â Â Â Â Â Â Â dummy.scale.setScalar(obj.size);
Â Â Â Â Â Â Â Â dummy.updateMatrix();
Â Â Â Â Â Â Â Â <span class="hljs-keyword">this</span>.instancedMesh.setMatrixAt(i,Â dummy.matrix);
Â Â Â Â }
Â Â Â Â <span class="hljs-comment">//Â æ ‡è®°çŸ©é˜µéœ€è¦æ›´æ–°ä¸Šä¼ åˆ°Â GPU</span>
Â Â Â Â <span class="hljs-keyword">this</span>.instancedMesh.instanceMatrix.needsUpdateÂ =Â <span class="hljs-literal">true</span>;
}
</code></pre>
<h2 data-id="heading-6">5. çœŸå®æµæ˜Ÿé›¨æ•°æ®åº“ï¼šæ•°æ®é©±åŠ¨çš„æ˜Ÿé™…æµªæ¼«</h2>
<p>æ„å»ºäº† <strong>ã€Œæµæ˜Ÿé›¨æ•°æ®åº“ã€</strong> (<code>ShowerDatabase</code>)ï¼Œå°†ç°å®ä¸–ç•Œä¸­è‘—åçš„æµæ˜Ÿé›¨å¸¦å…¥è™šæ‹Ÿå®‡å®™ã€‚</p>
<ul>
<li><strong>ã€Œå¤©æ–‡çº§ç²¾åº¦ã€</strong>ï¼šæ”¶å½•äº†è‹±ä»™åº§ã€åŒå­åº§ã€ç‹®å­åº§ç­‰ä¸»è¦æµæ˜Ÿé›¨çš„çœŸå®è½¨é“å‚æ•°ã€‚</li>
<li><strong>ã€ŒåŠ¨æ€æ—¶ç©ºåŒ¹é…ã€</strong>ï¼šç³»ç»Ÿå®æ—¶è®¡ç®—åœ°çƒä½ç½®ï¼Œå½“è¿›å…¥ç‰¹å®šæµæ˜Ÿé›¨æ´»è·ƒå‘¨æœŸæ—¶ï¼Œè‡ªåŠ¨è§¦å‘ç²’å­çˆ†å‘ã€‚</li>
<li><strong>ã€Œå·®å¼‚åŒ–è§†è§‰è¡¨ç°ã€</strong>ï¼šæ ¹æ®æµæ˜Ÿé›¨çš„ç›¸å¯¹é€Ÿåº¦åŠ¨æ€è®¡ç®—æ‹–å°¾é•¿åº¦ï¼Œå¹¶è¿˜åŸå…¶ç‰¹å¾è‰²æ¸©ï¼ˆå¦‚è‹±ä»™åº§çš„é’è“ï¼‰ã€‚</li>
</ul>
<h2 data-id="heading-7">6. é©¾é©¶æ¨¡å¼å‡çº§ï¼šçœŸå®ç‰©ç†ä¸æ·±ç©ºè­¦ç¤º</h2>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/41ad3025c4f342a4b3a9cb0d39ce8177~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pel6JC95Lul5ZCO5r2c5YWl5rex5rW3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769912286&amp;x-signature=mEoFEK%2FBjXNgzBMYZicsG9tQQS8%3D" alt="å¾®ä¿¡å›¾ç‰‡_20260123102153_4_236.png" width="100%" loading="lazy"/>
<p>ä¸ºäº†å½»åº•æ‰“ç ´â€œä¸Šå¸è§†è§’â€çš„è·ç¦»æ„Ÿï¼Œæˆ‘ä¸ºç³»ç»Ÿæ‰“é€ äº†ç¡¬æ ¸çš„ <strong>ã€Œâ€œé©¾é©¶æ¨¡å¼ï¼ˆPilot Mode 2.0ï¼‰â€ã€</strong>ï¼Œè®©æµè§ˆå™¨ç¬é—´å˜èº«æ˜Ÿé™…é£èˆ¹é©¾é©¶èˆ±ã€‚</p>
<ul>
<li>
<p><strong>ã€Œæ²‰æµ¸å¼ HUD é©¾é©¶èˆ±ã€</strong>ï¼š</p>
<ul>
<li><strong>ã€Œç‰©ç†å•ä½å®è£…ã€</strong>ï¼šæ”¾å¼ƒäº†æ¨¡ç³Šçš„å•ä½ï¼Œå…¨é¢å®è£… <strong>ã€ŒAUï¼ˆå¤©æ–‡å•ä½ï¼‰ã€</strong>ã€‚é€Ÿåº¦è¡¨ç°åœ¨æ˜¾ç¤ºçœŸå®çš„ <code>AU/s</code>ï¼Œæœ€å¤§å·¡èˆªé€Ÿåº¦æå‡è‡³ 2.0 AU/sï¼Œè®©æ·±ç©ºèˆªè¡Œæ›´å…·é‡æ„Ÿã€‚</li>
<li><strong>ã€Œå…¨æ¯ä»ªè¡¨ç›˜ã€</strong>ï¼šä½¿ç”¨ Vue 3 çš„ Reactivity ç³»ç»Ÿå®æ—¶é©±åŠ¨ DOMï¼Œä»¥ 60FPS åˆ·æ–°æ˜¾ç¤ºé£èˆ¹é€Ÿåº¦ã€ç©ºé—´åæ ‡å’Œé”å®šç›®æ ‡ã€‚</li>
</ul>
</li>
<li>
<p><strong>ã€ŒåŒºåŸŸæ„ŸçŸ¥è­¦ç¤ºç³»ç»Ÿã€</strong>ï¼š</p>
<ul>
<li><strong>ã€ŒæŸ¯ä¼Šä¼¯å¸¦ç›‘æµ‹ã€</strong>ï¼šç³»ç»Ÿå®æ—¶ç›‘æ§é£èˆ¹ä½ç½®ï¼Œå½“è·ç¦»å¤ªé˜³ <strong>ã€Œ90-200 SUã€</strong>ï¼ˆæµ·ç‹æ˜Ÿè½¨é“å¤–ä¾§ï¼‰æ—¶ï¼ŒHUD ä¼šè‡ªåŠ¨å¼¹å‡ºçº¢è‰²è„‰å†²è­¦æŠ¥ï¼šâ€œâš ï¸ èˆªè¡Œè­¦å‘Šï¼šå·²è¿›å…¥æŸ¯ä¼Šä¼¯å¸¦ï¼â€ã€‚</li>
<li><strong>ã€ŒåŠ¨æ€å‘¼å¸å…‰æ•ˆã€</strong>ï¼šè­¦ç¤ºæ¡†é‡‡ç”¨ CSS3 åŠ¨ç”»å®ç°å‘¼å¸é—ªçƒæ•ˆæœï¼Œè¥é€ æ·±ç©ºæ¢é™©çš„ç´§å¼ æ°›å›´ã€‚</li>
</ul>
</li>
<li>
<p><strong>ã€Œ6-DOF è‡ªç”±é£è¡Œä¸äº¤äº’ä¼˜åŒ–ã€</strong>ï¼š</p>
<ul>
<li><strong>ã€Œæ“ä½œå†²çªæ²»ç†ã€</strong>ï¼šè¿›å…¥é©¾é©¶æ¨¡å¼æ—¶è‡ªåŠ¨ç¦ç”¨ <code>OrbitControls</code>ï¼ˆé¼ æ ‡è½¨é“æ§åˆ¶å™¨ï¼‰ï¼Œè§£å†³äº†â€œé¼ æ ‡æ‹–æ‹½å¯¼è‡´é£èˆ¹ä¹±è½¬â€çš„äº¤äº’å†²çªï¼Œç¡®ä¿ WASD é”®ç›˜æ“ä½œçš„çº¯ç²¹æ€§ã€‚</li>
<li><strong>ã€Œå¹³æ»‘è·Ÿéšã€</strong>ï¼šä¿ç•™äº†ç‚¹å‡»å¤©ä½“åçš„è‡ªåŠ¨å¯¼èˆªåŠŸèƒ½ï¼Œé€šè¿‡äºŒæ¬¡ç¼“åŠ¨ï¼ˆQuadratic Ease-outï¼‰å¹³æ»‘åˆ‡å…¥ç›®æ ‡è½¨é“ã€‚</li>
</ul>
</li>
</ul>

<pre><code class="hljs language-ini" lang="ini">//Â src/components/ThreeScene.vue

//Â 1.Â æ¨¡å¼åˆ‡æ¢ä¸æ§åˆ¶å™¨ç®¡ç†
constÂ <span class="hljs-attr">togglePilotMode</span>Â =Â ()Â =&gt;Â {
Â Â <span class="hljs-attr">isPilotMode.value</span>Â =Â !isPilotMode.value<span class="hljs-comment">;</span>
Â Â ifÂ (isPilotMode.value)Â {
Â Â Â Â //Â ç¦ç”¨Â OrbitControlsÂ é¼ æ ‡æ§åˆ¶ï¼Œç¡®ä¿Â WASDÂ é”®ç›˜æ“ä½œçº¯ç²¹
Â Â Â Â ifÂ (controls)Â <span class="hljs-attr">controls.enabled</span>Â =Â <span class="hljs-literal">false</span><span class="hljs-comment">;</span>
Â Â }Â elseÂ {
Â Â Â Â //Â æ¢å¤Â OrbitControls
Â Â Â Â ifÂ (controls)Â <span class="hljs-attr">controls.enabled</span>Â =Â <span class="hljs-literal">true</span><span class="hljs-comment">;</span>
Â Â }
}<span class="hljs-comment">;</span>

//Â 2.Â HUDÂ æ•°æ®å®æ—¶æ›´æ–°Â (inÂ renderÂ loop)
ifÂ (isPilotMode.value)Â {
Â Â Â //Â ç‰©ç†å•ä½æ¢ç®—ï¼š1Â <span class="hljs-attr">AU</span>Â =Â <span class="hljs-number">25</span>Â SceneÂ Units
Â Â Â constÂ <span class="hljs-attr">AU_SCALE</span>Â =Â <span class="hljs-number">25.0</span><span class="hljs-comment">;</span>
Â Â Â constÂ <span class="hljs-attr">speedInAU</span>Â =Â currentSpeedÂ /Â AU_SCALE<span class="hljs-comment">;Â </span>
Â Â Â 
Â Â Â <span class="hljs-attr">pilotData.speed</span>Â =Â speedInAU.toFixed(<span class="hljs-number">3</span>)<span class="hljs-comment">;Â //Â æ˜¾ç¤ºä¸ºÂ AU/s</span>
Â Â Â <span class="hljs-attr">pilotData.position.x</span>Â =Â (camera.position.xÂ /Â AU_SCALE).toFixed(<span class="hljs-number">2</span>)<span class="hljs-comment">;Â </span>

Â Â Â //Â 3.Â æŸ¯ä¼Šä¼¯å¸¦åŒºåŸŸç›‘æµ‹
Â Â Â //Â è®¾å®šæŸ¯ä¼Šä¼¯å¸¦èŒƒå›´ä¸ºï¼š90Â SUÂ -Â 200Â SUÂ (æµ·ç‹æ˜Ÿè½¨é“å¤–ä¾§)
Â Â Â constÂ <span class="hljs-attr">dist</span>Â =Â camera.position.length()<span class="hljs-comment">;</span>
Â Â Â ifÂ (distÂ &gt;=Â 90Â &amp;&amp;Â distÂ &lt;=Â 200)Â {
Â Â Â Â Â Â Â <span class="hljs-attr">showKuiperWarning.value</span>Â =Â <span class="hljs-literal">true</span><span class="hljs-comment">;Â //Â è§¦å‘Â VueÂ å“åº”å¼Â UIÂ æŠ¥è­¦</span>
Â Â Â }Â elseÂ {
Â Â Â Â Â Â Â <span class="hljs-attr">showKuiperWarning.value</span>Â =Â <span class="hljs-literal">false</span><span class="hljs-comment">;</span>
Â Â Â }
}
</code></pre>
<blockquote>
<p>â</p>
<p><strong>ã€ŒWhy?ã€</strong> è¿™ç§è®¾è®¡ä¸ä»…æ˜¯è§†è§‰ä¸Šçš„ç‚«æŠ€ï¼Œæ›´æ˜¯ä¸ºäº†èµ‹äºˆå­©å­â€œèˆ¹é•¿â€çš„èº«ä»½æ„Ÿã€‚å½“è­¦æŠ¥å£°å“èµ·ï¼Œå±å¹•æ³›çº¢ï¼Œä»–çŸ¥é“è‡ªå·±å·²é©¶å…¥å¤ªé˜³ç³»çš„è¾¹ç–†ã€‚</p>
<p>â</p>
</blockquote>
<h2 data-id="heading-8">7. æ¶æ„è®¾è®¡äº®ç‚¹ï¼šVue 3 ä¸ Three.js çš„ä¼˜é›…è§£è€¦</h2>
<p>åœ¨ Vue ç»„ä»¶ä¸­ç›´æ¥å†™ Three.js ä»£ç æ˜¯å¾ˆå¤šåˆå­¦è€…çš„è¯¯åŒºã€‚æœ¬é¡¹ç›®é‡‡ç”¨äº† <strong>ã€Œâ€œUI é©±åŠ¨é€»è¾‘â€ã€</strong> çš„åˆ†å±‚æ¶æ„ï¼š</p>
<ul>
<li><strong>ã€ŒView å±‚ã€</strong> (<code>ThreeScene.vue</code>)ï¼šè´Ÿè´£ DOM æŒ‚è½½ã€Vue å“åº”å¼æ•°æ®ï¼ˆUI é¢æ¿çŠ¶æ€ï¼‰ã€äº‹ä»¶ç›‘å¬ï¼ˆé”®ç›˜ã€é¼ æ ‡ï¼‰ã€‚</li>
<li><strong>ã€ŒModel å±‚ã€</strong> (<code>SolarSystemScene.js</code>)ï¼šçº¯ JS ç±»ï¼Œå°è£…æ‰€æœ‰ 3D é€»è¾‘ï¼ˆåœºæ™¯å›¾ã€æ¸²æŸ“å¾ªç¯ã€èµ„æºç®¡ç†ï¼‰ã€‚</li>
<li><strong>ã€Œæ•°æ®å±‚ã€</strong> (<code>celestialData.js</code>)ï¼šé™æ€é…ç½®è¡¨ï¼Œé©±åŠ¨å¤©ä½“ç”Ÿæˆã€‚</li>
</ul>
<blockquote>
<p>â</p>
<p><strong>ã€ŒWhy?ã€</strong> è¿™ç§è§£è€¦ä½¿å¾— 3D å¼•æ“å¯ä»¥ç‹¬ç«‹äº UI æ¡†æ¶è¿è¡Œï¼ŒåŒæ—¶ä¹Ÿæ–¹ä¾¿äº† Vue DevTools çš„è°ƒè¯•ã€‚</p>
<p>â</p>
</blockquote>
<h2 data-id="heading-9">ç»“è¯­ï¼šä»£ç å³å®‡å®™</h2>
<p>åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæœ€å¤§çš„æŒ‘æˆ˜å…¶å®ä¸æ˜¯æŠ€æœ¯ï¼Œè€Œæ˜¯â€œå¦‚ä½•ç”¨å­©å­çš„çœ¼ç›çœ‹ä¸–ç•Œâ€ã€‚</p>
<p>ä»é‡å†™æ‰€æœ‰å¤©ä½“çš„ç«¥è¶£æè¿°ï¼Œåˆ°å®ç°æœˆçƒçš„æ½®æ±é”å®šï¼Œå†åˆ°æŸ¯ä¼Šä¼¯å¸¦çš„çº¢è‰²è­¦æŠ¥ï¼Œæ¯ä¸€ä¸ªåŠŸèƒ½çš„è¿­ä»£ï¼Œéƒ½æ˜¯ä¸ºäº†è®©è¿™ä¸ªè™šæ‹Ÿå®‡å®™æ›´æ¥è¿‘ä»–æƒ³è±¡ä¸­çš„æ¨¡æ ·ã€‚</p>
<p>å¦‚ä»Šï¼Œå½“ä»–æŒ‡ç€å±å¹•è¯´â€œçˆ¸çˆ¸ï¼Œæˆ‘è¦å»çœ‹çœ‹é‚£ä¸ªçº¢çº¢çš„é¸Ÿç¥æ˜Ÿï¼â€æ—¶ï¼Œæˆ‘çŸ¥é“ï¼Œé‚£ä¸ªçº¸è´¨å¤ªé˜³ç³»æ¨¡å‹å·²ç»å‡çº§æˆäº†ä»–å¿ƒä¸­çš„æ˜Ÿè¾°å¤§æµ·ã€‚</p>
<p><strong>ã€Œä»£ç å³å®‡å®™ï¼Œæ„¿æˆ‘ä»¬åœ¨æµè§ˆå™¨çš„æ–¹å¯¸ä¹‹é—´ï¼Œéƒ½èƒ½ä¸ºæ‰€çˆ±ä¹‹äººï¼Œç‚¹äº®å±äºä»–ä»¬çš„æ˜Ÿæ²³ã€‚ã€</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[SpringAI å®æˆ˜ï¼šæ„å»ºæ™ºèƒ½é—®ç­”ç³»ç»Ÿå…¨æµç¨‹è§£æ]]></title>    <link>https://juejin.cn/post/7598881914201882674</link>    <guid>https://juejin.cn/post/7598881914201882674</guid>    <pubDate>2026-01-25T07:39:13.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7598881914201882674" data-draft-id="7598947628467191854" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="SpringAI å®æˆ˜ï¼šæ„å»ºæ™ºèƒ½é—®ç­”ç³»ç»Ÿå…¨æµç¨‹è§£æ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-25T07:39:13.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ˜é‡‘è€…é˜¿è±ª"/> <meta itemprop="url" content="https://juejin.cn/user/4073055974333608"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            SpringAI å®æˆ˜ï¼šæ„å»ºæ™ºèƒ½é—®ç­”ç³»ç»Ÿå…¨æµç¨‹è§£æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4073055974333608/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ˜é‡‘è€…é˜¿è±ª
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-25T07:39:13.000Z" title="Sun Jan 25 2026 07:39:13 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">SpringAI å®æˆ˜ï¼šæ„å»ºæ™ºèƒ½é—®ç­”ç³»ç»Ÿå…¨æµç¨‹è§£æ</h2>
<h3 data-id="heading-1">å¼•è¨€ï¼šå½“Springé‡ä¸ŠAI</h3>
<p>åœ¨æ•°å­—åŒ–è½¬å‹çš„æµªæ½®ä¸­ï¼Œäººå·¥æ™ºèƒ½å·²æˆä¸ºä¼ä¸šåº”ç”¨çš„æ ¸å¿ƒç«äº‰åŠ›ã€‚ä½œä¸ºJavaç”Ÿæ€ä¸­æœ€å—æ¬¢è¿çš„æ¡†æ¶ï¼ŒSpringä¸AIçš„èåˆä¸ºå¼€å‘è€…æä¾›äº†å¼ºå¤§çš„ä¼ä¸šçº§AIåº”ç”¨æ„å»ºèƒ½åŠ›ã€‚SpringAIä½œä¸ºSpringå®˜æ–¹æ¨å‡ºçš„AIé›†æˆæ¡†æ¶ï¼Œè®©Javaå¼€å‘è€…èƒ½å¤Ÿä»¥ç†Ÿæ‚‰çš„Springæ–¹å¼è½»æ¾æ¥å…¥å„ç±»å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰ã€‚æœ¬æ–‡å°†å¸¦ä½ æ·±å…¥å®è·µï¼Œé€šè¿‡æ„å»ºä¸€ä¸ªå®Œæ•´çš„æ™ºèƒ½é—®ç­”ç³»ç»Ÿï¼Œå…¨é¢æŒæ¡SpringAIçš„æ ¸å¿ƒæŠ€æœ¯å’Œæœ€ä½³å®è·µã€‚</p>
<h3 data-id="heading-2">ä¸€ã€SpringAIæ¶æ„æ¦‚è§ˆ</h3>
<h4 data-id="heading-3">1.1 è®¾è®¡ç†å¿µ</h4>
<p>SpringAIé‡‡ç”¨"çº¦å®šä¼˜äºé…ç½®"çš„Springå“²å­¦ï¼Œä¸ºAIåº”ç”¨å¼€å‘æä¾›äº†ä¸€è‡´æ€§çš„æŠ½è±¡æ¥å£ã€‚å…¶æ ¸å¿ƒæ¶æ„åˆ†ä¸ºå››å±‚ï¼š</p>
<ul>
<li><strong>åº”ç”¨å±‚</strong>ï¼šæä¾›é¢å‘ä¸šåŠ¡çš„APIæ¥å£</li>
<li><strong>æŠ½è±¡å±‚</strong>ï¼šå®šä¹‰ç»Ÿä¸€çš„AIæ“ä½œæ¥å£ï¼ˆå¦‚ChatClientã€EmbeddingClientç­‰ï¼‰</li>
<li><strong>é€‚é…å±‚</strong>ï¼šå¯¹æ¥å„ç§AIæœåŠ¡æä¾›å•†ï¼ˆOpenAIã€Azureã€æœ¬åœ°æ¨¡å‹ç­‰ï¼‰</li>
<li><strong>åŸºç¡€è®¾æ–½å±‚</strong>ï¼šæä¾›é…ç½®ç®¡ç†ã€è¿æ¥æ± ã€ç›‘æ§ç­‰åŸºç¡€æ”¯æŒ</li>
</ul>
<h4 data-id="heading-4">1.2 æ ¸å¿ƒç»„ä»¶</h4>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- Mavenä¾èµ–é…ç½® --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.ai<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-ai-openai-spring-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>0.8.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.ai<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-ai-pgvector-store-spring-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>0.8.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<h3 data-id="heading-5">äºŒã€ç¯å¢ƒæ­å»ºä¸é…ç½®</h3>
<h4 data-id="heading-6">2.1 é¡¹ç›®åˆå§‹åŒ–</h4>
<p>ä½¿ç”¨Spring Initializråˆ›å»ºé¡¹ç›®ï¼Œé€‰æ‹©ä»¥ä¸‹ä¾èµ–ï¼š</p>
<ul>
<li>Spring Web</li>
<li>Spring Data JPA</li>
<li>PostgreSQL Driver</li>
<li>SpringAI OpenAI</li>
<li>SpringAI PGVector</li>
</ul>
<h4 data-id="heading-7">2.2 é…ç½®æ–‡ä»¶è¯¦è§£</h4>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># application.yml</span>
<span class="hljs-attr">spring:</span>
  <span class="hljs-attr">datasource:</span>
    <span class="hljs-attr">url:</span> <span class="hljs-string">jdbc:postgresql://localhost:5432/ai_demo</span>
    <span class="hljs-attr">username:</span> <span class="hljs-string">postgres</span>
    <span class="hljs-attr">password:</span> <span class="hljs-string">postgres</span>
    
  <span class="hljs-attr">ai:</span>
    <span class="hljs-attr">openai:</span>
      <span class="hljs-attr">api-key:</span> <span class="hljs-string">${OPENAI_API_KEY}</span>
      <span class="hljs-attr">chat:</span>
        <span class="hljs-attr">options:</span>
          <span class="hljs-attr">model:</span> <span class="hljs-string">gpt-3.5-turbo</span>
          <span class="hljs-attr">temperature:</span> <span class="hljs-number">0.7</span>
          <span class="hljs-attr">max-tokens:</span> <span class="hljs-number">2000</span>
    
    <span class="hljs-attr">vectorstore:</span>
      <span class="hljs-attr">pgvector:</span>
        <span class="hljs-attr">index-type:</span> <span class="hljs-string">HNSW</span>
        <span class="hljs-attr">distance-type:</span> <span class="hljs-string">COSINE</span>
</code></pre>
<h4 data-id="heading-8">2.3 æ•°æ®åº“åˆå§‹åŒ–</h4>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- å¯ç”¨vectoræ‰©å±•</span>
<span class="hljs-keyword">CREATE</span> EXTENSION IF <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span> vector;

<span class="hljs-comment">-- åˆ›å»ºæ–‡æ¡£å­˜å‚¨è¡¨</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> IF <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span> document_store (
    id UUID <span class="hljs-keyword">PRIMARY</span> KEY <span class="hljs-keyword">DEFAULT</span> gen_random_uuid(),
    content TEXT <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
    metadata JSONB,
    embedding vector(<span class="hljs-number">1536</span>),
    created_at <span class="hljs-type">TIMESTAMP</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span>
);

<span class="hljs-comment">-- åˆ›å»ºHNSWç´¢å¼•æå‡æŸ¥è¯¢æ€§èƒ½</span>
<span class="hljs-keyword">CREATE</span> INDEX IF <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span> document_embedding_idx 
<span class="hljs-keyword">ON</span> document_store 
<span class="hljs-keyword">USING</span> hnsw (embedding vector_cosine_ops);
</code></pre>
<h3 data-id="heading-9">ä¸‰ã€æ™ºèƒ½é—®ç­”ç³»ç»Ÿæ ¸å¿ƒå®ç°</h3>
<h4 data-id="heading-10">3.1 æ•°æ®æ¨¡å‹è®¾è®¡</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Entity</span>
<span class="hljs-meta">@Table(name = "document_store")</span>
<span class="hljs-meta">@Data</span>
<span class="hljs-meta">@NoArgsConstructor</span>
<span class="hljs-meta">@AllArgsConstructor</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Document</span> {
    
    <span class="hljs-meta">@Id</span>
    <span class="hljs-meta">@GeneratedValue(strategy = GenerationType.UUID)</span>
    <span class="hljs-keyword">private</span> UUID id;
    
    <span class="hljs-meta">@Column(columnDefinition = "TEXT")</span>
    <span class="hljs-keyword">private</span> String content;
    
    <span class="hljs-meta">@Type(JsonType.class)</span>
    <span class="hljs-meta">@Column(columnDefinition = "jsonb")</span>
    <span class="hljs-keyword">private</span> Map&lt;String, Object&gt; metadata;
    
    <span class="hljs-meta">@Column(columnDefinition = "vector(1536)")</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">float</span>[] embedding;
    
    <span class="hljs-keyword">private</span> LocalDateTime createdAt;
    
    <span class="hljs-meta">@PrePersist</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onCreate</span><span class="hljs-params">()</span> {
        <span class="hljs-built_in">this</span>.createdAt = LocalDateTime.now();
    }
}

<span class="hljs-meta">@Repository</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">DocumentRepository</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">JpaRepository</span>&lt;Document, UUID&gt; {
    
    <span class="hljs-meta">@Query(value = "SELECT * FROM document_store ORDER BY embedding &lt;=&gt; :embedding LIMIT :k", 
           nativeQuery = true)</span>
    List&lt;Document&gt; <span class="hljs-title function_">findSimilarDocuments</span><span class="hljs-params">(<span class="hljs-meta">@Param("embedding")</span> <span class="hljs-type">float</span>[] embedding, 
                                       <span class="hljs-meta">@Param("k")</span> <span class="hljs-type">int</span> k)</span>;
}
</code></pre>
<h4 data-id="heading-11">3.2 æ–‡æ¡£å¤„ç†ä¸å‘é‡åŒ–</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Service</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DocumentProcessingService</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> EmbeddingClient embeddingClient;
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> DocumentRepository documentRepository;
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> TextSplitter textSplitter;
    
    <span class="hljs-comment">/**
     * å¤„ç†å¹¶å­˜å‚¨æ–‡æ¡£
     */</span>
    <span class="hljs-meta">@Transactional</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">processAndStoreDocument</span><span class="hljs-params">(String documentContent, 
                                       Map&lt;String, Object&gt; metadata)</span> {
        
        <span class="hljs-comment">// 1. æ–‡æœ¬åˆ†å‰²ï¼ˆå¤„ç†é•¿æ–‡æ¡£ï¼‰</span>
        List&lt;TextSegment&gt; segments = textSplitter.split(documentContent);
        
        <span class="hljs-comment">// 2. æ‰¹é‡å‘é‡åŒ–</span>
        List&lt;List&lt;Double&gt;&gt; embeddings = embeddingClient.embed(segments);
        
        <span class="hljs-comment">// 3. å­˜å‚¨åˆ°å‘é‡æ•°æ®åº“</span>
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; segments.size(); i++) {
            <span class="hljs-type">Document</span> <span class="hljs-variable">doc</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Document</span>();
            doc.setContent(segments.get(i).getText());
            
            Map&lt;String, Object&gt; docMetadata = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;(metadata);
            docMetadata.put(<span class="hljs-string">"segment_index"</span>, i);
            docMetadata.put(<span class="hljs-string">"total_segments"</span>, segments.size());
            
            doc.setMetadata(docMetadata);
            doc.setEmbedding(convertToFloatArray(embeddings.get(i)));
            
            documentRepository.save(doc);
        }
        
        log.info(<span class="hljs-string">"æˆåŠŸå¤„ç†æ–‡æ¡£ï¼Œåˆ†å‰²ä¸º{}ä¸ªç‰‡æ®µ"</span>, segments.size());
    }
    
    <span class="hljs-comment">/**
     * æ–‡æ¡£æ£€ç´¢ï¼ˆåŸºäºå‘é‡ç›¸ä¼¼åº¦ï¼‰
     */</span>
    <span class="hljs-keyword">public</span> List&lt;Document&gt; <span class="hljs-title function_">retrieveRelevantDocuments</span><span class="hljs-params">(String query, <span class="hljs-type">int</span> topK)</span> {
        <span class="hljs-comment">// å°†æŸ¥è¯¢è¯­å¥å‘é‡åŒ–</span>
        List&lt;Double&gt; queryEmbedding = embeddingClient.embed(query);
        
        <span class="hljs-comment">// ç›¸ä¼¼åº¦æœç´¢</span>
        <span class="hljs-keyword">return</span> documentRepository.findSimilarDocuments(
            convertToFloatArray(queryEmbedding), 
            topK
        );
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-type">float</span>[] convertToFloatArray(List&lt;Double&gt; doubleList) {
        <span class="hljs-type">float</span>[] floatArray = <span class="hljs-keyword">new</span> <span class="hljs-title class_">float</span>[doubleList.size()];
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; doubleList.size(); i++) {
            floatArray[i] = doubleList.get(i).floatValue();
        }
        <span class="hljs-keyword">return</span> floatArray;
    }
}
</code></pre>
<h4 data-id="heading-12">3.3 æ™ºèƒ½é—®ç­”æœåŠ¡</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">IntelligentQAService</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> ChatClient chatClient;
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> DocumentProcessingService documentService;
    
    <span class="hljs-comment">/**
     * RAGï¼ˆæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰é—®ç­”
     */</span>
    <span class="hljs-keyword">public</span> AnswerResponse <span class="hljs-title function_">answerWithRAG</span><span class="hljs-params">(String question)</span> {
        
        <span class="hljs-comment">// 1. æ£€ç´¢ç›¸å…³æ–‡æ¡£ç‰‡æ®µ</span>
        List&lt;Document&gt; relevantDocs = documentService
            .retrieveRelevantDocuments(question, <span class="hljs-number">5</span>);
        
        <span class="hljs-comment">// 2. æ„å»ºä¸Šä¸‹æ–‡</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">context</span> <span class="hljs-operator">=</span> buildContextFromDocuments(relevantDocs);
        
        <span class="hljs-comment">// 3. æ„å»ºPrompt</span>
        <span class="hljs-type">PromptTemplate</span> <span class="hljs-variable">promptTemplate</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">PromptTemplate</span>(<span class="hljs-string">"""
            ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„æ™ºèƒ½åŠ©æ‰‹ï¼Œè¯·åŸºäºä»¥ä¸‹ä¸Šä¸‹æ–‡ä¿¡æ¯å›ç­”é—®é¢˜ã€‚
            å¦‚æœä¸Šä¸‹æ–‡ä¿¡æ¯ä¸è¶³ä»¥å›ç­”é—®é¢˜ï¼Œè¯·è¯´æ˜ä½ ä¸çŸ¥é“ã€‚
            
            ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼š
            {context}
            
            é—®é¢˜ï¼š{question}
            
            è¯·æä¾›è¯¦ç»†ã€å‡†ç¡®çš„å›ç­”ï¼š
            """</span>);
            
        Map&lt;String, Object&gt; variables = Map.of(
            <span class="hljs-string">"context"</span>, context,
            <span class="hljs-string">"question"</span>, question
        );
        
        <span class="hljs-type">Prompt</span> <span class="hljs-variable">prompt</span> <span class="hljs-operator">=</span> promptTemplate.create(variables);
        
        <span class="hljs-comment">// 4. è°ƒç”¨AIæ¨¡å‹ç”Ÿæˆå›ç­”</span>
        <span class="hljs-type">ChatResponse</span> <span class="hljs-variable">response</span> <span class="hljs-operator">=</span> chatClient.call(prompt);
        
        <span class="hljs-comment">// 5. æ„å»ºè¿”å›ç»“æœ</span>
        <span class="hljs-keyword">return</span> AnswerResponse.builder()
            .question(question)
            .answer(response.getResult().getOutput().getContent())
            .sources(relevantDocs.stream()
                .map(Document::getMetadata)
                .collect(Collectors.toList()))
            .timestamp(LocalDateTime.now())
            .build();
    }
    
    <span class="hljs-comment">/**
     * æµå¼é—®ç­”ï¼ˆé€‚åˆé•¿å›ç­”ï¼‰
     */</span>
    <span class="hljs-keyword">public</span> Flux&lt;String&gt; <span class="hljs-title function_">streamAnswer</span><span class="hljs-params">(String question)</span> {
        <span class="hljs-keyword">return</span> Flux.create(sink -&gt; {
            <span class="hljs-type">Prompt</span> <span class="hljs-variable">prompt</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Prompt</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">UserMessage</span>(question));
            
            chatClient.stream(prompt)
                .doOnNext(chatResponse -&gt; {
                    <span class="hljs-type">String</span> <span class="hljs-variable">content</span> <span class="hljs-operator">=</span> chatResponse.getResult()
                                                .getOutput()
                                                .getContent();
                    <span class="hljs-keyword">if</span> (content != <span class="hljs-literal">null</span>) {
                        sink.next(content);
                    }
                })
                .doOnComplete(sink::complete)
                .doOnError(sink::error)
                .subscribe();
        });
    }
    
    <span class="hljs-keyword">private</span> String <span class="hljs-title function_">buildContextFromDocuments</span><span class="hljs-params">(List&lt;Document&gt; documents)</span> {
        <span class="hljs-type">StringBuilder</span> <span class="hljs-variable">context</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuilder</span>();
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; documents.size(); i++) {
            <span class="hljs-type">Document</span> <span class="hljs-variable">doc</span> <span class="hljs-operator">=</span> documents.get(i);
            context.append(String.format(<span class="hljs-string">"[æ–‡æ¡£ç‰‡æ®µ %d]:\n%s\n\n"</span>, 
                i + <span class="hljs-number">1</span>, doc.getContent()));
        }
        <span class="hljs-keyword">return</span> context.toString();
    }
}

<span class="hljs-meta">@Data</span>
<span class="hljs-meta">@Builder</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">AnswerResponse</span> {
    <span class="hljs-keyword">private</span> String question;
    <span class="hljs-keyword">private</span> String answer;
    <span class="hljs-keyword">private</span> List&lt;Map&lt;String, Object&gt;&gt; sources;
    <span class="hljs-keyword">private</span> LocalDateTime timestamp;
}
</code></pre>
<h4 data-id="heading-13">3.4 REST APIæ¥å£è®¾è®¡</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@RestController</span>
<span class="hljs-meta">@RequestMapping("/api/ai")</span>
<span class="hljs-meta">@Validated</span>
<span class="hljs-meta">@Tag(name = "æ™ºèƒ½é—®ç­”API", description = "åŸºäºSpringAIçš„æ™ºèƒ½é—®ç­”æ¥å£")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">QAController</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> IntelligentQAService qaService;
    
    <span class="hljs-meta">@PostMapping("/answer")</span>
    <span class="hljs-meta">@Operation(summary = "æ™ºèƒ½é—®ç­”", description = "åŸºäºRAGçš„æ™ºèƒ½é—®ç­”æ¥å£")</span>
    <span class="hljs-keyword">public</span> ResponseEntity&lt;AnswerResponse&gt; <span class="hljs-title function_">answerQuestion</span><span class="hljs-params">(
            <span class="hljs-meta">@RequestBody</span> <span class="hljs-meta">@Valid</span> QuestionRequest request)</span> {
        
        <span class="hljs-type">AnswerResponse</span> <span class="hljs-variable">response</span> <span class="hljs-operator">=</span> qaService.answerWithRAG(request.getQuestion());
        <span class="hljs-keyword">return</span> ResponseEntity.ok(response);
    }
    
    <span class="hljs-meta">@PostMapping(value = "/stream-answer", 
                produces = MediaType.TEXT_EVENT_STREAM_VALUE)</span>
    <span class="hljs-meta">@Operation(summary = "æµå¼é—®ç­”", description = "æ”¯æŒæµå¼è¾“å‡ºçš„é—®ç­”æ¥å£")</span>
    <span class="hljs-keyword">public</span> Flux&lt;String&gt; <span class="hljs-title function_">streamAnswer</span><span class="hljs-params">(
            <span class="hljs-meta">@RequestBody</span> <span class="hljs-meta">@Valid</span> QuestionRequest request)</span> {
        
        <span class="hljs-keyword">return</span> qaService.streamAnswer(request.getQuestion());
    }
    
    <span class="hljs-meta">@PostMapping("/documents")</span>
    <span class="hljs-meta">@Operation(summary = "ä¸Šä¼ æ–‡æ¡£", description = "ä¸Šä¼ æ–‡æ¡£åˆ°çŸ¥è¯†åº“")</span>
    <span class="hljs-keyword">public</span> ResponseEntity&lt;UploadResponse&gt; <span class="hljs-title function_">uploadDocument</span><span class="hljs-params">(
            <span class="hljs-meta">@RequestBody</span> <span class="hljs-meta">@Valid</span> DocumentUploadRequest request)</span> {
        
        <span class="hljs-comment">// å¤„ç†æ–‡æ¡£ä¸Šä¼ é€»è¾‘</span>
        <span class="hljs-keyword">return</span> ResponseEntity.ok(UploadResponse.success());
    }
}

<span class="hljs-meta">@Data</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">QuestionRequest</span> {
    <span class="hljs-meta">@NotBlank(message = "é—®é¢˜ä¸èƒ½ä¸ºç©º")</span>
    <span class="hljs-meta">@Size(max = 1000, message = "é—®é¢˜é•¿åº¦ä¸èƒ½è¶…è¿‡1000å­—ç¬¦")</span>
    <span class="hljs-keyword">private</span> String question;
    
    <span class="hljs-keyword">private</span> String contextId; <span class="hljs-comment">// ä¼šè¯ä¸Šä¸‹æ–‡ID</span>
}
</code></pre>
<h3 data-id="heading-14">å››ã€é«˜çº§ç‰¹æ€§å®ç°</h3>
<h4 data-id="heading-15">4.1 å¯¹è¯ä¸Šä¸‹æ–‡ç®¡ç†</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ConversationContextManager</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Map&lt;String, List&lt;Message&gt;&gt; conversationHistory = 
        <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcurrentHashMap</span>&lt;&gt;();
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">MAX_HISTORY</span> <span class="hljs-operator">=</span> <span class="hljs-number">10</span>;
    
    <span class="hljs-comment">/**
     * æ·»åŠ ä¸Šä¸‹æ–‡æ¶ˆæ¯
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addMessage</span><span class="hljs-params">(String sessionId, Message message)</span> {
        conversationHistory
            .computeIfAbsent(sessionId, k -&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;())
            .add(message);
        
        <span class="hljs-comment">// ä¿æŒæœ€è¿‘çš„å†å²è®°å½•</span>
        List&lt;Message&gt; history = conversationHistory.get(sessionId);
        <span class="hljs-keyword">if</span> (history.size() &gt; MAX_HISTORY) {
            conversationHistory.put(sessionId, 
                history.subList(history.size() - MAX_HISTORY, history.size()));
        }
    }
    
    <span class="hljs-comment">/**
     * æ„å»ºå¸¦ä¸Šä¸‹æ–‡çš„Prompt
     */</span>
    <span class="hljs-keyword">public</span> Prompt <span class="hljs-title function_">buildContextualPrompt</span><span class="hljs-params">(String sessionId, String newQuestion)</span> {
        List&lt;Message&gt; history = conversationHistory.getOrDefault(sessionId, 
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;());
        
        List&lt;Message&gt; messages = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;(history);
        messages.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">UserMessage</span>(newQuestion));
        
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Prompt</span>(messages);
    }
}
</code></pre>
<h4 data-id="heading-16">4.2 å¼‚æ­¥æ‰¹é‡å¤„ç†</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BatchProcessingService</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> AsyncTaskExecutor taskExecutor;
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> EmbeddingClient embeddingClient;
    
    <span class="hljs-comment">/**
     * æ‰¹é‡æ–‡æ¡£å¤„ç†
     */</span>
    <span class="hljs-meta">@Async</span>
    <span class="hljs-keyword">public</span> CompletableFuture&lt;Void&gt; <span class="hljs-title function_">batchProcessDocuments</span><span class="hljs-params">(
            List&lt;Document&gt; documents)</span> {
        
        <span class="hljs-keyword">return</span> CompletableFuture.runAsync(() -&gt; {
            <span class="hljs-type">int</span> <span class="hljs-variable">batchSize</span> <span class="hljs-operator">=</span> <span class="hljs-number">100</span>;
            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; documents.size(); i += batchSize) {
                List&lt;Document&gt; batch = documents.subList(i, 
                    Math.min(i + batchSize, documents.size()));
                
                processBatch(batch);
                
                log.info(<span class="hljs-string">"å·²å¤„ç† {}/{} ä¸ªæ–‡æ¡£"</span>, 
                    Math.min(i + batchSize, documents.size()), 
                    documents.size());
            }
        }, taskExecutor);
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">processBatch</span><span class="hljs-params">(List&lt;Document&gt; batch)</span> {
        <span class="hljs-comment">// æ‰¹é‡å‘é‡åŒ–</span>
        List&lt;String&gt; contents = batch.stream()
            .map(Document::getContent)
            .collect(Collectors.toList());
        
        List&lt;List&lt;Double&gt;&gt; embeddings = embeddingClient.embed(contents);
        
        <span class="hljs-comment">// æ‰¹é‡ä¿å­˜</span>
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; batch.size(); i++) {
            batch.get(i).setEmbedding(
                convertToFloatArray(embeddings.get(i)));
        }
    }
}
</code></pre>
<h3 data-id="heading-17">äº”ã€æ€§èƒ½ä¼˜åŒ–ä¸ç›‘æ§</h3>
<h4 data-id="heading-18">5.1 ç¼“å­˜ç­–ç•¥</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Configuration</span>
<span class="hljs-meta">@EnableCaching</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CacheConfig</span> {
    
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> CacheManager <span class="hljs-title function_">cacheManager</span><span class="hljs-params">()</span> {
        <span class="hljs-type">CaffeineCacheManager</span> <span class="hljs-variable">cacheManager</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">CaffeineCacheManager</span>();
        cacheManager.setCaffeine(Caffeine.newBuilder()
            .expireAfterWrite(<span class="hljs-number">30</span>, TimeUnit.MINUTES)
            .maximumSize(<span class="hljs-number">1000</span>)
            .recordStats());
        <span class="hljs-keyword">return</span> cacheManager;
    }
}

<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CachedQAService</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> IntelligentQAService qaService;
    
    <span class="hljs-meta">@Cacheable(value = "answers", key = "#question.hashCode()")</span>
    <span class="hljs-keyword">public</span> AnswerResponse <span class="hljs-title function_">getCachedAnswer</span><span class="hljs-params">(String question)</span> {
        <span class="hljs-keyword">return</span> qaService.answerWithRAG(question);
    }
}
</code></pre>
<h4 data-id="heading-19">5.2 ç›‘æ§ä¸æŒ‡æ ‡</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AIMetrics</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> MeterRegistry meterRegistry;
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Timer embeddingTimer;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Timer chatTimer;
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">AIMetrics</span><span class="hljs-params">(MeterRegistry meterRegistry)</span> {
        <span class="hljs-built_in">this</span>.meterRegistry = meterRegistry;
        
        <span class="hljs-built_in">this</span>.embeddingTimer = Timer.builder(<span class="hljs-string">"ai.embedding.duration"</span>)
            .description(<span class="hljs-string">"Embeddingæ“ä½œè€—æ—¶"</span>)
            .register(meterRegistry);
            
        <span class="hljs-built_in">this</span>.chatTimer = Timer.builder(<span class="hljs-string">"ai.chat.duration"</span>)
            .description(<span class="hljs-string">"Chatæ“ä½œè€—æ—¶"</span>)
            .register(meterRegistry);
    }
    
    <span class="hljs-keyword">public</span> &lt;T&gt; T <span class="hljs-title function_">recordEmbeddingTime</span><span class="hljs-params">(Supplier&lt;T&gt; supplier)</span> {
        <span class="hljs-keyword">return</span> embeddingTimer.record(supplier);
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">incrementError</span><span class="hljs-params">(String type)</span> {
        meterRegistry.counter(<span class="hljs-string">"ai.errors"</span>, <span class="hljs-string">"type"</span>, type).increment();
    }
}
</code></pre>
<h3 data-id="heading-20">å…­ã€æµ‹è¯•ç­–ç•¥</h3>
<h4 data-id="heading-21">6.1 å•å…ƒæµ‹è¯•</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@SpringBootTest</span>
<span class="hljs-meta">@AutoConfigureMockMvc</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">IntelligentQAServiceTest</span> {
    
    <span class="hljs-meta">@MockBean</span>
    <span class="hljs-keyword">private</span> ChatClient chatClient;
    
    <span class="hljs-meta">@MockBean</span>
    <span class="hljs-keyword">private</span> EmbeddingClient embeddingClient;
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> IntelligentQAService qaService;
    
    <span class="hljs-meta">@Test</span>
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">testAnswerWithRAG</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// æ¨¡æ‹Ÿå‘é‡åŒ–ç»“æœ</span>
        when(embeddingClient.embed(anyString()))
            .thenReturn(List.of(<span class="hljs-number">0.1</span>, <span class="hljs-number">0.2</span>, <span class="hljs-number">0.3</span>));
        
        <span class="hljs-comment">// æ¨¡æ‹ŸAIå›ç­”</span>
        <span class="hljs-type">ChatResponse</span> <span class="hljs-variable">mockResponse</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ChatResponse</span>(
            List.of(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Generation</span>(<span class="hljs-string">"è¿™æ˜¯æ¨¡æ‹Ÿå›ç­”"</span>)));
        when(chatClient.call(any(Prompt.class)))
            .thenReturn(mockResponse);
        
        <span class="hljs-type">AnswerResponse</span> <span class="hljs-variable">response</span> <span class="hljs-operator">=</span> qaService.answerWithRAG(<span class="hljs-string">"æµ‹è¯•é—®é¢˜"</span>);
        
        assertNotNull(response);
        assertEquals(<span class="hljs-string">"è¿™æ˜¯æ¨¡æ‹Ÿå›ç­”"</span>, response.getAnswer());
    }
}
</code></pre>
<h4 data-id="heading-22">6.2 é›†æˆæµ‹è¯•</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Testcontainers</span>
<span class="hljs-meta">@SpringBootTest</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">QASystemIntegrationTest</span> {
    
    <span class="hljs-meta">@Container</span>
    <span class="hljs-keyword">static</span> PostgreSQLContainer&lt;?&gt; postgres = 
        <span class="hljs-keyword">new</span> <span class="hljs-title class_">PostgreSQLContainer</span>&lt;&gt;(<span class="hljs-string">"pgvector/pgvector:pg16"</span>)
            .withDatabaseName(<span class="hljs-string">"testdb"</span>);
    
    <span class="hljs-meta">@DynamicPropertySource</span>
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">configureProperties</span><span class="hljs-params">(DynamicPropertyRegistry registry)</span> {
        registry.add(<span class="hljs-string">"spring.datasource.url"</span>, postgres::getJdbcUrl);
        registry.add(<span class="hljs-string">"spring.datasource.username"</span>, postgres::getUsername);
        registry.add(<span class="hljs-string">"spring.datasource.password"</span>, postgres::getPassword);
    }
    
    <span class="hljs-meta">@Test</span>
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">testCompleteWorkflow</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// å®Œæ•´çš„é›†æˆæµ‹è¯•æµç¨‹</span>
    }
}
</code></pre>
<h3 data-id="heading-23">ä¸ƒã€éƒ¨ç½²ä¸ç”Ÿäº§å®è·µ</h3>
<h4 data-id="heading-24">7.1 Dockerå®¹å™¨åŒ–</h4>
<pre><code class="hljs language-dockerfile" lang="dockerfile"># Dockerfile
FROM openjdk:17-jdk-slim
WORKDIR /app

COPY target/*.jar app.jar
COPY entrypoint.sh /entrypoint.sh

RUN chmod +x /entrypoint.sh

EXPOSE 8080

ENTRYPOINT ["/entrypoint.sh"]
</code></pre>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>
<span class="hljs-comment"># entrypoint.sh</span>
java -jar \
  -Dspring.profiles.active=<span class="hljs-variable">${SPRING_PROFILES_ACTIVE:-prod}</span> \
  -Dserver.port=<span class="hljs-variable">${SERVER_PORT:-8080}</span> \
  -Dspring.ai.openai.api-key=<span class="hljs-variable">${OPENAI_API_KEY}</span> \
  app.jar
</code></pre>
<h4 data-id="heading-25">7.2 Kuberneteséƒ¨ç½²é…ç½®</h4>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># deployment.yaml</span>
<span class="hljs-attr">apiVersion:</span> <span class="hljs-string">apps/v1</span>
<span class="hljs-attr">kind:</span> <span class="hljs-string">Deployment</span>
<span class="hljs-attr">metadata:</span>
  <span class="hljs-attr">name:</span> <span class="hljs-string">springai-qa-service</span>
<span class="hljs-attr">spec:</span>
  <span class="hljs-attr">replicas:</span> <span class="hljs-number">3</span>
  <span class="hljs-attr">selector:</span>
    <span class="hljs-attr">matchLabels:</span>
      <span class="hljs-attr">app:</span> <span class="hljs-string">springai-qa</span>
  <span class="hljs-attr">template:</span>
    <span class="hljs-attr">metadata:</span>
      <span class="hljs-attr">labels:</span>
        <span class="hljs-attr">app:</span> <span class="hljs-string">springai-qa</span>
    <span class="hljs-attr">spec:</span>
      <span class="hljs-attr">containers:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">qa-service</span>
        <span class="hljs-attr">image:</span> <span class="hljs-string">springai-qa:latest</span>
        <span class="hljs-attr">ports:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">containerPort:</span> <span class="hljs-number">8080</span>
        <span class="hljs-attr">env:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">OPENAI_API_KEY</span>
          <span class="hljs-attr">valueFrom:</span>
            <span class="hljs-attr">secretKeyRef:</span>
              <span class="hljs-attr">name:</span> <span class="hljs-string">ai-secrets</span>
              <span class="hljs-attr">key:</span> <span class="hljs-string">openai-api-key</span>
        <span class="hljs-attr">resources:</span>
          <span class="hljs-attr">requests:</span>
            <span class="hljs-attr">memory:</span> <span class="hljs-string">"1Gi"</span>
            <span class="hljs-attr">cpu:</span> <span class="hljs-string">"500m"</span>
          <span class="hljs-attr">limits:</span>
            <span class="hljs-attr">memory:</span> <span class="hljs-string">"2Gi"</span>
            <span class="hljs-attr">cpu:</span> <span class="hljs-string">"1000m"</span>
        <span class="hljs-attr">readinessProbe:</span>
          <span class="hljs-attr">httpGet:</span>
            <span class="hljs-attr">path:</span> <span class="hljs-string">/actuator/health</span>
            <span class="hljs-attr">port:</span> <span class="hljs-number">8080</span>
          <span class="hljs-attr">initialDelaySeconds:</span> <span class="hljs-number">30</span>
          <span class="hljs-attr">periodSeconds:</span> <span class="hljs-number">10</span>
</code></pre>
<h3 data-id="heading-26">å…«ã€æ€»ç»“ä¸å±•æœ›</h3>
<p>é€šè¿‡æœ¬æ–‡çš„å®Œæ•´å®è·µï¼Œæˆ‘ä»¬æ„å»ºäº†ä¸€ä¸ªåŸºäºSpringAIçš„ä¼ä¸šçº§æ™ºèƒ½é—®ç­”ç³»ç»Ÿã€‚è¿™ä¸ªç³»ç»Ÿå±•ç¤ºäº†SpringAIåœ¨ä»¥ä¸‹æ–¹é¢çš„ä¼˜åŠ¿ï¼š</p>
<ol>
<li><strong>å¼€å‘æ•ˆç‡</strong>ï¼šSpringé£æ ¼çš„APIæå¤§é™ä½äº†AIé›†æˆçš„å¤æ‚åº¦</li>
<li><strong>æ¶æ„æ¸…æ™°</strong>ï¼šåˆ†å±‚è®¾è®¡ä¿è¯äº†ä»£ç çš„å¯ç»´æŠ¤æ€§å’Œå¯æ‰©å±•æ€§</li>
<li><strong>ç”Ÿäº§å°±ç»ª</strong>ï¼šå®Œå–„çš„ç›‘æ§ã€ç¼“å­˜ã€å®¹é”™æœºåˆ¶</li>
<li><strong>ç”Ÿæ€ä¸°å¯Œ</strong>ï¼šä¸Springå…¨å®¶æ¡¶æ— ç¼é›†æˆ</li>
</ol>
<p>æœªæ¥ï¼Œéšç€SpringAIç”Ÿæ€çš„ä¸æ–­å‘å±•ï¼Œæˆ‘ä»¬å¯ä»¥æœŸå¾…æ›´å¤šåŠŸèƒ½çš„åŠ å…¥ï¼š</p>
<ul>
<li>å¤šæ¨¡å‹æ”¯æŒåˆ‡æ¢</li>
<li>æ›´é«˜çº§çš„æç¤ºå·¥ç¨‹å·¥å…·</li>
<li>è‡ªåŠ¨åŒ–çš„æ¨¡å‹è¯„ä¼°å’Œä¼˜åŒ–</li>
<li>è”é‚¦å­¦ä¹ æ”¯æŒ</li>
</ul>
<p>SpringAIä¸ºJavaå¼€å‘è€…æ‰“å¼€äº†AIåº”ç”¨å¼€å‘çš„å¤§é—¨ï¼Œè®©AIèƒ½åŠ›çœŸæ­£æˆä¸ºä¼ä¸šåº”ç”¨çš„æ ‡å‡†é…ç½®ã€‚æ— è®ºä½ æ˜¯Springå¼€å‘è€…æƒ³è¦æ¥è§¦AIï¼Œè¿˜æ˜¯AIå·¥ç¨‹å¸ˆæƒ³è¦æ„å»ºä¼ä¸šçº§åº”ç”¨ï¼ŒSpringAIéƒ½å€¼å¾—æ·±å…¥å­¦ä¹ å’Œåº”ç”¨ã€‚</p>
<hr/>
<p><strong>æŠ€æœ¯æ ˆæ€»ç»“</strong>ï¼š</p>
<ul>
<li>Spring Boot 3.x</li>
<li>Spring AI 0.8+</li>
<li>PostgreSQL + pgvector</li>
<li>OpenAI GPT API</li>
<li>Docker &amp; Kubernetes</li>
<li>Micrometerç›‘æ§</li>
</ul>
<p>å¸Œæœ›æœ¬æ–‡èƒ½ä¸ºä½ æä¾›SpringAIå®è·µçš„å®Œæ•´è·¯çº¿å›¾ï¼Œç¥ä½ åœ¨å¤§æ¨¡å‹åº”ç”¨å¼€å‘çš„é“è·¯ä¸Šå–å¾—æˆåŠŸï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€Viteã€‘é™æ€èµ„æºè·¯å¾„è½¬æ¢è§„åˆ™]]></title>    <link>https://juejin.cn/post/7598827641306923059</link>    <guid>https://juejin.cn/post/7598827641306923059</guid>    <pubDate>2026-01-25T03:01:36.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7598827641306923059" data-draft-id="7598801700050026534" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€Viteã€‘é™æ€èµ„æºè·¯å¾„è½¬æ¢è§„åˆ™"/> <meta itemprop="keywords" content="å‰ç«¯,Vite"/> <meta itemprop="datePublished" content="2026-01-25T03:01:36.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ›¾å¯Œè´µ"/> <meta itemprop="url" content="https://juejin.cn/user/4212984286289806"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€Viteã€‘é™æ€èµ„æºè·¯å¾„è½¬æ¢è§„åˆ™
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4212984286289806/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ›¾å¯Œè´µ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-25T03:01:36.000Z" title="Sun Jan 25 2026 03:01:36 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;color:#3c9dff}.markdown-body h1{font-size:30px;margin-bottom:5px;padding-bottom:8px;text-align:center}.markdown-body h2{font-size:24px;padding-bottom:6px}.markdown-body h2:before{content:"ğŸ‹"}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h3:before{content:"ğŸ“"}.markdown-body h4{font-size:16px}.markdown-body h4:before{content:"ğŸ‘"}.markdown-body h5{font-size:15px}.markdown-body h5:before{content:"ğŸ‰"}.markdown-body h6{margin-top:5px}.markdown-body h6:before{content:"ğŸ’"}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{display:block;margin:0 auto;max-width:100%;border-radius:4px;padding:1px;border:1px solid #d2e8ff}.markdown-body img:hover{box-shadow:0 1px 3px #5eaeff}.markdown-body hr{height:4px;margin:34px 0;background-size:4px 1px;background-image:linear-gradient(270deg,#5eaeff,#f3f9ff 25%,transparent 50%);border-style:none}.markdown-body code{word-break:break-word;border-radius:3px;overflow-x:auto;background-color:#d2e8ff;color:#3c9dff;font-size:.9em;padding:.1em .5em;margin:0 3px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;transition:all .3s}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;border:1px solid #90c7ff;border-radius:4px}.markdown-body pre:hover{box-shadow:0 1px 10px #beddff}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#3c9dff;border-bottom:1px solid #90c7ff;transition:all .3s}.markdown-body a:hover{color:#007fff;border-bottom:2px solid #5eaeff}.markdown-body a[href]:not(:empty){padding-right:18px}.markdown-body a[href]:not(:empty):after{display:inline-block;width:16px;height:16px;margin-left:2px;content:"";background:url(data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiPjxwYXRoIGQ9Ik0zODQgMTI4YTQ4IDQ4IDAgMDEyLjgxNiA5NS45MkwzODQgMjI0SDI1NmEzMiAzMiAwIDAwLTMxLjkyIDI5LjZMMjI0IDI1NnY1MTJhMzIgMzIgMCAwMDI5LjYgMzEuOTJsMi40LjA4aDUxMmEzMiAzMiAwIDAwMzEuOTItMjkuNmwuMDgtMi40VjY1NmE0OCA0OCAwIDAxOTUuOTItMi44MTZMODk2IDY1NnYxMTJhMTI4IDEyOCAwIDAxLTEyNCAxMjcuOTM2bC00IC4wNjRIMjU2YTEyOCAxMjggMCAwMS0xMjcuOTM2LTEyNGwtLjA2NC00VjI1NmExMjggMTI4IDAgMDExMjQtMTI3LjkzNmw0LS4wNjRoMTI4em0zODQgMGExMjggMTI4IDAgMDExMjcuOTM2IDEyNGwuMDY0IDR2MTYwYTQ4IDQ4IDAgMDEtOTUuOTIgMi44MTZMODAwIDQxNlYyOTEuODcybC0zODIuMDY0IDM4Mi4wOGE0OCA0OCAwIDAxLTcwLjAzMi02NS42bDIuMTYtMi4yODhMNzMyLjA5NiAyMjRINjA4YTQ4IDQ4IDAgMDEtMi44MTYtOTUuOTJMNjA4IDEyOGgxNjB6IiBmaWxsPSIjM2M5ZGZmIiBmaWxsLW9wYWNpdHk9Ii41NiIgZGF0YS1zcG0tYW5jaG9yLWlkPSJhMzEzeC5zZWFyY2hfaW5kZXguMC5pMC41Yzc1M2E4MTgwa2RKWCIgY2xhc3M9InNlbGVjdGVkIi8+PC9zdmc+);background-size:100%}.markdown-body table{margin:0 auto 10px;font-size:12px;width:auto;max-width:100%;overflow:auto;border-collapse:collapse;border:1px solid #3c9dff}.markdown-body thead{text-align:center}.markdown-body thead th{color:#fff;background-color:#5eaeff}.markdown-body tr{text-align:center}.markdown-body tbody tr:hover{background-color:#d2e8ff}.markdown-body tbody tr:hover code{background-color:#90c7ff}.markdown-body tr:nth-child(2n){background-color:#ecf5ff}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#5eaeff}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body b,.markdown-body strong{font-weight:900;padding:0 1px;font-size:17px}.markdown-body small{color:#cbcbcb;padding:0 1px;font-size:22px;zoom:.5}.markdown-body em{padding:0 1px}.markdown-body del{padding:0 1px;text-decoration-thickness:2px}.markdown-body blockquote{color:#1a1b1c;padding:1px 20px;margin:22px 0;border-radius:4px;border-left:4px solid rgba(60,157,255,.5);background-color:rgba(190,221,255,.3)}.markdown-body blockquote blockquote{margin:8px 0}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body details{margin:12px 0;padding:4px 10px;border:2px solid #3c9dff;border-radius:8px;background-color:#ecf5ff;transition:all .3s}.markdown-body details summary{cursor:pointer}.markdown-body input[type=checkbox]{position:relative;appearance:none;width:16px;height:16px;border-radius:2px;vertical-align:middle;transform:translateY(-2px);box-sizing:border-box;border:1px solid #beddff}.markdown-body input[type=checkbox]:checked{border:1px solid #5eaeff;background-color:#5eaeff}.markdown-body input[type=checkbox]:checked:before{position:absolute;top:3px;left:1px;width:11px;height:6px;background-color:transparent;border-left:2px solid #fff;border-bottom:2px solid #fff;transform:rotate(-45deg);content:"";box-sizing:border-box}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="androidstudio">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#a9b7c6;background:#282b2e}.hljs-bullet,.hljs-literal,.hljs-number,.hljs-symbol{color:#6897bb}.hljs-deletion,.hljs-keyword,.hljs-selector-tag{color:#cc7832}.hljs-link,.hljs-template-variable,.hljs-variable{color:#629755}.hljs-comment,.hljs-quote{color:grey}.hljs-meta{color:#bbb529}.hljs-addition,.hljs-attribute,.hljs-string{color:#6a8759}.hljs-section,.hljs-title,.hljs-type{color:#ffc66d}.hljs-name,.hljs-selector-class,.hljs-selector-id{color:#e8bf6a}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€è·¯å¾„è½¬æ¢çš„å®šä¹‰</h2>
<p>åœ¨ Vite é¡¹ç›®ä¸­ï¼Œä½ åœ¨æºç é‡Œå†™çš„èµ„æºè·¯å¾„ï¼ˆç›¸å¯¹è·¯å¾„ <code>./logo.png</code>ã€åˆ«åè·¯å¾„ <code>@/assets/bg.jpg</code>ï¼‰ä¼šåœ¨æ„å»ºæ—¶è¢«è½¬æ¢æˆæµè§ˆå™¨å¯è®¿é—®åˆ°çš„ç»å¯¹è·¯å¾„ï¼ˆé€šå¸¸å¸¦ hashï¼Œå¦‚ <code>/assets/logo-a3f2c1.png</code>ï¼‰ã€‚è¿™ä¸ªè¿‡ç¨‹å°±æ˜¯<strong>è·¯å¾„è½¬æ¢</strong>ã€‚</p>
<hr/>
<h2 data-id="heading-1">äºŒã€å“ªäº›è·¯å¾„ä¼šè¢«è½¬æ¢</h2>
<h3 data-id="heading-2">âœ… ä¼šè½¬æ¢çš„è·¯å¾„</h3>
<h4 data-id="heading-3">1. ç›¸å¯¹è·¯å¾„ï¼ˆ<code>./</code> æˆ– <code>../</code>ï¼‰</h4>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// Script ä¸­</span>
<span class="hljs-keyword">import</span> logoUrl <span class="hljs-keyword">from</span> <span class="hljs-string">'./assets/logo.png'</span>

<span class="hljs-comment">// Template ä¸­ï¼ˆå†…ç½®æ ‡ç­¾çš„é™æ€èµ„äº§å±æ€§ï¼‰</span>
&lt;img src=<span class="hljs-string">"./assets/logo.png"</span> /&gt;

<span class="hljs-comment">// CSS ä¸­</span>
background-<span class="hljs-attr">image</span>: <span class="hljs-title function_">url</span>(<span class="hljs-string">'./assets/bg.png'</span>);
</code></pre>
<h4 data-id="heading-4">2. åˆ«åè·¯å¾„ï¼ˆ<code>@/</code> ç­‰ï¼‰</h4>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// éœ€è¦åœ¨ vite.config.ts ä¸­é…ç½®</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>({
  <span class="hljs-attr">resolve</span>: {
    <span class="hljs-attr">alias</span>: {
      <span class="hljs-string">'@'</span>: <span class="hljs-title function_">join</span>(__dirname, <span class="hljs-string">'src'</span>)
    }
  }
})

<span class="hljs-comment">// Script ä¸­</span>
<span class="hljs-keyword">import</span> logoUrl <span class="hljs-keyword">from</span> <span class="hljs-string">'@/assets/logo.png'</span>

<span class="hljs-comment">// Template ä¸­ï¼ˆå†…ç½®æ ‡ç­¾çš„é™æ€èµ„äº§å±æ€§ï¼‰</span>
&lt;img src=<span class="hljs-string">"@/assets/logo.png"</span> /&gt;

<span class="hljs-comment">// CSS ä¸­</span>
background-<span class="hljs-attr">image</span>: <span class="hljs-title function_">url</span>(<span class="hljs-string">'@/assets/bg.png'</span>);
</code></pre>
<h3 data-id="heading-5">âŒ ä¸ä¼šè½¬æ¢çš„è·¯å¾„</h3>
<h4 data-id="heading-6">1. ç»å¯¹è·¯å¾„ï¼ˆ<code>/</code> å¼€å¤´ï¼‰</h4>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// Script ä¸­</span>
<span class="hljs-keyword">const</span> url = <span class="hljs-string">'/logo.png'</span>

<span class="hljs-comment">// Template ä¸­</span>
&lt;img src=<span class="hljs-string">"/logo.png"</span> /&gt;

<span class="hljs-comment">// CSS ä¸­</span>
background-<span class="hljs-attr">image</span>: <span class="hljs-title function_">url</span>(<span class="hljs-string">'/bg.png'</span>);
</code></pre>
<p><strong>è¡Œä¸ºï¼š</strong></p>
<ul>
<li>ä¸ä¼šè¢«è½¬æ¢ï¼Œç›´æ¥è¯·æ±‚ <code>public/</code> ç›®å½•</li>
<li>åŸæ ·è¾“å‡ºï¼Œä¸å‚ä¸æ‰“åŒ…ï¼Œä¸ä¼šåŠ  hash</li>
</ul>
<p><strong>é€‚ç”¨åœºæ™¯ï¼š</strong></p>
<ul>
<li>èµ„æºå¿…é¡»æ”¾åœ¨ <code>public/</code> ç›®å½•ä¸‹</li>
<li>éœ€è¦å›ºå®š URLï¼ˆå¦‚ <code>favicon.ico</code>ã€<code>robots.txt</code>ï¼‰</li>
</ul>
<h4 data-id="heading-7">2. å¤–éƒ¨ URL å’Œ data URL</h4>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-comment">&lt;!-- å¤–éƒ¨ URL --&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://example.com/a.png"</span> /&gt;</span>
  
  <span class="hljs-comment">&lt;!-- data URL --&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"data:image/png;base64,iVBORw0K..."</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
</code></pre>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-selector-class">.bg</span> {
  <span class="hljs-comment">// å¤–éƒ¨ URL</span>
  <span class="hljs-attribute">background-image</span>: <span class="hljs-built_in">url</span>(<span class="hljs-string">'https://example.com/bg.png'</span>);
  
  <span class="hljs-comment">// data URL</span>
  <span class="hljs-attribute">background-image</span>: <span class="hljs-built_in">url</span>(<span class="hljs-string">'data:image/png;base64,iVBORw0K...'</span>);
}
</code></pre>
<p><strong>è¡Œä¸ºï¼š</strong> ä¸ä¼šè½¬æ¢ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ï¼ˆå®ƒä»¬æœ¬èº«å°±æ˜¯å®Œæ•´çš„ URL å½¢æ€ï¼‰ã€‚</p>
<h4 data-id="heading-8">3. å˜é‡/åŠ¨æ€è·¯å¾„</h4>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"ts"</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">const</span> imagePath = <span class="hljs-string">'./assets/logo.png'</span>  <span class="hljs-comment">// å˜é‡</span>
<span class="hljs-keyword">const</span> name = <span class="hljs-string">'logo'</span>
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-comment">&lt;!-- âŒ ä¸ä¼šè½¬æ¢ï¼ŒimagePath æ˜¯å˜é‡ --&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">:src</span>=<span class="hljs-string">"imagePath"</span> /&gt;</span>
  
  <span class="hljs-comment">&lt;!-- âŒ ä¸ä¼šè½¬æ¢ï¼ŒåŠ¨æ€è¡¨è¾¾å¼ --&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">:src</span>=<span class="hljs-string">"`./assets/${name}.png`"</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
</code></pre>
<p><strong>åŸå› ï¼š</strong> è·¯å¾„è½¬æ¢æ˜¯åœ¨ç¼–è¯‘æ—¶è¿›è¡Œçš„ï¼Œç¼–è¯‘å™¨æ— æ³•ç¡®å®šå˜é‡çš„è¿è¡Œæ—¶å€¼ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p>
<ul>
<li>ä½¿ç”¨ <code>import.meta.glob()</code> é¢„å…ˆå¯¼å…¥æ‰€æœ‰å¯èƒ½çš„æ–‡ä»¶</li>
<li>æˆ–å°†èµ„æºæ”¾å…¥ <code>public/</code> ç›®å½•</li>
</ul>
<hr/>
<h2 data-id="heading-9">ä¸‰ã€new URL çš„ä½¿ç”¨</h2>
<p><code>new URL(path, base)</code> æ˜¯ <strong>ESM æ ‡å‡† API</strong>ï¼Œç”¨äº URL è§£æï¼ˆURL Resolutionï¼‰ã€‚</p>
<p><strong>åœ¨ Vite ä¸­çš„è½¬æ¢è§„åˆ™ï¼š</strong></p>
<h3 data-id="heading-10">ç›¸å¯¹è·¯å¾„</h3>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> url = <span class="hljs-keyword">new</span> <span class="hljs-title function_">URL</span>(<span class="hljs-string">'./assets/icon.png'</span>, <span class="hljs-keyword">import</span>.<span class="hljs-property">meta</span>.<span class="hljs-property">url</span>).<span class="hljs-property">href</span>

<span class="hljs-comment">// å¼€å‘æ—¶ï¼š'http://localhost:5173/src/assets/icon.png'</span>
<span class="hljs-comment">// æ„å»ºåï¼š'/assets/icon-a3f2c1.png' âœ… ä¼šè½¬æ¢å¹¶åŠ  hash</span>
</code></pre>
<h3 data-id="heading-11">åˆ«åè·¯å¾„</h3>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> url = <span class="hljs-keyword">new</span> <span class="hljs-title function_">URL</span>(<span class="hljs-string">'@/assets/icon.png'</span>, <span class="hljs-keyword">import</span>.<span class="hljs-property">meta</span>.<span class="hljs-property">url</span>).<span class="hljs-property">href</span>

<span class="hljs-comment">// âœ… ä¼šè½¬æ¢ï¼ˆéœ€è¦é…ç½® resolve.aliasï¼‰</span>
<span class="hljs-comment">// æ„å»ºåï¼š'/assets/icon-a3f2c1.png'</span>
</code></pre>
<h3 data-id="heading-12">ç»å¯¹è·¯å¾„</h3>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> url = <span class="hljs-keyword">new</span> <span class="hljs-title function_">URL</span>(<span class="hljs-string">'/logo.png'</span>, <span class="hljs-keyword">import</span>.<span class="hljs-property">meta</span>.<span class="hljs-property">url</span>).<span class="hljs-property">href</span>

<span class="hljs-comment">// âŒ ä¸å‚ä¸è½¬æ¢</span>
<span class="hljs-comment">// new URL ä»…åš URL è§£æï¼ˆè·¯å¾„æ‹¼æ¥ï¼‰ï¼Œç»“æœä¸ºåŒæºç»å¯¹è·¯å¾„ï¼š'/logo.png'</span>
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‰ç«¯ä¸­çš„é€šä¿¡æ¨¡å¼ï¼šè§‚å¯Ÿè€…ä¸å‘å¸ƒ / è®¢é˜…æ¨¡å¼]]></title>    <link>https://juejin.cn/post/7598827641307217971</link>    <guid>https://juejin.cn/post/7598827641307217971</guid>    <pubDate>2026-01-25T04:21:16.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7598827641307217971" data-draft-id="7561013473967112230" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‰ç«¯ä¸­çš„é€šä¿¡æ¨¡å¼ï¼šè§‚å¯Ÿè€…ä¸å‘å¸ƒ / è®¢é˜…æ¨¡å¼"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-25T04:21:16.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸€æ±Ÿä¸œæµæ°´"/> <meta itemprop="url" content="https://juejin.cn/user/1151943917181880"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‰ç«¯ä¸­çš„é€šä¿¡æ¨¡å¼ï¼šè§‚å¯Ÿè€…ä¸å‘å¸ƒ / è®¢é˜…æ¨¡å¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1151943917181880/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸€æ±Ÿä¸œæµæ°´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-25T04:21:16.000Z" title="Sun Jan 25 2026 04:21:16 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å‰ç«¯æœ‰ä¸¤ç§å¸¸ç”¨çš„é€šä¿¡æ¨¡å¼ï¼šè§‚å¯Ÿè€…å’Œå‘å¸ƒ / è®¢é˜…æ¨¡å¼ã€‚ä¸¤è€…æœ€ä¸»è¦çš„åŒºåˆ«æ˜¯ä¸€å¯¹å¤šå•å‘é€šä¿¡è¿˜æ˜¯å¤šå¯¹å¤šåŒå‘é€šä¿¡çš„é—®é¢˜ã€‚</p>
<p>ä»¥å¾®å‰ç«¯ä¸ºä¾‹ï¼Œå¦‚æœåªéœ€è¦ä¸»åº”ç”¨å‘å„ä¸ªå­åº”ç”¨å•å‘å¹¿æ’­é€šä¿¡ï¼Œå¹¶ä¸”å¤šä¸ªå­åº”ç”¨ä¹‹é—´äº’ç›¸ä¸éœ€è¦é€šä¿¡ï¼Œé‚£ä¹ˆåªéœ€è¦ä½¿ç”¨è§‚å¯Ÿè€…æ¨¡å¼å³å¯ï¼Œè€Œå¦‚æœä¸»åº”ç”¨éœ€è¦å’Œå­åº”ç”¨åŒå‘é€šä¿¡ï¼Œæˆ–è€…å­åº”ç”¨ä¹‹é—´éœ€è¦å®ç°å»ä¸­å¿ƒåŒ–çš„åŒå‘é€šä¿¡ï¼Œé‚£ä¹ˆéœ€è¦ä½¿ç”¨å‘å¸ƒ / è®¢é˜…æ¨¡å¼ã€‚</p>
<p><strong>åœ¨æµè§ˆå™¨ä¸­ä¼šä½¿ç”¨è§‚å¯Ÿè€…æ¨¡å¼æ¥å®ç°å†…ç½® API çš„å•å‘é€šä¿¡ï¼Œä¾‹å¦‚Â <code>IntersectionObserver</code>ã€<code>MutationObserver</code>ã€<code>ResizeObserver</code>Â ä»¥åŠÂ <code>PerformanceObserver</code>Â ç­‰ï¼Œè€Œå‘å¸ƒ / è®¢é˜…æ¨¡å¼åˆ™é€šå¸¸æ˜¯æ¡†æ¶æä¾›çš„ä¸€ç§ä¾›å¤–éƒ¨å¼€å‘è€…è‡ªå®šä¹‰é€šä¿¡çš„èƒ½åŠ›ï¼Œä¾‹å¦‚æµè§ˆå™¨ä¸­çš„Â <code>EventTarget</code>ã€Node.js ä¸­çš„Â <code>EventEmitter</code>ã€Vue.js ä¸­çš„Â <code>$emit</code>Â ç­‰ã€‚</strong></p>
<h2 data-id="heading-0">è§‚å¯Ÿè€…æ¨¡å¼</h2>
<p>è§‚å¯Ÿè€…æ¨¡å¼éœ€è¦åŒ…å« Subject å’Œ Observer ä¸¤ä¸ªæ¦‚å¿µï¼Œå…¶ä¸­ Subject æ˜¯éœ€è¦è¢«è§‚å¯Ÿçš„ç›®æ ‡å¯¹è±¡ï¼Œä¸€æ—¦çŠ¶æ€å‘ç”Ÿå˜åŒ–ï¼Œå¯ä»¥é€šè¿‡å¹¿æ’­çš„æ–¹å¼é€šçŸ¥æ‰€æœ‰è®¢é˜…å˜åŒ–çš„ Observerï¼Œè€Œ Observer åˆ™æ˜¯é€šè¿‡å‘ Subject è¿›è¡Œæ¶ˆæ¯è®¢é˜…ä»è€Œå®ç°æ¥æ”¶ Subject çš„å˜åŒ–é€šçŸ¥ï¼Œå…·ä½“å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/273035a4164c4596b86b332bf61914cf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5rGf5Lic5rWB5rC0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769919676&amp;x-signature=vBrXVeWySo2obNjeNJWH5gQJ5cc%3D" alt="image.png" loading="lazy"/></p>
<p>æˆ‘ä»¬ä»¥æµè§ˆå™¨çš„Â <code>MutationObserver</code>Â ä¸ºä¾‹ï¼Œæ¥çœ‹ä¸‹è§‚å¯Ÿè€…æ¨¡å¼å¦‚ä½•è¿ä½œï¼š</p>
<pre><code class="hljs language-js" lang="js">&lt;!<span class="hljs-variable constant_">DOCTYPE</span> html&gt;
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Document<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"subject"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>

  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span>
    # å½“è§‚å¯Ÿåˆ°å˜åŠ¨æ—¶æ‰§è¡Œçš„å›è°ƒå‡½æ•°
    const callback = function (mutationsList, observer) {
      for (let mutation of mutationsList) {
        if (mutation.type === 'childList') {
          console.log('A child node has been added or removed.')
        } else if (mutation.type === 'attributes') {
          console.log(
            'The ' + mutation.attributeName + ' attribute was modified.'
          )
        }
      }
    }

    # åˆ›å»ºç¬¬ä¸€ä¸ª Observer
    const observer1 = new MutationObserver(callback)

    # Subject ç›®æ ‡å¯¹è±¡
    const subject = document.getElementById('subject')

    # Observer çš„é…ç½®ï¼ˆéœ€è¦è§‚å¯Ÿä»€ä¹ˆå˜åŠ¨ï¼‰
    const config = { attributes: true, childList: true, subtree: true }

    # Observer è®¢é˜… Subject çš„å˜åŒ–
    observer1.observe(subject, config)

    # åˆ›å»ºç¬¬äºŒä¸ª Observer
    const observer2 = new MutationObserver(callback)

    # Observer è®¢é˜… Subject çš„å˜åŒ–
    observer2.observe(subject, config)

    # Subject çš„å±æ€§å˜åŒ–ï¼Œä¼šè§¦å‘ Observer çš„ callback ç›‘å¬
    subject.className = 'change class'

    # Subject çš„å­èŠ‚ç‚¹å˜åŒ–ï¼Œä¼šè§¦å‘ Observer çš„ callback ç›‘å¬
    subject.appendChild(document.createElement('span'))

    # è¿™é‡Œä¸ºä»€ä¹ˆéœ€è¦ setTimeout å‘¢ï¼Ÿå¦‚æœå»é™¤ä¼šæœ‰ä»€ä¹ˆå½±å“å—ï¼Ÿ
    setTimeout(() =&gt; {
      // å–æ¶ˆè®¢é˜…
      observer1.disconnect()
      observer2.disconnect()
    })
  <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></span>
</code></pre>
<p>å½“ DOM å…ƒç´ ï¼ˆSubject ç›®æ ‡å¯¹è±¡ï¼‰æ”¹å˜è‡ªèº«çš„å±æ€§æˆ–è€…æ·»åŠ å­å…ƒç´ æ—¶ï¼Œéƒ½ä¼šå°†è‡ªèº«çš„çŠ¶æ€å˜åŒ–å•å‘é€šçŸ¥ç»™æ‰€æœ‰è®¢é˜…è¯¥å˜åŒ–çš„è§‚å¯Ÿè€…ã€‚</p>
<p>å½“ç„¶ä¸Šè¿° Web API å†…éƒ¨åŒ…è£…äº†å¾ˆå¤šåŠŸèƒ½ï¼Œä¾‹å¦‚è§‚å¯Ÿè€…é…ç½®ã€‚æˆ‘ä»¬å¯ä»¥è®¾è®¡ä¸€ä¸ªæ›´åŠ ä¾¿äºç†è§£çš„è§‚å¯Ÿè€…é€šä¿¡æ–¹å¼ï¼š</p>
<pre><code class="hljs language-js" lang="js">   <span class="hljs-keyword">class</span> <span class="hljs-title class_">Subject</span> {
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">observers</span> = [];
    }

    <span class="hljs-comment">// æ·»åŠ è®¢é˜…</span>
    <span class="hljs-title function_">subscribe</span>(<span class="hljs-params">observer</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">observers</span>.<span class="hljs-title function_">push</span>(observer);
    }

    <span class="hljs-comment">// å–æ¶ˆè®¢é˜…</span>
    <span class="hljs-title function_">unsubscribe</span>(<span class="hljs-params"/>) {}

    <span class="hljs-comment">// å¹¿æ’­ä¿¡æ¯</span>
    <span class="hljs-title function_">broadcast</span>(<span class="hljs-params"/>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">observers</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">observer</span>) =&gt;</span> observer.<span class="hljs-title function_">update</span>());
    }
  }

  <span class="hljs-keyword">class</span> <span class="hljs-title class_">Observer</span> {
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {}

    <span class="hljs-comment">// å®ç°ä¸€ä¸ª update çš„æ¥å£ï¼Œä¾› subject è€¦åˆè°ƒç”¨</span>
    <span class="hljs-title function_">update</span>(<span class="hljs-params"/>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"observer update..."</span>);
    }
  }

  <span class="hljs-keyword">const</span> subject = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Subject</span>();

  subject.<span class="hljs-title function_">subscribe</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Observer</span>());

  subject.<span class="hljs-title function_">broadcast</span>();

  subject.<span class="hljs-title function_">subscribe</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Observer</span>());

  subject.<span class="hljs-title function_">broadcast</span>();
</code></pre>
<p>ä¸Šè¿°è§‚å¯Ÿè€…æ¨¡å¼æ²¡æœ‰ä¸€ä¸ªå®ä½“çš„ Subject å¯¹è±¡ï¼Œæˆ‘ä»¬å¯ä»¥ç»“åˆ DOM åšä¸€äº›å°å°çš„æ”¹åŠ¨ï¼Œä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-js" lang="js">&lt;!<span class="hljs-variable constant_">DOCTYPE</span> html&gt;
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Document<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- ç›®æ ‡å¯¹è±¡ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"checkbox"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"checkbox"</span> /&gt;</span>

    <span class="hljs-comment">&lt;!-- è§‚å¯Ÿè€… --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"div"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"h1"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"span"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span>
      class Subject {
        constructor() {
          this.observers = [];
        }

        // æ·»åŠ è®¢é˜…
        subscribe(observer) {
          this.observers.push(observer);
        }

        // å–æ¶ˆè®¢é˜…
        unsubscribe() {}

        // å¹¿æ’­ä¿¡æ¯
        broadcast(value) {
          this.observers.forEach((observer) =&gt; observer.update(value));
        }
      }


      # è§‚å¯Ÿçš„ç›®æ ‡å¯¹è±¡
      const checkbox = document.getElementById("checkbox");

      # å°† subject å®ä¾‹æŒ‚è½½åˆ° DOM å¯¹è±¡ä¸Šï¼ˆä¹Ÿå¯ä»¥å•ç‹¬ä½¿ç”¨ï¼‰
      checkbox.subject = new Subject();

      checkbox.onclick = function (event) {
        # é€šçŸ¥è§‚å¯Ÿè€… checkbox çš„å˜åŒ–
        checkbox.subject.broadcast(event.target.checked);
      };

      # è§‚å¯Ÿè€…
      const span = document.getElementById("span");
      const div = document.getElementById("div");
      const h1 = document.getElementById("h1");

      # è§‚å¯Ÿè€…å®ç°å„è‡ª update æ¥å£
      span.update = function (value) {
        span.innerHTML = value;
      };
      div.update = function (value) {
        div.innerHTML = value;
      };
      h1.update = function (value) {
        h1.innerHTML = value;
      };

      # æ·»åŠ è®¢é˜…
      checkbox.subject.subscribe(span);
      checkbox.subject.subscribe(div);
      checkbox.subject.subscribe(h1);
    <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></span>
</code></pre>
<h2 data-id="heading-1">å‘å¸ƒ / è®¢é˜…æ¨¡å¼</h2>
<p>å‘å¸ƒ / è®¢é˜…æ¨¡å¼éœ€è¦åŒ…å« Publisherã€Channels å’Œ Subscriber ä¸‰ä¸ªæ¦‚å¿µï¼Œå…¶ä¸­ Publisher æ˜¯ä¿¡æ¯çš„å‘é€è€…ï¼ŒSubscriber æ˜¯ä¿¡æ¯çš„è®¢é˜…è€…ï¼Œè€Œ Channels æ˜¯ä¿¡æ¯ä¼ è¾“çš„é€šé“ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/37446ae6916c4791a5d5cadaba506b1f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5rGf5Lic5rWB5rC0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769919676&amp;x-signature=HUNphj3X%2FyeEkc%2FBvSzzhdRrn7M%3D" alt="image.png" loading="lazy"/></p>
<p>å‘å¸ƒè€…å¯ä»¥å‘æŸä¸ªé€šé“ä¼ è¾“ä¿¡æ¯ï¼Œè€Œè®¢é˜…è€…åˆ™å¯ä»¥è®¢é˜…è¯¥é€šé“çš„ä¿¡æ¯å˜åŒ–ã€‚</p>
<p>é€šè¿‡æ–°å¢é€šé“ï¼Œå¯ä»¥å°†å‘å¸ƒè€…å’Œè®¢é˜…è€…è§£è€¦å‡ºæ¥ï¼Œä»è€Œå½¢æˆä¸€ç§å»ä¸­å¿ƒåŒ–çš„é€šä¿¡æ¨¡å¼ã€‚</p>
<p>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œè®¢é˜…è€…æœ¬èº«ä¹Ÿå¯ä»¥æ˜¯å‘å¸ƒè€…ï¼Œä»è€Œå®ç°äº‹ä»¶çš„åŒå‘é€šä¿¡ã€‚</p>
<p>æˆ‘ä»¬ä»¥æµè§ˆå™¨çš„Â <code>EventTarget</code>Â ä¸ºä¾‹ï¼Œæ¥çœ‹ä¸‹å‘å¸ƒ / è®¢é˜…æ¨¡å¼å¦‚ä½•è¿ä½œï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> event = <span class="hljs-keyword">new</span> <span class="hljs-title class_">EventTarget</span>();
<span class="hljs-comment">// event æ˜¯è®¢é˜…è€…</span>
event.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"channel1"</span>, <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(e.<span class="hljs-property">detail</span>));
<span class="hljs-comment">// event æ˜¯å‘å¸ƒè€…</span>
event.<span class="hljs-title function_">dispatchEvent</span>(
  <span class="hljs-keyword">new</span> <span class="hljs-title class_">CustomEvent</span>(<span class="hljs-string">"channel1"</span>, { <span class="hljs-attr">detail</span>: { <span class="hljs-attr">hello</span>: <span class="hljs-literal">true</span> } })
);
</code></pre>
<p>éœ€è¦æ³¨æ„çš„æ˜¯å…ˆè®¢é˜…ï¼Œåå‘å¸ƒï¼Œå¦‚æœå…ˆå‘å¸ƒåè®¢é˜…åˆ™ä¸è¡Œï¼š</p>
<pre><code class="hljs language-js" lang="js">event.<span class="hljs-title function_">dispatchEvent</span>(
  <span class="hljs-keyword">new</span> <span class="hljs-title class_">CustomEvent</span>(<span class="hljs-string">"channel2"</span>, { <span class="hljs-attr">detail</span>: { <span class="hljs-attr">hello</span>: <span class="hljs-literal">true</span> } })
);
<span class="hljs-comment">// ç”±äºå…ˆå‘å¸ƒåè®¢é˜…ï¼Œå¯¼è‡´è®¢é˜…å¤±è´¥ï¼Œä½†æ˜¯å‘å¸ƒè€…ä¸æ„ŸçŸ¥è®¢é˜…è€…çš„å¤±è´¥çŠ¶æ€</span>
event.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"channel2"</span>, <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(e.<span class="hljs-property">detail</span>));
</code></pre>
<p>æˆ‘ä»¬å¯ä»¥é€šè¿‡ç®€å•çš„å‡ è¡Œä»£ç å®ç°ä¸Šè¿°åŠŸèƒ½ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Event</span> {
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">channels</span> = {};
      <span class="hljs-comment">// è¿™é‡Œçš„ token ä¹Ÿå¯ä»¥æ˜¯éšæœºç”Ÿæˆçš„ uuid</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">token</span> = <span class="hljs-number">0</span>;
    }

    <span class="hljs-comment">// å®ç°è®¢é˜…</span>
    <span class="hljs-title function_">subscribe</span>(<span class="hljs-params">channel, callback</span>) {
      <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">channels</span>[channel]) <span class="hljs-variable language_">this</span>.<span class="hljs-property">channels</span>[channel] = [];
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">channels</span>[channel].<span class="hljs-title function_">push</span>({
        channel,
        <span class="hljs-attr">token</span>: ++<span class="hljs-variable language_">this</span>.<span class="hljs-property">token</span>,
        callback,
      });
      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">token</span>;
    }

    <span class="hljs-comment">// å®ç°å‘å¸ƒ</span>
    <span class="hljs-title function_">publish</span>(<span class="hljs-params">channel, data</span>) {
      <span class="hljs-keyword">const</span> subscribers = <span class="hljs-variable language_">this</span>.<span class="hljs-property">channels</span>[channel];
      <span class="hljs-keyword">if</span> (!subscribers) <span class="hljs-keyword">return</span>;
      <span class="hljs-keyword">let</span> len = subscribers.<span class="hljs-property">length</span>;
      <span class="hljs-keyword">while</span> (len--) {
        subscribers[len]?.<span class="hljs-title function_">callback</span>(data, subscribers[len].<span class="hljs-property">token</span>);
      }
    }

    <span class="hljs-comment">// å–æ¶ˆè®¢é˜…</span>
    <span class="hljs-title function_">unsubscribe</span>(<span class="hljs-params">token</span>) {
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> channel <span class="hljs-keyword">in</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">channels</span>) {
        <span class="hljs-keyword">const</span> index = <span class="hljs-variable language_">this</span>.<span class="hljs-property">channels</span>[channel].<span class="hljs-title function_">findIndex</span>(
          <span class="hljs-function">(<span class="hljs-params">subscriber</span>) =&gt;</span> subscriber.<span class="hljs-property">token</span> === token
        );
        <span class="hljs-keyword">if</span> (index !== -<span class="hljs-number">1</span>) {
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">channels</span>[channel].<span class="hljs-title function_">splice</span>(index, <span class="hljs-number">1</span>);
          <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">channels</span>[channel].<span class="hljs-property">length</span>) {
            <span class="hljs-keyword">delete</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">channels</span>[channel];
          }
          <span class="hljs-keyword">return</span> token;
        }
      }
    }
  }

  <span class="hljs-keyword">const</span> event = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Event</span>();
  <span class="hljs-keyword">const</span> token = event.<span class="hljs-title function_">subscribe</span>(<span class="hljs-string">"channel1"</span>, <span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'token: '</span>, data));
  <span class="hljs-keyword">const</span> token1 = event.<span class="hljs-title function_">subscribe</span>(<span class="hljs-string">"channel1"</span>, <span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'token1: '</span>, data));
  <span class="hljs-comment">// æ‰“å° token å’Œ token1</span>
  event.<span class="hljs-title function_">publish</span>(<span class="hljs-string">"channel1"</span>, { <span class="hljs-attr">hello</span>: <span class="hljs-literal">true</span> });
  event.<span class="hljs-title function_">unsubscribe</span>(token);
  <span class="hljs-comment">// æ‰“å° token1ï¼Œå› ä¸º token å–æ¶ˆäº†è®¢é˜…</span>
  event.<span class="hljs-title function_">publish</span>(<span class="hljs-string">"channel1"</span>, { <span class="hljs-attr">hello</span>: <span class="hljs-literal">true</span> });
</code></pre>
<p>å‘å¸ƒ / è®¢é˜…æ¨¡å¼å’Œè§‚å¯Ÿè€…æ¨¡å¼å­˜åœ¨æ˜æ˜¾å·®å¼‚ï¼š</p>
<ul>
<li>
<p>é¦–å…ˆåœ¨åŠŸèƒ½ä¸Šè§‚å¯Ÿè€…æ¨¡å¼æ˜¯ä¸€å¯¹å¤šçš„å•å‘é€šä¿¡æ¨¡å¼ï¼Œè€Œå‘å¸ƒ / è®¢é˜…æ¨¡å¼æ˜¯å¤šå¯¹å¤šçš„åŒå‘é€šä¿¡æ¨¡å¼ã€‚</p>
</li>
<li>
<p>å…¶æ¬¡è§‚å¯Ÿè€…æ¨¡å¼éœ€è¦ä¸€ä¸ªä¸­å¿ƒåŒ–çš„ Subject å¹¿æ’­æ¶ˆæ¯ï¼Œå¹¶ä¸”éœ€è¦æ„ŸçŸ¥ Observerï¼ˆä¾‹å¦‚ä¸Šè¿°çš„Â <code>observers</code>Â åˆ—è¡¨) å®ç°é€šçŸ¥ï¼Œæ˜¯ä¸€ç§ç´§è€¦åˆçš„é€šä¿¡æ–¹å¼ã€‚è€Œå‘å¸ƒ / è®¢é˜…æ¨¡å¼ä¸­çš„å‘å¸ƒè€…åªéœ€è¦å‘ç‰¹å®šçš„é€šé“å‘é€ä¿¡æ¯ï¼Œå¹¶ä¸æ„ŸçŸ¥è®¢é˜…è€…çš„è®¢é˜…çŠ¶æ€ï¼Œæ˜¯ä¸€ç§æ¾æ•£è§£è€¦çš„é€šä¿¡æ–¹å¼ã€‚</p>
</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[NestJSå…¥é—¨â€”â€”å¸¦ä½ è¿›å…¥NestJSçš„ä¸–ç•Œ]]></title>    <link>https://juejin.cn/post/7598827641307267123</link>    <guid>https://juejin.cn/post/7598827641307267123</guid>    <pubDate>2026-01-25T04:43:44.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7598827641307267123" data-draft-id="7598947628450168859" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="NestJSå…¥é—¨â€”â€”å¸¦ä½ è¿›å…¥NestJSçš„ä¸–ç•Œ"/> <meta itemprop="keywords" content="åç«¯,NestJS,TypeScript"/> <meta itemprop="datePublished" content="2026-01-25T04:43:44.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ™´æ €ay"/> <meta itemprop="url" content="https://juejin.cn/user/402859727269579"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            NestJSå…¥é—¨â€”â€”å¸¦ä½ è¿›å…¥NestJSçš„ä¸–ç•Œ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/402859727269579/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ™´æ €ay
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-25T04:43:44.000Z" title="Sun Jan 25 2026 04:43:44 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">NestJSå…¥é—¨â€”â€”å¸¦ä½ è¿›å…¥NestJSçš„ä¸–ç•Œ</h2>
<p>å¦‚æœä½ å·²ç»åŒå€¦äº†åœ¨ Node.js ä¸–ç•Œé‡Œåƒâ€œæ‹¼å›¾â€ä¸€æ ·å †ç Œä»£ç ï¼Œæ¸´æœ›ä¸€ç§æ›´æœ‰åºã€æ›´å¼ºå¤§ä¸”å……æ»¡ç°ä»£æ„Ÿçš„å¼€å‘ä½“éªŒï¼Œé‚£ä¹ˆæ¬¢è¿æ¥åˆ° <strong>NestJS</strong> çš„ä¸–ç•Œã€‚</p>
<p>NestJS å°±åƒæ˜¯ Node.js ç•Œçš„â€œå˜å½¢é‡‘åˆšâ€ï¼Œå®ƒåŸºäº <strong>TypeScript</strong> æ„å»ºï¼Œå¸æ”¶äº† Angular çš„æ¨¡å—åŒ–æ€æƒ³ï¼Œå¹¶å®Œç¾èåˆäº†ä¾èµ–æ³¨å…¥ï¼ˆDIï¼‰å’Œè£…é¥°å™¨é£æ ¼ã€‚å®ƒçš„ç›®æ ‡éå¸¸æ˜ç¡®ï¼š<strong>æ—¨åœ¨æ„å»ºé«˜æ•ˆã€å¯æ‹“å±•ä¸”æ˜“äºç»´æŠ¤çš„ä¼ä¸šçº§åç«¯åº”ç”¨</strong>ã€‚</p>
<hr/>
<h3 data-id="heading-1">ğŸš€ å¼€å¯ NestJS ä¹‹æ—…</h3>
<h4 data-id="heading-2">1. è£…å¤‡å‡†å¤‡ï¼šå®‰è£… CLI</h4>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦ä¸€æŠŠè¶æ‰‹çš„â€œç‘å£«å†›åˆ€â€â€”â€”NestJS å‘½ä»¤è¡Œå·¥å…·ï¼ˆCLIï¼‰ã€‚å®ƒèƒ½å¸®ä½ å¤„ç†æ‰€æœ‰ç¹ççš„é¡¹ç›®åˆå§‹åŒ–å·¥ä½œã€‚</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å…¨å±€å®‰è£…ï¼Œä¸€åŠ³æ°¸é€¸</span>
npm install -g @nestjs/cli
</code></pre>
<h4 data-id="heading-3">2. å¬å”¤é¡¹ç›®</h4>
<p>å®‰è£…å®Œæˆåï¼Œåªéœ€ä¸€è¡ŒæŒ‡ä»¤ï¼Œä¸€ä¸ªå®Œæ•´çš„é¡¹ç›®éª¨æ¶å°±è¯ç”Ÿäº†ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">nest new nest-test-demo
</code></pre>
<p>å½“ä½ è¿›å…¥é¡¹ç›®ç›®å½•å¹¶æŸ¥çœ‹ <code>src</code> æ–‡ä»¶å¤¹æ—¶ï¼Œä½ ä¼šå‘ç°å››ä½â€œå¤§å°†â€å·²å„å°±å„ä½ï¼š</p>
<ul>
<li><strong>main.ts</strong>ï¼šåº”ç”¨çš„å…¥åœºåˆ¸ã€‚å®ƒä½¿ç”¨æ ¸å¿ƒå‡½æ•° <code>NestFactory</code> åˆ›å»º Nest å®ä¾‹ï¼Œæ˜¯ä½ è®¾ç½®å…¨å±€ä¸­é—´ä»¶ã€CORSã€å®ˆå«ä»¥åŠå¯åŠ¨ HTTP æœåŠ¡å™¨çš„åœ°æ–¹ã€‚</li>
<li><strong>app.module.ts</strong>ï¼šæ ¹æ¨¡å—ã€‚å®ƒæ˜¯æ•´æ£µä¾èµ–æ ‘çš„â€œæ ‘æ ¹â€ï¼Œå®šä¹‰äº†åº”ç”¨çš„ç»“æ„å’Œä¾èµ–æ³¨å…¥çš„è¾¹ç•Œã€‚</li>
<li><strong>app.controller.ts</strong>ï¼šæµé‡äº¤è­¦ã€‚è´Ÿè´£æ¥æ”¶ HTTP è¯·æ±‚ï¼Œå¹¶å°†ä»»åŠ¡åˆ†å‘ç»™å…·ä½“çš„æœåŠ¡å»å¤„ç†ã€‚</li>
<li><strong>app.service.ts</strong>ï¼šå¹•ååŠŸè‡£ã€‚è¿™é‡Œå°è£…äº†çœŸæ­£çš„ä¸šåŠ¡é€»è¾‘ï¼Œæ— è®ºæ˜¯è®¡ç®—è¿˜æ˜¯è°ƒç”¨æ•°æ®åº“ï¼Œéƒ½åœ¨è¿™é‡Œè¿ç­¹å¸·å¹„ã€‚</li>
</ul>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/aa1c262cc0ca42acab5f5961fc2ac8b6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm05qCAYXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769921024&amp;x-signature=uaPTy18kT0vZGgKTEpIpcmylgm8%3D" alt="image.png" width="30%" loading="lazy"/>
<p><code>app.controller.spec.ts</code>Â æ˜¯Â <strong>NestJS é¡¹ç›®ä¸­ç”¨äºå¯¹Â <code>AppController</code>Â è¿›è¡Œå•å…ƒæµ‹è¯•çš„æµ‹è¯•æ–‡ä»¶</strong>ã€‚
è¿™ä¸ªæ–‡ä»¶çš„ç›®çš„æ˜¯ï¼š</p>
<ul>
<li>éªŒè¯Â <code>AppController</code>Â çš„è¡Œä¸ºæ˜¯å¦ç¬¦åˆé¢„æœŸ</li>
<li>ç¡®ä¿æ§åˆ¶å™¨æ–¹æ³•èƒ½æ­£ç¡®è°ƒç”¨æœåŠ¡å¹¶è¿”å›æ­£ç¡®çš„å“åº”</li>
<li>åœ¨ä»£ç é‡æ„æˆ–æ›´æ–°æ—¶é˜²æ­¢åŠŸèƒ½é€€åŒ–ï¼ˆå›å½’æµ‹è¯•ï¼‰</li>
</ul>
<blockquote>
<p>åœ¨æœ¬æ–‡æ¡ˆä¾‹ä¸­ï¼Œåªä½¿ç”¨ç®€å•æ¡ˆä¾‹å¸¦ä½ äº†è§£NestJSï¼Œ<code>app.controller.spec.ts</code>æš‚ä¸ä½¿ç”¨</p>
</blockquote>
<hr/>
<h3 data-id="heading-4">ğŸ—ï¸ æ¨¡å—åŒ–å®æˆ˜ï¼šTodos æ¡ˆä¾‹</h3>
<p>ä¸ºäº†ç†è§£ NestJS çš„æ ¸å¿ƒé€»è¾‘ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹ä¸€ä¸ªç»å…¸çš„ <code>Todos</code> æ¨¡å—ã€‚åœ¨ NestJS ä¸­ï¼Œæˆ‘ä»¬éµå¾ªâ€œä¸€ç±»ä¸€æ–‡ä»¶â€çš„åŸåˆ™ï¼Œé€šè¿‡æ¨¡å—å°†åŠŸèƒ½å°è£…ã€‚</p>
<h4 data-id="heading-5">æ¨¡å—ç»„ç»‡ (TodosModule)</h4>
<p>åœ¨ <code>todos.module.ts</code> ä¸­ï¼Œæˆ‘ä»¬å°†æ§åˆ¶å™¨å’ŒæœåŠ¡æ‰“åŒ…ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> {<span class="hljs-title class_">Module</span>} <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>
<span class="hljs-keyword">import</span> {<span class="hljs-title class_">TodosController</span>} <span class="hljs-keyword">from</span> <span class="hljs-string">'./todos.controller'</span>
<span class="hljs-keyword">import</span> {<span class="hljs-title class_">TodosService</span>} <span class="hljs-keyword">from</span> <span class="hljs-string">'./todos.service'</span>

<span class="hljs-meta">@Module</span>({
    <span class="hljs-attr">controllers</span>:[<span class="hljs-title class_">TodosController</span>],
    <span class="hljs-attr">providers</span>:[<span class="hljs-title class_">TodosService</span>]
})

<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TodosModule</span>{}

</code></pre>
<h4 data-id="heading-6">è·¯ç”±æ§åˆ¶ (TodosController)</h4>
<p><code>todos.controller.ts</code> ä½¿ç”¨è£…é¥°å™¨å®šä¹‰è·¯ç”±ï¼Œ<strong>å¤„ç† HTTP è¯·æ±‚</strong>ï¼Œå®šä¹‰ API è·¯ç”±ï¼ˆRouteï¼‰å’Œè¯·æ±‚å¤„ç†é€»è¾‘ä¾‹å¦‚ï¼Œåˆ é™¤ä»»åŠ¡æ—¶ï¼Œæˆ‘ä»¬éœ€è¦å°† URL ä¸­çš„å­—ç¬¦ä¸² <code>id</code> è½¬æ¢ä¸ºæ•°å­—ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> {
  <span class="hljs-title class_">Controller</span>,
  <span class="hljs-title class_">Get</span>,
  <span class="hljs-title class_">Post</span>,
  <span class="hljs-title class_">Body</span>,
  <span class="hljs-title class_">Delete</span>,
  <span class="hljs-title class_">Param</span>,
  <span class="hljs-title class_">ParseIntPipe</span>
} <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">TodosService</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./todos.service'</span>;

<span class="hljs-meta">@Controller</span>(<span class="hljs-string">'todos'</span>)
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TodosController</span>{
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> todosService: TodosService</span>){}

  <span class="hljs-meta">@Get</span>()
  <span class="hljs-title function_">getTodos</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">todosService</span>.<span class="hljs-title function_">findAll</span>();
  }

  <span class="hljs-meta">@Post</span>()
  <span class="hljs-title function_">addTodo</span>(<span class="hljs-params"><span class="hljs-meta">@Body</span>(<span class="hljs-string">'title'</span>) title:<span class="hljs-built_in">string</span></span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">todosService</span>.<span class="hljs-title function_">addTodo</span>(title);
  }

  <span class="hljs-meta">@Delete</span>(<span class="hljs-string">':id'</span>)
  <span class="hljs-comment">// å‰ç«¯ä¼ çš„æ˜¯å­—ç¬¦ä¸² å› ä¸º URL è·¯å¾„å‚æ•°ï¼ˆPath Parameterï¼‰æ°¸è¿œæ˜¯å­—ç¬¦ä¸²ï¼Œéœ€è¦è½¬æˆæ•°å­—ç±»å‹</span>
  <span class="hljs-title function_">deleteTodo</span>(<span class="hljs-params"><span class="hljs-meta">@Param</span>(<span class="hljs-string">'id'</span>,ParseIntPipe) id: <span class="hljs-built_in">number</span></span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">todosService</span>.<span class="hljs-title function_">deleteTodo</span>(id);
  }
}
}
</code></pre>
<p><code>constructor()</code>æ˜¯ NestJS ä¸­ ä¾èµ–æ³¨å…¥çš„æ ¸å¿ƒä½“ç°ï¼ŒNestJS çš„ <code>IoCï¼ˆæ§åˆ¶åè½¬ï¼‰</code>å®¹å™¨ä¼šè‡ªåŠ¨æ‰¾åˆ° <code>TodosService </code>çš„å®ä¾‹å¹¶å°†å…¶â€œæ³¨å…¥â€åˆ°æ§åˆ¶å™¨çš„æ„é€ å‡½æ•°ä¸­ã€‚è€Œ<code>TodosService </code>çš„å®ä¾‹ï¼Œæˆ‘ä»¬åœ¨ <code>todos.service.ts</code> ä¸­ï¼Œä½¿ç”¨äº† <code>@Injectable()</code>è£…é¥°å™¨ã€‚</p>
<p>è¿™ä¸ªè£…é¥°å™¨çš„ä½œç”¨æ˜¯ç”Ÿæˆ å…ƒæ•°æ® (Metadata) ã€‚å½“ <code>TypeScript </code>ç¼–è¯‘æˆ JavaScript æ—¶ï¼Œè¿™ä¸ªè£…é¥°å™¨ä¼šè®°å½•ä¸‹ï¼šâ€œ <code>TodosController</code> çš„æ„é€ å‡½æ•°éœ€è¦ä¸€ä¸ª<code>TodosService</code>ç±»å‹çš„å‚æ•°â€ã€‚å½“åº”ç”¨ç¨‹åºå¯åŠ¨æ—¶ï¼ˆæ‰§è¡Œ<code>main.ts ä¸­çš„ NestFactory.create</code>ï¼‰ï¼ŒNestJS ä¼šæ‰«ææ‰€æœ‰çš„æ¨¡å—ï¼š</p>
<ol>
<li>å®ƒçœ‹åˆ° <code>TodosController </code>éœ€è¦ <code>TodosService</code> ã€‚</li>
<li>å®ƒæ£€æŸ¥è‡ªå·±çš„â€œå°æœ¬æœ¬â€ï¼ˆå®¹å™¨ä»“åº“ï¼‰ï¼Œçœ‹çœ‹æœ‰æ²¡æœ‰ <code>TodosService</code> çš„å®ä¾‹ ã€‚</li>
<li>å…³é”®ç‚¹ ï¼šå¦‚æœæ²¡æœ‰å®ä¾‹ï¼Œå®ƒä¼šæ ¹æ®ä½ ç™»è®°çš„ç±»ï¼Œè‡ªå·±æ‰§è¡Œ<code>const service = new TodosService()</code>ã€‚</li>
<li>æ‹¿åˆ°å®ä¾‹åï¼Œå®ƒå†æ‰§è¡Œ<code> new TodosController(service)</code> ã€‚</li>
</ol>
<p>è¿™ç§æ¨¡å¼å°±å«<strong>æ§åˆ¶åè½¬</strong>â€”â€”ä½ å¤±å»äº†åˆ›å»ºå®ä¾‹çš„æ§åˆ¶æƒï¼Œä½†ä¹Ÿå¾—åˆ°äº†è§£è€¦å’Œè‡ªåŠ¨åŒ–çš„ä¾¿åˆ©ã€‚æˆ‘ä»¬åªéœ€è¦å†™è¯´æ˜ä¹¦ï¼ˆç±»ï¼‰ï¼ŒçœŸæ­£çš„å·¥ä½œäº¤ç»™NestJSæ¥åš</p>
<blockquote>
<p>éœ€æ³¨æ„:å‰ç«¯ä¼ é€’çš„å‚æ•°æ˜¯å­—ç¬¦ä¸² å› ä¸º URL è·¯å¾„å‚æ•°ï¼ˆPath Parameterï¼‰æ°¸è¿œæ˜¯å­—ç¬¦ä¸²ï¼Œæ‰€ä»¥éœ€è¦è½¬æˆæ•°å­—ç±»å‹</p>
</blockquote>
<h4 data-id="heading-7">ä¸šåŠ¡é€»è¾‘ (TodosService)</h4>
<p><code>todos.service.ts</code> ä½¿ç”¨ <code>@Injectable()</code> è£…é¥°å™¨ç®€å•å®šä¹‰äº†å¢åˆ çš„åŠŸèƒ½ï¼Œä½¿å…¶æˆä¸ºä¸€ä¸ªå¯æ³¨å…¥çš„æä¾›è€…ã€‚è¿™ç§è®¾è®¡è®©ä»£ç é«˜åº¦è§£è€¦ï¼Œæµ‹è¯•èµ·æ¥ä¹Ÿæ˜“å¦‚åæŒã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Injectable</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Todo</span>{
    <span class="hljs-attr">id</span>:<span class="hljs-built_in">number</span>;
    <span class="hljs-attr">title</span>:<span class="hljs-built_in">string</span>;
    <span class="hljs-attr">completed</span>:<span class="hljs-built_in">boolean</span>;
}
<span class="hljs-meta">@Injectable</span>()
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TodosService</span>{
    <span class="hljs-keyword">private</span> <span class="hljs-attr">todos</span>:<span class="hljs-title class_">Todo</span>[] = [
        {
            <span class="hljs-attr">id</span>:<span class="hljs-number">1</span>,
            <span class="hljs-attr">title</span>:<span class="hljs-string">'ç–¯ç‹‚æ˜ŸæœŸå››'</span>,
            <span class="hljs-attr">completed</span>:<span class="hljs-literal">false</span>
        },
        {
            <span class="hljs-attr">id</span>:<span class="hljs-number">2</span>,
            <span class="hljs-attr">title</span>:<span class="hljs-string">'åƒåƒåƒ'</span>,
            <span class="hljs-attr">completed</span>:<span class="hljs-literal">true</span>
        }
    ]

    <span class="hljs-title function_">findAll</span>(<span class="hljs-params"/>){
        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">todos</span>;
    }
    <span class="hljs-title function_">addTodo</span>(<span class="hljs-params">title:<span class="hljs-built_in">string</span></span>){
        <span class="hljs-keyword">const</span> <span class="hljs-attr">todo</span>:<span class="hljs-title class_">Todo</span> = {
            <span class="hljs-attr">id</span>: + <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>(),
            title,
            <span class="hljs-attr">completed</span>:<span class="hljs-literal">false</span>
        }
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">todos</span>.<span class="hljs-title function_">push</span>(todo);
        <span class="hljs-keyword">return</span> todo;
    }
    <span class="hljs-title function_">deleteTodo</span>(<span class="hljs-params">id:<span class="hljs-built_in">number</span></span>){
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">todos</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">todos</span>.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">todo</span> =&gt;</span> todo.<span class="hljs-property">id</span> !== id);
        <span class="hljs-keyword">return</span> {
            <span class="hljs-attr">message</span>:<span class="hljs-string">'åˆ é™¤æˆåŠŸ'</span>,
            <span class="hljs-attr">code</span>:<span class="hljs-number">200</span>
        }
    }
}
</code></pre>
<hr/>
<h3 data-id="heading-8">ğŸ”Œ æ·±åº¦è§£æï¼šæ•°æ®åº“è¿æ¥æ¨¡å—</h3>
<p>åœ¨ä¼ä¸šçº§åº”ç”¨ä¸­ï¼Œæ•°æ®åº“è¿æ¥æ˜¯åŸºçŸ³ã€‚æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªå¦‚ä½•åˆ©ç”¨ <strong>PostgreSQL (psql)</strong> æ„å»ºé«˜æ•ˆè¿æ¥æ± çš„æ¡ˆä¾‹ã€‚</p>
<h4 data-id="heading-9">1. ä¸ºä»€ä¹ˆéœ€è¦è¿æ¥æ± ï¼Ÿ</h4>
<p>æƒ³è±¡ä¸€ä¸‹ï¼Œå¦‚æœæ¯ä¸ªç”¨æˆ·è®¿é—®ä½ çš„ç½‘ç«™ï¼Œä½ éƒ½è¦ç°åœºâ€œä¿®ä¸€æ¡è·¯â€å»æ•°æ®åº“ï¼Œé‚£å¾—æœ‰å¤šæ…¢ï¼Ÿ<strong>è¿æ¥æ± </strong>çš„ä½œç”¨å°±æ˜¯é¢„å…ˆä¿®å¥½å‡ æ¡é«˜é€Ÿå…¬è·¯å¹¶ä¿æŒå¼€å¯ã€‚å½“æœ‰æŸ¥è¯¢è¯·æ±‚æ—¶ï¼Œç›´æ¥æ‹ä¸€ä¸ªç©ºé—²è¿æ¥å‡ºæ¥ç”¨ï¼Œç”¨å®Œè¿˜å›å»ã€‚è¿™æ¯”é¢‘ç¹æ‹†å»ºè¿æ¥è¦é«˜æ•ˆå¾—å¤šã€‚</p>
<h4 data-id="heading-10">2. å…¨å±€æ•°æ®åº“æ¨¡å—å®ç°</h4>
<p>åœ¨ <code>database.module.ts</code> ä¸­ï¼Œæˆ‘ä»¬å±•ç¤ºäº† NestJS ä¾èµ–æ³¨å…¥çš„ç²¾é«“ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@Global</span>() <span class="hljs-comment">// æ ‡è®°ä¸ºå…¨å±€æ¨¡å—ï¼Œä¸€å¤„å¯¼å…¥ï¼Œå¤„å¤„å¯ç”¨</span>
<span class="hljs-meta">@Module</span>({
  <span class="hljs-attr">providers</span>: [
    {
      <span class="hljs-attr">provide</span>: <span class="hljs-string">'PG_CONNECTION'</span>, <span class="hljs-comment">// å®šä¹‰æ³¨å…¥ä»¤ç‰Œ</span>
      <span class="hljs-attr">useValue</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Pool</span>({
        <span class="hljs-attr">user</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">DB_USER</span>,
        <span class="hljs-attr">host</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">DB_HOST</span>,
        <span class="hljs-attr">database</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">DB_NAME</span>,
        <span class="hljs-attr">password</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">DB_PASSWORD</span>,
        <span class="hljs-attr">port</span>: <span class="hljs-built_in">parseInt</span>(process.<span class="hljs-property">env</span>.<span class="hljs-property">DB_PORT</span> || <span class="hljs-string">'5432'</span>, <span class="hljs-number">10</span>),
      })
    }
  ],
  <span class="hljs-attr">exports</span>: [<span class="hljs-string">'PG_CONNECTION'</span>] <span class="hljs-comment">// å¯¼å‡ºä»¤ç‰Œï¼Œè®©å…¶ä»– Service èƒ½é€šè¿‡ @Inject è·å–è¿æ¥</span>
})
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DatabaseModule</span> {}
</code></pre>
<ul>
<li><code>provide: 'PG_CONNECTION'</code> : å®šä¹‰äº†ä¸€ä¸ª æ³¨å…¥ä»¤ç‰Œ (Injection Token) ã€‚åœ¨å…¶ä»– Service ä¸­ï¼Œä½ å¯ä»¥é€šè¿‡<code>@Inject('PG_CONNECTION') </code>æ¥è·å–è¿™ä¸ªæ•°æ®åº“è¿æ¥å®ä¾‹ã€‚</li>
<li>æ•°æ®åº“è¿æ¥æ± é…ç½®<code>(Pool) new Pool({ ... })</code>æ˜¯ pg åº“ï¼ˆNode.js çš„ PostgreSQL å®¢æˆ·ç«¯ï¼‰æä¾›çš„ç±»ï¼Œç”¨äºç®¡ç†æ•°æ®åº“è¿æ¥ã€‚</li>
<li><code>exports: ['PG_CONNECTION'] </code>: å®ƒå‘Šè¯‰ NestJSï¼Œ <code>PG_CONNECTION</code> è¿™ä¸ª <code>Provider</code> å¯ä»¥åœ¨è¯¥æ¨¡å—ä¹‹å¤–è¢«å…¶ä»–æ¨¡å—ä½¿ç”¨ã€‚é…åˆ <code>@Global()</code> ï¼Œè¿™ä½¿å¾—æ•´ä¸ªåº”ç”¨éƒ½èƒ½æ–¹ä¾¿åœ°è®¿é—®åˆ°è¿™ä¸ªæ•°æ®åº“è¿æ¥æ± ã€‚</li>
</ul>
<h4 data-id="heading-11">3. å®‰å…¨ä¸çµæ´»ï¼šç¯å¢ƒå˜é‡</h4>
<p>ä¸è¦æŠŠæ•°æ®åº“å¯†ç ç¡¬ç¼–ç åœ¨ä»£ç é‡Œï¼æˆ‘ä»¬ä½¿ç”¨ <code>dotenv</code> æ¥ç®¡ç†ç¯å¢ƒå˜é‡ã€‚åœ¨ <code>main.ts</code> ä¸­é€šè¿‡ <code>config()</code> åŠ è½½é…ç½®ï¼Œç„¶åé€šè¿‡ <code>process.env</code> è¯»å–ã€‚</p>
<hr/>
<h3 data-id="heading-12">ğŸš¦ å¯åŠ¨ä¸éªŒè¯</h3>
<p>å½“ä½ è¿è¡Œ <code>npm run start:dev</code> æ—¶ï¼ŒNestJS ä¼šå‘ä½ å±•ç¤ºå®ƒæ¸…æ™°çš„åˆå§‹åŒ–é€»è¾‘ï¼š</p>
<pre><code class="hljs language-text" lang="text">[Nest] 29648  - 2026/01/25 11:24:14     LOG [InstanceLoader] AppModule dependencies initialized +0ms
[Nest] 29648  - 2026/01/25 11:24:14     LOG [InstanceLoader] TodosModule dependencies initialized +0ms
[Nest] 29648  - 2026/01/25 11:24:14     LOG [RoutesResolver] AppController {/}: +2ms
[Nest] 29648  - 2026/01/25 11:24:14     LOG [RouterExplorer] Mapped {/, GET} route +2ms
[Nest] 29648  - 2026/01/25 11:24:14     LOG [RouterExplorer] Mapped {/db_test, GET} route +0ms
[Nest] 29648  - 2026/01/25 11:24:14     LOG [RoutesResolver] TodosController {/todos}: +0ms
[Nest] 29648  - 2026/01/25 11:24:14     LOG [NestApplication] Nest application successfully started +0ms
</code></pre>
<p>å¦‚æœä½ çš„é¡¹ç›®å¯åŠ¨åæ— æ³•è®¿é—® <code>localhost:3000</code>ï¼Œåˆ«æ…Œï¼Œæ£€æŸ¥ä¸€ä¸‹ä½ çš„ <code>.env</code> æ–‡ä»¶ã€‚æ¯”å¦‚åœ¨æˆ‘ä»¬çš„æ¡ˆä¾‹ä¸­ï¼Œç«¯å£è¢«é…ç½®æˆäº† <code>1234</code>ï¼š</p>
<pre><code class="hljs language-text" lang="text">GET request to http://localhost:1234/
Status: 200 OK
Response: ä½ å¥½å•Š  
</code></pre>
<hr/>
<h3 data-id="heading-13">æµ‹è¯•httpè¯·æ±‚</h3>
<p>ä¸‹é¢ä½¿ç”¨ <strong>Apifox</strong> æ¥æ¨¡æ‹Ÿhttpè¯·æ±‚:</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/56ad6316f07f4a65802d9025c795b5d5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm05qCAYXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769921024&amp;x-signature=fRsunHp1lMzOLtt%2FR2ILwjRjSUU%3D" alt="image.png" loading="lazy"/></p>
<p>è®¿é—®<code>http://localhost:1234/todos</code>èƒ½æ‹¿åˆ°æˆ‘ä»¬åœ¨<code>todos.service.ts</code>ä¸­å®šä¹‰çš„æ•°æ®ï¼Œæˆ‘ä»¬ä½¿ç”¨<code>post</code>è¯·æ±‚åŠ å…¥ä¸€æ¡æ•°æ®</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c761783ddfdb47aab46189d777856af4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm05qCAYXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769921024&amp;x-signature=BYJRyapDKefzmV5FsmcLsZOgLwM%3D" alt="image.png" loading="lazy"/></p>
<p>è¿”å›äº†æˆ‘ä»¬è¾“å…¥çš„æ•°æ®ï¼Œidä¸ºä¸€ä¸ªæ—¶é—´æˆ³ï¼ˆ<code>new Date()</code>ï¼‰ï¼Œä¿è¯æ¯æ¡æ•°æ®çš„idä¸åŒã€‚å†æ¬¡æŸ¥è¯¢å¯ä»¥çœ‹åˆ°æ•°æ®çš„å¢åŠ </p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4afb5c0e488f4a75b3dff944de26d78e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm05qCAYXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769921024&amp;x-signature=J2vtYAFBEwYMY%2Bgg3pXyGHNjxEQ%3D" alt="image.png" loading="lazy"/></p>
<p>ä½¿ç”¨<code>delete</code>è¯·æ±‚å°†åˆšåˆšçš„æ•°æ®åˆ é™¤ï¼Œæˆ‘ä»¬å°†idå¤åˆ¶ä¸‹æ¥ï¼Œåœ¨åœ°å€ååŠ å…¥<code>/id</code>å³å¯åˆ é™¤</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5f1cee1524784422a92d51edcaec6c7e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm05qCAYXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769921024&amp;x-signature=HPjnfRCpFkp8FJjDaxSElH01%2Bdc%3D" alt="image.png" loading="lazy"/></p>
<p>å†æ¬¡æŸ¥è¯¢ï¼Œå¯çœ‹åˆ°éœ€è¦åˆ é™¤çš„æ•°æ®å·²è¢«åˆ é™¤</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6bdd1cdcdb6448d98e3fe1a93de40080~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm05qCAYXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769921024&amp;x-signature=Cj79b48CROy%2FJK79N7Pf5%2F6ApXU%3D" alt="image.png" loading="lazy"/></p>
<p>ç”±è¿™ä¸ªæµ‹è¯•è¯æ˜äº†æˆ‘ä»¬æ¡ˆä¾‹æ— é€»è¾‘bugèƒ½å¤Ÿæ­£å¸¸è¿è¡Œ</p>
<h3 data-id="heading-14">ğŸ’¡ æ€»ç»“</h3>
<p>NestJS ä¸ä»…ä»…æ˜¯ä¸€ä¸ªæ¡†æ¶ï¼Œå®ƒæ›´åƒæ˜¯ä¸€å¥—å…³äºâ€œå¦‚ä½•å†™å‡ºå¥½ä»£ç â€çš„å“²å­¦ã€‚é€šè¿‡<strong>è£…é¥°å™¨</strong>è®©ä»£ç æ›´å…·è¯­ä¹‰åŒ–ï¼Œé€šè¿‡<strong>æ¨¡å—åŒ–</strong>è®©ç»“æ„æ›´æ¸…æ™°ï¼Œé€šè¿‡<strong>ä¾èµ–æ³¨å…¥</strong>è®©é€»è¾‘æ›´è§£è€¦ã€‚</p>
<p>æŒæ¡äº†è¿™äº›ï¼Œä½ å°±å·²ç»è¿ˆå‡ºäº†æ„å»ºå¼ºå¤§åç«¯ç³»ç»Ÿçš„ç¬¬ä¸€æ­¥ã€‚æ¥ä¸‹æ¥ï¼Œä½ å¯ä»¥å°è¯•ç»“åˆæ•°æ®åº“æ“ä½œï¼Œå¼€å¯ä½ çš„å…¨æ ˆè¿›é˜¶ä¹‹æ—…ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€ŠJavaScript åŸå‹å®Œå…¨æŒ‡å—ã€‹]]></title>    <link>https://juejin.cn/post/7598574507347230755</link>    <guid>https://juejin.cn/post/7598574507347230755</guid>    <pubDate>2026-01-25T05:05:13.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7598574507347230755" data-draft-id="7598490039489658915" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€ŠJavaScript åŸå‹å®Œå…¨æŒ‡å—ã€‹"/> <meta itemprop="keywords" content="JavaScript"/> <meta itemprop="datePublished" content="2026-01-25T05:05:13.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æˆ·80110532256"/> <meta itemprop="url" content="https://juejin.cn/user/1927884034804425"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€ŠJavaScript åŸå‹å®Œå…¨æŒ‡å—ã€‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1927884034804425/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æˆ·80110532256
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-25T05:05:13.000Z" title="Sun Jan 25 2026 05:05:13 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    5
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><hr/>
<h2 data-id="heading-0">JavaScript åŸå‹å®Œå…¨æŒ‡å—</h2>
<h3 data-id="heading-1">â€”â€” ä»é›¶ç†è§£åŸå‹ã€åŸå‹é“¾ä¸ç»§æ‰¿æœºåˆ¶ï¼ˆå®Œæ•´å­¦ä¹ ç¬”è®°ï¼‰</h3>
<blockquote>
<p><strong>ä¸€å¥è¯æ ¸å¿ƒ</strong>ï¼š<br/>
JavaScript æ˜¯ä¸€é—¨<strong>åŸºäºåŸå‹ï¼ˆprototype-basedï¼‰çš„åŠ¨æ€è¯­è¨€</strong>ï¼Œå®ƒæ²¡æœ‰â€œç±»â€ï¼Œä½†æ‰€æœ‰å¯¹è±¡éƒ½é€šè¿‡ä¸€ä¸ªå« <code>[[Prototype]]</code> çš„å†…éƒ¨é“¾æ¥å½¢æˆä¸€æ¡å¯å‘ä¸ŠæŸ¥æ‰¾çš„â€œå®¶è°±â€â€”â€”è¿™å°±æ˜¯<strong>åŸå‹é“¾</strong>ã€‚<br/>
ç†è§£åŸå‹é“¾ï¼Œæ˜¯æŒæ¡ JS ç»§æ‰¿ã€å¤ç”¨ã€é¢å‘å¯¹è±¡ç¼–ç¨‹çš„çµé­‚é’¥åŒ™ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-2">ç›®å½•</h3>
<ol>
<li>
<p>[ä¸€ã€ä»€ä¹ˆæ˜¯â€œåŸå‹â€ï¼Ÿ]</p>
</li>
<li>
<p>[äºŒã€ä¸ºä»€ä¹ˆéœ€è¦åŸå‹ï¼Ÿâ€”â€”JS çš„è®¾è®¡å“²å­¦]</p>
</li>
<li>
<p>[ä¸‰ã€Object.prototype æ˜¯ä¸€åˆ‡çš„èµ·ç‚¹å—ï¼Ÿ]</p>
</li>
<li>
<p>[å››ã€å¦‚ä½•åˆ›å»ºå¯¹è±¡å¹¶æŒ‡å®šå…¶åŸå‹ï¼Ÿ]</p>
</li>
<li>
<p>[äº”ã€è‡ªæœ‰å±æ€§ vs åŸå‹å±æ€§ï¼šè°ä¼˜å…ˆï¼Ÿ]</p>
</li>
<li>
<p>[ä¸ƒã€åŸå‹æ˜¯åŠ¨æ€çš„ï¼]</p>
</li>
<li>
<p>[å…«ã€æ·±å…¥ç†è§£ï¼šp çš„åŸå‹æ˜¯ Person.prototypeï¼Œè€Œä¸æ˜¯ Personï¼]</p>
</li>
<li>
<p>[ä¹ã€ä»€ä¹ˆæ˜¯åŸå‹é“¾ï¼Ÿâ€”â€”å±æ€§æŸ¥æ‰¾çš„â€œå®¶è°±å¯¼èˆªâ€]</p>
</li>
<li>
<p>[åã€å¸¸è§è¯¯åŒºä¸é¿å‘æŒ‡å—]</p>
</li>
<li>
<p>[åä¸€ã€ç°ä»£å†™æ³•å¯¹æ¯”ä¸æœ€ä½³å®è·µ]</p>
</li>
<li>
<p>[åäºŒã€æ€»ç»“å£è¯€ä¸åŠ¨æ‰‹å®éªŒ]</p>
</li>
</ol>
<hr/>
<h3 data-id="heading-3">ä¸€ã€ä»€ä¹ˆæ˜¯â€œåŸå‹â€ï¼Ÿ</h3>
<p>åœ¨ JavaScript ä¸­ï¼Œ<strong>æ¯ä¸ªå¯¹è±¡éƒ½æœ‰ä¸€ä¸ªå†…éƒ¨å±æ€§å«åš <code>[[Prototype]]</code></strong> ï¼Œå®ƒæŒ‡å‘å¦ä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ä¸ªè¢«æŒ‡å‘çš„å¯¹è±¡å°±æ˜¯å®ƒçš„â€œåŸå‹â€ã€‚</p>
<p>ä½ å¯ä»¥æŠŠâ€œåŸå‹â€æƒ³è±¡æˆä¸€ä¸ªâ€œæ¨¡æ¿â€æˆ–â€œç¥–å…ˆâ€ã€‚å½“ä½ åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡æ—¶ï¼Œå®ƒå¯ä»¥â€œç»§æ‰¿â€åŸå‹ä¸Šçš„å±æ€§å’Œæ–¹æ³•ã€‚</p>
<blockquote>
<p>ç±»æ¯”ï¼šå°±åƒä½ å‡ºç”Ÿæ—¶ä»çˆ¶æ¯é‚£é‡Œç»§æ‰¿äº†åŸºå› ä¸€æ ·ï¼ŒJavaScript å¯¹è±¡ä¹Ÿä»å®ƒçš„â€œåŸå‹â€é‚£é‡Œç»§æ‰¿å±æ€§å’Œæ–¹æ³•ã€‚</p>
</blockquote>
<h4 data-id="heading-4">å…³é”®ç‚¹ï¼š</h4>
<ul>
<li><code>[[Prototype]]</code> æ˜¯<strong>å†…éƒ¨å±æ€§</strong>ï¼Œä¸èƒ½ç›´æ¥è®¿é—®ã€‚</li>
<li>æˆ‘ä»¬é€šå¸¸é€šè¿‡ <code>__proto__</code> æˆ– <code>Object.getPrototypeOf()</code> æ¥æŸ¥çœ‹å®ƒã€‚</li>
<li>åŸå‹å…è®¸å¯¹è±¡å…±äº«å±æ€§å’Œæ–¹æ³•ï¼Œå®ç°ä»£ç å¤ç”¨ã€‚</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç¤ºä¾‹</span>
<span class="hljs-keyword">var</span> parent = { <span class="hljs-attr">name</span>: <span class="hljs-string">'Parent'</span>, <span class="hljs-attr">sayHi</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) { <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Hi!'</span>); } };
<span class="hljs-keyword">var</span> child = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">create</span>(parent); <span class="hljs-comment">// child çš„åŸå‹æ˜¯ parent</span>

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(child.<span class="hljs-property">name</span>); <span class="hljs-comment">// 'Parent' â† ä»åŸå‹ç»§æ‰¿</span>
child.<span class="hljs-title function_">sayHi</span>();           <span class="hljs-comment">// 'Hi!'    â† æ–¹æ³•æ¥è‡ªåŸå‹</span>
</code></pre>
<hr/>
<h3 data-id="heading-5">äºŒã€ä¸ºä»€ä¹ˆéœ€è¦åŸå‹ï¼Ÿâ€”â€”JS çš„è®¾è®¡å“²å­¦</h3>
<p>JavaScript æ˜¯<strong>åŸºäºåŸå‹ç»§æ‰¿</strong>çš„è¯­è¨€ï¼Œè€Œä¸æ˜¯åƒ Java é‚£æ ·ä½¿ç”¨â€œç±»ç»§æ‰¿â€ã€‚è¿™æ„å‘³ç€ï¼š</p>

























<table><thead><tr><th>ç‰¹æ€§</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>æ²¡æœ‰â€œç±»â€</td><td>JS ä¸é â€œç±»â€å®šä¹‰å¯¹è±¡æ¨¡æ¿ï¼Œè€Œæ˜¯ç›´æ¥æ“ä½œå¯¹è±¡</td></tr><tr><td>æ‰€æœ‰å¯¹è±¡éƒ½å¯ä»¥ä½œä¸ºåŸå‹</td><td>ä»»ä½•å¯¹è±¡éƒ½èƒ½æˆä¸ºå…¶ä»–å¯¹è±¡çš„â€œç¥–å…ˆâ€</td></tr><tr><td>å®ç°ä»£ç å¤ç”¨ä¸å†…å­˜ä¼˜åŒ–</td><td>å¤šä¸ªå®ä¾‹å…±äº«åŒä¸€ä»½æ–¹æ³•ï¼Œé¿å…é‡å¤åˆ›å»ºå‡½æ•°</td></tr><tr><td>åŠ¨æ€å¯ä¿®æ”¹</td><td>è¿è¡Œæ—¶ä¿®æ”¹åŸå‹ï¼Œæ‰€æœ‰åä»£ç«‹å³ç”Ÿæ•ˆ</td></tr></tbody></table>
<p>æ­£æ˜¯è¿™ç§æœºåˆ¶ï¼Œè®© JS å®ç°äº†â€œä¸€åˆ‡çš†å¯¹è±¡â€å’Œçµæ´»çš„ç»§æ‰¿æ¨¡å‹ã€‚</p>
<hr/>
<h3 data-id="heading-6">ä¸‰ã€Object.prototype æ˜¯ä¸€åˆ‡çš„èµ·ç‚¹å—ï¼Ÿ</h3>
<p>å‡ ä¹æ‰€æœ‰å¯¹è±¡æœ€ç»ˆéƒ½ä¼šè¿æ¥åˆ° <code>Object.prototype</code> ä¸Šã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>({}.<span class="hljs-property">__proto__</span> === <span class="hljs-title class_">Object</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>); <span class="hljs-comment">// true</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Object</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">__proto__</span>);         <span class="hljs-comment">// null âœ…</span>
</code></pre>
<h4 data-id="heading-7">ğŸ”¹ åŸå‹é“¾ç»ˆç‚¹æ˜¯ <code>null</code></h4>
<ul>
<li><code>Object.prototype</code> çš„åŸå‹æ˜¯ <code>null</code>ï¼Œè¡¨ç¤ºé“¾çš„ç»“æŸã€‚</li>
<li>æ‰€æœ‰æ ‡å‡†å¯¹è±¡çš„åŸå‹é“¾æœ€ç»ˆéƒ½æŒ‡å‘è¿™é‡Œã€‚</li>
</ul>
<p>ç»“è®ºï¼š</p>
<ul>
<li><code>{}</code> çš„åŸå‹æ˜¯ <code>Object.prototype</code></li>
<li><code>Object.prototype</code> çš„åŸå‹æ˜¯ <code>null</code>ï¼ˆç»ˆç‚¹ï¼‰</li>
</ul>
<blockquote>
<p>âš ï¸ æ³¨æ„ï¼š<code>Object.create(null)</code> åˆ›å»ºçš„å¯¹è±¡æ²¡æœ‰åŸå‹ï¼ˆ<code>__proto__</code> ä¸º <code>undefined</code>ï¼‰ï¼Œå¸¸ç”¨äºæ„å»ºçº¯å‡€å­—å…¸ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-8">å››ã€å¦‚ä½•åˆ›å»ºå¯¹è±¡å¹¶æŒ‡å®šå…¶åŸå‹ï¼Ÿ</h3>
<h4 data-id="heading-9">æ–¹æ³•ä¸€ï¼šä½¿ç”¨ <code>Object.create(proto)</code></h4>
<p>ES5 å¼•å…¥çš„æ ‡å‡†æ–¹æ³•ï¼ŒåŠŸèƒ½æ˜ç¡®ã€è¯­ä¹‰æ¸…æ™°ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">var <span class="hljs-attr">animal</span> = { eats: <span class="hljs-literal">true</span> }<span class="hljs-comment">;</span>
var <span class="hljs-attr">rabbit</span> = Object.create(animal)<span class="hljs-comment">;</span>
console.log(rabbit.eats)<span class="hljs-comment">; // true â† ç»§æ‰¿è‡ª animal</span>
</code></pre>
<h4 data-id="heading-10">æ–¹æ³•äºŒï¼šæ¨¡æ‹Ÿ <code>Object.beget</code>ï¼ˆä¹¦ä¸­å®ç°ï¼‰</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-title class_">Object</span>.<span class="hljs-property">beget</span> !== <span class="hljs-string">'function'</span>) {
  <span class="hljs-title class_">Object</span>.<span class="hljs-property">beget</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">o</span>) {
    <span class="hljs-keyword">var</span> F = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {};
    F.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> = o;
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title function_">F</span>();
  };
}
</code></pre>
<h5 data-id="heading-11">æ‹†è§£åŸç†ï¼š</h5>
<ol>
<li>å®šä¹‰ä¸€ä¸ªç©ºæ„é€ å‡½æ•° <code>F</code>ï¼›</li>
<li>å°† <code>F.prototype</code> è®¾ç½®ä¸ºä¼ å…¥çš„å¯¹è±¡ <code>o</code>ï¼›</li>
<li>ä½¿ç”¨ <code>new F()</code> åˆ›å»ºæ–°å¯¹è±¡ï¼Œå…¶ <code>[[Prototype]]</code> è‡ªåŠ¨æŒ‡å‘ <code>o</code>ã€‚</li>
</ol>
<p>æ•ˆæœç­‰ä»·äº <code>Object.create(o)</code>ã€‚</p>
<hr/>
<h3 data-id="heading-12">äº”ã€è‡ªæœ‰å±æ€§ vs åŸå‹å±æ€§ï¼šè°ä¼˜å…ˆï¼Ÿ</h3>
<blockquote>
<p><strong>å½“å¯¹è±¡è‡ªèº«æœ‰æŸä¸ªå±æ€§æ—¶ï¼Œä¼šâ€œé®è”½â€ï¼ˆshadowï¼‰åŸå‹ä¸Šçš„åŒåå±æ€§ã€‚</strong></p>
</blockquote>
<h4 data-id="heading-13">ç¤ºä¾‹ï¼š</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">var</span> stooge = {
  <span class="hljs-string">'first-name'</span>: <span class="hljs-string">'Larry'</span>,
  <span class="hljs-attr">nickname</span>: <span class="hljs-string">'Curly'</span>
};

<span class="hljs-keyword">var</span> another_stooge = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">create</span>(stooge);

another_stooge[<span class="hljs-string">'first-name'</span>] = <span class="hljs-string">'Harry'</span>; <span class="hljs-comment">// ä¿®æ”¹è‡ªå·±çš„å±æ€§</span>
another_stooge.<span class="hljs-property">nickname</span> = <span class="hljs-string">'Moe'</span>;        <span class="hljs-comment">// ä¿®æ”¹è‡ªå·±çš„å±æ€§</span>

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(another_stooge[<span class="hljs-string">'first-name'</span>]); <span class="hljs-comment">// 'Harry' â† è‡ªå·±çš„</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(stooge[<span class="hljs-string">'first-name'</span>]);        <span class="hljs-comment">// 'Larry'   â† åŸå‹æœªå—å½±å“</span>
</code></pre>
<h4 data-id="heading-14">å¦‚ä½•åˆ¤æ–­å±æ€§æ¥æºï¼Ÿ</h4>
<pre><code class="hljs language-arduino" lang="arduino">console.<span class="hljs-built_in">log</span>(another_stooge.<span class="hljs-built_in">hasOwnProperty</span>(<span class="hljs-string">'first-name'</span>)); <span class="hljs-comment">// true â† è‡ªæœ‰</span>
console.<span class="hljs-built_in">log</span>(another_stooge.<span class="hljs-built_in">hasOwnProperty</span>(<span class="hljs-string">'eats'</span>));     <span class="hljs-comment">// false â† æ¥è‡ªåŸå‹</span>
</code></pre>
<blockquote>
<p>è§„åˆ™ï¼š<strong>å…ˆæŸ¥è‡ªå·±ï¼Œå†é—®åŸå‹</strong>ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-15">å…­ã€ä»€ä¹ˆæ˜¯â€œå§”æ‰˜â€ï¼ˆDelegationï¼‰ï¼Ÿ</h3>
<p>å½“ä½ è®¿é—®ä¸€ä¸ªå¯¹è±¡çš„å±æ€§æ—¶ï¼ŒJavaScript ä¼šæ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š</p>
<ol>
<li>æŸ¥çœ‹å¯¹è±¡è‡ªèº«æ˜¯å¦æœ‰è¯¥å±æ€§ï¼›</li>
<li>å¦‚æœæ²¡æœ‰ï¼Œå»å®ƒçš„åŸå‹ä¸­æŸ¥æ‰¾ï¼›</li>
<li>å¦‚æœåŸå‹ä¹Ÿæ²¡æœ‰ï¼Œç»§ç»­å¾€ä¸Šæ‰¾ï¼ˆåŸå‹çš„åŸå‹â€¦â€¦ï¼‰ï¼›</li>
<li>ç›´åˆ°æ‰¾åˆ°æˆ–åˆ°è¾¾ <code>null</code>ï¼›</li>
<li>è‹¥å§‹ç»ˆæœªæ‰¾åˆ°ï¼Œè¿”å› <code>undefined</code>ã€‚</li>
</ol>
<p>è¿™ä¸ªè¿‡ç¨‹ç§°ä¸º <strong>â€œå§”æ‰˜â€ï¼ˆDelegationï¼‰</strong> ã€‚</p>
<h4 data-id="heading-16">ç¤ºä¾‹ï¼š</h4>
<pre><code class="hljs language-ini" lang="ini">var <span class="hljs-attr">animal</span> = { eats: <span class="hljs-literal">true</span> }<span class="hljs-comment">;</span>
var <span class="hljs-attr">dog</span> = Object.create(animal)<span class="hljs-comment">;</span>
<span class="hljs-attr">dog.bark</span> = function() { console.log(<span class="hljs-string">"Woof!"</span>)<span class="hljs-comment">; };</span>

dog.bark()<span class="hljs-comment">;     // âœ… è‡ªå·±çš„æ–¹æ³•</span>
dog.eats<span class="hljs-comment">;       // âœ… åŸå‹æä¾›</span>
dog.toString()<span class="hljs-comment">; // âœ… Object.prototype æä¾›</span>
</code></pre>
<hr/>
<h3 data-id="heading-17">ä¸ƒã€åŸå‹æ˜¯åŠ¨æ€çš„ï¼</h3>
<p>å¦‚æœæˆ‘ä»¬åœ¨åŸå‹ä¸Šæ·»åŠ å±æ€§ï¼Œæ‰€æœ‰åŸºäºè¯¥åŸå‹åˆ›å»ºçš„å¯¹è±¡éƒ½èƒ½ç«‹åˆ»çœ‹åˆ°ï¼</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">animal.sleep</span> = function() { console.log(<span class="hljs-string">"Zzz..."</span>)<span class="hljs-comment">; };</span>
dog.sleep()<span class="hljs-comment">; // è¾“å‡º: Zzz... âœ… å³ä½¿ dog æ˜¯ä¹‹å‰åˆ›å»ºçš„</span>
</code></pre>
<blockquote>
<p>è¿™è¯´æ˜ï¼š<strong>åŸå‹å…³ç³»æ˜¯åŠ¨æ€çš„ï¼Œä¸æ˜¯é™æ€å¤åˆ¶</strong>ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-18">å…«ã€æ·±å…¥ç†è§£ï¼šp çš„åŸå‹æ˜¯ Person.prototypeï¼Œè€Œä¸æ˜¯ Personï¼</h3>
<p>è¿™æ˜¯åˆå­¦è€…æœ€å®¹æ˜“æ··æ·†çš„æ¦‚å¿µç‚¹ã€‚</p>
<h4 data-id="heading-19">æ˜ç¡®ä¸¤ä¸ªä¸åŒæ¦‚å¿µï¼š</h4>























<table><thead><tr><th>åç§°</th><th>æ˜¯ä»€ä¹ˆï¼Ÿ</th><th>ç±»å‹</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td><code>Person</code></td><td>æ„é€ å‡½æ•°ï¼ˆFunctionï¼‰</td><td>å‡½æ•°</td><td>ç”¨äºåˆ›å»ºå®ä¾‹ï¼š<code>new Person()</code></td></tr><tr><td><code>Person.prototype</code></td><td>åŸå‹å¯¹è±¡</td><td>æ™®é€šå¯¹è±¡</td><td>è¢«èµ‹ç»™æ‰€æœ‰å®ä¾‹çš„ <code>[[Prototype]]</code></td></tr></tbody></table>
<h4 data-id="heading-20">ç”Ÿæ´»åŒ–æ¯”å–»</h4>
<ul>
<li><code>Person</code> æ˜¯ä¸€ä½<strong>æœ¨åŒ å¸ˆå‚…</strong>ï¼ˆä¼šé€ äººï¼‰ï¼›</li>
<li><code>Person.prototype</code> æ˜¯ä»–å†™çš„ã€Š<strong>æŠ€èƒ½æ‰‹å†Œ</strong>ã€‹ï¼›</li>
<li><code>p = new Person()</code> æ˜¯ä»–æ‰“é€ çš„<strong>æœ¨å¶äºº</strong>ï¼›</li>
<li>æœ¨å¶äººä¸€å‡ºç”Ÿï¼Œå°±æ‹¿åˆ°äº†è¿™æœ¬ã€Šæ‰‹å†Œã€‹ï¼Œå³ <code>p.__proto__ === Person.prototype</code>ï¼›</li>
<li>ä½†å®ƒä¸ç›´æ¥è¿ç€å¸ˆå‚…æœ¬äººã€‚</li>
</ul>
<h4 data-id="heading-21">ä»£ç éªŒè¯ï¼š</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Person</span>(<span class="hljs-params">name</span>) { <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name; }
<span class="hljs-keyword">var</span> p = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-string">'Alice'</span>);

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(p.<span class="hljs-property">__proto__</span> === <span class="hljs-title class_">Person</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>); <span class="hljs-comment">// true âœ…</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(p.<span class="hljs-property">__proto__</span> === <span class="hljs-title class_">Person</span>);           <span class="hljs-comment">// false âŒ</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-keyword">typeof</span> <span class="hljs-title class_">Person</span>);                    <span class="hljs-comment">// "function"</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-keyword">typeof</span> <span class="hljs-title class_">Person</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>);          <span class="hljs-comment">// "object"</span>
</code></pre>
<h4 data-id="heading-22">è®¾è®¡åŸå› ï¼š</h4>
<ul>
<li><code>Person.prototype</code> æ˜¯ä¸“é—¨è®¾è®¡çš„â€œ<strong>å…±äº«å±æ€§å®¹å™¨</strong>â€ï¼›</li>
<li>å®ƒæœ¬èº«æ˜¯ä¸€ä¸ªæ™®é€šå¯¹è±¡ï¼Œå¤©ç„¶ç»§æ‰¿ <code>Object.prototype</code>ï¼Œä¿è¯ <code>.toString()</code> ç­‰æ–¹æ³•å¯ç”¨ï¼›</li>
<li>è‹¥ <code>p.__proto__</code> æŒ‡å‘ <code>Person</code>ï¼ˆå‡½æ•°ï¼‰ï¼Œç±»å‹æ··ä¹±ï¼ŒæŸ¥æ‰¾æœºåˆ¶å°†å´©æºƒã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-23">ä¹ã€ä»€ä¹ˆæ˜¯åŸå‹é“¾ï¼Ÿâ€”â€”å±æ€§æŸ¥æ‰¾çš„â€œå®¶è°±å¯¼èˆªâ€</h3>
<h4 data-id="heading-24">ğŸ”¹ å®šä¹‰</h4>
<p>åŸå‹é“¾ = ä»ä¸€ä¸ªå¯¹è±¡å‡ºå‘ï¼Œæ²¿ç€ <code>[[Prototype]]</code> é€çº§å‘ä¸Šé“¾æ¥ï¼Œç›´åˆ° <code>null</code> å½¢æˆçš„é“¾æ¡ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript">å¯¹è±¡ â†’ åŸå‹ â†’ åŸå‹çš„åŸå‹ â†’ ... â†’ <span class="hljs-title class_">Object</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> â†’ <span class="hljs-literal">null</span>
</code></pre>
<h4 data-id="heading-25">ç¤ºä¾‹å›¾è§£ï¼š</h4>
<pre><code class="hljs language-ini" lang="ini">var <span class="hljs-attr">animal</span> = { species: <span class="hljs-string">'mammal'</span> }<span class="hljs-comment">;</span>
var <span class="hljs-attr">dog</span> = Object.create(animal)<span class="hljs-comment">;</span>
<span class="hljs-attr">dog.breed</span> = <span class="hljs-string">'Golden Retriever'</span><span class="hljs-comment">;</span>
</code></pre>
<p>åŸå‹é“¾å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">dog
  â””â”€â”€ __proto__ â†’ animal
        â””â”€â”€ __proto__ â†’ <span class="hljs-title class_">Object</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>
              â””â”€â”€ __proto__ â†’ <span class="hljs-literal">null</span>
</code></pre>
<h4 data-id="heading-26">ğŸ” å±æ€§æŸ¥æ‰¾è·¯å¾„ï¼š</h4>

























<table><thead><tr><th>è¡¨è¾¾å¼</th><th>æŸ¥æ‰¾è¿‡ç¨‹</th><th>ç»“æœ</th></tr></thead><tbody><tr><td><code>dog.breed</code></td><td>è‡ªèº«æœ‰ â†’ è¿”å›</td><td><code>'Golden Retriever'</code></td></tr><tr><td><code>dog.species</code></td><td>è‡ªèº«æ—  â†’ æŸ¥ <code>animal</code> â†’ æœ‰</td><td><code>'mammal'</code></td></tr><tr><td><code>dog.toString()</code></td><td>è‡ªèº«æ—  â†’ <code>animal</code> æ—  â†’ <code>Object.prototype</code> æœ‰</td><td><code>[object Object]</code></td></tr></tbody></table>
<blockquote>
<p>ä¸€æ—¦æ‰¾åˆ°ï¼Œç«‹å³åœæ­¢ï¼›æ‰¾ä¸åˆ°è¿”å› <code>undefined</code>ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-27">åã€å¸¸è§è¯¯åŒºä¸é¿å‘æŒ‡å—</h3>

























<table><thead><tr><th>è¯¯åŒº</th><th>æ­£ç¡®ç†è§£</th></tr></thead><tbody><tr><td>âŒ <code>prototype</code> å°±æ˜¯å¯¹è±¡çš„åŸå‹</td><td>âœ… <code>prototype</code> æ˜¯<strong>å‡½æ•°å¯¹è±¡ç‹¬æœ‰çš„å±æ€§</strong>ï¼›å¯¹è±¡çš„åŸå‹æ˜¯ <code>__proto__</code> æˆ– <code>Object.getPrototypeOf(obj)</code></td></tr><tr><td>âŒ <code>__proto__</code> æ˜¯æ ‡å‡†æ–¹å¼</td><td>âœ… å®ƒæ˜¯éæ ‡å‡†ä½†å¹¿æ³›æ”¯æŒçš„å±æ€§ï¼›<strong>æ¨èä½¿ç”¨ <code>Object.getPrototypeOf(obj)</code></strong></td></tr><tr><td>âŒ å¯ä»¥éšæ„ä¿®æ”¹ <code>__proto__</code></td><td>âœ… å¯ä»¥ï¼ˆå¦‚ <code>obj.__proto__ = newProto</code>ï¼‰ï¼Œä½†æ€§èƒ½å·®ä¸”ä¸å¯æšä¸¾ï¼›<strong>åº”ä½¿ç”¨ <code>Object.setPrototypeOf(obj, newProto)</code></strong></td></tr><tr><td>âŒ åŸå‹é“¾åªç”¨äºå‡½æ•°</td><td>âœ… <strong>æ‰€æœ‰å¯¹è±¡éƒ½æœ‰åŸå‹é“¾</strong>ï¼š<code>{}</code>, <code>[]</code>, <code>/a/</code>, <code>new Date()</code> éƒ½æœ‰ï¼</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-28">åä¸€ã€ç°ä»£å†™æ³•å¯¹æ¯”ä¸æœ€ä½³å®è·µ</h3>






























<table><thead><tr><th>åœºæ™¯</th><th>æ¨èåšæ³•</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>è·å–åŸå‹</td><td><code>Object.getPrototypeOf(obj)</code></td><td>æ ‡å‡†ã€å®‰å…¨ã€å…¼å®¹å¥½</td></tr><tr><td>è®¾ç½®åŸå‹</td><td><code>Object.setPrototypeOf(obj, proto)</code></td><td>æ›¿ä»£éæ ‡ <code>__proto__</code> èµ‹å€¼</td></tr><tr><td>åˆ›å»ºç»§æ‰¿å¯¹è±¡</td><td><code>Object.create(proto)</code></td><td>æœ€ç›´è§‚ä½“ç°â€œä»¥æŸå¯¹è±¡ä¸ºåŸå‹â€</td></tr><tr><td>ES6 class</td><td><code>class Child extends Parent {}</code></td><td>è¯­æ³•ç³–ï¼Œåº•å±‚ä»æ˜¯åŸå‹é“¾</td></tr></tbody></table>
<blockquote>
<p><code>class</code> å¹¶éæ–°æœºåˆ¶ï¼Œåªæ˜¯åŸå‹ç»§æ‰¿çš„è¯­æ³•ç³–ï¼š</p>
</blockquote>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Animal</span> {}
<span class="hljs-comment">// ç­‰ä»·äºï¼š</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">Animal</span>(<span class="hljs-params"/>) {}
<span class="hljs-title class_">Animal</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">constructor</span> = <span class="hljs-title class_">Animal</span>;
</code></pre>
<hr/>
<h3 data-id="heading-29">åäºŒã€æ€»ç»“å£è¯€ä¸åŠ¨æ‰‹å®éªŒ</h3>
<h4 data-id="heading-30">æ€»ç»“å£è¯€ï¼š</h4>
<ol>
<li><strong>æ¯ä¸ªå¯¹è±¡éƒ½æœ‰åŸå‹</strong></li>
<li><strong>åŸå‹æ˜¯ç”¨æ¥ç»§æ‰¿çš„</strong></li>
<li><strong>æŸ¥æ‰¾å±æ€§å…ˆè‡ªå·±ï¼Œå†é—®åŸå‹</strong></li>
<li><strong>æ”¹åŸå‹ï¼Œæ‰€æœ‰åä»£éƒ½å—å½±å“</strong></li>
<li><strong>ä¸è¦æ··æ·†â€œå¯¹è±¡è‡ªèº«çš„å±æ€§â€å’Œâ€œåŸå‹ä¸Šçš„å±æ€§â€</strong></li>
<li><strong><code>p</code> çš„åŸå‹æ˜¯ <code>Person.prototype</code>ï¼Œä¸æ˜¯ <code>Person</code></strong></li>
<li><strong>é“¾çš„ç»ˆç‚¹æ°¸è¿œæ˜¯ <code>null</code></strong></li>
</ol>
<h4 data-id="heading-31">åŠ¨æ‰‹å®éªŒï¼ˆå»ºè®®æ‰“å¼€æµè§ˆå™¨æ§åˆ¶å°è¿è¡Œï¼‰ï¼š</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// 1. åˆ›å»ºæ„é€ å‡½æ•°å’Œå®ä¾‹</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">Car</span>(<span class="hljs-params">brand</span>) { <span class="hljs-variable language_">this</span>.<span class="hljs-property">brand</span> = brand; }
<span class="hljs-title class_">Car</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">start</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) { <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">brand</span> + <span class="hljs-string">" is starting..."</span>); };

<span class="hljs-keyword">var</span> myCar = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Car</span>(<span class="hljs-string">'Tesla'</span>);

<span class="hljs-comment">// 2. éªŒè¯åŸå‹é“¾</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">getPrototypeOf</span>(myCar) === <span class="hljs-title class_">Car</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>); <span class="hljs-comment">// true</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">getPrototypeOf</span>(<span class="hljs-title class_">Car</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>) === <span class="hljs-title class_">Object</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>); <span class="hljs-comment">// true</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">getPrototypeOf</span>(<span class="hljs-title class_">Object</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>)); <span class="hljs-comment">// null</span>

<span class="hljs-comment">// 3. æµ‹è¯•å§”æ‰˜</span>
myCar.<span class="hljs-title function_">start</span>(); <span class="hljs-comment">// 'Tesla is starting...' â† æ¥è‡ªåŸå‹</span>

<span class="hljs-comment">// 4. æµ‹è¯•é®è”½</span>
myCar.<span class="hljs-property">start</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) { <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Engine already running."</span>); };
myCar.<span class="hljs-title function_">start</span>(); <span class="hljs-comment">// 'Engine already running.' â† è‡ªæœ‰è¦†ç›–</span>
</code></pre>
<hr/>
<p>è®°ä½ï¼š</p>
<blockquote>
<p>â€œ<strong>æˆ‘æœ‰çš„ï¼Œæˆ‘å°±ç”¨æˆ‘çš„ï¼›æˆ‘æ²¡æœ‰çš„ï¼Œæˆ‘æ‰å»é—®é•¿è¾ˆã€‚</strong> â€<br/>
è¿™å°±æ˜¯åŸå‹å§”æ‰˜çš„æœ´ç´ æ™ºæ…§ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item>  </channel></rss>