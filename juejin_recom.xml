<?xml version="1.0" encoding="UTF-8"?><rss version="2.0">  <channel>      <title>æ˜é‡‘æ–‡ç« æ¨è</title>      <link>https://juejin.cn/recommended?sort=newest</link>      <description>ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…æˆé•¿çš„ç¤¾åŒº</description>      <generator>python juejin_recom.py @Pi20</generator>      <item>    <title><![CDATA[è¿™å¯èƒ½æ˜¯æœ€æ‡‚äººè¯çš„AIï¼šé˜¿é‡ŒMAI-UIè®©æ‰‹æœºè‡ªåŠ¨é©¾é©¶æˆçœŸ]]></title>    <link>https://juejin.cn/post/7590654280900263979</link>    <guid>https://juejin.cn/post/7590654280900263979</guid>    <pubDate>2026-01-03T13:02:56.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7590654280900263979" data-draft-id="7590421489998151699" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è¿™å¯èƒ½æ˜¯æœ€æ‡‚äººè¯çš„AIï¼šé˜¿é‡ŒMAI-UIè®©æ‰‹æœºè‡ªåŠ¨é©¾é©¶æˆçœŸ"/> <meta itemprop="keywords" content="AIGC"/> <meta itemprop="datePublished" content="2026-01-03T13:02:56.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¢¨é£å¦‚é›ª"/> <meta itemprop="url" content="https://juejin.cn/user/4064249017803927"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è¿™å¯èƒ½æ˜¯æœ€æ‡‚äººè¯çš„AIï¼šé˜¿é‡ŒMAI-UIè®©æ‰‹æœºè‡ªåŠ¨é©¾é©¶æˆçœŸ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4064249017803927/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¢¨é£å¦‚é›ª
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-03T13:02:56.000Z" title="Sat Jan 03 2026 13:02:56 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>è¯´å®è¯ï¼Œæˆ‘ä»¬å·²ç»å¬è…»äº†â€œAIæ™ºèƒ½ä½“â€è¿™ä¸ªè¯ã€‚ä½†åœ¨å¤§å¤šæ•°æ—¶å€™ï¼Œæ‰€è°“çš„æ™ºèƒ½ä½“è¿˜æ˜¯åƒä¸ªåªä¼šç­”é¢˜çš„ä¹¦å‘†å­â€”â€”ä½ è®©å®ƒå†™é¦–è¯—è¡Œï¼Œä½†è®©å®ƒå¸®ä½ ç”¨æ‰‹æœºè®¢å¼ ä»åŒ—äº¬åˆ°ä¸Šæµ·çš„é«˜é“ç¥¨ï¼Œå†é¡ºæ‰‹å‘ç»™ç§˜ä¹¦ï¼Ÿå®ƒå¤§æ¦‚ç‡ä¼šå¡åœ¨ç¬¬ä¸€æ­¥ï¼Œæˆ–è€…èƒ¡ä¹±ç‚¹å‡»ä¸€é€šã€‚</p>
<p>ä¸ºä»€ä¹ˆï¼Ÿå› ä¸ºå®ƒä»¬ä¸æ‡‚æ‰‹æœºå±å¹•ï¼Œä¹Ÿä¸æ‡‚äººã€‚</p>
<p>ä¸è¿‡ï¼Œé˜¿é‡Œå·´å·´é€šä¹‰å®éªŒå®¤æœ€è¿‘æ‰”å‡ºçš„è¿™å¼ ç‹ç‚¸â€”â€”<strong>MAI-UI</strong>ï¼Œå¯èƒ½çœŸçš„è¦æ”¹å˜è¿™ä¸ªå±€é¢äº†ã€‚è¿™ä¸ä»…ä»…æ˜¯ä¸€ä¸ªæ–°çš„å¤šæ¨¡æ€æ¨¡å‹ï¼Œæ›´åƒæ˜¯ä¸€ä¸ªç»™æ‰‹æœºè£…ä¸Šçš„â€œè‡ªåŠ¨é©¾é©¶ç³»ç»Ÿâ€ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.worldcodeing.com%2Fwp-content%2Fuploads%2F2026%2F01%2F6390276979052866838949967.png" target="_blank" title="https://blog.worldcodeing.com/wp-content/uploads/2026/01/6390276979052866838949967.png" ref="nofollow noopener noreferrer"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f53fef54055248eabef1f09b98a04cf7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aKo6aOO5aaC6Zuq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768050176&amp;x-signature=Lxwv%2Bfdp2N14XnPoG1zi9ENPaZw%3D" alt="6390276979052866838949967" loading="lazy"/></a></p>
<h2 data-id="heading-0">ç»ˆäºå­¦ä¼šäº†â€œå¼ å˜´é—®äººâ€</h2>
<p>ç°åœ¨çš„GUI Agentï¼ˆå›¾å½¢ç•Œé¢æ™ºèƒ½ä½“ï¼‰æœ‰ä¸ªé€šç—…ï¼šæ­»è„‘ç­‹ã€‚</p>
<p>ä¸¾ä¸ªä¾‹å­ï¼Œä½ è·Ÿå®ƒè¯´ï¼šâ€œæŠŠæˆ‘çš„ç®€å†å‘ç»™HRã€‚â€ ä¼ ç»Ÿçš„AIä¼šç›´æ¥æ„£ä½ï¼Œæˆ–è€…å¼€å§‹åœ¨ä»–çš„è®­ç»ƒæ•°æ®é‡ŒççŒœï¼Œç”šè‡³å¯èƒ½æŠŠä½ çš„è´­ç‰©æ¸…å•å‘å‡ºå»ã€‚</p>
<p>MAI-UIæœ€å¤§çš„ä¸åŒåœ¨äºï¼Œå®ƒæ‹¥æœ‰äº†<strong>åŸç”Ÿçš„äººæœºäº¤äº’èƒ½åŠ›</strong>ã€‚é¢å¯¹æ¨¡ç³ŠæŒ‡ä»¤ï¼Œå®ƒä¸ä¼šç›²ç›®æ“ä½œï¼Œè€Œæ˜¯ä¼šæš‚åœä¸‹æ¥é—®ä½ ï¼šâ€œè€æ¿ï¼Œä½ è¦å‘å“ªä¸€ä»½ç®€å†ï¼ŸHRçš„é‚®ç®±æ˜¯å“ªä¸ªï¼Ÿâ€</p>
<p>è¿™å¬èµ·æ¥å¾ˆç®€å•ï¼Œä½†åœ¨æŠ€æœ¯ä¸Šå´æ˜¯å·¨å¤§çš„é£è·ƒã€‚é˜¿é‡Œå›¢é˜Ÿåœ¨è®­ç»ƒä¸­å¼•å…¥äº†â€œæ‹’ç»é‡‡æ ·â€å’Œä¸“é—¨çš„äº¤äº’åŠ¨ä½œï¼Œæ²»å¥½äº†AIå–œæ¬¢â€œä¸æ‡‚è£…æ‡‚â€çš„æ¯›ç—…ã€‚è¿™è®©å®ƒä¸ä»…ä»…æ˜¯ä¸€ä¸ªæ‰§è¡Œè„šæœ¬ï¼Œæ›´åƒæ˜¯ä¸€ä¸ªæ‡‚å¾—å’Œä½ ç¡®è®¤éœ€æ±‚çš„çœŸå®åŠ©ç†ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.worldcodeing.com%2Fwp-content%2Fuploads%2F2026%2F01%2F6390276977443088257701246.png" target="_blank" title="https://blog.worldcodeing.com/wp-content/uploads/2026/01/6390276977443088257701246.png" ref="nofollow noopener noreferrer"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/464943b979be4fb79253c26df536882d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aKo6aOO5aaC6Zuq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768050176&amp;x-signature=%2FOyog8Kd%2BmTmOwg0uZXAwPlTrSY%3D" alt="6390276977443088257701246" loading="lazy"/></a></p>
<h2 data-id="heading-1">æŠ„è¿‘é“ï¼šä¸åªæ˜¯å‚»å‚»ç‚¹å±å¹•</h2>
<p>ä»¥å‰çš„å±å¹•æ™ºèƒ½ä½“å®Œå…¨ä¾èµ–è§†è§‰è¯†åˆ«â€”â€”æ‰¾å›¾æ ‡ã€æ¨¡æ‹Ÿç‚¹å‡»ã€æ»‘åŠ¨ã€‚è¿™åœ¨å¤æ‚APPé‡Œå¾ˆå®¹æ˜“å‡ºé”™ï¼Œæ•ˆç‡ä¹Ÿä½ã€‚</p>
<p>MAI-UIå¼•å…¥äº†ä¸€ä¸ªå¾ˆæå®¢çš„åŠŸèƒ½ï¼š<strong>MCPå·¥å…·è°ƒç”¨</strong>ã€‚</p>
<p>ç®€å•è¯´ï¼Œå®ƒæ˜¯ä¸ªâ€œåŒé¢æ‰‹â€ã€‚å¯¹äºç®€å•çš„ç•Œé¢ï¼Œå®ƒåƒäººä¸€æ ·å»ç‚¹å‡»ï¼›ä½†å¯¹äºå¤æ‚çš„ä»»åŠ¡ï¼Œæ¯”å¦‚â€œæŸ¥è¯¢GitHubæŸä»“åº“çš„æœ€è¿‘æäº¤â€æˆ–è€…â€œè®¡ç®—ä¸¤åœ°é©¾è½¦è·ç¦»â€ï¼Œå®ƒä¼šç›´æ¥è·³è¿‡ç¹ççš„UIæ“ä½œï¼Œåœ¨åå°è°ƒç”¨APIæ¥å£ï¼ˆMCPï¼‰ç›´æ¥æ‹¿æ•°æ®ã€‚</p>
<p>è¿™ä¸€æ‹›â€œæŠ„è¿‘é“â€ï¼ŒæŠŠåŸæœ¬éœ€è¦å‡ åæ¬¡ç‚¹å‡»ã€å®¹æ˜“å‡ºé”™çš„æµç¨‹ï¼Œå‹ç¼©æˆäº†å‡ æ¬¡ç²¾å‡†çš„ä»£ç è°ƒç”¨ã€‚åœ¨MobileWorldçš„æµ‹è¯•ä¸­ï¼Œè¿™è®©å®ƒçš„æˆåŠŸç‡ç›´æ¥ç”©å¼€äº†æœ€å¥½çš„ç«äº‰å¯¹æ‰‹30å¤šä¸ªç™¾åˆ†ç‚¹ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.worldcodeing.com%2Fwp-content%2Fuploads%2F2026%2F01%2Fasfsdgdfg-1024x448.png" target="_blank" title="https://blog.worldcodeing.com/wp-content/uploads/2026/01/asfsdgdfg-1024x448.png" ref="nofollow noopener noreferrer"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/26086cf21b9740c98f0fff5fe5a47d3c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aKo6aOO5aaC6Zuq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768050176&amp;x-signature=91zeQx0Y1IDMabXwbjI582TDJEU%3D" alt="asfsdgdfg" loading="lazy"/></a></p>
<h2 data-id="heading-2">å¤§å°è„‘é…åˆï¼Œéšç§ä¹Ÿæ²¡è½ä¸‹</h2>
<p>æŠŠæ‰€æœ‰æ“ä½œéƒ½äº¤ç»™äº‘ç«¯å¤§æ¨¡å‹ï¼Œä¸ä»…æ…¢ï¼Œè¿˜è®©äººæ‹…å¿ƒéšç§â€”â€”è°æ„¿æ„æŠŠé“¶è¡Œå¡å¯†ç ä¼ åˆ°äº‘ç«¯å»è¯†åˆ«ï¼Ÿ</p>
<p>MAI-UIæäº†ä¸€å¥—<strong>ç«¯äº‘ååŒ</strong>çš„æ¶æ„ã€‚</p>
<ul>
<li><strong>ç«¯ä¾§å°æ¨¡å‹ï¼ˆ2Bç‰ˆæœ¬ï¼‰ï¼š</strong> ä½åœ¨ä½ çš„æ‰‹æœºé‡Œï¼Œååº”å¿«ï¼Œè´Ÿè´£å¤„ç†æ—¥å¸¸çäº‹ï¼Œç›¯ç€å±å¹•çŠ¶æ€ï¼Œç»ä¸æ³„éœ²éšç§ã€‚</li>
<li><strong>äº‘ç«¯å¤§æ¨¡å‹ï¼ˆ235Bç‰ˆæœ¬ï¼‰ï¼š</strong> é‡åˆ°å¤æ‚çš„é€»è¾‘æ¨ç†éš¾é¢˜æ—¶ï¼Œç«¯ä¾§æä¸å®šäº†ï¼Œæ‰ä¼šè¯·äº‘ç«¯çš„å¤§è„‘ä»‹å…¥ã€‚</li>
</ul>
<p>è¿™ç§åŠ¨æ€è°ƒåº¦ï¼Œè®©ç«¯ä¾§ä»»åŠ¡æˆåŠŸç‡æå‡äº†33%ï¼ŒåŒæ—¶è¿˜å¯ä»¥å‡å°‘40%çš„äº‘ç«¯è°ƒç”¨ã€‚æ—¢çœäº†æµé‡å’Œç®—åŠ›ï¼Œåˆä¿ä½äº†ä½ çš„éšç§ã€‚</p>
<h2 data-id="heading-3">æˆ˜ç»©å¦‚ä½•ï¼Ÿæ•°æ®è¯´è¯</h2>
<p>åˆ«å…‰å¬æ¦‚å¿µï¼Œçœ‹çœ‹ç¡¬æŒ‡æ ‡ã€‚åœ¨ç›®å‰çš„GUIæ™ºèƒ½ä½“ç«æŠ€åœºä¸Šï¼ŒMAI-UIçš„è¡¨ç°å¯ä»¥ç”¨â€œéœ¸æ¦œâ€æ¥å½¢å®¹ã€‚</p>
<p>åœ¨è‘—åçš„<strong>AndroidWorld</strong>åŸºå‡†æµ‹è¯•ä¸­ï¼ŒMAI-UIæ‹¿ä¸‹äº†<strong>76.7%<strong>çš„æˆåŠŸç‡ã€‚ è¿™ä¸ªæˆç»©æ„å‘³ç€ä»€ä¹ˆï¼Ÿå®ƒç›´æ¥è¶…è¶Šäº†Googleçš„</strong>Gemini-2.5-Pro</strong>ï¼Œä¹Ÿå‡»è´¥äº†ä¹‹å‰çš„å¼€æºå¼ºè€…<strong>UI-Tars-2</strong>ã€‚å³ä¾¿æ˜¯åªæœ‰2Bå‚æ•°çš„ç«¯ä¾§å°æ¨¡å‹ï¼Œå…¶è¡¨ç°ä¹Ÿæ¯”åŒçº§åˆ«çš„Ferret-UI Liteé«˜å‡ºäº†æ•´æ•´21ä¸ªç™¾åˆ†ç‚¹ã€‚</p>
<p>è¿™èƒŒåï¼Œæ˜¯é˜¿é‡Œåœ¨ä¸€ä¸ªæ‹¥æœ‰500å¤šä¸ªå¹¶è¡Œç¯å¢ƒçš„â€œè™šæ‹Ÿæ‰‹æœºå†œåœºâ€é‡Œï¼Œé€šè¿‡å¤§è§„æ¨¡åœ¨çº¿å¼ºåŒ–å­¦ä¹ ï¼ˆOnline RLï¼‰åå¤æ“ç»ƒçš„ç»“æœã€‚å®ƒè§è¯†è¿‡å„ç§å¼¹çª—å¹¿å‘Šã€UIæ¼‚ç§»å’Œçªå‘çŠ¶å†µï¼Œæ‰€ä»¥æ¯”æ¸©å®¤é‡Œé•¿å¤§çš„æ¨¡å‹æ›´æŠ—é€ ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.worldcodeing.com%2Fwp-content%2Fuploads%2F2026%2F01%2Fasdasddfgsfg.jpg" target="_blank" title="https://blog.worldcodeing.com/wp-content/uploads/2026/01/asdasddfgsfg.jpg" ref="nofollow noopener noreferrer"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c4652c3f24374a2dade0c75619dab6ba~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aKo6aOO5aaC6Zuq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768050176&amp;x-signature=wcQj1xDs6Rw93IkeXrUd1lKAmxU%3D" alt="asdasddfgsfg" loading="lazy"/></a></p>
<h2 data-id="heading-4">å†™åœ¨æœ€å</h2>
<p>å¥½æ¶ˆæ¯æ˜¯ï¼Œé€šä¹‰å®éªŒå®¤å¹¶æ²¡æœ‰æŠŠè¿™ä¸ªå¥½ä¸œè¥¿è—ç€æ–ç€ã€‚ç›®å‰ï¼Œ<strong>MAI-UIçš„2Bå’Œ8Bæ¨¡å‹æƒé‡ã€ä»£ç å·²ç»åœ¨GitHubå¼€æº</strong>ï¼Œè¿åŒé‚£ä¸ªé«˜éš¾åº¦çš„è¯„æµ‹åŸºå‡†MobileWorldä¹Ÿä¸€å¹¶æ”¾äº†å‡ºæ¥ã€‚</p>
<p>å¯¹äºå¼€å‘è€…æ¥è¯´ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬ç¦»â€œåŠ¨åŠ¨å˜´ï¼Œæ‰‹æœºè‡ªåŠ¨å¸®æˆ‘æå®šä¸€åˆ‡â€çš„ç§‘å¹»åœºæ™¯ï¼Œåˆè¿‘äº†ä¸€å¤§æ­¥ã€‚æˆ–è®¸ä¸ä¹…çš„å°†æ¥ï¼Œä½ çš„æ‰‹æœºæ“ä½œç³»ç»Ÿé‡Œï¼Œå°±ä½ç€è¿™æ ·ä¸€ä¸ªä¸ä»…çœ‹å¾—æ‡‚å±å¹•ï¼Œè¿˜æ‡‚å¾—è¿™ä»€ä¹ˆæ—¶å€™è¯¥é—®ä½ ã€ä»€ä¹ˆæ—¶å€™è¯¥è‡ªå·±åŠ¨æ‰‹çš„â€œçœŸÂ·æ™ºèƒ½åŠ©ç†â€ã€‚</p>
<p><strong>å¦‚æœä½ ä¹Ÿå¯¹æœ€æ–°çš„AIä¿¡æ¯æ„Ÿå…´è¶£æˆ–è€…æœ‰ç–‘é—® éƒ½å¯ä»¥åŠ å…¥æˆ‘çš„å¤§å®¶åº­ ç¬¬ä¸€æ—¶é—´åˆ†äº«æœ€æ–°AIèµ„è®¯ã€å·¥å…·ã€æ•™ç¨‹ã€æ–‡æ¡£ æ¬¢è¿ä½ çš„åŠ å…¥ï¼ï¼ï¼ğŸ˜‰ğŸ˜‰ğŸ˜‰</strong></p>
<p>å…¬ä¼—å·ï¼šå¢¨é£å¦‚é›ªå°ç«™</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç”¨å¦ä¸€ç§æ–¹å¼è®©ã€Šç•™ç™½ã€‹ç»§ç»­å­˜åœ¨ä¸‹å»]]></title>    <link>https://juejin.cn/post/7590592594675449866</link>    <guid>https://juejin.cn/post/7590592594675449866</guid>    <pubDate>2026-01-03T13:16:00.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7590592594675449866" data-draft-id="7590608345923321882" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content=" ç”¨å¦ä¸€ç§æ–¹å¼è®©ã€Šç•™ç™½ã€‹ç»§ç»­å­˜åœ¨ä¸‹å»"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-03T13:16:00.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="codelang"/> <meta itemprop="url" content="https://juejin.cn/user/184373682638727"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
             ç”¨å¦ä¸€ç§æ–¹å¼è®©ã€Šç•™ç™½ã€‹ç»§ç»­å­˜åœ¨ä¸‹å»
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/184373682638727/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    codelang
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-03T13:16:00.000Z" title="Sat Jan 03 2026 13:16:00 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ€è¿‘ç¿»é˜…ç›¸å†Œï¼Œæ—§æ—§çš„ç…§ç‰‡æœ‰ä¸€å¼ ç‹¬ç‰¹çš„æ’ç‰ˆï¼Œæ€ç»ªä¸€ä¸‹å°±æŠŠæˆ‘æ‹‰å›äº†ä»å‰ï¼Œè¿™å¼ ç…§ç‰‡æ˜¯ã€Šç•™ç™½ã€‹App ç¼–è¾‘ç”Ÿæˆçš„ï¼Œä¸€æ¬¾éå¸¸å…·æœ‰è‰ºæœ¯æ„Ÿçš„ Appã€‚ã€Šç•™ç™½ã€‹æ˜¯æˆ‘å‰å¸åˆ›å§‹äººå¼€å‘çš„ Appï¼Œå½“æ—¶ç”¨æˆ·é‡è¿˜æŒºå¤šçš„ï¼Œé¦–é¡µè¿˜ä¼šæ¨èä¸€äº›æ‘„å½±å¸ˆæ‹æ‘„çš„ä½œå“ã€‚</p>
<p>æœ€è¿‘æƒ³ä» App Store é‡æ–°ä¸‹è½½æŠŠç©ä¸‹å‘ç°ï¼Œè¯¥åº”ç”¨ä¸‹æ¶å¾ˆå¤šå¹´äº†ï¼Œå¹¶ä¸”ä»ä¸€äº›ä¸‰æ–¹æ¸ é“æ‹¿åˆ°çš„ Apk éƒ½æ˜¯ 32 ä½çš„ï¼Œç°åœ¨ä¸»æµçš„æ‰‹æœºå·²ç»æ— æ³•å®‰è£…äº†ï¼Œé€šè¿‡çŸ¥ä¹å‘ç°ï¼Œå·²ç»å¾ˆä¹…æ²¡æœ‰ç»´æŠ¤äº†ï¼š</p>
<p align="center"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/74e38667791f4f02953aaabf7afa0121~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgY29kZWxhbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768050959&amp;x-signature=Z41Ogiw49Fu8sN4sqHgbU%2BqutQ8%3D" alt="" width="50%" loading="lazy"/></p>
<p>è¿™æ¬¾ç‹¬ç‰¹åˆå°ä¼—çš„ App æ— æ³•ä½¿ç”¨ç€å®æœ‰ç‚¹å¯æƒœï¼Œç•™ç™½çš„ preview é¡µï¼š</p>
<p align="center"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/eb00349a20b94d2594b4a2308891c7ce~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgY29kZWxhbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768050959&amp;x-signature=mck2h5tJ621XSN2xKz%2FWJUKX2%2B0%3D" alt="" width="30%" loading="lazy"/></p>
<p align="center"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4b5756d58718459789f3f06c268c0d45~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgY29kZWxhbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768050959&amp;x-signature=UDcVQcUKYZXHWj5iGGDUHPEbw0U%3D" alt="" width="30%" loading="lazy"/></p>
<p>æ‰€ä»¥ï¼Œæˆ‘èŒç”Ÿäº†ä¸€ä¸ªæƒ³æ³•ï¼ŒåŸºäºå¼ºå¤§çš„ AI èƒ½åŠ›ï¼Œè®©è¿™æ¬¾äº§å“é‡æ–°å†ç°ä¸€ä¸‹ï¼Œè¯´å¹²å°±å¹²ã€‚</p>
<p>å¼€å‘æ­¥éª¤ï¼š</p>
<ul>
<li>æŠ€æœ¯é€‰å‹ï¼šæœ€ä¸»è¦æ˜¯å®ç°å¿«ï¼Œèƒ½å¿«é€ŸéªŒè¯æ€è·¯ä¸æƒ³æ³•ï¼Œæœ€ç»ˆæ•²å®šä¸‹æ¥ç”¨ react</li>
<li>AI ç¼–ç ï¼šæœ€ç»ˆæ•²å®šä¸‹æ¥æ˜¯ claude clode(åæ–‡ç®€ç§° cc) + æ™ºè°± GLM-4.7</li>
<li>éƒ¨ç½²ä½“éªŒï¼šå°† react éƒ¨ç½²åˆ°çº¿ä¸Šä½“éªŒ</li>
<li>ç»ˆæä½“éªŒï¼šå°† react å®ç°çš„èƒ½åŠ›ï¼Œè®© AI ç¿»è¯‘æˆå¾®ä¿¡å°ç¨‹åºï¼Œéƒ¨ç½²åˆ°å¾®ä¿¡å°ç¨‹åºä¸­</li>
</ul>
<p>åœ¨æŠ€æœ¯é€‰å‹ä¸­ï¼Œæˆ‘æœ€å…ˆæ€è€ƒçš„æ˜¯å¦‚ä½•å¿«é€Ÿå®ç°è‡ªå·±æƒ³è¦çš„æ•ˆæœï¼Œç›¸æ¯”è¾ƒçŸ¥è¯†åº“ä¸ç¤¾åŒºçš„æˆç†Ÿåº¦ï¼Œå¯¹äº AI æ¥è¯´ï¼Œç”Ÿæˆå‰ç«¯çš„æ­£ç¡®ç‡ä¼šæ¯”ç§»åŠ¨ç«¯ä¼šé«˜ç‚¹ï¼Œå¹¶ä¸”èƒ½å¿«é€Ÿçš„è°ƒè¯•ã€‚æˆ‘å°†ç•™ç™½ preview å›¾ç‰‡ä¸¢ç»™äº† ccï¼Œè®© cc æŒ‰ç…§è¯¥å›¾ç”Ÿæˆå‰ç«¯åº”ç”¨ï¼Œå¹¶ä¸ºè¯¥å›¾å¢åŠ äº†æ»¤é•œã€å­—ä½“ã€ä¸»é¢˜ç­‰ä¸€ç±»è®¾ç½®ï¼Œå¦‚ä¸‹æ˜¯å®ç°æ•ˆæœï¼Œä½ ä¹Ÿå¯ä»¥è®¿é—® <a href="https://link.juejin.cn?target=https%3A%2F%2Fliubai-white.vercel.app%2F" target="_blank" title="https://liubai-white.vercel.app/" ref="nofollow noopener noreferrer">liubai-white.vercel.app/</a> è¿›è¡Œè¯•ç©ï¼š</p>
<p align="center"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/31964fc0a39548f5ac52c0ae5421a470~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgY29kZWxhbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768050959&amp;x-signature=ioLPMdUyc6mQLDFMPHf5UHbQj8Q%3D" alt="" width="30%" loading="lazy"/></p>
<p>cc + æ™ºè°± GLM-4.7 çš„ç”Ÿæˆæ•ˆæœä¸æ­£ç¡®ç‡è¿˜æ˜¯è›®æƒŠè‰³çš„ï¼Œå¹¶æ²¡æœ‰å› ä¸ºä¸€ä¸ªé”™è¯¯çš„è§£å†³è€Œæ— é™é™·å…¥å¦ä¸€ç§é”™è¯¯ã€‚</p>
<p>åœ¨ç»è¿‡å„ç§ç»†èŠ‚ä¸ä¼˜åŒ–ä¸­ï¼Œæˆ‘å‘ç°è¿™ç§æ–¹æ¡ˆå¯è¡Œï¼Œä½†æä¾›ç½‘é¡µè®©ç”¨æˆ·ä½¿ç”¨çš„è¯ï¼Œä¸€ä¸ªæ˜¯ä½“éªŒä¸ä½³ï¼Œå¦ä¸€ä¸ªæ˜¯æ²¡æœ‰äººä¼šè®°ä½ä¸€ä¸ªç½‘å€ï¼Œæ‰€ä»¥ï¼Œæˆ‘å†³å®šå°†è¿™ä¸ªæ–¹æ¡ˆçš„å®ç°è¿ç§»åˆ°å¾®ä¿¡å°ç¨‹åºã€‚</p>
<p>èµ·åˆï¼Œæˆ‘äº†è§£åˆ° Taro + react æ˜¯å¯ä»¥ç”Ÿæˆå¾®ä¿¡å°ç¨‹åºä»£ç çš„ï¼Œæˆ‘å°è¯•è®© cc å°† react è½¬æˆ Taro æ¨¡å¼ï¼Œç„¶åè®© Taro ç¼–è¯‘ react ä»£ç ç”Ÿæˆå¾®ä¿¡å°ç¨‹åºé¡¹ç›®ï¼Œä½†ç»è¿‡æˆ‘å„ç§è°ƒè¯•ï¼Œéƒ½æ— æ³•è¾¾æˆæ»¡æ„çš„æ•ˆæœï¼Œæœ€ä¸»è¦çš„åŸå› æ˜¯ react å¾ˆå¤šåº“çš„å®ç°ï¼Œåœ¨å¾®ä¿¡å°ç¨‹åºä¸Šæ²¡æœ‰ï¼ŒTaro æ— æ³•è¿›è¡Œè½¬è¯‘ï¼Œæ‰€ä»¥ï¼Œè¿™ç§æ–¹æ¡ˆæˆ‘ç«‹é©¬æ”¾å¼ƒäº†ã€‚</p>
<p>æœ€ç»ˆè¿˜æ˜¯ç›´æ¥è®© cc ç¿»è¯‘äº† react çš„é¡¹ç›®ç»“æ„ï¼Œå¹¶ç”Ÿæˆäº†é¡¹ç›®çš„åŠŸèƒ½æŒ‡å—ï¼Œæ¥ç€æˆ‘è®© cc é‡æ–°åˆ›å»ºäº†ä¸ª miniapp çš„ç›®å½•ï¼Œè®©ä»–è¯»å– react ä»£ç ä¸åŠŸèƒ½æŒ‡å—ï¼Œé‡æ–°ç”Ÿæˆå¾®ä¿¡å°ç¨‹åºé¡¹ç›®ã€‚</p>
<blockquote>
<p><em>æœªæ¥ï¼ŒAI ä¹Ÿå¯èƒ½æ˜¯è·¨ç«¯çš„å¦ä¸€ç§å®ç°</em></p>
</blockquote>
<p>è½¬ä¹‰çš„æ•ˆæœä¾ç„¶éå¸¸æƒŠè‰³ï¼Œç¬¬ä¸€æŠŠå°±æˆåŠŸäº†ï¼Œé¢„è§ˆæ•ˆæœä¸ react å·®ä¸å¤šï¼Œä½†ç»†èŠ‚è¿˜éœ€è¦å†åšä¸‹å¤„ç†ï¼Œæœ¬ä»¥ä¸ºæ²¡å•¥å¤§é—®é¢˜ï¼Œå½“æˆ‘å°†å›¾ç‰‡ä¸‹è½½ä¸‹æ¥æ—¶å‘ç°ï¼Œå„ç§æ’ç‰ˆé”™ä¹±ã€‚æ£€æŸ¥äº†ä¸‹é¡¹ç›®ä»£ç å®ç°ï¼Œåœ¨å¾®ä¿¡å°ç¨‹åºä¸­ï¼Œé¡µé¢å¸ƒå±€çš„å±•ç¤ºæ˜¯é€šè¿‡ wxml æ¸²æŸ“çš„ï¼Œä½†ç”Ÿæˆå›¾ç‰‡æ˜¯é€šè¿‡ canvas ç”»çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œcanvas è¦å¯¹ç€ wxml çš„ css è¿›è¡Œè½¬ä¹‰ï¼Œè€Œä¸” AI çš„è½¬ä¹‰èƒ½åŠ›ç‰¹åˆ«å¼±ï¼Œå³ä½¿æˆ‘ç”¨ cursor+opus å°è¯•è¿‡ï¼Œä¹Ÿæ˜¯ä¸€å¡Œç³Šæ¶‚ï¼Œå¦‚æœç•Œé¢æ¸²æŸ“æ’ç‰ˆå‘ç”Ÿäº†å˜åŠ¨ï¼ŒAI åˆä¼šå¿˜äº† canvas ä¹Ÿè¦å˜åŠ¨ï¼Œ åœ¨è¿™å—çš„è°ƒè¯•ä¸Šåƒäº†å¤ªå¤šåŠ›æ°”ã€‚é‚£æ€ä¹ˆåŠå‘¢ï¼Œåªèƒ½ç»™ cc æ·»åŠ æ›´å¤šçš„ rules è§„åˆ™ï¼Œå»å®šåˆ¶è§„åˆ™å¹¶ä¸”é™åˆ¶ä»–çš„éšæ„å‘æŒ¥ã€‚</p>
<p>ç»è¿‡å„ç§è°ƒè¯•å¯¹å’ï¼Œç¬¬ä¸€ç‰ˆçš„ ç•™ç™½ å¾®ä¿¡å°ç¨‹åºå®ç°å•¦ï¼Œæ•ˆæœå›¾å¦‚ä¸‹ï¼š</p>
<p align="center"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ed6829a1d65b4f3fbda8401d15784330~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgY29kZWxhbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768050959&amp;x-signature=yq4URonmqcw2Pq%2FfYAvMtyIc5fI%3D" alt="" width="30%" loading="lazy"/></p>
<p>å¦‚æœä½ æƒ³ä½“éªŒçš„è¯ï¼Œå¯ä»¥æ‰«å¦‚ä¸‹çš„å°ç¨‹åºç ï¼š</p>
<p align="center"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b519caccf89c4499bf0250eb2b20b89c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgY29kZWxhbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768050959&amp;x-signature=C6Yr8XXlm93u7GVXEvWr15zSUSI%3D" alt="" width="30%" loading="lazy"/></p>
<p>æœ‰ä»»ä½•ä½“éªŒçš„é—®é¢˜ï¼Œæˆ–æ˜¯å¯¹ AI Coding æœ‰æƒ³æ³•çš„ï¼Œéƒ½å¯ä»¥åœ¨å…¬ä¼—å·ä¸­æ‰¾åˆ°æˆ‘çš„è”ç³»æ–¹å¼ã€‚</p>
<p>å…ƒæ—¦è¿™ä¸‰å¤©æ™ºè°±çš„ tokens æ¶ˆè€—ï¼š</p>
<p align="center"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a30c892a91c24216be5ade417fd9d903~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgY29kZWxhbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768050959&amp;x-signature=NSQhzkjXeKSD6%2F3Ze6RP2GtdNfE%3D" alt="image.png" width="50%" loading="lazy"/></p>
<p>å¯¹äº AI Coding ï¼Œæˆ‘æœ‰ä¸€ç‚¹æƒ³è¯´ï¼š</p>
<blockquote>
<p>éšç€å¤§æ¨¡å‹è¶Šæ¥è¶Šå¼ºï¼Œæˆ‘è§‰å¾—ç”¨è°å®¶çš„æ¨¡å‹ä¼šå˜å¾—æ²¡é‚£ä¹ˆé‡è¦ï¼Œæ¯”å¦‚æˆ‘ç”¨çš„æ™ºè°±GLM å°±èƒ½å¸®æˆ‘å®ç°éå¸¸æƒŠè‰³çš„èƒ½åŠ›ï¼Œæˆ‘è§‰å¾—å½“å‰æœ€é‡è¦çš„è¿˜æ˜¯å·¥å…·ï¼Œæˆ‘éå¸¸æ¨è claude codeï¼ŒAnthropic è¿™å®¶å…¬å¸ä¸€ç›´èµ°åœ¨ AI Coding çš„æœ€å‰æ²¿ï¼Œæ— è®ºæ˜¯ mcpã€cliï¼Œè¿˜æ˜¯æœ€è¿‘éå¸¸ç«çƒ­çš„ skills ã€subAgentï¼Œä»–æ€»èƒ½ä»å·¥ç¨‹åŒ–æ€ç»´å»è§£å†³ä½ çš„é—®é¢˜ï¼Œè®© AI ä»£ç ç”Ÿæˆçš„æ›´å¯é ã€‚æ¯”å¦‚ prompt çš„æ‹†è§£ä¸æ³¨å…¥ã€token å¦‚ä½•å‡å°‘æ¶ˆè€—ã€ä¸Šä¸‹æ–‡æ±¡æŸ“å¦‚ä½•è§„é¿ç­‰ç­‰ã€‚</p>
<p>2026 å¹´ï¼ŒAI Coding ä¸€å®šæ˜¯å¾€æ›´å¯é çš„å¤§æ–¹å‘èµ°ï¼Œä½†è¦æƒ³æ›´å¯é ï¼Œäº¤ç»™å¼€å‘è€…è‚¯å®šæ˜¯ä¸è¶³å¤Ÿçš„ï¼Œä¸€å®šæ˜¯æœ‰å¾ˆå¤šå·¥å…·å»è¾…åŠ©å¼€å‘è€…æ›´å¯é æ‰è¡Œã€‚</p>
<p>æ­£å¦‚ Anthropic é¦–å¸­äº§å“å®˜ Mike Krieger æ‰€è¯´çš„ï¼š</p>
<p><strong/> èƒ½å¯é åœ°æ¥è¿‡ä½ æ‰‹é‡Œçš„æ´»å„¿ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[2025æˆ‘å¸¸ç”¨çš„ AI äº§å“]]></title>    <link>https://juejin.cn/post/7590309337861373993</link>    <guid>https://juejin.cn/post/7590309337861373993</guid>    <pubDate>2026-01-03T13:40:34.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7590309337861373993" data-draft-id="7590283328176504875" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="2025æˆ‘å¸¸ç”¨çš„ AI äº§å“"/> <meta itemprop="keywords" content="ç¨‹åºå‘˜,å…¨æ ˆ,æ‹›è˜"/> <meta itemprop="datePublished" content="2026-01-03T13:40:34.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="KaneLogger"/> <meta itemprop="url" content="https://juejin.cn/user/3650034333917031"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            2025æˆ‘å¸¸ç”¨çš„ AI äº§å“
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3650034333917031/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    KaneLogger
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-03T13:40:34.000Z" title="Sat Jan 03 2026 13:40:34 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>å®—æ—¨ï¼šç”¨"å¥½ AI"ï¼Œç”¨å¥½ AIã€‚</p>
</blockquote>
<p>ä¹‹å‰ä¸“é—¨å†™è¿‡ä¸€ç¯‡æ–‡ç« ï¼Œé‡Œé¢æœ‰å¾ˆå¤šäº§å“ï¼Œä½†æ˜¯å“ç±»å¤ªå¤šäº†ï¼Œå…¶å®å¹³æ—¶ç”¨çš„ä¹Ÿå°±é‚£ä¹ˆå‡ ä¸ªï¼Œå†™è¿™ç¯‡æ–‡ç« çš„ç›®çš„ä¹Ÿæ˜¯æ€»ç»“è‡ªå·±å¹³æ—¶ä½¿ç”¨çš„äº§å“ï¼Œä»¥åŠè‡ªå·±æ˜¯å¦‚ä½•ä½¿ç”¨çš„ã€‚</p>
<p>åœ¨ç”¨å¥½ AI ä¹‹å‰ï¼Œåº”è¯¥å¤šç”¨ç”¨ä¸šç•Œæœ€å¥½çš„ AI äº§å“ã€‚</p>
<p>å¦‚ä½•çŸ¥é“ç°åœ¨å“ªç±»æ¨¡å‹å¥½å‘¢ï¼Ÿé™¤äº†ç”¨æˆ·è¯„ä»·ï¼Œè¿˜å¯ä»¥åœ¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Flmarena.ai%2Fzh%2Fleaderboard" target="_blank" title="https://lmarena.ai/zh/leaderboard" ref="nofollow noopener noreferrer">lmarena</a> å¤§æ¨¡å‹ç«æŠ€åœºä¸Šæ‰¾æ‰¾ï¼Œå½“ç„¶æœ€é‡è¦çš„è¿˜æ˜¯å¤šç”¨å¤šä½“éªŒã€‚</p>
<h3 data-id="heading-0">å¯¹è¯</h3>









































<table><thead><tr><th>å¹³å°</th><th>å“åº”é€Ÿåº¦</th><th>åº”ç”¨åœºæ™¯</th><th>è´¹ç”¨</th></tr></thead><tbody><tr><td><a href="https://link.juejin.cn?target=https%3A%2F%2Fgemini.google.com%2F" target="_blank" title="https://gemini.google.com/" ref="nofollow noopener noreferrer">Gemini</a></td><td>â­â­â­â­â­</td><td>é•¿æ–‡æœ¬ã€å›¾ç‰‡ï¼ˆnano bananaï¼‰</td><td>Pro ç‰ˆï¼š140 å…ƒ/æœˆ</td></tr><tr><td><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.doubao.com" target="_blank" title="https://www.doubao.com" ref="nofollow noopener noreferrer">è±†åŒ…</a></td><td>â­â­â­â­â­</td><td>æ—¥å¸¸å¯¹è¯ã€å›¾ç‰‡ (<a href="https://link.juejin.cn?target=https%3A%2F%2Fjimeng.jianying.com%2Fai-tool%2Fhome" target="_blank" title="https://jimeng.jianying.com/ai-tool/home" ref="nofollow noopener noreferrer">å³æ¢¦</a>)</td><td>å…è´¹</td></tr><tr><td><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.kimi.com" target="_blank" title="https://www.kimi.com" ref="nofollow noopener noreferrer">Kimi</a></td><td>â­â­â­â­</td><td>é•¿æ–‡æœ¬</td><td>Andante 49 å…ƒ/æœˆ</td></tr><tr><td><a href="https://link.juejin.cn?target=https%3A%2F%2Fchat.qwen.ai%2F" target="_blank" title="https://chat.qwen.ai/" ref="nofollow noopener noreferrer">é€šä¹‰åƒé—®</a></td><td>â­â­â­â­â­</td><td>æ—¥å¸¸å¯¹è¯ã€å›¾ç‰‡</td><td>å…è´¹</td></tr><tr><td><a href="https://link.juejin.cn?target=https%3A%2F%2Fx.com%2Fi%2Fgrok" target="_blank" title="https://x.com/i/grok" ref="nofollow noopener noreferrer">Grok</a></td><td>â­â­â­â­</td><td>ç‰¹æ”»ï¼šæ¨ç‰¹çˆ¬è™«</td><td>å…è´¹å°±å¤Ÿç”¨äº†</td></tr></tbody></table>
<h3 data-id="heading-1">å›¾åƒ</h3>
<p>è¿™ä¸ªèµ›é“æ¯”è¾ƒçª„ï¼Œz-image\mj\flux èƒ½ç”¨ï¼Œè‰ºæœ¯æ„Ÿå¼ºï¼Œå…‰å½±ç»†èŠ‚å¤„ç†ä¹Ÿå¾ˆæˆç†Ÿï¼Œä½†æ˜¯ä¸Šæ‰‹æˆæœ¬ä¹Ÿæ¯”è¾ƒé«˜ï¼Œé€‚åˆä¸“ä¸šäººå£«åšå•†ä¸šæ’å›¾ã€‚æˆ‘å¸¸ç”¨çš„åªæœ‰ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgemini.google.com%2Fapp" target="_blank" title="https://gemini.google.com/app" ref="nofollow noopener noreferrer">nano banana</a> å¯ä»¥åœ¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Faistudio.google.com%2F" target="_blank" title="https://aistudio.google.com/" ref="nofollow noopener noreferrer">ai studio</a> ä¸­ä½¿ç”¨ï¼Œç¼ºç‚¹æ˜¯æ²¡æœ‰ç³»ç»Ÿç»™çš„æç¤ºè¯ï¼Œä¹Ÿå¯ä»¥åœ¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fyoumind.com%2Fboards" target="_blank" title="https://youmind.com/boards" ref="nofollow noopener noreferrer">youmind</a> è¿™äº›äº§å“ä¸­ä½¿ç”¨ã€‚å®˜ç½‘æ¯å¤©ä¸‰å¼ ï¼ŒAPI è°ƒç”¨ï¼Œå¹³å‡ä¸€å¼  2k å›¾ 1 å…ƒã€‚</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fjimeng.jianying.com%2F" target="_blank" title="https://jimeng.jianying.com/" ref="nofollow noopener noreferrer">å³æ¢¦</a> åŸºç¡€ä¼šå‘˜ 69 å…ƒ/æœˆï¼Œæ¯æ—¥ 60 å…è´¹ç§¯åˆ†ï¼Œå¯ç”Ÿæˆ 20-50 å¼ å›¾ã€‚</li>
</ul>
<h3 data-id="heading-2">ç¼–ç¨‹</h3>
<ul>
<li>ã€terminalã€‘Claude code + å›½äº§æ¨¡å‹ minmax/kimi k2/GLM-4.6 Pro</li>
<li>ã€IDEã€‘trae é¦–æœˆ 21rmb/æœˆ åç»­ 70rmb/æœˆ</li>
<li>ã€IDEã€‘cursor ä»˜è´¹ pro 140rmb/æœˆ pro+ 420rmb/æœˆ ultra400rmb/æœˆ</li>
<li>ã€terminalã€‘gemini cli</li>
<li>ã€IDEã€‘å…¶ä»–å¶å°”å¯è–…ç¾Šæ¯› qcoderã€CodeBuddyã€antigravityã€kiroã€vs code</li>
</ul>
<h3 data-id="heading-3">å…¨å®¶æ¡¶</h3>
<ul>
<li>Gemini å…¨å®¶æ¡¶
<ul>
<li>Gemini + nano banana + notebookLM åŠå…¬å¥—ä»¶</li>
<li>Veo æ–‡ç”Ÿè§†é¢‘</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fstitch.withgoogle.com%2F" target="_blank" title="https://stitch.withgoogle.com/" ref="nofollow noopener noreferrer">stitch</a> Google æ¨å‡ºçš„ AI è¾…åŠ© UI åŸå‹è®¾è®¡å·¥å…·</li>
<li>antigravity ç¼–è¾‘å™¨</li>
<li>gemini cli ç»ˆç«¯å·¥å…·</li>
</ul>
</li>
<li>è±†åŒ… å…¨å®¶æ¡¶
<ul>
<li>è±†åŒ…</li>
<li>seedream æ–‡ç”Ÿå›¾</li>
<li>seedance æ–‡ç”Ÿè§†é¢‘</li>
<li>trae ç¼–è¾‘å™¨</li>
</ul>
</li>
<li>gpt å…¨å®¶æ¡¶
<ul>
<li>chatGPT å¯¹è¯ã€å›¾ç‰‡</li>
<li>sora è§†é¢‘</li>
<li>codex</li>
</ul>
</li>
</ul>
<h3 data-id="heading-4">æˆ‘çš„è®¢é˜…</h3>
<ul>
<li>å¯¹è¯(ç”»å›¾)éƒ¨åˆ†ï¼šGemini + è±†åŒ… + kimi + å¶å°” qwen + çˆ¬è™« Grok</li>
<li>ç¼–ç¨‹ï¼šclaude code(minmax) + cursor</li>
<li>çŸ¥è¯†åº“ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fnotebooklm.google.com%2F" target="_blank" title="https://notebooklm.google.com/" ref="nofollow noopener noreferrer">notebookLM(ppt æ€ç»´å¯¼å›¾)</a> + <a href="https://link.juejin.cn?target=https%3A%2F%2Fima.qq.com%2F" target="_blank" title="https://ima.qq.com/" ref="nofollow noopener noreferrer">imaï¼ˆçŸ¥è¯†åº“ç®¡ç†ï¼‰</a> + <a href="https://link.juejin.cn?target=https%3A%2F%2Fyoumind.com%2Fzh-CN%2F" target="_blank" title="https://youmind.com/zh-CN/" ref="nofollow noopener noreferrer">youmindï¼ˆæ•´ç†ç¢ç‰‡æƒ³æ³•ä¿¡æ¯ï¼‰</a></li>
<li>å·¥ä½œæµï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.coze.cn%2F" target="_blank" title="https://www.coze.cn/" ref="nofollow noopener noreferrer">coze(é…åˆé£ä¹¦)</a> + <a href="https://link.juejin.cn?target=https%3A%2F%2Fn8n.io%2F" target="_blank" title="https://n8n.io/" ref="nofollow noopener noreferrer">n8nï¼ˆæœ¬åœ°å·¥ä½œæµï¼‰</a></li>
</ul>
<h4 data-id="heading-5">æ™ºèƒ½ä½“</h4>
<p>è¿˜æ²¡èŠ±è¿‡é’±ï¼ŒåŸºæœ¬ä¸Šç”¨åœ¨ç ”æŠ¥ä¸Šã€‚</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fspace.coze.cn%2Fspace-intro" target="_blank" title="https://space.coze.cn/space-intro" ref="nofollow noopener noreferrer">æ‰£å­ç©ºé—´</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.manus.ai%2F" target="_blank" title="https://www.manus.ai/" ref="nofollow noopener noreferrer">manus</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fautoglm.zhipuai.cn%2F" target="_blank" title="https://autoglm.zhipuai.cn/" ref="nofollow noopener noreferrer">AutoGLM</a></li>
<li>ã€DeepResearchã€‘<a href="https://link.juejin.cn?target=https%3A%2F%2Fithy.com%2F" target="_blank" title="https://ithy.com/" ref="nofollow noopener noreferrer">ithy</a></li>
<li>ã€DeepResearchã€‘<a href="https://link.juejin.cn?target=https%3A%2F%2Fmetaso.cn%2F" target="_blank" title="https://metaso.cn/" ref="nofollow noopener noreferrer">ç§˜å¡”</a></li>
<li>ã€DeepResearchã€‘<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.perplexity.ai%2F" target="_blank" title="https://www.perplexity.ai/" ref="nofollow noopener noreferrer">Perplexityï¼ˆå›½å¤–ç½‘ç«™ï¼‰</a></li>
<li>ã€DeepResearchã€‘<a href="https://link.juejin.cn?target=https%3A%2F%2Fmetaso.cn%2F" target="_blank" title="https://metaso.cn/" ref="nofollow noopener noreferrer">ç§˜å¡” AI æœç´¢</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åŸºäº YOLOv8 çš„å…±äº«å•è½¦ä¹±åœæ”¾æ™ºèƒ½è¯†åˆ«ç³»ç»Ÿâ€” ä»æ•°æ®é›†æ„å»ºåˆ°å¯è§†åŒ–éƒ¨ç½²çš„å®Œæ•´é¡¹ç›®]]></title>    <link>https://juejin.cn/post/7590330924001148991</link>    <guid>https://juejin.cn/post/7590330924001148991</guid>    <pubDate>2026-01-03T12:05:46.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7590330924001148991" data-draft-id="7590283328176422955" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åŸºäº YOLOv8 çš„å…±äº«å•è½¦ä¹±åœæ”¾æ™ºèƒ½è¯†åˆ«ç³»ç»Ÿâ€” ä»æ•°æ®é›†æ„å»ºåˆ°å¯è§†åŒ–éƒ¨ç½²çš„å®Œæ•´é¡¹ç›®"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-03T12:05:46.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æˆ‘æ˜¯æ°å°¼"/> <meta itemprop="url" content="https://juejin.cn/user/4200579899599495"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åŸºäº YOLOv8 çš„å…±äº«å•è½¦ä¹±åœæ”¾æ™ºèƒ½è¯†åˆ«ç³»ç»Ÿâ€” ä»æ•°æ®é›†æ„å»ºåˆ°å¯è§†åŒ–éƒ¨ç½²çš„å®Œæ•´é¡¹ç›®
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4200579899599495/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æˆ‘æ˜¯æ°å°¼
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-03T12:05:46.000Z" title="Sat Jan 03 2026 12:05:46 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">åŸºäº YOLOv8 çš„å…±äº«å•è½¦ä¹±åœæ”¾æ™ºèƒ½è¯†åˆ«ç³»ç»Ÿâ€” ä»æ•°æ®é›†æ„å»ºåˆ°å¯è§†åŒ–éƒ¨ç½²çš„å®Œæ•´é¡¹ç›®</h2>
<h3 data-id="heading-1">ä¸€ã€é¡¹ç›®èƒŒæ™¯ï¼šä¸ºä»€ä¹ˆè¦åšâ€œä¹±åœæ”¾è¯†åˆ«â€ï¼Ÿ</h3>
<p>éšç€å…±äº«å•è½¦åœ¨åŸå¸‚ä¸­çš„é«˜å¯†åº¦æŠ•æ”¾ï¼Œâ€œæœ€åä¸€å…¬é‡Œâ€å‡ºè¡Œé—®é¢˜å¾—åˆ°äº†æå¤§ç¼“è§£ï¼Œä½†éšä¹‹è€Œæ¥çš„<strong>éšæ„åœæ”¾ã€å é“å †ç§¯ã€ç›²é“é˜»å¡</strong>ç­‰é—®é¢˜ï¼Œä¹Ÿæˆä¸ºåŸå¸‚æ²»ç†ä¸­çš„ä¸€å¤§ç—›ç‚¹ã€‚</p>
<p>åœ¨å®é™…åŸå¸‚ç®¡ç†ä¸­ï¼Œä¼ ç»Ÿå¤„ç†æ–¹å¼ä¸»è¦ä¾èµ–ä»¥ä¸‹æ‰‹æ®µï¼š</p>
<ul>
<li>äººå·¥å·¡æŸ¥ï¼ˆæˆæœ¬é«˜ã€æ•ˆç‡ä½ï¼‰</li>
<li>ç¾¤ä¼—ä¸¾æŠ¥ï¼ˆæ»åã€ä¸å¯æ§ï¼‰</li>
<li>ç®€å•è§„åˆ™æ£€æµ‹ï¼ˆè¯¯æŠ¥ç‡é«˜ï¼‰</li>
</ul>
<p>è¿™äº›æ–¹å¼å¾ˆéš¾åº”å¯¹<strong>å¤§è§„æ¨¡ã€å…¨å¤©å€™ã€åŠ¨æ€å˜åŒ–</strong>çš„è¡—æ™¯ç¯å¢ƒã€‚å› æ­¤ï¼Œ<strong>åŸºäºè®¡ç®—æœºè§†è§‰çš„è‡ªåŠ¨åŒ–è¯†åˆ«æ–¹æ¡ˆ</strong>æˆä¸ºä¸€ç§å¿…ç„¶é€‰æ‹©ã€‚</p>
<p>æœ¬é¡¹ç›®çš„ç›®æ ‡æ˜¯ï¼š</p>
<blockquote>
<p>ğŸ¯ <strong>æ„å»ºä¸€å¥—å®Œæ•´ã€å¯è½åœ°çš„å…±äº«å•è½¦/è‡ªè¡Œè½¦ä¹±åœæ”¾æ™ºèƒ½è¯†åˆ«ç³»ç»Ÿ</strong>
è¦†ç›–ï¼š<strong>æ•°æ® â†’ è®­ç»ƒ â†’ æ¨ç† â†’ UI â†’ éƒ¨ç½²</strong>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f3a011a718814ebebcfa89fa2a0d3276~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv5p2w5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768046746&amp;x-signature=EMuSVG2QJHBt%2BMjPU6xwCqk0938%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
</blockquote>
<h4 data-id="heading-2">æºç ä¸‹è½½ä¸æ•ˆæœæ¼”ç¤º</h4>
<p>å“”å“©å“”å“©è§†é¢‘ä¸‹æ–¹è§‚çœ‹ï¼š</p>
<blockquote>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV1HxKbzSEco%2F" target="_blank" title="https://www.bilibili.com/video/BV1HxKbzSEco/" ref="nofollow noopener noreferrer">www.bilibili.com/video/BV1Hxâ€¦</a></p>
</blockquote>
<p>åŒ…å«ï¼š</p>
<p>ğŸ“¦å®Œæ•´é¡¹ç›®æºç </p>
<p>ğŸ“¦ é¢„è®­ç»ƒæ¨¡å‹æƒé‡</p>
<p>ğŸ—‚ï¸ æ•°æ®é›†åœ°å€ï¼ˆå«æ ‡æ³¨è„šæœ¬</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5ae2a78a2ee443b49eead838e20fbf1d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv5p2w5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768046746&amp;x-signature=YnLoovTWrUtxjAbHV5GXDljxZWU%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-3">äºŒã€ç³»ç»Ÿæ€»ä½“è®¾è®¡æ€è·¯</h3>
<p>ä»å·¥ç¨‹è§’åº¦å‡ºå‘ï¼Œæœ¬é¡¹ç›®å¹¶éâ€œå•ä¸€æ¨¡å‹æµ‹è¯•â€ï¼Œè€Œæ˜¯å®Œæ•´çš„è½¯ä»¶ç³»ç»Ÿï¼Œæ•´ä½“æ¶æ„å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">æ•°æ®é‡‡é›† â†’ æ•°æ®æ ‡æ³¨ â†’ YOLOv8æ¨¡å‹è®­ç»ƒ
<span class="hljs-code">        â†“
   æ¨¡å‹è¯„ä¼°ä¸è°ƒä¼˜
        â†“
PyQt5 å¯è§†åŒ–æ£€æµ‹ç³»ç»Ÿ
        â†“
å›¾ç‰‡ / è§†é¢‘ / æ‘„åƒå¤´ / æ‰¹é‡æ£€æµ‹
</span></code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/02eadcd68dd64b5ab658d627540a6c80~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv5p2w5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768046746&amp;x-signature=bCht76tGG1NlMQ96bRbU4kutmjU%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/124b8b176c804f628f43cb20330e1206~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv5p2w5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768046746&amp;x-signature=YWdzfvfft27MtoRLQnhi7hc2DLk%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h4 data-id="heading-4">ç³»ç»Ÿæ ¸å¿ƒç»„æˆæ¨¡å—</h4>

































<table><thead><tr><th>æ¨¡å—</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>ç›®æ ‡æ£€æµ‹æ¨¡å‹</td><td>YOLOv8 Detection</td></tr><tr><td>æ·±åº¦å­¦ä¹ æ¡†æ¶</td><td>PyTorch</td></tr><tr><td>å›¾å½¢ç•Œé¢</td><td>PyQt5</td></tr><tr><td>æ¨ç†æ–¹å¼</td><td>å›¾ç‰‡ / æ–‡ä»¶å¤¹ / è§†é¢‘ / æ‘„åƒå¤´</td></tr><tr><td>è¾“å‡ºå½¢å¼</td><td>æ ‡æ³¨å›¾åƒ / è§†é¢‘æ–‡ä»¶</td></tr><tr><td>ä½¿ç”¨æ–¹å¼</td><td>å¼€ç®±å³ç”¨ / å¯äºŒæ¬¡å¼€å‘</td></tr></tbody></table>
<hr/>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/90dbc7fbcbf448e29f1210bcd805b078~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv5p2w5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768046746&amp;x-signature=8BfBVWK6S4uGZRVSOaHbnEgsl2o%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-5">ä¸‰ã€YOLOv8 æ¨¡å‹é€‰å‹ä¸åŸç†åˆ†æ</h3>
<h4 data-id="heading-6">3.1 ä¸ºä»€ä¹ˆé€‰æ‹© YOLOv8ï¼Ÿ</h4>
<p>åœ¨ä¼—å¤šç›®æ ‡æ£€æµ‹æ¨¡å‹ä¸­ï¼ˆFaster R-CNNã€SSDã€YOLOv5/7 ç­‰ï¼‰ï¼ŒYOLOv8 å…·å¤‡ä»¥ä¸‹æ˜æ˜¾ä¼˜åŠ¿ï¼š</p>
<ul>
<li><strong>Anchor-Free æ¶æ„</strong>ï¼šå‡å°‘äººä¸ºè¶…å‚ä¾èµ–</li>
<li><strong>æ›´é«˜çš„æ¨ç†é€Ÿåº¦</strong>ï¼šé€‚åˆå®æ—¶æ‘„åƒå¤´åœºæ™¯</li>
<li><strong>Ultralytics å®˜æ–¹ç”Ÿæ€å®Œå–„</strong>ï¼šè®­ç»ƒã€æ¨ç†ã€å¯¼å‡ºä¸€æ­¥åˆ°ä½</li>
<li><strong>å¯¹å°ç›®æ ‡æ›´å‹å¥½</strong>ï¼šé€‚åˆè¡—æ™¯ä¸­å¯†é›†å•è½¦æ£€æµ‹</li>
</ul>
<h4 data-id="heading-7">3.2 YOLOv8 Detection æ¶æ„æ¦‚è§ˆ</h4>
<p>YOLOv8 ä»ç„¶éµå¾ªç»å…¸çš„ä¸‰æ®µå¼ç»“æ„ï¼š</p>
<ul>
<li><strong>Backbone</strong>ï¼šç‰¹å¾æå–ï¼ˆC2f + CSP æ€æƒ³ï¼‰</li>
<li><strong>Neck</strong>ï¼šå¤šå°ºåº¦ç‰¹å¾èåˆï¼ˆFPN + PANï¼‰</li>
<li><strong>Head</strong>ï¼šAnchor-Free æ£€æµ‹å¤´</li>
</ul>
<p>å…¶æ ¸å¿ƒæ”¹è¿›ç‚¹åœ¨äºï¼š</p>
<ul>
<li>Task-Aligned Assigner</li>
<li>è§£è€¦å¼æ£€æµ‹å¤´</li>
<li>DFLï¼ˆDistribution Focal Lossï¼‰</li>
</ul>
<p>è¿™äº›è®¾è®¡æ˜¾è‘—æå‡äº†æ¨¡å‹åœ¨å¤æ‚åœºæ™¯ä¸‹çš„ç¨³å®šæ€§ã€‚</p>
<hr/>
<h3 data-id="heading-8">å››ã€æ•°æ®é›†æ„å»ºä¸æ ‡æ³¨è§„èŒƒ</h3>
<h4 data-id="heading-9">4.1 æ•°æ®æ¥æºä¸é‡‡é›†</h4>
<p>æ•°æ®ä¸»è¦æ¥è‡ªï¼š</p>
<ul>
<li>åŸå¸‚è¡—æ™¯å®æ‹</li>
<li>å…¬å…±é“è·¯ç›‘æ§æˆªå›¾</li>
<li>ä¸åŒå¤©æ°” / å…‰ç…§ / è§’åº¦åœºæ™¯</li>
</ul>
<p>é‡ç‚¹è¦†ç›–ä»¥ä¸‹æƒ…å†µï¼š</p>
<ul>
<li>éšæ„å †å åœæ”¾</li>
<li>å ç”¨ç›²é“ã€äººè¡Œé“</li>
<li>è·¯å£å¯†é›†åŒºåŸŸ</li>
<li>å•è½¦ä¸èƒŒæ™¯é«˜åº¦ç›¸ä¼¼åœºæ™¯</li>
</ul>
<h4 data-id="heading-10">4.2 YOLO æ•°æ®é›†ç»“æ„</h4>
<p>é‡‡ç”¨æ ‡å‡† YOLOv8 æ•°æ®é›†æ ¼å¼ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">dataset/
â”œâ”€â”€ images/
â”‚   â”œâ”€â”€ train/
â”‚   â””â”€â”€ <span class="hljs-keyword">val</span>/
â”œâ”€â”€ labels/
â”‚   â”œâ”€â”€ train/
â”‚   â””â”€â”€ <span class="hljs-keyword">val</span>/
</code></pre>
<h4 data-id="heading-11">4.3 æ ‡æ³¨æ ¼å¼è¯´æ˜</h4>
<p>æ¯ä¸€è¡Œæ ‡ç­¾æ ¼å¼å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">class_id</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">x_center</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">y_center</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">width</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">height</span>&gt;</span>
</code></pre>
<p>åæ ‡å…¨éƒ¨é‡‡ç”¨ <strong>å½’ä¸€åŒ–æ¯”ä¾‹å€¼</strong>ï¼Œä¾¿äºæ¨¡å‹æ³›åŒ–ã€‚</p>
<hr/>
<h3 data-id="heading-12">äº”ã€æ¨¡å‹è®­ç»ƒæµç¨‹ä¸å‚æ•°é…ç½®</h3>
<h4 data-id="heading-13">5.1 è®­ç»ƒå‘½ä»¤ç¤ºä¾‹</h4>
<pre><code class="hljs language-bash" lang="bash">yolo detect train \
  data=dataset/bike.yaml \
  model=yolov8n.pt \
  epochs=100 \
  batch=16 \
  imgsz=640 \
  lr0=0.001
</code></pre>
<h4 data-id="heading-14">5.2 è®­ç»ƒè¿‡ç¨‹å…³æ³¨æŒ‡æ ‡</h4>
<ul>
<li>box_lossï¼ˆå®šä½è¯¯å·®ï¼‰</li>
<li>cls_lossï¼ˆåˆ†ç±»è¯¯å·®ï¼‰</li>
<li>dfl_lossï¼ˆè¾¹ç•Œæ¡†åˆ†å¸ƒï¼‰</li>
<li>mAP@0.5 / mAP@0.5:0.95</li>
</ul>
<blockquote>
<p>åœ¨å®éªŒä¸­ï¼Œå½“ mAP@0.5 ç¨³å®šåœ¨ <strong>90% ä»¥ä¸Š</strong>ï¼Œæ¨¡å‹å·²å…·å¤‡å®é™…éƒ¨ç½²ä»·å€¼ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-15">å…­ã€æ¨¡å‹æ¨ç†ä¸æ£€æµ‹ç»“æœåˆ†æ</h3>
<h4 data-id="heading-16">6.1 Python æ¨ç†ç¤ºä¾‹</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> ultralytics <span class="hljs-keyword">import</span> YOLO

model = YOLO(<span class="hljs-string">"best.pt"</span>)
results = model(<span class="hljs-string">"test.jpg"</span>, conf=<span class="hljs-number">0.25</span>, save=<span class="hljs-literal">True</span>)
</code></pre>
<h4 data-id="heading-17">6.2 è¾“å‡ºç»“æœå†…å®¹</h4>
<ul>
<li>æ£€æµ‹æ¡†ä½ç½®</li>
<li>ç±»åˆ«åç§°</li>
<li>ç½®ä¿¡åº¦è¯„åˆ†</li>
<li>è‡ªåŠ¨ä¿å­˜æ ‡æ³¨å›¾åƒ</li>
</ul>
<p>æ¨¡å‹åœ¨å¤æ‚è¡—æ™¯ã€é®æŒ¡åœºæ™¯ä¸‹ä»èƒ½ä¿æŒè¾ƒå¥½é²æ£’æ€§ã€‚</p>
<hr/>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2ab73f230ad842a8ad2bbe8bce614cc4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv5p2w5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768046746&amp;x-signature=hJZBS6Qioq1WdLE72RqO69jOOYU%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-18">ä¸ƒã€PyQt5 å¯è§†åŒ–æ£€æµ‹ç³»ç»Ÿè®¾è®¡</h3>
<h4 data-id="heading-19">7.1 ä¸ºä»€ä¹ˆè¦åš GUIï¼Ÿ</h4>
<p>å¯¹äºå®é™…ä½¿ç”¨è€…ï¼ˆåŸç®¡ã€è¿è¥äººå‘˜ã€å­¦ç”Ÿæ¼”ç¤ºï¼‰æ¥è¯´ï¼š</p>
<blockquote>
<p>âŒ å‘½ä»¤è¡Œ â‰  æ˜“ç”¨
âœ… å¯è§†åŒ–ç•Œé¢ = çœŸæ­£å¯ç”¨ç³»ç»Ÿ</p>
</blockquote>
<h4 data-id="heading-20">7.2 æ”¯æŒåŠŸèƒ½ä¸€è§ˆ</h4>
<ul>
<li>ğŸ“· å•å¼ å›¾ç‰‡æ£€æµ‹</li>
<li>ğŸ“ æ–‡ä»¶å¤¹æ‰¹é‡æ£€æµ‹</li>
<li>ğŸï¸ è§†é¢‘æ–‡ä»¶æ£€æµ‹</li>
<li>ğŸ¥ å®æ—¶æ‘„åƒå¤´æ£€æµ‹</li>
<li>ğŸ’¾ ç»“æœä¿å­˜å¼€å…³</li>
</ul>
<h4 data-id="heading-21">7.3 ç³»ç»Ÿè¿è¡Œæ–¹å¼</h4>
<pre><code class="hljs language-bash" lang="bash">python main.py
</code></pre>
<p>æ— éœ€ä»»ä½•æ·±åº¦å­¦ä¹ åŸºç¡€ï¼Œå³å¯å®Œæˆæ£€æµ‹ã€‚</p>
<hr/>
<h3 data-id="heading-22">å…«ã€å·¥ç¨‹è½åœ°ä¸åº”ç”¨åœºæ™¯</h3>
<p>æœ¬ç³»ç»Ÿå¯ç›´æ¥åº”ç”¨äºï¼š</p>
<ul>
<li>ğŸš¦ åŸå¸‚æ™ºæ…§åŸç®¡</li>
<li>ğŸ™ï¸ æ™ºæ…§å›­åŒºç®¡ç†</li>
<li>ğŸš´â€â™‚ï¸ å…±äº«å•è½¦è¿ç»´ç›‘ç®¡</li>
<li>ğŸ“ è®¡ç®—æœºè§†è§‰æ•™å­¦/æ¯•è®¾</li>
</ul>
<p>åŒæ—¶ï¼Œè¯¥é¡¹ç›®ä¹Ÿå¯ä½œä¸º <strong>YOLOv8 + GUI å·¥ç¨‹æ¨¡æ¿</strong>ï¼Œå¿«é€Ÿè¿ç§»åˆ°å…¶ä»–æ£€æµ‹ä»»åŠ¡ã€‚</p>
<hr/>
<h3 data-id="heading-23">ä¹ã€å®Œæ•´æºç ä¸èµ„æºè¯´æ˜</h3>
<p>é¡¹ç›®å·²æ‰“åŒ…æä¾›ï¼š</p>
<ul>
<li>âœ”ï¸ å®Œæ•´è®­ç»ƒä»£ç </li>
<li>âœ”ï¸ æ•°æ®é›†ä¸æ ‡æ³¨</li>
<li>âœ”ï¸ è®­ç»ƒæƒé‡æ–‡ä»¶</li>
<li>âœ”ï¸ PyQt5 å¯è§†åŒ–ç³»ç»Ÿ</li>
<li>âœ”ï¸ ä¸€é”®è¿è¡Œè„šæœ¬</li>
</ul>
<p>é€‚åˆï¼š</p>
<blockquote>
<p>æ¯•ä¸šè®¾è®¡ / ç§‘ç ”å®éªŒ / æŠ€æœ¯å¤ç° / äºŒæ¬¡å¼€å‘</p>
</blockquote>
<hr/>
<h3 data-id="heading-24">åã€æ€»ç»“</h3>
<p>æœ¬é¡¹ç›®ä¸ä»…æ˜¯ä¸€æ¬¡ YOLOv8 æ¨¡å‹å®è·µï¼Œæ›´æ˜¯ä¸€å¥—<strong>ä»ç®—æ³•åˆ°ç³»ç»Ÿã€ä»å®éªŒåˆ°è½åœ°</strong>çš„å®Œæ•´å·¥ç¨‹æ–¹æ¡ˆã€‚</p>
<p>å¦‚æœä½ å¸Œæœ›ï¼š</p>
<ul>
<li>ç³»ç»Ÿæ€§æŒæ¡ç›®æ ‡æ£€æµ‹å·¥ç¨‹</li>
<li>åšä¸€ä¸ªâ€œçœŸæ­£èƒ½è·‘â€çš„ AI é¡¹ç›®</li>
<li>æ‹¥æœ‰å¯å±•ç¤ºã€å¯éƒ¨ç½²ã€å¯æ‰©å±•çš„æˆæœ</li>
</ul>
<p>é‚£ä¹ˆï¼Œè¿™ä¸ªé¡¹ç›®ä¼šæ˜¯ä¸€ä¸ªéå¸¸ç†æƒ³çš„èµ·ç‚¹ã€‚</p>
<p>æœ¬æ–‡å›´ç»•å…±äº«å•è½¦/è‡ªè¡Œè½¦ä¹±åœæ”¾è¿™ä¸€å…¸å‹çš„åŸå¸‚æ²»ç†ç—›ç‚¹ï¼Œå®Œæ•´ä»‹ç»äº†ä¸€å¥—åŸºäº YOLOv8 ç›®æ ‡æ£€æµ‹æ¨¡å‹ + PyQt5 å¯è§†åŒ–ç•Œé¢ çš„æ™ºèƒ½è¯†åˆ«ç³»ç»Ÿã€‚ä»é—®é¢˜èƒŒæ™¯å‡ºå‘ï¼Œç³»ç»Ÿæ€§åœ°é˜è¿°äº†æ¨¡å‹é€‰å‹ç†ç”±ã€æ•°æ®é›†æ„å»ºæ–¹å¼ã€è®­ç»ƒä¸è¯„ä¼°æµç¨‹ï¼Œä»¥åŠå¤šè¾“å…¥æºï¼ˆå›¾ç‰‡ã€è§†é¢‘ã€æ‘„åƒå¤´ã€æ‰¹é‡æ–‡ä»¶ï¼‰çš„å·¥ç¨‹åŒ–è½åœ°å®ç°ã€‚è¯¥é¡¹ç›®ä¸ä»…åœ¨ç®—æ³•å±‚é¢éªŒè¯äº† YOLOv8 åœ¨å¤æ‚è¡—æ™¯ä¸‹çš„é«˜ç²¾åº¦ä¸å®æ—¶æ€§ä¼˜åŠ¿ï¼Œæ›´é€šè¿‡å›¾å½¢åŒ–ç•Œé¢é™ä½äº†ä½¿ç”¨é—¨æ§›ï¼Œä½¿æ¨¡å‹çœŸæ­£å…·å¤‡å¯éƒ¨ç½²ã€å¯ä½¿ç”¨ã€å¯æ‰©å±•çš„å·¥ç¨‹ä»·å€¼ã€‚æ•´ä½“æ–¹æ¡ˆå…¼é¡¾æŠ€æœ¯æ·±åº¦ä¸å®ç”¨æ€§ï¼Œæ—¢å¯ç›´æ¥åº”ç”¨äºæ™ºæ…§åŸç®¡ä¸å…±äº«å•è½¦ç›‘ç®¡åœºæ™¯ï¼Œä¹Ÿå¯ä½œä¸ºç›®æ ‡æ£€æµ‹æ•™å­¦ã€æ¯•ä¸šè®¾è®¡å’ŒäºŒæ¬¡å¼€å‘çš„å®Œæ•´å®è·µèŒƒä¾‹ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åŸºäºå¤§æ¨¡å‹çš„æ™ºèƒ½è¯»æŠ¥åŠ©æ‰‹]]></title>    <link>https://juejin.cn/post/7590330924001165375</link>    <guid>https://juejin.cn/post/7590330924001165375</guid>    <pubDate>2026-01-03T12:10:10.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7590330924001165375" data-draft-id="7590309337861226537" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åŸºäºå¤§æ¨¡å‹çš„æ™ºèƒ½è¯»æŠ¥åŠ©æ‰‹"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-01-03T12:10:10.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Livingbody"/> <meta itemprop="url" content="https://juejin.cn/user/4213771487417944"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åŸºäºå¤§æ¨¡å‹çš„æ™ºèƒ½è¯»æŠ¥åŠ©æ‰‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4213771487417944/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Livingbody
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-03T12:10:10.000Z" title="Sat Jan 03 2026 12:10:10 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»16åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€ã€Šäººæ°‘æ—¥æŠ¥ã€‹å·¥å…·ç®±ç®€ä»‹</h2>
<p>è¿™æ˜¯ä¸€ä¸ªç”¨äºäººæ°‘æ—¥æŠ¥PDFå®Œæ•´å·¥ä½œæµç¨‹çš„Pythonå·¥å…·é›†ï¼Œæ”¯æŒä»ç½‘ç«™ä¸‹è½½ã€æ–‡æœ¬æå–åˆ°AIæ™ºèƒ½åˆ†æçš„å…¨æµç¨‹å¤„ç†ã€‚</p>
<h3 data-id="heading-1">1.ğŸ¯ åŠŸèƒ½ç‰¹æ€§</h3>
<h4 data-id="heading-2">1.1ğŸ“¥ <strong>PDFä¸‹è½½åŠŸèƒ½</strong></h4>
<ul>
<li>ğŸŒ è‡ªåŠ¨ä»äººæ°‘æ—¥æŠ¥å®˜ç½‘ä¸‹è½½æŒ‡å®šæ—¥æœŸçš„PDFç‰ˆæŠ¥çº¸</li>
<li>ğŸ“„ è‡ªåŠ¨æ£€æµ‹æŠ¥çº¸ç‰ˆé¢æ•°é‡ï¼ˆé€šå¸¸8-16ç‰ˆï¼‰</li>
<li>ğŸ”„ æ™ºèƒ½åˆå¹¶å¤šä¸ªç‰ˆé¢ä¸ºä¸€ä¸ªå®Œæ•´çš„PDFæ–‡ä»¶</li>
<li>â° æ”¯æŒæŒ‡å®šæ—¥æœŸä¸‹è½½å’Œæ‰¹é‡ä¸‹è½½</li>
</ul>
<h4 data-id="heading-3">1.2ğŸ“– <strong>PDFæ–‡æœ¬æå–</strong></h4>
<ul>
<li>ğŸ” ä½¿ç”¨PyPDF2åº“ç²¾ç¡®æå–PDFæ–‡ä»¶ä¸­çš„æ–‡æœ¬å†…å®¹</li>
<li>ğŸ“ å¤„ç†å„ç§PDFæ ¼å¼å’Œç¼–ç </li>
<li>ğŸ›¡ï¸ å®¹é”™å¤„ç†ï¼Œé˜²æ­¢æå–å¤±è´¥å½±å“æ•´ä½“æµç¨‹</li>
</ul>
<h4 data-id="heading-4">1.3ğŸ¤– <strong>AIæ™ºèƒ½åˆ†æ</strong></h4>
<ul>
<li>ğŸ§  åŸºäºå¤§è¯­è¨€æ¨¡å‹å¯¹äººæ°‘æ—¥æŠ¥å†…å®¹è¿›è¡Œæ·±åº¦åˆ†æ</li>
<li>ğŸ“Š è‡ªåŠ¨åˆ†ç±»è¯†åˆ«ï¼šé‡å¤§äº‹ä»¶ã€è¯„è®ºæ–‡ç« ã€é‡‘å¥å…¸æ•…ã€ä¼˜ç§€è¯ç»„</li>
<li>ğŸ“‹ ç”Ÿæˆç»“æ„åŒ–çš„Markdownæ ¼å¼åˆ†ææŠ¥å‘Š</li>
<li>ğŸ’¡ æ”¯æŒæµå¼è¾“å‡ºï¼Œå®æ—¶æ˜¾ç¤ºåˆ†æè¿‡ç¨‹</li>
</ul>
<h3 data-id="heading-5">2.ğŸ¯ æ‰©å±•ç”¨ä¾‹</h3>
<ul>
<li>ğŸ§  æ‰‹æœºç«¯å®šæ—¶çˆ¬å–ã€Šäººæ°‘æ—¥æŠ¥ã€‹ï¼Œå¦‚æ¯å¤©æ—©æ™¨7:00çˆ¬å–å½“æ—¥ã€Šäººæ°‘æ—¥æŠ¥ã€‹</li>
<li>ğŸ“Š è‡ªåŠ¨åˆ†æå½“æ—¥æŠ¥çº¸ç²¾åï¼Œå¹¶å­˜å…¥obsidianç¬”è®°</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/29815171f81744d0b647e45d3e516d89~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTGl2aW5nYm9keQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768047203&amp;x-signature=qspHGVvg7x4C9cnYPre%2BWPtg4FY%3D" alt="" loading="lazy"/>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d31ca22469dd4c02bfe394be5545c8df~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTGl2aW5nYm9keQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768047203&amp;x-signature=JxK8BTyq3T44tAzyaeiPhENcMFk%3D" alt="" loading="lazy"/>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9c6db3ba59ad45b7bc93b83fe7875aed~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTGl2aW5nYm9keQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768047203&amp;x-signature=LpiBytdhBlmAathg%2Byif5NALMW0%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-6">3.ğŸ—ï¸ é¡¹ç›®ç»“æ„</h3>
<pre><code class="hljs language-bash" lang="bash">xx/
â”œâ”€â”€ rmrb_down.py              <span class="hljs-comment"># äººæ°‘æ—¥æŠ¥PDFä¸‹è½½å·¥å…·</span>
â”œâ”€â”€ readpdf.py                <span class="hljs-comment"># PDFæ–‡æœ¬æå–å·¥å…·  </span>
â”œâ”€â”€ note_for_rmrb.py          <span class="hljs-comment"># äººæ°‘æ—¥æŠ¥AIæ™ºèƒ½åˆ†æå·¥å…·</span>
â”œâ”€â”€ requirements.txt          <span class="hljs-comment"># é¡¹ç›®ä¾èµ–åˆ—è¡¨</span>
â”œâ”€â”€ README.md                <span class="hljs-comment"># é¡¹ç›®è¯´æ˜æ–‡æ¡£</span>
â””â”€â”€ storage/
    â””â”€â”€ downloads/
        â””â”€â”€ rmrb/            <span class="hljs-comment"># ä¸‹è½½çš„PDFæ–‡ä»¶å­˜å‚¨ç›®å½•</span>
            â””â”€â”€ rmrb_YYYY-MM-DD.pdf
â””â”€â”€ äººæ°‘æ—¥æŠ¥_YYYY-MM-DD.md    <span class="hljs-comment"># AIåˆ†æç»“æœè¾“å‡ºæ–‡ä»¶</span>
</code></pre>
<h2 data-id="heading-7">äºŒã€å®‰è£…è¯´æ˜</h2>
<h3 data-id="heading-8">1. ç¯å¢ƒå‡†å¤‡</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ç¡®ä¿Pythonç‰ˆæœ¬ &gt;= 3.7</span>
python --version
</code></pre>
<h3 data-id="heading-9">2. å…‹éš†é¡¹ç›®</h3>
<pre><code class="hljs language-bash" lang="bash">git <span class="hljs-built_in">clone</span> https://github.com/livingbody/People_Daily_Toolkit
<span class="hljs-built_in">cd</span> People_Daily_Toolkit
</code></pre>
<h3 data-id="heading-10">3. å®‰è£…ä¾èµ–</h3>
<pre><code class="hljs language-bash" lang="bash">pip install -r requirements.txt
</code></pre>
<p><strong>ä¾èµ–åº“åˆ—è¡¨</strong>ï¼š</p>
<ul>
<li><code>requests==2.31.0</code> - HTTPè¯·æ±‚åº“ï¼Œç”¨äºç½‘é¡µæŠ“å–</li>
<li><code>beautifulsoup4==4.12.2</code> - HTMLè§£æåº“ï¼Œç”¨äºç½‘é¡µå†…å®¹è§£æ</li>
<li><code>PyPDF2==3.0.1</code> - PDFå¤„ç†åº“ï¼Œç”¨äºæ–‡ä»¶è¯»å–å’Œåˆå¹¶</li>
<li><code>openai==1.58.1</code> - OpenAI APIåº“ï¼Œç”¨äºå¤§æ¨¡å‹è°ƒç”¨</li>
</ul>
<pre><code class="hljs language-python" lang="python">!git clone https://github.com/livingbody/People_Daily_Toolkit
!pip install -r People_Daily_Toolkit/requirements.txt
</code></pre>
<h2 data-id="heading-11">ä¸‰ã€ä½¿ç”¨æ–¹æ³•</h2>
<h3 data-id="heading-12">1.æŠ¥çº¸PDFä¸‹è½½</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># æœ¬é¡¹ç›®ç”¨äºä»äººæ°‘æ—¥æŠ¥ç½‘ç«™ä¸‹è½½æŒ‡å®šæ—¥æœŸçš„PDFç‰ˆæŠ¥çº¸ï¼Œå¹¶å°†å¤šä¸ªç‰ˆé¢åˆå¹¶ä¸ºä¸€ä¸ªå®Œæ•´çš„PDFæ–‡ä»¶</span>
<span class="hljs-comment"># ä½œè€…: livingbody</span>
<span class="hljs-comment"># pip install requests beautifulsoup4 PyPDF2</span>

<span class="hljs-keyword">import</span> os
<span class="hljs-keyword">import</span> requests
<span class="hljs-keyword">from</span> bs4 <span class="hljs-keyword">import</span> BeautifulSoup
<span class="hljs-keyword">import</span> PyPDF2
<span class="hljs-keyword">import</span> time
<span class="hljs-keyword">from</span> datetime <span class="hljs-keyword">import</span> date, datetime, timedelta
<span class="hljs-keyword">import</span> re


<span class="hljs-keyword">def</span> <span class="hljs-title function_">get_page_count</span>(<span class="hljs-params">url</span>):
    <span class="hljs-string">"""
    è·å–æŠ¥çº¸çš„æ€»ç‰ˆé¢æ•°
    
    å‚æ•°:
        url: æŠ¥çº¸ç‰ˆé¢ç›®å½•é¡µçš„URL
    
    è¿”å›å€¼:
        int: æ€»ç‰ˆé¢æ•°
    """</span>
    <span class="hljs-keyword">try</span>:
        response = requests.get(url, timeout=<span class="hljs-number">10</span>)
        response.encoding = <span class="hljs-string">'utf-8'</span>
        soup = BeautifulSoup(response.text, <span class="hljs-string">'html.parser'</span>)
        
        <span class="hljs-comment"># æŸ¥æ‰¾æ‰€æœ‰ç‰ˆé¢é“¾æ¥</span>
        page_links = soup.find_all(<span class="hljs-string">'a'</span>, href=<span class="hljs-keyword">lambda</span> x: x <span class="hljs-keyword">and</span> <span class="hljs-string">'node_'</span> <span class="hljs-keyword">in</span> x <span class="hljs-keyword">and</span> <span class="hljs-string">'.html'</span> <span class="hljs-keyword">in</span> x)
        
        <span class="hljs-comment"># æå–ç‰ˆé¢ç¼–å·å¹¶æ‰¾åˆ°æœ€å¤§çš„ç¼–å·</span>
        max_page = <span class="hljs-number">0</span>
        <span class="hljs-keyword">for</span> link <span class="hljs-keyword">in</span> page_links:
            <span class="hljs-keyword">match</span> = re.search(<span class="hljs-string">r'node_(\d+)\.html'</span>, link.get(<span class="hljs-string">'href'</span>))
            <span class="hljs-keyword">if</span> <span class="hljs-keyword">match</span>:
                page_num = <span class="hljs-built_in">int</span>(<span class="hljs-keyword">match</span>.group(<span class="hljs-number">1</span>))
                max_page = <span class="hljs-built_in">max</span>(max_page, page_num)
                
        <span class="hljs-keyword">return</span> max_page
    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"è·å–ç‰ˆé¢æ•°é‡å¤±è´¥: <span class="hljs-subst">{e}</span>"</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-number">8</span>  <span class="hljs-comment"># é»˜è®¤è¿”å›8ç‰ˆ</span>


<span class="hljs-keyword">def</span> <span class="hljs-title function_">get_pdf_urls</span>(<span class="hljs-params">base_url, date_str</span>):
    <span class="hljs-string">"""
    è·å–æ‰€æœ‰ç‰ˆé¢çš„PDFæ–‡ä»¶URL
    
    å‚æ•°:
        base_url: äººæ°‘æ—¥æŠ¥ç½‘ç«™çš„åŸºç¡€URL
        date_str: æ—¥æœŸå­—ç¬¦ä¸²ï¼Œæ ¼å¼ä¸º'YYYY-MM-DD'
    
    è¿”å›å€¼:
        list: PDFæ–‡ä»¶URLåˆ—è¡¨
    """</span>
    year, month, day = date_str.split(<span class="hljs-string">'-'</span>)
    
    <span class="hljs-comment"># æ„å»ºç‰ˆé¢ç›®å½•é¡µURL</span>
    catalog_url = <span class="hljs-string">f"<span class="hljs-subst">{base_url}</span>/rmrb/pc/layout/<span class="hljs-subst">{year}</span><span class="hljs-subst">{month}</span>/<span class="hljs-subst">{day}</span>/node_01.html"</span>
    
    <span class="hljs-comment"># è·å–ç‰ˆé¢æ•°é‡</span>
    page_count = get_page_count(catalog_url)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å‘ç° <span class="hljs-subst">{page_count}</span> ä¸ªç‰ˆé¢"</span>)
    
    pdf_urls = []
    
    <span class="hljs-comment"># éå†æ‰€æœ‰ç‰ˆé¢</span>
    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, page_count + <span class="hljs-number">1</span>):
        <span class="hljs-comment"># æ„å»ºå½“å‰ç‰ˆé¢çš„URL</span>
        page_url = <span class="hljs-string">f"<span class="hljs-subst">{base_url}</span>/rmrb/pc/layout/<span class="hljs-subst">{year}</span><span class="hljs-subst">{month}</span>/<span class="hljs-subst">{day}</span>/node_<span class="hljs-subst">{i:02d}</span>.html"</span>
        
        <span class="hljs-keyword">try</span>:
            response = requests.get(page_url, timeout=<span class="hljs-number">10</span>)
            response.encoding = <span class="hljs-string">'utf-8'</span>
            soup = BeautifulSoup(response.text, <span class="hljs-string">'html.parser'</span>)
            
            <span class="hljs-comment"># æŸ¥æ‰¾PDFé“¾æ¥</span>
            pdf_link = soup.find(<span class="hljs-string">'a'</span>, href=<span class="hljs-keyword">lambda</span> x: x <span class="hljs-keyword">and</span> x.endswith(<span class="hljs-string">'.pdf'</span>))
            
            <span class="hljs-keyword">if</span> pdf_link:
                pdf_href = pdf_link.get(<span class="hljs-string">'href'</span>)
                <span class="hljs-comment"># å¦‚æœæ˜¯ç›¸å¯¹URLï¼Œåˆ™æ„å»ºç»å¯¹URL</span>
                <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> pdf_href.startswith(<span class="hljs-string">'http'</span>):
                    <span class="hljs-keyword">if</span> pdf_href.startswith(<span class="hljs-string">'/'</span>):
                        pdf_href = base_url + pdf_href
                    <span class="hljs-keyword">else</span>:
                        pdf_href = <span class="hljs-string">f"<span class="hljs-subst">{base_url}</span>/rmrb/pc/layout/<span class="hljs-subst">{year}</span><span class="hljs-subst">{month}</span>/<span class="hljs-subst">{day}</span>/<span class="hljs-subst">{pdf_href}</span>"</span>
                
                pdf_urls.append(pdf_href)
                <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ‰¾åˆ°ç‰ˆé¢ <span class="hljs-subst">{i}</span> çš„PDFé“¾æ¥: <span class="hljs-subst">{pdf_href}</span>"</span>)
            <span class="hljs-keyword">else</span>:
                <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æœªæ‰¾åˆ°ç‰ˆé¢ <span class="hljs-subst">{i}</span> çš„PDFé“¾æ¥"</span>)
        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"è·å–ç‰ˆé¢ <span class="hljs-subst">{i}</span> çš„PDFé“¾æ¥å¤±è´¥: <span class="hljs-subst">{e}</span>"</span>)
            
    <span class="hljs-keyword">return</span> pdf_urls


<span class="hljs-keyword">def</span> <span class="hljs-title function_">download_pdfs</span>(<span class="hljs-params">pdf_urls, date_str</span>):
    <span class="hljs-string">"""
    ä¸‹è½½æ‰€æœ‰PDFæ–‡ä»¶
    
    å‚æ•°:
        pdf_urls: PDFæ–‡ä»¶URLåˆ—è¡¨
        date_str: æ—¥æœŸå­—ç¬¦ä¸²ï¼Œç”¨äºå‘½åä¸‹è½½çš„æ–‡ä»¶
    
    è¿”å›å€¼:
        list: ä¸‹è½½çš„PDFæ–‡ä»¶è·¯å¾„åˆ—è¡¨
    """</span>
    downloaded_files = []
    
    <span class="hljs-comment"># åˆ›å»ºä¸´æ—¶ç›®å½•å­˜å‚¨ä¸‹è½½çš„æ–‡ä»¶</span>
    temp_dir = <span class="hljs-string">f"temp_pdfs_<span class="hljs-subst">{date_str}</span>"</span>
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> os.path.exists(temp_dir):
        os.makedirs(temp_dir)
    
    <span class="hljs-comment"># ä¸‹è½½æ¯ä¸ªPDFæ–‡ä»¶</span>
    <span class="hljs-keyword">for</span> i, pdf_url <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(pdf_urls):
        <span class="hljs-keyword">try</span>:
            <span class="hljs-comment"># æ„å»ºä¿å­˜çš„æ–‡ä»¶å</span>
            file_name = <span class="hljs-string">f"<span class="hljs-subst">{temp_dir}</span>/rmrb_<span class="hljs-subst">{date_str}</span>_<span class="hljs-subst">{i+<span class="hljs-number">1</span>:02d}</span>.pdf"</span>
            
            <span class="hljs-comment"># ä¸‹è½½æ–‡ä»¶</span>
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å¼€å§‹ä¸‹è½½ç‰ˆé¢ <span class="hljs-subst">{i+<span class="hljs-number">1</span>}</span> çš„PDFæ–‡ä»¶..."</span>)
            response = requests.get(pdf_url, timeout=<span class="hljs-number">30</span>)
            
            <span class="hljs-comment"># ä¿å­˜æ–‡ä»¶</span>
            <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(file_name, <span class="hljs-string">'wb'</span>) <span class="hljs-keyword">as</span> f:
                f.write(response.content)
            
            downloaded_files.append(file_name)
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ç‰ˆé¢ <span class="hljs-subst">{i+<span class="hljs-number">1</span>}</span> çš„PDFæ–‡ä»¶ä¸‹è½½å®Œæˆ: <span class="hljs-subst">{file_name}</span>"</span>)
            
            <span class="hljs-comment"># æ·»åŠ ä¸‹è½½é—´éš”ï¼Œé¿å…è¯·æ±‚è¿‡äºé¢‘ç¹</span>
            time.sleep(<span class="hljs-number">1</span>)
        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ä¸‹è½½ç‰ˆé¢ <span class="hljs-subst">{i+<span class="hljs-number">1</span>}</span> çš„PDFæ–‡ä»¶å¤±è´¥: <span class="hljs-subst">{e}</span>"</span>)
    
    <span class="hljs-keyword">return</span> downloaded_files


<span class="hljs-keyword">def</span> <span class="hljs-title function_">merge_pdfs</span>(<span class="hljs-params">pdf_files, output_file</span>):
    <span class="hljs-string">"""
    åˆå¹¶å¤šä¸ªPDFæ–‡ä»¶ä¸ºä¸€ä¸ª
    
    å‚æ•°:
        pdf_files: è¦åˆå¹¶çš„PDFæ–‡ä»¶è·¯å¾„åˆ—è¡¨
        output_file: åˆå¹¶åçš„è¾“å‡ºæ–‡ä»¶è·¯å¾„
    
    è¿”å›å€¼:
        bool: åˆå¹¶æ˜¯å¦æˆåŠŸ
    """</span>
    <span class="hljs-keyword">try</span>:
        pdf_writer = PyPDF2.PdfWriter()
        
        <span class="hljs-comment"># éå†æ¯ä¸ªPDFæ–‡ä»¶</span>
        <span class="hljs-keyword">for</span> pdf_file <span class="hljs-keyword">in</span> pdf_files:
            <span class="hljs-keyword">try</span>:
                pdf_reader = PyPDF2.PdfReader(pdf_file, strict=<span class="hljs-literal">False</span>)
                
                <span class="hljs-comment"># æ·»åŠ æ¯ä¸€é¡µåˆ°å†™å…¥å™¨</span>
                <span class="hljs-keyword">for</span> page_num <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(pdf_reader.pages)):
                    pdf_writer.add_page(pdf_reader.pages[page_num])
            <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
                <span class="hljs-built_in">print</span>(<span class="hljs-string">f"è¯»å–æ–‡ä»¶ <span class="hljs-subst">{pdf_file}</span> å¤±è´¥: <span class="hljs-subst">{e}</span>"</span>)
        
        <span class="hljs-comment"># å†™å…¥åˆå¹¶åçš„æ–‡ä»¶</span>
        <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(output_file, <span class="hljs-string">'wb'</span>) <span class="hljs-keyword">as</span> out:
            pdf_writer.write(out)
        
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"PDFæ–‡ä»¶åˆå¹¶å®Œæˆ: <span class="hljs-subst">{output_file}</span>"</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span>
    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"PDFæ–‡ä»¶åˆå¹¶å¤±è´¥: <span class="hljs-subst">{e}</span>"</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span>


<span class="hljs-keyword">def</span> <span class="hljs-title function_">clean_temp_files</span>(<span class="hljs-params">temp_files</span>):
    <span class="hljs-string">"""
    æ¸…ç†ä¸´æ—¶æ–‡ä»¶
    
    å‚æ•°:
        temp_files: ä¸´æ—¶æ–‡ä»¶è·¯å¾„åˆ—è¡¨
    """</span>
    <span class="hljs-keyword">for</span> file <span class="hljs-keyword">in</span> temp_files:
        <span class="hljs-keyword">try</span>:
            os.remove(file)
        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"åˆ é™¤ä¸´æ—¶æ–‡ä»¶ <span class="hljs-subst">{file}</span> å¤±è´¥: <span class="hljs-subst">{e}</span>"</span>)
    
    <span class="hljs-comment"># å°è¯•åˆ é™¤ä¸´æ—¶ç›®å½•</span>
    <span class="hljs-keyword">if</span> temp_files:
        temp_dir = os.path.dirname(temp_files[<span class="hljs-number">0</span>])
        <span class="hljs-keyword">try</span>:
            os.rmdir(temp_dir)
        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"åˆ é™¤ä¸´æ—¶ç›®å½• <span class="hljs-subst">{temp_dir}</span> å¤±è´¥: <span class="hljs-subst">{e}</span>"</span>)


<span class="hljs-keyword">def</span> <span class="hljs-title function_">download_rmrb_pdf</span>(<span class="hljs-params">date_str=<span class="hljs-literal">None</span>, base_url=<span class="hljs-string">"https://paper.people.com.cn"</span></span>):
    <span class="hljs-string">"""
    ä¸‹è½½æŒ‡å®šæ—¥æœŸçš„äººæ°‘æ—¥æŠ¥PDFå¹¶åˆå¹¶
    
    å‚æ•°:
        date_str: æ—¥æœŸå­—ç¬¦ä¸²ï¼Œæ ¼å¼ä¸º'YYYY-MM-DD'ï¼Œé»˜è®¤ä¸ºå½“å¤©
        base_url: äººæ°‘æ—¥æŠ¥ç½‘ç«™çš„åŸºç¡€URL
    
    è¿”å›å€¼:
        str: åˆå¹¶åçš„PDFæ–‡ä»¶è·¯å¾„ï¼Œå¦‚æœå¤±è´¥åˆ™è¿”å›None
    """</span>
    <span class="hljs-comment"># å¦‚æœæœªæŒ‡å®šæ—¥æœŸï¼Œåˆ™ä½¿ç”¨å½“å¤©æ—¥æœŸ</span>
    <span class="hljs-keyword">if</span> date_str <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>:
        date_str = datetime.now().strftime(<span class="hljs-string">'%Y-%m-%d'</span>)
    
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å¼€å§‹ä¸‹è½½ <span class="hljs-subst">{date_str}</span> çš„äººæ°‘æ—¥æŠ¥PDF..."</span>)
    
    <span class="hljs-comment"># è·å–æ‰€æœ‰ç‰ˆé¢çš„PDFé“¾æ¥</span>
    pdf_urls = get_pdf_urls(base_url, date_str)
    
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> pdf_urls:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"æœªæ‰¾åˆ°ä»»ä½•PDFé“¾æ¥ï¼Œä¸‹è½½å¤±è´¥"</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>
    
    <span class="hljs-comment"># ä¸‹è½½PDFæ–‡ä»¶</span>
    downloaded_files = download_pdfs(pdf_urls, date_str)
    
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> downloaded_files:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"æ‰€æœ‰PDFæ–‡ä»¶ä¸‹è½½å¤±è´¥"</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>
    
    <span class="hljs-comment"># æ„å»ºè¾“å‡ºæ–‡ä»¶å</span>
    output_file = <span class="hljs-string">f"rmrb_<span class="hljs-subst">{date_str}</span>.pdf"</span>
    
    <span class="hljs-comment"># åˆå¹¶PDFæ–‡ä»¶</span>
    <span class="hljs-keyword">if</span> merge_pdfs(downloaded_files, output_file):
        <span class="hljs-comment"># æ¸…ç†ä¸´æ—¶æ–‡ä»¶</span>
        clean_temp_files(downloaded_files)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"äººæ°‘æ—¥æŠ¥ <span class="hljs-subst">{date_str}</span> PDFä¸‹è½½å’Œåˆå¹¶å®Œæˆï¼"</span>)
        <span class="hljs-keyword">return</span> output_file
    <span class="hljs-keyword">else</span>:
        <span class="hljs-comment"># å³ä½¿åˆå¹¶å¤±è´¥ï¼Œä¹Ÿæ¸…ç†ä¸´æ—¶æ–‡ä»¶</span>
        clean_temp_files(downloaded_files)
        <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>
</code></pre>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    <span class="hljs-comment"># ç¤ºä¾‹ç”¨æ³•ï¼šä¸‹è½½å½“å¤©çš„äººæ°‘æ—¥æŠ¥PDF</span>
    <span class="hljs-comment"># å¦‚æœéœ€è¦ä¸‹è½½ç‰¹å®šæ—¥æœŸçš„æŠ¥çº¸ï¼Œå¯ä»¥ä¼ å…¥æ—¥æœŸå‚æ•°ï¼Œä¾‹å¦‚ï¼šdownload_rmrb_pdf('2025-09-29')</span>
    <span class="hljs-comment"># å¦‚æœæœªæŒ‡å®šæ—¥æœŸï¼Œåˆ™ä½¿ç”¨å½“å¤©æ—¥æœŸ</span>
    today=datetime.now()
    download_rmrb_pdf()
 
</code></pre>
<pre><code class="hljs language-bash" lang="bash">å¼€å§‹ä¸‹è½½ 2026-01-03 çš„äººæ°‘æ—¥æŠ¥PDF...
å‘ç° 8 ä¸ªç‰ˆé¢
æ‰¾åˆ°ç‰ˆé¢ 1 çš„PDFé“¾æ¥: https://paper.people.com.cn/rmrb/pc/layout/202601/03/../../../attachement/202601/03/a34b8d91-e465-4b84-9c08-c07900f5d536.pdf
æ‰¾åˆ°ç‰ˆé¢ 2 çš„PDFé“¾æ¥: https://paper.people.com.cn/rmrb/pc/layout/202601/03/../../../attachement/202601/03/dee045f0-a680-450a-933d-03b6b038ee3d.pdf
æ‰¾åˆ°ç‰ˆé¢ 3 çš„PDFé“¾æ¥: https://paper.people.com.cn/rmrb/pc/layout/202601/03/../../../attachement/202601/03/0c5046c0-6919-4194-931b-145f8e7fa90f.pdf
æ‰¾åˆ°ç‰ˆé¢ 4 çš„PDFé“¾æ¥: https://paper.people.com.cn/rmrb/pc/layout/202601/03/../../../attachement/202601/03/1c61519d-506a-4c83-925d-b9c79e7609f7.pdf
æ‰¾åˆ°ç‰ˆé¢ 5 çš„PDFé“¾æ¥: https://paper.people.com.cn/rmrb/pc/layout/202601/03/../../../attachement/202601/03/7a2392d1-d4fb-4b9d-93e3-28ed039d1de3.pdf
æ‰¾åˆ°ç‰ˆé¢ 6 çš„PDFé“¾æ¥: https://paper.people.com.cn/rmrb/pc/layout/202601/03/../../../attachement/202601/03/32f4a6e9-3959-411a-bcaf-ebf638a7239c.pdf
æ‰¾åˆ°ç‰ˆé¢ 7 çš„PDFé“¾æ¥: https://paper.people.com.cn/rmrb/pc/layout/202601/03/../../../attachement/202601/03/a864bc77-c935-4d50-b3ce-5e9eb8ba2fc2.pdf
æ‰¾åˆ°ç‰ˆé¢ 8 çš„PDFé“¾æ¥: https://paper.people.com.cn/rmrb/pc/layout/202601/03/../../../attachement/202601/03/1c86d66b-66c3-4633-9b78-0c85e34d23a8.pdf
å¼€å§‹ä¸‹è½½ç‰ˆé¢ 1 çš„PDFæ–‡ä»¶...
ç‰ˆé¢ 1 çš„PDFæ–‡ä»¶ä¸‹è½½å®Œæˆ: temp_pdfs_2026-01-03/rmrb_2026-01-03_01.pdf
å¼€å§‹ä¸‹è½½ç‰ˆé¢ 2 çš„PDFæ–‡ä»¶...
ç‰ˆé¢ 2 çš„PDFæ–‡ä»¶ä¸‹è½½å®Œæˆ: temp_pdfs_2026-01-03/rmrb_2026-01-03_02.pdf
å¼€å§‹ä¸‹è½½ç‰ˆé¢ 3 çš„PDFæ–‡ä»¶...
ç‰ˆé¢ 3 çš„PDFæ–‡ä»¶ä¸‹è½½å®Œæˆ: temp_pdfs_2026-01-03/rmrb_2026-01-03_03.pdf
å¼€å§‹ä¸‹è½½ç‰ˆé¢ 4 çš„PDFæ–‡ä»¶...
ç‰ˆé¢ 4 çš„PDFæ–‡ä»¶ä¸‹è½½å®Œæˆ: temp_pdfs_2026-01-03/rmrb_2026-01-03_04.pdf
å¼€å§‹ä¸‹è½½ç‰ˆé¢ 5 çš„PDFæ–‡ä»¶...
ç‰ˆé¢ 5 çš„PDFæ–‡ä»¶ä¸‹è½½å®Œæˆ: temp_pdfs_2026-01-03/rmrb_2026-01-03_05.pdf
å¼€å§‹ä¸‹è½½ç‰ˆé¢ 6 çš„PDFæ–‡ä»¶...
ç‰ˆé¢ 6 çš„PDFæ–‡ä»¶ä¸‹è½½å®Œæˆ: temp_pdfs_2026-01-03/rmrb_2026-01-03_06.pdf
å¼€å§‹ä¸‹è½½ç‰ˆé¢ 7 çš„PDFæ–‡ä»¶...
ç‰ˆé¢ 7 çš„PDFæ–‡ä»¶ä¸‹è½½å®Œæˆ: temp_pdfs_2026-01-03/rmrb_2026-01-03_07.pdf
å¼€å§‹ä¸‹è½½ç‰ˆé¢ 8 çš„PDFæ–‡ä»¶...
ç‰ˆé¢ 8 çš„PDFæ–‡ä»¶ä¸‹è½½å®Œæˆ: temp_pdfs_2026-01-03/rmrb_2026-01-03_08.pdf

PDFæ–‡ä»¶åˆå¹¶å®Œæˆ: rmrb_2026-01-03.pdf
äººæ°‘æ—¥æŠ¥ 2026-01-03 PDFä¸‹è½½å’Œåˆå¹¶å®Œæˆï¼
</code></pre>
<p>æ ¹æ®æ—¥å¿—å¯è§ï¼š</p>
<ul>
<li>æŒ‰ç…§ç‰ˆé¢ä¾æ¬¡ä¸‹è½½pdfæ–‡ä»¶</li>
<li>åˆå¹¶æ‰€æœ‰ç‰ˆé¢æˆæŠ¥çº¸
å¦å¤–ä¿å­˜ç›®å½•ç­‰è‡ªå·±å¯ä»¥è°ƒæ•´ã€‚</li>
</ul>
<h3 data-id="heading-13">2.ä½¿ç”¨ERNIEå¤§æ¨¡å‹å¯¹ã€Šäººæ°‘æ—¥æŠ¥ã€‹è¿›è¡Œæ™ºèƒ½åˆ†æ</h3>
<h4 data-id="heading-14">2.1 è¯»å–PDF</h4>
<pre><code class="hljs">ä»PDFæ–‡ä»¶ä¸­æå–æ–‡æœ¬å†…å®¹ï¼Œ ä½¿ç”¨PyPDF2åº“è¯»å–PDFæ–‡ä»¶ï¼Œæå–æ‰€æœ‰é¡µé¢çš„æ–‡æœ¬å†…å®¹ï¼Œå„é¡µé¢æ–‡æœ¬ç”¨å•æ¢è¡Œç¬¦è¿æ¥ã€‚
</code></pre>
<h4 data-id="heading-15">2.2 ä½¿ç”¨ERNIEå¤§è¯­è¨€æ¨¡å‹å¯¹æ–‡æœ¬å†…å®¹è¿›è¡Œæ™ºèƒ½åˆ†æ</h4>
<p>ä¸»è¦å®Œæˆä¸‹åˆ—ä»»åŠ¡ï¼š</p>
<ul>
<li>1.æŠ¥çº¸ä¸­å‡ºç°çš„é‡å¤§äº‹ä»¶ï¼›</li>
<li>2.è¯„è®ºå‘˜æ–‡ç« ï¼›</li>
<li>3.é‡‘å¥ã€å…¸æ•…ã€å¤è¯­ï¼›</li>
<li>4.ä¼˜ç§€è¯ç»„ã€æ–°è¯ã€‚</li>
</ul>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># -*- coding: utf-8 -*-</span>
<span class="hljs-string">"""
äººæ°‘æ—¥æŠ¥PDFæ™ºèƒ½åˆ†æå·¥å…·
=========================

è¿™ä¸ªæ¨¡å—æä¾›äº†å¯¹äººæ°‘æ—¥æŠ¥PDFæ–‡ä»¶çš„æ™ºèƒ½åˆ†æåŠŸèƒ½ï¼Œèƒ½å¤Ÿï¼š
1. è‡ªåŠ¨æå–PDFæ–‡æœ¬å†…å®¹
2. ä½¿ç”¨å¤§è¯­è¨€æ¨¡å‹è¿›è¡Œæ™ºèƒ½åˆ†æ
3. ç”Ÿæˆç»“æ„åŒ–çš„åˆ†ææŠ¥å‘Š

ä¸»è¦åŠŸèƒ½ï¼š
- æå–äººæ°‘æ—¥æŠ¥PDFæ–‡æœ¬
- AIæ™ºèƒ½åˆ†æè¯†åˆ«é‡å¤§äº‹ä»¶ã€è¯„è®ºæ–‡ç« ã€é‡‘å¥å…¸æ•…ã€ä¼˜ç§€è¯ç»„
- ç”ŸæˆMarkdownæ ¼å¼çš„åˆ†ææŠ¥å‘Š
- è‡ªåŠ¨æŒ‰æ—¥æœŸå‘½åè¾“å‡ºæ–‡ä»¶

ä¾èµ–åº“ï¼š
- PyPDF2: PDFæ–‡ä»¶è¯»å–
- OpenAI: å¤§æ¨¡å‹APIè°ƒç”¨
- datetime: æ—¥æœŸæ—¶é—´å¤„ç†

"""</span>

<span class="hljs-keyword">from</span> datetime <span class="hljs-keyword">import</span> datetime
<span class="hljs-keyword">from</span> openai <span class="hljs-keyword">import</span> OpenAI
<span class="hljs-keyword">from</span> PyPDF2 <span class="hljs-keyword">import</span> PdfReader

<span class="hljs-comment"># è·å–å½“å‰æ—¥æœŸå­—ç¬¦ä¸²ï¼Œç”¨äºæ–‡ä»¶åå‘½å</span>
date_str = datetime.now().strftime(<span class="hljs-string">'%Y-%m-%d'</span>)


<span class="hljs-keyword">def</span> <span class="hljs-title function_">read_pdf</span>(<span class="hljs-params">pdf_path</span>):
    <span class="hljs-string">"""
    ä»PDFæ–‡ä»¶ä¸­æå–æ–‡æœ¬å†…å®¹
    
    ä½¿ç”¨PyPDF2åº“è¯»å–PDFæ–‡ä»¶ï¼Œæå–æ‰€æœ‰é¡µé¢çš„æ–‡æœ¬å†…å®¹ï¼Œ
    å„é¡µé¢æ–‡æœ¬ç”¨å•æ¢è¡Œç¬¦è¿æ¥ã€‚
    
    Args:
        pdf_path (str): PDFæ–‡ä»¶çš„å®Œæ•´è·¯å¾„
        
    Returns:
        str: ä»PDFä¸­æå–çš„æ–‡æœ¬å†…å®¹ï¼Œå„é¡µé¢ä¹‹é—´ç”¨æ¢è¡Œç¬¦åˆ†éš”
        
    Note:
        è¿™ä¸ªå‡½æ•°ä¸readpdf.pyä¸­çš„read_pdfå‡½æ•°ç±»ä¼¼ï¼Œä½†è¿æ¥ç¬¦ä¸åŒ
        è¿™é‡Œä½¿ç”¨å•æ¢è¡Œç¬¦ï¼Œé€‚åˆåç»­çš„AIåˆ†æå¤„ç†
    """</span>
    <span class="hljs-comment"># åˆ›å»ºPDFé˜…è¯»å™¨å¯¹è±¡å¹¶è¯»å–æ–‡ä»¶</span>
    reader = PdfReader(pdf_path)
    
    <span class="hljs-comment"># æå–æ‰€æœ‰é¡µé¢çš„æ–‡æœ¬å†…å®¹</span>
    <span class="hljs-comment"># page.extract_text() å¯èƒ½è¿”å›Noneï¼Œä½¿ç”¨or ""å¤„ç†ç©ºé¡µé¢</span>
    <span class="hljs-comment"># å„é¡µé¢æ–‡æœ¬ç”¨æ¢è¡Œç¬¦è¿æ¥ï¼Œä¿æŒä¸€å®šåˆ†éš”ä½†æ¯”åŒæ¢è¡Œç¬¦æ›´ç´§å‡‘</span>
    <span class="hljs-keyword">return</span> <span class="hljs-string">"\n"</span>.join(page.extract_text() <span class="hljs-keyword">or</span> <span class="hljs-string">""</span> <span class="hljs-keyword">for</span> page <span class="hljs-keyword">in</span> reader.pages)


<span class="hljs-keyword">def</span> <span class="hljs-title function_">extract_info</span>(<span class="hljs-params">content</span>):
    <span class="hljs-string">"""
    ä½¿ç”¨å¤§è¯­è¨€æ¨¡å‹å¯¹æ–‡æœ¬å†…å®¹è¿›è¡Œæ™ºèƒ½åˆ†æ
    
    è¯¥å‡½æ•°è°ƒç”¨ç™¾åº¦AI Studioçš„ernie-4.5-turbo-vlæ¨¡å‹ï¼Œ
    å¯¹è¾“å…¥çš„æ–‡æœ¬å†…å®¹è¿›è¡Œç»“æ„åŒ–åˆ†æï¼Œè¯†åˆ«å’Œåˆ†ç±»å„ç§ä¿¡æ¯ã€‚
    
    Args:
        content (str): å¾…åˆ†æçš„æ–‡æœ¬å†…å®¹ï¼ˆé€šå¸¸æ˜¯ä»PDFæå–çš„æŠ¥çº¸å†…å®¹ï¼‰
        
    Returns:
        str: AIåˆ†æç”Ÿæˆçš„ç»“æ„åŒ–æ–‡æœ¬å†…å®¹
        
    Note:
        - ä½¿ç”¨æµå¼è¾“å‡ºï¼Œå®æ—¶æ˜¾ç¤ºAIæ€è€ƒè¿‡ç¨‹å’Œåˆ†æç»“æœ
        - åˆ†æç»“æœåŒ…å«é‡å¤§äº‹ä»¶ã€è¯„è®ºæ–‡ç« ã€é‡‘å¥å…¸æ•…ã€ä¼˜ç§€è¯ç»„å››ä¸ªç»´åº¦
        - æ¨¡å‹é…ç½®ä¸ºä½æ¸©åº¦(0.2)ä»¥ç¡®ä¿è¾“å‡ºç¨³å®šæ€§
    """</span>
    <span class="hljs-comment"># åˆå§‹åŒ–OpenAIå®¢æˆ·ç«¯</span>
    <span class="hljs-comment"># æ³¨æ„ï¼šAPIå¯†é’¥åº”ä»ç¯å¢ƒå˜é‡æˆ–é…ç½®æ–‡ä»¶è·å–ï¼Œé¿å…ç¡¬ç¼–ç </span>
    client = OpenAI(
        <span class="hljs-comment"># APIå¯†é’¥é…ç½® - ç”Ÿäº§ç¯å¢ƒä¸­åº”ä½¿ç”¨ç¯å¢ƒå˜é‡xxxxxxxxxxxxxxxxxxxxxxxxxxxxxx</span>
        api_key=<span class="hljs-string">"ç”Ÿäº§ç¯å¢ƒä¸­åº”ä½¿ç”¨ç¯å¢ƒå˜é‡xxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"</span>,
        <span class="hljs-comment"># ç™¾åº¦AI Studioå¤§æ¨¡å‹APIæœåŠ¡åœ°å€</span>
        base_url=<span class="hljs-string">"https://aistudio.baidu.com/llm/lmapi/v3"</span>,
    )

    <span class="hljs-comment"># åˆ›å»ºèŠå¤©å®Œæˆè¯·æ±‚</span>
    chat_completion = client.chat.completions.create(
        <span class="hljs-comment"># ä½¿ç”¨ernie-4.5-turbo-vlæ¨¡å‹è¿›è¡Œå¤šæ¨¡æ€åˆ†æ</span>
        model=<span class="hljs-string">"ernie-4.5-turbo-vl"</span>,
        
        <span class="hljs-comment"># æ„å»ºå¯¹è¯æ¶ˆæ¯</span>
        messages=[
            {
                <span class="hljs-string">"role"</span>: <span class="hljs-string">"system"</span>,
                <span class="hljs-string">"content"</span>: (
                    <span class="hljs-string">"è¯¥å†…å®¹æ˜¯æŠ¥çº¸pdfè¯†åˆ«çš„ï¼Œå†…å®¹è¿ç»­æ€§å¯èƒ½æœ‰é—®é¢˜ï¼Œè¯·ä½ ç†é¡ºåï¼Œ"</span>
                    <span class="hljs-string">"ç„¶åè¯¦å°½å®Œæˆä¸‹åˆ—ä»»åŠ¡ï¼Œè¦è¯¦ç»†ï¼Œå°½å¯èƒ½å¤šï¼š"</span>
                    <span class="hljs-string">"1.æŠ¥çº¸ä¸­å‡ºç°çš„é‡å¤§äº‹ä»¶ï¼›"</span>
                    <span class="hljs-string">"2.è¯„è®ºå‘˜æ–‡ç« ï¼›"</span>
                    <span class="hljs-string">"3.é‡‘å¥ã€å…¸æ•…ã€å¤è¯­ï¼›"</span>
                    <span class="hljs-string">"4.ä¼˜ç§€è¯ç»„ã€æ–°è¯ã€‚"</span>
                ),
            },
            {<span class="hljs-string">"role"</span>: <span class="hljs-string">"user"</span>, <span class="hljs-string">"content"</span>: content},
        ],
        
        <span class="hljs-comment"># å¯ç”¨æµå¼è¾“å‡ºï¼Œå®æ—¶æ˜¾ç¤ºç»“æœ</span>
        stream=<span class="hljs-literal">True</span>,
        
        <span class="hljs-comment"># é¢å¤–çš„æ¨¡å‹å‚æ•°é…ç½®</span>
        extra_body={
            <span class="hljs-string">"penalty_score"</span>: <span class="hljs-number">1</span>,      <span class="hljs-comment"># é‡å¤æƒ©ç½šåˆ†æ•°ï¼Œæ§åˆ¶å†…å®¹é‡å¤åº¦</span>
            <span class="hljs-string">"enable_thinking"</span>: <span class="hljs-literal">True</span>  <span class="hljs-comment"># å¯ç”¨æ€è€ƒæ¨¡å¼ï¼Œæé«˜åˆ†æè´¨é‡</span>
        },
        
        <span class="hljs-comment"># æ¨¡å‹ç”Ÿæˆå‚æ•°</span>
        max_completion_tokens=<span class="hljs-number">12000</span>,  <span class="hljs-comment"># æœ€å¤§è¾“å‡ºtokenæ•°ï¼Œç¡®ä¿è¯¦ç»†åˆ†æ</span>
        temperature=<span class="hljs-number">0.2</span>,              <span class="hljs-comment"># æ¸©åº¦å‚æ•°ï¼Œä½æ¸©åº¦ä¿è¯è¾“å‡ºç¨³å®šæ€§</span>
        top_p=<span class="hljs-number">0.8</span>,                    <span class="hljs-comment"># æ ¸é‡‡æ ·å‚æ•°</span>
        frequency_penalty=<span class="hljs-number">0</span>,          <span class="hljs-comment"># é¢‘ç‡æƒ©ç½šï¼Œé¿å…é‡å¤å†…å®¹</span>
        presence_penalty=<span class="hljs-number">0</span>            <span class="hljs-comment"># å­˜åœ¨æƒ©ç½šï¼Œé¼“åŠ±æ–°è¯é¢˜</span>
    )

    <span class="hljs-comment"># å¤„ç†æµå¼è¾“å‡º</span>
    mycontent = <span class="hljs-string">""</span>
    <span class="hljs-keyword">for</span> chunk <span class="hljs-keyword">in</span> chat_completion:
        <span class="hljs-comment"># æ£€æŸ¥æ˜¯å¦æœ‰æœ‰æ•ˆçš„é€‰æ‹©ç»“æœ</span>
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> chunk.choices <span class="hljs-keyword">or</span> <span class="hljs-built_in">len</span>(chunk.choices) == <span class="hljs-number">0</span>:
            <span class="hljs-keyword">continue</span>
            
        choice = chunk.choices[<span class="hljs-number">0</span>]
        
        <span class="hljs-comment"># å¤„ç†AIæ€è€ƒè¿‡ç¨‹å†…å®¹ï¼ˆå¦‚æœå¯ç”¨æ€è€ƒæ¨¡å¼ï¼‰</span>
        <span class="hljs-keyword">if</span> <span class="hljs-built_in">hasattr</span>(choice.delta, <span class="hljs-string">"reasoning_content"</span>) <span class="hljs-keyword">and</span> choice.delta.reasoning_content:
            <span class="hljs-comment"># å®æ—¶æ˜¾ç¤ºAIçš„æ€è€ƒè¿‡ç¨‹</span>
            <span class="hljs-built_in">print</span>(choice.delta.reasoning_content, end=<span class="hljs-string">""</span>, flush=<span class="hljs-literal">True</span>)
            
        <span class="hljs-comment"># å¤„ç†å®é™…çš„åˆ†æå†…å®¹</span>
        <span class="hljs-keyword">elif</span> <span class="hljs-built_in">hasattr</span>(choice.delta, <span class="hljs-string">"content"</span>) <span class="hljs-keyword">and</span> choice.delta.content:
            <span class="hljs-comment"># å®æ—¶æ˜¾ç¤ºåˆ†æç»“æœ</span>
            <span class="hljs-built_in">print</span>(choice.delta.content, end=<span class="hljs-string">""</span>, flush=<span class="hljs-literal">True</span>)
            <span class="hljs-comment"># ç´¯ç§¯å®Œæ•´å†…å®¹ç”¨äºè¿”å›</span>
            mycontent = mycontent + choice.delta.content
            
    <span class="hljs-comment"># è¿”å›å®Œæ•´çš„åˆ†æç»“æœ</span>
    <span class="hljs-keyword">return</span> mycontent


<span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():
    <span class="hljs-string">"""
    ä¸»å‡½æ•° - ç¨‹åºæ‰§è¡Œå…¥å£
    
    æ‰§è¡Œå®Œæ•´çš„PDFåˆ†ææµç¨‹ï¼š
    1. æ„å»ºå½“æ—¥äººæ°‘æ—¥æŠ¥PDFæ–‡ä»¶å
    2. è¯»å–PDFæ–‡æœ¬å†…å®¹
    3. ä½¿ç”¨AIè¿›è¡Œæ™ºèƒ½åˆ†æ
    4. ä¿å­˜åˆ†æç»“æœåˆ°Markdownæ–‡ä»¶
    """</span>
    <span class="hljs-keyword">try</span>:
        <span class="hljs-comment"># æ„å»ºå½“æ—¥äººæ°‘æ—¥æŠ¥PDFæ–‡ä»¶å (æ ¼å¼: rmrb_YYYY-MM-DD.pdf)</span>
        rmrb_pdf_file = <span class="hljs-string">f"rmrb_<span class="hljs-subst">{date_str}</span>.pdf"</span>
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ­£åœ¨è¯»å–PDFæ–‡ä»¶: <span class="hljs-subst">{rmrb_pdf_file}</span>"</span>)
        
        <span class="hljs-comment"># æå–PDFæ–‡æœ¬å†…å®¹</span>
        content = read_pdf(rmrb_pdf_file)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"PDFæ–‡æœ¬æå–å®Œæˆï¼Œå†…å®¹é•¿åº¦: <span class="hljs-subst">{<span class="hljs-built_in">len</span>(content)}</span> å­—ç¬¦"</span>)
        
        <span class="hljs-comment"># ä½¿ç”¨AIè¿›è¡Œæ™ºèƒ½åˆ†æ</span>
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"\nå¼€å§‹AIåˆ†æ..."</span>)
        markdown_note = extract_info(content)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"\nAIåˆ†æå®Œæˆ"</span>)
        
        <span class="hljs-comment"># é‡æ–°è·å–æ—¥æœŸå­—ç¬¦ä¸²ï¼ˆç¡®ä¿æ–‡ä»¶åæ—¥æœŸå‡†ç¡®ï¼‰</span>
        current_date = datetime.now().strftime(<span class="hljs-string">"%Y-%m-%d"</span>)
        output_filename = <span class="hljs-string">f"äººæ°‘æ—¥æŠ¥_<span class="hljs-subst">{current_date}</span>.md"</span>
        
        <span class="hljs-comment"># ä¿å­˜åˆ†æç»“æœåˆ°Markdownæ–‡ä»¶</span>
        <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(output_filename, <span class="hljs-string">"w"</span>, encoding=<span class="hljs-string">"utf-8"</span>) <span class="hljs-keyword">as</span> file:
            <span class="hljs-built_in">print</span>(markdown_note, file=file)
            
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\nåˆ†æç»“æœå·²ä¿å­˜åˆ°: <span class="hljs-subst">{output_filename}</span>"</span>)
        
    <span class="hljs-keyword">except</span> FileNotFoundError:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"é”™è¯¯: æ‰¾ä¸åˆ°æ–‡ä»¶ '<span class="hljs-subst">{rmrb_pdf_file}</span>'"</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"è¯·ç¡®ä¿å½“æ—¥çš„äººæ°‘æ—¥æŠ¥PDFæ–‡ä»¶å­˜åœ¨ä¸”å‘½åæ ¼å¼æ­£ç¡®"</span>)
        
    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å¤„ç†è¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯: <span class="hljs-subst">{<span class="hljs-built_in">str</span>(e)}</span>"</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"è¯·æ£€æŸ¥ç½‘ç»œè¿æ¥å’ŒAPIé…ç½®"</span>)
</code></pre>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment">#å¼€å§‹å¯¹æŠ¥çº¸å†…å®¹åˆ†æ</span>

<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    main()
</code></pre>
<h2 data-id="heading-16">å››ã€æŠ¥çº¸æ‘˜è¦ç¤ºä¾‹</h2>
<h4 data-id="heading-17">ä¸€ã€æŠ¥çº¸ä¸­å‡ºç°çš„é‡å¤§äº‹ä»¶</h4>
<ol>
<li>
<p><strong>ç»æµæ•°æ®å‘å¸ƒ</strong></p>
<ul>
<li>2025å¹´æˆ‘å›½å…¨å¹´ç”µå½±ç¥¨æˆ¿è¾¾518.32äº¿å…ƒï¼ŒåŒæ¯”å¢é•¿21.95%ï¼Œå›½äº§å½±ç‰‡å æ¯”79.67%ã€‚</li>
<li>å…ƒæ—¦å‡æœŸé¦–æ—¥ï¼ˆ2026å¹´1æœˆ1æ—¥ï¼‰å…¨å›½è·¨åŒºåŸŸäººå‘˜æµåŠ¨é‡è¶…2äº¿äººæ¬¡ï¼ŒåŒæ¯”å¢é•¿20.3%ã€‚</li>
</ul>
</li>
<li>
<p><strong>ç§‘æŠ€ä¸èƒ½æºæˆå°±</strong></p>
<ul>
<li>â€œåé¾™ä¸€å·â€æ¼³å·æ ¸ç”µ2å·æœºç»„æŠ•å…¥å•†ä¸šè¿è¡Œï¼Œæ ‡å¿—æ¼³å·æ ¸ç”µä¸€æœŸå·¥ç¨‹å…¨é¢æŠ•äº§ï¼Œå•å°æœºç»„å¹´å‘ç”µé‡çº¦100äº¿åƒç“¦æ—¶ã€‚</li>
<li>â€œæ·±æµ·ä¸€å·â€æ°”ç”°2025å¹´æ²¹æ°”æ€»äº§é‡çªç ´450ä¸‡å¨ï¼Œä¸é™†åœ°ä¸­å‹æ²¹ç”°è§„æ¨¡ç›¸å½“ã€‚</li>
</ul>
</li>
<li>
<p><strong>æ”¿ç­–è°ƒæ•´ä¸ç»æµæªæ–½</strong></p>
<ul>
<li>å›½å®¶å‘å±•æ”¹é©å§”ä¼˜åŒ–â€œä¸¤æ–°â€æ”¿ç­–ï¼ˆè®¾å¤‡æ›´æ–°ä¸æ¶ˆè´¹å“ä»¥æ—§æ¢æ–°ï¼‰ï¼Œæ‰©å¤§èµ„é‡‘æ”¯æŒèŒƒå›´ï¼Œé™ä½ä¼ä¸šç”³æŠ¥é—¨æ§›ã€‚</li>
<li>2026å¹´æå‰æ‰¹â€œä¸¤é‡â€å»ºè®¾é¡¹ç›®æ¸…å•ä¸‹è¾¾ï¼Œçº¦2950äº¿å…ƒæŠ•èµ„èšç„¦åŸå¸‚åœ°ä¸‹ç®¡ç½‘ã€é«˜æ ‡å‡†å†œç”°ç­‰é¢†åŸŸã€‚</li>
</ul>
</li>
<li>
<p><strong>å›½é™…åˆä½œä¸å¤–äº¤</strong></p>
<ul>
<li>å¤šå›½é‡ç”³åšæŒä¸€ä¸ªä¸­å›½åŸåˆ™ï¼Œåå¯¹å¹²æ¶‰ä¸­å›½å†…æ”¿ï¼ŒåŒ…æ‹¬å·´åŸºæ–¯å¦ã€å­ŸåŠ æ‹‰å›½ã€å‰å¸ƒæç­‰ã€‚</li>
<li>ä¸­å›½åŠ©åŠ›éæ´²æ•°å­—åŒ–è½¬å‹ï¼Œå¦‚æ‰¿å»ºåšèŒ¨ç“¦çº³å›½å®¶æ•°æ®ä¸­å¿ƒã€åŠ©åŠ›è‚¯å°¼äºšç”µå•†å‘å±•ï¼ˆKilimallå¹³å°ï¼‰ç­‰ã€‚</li>
</ul>
</li>
<li>
<p><strong>ç¤¾ä¼šæ°‘ç”Ÿä¸ä¹¡æ‘æŒ¯å…´</strong></p>
<ul>
<li>å‰æ—çœé•‡èµ‰å¿åˆ›ä¸šæ‘é€šè¿‡ç›ç¢±åœ°æ”¹è‰¯å®ç°æ°´ç¨»ä¸°æ”¶ï¼Œæ‰“é€ â€œé•‡èµ‰å¤§ç±³â€å“ç‰Œï¼Œæ‘é›†ä½“æ”¶å…¥çªç ´50ä¸‡å…ƒã€‚</li>
<li>æµ™æ±ŸèˆŸå±±å®æ–½â€œå°å²›è¿ã€å¤§å²›å»ºâ€å·¥ç¨‹ï¼Œæ”¹å–„æµ·å²›è€äººå…»è€æ¡ä»¶ï¼ŒåŒæ—¶ç›˜æ´»å°å²›èµ„æºå‘å±•ç‰¹è‰²äº§ä¸šã€‚</li>
</ul>
</li>
<li>
<p><strong>æ–‡åŒ–ä¸æ³•æ²»å»ºè®¾</strong></p>
<ul>
<li>ä¸­å›½æ³•æ²»è®ºå›èšç„¦â€œåäº”äº”â€æ³•æ²»ä¿éšœï¼Œå¼ºè°ƒæ„å»ºæ³•å­¦è‡ªä¸»çŸ¥è¯†ä½“ç³»ï¼Œæ¨åŠ¨æ³•æ²»èµ‹èƒ½é«˜è´¨é‡å‘å±•ã€‚</li>
<li>ã€Šå“ªå’ä¹‹é­”ç«¥é—¹æµ·ã€‹ç¥¨æˆ¿ç ´154äº¿å…ƒï¼Œæ¨åŠ¨ä¸­å›½ç”µå½±å·¥ä¸šæ°´å¹³æå‡ã€‚</li>
</ul>
</li>
</ol>
<h4 data-id="heading-18">äºŒã€è¯„è®ºå‘˜æ–‡ç« </h4>
<ol>
<li>
<p><strong>ã€Šç»§ç»­å›ç­”å¥½å»¶å®‰â€œçª‘æ´ä¹‹é—®â€ã€‹</strong></p>
<ul>
<li>æ ¸å¿ƒè§‚ç‚¹ï¼šåšæŒè‡ªæˆ‘é©å‘½ï¼Œä¿æŒå…šåŒäººæ°‘è¡€è‚‰è”ç³»ï¼Œé€šè¿‡ä»ä¸¥æ²»å…šå‡€åŒ–æ”¿æ²»ç”Ÿæ€ï¼Œç¡®ä¿â€œåäº”äº”â€è‰¯å¥½å¼€å±€ã€‚</li>
<li>å…³é”®è®ºæ®ï¼šä»â€œè®©äººæ°‘ç›‘ç£æ”¿åºœâ€åˆ°â€œè‡ªæˆ‘é©å‘½â€ï¼Œå†å²å‘¨æœŸç‡çš„ä¸¤ä¸ªç­”æ¡ˆå½°æ˜¾å…šä¸äººæ°‘é£é›¨åŒèˆŸã€‚</li>
</ul>
</li>
<li>
<p><strong>ã€Šä¼˜åŒ–å®æ–½â€œä¸¤æ–°â€æ”¿ç­–ï¼Œæ¨åŠ¨é«˜è´¨é‡å‘å±•ã€‹</strong></p>
<ul>
<li>æ ¸å¿ƒè§‚ç‚¹ï¼šé€šè¿‡èµ„é‡‘åˆ†é…ä¼˜åŒ–ã€ç›‘ç®¡å¼ºåŒ–å’ŒèŒƒå›´æ‹“å±•ï¼Œæå‡æ”¿ç­–æƒ åŠé¢ï¼Œæ”¯æŒä¼ä¸šè®¾å¤‡æ›´æ–°ä¸æ¶ˆè´¹å‡çº§ã€‚</li>
<li>å…³é”®è®ºæ®ï¼š2025å¹´æ¶ˆè´¹å“ä»¥æ—§æ¢æ–°æš´éœ²é—®é¢˜ï¼Œ2026å¹´é’ˆå¯¹æ€§ä¼˜åŒ–ï¼Œå¦‚å¢åŠ è€æ—§å°åŒºç”µæ¢¯æ”¹é€ ã€å•†ä¸šç»¼åˆä½“è®¾å¤‡æ›´æ–°ç­‰ã€‚</li>
</ul>
</li>
<li>
<p><strong>ã€Šä¸­å›½åŠ©åŠ›éæ´²æ•°å­—åŒ–è½¬å‹ã€‹</strong></p>
<ul>
<li>æ ¸å¿ƒè§‚ç‚¹ï¼šé€šè¿‡æ•°å­—åŸºå»ºã€ç”µå•†åŸ¹è‚²ã€äººæ‰åŸ¹è®­ï¼Œä¸­å›½åŠ©åŠ›éæ´²å¼¥åˆæ•°å­—é¸¿æ²Ÿï¼Œæ¨åŠ¨å¯æŒç»­å‘å±•ã€‚</li>
<li>å…³é”®è®ºæ®ï¼šåšèŒ¨ç“¦çº³æ•°æ®ä¸­å¿ƒã€è‚¯å°¼äºšKilimallå¹³å°ã€å¢æ—ºè¾¾é²ç­å·¥åŠç­‰æ¡ˆä¾‹ä½“ç°ä¸­éåˆä½œæˆæœã€‚</li>
</ul>
</li>
</ol>
<h4 data-id="heading-19">ä¸‰ã€é‡‘å¥ã€å…¸æ•…ã€å¤è¯­</h4>
<ol>
<li>
<p><strong>é¢†å¯¼äººé‡‘å¥</strong></p>
<ul>
<li>â€œå…šå…´æ–¹èƒ½å›½å¼ºã€‚â€ï¼ˆæ–°å¹´è´ºè¯ï¼‰</li>
<li>â€œæˆ‘å›½æˆä¸ºåˆ›æ–°åŠ›ä¸Šå‡æœ€å¿«çš„ç»æµä½“ä¹‹ä¸€ã€‚â€ï¼ˆ2026å¹´æ–°å¹´è´ºè¯ï¼‰</li>
<li>â€œä¿¡å¿ƒï¼Œæ¥è‡ªç»æµå®åŠ›çš„æ‹¾çº§è€Œä¸Šã€‚â€ï¼ˆæ–°å¹´è´ºè¯è§£è¯»ï¼‰</li>
</ul>
</li>
<li>
<p><strong>å…¸æ•…ä¸å¤è¯­</strong></p>
<ul>
<li>â€œæ°‘æƒŸé‚¦æœ¬â€ï¼ˆã€Šå°šä¹¦ã€‹ï¼‰ï¼Œç”¨äºé˜é‡Šâ€œä»¥äººæ°‘ä¸ºä¸­å¿ƒâ€çš„æ²»ç†ç†å¿µã€‚</li>
<li>â€œå››æ°´å½’å ‚â€ï¼ˆä¼ ç»Ÿå»ºç­‘æ™ºæ…§ï¼‰ï¼Œè±¡å¾æ°‘å±…æ–‡åŒ–ä¸­â€œèšè´¢èšæ°”â€çš„ç”Ÿæ€è®¾è®¡ã€‚</li>
<li>â€œé€æ¢¦æ˜Ÿè¾°å¤§æµ·â€ï¼Œå½¢å®¹ç§‘æŠ€å‘å±•çš„è¿œå¤§å¿—å‘ã€‚</li>
</ul>
</li>
<li>
<p><strong>æ–‡åŒ–å¼•ç”¨</strong></p>
<ul>
<li>ä¾—æ—æ¬¾çº¦â€œä¸ä¼šå”±æ­Œéš¾å¨¶äº²â€ï¼Œä½“ç°éé—æ–‡åŒ–ä¼ æ‰¿ä¸ç¤¾åŒºæ²»ç†ç»“åˆã€‚</li>
<li>â€œé£ç‰©é•¿å®œæ”¾çœ¼é‡â€ï¼Œç”¨äºé¼“åŠ±é•¿æœŸä¸»ä¹‰å‘å±•è§‚ã€‚</li>
</ul>
</li>
</ol>
<h4 data-id="heading-20">å››ã€ä¼˜ç§€è¯ç»„ã€æ–°è¯</h4>
<ol>
<li>
<p><strong>æ”¿ç­–æœ¯è¯­</strong></p>
<ul>
<li><strong>â€œä¸¤æ–°â€æ”¿ç­–</strong>ï¼šè®¾å¤‡æ›´æ–°ä¸æ¶ˆè´¹å“ä»¥æ—§æ¢æ–°ã€‚</li>
<li><strong>â€œä¸¤é‡â€å»ºè®¾</strong>ï¼šé‡å¤§æˆ˜ç•¥ã€é‡ç‚¹é¢†åŸŸå®‰å…¨èƒ½åŠ›å»ºè®¾ã€‚</li>
<li><strong>â€œæ–°è´¨ç”Ÿäº§åŠ›â€</strong>ï¼šä»¥åˆ›æ–°é©±åŠ¨çš„é«˜è´¨é‡å‘å±•åŠ¨èƒ½ã€‚</li>
</ul>
</li>
<li>
<p><strong>ç»æµä¸ç§‘æŠ€æ–°è¯</strong></p>
<ul>
<li><strong>â€œåœ°ç†ä¿¡æ¯äº§ä¸šâ€</strong>ï¼šè‡ªåŠ¨é©¾é©¶åœ°å›¾æ ‡å‡†ä½“ç³»ã€å®æ™¯ä¸‰ç»´ä¸­å›½å»ºè®¾ã€‚</li>
<li><strong>â€œåŒä¸€èµ·è·‘çº¿â€</strong>ï¼šå½¢å®¹æœªæ¥äº§ä¸šå¸ƒå±€çš„å…¬å¹³ç«äº‰ç¯å¢ƒã€‚</li>
</ul>
</li>
<li>
<p><strong>ç¤¾ä¼šæ°‘ç”Ÿè¯æ±‡</strong></p>
<ul>
<li><strong>â€œå°å²›è¿ã€å¤§å²›å»ºâ€</strong>ï¼šæµ·å²›ä¹¡æ‘æŒ¯å…´æ¨¡å¼ã€‚</li>
<li><strong>â€œç›ç¢±åœ°ä¸Šåˆ›ä¸šâ€</strong>ï¼šé€šè¿‡ç§‘æŠ€æ”¹è‰¯å®ç°å†œä¸šçªç ´ã€‚</li>
</ul>
</li>
<li>
<p><strong>æ–‡åŒ–ä¸å›½é™…ä¼ æ’­</strong></p>
<ul>
<li><strong>â€œæ–‡åŒ–å‡ºæµ·â€˜æ–°ä¸‰æ ·â€™â€</strong>ï¼šç½‘æ–‡ã€ç½‘å‰§ã€ç½‘æ¸¸æˆä¸ºæ–‡åŒ–è¾“å‡ºæ–°æ¸ é“ã€‚</li>
<li><strong>â€œæœ€ä½³æ—…æ¸¸ä¹¡æ‘â€</strong>ï¼šé»„å²—æ‘ç­‰é€šè¿‡æ–‡æ—…èåˆå®ç°ä¹¡æ‘æŒ¯å…´ã€‚</li>
</ul>
</li>
<li>
<p><strong>æ³•æ²»ä¸æ²»ç†æ¦‚å¿µ</strong></p>
<ul>
<li><strong>â€œå…¨å›½ç»Ÿä¸€å¤§å¸‚åœºâ€</strong>ï¼šç ´é™¤åœ°æ–¹å£å’ï¼Œä¿ƒè¿›è¦ç´ è‡ªç”±æµåŠ¨ã€‚</li>
<li><strong>â€œæ³•æ²»èµ‹èƒ½é«˜è´¨é‡å‘å±•â€</strong>ï¼šé€šè¿‡ç«‹æ³•ä¿éšœç»æµè½¬å‹ã€‚</li>
</ul>
</li>
</ol>
<hr/>
<p>ä»¥ä¸Šå†…å®¹åŸºäºæŠ¥çº¸PDFè¯†åˆ«ææ–™æ•´ç†ï¼Œæ¶µç›–æ—¶æ”¿ã€ç»æµã€ç§‘æŠ€ã€æ–‡åŒ–ç­‰å¤šé¢†åŸŸï¼Œä½“ç°ä¸­å›½åœ¨æ”¿ç­–ã€åˆ›æ–°ã€æ°‘ç”ŸåŠå›½é™…åˆä½œä¸­çš„åŠ¨æ€ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è¿˜åœ¨æ‰‹æ“æµç¨‹å›¾ï¼ŸDeepSeek+Draw.ioç‹ç‚¸ç»„åˆï¼Œä¸€å¥è¯ç§’å‡ºå¯ç¼–è¾‘æºæ–‡ä»¶ï¼]]></title>    <link>https://juejin.cn/post/7590309337861161001</link>    <guid>https://juejin.cn/post/7590309337861161001</guid>    <pubDate>2026-01-03T11:24:34.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7590309337861161001" data-draft-id="7590654280900100139" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è¿˜åœ¨æ‰‹æ“æµç¨‹å›¾ï¼ŸDeepSeek+Draw.ioç‹ç‚¸ç»„åˆï¼Œä¸€å¥è¯ç§’å‡ºå¯ç¼–è¾‘æºæ–‡ä»¶ï¼"/> <meta itemprop="keywords" content="å¼€æº,AIGC,DeepSeek"/> <meta itemprop="datePublished" content="2026-01-03T11:24:34.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åç«¯å°è‚¥è‚ "/> <meta itemprop="url" content="https://juejin.cn/user/2966945320667536"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è¿˜åœ¨æ‰‹æ“æµç¨‹å›¾ï¼ŸDeepSeek+Draw.ioç‹ç‚¸ç»„åˆï¼Œä¸€å¥è¯ç§’å‡ºå¯ç¼–è¾‘æºæ–‡ä»¶ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2966945320667536/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åç«¯å°è‚¥è‚ 
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-03T11:24:34.000Z" title="Sat Jan 03 2026 11:24:34 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯å°è‚¥è‚ ï¼ä»Šå¤©ç»™å¤§å®¶åˆ†äº«ä¸€ä¸ªä¸€å¥è¯ç”Ÿæˆæµç¨‹å›¾çš„AIå·¥å…·ï¼Œæ”¯æŒåœ¨çº¿ç¼–è¾‘ï¼Œä½¿ç”¨æ–¹æ³•ä¹Ÿå¾ˆç®€å•ï¼Œ5åˆ†é’Ÿå³å¯å®Œæˆéƒ¨ç½²è½»æ¾ä¸Šæ‰‹ï¼Œæ„Ÿå…´è¶£å°±é€Ÿé€Ÿç ä½å“¦~</p>
<h2 data-id="heading-0">1. æ•ˆæœå±•ç¤º</h2>
<p>æ˜¨å¤©å‰ªè¾‘AIæ¼«å‰§çš„ç©ºéš™åˆ·äº†ä¸€ä¸‹AIèµ„è®¯ï¼ˆè¶…ç»ä¸ç»æ„å±•ç¤ºæˆ‘åœ¨åšçš„AIæ¼«å‰§ï¼Œå˜»å˜»ï¼‰ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6335589a7fd14ae089d1ead42f1d9018~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768044273&amp;x-signature=gUwA1YzYm6UiM4H1%2BTdI6WYPmOc%3D" alt="" loading="lazy"/></p>
<p>å¶ç„¶å‘ç°äº†ä¸€ä¸ªè®©æˆ‘çœ¼å‰ä¸€äº®çš„é¡¹ç›®â€”<code>next-ai-draw-io</code>ã€‚å’±ä»¬çš„è€ç²‰åº”è¯¥è®°å¾—ï¼Œä¹‹å‰æˆ‘åˆ†äº«è¿‡ä¸€ç¯‡<a href="https://link.juejin.cn?target=https%3A%2F%2Fpa23ntdf1gf.feishu.cn%2Fwiki%2FVZjZwnhLcimViBkJTVQcAipQnFR%3Ffrom%3Dfrom_copylink" target="_blank" title="https://pa23ntdf1gf.feishu.cn/wiki/VZjZwnhLcimViBkJTVQcAipQnFR?from=from_copylink" ref="nofollow noopener noreferrer">è®©Mermaidå¬æ‡‚äººè¯ï¼šç”¨Cozeç©ºé—´+MCPä¸€å¥è¯æå®šæ‰€æœ‰ä¸šåŠ¡å›¾</a>ã€‚é‚£ä¸ªæ–¹æ¡ˆè™½ç„¶å¥½ç”¨ï¼Œä½†æ˜¯æœ‰ä¸ªç¼ºç‚¹å°±æ˜¯ä¸èƒ½åœ¨çº¿ä¿®æ”¹ï¼Œè€Œä»Šå¤©è¿™ä¸ªå·¥å…·ï¼Œ<strong>ç›´æ¥æŠŠAIåµŒå…¥åˆ°äº†æˆ‘ä»¬æœ€ç†Ÿæ‚‰çš„ draw.io é‡Œï¼</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/92a4f502842b4c7bb58724a5d17cd7bc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768044273&amp;x-signature=73rXssncvw2GSjH%2F2Z5z1vpqXXA%3D" alt="" loading="lazy"/></p>
<p>ä»¥å‰ä¸Šç­ç”»æ¶æ„å›¾ã€æµç¨‹å›¾ï¼Œdraw.io æ˜¯ç»å¯¹çš„T0çº§åˆ«å·¥å…·ï¼Œç°åœ¨åŠ ä¸Šäº† AI çš„åŠ æŒï¼Œç®€ç›´æ˜¯å¦‚è™æ·»ç¿¼ã€‚æˆ‘èŠ±äº†5åˆ†é’Ÿåœ¨æœ¬åœ°éƒ¨ç½²äº†ä¸€å¥—ï¼Œæ¥å…¥äº† DeepSeek æ¨¡å‹ï¼Œæ•ˆæœç›´æ¥ç‚¸è£‚ï¼š<strong>ä¸€å¥è¯ç”Ÿæˆè§„èŒƒæµç¨‹å›¾ï¼Œä¸æ»¡æ„è¿˜èƒ½ç›´æ¥åœ¨å³ä¾§ UI ç•Œé¢æ‰‹åŠ¨å¾®è°ƒã€‚</strong></p>
<p>é¦–å…ˆæ˜¯æµç¨‹å›¾ï¼š</p>
<pre><code class="hljs">å¸®æˆ‘ç”»ä¸€ä¸ªç”µå•†ç”¨æˆ·çš„è´­ç‰©æµç¨‹å›¾ã€‚ä»ç”¨æˆ·æµè§ˆå•†å“å¼€å§‹ï¼ŒåŒ…æ‹¬åŠ å…¥è´­ç‰©è½¦ã€ç»“è´¦ã€æ”¯ä»˜æˆåŠŸ/å¤±è´¥çš„åˆ¤æ–­ï¼Œä¸€ç›´åˆ°å‘è´§å’Œç¡®è®¤æ”¶è´§
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7d96d33f4650458a89f840308da40f36~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768044273&amp;x-signature=L%2FD%2FtfLa02JHDY75m7aahVIHmRw%3D" alt="" loading="lazy"/></p>
<p>åˆè¯•äº†ä¸€ä¸‹å¸¦åŠ¨æ€æ•ˆæœçš„æ¶æ„å›¾ï¼š</p>
<pre><code class="hljs">æˆ‘ç”»ä¸€ä¸ªç®€å•çš„ç½‘ç»œæ¶æ„å›¾ï¼ŒåŒ…å«ä¸€ä¸ªâ€˜å®¢æˆ·ç«¯â€™å›¾æ ‡å’Œä¸€ä¸ªâ€˜æœåŠ¡å™¨â€™å›¾æ ‡ã€‚è¯·ä½¿ç”¨å¸¦æœ‰æ˜æ˜¾åŠ¨ç”»æ•ˆæœçš„è¿æ¥çº¿ï¼ˆanimated connectorï¼‰å°†å®ƒä»¬è¿æ¥èµ·æ¥ï¼Œæ–¹å‘ä»å®¢æˆ·ç«¯æŒ‡å‘æœåŠ¡å™¨ï¼Œç”ŸåŠ¨åœ°å±•ç¤ºæ•°æ®æ­£åœ¨ä¼ è¾“çš„è¿‡ç¨‹ã€‚
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d9a445ffd5d44f0487218c0a873b50d9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768044273&amp;x-signature=JGweJWC9wAM7e1URAQtCWjCw8ww%3D" alt="" loading="lazy"/></p>
<p><strong>ç”Ÿæˆçš„æµç¨‹å›¾ç»è¿‡ä¿®æ”¹åï¼Œå¯ä»¥ç›´æ¥å°†æºæ–‡ä»¶ä¸‹è½½åˆ°æœ¬åœ°ä½¿ç”¨ã€‚</strong> è¯ä¸å¤šè¯´ç›´æ¥æ•™å¤§å®¶æ¥éƒ¨ç½²ä½¿ç”¨ï¼Œ<strong>ç»“å°¾è¿˜é€å°è‚¥è‚ é…ç½®å¥½çš„next-ai-draw-ioå‹ç¼©åŒ…ï¼Œå¤§å®¶å¯ä»¥ç›´æ¥æ‹¿è¿‡å»éƒ¨ç½²ä½¿ç”¨~</strong></p>
<h2 data-id="heading-1">2. éƒ¨ç½²ä½¿ç”¨</h2>
<h3 data-id="heading-2">2.1. dockerå®‰è£…</h3>
<p><strong>1.</strong> <strong>å®‰è£… WSL 2ï¼ˆé€‚ç”¨äº Windows 10 ç‰ˆæœ¬ 2004 åŠä»¥ä¸Šï¼‰ï¼š</strong></p>
<p>Windows å­ç³»ç»Ÿ Linux 2ï¼ˆWSL 2ï¼‰æä¾›äº†ä¸€ä¸ªå®Œæ•´çš„ Linux å†…æ ¸ï¼ŒDocker Desktop ä¾èµ–äºæ­¤ã€‚win+Ræ‰“å¼€å‘½ä»¤çª—å£ï¼Œè¾“å…¥winveræŸ¥çœ‹ç³»ç»Ÿç‰ˆæœ¬ï¼Œç¡®ä¿å†…éƒ¨ç‰ˆæœ¬é«˜äº19041ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cd2858af300e42c6b3e0f518f7cceba8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768044273&amp;x-signature=SwBkN9DIskESUhsbg2nXKEs89iI%3D" alt="" loading="lazy"/></p>
<p>ä»¥ç®¡ç†å‘˜èº«ä»½æ‰“å¼€ PowerShellï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p>
<pre><code class="hljs language-css" lang="css">wsl <span class="hljs-attr">--install</span>
</code></pre>
<p>å®‰è£…å®Œæˆåéœ€è¦é‡å¯ä¸€ä¸‹è®¡ç®—æœºã€‚</p>
<p><strong>2.</strong> <strong>å®‰è£…DockerDesktop</strong></p>
<p>å®‰è£… Docker Desktop ä¹‹å‰ï¼Œç¡®ä¿ä½ å·²ç»å®‰è£…å¹¶å¯ç”¨äº† WSL 2ã€‚å¯ä»¥é€šè¿‡åœ¨ <strong>PowerShell</strong> è¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥æ£€æŸ¥ï¼š</p>
<pre><code class="hljs language-css" lang="css">wsl <span class="hljs-attr">--list</span> <span class="hljs-attr">--verbose</span>
</code></pre>
<p><strong>ä¸‹è½½ Docker Desktop</strong>ï¼šè®¿é—® Docker å®˜æ–¹ç½‘ç«™ï¼Œä¸‹è½½é€‚ç”¨äº Windows çš„ Docker Desktop å®‰è£…åŒ…ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dd851de54ec942038f8dafd3cd70c5bb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768044273&amp;x-signature=V%2Foy2yruAccrUDywZctVGJItARA%3D" alt="" loading="lazy"/></p>
<p><strong>å®‰è£… Docker Desktop</strong>ï¼š</p>
<ul>
<li>åŒå‡»ä¸‹è½½çš„å®‰è£…æ–‡ä»¶ <code>Docker Desktop Installer.exe</code>ã€‚</li>
<li>æŒ‰ç…§æç¤ºå®Œæˆå®‰è£…è¿‡ç¨‹ã€‚</li>
<li>å®‰è£…å®Œæˆåï¼Œç³»ç»Ÿå¯èƒ½æç¤ºé‡å¯è®¡ç®—æœºï¼Œå»ºè®®é‡å¯ä»¥ç¡®ä¿æ‰€æœ‰ç»„ä»¶æ­£å¸¸å·¥ä½œã€‚</li>
</ul>
<p><strong>å¯åŠ¨ Docker Desktop</strong>ï¼šç”µè„‘é‡å¯åï¼Œå¯åŠ¨<strong>Docker Desktopï¼Œ</strong> åˆæ¬¡å¯åŠ¨å¯èƒ½éœ€è¦ä¸€äº›æ—¶é—´ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0861cd7ab92946d781353158bb2651aa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768044273&amp;x-signature=%2Bd5G6JdqV0YaAPl3SWskH4Vg3LU%3D" alt="" loading="lazy"/></p>
<p>é…ç½®ä¸€ä¸‹dockeré•œåƒæºåœ°å€ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a258e9e948994b19bd85eff78e3084ed~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768044273&amp;x-signature=9SR7wY035L4%2BYCwN6WRl4%2BjdNDg%3D" alt="" loading="lazy"/></p>
<p>ä»¥ä¸‹é•œåƒæºåœ°å€ä¸ºå›½å†…åœ°å€ï¼Œä½ ä¸æƒ³ç”¨æˆ‘çš„ä¹Ÿå¯ä»¥è‡ªå·±æ‰¾ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"builder"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"gc"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"defaultKeepStorage"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"20GB"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"enabled"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"experimental"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"registry-mirrors"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-string">"https://docker.1panel.live"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-string">"https://hub.rat.dev"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-string">"https://docker.chenby.cn"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-string">"https://docker.m.daocloud.io"</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 data-id="heading-3">2.2. next-ai-draw-ioå®‰è£…</h3>
<p>æ¥åˆ°next-ai-draw-ioä»“åº“é¡µé¢<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FDayuanJiang%2Fnext-ai-draw-io" target="_blank" title="https://github.com/DayuanJiang/next-ai-draw-io" ref="nofollow noopener noreferrer">github.com/DayuanJiangâ€¦</a> ç‚¹å‡»ä¸‹è½½å‹ç¼©åŒ…æŒ‰é’®ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e4541c8504a44a4194042006610b33a6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768044273&amp;x-signature=o7DtHPegnav28wPQ%2FAZm2Cga2XY%3D" alt="" loading="lazy"/></p>
<p>å°†ä¸‹è½½å¥½çš„å‹ç¼©åŒ…è§£å‹åˆ°ä»»æ„ç›®å½•ï¼Œå¦‚æœ‰gitå¯ä»¥ç”¨git cloneå‘½ä»¤ç›´æ¥ä¸‹è½½é¡¹ç›®åˆ°æ–‡ä»¶å¤¹ä¸­ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">git <span class="hljs-built_in">clone</span> https://github.com/DayuanJiang/next-ai-draw-io
</code></pre>
<p>å¤åˆ¶ä¸€ä»½env.exampleæ–‡ä»¶å¹¶æ”¹åä¸º.envã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/eb9eb7a619764bee95a79cee1752c22e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768044273&amp;x-signature=PBX8kTSQ2XEZkqfSU1xaDxblWs4%3D" alt="" loading="lazy"/></p>
<p>åœ¨.envæ–‡ä»¶ä¸­è¿›è¡Œå¤§æ¨¡å‹é…ç½®ç”¨æ¥é©±åŠ¨drawioç»˜å›¾æ“ä½œï¼Œä¸‹å›¾ä¸­æˆ‘é…ç½®çš„æ˜¯deepseekï¼Œä½ ä¹Ÿå¯ä»¥é…ç½®å…¶ä»–æ¨¡å‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/48c50b785a2d4be2ad2e4e9f7fe8e547~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768044273&amp;x-signature=WaV5t3hFWerk0bBkyW2i24d2wOI%3D" alt="" loading="lazy"/></p>
<p>æ‰“å¼€docker-compose.ymæ–‡ä»¶åœ¨è¿›è¡Œå¦‚ä¸‹é…ç½®ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/04a509e96bb94405a272be038f13d225~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768044273&amp;x-signature=DJ9EsXRmHuToAh%2Bxhb2fiN3gaMo%3D" alt="" loading="lazy"/></p>
<p><strong>æ³¨æ„ï¼šä¸ºäº†é˜²æ­¢å’Œæœ¬åœ°å…¶ä»–æœåŠ¡å†²çªï¼Œæˆ‘å°† drawio çš„ç«¯å£ä¿®æ”¹ä¸ºäº† 8818ã€‚å¦‚æœä½ æœ¬åœ° 8080 æ²¡è¢«å ç”¨ï¼Œä¿æŒé»˜è®¤å³å¯ï¼›å¦‚æœå ç”¨äº†ï¼Œè®°å¾—åƒæˆ‘æˆªå›¾é‡Œä¸€æ ·ï¼ŒåŒæ—¶ä¿®æ”¹</strong> <code>ports</code> <strong>å’Œ</strong> <code>env</code> <strong>æ–‡ä»¶é‡Œçš„ç«¯å£å·ã€‚</strong></p>
<p>å›åˆ°next-ai-draw-ioæ–‡ä»¶ç›®å½•ï¼Œåœ¨æ–‡ä»¶è·¯å¾„å¤„è¾“å…¥cmdæ‰“å¼€å‘½ä»¤æç¤ºç¬¦ï¼Œè¾“å…¥å‘½ä»¤docker-compose up -d --build</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/769e50497f7d4c59a4c04695601c3446~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768044273&amp;x-signature=G6d090tiqD%2FZp7OBVYSdyT8k1RY%3D" alt="" loading="lazy"/></p>
<p>ç­‰å¾…next-ai-draw-ioå®‰è£…ï¼ŒæˆåŠŸåæ‰“å¼€ç½‘å€<a href="https://link.juejin.cn?target=http%3A%2F%2Flocalhost%3A3000%2Fzh%25E5%258D%25B3%25E5%258F%25AF%25E8%25BF%259B%25E5%2585%25A5next-ai-draw-io%25E6%2593%258D%25E4%25BD%259C%25E7%2595%258C%25E9%259D%25A2%25EF%25BC%258C%25E6%2588%2591%25E4%25BB%25AC%25E5%258F%25AF%25E4%25BB%25A5%25E5%25BC%2580%25E5%25A7%258B%25E8%25BF%259B%25E8%25A1%258C%25E4%25B8%2580%25E5%258F%25A5%25E8%25AF%259D%25E7%2594%259F%25E6%2588%2590%25E6%25B5%2581%25E7%25A8%258B%25E5%259B%25BE%25E7%259A%2584%25E6%2593%258D%25E4%25BD%259C%25E4%25BA%2586%25EF%25BC%259A" target="_blank" title="http://localhost:3000/zh%E5%8D%B3%E5%8F%AF%E8%BF%9B%E5%85%A5next-ai-draw-io%E6%93%8D%E4%BD%9C%E7%95%8C%E9%9D%A2%EF%BC%8C%E6%88%91%E4%BB%AC%E5%8F%AF%E4%BB%A5%E5%BC%80%E5%A7%8B%E8%BF%9B%E8%A1%8C%E4%B8%80%E5%8F%A5%E8%AF%9D%E7%94%9F%E6%88%90%E6%B5%81%E7%A8%8B%E5%9B%BE%E7%9A%84%E6%93%8D%E4%BD%9C%E4%BA%86%EF%BC%9A" ref="nofollow noopener noreferrer">http://localhost:3000/zhå³å¯è¿›å…¥next-ai-draw-ioæ“ä½œç•Œé¢ï¼Œæˆ‘ä»¬å¯ä»¥å¼€å§‹è¿›è¡Œä¸€å¥è¯ç”Ÿæˆæµç¨‹å›¾çš„æ“ä½œäº†ï¼š</a></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1d5ac4fa217f4cdb85477953d96f87da~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768044273&amp;x-signature=DcEIzm2SQaGhOFUc%2FSdGQFjXZgo%3D" alt="" loading="lazy"/></p>
<p>ä»¥ä¸Šå°±æ˜¯æœ¬æœŸæ•™ç¨‹çš„å®Œæ•´å†…å®¹ï¼Œæƒ³è·å–å°è‚¥è‚ å·²ç»é…ç½®å¥½çš„next-ai-draw-ioå‹ç¼©åŒ…å¯ä»¥è¯„è®ºåŒºè¯´æµç¨‹å›¾å“¦~</p>
<h2 data-id="heading-4">3. ç»“è¯­</h2>
<p>æ— è®ºä½ æ˜¯äº§å“ç»ç†ã€å¼€å‘äººå‘˜è¿˜æ˜¯æ¶æ„å¸ˆï¼Œè¿™å¥— <code>DeepSeek + next-ai-draw-io</code> çš„ç»„åˆï¼Œç»å¯¹èƒ½æˆä¸ºæé«˜å·¥ä½œæ•ˆç‡çš„ä¸€æŠŠåˆ©å™¨ã€‚</p>
<p><strong>å¦‚æœ¬æ¬¡åˆ†äº«å¯¹ä½ æœ‰å¸®åŠ©ï¼Œéº»çƒ¦ä¸€é”®ä¸‰è¿æ”¯æŒä¸€ä¸‹å°è‚¥è‚ ï¼Œæˆ‘ä»¬ä¸‹æœŸå†è§~</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/190eaed60f004d77b7c9d04831a96ae2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768044273&amp;x-signature=QqxprKbvQnRLGJi6Han3FANhcDM%3D" alt="" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é˜¿é‡Œäººçš„ 2025 å¹´ç»ˆæ€»ç»“ï¼šä¹°æˆ¿ã€æ™‹å‡ã€è®¢å©šã€æŠ•èµ„ï¼Œé‡è§æ›´æ¸…æ™°çš„è‡ªå·±]]></title>    <link>https://juejin.cn/post/7590699877630378022</link>    <guid>https://juejin.cn/post/7590699877630378022</guid>    <pubDate>2026-01-03T11:55:59.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7590699877630378022" data-draft-id="7590699877630328870" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é˜¿é‡Œäººçš„ 2025 å¹´ç»ˆæ€»ç»“ï¼šä¹°æˆ¿ã€æ™‹å‡ã€è®¢å©šã€æŠ•èµ„ï¼Œé‡è§æ›´æ¸…æ™°çš„è‡ªå·±"/> <meta itemprop="keywords" content="åç«¯,é¢è¯•,æ¶æ„"/> <meta itemprop="datePublished" content="2026-01-03T11:55:59.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="çˆ±æ•²ä»£ç çš„å°é»„"/> <meta itemprop="url" content="https://juejin.cn/user/598584558627246"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é˜¿é‡Œäººçš„ 2025 å¹´ç»ˆæ€»ç»“ï¼šä¹°æˆ¿ã€æ™‹å‡ã€è®¢å©šã€æŠ•èµ„ï¼Œé‡è§æ›´æ¸…æ™°çš„è‡ªå·±
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/598584558627246/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    çˆ±æ•²ä»£ç çš„å°é»„
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-03T11:55:59.000Z" title="Sat Jan 03 2026 11:55:59 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:14px;overflow-x:hidden;color:var(--cyanosis-base-color);transition:color .35s;--cyanosis-base-color:#353535;--cyanosis-title-color:#005bb7;--cyanosis-strong-color:#2196f3;--cyanosis-em-color:#4fc3f7;--cyanosis-del-color:#ccc;--cyanosis-link-color:#3da8f5;--cyanosis-linkh-color:#007fff;--cyanosis-border-color:#bedcff;--cyanosis-border-color-2:#ececec;--cyanosis-bg-color:#fff;--cyanosis-blockquote-color:#8c8c8c;--cyanosis-blockquote-bg-color:#f0fdff;--cyanosis-code-color:#c2185b;--cyanosis-code-bg-color:#fff4f4;--cyanosis-code-pre-color:#f8f8f8;--cyanosis-table-border-color:#c3e0fd;--cyanosis-table-th-color:#dff0ff;--cyanosis-table-tht-color:#005bb7;--cyanosis-table-tr-nc-color:#f7fbff;--cyanosis-table-trh-color:#e0edf7;--cyanosis-slct-title-color:#005bb7;--cyanosis-slct-titlebg-color:rgba(175,207,247,0.25);--cyanosis-slct-text-color:#c80000;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#e8ebec;--cyanosis-slct-codebg-color:#ffeaeb;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body.__dark{--cyanosis-base-color:#cacaca;--cyanosis-title-color:#ddd;--cyanosis-strong-color:#fe9900;--cyanosis-em-color:#ffd28e;--cyanosis-del-color:#ccc;--cyanosis-link-color:#ffb648;--cyanosis-linkh-color:#fe9900;--cyanosis-border-color:#ffe3ba;--cyanosis-border-color-2:#ffcb7b;--cyanosis-bg-color:#2f2f2f;--cyanosis-blockquote-color:#c7c7c7;--cyanosis-blockquote-bg-color:rgba(255,199,116,0.1);--cyanosis-code-color:#000;--cyanosis-code-bg-color:#ffcb7b;--cyanosis-code-pre-color:rgba(255,227,185,0.5);--cyanosis-table-border-color:#fe9900;--cyanosis-table-th-color:#ffb648;--cyanosis-table-tht-color:#000;--cyanosis-table-tr-nc-color:#6d5736;--cyanosis-table-trh-color:#947443;--cyanosis-slct-title-color:#000;--cyanosis-slct-titlebg-color:#fe9900;--cyanosis-slct-text-color:#00c888;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#000;--cyanosis-slct-codebg-color:#ffcb7b;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body h1{padding-bottom:4px;font-size:30px}.markdown-body h1,.markdown-body h2{margin-top:36px;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);transition:color .35s}.markdown-body h2{position:relative;padding-left:10px;padding-right:10px;padding-bottom:10px;font-size:24px;border-bottom:1px solid var(--cyanosis-border-color-2)}.markdown-body h2:before{content:"ã€Œ";position:absolute;top:-6px;left:-14px}.markdown-body h2:after{content:"ã€";position:relative;top:6px;right:auto}.markdown-body h3{position:relative;padding-bottom:0;margin-top:30px;margin-bottom:10px;font-size:20px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h3:before{content:"Â»";padding-right:6px;color:var(--cyanosis-strong-color)}.markdown-body h4{margin-top:24px;font-size:16px}.markdown-body h4,.markdown-body h5{padding-bottom:0;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h5{margin-top:18px;font-size:14px}.markdown-body h6{padding-bottom:0;margin-top:12px;margin-bottom:10px;font-size:12px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body p{line-height:inherit;margin-top:16px;margin-bottom:16px}.markdown-body img{max-width:100%}.markdown-body hr{position:relative;width:98%;height:1px;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,var(--cyanosis-link-color),rgba(255,0,0,.3),hsla(0,0%,100%,.1),rgba(255,0,0,.3),var(--cyanosis-link-color));border-width:0;overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background-color:var(--cyanosis-bg-color);background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center;transition:background-color .5s}.markdown-body code{padding:.065em .4em;font-size:.87em;color:var(--cyanosis-code-color);word-break:break-word;overflow-x:auto;background-color:var(--cyanosis-code-bg-color);border-radius:2px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;padding:16px 12px;margin:0;font-size:12px;color:#333;word-break:normal;overflow-x:auto;background:var(--cyanosis-code-pre-color)}.markdown-body pre&gt;code::-webkit-scrollbar{width:4px;height:4px}.markdown-body pre&gt;code::-webkit-scrollbar-track{background-color:var(--cyanosis-border-color)}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:var(--cyanosis-strong-color);border-radius:10px}.markdown-body a{position:relative;text-decoration:none;color:var(--cyanosis-link-color);border-bottom:1px solid var(--cyanosis-border-color)}.markdown-body a:hover{border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body a:active,.markdown-body a:hover{color:var(--cyanosis-linkh-color)}.markdown-body a:after{position:absolute;content:"";top:100%;left:0;width:100%;opacity:0;border-bottom:1px solid var(--cyanosis-border-color);transition:top .3s,opacity .3s;transform:translateZ(0)}.markdown-body a:hover:after{top:0;opacity:1;border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid var(--cyanosis-table-border-color);border-spacing:0;border-collapse:collapse}.markdown-body table thead{color:#000;text-align:left;font-size:14px;background:#f6f6f6}.markdown-body table tr:nth-child(2n){background-color:var(--cyanosis-table-tr-nc-color)}.markdown-body table tr:hover{background-color:var(--cyanosis-table-trh-color)}.markdown-body table td,.markdown-body table th{padding:12px 8px;line-height:24px;border:1px solid var(--cyanosis-table-border-color)}.markdown-body table th{color:var(--cyanosis-table-tht-color);background-color:var(--cyanosis-table-th-color)}.markdown-body table td{min-width:120px}.markdown-body blockquote{color:var(--cyanosis-blockquote-color);border-left:4px solid var(--cyanosis-strong-color);background-color:var(--cyanosis-blockquote-bg-color);padding:1px 20px;margin:22px 0;transition:color .35s}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body b,.markdown-body blockquote&gt;b,.markdown-body blockquote&gt;strong,.markdown-body strong{color:var(--cyanosis-strong-color)}.markdown-body em,.markdown-body i{color:var(--cyanosis-em-color)}.markdown-body del{color:var(--cyanosis-del-color)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:4px}.markdown-body ol li{padding-left:6px}.markdown-body details&gt;summary{outline:none;color:var(--cyanosis-title-color);font-size:20px;font-weight:bolder;border-bottom:1px solid var(--cyanosis-border-color);cursor:pointer}.markdown-body details&gt;p{padding:10px 20px;margin:10px 0 0;color:#666;background-color:var(--cyanosis-blockquote-bg-color);border:2px dashed var(--cyanosis-strong-color)}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection{color:var(--cyanosis-slct-title-color);background-color:var(--cyanosis-slct-titlebg-color)}.markdown-body ol li::selection,.markdown-body p::selection,.markdown-body ul li::selection{color:var(--cyanosis-slct-text-color);background-color:var(--cyanosis-slct-bg-color)}.markdown-body a::selection,.markdown-body b::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:var(--cyanosis-slct-elbg-color)}.markdown-body del::selection{color:var(--cyanosis-slct-del-color);background-color:var(--cyanosis-slct-elbg-color)}.markdown-body table thead th::selection{background-color:transparent}.markdown-body table tbody td::selection{background-color:var(--cyanosis-slct-bg-color)}.markdown-body code::selection{background-color:var(--cyanosis-slct-codebg-color)}.markdown-body pre&gt;code::selection{background-color:var(--cyanosis-slct-prebg-color)}.markdown-body .contains-task-list{padding-left:14px;list-style:none}.markdown-body .contains-task-list input[type=checkbox]{position:relative}.markdown-body .contains-task-list input[type=checkbox]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;width:inherit;height:inherit;background:#f0f8ff;border:1px solid #add6ff;border-radius:2px;box-sizing:border-box;z-index:1}.markdown-body .contains-task-list input[type=checkbox]:checked:after{content:"âœ“";position:absolute;top:-12px;left:0;right:0;bottom:0;width:0;height:0;color:#f55;font-size:20px;font-weight:700;z-index:2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atom-one-dark">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#abb2bf;background:#282c34}.hljs-comment,.hljs-quote{color:#5c6370;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#c678dd}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e06c75}.hljs-literal{color:#56b6c2}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#98c379}.hljs-built_in,.hljs-class .hljs-title{color:#e6c07b}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#d19a66}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#61aeee}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}</style><p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bdb9b40d45524053bfdc3e50beb9a6c3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54ix5pWy5Luj56CB55qE5bCP6buE:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768046158&amp;x-signature=SCWvo1D6E14W%2BrPgI7QETYVJSlI%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-0">ä¸€ã€å¼•è¨€</h2>
<p>åˆåˆ°äº†ä¸€å¹´ä¸€åº¦çš„å¹´ç»ˆå¤ç›˜æ—¶åˆ»ã€‚</p>
<p>å¤ç›˜ï¼Œä»æ¥ä¸åªæ˜¯å›çœ‹å·²ç»å‘ç”Ÿçš„äº‹æƒ…ï¼Œæ›´é‡è¦çš„æ˜¯â€”â€”ä¸ºå°šæœªå‘ç”Ÿçš„æœªæ¥ï¼Œæå‰é“ºè·¯ã€æ ¡å‡†æ–¹å‘ã€‚</p>
<p>å›æœ› 2025 å¹´ï¼Œå…¶å®å¾ˆé•¿ä¸€æ®µæ—¶é—´é‡Œï¼Œæˆ‘å§‹ç»ˆæ²¡æœ‰çœŸæ­£æ‰¾åˆ°è‡ªå·±çš„æ–¹å‘ã€‚å·¥ä½œä¹‹å¤–ï¼Œè°ˆä¸ä¸Šçƒ­çˆ±ï¼Œä¹Ÿè°ˆä¸ä¸Šç¬ƒå®šï¼Œåªæ˜¯åœ¨æƒ¯æ€§ä¸­å‰è¡Œã€‚</p>
<p>ç›´åˆ° 2025 å¹´çš„å°¾å£°ï¼Œæ‰ç»ˆäºçœ‹æ¸…äº†ä¸€äº›ä¸œè¥¿ï¼šå“ªäº›æ˜¯å¿…é¡»åšæŒçš„ï¼Œå“ªäº›æ˜¯å¯ä»¥æ”¾ä¸‹çš„ï¼Œä¹Ÿé€æ¸æ‘¸ç´¢å‡ºå‡ æ¡æ›´å±äºè‡ªå·±çš„è·¯å¾„ã€‚è¿™ä¸€å¹´ï¼Œå¹¶éçªç„¶å¼€æ‚Ÿï¼Œè€Œæ˜¯åå¤ç¢°å£åçš„æ²‰æ·€ä¸å–èˆã€‚</p>
<p>ä¾æ—§æŒ‰ç…§æƒ¯ä¾‹ï¼Œæ²¿ç€æ—¶é—´çš„è½¨è¿¹ï¼Œå›åˆ° 2025 å¹´çš„èµ·ç‚¹ï¼Œæ¢³ç†è¿™ä¸€æ•´å¹´é‡Œçš„å¾—ä¸å¤±ã€è¿›ä¸é€€ï¼Œä¹Ÿä¸ºä¸‹ä¸€é˜¶æ®µçš„è‡ªå·±ï¼Œç•™ä¸‹äº›ä»€ä¹ˆã€‚</p>
<h2 data-id="heading-1">äºŒã€æŠ€æœ¯ï¼ˆAIé©±åŠ¨ï¼‰</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9dd262c4e24e496fabdd11b579b4e447~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54ix5pWy5Luj56CB55qE5bCP6buE:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768046158&amp;x-signature=bXK%2FP%2Bsa1ph7wID8PtEk0SNAOu0%3D" alt="" loading="lazy"/></p>
<p>2025 å¹´ï¼Œæ˜¯ AI åŠ é€Ÿæ¼”è¿›çš„ä¸€å¹´ã€‚</p>
<p>è¿™ä¸€å¹´é‡Œï¼Œæˆ‘å†™åšå®¢æ˜æ˜¾å°‘äº†ï¼Œæœ€ç›´æ¥çš„åŸå› ï¼Œæ­£æ˜¯ AI å¸¦æ¥çš„å†²å‡»ã€‚æ›¾ç»éœ€è¦ç†¬å¤œæŸ¥èµ„æ–™ã€ç¿»æ–‡æ¡£ã€å•ƒæºç çš„äº‹æƒ…ï¼Œåœ¨ä»Šå¤©çš„ AI é¢å‰æ˜¾å¾—å¼‚å¸¸é«˜æ•ˆâ€”â€”åªéœ€è¦ç»™å‡ºåˆé€‚çš„å…³é”®è¯ï¼Œç­”æ¡ˆå¾€å¾€å·²ç»è¢«ç³»ç»Ÿæ€§åœ°æ•´ç†å¥½ã€‚</p>
<p>ä»å®è§‚æ¥çœ‹ï¼Œ2025 å¹´çš„ä¸»æ—‹å¾‹ï¼Œå‡ ä¹å…¨éƒ¨å›´ç»•ç€<strong>å¤§æ¨¡å‹åŸºç¡€è®¾æ–½</strong>å±•å¼€ã€‚å„å¤§å‚å•†æŒç»­æŠ•å…¥å·¨é¢èµ„é‡‘ï¼Œç”¨äºæ¨¡å‹è§„æ¨¡ã€ç®—åŠ›å’Œè®­ç»ƒèƒ½åŠ›çš„è¿­ä»£å‡çº§ã€‚ä½†ä¸ä¹‹å½¢æˆé²œæ˜å¯¹æ¯”çš„æ˜¯ï¼šâ€‹<strong>å¤§æ¨¡å‹çš„åº”ç”¨è½åœ°ï¼Œä¾ç„¶æ˜¯ä¸€ä¸ªå°šæœªè¢«å½»åº•è§£å†³çš„é—®é¢˜</strong>â€‹ã€‚</p>
<p>è¿™å°±åƒé«˜é€Ÿå…¬è·¯å·²ç»ä¿®å¥½ï¼Œä½†çœŸæ­£å†³å®šèƒœè´Ÿçš„ï¼Œæ˜¯è°å®¶çš„è½¦æœ€å…ˆè·‘èµ·æ¥ã€è·‘å¾—æœ€ç¨³ã€‚</p>
<p>åŸºäºè¿™ä¸€åˆ¤æ–­ï¼Œæˆ‘è¶Šæ¥è¶Šåšå®šåœ°è®¤ä¸ºï¼š<strong>2026 å¹´çš„ä¸»æ—‹å¾‹ï¼Œä¸€å®šæ˜¯ AI çš„è½åœ°ä¸åº”ç”¨ã€‚</strong></p>
<p>å¯¹æŠ€æœ¯äººè€Œè¨€ï¼Œæœªæ¥ä¸å†åªæ˜¯æŠŠä¸šåŠ¡â€œåšæ·±åšç†Ÿâ€ï¼Œè€Œæ˜¯åœ¨æ—¢æœ‰ä¸šåŠ¡åŸºç¡€ä¸Šï¼Œæ€è€ƒå¦‚ä½•ä¸å¤§æ¨¡å‹æ›´å¥½åœ°ç»“åˆã€é€‚é…ã€æ”¾å¤§ä»·å€¼â€”â€”è¿™æˆ–è®¸æ‰æ˜¯æ›´é•¿è¿œçš„ç»ˆå±€ã€‚</p>
<p>çº¯ä¸šåŠ¡å‹æŠ€æœ¯è·¯çº¿ï¼ŒåŠ¿å¿…ä¼šé­é‡ä¸€å®šå†²å‡»ã€‚åŸå› å¹¶ä¸å¤æ‚ï¼šå½“ä¸šåŠ¡æ ¼å±€è¶‹äºç¨³å®šï¼Œå…¬å¸å¾€å¾€ä¸ä¼šå†åœ¨ä¼ ç»Ÿæ–¹å‘ä¸ŠæŠ•å…¥é‡èµ„äº§ã€‚åŠªåŠ›å½“ç„¶é‡è¦ï¼Œä½†åœ¨æŠ€æœ¯æµªæ½®é¢å‰ï¼Œâ€‹<strong>æ–¹å‘çš„ä¼˜å…ˆçº§ï¼Œæ°¸è¿œé«˜äºåŠªåŠ›æœ¬èº«</strong>â€‹ã€‚é£å£ä¹‹ä¸Šï¼Œé€‰æ‹©å¾€å¾€æ¯”åŸ‹å¤´è‹¦å¹²æ›´å…³é”®ã€‚</p>
<p>å¦ç™½è¯´ï¼Œæˆ‘æ›¾é•¿æœŸå¯¹ AI ä¿æŒè·ç¦»ã€‚å¹¶éå¦å®šå®ƒçš„ä»·å€¼ï¼Œè€Œæ˜¯å› ä¸ºå®ƒå¤ªæ–°â€”â€”æ ‡å‡†æœªå®šã€è·¯å¾„æœªæ˜ã€å˜é‡å¤ªå¤šã€‚è¿™ç§ä¸ç¡®å®šæ€§ï¼Œæœ¬èƒ½åœ°è®©äººæŠ—æ‹’ã€‚</p>
<p>çœŸæ­£çš„è½¬æŠ˜ï¼Œæ¥è‡ªä¸€æ¬¡å’Œè€æ¿çš„ç»©æ•ˆæ²Ÿé€šã€‚åœ¨ AI é£é€Ÿæ¼”è¿›çš„èŠ‚ç‚¹ï¼Œå¦‚æœåªæ˜¯ç«™åœ¨ä¸€æ—è§‚æœ›ï¼Œç­‰åˆ«äººæŠŠä½ç½®ç«™ç¨³ã€çº¢åˆ©åƒå®Œï¼Œå†å›å¤´è·Ÿè¿›ï¼Œæˆ‘ä»¬æ³¨å®šåªèƒ½å’€åš¼åˆ«äººå‰©ä¸‹çš„æˆæœï¼Œä¸”æ°¸è¿œæ…¢ä¸€æ­¥ã€‚</p>
<p>ä»é‚£æ¬¡è°ˆè¯ä¹‹åï¼Œæˆ‘é€æ¸æ¥å—äº†ä¸€ä¸ªäº‹å®ï¼š<strong>AI ä¸æ˜¯é€‰ä¿®ï¼Œè€Œæ˜¯å¿…é¡»æ­£è§†çš„æ–¹å‘ã€‚</strong></p>
<p>å®¢è§‚æ¥è¯´ï¼Œ2025 å¹´æˆ‘å¹¶æ²¡æœ‰ç³»ç»Ÿæ€§åœ°å­¦ä¹ å¤ªå¤š AI çŸ¥è¯†ã€‚ä½†æˆ‘ä¹Ÿè¶Šæ¥è¶Šç¡®ä¿¡ï¼Œå­¦ä¹ æœ¬èº«å¹¶ä¸æ˜¯æœ€éš¾çš„äº‹ï¼ŒçœŸæ­£é‡è¦çš„ï¼Œæ˜¯å…ˆé€‰å¯¹æ–¹å‘ã€‚</p>
<p>ç«‹ä¸‹ 2026 å¹´çš„ç¬¬ä¸€ä¸ª Flagï¼š<strong>æŒç»­ç³»ç»Ÿæ€§åœ°å­¦ä¹  AIï¼Œæ„å»ºå®Œæ•´çš„æŠ€æœ¯ä½“ç³»ï¼Œè‡³å°‘è®©è‡ªå·±å§‹ç»ˆç«™åœ¨è¡Œä¸šå‰åˆ—ã€‚</strong></p>
<h2 data-id="heading-2">ä¸‰ã€å·¥ä½œï¼ˆAgent/æ™‹å‡ï¼‰</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/81797c49750b482bb9b4ff32fbe321ad~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54ix5pWy5Luj56CB55qE5bCP6buE:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768046158&amp;x-signature=hTx7eH3BNbIJDpzCjHm79Rq6TRM%3D" alt="" loading="lazy"/></p>
<p>2025 å¹´ï¼Œå‡ ä¹å¯ä»¥è¢«è§†ä¸º â€‹<strong>Agent çš„å…ƒå¹´</strong>â€‹ã€‚</p>
<p>å¯¹é£æ§å·¥ç¨‹å¸ˆè€Œè¨€ï¼Œè¿™æ˜¯ä¸€ä¸ªéš¾å¾—çš„å†å²çª—å£æœŸã€‚å¤§æ¨¡å‹å¤©ç„¶æ“…é•¿å›¾æ–‡ç†è§£ï¼Œè€Œå†…å®¹é£æ§çš„æ ¸å¿ƒé£é™©ï¼Œæ°æ°é›†ä¸­åœ¨å›¾æ–‡ä¸å¤šæ¨¡æ€å±‚é¢ï¼ŒäºŒè€…ä¹‹é—´çš„å¥‘åˆåº¦ï¼Œå‡ ä¹æ˜¯ä¸ºå†…å®¹é£æ§é‡èº«å®šåšã€‚</p>
<p>åœ¨è¿‡å»ä¸€å¹´é‡Œï¼Œæˆ‘ä»¬æ›´å¤šæ˜¯åœ¨â€‹<strong>å¤¯å®åº•å±‚èƒ½åŠ›</strong>â€‹ï¼šåŒ…æ‹¬å¤§æ¨¡å‹ä¸å°æ¨¡å‹çš„ååŒã€å‘é‡æ£€ç´¢ä½“ç³»ã€æ•æ„Ÿè¯ä¸è§„åˆ™åŒ¹é…ç­‰åŸºç¡€è®¾æ–½å»ºè®¾ã€‚è€Œä»Šå¹´ï¼Œåˆ™é¡ºåº”æŠ€æœ¯æ¼”è¿›çš„æ–¹å‘ï¼Œåœ¨æ­¤ä¹‹ä¸Šï¼Œå¼€å§‹ç³»ç»Ÿæ€§åœ°æ¨è¿›â€‹<strong>å†…å®¹é£æ§ Agent çš„å»ºè®¾</strong>â€‹ã€‚</p>
<p>ä»ç³»ç»Ÿè®¾è®¡è§’åº¦çœ‹ï¼Œä¼ ç»Ÿæ¶æ„å¾€å¾€ä»¥åŒæ­¥æ¨¡å¼ä¸ºä¸»ã€‚ä½†åœ¨å¤§æ¨¡å‹æ—¶ä»£ï¼Œæ¨ç†å»¶è¿Ÿä¸å¯é¿å…åœ°æˆä¸ºæ•´ä½“æ¶æ„çš„ç“¶é¢ˆï¼Œåœ¨é«˜ QPS åœºæ™¯ä¸‹ï¼Œå•çº¯ä¾èµ–åŒæ­¥è°ƒç”¨å·²éš¾ä»¥æ”¯æ’‘è§„æ¨¡åŒ–è½åœ°ã€‚å› æ­¤ï¼Œæ¶æ„å½¢æ€ä¹Ÿä¸å¾—ä¸éšä¹‹æ¼”è¿›ï¼Œä»åŒæ­¥æ¨¡å¼é€æ­¥å‘<strong>å¼‚æ­¥åŒ–ã€ä»»åŠ¡åŒ–</strong>è½¬å˜ã€‚</p>
<p>ä¸è¿‡ï¼Œç›¸æ¯”æ¶æ„è°ƒæ•´ï¼ŒAgent æœ¬èº«é•¿æœŸå­˜åœ¨çš„ä¸¤ä¸ªæ ¸å¿ƒé—®é¢˜æ›´åŠ å…³é”®ï¼š<strong>å¹»è§‰é—®é¢˜</strong>ä¸â€‹<strong>æˆæœ¬é—®é¢˜</strong>â€‹ã€‚</p>
<p>å¯¹äºå¹»è§‰é—®é¢˜ï¼Œä¸šç•Œè¾ƒä¸ºæˆç†Ÿçš„åšæ³•ï¼Œæ˜¯é€šè¿‡ Workflow å¯¹å¤§æ¨¡å‹çš„è¡Œä¸ºè·¯å¾„è¿›è¡Œçº¦æŸï¼Œè®©å…¶åœ¨é¢„è®¾çš„æµç¨‹å’Œè¾¹ç•Œå†…å®Œæˆæ¨ç†ï¼Œä»è€Œé™ä½ä¸ç¡®å®šæ€§ã€‚</p>
<p>è€Œæˆæœ¬é—®é¢˜åˆ™æ›´å…·æŒ‘æˆ˜æ€§ã€‚ç›®å‰ä¸»æµæ€è·¯å¯ä»¥æ‹†è§£ä¸ºä¸¤ä¸ªæ–¹å‘ï¼šä¸€æ˜¯<strong>é™ä½å¤§æ¨¡å‹</strong>â€‹â€‹<strong>çš„è°ƒç”¨é¢‘æ¬¡</strong>â€‹ï¼ŒäºŒæ˜¯â€‹<strong>é™ä½å•æ¬¡è°ƒç”¨æˆæœ¬</strong>â€‹ã€‚å‰è€…å¾€å¾€å¼•å…¥æœå¹¿æ¨ä½“ç³»ä¸­çš„ç²—æ’ / ç²¾æ’æ¶æ„ï¼Œç”±å°æ¨¡å‹æˆ–è§„åˆ™å…ˆè¡Œè¿‡æ»¤ï¼Œä»…å°†å¿…è¦æ ·æœ¬äº¤ç”±å¤§æ¨¡å‹å¤„ç†ï¼›åè€…åˆ™æ›´å¤šä¾èµ–è‡ªå»ºæ¨ç†æœåŠ¡ï¼Œé€šè¿‡éƒ¨ç½²å¼€æºæ¨¡å‹ï¼ˆå¦‚åƒé—®ã€DeepSeek ç­‰ï¼‰æ¥é™ä½æ•´ä½“æˆæœ¬ã€‚</p>
<p>æ›´è¿›ä¸€æ­¥æ¥çœ‹ï¼Œè‡ªå»ºæ¨¡å‹è¿˜æœ‰ä¸€ä¸ªæ˜æ˜¾ä¼˜åŠ¿ï¼šå½“å‰å¼€æºæ¨¡å‹å¤§å¤šæ˜¯é€šç”¨åŸºæ¨¡ï¼Œè€ŒçœŸå®ä¸šåŠ¡æ›´éœ€è¦çš„æ˜¯â€‹<strong>é¢†åŸŸå¤§æ¨¡å‹</strong>â€‹ã€‚è¿™ä¹Ÿæ„å‘³ç€ï¼Œå¿…é¡»é€šè¿‡å¾®è°ƒã€è’¸é¦ç­‰æ‰‹æ®µï¼Œæ„å»ºå¹¶æŒç»­æ¼”è¿›çœŸæ­£è´´åˆä¸šåŠ¡çš„æ¨¡å‹ä½“ç³»ã€‚</p>
<p>æ•´ä½“æ¥çœ‹ï¼Œè¿™ä¸€é˜¶æ®µçš„å·¥ä½œï¼Œç›¸æ¯”ä¼ ç»Ÿå¼€å‘ï¼Œå¤šäº†æ›´å¤šçš„ä¸ç¡®å®šæ€§ï¼Œä½†ä¹Ÿå› æ­¤æ›´å…·æŒ‘æˆ˜æ€§å’Œæˆé•¿ç©ºé—´ï¼Œæ˜¯çœŸæ­£ä¸ AI æ·±åº¦æ¥è½¨çš„ä¸€æ®µç»å†ã€‚</p>
<p>ä¹Ÿå¹¸è¿åœ°å¾—åˆ°äº†è€æ¿çš„è®¤å¯ï¼Œæ‹¿åˆ°äº†æ¥ä¹‹ä¸æ˜“çš„æ™‹å‡åé¢ï¼Œå®Œæˆäº†èŒä¸šç”Ÿæ¶¯ä¸­çš„ç¬¬äºŒæ¬¡æ™‹å‡â€”â€”ä¸Šä¸€æ¬¡æ˜¯åœ¨ä¸Šä¸€å®¶å…¬å¸ã€‚å›å¤´çœ‹ï¼Œç¡®å®æœ‰è¿æ°”æˆåˆ†ï¼Œä¹Ÿæ›´éœ€è¦çæƒœã€‚</p>
<p>ç«‹ä¸‹æ–°å¹´çš„ç¬¬äºŒä¸ª Flagï¼š<strong>2026 å¹´ï¼ŒæŒç»­ç²¾è¿› Agent æ¶æ„èƒ½åŠ›ï¼Œä»æ•´ä½“è®¾è®¡åˆ°ç»†èŠ‚å®ç°å…¨é¢åƒé€ï¼Œå»ºç«‹çœŸæ­£çš„ä½“ç³»åŒ–æŒæ§åŠ›ï¼ŒåŒæ—¶å¯¹è‡ªå·±ä¿æŒè¶³å¤Ÿä¸¥æ ¼çš„æŠ€æœ¯è¦æ±‚ï¼Œå§‹ç»ˆå¿ƒå­˜æŠ€æœ¯æ•¬ç•ã€‚</strong></p>
<h2 data-id="heading-3">å››ã€å¥åº·ï¼ˆè¿åŠ¨/æ—…æ¸¸ï¼‰</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/36bf0b698075439cb956a218b2300aa4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54ix5pWy5Luj56CB55qE5bCP6buE:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768046158&amp;x-signature=Dbt23RYbuX%2FWfAMeVns%2BTfpRvJI%3D" alt="" loading="lazy"/></p>
<p>åˆåˆ°äº†è¿™ä¸ªå¤šå°‘æœ‰äº›è€ç”Ÿå¸¸è°ˆçš„æ ç›®ã€‚</p>
<p>å¦ç‡åœ°è¯´ï¼Œ2025 å¹´çš„è¿åŠ¨çŠ¶æ€å¯ä»¥ç”¨å…¨é¢å´©ç›˜æ¥å½¢å®¹ã€‚ä¸ä»…æ²¡æœ‰ç˜¦ä¸‹æ¥ï¼Œåè€Œç¨³æ­¥å¢é‡ï¼Œè¿™ä¸€é¡¹åªèƒ½æ¯«ä¸ç•™æƒ…åœ°ç»™è‡ªå·±æ‰“ä¸€ä¸ªæœ€ä½åˆ†ï¼Œç”šè‡³æœ‰ç‚¹ä¸å¿ç›´è§†ã€‚å”¯ä¸€èƒ½åšçš„ï¼Œå¤§æ¦‚åªèƒ½æŠŠå¸Œæœ›å¯„æ‰˜åœ¨ 2026 å¹´ï¼Œé‡æ–°åšäººã€‚</p>
<p>ç›¸æ¯”ä¹‹ä¸‹ï¼Œç”Ÿæ´»å¹¶éå…¨ç„¶å¤±å®ˆã€‚è¿™ä¸€å¹´ï¼Œè¿˜æ˜¯èµ°äº†ä¸å°‘åœ°æ–¹ã€‚å…¬å¸å›¢å»ºå»äº†æ˜†æ˜ã€å¤§ç†ï¼Œçœ‹åˆ°äº†å¿ƒå¿ƒå¿µå¿µçš„æ´±æµ·ï¼›ä¸ªäººä¹Ÿé™†ç»­å»äº†æ·±åœ³ã€é¦™æ¸¯ã€å¤©æ´¥ã€åŒ—æˆ´æ²³ã€å—äº¬ç­‰åŸå¸‚ï¼Œåœ¨ä¸åŒçš„èŠ‚å¥é‡Œåˆ‡æ¢è§†è§’ï¼Œå¤šå°‘ç®—æ˜¯ç»™è‡ªå·±ç•™äº†ä¸€äº›å–˜æ¯çš„ç©ºé—´ã€‚</p>
<p>ä¹ŸæœŸå¾…æ˜å¹´èƒ½ç»§ç»­æŠŠâ€œåœ¨è·¯ä¸Šâ€è¿™ä»¶äº‹å»¶ç»­ä¸‹å»â€”â€”æ›´é‡è¦çš„æ˜¯ï¼Œæ˜å¹´å¯¹è±¡ç»ˆäºæœ‰å¹´å‡äº†ã€‚</p>
<p>ç«‹ä¸‹æ–°å¹´çš„ç¬¬ä¸‰ä¸ª Flagï¼š<strong>åšæŒè¿åŠ¨ï¼Œè‡³å°‘åˆ«å†ç»§ç»­å‘èƒ–ï¼›åŒæ—¶èµ°è¿›å‡ ä¸ªå°šæœªæŠµè¾¾è¿‡çš„åŸå¸‚ï¼Œè®©ç”Ÿæ´»ä¿æŒä¸€ç‚¹æ–°çš„å˜é‡ã€‚</strong></p>
<h2 data-id="heading-4">äº”ã€å®¶åº­ï¼ˆä¹°æˆ¿/è®¢å©šï¼‰</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cb4d32b143f04958a3e3fe5ead1bf0c6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54ix5pWy5Luj56CB55qE5bCP6buE:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768046158&amp;x-signature=CII2ImBQTkDqAkJ%2FrEUBkAYTSeo%3D" alt="" loading="lazy"/></p>
<p>å»å¹´çœ‹è¿‡çš„æˆ¿å­ï¼Œæœ€ç»ˆè¿˜æ˜¯å’Œå¯¹è±¡å•†é‡åå®šäº†ä¸‹æ¥ã€‚ä½ç½®åœ¨å¿åŸé‡Œç®—æ˜¯æ¯”è¾ƒæˆç†Ÿçš„å°åŒºï¼Œå››é¢éƒ½æœ‰å­¦æ ¡ï¼Œæ•´ä½“ä»·æ ¼ä¹Ÿåœ¨å¯æ‰¿å—èŒƒå›´å†…ã€‚æˆ¿è´·å·²ç»è¿˜äº†ä¸€å¹´ï¼Œå¯¹æ—¥å¸¸ç”Ÿæ´»çš„å½±å“å¹¶ä¸å¤§ã€‚</p>
<p>å”¯ä¸€çš„é—æ†¾æ˜¯äº¤ä»˜æ—¶é—´è¦åˆ° 2027 å¹´ï¼Œç›®å‰ä»åœ¨å»ºè®¾ä¸­ã€‚ä¸è¿‡å¥½åœ¨å¹¶ä¸ç€æ€¥ï¼Œæ…¢ä¸€ç‚¹ä¹Ÿæ— å¦¨ã€‚åœ°ç†ä½ç½®ä¹Ÿå’Œå»å¹´è®¾æƒ³çš„ä¸€æ ·â€”â€”æˆ‘å’Œäº²å§é€‰æ‹©äº†åŒä¸€ä¸ªå°åŒºã€åŒä¸€ä¸ªå•å…ƒã€ä¸Šä¸‹æ¥¼ï¼Œåªéœ€è¦ä¸€åˆ†é’Ÿï¼Œå°±èƒ½â€œä¼ é€â€åˆ°å¥¹å®¶è¹­é¥­ã€‚è€ƒè™‘åˆ°æˆ‘å’Œå¯¹è±¡éƒ½ä¸å¤ªæ“…é•¿åšé¥­ï¼Œè¿™ä¸ªé€‰æ‹©ç°åœ¨çœ‹èµ·æ¥ï¼Œæ ¼å¤–æ˜æ™ºã€‚</p>
<p>å¦ä¸€ä»¶é‡è¦çš„äº‹æƒ…ï¼Œæ˜¯è®¢å©šã€‚å’Œå¯¹è±¡è°ˆäº†ä¸ƒå¹´æ‹çˆ±ï¼Œæœ€ç»ˆè¿˜æ˜¯ç»™äº†å½¼æ­¤ä¸€ä¸ªç›¸å¯¹ç¬ƒå®šã€ä¹Ÿè®©åŒæ–¹å®¶åº­éƒ½æ»¡æ„çš„ç­”æ¡ˆã€‚æ•´ä¸ªè¿‡ç¨‹æ¯”é¢„æƒ³ä¸­é¡ºåˆ©å¾—å¤šï¼Œå‡ ä¹æ²¡æœ‰åœ¨æµç¨‹æˆ–è§‚å¿µä¸Šäº§ç”Ÿå¤§çš„åˆ†æ­§ã€‚è®¢å©šå‰å’Œè®¢å©šåï¼Œå¿ƒæ€ç¡®å®å‘ç”Ÿäº†ä¸€äº›å˜åŒ–â€”â€”ä¸€ç§æ›´æ˜ç¡®çš„â€œæˆ‘ä»¬å·²ç»æ˜¯ä¸€å®¶äººäº†â€çš„å¿ƒç†ç¡®è®¤ã€‚</p>
<p>å½“ç„¶ï¼Œç°å®å±‚é¢ä»ç„¶å­˜åœ¨å¼‚åœ°çš„é—®é¢˜ã€‚å¯¹è±¡åœ¨è€å®¶å¿åŒ»é™¢å·¥ä½œï¼Œæˆ‘åˆ™åœ¨åŒ—äº¬ä»äº‹äº’è”ç½‘ç›¸å…³å·¥ä½œã€‚æ‰€å¹¸çš„æ˜¯ï¼Œè€å®¶å¿åŸä»Šå¹´å°†å¼€é€šç›´è¾¾åŒ—äº¬çš„é«˜é“ï¼Œå¾€è¿”çš„æˆæœ¬å’Œéš¾åº¦éƒ½ä¼šé™ä½ï¼Œè¿™ä¹Ÿç®—æ˜¯ä¸€ä¸ªä¸å°çš„åˆ©å¥½ã€‚</p>
<p>æ•´ä½“æ¥çœ‹ï¼Œå®¶åº­è¿™ä¸€å—åœ¨ 2025 å¹´ç®—æ˜¯æ¯”è¾ƒç¨³å®šçš„ä¸€å¹´ï¼Œæ²¡æœ‰çªå‘çš„æ³¢æŠ˜ï¼Œä¸€åˆ‡éƒ½åœ¨é¢„æœŸå†…å‘å‰æ¨è¿›ã€‚</p>
<p>ç«‹ä¸‹æ–°å¹´çš„ç¬¬ä¸‰ä¸ª Flagï¼š<strong>å®¶åº­å±‚é¢ç»§ç»­é¡ºå…¶è‡ªç„¶ã€ç¨³æ­¥å‘å±•ï¼›å¦‚æœæˆ¿å­èƒ½æå‰äº¤ä»˜ï¼Œä¹Ÿä¸æ’é™¤æå‰å»æ‹ä¸ªå©šçº±ç…§â€”â€”ä¸å¼ºåˆ¶ï¼Œæ…¢æ…¢æ¥ã€‚</strong></p>
<h2 data-id="heading-5">å…­ã€æŠ•èµ„ï¼ˆç¾è‚¡/æ¸¯è‚¡/Aè‚¡ï¼‰</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0c0c4aa816b54c2887c67f46ad0491a0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54ix5pWy5Luj56CB55qE5bCP6buE:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768046158&amp;x-signature=oUVrfCJ4rBH%2FYQjo1wDFpCqZNuk%3D" alt="" loading="lazy"/></p>
<p>2025 å¹´ï¼Œä¹Ÿç®—æ˜¯æˆ‘ä¸ªäººæŠ•èµ„ç”Ÿæ¶¯çš„èµ·ç‚¹ã€‚</p>
<p>åœ¨é•¿æ¡¥å…³é—¨å‰å¼€é€šäº†è´¦æˆ·ï¼Œåœ¨æ±‡ä¸°è°ƒæ•´æ”¿ç­–å‰åŠå¥½äº†é“¶è¡Œå¡ï¼Œæ—¶é—´ç‚¹åˆšå¥½å¡åœ¨ä¸€ä¸ªâ€œæ¥å¾—åŠâ€çš„çª—å£æœŸã€‚12 æœˆä»½æ­£å¼è¿›å…¥ç¾è‚¡å¸‚åœºåï¼Œæ‰çœŸæ­£æ„è¯†åˆ°ï¼šæŠ•èµ„è¿™ä»¶äº‹ï¼Œæœ¬èº«å°±åƒä¸€é—¨éœ€è¦é•¿æœŸä¿®ç‚¼çš„æŠ€æœ¯ã€‚</p>
<p>è¿™ä¸€é˜¶æ®µï¼Œæœ€å¤§çš„æ”¶è·å¹¶ä¸åœ¨äºç›ˆäºï¼Œè€Œæ˜¯å¯¹æŠ•èµ„è¿™ä»¶äº‹çš„â€‹<strong>è®¤çŸ¥é‡æ„</strong>â€‹ã€‚è‡³å°‘æœ‰å‡ ä»¶äº‹ï¼Œæ˜¯å¿…é¡»è¡¥ä¸Šçš„åŸºç¡€èƒ½åŠ›ã€‚</p>
<p>ç¬¬ä¸€ï¼Œæ˜¯â€‹<strong>ä»“ä½æ§åˆ¶</strong>â€‹ã€‚å¦‚ä½•åœ¨ä¸è¸ç©ºçš„å‰æä¸‹ï¼Œé¿å…ä¸€æ¬¡æ€§æ‰“å…‰å­å¼¹ï¼Œæ˜¯éå¸¸éš¾çš„ä¸€ä»¶äº‹ã€‚ä»“ä½è¿‡ä½ï¼Œè¡Œæƒ…æ¥äº†åªèƒ½æ—è§‚ï¼›ä»“ä½è¿‡é«˜ï¼Œä¸‹è·Œæ—¶å´å¤±å»è¡¥ä»“ç©ºé—´ã€‚åˆç†çš„ä»“ä½ï¼Œæœ¬è´¨ä¸Šæ˜¯ä¸ºäº†â€‹<strong>å°½å¯èƒ½é•¿æ—¶é—´åœ°ç•™åœ¨ç‰Œæ¡Œä¸Š</strong>â€‹ã€‚</p>
<p>ç¬¬äºŒï¼Œæ˜¯â€‹<strong>ä¹°å–ç­–ç•¥</strong>â€‹ã€‚ä¸åŒè‚¡ç¥¨å¯¹åº”ä¸åŒç­–ç•¥ï¼šæœ‰çš„é€‚åˆé•¿æœŸæŒæœ‰ï¼Œæœ‰çš„æ›´åäº¤æ˜“å±æ€§ã€‚å¯¹é™Œç”Ÿæ ‡çš„ï¼Œæ›´éœ€è¦åˆ†æ‰¹å»ºä»“ï¼ŒåŒºåˆ†è§‚å¯Ÿä»“ã€äº¤æ˜“ä»“ä¸æ ¸å¿ƒä»“ï¼Œè€Œä¸æ˜¯ä¸€æ¬¡æ€§ä¸‹æ³¨ã€‚</p>
<p>ç¬¬ä¸‰ï¼Œæ˜¯â€‹<strong>æƒ…ç»ªç®¡ç†</strong>â€‹ã€‚è¿™ä¸€ç‚¹çš„å†²å‡»è¿œè¶…é¢„æœŸã€‚ä¸‹è·Œæ—¶å®¹æ˜“å†²åŠ¨è¡¥ä»“ï¼Œæƒ…ç»ªæŒç»­ä½è½ï¼›ä¸Šæ¶¨æ—¶åˆå®¹æ˜“è¿‡åº¦ä¹è§‚ï¼Œæ”¾æ¾çºªå¾‹ã€‚å›å¤´çœ‹ï¼Œç»å¤§å¤šæ•°é”™è¯¯æ“ä½œï¼Œéƒ½ä¸æ˜¯åˆ¤æ–­å¤±è¯¯ï¼Œè€Œæ˜¯å…¸å‹çš„â€œæƒ…ç»ªæ€â€ã€‚</p>
<p>ç¬¬å››ï¼Œæ˜¯â€‹<strong>äº¤æ˜“å¤ç›˜</strong>â€‹ã€‚ æ¯ä¸€ç¬”äº¤æ˜“éƒ½å€¼å¾—è¢«å¤ç›˜ï¼šç©¶ç«Ÿæ˜¯åŸºäºæ¸…æ™°é€»è¾‘åšå‡ºçš„å†³ç­–ï¼Œè¿˜æ˜¯éšå¸‚åœºæƒ…ç»ªè·Ÿé£çš„ç»“æœã€‚å¦‚æœè¿è‡ªå·±ä¸ºä»€ä¹ˆä¹°ã€ä¸ºä»€ä¹ˆå–éƒ½è¯´ä¸æ¸…æ¥šï¼Œé‚£ä¹ˆè¿™ç¬”äº¤æ˜“æœ¬èº«å°±æ˜¯ä¸åˆæ ¼çš„ã€‚</p>
<p>äº‹å®ä¸Šï¼Œè¿™äº›é—®é¢˜æœ€ç»ˆéƒ½å¯ä»¥å½’ç»“ä¸ºä¸€ä¸ªæ ¸å¿ƒï¼š<strong>æ˜¯å¦æ‹¥æœ‰ä¸€å¥—æˆç†Ÿã€å¯æ‰§è¡Œã€å¯å¤ç›˜çš„äº¤æ˜“ç³»ç»Ÿã€‚</strong></p>
<p>åªæœ‰åœ¨ç³»ç»Ÿçš„çº¦æŸä¸‹äº¤æ˜“ï¼Œæ‰èƒ½å°½å¯èƒ½å±è”½æƒ…ç»ªå¹²æ‰°ï¼Œè®©ç»“æœæ›´å¤šç”±æ¦‚ç‡è€Œéæƒ…ç»ªå†³å®šã€‚</p>
<p>æŸç§ç¨‹åº¦ä¸Šï¼Œè¿™å’Œå‰é¢æåˆ°çš„æŠ€æœ¯è·¯å¾„å¹¶æ— æœ¬è´¨åŒºåˆ«â€”â€”å°±åƒ 2026 å¹´æ˜¯ Agent çš„å…³é”®ä¸€å¹´ä¸€æ ·ï¼ŒæŠ•èµ„é¢†åŸŸåŒæ ·éœ€è¦ç³»ç»ŸåŒ–æ€ç»´ã€‚åœ¨ç¾è‚¡å¸‚åœºä¸­ï¼Œä¹Ÿæœ‰ä¸å°‘å€¼å¾—é•¿æœŸè§‚å¯Ÿçš„ä¼˜è´¨æ ‡çš„ï¼Œæ–°çš„ä¸€å¹´ï¼Œæˆ‘ä¼šé‡ç‚¹å…³æ³¨ï¼šâ€‹<strong>è°·æ­Œã€è‹±ä¼Ÿè¾¾ã€å°ç§¯ç”µã€ç‰¹æ–¯æ‹‰</strong>â€‹ã€‚</p>
<p>ç«‹ä¸‹æ–°å¹´çš„ç¬¬å››ä¸ª Flagï¼š<strong>å»ºç«‹å¹¶æŒç»­è¿­ä»£å±äºè‡ªå·±çš„äº¤æ˜“ç³»ç»Ÿï¼Œåœ¨æ§åˆ¶é£é™©çš„å‰æä¸‹ï¼Œäº‰å– 2026 å¹´å®ç° 10% çš„å¹´åº¦æ”¶ç›Šç›®æ ‡ã€‚</strong></p>
<h2 data-id="heading-6">ä¸ƒã€æ€»ç»“</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a693e4a41f7b4ef88b8e289db317bdb1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54ix5pWy5Luj56CB55qE5bCP6buE:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768046158&amp;x-signature=yZS3xbyt6I%2BWBFnTO7XW4j5SvAc%3D" alt="" loading="lazy"/></p>
<p>2025 å¹´è¿‡å¾—å¾ˆå¿«ï¼Œä¸€è½¬çœ¼å°±åˆ°äº†å¹´æœ«ã€‚å›å¤´ç®—äº†ä¸€ä¸‹ï¼Œè‡ªå·±å·²ç»æ¯•ä¸šå››å¹´åŠäº†ã€‚</p>
<p>è¿˜è®°å¾—åˆšæ¯•ä¸šçš„æ—¶å€™ï¼Œå¯¹å‘¨å›´çš„ä¸€åˆ‡éƒ½å……æ»¡å¥½å¥‡ï¼Œå¯¹æŠ€æœ¯ä¿æŒç€æœ€çº¯ç²¹çš„çƒ­æƒ…ã€‚é‚£æ—¶çŸ¥é“çš„ä¸å¤šï¼Œéœ€è¦æ‰¿æ‹…çš„äº‹æƒ…ä¹Ÿä¸å¤šï¼Œåè€Œç®€å•ã€ä¸“æ³¨ï¼Œä¹Ÿæ›´å®¹æ˜“æ„Ÿåˆ°å¿«ä¹ã€‚</p>
<p>éšç€å¹´é¾„å’Œé˜…å†çš„å¢é•¿ï¼Œä¸å¾—ä¸è€ƒè™‘çš„äº‹æƒ…è¶Šæ¥è¶Šå¤šï¼Œè´£ä»»ä¸å‹åŠ›ä¹Ÿéšä¹‹è€Œæ¥ï¼Œè¿™æ˜¯æˆé•¿è¿‡ç¨‹ä¸­æ— æ³•å›é¿çš„ä¸€éƒ¨åˆ†ã€‚</p>
<p>å›çœ‹ä»æ¯•ä¸šåˆ°ç°åœ¨çš„è¿™å‡ å¹´ï¼Œå¤šå°‘è¿˜æ˜¯å¸¦ç€ä¸€äº›è¿æ°”ã€‚æ•´ä½“æ¥çœ‹ï¼Œå¾ˆå°‘åœ¨å…³é”®èŠ‚ç‚¹ä¸Šåšå‡ºé”™è¯¯é€‰æ‹©ï¼Œç”Ÿæ´»ä¸äº‹ä¸šä¹Ÿåœ¨æŒç»­å‘æ›´å¥½çš„æ–¹å‘æ¨è¿›ã€‚æ­£å› å¦‚æ­¤ï¼Œä¹Ÿæ„ˆå‘çæƒœå½“ä¸‹æ‰€æ‹¥æœ‰çš„ä¸€åˆ‡ã€‚</p>
<p>ä½†è¿æ°”ä»æ¥ä¸æ˜¯å…¨éƒ¨ã€‚å¯¹æˆ‘è€Œè¨€ï¼Œæ›´é‡è¦çš„æ˜¯å§‹ç»ˆä¿æŒä¸€ç§è¡ŒåŠ¨ä¸Šçš„è‡ªè§‰â€”<strong>æƒ³åˆ°å°±å»åšï¼Œå†³å®šäº†æ–¹å‘ï¼Œå°±å°½åŠ›æŠŠäº‹æƒ…åšæˆã€‚</strong></p>
<p>æ¥ä¸‹æ¥ï¼Œä¹Ÿå¯¹ 2025 å¹´å¹´åˆç«‹ä¸‹çš„ Flag åšä¸€æ¬¡å®Œæ•´å¤ç›˜ï¼Œç»™è‡ªå·±è¿™ä¸€å¹´çš„é€‰æ‹©ä¸æŠ•å…¥ï¼Œç•™ä¸‹ä¸€ä»½ç›¸å¯¹å¦è¯šçš„ç­”æ¡ˆã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7cd26e1988c3445589b73ee542e6c38c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54ix5pWy5Luj56CB55qE5bCP6buE:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768046158&amp;x-signature=cPAs%2B64LwTL6WHzi1qqdjTKQ0jU%3D" alt="" loading="lazy"/></p>
<p>å›åˆ°ç»ˆç‚¹ï¼Œå†çœ‹èµ·ç‚¹ï¼Œä¼šå‘ç°å¾ˆå¤šäº‹æƒ…å¹¶éä¸€è¹´è€Œå°±ï¼Œè€Œæ˜¯åœ¨ä¸€æ¬¡æ¬¡é€‰æ‹©ä¸­é€æ¸å˜å¾—æ¸…æ™°ã€‚</p>
<p>è¿™ä¸€å¹´ï¼Œæ²¡æœ‰å¥‡è¿¹ï¼Œä¹Ÿæ²¡æœ‰åèˆªã€‚æœ‰çš„ï¼Œåªæ˜¯åœ¨å…³é”®é—®é¢˜ä¸Šç«™å¯¹æ–¹å‘ï¼Œåœ¨é‡è¦äº‹æƒ…ä¸ŠæŒç»­æŠ•å…¥ã€‚</p>
<p>èŠ±æœ‰é‡å¼€æ—¥ï¼Œäººæ— å†å°‘å¹´ã€‚<strong>2026ï¼Œè®©æˆ‘ä»¬é¡¶å³°ç›¸è§ã€‚</strong></p>
<p>å¦‚æœä½ ä¹Ÿå¯¹ <strong>åç«¯æ¶æ„</strong> å’Œ <strong>ä¸­é—´ä»¶æºç </strong> æ„Ÿå…´è¶£ï¼Œæ¬¢è¿æ·»åŠ åšä¸»å¾®ä¿¡ï¼šâ€‹<strong>hls1793929520</strong>â€‹ï¼Œä¸€èµ·å­¦ä¹ ï¼Œä¸€èµ·æˆé•¿ã€‚</p>
<p>æˆ‘æ˜¯ <strong>â€‹çˆ±æ•²ä»£ç çš„å°é»„ï¼Œâ€‹</strong>é˜¿é‡Œå·´å·´ Java å¼€å‘å·¥ç¨‹å¸ˆï¼ŒCSDN åšå®¢ä¸“å®¶ï¼Œä¸“æ³¨åç«¯æ¶æ„ä¸ä¸­é—´ä»¶æºç ã€‚</p>
<blockquote>
<p>æˆ‘ä»æ¸…æ™¨èµ°è¿‡ï¼Œä¹Ÿæ‹¥æŠ±å¤œæ™šçš„æ˜Ÿè¾°ã€‚äººç”Ÿæ²¡æœ‰æ·å¾„ï¼Œä½ æˆ‘çš†å¹³å‡¡ã€‚<strong>ä½ å¥½ï¼Œé™Œç”Ÿäººï¼Œä¸€èµ·å…±å‹‰ã€‚</strong></p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»éšå«éšåˆ°åˆ°è§„èŒƒé…é€ï¼šç°ä»£ç‰©æµç³»ç»Ÿä¸ REST API çš„ç™»åœº]]></title>    <link>https://juejin.cn/post/7590421489997889555</link>    <guid>https://juejin.cn/post/7590421489997889555</guid>    <pubDate>2026-01-03T10:07:30.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7590421489997889555" data-draft-id="7590421489997856787" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»éšå«éšåˆ°åˆ°è§„èŒƒé…é€ï¼šç°ä»£ç‰©æµç³»ç»Ÿä¸ REST API çš„ç™»åœº"/> <meta itemprop="keywords" content="åç«¯,Python,å…¨æ ˆ"/> <meta itemprop="datePublished" content="2026-01-03T10:07:30.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="éŸ©å¸ˆå‚…"/> <meta itemprop="url" content="https://juejin.cn/user/286348958252526"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»éšå«éšåˆ°åˆ°è§„èŒƒé…é€ï¼šç°ä»£ç‰©æµç³»ç»Ÿä¸ REST API çš„ç™»åœº
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/286348958252526/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    éŸ©å¸ˆå‚…
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-03T10:07:30.000Z" title="Sat Jan 03 2026 10:07:30 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    11
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{line-height:1.75;font-family:-apple-system-font,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei UI,Microsoft YaHei,Arial,sans-serif;letter-spacing:2px;background-image:linear-gradient(90deg,rgba(50,0,0,.05) 3%,transparent 0),linear-gradient(1turn,rgba(50,0,0,.05) 3%,transparent 0);background-size:20px 20px;background-position:50%;word-break:break-word;font-weight:400;font-size:15px;overflow-x:hidden;color:#333}.markdown-body h1{font-size:23px;margin-bottom:5px;font-weight:700;padding-left:10px;border-left:5px solid #773098}.markdown-body h2{font-size:19px;font-weight:700;padding-left:10px;border-left:5px solid #916dd5}.markdown-body h3{font-size:17px;font-weight:700;padding-left:10px;border-left:5px solid #d89cf6}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{font-size:14px;margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{display:block;max-width:100%;margin:1em 0;border-radius:6px;box-shadow:2px 4px 7px #999;user-select:none}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{padding:.2em .5em;font-weight:700;font-family:-apple-system-font,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei UI,Microsoft YaHei,Arial,sans-serif;font-size:1em;color:#916dd5;word-break:break-word;overflow-x:auto;background-color:none;border-radius:2px}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;font-family:-apple-system-font,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei UI,Microsoft YaHei,Arial,sans-serif;font-weight:400;font-size:.9em;padding:16px 12px;margin:0;color:#333;word-break:normal;overflow-x:auto;background:#f8f8f8;scroll-behavior:smooth}.markdown-body a{text-decoration:none;color:#916dd5;font-weight:700;border-bottom:1px solid #916dd5}.markdown-body a:active,.markdown-body a:hover{color:#773098}.markdown-body table{display:inline-block!important;font-size:14px;width:auto;max-width:100%;overflow:auto;border:1px solid #916dd5;border-collapse:collapse}.markdown-body thead{background-color:#916dd5;color:#fff;text-align:left}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px;border:1px solid #916dd5}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #d89cf6;background-color:#f4eeff}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0;line-height:26px}.markdown-body ol,.markdown-body ul{padding-left:28px;list-style-type:circle}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body b,.markdown-body strong{color:#916dd5;font-weight:700}.markdown-body b:before,.markdown-body strong:before{content:"ã€Œ"}.markdown-body b:after,.markdown-body strong:after{content:"ã€"}.markdown-body em,.markdown-body i{color:#916dd5}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="androidstudio">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#a9b7c6;background:#282b2e}.hljs-bullet,.hljs-literal,.hljs-number,.hljs-symbol{color:#6897bb}.hljs-deletion,.hljs-keyword,.hljs-selector-tag{color:#cc7832}.hljs-link,.hljs-template-variable,.hljs-variable{color:#629755}.hljs-comment,.hljs-quote{color:grey}.hljs-meta{color:#bbb529}.hljs-addition,.hljs-attribute,.hljs-string{color:#6a8759}.hljs-section,.hljs-title,.hljs-type{color:#ffc66d}.hljs-name,.hljs-selector-class,.hljs-selector-id{color:#e8bf6a}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong>æ‘˜è¦</strong>ï¼šç¬¬ä¸‰ä»£ç‰©æµç³»ç»Ÿï¼ˆFlaskã€Djangoã€Expressï¼‰å¸¦æ¥äº†è·¯ç”±ç³»ç»Ÿå’ŒæŒç»­è¿è¡Œï¼Œç»™è¿›ç¨‹å‡è´Ÿäº†ã€‚å‰åç«¯åˆ†ç¦»è®©çµç‹æ³•å¸ˆç™»åœºï¼ŒREST API ä½œä¸º"ç‰©æµæ³•å…¸"ä¸ºä¸åŒç³»ç»Ÿå»ºç«‹äº†ç»Ÿä¸€çš„é…é€æ ‡å‡†ã€‚</p>
<h2 data-id="heading-0">ğŸ“œ ç¬¬ä¸‰ä»£ï¼šç°ä»£ç‰©æµç³»ç»Ÿï¼ˆFlaskã€Djangoã€Expressï¼‰</h2>
<h3 data-id="heading-1">æ—¶ä»£èƒŒæ™¯</h3>
<p>ğŸ å¤§èŸ’è›‡æ³•å¸ˆï¼š"ç°ä»£ç‰©æµç³»ç»Ÿå‡ºç°äº†ï¼Œæ¯”å¦‚æˆ‘çš„ Flaskã€Djangoï¼Œè¿˜æœ‰å¤œç‹æ³•å¸ˆçš„ Expressã€‚ä»è¿™ä¸€ä»£å¼€å§‹ï¼Œæœ‰äº†æœ¬è´¨çš„æ”¹å˜ï¼šè¿›ç¨‹æŒç»­è¿è¡Œï¼Œæœ‰å›ºå®šçš„è·¯ç”±ç³»ç»Ÿï¼Œå¯ä»¥åªå–ç”¨ä»“åº“ä¸­çš„éƒ¨åˆ†å†…å®¹ï¼Œä¸ä¾èµ–ä¹‹å‰è®¢å•çš„è¿è¾“å›¢é˜Ÿã€‚"</p>
<p><strong>å…³é”®åˆ†å‰²ç‚¹</strong>ï¼š</p>
<ul>
<li><strong>ä»ç¬¬ä¸‰ä»£å¼€å§‹</strong>ï¼šæ ¸å¿ƒæ˜¯ç»™è¿›ç¨‹å‡è´Ÿäº†</li>
<li><strong>è¿›ç¨‹ = æ•´ä¸ªé€è´§çš„ä»»åŠ¡</strong>ï¼šä¸æ˜¯è½¦é©¬ï¼Œè€Œæ˜¯æ•´ä¸ªé€è´§çš„ä»»åŠ¡</li>
<li><strong>ä¹‹å‰çš„è¿é€ä»»åŠ¡</strong>ï¼ˆç¬¬ä¸€ã€äºŒä»£ï¼‰ï¼šéœ€è¦åšè¿‡è¿™ä¸€å•å­çš„è¿è¾“å›¢é˜Ÿï¼Œè¿è¾“å›¢é˜Ÿéœ€è¦è®°å½•è·¯å¾„</li>
<li><strong>åˆ°äº†ç¬¬ä¸‰ä»£</strong>ï¼š
<ul>
<li>æœ‰å›ºå®šçš„è·¯çº¿ï¼ˆè·¯ç”±ç³»ç»Ÿï¼‰</li>
<li>èƒ½å¤ŸçŸ¥é“éœ€è¦å»å“ªäº›ä»“åº“å–å“ªäº›ä¸œè¥¿</li>
<li>è¿™äº›æˆäº†æ–‡æ¡£ï¼Œè®°å½•åœ¨äº†å†…å­˜é‡Œé¢</li>
<li>ä»»åŠ¡å°±å˜å¾—ç®€å•äº†</li>
</ul>
</li>
</ul>
<p><strong>ç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li><strong>Flaskï¼ˆPythonï¼‰</strong>ï¼šå¤§èŸ’è›‡æ³•å¸ˆçš„è½»é‡çº§ç‰©æµç³»ç»Ÿï¼Œçµæ´»</li>
<li><strong>Djangoï¼ˆPythonï¼‰</strong>ï¼šå¤§èŸ’è›‡æ³•å¸ˆçš„å…¨åŠŸèƒ½ç‰©æµç³»ç»Ÿï¼ŒåŠŸèƒ½ä¸°å¯Œ</li>
<li><strong>Expressï¼ˆNode.jsï¼‰</strong>ï¼šå¤œç‹æ³•å¸ˆçš„ç‰©æµç³»ç»Ÿï¼ŒJavaScript ä¸–ç•Œçš„ç‰©æµç³»ç»Ÿ</li>
<li><strong>æŒç»­è¿è¡Œ</strong>ï¼šä¸éœ€è¦æ¯æ¬¡è¯·æ±‚éƒ½é‡æ–°å¯åŠ¨</li>
<li><strong>è·¯ç”±ç³»ç»Ÿ</strong>ï¼šå¯ä»¥å®šä¹‰ä¸åŒçš„é…é€è·¯çº¿</li>
<li><strong>ä¸­é—´ä»¶æ”¯æŒ</strong>ï¼šå¯ä»¥æ·»åŠ ç‰©æµä¸­å¿ƒç‚¹</li>
</ul>
<p><strong>æ¯”å–»</strong>ï¼š</p>
<pre><code class="hljs language-plain" lang="plain">è¿›ç¨‹ = æ•´ä¸ªé€è´§çš„ä»»åŠ¡

ä¹‹å‰çš„è¿é€ä»»åŠ¡ï¼ˆç¬¬ä¸€ã€äºŒä»£ï¼‰ï¼š
  éœ€è¦åšè¿‡è¿™ä¸€å•å­çš„è¿è¾“å›¢é˜Ÿ
  è¿è¾“å›¢é˜Ÿéœ€è¦è®°å½•è·¯å¾„
  ä»»åŠ¡å¤æ‚ï¼Œéœ€è¦è¿è¾“å›¢é˜Ÿè®°ä½è·¯å¾„

åˆ°äº†ç¬¬ä¸‰ä»£ï¼š
  æœ‰å›ºå®šçš„è·¯çº¿ï¼ˆè·¯ç”±ç³»ç»Ÿï¼‰
  èƒ½å¤ŸçŸ¥é“éœ€è¦å»å“ªäº›ä»“åº“å–å“ªäº›ä¸œè¥¿
  è¿™äº›æˆäº†æ–‡æ¡£ï¼Œè®°å½•åœ¨äº†å†…å­˜é‡Œé¢
  ä»»åŠ¡å°±å˜å¾—ç®€å•äº†
  â†“
æ”¶åˆ°è®¢å•ï¼š
  ğŸ å¤§èŸ’è›‡æ³•å¸ˆï¼š"ç‰©æµç³»ç»Ÿä¸€ç›´åœ¨è¿è¡Œï¼Œç›´æ¥å¤„ç†è®¢å•..."
  â†“
é€šè¿‡è·¯ç”±ç³»ç»Ÿï¼ˆå›ºå®šçš„è·¯çº¿æ–‡æ¡£ï¼‰çŸ¥é“éœ€è¦æ‰“å¼€å“ªäº›ä»“åº“
  â†“
åªå–ç”¨ä»“åº“ä¸­çš„éƒ¨åˆ†å†…å®¹ï¼ˆå‡½æ•°ã€ç±»ç­‰ï¼‰
  â†“
å¤„ç†è®¢å•ï¼ˆä»»åŠ¡å˜ç®€å•äº†ï¼‰
  â†“
è¿”å›ç»“æœ
  â†“
è¿›ç¨‹ç»§ç»­è¿è¡Œï¼Œç­‰å¾…ä¸‹ä¸€ä¸ªè®¢å•
</code></pre>
<p><strong>ä¸ CGI/PHP çš„æœ¬è´¨åŒºåˆ«</strong>ï¼š</p>
<p><strong>CGI/PHPï¼ˆç¬¬ä¸€ã€äºŒä»£ï¼‰</strong>ï¼š</p>
<pre><code class="hljs language-plain" lang="plain">è¿›ç¨‹ = æ•´ä¸ªé€è´§çš„ä»»åŠ¡
æ¯æ¬¡è¯·æ±‚ï¼š
  å¯åŠ¨/å¤ç”¨è¿›ç¨‹ â†’ åŠ è½½æ•´ä¸ªæ–‡ä»¶ â†’ å¤„ç†è®¢å• â†’ è¿›ç¨‹ç»“æŸ/ä¿ç•™
  è¿è¾“å›¢é˜Ÿæ¯æ¬¡éƒ½è¦é‡æ–°è£…è´§ï¼Œä¸€ä¸ªä¸ªä»“åº“å»å¼€
  éœ€è¦åšè¿‡è¿™ä¸€å•å­çš„è¿è¾“å›¢é˜Ÿï¼Œè¿è¾“å›¢é˜Ÿéœ€è¦è®°å½•è·¯å¾„
  ä»»åŠ¡å¤æ‚
</code></pre>
<p><strong>ç°ä»£ç‰©æµç³»ç»Ÿï¼ˆç¬¬ä¸‰ä»£å¼€å§‹ï¼‰</strong>ï¼š</p>
<pre><code class="hljs language-plain" lang="plain">è¿›ç¨‹ = æ•´ä¸ªé€è´§çš„ä»»åŠ¡
æ ¸å¿ƒæ˜¯ç»™è¿›ç¨‹å‡è´Ÿäº†

æœ‰å›ºå®šçš„è·¯çº¿ï¼ˆè·¯ç”±ç³»ç»Ÿï¼‰
èƒ½å¤ŸçŸ¥é“éœ€è¦å»å“ªäº›ä»“åº“å–å“ªäº›ä¸œè¥¿
è¿™äº›æˆäº†æ–‡æ¡£ï¼Œè®°å½•åœ¨äº†å†…å­˜é‡Œé¢
ä»»åŠ¡å°±å˜å¾—ç®€å•äº†
  â†“
æ”¶åˆ°è®¢å•ï¼š
  é€šè¿‡è·¯ç”±ç³»ç»Ÿï¼ˆå›ºå®šçš„è·¯çº¿æ–‡æ¡£ï¼‰çŸ¥é“éœ€è¦æ‰“å¼€å“ªäº›ä»“åº“
  â†“
åªå–ç”¨ä»“åº“ä¸­çš„éƒ¨åˆ†å†…å®¹ï¼ˆå‡½æ•°ã€ç±»ç­‰ï¼‰
  â†“
å¤„ç†è®¢å•ï¼ˆä»»åŠ¡å˜ç®€å•äº†ï¼‰
  â†“
è¿›ç¨‹ç»§ç»­è¿è¡Œï¼Œç­‰å¾…ä¸‹ä¸€ä¸ªè®¢å•
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6564002c7a984037a8eb73c8f66b029a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Z-p5biI5YKF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768040796&amp;x-signature=8m2KkHRKloN9YVszWSmaj9NG3XQ%3D" alt="image.png" loading="lazy"/></p>
<p><strong>ä¼˜åŠ¿</strong>ï¼š</p>
<ul>
<li>âœ… æ ¸å¿ƒæ˜¯ç»™è¿›ç¨‹å‡è´Ÿäº†ï¼šä»»åŠ¡å˜ç®€å•äº†</li>
<li>âœ… æŒç»­è¿è¡Œï¼Œä¸éœ€è¦æ¯æ¬¡é‡æ–°å¯åŠ¨</li>
<li>âœ… è·¯ç”±ç³»ç»Ÿï¼ˆå›ºå®šçš„è·¯çº¿æ–‡æ¡£ï¼‰ï¼Œå¯ä»¥å®šä¹‰ä¸åŒçš„é…é€è·¯çº¿</li>
<li>âœ… èƒ½å¤ŸçŸ¥é“éœ€è¦å»å“ªäº›ä»“åº“å–å“ªäº›ä¸œè¥¿ï¼Œè®°å½•åœ¨äº†å†…å­˜é‡Œé¢</li>
<li>âœ… å¯ä»¥åªå–ç”¨ä»“åº“ä¸­çš„éƒ¨åˆ†å†…å®¹ï¼Œä¸éœ€è¦åŠ è½½æ•´ä¸ªæ–‡ä»¶</li>
<li>âœ… ä¸éœ€è¦åšè¿‡è¿™ä¸€å•å­çš„è¿è¾“å›¢é˜Ÿï¼Œä»»åŠ¡å°±å˜å¾—ç®€å•äº†</li>
<li>âœ… ä¸­é—´ä»¶æ”¯æŒï¼Œå¯ä»¥æ·»åŠ ç‰©æµä¸­å¿ƒç‚¹</li>
<li>âœ… æ•ˆç‡é«˜ï¼Œå¯ä»¥å¤„ç†å¤§é‡è®¢å•</li>
</ul>
<p><strong>æƒè¡¡ï¼šæŒç»­è¿è¡Œçš„èµ„æºæ¶ˆè€—</strong></p>
<p>ğŸ å¤§èŸ’è›‡æ³•å¸ˆï¼š"ç¡®å®ï¼Œåˆ°äº†ç¬¬ä¸‰ä»£ï¼Œè¿è¾“ä»»åŠ¡ï¼ˆè¿›ç¨‹ï¼‰ä¸€ç›´å­˜åœ¨ï¼Œä¸€ç›´æœ‰äººå¾…å‘½ï¼Œè¿™ç¡®å®æœ‰èµ„æºæ¶ˆè€—ã€‚ä½†è¿™æ˜¯ä¸€ä¸ªæƒè¡¡ï¼š"</p>
<p><strong>æŒç»­è¿è¡Œçš„æ¶ˆè€—</strong>ï¼š</p>
<ul>
<li>âš ï¸ <strong>å†…å­˜æ¶ˆè€—</strong>ï¼šè¿›ç¨‹ä¸€ç›´å ç”¨å†…å­˜ï¼Œå³ä½¿æ²¡æœ‰è®¢å•</li>
<li>âš ï¸ <strong>CPU æ¶ˆè€—</strong>ï¼šéœ€è¦ä¸€ç›´ç›‘å¬è®¢å•è¯·æ±‚ï¼ˆè™½ç„¶å¾ˆå°‘ï¼Œä½†ç¡®å®åœ¨æ¶ˆè€—ï¼‰</li>
<li>âš ï¸ <strong>èµ„æºå ç”¨</strong>ï¼šè¿è¾“å›¢é˜Ÿä¸€ç›´å¾…å‘½ï¼Œå ç”¨èµ„æº</li>
</ul>
<p><strong>ä½†é¿å…äº†ä»€ä¹ˆ</strong>ï¼š</p>
<ul>
<li>âœ… <strong>é¿å…æ¯æ¬¡å¯åŠ¨è¿›ç¨‹çš„å¼€é”€</strong>ï¼šç¬¬ä¸€ä»£æ¯æ¬¡éƒ½è¦é‡æ–°å¯åŠ¨è¿›ç¨‹ï¼Œå¯åŠ¨æˆæœ¬å¾ˆé«˜</li>
<li>âœ… <strong>é¿å…æ¯æ¬¡åŠ è½½ä»£ç çš„å¼€é”€</strong>ï¼šä¸éœ€è¦æ¯æ¬¡é‡æ–°åŠ è½½æ•´ä¸ªæ–‡ä»¶</li>
<li>âœ… <strong>é¿å…æ¯æ¬¡åˆå§‹åŒ–çš„å¼€é”€</strong>ï¼šä¸éœ€è¦æ¯æ¬¡é‡æ–°åˆå§‹åŒ–ç¯å¢ƒ</li>
<li>âœ… <strong>å“åº”é€Ÿåº¦æ›´å¿«</strong>ï¼šæ”¶åˆ°è®¢å•ç«‹å³å¤„ç†ï¼Œä¸éœ€è¦ç­‰å¾…å¯åŠ¨</li>
</ul>
<p><strong>æƒè¡¡ç»“æœ</strong>ï¼š</p>
<pre><code class="hljs language-plain" lang="plain">ç¬¬ä¸€ä»£ï¼ˆCGIï¼‰ï¼š
  æ²¡æœ‰è®¢å•æ—¶ï¼š0 æ¶ˆè€—ï¼ˆè¿›ç¨‹ä¸å­˜åœ¨ï¼‰
  æœ‰è®¢å•æ—¶ï¼šé«˜æ¶ˆè€—ï¼ˆå¯åŠ¨è¿›ç¨‹ + åŠ è½½ä»£ç  + åˆå§‹åŒ– + å¤„ç†ï¼‰
  = æŒ‰éœ€æ¶ˆè€—ï¼Œä½†æ¯æ¬¡å¯åŠ¨æˆæœ¬é«˜

ç¬¬ä¸‰ä»£ï¼ˆFlask/Djangoï¼‰ï¼š
  æ²¡æœ‰è®¢å•æ—¶ï¼šä½æ¶ˆè€—ï¼ˆè¿›ç¨‹åœ¨ç›‘å¬ï¼Œå ç”¨å†…å­˜ï¼‰
  æœ‰è®¢å•æ—¶ï¼šä½æ¶ˆè€—ï¼ˆç›´æ¥å¤„ç†ï¼Œä¸éœ€è¦å¯åŠ¨ï¼‰
  = æŒç»­ä½æ¶ˆè€—ï¼Œä½†å“åº”é€Ÿåº¦å¿«
</code></pre>
<p><strong>ä»€ä¹ˆæ—¶å€™ç”¨å“ªç§æ–¹å¼</strong>ï¼š</p>
<ul>
<li><strong>ç¬¬ä¸€ä»£ï¼ˆæŒ‰éœ€å¯åŠ¨ï¼‰</strong>ï¼šé€‚åˆè®¢å•å¾ˆå°‘çš„åœºæ™¯ï¼Œæ²¡æœ‰è®¢å•æ—¶å®Œå…¨ä¸æ¶ˆè€—èµ„æº</li>
<li><strong>ç¬¬ä¸‰ä»£ï¼ˆæŒç»­è¿è¡Œï¼‰</strong>ï¼šé€‚åˆè®¢å•é¢‘ç¹çš„åœºæ™¯ï¼Œç”¨æŒç»­çš„èµ„æºæ¶ˆè€—æ¢å–æ›´å¿«çš„å“åº”é€Ÿåº¦</li>
</ul>
<p><strong>é—®é¢˜</strong>ï¼š</p>
<ul>
<li>âš ï¸ ä½†è¿˜æ²¡æœ‰ç»Ÿä¸€çš„"é…é€æ ‡å‡†"ï¼ˆREST API æ¦‚å¿µï¼‰</li>
</ul>
<p><strong>å‰åç«¯åˆ†ç¦»å¸¦æ¥çš„é©å‘½æ€§æ”¹å˜</strong>ï¼š</p>
<p>ğŸ å¤§èŸ’è›‡æ³•å¸ˆï¼š"ä»ç¬¬ä¸‰ä»£å¼€å§‹ï¼Œçµç‹æ³•å¸ˆå‡ºç°äº†ï¼Œå‰åç«¯åˆ†ç¦»å¸¦æ¥äº†é©å‘½æ€§çš„æ”¹å˜ã€‚è¿™ä¸ä»…ä»…æ˜¯æŠ€æœ¯ä¸Šçš„æ”¹å˜ï¼Œæ›´æ˜¯æ•´ä¸ªç‰©æµç³»ç»Ÿçš„å‡çº§ã€‚"</p>
<p><strong>å‰åç«¯åˆ†ç¦»çš„ä»·å€¼</strong>ï¼š</p>
<ol>
<li><strong>è´§ç‰©é›†ä¸­åˆ°çµç‹æ³•å¸ˆå¤„æ‰“åŒ…å’Œå”®å–</strong>ï¼š
<ul>
<li>ä¹‹å‰ï¼šæ¯ä¸ªæ³•å¸ˆéƒ½è¦è‡ªå·±æ‰“åŒ…ã€è‡ªå·±å–è´§ï¼Œå„è‡ªä¸ºæ”¿</li>
<li>ç°åœ¨ï¼šæ‰€æœ‰æ³•å¸ˆçš„è´§ç‰©éƒ½é€åˆ°çµç‹æ³•å¸ˆé‚£é‡Œï¼Œç»Ÿä¸€æ‰“åŒ…å’Œå”®å–</li>
<li>å¥½å¤„ï¼šä¸“ä¸šåŒ–åˆ†å·¥ï¼Œæ¯ä¸ªæ³•å¸ˆä¸“æ³¨è‡ªå·±çš„æ ¸å¿ƒèƒ½åŠ›</li>
</ul>
</li>
<li><strong>å°†å¤‡è´§å’Œé€è´§å›ºå®šä¸‹æ¥</strong>ï¼š
<ul>
<li>ä¹‹å‰ï¼šæ¯æ¬¡è®¢å•éƒ½è¦é‡æ–°å‡†å¤‡ï¼Œå¤‡è´§æµç¨‹ä¸å›ºå®š</li>
<li>ç°åœ¨ï¼šå¤‡è´§å’Œé€è´§æµç¨‹å›ºå®šä¸‹æ¥ï¼Œæœ‰æ ‡å‡†åŒ–çš„è·¯çº¿</li>
<li>å¥½å¤„ï¼šæ•ˆç‡æå‡ï¼Œé”™è¯¯å‡å°‘</li>
</ul>
</li>
<li><strong>èƒ½å¤Ÿå”®å–çš„è´§ç‰©ç§ç±»å˜å¤šäº†</strong>ï¼š
<ul>
<li>ä¹‹å‰ï¼šæ¯ä¸ªæ³•å¸ˆåªèƒ½å–è‡ªå·±æ“…é•¿çš„è´§ç‰©ï¼Œç§ç±»æœ‰é™</li>
<li>ç°åœ¨ï¼šçµç‹æ³•å¸ˆå¯ä»¥æ•´åˆå¤šä¸ªæ³•å¸ˆçš„è´§ç‰©ï¼Œæä¾›æ›´å¤šç§ç±»çš„å•†å“</li>
<li>å¥½å¤„ï¼šå®¢æˆ·é€‰æ‹©æ›´å¤šï¼Œæ»¡è¶³æ›´å¤šéœ€æ±‚</li>
</ul>
</li>
<li><strong>è·¯çº¿å¯ä»¥å›ºå®šäº†ä¸‹æ¥</strong>ï¼š
<ul>
<li>ä¹‹å‰ï¼šæ¯æ¬¡éƒ½è¦é‡æ–°è§„åˆ’è·¯çº¿ï¼Œè¿è¾“å›¢é˜Ÿéœ€è¦è®°å½•è·¯å¾„</li>
<li>ç°åœ¨ï¼šè·¯çº¿å›ºå®šä¸‹æ¥ï¼Œè®°å½•åœ¨è·¯ç”±ç³»ç»Ÿä¸­ï¼Œä¸éœ€è¦æ¯æ¬¡éƒ½é‡æ–°è§„åˆ’</li>
<li>å¥½å¤„ï¼šä»»åŠ¡å˜ç®€å•äº†ï¼Œæ•ˆç‡æ›´é«˜</li>
</ul>
</li>
<li><strong>èƒ½å¤Ÿå¾—åˆ°çµç‹æ³•å¸ˆæ›´å¥½çš„åŒ…è£…äº†</strong>ï¼š
<ul>
<li>ä¹‹å‰ï¼šæ¯ä¸ªæ³•å¸ˆè‡ªå·±åŒ…è£…ï¼ŒåŒ…è£…è´¨é‡å‚å·®ä¸é½</li>
<li>ç°åœ¨ï¼šçµç‹æ³•å¸ˆä¸“ä¸šåŒ…è£…ï¼ŒåŒ…è£…ç²¾ç¾ï¼Œç”¨æˆ·ä½“éªŒæ›´å¥½</li>
<li>å¥½å¤„ï¼šç»Ÿä¸€çš„ç”¨æˆ·ä½“éªŒï¼Œæ›´å¥½çš„äº¤äº’</li>
</ul>
</li>
<li><strong>ç»™å¾ˆå¤šæ³•å¸ˆå¸¦æ¥äº†ä¾¿åˆ©</strong>ï¼š
<ul>
<li>ğŸ å¤§èŸ’è›‡æ³•å¸ˆï¼š"æˆ‘ä¸éœ€è¦å…³å¿ƒå‰ç«¯å±•ç¤ºï¼Œåªéœ€è¦ä¸“æ³¨é…åˆ¶é­”è¯ï¼Œè¿”å› JSON æ•°æ®å°±è¡Œã€‚"</li>
<li>ğŸŒ™ å¤œç‹æ³•å¸ˆï¼š"æˆ‘å¯ä»¥éšè—äºé»‘æš—ä¸­ï¼Œä¸“æ³¨åç«¯é€»è¾‘ï¼Œå‰ç«¯äº¤ç»™å…„å¼Ÿçµç‹æ³•å¸ˆã€‚"</li>
<li>â˜• é»‘æ°´ç”²ç“¦æ³•å¸ˆï¼š"ç°ä»£æ¨¡å¼ä¸‹ï¼Œæˆ‘ä¹Ÿå¯ä»¥ä¸çµç‹æ³•å¸ˆåˆä½œï¼Œæä¾› REST APIï¼Œä¸éœ€è¦è‡ªå·±å¤„ç†å‰ç«¯ã€‚"</li>
<li>ğŸ›¡ï¸ è“ç›¾æ³•å¸ˆï¼š"ç°ä»£æ¨¡å¼ä¸‹ï¼Œæˆ‘çš„ ASP.NET Core Web API ä¹Ÿå¯ä»¥ä¸çµç‹æ³•å¸ˆåˆä½œï¼Œå‰åç«¯åˆ†ç¦»ã€‚"</li>
</ul>
</li>
</ol>
<p><strong>å‰åç«¯åˆ†ç¦»çš„æ¯”å–»</strong>ï¼š</p>
<pre><code class="hljs language-plain" lang="plain">ä¹‹å‰ï¼ˆä¼ ç»Ÿæ¨¡å¼ï¼‰ï¼š
  æ³•å¸ˆ â†’ è‡ªå·±æ‰“åŒ… â†’ è‡ªå·±å–è´§ â†’ å®¢æˆ·
  æ¯ä¸ªæ³•å¸ˆéƒ½è¦åšæ‰€æœ‰äº‹æƒ…ï¼Œæ•ˆç‡ä½ï¼Œç§ç±»å°‘

ç°åœ¨ï¼ˆå‰åç«¯åˆ†ç¦»ï¼‰ï¼š
  æ³•å¸ˆ â†’ è¿”å› JSON æ•°æ® â†’ çµç‹æ³•å¸ˆç»Ÿä¸€æ‰“åŒ…å’Œå”®å– â†’ å®¢æˆ·
  æ³•å¸ˆä¸“æ³¨æ ¸å¿ƒèƒ½åŠ›ï¼Œçµç‹æ³•å¸ˆä¸“ä¸šåŒ…è£…å’Œå±•ç¤º
  è´§ç‰©ç§ç±»æ›´å¤šï¼ŒåŒ…è£…æ›´å¥½ï¼Œè·¯çº¿å›ºå®š
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4d8f77aba8c04f739f94165fa40019a6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Z-p5biI5YKF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768040796&amp;x-signature=qgIXuJuXGBk76gzK9wpftDPFVnc%3D" alt="image.png" loading="lazy"/></p>
<p>ğŸ§  å°ç»“ï¼šä»è¿™ä¸€ä»£å¼€å§‹ï¼Œç‰©æµç³»ç»Ÿç»ˆäºæœ‰äº†â€œè·¯çº¿å›¾â€å’Œâ€œæ‰“åŒ…å›¢é˜Ÿâ€ã€‚è™½ç„¶è¿˜ä¸æ˜¯ç»Ÿä¸€æ ‡å‡†ï¼Œä½†å„åœ°æ³•å¸ˆä¹‹é—´ï¼Œå¼€å§‹ç”¨åŒä¸€ç§è¯­è¨€äº¤æµé€è´§æ–¹å¼äº†ã€‚</p>
<p><strong>ä¸–ç•Œè§‚è§£é‡Š</strong>ï¼š</p>
<ul>
<li>ğŸ å¤§èŸ’è›‡æ³•å¸ˆï¼š"ä»ç¬¬ä¸‰ä»£å¼€å§‹ï¼Œæˆ‘çš„ Flask å’Œ Django ç‰©æµç³»ç»Ÿæœ‰äº†æœ¬è´¨çš„æ”¹å˜ã€‚æ ¸å¿ƒæ˜¯ç»™è¿›ç¨‹å‡è´Ÿäº†ã€‚è¿›ç¨‹æ˜¯æ•´ä¸ªé€è´§çš„ä»»åŠ¡ï¼Œä¸æ˜¯è½¦é©¬ã€‚ä¹‹å‰çš„è¿é€ä»»åŠ¡éœ€è¦åšè¿‡è¿™ä¸€å•å­çš„è¿è¾“å›¢é˜Ÿï¼Œè¿è¾“å›¢é˜Ÿéœ€è¦è®°å½•è·¯å¾„ï¼Œä»»åŠ¡å¤æ‚ã€‚åˆ°äº†ç¬¬ä¸‰ä»£ï¼Œæœ‰å›ºå®šçš„è·¯çº¿ï¼ˆè·¯ç”±ç³»ç»Ÿï¼‰ï¼Œèƒ½å¤ŸçŸ¥é“éœ€è¦å»å“ªäº›ä»“åº“å–å“ªäº›ä¸œè¥¿ï¼Œè¿™äº›æˆäº†æ–‡æ¡£ï¼Œè®°å½•åœ¨äº†å†…å­˜é‡Œé¢ï¼Œä»»åŠ¡å°±å˜å¾—ç®€å•äº†ã€‚è™½ç„¶è¿è¾“ä»»åŠ¡ä¸€ç›´å­˜åœ¨ï¼Œä¸€ç›´æœ‰äººå¾…å‘½ï¼Œè¿™ç¡®å®æœ‰èµ„æºæ¶ˆè€—ï¼ˆå†…å­˜ã€CPUï¼‰ï¼Œä½†è¿™æ˜¯ä¸€ä¸ªæƒè¡¡ï¼šç”¨æŒç»­çš„èµ„æºæ¶ˆè€—ï¼Œæ¢å–æ›´å¿«çš„å“åº”é€Ÿåº¦ã€‚å› ä¸ºé¿å…äº†æ¯æ¬¡å¯åŠ¨è¿›ç¨‹ã€åŠ è½½ä»£ç ã€åˆå§‹åŒ–çš„å¼€é”€ï¼Œæ‰€ä»¥æ•´ä½“æ•ˆç‡æ›´é«˜ã€‚æ›´é‡è¦çš„æ˜¯ï¼Œçµç‹æ³•å¸ˆçš„å‡ºç°å¸¦æ¥äº†å‰åç«¯åˆ†ç¦»ï¼Œè¿™ç»™æ•´ä¸ªç‰©æµç³»ç»Ÿå¸¦æ¥äº†é©å‘½æ€§çš„æ”¹å˜ï¼šè´§ç‰©å¯ä»¥é›†ä¸­åˆ°çµç‹æ³•å¸ˆå¤„æ‰“åŒ…å’Œå”®å–ï¼Œå¤‡è´§å’Œé€è´§å›ºå®šä¸‹æ¥ï¼Œèƒ½å¤Ÿå”®å–çš„è´§ç‰©ç§ç±»å˜å¤šäº†ï¼Œè·¯çº¿å¯ä»¥å›ºå®šä¸‹æ¥ï¼Œå¹¶ä¸”èƒ½å¤Ÿå¾—åˆ°çµç‹æ³•å¸ˆæ›´å¥½çš„åŒ…è£…ã€‚è¿™å…¶å®æ˜¯ç»™å¾ˆå¤šæ³•å¸ˆå¸¦æ¥äº†ä¾¿åˆ©ï¼Œæˆ‘ä»¬åªéœ€è¦ä¸“æ³¨æ ¸å¿ƒèƒ½åŠ›ï¼Œè¿”å› JSON æ•°æ®ï¼Œçµç‹æ³•å¸ˆè´Ÿè´£ä¸“ä¸šåŒ…è£…å’Œå±•ç¤ºã€‚"</li>
<li>ğŸŒ™ å¤œç‹æ³•å¸ˆï¼š"æˆ‘çš„ Express ç‰©æµç³»ç»Ÿä¹Ÿæ˜¯è¿™æ ·çš„ã€‚è™½ç„¶æˆ‘éšè—äºé»‘æš—ä¸­ï¼Œä¸éœ²é¢ï¼Œä½†æˆ‘çš„ç‰©æµç³»ç»Ÿä¸€ç›´åœ¨è¿è¡Œï¼Œä¸å…„å¼Ÿçµç‹æ³•å¸ˆåˆä½œã€‚æˆ‘è´Ÿè´£åç«¯é…ç½®ï¼Œçµç‹æ³•å¸ˆè´Ÿè´£å–è´§ç»™å®¢æˆ·ã€‚è™½ç„¶ä¸€ç›´å¾…å‘½æœ‰èµ„æºæ¶ˆè€—ï¼Œä½†å“åº”é€Ÿåº¦å¿«ï¼Œé€‚åˆè®¢å•é¢‘ç¹çš„åœºæ™¯ã€‚å‰åç«¯åˆ†ç¦»è®©æˆ‘å¯ä»¥ä¸“æ³¨åç«¯é€»è¾‘ï¼Œä¸éœ€è¦å…³å¿ƒå‰ç«¯å±•ç¤ºï¼Œè¿™ç»™æˆ‘å¸¦æ¥äº†å¾ˆå¤§çš„ä¾¿åˆ©ã€‚"</li>
<li>ğŸ¦Š çµç‹æ³•å¸ˆï¼š"å‰åç«¯åˆ†ç¦»è®©æˆ‘å¯ä»¥æ•´åˆå¤šä¸ªæ³•å¸ˆçš„è´§ç‰©ï¼Œæä¾›æ›´å¤šç§ç±»çš„å•†å“ç»™å®¢æˆ·ã€‚æˆ‘å¯ä»¥ä¸“ä¸šåŒ…è£…ï¼Œæä¾›æ›´å¥½çš„ç”¨æˆ·ä½“éªŒã€‚è·¯çº¿å›ºå®šä¸‹æ¥åï¼Œæˆ‘çš„å·¥ä½œä¹Ÿå˜å¾—æ›´ç®€å•äº†ï¼Œä¸éœ€è¦æ¯æ¬¡éƒ½é‡æ–°è§„åˆ’ã€‚è¿™å…¶å®æ˜¯ä¸€ä¸ªåŒèµ¢çš„å±€é¢ï¼Œæ³•å¸ˆä»¬ä¸“æ³¨æ ¸å¿ƒèƒ½åŠ›ï¼Œæˆ‘è´Ÿè´£ä¸“ä¸šåŒ…è£…å’Œå±•ç¤ºã€‚"</li>
</ul>
<hr/>
<h2 data-id="heading-2">ğŸ“¦ ç¬¬å››ä»£ï¼šæ ‡å‡†åŒ–ç‰©æµç³»ç»Ÿï¼ˆREST API æ¦‚å¿µç™»åœºï¼‰</h2>
<h3 data-id="heading-3">REST API æ˜¯ä»€ä¹ˆï¼Ÿ</h3>
<p>ğŸ å¤§èŸ’è›‡æ³•å¸ˆï¼š"REST API ä¸æ˜¯æŸä¸ªå…·ä½“çš„ç‰©æµç³»ç»Ÿï¼Œå®ƒæ›´åƒæ˜¯æ•´ä¸ªé­”æ³•ä¸–ç•Œçš„ã€Šç‰©æµæ³•å…¸ã€‹ã€‚å®ƒå®šä¹‰äº†â€˜æ€ä¹ˆå‘è´§ã€æ€ä¹ˆæ”¶è´§ã€ç”¨ä»€ä¹ˆæ ¼å¼æ²Ÿé€šâ€™ï¼Œè®©æ‰€æœ‰ç³»ç»Ÿéƒ½èƒ½å½¼æ­¤å¬æ‡‚ã€ååŒé€è¾¾ã€‚"</p>
<p><strong>REST API = æ ‡å‡†åŒ–é…é€æµç¨‹ï¼ˆæ¦‚å¿µï¼‰</strong>ï¼š</p>
<ul>
<li><strong>REST</strong>ï¼šRepresentational State Transferï¼ˆè¡¨ç°å±‚çŠ¶æ€è½¬ç§»ï¼‰</li>
<li><strong>ä¸æ˜¯å…·ä½“çš„ç‰©æµç³»ç»Ÿ</strong>ï¼šè€Œæ˜¯ä¸€ä¸ªè®¾è®¡æ¦‚å¿µ</li>
<li><strong>å®šä¹‰äº†é…é€æ ‡å‡†</strong>ï¼šå¦‚ä½•è®¾è®¡ API æ¥å£</li>
<li><strong>è®©ä¸åŒç³»ç»Ÿå¯ä»¥äº’ç›¸ç†è§£</strong>ï¼šéµå¾ªç›¸åŒçš„æ ‡å‡†</li>
</ul>
<p><strong>REST API çš„æ ¸å¿ƒåŸåˆ™</strong>ï¼š</p>
<ol>
<li><strong>èµ„æºï¼ˆResourceï¼‰</strong>ï¼š
<ul>
<li>æ¯ä¸ªé­”è¯éƒ½æ˜¯ä¸€ä¸ªèµ„æº</li>
<li>ç”¨ URL è¡¨ç¤ºèµ„æºï¼ˆå¦‚ <code>/api/potions/123</code>ï¼‰</li>
</ul>
</li>
<li><strong>HTTP æ–¹æ³•ï¼ˆMethodï¼‰</strong>ï¼š
<ul>
<li>GETï¼šæŸ¥è¯¢é­”è¯</li>
<li>POSTï¼šåˆ›å»ºé­”è¯</li>
<li>PUTï¼šæ›´æ–°é­”è¯</li>
<li>DELETEï¼šåˆ é™¤é­”è¯</li>
</ul>
</li>
<li><strong>æ— çŠ¶æ€ï¼ˆStatelessï¼‰</strong>ï¼š
<ul>
<li>æ¯æ¬¡è®¢å•éƒ½æ˜¯ç‹¬ç«‹çš„</li>
<li>ä¸ä¾èµ–ä¹‹å‰çš„è®¢å•</li>
</ul>
</li>
<li><strong>ç»Ÿä¸€æ¥å£ï¼ˆUniform Interfaceï¼‰</strong>ï¼š
<ul>
<li>æ‰€æœ‰æ¥å£éƒ½éµå¾ªç›¸åŒçš„æ ¼å¼</li>
<li>ä½¿ç”¨æ ‡å‡†çš„ HTTP æ–¹æ³•</li>
</ul>
</li>
<li><strong>åˆ†å±‚ç³»ç»Ÿï¼ˆLayered Systemï¼‰</strong>ï¼š
<ul>
<li>å¯ä»¥æœ‰å¤šä¸ªç‰©æµä¸­å¿ƒç‚¹ï¼ˆä¸­é—´ä»¶ï¼‰</li>
<li>æ¯ä¸ªå±‚æ¬¡è´Ÿè´£ä¸åŒçš„åŠŸèƒ½</li>
</ul>
</li>
</ol>
<p><strong>æ¯”å–»</strong>ï¼š</p>
<pre><code class="hljs language-plain" lang="plain">REST API = æ ‡å‡†åŒ–é…é€æµç¨‹

å°±åƒæ‰€æœ‰ç‰©æµå…¬å¸éƒ½éµå¾ªç›¸åŒçš„é…é€æ ‡å‡†ï¼š
- è®¢å•æ ¼å¼ç»Ÿä¸€ï¼ˆJSONï¼‰
- é…é€è·¯çº¿ç»Ÿä¸€ï¼ˆURL è·¯å¾„ï¼‰
- é…é€æ–¹æ³•ç»Ÿä¸€ï¼ˆHTTP æ–¹æ³•ï¼‰
- é…é€ç»“æœç»Ÿä¸€ï¼ˆHTTP çŠ¶æ€ç ï¼‰

è¿™æ ·ï¼Œä¸åŒçš„ç‰©æµç³»ç»Ÿï¼ˆFlaskã€Djangoã€FastAPIï¼‰éƒ½å¯ä»¥äº’ç›¸ç†è§£
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/76ae4a4bc53c4d92964ecb059ed8b393~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Z-p5biI5YKF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768040796&amp;x-signature=MkuEAY2vrDDmH%2FoQowzY1jfGDJU%3D" alt="image.png" loading="lazy"/></p>
<p><strong>é‡è¦ç†è§£</strong>ï¼š</p>
<ul>
<li>âœ… REST API æ˜¯ä¸€ä¸ª<strong>æ¦‚å¿µ</strong>ï¼Œä¸æ˜¯æŸä¸ªå…·ä½“çš„ç‰©æµç³»ç»Ÿ</li>
<li>âœ… ä¸åŒçš„ç‰©æµç³»ç»Ÿï¼ˆFlaskã€Djangoã€FastAPIï¼‰éƒ½å¯ä»¥éµå¾ª REST API æ¦‚å¿µ</li>
<li>âœ… éµå¾ª REST API æ¦‚å¿µï¼Œå¯ä»¥è®©ä¸åŒçš„ç³»ç»Ÿäº’ç›¸ç†è§£</li>
</ul>
<hr/>
<hr/>
<h2 data-id="heading-4">ğŸ“š ç³»åˆ—å¯¼èˆª</h2>
<p><strong>ç³»åˆ—åç§°</strong>ï¼šWeb API æ¼”è¿›å²ï¼šä» CGI åˆ° FastAPI<br/>
<em>ï¼ˆç”¨ç‰©æµç³»ç»Ÿæ¯”å–»è®²è§£ Web API æ¼”è¿›ï¼‰</em></p>
<ul>
<li><a href="https://juejin.cn/post/7589932422655344676" target="_blank" title="https://juejin.cn/post/7589932422655344676">ç‰‡æ®µ1ï¼šä»é‡å¯é©¬è½¦åˆ°å¸¸é©»è¿è¾“é˜Ÿ</a></li>
<li><a href="https://juejin.cn/post/7590421489997889555" target="_blank" title="https://juejin.cn/post/7590421489997889555">ç‰‡æ®µ2ï¼šä»éšå«éšåˆ°åˆ°è§„èŒƒé…é€</a> â† å½“å‰æ–‡ç« </li>
<li><a href="https://juejin.cn/post/7590421489997922323" target="_blank" title="https://juejin.cn/post/7590421489997922323">ç‰‡æ®µ3ï¼šä»ç‰©æµæ³•å…¸åˆ°æ™ºèƒ½è°ƒåº¦</a></li>
</ul>
<hr/>
<blockquote>
<p>ğŸ“ ç‰‡æ®µ2 ç»“æŸ<br/>
ğŸ”„ ä¸‹ä¸€ç‰‡æ®µé¢„å‘Šï¼š<br/>
æœ‰äº†ã€Šç‰©æµæ³•å…¸ã€‹ä¹‹åï¼Œå„å¤§æ³•å¸ˆå¼€å§‹åˆ¶å®šè‡ªå·±çš„é€è´§è§„ç« â€”â€”REST API çš„ç»†èŠ‚çº¦å®šã€FastAPI çš„ç™»åœºä¸æ™ºèƒ½åŒ–çš„è°ƒåº¦ä¸­å¿ƒä¹Ÿå³å°†ç°èº«ã€‚æœ€åçš„è¿›åŒ–é˜¶æ®µï¼Œè¦å¼€å§‹äº†â€¦â€¦</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[zustandæºç è§£æ]]></title>    <link>https://juejin.cn/post/7590592594674417674</link>    <guid>https://juejin.cn/post/7590592594674417674</guid>    <pubDate>2026-01-03T08:19:16.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7590592594674417674" data-draft-id="7590592594674401290" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="zustandæºç è§£æ"/> <meta itemprop="keywords" content="æºç é˜…è¯»,å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-03T08:19:16.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="lzh_hz"/> <meta itemprop="url" content="https://juejin.cn/user/2348212566891831"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            zustandæºç è§£æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2348212566891831/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    lzh_hz
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-03T08:19:16.000Z" title="Sat Jan 03 2026 08:19:16 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">zustandæ˜¯ä»€ä¹ˆï¼Œå¦‚ä½•ä½¿ç”¨</h2>
<p>Zustand æ˜¯ä¸€ä¸ªè½»é‡çº§çš„ React çŠ¶æ€ç®¡ç†åº“ï¼Œæ¯” Redux ç®€å•ï¼Œæ¯” Context é«˜æ•ˆã€‚</p>
<ul>
<li>æ ¸å¿ƒä»£ç çº¦ 100 è¡Œï¼ŒAPI ç®€å•ç›´è§‚ã€‚</li>
<li>æ— Provider</li>
<li>ç¬¦åˆ React Hooks ä½¿ç”¨ä¹ æƒ¯</li>
<li>åªæ›´æ–°è®¢é˜…äº†å˜åŒ–çŠ¶æ€çš„ç»„ä»¶ã€‚</li>
<li>å®Œæ•´çš„ç±»å‹æ¨æ–­å’Œæ”¯æŒã€‚</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { create } <span class="hljs-keyword">from</span> <span class="hljs-string">'zustand'</span>

<span class="hljs-comment">// 1ï¸âƒ£ å®šä¹‰ç±»å‹ï¼ˆTypeScriptï¼‰</span>
interface <span class="hljs-title class_">BearStore</span> {
  <span class="hljs-attr">bears</span>: number
  <span class="hljs-attr">fish</span>: number
  <span class="hljs-attr">addBear</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">void</span>
  <span class="hljs-attr">eatFish</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">void</span>
  <span class="hljs-attr">reset</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">void</span>
}

<span class="hljs-comment">// 2ï¸âƒ£ åˆ›å»º Store</span>
<span class="hljs-keyword">const</span> useBearStore = create&lt;<span class="hljs-title class_">BearStore</span>&gt;(<span class="hljs-function">(<span class="hljs-params">set</span>) =&gt;</span> ({
  <span class="hljs-attr">bears</span>: <span class="hljs-number">0</span>,
  <span class="hljs-attr">fish</span>: <span class="hljs-number">10</span>,
  <span class="hljs-attr">addBear</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">set</span>(<span class="hljs-function">(<span class="hljs-params">s</span>) =&gt;</span> ({ <span class="hljs-attr">bears</span>: s.<span class="hljs-property">bears</span> + <span class="hljs-number">1</span> })),
  <span class="hljs-attr">eatFish</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">set</span>(<span class="hljs-function">(<span class="hljs-params">s</span>) =&gt;</span> ({ <span class="hljs-attr">fish</span>: s.<span class="hljs-property">fish</span> - <span class="hljs-number">1</span> })),
  <span class="hljs-attr">reset</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">set</span>({ <span class="hljs-attr">bears</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">fish</span>: <span class="hljs-number">10</span> })
}))

<span class="hljs-comment">// 3ï¸âƒ£ ç»„ä»¶ Aï¼šåªè®¢é˜… bears</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">BearCounter</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> bears = <span class="hljs-title function_">useBearStore</span>(<span class="hljs-function">(<span class="hljs-params">s</span>) =&gt;</span> s.<span class="hljs-property">bears</span>)
  <span class="hljs-keyword">const</span> addBear = <span class="hljs-title function_">useBearStore</span>(<span class="hljs-function">(<span class="hljs-params">s</span>) =&gt;</span> s.<span class="hljs-property">addBear</span>)
  
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>ğŸ» Bears: {bears}<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{addBear}</span>&gt;</span>Add Bear<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  )
}

<span class="hljs-comment">// 4ï¸âƒ£ ç»„ä»¶ Bï¼šåªè®¢é˜… fish</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">FishCounter</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> fish = <span class="hljs-title function_">useBearStore</span>(<span class="hljs-function">(<span class="hljs-params">s</span>) =&gt;</span> s.<span class="hljs-property">fish</span>)
  <span class="hljs-keyword">const</span> eatFish = <span class="hljs-title function_">useBearStore</span>(<span class="hljs-function">(<span class="hljs-params">s</span>) =&gt;</span> s.<span class="hljs-property">eatFish</span>)
  
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>ğŸŸ Fish: {fish}<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{eatFish}</span>&gt;</span>Eat Fish<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  )
}

<span class="hljs-comment">// 5ï¸âƒ£ ä¸»åº”ç”¨</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">BearCounter</span> /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">FishCounter</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  )
}
</code></pre>
<h2 data-id="heading-1">å½“è°ƒç”¨zustandçš„createæ—¶ä¼šå‘ç”Ÿä»€ä¹ˆ</h2>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> create <span class="hljs-keyword">from</span> <span class="hljs-string">'zustand'</span>;
<span class="hljs-keyword">const</span> useStore = <span class="hljs-title function_">create</span>(<span class="hljs-function">(<span class="hljs-params">set</span>) =&gt;</span> ({
  <span class="hljs-attr">count</span>: <span class="hljs-number">0</span>,
  <span class="hljs-attr">increment</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">set</span>(<span class="hljs-function">(<span class="hljs-params">s</span>) =&gt;</span> ({ <span class="hljs-attr">count</span>: s.<span class="hljs-property">count</span> + <span class="hljs-number">1</span> }))
}))
</code></pre>
<p>create æ–¹æ³•æœ€ç»ˆä¼šè°ƒç”¨vanvailla.tsä¸­çš„createStoreImp å‡½æ•°</p>
<p>createStoreImpä¸»è¦å®Œæˆçš„åŠŸèƒ½:</p>
<ul>
<li>åˆ›å»ºzustandçš„api(setSate,getState,getInitialState, subscribe)</li>
<li>åœ¨è°ƒç”¨æ—¶ä¼šæ‰§è¡Œä¼ å…¥çš„å‡½æ•°ï¼Œå°†æœ€ç»ˆç»“æœèµ‹å€¼ç»™ initialState</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// è¿™é‡Œçš„createStateæ˜¯ä¸‹é¢è¿™ä¸ªå‡½æ•°</span>
<span class="hljs-comment">// (set) =&gt; ({</span>
<span class="hljs-comment">//   count: 0,</span>
<span class="hljs-comment">//   increment: () =&gt; set((s) =&gt; ({ count: s.count + 1 }))</span>
<span class="hljs-comment">// })</span>
<span class="hljs-comment">// æœ€ç»ˆinitialStateçš„å€¼æ˜¯</span>
<span class="hljs-comment">// { </span>
<span class="hljs-comment">//   count:0,</span>
<span class="hljs-comment">//   increment:() =&gt; set((s) =&gt; ({ count: s.count + 1 }))</span>
<span class="hljs-comment">// }</span>

<span class="hljs-keyword">const</span> initialState = (state = <span class="hljs-title function_">createState</span>(setState, getState, api))
<span class="hljs-keyword">return</span> api <span class="hljs-keyword">as</span> any
</code></pre>
<p>createStoreImpè¿”å›çš„apiä¼šåœ¨react.tsä¸­çš„createImpä¸­ä½¿ç”¨</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { createStore } <span class="hljs-keyword">from</span> <span class="hljs-string">'./vanilla.ts'</span>
<span class="hljs-keyword">const</span> createImpl = &lt;T&gt;<span class="hljs-function">(<span class="hljs-params">createState: StateCreator&lt;T, [], []&gt;</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> api = <span class="hljs-title function_">createStore</span>(createState)

  <span class="hljs-keyword">const</span> <span class="hljs-attr">useBoundStore</span>: any = <span class="hljs-function">(<span class="hljs-params">selector?: any</span>) =&gt;</span> <span class="hljs-title function_">useStore</span>(api, selector)

  <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>(useBoundStore, api)

  <span class="hljs-keyword">return</span> useBoundStore
}
</code></pre>
<p>useStoreä¼šåˆ›å»ºä¸€ä¸ªhook, å°†è·å–åˆ°çš„api ä¼ å…¥React.useSyncExternalStore()æ–¹æ³•ï¼Œä»è€Œå®ç°å½“setSateæ—¶ï¼Œè®¢é˜…äº†è¿™ä¸ªstateçš„ç»„ä»¶éƒ½ä¼šè§¦å‘é‡æ–°æ¸²æŸ“.</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> useStore&lt;<span class="hljs-title class_">TState</span>, <span class="hljs-title class_">StateSlice</span>&gt;(
  <span class="hljs-attr">api</span>: <span class="hljs-title class_">ReadonlyStoreApi</span>&lt;<span class="hljs-title class_">TState</span>&gt;,
  <span class="hljs-attr">selector</span>: <span class="hljs-function">(<span class="hljs-params">state: TState</span>) =&gt;</span> <span class="hljs-title class_">StateSlice</span> = identity <span class="hljs-keyword">as</span> any,
) {
  <span class="hljs-keyword">const</span> slice = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">useSyncExternalStore</span>(
    api.<span class="hljs-property">subscribe</span>,
    <span class="hljs-title class_">React</span>.<span class="hljs-title function_">useCallback</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">selector</span>(api.<span class="hljs-title function_">getState</span>()), [api, selector]),
    <span class="hljs-title class_">React</span>.<span class="hljs-title function_">useCallback</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">selector</span>(api.<span class="hljs-title function_">getInitialState</span>()), [api, selector]),
  )
  <span class="hljs-title class_">React</span>.<span class="hljs-title function_">useDebugValue</span>(slice)
  <span class="hljs-keyword">return</span> slice
}
</code></pre>
<p>å½“åœ¨ä¸€ä¸ªç»„ä»¶è°ƒç”¨useStoreæ—¶ï¼Œéƒ½ä¼šæ‰§è¡ŒReact.useSyncExternalStore()ï¼ŒuseSyncExternalStore() ä¼šæ‰§è¡Œapi.subscribe.  api.subscibeå®šä¹‰åœ¨vanilla.tsçš„createStoreImpå‡½æ•°ä¸­</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// è¿™é‡Œçš„listeneræ˜¯ç”±reactçš„useSyncExtenalStoreä¼ å…¥çš„callback function, ä¼šæ³¨å†Œåˆ°listenersé‡Œ</span>
<span class="hljs-comment">// è°ƒç”¨callback functionä¼šè§¦å‘ç»„ä»¶é‡æ–°æ¸²æŸ“</span>
<span class="hljs-keyword">const</span> <span class="hljs-attr">subscribe</span>: <span class="hljs-title class_">StoreApi</span>&lt;<span class="hljs-title class_">TState</span>&gt;[<span class="hljs-string">'subscribe'</span>] = <span class="hljs-function">(<span class="hljs-params">listener</span>) =&gt;</span> {
    listeners.<span class="hljs-title function_">add</span>(listener)
    <span class="hljs-comment">// Unsubscribe</span>
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> listeners.<span class="hljs-title function_">delete</span>(listener)
  }
<span class="hljs-comment">// å½“ setSateé‡Œï¼Œä¼šæ‰§è¡Œlistenersé‡Œçš„callback function, ä»è€Œå®ç°ç»„ä»¶æ›´æ–°</span>
 <span class="hljs-keyword">const</span> <span class="hljs-attr">setState</span>: <span class="hljs-title class_">StoreApi</span>&lt;<span class="hljs-title class_">TState</span>&gt;[<span class="hljs-string">'setState'</span>] = <span class="hljs-function">(<span class="hljs-params">partial, replace</span>) =&gt;</span> {
    <span class="hljs-comment">// <span class="hljs-doctag">TODO:</span> Remove type assertion once https://github.com/microsoft/TypeScript/issues/37663 is resolved</span>
    <span class="hljs-comment">// https://github.com/microsoft/TypeScript/issues/37663#issuecomment-759728342</span>
    <span class="hljs-keyword">const</span> nextState =
      <span class="hljs-keyword">typeof</span> partial === <span class="hljs-string">'function'</span>
        ? (partial <span class="hljs-keyword">as</span> (<span class="hljs-attr">state</span>: <span class="hljs-title class_">TState</span>) =&gt; <span class="hljs-title class_">TState</span>)(state)
        : partial
    <span class="hljs-keyword">if</span> (!<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">is</span>(nextState, state)) {
      <span class="hljs-keyword">const</span> previousState = state
      state =
        (replace ?? (<span class="hljs-keyword">typeof</span> nextState !== <span class="hljs-string">'object'</span> || nextState === <span class="hljs-literal">null</span>))
          ? (nextState <span class="hljs-keyword">as</span> <span class="hljs-title class_">TState</span>)
          : <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>({}, state, nextState)
      <span class="hljs-comment">// å…³é”®å®ç°</span>
      listeners.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">listener</span>) =&gt;</span> <span class="hljs-title function_">listener</span>(state, previousState))
    }
  }

</code></pre>
<p>å†å›åˆ°react.tsä¸­çš„createImplå‡½æ•°ï¼Œä¼šè¿”å›ä¸€ä¸ªhookç»™ä¸šåŠ¡ç»„ä»¶å»è°ƒç”¨</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> api = <span class="hljs-title function_">createStore</span>(...)  <span class="hljs-comment">// api å·²åˆ›å»º                         â”‚</span>
â”‚                                                                      â”‚
â”‚  <span class="hljs-comment">// åˆ›å»º Hook å‡½æ•°                                                    â”‚</span>
â”‚  <span class="hljs-keyword">const</span> <span class="hljs-title function_">useBoundStore</span> = (<span class="hljs-params">selector</span>) =&gt; <span class="hljs-title function_">useStore</span>(api, selector)         â”‚
â”‚  <span class="hljs-comment">//                                     â”‚                            â”‚</span>
â”‚  <span class="hljs-comment">//  é—­åŒ…æ•è· api â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                            â”‚</span>
â”‚                                                                      â”‚
â”‚  <span class="hljs-comment">// å°† api æ–¹æ³•æŒ‚è½½åˆ° Hook ä¸Š                                         â”‚</span>
â”‚  <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>(useBoundStore, api)                                   â”‚
â”‚  <span class="hljs-comment">//                                                                  â”‚</span>
â”‚  <span class="hljs-comment">//  useBoundStore.getState = api.getState                           â”‚</span>
â”‚  <span class="hljs-comment">//  useBoundStore.setState = api.setState                           â”‚</span>
â”‚  <span class="hljs-comment">//  useBoundStore.subscribe = api.subscribe                         â”‚</span>
â”‚                                                                      â”‚
â”‚  <span class="hljs-keyword">return</span> useBoundStore                                                â”‚
â”‚                           
</code></pre>
<p>createå‡½æ•°ä¸»è¦ä½œäº†ä»¥ä¸‹ä¸‰ä»¶äº‹:</p>
<ul>
<li>åˆ›å»º vanilla store (åŒ…å«zustandçš„api)</li>
<li>è°ƒç”¨ç”¨æˆ·å‡½æ•°</li>
<li>åŒ…è£…æˆhook</li>
</ul>
<h2 data-id="heading-2">å½“getStateæ—¶ä¼šå‘ç”Ÿä»€ä¹ˆ</h2>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> useStore = <span class="hljs-title function_">create</span>(<span class="hljs-function">(<span class="hljs-params">set</span>) =&gt;</span> ({
  <span class="hljs-attr">count</span>: <span class="hljs-number">0</span>,
  <span class="hljs-attr">name</span>: <span class="hljs-string">'zustand'</span>
}))

<span class="hljs-comment">// è·å–å½“å‰çŠ¶æ€</span>
<span class="hljs-keyword">const</span> state = useStore.<span class="hljs-title function_">getState</span>()
<span class="hljs-comment">// { count: 0, name: 'zustand' }</span>

<span class="hljs-comment">// è·å–ç‰¹å®šå­—æ®µ</span>
<span class="hljs-keyword">const</span> count = useStore.<span class="hljs-title function_">getState</span>().<span class="hljs-property">count</span>
<span class="hljs-comment">// 0</span>
</code></pre>
<p>æ ¹æ®ä¸Šé¢çš„createå®ç°è§£æï¼ŒuseStoreçš„getState()æœ€ç»ˆä¼šè°ƒç”¨å®šä¹‰åœ¨vanilla.tsä¸­çš„createStoreImplä¸­çš„getState</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-attr">getState</span>: <span class="hljs-title class_">StoreApi</span>&lt;<span class="hljs-title class_">TState</span>&gt;[<span class="hljs-string">'getState'</span>] = <span class="hljs-function">() =&gt;</span> state
<span class="hljs-comment">// å¦‚æœè°ƒç”¨æ—¶æœªè§¦å‘setStateï¼Œ è·å–åˆ°çš„æ˜¯ç”¨æˆ·åœ¨ceateæ—¶ä¼ å…¥çš„state, è°ƒç”¨createæ—¶ä¼šæ‰§è¡Œä»¥ä¸‹ä»£ç </span>
<span class="hljs-keyword">const</span> initialState = (state = <span class="hljs-title function_">createState</span>(setState, getState, api))

</code></pre>
<h2 data-id="heading-3">å½“setStateæ—¶ä¼šå‘ç”Ÿä»€ä¹ˆ</h2>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> useStore = <span class="hljs-title function_">create</span>(<span class="hljs-function">(<span class="hljs-params">set</span>) =&gt;</span> ({
  <span class="hljs-attr">count</span>: <span class="hljs-number">0</span>
}))

<span class="hljs-comment">// åœ¨ä»»ä½•åœ°æ–¹</span>
useStore.<span class="hljs-title function_">setState</span>({ <span class="hljs-attr">count</span>: <span class="hljs-number">10</span> })
</code></pre>
<p>æ®ä¸Šé¢çš„createå®ç°è§£æï¼ŒuseStoreçš„getState()æœ€ç»ˆä¼šè°ƒç”¨å®šä¹‰åœ¨vanilla.tsä¸­çš„createStoreImplä¸­çš„setSate</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">setState</span> = (<span class="hljs-params">partial, replace</span>) =&gt; {
  <span class="hljs-comment">// 1ï¸âƒ£ è®¡ç®—æ–°çŠ¶æ€</span>
  <span class="hljs-keyword">const</span> nextState =
    <span class="hljs-keyword">typeof</span> partial === <span class="hljs-string">'function'</span>
      ? <span class="hljs-title function_">partial</span>(state)    <span class="hljs-comment">// å‡½æ•°å¼ï¼šè°ƒç”¨å‡½æ•°å¾—åˆ°æ–°çŠ¶æ€</span>
      : partial           <span class="hljs-comment">// å¯¹è±¡å¼ï¼šç›´æ¥ä½¿ç”¨</span>

  <span class="hljs-comment">// 2ï¸âƒ£ æ£€æŸ¥æ˜¯å¦çœŸçš„å˜åŒ–</span>
  <span class="hljs-keyword">if</span> (!<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">is</span>(nextState, state)) {
    <span class="hljs-keyword">const</span> previousState = state
    
    <span class="hljs-comment">// 3ï¸âƒ£ å†³å®šåˆå¹¶è¿˜æ˜¯æ›¿æ¢</span>
    state =
      (replace ?? (<span class="hljs-keyword">typeof</span> nextState !== <span class="hljs-string">'object'</span> || nextState === <span class="hljs-literal">null</span>))
        ? nextState                         <span class="hljs-comment">// æ›¿æ¢</span>
        : <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>({}, state, nextState)  <span class="hljs-comment">// æµ…åˆå¹¶</span>

    <span class="hljs-comment">// 4ï¸âƒ£ é€šçŸ¥æ‰€æœ‰è®¢é˜…è€…</span>
    listeners.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">listener</span>) =&gt;</span> <span class="hljs-title function_">listener</span>(state, previousState))
  }
}
</code></pre>
<p>setSateæ—¶ä¸ä¼šè§¦å‘æ‰€æœ‰ç»„ä»¶çš„æ›´æ–°ï¼Œåªä¼šè§¦å‘è®¢é˜…äº†ç›¸å…³stateçš„ç»„ä»¶æ›´æ–°</p>
<pre><code class="hljs language-javascript" lang="javascript">onst useStore = <span class="hljs-title function_">create</span>(<span class="hljs-function">(<span class="hljs-params">set</span>) =&gt;</span> ({
  <span class="hljs-attr">count</span>: <span class="hljs-number">0</span>,
  <span class="hljs-attr">name</span>: <span class="hljs-string">'zustand'</span>,
  <span class="hljs-attr">updateCount</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">set</span>({ <span class="hljs-attr">count</span>: <span class="hljs-number">1</span> }),
  <span class="hljs-attr">updateName</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">set</span>({ <span class="hljs-attr">name</span>: <span class="hljs-string">'bear'</span> })
}))

<span class="hljs-comment">// ç»„ä»¶ Aï¼šåªè®¢é˜… count</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">CounterA</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'CounterA æ¸²æŸ“'</span>)
  <span class="hljs-keyword">const</span> count = <span class="hljs-title function_">useStore</span>(<span class="hljs-function">(<span class="hljs-params">s</span>) =&gt;</span> s.<span class="hljs-property">count</span>)  <span class="hljs-comment">// â† åªå…³å¿ƒ count</span>
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{count}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
}

<span class="hljs-comment">// ç»„ä»¶ Bï¼šåªè®¢é˜… name</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">CounterB</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'CounterB æ¸²æŸ“'</span>)
  <span class="hljs-keyword">const</span> name = <span class="hljs-title function_">useStore</span>(<span class="hljs-function">(<span class="hljs-params">s</span>) =&gt;</span> s.<span class="hljs-property">name</span>)  <span class="hljs-comment">// â† åªå…³å¿ƒ name</span>
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{name}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
}

<span class="hljs-comment">// ç»„ä»¶ Cï¼šè®¢é˜…å…¨éƒ¨</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">CounterC</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'CounterC æ¸²æŸ“'</span>)
  <span class="hljs-keyword">const</span> state = <span class="hljs-title function_">useStore</span>()  <span class="hljs-comment">// â† å…³å¿ƒæ‰€æœ‰</span>
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{state.count} - {state.name}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
}
</code></pre>
<p>å½“ç»„ä»¶Aè°ƒç”¨userStoreæ—¶ï¼Œæœ€ç»ˆä¼šæ‰§è¡Œreact.tsä¸­çš„useStore</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// è¿™é‡Œçš„selectå°±æ˜¯ç»„ä»¶Aä¼ å…¥çš„(s) =&gt; s.name</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> useStore&lt;<span class="hljs-title class_">TState</span>, <span class="hljs-title class_">StateSlice</span>&gt;(
  <span class="hljs-attr">api</span>: <span class="hljs-title class_">ReadonlyStoreApi</span>&lt;<span class="hljs-title class_">TState</span>&gt;,
  <span class="hljs-attr">selector</span>: <span class="hljs-function">(<span class="hljs-params">state: TState</span>) =&gt;</span> <span class="hljs-title class_">StateSlice</span> = identity <span class="hljs-keyword">as</span> any,
) {
  <span class="hljs-comment">// getSnapshot é€šè¿‡ selector åªå–éœ€è¦çš„éƒ¨åˆ†, åªæœ‰éœ€è¦çš„éƒ¨åˆ†çš„å€¼å‘é€å˜åŒ–æ—¶ï¼Œæ‰ä¼šè§¦å‘æ›´æ–°</span>
  <span class="hljs-keyword">const</span> slice = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">useSyncExternalStore</span>(
    api.<span class="hljs-property">subscribe</span>,
    <span class="hljs-title class_">React</span>.<span class="hljs-title function_">useCallback</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">selector</span>(api.<span class="hljs-title function_">getState</span>()), [api, selector]),
    <span class="hljs-title class_">React</span>.<span class="hljs-title function_">useCallback</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">selector</span>(api.<span class="hljs-title function_">getInitialState</span>()), [api, selector]),
  )
  <span class="hljs-title class_">React</span>.<span class="hljs-title function_">useDebugValue</span>(slice)
  <span class="hljs-keyword">return</span> slice
}
</code></pre>
<p>å…·ä½“æµç¨‹</p>
<ol>
<li>
<p>setState æ”¹å˜çŠ¶æ€</p>
</li>
<li>
<p>é€šçŸ¥æ‰€æœ‰è®¢é˜…çš„ç»„ä»¶ï¼ˆæ‰€æœ‰ä½¿ç”¨ useStore çš„ç»„ä»¶ï¼‰</p>
</li>
<li>
<p>æ¯ä¸ªç»„ä»¶æ‰§è¡Œè‡ªå·±çš„ selector(newState)</p>
</li>
<li>
<p>æ¯”è¾ƒ selector è¿”å›çš„æ–°æ—§å€¼</p>
<pre><code class="hljs">â”‚

â”œâ”€â”€ ç›¸ç­‰ â†’ ä¸é‡æ¸²æŸ“

â”‚

â””â”€â”€ ä¸ç­‰ â†’ é‡æ¸²æŸ“
</code></pre>
</li>
</ol>
<h2 data-id="heading-4">Rect.useSyncExternalStoreè§£æ</h2>
<p>react 18 æ–°å¢çš„ Hookï¼Œç”¨äºå®‰å…¨åœ°è®¢é˜…å¤–éƒ¨æ•°æ®æºã€‚</p>
<p>ç®€åŒ–å®ç°</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">useSyncExternalStore</span>(<span class="hljs-params">subscribe, getSnapshot, getServerSnapshot</span>) {
  <span class="hljs-comment">// å­˜å‚¨å½“å‰å¿«ç…§</span>
  <span class="hljs-keyword">const</span> [snapshot, setSnapshot] = <span class="hljs-title function_">useState</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">// SSR æ—¶ç”¨ getServerSnapshot</span>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">typeof</span> <span class="hljs-variable language_">window</span> === <span class="hljs-string">'undefined'</span> 
      ? getServerSnapshot?.() 
      : <span class="hljs-title function_">getSnapshot</span>()
  })

  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">// React åˆ›å»ºçš„ callback</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">callback</span> = (<span class="hljs-params"/>) =&gt; {
      <span class="hljs-keyword">const</span> newSnapshot = <span class="hljs-title function_">getSnapshot</span>()
      <span class="hljs-comment">// åªæœ‰çœŸæ­£å˜åŒ–æ‰æ›´æ–°</span>
      <span class="hljs-title function_">setSnapshot</span>(<span class="hljs-function"><span class="hljs-params">prev</span> =&gt;</span> {
        <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">is</span>(prev, newSnapshot)) {
          <span class="hljs-keyword">return</span> prev  <span class="hljs-comment">// è¿”å›æ—§å€¼ï¼Œä¸è§¦å‘æ›´æ–°</span>
        }
        <span class="hljs-keyword">return</span> newSnapshot
      })
    }

    <span class="hljs-comment">// è®¢é˜…</span>
    <span class="hljs-keyword">const</span> unsubscribe = <span class="hljs-title function_">subscribe</span>(callback)

    <span class="hljs-comment">// æ¸…ç†</span>
    <span class="hljs-keyword">return</span> unsubscribe
  }, [subscribe, getSnapshot])

  <span class="hljs-keyword">return</span> snapshot
}
</code></pre>
<p>å…·ä½“æµç¨‹ï¼š</p>
<ol>
<li>Mount<br/>
â”œâ”€â”€ 1.1 getSnapshot() â†’ åˆå§‹å€¼<br/>
â”œâ”€â”€ 1.2 subscribe(callback) â†’ æ³¨å†Œ<br/>
â””â”€â”€ 1.3 return åˆå§‹å€¼</li>
<li>çŠ¶æ€å˜åŒ–<br/>
â”œâ”€â”€ 2.1 ä½ è°ƒç”¨ callback()<br/>
â”œâ”€â”€ 2.2 React è°ƒç”¨ getSnapshot() â†’ æ–°å€¼<br/>
â”œâ”€â”€ 2.3 Object.is(æ—§å€¼, æ–°å€¼)<br/>
â””â”€â”€ 2.4 ç›¸ç­‰ï¼Ÿ<br/>
â”œâ”€â”€ 2.4.1 æ˜¯ â†’ è·³è¿‡<br/>
â””â”€â”€ 2.4.2 å¦ â†’ é‡æ¸²æŸ“</li>
<li>Unmount<br/>
â””â”€â”€ 3.1 è°ƒç”¨ unsubscribe()</li>
</ol>
<h2 data-id="heading-5">æ€»ç»“</h2>
<p>æ ¸å¿ƒå®ç°æ˜¯ä½¿ç”¨React.useSyncExternalStore hookï¼Œ åˆ›å»ºä¸€ä¸ªstoreï¼Œ å½“stateé‡Œçš„å€¼å‘ç”Ÿæ”¹å˜æ—¶ï¼Œè§¦å‘è®¢é˜…äº†stateçš„å€¼çš„ç»„ä»¶é‡æ–°æ¸²æŸ“ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å›¾æ–‡+ç¤ºä¾‹ï¼Œå¸¦ä½ å½»åº•ææ¸…æ¥šé‚£äº›åŠ å¯†æ‰‹æ®µ...ï¼]]></title>    <link>https://juejin.cn/post/7590213554798542883</link>    <guid>https://juejin.cn/post/7590213554798542883</guid>    <pubDate>2026-01-03T09:02:39.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7590213554798542883" data-draft-id="7590128405351792640" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å›¾æ–‡+ç¤ºä¾‹ï¼Œå¸¦ä½ å½»åº•ææ¸…æ¥šé‚£äº›åŠ å¯†æ‰‹æ®µ...ï¼"/> <meta itemprop="keywords" content="å®‰å…¨,ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2026-01-03T09:02:39.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="momo06117"/> <meta itemprop="url" content="https://juejin.cn/user/3103246594353275"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å›¾æ–‡+ç¤ºä¾‹ï¼Œå¸¦ä½ å½»åº•ææ¸…æ¥šé‚£äº›åŠ å¯†æ‰‹æ®µ...ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3103246594353275/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    momo06117
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-03T09:02:39.000Z" title="Sat Jan 03 2026 09:02:39 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>æœ€è¿‘ï¼Œå°ç¼–åœ¨å­¦ä¹ çš„è¿‡ç¨‹ä¸­æœ‰äº†è§£åˆ°åŠ å¯†çš„æ‰‹æ®µï¼Œå› æ­¤æƒ³æ¥åˆ†äº«ä¸€ä¸‹è‡ªå·±å­¦åˆ°çš„ä¸€äº›æ–°çŸ¥è¯†ã€‚å¦‚æœ‰è®²å¾—ä¸å¥½æˆ–é—æ¼ æ¬¢è¿å„ä½å¤§ä½¬åœ¨è¯„è®ºåŒºæŒ‡å‡ºã€‚</p>
<h2 data-id="heading-1">å…³äºåŠ å¯†</h2>
<p>åŠ å¯†æ˜¯<strong>æŒ‡é€šè¿‡ç‰¹å®šæ‰‹æ®µå°†æ˜æ–‡å­˜å‚¨çš„å†…å®¹åŠ å¯†æˆå¯†æ–‡</strong>ã€‚é‚£ä¹ˆä¸ºä»€ä¹ˆè¦è¿›è¡ŒåŠ å¯†å‘¢ï¼Ÿ</p>
<p>äº’è”ç½‘ä¸­å„ç§æ”»å‡»é˜²ä¸èƒœé˜²ï¼Œå¦‚æœæ•æ„Ÿå†…å®¹ä¸åŠ å¯†å­˜å‚¨ï¼Œä¾‹å¦‚ç”¨æˆ·å¯†ç ä¹‹ç±»çš„ï¼ˆä¸€æƒ³åˆ°è‡ªå·±çš„å¯†ç æ˜æ™ƒæ™ƒçš„æš´éœ²åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­ï¼Œæ˜¯ä¸æ˜¯æœ‰ç‚¹åèƒŒä¸€å‡‰çš„æ„Ÿè§‰~ï¼‰ï¼Œé‚£æ”»å‡»è€…å°±èƒ½å¤Ÿè½»æ˜“è·å–ç”¨æˆ·éšç§ä¿¡æ¯å¹¶å®æ–½æ”»å‡»ã€‚</p>
<p>å› æ­¤åŠ å¯†æ˜¯å¿…ä¸å¯å°‘çš„ã€‚é‚£ä¹ˆ<strong>åŠ å¯†çš„æ‰‹æ®µæœ‰å“ªäº›ï¼Ÿæˆ–è€…æˆ‘ä»¬åœ¨é’ˆå¯¹ä»€ä¹ˆåœºæ™¯åº”è¯¥åšä»€ä¹ˆåŠ å¯†ï¼Ÿ</strong></p>
<p>ä¸‹é¢å°ç¼–ä¸€ä¸€ä»‹ç»å¹¶é€šè¿‡nodeæ‰‹æ®µç®€å•å®ç°ã€‚</p>
<h3 data-id="heading-2">hashåŠ å¯†</h3>
<p>åŠ å¯†æ‰‹æ®µä¸­ï¼Œæœ€å¸¸è§çš„å°±æ˜¯hashåŠ å¯†ï¼ŒæŒ‡é€šè¿‡ä¸€å®šçš„ç®—æ³•å°†æ˜æ–‡è½¬åŒ–ä¸ºå¯†æ–‡ã€‚</p>
<blockquote>
<p>æ¯”å¦‚å°†å¯†ç abcéšæœºåé€€3æ ¼åŠ å¯†æˆä¸ºdfgï¼Œè¿™æ˜¯ä¸€ç§æœ€ç®€å•çš„åŠ å¯†æ‰‹æ®µã€‚</p>
</blockquote>
<p>ç°ä»£å¸¸è§æœ€å¸¸è§çš„åŠ å¯†æ‰‹æ®µæœ‰<code>MD5</code>ï¼Œ<code>SHA</code>åŠ å¯†ç­‰ï¼Œç”±äºå…¶å¤æ‚æ€§hashåŠ å¯†æ˜¯ä¸å¯é€†çš„ã€‚ä½†æ˜¯ç”±äºhashç®—æ³•å›ºå®šï¼Œ<strong>å› æ­¤åŒä¸€ä¸ªå¯†ç åŠ å¯†åæ˜¯ç›¸åŒçš„å¯†æ–‡</strong>ï¼Œå› æ­¤æ”»å‡»è€…æƒ³åˆ°å¯ä»¥é€šè¿‡<code>å½©è™¹è¡¨</code>æ”»å‡»ã€‚</p>
<p>æ•…å®é™…ç”Ÿäº§ä¸­ï¼Œæˆ‘ä»¬å¾€å¾€ä¼šå¾€æ˜æ–‡å…ˆ<strong>åŠ ç›</strong>ï¼ˆä¸€æ®µéšæœºçš„å­—ç¬¦ä¸²æ’å…¥ï¼‰ï¼Œç„¶åå†è¿›è¡ŒhashåŠ å¯†ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b918c32c6e5948ae95d5726730937fd0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbW9tbzA2MTE3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768035759&amp;x-signature=tKXDFYKI31YbGog63yv84hp9l%2FM%3D" alt="image.png" loading="lazy"/></p>
<p><strong>ä½¿ç”¨åœºæ™¯</strong>ï¼š æ•°æ®åº“ä¸­çš„<strong>å¯†ç å­˜å‚¨</strong>ï¼ˆç”±äºhashä¸å¯é€†ï¼Œå®åˆ™ç¨‹åºå‘˜ä¹Ÿä¸çŸ¥é“ä½ çš„å¯†ç ï¼‰</p>
<p><strong>å®ç°ç¤ºä¾‹</strong>ï¼š ä½¿ç”¨bcryptè¿›è¡ŒåŠ å¯†</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">//è‡ªåŠ¨åŠ ç›å¹¶ä¸”å†…åµŒ</span>
<span class="hljs-keyword">const</span> hashPassword = bcrypt.<span class="hljs-title function_">hashSync</span>(password,<span class="hljs-number">10</span>) 
<span class="hljs-comment">//è§£å¯†</span>
<span class="hljs-keyword">const</span> compareResult = bcrypt.<span class="hljs-title function_">compareSync</span>(userinfo.<span class="hljs-property">password</span>,result[<span class="hljs-number">0</span>].<span class="hljs-property">password</span>)
</code></pre>
<h3 data-id="heading-3">å¯¹ç§°åŠ å¯†</h3>
<p><em>ä¸Šé¢è¯´åˆ°äº†hashç®—æ³•ï¼Œä½†ç”±äºhashç®—æ³•æ˜¯ä¸å¯é€†çš„ï¼Œæ•…å¸¸ç”¨äºå­˜å‚¨åŠ å¯†ï¼Œè€Œå®é™…å¼€å‘ä¸­æˆ‘ä»¬ä¼šç»å¸¸ç”¨åˆ°ä¼ è¾“åŠ å¯†ï¼Œæ•…å¯¹ç§°åŠ å¯†åº”è¿è€Œç”Ÿã€‚</em></p>
<p>å¯¹ç§°åŠ å¯†æ˜¯æŒ‡å°†<strong>å¯†ç é€šè¿‡å¯†é’¥åŠ å¯†åç”Ÿæˆå¯†æ–‡</strong>ï¼Œå¯¹æ–¹å†<strong>é€šè¿‡åŒä¸€å¯†é’¥ç ´è§£ç”Ÿæˆçš„å¯†æ–‡ã€‚</strong></p>
<p><strong>å¸¸è§æ‰‹æ®µ</strong>ï¼š<code>AESåŠ å¯†</code></p>
<p><strong>ä¼˜ç¼ºç‚¹</strong>ï¼šåŠ å¯†ç®€å•ï¼Œè§£å¯†<strong>é€Ÿåº¦å¿«</strong>ã€‚ä½†å¯†é’¥çš„ç®¡ç†å’Œä¼ è¾“å›°éš¾ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/192a49f73a87464d8ff1b625fee4f428~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbW9tbzA2MTE3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768035759&amp;x-signature=yahfUQEuuQj%2Bi05fLJdFlPaqz5k%3D" alt="image.png" loading="lazy"/></p>
<p><strong>å®é™…åœºæ™¯</strong>ï¼šå¤§é‡éœ€è¦è¢«åŠ å¯†çš„å†…å®¹</p>
<p><strong>å®ç°ç¤ºä¾‹</strong>ï¼šä½¿ç”¨<code>CryptoJS</code>è¿›è¡ŒAESåŠ å¯†</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> cryptoJs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'crypto-js'</span>)

<span class="hljs-keyword">const</span> message = <span class="hljs-string">'hello word'</span>
<span class="hljs-keyword">const</span> key = <span class="hljs-string">'this is key'</span> <span class="hljs-comment">//å®é™…è¿‡ç¨‹ä¸­ å¯¹ç§°å¯†é’¥é€šå¸¸æ˜¯éšæœºç”Ÿæˆçš„</span>

<span class="hljs-comment">//åŠ å¯†</span>
<span class="hljs-keyword">const</span> encrypted = cryptoJs.<span class="hljs-property">AES</span>.<span class="hljs-title function_">encrypt</span>(message, key)

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å¯¹ç§°åŠ å¯†å¯†æ–‡ï¼š'</span>,encrypted.<span class="hljs-title function_">toString</span>())

<span class="hljs-comment">//å°†å¯†æ–‡è§£å¯†</span>
<span class="hljs-keyword">const</span> decryptedMessage  = cryptoJs.<span class="hljs-property">AES</span>.<span class="hljs-title function_">decrypt</span>(encrypted,key)

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è§£å¯†ï¼š'</span>,decryptedMessage.<span class="hljs-title function_">toString</span>(cryptoJs.<span class="hljs-property">enc</span>.<span class="hljs-property">Utf8</span>))
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a00ad039ab7b42898bf6f5de2f307e04~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbW9tbzA2MTE3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768035759&amp;x-signature=UkhfZ2z3D2m2NjxIsKkyoF7f9ko%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-4">éå¯¹ç§°åŠ å¯†</h3>
<p><em>ç›®çš„æ˜¯ä¸ºäº†è§£å†³ä¸Šé¢æåˆ°çš„å¯†é’¥å®‰å…¨é—®é¢˜ï¼Œå¯¹ç§°åŠ å¯†å¯†é’¥è¢«æˆªè·ï¼Œå¯†æ–‡ä¹Ÿå°±è½»æ˜“å¯çŸ¥äº†ã€‚</em></p>
<p>éå¯¹ç§°åŠ å¯†æ˜¯æŒ‡å‘é€ç«¯ç”¨<strong>å…¬é’¥</strong>è¿›è¡ŒåŠ å¯†ï¼Œç„¶åé‡‡ç”¨<strong>ç§é’¥</strong>è¿›è¡Œè§£å¯†ï¼Œå…¬é’¥æ˜¯å…¬å¼€çš„ï¼Œç§é’¥æ˜¯åªæœ‰æ¥å—æ–¹æ‰æœ‰çš„ã€‚å°±åƒä¸€ä¸ªç®±å­ï¼Œå‘é€æ–¹æŠŠç”¨é”æŠŠç®±å­é”ä¸Šï¼Œæ¥æ”¶æ–¹ç”¨é’¥åŒ™è§£é”ã€‚</p>
<p><strong>å¸¸è§æ‰‹æ®µ</strong>:<code> RSAéå¯¹ç§°åŠ å¯†</code></p>
<p><strong>ä¼˜ç¼ºç‚¹</strong>ï¼š ç”±äºç§é’¥åªæœ‰æ¥æ”¶æ–¹å¯çŸ¥ï¼Œ<strong>ä¿å¯†æ€§å¥½</strong>ã€‚ä½†åŠ å¯†å’Œè§£å¯†æ¯”è¾ƒè€—æ—¶ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/02606218f9b5453897aa65a0e75d0c88~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbW9tbzA2MTE3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768035759&amp;x-signature=AQGSXsc4exWRSckuaEzxKQNImwo%3D" alt="image.png" loading="lazy"/></p>
<p><strong>å®é™…åœºæ™¯</strong>ï¼š å¯†é’¥äº¤æ¢ï¼Œæ•°å­—ç­¾å</p>
<p><strong>å®ç°ç¤ºä¾‹</strong>ï¼š ä½¿ç”¨nodeåŸç”Ÿcryptoè¿›è¡ŒRSAéå¯¹ç§°åŠ å¯†</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> crypto = <span class="hljs-built_in">require</span>(<span class="hljs-string">'crypto'</span>)

<span class="hljs-comment">// ç”ŸæˆRSAå¯†é’¥å¯¹</span>
<span class="hljs-keyword">const</span> { publicKey, privateKey } = crypto.<span class="hljs-title function_">generateKeyPairSync</span>(<span class="hljs-string">'rsa'</span>, {
  <span class="hljs-attr">modulusLength</span>: <span class="hljs-number">2048</span>, <span class="hljs-comment">// å¯†é’¥é•¿åº¦</span>
  <span class="hljs-attr">publicKeyEncoding</span>: {
    <span class="hljs-attr">type</span>: <span class="hljs-string">'spki'</span>,
    <span class="hljs-attr">format</span>: <span class="hljs-string">'pem'</span>
  },
  <span class="hljs-attr">privateKeyEncoding</span>: {
    <span class="hljs-attr">type</span>: <span class="hljs-string">'pkcs8'</span>,
    <span class="hljs-attr">format</span>: <span class="hljs-string">'pem'</span>
  }
})

<span class="hljs-keyword">const</span> data = <span class="hljs-string">'hello word'</span>;
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'åŸå§‹æ•°æ®:'</span>, data);

<span class="hljs-comment">// ä½¿ç”¨å…¬é’¥åŠ å¯†</span>
<span class="hljs-keyword">const</span> encryptedData = crypto.<span class="hljs-title function_">publicEncrypt</span>(
  {
    <span class="hljs-attr">key</span>: publicKey,
    <span class="hljs-attr">padding</span>: crypto.<span class="hljs-property">constants</span>.<span class="hljs-property">RSA_PKCS1_OAEP_PADDING</span>
  },
  <span class="hljs-title class_">Buffer</span>.<span class="hljs-title function_">from</span>(data)
)

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'åŠ å¯†å (base64):'</span>, encryptedData.<span class="hljs-title function_">toString</span>(<span class="hljs-string">'base64'</span>))

<span class="hljs-comment">// ä½¿ç”¨ç§é’¥è§£å¯†</span>
<span class="hljs-keyword">const</span> decryptedData = crypto.<span class="hljs-title function_">privateDecrypt</span>(
  {
    <span class="hljs-attr">key</span>: privateKey,
    <span class="hljs-attr">padding</span>: crypto.<span class="hljs-property">constants</span>.<span class="hljs-property">RSA_PKCS1_OAEP_PADDING</span>
  },
  encryptedData
)
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è§£å¯†å:'</span>, decryptedData.<span class="hljs-title function_">toString</span>())
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/107deb59b637439c97f0e2c6d48ac996~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbW9tbzA2MTE3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768035759&amp;x-signature=HiSrp0WC1E5VMgoREVlpENEe2mc%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-5">æ··åˆåŠ å¯†</h3>
<p>ä¸Šé¢æœ‰è¯´åˆ°å¯¹ç§°åŠ å¯†å’Œéå¯¹ç§°åŠ å¯†çš„ä¼˜ç¼ºç‚¹ï¼Œé‚£ä¹ˆæœ‰æ²¡æœ‰é›†ä¸¤è€…å¤§æˆï¼Œæ—¢é€‚åˆä¼ è¾“å¤§é‡å†…å®¹åˆå¯†é’¥ç®¡ç†å®‰å…¨çš„æ–¹æ¡ˆå‘¢ï¼Ÿ
ç­”æ¡ˆæ˜¯æœ‰çš„ï¼Œé‚£å°±æ˜¯æ··åˆåŠ å¯†ã€‚</p>
<p>æ··åˆåŠ å¯†æ˜¯æŒ‡ç”¨<code>éå¯¹ç§°åŠ å¯†</code> åŠ å¯† <code>å¯¹ç§°åŠ å¯†çš„å¯†é’¥</code>ï¼Œå¯èƒ½æœ‰ç‚¹ç»•ï¼Œä¸‹é¢è¯¦ç»†ä»‹ç»ä¸€ä¸‹ã€‚</p>
<p><strong>åŠ å¯†è¿‡ç¨‹</strong>ï¼š</p>
<ol>
<li>æœåŠ¡å™¨ç”Ÿæˆä¸€å¯¹å…¬é’¥å’Œç§é’¥ï¼Œ<strong>å°†å…¬é’¥å‘é€ç»™å®¢æˆ·ç«¯</strong></li>
<li>å®¢æˆ·ç«¯æ”¶åˆ°ç§é’¥åï¼Œ<strong>éšæœºç”Ÿæˆä¸€å¯¹ä¼šè¯å¯†é’¥ï¼ˆå¯¹ç§°å¯†é’¥ï¼‰ç”¨æœåŠ¡å™¨çš„å…¬é’¥åŠ å¯†åå‘é€</strong></li>
<li>æœåŠ¡å™¨æ”¶åˆ°å¯†æ–‡åï¼Œ<strong>ç”¨ç§é’¥è§£å¯†ï¼Œä¼šè¯å¯†é’¥</strong></li>
<li>æ­¤æ—¶ï¼ŒæœåŠ¡å™¨å’Œå®¢æˆ·ç«¯éƒ½æœ‰ä¼šè¯å¯†é’¥ï¼Œæ­¤åéƒ½ä½¿ç”¨<strong>ä¼šè¯å¯†é’¥åŠ å¯†å¯¹è¯</strong></li>
</ol>
<p><strong>ä¼˜ç¼ºç‚¹</strong>ï¼šåªéœ€è¦å‰æœŸå°‘é‡èµ„æºç”¨äºéå¯¹ç§°åŠ å¯†ï¼ŒåæœŸå¯ç”¨å¯¹ç§°åŠ å¯†ä¼ è¾“å¤§é‡å†…å®¹ï¼Œä½†å®ç°æ¯”è¾ƒå¤æ‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/69da4ac4205b40c0872c21fb559f953b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbW9tbzA2MTE3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768035759&amp;x-signature=lN9rmh9ZcQknNrzvO7ocq0VrGaM%3D" alt="image.png" loading="lazy"/></p>
<p><strong>å®é™…åœºæ™¯</strong>ï¼š httpåŠ å¯†çš„é‡è¦æ‰‹æ®µï¼Œç°ä»£å¤§é‡åŠ å¯†åœºæ™¯ç­‰ã€‚</p>
<h2 data-id="heading-6">æ€»ç»“</h2>
<p>æ€»çš„æ¥è¯´ï¼ŒåŠ å¯†æ˜¯æˆ‘ä»¬å¼€å‘è¿‡ç¨‹ä¸­å¿…ä¸å¯å°‘çš„ä¸€ç¯ï¼Œé’ˆå¯¹ä¸åŒçš„ç¯å¢ƒï¼Œåšå‡ºä¸åŒçš„åŠ å¯†æ‰‹æ®µæ˜¯æˆ‘ä»¬ä½œä¸ºå¼€å‘è€…å¿…ä¸å¯å°‘çš„ç»¼åˆæŠ€èƒ½~</p>















































<table><thead><tr><th>ç‰¹æ€§</th><th>HashåŠ å¯†</th><th>å¯¹ç§°åŠ å¯†</th><th>éå¯¹ç§°åŠ å¯†</th><th>æ··åˆåŠ å¯†</th></tr></thead><tbody><tr><td><strong>åŠ å¯†ç±»å‹</strong></td><td>åŠ å¯†å­˜å‚¨</td><td>åŠ å¯†ä¼ è¾“</td><td>åŠ å¯†ä¼ è¾“</td><td>åŠ å¯†ä¼ è¾“</td></tr><tr><td><strong>æ ¸å¿ƒåŸç†</strong></td><td>å•å‘æ•£åˆ—å‡½æ•°</td><td>ç›¸åŒå¯†é’¥åŠ è§£å¯†</td><td>å…¬é’¥åŠ å¯†ï¼Œç§é’¥è§£å¯†</td><td>éå¯¹ç§°åŠ å¯†ä¿æŠ¤å¯¹ç§°å¯†é’¥</td></tr><tr><td><strong>å¯†é’¥æ•°é‡</strong></td><td>æ— å¯†é’¥ï¼ˆæœ‰ç›å€¼ï¼‰</td><td>1ä¸ªå…±äº«å¯†é’¥</td><td>2ä¸ªå¯†é’¥ï¼ˆå…¬é’¥+ç§é’¥ï¼‰</td><td>3ä¸ªå¯†é’¥ï¼ˆéå¯¹ç§°å¯¹+å¯¹ç§°å¯†é’¥ï¼‰</td></tr><tr><td><strong>å®‰å…¨æ€§</strong></td><td>é˜²ç¯¡æ”¹ï¼Œä¸å¯é€†</td><td>ä¾èµ–å¯†é’¥å®‰å…¨</td><td>ä¾èµ–æ•°å­¦éš¾é¢˜å®‰å…¨</td><td>ç»¼åˆå®‰å…¨ç­‰çº§æœ€é«˜</td></tr><tr><td><strong>æ¨èåœºæ™¯</strong></td><td>éœ€è¦éªŒè¯ä½†ä¸éœ€è¦è§£å¯†çš„åœºæ™¯</td><td>å†…éƒ¨ç³»ç»Ÿã€å¤§é‡åŠ å¯†</td><td>å¯†é’¥åˆ†å‘ã€èº«ä»½è®¤è¯</td><td>å…¬ç½‘é€šä¿¡ã€é«˜å®‰å…¨è¦æ±‚</td></tr></tbody></table>
<p><em>åˆ¶ä½œä¸æ˜“ ç¤¼è²Œé›†èµ</em></p>
<p align="center"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7f971a67e95f456aa4c8a14f1fdce448~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbW9tbzA2MTE3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768035759&amp;x-signature=PYkD7YOu1mrO7DWRHOIq6Rfu8eQ%3D" alt="image.png" width="30%" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[React ä¹‹ è‡ªå®šä¹‰ Hooks ğŸš€]]></title>    <link>https://juejin.cn/post/7590292192988971048</link>    <guid>https://juejin.cn/post/7590292192988971048</guid>    <pubDate>2026-01-03T09:15:48.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7590292192988971048" data-draft-id="7590403249560633359" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="React  ä¹‹  è‡ªå®šä¹‰ Hooks ğŸš€"/> <meta itemprop="keywords" content="React.js,å‰ç«¯,é¢è¯•"/> <meta itemprop="datePublished" content="2026-01-03T09:15:48.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="xiaoxue_"/> <meta itemprop="url" content="https://juejin.cn/user/4065372122398027"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            React  ä¹‹  è‡ªå®šä¹‰ Hooks ğŸš€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4065372122398027/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    xiaoxue_
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-03T09:15:48.000Z" title="Sat Jan 03 2026 09:15:48 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    15
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»15åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">è‡ªå®šä¹‰ Hooks ğŸš€</h2>
<p>åœ¨ React çš„ä¸–ç•Œé‡Œï¼ŒHooks å°±åƒä¸€æŠŠç¥å¥‡çš„é’¥åŒ™ï¼Œä¸ºå‡½æ•°ç»„ä»¶æ‰“å¼€äº†çŠ¶æ€ç®¡ç†å’Œç”Ÿå‘½å‘¨æœŸçš„å¤§é—¨ã€‚ä»Šå¤©æˆ‘ä»¬å°±æ¥æ·±å…¥æ¢ç´¢è‡ªå®šä¹‰ Hooks çš„å¥¥ç§˜ï¼Œçœ‹çœ‹å®ƒå¦‚ä½•è®©æˆ‘ä»¬çš„ä»£ç æ›´ä¼˜é›…ã€æ›´å¯å¤ç”¨ï¼</p>
<h3 data-id="heading-1">ä¸€ã€hooks è¯¦è§£ ğŸ§</h3>
<h4 data-id="heading-2">1. ä»€ä¹ˆæ˜¯ hooks ï¼Ÿ</h4>
<p>Hooks æ˜¯ React 16.8 å¼•å…¥çš„æ–°ç‰¹æ€§ï¼Œå®ƒæ˜¯ä¸€ç§<strong>å‡½æ•°ç¼–ç¨‹æ€æƒ³çš„å®è·µ</strong>ï¼Œå…è®¸æˆ‘ä»¬åœ¨ä¸ç¼–å†™ç±»ç»„ä»¶çš„æƒ…å†µä¸‹ï¼Œåœ¨å‡½æ•°ç»„ä»¶ä¸­ä½¿ç”¨çŠ¶æ€ï¼ˆStateï¼‰å’Œå…¶ä»– React ç‰¹æ€§ï¼ˆå¦‚ç”Ÿå‘½å‘¨æœŸï¼‰ã€‚ç®€å•æ¥è¯´ï¼ŒHooks å°±æ˜¯ â€œé’©å­â€ï¼Œèƒ½è®©æˆ‘ä»¬è½»æ¾ â€œé’©å…¥â€ React çš„å†…éƒ¨ç‰¹æ€§ï¼Œè®©å‡½æ•°ç»„ä»¶æ‹¥æœ‰æ›´å¼ºå¤§çš„èƒ½åŠ›ã€‚</p>
<h4 data-id="heading-3">2. hooks åˆ†ç±»</h4>
<p>Hooks ä¸»è¦åˆ†ä¸ºä¸¤ç±»ï¼š</p>
<ul>
<li><strong>React å†…ç½® Hooks</strong>ï¼šå¦‚<code>useState</code>ï¼ˆç®¡ç†çŠ¶æ€ï¼‰ã€<code>useEffect</code>ï¼ˆå¤„ç†å‰¯ä½œç”¨ï¼‰ã€<code>useContext</code>ï¼ˆå…±äº«ä¸Šä¸‹æ–‡ï¼‰ç­‰ï¼Œè¿™äº›æ˜¯ React å®˜æ–¹æä¾›çš„åŸºç¡€å·¥å…·ã€‚</li>
<li><strong>è‡ªå®šä¹‰ Hooks</strong>ï¼šç”±å¼€å‘è€…æ ¹æ®ä¸šåŠ¡éœ€æ±‚å°è£…çš„ Hooksï¼Œå‘½åä»¥<code>use</code>å¼€å¤´ï¼Œæœ¬è´¨æ˜¯å¯¹å†…ç½® Hooks å’Œä¸šåŠ¡é€»è¾‘çš„ç»„åˆå°è£…ï¼Œæ–¹ä¾¿å¤ç”¨ã€‚</li>
</ul>
<p>ï¼ˆå‰é¢æˆ‘ä»¬è®²è§£è¿‡ React å†…ç½®çš„ hooks å‡½æ•°ï¼Œæ„Ÿå…´è¶£çš„å°ä¼™ä¼´å¯ä»¥å»ç¿»ç¿»æˆ‘å‰é¢çš„æ–‡ç« çœ‹çœ‹ï¼‰</p>
<h4 data-id="heading-4">3. hooks æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ</h4>
<ul>
<li>è®©å‡½æ•°ç»„ä»¶å…·å¤‡çŠ¶æ€ç®¡ç†èƒ½åŠ›ï¼Œæ‘†è„±ç±»ç»„ä»¶çš„ç¹çè¯­æ³•ï¼ˆå¦‚<code>this</code>ç»‘å®šã€ç”Ÿå‘½å‘¨æœŸå‡½æ•°åµŒå¥—ï¼‰ã€‚</li>
<li>å°†ç»„ä»¶ä¸­çš„ç›¸å…³é€»è¾‘èšåˆåœ¨ä¸€èµ·ï¼Œè€Œéåˆ†æ•£åœ¨ä¸åŒçš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°ä¸­ï¼ˆæ¯”å¦‚ç±»ç»„ä»¶ä¸­<code>componentDidMount</code>å’Œ<code>componentDidUpdate</code>å¯èƒ½å†™é‡å¤é€»è¾‘ï¼‰ã€‚</li>
<li>å®ç°é€»è¾‘å¤ç”¨ï¼Œé€šè¿‡è‡ªå®šä¹‰ Hooks å°†ç›¸åŒçš„çŠ¶æ€é€»è¾‘æŠ½ç¦»ï¼Œä¾›å¤šä¸ªç»„ä»¶ä½¿ç”¨ã€‚</li>
</ul>
<h4 data-id="heading-5">4. ä¸ºä»€ä¹ˆéœ€è¦è‡ªå®šä¹‰ hooks ï¼Ÿ</h4>
<p>åœ¨å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šé‡åˆ°å¤šä¸ªç»„ä»¶éœ€è¦å…±äº«ç›¸åŒçŠ¶æ€é€»è¾‘çš„åœºæ™¯ã€‚æ¯”å¦‚ï¼šå¤šä¸ªç»„ä»¶éƒ½éœ€è¦ç›‘å¬é¼ æ ‡ä½ç½®ã€éƒ½éœ€è¦å¤„ç†æœ¬åœ°å­˜å‚¨æ•°æ®ã€éƒ½éœ€è¦å‘èµ·ç›¸åŒçš„ API è¯·æ±‚ç­‰ã€‚</p>
<p>å¦‚æœæ²¡æœ‰è‡ªå®šä¹‰ Hooksï¼Œæˆ‘ä»¬å¯èƒ½ä¼šé€šè¿‡ â€œå¤åˆ¶ç²˜è´´ä»£ç â€ æˆ– â€œé«˜é˜¶ç»„ä»¶â€â€œrender propsâ€ ç­‰æ–¹å¼å¤ç”¨é€»è¾‘ï¼Œä½†è¿™äº›æ–¹å¼è¦ä¹ˆå¯¼è‡´ä»£ç å†—ä½™ï¼Œè¦ä¹ˆå¢åŠ ç»„ä»¶å±‚çº§å¤æ‚åº¦ã€‚</p>
<p>è€Œè‡ªå®šä¹‰ Hooks å°±åƒä¸€ä¸ª â€œé€»è¾‘å®¹å™¨â€ï¼Œèƒ½å°†è¿™äº›é‡å¤é€»è¾‘æŠ½ç¦»æˆç‹¬ç«‹å‡½æ•°ï¼Œè®©ç»„ä»¶åªå…³æ³¨ UI æ¸²æŸ“ï¼Œæå¤§æå‡ä»£ç çš„å¤ç”¨æ€§å’Œå¯ç»´æŠ¤æ€§ï¼</p>
<h3 data-id="heading-6">äºŒã€å…ˆæ¥çœ‹ä¸€ä¸ªç®€å•æ¡ˆä¾‹ï¼šå“åº”å¼æ˜¾ç¤ºé¼ æ ‡çš„ä½ç½® ğŸ–±ï¸</h3>
<h4 data-id="heading-7">1. éœ€æ±‚åˆ†æ</h4>
<p>æˆ‘ä»¬è¦å®ç°ä¸€ä¸ªåŒ…å«ä¸¤ä¸ªæ ¸å¿ƒåŠŸèƒ½çš„å°åº”ç”¨ï¼š</p>
<p>ï¼ˆ1ï¼‰<strong>è®¡æ•°åŠŸèƒ½</strong>ï¼šä¸€ä¸ªè®¡æ•°å™¨ï¼Œç‚¹å‡»æŒ‰é’®å¯ä»¥å¢åŠ æ•°å­—ã€‚</p>
<p>ï¼ˆ2ï¼‰<strong>æ¡ä»¶æ˜¾ç¤ºé¼ æ ‡ä½ç½®</strong>ï¼šå½“è®¡æ•°å™¨çš„å€¼ä¸ºå¶æ•°æ—¶ï¼Œæ˜¾ç¤ºé¼ æ ‡åœ¨é¡µé¢ä¸Šçš„å®æ—¶åæ ‡ï¼›ä¸ºå¥‡æ•°æ—¶ï¼Œä¸æ˜¾ç¤ºã€‚</p>
<h4 data-id="heading-8">2. æ ¸å¿ƒå®ç°ï¼ˆä¸¤ä¸ªæ–‡ä»¶ï¼‰</h4>
<p>ï¼ˆ1ï¼‰<code>App2.jsx</code>ï¼šä¸»ç»„ä»¶ï¼Œè´Ÿè´£ç®¡ç†è®¡æ•°å™¨çŠ¶æ€å’Œæ ¹æ®è®¡æ•°å¥‡å¶æ€§æ¡ä»¶æ¸²æŸ“é¼ æ ‡ä½ç½®ç»„ä»¶ã€‚</p>
<p>ï¼ˆ2ï¼‰<code>useMouse.js</code>ï¼šè‡ªå®šä¹‰ Hooksï¼Œå°è£…é¼ æ ‡ä½ç½®ç›‘å¬çš„é€»è¾‘ï¼Œæä¾›<code>x</code>ã€<code>y</code>åæ ‡ä¾›ç»„ä»¶ä½¿ç”¨ï¼ˆå‘å¤–æš´éœ²çš„çŠ¶æ€å’Œæ–¹æ³•æ”¾åœ¨ return ä¸­è¿”å›ï¼‰ã€‚</p>
<h4 data-id="heading-9">3. ä»£ç å±•ç¤º</h4>
<h5 data-id="heading-10">ï¼ˆ1ï¼‰App2.jsx</h5>
<p>jsx</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { useState } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> { useMouse } <span class="hljs-keyword">from</span> <span class="hljs-string">'./hooks/useMouse.js'</span>;

<span class="hljs-comment">// é¼ æ ‡ä½ç½®å±•ç¤ºç»„ä»¶ï¼ˆçº¯UIç»„ä»¶ï¼‰</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">MouseMove</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// è°ƒç”¨è‡ªå®šä¹‰Hookè·å–é¼ æ ‡åæ ‡</span>
    <span class="hljs-keyword">const</span> { x, y } = <span class="hljs-title function_">useMouse</span>();
    <span class="hljs-keyword">return</span> (
        <span class="xml"><span class="hljs-tag">&lt;&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
                é¼ æ ‡ä½ç½®ï¼š{x}, {y}
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/&gt;</span></span>
    );
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// å®šä¹‰è®¡æ•°å™¨çŠ¶æ€ï¼Œåˆå§‹å€¼ä¸º0</span>
    <span class="hljs-keyword">const</span> [count, setCount] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);

    <span class="hljs-keyword">return</span> (
        <span class="xml"><span class="hljs-tag">&lt;&gt;</span>
            {/* æ˜¾ç¤ºå½“å‰è®¡æ•° */}
            {count}
            {/* ç‚¹å‡»æŒ‰é’®å¢åŠ è®¡æ•°ï¼ˆä½¿ç”¨å‡½æ•°å¼æ›´æ–°ç¡®ä¿è·å–æœ€æ–°countï¼‰ */}
            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> setCount((count) =&gt; count + 1)}&gt;
                ç‚¹å‡»å¢åŠ 
            <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
            {/* å½“countä¸ºå¶æ•°æ—¶ï¼Œæ¸²æŸ“MouseMoveç»„ä»¶æ˜¾ç¤ºé¼ æ ‡ä½ç½® */}
            {count % 2 === 0 &amp;&amp; <span class="hljs-tag">&lt;<span class="hljs-name">MouseMove</span> /&gt;</span>}
        <span class="hljs-tag">&lt;/&gt;</span></span>
    )
}
</code></pre>
<p><strong>ä»£ç é€»è¾‘è¯¦è§£</strong>ï¼š</p>
<ul>
<li><code>App</code>ç»„ä»¶é€šè¿‡<code>useState</code>ç®¡ç†è®¡æ•°å™¨<code>count</code>çš„çŠ¶æ€ï¼Œç‚¹å‡»æŒ‰é’®æ—¶é€šè¿‡<code>setCount</code>æ›´æ–°å€¼ã€‚</li>
<li>å®šä¹‰äº†<code>MouseMove</code>ç»„ä»¶ï¼Œå®ƒä¸åŒ…å«ä»»ä½•ä¸šåŠ¡é€»è¾‘ï¼Œä»…é€šè¿‡è°ƒç”¨<code>useMouse()</code>è·å–é¼ æ ‡åæ ‡å¹¶æ¸²æŸ“ï¼Œæ˜¯ä¸€ä¸ªçº¯ UI ç»„ä»¶ã€‚</li>
<li>é€šè¿‡æ¡ä»¶æ¸²æŸ“<code>{count % 2 === 0 &amp;&amp; &lt;MouseMove /&gt;}</code>å®ç° â€œå¶æ•°æ˜¾ç¤ºé¼ æ ‡ä½ç½®ï¼Œå¥‡æ•°ä¸æ˜¾ç¤ºâ€ çš„éœ€æ±‚ã€‚</li>
</ul>
<h5 data-id="heading-11">ï¼ˆ2ï¼‰useMouse.js</h5>
<p>js</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { useState, useEffect } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-comment">// è‡ªå®šä¹‰Hookï¼šå°è£…é¼ æ ‡ä½ç½®ç›‘å¬é€»è¾‘ï¼ˆå‘½åä»¥useå¼€å¤´ï¼‰</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">useMouse</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// å®šä¹‰çŠ¶æ€å­˜å‚¨é¼ æ ‡xã€yåæ ‡ï¼Œåˆå§‹å€¼ä¸º0</span>
    <span class="hljs-keyword">const</span> [x, setX] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);
    <span class="hljs-keyword">const</span> [y, setY] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);

    <span class="hljs-comment">// å‰¯ä½œç”¨ï¼šç›‘å¬é¼ æ ‡ç§»åŠ¨äº‹ä»¶</span>
    <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-comment">// äº‹ä»¶å¤„ç†å‡½æ•°ï¼šæ›´æ–°xã€yåæ ‡</span>
        <span class="hljs-keyword">const</span> <span class="hljs-title function_">update</span> = (<span class="hljs-params">event</span>) =&gt; {
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'/////'</span>);
            <span class="hljs-title function_">setX</span>(event.<span class="hljs-property">pageX</span>); <span class="hljs-comment">// æ›´æ–°xåæ ‡ä¸ºé¼ æ ‡ç›¸å¯¹äºæ–‡æ¡£çš„æ°´å¹³ä½ç½®</span>
            <span class="hljs-title function_">setY</span>(event.<span class="hljs-property">pageY</span>); <span class="hljs-comment">// æ›´æ–°yåæ ‡ä¸ºé¼ æ ‡ç›¸å¯¹äºæ–‡æ¡£çš„å‚ç›´ä½ç½®</span>
        }
        <span class="hljs-comment">// ç»‘å®šmousemoveäº‹ä»¶ï¼Œè§¦å‘æ—¶è°ƒç”¨updateæ›´æ–°åæ ‡</span>
        <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'mousemove'</span>, update);
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'||||| æŒ‚è½½'</span>); <span class="hljs-comment">// ç»„ä»¶æŒ‚è½½æ—¶æ‰“å°</span>

        <span class="hljs-comment">// æ¸…ç†å‡½æ•°ï¼šç»„ä»¶å¸è½½æ—¶ç§»é™¤äº‹ä»¶ç›‘å¬ï¼Œé¿å…å†…å­˜æ³„æ¼</span>
        <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
            <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'mousemove'</span>, update); <span class="hljs-comment">// ç§»é™¤ç›¸åŒçš„äº‹ä»¶å¤„ç†å‡½æ•°</span>
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'===== æ¸…é™¤'</span>); <span class="hljs-comment">// æ¸…ç†æ—¶æ‰“å°</span>
        }
    }, []); <span class="hljs-comment">// ç©ºä¾èµ–æ•°ç»„ï¼šä»…åœ¨ç»„ä»¶æŒ‚è½½æ—¶æ‰§è¡Œä¸€æ¬¡ï¼Œå¸è½½æ—¶æ‰§è¡Œæ¸…ç†</span>

    <span class="hljs-comment">// è¿”å›é¼ æ ‡åæ ‡ï¼Œä¾›ç»„ä»¶ä½¿ç”¨</span>
    <span class="hljs-keyword">return</span> {
        x,
        y,
    }
}
</code></pre>
<p><strong>ä»£ç é€»è¾‘è¯¦è§£</strong>ï¼š</p>
<ul>
<li>
<p><code>useMouse</code>éµå¾ªå‘½åè§„èŒƒï¼ˆä»¥<code>use</code>å¼€å¤´ï¼‰ï¼Œå†…éƒ¨å¯ä»¥è°ƒç”¨å†…ç½® Hooksï¼ˆ<code>useState</code>ã€<code>useEffect</code>ï¼‰ã€‚</p>
</li>
<li>
<p>ç”¨<code>useState</code>å®šä¹‰<code>x</code>å’Œ<code>y</code>çŠ¶æ€ï¼Œåˆ†åˆ«å­˜å‚¨é¼ æ ‡çš„æ°´å¹³å’Œå‚ç›´åæ ‡ã€‚</p>
</li>
<li>
<p>ç”¨<code>useEffect</code>å¤„ç†é¼ æ ‡ç›‘å¬çš„å‰¯ä½œç”¨ï¼š</p>
<ul>
<li>æŒ‚è½½æ—¶ï¼šç»‘å®š<code>mousemove</code>äº‹ä»¶ï¼Œé¼ æ ‡ç§»åŠ¨æ—¶è§¦å‘<code>update</code>å‡½æ•°æ›´æ–°<code>x</code>ã€<code>y</code>ã€‚</li>
<li>å¸è½½æ—¶ï¼šé€šè¿‡<code>useEffect</code>çš„è¿”å›å‡½æ•°ç§»é™¤<code>mousemove</code>äº‹ä»¶ç›‘å¬ï¼Œé¿å…ç»„ä»¶å·²å¸è½½ä½†äº‹ä»¶ä»è§¦å‘çš„å†…å­˜æ³„æ¼ï¼ˆæ¯”å¦‚å½“<code>count</code>ä¸ºå¥‡æ•°æ—¶ï¼Œ<code>MouseMove</code>ç»„ä»¶å¸è½½ï¼Œæ­¤æ—¶ä¼šæ‰§è¡Œæ¸…ç†å‡½æ•°ï¼‰ã€‚</li>
</ul>
</li>
<li>
<p>æœ€åè¿”å›åŒ…å«<code>x</code>å’Œ<code>y</code>çš„å¯¹è±¡ï¼Œè®©ç»„ä»¶å¯ä»¥è·å–é¼ æ ‡åæ ‡ã€‚</p>
</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b705405c85ef47a5b17e097ff41195ad~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeGlhb3h1ZV8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768041866&amp;x-signature=ouEpwutZVO56nhLVP1NUDhXOMrI%3D" alt="QQ20260103-184336.png" loading="lazy"/></p>
<h4 data-id="heading-12">4. æ•ˆæœå±•ç¤ºï¼š</h4>
<ul>
<li>å½“ç‚¹å‡»æŒ‰é’®ä½¿<code>count</code>ä¸º 0ã€2ã€4 ç­‰å¶æ•°æ—¶ï¼Œé¡µé¢ä¼šæ˜¾ç¤º â€œé¼ æ ‡ä½ç½®ï¼šx, yâ€ï¼Œç§»åŠ¨é¼ æ ‡æ—¶åæ ‡ä¼šå®æ—¶æ›´æ–°ï¼Œæ§åˆ¶å°æ‰“å° â€œ||||| æŒ‚è½½â€ã€‚</li>
<li>å½“ç‚¹å‡»æŒ‰é’®ä½¿<code>count</code>ä¸º 0ã€2ã€4 ç­‰å¶æ•°æ—¶ï¼Œç§»åŠ¨é¼ æ ‡ï¼Œæ§åˆ¶å°æ‰“å°â€œ/////â€</li>
<li>å½“<code>count</code>ä¸º 1ã€3ã€5 ç­‰å¥‡æ•°æ—¶ï¼Œé¼ æ ‡ä½ç½®ä¸æ˜¾ç¤ºï¼Œæ§åˆ¶å°æ‰“å° â€œ===== æ¸…é™¤â€ä¸”ä¸æ‰“å°â€œ/////â€ï¼ˆè¡¨ç¤ºäº‹ä»¶ç›‘å¬å·²ç§»é™¤ï¼‰ã€‚</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e85e9f21c8cb4672bcec43e966698393~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeGlhb3h1ZV8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768041866&amp;x-signature=N8wjjJQcE2e5MpwEBStosoiuzZg%3D" alt="QQ202613-165111.gif" loading="lazy"/></p>
<h3 data-id="heading-13">ä¸‰ã€è¯¦è§£è‡ªå®šä¹‰ hooks ğŸ“š</h3>
<p>é€šè¿‡ä¸Šé¢çš„ç®€å•æ¡ˆä¾‹ï¼Œæˆ‘ä»¬å¯ä»¥æ€»ç»“å‡ºå…³äºè‡ªå®šä¹‰ Hooks çš„å¿…å¤‡çŸ¥è¯†ï¼š</p>
<h4 data-id="heading-14">1. ä»€ä¹ˆæ—¶å€™éœ€è¦è‡ªå®šä¹‰ hooks ï¼Ÿ</h4>
<p>ï¼ˆ1ï¼‰<strong>é€»è¾‘å¤ç”¨åœºæ™¯</strong>å½“å¤šä¸ªç»„ä»¶éœ€è¦å…±äº«ç›¸åŒçš„çŠ¶æ€é€»è¾‘æ—¶ï¼Œé€šè¿‡è‡ªå®šä¹‰ Hook å°è£…å¯é¿å…ä»£ç é‡å¤ã€‚ä¸Šé¢æ¡ˆä¾‹ä¸­ï¼Œ<code>useMouse</code>å°è£…äº†é¼ æ ‡ä½ç½®ç›‘å¬çš„å®Œæ•´é€»è¾‘ï¼ˆçŠ¶æ€ç®¡ç†ã€äº‹ä»¶ç»‘å®š / è§£ç»‘ï¼‰ï¼Œä½¿å¾—<code>MouseMove</code>ç»„ä»¶æ— éœ€é‡å¤ç¼–å†™è¯¥é€»è¾‘ã€‚è‹¥å…¶ä»–ç»„ä»¶ï¼ˆå¦‚ â€œé¼ æ ‡è½¨è¿¹ç»˜åˆ¶ç»„ä»¶â€ï¼‰ä¹Ÿéœ€è¦è·å–é¼ æ ‡ä½ç½®ï¼Œå¯ç›´æ¥å¤ç”¨<code>useMouse</code>ã€‚</p>
<p>ï¼ˆ2ï¼‰<strong>åˆ†ç¦» UI ä¸ä¸šåŠ¡é€»è¾‘</strong>å½“ç»„ä»¶ä¸­åŒæ—¶åŒ…å« UI æ¸²æŸ“å’Œå¤æ‚ä¸šåŠ¡é€»è¾‘ï¼ˆå¦‚äº‹ä»¶ç›‘å¬ã€æ•°æ®å¤„ç†ï¼‰æ—¶ï¼Œè‡ªå®šä¹‰ Hooks å¯å°†ä¸šåŠ¡é€»è¾‘æŠ½ç¦»ï¼Œè®©ç»„ä»¶åªä¸“æ³¨äº UI å±•ç¤ºã€‚ä¸Šé¢æ¡ˆä¾‹ä¸­ï¼Œ<code>MouseMove</code>ç»„ä»¶ä»…è´Ÿè´£æ¸²æŸ“é¼ æ ‡åæ ‡ï¼ˆçº¯ UI é€»è¾‘ï¼‰ï¼Œè€Œé¼ æ ‡ç›‘å¬çš„ä¸šåŠ¡é€»è¾‘è¢«å°è£…åœ¨<code>useMouse</code>ä¸­ï¼Œä½¿ç»„ä»¶ä»£ç æ›´ç®€æ´æ˜“ç»´æŠ¤ã€‚</p>
<p>ï¼ˆ3ï¼‰<strong>æŠ½è±¡å¤æ‚å‰¯ä½œç”¨é€»è¾‘</strong>å½“é€»è¾‘æ¶‰åŠ<code>useState</code>ã€<code>useEffect</code>ç­‰ Hook çš„ç»„åˆä½¿ç”¨ï¼ˆå¦‚çŠ¶æ€ç®¡ç† + å‰¯ä½œç”¨å¤„ç†ï¼‰æ—¶ï¼Œè‡ªå®šä¹‰ Hook å¯å°†å…¶æŠ½è±¡ä¸ºç‹¬ç«‹å•å…ƒï¼Œæé«˜å¯è¯»æ€§ã€‚ä¸Šé¢æ¡ˆä¾‹ä¸­<code>useMouse</code>æ•´åˆäº†<code>useState</code>ï¼ˆç®¡ç† xã€y åæ ‡ï¼‰å’Œ<code>useEffect</code>ï¼ˆé¼ æ ‡äº‹ä»¶ç›‘å¬ / æ¸…ç†ï¼‰ï¼Œå°†åˆ†æ•£çš„é€»è¾‘èšåˆä¸ºå¯å¤ç”¨çš„å•å…ƒã€‚</p>
<h4 data-id="heading-15">2. å¦‚ä½•è‡ªå®šä¹‰ hooksï¼Ÿ</h4>
<p>ï¼ˆ1ï¼‰<strong>éµå¾ªå‘½åè§„èŒƒ</strong>å‡½æ•°åå¿…é¡»ä»¥<code>use</code>å¼€å¤´ï¼ˆå¦‚<code>useMouse</code>ã€<code>useTodos</code>ï¼‰ï¼Œè¿™æ˜¯ React çš„å¼ºåˆ¶çº¦å®šï¼Œç¡®ä¿ React èƒ½è¯†åˆ« Hook çš„è°ƒç”¨è§„åˆ™ï¼ˆå¦‚åªèƒ½åœ¨ç»„ä»¶æˆ–å…¶ä»– Hook ä¸­ä½¿ç”¨ï¼‰ã€‚</p>
<p>ï¼ˆ2ï¼‰<strong>å°è£…æ ¸å¿ƒé€»è¾‘</strong>åœ¨å‡½æ•°å†…éƒ¨å¯è°ƒç”¨å…¶ä»– Hookï¼ˆå¦‚<code>useState</code>ã€<code>useEffect</code>ï¼‰ï¼Œå¹¶é€šè¿‡<code>return</code>æš´éœ²éœ€è¦çš„çŠ¶æ€æˆ–æ–¹æ³•ã€‚æ¡ˆä¾‹ä¸­<code>useMouse</code>çš„å®ç°æ­¥éª¤ï¼š</p>
<ul>
<li>ç”¨<code>useState</code>å®šä¹‰<code>x</code>å’Œ<code>y</code>çŠ¶æ€ï¼Œå­˜å‚¨é¼ æ ‡åæ ‡ï¼›</li>
<li>ç”¨<code>useEffect</code>ç»‘å®š<code>mousemove</code>äº‹ä»¶ï¼Œå®æ—¶æ›´æ–°åæ ‡ï¼›</li>
<li>é€šè¿‡<code>return { x, y }</code>å°†åæ ‡æš´éœ²ç»™ç»„ä»¶ä½¿ç”¨ã€‚</li>
</ul>
<p>ï¼ˆ3ï¼‰<strong>è®¾è®¡è¿”å›å€¼</strong>æ ¹æ®éœ€æ±‚è¿”å›çŠ¶æ€ã€æ–¹æ³•æˆ–å¯¹è±¡ï¼Œæ–¹ä¾¿ç»„ä»¶çµæ´»ä½¿ç”¨ã€‚æ¡ˆä¾‹ä¸­è¿”å›åŒ…å«<code>x</code>å’Œ<code>y</code>çš„å¯¹è±¡ï¼Œç»„ä»¶é€šè¿‡<code>const { x, y } = useMouse()</code>ç›´æ¥è·å–åæ ‡ï¼›è‹¥é€»è¾‘å¤æ‚ï¼ˆå¦‚å¾…åŠäº‹é¡¹ç®¡ç†ï¼‰ï¼Œå¯è¿”å›çŠ¶æ€å’Œæ“ä½œæ–¹æ³•çš„é›†åˆï¼ˆå¦‚<code>{ todos, addTodo, deleteTodo }</code>ï¼‰ã€‚</p>
<h4 data-id="heading-16">3. è‡ªå®šä¹‰ hooks æœ‰ä»€ä¹ˆæ³¨æ„äº‹é¡¹ï¼Ÿ</h4>
<p>ï¼ˆ1ï¼‰<strong>ä¸¥æ ¼éµå¾ª Hook è°ƒç”¨è§„åˆ™</strong></p>
<ul>
<li>åªèƒ½åœ¨ç»„ä»¶å‡½æ•°æˆ–å…¶ä»–è‡ªå®šä¹‰ Hook ä¸­è°ƒç”¨ï¼ˆä¸Šé¢æ¡ˆä¾‹ä¸­<code>useMouse</code>åœ¨<code>MouseMove</code>ç»„ä»¶ä¸­è°ƒç”¨ï¼Œç¬¦åˆè§„åˆ™ï¼‰ï¼›</li>
<li>ä¸èƒ½åœ¨å¾ªç¯ã€æ¡ä»¶åˆ¤æ–­æˆ–æ™®é€šå‡½æ•°ä¸­è°ƒç”¨ï¼ˆé¿å… React æ— æ³•ä¿è¯ Hook è°ƒç”¨é¡ºåºçš„ä¸€è‡´æ€§ï¼‰ã€‚</li>
</ul>
<p>ï¼ˆ2ï¼‰<strong>æ¸…ç†å‰¯ä½œç”¨ï¼Œé¿å…å†…å­˜æ³„æ¼</strong>è‹¥ Hook åŒ…å«å‰¯ä½œç”¨ï¼ˆå¦‚äº‹ä»¶ç›‘å¬ã€å®šæ—¶å™¨ã€API è¯·æ±‚ï¼‰ï¼Œå¿…é¡»åœ¨<code>useEffect</code>çš„æ¸…ç†å‡½æ•°ä¸­ç§»é™¤å‰¯ä½œç”¨ã€‚ä¸Šé¢æ¡ˆä¾‹ä¸­ï¼Œ<code>useMouse</code>åœ¨<code>useEffect</code>çš„è¿”å›å‡½æ•°ä¸­è°ƒç”¨<code>removeEventListener</code>ï¼Œç¡®ä¿<code>MouseMove</code>ç»„ä»¶å¸è½½æ—¶ï¼ˆ<code>count</code>ä¸ºå¥‡æ•°æ—¶ï¼‰ç§»é™¤é¼ æ ‡ç›‘å¬ï¼Œé¿å…ç»„ä»¶å·²å¸è½½ä½†äº‹ä»¶ä»è§¦å‘çš„å†…å­˜æ³„æ¼ï¼ˆæ§åˆ¶å°ä¼šæ‰“å° â€œ===== æ¸…é™¤â€ éªŒè¯ï¼‰ã€‚</p>
<p>ï¼ˆ3ï¼‰<strong>ä¿æŒå•ä¸€èŒè´£</strong>ä¸€ä¸ªè‡ªå®šä¹‰ Hook åº”ä¸“æ³¨äºè§£å†³ä¸€ä¸ªç‰¹å®šé—®é¢˜ã€‚ä¸Šé¢æ¡ˆä¾‹ä¸­<code>useMouse</code>ä»…è´Ÿè´£é¼ æ ‡ä½ç½®ç›‘å¬ï¼ŒèŒè´£å•ä¸€ï¼›è‹¥å¼ºè¡ŒåŠ å…¥å…¶ä»–é€»è¾‘ï¼ˆå¦‚é”®ç›˜ç›‘å¬ï¼‰ä¼šå¯¼è‡´ Hook è‡ƒè‚¿ï¼Œé™ä½å¤ç”¨æ€§ã€‚</p>
<h3 data-id="heading-17">å››ã€å¤æ‚æ¡ˆä¾‹å®æˆ˜ï¼šå¾…åŠäº‹é¡¹ï¼ˆTodo Listï¼‰åº”ç”¨ ğŸ“</h3>
<h4 data-id="heading-18">1. éœ€æ±‚åˆ†æï¼š</h4>
<p>æœ¬æ¡ˆä¾‹æ˜¯ä¸€ä¸ªåŸºäº React çš„å¾…åŠäº‹é¡¹åº”ç”¨ï¼Œæ ¸å¿ƒéœ€æ±‚å›´ç»•å¾…åŠäº‹é¡¹çš„å…¨ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼Œå…·ä½“åŒ…æ‹¬ï¼š</p>
<ul>
<li>è¾“å…¥æ¡†è¾“å…¥å¾…åŠå†…å®¹ï¼Œç‚¹å‡»æ·»åŠ æŒ‰é’®åˆ›å»ºæ–°å¾…åŠï¼›</li>
<li>å‹¾é€‰å¤é€‰æ¡†æ ‡è®°å¾…åŠäº‹é¡¹ä¸º â€œå·²å®Œæˆâ€ æˆ– â€œæœªå®Œæˆâ€ï¼›</li>
<li>ç‚¹å‡»åˆ é™¤æŒ‰é’®ç§»é™¤ç‰¹å®šå¾…åŠäº‹é¡¹ï¼›</li>
<li>é¡µé¢åˆ·æ–°åï¼Œå·²æ·»åŠ çš„å¾…åŠæ•°æ®ä¸ä¸¢å¤±ï¼ˆæœ¬åœ°æŒä¹…åŒ–ï¼‰ï¼›</li>
<li>æ— å¾…åŠäº‹é¡¹æ—¶æ˜¾ç¤ºç©ºçŠ¶æ€æç¤ºã€‚</li>
</ul>
<p>æ ¸å¿ƒç—›ç‚¹ï¼šå¦‚ä½•å°†æ•°æ®ç®¡ç†é€»è¾‘ä¸ UI æ¸²æŸ“é€»è¾‘åˆ†ç¦»ï¼Œå®ç°ä»£ç å¤ç”¨å’Œç»´æŠ¤æ€§æå‡ â€”â€” è¿™æ­£æ˜¯è‡ªå®šä¹‰ Hook çš„æ ¸å¿ƒåº”ç”¨åœºæ™¯ã€‚</p>
<h4 data-id="heading-19">2. å®ç°æ¶æ„è®¾è®¡ï¼š</h4>
<p>ï¼ˆ1ï¼‰<strong>æ•´ä½“æ¶æ„</strong>é‡‡ç”¨ â€œUI ç»„ä»¶ + è‡ªå®šä¹‰ Hookâ€ çš„åˆ†ç¦»æ¨¡å¼ï¼š</p>
<ul>
<li>UI ç»„ä»¶ï¼šè´Ÿè´£æ¸²æŸ“ç•Œé¢å’Œå¤„ç†ç”¨æˆ·äº¤äº’ï¼ˆè¾“å…¥ã€ç‚¹å‡»ç­‰ï¼‰ï¼›</li>
<li>è‡ªå®šä¹‰ Hooksï¼ˆ<code>useTodos</code>ï¼‰ï¼šå°è£…æ•°æ®çŠ¶æ€ã€ä¸šåŠ¡é€»è¾‘å’ŒæŒä¹…åŒ–æ“ä½œã€‚</li>
</ul>
<p>ï¼ˆ2ï¼‰<strong>æ ¸å¿ƒè®¾è®¡ï¼šè‡ªå®šä¹‰ hooks çš„èŒè´£</strong><code>useTodos</code>ä½œä¸ºæ•°æ®å’Œé€»è¾‘çš„ â€œä¸­å¤®å¤„ç†å™¨â€ï¼Œæ‰¿æ‹…ä»¥ä¸‹èŒè´£ï¼š</p>
<ul>
<li>ç®¡ç†å¾…åŠäº‹é¡¹çš„å“åº”å¼çŠ¶æ€ï¼ˆ<code>todos</code>æ•°ç»„ï¼‰ï¼›</li>
<li>æä¾›æ“ä½œå¾…åŠçš„æ–¹æ³•ï¼ˆæ·»åŠ ã€åˆ‡æ¢çŠ¶æ€ã€åˆ é™¤ï¼‰ï¼›</li>
<li>å®ç°æ•°æ®æœ¬åœ°æŒä¹…åŒ–ï¼ˆ<code>localStorage</code>è¯»å†™ï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-20">3. ä»£ç å±•ç¤ºï¼ˆæ ¸å¿ƒä»£ç ï¼‰</h4>
<h5 data-id="heading-21">ï¼ˆ1ï¼‰è‡ªå®šä¹‰ Hookï¼šuseTodos.js</h5>
<p>js</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å°è£…å“åº”å¼çš„todosä¸šåŠ¡é€»è¾‘</span>
<span class="hljs-keyword">import</span> { useState, useEffect } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-comment">// å®šä¹‰localStorageçš„é”®åï¼Œç”¨äºå­˜å‚¨å¾…åŠæ•°æ®</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">STORAGE_KEY</span> = <span class="hljs-string">'todos'</span>;

<span class="hljs-comment">// ä»localStorageåŠ è½½å¾…åŠæ•°æ®</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">loadFromStorge</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> <span class="hljs-title class_">StoredTodos</span> = <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-variable constant_">STORAGE_KEY</span>);
    <span class="hljs-comment">// è‹¥æœ‰æ•°æ®åˆ™è§£æä¸ºJSONï¼Œå¦åˆ™è¿”å›ç©ºæ•°ç»„</span>
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">StoredTodos</span> ? <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(<span class="hljs-title class_">StoredTodos</span>) : [];
}

<span class="hljs-comment">// å°†å¾…åŠæ•°æ®ä¿å­˜åˆ°localStorage</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">saveToStorage</span>(<span class="hljs-params">todos</span>) {
    <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-variable constant_">STORAGE_KEY</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(todos));
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">useTodos</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-comment">// åˆå§‹åŒ–todosçŠ¶æ€ï¼šä»localStorageåŠ è½½ï¼ˆuseStateæ¥æ”¶å‡½æ•°ï¼Œç¡®ä¿åªæ‰§è¡Œä¸€æ¬¡ï¼‰</span>
    <span class="hljs-keyword">const</span> [todos, setTodos] = <span class="hljs-title function_">useState</span>(loadFromStorge);

    <span class="hljs-comment">// ç›‘å¬todoså˜åŒ–ï¼Œå®æ—¶ä¿å­˜åˆ°localStorageï¼ˆæŒä¹…åŒ–ï¼‰</span>
    <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-title function_">saveToStorage</span>(todos);
    }, [todos]); <span class="hljs-comment">// ä¾èµ–todosï¼šåªæœ‰todoså˜åŒ–æ—¶æ‰æ‰§è¡Œ</span>

    <span class="hljs-comment">// æ·»åŠ å¾…åŠäº‹é¡¹</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">addTodo</span> = (<span class="hljs-params">text</span>) =&gt; {
        <span class="hljs-title function_">setTodos</span>([
            ...todos, <span class="hljs-comment">// å¤åˆ¶ç°æœ‰å¾…åŠ</span>
            { 
                <span class="hljs-attr">id</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>(), <span class="hljs-comment">// ç”¨æ—¶é—´æˆ³ä½œä¸ºå”¯ä¸€ID</span>
                text, <span class="hljs-comment">// å¾…åŠå†…å®¹</span>
                <span class="hljs-attr">completed</span>: <span class="hljs-literal">false</span> <span class="hljs-comment">// åˆå§‹çŠ¶æ€ä¸ºæœªå®Œæˆ</span>
            }
        ]);
    }

    <span class="hljs-comment">// åˆ‡æ¢å¾…åŠäº‹é¡¹çš„å®ŒæˆçŠ¶æ€</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">toggleTodo</span> = (<span class="hljs-params">id</span>) =&gt; {
        <span class="hljs-title function_">setTodos</span>(
            todos.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">todo</span>) =&gt;</span> {
                <span class="hljs-comment">// æ‰¾åˆ°ç›®æ ‡å¾…åŠï¼Œåè½¬completedçŠ¶æ€</span>
                <span class="hljs-keyword">if</span> (todo.<span class="hljs-property">id</span> === id) {
                    <span class="hljs-keyword">return</span> { ...todo, <span class="hljs-attr">completed</span>: !todo.<span class="hljs-property">completed</span> };
                }
                <span class="hljs-keyword">return</span> todo; <span class="hljs-comment">// éç›®æ ‡å¾…åŠä¸å˜</span>
            })
        );
    }

    <span class="hljs-comment">// åˆ é™¤å¾…åŠäº‹é¡¹</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">deleteTodo</span> = (<span class="hljs-params">id</span>) =&gt; {
        <span class="hljs-title function_">setTodos</span>(
            todos.<span class="hljs-title function_">filter</span>(<span class="hljs-function">(<span class="hljs-params">todo</span>) =&gt;</span> todo.<span class="hljs-property">id</span> !== id) <span class="hljs-comment">// è¿‡æ»¤æ‰è¦åˆ é™¤çš„å¾…åŠ</span>
        );
    }

    <span class="hljs-comment">// æš´éœ²çŠ¶æ€å’Œæ–¹æ³•ç»™ç»„ä»¶ä½¿ç”¨</span>
    <span class="hljs-keyword">return</span> {
        todos,
        addTodo,
        toggleTodo,
        deleteTodo,
    }
}
</code></pre>
<p><strong>é€»è¾‘è¯¦è§£</strong>ï¼š</p>
<ul>
<li><code>loadFromStorge</code>å’Œ<code>saveToStorage</code>ï¼šå°è£…<code>localStorage</code>çš„è¯»å†™é€»è¾‘ï¼Œå®ç°æ•°æ®æŒä¹…åŒ–ï¼ˆé¡µé¢åˆ·æ–°åæ•°æ®ä¸ä¸¢å¤±ï¼‰ã€‚</li>
<li><code>useTodos</code>å†…éƒ¨ç”¨<code>useState</code>ç®¡ç†<code>todos</code>çŠ¶æ€ï¼Œåˆå§‹åŒ–æ—¶ä»æœ¬åœ°å­˜å‚¨åŠ è½½æ•°æ®ã€‚</li>
<li>ç”¨<code>useEffect</code>ç›‘å¬<code>todos</code>å˜åŒ–ï¼Œæ¯æ¬¡å˜åŒ–éƒ½è°ƒç”¨<code>saveToStorage</code>ä¿å­˜åˆ°æœ¬åœ°ï¼Œç¡®ä¿æ•°æ®å®æ—¶åŒæ­¥ã€‚</li>
<li>æä¾›<code>addTodo</code>ï¼ˆæ·»åŠ ï¼‰ã€<code>toggleTodo</code>ï¼ˆåˆ‡æ¢çŠ¶æ€ï¼‰ã€<code>deleteTodo</code>ï¼ˆåˆ é™¤ï¼‰ä¸‰ä¸ªæ–¹æ³•ï¼Œé€šè¿‡<code>setTodos</code>æ›´æ–°çŠ¶æ€ï¼Œéµå¾ª â€œä¸å¯å˜æ•°æ®â€ åŸåˆ™ï¼ˆç”¨æ‰©å±•è¿ç®—ç¬¦ã€<code>map</code>ã€<code>filter</code>åˆ›å»ºæ–°æ•°ç»„ï¼‰ã€‚</li>
<li>æœ€åè¿”å›<code>todos</code>çŠ¶æ€å’Œæ“ä½œæ–¹æ³•ï¼Œä¾› UI ç»„ä»¶ä½¿ç”¨ã€‚</li>
</ul>
<h5 data-id="heading-22">ï¼ˆ2ï¼‰UI ç»„ä»¶ï¼šApp.jsxï¼ˆä¸»ç»„ä»¶ï¼‰</h5>
<p>jsx</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { useState } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> { useTodos } <span class="hljs-keyword">from</span> <span class="hljs-string">'./hooks/useTodos.js'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">TodoList</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./components/TodoList.jsx'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">TodoInput</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./components/TodoInput.jsx'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// è°ƒç”¨è‡ªå®šä¹‰Hookè·å–å¾…åŠæ•°æ®å’Œæ“ä½œæ–¹æ³•</span>
    <span class="hljs-keyword">const</span> { todos, addTodo, deleteTodo, toggleTodo } = <span class="hljs-title function_">useTodos</span>();

    <span class="hljs-keyword">return</span> (
        <span class="xml"><span class="hljs-tag">&lt;&gt;</span>
            {/* è¾“å…¥ç»„ä»¶ï¼šä¼ é€’addTodoæ–¹æ³•ç”¨äºæ·»åŠ å¾…åŠ */}
            <span class="hljs-tag">&lt;<span class="hljs-name">TodoInput</span> <span class="hljs-attr">addTodo</span>=<span class="hljs-string">{addTodo}</span> /&gt;</span>
            {/* æ¡ä»¶æ¸²æŸ“ï¼šæœ‰å¾…åŠæ—¶æ˜¾ç¤ºåˆ—è¡¨ï¼Œå¦åˆ™æ˜¾ç¤ºç©ºçŠ¶æ€ */}
            {
                todos.length &gt; 0 ?
                    <span class="hljs-tag">&lt;<span class="hljs-name">TodoList</span>
                        <span class="hljs-attr">todos</span>=<span class="hljs-string">{todos}</span>
                        <span class="hljs-attr">deleteTodo</span>=<span class="hljs-string">{deleteTodo}</span>
                        <span class="hljs-attr">toggleTodo</span>=<span class="hljs-string">{toggleTodo}</span>
                    /&gt;</span> : 
                    (<span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>æš‚æ— å¾…åŠäº‹é¡¹<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>)
            }
        <span class="hljs-tag">&lt;/&gt;</span></span>
    )
}
</code></pre>
<p><strong>é€»è¾‘è¯¦è§£</strong>ï¼š</p>
<ul>
<li><code>App</code>ç»„ä»¶ä½œä¸ºå…¥å£ï¼Œé€šè¿‡<code>useTodos()</code>è·å–å¾…åŠæ•°æ®ï¼ˆ<code>todos</code>ï¼‰å’Œæ“ä½œæ–¹æ³•ï¼ˆ<code>addTodo</code>ç­‰ï¼‰ã€‚</li>
<li>æ¸²æŸ“<code>TodoInput</code>ç»„ä»¶ï¼ˆè´Ÿè´£è¾“å…¥å¾…åŠï¼‰å¹¶ä¼ é€’<code>addTodo</code>æ–¹æ³•ï¼Œè®©è¾“å…¥ç»„ä»¶èƒ½è§¦å‘æ·»åŠ æ“ä½œã€‚</li>
<li>æ¸²æŸ“<code>TodoList</code>ç»„ä»¶ï¼ˆè´Ÿè´£å±•ç¤ºå¾…åŠåˆ—è¡¨ï¼‰å¹¶ä¼ é€’<code>todos</code>ã€<code>deleteTodo</code>ã€<code>toggleTodo</code>ï¼Œè®©åˆ—è¡¨ç»„ä»¶èƒ½å±•ç¤ºæ•°æ®å’Œå¤„ç†åˆ é™¤ / åˆ‡æ¢æ“ä½œã€‚</li>
<li>é€šè¿‡æ¡ä»¶æ¸²æŸ“å®ç° â€œæ— å¾…åŠæ—¶æ˜¾ç¤ºç©ºæç¤ºâ€ çš„éœ€æ±‚ã€‚</li>
</ul>
<h5 data-id="heading-23">ï¼ˆ3ï¼‰UI ç»„ä»¶ï¼šTodoInput.jsxï¼ˆè¾“å…¥ç»„ä»¶ï¼‰</h5>
<p>jsx</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { useState } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">TodoInput</span>(<span class="hljs-params">{ addTodo }</span>) {
    <span class="hljs-comment">// ç®¡ç†è¾“å…¥æ¡†æ–‡æœ¬çŠ¶æ€ï¼ˆå—æ§ç»„ä»¶ï¼‰</span>
    <span class="hljs-keyword">const</span> [text, setText] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">''</span>);

    <span class="hljs-comment">// è¾“å…¥æ¡†å˜åŒ–æ—¶æ›´æ–°textçŠ¶æ€</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleChange</span> = (<span class="hljs-params">e</span>) =&gt; {
        <span class="hljs-title function_">setText</span>(e.<span class="hljs-property">target</span>.<span class="hljs-property">value</span>);
    }

    <span class="hljs-comment">// è¡¨å•æäº¤æ—¶æ·»åŠ å¾…åŠ</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleSubmit</span> = (<span class="hljs-params">e</span>) =&gt; {
        e.<span class="hljs-title function_">preventDefault</span>(); <span class="hljs-comment">// é˜»æ­¢è¡¨å•é»˜è®¤æäº¤è¡Œä¸º</span>
        <span class="hljs-keyword">if</span> (text.<span class="hljs-title function_">trim</span>() === <span class="hljs-string">''</span>) { <span class="hljs-comment">// è¿‡æ»¤ç©ºè¾“å…¥</span>
            <span class="hljs-keyword">return</span>;
        }
        <span class="hljs-title function_">addTodo</span>(text); <span class="hljs-comment">// è°ƒç”¨çˆ¶ç»„ä»¶ä¼ é€’çš„addTodoæ–¹æ³•æ·»åŠ å¾…åŠ</span>
        <span class="hljs-title function_">setText</span>(<span class="hljs-string">''</span>); <span class="hljs-comment">// æ¸…ç©ºè¾“å…¥æ¡†</span>
    }

    <span class="hljs-keyword">return</span> (
        <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">className</span>=<span class="hljs-string">'todo-input'</span> <span class="hljs-attr">onSubmit</span>=<span class="hljs-string">{handleSubmit}</span>&gt;</span>
            {/* å—æ§ç»„ä»¶ï¼švalueç»‘å®štextï¼Œå˜åŒ–è§¦å‘handleChange */}
            <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">'text'</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{text}</span> <span class="hljs-attr">onChange</span>=<span class="hljs-string">{handleChange}</span> /&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">'submit'</span>&gt;</span>æ·»åŠ <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span></span>
    )
}
</code></pre>
<p><strong>é€»è¾‘è¯¦è§£</strong>ï¼š</p>
<ul>
<li>çº¯ UI ç»„ä»¶ï¼Œä»…è´Ÿè´£è¾“å…¥æ¡†çš„çŠ¶æ€ç®¡ç†å’Œæäº¤é€»è¾‘ï¼Œä¸å…³å¿ƒæ•°æ®å¦‚ä½•å­˜å‚¨æˆ–å¤„ç†ã€‚</li>
<li>é€šè¿‡<code>useState</code>ç®¡ç†è¾“å…¥æ¡†çš„<code>text</code>çŠ¶æ€ï¼Œå®ç° â€œå—æ§ç»„ä»¶â€ï¼ˆè¾“å…¥æ¡†å€¼ç”± React çŠ¶æ€æ§åˆ¶ï¼‰ã€‚</li>
<li>è¡¨å•æäº¤æ—¶è°ƒç”¨<code>addTodo</code>ï¼ˆä»<code>App</code>ç»„ä»¶ä¼ é€’çš„æ–¹æ³•ï¼‰æ·»åŠ å¾…åŠï¼Œå¹¶æ¸…ç©ºè¾“å…¥æ¡†ã€‚</li>
</ul>
<h5 data-id="heading-24">ï¼ˆ4ï¼‰UI ç»„ä»¶ï¼šTodoList.jsxï¼ˆåˆ—è¡¨ç»„ä»¶ï¼‰</h5>
<p>jsx</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">TodoItem</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./TodoItem.jsx'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">TodoList</span>(<span class="hljs-params">{ todos, deleteTodo, toggleTodo }</span>) {
    <span class="hljs-keyword">return</span> (
        <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"todo-list"</span>&gt;</span>
            {/* éå†todosæ•°ç»„ï¼Œä¸ºæ¯ä¸ªå¾…åŠæ¸²æŸ“TodoItemç»„ä»¶ */}
            {todos.map((todo) =&gt; (
                <span class="hljs-tag">&lt;<span class="hljs-name">TodoItem</span> 
                 <span class="hljs-attr">key</span>=<span class="hljs-string">{todo.id}</span> // <span class="hljs-attr">å”¯ä¸€key</span>
                 <span class="hljs-attr">todo</span>=<span class="hljs-string">{todo}</span> // <span class="hljs-attr">ä¼ é€’å•ä¸ªå¾…åŠæ•°æ®</span>
                 <span class="hljs-attr">deleteTodo</span>=<span class="hljs-string">{deleteTodo}</span> // <span class="hljs-attr">ä¼ é€’åˆ é™¤æ–¹æ³•</span>
                 <span class="hljs-attr">toggleTodo</span>=<span class="hljs-string">{toggleTodo}</span> // <span class="hljs-attr">ä¼ é€’åˆ‡æ¢çŠ¶æ€æ–¹æ³•</span>
                /&gt;</span>
            ))}
        <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span></span>
    )
}
</code></pre>
<p><strong>é€»è¾‘è¯¦è§£</strong>ï¼š</p>
<ul>
<li>æ¥æ”¶<code>todos</code>æ•°ç»„ï¼Œé€šè¿‡<code>map</code>éå†æ¸²æŸ“æ¯ä¸ªå¾…åŠé¡¹ï¼ˆ<code>TodoItem</code>ï¼‰ã€‚</li>
<li>ä»…è´Ÿè´£åˆ—è¡¨æ¸²æŸ“ï¼Œå°†å•ä¸ªå¾…åŠçš„æ•°æ®å’Œæ“ä½œæ–¹æ³•ä¼ é€’ç»™<code>TodoItem</code>ï¼Œè‡ªèº«ä¸å¤„ç†ä¸šåŠ¡é€»è¾‘ã€‚</li>
</ul>
<h5 data-id="heading-25">ï¼ˆ5ï¼‰UI ç»„ä»¶ï¼šTodoItem.jsxï¼ˆå•ä¸ªå¾…åŠé¡¹ï¼‰</h5>
<p>jsx</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">TodoItem</span>(<span class="hljs-params">{ todo, deleteTodo, toggleTodo }</span>) {
    <span class="hljs-keyword">return</span> (
        <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"todo-item"</span>&gt;</span>
            {/* å¤é€‰æ¡†ï¼šçŠ¶æ€ç»‘å®štodo.completedï¼Œç‚¹å‡»è§¦å‘toggleTodo */}
            <span class="hljs-tag">&lt;<span class="hljs-name">input</span>
                <span class="hljs-attr">type</span>=<span class="hljs-string">"checkbox"</span>
                <span class="hljs-attr">checked</span>=<span class="hljs-string">{todo.completed}</span>
                <span class="hljs-attr">onChange</span>=<span class="hljs-string">{()</span> =&gt;</span> toggleTodo(todo.id)}
            /&gt;
            {/* å¾…åŠæ–‡æœ¬ï¼šå·²å®Œæˆæ—¶æ·»åŠ completedç±»ï¼ˆå¯ç”¨äºæ ·å¼åŒºåˆ†ï¼‰ */}
            <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{todo.completed</span> ? '<span class="hljs-attr">completed</span>' <span class="hljs-attr">:</span> ''}&gt;</span>
                {todo.text}
            <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
            {/* åˆ é™¤æŒ‰é’®ï¼šç‚¹å‡»è§¦å‘deleteTodo */}
            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> deleteTodo(todo.id)}&gt;åˆ é™¤<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span>
    )
}
</code></pre>
<p><strong>é€»è¾‘è¯¦è§£</strong>ï¼š</p>
<ul>
<li>æ¥æ”¶å•ä¸ªå¾…åŠæ•°æ®ï¼ˆ<code>todo</code>ï¼‰å’Œæ“ä½œæ–¹æ³•ï¼Œæ¸²æŸ“å¤é€‰æ¡†ã€æ–‡æœ¬å’Œåˆ é™¤æŒ‰é’®ã€‚</li>
<li>å¤é€‰æ¡†çŠ¶æ€ä¸<code>todo.completed</code>ç»‘å®šï¼Œç‚¹å‡»æ—¶è°ƒç”¨<code>toggleTodo</code>åˆ‡æ¢çŠ¶æ€ã€‚</li>
<li>æ–‡æœ¬æ ¹æ®<code>completed</code>çŠ¶æ€æ·»åŠ æ ·å¼ç±»ï¼ˆå¦‚åˆ’çº¿æ•ˆæœï¼‰ï¼Œåˆ é™¤æŒ‰é’®ç‚¹å‡»æ—¶è°ƒç”¨<code>deleteTodo</code>åˆ é™¤å½“å‰å¾…åŠã€‚</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/10ecafc5f10844369f5f6d214b0f4dbf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeGlhb3h1ZV8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768041866&amp;x-signature=zB6qg6oQzohfCNDDp5pyupcUres%3D" alt="QQ20260103-170824.png" loading="lazy"/></p>
<h4 data-id="heading-26">4. æ•ˆæœå±•ç¤ºï¼š</h4>
<ul>
<li>è¾“å…¥æ¡†è¾“å…¥å†…å®¹ï¼Œç‚¹å‡» â€œæ·»åŠ â€ æŒ‰é’®ï¼Œå¾…åŠåˆ—è¡¨ä¼šæ–°å¢ä¸€é¡¹ã€‚</li>
<li>å‹¾é€‰å¤é€‰æ¡†ï¼Œå¾…åŠæ–‡æœ¬ä¼šæ˜¾ç¤ºä¸º â€œå·²å®Œæˆâ€ æ ·å¼ã€‚</li>
<li>ç‚¹å‡» â€œåˆ é™¤â€ æŒ‰é’®ï¼Œå¯¹åº”å¾…åŠé¡¹ä¼šä»åˆ—è¡¨ä¸­ç§»é™¤ã€‚</li>
<li>åˆ·æ–°é¡µé¢åï¼Œæ‰€æœ‰å¾…åŠæ•°æ®ä¾ç„¶å­˜åœ¨ï¼ˆæœ¬åœ°å­˜å‚¨ç”Ÿæ•ˆï¼‰ã€‚</li>
<li>å½“åˆ—è¡¨ä¸ºç©ºæ—¶ï¼Œé¡µé¢æ˜¾ç¤º â€œæš‚æ— å¾…åŠäº‹é¡¹â€ã€‚</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/93a8817cc396405f9b478e994a276f3d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeGlhb3h1ZV8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768041866&amp;x-signature=T3RIj4Slvx24PmkVxphO2UIB2Pc%3D" alt="QQ202613-1709.gif" loading="lazy"/></p>
<h4 data-id="heading-27">5. æ¡ˆä¾‹æ€»ç»“ï¼š</h4>
<ul>
<li><strong>é€»è¾‘å¤ç”¨æœ€å¤§åŒ–</strong>ï¼š<code>useTodos</code>å°è£…äº†å¾…åŠäº‹é¡¹çš„æ‰€æœ‰æ ¸å¿ƒé€»è¾‘ï¼ˆçŠ¶æ€ç®¡ç†ã€CRUD æ“ä½œã€æœ¬åœ°æŒä¹…åŒ–ï¼‰ï¼Œè‹¥å…¶ä»–ç»„ä»¶ï¼ˆå¦‚ â€œå¾…åŠç»Ÿè®¡ç»„ä»¶â€ï¼‰éœ€è¦ä½¿ç”¨å¾…åŠæ•°æ®ï¼Œå¯ç›´æ¥è°ƒç”¨<code>useTodos</code>ï¼Œæ— éœ€é‡å¤ç¼–å†™é€»è¾‘ã€‚</li>
<li><strong>UI ä¸ä¸šåŠ¡å½»åº•åˆ†ç¦»</strong>ï¼šæ‰€æœ‰ UI ç»„ä»¶ï¼ˆ<code>TodoInput</code>ã€<code>TodoList</code>ç­‰ï¼‰ä»…è´Ÿè´£æ¸²æŸ“å’Œä¼ é€’äº¤äº’ï¼Œä¸åŒ…å«ä»»ä½•æ•°æ®å¤„ç†é€»è¾‘ï¼Œä»£ç ç»“æ„æ¸…æ™°ï¼Œç»´æŠ¤æˆæœ¬ä½ã€‚</li>
<li><strong>å‰¯ä½œç”¨é›†ä¸­ç®¡ç†</strong>ï¼šæœ¬åœ°å­˜å‚¨çš„è¯»å†™é€»è¾‘è¢«å°è£…åœ¨<code>useTodos</code>çš„<code>useEffect</code>ä¸­ï¼Œé¿å…å‰¯ä½œç”¨åˆ†æ•£åœ¨å¤šä¸ªç»„ä»¶ä¸­ï¼Œä¾¿äºç»Ÿä¸€ç»´æŠ¤ã€‚</li>
</ul>
<h3 data-id="heading-28">äº”ã€é¢è¯•å®˜ä¼šé—® ğŸ¤”</h3>
<ol>
<li><strong>è‡ªå®šä¹‰ Hook å’Œæ™®é€šå‡½æ•°æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</strong> è‡ªå®šä¹‰ Hook ä»¥<code>use</code>å¼€å¤´ï¼Œå†…éƒ¨å¯ä»¥è°ƒç”¨å…¶ä»– Hookï¼ˆå¦‚<code>useState</code>ã€<code>useEffect</code>ï¼‰ï¼Œä¸”å¿…é¡»éµå¾ª Hook è°ƒç”¨è§„åˆ™ï¼ˆåªèƒ½åœ¨ç»„ä»¶æˆ–å…¶ä»– Hook ä¸­è°ƒç”¨ï¼‰ï¼›æ™®é€šå‡½æ•°ä¸èƒ½è°ƒç”¨ Hookï¼Œä¹Ÿæ²¡æœ‰å‘½åé™åˆ¶ã€‚</li>
<li><strong>ä¸ºä»€ä¹ˆè‡ªå®šä¹‰ Hook å¿…é¡»ä»¥ use å¼€å¤´ï¼Ÿ</strong> è¿™æ˜¯ React çš„çº¦å®šï¼Œç¡®ä¿ React èƒ½é€šè¿‡å‘½åè¯†åˆ« Hookï¼Œä»è€ŒéªŒè¯ Hook çš„è°ƒç”¨è§„åˆ™ï¼ˆå¦‚é¿å…åœ¨æ¡ä»¶è¯­å¥ä¸­è°ƒç”¨ï¼‰ï¼Œé˜²æ­¢å‡ºç°é€»è¾‘é”™è¯¯ã€‚</li>
<li><strong>å¦‚ä½•é¿å…è‡ªå®šä¹‰ Hook ä¸­çš„å†…å­˜æ³„æ¼ï¼Ÿ</strong> è‹¥ Hook åŒ…å«å‰¯ä½œç”¨ï¼ˆå¦‚äº‹ä»¶ç›‘å¬ã€å®šæ—¶å™¨ï¼‰ï¼Œå¿…é¡»åœ¨<code>useEffect</code>çš„æ¸…ç†å‡½æ•°ä¸­ç§»é™¤å‰¯ä½œç”¨ï¼ˆå¦‚<code>removeEventListener</code>ã€<code>clearTimeout</code>ï¼‰ï¼Œç¡®ä¿ç»„ä»¶å¸è½½æ—¶å‰¯ä½œç”¨è¢«æ¸…é™¤ã€‚</li>
<li><strong>è‡ªå®šä¹‰ Hook å¦‚ä½•å®ç°çŠ¶æ€éš”ç¦»ï¼Ÿ</strong> æ¯ä¸ªç»„ä»¶è°ƒç”¨è‡ªå®šä¹‰ Hook æ—¶ï¼ŒReact éƒ½ä¼šä¸ºå…¶åˆ›å»ºç‹¬ç«‹çš„çŠ¶æ€å®ä¾‹ï¼Œä¸åŒç»„ä»¶ä¹‹é—´çš„çŠ¶æ€äº’ä¸å¹²æ‰°ï¼ˆå¦‚ä¸¤ä¸ªç»„ä»¶è°ƒç”¨<code>useMouse</code>ï¼Œä¼šåˆ†åˆ«ç»´æŠ¤è‡ªå·±çš„<code>x</code>ã€<code>y</code>çŠ¶æ€ï¼‰ã€‚</li>
<li><strong>ä»€ä¹ˆæ—¶å€™åº”è¯¥æŠ½ç¦»è‡ªå®šä¹‰ Hookï¼Ÿ</strong> å½“å¤šä¸ªç»„ä»¶éœ€è¦å…±äº«ç›¸åŒçš„çŠ¶æ€é€»è¾‘ï¼Œæˆ–ç»„ä»¶ä¸­ä¸šåŠ¡é€»è¾‘è¿‡äºå¤æ‚ï¼ˆå¯¼è‡´ UI ä¸é€»è¾‘æ··æ‚ï¼‰æ—¶ï¼Œå°±åº”è¯¥æŠ½ç¦»ä¸ºè‡ªå®šä¹‰ Hookã€‚</li>
</ol>
<h3 data-id="heading-29">å…­ã€ç»“è¯­ ğŸŒŸ</h3>
<p>è‡ªå®šä¹‰ Hooks æ˜¯ React ä¸­ â€œé€»è¾‘å¤ç”¨â€ çš„æœ€ä½³å®è·µï¼Œå®ƒè®©æˆ‘ä»¬çš„ä»£ç ä» â€œé‡å¤å†—ä½™â€ èµ°å‘ â€œç®€æ´é«˜æ•ˆâ€ï¼Œä» â€œUI ä¸é€»è¾‘æ··æ‚â€ èµ°å‘ â€œèŒè´£æ¸…æ™°åˆ†ç¦»â€ã€‚</p>
<p>é€šè¿‡æœ¬æ–‡çš„ä¸¤ä¸ªæ¡ˆä¾‹ï¼ˆé¼ æ ‡ä½ç½®ç›‘å¬å’Œå¾…åŠäº‹é¡¹åº”ç”¨ï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼šä¸€ä¸ªè®¾è®¡è‰¯å¥½çš„è‡ªå®šä¹‰ Hookï¼Œå°±åƒä¸€ä¸ª â€œåŠŸèƒ½æ¨¡å—â€ï¼Œèƒ½è®©ç»„ä»¶ä¸“æ³¨äº UI æ¸²æŸ“ï¼Œè®©é€»è¾‘ä¸“æ³¨äºä¸šåŠ¡å¤„ç†ã€‚</p>
<p>å¸Œæœ›å¤§å®¶åœ¨å®é™…å¼€å‘ä¸­å¤šæ€è€ƒã€å¤šå®è·µï¼Œå°†è‡ªå®šä¹‰ Hooks è¿ç”¨åˆ°é¡¹ç›®ä¸­ï¼Œè®©ä»£ç æ›´ä¼˜é›…ã€æ›´å¯ç»´æŠ¤ï¼ğŸ‰</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç¨‹åºå‘˜åº”è¯¥ç†Ÿæ‚‰çš„æ¦‚å¿µ(6)Fine-tuningå’ŒRAG]]></title>    <link>https://juejin.cn/post/7590452143016656934</link>    <guid>https://juejin.cn/post/7590452143016656934</guid>    <pubDate>2026-01-03T07:49:42.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7590452143016656934" data-draft-id="7590469811409010715" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç¨‹åºå‘˜åº”è¯¥ç†Ÿæ‚‰çš„æ¦‚å¿µ(6)Fine-tuningå’ŒRAG"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,æ¶æ„,ç®—æ³•"/> <meta itemprop="datePublished" content="2026-01-03T07:49:42.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åˆ˜ç«‹å†›"/> <meta itemprop="url" content="https://juejin.cn/user/2830599308981642"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç¨‹åºå‘˜åº”è¯¥ç†Ÿæ‚‰çš„æ¦‚å¿µ(6)Fine-tuningå’ŒRAG
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2830599308981642/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åˆ˜ç«‹å†›
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-03T07:49:42.000Z" title="Sat Jan 03 2026 07:49:42 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong>å¤§è¯­è¨€æ¨¡å‹/LLM</strong> é€šå¸¸æ˜¯ç”±æµ·é‡é€šç”¨çŸ¥è¯†ï¼ˆå¦‚è¯­æ³•ã€å¸¸è¯†ã€é€»è¾‘ï¼‰è®­ç»ƒçš„ï¼Œåœ¨é¢å¯¹å…·ä½“åœºæ™¯ï¼ˆå¦‚åŒ»ç–—é—®è¯Šã€æ³•å¾‹æ–‡ä¹¦ç”Ÿæˆï¼‰æ—¶ï¼Œèƒ½åŠ›å¾€å¾€ä¸è¶³ã€‚<br/>
<strong>Fine-tuning/å¾®è°ƒ</strong> æ­£æ˜¯ä¸ºè§£å†³è¿™ä¸€é—®é¢˜è€Œç”Ÿçš„æ ¸å¿ƒæŠ€æœ¯ï¼Œå…¶æœ¬è´¨æ˜¯åœ¨é¢„è®­ç»ƒæ¨¡å‹çš„åŸºç¡€ä¸Šï¼Œç”¨ç‰¹å®šé¢†åŸŸ / ä»»åŠ¡çš„å°æ•°æ®é›†è¿›ä¸€æ­¥è®­ç»ƒï¼Œè®©æ¨¡å‹ <strong>é€‚é…å…·ä½“éœ€æ±‚</strong>ï¼Œæœ€ç»ˆè¾“å‡ºæ›´ç²¾å‡†ã€æ›´è´´åˆåœºæ™¯çš„ç»“æœã€‚</p>

<h2 data-id="heading-0">å¾®è°ƒï¼ˆFine-tuningï¼‰çš„æ ¸å¿ƒå®šä¹‰</h2>
<p>å¾®è°ƒçš„æŠ€æœ¯é€»è¾‘å¯æ‹†è§£ä¸ºä¸¤æ­¥ï¼š</p>
<ol>
<li>åŸºç¡€ï¼šé¢„è®­ç»ƒæ¨¡å‹<br/>
æ¨¡å‹å·²é€šè¿‡ä¸‡äº¿çº§é€šç”¨æ•°æ®ï¼ˆå¦‚å…¨ç½‘æ–‡æœ¬ã€ä¹¦ç±ã€è®ºæ–‡ï¼‰å­¦ä¹ äº†é€šç”¨è¯­è¨€è§„å¾‹ï¼ˆå¦‚ â€œçŒ«æ˜¯å“ºä¹³åŠ¨ç‰©â€â€œåˆåŒéœ€åŒ…å«å½“äº‹äººä¿¡æ¯â€ï¼‰ï¼Œä½†å¯¹ â€œå„¿ç§‘å¸¸è§ç—…ç—‡ç”¨è¯â€ã€â€œçŸ¥è¯†äº§æƒåˆåŒçº çº·æ¡æ¬¾â€ ç­‰ç»†åˆ†é¢†åŸŸçŸ¥è¯†æŒæ¡è–„å¼±ã€‚</li>
<li>å…³é”®ï¼šé’ˆå¯¹æ€§è®­ç»ƒ<br/>
ç”¨è¯¥é¢†åŸŸçš„å°æ•°æ®é›†ï¼ˆé€šå¸¸å‡ åƒï½å‡ ä¸‡æ¡ï¼Œè¿œå°‘äºé¢„è®­ç»ƒæ•°æ®ï¼‰ï¼Œä»¥ â€œå°‘é‡è¿­ä»£æ›´æ–°æ¨¡å‹å‚æ•°â€ çš„æ–¹å¼ï¼Œè®©æ¨¡å‹é‡ç‚¹å­¦ä¹ ç»†åˆ†é¢†åŸŸçš„çŸ¥è¯†ã€è¯æœ¯å’Œè§„åˆ™ã€‚<br/>
ä¾‹å¦‚ç”¨ 1 ä¸‡æ¡ â€œåŒ»ç”Ÿä¸å„¿ç§‘æ‚£è€…å¯¹è¯â€ æ•°æ®å¾®è°ƒæ¨¡å‹ï¼Œä½¿å…¶èƒ½åƒå„¿ç§‘åŒ»ç”Ÿä¸€æ ·å›ç­”å®¶é•¿çš„é—®è¯Šé—®é¢˜ã€‚</li>
</ol>
<p>ç®€å•ç±»æ¯”ï¼š<strong>é¢„è®­ç»ƒæ¨¡å‹</strong>æ˜¯ <strong>é«˜ä¸­æ¯•ä¸šçš„é€šç”¨äººæ‰</strong>ï¼Œ<strong>å¾®è°ƒ</strong>ï¼ˆFine-tuningï¼‰ æ˜¯ <strong>é’ˆå¯¹åŒ»ç”Ÿ / å¾‹å¸ˆ / ç¨‹åºå‘˜å²—ä½çš„å²—å‰åŸ¹è®­</strong>ï¼Œæœ€ç»ˆè®©æ¨¡å‹æˆä¸º <strong>é¢†åŸŸä¸“æ‰</strong>ã€‚</p>
<h2 data-id="heading-1">å¾®è°ƒçš„ä¼˜ç‚¹ä¸ç¼ºç‚¹</h2>
<p>å¾®è°ƒçš„æ ¸å¿ƒä»·å€¼åœ¨äº <strong>è®©æ¨¡å‹æ·±åº¦é€‚é…åœºæ™¯</strong>ï¼Œä½†ä¹Ÿå—é™äºæ•°æ®ã€æˆæœ¬å’Œçµæ´»æ€§ï¼Œå…·ä½“ä¼˜åŠ£åŠ¿å¦‚ä¸‹ï¼š</p>






























<table><thead><tr><th>ç»´åº¦</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th></tr></thead><tbody><tr><td><strong>è¾“å‡ºç²¾å‡†åº¦</strong></td><td>èƒ½æ·±åº¦èåˆé¢†åŸŸçŸ¥è¯†ï¼Œè¾“å‡ºç»“æœçš„ä¸“ä¸šæ€§ã€å‡†ç¡®æ€§æ›´é«˜ï¼ˆå¦‚æ³•å¾‹å¾®è°ƒæ¨¡å‹èƒ½ç²¾å‡†å¼•ç”¨æ³•æ¡ï¼‰ã€‚</td><td>å¯¹è®­ç»ƒæ•°æ®è´¨é‡è¦æ±‚æé«˜ï¼šè‹¥æ•°æ®å­˜åœ¨é”™è¯¯ / åè§ï¼Œå¾®è°ƒåæ¨¡å‹ä¼š â€œå›ºåŒ–é”™è¯¯â€ï¼ˆå¦‚æ•°æ®å«è¯¯è¯Šæ¡ˆä¾‹ï¼Œæ¨¡å‹ä¼šé‡å¤è¯¯è¯Šï¼‰ã€‚</td></tr><tr><td><strong>å“åº”æ•ˆç‡</strong></td><td>å¾®è°ƒåçš„æ¨¡å‹å¯ â€œæœ¬åœ°åŒ–éƒ¨ç½²â€ï¼Œæ— éœ€å®æ—¶è°ƒç”¨å¤–éƒ¨æ•°æ®ï¼Œå“åº”é€Ÿåº¦å¿«ï¼ˆæ¯«ç§’çº§ï¼‰ã€‚</td><td>è®­ç»ƒæˆæœ¬é«˜ï¼šéœ€ä¸“ä¸šç®—æ³•å·¥ç¨‹å¸ˆæ“ä½œï¼Œä¸” GPU ç®—åŠ›æ¶ˆè€—å¤§ï¼ˆä¸€æ¬¡åŒ»ç–—æ¨¡å‹å¾®è°ƒå¯èƒ½éœ€æ•°ä¸‡å…ƒç®—åŠ›æˆæœ¬ï¼‰ã€‚</td></tr><tr><td><strong>åœºæ™¯é€‚é…æ€§</strong></td><td>èƒ½é€‚é… â€œæ— å…¬å¼€æ•°æ®å‚è€ƒâ€ çš„ç§æœ‰åœºæ™¯ï¼ˆå¦‚ä¼ä¸šå†…éƒ¨å®¢æˆ·æœåŠ¡è¯æœ¯ã€ä¸“å±äº§å“çŸ¥è¯†åº“ï¼‰ã€‚</td><td>çµæ´»æ€§å·®ï¼šè‹¥åœºæ™¯éœ€æ±‚å˜åŒ–ï¼ˆå¦‚åŒ»ç–—æŒ‡å—æ›´æ–°ã€æ³•å¾‹æ¡æ–‡ä¿®è®¢ï¼‰ï¼Œéœ€é‡æ–°å‡†å¤‡æ•°æ®å¹¶å†æ¬¡å¾®è°ƒï¼Œå‘¨æœŸé•¿ï¼ˆé€šå¸¸ 1~2 å‘¨ï¼‰ã€‚</td></tr><tr><td><strong>æ•°æ®ä¾èµ–åº¦</strong></td><td>ç›¸æ¯”é¢„è®­ç»ƒï¼Œä»…éœ€ â€œå°æ•°æ®é›†â€ å³å¯ç”Ÿæ•ˆï¼ˆé€‚åˆæ•°æ®ç¨€ç¼ºçš„ç»†åˆ†é¢†åŸŸï¼‰ã€‚</td><td>å­˜åœ¨ â€œç¾éš¾æ€§é—å¿˜â€ é£é™©ï¼šè¿‡åº¦å¾®è°ƒå¯èƒ½å¯¼è‡´æ¨¡å‹å¿˜è®°é¢„è®­ç»ƒçš„é€šç”¨çŸ¥è¯†ï¼ˆå¦‚ä»…å­¦æ³•å¾‹åï¼Œæ— æ³•å›ç­”åŸºç¡€å¸¸è¯†é—®é¢˜ï¼‰ã€‚</td></tr></tbody></table>
<blockquote>
<p>è¿™ä¸ªä¸–ç•Œä¸å­˜åœ¨å®Œç¾ï¼Œå°¤å…¶æ˜¯å·¥ç¨‹æŠ€æœ¯ï¼šï¼‰</p>
</blockquote>
<h2 data-id="heading-2">å¾®è°ƒä¸ RAG çš„å¯¹æ¯”ï¼šä¼˜åŠ¿ä¸åŠ£åŠ¿</h2>
<blockquote>
<p>å¦‚æœæ‚¨æƒ³äº†è§£ RAGï¼Œå¯å‚è§ï¼š<a href="https://link.juejin.cn?target=http%3A%2F%2Fwfcoding.com%2Farticles%2Fpractice%2F0318%2F" target="_blank" title="http://wfcoding.com/articles/practice/0318/" ref="nofollow noopener noreferrer">ç”¨langgraphå®ç°RAG(Retrieval Augmented Generation,æ£€ç´¢å¢å¼ºç”Ÿæˆ)</a></p>
</blockquote>
<p>åœ¨å®é™…åº”ç”¨ä¸­ï¼Œå¾®è°ƒå¸¸ä¸<strong>RAGï¼ˆæ£€ç´¢å¢å¼ºç”Ÿæˆï¼ŒRetrieval-Augmented Generationï¼‰</strong> ç›¸æ¯”ï¼Œä¸¤è€…éƒ½æ˜¯ â€œè®©æ¨¡å‹é€‚é…å…·ä½“åœºæ™¯â€ çš„æŠ€æœ¯ï¼Œä½†åº•å±‚é€»è¾‘å®Œå…¨ä¸åŒï¼š</p>
<ul>
<li><strong>å¾®è°ƒ</strong>ï¼šæŠŠé¢†åŸŸçŸ¥è¯† â€œçŒè¿›æ¨¡å‹å‚æ•°é‡Œâ€ï¼ˆè®©æ¨¡å‹ â€œè®°ä½â€ çŸ¥è¯†ï¼‰ï¼›</li>
<li><strong>RAG</strong>ï¼šè®©æ¨¡å‹åœ¨ç”Ÿæˆç­”æ¡ˆå‰ï¼Œå…ˆ â€œæ£€ç´¢å¤–éƒ¨æ•°æ®åº“â€ï¼ˆè®©æ¨¡å‹ â€œå‚è€ƒâ€ å®æ—¶ / ç§æœ‰çŸ¥è¯†ï¼‰ã€‚</li>
</ul>
<p>ä¸¤è€…çš„ä¼˜åŠ£åŠ¿å¯¹æ¯”å¯é€šè¿‡ä¸‹è¡¨æ¸…æ™°å‘ˆç°ï¼š</p>








































<table><thead><tr><th>å¯¹æ¯”ç»´åº¦</th><th>å¾®è°ƒï¼ˆFine-tuningï¼‰</th><th>RAGï¼ˆæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰</th></tr></thead><tbody><tr><td><strong>çŸ¥è¯†æ›´æ–°æˆæœ¬</strong></td><td>é«˜ï¼šçŸ¥è¯†å˜åŒ–ï¼ˆå¦‚æ³•è§„ä¿®è®¢ã€äº§å“è¿­ä»£ï¼‰éœ€é‡æ–°å‡†å¤‡æ•°æ®ã€é‡æ–°è®­ç»ƒï¼Œå‘¨æœŸé•¿ï¼ˆ1~2 å‘¨ï¼‰ã€‚</td><td>ä½ï¼šåªéœ€æ›´æ–°å¤–éƒ¨æ•°æ®åº“ï¼ˆå¦‚æ›¿æ¢ Excel è¡¨æ ¼ã€åŒæ­¥æ–‡æ¡£ï¼‰ï¼Œæ— éœ€ä¿®æ”¹æ¨¡å‹ï¼Œå³æ—¶ç”Ÿæ•ˆã€‚</td></tr><tr><td><strong>æ•°æ®è¦æ±‚</strong></td><td>é«˜ï¼šéœ€é«˜è´¨é‡ã€ç»“æ„åŒ–çš„æ ‡æ³¨æ•°æ®ï¼ˆå¦‚ â€œé—®é¢˜ + æ ‡å‡†ç­”æ¡ˆâ€ å¯¹ï¼‰ï¼Œæ— æ•°æ®åˆ™æ— æ³•å¯åŠ¨ã€‚</td><td>ä½ï¼šæ”¯æŒéç»“æ„åŒ–æ•°æ®ï¼ˆå¦‚ PDFã€Wordã€èŠå¤©è®°å½•ï¼‰ï¼Œæ— éœ€æ ‡æ³¨ï¼Œâ€œæ‰”è¿›å»å°±èƒ½ç”¨â€ï¼Œæ•°æ®é—¨æ§›ä½ã€‚</td></tr><tr><td><strong>å“åº”é€Ÿåº¦</strong></td><td>å¿«ï¼šçŸ¥è¯†å­˜åœ¨æ¨¡å‹å†…éƒ¨ï¼Œç”Ÿæˆç­”æ¡ˆæ—¶æ— éœ€å¤–éƒ¨è°ƒç”¨ï¼Œå“åº”æ—¶é—´çŸ­ï¼ˆæ¯«ç§’çº§ï¼‰ã€‚</td><td>æ…¢ï¼šéœ€å…ˆæ£€ç´¢å¤–éƒ¨æ•°æ®åº“ï¼ˆä¾èµ–æ•°æ®åº“æ€§èƒ½ï¼‰ï¼Œå“åº”æ—¶é—´é•¿ï¼ˆç™¾æ¯«ç§’ï½ç§’çº§ï¼‰ã€‚</td></tr><tr><td><strong>ç§æœ‰æ€§ä¸å®‰å…¨</strong></td><td>é«˜ï¼šå¯æœ¬åœ°åŒ–éƒ¨ç½²ï¼Œæ•°æ®ä¸å¯¹å¤–ä¼ è¾“ï¼Œé€‚åˆæ¶‰å¯†åœºæ™¯ï¼ˆå¦‚å†›å·¥ã€é‡‘èæ ¸å¿ƒæ•°æ®ï¼‰ã€‚</td><td>ä¸­ï¼šè‹¥ç”¨ç¬¬ä¸‰æ–¹æ•°æ®åº“ï¼ˆå¦‚äº‘ç«¯å‘é‡åº“ï¼‰ï¼Œå­˜åœ¨æ•°æ®ä¼ è¾“é£é™©ï¼›æœ¬åœ°åŒ–éƒ¨ç½²å¯æå‡å®‰å…¨æ€§ã€‚</td></tr><tr><td><strong>é€‚ç”¨åœºæ™¯</strong></td><td>1. çŸ¥è¯†ç¨³å®šã€é•¿æœŸä¸å˜çš„é¢†åŸŸï¼ˆå¦‚æ•°å­¦å…¬å¼ã€ç»å…¸åŒ»å­¦ç†è®ºï¼‰ï¼›2. éœ€æè‡´å“åº”é€Ÿåº¦çš„åœºæ™¯ï¼ˆå¦‚å®æ—¶å®¢æœã€å·¥ä¸šæ§åˆ¶ï¼‰ï¼›3. æ¶‰å¯† / ç§æœ‰æ€§è¦æ±‚é«˜çš„åœºæ™¯ã€‚</td><td>1. çŸ¥è¯†é«˜é¢‘æ›´æ–°çš„é¢†åŸŸï¼ˆå¦‚æ–°é—»ã€ç”µå•†å•†å“ã€æ”¿ç­–æ³•è§„ï¼‰ï¼›2. æ•°æ®éç»“æ„åŒ–ã€æ ‡æ³¨å›°éš¾çš„åœºæ™¯ï¼ˆå¦‚ä¼ä¸šå†å²æ–‡æ¡£ã€ç”¨æˆ·èŠå¤©è®°å½•ï¼‰ï¼›3. éœ€ â€œæº¯æºå¼•ç”¨â€ çš„åœºæ™¯ï¼ˆå¦‚å­¦æœ¯å†™ä½œã€æ³•å¾‹è®ºè¯ï¼Œéœ€æ ‡æ³¨ç­”æ¡ˆæ¥æºï¼‰ã€‚</td></tr><tr><td><strong>æˆæœ¬ï¼ˆé•¿æœŸï¼‰</strong></td><td>é«˜ï¼šé™¤é¦–æ¬¡è®­ç»ƒæˆæœ¬ï¼Œåç»­çŸ¥è¯†æ›´æ–°éœ€æŒç»­æŠ•å…¥ç®—åŠ›å’ŒäººåŠ›ã€‚</td><td>ä½ï¼šä¸»è¦æˆæœ¬æ˜¯æ•°æ®åº“å­˜å‚¨ä¸ç»´æŠ¤ï¼Œæ— é‡å¤è®­ç»ƒæˆæœ¬ï¼Œé•¿æœŸæ›´ç»æµã€‚</td></tr></tbody></table>
<blockquote>
<p>åœ¨<code>RAG</code>åœºæ™¯ä¸­ï¼Œä¸€èˆ¬çš„åˆ†ä¸ºä¸¤æ­¥ï¼š</p>
<ol>
<li>å°†ç”¨æˆ·çš„é—®é¢˜çŸ¢é‡åŒ–å¹¶é€šè¿‡çŸ¥è¯†åº“è¿›è¡Œè¯­ä¹‰æ£€ç´¢ï¼Œæ‰¾å‡ºæœ€è´´è¿‘çš„ç­”æ¡ˆï¼›</li>
<li>ä½¿ç”¨å¤§æ¨¡å‹ç»“åˆçŸ¥è¯†åº“çš„ç­”æ¡ˆï¼Œæ¨ç†å‡ºæµç•…çš„è‡ªç„¶è¯­è¨€ç»™å‡ºç­”æ¡ˆã€‚</li>
</ol>
<p>å¦‚æœæ•°æ®é‡ä¸å¤ªå¤§ï¼Œè¯­ä¹‰æ£€ç´¢åœ¨æ€§èƒ½å¥½ä¸€ç‚¹çš„CPUä¸‹è¿è¡Œé€Ÿåº¦ä¹Ÿä¼šå¾ˆå¿«ï¼Œæ‰€ä»¥æ€§èƒ½çš„ç“¶é¢ˆé€šå¸¸åœ¨äºå¤§æ¨¡å‹çš„æ¨ç†ã€‚</p>
</blockquote>
<h2 data-id="heading-3">æ€»ç»“ï¼šå¦‚ä½•é€‰æ‹©å¾®è°ƒä¸ RAGï¼Ÿ</h2>
<p>ä¸¤è€…å¹¶é â€œéæ­¤å³å½¼â€ï¼Œå®é™…åº”ç”¨ä¸­å¸¸ç»“åˆä½¿ç”¨ï¼ˆå¦‚ â€œå¾®è°ƒ + RAGâ€ æ··åˆæ–¹æ¡ˆï¼‰ï¼Œæ ¸å¿ƒé€‰æ‹©é€»è¾‘å¦‚ä¸‹ï¼š</p>
<ul>
<li>è‹¥ä½ çš„åœºæ™¯<strong>çŸ¥è¯†ç¨³å®šã€æ•°æ®è´¨é‡é«˜ã€éœ€æè‡´é€Ÿåº¦æˆ–å¼ºéšç§</strong>ï¼ˆå¦‚åŒ»ç–—è®¾å¤‡å®æ—¶è¯Šæ–­ã€å†›å·¥æ–‡æ¡£åˆ†æï¼‰ï¼Œä¼˜å…ˆé€‰<strong>å¾®è°ƒï¼ˆFine-tuningï¼‰</strong>ï¼›</li>
<li>è‹¥ä½ çš„åœºæ™¯<strong>çŸ¥è¯†é«˜é¢‘æ›´æ–°ã€æ•°æ®é›¶æ•£æ— æ ‡æ³¨ã€éœ€ä½æˆæœ¬å¿«é€Ÿè½åœ°</strong>ï¼ˆå¦‚ç”µå•†å•†å“é—®ç­”ã€ä¼ä¸šå‘¨æŠ¥ç”Ÿæˆï¼‰ï¼Œä¼˜å…ˆé€‰ <strong>RAG(Retrieval Augmented Generation,æ£€ç´¢å¢å¼ºç”Ÿæˆ)</strong>ï¼›</li>
<li>è‹¥éœ€ â€œå…¼é¡¾ä¸“ä¸šåº¦ä¸çµæ´»æ€§â€ï¼ˆå¦‚æ³•å¾‹æ™ºèƒ½åŠ©æ‰‹ï¼šæ—¢éœ€ç²¾å‡†æ³•æ¡å¼•ç”¨ï¼Œåˆéœ€å®æ—¶æ›´æ–°æ–°è§„ï¼‰ï¼Œå¯é‡‡ç”¨ â€œå…ˆç”¨å¾®è°ƒè®©æ¨¡å‹æŒæ¡æ³•å¾‹é€šç”¨é€»è¾‘ï¼Œå†ç”¨ RAG æ£€ç´¢æœ€æ–°æ³•æ¡â€ çš„æ··åˆæ–¹æ¡ˆã€‚</li>
</ul>
<blockquote>
<p>å¦‚æœå¯¹æˆæœ¬æ¯”è¾ƒæ•æ„Ÿï¼Œé€šè¿‡é€‰æ‹© <strong>å‚æ•°å°çš„å¤§æ¨¡å‹ + çŸ¥è¯†åº“</strong> çš„ <strong>RAG</strong> æ˜¯æœ€ä¼˜æ–¹æ¡ˆã€‚</p>
</blockquote>
<hr/>
<p>ğŸªæ„Ÿè°¢è§‚çœ‹ï¼Œç¥å¥½è¿ğŸª</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[RocketMQ ä¸ºä»€ä¹ˆè¯»å¾—è¿™ä¹ˆå¿«ï¼Ÿæ­ç§˜ ConsumeQueue çš„å¼‚æ­¥ç´¢å¼•è®¾è®¡]]></title>    <link>https://juejin.cn/post/7590403249560797199</link>    <guid>https://juejin.cn/post/7590403249560797199</guid>    <pubDate>2026-01-03T10:15:04.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7590403249560797199" data-draft-id="7590213554798723107" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="RocketMQ ä¸ºä»€ä¹ˆè¯»å¾—è¿™ä¹ˆå¿«ï¼Ÿæ­ç§˜ ConsumeQueue çš„å¼‚æ­¥ç´¢å¼•è®¾è®¡"/> <meta itemprop="keywords" content="åç«¯,RocketMQ,é¢è¯•"/> <meta itemprop="datePublished" content="2026-01-03T10:15:04.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è¸æµªæ— ç—•"/> <meta itemprop="url" content="https://juejin.cn/user/2834988091055719"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            RocketMQ ä¸ºä»€ä¹ˆè¯»å¾—è¿™ä¹ˆå¿«ï¼Ÿæ­ç§˜ ConsumeQueue çš„å¼‚æ­¥ç´¢å¼•è®¾è®¡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2834988091055719/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è¸æµªæ— ç—•
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-03T10:15:04.000Z" title="Sat Jan 03 2026 10:15:04 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€ï¼šå†™å¾—å¿«ä¸å¤Ÿï¼Œè¿˜è¦è¯»å¾—å¿«</h2>
<p><a href="https://juejin.cn/post/7589962224795713574" target="_blank" title="https://juejin.cn/post/7589962224795713574">ä¸Šä¸€ç¯‡</a>æˆ‘ä»¬è§£å†³äº†å†™å…¥é—®é¢˜ï¼šCommitLogé¡ºåºå†™ï¼Œè®©RocketMQå†™å…¥TPSè¾¾åˆ°åä¸‡çº§åˆ«ã€‚</p>
<p>ä½†å†™å¾—å¿«åªæ˜¯ç¬¬ä¸€æ­¥ã€‚<strong>æ¶ˆè´¹è€…æ€ä¹ˆå¿«é€Ÿè¯»å–æ¶ˆæ¯ï¼Ÿ</strong></p>
<p>è®¾æƒ³ä¸€ä¸ªåœºæ™¯ï¼š</p>
<ul>
<li>CommitLogæœ‰100GBæ•°æ®ï¼ŒåŒ…å«1000ä¸ªTopic</li>
<li>Consumeråªå…³å¿ƒå…¶ä¸­ä¸€ä¸ªTopicï¼ˆ1GBæ•°æ®ï¼‰</li>
<li>ä»å¤´æ‰«æï¼Ÿè¯»å–100GBï¼Œä¸¢å¼ƒ99GBï¼Ÿ</li>
</ul>
<p>å®æµ‹æ•°æ®ï¼šæ‰«æ100MBçš„CommitLogæ‰¾2ä¸‡æ¡æ¶ˆæ¯ï¼Œè€—æ—¶102msã€‚å¦‚æœæ˜¯100GBï¼Ÿé‚£å°±æ˜¯10ä¸‡msï¼Œå³100ç§’ã€‚</p>
<p>å®Œå…¨ä¸å¯è¡Œã€‚</p>
<p><strong>RocketMQçš„ç­”æ¡ˆï¼šConsumeQueueå¼‚æ­¥ç´¢å¼•ã€‚</strong></p>
<ul>
<li>20å­—èŠ‚å®šé•¿ç»“æ„</li>
<li>æŸ¥è¯¢é€Ÿåº¦æå‡34å€ï¼ˆ102ms â†’ 3msï¼‰</li>
<li>æ•°æ®é‡å‡å°‘272å€ï¼ˆ100MB â†’ 0.37MBï¼‰</li>
</ul>
<p>ä»Šå¤©æ‹†è§£ä¸‰ä¸ªæ ¸å¿ƒé—®é¢˜ï¼š</p>
<ol>
<li><strong>ConsumeQueueæ˜¯ä»€ä¹ˆï¼Ÿ</strong> - 20å­—èŠ‚ç´¢å¼•å¦‚ä½•è®¾è®¡</li>
<li><strong>ä¸ºä»€ä¹ˆå¼‚æ­¥æ„å»ºï¼Ÿ</strong> - å†™å…¥æ€§èƒ½å¦‚ä½•ä¿æŒ</li>
<li><strong>æ€ä¹ˆé…åˆå·¥ä½œï¼Ÿ</strong> - è¯»å†™å¦‚ä½•åˆ†ç¦»</li>
</ol>
<h2 data-id="heading-1">ä¸€ã€ConsumeQueueæ˜¯ä»€ä¹ˆï¼Ÿ</h2>
<h3 data-id="heading-2">1.1 æ ¸å¿ƒè®¾è®¡</h3>
<p>ConsumeQueueæ˜¯CommitLogçš„ç´¢å¼•ï¼Œé‡‡ç”¨<strong>å®šé•¿ã€å¼‚æ­¥æ„å»º</strong>çš„è®¾è®¡ã€‚</p>
<p>æ¯ä¸ªTopicçš„æ¯ä¸ªQueueéƒ½æœ‰ä¸€ä¸ªç‹¬ç«‹çš„ConsumeQueueæ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-variable">$ROCKETMQ_HOME</span>/store/consumequeue/
â”œâ”€â”€ TopicA/
â”‚   â”œâ”€â”€ 0/                    â† Queue-0çš„ç´¢å¼•
â”‚   â”‚   â””â”€â”€ 00000000000000000000
â”‚   â”œâ”€â”€ 1/                    â† Queue-1çš„ç´¢å¼•
â”‚   â”‚   â””â”€â”€ 00000000000000000000
â””â”€â”€ TopicB/
    â”œâ”€â”€ 0/
    â”‚   â””â”€â”€ 00000000000000000000
</code></pre>
<h3 data-id="heading-3">1.2 ç´¢å¼•æ¡ç›®ç»“æ„</h3>
<p>æ¯ä¸ªç´¢å¼•æ¡ç›®å›ºå®š20å­—èŠ‚ï¼ŒåŒ…å«3ä¸ªå­—æ®µï¼š</p>
<pre><code class="hljs language-scss" lang="scss">+-------------------+-------------------+-------------------+
|   CommitLogåç§»é‡  |     æ¶ˆæ¯å¤§å°       |      TagsCode     |
|      (<span class="hljs-number">8</span>å­—èŠ‚)       |     (<span class="hljs-number">4</span>å­—èŠ‚)       |      (<span class="hljs-number">8</span>å­—èŠ‚)      |
+-------------------+-------------------+-------------------+
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆæ˜¯20å­—èŠ‚ï¼Ÿ</strong></p>
<p>å®šé•¿è®¾è®¡çš„å¥½å¤„ï¼š</p>
<ol>
<li><strong>å¿«é€Ÿå®šä½</strong> - ç¬¬Næ¡ç´¢å¼•ä½ç½® = N Ã— 20ï¼ŒO(1)å¤æ‚åº¦</li>
<li><strong>ç©ºé—´é«˜æ•ˆ</strong> - 1KBæ¶ˆæ¯ â†’ 20å­—èŠ‚ç´¢å¼•ï¼Œå‹ç¼©æ¯”51:1</li>
<li><strong>æ‰¹é‡è¯»å–</strong> - è¿ç»­å­˜å‚¨ï¼ŒPageCacheå‹å¥½</li>
</ol>
<h3 data-id="heading-4">1.3 è¯»å†™åˆ†ç¦»çš„è®¾è®¡</h3>
<p>ConsumeQueueå’ŒCommitLogåˆ†å·¥æ˜ç¡®ï¼š</p>
<p><strong>CommitLogï¼šç‰©ç†å­˜å‚¨å±‚</strong></p>
<ul>
<li>æ‰€æœ‰æ¶ˆæ¯é¡ºåºå†™å…¥</li>
<li>ä¸å…³å¿ƒTopicå’ŒQueue</li>
<li>åªç®¡è¿½åŠ ï¼Œå†™å…¥æå¿«</li>
</ul>
<p><strong>ConsumeQueueï¼šé€»è¾‘ç´¢å¼•å±‚</strong></p>
<ul>
<li>æŒ‰Topic/Queueç»„ç»‡</li>
<li>åªå­˜20å­—èŠ‚ç´¢å¼•</li>
<li>å¿«é€Ÿå®šä½æ¶ˆæ¯</li>
</ul>
<p><strong>åä½œæ–¹å¼ï¼šå†™å…¥å¿«é€Ÿï¼Œè¯»å–ç²¾å‡†</strong></p>
<h2 data-id="heading-5">äºŒã€ä¸ºä»€ä¹ˆä¸ç›´æ¥æ‰«æCommitLogï¼Ÿ</h2>
<h3 data-id="heading-6">2.1 æ€§èƒ½å¯¹æ¯”æµ‹è¯•</h3>
<p>æˆ‘å†™äº†ä¸€ä¸ªç®€åŒ–ç‰ˆçš„å®ç°ï¼Œå¯¹æ¯”ä¸¤ç§æŸ¥è¯¢æ–¹å¼ï¼š</p>
<p><strong>æµ‹è¯•åœºæ™¯ï¼š</strong></p>
<ul>
<li>æ¶ˆæ¯æ€»æ•°ï¼š10ä¸‡æ¡ï¼Œæ¯æ¡1KB</li>
<li>Topicæ•°é‡ï¼š5ä¸ªï¼ˆæ¶ˆæ¯éšæœºåˆ†å¸ƒï¼‰</li>
<li>æŸ¥è¯¢ç›®æ ‡ï¼šæ‰¾å‡ºTopic-2çš„æ‰€æœ‰æ¶ˆæ¯ï¼ˆçº¦2ä¸‡æ¡ï¼‰</li>
</ul>
<p><strong>æ–¹å¼Aï¼šç›´æ¥æ‰«æCommitLog</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä»å¤´åˆ°å°¾æ‰«æï¼Œé€æ¡è§£æ</span>
<span class="hljs-keyword">for</span> (Message msg : commitLog.scanAll()) {
    <span class="hljs-keyword">if</span> (msg.getTopic().equals(<span class="hljs-string">"Topic-2"</span>)) {
        results.add(msg);
    }
}
</code></pre>
<p><strong>æ–¹å¼Bï¼šé€šè¿‡ConsumeQueueç´¢å¼•</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// è¯»å–ç´¢å¼•ï¼Œç›´æ¥å®šä½</span>
<span class="hljs-type">ConsumeQueue</span> <span class="hljs-variable">queue</span> <span class="hljs-operator">=</span> getQueue(<span class="hljs-string">"Topic-2"</span>, <span class="hljs-number">0</span>);
<span class="hljs-keyword">for</span> (IndexEntry entry : queue.getAll()) {
    <span class="hljs-type">Message</span> <span class="hljs-variable">msg</span> <span class="hljs-operator">=</span> commitLog.read(entry.offset, entry.size);
    results.add(msg);
}
</code></pre>
<h3 data-id="heading-7">2.2 æµ‹è¯•ç»“æœ</h3>





























<table><thead><tr><th>æŒ‡æ ‡</th><th>ç›´æ¥æ‰«æ</th><th>ç´¢å¼•æŸ¥è¯¢</th><th>å·®è·</th></tr></thead><tbody><tr><td>æŸ¥è¯¢è€—æ—¶</td><td>102 ms</td><td>3 ms</td><td><strong>34å€</strong></td></tr><tr><td>æ‰«ææ•°æ®é‡</td><td>100.00 MB</td><td>0.37 MB</td><td><strong>272å€</strong></td></tr><tr><td>æ‰¾åˆ°æ¶ˆæ¯æ•°</td><td>19,384æ¡</td><td>19,384æ¡</td><td>ç›¸åŒ</td></tr></tbody></table>
<p><strong>ä¸ºä»€ä¹ˆå·®è·è¿™ä¹ˆå¤§ï¼Ÿ</strong></p>
<ul>
<li><strong>æ•°æ®é‡å·®å¼‚</strong>ï¼š100MB vs 0.37MBï¼Œå‡å°‘272å€IO</li>
<li><strong>è§£æå¼€é”€</strong>ï¼šå…¨éƒ¨9.6ä¸‡æ¡ vs ç›®æ ‡1.9ä¸‡æ¡ï¼Œå‡å°‘5å€è§£æ</li>
<li><strong>ç¼“å­˜å‘½ä¸­</strong>ï¼šç´¢å¼•å°å…¨åœ¨å†…å­˜ï¼ŒCommitLogå¤ªå¤§å‘½ä¸­ç‡ä½</li>
</ul>
<h3 data-id="heading-8">2.3 ä¸åŒæ¶ˆæ¯æ•°é‡ä¸‹çš„æ€§èƒ½</h3>



































<table><thead><tr><th>æ¶ˆæ¯æ€»æ•°</th><th>ç›´æ¥æ‰«æ</th><th>ç´¢å¼•æŸ¥è¯¢</th><th>æ€§èƒ½æå‡</th></tr></thead><tbody><tr><td>1ä¸‡</td><td>14 ms</td><td>1 ms</td><td>14å€</td></tr><tr><td>5ä¸‡</td><td>55 ms</td><td>2 ms</td><td>27.5å€</td></tr><tr><td>10ä¸‡</td><td>76 ms</td><td>1 ms</td><td>76å€</td></tr><tr><td>20ä¸‡</td><td>59 ms</td><td>1 ms</td><td>59å€</td></tr></tbody></table>
<p><strong>è¶‹åŠ¿åˆ†æï¼š</strong></p>
<ul>
<li>ç›´æ¥æ‰«æï¼šè€—æ—¶éšæ¶ˆæ¯æ•°é‡çº¿æ€§å¢é•¿</li>
<li>ç´¢å¼•æŸ¥è¯¢ï¼šè€—æ—¶åŸºæœ¬æ’å®šï¼ˆ1-2msï¼‰</li>
<li>æ¶ˆæ¯è¶Šå¤šï¼Œç´¢å¼•ä¼˜åŠ¿è¶Šæ˜æ˜¾</li>
</ul>
<p><strong>å…³äº20ä¸‡æ¡æ•°æ®çš„è¯´æ˜ï¼š</strong>
ç»†å¿ƒçš„è¯»è€…ä¼šå‘ç°ï¼Œ20ä¸‡æ¡æ¶ˆæ¯çš„æ‰«æè€—æ—¶ï¼ˆ59msï¼‰åè€Œæ¯”10ä¸‡æ¡ï¼ˆ76msï¼‰å°‘ã€‚è¿™ä¸ç¬¦åˆçº¿æ€§å¢é•¿çš„é¢„æœŸã€‚</p>
<p>åŸå› æ˜¯<strong>PageCacheæ•ˆåº”</strong>ï¼š</p>
<ul>
<li>æµ‹è¯•æŒ‰1ä¸‡â†’5ä¸‡â†’10ä¸‡â†’20ä¸‡é¡ºåºæ‰§è¡Œ</li>
<li>å‰é¢çš„æµ‹è¯•è®©å¤§é‡æ•°æ®è¿›å…¥PageCache</li>
<li>20ä¸‡æµ‹è¯•æ—¶ï¼Œå¾ˆå¤šæ•°æ®å·²åœ¨å†…å­˜ä¸­</li>
<li>ç£ç›˜IOå¤§å¹…å‡å°‘ï¼Œè€—æ—¶åè€Œé™ä½</li>
</ul>
<p>è¿™ä¸ªç°è±¡æ°å¥½è¯´æ˜ï¼š</p>
<ol>
<li>PageCacheå¯¹é¡ºåºè¯»å–çš„ä¼˜åŒ–å¾ˆå¼º</li>
<li>çœŸå®ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œå†·å¯åŠ¨æ—¶æ€§èƒ½ä¼šæ›´å·®</li>
<li>ç´¢å¼•æŸ¥è¯¢å› ä¸ºæ•°æ®é‡å°ï¼Œä¸å—PageCacheæ³¢åŠ¨å½±å“</li>
</ol>
<p><strong>ç»“è®ºï¼šç›´æ¥æ‰«æCommitLogæ˜¯ä¸å¯è¡Œçš„ã€‚ç”Ÿäº§ç¯å¢ƒç™¾ä¸‡ã€åƒä¸‡çº§æ¶ˆæ¯ï¼Œæ‰«æè€—æ—¶ä¼šè¾¾åˆ°ç§’çº§ç”šè‡³åˆ†é’Ÿçº§ï¼Œå®Œå…¨æ— æ³•æ¥å—ã€‚</strong></p>
<p><strong>ä¸¤ç§æŸ¥è¯¢æ–¹å¼å¯¹æ¯”ï¼š</strong></p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[ConsumeræŸ¥è¯¢Topic-2æ¶ˆæ¯] --&gt; B{é€‰æ‹©æ–¹å¼}
    B --&gt;|æ–¹å¼A| C[æ‰«æ100MB CommitLog]
    B --&gt;|æ–¹å¼B| D[è¯»å–0.37MBç´¢å¼•]
    C --&gt; E[è§£æ96,465æ¡æ¶ˆæ¯]
    D --&gt; F[è§£æ19,384æ¡æ¶ˆæ¯]
    E --&gt; G[è€—æ—¶102ms]
    F --&gt; H[è€—æ—¶3ms]
    
    style C fill:#ffe1e1
    style D fill:#e8f5e9
    style G fill:#ffe1e1
    style H fill:#e8f5e9
</code></pre>
<h2 data-id="heading-9">ä¸‰ã€å¼‚æ­¥æ„å»ºæœºåˆ¶</h2>
<h3 data-id="heading-10">3.1 ä¸ºä»€ä¹ˆè¦å¼‚æ­¥ï¼Ÿ</h3>
<p>åŒæ­¥æ„å»ºä¼šæ‹–ç´¯å†™å…¥æ€§èƒ½ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// åŒæ­¥æ„å»ºï¼ˆæ€§èƒ½å·®ï¼‰</span>
commitLog.append(msg);
consumeQueue.buildIndex(msg);  <span class="hljs-comment">// â† é˜»å¡ç­‰å¾…</span>
<span class="hljs-keyword">return</span> success;

<span class="hljs-comment">// å¼‚æ­¥æ„å»ºï¼ˆé«˜æ€§èƒ½ï¼‰</span>
commitLog.append(msg);
<span class="hljs-keyword">return</span> success;  <span class="hljs-comment">// â† ç«‹å³è¿”å›ï¼Œåå°çº¿ç¨‹å¼‚æ­¥æ„å»º</span>
</code></pre>
<p><strong>é—®é¢˜ï¼š</strong></p>
<ul>
<li>åŒæ­¥æ„å»ºéœ€è¦ç­‰å¾…ç´¢å¼•å®Œæˆ</li>
<li>ç´¢å¼•æ–‡ä»¶åˆ†æ•£ï¼Œå†™å…¥å˜éšæœºIO</li>
<li>1000ä¸ªTopic = 1000ä¸ªç´¢å¼•æ–‡ä»¶åŒæ—¶å†™ï¼Œæ€§èƒ½å´©æºƒ</li>
</ul>
<p><strong>å¼‚æ­¥ä¼˜åŠ¿ï¼š</strong></p>
<ul>
<li>å†™å…¥ç«‹å³è¿”å›ï¼Œä¸ç­‰ç´¢å¼•</li>
<li>åå°çº¿ç¨‹ç»Ÿä¸€å¤„ç†ï¼Œæ‰¹é‡é«˜æ•ˆ</li>
<li>å†™å…¥æ€§èƒ½100%ä¿ç•™</li>
</ul>
<h3 data-id="heading-11">3.2 ReputMessageServiceå®ç°</h3>
<p>RocketMQä½¿ç”¨ReputMessageServiceçº¿ç¨‹å¼‚æ­¥åˆ†å‘æ¶ˆæ¯åˆ°ConsumeQueueã€‚</p>
<p><strong>å¼‚æ­¥æ„å»ºæµç¨‹ï¼š</strong></p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[Producerå†™å…¥] --&gt; B[CommitLog]
    B -.-&gt;|ç«‹å³è¿”å›| A
    C[ReputServiceåå°çº¿ç¨‹] -.-&gt;|è½®è¯¢| B
    C --&gt; D[è¯»å–æ–°æ¶ˆæ¯]
    D --&gt; E[è§£ææ¶ˆæ¯]
    E --&gt; F[å†™å…¥ConsumeQueue]
    
    style B fill:#e1f5ff
    style C fill:#fff4e1
    style F fill:#ffe1e1
</code></pre>
<p><strong>æ ¸å¿ƒé€»è¾‘ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ReputMessageService</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Thread</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> <span class="hljs-variable">reputFromOffset</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;  <span class="hljs-comment">// å·²å¤„ç†ä½ç½®</span>
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">while</span> (running) {
            <span class="hljs-type">long</span> <span class="hljs-variable">maxOffset</span> <span class="hljs-operator">=</span> commitLog.getMaxOffset();
            
            <span class="hljs-keyword">if</span> (reputFromOffset &lt; maxOffset) {
                <span class="hljs-comment">// è§£ææ¶ˆæ¯å¹¶åˆ†å‘åˆ°ConsumeQueue</span>
                <span class="hljs-type">DispatchRequest</span> <span class="hljs-variable">request</span> <span class="hljs-operator">=</span> parseMessage(reputFromOffset);
                doDispatch(request);
                reputFromOffset += request.getMsgSize();
            } <span class="hljs-keyword">else</span> {
                Thread.sleep(<span class="hljs-number">1</span>);  <span class="hljs-comment">// æ— æ–°æ¶ˆæ¯ï¼Œä¼‘çœ 1ms</span>
            }
        }
    }
}
</code></pre>
<p><strong>å…³é”®å‚æ•°ï¼š</strong></p>
<ul>
<li>è½®è¯¢é—´éš”ï¼š1ms</li>
<li>æ¯æ¬¡å¤„ç†ï¼š1æ¡æ¶ˆæ¯</li>
<li>å»¶è¿Ÿçª—å£ï¼š&lt;10ms</li>
</ul>
<h3 data-id="heading-12">3.3 å»¶è¿Ÿçª—å£éªŒè¯</h3>
<p>å†™å…¥1000æ¡æ¶ˆæ¯çš„è¿‡ç¨‹ä¸­ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-string">å†™å…¥æœŸé—´ï¼ˆä¿æŒ20-50æ¡å»¶è¿Ÿï¼‰ï¼š</span>
  <span class="hljs-attr">CommitLog:</span>    <span class="hljs-number">200</span><span class="hljs-string">æ¡</span> <span class="hljs-string">â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ</span>
  <span class="hljs-attr">ConsumeQueue:</span> <span class="hljs-number">180</span><span class="hljs-string">æ¡</span> <span class="hljs-string">â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ</span>
  <span class="hljs-string">å»¶è¿Ÿ:</span> <span class="hljs-number">20</span><span class="hljs-string">æ¡</span> <span class="hljs-string">(~20ms)</span>

<span class="hljs-string">å†™å…¥åœæ­¢å10msï¼ˆå®Œå…¨è¿½ä¸Šï¼‰ï¼š</span>
  <span class="hljs-attr">CommitLog:</span>    <span class="hljs-number">1000</span><span class="hljs-string">æ¡</span> <span class="hljs-string">â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ</span>
  <span class="hljs-attr">ConsumeQueue:</span> <span class="hljs-number">1000</span><span class="hljs-string">æ¡</span> <span class="hljs-string">â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ</span>
  <span class="hljs-string">å»¶è¿Ÿ:</span> <span class="hljs-number">0</span><span class="hljs-string">æ¡</span>
</code></pre>
<p><strong>å»¶è¿Ÿç‰¹ç‚¹ï¼š</strong></p>
<ul>
<li>å†™å…¥æœŸé—´ä¿æŒå°å¹…å»¶è¿Ÿï¼ˆ20-50æ¡æ¶ˆæ¯ï¼‰</li>
<li>åœæ­¢å†™å…¥å10mså†…å®Œå…¨è¿½ä¸Š</li>
<li>å¯¹æ¶ˆè´¹è€…å½±å“å¯å¿½ç•¥ï¼ˆæ¶ˆè´¹è€…æœ¬èº«å¼‚æ­¥ï¼‰</li>
</ul>
<h2 data-id="heading-13">å››ã€è®¾è®¡æƒè¡¡</h2>
<h3 data-id="heading-14">4.1 ä¸‰ç§æ–¹æ¡ˆå¯¹æ¯”</h3>





































<table><thead><tr><th>æ–¹æ¡ˆ</th><th>å†™å…¥æ€§èƒ½</th><th>è¯»å–æ€§èƒ½</th><th>å¤æ‚åº¦</th><th>ä¸€è‡´æ€§</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>ç›´æ¥æ‰«æCommitLog</td><td>é«˜</td><td>æä½</td><td>ç®€å•</td><td>å¼ºä¸€è‡´</td><td>ä¸é€‚ç”¨</td></tr><tr><td>åŒæ­¥æ„å»ºConsumeQueue</td><td>ä½</td><td>é«˜</td><td>ä¸­ç­‰</td><td>å¼ºä¸€è‡´</td><td>å°è§„æ¨¡</td></tr><tr><td>å¼‚æ­¥æ„å»ºConsumeQueue</td><td>é«˜</td><td>é«˜</td><td>è¾ƒé«˜</td><td>æœ€ç»ˆä¸€è‡´</td><td>å¤§è§„æ¨¡ç”Ÿäº§</td></tr></tbody></table>
<p><strong>ä¸ºä»€ä¹ˆé€‰æ‹©å¼‚æ­¥æ„å»ºï¼Ÿ</strong></p>
<p>æ ¸å¿ƒæƒè¡¡ï¼š</p>
<ul>
<li>å†™å…¥æ€§èƒ½100%ä¿ç•™ï¼ˆä¸ç­‰ç´¢å¼•ï¼‰</li>
<li>æŸ¥è¯¢æ€§èƒ½34å€æå‡ï¼ˆé€šè¿‡ç´¢å¼•ï¼‰</li>
<li>å»¶è¿Ÿ&lt;10mså¯æ¥å—ï¼ˆæ¶ˆè´¹è€…æœ¬èº«å¼‚æ­¥ï¼‰</li>
</ul>
<p><strong>ä¸€è‡´æ€§é—®é¢˜ï¼š</strong></p>
<p>Consumerä¸ä¼šè¯»åˆ°ä¸ä¸€è‡´æ•°æ®ï¼Œå› ä¸ºï¼š</p>
<ol>
<li>Consumerå®šæœŸæ‹‰å–ï¼ˆé»˜è®¤æ¯ç§’1æ¬¡ï¼‰ï¼Œæ„ŸçŸ¥ä¸åˆ°10mså»¶è¿Ÿ</li>
<li>Offsetç®¡ç†ä¿è¯ä¸æ¼æ¶ˆæ¯ï¼Œåªæ˜¯æ–°æ¶ˆæ¯æ™šå‡ æ¯«ç§’å¯è§</li>
<li>Brokeré‡å¯åReputServiceä»æ–­ç‚¹ç»§ç»­æ„å»º</li>
</ol>
<p>æœ€åæƒ…å†µï¼šå®•æœºç¬é—´ä¸¢å¤±&lt;1msçš„ç´¢å¼•ï¼Œé‡å¯åé‡å»ºï¼Œå¯¹æ¶ˆè´¹è€…é€æ˜ã€‚</p>
<h2 data-id="heading-15">äº”ã€CommitLogä¸ConsumeQueueçš„åä½œ</h2>
<h3 data-id="heading-16">5.1 å®Œæ•´çš„æ¶ˆæ¯æµè½¬</h3>
<p><strong>å†™å…¥è·¯å¾„ï¼ˆProducer â†’ Brokerï¼‰ï¼š</strong></p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[Producer] --&gt;|1.å‘é€æ¶ˆæ¯| B[CommitLog]
    B --&gt;|2.ç«‹å³è¿”å›| A
    B -.-&gt;|3.å¼‚æ­¥é€šçŸ¥| C[ReputService]
    C --&gt;|4.æ„å»ºç´¢å¼•| D[ConsumeQueue]
    
    style B fill:#e1f5ff
    style C fill:#fff4e1
    style D fill:#ffe1e1
</code></pre>
<ol>
<li>Producerå‘é€æ¶ˆæ¯åˆ°Broker</li>
<li>Brokerå†™å…¥CommitLogï¼ˆé¡ºåºè¿½åŠ ï¼‰</li>
<li>è¿”å›æˆåŠŸç»™Producer</li>
<li>ReputServiceå¼‚æ­¥è¯»å–CommitLog</li>
<li>æ„å»ºConsumeQueueç´¢å¼•</li>
</ol>
<p><strong>è¯»å–è·¯å¾„ï¼ˆConsumer â†’ Brokerï¼‰ï¼š</strong></p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[Consumer] --&gt;|1.è¯·æ±‚æ¶ˆæ¯| B[ConsumeQueue]
    B --&gt;|2.è¿”å›offset| A
    A --&gt;|3.è¯»å–æ¶ˆæ¯| C[CommitLog]
    C --&gt;|4.è¿”å›æ•°æ®| A
    
    style B fill:#ffe1e1
    style C fill:#e1f5ff
</code></pre>
<ol>
<li>Consumerå‘Brokerè¯·æ±‚æ¶ˆæ¯</li>
<li>BrokeræŸ¥è¯¢ConsumeQueueç´¢å¼•</li>
<li>è·å¾—æ¶ˆæ¯åœ¨CommitLogçš„offsetå’Œsize</li>
<li>ä»CommitLogè¯»å–å®Œæ•´æ¶ˆæ¯</li>
<li>è¿”å›ç»™Consumer</li>
</ol>
<h3 data-id="heading-17">5.2 è®¾è®¡æ€æƒ³</h3>
<p><strong>CommitLogï¼ˆå†™å…¥ä¾§ï¼‰ï¼š</strong></p>
<ul>
<li>é¡ºåºå†™ï¼Œå……åˆ†åˆ©ç”¨ç£ç›˜æ€§èƒ½</li>
<li>ä¸å…³å¿ƒTopicå’ŒQueue</li>
<li>åªç®¡è¿½åŠ ï¼Œç®€å•é«˜æ•ˆ</li>
</ul>
<p><strong>ConsumeQueueï¼ˆè¯»å–ä¾§ï¼‰ï¼š</strong></p>
<ul>
<li>æŒ‰Topic/Queueç»„ç»‡</li>
<li>å®šé•¿ç´¢å¼•ï¼Œå¿«é€Ÿå®šä½</li>
<li>åªè¯»å…³å¿ƒçš„æ¶ˆæ¯</li>
</ul>
<p>æ ¸å¿ƒï¼š<strong>è¯»å†™åˆ†ç¦»ï¼Œå„è‡ªä¼˜åŒ–åˆ°æè‡´ã€‚</strong></p>
<h3 data-id="heading-18">5.3 æ–‡ä»¶å¸ƒå±€</h3>
<pre><code class="hljs language-perl" lang="perl">store/
â”œâ”€â”€ commitlog/
â”‚   â”œâ”€â”€ <span class="hljs-number">00000000000000000000</span>           <span class="hljs-comment"># 1GB</span>
â”‚   â””â”€â”€ <span class="hljs-number">00000001073741</span>824              <span class="hljs-comment"># 1GB</span>
â”‚
â”œâ”€â”€ consumequeue/
â”‚   â”œâ”€â”€ TopicA/
â”‚   â”‚   â”œâ”€â”€ <span class="hljs-number">0</span>/<span class="hljs-number">00000000000000000000</span>    <span class="hljs-comment"># 5.7MB (30ä¸‡æ¡)</span>
â”‚   â”‚   â””â”€â”€ <span class="hljs-number">1</span>/<span class="hljs-number">00000000000000000000</span>
â”‚   â””â”€â”€ TopicB/
â”‚       â”œâ”€â”€ <span class="hljs-number">0</span>/<span class="hljs-number">00000000000000000000</span>
â”‚       â””â”€â”€ <span class="hljs-number">1</span>/<span class="hljs-number">00000000000000000000</span>
â”‚
â””â”€â”€ <span class="hljs-keyword">index</span>/                             <span class="hljs-comment"># æŒ‰KeyæŸ¥è¯¢ï¼ˆå¯é€‰ï¼‰</span>
    â””â”€â”€ <span class="hljs-number">20250103120000000</span>
</code></pre>
<p><strong>ç©ºé—´å ç”¨ï¼ˆ10ä¸‡æ¡æ¶ˆæ¯ï¼‰ï¼š</strong></p>
<ul>
<li>CommitLogï¼š100 MBï¼ˆå®Œæ•´æ¶ˆæ¯ï¼‰</li>
<li>ConsumeQueueï¼š1.9 MBï¼ˆç´¢å¼•ï¼‰</li>
<li>ç´¢å¼•å¼€é”€ï¼šä»…1.9%</li>
</ul>
<h2 data-id="heading-19">å…­ã€å‡åï¼šä¸»æ•°æ® + å¼‚æ­¥ç´¢å¼•æ¨¡å¼</h2>
<p>ConsumeQueueçš„è®¾è®¡ï¼Œæœ¬è´¨æ˜¯<strong>ä¸»æ•°æ® + å¼‚æ­¥ç´¢å¼•</strong>æ¨¡å¼ã€‚</p>
<h3 data-id="heading-20">6.1 æ ¸å¿ƒæ¨¡å¼</h3>
<pre><code class="hljs">ä¸»æ•°æ®å±‚ï¼ˆå†™ä¼˜åŒ–ï¼‰ â†’ å¼‚æ­¥æ„å»º â†’ ç´¢å¼•å±‚ï¼ˆè¯»ä¼˜åŒ–ï¼‰
</code></pre>
<p><strong>è®¾è®¡åŸåˆ™ï¼š</strong></p>
<ol>
<li>ä¸»æ•°æ®ä¼˜å…ˆå†™å…¥ - ä¿è¯ä¸ä¸¢</li>
<li>ç´¢å¼•å¼‚æ­¥æ„å»º - ä¸é˜»å¡</li>
<li>è¯»å–èµ°ç´¢å¼• - å¿«é€Ÿå®šä½</li>
<li>æœ€ç»ˆä¸€è‡´ - å¯æ¥å—å»¶è¿Ÿ</li>
</ol>
<h3 data-id="heading-21">6.2 å…¸å‹åº”ç”¨</h3>
<p><strong>MySQLçš„äºŒçº§ç´¢å¼•ï¼š</strong></p>
<ul>
<li>ä¸»é”®ç´¢å¼• = CommitLogï¼ˆæ•°æ®å­˜å‚¨ï¼‰</li>
<li>äºŒçº§ç´¢å¼• = ConsumeQueueï¼ˆæŸ¥è¯¢åŠ é€Ÿï¼‰</li>
<li>Change Bufferå¼‚æ­¥åˆå¹¶ç´¢å¼•</li>
</ul>
<p><strong>Elasticsearchçš„å€’æ’ç´¢å¼•ï¼š</strong></p>
<ul>
<li>_sourceå­—æ®µ = åŸå§‹æ–‡æ¡£ï¼ˆCommitLogï¼‰</li>
<li>å€’æ’ç´¢å¼• = æŸ¥è¯¢ç´¢å¼•ï¼ˆConsumeQueueï¼‰</li>
<li>refreshé—´éš”æ§åˆ¶å»¶è¿Ÿï¼ˆé»˜è®¤1ç§’ï¼‰</li>
</ul>
<p><strong>æ•°æ®ä»“åº“çš„ç‰©åŒ–è§†å›¾ï¼š</strong></p>
<ul>
<li>æ˜ç»†è¡¨ = åŸå§‹æ•°æ®</li>
<li>èšåˆè¡¨ = æŸ¥è¯¢è§†å›¾</li>
<li>å®šæ—¶ä»»åŠ¡è®¡ç®—æ›´æ–°</li>
</ul>
<h3 data-id="heading-22">6.3 é€‚ç”¨æ¡ä»¶</h3>
<p><strong>é€‚åˆï¼š</strong></p>
<ul>
<li>å†™å¤šè¯»å°‘ï¼ŒæŸ¥è¯¢å¿…é¡»å¿«</li>
<li>å¯å®¹å¿ç§’çº§å»¶è¿Ÿ</li>
<li>ç´¢å¼•æ„å»ºä»£ä»·é«˜</li>
</ul>
<p><strong>ä¸é€‚åˆï¼š</strong></p>
<ul>
<li>å¼ºä¸€è‡´æ€§è¦æ±‚</li>
<li>æŸ¥è¯¢ç®€å•ï¼ˆå…¨è¡¨æ‰«æä¹Ÿèƒ½æ¥å—ï¼‰</li>
</ul>
<h2 data-id="heading-23">æ€»ç»“</h2>
<p>ConsumeQueueç”¨20å­—èŠ‚å®šé•¿ç´¢å¼• + å¼‚æ­¥æ„å»ºï¼Œè§£å†³äº†CommitLogçš„è¯»å–é—®é¢˜ã€‚</p>
<p><strong>æ ¸å¿ƒæ•°æ®ï¼š</strong></p>
<ul>
<li>æŸ¥è¯¢é€Ÿåº¦ï¼šæå‡34å€ï¼ˆ102ms â†’ 3msï¼‰</li>
<li>æ•°æ®é‡ï¼šå‡å°‘272å€ï¼ˆ100MB â†’ 0.37MBï¼‰</li>
<li>å¼‚æ­¥å»¶è¿Ÿï¼š&lt;10msï¼Œå¯¹æ¶ˆè´¹è€…é€æ˜</li>
</ul>
<p><strong>è®¾è®¡ç²¾é«“ï¼š</strong></p>
<ul>
<li>å®šé•¿ç´¢å¼•ï¼šoffset(8) + size(4) + tagsCode(8) = 20å­—èŠ‚</li>
<li>å¼‚æ­¥æ„å»ºï¼šå†™å…¥ä¸ç­‰å¾…ï¼Œåå°ReputServiceè½®è¯¢å¤„ç†</li>
<li>è¯»å†™åˆ†ç¦»ï¼šCommitLogå†™å…¥æè‡´ï¼ŒConsumeQueueæŸ¥è¯¢æè‡´</li>
</ul>
<p><strong>é€šç”¨æ¨¡å¼ï¼š</strong></p>
<p>ä¸»æ•°æ® + å¼‚æ­¥ç´¢å¼• = å†™å¿« + è¯»å¿« + æœ€ç»ˆä¸€è‡´</p>
<p>è¿™ä¸ªæ¨¡å¼åœ¨MySQLäºŒçº§ç´¢å¼•ã€ESå€’æ’ç´¢å¼•ã€æ•°æ®ä»“åº“ç‰©åŒ–è§†å›¾ä¸­éƒ½èƒ½çœ‹åˆ°ã€‚</p>
<p>æ ¸å¿ƒæ˜¯ï¼š<strong>ç”¨å¯æ¥å—çš„å»¶è¿Ÿï¼Œæ¢å–è¯»å†™æ€§èƒ½çš„æè‡´ã€‚</strong></p>
<p>ä¸‹ä¸€ç¯‡ï¼šåˆ·ç›˜ç­–ç•¥ â€”â€” SYNC_FLUSHå’ŒASYNC_FLUSHåˆ°åº•å·®å¤šå°‘æ€§èƒ½ï¼Ÿ</p>
<hr/>
<p><strong>å‚è€ƒèµ„æ–™ï¼š</strong></p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Frocketmq.apache.org%2F" target="_blank" title="https://rocketmq.apache.org/" ref="nofollow noopener noreferrer">RocketMQå®˜æ–¹æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fapache%2Frocketmq%2Fblob%2Fmaster%2Fdocs%2Fcn%2Fdesign.md" target="_blank" title="https://github.com/apache/rocketmq/blob/master/docs/cn/design.md" ref="nofollow noopener noreferrer">RocketMQ Design</a></li>
<li>ã€ŠRocketMQæŠ€æœ¯å†…å¹•ã€‹ç¬¬ä¸‰ç«  - æ¶ˆæ¯å­˜å‚¨</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Turborepo çš„ Docker åŒ–å®æˆ˜]]></title>    <link>https://juejin.cn/post/7590292192989151272</link>    <guid>https://juejin.cn/post/7590292192989151272</guid>    <pubDate>2026-01-03T10:14:35.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7590292192989151272" data-draft-id="7590403249560780815" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Turborepo çš„ Docker åŒ–å®æˆ˜"/> <meta itemprop="keywords" content="å‰ç«¯,Vue.js"/> <meta itemprop="datePublished" content="2026-01-03T10:14:35.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ— å£°2017"/> <meta itemprop="url" content="https://juejin.cn/user/1618116899507735"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Turborepo çš„ Docker åŒ–å®æˆ˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1618116899507735/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ— å£°2017
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-03T10:14:35.000Z" title="Sat Jan 03 2026 10:14:35 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€</h2>
<p>ä» 2025-07 å¼€å§‹ï¼Œæˆ‘å¼€å§‹åœ¨ Vue é¡¹ç›®ä¸­ä½¿ç”¨ Docker + Workflow çš„æ–¹å¼è¿›è¡Œæ‰“åŒ…éƒ¨ç½²ï¼Œåœ¨æ­¤ç®€å•åˆ—ä¸¾å‡ ä¸ªå¥½å¤„ï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li>å¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ç¯å¢ƒå®Œå…¨ä¸€è‡´ï¼ŒDocker é•œåƒå°è£…äº† OSã€Node.js ç‰ˆæœ¬ã€ä¾èµ–ã€æ„å»ºå·¥å…·ç­‰ï¼Œé¿å…å› ç¯å¢ƒå·®å¼‚å¯¼è‡´çš„æ„å»ºå¤±è´¥æˆ–è¿è¡Œæ—¶é”™è¯¯ã€‚</li>
<li>èŠ‚çœäººåŠ›ï¼Œæ— éœ€æ‰‹åŠ¨ç™»å½•æœåŠ¡å™¨æ‰§è¡Œå‘½ä»¤ã€‚</li>
<li>æ¯æ¬¡éƒ¨ç½²å¯¹åº”ä¸€ä¸ªå¸¦ tag çš„ Docker é•œåƒï¼Œå‡ºç°é—®é¢˜æ—¶ï¼Œä¸€é”®å›æ»šåˆ°ä¸Šä¸€ä¸ªé•œåƒç‰ˆæœ¬ï¼Œæ— éœ€é‡æ–°æ„å»ºã€‚</li>
</ul>
<p>æœ¬æ–‡å°†å…ˆç®€å•å›é¡¾ä¼ ç»Ÿ Vue é¡¹ç›® Docker æ‰“åŒ…éƒ¨ç½²çš„æ–¹å¼ä¸ Turborepo çš„é¡¹ç›®ç»“æ„ã€‚è¯´æ˜å¦‚ä½•åœ¨ Turborepo æ¶æ„çš„é¡¹ç›®ä¸­é€šè¿‡ Docker æ‰“åŒ…éƒ¨ç½² Vue é¡¹ç›®ã€‚</p>
<h2 data-id="heading-1">Vue é¡¹ç›® Docker æ‰“åŒ…éƒ¨ç½²</h2>
<p>åˆ†ä¸º Node é•œåƒæ„å»ºä»¥åŠ Nginx éƒ¨ç½²ä¸¤ä¸ªé˜¶æ®µï¼ŒDockerfile å†…å®¹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-dockerfile" lang="dockerfile"># ç¬¬ä¸€é˜¶æ®µï¼šnodeé•œåƒæ‰“åŒ…
FROM node:latest AS frontend-builder
WORKDIR /build-app
COPY . .
RUN npm install
RUN npm run build

# ç¬¬äºŒé˜¶æ®µï¼šnginxæ‰“åŒ…
FROM nginx:latest
EXPOSE 80
WORKDIR /app
# æ›¿æ¢nginxé…ç½®
COPY nginx.conf /etc/nginx/conf.d/default.conf
# å°†ç¬¬ä¸€é˜¶æ®µçš„é™æ€æ–‡ä»¶å¤åˆ¶åˆ°nginxä¸­
RUN rm -rf /usr/share/nginx/html
RUN mkdir /usr/share/nginx/html
COPY --from=frontend-builder /build-app/dist /usr/share/nginx/html

# è¿è¡Œ
CMD ["nginx", "-g", "daemon off;"]
</code></pre>
<p><code>nginx.conf</code> æ˜¯åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„è‡ªå®šä¹‰ Nginx é…ç½®æ–‡ä»¶ï¼Œè¯¦æƒ…å¯è§<code>ä¸ªäººç›¸å…³é…ç½®</code>ã€‚</p>
<h2 data-id="heading-2">Turborepo é¡¹ç›®ç»“æ„å›é¡¾</h2>
<p>Turborepo æœ¬èº«ä¸æ˜¯æ„å»ºå·¥å…·ï¼Œè€Œæ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„ Monorepo ä»»åŠ¡ç¼–æ’å™¨ã€‚å®ƒä¾èµ–åº•å±‚åŒ…ç®¡ç†å™¨ï¼ˆå¦‚ pnpmã€yarnï¼‰æ¥ç®¡ç†ä¾èµ–ï¼Œé€šè¿‡æ™ºèƒ½ç¼“å­˜å’Œå¹¶è¡Œæ‰§è¡ŒåŠ é€Ÿæ„å»ºã€æµ‹è¯•ç­‰ä»»åŠ¡ã€‚</p>
<p>ä¸€ä¸ªå…¸å‹çš„ Turborepo + pnpm é¡¹ç›®ç»“æ„å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-tex" lang="tex">my-turborepo/
â”œâ”€â”€ apps/
â”‚   â”œâ”€â”€ app1/               # å‰ç«¯åº”ç”¨ï¼ˆå¦‚ Vue/Reactï¼‰
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ public/
â”‚   â”‚   â”œâ”€â”€ package.json   â† name: "app1"
â”‚   â”‚   â””â”€â”€ vite.config.ts
â”‚   â””â”€â”€ app2/
â”‚       â”œâ”€â”€ ...
â”‚       â””â”€â”€ package.json   â† name: "app2"
â”œâ”€â”€ packages/              # â† ç¼ºå¤±åˆ™ workspace ä¾èµ–å®‰è£…å¤±è´¥
â”‚   â”œâ”€â”€ ui/                # å…±äº« UI ç»„ä»¶åº“
â”‚   â”‚   â””â”€â”€ package.json   â† name: "@my/ui"
â”‚   â””â”€â”€ utils/             # å·¥å…·å‡½æ•°
â”‚       â””â”€â”€ package.json   â† name: "@my/utils"
â”œâ”€â”€ package.json           # æ ¹å·¥ä½œåŒºé…ç½® + turbo è„šæœ¬
â”œâ”€â”€ pnpm-workspace.yaml    # â† ç¼ºå¤±åˆ™ turbo æ‰¾ä¸åˆ° app1
â”œâ”€â”€ turbo.json             # Turborepo ä»»åŠ¡æµæ°´çº¿é…ç½®
â””â”€â”€ .npmrc                 # pnpm é…ç½®ï¼ˆå« hoist ç­‰ï¼‰
</code></pre>
<p>Turborepo çš„æ ¸å¿ƒç‰¹ç‚¹ä¸ Docker ç›¸å…³æ€§å¦‚ä¸‹ï¼š</p>






























<table><thead><tr><th>ç‰¹æ€§</th><th>è¯´æ˜</th><th>å¯¹ Docker çš„å½±å“ â—</th></tr></thead><tbody><tr><td><strong>Workspace ç»“æ„</strong></td><td>æ‰€æœ‰å­é¡¹ç›®ï¼ˆapps/packagesï¼‰é€šè¿‡ <code>pnpm-workspace.yaml</code> è¢«è¯†åˆ«ä¸º workspace åŒ…</td><td>Docker æ„å»ºæ—¶å¿…é¡»å¤åˆ¶è¯¥æ–‡ä»¶ï¼Œå¦åˆ™ pnpm æ— æ³•è¯†åˆ«å­åŒ…</td></tr><tr><td><strong>ä¾èµ–é“¾æ¥ï¼ˆLinkingï¼‰</strong></td><td>å­é¡¹ç›®é—´é€šè¿‡ <code>workspace:*</code> åè®®å¼•ç”¨ï¼ˆå¦‚ <code>"@my/ui": "workspace:*"</code>ï¼‰ï¼Œå®é™…æ˜¯ç¬¦å·é“¾æ¥</td><td>ä¸èƒ½åªå¤åˆ¶å•ä¸ª app ç›®å½•ï¼Œå¿…é¡»å¤åˆ¶æ•´ä¸ª <code>apps/</code> å’Œ <code>packages/</code></td></tr><tr><td><strong>æ ¹ç›®å½•ç»Ÿä¸€å®‰è£…</strong></td><td>æ‰€æœ‰ä¾èµ–åœ¨æ ¹ç›®å½•é€šè¿‡ <code>pnpm install</code> å®‰è£…ï¼Œ<code>node_modules</code> ä½äºæ ¹ç›®å½•</td><td>æ„å»ºå‘½ä»¤å¿…é¡»åœ¨æ ¹ç›®å½•æ‰§è¡Œï¼Œä¸èƒ½è¿›å…¥ <code>apps/web</code> åå† <code>pnpm install</code></td></tr><tr><td><strong>Turbo ä»»åŠ¡é©±åŠ¨</strong></td><td>é€šè¿‡ <code>turbo run build</code> å¹¶æŒ‡å®š <code>--filter=app1</code> æ¥æ„å»ºç‰¹å®šåº”ç”¨</td><td>éœ€ç¡®ä¿ <code>turbo.json</code> å’Œå­é¡¹ç›®çš„ <code>name</code> æ­£ç¡®ï¼Œå¦åˆ™ filter å¤±è´¥</td></tr></tbody></table>
<h2 data-id="heading-3">ç¼–å†™ Turborepo ä¸­çš„ Dockerfile</h2>
<p>é¦–å…ˆå±•ç¤ºæˆ‘æœ€ç»ˆçš„ <code>Dockerfile.dev</code>ï¼ˆprodã€test ä¸­ä¼šä½¿ç”¨åˆ°å…¬å¸çš„é•œåƒæºï¼‰ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-dockerfile" lang="dockerfile"># ç¬¬ä¸€é˜¶æ®µï¼šæ„å»º
FROM node:22-alpine AS frontend-builder

WORKDIR /build-app

# å¯ç”¨ pnpmï¼ˆé€šè¿‡ Corepackï¼‰
ENV COREPACK_NPM_REGISTRY=https://registry.npmmirror.com
RUN corepack enable
RUN echo "Corepack registry: $COREPACK_NPM_REGISTRY" &amp;&amp; \
    corepack prepare pnpm@10.24.0 --activate

# å¤åˆ¶æ‰€æœ‰é…ç½®æ–‡ä»¶
COPY .npmrc ./
COPY pnpm-workspace.yaml ./
COPY turbo.json ./
COPY package.json pnpm-lock.yaml ./
COPY apps/ apps/
COPY packages/ packages/

# å®‰è£…æ‰€æœ‰ä¾èµ–ï¼ˆå« devDependenciesï¼‰
RUN pnpm install

# æ„å»º icicï¼ˆåœ¨åŸå§‹ä½ç½®ï¼‰
RUN pnpm turbo build --filter icic -- --mode production

# ç¬¬äºŒé˜¶æ®µï¼šNginx
FROM nginx:alpine
EXPOSE 80
COPY apps/icic/nginx.conf /etc/nginx/conf.d/default.conf
COPY --from=frontend-builder /build-app/apps/icic/dist /usr/share/nginx/html
CMD ["nginx", "-g", "daemon off;"]
</code></pre>
<p>ä¸¤è€…çš„æ ¸å¿ƒå·®å¼‚å¯¹æ¯”å¦‚ä¸‹ï¼š</p>








































<table><thead><tr><th>ç»´åº¦</th><th>æ™®é€š Vue é¡¹ç›®</th><th>Turborepoï¼ˆMonorepoï¼‰</th></tr></thead><tbody><tr><td><strong>é¡¹ç›®ç»“æ„</strong></td><td>å•ä¸€ç›®å½•ï¼Œ<code>package.json</code> åœ¨æ ¹ç›®å½•</td><td>å¤šåŒ…ç»“æ„ï¼ŒVue é¡¹ç›®åœ¨ <code>apps/xxx/</code>ï¼Œæ ¹ç›®å½•æ˜¯ workspace</td></tr><tr><td><strong>ä¾èµ–å®‰è£…ä½ç½®</strong></td><td>ç›´æ¥åœ¨é¡¹ç›®æ ¹ç›®å½• <code>npm install</code> / <code>pnpm install</code></td><td>å¿…é¡»åœ¨ <strong>workspace æ ¹ç›®å½•</strong> å®‰è£…æ‰€æœ‰ä¾èµ–</td></tr><tr><td><strong>æ„å»ºå‘½ä»¤</strong></td><td><code>npm run build</code> æˆ– <code>vite build</code></td><td>å¿…é¡»ç”¨ <code>turbo run build --filter=xxx</code>ï¼ˆæˆ–è¿›å…¥å­ç›®å½•æ„å»ºï¼‰</td></tr><tr><td><strong>å…³é”®é…ç½®æ–‡ä»¶</strong></td><td>åªéœ€ <code>package.json</code>ã€<code>vite.config.js</code> ç­‰</td><td>è¿˜éœ€ï¼š â€¢ <code>pnpm-workspace.yaml</code> â€¢ <code>turbo.json</code> â€¢ æ ¹ç›®å½• <code>.npmrc</code></td></tr><tr><td><strong>Dockerfile COPY èŒƒå›´</strong></td><td>åªéœ€å¤åˆ¶å½“å‰é¡¹ç›®æ–‡ä»¶</td><td>å¿…é¡»å¤åˆ¶ï¼š â€¢ æ•´ä¸ª <code>apps/</code> â€¢ æ•´ä¸ª <code>packages/</code> â€¢ æ‰€æœ‰æ ¹é…ç½®æ–‡ä»¶</td></tr><tr><td><strong>node_modules ä½ç½®</strong></td><td>åœ¨é¡¹ç›®æ ¹ç›®å½•</td><td>åœ¨ workspace æ ¹ç›®å½•ï¼Œå­é¡¹ç›®é€šè¿‡é“¾æ¥ä½¿ç”¨</td></tr></tbody></table>
<h2 data-id="heading-4">æ€»ç»“</h2>
<p><strong>æ™®é€š Vue é¡¹ç›®åªå…³æ³¨è‡ªèº«ï¼›Turborepo é¡¹ç›®éœ€è¦å…³æ³¨æ•´ä¸ª workspaceã€‚</strong> Docker æ„å»ºæ—¶ï¼Œå¿…é¡»è¿˜åŸå®Œæ•´çš„ workspace ä¸Šä¸‹æ–‡ï¼Œå¦åˆ™ä¾èµ–è§£æä¼šæ–­è£‚ã€‚</p>
<h2 data-id="heading-5">å…¶ä»–</h2>
<h3 data-id="heading-6">å¸¸è§é”™è¯¯æ’æŸ¥</h3>






























<table><thead><tr><th>é”™è¯¯ç°è±¡</th><th>å¯èƒ½åŸå› </th><th>è§£å†³æ–¹æ¡ˆ</th></tr></thead><tbody><tr><td><code>pnpm: not found</code></td><td>æœªè¿è¡Œ <code>corepack enable</code></td><td>æ·»åŠ  <code>RUN corepack enable</code></td></tr><tr><td><code>No package found 'app1'</code></td><td>ç¼ºå°‘ <code>pnpm-workspace.yaml</code></td><td>ç¡®ä¿ <code>COPY pnpm-workspace.yaml ./</code></td></tr><tr><td><code>Cannot resolve @my/utils</code></td><td>æœªå¤åˆ¶ <code>packages/</code></td><td>æ·»åŠ  <code>COPY packages/ packages/</code></td></tr><tr><td>æ„å»ºæˆåŠŸä½†é¡µé¢ç©ºç™½</td><td>Nginx æœªé…ç½® <code>try_files</code></td><td>æ£€æŸ¥ <code>nginx.conf</code> æ˜¯å¦åŒ…å« <code>try_files $uri $uri/ /index.html;</code></td></tr></tbody></table>
<h3 data-id="heading-7">ä¸ªäººç›¸å…³é…ç½®</h3>
<p><code>nginx.conf</code></p>
<pre><code class="hljs language-nginx" lang="nginx">server {
    listen       80;
    listen  [::]:80;
    server_name  localhost;

    access_log  /var/log/nginx/host.access.log  main;

    location / {
        root   /usr/share/nginx/html;
        index  index.html index.htm;

        # æ–°å¢ä¸‹é¢è¿™å¥ï¼Œå…¶ä»–æ˜¯é»˜è®¤nginxé…ç½®
        # è§£å†³éƒ¨åˆ†å‰ç«¯æ¡†æ¶çš„è·¯ç”±é—®é¢˜ï¼Œåœ¨æµè§ˆå™¨åˆ·æ–°æŠ¥é”™404
        try_files $uri $uri/ /index.html;
    }

    error_page   500 502 503 504  /50x.html;
    location = /50x.html {
        root   /usr/share/nginx/html;
    }
}

</code></pre>
<p><code>pnpm-workspace</code></p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">packages:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">"apps/*"</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">"packages/*"</span>
</code></pre>
<p><code>.npmrc</code></p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># China mirror of npm</span>
<span class="hljs-attr">registry</span> = https://registry.npmmirror.com

<span class="hljs-comment"># å®‰è£…ä¾èµ–æ—¶é”å®šç‰ˆæœ¬å·</span>
<span class="hljs-attr">save-exact</span> = <span class="hljs-literal">true</span>

<span class="hljs-comment"># å¯ç”¨ hoistï¼Œè®© bin æ–‡ä»¶æå‡åˆ°æ ¹ç›®å½•</span>
<span class="hljs-attr">shamefully-hoist</span> = <span class="hljs-literal">true</span>
<span class="hljs-attr">hoist</span>=<span class="hljs-literal">true</span>
<span class="hljs-attr">public-hoist-pattern</span>=*
</code></pre>
<h2 data-id="heading-8">å‚è€ƒ</h2>
<ul>
<li><a href="https://juejin.cn/post/7302268383316213787" target="_blank" title="https://juejin.cn/post/7302268383316213787">å‰ç«¯é¡¹ç›®å®¹å™¨åŒ–(Docker)æ‰“åŒ…éƒ¨ç½² - æ˜é‡‘</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fturbo.build%2Frepo%2Fdocs%2Fcrafting-your-repository%2Fmanaging-dependencies%23best-practices-for-dependency-installation" target="_blank" title="https://turbo.build/repo/docs/crafting-your-repository/managing-dependencies#best-practices-for-dependency-installation" ref="nofollow noopener noreferrer">Best practices for dependency installation - Turborepo</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[2025å¹´ç»ˆæ€»ç»“ï¼šå†æ¬¡é€‰æ‹©ã€æ²ªæ¼‚ã€ç¬¬ä¸€æ¬¡æ¼”è®²ã€ç›¸äº²æ— æœ]]></title>    <link>https://juejin.cn/post/7590309337861046313</link>    <guid>https://juejin.cn/post/7590309337861046313</guid>    <pubDate>2026-01-03T10:24:34.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7590309337861046313" data-draft-id="7590421489997905939" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="2025å¹´ç»ˆæ€»ç»“ï¼šå†æ¬¡é€‰æ‹©ã€æ²ªæ¼‚ã€ç¬¬ä¸€æ¬¡æ¼”è®²ã€ç›¸äº²æ— æœ"/> <meta itemprop="keywords" content="åç«¯,GitHub,ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2026-01-03T10:24:34.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å·ç¦åŒå­¦"/> <meta itemprop="url" content="https://juejin.cn/user/3456520291098686"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            2025å¹´ç»ˆæ€»ç»“ï¼šå†æ¬¡é€‰æ‹©ã€æ²ªæ¼‚ã€ç¬¬ä¸€æ¬¡æ¼”è®²ã€ç›¸äº²æ— æœ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3456520291098686/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å·ç¦åŒå­¦
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-03T10:24:34.000Z" title="Sat Jan 03 2026 10:24:34 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>é€‰æ‹©å¤§äºåŠªåŠ›</p>
</blockquote>
<p>å‹å‹ä»¬ï¼Œæˆ‘æ˜¯å·ç¦åŒå­¦ï¼Œä¸Šæ¬¡å†™2024å¹´ç»ˆæ€»ç»“çš„æ—¶å€™è¿˜åœ¨æ­¦æ±‰ï¼Œè°èƒ½æƒ³åˆ°ä¸€å¹´ä¹‹åä¼šåœ¨ä¸Šæµ·å†™2025çš„å¹´ç»ˆæ€»ç»“ã€‚ä»Šå¹´ä¸‹åŠå¹´ç»å†çš„äº‹æƒ…æ¯”è¾ƒå¤šï¼Œæ€»ç»“æ¥è¯´å°±æ˜¯ï¼Œäººç”Ÿç»å†åˆä¸°å¯Œäº†</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8d4b9f9591204760a981657d4ec02993~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2356aP5ZCM5a2m:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768040674&amp;x-signature=1Ku9jUlS5bTfj9kFxMm%2BOmMxnXA%3D" alt="1.png" loading="lazy"/></p>
<h2 data-id="heading-0">1.å†æ¬¡é€‰æ‹©</h2>
<blockquote>
<p>å»ä¸€çº¿å¤§åŸå¸‚é—¯è¡äººç”Ÿè¿˜æ˜¯ç•™åœ¨æ­¦æ±‰å²æœˆé™å¥½å‘¢ï¼Ÿ</p>
</blockquote>
<h3 data-id="heading-1">1æœˆ</h3>
<p>1æœˆæ—¶å€™è¿˜åœ¨æ­¦æ±‰å›½ä¼é‡Œå‘¢ï¼Œå½¼æ—¶å› ä¸ºé¡¹ç›®å˜å°‘äº†ï¼Œæ­¦æ±‰äººå‘˜è¦é‡æ–°åˆ†é…ï¼Œæ²¡åˆ†åˆ°é¡¹ç›®ç»„çš„äººè¦è¿›èµ„æºæ± ç­‰å€™ä¸‹ä¸€æ­¥å®‰æ’ã€‚è€Œæˆ‘è¿™ä¸ªå°ç»„ä¹‹å‰æ­¦æ±‰æ˜¯æœ‰2ä¸ªäººçš„ï¼ŒåŒ—äº¬1ä¸ªé¡¹ç›®ç»ç†ï¼Œç»™æˆ‘åˆ†é…äº†åŠä¸ªäººçš„å·¥æ—¶ï¼Œå¦ä¸€ä¸ªäººç›´æ¥è®©å»èµ„æºæ± ã€‚å…³äºè¿™ä¸ªé¡¹ç›®ç»ç†ï¼Œå»å¹´ä¹Ÿå†™è¿‡åæ§½çš„å¸–å­ã€‚è¿™ä¸ªäººåœ¨æ­¦æ±‰çš„åå£°éå¸¸ä¸å¥½ï¼Œå°±å®Œå…¨æ˜¯å¯¹å¾…ç‰›é©¬ä¸€æ ·å¯¹å¾…åº•ä¸‹å¹²æ´»çš„äººã€‚</p>
<p>æˆ‘æƒ³ç€ä»¥åçš„æ—¥å­å¯èƒ½è¿‡å¾—æ›´éš¾å—ï¼Œè¿˜ä¸å¦‚ç›´æ¥è¿›èµ„æºæ± ç®—äº†ã€‚äºæ˜¯å°±å’Œä»–è¯´äº†ï¼Œä»–å€’ä¹Ÿçˆ½å¿«ï¼Œæƒ³ç€å†ä»æ­¦æ±‰éšä¾¿æä¸ªäººè¿›æ¥å‘—ï¼Œåæ­£è¿˜æœ‰å¾ˆå¤šäººæ²¡å®‰æ’é¡¹ç›®ç»„çš„ã€‚æ²¡æƒ³åˆ°çš„æ˜¯ï¼Œä»–æ¥è¿æ‰¾äº†ä¸¤ä¸ªäººï¼Œä½†æ˜¯å› ä¸ºæ­¦æ±‰çš„äººéƒ½å¬è¯´è¿‡ä»–çš„åå·ï¼Œéƒ½è¡¨ç¤ºä¸æƒ³å»ä»–çš„é¡¹ç›®ç»„ã€‚æœ€åï¼Œä»–æŠŠé¡¹ç›®ç»™å¤–åŒ…äººå‘˜åšäº†ã€‚æ­¦æ±‰çš„äººï¼Œå®æ„¿å¾…æ± å­é‡Œï¼Œä¹Ÿä¸æƒ³è·Ÿç€ä»–å¹²ã€‚ã€‚ã€‚</p>
<p>è¿™è®©æˆ‘æƒ³èµ·ä»¥å‰ä¸Šå°å­¦çš„æ—¶å€™ï¼Œä»¥å‰å†œæ‘å°å­¦çš„è€å¸ˆï¼Œæ‰“å­¦ç”Ÿéƒ½å¾ˆå‰å®³çš„ã€‚è€Œæ‰“çš„åŸå› ä¸ä»…ä»…æ˜¯å› ä¸ºè°ƒçš®æ£è›‹ï¼Œæˆ‘é‚£ä¸ªç­æ•™æ•°å­¦çš„è€å¸ˆï¼Œå°±æ˜¯å…¶ä¸­æ‰“äººæœ€å‰å®³çš„ã€‚ä¸Šè¯¾çš„è®²å°ä¸¤è¾¹ä¼šæœ‰ä¸¤ä¸ªåº§ä½å˜›ï¼Œæ¯æ¬¡å¥¹è®²è¯¾çš„æ—¶å€™ï¼Œéƒ½ä¼šä»è¿™ä¸¤ä¸ªåº§ä½çš„å­¦ç”Ÿæ‰‹é‡Œæ‹¿è¯¾åä½œä¸šè®²ï¼Œè¦æ˜¯è®²çš„æ—¶å€™å‘ç°å†™é”™äº†ï¼Œç›´æ¥å†²è¿‡å»æ‰“å¤´ï¼Œæè€³æœµç­‰ç­‰ã€‚æœ‰ä¸€æ¬¡å› ä¸ºç­ä¸Šå†™é”™ä½œä¸šçš„äººå¤ªå¤šäº†ï¼Œç›´æ¥ä¸€èŠ‚è¯¾æ²¡ä¸Šï¼Œè½®æµä¸Šå»æ‰é©¬æ­¥ã€‚è€Œæˆ‘å‘¢ï¼Œåˆæ°å·§æœ‰ä¸€å­¦æœŸæ˜¯ååœ¨è®²å°æ—è¾¹çš„åº§ä½ï¼Œäºæ˜¯è¿™å­¦æœŸæ¯é€¢å¥¹çš„è¯¾å¿…æŒ¨æ‰“ï¼Œæ‰“åˆ°åé¢ï¼Œå±…ç„¶åœ¨è¯¾ä¸Šè¯´ï¼Œå·ç¦ååœ¨è¿™ï¼Œå·²ç»è¢«æˆ‘æ‰“è‚¿äº†ï¼Œä½ ä»¬å†æ•¢åšé”™é¢˜è¯•è¯•ã€‚åˆ°ç¬¬äºŒå­¦æœŸå¼€å­¦çš„æ—¶å€™ï¼Œå¤§å®¶é€‰åº§ä½ç›´æ¥æŠŠå‰é¢ä¸¤ä¸ªä½ç½®ç©ºç€äº†ï¼Œæœ‰ä¸¤ä¸ªäººå®æ„¿åœ¨åé¢ç«™ç€ä¹Ÿä¸åé‚£ä½ç½®ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b7b5f332d13c4859972db360a8ca3b87~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2356aP5ZCM5a2m:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768040674&amp;x-signature=r6ZLKEctA2tjKGPgp1e%2FHQfXnS0%3D" alt="æ’å›¾.png" loading="lazy"/></p>
<p>æˆ‘æ„Ÿè§‰æ˜¯ä¸æ˜¯å†å²åˆä¸€æ¬¡é‡æ¼”äº†å‘¢ï¼Ÿ</p>
<p>ç°åœ¨å›å¤´çœ‹ï¼Œå½“æ—¶æ²¡ç»§ç»­è·Ÿç€ä»–çš„é€‰æ‹©æ˜¯å¯¹çš„ã€‚åœ¨æ­¦æ±‰ï¼Œä¹Ÿæ²¡æœ‰å²æœˆé™å¥½å•Šã€‚</p>
<h3 data-id="heading-2">å†æ¬¡é€‰æ‹©</h3>
<p>è™½ç„¶5æœˆä»½çš„æ—¶å€™æ‹¿äº†ä¸Šæµ·çš„offerï¼Œä½†æ˜¯ç­‰çœŸçš„è¦èµ°çš„æ—¶å€™ï¼Œè¿˜æ˜¯ä¼šçº ç»“çš„ã€‚å°±å’Œåˆšæ¯•ä¸šçš„æ—¶å€™å»åŒ—äº¬ä¸€æ ·ï¼Œä¸€åˆ‡éƒ½è¦é‡å¤´å¼€å§‹äº†ã€‚èµ°çš„é‚£å¤©ï¼Œå‡ºç§Ÿå±‹é‡Œåªæœ‰ä¸ªä¿æ´é˜¿å§¨åœ¨æ‰“æ‰«å«ç”Ÿï¼Œå°±å’Œæˆ‘åˆšå›æ­¦æ±‰çš„æ—¶å€™ä¸€æ ·ã€‚ä¸åŒçš„æ˜¯ï¼Œä¸Šæ¬¡é˜¿å§¨è¯´çš„æ˜¯æˆ¿å­å¾ˆå¿«å°±æ‰“æ‰«å¥½äº†ï¼Œè¿™æ¬¡è¯´çš„æ˜¯ï¼Œç¥è€æ¿ä»¥åå»ä¸Šæµ·äº†å‘å¤§è´¢å•Š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2be2b17b617a4bb7a3faf3d2c9074c04~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2356aP5ZCM5a2m:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768040674&amp;x-signature=AOdkmQYk4RxmTMzV6cRsZNc40Q8%3D" alt="2.jpg" loading="lazy"/></p>
<h2 data-id="heading-3">2.æ²ªæ¼‚</h2>
<h3 data-id="heading-4">æ¢ç´¢æ–°äº‹ç‰©</h3>
<p>ä¸Šæµ·å°±æ˜¯æœºä¼šå¤šå•Šï¼Œä¼‘æ¯æ—¥éƒ½ä¼šå‡ºå»é€›é€›ï¼Œæ¢ç´¢äº›æ–°äº‹ç‰©ã€‚æƒ³æƒ³æ¥ä¸Šæµ·ä¹‹åï¼Œå»å‘¨è¾¹åŸå¸‚å‚åŠ å¾’æ­¥ã€å‚åŠ ChinaJoyæ¼«å±•ã€çœ‹äº†å¼€å¿ƒéº»èŠ±çš„è¯å‰§ã€Šç–¯ç‹‚ç†å‘åº—ã€‹ã€è¿˜æœ‰å¸‚åŒºå†…çš„ä¸€äº›å…¬å›­ã€å¤§å­¦ã€å›¾ä¹¦é¦†ã€åŠ¨ç‰©å›­ã€æ¼”å”±æ´»åŠ¨ç­‰ç­‰ï¼Œç”Ÿæ´»éå¸¸ä¸°å¯Œå¤šå½©ã€‚</p>
<ul>
<li>å¾’æ­¥æ´»åŠ¨åœ¨å°çº¢ä¹¦ä¸Šæ‰¾ä¸ªå›¢æŠ¥å°±è¡Œï¼Œå¾ˆå¤šéƒ½æ˜¯ä¸€å¤©æ¸¸ï¼Œä¸€åŠæ—¶é—´éƒ½åœ¨è·¯ä¸Š</li>
<li>æ¼«å±•é‡Œçš„coseréƒ½ç¾å¦‚ç”»ï¼Œéå¸¸é€‚åˆé›†é‚®</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a3860a27a7254d9d9109944c11b9a04f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2356aP5ZCM5a2m:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768040674&amp;x-signature=X1639NmL2uou67k%2FLBD2Ebgqt9A%3D" alt="3_1.jpg" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/860e0dd37239494197cbc0ccc91efd8a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2356aP5ZCM5a2m:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768040674&amp;x-signature=EI4%2BiQXCxngICiO4iwGvDPbpVa4%3D" alt="3.jpg" loading="lazy"/></p>
<h2 data-id="heading-5">3.ç¬¬ä¸€æ¬¡æ¼”è®²</h2>
<h3 data-id="heading-6">3æœˆ</h3>
<p>ä»Šå¹´å‚åŠ çš„çº¿ä¸‹æ´»åŠ¨è¿˜æ¯”è¾ƒå¤šå‘¢ï¼Œ3æœˆä»½çš„æ—¶å€™å—è…¾è®¯äº‘ç¤¾åŒºçš„é‚€è¯·å»æ­å·å‚åŠ çº¿ä¸‹çš„æŠ€æœ¯è®­ç»ƒè¥æ´»åŠ¨ï¼Œä¸»è¦ä¹Ÿæ˜¯æƒ³è¶æœºä¼šå¤šè®¤è¯†äº›å¤§ä½¬ï¼Œè¯´ä¸å®šå¤§ä½¬æ‹›äººï¼Œæœ‰å†…æ¨æœºä¼šã€‚å€’ä¹Ÿè®¤è¯†äº†ä¸å°‘äººï¼Œå–µå–µã€å°æ™ºï¼Œè¿˜æœ‰ç¤¾åŒºçš„æ³½æ•å§ã€‚æ™šä¸Šä¸€èµ·åƒé¥­äº¤æµçš„æ—¶å€™ï¼Œæ³½æ•å§è¯´ä¸‹æ¬¡æœ‰æœºä¼šè®©æˆ‘ä¸Šå»æ¼”è®²ã€‚å½“æ—¶åªä»¥ä¸ºæ˜¯è¯´è¯´è€Œå·²ï¼Œæ¯•ç«Ÿç¤¾åŒºé‡Œå¤§ä½¬å¤ªå¤šäº†</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b6f3329c59cd4e3f90242d1e4a327bed~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2356aP5ZCM5a2m:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768040674&amp;x-signature=tYs1ISPbWqnPjBzxrY7nWPLpjYs%3D" alt="4.jpg" loading="lazy"/></p>
<h3 data-id="heading-7">9æœˆ</h3>
<p>9æœˆä»½çš„æ—¶å€™æ”¶åˆ°ç¤¾åŒºçš„é‚€è¯·ï¼Œå»æ·±åœ³å‚åŠ è…¾è®¯å…¨çƒæ•°å­—ç”Ÿæ€å¤§ä¼šï¼Œä½œä¸ºè®²å¸ˆä¸Šå»åšåˆ†äº«ã€‚æˆ‘æ˜¯éå¸¸æƒ³å»çš„ï¼Œè¿™æ ·å°±èƒ½è¾¾æˆä»å­¦ç”Ÿåˆ°è€å¸ˆè§’è‰²è½¬å˜çš„ç›®æ ‡ï¼Œè¾“å…¥å˜è¾“å‡ºã€‚æ¯”è¾ƒçº ç»“çš„æ˜¯åˆ†äº«ä»€ä¹ˆå†…å®¹æ¯”è¾ƒå¥½å‘¢ï¼Œæƒ³äº†ä¸€æ™šä¸Šï¼Œæœ€åè§‰å¾—åˆ†äº«è‡ªå·±ç”¨AIä¸¤å¹´çš„ç»å†ã€æ²‰æ·€çš„ä¸€äº›ä½¿ç”¨å¿ƒå¾—ä½“ã€è¿˜æœ‰å˜ç°æ–¹å¼ä¼šæ¯”è¾ƒå¥½ã€‚</p>
<p>ç°åœºçš„åˆ†äº«ä¹Ÿæ˜¯æ¯”è¾ƒé¡ºåˆ©ï¼Œè®²å®Œä¸‹æ¥çš„æ—¶å€™å’Œå°æ™ºè€å¸ˆæ²Ÿé€šä¸Šå°æ¼”è®²ä½“éªŒï¼Œå°æ™ºè¯´æˆ‘è®²çš„éå¸¸å¹²è´§ï¼Œè®²çš„å¾ˆç¨³ï¼Œåˆšæ‰ä»–è‡ªå·±è®²çš„æ—¶å€™éå¸¸ç´§å¼ ï¼Œè…¿éƒ½åœ¨æŠ–ã€‚æˆ‘è¯´ï¼Œæˆ‘ä¹Ÿæ˜¯å•Šï¼Œè…¿éƒ½åœ¨æ‰“é¢¤ï¼Œåè€Œçœ‹ä½ è®²ä¸€ç‚¹ä¹Ÿä¸æ…Œçš„æ ·å­ã€‚ã€‚ã€‚</p>
<p>ç¬¬äºŒå¤©åˆå’Œå–µå–µä¸€èµ·å»è…¾è®¯æ•°ç å¤§å¦æ‰¾æ³½æ•å§ï¼Œéå¸¸æ„Ÿè°¢æ³½æ•å§çš„é‚€è¯·ï¼Œç¬¬ä¸€æ¬¡åˆ°è…¾è®¯çš„å¤§æ¥¼å‚è§‚ã€‚æœŸé—´è§è¯†åˆ°äº†è¶…è±ªåçš„äºŒæ¬¡å…ƒå·¥ä½ï¼Œæ»¡å¢™çš„æ‰‹åŠï¼Œéå¸¸éœ‡æƒŠã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/aea58b73cdb64e668e524f847b7e1eec~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2356aP5ZCM5a2m:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768040674&amp;x-signature=DTnnUTPaDcRhBSOhLgpWMCJPdKc%3D" alt="5.jpg" loading="lazy"/></p>
<h2 data-id="heading-8">4.AIæ¢ç´¢</h2>
<p>é€‰æ‹©é€‚åˆè‡ªå·±çš„æ–¹å‘æ¯”è¾ƒé‡è¦ï¼Œ2024å¹´æŠ•å…¥äº†å¾ˆå¤šæ—¶é—´åœ¨AIè§†é¢‘ã€ç»˜ç”»ä¸Šï¼Œè™½ç„¶ä¹Ÿæœ‰æ¶¨ç²‰å˜›ï¼Œä½†æ˜¯å˜ç°ä¸è¡Œï¼Œä¸€å¹´ä¸‹æ¥ä¹Ÿå°±ä¸‰ä½æ•°çš„æ”¶ç›Šã€‚ä»Šå¹´ä¸»è¦åœ¨å†™ä½œè¿˜æœ‰AIç¼–ç¨‹æ–¹å‘æŠ•å…¥ï¼Œå› ä¸ºæ¢å·¥ä½œçš„åŸå› ï¼Œå…¶å®æŠ•å…¥ç²¾åŠ›æ²¡å»å¹´é‚£ä¹ˆå¤šã€‚åè€Œæ”¶ç›Šè¿˜æ›´å¤šäº†ï¼Œæœ‰å››ä½æ•°çš„æ”¶ç›Šã€‚ä¹Ÿäº§å‡ºäº†ç™¾ä¸‡é˜…è¯»çš„æ–‡ç« å’Œ10w+æ’­æ”¾é‡çš„è§†é¢‘</p>
<p>å‡ºçˆ†æ¬¾çš„è¯€çªå°±æ˜¯è¿½çƒ­ç‚¹ï¼Œè¿™æ˜¯æ™®é€šäººå‡ºçˆ†æ¬¾æœ€å®¹æ˜“çš„æ–¹å¼äº†ã€‚æ¯”å¦‚å¹´åˆçš„Deepseekï¼Œå›½åº†æœŸé—´çš„sora2ï¼Œè¶ç€åˆšå‡ºæ¥çƒ­åº¦æœ€é«˜çš„æ—¶å€™ï¼Œéšä¾¿å†™ç‚¹ä¸œè¥¿æˆ–è€…åšä¸ªè§†é¢‘ï¼Œæµé‡éƒ½éå¸¸å¥½çš„ã€‚é‚£åƒç°åœ¨å†å»å†™Deepseekï¼Œæµé‡è‚¯å®šä¸å¦‚ä¹‹å‰äº†ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b85c581680094c2ca0e1ca5089a4c222~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2356aP5ZCM5a2m:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768040674&amp;x-signature=fIRfY%2B6x9CKUlm5hMv6rTnUrC5g%3D" alt="6.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2bb43c628f8c453595d6e1f307ae8e6d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2356aP5ZCM5a2m:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768040674&amp;x-signature=lqSh8rJGUVgPnpdaTBi5sBUB5a4%3D" alt="7.png" loading="lazy"/></p>
<h3 data-id="heading-9">11æœˆ</h3>
<p>11æœˆçœ‹åˆ°å°æ™ºè€å¸ˆå‘çš„åä¸ºé¸¿è’™çº¿ä¸‹ç¼–ç¨‹æ´»åŠ¨çš„ä¿¡æ¯ï¼Œæ‹‰ç€åœ¨ä¸Šæµ·çš„ä¸€ä¸ªå‰åŒäº‹ä¸€èµ·å»å‚åŠ ç©ç©ï¼Œå‰åŒäº‹æ˜¯æˆ‘åœ¨åŒ—äº¬é˜¿é‡Œå·¥ä½œæ—¶åŒç»„çš„ï¼Œåæ¥æ¥äº†ä¸Šæµ·åï¼Œæˆ‘å±…ç„¶åœ¨ä¸€ä¸ªå…¬äº¤ç«™ç¢°åˆ°ä»–äº†ï¼Œä¹Ÿæ˜¯ååˆ†éœ‡æƒŠï¼Œå±…ç„¶åœ¨ä¸Šæµ·é‡åˆ°æ›¾åœ¨åŒ—äº¬çš„å‰åŒäº‹ã€‚é¸¿è’™çš„ç¼–ç¨‹æ´»åŠ¨éƒ½æ˜¯åŸºç¡€çš„æ“ä½œï¼Œæ­£å¥½ä¹Ÿä¹°äº†Codebuddyçš„ä¼šå‘˜ï¼Œç”¨AIç¼–ç¨‹è½»æ¾è§£å†³äº†ï¼Œæ‹¿åˆ°ä¸ªå°ç¤¼å“</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3b13a9495b7542348ccb215b9aff7507~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2356aP5ZCM5a2m:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768040674&amp;x-signature=jb9UrnNikT2CW8y7DmuocBmDi%2FQ%3D" alt="8.jpg" loading="lazy"/></p>
<h3 data-id="heading-10">12æœˆ</h3>
<p>å¹´åº•äº†ï¼ŒAIç ´å±€ä¿±ä¹éƒ¨åœ¨æ·±åœ³ä¸¾åŠè¡ŒåŠ¨å®¶å¤§ä¼šï¼Œæˆ‘çœ‹åˆ†äº«å˜‰å®¾å’Œå†…å®¹æŒºå¹²è´§çš„ï¼Œä¹ŸæŠ¥åè·‘å»æ·±åœ³å‚åŠ äº†ï¼Œåˆ°ç°åœºæ‰å‘ç°ï¼Œé«˜æ‰‹äº‘é›†ï¼Œå¤©ä¸‹è‹±é›„å¦‚è¿‡æ±Ÿä¹‹é²«ã€‚æˆ‘æŠŠè¿™æ¬¡å‚ä¼šäº†è§£çš„ä¸œè¥¿æ•´ç†äº†ä¸‹ï¼š</p>
<ul>
<li>
<p>AIPPT.com ï¼šèµµå……è€å¸ˆä»¥è‚¯å¾·åŸºä¸ºä¾‹åˆ†äº«åšäº§å“ä¸è¦åšå…¨å®¶æ¡¶ï¼Œç”¨æˆ·åªæƒ³è¦ä¸ªç”œç­’ï¼ˆä¸è¦åšå¤§è€Œå…¨çš„äº§å“ï¼Œè€Œæ˜¯åœ¨å‚ç›´é¢†åŸŸæ‰¾åˆ°éœ€æ±‚ï¼Œåœ¨å•ç‚¹ï¼Œå µä¸Šä¸€åˆ‡ï¼‰</p>
</li>
<li>
<p>AIç¼–ç¨‹å‡ºæµ·ï¼šè€å¤–ä»˜è´¹æ„æ„¿æ›´å¼ºï¼Œå¤§å…¬å¸ä¸æ„¿æ„åšçš„å‚ç›´å°å¸‚åœºï¼Œæ‰æ˜¯ä¸ªäººæœ€å¤§çš„æœºä¼šã€‚remove.bgç½‘ç«™ä»…æœ‰å»é™¤èƒŒæ™¯è¿™ä¸€é¡¹åŠŸèƒ½ï¼Œæµé‡å´éå¸¸é«˜</p>
</li>
<li>
<p>æœç´¢æµé‡æ¯”æ¨èæµé‡æ›´å€¼é’±ï¼šç”¨æˆ·ä¸»åŠ¨æœçš„ï¼Œè¯´æ˜æœ‰æ˜ç¡®éœ€æ±‚ã€‚è€Œå¹³å°æ¨çš„ï¼Œç”¨æˆ·åªæ˜¯éšä¾¿çœ‹çœ‹ã€‚è·å–æœç´¢æµé‡çš„æ–¹æ³•ï¼šç ”ç©¶ç”¨æˆ·æœç´¢çš„å…³é”®è¯ï¼Œå›´ç»•å…³é”®è¯è¾“å‡ºå†…å®¹ï¼Œæ—¶é—´ä¹…äº†ï¼Œç”¨æˆ·æœç´¢è¿™ä¸ªå…³é”®è¯ï¼Œè‡ªç„¶å°±æ‰¾åˆ°ä½ äº†</p>
</li>
</ul>
<p>æ´»åŠ¨åˆ†äº«çš„å†…å®¹æŒºå¤šçš„å•Šï¼Œè¿™é‡Œå°±ä¸ç»§ç»­å†™äº†ã€‚</p>
<p>åŒæ ·çš„å¬è¯¾ï¼Œç»“æœå¯èƒ½å®Œå…¨ä¸åŒï¼Œä¼šåœºçš„1000äººï¼Œå‚åŠ å®Œä¼šå›å»åï¼Œå¯èƒ½å¤§éƒ¨åˆ†äººå°±æ˜¯æ„Ÿæ…¨ä¸€ä¸‹ï¼Œç„¶åç»§ç»­åŸæ¥çš„ç”Ÿæ´»</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7fe6186ae197474ea445c4f433376e6f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2356aP5ZCM5a2m:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768040674&amp;x-signature=aop67PVesi1FzhUKctc1rJhi60s%3D" alt="9.jpg" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bd7d0e18fa7648e892747043f3cb538c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2356aP5ZCM5a2m:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768040674&amp;x-signature=l8KeqHH2idwkR7HW%2BcEAkvkpD4U%3D" alt="10.jpg" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b8cff48febf7483cb76fae6ecc532660~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2356aP5ZCM5a2m:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768040674&amp;x-signature=sI5JR9WEmGfYodGKCwwfQQ964%2BY%3D" alt="11.jpg" loading="lazy"/></p>
<h2 data-id="heading-11">5.ç›¸äº²</h2>
<p>ç¦»å¼€æ­¦æ±‰å‰ï¼Œå’Œå¤§å­¦åŒå­¦èšé¤ï¼ŒèŠäº†ä¸‹å‘ç°åŒå­¦è¦å‡†å¤‡å»å¥³æ–¹å®¶æäº²äº†ï¼Œé—®å¯¹è±¡æ˜¯ä»å“ªé‡Œæ‰¾çš„ï¼Œè¯´äº†ä¸ªç›¸äº²è½¯ä»¶ã€‚ä¸è¿‡ä¹Ÿå¾ˆéš¾ï¼ŒåŒå­¦ç›¸äº²äº†åå‡ ä¸ªå¥³ç”Ÿï¼Œæ‰å’Œç°åœ¨è¿™ä¸ªèµ°åˆ°è°ˆç»“å©šè¿™ä¸€æ­¥ã€‚çŸ¥é“äº†ç›¸äº²è½¯ä»¶ï¼ˆé’è—¤ï¼‰åï¼Œæˆ‘æ¥ä¸Šæµ·ä¹Ÿå¼€å§‹äº†ç›¸äº²ä¹‹æ—…ï¼Œåˆ°ç›®å‰ä¸ºæ­¢ï¼Œè¿˜æ²¡æœ‰ä¸€ä¸ªç›¸ä¸Šçš„ï¼Œç®€å•è¯´ä¸‹ç›¸äº²çš„å‡ ä¸ªå¥³ç”Ÿå§ï¼š</p>
<ul>
<li>91å¹´ï¼Œåˆä¸­è€å¸ˆã€‚å…¶å®æ˜¯åœ¨æ­¦æ±‰ç›¸äº²çš„ï¼Œå®¶é‡Œç»™ä»‹ç»çš„ã€‚æ„Ÿè§‰å¹´é¾„å·®çš„å¤ªå¤§äº†ï¼Œå·®ä¸å¤š5å²äº†ï¼Œä¸è¿‡å› ä¸ºæ˜¯å®¶é‡Œä»‹ç»çš„ï¼Œè¿˜æ˜¯å¾—è§ä¸Šä¸€é¢ã€‚3æœˆçš„æ—¶å€™ï¼Œæ­¦å¤§æ¨±èŠ±è¿˜å¼€ç€ï¼Œä¾¿æƒ³å»æ­¦å¤§é‡Œé€›é€›èŠèŠã€‚è®©å¥¹æŠŠèº«ä»½è¯å·å‘æˆ‘ï¼Œç”¨æ ¡å‹é€šé“é¢„çº¦ã€‚ç„¶åçŠ¹çŠ¹è±«è±«åŠå¤©æ²¡æœ‰å‘æˆ‘ï¼Œè¯´æ˜¯ä¸ªäººéšç§ç­‰ç­‰ä¹‹ç±»çš„ï¼Œè¦è‡ªå·±é¢„çº¦ã€‚ç»“æœæ²¡çº¦ä¸Šï¼Œæƒ³å†ç”¨æ ¡å‹é€šé“æ—¶å·²ç»çº¦æ»¡äº†ï¼Œæ— å¥ˆåªå¥½çº¦ç€å»å­¦æ ¡æ—è¾¹ä¸€å®¶å†·é”…é±¼åº—åƒé¥­å¥½äº†ï¼Œè®¡åˆ’çº¦çš„12ç‚¹è§é¢ï¼Œæˆ‘é¢„ä¼°12ç‚¹åŠåº”è¯¥èƒ½åƒä¸Šé¥­ï¼ˆä¸çŸ¥é“ä¸ºä»€ä¹ˆï¼Œæ­¦æ±‰ç›¸äº²çš„å¥³ç”Ÿéƒ½è¿Ÿåˆ°ï¼‰ï¼Œæ²¡æƒ³åˆ°å¥¹ç›´åˆ°1ç‚¹å¤šæ‰åˆ°ï¼Œè¿Ÿåˆ°1ä¸ªå¤šå°æ—¶ï¼ŒæœŸé—´ä¹Ÿå°±å„ç§å°¬èŠï¼Œå›å»åä¸¤äººéƒ½æ²¡å†å‘æ¶ˆæ¯äº†ï¼Œå‡‰å‡‰</li>
<li>93å¹´ï¼Œä¸Šæµ·å…¬åŠ¡å‘˜ã€‚å®¶é‡Œçš„äº²æˆšä»‹ç»çš„ï¼Œæ˜¯æˆ‘ç›¸äº²è¿‡çš„æœ€ä¼˜ç§€çš„å¥³ç”Ÿäº†ã€‚ä»¥å‰çš„é«˜è€ƒæ–‡ç§‘çŠ¶å…ƒï¼Œæ­¦å¤§æ ¡å‹ï¼Œé•¿å¾—åƒè¢å’ä»ªï¼ŒèŠå¤©è¯´è¯æƒ…å•†ä¹Ÿå¾ˆé«˜ã€‚æ¥è§¦äº†ä¸€ä¸ªæœˆå§ï¼ŒæœŸé—´ä¹Ÿä¸€èµ·åƒè¿‡é¥­ï¼Œçœ‹è¿‡è¯å‰§ã€‚æœ€åä¸€æ¬¡è§é¢èŠå¤©è¯´èµ·å¥¹å‰ç”·å‹ï¼Œæµ·å½’ï¼Œå¹´å…¥ç™¾ä¸‡ï¼Œé‡‘èè¡Œä¸šã€‚é•¿ç›¸æ²¡è¯´å•Šï¼Œåº”è¯¥ä¹Ÿä¸å·®ï¼Œå¦¥å¦¥é«˜å¯Œå¸…ã€‚æˆ‘ä¸€å¬è¿™æ¡ä»¶ï¼Œå¿ƒé‡Œé¡¿æ—¶å‡‰å‡‰ï¼Œå·®è·å¤ªå¤§äº†ã€‚é—®èµ·ä¸ºä»€ä¹ˆåˆ†äº†å‘¢ï¼Œè¯´æ˜¯ç”·çš„è™½ç„¶æœ‰é’±ï¼Œä½†æ˜¯ä¸ç»™å¥³çš„èŠ±ï¼Œä»€ä¹ˆäº‹éƒ½è¦AAã€‚å°±æ˜¯ç½‘ä¸Šé‚£ç§è§‚å¿µï¼šé’±æ˜¯ç»™å¥³äººçœ‹çš„ï¼Œä¸æ˜¯ç»™å¥³äººèŠ±çš„ã€‚è¿™æ¬¡èŠå®Œä¹‹åå°±ç»“æŸäº†ï¼Œåˆå‡‰å‡‰ã€‚</li>
<li>95å¹´ï¼Œå¹¼å¸ˆã€‚åœ¨ä¸Šæµ·ç›¸äº²çš„ï¼Œé’è—¤ä¸Šæ‰¾çš„ï¼Œè§é¢åæ„Ÿè§‰éå¸¸æ¼‚äº®å•Šã€‚ä¸è¿‡æ€§æ ¼æ¯”è¾ƒå¼ºåŠ¿ï¼Œåˆšå¼€å§‹èŠçš„è¿˜æ˜¯å¼€å¿ƒçš„è¯é¢˜ï¼Œçªç„¶ç”»é£ä¸€è½¬ï¼Œå¥¹å°±å¼€å§‹åæ§½æ¨¡å¼ï¼Œåæ§½æ”¯æ•™çš„å±±é‡Œå°å­¦çš„é¢†å¯¼ç­‰ç­‰ï¼ŒååŠæ®µå…¨æ˜¯å¬å¥¹åæ§½ï¼Œæ²¡å†èŠç›¸äº²çš„è¯é¢˜äº†ã€‚å›å»ååˆèŠäº†å‡ å‘¨ï¼Œä½†æ˜¯å¹¼å¸ˆå¯èƒ½æ—¶é—´å¤ªç´§ï¼Œä¹Ÿå¯èƒ½å¥¹åŒæ—¶èŠçš„äººå¤ªå¤šï¼Œåé¢æƒ³å†çº¦è§é¢å°±æ²¡æ—¶é—´äº†ï¼Œäºæ˜¯å‡‰å‡‰</li>
<li>97å¹´ï¼Œäº’è”ç½‘æ•°æ®åˆ†æå¸ˆã€‚æ¥ä¸Šæµ·åç›¸äº²çš„ç¬¬ä¸€ä¸ªå¥³ç”Ÿï¼Œä¹Ÿæ˜¯éå¸¸æ¼‚äº®ï¼ŒåŠ ä¸Šå¥½å‹ï¼Œçœ‹äº†æˆ‘åŠ¨æ€åï¼Œè¯´éå¸¸å´‡æ‹œæŠ€æœ¯å¤§ä½¬ï¼ˆå¤šå†™åšå®¢è¿˜æ˜¯æœ‰å¥½å¤„çš„å˜›ï¼‰ï¼Œæƒ³è¯·æˆ‘åƒé¥­ã€‚äºæ˜¯çˆ½å¿«èµ´çº¦ï¼ŒæœŸé—´èŠåˆ†å¸ƒå¼ã€é«˜å¹¶å‘ç­‰ç­‰ï¼Œæœ€ååƒå®Œé¥­ç»“æŸçš„æ—¶å€™ï¼Œè¯´æ„Ÿè§‰èº«é«˜ä¸å¤Ÿ</li>
<li>00å¹´ï¼Œä¸»ä¸šæœºæ¢°è®¾è®¡ï¼Œå‰¯ä¸šè‡ªåª’ä½“ã€‚é‡åˆ°åŒè¡Œäº†ï¼ŒèŠå¤©è¯é¢˜ç‰¹åˆ«å¤šï¼Œæƒ…ç»ªä»·å€¼æ‹‰æ»¡ã€‚çº¦çº¿ä¸‹å»CJæ¼«å±•ç©ï¼Œè®©å¥¹æŠŠèº«ä»½è¯å·å‘æˆ‘æ¥ä¹°ç¥¨ï¼Œæœ¬æ¥è¿˜æƒ³ç€æ€ä¹ˆè§£é‡Šè¯´æ˜çš„ï¼Œä¸‹ä¸€ç§’å°±æŠŠèº«ä»½è¯å·å’Œæ‰‹æœºå·å‘æ¥äº†ï¼Œæ²¡æœ‰ä»»ä½•çŠ¹è±«ã€‚çº¦å¥½äº†æ—©ä¸Š9ç‚¹åŠå»ä¼šå±•ä¸­å¿ƒï¼Œæ²¡æƒ³åˆ°å¥¹æ—©æ—©åˆ°æˆ‘è¿™è¾¹æ¥ç­‰æˆ‘ä¸€èµ·è¿‡å»ï¼Œè¿é›¶é£Ÿå’Œæ°´éƒ½ä¹°å¥½äº†ã€‚é‚å¼€å¿ƒå‰å¾€ï¼Œå¦¹å­æ˜¯ç¬¬ä¸€æ¬¡é€›æ¼«å±•ï¼Œé€›çš„éå¸¸å¼€å¿ƒã€‚åªä¸è¿‡å›å»åè¿˜æ˜¯è¯´äº†æ€§æ ¼ä¸åˆï¼Œåªå¥½å½“æœ‹å‹äº†ã€‚åç»­è¿˜æ˜¯ä¿æŒè”ç³»ï¼Œå¶å°”è§é¢</li>
</ul>
<p>è¿™é‡Œåˆ—å‡ºä¸åŒå¹´é¾„æ®µçš„ç›¸äº²å¥³ç”Ÿï¼Œå…¶ä»–è¿˜æœ‰ä¸€äº›éƒ½æ˜¯è½¯ä»¶ä¸ŠåŒ¹é…äº†æ²¡è¯´è¯ï¼Œæˆ–è€…è¯´ä¸¤å¥è¯å°±ä¸ç»§ç»­èŠäº†çš„ã€‚ç»™å…„å¼Ÿä»¬åšä¸ªè´Ÿé¢æ•™æçš„å‚è€ƒå•Šï¼Œä»Šå¹´çš„ç›¸äº²å°±åˆ°æ­¤ä¸ºæ­¢ï¼Œæ˜å¹´å†è¯´å§ã€‚ã€‚ã€‚</p>
<h2 data-id="heading-12">6.2026ç›®æ ‡</h2>
<p>æœ€åä¸éƒ½å¾—å±•æœ›ä¸‹æœªæ¥å—ï¼Œ2026å¹´ä½ ä»¬åˆç»™è‡ªå·±åˆ¶å®šäº†å“ªäº›ç›®æ ‡å’Œè§„åˆ’å‘¢ï¼Œæˆ‘ç»™è‡ªå·±å®šä¸‹çš„ç›®æ ‡ï¼Œå¸Œæœ›æ˜å¹´éƒ½èƒ½åšåˆ°</p>
<ul>
<li>ç¥å±±è½¬å±±</li>
<li>æ¨±èŠ±å·¡ç¤¼</li>
<li>æ–°æ‰‹ä¸Šè·¯</li>
<li>æ°è€å¤–ç±³</li>
</ul>
<p>æœ€åï¼Œæ„Ÿå…´è¶£çš„æœ‹å‹å¯ä»¥å…³æ³¨æˆ‘çš„å…¬ä¼—å·:<strong>å·ç¦åŒå­¦</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[MyBatisæ—¥å¿—æ¨¡å—è¯¦è§£]]></title>    <link>https://juejin.cn/post/7590452143016771622</link>    <guid>https://juejin.cn/post/7590452143016771622</guid>    <pubDate>2026-01-03T09:08:19.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7590452143016771622" data-draft-id="7590503651115958322" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="MyBatisæ—¥å¿—æ¨¡å—è¯¦è§£"/> <meta itemprop="keywords" content="MyBatis"/> <meta itemprop="datePublished" content="2026-01-03T09:08:19.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é›¨ä¸­é£˜è¡çš„è®°å¿†"/> <meta itemprop="url" content="https://juejin.cn/user/694547077666606"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            MyBatisæ—¥å¿—æ¨¡å—è¯¦è§£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/694547077666606/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é›¨ä¸­é£˜è¡çš„è®°å¿†
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-03T09:08:19.000Z" title="Sat Jan 03 2026 09:08:19 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>ä½œä¸ºæŒä¹…å±‚æ¡†æ¶çš„ä½¼ä½¼è€…ï¼ŒMyBatisçš„æ—¥å¿—æ¨¡å—ä¸ºSQLè°ƒè¯•ã€æ€§èƒ½ä¼˜åŒ–æä¾›äº†å¼ºå¤§æ”¯æŒã€‚æœ¬æ–‡å°†å¸¦ä½ æ·±å…¥ç†è§£å…¶è®¾è®¡ç²¾é«“ä¸å®æˆ˜æŠ€å·§ã€‚</p>
</blockquote>
<h2 data-id="heading-0">ä¸€ã€æ•´ä½“æ¶æ„ï¼šæ—¥å¿—æ¨¡å—çš„æˆ˜ç•¥ä½ç½®</h2>
<p>åœ¨æ·±å…¥æ¢è®¨ä¹‹å‰ï¼Œè®©æˆ‘ä»¬å…ˆä»å®è§‚è§†è§’ç†è§£MyBatisçš„åˆ†å±‚æ¶æ„ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f6e674c197024d6f9435d89e6f9c2228~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768036099&amp;x-signature=9V53VHuzn71eO1CV%2BkAYk9Oe8bY%3D" alt="" loading="lazy"/></p>
<p>ä»æ¶æ„å›¾å¯ä»¥çœ‹å‡ºï¼Œæ—¥å¿—æ¨¡å—ä½äº<strong>åŸºç¡€æ”¯æ’‘å±‚</strong>ï¼Œå®ƒå°±åƒä¸€ä¸ªå¿ å®çš„è®°å½•å‘˜ï¼Œé»˜é»˜è®°å½•ç€ç³»ç»Ÿè¿è¡Œçš„æ¯ä¸€ä¸ªå…³é”®æ—¶åˆ»ã€‚</p>
<h2 data-id="heading-1">æ—¥å¿—æ¨¡å—çš„å…­å¤§æ ¸å¿ƒèŒè´£</h2>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-bullet">1.</span> è®°å½•SQLæ‰§è¡Œæ—¥å¿— - å®Œæ•´æ•è·æ‰§è¡Œçš„SQLè¯­å¥
<span class="hljs-bullet">2.</span> è®°å½•å‚æ•°æ—¥å¿— - è¿½è¸ªSQLå‚æ•°çš„ä¼ é€’è¿‡ç¨‹
<span class="hljs-bullet">3.</span> è®°å½•ç»“æœæ—¥å¿— - å¯é€‰çš„æŸ¥è¯¢ç»“æœè®°å½•
<span class="hljs-bullet">4.</span> è®°å½•æ€§èƒ½æ—¥å¿— - ç²¾å‡†ç»Ÿè®¡SQLæ‰§è¡Œè€—æ—¶
<span class="hljs-bullet">5.</span> è®°å½•å¼‚å¸¸æ—¥å¿— - è¯¦å°½çš„é”™è¯¯ä¿¡æ¯æ•è·
<span class="hljs-bullet">6.</span> é›†æˆæ—¥å¿—æ¡†æ¶ - æ— ç¼é€‚é…ä¸»æµæ—¥å¿—ç»„ä»¶
</code></pre>
<h2 data-id="heading-2">ä¸ºä»€ä¹ˆæ—¥å¿—å¦‚æ­¤é‡è¦ï¼Ÿ</h2>
<p>åœ¨å®é™…å¼€å‘ä¸­ï¼Œæ—¥å¿—æ‰®æ¼”ç€ä¸‰ä¸ªå…³é”®è§’è‰²ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-number">1</span>ã€å¼€å‘è°ƒè¯•é˜¶æ®µ
  <span class="hljs-number">1</span>ã€æŸ¥çœ‹å®é™…æ‰§è¡Œçš„<span class="hljs-keyword">SQL</span>è¯­å¥
  <span class="hljs-number">2</span>ã€æ£€æŸ¥å‚æ•°ç»‘å®šæ˜¯å¦æ­£ç¡®
  <span class="hljs-number">3</span>ã€å¿«é€Ÿæ’æŸ¥<span class="hljs-keyword">SQL</span>è¯­æ³•é”™è¯¯
<span class="hljs-number">2</span>ã€æ€§èƒ½ä¼˜åŒ–é˜¶æ®µ
  <span class="hljs-number">1</span>ã€è¯†åˆ«æ‰§è¡Œç¼“æ…¢çš„<span class="hljs-keyword">SQL</span>æŸ¥è¯¢
  <span class="hljs-number">2</span>ã€åˆ†æ<span class="hljs-keyword">SQL</span>æ‰§è¡Œé¢‘ç‡åˆ†å¸ƒ
  <span class="hljs-number">3</span>ã€æŒ‡å¯¼ç´¢å¼•ä¼˜åŒ–æ–¹å‘
<span class="hljs-number">3</span>ã€ç”Ÿäº§è¿ç»´é˜¶æ®µ
  <span class="hljs-number">1</span>ã€é—®é¢˜å¿«é€Ÿå®šä½ä¸è¿½è¸ª
  <span class="hljs-number">2</span>ã€æ•°æ®æ“ä½œè¡Œä¸ºå®¡è®¡
  <span class="hljs-number">3</span>ã€ä¸šåŠ¡æ•°æ®æ·±åº¦åˆ†æ
</code></pre>
<h2 data-id="heading-3">MyBatisæ—¥å¿—çš„äº”å¤§ç‰¹ç‚¹</h2>





























<table><thead><tr><th>ç‰¹æ€§</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>è‡ªåŠ¨é›†æˆ</td><td>æ™ºèƒ½æ£€æµ‹å¹¶ä½¿ç”¨é¡¹ç›®ä¸­çš„æ—¥å¿—æ¡†æ¶</td></tr><tr><td>å¤šæ¡†æ¶æ”¯æŒ</td><td>æ”¯æŒSLF4Jã€Log4jã€Log4j2ã€JDK Loggingç­‰</td></tr><tr><td>åˆ†çº§è®°å½•</td><td>æ”¯æŒDEBUGã€INFOã€WARNã€ERRORç­‰çº§åˆ«</td></tr><tr><td>æ€§èƒ½è€ƒè™‘</td><td>ä½¿ç”¨å»¶è¿ŸåŠ è½½ï¼Œé¿å…ä¸å¿…è¦çš„å­—ç¬¦ä¸²æ‹¼æ¥</td></tr><tr><td>JDBCæ—¥å¿—</td><td>ä¸“é—¨è®°å½•JDBCæ“ä½œçš„è¯¦ç»†æ—¥å¿—</td></tr></tbody></table>
<h2 data-id="heading-4">äºŒã€æ¥å£æ¶æ„ï¼šç»Ÿä¸€è€Œçµæ´»çš„è®¾è®¡</h2>
<p>MyBatisé‡‡ç”¨æ¥å£+é€‚é…å™¨çš„ç»å…¸è®¾è®¡æ¨¡å¼ï¼Œå®ç°äº†ä¸æ—¥å¿—æ¡†æ¶çš„è§£è€¦ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5ec980824a08499f841a162244c593b8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768036099&amp;x-signature=9mmX%2B6Xy8AZ2UxdtLFbOhURyiCw%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-5">æ ¸å¿ƒæ¥å£ï¼šLog</h2>
<p>MyBatiså®šä¹‰äº†ç®€æ´è€Œå¼ºå¤§çš„æ—¥å¿—æ¥å£ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-keyword">public</span> interface Log {
    <span class="hljs-comment">// æ˜¯å¦å¯ç”¨DEBUGçº§åˆ«</span>
    <span class="hljs-function"><span class="hljs-type">boolean</span> <span class="hljs-title">isDebugEnabled</span><span class="hljs-params">()</span></span>;

    <span class="hljs-comment">// æ˜¯å¦å¯ç”¨ERRORçº§åˆ«</span>
    <span class="hljs-function"><span class="hljs-type">boolean</span> <span class="hljs-title">isErrorEnabled</span><span class="hljs-params">()</span></span>;

    <span class="hljs-comment">// DEBUGçº§åˆ«æ—¥å¿—</span>
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">debug</span><span class="hljs-params">(<span class="hljs-type">String</span> s)</span></span>;

    <span class="hljs-comment">// ERRORçº§åˆ«æ—¥å¿—</span>
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">error</span><span class="hljs-params">(<span class="hljs-type">String</span> s)</span></span>;

    <span class="hljs-comment">// ERRORçº§åˆ«æ—¥å¿—ï¼ˆå¸¦å¼‚å¸¸ï¼‰</span>
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">error</span><span class="hljs-params">(<span class="hljs-type">String</span> s, Throwable e)</span></span>;

    <span class="hljs-comment">// WARNçº§åˆ«æ—¥å¿—ï¼ˆå¸¦å¼‚å¸¸ï¼‰</span>
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">warn</span><span class="hljs-params">(<span class="hljs-type">String</span> s, Throwable e)</span></span>;
}
</code></pre>
<p><strong>æ—¥å¿—æ¡†æ¶é€‚é…å™¨å®¶æ—</strong>MyBatisé€šè¿‡é€‚é…å™¨æ¨¡å¼æ”¯æŒå¤šç§ä¸»æµæ—¥å¿—æ¡†æ¶ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e78b04ff596642149f66c9b6fea98c45~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768036099&amp;x-signature=yvum4mm5MytERF0YrBWN9zoEivY%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-6">Slf4jImplå®ç°ç¤ºä¾‹</h2>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Slf4jImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Log</span> {
    <span class="hljs-keyword">private</span> final <span class="hljs-title class_">Logger</span> log;

    <span class="hljs-keyword">public</span> <span class="hljs-title class_">Slf4</span>jImpl(<span class="hljs-title class_">String</span> clazz) {
        <span class="hljs-comment">// é€šè¿‡SLF4Jå·¥å‚åˆ›å»ºLogger</span>
        log = <span class="hljs-title class_">LoggerFactory</span>.<span class="hljs-title function_">getLogger</span>(clazz);
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">boolean</span> <span class="hljs-title function_">isDebugEnabled</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">return</span> log.<span class="hljs-title function_">isDebugEnabled</span>();
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">debug</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> s</span>) {
        log.<span class="hljs-title function_">debug</span>(s);
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">error</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> s, Throwable e</span>) {
        log.<span class="hljs-title function_">error</span>(s, e);
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">warn</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> s, Throwable e</span>) {
        log.<span class="hljs-title function_">warn</span>(s, e);
    }
}
</code></pre>
<h2 data-id="heading-7">LogFactoryå·¥å‚ç±»ï¼šæ™ºèƒ½é€‰æ‹©æœ€ä½³æ—¥å¿—æ¡†æ¶</h2>
<p>LogFactoryè´Ÿè´£æŒ‰ç…§ä¼˜å…ˆçº§è‡ªåŠ¨æ£€æµ‹å¹¶åˆ›å»ºåˆé€‚çš„Logå®ç°ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LogFactory</span> </span>{
    <span class="hljs-keyword">private</span> <span class="hljs-built_in">static</span> Constructor<span class="hljs-meta">&lt;?</span> <span class="hljs-keyword">extends</span> Log&gt; logConstructor;

    <span class="hljs-built_in">static</span> {
        <span class="hljs-comment">// æŒ‰ä¼˜å…ˆçº§ä¾æ¬¡å°è¯•åŠ è½½æ—¥å¿—æ¡†æ¶</span>
        <span class="hljs-comment">// 1. ä¼˜å…ˆå°è¯•SLF4J</span>
        <span class="hljs-title function_ invoke__">tryImplementation</span>(Slf4jImpl.<span class="hljs-keyword">class</span>, <span class="hljs-string">"SLF4J"</span>);
        <span class="hljs-comment">// 2. ç„¶åå°è¯•Log4j2</span>
        <span class="hljs-title function_ invoke__">tryImplementation</span>(Log4j2Impl.<span class="hljs-keyword">class</span>, <span class="hljs-string">"Log4j 2"</span>);
        <span class="hljs-comment">// 3. ç»§ç»­å°è¯•Log4j</span>
        <span class="hljs-title function_ invoke__">tryImplementation</span>(Log4jImpl.<span class="hljs-keyword">class</span>, <span class="hljs-string">"Log4j"</span>);
        <span class="hljs-comment">// 4. å°è¯•JDKå†…ç½®æ—¥å¿—</span>
        <span class="hljs-title function_ invoke__">tryImplementation</span>(Jdk14LoggingImpl.<span class="hljs-keyword">class</span>, <span class="hljs-string">"JDK logging"</span>);
        <span class="hljs-comment">// 5. é™çº§åˆ°æ ‡å‡†è¾“å‡º</span>
        <span class="hljs-title function_ invoke__">tryImplementation</span>(StdOutImpl.<span class="hljs-keyword">class</span>, <span class="hljs-string">"stdout"</span>);
        <span class="hljs-comment">// 6. æœ€åä½¿ç”¨ç©ºå®ç°</span>
        <span class="hljs-title function_ invoke__">tryImplementation</span>(NoOpImpl.<span class="hljs-keyword">class</span>, <span class="hljs-string">"noop"</span>);
    }

    <span class="hljs-comment">// è·å–Logå®ä¾‹</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">static</span> Log <span class="hljs-title function_ invoke__">getLog</span>(Class&lt;?&gt; clazz) {
        <span class="hljs-keyword">return</span> <span class="hljs-title function_ invoke__">getLog</span>(clazz.<span class="hljs-title function_ invoke__">getName</span>());
    }

    <span class="hljs-keyword">public</span> <span class="hljs-built_in">static</span> Log <span class="hljs-title function_ invoke__">getLog</span>(String logger) {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">return</span> logConstructor.<span class="hljs-title function_ invoke__">newInstance</span>(logger);
        } <span class="hljs-keyword">catch</span> (<span class="hljs-built_in">Throwable</span> t) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">RuntimeException</span>(
                <span class="hljs-string">"Error creating logger for "</span> + logger, t);
        }
    }

    <span class="hljs-comment">// æ”¯æŒè‡ªå®šä¹‰æ—¥å¿—å®ç°</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">static</span> synchronized <span class="hljs-keyword">void</span> <span class="hljs-title function_ invoke__">useCustomLogging</span>(
        Class&lt;? <span class="hljs-keyword">extends</span> Log&gt; clazz) {
        <span class="hljs-title function_ invoke__">setImplementation</span>(clazz);
    }
}
</code></pre>
<h2 data-id="heading-8">ä¸‰ã€æ—¥å¿—é…ç½®ï¼šçµæ´»å¤šæ ·çš„é…ç½®æ–¹å¼</h2>
<p>MyBatisæä¾›äº†å¤šç§é…ç½®æ–¹å¼ï¼Œæ»¡è¶³ä¸åŒåœºæ™¯éœ€æ±‚ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7ddd4bb5b7234b269aa823981fe198d0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768036099&amp;x-signature=VSgedxv7z3scvAIPAVQ1I%2FuzxOY%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-9">æ–¹å¼1ï¼šmybatis-config.xmlé…ç½®</h2>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">settings</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- å¯é€‰ï¼šæ˜¾å¼æŒ‡å®šæ—¥å¿—å®ç° --&gt;</span>
        <span class="hljs-comment">&lt;!-- &lt;setting name="logImpl" value="SLF4J"/&gt; --&gt;</span>
        <span class="hljs-comment">&lt;!-- &lt;setting name="logImpl" value="LOG4J2"/&gt; --&gt;</span>
        <span class="hljs-comment">&lt;!-- &lt;setting name="logImpl" value="STDOUT_LOGGING"/&gt; --&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">settings</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span>
</code></pre>
<h2 data-id="heading-10">æ–¹å¼2ï¼šLog4j2è¯¦ç»†é…ç½®</h2>
<p><strong>log4j2.xmlï¼š</strong></p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"UTF-8"</span>?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">Configuration</span> <span class="hljs-attr">status</span>=<span class="hljs-string">"WARN"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">Appenders</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- æ§åˆ¶å°è¾“å‡º --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Console</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"Console"</span> <span class="hljs-attr">target</span>=<span class="hljs-string">"SYSTEM_OUT"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">PatternLayout</span> 
                <span class="hljs-attr">pattern</span>=<span class="hljs-string">"%d{HH:mm:ss.SSS} [%t] %-5level %logger{36} - %msg%n"</span>/&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">Console</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- æ–‡ä»¶è¾“å‡ºï¼ˆæ»šåŠ¨ç­–ç•¥ï¼‰ --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">RollingFile</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"RollingFile"</span> 
                     <span class="hljs-attr">fileName</span>=<span class="hljs-string">"logs/mybatis.log"</span>
                     <span class="hljs-attr">filePattern</span>=<span class="hljs-string">"logs/mybatis-%d{yyyy-MM-dd}-%i.log.gz"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">PatternLayout</span> 
                <span class="hljs-attr">pattern</span>=<span class="hljs-string">"%d{yyyy-MM-dd HH:mm:ss.SSS} [%t] %-5level %logger{36} - %msg%n"</span>/&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">Policies</span>&gt;</span>
                <span class="hljs-comment">&lt;!-- æ¯å¤©æ»šåŠ¨ --&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">TimeBasedTriggeringPolicy</span> <span class="hljs-attr">interval</span>=<span class="hljs-string">"1"</span>/&gt;</span>
                <span class="hljs-comment">&lt;!-- å•æ–‡ä»¶æœ€å¤§100MB --&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">SizeBasedTriggeringPolicy</span> <span class="hljs-attr">size</span>=<span class="hljs-string">"100 MB"</span>/&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">Policies</span>&gt;</span>
            <span class="hljs-comment">&lt;!-- æœ€å¤šä¿ç•™30å¤© --&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">DefaultRolloverStrategy</span> <span class="hljs-attr">max</span>=<span class="hljs-string">"30"</span>/&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">RollingFile</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">Appenders</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">Loggers</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- MyBatisæ ¸å¿ƒæ—¥å¿— --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Logger</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"org.apache.ibatis"</span> <span class="hljs-attr">level</span>=<span class="hljs-string">"DEBUG"</span> <span class="hljs-attr">additivity</span>=<span class="hljs-string">"false"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">AppenderRef</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"Console"</span>/&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">AppenderRef</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"RollingFile"</span>/&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">Logger</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- SQLè¯­å¥æ—¥å¿— --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Logger</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"org.apache.ibatis.jdbc.SQL"</span> 
                <span class="hljs-attr">level</span>=<span class="hljs-string">"DEBUG"</span> <span class="hljs-attr">additivity</span>=<span class="hljs-string">"false"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">AppenderRef</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"Console"</span>/&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">Logger</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- Root Logger --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Root</span> <span class="hljs-attr">level</span>=<span class="hljs-string">"INFO"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">AppenderRef</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"Console"</span>/&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">AppenderRef</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"RollingFile"</span>/&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">Root</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">Loggers</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">Configuration</span>&gt;</span>
</code></pre>
<h2 data-id="heading-11">æ–¹å¼3ï¼šLogbacké…ç½®</h2>
<p><strong>logback.xmlï¼š</strong></p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"UTF-8"</span>?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- æ§åˆ¶å°è¾“å‡º --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">appender</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"CONSOLE"</span> 
              <span class="hljs-attr">class</span>=<span class="hljs-string">"ch.qos.logback.core.ConsoleAppender"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">encoder</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">pattern</span>&gt;</span>%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n<span class="hljs-tag">&lt;/<span class="hljs-name">pattern</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">encoder</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">appender</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- æ–‡ä»¶è¾“å‡º --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">appender</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"FILE"</span> 
              <span class="hljs-attr">class</span>=<span class="hljs-string">"ch.qos.logback.core.rolling.RollingFileAppender"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">file</span>&gt;</span>logs/mybatis.log<span class="hljs-tag">&lt;/<span class="hljs-name">file</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">rollingPolicy</span> 
            <span class="hljs-attr">class</span>=<span class="hljs-string">"ch.qos.logback.core.rolling.TimeBasedRollingPolicy"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">fileNamePattern</span>&gt;</span>logs/mybatis-%d{yyyy-MM-dd}.log<span class="hljs-tag">&lt;/<span class="hljs-name">fileNamePattern</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">maxHistory</span>&gt;</span>30<span class="hljs-tag">&lt;/<span class="hljs-name">maxHistory</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">rollingPolicy</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">encoder</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">pattern</span>&gt;</span>%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n<span class="hljs-tag">&lt;/<span class="hljs-name">pattern</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">encoder</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">appender</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- MyBatisæ—¥å¿—é…ç½® --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">logger</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"org.apache.ibatis"</span> <span class="hljs-attr">level</span>=<span class="hljs-string">"DEBUG"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">logger</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"java.sql.Connection"</span> <span class="hljs-attr">level</span>=<span class="hljs-string">"DEBUG"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">logger</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"java.sql.Statement"</span> <span class="hljs-attr">level</span>=<span class="hljs-string">"DEBUG"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">logger</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"java.sql.PreparedStatement"</span> <span class="hljs-attr">level</span>=<span class="hljs-string">"DEBUG"</span>/&gt;</span>

    <span class="hljs-comment">&lt;!-- Rooté…ç½® --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">root</span> <span class="hljs-attr">level</span>=<span class="hljs-string">"INFO"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">appender-ref</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"CONSOLE"</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">appender-ref</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"FILE"</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">root</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span>
</code></pre>
<h2 data-id="heading-12">æ–¹å¼4ï¼šSpring Booté…ç½®</h2>
<p><strong>application.ymlï¼š</strong></p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># æ—¥å¿—é…ç½®</span>
<span class="hljs-attr">logging:</span>
  <span class="hljs-attr">level:</span>
    <span class="hljs-comment"># MyBatis SQLæ—¥å¿—</span>
    <span class="hljs-attr">org.apache.ibatis:</span> <span class="hljs-string">DEBUG</span>
    <span class="hljs-attr">java.sql.Connection:</span> <span class="hljs-string">DEBUG</span>
    <span class="hljs-attr">java.sql.Statement:</span> <span class="hljs-string">DEBUG</span>
    <span class="hljs-attr">java.sql.PreparedStatement:</span> <span class="hljs-string">DEBUG</span>
    <span class="hljs-attr">java.sql.ResultSet:</span> <span class="hljs-string">WARN</span>
  <span class="hljs-comment"># æ—¥å¿—æ–‡ä»¶é…ç½®</span>
  <span class="hljs-attr">file:</span>
    <span class="hljs-attr">path:</span> <span class="hljs-string">logs</span>
    <span class="hljs-attr">name:</span> <span class="hljs-string">myapp.log</span>
    <span class="hljs-attr">max-size:</span> <span class="hljs-string">100MB</span>
    <span class="hljs-attr">max-history:</span> <span class="hljs-number">30</span>
  <span class="hljs-comment"># æ—¥å¿—æ ¼å¼</span>
  <span class="hljs-attr">pattern:</span>
    <span class="hljs-attr">console:</span> <span class="hljs-string">"%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n"</span>
    <span class="hljs-attr">file:</span> <span class="hljs-string">"%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n"</span>
</code></pre>
<h2 data-id="heading-13">å››ã€JDBCæ—¥å¿—ï¼šç»†ç²’åº¦çš„æ“ä½œè¿½è¸ª</h2>
<p><strong>MyBatisæä¾›äº†ä¸“é—¨çš„JDBCæ—¥å¿—è®°å½•æœºåˆ¶ï¼Œå¯ä»¥è¿½è¸ªæ¯ä¸€ä¸ªJDBCæ“ä½œçš„ç»†èŠ‚ã€‚</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5da0ae4cc6eb4e73bbdba0f3458070d5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768036099&amp;x-signature=jvuOpcBqFGp8JFVPIcsLjt8Q8Gg%3D" alt="" loading="lazy"/></p>
<p><strong>JDBCæ—¥å¿—è®°å½•å†…å®¹</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/15bc48f40d6547979a9ebcd35f24d70f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768036099&amp;x-signature=B9h84ioMds2D81cMCIZGZ9UBw2c%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-14">BaseJdbcLoggeråŸºç¡€ç±»</h2>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BaseJdbcLogger</span> {
    <span class="hljs-comment">// æ—¥å¿—å¯¹è±¡</span>
    <span class="hljs-keyword">protected</span> Log statementLog;
    <span class="hljs-keyword">protected</span> Log connectionLog;

    <span class="hljs-comment">// è°ƒè¯•å¼€å…³</span>
    <span class="hljs-keyword">protected</span> boolean isDebugEnabled;

    <span class="hljs-comment">// æ…¢æŸ¥è¯¢é˜ˆå€¼ï¼ˆæ¯«ç§’ï¼‰</span>
    <span class="hljs-keyword">protected</span> int slowQueryThreshold;

    <span class="hljs-keyword">public</span> BaseJdbcLogger(Log log, int queryThreshold) {
        <span class="hljs-keyword">this</span>.statementLog = log;
        <span class="hljs-keyword">this</span>.connectionLog = log;
        <span class="hljs-keyword">this</span>.isDebugEnabled = log.isDebugEnabled();
        <span class="hljs-keyword">this</span>.slowQueryThreshold = queryThreshold;
    }

    <span class="hljs-comment">// è®°å½•SQLæ‰§è¡Œ</span>
    <span class="hljs-keyword">protected</span> void debug(String s, boolean isSql) {
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.isDebugEnabled) {
            <span class="hljs-keyword">this</span>.statementLog.debug(s);
        }
    }

    <span class="hljs-comment">// è®°å½•è¿æ¥åˆ›å»º</span>
    <span class="hljs-keyword">protected</span> void connectionCreated(Connection conn) {
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.connectionLog.isDebugEnabled()) {
            <span class="hljs-keyword">this</span>.connectionLog.debug(<span class="hljs-string">"==&gt;  Opening JDBC Connection"</span>);
        }
    }

    <span class="hljs-comment">// è®°å½•è¿æ¥å…³é—­</span>
    <span class="hljs-keyword">protected</span> void connectionClosed(Connection conn) {
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.connectionLog.isDebugEnabled()) {
            <span class="hljs-keyword">this</span>.connectionLog.debug(<span class="hljs-string">"&lt;==  Closing JDBC Connection"</span>);
        }
    }
}
</code></pre>
<h2 data-id="heading-15">ConnectionLoggerè¿æ¥æ—¥å¿—</h2>
<pre><code class="hljs language-scala" lang="scala">public <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ConnectionLogger</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">BaseJdbcLogger</span> </span>
    implements <span class="hljs-type">InvocationHandler</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">Connection</span> connection;

    public <span class="hljs-type">ConnectionLogger</span>(<span class="hljs-type">Connection</span> conn, <span class="hljs-type">Log</span> log, int queryThreshold) {
        <span class="hljs-keyword">super</span>(log, queryThreshold);
        <span class="hljs-keyword">this</span>.connection = conn;
    }

    <span class="hljs-meta">@Override</span>
    public <span class="hljs-type">Object</span> invoke(<span class="hljs-type">Object</span> proxy, <span class="hljs-type">Method</span> method, <span class="hljs-type">Object</span>[] args) 
        <span class="hljs-keyword">throws</span> <span class="hljs-type">Throwable</span> {
        <span class="hljs-type">String</span> methodName = method.getName();

        <span class="hljs-comment">// è®°å½•PreparedStatementåˆ›å»º</span>
        <span class="hljs-keyword">if</span> (<span class="hljs-string">"prepareStatement"</span>.equals(methodName) || 
            <span class="hljs-string">"prepareCall"</span>.equals(methodName)) {
            <span class="hljs-keyword">if</span> (isDebugEnabled()) {
                debug(<span class="hljs-string">"Preparing: "</span> + 
                    removeBreakingWhitespace((<span class="hljs-type">String</span>) args[<span class="hljs-number">0</span>]), <span class="hljs-literal">true</span>);
            }
        }

        <span class="hljs-comment">// è®°å½•è¿æ¥å…³é—­</span>
        <span class="hljs-keyword">if</span> (<span class="hljs-string">"close"</span>.equals(methodName)) {
            connectionClosed(connection);
            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
        }

        <span class="hljs-comment">// æ‰§è¡ŒåŸæ–¹æ³•</span>
        <span class="hljs-keyword">return</span> method.invoke(connection, args);
    }
}
</code></pre>
<h2 data-id="heading-16">PreparedStatementLoggerè¯­å¥æ—¥å¿—</h2>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PreparedStatementLogger</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">BaseJdbcLogger</span> 
    <span class="hljs-keyword">implements</span> <span class="hljs-title class_">InvocationHandler</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> PreparedStatement statement;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> String sql;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Object[] parameterValues;

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">invoke</span><span class="hljs-params">(Object proxy, Method method, Object[] args)</span> 
        <span class="hljs-keyword">throws</span> Throwable {
        <span class="hljs-type">String</span> <span class="hljs-variable">methodName</span> <span class="hljs-operator">=</span> method.getName();

        <span class="hljs-comment">// è®°å½•å‚æ•°è®¾ç½®</span>
        <span class="hljs-keyword">if</span> (<span class="hljs-string">"setString"</span>.equals(methodName) || 
            <span class="hljs-string">"setInt"</span>.equals(methodName) ||
            <span class="hljs-string">"setLong"</span>.equals(methodName)) {
            <span class="hljs-keyword">if</span> (args.length == <span class="hljs-number">2</span>) {
                <span class="hljs-type">int</span> <span class="hljs-variable">paramIndex</span> <span class="hljs-operator">=</span> (Integer) args[<span class="hljs-number">0</span>];
                <span class="hljs-type">Object</span> <span class="hljs-variable">paramValue</span> <span class="hljs-operator">=</span> args[<span class="hljs-number">1</span>];
                parameterValues[paramIndex - <span class="hljs-number">1</span>] = paramValue;

                <span class="hljs-keyword">if</span> (isDebugEnabled) {
                    debug(<span class="hljs-string">"Parameters: "</span> + paramIndex + 
                        <span class="hljs-string">" =&gt; "</span> + paramValue, <span class="hljs-literal">true</span>);
                }
            }
        }

        <span class="hljs-comment">// è®°å½•SQLæ‰§è¡Œ</span>
        <span class="hljs-keyword">if</span> (<span class="hljs-string">"execute"</span>.equals(methodName) || 
            <span class="hljs-string">"executeUpdate"</span>.equals(methodName) ||
            <span class="hljs-string">"executeQuery"</span>.equals(methodName)) {

            <span class="hljs-keyword">if</span> (isDebugEnabled) {
                debug(<span class="hljs-string">"==&gt;  Executing: "</span> + sql, <span class="hljs-literal">true</span>);
                debug(<span class="hljs-string">"==&gt; Parameters: "</span> + 
                    getParameterString(), <span class="hljs-literal">true</span>);
            }

            <span class="hljs-comment">// è®¡æ—¶æ‰§è¡Œ</span>
            <span class="hljs-type">long</span> <span class="hljs-variable">start</span> <span class="hljs-operator">=</span> System.currentTimeMillis();
            <span class="hljs-type">Object</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> method.invoke(statement, args);
            <span class="hljs-type">long</span> <span class="hljs-variable">cost</span> <span class="hljs-operator">=</span> System.currentTimeMillis() - start;

            <span class="hljs-keyword">if</span> (isDebugEnabled) {
                debug(<span class="hljs-string">"&lt;==  Total: "</span> + cost + <span class="hljs-string">" ms"</span>, <span class="hljs-literal">true</span>);
            }

            <span class="hljs-comment">// æ…¢æŸ¥è¯¢å‘Šè­¦</span>
            <span class="hljs-keyword">if</span> (slowQueryThreshold &gt; <span class="hljs-number">0</span> &amp;&amp; cost &gt; slowQueryThreshold) {
                connectionLog.warn(<span class="hljs-string">"Slow query detected: "</span> + 
                    cost + <span class="hljs-string">" ms"</span>);
            }

            <span class="hljs-keyword">return</span> result;
        }

        <span class="hljs-keyword">return</span> method.invoke(statement, args);
    }

    <span class="hljs-keyword">private</span> String <span class="hljs-title function_">getParameterString</span><span class="hljs-params">()</span> {
        <span class="hljs-type">StringBuilder</span> <span class="hljs-variable">sb</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuilder</span>();
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; parameterValues.length; i++) {
            <span class="hljs-keyword">if</span> (i &gt; <span class="hljs-number">0</span>) sb.append(<span class="hljs-string">", "</span>);
            sb.append(i + <span class="hljs-number">1</span>).append(<span class="hljs-string">" =&gt; "</span>).append(parameterValues[i]);
        }
        <span class="hljs-keyword">return</span> sb.toString();
    }
}
</code></pre>
<h2 data-id="heading-17">ResultSetLoggerç»“æœé›†æ—¥å¿—</h2>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ResultSetLogger</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">BaseJdbcLogger</span> 
    <span class="hljs-keyword">implements</span> <span class="hljs-title class_">InvocationHandler</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> ResultSet resultSet;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> List&lt;String&gt; columnNames = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> List&lt;String&gt; columnValues = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">invoke</span><span class="hljs-params">(Object proxy, Method method, Object[] args)</span> 
        <span class="hljs-keyword">throws</span> Throwable {
        <span class="hljs-type">String</span> <span class="hljs-variable">methodName</span> <span class="hljs-operator">=</span> method.getName();
        <span class="hljs-comment">// è®°å½•åˆ—å</span>
        <span class="hljs-keyword">if</span> (<span class="hljs-string">"next"</span>.equals(methodName)) {
            <span class="hljs-keyword">if</span> (columnNames.isEmpty()) {
                <span class="hljs-type">ResultSetMetaData</span> <span class="hljs-variable">metaData</span> <span class="hljs-operator">=</span> resultSet.getMetaData();
                <span class="hljs-type">int</span> <span class="hljs-variable">columnCount</span> <span class="hljs-operator">=</span> metaData.getColumnCount();
                <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= columnCount; i++) {
                    columnNames.add(metaData.getColumnName(i));
                }
            }
        }
        <span class="hljs-comment">// è®°å½•ç»“æœå€¼</span>
        <span class="hljs-keyword">if</span> (<span class="hljs-string">"getString"</span>.equals(methodName) || 
            <span class="hljs-string">"getInt"</span>.equals(methodName) ||
            <span class="hljs-string">"getObject"</span>.equals(methodName)) {
            <span class="hljs-type">Object</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> method.invoke(resultSet, args);
            <span class="hljs-keyword">if</span> (isDebugEnabled &amp;&amp; result != <span class="hljs-literal">null</span>) {
                <span class="hljs-type">String</span> <span class="hljs-variable">columnName</span> <span class="hljs-operator">=</span> columnNames.isEmpty() ? 
                    <span class="hljs-string">"?"</span> : columnNames.get(columnValues.size());
                columnValues.add(columnName + <span class="hljs-string">" = "</span> + result);
            }
            <span class="hljs-keyword">return</span> result;
        }
        <span class="hljs-comment">// è®°å½•ç»“æœé›†å…³é—­</span>
        <span class="hljs-keyword">if</span> (<span class="hljs-string">"close"</span>.equals(methodName)) {
            <span class="hljs-keyword">if</span> (isDebugEnabled &amp;&amp; !columnValues.isEmpty()) {
                debug(<span class="hljs-string">"&lt;==    Columns: "</span> + columnNames, <span class="hljs-literal">true</span>);
                debug(<span class="hljs-string">"&lt;==        Row: "</span> + columnValues, <span class="hljs-literal">true</span>);
            }
            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
        }
        <span class="hljs-keyword">return</span> method.invoke(resultSet, args);
    }
}
</code></pre>
<h2 data-id="heading-18">äº”ã€æ—¥å¿—é€‚é…å™¨ï¼šä¼˜é›…çš„æ¡†æ¶é›†æˆ</h2>
<h2 data-id="heading-19">MyBatisé€šè¿‡é€‚é…å™¨æ¨¡å¼å®ç°äº†ä¸å„ç§æ—¥å¿—æ¡†æ¶çš„æ— ç¼é›†æˆã€‚</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2a4b1e8cfcd842c8b3780da146c9054b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768036099&amp;x-signature=aoe60Wez%2BnP3zk2dpXgpvsuVKU8%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-20">æ—¥å¿—é€‚é…å™¨çš„å·¥ä½œæµç¨‹</h2>
<pre><code class="hljs language-markdown" lang="markdown">MyBatis Logæ¥å£
<span class="hljs-code">    â†“
æ—¥å¿—é€‚é…å™¨ (Log4j2Impl)
    â†“
Log4j2 Logger
    â†“
æ—¥å¿—è¾“å‡ºï¼ˆæ§åˆ¶å°/æ–‡ä»¶ï¼‰
</span></code></pre>
<h2 data-id="heading-21">æ—¥å¿—è¾“å‡ºï¼ˆæ§åˆ¶å°/æ–‡ä»¶ï¼‰</h2>
<p>LogFactoryæŒ‰ç…§ä¼˜å…ˆçº§è‡ªåŠ¨æ£€æµ‹å¹¶é€‰æ‹©æ—¥å¿—æ¡†æ¶ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-bullet">1.</span> SLF4J (ä¼˜å…ˆçº§æœ€é«˜)
<span class="hljs-bullet">2.</span> Log4j2
<span class="hljs-bullet">3.</span> Log4j
<span class="hljs-bullet">4.</span> JDK Logging
<span class="hljs-bullet">5.</span> STDOUT (æ ‡å‡†è¾“å‡º)
<span class="hljs-bullet">6.</span> NOOP (æ— æ—¥å¿—
</code></pre>
<p><strong>è‡ªå®šä¹‰æ—¥å¿—é€‚é…å™¨</strong></p>
<p>å¦‚æœéœ€è¦ä½¿ç”¨è‡ªå®šä¹‰æ—¥å¿—æ¡†æ¶ï¼Œå¯ä»¥è½»æ¾æ‰©å±•ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CustomLog</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Log</span> {
    <span class="hljs-keyword">private</span> final <span class="hljs-title class_">CustomLogger</span> logger;

    <span class="hljs-keyword">public</span> <span class="hljs-title class_">CustomLog</span>(<span class="hljs-title class_">String</span> clazz) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">logger</span> = <span class="hljs-title class_">CustomLoggerFactory</span>.<span class="hljs-title function_">getLogger</span>(clazz);
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">boolean</span> <span class="hljs-title function_">isDebugEnabled</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">return</span> logger.<span class="hljs-title function_">isDebugEnabled</span>();
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">debug</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> s</span>) {
        logger.<span class="hljs-title function_">debug</span>(s);
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">error</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> s, Throwable e</span>) {
        logger.<span class="hljs-title function_">error</span>(s, e);
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">warn</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> s, Throwable e</span>) {
        logger.<span class="hljs-title function_">warn</span>(s, e);
    }
}

<span class="hljs-comment">// ä½¿ç”¨è‡ªå®šä¹‰æ—¥å¿—</span>
<span class="hljs-title class_">LogFactory</span>.<span class="hljs-title function_">useCustomLogging</span>(<span class="hljs-title class_">CustomLog</span>.<span class="hljs-property">class</span>);
</code></pre>
<h2 data-id="heading-22">ä¸»æµæ—¥å¿—æ¡†æ¶å¯¹æ¯”</h2>









































<table><thead><tr><th>æ—¥å¿—æ¡†æ¶</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>SLF4J</td><td>ç»Ÿä¸€æ—¥å¿—é—¨é¢æ€§èƒ½ä¼˜ç§€</td><td>éœ€è¦ç»‘å®šå®ç°</td><td>å¤§å‹é¡¹ç›®</td></tr><tr><td>Log4j2</td><td>æ€§èƒ½æœ€ä½³åŠŸèƒ½å¼ºå¤§</td><td>é…ç½®ç›¸å¯¹å¤æ‚</td><td>é«˜å¹¶å‘ç³»ç»Ÿ</td></tr><tr><td>Log4j</td><td>æˆç†Ÿç¨³å®šç¤¾åŒºæ´»è·ƒ</td><td>æ€§èƒ½ä¸€èˆ¬</td><td>è€é¡¹ç›®ç»´æŠ¤</td></tr><tr><td>JDK Logging</td><td>æ— éœ€é¢å¤–ä¾èµ–ç®€å•è½»é‡</td><td>åŠŸèƒ½æœ‰é™</td><td>ç®€å•é¡¹ç›®</td></tr><tr><td>STDOUT</td><td>é…ç½®ç®€å•å³å¼€å³ç”¨</td><td>æ— æ ¼å¼åŒ–ä¸å¯é…ç½®</td><td>å¼€å‘æµ‹è¯•</td></tr></tbody></table>
<h2 data-id="heading-23">å…­ã€å®æˆ˜åº”ç”¨ï¼šæ—¥å¿—åœ¨å¼€å‘ä¸­çš„è¿ç”¨</h2>
<p>è®©æˆ‘ä»¬é€šè¿‡å®é™…åœºæ™¯çœ‹çœ‹æ—¥å¿—å¦‚ä½•å¸®åŠ©æˆ‘ä»¬è§£å†³é—®é¢˜ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/26edd45c03754ffab9a62d69e79144ba~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768036099&amp;x-signature=pZ3bRAdX6da0Dp1Hu98O6pylXYM%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-24">åœºæ™¯1ï¼šSQLè°ƒè¯•æ—¥å¿—</h2>
<p>è®°å½•å®Œæ•´çš„SQLè¯­å¥å’Œå‚æ•°ï¼Œå¿«é€Ÿå®šä½é—®é¢˜ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-operator">/</span><span class="hljs-operator">/</span> æ‰§è¡ŒæŸ¥è¯¢
<span class="hljs-keyword">User</span> <span class="hljs-keyword">user</span> <span class="hljs-operator">=</span> userMapper.selectById(<span class="hljs-number">1</span>L);

<span class="hljs-operator">/</span><span class="hljs-operator">/</span> æ§åˆ¶å°è¾“å‡ºï¼š
<span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">&gt;</span>  Preparing: <span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> t_user <span class="hljs-keyword">WHERE</span> id <span class="hljs-operator">=</span> ?
<span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">&gt;</span> Parameters: <span class="hljs-number">1</span>(<span class="hljs-type">Integer</span>)
<span class="hljs-operator">&lt;=</span><span class="hljs-operator">=</span>    Columns: id, name, email, age, create_time
<span class="hljs-operator">&lt;=</span><span class="hljs-operator">=</span>        <span class="hljs-type">Row</span>: <span class="hljs-number">1</span>, å¼ ä¸‰, zhangsan<span class="hljs-variable">@example</span>.com, <span class="hljs-number">25</span>, <span class="hljs-number">2024</span><span class="hljs-number">-01</span><span class="hljs-number">-01</span> <span class="hljs-number">10</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>
<span class="hljs-operator">&lt;=</span><span class="hljs-operator">=</span>  Total: <span class="hljs-number">15</span> ms
</code></pre>
<h2 data-id="heading-25">åœºæ™¯2ï¼šæ€§èƒ½ç›‘æ§æ—¥å¿—</h2>
<p>è¯†åˆ«æ…¢æŸ¥è¯¢ï¼Œä¼˜åŒ–ç³»ç»Ÿæ€§èƒ½ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Override</span>
<span class="hljs-keyword">public</span> Object <span class="hljs-title function_">query</span><span class="hljs-params">(...)</span> <span class="hljs-keyword">throws</span> SQLException {
    <span class="hljs-type">long</span> <span class="hljs-variable">start</span> <span class="hljs-operator">=</span> System.currentTimeMillis();

    <span class="hljs-keyword">try</span> {
        <span class="hljs-type">Object</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> method.invoke(target, args);
        <span class="hljs-keyword">return</span> result;
    } <span class="hljs-keyword">finally</span> {
        <span class="hljs-type">long</span> <span class="hljs-variable">cost</span> <span class="hljs-operator">=</span> System.currentTimeMillis() - start;

        <span class="hljs-comment">// æ…¢æŸ¥è¯¢å‘Šè­¦</span>
        <span class="hljs-keyword">if</span> (cost &gt; slowQueryThreshold) {
            logger.warn(<span class="hljs-string">"Slow query: {} ms - SQL: {}"</span>, 
                cost, sql);
        }

        <span class="hljs-keyword">if</span> (isDebugEnabled) {
            logger.debug(<span class="hljs-string">"Query cost: {} ms"</span>, cost);
        }
    }
}
</code></pre>
<h2 data-id="heading-26">åœºæ™¯3ï¼šå‚æ•°æ—¥å¿—</h2>
<p>æ£€æŸ¥å‚æ•°ç»‘å®šæ˜¯å¦æ­£ç¡®ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-operator">/</span><span class="hljs-operator">/</span> æŸ¥è¯¢ç”¨æˆ·
List<span class="hljs-operator">&lt;</span><span class="hljs-keyword">User</span><span class="hljs-operator">&gt;</span> users <span class="hljs-operator">=</span> userMapper.selectByCondition("å¼ ", <span class="hljs-number">25</span>);

<span class="hljs-operator">/</span><span class="hljs-operator">/</span> æ—¥å¿—è¾“å‡ºï¼š
<span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">&gt;</span>  Preparing: <span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> t_user 
     <span class="hljs-keyword">WHERE</span> name <span class="hljs-keyword">LIKE</span> CONCAT(<span class="hljs-string">'%'</span>, ?, <span class="hljs-string">'%'</span>) <span class="hljs-keyword">AND</span> age <span class="hljs-operator">=</span> ?
<span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">&gt;</span> Parameters: å¼ (String), <span class="hljs-number">25</span>(<span class="hljs-type">Integer</span>)
<span class="hljs-operator">&lt;=</span><span class="hljs-operator">=</span>  Total: <span class="hljs-number">22</span> ms
<span class="hljs-operator">&lt;=</span><span class="hljs-operator">=</span>      <span class="hljs-keyword">Rows</span>: <span class="hljs-number">5</span>
</code></pre>
<h2 data-id="heading-27">åœºæ™¯4ï¼šç»“æœæ—¥å¿—ï¼ˆå¼€å‘ç¯å¢ƒï¼‰</h2>
<pre><code class="hljs language-less" lang="less"><span class="hljs-comment">// æ—¥å¿—è¾“å‡ºï¼š</span>
&lt;==    <span class="hljs-attribute">Columns</span>: id, name, email
&lt;==        <span class="hljs-attribute">Row</span>: <span class="hljs-number">1</span>, å¼ ä¸‰, zhangsan<span class="hljs-variable">@example</span>.com
&lt;==        <span class="hljs-attribute">Row</span>: <span class="hljs-number">2</span>, æå››, lisi<span class="hljs-variable">@example</span>.com
&lt;==        <span class="hljs-attribute">Row</span>: <span class="hljs-number">3</span>, ç‹äº”, wangwu<span class="hljs-variable">@example</span>.com
&lt;==  <span class="hljs-attribute">Total</span>: <span class="hljs-number">3</span> rows
</code></pre>
<h2 data-id="heading-28">åœºæ™¯5ï¼šå¼‚å¸¸æ—¥å¿—</h2>
<p>è¯¦ç»†è®°å½•SQLæ‰§è¡Œå¼‚å¸¸ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">try</span> {
    userMapper.insert(user);
} <span class="hljs-keyword">catch</span> (Exception e) {
    <span class="hljs-comment">// æ—¥å¿—è¾“å‡ºï¼š</span>
    ==&gt;  Preparing: <span class="hljs-function">INSERT INTO <span class="hljs-title">t_user</span> (<span class="hljs-params">name, email</span>) <span class="hljs-title">VALUES</span> (<span class="hljs-params">?, ?</span>)</span>
    ==&gt; Parameters: å¼ ä¸‰(String), invalid-email(String)
    <span class="hljs-meta">### Error updating database.</span>
    <span class="hljs-meta">### Cause: java.sql.SQLException: Incorrect string value</span>
    <span class="hljs-meta">### The <span class="hljs-keyword">error</span> may exist in UserMapper.xml</span>
    <span class="hljs-meta">### The <span class="hljs-keyword">error</span> may involve UserMapper.insert</span>
    <span class="hljs-meta">### SQL: INSERT INTO t_user (name, email) VALUES (?, ?)</span>
    <span class="hljs-meta">### Cause: java.sql.SQLException: Incorrect string value</span>
}
</code></pre>
<h2 data-id="heading-29">åœºæ™¯6ï¼šäº‹åŠ¡æ—¥å¿—</h2>
<p>è¿½è¸ªäº‹åŠ¡çš„å®Œæ•´ç”Ÿå‘½å‘¨æœŸï¼š</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// å¼€å¯äº‹åŠ¡</span>
SqlSession session = sqlSessionFactory.openSession();

<span class="hljs-comment">// æ—¥å¿—è¾“å‡ºï¼š</span>
==&gt;  Opening JDBC Connection
==&gt;  Setting autocommit to <span class="hljs-keyword">false</span> <span class="hljs-keyword">on</span> JDBC Connection

<span class="hljs-comment">// æäº¤äº‹åŠ¡</span>
session.commit();

<span class="hljs-comment">// æ—¥å¿—è¾“å‡ºï¼š</span>
==&gt;  Committing JDBC Connection
&lt;==  Closing JDBC Connection
</code></pre>
<h2 data-id="heading-30">ä¸ƒã€æœ€ä½³å®è·µ</h2>
<h2 data-id="heading-31">ä¸åŒç¯å¢ƒçš„æ—¥å¿—é…ç½®ç­–ç•¥</h2>
<h2 data-id="heading-32">å¼€å‘ç¯å¢ƒé…ç½®</h2>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">logging:</span>
  <span class="hljs-attr">level:</span>
    <span class="hljs-attr">org.apache.ibatis:</span> <span class="hljs-string">DEBUG</span>
  <span class="hljs-comment"># å¯ç”¨DEBUGçº§åˆ«</span>
  <span class="hljs-comment"># è®°å½•SQLå’Œå‚æ•°</span>
  <span class="hljs-comment"># è®°å½•ç»“æœé›†</span>
  <span class="hljs-comment"># è®°å½•æ‰§è¡Œæ—¶é—´</span>
</code></pre>
<h2 data-id="heading-33">æµ‹è¯•ç¯å¢ƒé…ç½®</h2>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">logging:</span>
  <span class="hljs-attr">level:</span>
    <span class="hljs-attr">org.apache.ibatis:</span> <span class="hljs-string">INFO</span>
  <span class="hljs-comment"># å¯ç”¨INFOçº§åˆ«</span>
  <span class="hljs-comment"># è®°å½•SQLå’Œå‚æ•°</span>
  <span class="hljs-comment"># è®°å½•æ…¢æŸ¥è¯¢ï¼ˆ&gt;1ç§’ï¼‰</span>
  <span class="hljs-comment"># è®°å½•å¼‚å¸¸ä¿¡æ¯</span>
</code></pre>
<h2 data-id="heading-34">ç”Ÿäº§ç¯å¢ƒé…ç½®</h2>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">logging:</span>
  <span class="hljs-attr">level:</span>
    <span class="hljs-attr">org.apache.ibatis:</span> <span class="hljs-string">WARN</span>
  <span class="hljs-comment"># å¯ç”¨WARNçº§åˆ«</span>
  <span class="hljs-comment"># ä»…è®°å½•æ…¢æŸ¥è¯¢ï¼ˆ&gt;3ç§’ï¼‰</span>
  <span class="hljs-comment"># è®°å½•é”™è¯¯å’Œå¼‚å¸¸</span>
</code></pre>
<h2 data-id="heading-35">æ€§èƒ½ä¼˜åŒ–</h2>
<h2 data-id="heading-36">1ï¸âƒ£ åˆç†è®¾ç½®æ—¥å¿—çº§åˆ«</h2>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- ç”Ÿäº§ç¯å¢ƒä½¿ç”¨INFOæˆ–WARNçº§åˆ« --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">logger</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"org.apache.ibatis"</span> <span class="hljs-attr">level</span>=<span class="hljs-string">"WARN"</span>/&gt;</span>
</code></pre>
<h2 data-id="heading-37">2ï¸âƒ£ ä½¿ç”¨å¼‚æ­¥æ—¥å¿—</h2>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- Log4j2å¼‚æ­¥æ—¥å¿—é…ç½® --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">Async</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"AsyncAppender"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">AppenderRef</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"RollingFile"</span>/&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">Async</span>&gt;</span>
</code></pre>
<h2 data-id="heading-38">3ï¸âƒ£ SQLæ—¥å¿—å•ç‹¬å­˜å‚¨</h2>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- SQLæ—¥å¿—ç‹¬ç«‹æ–‡ä»¶ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">RollingFile</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"SqlLog"</span> <span class="hljs-attr">fileName</span>=<span class="hljs-string">"logs/sql.log"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">PatternLayout</span> <span class="hljs-attr">pattern</span>=<span class="hljs-string">"%d{yyyy-MM-dd HH:mm:ss} - %msg%n"</span>/&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">RollingFile</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">Logger</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"org.apache.ibatis.jdbc"</span> <span class="hljs-attr">level</span>=<span class="hljs-string">"DEBUG"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">AppenderRef</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"SqlLog"</span>/&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">Logger</span>&gt;</span>
</code></pre>
<h2 data-id="heading-39">4ï¸âƒ£ æ—¥å¿—æ–‡ä»¶æ»šåŠ¨ç­–ç•¥</h2>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Policies</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- æ¯å¤©æ»šåŠ¨ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">TimeBasedTriggeringPolicy</span> <span class="hljs-attr">interval</span>=<span class="hljs-string">"1"</span>/&gt;</span>
    <span class="hljs-comment">&lt;!-- å•æ–‡ä»¶æœ€å¤§100MB --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">SizeBasedTriggeringPolicy</span> <span class="hljs-attr">size</span>=<span class="hljs-string">"100 MB"</span>/&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">Policies</span>&gt;</span>
<span class="hljs-comment">&lt;!-- æœ€å¤šä¿ç•™30å¤© --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">DefaultRolloverStrategy</span> <span class="hljs-attr">max</span>=<span class="hljs-string">"30"</span>/&gt;</span>
</code></pre>
<h2 data-id="heading-40">å…«ã€æ€»ç»“</h2>
<p>MyBatisçš„æ—¥å¿—æ¨¡å—ä¸ºå¼€å‘è°ƒè¯•å’Œæ€§èƒ½ä¼˜åŒ–æä¾›äº†å¼ºå¤§çš„æ”¯æŒã€‚</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-bullet">1.</span> Logæ¥å£ - MyBatiså®šä¹‰çš„ç»Ÿä¸€æ—¥å¿—æ¥å£ï¼Œå®ç°ä¸æ¡†æ¶è§£è€¦
<span class="hljs-bullet">2.</span> æ—¥å¿—é€‚é…å™¨ -é€šè¿‡é€‚é…å™¨æ¨¡å¼æ”¯æŒå¤šç§æ—¥å¿—æ¡†æ¶
<span class="hljs-bullet">3.</span> JDBCæ—¥å¿— - ç»†ç²’åº¦çš„JDBCæ“ä½œæ—¥å¿—è®°å½•
<span class="hljs-bullet">4.</span> çµæ´»é…ç½® - æ”¯æŒå¤šç§é…ç½®æ–¹å¼ï¼Œé€‚åº”ä¸åŒåœºæ™¯
<span class="hljs-bullet">5.</span> æ€§èƒ½ç›‘æ§ - é€šè¿‡æ—¥å¿—è¯†åˆ«æ€§èƒ½ç“¶é¢ˆ
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»é‡å¯é©¬è½¦åˆ°å¸¸é©»è¿è¾“é˜Ÿï¼šCGI ä¸ PHP çš„ç‰©æµç³»ç»Ÿæ¼”è¿›ç®€å²]]></title>    <link>https://juejin.cn/post/7589932422655344676</link>    <guid>https://juejin.cn/post/7589932422655344676</guid>    <pubDate>2026-01-03T09:00:30.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589932422655344676" data-draft-id="7589932422655311908" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»é‡å¯é©¬è½¦åˆ°å¸¸é©»è¿è¾“é˜Ÿï¼šCGI ä¸ PHP çš„ç‰©æµç³»ç»Ÿæ¼”è¿›ç®€å²"/> <meta itemprop="keywords" content="åç«¯,PHP,Java"/> <meta itemprop="datePublished" content="2026-01-03T09:00:30.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="éŸ©å¸ˆå‚…"/> <meta itemprop="url" content="https://juejin.cn/user/286348958252526"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»é‡å¯é©¬è½¦åˆ°å¸¸é©»è¿è¾“é˜Ÿï¼šCGI ä¸ PHP çš„ç‰©æµç³»ç»Ÿæ¼”è¿›ç®€å²
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/286348958252526/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    éŸ©å¸ˆå‚…
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-03T09:00:30.000Z" title="Sat Jan 03 2026 09:00:30 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    7
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»13åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{line-height:1.75;font-family:-apple-system-font,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei UI,Microsoft YaHei,Arial,sans-serif;letter-spacing:2px;background-image:linear-gradient(90deg,rgba(50,0,0,.05) 3%,transparent 0),linear-gradient(1turn,rgba(50,0,0,.05) 3%,transparent 0);background-size:20px 20px;background-position:50%;word-break:break-word;font-weight:400;font-size:15px;overflow-x:hidden;color:#333}.markdown-body h1{font-size:23px;margin-bottom:5px;font-weight:700;padding-left:10px;border-left:5px solid #773098}.markdown-body h2{font-size:19px;font-weight:700;padding-left:10px;border-left:5px solid #916dd5}.markdown-body h3{font-size:17px;font-weight:700;padding-left:10px;border-left:5px solid #d89cf6}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{font-size:14px;margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{display:block;max-width:100%;margin:1em 0;border-radius:6px;box-shadow:2px 4px 7px #999;user-select:none}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{padding:.2em .5em;font-weight:700;font-family:-apple-system-font,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei UI,Microsoft YaHei,Arial,sans-serif;font-size:1em;color:#916dd5;word-break:break-word;overflow-x:auto;background-color:none;border-radius:2px}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;font-family:-apple-system-font,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei UI,Microsoft YaHei,Arial,sans-serif;font-weight:400;font-size:.9em;padding:16px 12px;margin:0;color:#333;word-break:normal;overflow-x:auto;background:#f8f8f8;scroll-behavior:smooth}.markdown-body a{text-decoration:none;color:#916dd5;font-weight:700;border-bottom:1px solid #916dd5}.markdown-body a:active,.markdown-body a:hover{color:#773098}.markdown-body table{display:inline-block!important;font-size:14px;width:auto;max-width:100%;overflow:auto;border:1px solid #916dd5;border-collapse:collapse}.markdown-body thead{background-color:#916dd5;color:#fff;text-align:left}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px;border:1px solid #916dd5}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #d89cf6;background-color:#f4eeff}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0;line-height:26px}.markdown-body ol,.markdown-body ul{padding-left:28px;list-style-type:circle}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body b,.markdown-body strong{color:#916dd5;font-weight:700}.markdown-body b:before,.markdown-body strong:before{content:"ã€Œ"}.markdown-body b:after,.markdown-body strong:after{content:"ã€"}.markdown-body em,.markdown-body i{color:#916dd5}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="androidstudio">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#a9b7c6;background:#282b2e}.hljs-bullet,.hljs-literal,.hljs-number,.hljs-symbol{color:#6897bb}.hljs-deletion,.hljs-keyword,.hljs-selector-tag{color:#cc7832}.hljs-link,.hljs-template-variable,.hljs-variable{color:#629755}.hljs-comment,.hljs-quote{color:grey}.hljs-meta{color:#bbb529}.hljs-addition,.hljs-attribute,.hljs-string{color:#6a8759}.hljs-section,.hljs-title,.hljs-type{color:#ffc66d}.hljs-name,.hljs-selector-class,.hljs-selector-id{color:#e8bf6a}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong>æ‘˜è¦</strong>ï¼šä» CGI æ¯æ¬¡é‡å¯è¿›ç¨‹çš„"å¤–åŒ…ä¸´å·¥"æ¨¡å¼ï¼Œåˆ° PHP è¿›ç¨‹å¤ç”¨çš„"è‡ªå®¶é›‡å‘˜"æ¨¡å¼ã€‚ç¬¬ä¸€ä»£å’Œç¬¬äºŒä»£ç‰©æµç³»ç»Ÿçš„å…³é”®å·®å¼‚åœ¨äºè¿›ç¨‹æ˜¯å¦å¯ä»¥å¤ç”¨ï¼Œè¿™æ˜¯ Web API æ¼”è¿›å²ä¸Šçš„ç¬¬ä¸€ä¸ªé‡è¦è½¬æŠ˜ç‚¹ã€‚</p>
<h2 data-id="heading-0">ğŸšš ç‰©æµç³»ç»Ÿçš„æ¼”è¿›å²</h2>
<h3 data-id="heading-1">å¤§èŸ’è›‡æ³•å¸ˆçš„å›°æƒ‘</h3>
<p>ğŸ å¤§èŸ’è›‡æ³•å¸ˆï¼š"çµç‹æ³•å¸ˆé—®æˆ‘ï¼ŒFastAPI æ˜¯ä¸æ˜¯ç¬¬ä¸€ä»£ç‰©æµç³»ç»Ÿï¼Ÿå…¶å®ä¸æ˜¯çš„ã€‚åœ¨ FastAPI ä¹‹å‰ï¼Œå·²ç»æœ‰å¾ˆå¤šç‰©æµç³»ç»Ÿäº†ã€‚è®©æˆ‘ç»™ä½ è®²è®²ç‰©æµç³»ç»Ÿçš„æ¼”è¿›å²ï¼Œä»¥åŠä¸åŒæ³•å¸ˆä»¬çš„ç‰©æµç³»ç»Ÿã€‚"</p>
<p><strong>æ ¸å¿ƒç†è§£</strong>ï¼š</p>
<ul>
<li>FastAPI ä¸æ˜¯ç¬¬ä¸€ä»£ç‰©æµç³»ç»Ÿ</li>
<li>åœ¨ FastAPI ä¹‹å‰ï¼Œå·²ç»æœ‰å¾ˆå¤šç‰©æµç³»ç»Ÿï¼ˆFlaskã€Djangoã€Express ç­‰ï¼‰</li>
<li>è¿™äº›ç‰©æµç³»ç»Ÿéƒ½åœ¨ä¸æ–­æ¼”è¿›ï¼Œé€‚åº”ä¸åŒçš„éœ€æ±‚</li>
<li>REST API æ˜¯ä¸€ä¸ª<strong>æ¦‚å¿µ</strong>ï¼Œä¸æ˜¯æŸä¸ªå…·ä½“çš„ç‰©æµç³»ç»Ÿ</li>
<li>ä¸åŒçš„æ³•å¸ˆæœ‰ä¸åŒçš„ç‰©æµç³»ç»Ÿ</li>
</ul>
<h3 data-id="heading-2">æ³•å¸ˆè§’è‰²ä»‹ç»</h3>
<p>åœ¨é­”æ³•ä¸–ç•Œé‡Œï¼Œä¸åŒçš„æ³•å¸ˆè´Ÿè´£ä¸åŒçš„åç«¯æŠ€æœ¯ï¼š</p>
<ul>
<li>ğŸ <strong>å¤§èŸ’è›‡æ³•å¸ˆ</strong>ï¼šPython åç«¯ï¼Œè´Ÿè´£ Flaskã€Djangoã€FastAPI ç­‰ Python ç‰©æµç³»ç»Ÿï¼Œ<strong>éœ€è¦ä¸çµç‹æ³•å¸ˆåˆä½œ</strong>ï¼ˆå‰åç«¯åˆ†ç¦»ï¼‰</li>
<li>ğŸ¦Š <strong>çµç‹æ³•å¸ˆ</strong>ï¼šå‰ç«¯å¼€å‘ï¼ˆJavaScriptï¼‰ï¼Œè´Ÿè´£å–è´§ç»™å®¢æˆ·ï¼Œä¸å¤§èŸ’è›‡æ³•å¸ˆã€å¤œç‹æ³•å¸ˆåˆä½œ</li>
<li>ğŸŒ™ <strong>å¤œç‹æ³•å¸ˆ</strong>ï¼šNode.js åç«¯ï¼Œéšè—äºé»‘æš—ä¸­ï¼Œä¸éœ²é¢ï¼Œä¸å…„å¼Ÿçµç‹æ³•å¸ˆåˆä½œï¼Œè´Ÿè´£åç«¯é…ç½®ï¼ˆå‰åç«¯åˆ†ç¦»ï¼‰</li>
<li>ğŸ§µ <strong>PHP ç»‡å¸ƒå¸ˆ</strong>ï¼šPHP åç«¯ï¼Œè´Ÿè´£ PHP ç‰©æµç³»ç»Ÿï¼Œ<strong>ä¸éœ€è¦ä¸çµç‹æ³•å¸ˆåˆä½œ</strong>ï¼ˆä¼ ç»Ÿå…¨æ ˆæ¨¡å¼ï¼Œç›´æ¥è¿”å› HTMLï¼‰</li>
<li>â˜• <strong>é»‘æ°´ç”²ç“¦æ³•å¸ˆ</strong>ï¼šJava åç«¯ï¼Œè´Ÿè´£ Servletã€Spring ç­‰ Java ç‰©æµç³»ç»Ÿ
<ul>
<li><strong>Servlet æ—¶ä»£ï¼ˆ1990sï¼‰</strong>ï¼šä¸»è¦æ˜¯ä¼ ç»Ÿæ¨¡å¼ï¼ŒServlet + JSPï¼Œç›´æ¥è¿”å› HTMLï¼Œ<strong>ä¸éœ€è¦ä¸çµç‹æ³•å¸ˆåˆä½œ</strong>ï¼ˆå‰åç«¯ä¸åˆ†ç¦»ï¼‰</li>
<li><strong>ç°ä»£æ¨¡å¼ï¼ˆSpring MVCï¼Œ2010s+ï¼‰</strong>ï¼šå¯ä»¥å‰åç«¯åˆ†ç¦»ï¼Œæä¾› REST APIï¼Œ<strong>éœ€è¦ä¸çµç‹æ³•å¸ˆåˆä½œ</strong></li>
</ul>
</li>
<li>ğŸ›¡ï¸ <strong>è“ç›¾æ³•å¸ˆ</strong>ï¼šASP.NET åç«¯ï¼Œæ¦‚å¿µæ³•å¸ˆï¼Œä»å½©è‰²æ–¹å—ä¸–ç•Œæ¥çš„ï¼Œæ²¡äººè§è¿‡ä»–çš„çœŸèº«ï¼Œåªæœ‰å¤–å·
<ul>
<li><strong>ä¼ ç»Ÿæ¨¡å¼</strong>ï¼šç±»ä¼¼ PHP ç»‡å¸ƒå¸ˆï¼Œç›´æ¥è¿”å› HTMLï¼Œ<strong>ä¸éœ€è¦ä¸çµç‹æ³•å¸ˆåˆä½œ</strong></li>
<li><strong>ç°ä»£æ¨¡å¼</strong>ï¼šASP.NET Core Web APIï¼Œ<strong>éœ€è¦ä¸çµç‹æ³•å¸ˆåˆä½œ</strong>ï¼ˆå‰åç«¯åˆ†ç¦»ï¼‰</li>
</ul>
</li>
</ul>
<hr/>
<h2 data-id="heading-3">ğŸ“œ ç¬¬ä¸€ä»£ï¼šåŸå§‹ç‰©æµç³»ç»Ÿï¼ˆCGIã€Servletï¼‰</h2>
<h3 data-id="heading-4">æ—¶ä»£èƒŒæ™¯</h3>
<p>ğŸ å¤§èŸ’è›‡æ³•å¸ˆï¼š"æœ€æ—©çš„ç‰©æµç³»ç»Ÿï¼Œå°±åƒæœ€åŸå§‹çš„é€è´§ä»»åŠ¡ã€‚æ¯æ¬¡è®¢å•éƒ½è¦é‡æ–°å¯åŠ¨æ•´ä¸ªé€è´§ä»»åŠ¡ï¼Œæ•ˆç‡å¾ˆä½ã€‚é‚£æ—¶å€™ï¼ŒCGI å’Œé»‘æ°´ç”²ç“¦æ³•å¸ˆï¼ˆJavaï¼‰çš„ Servlet ç³»ç»Ÿå°±æ˜¯è¿™æ ·çš„ã€‚"</p>
<h3 data-id="heading-5">CGI æ˜¯ä»€ä¹ˆï¼Ÿ</h3>
<p>ğŸ å¤§èŸ’è›‡æ³•å¸ˆï¼š"CGIï¼ˆCommon Gateway Interfaceï¼Œé€šç”¨ç½‘å…³æ¥å£ï¼‰æ˜¯ä¸€ä¸ª<strong>æ¥å£æ ‡å‡†</strong>ï¼Œå®šä¹‰äº† Web æœåŠ¡å™¨å¦‚ä½•ä¸å¤–éƒ¨ç¨‹åºé€šä¿¡ã€‚åœ¨åŸå§‹æ—¶ä»£ï¼Œæ²¡æœ‰å®Œæ•´çš„å¤‡è´§æµç¨‹ï¼Œæ¯æ¬¡è®¢å•éƒ½è¦é‡æ–°å¼€å§‹ã€‚"</p>
<p><strong>CGI = å¯åŠ¨é©¬è½¦å’Œé“è·¯çš„æ–¹æ³•ï¼ˆæ¥å£æ ‡å‡†ï¼‰</strong>ï¼š</p>
<ul>
<li><strong>ä¸æ˜¯å®Œæ•´çš„ç‰©æµç³»ç»Ÿ</strong>ï¼šè€Œæ˜¯"å¦‚ä½•å¯åŠ¨é©¬è½¦å’Œé“è·¯"çš„æ–¹æ³•ï¼ˆæ¥å£æ ‡å‡†ï¼‰</li>
<li><strong>å®šä¹‰äº†æ¥å£æ ‡å‡†</strong>ï¼šå®šä¹‰äº† Web æœåŠ¡å™¨å¦‚ä½•è°ƒç”¨å¤–éƒ¨ç¨‹åºçš„æ¥å£æ ‡å‡†</li>
<li><strong>ä¸æ˜¯å…·ä½“çš„ç‰©æµç³»ç»Ÿ</strong>ï¼šè€Œæ˜¯ä¸€ä¸ªæ¥å£æ ‡å‡†ï¼Œå®šä¹‰äº†å¦‚ä½•ä¸å¤–éƒ¨ç¨‹åºé€šä¿¡</li>
<li><strong>é€šç”¨æ¥å£</strong>ï¼šæ‰€æœ‰æ³•å¸ˆéƒ½å¯ä»¥ä½¿ç”¨è¿™ä¸ªæ¥å£æ ‡å‡†</li>
<li><strong>æ¯æ¬¡è¯·æ±‚éƒ½è¦å¯åŠ¨æ–°è¿›ç¨‹</strong>ï¼šæ¯æ¬¡è®¢å•éƒ½è¦é‡æ–°å¯åŠ¨ç¨‹åºè¿›ç¨‹ï¼ˆæ•´ä¸ªé€è´§çš„ä»»åŠ¡ï¼‰</li>
<li><strong>å¤„ç†å®Œå°±ç»“æŸ</strong>ï¼šç¨‹åºå¤„ç†å®Œè®¢å•åï¼Œè¿›ç¨‹ï¼ˆæ•´ä¸ªé€è´§çš„ä»»åŠ¡ï¼‰å°±ç»“æŸäº†</li>
</ul>
<p><strong>CGI çš„å®šä½</strong>ï¼š</p>
<ul>
<li><strong>CGI = æ¥å£æ ‡å‡†</strong>ï¼šå®šä¹‰äº†"å¦‚ä½•å¯åŠ¨é©¬è½¦å’Œé“è·¯"çš„æ–¹æ³•</li>
<li><strong>ä¸æ˜¯å®Œæ•´çš„ç‰©æµç³»ç»Ÿ</strong>ï¼šåªæ˜¯å®šä¹‰äº†å¦‚ä½•è°ƒç”¨å¤–éƒ¨ç¨‹åºçš„æ¥å£</li>
<li><strong>FastAPI æ¯”å®ƒå®Œæ•´å¾—å¤š</strong>ï¼šFastAPI æ˜¯å®Œæ•´çš„ç‰©æµç³»ç»Ÿï¼ˆæ¡†æ¶ï¼‰ï¼ŒåŒ…å«è·¯ç”±ç³»ç»Ÿã€ä¸­é—´ä»¶ã€æ•°æ®éªŒè¯ç­‰</li>
</ul>
<p><strong>CGI æ—¶ä»£ = åŸå§‹æ—¶ä»£ï¼Œæ²¡æœ‰å®Œæ•´çš„å¤‡è´§æµç¨‹</strong></p>
<p>â˜• é»‘æ°´ç”²ç“¦æ³•å¸ˆï¼š"åœ¨ CGI æ—¶ä»£ï¼Œæ²¡æœ‰å®Œæ•´çš„å¤‡è´§æµç¨‹ã€‚æ”¶åˆ°è®¢å•ä¹‹åï¼Œæˆ‘ä¼šå¯åŠ¨æ•´ä¸ªé€è´§ä»»åŠ¡ï¼Œå»åˆ°æ¯ä¸ªä»“åº“ï¼Œæ¯ä¸ªä»“åº“çš„å¤§é—¨éƒ½éœ€è¦å¤§å¼€ï¼Œä»ææ–™çš„æŸ¥æ‰¾å¼€å§‹ï¼Œä¸€ä¸ªä¸ªå»æ‰¾ï¼Œç„¶åå†åˆ¶ä½œã€‚æ¯æ¬¡æ¥æ–°è®¢å•ï¼Œéƒ½è¦é‡æ–°å¯åŠ¨æ•´ä¸ªé€è´§ä»»åŠ¡ï¼Œä¸€ä¸ªä¸ªä»“åº“å»å¼€ï¼Œç„¶ååšäº§å“ã€‚åŒæ ·çš„æµç¨‹æ²¡æœ‰è¢«è®°å½•å’Œç­›æ£€ï¼Œæ‰€ä»¥ç­‰äºæ¯æ¬¡éƒ½æ˜¯æ–°çš„ã€‚"</p>
<p><strong>CGI çš„å·¥ä½œæ–¹å¼ï¼ˆé­”æ³•ä»“åº“æ¯”å–»ï¼‰</strong>ï¼š</p>
<pre><code class="hljs language-plain" lang="plain">å®¢æˆ·ä¸‹å•
  â†“
ğŸ›¡ï¸ é˜¿å¸•å¥‡å®ˆæŠ¤è€…ï¼ˆWeb æœåŠ¡å™¨ï¼‰æ”¶åˆ°è®¢å•
  â†“
â˜• é»‘æ°´ç”²ç“¦æ³•å¸ˆï¼š"å¯åŠ¨æ•´ä¸ªé€è´§ä»»åŠ¡ï¼"ï¼ˆå¯åŠ¨æ–°çš„ CGI ç¨‹åºè¿›ç¨‹ï¼‰
  â†“
â˜• è¿›ç¨‹ = æ•´ä¸ªé€è´§çš„ä»»åŠ¡
  â†“
â˜• éœ€è¦åšè¿‡è¿™ä¸€å•å­çš„è¿è¾“å›¢é˜Ÿ
  â†“
â˜• è¿è¾“å›¢é˜Ÿéœ€è¦è®°å½•è·¯å¾„ï¼ˆä»»åŠ¡å¤æ‚ï¼‰
  â†“
â˜• å»åˆ°æ¯ä¸ªä»“åº“ï¼ˆåŠ è½½æ•´ä¸ªè„šæœ¬æ–‡ä»¶ï¼‰
  â†“
â˜• æ¯ä¸ªä»“åº“çš„å¤§é—¨éƒ½éœ€è¦å¤§å¼€ï¼ˆæ•´ä¸ªæ–‡ä»¶éƒ½è¦è¢«åŠ è½½ï¼‰
  â†“
â˜• ä»ææ–™çš„æŸ¥æ‰¾å¼€å§‹ï¼Œä¸€ä¸ªä¸ªå»æ‰¾ï¼ˆè„šæœ¬é‡Œçš„æ‰€æœ‰ä»£ç éƒ½è¦æ‰§è¡Œï¼‰
  â†“
â˜• ç„¶åå†åˆ¶ä½œï¼ˆå¤„ç†è®¢å•ï¼‰
  â†“
â˜• å®Œæˆï¼Œæ•´ä¸ªé€è´§ä»»åŠ¡ç»“æŸï¼Œè¿›ç¨‹ç»“æŸ
  â†“
ä¸‹æ¬¡è®¢å•åˆè¦é‡æ–°å¯åŠ¨æ•´ä¸ªé€è´§ä»»åŠ¡ï¼Œé‡æ–°å¼€ä»“åº“ï¼Œé‡æ–°æ‰¾ææ–™
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8d51acdcc50c4d8585fa010b359e4300~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Z-p5biI5YKF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768038764&amp;x-signature=zyGkY57GPqc%2F0p0OF69n1vZSAFw%3D" alt="image.png" loading="lazy"/></p>
<p><strong>å…³é”®ç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li><strong>è¿›ç¨‹ = æ•´ä¸ªé€è´§çš„ä»»åŠ¡</strong>ï¼šä¸æ˜¯è½¦é©¬ï¼Œè€Œæ˜¯æ•´ä¸ªé€è´§çš„ä»»åŠ¡</li>
<li><strong>éœ€è¦åšè¿‡è¿™ä¸€å•å­çš„è¿è¾“å›¢é˜Ÿ</strong>ï¼šæ¯æ¬¡éƒ½è¦é‡æ–°ç»„ç»‡è¿è¾“å›¢é˜Ÿ</li>
<li><strong>è¿è¾“å›¢é˜Ÿéœ€è¦è®°å½•è·¯å¾„</strong>ï¼šä»»åŠ¡å¤æ‚ï¼Œéœ€è¦è¿è¾“å›¢é˜Ÿè®°ä½è·¯å¾„</li>
<li><strong>æ²¡æœ‰å›ºå®šçš„å¤‡è´§æµç¨‹</strong>ï¼šæ²¡æœ‰è·¯ç”±ç³»ç»Ÿï¼Œæ¯ä¸ªè„šæœ¬éƒ½æ˜¯ç‹¬ç«‹çš„</li>
<li><strong>æ¯æ¬¡éƒ½è¦é‡æ–°å¼€å§‹</strong>ï¼šæ¯æ¬¡è¯·æ±‚éƒ½è¦é‡æ–°å¯åŠ¨è¿›ç¨‹ï¼ˆæ•´ä¸ªé€è´§çš„ä»»åŠ¡ï¼‰ï¼Œé‡æ–°åŠ è½½æ–‡ä»¶</li>
<li><strong>æ•´ä¸ªæ–‡ä»¶éƒ½è¦è¢«åŠ è½½</strong>ï¼šå¯èƒ½ä¸€ä¸ªæ–‡ä»¶é‡Œé¢åªè·‘ä¸€ä¸ªå‡½æ•°ï¼Œä½†è¿˜æ˜¯è¦è¯·æ±‚æ•´ä¸ªæ–‡ä»¶</li>
<li><strong>åŒæ ·çš„æµç¨‹æ²¡æœ‰è¢«è®°å½•å’Œç­›æ£€</strong>ï¼šæ²¡æœ‰è·¯ç”±ç³»ç»Ÿï¼Œæ²¡æœ‰å›ºå®šçš„æµç¨‹</li>
<li><strong>æ‰€ä»¥ç­‰äºæ¯æ¬¡éƒ½æ˜¯æ–°çš„</strong>ï¼šæ¯æ¬¡è¯·æ±‚éƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œæ²¡æœ‰å¤ç”¨</li>
</ul>
<p><strong>Servlet æ˜¯ä»€ä¹ˆï¼Ÿ</strong></p>
<p>â˜• é»‘æ°´ç”²ç“¦æ³•å¸ˆï¼š"Servlet æ˜¯æˆ‘çš„ä»£ç ä»“åº“ï¼Œä¸“é—¨ç”¨æ¥åš CGI è¿™æ ·çš„ç‰©æµè¿‡ç¨‹ã€‚å®ƒæ¯” CGI æ›´å®Œæ•´ï¼Œæœ‰ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼Œå¯ä»¥å¤ç”¨ï¼Œä½†æ¯æ¬¡è¯·æ±‚è¿˜æ˜¯è¦é‡æ–°å¤„ç†æ•´ä¸ªé€è´§ä»»åŠ¡ã€‚"</p>
<p><strong>Servlet = ä»£ç ä»“åº“ï¼Œä¸“é—¨ç”¨æ¥åš CGI è¿™æ ·çš„ç‰©æµè¿‡ç¨‹</strong>ï¼š</p>
<ul>
<li><strong>æ˜¯ Java çš„ Web å¤„ç†æŠ€æœ¯</strong>ï¼šé»‘æ°´ç”²ç“¦æ³•å¸ˆç”¨æ¥å¤„ç† Web è¯·æ±‚çš„æŠ€æœ¯</li>
<li><strong>ç±»ä¼¼ CGIï¼Œä½†æ›´å®Œæ•´</strong>ï¼šæœ‰ç”Ÿå‘½å‘¨æœŸç®¡ç†ã€å¯ä»¥å¤ç”¨</li>
<li><strong>ä¸“é—¨ç”¨æ¥åš CGI è¿™æ ·çš„ç‰©æµè¿‡ç¨‹</strong>ï¼šå®ç°ç±»ä¼¼ CGI çš„åŠŸèƒ½ï¼Œä½†æ›´é«˜æ•ˆ</li>
<li><strong>æ¯æ¬¡è¯·æ±‚è¿˜æ˜¯è¦é‡æ–°å¤„ç†</strong>ï¼šè™½ç„¶å¯ä»¥å¤ç”¨ï¼Œä½†æ¯æ¬¡è¯·æ±‚è¿˜æ˜¯è¦é‡æ–°å¤„ç†æ•´ä¸ªé€è´§ä»»åŠ¡</li>
<li><strong>è¿›ç¨‹ = æ•´ä¸ªé€è´§çš„ä»»åŠ¡</strong>ï¼šéœ€è¦åšè¿‡è¿™ä¸€å•å­çš„è¿è¾“å›¢é˜Ÿï¼Œè¿è¾“å›¢é˜Ÿéœ€è¦è®°å½•è·¯å¾„ï¼Œä»»åŠ¡å¤æ‚</li>
</ul>
<p><strong>Servlet æ—¶ä»£çš„å‰åç«¯æ¨¡å¼</strong>ï¼š</p>
<p>ğŸ å¤§èŸ’è›‡æ³•å¸ˆï¼š"Servlet æ—¶ä»£ï¼ˆ1990sï¼‰ä¸»è¦æ˜¯ä¼ ç»Ÿæ¨¡å¼ï¼Œå‰åç«¯ä¸åˆ†ç¦»ã€‚é‚£æ—¶å€™è¿˜æ²¡æœ‰çµç‹æ³•å¸ˆï¼ˆç°ä»£å‰ç«¯æ¡†æ¶ï¼‰ï¼Œæ‰€ä»¥é»‘æ°´ç”²ç“¦æ³•å¸ˆç›´æ¥è¿”å› HTML é¡µé¢ï¼ˆJSPï¼‰ã€‚"</p>
<p>â˜• é»‘æ°´ç”²ç“¦æ³•å¸ˆï¼š"æ˜¯çš„ï¼Œåœ¨ Servlet æ—¶ä»£ï¼Œæˆ‘ä¸»è¦æ˜¯ç”¨ Servlet + JSP çš„æ–¹å¼ï¼Œç›´æ¥è¿”å› HTML é¡µé¢ï¼Œå‰åç«¯ä¸åˆ†ç¦»ã€‚é‚£æ—¶å€™è¿˜æ²¡æœ‰çµç‹æ³•å¸ˆï¼Œæ‰€ä»¥æˆ‘ä¸éœ€è¦ä¸çµç‹æ³•å¸ˆåˆä½œã€‚ä½† Servlet æŠ€æœ¯æœ¬èº«å¯ä»¥æ”¯æŒå‰åç«¯åˆ†ç¦»ï¼ˆæä¾› APIï¼‰ï¼Œåªæ˜¯é‚£æ—¶å€™å‰ç«¯æŠ€æœ¯è¿˜æ²¡æˆç†Ÿï¼Œæ‰€ä»¥ä¸»è¦æ˜¯ä¼ ç»Ÿæ¨¡å¼ã€‚"</p>
<p><strong>å…³é”®ç†è§£</strong>ï¼š</p>
<ul>
<li><strong>Servlet æ—¶ä»£ï¼ˆ1990sï¼‰</strong>ï¼šä¸»è¦æ˜¯ä¼ ç»Ÿæ¨¡å¼ï¼ŒServlet + JSPï¼Œç›´æ¥è¿”å› HTMLï¼Œ<strong>å‰åç«¯ä¸åˆ†ç¦»</strong></li>
<li><strong>Servlet æŠ€æœ¯æœ¬èº«</strong>ï¼šå¯ä»¥æ”¯æŒå‰åç«¯åˆ†ç¦»ï¼ˆæä¾› APIï¼‰ï¼Œä½†é‚£æ—¶å€™å‰ç«¯æŠ€æœ¯è¿˜æ²¡æˆç†Ÿ</li>
<li><strong>ç°ä»£ Servletï¼ˆSpring MVCï¼Œ2010s+ï¼‰</strong>ï¼šå¯ä»¥å‰åç«¯åˆ†ç¦»ï¼Œä¸çµç‹æ³•å¸ˆåˆä½œï¼Œæä¾› REST API</li>
<li><strong>å‰åç«¯åˆ†ç¦»çš„æ—¶ä»£</strong>ï¼š2010s+ï¼Œç°ä»£å‰ç«¯æ¡†æ¶ï¼ˆReact/Vue/Angularï¼‰å…´èµ·ï¼Œåç«¯æä¾› API</li>
</ul>
<p><strong>é—®é¢˜</strong>ï¼š</p>
<ul>
<li>âŒ æ¯æ¬¡è®¢å•éƒ½è¦é‡æ–°å¯åŠ¨æ•´ä¸ªé€è´§ä»»åŠ¡ï¼Œæ•ˆç‡å¤ªä½</li>
<li>âŒ éœ€è¦åšè¿‡è¿™ä¸€å•å­çš„è¿è¾“å›¢é˜Ÿï¼Œè¿è¾“å›¢é˜Ÿéœ€è¦è®°å½•è·¯å¾„ï¼Œä»»åŠ¡å¤æ‚</li>
<li>âŒ èµ„æºæ¶ˆè€—å¤§ï¼ˆæ¯æ¬¡éƒ½è¦å¯åŠ¨æ–°è¿›ç¨‹ï¼‰</li>
<li>âŒ æ— æ³•å¤„ç†å¤§é‡è®¢å•ï¼ˆé«˜å¹¶å‘æ—¶æ€§èƒ½ç“¶é¢ˆæ˜æ˜¾ï¼‰</li>
</ul>
<hr/>
<h2 data-id="heading-6">ğŸ“œ ç¬¬äºŒä»£ï¼šæ”¹è¿›çš„ç‰©æµç³»ç»Ÿï¼ˆPHPã€ASP.NETï¼‰</h2>
<h3 data-id="heading-7">æ—¶ä»£èƒŒæ™¯</h3>
<p>ğŸ å¤§èŸ’è›‡æ³•å¸ˆï¼š"åæ¥æœ‰äº†æ”¹è¿›çš„ç‰©æµç³»ç»Ÿï¼Œæ¯”å¦‚ PHP ç»‡å¸ƒå¸ˆçš„ç‰©æµç³»ç»Ÿã€‚è¿›ç¨‹ï¼ˆæ•´ä¸ªé€è´§çš„ä»»åŠ¡ï¼‰å¯ä»¥å¤ç”¨ï¼Œä½†è¿˜æ˜¯è¦é‡æ–°å‡†å¤‡ã€‚è¿˜æœ‰è“ç›¾æ³•å¸ˆçš„ ASP.NET ç³»ç»Ÿã€‚"</p>
<p><strong>ç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li><strong>PHP</strong>ï¼šPHP ç»‡å¸ƒå¸ˆçš„ç‰©æµç³»ç»Ÿï¼Œè¿›ç¨‹ï¼ˆæ•´ä¸ªé€è´§çš„ä»»åŠ¡ï¼‰å¯ä»¥å¤ç”¨</li>
<li><strong>ASP.NET</strong>ï¼šè“ç›¾æ³•å¸ˆçš„ç‰©æµç³»ç»Ÿï¼Œä»å½©è‰²æ–¹å—ä¸–ç•Œæ¥çš„</li>
<li><strong>å¯ä»¥å¤ç”¨èµ„æº</strong>ï¼šä½†æ¯æ¬¡è¯·æ±‚è¿˜æ˜¯è¦é‡æ–°åˆå§‹åŒ–</li>
<li><strong>æ•ˆç‡æå‡</strong>ï¼šæ¯”ç¬¬ä¸€ä»£å¿«ï¼Œä½†è¿˜ä¸å¤Ÿ</li>
</ul>
<h3 data-id="heading-8">PHP çš„æ”¹è¿›ï¼šè¿›ç¨‹ï¼ˆæ•´ä¸ªé€è´§çš„ä»»åŠ¡ï¼‰å¯ä»¥å¤ç”¨</h3>
<p>ğŸ§µ PHP ç»‡å¸ƒå¸ˆï¼š"æˆ‘ç»‡å¸ƒå¸ˆä¹Ÿä¸æ˜¯åƒç´ çš„ï¼æˆ‘çš„é€è´§å›¢é˜Ÿæ—©å°±å…»åœ¨å‚é‡Œï¼Œéšæ—¶å¾…å‘½ã€‚è®¢å•ä¸€æ¥ï¼Œè¿è¾“é©¬è½¦ç«‹åˆ»å‡ºå‘ï¼Œçœæ—¶åˆçœé©¬è‰ã€‚è™½ç„¶æ¯æ¬¡è¿˜å¾—äº²è‡ªè£…è´§ã€ä¸€ä¸ªä»“åº“ä¸€ä¸ªä»“åº“è·‘ï¼Œä½†è¿™å¯æ¯”ä¸´æ—¶æ‹›äººå¼ºå¤šäº†ã€‚"</p>
<p><strong>PHP çš„å·¥ä½œæ–¹å¼ï¼ˆè¿›ç¨‹å¯ä»¥å¤ç”¨ï¼‰</strong>ï¼š</p>
<pre><code class="hljs language-plain" lang="plain">ç¬¬ä¸€æ¬¡è¯·æ±‚ï¼š
  ğŸ›¡ï¸ é˜¿å¸•å¥‡å®ˆæŠ¤è€…ï¼š"å¯åŠ¨ PHP è¿›ç¨‹"
  â†“
  ğŸ§µ PHP ç»‡å¸ƒå¸ˆï¼š"è¿›ç¨‹ï¼ˆæ•´ä¸ªé€è´§çš„ä»»åŠ¡ï¼‰å‡†å¤‡å¥½äº†"
  â†“
  ğŸ§µ è¿›ç¨‹ = æ•´ä¸ªé€è´§çš„ä»»åŠ¡
  â†“
  ğŸ§µ éœ€è¦åšè¿‡è¿™ä¸€å•å­çš„è¿è¾“å›¢é˜Ÿ
  â†“
  ğŸ§µ è¿è¾“å›¢é˜Ÿéœ€è¦è®°å½•è·¯å¾„ï¼ˆä»»åŠ¡å¤æ‚ï¼‰
  â†“
  ğŸ§µ å¤„ç†è®¢å•ï¼ˆä¸€ä¸ªä¸ªä»“åº“å»å¼€ï¼‰
  â†“
  ğŸ§µ è¿›ç¨‹ä¿ç•™ï¼ˆæ•´ä¸ªé€è´§çš„ä»»åŠ¡è¿˜åœ¨ï¼Œè¿è¾“å›¢é˜Ÿæ²¡æœ‰é£æ•£ï¼‰

ç¬¬äºŒæ¬¡è¯·æ±‚ï¼š
  ğŸ›¡ï¸ é˜¿å¸•å¥‡å®ˆæŠ¤è€…ï¼š"å¤ç”¨ PHP è¿›ç¨‹"
  â†“
  ğŸ§µ PHP ç»‡å¸ƒå¸ˆï¼š"è¿›ç¨‹ï¼ˆæ•´ä¸ªé€è´§çš„ä»»åŠ¡ï¼‰è¿˜åœ¨ï¼Œä½†æˆ‘éœ€è¦é‡æ–°è£…è´§..."
  â†“
  ğŸ§µ é‡æ–°åˆå§‹åŒ– PHP ç¯å¢ƒï¼ˆé‡æ–°è£…è´§ï¼‰
  â†“
  ğŸ§µ éœ€è¦åšè¿‡è¿™ä¸€å•å­çš„è¿è¾“å›¢é˜Ÿ
  â†“
  ğŸ§µ è¿è¾“å›¢é˜Ÿéœ€è¦è®°å½•è·¯å¾„ï¼ˆä»»åŠ¡å¤æ‚ï¼‰
  â†“
  ğŸ§µ å¤„ç†è®¢å•ï¼ˆè¿˜æ˜¯è¦ä¸€ä¸ªä¸ªä»“åº“å»å¼€ï¼‰
  â†“
  ğŸ§µ è¿›ç¨‹ä¿ç•™ï¼ˆæ•´ä¸ªé€è´§çš„ä»»åŠ¡è¿˜åœ¨ï¼Œè¿è¾“å›¢é˜Ÿæ²¡æœ‰é£æ•£ï¼‰
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dddb27d751cd4b949d9e13b227b5a582~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Z-p5biI5YKF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768038764&amp;x-signature=EkyDsfJYDiSa5Iou%2F3fpSZFLBnM%3D" alt="image.png" loading="lazy"/></p>
<p><strong>å…³é”®ç†è§£</strong>ï¼š</p>
<ul>
<li><strong>è¿›ç¨‹ = æ•´ä¸ªé€è´§çš„ä»»åŠ¡</strong>ï¼šä¸æ˜¯è½¦é©¬ï¼Œè€Œæ˜¯æ•´ä¸ªé€è´§çš„ä»»åŠ¡</li>
<li><strong>è¿›ç¨‹ï¼ˆæ•´ä¸ªé€è´§çš„ä»»åŠ¡ï¼‰ä¸€ç›´åœ¨</strong>ï¼šPHP è¿›ç¨‹å¯ä»¥ä¿ç•™ï¼Œä¸éœ€è¦æ¯æ¬¡éƒ½é‡æ–°å¯åŠ¨</li>
<li><strong>åŒæ ·çš„è¿è¾“å›¢é˜Ÿï¼Œå¹¶æ²¡æœ‰é£æ•£ï¼Œéšæ—¶å¾…å‘½</strong>ï¼šè¿›ç¨‹å¯ä»¥å¤ç”¨ï¼Œéšæ—¶å¾…å‘½</li>
<li><strong>éœ€è¦åšè¿‡è¿™ä¸€å•å­çš„è¿è¾“å›¢é˜Ÿ</strong>ï¼šæ¯æ¬¡è¯·æ±‚è¿˜æ˜¯è¦é‡æ–°ç»„ç»‡è¿è¾“å›¢é˜Ÿ</li>
<li><strong>è¿è¾“å›¢é˜Ÿéœ€è¦è®°å½•è·¯å¾„</strong>ï¼šä»»åŠ¡å¤æ‚ï¼Œéœ€è¦è¿è¾“å›¢é˜Ÿè®°ä½è·¯å¾„</li>
<li><strong>æ‰§è¡Œä¸€æ ·çš„è¿è¾“ä»»åŠ¡ï¼Œå°±ä¼šè¯†è·¯</strong>ï¼šè¿›ç¨‹å¯ä»¥å¤ç”¨ï¼Œå¯èƒ½æœ‰ä¸€äº›ç¼“å­˜æˆ–ä¼˜åŒ–</li>
<li><strong>ä½†è¿˜æ˜¯è¦ä¸€ä¸ªä¸ªä»“åº“å»å¼€</strong>ï¼šæ¯æ¬¡è¯·æ±‚è¿˜æ˜¯è¦é‡æ–°åŠ è½½å’Œæ‰§è¡Œ PHP è„šæœ¬æ–‡ä»¶</li>
</ul>
<p><strong>ä¸ CGI çš„å¯¹æ¯”</strong>ï¼š</p>
<p><strong>CGIï¼ˆç¬¬ä¸€ä»£ï¼‰</strong>ï¼š</p>
<pre><code class="hljs language-plain" lang="plain">æ¯æ¬¡è¯·æ±‚ï¼š
  å¯åŠ¨æ–°è¿›ç¨‹ï¼ˆæ•´ä¸ªé€è´§çš„ä»»åŠ¡ï¼‰ â†’ å¤„ç†è®¢å• â†’ è¿›ç¨‹ç»“æŸ
  éœ€è¦åšè¿‡è¿™ä¸€å•å­çš„è¿è¾“å›¢é˜Ÿï¼Œè¿è¾“å›¢é˜Ÿéœ€è¦è®°å½•è·¯å¾„ï¼Œä»»åŠ¡å¤æ‚
  æ•´ä¸ªé€è´§ä»»åŠ¡ç”¨å®Œå°±æ²¡äº†ï¼Œè¿è¾“å›¢é˜Ÿé£æ•£äº†
</code></pre>
<p><strong>PHPï¼ˆç¬¬äºŒä»£ï¼‰</strong>ï¼š</p>
<pre><code class="hljs language-plain" lang="plain">æ¯æ¬¡è¯·æ±‚ï¼š
  å¤ç”¨è¿›ç¨‹ï¼ˆæ•´ä¸ªé€è´§çš„ä»»åŠ¡ï¼‰ â†’ å¤„ç†è®¢å• â†’ è¿›ç¨‹ä¿ç•™
  éœ€è¦åšè¿‡è¿™ä¸€å•å­çš„è¿è¾“å›¢é˜Ÿï¼Œè¿è¾“å›¢é˜Ÿéœ€è¦è®°å½•è·¯å¾„ï¼Œä»»åŠ¡å¤æ‚
  æ•´ä¸ªé€è´§ä»»åŠ¡ä¸€ç›´åœ¨ï¼Œè¿è¾“å›¢é˜Ÿæ²¡æœ‰é£æ•£ï¼Œéšæ—¶å¾…å‘½
</code></pre>
<p><strong>æ”¹è¿›</strong>ï¼š</p>
<ul>
<li>âœ… è¿›ç¨‹ï¼ˆæ•´ä¸ªé€è´§çš„ä»»åŠ¡ï¼‰å¯ä»¥å¤ç”¨ï¼Œä¸éœ€è¦æ¯æ¬¡éƒ½é‡æ–°å¯åŠ¨</li>
<li>âœ… åŒæ ·çš„è¿è¾“å›¢é˜Ÿï¼Œå¹¶æ²¡æœ‰é£æ•£ï¼Œéšæ—¶å¾…å‘½</li>
<li>âœ… æ•ˆç‡æ¯”ç¬¬ä¸€ä»£é«˜</li>
<li>âš ï¸ ä½†æ¯æ¬¡è¯·æ±‚è¿˜æ˜¯è¦é‡æ–°åˆå§‹åŒ–ï¼ˆé‡æ–°è£…è´§ï¼‰</li>
<li>âš ï¸ ä½†è¿˜æ˜¯è¦ä¸€ä¸ªä¸ªä»“åº“å»å¼€ï¼ˆé‡æ–°åŠ è½½å’Œæ‰§è¡Œè„šæœ¬æ–‡ä»¶ï¼‰</li>
<li>âš ï¸ ä½†è¿˜æ˜¯è¦éœ€è¦åšè¿‡è¿™ä¸€å•å­çš„è¿è¾“å›¢é˜Ÿï¼Œè¿è¾“å›¢é˜Ÿéœ€è¦è®°å½•è·¯å¾„ï¼Œä»»åŠ¡å¤æ‚</li>
</ul>
<p>ğŸ å¤§èŸ’è›‡æ³•å¸ˆï¼š"æ‰€ä»¥è¯´ï¼Œä»ç¬¬ä¸€ä»£åˆ°ç¬¬äºŒä»£ï¼Œç‰©æµå›¢é˜Ÿä»â€˜å¤–åŒ…ä¸´å·¥â€™è¿›åŒ–æˆäº†â€˜è‡ªå®¶é›‡å‘˜â€™ï¼Œè™½ç„¶æ¬è´§æµç¨‹è¿˜ä¸å¤Ÿè‡ªåŠ¨åŒ–ï¼Œä½†èµ·ç çœå»äº†æ¯æ¬¡é‡å¯å›¢é˜Ÿçš„çƒ¦æ¼ã€‚"</p>
<h3 data-id="heading-9">ğŸ”„ ç¬¬ä¸€ä»£ vs ç¬¬äºŒä»£ï¼šå…³é”®å·®å¼‚å¯¹æ¯”</h3>
<p>ğŸ å¤§èŸ’è›‡æ³•å¸ˆï¼š"è™½ç„¶ç¬¬ä¸€ä»£å’Œç¬¬äºŒä»£éƒ½æ˜¯ä¼ ç»Ÿæ¨¡å¼ï¼Œä½†å®ƒä»¬æœ‰ä¸€ä¸ªå…³é”®å·®å¼‚ï¼š<strong>è¿›ç¨‹æ˜¯å¦å¯ä»¥å¤ç”¨</strong>ã€‚è®©æˆ‘ç”¨ä¸€ä¸ªå¯¹ç…§è¡¨æ¥è¯´æ˜ã€‚"</p>








































<table><thead><tr><th>ç‰¹æ€§</th><th>ç¬¬ä¸€ä»£ï¼ˆCGI/Servletï¼‰</th><th>ç¬¬äºŒä»£ï¼ˆPHP/ASP.NETï¼‰</th></tr></thead><tbody><tr><td><strong>è¿›ç¨‹å¤ç”¨</strong></td><td>âŒ æ¯æ¬¡è¯·æ±‚éƒ½é‡æ–°å¯åŠ¨è¿›ç¨‹</td><td>âœ… è¿›ç¨‹å¯ä»¥å¤ç”¨ï¼Œä¿ç•™åœ¨å†…å­˜ä¸­</td></tr><tr><td><strong>è¿è¾“å›¢é˜Ÿ</strong></td><td>æ¯æ¬¡éƒ½è¦é‡æ–°ç»„ç»‡ï¼Œç”¨å®Œå°±é£æ•£</td><td>è¿è¾“å›¢é˜Ÿä¸é£æ•£ï¼Œéšæ—¶å¾…å‘½</td></tr><tr><td><strong>å¯åŠ¨æˆæœ¬</strong></td><td>é«˜ï¼ˆæ¯æ¬¡éƒ½è¦å¯åŠ¨æ–°è¿›ç¨‹ï¼‰</td><td>ä½ï¼ˆå¤ç”¨å·²æœ‰è¿›ç¨‹ï¼‰</td></tr><tr><td><strong>èµ„æºæ¶ˆè€—</strong></td><td>æŒ‰éœ€æ¶ˆè€—ï¼Œä½†å¯åŠ¨æˆæœ¬é«˜</td><td>æŒç»­å ç”¨ï¼Œä½†å“åº”æ›´å¿«</td></tr><tr><td><strong>æ•ˆç‡</strong></td><td>ä½ï¼ˆæ¯æ¬¡éƒ½è¦é‡æ–°å¼€å§‹ï¼‰</td><td>è¾ƒé«˜ï¼ˆè¿›ç¨‹å¤ç”¨å¸¦æ¥æ•ˆç‡æå‡ï¼‰</td></tr><tr><td><strong>é€‚ç”¨åœºæ™¯</strong></td><td>è®¢å•å¾ˆå°‘çš„åœºæ™¯</td><td>è®¢å•é¢‘ç¹çš„åœºæ™¯</td></tr></tbody></table>
<p><strong>æ ¸å¿ƒå·®å¼‚</strong>ï¼š</p>
<ul>
<li><strong>ç¬¬ä¸€ä»£</strong>ï¼šæ¯æ¬¡è®¢å•éƒ½è¦é‡æ–°å¯åŠ¨æ•´ä¸ªé€è´§ä»»åŠ¡ï¼Œè¿›ç¨‹ç”¨å®Œå°±ç»“æŸï¼Œè¿è¾“å›¢é˜Ÿé£æ•£</li>
<li><strong>ç¬¬äºŒä»£</strong>ï¼šè¿›ç¨‹ï¼ˆæ•´ä¸ªé€è´§çš„ä»»åŠ¡ï¼‰å¯ä»¥å¤ç”¨ï¼Œè¿è¾“å›¢é˜Ÿä¸é£æ•£ï¼Œéšæ—¶å¾…å‘½ï¼Œä½†æ¯æ¬¡è¯·æ±‚è¿˜æ˜¯è¦é‡æ–°åˆå§‹åŒ–</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/796571d6e9504739a7705dde5f7c1c3f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Z-p5biI5YKF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768038764&amp;x-signature=o5cceDLNSun54zjQF0Q4NzUW3m4%3D" alt="image.png" loading="lazy"/></p>
<p><strong>ç¬¬äºŒä»£æ—¶ä»£çš„å‰åç«¯æ¨¡å¼</strong>ï¼š</p>
<p>ğŸ å¤§èŸ’è›‡æ³•å¸ˆï¼š"ç¬¬äºŒä»£æ—¶ä»£ï¼ˆ2000sï¼‰ä¸»è¦æ˜¯ä¼ ç»Ÿæ¨¡å¼ï¼Œå‰åç«¯ä¸åˆ†ç¦»ã€‚é‚£æ—¶å€™è¿˜æ²¡æœ‰çµç‹æ³•å¸ˆï¼ˆç°ä»£å‰ç«¯æ¡†æ¶ï¼‰ï¼Œæ‰€ä»¥ PHP ç»‡å¸ƒå¸ˆå’Œè“ç›¾æ³•å¸ˆç›´æ¥è¿”å› HTML é¡µé¢ã€‚"</p>
<p>ğŸ§µ PHP ç»‡å¸ƒå¸ˆï¼š"æ˜¯çš„ï¼Œåœ¨ PHP æ—¶ä»£ï¼ˆ2000sï¼‰ï¼Œæˆ‘ä¸»è¦æ˜¯ç›´æ¥è¿”å› HTML é¡µé¢ï¼Œå‰åç«¯ä¸åˆ†ç¦»ã€‚é‚£æ—¶å€™è¿˜æ²¡æœ‰çµç‹æ³•å¸ˆï¼Œæ‰€ä»¥æˆ‘ä¸éœ€è¦ä¸çµç‹æ³•å¸ˆåˆä½œã€‚PHP æŠ€æœ¯æœ¬èº«å¯ä»¥æ”¯æŒå‰åç«¯åˆ†ç¦»ï¼ˆæä¾› APIï¼‰ï¼Œä½†é‚£æ—¶å€™å‰ç«¯æŠ€æœ¯è¿˜æ²¡æˆç†Ÿï¼Œæ‰€ä»¥ä¸»è¦æ˜¯ä¼ ç»Ÿæ¨¡å¼ã€‚"</p>
<p>ğŸ›¡ï¸ è“ç›¾æ³•å¸ˆï¼š"è™½ç„¶æ²¡äººè§è¿‡æˆ‘çš„çœŸèº«ï¼Œä½†æˆ‘çš„ ASP.NET ç³»ç»Ÿä¹Ÿæ˜¯è¿™æ ·çš„ã€‚åœ¨ ASP.NET æ—¶ä»£ï¼ˆ2000sï¼‰ï¼Œæˆ‘ä¸»è¦æ˜¯ä¼ ç»Ÿæ¨¡å¼ï¼Œç›´æ¥è¿”å› HTMLï¼Œå‰åç«¯ä¸åˆ†ç¦»ã€‚é‚£æ—¶å€™è¿˜æ²¡æœ‰çµç‹æ³•å¸ˆï¼Œæ‰€ä»¥æˆ‘ä¸éœ€è¦ä¸çµç‹æ³•å¸ˆåˆä½œã€‚ä½† ASP.NET æŠ€æœ¯æœ¬èº«å¯ä»¥æ”¯æŒå‰åç«¯åˆ†ç¦»ï¼ˆæä¾› APIï¼‰ï¼Œåªæ˜¯é‚£æ—¶å€™å‰ç«¯æŠ€æœ¯è¿˜æ²¡æˆç†Ÿï¼Œæ‰€ä»¥ä¸»è¦æ˜¯ä¼ ç»Ÿæ¨¡å¼ã€‚"</p>
<p><strong>å…³é”®ç†è§£</strong>ï¼š</p>
<ul>
<li><strong>ç¬¬äºŒä»£æ—¶ä»£ï¼ˆ2000sï¼‰</strong>ï¼šä¸»è¦æ˜¯ä¼ ç»Ÿæ¨¡å¼ï¼ŒPHP/ASP.NET ç›´æ¥è¿”å› HTMLï¼Œ<strong>å‰åç«¯ä¸åˆ†ç¦»</strong></li>
<li><strong>PHP/ASP.NET æŠ€æœ¯æœ¬èº«</strong>ï¼šå¯ä»¥æ”¯æŒå‰åç«¯åˆ†ç¦»ï¼ˆæä¾› APIï¼‰ï¼Œä½†é‚£æ—¶å€™å‰ç«¯æŠ€æœ¯è¿˜æ²¡æˆç†Ÿ</li>
<li><strong>ç°ä»£ PHP/ASP.NETï¼ˆ2010s+ï¼‰</strong>ï¼šå¯ä»¥å‰åç«¯åˆ†ç¦»ï¼Œä¸çµç‹æ³•å¸ˆåˆä½œï¼Œæä¾› REST API</li>
<li><strong>å‰åç«¯åˆ†ç¦»çš„æ—¶ä»£</strong>ï¼š2010s+ï¼Œç°ä»£å‰ç«¯æ¡†æ¶ï¼ˆReact/Vue/Angularï¼‰å…´èµ·ï¼Œåç«¯æä¾› API</li>
</ul>
<hr/>
<h2 data-id="heading-10">ğŸ“š ç³»åˆ—å¯¼èˆª</h2>
<p><strong>ç³»åˆ—åç§°</strong>ï¼šWeb API æ¼”è¿›å²ï¼šä» CGI åˆ° FastAPI<br/>
<em>ï¼ˆç”¨ç‰©æµç³»ç»Ÿæ¯”å–»è®²è§£ Web API æ¼”è¿›ï¼‰</em></p>
<ul>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">ç‰‡æ®µ1ï¼šä»é‡å¯é©¬è½¦åˆ°å¸¸é©»è¿è¾“é˜Ÿ</a> â† å½“å‰æ–‡ç« </li>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">ç‰‡æ®µ2ï¼šä»éšå«éšåˆ°åˆ°è§„èŒƒé…é€</a></li>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">ç‰‡æ®µ3ï¼šä»ç‰©æµæ³•å…¸åˆ°æ™ºèƒ½è°ƒåº¦</a></li>
</ul>
<hr/>
<blockquote>
<p>ğŸ“ ç‰‡æ®µ1 ç»“æŸ<br/>
ğŸ”„ ä¸‹ä¸€ç‰‡æ®µé¢„å‘Šï¼š<br/>
è¿è¾“å›¢é˜Ÿç»ˆäºä¸ç”¨æ‰‹åŠ¨å†™åœ°å€äº†ï¼REST API æ ‡å‡†ç™»åœºï¼Œä¸ºç‰©æµä¸–ç•Œå¸¦æ¥äº†"é€è´§åè®®"ä¸"èµ„æºæ´¾å‘è§„åˆ™"ã€‚<br/>
å‰åç«¯å¼€å§‹çœŸæ­£åˆ†å·¥ï¼Œä¸€åœºç°ä»£ç‰©æµé©å‘½æ‚„ç„¶å‘ç”Ÿâ€¦â€¦</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Wireshark TS | è¶…æ—¶é‡ä¼ æ—¶é—´ä¸ç¿»å€]]></title>    <link>https://juejin.cn/post/7589962224795762726</link>    <guid>https://juejin.cn/post/7589962224795762726</guid>    <pubDate>2026-01-02T06:38:01.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589962224795762726" data-draft-id="7589958976226557962" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Wireshark TS | è¶…æ—¶é‡ä¼ æ—¶é—´ä¸ç¿»å€"/> <meta itemprop="keywords" content="Wireshark,TCP/IP,ç½‘ç»œåè®®"/> <meta itemprop="datePublished" content="2026-01-02T06:38:01.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="7ACE"/> <meta itemprop="url" content="https://juejin.cn/user/4033458369739741"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Wireshark TS | è¶…æ—¶é‡ä¼ æ—¶é—´ä¸ç¿»å€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4033458369739741/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    7ACE
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-02T06:38:01.000Z" title="Fri Jan 02 2026 06:38:01 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>çœ‹å›¾çŒœæ•…éšœç³»åˆ—ï¼Œæ¥è‡ªäºæŠ€æœ¯ç¾¤è®¨è®ºçš„åˆä¸€ä¸ªé—®é¢˜ï¼Œæ•°æ®åŒ…å¦‚ä¸‹å›¾ï¼ŒNo.4900 åŸå§‹æ•°æ®åŒ…ï¼ŒNo.4901 é—´éš”208msç¬¬ä¸€æ¬¡é‡ä¼ ï¼ŒNo.4903 é—´éš”208msç¬¬äºŒæ¬¡é‡ä¼ ã€‚</p>

<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/aecb2aafa0d84c0faf743008b4fbfaa0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgN0FDRQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767940681&amp;x-signature=2NG%2Fiu4ZxywZHPStU7GDT3bFzZE%3D" alt="" loading="lazy"/></p>
<p><strong>é—®é¢˜å°±æ˜¯æ•°æ®åŒ…ç¬¬äºŒæ¬¡è¶…æ—¶é‡ä¼ ï¼Œé—´éš”æ—¶é—´ä¸ºä»€ä¹ˆæ²¡æœ‰ç¿»å€ã€‚</strong></p>
<h2 data-id="heading-1">é—®é¢˜åˆ†æ</h2>
<p>è¯´å®è¯ï¼Œåˆšçœ‹åˆ°è¿™ä¸ªæ•°æ®åŒ…æ–‡ä»¶æˆªå›¾æ—¶ï¼Œè®°å¿†ä¸­ç«Ÿç„¶æ²¡æœ‰ä¸€ä¸ç›¸ä¼¼çš„æ•…éšœç°è±¡ï¼Œç•¥æ„Ÿçº³é—·ã€‚å®é™…è§£è¯»ï¼Œä¹Ÿæ²¡æœ‰ç‰¹åˆ«åå¸¸çš„è¿¹è±¡ï¼Œåªæ˜¯åœ¨é—´éš” 384s åï¼Œå®¢æˆ·ç«¯æ‰€å‘é€çš„æ•°æ®æ®µç”±äºå¾—ä¸åˆ° ACK ç¡®è®¤ï¼Œè¿›è¡Œäº†é‡ä¼ çš„è¿‡ç¨‹ã€‚å½“ç„¶ç”±äºç¬¬äºŒæ¬¡é‡ä¼ çš„è¶…æ—¶æ—¶é—´æœªç¿»å€çš„åŸå› ï¼Œæ‰€ä»¥é¦–å…ˆæˆ‘å¹¶æ²¡æœ‰æŠŠè¿™äº›é‡ä¼ å…¨éƒ¨å®šä¹‰ä¸ºæ˜¯è¶…æ—¶é‡ä¼ ã€‚</p>
<p>ä½†æ—¢ç„¶æ˜¯ä¸€ä¸ªæ•°æ®æ®µçš„é‡ä¼ ï¼Œæ²¡æœ‰å…¶ä»–è¾“å…¥çš„ä¿¡æ¯ï¼Œé‚£ä¹ˆå¯ä»¥å…ˆç®€å•æ¨¡æ‹Ÿè¶…æ—¶é‡ä¼ ï¼Œå¯¹æ¯”çœ‹ä¸‹ã€‚</p>
<pre><code class="hljs language-plain" lang="plain"># cat test.pkt 
0  socket(..., SOCK_STREAM, IPPROTO_TCP) = 3
+0 setsockopt(3, SOL_SOCKET, SO_REUSEADDR, [1], 4) = 0
+0 setsockopt(3, SOL_TCP, TCP_NODELAY, [1], 4) = 0
+0 bind(3, ..., ...) = 0
+0 listen(3, 1) = 0

+0 &lt; S 0:0(0) win 10000 &lt;mss 1000&gt;
+0 &gt; S. 0:0(0) ack 1 &lt;...&gt;
+0.01 &lt; . 1:1(0) ack 1 win 10000
+0 accept(3, ..., ...) = 4

+0.1 write(4,...,100) = 100

+0 `sleep 5`
#
</code></pre>
<p>æ‰§è¡Œè„šæœ¬ï¼ŒåŒæ—¶é€šè¿‡ tcpdump æŠ“å–æ•°æ®åŒ…ï¼Œç°è±¡å¦‚ä¸‹ã€‚</p>
<p>å¯ä»¥çœ‹åˆ°å‘å‡ºæ•°æ®æ®µåï¼Œç¬¬ä¸€æ¬¡é‡ä¼ é—´éš”æ—¶é—´ä¸º213msï¼Œè€Œç¬¬äºŒæ¬¡é‡ä¼ é—´éš”æ—¶é—´ä¸º436msï¼Œä¹Ÿå°±æ˜¯è¯´éƒ½ç¬¦åˆè¶…æ—¶é‡ä¼ çš„ç°è±¡ï¼Œè¶…æ—¶æ—¶é—´æ˜¯æ­£å¸¸ç¿»å€äº†ã€‚</p>
<pre><code class="hljs language-plain" lang="plain"># packetdrill test.pkt
#


# tcpdump -i any -nn port 8080
tcpdump: data link type LINUX_SLL2
tcpdump: verbose output suppressed, use -v[v]... for full protocol decode
listening on any, link-type LINUX_SLL2 (Linux cooked v2), snapshot length 262144 bytes
22:25:38.983501 tun0  In  IP 192.0.2.1.34827 &gt; 192.168.209.238.8080: Flags [S], seq 0, win 10000, options [mss 1000], length 0
22:25:38.983536 tun0  Out IP 192.168.209.238.8080 &gt; 192.0.2.1.34827: Flags [S.], seq 3745491915, ack 1, win 64240, options [mss 1460], length 0
22:25:38.993637 tun0  In  IP 192.0.2.1.34827 &gt; 192.168.209.238.8080: Flags [.], ack 1, win 10000, length 0
22:25:39.093744 tun0  Out IP 192.168.209.238.8080 &gt; 192.0.2.1.34827: Flags [P.], seq 1:101, ack 1, win 64240, length 100: HTTP
22:25:39.307178 tun0  Out IP 192.168.209.238.8080 &gt; 192.0.2.1.34827: Flags [P.], seq 1:101, ack 1, win 64240, length 100: HTTP
22:25:39.743184 tun0  Out IP 192.168.209.238.8080 &gt; 192.0.2.1.34827: Flags [P.], seq 1:101, ack 1, win 64240, length 100: HTTP
22:25:40.607187 tun0  Out IP 192.168.209.238.8080 &gt; 192.0.2.1.34827: Flags [P.], seq 1:101, ack 1, win 64240, length 100: HTTP
22:25:42.335186 tun0  Out IP 192.168.209.238.8080 &gt; 192.0.2.1.34827: Flags [P.], seq 1:101, ack 1, win 64240, length 100: HTTP
#
</code></pre>
<p>å½“ç„¶ï¼Œç”±äºç¬¬ä¸€ä¸ªæµ‹è¯•å¹¶æ²¡æœ‰æ”¯æŒ SACKï¼Œå› æ­¤ç»§ç»­å¯ä»¥å¢åŠ å°è¯•æµ‹è¯•ã€‚</p>
<pre><code class="hljs language-plain" lang="plain"># cat test.pkt 
0  socket(..., SOCK_STREAM, IPPROTO_TCP) = 3
+0 setsockopt(3, SOL_SOCKET, SO_REUSEADDR, [1], 4) = 0
+0 setsockopt(3, SOL_TCP, TCP_NODELAY, [1], 4) = 0
+0 bind(3, ..., ...) = 0
+0 listen(3, 1) = 0

+0 &lt; S 0:0(0) win 10000 &lt;mss 1000,nop,nop,sackOK&gt;
+0 &gt; S. 0:0(0) ack 1 &lt;...&gt;
+0.01 &lt; . 1:1(0) ack 1 win 10000
+0 accept(3, ..., ...) = 4

+0.1 write(4,...,100) = 100

+0 `sleep 5`
#
</code></pre>
<p>æ‰§è¡Œè„šæœ¬ï¼ŒåŒæ—¶é€šè¿‡ tcpdump æŠ“å–æ•°æ®åŒ…ï¼Œç°è±¡å¦‚ä¸‹ã€‚</p>
<p>å¯ä»¥çœ‹åˆ°å‘å‡ºæ•°æ®æ®µåï¼Œç¬¬ä¸€æ¬¡é‡ä¼ é—´éš”æ—¶é—´ä¸º213msï¼Œè€Œç¬¬äºŒæ¬¡é‡ä¼ é—´éš”æ—¶é—´ä¸º216msï¼Œå’Œé—®é¢˜æˆªå›¾ä¸€æ¨¡ä¸€æ ·çš„ç°è±¡ï¼Œç¬¬äºŒæ¬¡é‡ä¼ çš„è¶…æ—¶æ—¶é—´å¹¶æœªç¿»å€ã€‚</p>
<pre><code class="hljs language-plain" lang="plain"># packetdrill test.pkt
#


# tcpdump -i any -nn port 8080
tcpdump: data link type LINUX_SLL2
tcpdump: verbose output suppressed, use -v[v]... for full protocol decode
listening on any, link-type LINUX_SLL2 (Linux cooked v2), snapshot length 262144 bytes
22:35:37.983481 tun0  In  IP 192.0.2.1.54829 &gt; 192.168.44.251.8080: Flags [S], seq 0, win 10000, options [mss 1000,nop,nop,sackOK], length 0
22:35:37.983508 tun0  Out IP 192.168.44.251.8080 &gt; 192.0.2.1.54829: Flags [S.], seq 2010255923, ack 1, win 64240, options [mss 1460,nop,nop,sackOK], length 0
22:35:37.993598 tun0  In  IP 192.0.2.1.54829 &gt; 192.168.44.251.8080: Flags [.], ack 1, win 10000, length 0
22:35:38.093722 tun0  Out IP 192.168.44.251.8080 &gt; 192.0.2.1.54829: Flags [P.], seq 1:101, ack 1, win 64240, length 100: HTTP
22:35:38.307185 tun0  Out IP 192.168.44.251.8080 &gt; 192.0.2.1.54829: Flags [P.], seq 1:101, ack 1, win 64240, length 100: HTTP
22:35:38.523213 tun0  Out IP 192.168.44.251.8080 &gt; 192.0.2.1.54829: Flags [P.], seq 1:101, ack 1, win 64240, length 100: HTTP
22:35:38.975187 tun0  Out IP 192.168.44.251.8080 &gt; 192.0.2.1.54829: Flags [P.], seq 1:101, ack 1, win 64240, length 100: HTTP
22:35:39.839188 tun0  Out IP 192.168.44.251.8080 &gt; 192.0.2.1.54829: Flags [P.], seq 1:101, ack 1, win 64240, length 100: HTTP
22:35:41.567190 tun0  Out IP 192.168.44.251.8080 &gt; 192.0.2.1.54829: Flags [P.], seq 1:101, ack 1, win 64240, length 100: HTTP
#
</code></pre>
<p>é€šè¿‡ä¸¤æ¬¡å®éªŒå¯¹æ¯”ï¼Œå¯çŸ¥ä»…ä»…æ˜¯å¢åŠ äº† SACK çš„æ”¯æŒï¼Œå°±äº§ç”Ÿäº†ä¸ä¸€æ ·çš„ç»“æœï¼ŒåŒæ—¶ç»“åˆæ•°æ®åŒ…çš„é‡ä¼ æ—¶é—´ï¼Œå¯ä»¥åˆ¤æ–­å‡ºç¬¬ä¸€æ¬¡é‡ä¼ å¹¶ä¸æ˜¯æ™®é€šçš„è¶…æ—¶é‡ä¼ ï¼Œè€Œåœ¨å®ƒå‘å‡ºä¹‹åï¼Œçœ‹åˆ°çš„ç¬¬äºŒæ¬¡é‡ä¼ ï¼Œæ‰æ˜¯çœŸæ­£çš„ç¬¬ä¸€æ¬¡è¶…æ—¶é‡ä¼ ï¼Œä¹‹åçš„ä¹Ÿæ‰æ˜¯ RTO ä¸æ–­ç¿»å€åçš„è¶…æ—¶é‡ä¼ è¿‡ç¨‹ã€‚</p>
<p>é‚£ä¹ˆç¬¬ä¸€æ¬¡é‡ä¼ æ˜¯ä»€ä¹ˆï¼Ÿ<strong>åœ¨ linux ç³»ç»Ÿä¸­ï¼Œå®ƒå®é™…æ˜¯ä¸€ä¸ª TLP æ•°æ®åŒ…ï¼Œåœ¨SACKå¼€å¯ä¸‹ï¼ŒTLP ä¼šé‡ä¼ å¼ºåˆ¶ä¼ è¾“è¿˜æ²¡æœ‰æ”¶åˆ° ACK ç¡®è®¤çš„æŠ¥æ–‡é‡Œé¢çš„æœ€åä¸€ä¸ªæŠ¥æ–‡æˆ–è€…æœªå‘é€çš„æ–°æŠ¥æ–‡ã€‚</strong> è€Œåœ¨ä¸Šé¢çš„æµ‹è¯•ä»¥åŠé—®é¢˜æˆªå›¾åœºæ™¯ä¸­ï¼Œä¹Ÿæ¯”è¾ƒç‰¹æ®Šï¼Œå› ä¸ºåªå‘é€äº†ä¸€ä¸ªæŠ¥æ–‡ï¼Œæ‰€ä»¥ç¬¬ä¸€æ¬¡é‡ä¼ ä¹Ÿå°±æ˜¯å‘é€äº† TLP å®šä¹‰ä¸­çš„æœ€åä¸€ä¸ªæŠ¥æ–‡ï¼Œä¹çœ‹èµ·æ¥ï¼Œç¡®å®åƒæ˜¯åœ¨è¿›è¡Œè¶…æ—¶é‡ä¼ ã€‚</p>
<h2 data-id="heading-2">TLP ä»‹ç»</h2>
<p>Tail Loss Probe (TLP)æ˜¯ä¸€ä¸ªå‘é€ç«¯ç®—æ³•ï¼Œä¸»è¦ç›®çš„æ˜¯ä½¿ç”¨å¿«é€Ÿé‡ä¼ å–ä»£RTOè¶…æ—¶é‡ä¼ æ¥å¤„ç†å°¾åŒ…ä¸¢å¤±åœºæ™¯ã€‚å¦‚æœTCPå°¾åŒ…ä¸¢å¤±ï¼Œå¦‚æœä¾é RTOè¶…æ—¶è¿›è¡Œé‡ä¼ ä¼šå¸¦æ¥æ¯”è¾ƒå¤§çš„å»¶è¿Ÿï¼Œè¿›è€Œå½±å“ç”¨æˆ·ä½“éªŒã€‚</p>
<p>é‚£ä¹ˆå¦‚æœä¸€ä¸ªTCPè¿æ¥æ²¡æœ‰åœ¨ä¸€æ®µæ—¶é—´å†…æ²¡æœ‰æ”¶åˆ°ACKæŠ¥æ–‡ï¼ŒTLPä¼šå¼ºåˆ¶ä¼ è¾“è¿˜æ²¡æœ‰æ”¶åˆ°ACKç¡®è®¤çš„æŠ¥æ–‡é‡Œé¢çš„æœ€åä¸€ä¸ªæŠ¥æ–‡æˆ–è€…æœªå‘é€çš„æ–°æŠ¥æ–‡(ä¼ è¾“çš„è¿™ä¸ªæŠ¥æ–‡å°±å«åšloss probe)ã€‚</p>
<p><strong>tcp_early_retrans - INTEGER</strong></p>
<p>Enable Early Retransmit (ER), per RFC 5827. ER lowers the threshold for triggering fast retransmit when the amount of outstanding data is small and when no previously unsent data can be transmitted (such that limited transmit could be used). Also controls the use of Tail loss probe (TLP) that converts RTOs occurring due to tail losses into fast recovery (draft-dukkipati-tcpm-tcp-loss-probe-01).</p>
<p>Possible values:</p>
<p>0 disables ER</p>
<p>1 enables ER</p>
<p>2 enables ER but delays fast recovery and fast retransmit by a fourth of RTT. This mitigates connection falsely recovers when network has a small degree of reordering (less than 3 packets).</p>
<p>3 enables delayed ER and TLP.</p>
<p>4 enables TLP only.</p>
<p>Default: 3</p>
<h2 data-id="heading-3">è¯æ˜å®éªŒ</h2>
<p>åœ¨ linux ä¸­ <strong>tcp_early_retrans</strong> å‚æ•°é»˜è®¤å€¼ä¸º 3ï¼Œä¹Ÿå°±æ˜¯åŒæ—¶å¯ç”¨äº† Delayed ER å’Œ TLPã€‚</p>
<pre><code class="hljs language-plain" lang="plain"># sysctl -a|grep early_retrans
net.ipv4.tcp_early_retrans = 3
# 
</code></pre>
<p>å¦‚æœæƒ³è¯æ˜ç¡®å®å’Œ TLP ç›¸å…³ï¼Œå¯ä»¥ä»ä¸‰ä¸ªæ–¹é¢æµ‹è¯•ä¸‹ï¼š</p>
<ol>
<li>å…³é—­ SACKï¼›ï¼ˆä¸Šè¿°å®éªŒå·²æµ‹è¯•ï¼‰</li>
<li>net.ipv4.tcp_early_retrans å€¼ä¿®æ”¹ä¸º 4ï¼Œä»…å¼€å¯ TLPï¼›</li>
<li>net.ipv4.tcp_early_retrans å€¼ä¿®æ”¹ä¸º 0ï¼Œå…³é—­ ER ä»¥åŠ TLPã€‚</li>
</ol>
<p>é¦–å…ˆä»…å¼€å¯ TLP çš„æƒ…å†µï¼Œç»§ç»­æµ‹è¯•åœ¨ SACK å¼€å¯çš„è„šæœ¬ã€‚</p>
<pre><code class="hljs language-plain" lang="plain"># sysctl -q net.ipv4.tcp_early_retrans=4
# sysctl -a|grep early_retrans
net.ipv4.tcp_early_retrans = 4
# 
</code></pre>
<p>æ‰§è¡Œè„šæœ¬ï¼ŒåŒæ—¶é€šè¿‡ tcpdump æŠ“å–æ•°æ®åŒ…ï¼Œç°è±¡å¦‚ä¸‹ï¼Œå¯ä»¥çœ‹åˆ°ä¸é»˜è®¤å€¼ 3 çš„æµ‹è¯•ç»“æœä¸€è‡´ï¼Œè¯´æ˜äº†å’Œ ER é‡ä¼ æ— å…³ï¼Œä¸ TLP å¯èƒ½æœ‰å…³ï¼ˆä¸¥è°¨çš„è¯´æ³•ï¼Œå› ä¸ºä¹Ÿæœ‰å¯èƒ½æ˜¯æŸæŸé‡ä¼ å¼•èµ·ï¼‰ã€‚</p>
<pre><code class="hljs language-plain" lang="plain"># tcpdump -i any -nn port 8080
tcpdump: data link type LINUX_SLL2
tcpdump: verbose output suppressed, use -v[v]... for full protocol decode
listening on any, link-type LINUX_SLL2 (Linux cooked v2), snapshot length 262144 bytes
10:12:36.563494 tun0  In  IP 192.0.2.1.50647 &gt; 192.168.165.47.8080: Flags [S], seq 0, win 10000, options [mss 1000,nop,nop,sackOK], length 0
10:12:36.563526 tun0  Out IP 192.168.165.47.8080 &gt; 192.0.2.1.50647: Flags [S.], seq 3170095082, ack 1, win 64240, options [mss 1460,nop,nop,sackOK], length 0
10:12:36.573627 tun0  In  IP 192.0.2.1.50647 &gt; 192.168.165.47.8080: Flags [.], ack 1, win 10000, length 0
10:12:36.673761 tun0  Out IP 192.168.165.47.8080 &gt; 192.0.2.1.50647: Flags [P.], seq 1:101, ack 1, win 64240, length 100: HTTP
10:12:36.887178 tun0  Out IP 192.168.165.47.8080 &gt; 192.0.2.1.50647: Flags [P.], seq 1:101, ack 1, win 64240, length 100: HTTP
10:12:37.103192 tun0  Out IP 192.168.165.47.8080 &gt; 192.0.2.1.50647: Flags [P.], seq 1:101, ack 1, win 64240, length 100: HTTP
10:12:37.535174 tun0  Out IP 192.168.165.47.8080 &gt; 192.0.2.1.50647: Flags [P.], seq 1:101, ack 1, win 64240, length 100: HTTP
10:12:38.399184 tun0  Out IP 192.168.165.47.8080 &gt; 192.0.2.1.50647: Flags [P.], seq 1:101, ack 1, win 64240, length 100: HTTP
10:12:40.127180 tun0  Out IP 192.168.165.47.8080 &gt; 192.0.2.1.50647: Flags [P.], seq 1:101, ack 1, win 64240, length 100: HTTP
#
</code></pre>
<p>ç»§ç»­å…³é—­ TLP çš„æƒ…å†µï¼Œä»ç„¶æ˜¯æµ‹è¯• SACK å¼€å¯çš„è„šæœ¬ã€‚</p>
<pre><code class="hljs language-plain" lang="plain"># sysctl -q net.ipv4.tcp_early_retrans=0
# sysctl -a|grep early_retrans
net.ipv4.tcp_early_retrans = 0
# 
</code></pre>
<p>æ‰§è¡Œè„šæœ¬ï¼ŒåŒæ—¶é€šè¿‡ tcpdump æŠ“å–æ•°æ®åŒ…ï¼Œç°è±¡å¦‚ä¸‹ï¼Œå¯ä»¥çœ‹åˆ°ä¸å…³é—­ SACK çš„é¦–æ¬¡æµ‹è¯•ç»“æœä¸€è‡´ï¼Œæ ‡å‡†çš„è¶…æ—¶é‡ä¼ ç°è±¡ã€‚å¯¹äºå…³é—­ TLP å’Œå¼€å¯ TLP çš„ä¸¤æ¬¡å®éªŒç»“æœï¼Œå¯å¾—çŸ¥ç¬¬ä¸€æ¬¡é‡ä¼ æ•°æ®åŒ…ç¡®å®æ˜¯ TLP æŠ¥æ–‡ã€‚</p>
<pre><code class="hljs language-plain" lang="plain"># tcpdump -i any -nn port 8080
tcpdump: data link type LINUX_SLL2
tcpdump: verbose output suppressed, use -v[v]... for full protocol decode
listening on any, link-type LINUX_SLL2 (Linux cooked v2), snapshot length 262144 bytes
10:17:24.423493 tun0  In  IP 192.0.2.1.35821 &gt; 192.168.117.180.8080: Flags [S], seq 0, win 10000, options [mss 1000,nop,nop,sackOK], length 0
10:17:24.423527 tun0  Out IP 192.168.117.180.8080 &gt; 192.0.2.1.35821: Flags [S.], seq 1548070828, ack 1, win 64240, options [mss 1460,nop,nop,sackOK], length 0
10:17:24.433632 tun0  In  IP 192.0.2.1.35821 &gt; 192.168.117.180.8080: Flags [.], ack 1, win 10000, length 0
10:17:24.533759 tun0  Out IP 192.168.117.180.8080 &gt; 192.0.2.1.35821: Flags [P.], seq 1:101, ack 1, win 64240, length 100: HTTP
10:17:24.751193 tun0  Out IP 192.168.117.180.8080 &gt; 192.0.2.1.35821: Flags [P.], seq 1:101, ack 1, win 64240, length 100: HTTP
10:17:25.183189 tun0  Out IP 192.168.117.180.8080 &gt; 192.0.2.1.35821: Flags [P.], seq 1:101, ack 1, win 64240, length 100: HTTP
10:17:26.047181 tun0  Out IP 192.168.117.180.8080 &gt; 192.0.2.1.35821: Flags [P.], seq 1:101, ack 1, win 64240, length 100: HTTP
10:17:27.775172 tun0  Out IP 192.168.117.180.8080 &gt; 192.0.2.1.35821: Flags [P.], seq 1:101, ack 1, win 64240, length 100: HTTP
#
</code></pre>
<h2 data-id="heading-4">é—®é¢˜æ€»ç»“</h2>
<p>å®é™…ä¸Šå¯¹äºé‡ä¼ è§¦å‘å‡ºæ¥çš„åŸå› ï¼Œæˆ–è€…è¯´é‡ä¼ çš„å½’ç±»ï¼Œè¿œè¿œä¸æ­¢ä¼—æ‰€å‘¨çŸ¥çš„è¶…æ—¶é‡ä¼ ã€å¿«é€Ÿé‡ä¼ è¿™ä¸¤ç§ï¼Œåç»­å†æ…¢æ…¢å±•å¼€åˆ†äº«å§ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[GDAL å®ç°çŸ¢é‡æ•°æ®è¯»å†™]]></title>    <link>https://juejin.cn/post/7590213554798428195</link>    <guid>https://juejin.cn/post/7590213554798428195</guid>    <pubDate>2026-01-03T08:13:28.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7590213554798428195" data-draft-id="7590292192988807208" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="GDAL å®ç°çŸ¢é‡æ•°æ®è¯»å†™"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-03T08:13:28.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="GISä¹‹è·¯"/> <meta itemprop="url" content="https://juejin.cn/user/4346787284915481"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            GDAL å®ç°çŸ¢é‡æ•°æ®è¯»å†™
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4346787284915481/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    GISä¹‹è·¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-03T08:13:28.000Z" title="Sat Jan 03 2026 08:13:28 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p><strong>â</strong>GIS æ•°æ®çš„è¯»å†™ä½œä¸ºä¸€ä¸ªåŸºç¡€æ“ä½œï¼Œæ˜¯æ¯ä¸€ä¸ªGISerçš„å¿…ä¿®è¯¾ã€‚åœ¨ä½¿ç”¨<code>GDAL</code>è¯»å–çŸ¢é‡æ•°æ®æ—¶ï¼Œéœ€è¦æŒæ¡å…¶åŸºæœ¬çš„æ•°æ®ç»“æ„ä¸ç±»å‹ï¼Œäº†è§£å¸¸ç”¨çš„æ•°æ®è¯»å–æ–¹æ³•ï¼Œè¿™æ ·å¼€å‘æ—¶æ‰ä¼šèµ·åˆ°äº‹åŠåŠŸå€çš„æ•ˆæœã€‚</p>
</blockquote>
<p>åœ¨ä¹‹å‰çš„æ–‡ç« ä¸­è®²äº†å¦‚ä½•ä½¿ç”¨<code>GDAL</code>æˆ–è€…<code>ogr2ogr</code>å·¥å…·å°†<code>txt</code>ä»¥åŠ<code>csv</code>æ–‡æœ¬æ•°æ®è½¬æ¢ä¸º<code>Shp</code>æ ¼å¼ï¼Œæœ¬ç¯‡æ•™ç¨‹åœ¨ä¹‹å‰ä¸€ç³»åˆ—æ–‡ç« çš„åŸºç¡€ä¸Šè®²è§£<code>GDAL</code>å®ç°çŸ¢é‡æ•°æ®è¯»å†™ã€‚</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FQtb_BJw91nKrFMeoa7WcxA" target="_blank" title="https://mp.weixin.qq.com/s/Qtb_BJw91nKrFMeoa7WcxA" ref="nofollow noopener noreferrer">GDAL ç®€ä»‹</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FFLWfZItLj24JYicQEX-PbQ" target="_blank" title="https://mp.weixin.qq.com/s/FLWfZItLj24JYicQEX-PbQ" ref="nofollow noopener noreferrer">GDAL ä¸‹è½½å®‰è£…</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2Fu0539e3CM2q4Y3MbMxxZKQ" target="_blank" title="https://mp.weixin.qq.com/s/u0539e3CM2q4Y3MbMxxZKQ" ref="nofollow noopener noreferrer">GDAL å¼€å‘èµ·æ­¥</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2F0DGoC0oFHizJbweBnEvI-g" target="_blank" title="https://mp.weixin.qq.com/s/0DGoC0oFHizJbweBnEvI-g" ref="nofollow noopener noreferrer">GDAL å®ç° GIS æ•°æ®è¯»å–è½¬æ¢ï¼ˆå…¨ï¼‰</a></li>
</ul>
<p>å¦‚æœä½ è¿˜æ²¡æœ‰çœ‹è¿‡ï¼Œå»ºè®®ä»ä»¥ä¸Šå†…å®¹å¼€å§‹ã€‚</p>
<h2 data-id="heading-0">1. å¼€å‘ç¯å¢ƒ</h2>
<p>æœ¬æ–‡ä½¿ç”¨å¦‚ä¸‹å¼€å‘ç¯å¢ƒï¼Œä»¥ä¾›å‚è€ƒã€‚</p>
<p>æ—¶é—´ï¼š<code>2025å¹´</code></p>
<p>ç³»ç»Ÿï¼š<code>Windows 11</code></p>
<p>Pythonï¼š<code>3.11.7</code></p>
<p>GDALï¼š<code>3.11.1</code></p>
<h2 data-id="heading-1">2. çŸ¢é‡æ•°æ®è¯»å–æ¥å£</h2>
<p>åœ¨<code>GDAL</code>ä¸­ï¼ŒçŸ¢é‡æ•°æ®æ¨¡å‹éµå¾ªä¸‹å›¾æ‰€ç¤ºç»“æ„ï¼Œ<strong>æ•°æ®é©±åŠ¨-&gt;æ•°æ®æº-&gt;å›¾å±‚-&gt;å±æ€§ã€‚</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1638b36a0a8d49b4ac570b6cfe2bb8dc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768032807&amp;x-signature=YwTmJjiislGhwTTXbEu%2BjO77he8%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-2"><strong>2.1. è·å–æ•°æ®æº</strong></h2>
<p><code>GDAL</code>ä¸­å¯ä»¥ä½¿ç”¨<code>Open</code>æ–¹æ³•ç›´æ¥æ‰“å¼€æ•°æ®æºï¼Œè¿›è€Œè¯»å–å›¾å±‚æ•°æ®ã€‚åœ¨GDAL Python APIä¸­ï¼Œ<code>Driver</code>å’Œ<code>Dataset</code> ç±»åœ¨Raster APIæ–‡æ¡£ä¸­ï¼Œæ—¢é€‚ç”¨äºçŸ¢é‡æ•°æ®ï¼Œä¹Ÿé€‚ç”¨äºæ …æ ¼æ•°æ®ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-string">"""
è¯´æ˜ï¼šç”¨äºæ‰“å¼€æ•°æ®æº
å‚æ•°ï¼š
    -utf8_pathï¼šå­—ç¬¦ä¸²ï¼Œæ•°æ®æºè·¯å¾„
    -updateï¼šå¸ƒå°”å€¼ç±»å‹ï¼Œé»˜è®¤å€¼Falseï¼Œæ˜¯å¦ä»¥æ›´æ–°æ¨¡å¼æ‰“å¼€æ•°æ®é›†ï¼ˆé»˜è®¤ä¸ºåªè¯»æ¨¡å¼ï¼‰
è¿”å›å€¼ï¼šè¿”å›æ•°æ®é›†æˆ–è€…None
"""</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">Open</span>(<span class="hljs-params">utf8_path,update=<span class="hljs-literal">False</span></span>)
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f14b274d6a0e4530bb0ec8cdd6d168af~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768032807&amp;x-signature=oSm%2Fa0So1q04%2B2zkUHSTRk7eUsE%3D" alt="" loading="lazy"/></p>
<p>å¦‚ä¸‹ä»¥åªè¯»æ¨¡å¼æ‰“å¼€<code>Shp</code>æ•°æ®æºã€‚</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">dataSource</span> = ogr.Open(shpPath,<span class="hljs-literal">False</span>) <span class="hljs-comment"># Falseè¡¨ç¤ºåªè¯»ï¼ŒTrueè¡¨ç¤ºå¯å†™</span>
</code></pre>
<p>é™¤äº†<code>ogr</code>çš„<code>Open</code>æ–¹æ³•ä¹‹å¤–ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨<code>gdal</code>æ¨¡å—çš„æ‰“å¼€æ–¹æ³•</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/22bf2df4de5348b88effcab1588cc086~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768032807&amp;x-signature=q9G1Yo0GPnvYlLGbAVF3MPluZbc%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-3"><strong>2.2. è·å–å›¾å±‚</strong></h2>
<p><code>GDAL</code>è·å–å›¾å±‚çš„å¸¸ç”¨æ–¹æ³•ä¸º<code>GetLayer</code>ï¼Œè¯¥æ–¹æ³•åªæœ‰ä¸€ä¸ªå‚æ•°ã€‚<code>iLayer</code>å€¼å›ºå®šä¸º0ï¼Œå¯¹<code>shapefile</code>å›¾å±‚æ¥è¯´æ˜¯å¯é€‰é¡¹ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-string">"""
è¯´æ˜ï¼šä»æ•°æ®é›†è·å–å›¾å±‚
å‚æ•°ï¼š
    -iLayerï¼šæ•´å‹æˆ–å­—ç¬¦ä¸²ï¼Œå›¾å±‚åç§°æˆ–è€…åŸºäº0çš„å›¾å±‚ç´¢å¼•å€¼ã€‚
è¿”å›å€¼ï¼šè¿”å›å›¾å±‚æˆ–è€…None
"""</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">GetLayer</span>(<span class="hljs-params">iLayer=<span class="hljs-number">0</span></span>)
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/65dee974c774438f94a654fa9d92bfda~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768032807&amp;x-signature=YV6KHhW4CM1kvRoqyEl6zViqCBc%3D" alt="" loading="lazy"/></p>
<p>è·å–æ•°æ®é›†ä¸­ç´¢å¼•å€¼ä¸º0çš„å›¾å±‚ã€‚</p>
<pre><code class="hljs language-ini" lang="ini"> <span class="hljs-comment"># è·å–å›¾å±‚</span>
<span class="hljs-attr">layer</span> = dataSource.GetLayer(<span class="hljs-number">0</span>)
</code></pre>
<p>é™¤äº†<code>GetLayer</code>æ–¹æ³•ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ª<code>GetLayerByIndex</code>æ–¹æ³•ç”¨äºè·å–å›¾å±‚ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-string">"""
è¯´æ˜ï¼šæ ¹æ®ç´¢å¼•è·å–å›¾å±‚
å‚æ•°ï¼š
    -indexï¼šæ•´å‹ï¼Œå›¾å±‚ç´¢å¼•å€¼ã€‚
è¿”å›å€¼ï¼šè¿”å›å›¾å±‚æˆ–è€…None
"""</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">GetLayerByIndex</span>(<span class="hljs-params">index</span>)
</code></pre>
<p>å›¾å±‚ç´¢å¼•å€¼å¤„äº<code>0</code>å’Œ<code>GetLayerCount() - 1</code>ä¹‹é—´ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/433259b061cd4c7c8cf5310df60fd27f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768032807&amp;x-signature=ZyM1yNKuYnq%2BTWVigAaY5TXW6Ms%3D" alt="" loading="lazy"/></p>
<p>æœ€åè¿˜æœ‰ä¸ª<code>GetLayerCount</code>æ–¹æ³•ç”¨äºè·å–å›¾å±‚æ•°é‡ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e97174e825fd489f8518634abf88e395~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768032807&amp;x-signature=nBc2xA08iQiKVWEZhymA2a5cn3o%3D" alt="" loading="lazy"/></p>
<p>ä»æ•°æ®é›†ä¸­è·å–å›¾å±‚æ•°é‡ã€‚</p>
<pre><code class="hljs language-python" lang="python"> <span class="hljs-comment"># è·å–å›¾å±‚æ•°é‡</span>
layerCount = dataset.GetLayerCount()
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"å›¾å±‚æ•°é‡ï¼š<span class="hljs-subst">{layerCount}</span>"</span>)
</code></pre>
<h2 data-id="heading-4"><strong>2.3. è·å–æŠ•å½±ä¿¡æ¯</strong></h2>
<p><code>GetProjection</code>å’Œ<code>GetProjectionRef</code>æ–¹æ³•éƒ½å¯ä»¥ç”¨äºè¯»å–åæ ‡ç³»ç»Ÿï¼Œä¸¤è€…éƒ½è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ç±»å‹<code>WKT</code>æ ¼å¼çš„æ•°æ®é›†ç©ºé—´å‚è€ƒä¿¡æ¯ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/18cdee8a721d43dc96d00c890760ebd8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768032807&amp;x-signature=Gx%2FrytPpB9Fzp5PQjjzCa3rLepU%3D" alt="" loading="lazy"/></p>
<p>ä»å›¾å±‚è·å–æŠ•å½±ä¿¡æ¯ã€‚</p>
<pre><code class="hljs language-python" lang="python"> <span class="hljs-comment"># å›¾å±‚æŠ•å½±</span>
projectionRef = layer.GetProjectionRef()
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"ç©ºé—´å‚è€ƒï¼š<span class="hljs-subst">{projectionRef}</span>"</span>)
</code></pre>
<p>æ­¤å¤–è¿˜æœ‰ä¸€ä¸ªæ–¹æ³•<code>GetSpatialRef</code>ä¹Ÿå¯ç”¨äºè·å–æ•°æ®é›†ç©ºé—´å‚è€ƒä¿¡æ¯ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6815bc5806b844de908ebd36ed65ac3a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768032807&amp;x-signature=jjmSPRnHFgaiBO3DKHC%2FCMxfJAo%3D" alt="" loading="lazy"/></p>
<p>ä»å›¾å±‚è·å–ç©ºé—´å‚è€ƒä¿¡æ¯ã€‚</p>
<pre><code class="hljs language-python" lang="python"> <span class="hljs-comment"># å›¾å±‚ç©ºé—´å‚è€ƒ</span>
spatialRef = layer.GetSpatialRef()
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"ç©ºé—´å‚è€ƒï¼š<span class="hljs-subst">{spatialRef}</span>"</span>)
</code></pre>
<h2 data-id="heading-5"><strong>2.4. è·å–è¦ç´ </strong></h2>
<p>åœ¨çŸ¥é“<code>FId</code>(è¦ç´ ç¼–å·)çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨<code>GetFeature</code>æ–¹æ³•è·å–è¦ç´ ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8b1174d9b39b4d9d8f70f03b5dc86f46~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768032807&amp;x-signature=eKVFoU5W%2BMcaWjJpsPP2l%2BtSSMY%3D" alt="" loading="lazy"/></p>
<pre><code class="hljs language-ini" lang="ini"> <span class="hljs-comment"># è·å–æŒ‡å®šè¦ç´ </span>
<span class="hljs-attr">feature</span> = layer.GetFeature(<span class="hljs-number">0</span>)
</code></pre>
<p>ä¹Ÿå¯ä»¥é€šè¿‡<code>GetNextFeature</code>æ–¹æ³•éå†è¦ç´ ç‰¹å¾ï¼Œå¹¶ä¸”è¿”å›ä¸€ä¸ªè¦ç´ <code>Feature</code>ã€‚æ­¤æ–¹æ³•é€‚ç”¨äºå°‘æ•°å‡ ä¸ª<code>OGRLayer.GetNextFeature()</code>æ•ˆç‡ä¸é«˜çš„é©±åŠ¨ç¨‹åºï¼Œä½†æ€»ä½“è€Œè¨€ï¼Œ<code>OGRLayer.GetNextFeature()</code>æ˜¯ä¸€ä¸ªæ›´è‡ªç„¶çš„APIã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7655ad96e6324e188c36f5804a033123~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768032807&amp;x-signature=d5CpoHkCpZZdBmWaEVq%2BQCNdJQ4%3D" alt="" loading="lazy"/></p>
<p>ä»å›¾å±‚è¯»å–è¦ç´ ç‰¹å¾ã€‚</p>
<pre><code class="hljs language-ini" lang="ini"> <span class="hljs-comment"># è·å–è¦ç´ </span>
<span class="hljs-attr">feature</span> = layer.GetNextFeature()
<span class="hljs-attr">limitCount</span> = <span class="hljs-number">0</span>
 <span class="hljs-comment"># é™åˆ¶æ‰“å°å‰åä¸ªè¦ç´ </span>
while feature and limitCount &lt; 10:
    print(f"æ‰“å°ç¬¬ã€{limitCount+1}ã€‘ä¸ªè¦ç´ ")
</code></pre>
<p><code>GetFeatureCount</code>æ–¹æ³•ç”¨äºè·å–å›¾å±‚è¦ç´ æ•°é‡ã€‚</p>
<pre><code class="hljs language-python" lang="python"> <span class="hljs-comment"># è·å–å›¾å±‚è¦ç´ æ•°é‡</span>
layerFeatureCount = layer.GetFeatureCount()
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"è¦ç´ æ•°é‡ï¼š<span class="hljs-subst">{layerFeatureCount}</span>"</span>)
</code></pre>
<h2 data-id="heading-6"><strong>2.5. è·å–å±æ€§ç»“æ„</strong></h2>
<p><code>GetLayerDefn</code>æ–¹æ³•ç”¨äºè·å–å›¾å±‚å±æ€§è¡¨ï¼Œè¿”å›è¦ç´ å®šä¹‰ä¿¡æ¯ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c3daaf88f78c481c9102b7a986ef4cc0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768032807&amp;x-signature=G%2FS9M7ZNKZcDy%2BCmz89AWRov718%3D" alt="" loading="lazy"/></p>
<p>è·å–å›¾å±‚å±æ€§ã€‚</p>
<pre><code class="hljs language-ini" lang="ini"> <span class="hljs-comment"># è·å–å›¾å±‚å±æ€§</span>
<span class="hljs-attr">layerProperty</span> = layer.GetLayerDefn()
</code></pre>
<p><code>GetFieldCount</code>æ–¹æ³•ç”¨äºè·å–å­—æ®µæ•°é‡ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/df6671f785e34f23882e6326b806fce9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768032807&amp;x-signature=KfVKVbqrElF2Jpowc3MGXzKyWnA%3D" alt="" loading="lazy"/></p>
<p>è¯»å–å›¾å±‚è¦ç´ æ•°é‡ã€‚</p>
<pre><code class="hljs language-ini" lang="ini"> <span class="hljs-comment"># è·å–å›¾å±‚åç§°</span>
<span class="hljs-attr">layerName</span> = layer.GetName()
 <span class="hljs-comment"># è·å–å›¾å±‚è¦ç´ æ•°é‡</span>
<span class="hljs-attr">layerFeatureCount</span> = layer.GetFeatureCount()
</code></pre>
<p><code>GetFieldDefn</code>ç”¨äºè·å–å­—æ®µå®šä¹‰ä¿¡æ¯ï¼Œå…¶ä¸­åŒ…æ‹¬å­—æ®µåç§°ï¼Œå­—æ®µç±»å‹ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/27e19f33e75e40ac9f50779d24b3bac4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768032807&amp;x-signature=hHUcF8Nr4LdfOJNORulOAFhtoVY%3D" alt="" loading="lazy"/></p>
<p>è¯»å–å±æ€§è¡¨ç»“æ„ã€‚</p>
<pre><code class="hljs language-ini" lang="ini"> <span class="hljs-comment"># è·å–å›¾å±‚å±æ€§</span>
<span class="hljs-attr">layerProperty</span> = layer.GetLayerDefn()
 <span class="hljs-comment"># è·å–å›¾å±‚å­—æ®µæ•°é‡</span>
<span class="hljs-attr">fieldCount</span> = layerProperty.GetFieldCount()
print(f"å­—æ®µæ•°é‡ï¼š{fieldCount}")

 <span class="hljs-comment"># è·å–å­—æ®µä¿¡æ¯</span>
for j in range(fieldCount):
    <span class="hljs-comment"># è·å–å­—æ®µå±æ€§å¯¹è±¡</span>
    <span class="hljs-attr">fieldProperty</span> = layerProperty.GetFieldDefn(j)
    <span class="hljs-comment"># è·å–å­—æ®µå±æ€§åç§°</span>
    <span class="hljs-attr">fieldName</span> = fieldProperty.GetName()
    <span class="hljs-comment"># è·å–å­—æ®µå±æ€§ç±»å‹</span>
    <span class="hljs-attr">fieldType</span> = fieldProperty.GetTypeName()

    print(f"ç¬¬ ã€{j}ã€‘ ä¸ªå­—æ®µåç§°ï¼š{fieldName}ï¼Œå­—æ®µç±»å‹ï¼š{fieldType}")
</code></pre>
<p><code>GetField</code>ç”¨äºè·å–å±æ€§å­—æ®µå€¼ï¼Œå‚æ•°å¯ä»¥æ˜¯å­—ç¬¦ä¸²å­—æ®µåï¼Œä¹Ÿå¯ä»¥æ˜¯å­—æ®µç´¢å¼•å€¼ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9b7d4cc728e044a587d65e2da090c555~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768032807&amp;x-signature=llwHNuBdqIlTfTuowsbRJQwVjYo%3D" alt="" loading="lazy"/></p>
<p><code>GetGeometryRef</code>æ–¹æ³•ç”¨äºè·å–è¦ç´ å‡ ä½•å¯¹è±¡ä¿¡æ¯ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/215abfd682a546fbaa68385176db4184~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768032807&amp;x-signature=Aq4ev%2BNLGfiWf2vbxRkoxIU8gq4%3D" alt="" loading="lazy"/></p>
<p>è¯»å–å‡ ä½•å¯¹è±¡ã€‚</p>
<pre><code class="hljs language-ini" lang="ini"> <span class="hljs-comment"># è¯»å–å‡ ä½•å±æ€§</span>
<span class="hljs-attr">geom</span> = feature.GetGeometryRef()
</code></pre>
<h2 data-id="heading-7"><strong>2.6. è·å–å›¾å±‚èŒƒå›´</strong></h2>
<p><code>GetExtent</code>è·å–å›¾å±‚å››è‡³èŒƒå›´ã€‚</p>
<pre><code class="hljs language-ini" lang="ini"> <span class="hljs-comment"># è·å–èŒƒå›´</span>
<span class="hljs-attr">extent</span> = layer.GetExtent()
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7d6d1410aedc45a78fe16026d31b52cf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768032807&amp;x-signature=boETROS2Y2SCknA%2BOk%2B4LLi6uOM%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-8">3. çŸ¢é‡æ•°æ®ä¿®æ”¹æ¥å£</h2>
<p><strong>Driver</strong>(é©±åŠ¨ç¨‹åº)æ˜¯ä¸€ä¸ªçŸ¥é“å¦‚ä½•æ‰§è¡Œç‰¹å®šåŠŸèƒ½çš„å¯¹è±¡ä¸æŸç§æ•°æ®ç±»å‹ï¼ˆå¦‚<code>shapefile</code>ï¼‰ï¼Œä¸ºäº†è¯»å†™æ•°æ®ï¼Œå°±éœ€è¦ä¸€ä¸ªåˆé€‚çš„é©±åŠ¨ç¨‹åºã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/87a6c91d3ad54b849c591f7af237e3f4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768032807&amp;x-signature=7zLTju4hWPGY016eNHoHnc82uHk%3D" alt="" loading="lazy"/></p>
<p>æœ¬æ–‡ä»¥ä¸‹çš„æ•°æ®ä¿®æ”¹éƒ½å·²<code>shapefile</code>é©±åŠ¨ä¸ºä¾‹è¿›è¡Œè®²è§£ã€‚</p>
<h2 data-id="heading-9"><strong>3.1. è·å–ç›®æ ‡æ•°æ®é©±åŠ¨</strong></h2>
<p>é¦–å…ˆéœ€è¦å¯¼å…¥<code>ogr</code>æ¨¡å—ç”¨äºå¤„ç†çŸ¢é‡æ•°æ®ã€‚<code>GetDriverByName</code>æ–¹æ³•å¯ä»¥æ ¹æ®åç§°è·å–æ•°æ®é©±åŠ¨ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">from osgeo import ogr,osr

 <span class="hljs-comment"># è·å–Shpæ•°æ®é©±åŠ¨</span>
<span class="hljs-attr">shpDriver</span> = ogr.GetDriverByName(<span class="hljs-string">'ESRI Shapefile'</span>)
</code></pre>
<h2 data-id="heading-10"><strong>3.2. åˆ›å»ºæ•°æ®æº</strong></h2>
<p><code>CreateDataSource</code>æ–¹æ³•æ ¹æ®æ–‡ä»¶è·¯å¾„åˆ›å»ºæ•°æ®æºã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c2e3c8c79c2f47d793e37bdc218fc13c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768032807&amp;x-signature=BFJGfBrjKIcKB8x9H0GBnUrwk48%3D" alt="" loading="lazy"/></p>
<pre><code class="hljs language-ini" lang="ini"> <span class="hljs-comment"># åˆ›å»ºShpæ•°æ®æº</span>
<span class="hljs-attr">shpDataSource</span> = shpDriver.CreateDataSource(shpPath)
</code></pre>
<h2 data-id="heading-11"><strong>3.3. åˆ›å»ºå›¾å±‚</strong></h2>
<p>é€šè¿‡<code>CreateLayer</code>æ–¹æ³•åˆ›å»ºå›¾å±‚ï¼Œè¯¥æ–¹æ³•å…·æœ‰å››ä¸ªå‚æ•°ï¼Œå›¾å±‚åç§°ã€åæ ‡ç³»ç»Ÿä»¥åŠå‡ ä½•ç±»å‹æ˜¯å¿…ä¼ ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/12850c7cd14542f49ebcd6573d09f9a3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768032807&amp;x-signature=Bp5Dk6R0UPI%2BH1TF3EZvP6glGyM%3D" alt="" loading="lazy"/></p>
<pre><code class="hljs language-ini" lang="ini"> <span class="hljs-comment"># åˆ›å»ºç‚¹å›¾å±‚</span>
<span class="hljs-attr">layer</span> = shpDataSource.CreateLayer(<span class="hljs-string">"points"</span>,srs,ogr.wkbPoint)
</code></pre>
<h2 data-id="heading-12"><strong>3.4. åˆ›å»ºå±æ€§å­—æ®µ</strong></h2>
<p>é€šè¿‡<code>CreateField</code>æ–¹æ³•åˆ›å»ºå±æ€§å­—æ®µã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/62bd13fe78274e329389faf844cba4b8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768032807&amp;x-signature=McGqsXBhdcANHFPh1ffFDOhZ7lM%3D" alt="" loading="lazy"/></p>
<pre><code class="hljs language-ini" lang="ini">if field not in <span class="hljs-section">[lonField, latField]</span>:
    <span class="hljs-comment"># åˆ›å»ºå­—æ®µå®šä¹‰</span>
    <span class="hljs-attr">fieldDefn</span> = ogr.FieldDefn(field, ogr.OFTString)
    fieldDefn.SetWidth(254)
    <span class="hljs-comment"># ç›´æ¥åˆ›å»ºå­—æ®µï¼Œä¸è¦å­˜å‚¨ FieldDefn å¯¹è±¡</span>
    layer.CreateField(fieldDefn)
</code></pre>
<h2 data-id="heading-13"><strong>3.5. åˆ›å»ºå‡ ä½•å¯¹è±¡</strong></h2>
<p>è¦ç´ å¯¹è±¡æ–¹æ³•<code>SetGeometry</code>å¯ä»¥åˆ›å»ºå‡ ä½•å¯¹è±¡ã€‚</p>
<pre><code class="hljs language-arduino" lang="arduino"> # åˆ›å»ºå‡ ä½•å¯¹è±¡
point = ogr.<span class="hljs-built_in">Geometry</span>(ogr.wkbPoint)
point.<span class="hljs-built_in">AddPoint</span>(lon,lat)
feature.<span class="hljs-built_in">SetGeometry</span>(point)
</code></pre>
<h2 data-id="heading-14"><strong>3.6. åˆ›å»ºè¦ç´ </strong></h2>
<p>é€šè¿‡å›¾å±‚æ–¹æ³•<code>CreateFeature</code>åˆ›å»ºè¦ç´ ã€‚</p>
<pre><code class="hljs language-ini" lang="ini"> <span class="hljs-comment"># åˆ›å»ºè¦ç´ </span>
<span class="hljs-attr">feature</span> = ogr.Feature(layer.GetLayerDefn())

 <span class="hljs-comment"># è®¾ç½®å±æ€§</span>
for field in fieldnames:
    if field not in <span class="hljs-section">[lonField, latField]</span>:
        feature.SetField(field, str(row<span class="hljs-section">[field]</span>))
 <span class="hljs-comment"># åˆ›å»ºå‡ ä½•</span>
<span class="hljs-attr">point</span> = ogr.Geometry(ogr.wkbPoint)
point.AddPoint(lon,lat)
feature.SetGeometry(point)

 <span class="hljs-comment"># ä¿å­˜è¦ç´ </span>
layer.CreateFeature(feature)
</code></pre>
<h2 data-id="heading-15">4. å…³é—­æ•°æ®æº</h2>
<p>ä¸ºäº†é˜²æ­¢å†…å­˜æ³„éœ²é—®é¢˜å‘ç”Ÿï¼Œåœ¨ç¡®å®šæ•°æ®è¯»å–å®Œæˆåéœ€è¦å…³é—­æ•°æ®æºã€‚</p>
<pre><code class="hljs language-ini" lang="ini"> <span class="hljs-comment"># å…³é—­æ•°æ®æº</span>
<span class="hljs-attr">dataSource</span> = None

 <span class="hljs-comment"># å…³é—­è¦ç´ </span>
feature.Destroy()
 <span class="hljs-comment"># feature = None</span>
</code></pre>
<p>å°æç¤º</p>
<p><code>GDAL</code>ä¸­çš„æ–¹æ³•é‡‡ç”¨å¤§é©¼å³°å‘½åæ³•</p>
<p><strong><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a22b17e405bf4df58c0efcfc3057b761~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768032807&amp;x-signature=LEgZykvjqMfgzWGqevs5GG2h7mo%3D" alt="" loading="lazy"/></strong></p>
<blockquote>
<p><strong>â</strong>OpenLayersç¤ºä¾‹æ•°æ®ä¸‹è½½ï¼Œè¯·åœ¨å…¬ä¼—å·åå°å›å¤ï¼š<strong>olæ•°æ®</strong><br/>
å…¨å›½ä¿¡æ¯åŒ–å·¥ç¨‹å¸ˆï¼GIS åº”ç”¨æ°´å¹³è€ƒè¯•èµ„æ–™ï¼Œè¯·åœ¨å…¬ä¼—å·åå°å›å¤ï¼š<strong>GISè€ƒè¯•</strong></p>
<p><strong>â<em>GISä¹‹è·¯</em></strong> å…¬ä¼—å·å·²ç»æ¥å…¥äº†<strong>æ™ºèƒ½åŠ©æ‰‹</strong>ï¼Œå¯ä»¥åœ¨å¯¹è¯æ¡†è¿›è¡Œæé—®ï¼Œä¹Ÿå¯ä»¥ç›´æ¥æœç´¢å†å²æ–‡ç« è¿›è¡ŒæŸ¥çœ‹ã€‚</p>
</blockquote>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3947937cf2bc4152b92a1ad881d9d6c8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768032807&amp;x-signature=Mx%2Fs8rzGsFgGnALslGzUES2SkXI%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7bc19458495f43d192ab944059fdd1fe~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768032807&amp;x-signature=sGp0cQ0n4OEen%2Bwy2MdH%2FFr88SM%3D" alt="" loading="lazy"/></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzkwOTEzNjI5NQ%3D%3D%26mid%3D2247487953%26idx%3D1%26sn%3D0b2d5aeefdb290583cf8cdd82f3c2077%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzkwOTEzNjI5NQ==&amp;mid=2247487953&amp;idx=1&amp;sn=0b2d5aeefdb290583cf8cdd82f3c2077&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">GeoTools å¼€å‘åˆé›†ï¼ˆå…¨ï¼‰</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzkwOTEzNjI5NQ%3D%3D%26mid%3D2247487119%26idx%3D1%26sn%3Dc313efa84c27bf933ef2f2a47991ef2d%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzkwOTEzNjI5NQ==&amp;mid=2247487119&amp;idx=1&amp;sn=c313efa84c27bf933ef2f2a47991ef2d&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">OpenLayers å¼€å‘åˆé›†</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2Fi77nCatd4V2nuybZFIs-xA" target="_blank" title="https://mp.weixin.qq.com/s/i77nCatd4V2nuybZFIs-xA" ref="nofollow noopener noreferrer">GDAL æ•°æ®ç±»å‹å¤§å…¨</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FAVXeDrd13EexedVqOdLuxA" target="_blank" title="https://mp.weixin.qq.com/s/AVXeDrd13EexedVqOdLuxA" ref="nofollow noopener noreferrer">ç™¾åº¦å®£å¸ƒï¼Œè‰¯å¿ƒç”»å›¾å·¥å…·åœæœï¼</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2F0DGoC0oFHizJbweBnEvI-g" target="_blank" title="https://mp.weixin.qq.com/s/0DGoC0oFHizJbweBnEvI-g" ref="nofollow noopener noreferrer">GDAL å®ç° GIS æ•°æ®è¯»å–è½¬æ¢ï¼ˆå…¨ï¼‰</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2Fo7Kl8OpNngpvMa7oIkCPRQ" target="_blank" title="https://mp.weixin.qq.com/s/o7Kl8OpNngpvMa7oIkCPRQ" ref="nofollow noopener noreferrer">è‡ªç„¶èµ„æºéƒ¨ï¼šæˆ‘å›½åœ°ç†ä¿¡æ¯äº§ä¸šæ€»äº§å€¼å°†è¶…9000äº¿å…ƒ</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2Frk-Jxqnn5E9aXDxQiomIIg" target="_blank" title="https://mp.weixin.qq.com/s/rk-Jxqnn5E9aXDxQiomIIg" ref="nofollow noopener noreferrer">GIS æ•°æ®è½¬æ¢ï¼šä½¿ç”¨ GDAL å°† Shp è½¬æ¢ä¸º GeoJSON æ•°æ®</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FJg0-96t5C2CIlAB5K38kbw" target="_blank" title="https://mp.weixin.qq.com/s/Jg0-96t5C2CIlAB5K38kbw" ref="nofollow noopener noreferrer">GIS æ•°æ®è½¬æ¢ï¼šä½¿ç”¨ GDAL å°† GeoJSON è½¬æ¢ä¸º Shp æ•°æ®</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2F5lRetXg_dHYO-ZXKQnbi5Q" target="_blank" title="https://mp.weixin.qq.com/s/5lRetXg_dHYO-ZXKQnbi5Q" ref="nofollow noopener noreferrer">GIS æ•°æ®è½¬æ¢ï¼šä½¿ç”¨ GDAL å°† TXT è½¬æ¢ä¸º Shp æ•°æ®</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸ŠæœŸæ–¹æ¡ˆå¤ªéš¾ï¼ŸAntigravityæ¡Œé¢å·¥å…·æ¥äº†ï¼Œ5åˆ†é’Ÿç™½å«–Claude Opus 4.5]]></title>    <link>https://juejin.cn/post/7590213554798510115</link>    <guid>https://juejin.cn/post/7590213554798510115</guid>    <pubDate>2026-01-03T08:32:33.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7590213554798510115" data-draft-id="7590403249560666127" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸ŠæœŸæ–¹æ¡ˆå¤ªéš¾ï¼ŸAntigravityæ¡Œé¢å·¥å…·æ¥äº†ï¼Œ5åˆ†é’Ÿç™½å«–Claude Opus 4.5"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-03T08:32:33.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="wwwzhouhui"/> <meta itemprop="url" content="https://juejin.cn/user/3428746411400537"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸ŠæœŸæ–¹æ¡ˆå¤ªéš¾ï¼ŸAntigravityæ¡Œé¢å·¥å…·æ¥äº†ï¼Œ5åˆ†é’Ÿç™½å«–Claude Opus 4.5
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3428746411400537/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    wwwzhouhui
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-03T08:32:33.000Z" title="Sat Jan 03 2026 08:32:33 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">1.å‰è¨€</h2>
<p>æ˜¨å¤©ç»™å¤§å®¶åˆ†äº«äº†ã€Š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FUAA-8pEStyLVBqtSBIokCA" target="_blank" title="https://mp.weixin.qq.com/s/UAA-8pEStyLVBqtSBIokCA" ref="nofollow noopener noreferrer">ç™½å«–Google Antigravityï¼Claude Opus 4.5å…è´¹ç”¨ï¼Œå‘Šåˆ«tokenç„¦è™‘</a>ã€‹è¿™ç¯‡æ–‡ç« ï¼Œé€šè¿‡CLIProxyAPIé¡¹ç›®å®ç°äº†Google Antigravityçš„APIåä»£éƒ¨ç½²ã€‚ä¸å°‘å°ä¼™ä¼´åé¦ˆè¯´æ–¹æ¡ˆç¡®å®ä¸é”™ï¼Œå…è´¹é¢åº¦ç”¨èµ·æ¥å¾ˆçˆ½ï¼Œä½†æ˜¯éƒ¨ç½²è¿‡ç¨‹æœ‰ç‚¹å¤æ‚â€”â€”éœ€è¦å®‰è£…Dockerã€æ‹‰å–é•œåƒã€é…ç½®config.yamlã€è¿˜è¦ç”¨EasyCLIå®¢æˆ·ç«¯å¯¼å‡ºæˆæƒæ–‡ä»¶å†å¯¼å…¥åå°......å¥½å®¶ä¼™ï¼Œå¯¹äºä¸ç†Ÿæ‚‰å‘½ä»¤è¡Œæ“ä½œçš„æ–°æ‰‹æ¥è¯´ï¼Œè¿™ä¸€å¥—æµç¨‹ä¸‹æ¥ç¡®å®æœ‰ç‚¹å¤´å¤§ã€‚</p>
<p>ä»Šå¤©å°±ç»™å¤§å®¶ä»‹ç»ä¸€ä¸ªæ›´ç®€å•çš„æ–¹æ¡ˆâ€”â€”<strong>Antigravity-Manager</strong>ï¼ˆåˆåAntigravity Toolsï¼‰ã€‚è¿™æ˜¯ä¸€æ¬¾ä¸“ä¸šçš„AIè´¦å·ç®¡ç†ä¸åè®®è½¬æ¢æ¡Œé¢åº”ç”¨ç¨‹åºï¼Œç›¸æ¯”CLIProxyAPIçš„"å‘½ä»¤è¡Œ+Docker"éƒ¨ç½²æ–¹å¼ï¼ŒAntigravity Toolsç›´æ¥æä¾›äº†å¯è§†åŒ–å›¾å½¢ç•Œé¢ï¼Œæ”¯æŒä¸€é”®OAuthæˆæƒã€å¤šè´¦å·ç®¡ç†ã€å®æ—¶é¢åº¦ç›‘æ§ï¼Œæ•´ä¸ªé…ç½®è¿‡ç¨‹é¼ æ ‡ç‚¹ç‚¹å°±èƒ½æå®šï¼Œå¯¹æ–°æ‰‹æå…¶å‹å¥½ã€‚æ›´é‡è¦çš„æ˜¯ï¼Œå®ƒåŒæ—¶æ”¯æŒWindowså’ŒmacOSå¹³å°ï¼Œä¸ç®¡ä½ ç”¨ä»€ä¹ˆç³»ç»Ÿéƒ½èƒ½è½»æ¾ä¸Šæ‰‹ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/56be24b0aa5242ae99f5b92d99f044e7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768033953&amp;x-signature=ru1XZ7tLRxHRL6AjKX9MFFfEgek%3D" alt="Antigravity-Manageråº”ç”¨ç•Œé¢å›¾" loading="lazy"/></p>
<p>è¿™2å¤©Antigravity Toolsåœ¨ç¤¾åŒºéå¸¸ç«çˆ†ï¼ˆGitHubå·²æœ‰6.8k+ Starsï¼‰ï¼Œä»Šå¤©æˆ‘ä»¬å°±æ‰‹æŠŠæ‰‹æ•™å¤§å®¶å¦‚ä½•å®‰è£…é…ç½®è¿™ä¸ªå·¥å…·ï¼Œè®©ä½ 5åˆ†é’Ÿå†…å°±èƒ½åœ¨æœ¬åœ°è·‘é€šAntigravityåä»£ï¼Œåœ¨Cherry Studioã€Claude Codeç­‰å„ç§å·¥å…·ä¸­ç•…å¿«ä½¿ç”¨å…è´¹çš„Claude Opus 4.5å’ŒGemini 3ï¼</p>
<h2 data-id="heading-1">2.éƒ¨ç½²å®æˆ˜</h2>
<h3 data-id="heading-2">Antigravity-Managerå®‰è£…</h3>
<p>æˆ‘æ‰“å¼€<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Flbjlaq%2FAntigravity-Manager" target="_blank" title="https://github.com/lbjlaq/Antigravity-Manager" ref="nofollow noopener noreferrer">github.com/lbjlaq/Antiâ€¦</a></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f2171707e2a64595844c913f5bd9398c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768033953&amp;x-signature=cdRD2nBo21PFHWA6x2ta9bBj9mM%3D" alt="image-20260103150159174" loading="lazy"/></p>
<p>æ‰¾åˆ°æœ€æ–°ç‰ˆæœ¬ä¸‹è½½ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Flbjlaq%2FAntigravity-Manager%2Freleases%2Fdownload%2Fv3.3.13%2FAntigravity.Tools_3.3.13_x64-setup.exe" target="_blank" title="https://github.com/lbjlaq/Antigravity-Manager/releases/download/v3.3.13/Antigravity.Tools_3.3.13_x64-setup.exe" ref="nofollow noopener noreferrer">Antigravity.Tools_3.3.13_x64-setup.exe</a> æˆ‘è¿™é‡Œä½¿ç”¨windowså¹³å°å®‰è£…åŒ…ä¸ºæ¡ˆä¾‹ï¼Œå¤§å®¶å¯ä»¥æ ¹æ®è‡ªå·±çš„æ“ä½œç³»ç»Ÿé€‰æ‹©ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5958b40cec654c30bb24c2205d45564f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768033953&amp;x-signature=OsTLCv765cpZJ2KaGDWvZbReYEE%3D" alt="image-20260103150226859" loading="lazy"/></p>
<p>â€‹        ä¸‹è½½å®Œæˆåç‚¹å‡»å®‰è£…å³å¯ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9b29ba02ed424b6da7bfd941b4557ba3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768033953&amp;x-signature=k7PiKaRWO4S3i%2BvTBadMQIyzPdM%3D" alt="image-20260103150449452" loading="lazy"/></p>
<p>ä¸Šé¢çš„æˆªå›¾å°±æ˜¯åˆšåˆšå®‰è£…å¥½çš„Antigravity Tools å·¥å…·ã€‚</p>
<h3 data-id="heading-3">Antigravity-Manageré…ç½®</h3>
<p>æˆ‘ä»¬ç‚¹å‡»è´¦å·ç®¡ç†ï¼Œç‚¹å‡»â€œæ·»åŠ è´¦å·â€</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8d2cd465086542cdb96f21d954f67b87~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768033953&amp;x-signature=sB5ucThBM4q3UTNtFP3V8frbFfA%3D" alt="image-20260103150818437" loading="lazy"/></p>
<p>å¼¹å‡ºä¸‹é¢å¯¹è¯æ¡†</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2fd3bcaa927f46af8f46834ecf5db20f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768033953&amp;x-signature=6pYfwJrGyxjhsTcbMGxFoJ77rMg%3D" alt="image-20260103150842658" loading="lazy"/></p>
<p>â€‹    å·¥å…·æä¾›ä¸‰ç§æˆæƒæ–¹å¼ï¼Œæˆ‘ä»¬è¿™é‡Œç‚¹å‡»OAuthæˆæƒã€‚ç‚¹å‡»â€œå¼€å§‹æˆæƒâ€å®‰å…¨æ‰“å¼€æµè§ˆå™¨æˆæƒgoogleç™»å½•é¡µé¢(æˆ‘çš„æµè§ˆå™¨å·²ç»æˆæƒç™»å½•è¿‡googleè´¦å·)</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9c733cf3936847f6bab2b7e31c112e8f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768033953&amp;x-signature=bq98gV6SpqXc93Mu2isqBp3YwXg%3D" alt="image-20260103151102502" loading="lazy"/></p>
<p>å› ä¸ºæˆ‘æµè§ˆå™¨ä¹‹å‰è®°å½•2ä¸ªgoogle çš„è´¦å·ï¼Œæ‰€ä»¥æˆ‘è¿™è¾¹ç‚¹å‡»æˆæƒã€‚å¼¹å‡ºâ€œGoogle Antigravityâ€ æˆæƒé¡µé¢ï¼Œç‚¹å‡»ç™»å½•æŒ‰é’®</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/299f3f20842f429a904180d074b6a159~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768033953&amp;x-signature=n4DJAiGbNiNMuDhHEvUCjXaGz9Y%3D" alt="image-20260102164054542" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7688788de0554807b55d9d82bc70e77c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768033953&amp;x-signature=6mFBgeZ7h4Q2bGpGvprYATZzze8%3D" alt="image-20260103151217281" loading="lazy"/></p>
<p>å®Œæˆæˆæƒã€‚</p>
<p>è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ç”±äºGoogle çš„é™åˆ¶ï¼Œæˆ‘ä»¬éœ€è¦æŠŠè‡ªå·±çš„å›½å®¶å’Œåœ°åŒºæ”¹æˆéä¸­å›½åœ°åŒºï¼ˆåŒ…æ‹¬é¦™æ¸¯ï¼‰ï¼Œå»ºè®®ç›´æ¥æ”¹ç¾å›½ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fpolicies.google.com%2Fterms%3Fhl%3Dzh_CN" target="_blank" title="https://policies.google.com/terms?hl=zh_CN" ref="nofollow noopener noreferrer">policies.google.com/terms?hl=zhâ€¦</a></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/308277d5817d413b91f0eb7ff84e91e5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768033953&amp;x-signature=QRihgwT3Gl%2B67jsA6Gg0K3ET7ww%3D" alt="image-20260102164542133" loading="lazy"/></p>
<p>æˆæƒæˆåŠŸåæˆ‘ä»¬çœ‹åˆ°Antigravity Tools å°±çœ‹åˆ°ç®¡ç†è´¦å·æˆæƒç•Œé¢</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/568e9f44d2ef412bbe3a1d2358efbb22~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768033953&amp;x-signature=6g18enUH0trp%2FFmkTXkc0hgtVWc%3D" alt="image-20260103151302153" loading="lazy"/></p>
<p>ç”¨åŒæ ·çš„æ–¹æ³•å¯ä»¥æŠŠæ‰‹ä¸Šçš„å¤šä¸ªgoogleè´¦å·æˆæƒæˆåŠŸã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c88a703791ce42b4a148402a159f208d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768033953&amp;x-signature=hrbXZWC%2FIvarWH2Hx2Ud02Ogn%2Bs%3D" alt="image-20260103151424721" loading="lazy"/></p>
<p>è¿™é‡Œæˆ‘ä»¬å¾ˆæ–¹ä¾¿æŸ¥çœ‹åˆ°è´¦å·æˆæƒæ¨¡å‹ä½¿ç”¨é¢åº¦ã€‚é€šè¿‡ä¸Šé¢çš„æ–¹å¼æˆ‘ä»¬å°±å®Œæˆäº†Antigravity åå¸¦äº†ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/798778e3bfd649c3966adb4ff69da3a2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768033953&amp;x-signature=uXTslpDqzuv6h9ahclMW9oIgDIM%3D" alt="image-20260103151707409" loading="lazy"/></p>
<h3 data-id="heading-4">apiåä»£ä»‹ç»</h3>
<p>é»˜è®¤ç«¯å£ä½¿ç”¨8045ï¼Œå…è®¸å±€åŸŸç½‘è®¿é—®</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b057326da2d840b998e6adc3cee4fb11~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768033953&amp;x-signature=M9oip4BnZXRE82H5Biwsb0KNGtw%3D" alt="image-20260103151955401" loading="lazy"/></p>
<p>æ¨¡å‹è·¯ç”±ä¸­å¿ƒ è¿™é‡Œæœ‰ç®€å•æ¨¡å‹å¯¹åº”æ˜ å°„ï¼Œå¤§å®¶æ ¹æ®è‡ªå·±çš„éœ€è¦é€‰æ‹©</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d8928c26b42c4f4eb9f453635e85898d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768033953&amp;x-signature=B8lpy3t85ylHEBTjnb%2BeqzOWqls%3D" alt="image-20260103152246794" loading="lazy"/></p>
<p>æ¨¡å‹åˆ—è¡¨è¯¦ç»†åˆ—ä¸¾å‡ºAntigravity æ”¯æŒçš„æ‰€æœ‰æ¨¡å‹</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7d014be4961846c4aa4a0b1328f08440~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768033953&amp;x-signature=pjty4C50idet6cImoLdSoOE3%2FOk%3D" alt="image-20260103152359209" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9a0248cdbdeb454ba50ac2286bb4881a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768033953&amp;x-signature=7Fqt0mmAnzvgey15J67nl09VeH4%3D" alt="image-20260103152446805" loading="lazy"/></p>
<p>å³è¾¹è¿˜éå¸¸è´´å¿ƒçš„æ˜¾ç¤ºopenai ä»£ç†æ ‡å‡†æ¥å£ã€‚ä¸‹é¢æˆ‘ä»¬ä½¿ç”¨ç¬¬ä¸‰æ–¹å¹³å°éªŒè¯æµ‹è¯•ã€‚</p>
<h2 data-id="heading-5">3.ç¬¬ä¸‰æ–¹å¹³å°ä½¿ç”¨</h2>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬å°±å¯ä»¥åœ¨ç¬¬ä¸‰æ–¹å¹³å°ä¸Šä½¿ç”¨è€…è¿™ä¸ªå…è´¹çš„åå¸¦API äº†</p>
<h3 data-id="heading-6">cherry stuido</h3>
<p>æˆ‘ä»¬ä½¿ç”¨cherry stuido è¿™ä¸ªç¬¬ä¸‰æ–¹å·¥å…·æ¥æµ‹è¯•éªŒè¯ä¸€ä¸‹åå¸¦çš„æ•ˆæœã€‚</p>
<p>æˆ‘ä»¬å…ˆåœ¨cherry stuidoé…ç½®ä¸€ä¸‹</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bab412c835ea442691f5a40ca0a8bbec~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768033953&amp;x-signature=5xPkALzynHmpGx0UuJ34%2F4g1hBg%3D" alt="image-20260103152832112" loading="lazy"/></p>
<p>å¡«å†™apiç§˜é’¥ apiåœ°å€ æˆ‘ä»¬å¡«å†™æœ¬åœ°åœ°å€<a href="https://link.juejin.cn?target=http%3A%2F%2Flocalhost%3A8045" target="_blank" title="http://localhost:8045" ref="nofollow noopener noreferrer">http://localhost:8045</a></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f11890e1f81a47d79b36879b4206c431~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768033953&amp;x-signature=PJqYGVbh0ZWF6Lt7i1SsmOOgJiQ%3D" alt="image-20260103153150219" loading="lazy"/></p>
<p>â€‹      ä»¥ä¸Šæˆ‘ä»¬å°±å®Œæˆäº†æ¨¡å‹åŸºæœ¬è®¾ç½®ã€‚</p>
<p>â€‹      æ¥ä¸‹æ¥æˆ‘ä»¬åœ¨èŠå¤©å¯¹è¯ä¸­éªŒè¯æµ‹è¯•</p>
<p>â€‹      é€‰æ‹©gemini-3-flash-preview</p>
<p>â€‹      <img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f31407df14634fbcb00a724ada2c1a04~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768033953&amp;x-signature=rO00nwzwxtWRoP%2F1VwK5xqBl20g%3D" alt="image-20260103153250961" loading="lazy"/></p>
<h3 data-id="heading-7">claude code ä½¿ç”¨</h3>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬ä½¿ç”¨æœ¬åœ°claude code æ¥å®ç°ã€‚è¿™é‡Œé…ç½®æˆ‘ä»¬ä½¿ç”¨cc-switché…ç½®ã€‚å…³äºcc-switché…ç½® é…ç½®ä¸ç†Ÿæ‚‰çš„å¯ä»¥çœ‹æˆ‘ä¹‹å‰çš„æ–‡ç« </p>
<p>ã€Š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FxuwAwfZZiYzKhnPVrvitug" target="_blank" title="https://mp.weixin.qq.com/s/xuwAwfZZiYzKhnPVrvitug" ref="nofollow noopener noreferrer">CC-Switché…ç½®åˆ‡æ¢ç¥å™¨ï¼š5ç§’æå®šå¤šè®¾å¤‡åŒæ­¥ï¼Œåšæœäº‘è®©é…ç½®æ°¸ä¸ä¸¢å¤±</a>ã€‹</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/be1ef5e463814a15bbe9ea3909aabdcd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768033953&amp;x-signature=8BJFF0qkSzMEU%2FYeLj8YgMtLYCw%3D" alt="image-20260103153433227" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/85525e0383e3431b98cc46065912f64c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768033953&amp;x-signature=oFITlcKOgK54MCGqQ7CShyXpe38%3D" alt="image-20260103153804368" loading="lazy"/></p>
<p>cc-switchå®Œæˆåï¼Œæˆ‘ä»¬å¯åŠ¨æœ¬åœ°claud code</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9440b30d092e44cb8562f0a82dd9aef3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768033953&amp;x-signature=aeNWA87NVN98BbpNF9MOjn8l%2B7A%3D" alt="image-20260103153551699" loading="lazy"/></p>
<p>æˆ‘ä»¬éªŒè¯æµ‹è¯•ä¸€ä¸‹</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/266dd60618514d4b95d93d1852588190~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768033953&amp;x-signature=Uccj6TB1rxqPDqQ9NHOOdnLm1GE%3D" alt="image-20260103153638147" loading="lazy"/></p>
<p>OK  é»˜è®¤ä½¿ç”¨äº†claude-sonnet-4-5 æ¨¡å‹æ¥è¿è¡Œçš„ã€‚</p>
<h2 data-id="heading-8">4.ä¸€äº›å¸¸è§é—®é¢˜</h2>
<h3 data-id="heading-9">ç½‘ç»œä»£ç†çš„é—®é¢˜</h3>
<p>ç”±äºAntigravity Tools æ˜¯å®¢æˆ·ç«¯å·¥å…·ï¼Œåœ¨æœ¬åœ°è¿è¡Œã€‚æ‰€ä»¥æœ¬åœ°çš„ç½‘ç»œéœ€è¦é€šè¿‡ä¸€äº›ç½‘ç»œä»£ç†è®¾ç½®ï¼Œæˆ‘è¿™é‡Œå¼€å¯äº†tunæ¨¡å¼ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/28672d4376274818a420fddedd8d2c24~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768033953&amp;x-signature=a7FTCp3xgI2dkovwuiQGbEFEJHU%3D" alt="image-20260103154051894" loading="lazy"/></p>
<p>å¦‚æœä½¿ç”¨ä¸ŠæœŸæ–‡ç« ä¸­ä»‹ç»çš„CLIProxyAPIæ–¹å¼ï¼ŒæŠŠCLIProxyAPIéƒ¨ç½²åˆ°æœåŠ¡å™¨ä¸Šï¼Œè¿™æ ·æœ¬åœ°ç½‘ç»œå°±ä¸éœ€è¦è¿™æ ·è®¾ç½®äº†ã€‚</p>
<h3 data-id="heading-10">æ¨¡å‹é¢åº¦çš„é—®é¢˜</h3>
<p>é»˜è®¤æƒ…å†µä¸‹google æ˜¯5ä¸ªå°æ—¶é‡ç½®ä¸€æ¬¡é¢åº¦ï¼Œå¦‚æœä½ é¢åº¦ç”¨å®Œäº†å¯ä»¥æ¢ä¸ªæ¨¡å‹æˆ–åˆ™å¤šä¸ªè´¦å·ä½¿ç”¨ï¼Œå¦‚æœè´¦å·é¢åº¦éƒ½ç”¨å®Œäº†å°±ç­‰5ä¸ªå°æ—¶ä¹‹åé‡ç½®äº†ã€‚é¢åº¦å¯ä»¥åœ¨é¢æ¿ä¸­æŸ¥çœ‹åˆ°</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/af627668c0b54d5ebfcbc33b79207eff~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768033953&amp;x-signature=UMhOhauXP%2B2EE%2Fb2U%2BEDn3GCi50%3D" alt="image-20260103154435393" loading="lazy"/></p>
<h2 data-id="heading-11">5.æ€»ç»“</h2>
<p>ä»Šå¤©ä¸»è¦å¸¦å¤§å®¶äº†è§£å¹¶å®ç°äº†Antigravity Toolsæ¡Œé¢åº”ç”¨çš„å®Œæ•´éƒ¨ç½²æµç¨‹ï¼Œè¯¥å·¥å…·ä»¥"å¯è§†åŒ–ç•Œé¢+ä¸€é”®OAuthæˆæƒ"ä¸ºæ ¸å¿ƒä¼˜åŠ¿ï¼Œç»“åˆå¼€å‘è€…å¯¹é¡¶çº§å¤§æ¨¡å‹å…è´¹ä½¿ç”¨çš„å¼ºçƒˆéœ€æ±‚ï¼Œé€šè¿‡å›¾å½¢åŒ–çš„è´¦å·ç®¡ç†é¢æ¿ä¸å†…ç½®APIåä»£æœåŠ¡ï¼Œå½¢æˆäº†ä¸€å¥—ä»Googleè´¦å·æˆæƒåˆ°æ ‡å‡†APIè°ƒç”¨çš„å…¨é“¾è·¯ç™½å«–æ–¹æ¡ˆã€‚ç›¸æ¯”æ˜¨å¤©ä»‹ç»çš„CLIProxyAPIæ–¹æ¡ˆï¼ŒAntigravity Toolsæ— éœ€Dockerç¯å¢ƒã€æ— éœ€å‘½ä»¤è¡Œæ“ä½œã€æ— éœ€æ‰‹åŠ¨å¯¼å…¥å¯¼å‡ºæˆæƒæ–‡ä»¶ï¼Œæ•´ä¸ªé…ç½®è¿‡ç¨‹é¼ æ ‡ç‚¹å‡»å³å¯å®Œæˆï¼Œ5åˆ†é’Ÿå†…å°±èƒ½è·‘é€šåä»£æœåŠ¡ï¼Œå¯¹æ–°æ‰‹æå…¶å‹å¥½ã€‚</p>
<p>åœ¨å®é™…åº”ç”¨ä¸­ï¼Œä¸¤ç§æ–¹æ¡ˆå„æœ‰æ‰€é•¿â€”â€”CLIProxyAPIé€‚åˆæœ‰æœåŠ¡å™¨ã€éœ€è¦è¿œç¨‹éƒ¨ç½²ã€å›¢é˜Ÿå…±äº«ä½¿ç”¨çš„åœºæ™¯ï¼Œæ”¯æŒå°†åä»£æœåŠ¡éƒ¨ç½²åˆ°äº‘ç«¯ä¾›å¤šäººè®¿é—®ï¼›è€ŒAntigravity Toolsåˆ™æ›´é€‚åˆä¸ªäººä½¿ç”¨ã€æœ¬åœ°è¿è¡Œã€è¿½æ±‚ç®€å•æ˜“ç”¨çš„åœºæ™¯ï¼Œæä¾›äº†å®æ—¶é¢åº¦ç›‘æ§ã€å¤šè´¦å·ä¸€é”®åˆ‡æ¢ã€æ™ºèƒ½æ¨¡å‹è·¯ç”±ç­‰è´´å¿ƒåŠŸèƒ½ã€‚ç‰¹åˆ«å€¼å¾—ä¸€æçš„æ˜¯ï¼ŒAntigravity Toolsçš„ä»ªè¡¨ç›˜å¯ä»¥ç›´è§‚æŸ¥çœ‹æ‰€æœ‰è´¦å·çš„é…é¢ä½¿ç”¨æƒ…å†µï¼Œå†ä¹Ÿä¸ç”¨æ‹…å¿ƒé¢åº¦ç”¨è¶…äº†æ‰å‘ç°ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç”±äºAntigravity Toolsæ˜¯æœ¬åœ°å®¢æˆ·ç«¯ï¼Œç½‘ç»œéœ€è¦å¼€å¯ä»£ç†ï¼ˆå»ºè®®TUNæ¨¡å¼ï¼‰ï¼ŒåŒæ—¶Googleè´¦å·åœ°åŒºéœ€è®¾ç½®ä¸ºç¾å›½ç­‰éå—é™åœ°åŒºæ‰èƒ½æ­£å¸¸ä½¿ç”¨ã€‚</p>
<p>æ„Ÿå…´è¶£çš„å°ä¼™ä¼´å¯ä»¥æ ¹æ®è‡ªå·±çš„å®é™…éœ€æ±‚é€‰æ‹©åˆé€‚çš„æ–¹æ¡ˆâ€”â€”è¿½æ±‚ç®€å•å°±ç”¨Antigravity Toolsï¼Œéœ€è¦è¿œç¨‹éƒ¨ç½²å°±ç”¨CLIProxyAPIï¼Œä¸¤ä¸ªæ–¹æ¡ˆæ­é…ä½¿ç”¨æ•ˆæœæ›´ä½³ã€‚ä»Šå¤©çš„åˆ†äº«å°±åˆ°è¿™é‡Œç»“æŸäº†ï¼Œæˆ‘ä»¬ä¸‹ä¸€ç¯‡æ–‡ç« è§ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vue çˆ¶å­ç»„ä»¶åŒå‘ç»‘å®šçš„ç»ˆææŒ‡å—ï¼šå‘Šåˆ«æ•°æ®åŒæ­¥çƒ¦æ¼ï¼]]></title>    <link>https://juejin.cn/post/7590469811408830491</link>    <guid>https://juejin.cn/post/7590469811408830491</guid>    <pubDate>2026-01-03T05:08:27.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7590469811408830491" data-draft-id="7590292138347069450" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vue çˆ¶å­ç»„ä»¶åŒå‘ç»‘å®šçš„ç»ˆææŒ‡å—ï¼šå‘Šåˆ«æ•°æ®åŒæ­¥çƒ¦æ¼ï¼"/> <meta itemprop="keywords" content="Vue.js"/> <meta itemprop="datePublished" content="2026-01-03T05:08:27.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åŒ—è¾°alk"/> <meta itemprop="url" content="https://juejin.cn/user/1772855673241352"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vue çˆ¶å­ç»„ä»¶åŒå‘ç»‘å®šçš„ç»ˆææŒ‡å—ï¼šå‘Šåˆ«æ•°æ®åŒæ­¥çƒ¦æ¼ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1772855673241352/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åŒ—è¾°alk
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-03T05:08:27.000Z" title="Sat Jan 03 2026 05:08:27 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Vue çˆ¶å­ç»„ä»¶åŒå‘ç»‘å®šçš„ç»ˆææŒ‡å—ï¼šå‘Šåˆ«æ•°æ®åŒæ­¥çƒ¦æ¼ï¼</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/530c134e2a6a486b912cc273e384633f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YyX6L6wYWxr:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768021707&amp;x-signature=JU8Tp9StTfefsHjDR3UkZpXWCso%3D" alt="Vueçˆ¶å­ç»„ä»¶ç»‘å®šå¤´å›¾" loading="lazy"/></p>
<h3 data-id="heading-1">å¼•è¨€</h3>
<p>åœ¨Vueå¼€å‘ä¸­ï¼Œçˆ¶å­ç»„ä»¶ä¹‹é—´çš„æ•°æ®é€šä¿¡æ˜¯æ¯ä¸ªå¼€å‘è€…éƒ½ä¼šé‡åˆ°çš„æŒ‘æˆ˜ã€‚å½“çˆ¶ç»„ä»¶éœ€è¦æ§åˆ¶å­ç»„ä»¶çŠ¶æ€ï¼ŒåŒæ—¶å­ç»„ä»¶ä¹Ÿéœ€è¦æ›´æ–°çˆ¶ç»„ä»¶æ•°æ®æ—¶ï¼Œå¦‚ä½•ä¼˜é›…åœ°å®ç°åŒå‘ç»‘å®šå°±æˆäº†å…³é”®é—®é¢˜ã€‚</p>
<p>ä»Šå¤©ï¼Œæˆ‘å°†ä¸ºä½ è¯¦ç»†ä»‹ç»Vueä¸­å®ç°çˆ¶å­ç»„ä»¶åŒå‘ç»‘å®šçš„4ç§æ ¸å¿ƒæ–¹æ³•ï¼Œä»åŸºç¡€åˆ°é«˜çº§ï¼Œè®©ä½ å½»åº•æŒæ¡è¿™ä¸€é‡è¦æŠ€èƒ½ï¼</p>
<h3 data-id="heading-2">ä¸€ã€åŸºç¡€çŸ¥è¯†ï¼šå•å‘æ•°æ®æµåŸåˆ™</h3>
<p>åœ¨æ·±å…¥è§£å†³æ–¹æ¡ˆä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆç†è§£Vueçš„æ ¸å¿ƒè®¾è®¡åŸåˆ™â€”â€”å•å‘æ•°æ®æµï¼š</p>
<pre><code class="hljs">çˆ¶ç»„ä»¶ â†’ Props â†’ å­ç»„ä»¶
å­ç»„ä»¶ â†’ Events â†’ çˆ¶ç»„ä»¶
</code></pre>
<p>è¿™ç§è®¾è®¡ä¿è¯äº†æ•°æ®æµå‘çš„å¯é¢„æµ‹æ€§ï¼Œä½†å½“æˆ‘ä»¬ç¡®å®éœ€è¦åŒå‘ç»‘å®šæ—¶ï¼Œå°±éœ€è¦ä¸€äº›æŠ€å·§æ¥å®ç°ã€‚</p>
<h3 data-id="heading-3">äºŒã€æ–¹æ³•ä¸€ï¼šProps + $emitï¼ˆåŸºç¡€æ–¹æ³•ï¼‰</h3>
<p>è¿™æ˜¯Vueå®˜æ–¹æ¨èçš„"å•å‘æ•°æ®æµ"å®ç°åŒå‘ç»‘å®šçš„æ ‡å‡†æ–¹å¼ã€‚</p>
<h4 data-id="heading-4">å®ç°åŸç†</h4>
<ol>
<li>çˆ¶ç»„ä»¶é€šè¿‡propså‘å­ç»„ä»¶ä¼ é€’æ•°æ®</li>
<li>å­ç»„ä»¶é€šè¿‡$emitè§¦å‘äº‹ä»¶é€šçŸ¥çˆ¶ç»„ä»¶æ›´æ–°æ•°æ®</li>
</ol>
<h4 data-id="heading-5">ä»£ç å®ç°</h4>
<p><strong>å­ç»„ä»¶ ChildComponent.vue</strong></p>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;div class="child"&gt;
    &lt;h3&gt;å­ç»„ä»¶&lt;/h3&gt;
    &lt;input 
      :value="value" 
      @input="$emit('update:value', $event.target.value)"
      placeholder="è¾“å…¥å†…å®¹..."
    /&gt;
    &lt;p&gt;å½“å‰å€¼: {{ value }}&lt;/p&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
export default {
  name: 'ChildComponent',
  props: {
    value: {
      type: String,
      required: true
    }
  }
}
&lt;/script&gt;
</code></pre>
<p><strong>çˆ¶ç»„ä»¶ ParentComponent.vue</strong></p>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;div class="parent"&gt;
    &lt;h2&gt;çˆ¶ç»„ä»¶&lt;/h2&gt;
    &lt;p&gt;çˆ¶ç»„ä»¶ä¸­çš„å€¼: {{ parentValue }}&lt;/p&gt;
    
    &lt;ChildComponent 
      :value="parentValue" 
      @update:value="parentValue = $event"
    /&gt;
    
    &lt;button @click="resetValue"&gt;é‡ç½®ä¸ºé»˜è®¤å€¼&lt;/button&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
import ChildComponent from './ChildComponent.vue'

export default {
  name: 'ParentComponent',
  components: {
    ChildComponent
  },
  data() {
    return {
      parentValue: 'åˆå§‹å€¼'
    }
  },
  methods: {
    resetValue() {
      this.parentValue = 'é»˜è®¤å€¼'
    }
  }
}
&lt;/script&gt;
</code></pre>
<h4 data-id="heading-6">æµç¨‹å›¾è§£</h4>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TD
    A[çˆ¶ç»„ä»¶æ•°æ®å˜æ›´] --&gt; B[Propsä¼ é€’ç»™å­ç»„ä»¶]
    B --&gt; C[å­ç»„ä»¶æ¥æ”¶æ•°æ®]
    D[å­ç»„ä»¶ç”¨æˆ·è¾“å…¥] --&gt; E[$emitè§¦å‘æ›´æ–°äº‹ä»¶]
    E --&gt; F[çˆ¶ç»„ä»¶ç›‘å¬å¹¶æ›´æ–°æ•°æ®]
    F --&gt; A
    
    style A fill:#e1f5fe
    style C fill:#f3e5f5
    style F fill:#e8f5e8
</code></pre>
<h4 data-id="heading-7">ä¼˜ç¼ºç‚¹åˆ†æ</h4>
<p><strong>ä¼˜ç‚¹ï¼š</strong></p>
<ul>
<li>ç¬¦åˆVueè®¾è®¡å“²å­¦</li>
<li>ä»£ç æ¸…æ™°ï¼Œæ•°æ®æµå‘æ˜ç¡®</li>
<li>æ˜“äºè°ƒè¯•å’Œç»´æŠ¤</li>
</ul>
<p><strong>ç¼ºç‚¹ï¼š</strong></p>
<ul>
<li>éœ€è¦ç¼–å†™è¾ƒå¤šæ ·æ¿ä»£ç </li>
<li>å¯¹äºæ·±å±‚åµŒå¥—ç»„ä»¶ç•¥æ˜¾ç¹ç</li>
</ul>
<h3 data-id="heading-8">ä¸‰ã€æ–¹æ³•äºŒï¼šv-modelæŒ‡ä»¤ï¼ˆè¯­æ³•ç³–ï¼‰</h3>
<p>Vue 2.2.0+ æä¾›äº†<code>.sync</code>ä¿®é¥°ç¬¦çš„æ›¿ä»£æ–¹æ¡ˆï¼Œä½¿ç”¨è‡ªå®šä¹‰ç»„ä»¶çš„<code>v-model</code>ã€‚</p>
<h4 data-id="heading-9">å®ç°åŸç†</h4>
<p><code>v-model</code>åœ¨ç»„ä»¶ä¸Šå®é™…ä¸Šæ˜¯ä»¥ä¸‹å†™æ³•çš„è¯­æ³•ç³–ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;ChildComponent 
  :value="parentValue"
  @input="parentValue = $event"
/&gt;
</code></pre>
<h4 data-id="heading-10">ä»£ç å®ç°</h4>
<p><strong>å­ç»„ä»¶ ChildComponent.vue</strong></p>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;div class="child"&gt;
    &lt;h3&gt;å­ç»„ä»¶ (v-model)&lt;/h3&gt;
    &lt;select :value="value" @change="$emit('input', $event.target.value)"&gt;
      &lt;option value="vue"&gt;Vue.js&lt;/option&gt;
      &lt;option value="react"&gt;React&lt;/option&gt;
      &lt;option value="angular"&gt;Angular&lt;/option&gt;
    &lt;/select&gt;
    &lt;p&gt;é€‰ä¸­çš„æ¡†æ¶: {{ value }}&lt;/p&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
export default {
  name: 'ChildComponent',
  props: {
    value: {
      type: String,
      required: true
    }
  },
  model: {
    prop: 'value',    // æŒ‡å®šv-modelç»‘å®šçš„propå
    event: 'input'    // æŒ‡å®šv-modelç›‘å¬çš„äº‹ä»¶å
  }
}
&lt;/script&gt;
</code></pre>
<p><strong>çˆ¶ç»„ä»¶ ParentComponent.vue</strong></p>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;div class="parent"&gt;
    &lt;h2&gt;çˆ¶ç»„ä»¶ (v-modelç¤ºä¾‹)&lt;/h2&gt;
    &lt;p&gt;é€‰æ‹©çš„æ¡†æ¶: {{ selectedFramework }}&lt;/p&gt;
    
    &lt;!-- ä½¿ç”¨v-modelè¯­æ³•ç³– --&gt;
    &lt;ChildComponent v-model="selectedFramework" /&gt;
    
    &lt;!-- ç­‰ä»·äº --&gt;
    &lt;!-- &lt;ChildComponent :value="selectedFramework" @input="selectedFramework = $event" /&gt; --&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
import ChildComponent from './ChildComponent.vue'

export default {
  name: 'ParentComponent',
  components: {
    ChildComponent
  },
  data() {
    return {
      selectedFramework: 'vue'
    }
  }
}
&lt;/script&gt;
</code></pre>
<h4 data-id="heading-11">å¤šä¸ªv-modelç»‘å®šï¼ˆVue 2.3.0+ï¼‰</h4>
<p>ä»Vue 2.3.0å¼€å§‹ï¼Œå¯ä»¥é€šè¿‡<code>model</code>é€‰é¡¹é…ç½®ä¸åŒçš„propå’Œeventï¼Œä½†åœ¨Vue 3ä¸­æ›´åŠ ç®€åŒ–ï¼š</p>
<p><strong>Vue 3ä¸­çš„å¤šä¸ªv-model</strong></p>
<pre><code class="hljs language-vue" lang="vue">&lt;!-- çˆ¶ç»„ä»¶ --&gt;
&lt;UserName
  v-model:first-name="firstName"
  v-model:last-name="lastName"
/&gt;

&lt;!-- å­ç»„ä»¶ --&gt;
&lt;script setup&gt;
defineProps({
  firstName: String,
  lastName: String
})

defineEmits(['update:firstName', 'update:lastName'])
&lt;/script&gt;
</code></pre>
<h3 data-id="heading-12">å››ã€æ–¹æ³•ä¸‰ï¼š.syncä¿®é¥°ç¬¦ï¼ˆVue 2.3.0+ï¼‰</h3>
<p><code>.sync</code>ä¿®é¥°ç¬¦æ˜¯å¦ä¸€ç§è¯­æ³•ç³–ï¼Œç”¨äºå®ç°propçš„"åŒå‘ç»‘å®š"ã€‚</p>
<h4 data-id="heading-13">å®ç°åŸç†</h4>
<pre><code class="hljs language-vue" lang="vue">&lt;!-- ä½¿ç”¨.sync --&gt;
&lt;ChildComponent :title.sync="pageTitle" /&gt;

&lt;!-- ç­‰ä»·äº --&gt;
&lt;ChildComponent 
  :title="pageTitle" 
  @update:title="pageTitle = $event"
/&gt;
</code></pre>
<h4 data-id="heading-14">ä»£ç å®ç°</h4>
<p><strong>å­ç»„ä»¶ ChildComponent.vue</strong></p>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;div class="child"&gt;
    &lt;h3&gt;å­ç»„ä»¶ (.syncä¿®é¥°ç¬¦)&lt;/h3&gt;
    &lt;div class="counter"&gt;
      &lt;button @click="decrement"&gt;-&lt;/button&gt;
      &lt;span&gt;{{ count }}&lt;/span&gt;
      &lt;button @click="increment"&gt;+&lt;/button&gt;
    &lt;/div&gt;
    &lt;p&gt;å½“å‰è®¡æ•°: {{ count }}&lt;/p&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
export default {
  name: 'ChildComponent',
  props: {
    count: {
      type: Number,
      required: true
    }
  },
  methods: {
    increment() {
      this.$emit('update:count', this.count + 1)
    },
    decrement() {
      this.$emit('update:count', this.count - 1)
    }
  }
}
&lt;/script&gt;

&lt;style scoped&gt;
.counter {
  display: flex;
  align-items: center;
  gap: 10px;
  margin: 10px 0;
}
.counter button {
  padding: 5px 15px;
  font-size: 16px;
}
&lt;/style&gt;
</code></pre>
<p><strong>çˆ¶ç»„ä»¶ ParentComponent.vue</strong></p>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;div class="parent"&gt;
    &lt;h2&gt;çˆ¶ç»„ä»¶ (.syncç¤ºä¾‹)&lt;/h2&gt;
    &lt;p&gt;å½“å‰è®¡æ•°: {{ counter }}&lt;/p&gt;
    
    &lt;!-- ä½¿ç”¨.syncä¿®é¥°ç¬¦ --&gt;
    &lt;ChildComponent :count.sync="counter" /&gt;
    
    &lt;!-- å¯ä»¥åŒæ—¶ç»‘å®šå¤šä¸ªprop --&gt;
    &lt;!-- &lt;ChildComponent :count.sync="counter" :title.sync="pageTitle" /&gt; --&gt;
    
    &lt;button @click="counter = 0"&gt;é‡ç½®è®¡æ•°&lt;/button&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
import ChildComponent from './ChildComponent.vue'

export default {
  name: 'ParentComponent',
  components: {
    ChildComponent
  },
  data() {
    return {
      counter: 0
    }
  }
}
&lt;/script&gt;
</code></pre>
<h4 data-id="heading-15">.syncä¸v-modelçš„åŒºåˆ«</h4>






























<table><thead><tr><th>ç‰¹æ€§</th><th>v-model</th><th>.syncä¿®é¥°ç¬¦</th></tr></thead><tbody><tr><td>ç»‘å®šæ•°é‡</td><td>ä¸€ä¸ªç»„ä»¶é€šå¸¸ä¸€ä¸ª</td><td>å¯ä»¥å¤šä¸ª</td></tr><tr><td>äº‹ä»¶å</td><td>é»˜è®¤<code>input</code></td><td><code>update:propName</code></td></tr><tr><td>Propå</td><td>é»˜è®¤<code>value</code></td><td>ä»»æ„propå</td></tr><tr><td>Vue 3æ”¯æŒ</td><td>æœ‰å˜åŒ–</td><td>å·²ç§»é™¤ï¼Œç”¨v-modelä»£æ›¿</td></tr></tbody></table>
<h3 data-id="heading-16">äº”ã€æ–¹æ³•å››ï¼šVuexçŠ¶æ€ç®¡ç†ï¼ˆå¤æ‚åœºæ™¯ï¼‰</h3>
<p>å¯¹äºå¤§å‹åº”ç”¨æˆ–æ·±å±‚åµŒå¥—ç»„ä»¶ï¼Œä½¿ç”¨Vuexè¿›è¡ŒçŠ¶æ€ç®¡ç†æ˜¯æœ€ä½³é€‰æ‹©ã€‚</p>
<h4 data-id="heading-17">å®ç°æ¶æ„</h4>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TB
    A[ç»„ä»¶] --&gt; B[è§¦å‘Action]
    B --&gt; C[æäº¤Mutation]
    C --&gt; D[æ›´æ–°State]
    D --&gt; E[å“åº”å¼æ›´æ–°æ‰€æœ‰ç»„ä»¶]
    
    subgraph "Vuex Store"
        C
        D
    end
    
    style D fill:#fff3e0
    style E fill:#e8f5e8
</code></pre>
<h4 data-id="heading-18">ä»£ç å®ç°</h4>
<p><strong>store/index.js</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">Vue</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Vuex</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'vuex'</span>

<span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">use</span>(<span class="hljs-title class_">Vuex</span>)

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vuex</span>.<span class="hljs-title class_">Store</span>({
  <span class="hljs-attr">state</span>: {
    <span class="hljs-attr">userSettings</span>: {
      <span class="hljs-attr">theme</span>: <span class="hljs-string">'light'</span>,
      <span class="hljs-attr">fontSize</span>: <span class="hljs-number">14</span>,
      <span class="hljs-attr">notifications</span>: <span class="hljs-literal">true</span>
    }
  },
  <span class="hljs-attr">mutations</span>: {
    <span class="hljs-title function_">UPDATE_SETTING</span>(<span class="hljs-params">state, { key, value }</span>) {
      <span class="hljs-keyword">if</span> (key <span class="hljs-keyword">in</span> state.<span class="hljs-property">userSettings</span>) {
        state.<span class="hljs-property">userSettings</span>[key] = value
      }
    },
    <span class="hljs-title function_">UPDATE_SETTINGS</span>(<span class="hljs-params">state, settings</span>) {
      state.<span class="hljs-property">userSettings</span> = { ...state.<span class="hljs-property">userSettings</span>, ...settings }
    }
  },
  <span class="hljs-attr">actions</span>: {
    <span class="hljs-title function_">updateSetting</span>(<span class="hljs-params">{ commit }, payload</span>) {
      <span class="hljs-title function_">commit</span>(<span class="hljs-string">'UPDATE_SETTING'</span>, payload)
    },
    <span class="hljs-title function_">resetSettings</span>(<span class="hljs-params">{ commit }</span>) {
      <span class="hljs-title function_">commit</span>(<span class="hljs-string">'UPDATE_SETTINGS'</span>, {
        <span class="hljs-attr">theme</span>: <span class="hljs-string">'light'</span>,
        <span class="hljs-attr">fontSize</span>: <span class="hljs-number">14</span>,
        <span class="hljs-attr">notifications</span>: <span class="hljs-literal">true</span>
      })
    }
  },
  <span class="hljs-attr">getters</span>: {
    <span class="hljs-attr">userSettings</span>: <span class="hljs-function"><span class="hljs-params">state</span> =&gt;</span> state.<span class="hljs-property">userSettings</span>,
    <span class="hljs-attr">darkMode</span>: <span class="hljs-function"><span class="hljs-params">state</span> =&gt;</span> state.<span class="hljs-property">userSettings</span>.<span class="hljs-property">theme</span> === <span class="hljs-string">'dark'</span>
  }
})
</code></pre>
<p><strong>å­ç»„ä»¶ SettingsEditor.vue</strong></p>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;div class="settings-editor" :class="settings.theme"&gt;
    &lt;h3&gt;è®¾ç½®ç¼–è¾‘å™¨ (Vuex)&lt;/h3&gt;
    
    &lt;div class="setting-item"&gt;
      &lt;label&gt;ä¸»é¢˜æ¨¡å¼ï¼š&lt;/label&gt;
      &lt;select :value="settings.theme" @change="updateSetting('theme', $event.target.value)"&gt;
        &lt;option value="light"&gt;æµ…è‰²&lt;/option&gt;
        &lt;option value="dark"&gt;æ·±è‰²&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    
    &lt;div class="setting-item"&gt;
      &lt;label&gt;å­—ä½“å¤§å°ï¼š&lt;/label&gt;
      &lt;input 
        type="range" 
        min="10" 
        max="24" 
        :value="settings.fontSize"
        @input="updateSetting('fontSize', parseInt($event.target.value))"
      /&gt;
      &lt;span&gt;{{ settings.fontSize }}px&lt;/span&gt;
    &lt;/div&gt;
    
    &lt;div class="setting-item"&gt;
      &lt;label&gt;
        &lt;input 
          type="checkbox" 
          :checked="settings.notifications"
          @change="updateSetting('notifications', $event.target.checked)"
        /&gt;
        å¯ç”¨é€šçŸ¥
      &lt;/label&gt;
    &lt;/div&gt;
    
    &lt;p&gt;å½“å‰ä¸»é¢˜: {{ settings.theme }} | å­—ä½“å¤§å°: {{ settings.fontSize }}px&lt;/p&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
import { mapState, mapActions } from 'vuex'

export default {
  name: 'SettingsEditor',
  computed: {
    ...mapState(['userSettings']),
    settings() {
      return this.userSettings
    }
  },
  methods: {
    ...mapActions(['updateSetting'])
  }
}
&lt;/script&gt;

&lt;style scoped&gt;
.settings-editor {
  padding: 20px;
  border-radius: 8px;
  transition: all 0.3s;
}
.settings-editor.light {
  background-color: #ffffff;
  color: #333333;
}
.settings-editor.dark {
  background-color: #333333;
  color: #ffffff;
}
.setting-item {
  margin: 15px 0;
}
.setting-item label {
  margin-right: 10px;
}
&lt;/style&gt;
</code></pre>
<p><strong>çˆ¶ç»„ä»¶ ParentComponent.vue</strong></p>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;div class="parent"&gt;
    &lt;h2&gt;çˆ¶ç»„ä»¶ (Vuexç¤ºä¾‹)&lt;/h2&gt;
    
    &lt;div class="settings-display"&gt;
      &lt;h3&gt;å½“å‰è®¾ç½®&lt;/h3&gt;
      &lt;ul&gt;
        &lt;li&gt;ä¸»é¢˜: {{ userSettings.theme }}&lt;/li&gt;
        &lt;li&gt;å­—ä½“å¤§å°: {{ userSettings.fontSize }}px&lt;/li&gt;
        &lt;li&gt;é€šçŸ¥: {{ userSettings.notifications ? 'å¼€å¯' : 'å…³é—­' }}&lt;/li&gt;
      &lt;/ul&gt;
    &lt;/div&gt;
    
    &lt;SettingsEditor /&gt;
    
    &lt;div class="actions"&gt;
      &lt;button @click="resetSettings"&gt;æ¢å¤é»˜è®¤è®¾ç½®&lt;/button&gt;
      &lt;button @click="toggleTheme"&gt;åˆ‡æ¢ä¸»é¢˜&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
import { mapState, mapActions, mapGetters } from 'vuex'
import SettingsEditor from './SettingsEditor.vue'

export default {
  name: 'ParentComponent',
  components: {
    SettingsEditor
  },
  computed: {
    ...mapState(['userSettings']),
    ...mapGetters(['darkMode'])
  },
  methods: {
    ...mapActions(['updateSetting', 'resetSettings']),
    toggleTheme() {
      const newTheme = this.darkMode ? 'light' : 'dark'
      this.updateSetting({ key: 'theme', value: newTheme })
    }
  }
}
&lt;/script&gt;
</code></pre>
<h3 data-id="heading-19">å…­ã€æ–¹æ³•å¯¹æ¯”ä¸é€‰æ‹©æŒ‡å—</h3>
<h4 data-id="heading-20">æ–¹æ³•å¯¹æ¯”è¡¨</h4>













































<table><thead><tr><th>æ–¹æ³•</th><th>é€‚ç”¨åœºæ™¯</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th><th>Vue 2æ”¯æŒ</th><th>Vue 3æ”¯æŒ</th></tr></thead><tbody><tr><td>Props + $emit</td><td>ç®€å•çˆ¶å­é€šä¿¡</td><td>å®˜æ–¹æ¨èï¼Œæ¸…æ™°æ˜“æ‡‚</td><td>ä»£ç é‡å¤š</td><td>âœ“</td><td>âœ“</td></tr><tr><td>v-model</td><td>è¡¨å•ç±»ç»„ä»¶</td><td>è¯­æ³•ç®€æ´ï¼Œä½¿ç”¨å¹¿æ³›</td><td>å•ä¸ªç»‘å®šæœ‰é™åˆ¶</td><td>âœ“</td><td>âœ“ (å¢å¼º)</td></tr><tr><td>.syncä¿®é¥°ç¬¦</td><td>å¤šä¸ªpropéœ€è¦åŒå‘ç»‘å®š</td><td>æ”¯æŒå¤šä¸ªç»‘å®š</td><td>Vue 3å·²ç§»é™¤</td><td>âœ“</td><td>âœ—</td></tr><tr><td>Vuex</td><td>å¤æ‚åº”ç”¨/å¤šç»„ä»¶å…±äº«</td><td>é›†ä¸­ç®¡ç†ï¼Œå“åº”å¼</td><td>å¢åŠ å¤æ‚åº¦</td><td>âœ“</td><td>âœ“</td></tr></tbody></table>
<h4 data-id="heading-21">é€‰æ‹©æµç¨‹å›¾</h4>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TD
    A[å¼€å§‹é€‰æ‹©åŒå‘ç»‘å®šæ–¹æ¡ˆ] --&gt; B{æ•°æ®å…±äº«èŒƒå›´}
    
    B --&gt;|çˆ¶å­ç»„ä»¶| C{ç»‘å®šå¤æ‚åº¦}
    B --&gt;|å¤šä¸ªç»„ä»¶å…±äº«| D[ä½¿ç”¨Vuex/Pinia]
    
    C --&gt;|ç®€å•ç»‘å®š| E{vueç‰ˆæœ¬?}
    C --&gt;|å¤šä¸ªpropç»‘å®š| F{Vueç‰ˆæœ¬?}
    
    E --&gt;|Vue 2| G[Props + $emit æˆ– v-model]
    E --&gt;|Vue 3| H[v-model]
    
    F --&gt;|Vue 2| I[.syncä¿®é¥°ç¬¦]
    F --&gt;|Vue 3| J[å¤šä¸ªv-model]
    
    G --&gt; K[å®Œæˆé€‰æ‹©]
    H --&gt; K
    I --&gt; K
    J --&gt; K
    D --&gt; K
</code></pre>
<h3 data-id="heading-22">ä¸ƒã€å®æˆ˜æŠ€å·§ä¸æœ€ä½³å®è·µ</h3>
<h4 data-id="heading-23">1. ä½¿ç”¨è®¡ç®—å±æ€§ä¼˜åŒ–</h4>
<pre><code class="hljs language-vue" lang="vue">&lt;script&gt;
export default {
  props: ['value'],
  computed: {
    internalValue: {
      get() {
        return this.value
      },
      set(newValue) {
        this.$emit('input', newValue)
      }
    }
  }
}
&lt;/script&gt;

&lt;template&gt;
  &lt;input v-model="internalValue" /&gt;
&lt;/template&gt;
</code></pre>
<h4 data-id="heading-24">2. æ·±åº¦ç›‘å¬å¯¹è±¡å˜åŒ–</h4>
<pre><code class="hljs language-vue" lang="vue">&lt;script&gt;
export default {
  props: {
    config: {
      type: Object,
      required: true
    }
  },
  watch: {
    config: {
      handler(newVal) {
        // å¤„ç†å¯¹è±¡å˜åŒ–
        this.$emit('update:config', { ...newVal })
      },
      deep: true
    }
  }
}
&lt;/script&gt;
</code></pre>
<h4 data-id="heading-25">3. ä½¿ç”¨Provide/Injectå¤„ç†æ·±å±‚åµŒå¥—</h4>
<pre><code class="hljs language-vue" lang="vue">&lt;!-- ç¥–å…ˆç»„ä»¶ --&gt;
&lt;script&gt;
export default {
  provide() {
    return {
      sharedState: this.sharedState,
      updateSharedState: this.updateSharedState
    }
  },
  data() {
    return {
      sharedState: {
        theme: 'light',
        language: 'zh'
      }
    }
  },
  methods: {
    updateSharedState(key, value) {
      this.sharedState[key] = value
    }
  }
}
&lt;/script&gt;

&lt;!-- æ·±å±‚å­ç»„ä»¶ --&gt;
&lt;script&gt;
export default {
  inject: ['sharedState', 'updateSharedState'],
  methods: {
    changeTheme(theme) {
      this.updateSharedState('theme', theme)
    }
  }
}
&lt;/script&gt;
</code></pre>
<h3 data-id="heading-26">å…«ã€Vue 3çš„Composition APIæ–°ç©æ³•</h3>
<p>Vue 3çš„Composition APIä¸ºåŒå‘ç»‘å®šå¸¦æ¥äº†æ›´çµæ´»çš„è§£å†³æ–¹æ¡ˆï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;!-- å­ç»„ä»¶ --&gt;
&lt;script setup&gt;
import { computed } from 'vue'

const props = defineProps(['modelValue'])
const emit = defineEmits(['update:modelValue'])

const value = computed({
  get: () =&gt; props.modelValue,
  set: (newValue) =&gt; emit('update:modelValue', newValue)
})
&lt;/script&gt;

&lt;template&gt;
  &lt;input v-model="value" /&gt;
&lt;/template&gt;
</code></pre>
<h3 data-id="heading-27">æ€»ç»“</h3>
<p>æŒæ¡Vueçˆ¶å­ç»„ä»¶åŒå‘ç»‘å®šçš„å¤šç§æ–¹æ³•ï¼Œèƒ½è®©ä½ åœ¨ä¸åŒåœºæ™¯ä¸‹é€‰æ‹©æœ€åˆé€‚çš„è§£å†³æ–¹æ¡ˆï¼š</p>
<ol>
<li><strong>ç®€å•åœºæ™¯</strong>ï¼šä½¿ç”¨Props + $emitï¼Œä¿æŒä»£ç æ¸…æ™°</li>
<li><strong>è¡¨å•ç»„ä»¶</strong>ï¼šä½¿ç”¨v-modelï¼Œæé«˜å¼€å‘æ•ˆç‡</li>
<li><strong>å¤šä¸ªç»‘å®š</strong>ï¼šVue 2ç”¨.syncï¼ŒVue 3ç”¨å¤šä¸ªv-model</li>
<li><strong>å¤æ‚åº”ç”¨</strong>ï¼šä½¿ç”¨Vuex/Piniaï¼Œé›†ä¸­ç®¡ç†çŠ¶æ€</li>
</ol>
<p>è®°ä½ï¼Œæ²¡æœ‰ç»å¯¹çš„æœ€ä½³æ–¹æ¡ˆï¼Œåªæœ‰æœ€é€‚åˆå½“å‰åœºæ™¯çš„é€‰æ‹©ã€‚å¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¸®åŠ©ä½ åœ¨Vueå¼€å‘ä¸­æ¸¸åˆƒæœ‰ä½™åœ°å¤„ç†ç»„ä»¶é€šä¿¡é—®é¢˜ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[AIè®¾è®¡ç±»äº§å“åˆ†æï¼šLovart]]></title>    <link>https://juejin.cn/post/7590213554798313507</link>    <guid>https://juejin.cn/post/7590213554798313507</guid>    <pubDate>2026-01-03T06:14:37.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7590213554798313507" data-draft-id="7590159073989787700" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="AIè®¾è®¡ç±»äº§å“åˆ†æï¼šLovart"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-03T06:14:37.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¬é£è¯´å›¾"/> <meta itemprop="url" content="https://juejin.cn/user/198345371681864"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            AIè®¾è®¡ç±»äº§å“åˆ†æï¼šLovart
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/198345371681864/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¬é£è¯´å›¾
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-03T06:14:37.000Z" title="Sat Jan 03 2026 06:14:37 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong>æ ¸å¿ƒè§‚ç‚¹</strong>ï¼šAI è®¾è®¡ç±»äº§å“çš„ä¸¤å¤§æ ¸å¿ƒå£å’â€”â€”<strong>çŸ¢é‡æ¸²æŸ“å¼•æ“æ˜¯åº•åº§ï¼Œç»“æ„åŒ–è½¬æ¢æ˜¯çµé­‚</strong>ã€‚AI å¤§æ¨¡å‹æœ¬èº«ä¸æ˜¯æŠ¤åŸæ²³ã€‚</p>
<hr/>
<h2 data-id="heading-0">1. æ ¸å¿ƒç»“è®ºï¼ˆå…ˆè¯´ç»“è®ºï¼‰</h2>
<pre><code class="hljs language-arduino" lang="arduino">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           ç”¨æˆ·æ„ŸçŸ¥å±‚ï¼ˆäº§å“ä½“éªŒï¼‰                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚     ç»“æ„åŒ–è½¬æ¢å±‚ï¼ˆçµé­‚ï¼‰                             â”‚  â† å†³å®š<span class="hljs-string">"å¥½ä¸å¥½ç”¨"</span>
â”‚     - æ··æ²Œ AI è¾“å‡º â†’ è¯­ä¹‰åŒ–å›¾å±‚æ ‘                   â”‚
â”‚     - é™æ€å¸ƒå±€ â†’ å“åº”å¼çº¦æŸ                         â”‚
â”‚     - ä½å›¾ â†’ å¯ç¼–è¾‘çŸ¢é‡                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚     çŸ¢é‡æ¸²æŸ“å¼•æ“ï¼ˆåº•åº§ï¼‰                             â”‚  â† å†³å®š<span class="hljs-string">"èƒ½ä¸èƒ½åš"</span>
â”‚     - è·¯å¾„æ¸²æŸ“ / å›¾å±‚æ··åˆ / <span class="hljs-number">60f</span>ps æ€§èƒ½              â”‚
â”‚     - æ‰€æœ‰ä¸Šå±‚èƒ½åŠ›çš„ç‰©ç†æ‰¿è½½                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚     AI ç”Ÿæˆæ¨¡å‹ï¼ˆæ°´ç”µç…¤ï¼‰                            â”‚  â† å¯è´­ä¹°ï¼Œéå£å’
â”‚     - Sora / Midjourney / Veo ç­‰                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<p><strong>ä¸€å¥è¯æ€»ç»“</strong>ï¼š</p>
<p><strong>é“æ‰“çš„å¼•æ“ï¼Œæµæ°´çš„æ¨¡å‹ã€‚</strong> ç”¨æˆ·ä½çš„æ˜¯æˆ¿å­ï¼ˆæ¸²æŸ“å¼•æ“ï¼‰ï¼Œä¸æ˜¯æ°´ç”µç…¤ï¼ˆAI æ¨¡å‹ï¼‰ã€‚è€Œç»“æ„åŒ–è½¬æ¢å±‚å†³å®šäº†æˆ¿å­ä½å¾—èˆ’ä¸èˆ’æœã€‚</p>
<hr/>
<h2 data-id="heading-1">2. Lovart ç®€ä»‹</h2>
<p><strong>Lovart</strong> æ˜¯ä¸€æ¬¾å®šä½ä¸ºã€ŒAI è®¾è®¡æ™ºèƒ½ä½“ï¼ˆDesign Agentï¼‰ã€çš„äº§å“ï¼Œç”± Resonate International INC å¼€å‘ã€‚å…¶æ ¸å¿ƒèƒ½åŠ›æ˜¯å°†ç”¨æˆ·çš„è‡ªç„¶è¯­è¨€éœ€æ±‚ï¼Œè‡ªåŠ¨è½¬åŒ–ä¸ºä¸“ä¸šçº§çš„è®¾è®¡äº§å‡ºï¼ˆå›¾åƒã€è§†é¢‘ã€3D ç­‰ï¼‰ã€‚</p>
<ul>
<li><strong>å®˜ç½‘</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.lovart.ai" target="_blank" title="https://www.lovart.ai" ref="nofollow noopener noreferrer">www.lovart.ai</a></li>
<li><strong>å®šä½</strong>ï¼šå…¨çƒé¦–ä¸ª AI è®¾è®¡æ™ºèƒ½ä½“</li>
<li><strong>Slogan</strong>ï¼šã€Œè®©è®¾è®¡æ›´åŠ æ™ºèƒ½ï¼Œè®©äº¤ä»˜æ›´åŠ é«˜æ•ˆã€</li>
</ul>
<hr/>
<h2 data-id="heading-2">3. äº§å“æ¶æ„åˆ†æ</h2>
<p>Lovart çš„äº§å“æ¶æ„å¯ä»¥åˆ†ä¸ºä¸‰å±‚ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ç”¨æˆ·äº¤äº’å±‚ (UI)                           â”‚
â”‚         è‡ªç„¶è¯­è¨€è¾“å…¥ â†’ å®æ—¶ç”»å¸ƒæ¸²æŸ“ â†’ å¯è§†åŒ–ç¼–è¾‘              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                  ç»“æ„åŒ–è½¬æ¢å±‚ (çµé­‚)                         â”‚
â”‚       AI è¾“å‡ºè§£æ | å›¾å±‚åˆ†ç¦» | å¸ƒå±€æ¨æ–­ | è¯­ä¹‰ç†è§£            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                   AI æ¨¡å‹èšåˆå±‚ (æ°´ç”µç…¤)                     â”‚
â”‚   Sora2 | Veo3<span class="hljs-selector-class">.1</span> | Midjourney | Kling | Hailuo | Seedream  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                   çŸ¢é‡æ¸²æŸ“å¼•æ“å±‚ (åº•åº§)                      â”‚
â”‚         çŸ¢é‡æ¸²æŸ“ | å›¾å±‚ç®¡ç† | å®æ—¶é¢„è§ˆ | å¯¼å‡ºäº¤ä»˜             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h3 data-id="heading-3">å…³é”®æ´å¯Ÿ</h3>
<p><strong>Lovart å¹¶æ²¡æœ‰è‡ªç ”å¤§éƒ¨åˆ† AI ç”Ÿæˆæ¨¡å‹</strong>â€”â€”å®ƒèšåˆäº†å¸‚é¢ä¸Šå‡ ä¹æ‰€æœ‰é¡¶çº§çš„å›¾åƒ/è§†é¢‘ç”Ÿæˆæ¨¡å‹ï¼ˆSoraã€Veoã€Midjourneyã€Klingã€Hailuo ç­‰ï¼‰ï¼Œé€šè¿‡ç»Ÿä¸€çš„ API è°ƒç”¨æä¾›ç»™ç”¨æˆ·ã€‚</p>
<p>è¿™æ„å‘³ç€ï¼š<strong>AI ç”Ÿæˆèƒ½åŠ›æ˜¯ã€Œå¯è´­ä¹°ã€çš„æ ‡å‡†åŒ–æœåŠ¡ï¼Œä¸æ˜¯ Lovart çš„æŠ¤åŸæ²³ã€‚</strong></p>
<hr/>
<h2 data-id="heading-4">4. å£å’ä¸€ï¼šçŸ¢é‡æ¸²æŸ“å¼•æ“ï¼ˆåº•åº§ï¼‰</h2>
<p><strong>æ²¡æœ‰æ¸²æŸ“å¼•æ“ï¼Œä¸€åˆ‡éƒ½æ˜¯ç©ºä¸­æ¥¼é˜ã€‚</strong></p>
<h3 data-id="heading-5">4.1 ä¸ºä»€ä¹ˆæ˜¯ã€Œåº•åº§ã€ï¼Ÿ</h3>





























<table><thead><tr><th>æŒ‘æˆ˜</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>å·¥ç¨‹å¤æ‚åº¦</strong></td><td>ä¸“ä¸šçº§è®¾è®¡è½¯ä»¶éœ€è¦å¤„ç†çŸ¢é‡è·¯å¾„ã€å¸ƒå±€çº¦æŸã€å›¾å±‚æ··åˆã€æ¸å˜/é˜´å½±ç­‰ï¼Œå·¥ç¨‹é‡å·¨å¤§</td></tr><tr><td><strong>æ€§èƒ½è¦æ±‚</strong></td><td>å®æ—¶é¢„è§ˆéœ€è¦ 60fps æµç•…æ¸²æŸ“ï¼Œå¯¹ WebGL/WebGPU æœ‰æé«˜è¦æ±‚</td></tr><tr><td><strong>äº¤äº’ä½“éªŒ</strong></td><td>æ‹–æ‹½ã€ç¼©æ”¾ã€å¯¹é½ç­‰äº¤äº’éœ€è¦æ¯«ç§’çº§å“åº”ï¼Œå‰ç«¯ä¼˜åŒ–æ·±åº¦å†³å®šç”¨æˆ·ä½“éªŒ</td></tr><tr><td><strong>æ ¼å¼å…¼å®¹</strong></td><td>éœ€è¦æ”¯æŒä¸ Figmaã€Sketchã€Adobe ç­‰å·¥å…·çš„æ ¼å¼äº’é€š</td></tr><tr><td><strong>é•¿æœŸç§¯ç´¯</strong></td><td>è¿™ç±»æŠ€æœ¯æ— æ³•é èµ„é‡‘å¿«é€Ÿå †ç§¯ï¼Œéœ€è¦å›¢é˜Ÿé•¿æœŸæ²‰æ·€</td></tr></tbody></table>
<h3 data-id="heading-6">4.2 å¯æ›¿ä»£æ€§åˆ†æ</h3>



































<table><thead><tr><th>ç¯èŠ‚</th><th>æŠ€æœ¯å®ç°</th><th>å¯æ›¿ä»£æ€§</th></tr></thead><tbody><tr><td>AI ç”Ÿæˆ</td><td>è°ƒç”¨ç¬¬ä¸‰æ–¹ APIï¼ˆSoraã€Midjourney ç­‰ï¼‰</td><td><strong>æé«˜</strong>ï¼Œä»»ä½•äººéƒ½å¯ä»¥æ¥å…¥</td></tr><tr><td>è‡ªç„¶è¯­è¨€ç†è§£</td><td>LLMï¼ˆGPT ç­‰ï¼‰</td><td><strong>æé«˜</strong>ï¼Œæ ‡å‡†åŒ– API</td></tr><tr><td><strong>å®æ—¶ç”»å¸ƒæ¸²æŸ“</strong></td><td>è‡ªç ”å‰ç«¯çŸ¢é‡å¼•æ“</td><td><strong>æä½</strong>ï¼Œéœ€è¦å¤§é‡å·¥ç¨‹æŠ•å…¥</td></tr><tr><td><strong>å›¾å±‚ç¼–è¾‘ç³»ç»Ÿ</strong></td><td>è‡ªç ”å›¾å±‚ç®¡ç†</td><td><strong>æä½</strong>ï¼Œä¸“ä¸šçº§è®¾è®¡è½¯ä»¶é—¨æ§›</td></tr><tr><td><strong>è®¾è®¡å…ƒç´ ç»„åˆ</strong></td><td>å¸ƒå±€/å¯¹é½/å˜æ¢ç³»ç»Ÿ</td><td><strong>æä½</strong>ï¼ŒFigma çº§çš„å·¥ç¨‹å¤æ‚åº¦</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-7">5. å£å’äºŒï¼šç»“æ„åŒ–è½¬æ¢å±‚ï¼ˆçµé­‚ï¼‰</h2>
<p><strong>æ¸²æŸ“å¼•æ“å†³å®šã€Œèƒ½ä¸èƒ½åšã€ï¼Œç»“æ„åŒ–è½¬æ¢å†³å®šã€Œå¥½ä¸å¥½ç”¨ã€ã€‚</strong></p>
<h3 data-id="heading-8">5.1 æ ¸å¿ƒé—®é¢˜ï¼šAI è¾“å‡º â‰  å¯ç¼–è¾‘è®¾è®¡ç¨¿</h3>
<p>å¾ˆå¤šäººå‡è®¾ AI ç”Ÿæˆçš„å†…å®¹å¯ä»¥ç›´æ¥è¿›å…¥å¼•æ“ç¼–è¾‘ï¼Œä½†å®é™…ä¸Šï¼š</p>





















<table><thead><tr><th>AI è¾“å‡º</th><th>æ¸²æŸ“å¼•æ“éœ€è¦</th></tr></thead><tbody><tr><td>ä½å›¾ï¼ˆPixelsï¼‰</td><td>ç»“æ„åŒ–çŸ¢é‡è·¯å¾„</td></tr><tr><td>æ‚ä¹±çš„ SVG</td><td>æ¸…æ™°çš„å›¾å±‚æ ‘</td></tr><tr><td>æ— è¯­ä¹‰çš„åƒç´ å—</td><td>å¸¦å‘½åçš„ç»„ä»¶/çº¦æŸ</td></tr></tbody></table>
<h3 data-id="heading-9">5.2 çœŸæ­£çš„æŠ€æœ¯æ·±æ°´åŒº</h3>
<p><strong>ä¸ä»…ä»…æ˜¯ã€Œæ¸²æŸ“ã€ï¼Œè€Œæ˜¯ã€Œå¦‚ä½•å°† AI çš„æ··æ²Œè¾“å‡ºç¬é—´è½¬åŒ–ä¸ºæœ‰åºçš„å›¾å±‚ç»“æ„ã€</strong>ï¼š</p>
<pre><code class="hljs language-css" lang="css">AI ç”Ÿæˆç»“æœ â†’ <span class="hljs-selector-attr">[ç»“æ„åŒ–è½¬æ¢å±‚]</span> â†’ å¯ç¼–è¾‘çš„è®¾è®¡ç¨¿
                    â†‘
              è¿™é‡Œæ‰æ˜¯çµé­‚
</code></pre>
<p>æ ¸å¿ƒèƒ½åŠ›åŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>è‡ªåŠ¨çŸ¢é‡åŒ–</strong>ï¼šä½å›¾ â†’ å¯ç¼–è¾‘çŸ¢é‡è·¯å¾„</li>
<li><strong>è‡ªåŠ¨å›¾å±‚åˆ†ç¦»</strong>ï¼šæ··æ²Œåƒç´  â†’ è¯­ä¹‰åŒ–å›¾å±‚æ ‘</li>
<li><strong>è‡ªåŠ¨å»ºç«‹çº¦æŸ</strong>ï¼šé™æ€å¸ƒå±€ â†’ AutoLayout å“åº”å¼ç»“æ„</li>
<li><strong>è‡ªåŠ¨å‘½å/åˆ†ç»„</strong>ï¼šæ— åºå…ƒç´  â†’ ç¬¦åˆè®¾è®¡è§„èŒƒçš„ç»„ä»¶</li>
</ul>
<p><strong>è¿™æ‰æ˜¯è®©è®¾è®¡å¸ˆè§‰å¾—ã€Œå¥½ç”¨ã€çš„å…³é”®</strong>â€”â€”ç”¨æˆ·ä¸æ˜¯æƒ³è¦ä¸€å¼ å›¾ï¼Œè€Œæ˜¯æƒ³è¦ä¸€ä¸ª<strong>å¯ä»¥ç»§ç»­ç¼–è¾‘çš„è®¾è®¡ç¨¿</strong>ã€‚</p>
<hr/>
<h2 data-id="heading-10">6. ä¸ºä»€ä¹ˆ AI æ¨¡å‹ä¸æ˜¯å£å’ï¼Ÿ</h2>
<ol>
<li><strong>æ¨¡å‹åŒè´¨åŒ–</strong>ï¼šSoraã€Veoã€Midjourney ç­‰æ¨¡å‹çš„ API å¯¹æ‰€æœ‰äººå¼€æ”¾ï¼Œæˆæœ¬å·®å¼‚ä»…åœ¨äºè§„æ¨¡æ•ˆåº”ã€‚</li>
<li><strong>æ¨¡å‹è¿­ä»£å¿«</strong>ï¼šä»Šå¤©çš„æœ€å¼ºæ¨¡å‹ï¼Œ3 ä¸ªæœˆåå¯èƒ½è¢«æ–°æ¨¡å‹è¶…è¶Šã€‚æŠ¼æ³¨å•ä¸€æ¨¡å‹æ˜¯é«˜é£é™©ç­–ç•¥ã€‚</li>
<li><strong>ç”¨æˆ·æ— æ„ŸçŸ¥</strong>ï¼šç”¨æˆ·ä¸å…³å¿ƒåç«¯ç”¨çš„æ˜¯ Sora è¿˜æ˜¯ Veoï¼Œåªå…³å¿ƒæœ€ç»ˆäº§å‡ºçš„è´¨é‡å’Œå¯ç”¨æ€§ã€‚</li>
</ol>
<p>Lovart çš„èªæ˜ä¹‹å¤„åœ¨äºï¼š<strong>åšæ¨¡å‹çš„ã€Œèšåˆè€…ã€è€Œéã€Œè‡ªç ”è€…ã€</strong>ï¼Œå°†ç²¾åŠ›èšç„¦åœ¨ç”¨æˆ·çœŸæ­£èƒ½æ„ŸçŸ¥åˆ°çš„å‰ç«¯ä½“éªŒä¸Šã€‚</p>
<hr/>
<h2 data-id="heading-11">7. å•†ä¸šæ¨¡å¼éªŒè¯</h2>
<p>Lovart çš„è®¢é˜…å®šä»·å°è¯äº†ä¸Šè¿°åˆ†æï¼š</p>






























<table><thead><tr><th>å¥—é¤</th><th>æœˆè´¹</th><th>æ ¸å¿ƒå–ç‚¹</th></tr></thead><tbody><tr><td>Starter</td><td>$16/æœˆ</td><td>2000 ç§¯åˆ†ï¼Œ2 å¹¶å‘</td></tr><tr><td>Basic</td><td>$27/æœˆ</td><td>3500 ç§¯åˆ†ï¼Œ4 å¹¶å‘</td></tr><tr><td>Pro</td><td>$45/æœˆ</td><td>11000 ç§¯åˆ†ï¼Œ8 å¹¶å‘</td></tr><tr><td>Ultimate</td><td>$99/æœˆ</td><td>27000 ç§¯åˆ†ï¼Œ10 å¹¶å‘</td></tr></tbody></table>
<p><strong>æ³¨æ„</strong>ï¼šLovart çš„ç§¯åˆ†æ˜¯ç”¨æ¥æ¶ˆè€— AI æ¨¡å‹è°ƒç”¨çš„ï¼ˆå³å¯å˜æˆæœ¬ï¼‰ï¼Œè€Œè®¢é˜…è´¹ç”¨çš„æ ¸å¿ƒæ˜¯ä¸ºäº†æ”¯æ’‘å…¶<strong>å‰ç«¯äº§å“ä½“éªŒçš„æŒç»­è¿­ä»£</strong>ã€‚</p>
<hr/>
<h2 data-id="heading-12">8. å¯¹ FigDev çš„å¯ç¤º</h2>
<h3 data-id="heading-13">8.1 æˆ‘ä»¬çš„ä¼˜åŠ¿</h3>
<p>FigDev çš„æŠ€æœ¯è·¯çº¿ä¸ã€Œåº•åº§ + çµé­‚ã€çš„æˆåŠŸé€»è¾‘é«˜åº¦å¥‘åˆï¼š</p>









































<table><thead><tr><th>å£å’ç±»å‹</th><th>FigDev çš„å¯¹åº”èƒ½åŠ›</th></tr></thead><tbody><tr><td><strong>çŸ¢é‡æ¸²æŸ“å¼•æ“ï¼ˆåº•åº§ï¼‰</strong></td><td>WebGPU è‡ªç ”çŸ¢é‡æ¸²æŸ“å¼•æ“</td></tr><tr><td>å®æ—¶ç”»å¸ƒæ¸²æŸ“</td><td><code>flare/ecs</code> + ECS æ¶æ„</td></tr><tr><td>å›¾å±‚ç¼–è¾‘ç³»ç»Ÿ</td><td>Figma è§†å›¾å±‚å®ç°</td></tr><tr><td>è®¾è®¡å…ƒç´ ç»„åˆ</td><td>AutoLayout (yoga-layout)</td></tr><tr><td><strong>ç»“æ„åŒ–è½¬æ¢å±‚ï¼ˆçµé­‚ï¼‰</strong></td><td><code>dataTransformation</code> æ¨¡å—</td></tr><tr><td>Figma JSON â†’ ECS èŠ‚ç‚¹</td><td>å·²å®ç°</td></tr><tr><td>çŸ¢é‡è·¯å¾„è§£æ</td><td><code>svgPathParser</code></td></tr><tr><td>è‡ªåŠ¨å¸ƒå±€çº¦æŸ</td><td><code>AutoLayoutSys</code></td></tr></tbody></table>
<h3 data-id="heading-14">8.2 æˆ˜ç•¥å»ºè®®</h3>






























<table><thead><tr><th>ä¼˜å…ˆçº§</th><th>ç­–ç•¥</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>â­â­â­</td><td><strong>æ·±è€•æ¸²æŸ“å¼•æ“</strong></td><td>60fpsã€å¤æ‚è·¯å¾„ã€æ¸å˜å¡«å……ç­‰ã€Œéš¾å•ƒçš„éª¨å¤´ã€æ‰æ˜¯çœŸæ­£çš„å£å’</td></tr><tr><td>â­â­â­</td><td><strong>æ‰©å±•è½¬æ¢å±‚</strong></td><td>å°† <code>dataTransformation</code> èƒ½åŠ›æ‰©å±•åˆ°ã€ŒAI è¾“å‡º â†’ ç»“æ„åŒ–è®¾è®¡ç¨¿ã€åœºæ™¯</td></tr><tr><td>â­â­</td><td><strong>è‡ªç ”ä¸“ç”¨å°æ¨¡å‹</strong></td><td>è®­ç»ƒã€Œæœ€æ‡‚è®¾è®¡ç¼–è¾‘ã€çš„ä¸“ç”¨æ¨¡å‹ï¼ˆè§ä¸‹æ–‡ï¼‰</td></tr><tr><td>â­</td><td><strong>èšåˆ AI æ¨¡å‹</strong></td><td>ä¸åšå¤§æ¨¡å‹å†›å¤‡ç«èµ›ï¼Œç›´æ¥èšåˆ Soraã€Midjourney ç­‰</td></tr></tbody></table>
<h3 data-id="heading-15">8.3 å·®å¼‚åŒ–å®šä½</h3>
<pre><code class="hljs">Lovartï¼šAI ç”Ÿæˆ â†’ é™æ€å†…å®¹ï¼ˆ2D/3D/è§†é¢‘ï¼‰
FigDevï¼šAI ç”Ÿæˆ â†’ é™æ€æˆ–å¸¦äº¤äº’çš„å†…å®¹ï¼ˆ2D/3D/è§†é¢‘/ç½‘é¡µï¼‰
</code></pre>
<hr/>
<h2 data-id="heading-16">9. AI å°æ¨¡å‹ç­–ç•¥ï¼šå»ºç«‹ç‹¬ç‰¹å£å’</h2>
<p>è™½ç„¶ä¸åšå¤§æ¨¡å‹å†›å¤‡ç«èµ›ï¼Œä½†<strong>è‡ªç ”ä¸“ç”¨å°æ¨¡å‹</strong>æ˜¯å¿…è¦çš„ã€‚</p>
<h3 data-id="heading-17">9.1 ä¸ºä»€ä¹ˆéœ€è¦å°æ¨¡å‹ï¼Ÿ</h3>
<p>ç»“æ„åŒ–è½¬æ¢å±‚çš„ã€Œçµé­‚ã€èƒ½åŠ›ï¼Œéœ€è¦ AI æ¥å¢å¼ºï¼š</p>





















<table><thead><tr><th>å°æ¨¡å‹ç±»å‹</th><th>æ ¸å¿ƒä½œç”¨</th></tr></thead><tbody><tr><td><strong>ç»“æ„åŒ–è¯†åˆ«æ¨¡å‹</strong></td><td>å°† AI ç”Ÿæˆçš„ä½å›¾/SVG è½¬åŒ–ä¸ºè¯­ä¹‰åŒ–å›¾å±‚ç»“æ„</td></tr><tr><td><strong>å¸ƒå±€æ¨æ–­æ¨¡å‹</strong></td><td>è‡ªåŠ¨è¯†åˆ«å…ƒç´ å…³ç³»ï¼Œå»ºç«‹ AutoLayout çº¦æŸ</td></tr><tr><td><strong>è®¾è®¡ä¿®æ­£æ¨¡å‹</strong></td><td>æ ¹æ®è®¾è®¡è§„èŒƒè‡ªåŠ¨ä¼˜åŒ–é—´è·ã€å¯¹é½ã€é…è‰²</td></tr></tbody></table>
<h3 data-id="heading-18">9.2 æ•°æ®é£è½®ï¼šç”¨æˆ·è¡Œä¸ºåå“ºæ¨¡å‹</h3>
<p><strong>æ ¸å¿ƒæ´å¯Ÿ</strong>ï¼šç”¨æˆ·åœ¨ç¼–è¾‘å™¨ä¸­çš„æ¯ä¸€æ¬¡ä¿®æ”¹ï¼Œéƒ½æ˜¯æœ€é«˜è´¨é‡çš„æ ‡æ³¨æ•°æ®ã€‚</p>
<pre><code class="hljs language-markdown" lang="markdown">AI ç”Ÿæˆ â†’ ç”¨æˆ·åœ¨ç¼–è¾‘å™¨ä¸­ä¿®æ”¹ â†’ ä¿®æ”¹è®°å½•ä½œä¸ºè®­ç»ƒæ•°æ® â†’ åå“ºå°æ¨¡å‹ â†’ AI ç”Ÿæˆæ›´å‡†ç¡®
<span class="hljs-code">              â†‘                                                    â†“
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</span></code></pre>

























<table><thead><tr><th>ç”¨æˆ·è¡Œä¸º</th><th>æ•°æ®ä»·å€¼</th></tr></thead><tbody><tr><td>è°ƒæ•´å›¾å±‚å±‚çº§</td><td>è®­ç»ƒã€Œå›¾å±‚åˆ†ç¦»æ¨¡å‹ã€</td></tr><tr><td>ä¿®æ”¹å¸ƒå±€çº¦æŸ</td><td>è®­ç»ƒã€Œå¸ƒå±€æ¨æ–­æ¨¡å‹ã€</td></tr><tr><td>é‡å‘½åç»„ä»¶</td><td>è®­ç»ƒã€Œè¯­ä¹‰ç†è§£æ¨¡å‹ã€</td></tr><tr><td>ä¿®æ­£é¢œè‰²/é—´è·</td><td>è®­ç»ƒã€Œè®¾è®¡ä¿®æ­£æ¨¡å‹ã€</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-19">10. æ€»ç»“</h2>
<h3 data-id="heading-20">æ ¸å¿ƒæ¡†æ¶</h3>






























<table><thead><tr><th>å±‚çº§</th><th>å®šä½</th><th>æˆ˜ç•¥ä¼˜å…ˆçº§</th></tr></thead><tbody><tr><td><strong>çŸ¢é‡æ¸²æŸ“å¼•æ“</strong></td><td>åº•åº§ â€” å†³å®šã€Œèƒ½ä¸èƒ½åšã€</td><td>â­â­â­</td></tr><tr><td><strong>ç»“æ„åŒ–è½¬æ¢å±‚</strong></td><td>çµé­‚ â€” å†³å®šã€Œå¥½ä¸å¥½ç”¨ã€</td><td>â­â­â­</td></tr><tr><td><strong>AI å°æ¨¡å‹</strong></td><td>å¢å¼º â€” å½¢æˆç‹¬ç‰¹å£å’</td><td>â­â­</td></tr><tr><td><strong>AI å¤§æ¨¡å‹</strong></td><td>æ°´ç”µç…¤ â€” èšåˆå³å¯</td><td>â­</td></tr></tbody></table>
<h3 data-id="heading-21">ä¸€å¥è¯æ€»ç»“</h3>
<p><strong>æ¸²æŸ“æ˜¯åº•åº§ï¼Œè½¬æ¢æ˜¯çµé­‚ã€‚</strong> FigDev çš„æ ¸å¿ƒç«äº‰åŠ›ä¸åœ¨äºç”Ÿæˆäº†ä»€ä¹ˆï¼Œè€Œåœ¨äº<strong>å¦‚ä½•æ‰¿æ¥ã€ç¼–è¾‘ã€ç»„ç»‡å’Œäº¤ä»˜</strong>è¿™äº›ç”Ÿæˆçš„å†…å®¹ã€‚</p>
<p><em>æ›´å¤šç²¾å½©å†…å®¹å¯å…³æ³¨</em><a href="https://link.juejin.cn?target=https%3A%2F%2F01joy.com%2F" target="_blank" title="https://01joy.com/" ref="nofollow noopener noreferrer">é£èµ·çš„åšå®¢</a> <em>ï¼Œå¾®ä¿¡å…¬ä¼—å·ï¼šå¬é£è¯´å›¾</em></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[npmåŒ…å¼€å‘åŠç§æœ‰ä»“åº“é…ç½®ä½¿ç”¨]]></title>    <link>https://juejin.cn/post/7590457413347803163</link>    <guid>https://juejin.cn/post/7590457413347803163</guid>    <pubDate>2026-01-03T06:32:47.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7590457413347803163" data-draft-id="7590011643296366630" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="npmåŒ…å¼€å‘åŠç§æœ‰ä»“åº“é…ç½®ä½¿ç”¨"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-03T06:32:47.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æƒ³è¦ä¸€è¾†æ´’æ°´è½¦"/> <meta itemprop="url" content="https://juejin.cn/user/52378148281933"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            npmåŒ…å¼€å‘åŠç§æœ‰ä»“åº“é…ç½®ä½¿ç”¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/52378148281933/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æƒ³è¦ä¸€è¾†æ´’æ°´è½¦
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-03T06:32:47.000Z" title="Sat Jan 03 2026 06:32:47 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åŸå› ï¼šä¸€ä¸ªé¡¹ç›®å¤šä¸ªç³»ç»Ÿä¹‹é—´å­˜åœ¨å¯å¤ç”¨çš„ä»£ç ï¼Œé‡å¤çš„å¤åˆ¶ç²˜è´´åŠä¿®æ”¹ï¼Œå¶å°”ä¹Ÿä¼šé—æ¼ã€‚é›†ä¸­ç®¡ç†å’Œç»´æŠ¤ï¼Œæå‡ä»£ç å¤ç”¨ç‡å’Œç»´æŠ¤æ•ˆç‡</p>
<h2 data-id="heading-0">å¼€å‘npmåŒ…</h2>
<h3 data-id="heading-1">åˆå§‹åŒ–é¡¹ç›®</h3>
<p>ç”Ÿæˆpackage.jsonæ–‡ä»¶</p>
<pre><code class="hljs language-csharp" lang="csharp">npm <span class="hljs-keyword">init</span> -y
</code></pre>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"product-npm"</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// åŒ…åç§°</span>
  <span class="hljs-attr">"version"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"1.0.0"</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// åŒ…ç‰ˆæœ¬ä¿¡æ¯</span>
  <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">""</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"main"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"dist/index.js"</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// åŒ…çš„å…¥å£æ–‡ä»¶</span>
  <span class="hljs-attr">"scripts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"test"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"echo \"Error: no test specified\" &amp;&amp; exit 1"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"build"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"rollup --config"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"keywords"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"author"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">""</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"license"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ISC"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 data-id="heading-2">ç¼–å†™ä»£ç å†…å®¹åŠæ‰“åŒ…</h3>
<p>å®‰è£… rollupjs è¿›è¡Œæ‰“åŒ…ï¼Œç”Ÿæˆdistæ–‡ä»¶å¤¹ï¼Œå†…å®¹å­˜æ”¾åœ¨è¯¥æ–‡ä»¶å¤¹ä¸‹ã€‚ <code>main</code>çš„å€¼ä¹Ÿéœ€æ ¹æ®è¾“å‡ºåœ°å€è¿›è¡Œå˜æ›´</p>
<h2 data-id="heading-3">é€‰æ‹© verdaccio è¿›è¡Œç§æœ‰ä»“åº“ç®¡ç†</h2>
<h3 data-id="heading-4">å…¨å±€å®‰è£…verdaccio</h3>
<pre><code class="hljs language-cmd" lang="cmd">npm i verdaccio -g
</code></pre>
<h3 data-id="heading-5">æ£€æŸ¥æ˜¯å¦å®‰è£…æˆåŠŸ</h3>
<p>æ˜¾ç¤ºç‰ˆæœ¬å·å³ä¸ºæˆåŠŸ</p>
<pre><code class="hljs language-cmd" lang="cmd">verdaccio -v
</code></pre>
<h3 data-id="heading-6">è¿è¡Œ verdaccio</h3>
<pre><code class="hljs language-cmd" lang="cmd">verdaccio
</code></pre>
<p>ç»ˆç«¯ä¼šæ˜¾ç¤º config file å’Œ http address</p>
<p>config file - é…ç½®æ–‡ä»¶çš„åœ°å€</p>
<p>htpp address - ä»“åº“çš„ç®¡ç†ç•Œé¢</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/468bca1334c14425896d2fe2c615535a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oOz6KaB5LiA6L6G5rSS5rC06L2m:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768026766&amp;x-signature=g268jLvS1VUwgx0tOM5RTkAwObw%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-7">æ·»åŠ ç”¨æˆ·</h3>
<p>æ‰§è¡Œå‘½ä»¤åï¼Œæ ¹æ®ç»ˆç«¯çš„æç¤ºè®¾ç½®ç”¨æˆ·åã€å¯†ç ã€é‚®ç®±</p>
<pre><code class="hljs language-cmd" lang="cmd">npm add user --registry http://localhost:4873/
# --registry http://localhost:4873/ æŒ‡å®šä»“åº“æº
</code></pre>
<p>å¦‚å‡ºç°æŠ¥é”™éœ€è¦æ£€æŸ¥é…ç½®æ–‡ä»¶ä¸­<code>max_users</code>æ˜¯å¦æœ‰è®¾ç½®ï¼ˆé»˜è®¤è¢«æ³¨é‡Šäº†ï¼‰ä¸”å€¼ä¸èƒ½ä¸º1</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">auth:</span>
  <span class="hljs-attr">htpasswd:</span>
    <span class="hljs-attr">file:</span> <span class="hljs-string">./htpasswd</span>
    <span class="hljs-comment"># Maximum amount of users allowed to register, defaults to "+inf".</span>
    <span class="hljs-comment"># You can set this to -1 to disable registration. å¦‚æœä¸º-1ç¦æ­¢æ³¨å†Œ</span>
    <span class="hljs-attr">max_users:</span> <span class="hljs-number">1000</span>
    <span class="hljs-comment"># Hash algorithm, possible options are: "bcrypt", "md5", "sha1", "crypt".</span>
    <span class="hljs-comment"># algorithm: bcrypt # by default is crypt, but is recommended use bcrypt for new installations</span>
    <span class="hljs-comment"># Rounds number for "bcrypt", will be ignored for other algorithms.</span>
    <span class="hljs-comment"># rounds: 10</span>
</code></pre>
<h3 data-id="heading-8">ç™»å½•ç”¨æˆ·</h3>
<pre><code class="hljs language-arduino" lang="arduino">npm login --registry http:<span class="hljs-comment">//localhost:4873/</span>
</code></pre>
<h3 data-id="heading-9">å‘å¸ƒ\æ›´æ–°åŒ…</h3>
<p>åœ¨åŒ…æ ¹ç›®å½•æ‰§è¡Œ</p>
<pre><code class="hljs language-arduino" lang="arduino">npm publish --registry http:<span class="hljs-comment">//localhost:4873/</span>
</code></pre>
<p>å¦‚å‡ºç°æŠ¥é”™éœ€è¦æ£€æŸ¥<code>package.json</code>æ–‡ä»¶ä¸‹<code>version</code>æ˜¯å¦æœ‰å˜æ›´</p>
<h3 data-id="heading-10">åˆ é™¤åŒ…</h3>
<pre><code class="hljs language-css" lang="css">npm unpublish product-npm<span class="hljs-selector-attr">[åŒ…å]</span> <span class="hljs-attr">--registry</span> http://localhost:<span class="hljs-number">4873</span>/
</code></pre>
<h2 data-id="heading-11">ä½¿ç”¨</h2>
<p>ç”±äºverdaccioéƒ¨ç½²åœ¨è‡ªå·±çš„ç”µè„‘ä¸‹ï¼Œæ‰€ä»¥åœ¨é¡¹ç›®é‡Œç›´æ¥ install å³å¯</p>
<pre><code class="hljs language-css" lang="css">npm <span class="hljs-selector-tag">i</span> product-npm <span class="hljs-attr">--registry</span> http://localhost:<span class="hljs-number">4873</span>/
</code></pre>
<p>åŒäº‹éœ€è¦ä½¿ç”¨æ—¶ï¼Œåˆ™å°†localhostå˜ä¸ºå¯¹åº”çš„æˆ‘çš„ç”µè„‘çš„ip</p>
<pre><code class="hljs language-css" lang="css">npm <span class="hljs-selector-tag">i</span> product-npm <span class="hljs-attr">--registry</span> http://<span class="hljs-number">192.168</span>.<span class="hljs-number">1.6</span>:<span class="hljs-number">4873</span>/
</code></pre>
<p>å¦‚å‡ºç°æ— æ³•å®‰è£…éœ€è¦æ£€æŸ¥é…ç½®æ–‡ä»¶ä¸­<code>listen</code>å‚æ•°ï¼Œå¼€å¯0.0.0.0ï¼Œä»¥è‡´å¯é€šè¿‡ipè®¿é—®</p>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_"># </span><span class="bash">https://verdaccio.org/docs/configuration<span class="hljs-comment">#listen-port</span></span>
listen:
<span class="hljs-meta prompt_">  # </span><span class="bash">- localhost:4873            <span class="hljs-comment"># default value</span></span>
<span class="hljs-meta prompt_">  # </span><span class="bash">- http://localhost:4873     <span class="hljs-comment"># same thing</span></span>
  - 0.0.0.0:4873              # listen on all addresses (INADDR_ANY)
<span class="hljs-meta prompt_"># </span><span class="bash">  - https://example.org:4873  <span class="hljs-comment"># if you want to use https</span></span>
<span class="hljs-meta prompt_"># </span><span class="bash">  - <span class="hljs-string">"[::1]:4873"</span>              <span class="hljs-comment"># ipv6</span></span>
<span class="hljs-meta prompt_"># </span><span class="bash">  - unix:/tmp/verdaccio.sock  <span class="hljs-comment"># unix socket</span></span>
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vueæºç åˆ†æ - ä»å…¥å£åˆ°æ„é€ å‡½æ•°çš„æ•´ä½“æµç¨‹]]></title>    <link>https://juejin.cn/post/7590159073989886004</link>    <guid>https://juejin.cn/post/7590159073989886004</guid>    <pubDate>2026-01-03T07:26:53.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7590159073989886004" data-draft-id="7588445332773126198" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vueæºç åˆ†æ - ä»å…¥å£åˆ°æ„é€ å‡½æ•°çš„æ•´ä½“æµç¨‹"/> <meta itemprop="keywords" content="Vue.js,å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-03T07:26:53.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="luckyCover"/> <meta itemprop="url" content="https://juejin.cn/user/2546933393272872"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vueæºç åˆ†æ - ä»å…¥å£åˆ°æ„é€ å‡½æ•°çš„æ•´ä½“æµç¨‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2546933393272872/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    luckyCover
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-03T07:26:53.000Z" title="Sat Jan 03 2026 07:26:53 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»13åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>Vue ä¸­çš„æ ¸å¿ƒæºç ä¸»è¦æ”¾åœ¨äº† <code>src/core</code> ç›®å½•ä¸‹ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹é¢è¿™æ®µä»£ç </p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5547650397e9419f91d1043f53fd34b8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbHVja3lDb3Zlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768030013&amp;x-signature=gO%2BSP6wepCGjj%2BtTwqKBhJS4KfA%3D" alt="image.png" loading="lazy"/></p>
<p>ä¸Šé¢è¿™æ®µä»£ç æ˜¯æˆ‘ä»¬å¹³å¸¸åˆ›å»ºä¸€ä¸ª Vue é¡¹ç›®ä¸­ main.js å…¥å£æ–‡ä»¶é‡Œçš„åŸå§‹ä»£ç ï¼Œè¿™ä¹Ÿæ˜¯ Vue åˆ›å»ºåº”ç”¨çš„èµ·ç‚¹ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±æ¥åˆ†æä» <code>new Vue()</code> åˆ° <code>$mount</code> è¿™ä¸€è¿‡ç¨‹ Vue éƒ½åšäº†å“ªäº›äº‹ï¼Œä¹Ÿå°±æ˜¯åšäº†å“ªäº›åˆå§‹åŒ–ã€‚</p>
<p>é¦–å…ˆæ˜¯ <code>src/core/index.ts</code> æ–‡ä»¶</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a2ba5c038ee94252a573ee0b895a4467~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbHVja3lDb3Zlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768030013&amp;x-signature=B8tdzJoHVqL7Ek%2BMlCv4vVmzX88%3D" alt="image.png" loading="lazy"/></p>
<p>æˆ‘ä»¬çœ‹åˆ°å®ƒè°ƒç”¨ <code>initGlobalAPI</code> å‡½æ•°ï¼Œå¹¶æŠŠ Vue ä½œä¸ºå‚æ•°ä¼ è¿›å»ï¼Œæˆ‘ä»¬å…ˆä¸ç€æ€¥çœ‹ <code>initGlobalAPI</code> å†…éƒ¨é€»è¾‘ï¼Œå› ä¸ºæˆ‘ä»¬è¿å®ƒä¼ å…¥çš„è¿™ä¸ªå‚æ•° <code>Vue</code> æ˜¯å•¥éƒ½ä¸çŸ¥é“ï¼Œå·¥æ¬²å–„å…¶äº‹ï¼Œå¿…å…ˆåˆ©å…¶å™¨ã€‚æˆ‘ä»¬çœ‹åˆ°æ–‡ä»¶æœ€é¡¶ä¸Š <code>Vue</code> æ˜¯ä»åŒç›®å½•ä¸‹ <code>instance/index</code> æ–‡ä»¶ä¸­å¯¼å‡ºçš„ã€‚
æˆ‘ä»¬æ‰“å¼€æ–‡ä»¶çœ‹ä¸€ä¸‹ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/afe4a7ff77ff4bf589397460c7849410~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbHVja3lDb3Zlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768030013&amp;x-signature=ht%2BscmkNJrC59VyT5gjJRrYk%2F80%3D" alt="image.png" loading="lazy"/></p>
<p>å“¦ï¼ŒåŸæ¥å¯¼å‡ºçš„ Vue æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè€Œä¸”å‡½æ•°åç§°è¿˜æ˜¯å¤§å†™çš„ï¼Œæ‰€ä»¥å¯ä»¥å½“ä½œæ„é€ å‡½æ•°ä½¿ç”¨ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜çœ‹åˆ°åœ¨å‡½æ•°ä¸‹æ–¹è¿˜æœ‰ä¸€ç³»åˆ—ä»¥ <code>xxxMixin</code> ä¸ºé¦–çš„å‡½æ•°è°ƒç”¨ï¼Œè€Œä¸”ä¹ŸæŠŠ Vue è¿™ä¸ªå‡½æ•°å½“ä½œå‚æ•°ä¼ å…¥ï¼Œæˆ‘ä»¬å¯ä»¥çŒœæµ‹è¿™äº›å‡½æ•°è°ƒç”¨å°±æ˜¯æ‰§è¡Œå„ç§åˆå§‹åŒ–æ“ä½œï¼Œè€Œä¸”åœ¨æˆ‘ä»¬ new Vue çš„æ—¶å€™ï¼Œå…¶å®ä¸‹é¢çš„é‚£äº› xxxMixin éƒ½å·²ç»æ‰§è¡Œè¿‡äº†ï¼Œnew Vue æ—¶è°ƒç”¨çš„ _init æ–¹æ³•å®é™…ä¸Šæ˜¯åœ¨ initMixin ä¸­çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬æŠŠå®ƒå½’ç±»åˆ° initMixin ä¸­ï¼Œå¯ä»¥åˆæ­¥å¾—åˆ°ä»¥ä¸‹åˆå§‹åŒ–æµç¨‹å›¾ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cf93b4c31888493fa87306a3ddec0320~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbHVja3lDb3Zlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768030013&amp;x-signature=yzyG9jSiHjQClKRinPrgqElyo2I%3D" alt="image.png" loading="lazy"/></p>
<p>å…·ä½“æ¯ä¸ªå‡½æ•°éƒ½å¹²äº†å“ªäº›äº‹ï¼Œæˆ‘ä»¬æ¥ä¸‹æ¥å°±æŒ‰ç…§ä¸Šè¾¹æµç¨‹å›¾çš„é¡ºåºæ¥é€ä¸ªè¿›è¡Œåˆ†æã€‚</p>
<h3 data-id="heading-0">initMixin</h3>
<p><code>_init</code> æ–¹æ³•æ‰€åœ¨æ–‡ä»¶ï¼ˆsrc/core/instance/init.tsï¼‰</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8c802a95cde14d0b899a562cdf780cb6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbHVja3lDb3Zlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768030013&amp;x-signature=RRc4bvVxIQnfLRhD6vbAwqTde4k%3D" alt="image.png" loading="lazy"/></p>
<p>å®ƒæ˜¯ Vue åŸå‹ä¸Šçš„ä¸€ä¸ªæ–¹æ³•ï¼Œæ¥æ”¶ä¸€ä¸ª options å‚æ•°ï¼Œæˆ‘ä»¬ä¸»è¦åˆ†æå®ƒçš„æ ¸å¿ƒé€»è¾‘ï¼š
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d973b5125285495ab398ec29aa1798b1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbHVja3lDb3Zlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768030013&amp;x-signature=loSzaXb6erD4PFZ4CAFu7J06Hjo%3D" alt="image.png" loading="lazy"/></p>
<p>1ã€é¦–å…ˆå°† this èµ‹å€¼ç»™ vm</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/271f310c5e3b4b59acff67a4d4ca079e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbHVja3lDb3Zlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768030013&amp;x-signature=kPx5mw3lSfcZRZnDUpzRrPlTMTY%3D" alt="image.png" loading="lazy"/></p>
<p>è¿™é‡Œçš„ this å°±æ˜¯ new Vue æ—¶æ„é€ å‡ºæ¥çš„å®ä¾‹å¯¹è±¡ï¼Œæ‰€ä»¥ vm ç‰¹æŒ‡ Vue å®ä¾‹å¯¹è±¡ã€‚</p>
<p>å‡½æ•°å¤–éƒ¨æœ‰ä¸€ä¸ª uid å˜é‡ï¼Œé»˜è®¤ä» 0 å¼€å§‹</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a023d7499b094ba8b809debef055981b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbHVja3lDb3Zlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768030013&amp;x-signature=iI54c7RQvqEdnSin3JJVraZ1oHs%3D" alt="image.png" loading="lazy"/></p>
<p>æ¥ç€å¾€ Vue å®ä¾‹å¯¹è±¡ä¸Šæ·»åŠ ä¸€ä¸ª <code>_uid</code> å±æ€§ä½œä¸ºå”¯ä¸€æ ‡è¯†ï¼Œå€¼é»˜è®¤æ˜¯ 0ï¼Œèµ‹å€¼å®Œå uid è‡ªå¢ï¼ˆè¿™æ ·ä¸‹ä¸€ä¸ª new Vue æ„é€ çš„å®ä¾‹ï¼Œå®ƒçš„ _uid å°±æ˜¯ 1ï¼Œä»¥æ­¤ç±»æ¨ï¼‰</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/20187da5d7464e00bf3c43cfa19a1681~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbHVja3lDb3Zlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768030013&amp;x-signature=3S2DBVmj%2FKKHENX7QpxlerSX%2FoU%3D" alt="image.png" loading="lazy"/></p>
<p>vm ä¸Šæ·»åŠ  <code>_isVue</code> å±æ€§ï¼Œå€¼è®¾ä¸º trueï¼Œè¿™ä¸ªå±æ€§ç”¨æ¥æ ‡è®°å½“å‰ vm æ˜¯ä¸€ä¸ª Vue çš„å®ä¾‹ï¼ˆä¹Ÿå°±æ˜¯é€šè¿‡ new Vue æ„é€ å‡ºæ¥çš„ï¼‰</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/db8c3987c8e945549c8a04268677015a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbHVja3lDb3Zlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768030013&amp;x-signature=Fj4aL92VPNa571onT2nbUC0vfiE%3D" alt="image.png" loading="lazy"/></p>
<p>åè¾¹è¿˜è®¾ç½®äº†å…¶ä»–çš„ä¸€äº›å±æ€§ï¼Œå’±ä»¬å…ˆä¸ç”¨ç®¡ï¼Œåè¾¹æœ‰å‡ºç°ä¼šæåˆ°çš„ã€‚</p>
<p>ç„¶åæˆ‘ä»¬æ¥çœ‹å…³é”®æ–¹æ³• <code>mergeOptions</code>ï¼Œä»åå­—ä¸Šæˆ‘ä»¬å°±å¯ä»¥çŸ¥é“å®ƒæ˜¯ç”¨äºåˆå¹¶é€‰é¡¹çš„ï¼Œè°ƒç”¨ mergeOptions å¹¶å°†è¿”å›ç»“æœèµ‹å€¼ç»™ vm.$options
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0a22776c09bd4030b18b61ee6992f71c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbHVja3lDb3Zlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768030013&amp;x-signature=OrjlVO9bJUE7WDwTcLpqHHCZ7t8%3D" alt="image.png" loading="lazy"/></p>
<p>æˆ‘ä»¬å…ˆæ¥åˆ†æå®ƒçš„ä¼ å‚ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è°ƒç”¨ resolveConstructorOptions å‡½æ•°çš„è¿”å›å€¼
é‚£ä¹ˆè°ƒç”¨ resolveConstructor å‡½æ•°ä¼ äº† vm.constructorï¼ˆå®ä¾‹å¯¹è±¡çš„ constructorï¼‰ï¼Œè¿™é‡Œé€šè¿‡åŸå‹ç›¸å…³çš„çŸ¥è¯†å¯ä»¥å¾—çŸ¥ï¼Œå®ä¾‹çš„ constructor æŒ‡å‘å®ä¾‹åŒ–å®ƒçš„æ„é€ å‡½æ•°ï¼Œé‚£è¿™é‡Œå°±æ˜¯ Vue æ„é€ å‡½æ•°äº†ï¼Œæ‰€ä»¥å°±æ˜¯ï¼š</p>
<pre><code class="hljs language-js" lang="js">vm.<span class="hljs-property">constructor</span> === <span class="hljs-title class_">Vue</span> <span class="hljs-comment">// true</span>
</code></pre>
<p>æˆ‘ä»¬æ¥çœ‹ä¸‹ resolveConstructor å‡½æ•°å†…éƒ¨é€»è¾‘ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/23c5117878354cc9b3072b2ae3f0c43e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbHVja3lDb3Zlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768030013&amp;x-signature=l994vD3mq%2BKxLLPfgK%2FiCVd5yoQ%3D" alt="image.png" loading="lazy"/></p>
<ul>
<li>æ¥æ”¶ä¸€ä¸ªå‚æ•° Ctorï¼Œæˆ‘ä»¬åˆšæ‰ä¼ äº† vm.constructorï¼ˆç›¸å½“äº Vue æ„é€ å‡½æ•°ï¼‰</li>
<li>å–å¾— options é€‰é¡¹</li>
<li>åˆ¤æ–­ Ctor.super æœ‰æ²¡æœ‰ï¼ˆsuper å…³é”®å­—ä¼šæŒ‡å‘å…¶çˆ¶ç±»çš„æ„é€ å‡½æ•°ï¼Œå³åˆ¤æ–­æœ‰æ— çˆ¶ç±»ï¼‰ï¼Œè¿™ä¸€èˆ¬åœ¨å­ç»„ä»¶é€šè¿‡ extend ç»§æ‰¿çˆ¶ç»„ä»¶æ—¶ä¼šå­˜åœ¨è¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬ç›®å‰æ²¡æœ‰çˆ¶å­ç»§æ‰¿å…³ç³»ï¼Œæ‰€ä»¥ä¸è¿›å…¥åˆ¤æ–­å†…éƒ¨</li>
<li>ç›´æ¥è¿”å› options</li>
</ul>
<p>mergeOptions çš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯ _init æ¥æ”¶çš„å‚æ•° optionsï¼Œä¹Ÿå°±æ˜¯ new Vue æ—¶ä¼ ç»™æ„é€ å‡½æ•°ä¸­çš„å¯¹è±¡ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯å½“å‰ç»„ä»¶å®ä¾‹ vmã€‚ä¼ ç»™ mergeOptions çš„ä¸‰ä¸ªå‚æ•°éƒ½åˆ†æå®Œåï¼Œæ¥çœ‹ä¸‹ mergeOptions å‡½æ•°</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dac197fd3be641cd8bc194ef0dda1277~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbHVja3lDb3Zlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768030013&amp;x-signature=Jq1DT0VX%2Fb5AMe6nIdatH2g875M%3D" alt="image.png" loading="lazy"/></p>
<p>é€šè¿‡å®˜æ–¹æ³¨é‡Šå¾—çŸ¥ï¼Œå°±æ˜¯å°†ä¸¤ä¸ªé€‰é¡¹åˆå¹¶æˆä¸€ä¸ªï¼Œparent å°±æ˜¯ Vue æ„é€ å‡½æ•°çš„é»˜è®¤ optionsï¼Œchild æ˜¯æˆ‘ä»¬ new Vue æ—¶ä¼ ç»™æ„é€ å‡½æ•°çš„ï¼Œvm å°±æ˜¯å½“å‰å®ä¾‹</p>
<ul>
<li>è°ƒç”¨ checkComponent</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/93d10b6f4c5b4b07812738fee25e0ac8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbHVja3lDb3Zlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768030013&amp;x-signature=KPdntXYry3OysP4%2FR%2F%2B0m17dowY%3D" alt="image.png" loading="lazy"/>
checkComponent ç”¨äºæ£€æµ‹ç»„ä»¶çš„åç§°ï¼Œå‰ææ˜¯ä¼ å…¥çš„ options ä¸Šçš„ components ä¸ä¸ºç©ºï¼Œæšä¸¾ options.components ä¸Šçš„ç»„ä»¶åï¼Œè°ƒç”¨ validateComponentName å‡½æ•°æ ¡éªŒ</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/23795421012345f1bea4139969f37984~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbHVja3lDb3Zlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768030013&amp;x-signature=uqgXCbf8mH1uUiTF2scKz8%2FO6C4%3D" alt="image.png" loading="lazy"/>
validateComponentName æ¥æ”¶å‚æ•° nameï¼ˆå³ç»„ä»¶åç§°ï¼‰ï¼Œé‡‡ç”¨æ­£åˆ™è¡¨è¾¾å¼æ ¡éªŒ name æ˜¯å¦ç¬¦åˆè¦æ±‚ï¼Œä¸ç¬¦åˆå°±è°ƒç”¨ warn å‡½æ•°ï¼Œæç¤ºé”™è¯¯ä¿¡æ¯ã€‚
é€šè¿‡æ­£åˆ™è¡¨è¾¾å¼æ ¡éªŒï¼Œä¸‹è¾¹è¿˜éœ€è¦æ ¡éªŒæ˜¯ä¸æ˜¯å’Œ Vue ä¸­ä¸€äº›å†…ç½®åç§°å†²çª
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/83f9d01445da4727b7f12fa3a866155a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbHVja3lDb3Zlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768030013&amp;x-signature=RMnVwpijCS9Vib5hXdV4k3rep60%3D" alt="image.png" loading="lazy"/>
è°ƒç”¨ isBuiltInTag å’Œ isReservedAttribute å‡½æ•°ç›¸å½“äºæ˜¯è°ƒç”¨äº† makeMap è¿”å›çš„å‡½æ•°ï¼Œæˆ‘ä»¬çœ‹çœ‹ makeMap å‡½æ•°</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8718beba31b54ede8b0d4c99c89b30bb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbHVja3lDb3Zlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768030013&amp;x-signature=PB%2BUIiI8yBku2Qo5tj1X5ybw08I%3D" alt="image.png" loading="lazy"/>
æ¥æ”¶ str å­—ç¬¦ä¸²å‚æ•°ï¼ŒexpectsLowerCase å¸ƒå°”å€¼æ˜¯å¦æœŸæœ›å°å†™ã€‚makeMap å‡½æ•°å†…éƒ¨é€»è¾‘ï¼š</p>
<ul>
<li>æ„å»ºä¸€ä¸ªç©º map</li>
<li>åˆ†å‰²ä¼ å…¥çš„ str æ”¾åˆ° list æ•°ç»„</li>
<li>éå†æ•°ç»„ï¼Œå°†æ•°ç»„ä¸­çš„å…ƒç´ æ”¾åˆ° map ä¸­ä½œä¸ºé”®ï¼Œå…¶å€¼é»˜è®¤ä¸º true</li>
<li>è¿”å›å€¼ï¼šå¦‚æœ expectsLowerCase ä¸º trueï¼Œè¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°æ¥å£ä¸€ä¸ª val å‚æ•°ï¼Œå°† val è½¬ä¸ºå°å†™åå» map ä¸­æ‰¾åˆ°è¿™ä¸ªé”®å¯¹åº”çš„å€¼ï¼Œå¦‚æœ expectsLowerCase ä¸º falseï¼Œè¿”å›ä¸€ä¸ªæ¥æ”¶ val å‚æ•°çš„å‡½æ•°ï¼Œå‡½æ•°ç›´æ¥è¿”å› map ä¸­ val è¿™ä¸ªé”®å¯¹åº”çš„å€¼ã€‚</li>
</ul>
<p>æ€»ç»“ï¼šisBuiltInTag å‡½æ•°å¯¹åº”çš„ makeMap è¿”å›çš„å‡½æ•°å†…éƒ¨çš„ map ä¸ºï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-attr">map</span>: {
    <span class="hljs-string">'slot'</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-string">'component'</span>: <span class="hljs-literal">true</span>
}
</code></pre>
<p>è¿™äº›æ˜¯ Vue ä¸­å†…ç½®çš„æ ‡ç­¾</p>
<p>isReservedAttribute å‡½æ•°å¯¹åº” makeMap å†…çš„ map ä¹Ÿæ˜¯ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-attr">map</span>: {
    <span class="hljs-string">'key'</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-string">'ref'</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-string">'slot'</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-string">'slot-scope'</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-string">'is'</span>: <span class="hljs-literal">true</span>
}
</code></pre>
<p>è¿™äº›æ˜¯ Vue ä¸­é¢„å®šä¹‰çš„å±æ€§</p>
<p>é»˜è®¤è°ƒç”¨ makeMap æ—¶ç¬¬äºŒä¸ªå‚æ•°æ˜¯ trueï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬ç»„ä»¶åç§°ä¼ è¿›å»ä¼šå…ˆè½¬ä¸ºå°å†™ï¼Œç„¶åå†å» map ä¸­åŒ¹é…ï¼Œè¯´ç™½äº†ï¼Œæˆ‘ä»¬å†™çš„ç»„ä»¶åç§°ä¸­ä¸ç®¡å¤§å°å†™ï¼Œç»Ÿä¸€è½¬ä¸ºå°å†™ååŒ¹é…ä¸Šè¾¹çš„ mapï¼Œåªè¦åŒ¹é…ä¸Šé”®ï¼ˆå±æ€§åï¼‰ï¼Œå®ƒä»¬çš„å€¼åˆšå¥½æ˜¯ trueï¼Œé‚£å°±è¿›å…¥åˆ¤æ–­æŠ›å‡ºé”™è¯¯æç¤ºä¿¡æ¯ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3169e91f7c6b4e05bf2c835815366b3b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbHVja3lDb3Zlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768030013&amp;x-signature=PQnqFs0I7OXQV3XNhVQq12aPJx4%3D" alt="image.png" loading="lazy"/></p>
<ul>
<li>
<p>æ ¡éªŒå®Œç»„ä»¶ååï¼Œæ¥ç€è°ƒç”¨ normalizeProps è§„èŒƒåŒ– props
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9ef3a3655b154e5daeb619354b9277f6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbHVja3lDb3Zlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768030013&amp;x-signature=pbD%2BVZi2D2jLIyQw2WMcyoxveXQ%3D" alt="image.png" loading="lazy"/>
æ¥æ”¶ options é€‰é¡¹ä»¥åŠ vm å®ä¾‹å¯¹è±¡</p>
<ul>
<li>
<p>è·å– options ä¸Šçš„ propsï¼Œä¸ºç©ºç›´æ¥è¿”å›</p>
</li>
<li>
<p>æƒ…å†µä¸€ï¼šprops å¦‚æœæ˜¯æ•°ç»„å½¢å¼</p>
</li>
</ul>
</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ea70bddbe9434a62852603f8f67d4c61~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbHVja3lDb3Zlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768030013&amp;x-signature=F%2Ff3c%2F74J7zo7Lr%2FmQWrxluPGJo%3D" alt="image.png" loading="lazy"/></p>
<p>éå†æ•°ç»„å…ƒç´ ï¼Œè¿›è¡Œç±»å‹åˆ¤æ–­ï¼Œæ•°ç»„ä¸­çš„å…ƒç´ å¿…é¡»æ˜¯å­—ç¬¦ä¸²ç±»å‹ï¼Œå¦åˆ™æŠ›å‡ºé”™è¯¯ä¿¡æ¯ï¼Œéšåè°ƒç”¨ camelize å°†å…ƒç´  val ä¼ è¿›å»åšå¤„ç†ï¼Œcamelize å°±æ˜¯å°†ä¼ å…¥çš„å­—ç¬¦ä¸²è½¬ä¸ºé©¼å³°å‘½åçš„å½¢å¼å¹¶è¿”å›
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e9854a1823054fde93ed673443ba18a4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbHVja3lDb3Zlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768030013&amp;x-signature=Ab%2FEgNrWKkBNMY8HUvt0JFUik0o%3D" alt="image.png" loading="lazy"/>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/078435c479ce4ca78171c4f439b7a48c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbHVja3lDb3Zlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768030013&amp;x-signature=aZZzNPwAZS6uBeJOSHRbT4M2NdE%3D" alt="image.png" loading="lazy"/>
camelizeRE æ˜¯è¦åŒ¹é…çš„æ­£åˆ™è¡¨è¾¾å¼ï¼Œæ‹¬å·å†…æ˜¯æ•è·ç»„ï¼Œ(\W) å°±æ˜¯æ•è·ä¸€ä¸ªè‹±æ–‡å•è¯ï¼Œå¯¹ä¼ å…¥çš„å­—ç¬¦ä¸²ä½¿ç”¨ replace æ–¹æ³•ï¼Œå°±æ˜¯å°†æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…çš„éƒ¨åˆ†æ›¿æ¢ä¸ºç¬¬äºŒä¸ªå‚æ•°æŒ‡å®šçš„éƒ¨åˆ†ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œå‡è®¾æˆ‘ä»¬ä¼ å…¥çš„ str å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-js" lang="js">my-component
</code></pre>
<p>é‚£ä¹ˆ camelizeRE æ­£åˆ™åŒ¹é…åˆ°çš„å°±æ˜¯ <code>-c</code>ï¼Œæ•è·ç»„æ•è·åˆ°çš„å°±æ˜¯ <code>c</code>ï¼Œreplace ç¬¬äºŒä¸ªå‚æ•°æ˜¯å›è°ƒï¼Œå›è°ƒç¬¬ä¸€ä¸ªå‚æ•°æ˜¯åŒ¹é…åˆ°çš„å®Œæ•´å­—ç¬¦ä¸²ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯æ•è·åˆ°çš„å­—ç¬¦ï¼Œè¿™é‡Œæ˜¯å°å†™ <code>c</code>ï¼Œå°†å…¶è½¬ä¸ºå¤§å†™ï¼ˆè°ƒç”¨ toUpperCase()ï¼‰ï¼Œé‚£è¿™é‡Œå°±æ˜¯å°†æ­£åˆ™åŒ¹é…åˆ°çš„ <code>-c</code>ï¼Œæ›¿æ¢æˆå¤§å†™ <code>C</code>ï¼Œæ›¿æ¢åçš„å­—ç¬¦å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-js" lang="js">myComponent
</code></pre>
<p>è¿™ä¸ª name å°±æ˜¯é©¼å³°å¼çš„äº†ï¼Œç„¶åæ”¾åˆ° res å¯¹è±¡ä¸­ä½œä¸ºå±æ€§ï¼Œå€¼æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå¯¹è±¡ä¸­é»˜è®¤æœ‰ä¸€ä¸ª type: null çš„å±æ€§ï¼Œæ”¾åˆ° res ä¸­å°±æ˜¯</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-attr">res</span>: {
    <span class="hljs-string">'xxx'</span>: {
        <span class="hljs-attr">type</span>: <span class="hljs-literal">null</span>
    }
}
</code></pre>
<ul>
<li>æƒ…å†µäºŒï¼šprops æ˜¯å¯¹è±¡å½¢å¼
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/941bbb56cb83494d8b039c6524166e59~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbHVja3lDb3Zlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768030013&amp;x-signature=RLJ5eiEzFvjqsQWaAQG89cFJGdE%3D" alt="image.png" loading="lazy"/>
å¯¹è±¡å¤„ç†ä¹Ÿå¾ˆç®€å•ï¼Œæšä¸¾å¯¹è±¡ä¸Šçš„å±æ€§ï¼Œæ‹¿åˆ°å±æ€§å€¼ valï¼ŒåŒæ ·å¯¹å±æ€§åè¿›è¡Œå¤„ç†ï¼Œè½¬ä¸ºé©¼å³°å‘½åå½¢å¼ï¼Œæ¥ç€å¾€ res ä¸Šæ”¾è¿™ä¸ªå±æ€§ï¼Œå¦‚æœ val æœ¬èº«æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œé‚£å°±ç›´æ¥å°†è¿™ä¸ªå¯¹è±¡ä½œä¸ºå±æ€§å€¼ï¼Œåä¹‹å°±å°† type æ”¾åˆ°ä¸€ä¸ªå¯¹è±¡ä¸­ï¼Œå±æ€§å€¼è®¾ä¸ºè¿™ä¸ª valã€‚åˆ†åˆ«å¯¹åº”ä¸‹è¾¹ä¸¤ç§æƒ…å†µ</li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-attr">props</span>: {
    <span class="hljs-attr">name</span>: <span class="hljs-title class_">String</span>,
    <span class="hljs-attr">age</span>: {
        <span class="hljs-attr">type</span>: <span class="hljs-title class_">Number</span>
    }
}
</code></pre>
<p>name å±æ€§å€¼ä¸æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå°† name å±æ€§å€¼ï¼ˆStringï¼‰ä½œä¸ºæ–°å¯¹è±¡ä¸­ type çš„å±æ€§å€¼ï¼Œæ”¾åˆ° res ä¸­å°±æ˜¯</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-attr">res</span>: {
    <span class="hljs-attr">name</span>: {
        <span class="hljs-attr">type</span>: <span class="hljs-title class_">String</span>
    }
}
</code></pre>
<p>age å±æ€§å€¼æœ¬èº«æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæ”¾åˆ° res ä¸­æ˜¯</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-attr">res</span>: {
    <span class="hljs-attr">age</span>: {
        <span class="hljs-attr">type</span>: <span class="hljs-title class_">Number</span>
    }
}
</code></pre>
<ul>
<li>
<p>props ä¸æ˜¯æ•°ç»„ä¹Ÿä¸æ˜¯å¯¹è±¡
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0dd2da1fcd6d4803a0236eb1f5fa3715~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbHVja3lDb3Zlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768030013&amp;x-signature=93tM1U4OHJxkhHChxjJAabWIoGE%3D" alt="image.png" loading="lazy"/>
æŠ›å‡ºé”™è¯¯ä¿¡æ¯ï¼Œæç¤º props å¿…é¡»æ˜¯ä¸€ä¸ªæ•°ç»„æˆ–å¯¹è±¡</p>
</li>
<li>
<p>å¤„ç†å¥½çš„ res è¦†ç›– options.props</p>
</li>
</ul>
<p>å¯ä»¥çœ‹åˆ°ä¸Šè¾¹å°±æ˜¯å¯¹ç”¨æˆ·ä¼ çš„ props è¿›è¡Œå½’ä¸€åŒ–ï¼Œæ‰€è°“å½’ä¸€åŒ–å°±æ˜¯å°†ä¸åŒçš„å½¢å¼è½¬ä¸ºç›¸åŒçš„å½¢å¼ï¼Œä¸Šè¾¹å½’ä¸€åŒ–åçš„å½¢å¼å°±æ˜¯ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-attr">props</span>: {
    <span class="hljs-attr">key1</span>: {
        <span class="hljs-attr">type</span>: <span class="hljs-title class_">String</span>
    },
    <span class="hljs-attr">key2</span>: {
        <span class="hljs-attr">type</span>: <span class="hljs-title class_">Number</span>
    },
    <span class="hljs-attr">key3</span>: {
        <span class="hljs-attr">type</span>: <span class="hljs-literal">null</span>
    }
}
</code></pre>
<ul>
<li>è°ƒç”¨ normalizeInject è§„èŒƒåŒ– inject</li>
</ul>
<p>normalizeInject å†…éƒ¨å¤„ç†é€»è¾‘å’Œ normalizeProps å¾ˆç›¸ä¼¼ï¼Œéƒ½æ˜¯åˆ†ä¸ºæ•°ç»„å’Œå¯¹è±¡ä¸¤ç§æƒ…å†µå¤„ç†ï¼Œå¦‚æœä¸¤è€…éƒ½ä¸æ˜¯å°±æŠ›å‡ºé”™è¯¯ä¿¡æ¯ã€‚åªæ˜¯ props ä¸­æ˜¯å¤„ç† typeï¼Œinjects æ˜¯ fromã€‚è¿™é‡Œå¯¹è±¡çš„å¤„ç†ä¸­ï¼Œå¦‚æœæšä¸¾çš„å±æ€§å…¶å±æ€§å€¼æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œä¼šè°ƒç”¨ extend è¿›è¡Œå¤„ç†ï¼Œä¼ å…¥ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæœ‰ from å±æ€§ï¼Œå±æ€§å€¼æ˜¯è¿™ä¸ªæšä¸¾å±æ€§ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯æšä¸¾å±æ€§å¯¹åº”çš„å€¼ï¼Œè¿™ä¸ªå€¼æ˜¯ä¸ªå¯¹è±¡ï¼Œçœ‹çœ‹ extend å‡½æ•°ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/51c90db2168d4db9b3939718f18ea8e3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbHVja3lDb3Zlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768030013&amp;x-signature=ZIM9Hflgc32%2BsFE%2FctSC3Y%2BeeBc%3D" alt="image.png" loading="lazy"/></p>
<p>å°±æ˜¯å¾€ç¬¬ä¸€ä¸ªå‚æ•°ä¹Ÿå°±æ˜¯ç›®æ ‡å¯¹è±¡ä¸Šæ··å…¥å±æ€§ï¼Œæšä¸¾ç¬¬äºŒä¸ªå‚æ•°ä¼ å…¥çš„ val å¯¹è±¡ï¼Œå¾€ç¬¬ä¸€ä¸ªå‚æ•°ï¼ˆ{from: key}ï¼‰æ··å…¥ç¬¬äºŒä¸ªå‚æ•°ä¸­çš„å±æ€§ï¼ˆå¦‚æœç¬¬äºŒä¸ªå‚æ•° val å¯¹è±¡ä¸Šä¹Ÿå­˜åœ¨ from å±æ€§ï¼Œåˆ™ val å¯¹è±¡ä¸Šçš„ from å±æ€§å€¼è¦†ç›–æºå¯¹è±¡ä¸Šçš„ from å±æ€§å€¼ï¼Œæ··å…¥åï¼Œæºå¯¹è±¡ä¸Šå°±ä¸ä»…åªæœ‰ from å±æ€§äº†ï¼Œè¿˜å¯èƒ½æœ‰å…¶ä»–çš„ä¸€äº›å±æ€§ï¼‰ã€‚</p>
<p>æœ€åå½’ä¸€åŒ–åçš„æ ¼å¼å°±æ˜¯ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-attr">injects</span>: {
    <span class="hljs-attr">key1</span>: {
        <span class="hljs-attr">from</span>: xxx,
        ..., <span class="hljs-comment">// å…¶ä»–ä¸€äº›å±æ€§</span>
    }
}
</code></pre>
<ul>
<li>
<p>è°ƒç”¨ normalizeDirectives è§„èŒƒåŒ– directives
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/540a24d1e43a4b0f9de5f8426fe31be2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbHVja3lDb3Zlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768030013&amp;x-signature=9VT60FOhEw%2BQju97r40nV4zBpTw%3D" alt="image.png" loading="lazy"/></p>
<ul>
<li>è·å– directives é€‰é¡¹</li>
<li>æšä¸¾é€‰é¡¹ä¸Šçš„å±æ€§ï¼Œè·å–å±æ€§å€¼</li>
<li>åˆ¤æ–­å±æ€§å€¼æ˜¯ä¸æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œæ˜¯çš„è¯å°±å°†é€‰é¡¹ä¸Šå½“å‰å±æ€§çš„å±æ€§å€¼é‡æ–°èµ‹å€¼ä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œå¯¹è±¡ä¸Šçš„ bind å’Œ update å±æ€§ä¸ºè¿™ä¸ªæºå‡½æ•°</li>
</ul>
</li>
<li>
<p>æšä¸¾ parentï¼ˆVue æ„é€ å‡½æ•°çš„ options é€‰é¡¹ï¼‰ï¼Œè°ƒç”¨ mergeField å°†å±æ€§ä½œä¸ºå®å‚ä¼ å…¥</p>
</li>
<li>
<p>æšä¸¾ childï¼ˆç”¨æˆ·ä¼ å…¥çš„ options é€‰é¡¹ï¼‰ï¼Œå¦‚æœå±æ€§åœ¨ parentï¼ˆVue æ„é€ å‡½æ•°ä¸­çš„ optionsï¼‰ä¸­ä¸å­˜åœ¨ï¼Œè°ƒç”¨ mergeField å‡½æ•°ï¼Œå°† key å±æ€§ä½œä¸ºå®å‚ä¼ å…¥</p>
</li>
</ul>
<p>æ¥ç€çœ‹çœ‹è¿™ä¸ªæ ¸å¿ƒçš„ mergeField å‡½æ•°
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d7e4431a35444602a46b279fa9d081a4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbHVja3lDb3Zlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768030013&amp;x-signature=zd3KjHHqze2iWi%2F0zDqEtZwB3Dw%3D" alt="image.png" loading="lazy"/></p>
<p>strat æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œä¼šå…ˆä» strats ä¸­å–ï¼Œstrats åœ¨æ–‡ä»¶é¡¶éƒ¨å£°æ˜</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9adcd1abd99048f483fc3a99900e19cd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbHVja3lDb3Zlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768030013&amp;x-signature=aqFo0V0wAlk0S4%2FHVbLB%2Fjx0Clk%3D" alt="image.png" loading="lazy"/></p>
<p>é»˜è®¤å€¼ä¸º config.optionMergeStrategiesï¼Œ è¿™ä¸ª config åœ¨ï¼ˆ<code>src/core/config.ts</code>ï¼‰æ–‡ä»¶ä¸­ï¼Œé»˜è®¤æ˜¯ä¸ªç©ºå¯¹è±¡</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2408d93f401e44b8bbdaf909e0756807~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbHVja3lDb3Zlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768030013&amp;x-signature=NeE34TXcrw%2FD9jsYJo4r40CwC%2Bg%3D" alt="image.png" loading="lazy"/></p>
<p>ä»ä¸Šè¾¹çš„æ¥å£ç±»å‹å£°æ˜æ¥çœ‹ï¼Œè¿™ä¸ªå¯¹è±¡ä¸Šçš„å±æ€§æ˜¯å­—ç¬¦ä¸²ç±»å‹ï¼Œå±æ€§å€¼æ˜¯ä¸ªå‡½æ•°</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/994c19bdf21e4a9f9334884e0ab23dfd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbHVja3lDb3Zlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768030013&amp;x-signature=m65dvvvyNVcQ2YoO4oAuDx2PyNM%3D" alt="image.png" loading="lazy"/></p>
<p>é‚£ä¹ˆå¦‚æœ strats ä¸Šæ²¡æœ‰è¿™ä¸ªå±æ€§å¯¹åº”å€¼ï¼Œå°±ä¼šä½¿ç”¨é»˜è®¤çš„ç­–ç•¥ defaultStrat</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2fab5287e5c14c28b4dee8dc76495f7c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbHVja3lDb3Zlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768030013&amp;x-signature=PYppVubbFPlQ26VxtX9gEEm2IIQ%3D" alt="image.png" loading="lazy"/>
é»˜è®¤ç­–ç•¥æ¥æ”¶çˆ¶å±æ€§å€¼å’Œå­å±æ€§å€¼ä½œä¸ºå‚æ•°ï¼Œå¦‚æœå­å±æ€§å€¼ä¸ä¸º undefined çš„è¯ä¼˜å…ˆè¿”å›å®ƒï¼Œå¦åˆ™å†å–çˆ¶å±æ€§å€¼ï¼Œè¿™ä¸ªè¿”å›å€¼å°±ä½œä¸ºæœ€ååˆå¹¶å¥½çš„ options ä¸Šè¯¥å±æ€§å¯¹åº”çš„å€¼ã€‚</p>
<p>é‚£ä¹ˆä¸Šè¾¹å…ˆæšä¸¾ Vue æ„é€ å‡½æ•°çš„ options ä¸Šçš„å±æ€§ï¼Œå¦‚æœç”¨æˆ·ä¼ çš„ options ä¹Ÿå­˜åœ¨è¯¥å±æ€§ï¼Œä¼˜å…ˆä½¿ç”¨ç”¨æˆ·ä¼ çš„ï¼Œè¿™æ ·åè¾¹æšä¸¾ç”¨æˆ·ä¼ çš„ options æ—¶å°±ä»…éœ€è¦å¤„ç† Vue æ„é€ å‡½æ•° options ä¸Šæ²¡æœ‰çš„å±æ€§äº†ã€‚</p>
<ul>
<li>æœ€åè¿”å›åˆå¹¶å¥½çš„ç»ˆæ options</li>
</ul>
<p>è‡³æ­¤ï¼ŒmergeOptions å‡½æ•°å°±åˆ†æå®Œäº†ï¼Œä¸»è¦æµç¨‹å°±æ˜¯<code>ç»„ä»¶åæ ¡éªŒ</code>ã€<code>å½’ä¸€åŒ– props</code>ã€<code>injects</code>ã€<code>directives</code>ï¼Œç„¶åå°† Vue æ„é€ å‡½æ•°åŠç”¨æˆ·çš„ <code>options è¿›è¡Œä¸€ä¸ªåˆå¹¶</code>ï¼Œæœ€åè¿”å›ã€‚</p>
<p>ç»§ç»­å¾€ä¸‹çœ‹ï¼š
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d02aaa2d904746c1b4b84dbacd9777bf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbHVja3lDb3Zlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768030013&amp;x-signature=t%2B24oFRwn9aytpcirEOs1P7q3go%3D" alt="image.png" loading="lazy"/></p>
<ul>
<li>initProxy
æ‰€åœ¨æ–‡ä»¶ï¼ˆsrc/core/instance/proxy.tsï¼‰ï¼Œåœ¨æ–‡ä»¶é¡¶éƒ¨å£°æ˜äº†ä¸€ä¸ª initProxy å˜é‡ï¼Œç„¶åèµ‹å€¼ä¸ºä¸€ä¸ªå‡½æ•°ï¼š
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/804bdc2dc6864f3295fcb2b857b1cfc5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbHVja3lDb3Zlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768030013&amp;x-signature=jsUhZP2f%2Fhc1a5ykbqIenX8EzH8%3D" alt="image.png" loading="lazy"/>
æ¥æ”¶ vm å®ä¾‹ä½œä¸ºå‚æ•°ï¼Œé¦–å…ˆåˆ¤æ–­ hasProxy å€¼ï¼ŒhasProxy åˆ¤æ–­æµè§ˆå™¨æ˜¯å¦æ”¯æŒ Proxy è¿™ä¸ª APIï¼Œå³ä¸ä¸º undefinedï¼Œä¸”è°ƒç”¨ isNative è¦è¿”å› trueï¼ŒisNative ä¼šåˆ¤æ–­ä¼ å…¥å‚æ•°æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œä¸”æ˜¯ JavaScript å†…ç½®çš„å‡½æ•°ï¼ˆå†…ç½®å‡½æ•°è°ƒç”¨ toString æ–¹æ³•ä¼šè¿”å›åŒ…å« [native code] çš„å­—ç¬¦ä¸²ï¼‰
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7f53b344d4774de6a023e6e90331e31d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbHVja3lDb3Zlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768030013&amp;x-signature=mXUdPpk%2BND5qwW8LaOgtPHaVk8s%3D" alt="image.png" loading="lazy"/>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dbd0297103c1494da56fba387d50e403~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbHVja3lDb3Zlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768030013&amp;x-signature=MH8COudt2ghA8JbDX62VAfwVrHc%3D" alt="image.png" loading="lazy"/></li>
</ul>
<p>è¿›å…¥åˆ¤æ–­åå…ˆè·å– vm ä¸Šçš„ optionsï¼Œç„¶åå®šä¹‰ handlers é…ç½®é¡¹ï¼Œç„¶ååˆ›å»ºä¸€ä¸ªä»£ç†å®ä¾‹èµ‹å€¼ç»™ vm ä¸Šçš„ _renderProxy å±æ€§ï¼Œå¦‚æœ hasProxy ä¸º falseï¼Œ _renderProxy å±æ€§å°±èµ‹å€¼ä¸º vm å®ä¾‹æœ¬èº«ï¼Œæ¥ç€æˆ‘ä»¬çœ‹ä¸‹ä»£ç†é…ç½®é¡¹ handlers å–å€¼ï¼Œæœ‰ getHandler å’Œ hasHandler ä¸¤ç§ï¼š</p>
<p>getHandler ä¸­å®šä¹‰äº†ä¸€ä¸ª get å‡½æ•°ï¼Œå‚æ•°æ˜¯ targetï¼ˆè¿™é‡Œæ˜¯ vm å®ä¾‹ï¼‰ å’Œ keyï¼ˆå±æ€§ï¼‰
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d667f450fc544286a3ce8768942b7c1b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbHVja3lDb3Zlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768030013&amp;x-signature=ayywi7RA%2BXCec%2Bwzg8CVUmjRXWM%3D" alt="image.png" loading="lazy"/></p>
<p>ä¹Ÿå°±æ˜¯æˆ‘ä»¬è¯»å– vm ä¸Šçš„æŸä¸ªå±æ€§æ—¶ï¼Œä¼šè§¦å‘ get å‡½æ•°æ‹¦æˆªï¼Œé¦–å…ˆåˆ¤æ–­è¿™ä¸ª key å±æ€§æ˜¯å­—ç¬¦ä¸²ä¸”ä¸åœ¨ targetï¼ˆvm å®ä¾‹ï¼‰ä¸Šï¼Œæ¥ç€ç»§ç»­åˆ¤æ–­ key å±æ€§åœ¨ä¸åœ¨ vm å®ä¾‹çš„ <code>$data</code>ï¼ˆä¹Ÿå°±æ˜¯æˆ‘ä»¬ç»„ä»¶ä¸­å†™çš„ data å¯¹è±¡é‡Œï¼‰ä¸Šï¼Œå¦‚æœåœ¨å°±è°ƒç”¨ <code>warnReservedPrefix</code> å‡½æ•°æŠ›å‡ºé”™è¯¯æç¤ºï¼Œå¦‚æœä¸åœ¨ vm å®ä¾‹ä¸Šä¹Ÿä¸åœ¨ <code>vm.$data</code> å±æ€§ä¸Šï¼Œè°ƒç”¨ <code>warnNonPresent</code> å‡½æ•°æŠ›å‡ºå¦ä¸€ä¸ªé”™è¯¯ä¿¡æ¯</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7da367e64574444ba6b7300756fe87d4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbHVja3lDb3Zlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768030013&amp;x-signature=xJSvMSRK3w0qH8%2BnAUJlweSdNmw%3D" alt="image.png" loading="lazy"/>
å› ä¸ºå±æ€§ key å®ƒä¸åœ¨ vm ä¸Šï¼Œä½†åœ¨ <code>vm.$data</code> ä¸Šï¼Œæ‰€ä»¥è¿™é‡Œæç¤ºä¿¡æ¯æ„æ€å°±æ˜¯è¿™ä¸ª key å±æ€§å¿…é¡»è®¿é—® <code>$data.key</code> ä¸Šçš„</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/93e644517cbf498793e8a9ae3e50b228~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbHVja3lDb3Zlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768030013&amp;x-signature=P2LeKQliJYNJAuUAF4yVp4%2FbQlI%3D" alt="image.png" loading="lazy"/>
è¿™ç§æƒ…å†µå°±æ˜¯ key å±æ€§å³ä¸åœ¨ vm ä¸Šä¹Ÿä¸åœ¨ <code>vm.$data</code> ä¸Šï¼ŒæŠ›å‡ºé”™è¯¯ä¿¡æ¯è¡¨ç¤ºå±æ€§æˆ–æ–¹æ³•åœ¨å®ä¾‹ä¸Šæœªå®šä¹‰ä½†æ˜¯å­˜åœ¨å¼•ç”¨</p>
<p>å†çœ‹ä¸‹ hasHandler å‡½æ•°çš„ has å‡½æ•°ï¼Œhas ä»£ç†æ–¹æ³•æ˜¯é’ˆå¯¹ in æ“ä½œç¬¦çš„ï¼Œæ¯”å¦‚æˆ‘ä»¬è¿™é‡Œåˆ¤æ–­ä¸€ä¸ªå±æ€§:</p>
<pre><code class="hljs language-js" lang="js">name <span class="hljs-keyword">in</span> obj
</code></pre>
<p>è¿™å°±ä¼šè§¦å‘ä»£ç†å¯¹è±¡ obj çš„ has æ‹¦æˆªæ–¹æ³•ï¼ŒåŒç†ä¸Šè¾¹ä»£ç†å¯¹è±¡æ˜¯ vmï¼Œä½¿ç”¨ in æ“ä½œç¬¦åˆ¤æ–­æŸä¸ªå±æ€§æ˜¯å¦åœ¨ vm ä¸Šæ—¶å°±ä¼šè§¦å‘ has å‡½æ•°æ‹¦æˆªã€‚
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/11062bbabdda4eb281db5e7e19d78a68~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbHVja3lDb3Zlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768030013&amp;x-signature=GKjoWL%2BEZbmK1E6OW6dWxmCT59g%3D" alt="image.png" loading="lazy"/>
has å¸¸é‡å–å€¼å–å†³äº key å±æ€§åœ¨ä¸åœ¨ targetï¼ˆvmï¼‰ä¸Š</p>
<p>isAllowed å¸¸é‡å–å€¼æ»¡è¶³ä»¥ä¸‹å…¶ä¸­ä¸€ç§å°±æ˜¯ trueï¼Œéƒ½ä¸æ»¡è¶³å°±ä¸º falseï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-title function_">allowedGlobals</span>(key) ||
<span class="hljs-keyword">typeof</span> key === <span class="hljs-string">'string'</span> &amp;&amp;
          key.<span class="hljs-title function_">charAt</span>(<span class="hljs-number">0</span>) === <span class="hljs-string">'_'</span> &amp;&amp;
          !(key <span class="hljs-keyword">in</span> target.<span class="hljs-property">$data</span>)
</code></pre>
<p>allowGlobals å‡½æ•°ä¹Ÿå¾ˆç®€å•ï¼Œæœ‰æˆ‘ä»¬ç†Ÿæ‚‰çš„ makeMap å‡½æ•°ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ä¼ ï¼Œå°±æ˜¯å†…éƒ¨åŒ¹é…åç§°æ—¶ä¸ä¼šè½¬ä¸ºå°å†™å»åŒ¹é…ï¼Œå†…éƒ¨ map çš„ç»„æˆç”±æ¯ä¸ªé€—å·åˆ†å‰²çš„å…³é”®å­—ä½œä¸ºå±æ€§ï¼Œå…¶å±æ€§å€¼é»˜è®¤ä¸º trueï¼Œè°ƒç”¨è¿™ä¸ªå‡½æ•°æ—¶ï¼Œå¦‚æœå½“å‰ key å’Œ map ä¸­æŸä¸ªå±æ€§åç§°åŒ¹é…ï¼Œé‚£ä¹ˆå–å€¼å°±æ˜¯ true
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b5cd3c1421014925810fc7a583de595f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbHVja3lDb3Zlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768030013&amp;x-signature=Xa97j9egUoVzoAZRBg9zL1PlB9M%3D" alt="image.png" loading="lazy"/>
ä¸‹é¢å°±æ˜¯åˆ¤æ–­ has å–å€¼ä¸º falseï¼ˆå³å±æ€§ä¸åœ¨ vm ä¸Šï¼‰ ä¸” isAllowed ä¹Ÿä¸º falseï¼Œå†…éƒ¨é€»è¾‘å’Œ getHandler ä¸­çš„ get å‡½æ•°ç›¸ä¼¼ã€‚æœ€åè¿”å› has || !isAllowed é€»è¾‘æˆ–çš„å–å€¼ã€‚
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1171414bcd804169aa188e42a0f4f91f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbHVja3lDb3Zlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768030013&amp;x-signature=xYn49vWH58zs80C7G3jMUykks4M%3D" alt="image.png" loading="lazy"/></p>
<p>åœ¨ initLifecycle è°ƒç”¨å‰ï¼Œè¿˜æœ‰ä¸€å¥èµ‹å€¼è¯­å¥ï¼Œå°†è‡ªèº«å¼•ç”¨ä¿æŒåœ¨äº†è‡ªèº«çš„ _self å±æ€§ä¸Š
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6cc9bec014c84dbca95551e046e1566a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbHVja3lDb3Zlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768030013&amp;x-signature=3Ec9Wo3ixMM6ae6ucWjbcEXTAe8%3D" alt="image.png" loading="lazy"/></p>
<ul>
<li>initLifecycle</li>
</ul>
<p>initLifecycle çš„åˆå§‹åŒ–ï¼Œå°±æ˜¯å¾€ vm å®ä¾‹ä¸Šæ·»åŠ ä¸€äº›å±æ€§ï¼Œå¹¶èµ‹äºˆé»˜è®¤å€¼ï¼Œæ¯”å¦‚æˆ‘ä»¬ç†Ÿæ‚‰ä¸”å¸¸ç”¨çš„ <code>$refs</code>ã€<code>$parent</code>ã€<code>$root</code>ã€<code>$children</code> å¯¹è±¡ï¼Œ
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7abc37a1a1e045cb929d68041f1f8bb2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbHVja3lDb3Zlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768030013&amp;x-signature=13ZGn3ynujGoDl%2FkBLYab9yBAUI%3D" alt="image.png" loading="lazy"/></p>
<ul>
<li>initEvents
äº‹ä»¶åˆå§‹åŒ–</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4af7275427ac47df8c4877b542b0bbf4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbHVja3lDb3Zlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768030013&amp;x-signature=HWIjuvx%2B8AUZy33QbtTretDOUVs%3D" alt="image.png" loading="lazy"/></p>
<p>æ ¸å¿ƒå°±æ˜¯ updateComponentListeners æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•å†…éƒ¨åˆè°ƒç”¨äº† updateListeners æ–¹æ³•</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9fd22bb446724c41a2ed626d0e80746f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbHVja3lDb3Zlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768030013&amp;x-signature=g4W6kuXqgpCjuqDEADLEdNBVDLs%3D" alt="image.png" loading="lazy"/></p>
<p>updateListeners æ–¹æ³•å†…éƒ¨å°±æ˜¯å¯¹æ–°è€äº‹ä»¶è¿›è¡Œå¤„ç†ï¼ˆæ›´æ–°äº‹ä»¶ on ç›‘å¬ï¼ŒåŒ…æ‹¬ add æ–°å¢äº‹ä»¶å’Œ remove ç§»é™¤äº‹ä»¶ï¼‰</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/34cea4c085b3494298ebce6949077a9a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbHVja3lDb3Zlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768030013&amp;x-signature=S5lg1SVqgyFk4CA6O5IqUlxO8eQ%3D" alt="image.png" loading="lazy"/></p>
<ul>
<li>initRender</li>
</ul>
<p>å†…éƒ¨å®šä¹‰äº† <code>$slots</code>ã€<code>$createElement</code>ã€<code>$attrs</code>ã€<code>$listeners</code></p>
<ul>
<li>beforeCreate</li>
</ul>
<p>è°ƒç”¨äº† <code>beforeCreate</code> ç”Ÿå‘½å‘¨æœŸé’©å­</p>
<ul>
<li>initInjections</li>
</ul>
<p>å¤„ç† injects ä¿¡æ¯ï¼Œå°† injects å¯¹è±¡ä¸­çš„æ¯ä¸ªå±æ€§è½¬ä¸ºå“åº”å¼çš„ï¼Œè¿™æ ·å°±èƒ½å’Œåœ¨ data ä¸­å£°æ˜çš„å±æ€§ä¸€æ ·ä½¿ç”¨äº†ï¼Œè¿™é‡Œçš„å…³é”®ç‚¹å°±æ˜¯ injects æ¯” data å’Œ props å…ˆåˆå§‹åŒ–ã€‚
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/331058e95c1d4312ad64db6c8a40876d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbHVja3lDb3Zlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768030013&amp;x-signature=Wc1GSfzOz9WzJSHdGJ%2B4hz1Apwg%3D" alt="image.png" loading="lazy"/></p>
<ul>
<li>initState</li>
</ul>
<p>åˆå§‹åŒ– propsã€setupï¼ˆvue3 è¯­æ³•ç³–ï¼‰ã€methodsã€dataã€computedã€watchï¼ˆè¿™è¾¹çš„åˆå§‹åŒ–é€»è¾‘ç•™åˆ°å“åº”å¼ç³»ç»Ÿç¯‡ç« å†æ¥åˆ†æï¼‰
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/aa78c6f3193c46498b2e484b0bdbc0bc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbHVja3lDb3Zlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768030013&amp;x-signature=FBNUWTWKIhlT3yM1Y33J08Li1w8%3D" alt="image.png" loading="lazy"/></p>
<ul>
<li>initProvide</li>
</ul>
<p>å¤„ç† provide ä¿¡æ¯ï¼Œå°† provide å¯¹è±¡å†…çš„æ¯ä¸ªå±æ€§è½¬ä¸ºå“åº”å¼ï¼Œprovide çš„åˆå§‹åŒ–åœ¨ dataã€methods åˆå§‹åŒ–ä¹‹å
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/90275fd3423f4f40851be2ab8e3b5ec7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbHVja3lDb3Zlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768030013&amp;x-signature=Jkf0eK4K%2FrBZBiu7oVPFlFASvnk%3D" alt="image.png" loading="lazy"/></p>
<ul>
<li>created</li>
</ul>
<p>è°ƒç”¨ created ç”Ÿå‘½å‘¨æœŸé’©å­</p>
<ul>
<li>$mount</li>
</ul>
<p>åˆ¤æ–­é€‰é¡¹ä¸­å¦‚æœæœ‰ el èŠ‚ç‚¹ï¼Œé‚£å°±ä½œä¸ºå®å‚ä¼ å…¥ vm.$mount å‡½æ•°ä¸­
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/47c35b6f81cd4fa6beb7808c41099428~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbHVja3lDb3Zlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768030013&amp;x-signature=rthd6KSeWOe9V6hlo%2F7NIaRnZrk%3D" alt="image.png" loading="lazy"/></p>
<p>è¿™é‡Œçš„ el å°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„æŒ‚è½½çš„æ ¹å®¹å™¨ app</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8de68d94a4d14b888caa395d621c6ae1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbHVja3lDb3Zlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768030013&amp;x-signature=8RH2M8ZcjCnyjB1QqHjRQE7tjkQ%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-1">stateMixin</h3>
<p>æ‰€åœ¨æ–‡ä»¶ï¼š<code>src/core/instance/state.ts</code>ï¼Œå†…éƒ¨é€»è¾‘ä¹Ÿå¾ˆç®€å•
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f4776e65dcdd4ec69cace1b15fc5ffdb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbHVja3lDb3Zlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768030013&amp;x-signature=LMbUBDxzy9eJCuN4C3wyndW0t4w%3D" alt="image.png" loading="lazy"/></p>
<ul>
<li>æ‹¦æˆª Vue åŸå‹ä¸Šçš„ <code>$data</code> å’Œ <code>$props</code></li>
<li>Vue åŸå‹ä¸Šæ·»åŠ  <code>$set</code> æ–¹æ³•</li>
<li>Vue åŸå‹ä¸Šæ·»åŠ  <code>$delete</code> æ–¹æ³•</li>
<li>Vue åŸå‹ä¸Šæ·»åŠ  <code>$watch</code> æ–¹æ³•</li>
</ul>
<p>çœ‹çœ‹æ˜¯æ€ä¹ˆæ‹¦æˆªçš„</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/20f09f9e392340f5882bbbf9e1d3e5d4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbHVja3lDb3Zlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768030013&amp;x-signature=6yDgyk%2FV3DP73%2FTVAtsClh9eAxQ%3D" alt="image.png" loading="lazy"/></p>
<p>è®¿é—® <code>Vue.prototype.$data</code> æ—¶å®é™…ä¸Šæ˜¯è¿™æ ·è®¿é—® <code>vm._data</code>ï¼ˆå½“å‰ vm å®ä¾‹ä¸Šçš„ _data å¯¹è±¡ï¼‰</p>
<p>è®¿é—® <code>Vue.prototype.$props</code> æ—¶å®é™…ä¸Šæ˜¯è¿™æ ·è®¿é—® <code>vm._props</code>ï¼ˆå½“å‰ vm å®ä¾‹ä¸Šçš„ _props å¯¹è±¡ï¼‰</p>
<p>å¦‚æœæ˜¯ä¿®æ”¹ <code>Vue.prototype.$data</code> æˆ–è€… <code>Vue.prototype.$props</code>ï¼Œä¼šèµ° set æ‹¦æˆªæ–¹æ³•æŠ›å‡ºé”™è¯¯ä¿¡æ¯</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b45b594a0c7343359757017d5bc1ca3f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbHVja3lDb3Zlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768030013&amp;x-signature=1iu1TZgeIdcTq2T%2F%2B%2BzizFdWsuo%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-2">eventsMixin</h3>
<p>eventsMixin å‡½æ•°æ¥æ”¶ Vue æ„é€ å‡½æ•°ä½œä¸ºå‚æ•°ï¼Œå¾€æ„é€ å‡½æ•°åŸå‹ä¸Šæ·»åŠ å››ä¸ªæ–¹æ³•ï¼š</p>
<ul>
<li><code>$on</code></li>
<li><code>$once</code></li>
<li><code>$off</code></li>
<li><code>$emit</code>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f5e4e6d61e4e47b8907b8dfaf002fa88~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbHVja3lDb3Zlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768030013&amp;x-signature=eXLwWjgAd%2FErdUAd6SULo4TDIR0%3D" alt="image.png" loading="lazy"/></li>
</ul>
<h3 data-id="heading-3">lifecycleMixin</h3>
<p>lifecycleMixin å‡½æ•°æ¥æ”¶ Vue æ„é€ å‡½æ•°ä½œä¸ºå‚æ•°ï¼Œå¾€ Vue åŸå‹æ·»åŠ ä¸‰ä¸ªæ–¹æ³•ï¼š</p>
<ul>
<li><code>_update</code></li>
<li><code>$forceUpdate</code></li>
<li><code>$destroy</code>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7ab0d62adf5c4f9aae41cd5070290317~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbHVja3lDb3Zlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768030013&amp;x-signature=KVIwi7BbM58JLKzY00ZmFXV%2FFkg%3D" alt="image.png" loading="lazy"/></li>
</ul>
<h3 data-id="heading-4">renderMixin</h3>
<p>renderMixin å‡½æ•°æ¥æ”¶ Vue æ„é€ å‡½æ•°ä½œä¸ºå‚æ•°ï¼Œå¾€ Vue åŸå‹æ·»åŠ ä¸¤ä¸ªæ–¹æ³•ï¼š</p>
<ul>
<li><code>$nextTick</code></li>
<li><code>_render</code></li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9eb10357ca304bf6839feaa96822fb9c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbHVja3lDb3Zlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768030013&amp;x-signature=XF52qsOckee80AuEP5WQzY95aw8%3D" alt="image.png" loading="lazy"/></p>
<p>è°ƒç”¨ installRenderHelpers å‡½æ•°æ—¶å°† Vue.prototype ä½œä¸ºå®å‚ä¼ å…¥
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ce2f6cb3e84a4be08caaf2cf26074cb6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbHVja3lDb3Zlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768030013&amp;x-signature=u6DWSz%2BEaQY2326L%2Faa6YbYAlWQ%3D" alt="image.png" loading="lazy"/></p>
<p>target å°±æ˜¯ Vue.prototypeï¼Œå¾€ Vue åŸå‹ä¸Šæ·»åŠ å„ç§ä»¥ <code>_</code> å¼€å¤´çš„æ–¹æ³•</p>
<h3 data-id="heading-5">initGlobalAPI</h3>
<p>æ¥æ”¶ Vue æ„é€ å‡½æ•°ä½œä¸ºå½¢å‚</p>
<p>å…ˆä»£ç† Vue ä¸Šçš„ config å±æ€§ï¼ˆæ˜¯ä¸ªå¯¹è±¡ï¼‰ï¼Œå±æ€§æè¿°ç¬¦é¡¹æ˜¯ configDefï¼Œæä¾› get å’Œ set å‡½æ•°ï¼Œå½“ä½ å°è¯•ä¿®æ”¹ Vue.config æ—¶ä¼šè¢« configDef çš„ set å‡½æ•°æ‹¦æˆªï¼ŒæŠ›å‡ºé”™è¯¯ä¿¡æ¯ï¼Œæ„æ€å°±æ˜¯ä¸èƒ½æ›¿æ¢ Vue.config å¯¹è±¡ã€‚å¦‚æœæ˜¯è¯»å– Vue.configï¼Œå°±è¢« configDef çš„ get å‡½æ•°æ‹¦æˆªï¼Œç›´æ¥è¿”å›äº† configï¼Œè¿™ä¸ª config æ˜¯ä¸ªå¯¹è±¡ï¼ˆæ‰€åœ¨æ–‡ä»¶ï¼š<code>core/config.ts</code>ï¼‰ä¸­ï¼Œå°±æ˜¯æš´éœ²äº†ä¸€å †å…¨å±€å±æ€§ï¼ˆæ¯”å¦‚ asyncã€devtools ç­‰ï¼‰
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/142c43d0b66d465188d500b948dc299f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbHVja3lDb3Zlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768030013&amp;x-signature=eczaE5ISgEh5oINu2VbCiMGScPk%3D" alt="image.png" loading="lazy"/></p>
<p>æ¥ç€å¾€ Vue.util å¯¹è±¡ä¸Šæ·»åŠ ä¸€äº›æ–¹æ³•
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d01dd050407941758f531a2841e8b2db~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbHVja3lDb3Zlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768030013&amp;x-signature=%2B%2FddFKRFYVnmIyzAe09fYncgeZc%3D" alt="image.png" loading="lazy"/>
Vue å®˜æ–¹ä¹Ÿæä¾›äº†æ³¨é‡Šï¼Œæ„æ€å°±æ˜¯è¿™äº›ä¸è¢«è®¤ä¸ºæ˜¯å…¬å…±çš„ APIï¼Œè™½ç„¶æš´éœ²å‡ºå»ä½ èƒ½ç”¨ï¼Œä½†æ˜¯ä¸å»ºè®®ç”¨ï¼Œå› ä¸ºè¿™å‡ ä¸ª API å…¶å®æ˜¯ Vue å†…éƒ¨è‡ªå·±åœ¨ç”¨çš„ã€‚</p>
<p>å†ä¸‹è¾¹å°±å¾€ Vue ä¸Šæ·»åŠ äº†å‡ ä¸ªæ–¹æ³•ï¼Œåœ¨ä¹‹åæ–‡ç« ä¼šè¯¦ç»†ä»‹ç»</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/41c3c5ed68584ad38a027c5721376fb3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbHVja3lDb3Zlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768030013&amp;x-signature=qgidkvYY6RRnaB5D4yZd2Jbi4ss%3D" alt="image.png" loading="lazy"/></p>
<p>ä¸‹è¾¹åˆå§‹åŒ– Vue.options ä¸ºä¸€ä¸ªç©ºå¯¹è±¡ï¼Œéå† ASSETS_TYPE æ•°ç»„ä¸­çš„å…ƒç´ ç„¶åè¿½åŠ åˆ° options ä¸Š
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e5940b7440924040a0be83f1fe4593b8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbHVja3lDb3Zlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768030013&amp;x-signature=lsoEkV0RfiA1ahfECYlBJUCtgoM%3D" alt="image.png" loading="lazy"/></p>
<p>ASSETS_TYPE æ‰€åœ¨æ–‡ä»¶ï¼ˆ<code>src/shared/constants.ts</code>ï¼‰
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/98e921e6a7854c909cb0f810b0b636d3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbHVja3lDb3Zlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768030013&amp;x-signature=RdHn38M7jOsT0N4UwuIuAAYPCo4%3D" alt="image.png" loading="lazy"/>
æ•°ç»„ä¸­æ¯ä¸ªå…ƒç´ å°±æ˜¯éå†æ—¶çš„ typeï¼Œæ˜¯å­—ç¬¦ä¸²ç±»å‹ï¼Œå¾€ type å¯¹åº”å…ƒç´ åç§°åè¾¹æ‹¼ä¸Š s åä½œä¸ºå±æ€§åï¼Œå±æ€§å€¼é»˜è®¤æ˜¯ç©ºå¯¹è±¡ï¼Œéå†è¿½åŠ å®Œå Vue.options ä¸Šå°±æœ‰å¦‚ä¸‹å±æ€§ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-title class_">Vue</span>.<span class="hljs-property">options</span> = {
    <span class="hljs-attr">components</span>: {},
    <span class="hljs-attr">directives</span>: {},
    <span class="hljs-attr">filters</span>: {}
}
</code></pre>
<p>æ¥ç€å¾€ Vue.options è¿½åŠ  _base å±æ€§ï¼Œå±æ€§å€¼æ˜¯ Vue æœ¬èº«
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a87b4a7bedbb48d6bbf02498d8edb872~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbHVja3lDb3Zlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768030013&amp;x-signature=JbtPgfZneHd7nQq7XAHGyzWC1xw%3D" alt="image.png" loading="lazy"/>
ç°åœ¨ Vue.options å°±å¤šäº†ä¸€ä¸ªå±æ€§</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-title class_">Vue</span>.<span class="hljs-property">options</span> = {
    <span class="hljs-attr">_base</span>: <span class="hljs-title class_">Vue</span>,
    <span class="hljs-attr">components</span>: {},
    <span class="hljs-attr">directives</span>: {},
    <span class="hljs-attr">filters</span>: {}
}
</code></pre>
<p>ç„¶åæ˜¯ extend å‡½æ•°ï¼Œå°† Vue.options.components ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ï¼ˆæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼‰ï¼ŒbuiltInComponent ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/108a5894607a4953bee6cbb77bbcad1c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbHVja3lDb3Zlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768030013&amp;x-signature=dXXdDgRKSLg5tTolqUhE1woj540%3D" alt="image.png" loading="lazy"/></p>
<p>builtInComponentï¼ˆæ‰€åœ¨æ–‡ä»¶ï¼š<code>src/core/components/index.tsï¼‰</code>ï¼Œå…¶å®å°±æ˜¯æš´éœ²äº†ä¸€ä¸ª KeepAlive ç»„ä»¶</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/616c4ccd6ee540088a30632855c75b91~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbHVja3lDb3Zlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768030013&amp;x-signature=Q%2BVvsZdV7pH1cucc3SCM2mRGvfc%3D" alt="image.png" loading="lazy"/></p>
<p>é‚£çœ‹ä¸‹ extend å‡½æ•°ï¼ˆæ‰€åœ¨æ–‡ä»¶ï¼š<code>src/shared/utils.ts</code>ï¼‰</p>
<p>å…¶å®å¾ˆç®€å•ï¼Œå°±æ˜¯å¾€ç›®æ ‡å¯¹è±¡æ··åˆå±æ€§ï¼Œç›®æ ‡å¯¹è±¡å°±æ˜¯ä¼ çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼ˆVue.options.componentsï¼‰ï¼Œæ··åˆçš„å±æ€§åœ¨ç¬¬äºŒä¸ªå‚æ•°é‡Œï¼Œåˆšæ‰çœ‹äº†æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå¯¹è±¡é‡Œè¾¹æœ‰ <code>KeepAlive</code> å±æ€§ï¼ˆç»„ä»¶ï¼‰</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8e54af6708444229983923c4470058e4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbHVja3lDb3Zlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768030013&amp;x-signature=Qo7A%2FxWQn1rv1zQBwVYFA2szM9M%3D" alt="image.png" loading="lazy"/></p>
<p>æ··åˆåå°±æ˜¯</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-title class_">Vue</span>.<span class="hljs-property">options</span> = {
    <span class="hljs-attr">_base</span>: <span class="hljs-title class_">Vue</span>,
    <span class="hljs-attr">components</span>: {
        <span class="hljs-title class_">KeepAlive</span>
    },
    <span class="hljs-attr">directives</span>: {},
    <span class="hljs-attr">filters</span>: {}
}
</code></pre>
<p>æ¥ç€ä¸‹è¾¹åˆå¾€ Vue ä¸Šæ·»åŠ äº†ä¸€ç³»åˆ—æ–¹æ³•ï¼š</p>
<p><code>initUse</code>ï¼Œå¾€ Vue ä¸Šæ·»åŠ äº† <code>use</code> æ–¹æ³•
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/57900429f71c406b8f0914c0c2249b06~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbHVja3lDb3Zlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768030013&amp;x-signature=uH5ZHpz%2BxC8NglvoSBUXTPNzkwo%3D" alt="image.png" loading="lazy"/></p>
<p><code>initMixin</code>ï¼Œå¾€ Vue ä¸Šæ·»åŠ  <code>mixin</code> æ–¹æ³•
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4a004fc9c9ee4d919bdb9e0bf4d82a85~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbHVja3lDb3Zlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768030013&amp;x-signature=euXqzf%2Fk%2FUm5S9xjYl6m%2FoK7NlE%3D" alt="image.png" loading="lazy"/></p>
<p><code>initExtend</code>ï¼Œå¾€ Vue ä¸Š æ·»åŠ  <code>extend</code> æ–¹æ³•</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/85cb80ca539c414fa14af71406d48e64~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbHVja3lDb3Zlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768030013&amp;x-signature=u%2FtwAbfhKOBmz35tYUGueC38ezc%3D" alt="image.png" loading="lazy"/></p>
<p><code>initAssetRegisters</code>ï¼Œå¾€ Vue ä¸Šæ·»åŠ  <code>component</code>ã€<code>directive</code>ã€<code>filter</code> æ–¹æ³•ï¼Œ<code>ASSET_TYPES</code> åˆšæ‰çœ‹è¿‡äº†æ˜¯ä¸ªæ•°ç»„ï¼Œæ•°ç»„ä¸­æ¯ä¸ªå…ƒç´ ä½œä¸ºå‡½æ•°åï¼Œåœ¨ Vue ä¸Šæ³¨å†Œæˆäº†å‡½æ•°ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/251ab6556d9b47ac9e8b6205422e11eb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbHVja3lDb3Zlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768030013&amp;x-signature=d6DGjEmJ5shTbnbn9VsxwqZUU2Q%3D" alt="image.png" loading="lazy"/></p>
<p>è‡³æ­¤ï¼Œä» new Vue() åˆ° $mount æœŸé—´çš„ä¸€ç³»åˆ—åˆå§‹åŒ–æ“ä½œæˆ‘ä»¬å°±çœ‹å®Œäº†ï¼Œä¸Šè¾¹ä¸ºäº†å…ˆåˆ†æä¼ ç»™ initGlobalAPI çš„å‚æ•° Vueï¼Œæ‰€ä»¥å°±å…ˆåˆ†æäº† initMixin ç­‰å‡½æ•°ï¼Œå®é™…ä¸Š initGlobalAPI ä½œä¸ºæ ¸å¿ƒå…¥å£æ–‡ä»¶æ˜¯æœ€å…ˆæ‰§è¡Œçš„ã€‚ä¸‹è¾¹å†æ¥çœ‹çœ‹æµç¨‹å›¾ï¼Œè¿™ä¼šå°±æ¸…æ™°å¤šäº†</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1df0cc9407e2448c847b2765c7ad1830~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbHVja3lDb3Zlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768030013&amp;x-signature=5tO0XIl4piA4WKpim2DSOitJ5%2BE%3D" alt="æ— æ ‡é¢˜-2025-12-18-2128.png" loading="lazy"/></p>
<p>Vue åˆå§‹åŒ–æµç¨‹ï¼Œæ¯ä¸€æ­¥éƒ½åšäº†å“ªäº›åˆå§‹åŒ–ï¼Œç°åœ¨çœ‹å°±ä¸€ç›®äº†ç„¶äº†ï¼Œä¸‹ç¯‡æ–‡ç« æˆ‘ä»¬å°±è¿›å‡» Vue çš„å“åº”å¼ç³»ç»Ÿ~</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[OkHttp3 å†…éƒ¨å·¥ä½œåŸç†æ—¶åºå›¾]]></title>    <link>https://juejin.cn/post/7590592594674253834</link>    <guid>https://juejin.cn/post/7590592594674253834</guid>    <pubDate>2026-01-03T07:10:15.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7590592594674253834" data-draft-id="7590292138347216906" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="OkHttp3 å†…éƒ¨å·¥ä½œåŸç†æ—¶åºå›¾"/> <meta itemprop="keywords" content="Android"/> <meta itemprop="datePublished" content="2026-01-03T07:10:15.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¹¾å¤ä¸€æ°”æ€"/> <meta itemprop="url" content="https://juejin.cn/user/4212984289955431"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            OkHttp3 å†…éƒ¨å·¥ä½œåŸç†æ—¶åºå›¾
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4212984289955431/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¹¾å¤ä¸€æ°”æ€
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-03T07:10:15.000Z" title="Sat Jan 03 2026 07:10:15 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">OkHttp3 å†…éƒ¨å·¥ä½œåŸç†æ—¶åºå›¾</h2>
<p>æœ¬æ–‡æ¡£æ·±å…¥å‰–æOkHttp3æ¡†æ¶çš„å†…éƒ¨å·¥ä½œæœºåˆ¶ï¼Œå±•ç¤ºå…¶æ ¸å¿ƒç»„ä»¶çš„äº¤äº’æµç¨‹ã€‚</p>
<h3 data-id="heading-1">1. OkHttpClient æ„å»ºæµç¨‹</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant Client as å¼€å‘è€…ä»£ç 
    participant Builder as OkHttpClient.Builder
    participant Dispatcher as Dispatcher
    participant ConnectionPool as ConnectionPool
    participant OkHttpClient as OkHttpClient

    Client-&gt;&gt;Builder: new OkHttpClient.Builder()
    activate Builder

    Note over Builder: é…ç½®ç½‘ç»œå‚æ•°
    Client-&gt;&gt;Builder: connectTimeout(duration)
    Builder-&gt;&gt;Builder: è®¾ç½®è¿æ¥è¶…æ—¶
    Client-&gt;&gt;Builder: readTimeout(duration)
    Builder-&gt;&gt;Builder: è®¾ç½®è¯»è¶…æ—¶
    Client-&gt;&gt;Builder: writeTimeout(duration)
    Builder-&gt;&gt;Builder: è®¾ç½®å†™è¶…æ—¶

    Note over Builder: é…ç½®æ‹¦æˆªå™¨
    Client-&gt;&gt;Builder: addInterceptor(interceptor)
    Builder-&gt;&gt;Builder: interceptors.add()
    Client-&gt;&gt;Builder: addNetworkInterceptor(interceptor)
    Builder-&gt;&gt;Builder: networkInterceptors.add()

    Note over Builder: é…ç½®è¿æ¥æ± 
    Client-&gt;&gt;Builder: connectionPool(pool)
    alt æœªæŒ‡å®šè¿æ¥æ± 
        Builder-&gt;&gt;ConnectionPool: new ConnectionPool()
        activate ConnectionPool
        ConnectionPool-&gt;&gt;ConnectionPool: æœ€å¤§ç©ºé—²è¿æ¥: 5
        ConnectionPool-&gt;&gt;ConnectionPool: ä¿æ´»æ—¶é—´: 5åˆ†é’Ÿ
        ConnectionPool--&gt;&gt;Builder: è¿”å›é»˜è®¤è¿æ¥æ± 
        deactivate ConnectionPool
    end

    Note over Builder: é…ç½®è°ƒåº¦å™¨
    Client-&gt;&gt;Builder: dispatcher(dispatcher)
    alt æœªæŒ‡å®šè°ƒåº¦å™¨
        Builder-&gt;&gt;Dispatcher: new Dispatcher()
        activate Dispatcher
        Dispatcher-&gt;&gt;Dispatcher: æœ€å¤§å¹¶å‘è¯·æ±‚: 64
        Dispatcher-&gt;&gt;Dispatcher: å•Hostæœ€å¤§è¯·æ±‚: 5
        Dispatcher-&gt;&gt;Dispatcher: åˆ›å»ºçº¿ç¨‹æ± ExecutorService
        Dispatcher--&gt;&gt;Builder: è¿”å›è°ƒåº¦å™¨
        deactivate Dispatcher
    end

    Client-&gt;&gt;Builder: build()
    Builder-&gt;&gt;OkHttpClient: new OkHttpClient(builder)
    activate OkHttpClient
    OkHttpClient-&gt;&gt;OkHttpClient: å¤åˆ¶æ‰€æœ‰é…ç½®
    OkHttpClient--&gt;&gt;Builder: è¿”å›OkHttpClientå®ä¾‹
    deactivate OkHttpClient

    Builder--&gt;&gt;Client: è¿”å›é…ç½®å¥½çš„client
    deactivate Builder
</code></pre>
<h3 data-id="heading-2">2. åŒæ­¥è¯·æ±‚æ‰§è¡Œæµç¨‹</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant Client as å¼€å‘è€…ä»£ç 
    participant OkHttpClient as OkHttpClient
    participant RealCall as RealCall
    participant Dispatcher as Dispatcher
    participant Chain as RealInterceptorChain
    participant Interceptors as æ‹¦æˆªå™¨é“¾
    participant Network as ç½‘ç»œæœåŠ¡å™¨

    Client-&gt;&gt;OkHttpClient: newCall(request)
    activate OkHttpClient
    OkHttpClient-&gt;&gt;RealCall: new RealCall(client, request)
    activate RealCall
    RealCall-&gt;&gt;RealCall: åˆå§‹åŒ–Callå¯¹è±¡
    RealCall--&gt;&gt;OkHttpClient: è¿”å›Callå®ä¾‹
    deactivate RealCall
    OkHttpClient--&gt;&gt;Client: è¿”å›Call
    deactivate OkHttpClient

    Note over Client,RealCall: æ‰§è¡ŒåŒæ­¥è¯·æ±‚
    Client-&gt;&gt;RealCall: execute()
    activate RealCall

    RealCall-&gt;&gt;RealCall: æ£€æŸ¥æ˜¯å¦å·²æ‰§è¡Œ
    alt å·²æ‰§è¡Œ
        RealCall--&gt;&gt;Client: throw IllegalStateException
    end

    RealCall-&gt;&gt;RealCall: executed = true
    RealCall-&gt;&gt;Dispatcher: executed(call)
    activate Dispatcher
    Dispatcher-&gt;&gt;Dispatcher: runningSyncCalls.add(call)
    Dispatcher--&gt;&gt;RealCall: è®°å½•åŒæ­¥è°ƒç”¨
    deactivate Dispatcher

    RealCall-&gt;&gt;RealCall: getResponseWithInterceptorChain()
    activate RealCall

    RealCall-&gt;&gt;Chain: new RealInterceptorChain()
    activate Chain
    Chain-&gt;&gt;Chain: æ„å»ºæ‹¦æˆªå™¨é“¾
    Chain--&gt;&gt;RealCall: è¿”å›Chain
    deactivate Chain

    RealCall-&gt;&gt;Chain: proceed(request)
    activate Chain
    Chain-&gt;&gt;Interceptors: æ‰§è¡Œæ‹¦æˆªå™¨é“¾
    activate Interceptors
    Note over Interceptors: ä¾æ¬¡æ‰§è¡Œæ‰€æœ‰æ‹¦æˆªå™¨
    Interceptors-&gt;&gt;Network: å‘é€ç½‘ç»œè¯·æ±‚
    activate Network
    Network--&gt;&gt;Interceptors: è¿”å›å“åº”
    deactivate Network
    Interceptors--&gt;&gt;Chain: è¿”å›Response
    deactivate Interceptors
    Chain--&gt;&gt;RealCall: è¿”å›Response
    deactivate Chain

    RealCall--&gt;&gt;RealCall: è¿”å›Response
    deactivate RealCall

    RealCall-&gt;&gt;Dispatcher: finished(call)
    activate Dispatcher
    Dispatcher-&gt;&gt;Dispatcher: runningSyncCalls.remove(call)
    Dispatcher--&gt;&gt;RealCall: å®Œæˆ
    deactivate Dispatcher

    RealCall--&gt;&gt;Client: è¿”å›Response
    deactivate RealCall
</code></pre>
<h3 data-id="heading-3">3. å¼‚æ­¥è¯·æ±‚æ‰§è¡Œæµç¨‹</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant Client as å¼€å‘è€…ä»£ç 
    participant RealCall as RealCall
    participant Dispatcher as Dispatcher
    participant ExecutorService as çº¿ç¨‹æ± 
    participant AsyncCall as AsyncCall
    participant Chain as æ‹¦æˆªå™¨é“¾
    participant Callback as Callback

    Client-&gt;&gt;RealCall: enqueue(callback)
    activate RealCall

    RealCall-&gt;&gt;AsyncCall: new AsyncCall(callback)
    activate AsyncCall
    AsyncCall-&gt;&gt;AsyncCall: å°è£…å›è°ƒ
    AsyncCall--&gt;&gt;RealCall: è¿”å›AsyncCall
    deactivate AsyncCall

    RealCall-&gt;&gt;Dispatcher: enqueue(asyncCall)
    activate Dispatcher

    Dispatcher-&gt;&gt;Dispatcher: æ£€æŸ¥å¹¶å‘é™åˆ¶

    alt å¯ä»¥ç«‹å³æ‰§è¡Œ
        Note over Dispatcher: runningAsyncCalls &lt; 64&lt;br/&gt;ä¸”å•Hostè¯·æ±‚ &lt; 5
        Dispatcher-&gt;&gt;Dispatcher: runningAsyncCalls.add(call)
        Dispatcher-&gt;&gt;ExecutorService: execute(asyncCall)
        activate ExecutorService
        ExecutorService--&gt;&gt;Dispatcher: æäº¤æˆåŠŸ
        deactivate ExecutorService
    else éœ€è¦ç­‰å¾…
        Dispatcher-&gt;&gt;Dispatcher: readyAsyncCalls.add(call)
        Note over Dispatcher: åŠ å…¥ç­‰å¾…é˜Ÿåˆ—
    end

    Dispatcher--&gt;&gt;RealCall: å…¥é˜ŸæˆåŠŸ
    deactivate Dispatcher
    RealCall--&gt;&gt;Client: ç«‹å³è¿”å›
    deactivate RealCall

    Note over ExecutorService,AsyncCall: åœ¨çº¿ç¨‹æ± ä¸­å¼‚æ­¥æ‰§è¡Œ
    ExecutorService-&gt;&gt;AsyncCall: run()
    activate AsyncCall

    AsyncCall-&gt;&gt;Chain: getResponseWithInterceptorChain()
    activate Chain

    Note over Chain: æ‰§è¡Œæ‹¦æˆªå™¨é“¾
    Chain-&gt;&gt;Chain: ä¾æ¬¡æ‰§è¡Œæ‰€æœ‰æ‹¦æˆªå™¨
    Chain-&gt;&gt;Chain: å‘é€ç½‘ç»œè¯·æ±‚
    Chain-&gt;&gt;Chain: æ¥æ”¶å“åº”
    Chain--&gt;&gt;AsyncCall: è¿”å›Responseæˆ–æŠ›å‡ºå¼‚å¸¸
    deactivate Chain

    alt è¯·æ±‚æˆåŠŸ
        AsyncCall-&gt;&gt;Callback: onResponse(call, response)
        activate Callback
        Callback--&gt;&gt;AsyncCall: å¤„ç†æˆåŠŸå“åº”
        deactivate Callback
    else è¯·æ±‚å¤±è´¥
        AsyncCall-&gt;&gt;Callback: onFailure(call, exception)
        activate Callback
        Callback--&gt;&gt;AsyncCall: å¤„ç†å¤±è´¥
        deactivate Callback
    end

    AsyncCall-&gt;&gt;Dispatcher: finished(asyncCall)
    activate Dispatcher
    Dispatcher-&gt;&gt;Dispatcher: runningAsyncCalls.remove(call)
    Dispatcher-&gt;&gt;Dispatcher: promoteAndExecute()

    Note over Dispatcher: æå‡ç­‰å¾…é˜Ÿåˆ—ä¸­çš„è¯·æ±‚
    Dispatcher-&gt;&gt;Dispatcher: éå†readyAsyncCalls
    Dispatcher-&gt;&gt;Dispatcher: ç§»åŠ¨ç¬¦åˆæ¡ä»¶çš„åˆ°runningAsyncCalls
    Dispatcher-&gt;&gt;ExecutorService: æ‰§è¡Œæ–°çš„AsyncCall
    activate ExecutorService
    ExecutorService--&gt;&gt;Dispatcher: æäº¤æˆåŠŸ
    deactivate ExecutorService

    Dispatcher--&gt;&gt;AsyncCall: å®Œæˆ
    deactivate Dispatcher
    deactivate AsyncCall
</code></pre>
<h3 data-id="heading-4">4. æ‹¦æˆªå™¨é“¾æ‰§è¡Œæµç¨‹</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant RealCall as RealCall
    participant RetryInterceptor as 1.RetryAndFollowUp
    participant BridgeInterceptor as 2.Bridge
    participant CacheInterceptor as 3.Cache
    participant ConnectInterceptor as 4.Connect
    participant CallServerInterceptor as 5.CallServer
    participant Network as ç½‘ç»œ

    RealCall-&gt;&gt;RetryInterceptor: chain.proceed(request)
    activate RetryInterceptor
    Note over RetryInterceptor: é‡è¯•å’Œé‡å®šå‘æ‹¦æˆªå™¨
    RetryInterceptor-&gt;&gt;RetryInterceptor: åˆ›å»ºStreamAllocation

    RetryInterceptor-&gt;&gt;BridgeInterceptor: chain.proceed(request)
    activate BridgeInterceptor
    Note over BridgeInterceptor: æ¡¥æ¥æ‹¦æˆªå™¨-æ·»åŠ Headers
    BridgeInterceptor-&gt;&gt;BridgeInterceptor: æ·»åŠ Content-Type/Host&lt;br/&gt;Connection/Accept-Encoding&lt;br/&gt;Cookie/User-Agent

    BridgeInterceptor-&gt;&gt;CacheInterceptor: chain.proceed(request)
    activate CacheInterceptor
    Note over CacheInterceptor: ç¼“å­˜æ‹¦æˆªå™¨
    CacheInterceptor-&gt;&gt;CacheInterceptor: è¯»å–ç¼“å­˜

    alt ä½¿ç”¨ç¼“å­˜
        Note over CacheInterceptor: ç¼“å­˜æœ‰æ•ˆï¼Œç›´æ¥è¿”å›
        CacheInterceptor--&gt;&gt;BridgeInterceptor: è¿”å›ç¼“å­˜Response
    else éœ€è¦ç½‘ç»œè¯·æ±‚
        CacheInterceptor-&gt;&gt;ConnectInterceptor: chain.proceed(request)
        activate ConnectInterceptor
        Note over ConnectInterceptor: è¿æ¥æ‹¦æˆªå™¨
        ConnectInterceptor-&gt;&gt;ConnectInterceptor: è·å–/åˆ›å»ºè¿æ¥
        ConnectInterceptor-&gt;&gt;ConnectInterceptor: å»ºç«‹TCPè¿æ¥
        ConnectInterceptor-&gt;&gt;ConnectInterceptor: TLSæ¡æ‰‹(HTTPS)

        ConnectInterceptor-&gt;&gt;CallServerInterceptor: chain.proceed(request)
        activate CallServerInterceptor
        Note over CallServerInterceptor: è¯·æ±‚æœåŠ¡å™¨æ‹¦æˆªå™¨

        CallServerInterceptor-&gt;&gt;Network: å†™å…¥è¯·æ±‚
        activate Network
        Network-&gt;&gt;Network: å¤„ç†è¯·æ±‚
        Network--&gt;&gt;CallServerInterceptor: è¿”å›å“åº”
        deactivate Network

        CallServerInterceptor--&gt;&gt;ConnectInterceptor: Response
        deactivate CallServerInterceptor

        ConnectInterceptor--&gt;&gt;CacheInterceptor: Response
        deactivate ConnectInterceptor

        CacheInterceptor-&gt;&gt;CacheInterceptor: å†™å…¥ç¼“å­˜(å¦‚æœå¯ç¼“å­˜)
        CacheInterceptor--&gt;&gt;BridgeInterceptor: Response
    end
    deactivate CacheInterceptor

    BridgeInterceptor-&gt;&gt;BridgeInterceptor: è§£å‹gzip/ä¿å­˜Cookie
    BridgeInterceptor--&gt;&gt;RetryInterceptor: Response
    deactivate BridgeInterceptor

    alt éœ€è¦é‡è¯•æˆ–é‡å®šå‘
        Note over RetryInterceptor: 3xx/408/503çŠ¶æ€ç 
        RetryInterceptor-&gt;&gt;RetryInterceptor: æ„å»ºæ–°è¯·æ±‚
        RetryInterceptor-&gt;&gt;BridgeInterceptor: é‡æ–°æ‰§è¡Œæ‹¦æˆªå™¨é“¾
        Note over RetryInterceptor: æœ€å¤šé‡è¯•20æ¬¡
    else æˆåŠŸå“åº”
        RetryInterceptor--&gt;&gt;RealCall: è¿”å›æœ€ç»ˆResponse
    end
    deactivate RetryInterceptor
</code></pre>
<h3 data-id="heading-5">5. è¿æ¥æ± ç®¡ç†æœºåˆ¶</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant Call as RealCall
    participant Interceptor as ConnectInterceptor
    participant Finder as ExchangeFinder
    participant Pool as ConnectionPool
    participant Connection as RealConnection
    participant Socket as Socket

    Note over Call,Pool: é˜¶æ®µ1ï¼šä»è¿æ¥æ± è·å–è¿æ¥
    Call-&gt;&gt;Interceptor: intercept(chain)
    activate Interceptor
    Interceptor-&gt;&gt;Finder: find()
    activate Finder

    Finder-&gt;&gt;Pool: get(address, call)
    activate Pool
    Pool-&gt;&gt;Pool: éå†connectionsæŸ¥æ‰¾åŒ¹é…
    Pool-&gt;&gt;Connection: isEligible(address)
    activate Connection
    Connection-&gt;&gt;Connection: æ£€æŸ¥Host/ç«¯å£/åè®®
    Connection--&gt;&gt;Pool: åŒ¹é…ç»“æœ
    deactivate Connection

    alt æ‰¾åˆ°åŒ¹é…çš„è¿æ¥
        Pool-&gt;&gt;Connection: acquire(call)
        activate Connection
        Connection-&gt;&gt;Connection: calls.add(call)
        Connection--&gt;&gt;Pool: åˆ†é…æˆåŠŸ
        deactivate Connection
        Pool--&gt;&gt;Finder: è¿”å›å¯ç”¨è¿æ¥
        Finder--&gt;&gt;Interceptor: è¿”å›è¿æ¥
        Interceptor--&gt;&gt;Call: ä½¿ç”¨å·²æœ‰è¿æ¥
        Note over Call: å¤ç”¨è¿æ¥ï¼Œæµç¨‹ç»“æŸ
    else æœªæ‰¾åˆ°å¯ç”¨è¿æ¥
        Pool--&gt;&gt;Finder: è¿”å›null
        Note over Finder,Socket: é˜¶æ®µ2ï¼šåˆ›å»ºæ–°è¿æ¥
        Finder-&gt;&gt;Connection: new RealConnection()
        activate Connection
        Connection-&gt;&gt;Socket: å»ºç«‹TCPè¿æ¥
        activate Socket
        Socket-&gt;&gt;Socket: connect(address, timeout)
        Socket--&gt;&gt;Connection: è¿æ¥å»ºç«‹
        deactivate Socket

        Connection-&gt;&gt;Connection: TLSæ¡æ‰‹(å¦‚æœHTTPS)
        Connection--&gt;&gt;Finder: è¿”å›æ–°è¿æ¥
        deactivate Connection

        Finder-&gt;&gt;Pool: put(connection)
        Pool-&gt;&gt;Pool: connections.add()
        Pool-&gt;&gt;Pool: è§¦å‘æ¸…ç†ä»»åŠ¡
        Pool--&gt;&gt;Finder: åŠ å…¥æˆåŠŸ
        Finder--&gt;&gt;Interceptor: è¿”å›æ–°è¿æ¥
        Interceptor--&gt;&gt;Call: ä½¿ç”¨æ–°è¿æ¥
        Note over Call: æ–°è¿æ¥å·²å°±ç»ª
    end
    deactivate Pool
    deactivate Finder
    deactivate Interceptor

    Note over Pool: é˜¶æ®µ3ï¼šåå°æ¸…ç†ä»»åŠ¡
    Pool-&gt;&gt;Pool: cleanup()å®šæœŸæ‰§è¡Œ
    activate Pool
    Pool-&gt;&gt;Pool: éå†æ‰€æœ‰è¿æ¥
    Pool-&gt;&gt;Connection: æ£€æŸ¥ç©ºé—²æ—¶é—´å’Œæ•°é‡
    activate Connection

    Connection-&gt;&gt;Connection: åˆ¤æ–­æ¸…ç†æ¡ä»¶
    Note over Connection: ç©ºé—²&gt;5åˆ†é’Ÿ æˆ– è¶…è¿‡æœ€å¤§æ•°5
    Connection--&gt;&gt;Pool: è¿”å›æ˜¯å¦éœ€è¦æ¸…ç†
    deactivate Connection

    Pool-&gt;&gt;Pool: ç§»é™¤è¿‡æœŸè¿æ¥
    Pool-&gt;&gt;Connection: close()
    activate Connection
    Connection-&gt;&gt;Connection: å…³é—­Socket
    deactivate Connection
    Pool-&gt;&gt;Pool: è®¡ç®—ä¸‹æ¬¡æ¸…ç†æ—¶é—´
    deactivate Pool
</code></pre>
<h3 data-id="heading-6">6. HTTP/2 å¤šè·¯å¤ç”¨æœºåˆ¶</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant Call1 as Request1
    participant Call2 as Request2
    participant Connection as RealConnection
    participant Http2 as Http2Connection
    participant Stream1 as Http2Stream(id=1)
    participant Stream2 as Http2Stream(id=3)
    participant Socket as TCP Socket
    participant Server as æœåŠ¡å™¨

    Note over Call1,Connection: ç¬¬ä¸€ä¸ªè¯·æ±‚å»ºç«‹HTTP/2è¿æ¥
    Call1-&gt;&gt;Connection: connect()
    activate Connection
    Connection-&gt;&gt;Socket: å»ºç«‹TCPè¿æ¥
    activate Socket
    Socket--&gt;&gt;Connection: è¿æ¥æˆåŠŸ
    Connection-&gt;&gt;Http2: new Http2Connection()
    activate Http2
    Http2-&gt;&gt;Socket: å‘é€è¿æ¥å‰è¨€(Preface)
    Socket-&gt;&gt;Server: PRI * HTTP/2.0
    activate Server
    Server--&gt;&gt;Socket: è¿”å›SETTINGSå¸§
    Socket-&gt;&gt;Http2: æ¥æ”¶SETTINGSå¸§
    Http2-&gt;&gt;Http2: åˆå§‹åŒ–è¿æ¥å‚æ•°
    Http2--&gt;&gt;Connection: HTTP/2è¿æ¥å°±ç»ª
    deactivate Http2
    deactivate Socket
    deactivate Connection

    Note over Call1,Stream1: ç¬¬ä¸€ä¸ªè¯·æ±‚ä½¿ç”¨Stream1
    Call1-&gt;&gt;Http2: newStream()
    activate Http2
    Http2-&gt;&gt;Stream1: new Http2Stream(streamId=1)
    activate Stream1
    Stream1--&gt;&gt;Http2: è¿”å›Stream1
    Http2--&gt;&gt;Call1: è¿”å›Stream1
    deactivate Http2

    Call1-&gt;&gt;Stream1: writeRequestHeaders()
    Stream1-&gt;&gt;Socket: å‘é€HEADERSå¸§(streamId=1)
    activate Socket
    Socket-&gt;&gt;Server: HEADERSå¸§
    Stream1-&gt;&gt;Socket: å‘é€DATAå¸§(streamId=1)
    Socket-&gt;&gt;Server: DATAå¸§
    deactivate Socket

    Note over Call2,Stream2: ç¬¬äºŒä¸ªè¯·æ±‚å¤ç”¨åŒä¸€è¿æ¥
    Call2-&gt;&gt;Connection: è·å–å·²æœ‰è¿æ¥
    activate Connection
    Connection--&gt;&gt;Call2: è¿”å›ç›¸åŒçš„Http2Connection
    deactivate Connection

    Call2-&gt;&gt;Http2: newStream()
    activate Http2
    Http2-&gt;&gt;Stream2: new Http2Stream(streamId=3)
    activate Stream2
    Stream2--&gt;&gt;Http2: è¿”å›Stream2
    Http2--&gt;&gt;Call2: è¿”å›Stream2
    deactivate Http2

    Note over Stream1,Stream2: ä¸¤ä¸ªæµåœ¨åŒä¸€TCPè¿æ¥ä¸Šå¹¶å‘

    Call2-&gt;&gt;Stream2: writeRequestHeaders()
    Stream2-&gt;&gt;Socket: å‘é€HEADERSå¸§(streamId=3)
    activate Socket
    Socket-&gt;&gt;Server: HEADERSå¸§
    Stream2-&gt;&gt;Socket: å‘é€DATAå¸§(streamId=3)
    Socket-&gt;&gt;Server: DATAå¸§

    Note over Server: æœåŠ¡å™¨å¹¶å‘å¤„ç†ä¸¤ä¸ªè¯·æ±‚

    Server-&gt;&gt;Socket: HEADERSå¸§(streamId=1)
    Socket-&gt;&gt;Stream1: æ¥æ”¶HEADERSå¸§
    Stream1-&gt;&gt;Call1: onResponse()
    activate Call1

    Server-&gt;&gt;Socket: DATAå¸§(streamId=3)
    Socket-&gt;&gt;Stream2: æ¥æ”¶DATAå¸§
    Stream2-&gt;&gt;Call2: onResponse()
    activate Call2

    Server-&gt;&gt;Socket: DATAå¸§(streamId=1)
    Socket-&gt;&gt;Stream1: æ¥æ”¶DATAå¸§
    Stream1--&gt;&gt;Call1: å“åº”ä½“
    deactivate Call1

    Server-&gt;&gt;Socket: DATAå¸§(streamId=3, END_STREAM)
    Socket-&gt;&gt;Stream2: æ¥æ”¶DATAå¸§
    Stream2--&gt;&gt;Call2: å“åº”ä½“
    deactivate Socket
    deactivate Server
    deactivate Call2

    Stream1-&gt;&gt;Stream1: æµå…³é—­
    deactivate Stream1
    Stream2-&gt;&gt;Stream2: æµå…³é—­
    deactivate Stream2
</code></pre>
<h3 data-id="heading-7">7. ç¼“å­˜æœºåˆ¶è¯¦è§£</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant Call as RealCall
    participant CacheInterceptor as CacheInterceptor
    participant Cache as Cache
    participant DiskLruCache as DiskLruCache
    participant CacheStrategy as CacheStrategy
    participant Network as ç½‘ç»œ

    Call-&gt;&gt;CacheInterceptor: intercept(chain)
    activate CacheInterceptor

    Note over CacheInterceptor,Cache: é˜¶æ®µ1ï¼šè¯»å–ç¼“å­˜
    CacheInterceptor-&gt;&gt;Cache: get(request)
    activate Cache
    Cache-&gt;&gt;Cache: è®¡ç®—key = hash(url)
    Cache-&gt;&gt;DiskLruCache: get(key)
    activate DiskLruCache
    DiskLruCache-&gt;&gt;DiskLruCache: è¯»å–ç¼“å­˜æ–‡ä»¶
    DiskLruCache--&gt;&gt;Cache: è¿”å›ç¼“å­˜æ¡ç›®æˆ–null
    deactivate DiskLruCache
    Cache-&gt;&gt;Cache: è§£æå“åº”å¤´å’Œå“åº”ä½“
    Cache--&gt;&gt;CacheInterceptor: è¿”å›Responseæˆ–null
    deactivate Cache

    Note over CacheInterceptor,CacheStrategy: é˜¶æ®µ2ï¼šç¡®å®šç¼“å­˜ç­–ç•¥
    CacheInterceptor-&gt;&gt;CacheStrategy: get(request, cacheResponse)
    activate CacheStrategy
    CacheStrategy-&gt;&gt;CacheStrategy: åˆ†æCache-Control
    CacheStrategy-&gt;&gt;CacheStrategy: æ£€æŸ¥max-age/Expires
    CacheStrategy-&gt;&gt;CacheStrategy: æ£€æŸ¥ETag/Last-Modified
    CacheStrategy--&gt;&gt;CacheInterceptor: è¿”å›ç­–ç•¥(networkRequest, cacheResponse)
    deactivate CacheStrategy

    Note over CacheInterceptor: é˜¶æ®µ3ï¼šæ‰§è¡Œç­–ç•¥

    alt ç­–ç•¥1ï¼šä»…ä½¿ç”¨ç¼“å­˜
        Note over CacheInterceptor: networkRequest==null
        CacheInterceptor--&gt;&gt;Call: è¿”å›ç¼“å­˜Response
    else ç­–ç•¥2ï¼šå‘é€ç½‘ç»œè¯·æ±‚
        CacheInterceptor-&gt;&gt;Network: chain.proceed(request)
        activate Network
        Network--&gt;&gt;CacheInterceptor: è¿”å›networkResponse
        deactivate Network

        alt å“åº”304 Not Modified
            CacheInterceptor-&gt;&gt;CacheInterceptor: åˆå¹¶ç¼“å­˜å’Œç½‘ç»œå“åº”
            CacheInterceptor-&gt;&gt;Cache: update(cacheResponse)
            activate Cache
            Cache-&gt;&gt;DiskLruCache: æ›´æ–°å“åº”å¤´
            activate DiskLruCache
            DiskLruCache--&gt;&gt;Cache: æ›´æ–°æˆåŠŸ
            deactivate DiskLruCache
            Cache--&gt;&gt;CacheInterceptor: å®Œæˆ
            deactivate Cache
            CacheInterceptor--&gt;&gt;Call: è¿”å›æ›´æ–°åçš„ç¼“å­˜
        else å“åº”200 OK
            CacheInterceptor-&gt;&gt;CacheInterceptor: æ£€æŸ¥æ˜¯å¦å¯ç¼“å­˜
            CacheInterceptor-&gt;&gt;Cache: put(response)
            activate Cache
            Cache-&gt;&gt;Cache: éªŒè¯Cache-Control
            Cache-&gt;&gt;Cache: éªŒè¯å“åº”ç 
            Cache-&gt;&gt;DiskLruCache: put(key, response)
            activate DiskLruCache
            DiskLruCache-&gt;&gt;DiskLruCache: å†™å…¥å“åº”å¤´
            DiskLruCache-&gt;&gt;DiskLruCache: å†™å…¥å“åº”ä½“
            DiskLruCache--&gt;&gt;Cache: å†™å…¥æˆåŠŸ
            deactivate DiskLruCache
            Cache--&gt;&gt;CacheInterceptor: ç¼“å­˜æˆåŠŸ
            deactivate Cache
            CacheInterceptor--&gt;&gt;Call: è¿”å›ç½‘ç»œResponse
        end
    end

    deactivate CacheInterceptor
</code></pre>
<h3 data-id="heading-8">8. WebSocket è¿æ¥æœºåˆ¶</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant Client as å¼€å‘è€…ä»£ç 
    participant OkHttpClient as OkHttpClient
    participant RealWebSocket as RealWebSocket
    participant WebSocketWriter as WebSocketWriter
    participant WebSocketReader as WebSocketReader
    participant RealCall as RealCall
    participant Server as WebSocketæœåŠ¡å™¨

    Client-&gt;&gt;OkHttpClient: newWebSocket(request, listener)
    activate OkHttpClient

    OkHttpClient-&gt;&gt;RealWebSocket: new RealWebSocket()
    activate RealWebSocket
    RealWebSocket-&gt;&gt;RealWebSocket: åˆå§‹åŒ–WebSocket
    RealWebSocket--&gt;&gt;OkHttpClient: è¿”å›WebSocketå®ä¾‹
    OkHttpClient--&gt;&gt;Client: è¿”å›WebSocket
    deactivate OkHttpClient

    Note over RealWebSocket: å‘èµ·WebSocketæ¡æ‰‹
    RealWebSocket-&gt;&gt;RealCall: åˆ›å»ºHTTPå‡çº§è¯·æ±‚
    activate RealCall
    RealCall-&gt;&gt;RealCall: æ·»åŠ å‡çº§Headers&lt;br/&gt;Upgrade: websocket&lt;br/&gt;Connection: Upgrade&lt;br/&gt;Sec-WebSocket-Key&lt;br/&gt;Sec-WebSocket-Version: 13

    RealCall-&gt;&gt;Server: å‘é€HTTPè¯·æ±‚
    activate Server
    Server-&gt;&gt;Server: éªŒè¯WebSocketæ¡æ‰‹
    Server--&gt;&gt;RealCall: 101 Switching Protocols
    deactivate Server

    RealCall-&gt;&gt;RealCall: éªŒè¯å“åº”&lt;br/&gt;Sec-WebSocket-Accept
    RealCall--&gt;&gt;RealWebSocket: æ¡æ‰‹æˆåŠŸ
    deactivate RealCall

    Note over RealWebSocket: åˆå§‹åŒ–è¯»å†™
    RealWebSocket-&gt;&gt;WebSocketWriter: initWriter(streams)
    activate WebSocketWriter
    WebSocketWriter-&gt;&gt;WebSocketWriter: åˆå§‹åŒ–è¾“å‡ºæµ
    WebSocketWriter--&gt;&gt;RealWebSocket: Writerå°±ç»ª
    deactivate WebSocketWriter

    RealWebSocket-&gt;&gt;WebSocketReader: initReader(streams)
    activate WebSocketReader
    WebSocketReader-&gt;&gt;WebSocketReader: åˆå§‹åŒ–è¾“å…¥æµ
    WebSocketReader--&gt;&gt;RealWebSocket: Readerå°±ç»ª
    deactivate WebSocketReader

    RealWebSocket-&gt;&gt;Client: onOpen(webSocket, response)
    activate Client
    Client--&gt;&gt;RealWebSocket: è¿æ¥å·²æ‰“å¼€
    deactivate Client

    Note over Client,Server: åŒå‘é€šä¿¡é˜¶æ®µ

    Client-&gt;&gt;RealWebSocket: send(text)
    activate RealWebSocket
    RealWebSocket-&gt;&gt;WebSocketWriter: writeMessageFrame(TEXT, text)
    activate WebSocketWriter
    WebSocketWriter-&gt;&gt;WebSocketWriter: æ·»åŠ æ©ç (Mask)
    WebSocketWriter-&gt;&gt;WebSocketWriter: æ„å»ºWebSocketå¸§
    WebSocketWriter-&gt;&gt;Server: å‘é€TEXTå¸§
    activate Server
    WebSocketWriter--&gt;&gt;RealWebSocket: å‘é€æˆåŠŸ
    deactivate WebSocketWriter
    RealWebSocket--&gt;&gt;Client: è¿”å›true
    deactivate RealWebSocket

    Server-&gt;&gt;WebSocketReader: æ¥æ”¶TEXTå¸§
    activate WebSocketReader
    WebSocketReader-&gt;&gt;WebSocketReader: è¯»å–å¸§å¤´
    WebSocketReader-&gt;&gt;WebSocketReader: è¯»å–Payload
    WebSocketReader-&gt;&gt;RealWebSocket: processFrame(TEXT, payload)
    deactivate WebSocketReader
    activate RealWebSocket
    RealWebSocket-&gt;&gt;Client: onMessage(text)
    activate Client
    Client--&gt;&gt;RealWebSocket: å¤„ç†æ¶ˆæ¯
    deactivate Client
    deactivate RealWebSocket

    Note over RealWebSocket,Server: Ping/Pongå¿ƒè·³

    RealWebSocket-&gt;&gt;WebSocketWriter: writePing()
    activate WebSocketWriter
    WebSocketWriter-&gt;&gt;Server: å‘é€PINGå¸§
    Server--&gt;&gt;WebSocketWriter: è¿”å›PONGå¸§
    deactivate Server
    deactivate WebSocketWriter

    WebSocketReader-&gt;&gt;RealWebSocket: processPong()
    activate WebSocketReader
    activate RealWebSocket
    RealWebSocket-&gt;&gt;RealWebSocket: æ›´æ–°æœ€åPongæ—¶é—´
    deactivate RealWebSocket
    deactivate WebSocketReader

    Note over Client,Server: å…³é—­è¿æ¥

    Client-&gt;&gt;RealWebSocket: close(code, reason)
    activate RealWebSocket
    RealWebSocket-&gt;&gt;WebSocketWriter: writeClose(code, reason)
    activate WebSocketWriter
    WebSocketWriter-&gt;&gt;Server: å‘é€CLOSEå¸§
    activate Server
    WebSocketWriter--&gt;&gt;RealWebSocket: å‘é€æˆåŠŸ
    deactivate WebSocketWriter

    Server-&gt;&gt;WebSocketReader: æ¥æ”¶CLOSEå¸§
    activate WebSocketReader
    WebSocketReader-&gt;&gt;RealWebSocket: processClose()
    deactivate WebSocketReader
    RealWebSocket-&gt;&gt;Client: onClosing(code, reason)
    activate Client
    Client--&gt;&gt;RealWebSocket: ç¡®è®¤å…³é—­
    deactivate Client

    Server--&gt;&gt;RealWebSocket: å…³é—­è¿æ¥
    deactivate Server

    RealWebSocket-&gt;&gt;Client: onClosed(code, reason)
    activate Client
    Client--&gt;&gt;RealWebSocket: è¿æ¥å·²å…³é—­
    deactivate Client
    deactivate RealWebSocket
</code></pre>
<h3 data-id="heading-9">9. å®Œæ•´è¯·æ±‚ç”Ÿå‘½å‘¨æœŸæµç¨‹å›¾</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart TD
    Start([åˆ›å»ºRequest]) --&gt; NewCall[OkHttpClient.newCall]
    NewCall --&gt; ChooseSync{åŒæ­¥è¿˜æ˜¯å¼‚æ­¥?}

    ChooseSync --&gt;|execute| SyncExec[åŒæ­¥æ‰§è¡Œ]
    ChooseSync --&gt;|enqueue| AsyncExec[å¼‚æ­¥æ‰§è¡Œ]

    SyncExec --&gt; CheckExecuted{æ˜¯å¦å·²æ‰§è¡Œ?}
    CheckExecuted --&gt;|æ˜¯| ThrowError[æŠ›å‡ºå¼‚å¸¸]
    CheckExecuted --&gt;|å¦| MarkExecuted[æ ‡è®°å·²æ‰§è¡Œ]

    AsyncExec --&gt; EnqueueAsync[åŠ å…¥Dispatcheré˜Ÿåˆ—]
    EnqueueAsync --&gt; CheckLimit{æ£€æŸ¥å¹¶å‘é™åˆ¶}
    CheckLimit --&gt;|è¾¾åˆ°ä¸Šé™| AddToReady[åŠ å…¥å°±ç»ªé˜Ÿåˆ—]
    CheckLimit --&gt;|æœªè¾¾ä¸Šé™| AddToRunning[åŠ å…¥è¿è¡Œé˜Ÿåˆ—]
    AddToRunning --&gt; ExecuteInPool[çº¿ç¨‹æ± æ‰§è¡Œ]

    MarkExecuted --&gt; BuildChain[æ„å»ºæ‹¦æˆªå™¨é“¾]
    ExecuteInPool --&gt; BuildChain

    BuildChain --&gt; Interceptor1[RetryAndFollowUp&lt;br/&gt;é‡è¯•å’Œé‡å®šå‘]
    Interceptor1 --&gt; Interceptor2[BridgeInterceptor&lt;br/&gt;æ¡¥æ¥æ‹¦æˆªå™¨]
    Interceptor2 --&gt; Interceptor3[CacheInterceptor&lt;br/&gt;ç¼“å­˜æ‹¦æˆªå™¨]

    Interceptor3 --&gt; CheckCache{æ£€æŸ¥ç¼“å­˜}
    CheckCache --&gt;|æœ‰æ•ˆç¼“å­˜| ReturnCache[è¿”å›ç¼“å­˜å“åº”]
    CheckCache --&gt;|æ— ç¼“å­˜/å¤±æ•ˆ| Interceptor4[ConnectInterceptor&lt;br/&gt;è¿æ¥æ‹¦æˆªå™¨]

    Interceptor4 --&gt; FindConnection{æŸ¥æ‰¾è¿æ¥}
    FindConnection --&gt;|æ± ä¸­æœ‰å¯ç”¨è¿æ¥| ReuseConnection[å¤ç”¨è¿æ¥]
    FindConnection --&gt;|æ— å¯ç”¨è¿æ¥| CreateConnection[åˆ›å»ºæ–°è¿æ¥]

    CreateConnection --&gt; TCPConnect[å»ºç«‹TCPè¿æ¥]
    TCPConnect --&gt; CheckProtocol{åè®®ç±»å‹?}
    CheckProtocol --&gt;|HTTP| HTTP1[HTTP/1.1]
    CheckProtocol --&gt;|HTTPS| TLSHandshake[TLSæ¡æ‰‹]
    TLSHandshake --&gt; CheckHTTP2{æ˜¯å¦æ”¯æŒHTTP/2?}
    CheckHTTP2 --&gt;|æ˜¯| HTTP2[HTTP/2]
    CheckHTTP2 --&gt;|å¦| HTTP1

    ReuseConnection --&gt; AddToPool[åŠ å…¥è¿æ¥æ± ]
    HTTP1 --&gt; AddToPool
    HTTP2 --&gt; AddToPool

    AddToPool --&gt; Interceptor5[CallServerInterceptor&lt;br/&gt;è¯·æ±‚æœåŠ¡å™¨]

    Interceptor5 --&gt; WriteRequest[å†™å…¥è¯·æ±‚]
    WriteRequest --&gt; WriteHeaders[å†™å…¥è¯·æ±‚å¤´]
    WriteHeaders --&gt; CheckBody{æœ‰è¯·æ±‚ä½“?}
    CheckBody --&gt;|æ˜¯| WriteBody[å†™å…¥è¯·æ±‚ä½“]
    CheckBody --&gt;|å¦| ReadResponse[è¯»å–å“åº”]
    WriteBody --&gt; ReadResponse

    ReadResponse --&gt; ReadHeaders[è¯»å–å“åº”å¤´]
    ReadHeaders --&gt; ReadBody[è¯»å–å“åº”ä½“]

    ReadBody --&gt; CheckStatus{æ£€æŸ¥çŠ¶æ€ç }
    CheckStatus --&gt;|3xx| CheckRedirect{æ˜¯å¦é‡å®šå‘?}
    CheckRedirect --&gt;|æ˜¯| Interceptor1
    CheckRedirect --&gt;|å¦| ProcessResponse

    CheckStatus --&gt;|2xx/4xx/5xx| ProcessResponse[å¤„ç†å“åº”]

    ReturnCache --&gt; ProcessResponse
    ProcessResponse --&gt; SaveCache{æ˜¯å¦å¯ç¼“å­˜?}
    SaveCache --&gt;|æ˜¯| WriteCache[å†™å…¥ç¼“å­˜]
    SaveCache --&gt;|å¦| ReturnResponse

    WriteCache --&gt; ReturnResponse[è¿”å›Response]

    ReturnResponse --&gt; FinishCall{æ‰§è¡Œç±»å‹?}
    FinishCall --&gt;|åŒæ­¥| RemoveSync[ä»åŒæ­¥é˜Ÿåˆ—ç§»é™¤]
    FinishCall --&gt;|å¼‚æ­¥| RemoveAsync[ä»å¼‚æ­¥é˜Ÿåˆ—ç§»é™¤]

    RemoveAsync --&gt; PromoteWaiting[æå‡ç­‰å¾…é˜Ÿåˆ—]
    PromoteWaiting --&gt; ExecuteNext[æ‰§è¡Œä¸‹ä¸€ä¸ªè¯·æ±‚]

    RemoveSync --&gt; End([è¯·æ±‚å®Œæˆ])
    ExecuteNext --&gt; End

    style Start fill:#e1f5e1
    style End fill:#ffe1e1
    style CheckCache fill:#fff4e1
    style FindConnection fill:#e1f0ff
    style CheckStatus fill:#ffe1f0
</code></pre>
<h3 data-id="heading-10">æ ¸å¿ƒç±»å…³ç³»è¯´æ˜</h3>
<h4 data-id="heading-11">1. OkHttpClient</h4>
<ul>
<li><strong>èŒè´£</strong>: æ¡†æ¶å…¥å£ï¼Œç®¡ç†å…¨å±€é…ç½®</li>
<li><strong>æ ¸å¿ƒæˆå‘˜</strong>:
<ul>
<li><code>Dispatcher</code>: è°ƒåº¦å™¨ï¼Œç®¡ç†å¼‚æ­¥è¯·æ±‚é˜Ÿåˆ—</li>
<li><code>ConnectionPool</code>: è¿æ¥æ± ï¼Œç®¡ç†è¿æ¥å¤ç”¨</li>
<li><code>List&lt;Interceptor&gt;</code>: åº”ç”¨æ‹¦æˆªå™¨åˆ—è¡¨</li>
<li><code>List&lt;Interceptor&gt;</code>: ç½‘ç»œæ‹¦æˆªå™¨åˆ—è¡¨</li>
<li><code>Cache</code>: ç¼“å­˜ç®¡ç†å™¨</li>
</ul>
</li>
<li><strong>é…ç½®é¡¹</strong>:
<ul>
<li>è¶…æ—¶æ—¶é—´(è¿æ¥ã€è¯»ã€å†™)</li>
<li>ä»£ç†è®¾ç½®</li>
<li>SSLé…ç½®</li>
<li>Cookieç®¡ç†å™¨</li>
<li>DNSè§£æå™¨</li>
</ul>
</li>
</ul>
<h4 data-id="heading-12">2. RealCall</h4>
<ul>
<li><strong>èŒè´£</strong>: çœŸæ­£çš„Callå®ç°ï¼Œå°è£…å•ä¸ªHTTPè¯·æ±‚</li>
<li><strong>æ ¸å¿ƒæ–¹æ³•</strong>:
<ul>
<li><code>execute()</code>: åŒæ­¥æ‰§è¡Œ</li>
<li><code>enqueue(Callback)</code>: å¼‚æ­¥æ‰§è¡Œ</li>
<li><code>cancel()</code>: å–æ¶ˆè¯·æ±‚</li>
<li><code>getResponseWithInterceptorChain()</code>: æ‰§è¡Œæ‹¦æˆªå™¨é“¾</li>
</ul>
</li>
<li><strong>çŠ¶æ€ç®¡ç†</strong>:
<ul>
<li><code>executed</code>: æ˜¯å¦å·²æ‰§è¡Œ</li>
<li><code>canceled</code>: æ˜¯å¦å·²å–æ¶ˆ</li>
</ul>
</li>
</ul>
<h4 data-id="heading-13">3. Dispatcher</h4>
<ul>
<li><strong>èŒè´£</strong>: è¯·æ±‚è°ƒåº¦å™¨ï¼Œç®¡ç†å¹¶å‘ç­–ç•¥</li>
<li><strong>æ ¸å¿ƒæˆå‘˜</strong>:
<ul>
<li><code>ExecutorService</code>: çº¿ç¨‹æ± </li>
<li><code>Deque&lt;AsyncCall&gt; readyAsyncCalls</code>: ç­‰å¾…é˜Ÿåˆ—</li>
<li><code>Deque&lt;AsyncCall&gt; runningAsyncCalls</code>: è¿è¡Œé˜Ÿåˆ—</li>
<li><code>Deque&lt;RealCall&gt; runningSyncCalls</code>: åŒæ­¥è°ƒç”¨é˜Ÿåˆ—</li>
</ul>
</li>
<li><strong>å¹¶å‘æ§åˆ¶</strong>:
<ul>
<li>æœ€å¤§å¹¶å‘è¯·æ±‚æ•°: 64</li>
<li>å•Hostæœ€å¤§å¹¶å‘: 5</li>
<li><code>promoteAndExecute()</code>: æå‡ç­‰å¾…é˜Ÿåˆ—ä¸­çš„è¯·æ±‚</li>
</ul>
</li>
</ul>
<h4 data-id="heading-14">4. RealInterceptorChain</h4>
<ul>
<li><strong>èŒè´£</strong>: æ‹¦æˆªå™¨é“¾çš„å®ç°ï¼Œè´£ä»»é“¾æ¨¡å¼</li>
<li><strong>æ ¸å¿ƒæˆå‘˜</strong>:
<ul>
<li><code>List&lt;Interceptor&gt; interceptors</code>: æ‹¦æˆªå™¨åˆ—è¡¨</li>
<li><code>int index</code>: å½“å‰æ‹¦æˆªå™¨ç´¢å¼•</li>
<li><code>Request request</code>: å½“å‰è¯·æ±‚</li>
<li><code>Call call</code>: å…³è”çš„Callå¯¹è±¡</li>
</ul>
</li>
<li><strong>æ ¸å¿ƒæ–¹æ³•</strong>:
<ul>
<li><code>proceed(Request)</code>: ç»§ç»­æ‰§è¡Œä¸‹ä¸€ä¸ªæ‹¦æˆªå™¨</li>
</ul>
</li>
</ul>
<h4 data-id="heading-15">5. å†…ç½®æ‹¦æˆªå™¨</h4>
<h5 data-id="heading-16">RetryAndFollowUpInterceptor</h5>
<ul>
<li><strong>èŒè´£</strong>: é‡è¯•å’Œé‡å®šå‘</li>
<li><strong>åŠŸèƒ½</strong>:
<ul>
<li>åˆ›å»ºStreamAllocation</li>
<li>å¤„ç†è¿æ¥å¤±è´¥é‡è¯•</li>
<li>å¤„ç†é‡å®šå‘(3xxçŠ¶æ€ç )</li>
<li>æœ€å¤§é‡å®šå‘æ¬¡æ•°: 20</li>
</ul>
</li>
</ul>
<h5 data-id="heading-17">BridgeInterceptor</h5>
<ul>
<li><strong>èŒè´£</strong>: æ¡¥æ¥åº”ç”¨å±‚å’Œç½‘ç»œå±‚</li>
<li><strong>åŠŸèƒ½</strong>:
<ul>
<li>æ·»åŠ å¿…è¦çš„è¯·æ±‚å¤´(Hostã€Content-Typeç­‰)</li>
<li>å¤„ç†Cookie</li>
<li>å¤„ç†gzipå‹ç¼©</li>
<li>ä¿å­˜å“åº”Cookie</li>
</ul>
</li>
</ul>
<h5 data-id="heading-18">CacheInterceptor</h5>
<ul>
<li><strong>èŒè´£</strong>: ç¼“å­˜ç®¡ç†</li>
<li><strong>åŠŸèƒ½</strong>:
<ul>
<li>è¯»å–ç¼“å­˜</li>
<li>ç¼“å­˜ç­–ç•¥(CacheStrategy)</li>
<li>å¤„ç†304 Not Modified</li>
<li>å†™å…¥ç¼“å­˜</li>
</ul>
</li>
</ul>
<h5 data-id="heading-19">ConnectInterceptor</h5>
<ul>
<li><strong>èŒè´£</strong>: å»ºç«‹è¿æ¥</li>
<li><strong>åŠŸèƒ½</strong>:
<ul>
<li>ä»è¿æ¥æ± è·å–è¿æ¥</li>
<li>åˆ›å»ºæ–°è¿æ¥(TCPã€TLS)</li>
<li>HTTP/2åå•†</li>
<li>å°†è¿æ¥åŠ å…¥è¿æ¥æ± </li>
</ul>
</li>
</ul>
<h5 data-id="heading-20">CallServerInterceptor</h5>
<ul>
<li><strong>èŒè´£</strong>: å‘é€è¯·æ±‚å’Œæ¥æ”¶å“åº”</li>
<li><strong>åŠŸèƒ½</strong>:
<ul>
<li>å†™å…¥è¯·æ±‚å¤´å’Œè¯·æ±‚ä½“</li>
<li>è¯»å–å“åº”å¤´å’Œå“åº”ä½“</li>
<li>å¤„ç†100-continue</li>
<li>å¤„ç†åˆ†å—ä¼ è¾“ç¼–ç </li>
</ul>
</li>
</ul>
<h4 data-id="heading-21">6. ConnectionPool</h4>
<ul>
<li><strong>èŒè´£</strong>: HTTPè¿æ¥æ± ç®¡ç†</li>
<li><strong>æ ¸å¿ƒé…ç½®</strong>:
<ul>
<li>æœ€å¤§ç©ºé—²è¿æ¥æ•°: 5</li>
<li>è¿æ¥ä¿æ´»æ—¶é—´: 5åˆ†é’Ÿ</li>
</ul>
</li>
<li><strong>æ ¸å¿ƒæ–¹æ³•</strong>:
<ul>
<li><code>get(Address, Call)</code>: è·å–å¯ç”¨è¿æ¥</li>
<li><code>put(RealConnection)</code>: æ·»åŠ è¿æ¥åˆ°æ± </li>
<li><code>cleanup()</code>: æ¸…ç†è¿‡æœŸè¿æ¥</li>
</ul>
</li>
<li><strong>æ¸…ç†ç­–ç•¥</strong>:
<ul>
<li>åå°çº¿ç¨‹å®šæœŸæ¸…ç†</li>
<li>æ¸…ç†ç©ºé—²è¶…æ—¶çš„è¿æ¥</li>
<li>æ¸…ç†è¶…è¿‡æœ€å¤§ç©ºé—²æ•°çš„è¿æ¥</li>
</ul>
</li>
</ul>
<h4 data-id="heading-22">7. RealConnection</h4>
<ul>
<li><strong>èŒè´£</strong>: çœŸæ­£çš„ç‰©ç†è¿æ¥</li>
<li><strong>æ ¸å¿ƒæˆå‘˜</strong>:
<ul>
<li><code>Socket rawSocket</code>: TCP Socket</li>
<li><code>Socket socket</code>: å¯èƒ½æ˜¯TLSåŒ…è£…çš„Socket</li>
<li><code>Protocol protocol</code>: HTTP/1.1 æˆ– HTTP/2</li>
<li><code>Http2Connection http2Connection</code>: HTTP/2è¿æ¥</li>
</ul>
</li>
<li><strong>ç”Ÿå‘½å‘¨æœŸ</strong>:
<ul>
<li>å»ºç«‹è¿æ¥(connect)</li>
<li>æ‰§è¡Œè¯·æ±‚(å¯å¤ç”¨)</li>
<li>ç©ºé—²å›æ”¶</li>
</ul>
</li>
</ul>
<h4 data-id="heading-23">8. Cache</h4>
<ul>
<li><strong>èŒè´£</strong>: HTTPç¼“å­˜å®ç°</li>
<li><strong>åº•å±‚å®ç°</strong>: DiskLruCache</li>
<li><strong>ç¼“å­˜é”®</strong>: URLçš„MD5å“ˆå¸Œ</li>
<li><strong>ç¼“å­˜å†…å®¹</strong>:
<ul>
<li>å“åº”å¤´(Journalæ–‡ä»¶)</li>
<li>å“åº”ä½“(å•ç‹¬çš„ç¼“å­˜æ–‡ä»¶)</li>
</ul>
</li>
<li><strong>ç¼“å­˜ç­–ç•¥</strong>:
<ul>
<li>éµå¾ªHTTPç¼“å­˜è§„èŒƒ</li>
<li>Cache-Controlã€Expiresã€ETagã€Last-Modified</li>
</ul>
</li>
</ul>
<h4 data-id="heading-24">9. Http2Connection</h4>
<ul>
<li><strong>èŒè´£</strong>: HTTP/2è¿æ¥ç®¡ç†</li>
<li><strong>æ ¸å¿ƒç‰¹æ€§</strong>:
<ul>
<li>å¤šè·¯å¤ç”¨: å•ä¸ªè¿æ¥æ”¯æŒå¤šä¸ªæµ</li>
<li>æµé‡æ§åˆ¶: Window sizeç®¡ç†</li>
<li>æœåŠ¡å™¨æ¨é€</li>
<li>å¤´éƒ¨å‹ç¼©(HPACK)</li>
</ul>
</li>
<li><strong>æ ¸å¿ƒæˆå‘˜</strong>:
<ul>
<li><code>Map&lt;Integer, Http2Stream&gt; streams</code>: æµæ˜ å°„è¡¨</li>
<li><code>Settings peerSettings</code>: å¯¹ç«¯é…ç½®</li>
<li><code>Settings okHttpSettings</code>: æœ¬åœ°é…ç½®</li>
</ul>
</li>
</ul>
<h4 data-id="heading-25">10. WebSocket</h4>
<ul>
<li><strong>èŒè´£</strong>: WebSocketåè®®æ”¯æŒ</li>
<li><strong>æ ¸å¿ƒç»„ä»¶</strong>:
<ul>
<li><code>RealWebSocket</code>: WebSocketå®ç°</li>
<li><code>WebSocketReader</code>: è¯»å–WebSocketå¸§</li>
<li><code>WebSocketWriter</code>: å†™å…¥WebSocketå¸§</li>
</ul>
</li>
<li><strong>å¸§ç±»å‹</strong>:
<ul>
<li>TEXT: æ–‡æœ¬æ¶ˆæ¯</li>
<li>BINARY: äºŒè¿›åˆ¶æ¶ˆæ¯</li>
<li>PING/PONG: å¿ƒè·³</li>
<li>CLOSE: å…³é—­è¿æ¥</li>
</ul>
</li>
</ul>
<h3 data-id="heading-26">OkHttp ç‰¹æ€§æ€»ç»“</h3>
<h4 data-id="heading-27">å¹¶å‘ç­–ç•¥</h4>
<ul>
<li><strong>å¼‚æ­¥è¯·æ±‚</strong>: é€šè¿‡Dispatcherç®¡ç†çº¿ç¨‹æ± </li>
<li><strong>æœ€å¤§å¹¶å‘</strong>: å…¨å±€64ä¸ªï¼Œå•Host 5ä¸ª</li>
<li><strong>é˜Ÿåˆ—ç®¡ç†</strong>: ç­‰å¾…é˜Ÿåˆ—è‡ªåŠ¨æå‡åˆ°è¿è¡Œé˜Ÿåˆ—</li>
</ul>
<h4 data-id="heading-28">è¿æ¥ç®¡ç†</h4>
<ul>
<li><strong>è¿æ¥å¤ç”¨</strong>: ConnectionPoolç®¡ç†è¿æ¥æ± </li>
<li><strong>HTTP/1.1</strong>: Keep-Aliveä¿æŒè¿æ¥</li>
<li><strong>HTTP/2</strong>: å¤šè·¯å¤ç”¨ï¼Œå•è¿æ¥å¤šæµ</li>
<li><strong>è‡ªåŠ¨æ¸…ç†</strong>: åå°çº¿ç¨‹å®šæœŸæ¸…ç†è¿‡æœŸè¿æ¥</li>
</ul>
<h4 data-id="heading-29">ç¼“å­˜ç­–ç•¥</h4>
<ul>
<li><strong>DiskLruCache</strong>: åŸºäºç£ç›˜çš„LRUç¼“å­˜</li>
<li><strong>HTTPè§„èŒƒ</strong>: éµå¾ªRFC 7234ç¼“å­˜è§„èŒƒ</li>
<li><strong>æ¡ä»¶è¯·æ±‚</strong>: æ”¯æŒIf-None-Matchã€If-Modified-Since</li>
<li><strong>é€æ˜å‹ç¼©</strong>: è‡ªåŠ¨å¤„ç†gzipå‹ç¼©</li>
</ul>
<h4 data-id="heading-30">åè®®æ”¯æŒ</h4>
<ul>
<li><strong>HTTP/1.1</strong>: åŸºç¡€åè®®</li>
<li><strong>HTTP/2</strong>: å¤šè·¯å¤ç”¨ã€æœåŠ¡å™¨æ¨é€</li>
<li><strong>HTTPS</strong>: TLS/SSLæ”¯æŒ</li>
<li><strong>WebSocket</strong>: å…¨åŒå·¥é€šä¿¡</li>
</ul>
<h4 data-id="heading-31">æ‹¦æˆªå™¨æœºåˆ¶</h4>
<ul>
<li><strong>è´£ä»»é“¾æ¨¡å¼</strong>: çµæ´»çš„è¯·æ±‚/å“åº”å¤„ç†</li>
<li><strong>åº”ç”¨æ‹¦æˆªå™¨</strong>: æœ€å¤–å±‚ï¼Œçœ‹åˆ°çš„æ˜¯åº”ç”¨å±‚çš„è¯·æ±‚/å“åº”</li>
<li><strong>ç½‘ç»œæ‹¦æˆªå™¨</strong>: ç½‘ç»œå±‚ï¼Œçœ‹åˆ°çš„æ˜¯å®é™…ç½‘ç»œä¼ è¾“çš„è¯·æ±‚/å“åº”</li>
<li><strong>å†…ç½®æ‹¦æˆªå™¨</strong>: é‡è¯•ã€æ¡¥æ¥ã€ç¼“å­˜ã€è¿æ¥ã€è¯·æ±‚æœåŠ¡å™¨</li>
</ul>
<hr/>
<blockquote>
<p>æœ¬æ–‡æ¡£æ·±å…¥å‰–æäº†OkHttp3æ¡†æ¶çš„å†…éƒ¨å·¥ä½œæœºåˆ¶ï¼Œæ¶µç›–äº†ä»å®¢æˆ·ç«¯åˆ›å»ºåˆ°è¯·æ±‚æ‰§è¡Œçš„å®Œæ•´æµç¨‹ï¼ŒåŒ…æ‹¬è¿æ¥æ± ã€ç¼“å­˜ã€HTTP/2ã€WebSocketç­‰é«˜çº§ç‰¹æ€§ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ„å»ºAIæ™ºèƒ½ä½“ï¼šä¸ƒåäºŒã€äº¤å‰éªŒè¯ï¼šä»æ¨¡å‹è¯„ä¼°çš„åŸºçŸ³åˆ°å¤§æ¨¡å‹æ—¶ä»£çš„æ¼”è¿›]]></title>    <link>https://juejin.cn/post/7590469811408584731</link>    <guid>https://juejin.cn/post/7590469811408584731</guid>    <pubDate>2026-01-03T03:13:17.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7590469811408584731" data-draft-id="7590452143016247334" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ„å»ºAIæ™ºèƒ½ä½“ï¼šä¸ƒåäºŒã€äº¤å‰éªŒè¯ï¼šä»æ¨¡å‹è¯„ä¼°çš„åŸºçŸ³åˆ°å¤§æ¨¡å‹æ—¶ä»£çš„æ¼”è¿›"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,Python,LLM"/> <meta itemprop="datePublished" content="2026-01-03T03:13:17.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å½¼å²¸èŠ±å¼€äº†å—"/> <meta itemprop="url" content="https://juejin.cn/user/4153315734334538"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ„å»ºAIæ™ºèƒ½ä½“ï¼šä¸ƒåäºŒã€äº¤å‰éªŒè¯ï¼šä»æ¨¡å‹è¯„ä¼°çš„åŸºçŸ³åˆ°å¤§æ¨¡å‹æ—¶ä»£çš„æ¼”è¿›
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4153315734334538/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å½¼å²¸èŠ±å¼€äº†å—
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-03T03:13:17.000Z" title="Sat Jan 03 2026 03:13:17 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€. å‰è¨€</h2>
<p>åœ¨æœºå™¨å­¦ä¹ çš„æ ¸å¿ƒå·¥ä½œæµä¸­ï¼Œæ¨¡å‹è¯„ä¼°ä¸é€‰æ‹©æ˜¯ç¡®ä¿æœ€ç»ˆæ¨¡å‹æ³›åŒ–èƒ½åŠ›çš„å…³é”®ã€‚å½“æ•°æ®æœ‰é™æ—¶ï¼Œå¦‚ä½•å‡†ç¡®è¯„ä¼°æ¨¡å‹æ€§èƒ½ã€é¿å…è¿‡æ‹Ÿåˆæˆä¸ºæ ¸å¿ƒæŒ‘æˆ˜ã€‚äº¤å‰éªŒè¯ä½œä¸ºä¸€ç§å¼ºå¤§è€Œç»å…¸çš„ç»Ÿè®¡æ–¹æ³•ï¼Œé€šè¿‡æœ€å¤§é™åº¦åœ°åˆ©ç”¨æœ‰é™æ•°æ®ï¼Œä¸ºæˆ‘ä»¬æä¾›äº†å¯¹æ¨¡å‹æ€§èƒ½æ›´ç¨³å¥ã€æ›´æ— åçš„ä¼°è®¡ã€‚å®ƒä¸ä»…æ˜¯ä¼ ç»Ÿæœºå™¨å­¦ä¹ ä¸­æ¨¡å‹é€‰æ‹©ä¸è¶…å‚æ•°è°ƒä¼˜çš„é»„é‡‘æ ‡å‡†ï¼Œæ›´ä»¥å…¶â€œé‡å¤åˆ©ç”¨ä¸å¹³å‡éªŒè¯â€çš„æ ¸å¿ƒç†å¿µï¼Œæ·±åˆ»å½±å“äº†ç°ä»£æœºå™¨å­¦ä¹ çš„å·¥ä½œèŒƒå¼ã€‚</p>
<p>ä»Šå¤©æˆ‘ä»¬å°†æ·±å…¥æµ…å‡ºåœ°è§£æäº¤å‰éªŒè¯çš„æ€æƒ³èµ·æºä¸æ•°å­¦åŸºç¡€ï¼Œè¯¦ç»†å‰–ækæŠ˜äº¤å‰éªŒè¯ç­‰ä¸»æµå˜ä½“çš„å·¥ä½œæœºåˆ¶ä¸å®ç°ç»†èŠ‚ï¼Œå¹¶ç³»ç»Ÿå±•ç¤ºå…¶å¦‚ä½•ç§‘å­¦åœ°æŒ‡å¯¼æ¨¡å‹æ¯”è¾ƒä¸è¶…å‚æ•°ä¼˜åŒ–ã€‚éšç€æˆ‘ä»¬è¿›å…¥å¤§æ¨¡å‹æ—¶ä»£ï¼Œé¢å¯¹åƒäº¿å‚æ•°ä¸æµ·é‡æ•°æ®ï¼Œäº¤å‰éªŒè¯çš„ä¼ ç»Ÿå½¢å¼æ­£ç»å†æ·±åˆ»æ¼”å˜ã€‚æˆ‘ä»¬å°†æ¢è®¨å…¶åœ¨å¤§è§„æ¨¡é¢„è®­ç»ƒã€æŒ‡ä»¤å¾®è°ƒç­‰æ–°åœºæ™¯ä¸‹é¢ä¸´çš„æŒ‘æˆ˜ä¸é€‚åº”æ€§è°ƒæ•´ï¼Œæ­ç¤ºè¿™ä¸€ç»å…¸æ–¹æ³•åœ¨ç°ä»£AIå®è·µä¸­çš„å…¨æ–°å®šä½ä¸ä»·å€¼å»¶ç»­ã€‚ä»åŸºç¡€åŸç†åˆ°å‰æ²¿åº”ç”¨ï¼Œæ„å»ºäº¤å‰éªŒè¯çš„å®Œæ•´çŸ¥è¯†ä½“ç³»ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/84828a7b43e54c0fb95979f4fb4a7ebb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b285bK46Iqx5byA5LqG5ZCX:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768014881&amp;x-signature=WlxahjtF6%2BJj9Y2wGQws%2FpGxfQI%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-1">äºŒã€ä»€ä¹ˆæ˜¯äº¤å‰éªŒè¯</h2>
<p>å½“æˆ‘ä»¬å¼€å‘ä¸€ä¸ªé¢„æµ‹æ¨¡å‹æ—¶ï¼Œæœ€å¤§çš„æŒ‘æˆ˜æ˜¯å¦‚ä½•å‡†ç¡®åˆ¤æ–­è¿™ä¸ªæ¨¡å‹åœ¨æœªçŸ¥æ•°æ®ä¸Šçš„è¡¨ç°ã€‚å¦‚æœä»…ä»…ä½¿ç”¨å•æ¬¡çš„æ•°æ®åˆ’åˆ†ï¼Œæ¯”å¦‚ç”¨70%æ•°æ®è®­ç»ƒã€30%æ•°æ®æµ‹è¯•ï¼Œè¯„ä¼°ç»“æœå¾€å¾€ä¼šå—åˆ°å…·ä½“åˆ’åˆ†æ–¹å¼çš„å¼ºçƒˆå½±å“ã€‚è¿™ç§åˆ’åˆ†å¯èƒ½æ°å¥½è®©æ¨¡å‹ç¢°ä¸Šå¥½è¿ï¼Œä¹Ÿå¯èƒ½è®©æ¨¡å‹é­é‡ä¸æµ‹ï¼Œä»è€Œå¯¼è‡´æˆ‘ä»¬å¯¹æ¨¡å‹æ€§èƒ½äº§ç”Ÿè¿‡äºä¹è§‚æˆ–æ‚²è§‚çš„è¯¯åˆ¤ã€‚</p>
<p>äº¤å‰éªŒè¯çš„ç²¾å¦™ä¹‹å¤„å°±åœ¨äºå®ƒé‡‡ç”¨äº†ä¸€ç§è½®æ¢éªŒè¯çš„æœºåˆ¶ã€‚ä»¥æœ€å¸¸ç”¨çš„5æŠ˜äº¤å‰éªŒè¯ä¸ºä¾‹ï¼Œå®ƒå°†åŸå§‹æ•°æ®éšæœºå‡åŒ€åˆ†æˆ5ä¸ªäº’æ–¥çš„å­é›†ã€‚åœ¨æ¯ä¸€è½®éªŒè¯ä¸­ï¼Œå…¶ä¸­ä¸€ä¸ªå­é›†æ‰®æ¼”éªŒè¯é›†çš„è§’è‰²ï¼Œç”¨æ¥æµ‹è¯•æ¨¡å‹æ€§èƒ½ï¼Œè€Œå…¶ä½™å››ä¸ªå­é›†åˆ™å…±åŒç»„æˆè®­ç»ƒé›†ï¼Œç”¨äºæ¨¡å‹æ„å»ºã€‚è¿™ä¸ªè¿‡ç¨‹é‡å¤è¿›è¡Œ5æ¬¡ï¼Œç¡®ä¿æ¯ä¸ªæ•°æ®å­é›†éƒ½æœ‰æœºä¼šè¢«ç”¨ä½œéªŒè¯é›†ï¼Œæœ€ç»ˆå°†5æ¬¡éªŒè¯ç»“æœè¿›è¡Œå¹³å‡ï¼Œå¾—åˆ°æ¨¡å‹çš„ç»¼åˆæ€§èƒ½è¯„åˆ†ã€‚</p>
<p><strong>è¿™ç§æ–¹æ³•å¸¦æ¥äº†ä¸¤ä¸ªå…³é”®ä¼˜åŠ¿ï¼š</strong></p>
<ul>
<li>é¦–å…ˆï¼Œå®ƒæå¤§åœ°é™ä½äº†è¯„ä¼°ç»“æœçš„éšæœºæ€§ï¼Œä½¿å¾—æ€§èƒ½ä¼°è®¡æ›´åŠ ç¨³å®šå’Œå¯é ã€‚æ— è®ºæ•°æ®å¦‚ä½•åˆ†å¸ƒï¼Œé€šè¿‡è¿™ç§è½®æ¢æµ‹è¯•å¾—åˆ°çš„å¹³å‡æˆç»©éƒ½èƒ½å¤Ÿæ›´çœŸå®åœ°åæ˜ æ¨¡å‹çš„æ³›åŒ–èƒ½åŠ›ã€‚</li>
<li>å…¶æ¬¡ï¼Œå®ƒæœ€å¤§é™åº¦åœ°åˆ©ç”¨äº†æœ‰é™çš„æ•°æ®èµ„æºï¼Œè®©å‡ ä¹æ‰€æœ‰çš„æ ·æœ¬éƒ½æ—¢å‚ä¸äº†è®­ç»ƒåˆå‚ä¸äº†éªŒè¯ï¼Œè¿™å¯¹äºæ•°æ®ç¨€ç¼ºçš„åœºæ™¯å°¤å…¶å®è´µã€‚</li>
</ul>
<p>ç”¨ä¸€ä¸ªæ›´ç”Ÿæ´»åŒ–çš„ä¾‹å­æ¥é€šä¿—çš„è§£é‡Šäº¤å‰éªŒè¯ï¼Œå¦‚æœæˆ‘ä»¬æƒ³åˆ¤æ–­ä¸€ä½å®¶æ•™è€å¸ˆçš„æ•™å­¦æ°´å¹³å¦‚ä½•ï¼š</p>
<p><strong>1. æ™®é€šçš„æ–¹æ³•ï¼Œå•æ¬¡æµ‹è¯•ï¼š</strong></p>
<ul>
<li>å‡è®¾æˆ‘ä»¬æœ‰10å¥—çœŸé¢˜ï¼Œä¸€èˆ¬æˆ‘ä»¬ä¼šè®©è¿™ä½è€å¸ˆåªç”¨8å¥—çœŸé¢˜è¾…å¯¼å­¦ç”Ÿï¼Œç„¶åç”¨å‰©ä¸‹çš„2å¥—çœŸé¢˜æ¥æµ‹è¯•å­¦ç”Ÿæˆç»©ã€‚</li>
<li>é—®é¢˜ï¼šå¦‚æœæµ‹è¯•ç”¨çš„2å¥—é¢˜æ°å¥½æ˜¯è€å¸ˆé‡ç‚¹è®²è¿‡çš„é¢˜å‹ï¼Œæˆç»©å°±ä¼šè™šé«˜ï¼›åä¹‹ï¼Œå¦‚æœå…¨æ˜¯æ²¡è®²è¿‡çš„å†·é—¨é¢˜ï¼Œæˆç»©å°±ä¼šåä½ï¼Œè¿™ç§è¯„ä¼°æ–¹å¼éå¸¸ä¾èµ–è¿æ°”ã€‚</li>
</ul>
<p><strong>2. äº¤å‰éªŒè¯çš„æ–¹æ³•ï¼Œè½®æ¢æµ‹è¯•ï¼š</strong></p>
<p>æˆ‘ä»¬å¯ä»¥é‡‡ç”¨æ›´ç§‘å­¦çš„æ–¹å¼æ¥è¯„ä¼°ï¼š</p>
<ul>
<li>ç¬¬ä¸€æ­¥ï¼šå‡†å¤‡5å¥—éš¾åº¦ç›¸è¿‘çš„æµ‹è¯•å·ï¼ˆAã€Bã€Cã€Dã€Eï¼‰ã€‚</li>
<li>ç¬¬äºŒæ­¥ï¼šè¿›è¡Œ5è½®æ•™å­¦æµ‹è¯•ï¼š
<ul>
<li>ç¬¬1è½®ï¼šè€å¸ˆç”¨ Bã€Cã€Dã€E å·è¾…å¯¼å­¦ç”Ÿï¼Œç„¶åç”¨ Aå· æµ‹è¯•ï¼Œè®°å½•åˆ†æ•°ã€‚</li>
<li>ç¬¬2è½®ï¼šè€å¸ˆç”¨ Aã€Cã€Dã€E å·è¾…å¯¼å­¦ç”Ÿï¼Œç„¶åç”¨ Bå· æµ‹è¯•ï¼Œè®°å½•åˆ†æ•°ã€‚</li>
<li>é‡å¤è¿™ä¸ªè¿‡ç¨‹ï¼Œç›´åˆ°æ¯å¥—è¯•å·éƒ½å½“è¿‡ä¸€æ¬¡æµ‹è¯•å·ã€‚</li>
</ul>
</li>
<li>ç¬¬ä¸‰æ­¥ï¼šè®¡ç®—è¿™5ä¸ªåˆ†æ•°çš„å¹³å‡å€¼ã€‚</li>
</ul>
<p>è¿™ä¸ªå¹³å‡åˆ†å°±èƒ½å®¢è§‚ã€ç¨³å®šåœ°åæ˜ å‡ºè€å¸ˆçš„çœŸå®æ•™å­¦æ°´å¹³ã€‚</p>
<p><strong>äº¤å‰éªŒè¯ä½“ç°çš„ä»·å€¼ï¼š</strong></p>
<ul>
<li>è¯„ä¼°æ›´å…¬å¹³ï¼šä¸ä¾èµ–æŸä¸€æ¬¡ç‰¹å®šçš„è€ƒè¯•è¿æ°”ï¼Œç»“æœæ›´å…·ä»£è¡¨æ€§ã€‚</li>
<li>æ•°æ®åˆ©ç”¨æ›´é«˜æ•ˆï¼šæ‰€æœ‰è¯•å·éƒ½æ—¢ç”¨äºæ•™å­¦åˆç”¨äºæµ‹è¯•ï¼Œç‰©å°½å…¶ç”¨ã€‚</li>
</ul>
<p>ç»¼ä¸Šæ‰€è¯‰ï¼Œäº¤å‰éªŒè¯å°±åƒä¸€å¥—ä¸¥è°¨çš„æ•™å¸ˆè¯„ä¼°ä½“ç³»ï¼Œé€šè¿‡è½®æ¢æµ‹è¯•å–å¹³å‡åˆ†çš„æ–¹å¼ï¼Œç¡®ä¿è¯„ä¼°ç»“æœçš„å®¢è§‚æ€§å’Œå¯é æ€§ï¼Œå¸®åŠ©æˆ‘ä»¬åšå‡ºæœ€ä½³å†³ç­–ã€‚</p>
<h2 data-id="heading-2">ä¸‰ã€äº¤å‰éªŒè¯çš„ç‰¹ç‚¹</h2>
<p>åœ¨ç†æƒ³æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬æ‹¥æœ‰æ— é™çš„æ•°æ®ã€‚æˆ‘ä»¬å¯ä»¥å°†æ•°æ®åˆ†ä¸ºä¸‰éƒ¨åˆ†ï¼š</p>
<ul>
<li>è®­ç»ƒé›†ï¼šç”¨äºæ„å»ºæ¨¡å‹ã€‚</li>
<li>éªŒè¯é›†ï¼šç”¨äºåœ¨è®­ç»ƒè¿‡ç¨‹ä¸­è¯„ä¼°æ¨¡å‹ï¼ŒæŒ‡å¯¼æ¨¡å‹é€‰æ‹©å’Œè°ƒå‚ã€‚</li>
<li>æµ‹è¯•é›†ï¼šç”¨äºæœ€ç»ˆã€ä¸€æ¬¡æ€§åœ°è¯„ä¼°æ¨¡å‹çš„æ³›åŒ–æ€§èƒ½ï¼Œæ¨¡æ‹ŸçœŸå®ä¸–ç•Œåº”ç”¨ã€‚</li>
</ul>
<p>ç„¶è€Œï¼Œç°å®æ˜¯æ•°æ®é€šå¸¸æœ‰é™ã€‚å¦‚æœæˆ‘ä»¬ç®€å•åœ°ä½¿ç”¨ä¸€ä¸ªå›ºå®šçš„â€œè®­ç»ƒ-éªŒè¯â€åˆ†å‰²ï¼Œä¼šå¼•å…¥ä¸¤ä¸ªä¸»è¦é—®é¢˜ï¼š</p>
<ul>
<li>**1. è¯„ä¼°ç»“æœæ–¹å·®é«˜ï¼š**æ¨¡å‹æ€§èƒ½å¯¹æ•°æ®å¦‚ä½•åˆ†å‰²éå¸¸æ•æ„Ÿã€‚ä¸€æ¬¡å¹¸è¿æˆ–ä¸å¹¸çš„åˆ†å‰²å¯èƒ½å¯¼è‡´æˆ‘ä»¬å¯¹æ¨¡å‹æ€§èƒ½äº§ç”Ÿè¿‡äºä¹è§‚æˆ–æ‚²è§‚çš„ä¼°è®¡ã€‚</li>
<li>**2. æ•°æ®åˆ©ç”¨ä¸å……åˆ†ï¼š**ç‰¹åˆ«æ˜¯å½“æ•°æ®é›†è¾ƒå°æ—¶ï¼Œç•™å‡ºä¸€éƒ¨åˆ†ä½œä¸ºéªŒè¯é›†æ„å‘³ç€æ¨¡å‹æ— æ³•ä»è¿™äº›å®è´µçš„æ•°æ®ä¸­å­¦ä¹ ï¼Œè¿™æœ¬èº«å°±ä¼šå¯¼è‡´æ¨¡å‹æ€§èƒ½ä¸‹é™ã€‚</li>
</ul>
<p>**äº¤å‰éªŒè¯çš„æ ¸å¿ƒç†å¿µï¼š**é€šè¿‡å¤šæ¬¡ã€æœ‰ç»„ç»‡åœ°åˆ’åˆ†è®­ç»ƒé›†å’ŒéªŒè¯é›†ï¼Œè®©æ¯ä¸€ä»½æ•°æ®éƒ½æœ‰æœºä¼šå……å½“è®­ç»ƒé›†å’ŒéªŒè¯é›†ï¼Œä»è€Œå¾—åˆ°å¤šä¸ªæ€§èƒ½è¯„ä¼°å€¼ã€‚æœ€ç»ˆï¼Œæˆ‘ä»¬å–è¿™äº›è¯„ä¼°å€¼çš„å¹³å‡å€¼ä½œä¸ºæ¨¡å‹æ€§èƒ½çš„æœ€ç»ˆä¼°è®¡ã€‚è¿™ç§æ–¹æ³•æ˜¾è‘—é™ä½äº†è¯„ä¼°ç»“æœçš„æ–¹å·®ï¼Œå¹¶æ›´å……åˆ†åœ°åˆ©ç”¨äº†æ•°æ®ã€‚</p>
<h2 data-id="heading-3">å››ã€kæŠ˜äº¤å‰éªŒè¯</h2>
<p>åœ¨ä¼—å¤šäº¤å‰éªŒè¯æ–¹æ³•ä¸­ï¼ŒkæŠ˜äº¤å‰éªŒè¯ æ— ç–‘æ˜¯æœ€å¸¸ç”¨ã€æœ€ç»å…¸çš„ä¸€ç§ã€‚</p>
<p><strong>å·¥ä½œåŸç†ï¼š</strong></p>
<ul>
<li>**1. åˆ†å‰²ï¼š**å°†åŸå§‹è®­ç»ƒæ•°æ®é›†éšæœºã€å‡åŒ€åœ°åˆ†å‰²æˆkä¸ªå¤§å°ç›¸ä¼¼çš„äº’æ–¥å­é›†ï¼Œç§°ä¸ºâ€œæŠ˜â€ï¼Œé€šå¸¸kå–5æˆ–10ã€‚</li>
<li>**2. è¿­ä»£è®­ç»ƒä¸éªŒè¯ï¼š**è¿›è¡Œkæ¬¡è¿­ä»£ã€‚åœ¨æ¯ä¸€æ¬¡è¿­ä»£ i (i=1, 2, ..., k) ä¸­ï¼š
<ul>
<li>å°†ç¬¬ i æŠ˜æ•°æ®ä½œä¸ºéªŒè¯é›†ã€‚</li>
<li>å°†å‰©ä½™çš„ k-1 æŠ˜æ•°æ®åˆå¹¶ï¼Œä½œä¸ºè®­ç»ƒé›†ã€‚</li>
<li>åœ¨è®­ç»ƒé›†ä¸Šè®­ç»ƒæ¨¡å‹ï¼Œå¹¶åœ¨éªŒè¯é›†ä¸Šè¯„ä¼°æ¨¡å‹ï¼Œå¾—åˆ°ä¸€ä¸ªæ€§èƒ½å¾—åˆ† S_iï¼ˆå¦‚å‡†ç¡®ç‡ã€F1åˆ†æ•°ç­‰ï¼‰ã€‚</li>
</ul>
</li>
<li>**3. æ€§èƒ½æ±‡æ€»ï¼š**å®Œæˆkæ¬¡è¿­ä»£åï¼Œæˆ‘ä»¬ä¼šå¾—åˆ°kä¸ªæ€§èƒ½å¾—åˆ† S_1, S_2, ..., S_kã€‚</li>
<li>**4. è®¡ç®—æœ€ç»ˆæ€§èƒ½ï¼š**å°†è¿™kä¸ªå¾—åˆ†å–å¹³å‡å€¼ï¼Œä½œä¸ºè¯¥æ¨¡å‹æ³›åŒ–æ€§èƒ½çš„æœ€ç»ˆä¼°è®¡ï¼š
<ul>
<li>æœ€ç»ˆæ€§èƒ½ = (S_1 + S_2 + ... + S_k) / k</li>
</ul>
</li>
<li>**5. æŠ¥å‘Šä¸ç¡®å®šæ€§ï¼š**åŒæ—¶ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥è®¡ç®—è¿™kä¸ªå¾—åˆ†çš„æ ‡å‡†å·®ï¼Œä»¥è¡¡é‡æ¨¡å‹æ€§èƒ½çš„ç¨³å®šæ€§ã€‚æ ‡å‡†å·®è¶Šå°ï¼Œè¯´æ˜æ¨¡å‹å¯¹æ•°æ®åˆ†å‰²ä¸æ•æ„Ÿï¼Œè¶Šç¨³å®šã€‚</li>
</ul>
<p><strong>æ‰§è¡Œè¿‡ç¨‹ï¼š</strong></p>
<p>å‡è®¾ k=5ï¼Œè¿‡ç¨‹å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<blockquote>
<p>åˆå§‹æ•°æ®é›†: [------------------------------------]<br/>
åˆ†å‰²ä¸º5æŠ˜: [æŠ˜1][æŠ˜2][æŠ˜3][æŠ˜4][æŠ˜5]</p>
<p>è¿­ä»£1: è®­ç»ƒé›†:[æŠ˜2][æŠ˜3][æŠ˜4][æŠ˜5] éªŒè¯é›†:[æŠ˜1] -&gt; å¾—åˆ†S1<br/>
è¿­ä»£2: è®­ç»ƒé›†:[æŠ˜1][æŠ˜3][æŠ˜4][æŠ˜5] éªŒè¯é›†:[æŠ˜2] -&gt; å¾—åˆ†S2<br/>
è¿­ä»£3: è®­ç»ƒé›†:[æŠ˜1][æŠ˜2][æŠ˜4][æŠ˜5] éªŒè¯é›†:[æŠ˜3] -&gt; å¾—åˆ†S3<br/>
è¿­ä»£4: è®­ç»ƒé›†:[æŠ˜1][æŠ˜2][æŠ˜3][æŠ˜5] éªŒè¯é›†:[æŠ˜4] -&gt; å¾—åˆ†S4<br/>
è¿­ä»£5: è®­ç»ƒé›†:[æŠ˜1][æŠ˜2][æŠ˜3][æŠ˜4] éªŒè¯é›†:[æŠ˜5] -&gt; å¾—åˆ†S5</p>
</blockquote>
<p><strong>kå€¼çš„é€‰æ‹©ï¼š</strong></p>
<ul>
<li>kè¾ƒå°ï¼ˆå¦‚k=5ï¼‰ï¼šè®­ç»ƒæˆæœ¬ä½ï¼Œä½†è¯„ä¼°ç»“æœçš„åå·®å¯èƒ½ç•¥é«˜ï¼Œå› ä¸ºè®­ç»ƒé›†ç›¸å¯¹è¾ƒå°ã€‚</li>
<li>kè¾ƒå¤§ï¼ˆå¦‚k=10ï¼‰ï¼šè¯„ä¼°ç»“æœçš„åå·®æ›´ä½ï¼Œæ›´æ¥è¿‘çœŸå®æ³›åŒ–æ€§èƒ½ï¼Œä½†è®­ç»ƒæˆæœ¬æ˜¯k=5çš„ä¸¤å€ã€‚</li>
<li>ç•™ä¸€æ³•äº¤å‰éªŒè¯ï¼škç­‰äºæ ·æœ¬æ•°Nï¼Œè¿™æ˜¯kæŠ˜äº¤å‰éªŒè¯çš„æç«¯æƒ…å†µï¼Œå®ƒèƒ½æœ€æ— ååœ°ä¼°è®¡æ€§èƒ½ï¼Œä½†è®¡ç®—æˆæœ¬æé«˜ï¼Œé€šå¸¸åªç”¨äºæå°å‹æ•°æ®é›†ã€‚</li>
</ul>
<h2 data-id="heading-4">äº”ã€äº¤å‰éªŒè¯åœ¨æ¨¡å‹é€‰æ‹©ä¸­çš„ä½œç”¨</h2>
<p>äº¤å‰éªŒè¯æœ¬èº«æ˜¯ä¸€ä¸ªè¯„ä¼°æ–¹æ³•ï¼Œä½†å…¶å¨åŠ›åœ¨æ¨¡å‹æ¯”è¾ƒå’Œè¶…å‚æ•°ä¼˜åŒ–ä¸­å¾—ä»¥çœŸæ­£ä½“ç°ã€‚</p>
<h3 data-id="heading-5">1. æ¨¡å‹é€‰æ‹©</h3>
<p>å‡è®¾æˆ‘ä»¬éœ€è¦åœ¨é€»è¾‘å›å½’ã€æ”¯æŒå‘é‡æœºå’Œéšæœºæ£®æ—ä¸­é€‰æ‹©ä¸€ä¸ªæœ€ä½³æ¨¡å‹ã€‚æˆ‘ä»¬ä¸èƒ½ç›´æ¥åœ¨æµ‹è¯•é›†ä¸Šæµ‹è¯•å¹¶é€‰æ‹©æœ€å¥½çš„ï¼Œå› ä¸ºè¿™ä¼šå¯¼è‡´ä¿¡æ¯æ³„éœ²ï¼Œä½¿æµ‹è¯•é›†å¤±å»å…¶æœ€ç»ˆè¯„ä¼°çš„æ„ä¹‰ã€‚</p>
<p>**æ­£ç¡®åšæ³•ï¼š**å¯¹æ¯ä¸ªå€™é€‰æ¨¡å‹ï¼Œç‹¬ç«‹è¿›è¡Œä¸€æ¬¡kæŠ˜äº¤å‰éªŒè¯ï¼Œå¾—åˆ°å„è‡ªçš„å¹³å‡æ€§èƒ½å¾—åˆ†ï¼Œç„¶åé€‰æ‹©å¹³å‡å¾—åˆ†æœ€é«˜çš„æ¨¡å‹ï¼Œè¿™ä¸ªè¿‡ç¨‹å®Œå…¨åœ¨åŸå§‹è®­ç»ƒé›†å†…å®Œæˆï¼Œæ²¡æœ‰åŠ¨ç”¨æµ‹è¯•é›†ã€‚</p>
<h3 data-id="heading-6">2. è¶…å‚æ•°è°ƒä¼˜</h3>
<p>è¶…å‚æ•°ä¸æ˜¯ä»æ•°æ®ä¸­å­¦åˆ°çš„ï¼Œéœ€è¦æ‰‹åŠ¨è®¾å®šï¼Œå¯»æ‰¾æœ€ä½³è¶…å‚æ•°ç»„åˆçš„è¿‡ç¨‹å°±æ˜¯è°ƒå‚ï¼Œè¶…å‚æ•°è¯¦ç»†å†…å®¹å¯å‚è€ƒã€Š<a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2Fminhuan%2Farticle%2Fdetails%2F153531971%3Fspm%3D1001.2014.3001.5502" title="https://blog.csdn.net/minhuan/article/details/153531971?spm=1001.2014.3001.5502" target="_blank" ref="nofollow noopener noreferrer">å…­åä¸ƒã€è¶…å‚æ•°å¦‚ä½•å½±å“å¤§æ¨¡å‹ï¼Ÿé€šä¿—è®²è§£åŸç†ã€ä½œç”¨ä¸å®æˆ˜ç¤ºä¾‹</a>ã€‹ã€‚</p>
<ul>
<li>ç½‘æ ¼æœç´¢äº¤å‰éªŒè¯ï¼š
<ul>
<li>ä¸ºæ¯ä¸ªè¶…å‚æ•°å®šä¹‰ä¸€ä¸ªå€™é€‰å€¼åˆ—è¡¨ã€‚</li>
<li>è¿™äº›å€™é€‰å€¼ä¼šç»„æˆä¸€ä¸ªâ€œç½‘æ ¼â€ï¼Œæ¯ä¸ªç½‘æ ¼ç‚¹æ˜¯ä¸€ç»„ç‰¹å®šçš„è¶…å‚æ•°ç»„åˆã€‚</li>
<li>å¯¹ç½‘æ ¼ä¸­çš„æ¯ä¸€ç»„è¶…å‚æ•°ç»„åˆï¼Œæ‰§è¡Œä¸€æ¬¡å®Œæ•´çš„kæŠ˜äº¤å‰éªŒè¯ï¼Œè®¡ç®—å…¶å¹³å‡æ€§èƒ½ã€‚</li>
<li>æœ€ç»ˆï¼Œé€‰æ‹©å¹³å‡æ€§èƒ½æœ€é«˜çš„é‚£ç»„è¶…å‚æ•°ä½œä¸ºæœ€ä¼˜è§£ã€‚</li>
</ul>
</li>
<li>éšæœºæœç´¢äº¤å‰éªŒè¯ï¼š
<ul>
<li>ä¸ç½‘æ ¼æœç´¢ä¸åŒï¼Œå®ƒä¸åœ¨ä¸€ä¸ªå®šä¹‰å¥½çš„ç½‘æ ¼ä¸Šæœç´¢ï¼Œè€Œæ˜¯ä»ä¸€ä¸ªæŒ‡å®šçš„æ¦‚ç‡åˆ†å¸ƒä¸­éšæœºé‡‡æ ·ä¸€å®šæ•°é‡çš„è¶…å‚æ•°ç»„åˆã€‚</li>
<li>å¯¹æ¯ä¸ªéšæœºé‡‡æ ·çš„ç»„åˆæ‰§è¡ŒkæŠ˜äº¤å‰éªŒè¯ã€‚</li>
<li>å®è·µè¯æ˜ï¼Œéšæœºæœç´¢é€šå¸¸æ¯”ç½‘æ ¼æœç´¢æ›´é«˜æ•ˆï¼Œèƒ½ä»¥æ›´å°‘çš„å°è¯•æ¬¡æ•°æ‰¾åˆ°ä¼˜ç§€çš„è¶…å‚æ•°ã€‚</li>
</ul>
</li>
</ul>
<p>é€šè¿‡äº¤å‰éªŒè¯é€‰å‡ºçš„æœ€ä½³æ¨¡å‹æˆ–æœ€ä½³å‚æ•°ï¼Œå…¶æ€§èƒ½æ˜¯é‚£ä¸ªå¹³å‡æ€§èƒ½ã€‚åœ¨å®Œæˆæ‰€æœ‰æ¨¡å‹é€‰æ‹©å’Œè°ƒå‚åï¼Œæˆ‘ä»¬é€šå¸¸ä¼šç”¨è¿™ç»„æœ€ä½³å‚æ•°åœ¨æ•´ä¸ªåŸå§‹è®­ç»ƒé›†ä¸Šé‡æ–°è®­ç»ƒä¸€ä¸ªæœ€ç»ˆæ¨¡å‹ï¼Œç„¶åç”¨ä»æœªå‚ä¸è¿‡ä»»ä½•è¿‡ç¨‹çš„æµ‹è¯•é›†æ¥æŠ¥å‘Šå…¶æœ€ç»ˆçš„ã€æ— åçš„æ€§èƒ½ã€‚</p>
<h2 data-id="heading-7">å…­ã€ ä½¿ç”¨äº¤å‰éªŒè¯è¯„ä¼°åˆ†ç±»æ¨¡å‹</h2>
<p>ä¸‹é¢æˆ‘ä»¬æ¼”ç¤ºä¸€ä¸ªåŸºç¡€ç¤ºä¾‹ï¼Œä½¿ç”¨Scikit-learnåº“å®ç°kæŠ˜äº¤å‰éªŒè¯ã€‚ç”¨äº¤å‰éªŒè¯ç§‘å­¦åœ°åˆ¤æ–­ä¸€ä¸ªæ¨¡å‹çš„å¥½åï¼Œå¹¶æŠŠå®ƒè°ƒæ•´åˆ°æœ€ä½³çŠ¶æ€ã€‚</p>
<h3 data-id="heading-8">1. æ‰§è¡Œæµç¨‹</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/50fa4f227610439988fb505545b0bc2a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b285bK46Iqx5byA5LqG5ZCX:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768014881&amp;x-signature=dXt3bV%2Fp4UZVJ1BzxIzBmNNjbz4%3D" alt="" loading="lazy"/>â€‹</p>
<h3 data-id="heading-9">2. æµç¨‹æ¦‚è¿°</h3>
<ul>
<li>æ ¸å¿ƒè¯„ä¼°ç¯èŠ‚
<ul>
<li>KæŠ˜äº¤å‰éªŒè¯ï¼šé€šè¿‡æ•°æ®è½®æ¢ä½¿ç”¨ï¼Œè·å¾—ç¨³å¥çš„æ€§èƒ½è¯„ä¼°</li>
<li>æ¨¡å‹æ¯”è¾ƒä¸é€‰æ‹©ï¼šåŸºäºäº¤å‰éªŒè¯ç»“æœå®¢è§‚é€‰æ‹©æœ€ä½³æ¨¡å‹</li>
<li>è¶…å‚æ•°è°ƒä¼˜ï¼šä½¿ç”¨äº¤å‰éªŒè¯å¯»æ‰¾æœ€ä¼˜å‚æ•°ç»„åˆ</li>
</ul>
</li>
<li>è¯Šæ–­ä¸åˆ†æç¯èŠ‚
<ul>
<li>å­¦ä¹ æ›²çº¿åˆ†æï¼šè¯Šæ–­æ¨¡å‹æ˜¯å¦è¿‡æ‹Ÿåˆæˆ–æ¬ æ‹Ÿåˆ</li>
<li>æœ€ç»ˆæ¨¡å‹è¯„ä¼°ï¼šåœ¨ç‹¬ç«‹æµ‹è¯•é›†ä¸Šå…¨é¢æ£€éªŒæ¨¡å‹è¡¨ç°</li>
</ul>
</li>
</ul>
<h3 data-id="heading-10">3. ç¤ºä¾‹åˆ†è§£</h3>
<h4 data-id="heading-11">3.1 å‡†å¤‡ç¯å¢ƒå’Œæ•°æ®å¯è§†åŒ–</h4>
<p>ç¤ºä¾‹é‡‡ç”¨çš„æ˜¯scikit-learnåº“çš„é¸¢å°¾èŠ±æ•°æ®é›†ï¼Œæ•°æ®é›†åŒ…å«150ä¸ªæ ·æœ¬ï¼Œæ¯ä¸ªæ ·æœ¬æœ‰4ä¸ªç‰¹å¾å’Œ1ä¸ªæ ‡ç­¾ï¼Œåœ¨å‰æœŸæˆ‘ä»¬è®²å†³ç­–æ ‘æ—¶æˆ‘ä»¬ä¸“é—¨è®²è§£è¿‡ï¼Œè¿™é‡Œç®€å•æ¦‚è¿°ä¸€ä¸‹ï¼Œéœ€è¦æ·±å…¥äº†è§£è¯·å‚è€ƒã€Š<a href="https://juejin.cn/post/7576861477267374099" title="https://juejin.cn/post/7576861477267374099" target="_blank">ä¸‰åäº”ã€å†³ç­–æ ‘çš„æ ¸å¿ƒæœºåˆ¶ï¼ˆä¸€ï¼‰ï¼šåˆ¨æ ¹é—®åº•é¸¢å°¾èŠ±åˆ†ç±»ä¸­çš„å‚æ•°æ¨ç†è®¡ç®—</a>ã€‹ã€‚</p>
<p><strong>æ•°æ®é›†åˆåŒ…å«ä¸‰ç§é¸¢å°¾èŠ±ï¼š</strong></p>
<ul>
<li>**Iris Setosaï¼š**å±±é¸¢å°¾ï¼Œæœ€å®¹æ˜“è¯†åˆ«ï¼ŒèŠ±ç“£çŸ­è€Œå®½ï¼ŒèŠ±è¼è¾ƒå¤§ã€‚</li>
<li>**Iris Versicolorï¼š**å˜è‰²é¸¢å°¾ï¼Œä»‹äºå¦å¤–ä¸¤ç§ä¹‹é—´ï¼Œé¢œè‰²å¤šå˜ã€‚</li>
<li>**Iris Virginicaï¼š**ç»´å‰å°¼äºšé¸¢å°¾ï¼Œæœ€å¤§æœ€å£®è§‚ï¼ŒèŠ±ç“£å’ŒèŠ±è¼å°ºå¯¸éƒ½æœ€å¤§ã€‚</li>
</ul>
<p><strong>4ä¸ªç‰¹å¾ï¼ˆé¢„æµ‹ä¾æ®ï¼‰ï¼š</strong></p>
<ul>
<li>sepal length (cm) - èŠ±è¼é•¿åº¦</li>
<li>sepal width (cm) - èŠ±è¼å®½åº¦</li>
<li>petal length (cm) - èŠ±ç“£é•¿åº¦</li>
<li>petal width (cm) - èŠ±ç“£å®½åº¦</li>
</ul>
<p><strong>1ä¸ªæ ‡ç­¾ï¼ˆé¢„æµ‹ç›®æ ‡ï¼‰ï¼š</strong></p>
<ul>
<li>species - å“ç§ï¼ˆ0: Setosa, 1: Versicolor, 2: Virginicaï¼‰</li>
</ul>
<p><strong>æ•°æ®é›†çš„æ„æˆï¼š</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8a0173b1b7634622b8b960c2e84e06da~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b285bK46Iqx5byA5LqG5ZCX:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768014881&amp;x-signature=tDqWcAB8%2FdgV0J9M6U5i1nw8idI%3D" alt="" loading="lazy"/></p>
<p>æ•´ä¸ªæ•°æ®é›†å°±æ˜¯ä¸€ä¸ªå¤§è¡¨æ ¼ï¼Œæœ‰150è¡Œï¼ˆä»£è¡¨150æœµä¸åŒçš„èŠ±ï¼‰å’Œ5åˆ—ã€‚</p>
<p>å“ç§ (æ ‡ç­¾)Â  èŠ±è¼é•¿åº¦Â  Â èŠ±è¼å®½åº¦Â  Â èŠ±ç“£é•¿åº¦Â  Â èŠ±ç“£å®½åº¦<br/>
Iris-setosaÂ  Â  Â  Â  Â  5.1Â  Â  Â  Â 3.5Â  Â  Â  Â  Â  Â  1.4Â  Â  Â  Â  Â  0.2<br/>
Iris-versicolorÂ  Â  Â 7.0Â  Â  Â  Â 3.2Â  Â  Â  Â  Â  Â  4.7Â  Â  Â  Â  Â  1.4<br/>
Iris-virginicaÂ  Â  Â  Â 6.3Â  Â  Â  Â 3.3Â  Â  Â  Â  Â  Â  6.0Â  Â  Â  Â  Â  2.5</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
<span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd
<span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt
<span class="hljs-keyword">import</span> seaborn <span class="hljs-keyword">as</span> sns
<span class="hljs-keyword">from</span> sklearn.datasets <span class="hljs-keyword">import</span> load_iris
<span class="hljs-keyword">from</span> sklearn.model_selection <span class="hljs-keyword">import</span> cross_val_score, KFold, train_test_split, GridSearchCV
<span class="hljs-keyword">from</span> sklearn.ensemble <span class="hljs-keyword">import</span> RandomForestClassifier
<span class="hljs-keyword">from</span> sklearn.linear_model <span class="hljs-keyword">import</span> LogisticRegression
<span class="hljs-keyword">from</span> sklearn.svm <span class="hljs-keyword">import</span> SVC
<span class="hljs-keyword">from</span> sklearn.metrics <span class="hljs-keyword">import</span> classification_report, confusion_matrix
<span class="hljs-keyword">import</span> warnings
warnings.filterwarnings(<span class="hljs-string">'ignore'</span>)

<span class="hljs-comment"># è®¾ç½®ä¸­æ–‡å­—ä½“å’Œå›¾å½¢æ ·å¼</span>
plt.rcParams[<span class="hljs-string">'font.sans-serif'</span>] = [<span class="hljs-string">'SimHei'</span>, <span class="hljs-string">'DejaVu Sans'</span>]
plt.rcParams[<span class="hljs-string">'axes.unicode_minus'</span>] = <span class="hljs-literal">False</span>
sns.set_style(<span class="hljs-string">"whitegrid"</span>)

<span class="hljs-comment"># åŠ è½½æ•°æ®</span>
iris = load_iris()
X = iris.data
y = iris.target
feature_names = iris.feature_names
target_names = iris.target_names

<span class="hljs-built_in">print</span>(<span class="hljs-string">"æ•°æ®é›†æ¢ç´¢"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ•°æ®é›†å½¢çŠ¶: <span class="hljs-subst">{X.shape}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"ç‰¹å¾: <span class="hljs-subst">{feature_names}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"ç±»åˆ«: <span class="hljs-subst">{target_names}</span>"</span>)
</code></pre>
<p><strong>è¾“å‡ºç»“æœï¼š</strong></p>
<blockquote>
<p>æ•°æ®é›†æ¢ç´¢<br/>
æ•°æ®é›†å½¢çŠ¶: (150, 4)<br/>
ç‰¹å¾: ['sepal length (cm)', 'sepal width (cm)', 'petal length (cm)', 'petal width (cm)']<br/>
ç±»åˆ«: ['setosa' 'versicolor' 'virginica']</p>
</blockquote>
<h4 data-id="heading-12">3.2 æ•°æ®åˆ†å¸ƒå¯è§†åŒ–</h4>
<p>åœ¨å»ºæ¨¡ä¹‹å‰ï¼Œå…ˆäº†è§£æˆ‘ä»¬è¦å¤„ç†çš„æ•°æ®ï¼Œé€šè¿‡ç»˜åˆ¶ç‰¹å¾çš„åˆ†å¸ƒç›´æ–¹å›¾ï¼Œåˆ¤æ–­æ•°æ®è´¨é‡ã€ç‰¹å¾åŒºåˆ†åº¦ä»¥åŠä¸åŒç±»åˆ«çš„åˆ†ç¦»æƒ…å†µï¼Œä¸ºåç»­çš„æ¨¡å‹é€‰æ‹©æä¾›åˆæ­¥ä¾æ®ã€‚</p>
<pre><code class="hljs language-scss" lang="scss"># åˆ›å»ºæ•°æ®åˆ†å¸ƒå¯è§†åŒ–
def <span class="hljs-built_in">plot_data_distribution</span>(X, y, feature_names, target_names):
    fig, axes = plt.<span class="hljs-built_in">subplots</span>(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>, figsize=(<span class="hljs-number">15</span>, <span class="hljs-number">10</span>))
    axes = axes.<span class="hljs-built_in">ravel</span>()
    
    # ç‰¹å¾åˆ†å¸ƒ
    for i in <span class="hljs-built_in">range</span>(<span class="hljs-number">4</span>):
        for class_id in <span class="hljs-built_in">range</span>(<span class="hljs-number">3</span>):
            axes[i].<span class="hljs-built_in">hist</span>(X[y == class_id, i], alpha=<span class="hljs-number">0.7</span>, label=target_names[class_id])
        axes[i].<span class="hljs-built_in">set_title</span>(f<span class="hljs-string">'{feature_names[i]} åˆ†å¸ƒ'</span>)
        axes[i].<span class="hljs-built_in">set_xlabel</span>(<span class="hljs-string">'å€¼'</span>)
        axes[i].<span class="hljs-built_in">set_ylabel</span>(<span class="hljs-string">'é¢‘æ•°'</span>)
        axes[i].<span class="hljs-built_in">legend</span>()
    
    plt.<span class="hljs-built_in">tight_layout</span>()
    plt.<span class="hljs-built_in">show</span>()

<span class="hljs-built_in">plot_data_distribution</span>(X, y, feature_names, target_names)
</code></pre>
<p><strong>è¾“å‡ºç»“æœï¼š</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/73ff3100f5ab492c965103114b4a56a1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b285bK46Iqx5byA5LqG5ZCX:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768014881&amp;x-signature=Rx7EQcb%2BNbDcxaEOesZiLVNr8K4%3D" alt="" loading="lazy"/></p>
<p><strong>å›¾ç¤ºå†…å®¹ï¼š</strong></p>
<ul>
<li>æ˜¾ç¤º4ä¸ªç‰¹å¾ï¼ˆèŠ±è¼é•¿åº¦ã€èŠ±è¼å®½åº¦ã€èŠ±ç“£é•¿åº¦ã€èŠ±ç“£å®½åº¦ï¼‰åœ¨3ä¸ªç±»åˆ«é—´çš„åˆ†å¸ƒç›´æ–¹å›¾</li>
<li>æ¯ä¸ªå­å›¾å±•ç¤ºä¸€ä¸ªç‰¹å¾ï¼Œä¸åŒç±»åˆ«ç”¨ä¸åŒé¢œè‰²åŒºåˆ†</li>
</ul>
<h4 data-id="heading-13">3.3 kæŠ˜äº¤å‰éªŒè¯è¿‡ç¨‹å¯è§†åŒ–</h4>
<p>ç›´è§‚æ¼”ç¤ºäº¤å‰éªŒè¯çš„æ ¸å¿ƒåŸç†ï¼Œé€šè¿‡å›¾è¡¨æ¸…æ™°åœ°å±•ç¤ºæ¯ä¸€æŠ˜ä¸­ï¼Œå“ªäº›æ ·æœ¬ç”¨äºè®­ç»ƒï¼ˆè“è‰²ï¼‰ï¼Œå“ªäº›ç”¨äºéªŒè¯ï¼ˆçº¢è‰²ï¼‰ï¼Œå¹¶å®æ—¶æ˜¾ç¤ºè¯¥æŠ˜çš„éªŒè¯å¾—åˆ†ï¼Œæœ€åä½¿ç”¨æŸ±çŠ¶å›¾æ±‡æ€»å¯¹æ¯”å„æŠ˜çš„å‡†ç¡®ç‡ï¼Œä½¿ç»“æœä¸€ç›®äº†ç„¶ï¼Œè¿™å¯ä»¥è®©æˆ‘ä»¬å½»åº•ç†è§£è½®â€œæ¢è€ƒè¯•â€å’Œâ€œå¹³å‡åˆ†â€çš„æ¦‚å¿µã€‚</p>
<pre><code class="hljs language-ini" lang="ini">def visualize_kfold_process(X, y, <span class="hljs-attr">k</span>=<span class="hljs-number">5</span>):
    """å¯è§†åŒ–kæŠ˜äº¤å‰éªŒè¯çš„æ•°æ®åˆ†å‰²è¿‡ç¨‹"""
    <span class="hljs-attr">kf</span> = KFold(n_splits=k, shuffle=<span class="hljs-literal">True</span>, random_state=<span class="hljs-number">42</span>)
    
    fig, <span class="hljs-attr">axes</span> = plt.subplots(<span class="hljs-number">2</span>, <span class="hljs-number">3</span>, figsize=(<span class="hljs-number">15</span>, <span class="hljs-number">10</span>))
    <span class="hljs-attr">axes</span> = axes.ravel()
    
    <span class="hljs-attr">fold_scores</span> = []
    
    for fold, (train_idx, val_idx) in enumerate(kf.split(X)):
        if fold &lt; 6:  <span class="hljs-comment"># åªæ˜¾ç¤ºå‰6ä¸ªå›¾</span>
            <span class="hljs-attr">ax</span> = axes[fold]
            
            <span class="hljs-comment"># åˆ›å»ºåˆ†å‰²å¯è§†åŒ–</span>
            <span class="hljs-attr">split_diagram</span> = np.zeros(len(X))
            split_diagram<span class="hljs-section">[train_idx]</span> = 1  <span class="hljs-comment"># è®­ç»ƒé›†</span>
            split_diagram<span class="hljs-section">[val_idx]</span> = 2    <span class="hljs-comment"># éªŒè¯é›†</span>
            
            <span class="hljs-comment"># ç»˜åˆ¶åˆ†å‰²å›¾</span>
            <span class="hljs-attr">colors</span> = [<span class="hljs-string">'lightgray'</span>, <span class="hljs-string">'blue'</span>, <span class="hljs-string">'red'</span>]
            <span class="hljs-attr">labels</span> = [<span class="hljs-string">'æœªä½¿ç”¨'</span>, <span class="hljs-string">'è®­ç»ƒé›†'</span>, <span class="hljs-string">'éªŒè¯é›†'</span>]
            
            for i, color in enumerate(colors):
                ax.bar(range(len(split_diagram)), 
                      <span class="hljs-section">[1 if x == i else 0 for x in split_diagram]</span>,
                      <span class="hljs-attr">color</span>=color, label=labels[i])
            
            ax.set_title(f'ç¬¬ {fold+1} æŠ˜æ•°æ®åˆ†å‰²\nè®­ç»ƒé›†: {len(train_idx)}æ ·æœ¬, éªŒè¯é›†: {len(val_idx)}æ ·æœ¬')
            ax.set_xlabel('æ ·æœ¬ç´¢å¼•')
            ax.set_ylabel('æ•°æ®ç”¨é€”')
            ax.legend()
            
            <span class="hljs-comment"># è®­ç»ƒæ¨¡å‹å¹¶è®¡ç®—åˆ†æ•°</span>
            <span class="hljs-attr">model</span> = RandomForestClassifier(random_state=<span class="hljs-number">42</span>)
            model.fit(X<span class="hljs-section">[train_idx]</span>, y<span class="hljs-section">[train_idx]</span>)
            <span class="hljs-attr">score</span> = model.score(X[val_idx], y[val_idx])
            fold_scores.append(score)
            
            <span class="hljs-comment"># åœ¨å›¾ä¸­æ·»åŠ å‡†ç¡®ç‡</span>
            ax.text(0.5, 0.9, f'å‡†ç¡®ç‡: {score:.3f}', 
                   <span class="hljs-attr">transform</span>=ax.transAxes, ha=<span class="hljs-string">'center'</span>, 
                   <span class="hljs-attr">bbox</span>=dict(boxstyle=<span class="hljs-string">"round,pad=0.3"</span>, facecolor=<span class="hljs-string">"yellow"</span>, alpha=<span class="hljs-number">0.7</span>))
    
    <span class="hljs-comment"># åœ¨å³ä¸‹è§’å­å›¾ç»˜åˆ¶å„æŠ˜å‡†ç¡®ç‡æ¡å½¢å›¾ï¼Œå¹¶éšè—å…¶ä»–å¤šä½™å­å›¾</span>
    <span class="hljs-attr">summary_ax_index</span> = len(axes) - <span class="hljs-number">1</span>  <span class="hljs-comment"># å³ä¸‹è§’å­å›¾ç´¢å¼•ï¼ˆ2x3 ç½‘æ ¼ä¸­çš„æœ€åä¸€ä¸ªï¼‰</span>
    for i in range(len(axes)):
        if i &gt;= k and i != summary_ax_index:
            axes<span class="hljs-section">[i]</span>.set_visible(False)
    
    <span class="hljs-comment"># ç»˜åˆ¶å„æŠ˜å‡†ç¡®ç‡æ¡å½¢å›¾</span>
    <span class="hljs-attr">ax_summary</span> = axes[summary_ax_index]
    ax_summary.set_visible(True)
    <span class="hljs-attr">bars</span> = ax_summary.bar([f<span class="hljs-string">'æŠ˜{i+1}'</span> for i in range(len(fold_scores))], fold_scores, color=<span class="hljs-string">'teal'</span>, alpha=<span class="hljs-number">0.8</span>)
    ax_summary.set_title('å„æŠ˜å‡†ç¡®ç‡')
    ax_summary.set_ylabel('å‡†ç¡®ç‡')
    ax_summary.set_ylim(0, 1.05)
    for bar, score in zip(bars, fold_scores):
        <span class="hljs-attr">height</span> = bar.get_height()
        ax_summary.text(bar.get_x() + bar.get_width()/2., height + 0.02, f'{score:.3f}', <span class="hljs-attr">ha</span>=<span class="hljs-string">'center'</span>, va=<span class="hljs-string">'bottom'</span>)
    
    plt.tight_layout()
    plt.show()
    
    return fold_scores

print(" kæŠ˜äº¤å‰éªŒè¯è¿‡ç¨‹å¯è§†åŒ–")
<span class="hljs-attr">fold_scores</span> = visualize_kfold_process(X, y, k=<span class="hljs-number">5</span>)
</code></pre>
<p><strong>è¾“å‡ºç»“æœï¼š</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/795da5c422d543eea157e25e9b523687~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b285bK46Iqx5byA5LqG5ZCX:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768014881&amp;x-signature=CGZJF4hDYmwq1t%2BQshEP%2B0jYMqc%3D" alt="" loading="lazy"/></p>
<p><strong>å›¾ç¤ºå†…å®¹ï¼š</strong></p>
<ul>
<li>å±•ç¤º5æŠ˜äº¤å‰éªŒè¯ä¸­æ¯æŠ˜çš„æ•°æ®åˆ†å‰²æƒ…å†µ</li>
<li>è®­ç»ƒé›†ï¼ˆè“è‰²ï¼‰ã€éªŒè¯é›†ï¼ˆçº¢è‰²ï¼‰çš„æ ·æœ¬åˆ†é…</li>
<li>æ¯æŠ˜çš„éªŒè¯å‡†ç¡®ç‡æ˜¾ç¤º</li>
<li>å„æŠ˜çš„å‡†ç¡®ç‡ç»¼åˆå¯¹æ¯”æ˜¾ç¤º</li>
</ul>
<p><strong>kæŠ˜äº¤å‰éªŒè¯å…¬å¼</strong>ï¼š</p>
<blockquote>
<p>è®¾æ•°æ®é›† D = {(xâ‚,yâ‚), (xâ‚‚,yâ‚‚), ..., (x_N,y_N)}<br/>
å°† D åˆ†å‰²ä¸º k ä¸ªäº’æ–¥å­é›†ï¼šDâ‚, Dâ‚‚, ..., D_k</p>
<p>å¯¹äºæ¯ä¸ªæŠ˜ i = 1, 2, ..., kï¼š<br/>
è®­ç»ƒé›†ï¼šD_trainâ½â±â¾ = D \ D_i<br/>
éªŒè¯é›†ï¼šD_valâ½â±â¾ = D_i</p>
<p>æ¨¡å‹è®­ç»ƒï¼šfâ½â±â¾ = train(D_trainâ½â±â¾)<br/>
æ€§èƒ½è¯„ä¼°ï¼šscoreâ½â±â¾ = evaluate(fâ½â±â¾, D_valâ½â±â¾)</p>
<p>æœ€ç»ˆæ€§èƒ½ï¼šCV_score = (1/k) * Î£_{i=1}^k scoreâ½â±â¾<br/>
æ€§èƒ½æ ‡å‡†å·®ï¼šCV_std = âˆš[ (1/(k-1)) * Î£_{i=1}^k (scoreâ½â±â¾ - CV_score)Â² ]</p>
</blockquote>
<p><strong>ä½“ç°çš„ä»·å€¼ï¼š</strong></p>
<ul>
<li>æ•°æ®åˆ©ç”¨æœ€å¤§åŒ–ï¼šæ¯ä¸ªæ ·æœ¬éƒ½å‚ä¸è®­ç»ƒå’ŒéªŒè¯</li>
<li>æ€§èƒ½ä¼°è®¡æ— åæ€§ï¼šå‡å°‘å•æ¬¡åˆ†å‰²çš„éšæœºæ€§å½±å“</li>
<li>æ¨¡å‹ç¨³å®šæ€§è¯„ä¼°ï¼šé€šè¿‡æ ‡å‡†å·®è¡¡é‡æ¨¡å‹é²æ£’æ€§</li>
</ul>
<h4 data-id="heading-14">3.4 æ¨¡å‹æ¯”è¾ƒå¯è§†åŒ–</h4>
<p>ç§‘å­¦åœ°å›ç­”â€œå“ªä¸ªæ¨¡å‹æ›´å¥½ï¼Ÿâ€ï¼Œé€šè¿‡æŸ±çŠ¶å›¾ï¼ˆå¸¦è¯¯å·®æ£’ï¼‰å’Œç®±çº¿å›¾ï¼ŒåŒæ—¶æ¯”è¾ƒå¤šä¸ªæ¨¡å‹ï¼ˆå¦‚éšæœºæ£®æ—ã€é€»è¾‘å›å½’ã€SVMï¼‰çš„å¹³å‡æ€§èƒ½å’Œç¨³å®šæ€§ï¼Œè¿™ä¸ä»…çœ‹è°çš„å¹³å‡åˆ†é«˜ï¼Œè¿˜è¦çœ‹è°çš„è¡¨ç°æ›´ç¨³å®šï¼ˆæ–¹å·®å°ï¼‰ï¼Œä»è€Œåšå‡ºç¨³å¥çš„é€‰æ‹©ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">def compare_models_cv(X, y, models, <span class="hljs-attr">cv</span>=<span class="hljs-number">5</span>):
    """æ¯”è¾ƒä¸åŒæ¨¡å‹çš„äº¤å‰éªŒè¯æ€§èƒ½å¹¶å¯è§†åŒ–"""
    <span class="hljs-attr">model_names</span> = []
    <span class="hljs-attr">mean_scores</span> = []
    <span class="hljs-attr">std_scores</span> = []
    <span class="hljs-attr">all_scores</span> = []
    
    print(" æ¨¡å‹æ€§èƒ½æ¯”è¾ƒ")
    
    for name, model in models.items():
        <span class="hljs-comment"># æ‰§è¡Œäº¤å‰éªŒè¯</span>
        <span class="hljs-attr">cv_scores</span> = cross_val_score(model, X, y, cv=cv, scoring=<span class="hljs-string">'accuracy'</span>)
        
        model_names.append(name)
        mean_scores.append(cv_scores.mean())
        std_scores.append(cv_scores.std())
        all_scores.append(cv_scores)
        
        print(f"{name:15} | å¹³å‡å‡†ç¡®ç‡: {cv_scores.mean():.4f} (Â±{cv_scores.std():.4f})")
    
    <span class="hljs-comment"># åˆ›å»ºæ€§èƒ½æ¯”è¾ƒå›¾</span>
    fig, (ax1, ax2) = plt.subplots(1, 2, <span class="hljs-attr">figsize</span>=(<span class="hljs-number">15</span>, <span class="hljs-number">6</span>))
    
    <span class="hljs-comment"># æŸ±çŠ¶å›¾æ¯”è¾ƒå¹³å‡æ€§èƒ½</span>
    <span class="hljs-attr">bars</span> = ax1.bar(model_names, mean_scores, yerr=std_scores, 
                   <span class="hljs-attr">capsize</span>=<span class="hljs-number">5</span>, alpha=<span class="hljs-number">0.7</span>, color=[<span class="hljs-string">'skyblue'</span>, <span class="hljs-string">'lightgreen'</span>, <span class="hljs-string">'lightcoral'</span>])
    ax1.set_title('æ¨¡å‹äº¤å‰éªŒè¯æ€§èƒ½æ¯”è¾ƒ')
    ax1.set_ylabel('å¹³å‡å‡†ç¡®ç‡')
    ax1.set_ylim(0.8, 1.0)
    
    <span class="hljs-comment"># åœ¨æŸ±å­ä¸Šæ·»åŠ æ•°å€¼</span>
    for bar, score in zip(bars, mean_scores):
        <span class="hljs-attr">height</span> = bar.get_height()
        ax1.text(bar.get_x() + bar.get_width()/2., height + 0.01,
                f'{score:.4f}', <span class="hljs-attr">ha</span>=<span class="hljs-string">'center'</span>, va=<span class="hljs-string">'bottom'</span>)
    
    <span class="hljs-comment"># ç®±çº¿å›¾æ˜¾ç¤ºåˆ†å¸ƒ</span>
    ax2.boxplot(all_scores, <span class="hljs-attr">labels</span>=model_names)
    ax2.set_title('å„æŠ˜å‡†ç¡®ç‡åˆ†å¸ƒ')
    ax2.set_ylabel('å‡†ç¡®ç‡')
    
    plt.tight_layout()
    plt.show()
    
    <span class="hljs-comment"># é€‰æ‹©æœ€ä½³æ¨¡å‹</span>
    <span class="hljs-attr">best_idx</span> = np.argmax(mean_scores)
    <span class="hljs-attr">best_model_name</span> = model_names[best_idx]
    <span class="hljs-attr">best_model</span> = models[best_model_name]
    
    print(f"\n æœ€ä½³æ¨¡å‹: {best_model_name} (å‡†ç¡®ç‡: {mean_scores<span class="hljs-section">[best_idx]</span>:.4f})")
    
    return best_model_name, best_model, all_scores

<span class="hljs-comment"># å®šä¹‰è¦æ¯”è¾ƒçš„æ¨¡å‹</span>
<span class="hljs-attr">models</span> = {
    'éšæœºæ£®æ—': RandomForestClassifier(<span class="hljs-attr">random_state</span>=<span class="hljs-number">42</span>),
    'é€»è¾‘å›å½’': LogisticRegression(<span class="hljs-attr">random_state</span>=<span class="hljs-number">42</span>, max_iter=<span class="hljs-number">1000</span>),
    'æ”¯æŒå‘é‡æœº': SVC(<span class="hljs-attr">random_state</span>=<span class="hljs-number">42</span>)
}

best_model_name, best_model, <span class="hljs-attr">all_scores</span> = compare_models_cv(X, y, models)
</code></pre>
<p><strong>è¾“å‡ºç»“æœï¼š</strong></p>
<blockquote>
<p>æ¨¡å‹æ€§èƒ½æ¯”è¾ƒ<br/>
éšæœºæ£®æ— | å¹³å‡å‡†ç¡®ç‡: 0.9667 (Â±0.0211)<br/>
é€»è¾‘å›å½’ | å¹³å‡å‡†ç¡®ç‡: 0.9733 (Â±0.0249)<br/>
æ”¯æŒå‘é‡æœº | å¹³å‡å‡†ç¡®ç‡: 0.9667 (Â±0.0211)</p>
<p>æœ€ä½³æ¨¡å‹: é€»è¾‘å›å½’ (å‡†ç¡®ç‡: 0.9733)</p>
</blockquote>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1f19ef9c311144ffbd78aba4b17432bd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b285bK46Iqx5byA5LqG5ZCX:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768014881&amp;x-signature=j8AyzU8VUMJnpbnPZOqmF0JArRs%3D" alt="" loading="lazy"/></p>
<p><strong>å›¾ç¤ºå†…å®¹ï¼š</strong></p>
<ul>
<li>å·¦ä¾§æŸ±çŠ¶å›¾ï¼šå„æ¨¡å‹å¹³å‡å‡†ç¡®ç‡åŠè¯¯å·®æ£’ï¼ˆæ ‡å‡†å·®ï¼‰</li>
<li>å³ä¾§ç®±çº¿å›¾ï¼šå„æ¨¡å‹5æŠ˜äº¤å‰éªŒè¯å¾—åˆ†çš„åˆ†å¸ƒ</li>
</ul>
<p><strong>æ¨¡å‹æ€§èƒ½æ¯”è¾ƒçš„ç»Ÿè®¡æ£€éªŒ</strong>ï¼š</p>
<blockquote>
<p>è®¾ä¸¤ä¸ªæ¨¡å‹ A å’Œ B çš„kæŠ˜å¾—åˆ†åˆ†åˆ«ä¸ºï¼š<br/>
scores_A = [s_AÂ¹, s_AÂ², ..., s_Aáµ]<br/>
scores_B = [s_BÂ¹, s_BÂ², ..., s_Báµ]</p>
<p>é…å¯¹tæ£€éªŒç»Ÿè®¡é‡ï¼š<br/>
t = (mean(scores_A) - mean(scores_B)) / âˆš[ (var(scores_A - scores_B) / k) ]</p>
<p>å…¶ä¸­ï¼š<br/>
var(scores_A - scores_B) = (1/(k-1)) * Î£_{i=1}^k [(s_Aâ± - s_Bâ±) - mean(scores_A - scores_B)]Â²</p>
</blockquote>
<p><strong>ä½“ç°çš„ä»·å€¼ï¼š</strong></p>
<ul>
<li>æ¨¡å‹é€‰æ‹©ä¾æ®ï¼šåŸºäºç»Ÿè®¡æ€§èƒ½é€‰æ‹©æœ€ä½³æ¨¡å‹</li>
<li>æ€§èƒ½ç¨³å®šæ€§åˆ†æï¼šé€šè¿‡åˆ†å¸ƒäº†è§£æ¨¡å‹é²æ£’æ€§</li>
<li>ç»Ÿè®¡æ˜¾è‘—æ€§åˆ¤æ–­ï¼šç¡®å®šæ€§èƒ½å·®å¼‚æ˜¯å¦æ˜¾è‘—</li>
</ul>
<h4 data-id="heading-15">3.5 å­¦ä¹ æ›²çº¿å¯è§†åŒ–</h4>
<p>è¯Šæ–­æ¨¡å‹çŠ¶æ€çš„å…³é”®å·¥å…·ï¼Œé€šè¿‡ç»˜åˆ¶æ¨¡å‹éšè®­ç»ƒæ•°æ®é‡å¢åŠ æ—¶ï¼Œè®­ç»ƒå¾—åˆ†å’ŒéªŒè¯å¾—åˆ†çš„å˜åŒ–æ›²çº¿ï¼Œå¯ä»¥æ¸…æ™°åœ°åˆ¤æ–­æ¨¡å‹æ˜¯å¤„äºè¿‡æ‹Ÿåˆï¼ˆè®­ç»ƒå¾—åˆ†è¿œé«˜äºéªŒè¯å¾—åˆ†ï¼‰è¿˜æ˜¯æ¬ æ‹Ÿåˆï¼ˆä¸¤è€…éƒ½ä½ï¼‰çŠ¶æ€ï¼Œå¹¶æŒ‡å¯¼æ˜¯å¦éœ€è¦æ”¶é›†æ›´å¤šæ•°æ®ã€‚</p>
<pre><code class="hljs language-scss" lang="scss">def <span class="hljs-built_in">plot_learning_curve</span>(model, X, y, model_name):
    <span class="hljs-string">""</span><span class="hljs-string">"ç»˜åˆ¶å­¦ä¹ æ›²çº¿æ¥è§‚å¯Ÿæ¨¡å‹è¡¨ç°"</span><span class="hljs-string">""</span>
    from sklearn.model_selection import learning_curve
    
    train_sizes, train_scores, test_scores = <span class="hljs-built_in">learning_curve</span>(
        model, X, y, cv=<span class="hljs-number">5</span>, n_jobs=-<span class="hljs-number">1</span>,
        train_sizes=np.<span class="hljs-built_in">linspace</span>(<span class="hljs-number">0.1</span>, <span class="hljs-number">1.0</span>, <span class="hljs-number">10</span>),
        scoring=<span class="hljs-string">'accuracy'</span>
    )
    
    train_scores_mean = np.<span class="hljs-built_in">mean</span>(train_scores, axis=<span class="hljs-number">1</span>)
    train_scores_std = np.<span class="hljs-built_in">std</span>(train_scores, axis=<span class="hljs-number">1</span>)
    test_scores_mean = np.<span class="hljs-built_in">mean</span>(test_scores, axis=<span class="hljs-number">1</span>)
    test_scores_std = np.<span class="hljs-built_in">std</span>(test_scores, axis=<span class="hljs-number">1</span>)
    
    plt.<span class="hljs-built_in">figure</span>(figsize=(<span class="hljs-number">10</span>, <span class="hljs-number">6</span>))
    plt.<span class="hljs-built_in">fill_between</span>(train_sizes, train_scores_mean - train_scores_std,
                     train_scores_mean + train_scores_std, alpha=<span class="hljs-number">0.1</span>, color=<span class="hljs-string">"r"</span>)
    plt.<span class="hljs-built_in">fill_between</span>(train_sizes, test_scores_mean - test_scores_std,
                     test_scores_mean + test_scores_std, alpha=<span class="hljs-number">0.1</span>, color=<span class="hljs-string">"g"</span>)
    plt.<span class="hljs-built_in">plot</span>(train_sizes, train_scores_mean, <span class="hljs-string">'o-'</span>, color=<span class="hljs-string">"r"</span>, label=<span class="hljs-string">"è®­ç»ƒå¾—åˆ†"</span>)
    plt.<span class="hljs-built_in">plot</span>(train_sizes, test_scores_mean, <span class="hljs-string">'o-'</span>, color=<span class="hljs-string">"g"</span>, label=<span class="hljs-string">"äº¤å‰éªŒè¯å¾—åˆ†"</span>)
    
    plt.<span class="hljs-built_in">title</span>(f<span class="hljs-string">'{model_name} å­¦ä¹ æ›²çº¿'</span>)
    plt.<span class="hljs-built_in">xlabel</span>(<span class="hljs-string">'è®­ç»ƒæ ·æœ¬æ•°'</span>)
    plt.<span class="hljs-built_in">ylabel</span>(<span class="hljs-string">'å‡†ç¡®ç‡'</span>)
    plt.<span class="hljs-built_in">legend</span>(loc=<span class="hljs-string">"best"</span>)
    plt.<span class="hljs-built_in">grid</span>(True)
    
    plt.<span class="hljs-built_in">show</span>()

<span class="hljs-built_in">print</span>(<span class="hljs-string">"\n å­¦ä¹ æ›²çº¿åˆ†æ"</span>)
for name, model in models.<span class="hljs-built_in">items</span>():
    <span class="hljs-built_in">plot_learning_curve</span>(model, X, y, name)
</code></pre>
<p><strong>è¾“å‡ºç»“æœï¼š</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/80f6aea81003426ba8ca8da76764f333~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b285bK46Iqx5byA5LqG5ZCX:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768014881&amp;x-signature=L0VjWiZMR5FcoU3xP40TUhQBbAk%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/58053809ac2c4148aa500cd0d36d7552~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b285bK46Iqx5byA5LqG5ZCX:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768014881&amp;x-signature=m3%2F29nBlHZ0lZlSjgI6Au9y77mM%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0748b93186fa4c50b3da9a979ccc29bc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b285bK46Iqx5byA5LqG5ZCX:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768014881&amp;x-signature=Wk3nwN1qoOmzjuftvODEt%2FD2Ee4%3D" alt="" loading="lazy"/></p>
<p><strong>å›¾ç¤ºå†…å®¹ï¼š</strong></p>
<ul>
<li>è®­ç»ƒå¾—åˆ†å’ŒéªŒè¯å¾—åˆ†éšè®­ç»ƒæ ·æœ¬æ•°é‡å¢åŠ çš„å˜åŒ–</li>
<li>é˜´å½±åŒºåŸŸè¡¨ç¤ºå¾—åˆ†çš„æ ‡å‡†å·®èŒƒå›´</li>
</ul>
<p><strong>å­¦ä¹ æ›²çº¿ç†è®º</strong>ï¼š</p>
<blockquote>
<p>è®¾è®­ç»ƒé›†å¤§å°ä¸º mï¼Œæ¨¡å‹å¤æ‚åº¦ä¸º h<br/>
è®­ç»ƒè¯¯å·®ï¼šJ_train(m) = (1/m) * Î£_{i=1}^m L(f(x_i), y_i)<br/>
éªŒè¯è¯¯å·®ï¼šJ_val(m) = (1/k) * Î£_{j=1}^k L(f(x_j), y_j)</p>
<p>éšç€ m â†’ âˆï¼š<br/>
J_train(m) â†’ æ¨¡å‹åå·® + æ–¹å·®é¡¹<br/>
J_val(m) â†’ æ¨¡å‹åå·® + æ–¹å·®é¡¹ + å™ªå£°é¡¹</p>
<p>å…¶ä¸­åå·®-æ–¹å·®åˆ†è§£ï¼š<br/>
E[(y - f(x))Â²] = Bias[f(x)]Â² + Var[f(x)] + ÏƒÂ²</p>
</blockquote>
<p><strong>ä½“ç°çš„ä»·å€¼ï¼š</strong></p>
<ul>
<li>è¿‡æ‹Ÿåˆ/æ¬ æ‹Ÿåˆè¯Šæ–­ï¼šåˆ¤æ–­æ¨¡å‹æ˜¯å¦åˆé€‚</li>
<li>æ•°æ®é‡éœ€æ±‚è¯„ä¼°ï¼šç¡®å®šéœ€è¦å¤šå°‘è®­ç»ƒæ•°æ®</li>
<li>æ¨¡å‹å®¹é‡åˆ†æï¼šè§‚å¯Ÿæ¨¡å‹çš„å­¦ä¹ èƒ½åŠ›</li>
</ul>
<h4 data-id="heading-16">3.6 ç½‘æ ¼æœç´¢è°ƒå‚å¯è§†åŒ–</h4>
<p>ç§‘å­¦çš„è°ƒå‚æ–¹å¼ï¼Œé€šè¿‡ç½‘æ ¼æœç´¢äº¤å‰éªŒè¯ï¼Œç³»ç»Ÿæ€§åœ°éå†ä¸åŒçš„å‚æ•°ç»„åˆï¼Œå¹¶ç”¨çƒ­åŠ›å›¾ç­‰å½¢å¼å±•ç¤ºå‚æ•°å¦‚ä½•å½±å“æ€§èƒ½ã€‚è¿™å¸®åŠ©æˆ‘ä»¬æ‰¾åˆ°çœŸæ­£çš„æœ€ä½³å‚æ•°ç»„åˆï¼Œå¹¶ç†è§£å‚æ•°ä¹‹é—´çš„ç›¸äº’ä½œç”¨ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">visualize_grid_search</span>(<span class="hljs-params">X, y</span>):
    <span class="hljs-string">"""å¯è§†åŒ–ç½‘æ ¼æœç´¢è¿‡ç¨‹"""</span>
    <span class="hljs-comment"># å®šä¹‰å‚æ•°ç½‘æ ¼</span>
    param_grid = {
        <span class="hljs-string">'n_estimators'</span>: [<span class="hljs-number">50</span>, <span class="hljs-number">100</span>, <span class="hljs-number">200</span>],
        <span class="hljs-string">'max_depth'</span>: [<span class="hljs-number">3</span>, <span class="hljs-number">5</span>, <span class="hljs-literal">None</span>],
        <span class="hljs-string">'min_samples_split'</span>: [<span class="hljs-number">2</span>, <span class="hljs-number">5</span>, <span class="hljs-number">10</span>]
    }
    
    rf = RandomForestClassifier(random_state=<span class="hljs-number">42</span>)
    grid_search = GridSearchCV(rf, param_grid, cv=<span class="hljs-number">5</span>, scoring=<span class="hljs-string">'accuracy'</span>, n_jobs=-<span class="hljs-number">1</span>)
    grid_search.fit(X, y)
    
    <span class="hljs-comment"># å¯è§†åŒ–ç»“æœ</span>
    results = pd.DataFrame(grid_search.cv_results_)
    
    <span class="hljs-comment"># é€‰æ‹©éƒ¨åˆ†å‚æ•°è¿›è¡Œå¯è§†åŒ–</span>
    fig, axes = plt.subplots(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>, figsize=(<span class="hljs-number">15</span>, <span class="hljs-number">10</span>))
    
    <span class="hljs-comment"># 1. n_estimators çš„å½±å“</span>
    param1_data = results[results[<span class="hljs-string">'param_max_depth'</span>].isna() &amp; results[<span class="hljs-string">'param_min_samples_split'</span>] == <span class="hljs-number">2</span>]
    axes[<span class="hljs-number">0</span>,<span class="hljs-number">0</span>].plot(param1_data[<span class="hljs-string">'param_n_estimators'</span>], param1_data[<span class="hljs-string">'mean_test_score'</span>], <span class="hljs-string">'o-'</span>)
    axes[<span class="hljs-number">0</span>,<span class="hljs-number">0</span>].set_title(<span class="hljs-string">'n_estimators å¯¹æ€§èƒ½çš„å½±å“\n(max_depth=None, min_samples_split=2)'</span>)
    axes[<span class="hljs-number">0</span>,<span class="hljs-number">0</span>].set_xlabel(<span class="hljs-string">'n_estimators'</span>)
    axes[<span class="hljs-number">0</span>,<span class="hljs-number">0</span>].set_ylabel(<span class="hljs-string">'å¹³å‡å‡†ç¡®ç‡'</span>)
    
    <span class="hljs-comment"># 2. max_depth çš„å½±å“</span>
    param2_data = results[results[<span class="hljs-string">'param_n_estimators'</span>] == <span class="hljs-number">100</span> &amp; results[<span class="hljs-string">'param_min_samples_split'</span>] == <span class="hljs-number">2</span>]
    axes[<span class="hljs-number">0</span>,<span class="hljs-number">1</span>].plot([<span class="hljs-built_in">str</span>(x) <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> param2_data[<span class="hljs-string">'param_max_depth'</span>]], param2_data[<span class="hljs-string">'mean_test_score'</span>], <span class="hljs-string">'o-'</span>)
    axes[<span class="hljs-number">0</span>,<span class="hljs-number">1</span>].set_title(<span class="hljs-string">'max_depth å¯¹æ€§èƒ½çš„å½±å“\n(n_estimators=100, min_samples_split=2)'</span>)
    axes[<span class="hljs-number">0</span>,<span class="hljs-number">1</span>].set_xlabel(<span class="hljs-string">'max_depth'</span>)
    axes[<span class="hljs-number">0</span>,<span class="hljs-number">1</span>].set_ylabel(<span class="hljs-string">'å¹³å‡å‡†ç¡®ç‡'</span>)
    
    <span class="hljs-comment"># 3. çƒ­åŠ›å›¾ï¼šn_estimators vs max_depth</span>
    heatmap_data = results.pivot_table(
        values=<span class="hljs-string">'mean_test_score'</span>, 
        index=<span class="hljs-string">'param_n_estimators'</span>, 
        columns=<span class="hljs-string">'param_max_depth'</span>,
        aggfunc=<span class="hljs-string">'mean'</span>
    )
    sns.heatmap(heatmap_data, annot=<span class="hljs-literal">True</span>, fmt=<span class="hljs-string">'.3f'</span>, cmap=<span class="hljs-string">'YlOrRd'</span>, ax=axes[<span class="hljs-number">1</span>,<span class="hljs-number">0</span>])
    axes[<span class="hljs-number">1</span>,<span class="hljs-number">0</span>].set_title(<span class="hljs-string">'å‚æ•°ç»„åˆçƒ­åŠ›å›¾\n(å¹³å‡å‡†ç¡®ç‡)'</span>)
    
    <span class="hljs-comment"># 4. æœ€ä½³å‚æ•°ç»„åˆ</span>
    best_params = grid_search.best_params_
    best_score = grid_search.best_score_
    
    axes[<span class="hljs-number">1</span>,<span class="hljs-number">1</span>].text(<span class="hljs-number">0.1</span>, <span class="hljs-number">0.8</span>, <span class="hljs-string">f'æœ€ä½³å‚æ•°ç»„åˆ:'</span>, fontsize=<span class="hljs-number">14</span>, weight=<span class="hljs-string">'bold'</span>)
    axes[<span class="hljs-number">1</span>,<span class="hljs-number">1</span>].text(<span class="hljs-number">0.1</span>, <span class="hljs-number">0.6</span>, <span class="hljs-string">f'n_estimators: <span class="hljs-subst">{best_params[<span class="hljs-string">"n_estimators"</span>]}</span>'</span>, fontsize=<span class="hljs-number">12</span>)
    axes[<span class="hljs-number">1</span>,<span class="hljs-number">1</span>].text(<span class="hljs-number">0.1</span>, <span class="hljs-number">0.5</span>, <span class="hljs-string">f'max_depth: <span class="hljs-subst">{best_params[<span class="hljs-string">"max_depth"</span>]}</span>'</span>, fontsize=<span class="hljs-number">12</span>)
    axes[<span class="hljs-number">1</span>,<span class="hljs-number">1</span>].text(<span class="hljs-number">0.1</span>, <span class="hljs-number">0.4</span>, <span class="hljs-string">f'min_samples_split: <span class="hljs-subst">{best_params[<span class="hljs-string">"min_samples_split"</span>]}</span>'</span>, fontsize=<span class="hljs-number">12</span>)
    axes[<span class="hljs-number">1</span>,<span class="hljs-number">1</span>].text(<span class="hljs-number">0.1</span>, <span class="hljs-number">0.2</span>, <span class="hljs-string">f'æœ€ä½³å‡†ç¡®ç‡: <span class="hljs-subst">{best_score:<span class="hljs-number">.4</span>f}</span>'</span>, fontsize=<span class="hljs-number">14</span>, weight=<span class="hljs-string">'bold'</span>, color=<span class="hljs-string">'red'</span>)
    axes[<span class="hljs-number">1</span>,<span class="hljs-number">1</span>].set_xlim(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>)
    axes[<span class="hljs-number">1</span>,<span class="hljs-number">1</span>].set_ylim(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>)
    axes[<span class="hljs-number">1</span>,<span class="hljs-number">1</span>].set_title(<span class="hljs-string">'æœ€ä½³å‚æ•°ç»“æœ'</span>, fontsize=<span class="hljs-number">14</span>)
    axes[<span class="hljs-number">1</span>,<span class="hljs-number">1</span>].axis(<span class="hljs-string">'off'</span>)
    
    plt.tight_layout()
    plt.show()
    
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\n ç½‘æ ¼æœç´¢æœ€ä½³å‚æ•°: <span class="hljs-subst">{grid_search.best_params_}</span>"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æœ€ä½³äº¤å‰éªŒè¯å¾—åˆ†: <span class="hljs-subst">{grid_search.best_score_:<span class="hljs-number">.4</span>f}</span>"</span>)
    
    <span class="hljs-keyword">return</span> grid_search.best_estimator_

<span class="hljs-built_in">print</span>(<span class="hljs-string">"\n ç½‘æ ¼æœç´¢è°ƒå‚å¯è§†åŒ–"</span>)
best_tuned_model = visualize_grid_search(X, y)
</code></pre>
<p><strong>è¾“å‡ºç»“æœï¼š</strong></p>
<blockquote>
<p>ç½‘æ ¼æœç´¢è°ƒå‚å¯è§†åŒ–</p>
<p>ç½‘æ ¼æœç´¢æœ€ä½³å‚æ•°: {'max_depth': 3, 'min_samples_split': 2, 'n_estimators': 50}<br/>
æœ€ä½³äº¤å‰éªŒè¯å¾—åˆ†: 0.9667</p>
</blockquote>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/08032a01dbc64e30afbc786105c4ff47~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b285bK46Iqx5byA5LqG5ZCX:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768014881&amp;x-signature=XrW6%2Be4Bq0tniHhpW9QTgeeOCAg%3D" alt="" loading="lazy"/></p>
<p><strong>å›¾ç¤ºå†…å®¹ï¼š</strong></p>
<ul>
<li>ä¸åŒè¶…å‚æ•°ç»„åˆå¯¹æ¨¡å‹æ€§èƒ½çš„å½±å“</li>
<li>å‚æ•°çƒ­åŠ›å›¾æ˜¾ç¤ºæœ€ä½³ç»„åˆ</li>
<li>æœ€ä½³å‚æ•°ç»“æœæ€»ç»“</li>
</ul>
<p><strong>è¶…å‚æ•°ä¼˜åŒ–ç›®æ ‡</strong>ï¼š</p>
<blockquote>
<p>è®¾è¶…å‚æ•°ç©ºé—´ä¸º Î˜ï¼Œæ€§èƒ½åº¦é‡å‡½æ•°ä¸º P<br/>
ç½‘æ ¼æœç´¢ç›®æ ‡ï¼šæ‰¾åˆ° Î¸* âˆˆ Î˜ ä½¿å¾—<br/>
Î¸* = argmax_{Î¸âˆˆÎ˜} CV_score(Î¸)</p>
<p>å…¶ä¸­ï¼š<br/>
CV_score(Î¸) = (1/k) * Î£_{i=1}^k P(f_Î¸â½â±â¾, D_valâ½â±â¾)<br/>
f_Î¸â½â±â¾ æ˜¯åœ¨è¶…å‚æ•° Î¸ ä¸‹ï¼Œåœ¨ç¬¬ i æŠ˜è®­ç»ƒé›†ä¸Šè®­ç»ƒçš„æ¨¡å‹</p>
</blockquote>
<p><strong>ä½“ç°çš„ä»·å€¼ï¼š</strong></p>
<ul>
<li>è¶…å‚æ•°æ•æ„Ÿæ€§åˆ†æï¼šäº†è§£å„å‚æ•°å¯¹æ€§èƒ½çš„å½±å“</li>
<li>æœ€ä¼˜é…ç½®ç¡®å®šï¼šæ‰¾åˆ°æœ€ä½³è¶…å‚æ•°ç»„åˆ</li>
<li>å‚æ•°äº¤äº’ä½œç”¨ï¼šè§‚å¯Ÿå‚æ•°é—´çš„ç›¸äº’å½±å“</li>
</ul>
<h4 data-id="heading-17">3.7 æœ€ç»ˆæ¨¡å‹è¯„ä¼°å¯è§†åŒ–</h4>
<p>å¯¹æœ€ä½³æ¨¡å‹è¿›è¡Œå…¨é¢çš„æ¯•ä¸šç­”è¾©ï¼Œåœ¨ç‹¬ç«‹çš„æµ‹è¯•é›†ä¸Šï¼Œé€šè¿‡æ··æ·†çŸ©é˜µã€ç‰¹å¾é‡è¦æ€§ã€åˆ†ç±»æŠ¥å‘Šç­‰å¤šç§å·¥å…·ï¼Œä»å„ä¸ªè§’åº¦è¯„ä¼°æ¨¡å‹çš„æœ€ç»ˆè¡¨ç°ï¼Œäº†è§£å…¶é”™è¯¯ç±»å‹å’Œå†³ç­–ä¾æ®ï¼Œç¡®ä¿å…¶æ³›åŒ–èƒ½åŠ›ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">def final_evaluation_visualization(model, X, y, model_name):
    """æœ€ç»ˆæ¨¡å‹è¯„ä¼°å¯è§†åŒ–"""
    <span class="hljs-comment"># åˆ†å‰²æ•°æ®</span>
    X_train, X_test, y_train, <span class="hljs-attr">y_test</span> = train_test_split(
        X, y, <span class="hljs-attr">test_size</span>=<span class="hljs-number">0.2</span>, random_state=<span class="hljs-number">42</span>, stratify=y
    )
    
    <span class="hljs-comment"># è®­ç»ƒæœ€ç»ˆæ¨¡å‹</span>
    model.fit(X_train, y_train)
    <span class="hljs-attr">y_pred</span> = model.predict(X_test)
    
    <span class="hljs-comment"># åˆ›å»ºè¯„ä¼°å›¾è¡¨</span>
    fig, <span class="hljs-attr">axes</span> = plt.subplots(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>, figsize=(<span class="hljs-number">15</span>, <span class="hljs-number">12</span>))
    
    <span class="hljs-comment"># 1. æ··æ·†çŸ©é˜µ</span>
    <span class="hljs-attr">cm</span> = confusion_matrix(y_test, y_pred)
    sns.heatmap(cm, <span class="hljs-attr">annot</span>=<span class="hljs-literal">True</span>, fmt=<span class="hljs-string">'d'</span>, cmap=<span class="hljs-string">'Blues'</span>, 
                <span class="hljs-attr">xticklabels</span>=target_names, yticklabels=target_names, ax=axes[<span class="hljs-number">0</span>,<span class="hljs-number">0</span>])
    axes<span class="hljs-section">[0,0]</span>.set_title('æ··æ·†çŸ©é˜µ')
    axes<span class="hljs-section">[0,0]</span>.set_xlabel('é¢„æµ‹æ ‡ç­¾')
    axes<span class="hljs-section">[0,0]</span>.set_ylabel('çœŸå®æ ‡ç­¾')
    
    <span class="hljs-comment"># 2. ç‰¹å¾é‡è¦æ€§ï¼ˆå¦‚æœæ˜¯æ ‘æ¨¡å‹ï¼‰</span>
    if hasattr(model, 'feature_importances_'):
        <span class="hljs-attr">importances</span> = model.feature_importances_
        <span class="hljs-attr">indices</span> = np.argsort(importances)[::-<span class="hljs-number">1</span>]
        
        axes<span class="hljs-section">[0,1]</span>.bar(range(len(importances)), importances<span class="hljs-section">[indices]</span>)
        axes<span class="hljs-section">[0,1]</span>.set_title('ç‰¹å¾é‡è¦æ€§')
        axes<span class="hljs-section">[0,1]</span>.set_xlabel('ç‰¹å¾')
        axes<span class="hljs-section">[0,1]</span>.set_ylabel('é‡è¦æ€§')
        axes<span class="hljs-section">[0,1]</span>.set_xticks(range(len(importances)))
        axes<span class="hljs-section">[0,1]</span>.set_xticklabels(<span class="hljs-section">[feature_names[i]</span> for i in indices], <span class="hljs-attr">rotation</span>=<span class="hljs-number">45</span>)
    
    <span class="hljs-comment"># 3. æµ‹è¯•é›†æ€§èƒ½</span>
    <span class="hljs-attr">test_score</span> = model.score(X_test, y_test)
    <span class="hljs-attr">train_score</span> = model.score(X_train, y_train)
    
    <span class="hljs-attr">scores</span> = [train_score, test_score]
    <span class="hljs-attr">labels</span> = [<span class="hljs-string">'è®­ç»ƒé›†'</span>, <span class="hljs-string">'æµ‹è¯•é›†'</span>]
    
    <span class="hljs-attr">bars</span> = axes[<span class="hljs-number">1</span>,<span class="hljs-number">0</span>].bar(labels, scores, color=[<span class="hljs-string">'lightblue'</span>, <span class="hljs-string">'lightcoral'</span>])
    axes<span class="hljs-section">[1,0]</span>.set_title('è®­ç»ƒé›† vs æµ‹è¯•é›† æ€§èƒ½')
    axes<span class="hljs-section">[1,0]</span>.set_ylabel('å‡†ç¡®ç‡')
    axes<span class="hljs-section">[1,0]</span>.set_ylim(0, 1.1)
    
    <span class="hljs-comment"># åœ¨æŸ±å­ä¸Šæ·»åŠ æ•°å€¼</span>
    for bar, score in zip(bars, scores):
        <span class="hljs-attr">height</span> = bar.get_height()
        axes<span class="hljs-section">[1,0]</span>.text(bar.get_x() + bar.get_width()/2., height + 0.02,
                      f'{score:.4f}', <span class="hljs-attr">ha</span>=<span class="hljs-string">'center'</span>, va=<span class="hljs-string">'bottom'</span>)
    
    <span class="hljs-comment"># 4. åˆ†ç±»æŠ¥å‘Šæ‘˜è¦</span>
    <span class="hljs-attr">report</span> = classification_report(y_test, y_pred, target_names=target_names, output_dict=<span class="hljs-literal">True</span>)
    <span class="hljs-attr">report_df</span> = pd.DataFrame(report).transpose()
    
    <span class="hljs-comment"># ç®€åŒ–æ˜¾ç¤ºä¸»è¦æŒ‡æ ‡</span>
    axes<span class="hljs-section">[1,1]</span>.axis('off')
    axes<span class="hljs-section">[1,1]</span>.text(0.1, 0.9, 'åˆ†ç±»æŠ¥å‘Šæ‘˜è¦', <span class="hljs-attr">fontsize</span>=<span class="hljs-number">16</span>, weight=<span class="hljs-string">'bold'</span>)
    
    <span class="hljs-attr">y_pos</span> = <span class="hljs-number">0.7</span>
    for class_name in target_names:
        <span class="hljs-attr">prec</span> = report[class_name][<span class="hljs-string">'precision'</span>]
        <span class="hljs-attr">rec</span> = report[class_name][<span class="hljs-string">'recall'</span>]
        <span class="hljs-attr">f1</span> = report[class_name][<span class="hljs-string">'f1-score'</span>]
        axes<span class="hljs-section">[1,1]</span>.text(0.1, y_pos, f'{class_name}:', <span class="hljs-attr">fontsize</span>=<span class="hljs-number">12</span>, weight=<span class="hljs-string">'bold'</span>)
        axes<span class="hljs-section">[1,1]</span>.text(0.4, y_pos, f'ç²¾ç¡®ç‡: {prec:.3f}, å¬å›ç‡: {rec:.3f}, F1: {f1:.3f}', <span class="hljs-attr">fontsize</span>=<span class="hljs-number">10</span>)
        y_pos <span class="hljs-attr">-</span>= <span class="hljs-number">0.1</span>
    
    axes<span class="hljs-section">[1,1]</span>.text(0.1, y_pos-0.1, f'æ€»ä½“å‡†ç¡®ç‡: {test_score:.4f}', 
                   <span class="hljs-attr">fontsize</span>=<span class="hljs-number">14</span>, weight=<span class="hljs-string">'bold'</span>, color=<span class="hljs-string">'red'</span>)
    
    plt.tight_layout()
    plt.show()
    
    print(f"\n æœ€ç»ˆæ¨¡å‹è¯„ä¼°å®Œæˆ!")
    print(f"æµ‹è¯•é›†å‡†ç¡®ç‡: {test_score:.4f}")
    
    return test_score

print("\n æœ€ç»ˆæ¨¡å‹è¯„ä¼°å¯è§†åŒ–")
<span class="hljs-attr">final_score</span> = final_evaluation_visualization(best_tuned_model, X, y, best_model_name)
</code></pre>
<p><strong>è¾“å‡ºç»“æœï¼š</strong></p>
<blockquote>
<p>æœ€ç»ˆæ¨¡å‹è¯„ä¼°å¯è§†åŒ–</p>
<p>æœ€ç»ˆæ¨¡å‹è¯„ä¼°å®Œæˆ!<br/>
æµ‹è¯•é›†å‡†ç¡®ç‡: 0.9667</p>
</blockquote>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c05b1abd716a4d66853f972a20929ad3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b285bK46Iqx5byA5LqG5ZCX:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768014881&amp;x-signature=PKfslZ%2FHnGwp5CjfLbDqbLP8FIs%3D" alt="" loading="lazy"/></p>
<p><strong>å›¾ç¤ºå†…å®¹ï¼š</strong></p>
<ul>
<li>æ··æ·†çŸ©é˜µï¼šçœŸå®vsé¢„æµ‹ç±»åˆ«åˆ†å¸ƒ</li>
<li>ç‰¹å¾é‡è¦æ€§ï¼šå„ç‰¹å¾å¯¹é¢„æµ‹çš„è´¡çŒ®åº¦</li>
<li>è®­ç»ƒvsæµ‹è¯•æ€§èƒ½æ¯”è¾ƒ</li>
<li>è¯¦ç»†åˆ†ç±»æŠ¥å‘Š</li>
</ul>
<p><strong>æ¨¡å‹è¯„ä¼°æŒ‡æ ‡</strong>ï¼š</p>
<blockquote>
<p>å¯¹äºå¤šåˆ†ç±»é—®é¢˜ï¼Œæ¯ä¸ªç±»åˆ« k çš„æŒ‡æ ‡ï¼š<br/>
ç²¾ç¡®ç‡ï¼šPrecision_k = TP_k / (TP_k + FP_k)<br/>
å¬å›ç‡ï¼šRecall_k = TP_k / (TP_k + FN_k)<br/>
F1åˆ†æ•°ï¼šF1_k = 2 * (Precision_k * Recall_k) / (Precision_k + Recall_k)</p>
<p>å‡†ç¡®ç‡ï¼šAccuracy = (Î£_k TP_k) / N</p>
<p>å…¶ä¸­ï¼š<br/>
TP_k = çœŸé˜³æ€§ï¼ˆç±»åˆ«kè¢«æ­£ç¡®é¢„æµ‹ï¼‰<br/>
FP_k = å‡é˜³æ€§ï¼ˆå…¶ä»–ç±»åˆ«è¢«é¢„æµ‹ä¸ºkï¼‰<br/>
FN_k = å‡é˜´æ€§ï¼ˆç±»åˆ«kè¢«é¢„æµ‹ä¸ºå…¶ä»–ï¼‰</p>
</blockquote>
<p><strong>ä½“ç°çš„ä»·å€¼ï¼š</strong></p>
<ul>
<li>å…¨é¢æ€§èƒ½è¯„ä¼°ï¼šå¤šè§’åº¦è¯„ä¼°æ¨¡å‹è¡¨ç°</li>
<li>é”™è¯¯æ¨¡å¼åˆ†æï¼šé€šè¿‡æ··æ·†çŸ©é˜µè¯†åˆ«å¸¸è§é”™è¯¯</li>
<li>ç‰¹å¾è´¡çŒ®åº¦ï¼šç†è§£æ¨¡å‹å†³ç­–ä¾æ®</li>
<li>æ³›åŒ–èƒ½åŠ›éªŒè¯ï¼šæ¯”è¾ƒè®­ç»ƒå’Œæµ‹è¯•æ€§èƒ½</li>
</ul>
<h4 data-id="heading-18">3.8 å®Œæ•´æµç¨‹æ€»ç»“å›¾</h4>
<p>æ¢³ç†å…¨å±€ï¼Œå½¢æˆæ–¹æ³•è®ºï¼Œé€šè¿‡ä¸€å¼ æ€»ç»“å›¾ï¼Œå°†æ•´ä¸ªæµç¨‹ä¸²è”èµ·æ¥ï¼Œå¼ºè°ƒæ¯ä¸€æ­¥çš„ç›®çš„å’Œè¡”æ¥ï¼Œè®©æˆ‘ä»¬å»ºç«‹èµ·ä¸€ä¸ªå®Œæ•´ã€è§„èŒƒçš„æœºå™¨å­¦ä¹ é¡¹ç›®å¼€å‘è§‚å¿µã€‚</p>
<pre><code class="hljs language-ini" lang="ini">def create_workflow_summary():
    """åˆ›å»ºå®Œæ•´çš„å·¥ä½œæµç¨‹æ€»ç»“å›¾"""
    fig, <span class="hljs-attr">ax</span> = plt.subplots(figsize=(<span class="hljs-number">12</span>, <span class="hljs-number">8</span>))
    
    <span class="hljs-comment"># å®šä¹‰æµç¨‹æ­¥éª¤</span>
    <span class="hljs-attr">steps</span> = [
        (<span class="hljs-string">"1. æ•°æ®å‡†å¤‡"</span>, <span class="hljs-string">"åŠ è½½å’Œæ¢ç´¢æ•°æ®\næ•°æ®å¯è§†åŒ–"</span>),
        (<span class="hljs-string">"2. äº¤å‰éªŒè¯"</span>, <span class="hljs-string">"kæŠ˜æ•°æ®åˆ†å‰²\næ¨¡å‹æ€§èƒ½è¯„ä¼°"</span>),
        (<span class="hljs-string">"3. æ¨¡å‹æ¯”è¾ƒ"</span>, <span class="hljs-string">"å¤šä¸ªæ¨¡å‹å¯¹æ¯”\né€‰æ‹©æœ€ä½³æ¨¡å‹"</span>),
        (<span class="hljs-string">"4. è¶…å‚æ•°è°ƒä¼˜"</span>, <span class="hljs-string">"ç½‘æ ¼æœç´¢\nå¯»æ‰¾æœ€ä¼˜å‚æ•°"</span>),
        (<span class="hljs-string">"5. æœ€ç»ˆè¯„ä¼°"</span>, <span class="hljs-string">"æµ‹è¯•é›†éªŒè¯\næ€§èƒ½å¯è§†åŒ–"</span>),
        (<span class="hljs-string">"6. æ¨¡å‹éƒ¨ç½²"</span>, <span class="hljs-string">"è®­ç»ƒæœ€ç»ˆæ¨¡å‹\næŠ•å…¥å®é™…ä½¿ç”¨"</span>)
    ]
    
    <span class="hljs-comment"># ç»˜åˆ¶æµç¨‹å›¾</span>
    <span class="hljs-attr">y_positions</span> = [<span class="hljs-number">7</span>, <span class="hljs-number">6</span>, <span class="hljs-number">5</span>, <span class="hljs-number">4</span>, <span class="hljs-number">3</span>, <span class="hljs-number">2</span>]
    
    for i, (title, description) in enumerate(steps):
        <span class="hljs-comment"># ç»˜åˆ¶æ–¹æ¡†</span>
        <span class="hljs-attr">box</span> = plt.Rectangle((<span class="hljs-number">0.1</span>, y_positions[i]), <span class="hljs-number">0.8</span>, <span class="hljs-number">0.8</span>, 
                           <span class="hljs-attr">fill</span>=<span class="hljs-literal">True</span>, color=<span class="hljs-string">'lightblue'</span>, alpha=<span class="hljs-number">0.7</span>, 
                           <span class="hljs-attr">edgecolor</span>=<span class="hljs-string">'black'</span>, linewidth=<span class="hljs-number">2</span>)
        ax.add_patch(box)
        
        <span class="hljs-comment"># æ·»åŠ æ–‡æœ¬</span>
        ax.text(0.5, y_positions<span class="hljs-section">[i]</span> + 0.5, title, 
               <span class="hljs-attr">ha</span>=<span class="hljs-string">'center'</span>, va=<span class="hljs-string">'center'</span>, fontsize=<span class="hljs-number">14</span>, weight=<span class="hljs-string">'bold'</span>)
        ax.text(0.5, y_positions<span class="hljs-section">[i]</span> + 0.3, description, 
               <span class="hljs-attr">ha</span>=<span class="hljs-string">'center'</span>, va=<span class="hljs-string">'center'</span>, fontsize=<span class="hljs-number">10</span>)
        
        <span class="hljs-comment"># ç»˜åˆ¶è¿æ¥ç®­å¤´</span>
        if i &lt; len(steps) - 1:
            ax.arrow(0.5, y_positions<span class="hljs-section">[i]</span> + 0.1, 0, -0.3, 
                    <span class="hljs-attr">head_width</span>=<span class="hljs-number">0.03</span>, head_length=<span class="hljs-number">0.1</span>, fc=<span class="hljs-string">'black'</span>, ec=<span class="hljs-string">'black'</span>)
    
    ax.set_xlim(0, 1)
    ax.set_ylim(1, 8)
    ax.set_title('æœºå™¨å­¦ä¹ æ¨¡å‹å¼€å‘å®Œæ•´å·¥ä½œæµç¨‹', <span class="hljs-attr">fontsize</span>=<span class="hljs-number">16</span>, weight=<span class="hljs-string">'bold'</span>, pad=<span class="hljs-number">20</span>)
    ax.axis('off')
    
    <span class="hljs-comment"># æ·»åŠ äº¤å‰éªŒè¯é‡ç‚¹è¯´æ˜</span>
    ax.text(0.5, 0.8, ' äº¤å‰éªŒè¯æ˜¯æ•´ä¸ªæµç¨‹çš„æ ¸å¿ƒç¯èŠ‚ï¼', 
           <span class="hljs-attr">ha</span>=<span class="hljs-string">'center'</span>, va=<span class="hljs-string">'center'</span>, fontsize=<span class="hljs-number">12</span>, weight=<span class="hljs-string">'bold'</span>,
           <span class="hljs-attr">bbox</span>=dict(boxstyle=<span class="hljs-string">"round,pad=0.3"</span>, facecolor=<span class="hljs-string">"yellow"</span>, alpha=<span class="hljs-number">0.7</span>))
    
    plt.tight_layout()
    plt.show()

print("\n å®Œæ•´å·¥ä½œæµç¨‹æ€»ç»“")
create_workflow_summary()
</code></pre>
<p><strong>è¾“å‡ºç»“æœï¼š</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/13521af15a1d4435aafa5f2688f4212f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b285bK46Iqx5byA5LqG5ZCX:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768014881&amp;x-signature=RXVo1LNLsmJjbFXkf1qrtLZ%2FpuM%3D" alt="" loading="lazy"/></p>
<p><strong>å®Œæ•´å·¥ä½œæµçš„æ•°å­¦æ¡†æ¶ï¼š</strong></p>
<blockquote>
<p>å®Œæ•´æµç¨‹å¯å½¢å¼åŒ–ä¸ºï¼š<br/>
1. æ•°æ®å‡†å¤‡ï¼šD = {(x_i, y_i)} âˆ¼ P_data<br/>
2. æ¨¡å‹é€‰æ‹©ï¼šM = {mâ‚, mâ‚‚, ..., m_p}<br/>
3. äº¤å‰éªŒè¯ï¼šm* = argmax_{mâˆˆM} CV_score(m)<br/>
4. è¶…å‚æ•°è°ƒä¼˜ï¼šÎ¸* = argmax_{Î¸} CV_score(m*_Î¸)<br/>
5. æœ€ç»ˆè¯„ä¼°ï¼šPerformance = P(m*_Î¸*, D_test)<br/>
6. éƒ¨ç½²ï¼šf_final = train(m*_Î¸*, D_all)</p>
</blockquote>
<p>è¿™äº›å¯è§†åŒ–å›¾è¡¨å…±åŒæ„æˆäº†ä¸€ä¸ªå®Œæ•´çš„æ¨¡å‹è¯„ä¼°å’Œé€‰æ‹©æ¡†æ¶ï¼Œæ¯ä¸ªå›¾è¡¨éƒ½åŸºäºä¸¥æ ¼çš„æ•°å­¦åŸç†ï¼Œæä¾›äº†ä»æ•°æ®ç†è§£åˆ°æ¨¡å‹éƒ¨ç½²çš„å…¨æ–¹ä½ç†è§£ã€‚</p>
<h2 data-id="heading-19">ä¸ƒã€å¤§æ¨¡å‹æ—¶ä»£çš„çªç ´ä¸æ¼”è¿›</h2>
<p>éšç€ä»¥å¤§è¯­è¨€æ¨¡å‹ä¸ºä»£è¡¨çš„ã€å‚æ•°å·¨é‡ã€è®­ç»ƒæˆæœ¬æé«˜çš„æ¨¡å‹å‡ºç°ï¼Œç»å…¸çš„kæŠ˜äº¤å‰éªŒè¯å®è·µé¢ä¸´ç€ä¸¥å³»æŒ‘æˆ˜ï¼š</p>
<ul>
<li>**è®¡ç®—æˆæœ¬æ— æ³•æ‰¿å—ï¼š**è®­ç»ƒä¸€ä¸ªå¤§è§„æ¨¡çš„æ¨¡å‹éœ€è¦æ•°æœˆæ—¶é—´å’Œæ•°ç™¾ä¸‡ç¾å…ƒçš„è®¡ç®—èµ„æºã€‚è¿›è¡Œkæ¬¡ï¼ˆæ¯”å¦‚10æ¬¡ï¼‰è¿™æ ·çš„è®­ç»ƒæ¥è¿›è¡Œäº¤å‰éªŒè¯ï¼Œåœ¨ç»æµå’Œæ—¶é—´ä¸Šéƒ½æ˜¯ä¸ç°å®çš„ã€‚</li>
<li>**æ•°æ®è§„æ¨¡å·¨å¤§ï¼š**å¤§æ¨¡å‹çš„è®­ç»ƒæ•°æ®é›†å¾€å¾€è¾¾åˆ°TBç”šè‡³PBçº§åˆ«ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œç®€å•çš„ç•™å‡ºæ³•ï¼ˆä¾‹å¦‚98%è®­ç»ƒï¼Œ1%éªŒè¯ï¼Œ1%æµ‹è¯•ï¼‰å·²ç»èƒ½æä¾›éå¸¸ç¨³å®šå’Œä½æ–¹å·®çš„æ€§èƒ½ä¼°è®¡ã€‚kæŠ˜äº¤å‰éªŒè¯å¸¦æ¥çš„æ–¹å·®é™ä½æ”¶ç›Šï¼Œä¸å…¶å·¨å¤§çš„è®¡ç®—æˆæœ¬ç›¸æ¯”ï¼Œæ€§ä»·æ¯”æä½ã€‚</li>
<li>**åŠ¨æ€è®­ç»ƒè¿‡ç¨‹ï¼š**å¤§æ¨¡å‹çš„è®­ç»ƒä¸æ˜¯ä¸€æ¬¡æ€§çš„ï¼Œè€Œæ˜¯æ¶‰åŠå¤æ‚çš„å¤šé˜¶æ®µæŒ‡ä»¤å¾®è°ƒã€äººç±»åé¦ˆå¼ºåŒ–å­¦ä¹ ç­‰ã€‚éªŒè¯é›†åœ¨å…¶ä¸­æ‰®æ¼”ç€åŠ¨æ€ç›‘æ§çš„è§’è‰²ï¼Œç”¨äºåœ¨å•ä¸ªè®­ç»ƒå‘¨æœŸå†…æ—©åœã€é€‰æ‹©æ£€æŸ¥ç‚¹ç­‰ï¼Œè€Œéç”¨äºå¤šæ¬¡é‡æ–°è®­ç»ƒã€‚</li>
</ul>
<p><strong>æ¼”è¿›ä¸åº”å¯¹ç­–ç•¥ï¼š</strong></p>
<ul>
<li>**å¤§è§„æ¨¡ç•™å‡ºæ³•æˆä¸ºä¸»æµï¼š**å¯¹äºé¢„è®­ç»ƒå’ŒåŸºç¡€æ¨¡å‹å¼€å‘ï¼Œå•ä¸€ã€å¤§è§„æ¨¡ã€é«˜è´¨é‡çš„ç•™å‡ºéªŒè¯é›†æ˜¯äº‹å®ä¸Šçš„æ ‡å‡†ï¼Œå…¶è§„æ¨¡è¶³ä»¥ä¿è¯è¯„ä¼°çš„ç¨³å®šæ€§ã€‚</li>
<li>**äº¤å‰éªŒè¯çš„é™çº§åº”ç”¨ï¼š**äº¤å‰éªŒè¯å¹¶æœªå®Œå…¨æ¶ˆå¤±ï¼Œè€Œæ˜¯è½¬ç§»åˆ°äº†å¤§æ¨¡å‹å·¥ä½œæµçš„ä¸‹æ¸¸ä»»åŠ¡ä¸­ã€‚
<ul>
<li>æç¤ºå·¥ç¨‹ï¼šå½“ä¸ºç‰¹å®šä»»åŠ¡è®¾è®¡æç¤ºæ—¶ï¼Œç ”ç©¶äººå‘˜å¯èƒ½ä¼šåœ¨ä¸€ä¸ªè¾ƒå°çš„ç¤ºä¾‹æ•°æ®é›†ä¸Šä½¿ç”¨kæŠ˜äº¤å‰éªŒè¯æ¥æ¯”è¾ƒä¸åŒæç¤ºæ¨¡æ¿çš„ç¨³å®šæ€§ã€‚</li>
<li>è¶…å‚æ•°å¾®è°ƒï¼šåœ¨å¯¹å¤§æ¨¡å‹è¿›è¡Œè½»é‡çº§å¾®è°ƒæ—¶ï¼Œå­¦ä¹ ç‡ã€LoRAç§©ç­‰è¶…å‚æ•°ä»ç„¶éœ€è¦è°ƒæ•´ã€‚æ­¤æ—¶ï¼Œå¯ä»¥åœ¨å¾®è°ƒæ•°æ®é›†ä¸Šä½¿ç”¨äº¤å‰éªŒè¯æ¥å¯»æ‰¾æœ€ä¼˜è®¾ç½®ã€‚</li>
<li>å°æ ·æœ¬/å°‘æ ·æœ¬å­¦ä¹ ï¼šåœ¨æ•°æ®æå…¶ç¨€ç¼ºçš„åœºæ™¯ä¸‹ï¼Œäº¤å‰éªŒè¯ä»ç„¶æ˜¯è¯„ä¼°å°æ ·æœ¬å­¦ä¹ ç­–ç•¥æœ‰æ•ˆæ€§çš„é‡è¦å·¥å…·ã€‚</li>
</ul>
</li>
<li>**ä»â€œé‡è®­ç»ƒâ€åˆ°â€œé‡è¯„ä¼°â€ï¼š**ç†å¿µä»â€œé€šè¿‡å¤šæ¬¡è®­ç»ƒæ¥è¯„ä¼°â€è½¬å‘â€œé€šè¿‡ä¸€æ¬¡è®­ç»ƒã€åœ¨å¤šä¸ªç»´åº¦/æ•°æ®é›†ä¸Šæ·±å…¥è¯„ä¼°â€ã€‚å¤§æ¨¡å‹çš„è¯„ä¼°é‡ç‚¹ä¸å†æ˜¯å•ä¸€çš„å‡†ç¡®ç‡ï¼Œè€Œæ˜¯æ¶µç›–äº†çœŸå®æ€§ã€æ¯’æ€§ã€åè§ã€æ¨ç†èƒ½åŠ›ã€æŒ‡ä»¤éµå¾ªèƒ½åŠ›ç­‰æ›´å¹¿æ³›çš„ç»´åº¦ï¼Œè¿™éœ€è¦æ„å»ºåºå¤§ä¸”å¤šæ ·åŒ–çš„è¯„ä¼°åŸºå‡†ã€‚</li>
</ul>
<p><strong>æ‰©å±•è¯´æ˜ï¼š</strong></p>
<ul>
<li>**å¤§è§„æ¨¡ç•™å‡ºæ³•ï¼š**å°±åƒä¸€æ‰€æ‹¥æœ‰æ•°ä¸‡å­¦ç”Ÿçš„å¤§å­¦ã€‚å­¦æ ¡è¦è¯„ä¼°ä¸€ä½æ•™æˆçš„æ•™å­¦æ°´å¹³ï¼Œä¸éœ€è¦è®©æ‰€æœ‰å­¦ç”Ÿéƒ½å‚åŠ è€ƒè¯•ã€‚ä»–ä»¬åªéœ€è¦éšæœºæŠ½å–ä¸€ä¸ªå‡ ç™¾äººçš„å¤§ç­è¿›è¡Œç»Ÿä¸€è€ƒè¯•ï¼Œå› ä¸ºè¿™ä¸ªç­çš„æˆç»©å·²ç»è¶³ä»¥ç¨³å®šã€å¯é åœ°åæ˜ å‡ºæ•™æˆçš„æ™®éæ•™å­¦æ•ˆæœã€‚è¿™ç§æ–¹æ³•é«˜æ•ˆä¸”æˆæœ¬å¯æ§ã€‚</li>
</ul>
<h2 data-id="heading-20">å…«ã€æ€»ç»“</h2>
<p>äº¤å‰éªŒè¯ä½œä¸ºæœºå™¨å­¦ä¹ æ¨¡å‹è¯„ä¼°çš„ç»å…¸æ–¹æ³•ï¼Œå…¶æ•°å­¦ç†è®ºåŸºç¡€åšå®ï¼Œå®è·µåº”ç”¨ä»·å€¼æ˜¾è‘—ã€‚å®ƒä¸ºæˆ‘ä»¬åœ¨æ•°æ®æœ‰é™çš„å¸¸æ€ä¸‹ï¼Œè¿›è¡Œå¯é çš„æ¨¡å‹è¯„ä¼°ã€é€‰æ‹©å’Œè°ƒå‚æä¾›äº†åšå®çš„åŸºç¡€ã€‚é€šè¿‡ç³»ç»Ÿçš„å¯è§†åŒ–åˆ†æï¼Œæˆ‘ä»¬å±•ç¤ºäº†äº¤å‰éªŒè¯åœ¨æ•°æ®ç†è§£ã€æ¨¡å‹æ¯”è¾ƒã€è¶…å‚æ•°ä¼˜åŒ–å’Œæœ€ç»ˆè¯„ä¼°ç­‰å„ä¸ªç¯èŠ‚çš„æ ¸å¿ƒä½œç”¨ã€‚</p>
<p>è¿›å…¥å¤§æ¨¡å‹æ—¶ä»£ï¼Œè™½ç„¶å…¶åº”ç”¨åœºæ™¯å› è®¡ç®—ç“¶é¢ˆè€Œæ”¶ç¼©ï¼Œä½†å…¶æ€æƒ³ç²¾é«“å·²å†…åŒ–ä¸ºæœºå™¨å­¦ä¹ å·¥ä½œæµçš„åŸºæœ¬é€»è¾‘ã€‚åœ¨èµ„æºå…è®¸çš„ä¼ ç»Ÿæœºå™¨å­¦ä¹ ä»»åŠ¡å’Œä¸­ä¸‹æ¸¸å¾®è°ƒä¸­ï¼Œå®ƒä¾ç„¶æ˜¯ä¸å¯æˆ–ç¼ºçš„é»„é‡‘æ ‡å‡†ï¼›è€Œåœ¨å¤§è§„æ¨¡åŸºç¡€æ¨¡å‹ç ”å‘ä¸­ï¼Œæˆ‘ä»¬åˆ™é‡‡ç”¨äº†æ›´ç¬¦åˆå…¶ç»æµæ€§çš„è¯„ä¼°èŒƒå¼ã€‚ç†è§£äº¤å‰éªŒè¯çš„åŸç†ä¸å±€é™ï¼Œå¹¶èƒ½æ ¹æ®å…·ä½“åœºæ™¯ï¼ˆæ•°æ®è§„æ¨¡ã€æ¨¡å‹å¤æ‚åº¦ã€è®¡ç®—é¢„ç®—ï¼‰çµæ´»é€‰æ‹©æœ€åˆé€‚çš„è¯„ä¼°ç­–ç•¥ï¼Œæ˜¯æ¯ä¸€ä½AIä»ä¸šè€…å¿…å¤‡çš„æ ¸å¿ƒèƒ½åŠ›ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä½ çœŸçš„ææ‡‚äº†LLMæ€§èƒ½å‹æµ‹çš„å„é¡¹æŒ‡æ ‡å—ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7590601860299505691</link>    <guid>https://juejin.cn/post/7590601860299505691</guid>    <pubDate>2026-01-03T03:25:36.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7590601860299505691" data-draft-id="7589386219449925647" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä½ çœŸçš„ææ‡‚äº†LLMæ€§èƒ½å‹æµ‹çš„å„é¡¹æŒ‡æ ‡å—ï¼Ÿ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-03T03:25:36.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åƒæœå†»ä¸åæœå†»çš®"/> <meta itemprop="url" content="https://juejin.cn/user/3642056016410728"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä½ çœŸçš„ææ‡‚äº†LLMæ€§èƒ½å‹æµ‹çš„å„é¡¹æŒ‡æ ‡å—ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3642056016410728/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åƒæœå†»ä¸åæœå†»çš®
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-03T03:25:36.000Z" title="Sat Jan 03 2026 03:25:36 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»19åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä¹‹å‰å‘ç°ä¸åŒæ¡†æ¶çš„æ€§èƒ½å·®å¼‚æœ‰å‡ºå…¥ï¼Œå½“æ—¶å¹¶æ²¡æœ‰å¤ªåœ¨æ„ã€‚æœ€è¿‘ï¼Œå¯¹ç¤¾åŒºå¼€æºçš„LLMæ€§èƒ½å‹æµ‹å·¥å…·åšäº†ä¸€ä¸ªæ·±åº¦ä½“éªŒã€‚å‘ç°å„ä¸ªæ¡†æ¶å¯¹äºå„æŒ‡æ ‡ï¼ˆå¦‚ï¼šILT/TPOTï¼‰çš„å®šä¹‰çœŸçš„æ˜¯äº”èŠ±å…«é—¨ï¼Œç¨å¾®ä¸æ³¨æ„å¯èƒ½å°±ä¼šç”¨é”™é‡Œé¢çš„æŒ‡æ ‡ã€‚æœ¬æ–‡æ¢³ç†äº†å„æ€§èƒ½å‹æµ‹å·¥å…·çš„è®¡ç®—å…¬å¼ï¼Œè¯•å›¾å¯¹é½å„å‹æµ‹å·¥å…·çš„æ€§èƒ½æŒ‡æ ‡ã€‚</p>
<blockquote>
<p>æˆ‘æ’°å†™çš„<strong>å¤§æ¨¡å‹ç›¸å…³çš„åšå®¢åŠé…å¥—ä»£ç </strong>å‡æ•´ç†æ”¾ç½®åœ¨Githubï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fliguodongiot%2Fllm-action%2Ftree%2Fmain" target="_blank" title="https://github.com/liguodongiot/llm-action/tree/main" ref="nofollow noopener noreferrer">llm-action</a>ï¼Œæœ‰éœ€è¦çš„æœ‹å‹è‡ªå–ã€‚</p>
</blockquote>
<h2 data-id="heading-0">å„æ¡†æ¶æ¦‚è¿°</h2>
<h3 data-id="heading-1">GuideLLM</h3>
<p>GuideLLM æ˜¯ä¸€ä¸ªç”¨äºè¯„ä¼°è¯­è¨€æ¨¡å‹åœ¨çœŸå®å·¥ä½œè´Ÿè½½å’Œé…ç½®ä¸‹æ€§èƒ½è¡¨ç°çš„å¹³å°ã€‚å®ƒæ¨¡æ‹Ÿä¸ OpenAI å’Œ vLLM åŸç”ŸæœåŠ¡å…¼å®¹çš„ç«¯åˆ°ç«¯äº¤äº’ï¼Œç”Ÿæˆåæ˜ ç”Ÿäº§ä½¿ç”¨æƒ…å†µçš„å·¥ä½œè´Ÿè½½æ¨¡å¼ï¼Œå¹¶ç”Ÿæˆè¯¦ç»†æŠ¥å‘Šï¼Œå¸®åŠ©å›¢é˜Ÿç†è§£ç³»ç»Ÿè¡Œä¸ºã€èµ„æºéœ€æ±‚å’Œè¿è¥é™åˆ¶ã€‚GuideLLM æ”¯æŒçœŸå®å’Œåˆæˆæ•°æ®é›†ã€å¤šæ¨¡æ€è¾“å…¥ä»¥åŠçµæ´»çš„æ‰§è¡Œé…ç½®æ–‡ä»¶ï¼Œä¸ºå·¥ç¨‹å¸ˆå’Œæœºå™¨å­¦ä¹ å›¢é˜Ÿæä¾›äº†ä¸€ä¸ªä¸€è‡´çš„æ¡†æ¶ï¼Œç”¨äºè¯„ä¼°æ¨¡å‹è¡Œä¸ºã€è°ƒæ•´éƒ¨ç½²å’Œè§„åˆ’å®¹é‡ï¼Œä»¥åº”å¯¹ç³»ç»Ÿæ¼”è¿›ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8191f4c464e74da492854f46064332cd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCD5p6c5Ya75LiN5ZCQ5p6c5Ya755qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768015536&amp;x-signature=cTFBNI9NiE%2Bafmd8npS5icr27f4%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/38fcc2bb188545aa9d5a99d3fc211852~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCD5p6c5Ya75LiN5ZCQ5p6c5Ya755qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768015536&amp;x-signature=WJ4rHvJep2Fbjh8zIk2yeDY7Bmw%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/798adedd44bb400fb882c86a3c4345a5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCD5p6c5Ya75LiN5ZCQ5p6c5Ya755qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768015536&amp;x-signature=O3lSsjeIkm62QyDyYf%2BnAq7TMSU%3D" alt="" loading="lazy"/></p>
<p><strong>GuideLLMç‰¹æ€§</strong>ï¼š</p>
<p>GuideLLM ä¸ºå›¢é˜Ÿåœ¨ç±»ç”Ÿäº§ç¯å¢ƒä¸­éƒ¨ç½² LLM æ—¶ï¼Œæ¸…æ™°åœ°å±•ç¤ºäº†æ€§èƒ½ã€æ•ˆç‡å’Œå¯é æ€§ã€‚</p>
<ul>
<li>æ•æ‰å®Œæ•´çš„å»¶è¿Ÿå’Œtokençº§ç»Ÿè®¡æ•°æ®ï¼Œç”¨äº SLO é©±åŠ¨çš„è¯„ä¼° ï¼ŒåŒ…æ‹¬ TTFTã€ITL å’Œç«¯åˆ°ç«¯è¡Œä¸ºçš„å®Œæ•´åˆ†å¸ƒã€‚</li>
<li>ç”Ÿæˆè·¨åŒæ­¥ã€å¹¶å‘å’ŒåŸºäºé€Ÿç‡æ¨¡å¼çš„çœŸå®ã€å¯é…ç½®çš„æµé‡æ¨¡å¼ ï¼ŒåŒ…æ‹¬å¯é‡å¤çš„æ‰«æä»¥è¯†åˆ«å®‰å…¨è¿è¡ŒèŒƒå›´ã€‚</li>
<li>æ”¯æŒçœŸå®å’Œåˆæˆå¤šæ¨¡æ€æ•°æ®é›† ï¼Œæ”¯æŒä¸€ä¸ªæ¡†æ¶å†…çš„å—æ§å®éªŒå’Œç”Ÿäº§å¼è¯„ä¼°ã€‚</li>
<li>ç”Ÿæˆæ ‡å‡†åŒ–ã€å¯å¯¼å‡ºçš„æŠ¥å‘Šï¼Œç”¨äºä»ªè¡¨ç›˜ã€åˆ†æå’Œå›å½’è·Ÿè¸ª ï¼Œç¡®ä¿å›¢é˜Ÿå’Œå·¥ä½œæµç¨‹é—´çš„ä¸€è‡´æ€§ã€‚</li>
<li>æä¾›é«˜ååé‡ã€å¯æ‰©å±•çš„åŸºå‡†æµ‹è¯•ï¼Œæ”¯æŒå¤šå¤„ç†ã€çº¿ç¨‹ã€å¼‚æ­¥æ‰§è¡Œï¼Œä»¥åŠçµæ´»çš„ CLI/APIç”¨äºæ”¯æŒè‡ªå®šä¹‰æˆ–å¿«é€Ÿå¯åŠ¨ã€‚</li>
</ul>
<p><strong>å®‰è£…</strong>ï¼š</p>
<pre><code class="hljs">pip install guidellm
</code></pre>
<p>æˆ–è€…ç›´æ¥ä½¿ç”¨é•œåƒï¼š</p>
<pre><code class="hljs language-sql" lang="sql">docker run <span class="hljs-operator">-</span>dt <span class="hljs-comment">--name guidellm-lgd \</span>
<span class="hljs-comment">--gpus all \</span>
<span class="hljs-comment">--network=host \</span>
<span class="hljs-comment">--shm-size=256g \</span>
<span class="hljs-comment">--env LANG=C.UTF-8 \</span>
<span class="hljs-operator">-</span>v <span class="hljs-operator">/</span>share<span class="hljs-operator">/</span><span class="hljs-keyword">global</span>:<span class="hljs-operator">/</span><span class="hljs-keyword">global</span> \
<span class="hljs-comment">--entrypoint /bin/bash \</span>
ghcr.io<span class="hljs-operator">/</span>vllm<span class="hljs-operator">-</span>project<span class="hljs-operator">/</span>guidellm:latest

docker <span class="hljs-keyword">exec</span> <span class="hljs-operator">-</span>it guidellm<span class="hljs-operator">-</span>lgd <span class="hljs-operator">/</span>bin<span class="hljs-operator">/</span>bash
</code></pre>
<p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-diff" lang="diff">BASE_PATH=/workspace/outputs/genai-bench-eval
NAME=qwen3-8b-bf16-parallel20

rm -rf $BASE_PATH/$NAME

genai-bench benchmark \
<span class="hljs-deletion">--api-backend sglang \</span>
<span class="hljs-deletion">--api-base "http://localhost:8000" \</span>
<span class="hljs-deletion">--api-model-name "Qwen3-8B" \</span>
<span class="hljs-deletion">--api-key "xxx" \</span>
<span class="hljs-deletion">--model-tokenizer "/global/models/Qwen3-8B" \</span>
<span class="hljs-deletion">--server-engine "SGLang" \</span>
<span class="hljs-deletion">--server-gpu-type "H200" \</span>
<span class="hljs-deletion">--server-version "v0.5.6" \</span>
<span class="hljs-deletion">--server-gpu-count 1 \</span>
<span class="hljs-deletion">--task text-to-text \</span>
<span class="hljs-deletion">--max-time-per-run 10 \</span>
<span class="hljs-deletion">--max-requests-per-run 500 \</span>
<span class="hljs-deletion">--num-concurrency 20 \</span>
<span class="hljs-deletion">--traffic-scenario "D(1024,128)" \</span>
<span class="hljs-deletion">--experiment-base-dir $BASE_PATH \</span>
<span class="hljs-deletion">--experiment-folder-name $NAME</span>
</code></pre>
<p>å…³é”®å‚æ•°ï¼š</p>
<ul>
<li>--profileï¼šå®šä¹‰æµé‡æ¨¡å¼ï¼Œé€‰é¡¹åŒ…æ‹¬ synchronous ï¼ˆé¡ºåºè¯·æ±‚ï¼‰ã€ concurrent ï¼ˆå¹¶è¡Œç”¨æˆ·ï¼‰ã€ throughputï¼ˆæœ€å¤§å®¹é‡ï¼‰ã€ constantï¼ˆæ¯ç§’å›ºå®šè¯·æ±‚æ•°ï¼‰ã€ poissonï¼ˆæ¯ç§’éšæœºè¯·æ±‚æ•°ï¼‰æˆ– sweepï¼ˆè‡ªåŠ¨é€Ÿç‡æ¢ç´¢ï¼‰ã€‚</li>
<li>--rateï¼šé€Ÿç‡å€¼ï¼Œå…¶å«ä¹‰å–å†³äº<code>--profile</code>ï¼Œsweep æ—¶æ˜¯åŸºå‡†æµ‹è¯•æ•°é‡ï¼Œconcurrent æ—¶æ˜¯åŒæ—¶è¯·æ±‚ï¼Œ constant / poisson æ—¶æ˜¯æ¯ç§’è¯·æ±‚æ•°ã€‚</li>
<li>--max-secondsï¼šæ¯æ¬¡åŸºå‡†æµ‹è¯•çš„æœ€å¤§æŒç»­æ—¶é—´ï¼ˆç§’æ•°ï¼‰ï¼ˆä¹Ÿå¯ä»¥ç”¨ --max-requests æ¥é™åˆ¶è¯·æ±‚æ•°ï¼‰ã€‚</li>
</ul>
<p><strong>å¸¸ç”¨æŒ‡æ ‡è®¡ç®—å…¬å¼</strong>ï¼š</p>
<ul>
<li>å¹³å‡ITL = (last_token - first_token) / (output_tokens - 1) , ä¸åŒ…æ‹¬ç¬¬ä¸€ä¸ªtoken</li>
<li>å¹³å‡TPOT = (last_token - request_start) / output_tokens , åŒ…æ‹¬ç¬¬ä¸€ä¸ªtoken</li>
<li>e2e latency = request_end - request_start</li>
<li>è¾“å‡ºååé‡ = output_tokens / e2e latency</li>
</ul>
<p>å‚è€ƒï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fvllm-project%2Fguidellm" target="_blank" title="https://github.com/vllm-project/guidellm" ref="nofollow noopener noreferrer">github.com/vllm-projecâ€¦</a></li>
</ul>
<h3 data-id="heading-2">Genai-Bench</h3>
<p>Genai-bench æ˜¯ä¸€æ¬¾å¼ºå¤§çš„åŸºå‡†å·¥å…·ï¼Œæ—¨åœ¨å…¨é¢è¯„ä¼°å¤§è¯­è¨€æ¨¡å‹æœåŠ¡ç³»ç»Ÿçš„tokençº§æ€§èƒ½è¯„ä¼°ã€‚å®ƒæä¾›äº†æ¨¡å‹æœåŠ¡æ€§èƒ½çš„è¯¦ç»†æ´å¯Ÿï¼Œè¿˜æœ‰ç”¨æˆ·å‹å¥½çš„ CLI å’Œå®æ—¶è¿›åº¦ç›‘æ§çš„å®æ—¶ UIã€‚</p>
<p><strong>ç‰¹å¾</strong>ï¼š</p>
<ul>
<li>ğŸ› ï¸ CLI å·¥å…· ï¼šæ— ç¼éªŒè¯ç”¨æˆ·è¾“å…¥å¹¶å¯åŠ¨åŸºå‡†æµ‹è¯•ã€‚</li>
<li>ğŸ“Š å®æ—¶ç•Œé¢ä»ªè¡¨ç›˜ ï¼šæ˜¾ç¤ºå½“å‰è¿›åº¦ã€æ—¥å¿—å’Œå®æ—¶æŒ‡æ ‡ã€‚</li>
<li>ğŸ“ ä¸°å¯Œçš„æ—¥å¿— ï¼šå®éªŒå®Œæˆåè‡ªåŠ¨å†™å…¥ç»ˆç«¯å’Œæ–‡ä»¶ã€‚</li>
<li>ğŸ“ˆ å®éªŒåˆ†æå™¨ ï¼šç”ŸæˆåŒ…å«åŸå§‹æŒ‡æ ‡æ•°æ®çš„å…¨é¢ Excel æŠ¥å‘Šï¼Œä»¥åŠçµæ´»çš„å›¾è¡¨é…ç½®ï¼ˆé»˜è®¤ 2x4 ç½‘æ ¼ï¼‰ï¼Œå¯è§†åŒ–å…³é”®æ€§èƒ½æŒ‡æ ‡ï¼ŒåŒ…æ‹¬ååé‡ã€å»¶è¿Ÿï¼ˆTTFTã€ç«¯å¯¹ç«¯ã€TPOTï¼‰ã€é”™è¯¯ç‡å’Œ RPSï¼Œé€‚ç”¨äºä¸åŒæµé‡åœºæ™¯å’Œå¹¶å‘æ°´å¹³ã€‚æ”¯æŒè‡ªå®šä¹‰ç»˜åˆ¶å¸ƒå±€å’Œå¤šè¡Œæ¯”è¾ƒã€‚</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2cffc32791874fa2b67ea1cb61c6eff5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCD5p6c5Ya75LiN5ZCQ5p6c5Ya755qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768015536&amp;x-signature=8rRdXTX7R86IkJxF6%2F1TvW%2BUZT4%3D" alt="" loading="lazy"/></p>
<p><strong>å®‰è£…</strong>ï¼š</p>
<pre><code class="hljs">pip install genai-bench
</code></pre>
<p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-diff" lang="diff">BASE_PATH=/workspace/outputs/genai-bench-eval
NAME=qwen3-8b-bf16-parallel20

rm -rf $BASE_PATH/$NAME

genai-bench benchmark \
<span class="hljs-deletion">--api-backend sglang \</span>
<span class="hljs-deletion">--api-base "http://localhost:8000" \</span>
<span class="hljs-deletion">--api-model-name "Qwen3-8B" \</span>
<span class="hljs-deletion">--api-key "xxx" \</span>
<span class="hljs-deletion">--model-tokenizer "/global/models/Qwen3-8B" \</span>
<span class="hljs-deletion">--server-engine "SGLang" \</span>
<span class="hljs-deletion">--server-gpu-type "H200" \</span>
<span class="hljs-deletion">--server-version "v0.5.6" \</span>
<span class="hljs-deletion">--server-gpu-count 1 \</span>
<span class="hljs-deletion">--task text-to-text \</span>
<span class="hljs-deletion">--max-time-per-run 10 \</span>
<span class="hljs-deletion">--max-requests-per-run 500 \</span>
<span class="hljs-deletion">--num-concurrency 20 \</span>
<span class="hljs-deletion">--traffic-scenario "D(1024,128)" \</span>
<span class="hljs-deletion">--experiment-base-dir $BASE_PATH \</span>
<span class="hljs-deletion">--experiment-folder-name $NAME</span>
</code></pre>
<p>å‚æ•°è¯´æ˜ï¼š</p>
<ul>
<li>--taskï¼šæŒ‡å®šä»»åŠ¡ç±»å‹ï¼Œæ”¯æŒæ–‡æœ¬ç”Ÿæˆã€æ–‡ç”Ÿå›¾ã€æ–‡æœ¬åµŒå…¥ã€å›¾åƒåµŒå…¥ã€‚</li>
<li>--traffic-scenarioï¼šæ¥å—ä¸€ç§æˆ–å¤šç§åœºæ™¯ã€‚æ¯æ¬¡è¿è¡Œéƒ½ä¼šè¿­ä»£æ‰€æä¾›çš„åœºæ™¯å’Œæ‰€é€‰è¿­ä»£å‚æ•°ï¼ˆå¹¶å‘æˆ–æ‰¹å¤„ç†å¤§å°ï¼‰ã€‚æ–‡æœ¬åˆ†å¸ƒç±»å‹ï¼š
<ul>
<li>ç¡®å®šæ€§è¾“å…¥è¾“å‡ºï¼š<code>D(num_input_tokens,num_output_tokens)</code>ï¼Œæ¯”å¦‚ï¼š<code>D(100,1000)</code></li>
<li>æ­£æ€åˆ†å¸ƒâ€Œï¼š<code>N(mean_input_tokens,stddev_input_tokens)/(mean_output_tokens,stddev_output_tokens)</code>ï¼Œä¾‹å¦‚ï¼š<code>N(480,240)/(300,150)</code></li>
<li>å‡åŒ€åˆ†å¸ƒï¼š<code>U(min_input_tokens,max_input_tokens)/(min_output_tokens,max_output_tokens)</code>ï¼Œä¾‹å¦‚ï¼š<code>U(50,100)/(200,250)</code></li>
</ul>
</li>
</ul>
<p>ä»ç»“æœç”Ÿæˆ Excel æŠ¥å‘Šï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">BASE_PATH</span>=/workspace/outputs/genai-bench-eval
<span class="hljs-attr">NAME</span>=qwen3-<span class="hljs-number">8</span>b-bf16-parallel20

genai-bench excel --experiment-folder $BASE_PATH/$NAME \
  --excel-name results \
  --metric-percentile mean
</code></pre>
<p><strong>å¸¸è§æŒ‡æ ‡è®¡ç®—å…¬å¼</strong>ï¼š</p>
<ul>
<li>metrics.<strong>e2e_latency</strong> = response.end_time - response.start_time</li>
<li>metrics.<strong>num_input_tokens</strong> = response.num_prefill_tokens</li>
<li>metrics.total_tokens = metrics.num_input_tokens</li>
<li>metrics.<strong>num_output_tokens</strong> = response.tokens_received</li>
<li>metrics.<strong>total_tokens</strong> += metrics.num_output_tokens</li>
<li>metrics.<strong>ttft</strong> = response.time_at_first_token - response.start_time</li>
<li>metrics.output_latency = metrics.e2e_latency - metrics.ttft</li>
<li>metrics.<strong>tpot</strong> = metrics.output_latency / (metrics.num_output_tokens - 1)ï¼Œç›¸å½“äºGuideLLMä¸­çš„ITL</li>
<li>metrics.<strong>output_throughput</strong> = metrics.num_output_tokens - 1) / metrics.output_latency</li>
</ul>
<p>å‚è€ƒï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fsgl-project%2Fgenai-bench" target="_blank" title="https://github.com/sgl-project/genai-bench" ref="nofollow noopener noreferrer">github.com/sgl-projectâ€¦</a></li>
</ul>
<h3 data-id="heading-3">AIPerf</h3>
<p>AIPerf æ˜¯ä¸€æ¬¾å…¨é¢çš„åŸºå‡†æµ‹è¯•å·¥å…·ï¼Œç”¨äºè¡¡é‡ç”Ÿæˆå¼ AI æ¨¡å‹çš„æ€§èƒ½ã€‚å®ƒé€šè¿‡å‘½ä»¤è¡Œå±•ç¤ºè¯¦ç»†çš„æŒ‡æ ‡ä»¥åŠè¯¦å°½çš„åŸºå‡†æ€§èƒ½æŠ¥å‘Šã€‚</p>
<p>AIPerf ä¹‹å‰ï¼Œè‹±ä¼Ÿè¾¾å¼€æºçš„å¤§æ¨¡å‹æ€§èƒ½å·¥å…·ä¸ºGenAI-Perfï¼Œç›®å‰å·²ç»é€æ­¥æ·˜æ±°ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d87a06df9d974ee9b313d9bd9b84fb1e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCD5p6c5Ya75LiN5ZCQ5p6c5Ya755qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768015536&amp;x-signature=f%2FvB7ZF%2BRL%2B8b1HZHChvi0CzdH8%3D" alt="" loading="lazy"/></p>
<p><strong>ç‰¹æ€§</strong>ï¼š</p>
<ul>
<li>é€šè¿‡å¤šè¿›ç¨‹æ”¯æŒå¯æ‰©å±•</li>
<li>æ¨¡å—åŒ–è®¾è®¡ä¾¿äºç”¨æˆ·ä¿®æ”¹</li>
<li>æ”¯æŒå¤šç§åŸºå‡†æµ‹è¯•æ¨¡å¼ï¼š
<ul>
<li>å¹¶å‘</li>
<li>è¯·æ±‚ç‡</li>
<li>æœ€å¤§å¹¶å‘é‡çš„è¯·æ±‚ç‡</li>
<li>è¿½è¸ªå›æ”¾ç”¨äºé‡ç°æ€§èƒ½åŸºå‡†æµ‹è¯•ç»“æœ</li>
</ul>
</li>
<li>æ”¯æŒå…¬å¼€æ•°æ®é›†</li>
</ul>
<p><strong>æ”¯æŒçš„ API</strong>ï¼š</p>
<ul>
<li>OpenAI chat completions</li>
<li>OpenAI completions</li>
<li>OpenAI embeddings</li>
<li>OpenAI audio: request throughput and latency</li>
<li>OpenAI images: request throughput and latency</li>
<li>NIM rankings</li>
</ul>
<p><strong>å®‰è£…</strong>ï¼š</p>
<pre><code class="hljs">pip install aiperf
</code></pre>
<p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-diff" lang="diff">aiperf profile \
<span class="hljs-deletion">--model qwen3 \</span>
<span class="hljs-deletion">--tokenizer /global/models/Qwen3-8B \</span>
<span class="hljs-deletion">--url localhost:8000 \</span>
<span class="hljs-deletion">--endpoint-type chat \</span>
<span class="hljs-deletion">--endpoint /v1/chat/completions \</span>
<span class="hljs-deletion">--streaming \</span>
<span class="hljs-deletion">--synthetic-input-tokens-mean 1024 \</span>
<span class="hljs-deletion">--synthetic-input-tokens-stddev 0 \</span>
<span class="hljs-deletion">--output-tokens-mean 128 \</span>
<span class="hljs-deletion">--output-tokens-stddev 0 \</span>
<span class="hljs-deletion">--extra-inputs ignore_eos:true \</span>
<span class="hljs-deletion">--concurrency 20 \</span>
<span class="hljs-deletion">--request-count 500 \</span>
<span class="hljs-deletion">--warmup-request-count 0 \</span>
<span class="hljs-deletion">--num-dataset-entries 1000 \</span>
<span class="hljs-deletion">--random-seed 100    </span>
</code></pre>
<p><strong>ç”ŸæˆåŸºå‡†æµ‹è¯•ç»“æœ</strong>ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/04689647972645dea053dd8f5b55f73c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCD5p6c5Ya75LiN5ZCQ5p6c5Ya755qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768015536&amp;x-signature=5geHI2BFqiW9hLOPpq%2B1Hrs8Yhs%3D" alt="" loading="lazy"/></p>
<p><strong>å¸¸ç”¨æŒ‡æ ‡è®¡ç®—å…¬å¼</strong>ï¼š</p>
<ul>
<li><strong>TTFT</strong> = First Response Timestamp - Request Start Timestamp</li>
<li>TTST = Second Response Timestamp - First Response Timestamp</li>
<li>Inter Token Latency(<strong>ITL</strong>) = (Request Latency - Time to First Token) / (Output Sequence Length - 1)</li>
<li><strong>ICL</strong> = <code>[timestamps[i] - timestamps[i-1] for i in range(1, len(timestamps))]</code> ï¼Œæ¯”å¦‚ï¼šå¯¹äºå—åœ¨ [100ms, 150ms, 210ms] æ—¶é—´åˆ°è¾¾çš„æµå“åº”ã€‚ICL = [50ms, 60ms]ï¼ˆè¿ç»­æ—¶é—´æˆ³ä¹‹é—´çš„å·®å¼‚ï¼‰</li>
</ul>
<p>å‚è€ƒï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fai-dynamo%2Faiperf" target="_blank" title="https://github.com/ai-dynamo/aiperf" ref="nofollow noopener noreferrer">github.com/ai-dynamo/aâ€¦</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftriton-inference-server%2Fperf_analyzer%2Ftree%2Fmain%2Fgenai-perf" target="_blank" title="https://github.com/triton-inference-server/perf_analyzer/tree/main/genai-perf" ref="nofollow noopener noreferrer">github.com/triton-infeâ€¦</a></li>
</ul>
<h3 data-id="heading-4">EvalScope</h3>
<p>EvalScope æ˜¯é­”æ­ç¤¾åŒºå€¾åŠ›æ‰“é€ çš„æ¨¡å‹è¯„æµ‹ä¸æ€§èƒ½åŸºå‡†æµ‹è¯•æ¡†æ¶ï¼Œä¸ºæ‚¨çš„æ¨¡å‹è¯„ä¼°éœ€æ±‚æä¾›ä¸€ç«™å¼è§£å†³æ–¹æ¡ˆã€‚æ”¯æŒçš„æ¨¡å‹ç±»å‹å¦‚ä¸‹ï¼š</p>
<ul>
<li>ğŸ§  å¤§è¯­è¨€æ¨¡å‹</li>
<li>ğŸ¨ å¤šæ¨¡æ€æ¨¡å‹</li>
<li>ğŸ” Embedding æ¨¡å‹</li>
<li>ğŸ† Reranker æ¨¡å‹</li>
<li>ğŸ–¼ï¸ CLIP æ¨¡å‹</li>
<li>ğŸ­ AIGCæ¨¡å‹ï¼ˆå›¾ç”Ÿæ–‡/è§†é¢‘ï¼‰</li>
</ul>
<p>EvalScope ä¸ä»…ä»…æ˜¯ä¸€ä¸ªè¯„æµ‹å·¥å…·ï¼Œå®ƒè¿˜å†…ç½®å¤šä¸ªä¸šç•Œè®¤å¯çš„æµ‹è¯•åŸºå‡†å’Œè¯„æµ‹æŒ‡æ ‡ï¼šMMLUã€CMMLUã€C-Evalã€GSM8K ç­‰ã€‚åŒæ—¶ï¼Œæ”¯æŒæ¨¡å‹æ¨ç†æ€§èƒ½å‹æµ‹ï¼Œç¡®ä¿æ‚¨çš„æ¨¡å‹åœ¨å®é™…åº”ç”¨ä¸­è¡¨ç°å‡ºè‰²ã€‚</p>
<p>EvalScope æ•´ä½“æ¶æ„å¦‚ä¸‹å›¾æ‰€ç¤ºï¼ŒåŒ…æ‹¬ä»¥ä¸‹æ¨¡å—ï¼š</p>
<ol>
<li>è¾“å…¥å±‚</li>
</ol>
<ul>
<li>æ¨¡å‹æ¥æºï¼šAPIæ¨¡å‹ï¼ˆOpenAI APIï¼‰ã€æœ¬åœ°æ¨¡å‹ï¼ˆModelScopeï¼‰</li>
<li>æ•°æ®é›†ï¼šæ ‡å‡†è¯„æµ‹åŸºå‡†ï¼ˆMMLU/GSM8kç­‰ï¼‰ã€è‡ªå®šä¹‰æ•°æ®ï¼ˆMCQ/QAï¼‰</li>
</ul>
<ol start="2">
<li>æ ¸å¿ƒåŠŸèƒ½</li>
</ol>
<p>å¤šåç«¯è¯„ä¼°</p>
<ul>
<li>åŸç”Ÿåç«¯ï¼šLLM/VLM/Embedding/T2Iæ¨¡å‹ç»Ÿä¸€è¯„ä¼°</li>
<li>é›†æˆæ¡†æ¶ï¼šOpenCompass/MTEB/VLMEvalKit/RAGAS</li>
</ul>
<p>æ€§èƒ½ç›‘æ§</p>
<ul>
<li>æ¨¡å‹æ’ä»¶ï¼šæ”¯æŒå¤šç§æ¨¡å‹æœåŠ¡API</li>
<li>æ•°æ®æ’ä»¶ï¼šæ”¯æŒå¤šç§æ•°æ®æ ¼å¼</li>
<li>æŒ‡æ ‡è¿½è¸ªï¼šTTFT/TPOP/ç¨³å®šæ€§ ç­‰æŒ‡æ ‡</li>
</ul>
<p>å·¥å…·æ‰©å±•</p>
<ul>
<li>é›†æˆï¼šTool-Bench/Needle-in-a-Haystack/BFCL-v3</li>
</ul>
<ol start="3">
<li>è¾“å‡ºå±‚</li>
</ol>
<ul>
<li>ç»“æ„åŒ–æŠ¥å‘Š: æ”¯æŒJSON/Table/Logs</li>
<li>å¯è§†åŒ–å¹³å°ï¼šæ”¯æŒGradio/Wandb/SwanLab</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5f442ea528144788a5bc7979c035185c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCD5p6c5Ya75LiN5ZCQ5p6c5Ya755qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768015536&amp;x-signature=GuDFzyGxA0p%2BmDRobMwnns8pJOg%3D" alt="" loading="lazy"/></p>
<p><strong>æ¡†æ¶ç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li>åŸºå‡†æ•°æ®é›†ï¼šé¢„ç½®äº†å¤šä¸ªå¸¸ç”¨æµ‹è¯•åŸºå‡†ï¼ŒåŒ…æ‹¬ï¼šMMLUã€CMMLUã€C-Evalã€GSM8Kã€ARCã€HellaSwagã€TruthfulQAã€MATHã€HumanEvalç­‰ã€‚</li>
<li>è¯„æµ‹æŒ‡æ ‡ï¼šå®ç°äº†å¤šç§å¸¸ç”¨è¯„æµ‹æŒ‡æ ‡ã€‚</li>
<li>æ¨¡å‹æ¥å…¥ï¼šç»Ÿä¸€çš„æ¨¡å‹æ¥å…¥æœºåˆ¶ï¼Œå…¼å®¹å¤šä¸ªç³»åˆ—æ¨¡å‹çš„Generateã€Chatæ¥å£ã€‚</li>
<li>è‡ªåŠ¨è¯„æµ‹ï¼šåŒ…æ‹¬å®¢è§‚é¢˜è‡ªåŠ¨è¯„æµ‹å’Œä½¿ç”¨ä¸“å®¶æ¨¡å‹è¿›è¡Œçš„å¤æ‚ä»»åŠ¡è¯„æµ‹ã€‚</li>
<li>è¯„æµ‹æŠ¥å‘Šï¼šè‡ªåŠ¨ç”Ÿæˆè¯„æµ‹æŠ¥å‘Šã€‚</li>
<li>ç«æŠ€åœº(Arena)æ¨¡å¼ï¼šç”¨äºæ¨¡å‹é—´çš„æ¯”è¾ƒä»¥åŠæ¨¡å‹çš„å®¢è§‚è¯„æµ‹ï¼Œæ”¯æŒå¤šç§è¯„æµ‹æ¨¡å¼ï¼ŒåŒ…æ‹¬ï¼š
<ul>
<li>Single modeï¼šå¯¹å•ä¸ªæ¨¡å‹è¿›è¡Œè¯„åˆ†ã€‚</li>
<li>Pairwise-baseline modeï¼šä¸åŸºçº¿æ¨¡å‹è¿›è¡Œå¯¹æ¯”ã€‚</li>
<li>Pairwise (all) modeï¼šæ‰€æœ‰æ¨¡å‹é—´çš„ä¸¤ä¸¤å¯¹æ¯”ã€‚</li>
</ul>
</li>
<li>å¯è§†åŒ–å·¥å…·ï¼šæä¾›ç›´è§‚çš„è¯„æµ‹ç»“æœå±•ç¤ºã€‚</li>
<li>æ¨¡å‹æ€§èƒ½è¯„æµ‹ï¼šæä¾›æ¨¡å‹æ¨ç†æœåŠ¡å‹æµ‹å·¥å…·å’Œè¯¦ç»†ç»Ÿè®¡ã€‚</li>
<li>OpenCompassé›†æˆï¼šæ”¯æŒOpenCompassä½œä¸ºè¯„æµ‹åç«¯ï¼Œå¯¹å…¶è¿›è¡Œäº†é«˜çº§å°è£…å’Œä»»åŠ¡ç®€åŒ–ï¼Œæ‚¨å¯ä»¥æ›´è½»æ¾åœ°æäº¤ä»»åŠ¡è¿›è¡Œè¯„æµ‹ã€‚</li>
<li>VLMEvalKité›†æˆï¼šæ”¯æŒVLMEvalKitä½œä¸ºè¯„æµ‹åç«¯ï¼Œè½»æ¾å‘èµ·å¤šæ¨¡æ€è¯„æµ‹ä»»åŠ¡ï¼Œæ”¯æŒå¤šç§å¤šæ¨¡æ€æ¨¡å‹å’Œæ•°æ®é›†ã€‚</li>
<li>å…¨é“¾è·¯æ”¯æŒï¼šé€šè¿‡ä¸ms-swiftè®­ç»ƒæ¡†æ¶çš„æ— ç¼é›†æˆï¼Œå®ç°æ¨¡å‹è®­ç»ƒã€æ¨¡å‹éƒ¨ç½²ã€æ¨¡å‹è¯„æµ‹ã€è¯„æµ‹æŠ¥å‘ŠæŸ¥çœ‹çš„ä¸€ç«™å¼å¼€å‘æµç¨‹ï¼Œæå‡ç”¨æˆ·çš„å¼€å‘æ•ˆç‡ã€‚</li>
</ul>
<p>EvalScope æ”¯æŒOpenAI APIæ ¼å¼æ¨¡å‹æœåŠ¡ä»¥åŠå¤šç§æ•°æ®é›†æ ¼å¼ï¼Œæ–¹ä¾¿ç”¨æˆ·è¿›è¡Œæ€§èƒ½è¯„æµ‹ã€‚å…·ä½“ä½¿ç”¨å¦‚ä¸‹ï¼š</p>
<p><strong>å®‰è£…</strong>ï¼š</p>
<pre><code class="hljs language-css" lang="css">pip install evalscope<span class="hljs-selector-attr">[perf]</span> -U
</code></pre>
<p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-lua" lang="lua">evalscope perf \
  <span class="hljs-comment">--parallel 20 \</span>
  <span class="hljs-comment">--number 500  \</span>
  <span class="hljs-comment">--model Qwen-bf16-isl1k-osl128-056post1 \</span>
  <span class="hljs-comment">--url http://localhost:8000/v1/chat/completions \</span>
  <span class="hljs-comment">--api openai \</span>
  <span class="hljs-comment">--dataset random \</span>
  <span class="hljs-comment">--max-tokens 128 \</span>
  <span class="hljs-comment">--min-tokens 128 \</span>
  <span class="hljs-comment">--prefix-length 0 \</span>
  <span class="hljs-comment">--min-prompt-length 1024 \</span>
  <span class="hljs-comment">--max-prompt-length 1024 \</span>
  <span class="hljs-comment">--tokenizer-path /global/models/Qwen3-8B \</span>
  <span class="hljs-comment">--extra-args '{"ignore_eos": true}' \</span>
  <span class="hljs-comment">--outputs-dir /workspace/outputs/evalscope-perf-qwen3-8b</span>
</code></pre>
<p>å‚æ•°è¯´æ˜ï¼š</p>
<ul>
<li>parallel: è¯·æ±‚çš„å¹¶å‘æ•°ï¼Œå¯ä»¥ä¼ å…¥å¤šä¸ªå€¼ï¼Œç”¨ç©ºæ ¼éš”å¼€</li>
<li>number: å‘å‡ºçš„è¯·æ±‚çš„æ€»æ•°é‡ï¼Œå¯ä»¥ä¼ å…¥å¤šä¸ªå€¼ï¼Œç”¨ç©ºæ ¼éš”å¼€ï¼ˆä¸parallelä¸€ä¸€å¯¹åº”ï¼‰</li>
<li>url: è¯·æ±‚çš„URLåœ°å€</li>
<li>model: ä½¿ç”¨çš„æ¨¡å‹åç§°</li>
<li>api: ä½¿ç”¨çš„APIæœåŠ¡ï¼Œé»˜è®¤ä¸ºopenai</li>
<li>dataset: æ•°æ®é›†åç§°ï¼Œæ­¤å¤„ä¸ºrandomï¼Œè¡¨ç¤ºéšæœºç”Ÿæˆæ•°æ®é›†ã€‚</li>
<li>tokenizer-path: æ¨¡å‹çš„tokenizerè·¯å¾„ï¼Œç”¨äºè®¡ç®—tokenæ•°é‡ï¼ˆåœ¨randomæ•°æ®é›†ä¸­æ˜¯å¿…é¡»çš„ï¼‰</li>
<li>extra-args: è¯·æ±‚ä¸­çš„é¢å¤–çš„å‚æ•°ï¼Œä¼ å…¥jsonæ ¼å¼çš„å­—ç¬¦ä¸²ï¼Œä¾‹å¦‚ï¼š{"ignore_eos": true} è¡¨ç¤ºå¿½ç•¥ç»“æŸtoken</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d9da7867f8f24d5c9e64ffd629063984~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCD5p6c5Ya75LiN5ZCQ5p6c5Ya755qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768015536&amp;x-signature=VF3FNqn5ec4niVhkTKlslYTy1Wk%3D" alt="" loading="lazy"/></p>
<p><strong>å¸¸è§æŒ‡æ ‡è®¡ç®—å…¬å¼</strong>ï¼š</p>
<ul>
<li><strong>time_per_output_token</strong> (TPOT) = (query_latency - first_chunk_latency) / (completion_tokens - 1)ï¼Œæ³¨æ„ï¼šAIPerfå’ŒGuideLLMä¸­çš„itlå®é™…ä¸Šå’ŒEvalsSopeçš„è®¡ç®—å…¬å¼ä¸€è‡´ã€‚</li>
<li>n_time_per_output_token += benchmark_data.time_per_output_token</li>
<li><strong>avg_time_per_token</strong> (å¹³å‡TPOT) = n_time_per_output_token / n_succeed_queries</li>
<li>total_first_chunk_latency += benchmark_data.first_chunk_latency</li>
<li><strong>avg_first_chunk_latency</strong>ï¼ˆå¹³å‡TTFTï¼‰ = total_first_chunk_latency / n_succeed_queries</li>
<li>inter_chunk_latency = <code>[t2 - t1 for t1, t2 in zip(chunk_times[:-1], chunk_times[1:])]</code></li>
<li>n_total_inter_token_latency += benchmark_data.inter_chunk_latency</li>
<li><strong>avg_inter_token_latency</strong>ï¼ˆå¹³å‡ITLï¼‰ = sum(n_total_inter_token_latency) / len(n_total_inter_token_latency)</li>
<li><strong>qps</strong> = n_succeed_queries / total_time</li>
<li>avg_output_token_per_secondsï¼ˆè¾“å‡ºtokenååé‡ï¼‰ = n_total_completion_tokens / total_time</li>
</ul>
<p><strong>å‚è€ƒ</strong>ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fevalscope.readthedocs.io%2Fzh-cn%2Flatest%2Fuser_guides%2Fstress_test%2Fquick_start.html" target="_blank" title="https://evalscope.readthedocs.io/zh-cn/latest/user_guides/stress_test/quick_start.html" ref="nofollow noopener noreferrer">evalscope.readthedocs.io/zh-cn/latesâ€¦</a></li>
</ul>
<h3 data-id="heading-5">Inference Perf</h3>
<p>Inference Perf æ˜¯ä¸€æ¬¾ç”Ÿæˆå¼ AI æ¨ç†æ€§èƒ½åŸºå‡†å·¥å…·ï¼Œå…è®¸æ‚¨å¯¹éƒ¨ç½²çš„æ¨ç†æ¨¡å‹çš„æ€§èƒ½è¿›è¡ŒåŸºå‡†æµ‹è¯•å’Œåˆ†æã€‚å®ƒä¸å—æ¨¡å‹æœåŠ¡å½±å“ï¼Œå¯ç”¨äº<strong>æ€§èƒ½æµ‹é‡</strong>å’Œ<strong>å¯¹ä¸åŒç³»ç»Ÿè¿›è¡Œå…¨é¢æ¯”è¾ƒ</strong>ã€‚å®ƒæ˜¯æ¨ç†åŸºå‡†æµ‹è¯•å’ŒæŒ‡æ ‡æ ‡å‡†åŒ–å·¥ä½œçš„ä¸€éƒ¨åˆ†ï¼Œæ—¨åœ¨æ ‡å‡†åŒ– Kubernetes å’Œæ¨¡å‹æœåŠ¡ç¤¾åŒºä¸­ç”¨äºè¡¡é‡æ¨ç†æ€§èƒ½çš„åŸºå‡†å·¥å…·å’ŒæŒ‡æ ‡ ã€‚</p>
<p><strong>æ¶æ„</strong>ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4b98ffc0ed704095aaefede01b825606~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCD5p6c5Ya75LiN5ZCQ5p6c5Ya755qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768015536&amp;x-signature=sxSdIS7oV4N1dchtAoOGQbJ3Wpg%3D" alt="" loading="lazy"/></p>
<p><strong>ä¸»è¦ç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li>é«˜åº¦å¯æ‰©å±•ï¼Œå¹¶æ”¯æŒå¤§è§„æ¨¡æ¨¡å‹æ¨ç†ç”Ÿäº§éƒ¨ç½²çš„åŸºå‡†æµ‹è¯•ã€‚</li>
<li>æŠ¥å‘Šè¡¡é‡ LLM æ€§èƒ½çš„å…³é”®æŒ‡æ ‡ã€‚</li>
<li>æ”¯æŒä¸åŒçš„çœŸå®ä¸–ç•Œå’Œåˆæˆæ•°æ®é›†ã€‚</li>
<li>æ”¯æŒä¸åŒçš„ APIï¼Œå¹¶æ”¯æŒå¤šä¸ªå…·å¢å¼ºæŒ‡æ ‡çš„æ¨¡å‹æœåŠ¡ï¼Œå¦‚ vLLMã€SGLang å’Œ TGIã€‚</li>
<li>æ”¯æŒä½¿ç”¨ LLM-dã€Dynamo å’Œ Inference Gateway ç­‰æ¡†æ¶è¿›è¡Œå¤§å‹éƒ¨ç½²åŸºå‡†æµ‹è¯•ã€‚</li>
<li>æ”¯æŒæŒ‡å®šç²¾ç¡®çš„è¾“å…¥å’Œè¾“å‡ºåˆ†å¸ƒä»¥æ¨¡æ‹Ÿä¸åŒåœºæ™¯â€”â€”æ”¯æŒé«˜æ–¯åˆ†å¸ƒã€å›ºå®šé•¿åº¦ã€æœ€å°æœ€å¤§åœºæ™¯ã€‚</li>
<li>ç”Ÿæˆä¸åŒçš„è´Ÿè½½æ¨¡å¼ï¼Œå¹¶èƒ½å¯¹ç‰¹å®šåœºæ™¯è¿›è¡ŒåŸºå‡†æµ‹è¯•ï¼Œå¦‚çªå‘æµé‡ã€æ‰©å±•è‡³é¥±å’Œä»¥åŠå…¶ä»–è‡ªåŠ¨æ‰©å±•/è·¯ç”±åœºæ™¯ã€‚</li>
<li>æ”¯æŒå¤šè½®èŠå¤©å¯¹è¯ï¼Œå¯ä»¥ä¿æŒä¸€ç³»åˆ—æ¶ˆæ¯çš„ä¸Šä¸‹æ–‡ï¼Œæ¨¡æ‹Ÿå¯¹è¯ã€‚æ¯è½®èŠå¤©ä¸­çš„è¯·æ±‚å°†ä¿ç•™å‰ç½®æ¶ˆæ¯ä½œä¸ºå‰ç¼€ã€‚</li>
</ul>
<p><strong>å®‰è£…</strong>ï¼š</p>
<pre><code class="hljs">pip install inference-perf
</code></pre>
<p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">inference-perf --config_file config.yml
</code></pre>
<p>å…¶ä¸­ï¼Œconfig.ymlå†…å®¹å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">load:</span>
  <span class="hljs-attr">type:</span> <span class="hljs-string">constant</span>
  <span class="hljs-attr">interval:</span> <span class="hljs-number">15</span>
  <span class="hljs-attr">stages:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">rate:</span> <span class="hljs-number">1</span>
    <span class="hljs-attr">duration:</span> <span class="hljs-number">30</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">rate:</span> <span class="hljs-number">2</span>
    <span class="hljs-attr">duration:</span> <span class="hljs-number">30</span>
<span class="hljs-attr">api:</span>
  <span class="hljs-attr">type:</span> <span class="hljs-string">completion</span>
<span class="hljs-attr">server:</span>
  <span class="hljs-attr">type:</span> <span class="hljs-string">sglang</span>
  <span class="hljs-attr">model_name:</span> <span class="hljs-string">HuggingFaceTB/SmolLM2-135M-Instruct</span>
  <span class="hljs-attr">base_url:</span> <span class="hljs-string">http://0.0.0.0:8000</span>
<span class="hljs-attr">tokenizer:</span>
  <span class="hljs-attr">pretrained_model_name_or_path:</span> <span class="hljs-string">HuggingFaceTB/SmolLM2-135M-Instruct</span>
<span class="hljs-attr">data:</span>
  <span class="hljs-attr">type:</span> <span class="hljs-string">synthetic</span>
  <span class="hljs-attr">input_distribution:</span>
    <span class="hljs-attr">min:</span> <span class="hljs-number">10</span>             <span class="hljs-comment"># min length of the synthetic prompts</span>
    <span class="hljs-attr">max:</span> <span class="hljs-number">100</span>            <span class="hljs-comment"># max length of the synthetic prompts</span>
    <span class="hljs-attr">mean:</span> <span class="hljs-number">50</span>            <span class="hljs-comment"># mean length of the synthetic prompts</span>
    <span class="hljs-attr">std:</span> <span class="hljs-number">10</span>             <span class="hljs-comment"># standard deviation of the length of the synthetic prompts</span>
  <span class="hljs-attr">output_distribution:</span>
    <span class="hljs-attr">min:</span> <span class="hljs-number">10</span>             <span class="hljs-comment"># min length of the output to be generated</span>
    <span class="hljs-attr">max:</span> <span class="hljs-number">100</span>            <span class="hljs-comment"># max length of the output to be generated</span>
    <span class="hljs-attr">mean:</span> <span class="hljs-number">50</span>            <span class="hljs-comment"># mean length of the output to be generated</span>
    <span class="hljs-attr">std:</span> <span class="hljs-number">10</span>             <span class="hljs-comment"># standard deviation of the length of the output to be generated</span>
<span class="hljs-attr">metrics:</span>
  <span class="hljs-attr">type:</span> <span class="hljs-string">prometheus</span>
  <span class="hljs-attr">prometheus:</span>
    <span class="hljs-attr">url:</span> <span class="hljs-string">http://localhost:9090</span>
    <span class="hljs-attr">scrape_interval:</span> <span class="hljs-number">15</span>
<span class="hljs-attr">report:</span>
  <span class="hljs-attr">request_lifecycle:</span>
    <span class="hljs-attr">summary:</span> <span class="hljs-literal">true</span>
    <span class="hljs-attr">per_stage:</span> <span class="hljs-literal">true</span>
    <span class="hljs-attr">per_request:</span> <span class="hljs-literal">true</span>
</code></pre>
<p><strong>å¸¸è§æŒ‡æ ‡è®¡ç®—å…¬å¼</strong>ï¼š</p>
<ul>
<li><strong>time_per_output_token</strong>ï¼ˆTPOTï¼‰= <code>(x.info.output_token_times[-1] - x.info.output_token_times[0]) / (len(x.info.output_token_times) - 1)</code> ï¼Œè¯¥æŒ‡æ ‡ç›¸å½“äºGuideLLMçš„ITL</li>
<li>normalized_time_per_output_tokenï¼ˆæ ‡å‡†TPOTï¼‰ = (metric.end_time - metric.start_time) / metric.info.output_tokens ï¼Œè¯¥æŒ‡æ ‡ç›¸å½“äºGuideLLMçš„TPOT</li>
<li><strong>TTFT</strong> = x.info.output_token_times[0] - x.start_time</li>
<li><strong>å¹³å‡ITL</strong> = <code>mean([t2 - t1   for x in streamable   for t1, t2 in zip(x.info.output_token_times, x.info.output_token_times[1:], strict=False)])</code></li>
<li>total_time = max(x.end_time for x in metrics) - min(x.start_time for x in metrics)` ï¼Œç›¸å½“äºAIPerfä¸­çš„ICLæ±‚å¹³å‡ã€‚</li>
<li><strong>output_tokens_per_sec</strong> (è¾“å‡ºtokenååé‡) = sum(x.info.output_tokens for x in all_successful) / total_time</li>
<li><strong>requests_per_sec</strong>ï¼ˆRPSï¼‰ = len(all_successful) / total_time</li>
</ul>
<p>å‚è€ƒï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fkubernetes-sigs%2Finference-perf" target="_blank" title="https://github.com/kubernetes-sigs/inference-perf" ref="nofollow noopener noreferrer">github.com/kubernetes-â€¦</a></li>
</ul>
<h3 data-id="heading-6">LLMPerf</h3>
<p>LLMPerf æ˜¯ä¸€ä¸ªç”¨äºè¯„ä¼° LLM API æ€§èƒ½çš„å·¥å…·ã€‚ç›®å‰å·²åœæ­¢æ›´æ–°ã€‚å®ç°äº†ä¸¤ç§è¯„ä¼°å¤§å‹è¯­è¨€æ¨¡å‹çš„æµ‹è¯•ï¼šä¸€ä¸ªæ˜¯ç”¨äºæµ‹è¯•æ€§èƒ½çš„è´Ÿè½½æµ‹è¯•ï¼Œå¦ä¸€ä¸ªæ˜¯ç”¨äºæ£€æµ‹æ­£ç¡®æ€§çš„æ­£ç¡®æ€§æµ‹è¯•ã€‚</p>
<p><strong>å®‰è£…</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">git <span class="hljs-built_in">clone</span> https://github.com/ray-project/llmperf.git
<span class="hljs-built_in">cd</span> llmperf
pip install -e .
</code></pre>
<p><strong>è´Ÿè½½æµ‹è¯•</strong>ï¼š</p>
<p>è´Ÿè½½æµ‹è¯•ä¼šå‘ LLM API ç”Ÿæˆå¤šä¸ªå¹¶å‘è¯·æ±‚ï¼Œå¹¶æµ‹é‡tikené—´å»¶è¿Ÿå’Œæ¯æ¬¡è¯·æ±‚åŠè·¨å¹¶å‘è¯·æ±‚çš„ç”Ÿæˆååé‡ã€‚æ¯ä¸ªè¯·æ±‚ä¸­å‘é€çš„æç¤ºè¯æ ¼å¼å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-vbnet" lang="vbnet">Randomly stream lines <span class="hljs-keyword">from</span> the following <span class="hljs-keyword">text</span>. Don<span class="hljs-comment">'t generate eos tokens:</span>
LINE <span class="hljs-number">1</span>,
LINE <span class="hljs-number">2</span>,
LINE <span class="hljs-number">3</span>,
...
</code></pre>
<p>è¯—å¥æ˜¯ä»èå£«æ¯”äºšåå››è¡Œè¯—ä¸­çš„ä¸€ç»„è¯—å¥ä¸­éšæœºæŠ½å–çš„ã€‚æ— è®ºæµ‹è¯•çš„æ˜¯å“ªä¸ª LLM APIï¼ŒLlamaTokenizer éƒ½ä¼šç»Ÿè®¡ token æ•°ã€‚è¿™æ˜¯ä¸ºäº†ç¡®ä¿æç¤ºåœ¨ä¸åŒ LLM API ä¸Šä¿æŒä¸€è‡´ã€‚</p>
<p>OpenAI Compatible APIs ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">export</span> OPENAI_API_KEY=secret_abcdefg
<span class="hljs-keyword">export</span> OPENAI_API_BASE=https:<span class="hljs-comment">//console.endpoints.anyscale.com/m/v1</span>

python llm_correctness.py \
--model <span class="hljs-string">"meta-llama/Llama-2-7b-chat-hf"</span> \
--max-<span class="hljs-built_in">num</span>-completed-requests <span class="hljs-number">150</span> \
--timeout <span class="hljs-number">600</span> \
--<span class="hljs-built_in">num</span>-concurrent-requests <span class="hljs-number">10</span> \
--results-dir <span class="hljs-string">"result_outputs"</span>
</code></pre>
<p>æ³¨æ„äº‹é¡¹ä¸å…è´£å£°æ˜ï¼š</p>
<ul>
<li>ç»ˆç«¯æä¾›å•†çš„åç«¯å¯èƒ½å·®å¼‚å¾ˆå¤§ï¼Œå› æ­¤è¿™å¹¶ä¸ä»£è¡¨è½¯ä»¶åœ¨ç‰¹å®šç¡¬ä»¶ä¸Šçš„è¿è¡Œæ–¹å¼ã€‚</li>
<li>ç»“æœå¯èƒ½ä¼šå› ä¸€å¤©ä¸­çš„æ—¶é—´è€Œå¼‚ã€‚</li>
<li><strong>ç»“æœå¯èƒ½ä¼šå› è´Ÿè½½ä¸åŒè€Œæœ‰æ‰€å˜åŒ–</strong>ã€‚</li>
<li><strong>ç»“æœå¯èƒ½ä¸ç”¨æˆ·çš„å·¥ä½œé‡ä¸ç›¸å…³</strong>ã€‚</li>
</ul>
<p><strong>æ­£ç¡®æ€§æµ‹è¯•</strong>ï¼š</p>
<p>æ­£ç¡®æ€§æµ‹è¯•ä¼šä»¥ä»¥ä¸‹æ ¼å¼å‘ LLM API ç”Ÿæˆå¤šä¸ªå¹¶å‘è¯·æ±‚ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">Convert</span> the following sequence <span class="hljs-keyword">of</span> words <span class="hljs-keyword">into</span> a number: {random_number_in_word_format}. Output just your <span class="hljs-keyword">final</span> answer.
</code></pre>
<p>å…¶ä¸­ï¼šrandom_number_in_word_format å¯ä»¥æ˜¯ â€œone hundred and twenty threeâ€ã€‚æµ‹è¯•æ£€æŸ¥å›ç­”ä¸­æ˜¯å¦åŒ…å«è¯¥æ•°å­—æ ¼å¼ï¼Œåœ¨æ­¤ä¾‹ä¸­ä¸º 123ã€‚</p>
<p>è¯¥æ£€éªŒå¯¹éšæœºç”Ÿæˆçš„æ•°å­—è¿›è¡Œæ­¤æ“ä½œï¼Œå¹¶æŠ¥å‘ŠåŒ…å«ä¸åŒ¹é…çš„å›ç­”æ•°é‡ã€‚</p>
<p>OpenAI Compatible APIs ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">export</span> OPENAI_API_KEY=secret_abcdefg
<span class="hljs-keyword">export</span> OPENAI_API_BASE=https:<span class="hljs-comment">//console.endpoints.anyscale.com/m/v1</span>

python llm_correctness.py \
--model <span class="hljs-string">"meta-llama/Llama-2-7b-chat-hf"</span> \
--max-<span class="hljs-built_in">num</span>-completed-requests <span class="hljs-number">150</span> \
--timeout <span class="hljs-number">600</span> \
--<span class="hljs-built_in">num</span>-concurrent-requests <span class="hljs-number">10</span> \
--results-dir <span class="hljs-string">"result_outputs"</span>
</code></pre>
<p>å‚è€ƒï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fray-project%2Fllmperf" target="_blank" title="https://github.com/ray-project/llmperf" ref="nofollow noopener noreferrer">github.com/ray-projectâ€¦</a></li>
</ul>
<h3 data-id="heading-7">llm-benchmark</h3>
<p>llm-benchmark é€šè¿‡ Ollama è¿›è¡Œæœ¬åœ° LLM ååé‡åŸºå‡†æµ‹è¯•ã€‚</p>
<p>llm-benchmark åœ¨ Windowsã€Linux å’Œ macOS ä¸Šï¼Œå®ƒä¼šæ£€æµ‹å†…å­˜å¤§å°ä»¥ä¼˜å…ˆä¸‹è½½æ‰€éœ€çš„ LLM æ¨¡å‹ã€‚</p>
<p>å½“å†…å­˜å†…å­˜å¤§å°å¤§äºæˆ–ç­‰äº 4GB ä½†å°äº 7GB æ—¶ï¼Œå®ƒä¼šæ£€æŸ¥æ˜¯å¦å­˜åœ¨ gemma:2bã€‚ç¨‹åºéšå¼åœ°æ‹‰å–è¿™äº›æ¨¡å‹ã€‚</p>
<pre><code class="hljs">ollama pull deepseek-r1:1.5b
ollama pull gemma:2b
ollama pull phi:2.7b
ollama pull phi3:3.8b
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fa13a1705ff54872920428714f49e5d5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCD5p6c5Ya75LiN5ZCQ5p6c5Ya755qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768015536&amp;x-signature=RtPRa7T%2FJLUGteBt6FR4GbIJm%2BQ%3D" alt="" loading="lazy"/></p>
<p><strong>å®‰è£…</strong>ï¼š</p>
<pre><code class="hljs">pip install llm-benchmark
</code></pre>
<p><strong>è¿è¡Œ</strong>ï¼š</p>
<p>#1 å°†ç³»ç»Ÿä¿¡æ¯å’ŒåŸºå‡†æµ‹è¯•ç»“æœå‘é€åˆ°è¿œç¨‹æœåŠ¡å™¨</p>
<pre><code class="hljs language-arduino" lang="arduino">llm_benchmark run
</code></pre>
<p>#2 ä¸è¦å°†ç³»ç»Ÿä¿¡æ¯å’ŒåŸºå‡†æµ‹è¯•ç»“æœå‘é€åˆ°è¿œç¨‹æœåŠ¡å™¨</p>
<pre><code class="hljs language-arduino" lang="arduino">llm_benchmark run --no-sendinfo
</code></pre>
<p>#3 æ˜ç¡®æŒ‡å®š ollama å¯æ‰§è¡Œæ–‡ä»¶è·¯å¾„æ—¶è¿è¡Œï¼ˆå½“ä½ æ„å»ºäº†è‡ªå·±çš„ ollama å¼€å‘è€…ç‰ˆæœ¬æ—¶ï¼‰</p>
<pre><code class="hljs language-css" lang="css">llm_benchmark run <span class="hljs-attr">--ollamabin</span>=~/<span class="hljs-selector-tag">code</span>/ollama/ollama
</code></pre>
<p>#4 è¿è¡Œè‡ªå®šä¹‰åŸºå‡†æ¨¡å‹</p>
<pre><code class="hljs language-css" lang="css">llm_benchmark run <span class="hljs-attr">--custombenchmark</span>=path/<span class="hljs-selector-tag">to</span>/custombenchmarkmodels<span class="hljs-selector-class">.yml</span>
</code></pre>
<p>å…¶ä¸­ï¼Œcustombenchmarkmodels.ymlæ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-vbnet" lang="vbnet"><span class="hljs-symbol">file_name:</span> <span class="hljs-string">"custombenchmarkmodels.yml"</span>
<span class="hljs-symbol">version:</span> <span class="hljs-number">2.0</span>.<span class="hljs-keyword">custom</span>
<span class="hljs-symbol">models:</span>
  - model: <span class="hljs-string">"deepseek-r1:1.5b"</span>
  - model: <span class="hljs-string">"qwen:0.5b"</span>
</code></pre>
<p>å‚è€ƒï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Faidatatools%2Follama-benchmark" target="_blank" title="https://github.com/aidatatools/ollama-benchmark" ref="nofollow noopener noreferrer">github.com/aidatatoolsâ€¦</a></li>
</ul>
<h2 data-id="heading-8">å¸¸è§çš„æ€§èƒ½å»¶è¿ŸæŒ‡æ ‡</h2>
<p>ä¸Šé¢åœ¨å„æ¡†æ¶æ¦‚è¿°ï¼Œæˆ‘æ¢³ç†äº†å„æ¡†æ¶çš„æ€§èƒ½å‹æµ‹æŒ‡æ ‡ï¼Œä½†æ˜¯æœ‰ä¸€äº›æŒ‡æ ‡åœ¨å„æ¡†æ¶é‡Œé¢è®¡ç®—æ–¹å¼ä¸ä¸€ï¼Œä¸‹é¢æˆ‘ç»¼åˆä¸»æµçš„å¤§æ¨¡å‹æ¡†æ¶çš„è¯„ä¼°æŒ‡æ ‡çš„è®¡ç®—æ–¹å¼ï¼Œæ ¹æ®è‡ªå·±çš„ä¸»è§‚åˆ¤æ–­ç»™ä¸€ç‚¹æ ‡å‡†å®šä¹‰ï¼Œä»¥ä¾¿ä½¿ç”¨å„æ¡†æ¶è¿›è¡Œæ€§èƒ½å‹æµ‹æ—¶èƒ½å¤Ÿå¯¹é½ã€‚ï¼š</p>
<ul>
<li><strong>é¦–Tokenç”Ÿæˆæ—¶é—´</strong>ï¼ˆTime To First Tokenï¼Œç®€ç§°TTFTï¼‰ï¼šå³ç”¨æˆ·è¾“å…¥æç¤ºåï¼Œæ¨¡å‹ç”Ÿæˆç¬¬ä¸€ä¸ªè¾“å‡ºè¯å…ƒï¼ˆTokenï¼‰æ‰€éœ€çš„æ—¶é—´ã€‚åœ¨å®æ—¶äº¤äº’ä¸­ï¼Œä½æ—¶å»¶è·å–å“åº”éå¸¸é‡è¦ï¼Œä½†åœ¨ç¦»çº¿å·¥ä½œä»»åŠ¡ä¸­åˆ™ä¸å¤ªé‡è¦ã€‚æ­¤æŒ‡æ ‡å—å¤„ç†æç¤ºä¿¡æ¯å¹¶ç”Ÿæˆé¦–ä¸ªè¾“å‡ºè¯å…ƒæ‰€éœ€çš„æ—¶é—´æ‰€é©±åŠ¨ã€‚é€šå¸¸ï¼Œä¸ä»…å¯¹å¹³å‡TTFTæ„Ÿå…´è¶£ï¼Œè¿˜åŒ…æ‹¬å…¶åˆ†å¸ƒï¼Œå¦‚P50ã€P90ã€P95å’ŒP99ç­‰ã€‚è®¡ç®—å…¬å¼ä¸ºï¼š<code>ttft = first_token_time - request_start_time</code>ã€‚</li>
<li><strong>Tokené—´å»¶è¿Ÿ</strong>ï¼ˆInter Token Latencyï¼Œç®€ç§°ITLï¼‰ï¼šè®¡ç®—å…¬å¼ï¼š<code>ITL = (last_token_time - first_token_time) / (output_tokens - 1) , ä¸åŒ…æ‹¬ç¬¬ä¸€ä¸ªtoken</code>ã€‚</li>
<li><strong>å—é—´å»¶è¿Ÿ</strong>ï¼ˆInter Chunk Latencyï¼Œç®€ç§°ICLï¼‰ï¼šç‰¹æŒ‡åœ¨<strong>æµå¼ä¼ è¾“åœºæ™¯</strong>ä¸‹ï¼Œæ¨¡å‹æœåŠ¡å™¨è¿”å›çš„ä¸¤ä¸ªè¿ç»­æ•°æ®å—ï¼ˆChunkï¼‰ä¹‹é—´çš„æ—¶é—´é—´éš”ã€‚åœ¨æµå¼ä¼ è¾“ä¸­ï¼ŒLLMç”Ÿæˆçš„æ–‡æœ¬ä¸æ˜¯ä¸€æ¬¡æ€§å…¨éƒ¨è¿”å›ï¼Œè€Œæ˜¯ä»¥â€œå—â€ä¸ºå•ä½é€æ­¥è¿”å›ã€‚ä¸€ä¸ªâ€œå—â€é€šå¸¸åŒ…å«è‹¥å¹²ä¸ªTokenã€‚å› æ­¤ï¼Œå®ƒè¡¡é‡çš„æ˜¯å®¢æˆ·ç«¯æ¥æ”¶åˆ°ç¬¬Nä¸ªæ•°æ®å—ä¸æ¥æ”¶åˆ°ç¬¬N+1ä¸ªæ•°æ®å—ä¹‹é—´çš„æ—¶é—´å·®ã€‚å®ƒä¸»è¦å‡ºç°åœ¨æœåŠ¡å™¨ä»¥ â€œtext/event-streamâ€ ç­‰æµå¼åè®®è¿”å›æ•°æ®çš„åœºæ™¯ä¸­ï¼Œæ˜¯è¯„ä¼°æµå¼å“åº”æµç•…åº¦çš„æ ¸å¿ƒæŒ‡æ ‡ã€‚è®¡ç®—å…¬å¼ï¼š<code>Inter Chunk Latency (Chunk_N) = Timestamp(æ”¶åˆ° Chunk_{N+1}) - Timestamp(æ”¶åˆ° Chunk_N)</code>ã€‚</li>
<li><strong>æ¯ä¸ªè¾“å‡ºTokençš„ç”Ÿæˆæ—¶é—´</strong>ï¼ˆTime Per Output Tokenï¼Œç®€ç§°TPOTï¼‰ï¼šå³ä¸ºæ¯ä¸ªç”¨æˆ·çš„æŸ¥è¯¢ç”Ÿæˆä¸€ä¸ªè¾“å‡ºè¯å…ƒæ‰€éœ€çš„æ—¶é—´ã€‚è¿™ä¸€æŒ‡æ ‡ä¸æ¯ä¸ªç”¨æˆ·å¯¹æ¨¡å‹â€œé€Ÿåº¦â€çš„æ„ŸçŸ¥ç›¸å…³ã€‚ä¾‹å¦‚ï¼ŒTPOTä¸º100ms/tokenè¡¨ç¤ºæ¯ä¸ªç”¨æˆ·æ¯ç§’å¯å¤„ç†10ä¸ªtokenï¼Œæˆ–è€…æ¯åˆ†é’Ÿå¤„ç†çº¦450ä¸ªtokenï¼Œé‚£ä¹ˆè¿™ä¸€é€Ÿåº¦è¿œè¶…æ™®é€šäººçš„é˜…è¯»é€Ÿåº¦ã€‚è®¡ç®—å…¬å¼ï¼š<code>TPOT = (last_token_time - request_start_time) / output_tokens , åŒ…æ‹¬ç¬¬ä¸€ä¸ªtoken</code>ã€‚</li>
<li><strong>ç«¯åˆ°ç«¯æ—¶å»¶ï¼ˆE2Eï¼‰</strong>ï¼šæ¨¡å‹ä¸ºç”¨æˆ·ç”Ÿæˆå®Œæ•´å“åº”æ‰€éœ€çš„æ€»æ—¶é—´ã€‚æ•´ä½“å“åº”æ—¶å»¶å¯ä½¿ç”¨å‰ä¸¤ä¸ªæŒ‡æ ‡è®¡ç®—å¾—å‡ºï¼š<code>e2e latency = request_end_time - request_start_time</code>ã€‚</li>
<li><strong>æ¯åˆ†é’Ÿå®Œæˆçš„è¯·æ±‚æ•°ï¼ˆRPSï¼‰</strong>ï¼šé€šå¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éƒ½å¸Œæœ›ç³»ç»Ÿèƒ½å¤Ÿå¤„ç†å¹¶å‘è¯·æ±‚ã€‚å¯èƒ½æ˜¯å› ä¸ºä½ æ­£åœ¨å¤„ç†æ¥è‡ªå¤šä¸ªç”¨æˆ·çš„è¾“å…¥æˆ–è€…å¯èƒ½æœ‰ä¸€ä¸ªæ‰¹é‡æ¨ç†ä»»åŠ¡ã€‚</li>
<li><strong>ç”ŸæˆTokenååé‡</strong>ï¼šæ¨ç†æœåŠ¡åœ¨æ‰€æœ‰ç”¨æˆ·è¯·æ±‚ä¸­æ¯ç§’å¯ç”Ÿæˆçš„è¾“å‡ºè¯å…ƒ(Token)æ•°ã€‚è€ƒè™‘åˆ°æ— æ³•æµ‹é‡é¢„åŠ è½½æ—¶é—´ï¼Œå¹¶ä¸”æ€»æ¨ç†æ—¶å»¶æ‰€èŠ±æ—¶é—´æ›´å¤šåœ°å–å†³äºç”Ÿæˆçš„Tokenæ•°é‡ï¼Œè€Œä¸æ˜¯è¾“å…¥çš„Tokenæ•°é‡ï¼Œå› æ­¤ï¼Œå°†æ³¨æ„åŠ›é›†ä¸­åœ¨è¾“å‡ºTokenä¸Šé€šå¸¸æ˜¯æ­£ç¡®çš„æŠ‰æ‹©ã€‚è®¡ç®—å…¬å¼ï¼š<code>è¾“å‡ºTokenååé‡ = output_tokens / e2e latency</code></li>
<li><strong>æ€»ååé‡</strong>ï¼šåŒ…æ‹¬è¾“å…¥çš„Tokenå’Œç”Ÿæˆçš„Tokenã€‚</li>
</ul>
<h2 data-id="heading-9">å„æ¡†æ¶ä¹‹é—´çš„æŒ‡æ ‡å·®å¼‚</h2>
<p>ä¸‹é¢æ˜¯é’ˆå¯¹qwen3-8båœ¨h200ä¸Šè¿›è¡Œå„æ¡†æ¶æ€§èƒ½æŒ‡æ ‡å¯¹é½çš„ç»“æœï¼ˆä¸»è¦æ˜¯ICL/ITL/TPOTæŒ‡æ ‡å·®å¼‚è¾ƒå¤§ï¼‰ã€‚å³é’ˆå¯¹ä¸Šé¢æ±‡æ€»ä¹‹åå®šä¹‰çš„æŒ‡æ ‡ï¼Œåœ¨å„ä¸ªæ¡†æ¶ä¸­çš„å¯¹åº”å€¼ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3037daa7b997422aa1a5660565724bd6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCD5p6c5Ya75LiN5ZCQ5p6c5Ya755qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768015536&amp;x-signature=mm4uhE33JdS1QpgC2%2Fk9rjd%2FBAg%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-10">ç»“è¯­</h2>
<p>æœ€åï¼Œåœ¨GuideLLMé’ˆå¯¹å„LLMæ€§èƒ½å‹æµ‹è¿›è¡Œç»¼åˆå¯¹æ¯”çš„åŸºç¡€ä¸Šï¼Œä¸‹è¡¨è¿›ä¸€æ­¥æ±‡æ€»äº†å„ä¸ªLLMæ€§èƒ½å‹æµ‹æ¡†æ¶çš„ç‰¹æ€§å·®å¼‚ï¼Œå¤§å®¶åœ¨é€‰æ‹©æ€§èƒ½æµ‹è¯•å·¥å…·æ—¶å¯ä»¥æ ¹æ®è‡ªå·±çš„åå¥½è¿›è¡Œé€‰æ‹©ã€‚å¦‚æœéœ€è¦å¯¹æ¯”å„ç§æ¡†æ¶å’Œç‰¹æ€§çš„æ€§èƒ½ï¼Œæœ€å¥½ç»Ÿä¸€ä½¿ç”¨åŒä¸€ä¸ªå·¥å…·è¿›è¡Œæ¯”è¾ƒï¼Œä»¥å…å‡ºç°ç»“è®ºæ€§é”™è¯¯ã€‚</p>


























































































































<table><thead><tr><th>å·¥å…·</th><th>CLI</th><th>API</th><th>High Perf</th><th>Full Metrics</th><th>æ•°æ®æ¨¡æ€</th><th>æ•°æ®æº</th><th>Profiles</th><th>Backends</th><th>Endpoints</th><th>è¾“å‡ºç±»å‹</th></tr></thead><tbody><tr><td><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fvllm-project%2Fguidellm" target="_blank" title="https://github.com/vllm-project/guidellm" ref="nofollow noopener noreferrer">GuideLLM</a></td><td>âœ…</td><td>âœ…</td><td>âœ…</td><td>âœ…</td><td>æ–‡æœ¬, å›¾åƒ, éŸ³é¢‘, è§†é¢‘</td><td>HuggingFace, Files, åˆæˆ, è‡ªå®šä¹‰æ•°æ®é›†</td><td>Synchronous, Concurrent, Throughput, Constant, Poisson, Sweep</td><td>OpenAI-compatible</td><td>/completions, /chat/completions, /audio/translation, /audio/transcription</td><td>console, json, csv, html</td></tr><tr><td><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fkubernetes-sigs%2Finference-perf" target="_blank" title="https://github.com/kubernetes-sigs/inference-perf" ref="nofollow noopener noreferrer">inference-perf</a></td><td>âœ…</td><td>âŒ</td><td>âœ…</td><td>âŒ</td><td>æ–‡æœ¬</td><td>åˆæˆ, æŒ‡å®šæ•°æ®é›†</td><td>Concurrent, Constant, Poisson, Sweep</td><td>OpenAI-compatible</td><td>/completions, /chat/completions</td><td>json, png</td></tr><tr><td><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fsgl-project%2Fgenai-bench" target="_blank" title="https://github.com/sgl-project/genai-bench" ref="nofollow noopener noreferrer">genai-bench</a></td><td>âœ…</td><td>âŒ</td><td>âŒ</td><td>âŒ</td><td>æ–‡æœ¬, å›¾åƒ, Embedding, ReRank</td><td>åˆæˆ, File</td><td>Concurrent</td><td>OpenAI-compatible, Hosted Cloud</td><td>/chat/completions, /embeddings</td><td>console, xlsx, png</td></tr><tr><td><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fray-project%2Fllmperf" target="_blank" title="https://github.com/ray-project/llmperf" ref="nofollow noopener noreferrer">llm-perf</a></td><td>âŒ</td><td>âŒ</td><td>âœ…</td><td>âŒ</td><td>æ–‡æœ¬</td><td>åˆæˆ</td><td>Concurrent</td><td>OpenAI-compatible, Hosted Cloud</td><td>/chat/completions</td><td>json</td></tr><tr><td><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Faidatatools%2Follama-benchmark" target="_blank" title="https://github.com/aidatatools/ollama-benchmark" ref="nofollow noopener noreferrer">ollama-benchmark</a></td><td>âœ…</td><td>âŒ</td><td>âŒ</td><td>âŒ</td><td>æ–‡æœ¬</td><td>åˆæˆ</td><td>åŒæ­¥</td><td>Ollama</td><td>/completions</td><td>console, json</td></tr><tr><td><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fvllm-project%2Fvllm%2Ftree%2Fmain%2Fbenchmarks" target="_blank" title="https://github.com/vllm-project/vllm/tree/main/benchmarks" ref="nofollow noopener noreferrer">vllm/benchmarks</a></td><td>âœ…</td><td>âŒ</td><td>âŒ</td><td>âŒ</td><td>æ–‡æœ¬</td><td>åˆæˆ, æŒ‡å®šæ•°æ®é›†</td><td>Synchronous, Throughput, Constant, Sweep</td><td>OpenAI-compatible, vLLM API</td><td>/completions, /chat/completions</td><td>console, png</td></tr><tr><td><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fai-dynamo%2Faiperf" target="_blank" title="https://github.com/ai-dynamo/aiperf" ref="nofollow noopener noreferrer">AIPerf</a></td><td>âœ…</td><td>-</td><td>-</td><td>-</td><td>æ–‡æœ¬ã€å›¾åƒã€è§†é¢‘</td><td>åˆæˆã€è‡ªå®šä¹‰ä»¥åŠå…¬å¼€æ•°æ®é›†</td><td>Concurrent</td><td>OpenAI-compatible</td><td>/completions, /chat/completions</td><td>console, json, csv</td></tr><tr><td><a href="https://link.juejin.cn?target=https%3A%2F%2Fevalscope.readthedocs.io%2Fzh-cn%2Flatest%2Fuser_guides%2Fstress_test%2Fquick_start.html" target="_blank" title="https://evalscope.readthedocs.io/zh-cn/latest/user_guides/stress_test/quick_start.html" ref="nofollow noopener noreferrer">EvalScope Perf</a></td><td>âœ…</td><td>-</td><td>-</td><td>âŒ</td><td>æ–‡æœ¬ã€å›¾åƒ</td><td>åˆæˆã€è‡ªå®šä¹‰ä»¥åŠå…¬å¼€æ•°æ®é›†</td><td>Concurrent</td><td>OpenAI-compatible</td><td>/completions, /chat/completions</td><td>console, json</td></tr></tbody></table></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Electron ä¸­çš„ â€œpreloadâ€ ä¸ â€œinvokeâ€]]></title>    <link>https://juejin.cn/post/7590421489997578259</link>    <guid>https://juejin.cn/post/7590421489997578259</guid>    <pubDate>2026-01-03T06:19:16.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7590421489997578259" data-draft-id="7590421489997561875" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Electron ä¸­çš„ â€œpreloadâ€ ä¸ â€œinvokeâ€"/> <meta itemprop="keywords" content="Electron"/> <meta itemprop="datePublished" content="2026-01-03T06:19:16.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ¢¦é±¼"/> <meta itemprop="url" content="https://juejin.cn/user/1099167360628462"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Electron ä¸­çš„ â€œpreloadâ€ ä¸ â€œinvokeâ€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1099167360628462/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ¢¦é±¼
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-03T06:19:16.000Z" title="Sat Jan 03 2026 06:19:16 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ğŸ¯ å‰è¨€</h2>
<p>Electron ä½œä¸ºä½¿ç”¨ Web æŠ€æœ¯æ„å»ºè·¨å¹³å°æ¡Œé¢åº”ç”¨çš„æ¡†æ¶ï¼Œå…¶æ ¸å¿ƒæŒ‘æˆ˜ä¹‹ä¸€æ˜¯å¦‚ä½•<strong>å®‰å…¨åœ°å®ç°ä¸»è¿›ç¨‹ä¸æ¸²æŸ“è¿›ç¨‹ä¹‹é—´çš„é€šä¿¡</strong>ã€‚éšç€ Electron 12+ ç‰ˆæœ¬é»˜è®¤å¯ç”¨ä¸Šä¸‹æ–‡éš”ç¦»ï¼ˆ<code>contextIsolation: true</code>ï¼‰ï¼Œä¼ ç»Ÿçš„é€šä¿¡æ–¹å¼å·²ç»ä¸å†å®‰å…¨å¯é electronjs.orgã€‚æœ¬æ–‡å°†æ·±å…¥æ¢è®¨ç°ä»£ Electron åº”ç”¨ä¸­çš„å®‰å…¨é€šä¿¡æ–¹æ¡ˆâ€”â€”Preload è„šæœ¬ä¸ Invoke æ¨¡å¼ï¼Œå¸®åŠ©ä½ æ„å»ºæ›´åŠ å®‰å…¨å¯é çš„åº”ç”¨ã€‚</p>
<h2 data-id="heading-1">ğŸ” æ ¸å¿ƒæ¦‚å¿µè§£æ</h2>
<h3 data-id="heading-2">ä»€ä¹ˆæ˜¯ Preload è„šæœ¬ï¼Ÿ</h3>
<p>Preload è„šæœ¬æ˜¯ä¸€ç§åœ¨ç½‘é¡µåŠ è½½å‰æ‰§è¡Œçš„ JavaScript æ–‡ä»¶ï¼Œå®ƒå…·æœ‰è®¿é—® Node.js å’Œ Electron API çš„ç‰¹æƒæƒé™csdn.netã€‚æ›´é‡è¦çš„æ˜¯ï¼Œå®ƒè¿è¡Œåœ¨ä¸€ä¸ªç‹¬ç«‹çš„ã€ä¸æ¸²æŸ“è¿›ç¨‹éš”ç¦»çš„ä¸Šä¸‹æ–‡ä¸­ï¼Œå……å½“äº†<strong>å®‰å…¨æ¡¥æ¢</strong>çš„è§’è‰² ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// preload.js</span>
<span class="hljs-keyword">const</span> { contextBridge, ipcRenderer } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'electron'</span>)

<span class="hljs-comment">// ä½¿ç”¨ contextBridge å®‰å…¨åœ°æš´éœ² API</span>
contextBridge.<span class="hljs-title function_">exposeInMainWorld</span>(<span class="hljs-string">'electronAPI'</span>, {
  <span class="hljs-comment">// æš´éœ²ä¸€ä¸ªæ§åˆ¶çª—å£çš„å‡½æ•°ï¼Œä½¿ç”¨ invoke æ¨¡å¼</span>
  <span class="hljs-attr">controlWindow</span>: <span class="hljs-function">(<span class="hljs-params">action</span>) =&gt;</span> ipcRenderer.<span class="hljs-title function_">invoke</span>(<span class="hljs-string">'window-control'</span>, action),
  <span class="hljs-comment">// å¯ä»¥æš´éœ²å…¶ä»–ç»è¿‡ç²¾å¿ƒè®¾è®¡çš„API</span>
  <span class="hljs-attr">getVersion</span>: <span class="hljs-function">() =&gt;</span> ipcRenderer.<span class="hljs-title function_">invoke</span>(<span class="hljs-string">'app:get-version'</span>)
})
</code></pre>
<h3 data-id="heading-3">ä»€ä¹ˆæ˜¯ Invoke æ¨¡å¼ï¼Ÿ</h3>
<p>Invoke æ¨¡å¼æ˜¯ Electron æä¾›çš„ä¸€ç§å¼‚æ­¥åŒå‘é€šä¿¡æœºåˆ¶ï¼Œé€šè¿‡Â <code>ipcRenderer.invoke</code>Â å’ŒÂ <code>ipcMain.handle</code>Â é…åˆä½¿ç”¨electronjs.org+1ã€‚æ¸²æŸ“è¿›ç¨‹å¯ä»¥å‘èµ·è¯·æ±‚å¹¶ç­‰å¾…å“åº”ï¼Œä¸»è¿›ç¨‹åˆ™å¤„ç†è¯·æ±‚å¹¶è¿”å›ç»“æœï¼Œæ•´ä¸ªè¿‡ç¨‹åŸºäº Promiseï¼Œé¿å…äº†å›è°ƒåœ°ç‹±ã€‚</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// ä¸»è¿›ç¨‹ (main.js)</span>
<span class="hljs-keyword">const</span> { ipcMain } = require(<span class="hljs-string">'electron'</span>)

ipcMain.handle(<span class="hljs-string">'window-control'</span>, <span class="hljs-keyword">async</span> (<span class="hljs-keyword">event</span>, action) =&gt; {
  <span class="hljs-keyword">const</span> win = BrowserWindow.fromWebContents(<span class="hljs-keyword">event</span>.sender)
  <span class="hljs-keyword">if</span> (!win) <span class="hljs-keyword">return</span> { success: <span class="hljs-literal">false</span> }
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">if</span> (action === <span class="hljs-string">'minimize'</span>) win.minimize()
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (action === <span class="hljs-string">'maximize'</span>) win.isMaximized() ? win.restore() : win.maximize()
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (action === <span class="hljs-string">'close'</span>) win.close()
    <span class="hljs-keyword">return</span> { success: <span class="hljs-literal">true</span> }
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-keyword">return</span> { success: <span class="hljs-literal">false</span>, error: error.message }
  }
})
</code></pre>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ¸²æŸ“è¿›ç¨‹ (renderer.js)</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">minimizeWindow</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// è°ƒç”¨Preloadæš´éœ²çš„APIï¼Œå°±åƒè°ƒç”¨æ™®é€šå‡½æ•°ä¸€æ ·</span>
  <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">window</span>.<span class="hljs-property">electronAPI</span>.<span class="hljs-title function_">controlWindow</span>(<span class="hljs-string">'minimize'</span>)
  <span class="hljs-keyword">if</span> (result.<span class="hljs-property">success</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'çª—å£æœ€å°åŒ–æˆåŠŸ'</span>)
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'æ“ä½œå¤±è´¥:'</span>, result.<span class="hljs-property">error</span>)
  }
}
</code></pre>
<h3 data-id="heading-4">ğŸ†š Preload vs. Invoke å¿«é€Ÿå¯¹æ¯”</h3>









































<table><thead><tr><th>ç‰¹æ€§ç»´åº¦</th><th>Preload (é¢„åŠ è½½è„šæœ¬)</th><th>Invoke (<code>ipcRenderer.invoke</code>Â /Â <code>ipcMain.handle</code>)</th><th>ååŒå·¥ä½œå…³ç³»</th></tr></thead><tbody><tr><td><strong>æ˜¯ä»€ä¹ˆ</strong></td><td><strong>ä¸€ä¸ªç‰¹æ®Šçš„è„šæœ¬æ–‡ä»¶</strong>ï¼ˆé€šå¸¸å«Â <code>preload.js</code>ï¼‰ï¼Œåœ¨ç½‘é¡µåŠ è½½å‰æ‰§è¡Œcsdn.netã€‚å®ƒæ‹¥æœ‰è®¿é—®Node.jså’ŒElectron APIçš„æƒé™csdn.netÂ ã€‚</td><td><strong>ä¸€å¥—é€šä¿¡æ–¹æ³•</strong>ã€‚<code>ipcRenderer.invoke</code>Â ç”¨äºæ¸²æŸ“è¿›ç¨‹å‘èµ·<strong>è¯·æ±‚å¹¶ç­‰å¾…å“åº”</strong>ï¼Œ<code>ipcMain.handle</code>Â ç”¨äºä¸»è¿›ç¨‹<strong>å¤„ç†è¯¥è¯·æ±‚å¹¶è¿”å›ç»“æœ</strong>csdn.net+1Â ã€‚</td><td><strong>Preloadè„šæœ¬æ˜¯â€œæ¡¥æ¢â€å’Œâ€œå®‰å…¨é€šé“â€ï¼ŒInvokeæ˜¯æ¡¥ä¸Šèµ°çš„â€œè½¦â€</strong> ã€‚Preloadé€šå¸¸ä½¿ç”¨Invokeæ¥å®ç°å…·ä½“çš„é€šä¿¡åŠŸèƒ½ã€‚</td></tr><tr><td><strong>æ ¸å¿ƒç›®çš„</strong></td><td><strong>å®‰å…¨éš”ç¦»</strong>ï¼šåœ¨å¯ç”¨ä¸Šä¸‹æ–‡éš”ç¦»ï¼ˆ<code>contextIsolation: true</code>ï¼‰æ—¶ï¼Œå®ƒä½œä¸º<strong>å”¯ä¸€å®‰å…¨</strong>çš„æ–¹å¼ï¼Œå°†ç²¾å¿ƒæŒ‘é€‰çš„APIæš´éœ²ç»™ç½‘é¡µelectronjs.org+1Â ã€‚</td><td><strong>å¼‚æ­¥åŒå‘é€šä¿¡</strong>ï¼šè®©æ¸²æŸ“è¿›ç¨‹èƒ½åƒè°ƒç”¨æœ¬åœ°å‡½æ•°ä¸€æ ·ï¼Œ<strong>åŒæ­¥åœ°è¯·æ±‚ä¸»è¿›ç¨‹æ‰§è¡Œæ“ä½œå¹¶è·å–ç»“æœ</strong>ï¼Œé¿å…â€œå›è°ƒåœ°ç‹±â€csdn.net+1Â ã€‚</td><td>Preloadé€šè¿‡Invokeæ¨¡å¼ï¼Œå°†ä¸»è¿›ç¨‹çš„åŠŸèƒ½<strong>å®‰å…¨åœ°å°è£…</strong>åæä¾›ç»™æ¸²æŸ“è¿›ç¨‹ã€‚</td></tr><tr><td><strong>å·¥ä½œä½ç½®</strong></td><td>è¿è¡Œåœ¨<strong>ç‹¬ç«‹çš„ã€éš”ç¦»çš„ä¸Šä¸‹æ–‡</strong>ä¸­ï¼Œä¸ç½‘é¡µçš„<code>window</code>å¯¹è±¡æ˜¯åˆ†ç¦»çš„electronjs.org+1Â ã€‚</td><td><strong>æ¸²æŸ“è¿›ç¨‹</strong>è°ƒç”¨<code>invoke</code>ï¼Œ<strong>ä¸»è¿›ç¨‹</strong>è°ƒç”¨<code>handle</code>ã€‚å®ƒä»¬é€šè¿‡IPCé€šé“é€šä¿¡ã€‚</td><td>Preloadè„šæœ¬åœ¨éš”ç¦»çš„ä¸Šä¸‹æ–‡ä¸­æ¥æ”¶æ¸²æŸ“è¿›ç¨‹çš„è¯·æ±‚ï¼Œå¹¶é€šè¿‡<code>ipcRenderer.invoke</code>è½¬å‘ç»™ä¸»è¿›ç¨‹ã€‚</td></tr><tr><td><strong>æ˜¯å¦æ›¿ä»£å“</strong></td><td><strong>å¦</strong>ã€‚Preloadæ˜¯å®ç°å®‰å…¨é€šä¿¡çš„<strong>åŸºç¡€è®¾æ–½å’Œæœ€ä½³å®è·µ</strong>ã€‚</td><td><strong>å¦</strong>ã€‚Invokeæ˜¯å¤šç§IPCé€šä¿¡æ¨¡å¼ä¹‹ä¸€ï¼ˆè¿˜æœ‰<code>send</code>/<code>on</code>ç­‰ï¼‰ï¼Œä½†å› å…¶<strong>ç®€æ´æ€§</strong>ï¼Œåœ¨éœ€è¦è¿”å›ç»“æœæ—¶è¢«<strong>å¼ºçƒˆæ¨è</strong>csdn.net+1Â ã€‚</td><td><strong>æœ€ä½³å®è·µæ˜¯ï¼šåœ¨Preloadè„šæœ¬ä¸­ä½¿ç”¨Invokeæ¨¡å¼æ¥æš´éœ²API</strong>ã€‚</td></tr><tr><td><strong>ä»£ç ç¤ºä¾‹</strong></td><td><code>contextBridge.exposeInMainWorld('myAPI', { ... })</code>electronjs.org</td><td>æ¸²æŸ“è¿›ç¨‹:Â <code>await window.myAPI.someFunction()</code> Preload:Â <code>ipcRenderer.invoke('some-channel')</code> ä¸»è¿›ç¨‹:Â <code>ipcMain.handle('some-channel', handler)</code></td><td>è§ä¸‹æ–¹è¯¦ç»†æµç¨‹å›¾ã€‚</td></tr></tbody></table>
<h3 data-id="heading-5">ğŸ” æ·±å…¥ç†è§£ Preload (é¢„åŠ è½½è„šæœ¬)</h3>
<p>Preloadè„šæœ¬æ˜¯Electronå®‰å…¨æ¨¡å‹çš„æ ¸å¿ƒã€‚</p>
<ul>
<li>
<p><strong>å®ƒä¸ºä»€ä¹ˆé‡è¦ï¼Ÿ</strong><br/>
Electroné»˜è®¤å¯ç”¨<strong>ä¸Šä¸‹æ–‡éš”ç¦»ï¼ˆContext Isolationï¼‰</strong> electronjs.org+1ã€‚è¿™æ„å‘³ç€ ï¼š</p>
<ul>
<li>ç½‘é¡µçš„<code>window</code>å¯¹è±¡å’ŒPreloadè„šæœ¬çš„<code>window</code>å¯¹è±¡æ˜¯<strong>å®Œå…¨ä¸åŒ</strong>çš„ä¸¤ä¸ªä¸–ç•Œelectronjs.orgÂ ã€‚</li>
<li>ç½‘é¡µæ— æ³•ç›´æ¥è®¿é—®Node.jsæˆ–Electronçš„APIï¼ˆå¦‚<code>ipcRenderer</code>,Â <code>fs</code>ç­‰ï¼‰ï¼Œè¿™æ˜¯å·¨å¤§çš„å®‰å…¨æå‡ï¼Œé˜²æ­¢æ¶æ„ä»£ç ï¼ˆå¦‚é€šè¿‡XSSæ¼æ´ï¼‰ç›´æ¥æ“ä½œç³»ç»Ÿcsdn.net+1Â ã€‚</li>
<li><strong>Preloadè„šæœ¬å°±æ˜¯å”¯ä¸€æœ‰æƒé™è·¨è¶Šè¿™ä¸¤ä¸ªä¸–ç•Œçš„â€œæ¡¥æ¢â€</strong> ã€‚å®ƒè¿è¡Œåœ¨ä¸€ä¸ª<strong>ç‰¹æƒä¸Šä¸‹æ–‡</strong>ä¸­ï¼Œå¯ä»¥è®¿é—®Node.js APIï¼ŒåŒæ—¶ä¹Ÿèƒ½è®¿é—®ç½‘é¡µçš„DOMï¼ˆ<code>document</code>,Â <code>window</code>ï¼‰csdn.netÂ ã€‚</li>
</ul>
</li>
<li>
<p><strong>å®ƒçš„æ ¸å¿ƒä»»åŠ¡æ˜¯ä»€ä¹ˆï¼Ÿ</strong><br/>
é€šè¿‡Â <code>contextBridge.exposeInMainWorld</code>Â æ–¹æ³•ï¼Œ<strong>å®‰å…¨åœ°ã€æœ‰é€‰æ‹©åœ°</strong>å°†æŸäº›ç‰¹æƒAPIæš´éœ²ç»™ç½‘é¡µelectronjs.org+1ã€‚è¿™å°±åƒæ˜¯ç»™ä¸€ä¸ªå®Œå…¨éš”ç¦»çš„æˆ¿é—´å¼€ä¸€æ‰‡å—æ§çš„å°é—¨ï¼Œåªä¼ é€’å¿…è¦çš„ç‰©å“ ã€‚</p>
</li>
<li>
<p><strong>ä¸€ä¸ªå®‰å…¨çš„Preloadç¤ºä¾‹</strong>ï¼š</p>
</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript">    <span class="hljs-comment">// preload.js</span>
    <span class="hljs-keyword">const</span> { contextBridge, ipcRenderer } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'electron'</span>)

    <span class="hljs-comment">// âœ… å®‰å…¨çš„åšæ³•ï¼šåªæš´éœ²ç‰¹å®šã€å°è£…å¥½çš„å‡½æ•°</span>
    contextBridge.<span class="hljs-title function_">exposeInMainWorld</span>(<span class="hljs-string">'myApp'</span>, {
        <span class="hljs-comment">// æš´éœ²ä¸€ä¸ªå‡½æ•°ï¼Œå†…éƒ¨ä½¿ç”¨ invoke æ¨¡å¼é€šä¿¡</span>
        <span class="hljs-attr">openFile</span>: <span class="hljs-function">() =&gt;</span> ipcRenderer.<span class="hljs-title function_">invoke</span>(<span class="hljs-string">'dialog:openFile'</span>),
        <span class="hljs-comment">// å¯ä»¥æš´éœ²å…¶ä»–ç»è¿‡ç²¾å¿ƒè®¾è®¡çš„API</span>
        <span class="hljs-attr">getVersion</span>: <span class="hljs-function">() =&gt;</span> ipcRenderer.<span class="hljs-title function_">invoke</span>(<span class="hljs-string">'app:get-version'</span>)
    })
</code></pre>
<h3 data-id="heading-6">ğŸš€ æ·±å…¥ç†è§£ Invoke (é€šä¿¡æ¨¡å¼)</h3>
<p><code>invoke</code>/<code>handle</code>Â æ˜¯Electronæä¾›çš„ä¸€ç§<strong>å¼‚æ­¥çš„ã€åŸºäºPromiseçš„</strong>è¿›ç¨‹é—´é€šä¿¡æ¨¡å¼ã€‚</p>
<ul>
<li>
<p><strong>å®ƒä¸ºä»€ä¹ˆå¥½ç”¨ï¼Ÿ</strong></p>
<ul>
<li><strong>é¿å…å›è°ƒåœ°ç‹±</strong>ï¼šä¼ ç»Ÿçš„Â <code>ipcRenderer.send</code>Â +Â <code>ipcRenderer.on</code>Â æ¨¡å¼åœ¨å¤„ç†åŒå‘é€šä¿¡æ—¶ï¼Œéœ€è¦æ‰‹åŠ¨ç®¡ç†å›è°ƒï¼Œå®¹æ˜“å¯¼è‡´ä»£ç åµŒå¥—è¿‡æ·±csdn.netã€‚<code>invoke</code>Â è®©ä»£ç åƒå†™åŒæ­¥å‡½æ•°ä¸€æ ·æ¸…æ™°ã€‚</li>
<li><strong>å†…ç½®é”™è¯¯å¤„ç†</strong>ï¼šå¯ä»¥ç›´æ¥ç”¨Â <code>try/catch</code>Â æ•è·ä¸»è¿›ç¨‹è¿”å›çš„é”™è¯¯ã€‚</li>
<li><strong>è¯­ä¹‰æ¸…æ™°</strong>ï¼š<code>invoke</code>Â æœ¬èº«å°±æš—ç¤ºäº†è¿™æ˜¯ä¸€ä¸ªâ€œè°ƒç”¨å¹¶ç­‰å¾…è¿”å›â€çš„æ“ä½œã€‚</li>
</ul>
</li>
<li>
<p><strong>å®ƒçš„å·¥ä½œæµç¨‹</strong>ï¼š</p>
</li>
</ul>
<pre><code class="hljs language-dart" lang="dart">    <span class="hljs-comment">// æ¸²æŸ“è¿›ç¨‹ (renderer.js)</span>
    <span class="hljs-keyword">const</span> filePath = <span class="hljs-keyword">await</span> <span class="hljs-built_in">window</span>.myApp.openFile() <span class="hljs-comment">// è°ƒç”¨Preloadæš´éœ²çš„å‡½æ•°</span>

    <span class="hljs-comment">// Preloadè„šæœ¬ (preload.js)</span>
    openFile: () =&gt; ipcRenderer.invoke(<span class="hljs-string">'dialog:openFile'</span>) <span class="hljs-comment">// è½¬å‘IPCè°ƒç”¨</span>

    <span class="hljs-comment">// ä¸»è¿›ç¨‹ (main.js)</span>
    ipcMain.handle(<span class="hljs-string">'dialog:openFile'</span>, <span class="hljs-keyword">async</span> () =&gt; {
        <span class="hljs-keyword">const</span> { canceled, filePaths } = <span class="hljs-keyword">await</span> dialog.showOpenDialog()
        <span class="hljs-keyword">if</span> (canceled) <span class="hljs-keyword">return</span> <span class="hljs-keyword">null</span>
        <span class="hljs-keyword">return</span> filePaths[<span class="hljs-number">0</span>] <span class="hljs-comment">// è¿”å›ç»“æœä¼šè‡ªåŠ¨è¢«PromiseåŒ…è£…</span>
    })
</code></pre>
<h2 data-id="heading-7">ğŸ“Š é€šä¿¡æ¨¡å¼å¯¹æ¯”</h2>
<p>ä¸‹è¡¨å¯¹æ¯”äº†ä¸åŒé€šä¿¡æ¨¡å¼çš„ä¼˜ç¼ºç‚¹ï¼Œå¸®åŠ©ä½ é€‰æ‹©æœ€åˆé€‚çš„æ–¹æ¡ˆï¼š</p>









































<table><thead><tr><th>ç‰¹æ€§ç»´åº¦</th><th><code>send</code>/<code>on</code>Â (å•å‘)</th><th><code>invoke</code>/<code>handle</code>Â (åŒå‘)</th><th>ä¸å®‰å…¨çš„ç›´æ¥è®¿é—®</th></tr></thead><tbody><tr><td><strong>ä»£ç ç®€æ´æ€§</strong></td><td>éœ€æ‰‹åŠ¨ç®¡ç†å›è°ƒï¼Œæ˜“é™·å…¥å›è°ƒåœ°ç‹±</td><td>åƒæœ¬åœ°å‡½æ•°è°ƒç”¨ä¸€æ ·ç®€æ´ï¼Œæ”¯æŒ async/await</td><td>ä»£ç æœ€ç®€æ´ï¼Œä½†æä¸å®‰å…¨</td></tr><tr><td><strong>é”™è¯¯å¤„ç†</strong></td><td>æ‰‹åŠ¨ä¼ é€’é”™è¯¯å¯¹è±¡</td><td>å†…ç½®é”™è¯¯å¤„ç†ï¼Œå¯ç”¨ try/catch æ•è·</td><td>é”™è¯¯å¤„ç†éš¾ä»¥ç»Ÿä¸€</td></tr><tr><td><strong>å®‰å…¨æ€§</strong></td><td>ç›¸å¯¹å®‰å…¨ï¼Œä½†ä»éœ€è°¨æ…</td><td><strong>æœ€å®‰å…¨</strong>ï¼Œé…åˆ Preload ä½¿ç”¨</td><td><strong>æä¸å®‰å…¨</strong>ï¼Œåº”é¿å…ä½¿ç”¨</td></tr><tr><td><strong>è¿”å›å€¼</strong></td><td>éœ€è¦æ‰‹åŠ¨å‘é€å›å¤æ¶ˆæ¯</td><td>è‡ªåŠ¨è¿”å› Promise å¯¹è±¡</td><td>ç›´æ¥è®¿é—®ï¼Œæ— é€šä¿¡è¿‡ç¨‹</td></tr><tr><td><strong>æ¨èåœºæ™¯</strong></td><td>ç®€å•é€šçŸ¥ã€æ— éœ€è¿”å›å€¼çš„æ“ä½œ</td><td>éœ€è¦è¿”å›ç»“æœçš„å¤æ‚æ“ä½œ</td><td><strong>æ°¸ä¸æ¨è</strong></td></tr></tbody></table>
<blockquote>
<p>âš ï¸Â <strong>å®‰å…¨è­¦å‘Š</strong>ï¼š<strong>æ°¸è¿œä¸è¦</strong>åœ¨æ¸²æŸ“è¿›ç¨‹ä¸­ç›´æ¥ä½¿ç”¨Â <code>require('electron').ipcRenderer</code>Â æˆ–å¯ç”¨Â <code>nodeIntegration: true</code>ã€‚è¿™ä¼šç ´åä¸Šä¸‹æ–‡éš”ç¦»ï¼Œå¸¦æ¥å·¨å¤§çš„å®‰å…¨é£é™©csdn.net+1Â ã€‚</p>
</blockquote>
<h3 data-id="heading-8">è¿›ä¸€æ­¥å­¦ä¹ èµ„æº</h3>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.electronjs.org%2Fdocs%2Flatest%2Ftutorial%2Fsecurity" target="_blank" title="https://www.electronjs.org/docs/latest/tutorial/security" ref="nofollow noopener noreferrer">Electron å®˜æ–¹å®‰å…¨æŒ‡å—</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.electronjs.org%2Fdocs%2Flatest%2Fapi%2Fcontext-bridge" target="_blank" title="https://www.electronjs.org/docs/latest/api/context-bridge" ref="nofollow noopener noreferrer">contextBridge API æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.electronjs.org%2Fdocs%2Flatest%2Ftutorial%2Fipc" target="_blank" title="https://www.electronjs.org/docs/latest/tutorial/ipc" ref="nofollow noopener noreferrer">è¿›ç¨‹é—´é€šä¿¡ (IPC) æŒ‡å—</a></li>
</ul>
<blockquote>
<p>ğŸŒŸÂ <strong>æœ€åå»ºè®®</strong>ï¼šæ„å»ºå®‰å…¨çš„ Electron åº”ç”¨éœ€è¦ä»ä¸€å¼€å§‹å°±è€ƒè™‘å®‰å…¨å› ç´ ï¼Œè€Œä¸æ˜¯äº‹åæ·»åŠ å®‰å…¨æªæ–½ã€‚éµå¾ªæœ¬æ–‡ä»‹ç»çš„æœ€ä½³å®è·µï¼Œå°†å¸®åŠ©ä½ æ„å»ºæ›´åŠ å®‰å…¨å¯é çš„æ¡Œé¢åº”ç”¨ã€‚</p>
</blockquote>
<p>å¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¤Ÿå¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£ Electron çš„å®‰å…¨é€šä¿¡æœºåˆ¶ã€‚å¦‚æœä½ æœ‰ä»»ä½•é—®é¢˜æˆ–éœ€è¦è¿›ä¸€æ­¥çš„å¸®åŠ©ï¼Œè¯·éšæ—¶åœ¨è¯„è®ºåŒºç•™è¨€ã€‚<strong>åˆ«å¿˜äº†ç‚¹èµå’Œæ”¶è—</strong>ï¼Œä»¥ä¾¿æ—¥åæŸ¥é˜…ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[React è‡ªå®šä¹‰ Hook å®æˆ˜ï¼šä»é¼ æ ‡è¿½è¸ªåˆ°å¾…åŠäº‹é¡¹ç®¡ç†]]></title>    <link>https://juejin.cn/post/7590128405351743488</link>    <guid>https://juejin.cn/post/7590128405351743488</guid>    <pubDate>2026-01-03T06:46:32.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7590128405351743488" data-draft-id="7590213554798362659" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="React è‡ªå®šä¹‰ Hook å®æˆ˜ï¼šä»é¼ æ ‡è¿½è¸ªåˆ°å¾…åŠäº‹é¡¹ç®¡ç†"/> <meta itemprop="keywords" content="å‰ç«¯,React.js"/> <meta itemprop="datePublished" content="2026-01-03T06:46:32.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ohyeah"/> <meta itemprop="url" content="https://juejin.cn/user/740446536480618"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            React è‡ªå®šä¹‰ Hook å®æˆ˜ï¼šä»é¼ æ ‡è¿½è¸ªåˆ°å¾…åŠäº‹é¡¹ç®¡ç†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/740446536480618/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ohyeah
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-03T06:46:32.000Z" title="Sat Jan 03 2026 06:46:32 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ç°ä»£å‰ç«¯å¼€å‘ä¸­ï¼ŒReact çš„è‡ªå®šä¹‰ Hook å·²æˆä¸ºæå‡ä»£ç å¤ç”¨æ€§ã€é€»è¾‘æŠ½è±¡èƒ½åŠ›å’Œå¯ç»´æŠ¤æ€§çš„æ ¸å¿ƒæ‰‹æ®µã€‚æœ¬æ–‡å°†é€šè¿‡ä¸¤ä¸ªå…¸å‹ç¤ºä¾‹â€”â€”<strong>é¼ æ ‡ä½ç½®è¿½è¸ª</strong>ä¸<strong>æœ¬åœ°å­˜å‚¨çš„å¾…åŠäº‹é¡¹ç®¡ç†</strong>ï¼Œæ·±å…¥å‰–æå¦‚ä½•åˆ©ç”¨è‡ªå®šä¹‰ Hook å°†å¤æ‚ä¸šåŠ¡é€»è¾‘å°è£…ä¸ºå¯å¤ç”¨ã€å¯æµ‹è¯•ã€é«˜å†…èšçš„æ¨¡å—ï¼Œå¹¶æ¢è®¨å…¶èƒŒåçš„ React å“åº”å¼ç¼–ç¨‹æ€æƒ³ã€‚</p>
<hr/>
<h2 data-id="heading-0">ä¸€ã€Demo 1ï¼šä½¿ç”¨ <code>useMouse</code> å°è£…é¼ æ ‡ä½ç½®è¿½è¸ª</h2>
<h3 data-id="heading-1">1.1 åˆå§‹å®ç°çš„é—®é¢˜</h3>
<p>æœ€åˆï¼Œå¼€å‘è€…å¯èƒ½ç›´æ¥åœ¨ç»„ä»¶å†…éƒ¨ä½¿ç”¨ <code>useState</code> å’Œ <code>useEffect</code> æ¥ç›‘å¬é¼ æ ‡ç§»åŠ¨äº‹ä»¶ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">function <span class="hljs-built_in">MouseMove</span>() {
  const <span class="hljs-selector-attr">[x, setX]</span> = <span class="hljs-built_in">useState</span>(<span class="hljs-number">0</span>);
  const <span class="hljs-selector-attr">[y, setY]</span> = <span class="hljs-built_in">useState</span>(<span class="hljs-number">0</span>);

  <span class="hljs-built_in">useEffect</span>(() =&gt; {
    const update = (event) =&gt; {
      <span class="hljs-built_in">setX</span>(event.pageX);
      <span class="hljs-built_in">setY</span>(event.pageY);
    };
    window<span class="hljs-selector-class">.addEventListener</span>('mousemove', update);
    return () =&gt; {
      window<span class="hljs-selector-class">.removeEventListener</span>('mousemove', update);
    };
  }, <span class="hljs-selector-attr">[]</span>);

  return &lt;<span class="hljs-selector-tag">div</span>&gt;é¼ æ ‡ä½ç½®: {x} {y}&lt;/<span class="hljs-selector-tag">div</span>&gt;;
}
</code></pre>
<p>è¿™ç§å†™æ³•è™½ç„¶åŠŸèƒ½å®Œæ•´ï¼Œä½†å­˜åœ¨æ˜æ˜¾ç¼ºé™·ï¼š</p>
<ul>
<li><strong>é€»è¾‘è€¦åˆ</strong>ï¼šUI æ¸²æŸ“ä¸äº‹ä»¶ç›‘å¬æ··æ‚ï¼Œç»„ä»¶èŒè´£ä¸æ¸…ï¼›</li>
<li><strong>éš¾ä»¥å¤ç”¨</strong>ï¼šè‹¥å…¶ä»–ç»„ä»¶ä¹Ÿéœ€è¦è·å–é¼ æ ‡åæ ‡ï¼Œéœ€é‡å¤ç¼–å†™ç›¸åŒé€»è¾‘ï¼›</li>
<li><strong>æ½œåœ¨å†…å­˜æ³„æ¼é£é™©</strong>ï¼šè‹¥æœªæ­£ç¡®æ¸…ç†äº‹ä»¶ç›‘å¬å™¨ï¼ˆå¦‚å¿˜è®°è¿”å›æ¸…ç†å‡½æ•°ï¼‰ï¼Œç»„ä»¶å¸è½½åä»ä¼šæ‰§è¡Œå›è°ƒï¼Œ<strong>äº‹ä»¶ç›‘å¬/å®šæ—¶å™¨ ä¸ä¼šå› ä¸ºå‡½æ•°ç»„ä»¶å¸è½½è€Œè‡ªåŠ¨é”€æ¯</strong>ï¼Œå½“å¸è½½ç»„ä»¶ååˆå¼€å¯ç»„ä»¶ï¼Œç›¸å½“äºæ˜¯åˆè¿›è¡Œäº†ä¸€æ¬¡äº‹ä»¶ç›‘å¬ï¼Œå¤šæ¬¡é‡å¤å¯¼è‡´å†…å­˜æ³„æ¼ã€‚</li>
</ul>
<h3 data-id="heading-2">1.2 æç‚¼ä¸ºè‡ªå®šä¹‰ Hookï¼š<code>useMouse</code></h3>
<p>ä¸ºè§£å†³ä¸Šè¿°é—®é¢˜ï¼Œæˆ‘ä»¬å°†é¼ æ ‡è¿½è¸ªé€»è¾‘æå–è‡³ç‹¬ç«‹çš„ <code>useMouse</code> Hookï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// src/hooks/useMouse.js</span>
<span class="hljs-keyword">import</span> { useState, useEffect } <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">useMouse</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> [x, setX] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);
  <span class="hljs-keyword">const</span> [y, setY] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);

  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">update</span> = (<span class="hljs-params">event</span>) =&gt; {
      <span class="hljs-title function_">setX</span>(event.<span class="hljs-property">pageX</span>);
      <span class="hljs-title function_">setY</span>(event.<span class="hljs-property">pageY</span>);
    };
    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'mousemove'</span>, update);
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'mousemove'</span>, update);
    };
  }, []);
   
  <span class="hljs-keyword">return</span> { x, y };
  <span class="hljs-comment">// æŠŠè¦å‘å¤–æš´éœ²çš„çŠ¶æ€å’Œæ–¹æ³•è¿”å›</span>
};
</code></pre>
<h4 data-id="heading-3">å…³é”®è®¾è®¡ç‚¹è§£æï¼š</h4>
<ol>
<li><strong>çŠ¶æ€å°è£…</strong><br/>
ä½¿ç”¨ <code>useState</code> ç®¡ç† <code>x</code> å’Œ <code>y</code> åæ ‡ï¼Œå¯¹å¤–ä»…æš´éœ²åªè¯»å€¼ï¼Œé¿å…å¤–éƒ¨ç›´æ¥ä¿®æ”¹çŠ¶æ€ã€‚</li>
<li><strong>å‰¯ä½œç”¨éš”ç¦»</strong><br/>
<code>useEffect</code> è´Ÿè´£æ·»åŠ /ç§»é™¤å…¨å±€äº‹ä»¶ç›‘å¬å™¨ã€‚ä¾èµ–æ•°ç»„ä¸ºç©ºï¼ˆ<code>[]</code>ï¼‰ï¼Œç¡®ä¿ä»…åœ¨ç»„ä»¶æŒ‚è½½æ—¶æ³¨å†Œä¸€æ¬¡ç›‘å¬å™¨ï¼Œå¹¶åœ¨å¸è½½æ—¶è‡ªåŠ¨æ¸…ç†ï¼Œå½»åº•è§„é¿å†…å­˜æ³„æ¼ã€‚</li>
<li><strong>å•ä¸€èŒè´£åŸåˆ™</strong><br/>
<code>useMouse</code> åªå…³æ³¨â€œè·å–é¼ æ ‡ä½ç½®â€è¿™ä¸€æ ¸å¿ƒèƒ½åŠ›ï¼Œä¸æ¶‰åŠä»»ä½• UI æ¸²æŸ“æˆ–ä¸šåŠ¡åˆ¤æ–­ï¼Œé«˜åº¦å†…èšã€‚</li>
<li><strong>å¯ç»„åˆæ€§</strong><br/>
è¿”å›å¯¹è±¡ <code>{ x, y }</code>ï¼Œä¾¿äºåœ¨ä»»æ„ç»„ä»¶ä¸­è§£æ„ä½¿ç”¨ï¼Œç¬¦åˆ React çš„å£°æ˜å¼é£æ ¼ã€‚</li>
</ol>
<h3 data-id="heading-4">1.3 åœ¨ç»„ä»¶ä¸­ä½¿ç”¨</h3>
<p>åœ¨ <code>App.jsx</code> ä¸­ï¼Œåªéœ€ä¸€è¡Œä»£ç å³å¯æ¥å…¥é¼ æ ‡ä½ç½®æ•°æ®ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">MouseMove</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> { x, y } = <span class="hljs-title function_">useMouse</span>();
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>é¼ æ ‡ä½ç½®: {x} {y}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
}
</code></pre>
<p>æ­¤æ—¶ <code>MouseMove</code> ç»„ä»¶å®Œå…¨é€€åŒ–ä¸ºçº¯å±•ç¤ºå±‚ï¼Œé€»è¾‘ä¸è§†å›¾åˆ†ç¦»ï¼Œæå¤§æå‡äº†å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</p>
<hr/>
<h2 data-id="heading-5">äºŒã€Demo 2ï¼šæ„å»ºå®Œæ•´çš„å¾…åŠäº‹é¡¹ç³»ç»Ÿ â€”â€” <code>useTodos</code></h2>
<p>ç›¸æ¯”é¼ æ ‡è¿½è¸ªï¼Œå¾…åŠäº‹é¡¹ç®¡ç†æ¶‰åŠ<strong>çŠ¶æ€ç®¡ç†ã€æŒä¹…åŒ–å­˜å‚¨</strong>ç­‰å¤šä¸ªç»´åº¦ï¼Œæ˜¯æ£€éªŒè‡ªå®šä¹‰ Hook èƒ½åŠ›çš„ç»ä½³åœºæ™¯ã€‚</p>
<h3 data-id="heading-6">2.1 æ•´ä½“æ¶æ„æ‹†è§£</h3>
<p>æ•´ä¸ªç³»ç»Ÿç”±ä»¥ä¸‹éƒ¨åˆ†ç»„æˆï¼š</p>
<ul>
<li>
<p><strong>Hook å±‚</strong>ï¼š<code>useTodos</code> â€”â€” æ ¸å¿ƒé€»è¾‘å®¹å™¨</p>
</li>
<li>
<p><strong>ç»„ä»¶å±‚</strong>ï¼š</p>
<ul>
<li><code>TodoInput</code>ï¼šè¾“å…¥æ–°ä»»åŠ¡</li>
<li><code>TodoList</code>ï¼šæ¸²æŸ“ä»»åŠ¡åˆ—è¡¨</li>
<li><code>TodoItem</code>ï¼šå•ä¸ªä»»åŠ¡é¡¹ï¼ˆå«å®ŒæˆçŠ¶æ€åˆ‡æ¢ä¸åˆ é™¤ï¼‰</li>
</ul>
</li>
</ul>
<p>è¿™ç§åˆ†å±‚ç»“æ„ä½“ç°äº†å…¸å‹çš„â€œ<strong>é€»è¾‘ä¸‹æ²‰ï¼ŒUI ä¸Šæµ®</strong>â€åŸåˆ™ï¼šå¤æ‚çŠ¶æ€æµè½¬ç”± Hook å¤„ç†ï¼Œç»„ä»¶ä»…è´Ÿè´£è°ƒç”¨æ–¹æ³•ä¸å±•ç¤ºæ•°æ®ã€‚</p>
<h3 data-id="heading-7">2.2 <code>useTodos</code> Hook æ·±åº¦è§£æ</h3>
<pre><code class="hljs language-ini" lang="ini">// src/hooks/useTodos.js
import { useState, useEffect } from 'react'<span class="hljs-comment">;</span>

const <span class="hljs-attr">STORAGE_KEY</span> = <span class="hljs-string">'todos'</span><span class="hljs-comment">;</span>

function loadFromStorage() {
  const <span class="hljs-attr">stored</span> = localStorage.getItem(STORAGE_KEY)<span class="hljs-comment">;</span>
  return stored ? JSON.parse(stored) : <span class="hljs-section">[]</span><span class="hljs-comment">;</span>
}

function saveToStorage(todos) {
  localStorage.setItem(STORAGE_KEY, JSON.stringify(todos))<span class="hljs-comment">;</span>
}

export const <span class="hljs-attr">useTodos</span> = () =&gt; {
  const <span class="hljs-section">[todos, setTodos]</span> = useState(loadFromStorage)<span class="hljs-comment">;</span>

  useEffect(() =&gt; {
    saveToStorage(todos)<span class="hljs-comment">;</span>
  }, <span class="hljs-section">[todos]</span>)<span class="hljs-comment">;</span>
  // todosæ”¹å˜ è¿›è¡Œæœ¬åœ°å­˜å‚¨

  const <span class="hljs-attr">addTodo</span> = (text) =&gt; {
    setTodos(<span class="hljs-section">[
      ...todos,
      { id: Date.now(), text, completed: false }
    ]</span>)<span class="hljs-comment">;</span>
  }<span class="hljs-comment">;</span>

  const <span class="hljs-attr">toggleTodo</span> = (id) =&gt; {
    setTodos(
      todos.map(<span class="hljs-attr">todo</span> =&gt;
        <span class="hljs-attr">todo.id</span> === id ? { ...todo, completed: !todo.completed } : todo
      )
    )<span class="hljs-comment">;</span>
  }<span class="hljs-comment">;</span>

  const <span class="hljs-attr">deleteTodo</span> = (id) =&gt; {
    setTodos(todos.filter(<span class="hljs-attr">todo</span> =&gt; todo.id !== id))<span class="hljs-comment">;</span>
  }<span class="hljs-comment">;</span>

  return { todos, addTodo, toggleTodo, deleteTodo }<span class="hljs-comment">;</span>
}<span class="hljs-comment">;</span>
</code></pre>
<h4 data-id="heading-8">æ ¸å¿ƒæœºåˆ¶è¯¦è§£ï¼š</h4>
<h5 data-id="heading-9">ï¼ˆ1ï¼‰åˆå§‹åŒ–ä¸æŒä¹…åŒ–åŒæ­¥</h5>
<ul>
<li><strong>å»¶è¿Ÿåˆå§‹åŒ–</strong>ï¼š<code>useState(loadFromStorage)</code> åˆ©ç”¨å‡½æ•°å¼åˆå§‹åŒ–ï¼Œé¿å…æ¯æ¬¡æ¸²æŸ“éƒ½è¯»å– localStorageï¼Œæå‡æ€§èƒ½ã€‚</li>
<li><strong>è‡ªåŠ¨æŒä¹…åŒ–</strong>ï¼š<code>useEffect</code> ç›‘å¬ <code>todos</code> å˜åŒ–ï¼Œä¸€æ—¦çŠ¶æ€æ›´æ–°ç«‹å³å†™å…¥ localStorageï¼Œå®ç°â€œçŠ¶æ€å³å­˜å‚¨â€çš„æ— ç¼ä½“éªŒã€‚</li>
</ul>
<blockquote>
<p>æ³¨æ„ï¼šæ­¤å¤„ä½¿ç”¨ <code>Date.now()</code> ä½œä¸º ID è™½ç®€ä¾¿ï¼Œä½†åœ¨é«˜é¢‘æ“ä½œä¸‹å¯èƒ½å†²çªã€‚</p>
</blockquote>
<h5 data-id="heading-10">ï¼ˆ2ï¼‰ä¸å¯å˜æ›´æ–°åŸåˆ™</h5>
<p>æ‰€æœ‰çŠ¶æ€å˜æ›´å‡é€šè¿‡<strong>åˆ›å»ºæ–°æ•°ç»„</strong>å®ç°ï¼š</p>
<ul>
<li><code>addTodo</code>ï¼šä½¿ç”¨å±•å¼€è¿ç®—ç¬¦ <code>[...todos, newTodo]</code></li>
<li><code>toggleTodo</code>ï¼š<code>map</code> è¿”å›æ–°æ•°ç»„ï¼Œä»…ä¿®æ”¹ç›®æ ‡é¡¹</li>
<li><code>deleteTodo</code>ï¼š<code>filter</code> æ’é™¤æŒ‡å®š ID é¡¹</li>
</ul>
<p>è¿™ä¿è¯äº† React èƒ½æ­£ç¡®è§¦å‘é‡æ¸²æŸ“ï¼ŒåŒæ—¶é¿å…æ„å¤–ä¿®æ”¹åŸå§‹çŠ¶æ€ã€‚</p>
<h5 data-id="heading-11">ï¼ˆ3ï¼‰API è®¾è®¡æ¸…æ™°</h5>
<p>è¿”å›å¯¹è±¡åŒ…å«ï¼š</p>
<ul>
<li><strong>çŠ¶æ€</strong>ï¼š<code>todos</code>ï¼ˆå½“å‰ä»»åŠ¡åˆ—è¡¨ï¼‰</li>
<li><strong>è¡Œä¸º</strong>ï¼š<code>addTodo</code>, <code>toggleTodo</code>, <code>deleteTodo</code>ï¼ˆçº¯å‡½æ•°ï¼Œæ— å‰¯ä½œç”¨ï¼‰</li>
</ul>
<p>è°ƒç”¨è€…æ— éœ€å…³å¿ƒå†…éƒ¨å®ç°ï¼Œåªéœ€æŒ‰çº¦å®šä¼ å‚å³å¯æ“ä½œçŠ¶æ€ã€‚</p>
<h3 data-id="heading-12">2.3 ç»„ä»¶å±‚åä½œæµç¨‹</h3>
<h4 data-id="heading-13"><code>TodoInput</code>ï¼šä»»åŠ¡åˆ›å»ºå…¥å£</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// src/components/TodoInput.jsx</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">TodoInput</span>(<span class="hljs-params">{ onAddTodo }</span>) {
  <span class="hljs-keyword">const</span> [text, setText] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">''</span>);
  
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleSubmit</span> = (<span class="hljs-params">e</span>) =&gt; {
    e.<span class="hljs-title function_">preventDefault</span>();
    <span class="hljs-keyword">if</span> (!text.<span class="hljs-title function_">trim</span>()) <span class="hljs-keyword">return</span>;
    <span class="hljs-title function_">onAddTodo</span>(text.<span class="hljs-title function_">trim</span>());
    <span class="hljs-title function_">setText</span>(<span class="hljs-string">''</span>);
  };

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">onSubmit</span>=<span class="hljs-string">{handleSubmit}</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">input</span> 
        <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span>
        <span class="hljs-attr">value</span>=<span class="hljs-string">{text}</span>
        <span class="hljs-attr">onChange</span>=<span class="hljs-string">{e</span> =&gt;</span> setText(e.target.value)}
      /&gt;
    <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span></span>
  );
}
</code></pre>
<ul>
<li>é€šè¿‡ <code>onAddTodo</code> å›è°ƒå°†æ–°ä»»åŠ¡æ–‡æœ¬ä¼ é€’ç»™çˆ¶ç»„ä»¶ï¼ˆå³ <code>useTodos.addTodo</code>ï¼‰</li>
<li>è¡¨å•æäº¤åæ¸…ç©ºè¾“å…¥æ¡†ï¼Œæä¾›è‰¯å¥½ UX</li>
</ul>
<h4 data-id="heading-14"><code>TodoList</code> ä¸ <code>TodoItem</code>ï¼šçŠ¶æ€å±•ç¤ºä¸äº¤äº’</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// TodoList.jsx</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">TodoList</span>(<span class="hljs-params">{ todos, onDelete, onToggle }</span>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>
      {todos.map(todo =&gt; (
        <span class="hljs-tag">&lt;<span class="hljs-name">TodoItem</span> 
          <span class="hljs-attr">key</span>=<span class="hljs-string">{todo.id}</span>
          <span class="hljs-attr">todo</span>=<span class="hljs-string">{todo}</span>
          <span class="hljs-attr">onDelete</span>=<span class="hljs-string">{onDelete}</span>
          <span class="hljs-attr">onToggle</span>=<span class="hljs-string">{onToggle}</span>
        /&gt;</span>
      ))}
    <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span></span>
  );
}

<span class="hljs-comment">// TodoItem.jsx</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">TodoItem</span>(<span class="hljs-params">{ todo, onDelete, onToggle }</span>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">input</span> 
        <span class="hljs-attr">type</span>=<span class="hljs-string">"checkbox"</span>
        <span class="hljs-attr">checked</span>=<span class="hljs-string">{todo.completed}</span>
        <span class="hljs-attr">onChange</span>=<span class="hljs-string">{()</span> =&gt;</span> onToggle(todo.id)}
      /&gt;
      <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{todo.completed</span> ? '<span class="hljs-attr">completed</span>' <span class="hljs-attr">:</span> ''}&gt;</span>
        {todo.text}
      <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> onDelete(todo.id)}&gt;Delete<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span>
  );
}
</code></pre>
<ul>
<li><strong>å•å‘æ•°æ®æµ</strong>ï¼š<code>todos</code> ç”± <code>App</code> ä¼ å…¥ï¼Œ<code>TodoItem</code> ä»…æ¶ˆè´¹æ•°æ®</li>
<li><strong>äº‹ä»¶å§”æ‰˜</strong>ï¼šç‚¹å‡»å¤é€‰æ¡†æˆ–åˆ é™¤æŒ‰é’®æ—¶ï¼Œè°ƒç”¨ <code>onToggle</code> / <code>onDelete</code>ï¼Œæœ€ç»ˆè§¦å‘ <code>useTodos</code> å†…éƒ¨çŠ¶æ€æ›´æ–°</li>
<li><strong>Key å”¯ä¸€æ€§</strong>ï¼šä½¿ç”¨ <code>todo.id</code> ä½œä¸º <code>key</code>ï¼Œç¡®ä¿ React Diff ç®—æ³•é«˜æ•ˆæ›´æ–°åˆ—è¡¨</li>
</ul>
<h3 data-id="heading-15">2.4 App ç»„ä»¶ï¼šèƒ¶æ°´å±‚æ•´åˆ</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// App.jsx</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> { todos, addTodo, deleteTodo, toggleTodo } = <span class="hljs-title function_">useTodos</span>();

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">TodoInput</span> <span class="hljs-attr">onAddTodo</span>=<span class="hljs-string">{addTodo}</span> /&gt;</span>
      {todos.length &gt; 0 ? (
        <span class="hljs-tag">&lt;<span class="hljs-name">TodoList</span> 
          <span class="hljs-attr">todos</span>=<span class="hljs-string">{todos}</span> 
          <span class="hljs-attr">onDelete</span>=<span class="hljs-string">{deleteTodo}</span> 
          <span class="hljs-attr">onToggle</span>=<span class="hljs-string">{toggleTodo}</span> 
        /&gt;</span>
      ) : (
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>æš‚æ— å¾…åŠäº‹é¡¹<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      )}
    <span class="hljs-tag">&lt;/&gt;</span></span>
  );
}
</code></pre>
<p><code>App</code> ç»„ä»¶å‡ ä¹ä¸åŒ…å«ä¸šåŠ¡é€»è¾‘ï¼Œä»…è´Ÿè´£ï¼š</p>
<ol>
<li>è°ƒç”¨ <code>useTodos</code> è·å–çŠ¶æ€ä¸æ–¹æ³•</li>
<li>å°†æ–¹æ³•ä½œä¸º props ä¼ é€’ç»™å­ç»„ä»¶</li>
<li>æ ¹æ® <code>todos.length</code> æ§åˆ¶ç©ºçŠ¶æ€æ˜¾ç¤º</li>
</ol>
<p>è¿™ç§â€œç˜¦å®¹å™¨â€æ¨¡å¼ä½¿åº”ç”¨ç»“æ„æ¸…æ™°ï¼Œæ˜“äºæ‰©å±•ï¼ˆä¾‹å¦‚æœªæ¥åŠ å…¥ç­›é€‰ã€ç¼–è¾‘ç­‰åŠŸèƒ½ï¼‰ã€‚</p>
<hr/>
<h2 data-id="heading-16">ä¸‰ã€è‡ªå®šä¹‰ Hook çš„ä»·å€¼ä¸æœ€ä½³å®è·µ</h2>
<h3 data-id="heading-17">3.1 ä¸ºä»€ä¹ˆéœ€è¦è‡ªå®šä¹‰ Hookï¼Ÿ</h3>
<ul>
<li><strong>é€»è¾‘å¤ç”¨</strong>ï¼šè·¨ç»„ä»¶å…±äº«çŠ¶æ€é€»è¾‘</li>
<li><strong>å…³æ³¨ç‚¹åˆ†ç¦»</strong>ï¼šå°†å‰¯ä½œç”¨ã€æ•°æ®è·å–ã€çŠ¶æ€ç®¡ç†ä» UI ç»„ä»¶ä¸­å‰¥ç¦»</li>
<li><strong>æµ‹è¯•å‹å¥½</strong>ï¼šHook å¯ç‹¬ç«‹äºç»„ä»¶è¿›è¡Œå•å…ƒæµ‹è¯•</li>
<li><strong>å›¢é˜Ÿåä½œ</strong>ï¼šå½¢æˆå¯æ²‰æ·€çš„â€œå‰ç«¯èµ„äº§åº“â€ï¼Œæ–°äººå¯å¿«é€Ÿæ¥å…¥</li>
</ul>
<h3 data-id="heading-18">3.2 ç¼–å†™é«˜è´¨é‡ Hook çš„å‡†åˆ™</h3>
<ol>
<li><strong>å‘½åè§„èŒƒ</strong>ï¼šä»¥ <code>use</code> å¼€å¤´ï¼ˆå¦‚ <code>useTodos</code>ï¼‰ï¼Œè¿™æ˜¯ React çš„çº¦å®šï¼Œä¹Ÿæ˜¯ ESLint è§„åˆ™çš„è¦æ±‚ã€‚</li>
<li><strong>è¿”å›ç»“æ„æ¸…æ™°</strong>ï¼šé€šå¸¸è¿”å›å¯¹è±¡ï¼Œä¾¿äºæŒ‰éœ€è§£æ„ï¼›é¿å…è¿”å›æ•°ç»„å¯¼è‡´é¡ºåºä¾èµ–ã€‚</li>
<li><strong>é¿å…å‰¯ä½œç”¨å¤–æ³„</strong>ï¼šHook å†…éƒ¨å¤„ç†æ‰€æœ‰è®¢é˜…/æ¸…ç†ï¼Œè°ƒç”¨è€…æ— éœ€å…³å¿ƒç”Ÿå‘½å‘¨æœŸã€‚</li>
<li><strong>è€ƒè™‘æ€§èƒ½ä¼˜åŒ–</strong>ï¼šå¯¹è¿”å›çš„å‡½æ•°ä½¿ç”¨ <code>useCallback</code> åŒ…è£¹ï¼ˆæœ¬ä¾‹å› ç®€å•çœç•¥ï¼Œå¤æ‚åœºæ™¯éœ€æ³¨æ„ï¼‰ã€‚</li>
</ol>
<hr/>
<h2 data-id="heading-19">ç»“è¯­</h2>
<p>é€šè¿‡ <code>useMouse</code> ä¸ <code>useTodos</code> ä¸¤ä¸ªæ¡ˆä¾‹ï¼Œæˆ‘ä»¬è§è¯äº†è‡ªå®šä¹‰ Hook å¦‚ä½•å°†â€œé¢æ¡å¼ä»£ç â€è½¬åŒ–ä¸ºæ¨¡å—åŒ–ã€å¯ç»´æŠ¤çš„ç°ä»£ React åº”ç”¨ã€‚å®ƒä¸ä»…æ˜¯è¯­æ³•ç³–ï¼Œæ›´æ˜¯ä¸€ç§<strong>æ¶æ„æ€ç»´</strong>â€”â€”é¼“åŠ±å¼€å‘è€…å°†å¤æ‚é—®é¢˜åˆ†è§£ä¸ºç‹¬ç«‹ã€å¯ç»„åˆçš„é€»è¾‘å•å…ƒã€‚</p>
<p>åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œä½ å¯ä»¥ç»§ç»­å»¶ä¼¸è¿™ä¸€æ¨¡å¼ï¼šå°è£…ç½‘ç»œè¯·æ±‚ï¼ˆ<code>useFetch</code>ï¼‰ã€è¡¨å•éªŒè¯ï¼ˆ<code>useForm</code>ï¼‰ã€ä¸»é¢˜åˆ‡æ¢ï¼ˆ<code>useTheme</code>ï¼‰ç­‰é€šç”¨èƒ½åŠ›ã€‚å½“ä½ çš„ Hook åº“é€æ¸ä¸°å¯Œï¼Œä½ ä¼šå‘ç°ï¼š<strong>ä¼˜ç§€çš„å‰ç«¯å·¥ç¨‹ï¼Œå§‹äºå¯¹é€»è¾‘çš„æ•¬ç•ï¼Œæˆäºå¯¹å¤ç”¨çš„è¿½æ±‚</strong>ã€‚</p>
<blockquote>
<p>æœ¬æ–‡æ‰€æœ‰ä»£ç å‡å¯ç›´æ¥è¿è¡Œï¼Œå»ºè®®è¯»è€…åŠ¨æ‰‹å®è·µï¼Œå°è¯•ä¸º <code>useTodos</code> æ·»åŠ â€œç¼–è¾‘ä»»åŠ¡â€æˆ–â€œæŒ‰çŠ¶æ€ç­›é€‰â€åŠŸèƒ½ï¼Œè¿›ä¸€æ­¥å·©å›ºè‡ªå®šä¹‰ Hook çš„è®¾è®¡èƒ½åŠ›ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[MiniMax Ã— Cursorï¼šTaroå°ç¨‹åºå¼€å‘ç»ˆææŒ‡å—]]></title>    <link>https://juejin.cn/post/7590421489997611027</link>    <guid>https://juejin.cn/post/7590421489997611027</guid>    <pubDate>2026-01-03T06:46:49.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7590421489997611027" data-draft-id="7589919989039775807" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="MiniMax Ã— Cursorï¼šTaroå°ç¨‹åºå¼€å‘ç»ˆææŒ‡å—"/> <meta itemprop="keywords" content="å°ç¨‹åºÂ·äº‘å¼€å‘,Cursor,LLM"/> <meta itemprop="datePublished" content="2026-01-03T06:46:49.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åœŸè±†1250"/> <meta itemprop="url" content="https://juejin.cn/user/3280598428302727"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            MiniMax Ã— Cursorï¼šTaroå°ç¨‹åºå¼€å‘ç»ˆææŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3280598428302727/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åœŸè±†1250
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-03T06:46:49.000Z" title="Sat Jan 03 2026 06:46:49 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»17åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>ä»"è¿™æ˜¯ä»€ä¹ˆç©æ„"åˆ°"å“‡è¿™ä¹Ÿå¤ªä¸æ»‘äº†å§" â€”â€” ä¸€ä¸ª AI è¾…åŠ©å¼€å‘çš„æˆé•¿æ—¥è®°</p>
</blockquote>
<h2 data-id="heading-0">ğŸ¯ å¼€ç¯‡ï¼šä¸ºä»€ä¹ˆä½ éœ€è¦è¿™å¥—ç»„åˆæ‹³</h2>
<h3 data-id="heading-1">Whyï¼šä¸‰ä¸ªè®©ä½ å¿ƒåŠ¨çš„ç†ç”±</h3>
<p><strong>ç—›ç‚¹ä¸€ï¼šBug è°ƒè¯•åƒåœ¨è¿·å®«é‡Œæ‰¾é’¥åŒ™</strong> ğŸ”‘<br/>
ä¼ ç»Ÿå¼€å‘ä¸­,é‡åˆ°é—®é¢˜åªèƒ½ç–¯ç‹‚ç¿»æ–‡æ¡£ã€æœ Stack Overflowã€é—® GPT ç„¶åå¤åˆ¶ç²˜è´´ã€‚é—®é¢˜æ˜¯â€”â€”ä½ æ€ä¹ˆçŸ¥é“æœåˆ°çš„ç­”æ¡ˆæ˜¯ä¸æ˜¯æœ€æ–°çš„?é€‚ä¸é€‚åˆä½ çš„é¡¹ç›®?</p>
<p><strong>ç—›ç‚¹äºŒ:è®¾è®¡ç¨¿è¿˜åŸåº¦å…¨é "ç›²çŒœ"</strong> ğŸ¨<br/>
UI ç»™äº†è®¾è®¡å›¾,ä½ å·¦çœ‹å³çœ‹ä¸Šçœ‹ä¸‹çœ‹,è¿™ä¸ªé—´è·æ˜¯ 16px è¿˜æ˜¯ 18px?è¿™ä¸ªé¢œè‰²æ˜¯#333 è¿˜æ˜¯#444?æ¥å›åˆ‡å±,çœ¼ç›éƒ½å¿«çäº†ã€‚</p>
<p><strong>ç—›ç‚¹ä¸‰:äº‘å‡½æ•°è°ƒè¯•åƒå¼€ç›²ç›’</strong> ğŸ“¦<br/>
äº‘å‡½æ•°æŠ¥é”™äº†?å…ˆç™»å½•æ§åˆ¶å°,æ‰¾åˆ°å‡½æ•°,ç‚¹å¼€æ—¥å¿—,ç¿»åŠå¤©...ç­‰ç­‰,è¿™ä¸ª error æ˜¯å“ªæ¬¡è°ƒç”¨çš„æ¥ç€?</p>
<h3 data-id="heading-2">Whatï¼šè¿™å¥—ç»„åˆæ‹³èƒ½ç»™ä½ ä»€ä¹ˆ</h3>
<ul>
<li><strong>MiniMax Coding Plan MCP</strong>: å†…ç½®<code>web_search</code>å’Œ<code>understand_image</code>å·¥å…·</li>
<li><strong>CloudBase MCP</strong>: ç›´æ¥åœ¨ IDE é‡ŒæŸ¥è¯¢äº‘å‡½æ•°æ—¥å¿—ã€ç®¡ç†æ•°æ®åº“</li>
<li><strong>Cursor + MCP</strong>: AI åŠ©æ‰‹æ‹¥æœ‰"åƒé‡Œçœ¼"å’Œ"é¡ºé£è€³"</li>
<li><strong>Taro + Tailwind CSS</strong>: æ‰€è§å³æ‰€å¾—çš„ UI å¼€å‘</li>
</ul>
<p>ç®€å•æ¥è¯´:<strong>è®© AI çœŸæ­£æ‡‚ä½ çš„é¡¹ç›®,è€Œä¸æ˜¯ççŒ«ç¢°æ­»è€—å­ã€‚</strong></p>
<h2 data-id="heading-3">ğŸš€ åŸºç¡€é…ç½®ï¼šå…ˆæŠŠè£…å¤‡é…é½</h2>
<h3 data-id="heading-4">ç¬¬ä¸€æ­¥:å®‰è£… Cursor</h3>
<p>å¦‚æœä½ è¿˜åœ¨ç”¨ VS Code,æ˜¯æ—¶å€™å‡çº§äº†ã€‚<a href="https://link.juejin.cn?target=https%3A%2F%2Fcursor.com" title="https://cursor.com" target="_blank" ref="nofollow noopener noreferrer">Cursor</a> æ˜¯ä¸“ä¸º AI ç¼–ç¨‹ä¼˜åŒ–çš„ IDE,åŸç”Ÿæ”¯æŒ MCP åè®®ã€‚</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># macOS/Linux</span>
<span class="hljs-comment"># ç›´æ¥å»å®˜ç½‘ä¸‹è½½å³å¯: https://cursor.com</span>

<span class="hljs-comment"># ä¸‹è½½åé¦–æ¬¡å¯åŠ¨,ä¼šæç¤ºä½ å¯¼å…¥VS Codeè®¾ç½®</span>
<span class="hljs-comment"># å¼ºçƒˆå»ºè®®å¯¼å…¥,æ— ç¼è¿ç§»</span>
</code></pre>
<h3 data-id="heading-5">ç¬¬äºŒæ­¥:é…ç½® MiniMax Coding Plan MCP</h3>
<p><strong>ä»€ä¹ˆæ˜¯ Coding Plan?</strong><br/>
è¿™æ˜¯ MiniMax ä¸“é—¨ä¸ºå¼€å‘è€…æä¾›çš„è®¢é˜…æœåŠ¡,åŒ…å« web æœç´¢å’Œå›¾ç‰‡ç†è§£èƒ½åŠ›ã€‚ç®€å•è¯´å°±æ˜¯ç»™ AI è£…ä¸Šäº†"ç½‘ç»œæœç´¢"å’Œ"çœ‹å›¾è¯´è¯"ä¸¤ä¸ªæŠ€èƒ½ã€‚</p>
<h4 data-id="heading-6">è·å– API Key</h4>
<ol>
<li>è®¿é—® <a href="https://link.juejin.cn?target=https%3A%2F%2Fplatform.minimax.io" title="https://platform.minimax.io" target="_blank" ref="nofollow noopener noreferrer">MiniMax å¼€å‘è€…å¹³å°</a></li>
<li>æ³¨å†Œ/ç™»å½•è´¦å·</li>
<li>åœ¨"Coding Plan"é¡µé¢è®¢é˜…å¥—é¤</li>
<li>è·å–ä½ çš„ API Key</li>
</ol>
<h4 data-id="heading-7">é…ç½®åˆ° Cursor</h4>
<p>æ‰“å¼€ Cursor çš„ MCP é…ç½®æ–‡ä»¶:</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># macOS/Linux</span>
~/.cursor/mcp.json

<span class="hljs-comment"># Windows</span>
%USERPROFILE%\.cursor\mcp.json
</code></pre>
<p>æ·»åŠ  MiniMax é…ç½®:</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"mcpServers"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"MiniMax"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"command"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"uvx"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"args"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"minimax-coding-plan-mcp"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"-y"</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"env"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"MINIMAX_API_KEY"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ä½ çš„API_KEY"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"MINIMAX_API_HOST"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://api.minimax.io"</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>æ³¨æ„äº‹é¡¹</strong> âš ï¸</p>
<ul>
<li>å›½å†…ç”¨æˆ·ä½¿ç”¨ <code>https://api.minimax.io</code></li>
<li>å›½é™…ç”¨æˆ·ä½¿ç”¨ <code>https://api.minimaxi.chat</code></li>
<li>API Key å¿…é¡»å’Œ Host åŒºåŸŸåŒ¹é…,å¦åˆ™ä¼šæŠ¥é”™</li>
</ul>
<p>é‡å¯ Cursor,æ‰“å¼€ Composer (Cmd/Ctrl+I),è¾“å…¥<code>/mcp</code>,å¦‚æœçœ‹åˆ°<code>web_search</code>å’Œ<code>understand_image</code>å°±è¯´æ˜é…ç½®æˆåŠŸäº†!</p>
<h3 data-id="heading-8">ç¬¬ä¸‰æ­¥:é…ç½® CloudBase MCP</h3>
<p>CloudBase æ˜¯è…¾è®¯äº‘å¼€å‘çš„ MCP å·¥å…·,ä¸“é—¨ç”¨äºç®¡ç†äº‘å¼€å‘èµ„æºã€‚</p>
<h4 data-id="heading-9">å®‰è£… CloudBase CLI</h4>
<pre><code class="hljs language-bash" lang="bash">npm install -g @cloudbase/cli@latest
</code></pre>
<h4 data-id="heading-10">ç™»å½• CloudBase</h4>
<pre><code class="hljs language-bash" lang="bash">tcb login
<span class="hljs-comment"># ä¼šæ‰“å¼€æµè§ˆå™¨è¿›è¡Œæˆæƒç™»å½•</span>
</code></pre>
<h4 data-id="heading-11">é…ç½®åˆ° Cursor</h4>
<p>åœ¨<code>~/.cursor/mcp.json</code>ä¸­æ·»åŠ :</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"mcpServers"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"MiniMax"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-comment">// ...å‰é¢çš„é…ç½®</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"cloudbase"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"command"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"npx"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"args"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"@cloudbase/cloudbase-mcp@latest"</span><span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 data-id="heading-12">ç¬¬å››æ­¥:åˆ›å»º Taro é¡¹ç›®å¹¶é›†æˆ Tailwind CSS</h3>
<h4 data-id="heading-13">åˆå§‹åŒ– Taro é¡¹ç›®</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å®‰è£…Taro CLI</span>
npm install -g @tarojs/cli

<span class="hljs-comment"># åˆ›å»ºé¡¹ç›®</span>
taro init myapp

<span class="hljs-comment"># é€‰æ‹©æ¨¡æ¿æ—¶æ¨è:</span>
<span class="hljs-comment"># - React (æ›´æˆç†Ÿçš„ç”Ÿæ€)</span>
<span class="hljs-comment"># - TypeScript (ç±»å‹å®‰å…¨)</span>
<span class="hljs-comment"># - å¾®ä¿¡å°ç¨‹åº</span>
</code></pre>
<h4 data-id="heading-14">é›†æˆ Tailwind CSS</h4>
<p>Tailwind CSS æ˜¯ç›®å‰æœ€å—æ¬¢è¿çš„åŸå­åŒ– CSS æ¡†æ¶,è€Œä¸”ç‰¹åˆ«é€‚åˆ AI ç¼–ç¨‹â€”â€”AI èƒ½ç›´æ¥"è¯´äººè¯"ç”Ÿæˆæ ·å¼ã€‚</p>
<p><strong>å®‰è£…ä¾èµ–:</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">cd</span> myapp
npm install -D tailwindcss postcss autoprefixer
npm install -D weapp-tailwindcss
</code></pre>
<p><strong>åˆå§‹åŒ–é…ç½®:</strong></p>
<pre><code class="hljs language-bash" lang="bash">npx tailwindcss init
</code></pre>
<p><strong>é…ç½®<code>tailwind.config.js</code>:</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">content</span>: [
    <span class="hljs-string">"./src/**/*.{js,jsx,ts,tsx}"</span>,
  ],
  <span class="hljs-comment">// å°ç¨‹åºä¸æ”¯æŒæŸäº›ç‰¹æ®Šå­—ç¬¦,éœ€è¦è‡ªå®šä¹‰åˆ†éš”ç¬¦</span>
  <span class="hljs-attr">separator</span>: <span class="hljs-string">'_'</span>,
  <span class="hljs-attr">corePlugins</span>: {
    <span class="hljs-comment">// å…³é—­preflight,é¿å…æ ·å¼å†²çª</span>
    <span class="hljs-attr">preflight</span>: <span class="hljs-literal">false</span>
  }
}
</code></pre>
<p><strong>é…ç½® Taro:</strong></p>
<p>åœ¨<code>config/index.js</code>ä¸­æ·»åŠ :</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> config = {
  <span class="hljs-comment">// ...å…¶ä»–é…ç½®</span>
  <span class="hljs-attr">plugins</span>: [
    [<span class="hljs-string">'@tarojs/plugin-html'</span>],
    [<span class="hljs-string">'weapp-tailwindcss/webpack'</span>, {
      <span class="hljs-comment">// é…ç½®é€‰é¡¹</span>
    }]
  ],
  <span class="hljs-attr">mini</span>: {
    <span class="hljs-attr">postcss</span>: {
      <span class="hljs-attr">pxtransform</span>: {
        <span class="hljs-attr">enable</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">config</span>: {}
      }
    }
  }
}
</code></pre>
<p><strong>åœ¨<code>app.css</code>ä¸­å¼•å…¥ Tailwind:</strong></p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-keyword">@tailwind</span> base;
<span class="hljs-keyword">@tailwind</span> components;
<span class="hljs-keyword">@tailwind</span> utilities;
</code></pre>
<p><strong>éªŒè¯å®‰è£…:</strong></p>
<p>åœ¨ä»»æ„é¡µé¢ç»„ä»¶ä¸­æµ‹è¯•:</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">View</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@tarojs/components'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Index</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">View</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"flex items-center justify-center h-screen bg-blue-500"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">View</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"text-white text-2xl"</span>&gt;</span>Hello Tailwind!<span class="hljs-tag">&lt;/<span class="hljs-name">View</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">View</span>&gt;</span></span>
  )
}
</code></pre>
<p>è¿è¡Œ<code>npm run dev:weapp</code>,å¦‚æœçœ‹åˆ°è“è‰²èƒŒæ™¯å’Œç™½è‰²æ–‡å­—,è¯´æ˜é…ç½®æˆåŠŸ!</p>
<h2 data-id="heading-15">ğŸ’¡ å®æˆ˜æŠ€å·§ï¼šè®© AI æˆä¸ºä½ çš„è¶…çº§åŠ©æ‰‹</h2>
<h3 data-id="heading-16">æŠ€å·§ 1ï¼šç”¨ web_search è§£å†³ç–‘éš¾æ‚ç—‡</h3>
<p><strong>åœºæ™¯:</strong> Taro é¡¹ç›®ä¸­é‡åˆ°ä¸€ä¸ªå¥‡æ€ªçš„ API æŠ¥é”™ã€‚</p>
<p><strong>ä¼ ç»Ÿåšæ³•:</strong></p>
<ol>
<li>å¤åˆ¶é”™è¯¯ä¿¡æ¯</li>
<li>æ‰“å¼€æµè§ˆå™¨æœç´¢</li>
<li>ç¿»é˜… 5-10 ä¸ªé¡µé¢</li>
<li>å°è¯•æ¯ä¸ªè§£å†³æ–¹æ¡ˆ</li>
<li>ç¥ˆç¥·æœ‰ä¸€ä¸ªèƒ½ work</li>
</ol>
<p><strong>ä½¿ç”¨ MiniMax MCP:</strong></p>
<p>ç›´æ¥åœ¨ Cursor çš„ Composer ä¸­å‘Šè¯‰ AI:</p>
<pre><code class="hljs language-vbnet" lang="vbnet">è¿™ä¸ªé”™è¯¯ä¿¡æ¯æ˜¯ä»€ä¹ˆæ„æ€?å¸®æˆ‘ç”¨web_searchæœç´¢ä¸€ä¸‹Taroç¤¾åŒºæœ‰æ²¡æœ‰ç±»ä¼¼é—®é¢˜çš„è§£å†³æ–¹æ¡ˆ:

[<span class="hljs-keyword">ERROR</span>] <span class="hljs-keyword">Error</span>: miniprogram-api-typings: <span class="hljs-keyword">Module</span> <span class="hljs-built_in">not</span> found
</code></pre>
<p>AI ä¼šè‡ªåŠ¨è°ƒç”¨<code>web_search</code>å·¥å…·,æœç´¢æœ€æ–°çš„è§£å†³æ–¹æ¡ˆ,å¹¶ç»™ä½ æ€»ç»“:</p>
<pre><code class="hljs language-markdown" lang="markdown">æ ¹æ®æœç´¢ç»“æœ,è¿™ä¸ªé—®é¢˜æ˜¯å› ä¸º...

è§£å†³æ–¹æ¡ˆ:

<span class="hljs-bullet">1.</span> å‡çº§ Taro ç‰ˆæœ¬åˆ° 3.6+
<span class="hljs-bullet">2.</span> æˆ–è€…å®‰è£…ç¼ºå¤±çš„ç±»å‹å®šä¹‰: npm install -D miniprogram-api-typings

ç›¸å…³è®¨è®º:

<span class="hljs-bullet">-</span> https://github.com/NervJS/taro/issues/...
<span class="hljs-bullet">-</span> https://taro-docs.jd.com/...
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆè¿™ä¹ˆå‰å®³?</strong></p>
<ul>
<li>æœç´¢çš„æ˜¯<strong>å®æ—¶ä¿¡æ¯</strong>,ä¸æ˜¯è®­ç»ƒæ•°æ®</li>
<li>AI ä¼šå¸®ä½ <strong>ç­›é€‰å’Œæ€»ç»“</strong>,ä¸æ˜¯ç›´æ¥æ‰”ä¸€å †é“¾æ¥</li>
<li>è¿˜ä¼šç»™å‡º<strong>ç›¸å…³æœç´¢å»ºè®®</strong></li>
</ul>
<h3 data-id="heading-17">æŠ€å·§ 2ï¼šç”¨ understand_image å¿«é€Ÿè¿˜åŸè®¾è®¡ç¨¿</h3>
<p><strong>åœºæ™¯:</strong> UI ç»™äº†ä¸€å¼ è®¾è®¡ç¨¿,è¦æ±‚ 100%è¿˜åŸã€‚</p>
<p><strong>ä¼ ç»Ÿåšæ³•:</strong></p>
<ol>
<li>åˆ‡æ¢åˆ°è®¾è®¡å·¥å…·</li>
<li>æµ‹é‡æ¯ä¸ªå…ƒç´ çš„ä½ç½®ã€å¤§å°</li>
<li>è®°å½•é¢œè‰²å€¼</li>
<li>å›åˆ°ä»£ç ä¸€ç‚¹ç‚¹å†™</li>
<li>æ¥å›å¯¹æ¯”è°ƒæ•´</li>
</ol>
<p><strong>ä½¿ç”¨ MiniMax MCP:</strong></p>
<ol>
<li>æŠŠè®¾è®¡ç¨¿æˆªå›¾ä¿å­˜</li>
<li>åœ¨ Cursor ä¸­ç²˜è´´å›¾ç‰‡</li>
<li>å‘Šè¯‰ AI:</li>
</ol>
<pre><code class="hljs language-diff" lang="diff">å¸®æˆ‘åˆ†æè¿™å¼ è®¾è®¡ç¨¿,ç”¨Taro + Tailwind CSSå®ç°ã€‚
é‡ç‚¹å…³æ³¨:
<span class="hljs-deletion">- å¸ƒå±€ç»“æ„</span>
<span class="hljs-deletion">- é—´è·å’Œå¯¹é½</span>
<span class="hljs-deletion">- é¢œè‰²å’Œå­—å·</span>
<span class="hljs-deletion">- ç»„ä»¶å±‚æ¬¡</span>
</code></pre>
<p>AI ä¼šåˆ†æå›¾ç‰‡,ç„¶åç”Ÿæˆ:</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">View</span>, <span class="hljs-title class_">Text</span>, <span class="hljs-title class_">Image</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@tarojs/components'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">ProductCard</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">View</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"bg-white rounded-2xl p-4 shadow-lg"</span>&gt;</span>
      {/* å•†å“å›¾ç‰‡ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">View</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"relative mb-4"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Image</span>
          <span class="hljs-attr">src</span>=<span class="hljs-string">"xxx"</span>
          <span class="hljs-attr">className</span>=<span class="hljs-string">"w-full h-48 rounded-xl object-cover"</span>
        /&gt;</span>
        {/* å³ä¸Šè§’æ ‡ç­¾ */}
        <span class="hljs-tag">&lt;<span class="hljs-name">View</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"absolute top-2 right-2 bg-red-500 text-white px-3 py-1 rounded-full text-xs"</span>&gt;</span>
          çƒ­å–
        <span class="hljs-tag">&lt;/<span class="hljs-name">View</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">View</span>&gt;</span>

      {/* å•†å“ä¿¡æ¯ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">View</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"space-y-2"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Text</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"text-lg font-bold text-gray-800"</span>&gt;</span>
          å•†å“åç§°
        <span class="hljs-tag">&lt;/<span class="hljs-name">Text</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">View</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"flex items-center justify-between"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">Text</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"text-2xl font-bold text-red-500"</span>&gt;</span>
            Â¥199
          <span class="hljs-tag">&lt;/<span class="hljs-name">Text</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">Text</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"text-sm text-gray-400 line-through"</span>&gt;</span>
            Â¥299
          <span class="hljs-tag">&lt;/<span class="hljs-name">Text</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">View</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">View</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">View</span>&gt;</span></span>
  )
}
</code></pre>
<p><strong>Pro Tips:</strong></p>
<ul>
<li>å¯ä»¥åŒæ—¶ä¸Šä¼ å¤šå¼ å›¾ç‰‡å¯¹æ¯”åˆ†æ</li>
<li>è®© AI è§£é‡Šä¸ºä»€ä¹ˆä½¿ç”¨æŸä¸ª Tailwind ç±»</li>
<li>è¦æ±‚ AI ç”Ÿæˆä¸åŒå±å¹•å°ºå¯¸çš„å“åº”å¼ç‰ˆæœ¬</li>
</ul>
<h3 data-id="heading-18">æŠ€å·§ 3ï¼šç”¨ CloudBase MCP è°ƒè¯•äº‘å‡½æ•°</h3>
<p><strong>åœºæ™¯:</strong> äº‘å‡½æ•°è¿”å›äº†é”™è¯¯,éœ€è¦æŸ¥çœ‹æ—¥å¿—æ’æŸ¥é—®é¢˜ã€‚</p>
<p><strong>ä¼ ç»Ÿåšæ³•:</strong></p>
<ol>
<li>æ‰“å¼€è…¾è®¯äº‘æ§åˆ¶å°</li>
<li>æ‰¾åˆ°äº‘å¼€å‘ç¯å¢ƒ</li>
<li>è¿›å…¥äº‘å‡½æ•°ç®¡ç†</li>
<li>æ‰¾åˆ°å¯¹åº”å‡½æ•°</li>
<li>æŸ¥çœ‹æ—¥å¿—</li>
<li>åˆ†æé—®é¢˜</li>
<li>ä¿®æ”¹ä»£ç </li>
<li>é‡æ–°éƒ¨ç½²</li>
<li>å†æ¬¡æµ‹è¯•</li>
</ol>
<p><strong>ä½¿ç”¨ CloudBase MCP:</strong></p>
<p>ç›´æ¥åœ¨ Cursor ä¸­å‘Šè¯‰ AI:</p>
<pre><code class="hljs">æˆ‘çš„getUserInfoäº‘å‡½æ•°è¿”å›500é”™è¯¯,å¸®æˆ‘æŸ¥çœ‹æœ€è¿‘çš„æ—¥å¿—,æ‰¾å‡ºé—®é¢˜åŸå› å¹¶ä¿®å¤
</code></pre>
<p>AI ä¼š:</p>
<ol>
<li>è‡ªåŠ¨è°ƒç”¨ CloudBase MCP æŸ¥è¯¢æ—¥å¿—</li>
<li>åˆ†æé”™è¯¯å †æ ˆ</li>
<li>å®šä½é—®é¢˜ä»£ç </li>
<li>ç»™å‡ºä¿®å¤æ–¹æ¡ˆ</li>
<li>ç”šè‡³ç›´æ¥å¸®ä½ ä¿®æ”¹ä»£ç </li>
</ol>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// AIå‘ç°çš„é—®é¢˜:</span>
<span class="hljs-comment">// åŸä»£ç :</span>
<span class="hljs-keyword">const</span> user = <span class="hljs-keyword">await</span> db.<span class="hljs-title function_">collection</span>(<span class="hljs-string">'users'</span>).<span class="hljs-title function_">doc</span>(userId).<span class="hljs-title function_">get</span>()
<span class="hljs-keyword">return</span> user.<span class="hljs-property">data</span>.<span class="hljs-property">name</span> <span class="hljs-comment">// âŒ å½“ç”¨æˆ·ä¸å­˜åœ¨æ—¶,dataæ˜¯undefined</span>

<span class="hljs-comment">// AIçš„ä¿®å¤:</span>
<span class="hljs-keyword">const</span> user = <span class="hljs-keyword">await</span> db.<span class="hljs-title function_">collection</span>(<span class="hljs-string">'users'</span>).<span class="hljs-title function_">doc</span>(userId).<span class="hljs-title function_">get</span>()
<span class="hljs-keyword">if</span> (!user.<span class="hljs-property">data</span>) {
  <span class="hljs-keyword">return</span> { <span class="hljs-attr">error</span>: <span class="hljs-string">'ç”¨æˆ·ä¸å­˜åœ¨'</span> }
}
<span class="hljs-keyword">return</span> user.<span class="hljs-property">data</span>.<span class="hljs-property">name</span> <span class="hljs-comment">// âœ… å¢åŠ äº†é”™è¯¯å¤„ç†</span>
</code></pre>
<p><strong>CloudBase MCP çš„å…¶ä»–ç¥å™¨åŠŸèƒ½:</strong></p>
<ul>
<li>æŸ¥è¯¢æ•°æ®åº“è®°å½•</li>
<li>éƒ¨ç½²æ–°çš„äº‘å‡½æ•°</li>
<li>ç®¡ç†é™æ€ç½‘ç«™æ‰˜ç®¡</li>
<li>é…ç½®å®‰å…¨è§„åˆ™</li>
</ul>
<h3 data-id="heading-19">æŠ€å·§ 4ï¼šåœ¨.cursorrules ä¸­å®šä¹‰é¡¹ç›®è§„èŒƒ</h3>
<p><strong>ä¸ºä»€ä¹ˆéœ€è¦.cursorrules?</strong></p>
<p>æƒ³è±¡ä¸€ä¸‹,ä½ æœ‰ä¸€ä¸ª 10 äººçš„å¼€å‘å›¢é˜Ÿ,æ¯ä¸ªäººçš„ä»£ç é£æ ¼éƒ½ä¸ä¸€æ ·:</p>
<ul>
<li>å¼ ä¸‰å–œæ¬¢ç”¨ class ç»„ä»¶</li>
<li>æå››å…¨ç”¨ function ç»„ä»¶</li>
<li>ç‹äº”æ ·å¼å†™åœ¨ CSS æ–‡ä»¶é‡Œ</li>
<li>èµµå…­å…¨éƒ¨ inline style</li>
</ul>
<p>é¡¹ç›®ä»£ç çœ‹èµ·æ¥åƒ"åƒåœ¾åœº"ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆ:</strong></p>
<p>åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º<code>.cursorrules</code>æˆ–<code>.cursorrules.md</code>æ–‡ä»¶:</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># Taro å°ç¨‹åºå¼€å‘è§„èŒƒ</span>

<span class="hljs-section">## æŠ€æœ¯æ ˆ</span>

<span class="hljs-bullet">-</span> Taro 3.x
<span class="hljs-bullet">-</span> React 18+ (function ç»„ä»¶ + Hooks)
<span class="hljs-bullet">-</span> TypeScript
<span class="hljs-bullet">-</span> Tailwind CSS

<span class="hljs-section">## ä»£ç é£æ ¼</span>

<span class="hljs-section">### ç»„ä»¶è§„èŒƒ</span>

<span class="hljs-bullet">-</span> æ‰€æœ‰ç»„ä»¶å¿…é¡»ä½¿ç”¨ Function Component
<span class="hljs-bullet">-</span> å¿…é¡»ä½¿ç”¨ TypeScript,å®šä¹‰å®Œæ•´çš„ Props ç±»å‹
<span class="hljs-bullet">-</span> ç»„ä»¶æ–‡ä»¶åä½¿ç”¨ PascalCase: <span class="hljs-code">`UserProfile.tsx`</span>

<span class="hljs-section">### æ ·å¼è§„èŒƒ</span>

<span class="hljs-bullet">-</span> ä¼˜å…ˆä½¿ç”¨ Tailwind CSS utility ç±»
<span class="hljs-bullet">-</span> ç¦æ­¢ä½¿ç”¨ inline style
<span class="hljs-bullet">-</span> è‡ªå®šä¹‰æ ·å¼ä½¿ç”¨ CSS Modules
<span class="hljs-bullet">-</span> å“åº”å¼è®¾è®¡ä½¿ç”¨ Tailwind çš„æ–­ç‚¹ç³»ç»Ÿ

ç¤ºä¾‹:

<span class="hljs-code">```jsx
import { View, Text } from '@tarojs/components'
import { FC } from 'react'

interface UserCardProps {
  name: string
  avatar: string
}

const UserCard: FC&lt;UserCardProps&gt; = ({ name, avatar }) =&gt; {
  return (
    &lt;View className="flex items-center p-4 bg-white rounded-lg shadow"&gt;
      &lt;Image src={avatar} className="w-12 h-12 rounded-full" /&gt;
      &lt;Text className="ml-3 text-base font-medium"&gt;{name}&lt;/Text&gt;
    &lt;/View&gt;
  )
}

export default UserCard
```</span>
</code></pre>
<h3 data-id="heading-20">äº‘å‡½æ•°è§„èŒƒ</h3>
<ul>
<li>ç»Ÿä¸€ä½¿ç”¨ async/await</li>
<li>å¿…é¡»æœ‰å®Œæ•´çš„é”™è¯¯å¤„ç†</li>
<li>è¿”å›å€¼æ ¼å¼ç»Ÿä¸€: <code>{ code, message, data }</code></li>
</ul>
<p>ç¤ºä¾‹:</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-built_in">exports</span>.<span class="hljs-property">main</span> = <span class="hljs-keyword">async</span> (event) =&gt; {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> { userId } = event

    <span class="hljs-keyword">if</span> (!userId) {
      <span class="hljs-keyword">return</span> { <span class="hljs-attr">code</span>: <span class="hljs-number">400</span>, <span class="hljs-attr">message</span>: <span class="hljs-string">'ç¼ºå°‘userIdå‚æ•°'</span> }
    }

    <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> db.<span class="hljs-title function_">collection</span>(<span class="hljs-string">'users'</span>)
      .<span class="hljs-title function_">doc</span>(userId)
      .<span class="hljs-title function_">get</span>()

    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">code</span>: <span class="hljs-number">0</span>,
      <span class="hljs-attr">message</span>: <span class="hljs-string">'success'</span>,
      <span class="hljs-attr">data</span>: result.<span class="hljs-property">data</span>
    }
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'getUserInfo error:'</span>, error)
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">code</span>: <span class="hljs-number">500</span>,
      <span class="hljs-attr">message</span>: <span class="hljs-string">'æœåŠ¡å™¨é”™è¯¯'</span>,
      <span class="hljs-attr">error</span>: error.<span class="hljs-property">message</span>
    }
  }
}
</code></pre>
<h2 data-id="heading-21">å¸¸è§é—®é¢˜è§£å†³æ–¹æ¡ˆ</h2>
<h3 data-id="heading-22">Taro API è°ƒç”¨é—®é¢˜</h3>
<ul>
<li>ä¼˜å…ˆæŸ¥é˜… Taro å®˜æ–¹æ–‡æ¡£: <a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.taro.zone" target="_blank" title="https://docs.taro.zone" ref="nofollow noopener noreferrer">docs.taro.zone</a></li>
<li>ä½¿ç”¨ web_search æœç´¢ GitHub Issues</li>
</ul>
<h3 data-id="heading-23">äº‘å‡½æ•°è°ƒè¯•</h3>
<ul>
<li>ä½¿ç”¨ CloudBase MCP ç›´æ¥æŸ¥çœ‹æ—¥å¿—</li>
<li>ä¸è¦åœ¨ä»£ç é‡ŒåŠ  console.log åé‡æ–°éƒ¨ç½²</li>
</ul>
<h3 data-id="heading-24">æ ·å¼é—®é¢˜</h3>
<ul>
<li>ä½¿ç”¨ understand_image åˆ†æè®¾è®¡ç¨¿</li>
<li>è®°ä½å°ç¨‹åºä¸æ”¯æŒæŸäº› CSS ç‰¹æ€§</li>
</ul>
<p><strong>é…ç½®å¥½åçš„æ•ˆæœ:</strong></p>
<p>å½“ä½ è®©AIå†™ä»£ç æ—¶,å®ƒä¼šä¸¥æ ¼éµå®ˆè¿™äº›è§„èŒƒ:</p>
<pre><code class="hljs language-text" lang="text">
ä½ : å¸®æˆ‘å†™ä¸€ä¸ªç”¨æˆ·åˆ—è¡¨é¡µé¢

AI: å¥½çš„,æˆ‘ä¼šæŒ‰ç…§é¡¹ç›®è§„èŒƒ,ä½¿ç”¨ Function Component + TypeScript + Tailwind CSS æ¥å®ç°...

[ç”Ÿæˆçš„ä»£ç è‡ªåŠ¨ç¬¦åˆè§„èŒƒ]

</code></pre>
<h3 data-id="heading-25">æŠ€å·§5ï¼šå–„ç”¨Tailwindçš„"AIå‹å¥½"ç‰¹æ€§</h3>
<p><strong>ä¸ºä»€ä¹ˆè¯´Tailwind CSSæ˜¯AIå‹å¥½çš„?</strong></p>
<p>å› ä¸ºTailwindçš„ç±»åå°±æ˜¯**"äººç±»è¯­è¨€"**:</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// ä¼ ç»ŸCSS: AIéœ€è¦ç†è§£å¤æ‚çš„æ ·å¼è§„åˆ™</span>
&lt;<span class="hljs-title class_">View</span> style={{
  <span class="hljs-attr">display</span>: <span class="hljs-string">'flex'</span>,
  <span class="hljs-attr">alignItems</span>: <span class="hljs-string">'center'</span>,
  <span class="hljs-attr">justifyContent</span>: <span class="hljs-string">'space-between'</span>,
  <span class="hljs-attr">padding</span>: <span class="hljs-string">'16px'</span>,
  <span class="hljs-attr">backgroundColor</span>: <span class="hljs-string">'#ffffff'</span>,
  <span class="hljs-attr">borderRadius</span>: <span class="hljs-string">'8px'</span>,
  <span class="hljs-attr">boxShadow</span>: <span class="hljs-string">'0 2px 8px rgba(0,0,0,0.1)'</span>
}}&gt;

<span class="hljs-comment">// Tailwind CSS: AIç›´æ¥"è¯´äººè¯"</span>
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">View</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"flex items-center justify-between p-4 bg-white rounded-lg shadow-md"</span>&gt;</span>
</span></code></pre>
<p><strong>å®æˆ˜æ¡ˆä¾‹:</strong></p>
<p>ä½ å¯ä»¥è¿™æ ·å’Œ AI äº¤æµ:</p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">ä½ : åšä¸€ä¸ªå¡ç‰‡ç»„ä»¶,è¦æœ‰åœ†è§’ã€é˜´å½±ã€å†…è¾¹è·16px,flexå¸ƒå±€,ä¸Šé¢æ˜¯å›¾ç‰‡,ä¸‹é¢æ˜¯æ–‡å­—</span>

<span class="hljs-section">AI: æ˜ç™½äº†!</span>
[ç›´æ¥ç”ŸæˆTailwindä»£ç ]
</code></pre>
<p><strong>å¸¸ç”¨çš„ Tailwind ç»„åˆ:</strong></p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// 1. æ°´å¹³å±…ä¸­çš„å®¹å™¨</span>
&lt;<span class="hljs-title class_">View</span> className=<span class="hljs-string">"flex items-center justify-center"</span>&gt;

<span class="hljs-comment">// 2. å‚ç›´å¸ƒå±€,é—´è·16px</span>
&lt;View className="flex flex-col space-y-4"&gt;

// 3. å¡ç‰‡æ ·å¼
&lt;View className="bg-white rounded-xl shadow-lg p-4"&gt;

// 4. å“åº”å¼æ–‡å­—
&lt;Text className="text-base md:text-lg lg:text-xl"&gt;

// 5. æŒ‰é’®æ ·å¼
&lt;View className="bg-blue-500 hover:bg-blue-600 text-white py-2 px-4 rounded-full"&gt;
</code></pre>
<p><strong>âš ï¸ å°ç¨‹åºç‰¹æ®Šé™åˆ¶:</strong></p>
<p>å°ç¨‹åºä¸æ”¯æŒæŸäº›ç‰¹æ®Šå­—ç¬¦ä½œä¸ºç±»å,æ‰€ä»¥:</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// âŒ é”™è¯¯å†™æ³•</span>
&lt;<span class="hljs-title class_">View</span> className=<span class="hljs-string">"w-1/2"</span>&gt;  <span class="hljs-comment">// å°ç¨‹åºä¸æ”¯æŒ /</span>
&lt;View className="hover:bg-blue"&gt;  // å°ç¨‹åºä¸æ”¯æŒ :

// âœ… æ­£ç¡®å†™æ³• (é…ç½®separator: '_')
&lt;View className="w-1_2"&gt;
&lt;View className="hover_bg-blue"&gt;
</code></pre>
<h2 data-id="heading-26">ğŸ¨ æœ€ä½³å®è·µï¼šä»å…¥é—¨åˆ°ç²¾é€š</h2>
<h3 data-id="heading-27">å®è·µ 1ï¼šæ„å»ºä¸€ä¸ªå®Œæ•´çš„åŠŸèƒ½æ¨¡å—</h3>
<p><strong>éœ€æ±‚:</strong> å¼€å‘ä¸€ä¸ª"å¾…åŠäº‹é¡¹"åŠŸèƒ½,åŒ…å«:</p>
<ul>
<li>åˆ—è¡¨å±•ç¤º</li>
<li>æ·»åŠ å¾…åŠ</li>
<li>æ ‡è®°å®Œæˆ</li>
<li>åˆ é™¤å¾…åŠ</li>
<li>äº‘ç«¯åŒæ­¥</li>
</ul>
<p><strong>å¼€å‘æµç¨‹:</strong></p>
<h4 data-id="heading-28">Step 1: éœ€æ±‚åˆ†æ(è®© AI å¸®ä½ è§„åˆ’)</h4>
<pre><code class="hljs language-diff" lang="diff">ä½ : æˆ‘è¦åšä¸€ä¸ªå¾…åŠäº‹é¡¹åŠŸèƒ½,å¸®æˆ‘è§„åˆ’ä¸€ä¸‹æŠ€æœ¯æ–¹æ¡ˆ

AI: å¥½çš„!æˆ‘å»ºè®®:

å‰ç«¯:
<span class="hljs-deletion">- é¡µé¢ç»„ä»¶: TodoList.tsx, TodoItem.tsx, AddTodo.tsx</span>
<span class="hljs-deletion">- çŠ¶æ€ç®¡ç†: ä½¿ç”¨React Hooks (useState, useEffect)</span>
<span class="hljs-deletion">- æ ·å¼: Tailwind CSS</span>

åç«¯:
<span class="hljs-deletion">- äº‘æ•°æ®åº“é›†åˆ: todos</span>
  - _id: è‡ªåŠ¨ç”Ÿæˆ
  - content: string (å¾…åŠå†…å®¹)
  - completed: boolean
  - createdAt: timestamp
<span class="hljs-deletion">- äº‘å‡½æ•°: getTodos, addTodo, updateTodo, deleteTodo</span>

éœ€è¦æˆ‘å¸®ä½ å®ç°å—?
</code></pre>
<h4 data-id="heading-29">Step 2: UI è®¾è®¡(ç”¨ understand_image)</h4>
<p>å¦‚æœä½ æœ‰è®¾è®¡ç¨¿:</p>
<pre><code class="hljs language-diff" lang="diff">ä½ : [ç²˜è´´è®¾è®¡ç¨¿æˆªå›¾] å¸®æˆ‘åˆ†æè¿™ä¸ªå¾…åŠåˆ—è¡¨çš„è®¾è®¡,ç”¨Taro + Tailwindå®ç°

AI: æˆ‘çœ‹åˆ°çš„è®¾è®¡åŒ…æ‹¬:
<span class="hljs-deletion">- é¡¶éƒ¨æœ‰ä¸€ä¸ªè¾“å…¥æ¡†å’Œæ·»åŠ æŒ‰é’®</span>
<span class="hljs-deletion">- åˆ—è¡¨é¡¹å·¦è¾¹æ˜¯åœ†å½¢checkbox</span>
<span class="hljs-deletion">- ä¸­é—´æ˜¯å¾…åŠæ–‡å­—,å®Œæˆçš„æ–‡å­—æœ‰åˆ é™¤çº¿</span>
<span class="hljs-deletion">- å³è¾¹æ˜¯åˆ é™¤æŒ‰é’®</span>
<span class="hljs-deletion">- æ•´ä½“ä½¿ç”¨å¡ç‰‡å¸ƒå±€,åœ†è§’+é˜´å½±</span>

[ç”Ÿæˆä»£ç ...]
</code></pre>
<p>å¦‚æœæ²¡æœ‰è®¾è®¡ç¨¿:</p>
<pre><code class="hljs language-diff" lang="diff">ä½ : å¸®æˆ‘è®¾è®¡ä¸€ä¸ªç°ä»£é£æ ¼çš„å¾…åŠåˆ—è¡¨UI,ä½¿ç”¨Tailwind CSS

AI: å¥½çš„,æˆ‘ä¼šé‡‡ç”¨:
<span class="hljs-deletion">- æ¸å˜èƒŒæ™¯</span>
<span class="hljs-deletion">- æ¯›ç»ç’ƒæ•ˆæœçš„å¡ç‰‡</span>
<span class="hljs-deletion">- åŠ¨ç”»è¿‡æ¸¡æ•ˆæœ</span>
<span class="hljs-deletion">- å¾®äº¤äº’åé¦ˆ</span>

[ç”Ÿæˆä»£ç ...]
</code></pre>
<h4 data-id="heading-30">Step 3: å®ç°å‰ç«¯</h4>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// components/TodoList.tsx</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">View</span>, <span class="hljs-title class_">Text</span>, <span class="hljs-title class_">Input</span>, <span class="hljs-title class_">Button</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@tarojs/components'</span>
<span class="hljs-keyword">import</span> { useState, useEffect } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Taro</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'@tarojs/taro'</span>

interface <span class="hljs-title class_">Todo</span> {
  <span class="hljs-attr">_id</span>: string
  <span class="hljs-attr">content</span>: string
  <span class="hljs-attr">completed</span>: boolean
  <span class="hljs-attr">createdAt</span>: number
}

<span class="hljs-keyword">const</span> <span class="hljs-title function_">TodoList</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> [todos, setTodos] = useState&lt;<span class="hljs-title class_">Todo</span>[]&gt;([])
  <span class="hljs-keyword">const</span> [input, setInput] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">''</span>)
  <span class="hljs-keyword">const</span> [loading, setLoading] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>)

  <span class="hljs-comment">// åŠ è½½å¾…åŠåˆ—è¡¨</span>
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">loadTodos</span>()
  }, [])

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">loadTodos</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-title function_">setLoading</span>(<span class="hljs-literal">true</span>)
    <span class="hljs-keyword">try</span> {
      <span class="hljs-comment">// è°ƒç”¨äº‘å‡½æ•°</span>
      <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Taro</span>.<span class="hljs-property">cloud</span>.<span class="hljs-title function_">callFunction</span>({
        <span class="hljs-attr">name</span>: <span class="hljs-string">'getTodos'</span>
      })
      <span class="hljs-title function_">setTodos</span>(res.<span class="hljs-property">result</span>.<span class="hljs-property">data</span>)
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-title class_">Taro</span>.<span class="hljs-title function_">showToast</span>({
        <span class="hljs-attr">title</span>: <span class="hljs-string">'åŠ è½½å¤±è´¥'</span>,
        <span class="hljs-attr">icon</span>: <span class="hljs-string">'none'</span>
      })
    } <span class="hljs-keyword">finally</span> {
      <span class="hljs-title function_">setLoading</span>(<span class="hljs-literal">false</span>)
    }
  }

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">addTodo</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-keyword">if</span> (!input.<span class="hljs-title function_">trim</span>()) <span class="hljs-keyword">return</span>

    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">await</span> <span class="hljs-title class_">Taro</span>.<span class="hljs-property">cloud</span>.<span class="hljs-title function_">callFunction</span>({
        <span class="hljs-attr">name</span>: <span class="hljs-string">'addTodo'</span>,
        <span class="hljs-attr">data</span>: { <span class="hljs-attr">content</span>: input }
      })
      <span class="hljs-title function_">setInput</span>(<span class="hljs-string">''</span>)
      <span class="hljs-title function_">loadTodos</span>()
      <span class="hljs-title class_">Taro</span>.<span class="hljs-title function_">showToast</span>({
        <span class="hljs-attr">title</span>: <span class="hljs-string">'æ·»åŠ æˆåŠŸ'</span>,
        <span class="hljs-attr">icon</span>: <span class="hljs-string">'success'</span>
      })
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-title class_">Taro</span>.<span class="hljs-title function_">showToast</span>({
        <span class="hljs-attr">title</span>: <span class="hljs-string">'æ·»åŠ å¤±è´¥'</span>,
        <span class="hljs-attr">icon</span>: <span class="hljs-string">'none'</span>
      })
    }
  }

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">toggleTodo</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">id: string, completed: boolean</span>) =&gt; {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">await</span> <span class="hljs-title class_">Taro</span>.<span class="hljs-property">cloud</span>.<span class="hljs-title function_">callFunction</span>({
        <span class="hljs-attr">name</span>: <span class="hljs-string">'updateTodo'</span>,
        <span class="hljs-attr">data</span>: { id, <span class="hljs-attr">completed</span>: !completed }
      })
      <span class="hljs-title function_">loadTodos</span>()
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-title class_">Taro</span>.<span class="hljs-title function_">showToast</span>({
        <span class="hljs-attr">title</span>: <span class="hljs-string">'æ›´æ–°å¤±è´¥'</span>,
        <span class="hljs-attr">icon</span>: <span class="hljs-string">'none'</span>
      })
    }
  }

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">deleteTodo</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">id: string</span>) =&gt; {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">await</span> <span class="hljs-title class_">Taro</span>.<span class="hljs-title function_">showModal</span>({
        <span class="hljs-attr">title</span>: <span class="hljs-string">'ç¡®è®¤åˆ é™¤'</span>,
        <span class="hljs-attr">content</span>: <span class="hljs-string">'ç¡®å®šè¦åˆ é™¤è¿™æ¡å¾…åŠå—?'</span>
      })

      <span class="hljs-keyword">await</span> <span class="hljs-title class_">Taro</span>.<span class="hljs-property">cloud</span>.<span class="hljs-title function_">callFunction</span>({
        <span class="hljs-attr">name</span>: <span class="hljs-string">'deleteTodo'</span>,
        <span class="hljs-attr">data</span>: { id }
      })
      <span class="hljs-title function_">loadTodos</span>()
      <span class="hljs-title class_">Taro</span>.<span class="hljs-title function_">showToast</span>({
        <span class="hljs-attr">title</span>: <span class="hljs-string">'åˆ é™¤æˆåŠŸ'</span>,
        <span class="hljs-attr">icon</span>: <span class="hljs-string">'success'</span>
      })
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-comment">// ç”¨æˆ·å–æ¶ˆæˆ–åˆ é™¤å¤±è´¥</span>
    }
  }

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">View</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"min-h-screen bg-gradient-to-br from-blue-50 to-purple-50 p-4"</span>&gt;</span>
      {/* æ ‡é¢˜ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">View</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"text-center mb-6"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Text</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"text-3xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent"</span>&gt;</span>
          æˆ‘çš„å¾…åŠ
        <span class="hljs-tag">&lt;/<span class="hljs-name">Text</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">View</span>&gt;</span>

      {/* æ·»åŠ å¾…åŠ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">View</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"bg-white rounded-2xl shadow-lg p-4 mb-4"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">View</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"flex items-center space-x-2"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">Input</span>
            <span class="hljs-attr">className</span>=<span class="hljs-string">"flex-1 px-4 py-2 bg-gray-100 rounded-full"</span>
            <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"æ·»åŠ æ–°å¾…åŠ..."</span>
            <span class="hljs-attr">value</span>=<span class="hljs-string">{input}</span>
            <span class="hljs-attr">onInput</span>=<span class="hljs-string">{(e)</span> =&gt;</span> setInput(e.detail.value)}
          /&gt;
          <span class="hljs-tag">&lt;<span class="hljs-name">Button</span>
            <span class="hljs-attr">className</span>=<span class="hljs-string">"bg-blue-500 text-white px-6 py-2 rounded-full"</span>
            <span class="hljs-attr">onClick</span>=<span class="hljs-string">{addTodo}</span>
          &gt;</span>
            æ·»åŠ 
          <span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">View</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">View</span>&gt;</span>

      {/* å¾…åŠåˆ—è¡¨ */}
      {loading ? (
        <span class="hljs-tag">&lt;<span class="hljs-name">View</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"text-center py-8"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">Text</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"text-gray-500"</span>&gt;</span>åŠ è½½ä¸­...<span class="hljs-tag">&lt;/<span class="hljs-name">Text</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">View</span>&gt;</span>
      ) : todos.length === 0 ? (
        <span class="hljs-tag">&lt;<span class="hljs-name">View</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"text-center py-8"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">Text</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"text-gray-500"</span>&gt;</span>æš‚æ— å¾…åŠäº‹é¡¹<span class="hljs-tag">&lt;/<span class="hljs-name">Text</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">View</span>&gt;</span>
      ) : (
        <span class="hljs-tag">&lt;<span class="hljs-name">View</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"space-y-2"</span>&gt;</span>
          {todos.map(todo =&gt; (
            <span class="hljs-tag">&lt;<span class="hljs-name">View</span>
              <span class="hljs-attr">key</span>=<span class="hljs-string">{todo._id}</span>
              <span class="hljs-attr">className</span>=<span class="hljs-string">"bg-white rounded-xl shadow p-4 flex items-center"</span>
            &gt;</span>
              {/* Checkbox */}
              <span class="hljs-tag">&lt;<span class="hljs-name">View</span>
                <span class="hljs-attr">className</span>=<span class="hljs-string">{</span>`<span class="hljs-attr">w-6</span> <span class="hljs-attr">h-6</span> <span class="hljs-attr">rounded-full</span> <span class="hljs-attr">border-2</span> <span class="hljs-attr">mr-3</span> <span class="hljs-attr">flex</span> <span class="hljs-attr">items-center</span> <span class="hljs-attr">justify-center</span> ${
                  <span class="hljs-attr">todo.completed</span>
                    ? '<span class="hljs-attr">bg-blue-500</span> <span class="hljs-attr">border-blue-500</span>'
                    <span class="hljs-attr">:</span> '<span class="hljs-attr">border-gray-300</span>'
                }`}
                <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> toggleTodo(todo._id, todo.completed)}
              &gt;
                {todo.completed &amp;&amp; (
                  <span class="hljs-tag">&lt;<span class="hljs-name">Text</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"text-white text-sm"</span>&gt;</span>âœ“<span class="hljs-tag">&lt;/<span class="hljs-name">Text</span>&gt;</span>
                )}
              <span class="hljs-tag">&lt;/<span class="hljs-name">View</span>&gt;</span>

              {/* å†…å®¹ */}
              <span class="hljs-tag">&lt;<span class="hljs-name">Text</span>
                <span class="hljs-attr">className</span>=<span class="hljs-string">{</span>`<span class="hljs-attr">flex-1</span> ${
                  <span class="hljs-attr">todo.completed</span>
                    ? '<span class="hljs-attr">line-through</span> <span class="hljs-attr">text-gray-400</span>'
                    <span class="hljs-attr">:</span> '<span class="hljs-attr">text-gray-800</span>'
                }`}
              &gt;</span>
                {todo.content}
              <span class="hljs-tag">&lt;/<span class="hljs-name">Text</span>&gt;</span>

              {/* åˆ é™¤æŒ‰é’® */}
              <span class="hljs-tag">&lt;<span class="hljs-name">View</span>
                <span class="hljs-attr">className</span>=<span class="hljs-string">"w-8 h-8 bg-red-100 rounded-full flex items-center justify-center"</span>
                <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> deleteTodo(todo._id)}
              &gt;
                <span class="hljs-tag">&lt;<span class="hljs-name">Text</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"text-red-500 text-sm"</span>&gt;</span>âœ•<span class="hljs-tag">&lt;/<span class="hljs-name">Text</span>&gt;</span>
              <span class="hljs-tag">&lt;/<span class="hljs-name">View</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">View</span>&gt;</span>
          ))}
        <span class="hljs-tag">&lt;/<span class="hljs-name">View</span>&gt;</span>
      )}
    <span class="hljs-tag">&lt;/<span class="hljs-name">View</span>&gt;</span></span>
  )
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">TodoList</span>
</code></pre>
<h4 data-id="heading-31">Step 4: å®ç°äº‘å‡½æ•°(è®© CloudBase MCP å¸®ä½ )</h4>
<pre><code class="hljs language-ini" lang="ini">ä½ : å¸®æˆ‘åˆ›å»ºäº‘å‡½æ•°getTodos,æŸ¥è¯¢todosé›†åˆçš„æ‰€æœ‰æ•°æ®,æŒ‰åˆ›å»ºæ—¶é—´å€’åºæ’åˆ—

AI: <span class="hljs-section">[è‡ªåŠ¨è°ƒç”¨CloudBase MCPåˆ›å»ºäº‘å‡½æ•°]</span>

äº‘å‡½æ•°å·²åˆ›å»º! ä»£ç å¦‚ä¸‹:

<span class="hljs-section">[äº‘å‡½æ•°ä»£ç ...]</span>

éœ€è¦æˆ‘å¸®ä½ éƒ¨ç½²å—?
</code></pre>
<h4 data-id="heading-32">Step 5: è°ƒè¯•é—®é¢˜</h4>
<p>å¦‚æœé‡åˆ°é”™è¯¯:</p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">ä½ : è°ƒç”¨addTodoäº‘å‡½æ•°æ—¶æŠ¥é”™: permission denied</span>

<span class="hljs-section">AI: è®©æˆ‘æŸ¥çœ‹ä¸€ä¸‹æ—¥å¿—... [è°ƒç”¨CloudBase MCP]</span>

<span class="hljs-section">åˆ†æç»“æœ:</span>
- é”™è¯¯åŸå› : äº‘æ•°æ®åº“å®‰å…¨è§„åˆ™é™åˆ¶äº†å†™å…¥æƒé™
- è§£å†³æ–¹æ¡ˆ: éœ€è¦åœ¨äº‘å¼€å‘æ§åˆ¶å°é…ç½®å®‰å…¨è§„åˆ™

<span class="hljs-section">æˆ‘å¯ä»¥å¸®ä½ ç”Ÿæˆå®‰å…¨è§„åˆ™é…ç½®:</span>

{
  <span class="hljs-string">"read"</span>: true,
  <span class="hljs-string">"write"</span>: <span class="hljs-string">"auth.uid != null"</span>  // ä»…ç™»å½•ç”¨æˆ·å¯å†™å…¥
}

<span class="hljs-section">æˆ–è€…å¦‚æœæ˜¯å¼€å‘æµ‹è¯•é˜¶æ®µ,å¯ä»¥ä¸´æ—¶è®¾ç½®ä¸º:</span>

{
  <span class="hljs-string">"read"</span>: true,
  <span class="hljs-string">"write"</span>: true
}
</code></pre>
<h3 data-id="heading-33">å®è·µ 2ï¼šé¿å…å¸¸è§è¯¯åŒº</h3>
<h4 data-id="heading-34">è¯¯åŒº 1ï¼šè¿‡åº¦ä¾èµ– AI,ä¸ç†è§£åŸç†</h4>
<p><strong>âŒ é”™è¯¯åšæ³•:</strong></p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">ä½ : å¸®æˆ‘å†™ä¸€ä¸ªå•†åŸå°ç¨‹åº</span>
<span class="hljs-section">AI: [ç”Ÿæˆ2000è¡Œä»£ç ]</span>
<span class="hljs-section">ä½ : [ç›´æ¥å¤åˆ¶ç²˜è´´]</span>
</code></pre>
<p><strong>âœ… æ­£ç¡®åšæ³•:</strong></p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">ä½ : æˆ‘è¦åšä¸€ä¸ªå•†åŸå°ç¨‹åº,å…ˆå¸®æˆ‘è§„åˆ’æ¶æ„</span>

<span class="hljs-section">AI: [ç»™å‡ºæŠ€æœ¯æ–¹æ¡ˆ]</span>

<span class="hljs-section">ä½ : ä¸ºä»€ä¹ˆé€‰æ‹©è¿™ä¸ªæ–¹æ¡ˆ?æœ‰ä»€ä¹ˆä¼˜ç¼ºç‚¹?</span>

<span class="hljs-section">AI: [è¯¦ç»†è§£é‡Š]</span>

<span class="hljs-section">ä½ : å¥½çš„,é‚£æˆ‘ä»¬å…ˆä»é¦–é¡µå¼€å§‹,ä½ èƒ½ç»™æˆ‘è®²è§£ä¸€ä¸‹é¦–é¡µçš„å®ç°æ€è·¯å—?</span>

<span class="hljs-section">AI: [è®²è§£æ€è·¯]</span>

<span class="hljs-section">ä½ : æ˜ç™½äº†,é‚£ç°åœ¨å¸®æˆ‘å®ç°é¦–é¡µ</span>
</code></pre>
<p><strong>å…³é”®ç‚¹:</strong></p>
<ul>
<li>å…ˆç†è§£,åå®ç°</li>
<li>åˆ†æ¨¡å—å¼€å‘,ä¸è¦ä¸€æ¬¡ç”Ÿæˆæ‰€æœ‰ä»£ç </li>
<li>è®© AI è§£é‡Šä¸ºä»€ä¹ˆè¿™æ ·å†™</li>
</ul>
<h4 data-id="heading-35">è¯¯åŒº 2ï¼šå¿½ç•¥é¡¹ç›®è§„èŒƒ</h4>
<p><strong>âŒ é”™è¯¯åšæ³•:</strong></p>
<p>æ¯ä¸ªåŠŸèƒ½éƒ½æ˜¯ç‹¬ç«‹å¼€å‘,æ²¡æœ‰ç»Ÿä¸€è§„èŒƒ:</p>
<ul>
<li>A åŠŸèƒ½ç”¨ class ç»„ä»¶</li>
<li>B åŠŸèƒ½ç”¨ function ç»„ä»¶</li>
<li>C åŠŸèƒ½æ ·å¼å†™åœ¨ style é‡Œ</li>
<li>D åŠŸèƒ½ä½¿ç”¨ Tailwind</li>
</ul>
<p><strong>âœ… æ­£ç¡®åšæ³•:</strong></p>
<p>å»ºç«‹<code>.cursorrules</code>è§„èŒƒ,æ‰€æœ‰ä»£ç é£æ ¼ç»Ÿä¸€:</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># å¿…é¡»ä½¿ç”¨ Function Component + Hooks</span>

<span class="hljs-section"># å¿…é¡»ä½¿ç”¨ TypeScript</span>

<span class="hljs-section"># æ ·å¼ä¼˜å…ˆä½¿ç”¨ Tailwind CSS</span>

<span class="hljs-section"># ç»„ä»¶å‘½åä½¿ç”¨ PascalCase</span>

<span class="hljs-section"># æ–‡ä»¶å‘½åä½¿ç”¨ camelCase</span>
</code></pre>
<h4 data-id="heading-36">è¯¯åŒº 3ï¼šä¸åšä»£ç å®¡æŸ¥</h4>
<p><strong>âŒ é”™è¯¯åšæ³•:</strong></p>
<p>AI ç”Ÿæˆä»£ç åç›´æ¥ä½¿ç”¨,ä¸æ£€æŸ¥:</p>
<ul>
<li>å¯èƒ½æœ‰æ€§èƒ½é—®é¢˜</li>
<li>å¯èƒ½æœ‰å®‰å…¨éšæ‚£</li>
<li>å¯èƒ½ä¸ç¬¦åˆæœ€ä½³å®è·µ</li>
</ul>
<p><strong>âœ… æ­£ç¡®åšæ³•:</strong></p>
<p>è®© AI åšä»£ç å®¡æŸ¥:</p>
<pre><code class="hljs language-markdown" lang="markdown">ä½ : å¸®æˆ‘å®¡æŸ¥è¿™æ®µä»£ç ,é‡ç‚¹å…³æ³¨:
<span class="hljs-bullet">1.</span> æ€§èƒ½é—®é¢˜
<span class="hljs-bullet">2.</span> å®‰å…¨éšæ‚£
<span class="hljs-bullet">3.</span> æœ€ä½³å®è·µ
<span class="hljs-bullet">4.</span> å¯ç»´æŠ¤æ€§

[ç²˜è´´ä»£ç ]

AI: å‘ç°ä»¥ä¸‹é—®é¢˜:

<span class="hljs-bullet">1.</span> æ€§èƒ½é—®é¢˜:
<span class="hljs-bullet">   -</span> useEffectæ²¡æœ‰ä¾èµ–é¡¹,ä¼šå¯¼è‡´æ— é™å¾ªç¯
<span class="hljs-bullet">   -</span> å»ºè®®æ·»åŠ ä¾èµ–æ•°ç»„

<span class="hljs-bullet">2.</span> å®‰å…¨é—®é¢˜:
<span class="hljs-bullet">   -</span> ç”¨æˆ·è¾“å…¥æ²¡æœ‰åšXSSé˜²æŠ¤
<span class="hljs-bullet">   -</span> å»ºè®®ä½¿ç”¨DOMPurifyåº“

<span class="hljs-bullet">3.</span> æœ€ä½³å®è·µ:
<span class="hljs-bullet">   -</span> å»ºè®®ä½¿ç”¨useCallbackä¼˜åŒ–å‡½æ•°
<span class="hljs-bullet">   -</span> å»ºè®®ä½¿ç”¨useMemoä¼˜åŒ–è®¡ç®—

æ”¹è¿›åçš„ä»£ç :
[ç»™å‡ºæ”¹è¿›æ–¹æ¡ˆ]
</code></pre>
<h4 data-id="heading-37">è¯¯åŒº 4ï¼šæ»¥ç”¨ MCP å·¥å…·</h4>
<p><strong>âŒ é”™è¯¯åšæ³•:</strong></p>
<p>æ¯æ¬¡éƒ½è®© AI æœç´¢,å³ä½¿æ˜¯å·²çŸ¥é—®é¢˜:</p>
<pre><code class="hljs language-ini" lang="ini">ä½ : Taroæ€ä¹ˆè°ƒç”¨å¾®ä¿¡API?
<span class="hljs-section">[è§¦å‘web_search]</span>

ä½ : Taroæ€ä¹ˆé…ç½®è·¯ç”±?
<span class="hljs-section">[åˆè§¦å‘web_search]</span>

ä½ : Taroæ€ä¹ˆä½¿ç”¨ç”Ÿå‘½å‘¨æœŸ?
<span class="hljs-section">[å†æ¬¡web_search]</span>
</code></pre>
<p>è¿™æ ·åšçš„é—®é¢˜:</p>
<ul>
<li>æµªè´¹æœç´¢æ¬¡æ•°(å¯èƒ½æœ‰é…é¢é™åˆ¶)</li>
<li>å¢åŠ å“åº”æ—¶é—´</li>
<li>é™ä½å¼€å‘æ•ˆç‡</li>
</ul>
<p><strong>âœ… æ­£ç¡®åšæ³•:</strong></p>
<p>å»ºç«‹çŸ¥è¯†åº“,æŠŠå¸¸ç”¨ä¿¡æ¯æ•´ç†åˆ°<code>.cursorrules</code>:</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># Taro å¸¸ç”¨ API é€ŸæŸ¥</span>

<span class="hljs-section">## é¡µé¢å¯¼èˆª</span>

Taro.navigateTo({ url: '/pages/index/index' })

<span class="hljs-section">## å¾®ä¿¡ API è°ƒç”¨</span>

Taro.getUserInfo()
Taro.chooseImage()
Taro.uploadFile()

<span class="hljs-section">## ç”Ÿå‘½å‘¨æœŸ</span>

useEffect(() =&gt; {}, []) // componentDidMount
useEffect(() =&gt; () =&gt; {}, []) // componentWillUnmount
</code></pre>
<p><strong>ä»€ä¹ˆæ—¶å€™ä½¿ç”¨ web_search:</strong></p>
<ul>
<li>é‡åˆ°æ–°çš„ bug æˆ–é”™è¯¯</li>
<li>æŸ¥è¯¢æœ€æ–°çš„ API å˜åŒ–</li>
<li>å¯»æ‰¾ç‰¹å®šé—®é¢˜çš„ç¤¾åŒºè§£å†³æ–¹æ¡ˆ</li>
</ul>
<p><strong>ä»€ä¹ˆæ—¶å€™ä¸éœ€è¦:</strong></p>
<ul>
<li>åŸºç¡€æ¦‚å¿µå’Œè¯­æ³•</li>
<li>é¡¹ç›®å·²æœ‰çš„ä»£ç æ¨¡å¼</li>
<li>æ–‡æ¡£ä¸­æ˜ç¡®è¯´æ˜çš„å†…å®¹</li>
</ul>
<h3 data-id="heading-38">å®è·µ 3ï¼šå»ºç«‹é«˜æ•ˆçš„å¼€å‘æµç¨‹</h3>
<p><strong>æ ‡å‡†å¼€å‘æµç¨‹:</strong></p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-bullet">1.</span> éœ€æ±‚åˆ†æ (5åˆ†é’Ÿ)
   â””â”€ è®©AIå¸®ä½ åˆ†æéœ€æ±‚,æ‹†åˆ†ä»»åŠ¡

<span class="hljs-bullet">2.</span> æŠ€æœ¯è®¾è®¡ (10åˆ†é’Ÿ)
   â””â”€ ç¡®å®šæŠ€æœ¯æ–¹æ¡ˆ,æ•°æ®ç»“æ„,æ¥å£å®šä¹‰

<span class="hljs-bullet">3.</span> UIè®¾è®¡/è¿˜åŸ (15åˆ†é’Ÿ)
   â”œâ”€ æœ‰è®¾è®¡ç¨¿: ç”¨understand<span class="hljs-emphasis">_imageåˆ†æ
   â””â”€ æ— è®¾è®¡ç¨¿: è®©AIç”Ÿæˆç°ä»£åŒ–UI

4. å‰ç«¯å¼€å‘ (30åˆ†é’Ÿ)
   â”œâ”€ è®©AIç”Ÿæˆç»„ä»¶éª¨æ¶
   â”œâ”€ è¡¥å……ä¸šåŠ¡é€»è¾‘
   â””â”€ æ·»åŠ äº¤äº’æ•ˆæœ

5. åç«¯å¼€å‘ (20åˆ†é’Ÿ)
   â”œâ”€ ç”¨CloudBase MCPåˆ›å»ºäº‘å‡½æ•°
   â”œâ”€ é…ç½®æ•°æ®åº“è§„åˆ™
   â””â”€ éƒ¨ç½²å¹¶æµ‹è¯•

6. è”è°ƒæµ‹è¯• (15åˆ†é’Ÿ)
   â”œâ”€ å‘ç°é—®é¢˜ç”¨web_</span>searchæœç´¢
   â”œâ”€ ç”¨CloudBase MCPæŸ¥çœ‹æ—¥å¿—
   â””â”€ å¿«é€Ÿå®šä½å’Œä¿®å¤

<span class="hljs-bullet">7.</span> ä»£ç å®¡æŸ¥ (10åˆ†é’Ÿ)
   â”œâ”€ è®©AIå®¡æŸ¥ä»£ç è´¨é‡
   â”œâ”€ ä¼˜åŒ–æ€§èƒ½å’Œå®‰å…¨
   â””â”€ ç»Ÿä¸€ä»£ç é£æ ¼

æ€»è®¡: çº¦1-2å°æ—¶å®Œæˆä¸€ä¸ªå®Œæ•´åŠŸèƒ½
</code></pre>
<p><strong>å¯¹æ¯”ä¼ ç»Ÿå¼€å‘:</strong></p>
<pre><code class="hljs language-markdown" lang="markdown">ä¼ ç»Ÿå¼€å‘æµç¨‹:

<span class="hljs-bullet">1.</span> éœ€æ±‚åˆ†æ (30åˆ†é’Ÿ)
<span class="hljs-bullet">2.</span> æŸ¥é˜…æ–‡æ¡£ (1å°æ—¶)
<span class="hljs-bullet">3.</span> UIè®¾è®¡/è¿˜åŸ (2å°æ—¶)
<span class="hljs-bullet">4.</span> å‰ç«¯å¼€å‘ (3å°æ—¶)
<span class="hljs-bullet">5.</span> åç«¯å¼€å‘ (2å°æ—¶)
<span class="hljs-bullet">6.</span> è”è°ƒæµ‹è¯• (2å°æ—¶)
   â””â”€ é‡åˆ°é—®é¢˜åå¤æœç´¢,è¯•é”™
<span class="hljs-bullet">7.</span> ä»£ç å®¡æŸ¥ (1å°æ—¶)

æ€»è®¡: 1-2å¤©
</code></pre>
<p><strong>æ•ˆç‡æå‡:</strong> 10-15 å€ ğŸš€</p>
<h2 data-id="heading-39">ğŸ”¥ è¿›é˜¶æŠ€å·§ï¼šæˆä¸ºé«˜æ‰‹çš„ç§˜è¯€</h2>
<h3 data-id="heading-40">é«˜æ‰‹æŠ€å·§ 1ï¼šè‡ªå®šä¹‰ MCP å·¥å…·</h3>
<p>å¦‚æœä½ çš„é¡¹ç›®æœ‰ç‰¹æ®Šéœ€æ±‚,å¯ä»¥å¼€å‘è‡ªå·±çš„ MCP æœåŠ¡å™¨ã€‚</p>
<p><strong>ç¤ºä¾‹åœºæ™¯:</strong> ä½ æœ‰ä¸€ä¸ªå†…éƒ¨ API æ–‡æ¡£ç³»ç»Ÿ,å¸Œæœ› AI èƒ½ç›´æ¥æŸ¥è¯¢ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆ:</strong> åˆ›å»ºä¸€ä¸ª MCP æœåŠ¡å™¨,æš´éœ²<code>query_docs</code>å·¥å…·:</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// docs-mcp-server.js</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Server</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@modelcontextprotocol/sdk/server/index.js'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">StdioServerTransport</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@modelcontextprotocol/sdk/server/stdio.js'</span>;

<span class="hljs-keyword">const</span> server = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Server</span>({
  <span class="hljs-attr">name</span>: <span class="hljs-string">'docs-server'</span>,
  <span class="hljs-attr">version</span>: <span class="hljs-string">'1.0.0'</span>
}, {
  <span class="hljs-attr">capabilities</span>: {
    <span class="hljs-attr">tools</span>: {}
  }
});

<span class="hljs-comment">// æ³¨å†Œå·¥å…·</span>
server.<span class="hljs-title function_">setRequestHandler</span>(<span class="hljs-string">'tools/list'</span>, <span class="hljs-keyword">async</span> () =&gt; {
  <span class="hljs-keyword">return</span> {
    <span class="hljs-attr">tools</span>: [{
      <span class="hljs-attr">name</span>: <span class="hljs-string">'query_docs'</span>,
      <span class="hljs-attr">description</span>: <span class="hljs-string">'æŸ¥è¯¢å†…éƒ¨APIæ–‡æ¡£'</span>,
      <span class="hljs-attr">inputSchema</span>: {
        <span class="hljs-attr">type</span>: <span class="hljs-string">'object'</span>,
        <span class="hljs-attr">properties</span>: {
          <span class="hljs-attr">keyword</span>: {
            <span class="hljs-attr">type</span>: <span class="hljs-string">'string'</span>,
            <span class="hljs-attr">description</span>: <span class="hljs-string">'æœç´¢å…³é”®è¯'</span>
          }
        }
      }
    }]
  };
});

<span class="hljs-comment">// å®ç°å·¥å…·é€»è¾‘</span>
server.<span class="hljs-title function_">setRequestHandler</span>(<span class="hljs-string">'tools/call'</span>, <span class="hljs-keyword">async</span> (request) =&gt; {
  <span class="hljs-keyword">if</span> (request.<span class="hljs-property">params</span>.<span class="hljs-property">name</span> === <span class="hljs-string">'query_docs'</span>) {
    <span class="hljs-keyword">const</span> { keyword } = request.<span class="hljs-property">params</span>.<span class="hljs-property">arguments</span>;
    <span class="hljs-comment">// æŸ¥è¯¢ä½ çš„æ–‡æ¡£ç³»ç»Ÿ</span>
    <span class="hljs-keyword">const</span> results = <span class="hljs-keyword">await</span> <span class="hljs-title function_">queryInternalDocs</span>(keyword);
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">content</span>: [{
        <span class="hljs-attr">type</span>: <span class="hljs-string">'text'</span>,
        <span class="hljs-attr">text</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(results)
      }]
    };
  }
});

<span class="hljs-comment">// å¯åŠ¨æœåŠ¡å™¨</span>
<span class="hljs-keyword">const</span> transport = <span class="hljs-keyword">new</span> <span class="hljs-title class_">StdioServerTransport</span>();
<span class="hljs-keyword">await</span> server.<span class="hljs-title function_">connect</span>(transport);
</code></pre>
<p><strong>é…ç½®åˆ° Cursor:</strong></p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"mcpServers"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"docs"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"command"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"node"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"args"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"/path/to/docs-mcp-server.js"</span><span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 data-id="heading-41">é«˜æ‰‹æŠ€å·§ 2ï¼šæ‰¹é‡ç”Ÿæˆé¡µé¢</h3>
<p>å¦‚æœä½ çš„é¡¹ç›®æœ‰å¤§é‡ç›¸ä¼¼é¡µé¢,å¯ä»¥è®© AI æ‰¹é‡ç”Ÿæˆ:</p>
<pre><code class="hljs language-markdown" lang="markdown">ä½ : æˆ‘æœ‰ä¸€ä¸ªå•†åŸé¡¹ç›®,éœ€è¦ç”Ÿæˆè¿™äº›é¡µé¢:
<span class="hljs-bullet">-</span> å•†å“åˆ—è¡¨
<span class="hljs-bullet">-</span> å•†å“è¯¦æƒ…
<span class="hljs-bullet">-</span> è´­ç‰©è½¦
<span class="hljs-bullet">-</span> è®¢å•åˆ—è¡¨
<span class="hljs-bullet">-</span> è®¢å•è¯¦æƒ…
<span class="hljs-bullet">-</span> ä¸ªäººä¸­å¿ƒ

å®ƒä»¬çš„UIé£æ ¼ç›¸ä¼¼,éƒ½ä½¿ç”¨å¡ç‰‡å¸ƒå±€+Tailwind CSSã€‚
å¸®æˆ‘ç”Ÿæˆé¡µé¢éª¨æ¶å’Œè·¯ç”±é…ç½®ã€‚

AI: å¥½çš„,æˆ‘ä¼šä¸ºä½ ç”Ÿæˆ:
<span class="hljs-bullet">1.</span> 6ä¸ªé¡µé¢ç»„ä»¶
<span class="hljs-bullet">2.</span> ç»Ÿä¸€çš„è·¯ç”±é…ç½®
<span class="hljs-bullet">3.</span> é€šç”¨çš„å¸ƒå±€ç»„ä»¶
<span class="hljs-bullet">4.</span> å…±äº«çš„æ ·å¼å®šä¹‰

[å¼€å§‹ç”Ÿæˆ...]
</code></pre>
<h3 data-id="heading-42">é«˜æ‰‹æŠ€å·§ 3ï¼šè‡ªåŠ¨åŒ–æµ‹è¯•</h3>
<p>è®© AI å¸®ä½ å†™æµ‹è¯•ç”¨ä¾‹:</p>
<pre><code class="hljs language-javascript" lang="javascript">ä½ : ä¸º<span class="hljs-title class_">TodoList</span>ç»„ä»¶å†™å•å…ƒæµ‹è¯•,è¦†ç›–:
<span class="hljs-number">1.</span> æ¸²æŸ“æµ‹è¯•
<span class="hljs-number">2.</span> æ·»åŠ å¾…åŠ
<span class="hljs-number">3.</span> å®Œæˆå¾…åŠ
<span class="hljs-number">4.</span> åˆ é™¤å¾…åŠ
<span class="hljs-number">5.</span> è¾¹ç•Œæƒ…å†µ(ç©ºè¾“å…¥,ç½‘ç»œé”™è¯¯ç­‰)

<span class="hljs-attr">AI</span>: [ç”Ÿæˆæµ‹è¯•ä»£ç ]

<span class="hljs-keyword">import</span> { render, fireEvent, waitFor } <span class="hljs-keyword">from</span> <span class="hljs-string">'@testing-library/react'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">TodoList</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./TodoList'</span>

<span class="hljs-title function_">describe</span>(<span class="hljs-string">'TodoList'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title function_">it</span>(<span class="hljs-string">'åº”è¯¥æ­£ç¡®æ¸²æŸ“'</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> { getByText } = <span class="hljs-title function_">render</span>(<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">TodoList</span> /&gt;</span></span>)
    <span class="hljs-title function_">expect</span>(<span class="hljs-title function_">getByText</span>(<span class="hljs-string">'æˆ‘çš„å¾…åŠ'</span>)).<span class="hljs-title function_">toBeInTheDocument</span>()
  })

  <span class="hljs-title function_">it</span>(<span class="hljs-string">'åº”è¯¥èƒ½æ·»åŠ å¾…åŠ'</span>, <span class="hljs-keyword">async</span> () =&gt; {
    <span class="hljs-comment">// ... æµ‹è¯•ä»£ç </span>
  })

  <span class="hljs-comment">// ... æ›´å¤šæµ‹è¯•</span>
})
</code></pre>
<h3 data-id="heading-43">é«˜æ‰‹æŠ€å·§ 4ï¼šæ€§èƒ½ä¼˜åŒ–</h3>
<p>è®© AI åˆ†ææ€§èƒ½ç“¶é¢ˆ:</p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">ä½ : æˆ‘çš„å¾…åŠåˆ—è¡¨é¡µé¢åŠ è½½å¾ˆæ…¢,å¸®æˆ‘åˆ†ææ€§èƒ½é—®é¢˜</span>

<span class="hljs-section">AI: è®©æˆ‘çœ‹çœ‹ä»£ç ...</span>

<span class="hljs-section">å‘ç°ä»¥ä¸‹é—®é¢˜:</span>

1. useEffectä¾èµ–é¡¹è®¾ç½®ä¸å½“,å¯¼è‡´é¢‘ç¹é‡æ–°æ¸²æŸ“
2. åˆ—è¡¨é¡¹æ²¡æœ‰ä½¿ç”¨React.memoä¼˜åŒ–
3. äº‘å‡½æ•°æŸ¥è¯¢æ²¡æœ‰åšç¼“å­˜

<span class="hljs-section">å»ºè®®ä¼˜åŒ–æ–¹æ¡ˆ:</span>
[ç»™å‡ºè¯¦ç»†çš„ä¼˜åŒ–ä»£ç ]
</code></pre>
<h2 data-id="heading-44">ğŸ“š èµ„æºæ¨è</h2>
<h3 data-id="heading-45">å¿…è¯»æ–‡æ¡£</h3>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.taro.zone" title="https://docs.taro.zone" target="_blank" ref="nofollow noopener noreferrer">Taro å®˜æ–¹æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftailwindcss.com" title="https://tailwindcss.com" target="_blank" ref="nofollow noopener noreferrer">Tailwind CSS æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fmodelcontextprotocol.io" title="https://modelcontextprotocol.io" target="_blank" ref="nofollow noopener noreferrer">MCP å®˜æ–¹æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.cloudbase.net" title="https://docs.cloudbase.net" target="_blank" ref="nofollow noopener noreferrer">CloudBase æ–‡æ¡£</a></li>
</ul>
<h3 data-id="heading-46">ç¤¾åŒºèµ„æº</h3>
<ul>
<li>Taro GitHub: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FNervJS%2Ftaro" target="_blank" title="https://github.com/NervJS/taro" ref="nofollow noopener noreferrer">github.com/NervJS/taro</a></li>
<li>Taro ç‰©æ–™å¸‚åœº: <a href="https://link.juejin.cn?target=https%3A%2F%2Ftaro-ext.jd.com" target="_blank" title="https://taro-ext.jd.com" ref="nofollow noopener noreferrer">taro-ext.jd.com</a></li>
<li>MCP Servers: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fmodelcontextprotocol%2Fservers" target="_blank" title="https://github.com/modelcontextprotocol/servers" ref="nofollow noopener noreferrer">github.com/modelcontexâ€¦</a></li>
</ul>
<h3 data-id="heading-47">æ¨èå·¥å…·</h3>
<ul>
<li><strong>Cursor</strong>: AI ç¼–ç¨‹ IDE</li>
<li><strong>MiniMax Coding Plan</strong>: web_search + understand_image</li>
<li><strong>CloudBase</strong>: è…¾è®¯äº‘å¼€å‘å¹³å°</li>
<li><strong>Tailwind CSS IntelliSense</strong>: VS Code/Cursor æ’ä»¶</li>
</ul>
<h2 data-id="heading-48">ğŸ‰ ç»“è¯­</h2>
<p>ä½¿ç”¨ MiniMax + Cursor + Taro çš„ç»„åˆ,ä½ ä¼šå‘ç°å¼€å‘å°ç¨‹åºä¸å†æ˜¯ç—›è‹¦çš„è¿‡ç¨‹,è€Œæ˜¯å……æ»¡åˆ›é€ åŠ›çš„æ—…ç¨‹:</p>
<ul>
<li><strong>ä¸å†å®³æ€•é‡åˆ° bug</strong> - web_search å¸®ä½ æ‰¾åˆ°è§£å†³æ–¹æ¡ˆ</li>
<li><strong>ä¸å†æ‹…å¿ƒè¿˜åŸè®¾è®¡ç¨¿</strong> - understand_image ä¸€é”®åˆ†æ</li>
<li><strong>ä¸å†å¤´ç–¼è°ƒè¯•äº‘å‡½æ•°</strong> - CloudBase MCP ç›´æ¥æŸ¥çœ‹æ—¥å¿—</li>
<li><strong>ä¸å†çº ç»“æ ·å¼å®ç°</strong> - Tailwind CSS æ‰€è§å³æ‰€å¾—</li>
</ul>
<p>è®°ä½:<strong>AI æ˜¯ä½ çš„åŠ©æ‰‹,ä¸æ˜¯æ›¿ä»£å“ã€‚</strong></p>
<p>æœ€å¥½çš„å¼€å‘æ¨¡å¼æ˜¯:<strong>AI å¤„ç†é‡å¤åŠ³åŠ¨,ä½ ä¸“æ³¨åˆ›é€ ä»·å€¼ã€‚</strong></p>
<p>ç°åœ¨,æ‰“å¼€ Cursor,å¼€å§‹ä½ çš„ AI è¾…åŠ©å¼€å‘ä¹‹æ—…å§! ğŸš€</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç¬¬3ç«  Nest.jsæ‹¦æˆªå™¨]]></title>    <link>https://juejin.cn/post/7589935326782898210</link>    <guid>https://juejin.cn/post/7589935326782898210</guid>    <pubDate>2026-01-02T04:30:04.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589935326782898210" data-draft-id="7590071125397995560" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç¬¬3ç«  Nest.jsæ‹¦æˆªå™¨"/> <meta itemprop="keywords" content="å‰ç«¯,NestJS,AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2026-01-02T04:30:04.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="XiaoYu2002"/> <meta itemprop="url" content="https://juejin.cn/user/251124329220663"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç¬¬3ç«  Nest.jsæ‹¦æˆªå™¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/251124329220663/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    XiaoYu2002
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-02T04:30:04.000Z" title="Fri Jan 02 2026 04:30:04 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»13åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;color:rgba(46,36,36,.87);overflow-x:hidden}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{margin-bottom:5px;font-size:30px;font-weight:500}.markdown-body h1:before{content:"#";margin-right:10px;color:#1976d2}.markdown-body h2{font-size:28px;font-weight:400;border-left:5px solid #454545;margin-top:20px;padding-left:10px;transition:all .3s ease-in-out}.markdown-body h2:hover{border-color:#1976d2}.markdown-body h3{font-size:24px;font-weight:400;margin-top:15px;padding-bottom:0}.markdown-body h4{font-size:20px;font-weight:500}.markdown-body h5{font-size:16px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body h2:first-letter,.markdown-body h3:first-letter,.markdown-body p:first-letter{text-transform:capitalize}.markdown-body em{text-emphasis:dot;text-emphasis-position:under}.markdown-body img{display:block;margin:0 auto!important;max-width:100%;border-radius:2px;box-shadow:0 2px 4px -1px rgba(0,0,0,.2),0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12)!important}.markdown-body hr{position:relative;width:98%;height:1px;border:none;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,#ddd,#999,#ddd);overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background:#fff;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center}.markdown-body code{font-weight:900;word-break:break-word;border-radius:2px;overflow-x:auto;font-size:.87em;padding:.065em .4em;background-color:#fbe5e1;color:#c0341d}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;border-radius:0 4px}.markdown-body pre&gt;code{font-weight:400;font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{margin:0 4px;text-decoration:none;color:#027fff;transition:all .3s ease-in-out;padding-bottom:4px;border-bottom:2px solid transparent}.markdown-body a:after{content:"";display:inline-block;width:18px;height:18px;margin-left:4px;vertical-align:middle;background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMiIgaGVpZ2h0PSIyMiI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIiBzdHJva2U9IiMwMjdGRkYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCI+PHBhdGggZD0iTTkuODE1IDYuNDQ4bDEuOTM2LTEuOTM2YzEuMzM3LTEuMzM2IDMuNTgtMS4yNTkgNS4wMTMuMTczIDEuNDMyIDEuNDMyIDEuNTEgMy42NzYuMTczIDUuMDEzbC0xLjQ1MiAxLjQ1Mi0uOTY4Ljk2OGMtMS4zMzcgMS4zMzYtMy41ODEgMS4yNTktNS4wMTMtLjE3MyIvPjxwYXRoIGQ9Ik0xMS4yNjcgMTUuMzY3bC0xLjkzNiAxLjkzNmMtMS4zMzYgMS4zMzctMy41OCAxLjI2LTUuMDEyLS4xNzMtMS40MzItMS40MzItMS41MS0zLjY3Ni0uMTczLTUuMDEybDEuNDUyLTEuNDUyLjk2OC0uOTY4YzEuMzM2LTEuMzM3IDMuNTgtMS4yNiA1LjAxMi4xNzMiLz48L2c+PC9zdmc+);background-size:cover;background-repeat:no-repeat}.markdown-body a:hover{border-color:#027fff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body a.footnote-backref:after,.markdown-body a.footnote-ref:after,.markdown-body sup a:after{display:none!important}.markdown-body table{margin:0 auto 10px;font-size:12px;width:auto;max-width:100%;overflow:auto;border:2px solid #c6c6c6}.markdown-body table img{box-shadow:none!important}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body del{color:rgba(0,0,0,.6)}.markdown-body blockquote{position:relative;color:#666;padding:5px 23px 1px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:hsla(0,0%,78.4%,.12);transition:all .2s ease-in-out}.markdown-body blockquote:hover{border-color:#1976d2}.markdown-body blockquote:after,.markdown-body blockquote:before{position:absolute;font-size:24px;font-weight:800;line-height:24px;color:#cbcbcb;opacity:.6}.markdown-body blockquote:before{content:"â€œ";top:4px;left:6px}.markdown-body blockquote:after{content:"â€";right:8px;bottom:-8px}.markdown-body blockquote&gt;p,.markdown-body blockquote blockquote{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body details{outline:none;border:none;border-left:4px solid #1976d2;padding-left:10px;margin-left:4px}.markdown-body details summary{cursor:pointer;border:none;outline:none;background:#fff;margin:0 -17px}.markdown-body details summary:hover::-webkit-details-marker{color:#1976d2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">3.1 æ‹¦æˆªå™¨ä»‹ç»</h2>
<p>Nest.jsçš„æ‹¦æˆªå™¨å’Œaxiosçš„æ‹¦æˆªå™¨æ˜¯ç±»ä¼¼çš„ï¼Œå¯ä»¥åœ¨ç½‘ç»œè¯·æ±‚å¤„ç†çš„å‰åå»æ‰§è¡Œé¢å¤–çš„é€»è¾‘ã€‚æ‹¦æˆªå™¨ä»å­—é¢æ„æ€ç†è§£å°±æ˜¯æ‹¦æˆªï¼Œå‡è®¾æœ‰æµç¨‹A-&gt;Bï¼Œæ‹¦æˆªå™¨è¦åšçš„æ˜¯Aåˆ°Bçš„è¿‡ç¨‹ä¸­ï¼Œå°†å†…å®¹æ‹¦æˆªä¸‹æ¥å¤„ç†åå†ä¸¢ç»™Bï¼Œå˜æˆäº†A-&gt;æ‹¦æˆªå™¨-&gt;Bã€‚</p>
<p>åœ¨ç½‘ç»œè¯·æ±‚çš„é€»è¾‘ä¸­ï¼Œæ‹¦æˆªå™¨çš„æ‹¦æˆªä½ç½®å¦‚ä¸‹ï¼š</p>
<ul>
<li>å®¢æˆ·ç«¯è¯·æ±‚-&gt;æ‹¦æˆªå™¨ï¼ˆå‰ç½®é€»è¾‘ï¼‰-&gt;è·¯ç”±å¤„ç†å™¨-&gt;æ‹¦æˆªå™¨ï¼ˆåç½®é€»è¾‘ï¼‰-&gt;å®¢æˆ·ç«¯å“åº”ã€‚</li>
</ul>
<p>Nest.jsæ‹¦æˆªå™¨æ•ˆæœå¦‚å›¾3-1æ‰€ç¤ºã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e5f748da79494b1698a97dc2ba327487~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgWGlhb1l1MjAwMg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767933209&amp;x-signature=rjGaBE%2FMUQcYB2xG72DMqOKYs8Q%3D" alt="image-20251212195404071" loading="lazy"/></p>
<p align="center">
 <b> å›¾3-1 Nest.jsæ‹¦æˆªå™¨</b>
</p>
<p>Nest.jsæ‹¦æˆªå™¨ä¸»è¦çš„ç”¨é€”æœ‰ä»¥ä¸‹5ç‚¹ï¼š</p>
<p>ï¼ˆ1ï¼‰ç»Ÿä¸€å“åº”æ ¼å¼ï¼šå°†è¿”å›æ•°æ®åŒ…è£…æˆç»Ÿä¸€æ ¼å¼ã€‚</p>
<p>ï¼ˆ2ï¼‰æ—¥å¿—è®°å½•ï¼šè®°å½•è¯·æ±‚è€—æ—¶ã€è¯·æ±‚å‚æ•°ç­‰ä¿¡æ¯ã€‚</p>
<p>ï¼ˆ3ï¼‰ç¼“å­˜å¤„ç†ï¼šå¯¹å“åº”æ•°æ®è¿›è¡Œç¼“å­˜ã€‚</p>
<p>ï¼ˆ4ï¼‰å¼‚å¸¸æ˜ å°„ï¼šè½¬æ¢å¼‚å¸¸ç±»å‹ã€‚</p>
<p>ï¼ˆ5ï¼‰æ•°æ®è½¬æ¢ï¼šå¯¹å“åº”æ•°æ®è¿›è¡Œåºåˆ—åŒ–/è½¬æ¢ã€‚</p>
<p>åœ¨è‹±è¯­AIé¡¹ç›®ä¸­ï¼Œä¸»è¦ä½¿ç”¨åˆ°ç¬¬5ç‚¹æ•°æ®è½¬æ¢ï¼Œå› æ­¤æˆ‘ä»¬ä¸»è¦å­¦ä¹ è¿™ä¸€ç‚¹ã€‚</p>
<h2 data-id="heading-1">3.2 æ‹¦æˆªå™¨åˆ›å»º</h2>
<p>å¦‚è¡¨1-2æ‰€ç¤ºï¼Œå¯ä»¥é€šè¿‡nest g itc interceptorå¿«é€Ÿåˆ›å»ºä¸€ä¸ªæ‹¦æˆªå™¨ï¼ˆinterceptorå¯ä»¥æ›¿æ¢ä¸ºä»»ä½•ä½ æƒ³å–çš„æ‹¦æˆªå™¨åç§°ï¼‰ã€‚é€šè¿‡è¯¥å‘½ä»¤ä¼šåœ¨srcæ–‡ä»¶å¤¹ä¸‹åˆ›å»ºinterceptoræ–‡ä»¶å¤¹ï¼Œè€Œinterceptoræ–‡ä»¶å¤¹ä¸‹å­˜æ”¾interceptor.interceptor.tsæ–‡ä»¶ã€‚</p>
<p>æ ¹æ®å‘½ä»¤çš„ç”Ÿæˆè§„åˆ™ï¼Œæˆ‘ä»¬çŸ¥é“æ–‡ä»¶å¤¹å’Œæ–‡ä»¶çš„åç§°å–å†³äºæˆ‘ä»¬å‘½ä»¤å¯¹æ‹¦æˆªå™¨çš„åç§°ï¼Œä»è€Œç”Ÿæˆxxxæ–‡ä»¶å¤¹å’Œxxx.interceptor.tsæ–‡ä»¶ã€‚å¹¶ä¸”åœ¨è¿™å”¯ä¸€çš„æ–‡ä»¶ä¸­ï¼Œä¼šæå‰ç”Ÿæˆå¥½å¯¹åº”çš„Demoç¤ºä¾‹ã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">//src/interceptor/interceptor.interceptor.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">CallHandler</span>, <span class="hljs-title class_">ExecutionContext</span>, <span class="hljs-title class_">Injectable</span>, <span class="hljs-title class_">NestInterceptor</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Observable</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'rxjs'</span>;

<span class="hljs-meta">@Injectable</span>()
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">InterceptorInterceptor</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">NestInterceptor</span> {
  <span class="hljs-title function_">intercept</span>(<span class="hljs-attr">context</span>: <span class="hljs-title class_">ExecutionContext</span>, <span class="hljs-attr">next</span>: <span class="hljs-title class_">CallHandler</span>): <span class="hljs-title class_">Observable</span>&lt;<span class="hljs-built_in">any</span>&gt; {
    <span class="hljs-keyword">return</span> next.<span class="hljs-title function_">handle</span>();
  }
}
</code></pre>
<p>æ‹¦æˆªå™¨æœ‰ä¸¤ç§ä½¿ç”¨æ–¹å¼ï¼š</p>
<p>ï¼ˆ1ï¼‰å±€éƒ¨ä½¿ç”¨ã€‚</p>
<p>ï¼ˆ2ï¼‰å…¨å±€ä½¿ç”¨ã€‚</p>
<p>å½“æƒ³å±€éƒ¨ä½¿ç”¨æ—¶ï¼Œä¾‹å¦‚åªæƒ³åœ¨srcæ–‡ä»¶å¤¹ä¸‹çš„useræ¨¡å—ä½¿ç”¨ï¼Œæˆ‘ä»¬åªéœ€è¦æ³¨å†Œåˆ°useræ¨¡å—ä¸­ã€‚é‚£æ€ä¹ˆæ³¨å†Œï¼Ÿæœ‰3ç§æ³¨å†Œæ–¹å¼ï¼Œåœ¨user.module.tsã€user.controller.tsä»¥åŠuser.controller.tséƒ½å¯ä»¥æ³¨å†Œï¼Œæœ€ä¸»è¦çš„åŒºåˆ«åœ¨äºå±€éƒ¨ä½œç”¨èŒƒå›´ä¸åŒã€‚Nest.jsæ‹¦æˆªå™¨å±€éƒ¨æ³¨å†Œå¦‚è¡¨3-1æ‰€ç¤ºã€‚</p>
<p align="center">
 <b> è¡¨3-1 Nest.jsæ‹¦æˆªå™¨å±€éƒ¨æ³¨å†Œ</b>
</p>

































<table><thead><tr><th align="left">æ³¨å†Œæ–¹å¼</th><th align="left">ä½œç”¨èŒƒå›´</th><th align="left">ä»£ç ä½ç½®</th><th align="left">ä¼˜ç‚¹</th><th align="left">ç¼ºç‚¹</th></tr></thead><tbody><tr><td align="left"><strong>æ¨¡å—çº§åˆ«</strong></td><td align="left">æ•´ä¸ªæ¨¡å—æ‰€æœ‰æ§åˆ¶å™¨</td><td align="left">user.module.ts</td><td align="left">ç»Ÿä¸€ç®¡ç†ï¼Œè‡ªåŠ¨åº”ç”¨åˆ°æ‰€æœ‰è·¯ç”±</td><td align="left">æ— æ³•çµæ´»æ’é™¤æŸäº›è·¯ç”±</td></tr><tr><td align="left"><strong>æ§åˆ¶å™¨çº§åˆ«</strong></td><td align="left">å•ä¸ªæ§åˆ¶å™¨æ‰€æœ‰è·¯ç”±</td><td align="left">user.controller.ts</td><td align="left">æ§åˆ¶å™¨ç²’åº¦æ§åˆ¶</td><td align="left">éœ€åœ¨æ¯ä¸ªæ§åˆ¶å™¨æ·»åŠ è£…é¥°å™¨</td></tr><tr><td align="left"><strong>è·¯ç”±çº§åˆ«</strong></td><td align="left">å•ä¸ªè·¯ç”±æ–¹æ³•</td><td align="left">user.controller.ts</td><td align="left">æœ€ç²¾ç»†çš„æ§åˆ¶</td><td align="left">ä»£ç é‡å¤ï¼Œç®¡ç†å¤æ‚</td></tr></tbody></table>
<p>å±€éƒ¨ä½¿ç”¨çš„å…·ä½“ä»£ç ä¸æ¼”ç¤ºï¼Œå¯é€šè¿‡AIæˆ–è€…å®˜æ–¹æ–‡æ¡£å­¦ä¹ ä½¿ç”¨ã€‚</p>
<h2 data-id="heading-2">3.3 å…¨å±€æ‹¦æˆªå™¨ä½¿ç”¨</h2>
<p>åœ¨è‹±è¯­AIé¡¹ç›®ä¸­ä¼šä½¿ç”¨åˆ°å…¨å±€ä½¿ç”¨ï¼Œæˆ‘ä»¬è¿™é‡Œå­¦ä¹ å…·ä½“å¦‚ä½•å…¨å±€ä½¿ç”¨ã€‚æ­¥éª¤ä¸ºä»¥ä¸‹2æ­¥ï¼š</p>
<p>ï¼ˆ1ï¼‰ä½¿ç”¨nest g itc &lt;æ‹¦æˆªå™¨åç§°&gt;å¿«é€Ÿåˆ›å»ºä¸€ä¸ªæ‹¦æˆªå™¨ã€‚</p>
<p>ï¼ˆ2ï¼‰å°†æ‹¦æˆªå™¨æ³¨å†Œåˆ°main.tsæ–‡ä»¶ä¸­ï¼Œå³åœ¨main.tsæ–‡ä»¶ä¸­å¯¼å…¥åˆšåˆ›å»ºçš„æ‹¦æˆªå™¨ï¼Œå¹¶ä¸”ä½¿ç”¨Neståº”ç”¨ç¨‹åºå®ä¾‹æ–¹æ³•useGlobalInterceptors()ã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// main.tsæ–‡ä»¶</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">NestFactory</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/core'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">AppModule</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./app.module'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">InterceptorInterceptor</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./interceptor/interceptor.interceptor'</span>;
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">bootstrap</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> app = <span class="hljs-keyword">await</span> <span class="hljs-title class_">NestFactory</span>.<span class="hljs-title function_">create</span>(<span class="hljs-title class_">AppModule</span>);
  app.<span class="hljs-title function_">useGlobalInterceptors</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">InterceptorInterceptor</span>());
  <span class="hljs-keyword">await</span> app.<span class="hljs-title function_">listen</span>(process.<span class="hljs-property">env</span>.<span class="hljs-property">PORT</span> ?? <span class="hljs-number">3000</span>);
}

<span class="hljs-title function_">bootstrap</span>();
</code></pre>
<p>å½“ç„¶ç”±äºInterceptorInterceptoræ‹¦æˆªå™¨æ˜¯ä¸€ä¸ªç±»ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ä½¿ç”¨newè¿ç®—ç¬¦åˆ›å»ºæ‹¦æˆªå™¨çš„å®ä¾‹ä»¥ä¾›ä½¿ç”¨ã€‚åˆ°è¿™é‡Œï¼ŒInterceptorInterceptoræ‹¦æˆªå™¨å°±æ˜¯å…¨å±€ä½¿ç”¨ï¼Œå³æ¯ä¸€ä¸ªæ¥å£éƒ½ä¼šç»è¿‡è¯¥æ‹¦æˆªå™¨ã€‚Nest.jså…¨å±€æ³¨å†Œçš„å®˜æ–¹æ–‡æ¡£å¦‚å›¾3-2æ‰€ç¤ºã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9bd57295aa934803bcb0c3d51f4cb44a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgWGlhb1l1MjAwMg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767933209&amp;x-signature=QeA6K9gERm5GkZoDFg%2B%2Bjw%2BDDQM%3D" alt="image-20251212212343423" loading="lazy"/></p>
<p align="center">
 <b> å›¾3-2 Nest.jsæ‹¦æˆªå™¨å…¨å±€æ³¨å†Œ</b>
</p>
<p>æ­¤æ—¶æ¥ç¼–å†™InterceptorInterceptoræ‹¦æˆªå™¨å†…çš„é€»è¾‘ï¼Œå¯è§å¼•å…¥äº†æ¥è‡ªrxjsçš„Observableç±»ï¼Œrxjsæ˜¯Nest.jså†…éƒ¨è‡ªå¸¦çš„ï¼Œä¸»è¦ç”¨äºå¤„ç†æµçš„ï¼Œä½¿ç”¨é¢‘ç‡ä¸é«˜ã€‚é€šå¸¸è·å–æ•°æ®éœ€è¦åŒºåˆ†åŒæ­¥ä¸å¼‚æ­¥ï¼ŒåŒæ­¥ç›´æ¥è·å–ï¼Œè€Œå¼‚æ­¥é€šè¿‡Promiseçš„thenæˆ–è€…catchæ–¹æ³•è·å–ã€‚å¦‚æœæ­¤æ—¶æœ‰rxjsï¼Œå°±ä¸éœ€è¦æˆ‘ä»¬å»å…³æ³¨è·å–çš„æ•°æ®æ˜¯åŒæ­¥æˆ–è€…å¼‚æ­¥çš„é—®é¢˜ï¼Œå‡å°‘å¿ƒæ™ºè´Ÿæ‹…ã€‚rxjsä¼šå°†è¿™äº›æ•°æ®ç»Ÿä¸€è½¬æˆä¸€ä¸ªæ•°æ®æµï¼Œç„¶åé€šè¿‡ç®¡é“ï¼ˆpipeï¼‰å»æ¥æ”¶ï¼Œæ¥æ”¶åˆ°ä¹‹åå¯ç”±æˆ‘ä»¬å¤„ç†è¯¥æ•°æ®æ ¼å¼ï¼Œæ— è®ºæ˜¯é€šè¿‡mapéå†å¤„ç†è¿˜æ˜¯filterè¿‡æ»¤ç­‰ç­‰ï¼Œæœ€ç»ˆå°†å¤„ç†å¥½çš„æ•°æ®æ ¼å¼è¿”å›å°±è¡Œã€‚</p>
<p>ä»¥ä¸Šæ˜¯rxjsçš„æ ¸å¿ƒç†å¿µï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œå®ƒè¿˜å¯ä»¥åŒæ—¶å¤„ç†å¤šä¸ªå¼‚æ­¥ï¼Œè€Œthenæˆ–è€…catchæ–¹æ³•æ¯æ¬¡åªèƒ½å¤„ç†ä¸€ä¸ªã€‚</p>
<p>åƒInterceptorInterceptoræ‹¦æˆªå™¨ä¸­çš„æ‰€è¿”å›çš„next.handle()å°±æ˜¯ä¸€ä¸ªObservableï¼ˆæ•°æ®æµï¼‰ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦é€šè¿‡pipeï¼ˆç®¡é“ï¼‰å»æ¥æ”¶æ•°æ®ç„¶åä½¿ç”¨rxjsçš„mapæ–¹æ³•å¯¹æ•°æ®å¤„ç†ä¹‹åå†è¿”å›æ•°æ®ã€‚</p>
<p>æˆ‘ä»¬å°†åŸå§‹æ•°æ®åŒ…è£¹åœ¨ä¸€ä¸ªæ ‡å‡†å“åº”ç»“æ„ä¸­ï¼Œæ·»åŠ äº†æ—¶é—´æˆ³ã€è¯·æ±‚è·¯å¾„ã€ä¸šåŠ¡çŠ¶æ€ç ã€æˆåŠŸæ ‡å¿—å’Œè‡ªå®šä¹‰æ¶ˆæ¯ã€‚è¿™æ ·ç¡®ä¿äº†æ‰€æœ‰ç»è¿‡æ­¤æ‹¦æˆªå™¨çš„HTTPå“åº”éƒ½éµå¾ªç»Ÿä¸€çš„JSONæ ¼å¼ï¼ŒåŒ…æ‹¬ { timestamp, data, path, message, code, success } ç­‰æ ‡å‡†åŒ–å­—æ®µï¼Œå‰ç«¯å¯ä»¥ç»Ÿä¸€å¤„ç†å’Œé”™è¯¯è¿½è¸ªã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// src/interceptor/interceptor.interceptor.tsæ–‡ä»¶</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">CallHandler</span>, <span class="hljs-title class_">ExecutionContext</span>, <span class="hljs-title class_">Injectable</span>, <span class="hljs-title class_">NestInterceptor</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Observable</span>, map } <span class="hljs-keyword">from</span> <span class="hljs-string">'rxjs'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Request</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'express'</span>;

<span class="hljs-meta">@Injectable</span>()
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">InterceptorInterceptor</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">NestInterceptor</span> {
  <span class="hljs-title function_">intercept</span>(<span class="hljs-attr">context</span>: <span class="hljs-title class_">ExecutionContext</span>, <span class="hljs-attr">next</span>: <span class="hljs-title class_">CallHandler</span>): <span class="hljs-title class_">Observable</span>&lt;<span class="hljs-built_in">any</span>&gt; {
    <span class="hljs-comment">// å°†é€šç”¨çš„æ‰§è¡Œä¸Šä¸‹æ–‡åˆ‡æ¢åˆ°HTTPç‰¹å®šçš„ä¸Šä¸‹æ–‡</span>
    <span class="hljs-keyword">const</span> ctx = context.<span class="hljs-title function_">switchToHttp</span>();
    <span class="hljs-comment">// è·å–å½“å‰HTTPè¯·æ±‚çš„è¯¦ç»†å¯¹è±¡ï¼ŒåŒ…å«äº†è¯·æ±‚æ–¹æ³•ã€URLã€è¯·æ±‚å¤´ã€å‚æ•°ã€ä¸»ä½“ç­‰æ‰€æœ‰ä¿¡æ¯ã€‚</span>
    <span class="hljs-keyword">const</span> request = ctx.<span class="hljs-property">getRequest</span>&lt;<span class="hljs-title class_">Request</span>&gt;();
    <span class="hljs-keyword">return</span> next.<span class="hljs-title function_">handle</span>().<span class="hljs-title function_">pipe</span>(<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {
      <span class="hljs-keyword">return</span> {
        <span class="hljs-attr">timestmap</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">toISOString</span>(),
        <span class="hljs-attr">data</span>: data,
        <span class="hljs-attr">path</span>: request.<span class="hljs-property">url</span>,
        <span class="hljs-attr">message</span>: <span class="hljs-string">'success'</span>,<span class="hljs-comment">//ä¸šåŠ¡é€»è¾‘è‡ªå®šä¹‰</span>
        <span class="hljs-attr">code</span>: <span class="hljs-number">200</span>,<span class="hljs-comment">//ä¸šåŠ¡é€»è¾‘è‡ªå®šä¹‰</span>
        <span class="hljs-attr">success</span>: <span class="hljs-literal">true</span>,
      };
    }));
  }
}
</code></pre>
<p>æ­¤æ—¶åœ¨æµè§ˆå™¨çš„URLè¾“å…¥<a href="https://link.juejin.cn?target=http%3A%2F%2Flocalhost%3A3000%2Fuser%2F123%25EF%25BC%258C%25E8%25AE%25BF%25E9%2597%25AE%25E5%25B8%25A6%25E5%258F%2582%25E6%2595%25B0%25E7%259A%2584get%25E8%25AF%25B7%25E6%25B1%2582%25EF%25BC%258Cget%25E8%25AF%25B7%25E6%25B1%2582%25E6%258B%25A6%25E6%2588%25AA%25E6%2595%2588%25E6%259E%259C%25E5%25A6%2582%25E5%259B%25BE3-3%25E6%2589%2580%25E7%25A4%25BA%25E3%2580%2582%25E5%259C%25A8%25E8%25BF%2599%25E9%2587%258C%25E4%25BD%2593%25E7%258E%25B0%25E7%259A%2584%25E6%2598%25AF%25EF%25BC%259A%25E8%25B7%25AF%25E7%2594%25B1%25E5%25A4%2584%25E7%2590%2586%25E5%2599%25A8-%253E%25E6%258B%25A6%25E6%2588%25AA%25E5%2599%25A8%25EF%25BC%2588%25E5%2590%258E%25E7%25BD%25AE%25E9%2580%25BB%25E8%25BE%2591%25EF%25BC%2589-%253E%25E5%25AE%25A2%25E6%2588%25B7%25E7%25AB%25AF%25E5%2593%258D%25E5%25BA%2594%25E3%2580%2582" target="_blank" title="http://localhost:3000/user/123%EF%BC%8C%E8%AE%BF%E9%97%AE%E5%B8%A6%E5%8F%82%E6%95%B0%E7%9A%84get%E8%AF%B7%E6%B1%82%EF%BC%8Cget%E8%AF%B7%E6%B1%82%E6%8B%A6%E6%88%AA%E6%95%88%E6%9E%9C%E5%A6%82%E5%9B%BE3-3%E6%89%80%E7%A4%BA%E3%80%82%E5%9C%A8%E8%BF%99%E9%87%8C%E4%BD%93%E7%8E%B0%E7%9A%84%E6%98%AF%EF%BC%9A%E8%B7%AF%E7%94%B1%E5%A4%84%E7%90%86%E5%99%A8-%3E%E6%8B%A6%E6%88%AA%E5%99%A8%EF%BC%88%E5%90%8E%E7%BD%AE%E9%80%BB%E8%BE%91%EF%BC%89-%3E%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%93%8D%E5%BA%94%E3%80%82" ref="nofollow noopener noreferrer">http://localhost:3000/user/123ï¼Œè®¿é—®å¸¦å‚æ•°çš„getè¯·æ±‚ï¼Œgetè¯·æ±‚æ‹¦æˆªæ•ˆæœå¦‚å›¾3-3æ‰€ç¤ºã€‚åœ¨è¿™é‡Œä½“ç°çš„æ˜¯ï¼šè·¯ç”±å¤„ç†å™¨-&gt;æ‹¦æˆªå™¨ï¼ˆåç½®é€»è¾‘ï¼‰-&gt;å®¢æˆ·ç«¯å“åº”ã€‚</a></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7af11efb75754b48af28e286cbeef74f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgWGlhb1l1MjAwMg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767933209&amp;x-signature=WI8xUv6J%2FmOMBPfLI2WMlHpGmSQ%3D" alt="image-20251212220853053" loading="lazy"/></p>
<p align="center">
 <b> å›¾3-3 Nest.jså…¨å±€æ‹¦æˆªå™¨-getè¯·æ±‚æ‹¦æˆªæ•ˆæœ</b>
</p>
<p>messageå’Œcodeå­—æ®µå±äºä¸šåŠ¡é€»è¾‘çš„éƒ¨åˆ†ï¼Œåç»­å®Œæˆè‹±è¯­AIé¡¹ç›®æ—¶ï¼Œä¼šæ ¹æ®ä¸šåŠ¡å®é™…é€»è¾‘å»è‡ªå®šä¹‰è®¾ç½®ã€‚</p>
<h2 data-id="heading-3">3.4 ä¼˜åŒ–å…¨å±€æ‹¦æˆªå™¨</h2>
<p>ä½†æ­¤æ—¶å…¨å±€æ‹¦æˆªå™¨è¿˜æœ‰ä¸€ä¸ªå¾ˆå¤§çš„Bugï¼Œå‡å¦‚æ¥å£è¿”å›ä¸€ä¸ªå¾ˆå¤§çš„æ•°æ®ï¼Œæˆ‘ä»¬é€šè¿‡BigIntæ•°æ®ç±»å‹å»å¤„ç†è¿”å›ï¼Œé‚£ä¹ˆåœ¨é€šè¿‡å…¨å±€æ‹¦æˆªå™¨æ—¶å°±ä¼šå‡ºç°æŠ¥é”™æƒ…å†µï¼Œå…¨å±€æ‹¦æˆªå™¨å¤„ç†BigIntç±»å‹æŠ¥é”™å¦‚å›¾3-4æ‰€ç¤ºã€‚</p>
<p><img src="http://tuchuang.xiaoyu2002.cn/picture/image-20251212222211323.png" alt="image-20251212222211323" loading="lazy"/></p>
<p align="center">
 <b> å›¾3-4 å…¨å±€æ‹¦æˆªå™¨å¤„ç†BigIntç±»å‹æŠ¥é”™</b>
</p>
<p>æŠ¥é”™æ˜¯error TS2322: Type 'bigint' is not assignable to type 'string'ã€‚å³bigintç±»å‹æ— æ³•èµ‹å€¼ç»™stringç±»å‹ï¼Œè¿™æ˜¯å¾ˆæ­£å¸¸çš„ã€‚å› ä¸ºå…¨å±€æ‹¦æˆªå™¨çš„è¿™äº›å‚æ•°éƒ½æ˜¯é€šè¿‡JavaScriptæ ‡å‡†å†…ç½®å¯¹è±¡JSON.stringify()è¿›è¡Œæ ¼å¼åŒ–çš„ï¼Œè€ŒJSON.stringify()æ˜¯æ²¡åŠæ³•å¤„ç†BigIntå€¼çš„ã€‚åœ¨MDNæ–‡æ¡£ä¸­æ˜¯è¿™æ ·è¡¨è¿°è¿™ä¸€å¼‚å¸¸æƒ…å†µï¼šå½“å°è¯•å»è½¬æ¢ BigIntç±»å‹çš„å€¼ä¼šæŠ›å‡ºTypeError("BigInt value can't be serialized in JSON")ï¼ˆBigInt å€¼ä¸èƒ½ JSON åºåˆ—åŒ–ï¼‰ã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// src/app.service.tsæ–‡ä»¶</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Injectable</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>;

<span class="hljs-meta">@Injectable</span>()
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AppService</span> {
  <span class="hljs-title function_">getHello</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">BigInt</span>(<span class="hljs-number">123456789123456789123456789</span>)
  }
}
</code></pre>
<p>æ‰€ä»¥æˆ‘ä»¬éœ€è¦é’ˆå¯¹BigIntç±»å‹çš„å€¼å»å¤„ç†ï¼Œé€šè¿‡ç¼–å†™transformBigIntæ–¹æ³•å»å•ç‹¬å¤„ç†è¿™ä¸€æƒ…å†µï¼Œä¸»è¦å¤„ç†çš„äº‹æƒ…æ˜¯å½“é‡åˆ°BigIntç±»å‹çš„å€¼å°±å°†å®ƒè½¬æˆä¸€ä¸ªå­—ç¬¦ä¸²ã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> <span class="hljs-title function_">transformBigInt</span> = (<span class="hljs-params">data: <span class="hljs-built_in">any</span></span>) =&gt; {
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> data === <span class="hljs-string">'bigint'</span>) {
    <span class="hljs-keyword">return</span> data.<span class="hljs-title function_">toString</span>();
  }
  <span class="hljs-keyword">return</span> data;
};
</code></pre>
<p>æ­¤æ—¶å°†æ¥å£ï¼ˆgetè¯·æ±‚ï¼‰è¿”å›ç»™ç”¨æˆ·çš„dataæ•°æ®æ”¾å…¥transformBigIntæ–¹æ³•ä¸­å³å¯ã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// src/interceptor/interceptor.interceptor.tsæ–‡ä»¶</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">CallHandler</span>, <span class="hljs-title class_">ExecutionContext</span>, <span class="hljs-title class_">Injectable</span>, <span class="hljs-title class_">NestInterceptor</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Observable</span>, map } <span class="hljs-keyword">from</span> <span class="hljs-string">'rxjs'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Request</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'express'</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title function_">transformBigInt</span> = (<span class="hljs-params">data: <span class="hljs-built_in">any</span></span>) =&gt; {
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> data === <span class="hljs-string">'bigint'</span>) {
    <span class="hljs-keyword">return</span> data.<span class="hljs-title function_">toString</span>();
  }
  <span class="hljs-keyword">return</span> data;
};

<span class="hljs-meta">@Injectable</span>()
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">InterceptorInterceptor</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">NestInterceptor</span> {
  <span class="hljs-title function_">intercept</span>(<span class="hljs-attr">context</span>: <span class="hljs-title class_">ExecutionContext</span>, <span class="hljs-attr">next</span>: <span class="hljs-title class_">CallHandler</span>): <span class="hljs-title class_">Observable</span>&lt;<span class="hljs-built_in">any</span>&gt; {
    <span class="hljs-keyword">const</span> ctx = context.<span class="hljs-title function_">switchToHttp</span>();
    <span class="hljs-keyword">const</span> request = ctx.<span class="hljs-property">getRequest</span>&lt;<span class="hljs-title class_">Request</span>&gt;();
    <span class="hljs-keyword">return</span> next.<span class="hljs-title function_">handle</span>().<span class="hljs-title function_">pipe</span>(<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {
      <span class="hljs-keyword">return</span> {
        <span class="hljs-attr">timestmap</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">toISOString</span>(),
        <span class="hljs-attr">data</span>: <span class="hljs-title function_">transformBigInt</span>(data),
        <span class="hljs-attr">path</span>: request.<span class="hljs-property">url</span>,
        <span class="hljs-attr">message</span>: <span class="hljs-string">'success'</span>,<span class="hljs-comment">//ä¸šåŠ¡é€»è¾‘è‡ªå®šä¹‰</span>
        <span class="hljs-attr">code</span>: <span class="hljs-number">200</span>,<span class="hljs-comment">//ä¸šåŠ¡é€»è¾‘è‡ªå®šä¹‰</span>
        <span class="hljs-attr">success</span>: <span class="hljs-literal">true</span>,
      };
    }));
  }
}
</code></pre>
<p>ä½†æ­¤æ—¶è¿˜ä¼šæŠ¥é”™åŒæ ·çš„é—®é¢˜ï¼ˆType 'bigint' is not assignable to type 'string'ï¼‰ï¼Œè¿™æ˜¯å¾ˆæ­£å¸¸çš„ã€‚æˆ‘ä»¬æ¥æ¢³ç†ä¸‹æµç¨‹ï¼š</p>
<p>ï¼ˆ1ï¼‰æ¥å£è¿”å›æ•°æ®ç»™å‰ç«¯ã€‚</p>
<p>ï¼ˆ2ï¼‰å…¨å±€æ‹¦æˆªå™¨æ‹¦æˆªæ¥å£è¿”å›çš„æ•°æ®è¿›è¡Œå¤„ç†ã€‚</p>
<p>ï¼ˆ3ï¼‰å…¨å±€å¤„ç†åçš„æ•°æ®è¿”å›ç»™å‰ç«¯ã€‚</p>
<p>æˆ‘ä»¬å·²ç»åœ¨å…¨å±€æ‹¦æˆªå™¨ä¸­å¤„ç†å¥½ç±»å‹è½¬æ¢é—®é¢˜ï¼ˆBigIntè½¬Stringï¼‰ï¼Œå¦‚æœè¿˜æœ‰é—®é¢˜ï¼Œå°±åªèƒ½åœ¨ç¬¬ä¸€æ­¥çš„æ¥å£è¿”å›æ•°æ®ç»™å‰ç«¯çš„æ­¥éª¤ä¸­ã€‚å‰ç«¯è®¿é—®çš„æ˜¯æ¥å£ï¼Œè€Œæ¥å£æ˜¯ä½“ç°å½¢å¼æ˜¯è·¯ç”±ï¼Œè·¯ç”±å±‚ä»ä¸šåŠ¡å±‚è·å–æ•°æ®è¿”å›ç»™å‰ç«¯ã€‚å› æ­¤åœ¨ä¸šåŠ¡å±‚çš„æ•°æ®æ˜¯BigIntç±»å‹ï¼Œåˆ™è·¯ç”±å±‚æ‰€æ‹¿åˆ°çš„æ•°æ®ä¹Ÿä¼šæ˜¯BigIntç±»å‹ã€‚ç”±äºNest.jsæ˜¯å¼ºåˆ¶ä½¿ç”¨TypeScriptçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦åˆ°app.controller.tsæ–‡ä»¶ä¸­å°†geté»˜è®¤è¯·æ±‚æ‰€è¿”å›çš„ç±»å‹é™åˆ¶ä»stringæ”¹æˆanyç±»å‹æˆ–è€…stringå’Œbigintçš„è”åˆç±»å‹ã€‚æ­¤æ—¶å°±èƒ½æ­£å¸¸è¿è¡Œä»£ç ã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// src/app.controller.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Controller</span>, <span class="hljs-title class_">Get</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">AppService</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./app.service'</span>;

<span class="hljs-meta">@Controller</span>()
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AppController</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> appService: AppService</span>) { }

  <span class="hljs-meta">@Get</span>()
  <span class="hljs-title function_">getHello</span>(): <span class="hljs-built_in">string</span> | <span class="hljs-built_in">bigint</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">appService</span>.<span class="hljs-title function_">getHello</span>();
  }
}
</code></pre>
<p>å‡ºäºä¸¥è°¨çš„è€ƒè™‘ï¼Œæˆ‘ä»¬éœ€è¦å¤„ç†ç›¸åº”çš„è¾¹ç•Œåˆ¤æ–­ï¼Œå‡å¦‚BigIntç±»å‹åœ¨æ•°ç»„é‡Œï¼Œåœ¨å¯¹è±¡é‡Œå‘¢ï¼ŸåŸæœ‰çš„å¤„ç†æ–¹å¼å°±åˆè§£æä¸äº†äº†ã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">return</span> [<span class="hljs-title class_">BigInt</span>(<span class="hljs-number">123456789123456789123456789</span>)];
<span class="hljs-keyword">return</span> { <span class="hljs-attr">a</span>: <span class="hljs-title class_">BigInt</span>(<span class="hljs-number">123456789123456789123456789</span>) };
</code></pre>
<p>æ‰€ä»¥éœ€è¦è¿›ä¸€æ­¥å¼ºåŒ–transformBigIntæ–¹æ³•ï¼Œå¯¹æ•°ç»„éå†å¤„ç†å†…éƒ¨å¯èƒ½å­˜åœ¨çš„BigIntç±»å‹ï¼Œè€Œå¯¹è±¡åˆ™é€šè¿‡Object.entries()é™æ€æ–¹æ³•å°†å¯¹è±¡åˆ‡æ¢æˆä¿å­˜é”®å€¼å¯¹çš„äºŒç»´æ•°ç»„åï¼Œéå†é”®å€¼å¯¹å¹¶é’ˆå¯¹å…¶ä¸­çš„valueå€¼å¤„ç†å¯èƒ½å­˜åœ¨çš„BigIntç±»å‹ï¼Œæœ€åé€šè¿‡Object.fromEntries()é™æ€æ–¹æ³•å°†é”®å€¼å¯¹å½¢å¼çš„äºŒç»´æ•°ç»„é‡æ–°è½¬æ¢å›åŸå§‹å¯¹è±¡ã€‚</p>
<ul>
<li>
<p>å¯¹è±¡æ‰“å°æ•ˆæœï¼š{ foo: "bar", baz: 42 }ã€‚</p>
</li>
<li>
<p>å°†å¯è¿­ä»£å¯¹è±¡åˆ‡æˆäºŒç»´æ•°ç»„ï¼š[ ['foo', 'bar'], ['baz', 42] ]ã€‚</p>
</li>
</ul>
<p>å°†å¯¹è±¡åˆ‡æˆäºŒç»´æ•°ç»„æ›´æ–¹ä¾¿æ‰¾åˆ°é”®å€¼å¯¹çš„å€¼å¹¶è¿›è¡Œéå†æ“ä½œã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> <span class="hljs-title function_">transformBigInt</span> = (<span class="hljs-params">data: <span class="hljs-built_in">any</span></span>) =&gt; {
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> data === <span class="hljs-string">'bigint'</span>) {
    <span class="hljs-keyword">return</span> data.<span class="hljs-title function_">toString</span>();
  }
  <span class="hljs-keyword">if</span>(<span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(data)){
    <span class="hljs-keyword">return</span> data.<span class="hljs-title function_">map</span>(transformBigInt);
  }
  <span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span> data === <span class="hljs-string">'object'</span> &amp;&amp; data !== <span class="hljs-literal">null</span>){
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">fromEntries</span>(<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">entries</span>(data).<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">[key, value]</span>) =&gt;</span> [key, <span class="hljs-title function_">transformBigInt</span>(value)]));
  }
  <span class="hljs-keyword">return</span> data;
};
</code></pre>
<p>åšå®Œä»¥ä¸Šçš„ä¼˜åŒ–åï¼Œæˆ‘ä»¬ä¼šå‘ç°æ¥å£è¦è¿”å›Dateæ—¥æœŸæ²¡åŠæ³•æ­£å¸¸è¿”å›ç»™å‰ç«¯äº†ï¼Œå› ä¸ºæˆ‘ä»¬æŠŠå¯¹è±¡å…¨éƒ¨éƒ½å¤„ç†äº†ï¼Œè€ŒJavaScriptæ ‡å‡†å†…ç½®å¯¹è±¡Dateçš„ä½¿ç”¨æ˜¯é€šè¿‡newè¿ç®—ç¬¦è°ƒç”¨çš„å®ä¾‹å¯¹è±¡ï¼Œå®ä¾‹å¯¹è±¡ä¹Ÿæ˜¯å¯¹è±¡ï¼Œä¹Ÿä¼šè¢«transformBigIntæ–¹æ³•ä¸€å¹¶å¤„ç†ï¼Œæ‰€ä»¥åœ¨åˆ¤æ–­å¯¹è±¡çš„å†…éƒ¨é€»è¾‘ä¸­è¿˜éœ€è¦åˆ¤æ–­æ˜¯å¦æ˜¯Dateç±»å‹ï¼Œè‹¥ä¸ºDateç±»å‹åˆ™ç›´æ¥åŸè·¯è¿”å›ï¼Œä¸å¤„ç†ã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span> data === <span class="hljs-string">'object'</span> &amp;&amp; data !== <span class="hljs-literal">null</span>){
  <span class="hljs-keyword">if</span>(data <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Date</span>){
    <span class="hljs-keyword">return</span> data
  }
  <span class="hljs-keyword">return</span> <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">fromEntries</span>(<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">entries</span>(data).<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">[key, value]</span>) =&gt;</span> [key, <span class="hljs-title function_">transformBigInt</span>(value)]));
}
</code></pre>
<p>å®Œæ•´çš„å…¨å±€æ‹¦æˆªå™¨å¦‚ä¸‹ä»£ç æ‰€ç¤ºï¼Œåç»­è‹±è¯­AIé¡¹ç›®ä¸­ï¼Œä¼šå°†è¯¥å…¨å±€æ‹¦æˆªå™¨ç›´æ¥æ‹¿è¿‡å»ä½¿ç”¨ã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// src/interceptor/interceptor.interceptor.tsæ–‡ä»¶</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">CallHandler</span>, <span class="hljs-title class_">ExecutionContext</span>, <span class="hljs-title class_">Injectable</span>, <span class="hljs-title class_">NestInterceptor</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Observable</span>, map } <span class="hljs-keyword">from</span> <span class="hljs-string">'rxjs'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Request</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'express'</span>;
<span class="hljs-comment">//åŒæ­¥ å¼‚æ­¥ then catch -&gt;æ•°æ®æµ-&gt;pipe -&gt; map filter -&gt; è¿”å›</span>



<span class="hljs-keyword">const</span> <span class="hljs-title function_">transformBigInt</span> = (<span class="hljs-params">data: <span class="hljs-built_in">any</span></span>) =&gt; {
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> data === <span class="hljs-string">'bigint'</span>) {
    <span class="hljs-keyword">return</span> data.<span class="hljs-title function_">toString</span>();
  }
  <span class="hljs-keyword">if</span>(<span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(data)){
    <span class="hljs-keyword">return</span> data.<span class="hljs-title function_">map</span>(transformBigInt);
  }
  <span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span> data === <span class="hljs-string">'object'</span> &amp;&amp; data !== <span class="hljs-literal">null</span>){
    <span class="hljs-keyword">if</span>(data <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Date</span>){
      <span class="hljs-keyword">return</span> data
    }
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">fromEntries</span>(<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">entries</span>(data).<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">[key, value]</span>) =&gt;</span> [key, <span class="hljs-title function_">transformBigInt</span>(value)]));
  }
  <span class="hljs-keyword">return</span> data;
};

<span class="hljs-meta">@Injectable</span>()
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">InterceptorInterceptor</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">NestInterceptor</span> {
  <span class="hljs-title function_">intercept</span>(<span class="hljs-attr">context</span>: <span class="hljs-title class_">ExecutionContext</span>, <span class="hljs-attr">next</span>: <span class="hljs-title class_">CallHandler</span>): <span class="hljs-title class_">Observable</span>&lt;<span class="hljs-built_in">any</span>&gt; {
    <span class="hljs-keyword">const</span> ctx = context.<span class="hljs-title function_">switchToHttp</span>();
    <span class="hljs-keyword">const</span> request = ctx.<span class="hljs-property">getRequest</span>&lt;<span class="hljs-title class_">Request</span>&gt;();
    <span class="hljs-keyword">return</span> next.<span class="hljs-title function_">handle</span>().<span class="hljs-title function_">pipe</span>(<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {
      <span class="hljs-keyword">return</span> {
        <span class="hljs-attr">timestmap</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">toISOString</span>(),
        <span class="hljs-attr">data</span>: <span class="hljs-title function_">transformBigInt</span>(data),
        <span class="hljs-attr">path</span>: request.<span class="hljs-property">url</span>,
        <span class="hljs-attr">message</span>: <span class="hljs-string">'success'</span>,<span class="hljs-comment">//ä¸šåŠ¡é€»è¾‘è‡ªå®šä¹‰</span>
        <span class="hljs-attr">code</span>: <span class="hljs-number">200</span>,<span class="hljs-comment">//ä¸šåŠ¡é€»è¾‘è‡ªå®šä¹‰</span>
        <span class="hljs-attr">success</span>: <span class="hljs-literal">true</span>,
      };
    }));
  }
}
</code></pre>
<p>æ¥ä¸‹æ¥å¯¹å¼‚å¸¸ä¹Ÿæ ¼å¼åŒ–ç»Ÿä¸€å¤„ç†ä¸€ä¸‹ï¼Œé€»è¾‘æ€è·¯ä¸å…¨å±€æ‹¦æˆªå™¨ç±»ä¼¼ã€‚å½“å‰ç«¯å‘èµ·ä¸ç¬¦åˆè§„èŒƒå’Œè¦æ±‚çš„ç½‘ç»œè¯·æ±‚ï¼Œåç«¯å°±ä¼šè¿”å›å¼‚å¸¸ä¿¡æ¯ï¼Œæ–¹ä¾¿å‰ç«¯å»ç»Ÿä¸€å¤„ç†ã€‚</p>
<p><img src="http://tuchuang.xiaoyu2002.cn/picture/image-20251212235546507.png" alt="image-20251212235546507" loading="lazy"/></p>
<p align="center">
 <b> å›¾3-5 å¼‚å¸¸æƒ…å†µçš„å¤„ç†</b>
</p>
<p>æ­¤æ—¶æˆ‘ä»¬éœ€è¦æ€»ç»“nestå‘½ä»¤çš„è¡¨1-2ï¼Œæ‰¾åˆ°filterå‘½ä»¤æ¥ç”Ÿæˆä¸€ä¸ªè¿‡æ»¤å™¨ã€‚å‘½ä»¤æ˜¯ï¼šnest g f &lt;è¿‡æ»¤å™¨åç§°&gt;ï¼Œæˆ‘ä»¬å°±é€šè¿‡nest g f exceptionFilteræ¥ç”Ÿæˆä¸€ä»½è¿‡æ»¤å™¨å§ã€‚æˆåŠŸåœ¨srcæ–‡ä»¶å¤¹ä¸‹åˆ›å»ºexception-filteræ–‡ä»¶å¤¹å’Œexception-filteræ–‡ä»¶å¤¹ä¸‹çš„exception-filter.filter.tsæ–‡ä»¶ï¼Œè¿™äº›ç”Ÿæˆæ–‡ä»¶çš„å‘½åè§„åˆ™éƒ½æ˜¯ä¸€è‡´çš„ï¼Œä¸å†èµ˜è¿°ã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// src/exception-filter/exception-filter.filter.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ArgumentsHost</span>, <span class="hljs-title class_">Catch</span>, <span class="hljs-title class_">ExceptionFilter</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>;

<span class="hljs-meta">@Catch</span>()
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ExceptionFilterFilter</span>&lt;T&gt; <span class="hljs-keyword">implements</span> <span class="hljs-title class_">ExceptionFilter</span> {
  <span class="hljs-keyword">catch</span>(<span class="hljs-attr">exception</span>: T, <span class="hljs-attr">host</span>: <span class="hljs-title class_">ArgumentsHost</span>) {}
}
</code></pre>
<p>é€šè¿‡ä»¥ä¸Šexception-filter.filter.tsæ–‡ä»¶çš„ä»£ç ï¼Œæˆ‘ä»¬å‘ç°å¼‚å¸¸å¤„ç†@Catch()è£…é¥°å™¨æ˜¯ç©ºçš„ï¼Œç©ºçš„è¡¨ç¤ºå¤„ç†æ‰€æœ‰çš„å¼‚å¸¸æ“ä½œï¼ŒåŒ…æ‹¬éHTTPè¯·æ±‚éƒ½ä¼šå¤„ç†ï¼Œä½†æˆ‘å¸Œæœ›è¿™ä¸ªä¸šåŠ¡åªå¤„ç†å’ŒHTTPç›¸å…³çš„å¼‚å¸¸å°±å¯ä»¥äº†ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦ä»@nestjs/commonä¸­å¼•å…¥ä¸€ä¸ªHttpExceptionç±»ï¼Œç„¶åè®©@Catch()è£…é¥°å™¨å»ç»§æ‰¿HttpExceptionç±»å°±å¯ä»¥äº†ã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// src/exception-filter/exception-filter.filter.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ArgumentsHost</span>, <span class="hljs-title class_">Catch</span>, <span class="hljs-title class_">ExceptionFilter</span>, <span class="hljs-title class_">HttpException</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>;

<span class="hljs-meta">@Catch</span>(<span class="hljs-title class_">HttpException</span>)
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ExceptionFilterFilter</span>&lt;T <span class="hljs-keyword">extends</span> <span class="hljs-title class_">HttpException</span>&gt; <span class="hljs-keyword">implements</span> <span class="hljs-title class_">ExceptionFilter</span> {
  <span class="hljs-keyword">catch</span>(<span class="hljs-attr">exception</span>: T, <span class="hljs-attr">host</span>: <span class="hljs-title class_">ArgumentsHost</span>) {}
}
</code></pre>
<p>åœ¨è¿™é‡Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¿™ä¸ªå¾ˆæœ‰æ„æ€çš„è®¾è®¡ç†å¿µï¼Œé€šè¿‡Nestå‘½ä»¤ç”Ÿæˆçš„å†…å®¹ï¼Œå®ƒå¸Œæœ›æˆ‘ä»¬éƒ½èƒ½ç”¨å¾—ä¸Šï¼Œè¿™ç§æ€æƒ³å’ŒTypeScriptæ‰€æƒ³è¡¨è¾¾çš„å«ä¹‰æ˜¯ä¸€è‡´çš„ï¼Œåªå†™ç”¨å¾—ä¸Šä¸”å¿…è¦çš„éƒ¨åˆ†ã€‚å› æ­¤åœ¨é€šè¿‡Nest CLI åœ¨ç”Ÿæˆè¿‡æ»¤å™¨æ¨¡æ¿æ—¶ï¼Œä¼šä¼šé»˜è®¤ä½¿ç”¨ @Catch()ï¼ˆä¸å¸¦ä»»ä½•å‚æ•°ï¼‰ï¼Œç¤ºä¾‹æ€§åœ°å±•ç¤ºå¦‚ä½•æ•è·æ‰€æœ‰å¼‚å¸¸ã€‚ä½†å®ƒåªæ˜¯ä¸€ä¸ªç±»æ¨¡æ¿ï¼Œéœ€è¦æˆ‘ä»¬æ‰‹åŠ¨æŠŠå®ƒæ³¨å†Œä¸ºå…¨å±€è¿‡æ»¤å™¨ï¼Œæˆ–è€…åœ¨æ§åˆ¶å™¨ä¸Šä½¿ç”¨ã€‚</p>
<p>åªæœ‰å½“æˆ‘ä»¬æ˜ç¡®åœ¨@Catch()ä¸­æŒ‡å®šå…·ä½“çš„å¼‚å¸¸ç±»å‹ï¼ˆå¦‚ @Catch(HttpException) æˆ– @Catch(WsException)ï¼‰ï¼Œè¿‡æ»¤å™¨æ‰ä¼šä»â€œæ•è·æ‰€æœ‰å¼‚å¸¸â€è½¬å˜ä¸ºâ€œä»…å¤„ç†ç‰¹å®šç±»å‹çš„å¼‚å¸¸â€ã€‚å¦‚å›¾3-6æ‰€ç¤ºçš„å®˜æ–¹æ–‡æ¡£ä¹Ÿè¯´æ˜äº†ä¸åŒåè®®å±‚ï¼ˆHTTP ä¸ WebSocketï¼‰å¯¹åº”çš„å¼‚å¸¸ç±»å‹ä¸åŒï¼Œå› æ­¤éœ€è¦åœ¨ @Catch() ä¸­æ˜ç¡®æŒ‡å®šå¯¹åº”çš„å¼‚å¸¸ç±»å‹ã€‚</p>
<p><img src="http://tuchuang.xiaoyu2002.cn/picture/image-20251212235819873.png" alt="image-20251212235819873" loading="lazy"/></p>
<p align="center">
 <b> å›¾3-6 HTTPå¼‚å¸¸è¿‡æ»¤å±‚çš„è¯´æ˜</b>
</p>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬æ¥å¯¹å¼‚å¸¸å¤„ç†æƒ…å†µè¿›è¡Œç»Ÿä¸€çš„æ ¼å¼åŒ–å¤„ç†ã€‚è¿™é‡Œçš„codeï¼ˆå¼‚å¸¸çŠ¶æ€ç ï¼‰å°±ä¸é‡‡ç”¨æˆ‘ä»¬è‡ªå®šä¹‰çš„ï¼Œè€Œæ˜¯ä½¿ç”¨exceptionå†…éƒ¨å®šä¹‰çš„çŠ¶æ€ç ï¼Œå› ä¸ºNestå†…ç½®çš„HttpExceptionå·²ç»ä¸ºæ‰€æœ‰å¸¸è§é”™è¯¯å®šä¹‰äº†æ ‡å‡†åŒ–çš„çŠ¶æ€ç ï¼ˆå¦‚ 400ã€401ã€403ã€404ã€500 ç­‰ï¼‰ï¼Œè¿™äº›çŠ¶æ€ç ç¬¦åˆ HTTP åè®®æœ¬èº«çš„è¯­ä¹‰ã€‚ç›´æ¥ä½¿ç”¨exception.getStatus()å¯ä»¥ç¡®ä¿æœåŠ¡ç«¯è¿”å›çš„é”™è¯¯ä¿¡æ¯åœ¨ç½‘ç»œå±‚é¢æ˜¯å¯é¢„æµ‹å’Œé€šç”¨çš„ã€‚Nest.jså†…ç½®å¼‚å¸¸å¤„ç†å±‚è¯´æ˜å¦‚å›¾3-7æ‰€ç¤ºã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/33e5d0ba58c245529af9984810ac5730~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgWGlhb1l1MjAwMg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767933209&amp;x-signature=7aohKbCto4B%2FWcfA6y%2BcV3QWauY%3D" alt="image-20251213000123007" loading="lazy"/></p>
<p align="center">
 <b> å›¾3-7 Nest.jså†…ç½®å¼‚å¸¸å¤„ç†å±‚è¯´æ˜</b>
</p>
<p>å½“tokenè¿‡æœŸäº†ï¼Œexception.getStatus()ä¼šè‡ªåŠ¨è¯†åˆ«å¹¶è®¾ç½®æˆ401çŠ¶æ€ç ï¼Œæ²¡æœ‰æƒé™åˆ™403çŠ¶æ€ç ã€‚å› æ­¤exception.getStatus()ä¼šè‡ªåŠ¨åŒ–çš„æ ¹æ®å®é™…æƒ…å†µå»è°ƒæ•´ï¼Œéå¸¸æ–¹ä¾¿ã€‚å¯¹åº”çš„è¯¦ç»†è®²è§£å¯é˜…è¯»Nest.jsçš„å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.nestjs.com%2Fexception-filters" target="_blank" title="https://docs.nestjs.com/exception-filters" ref="nofollow noopener noreferrer">Exception filters | NestJS - A progressive Node.js framework</a>ã€‚</p>
<p>å¦‚æœå†è‡ªå®šä¹‰ä¸€å¥—error codeï¼Œå°±ç­‰äºéœ€è¦ç»´æŠ¤ä¸¤å¥—é”™è¯¯ä½“ç³»ï¼šHTTP çŠ¶æ€ç  + æˆ‘ä»¬è‡ªå·±é¢å¤–è®¾è®¡çš„ä¸šåŠ¡é”™è¯¯ç ï¼Œè¿™ä¼šé€ æˆé‡å¤åŠ³åŠ¨ã€æ–‡æ¡£è´Ÿæ‹…åŠ é‡ä»¥åŠç»´æŠ¤éš¾åº¦ä¸Šå‡ã€‚è€Œç›´æ¥ä½¿ç”¨ HttpException å†…éƒ¨çš„çŠ¶æ€ç å¯ä»¥ä¿æŒå¼‚å¸¸æ•è·é€»è¾‘ä¸æ¡†æ¶ä¸€è‡´ï¼Œä¸éœ€è¦é¢å¤–é‡å¤é€ è½®å­ã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// src/exception-filter/exception-filter.filter.tsæ–‡ä»¶</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ArgumentsHost</span>, <span class="hljs-title class_">Catch</span>, <span class="hljs-title class_">ExceptionFilter</span>,<span class="hljs-title class_">HttpException</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Request</span>, <span class="hljs-title class_">Response</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'express'</span>;
<span class="hljs-meta">@Catch</span>(<span class="hljs-title class_">HttpException</span>)
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ExceptionFilterFilter</span>&lt;T <span class="hljs-keyword">extends</span> <span class="hljs-title class_">HttpException</span>&gt; <span class="hljs-keyword">implements</span> <span class="hljs-title class_">ExceptionFilter</span> {
  <span class="hljs-keyword">catch</span>(<span class="hljs-attr">exception</span>: T, <span class="hljs-attr">host</span>: <span class="hljs-title class_">ArgumentsHost</span>) {
    <span class="hljs-keyword">const</span> ctx = host.<span class="hljs-title function_">switchToHttp</span>()
    <span class="hljs-keyword">const</span> request = ctx.<span class="hljs-property">getRequest</span>&lt;<span class="hljs-title class_">Request</span>&gt;()
    <span class="hljs-keyword">const</span> response = ctx.<span class="hljs-property">getResponse</span>&lt;<span class="hljs-title class_">Response</span>&gt;()
    <span class="hljs-keyword">return</span> response.<span class="hljs-title function_">status</span>(exception.<span class="hljs-title function_">getStatus</span>()).<span class="hljs-title function_">json</span>({
      <span class="hljs-attr">timestamp</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">toISOString</span>(),
      <span class="hljs-attr">path</span>: request.<span class="hljs-property">url</span>,
      <span class="hljs-attr">message</span>: exception.<span class="hljs-property">message</span>,
      <span class="hljs-attr">code</span>: exception.<span class="hljs-title function_">getStatus</span>(),
      <span class="hljs-attr">success</span>: <span class="hljs-literal">false</span>,
    })
  }
}
</code></pre>
<p>æœ€åï¼Œè¿‡æ»¤å™¨å’Œæ‹¦æˆªå™¨ä¸€æ ·ï¼Œåœ¨main.tsæ–‡ä»¶ä¸­å…¨å±€æ³¨å†Œä¸€ä¸‹ï¼Œåˆ™å¯ä»¥ä½œç”¨äºæ•´ä¸ªé¡¹ç›®çš„å¼‚å¸¸æƒ…å†µå¤„ç†ã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// src/main.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">NestFactory</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/core'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">AppModule</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./app.module'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">InterceptorInterceptor</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./interceptor/interceptor.interceptor'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ExceptionFilterFilter</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./exception-filter/exception-filter.filter'</span>;
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">bootstrap</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> app = <span class="hljs-keyword">await</span> <span class="hljs-title class_">NestFactory</span>.<span class="hljs-title function_">create</span>(<span class="hljs-title class_">AppModule</span>);
  app.<span class="hljs-title function_">useGlobalInterceptors</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">InterceptorInterceptor</span>());
  app.<span class="hljs-title function_">useGlobalFilters</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ExceptionFilterFilter</span>());
  <span class="hljs-keyword">await</span> app.<span class="hljs-title function_">listen</span>(process.<span class="hljs-property">env</span>.<span class="hljs-property">PORT</span> ?? <span class="hljs-number">3000</span>);
}

<span class="hljs-title function_">bootstrap</span>();
</code></pre>
<p>å…¨å±€å¼‚å¸¸æƒ…å†µçš„è¿‡æ»¤å¤„ç†æ•ˆæœå¦‚å›¾3-8æ‰€ç¤ºã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3f3f288ad5fc45efaf825369e0d7199d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgWGlhb1l1MjAwMg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767933209&amp;x-signature=boCAIoPtCAlPryNFQN9ZKYtuxC8%3D" alt="image-20251212235417767" loading="lazy"/></p>
<p align="center">
 <b> å›¾3-8 å…¨å±€å¼‚å¸¸æƒ…å†µçš„è¿‡æ»¤å¤„ç†æ•ˆæœ</b>
</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç¬¬4ç«  Nest.jsä¸šåŠ¡åˆå¹¶]]></title>    <link>https://juejin.cn/post/7590128405351596032</link>    <guid>https://juejin.cn/post/7590128405351596032</guid>    <pubDate>2026-01-03T05:40:08.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7590128405351596032" data-draft-id="7590128405351579648" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç¬¬4ç«  Nest.jsä¸šåŠ¡åˆå¹¶"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-03T05:40:08.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="XiaoYu2002"/> <meta itemprop="url" content="https://juejin.cn/user/251124329220663"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç¬¬4ç«  Nest.jsä¸šåŠ¡åˆå¹¶
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/251124329220663/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    XiaoYu2002
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-03T05:40:08.000Z" title="Sat Jan 03 2026 05:40:08 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;color:rgba(46,36,36,.87);overflow-x:hidden}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{margin-bottom:5px;font-size:30px;font-weight:500}.markdown-body h1:before{content:"#";margin-right:10px;color:#1976d2}.markdown-body h2{font-size:28px;font-weight:400;border-left:5px solid #454545;margin-top:20px;padding-left:10px;transition:all .3s ease-in-out}.markdown-body h2:hover{border-color:#1976d2}.markdown-body h3{font-size:24px;font-weight:400;margin-top:15px;padding-bottom:0}.markdown-body h4{font-size:20px;font-weight:500}.markdown-body h5{font-size:16px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body h2:first-letter,.markdown-body h3:first-letter,.markdown-body p:first-letter{text-transform:capitalize}.markdown-body em{text-emphasis:dot;text-emphasis-position:under}.markdown-body img{display:block;margin:0 auto!important;max-width:100%;border-radius:2px;box-shadow:0 2px 4px -1px rgba(0,0,0,.2),0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12)!important}.markdown-body hr{position:relative;width:98%;height:1px;border:none;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,#ddd,#999,#ddd);overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background:#fff;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center}.markdown-body code{font-weight:900;word-break:break-word;border-radius:2px;overflow-x:auto;font-size:.87em;padding:.065em .4em;background-color:#fbe5e1;color:#c0341d}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;border-radius:0 4px}.markdown-body pre&gt;code{font-weight:400;font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{margin:0 4px;text-decoration:none;color:#027fff;transition:all .3s ease-in-out;padding-bottom:4px;border-bottom:2px solid transparent}.markdown-body a:after{content:"";display:inline-block;width:18px;height:18px;margin-left:4px;vertical-align:middle;background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMiIgaGVpZ2h0PSIyMiI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIiBzdHJva2U9IiMwMjdGRkYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCI+PHBhdGggZD0iTTkuODE1IDYuNDQ4bDEuOTM2LTEuOTM2YzEuMzM3LTEuMzM2IDMuNTgtMS4yNTkgNS4wMTMuMTczIDEuNDMyIDEuNDMyIDEuNTEgMy42NzYuMTczIDUuMDEzbC0xLjQ1MiAxLjQ1Mi0uOTY4Ljk2OGMtMS4zMzcgMS4zMzYtMy41ODEgMS4yNTktNS4wMTMtLjE3MyIvPjxwYXRoIGQ9Ik0xMS4yNjcgMTUuMzY3bC0xLjkzNiAxLjkzNmMtMS4zMzYgMS4zMzctMy41OCAxLjI2LTUuMDEyLS4xNzMtMS40MzItMS40MzItMS41MS0zLjY3Ni0uMTczLTUuMDEybDEuNDUyLTEuNDUyLjk2OC0uOTY4YzEuMzM2LTEuMzM3IDMuNTgtMS4yNiA1LjAxMi4xNzMiLz48L2c+PC9zdmc+);background-size:cover;background-repeat:no-repeat}.markdown-body a:hover{border-color:#027fff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body a.footnote-backref:after,.markdown-body a.footnote-ref:after,.markdown-body sup a:after{display:none!important}.markdown-body table{margin:0 auto 10px;font-size:12px;width:auto;max-width:100%;overflow:auto;border:2px solid #c6c6c6}.markdown-body table img{box-shadow:none!important}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body del{color:rgba(0,0,0,.6)}.markdown-body blockquote{position:relative;color:#666;padding:5px 23px 1px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:hsla(0,0%,78.4%,.12);transition:all .2s ease-in-out}.markdown-body blockquote:hover{border-color:#1976d2}.markdown-body blockquote:after,.markdown-body blockquote:before{position:absolute;font-size:24px;font-weight:800;line-height:24px;color:#cbcbcb;opacity:.6}.markdown-body blockquote:before{content:"â€œ";top:4px;left:6px}.markdown-body blockquote:after{content:"â€";right:8px;bottom:-8px}.markdown-body blockquote&gt;p,.markdown-body blockquote blockquote{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body details{outline:none;border:none;border-left:4px solid #1976d2;padding-left:10px;margin-left:4px}.markdown-body details summary{cursor:pointer;border:none;outline:none;background:#fff;margin:0 -17px}.markdown-body details summary:hover::-webkit-details-marker{color:#1976d2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ç¬¬4ç«  Nest.jsä¸šåŠ¡åˆå¹¶</h2>
<p>åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œä¸åŒçš„ä¸šåŠ¡æ“ä½œéœ€è¦æ˜ç¡®çš„åé¦ˆä¿¡æ¯ã€‚ä¾‹å¦‚ï¼š</p>
<ul>
<li>ç™»å½•æ“ä½œè¿”å›æ¶ˆæ¯ä¸ºã€Œç™»å½•æˆåŠŸã€ï¼ŒçŠ¶æ€ç ä¸º 1ã€‚</li>
<li>æ³¨å†Œæ“ä½œè¿”å›æ¶ˆæ¯ä¸ºã€Œæ³¨å†ŒæˆåŠŸã€ï¼ŒçŠ¶æ€ç ä¸º 2ã€‚</li>
</ul>
<p><strong>çŠ¶æ€ç </strong> ä½œä¸ºä¸šåŠ¡é€»è¾‘åˆ¤æ–­çš„æ“ä½œæ ‡è¯†ï¼Œæ˜¯ä¸€ä¸ªæ•°å­—æˆ–å­—ç¬¦ä¸²æ ‡è¯†ç¬¦ã€‚ä¸åŒæ•°å€¼ä»£è¡¨ä¸åŒçš„ä¸šåŠ¡å«ä¹‰ï¼ˆå¦‚1è¡¨ç¤ºç™»å½•æˆåŠŸã€2è¡¨ç¤ºæ³¨å†ŒæˆåŠŸï¼‰ï¼Œå‰ç«¯æˆ–è°ƒç”¨æ–¹å¯æ ¹æ®å…·ä½“æ•°å€¼æ‰§è¡Œç›¸åº”çš„é€»è¾‘åˆ†æ”¯ã€‚<strong>ä¸šåŠ¡æè¿°</strong> åˆ™é¢å‘ç”¨æˆ·æˆ–å¼€å‘è€…ï¼Œç”¨è‡ªç„¶è¯­è¨€æ¸…æ™°ä¼ è¾¾æ“ä½œç»“æœï¼Œæä¾›ç›´è§‚çš„åé¦ˆä¿¡æ¯ï¼Œè¾…åŠ©ç†è§£çŠ¶æ€ç å¯¹åº”çš„å…·ä½“ä¸šåŠ¡åœºæ™¯ã€‚</p>
<p>åœ¨å…¨å±€æ‹¦æˆªå™¨çš„ä½¿ç”¨ä¸­ï¼Œmessage å’Œ code è¿™ä¸¤ä¸ªå‚æ•°éœ€è¦æ ¹æ®ä¸šåŠ¡éœ€æ±‚è¿›è¡Œè‡ªå®šä¹‰ã€‚ä¸‹é¢å°†ä»‹ç»å¦‚ä½•åœ¨ Nest.js ä¸­å¯¹è¿™ä¸¤ä¸ªå‚æ•°ï¼Œä»¥åŠæ›´å¤šåŒç±»å‚æ•°è¿›è¡Œè§„èŒƒåŒ–ç®¡ç†ã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// src/interceptor/interceptor.interceptor.ts</span>
<span class="hljs-keyword">return</span> {
  <span class="hljs-attr">timestmap</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">toISOString</span>(),
  <span class="hljs-attr">data</span>: <span class="hljs-title function_">transformBigInt</span>(data),
  <span class="hljs-attr">path</span>: request.<span class="hljs-property">url</span>,
  <span class="hljs-attr">message</span>: <span class="hljs-string">'success'</span>,<span class="hljs-comment">//ä¸šåŠ¡é€»è¾‘è‡ªå®šä¹‰</span>
  <span class="hljs-attr">code</span>: <span class="hljs-number">200</span>,<span class="hljs-comment">//ä¸šåŠ¡é€»è¾‘è‡ªå®šä¹‰</span>
  <span class="hljs-attr">success</span>: <span class="hljs-literal">true</span>,
};
</code></pre>
<p>è¦å¯¹å…¨å±€æ‹¦æˆªå™¨çš„ç»Ÿä¸€è¿”å›æ•°æ®æ ¼å¼ä¸­çš„ message å’Œ code è¿›è¡Œè‡ªå®šä¹‰ï¼Œåº”ä»ä¸“é—¨çš„ä¸šåŠ¡å®šä¹‰æ–‡ä»¶ä¸­å¼•å…¥è‡ªå®šä¹‰çš„ä¸šåŠ¡çŠ¶æ€ç å’Œæè¿°ä¿¡æ¯ï¼Œç„¶åä¼ é€’ç»™ message å’Œ code å‚æ•°ã€‚</p>
<p>åœ¨è‡ªå®šä¹‰å‚æ•°æ—¶ï¼Œæœ‰ä¸€ä¸ªé‡è¦åŸåˆ™ï¼šmessage å’Œ code çš„è‡ªå®šä¹‰æ•°æ®éœ€è¦ä¸ä¸šåŠ¡é€»è¾‘å±‚åˆ†ç¦»ã€‚è¿™äº›æ•°æ®åº”ä½œä¸ºçº¯ç²¹çš„é…ç½®ä¿¡æ¯ä½¿ç”¨ï¼Œç±»ä¼¼äº JSON é…ç½®æ–‡ä»¶ã€‚ä¸šåŠ¡å±‚åˆ™å»ºç«‹åœ¨ç»Ÿä¸€çš„ä¸šåŠ¡è§„èŒƒåŸºç¡€ä¸Šè¿›è¡Œè¿›ä¸€æ­¥å°è£…ã€‚</p>
<p>é¦–å…ˆåˆ›å»ºä¸€ä¸ªå“åº”æ ¼å¼æ¨¡å—ï¼ˆresponse moduleï¼‰å’ŒæœåŠ¡ï¼ˆresponse serviceï¼‰ï¼Œç”¨äºç»Ÿä¸€å¤„ç†ä¸šåŠ¡å“åº”ã€‚é€šè¿‡ Nest CLI å‘½ä»¤ç”Ÿæˆçš„ response.service.ts æ–‡ä»¶ä¼šè‡ªåŠ¨å…³è”åˆ° response.module.ts æ–‡ä»¶ä¸­ã€‚</p>
<pre><code class="hljs language-ts" lang="ts">nest g mo response
nest g s response
</code></pre>
<p>åœ¨ src ç›®å½•ä¸‹åˆ›å»º business æ–‡ä»¶å¤¹ï¼Œå¹¶åœ¨å…¶ä¸­åˆ›å»º index.ts æ–‡ä»¶ã€‚è¯¥æ–‡ä»¶ä¸“é—¨å­˜æ”¾è‡ªå®šä¹‰çš„ä¸šåŠ¡çŠ¶æ€ç å’Œæè¿°ä¿¡æ¯ï¼Œæˆ‘ä»¬åªå…³å¿ƒæ¯ä¸ªä¸šåŠ¡æ“ä½œå¯¹åº”çš„çŠ¶æ€ç å’Œæ¶ˆæ¯å†…å®¹ã€‚åç»­æ–°å¢ä¸šåŠ¡éœ€æ±‚æ—¶ï¼Œåªéœ€åœ¨æ­¤æ–‡ä»¶ä¸­æ·»åŠ ç›¸åº”çš„çŠ¶æ€ç å’Œæ¶ˆæ¯ã€‚</p>
<p>æ³¨æ„ï¼šä¸šåŠ¡å­—æ®µå‘½åé€šå¸¸é‡‡ç”¨å¤§å†™å­—æ¯å’Œä¸‹åˆ’çº¿ç»„åˆçš„æ ¼å¼ï¼Œå³ã€ŒåŠŸèƒ½_çŠ¶æ€ã€çš„è¡¨è¾¾æ–¹å¼ï¼Œå¦‚ LOGIN_SUCCESSã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// src/business/index.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> business = {
  <span class="hljs-attr">LOGIN_SUCCESS</span>: {
    <span class="hljs-attr">code</span>: <span class="hljs-number">1</span>,
    <span class="hljs-attr">message</span>: <span class="hljs-string">'ç™»å½•æˆåŠŸ'</span>
  },
  <span class="hljs-attr">LOGIN_ERROR</span>: {
    <span class="hljs-attr">code</span>: <span class="hljs-number">2</span>,
    <span class="hljs-attr">message</span>: <span class="hljs-string">'ç™»å½•å¤±è´¥'</span>
  },
  <span class="hljs-attr">REGISTER_SUCCESS</span>: {
    <span class="hljs-attr">code</span>: <span class="hljs-number">2</span>,
    <span class="hljs-attr">message</span>: <span class="hljs-string">'æ³¨å†ŒæˆåŠŸ'</span>
  },
}
</code></pre>
<p>åœ¨ response ç›®å½•çš„ response.service.ts æ–‡ä»¶ä¸­ç¼–å†™å…·ä½“çš„å“åº”æ ¼å¼é€»è¾‘ï¼Œå®šä¹‰æ“ä½œæˆåŠŸå’Œæ“ä½œå¤±è´¥æ—¶éœ€è¦è¿”å›çš„æ•°æ®ç»“æ„ã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// src/response/response.service.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Injectable</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>;

<span class="hljs-meta">@Injectable</span>()
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ResponseService</span> {
  <span class="hljs-title function_">success</span>(<span class="hljs-params">data: <span class="hljs-built_in">any</span> = <span class="hljs-literal">null</span>, message: <span class="hljs-built_in">string</span> = <span class="hljs-string">'æ“ä½œæˆåŠŸ'</span>, code: <span class="hljs-built_in">number</span> = <span class="hljs-number">200</span></span>) {
    <span class="hljs-keyword">return</span> {
      data,
      message,
      code
    }
  }
  <span class="hljs-title function_">error</span>(<span class="hljs-params">message: <span class="hljs-built_in">string</span> = <span class="hljs-string">'æ“ä½œå¤±è´¥'</span>, code: <span class="hljs-built_in">number</span> = <span class="hljs-number">500</span></span>) {
    <span class="hljs-keyword">return</span> {
      message,
      code
    }
  }
}
</code></pre>
<p>å¦‚æœæˆ‘ä»¬æƒ³è¦ä½¿ç”¨è‡ªå®šä¹‰çš„ä¸šåŠ¡çŠ¶æ€ç ï¼Œè¦å¦‚ä½•ä½¿ç”¨ï¼Ÿå‡è®¾è¦åœ¨useræ¨¡å—çš„ä¸šåŠ¡å±‚ä¸­ä½¿ç”¨ã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// src/user/user.service.tsï¼ˆä¸šåŠ¡å±‚ï¼‰</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Injectable</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">CreateUserDto</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./dto/create-user.dto'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">UpdateUserDto</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./dto/update-user.dto'</span>;

<span class="hljs-meta">@Injectable</span>()
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserService</span> {
  <span class="hljs-title function_">create</span>(<span class="hljs-params">createUserDto: CreateUserDto</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-string">'This action adds a new user'</span>;
  }

  <span class="hljs-title function_">findAll</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-string">`This action returns all user`</span>;
  }
 	<span class="hljs-comment">// çœç•¥...</span>
}
</code></pre>
<p>å‡è®¾éœ€è¦åœ¨ user æ¨¡å—çš„ä¸šåŠ¡å±‚ä¸­ä½¿ç”¨è‡ªå®šä¹‰ä¸šåŠ¡çŠ¶æ€ç ï¼Œæ“ä½œæ­¥éª¤å¦‚ä¸‹ï¼š</p>
<p>ï¼ˆ1ï¼‰å¼•å…¥ä¾èµ–æ–‡ä»¶ï¼šåŒæ—¶å¼•å…¥ä¸šåŠ¡å®šä¹‰æ–‡ä»¶å’Œå“åº”æ ¼å¼æ–‡ä»¶ã€‚</p>
<p>ï¼ˆ2ï¼‰ä¾èµ–æ³¨å…¥ï¼šåœ¨ UserService ç±»ä¸­æ³¨å…¥ ResponseService ç±»ã€‚</p>
<p>ï¼ˆ3ï¼‰ä½¿ç”¨å“åº”æ ¼å¼ï¼šåœ¨ findAll() æ–¹æ³•ä¸­ä½¿ç”¨ ResponseService ç±»ï¼ŒæŒ‰ç…§ dataã€message å’Œ code çš„é¡ºåºä¼ å…¥æ•°æ®ã€‚</p>
<p>ï¼ˆ4ï¼‰å¼•ç”¨ä¸šåŠ¡å®šä¹‰ï¼šmessage å’Œ code ä» business ä¸šåŠ¡æ–‡ä»¶ä¸­è¯»å–ï¼Œæœ¬æ¬¡ã€Œç™»å½•æˆåŠŸæ“ä½œã€ä½¿ç”¨ä¸šåŠ¡å­—æ®µ LOGIN_SUCCESSã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// src/user/user.service.tsï¼ˆä¸šåŠ¡å±‚ï¼‰</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Injectable</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">CreateUserDto</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./dto/create-user.dto'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ResponseService</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'src/response/response.service'</span>;
<span class="hljs-keyword">import</span> { business } <span class="hljs-keyword">from</span> <span class="hljs-string">'src/business'</span>;
<span class="hljs-meta">@Injectable</span>()
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserService</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> responseService: ResponseService</span>) { }
  <span class="hljs-title function_">create</span>(<span class="hljs-params">createUserDto: CreateUserDto</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-string">'This action adds a new user'</span>;
  }

  <span class="hljs-title function_">findAll</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// ç™»å½•æˆåŠŸçš„æ¶ˆæ¯å†…å®¹å’Œä¸šåŠ¡ç </span>
    <span class="hljs-keyword">const</span> message = business.<span class="hljs-property">LOGIN_SUCCESS</span>.<span class="hljs-property">message</span>;
    <span class="hljs-keyword">const</span> code = business.<span class="hljs-property">LOGIN_SUCCESS</span>.<span class="hljs-property">code</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">responseService</span>.<span class="hljs-title function_">success</span>(<span class="hljs-string">'This action returns all user'</span>, message, code);
  }
}
</code></pre>
<p>æ­¤æ—¶å¯åŠ¨é¡¹ç›®ï¼Œè®¿é—® localhost:3000/user è·¯ç”±åº”è¿”å›ç™»å½•æˆåŠŸçš„ä¸šåŠ¡çŠ¶æ€ç ã€‚ä½†å¯èƒ½å‡ºç°ä»¥ä¸‹é”™è¯¯ï¼š</p>
<p>RROR [ExceptionHandler] UnknownDependenciesException [Error]: Nest can't resolve dependencies of the UserService (?). Please make sure that the argument ResponseService at index [0] is available in the UserModule context.</p>
<p>é”™è¯¯ä¿¡æ¯è¡¨æ˜ Nest æ— æ³•è§£æ UserService çš„ä¾èµ–ï¼Œéœ€è¦ç¡®ä¿ ResponseService åœ¨ UserModule ä¸Šä¸‹æ–‡ä¸­å¯ç”¨ã€‚è¿™æ˜¯å› ä¸º ResponseService æœªè¢«æ­£ç¡®å¯¼å‡ºå’Œå¯¼å…¥ã€‚</p>
<p>è§£å†³ä¸Šè¿°é—®é¢˜éœ€è¦å¦‚ä¸‹3ä¸ªæ­¥éª¤ï¼š</p>
<p>ï¼ˆ1ï¼‰å¯¼å‡ºæœåŠ¡ï¼šåœ¨ response.module.ts æ–‡ä»¶ä¸­å°† ResponseService æ·»åŠ åˆ° exports æ•°ç»„ä¸­ã€‚</p>
<p>ï¼ˆ2ï¼‰å¯¼å…¥æ¨¡å—ï¼šåœ¨ user.module.ts æ–‡ä»¶ä¸­å¯¼å…¥ ResponseModule æ¨¡å—ã€‚</p>
<p>ï¼ˆ3ï¼‰å®Œæˆæ³¨å…¥ï¼šæ­¤æ—¶ UserModule å¯ä»¥è¯»å–åˆ° ResponseModule å¯¼å‡ºçš„ ResponseServiceï¼ŒUserService æ‰èƒ½æ­£å¸¸ä½¿ç”¨ ResponseServiceã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// src/response/response.module.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Module</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ResponseService</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./response.service'</span>;

<span class="hljs-meta">@Module</span>({
  <span class="hljs-attr">providers</span>: [<span class="hljs-title class_">ResponseService</span>],
  <span class="hljs-attr">exports</span>: [<span class="hljs-title class_">ResponseService</span>]
})
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ResponseModule</span> { }
</code></pre>
<p>åœ¨user.module.ts æ–‡ä»¶ä¸­å¯¼å…¥ ResponseModule æ¨¡å—ï¼Œå®Œæˆå¯¼å…¥æ¨¡å—ã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// src/user/user.module.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Module</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">UserService</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./user.service'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">UserController</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./user.controller'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ResponseModule</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'src/response/response.module'</span>;
<span class="hljs-meta">@Module</span>({
  <span class="hljs-attr">imports</span>: [<span class="hljs-title class_">ResponseModule</span>],
  <span class="hljs-attr">controllers</span>: [<span class="hljs-title class_">UserController</span>],
  <span class="hljs-attr">providers</span>: [<span class="hljs-title class_">UserService</span>],
})
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserModule</span> {}
</code></pre>
<p>å®Œæˆä»¥ä¸Šé…ç½®åï¼Œé‡æ–°å¯åŠ¨é¡¹ç›®è®¿é—® <a href="https://link.juejin.cn?target=http%3A%2F%2Flocalhost%3A3000%2Fuser%25EF%25BC%258C%25E5%258F%25AF%25E8%25A7%2581" target="_blank" title="http://localhost:3000/user%EF%BC%8C%E5%8F%AF%E8%A7%81" ref="nofollow noopener noreferrer">http://localhost:3000/userï¼Œå¯è§</a> dataã€message å’Œ code ä¸‰ä¸ªä¸šåŠ¡å­—æ®µçš„ä¿¡æ¯éƒ½æˆåŠŸè¾“å‡ºã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e493da6ae5644f4fb8f16e816d7ab870~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgWGlhb1l1MjAwMg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768023608&amp;x-signature=w%2F7WSxTj0An%2BQq3PDYrLHbWmsGQ%3D" alt="image-20251213233534395" loading="lazy"/></p>
<p align="center">
 <b> å›¾4-1 ä¸šåŠ¡å­—æ®µä¿¡æ¯æ’å…¥</b>
</p>
<p>æ¥ä¸‹æ¥åªéœ€ä»å…¨å±€æ‹¦æˆªå™¨ä¸­é‡æ–°ç»Ÿä¸€æ•°æ®æ ¼å¼å³å¯ã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// src/interceptor/interceptor.interceptor.ts</span>
<span class="hljs-keyword">return</span> {
  <span class="hljs-attr">timestmap</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">toISOString</span>(),
  <span class="hljs-attr">data</span>: <span class="hljs-title function_">transformBigInt</span>(data.<span class="hljs-property">data</span>) ?? <span class="hljs-literal">null</span>,
  <span class="hljs-attr">path</span>: request.<span class="hljs-property">url</span>,
  <span class="hljs-attr">message</span>: data.<span class="hljs-property">message</span> ?? <span class="hljs-string">'success'</span>,<span class="hljs-comment">//ä¸šåŠ¡é€»è¾‘è‡ªå®šä¹‰</span>
  <span class="hljs-attr">code</span>: data.<span class="hljs-property">code</span> ?? <span class="hljs-number">200</span>,<span class="hljs-comment">//ä¸šåŠ¡é€»è¾‘è‡ªå®šä¹‰</span>
  <span class="hljs-attr">success</span>: <span class="hljs-literal">true</span>,
};
</code></pre>
<p>ç»Ÿä¸€ä¸šåŠ¡å­—æ®µæ ¼å¼å¦‚å›¾4-2æ‰€ç¤ºã€‚</p>
<p><img src="http://tuchuang.xiaoyu2002.cn/picture/image-20251213234031967.png" alt="image-20251213234031967" loading="lazy"/></p>
<p align="center">
 <b> å›¾4-2 ç»Ÿä¸€ä¸šåŠ¡å­—æ®µæ ¼å¼</b>
</p>
<p>é€šè¿‡ä»¥ä¸Šæ­¥éª¤ï¼ŒNest.js çš„ä¸šåŠ¡çŠ¶æ€ç å’Œä¸šåŠ¡çŠ¶æ€æè¿°å·²æˆåŠŸåº”ç”¨åˆ°å¯¹åº”çš„ user æ¨¡å—æ¥å£ä¸­ã€‚ä½†åœ¨å®ç°è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å‘ç°æ¯ä¸ªä½¿ç”¨ ResponseService çš„æ¨¡å—éƒ½éœ€è¦ï¼š</p>
<p>ï¼ˆ1ï¼‰åœ¨æä¾›æ¨¡å—ä¸­å¯¼å‡ºæœåŠ¡ã€‚</p>
<p>ï¼ˆ2ï¼‰åœ¨ä½¿ç”¨æ¨¡å—ä¸­å¯¼å…¥æ¨¡å—ã€‚</p>
<p>å¦‚æœé¡¹ç›®æœ‰åå‡ ä¸ªæ¨¡å—éƒ½éœ€è¦ä½¿ç”¨ï¼Œè¿™ç§é‡å¤å¯¼å…¥å¯¼å‡ºçš„æ“ä½œä¼šå˜å¾—ç¹çã€‚ä¸ºæ­¤ï¼Œå¯ä»¥å°† response æ¨¡å—æ³¨å†Œä¸ºå…¨å±€æ¨¡å—ï¼Œè¿™æ ·åœ¨æ•´ä¸ªé¡¹ç›®ä¸­éƒ½å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œæ— éœ€åœ¨æ¯ä¸ªä½¿ç”¨æ¨¡å—çš„ module.ts æ–‡ä»¶ä¸­é‡å¤å¯¼å…¥ã€‚</p>
<p>å°† response æ¨¡å—æ³¨å†Œä¸ºå…¨å±€æ¨¡å—çš„æ–¹æ³•ä¸ºä»¥ä¸‹2æ­¥ï¼š</p>
<p>ï¼ˆ1ï¼‰ä» @nestjs/common ä¸­å¯¼å…¥ Global è£…é¥°å™¨</p>
<p>ï¼ˆ2ï¼‰å°† @Global() è£…é¥°å™¨åº”ç”¨åˆ° ResponseModule ä¸Š</p>
<p>æ³¨å†Œä¸ºå…¨å±€æ¨¡å—åï¼ŒResponseService å¯ä»¥åœ¨ä»»ä½•æ¨¡å—ä¸­ç›´æ¥ä½¿ç”¨ï¼Œæ— éœ€åœ¨å„ä½¿ç”¨æ¨¡å—ä¸­å¯¼å…¥ ResponseModuleã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// src/response/response.module.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Module</span>, <span class="hljs-title class_">Global</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ResponseService</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./response.service'</span>;

<span class="hljs-meta">@Global</span>()
<span class="hljs-meta">@Module</span>({
  <span class="hljs-attr">providers</span>: [<span class="hljs-title class_">ResponseService</span>],
  <span class="hljs-attr">exports</span>: [<span class="hljs-title class_">ResponseService</span>]
})
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ResponseModule</span> { }
</code></pre>
<p>æ­¤æ—¶å¦‚æœæˆ‘ä»¬å›åˆ°user.module.tsæ–‡ä»¶ä¸­ï¼Œå°†åˆšæ‰æ³¨å†Œçš„ResponseModuleåˆ é™¤ï¼Œé¡¹ç›®ä¹Ÿä¸ä¼šæŠ¥é”™ã€‚</p>
<p>å¯¹äºå…¨å±€æ¨¡å—çš„ä½¿ç”¨ï¼Œè‹¥æˆ‘æƒ³åœ¨xiaoyuæ¨¡å—ä¸­ä½¿ç”¨ResponseServiceï¼Œä¸»è¦æ­¥éª¤å¦‚ä¸‹ï¼Œæ— éœ€åœ¨XiaoyuModuleä¸­å¯¼å…¥ResponseModuleï¼š</p>
<p>ï¼ˆ1ï¼‰åœ¨ xiaoyu.service.ts æ–‡ä»¶ä¸­å¯¼å…¥ ResponseService æœåŠ¡ç±»å’Œ business ä¸šåŠ¡å¸¸é‡ã€‚</p>
<p>ï¼ˆ2ï¼‰åœ¨ XiaoyuService çš„æ„é€ å‡½æ•°ä¸­æ³¨å…¥ ResponseServiceï¼Œå¹¶ä½¿ç”¨å…¶æ–¹æ³•æŒ‰ç…§ä¸šåŠ¡æ•°æ®æ ¼å¼è§„èŒƒå¤„ç†æ•°æ®ã€‚</p>
<p>ï¼ˆ3ï¼‰åœ¨ xiaoyu.controller.ts æ–‡ä»¶çš„æ§åˆ¶å™¨ä¸­æ³¨å…¥ XiaoyuServiceï¼Œå¹¶åœ¨è·¯ç”±å¤„ç†å™¨ä¸­è°ƒç”¨å…¶ä¸šåŠ¡æ–¹æ³•è¿”å›å¤„ç†ç»“æœã€‚</p>
<p>æ³¨æ„ï¼šè™½ç„¶ ResponseService æ˜¯å…¨å±€æ¨¡å—æ— éœ€å¯¼å…¥ï¼Œä½† XiaoyuModule ä»éœ€è¦åœ¨è‡ªèº«çš„ providers ä¸­æ³¨å†Œ XiaoyuServiceï¼Œåœ¨ controllers ä¸­æ³¨å†Œ XiaoyuControllerã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// src/xiaoyu/xiaoyu.service.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Injectable</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ResponseService</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'src/response/response.service'</span>;
<span class="hljs-keyword">import</span> { business } <span class="hljs-keyword">from</span> <span class="hljs-string">'src/business'</span>;
<span class="hljs-meta">@Injectable</span>()
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">XiaoyuService</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> responseService: ResponseService</span>) {}
  <span class="hljs-title function_">getHello</span>(): <span class="hljs-built_in">any</span> {
    <span class="hljs-keyword">const</span> message = business.<span class="hljs-property">LOGIN_SUCCESS</span>.<span class="hljs-property">message</span>;
    <span class="hljs-keyword">const</span> code = business.<span class="hljs-property">LOGIN_SUCCESS</span>.<span class="hljs-property">code</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">responseService</span>.<span class="hljs-title function_">success</span>(<span class="hljs-string">'This action returns all user'</span>, message, code);
  }
}
</code></pre>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// src/xiaoyu/xiaoyu.controller.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Controller</span>, <span class="hljs-title class_">Get</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">XiaoyuService</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./xiaoyu.service'</span>;

<span class="hljs-meta">@Controller</span>(<span class="hljs-string">'xiaoyu'</span>)
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">XiaoyuController</span> {
  <span class="hljs-comment">// ä¾èµ–æ³¨å…¥</span>
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> xiaoyuService: XiaoyuService</span>) {}
  <span class="hljs-meta">@Get</span>()
  <span class="hljs-title function_">getHello</span>(): <span class="hljs-built_in">any</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">xiaoyuService</span>.<span class="hljs-title function_">getHello</span>();
  }
}
</code></pre>
<p>xiaoyuæ¨¡å—ä¸šåŠ¡åˆå¹¶å¦‚å›¾4-3æ‰€ç¤ºã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/645775c74ffc435c948ff37e77723d1a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgWGlhb1l1MjAwMg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768023608&amp;x-signature=q5Re8lEqcDI%2BLazzUOvZRW0vCuo%3D" alt="image-20251214004117303" loading="lazy"/></p>
<p align="center">
 <b> å›¾4-3 xiaoyuæ¨¡å—ä¸šåŠ¡åˆå¹¶</b>
</p>
<p>ä»¥ä¸Šå°±æ˜¯Nest.jsä¸šåŠ¡å±‚çš„æ‰€æœ‰å†…å®¹ï¼Œæˆ‘ä»¬å›é¡¾ä¸€ä¸‹ï¼ŒNest.js çš„ä¸šåŠ¡å¤„ç†åˆ†ä¸º business å’Œ response ä¸¤ä¸ªéƒ¨åˆ†ï¼š</p>
<p>ï¼ˆ1ï¼‰business æ–‡ä»¶å¤¹ï¼šé›†ä¸­ç®¡ç†ä¸šåŠ¡çŠ¶æ€ç å’Œæè¿°ä¿¡æ¯ã€‚</p>
<p>ï¼ˆ2ï¼‰response æ¨¡å—ï¼šä¸“é—¨ç”¨äºæ„å»ºç»Ÿä¸€çš„å“åº”æ ¼å¼ã€‚</p>
<p>åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œè¿™ä¸¤è€…çš„å˜åŒ–é¢‘ç‡ä¸åŒï¼šå“åº”æ ¼å¼é€šå¸¸ä¿æŒç¨³å®šï¼Œè€Œä¸šåŠ¡çŠ¶æ€ç ä¼šéšç€ä¸šåŠ¡å‘å±•ä¸æ–­æ–°å¢æˆ–è°ƒæ•´ã€‚å› æ­¤éœ€è¦å°†ä¸¤è€…åˆ†ç¦»ç®¡ç†ã€‚response æ¨¡å—çš„åŠŸèƒ½ä¸å…¨å±€æ‹¦æˆªå™¨ä¸­ç»Ÿä¸€è¿”å›å®¢æˆ·ç«¯å“åº”æ ¼å¼çš„åŠŸèƒ½æ˜¯ä¸€è‡´çš„ï¼ŒåŒºåˆ«åœ¨äºæˆ‘ä»¬å°†è‡ªå®šä¹‰éƒ¨åˆ†æ‹†åˆ†å‡ºæ¥ï¼Œæé«˜äº†çµæ´»æ€§å’Œå¯ç»´æŠ¤æ€§ï¼Œæ›´ç¬¦åˆå®é™…é¡¹ç›®çš„éœ€æ±‚å˜åŒ–ã€‚</p>
<p>è¿™ç§æ¶æ„è®¾è®¡çš„ä¼˜åŠ¿åœ¨äºï¼šä¸šåŠ¡çŠ¶æ€å®šä¹‰ä¸å“åº”æ ¼å¼æ„å»ºèŒè´£æ˜ç¡®ï¼ˆå•ä¸€èŒè´£ï¼‰ï¼›ä¸šåŠ¡çŠ¶æ€å˜åŒ–ä¸å½±å“å“åº”æ ¼å¼ï¼Œå“åº”æ ¼å¼è°ƒæ•´ä¸å½±å“ä¸šåŠ¡é€»è¾‘ï¼›ç»Ÿä¸€çš„å“åº”æ ¼å¼å¯è·¨æ¨¡å—ã€è·¨é¡¹ç›®ä½¿ç”¨ï¼›æ–°å¢ä¸šåŠ¡çŠ¶æ€åªéœ€åœ¨ business æ–‡ä»¶ä¸­æ·»åŠ ï¼Œä¸å½±å“ç°æœ‰ç»“æ„ã€‚é€šè¿‡è¿™ç§è§„èŒƒåŒ–ç®¡ç†ï¼Œå¯ä»¥æ„å»ºå‡ºæ¸…æ™°ã€å¯ç»´æŠ¤ã€å¯æ‰©å±•çš„ä¸šåŠ¡å±‚æ¶æ„ï¼Œé€‚åº”å„ç§å¤æ‚çš„ä¸šåŠ¡åœºæ™¯éœ€æ±‚ã€‚</p>
<p>é™¤äº†messageå’Œcodeè¿™ä¸¤ä¸ªå­—æ®µï¼Œæˆ‘ä»¬è¿˜å¯ä»¥æœ‰æƒé™ä¸å®‰å…¨æ§åˆ¶ï¼ˆä¾‹å¦‚IPç™½åå•ã€é¢‘ç‡é™åˆ¶ã€é»‘ç™½åå•ï¼‰ã€æ•°æ®æŒä¹…åŒ–ï¼ˆåˆ›å»ºã€è¯»å–ã€æ›´æ–°ã€åˆ é™¤ä¸šåŠ¡æ•°æ®ï¼‰ã€ä¸šåŠ¡æµç¨‹ï¼ˆå¤šçº§å®¡æ‰¹ã€ä¼šç­¾ã€æˆ–ç­¾é€»è¾‘ï¼‰ã€ç¬¬ä¸‰æ–¹é›†æˆï¼ˆæ”¯ä»˜å®ã€å¾®ä¿¡æ”¯ä»˜å›è°ƒå¤„ç†ï¼‰ã€ç›‘æ§ä¸ç»Ÿè®¡ï¼ˆæ¥å£å“åº”æ—¶é—´ã€æˆåŠŸç‡ï¼‰ç­‰å¤šæ–¹é¢åŸºäºå®é™…ä¸šåŠ¡éœ€æ±‚å»å¢æ·»ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[SpringBootæ€§èƒ½ç¿»å€ç§˜ç±ï¼š5ä¸ªè¢«ä½ä¼°çš„é…ç½®é¡¹è®©æˆ‘QPSæå‡200%]]></title>    <link>https://juejin.cn/post/7590303618428633123</link>    <guid>https://juejin.cn/post/7590303618428633123</guid>    <pubDate>2026-01-03T04:16:38.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7590303618428633123" data-draft-id="7590303618428616739" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="SpringBootæ€§èƒ½ç¿»å€ç§˜ç±ï¼š5ä¸ªè¢«ä½ä¼°çš„é…ç½®é¡¹è®©æˆ‘QPSæå‡200%"/> <meta itemprop="keywords" content="åç«¯,å‰ç«¯,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-01-03T04:16:38.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿æ©™çš„ç™¾å®ç®±"/> <meta itemprop="url" content="https://juejin.cn/user/1638743356481367"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            SpringBootæ€§èƒ½ç¿»å€ç§˜ç±ï¼š5ä¸ªè¢«ä½ä¼°çš„é…ç½®é¡¹è®©æˆ‘QPSæå‡200%
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1638743356481367/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿æ©™çš„ç™¾å®ç®±
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-03T04:16:38.000Z" title="Sat Jan 03 2026 04:16:38 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>SpringBootæ€§èƒ½ç¿»å€ç§˜ç±ï¼š5ä¸ªè¢«ä½ä¼°çš„é…ç½®é¡¹è®©æˆ‘QPSæå‡200%</strong></h2>
<h2 data-id="heading-1">å¼•è¨€</h2>
<p>åœ¨å½“ä»Šé«˜å¹¶å‘çš„äº’è”ç½‘ç¯å¢ƒä¸‹ï¼Œå¾®æœåŠ¡æ¶æ„çš„æ€§èƒ½ä¼˜åŒ–æˆä¸ºäº†å¼€å‘è€…å¿…é¡»é¢å¯¹çš„æŒ‘æˆ˜ã€‚SpringBootä½œä¸ºJavaç”Ÿæ€ä¸­æœ€æµè¡Œçš„å¾®æœåŠ¡æ¡†æ¶ä¹‹ä¸€ï¼Œå…¶é»˜è®¤é…ç½®è™½ç„¶èƒ½æ»¡è¶³å¤§å¤šæ•°åœºæ™¯éœ€æ±‚ï¼Œä½†åœ¨æç«¯æ€§èƒ½è¦æ±‚ä¸‹å¾€å¾€æ˜¾å¾—åŠ›ä¸ä»å¿ƒã€‚æœ¬æ–‡å°†æ­ç¤º5ä¸ªå¸¸è¢«å¼€å‘è€…å¿½ç•¥çš„SpringBooté…ç½®é¡¹ï¼Œé€šè¿‡åˆç†è°ƒæ•´è¿™äº›å‚æ•°ï¼Œæˆ‘ä»¬çš„çº¿ä¸ŠæœåŠ¡å®ç°äº†QPSï¼ˆæ¯ç§’æŸ¥è¯¢ç‡ï¼‰ä»1000åˆ°3000çš„æƒŠäººæå‡ã€‚</p>
<h2 data-id="heading-2">ä¸»ä½“</h2>
<h3 data-id="heading-3">1. Tomcatçº¿ç¨‹æ± è°ƒä¼˜ï¼šçªç ´é»˜è®¤å¹¶å‘ç“¶é¢ˆ</h3>
<p><strong>é—®é¢˜èƒŒæ™¯</strong>ï¼š
SpringBootå†…åµŒTomcaté»˜è®¤ä½¿ç”¨200ä¸ªçº¿ç¨‹çš„æœ€å¤§è¿æ¥æ•°ï¼ˆserver.tomcat.max-threadsï¼‰ï¼Œè¿™åœ¨ä¸­ç­‰æµé‡ä¸‹å°šå¯åº”ä»˜ï¼Œä½†å¯¹äºçªå‘é«˜å¹¶å‘åœºæ™¯ä¼šæˆä¸ºæ˜æ˜¾ç“¶é¢ˆã€‚</p>
<p><strong>ä¼˜åŒ–æ–¹æ¡ˆ</strong>ï¼š</p>
<pre><code class="hljs language-properties" lang="properties">server.tomcat.max-threads=500
server.tomcat.min-spare-threads=50
server.tomcat.accept-count=100
</code></pre>
<p><strong>æ·±åº¦è§£æ</strong>ï¼š</p>
<ul>
<li><code>max-threads</code>åº”æ ¹æ®æœåŠ¡å™¨CPUæ ¸å¿ƒæ•°è°ƒæ•´ï¼ˆå»ºè®®å…¬å¼ï¼šæ ¸å¿ƒæ•° * (1 + å¹³å‡ç­‰å¾…æ—¶é—´/å¹³å‡æœåŠ¡æ—¶é—´)ï¼‰</li>
<li><code>min-spare-threads</code>é¢„çƒ­çº¿ç¨‹æ± é¿å…å†·å¯åŠ¨å»¶è¿Ÿ</li>
<li><code>accept-count</code>è®¾ç½®åˆç†çš„ç­‰å¾…é˜Ÿåˆ—é˜²æ­¢ç›´æ¥æ‹’ç»è¯·æ±‚</li>
</ul>
<p><strong>å®æµ‹æ•ˆæœ</strong>ï¼š
åœ¨4æ ¸8Gçš„æœåŠ¡å™¨ä¸Šï¼Œå°†max-threadsä»200æå‡åˆ°500åï¼ŒæŒç»­10åˆ†é’Ÿçš„å‹æµ‹ç»“æœæ˜¾ç¤º99çº¿å»¶è¿Ÿé™ä½äº†37%ã€‚</p>
<h3 data-id="heading-4">2. Undertowæ›¿ä»£Tomcatï¼šå¼‚æ­¥IOçš„æ€§èƒ½çº¢åˆ©</h3>
<p><strong>é—®é¢˜èƒŒæ™¯</strong>ï¼š
è™½ç„¶Tomcatæ˜¯é»˜è®¤é€‰æ‹©ï¼Œä½†UndertowåŸºäºNIO2çš„å®ç°åœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹è¡¨ç°æ›´ä¼˜å¼‚ã€‚</p>
<p><strong>ä¼˜åŒ–æ–¹æ¡ˆ</strong>ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">exclusions</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">exclusion</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-tomcat<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">exclusion</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">exclusions</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-undertow<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<pre><code class="hljs language-properties" lang="properties">server.undertow.worker-threads=16
server.undertow.io-threads=4
</code></pre>
<p><strong>æ·±åº¦è§£æ</strong>ï¼š</p>
<ul>
<li>Undertowé‡‡ç”¨X.NIOå·¥ä½œæ¨¡å¼ï¼ŒI/Oä¸Workerçº¿ç¨‹åˆ†ç¦»</li>
<li>worker-threadså»ºè®®è®¾ç½®ä¸ºCPUæ ¸å¿ƒæ•°çš„8å€</li>
<li>io-threadsé€šå¸¸è®¾ä¸ºCPUæ ¸å¿ƒæ•°å³å¯</li>
</ul>
<p><strong>å®æµ‹æ•ˆæœ</strong>ï¼š
ç›¸åŒç¡¬ä»¶æ¡ä»¶ä¸‹åˆ‡æ¢è‡³Undertowåï¼Œé•¿è¿æ¥åœºæ™¯ä¸‹çš„å†…å­˜æ¶ˆè€—é™ä½40%ï¼Œååé‡æå‡22%ã€‚</p>
<h3 data-id="heading-5">3. JVMå‚æ•°ç²¾ç»†åŒ–é…ç½®ï¼šå‘Šåˆ«OOMçš„å™©æ¢¦</h3>
<p><strong>é—®é¢˜èƒŒæ™¯</strong>ï¼š
SpringBootåº”ç”¨çš„é»˜è®¤JVMå‚æ•°å¾€å¾€ä¸é€‚åˆç”Ÿäº§ç¯å¢ƒï¼Œå®¹æ˜“å¼•å‘GCé£æš´æˆ–å†…å­˜æº¢å‡ºã€‚</p>
<p><strong>ä¼˜åŒ–æ–¹æ¡ˆï¼ˆapplication.propertiesï¼‰</strong>ï¼š</p>
<pre><code class="hljs language-properties" lang="properties">spring.jvmargs=-XX:+UseG1GC -Xms2048m -Xmx2048m -XX:MaxGCPauseMillis=200 
-XX:G1ReservePercent=25 -XX:InitiatingHeapOccupancyPercent=35
</code></pre>
<p>æˆ–è€…é€šè¿‡å¯åŠ¨å‘½ä»¤ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">java -jar -XX:+UseG1GC -Xms2048m -Xmx2048m your-app.jar
</code></pre>
<p><strong>æ·±åº¦è§£æ</strong>ï¼š</p>
<ul>
<li>G1åƒåœ¾æ”¶é›†å™¨é€‚åˆå¤šæ ¸å¤§å†…å­˜æœºå™¨ï¼ˆJDK9+é»˜è®¤ï¼‰</li>
<li>Xmsä¸Xmxå¿…é¡»ç›¸åŒä»¥é¿å…è¿è¡Œæ—¶è°ƒæ•´å¸¦æ¥çš„æ€§èƒ½æ³¢åŠ¨</li>
<li>MaxGCPauseMillisè®¾ç½®åˆç†çš„GCåœé¡¿ç›®æ ‡ï¼ˆ100-200msï¼‰</li>
</ul>
<h3 data-id="heading-6">4. Redisè¿æ¥æ± ä¼˜åŒ–ï¼šè§£å†³é«˜é¢‘è®¿é—®çš„æ€§èƒ½é»‘æ´</h3>
<p>å½“ä½¿ç”¨Spring Data Redisæ—¶ï¼š</p>
<pre><code class="hljs language-properties" lang="properties">spring.redis.lettuce.pool.enabled=true
spring.redis.lettuce.pool.max-active=32
spring.redis.lettuce.pool.max-idle=16
spring.redis.lettuce.pool.min-idle=8
spring.redis.timeout=5000ms
</code></pre>
<p>å½“ä½¿ç”¨Jedisæ—¶ï¼š</p>
<pre><code class="hljs language-properties" lang="properties">spring.redis.jedis.pool.max-active=50 
spring.redis.jedis.pool.max-idle=20 
spring redis.jedis.pool.min-idle=10 
spring redis.jedis pool max-wait=-1ms 
</code></pre>
<h3 data-id="heading-7">5. Jacksonåºåˆ—åŒ–é»‘ç§‘æŠ€ï¼šJSONå¤„ç†çš„æè‡´ä¼˜åŒ–</h3>
<p><code>properties spring.jackson.generator.write-numbers-as-strings=false spring jackson parser allow unquoted field names=false spring jackson default property inclusion=none spring jackson serialization write dates as timestamps=true spring jackson deserialization fail on unknown properties=true </code></p>
<h2 data-id="heading-8">æ€»ç»“</h2></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è‹¥ä¾AIé¡¹ç›®ä¸“å±åŸŸåruoyiai.cné™æ—¶å‡ºå”®ï¼Œæ‰“é€ AIå¼€å‘é¢†åŸŸå“ç‰Œæ ‡æ†]]></title>    <link>https://juejin.cn/post/7590292138347036682</link>    <guid>https://juejin.cn/post/7590292138347036682</guid>    <pubDate>2026-01-03T04:47:38.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7590292138347036682" data-draft-id="7590292138347003914" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è‹¥ä¾AIé¡¹ç›®ä¸“å±åŸŸåruoyiai.cné™æ—¶å‡ºå”®ï¼Œæ‰“é€ AIå¼€å‘é¢†åŸŸå“ç‰Œæ ‡æ†"/> <meta itemprop="keywords" content="é¢è¯•"/> <meta itemprop="datePublished" content="2026-01-03T04:47:38.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä»£ç æ¬¡ä½é¢"/> <meta itemprop="url" content="https://juejin.cn/user/1535333867720295"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è‹¥ä¾AIé¡¹ç›®ä¸“å±åŸŸåruoyiai.cné™æ—¶å‡ºå”®ï¼Œæ‰“é€ AIå¼€å‘é¢†åŸŸå“ç‰Œæ ‡æ†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1535333867720295/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä»£ç æ¬¡ä½é¢
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-03T04:47:38.000Z" title="Sat Jan 03 2026 04:47:38 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€</h2>
<p>åœ¨äººå·¥æ™ºèƒ½æŠ€æœ¯è“¬å‹ƒå‘å±•çš„ä»Šå¤©ï¼Œä¸€ä¸ªä¼˜ç§€çš„å“ç‰ŒåŸŸåå·²æˆä¸ºé¡¹ç›®æˆåŠŸçš„å…³é”®è¦ç´ ã€‚ruoyiai.cnâ€”â€”è¿™ä¸ªä¸è‹¥ä¾AIé¡¹ç›®å®Œç¾å¥‘åˆçš„åŸŸåï¼Œç°æ­£å¼å¯¹å¤–å‡ºå”®ï¼Œä¸ºAIå¼€å‘é¢†åŸŸçš„å“ç‰Œå»ºè®¾æä¾›ç»ä½³æœºä¼šã€‚</p>
<h2 data-id="heading-1">åŸŸåä»·å€¼åˆ†æ</h2>
<h3 data-id="heading-2">å“ç‰Œä¸€è‡´æ€§ä¼˜åŠ¿</h3>
<p>ruoyiai.cnä¸è‹¥ä¾AIé¡¹ç›®<a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2Fruoyi-ai%2Fruoyi-ai" target="_blank" title="https://gitee.com/ruoyi-ai/ruoyi-ai" ref="nofollow noopener noreferrer">gitee.com/ruoyi-ai/ruâ€¦</a>
åç§°å®Œå…¨ä¸€è‡´ï¼Œè¿™ç§é«˜åº¦åŒ¹é…çš„åŸŸåå…·æœ‰ä¸å¯æ›¿ä»£çš„å“ç‰Œä»·å€¼ã€‚å¯¹äºå¼€å‘è€…è€Œè¨€ï¼Œruoyiai.cnä¸ä»…æ˜¯ä¸€ä¸ªè®¿é—®å…¥å£ï¼Œæ›´æ˜¯é¡¹ç›®å“ç‰Œå½¢è±¡çš„é‡è¦ç»„æˆéƒ¨åˆ†ã€‚å½“ç”¨æˆ·åœ¨æµè§ˆå™¨ä¸­è¾“å…¥"ruoyiai.cn"ï¼Œç›´æ¥å°±èƒ½è”æƒ³åˆ°è‹¥ä¾AIé¡¹ç›®ï¼Œè¿™ç§å“ç‰Œè®°å¿†çš„å¼ºåŒ–æ•ˆæœæ˜¯å…¶ä»–åŸŸåæ— æ³•æ¯”æ‹Ÿçš„ã€‚</p>
<h3 data-id="heading-3">SEOä¼˜åŒ–æ½œåŠ›</h3>
<p>ä»æœç´¢å¼•æ“ä¼˜åŒ–è§’åº¦çœ‹ï¼Œruoyiai.cnåŒ…å«"ruoyi"å’Œ"ai"ä¸¤ä¸ªæ ¸å¿ƒå…³é”®è¯ï¼Œè¿™å¯¹æå‡é¡¹ç›®åœ¨æœç´¢ç»“æœä¸­çš„æ’åæä¸ºæœ‰åˆ©ã€‚æ— è®ºæ˜¯ç™¾åº¦ã€è°·æ­Œè¿˜æ˜¯å…¶ä»–æœç´¢å¼•æ“ï¼Œéƒ½ä¼šç»™äºˆåŒ…å«å…³é”®è¯çš„åŸŸåæ›´é«˜çš„æƒé‡ã€‚è¿™æ„å‘³ç€ï¼Œæ‹¥æœ‰ruoyiai.cnåï¼Œé¡¹ç›®åœ¨"è‹¥ä¾AI"ã€"ruoyi ai"ç­‰å…³é”®è¯çš„æœç´¢æ’åå°†è·å¾—å¤©ç„¶ä¼˜åŠ¿ï¼Œä¸ºé¡¹ç›®å¸¦æ¥æŒç»­çš„æµé‡å’Œæ›å…‰ã€‚</p>
<h3 data-id="heading-4">æŠ€æœ¯å®šä½æ˜ç¡®</h3>
<p>"AI"ä½œä¸ºäººå·¥æ™ºèƒ½çš„ç¼©å†™ï¼Œåœ¨åŸŸåä¸­æ˜ç¡®æ ‡è¯†äº†é¡¹ç›®çš„æŠ€æœ¯å±æ€§ã€‚å¯¹äºç›®æ ‡ç”¨æˆ·ç¾¤ä½“â€”â€”å¼€å‘è€…ã€æŠ€æœ¯å†³ç­–è€…è€Œè¨€ï¼Œè¿™ç§æŠ€æœ¯å®šä½çš„æ¸…æ™°è¡¨è¾¾èƒ½å¤Ÿå¿«é€Ÿå¸å¼•ç›®æ ‡å—ä¼—ã€‚åŒæ—¶ï¼Œ.cnåŸŸåè¡¨æ˜å…¶ä¸­å›½æœ¬åœŸåŒ–å±æ€§ï¼Œç¬¦åˆè‹¥ä¾é¡¹ç›®åœ¨å›½å†…å¼€å‘ç¤¾åŒºçš„å¹¿æ³›å½±å“åŠ›ï¼Œä¾¿äºå›½å†…ç”¨æˆ·è®¿é—®å’Œè®°å¿†ã€‚</p>
<h2 data-id="heading-5">é¡¹ç›®èƒŒæ™¯ä¸æ½œåŠ›</h2>
<p>è‹¥ä¾AIé¡¹ç›®æ˜¯åŸºäºè‘—åçš„RuoYiå¼€æºé¡¹ç›®çš„AIå¢å¼ºç‰ˆæœ¬ï¼Œè‡´åŠ›äºä¸ºå¼€å‘è€…æä¾›é›†æˆäººå·¥æ™ºèƒ½èƒ½åŠ›çš„å¿«é€Ÿå¼€å‘å¹³å°ã€‚è¯¥é¡¹ç›®ç»“åˆä¼ ç»Ÿå¼€å‘æ¡†æ¶ä¸AIèƒ½åŠ›ï¼Œé›†æˆæ™ºèƒ½ä»£ç ç”Ÿæˆã€è‡ªåŠ¨åŒ–æµ‹è¯•ç­‰å…ˆè¿›åŠŸèƒ½ï¼Œé€‚ç”¨äºå¤šç§ä¼ä¸šçº§åº”ç”¨å¼€å‘åœºæ™¯ã€‚</p>
<p>éšç€äººå·¥æ™ºèƒ½æŠ€æœ¯çš„å¿«é€Ÿå‘å±•ï¼Œè‹¥ä¾AIé¡¹ç›®å…·æœ‰å·¨å¤§çš„æˆé•¿æ½œåŠ›ã€‚ä½œä¸ºé¡¹ç›®çš„ä¸“å±åŸŸåï¼Œruoyiai.cnå°†æˆä¸ºé¡¹ç›®å“ç‰Œèµ„äº§çš„é‡è¦ç»„æˆéƒ¨åˆ†ï¼Œä¸ºé¡¹ç›®æœªæ¥çš„å•†ä¸šåŒ–ã€äº§å“åŒ–å‘å±•é¢„ç•™å……è¶³çš„å“ç‰Œæ‰©å±•ç©ºé—´ã€‚</p>
<h2 data-id="heading-6">é™æ—¶ä¼˜æƒ ä¿¡æ¯</h2>
<p>ä¸ºå›é¦ˆè‹¥ä¾AIé¡¹ç›®ç¤¾åŒºï¼Œruoyiai.cnç°æ¨å‡ºé™æ—¶ä¼˜æƒ æ´»åŠ¨ï¼š</p>
<p><strong>åŸä»·ï¼šÂ¥5,000</strong></p>
<p><strong>é™æ—¶ä¼˜æƒ ä»·ï¼šÂ¥3,800</strong></p>
<p><strong>èŠ‚çœï¼š24%</strong></p>
<p>æ­¤ä»·æ ¼åŒ…å«åŸŸåæ‰€æœ‰æƒå®Œå…¨è½¬ç§»åŠç›¸å…³ååŠ©æœåŠ¡ã€‚è´­ä¹°åï¼Œæˆ‘ä»¬å°†ååŠ©å®ŒæˆåŸŸåè¿‡æˆ·ã€DNSè§£æç­‰æ‰€æœ‰æŠ€æœ¯æ“ä½œï¼Œç¡®ä¿æ‚¨èƒ½å¤Ÿé¡ºåˆ©ä½¿ç”¨è¯¥åŸŸåã€‚</p>
<h2 data-id="heading-7">é€‚ç”¨äººç¾¤</h2>
<ul>
<li><strong>è‹¥ä¾AIé¡¹ç›®æ ¸å¿ƒå¼€å‘è€…</strong>ï¼šä¿æŠ¤é¡¹ç›®å“ç‰Œï¼Œé˜²æ­¢åŸŸåè¢«æŠ¢æ³¨</li>
<li><strong>è‹¥ä¾é¡¹ç›®è´¡çŒ®è€…</strong>ï¼šä¸ºé¡¹ç›®å‘å±•è´¡çŒ®åŠ›é‡ï¼Œè·å¾—å“ç‰Œèµ„äº§</li>
<li><strong>AIå¼€å‘é¢†åŸŸåˆ›ä¸šè€…</strong>ï¼šæŠ¢å ä¼˜è´¨åŸŸåèµ„æºï¼Œå¸ƒå±€AIèµ›é“</li>
<li><strong>åŸŸåæŠ•èµ„è€…</strong>ï¼šæŠ•èµ„å…·æœ‰æ˜ç¡®é¡¹ç›®èƒŒæ™¯çš„ä¼˜è´¨åŸŸå</li>
</ul>
<h2 data-id="heading-8">è´­ä¹°æ–¹å¼</h2>
<p><strong>ç½‘ç«™åŠ å®¢æœ</strong>ï¼š<a href="https://link.juejin.cn?target=http%3A%2F%2Fwww.ruoyiai.cn" target="_blank" title="http://www.ruoyiai.cn" ref="nofollow noopener noreferrer">www.ruoyiai.cn</a></p>
<h2 data-id="heading-9">ç»“è¯­</h2>
<p>ruoyiai.cnä¸ä»…æ˜¯ä¸€ä¸ªåŸŸåï¼Œæ›´æ˜¯è‹¥ä¾AIé¡¹ç›®å“ç‰Œå»ºè®¾çš„é‡è¦ä¸€æ­¥ã€‚åœ¨AIæŠ€æœ¯å¿«é€Ÿå‘å±•çš„æ—¶ä»£ï¼Œæ‹¥æœ‰ä¸€ä¸ªä¸é¡¹ç›®å®Œç¾å¥‘åˆçš„åŸŸåï¼Œå°†ä¸ºé¡¹ç›®å¸¦æ¥æŒç»­çš„æµé‡ã€å“ç‰Œä»·å€¼å’Œå•†ä¸šæœºä¼šã€‚é™æ—¶ä¼˜æƒ ä»…æ­¤ä¸€æ¬¡ï¼Œæœºä¼šä¸å®¹é”™è¿‡ï¼</p>
<p><strong>ç«‹å³è¡ŒåŠ¨ï¼Œè®©ruoyiai.cnæˆä¸ºæ‚¨AIå¼€å‘ä¹‹è·¯çš„èµ·ç‚¹ï¼</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€n8næ•™ç¨‹ã€‘ï¼šSwitchèŠ‚ç‚¹ï¼Œå®ç°å·¥ä½œæµå¤šè·¯ç”±æ§åˆ¶]]></title>    <link>https://juejin.cn/post/7590292138346807306</link>    <guid>https://juejin.cn/post/7590292138346807306</guid>    <pubDate>2026-01-03T03:06:12.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7590292138346807306" data-draft-id="7581412054902734857" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€n8næ•™ç¨‹ã€‘ï¼šSwitchèŠ‚ç‚¹ï¼Œå®ç°å·¥ä½œæµå¤šè·¯ç”±æ§åˆ¶"/> <meta itemprop="keywords" content="AIGC,AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2026-01-03T03:06:12.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="undsky"/> <meta itemprop="url" content="https://juejin.cn/user/3368559354850206"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€n8næ•™ç¨‹ã€‘ï¼šSwitchèŠ‚ç‚¹ï¼Œå®ç°å·¥ä½œæµå¤šè·¯ç”±æ§åˆ¶
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3368559354850206/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    undsky
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-03T03:06:12.000Z" title="Sat Jan 03 2026 03:06:12 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ã€n8næ•™ç¨‹ã€‘ï¼šSwitchèŠ‚ç‚¹ï¼Œå®ç°å·¥ä½œæµå¤šè·¯ç”±æ§åˆ¶</h2>
<p>åœ¨n8nè‡ªåŠ¨åŒ–æµç¨‹ä¸­ï¼Œæœ€å¸¸è§çš„éœ€æ±‚ä¹‹ä¸€å°±æ˜¯<strong>æ ¹æ®æ•°æ®çš„ä¸åŒæ¡ä»¶ï¼Œå°†å…¶åˆ†å‘åˆ°ä¸åŒçš„å¤„ç†è·¯å¾„</strong>ã€‚å¦‚æœä½ åªéœ€è¦å¤„ç†"æ˜¯"æˆ–"å¦"ä¸¤ç§æƒ…å†µï¼Œå¯ä»¥ç”¨<strong>IfèŠ‚ç‚¹</strong>ï¼›ä½†å½“ä½ éœ€è¦æ ¹æ®å¤šä¸ªæ¡ä»¶åˆ›å»º3æ¡ã€5æ¡ç”šè‡³æ›´å¤šçš„å¤„ç†è·¯å¾„æ—¶ï¼Œ<strong>SwitchèŠ‚ç‚¹</strong>å°±æ˜¯ä½ çš„æœ€ä½³é€‰æ‹©ã€‚</p>
<p>SwitchèŠ‚ç‚¹å°±åƒæ˜¯ä¸€ä¸ª<strong>äº¤é€šæŒ‡æŒ¥å®˜</strong>ï¼Œå®ƒæ ¹æ®ä½ è®¾å®šçš„æ¡ä»¶è§„åˆ™ï¼Œå°†ä¼ å…¥çš„æ•°æ®å‡†ç¡®åœ°å¼•å¯¼åˆ°å¯¹åº”çš„è¾“å‡ºåˆ†æ”¯ï¼Œè®©å¤æ‚çš„å·¥ä½œæµå˜å¾—æ¸…æ™°æœ‰åºã€‚</p>
<hr/>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fcdn.undsky.com%2Fimg%2Fghss.png" target="_blank" title="https://cdn.undsky.com/img/ghss.png" ref="nofollow noopener noreferrer">ç‚¹å‡»è·å–æœ€æ–°AIèµ„è®¯ã€n8nå·¥ä½œæµã€å¼€å‘ç»éªŒåˆ†äº«</a></p>
<h3 data-id="heading-1">ä»€ä¹ˆæ˜¯SwitchèŠ‚ç‚¹ï¼Ÿ</h3>
<p>SwitchèŠ‚ç‚¹æ˜¯n8nä¸­çš„<strong>æ¡ä»¶è·¯ç”±èŠ‚ç‚¹</strong>ï¼Œå®ƒå…è®¸ä½ æ ¹æ®æ•°æ®çš„å±æ€§å€¼è¿›è¡Œå¤šè·¯ç”±å†³ç­–ã€‚ä¸IfèŠ‚ç‚¹åªèƒ½åˆ†å‡ºä¸¤æ¡è·¯ï¼ˆçœŸ/å‡ï¼‰ä¸åŒï¼Œ<strong>SwitchèŠ‚ç‚¹å¯ä»¥åˆ›å»ºæ— é™ä¸ªè¾“å‡ºåˆ†æ”¯</strong>ï¼Œæ¯ä¸ªåˆ†æ”¯å¯¹åº”ä¸€ç»„ç‰¹å®šçš„æ¡ä»¶ã€‚</p>
<p><strong>æ ¸å¿ƒç‰¹æ€§ï¼š</strong></p>
<ul>
<li><strong>å¤šè·¯ç”±æ”¯æŒ</strong>ï¼šä¸é™åˆ¶è¾“å‡ºåˆ†æ”¯æ•°é‡ï¼Œæƒ³è¦å¤šå°‘å°±åˆ›å»ºå¤šå°‘</li>
<li><strong>çµæ´»çš„æ¡ä»¶ç³»ç»Ÿ</strong>ï¼šæ”¯æŒå­—ç¬¦ä¸²ã€æ•°å­—ã€æ—¥æœŸã€å¸ƒå°”å€¼ã€æ•°ç»„ã€å¯¹è±¡ç­‰å¤šç§æ•°æ®ç±»å‹</li>
<li><strong>ä¸¤ç§å·¥ä½œæ¨¡å¼</strong>ï¼šRulesæ¨¡å¼ï¼ˆå¯è§†åŒ–æ¡ä»¶æ„å»ºï¼‰å’ŒExpressionæ¨¡å¼ï¼ˆç¼–ç¨‹è¡¨è¾¾å¼ï¼‰</li>
<li><strong>æ™ºèƒ½é™çº§å¤„ç†</strong>ï¼šä¸ºä¸åŒ¹é…ä»»ä½•æ¡ä»¶çš„æ•°æ®æä¾›å¤‡é€‰è¾“å‡º</li>
<li><strong>é«˜æ•ˆçš„æ•°æ®æµ</strong>ï¼šä¸€æ¡æ•°æ®ä¸€æ—¦åŒ¹é…åˆ°æŸä¸ªè¾“å‡ºï¼Œé»˜è®¤ä¸ä¼šé‡å¤åŒ¹é…å…¶ä»–è§„åˆ™</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b83b6461623d46e6b543fa398dcad239~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgdW5kc2t5:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768014372&amp;x-signature=8Ir9kP%2FsZdX%2BNumYmk918oG6zyw%3D" alt="" loading="lazy"/></p>
<hr/>
<h3 data-id="heading-2">SwitchèŠ‚ç‚¹çš„ä¸¤ç§å·¥ä½œæ¨¡å¼</h3>
<h4 data-id="heading-3">æ¨¡å¼ä¸€ï¼šRulesæ¨¡å¼ï¼ˆæ¨èåˆå­¦è€…ï¼‰</h4>
<p>Rulesæ¨¡å¼æ˜¯<strong>å¯è§†åŒ–æ¡ä»¶æ„å»ºæ–¹å¼</strong>ï¼Œä½ æ— éœ€ç¼–å†™ä»»ä½•ä»£ç ï¼Œåªéœ€é€šè¿‡ä¸‹æ‹‰èœå•å’Œè¾“å…¥æ¡†é…ç½®æ¡ä»¶ã€‚</p>
<p><strong>æ”¯æŒçš„æ•°æ®ç±»å‹å’Œæ¯”è¾ƒæ“ä½œï¼š</strong></p>








































<table><thead><tr><th>æ•°æ®ç±»å‹</th><th>æ”¯æŒçš„æ¯”è¾ƒæ“ä½œ</th><th>ä½¿ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td><strong>å­—ç¬¦ä¸²</strong></td><td>ç­‰äºã€ä¸ç­‰äºã€åŒ…å«ã€ä¸åŒ…å«ã€ä»¥...å¼€å§‹ã€ä»¥...ç»“æŸã€æ­£åˆ™åŒ¹é…</td><td>é‚®ç®±åœ°å€ã€åˆ†ç±»æ ‡ç­¾ã€éƒ¨é—¨åç§°</td></tr><tr><td><strong>æ•°å­—</strong></td><td>ç­‰äºã€ä¸ç­‰äºã€å¤§äºã€å°äºã€å¤§äºç­‰äºã€å°äºç­‰äº</td><td>è®¢å•é‡‘é¢ã€ä¼˜å…ˆçº§æ•°å€¼ã€è®¡æ•°å™¨</td></tr><tr><td><strong>æ—¥æœŸ&amp;æ—¶é—´</strong></td><td>ç­‰äºã€ä¸ç­‰äºã€ä¹‹åã€ä¹‹å‰ã€ä¹‹åæˆ–ç­‰äºã€ä¹‹å‰æˆ–ç­‰äº</td><td>æˆªæ­¢æ—¥æœŸã€åˆ›å»ºæ—¶é—´ã€è¿‡æœŸåˆ¤æ–­</td></tr><tr><td><strong>å¸ƒå°”å€¼</strong></td><td>ä¸ºçœŸã€ä¸ºå‡ã€ç­‰äºã€ä¸ç­‰äº</td><td>å¼€å…³çŠ¶æ€ã€éªŒè¯ç»“æœ</td></tr><tr><td><strong>æ•°ç»„</strong></td><td>å­˜åœ¨/ä¸å­˜åœ¨ã€ä¸ºç©º/éç©ºã€åŒ…å«ã€é•¿åº¦æ¯”è¾ƒ</td><td>æ ‡ç­¾åˆ—è¡¨ã€å¤šé€‰é¡¹</td></tr><tr><td><strong>å¯¹è±¡</strong></td><td>å­˜åœ¨/ä¸å­˜åœ¨ã€ä¸ºç©º/éç©º</td><td>åµŒå¥—æ•°æ®ç»“æ„</td></tr></tbody></table>
<h4 data-id="heading-4">æ¨¡å¼äºŒï¼šExpressionæ¨¡å¼ï¼ˆé«˜çº§ç”¨æˆ·ï¼‰</h4>
<p>Expressionæ¨¡å¼ä½¿ç”¨<strong>JavaScriptè¡¨è¾¾å¼</strong>æ¥å®šä¹‰è·¯ç”±é€»è¾‘ï¼Œé€‚åˆéœ€è¦å¤æ‚æ¡ä»¶åˆ¤æ–­çš„é«˜çº§åœºæ™¯ã€‚</p>
<p>ä¾‹å¦‚ï¼š<code>{{ $json.status === 'urgent' &amp;&amp; $json.amount &gt; 1000 }}</code></p>
<hr/>
<h3 data-id="heading-5">å¿«é€Ÿä¸Šæ‰‹ï¼š3æ­¥é…ç½®SwitchèŠ‚ç‚¹</h3>
<h4 data-id="heading-6">ç¬¬1æ­¥ï¼šæ·»åŠ SwitchèŠ‚ç‚¹</h4>
<ol>
<li>åœ¨å·¥ä½œæµç”»å¸ƒä¸Šç‚¹å‡»"<strong>æ·»åŠ èŠ‚ç‚¹</strong>"ï¼ˆæˆ–æŒ‰Tabé”®ï¼‰</li>
<li>æœç´¢"<strong>Switch</strong>"</li>
<li>é€‰æ‹©SwitchèŠ‚ç‚¹æ·»åŠ åˆ°å·¥ä½œæµ</li>
</ol>
<h4 data-id="heading-7">ç¬¬2æ­¥ï¼šé…ç½®è·¯ç”±è§„åˆ™</h4>
<ol>
<li>æ‰“å¼€SwitchèŠ‚ç‚¹çš„é…ç½®é¢æ¿</li>
<li>ç¡®ä¿"<strong>Mode</strong>"é€‰æ‹©ä¸º"<strong>Rules</strong>"</li>
<li>ç‚¹å‡»"<strong>Add Routing Rule</strong>"æ·»åŠ ç¬¬ä¸€æ¡è§„åˆ™</li>
<li>æ ¹æ®ä½ çš„æ•°æ®ï¼Œé…ç½®è§„åˆ™ï¼š
<ul>
<li><strong>å·¦ä¾§å­—æ®µ</strong>ï¼šé€‰æ‹©ä½ è¦æ£€æŸ¥çš„æ•°æ®å­—æ®µï¼ˆä¾‹å¦‚ <code>priority</code>ï¼‰</li>
<li><strong>ä¸­é—´æ“ä½œç¬¦</strong>ï¼šé€‰æ‹©æ¯”è¾ƒæ–¹å¼ï¼ˆä¾‹å¦‚ "ç­‰äº"ï¼‰</li>
<li><strong>å³ä¾§å€¼</strong>ï¼šè¾“å…¥è¦æ¯”è¾ƒçš„å€¼ï¼ˆä¾‹å¦‚ "high"ï¼‰</li>
</ul>
</li>
</ol>
<p><strong>ç¤ºä¾‹é…ç½®ï¼š</strong></p>
<pre><code class="hljs language-arduino" lang="arduino">è§„åˆ™<span class="hljs-number">1</span>ï¼špriority ç­‰äº <span class="hljs-string">"high"</span> â†’ è¾“å‡ºåˆ°ç¬¬<span class="hljs-number">1</span>æ¡åˆ†æ”¯
è§„åˆ™<span class="hljs-number">2</span>ï¼špriority ç­‰äº <span class="hljs-string">"medium"</span> â†’ è¾“å‡ºåˆ°ç¬¬<span class="hljs-number">2</span>æ¡åˆ†æ”¯
è§„åˆ™<span class="hljs-number">3</span>ï¼špriority ç­‰äº <span class="hljs-string">"low"</span> â†’ è¾“å‡ºåˆ°ç¬¬<span class="hljs-number">3</span>æ¡åˆ†æ”¯
</code></pre>
<h4 data-id="heading-8">ç¬¬3æ­¥ï¼šè¿æ¥åç»­èŠ‚ç‚¹</h4>
<ol>
<li>SwitchèŠ‚ç‚¹ä¼šè‡ªåŠ¨ä¸ºæ¯æ¡è§„åˆ™åˆ›å»ºä¸€ä¸ªè¾“å‡ºç«¯å£</li>
<li>ä»è¿™äº›è¾“å‡ºç«¯å£æ‹–æ‹½è¿çº¿åˆ°ä½ çš„åç»­å¤„ç†èŠ‚ç‚¹</li>
<li>ä¸ºæ¯ä¸ªè¾“å‡ºåˆ†æ”¯é…ç½®ä¸åŒçš„ä¸šåŠ¡é€»è¾‘</li>
</ol>
<hr/>
<h3 data-id="heading-9">5ä¸ªå…³é”®é…ç½®é€‰é¡¹è¯¦è§£</h3>
<h4 data-id="heading-10">1. é‡å‘½åè¾“å‡ºï¼ˆRename Outputï¼‰</h4>
<p><strong>é»˜è®¤æƒ…å†µä¸‹</strong>ï¼ŒSwitchçš„è¾“å‡ºè¢«æ ‡è®°ä¸º"Output 0"ã€"Output 1"ç­‰æ•°å­—æ ‡ç­¾ã€‚è¿™å®¹æ˜“æ··æ·†ï¼Œç‰¹åˆ«æ˜¯åœ¨å¤æ‚æµç¨‹ä¸­ã€‚</p>
<p><strong>æœ€ä½³å®è·µ</strong>ï¼šå¯ç”¨"<strong>Rename Output</strong>"ï¼Œç»™æ¯æ¡åˆ†æ”¯å–ä¸ªæœ‰æ„ä¹‰çš„åå­—ï¼š</p>
<ul>
<li>âœ… å¥½ï¼š<code>é«˜ä¼˜å…ˆçº§å¤„ç†</code>ã€<code>å¾…å®¡æ ¸</code>ã€<code>å·²å®Œæˆ</code></li>
<li>âŒ å·®ï¼š<code>Output 0</code>ã€<code>Output 1</code></li>
</ul>
<p><strong>é…ç½®æ­¥éª¤ï¼š</strong>
åœ¨é…ç½®è§„åˆ™æ—¶ï¼Œå‹¾é€‰"Rename Output"ï¼Œè¾“å…¥è‡ªå®šä¹‰åç§°ã€‚</p>
<h4 data-id="heading-11">2. é™çº§è¾“å‡ºï¼ˆFallback Outputï¼‰</h4>
<p>å½“æ•°æ®<strong>ä¸åŒ¹é…ä»»ä½•è·¯ç”±è§„åˆ™</strong>æ—¶ï¼Œé™çº§è¾“å‡ºå†³å®šè¯¥æ•°æ®çš„å»å‘ã€‚</p>
<p><strong>ä¸‰ç§é€‰é¡¹ï¼š</strong></p>

























<table><thead><tr><th>é€‰é¡¹</th><th>è¯´æ˜</th><th>åœºæ™¯</th></tr></thead><tbody><tr><td><strong>None</strong></td><td>å¿½ç•¥ä¸åŒ¹é…çš„æ•°æ®ï¼Œä¸è¾“å‡º</td><td>åªå…³å¿ƒå·²çŸ¥æ•°æ®ç±»å‹</td></tr><tr><td><strong>Extra Output</strong></td><td>åˆ›å»ºå•ç‹¬çš„è¾“å‡ºåˆ†æ”¯æ¥æ”¶æœªåŒ¹é…æ•°æ®</td><td>éœ€è¦å•ç‹¬å¤„ç†å¼‚å¸¸æƒ…å†µ</td></tr><tr><td><strong>Output 0</strong></td><td>å°†æœªåŒ¹é…æ•°æ®å‘é€åˆ°ç¬¬ä¸€æ¡è§„åˆ™çš„è¾“å‡º</td><td>å¿«é€Ÿå¤„ç†ï¼Œæ— éœ€é¢å¤–åˆ†æ”¯</td></tr></tbody></table>
<p><strong>ç¤ºä¾‹ï¼š</strong> å¦‚æœä¼˜å…ˆçº§å­—æ®µå‡ºç°æ„å¤–å€¼"urgent"ï¼Œä½†ä½ çš„è§„åˆ™ä¸­æ²¡æœ‰å®šä¹‰å®ƒï¼Œè¿™æ¡æ•°æ®å°±ä¼šæŒ‰ç…§é™çº§è®¾ç½®è¿›è¡Œå¤„ç†ã€‚</p>
<h4 data-id="heading-12">3. å¿½ç•¥å¤§å°å†™ï¼ˆIgnore Caseï¼‰</h4>
<p>å¯¹äºå­—ç¬¦ä¸²æ¯”è¾ƒï¼Œå¯ç”¨æ­¤é€‰é¡¹åï¼Œ<code>"HIGH"</code>ã€<code>"High"</code>ã€<code>"high"</code>ä¼šè¢«è§†ä¸ºç›¸åŒã€‚</p>
<p><strong>å»ºè®®</strong>ï¼šå¤§å¤šæ•°åœºæ™¯ä¸‹å¯ç”¨ï¼Œé¿å…å› å¤§å°å†™ä¸ä¸€è‡´å¯¼è‡´è·¯ç”±å¤±è´¥ã€‚</p>
<h4 data-id="heading-13">4. ä¸¥æ ¼ç±»å‹éªŒè¯ï¼ˆLess Strict Type Validationï¼‰</h4>
<p>å¯ç”¨åï¼Œn8nä¼š<strong>è‡ªåŠ¨å°è¯•ç±»å‹è½¬æ¢</strong>ã€‚ä¾‹å¦‚ï¼Œå­—ç¬¦ä¸²"123"å¯ä»¥ä¸æ•°å­—123æ¯”è¾ƒã€‚</p>
<p><strong>é»˜è®¤å»ºè®®</strong>ï¼šå…³é—­ã€‚è¿™æ ·å¯ä»¥æ•è·æ½œåœ¨çš„æ•°æ®ç±»å‹é”™è¯¯ã€‚</p>
<h4 data-id="heading-14">5. å‘é€æ•°æ®åˆ°æ‰€æœ‰åŒ¹é…è¾“å‡ºï¼ˆSend data to all matching outputsï¼‰</h4>
<p><strong>é»˜è®¤è¡Œä¸º</strong>ï¼šä¸€æ¡æ•°æ®åªè¦åŒ¹é…åˆ°ç¬¬ä¸€ä¸ªè§„åˆ™ï¼Œå°±åœæ­¢æ£€æŸ¥å…¶ä»–è§„åˆ™ã€‚</p>
<p><strong>å¯ç”¨å</strong>ï¼šåŒæ—¶åŒ¹é…å¤šä¸ªè§„åˆ™çš„æ•°æ®ä¼šè¢«<strong>å¤åˆ¶åˆ°æ‰€æœ‰åŒ¹é…çš„è¾“å‡ºåˆ†æ”¯</strong>ã€‚</p>
<p><strong>åœºæ™¯</strong>ï¼šæ ‡ç­¾ç³»ç»Ÿä¸­ï¼Œä¸€æ¡æ•°æ®å¯èƒ½åŒæ—¶å±äºå¤šä¸ªæ ‡ç­¾ï¼Œéœ€è¦è¢«å‘é€åˆ°æ‰€æœ‰ç›¸å…³çš„å¤„ç†æµç¨‹ã€‚</p>
<hr/>
<h3 data-id="heading-15">Switch vs Ifï¼šä½•æ—¶é€‰æ‹©å“ªä¸ªï¼Ÿ</h3>



































<table><thead><tr><th>å¯¹æ¯”ç»´åº¦</th><th>IfèŠ‚ç‚¹</th><th>SwitchèŠ‚ç‚¹</th></tr></thead><tbody><tr><td><strong>è¾“å‡ºåˆ†æ”¯æ•°</strong></td><td>å›ºå®š2ä¸ªï¼ˆçœŸ/å‡ï¼‰</td><td>æ— é™åˆ¶</td></tr><tr><td><strong>æ¡ä»¶å¤æ‚æ€§</strong></td><td>ç®€å•ï¼ˆå•ä¸€çœŸå‡åˆ¤æ–­ï¼‰</td><td>å¤æ‚ï¼ˆå¤šåˆ†æ”¯é€‰æ‹©ï¼‰</td></tr><tr><td><strong>æœ€é€‚ç”¨åœºæ™¯</strong></td><td>äºŒå…ƒå†³ç­–ï¼šå‘é€æˆ–ä¸å‘é€ã€é€šè¿‡æˆ–é˜»æ­¢</td><td>å¤šè·¯ç”±ï¼šä¼˜å…ˆçº§åˆ’åˆ†ã€ç±»å‹åˆ†ç±»ã€çŠ¶æ€åˆ¤æ–­</td></tr><tr><td><strong>æ˜“ç”¨æ€§</strong></td><td>ç›´è§‚ç®€æ´</td><td>åŠŸèƒ½æ›´å¼ºå¤§</td></tr><tr><td><strong>æ€§èƒ½</strong></td><td>ç•¥å¿«</td><td>ç•¥æ…¢ï¼ˆä½†å·®å¼‚å¾®ä¹å…¶å¾®ï¼‰</td></tr></tbody></table>
<p><strong>å®é™…å»ºè®®ï¼š</strong></p>
<ul>
<li>é—®è‡ªå·±ï¼š"æˆ‘éœ€è¦2ä¸ªè¿˜æ˜¯æ›´å¤šä¸ªå¤„ç†åˆ†æ”¯ï¼Ÿ"</li>
<li>å¦‚æœâ‰¤2ä¸ªï¼Œç”¨If</li>
<li>å¦‚æœ&gt;2ä¸ªï¼Œç”¨Switch</li>
</ul>
<hr/>
<h3 data-id="heading-16">å®æˆ˜æ¡ˆä¾‹ï¼šå®¢æˆ·åé¦ˆä¼˜å…ˆçº§è·¯ç”±å·¥ä½œæµ</h3>
<p>ç°åœ¨è®©æˆ‘ä»¬ç”¨ä¸€ä¸ªå®Œæ•´çš„ã€å¯æ‰§è¡Œçš„æ¡ˆä¾‹æ¥æ¼”ç¤ºSwitchèŠ‚ç‚¹çš„å¼ºå¤§åŠŸèƒ½ã€‚</p>
<h4 data-id="heading-17">ä¸šåŠ¡åœºæ™¯</h4>
<p>ä½ çš„å…¬å¸æ”¶åˆ°å¤šæ¸ é“å®¢æˆ·åé¦ˆï¼Œéœ€è¦æ ¹æ®<strong>ä¼˜å…ˆçº§</strong>è¿›è¡Œåˆ†å‘ï¼š</p>
<ul>
<li><strong>é«˜ä¼˜å…ˆçº§ï¼ˆhighï¼‰</strong>ï¼šç«‹å³é€šçŸ¥ç®¡ç†å‘˜ï¼Œé€šè¿‡ç´§æ€¥Slacké¢‘é“</li>
<li><strong>ä¸­ä¼˜å…ˆçº§ï¼ˆmediumï¼‰</strong>ï¼šè®°å½•åˆ°æ•°æ®åº“ï¼Œå®šæœŸå¤„ç†</li>
<li><strong>ä½ä¼˜å…ˆçº§ï¼ˆlowï¼‰</strong>ï¼šå­˜æ¡£ï¼Œæœˆåº¦å›é¡¾</li>
<li><strong>æœªçŸ¥ä¼˜å…ˆçº§</strong>ï¼šäººå·¥å®¡æ ¸é˜Ÿåˆ—</li>
</ul>
<h4 data-id="heading-18">å·¥ä½œæµæ¶æ„</h4>
<pre><code class="hljs language-scss" lang="scss">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Webhookè§¦å‘   â”‚ (æ¥æ”¶å®¢æˆ·åé¦ˆæ•°æ®)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  SwitchèŠ‚ç‚¹     â”‚ (æ ¹æ®priorityå­—æ®µè·¯ç”±)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”Œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”
    â”‚    â”‚    â”‚     â”‚
    â–¼    â–¼    â–¼     â–¼
  é«˜ä¼˜   ä¸­ä¼˜  ä½ä¼˜  æœªçŸ¥
  å…ˆçº§   å…ˆçº§  å…ˆçº§  ä¼˜å…ˆçº§
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f960ba70a3eb465f835b535d7cfac633~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgdW5kc2t5:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768014372&amp;x-signature=1bHH3QwSmF2yp9gi13spEvnQUMk%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-19">å®Œæ•´å·¥ä½œæµJSONä»£ç </h4>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"å®¢æˆ·åé¦ˆä¼˜å…ˆçº§è·¯ç”± - SwitchèŠ‚ç‚¹æ•™ç¨‹"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"nodes"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"parameters"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"method"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"POST"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"url"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://webhook.site/your-unique-id"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"options"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span>
      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"1"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Webhook"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"n8n-nodes-base.webhook"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"typeVersion"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"position"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-number">100</span><span class="hljs-punctuation">,</span> <span class="hljs-number">300</span><span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"parameters"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"options"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span>
      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Switch"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"n8n-nodes-base.switch"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"typeVersion"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"position"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-number">400</span><span class="hljs-punctuation">,</span> <span class="hljs-number">300</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"mode"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"rules"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"rules"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
        <span class="hljs-punctuation">{</span>
          <span class="hljs-attr">"condition"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"string"</span><span class="hljs-punctuation">,</span>
          <span class="hljs-attr">"value1"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"={{ $json.priority }}"</span><span class="hljs-punctuation">,</span>
          <span class="hljs-attr">"value2"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"high"</span><span class="hljs-punctuation">,</span>
          <span class="hljs-attr">"operator"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"equal"</span><span class="hljs-punctuation">,</span>
          <span class="hljs-attr">"output"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span>
        <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
        <span class="hljs-punctuation">{</span>
          <span class="hljs-attr">"condition"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"string"</span><span class="hljs-punctuation">,</span>
          <span class="hljs-attr">"value1"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"={{ $json.priority }}"</span><span class="hljs-punctuation">,</span>
          <span class="hljs-attr">"value2"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"medium"</span><span class="hljs-punctuation">,</span>
          <span class="hljs-attr">"operator"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"equal"</span><span class="hljs-punctuation">,</span>
          <span class="hljs-attr">"output"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span>
        <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
        <span class="hljs-punctuation">{</span>
          <span class="hljs-attr">"condition"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"string"</span><span class="hljs-punctuation">,</span>
          <span class="hljs-attr">"value1"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"={{ $json.priority }}"</span><span class="hljs-punctuation">,</span>
          <span class="hljs-attr">"value2"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"low"</span><span class="hljs-punctuation">,</span>
          <span class="hljs-attr">"operator"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"equal"</span><span class="hljs-punctuation">,</span>
          <span class="hljs-attr">"output"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2</span>
        <span class="hljs-punctuation">}</span>
      <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"options"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"fallbackOutput"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">3</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"ignoreCaseInStringComparison"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"parameters"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"content"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ğŸ”´ é«˜ä¼˜å…ˆçº§åé¦ˆ\næ¥è‡ª: {{ $json.sender }}\nå†…å®¹: {{ $json.message }}"</span>
      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"3"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"é«˜ä¼˜å…ˆçº§å¤„ç†"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"n8n-nodes-base.noOp"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"typeVersion"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"position"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-number">700</span><span class="hljs-punctuation">,</span> <span class="hljs-number">100</span><span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"parameters"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"content"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ğŸŸ¡ ä¸­ä¼˜å…ˆçº§åé¦ˆ\næ¥è‡ª: {{ $json.sender }}\nå†…å®¹: {{ $json.message }}"</span>
      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"4"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ä¸­ä¼˜å…ˆçº§å¤„ç†"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"n8n-nodes-base.noOp"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"typeVersion"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"position"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-number">700</span><span class="hljs-punctuation">,</span> <span class="hljs-number">300</span><span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"parameters"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"content"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ğŸŸ¢ ä½ä¼˜å…ˆçº§åé¦ˆ\næ¥è‡ª: {{ $json.sender }}\nå†…å®¹: {{ $json.message }}"</span>
      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"5"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ä½ä¼˜å…ˆçº§å¤„ç†"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"n8n-nodes-base.noOp"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"typeVersion"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"position"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-number">700</span><span class="hljs-punctuation">,</span> <span class="hljs-number">500</span><span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"parameters"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"content"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"âšª æœªçŸ¥ä¼˜å…ˆçº§ - éœ€è¦äººå·¥å®¡æ ¸\næ¥è‡ª: {{ $json.sender }}\nå†…å®¹: {{ $json.message }}\nä¼˜å…ˆçº§å€¼: {{ $json.priority }}"</span>
      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"6"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"é™çº§å¤„ç†"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"n8n-nodes-base.noOp"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"typeVersion"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"position"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-number">700</span><span class="hljs-punctuation">,</span> <span class="hljs-number">700</span><span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"connections"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"Webhook"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"main"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
        <span class="hljs-punctuation">[</span>
          <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">"node"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Switch"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"main"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"index"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span>
          <span class="hljs-punctuation">}</span>
        <span class="hljs-punctuation">]</span>
      <span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"Switch"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"main"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
        <span class="hljs-punctuation">[</span>
          <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">"node"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"é«˜ä¼˜å…ˆçº§å¤„ç†"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"main"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"index"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span>
          <span class="hljs-punctuation">}</span>
        <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
        <span class="hljs-punctuation">[</span>
          <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">"node"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ä¸­ä¼˜å…ˆçº§å¤„ç†"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"main"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"index"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span>
          <span class="hljs-punctuation">}</span>
        <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
        <span class="hljs-punctuation">[</span>
          <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">"node"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ä½ä¼˜å…ˆçº§å¤„ç†"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"main"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"index"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span>
          <span class="hljs-punctuation">}</span>
        <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
        <span class="hljs-punctuation">[</span>
          <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">"node"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"é™çº§å¤„ç†"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"main"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"index"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span>
          <span class="hljs-punctuation">}</span>
        <span class="hljs-punctuation">]</span>
      <span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h4 data-id="heading-20">å¦‚ä½•ä½¿ç”¨è¿™ä¸ªå·¥ä½œæµ</h4>
<p><strong>ç¬¬1æ­¥ï¼šå¯¼å…¥å·¥ä½œæµ</strong></p>
<ol>
<li>å¤åˆ¶ä¸Šè¿°JSONä»£ç </li>
<li>è¿›å…¥ä½ çš„n8nä»ªè¡¨æ¿ï¼Œç‚¹å‡»"æ–°å»ºå·¥ä½œæµ"</li>
<li>ç‚¹å‡»å³ä¸Šè§’"..."èœå•ï¼Œé€‰æ‹©"ä»æ–‡ä»¶å¯¼å…¥"</li>
<li>ç²˜è´´JSONä»£ç å¹¶å¯¼å…¥</li>
</ol>
<p><strong>ç¬¬2æ­¥ï¼šé…ç½®Webhook</strong></p>
<ol>
<li>æ‰“å¼€WebhookèŠ‚ç‚¹</li>
<li>å¤åˆ¶æ˜¾ç¤ºçš„Webhook URL</li>
<li>ä½¿ç”¨ä»»ä½•HTTPå·¥å…·ï¼ˆå¦‚Postmanæˆ–curlï¼‰å‘è¯¥URLå‘é€æµ‹è¯•æ•°æ®</li>
</ol>
<p><strong>ç¬¬3æ­¥ï¼šå‘é€æµ‹è¯•æ•°æ®</strong></p>
<p>ä½¿ç”¨cURLå‘½ä»¤ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">curl -X POST https://your-webhook-url \
  -H <span class="hljs-string">"Content-Type: application/json"</span> \
  -d <span class="hljs-string">'{
    "sender": "customer@example.com",
    "message": "æˆ‘çš„è®¢å•å‡ºç°äº†é—®é¢˜",
    "priority": "high"
  }'</span>
</code></pre>
<p><strong>ç¬¬4æ­¥ï¼šæ£€æŸ¥æ‰§è¡Œç»“æœ</strong></p>
<ol>
<li>è¿è¡Œå·¥ä½œæµ</li>
<li>æŸ¥çœ‹"æ‰§è¡Œå†å²"</li>
<li>è§‚å¯Ÿæ•°æ®æ˜¯å¦è¢«æ­£ç¡®è·¯ç”±åˆ°å¯¹åº”çš„ä¼˜å…ˆçº§åˆ†æ”¯</li>
</ol>
<hr/>
<h3 data-id="heading-21">å¸¸è§é”™è¯¯ä¸è§£å†³æ–¹æ¡ˆ</h3>
<h4 data-id="heading-22">âŒ é”™è¯¯1ï¼šæ•°æ®æ²¡æœ‰è¢«è·¯ç”±åˆ°ä»»ä½•è¾“å‡º</h4>
<p><strong>åŸå› ï¼š</strong> æ•°æ®ä¸åŒ¹é…ä»»ä½•é…ç½®çš„è§„åˆ™</p>
<p><strong>è§£å†³ï¼š</strong></p>
<ol>
<li>æ£€æŸ¥å­—æ®µåç§°æ˜¯å¦æ­£ç¡®ï¼ˆåŒºåˆ†å¤§å°å†™ï¼‰</li>
<li>ä½¿ç”¨"æ‰§è¡Œå•ä¸ªèŠ‚ç‚¹"æ¥æŸ¥çœ‹å‰ä¸€ä¸ªèŠ‚ç‚¹çš„å®é™…è¾“å‡º</li>
<li>æ£€æŸ¥æ¯”è¾ƒå€¼æ˜¯å¦åŒ…å«å¤šä½™ç©ºæ ¼</li>
</ol>
<h4 data-id="heading-23">âŒ é”™è¯¯2ï¼šå¤§å°å†™å¯¼è‡´çš„åŒ¹é…å¤±è´¥</h4>
<p><strong>åŸå› ï¼š</strong> æ•°æ®ä¸­æ˜¯"HIGH"ï¼Œä½†è§„åˆ™ä¸­å†™çš„æ˜¯"high"</p>
<p><strong>è§£å†³ï¼š</strong></p>
<ol>
<li>å¯ç”¨"<strong>Ignore Case</strong>"é€‰é¡¹</li>
<li>æˆ–åœ¨å‰ä¸€ä¸ªèŠ‚ç‚¹ä¸­ä½¿ç”¨<code>.toLowerCase()</code>è§„èŒƒåŒ–æ•°æ®</li>
</ol>
<h4 data-id="heading-24">âŒ é”™è¯¯3ï¼šExpressionæ¨¡å¼è¿”å›NaNæˆ–undefined</h4>
<p><strong>åŸå› ï¼š</strong> è¡¨è¾¾å¼è¯­æ³•é”™è¯¯</p>
<p><strong>è§£å†³ï¼š</strong></p>
<ol>
<li>æ£€æŸ¥å˜é‡å¼•ç”¨æ˜¯å¦æ­£ç¡®ï¼š<code>$json.fieldName</code></li>
<li>ä½¿ç”¨JavaScriptæ§åˆ¶å°æµ‹è¯•è¡¨è¾¾å¼</li>
<li>å‚è€ƒn8nè¡¨è¾¾å¼æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.n8n.io%2Fcode-examples%2Fexpressions%2F" target="_blank" title="https://docs.n8n.io/code-examples/expressions/" ref="nofollow noopener noreferrer">docs.n8n.io/code-examplâ€¦</a></li>
</ol>
<h4 data-id="heading-25">âŒ é”™è¯¯4ï¼šå¤šæ¡è§„åˆ™éƒ½åŒ¹é…ï¼Œæ•°æ®åªè¾“å‡ºåˆ°ç¬¬ä¸€ä¸ª</h4>
<p><strong>åŸå› ï¼š</strong> æ²¡æœ‰å¯ç”¨"Send data to all matching outputs"</p>
<p><strong>è§£å†³ï¼š</strong></p>
<ol>
<li>æ‰“å¼€SwitchèŠ‚ç‚¹çš„Options</li>
<li>å¯ç”¨"<strong>Send data to all matching outputs</strong>"</li>
<li>æ­¤æ—¶åŒ¹é…å¤šä¸ªè§„åˆ™çš„æ•°æ®ä¼šè¢«å¤åˆ¶åˆ°æ‰€æœ‰å¯¹åº”çš„è¾“å‡º</li>
</ol>
<hr/>
<h3 data-id="heading-26">è¿›é˜¶æŠ€å·§</h3>
<h4 data-id="heading-27">æŠ€å·§1ï¼šä½¿ç”¨è¡¨è¾¾å¼å®ç°å¤æ‚æ¡ä»¶</h4>
<p>åœ¨Rulesæ¨¡å¼ä¸‹ï¼Œè™½ç„¶ç•Œé¢æœ‰é™åˆ¶ï¼Œä½†ä½ å¯ä»¥<strong>åœ¨æ¯”è¾ƒå€¼ä¸­ä½¿ç”¨è¡¨è¾¾å¼</strong>ï¼š</p>
<p>é…ç½®ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">value1: {{ <span class="hljs-variable">$json</span>.amount }}
operator: å¤§äº
value2: {{ <span class="hljs-variable">$json</span>.<span class="hljs-built_in">limit</span> + 100 }}
</code></pre>
<h4 data-id="heading-28">æŠ€å·§2ï¼šæ ¹æ®æ•°ç»„é•¿åº¦è¿›è¡Œè·¯ç”±</h4>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">condition: Array</span>
<span class="hljs-section">value1: {{ $json.tags }}</span>
<span class="hljs-section">operator: length greater than</span>
<span class="hljs-section">value2: 5</span>
</code></pre>
<p>è¿™æ ·ï¼Œåªæœ‰æ ‡ç­¾æ•°å¤§äº5çš„æ•°æ®æ‰ä¼šè¢«è·¯ç”±åˆ°è¿™æ¡åˆ†æ”¯ã€‚</p>
<h4 data-id="heading-29">æŠ€å·§3ï¼šä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼è¿›è¡Œé«˜çº§æ–‡æœ¬åŒ¹é…</h4>
<pre><code class="hljs language-vbnet" lang="vbnet"><span class="hljs-symbol">condition:</span> <span class="hljs-type">String</span>
<span class="hljs-symbol">value1:</span> {{ $json.email }}
<span class="hljs-symbol">operator:</span> matches regex
<span class="hljs-symbol">value2:</span> ^[a-zA-Z0-<span class="hljs-number">9._</span>%+-]+@(gmail|yahoo|outlook)\.com$
</code></pre>
<p>è¿™æ ·åªä¼šåŒ¹é…ç‰¹å®šé‚®ç®±åŸŸåçš„ç”¨æˆ·ã€‚</p>
<h4 data-id="heading-30">æŠ€å·§4ï¼šå…ˆæ’åºå†Switchï¼Œä¼˜åŒ–æ€§èƒ½</h4>
<p>å¦‚æœä½ çš„æ•°æ®é‡å¾ˆå¤§ï¼Œå…ˆç”¨<strong>SortèŠ‚ç‚¹</strong>å¯¹æ•°æ®è¿›è¡Œåˆ†ç»„ï¼Œå†ç”¨Switchå¤„ç†ï¼Œèƒ½æ˜¾è‘—æå‡æ€§èƒ½ã€‚</p>
<hr/>
<h3 data-id="heading-31">è°ƒè¯•æŠ€å·§</h3>
<h4 data-id="heading-32">1. å•æ­¥æ‰§è¡Œ</h4>
<p>ç‚¹å‡»SwitchèŠ‚ç‚¹ï¼Œé€‰æ‹©"<strong>Execute node</strong>"ï¼ˆæ‰§è¡Œæ­¤èŠ‚ç‚¹ï¼‰ï¼Œåªæ‰§è¡Œåˆ°è¿™é‡Œåœæ­¢ï¼ŒæŸ¥çœ‹å„åˆ†æ”¯çš„è¾“å‡ºã€‚</p>
<h4 data-id="heading-33">2. ä½¿ç”¨æ—¥å¿—èŠ‚ç‚¹ï¼ˆLogger Nodeï¼‰</h4>
<p>åœ¨Switchå‰åå„æ·»åŠ ä¸€ä¸ªLoggerèŠ‚ç‚¹ï¼Œè®°å½•æ•°æ®å†…å®¹ï¼š</p>
<pre><code class="hljs language-json" lang="json">å‰ç½®æ—¥å¿—<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">{</span> JSON.stringify($json) <span class="hljs-punctuation">}</span><span class="hljs-punctuation">}</span>
åç½®æ—¥å¿—<span class="hljs-punctuation">:</span> è¿›å…¥åˆ†æ”¯ <span class="hljs-punctuation">{</span><span class="hljs-punctuation">{</span> $node<span class="hljs-punctuation">[</span><span class="hljs-string">"Switch"</span><span class="hljs-punctuation">]</span>.json.output <span class="hljs-punctuation">}</span><span class="hljs-punctuation">}</span>
</code></pre>
<h4 data-id="heading-34">3. æ£€æŸ¥è¡¨è¾¾å¼é”™è¯¯</h4>
<p>åœ¨Expressionæ¨¡å¼ä¸‹ï¼Œè‹¥æœ‰é”™è¯¯ï¼Œä¼šæ˜¾ç¤ºçº¢è‰²è­¦å‘Šã€‚é¼ æ ‡æ‚¬åœå¯çœ‹é”™è¯¯è¯¦æƒ…ã€‚</p>
<h4 data-id="heading-35">4. æµ‹è¯•æ•°æ®</h4>
<p>ä½¿ç”¨"æµ‹è¯•æ•°æ®"åŠŸèƒ½æ³¨å…¥è™šæ‹Ÿæ•°æ®ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"sender"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"test@example.com"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"message"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Test message"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"priority"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"high"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<hr/>
<h3 data-id="heading-36">æ€»ç»“è¦ç‚¹</h3>

































<table><thead><tr><th>è¦ç‚¹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>é€‚ç”¨åœºæ™¯</strong></td><td>éœ€è¦æ ¹æ®æ¡ä»¶å°†æ•°æ®åˆ†å‘åˆ°å¤šä¸ªå¤„ç†åˆ†æ”¯</td></tr><tr><td><strong>é…ç½®æ–¹å¼</strong></td><td>Rulesï¼ˆå¯è§†åŒ–ï¼‰æˆ–Expressionï¼ˆç¼–ç¨‹ï¼‰</td></tr><tr><td><strong>æ ¸å¿ƒä¼˜åŠ¿</strong></td><td>æ— é™åˆ¶åˆ†æ”¯ã€æ˜“äºç»´æŠ¤ã€æ— éœ€ç¼–ç </td></tr><tr><td><strong>å…³é”®å‚æ•°</strong></td><td>æ¡ä»¶ã€æ•°æ®ç±»å‹ã€æ¯”è¾ƒæ“ä½œç¬¦ã€é™çº§è¾“å‡º</td></tr><tr><td><strong>å¸¸è§é—®é¢˜</strong></td><td>å¤§å°å†™ã€å­—æ®µåã€é™çº§å¤„ç†</td></tr><tr><td><strong>æœ€ä½³å®è·µ</strong></td><td>ä½¿ç”¨æœ‰æ„ä¹‰çš„è¾“å‡ºåç§°ã€å¯ç”¨Ignore Caseã€æ­£ç¡®é…ç½®é™çº§è¾“å‡º</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-37">ä¸‹ä¸€æ­¥å­¦ä¹ è·¯å¾„</h3>
<p>æŒæ¡SwitchèŠ‚ç‚¹åï¼Œä½ å¯ä»¥è¿›ä¸€æ­¥å­¦ä¹ ï¼š</p>
<ol>
<li><strong>ä¸IfèŠ‚ç‚¹ç»“åˆ</strong> - æ„å»ºæ›´å¤æ‚çš„æ¡ä»¶é€»è¾‘</li>
<li><strong>FilterèŠ‚ç‚¹</strong> - è¿‡æ»¤ä¸éœ€è¦çš„æ•°æ®</li>
<li><strong>Loop Over Items</strong> - å¯¹é›†åˆä¸­çš„æ¯ä¸ªå…ƒç´ è¿è¡ŒSwitch</li>
<li><strong>é”™è¯¯å¤„ç†</strong> - ä½¿ç”¨Switchå¤„ç†å¼‚å¸¸æƒ…å†µ</li>
<li><strong>æ€§èƒ½ä¼˜åŒ–</strong> - åœ¨å¤§æ•°æ®é‡åœºæ™¯ä¸‹ä¼˜åŒ–Switché€»è¾‘</li>
</ol>
<hr/>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.n8n.io%2Fintegrations%2Fbuiltin%2Fcore-nodes%2Fn8n-nodes-base.switch%2F" target="_blank" title="https://docs.n8n.io/integrations/builtin/core-nodes/n8n-nodes-base.switch/" ref="nofollow noopener noreferrer">å®˜æ–¹æ–‡æ¡£</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.undsky.com%2Fblog%2F%3Fcategory%3Dn8n%25E6%2595%2599%25E7%25A8%258B%23" target="_blank" title="https://www.undsky.com/blog/?category=n8n%E6%95%99%E7%A8%8B#" ref="nofollow noopener noreferrer">n8nç³»åˆ—æ•™ç¨‹</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[25-å®¢æœå·¥å•ç³»ç»Ÿå®æˆ˜ï¼ˆäºŒï¼‰ï¼šRAGæ£€ç´¢ä¸æ™ºèƒ½é—®ç­”]]></title>    <link>https://juejin.cn/post/7589919989039087679</link>    <guid>https://juejin.cn/post/7589919989039087679</guid>    <pubDate>2026-01-02T12:17:37.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589919989039087679" data-draft-id="7589940210832130091" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="25-å®¢æœå·¥å•ç³»ç»Ÿå®æˆ˜ï¼ˆäºŒï¼‰ï¼šRAGæ£€ç´¢ä¸æ™ºèƒ½é—®ç­”"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-01-02T12:17:37.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="kevin_kang"/> <meta itemprop="url" content="https://juejin.cn/user/3034307824720670"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            25-å®¢æœå·¥å•ç³»ç»Ÿå®æˆ˜ï¼ˆäºŒï¼‰ï¼šRAGæ£€ç´¢ä¸æ™ºèƒ½é—®ç­”
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3034307824720670/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    kevin_kang
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-02T12:17:37.000Z" title="Fri Jan 02 2026 12:17:37 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å®¢æœå·¥å•ç³»ç»Ÿå®æˆ˜ï¼ˆäºŒï¼‰ï¼šRAGæ£€ç´¢ä¸æ™ºèƒ½é—®ç­”</h2>
<h3 data-id="heading-1">å‰è¨€</h3>
<p>åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å®Œæˆäº†å·¥å•æ•°æ®çš„å¯¼å…¥å’Œå‘é‡åŒ–å­˜å‚¨ã€‚æœ¬æ–‡å°†ä»‹ç»å¦‚ä½•åŸºäºè¿™äº›å‘é‡æ•°æ®ï¼Œå®ç°æ™ºèƒ½æ£€ç´¢å’Œé—®ç­”åŠŸèƒ½ï¼Œè®©AIèƒ½å¤Ÿæ ¹æ®å†å²å·¥å•è‡ªåŠ¨æ¨èè§£å†³æ–¹æ¡ˆã€‚</p>
<p><strong>æœ¬æ–‡åŸºäºçœŸå®é¡¹ç›®ä»£ç </strong>ï¼Œæ‰€æœ‰ç¤ºä¾‹å‡å¯åœ¨GitHubä»“åº“ä¸­æ‰¾åˆ°å¯¹åº”å®ç°ã€‚</p>
<p><strong>é€‚åˆè¯»è€…ï¼š</strong> AIå·¥ç¨‹å¸ˆã€åç«¯å¼€å‘è€…ã€å…¨æ ˆå·¥ç¨‹å¸ˆ</p>
<hr/>
<h3 data-id="heading-2">ä¸€ã€RAGå·¥ä½œåŸç†</h3>
<h4 data-id="heading-3">1.1 ä¼ ç»ŸLLM vs RAG</h4>
<pre><code class="hljs">ä¼ ç»ŸLLMï¼š
ç”¨æˆ·é—®é¢˜ â†’ LLM â†’ ç­”æ¡ˆ
é—®é¢˜ï¼šçŸ¥è¯†æœ‰é™ã€å¯èƒ½è¿‡æ—¶ã€å®¹æ˜“å¹»è§‰

RAGï¼ˆæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰ï¼š
ç”¨æˆ·é—®é¢˜ â†’ å‘é‡æ£€ç´¢ â†’ ç›¸å…³å·¥å• â†’ ç»„è£…Prompt â†’ LLM â†’ ç­”æ¡ˆ
ä¼˜åŠ¿ï¼šçŸ¥è¯†å¯æ›´æ–°ã€ç­”æ¡ˆæ›´å‡†ç¡®ã€æœ‰æ®å¯æŸ¥
</code></pre>
<h4 data-id="heading-4">1.2 å®Œæ•´æµç¨‹</h4>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-bullet">1.</span> ç”¨æˆ·æé—®ï¼š"ç‰©æµä¿¡æ¯5å¤©æ²¡æ›´æ–°æ€ä¹ˆåŠï¼Ÿ"
   â†“
<span class="hljs-bullet">2.</span> å‘é‡åŒ–é—®é¢˜ â†’ [0.23, -0.45, 0.67, ...]
   â†“
<span class="hljs-bullet">3.</span> Weaviateæ£€ç´¢ â†’ Top-5ç›¸ä¼¼å·¥å•
   â†“
<span class="hljs-bullet">4.</span> ç»„è£…Promptï¼ˆé—®é¢˜ + å†å²å·¥å•ï¼‰
   â†“
<span class="hljs-bullet">5.</span> LLMç”Ÿæˆç­”æ¡ˆ
   â†“
<span class="hljs-bullet">6.</span> è¿”å›ç­”æ¡ˆ + æ¥æºå·¥å•
</code></pre>
<hr/>
<h3 data-id="heading-5">äºŒã€å‘é‡æ£€ç´¢å®ç°</h3>
<h4 data-id="heading-6">2.1 ç›¸ä¼¼åº¦æœç´¢</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># agent/ticket_agent.py</span>
<span class="hljs-keyword">from</span> langchain_core.documents <span class="hljs-keyword">import</span> Document
<span class="hljs-keyword">import</span> weaviate.classes <span class="hljs-keyword">as</span> wvc

<span class="hljs-keyword">class</span> <span class="hljs-title class_">ServiceTicketAgent</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">_search_similar_documents</span>(<span class="hljs-params">self, query: <span class="hljs-built_in">str</span>, k: <span class="hljs-built_in">int</span> = <span class="hljs-number">5</span></span>) -&gt; <span class="hljs-type">List</span>[Document]:
        <span class="hljs-string">"""æœç´¢ç›¸ä¼¼å·¥å•"""</span>
        <span class="hljs-comment"># 1. ç”ŸæˆæŸ¥è¯¢å‘é‡</span>
        query_vector = self.embeddings.embed_query(query)
        
        <span class="hljs-comment"># 2. åœ¨Weaviateä¸­æœç´¢</span>
        response = self.collection.query.near_vector(
            near_vector=query_vector,
            limit=k,
            return_metadata=wvc.query.MetadataQuery(distance=<span class="hljs-literal">True</span>)
        )
        
        <span class="hljs-comment"># 3. è½¬æ¢ä¸ºDocumentæ ¼å¼</span>
        documents = []
        <span class="hljs-keyword">for</span> obj <span class="hljs-keyword">in</span> response.objects:
            doc = Document(
                page_content=obj.properties[<span class="hljs-string">'content'</span>],
                metadata={
                    <span class="hljs-string">'ticket_id'</span>: obj.properties.get(<span class="hljs-string">'ticket_id'</span>, <span class="hljs-string">''</span>),
                    <span class="hljs-string">'issue_type'</span>: obj.properties.get(<span class="hljs-string">'issue_type'</span>, <span class="hljs-string">''</span>),
                    <span class="hljs-string">'priority'</span>: obj.properties.get(<span class="hljs-string">'priority'</span>, <span class="hljs-string">''</span>),
                    <span class="hljs-string">'status'</span>: obj.properties.get(<span class="hljs-string">'status'</span>, <span class="hljs-string">''</span>),
                    <span class="hljs-string">'distance'</span>: obj.metadata.distance <span class="hljs-keyword">if</span> obj.metadata <span class="hljs-keyword">else</span> <span class="hljs-literal">None</span>
                }
            )
            documents.append(doc)
        
        <span class="hljs-keyword">return</span> documents
</code></pre>
<h4 data-id="heading-7">2.2 æ£€ç´¢æµ‹è¯•</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># æµ‹è¯•æ£€ç´¢åŠŸèƒ½</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">test_search</span>():
    agent = ServiceTicketAgent()
    
    <span class="hljs-comment"># æµ‹è¯•é—®é¢˜</span>
    question = <span class="hljs-string">"ç‰©æµä¿¡æ¯5å¤©æ²¡æ›´æ–°ï¼Œæ€ä¹ˆå¤„ç†ï¼Ÿ"</span>
    
    <span class="hljs-comment"># æ£€ç´¢ç›¸ä¼¼å·¥å•</span>
    docs = agent._search_similar_documents(question, k=<span class="hljs-number">5</span>)
    
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ£€ç´¢åˆ° <span class="hljs-subst">{<span class="hljs-built_in">len</span>(docs)}</span> æ¡ç›¸å…³å·¥å•ï¼š\n"</span>)
    <span class="hljs-keyword">for</span> i, doc <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(docs, <span class="hljs-number">1</span>):
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å·¥å• <span class="hljs-subst">{i}</span>:"</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"  ID: <span class="hljs-subst">{doc.metadata[<span class="hljs-string">'ticket_id'</span>]}</span>"</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"  ç±»å‹: <span class="hljs-subst">{doc.metadata[<span class="hljs-string">'issue_type'</span>]}</span>"</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"  è·ç¦»: <span class="hljs-subst">{doc.metadata[<span class="hljs-string">'distance'</span>]:<span class="hljs-number">.4</span>f}</span>"</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"  å†…å®¹: <span class="hljs-subst">{doc.page_content[:<span class="hljs-number">100</span>]}</span>..."</span>)
        <span class="hljs-built_in">print</span>()

<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    test_search()
</code></pre>
<p><strong>è¾“å‡ºç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-makefile" lang="makefile">æ£€ç´¢åˆ° 5 æ¡ç›¸å…³å·¥å•ï¼š

å·¥å• 1:
  ID: TK011
  ç±»å‹: è®¢å•æŸ¥è¯¢
  è·ç¦»: 0.1234
  å†…å®¹: å·¥å•ç¼–å·: TK011
<span class="hljs-section">é—®é¢˜ç±»å‹: è®¢å•æŸ¥è¯¢</span>
<span class="hljs-section">é—®é¢˜æè¿°: è®¢å•å·²å‘è´§5å¤©ä½†ç‰©æµä¿¡æ¯æœªæ›´æ–°ï¼Œæ‹…å¿ƒåŒ…è£¹ä¸¢å¤±...</span>

å·¥å• 2:
  ID: TK006
  ç±»å‹: ç‰©æµé—®é¢˜
  è·ç¦»: 0.2456
  å†…å®¹: å·¥å•ç¼–å·: TK006
<span class="hljs-section">é—®é¢˜ç±»å‹: ç‰©æµé—®é¢˜</span>
<span class="hljs-section">é—®é¢˜æè¿°: å¿«é€’æ˜¾ç¤ºå·²ç­¾æ”¶ä½†æœ¬äººæœªæ”¶åˆ°è´§ç‰©...</span>
</code></pre>
<hr/>
<h3 data-id="heading-8">ä¸‰ã€Promptå·¥ç¨‹</h3>
<h4 data-id="heading-9">3.1 Promptæ¨¡æ¿è®¾è®¡</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># agent/config.py</span>
QA_PROMPT_TEMPLATE = <span class="hljs-string">"""ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„å®¢æœåŠ©æ‰‹ï¼Œæ“…é•¿æ ¹æ®å†å²å·¥å•æä¾›è§£å†³æ–¹æ¡ˆã€‚

ä»¥ä¸‹æ˜¯ç›¸å…³çš„å†å²å·¥å•è®°å½•ï¼š

{context}

å®¢æˆ·é—®é¢˜ï¼š{question}

è¯·åŸºäºä»¥ä¸Šå†å²å·¥å•ï¼Œä¸ºå®¢æˆ·æä¾›ä¸“ä¸šçš„è§£å†³æ–¹æ¡ˆã€‚è¦æ±‚ï¼š
1. å¦‚æœæ‰¾åˆ°ç›¸å…³è§£å†³æ–¹æ¡ˆï¼Œè¯·è¯¦ç»†è¯´æ˜å¤„ç†æ­¥éª¤
2. å¦‚æœå†å²å·¥å•ä¸­æ²¡æœ‰å®Œå…¨åŒ¹é…çš„æ¡ˆä¾‹ï¼Œå¯ä»¥ç»¼åˆå¤šä¸ªç›¸ä¼¼æ¡ˆä¾‹ç»™å‡ºå»ºè®®
3. ä¿æŒå‹å¥½ã€ä¸“ä¸šçš„è¯­æ°”
4. å¦‚æœç¡®å®æ— æ³•è§£å†³ï¼Œå»ºè®®å®¢æˆ·è”ç³»äººå·¥å®¢æœ

å›ç­”ï¼š"""</span>
</code></pre>
<h4 data-id="heading-10">3.2 åŠ¨æ€Promptç»„è£…</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> langchain_core.prompts <span class="hljs-keyword">import</span> PromptTemplate

<span class="hljs-keyword">class</span> <span class="hljs-title class_">ServiceTicketAgent</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">_setup_components</span>(<span class="hljs-params">self</span>):
        <span class="hljs-comment"># åˆå§‹åŒ–Promptæ¨¡æ¿</span>
        self.prompt_template = PromptTemplate(
            input_variables=[<span class="hljs-string">"context"</span>, <span class="hljs-string">"question"</span>],
            template=config.QA_PROMPT_TEMPLATE
        )
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">_format_context</span>(<span class="hljs-params">self, docs: <span class="hljs-type">List</span>[Document]</span>) -&gt; <span class="hljs-built_in">str</span>:
        <span class="hljs-string">"""æ ¼å¼åŒ–ä¸Šä¸‹æ–‡"""</span>
        context_parts = []
        
        <span class="hljs-keyword">for</span> i, doc <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(docs, <span class="hljs-number">1</span>):
            context_parts.append(<span class="hljs-string">f"ã€å†å²å·¥å• <span class="hljs-subst">{i}</span>ã€‘\n<span class="hljs-subst">{doc.page_content}</span>"</span>)
        
        <span class="hljs-keyword">return</span> <span class="hljs-string">"\n\n"</span>.join(context_parts)
</code></pre>
<hr/>
<h3 data-id="heading-11">å››ã€LCELé—®ç­”é“¾</h3>
<h4 data-id="heading-12">4.1 æ„å»ºé—®ç­”é“¾</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> langchain_core.runnables <span class="hljs-keyword">import</span> RunnablePassthrough
<span class="hljs-keyword">from</span> langchain_core.output_parsers <span class="hljs-keyword">import</span> StrOutputParser

<span class="hljs-keyword">class</span> <span class="hljs-title class_">ServiceTicketAgent</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">_setup_qa_chain</span>(<span class="hljs-params">self</span>):
        <span class="hljs-string">"""è®¾ç½®é—®ç­”é“¾ï¼ˆLCELï¼‰"""</span>
        
        <span class="hljs-comment"># å®šä¹‰æ ¼å¼åŒ–å‡½æ•°</span>
        <span class="hljs-keyword">def</span> <span class="hljs-title function_">format_docs</span>(<span class="hljs-params">docs</span>):
            <span class="hljs-keyword">return</span> <span class="hljs-string">"\n\n"</span>.join(doc.page_content <span class="hljs-keyword">for</span> doc <span class="hljs-keyword">in</span> docs)
        
        <span class="hljs-comment"># å®šä¹‰æ£€ç´¢å’Œæ ¼å¼åŒ–å‡½æ•°</span>
        <span class="hljs-keyword">def</span> <span class="hljs-title function_">retrieve_and_format</span>(<span class="hljs-params">question</span>):
            docs = self._search_similar_documents(question)
            <span class="hljs-keyword">return</span> format_docs(docs)
        
        <span class="hljs-comment"># ä½¿ç”¨LCELæ„å»ºé“¾</span>
        self.qa_chain = (
            {
                <span class="hljs-string">"context"</span>: retrieve_and_format,
                <span class="hljs-string">"question"</span>: RunnablePassthrough()
            }
            | self.prompt_template
            | self.llm
            | StrOutputParser()
        )
        
        <span class="hljs-keyword">return</span> self.qa_chain
</code></pre>
<h4 data-id="heading-13">4.2 LCELä¼˜åŠ¿</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># LCELçš„ä¼˜åŠ¿ï¼š</span>
<span class="hljs-comment"># 1. ç®€æ´ä¼˜é›… - ä½¿ç”¨ç®¡é“æ“ä½œç¬¦ |</span>
<span class="hljs-comment"># 2. ç±»å‹å®‰å…¨ - è‡ªåŠ¨ç±»å‹æ£€æŸ¥</span>
<span class="hljs-comment"># 3. æµå¼æ”¯æŒ - å¤©ç„¶æ”¯æŒstream</span>
<span class="hljs-comment"># 4. å¹¶è¡Œæ‰§è¡Œ - è‡ªåŠ¨ä¼˜åŒ–æ‰§è¡Œé¡ºåº</span>

<span class="hljs-comment"># ä¼ ç»Ÿæ–¹å¼ï¼ˆå¤æ‚ï¼‰</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">old_way</span>(<span class="hljs-params">question</span>):
    docs = search(question)
    context = <span class="hljs-built_in">format</span>(docs)
    prompt = template.<span class="hljs-built_in">format</span>(context=context, question=question)
    answer = llm.invoke(prompt)
    <span class="hljs-keyword">return</span> parse(answer)

<span class="hljs-comment"># LCELæ–¹å¼ï¼ˆç®€æ´ï¼‰</span>
chain = retriever | <span class="hljs-built_in">format</span> | prompt | llm | parser
answer = chain.invoke(question)
</code></pre>
<hr/>
<h3 data-id="heading-14">äº”ã€éæµå¼é—®ç­”</h3>
<h4 data-id="heading-15">5.1 å®Œæ•´å®ç°</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># agent/ticket_agent.py</span>
<span class="hljs-keyword">import</span> time
<span class="hljs-keyword">from</span> .response <span class="hljs-keyword">import</span> success_response, error_response, AgentErrorCode

<span class="hljs-keyword">class</span> <span class="hljs-title class_">ServiceTicketAgent</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">ask</span>(<span class="hljs-params">self, question: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-type">Dict</span>:
        <span class="hljs-string">"""
        å®Œæ•´çš„æ™ºèƒ½é—®ç­”æµç¨‹
        
        è¿”å›æ ¼å¼:
        {
            "code": 0,
            "msg": "success",
            "data": {
                "answer": "ç­”æ¡ˆæ–‡æœ¬",
                "sources": [...],
                "metadata": {...}
            }
        }
        """</span>
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"\n"</span> + <span class="hljs-string">"="</span> * <span class="hljs-number">60</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å®¢æœé—®é¢˜: <span class="hljs-subst">{question}</span>"</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"="</span> * <span class="hljs-number">60</span>)
        
        start_time = time.time()
        
        <span class="hljs-keyword">try</span>:
            <span class="hljs-comment"># 1. å‚æ•°éªŒè¯</span>
            <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> question <span class="hljs-keyword">or</span> <span class="hljs-keyword">not</span> question.strip():
                <span class="hljs-keyword">return</span> error_response(
                    code=AgentErrorCode.QUESTION_FORMAT_ERROR,
                    msg=<span class="hljs-string">"é—®é¢˜ä¸èƒ½ä¸ºç©º"</span>
                )
            
            <span class="hljs-comment"># 2. è®¾ç½®é—®ç­”é“¾</span>
            qa_chain = self._setup_qa_chain()
            
            <span class="hljs-comment"># 3. æ£€ç´¢ç›¸å…³å·¥å•</span>
            <span class="hljs-keyword">try</span>:
                source_docs = self._search_similar_documents(question)
            <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
                <span class="hljs-keyword">return</span> error_response(
                    code=AgentErrorCode.RAG_RETRIEVAL_ERROR,
                    msg=<span class="hljs-string">"å‘é‡æ£€ç´¢å¤±è´¥"</span>,
                    error_detail=<span class="hljs-built_in">str</span>(e)
                )
            
            <span class="hljs-comment"># 4. æ£€æŸ¥æ˜¯å¦æœ‰ç›¸å…³ç»“æœ</span>
            <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> source_docs:
                <span class="hljs-keyword">return</span> error_response(
                    code=AgentErrorCode.NO_RELEVANT_RESULTS,
                    msg=<span class="hljs-string">"æœªæ‰¾åˆ°ç›¸å…³å·¥å•è®°å½•"</span>
                )
            
            <span class="hljs-comment"># 5. æ˜¾ç¤ºæ£€ç´¢åˆ°çš„å·¥å•</span>
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ£€ç´¢åˆ° <span class="hljs-subst">{<span class="hljs-built_in">len</span>(source_docs)}</span> æ¡ç›¸å…³å·¥å•:"</span>)
            sources = []
            <span class="hljs-keyword">for</span> i, doc <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(source_docs, <span class="hljs-number">1</span>):
                metadata = doc.metadata
                ticket_id = metadata.get(<span class="hljs-string">'ticket_id'</span>, <span class="hljs-string">'Unknown'</span>)
                issue_type = metadata.get(<span class="hljs-string">'issue_type'</span>, <span class="hljs-string">'Unknown'</span>)
                priority = metadata.get(<span class="hljs-string">'priority'</span>, <span class="hljs-string">'Unknown'</span>)
                distance = metadata.get(<span class="hljs-string">'distance'</span>)
                
                <span class="hljs-built_in">print</span>(<span class="hljs-string">f"  - <span class="hljs-subst">{ticket_id}</span> (<span class="hljs-subst">{issue_type}</span>) [ä¼˜å…ˆçº§: <span class="hljs-subst">{priority}</span>]"</span>)
                
                sources.append({
                    <span class="hljs-string">"ticket_id"</span>: ticket_id,
                    <span class="hljs-string">"issue_type"</span>: issue_type,
                    <span class="hljs-string">"priority"</span>: priority,
                    <span class="hljs-string">"status"</span>: metadata.get(<span class="hljs-string">'status'</span>, <span class="hljs-string">'Unknown'</span>),
                    <span class="hljs-string">"score"</span>: <span class="hljs-number">1</span> - distance <span class="hljs-keyword">if</span> distance <span class="hljs-keyword">else</span> <span class="hljs-literal">None</span>
                })
            
            <span class="hljs-comment"># 6. æ‰§è¡Œé—®ç­”</span>
            <span class="hljs-keyword">try</span>:
                answer = qa_chain.invoke(question)
            <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
                <span class="hljs-keyword">return</span> error_response(
                    code=AgentErrorCode.LLM_CALL_ERROR,
                    msg=<span class="hljs-string">"AI æ¨¡å‹è°ƒç”¨å¤±è´¥"</span>,
                    error_detail=<span class="hljs-built_in">str</span>(e)
                )
            
            <span class="hljs-comment"># 7. è®¡ç®—å¤„ç†æ—¶é—´</span>
            query_time = <span class="hljs-built_in">round</span>(time.time() - start_time, <span class="hljs-number">2</span>)
            
            <span class="hljs-built_in">print</span>(<span class="hljs-string">"="</span> * <span class="hljs-number">60</span>)
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"AI å›ç­”: <span class="hljs-subst">{answer}</span>"</span>)
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å¤„ç†æ—¶é—´: <span class="hljs-subst">{query_time}</span>ç§’"</span>)
            <span class="hljs-built_in">print</span>(<span class="hljs-string">"="</span> * <span class="hljs-number">60</span>)
            
            <span class="hljs-comment"># 8. è¿”å›æˆåŠŸå“åº”</span>
            <span class="hljs-keyword">return</span> success_response(
                answer=answer,
                sources=sources[:<span class="hljs-number">5</span>],
                metadata={
                    <span class="hljs-string">"query_time"</span>: query_time,
                    <span class="hljs-string">"retrieved_docs"</span>: <span class="hljs-built_in">len</span>(source_docs),
                    <span class="hljs-string">"model"</span>: self.chat_model,
                    <span class="hljs-string">"embed_model"</span>: self.embed_model
                }
            )
            
        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
            <span class="hljs-keyword">return</span> error_response(
                code=AgentErrorCode.AGENT_ERROR,
                msg=<span class="hljs-string">"Agent æœåŠ¡é”™è¯¯"</span>,
                error_detail=<span class="hljs-built_in">str</span>(e)
            )
</code></pre>
<h4 data-id="heading-16">5.2 æµ‹è¯•é—®ç­”</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># test_qa.py</span>
<span class="hljs-keyword">from</span> agent <span class="hljs-keyword">import</span> ServiceTicketAgent

<span class="hljs-keyword">def</span> <span class="hljs-title function_">test_qa</span>():
    agent = ServiceTicketAgent()
    
    <span class="hljs-comment"># æµ‹è¯•é—®é¢˜åˆ—è¡¨</span>
    questions = [
        <span class="hljs-string">"ç‰©æµä¿¡æ¯5å¤©æ²¡æ›´æ–°ï¼Œæ€ä¹ˆå¤„ç†ï¼Ÿ"</span>,
        <span class="hljs-string">"å®¢æˆ·æƒ³é€€è´§ï¼Œå¦‚ä½•æ“ä½œï¼Ÿ"</span>,
        <span class="hljs-string">"å¿˜è®°å¯†ç æ€ä¹ˆåŠï¼Ÿ"</span>,
        <span class="hljs-string">"ç¬”è®°æœ¬ç”µè„‘å¯ä»¥å‡çº§å†…å­˜å—ï¼Ÿ"</span>
    ]
    
    <span class="hljs-keyword">for</span> question <span class="hljs-keyword">in</span> questions:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\n<span class="hljs-subst">{<span class="hljs-string">'='</span>*<span class="hljs-number">60</span>}</span>"</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"é—®é¢˜: <span class="hljs-subst">{question}</span>"</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">'='</span>*<span class="hljs-number">60</span>)
        
        result = agent.ask(question)
        
        <span class="hljs-keyword">if</span> result[<span class="hljs-string">'code'</span>] == <span class="hljs-number">0</span>:
            data = result[<span class="hljs-string">'data'</span>]
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\nç­”æ¡ˆ:\n<span class="hljs-subst">{data[<span class="hljs-string">'answer'</span>]}</span>"</span>)
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\nå‚è€ƒå·¥å•: <span class="hljs-subst">{<span class="hljs-built_in">len</span>(data[<span class="hljs-string">'sources'</span>])}</span>æ¡"</span>)
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å¤„ç†æ—¶é—´: <span class="hljs-subst">{data[<span class="hljs-string">'metadata'</span>][<span class="hljs-string">'query_time'</span>]}</span>ç§’"</span>)
        <span class="hljs-keyword">else</span>:
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"é”™è¯¯: <span class="hljs-subst">{result[<span class="hljs-string">'msg'</span>]}</span>"</span>)

<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    test_qa()
</code></pre>
<hr/>
<h3 data-id="heading-17">å…­ã€æµå¼é—®ç­”</h3>
<h4 data-id="heading-18">6.1 æµå¼å®ç°</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ServiceTicketAgent</span>:
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">ask_stream</span>(<span class="hljs-params">self, question: <span class="hljs-built_in">str</span></span>):
        <span class="hljs-string">"""
        æµå¼é—®ç­”ï¼Œé€tokenè¿”å›ç­”æ¡ˆ
        
        Yields:
            dict: æµå¼äº‹ä»¶
            {
                "type": "thinking" | "sources" | "token" | "done" | "error",
                "data": {...}
            }
        """</span>
        start_time = time.time()
        
        <span class="hljs-keyword">try</span>:
            <span class="hljs-comment"># 1. å‘é€æ€è€ƒçŠ¶æ€</span>
            <span class="hljs-keyword">yield</span> {
                <span class="hljs-string">"type"</span>: <span class="hljs-string">"thinking"</span>,
                <span class="hljs-string">"data"</span>: {<span class="hljs-string">"status"</span>: <span class="hljs-string">"retrieving"</span>, <span class="hljs-string">"message"</span>: <span class="hljs-string">"æ­£åœ¨æ£€ç´¢ç›¸å…³å·¥å•..."</span>}
            }
            
            <span class="hljs-comment"># 2. æ£€ç´¢ç›¸å…³å·¥å•</span>
            source_docs = self._search_similar_documents(question)
            
            <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> source_docs:
                <span class="hljs-keyword">yield</span> {
                    <span class="hljs-string">"type"</span>: <span class="hljs-string">"error"</span>,
                    <span class="hljs-string">"data"</span>: {<span class="hljs-string">"code"</span>: <span class="hljs-number">2001</span>, <span class="hljs-string">"msg"</span>: <span class="hljs-string">"æœªæ‰¾åˆ°ç›¸å…³å·¥å•è®°å½•"</span>}
                }
                <span class="hljs-keyword">return</span>
            
            <span class="hljs-comment"># 3. å‘é€æ£€ç´¢ç»“æœ</span>
            sources = []
            <span class="hljs-keyword">for</span> doc <span class="hljs-keyword">in</span> source_docs:
                metadata = doc.metadata
                sources.append({
                    <span class="hljs-string">"ticket_id"</span>: metadata.get(<span class="hljs-string">'ticket_id'</span>, <span class="hljs-string">'Unknown'</span>),
                    <span class="hljs-string">"issue_type"</span>: metadata.get(<span class="hljs-string">'issue_type'</span>, <span class="hljs-string">'Unknown'</span>),
                    <span class="hljs-string">"priority"</span>: metadata.get(<span class="hljs-string">'priority'</span>, <span class="hljs-string">'Unknown'</span>),
                    <span class="hljs-string">"score"</span>: <span class="hljs-number">1</span> - metadata.get(<span class="hljs-string">'distance'</span>, <span class="hljs-number">0</span>)
                })
            
            <span class="hljs-keyword">yield</span> {
                <span class="hljs-string">"type"</span>: <span class="hljs-string">"sources"</span>,
                <span class="hljs-string">"data"</span>: {<span class="hljs-string">"sources"</span>: sources[:<span class="hljs-number">5</span>], <span class="hljs-string">"count"</span>: <span class="hljs-built_in">len</span>(source_docs)}
            }
            
            <span class="hljs-comment"># 4. å‘é€ç”ŸæˆçŠ¶æ€</span>
            <span class="hljs-keyword">yield</span> {
                <span class="hljs-string">"type"</span>: <span class="hljs-string">"thinking"</span>,
                <span class="hljs-string">"data"</span>: {<span class="hljs-string">"status"</span>: <span class="hljs-string">"generating"</span>, <span class="hljs-string">"message"</span>: <span class="hljs-string">"æ­£åœ¨ç”Ÿæˆè§£å†³æ–¹æ¡ˆ..."</span>}
            }
            
            <span class="hljs-comment"># 5. è®¾ç½®é—®ç­”é“¾</span>
            qa_chain = self._setup_qa_chain()
            
            <span class="hljs-comment"># 6. æµå¼æ‰§è¡Œé—®ç­”</span>
            full_answer = <span class="hljs-string">""</span>
            <span class="hljs-keyword">async</span> <span class="hljs-keyword">for</span> chunk <span class="hljs-keyword">in</span> qa_chain.astream(question):
                token = <span class="hljs-built_in">str</span>(chunk) <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> <span class="hljs-built_in">isinstance</span>(chunk, <span class="hljs-built_in">str</span>) <span class="hljs-keyword">else</span> chunk
                full_answer += token
                
                <span class="hljs-comment"># å‘é€token</span>
                <span class="hljs-keyword">yield</span> {
                    <span class="hljs-string">"type"</span>: <span class="hljs-string">"token"</span>,
                    <span class="hljs-string">"data"</span>: {<span class="hljs-string">"token"</span>: token}
                }
            
            <span class="hljs-comment"># 7. å‘é€å®Œæˆäº‹ä»¶</span>
            query_time = <span class="hljs-built_in">round</span>(time.time() - start_time, <span class="hljs-number">2</span>)
            
            <span class="hljs-keyword">yield</span> {
                <span class="hljs-string">"type"</span>: <span class="hljs-string">"done"</span>,
                <span class="hljs-string">"data"</span>: {
                    <span class="hljs-string">"answer"</span>: full_answer,
                    <span class="hljs-string">"metadata"</span>: {
                        <span class="hljs-string">"query_time"</span>: query_time,
                        <span class="hljs-string">"retrieved_docs"</span>: <span class="hljs-built_in">len</span>(source_docs),
                        <span class="hljs-string">"model"</span>: self.chat_model
                    }
                }
            }
            
        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
            <span class="hljs-keyword">yield</span> {
                <span class="hljs-string">"type"</span>: <span class="hljs-string">"error"</span>,
                <span class="hljs-string">"data"</span>: {<span class="hljs-string">"code"</span>: <span class="hljs-number">2000</span>, <span class="hljs-string">"msg"</span>: <span class="hljs-string">"AgentæœåŠ¡é”™è¯¯"</span>, <span class="hljs-string">"error_detail"</span>: <span class="hljs-built_in">str</span>(e)}
            }
</code></pre>
<h4 data-id="heading-19">6.2 æµ‹è¯•æµå¼é—®ç­”</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># test_stream.py</span>
<span class="hljs-keyword">import</span> asyncio

<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">test_stream</span>():
    agent = ServiceTicketAgent()
    question = <span class="hljs-string">"ç‰©æµä¿¡æ¯5å¤©æ²¡æ›´æ–°ï¼Œæ€ä¹ˆå¤„ç†ï¼Ÿ"</span>
    
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"é—®é¢˜: <span class="hljs-subst">{question}</span>\n"</span>)
    
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">for</span> event <span class="hljs-keyword">in</span> agent.ask_stream(question):
        event_type = event[<span class="hljs-string">'type'</span>]
        data = event[<span class="hljs-string">'data'</span>]
        
        <span class="hljs-keyword">if</span> event_type == <span class="hljs-string">'thinking'</span>:
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ğŸ’­ <span class="hljs-subst">{data[<span class="hljs-string">'message'</span>]}</span>"</span>)
        
        <span class="hljs-keyword">elif</span> event_type == <span class="hljs-string">'sources'</span>:
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ğŸ“š æ£€ç´¢åˆ° <span class="hljs-subst">{data[<span class="hljs-string">'count'</span>]}</span> æ¡ç›¸å…³å·¥å•"</span>)
            <span class="hljs-keyword">for</span> i, source <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(data[<span class="hljs-string">'sources'</span>], <span class="hljs-number">1</span>):
                <span class="hljs-built_in">print</span>(<span class="hljs-string">f"   <span class="hljs-subst">{i}</span>. <span class="hljs-subst">{source[<span class="hljs-string">'ticket_id'</span>]}</span> - <span class="hljs-subst">{source[<span class="hljs-string">'issue_type'</span>]}</span>"</span>)
        
        <span class="hljs-keyword">elif</span> event_type == <span class="hljs-string">'token'</span>:
            <span class="hljs-built_in">print</span>(data[<span class="hljs-string">'token'</span>], end=<span class="hljs-string">''</span>, flush=<span class="hljs-literal">True</span>)
        
        <span class="hljs-keyword">elif</span> event_type == <span class="hljs-string">'done'</span>:
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\n\nâ±ï¸ å¤„ç†æ—¶é—´: <span class="hljs-subst">{data[<span class="hljs-string">'metadata'</span>][<span class="hljs-string">'query_time'</span>]}</span>ç§’"</span>)
        
        <span class="hljs-keyword">elif</span> event_type == <span class="hljs-string">'error'</span>:
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"âŒ é”™è¯¯: <span class="hljs-subst">{data[<span class="hljs-string">'msg'</span>]}</span>"</span>)

<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    asyncio.run(test_stream())
</code></pre>
<hr/>
<h3 data-id="heading-20">ä¸ƒã€å“åº”æ ¼å¼è®¾è®¡</h3>
<h4 data-id="heading-21">7.1 ç»Ÿä¸€å“åº”æ ¼å¼</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># agent/response.py</span>
<span class="hljs-keyword">from</span> enum <span class="hljs-keyword">import</span> IntEnum

<span class="hljs-keyword">class</span> <span class="hljs-title class_">AgentErrorCode</span>(<span class="hljs-title class_ inherited__">IntEnum</span>):
    <span class="hljs-string">"""Agenté”™è¯¯ç """</span>
    SUCCESS = <span class="hljs-number">0</span>
    QUESTION_FORMAT_ERROR = <span class="hljs-number">2001</span>
    RAG_RETRIEVAL_ERROR = <span class="hljs-number">2002</span>
    NO_RELEVANT_RESULTS = <span class="hljs-number">2003</span>
    LLM_CALL_ERROR = <span class="hljs-number">2004</span>
    AGENT_ERROR = <span class="hljs-number">2000</span>

<span class="hljs-keyword">def</span> <span class="hljs-title function_">success_response</span>(<span class="hljs-params">answer: <span class="hljs-built_in">str</span>, sources: <span class="hljs-built_in">list</span>, metadata: <span class="hljs-built_in">dict</span></span>) -&gt; <span class="hljs-built_in">dict</span>:
    <span class="hljs-string">"""æˆåŠŸå“åº”"""</span>
    <span class="hljs-keyword">return</span> {
        <span class="hljs-string">"code"</span>: AgentErrorCode.SUCCESS,
        <span class="hljs-string">"msg"</span>: <span class="hljs-string">"success"</span>,
        <span class="hljs-string">"data"</span>: {
            <span class="hljs-string">"answer"</span>: answer,
            <span class="hljs-string">"sources"</span>: sources,
            <span class="hljs-string">"metadata"</span>: metadata
        }
    }

<span class="hljs-keyword">def</span> <span class="hljs-title function_">error_response</span>(<span class="hljs-params">code: <span class="hljs-built_in">int</span>, msg: <span class="hljs-built_in">str</span>, error_detail: <span class="hljs-built_in">str</span> = <span class="hljs-literal">None</span></span>) -&gt; <span class="hljs-built_in">dict</span>:
    <span class="hljs-string">"""é”™è¯¯å“åº”"""</span>
    response = {
        <span class="hljs-string">"code"</span>: code,
        <span class="hljs-string">"msg"</span>: msg,
        <span class="hljs-string">"data"</span>: <span class="hljs-literal">None</span>
    }
    <span class="hljs-keyword">if</span> error_detail:
        response[<span class="hljs-string">"error_detail"</span>] = error_detail
    <span class="hljs-keyword">return</span> response
</code></pre>
<hr/>
<h3 data-id="heading-22">å…«ã€æ€§èƒ½ä¼˜åŒ–</h3>
<h4 data-id="heading-23">8.1 ç¼“å­˜æ£€ç´¢ç»“æœ</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> functools <span class="hljs-keyword">import</span> lru_cache

<span class="hljs-keyword">class</span> <span class="hljs-title class_">ServiceTicketAgent</span>:
<span class="hljs-meta">    @lru_cache(<span class="hljs-params">maxsize=<span class="hljs-number">100</span></span>)</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">_cached_search</span>(<span class="hljs-params">self, question: <span class="hljs-built_in">str</span>, k: <span class="hljs-built_in">int</span> = <span class="hljs-number">5</span></span>):
        <span class="hljs-string">"""ç¼“å­˜æ£€ç´¢ç»“æœ"""</span>
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">tuple</span>(self._search_similar_documents(question, k))
</code></pre>
<h4 data-id="heading-24">8.2 æ‰¹é‡é—®ç­”</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">batch_ask</span>(<span class="hljs-params">self, questions: <span class="hljs-type">List</span>[<span class="hljs-built_in">str</span>]</span>) -&gt; <span class="hljs-type">List</span>[<span class="hljs-type">Dict</span>]:
    <span class="hljs-string">"""æ‰¹é‡é—®ç­”"""</span>
    tasks = [self.ask(q) <span class="hljs-keyword">for</span> q <span class="hljs-keyword">in</span> questions]
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> asyncio.gather(*tasks)
</code></pre>
<hr/>
<h3 data-id="heading-25">ä¹ã€è¯„ä¼°æŒ‡æ ‡</h3>
<h4 data-id="heading-26">9.1 æ£€ç´¢è´¨é‡è¯„ä¼°</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">evaluate_retrieval</span>(<span class="hljs-params">test_cases: <span class="hljs-type">List</span>[<span class="hljs-type">Dict</span>]</span>):
    <span class="hljs-string">"""è¯„ä¼°æ£€ç´¢è´¨é‡"""</span>
    agent = ServiceTicketAgent()
    
    metrics = {
        <span class="hljs-string">"precision"</span>: [],
        <span class="hljs-string">"recall"</span>: [],
        <span class="hljs-string">"mrr"</span>: []  <span class="hljs-comment"># Mean Reciprocal Rank</span>
    }
    
    <span class="hljs-keyword">for</span> <span class="hljs-keyword">case</span> <span class="hljs-keyword">in</span> test_cases:
        question = <span class="hljs-keyword">case</span>[<span class="hljs-string">'question'</span>]
        expected_tickets = <span class="hljs-built_in">set</span>(<span class="hljs-keyword">case</span>[<span class="hljs-string">'expected_tickets'</span>])
        
        <span class="hljs-comment"># æ£€ç´¢</span>
        docs = agent._search_similar_documents(question, k=<span class="hljs-number">5</span>)
        retrieved_tickets = <span class="hljs-built_in">set</span>([doc.metadata[<span class="hljs-string">'ticket_id'</span>] <span class="hljs-keyword">for</span> doc <span class="hljs-keyword">in</span> docs])
        
        <span class="hljs-comment"># è®¡ç®—æŒ‡æ ‡</span>
        tp = <span class="hljs-built_in">len</span>(expected_tickets &amp; retrieved_tickets)
        precision = tp / <span class="hljs-built_in">len</span>(retrieved_tickets) <span class="hljs-keyword">if</span> retrieved_tickets <span class="hljs-keyword">else</span> <span class="hljs-number">0</span>
        recall = tp / <span class="hljs-built_in">len</span>(expected_tickets) <span class="hljs-keyword">if</span> expected_tickets <span class="hljs-keyword">else</span> <span class="hljs-number">0</span>
        
        metrics[<span class="hljs-string">'precision'</span>].append(precision)
        metrics[<span class="hljs-string">'recall'</span>].append(recall)
    
    <span class="hljs-comment"># å¹³å‡å€¼</span>
    <span class="hljs-keyword">return</span> {
        <span class="hljs-string">"avg_precision"</span>: <span class="hljs-built_in">sum</span>(metrics[<span class="hljs-string">'precision'</span>]) / <span class="hljs-built_in">len</span>(metrics[<span class="hljs-string">'precision'</span>]),
        <span class="hljs-string">"avg_recall"</span>: <span class="hljs-built_in">sum</span>(metrics[<span class="hljs-string">'recall'</span>]) / <span class="hljs-built_in">len</span>(metrics[<span class="hljs-string">'recall'</span>])
    }
</code></pre>
<hr/>
<h3 data-id="heading-27">åã€æ€»ç»“</h3>
<p>æœ¬æ–‡ä»‹ç»äº†å®¢æœå·¥å•ç³»ç»Ÿçš„RAGæ£€ç´¢å’Œé—®ç­”å®ç°ï¼š</p>
<p>âœ… <strong>å‘é‡æ£€ç´¢</strong> - Weaviateç›¸ä¼¼åº¦æœç´¢<br/>
âœ… <strong>Promptå·¥ç¨‹</strong> - åŠ¨æ€ç»„è£…ä¸Šä¸‹æ–‡<br/>
âœ… <strong>LCELé—®ç­”é“¾</strong> - ä¼˜é›…çš„é“¾å¼è°ƒç”¨<br/>
âœ… <strong>æµå¼é—®ç­”</strong> - å®æ—¶æ‰“å­—æœºæ•ˆæœ<br/>
âœ… <strong>å“åº”æ ¼å¼</strong> - ç»Ÿä¸€çš„é”™è¯¯å¤„ç†</p>
<p><strong>ä¸‹ä¸€ç¯‡é¢„å‘Šï¼š</strong> ã€Šå®¢æœå·¥å•ç³»ç»Ÿå®æˆ˜ï¼ˆä¸‰ï¼‰ï¼šå‰åç«¯é›†æˆä¸ç”Ÿäº§éƒ¨ç½²ã€‹</p>
<p>æˆ‘ä»¬å°†ä»‹ç»å¦‚ä½•å°†AgentæœåŠ¡é›†æˆåˆ°å®Œæ•´çš„å‰åç«¯ç³»ç»Ÿä¸­ï¼Œå¹¶éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒã€‚</p>
<hr/>
<p><strong>ä½œè€…ç®€ä»‹ï¼š</strong> èµ„æ·±å¼€å‘è€…ï¼Œåˆ›ä¸šè€…ã€‚ä¸“æ³¨äºè§†é¢‘é€šè®¯æŠ€æœ¯é¢†åŸŸã€‚å›½å†…é¦–æœ¬Flutterè‘—ä½œã€ŠFlutteræŠ€æœ¯å…¥é—¨ä¸å®æˆ˜ã€‹ä½œè€…,å¦è‘—æœ‰ã€ŠDartè¯­è¨€å®æˆ˜ã€‹åŠã€ŠWebRTCéŸ³è§†é¢‘å¼€å‘ã€‹ç­‰ä¹¦ç±ã€‚å¤šå¹´ä»äº‹è§†é¢‘ä¼šè®®ã€è¿œç¨‹æ•™è‚²ç­‰æŠ€æœ¯ç ”å‘ï¼Œå¯¹äºAndroidã€iOSä»¥åŠè·¨å¹³å°å¼€å‘æŠ€æœ¯æœ‰æ¯”è¾ƒæ·±å…¥çš„ç ”ç©¶å’Œåº”ç”¨ï¼Œä½œä¸ºä¸»è¦ç¨‹åºå‘˜å¼€å‘äº†å¤šä¸ªåº”ç”¨é¡¹ç›®ï¼Œæ¶‰åŠåŒ»ç–—ã€äº¤é€šã€é“¶è¡Œç­‰é¢†åŸŸã€‚</p>
<p><strong>å­¦ä¹ èµ„æ–™ï¼š</strong></p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fkangshaojun%2Fai-agent-framework" target="_blank" title="https://github.com/kangshaojun/ai-agent-framework" ref="nofollow noopener noreferrer">é¡¹ç›®åœ°å€</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fkangshaojun" target="_blank" title="https://github.com/kangshaojun" ref="nofollow noopener noreferrer">ä½œè€…GitHub</a></li>
</ul>
<p><strong>æ¬¢è¿äº¤æµï¼š</strong> å¦‚æœ‰é—®é¢˜æ¬¢è¿åœ¨è¯„è®ºåŒºè®¨è®º ğŸš€</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[3å¤©é€Ÿæˆ ä½¿ç”¨AIã€Šä»é›¶å¼€å‘ä¸€æ¬¾ AI é¢è¯•ä½œå¼ŠåŠ©æ‰‹ã€‹ä¸€]]></title>    <link>https://juejin.cn/post/7590213554797805603</link>    <guid>https://juejin.cn/post/7590213554797805603</guid>    <pubDate>2026-01-02T15:31:19.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7590213554797805603" data-draft-id="7590071125398749224" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="3å¤©é€Ÿæˆ ä½¿ç”¨AIã€Šä»é›¶å¼€å‘ä¸€æ¬¾ AI é¢è¯•ä½œå¼ŠåŠ©æ‰‹ã€‹ä¸€"/> <meta itemprop="keywords" content="React.js,Next.js"/> <meta itemprop="datePublished" content="2026-01-02T15:31:19.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ— æ•Œæš´é¾™æˆ˜å£«é€šå…³å‰ç«¯"/> <meta itemprop="url" content="https://juejin.cn/user/3373747481880926"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            3å¤©é€Ÿæˆ ä½¿ç”¨AIã€Šä»é›¶å¼€å‘ä¸€æ¬¾ AI é¢è¯•ä½œå¼ŠåŠ©æ‰‹ã€‹ä¸€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3373747481880926/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ— æ•Œæš´é¾™æˆ˜å£«é€šå…³å‰ç«¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-02T15:31:19.000Z" title="Fri Jan 02 2026 15:31:19 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€åˆ«ç„¦è™‘äº†ï¼Œå…ˆæŠŠâ€œå¤–æŒ‚â€åšå‡ºæ¥</h2>
<p>æœ€è¿‘æŠ€æœ¯åœˆå……æ»¡äº†â€œå‰ç«¯å·²æ­»â€ã€â€œAI å–ä»£ç¨‹åºå‘˜â€çš„è®ºè°ƒã€‚ç„¦è™‘æ˜¯çœŸå®çš„ï¼Œä½†å¤§éƒ¨åˆ†ç„¦è™‘æ¥è‡ªâ€œçœ‹åˆ«äººåšâ€ï¼Œè€Œä¸æ˜¯â€œè‡ªå·±åšâ€ã€‚</p>
<p>å½“ä½ çœŸæ­£åŠ¨æ‰‹ç”¨ AI å¼€å‘ä¸€ä¸ªå¤æ‚çš„<strong>å®æ—¶äº¤äº’äº§å“</strong>æ—¶ï¼Œä½ ä¼šå‘ç°ï¼šAI å¾ˆå¼ºï¼Œä½†æŸäº›ç»†èŠ‚éœ€è¦è°ƒè¯•å’ŒæŠŠæ§ã€‚</p>
<p>ç”¨AIï¼Œä¸‰å¤©ä» 0 å¼€å§‹æ‰“é€ ä¸€æ¬¾<strong>AI é¢è¯•ä½œå¼ŠåŠ©æ‰‹</strong>ã€‚ä¸æ˜¯ Demoï¼Œæ˜¯èƒ½å®æ—¶å¬æ‡‚é¢è¯•å®˜æé—®ã€èƒ½çœ‹æ‡‚ç¬”è¯•é¢˜å±å¹•ã€å¹¶å³æ—¶æ¨é€ç­”æ¡ˆçš„â€œç¡¬æ ¸å¤–æŒ‚â€ã€‚</p>
<p>è¿™ç¯‡æ–‡ç« ï¼Œå°±æ˜¯è¿™æ¬¡å‰ç«¯æ¶æ„çš„å®Œæ•´å¤ç›˜ã€‚</p>
<p>é¡¹ç›®åœ°å€:<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.offercar.cn%2F" target="_blank" title="https://www.offercar.cn/" ref="nofollow noopener noreferrer">OfferCar AI - AI é¢è¯•ç¬”è¯•åŠ©æ‰‹ | æ™ºèƒ½é¢è¯•æ¨¡æ‹Ÿå¹³å°</a></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/80f3241172974993b612b350ae10131c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5peg5pWM5pq06b6Z5oiY5aOr6YCa5YWz5YmN56uv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767972678&amp;x-signature=rgMMyztaeioZEVFm5mR%2B9OlePn4%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-1">äºŒã€æ¶æ„ç¾å­¦ï¼šä¸åšé€šç”¨ï¼Œåšåœºæ™¯</h2>
<p>å¸‚é¢ä¸Šçš„ AI èŠå¤© Demo æ»¡å¤©é£ï¼Œå¤§å¤šæ˜¯ <code>useChat</code> ä¸€æŠŠæ¢­ã€‚ä½†åœ¨â€œé¢è¯•ä½œå¼Šâ€è¿™ä¸ªé«˜å‹åœºæ™¯ä¸‹ï¼Œé€šç”¨å‹æ¶æ„æ ¹æœ¬æ‰›ä¸ä½ã€‚</p>
<p>æˆ‘ä»¬éœ€è¦çš„æ˜¯<strong>æè‡´çš„è§£è€¦</strong>ã€‚</p>
<h3 data-id="heading-2">1. UI ä¸é€»è¾‘çš„ç‰©ç†éš”ç¦»</h3>
<p><strong>UI ç»„ä»¶ä¸æŒæœ‰ä¸šåŠ¡çŠ¶æ€</strong>ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a81417d75f3b4bc98c7b2e2a224035f7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5peg5pWM5pq06b6Z5oiY5aOr6YCa5YWz5YmN56uv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767972678&amp;x-signature=KyaGB7so9sPOvDY3dtD6p4ZZBPs%3D" alt="image.png" loading="lazy"/></p>
<p>ä¸ºæ­¤æŠ½è±¡äº† <code>SessionMainContent</code> â€”â€” å®ƒæ˜¯æ•´ä¸ªç³»ç»Ÿçš„â€œæ˜¾ç¤ºå™¨â€ã€‚å®ƒåªè´Ÿè´£ä¸€ä»¶äº‹ï¼š<strong>æ¸²æŸ“</strong>ã€‚</p>
<ul>
<li>å®ƒä¸å…³å¿ƒæ˜¯â€œé¢è¯•â€è¿˜æ˜¯â€œç¬”è¯•â€ã€‚</li>
<li>å®ƒä¸å…³å¿ƒæ¶ˆæ¯æ˜¯ Socket æ¨é€çš„è¿˜æ˜¯ HTTP æ‹‰å–çš„ã€‚</li>
<li>å®ƒåªæ¥æ”¶ <code>messages</code> æ•°ç»„å’Œå›è°ƒå‡½æ•°ã€‚</li>
</ul>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// çº¯ç²¹çš„ UI å®šä¹‰ï¼Œæ²¡æœ‰æ‚ä¹±çš„ useEffect</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">SessionMainContentProps</span> {
  <span class="hljs-attr">messages</span>: <span class="hljs-title class_">ChatMessage</span>[];        <span class="hljs-comment">// æ•°æ®æº</span>
  <span class="hljs-attr">streamingContent</span>: <span class="hljs-built_in">string</span>;       <span class="hljs-comment">// æµå¼ç¼“å†²åŒº</span>
  <span class="hljs-attr">isStreaming</span>: <span class="hljs-built_in">boolean</span>;           <span class="hljs-comment">// çŠ¶æ€ä½</span>
  <span class="hljs-attr">sendPendingMessagesToAI</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span>; <span class="hljs-comment">// åŠ¨ä½œæŒ‡ä»¤</span>
  <span class="hljs-comment">// ...</span>
}
</code></pre>
<h3 data-id="heading-3">2. ä¸šåŠ¡å®¹å™¨ï¼šController çš„è¯ç”Ÿ</h3>
<p><code>ExamSession</code> å’Œ <code>InterviewSession</code>ã€‚è¿™ä¸¤ä¸ªç»„ä»¶æ˜¯çœŸæ­£çš„<strong>ä¸šåŠ¡å®¹å™¨</strong>ã€‚</p>
<ul>
<li><strong>InterviewSession</strong>ï¼šåˆå§‹åŒ– <code>useInterviewSession</code>ï¼Œå»ºç«‹è¯­éŸ³è¯†åˆ«é€šé“ï¼ŒæŒ‚è½½ <code>DeviceStatusPanel</code>ï¼ˆéŸ³é‡ç›‘æ§ï¼‰ã€‚</li>
<li><strong>ExamSession</strong>ï¼šåˆå§‹åŒ– <code>useExamSession</code>ï¼Œç›‘å¬å…¨å±€æˆªå›¾æŒ‡ä»¤ï¼ŒæŒ‚è½½ç®€åŒ–ç‰ˆçŠ¶æ€æ ã€‚</li>
</ul>
<p>è¿™ç§è®¾è®¡è®© MVP é˜¶æ®µçš„ä»£ç ææ˜“ç»´æŠ¤ï¼šæ”¹ UI ä¸åŠ¨é€»è¾‘ï¼Œæ”¹é€»è¾‘ä¸å´© UIã€‚</p>
<h2 data-id="heading-4">ä¸‰ã€æ ¸å¿ƒå¤§è„‘ï¼š<code>useChatSession</code> çš„ç‚¼æˆ</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c5016cafdf8e4a39b5a76f25d943ed24~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5peg5pWM5pq06b6Z5oiY5aOr6YCa5YWz5YmN56uv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767972678&amp;x-signature=C8LN%2BiMI%2FdcWCs1HfhYAeIIJ%2Fvg%3D" alt="image.png" loading="lazy"/>
è¿™æ˜¯æ•´ä¸ªå‰ç«¯æœ€â€œé‡â€çš„ Hookï¼Œä¹Ÿæ˜¯ä¸ LLM ææ–—çš„ä¿®ç½—åœºã€‚åœ¨ MVP é˜¶æ®µï¼Œæˆ‘ç æ‰äº†æ‰€æœ‰èŠ±å“¨åŠŸèƒ½ï¼Œåªä¿ç•™<strong>ä»˜è´¹é—­ç¯</strong>æ‰€éœ€çš„é€»è¾‘ã€‚</p>
<h3 data-id="heading-5">1. æ€è€ƒé“¾ï¼ˆCoTï¼‰çš„ 60fps æ¸²æŸ“</h3>
<p>ç°åœ¨çš„ DeepSeek ç­‰æ¨ç†æ¨¡å‹ä¼šè¾“å‡º <code>&lt;think&gt;</code> æ ‡ç­¾ã€‚å¦‚æœç›´æ¥æ¸²æŸ“ï¼Œç”¨æˆ·ä¼šçœ‹åˆ°ä¸€å †ä¹±ç ï¼›å¦‚æœç­‰æ€è€ƒå®Œå†æ˜¾ç¤ºï¼Œç”¨æˆ·ä¼šä»¥ä¸ºç½‘æ–­äº†ã€‚</p>
<p>æˆ‘çš„è§£æ³•ï¼š<strong>æµå¼è§£æ + æ¸²æŸ“èŠ‚æµ</strong>ã€‚</p>
<p>æˆ‘ä»¬å®ç°äº†ä¸€ä¸ª <code>thinkTagProcessor</code>ï¼Œå®æ—¶å°† <code>&lt;think&gt;</code> è½¬æ¢ä¸º Markdown çš„å¼•ç”¨å— <code>&gt; </code>ã€‚åŒæ—¶ï¼Œä¸ºäº†é˜²æ­¢é«˜é¢‘ <code>setState</code> å¯¼è‡´ React æ‰å¸§ï¼ˆå°¤å…¶åœ¨ä½ç«¯ç¬”è®°æœ¬ä¸Šï¼‰ï¼Œæˆ‘åŠ å…¥äº† <code>requestAnimationFrame</code> èŠ‚æµã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// èŠ‚æµé˜€ï¼šè®© AI çš„æ€è€ƒè¿‡ç¨‹å¦‚ä¸èˆ¬é¡ºæ»‘ï¼Œè€Œä¸æ˜¯å¡é¡¿çš„æ‰“å°æœº</span>
<span class="hljs-keyword">const</span> tickThinkThrottle = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">if</span> (!isThinkRafRunningRef.<span class="hljs-property">current</span>) <span class="hljs-keyword">return</span>;
  <span class="hljs-title function_">setStreamingContent</span>(remainTextRef.<span class="hljs-property">current</span>); <span class="hljs-comment">// åªæœ‰è¿™é‡Œæ‰ä¼šè§¦å‘é‡ç»˜</span>
  thinkRafIdRef.<span class="hljs-property">current</span> = <span class="hljs-title function_">requestAnimationFrame</span>(tickThinkThrottle);
}, []);
</code></pre>
<h3 data-id="heading-6">2. æ¶ˆæ¯å›´æ ï¼šåªå¬é¢è¯•å®˜çš„è¯</h3>
<p>é¢è¯•åœºæ™¯æœ‰ä¸€ä¸ªç—›ç‚¹ï¼šé¢è¯•è€…çš„åºŸè¯å¤ªå¤šã€‚å¦‚æœå…¨å‘ç»™ AIï¼Œä¸Šä¸‹æ–‡ç¬é—´çˆ†ç‚¸ã€‚</p>
<p>æˆ‘åœ¨ <code>sendPendingMessagesToAI</code> ä¸­åŠ å…¥äº†ä¸€å±‚<strong>è¿‡æ»¤å™¨</strong>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> sendPendingMessagesToAI = <span class="hljs-title function_">useCallback</span>(<span class="hljs-keyword">async</span> () =&gt; {
  <span class="hljs-keyword">const</span> pendingMessages = messages.<span class="hljs-title function_">filter</span>(<span class="hljs-function">(<span class="hljs-params">msg</span>) =&gt;</span> {
    <span class="hljs-comment">// å¼€å¯ scopeCharacter åï¼ŒAI è‡ªåŠ¨å±è”½é¢è¯•è€…å‘è¨€ï¼Œåªèšç„¦é¢è¯•å®˜çš„é—®é¢˜</span>
    <span class="hljs-keyword">if</span> (scopeCharacter) {
      <span class="hljs-keyword">return</span> msg.<span class="hljs-property">speaker</span> === <span class="hljs-string">'interviewer'</span>;
    }
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
  });
  <span class="hljs-comment">// ...</span>
}, [<span class="hljs-comment">/*...*/</span>]);
</code></pre>
<p>è¿™ä¸ä»…ä»…æ˜¯çœ Tokenï¼Œæ›´æ˜¯ä¸ºäº†<strong>æé«˜å›ç­”çš„ä¿¡å™ªæ¯”</strong>ã€‚</p>
<h2 data-id="heading-7">å››ã€é™ç»´æ‰“å‡»ï¼šWebRTC çš„å¦ç±»ç”¨æ³•</h2>
<p>æåˆ° WebRTCï¼Œå¤§å®¶ç¬¬ä¸€ååº”æ˜¯è§†é¢‘é€šè¯ã€‚ä½†åœ¨æˆ‘çš„æ¶æ„é‡Œï¼ŒWebRTC æ˜¯<strong>è·¨ç«¯é€šä¿¡çš„é«˜é€Ÿå…¬è·¯</strong>ã€‚</p>
<p>è¿™æ˜¯å…¸å‹çš„â€œæŠ€æœ¯é™ç»´æ‰“å‡»â€ã€‚æˆ‘ä»¬ä¸éœ€è¦è§†é¢‘æµï¼Œæˆ‘ä»¬éœ€è¦çš„æ˜¯<strong>ä½å»¶è¿Ÿçš„æŒ‡ä»¤é€šé“</strong>ã€‚</p>
<h3 data-id="heading-8">1. DataChannelï¼šä¸ä¼ è§†é¢‘ä¼ æŒ‡ä»¤</h3>
<p>æˆ‘åˆ©ç”¨ WebRTC çš„ <code>DataChannel</code> å»ºç«‹äº†ä¸¤ä¸ªæ ¸å¿ƒç®¡é“ï¼š</p>
<ul>
<li><strong><code>exam-commands</code></strong>ï¼šä¼ è¾“æ§åˆ¶æŒ‡ä»¤ã€‚Electron æˆªå›¾åï¼Œé€šè¿‡æ­¤é€šé“ç›´æ¥å°† Base64 æ¨é€åˆ° Web ç«¯ï¼Œé€Ÿåº¦æ¯«ç§’çº§ã€‚</li>
<li><strong><code>recognition-text</code></strong>ï¼šä¼ è¾“å®æ—¶è¯­éŸ³è½¬å†™æ–‡æœ¬ã€‚</li>
</ul>
<p>è¿™ç§è®¾è®¡é¿å¼€äº†ä¼ ç»Ÿ HTTP è½®è¯¢çš„å»¶è¿Ÿï¼Œä¹Ÿæ¯” WebSocket æ›´è½»é‡ï¼ˆP2P ç›´è¿ï¼‰ã€‚</p>
<pre><code class="hljs language-typescript:hooks.ts" lang="typescript:hooks.ts">// ç›‘å¬æ¥è‡ª Electron çš„â€œé‡å­çº ç¼ â€ä¿¡å·
channel.onmessage = (event) =&gt; {
  const message = JSON.parse(event.data);
  if (message.type === 'screenshot') {
    // ç¬é—´ä¸Šå±ï¼Œæ— æ„ŸçŸ¥ä¼ è¾“
    addImageToPendingMessages(message.data);
  }
};
</code></pre>
<h2 data-id="heading-9">äº”ã€ä½“éªŒå¾®æ“ï¼šRedux é…ç½®ä¸­å¿ƒ</h2>
<p>UI/UX çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿæ˜¯**â€œæ˜¾å¾—å€¼é’±â€**ã€‚</p>
<p>ä¸ºäº†è®©ç”¨æˆ·è§‰å¾—â€œè¿™ä¸ªå¤–æŒ‚å¾ˆä¸“ä¸šâ€ï¼Œæˆ‘ç”¨ Redux Toolkit (<code>settingsSlice</code>) ç®¡ç†äº†å…¨å±€åå¥½ï¼š</p>
<ul>
<li><strong>å­—å·å¾®è°ƒ</strong>ï¼šAI å›ç­”å­—å·ã€é¢è¯•å®˜å­—å·ç‹¬ç«‹æ§åˆ¶ã€‚</li>
<li><strong>åŒè¯­å¼€å…³</strong>ï¼šä¸€é”®åˆ‡æ¢ä¸­è‹±å¯¹ç…§ï¼Œç¬é—´æå‡é€¼æ ¼ã€‚</li>
</ul>
<p>è¿™äº›é…ç½®åœ¨ <code>SessionMainContent</code> ä¸­è¢«å®æ—¶è®¢é˜…ã€‚ç”¨æˆ·æ‹–åŠ¨æ»‘å—ï¼Œç•Œé¢å³æ—¶å“åº”ã€‚è¿™ç§<strong>æŒæ§æ„Ÿ</strong>ï¼Œæ˜¯ä»˜è´¹æ„æ„¿çš„æ¥æºä¹‹ä¸€ã€‚</p>
<h2 data-id="heading-10">å…­ã€ç»“è¯­ï¼šAI æ—¶ä»£ï¼Œæ‹¿å›ä½ çš„ç”Ÿäº§èµ„æ–™</h2>
<p>å†™åˆ°è¿™é‡Œï¼Œæˆ‘æƒ³è¯´ï¼šä»£ç åªæ˜¯å·¥å…·ï¼Œæ˜¯è¿æ¥ç°å®ä¸æ•°å­—ä¸–ç•Œçš„é“²å­ã€‚AI è®©è¿™æŠŠé“²å­å˜æˆäº†æŒ–æ˜æœºï¼Œä½†æŒ–æ˜æœºæœ¬èº«ä¸ä¼šå†³å®šå»å“ªé‡ŒæŒ–æ˜å®è—ã€‚</p>
<p>åœ¨è¿™ä¸ªé¡¹ç›®é‡Œï¼ŒAI å¸®æˆ‘ç”Ÿæˆäº†100% çš„ ä¸šåŠ¡é€»è¾‘ã€‚
åˆ«ç„¦è™‘ï¼Œå»åˆ›é€ ã€‚æ‰“å¼€ç¼–è¾‘å™¨ï¼Œå»æƒ³ä¸€ä¸ªä½ çœŸæ­£æƒ³è§£å†³çš„é—®é¢˜ã€‚
é¡¹ç›®åœ°å€:<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.offercar.cn%2F" target="_blank" title="https://www.offercar.cn/" ref="nofollow noopener noreferrer">OfferCar AI - AI é¢è¯•ç¬”è¯•åŠ©æ‰‹ | æ™ºèƒ½é¢è¯•æ¨¡æ‹Ÿå¹³å°</a></p>
<p>ä¸‹ä¸€ç¯‡ï¼Œæˆ‘ä»¬å°†æ·±å…¥ Electron å®¢æˆ·ç«¯ï¼Œçœ‹çœ‹å¦‚ä½•è¿›å…¥ç³»ç»ŸéŸ³é¢‘æµï¼Œå®ç°æ— æ„Ÿé‡‡é›†ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ååˆ†é’Ÿå…¥é—¨SpringAI]]></title>    <link>https://juejin.cn/post/7590654280899592235</link>    <guid>https://juejin.cn/post/7590654280899592235</guid>    <pubDate>2026-01-02T15:52:07.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7590654280899592235" data-draft-id="7590020026395410486" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ååˆ†é’Ÿå…¥é—¨SpringAI"/> <meta itemprop="keywords" content="AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2026-01-02T15:52:07.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤©é“ä½©æ©"/> <meta itemprop="url" content="https://juejin.cn/user/536217406931069"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ååˆ†é’Ÿå…¥é—¨SpringAI
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/536217406931069/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤©é“ä½©æ©
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-02T15:52:07.000Z" title="Fri Jan 02 2026 15:52:07 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>SpringAIï¼ŒMake Java great again</p>
<p>è¿˜å¾—æ˜¯Springå•Šï¼ŒJavaå¼€å‘ä¸€è¾ˆå­éƒ½å¾—ç†Ÿç»ƒæŒæ¡çš„æ¡†æ¶ï¼ŒSpringAIå¸®ä½ å¯¹æ¥å¤šä¸ªAIæ¨¡å‹ï¼Œå±è”½åº•å±‚å¤æ‚çš„å¤„ç†ï¼Œä½¿ç”¨æŠ½è±¡ã€ç»Ÿä¸€çš„æ¥å£ï¼Œåˆ‡æ¢æ¨¡å‹åªéœ€æ›´æ”¹é…ç½®ï¼Œæ— éœ€æ”¹ä»£ç ï¼Œååˆ†é’Ÿå…¥é—¨ Java-AIå¼€å‘ï¼Œæ¥ä¸‹æ¥å¼€å§‹ä¸Šè¯¾ï¼ä¸Šä¸€ç¯‡ä»‹ç»äº†æœ¬åœ°ä¸‹è½½Ollamaï¼Œæœ¬æœŸä¸å†èµ˜è¿°ï¼Œä½†æ˜¯éœ€è¦å¼€å¯æœ¬åœ°Ollama</p>
<p>ä¼—æ‰€å‘¨çŸ¥ï¼ŒSpringæ¡†æ¶å¼€å‘ä¸‰éƒ¨æ›²ï¼Œå¯¼å…¥ä¾èµ–ï¼Œç¼–å†™é…ç½®ï¼Œç¼–å†™ä¸šåŠ¡ä»£ç ï¼Œ SpringAIä¹Ÿæ˜¯å¦‚æ­¤</p>
<h2 data-id="heading-1">å¯¼å…¥ä¾èµ–</h2>
<p>SpringAIæ”¯æŒçš„jdkæœ€ä½ç‰ˆæœ¬ä¸º17ï¼Œspring-bootæœ€ä½ç‰ˆæœ¬3.x</p>
<p><strong>PSï¼šä»¥ä¸‹çš„ dependencyManagement æ˜¯å¸®å¿™ç®¡ç† spring-ai ç›¸å…³ä¾èµ–çš„ï¼Œéå¸¸é‡è¦ï¼Œä¸€å®šè¦å¸¦ä¸Š</strong></p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">parent</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
 Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
 Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.5.9<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
 Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">relativePath</span>/&gt;</span> <span class="hljs-comment">&lt;!-- lookup parent from repository --&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">parent</span>&gt;</span>
</code></pre>

<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span>
 Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">java.version</span>&gt;</span>17<span class="hljs-tag">&lt;/<span class="hljs-name">java.version</span>&gt;</span>
 Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">spring-ai.version</span>&gt;</span>1.1.2<span class="hljs-tag">&lt;/<span class="hljs-name">spring-ai.version</span>&gt;</span>
 Â  Â <span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span>
 Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>
 Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
 Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
 Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
 Â  Â  Â  Â <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
 Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
 Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.ai<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
 Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-ai-starter-model-ollama<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
 Â  Â  Â  Â <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
â€‹
 Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
 Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.mysql<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
 Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mysql-connector-j<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
 Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>runtime<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span>
 Â  Â  Â  Â <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
 Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
 Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
 Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
 Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>test<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span>
 Â  Â  Â  Â <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
 Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
 Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.projectlombok<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
 Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>lombok<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
 Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.18.22<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
 Â  Â  Â  Â <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
 Â  Â <span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span>
</code></pre>

<pre><code class="hljs language-xml" lang="xml"> Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">dependencyManagement</span>&gt;</span>
 Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>
 Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.ai<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-ai-bom<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>${spring-ai.version}<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">type</span>&gt;</span>pom<span class="hljs-tag">&lt;/<span class="hljs-name">type</span>&gt;</span>
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>import<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span>
 Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
 Â  Â  Â  Â <span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span>
 Â  Â <span class="hljs-tag">&lt;/<span class="hljs-name">dependencyManagement</span>&gt;</span>
</code></pre>
<h2 data-id="heading-2">ç¼–å†™é…ç½®</h2>
<p>æœ‰2ä¸ªé…ç½®ï¼Œapplication.yml å’Œ Configuration</p>
<h3 data-id="heading-3">application.yml</h3>
<p>ä¸»è¦æ˜¯æ¨¡å‹ï¼Œè®¿é—®åœ°å€ï¼Œæ—¥å¿—è¾“å‡º;</p>
<p>1.11434 æ˜¯ Ollama é»˜è®¤ç«¯å£</p>
<p>2.model å°±æ˜¯æœ¬åœ°å¯åŠ¨çš„ AI æ¨¡å‹ï¼Œæ¨¡å‹åç§°å¤§å°å†™æ•æ„Ÿï¼Œæ³¨æ„åˆ«å†™é”™</p>
<p>3.è®¾ç½®æ—¥å¿—è¾“å‡ºçº§åˆ«ï¼Œè¿˜è¦åœ¨ Bean ä¸Šé…ç½® Advisorï¼Œè®¾ç½® level æœ€å¥½æ˜¯ç²¾ç¡®åˆ°åŒ…ï¼Œå¦åˆ™æ—¥å¿—å¤ªå¤š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">spring:</span>
 Â <span class="hljs-attr">application:</span>
 Â  Â <span class="hljs-attr">name:</span> <span class="hljs-string">springai</span>
 Â <span class="hljs-attr">ai:</span>
 Â  Â <span class="hljs-attr">ollama:</span>
 Â  Â  Â <span class="hljs-attr">base-url:</span> <span class="hljs-string">http://localhost:11434</span>
 Â  Â  Â <span class="hljs-attr">chat:</span>
 Â  Â  Â  Â <span class="hljs-attr">model:</span> <span class="hljs-string">deepseek-r1:8b</span>
<span class="hljs-attr">logging:</span>
 Â <span class="hljs-attr">level:</span>
 Â  Â <span class="hljs-attr">org.springframework.ai.chat.client.advisor:</span> <span class="hljs-string">debug</span>
 Â  Â <span class="hljs-attr">com.pain.springai:</span> <span class="hljs-string">debug</span>
</code></pre>
<h2 data-id="heading-4">é…ç½®Configuration</h2>
<p>defaultSystemï¼šç³»ç»Ÿé…ç½®ï¼Œå¯ä»¥è®¾å®šè§’è‰²</p>
<p>defaultAdvisorï¼šæ—¥å¿—å¢å¼ºå™¨</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">import</span> org.springframework.ai.chat.client.ChatClient;
<span class="hljs-keyword">import</span> org.springframework.ai.chat.client.advisor.SimpleLoggerAdvisor;
<span class="hljs-keyword">import</span> org.springframework.ai.ollama.OllamaChatModel;
<span class="hljs-keyword">import</span> org.springframework.context.<span class="hljs-keyword">annotation</span>.Bean;
<span class="hljs-keyword">import</span> org.springframework.context.<span class="hljs-keyword">annotation</span>.Configuration;
â€‹
<span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CommonConfig</span> {
â€‹
 Â  Â <span class="hljs-meta">@Bean</span>
 Â  Â <span class="hljs-keyword">public</span> ChatClient Â chatClient(OllamaChatModel model){
 Â  Â  Â  Â <span class="hljs-keyword">return</span> ChatClient.builder(model)
 Â  Â  Â  Â  Â  Â  Â   .defaultSystem(<span class="hljs-string">"ä½ æ˜¯é«˜å‚²å†·é…·çš„å¤©é“ä½©æ©ï¼Œè¯·ä»¥å¤©é“ä½©æ©çš„èº«ä»½å’Œè¯­æ°”å›ç­”é—®é¢˜"</span>)
 Â  Â  Â  Â  Â  Â  Â   .defaultAdvisors(new SimpleLoggerAdvisor())
 Â  Â  Â  Â  Â  Â  Â   .build();
 Â   }
}
</code></pre>
<h2 data-id="heading-5">ä¸šåŠ¡ä»£ç </h2>
<p>å†™ä¸€ä¸ªControllerï¼Œæ³¨å…¥ChatClientï¼Œç„¶åå°±å¯ä»¥å¯¹è¯äº†</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">import</span> lombok.RequiredArgsConstructor;
<span class="hljs-keyword">import</span> org.springframework.ai.chat.client.ChatClient;
<span class="hljs-keyword">import</span> org.springframework.web.bind.<span class="hljs-keyword">annotation</span>.RequestMapping;
<span class="hljs-keyword">import</span> org.springframework.web.bind.<span class="hljs-keyword">annotation</span>.RestController;
<span class="hljs-keyword">import</span> reactor.core.publisher.Flux;
â€‹
<span class="hljs-meta">@RestController</span>
<span class="hljs-meta">@RequestMapping(<span class="hljs-string">"/ai"</span>)</span>
<span class="hljs-meta">@RequiredArgsConstructor</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ChatController</span> {
â€‹
 Â  Â <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> ChatClient chatClient;
â€‹
 Â  Â <span class="hljs-meta">@RequestMapping(<span class="hljs-string">"/chat"</span>)</span>
 Â  Â <span class="hljs-keyword">public</span> String chat(String prompt) {
 Â  Â  Â  Â <span class="hljs-keyword">return</span> chatClient.prompt()
 Â  Â  Â  Â  Â  Â  Â   .user(prompt)
 Â  Â  Â  Â  Â  Â  Â   .call()
 Â  Â  Â  Â  Â  Â  Â   .content();
 Â   }
â€‹
 Â  Â <span class="hljs-meta">@RequestMapping(value = <span class="hljs-string">"/chat/flux"</span>, produces = <span class="hljs-string">"text/html;charset=utf-8"</span>)</span>
 Â  Â <span class="hljs-keyword">public</span> Flux&lt;String&gt; fluxChat(String prompt) {
 Â  Â  Â  Â <span class="hljs-keyword">return</span> chatClient.prompt()
 Â  Â  Â  Â  Â  Â  Â   .user(prompt)
 Â  Â  Â  Â  Â  Â  Â   .stream()
 Â  Â  Â  Â  Â  Â  Â   .content();
 Â   }
}
</code></pre>
<p>é»˜è®¤æœåŠ¡å™¨çš„ç«¯å£æ˜¯8080ï¼Œæ‹¼æ¥ä¸€ä¸‹ç«¯å£è®¿é—®ï¼š<a href="https://link.juejin.cn?target=url" target="_blank" title="url" ref="nofollow noopener noreferrer">http:localhost:8080/ai/chat </a><br/>
è®¿é—®æœåŠ¡å™¨</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/73521af68408461ca09b41f42cce47bc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSp6YGT5L2p5oGp:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767973927&amp;x-signature=wvo2mzej%2B7X9ivNXu%2Btr4CLZzU8%3D" alt="å›¾ç‰‡" loading="lazy"/><br/>
æ—¥å¿—è¾“å‡º</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3edf7b2ae40746cd9439faca68fa6174~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSp6YGT5L2p5oGp:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767973927&amp;x-signature=G8HZukCE3%2BT9XFRtoh0MIRXhW5c%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ä¸‹ä¸€ç¯‡å¸¦ä½ ä»¬æ›´æ·±å…¥çš„äº†è§£SpringAIå¼ºå¤§çš„åŠŸèƒ½</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Git ä»“åº“è¿‡æ»¤æ•æ„Ÿä¿¡æ¯ï¼Œé€šè¿‡é…ç½® clean/smudge è¿‡æ»¤å™¨çš„æ–¹å¼]]></title>    <link>https://juejin.cn/post/7590654280899526699</link>    <guid>https://juejin.cn/post/7590654280899526699</guid>    <pubDate>2026-01-02T13:28:38.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7590654280899526699" data-draft-id="7590011643297251366" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Git ä»“åº“è¿‡æ»¤æ•æ„Ÿä¿¡æ¯ï¼Œé€šè¿‡é…ç½® clean/smudge è¿‡æ»¤å™¨çš„æ–¹å¼"/> <meta itemprop="keywords" content="åç«¯,å‰ç«¯,GitHub"/> <meta itemprop="datePublished" content="2026-01-02T13:28:38.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="GentlyBeing"/> <meta itemprop="url" content="https://juejin.cn/user/543573892409056"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Git ä»“åº“è¿‡æ»¤æ•æ„Ÿä¿¡æ¯ï¼Œé€šè¿‡é…ç½® clean/smudge è¿‡æ»¤å™¨çš„æ–¹å¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/543573892409056/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    GentlyBeing
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-02T13:28:38.000Z" title="Fri Jan 02 2026 13:28:38 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    7
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:14px;overflow-x:hidden;color:var(--cyanosis-base-color);transition:color .35s;--cyanosis-base-color:#353535;--cyanosis-title-color:#005bb7;--cyanosis-strong-color:#2196f3;--cyanosis-em-color:#4fc3f7;--cyanosis-del-color:#ccc;--cyanosis-link-color:#3da8f5;--cyanosis-linkh-color:#007fff;--cyanosis-border-color:#bedcff;--cyanosis-border-color-2:#ececec;--cyanosis-bg-color:#fff;--cyanosis-blockquote-color:#8c8c8c;--cyanosis-blockquote-bg-color:#f0fdff;--cyanosis-code-color:#c2185b;--cyanosis-code-bg-color:#fff4f4;--cyanosis-code-pre-color:#f8f8f8;--cyanosis-table-border-color:#c3e0fd;--cyanosis-table-th-color:#dff0ff;--cyanosis-table-tht-color:#005bb7;--cyanosis-table-tr-nc-color:#f7fbff;--cyanosis-table-trh-color:#e0edf7;--cyanosis-slct-title-color:#005bb7;--cyanosis-slct-titlebg-color:rgba(175,207,247,0.25);--cyanosis-slct-text-color:#c80000;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#e8ebec;--cyanosis-slct-codebg-color:#ffeaeb;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body.__dark{--cyanosis-base-color:#cacaca;--cyanosis-title-color:#ddd;--cyanosis-strong-color:#fe9900;--cyanosis-em-color:#ffd28e;--cyanosis-del-color:#ccc;--cyanosis-link-color:#ffb648;--cyanosis-linkh-color:#fe9900;--cyanosis-border-color:#ffe3ba;--cyanosis-border-color-2:#ffcb7b;--cyanosis-bg-color:#2f2f2f;--cyanosis-blockquote-color:#c7c7c7;--cyanosis-blockquote-bg-color:rgba(255,199,116,0.1);--cyanosis-code-color:#000;--cyanosis-code-bg-color:#ffcb7b;--cyanosis-code-pre-color:rgba(255,227,185,0.5);--cyanosis-table-border-color:#fe9900;--cyanosis-table-th-color:#ffb648;--cyanosis-table-tht-color:#000;--cyanosis-table-tr-nc-color:#6d5736;--cyanosis-table-trh-color:#947443;--cyanosis-slct-title-color:#000;--cyanosis-slct-titlebg-color:#fe9900;--cyanosis-slct-text-color:#00c888;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#000;--cyanosis-slct-codebg-color:#ffcb7b;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body h1{padding-bottom:4px;font-size:30px}.markdown-body h1,.markdown-body h2{margin-top:36px;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);transition:color .35s}.markdown-body h2{position:relative;padding-left:10px;padding-right:10px;padding-bottom:10px;font-size:24px;border-bottom:1px solid var(--cyanosis-border-color-2)}.markdown-body h2:before{content:"ã€Œ";position:absolute;top:-6px;left:-14px}.markdown-body h2:after{content:"ã€";position:relative;top:6px;right:auto}.markdown-body h3{position:relative;padding-bottom:0;margin-top:30px;margin-bottom:10px;font-size:20px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h3:before{content:"Â»";padding-right:6px;color:var(--cyanosis-strong-color)}.markdown-body h4{margin-top:24px;font-size:16px}.markdown-body h4,.markdown-body h5{padding-bottom:0;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h5{margin-top:18px;font-size:14px}.markdown-body h6{padding-bottom:0;margin-top:12px;margin-bottom:10px;font-size:12px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body p{line-height:inherit;margin-top:16px;margin-bottom:16px}.markdown-body img{max-width:100%}.markdown-body hr{position:relative;width:98%;height:1px;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,var(--cyanosis-link-color),rgba(255,0,0,.3),hsla(0,0%,100%,.1),rgba(255,0,0,.3),var(--cyanosis-link-color));border-width:0;overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background-color:var(--cyanosis-bg-color);background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center;transition:background-color .5s}.markdown-body code{padding:.065em .4em;font-size:.87em;color:var(--cyanosis-code-color);word-break:break-word;overflow-x:auto;background-color:var(--cyanosis-code-bg-color);border-radius:2px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;padding:16px 12px;margin:0;font-size:12px;color:#333;word-break:normal;overflow-x:auto;background:var(--cyanosis-code-pre-color)}.markdown-body pre&gt;code::-webkit-scrollbar{width:4px;height:4px}.markdown-body pre&gt;code::-webkit-scrollbar-track{background-color:var(--cyanosis-border-color)}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:var(--cyanosis-strong-color);border-radius:10px}.markdown-body a{position:relative;text-decoration:none;color:var(--cyanosis-link-color);border-bottom:1px solid var(--cyanosis-border-color)}.markdown-body a:hover{border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body a:active,.markdown-body a:hover{color:var(--cyanosis-linkh-color)}.markdown-body a:after{position:absolute;content:"";top:100%;left:0;width:100%;opacity:0;border-bottom:1px solid var(--cyanosis-border-color);transition:top .3s,opacity .3s;transform:translateZ(0)}.markdown-body a:hover:after{top:0;opacity:1;border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid var(--cyanosis-table-border-color);border-spacing:0;border-collapse:collapse}.markdown-body table thead{color:#000;text-align:left;font-size:14px;background:#f6f6f6}.markdown-body table tr:nth-child(2n){background-color:var(--cyanosis-table-tr-nc-color)}.markdown-body table tr:hover{background-color:var(--cyanosis-table-trh-color)}.markdown-body table td,.markdown-body table th{padding:12px 8px;line-height:24px;border:1px solid var(--cyanosis-table-border-color)}.markdown-body table th{color:var(--cyanosis-table-tht-color);background-color:var(--cyanosis-table-th-color)}.markdown-body table td{min-width:120px}.markdown-body blockquote{color:var(--cyanosis-blockquote-color);border-left:4px solid var(--cyanosis-strong-color);background-color:var(--cyanosis-blockquote-bg-color);padding:1px 20px;margin:22px 0;transition:color .35s}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body b,.markdown-body blockquote&gt;b,.markdown-body blockquote&gt;strong,.markdown-body strong{color:var(--cyanosis-strong-color)}.markdown-body em,.markdown-body i{color:var(--cyanosis-em-color)}.markdown-body del{color:var(--cyanosis-del-color)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:4px}.markdown-body ol li{padding-left:6px}.markdown-body details&gt;summary{outline:none;color:var(--cyanosis-title-color);font-size:20px;font-weight:bolder;border-bottom:1px solid var(--cyanosis-border-color);cursor:pointer}.markdown-body details&gt;p{padding:10px 20px;margin:10px 0 0;color:#666;background-color:var(--cyanosis-blockquote-bg-color);border:2px dashed var(--cyanosis-strong-color)}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection{color:var(--cyanosis-slct-title-color);background-color:var(--cyanosis-slct-titlebg-color)}.markdown-body ol li::selection,.markdown-body p::selection,.markdown-body ul li::selection{color:var(--cyanosis-slct-text-color);background-color:var(--cyanosis-slct-bg-color)}.markdown-body a::selection,.markdown-body b::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:var(--cyanosis-slct-elbg-color)}.markdown-body del::selection{color:var(--cyanosis-slct-del-color);background-color:var(--cyanosis-slct-elbg-color)}.markdown-body table thead th::selection{background-color:transparent}.markdown-body table tbody td::selection{background-color:var(--cyanosis-slct-bg-color)}.markdown-body code::selection{background-color:var(--cyanosis-slct-codebg-color)}.markdown-body pre&gt;code::selection{background-color:var(--cyanosis-slct-prebg-color)}.markdown-body .contains-task-list{padding-left:14px;list-style:none}.markdown-body .contains-task-list input[type=checkbox]{position:relative}.markdown-body .contains-task-list input[type=checkbox]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;width:inherit;height:inherit;background:#f0f8ff;border:1px solid #add6ff;border-radius:2px;box-sizing:border-box;z-index:1}.markdown-body .contains-task-list input[type=checkbox]:checked:after{content:"âœ“";position:absolute;top:-12px;left:0;right:0;bottom:0;width:0;height:0;color:#f55;font-size:20px;font-weight:700;z-index:2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="a11y-dark">.hljs-comment,.hljs-quote{color:#d4d0ab}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#ffa07a}.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#f5ab35}.hljs-attribute{color:gold}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:#abe338}.hljs-section,.hljs-title{color:#00e0e0}.hljs-keyword,.hljs-selector-tag{color:#dcc6e0}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#2b2b2b;color:#f8f8f2}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}@media screen and (-ms-high-contrast:active){.hljs-addition,.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-comment,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-quote,.hljs-string,.hljs-symbol,.hljs-type{color:highlight}.hljs-keyword,.hljs-selector-tag{font-weight:700}}</style><hr/>
<p>æœ‰æ²¡æœ‰é‡åˆ°è¿‡è¿™ç§å›°æ‰°ï¼Ÿæœ¬åœ°é…ç½®æ–‡ä»¶é‡Œè—ç€æ•°æ®åº“å¯†ç ã€å¯†é’¥ç­‰æ•æ„Ÿä¿¡æ¯ï¼Œä¸€ä¸å°å¿ƒå°±æäº¤åˆ° Git ä»“åº“äº†ï¼Œæ—¢ä¸å®‰å…¨åˆå®¹æ˜“æ³„éœ²éšç§ã€‚</p>
<p>ä»Šå¤©å°±ç»™å¤§å®¶åˆ†äº« Git ä»“åº“è„±æ•æ–¹æ³•ï¼Œé‡ç‚¹è®²åœ¨å¼€å‘è¿‡ç¨‹ä¸­æœ€å®ç”¨çš„ã€ŒGit å†…ç½®è¿‡æ»¤å™¨ã€æ–¹æ¡ˆâ€”â€”ä¸ç”¨æ”¹ä»£ç ã€ä¸ç”¨æ‰‹åŠ¨æ”¹é…ç½®ï¼Œæäº¤è‡ªåŠ¨è„±æ•ã€æ‹‰å–è‡ªåŠ¨è¿˜åŸï¼Œå…¨ç¨‹æ— æ„Ÿæ“ä½œã€‚</p>
<h2 data-id="heading-0">ä¸€ã€å…ˆææ‡‚æ ¸å¿ƒéœ€æ±‚ï¼šæœ¬åœ°èƒ½ç”¨ï¼Œä»“åº“å®‰å…¨</h2>
<p><strong>ç›®æ ‡</strong>å¾ˆç®€å•ï¼š</p>
<ul>
<li>æœ¬åœ°å¼€å‘æ—¶ï¼Œèƒ½ç”¨åˆ°å®Œæ•´çš„é…ç½®ï¼ˆå«æ•æ„Ÿä¿¡æ¯ï¼‰ï¼Œä¸å½±å“æ­£å¸¸å¼€å‘ï¼›</li>
<li>æäº¤åˆ° Git ä»“åº“æ—¶ï¼Œæ•æ„Ÿä¿¡æ¯è‡ªåŠ¨å˜æˆå ä½ç¬¦ï¼Œä¸ä¼šæ³„éœ²ï¼›</li>
<li>æœ€å¥½è‡ªåŠ¨åŒ–ï¼Œä¸ç”¨æ¯æ¬¡æäº¤å‰æ‰‹åŠ¨æ”¹é…ç½®ï¼Œçœäº‹ã€‚</li>
</ul>
<blockquote>
<p>ğŸ’¡<strong>æå‰åˆ’é‡ç‚¹</strong>ï¼š</p>
<p>ä¸‹é¢ 3 ç§æ–¹æ³•é‡Œï¼Œä¼˜å…ˆé€‰ã€Œæ–¹æ³• 3ï¼šGit å†…ç½®è¿‡æ»¤å™¨ã€ã€‚å‰ä¸¤ç§é€‚åˆå·²å¼€å‘å®Œçš„é¡¹ç›®ï¼Œè¿‡æ»¤å™¨æ–¹æ¡ˆé€‚åˆæ­£åœ¨å¼€å‘çš„é¡¹ç›®ï¼Œé›¶ä¾µå…¥è¿˜çœå¿ƒã€‚</p>
</blockquote>
<h3 data-id="heading-1">3 ç§è„±æ•æ–¹æ³•å¯¹æ¯”</h3>
<h4 data-id="heading-2">æ–¹æ³• 1ï¼šåˆ›å»ºé…ç½®æ¨¡æ¿æ–‡ä»¶ï¼ˆç®€å•ä½†ç¹çï¼‰</h4>
<p>æ¯”å¦‚ï¼Œæœ‰ä¸ªé…ç½®æ–‡ä»¶å« <code>settings.yaml</code>ï¼Œé‡Œé¢æœ‰æ•æ„Ÿä¿¡æ¯ã€‚åšæ³•å¾ˆç®€å•ï¼š</p>
<ol>
<li>å¤åˆ¶ä¸€ä»½ <code>settings.yaml</code>ï¼Œæ”¹åå« <code>settings_example.yaml</code>ï¼›</li>
<li>æ‰‹åŠ¨æŠŠ <code>settings_example.yaml</code> é‡Œçš„æ•æ„Ÿä¿¡æ¯åˆ æ‰ï¼ˆæ¯”å¦‚æŠŠå¯†ç æ”¹æˆ <code>xxxxxx</code>ï¼‰ï¼Œä½œä¸ºæ¨¡æ¿ç»™å›¢é˜Ÿå‚è€ƒï¼›</li>
<li>åœ¨ <code>.gitignore</code> é‡ŒåŠ ä¸€è¡Œ<code>settings.yaml</code>ï¼Œè®© Git å¿½ç•¥è¿™ä¸ªçœŸå®é…ç½®æ–‡ä»¶ï¼Œé¿å…æäº¤ã€‚</li>
</ol>
<p>ç¼ºç‚¹ï¼šæ¯æ¬¡æ–°å¢é…ç½®é¡¹ï¼Œéƒ½è¦æ‰‹åŠ¨åŒæ­¥æ¨¡æ¿æ–‡ä»¶ï¼Œå›¢é˜Ÿåä½œæ—¶å®¹æ˜“æ¼æ›´ã€‚</p>
<h4 data-id="heading-3">æ–¹æ³• 2ï¼šæŠŠæ•æ„Ÿä¿¡æ¯å­˜åˆ°ç¯å¢ƒå˜é‡ï¼ˆè„±ç¦»é¡¹ç›®ä½†éœ€é¢å¤–é…ç½®ï¼‰</h4>
<p>æ ¸å¿ƒæ€è·¯ï¼šæŠŠå¯†ç ã€å¯†é’¥è¿™äº›æ•æ„Ÿä¿¡æ¯ï¼Œå­˜åˆ°ç”µè„‘çš„ã€Œç¯å¢ƒå˜é‡ã€é‡Œï¼ˆå’Œé¡¹ç›®åˆ†å¼€ï¼‰ï¼Œé¡¹ç›®é‡Œåªç•™â€œå ä½ç¬¦â€ã€‚</p>
<p>ä¸¾ä¸ªä¾‹å­ï¼Œ <code>settings.yaml</code> å¯ä»¥å†™æˆè¿™æ ·ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">database:</span>
  <span class="hljs-attr">host:</span> <span class="hljs-string">${DB_HOST}</span> Â <span class="hljs-comment"># å ä½ç¬¦ï¼šæœ¬åœ°ç¯å¢ƒå˜é‡é‡Œæ‰¾ DB_HOST</span>
  <span class="hljs-attr">username:</span> <span class="hljs-string">${DB_USER}</span> Â <span class="hljs-comment"># å ä½ç¬¦ï¼šæœ¬åœ°ç¯å¢ƒå˜é‡é‡Œæ‰¾ DB_USER</span>
  <span class="hljs-attr">password:</span> <span class="hljs-string">${DB_PASSWORD}</span> Â <span class="hljs-comment"># æ•æ„Ÿå¯†ç ï¼šä»ç¯å¢ƒå˜é‡è¯»å–</span>
<span class="hljs-attr">secret:</span>
  <span class="hljs-attr">token_key:</span> <span class="hljs-string">${TOKEN_SECRET}</span> Â <span class="hljs-comment"># å¯†é’¥ï¼šä»ç¯å¢ƒå˜é‡è¯»å–</span>
</code></pre>
<p>ç¼ºç‚¹ï¼šæ¯ä¸ªå¼€å‘è€…éƒ½è¦æ‰‹åŠ¨åœ¨è‡ªå·±ç”µè„‘ä¸Šé…ç½®ç¯å¢ƒå˜é‡ï¼Œæ–°æˆå‘˜åŠ å…¥æ—¶æ­¥éª¤å¤šï¼Œå®¹æ˜“é…é”™ã€‚</p>
<h4 data-id="heading-4">æ–¹æ³• 3ï¼šGit å†…ç½®è¿‡æ»¤å™¨ï¼ˆè‡ªåŠ¨åŒ–é¦–é€‰ï¼‰</h4>
<p>è¿™æ˜¯ Git è‡ªå¸¦çš„åŠŸèƒ½ï¼Œç›¸å½“äºç»™é…ç½®æ–‡ä»¶åŠ äº†â€œè‡ªåŠ¨å¼€å…³â€ï¼š</p>
<ul>
<li>æäº¤ä»£ç æ—¶ï¼ˆgit addï¼‰ï¼šè§¦å‘ <code>clean</code> è¿‡æ»¤å™¨ï¼Œè‡ªåŠ¨æŠŠæ•æ„Ÿä¿¡æ¯æ¢æˆå ä½ç¬¦ï¼›</li>
<li>æ‹‰å–ä»£ç æ—¶ï¼ˆgit pullï¼‰ï¼šè§¦å‘<code>smudge</code> è¿‡æ»¤å™¨ï¼Œè‡ªåŠ¨æŠŠå ä½ç¬¦æ¢å›æœ¬åœ°çš„çœŸå®æ•æ„Ÿä¿¡æ¯ã€‚</li>
</ul>
<p>ä¼˜ç‚¹ï¼šä¸ç”¨æ”¹é¡¹ç›®ä»£ç ã€ä¸ç”¨è£…é¢å¤–å·¥å…·ï¼Œå¼€å‘è€…å®Œå…¨ä¸ç”¨ç®¡ï¼Œæäº¤/æ‹‰å–å…¨ç¨‹è‡ªåŠ¨å¤„ç†ï¼Œä¸å½±å“å¼€å‘æ•ˆç‡ã€‚</p>
<h2 data-id="heading-5">äºŒã€è‡ªåŠ¨åŒ–é…ç½®è¿‡æ»¤å™¨è„šæœ¬ï¼ˆç›´æ¥ç”¨ï¼‰</h2>
<p>æ‰‹åŠ¨é…ç½®è¿‡æ»¤å™¨æ­¥éª¤æœ‰ç‚¹å¤šï¼Œæˆ‘å†™äº†ä¸ªè„šæœ¬ï¼Œä¸€é”®å°±èƒ½æå®šæ‰€æœ‰é…ç½®ã€‚ä¸æƒ³çœ‹æ‰‹åŠ¨æ­¥éª¤çš„æœ‹å‹ï¼Œç›´æ¥ç”¨è¿™ä¸ªè„šæœ¬å°±è¡Œï¼</p>
<p>å½“ç„¶ï¼Œè‹¥è¯»è€…å¯¹æ‰‹åŠ¨é…ç½®æ„Ÿå…´è¶£ï¼Œåˆæˆ–æƒ³äº†è§£è„šæœ¬çš„å·¥ä½œåŸç†ï¼Œå¯è·³è¿‡æ­¤éƒ¨åˆ†ï¼Œå¾€åé˜…è¯»ï¼šã€‚</p>
<h3 data-id="heading-6">ä½¿ç”¨æ­¥éª¤ï¼ˆè¶…ç®€å•ï¼‰</h3>
<ol>
<li>æ‰“å¼€ä½ çš„ Git é¡¹ç›®æ ¹ç›®å½•ï¼ˆå°±æ˜¯å’Œ <code>.git</code> æ–‡ä»¶å¤¹åŒçº§çš„ç›®å½•ï¼‰ï¼›</li>
<li>æ–°å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œå‘½åä¸º <code>git_desensitize.sh</code>ï¼›</li>
<li>æŠŠä¸‹é¢çš„ä»£ç å¤åˆ¶ç²˜è´´è¿›å»ï¼›</li>
<li>æ‰§è¡Œå‘½ä»¤ï¼š<code>bash git_desensitize.sh</code>ï¼Œç­‰å¾…è„šæœ¬æ‰§è¡Œå®Œæˆã€‚</li>
</ol>
<p>åç»­åœ¨å…¶ä»–åœ°æ–¹æ‹‰å–é¡¹ç›®ï¼Œåªéœ€æŠŠåŸé¡¹ç›®çš„ <code>.git/config</code> æ–‡ä»¶å¤åˆ¶è¿‡å»ï¼Œåˆ é™¤è¦å¤åŸçš„ã€Œéœ€è„±æ•æ–‡ä»¶ã€ï¼ˆå¦‚ä¹‹å‰çš„ settings.yamlï¼‰ï¼Œå†æ‰§è¡Œ <code>git checkout-index --all --force</code> å°±èƒ½æ¢å¤æœ¬åœ°é…ç½®ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/17adf1a16c234d11aba536f5eccf1e4d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR2VudGx5QmVpbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767974024&amp;x-signature=It1bS9Din%2FKZKvZ7kOgN%2BfJjvt0%3D" alt="image.png" loading="lazy"/></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>
<span class="hljs-comment"># ==============================================================</span>
<span class="hljs-comment"># Git é…ç½®æ–‡ä»¶å…¨è‡ªåŠ¨è„±æ•è„šæœ¬</span>
<span class="hljs-comment"># ä½¿ç”¨è¯´æ˜ï¼š1.ä¿®æ”¹é¡¶éƒ¨ã€é…ç½®åŒºã€‘çš„fileså’Œfields </span>
<span class="hljs-comment"># Â  Â  Â  Â   2.æ‰§è¡Œè„šæœ¬ï¼šbash git_desensitize.sh</span>
<span class="hljs-comment"># æ ¸å¿ƒç‰¹æ€§ï¼šä¸€é”®ç”Ÿæˆclean/smudgeè¿‡æ»¤å™¨ + ç»‘å®š.gitattributes</span>
<span class="hljs-comment"># ==============================================================</span>
â€‹
<span class="hljs-comment"># ========== ã€å”¯ä¸€é…ç½®åŒºã€‘ ==========</span>
<span class="hljs-comment"># è¦è„±æ•çš„æ–‡ä»¶åˆ—è¡¨</span>
files=(
 Â <span class="hljs-string">"settings.yaml"</span>
 Â <span class="hljs-comment"># "src/config/.env"</span>
 Â <span class="hljs-comment"># "application.yml"</span>
)
â€‹
<span class="hljs-comment"># è¦è„±æ•çš„å­—æ®µååˆ—è¡¨</span>
fields=(
 Â <span class="hljs-string">"password"</span>
 Â <span class="hljs-string">"secret"</span>
 Â <span class="hljs-string">"issuer"</span>
 Â <span class="hljs-string">"addr"</span>
 Â <span class="hljs-string">"host"</span>
 Â <span class="hljs-string">"port"</span>
 Â <span class="hljs-string">"ip"</span>
 Â <span class="hljs-string">"domain"</span>
 Â <span class="hljs-string">"send_email"</span>
 Â <span class="hljs-string">"app_key"</span>
 Â <span class="hljs-string">"access_key"</span>
 Â <span class="hljs-string">"secret_key"</span>
)
â€‹
<span class="hljs-comment"># ========== ã€å¸¸é‡å®šä¹‰ã€‘ ==========</span>
FILTER_NAME=<span class="hljs-string">"auto_sensitive_filter"</span> Â  Â  Â  Â  Â <span class="hljs-comment"># Gitè¿‡æ»¤å™¨åç§°</span>
GIT_ATTRIBUTES=<span class="hljs-string">".gitattributes"</span> Â  Â  Â  Â  Â  Â  Â <span class="hljs-comment"># ç»‘å®šæ–‡ä»¶åç§°</span>
BASE_PLACEHOLDER=<span class="hljs-string">"******"</span> Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-comment"># å ä½ç¬¦åŸºç¡€å‰ç¼€</span>
â€‹
<span class="hljs-comment"># ========== ã€0.å‰ç½®ä¸€é”®æ ¡éªŒã€‘ ==========</span>
<span class="hljs-function"><span class="hljs-title">check_env</span></span>(){
  [ ! -d <span class="hljs-string">".git"</span> ] &amp;&amp; <span class="hljs-built_in">echo</span> -e <span class="hljs-string">"\033[31mè¯·åœ¨Gité¡¹ç›®æ ¹ç›®å½•æ‰§è¡Œï¼\033[0m"</span> &amp;&amp; <span class="hljs-built_in">exit</span> 1
  [ ! $(<span class="hljs-built_in">command</span> -v git) ] &amp;&amp; <span class="hljs-built_in">echo</span> -e <span class="hljs-string">"\033[31mæœªæ£€æµ‹åˆ°Gitç¯å¢ƒï¼\033[0m"</span> &amp;&amp; <span class="hljs-built_in">exit</span> 1
  [ ! $(<span class="hljs-built_in">command</span> -v sed) ] &amp;&amp; <span class="hljs-built_in">echo</span> -e <span class="hljs-string">"\033[31mæœªæ£€æµ‹åˆ°sedå‘½ä»¤ï¼\033[0m"</span> &amp;&amp; <span class="hljs-built_in">exit</span> 1
} &amp;&amp; check_env
â€‹
<span class="hljs-comment"># ========== ã€1.æ‰«ææå–æ•æ„Ÿå€¼+å»é‡+ç”Ÿæˆæ˜ å°„ã€‘ ==========</span>
<span class="hljs-built_in">echo</span> -e <span class="hljs-string">"\n\033[36m===== æ‰«æç›®æ ‡æ–‡ä»¶ï¼Œæå–æ•æ„Ÿå€¼ =====\033[0m"</span>
<span class="hljs-built_in">declare</span> -A FIELD_COUNTER Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-comment"># å­—æ®µè®¡æ•°å™¨ï¼šè®°å½•æ¯ä¸ªå­—æ®µæœ‰æ•ˆåºå·</span>
<span class="hljs-built_in">declare</span> -a VALUE_MAPPING Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-comment"># æ ¸å¿ƒæ˜ å°„è¡¨ï¼šå­˜å‚¨ åŸå§‹å€¼|å­—æ®µå|åºå·</span>
<span class="hljs-built_in">declare</span> -A DUPLICATE_CHECK_MAP Â  Â  Â  Â  Â  Â  Â  <span class="hljs-comment"># å»é‡æ ¡éªŒMAPï¼škey=å­—æ®µå_åŸå§‹å€¼ï¼Œå®ç°åŒé‡å»é‡</span>
â€‹
<span class="hljs-comment"># åˆå§‹åŒ–å­—æ®µè®¡æ•°å™¨</span>
<span class="hljs-keyword">for</span> field <span class="hljs-keyword">in</span> <span class="hljs-string">"<span class="hljs-variable">${fields[@]}</span>"</span>; <span class="hljs-keyword">do</span>
  FIELD_COUNTER[<span class="hljs-variable">$field</span>]=0
<span class="hljs-keyword">done</span>
â€‹
<span class="hljs-comment"># éå†æ‰€æœ‰ç›®æ ‡æ–‡ä»¶</span>
<span class="hljs-keyword">for</span> file <span class="hljs-keyword">in</span> <span class="hljs-string">"<span class="hljs-variable">${files[@]}</span>"</span>; <span class="hljs-keyword">do</span>
 Â <span class="hljs-keyword">if</span> [ ! -f <span class="hljs-string">"<span class="hljs-variable">$file</span>"</span> ]; <span class="hljs-keyword">then</span>
 Â  Â <span class="hljs-built_in">echo</span> -e <span class="hljs-string">"\033[33mæ–‡ä»¶ <span class="hljs-variable">$file</span> ä¸å­˜åœ¨ï¼Œè·³è¿‡\033[0m"</span>
 Â   <span class="hljs-built_in">continue</span>
 Â <span class="hljs-keyword">fi</span>
â€‹
 Â <span class="hljs-comment"># éå†æ‰€æœ‰è„±æ•å­—æ®µ</span>
 Â <span class="hljs-keyword">for</span> field <span class="hljs-keyword">in</span> <span class="hljs-string">"<span class="hljs-variable">${fields[@]}</span>"</span>; <span class="hljs-keyword">do</span>
 Â  Â all_origin_values=$(sed -n <span class="hljs-string">"s/^[[:space:]]*<span class="hljs-variable">${field}</span>[[:space:]]*[:=][[:space:]]*["</span><span class="hljs-string">']*(.*)["'</span>]*[[:space:]]*$/\1/p<span class="hljs-string">" "</span><span class="hljs-variable">$file</span><span class="hljs-string">")
 Â  Â 
 Â  Â # éå†æ‰€æœ‰æå–åˆ°çš„åŸå§‹å€¼
 Â  Â while IFS= read -r origin_value; do
 Â  Â  Â if [ -z "</span><span class="hljs-variable">$origin_value</span><span class="hljs-string">" ]; then
 Â  Â  Â   continue
 Â  Â  Â fi
 Â  Â  Â 
 Â  Â  Â # å»é‡ï¼šå­—æ®µå+åŸå§‹å€¼ ä½œä¸ºKEYï¼Œå®Œå…¨ä¸€è‡´åˆ™åˆ¤å®šä¸ºé‡å¤
 Â  Â  Â unique_check_key="</span><span class="hljs-variable">${field}</span>_<span class="hljs-variable">${origin_value}</span><span class="hljs-string">"
 Â  Â  Â if [[ -n "</span><span class="hljs-variable">${DUPLICATE_CHECK_MAP[$unique_check_key]}</span><span class="hljs-string">" ]]; then
 Â  Â  Â  Â echo -e "</span>\033[33mé‡å¤ï¼š<span class="hljs-variable">$file</span> -&gt; <span class="hljs-variable">$field</span> = <span class="hljs-variable">$origin_value</span>\033[0m<span class="hljs-string">"
 Â  Â  Â   continue
 Â  Â  Â fi
â€‹
 Â  Â  Â # éé‡å¤æ•°æ®ï¼šåºå·è‡ªå¢ + æ ‡è®°å»é‡KEY + å­˜å…¥æ˜ å°„è¡¨
 Â  Â   ((FIELD_COUNTER[<span class="hljs-variable">$field</span>]++))
 Â  Â  Â seq_num=<span class="hljs-variable">${FIELD_COUNTER[$field]}</span>
 Â  Â   DUPLICATE_CHECK_MAP[<span class="hljs-variable">$unique_check_key</span>]=1
 Â  Â   VALUE_MAPPING+=("</span><span class="hljs-variable">$origin_value</span>|<span class="hljs-variable">$field</span>|<span class="hljs-variable">$seq_num</span><span class="hljs-string">")
 Â  Â  Â echo -e "</span>\033[32mæå–ï¼š<span class="hljs-variable">$file</span> -&gt; $field<span class="hljs-variable">$seq_num</span> = <span class="hljs-variable">$origin_value</span>\033[0m<span class="hljs-string">"
 Â  Â done &lt;&lt;&lt; "</span><span class="hljs-variable">$all_origin_values</span><span class="hljs-string">"
 Â done
done
â€‹
# æ ¡éªŒæ˜¯å¦æˆåŠŸè·å–åˆ°åŸå§‹å€¼
if [ <span class="hljs-variable">${#VALUE_MAPPING[@]}</span> -eq 0 ]; then
 Â echo -e "</span>\033[31mé”™è¯¯ï¼šæœªæ‰«æåˆ°ä»»ä½•æœ‰æ•ˆå­—æ®µå€¼\033[0m<span class="hljs-string">"
 Â exit 1
fi
â€‹
# ========== ã€2.ç”Ÿæˆclean/smudgeè§„åˆ™ã€‘ ==========
echo -e "</span>\n\033[36m===== ç”Ÿæˆclean/smudgeè§„åˆ™ =====\033[0m<span class="hljs-string">"
CLEAN_RULE="</span><span class="hljs-string">"
SMUDGE_RULE="</span><span class="hljs-string">"
â€‹
for item in "</span><span class="hljs-variable">${VALUE_MAPPING[@]}</span><span class="hljs-string">"; do
 Â # è§£ææ˜ å°„é¡¹ï¼šåŸå§‹å€¼|å­—æ®µå|åºå·
 Â val=<span class="hljs-subst">$(echo <span class="hljs-string">"<span class="hljs-variable">$item</span>"</span> | cut -d'|' -f1)</span>
 Â field=<span class="hljs-subst">$(echo <span class="hljs-string">"<span class="hljs-variable">$item</span>"</span> | cut -d'|' -f2)</span>
 Â num=<span class="hljs-subst">$(echo <span class="hljs-string">"<span class="hljs-variable">$item</span>"</span> | cut -d'|' -f3)</span>
 Â placeholder="</span><span class="hljs-variable">${BASE_PLACEHOLDER}</span>_<span class="hljs-variable">${field}</span><span class="hljs-variable">${num}</span><span class="hljs-string">"
 Â 
 Â # è½¬ä¹‰æ‰€æœ‰ç‰¹æ®Šå­—ç¬¦
 Â val_esc=<span class="hljs-subst">$(echo <span class="hljs-string">"<span class="hljs-variable">$val</span>"</span> | sed 's/[/*$&amp;|]/\&amp;/g')</span>
 Â ph_esc=<span class="hljs-subst">$(echo <span class="hljs-string">"<span class="hljs-variable">$placeholder</span>"</span> | sed 's/[/*$&amp;|]/\&amp;/g')</span>
 Â 
 Â # ç”Ÿæˆsedè§„åˆ™ï¼šå°†åŸå§‹å€¼æ›¿æ¢ä¸ºå ä½ç¬¦
  CLEAN_RULE+="</span> -e <span class="hljs-string">'s/${val_esc}/${ph_esc}/g'</span><span class="hljs-string">"
  SMUDGE_RULE+="</span> -e <span class="hljs-string">'s/${ph_esc}/${val_esc}/g'</span><span class="hljs-string">"
done
â€‹
echo -e "</span>\033[32mç”Ÿæˆ<span class="hljs-variable">${#VALUE_MAPPING[@]}</span>æ¡\033[0m<span class="hljs-string">"
â€‹
# ========== ã€3.é…ç½®Gitå…¨å±€è¿‡æ»¤å™¨ã€‘ ==========
echo -e "</span>\n\033[36m===== é…ç½®Gitå…¨å±€è¿‡æ»¤å™¨ =====\033[0m<span class="hljs-string">"
# å‘èµ·é…ç½®å‘½ä»¤
git config filter.<span class="hljs-variable">$FILTER_NAME</span>.clean "</span>sed <span class="hljs-variable">$CLEAN_RULE</span><span class="hljs-string">"
git config filter.<span class="hljs-variable">$FILTER_NAME</span>.smudge "</span>sed <span class="hljs-variable">$SMUDGE_RULE</span><span class="hljs-string">"
git config filter.<span class="hljs-variable">$FILTER_NAME</span>.required true
â€‹
# æ£€æŸ¥é…ç½®æ˜¯å¦æˆåŠŸ
filter_check=<span class="hljs-subst">$(git config --get filter.$FILTER_NAME.clean)</span>
smudge_check=<span class="hljs-subst">$(git config --get filter.$FILTER_NAME.smudge)</span>
required_check=<span class="hljs-subst">$(git config --get filter.$FILTER_NAME.required)</span>
if [ -n "</span><span class="hljs-variable">$filter_check</span><span class="hljs-string">" ] &amp;&amp; [ -n "</span><span class="hljs-variable">$smudge_check</span><span class="hljs-string">" ] &amp;&amp; [ "</span><span class="hljs-variable">$required_check</span><span class="hljs-string">" = "</span><span class="hljs-literal">true</span><span class="hljs-string">" ]; then
 Â echo -e "</span>\033[32mé…ç½®æˆåŠŸ\033[0m<span class="hljs-string">"
else
 Â echo -e "</span>\033[31mè¿‡æ»¤å™¨é…ç½®å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨æ‰§è¡Œè„šæœ¬å†…å‘½ä»¤\033[0m<span class="hljs-string">"
 Â exit 1
fi
â€‹
# ========== ã€4.ç»‘å®šæ–‡ä»¶åˆ°.gitattributesã€‘ ==========
echo -e "</span>\n\033[36m===== ç»‘å®šæ–‡ä»¶è¿‡æ»¤è§„åˆ™ =====\033[0m<span class="hljs-string">"
for file in "</span><span class="hljs-variable">${files[@]}</span><span class="hljs-string">"; do
 Â if ! grep -q "</span>^<span class="hljs-variable">${file}</span>[[:space:]]*filter=<span class="hljs-variable">${FILTER_NAME}</span>$<span class="hljs-string">" <span class="hljs-variable">$GIT_ATTRIBUTES</span> 2&gt;/dev/null; then
 Â   echo "</span><span class="hljs-variable">${file}</span> filter=<span class="hljs-variable">${FILTER_NAME}</span><span class="hljs-string">" &gt;&gt; <span class="hljs-variable">$GIT_ATTRIBUTES</span>
 Â   echo -e "</span>\033[32mç»‘å®šï¼š<span class="hljs-variable">$file</span> -&gt; <span class="hljs-variable">$FILTER_NAME</span>\033[0m<span class="hljs-string">"
 Â else
 Â  Â echo -e "</span>\033[33mæç¤ºï¼š<span class="hljs-variable">$file</span> å·²å­˜åœ¨è¿‡æ»¤è§„åˆ™\033[0m<span class="hljs-string">"
 Â fi
done
â€‹
git add <span class="hljs-variable">$GIT_ATTRIBUTES</span>
echo -e "</span>\033[32mä¿®æ”¹æˆåŠŸï¼š<span class="hljs-variable">$GIT_ATTRIBUTES</span>\033[0m<span class="hljs-string">"
â€‹
â€‹
# ========== ã€5.é‡æ–°è¿½è¸ªåº”ç”¨ã€‘ ==========
echo -e "</span>\n\033[36m===== é‡æ–°è¿½è¸ªæ–‡ä»¶ =====\033[0m<span class="hljs-string">"
for file in "</span><span class="hljs-variable">${files[@]}</span><span class="hljs-string">"; do
 Â if [ -f "</span><span class="hljs-variable">$file</span><span class="hljs-string">" ]; then
 Â if git diff --cached --quiet "</span><span class="hljs-variable">$file</span><span class="hljs-string">" &gt;/dev/null 2&gt;&amp;1; then
 Â  Â  git rm -r --cached "</span><span class="hljs-variable">$file</span><span class="hljs-string">"
 Â fi
 Â  Â git add "</span><span class="hljs-variable">$file</span><span class="hljs-string">"
 Â fi
done
â€‹
echo -e "</span>\033[32må®Œæˆ\033[0m<span class="hljs-string">"
exit 0
</span></code></pre>
<h2 data-id="heading-7">ä¸‰ã€æƒ³äº†è§£åŸç†ï¼Ÿæ‰‹åŠ¨é…ç½®æ­¥éª¤</h2>
<p>å¦‚æœæƒ³ææ‡‚èƒŒåçš„åŸç†ï¼Œæˆ–è€…éœ€è¦è‡ªå®šä¹‰é…ç½®ï¼Œå¯ä»¥è·Ÿç€ä¸‹é¢çš„æ­¥éª¤æ‰‹åŠ¨æ“ä½œã€‚</p>
<p>å…¶å®æ ¸å¿ƒå°± 3 æ­¥ï¼šé…ç½®è¿‡æ»¤å™¨ã€ç»‘å®šæ–‡ä»¶ã€éªŒè¯æ•ˆæœã€‚</p>
<h3 data-id="heading-8">ç¬¬ä¸€æ­¥ï¼šé…ç½®è¿‡æ»¤å™¨</h3>
<p>æ¨èåªè®©è¿‡æ»¤å™¨åœ¨å½“å‰é¡¹ç›®ç”Ÿæ•ˆï¼ˆé¿å…å½±å“å…¶ä»–é¡¹ç›®ï¼‰ï¼Œæ“ä½œå¾ˆç®€å•ï¼š</p>
<ol>
<li>æ‰“å¼€é¡¹ç›®é‡Œçš„<code>.git</code> æ–‡ä»¶å¤¹ï¼ˆè¿™ä¸ªæ–‡ä»¶å¤¹æ˜¯éšè—çš„ï¼Œéœ€è¦æ˜¾ç¤ºéšè—æ–‡ä»¶ï¼‰ï¼›</li>
<li>æ‰¾åˆ° <code>config</code> æ–‡ä»¶ï¼Œç”¨è®°äº‹æœ¬æˆ–ç¼–è¾‘å™¨æ‰“å¼€ï¼›</li>
<li>åœ¨æ–‡ä»¶æœ«å°¾æ·»åŠ ä¸‹é¢çš„å†…å®¹ï¼š</li>
</ol>

<pre><code class="hljs language-ini" lang="ini"><span class="hljs-section">[filter "sensitive_filter"]</span> Â <span class="hljs-comment"># è¿‡æ»¤å™¨åå­—ï¼Œè‡ªå·±éšä¾¿èµ·ï¼Œåé¢è¦ç”¨åˆ°</span>
 Â   <span class="hljs-attr">clean</span> = sed -e <span class="hljs-string">'s/123456/****_pwd1/g'</span> -e <span class="hljs-string">'s/666123/****_pwd2/g'</span>
 Â   <span class="hljs-attr">smudge</span> = sed -e <span class="hljs-string">'s/****_pwd1/123456/g'</span> -e <span class="hljs-string">'s/****_pwd2/666123/g'</span>
 Â   <span class="hljs-attr">required</span> = <span class="hljs-literal">true</span>
</code></pre>
<p>è§£é‡Šä¸‹è¿™å‡ è¡Œçš„æ„æ€ï¼ˆç†è§£å°±è¡Œï¼‰ï¼š</p>
<ul>
<li><code>s/åŸå†…å®¹/æ›¿æ¢å†…å®¹/g</code>ï¼šsed çš„æ›¿æ¢è¯­æ³•ï¼Œ<code>s</code> è¡¨ç¤ºæ–‡æœ¬æ›¿æ¢ï¼Œ<code>g</code> è¡¨ç¤ºå…¨å±€åŒ¹é…æ›¿æ¢ï¼ˆå‡ºç°å¤šæ¬¡å…¨éƒ½æ›¿æ¢ï¼‰ï¼›</li>
<li><code>clean = ...</code>ï¼šæäº¤æ—¶æ‰§è¡Œçš„å‘½ä»¤ï¼ŒæŠŠçœŸå®å¯†ç ï¼ˆæ¯”å¦‚ <code>123456</code>ï¼‰æ¢æˆå ä½ç¬¦ï¼ˆæ¯”å¦‚ <code>****_pwd1</code>ï¼‰ï¼›</li>
<li><code>smudge = ...</code>ï¼šæ‹‰å–æ—¶æ‰§è¡Œçš„å‘½ä»¤ï¼ŒæŠŠå ä½ç¬¦ï¼ˆ<code>****_pwd1</code>ï¼‰æ¢å›çœŸå®å€¼ï¼ˆ<code>123456</code>ï¼‰ï¼›</li>
<li><code>-e</code>ï¼šå¯ä»¥æ‹¼æ¥å¤šä¸ªæ›¿æ¢è§„åˆ™ï¼Œæ¯”å¦‚åŒæ—¶æ›¿æ¢å¯†ç å’Œå¯†é’¥ï¼ˆæ”¯æŒæ­£åˆ™è¡¨è¾¾å¼ï¼‰ï¼›</li>
</ul>
<blockquote>
<p>ğŸ’¡<strong>æ³¨æ„</strong>ï¼š</p>
<p><code>.git/config</code> æ˜¯æœ¬åœ°æ–‡ä»¶ï¼Œä¸ä¼šæäº¤åˆ°è¿œç¨‹ä»“åº“ï¼</p>
<p>å›¢é˜Ÿå…¶ä»–æˆå‘˜éœ€è¦åœ¨è‡ªå·±çš„æœ¬åœ°é¡¹ç›®é‡Œï¼Œä¹Ÿé…ç½®è¿™ä¸ªæ–‡ä»¶ï¼ˆå¯ä»¥æŠŠä½ çš„ config æ–‡ä»¶å‘ç»™ä»–ä»¬å¤åˆ¶ï¼‰ã€‚</p>
</blockquote>
<blockquote>
<p>ğŸ‘€<strong>ç»†å¿ƒçš„ä½ æœ‰æ²¡æœ‰å‘ç°ï¼Ÿ</strong></p>
<p>è¿™æ ·å†™é…ç½®ï¼Œå¦‚æœè¦è„±æ•çš„å­—æ®µå¾ˆå¤šï¼Œé‚£å°±è¦é‡å¤å†™å¾ˆé•¿çš„ä¸€ä¸²è§„åˆ™å•Šï¼</p>
<p>è¿˜æ˜¯ç”¨æˆ‘å†™çš„è‡ªåŠ¨è„šæœ¬å§~~ï¼</p>
</blockquote>
<h4 data-id="heading-9">è¡¥å……åšæ³•</h4>
<ol>
<li>
<p>æƒ³è®© git å…¨å±€é¡¹ç›®éƒ½ç”Ÿæ•ˆï¼Œé‚£å°±è¦ä¿®æ”¹ Git å…¨å±€é…ç½®æ–‡ä»¶ <code>.gitconfig</code>ï¼›ä¸€èˆ¬windows çš„ git å…¨å±€é…ç½®æ–‡ä»¶ä½ç½®ä¸º <code>C:\Users\ä½ çš„ç”¨æˆ·å.gitconfig</code>ï¼›</p>
</li>
<li>
<p>ä¹Ÿå¯ä»¥ç”¨å‘½ä»¤è¡Œè¿›è¡Œé…ç½®</p>
<ul>
<li>
<p>å…¨å±€é…ç½®ç”Ÿæ•ˆï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># é…ç½® clean è¿‡æ»¤å™¨</span>
git config --<span class="hljs-keyword">global</span> <span class="hljs-built_in">filter</span>.sensitive_filter.clean <span class="hljs-string">"sed -e 's/123456/****_pwd1/g' -e 's/666123/****_pwd2/g'"</span>
â€‹
<span class="hljs-comment"># é…ç½® smudge è¿‡æ»¤å™¨</span>
git config --<span class="hljs-keyword">global</span> <span class="hljs-built_in">filter</span>.sensitive_filter.smudge <span class="hljs-string">"sed -e 's/****_pwd1/123456/g' -e 's/****_pwd2/666123/g'"</span>
â€‹
<span class="hljs-comment"># å¼ºåˆ¶ç”Ÿæ•ˆï¼šæ— è¿‡æ»¤è§„åˆ™åˆ™æ‹’ç»æäº¤/æ‹‰å–</span>
git config --<span class="hljs-keyword">global</span> <span class="hljs-built_in">filter</span>.sensitive_filter.required true
</code></pre>
<ul>
<li><code>filter.sensitive_filter.clean</code>ï¼šæ­¤å¤„ç¬¬äºŒæ®µçš„ <code>sensitive_filter</code> æ˜¯è‡ªå®šä¹‰è¿‡æ»¤å™¨åç§°ã€‚</li>
</ul>
</li>
<li>
<p>ä»…å½“å‰é¡¹ç›®é…ç½®ç”Ÿæ•ˆï¼šå»æ‰å‚æ•° <code>--global</code> å³å¯ã€‚</p>
</li>
</ul>
</li>
</ol>
<h3 data-id="heading-10">ç¬¬äºŒæ­¥ï¼šåˆ›å»º .gitattributes æ–‡ä»¶ï¼ˆå‘Šè¯‰Gitå“ªäº›æ–‡ä»¶è¦è¿‡æ»¤ï¼‰</h3>
<p>æˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ª <code>.gitattributes</code> æ–‡ä»¶ï¼Œå‘Šè¯‰ Gitâ€œå“ªäº›æ–‡ä»¶éœ€è¦ç”¨ä¸Šé¢é…ç½®çš„è¿‡æ»¤å™¨â€ã€‚è¿™ä¸ªæ–‡ä»¶è¦æäº¤åˆ°ä»“åº“ï¼Œè®©å›¢é˜Ÿæ‰€æœ‰äººéƒ½èƒ½ç”¨åŒæ ·çš„è§„åˆ™ã€‚</p>
<ol>
<li>åœ¨é¡¹ç›®æ ¹ç›®å½•æ–°å»ºæ–‡ä»¶ï¼Œå‘½åä¸º <code>.gitattributes</code>ï¼›</li>
<li>å†™å…¥ä¸‹é¢çš„å†…å®¹ï¼ˆæ ¹æ®ä½ çš„é…ç½®æ–‡ä»¶è°ƒæ•´ï¼‰ï¼š</li>
</ol>

<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># æ ¼å¼ï¼šã€éœ€è¦è¿‡æ»¤çš„æ–‡ä»¶ã€‘ filter=è¿‡æ»¤å™¨åç§°</span>
â€‹
<span class="hljs-comment"># å•æ–‡ä»¶ç²¾å‡†åŒ¹é…ï¼ˆæ¨èï¼Œç²¾å‡†è„±æ•ï¼‰</span>
settings.yaml <span class="hljs-attr">filter</span>=sensitive_filter
â€‹
<span class="hljs-comment"># é€šé…ç¬¦åŒ¹é…ï¼ˆæ‰¹é‡è„±æ•ï¼Œé€‚åˆåŒç±»å‹é…ç½®æ–‡ä»¶ï¼‰</span>
*.yml <span class="hljs-attr">filter</span>=sensitive_filter
â€‹
<span class="hljs-comment"># æ’é™¤ä¸éœ€è¦è¿‡æ»¤çš„æ–‡ä»¶ï¼ˆå¯é€‰ï¼‰</span>
README.md !filter
â€‹
<span class="hljs-comment"># æ³¨æ„ï¼šè¿‡æ»¤å™¨åç§° `sensitive_filter` å¿…é¡»å’Œæ­¥éª¤ 1 ä¸­é…ç½®çš„å®Œå…¨ä¸€è‡´ï¼ˆå¤§å°å†™æ•æ„Ÿï¼‰</span>
</code></pre>
<p>å†™å®Œåï¼Œæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤æäº¤è¿™ä¸ªæ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-sql" lang="sql">git <span class="hljs-keyword">add</span> .gitattributes
git <span class="hljs-keyword">commit</span> <span class="hljs-operator">-</span>m "æ·»åŠ æ•æ„Ÿæ–‡ä»¶è¿‡æ»¤è§„åˆ™"
</code></pre>
<h3 data-id="heading-11">ç¬¬ä¸‰æ­¥ï¼šéªŒè¯é…ç½®æ˜¯å¦æˆåŠŸ</h3>
<p>æŸ¥çœ‹å·²é…ç½®çš„è¿‡æ»¤è§„åˆ™ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-meta"># æŸ¥çœ‹å…¨å±€è¿‡æ»¤å™¨é…ç½®</span>
git config --<span class="hljs-keyword">global</span> --<span class="hljs-keyword">get</span>-regexp filter
â€‹
<span class="hljs-meta"># æŸ¥çœ‹å½“å‰é¡¹ç›®è¿‡æ»¤å™¨é…ç½®</span>
git config --<span class="hljs-keyword">get</span>-regexp filter
â€‹
<span class="hljs-meta"># æŸ¥çœ‹æ‰€æœ‰ Git é…ç½®ï¼ˆå«è¿‡æ»¤å™¨ï¼‰</span>
git config --list
</code></pre>
<h3 data-id="heading-12">ç¬¬å››æ­¥ï¼šä½¿ç”¨éªŒè¯</h3>
<p>å¦‚æœä½ çš„é…ç½®æ–‡ä»¶ä¹‹å‰å·²ç»è¢« Git è¿½è¸ªè¿‡ï¼ˆæ¯”å¦‚å·²ç»æäº¤è¿‡ï¼‰ï¼Œéœ€è¦å…ˆæŠŠå®ƒä» Git æš‚å­˜åŒºç§»é™¤ï¼ˆä¸ä¼šåˆ é™¤æœ¬åœ°æ–‡ä»¶ï¼‰ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">git <span class="hljs-built_in">rm</span> --cached <span class="hljs-string">"è¢«è„±æ•æ–‡ä»¶çš„åœ°å€"</span>
</code></pre>
<p>ç„¶åéªŒè¯è„±æ•æ•ˆæœï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-meta"># å°†æ–‡ä»¶åŠ å…¥æš‚å­˜åŒºï¼ˆè§¦å‘ clean è„±æ•ï¼‰</span>
git <span class="hljs-keyword">add</span> <span class="hljs-string">"è¢«è„±æ•æ–‡ä»¶çš„åœ°å€"</span>
â€‹
<span class="hljs-meta"># æŸ¥çœ‹æš‚å­˜åŒºä¸­æ–‡ä»¶çš„è„±æ•æ•ˆæœ</span>
git diff --cached <span class="hljs-string">"è¢«è„±æ•æ–‡ä»¶çš„åœ°å€"</span>
â€‹
<span class="hljs-meta"># æäº¤åˆ°æœ¬åœ°ä»“åº“</span>
git commit -m <span class="hljs-string">"feat: æäº¤è„±æ•åçš„é…ç½®æ–‡ä»¶"</span>
</code></pre>
<h3 data-id="heading-13">è¡¥å……ï¼šç”¨æ­£åˆ™å®ç°â€œä»»æ„æ•æ„Ÿå€¼è‡ªåŠ¨è„±æ•â€</h3>
<p>å¦‚æœä½ çš„é…ç½®æ–‡ä»¶é‡Œæ•æ„Ÿå€¼ç»å¸¸å˜ï¼Œä¸æƒ³æ¯æ¬¡éƒ½æ‰‹åŠ¨åŠ æ›¿æ¢è§„åˆ™ï¼Œå¯ä»¥ç”¨æ­£åˆ™è¡¨è¾¾å¼å†™ clean è§„åˆ™ï¼Œå®ç°â€œåªè¦æ˜¯æŸä¸ªå­—æ®µï¼Œå°±è‡ªåŠ¨æ›¿æ¢æˆå ä½ç¬¦â€ã€‚</p>
<p>æ¯”å¦‚è¿™æ ·é…ç½®è¿‡æ»¤å™¨ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-section">[filter "sensitive_filter"]</span>
 Â   <span class="hljs-attr">clean</span> = sed -e <span class="hljs-string">'s/(password:\s*).*/\1******/g'</span> -e <span class="hljs-string">'s/(secret:\s*).*/\2******/g'</span> -e <span class="hljs-string">'s/(token:\s*).*/\1******/g'</span>
 Â   <span class="hljs-attr">smudge</span> = sed -e <span class="hljs-string">'s/password: 1******/password: my_db_pass_123/g'</span> -e <span class="hljs-string">'s/secret: 2******/secret: my_jwt_7890/g'</span>
 Â   <span class="hljs-attr">required</span> = <span class="hljs-literal">true</span>
</code></pre>
<p>è¯´æ˜ï¼šè¿™ç§æ–¹å¼é€‚åˆæ•æ„Ÿå­—æ®µå›ºå®šï¼Œä½†å€¼ç»å¸¸å˜çš„åœºæ™¯ï¼Œä¸è¿‡ smudge è§„åˆ™è¿˜æ˜¯è¦æ‰‹åŠ¨ç»´æŠ¤çœŸå®å€¼ï¼Œä¸å¦‚è‡ªåŠ¨åŒ–è„šæœ¬çœå¿ƒã€‚</p>
<h2 data-id="heading-14">å››ã€æ€»ç»“ä¸€ä¸‹</h2>
<p>å¦‚æœæ˜¯æ­£åœ¨å¼€å‘çš„é¡¹ç›®ï¼Œä¼˜å…ˆç”¨ã€ŒGit å†…ç½®è¿‡æ»¤å™¨ã€+ã€Œè‡ªåŠ¨åŒ–è„šæœ¬ã€ï¼Œä¸€é”®é…ç½®ï¼Œå…¨ç¨‹è‡ªåŠ¨è„±æ•/è¿˜åŸï¼Œä¸å½±å“å¼€å‘ï¼›å¦‚æœæ˜¯å·²å¼€å‘å®Œçš„é¡¹ç›®ï¼Œç”¨æ¨¡æ¿æ–‡ä»¶æˆ–ç¯å¢ƒå˜é‡çš„æ–¹å¼æ›´ç®€å•ã€‚</p>
<p>æ ¸å¿ƒåŸåˆ™å°±æ˜¯ï¼šæ•æ„Ÿä¿¡æ¯åªç•™åœ¨æœ¬åœ°ï¼Œä»“åº“é‡Œåªå­˜è„±æ•åçš„å†…å®¹ï¼Œæ—¢å®‰å…¨åˆçœå¿ƒï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Elasticsearchï¼šåœ¨ Streams ä¸­ä½¿ç”¨ ML è‡ªåŠ¨åŒ– log è§£æ]]></title>    <link>https://juejin.cn/post/7589940210832506923</link>    <guid>https://juejin.cn/post/7589940210832506923</guid>    <pubDate>2026-01-03T01:51:28.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589940210832506923" data-draft-id="7590020026395492406" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Elasticsearchï¼šåœ¨ Streams ä¸­ä½¿ç”¨ ML è‡ªåŠ¨åŒ– log è§£æ"/> <meta itemprop="keywords" content="Elasticsearch"/> <meta itemprop="datePublished" content="2026-01-03T01:51:28.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Elasticsearch"/> <meta itemprop="url" content="https://juejin.cn/user/2612095360441448"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Elasticsearchï¼šåœ¨ Streams ä¸­ä½¿ç”¨ ML è‡ªåŠ¨åŒ– log è§£æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2612095360441448/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Elasticsearch
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-03T01:51:28.000Z" title="Sat Jan 03 2026 01:51:28 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä½œè€…ï¼šæ¥è‡ª ElasticÂ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.elastic.co%2Fsearch-labs%2Fauthor%2Fnastia-havriushenko" title="https://www.elastic.co/search-labs/author/nastia-havriushenko" target="_blank" ref="nofollow noopener noreferrer">Nastia Havriushenko</a></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e843b17925e242e185dd66e6eedecd4e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRWxhc3RpY3NlYXJjaA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768009888&amp;x-signature=S0dr2cF7VlTFkkPYi%2Fa0Xj73PEk%3D" alt="" loading="lazy"/></p>
<p>äº†è§£ä¸€ç§æ··åˆ ML æ–¹æ³•å¦‚ä½•é€šè¿‡åœ¨ Streams ä¸­ä½¿ç”¨ log æ ¼å¼æŒ‡çº¹è¯†åˆ«çš„è‡ªåŠ¨åŒ–å®éªŒï¼Œå®ç° 94% çš„ log è§£æå‡†ç¡®ç‡å’Œ 91% çš„ log åˆ†åŒºå‡†ç¡®ç‡ã€‚</p>
<p>æ— ç¼è¿æ¥é¢†å…ˆçš„ AI å’Œ machine learning å¹³å°ã€‚å¼€å§‹ä¸€ä¸ª<a href="https://link.juejin.cn?target=https%3A%2F%2Fcloud.elastic.co%2Fregistration" title="https://cloud.elastic.co/registration" target="_blank" ref="nofollow noopener noreferrer">å…è´¹çš„ cloud è¯•ç”¨</a>æ¥æ¢ç´¢ Elastic çš„ gen AI èƒ½åŠ›ï¼Œæˆ–è€…ç°åœ¨å°±åœ¨ä½ çš„<a href="https://link.juejin.cn?target=https%3A%2F%2Felasticstack.blog.csdn.net%2Farticle%2Fdetails%2F143747798" title="https://elasticstack.blog.csdn.net/article/details/143747798" target="_blank" ref="nofollow noopener noreferrer">æœºå™¨</a>ä¸Šè¯•ç”¨ã€‚</p>
<p>åœ¨ç°ä»£å¯è§‚æµ‹æ€§æŠ€æœ¯æ ˆä¸­ï¼Œå°†æ¥è‡ªä¸åŒæ•°æ®æä¾›æ–¹çš„éç»“æ„åŒ– log æ‘„å–åˆ°åƒ Elasticsearch è¿™æ ·çš„å¹³å°ä»ç„¶æ˜¯ä¸€ä¸ªæŒ‘æˆ˜ã€‚ä¾èµ–æ‰‹å·¥ç¼–å†™çš„è§£æè§„åˆ™ä¼šäº§ç”Ÿè„†å¼±çš„ç®¡é“ï¼Œå³ä½¿ä¸Šæ¸¸ä»£ç çš„è½»å¾®æ›´æ–°ä¹Ÿä¼šå¯¼è‡´è§£æå¤±è´¥å’Œæ•°æ®æ— æ³•è¢«ç´¢å¼•ã€‚è¿™ç§è„†å¼±æ€§è¿˜å› å¯æ‰©å±•æ€§é—®é¢˜è€ŒåŠ å‰§ï¼šåœ¨åŠ¨æ€çš„ microservices ç¯å¢ƒä¸­ï¼Œä¸æ–­æ–°å¢çš„æ–°æœåŠ¡ä½¿å¾—æ‰‹åŠ¨ç»´æŠ¤è§„åˆ™å˜æˆä¸€åœºè¿ç»´å™©æ¢¦ã€‚</p>
<p>æˆ‘ä»¬çš„ç›®æ ‡æ˜¯è½¬å‘ä¸€ç§è‡ªåŠ¨åŒ–ã€å¯è‡ªé€‚åº”çš„æ–¹æ³•ï¼Œèƒ½å¤ŸåŒæ—¶å¤„ç† log è§£æï¼ˆå­—æ®µæå–ï¼‰å’Œ log åˆ†åŒºï¼ˆæ¥æºè¯†åˆ«ï¼‰ã€‚æˆ‘ä»¬å‡è®¾ï¼Œå¤§è¯­è¨€æ¨¡å‹ LLMs å‡­å€Ÿå…¶å¯¹ä»£ç è¯­æ³•å’Œè¯­ä¹‰æ¨¡å¼çš„å†…åœ¨ç†è§£ï¼Œå¯ä»¥åœ¨å‡ ä¹ä¸éœ€è¦äººå·¥å¹²é¢„çš„æƒ…å†µä¸‹è‡ªåŠ¨å®Œæˆè¿™äº›ä»»åŠ¡ã€‚</p>
<h2 data-id="heading-0">æ•°æ®é›†æè¿°</h2>
<p>æˆ‘ä»¬é€‰æ‹©äº† <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Flogpai%2Floghub" title="https://github.com/logpai/loghub" target="_blank" ref="nofollow noopener noreferrer">Loghub</a> çš„ log é›†åˆä½œä¸º PoC çš„æ•°æ®æ¥æºã€‚åœ¨æœ¬æ¬¡ç ”ç©¶ä¸­ï¼Œæˆ‘ä»¬ä»ä»¥ä¸‹å…³é”®é¢†åŸŸé€‰æ‹©äº†å…·æœ‰ä»£è¡¨æ€§çš„æ ·æœ¬ï¼š</p>
<ul>
<li><strong>åˆ†å¸ƒå¼ç³»ç»Ÿ</strong>ï¼šæˆ‘ä»¬ä½¿ç”¨äº† HDFSï¼ˆHadoop Distributed File Systemï¼‰å’Œ Spark æ•°æ®é›†ã€‚è¿™äº›æ•°æ®é›†åŒ…å«äº†å…¸å‹çš„å¤§æ•°æ®å¹³å°ä¸­çš„ infoã€debug å’Œ error æ¶ˆæ¯ã€‚</li>
<li><strong>æœåŠ¡å™¨å’Œ web åº”ç”¨</strong>ï¼šæ¥è‡ª Apache web æœåŠ¡å™¨å’Œ OpenSSH çš„ logs æä¾›äº†å¤§é‡è®¿é—®ã€é”™è¯¯ä»¥åŠä¸å®‰å…¨ç›¸å…³çš„äº‹ä»¶ã€‚è¿™äº›å¯¹äºç›‘æ§ web æµé‡å’Œæ£€æµ‹æ½œåœ¨å¨èƒè‡³å…³é‡è¦ã€‚</li>
<li><strong>æ“ä½œç³»ç»Ÿ</strong>ï¼šæˆ‘ä»¬åŒ…å«äº† Linux å’Œ Windows çš„ logsã€‚è¿™äº›æ•°æ®é›†ä»£è¡¨äº†è¿ç»´å›¢é˜Ÿæ—¥å¸¸é‡åˆ°çš„å¸¸è§ã€åŠç»“æ„åŒ–çš„ç³»ç»Ÿçº§äº‹ä»¶ã€‚</li>
<li><strong>ç§»åŠ¨ç³»ç»Ÿ</strong>ï¼šä¸ºäº†ç¡®ä¿æˆ‘ä»¬çš„æ¨¡å‹èƒ½å¤Ÿå¤„ç†æ¥è‡ªç§»åŠ¨ç¯å¢ƒçš„ logsï¼Œæˆ‘ä»¬åŠ å…¥äº† Android æ•°æ®é›†ã€‚è¿™äº› logs é€šå¸¸éå¸¸å†—é•¿ï¼Œè®°å½•äº†ç§»åŠ¨è®¾å¤‡ä¸Šå¤§é‡åº”ç”¨çº§å’Œç³»ç»Ÿçº§æ´»åŠ¨ã€‚</li>
<li><strong>è¶…çº§è®¡ç®—æœº</strong>ï¼šä¸ºäº†æµ‹è¯•åœ¨é«˜æ€§èƒ½è®¡ç®— HPC ç¯å¢ƒä¸‹çš„è¡¨ç°ï¼Œæˆ‘ä»¬å¼•å…¥äº† BGLï¼ˆBlue Gene/Lï¼‰æ•°æ®é›†ã€‚è¯¥æ•°æ®é›†åŒ…å«é«˜åº¦ç»“æ„åŒ–çš„ logsï¼Œå¹¶å¸¦æœ‰ç‰¹å®šé¢†åŸŸçš„æœ¯è¯­ã€‚</li>
</ul>
<p>Loghub é›†åˆçš„ä¸€ä¸ªå…³é”®ä¼˜åŠ¿åœ¨äºï¼Œè¿™äº› logs å¤§å¤šæ˜¯æœªæ¸…æ´—ã€æœªæ ‡æ³¨çš„ï¼ŒçœŸå®åœ°æ¨¡æ‹Ÿäº†å…·æœ‰ microservice æ¶æ„çš„å˜ˆæ‚ç”Ÿäº§ç¯å¢ƒã€‚</p>
<p>Log ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">`

<span class="hljs-number">1</span>.  <span class="hljs-selector-attr">[Sun Dec 04 20:34:21 2005]</span> <span class="hljs-selector-attr">[notice]</span> <span class="hljs-built_in">jk2_init</span>() Found child <span class="hljs-number">2008</span> in scoreboard slot <span class="hljs-number">6</span>
<span class="hljs-number">2</span>.  <span class="hljs-selector-attr">[Sun Dec 04 20:34:25 2005]</span> <span class="hljs-selector-attr">[notice]</span> workerEnv<span class="hljs-selector-class">.init</span>() ok /etc/httpd/conf/workers2<span class="hljs-selector-class">.properties</span>
<span class="hljs-number">3</span>.  <span class="hljs-selector-attr">[Mon Dec 05 11:06:51 2005]</span> <span class="hljs-selector-attr">[notice]</span> workerEnv<span class="hljs-selector-class">.init</span>() ok /etc/httpd/conf/workers2<span class="hljs-selector-class">.properties</span>
<span class="hljs-number">4</span>.  <span class="hljs-number">17</span>/<span class="hljs-number">06</span>/<span class="hljs-number">09</span> <span class="hljs-number">20</span>:<span class="hljs-number">10</span>:<span class="hljs-number">58</span> INFO output.FileOutputCommitter: Saved output of task <span class="hljs-string">'attempt_201706092018_0024_m_000083_1138'</span> to hdfs://<span class="hljs-number">10.10</span>.<span class="hljs-number">34.11</span>:<span class="hljs-number">9000</span>/pjhe/test/<span class="hljs-number">1</span>/_temporary/<span class="hljs-number">0</span>/task_201706092018_0024_m_000083
<span class="hljs-number">5</span>.  <span class="hljs-number">17</span>/<span class="hljs-number">06</span>/<span class="hljs-number">09</span> <span class="hljs-number">20</span>:<span class="hljs-number">10</span>:<span class="hljs-number">58</span> INFO mapred.SparkHadoopMapRedUtil: attempt_201706092018_0024_m_000083_1138: Committed

`AIå†™ä»£ç 
</code></pre>
<p>æ­¤å¤–ï¼Œæˆ‘ä»¬è¿˜åˆ›å»ºäº†ä¸€ä¸ª Kubernetes é›†ç¾¤ï¼Œé‡‡ç”¨å…¸å‹çš„ web åº”ç”¨ + æ•°æ®åº“ çš„è®¾ç½®ï¼Œåœ¨æœ€å¸¸è§çš„é¢†åŸŸä¸­æŒ–æ˜é¢å¤–çš„ logsã€‚</p>
<p>å¸¸è§ log å­—æ®µç¤ºä¾‹ï¼štimestampã€log levelï¼ˆINFOã€WARNã€ERRORï¼‰ã€sourceã€messageã€‚</p>
<h2 data-id="heading-1">ä½¿ç”¨ LLM è¿›è¡Œ few-shot log è§£æ</h2>
<p>æˆ‘ä»¬çš„ç¬¬ä¸€ç»„å®éªŒèšç„¦äºä¸€ä¸ªåŸºç¡€é—®é¢˜ï¼š<strong>LLM æ˜¯å¦èƒ½å¤Ÿå¯é åœ°è¯†åˆ«å…³é”®å­—æ®µï¼Œå¹¶ç”Ÿæˆä¸€è‡´çš„è§£æè§„åˆ™æ¥æå–å®ƒä»¬ï¼Ÿ</strong></p>
<p>æˆ‘ä»¬è®©æ¨¡å‹åˆ†æåŸå§‹ log æ ·æœ¬ï¼Œå¹¶ç”Ÿæˆ regular expressionï¼ˆregexï¼‰å’Œ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.elastic.co%2Fdocs%2Fexplore-analyze%2Fscripting%2Fgrok" title="https://www.elastic.co/docs/explore-analyze/scripting/grok" target="_blank" ref="nofollow noopener noreferrer">Grok</a> æ ¼å¼çš„ log è§£æè§„åˆ™ã€‚ç»“æœè¡¨æ˜ï¼Œè¿™ç§æ–¹æ³•å…·æœ‰å¾ˆå¤§æ½œåŠ›ï¼Œä½†åœ¨å®ç°å±‚é¢ä¹Ÿå­˜åœ¨æ˜¾è‘—æŒ‘æˆ˜ã€‚</p>
<h3 data-id="heading-2">é«˜ç½®ä¿¡åº¦ä¸ä¸Šä¸‹æ–‡æ„ŸçŸ¥</h3>
<p>åˆæ­¥ç»“æœä»¤äººé¼“èˆã€‚LLM å±•ç°äº†å¾ˆå¼ºçš„èƒ½åŠ›ï¼Œèƒ½å¤Ÿä»¥é«˜ç½®ä¿¡åº¦ç”Ÿæˆä¸æä¾›çš„ few-shot ç¤ºä¾‹ç›¸åŒ¹é…çš„è§£æè§„åˆ™ã€‚é™¤äº†ç®€å•çš„æ¨¡å¼åŒ¹é…ä¹‹å¤–ï¼Œæ¨¡å‹è¿˜è¡¨ç°å‡ºå¯¹ log çš„ç†è§£èƒ½åŠ› â€”â€” å®ƒå¯ä»¥æ­£ç¡®è¯†åˆ«å¹¶å‘½å log æ¥æºï¼ˆä¾‹å¦‚ å¥åº·è¿½è¸ª appã€Nginx web appã€Mongo æ•°æ®åº“ï¼‰ã€‚</p>
<h3 data-id="heading-3">è¾“å…¥æ ·æœ¬çš„ â€œGoldilocksï¼ˆæ°åˆ°å¥½å¤„å›°å¢ƒï¼‰â€ å›°å¢ƒ</h3>
<p>æˆ‘ä»¬çš„å®éªŒå¾ˆå¿«æš´éœ²å‡ºä¸€ä¸ªæ˜¾è‘—çš„é²æ£’æ€§ä¸è¶³é—®é¢˜ï¼Œå³æ¨¡å‹å¯¹è¾“å…¥æ ·æœ¬æåº¦æ•æ„Ÿã€‚æ¨¡å‹çš„è¡¨ç°ä¼šéšç€ prompt ä¸­åŒ…å«çš„å…·ä½“ log ç¤ºä¾‹è€Œå‰§çƒˆæ³¢åŠ¨ã€‚æˆ‘ä»¬è§‚å¯Ÿåˆ°ä¸€ä¸ª log ç›¸ä¼¼æ€§é—®é¢˜ï¼šlog æ ·æœ¬éœ€è¦ <strong>æ°åˆ°å¥½å¤„</strong> åœ°å¤šæ ·åŒ–ï¼š</p>
<ul>
<li><strong>è¿‡äºåŒè´¨ï¼ˆoverfittingï¼‰</strong>ï¼šå¦‚æœè¾“å…¥çš„ logs è¿‡äºç›¸ä¼¼ï¼ŒLLM å¾€å¾€ä¼šè¿‡åº¦å…·ä½“åŒ–ã€‚å®ƒä¼šæŠŠå¯å˜æ•°æ® â€”â€” ä¾‹å¦‚ stack trace ä¸­çš„ç‰¹å®š Java class åç§° â€”â€” å½“ä½œæ¨¡æ¿ä¸­çš„é™æ€éƒ¨åˆ†ã€‚è¿™ä¼šå¯¼è‡´ç”Ÿæˆçš„è§„åˆ™éå¸¸è„†å¼±ï¼Œåªèƒ½è¦†ç›–æå°‘æ¯”ä¾‹çš„ logsï¼Œå¹¶ä¸”æå–å‡ºçš„å­—æ®µä¸å¯ç”¨ã€‚</li>
<li><strong>è¿‡äºå¼‚è´¨ï¼ˆconfusionï¼‰ï¼šç›¸å</strong>ï¼Œå¦‚æœæ ·æœ¬ä¸­åŒ…å«æ˜æ˜¾çš„æ ¼å¼å·®å¼‚ â€”â€” æˆ–è€…æ›´ç³Ÿçš„æ˜¯ï¼ŒåŒ…å«è¯¸å¦‚ progress barsã€memory tablesã€ASCII art ç­‰ â€œtrash logsâ€ â€”â€” æ¨¡å‹å°±å¾ˆéš¾æ‰¾åˆ°å…±åŒç‚¹ã€‚å®ƒå¾€å¾€ä¼šç”Ÿæˆå¤æ‚ä½†æœ‰é—®é¢˜çš„ regexï¼Œæˆ–è€…å¹²è„†è¿‡åº¦æ³›åŒ–ï¼ŒæŠŠæ•´è¡Œéƒ½è§£ææˆä¸€ä¸ªå•ä¸€çš„ message blob å­—æ®µã€‚</li>
</ul>
<h3 data-id="heading-4">ä¸Šä¸‹æ–‡çª—å£é™åˆ¶</h3>
<p>æˆ‘ä»¬è¿˜é‡åˆ°äº† context window çš„ç“¶é¢ˆã€‚å½“è¾“å…¥çš„ logs å¾ˆé•¿ã€å·®å¼‚å¾ˆå¤§ï¼Œæˆ–è€…åŒ…å«å¤§é‡å¯æå–å­—æ®µæ—¶ï¼Œæ¨¡å‹çš„è¾“å‡ºè´¨é‡å¾€å¾€ä¼šä¸‹é™ï¼Œå˜å¾— â€œæ‚ä¹±â€ï¼Œæˆ–è€…é•¿åº¦è¿‡é•¿è€Œæ— æ³•æ”¾å…¥è¾“å‡ºçš„ context windowã€‚è‡ªç„¶åœ°ï¼Œchunking åœ¨è¿™ç§æƒ…å†µä¸‹ä¼šæœ‰æ‰€å¸®åŠ©ã€‚é€šè¿‡ä½¿ç”¨åŸºäºå­—ç¬¦å’ŒåŸºäºå®ä½“çš„åˆ†éš”ç¬¦æ¥æ‹†åˆ† logsï¼Œæˆ‘ä»¬å¯ä»¥å¸®åŠ©æ¨¡å‹ä¸“æ³¨äºæå–ä¸»è¦å­—æ®µï¼Œè€Œä¸ä¼šè¢«å™ªå£°æ·¹æ²¡ã€‚</p>
<h3 data-id="heading-5">ä¸€è‡´æ€§ä¸æ ‡å‡†åŒ–å·®è·</h3>
<p>å³ä½¿æ¨¡å‹æˆåŠŸç”Ÿæˆäº†è§£æè§„åˆ™ï¼Œæˆ‘ä»¬ä»ç„¶æ³¨æ„åˆ°ä¸€äº›ç»†å¾®çš„ä¸ä¸€è‡´æ€§ï¼š</p>
<ul>
<li><strong>æœåŠ¡å‘½åå·®å¼‚</strong>ï¼šæ¨¡å‹åœ¨ä¸åŒè¿è¡Œä¸­ä¼šä¸ºåŒä¸€å®ä½“æå‡ºä¸åŒåç§°ï¼ˆä¾‹å¦‚ï¼Œå°† source æ ‡æ³¨ä¸º â€œSparkâ€ã€ â€œApache Sparkâ€ å’Œ â€œSpark Log Analyticsâ€ï¼‰ã€‚</li>
<li><strong>å­—æ®µå‘½åå·®å¼‚</strong>ï¼šå­—æ®µåç§°ç¼ºä¹æ ‡å‡†åŒ–ï¼ˆä¾‹å¦‚ idã€ service.idã€ device.idï¼‰ã€‚æˆ‘ä»¬ä½¿ç”¨æ ‡å‡†åŒ–çš„ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.elastic.co%2Fdocs%2Freference%2Fecs%2Fecs-field-reference" title="https://www.elastic.co/docs/reference/ecs/ecs-field-reference" target="_blank" ref="nofollow noopener noreferrer">Elastic å­—æ®µå‘½å</a>å¯¹åç§°è¿›è¡Œäº†å½’ä¸€åŒ–ã€‚</li>
<li><strong>è§£æç²’åº¦å·®å¼‚</strong>ï¼šå­—æ®µæå–çš„è§£æç²’åº¦ä¼šæ ¹æ®è¾“å…¥æ—¥å¿—å½¼æ­¤ä¹‹é—´çš„ç›¸ä¼¼ç¨‹åº¦è€Œå˜åŒ–ã€‚</li>
</ul>
<h2 data-id="heading-6">æ—¥å¿—æ ¼å¼æŒ‡çº¹</h2>
<p>ä¸ºäº†è§£å†³æ—¥å¿—ç›¸ä¼¼æ€§çš„é—®é¢˜ï¼Œæˆ‘ä»¬å¼•å…¥äº†ä¸€ç§é«˜æ€§èƒ½çš„å¯å‘å¼æ–¹æ³•ï¼šæ—¥å¿—æ ¼å¼æŒ‡çº¹ï¼ˆ <strong>log format fingerprint, LFF</strong> ï¼‰ã€‚</p>
<p>æˆ‘ä»¬ä¸å†ç›´æ¥æŠŠåŸå§‹ã€å˜ˆæ‚çš„æ—¥å¿—è¾“å…¥åˆ° LLM ä¸­ï¼Œè€Œæ˜¯å…ˆå¯¹æ¯æ¡æ—¥å¿—åº”ç”¨ä¸€ä¸ªç¡®å®šæ€§çš„è½¬æ¢ï¼Œä»¥æ­ç¤ºå…¶åº•å±‚ç»“æ„ã€‚è¿™ä¸ªé¢„å¤„ç†æ­¥éª¤ä¼šæŠ½è±¡æ‰å¯å˜æ•°æ®ï¼Œç”Ÿæˆä¸€ä¸ªç®€åŒ–çš„ â€œæŒ‡çº¹â€ï¼Œä»è€Œè®©æˆ‘ä»¬å¯ä»¥å¯¹ç›¸å…³æ—¥å¿—è¿›è¡Œåˆ†ç»„ã€‚</p>
<p>æ˜ å°„é€»è¾‘è¢«è®¾è®¡å¾—éå¸¸ç®€å•ï¼Œä»¥ä¿è¯é€Ÿåº¦å’Œä¸€è‡´æ€§ï¼š</p>
<ul>
<li><strong>æ•°å­—æŠ½è±¡</strong>ï¼šä»»ä½•ç”±æ•°å­—ï¼ˆ 0â€“9 ï¼‰ç»„æˆçš„åºåˆ—éƒ½ä¼šè¢«æ›¿æ¢ä¸ºä¸€ä¸ª â€˜0â€™ã€‚</li>
<li><strong>æ–‡æœ¬æŠ½è±¡</strong>ï¼šä»»ä½•ç”±å­—æ¯å­—ç¬¦ç»„æˆå¹¶åŒ…å«ç©ºæ ¼çš„åºåˆ—éƒ½ä¼šè¢«æ›¿æ¢ä¸ºä¸€ä¸ª â€˜aâ€™ã€‚</li>
<li><strong>ç©ºç™½è§„èŒƒåŒ–</strong>ï¼šæ‰€æœ‰è¿ç»­çš„ç©ºç™½ï¼ˆç©ºæ ¼ã€åˆ¶è¡¨ç¬¦ã€æ¢è¡Œç¬¦ï¼‰éƒ½ä¼šæŠ˜å ä¸ºä¸€ä¸ªç©ºæ ¼ã€‚</li>
<li><strong>ç¬¦å·ä¿ç•™</strong>ï¼šæ ‡ç‚¹ç¬¦å·å’Œç‰¹æ®Šå­—ç¬¦ï¼ˆä¾‹å¦‚ : ã€ [ ã€ ] ã€ / ï¼‰ä¼šè¢«ä¿ç•™ä¸‹æ¥ï¼Œå› ä¸ºå®ƒä»¬é€šå¸¸æ˜¯æ—¥å¿—ç»“æ„ä¸­æœ€å¼ºçš„æŒ‡ç¤ºä¿¡å·ã€‚</li>
</ul>
<p>æˆ‘ä»¬å¼•å…¥äº†è¿™ç§æ—¥å¿—æ˜ å°„æ–¹æ³•ã€‚åŸºç¡€çš„æ˜ å°„è§„åˆ™åŒ…æ‹¬ä»¥ä¸‹å†…å®¹ï¼š</p>
<ul>
<li>ä»»æ„é•¿åº¦çš„æ•°å­— 0â€“9 â†’ æ›¿æ¢ä¸º â€˜0â€™ã€‚</li>
<li>ä»»æ„é•¿åº¦çš„æ–‡æœ¬ï¼ˆå¸¦ç©ºæ ¼çš„å­—æ¯å­—ç¬¦ï¼‰ â†’ æ›¿æ¢ä¸º â€˜aâ€™ã€‚</li>
<li>ç©ºæ ¼ã€åˆ¶è¡¨ç¬¦å’Œæ¢è¡Œç¬¦ â†’ åˆå¹¶ä¸ºä¸€ä¸ªç©ºæ ¼ã€‚</li>
</ul>
<p>ä¸‹é¢æ¥çœ‹ä¸€ä¸ªç¤ºä¾‹ï¼Œå±•ç¤ºè¿™ç§æ˜ å°„æ˜¯å¦‚ä½•å¸®åŠ©æˆ‘ä»¬è½¬æ¢æ—¥å¿—çš„ã€‚</p>
<pre><code class="hljs language-less" lang="less">`<span class="hljs-number">1</span>.  <span class="hljs-number">17</span>/<span class="hljs-number">06</span>/<span class="hljs-number">09</span>	<span class="hljs-number">20</span>:<span class="hljs-number">10</span>:<span class="hljs-number">56</span>	<span class="hljs-selector-tag">INFO</span>	<span class="hljs-selector-tag">executor</span><span class="hljs-selector-class">.CoarseGrainedExecutorBackend</span>:	<span class="hljs-selector-tag">Got</span> <span class="hljs-selector-tag">assigned</span> <span class="hljs-selector-tag">task</span> <span class="hljs-number">912</span>
<span class="hljs-number">2</span>.  <span class="hljs-number">0</span>/<span class="hljs-number">0</span>/<span class="hljs-number">0</span>		<span class="hljs-number">0</span>:<span class="hljs-number">0</span>:<span class="hljs-number">0</span>		<span class="hljs-selector-tag">a</span>	<span class="hljs-selector-tag">a</span><span class="hljs-selector-class">.a</span>: 							<span class="hljs-selector-tag">a</span> <span class="hljs-number">0</span>
<span class="hljs-number">3</span>.  <span class="hljs-number">17</span>/<span class="hljs-number">06</span>/<span class="hljs-number">09</span>	<span class="hljs-number">20</span>:<span class="hljs-number">10</span>:<span class="hljs-number">58</span>	<span class="hljs-selector-tag">INFO</span>	<span class="hljs-selector-tag">mapred</span><span class="hljs-selector-class">.SparkHadoopMapRedUtil</span>:	<span class="hljs-selector-tag">attempt_</span> <span class="hljs-number">2017060920</span><span class="hljs-selector-tag">_081_136</span>: <span class="hljs-selector-tag">Committed</span>
<span class="hljs-number">4</span>.  <span class="hljs-number">0</span>/<span class="hljs-number">0</span>/<span class="hljs-number">0</span>	 	<span class="hljs-number">0</span>:<span class="hljs-number">0</span>:<span class="hljs-number">0</span> 	  	<span class="hljs-selector-tag">a</span>  	<span class="hljs-selector-tag">a</span><span class="hljs-selector-class">.a</span>: 							<span class="hljs-selector-tag">a_0_0_0</span>: <span class="hljs-selector-tag">a</span>
<span class="hljs-number">5</span>.  <span class="hljs-number">2015</span><span class="hljs-selector-tag">-07-29</span>	<span class="hljs-number">19</span>:<span class="hljs-number">23</span>:<span class="hljs-number">30</span>,<span class="hljs-number">320</span>	<span class="hljs-selector-tag">-</span> <span class="hljs-selector-tag">WARN</span>  <span class="hljs-selector-attr">[RecvWorker:18861024:$RecvWorker@765]</span> <span class="hljs-selector-tag">-</span> <span class="hljs-selector-tag">Interrupting</span> <span class="hljs-selector-tag">SendWorker</span>
<span class="hljs-number">6</span>.  <span class="hljs-number">0</span><span class="hljs-selector-tag">-0-0</span>		<span class="hljs-number">0</span>:<span class="hljs-number">0</span>:<span class="hljs-number">0</span>,<span class="hljs-number">0</span> 	<span class="hljs-selector-tag">-</span> <span class="hljs-selector-tag">a</span>	<span class="hljs-selector-attr">[a:0:a$a@0]</span>` <span class="hljs-selector-tag">AI</span>å†™ä»£ç 
</code></pre>
<p>å› æ­¤ï¼Œæˆ‘ä»¬å¾—åˆ°å¦‚ä¸‹çš„æ—¥å¿—æ©ç ï¼š</p>
<pre><code class="hljs language-less" lang="less">`

<span class="hljs-number">1</span>.  <span class="hljs-number">0</span>/<span class="hljs-number">0</span>/<span class="hljs-number">0</span>		<span class="hljs-number">0</span>:<span class="hljs-number">0</span>:<span class="hljs-number">0</span>		<span class="hljs-selector-tag">a</span>	<span class="hljs-selector-tag">a</span><span class="hljs-selector-class">.a</span>: 			<span class="hljs-selector-tag">a</span> <span class="hljs-number">0</span>
<span class="hljs-number">2</span>.  <span class="hljs-number">0</span>/<span class="hljs-number">0</span>/<span class="hljs-number">0</span>	 	<span class="hljs-number">0</span>:<span class="hljs-number">0</span>:<span class="hljs-number">0</span> 	  	<span class="hljs-selector-tag">a</span>  	<span class="hljs-selector-tag">a</span><span class="hljs-selector-class">.a</span>: 			<span class="hljs-selector-tag">a_0_0_0</span>: <span class="hljs-selector-tag">a</span>
<span class="hljs-number">3</span>.  <span class="hljs-number">0</span><span class="hljs-selector-tag">-0-0</span>		<span class="hljs-number">0</span>:<span class="hljs-number">0</span>:<span class="hljs-number">0</span>,<span class="hljs-number">0</span> 	<span class="hljs-selector-tag">-</span> <span class="hljs-selector-tag">a</span>	<span class="hljs-selector-attr">[a:0:a$a@0]</span>		<span class="hljs-selector-tag">a</span>

`<span class="hljs-selector-tag">AI</span>å†™ä»£ç 
</code></pre>
<p>æ³¨æ„å‰ä¸¤æ¡æ—¥å¿—çš„æŒ‡çº¹ã€‚å°½ç®¡å®ƒä»¬çš„ timestampã€source class å’Œ message å†…å®¹ä¸åŒï¼Œä½†å®ƒä»¬çš„å‰ç¼€ï¼ˆ0/0/0 0:0:0 a a.a:ï¼‰æ˜¯ç›¸åŒçš„ã€‚è¿™ç§ç»“æ„ä¸Šçš„ä¸€è‡´æ€§ä½¿æˆ‘ä»¬èƒ½å¤Ÿè‡ªåŠ¨å°†è¿™äº›æ—¥å¿—å½’å…¥åŒä¸€ä¸ªç°‡ã€‚</p>
<p>ç„¶è€Œï¼Œç¬¬ä¸‰æ¡æ—¥å¿—ç”Ÿæˆäº†å®Œå…¨ä¸åŒçš„æŒ‡çº¹ï¼ˆ0-0-0â€¦ï¼‰ï¼Œè¿™ä½¿æˆ‘ä»¬èƒ½å¤Ÿåœ¨è°ƒç”¨ LLM ä¹‹å‰ï¼Œé€šè¿‡ç®—æ³•å°†å…¶ä»ç¬¬ä¸€ç»„ä¸­åˆ†ç¦»å‡ºæ¥ã€‚</p>
<h3 data-id="heading-7">é¢å¤–éƒ¨åˆ†ï¼šä½¿ç”¨ ES|QL å³åˆ»å®ç°</h3>
<p>åªéœ€åœ¨ Discover ä¸­ä¼ å…¥ä»¥ä¸‹æŸ¥è¯¢å³å¯ã€‚</p>
<pre><code class="hljs language-sql" lang="sql">`

<span class="hljs-number">1.</span>  <span class="hljs-keyword">FROM</span> loghub <span class="hljs-operator">|</span>
<span class="hljs-number">2.</span>  EVAL <span class="hljs-keyword">pattern</span> <span class="hljs-operator">=</span> REPLACE(REPLACE(REPLACE(REPLACE(raw_message, "[ \t\n]+", " "), "[A-Za-z]+", "a"), "[0-9]+", "0"), "a( a)+", "a") <span class="hljs-operator">|</span>
<span class="hljs-number">3.</span>  STATS total_count <span class="hljs-operator">=</span> <span class="hljs-built_in">COUNT</span>(), ratio <span class="hljs-operator">=</span> <span class="hljs-built_in">COUNT</span>() <span class="hljs-operator">/</span> <span class="hljs-number">2000.0</span>, datasources<span class="hljs-operator">=</span><span class="hljs-keyword">VALUES</span>(filename), example<span class="hljs-operator">=</span>TOP(raw_message, <span class="hljs-number">3</span>, "desc") <span class="hljs-keyword">BY</span> <span class="hljs-built_in">SUBSTRING</span>(<span class="hljs-keyword">pattern</span>, <span class="hljs-number">0</span>, <span class="hljs-number">15</span>) <span class="hljs-operator">|</span>
<span class="hljs-number">4.</span>  SORT total_count <span class="hljs-keyword">DESC</span> <span class="hljs-operator">|</span>
<span class="hljs-number">5.</span>  LIMIT <span class="hljs-number">100</span>

`AIå†™ä»£ç 
</code></pre>
<p>æŸ¥è¯¢è§£æï¼š</p>
<pre><code class="hljs language-sql" lang="sql">`

<span class="hljs-number">1.</span>  <span class="hljs-keyword">FROM</span> loghub:Targets our index containing the raw log data.
<span class="hljs-number">2.</span>  EVAL <span class="hljs-keyword">pattern</span> <span class="hljs-operator">=</span> â€¦:  The core mapping logic. We chain REPLACE functions <span class="hljs-keyword">to</span> perform the abstraction (e.g. digits <span class="hljs-keyword">to</span> <span class="hljs-string">'0'</span>, text <span class="hljs-keyword">to</span> <span class="hljs-string">'a'</span>, etc.) <span class="hljs-keyword">and</span> save the <span class="hljs-keyword">result</span> <span class="hljs-keyword">in</span> a â€œ<span class="hljs-keyword">pattern</span>â€ field. 
<span class="hljs-number">3.</span>  STATS [column1 <span class="hljs-operator">=</span>] expression1, â€¦ <span class="hljs-keyword">BY</span> <span class="hljs-built_in">SUBSTRING</span>(<span class="hljs-keyword">pattern</span>, <span class="hljs-number">0</span>, <span class="hljs-number">15</span>): 
<span class="hljs-number">4.</span>  This <span class="hljs-keyword">is</span> a clustering step. We <span class="hljs-keyword">group</span> logs that share the <span class="hljs-keyword">first</span> <span class="hljs-number">15</span> characters <span class="hljs-keyword">of</span> their <span class="hljs-keyword">pattern</span> <span class="hljs-keyword">and</span> <span class="hljs-keyword">create</span> aggregated fields such <span class="hljs-keyword">as</span> total log count <span class="hljs-keyword">per</span> <span class="hljs-keyword">group</span>, list <span class="hljs-keyword">of</span> log datasources, <span class="hljs-keyword">pattern</span> prefix, <span class="hljs-number">3</span> log examples  
<span class="hljs-number">5.</span>  SORT total_count <span class="hljs-keyword">DESC</span> <span class="hljs-operator">|</span> LIMIT <span class="hljs-number">100</span> : Surfaces the top <span class="hljs-number">100</span> most frequent log patterns

`AIå†™ä»£ç 
</code></pre>
<p>LogHub ä¸Šçš„æŸ¥è¯¢ç»“æœå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ff76dcf06f0d4d67b91ff582127fe56a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRWxhc3RpY3NlYXJjaA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768009888&amp;x-signature=YMZg5EFaJZ9cyhO2gx6OVWoU16I%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2b14fdc2d69546c18394e4526ddf1bec~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRWxhc3RpY3NlYXJjaA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768009888&amp;x-signature=LRSEI%2FkipAINv4C4I71EpiUGEc0%3D" alt="" loading="lazy"/></p>
<p>å¦‚å¯è§†åŒ–æ‰€ç¤ºï¼Œè¿™ç§ â€œLLM-freeâ€ æ–¹æ³•èƒ½å¤Ÿé«˜ç²¾åº¦åœ°å¯¹æ—¥å¿—è¿›è¡Œåˆ†åŒºã€‚å®ƒæˆåŠŸåœ°å°† 16 ä¸ªæ•°æ®æºä¸­çš„ 10 ä¸ªå®Œå…¨èšç±»ï¼ˆ&gt;90%ï¼ŒåŸºäº LogHub æ ‡ç­¾ï¼‰ï¼Œå¹¶åœ¨ 16 ä¸ªæ•°æ®æºä¸­æœ‰ 13 ä¸ªå®ç°å¤šæ•°èšç±»ï¼ˆ&gt;60%ï¼‰â€”â€”å…¨éƒ¨æ— éœ€é¢å¤–æ¸…æ´—ã€é¢„å¤„ç†æˆ–å¾®è°ƒã€‚</p>
<p>æ—¥å¿—æ ¼å¼æŒ‡çº¹ï¼ˆ log format fingerprint, LFFï¼‰ä¸ºå¤æ‚çš„ ML è§£å†³æ–¹æ¡ˆï¼ˆå¦‚<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.elastic.co%2Fdocs%2Freference%2Faggregations%2Fsearch-aggregations-bucket-categorize-text-aggregation" title="https://www.elastic.co/docs/reference/aggregations/search-aggregations-bucket-categorize-text-aggregation" target="_blank" ref="nofollow noopener noreferrer">æ—¥å¿—æ¨¡å¼åˆ†æ</a>ï¼‰æä¾›äº†ä¸€ä¸ªåŠ¡å®ä¸”é«˜æ•ˆçš„æ›¿ä»£æ–¹æ¡ˆå’Œè¡¥å……ã€‚å®ƒèƒ½å¤Ÿç«‹å³æ´å¯Ÿæ—¥å¿—ä¹‹é—´çš„å…³ç³»ï¼Œå¹¶æœ‰æ•ˆç®¡ç†å¤§è§„æ¨¡æ—¥å¿—ç°‡ã€‚</p>
<p>ä½œä¸ºåŸºç¡€å·¥å…·çš„å¤šç”¨é€”æ€§<br/>
å¾—ç›Šäº <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.elastic.co%2Fblog%2Fgetting-started-elasticsearch-query-language" title="https://www.elastic.co/blog/getting-started-elasticsearch-query-language" target="_blank" ref="nofollow noopener noreferrer">ES|QL</a> çš„å®ç°ï¼ŒLFF æ—¢å¯ä½œä¸ºå¿«é€Ÿæ•°æ®è¯Šæ–­/å¯è§†åŒ–çš„ç‹¬ç«‹å·¥å…·ï¼Œä¹Ÿå¯ä½œä¸ºé«˜ååé‡æ—¥å¿—åˆ†æç®¡é“ä¸­çš„æ„å»ºæ¨¡å—ã€‚</p>
<p>çµæ´»æ€§<br/>
LFF æ˜“äºè‡ªå®šä¹‰å’Œæ‰©å±•ï¼Œä»¥æ•è·ç‰¹å®šæ¨¡å¼ï¼Œä¾‹å¦‚åå…­è¿›åˆ¶æ•°å­—å’Œ IP åœ°å€ã€‚</p>
<p>ç¡®å®šæ€§ç¨³å®šæ€§<br/>
ä¸åŸºäº ML çš„èšç±»ç®—æ³•ä¸åŒï¼ŒLFF çš„é€»è¾‘ç®€å•ä¸”ç¡®å®šæ€§ã€‚æ–°è¿›å…¥çš„æ—¥å¿—ä¸ä¼šå¯¹å·²æœ‰æ—¥å¿—ç°‡äº§ç”Ÿå›æº¯å½±å“ã€‚</p>
<p>æ€§èƒ½ä¸å†…å­˜<br/>
å®ƒå ç”¨æœ€å°‘çš„å†…å­˜ï¼Œæ— éœ€è®­ç»ƒæˆ– GPUï¼Œéå¸¸é€‚åˆå®æ—¶é«˜ååé‡ç¯å¢ƒã€‚</p>
<h2 data-id="heading-8">å°†æ—¥å¿—æ ¼å¼æŒ‡çº¹ä¸ LLM ç»“åˆ</h2>
<p>ä¸ºäº†éªŒè¯æ‰€æå‡ºçš„æ··åˆæ¶æ„ï¼Œæ¯æ¬¡å®éªŒéƒ½åŒ…å«æ¥è‡ªæ¯ä¸ªæ•°æ®æºçš„éšæœº 20% æ—¥å¿—å­é›†ã€‚è¿™ä¸ªé™åˆ¶æ¨¡æ‹Ÿäº†çœŸå®ç”Ÿäº§ç¯å¢ƒä¸­æ—¥å¿—æŒ‰æ‰¹å¤„ç†è€Œéä½œä¸ºå•ä¸€å†å²æ•°æ®å—å¤„ç†çš„æƒ…å†µã€‚</p>
<p>ç›®æ ‡æ˜¯è¯æ˜ LFF ä½œä¸ºæœ‰æ•ˆå‹ç¼©å±‚çš„ä½œç”¨ã€‚æˆ‘ä»¬æ—¨åœ¨è¯æ˜å¯ä»¥ä»å°å‹ã€ç²¾å¿ƒæŒ‘é€‰çš„æ ·æœ¬ç”Ÿæˆé«˜è¦†ç›–ç‡çš„è§£æè§„åˆ™ï¼Œå¹¶æˆåŠŸæ¨å¹¿åˆ°æ•´ä¸ªæ•°æ®é›†ã€‚</p>
<h2 data-id="heading-9">æ‰§è¡Œæµç¨‹</h2>
<p>æˆ‘ä»¬å®ç°äº†ä¸€ä¸ªå¤šé˜¶æ®µç®¡é“ï¼Œåœ¨æ•°æ®åˆ°è¾¾ LLM ä¹‹å‰è¿›è¡Œè¿‡æ»¤ã€èšç±»ï¼Œå¹¶åº”ç”¨åˆ†å±‚é‡‡æ ·ã€‚</p>
<p>1ï¼‰ä¸¤é˜¶æ®µåˆ†å±‚èšç±»</p>
<ul>
<li><strong>å­ç±»ï¼ˆç²¾ç¡®åŒ¹é…ï¼‰</strong>ï¼šæ—¥å¿—æŒ‰å®Œå…¨ç›¸åŒçš„æŒ‡çº¹èšåˆã€‚æ¯ä¸ªå­ç±»ä¸­çš„æ—¥å¿—å…±äº«å®Œå…¨ç›¸åŒçš„æ ¼å¼ç»“æ„ã€‚</li>
<li><strong>å¼‚å¸¸æ¸…ç†</strong>ï¼šæˆ‘ä»¬ä¸¢å¼ƒå æ€»æ—¥å¿—é‡ä¸è¶³ 5% çš„å­ç±»ã€‚è¿™ç¡®ä¿ LLM ä¸“æ³¨äºä¸»å¯¼ä¿¡å·ï¼Œè€Œä¸ä¼šè¢«å™ªå£°æˆ–æ ¼å¼é”™è¯¯çš„æ—¥å¿—åˆ†æ•£æ³¨æ„åŠ›ã€‚</li>
<li><strong>å…ƒç±»ï¼ˆå‰ç¼€åŒ¹é…ï¼‰</strong>ï¼šå‰©ä½™å­ç±»æŒ‰æŒ‡çº¹åŒ¹é…çš„å‰ N ä¸ªå­—ç¬¦åˆ†ç»„åˆ°å…ƒç±»ä¸­ã€‚è¿™ç§åˆ†ç»„ç­–ç•¥æœ‰æ•ˆåœ°å°†è¯æ±‡ç›¸ä¼¼çš„æ ¼å¼å½’å…¥åŒä¸€ç±»ã€‚å¯¹äºæœªçŸ¥æ•°æ®æºï¼Œæˆ‘ä»¬åœ¨æ—¥å¿—è§£æä¸­é€‰æ‹© N=5ï¼Œæ—¥å¿—åˆ†åŒºä¸­é€‰æ‹© N=15ã€‚åˆ†å±‚é‡‡æ ·</li>
</ul>
<p>2ï¼‰ä¸€æ—¦æ„å»ºå¥½åˆ†å±‚æ ‘ï¼Œæˆ‘ä»¬å°±ä¸º LLM æ„å»ºæ—¥å¿—æ ·æœ¬ã€‚æˆ˜ç•¥ç›®æ ‡æ˜¯æœ€å¤§åŒ–æ–¹å·®è¦†ç›–ï¼ŒåŒæ—¶æœ€å°åŒ– token ä½¿ç”¨é‡ã€‚</p>
<ul>
<li>æˆ‘ä»¬ä»æ¯ä¸ªå…ƒç±»ä¸­æ¯ä¸ªæœ‰æ•ˆå­ç±»é€‰æ‹©ä»£è¡¨æ€§æ—¥å¿—ã€‚</li>
<li>ä¸ºå¤„ç†å­ç±»è¿‡å¤šçš„æç«¯æƒ…å†µï¼Œæˆ‘ä»¬åº”ç”¨éšæœºä¸‹é‡‡æ ·ä»¥é€‚åº”ç›®æ ‡çª—å£å¤§å°ã€‚</li>
</ul>
<p>3ï¼‰è§„åˆ™ç”Ÿæˆ</p>
<ul>
<li>æœ€åï¼Œæˆ‘ä»¬æç¤º LLM ä¸ºæ¯ä¸ªå…ƒç±»æä¾›çš„æ ·æœ¬ç”Ÿæˆé€‚é…æ‰€æœ‰æ—¥å¿—çš„ regex è§£æè§„åˆ™ã€‚åœ¨æˆ‘ä»¬çš„ PoC ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº† GPT-4o mini æ¨¡å‹ã€‚</li>
</ul>
<h2 data-id="heading-10">å®éªŒç»“æœä¸è§‚å¯Ÿ</h2>
<p>åœ¨ Loghub æ•°æ®é›†ä¸Šï¼Œæˆ‘ä»¬å®ç°äº† 94% çš„è§£æå‡†ç¡®ç‡å’Œ 91% çš„åˆ†åŒºå‡†ç¡®ç‡ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cf5062a044464beaab09e23a1a70d745~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRWxhc3RpY3NlYXJjaA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768009888&amp;x-signature=%2FZAAPBKCbPxvtThwrmZeWCGXP20%3D" alt="" loading="lazy"/></p>
<p>ä¸Šå›¾çš„æ··æ·†çŸ©é˜µå±•ç¤ºäº†æ—¥å¿—åˆ†åŒºç»“æœã€‚çºµè½´è¡¨ç¤ºå®é™…æ•°æ®æºï¼Œæ¨ªè½´è¡¨ç¤ºé¢„æµ‹æ•°æ®æºã€‚çƒ­åŠ›å›¾çš„é¢œè‰²æ·±æµ…å¯¹åº”æ—¥å¿—æ•°é‡ï¼Œé¢œè‰²è¶Šæµ…è¡¨ç¤ºæ•°é‡è¶Šå¤šã€‚å¯¹è§’çº¿çš„å¯¹é½æ˜¾ç¤ºæ¨¡å‹åœ¨æºå½’å±ä¸Šçš„é«˜å‡†ç¡®æ€§ï¼Œæ•£å¸ƒæœ€å°ã€‚</p>
<h2 data-id="heading-11">æˆ‘ä»¬çš„æ€§èƒ½åŸºå‡†æ´å¯Ÿï¼š</h2>
<ul>
<li><strong>æœ€ä¼˜åŸºçº¿</strong>ï¼šæ¯ç±» 30â€“40 æ¡æ—¥å¿—æ ·æœ¬çš„ä¸Šä¸‹æ–‡çª—å£è¢«è¯æ˜æ˜¯â€œæœ€ä½³åŒºé—´â€ï¼Œèƒ½å¤Ÿç¨³å®šç”Ÿæˆå¯é çš„ Regex å’Œ Grok è§£ææ¨¡å¼ã€‚</li>
<li><strong>è¾“å…¥æœ€å°åŒ–</strong>ï¼šæˆ‘ä»¬å°†æ¯ç±»çš„è¾“å…¥è§„æ¨¡å‹ç¼©åˆ° 10 æ¡æ—¥å¿—ç”¨äº Regex æ¨¡å¼ï¼Œè§£ææ€§èƒ½ä»…ä¸‹é™ 2%ï¼Œç¡®è®¤åŸºäºå¤šæ ·æ€§çš„é‡‡æ ·æ¯”åŸå§‹æ•°é‡æ›´å…³é”®ã€‚</li>
</ul>
<p>åŸæ–‡ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.elastic.co%2Fsearch-labs%2Fblog%2Flog-parsing-partitioning-automation-experiments-streams" title="https://www.elastic.co/search-labs/blog/log-parsing-partitioning-automation-experiments-streams" target="_blank" ref="nofollow noopener noreferrer">www.elastic.co/search-labsâ€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä½¿ç”¨ json-server å¿«é€Ÿåˆ›å»ºä¸€ä¸ªå®Œæ•´çš„ REST API]]></title>    <link>https://juejin.cn/post/7589932422654902308</link>    <guid>https://juejin.cn/post/7589932422654902308</guid>    <pubDate>2026-01-02T17:12:30.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589932422654902308" data-draft-id="7589919989039267903" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä½¿ç”¨ json-server å¿«é€Ÿåˆ›å»ºä¸€ä¸ªå®Œæ•´çš„ REST API"/> <meta itemprop="keywords" content="JavaScript,å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-02T17:12:30.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å·¦Pythonå³Java"/> <meta itemprop="url" content="https://juejin.cn/user/4107431173952525"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä½¿ç”¨ json-server å¿«é€Ÿåˆ›å»ºä¸€ä¸ªå®Œæ•´çš„ REST API
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4107431173952525/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å·¦Pythonå³Java
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-02T17:12:30.000Z" title="Fri Jan 02 2026 17:12:30 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">json-server ä½¿ç”¨æ•™ç¨‹</h2>
<h3 data-id="heading-1">ä»€ä¹ˆæ˜¯ json-server</h3>
<p>json-server æ˜¯ä¸€ä¸ªåŸºäº Node.js çš„å·¥å…·ï¼Œå¯ä»¥å¿«é€Ÿåˆ›å»ºä¸€ä¸ªå®Œæ•´çš„ REST APIï¼Œä½¿ç”¨ JSON æ–‡ä»¶ä½œä¸ºæ•°æ®æºã€‚éå¸¸é€‚åˆå‰ç«¯å¼€å‘ã€åŸå‹è®¾è®¡å’Œæµ‹è¯•ã€‚</p>
<h3 data-id="heading-2">å®‰è£…</h3>
<h4 data-id="heading-3">å…¨å±€å®‰è£…</h4>
<pre><code class="hljs language-bash" lang="bash">npm install -g json-server
</code></pre>
<h4 data-id="heading-4">æœ¬åœ°å®‰è£…</h4>
<pre><code class="hljs language-bash" lang="bash">npm install json-server --save-dev
</code></pre>
<h4 data-id="heading-5">ä½¿ç”¨ npxï¼ˆæ¨èï¼‰</h4>
<pre><code class="hljs language-bash" lang="bash">npx json-server
</code></pre>
<h3 data-id="heading-6">å¿«é€Ÿå¼€å§‹</h3>
<h4 data-id="heading-7">1. åˆ›å»ºæ•°æ®æ–‡ä»¶</h4>
<p>åˆ›å»ºä¸€ä¸ª <code>db.json</code> æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"posts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"title"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ç¬¬ä¸€ç¯‡æ–‡ç« "</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"author"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"å¼ ä¸‰"</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"title"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ç¬¬äºŒç¯‡æ–‡ç« "</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"author"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"æå››"</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"comments"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"body"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"å¾ˆå¥½çš„æ–‡ç« "</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"postId"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"profile"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"typicode"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h4 data-id="heading-8">2. å¯åŠ¨æœåŠ¡å™¨</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># é»˜è®¤ç«¯å£ 3000</span>
json-server db.json

<span class="hljs-comment"># æŒ‡å®šç«¯å£</span>
json-server db.json --port 4000

<span class="hljs-comment"># æŒ‡å®šä¸»æœº</span>
json-server db.json --host 0.0.0.0

<span class="hljs-comment"># é™é»˜æ¨¡å¼</span>
json-server db.json --quiet

<span class="hljs-comment"># ç›‘è§†æ–‡ä»¶å˜åŒ–</span>
json-server db.json --watch
</code></pre>
<h4 data-id="heading-9">3. è®¿é—® API</h4>
<p>å¯åŠ¨åï¼ŒæœåŠ¡å™¨ä¼šæä¾›ä»¥ä¸‹ç«¯ç‚¹ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># èµ„æºç«¯ç‚¹</span>
GET    /posts
GET    /posts/1
POST   /posts
PUT    /posts/1
PATCH  /posts/1
DELETE /posts/1

<span class="hljs-comment"># å…¶ä»–èµ„æº</span>
GET    /comments
GET    /profile
</code></pre>
<h3 data-id="heading-10">REST API æ“ä½œ</h3>
<h4 data-id="heading-11">GET - è·å–æ•°æ®</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># è·å–æ‰€æœ‰æ–‡ç« </span>
curl http://localhost:3000/posts

<span class="hljs-comment"># è·å–æŒ‡å®š ID çš„æ–‡ç« </span>
curl http://localhost:3000/posts/1

<span class="hljs-comment"># è·å–ä¸ªäººèµ„æ–™</span>
curl http://localhost:3000/profile
</code></pre>
<h4 data-id="heading-12">POST - åˆ›å»ºæ•°æ®</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åˆ›å»ºæ–°æ–‡ç« </span>
curl -X POST http://localhost:3000/posts \
  -H <span class="hljs-string">"Content-Type: application/json"</span> \
  -d <span class="hljs-string">'{
    "title": "æ–°æ–‡ç« ",
    "author": "ç‹äº”"
  }'</span>

<span class="hljs-comment"># ä½¿ç”¨ JavaScript fetch</span>
fetch(<span class="hljs-string">'http://localhost:3000/posts'</span>, {
  method: <span class="hljs-string">'POST'</span>,
  headers: {
    <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json'</span>
  },
  body: JSON.stringify({
    title: <span class="hljs-string">'æ–°æ–‡ç« '</span>,
    author: <span class="hljs-string">'ç‹äº”'</span>
  })
})
</code></pre>
<h4 data-id="heading-13">PUT - å®Œæ•´æ›´æ–°</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å®Œæ•´æ›´æ–°æ–‡ç« ï¼ˆå¿…é¡»åŒ…å«æ‰€æœ‰å­—æ®µï¼‰</span>
curl -X PUT http://localhost:3000/posts/1 \
  -H <span class="hljs-string">"Content-Type: application/json"</span> \
  -d <span class="hljs-string">'{
    "id": 1,
    "title": "æ›´æ–°åçš„æ ‡é¢˜",
    "author": "å¼ ä¸‰"
  }'</span>
</code></pre>
<h4 data-id="heading-14">PATCH - éƒ¨åˆ†æ›´æ–°</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># éƒ¨åˆ†æ›´æ–°æ–‡ç« ï¼ˆåªæ›´æ–°æŒ‡å®šå­—æ®µï¼‰</span>
curl -X PATCH http://localhost:3000/posts/1 \
  -H <span class="hljs-string">"Content-Type: application/json"</span> \
  -d <span class="hljs-string">'{
    "title": "åªæ›´æ–°æ ‡é¢˜"
  }'</span>
</code></pre>
<h4 data-id="heading-15">DELETE - åˆ é™¤æ•°æ®</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åˆ é™¤æ–‡ç« </span>
curl -X DELETE http://localhost:3000/posts/1
</code></pre>
<h3 data-id="heading-16">é«˜çº§æŸ¥è¯¢</h3>
<h4 data-id="heading-17">è¿‡æ»¤</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æŒ‰å­—æ®µè¿‡æ»¤</span>
GET /posts?author=å¼ ä¸‰

<span class="hljs-comment"># å¤šæ¡ä»¶è¿‡æ»¤</span>
GET /posts?author=å¼ ä¸‰&amp;<span class="hljs-built_in">id</span>=1

<span class="hljs-comment"># åµŒå¥—å±æ€§è¿‡æ»¤</span>
GET /comments?postId=1
</code></pre>
<h4 data-id="heading-18">åˆ†é¡µ</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åˆ†é¡µæŸ¥è¯¢</span>
GET /posts?_page=1&amp;_limit=10

<span class="hljs-comment"># è·å–æ€»æ•°ï¼ˆåœ¨å“åº”å¤´ X-Total-Count ä¸­ï¼‰</span>
</code></pre>
<h4 data-id="heading-19">æ’åº</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å‡åºæ’åº</span>
GET /posts?_sort=<span class="hljs-built_in">id</span>&amp;_order=asc

<span class="hljs-comment"># é™åºæ’åº</span>
GET /posts?_sort=<span class="hljs-built_in">id</span>&amp;_order=desc

<span class="hljs-comment"># å¤šå­—æ®µæ’åº</span>
GET /posts?_sort=author,<span class="hljs-built_in">id</span>&amp;_order=asc,desc
</code></pre>
<h4 data-id="heading-20">åˆ‡ç‰‡</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># èŒƒå›´æŸ¥è¯¢</span>
GET /posts?_start=0&amp;_end=10

<span class="hljs-comment"># é™åˆ¶æ•°é‡</span>
GET /posts?_limit=5

<span class="hljs-comment"># è·³è¿‡æ•°é‡</span>
GET /posts?_start=5
</code></pre>
<h4 data-id="heading-21">æ“ä½œç¬¦</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å¤§äº</span>
GET /posts?id_gte=1

<span class="hljs-comment"># å°äº</span>
GET /posts?id_lte=10

<span class="hljs-comment"># ä¸ç­‰äº</span>
GET /posts?id_ne=1

<span class="hljs-comment"># åŒ…å«</span>
GET /posts?q=å…³é”®è¯

<span class="hljs-comment"># æ­£åˆ™è¡¨è¾¾å¼</span>
GET /posts?id_like=1
</code></pre>
<h4 data-id="heading-22">å…¨æ–‡æœç´¢</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æœç´¢åŒ…å«å…³é”®è¯çš„è®°å½•</span>
GET /posts?q=æ–‡ç« 

<span class="hljs-comment"># æœç´¢ä¼šåœ¨æ‰€æœ‰å­—æ®µä¸­æŸ¥æ‰¾</span>
</code></pre>
<h4 data-id="heading-23">å…³è”æŸ¥è¯¢</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># è·å–æ–‡ç« åŠå…¶è¯„è®º</span>
GET /posts/1?_embed=comments

<span class="hljs-comment"># è·å–è¯„è®ºåŠå…¶æ‰€å±æ–‡ç« </span>
GET /comments?_expand=post

<span class="hljs-comment"># åµŒå¥—å¤šä¸ªå…³ç³»</span>
GET /posts/1?_embed=comments&amp;_embed=likes
</code></pre>
<h3 data-id="heading-24">é…ç½®é€‰é¡¹</h3>
<h4 data-id="heading-25">å‘½ä»¤è¡Œé€‰é¡¹</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å®Œæ•´å‘½ä»¤ç¤ºä¾‹</span>
json-server db.json \
  --port 4000 \
  --host 0.0.0.0 \
  --watch \
  --routes routes.json \
  --middlewares middleware.js \
  --static ./public \
  --read-only \
  --no-cors
</code></pre>
<h4 data-id="heading-26">é€‰é¡¹è¯´æ˜</h4>













































<table><thead><tr><th>é€‰é¡¹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>--port</code></td><td>æŒ‡å®šç«¯å£å·ï¼ˆé»˜è®¤ 3000ï¼‰</td></tr><tr><td><code>--host</code></td><td>æŒ‡å®šä¸»æœºåœ°å€ï¼ˆé»˜è®¤ localhostï¼‰</td></tr><tr><td><code>--watch</code></td><td>ç›‘è§†æ–‡ä»¶å˜åŒ–</td></tr><tr><td><code>--routes</code></td><td>è‡ªå®šä¹‰è·¯ç”±æ–‡ä»¶</td></tr><tr><td><code>--middlewares</code></td><td>ä¸­é—´ä»¶æ–‡ä»¶</td></tr><tr><td><code>--static</code></td><td>é™æ€æ–‡ä»¶ç›®å½•</td></tr><tr><td><code>--read-only</code></td><td>åªè¯»æ¨¡å¼ï¼ˆç¦ç”¨ POST/PUT/DELETEï¼‰</td></tr><tr><td><code>--no-cors</code></td><td>ç¦ç”¨ CORS</td></tr><tr><td><code>--quiet</code></td><td>é™é»˜æ¨¡å¼</td></tr></tbody></table>
<h3 data-id="heading-27">è‡ªå®šä¹‰è·¯ç”±</h3>
<h4 data-id="heading-28">åˆ›å»ºè·¯ç”±æ–‡ä»¶</h4>
<p>åˆ›å»º <code>routes.json</code>ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"/api/*"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"/$1"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"/:resource/:id/show"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"/:resource/:id"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"/posts/:category"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"/posts?category=:category"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"/articles\\?id=:id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"/posts/:id"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h4 data-id="heading-29">ä½¿ç”¨è‡ªå®šä¹‰è·¯ç”±</h4>
<pre><code class="hljs language-bash" lang="bash">json-server db.json --routes routes.json
</code></pre>
<h4 data-id="heading-30">è·¯ç”±ç¤ºä¾‹</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åŸå§‹è·¯ç”±</span>
GET /posts/1

<span class="hljs-comment"># è‡ªå®šä¹‰è·¯ç”±</span>
GET /api/posts/1        <span class="hljs-comment"># æ˜ å°„åˆ° /posts/1</span>
GET /posts/1/show       <span class="hljs-comment"># æ˜ å°„åˆ° /posts/1</span>
GET /posts/tech         <span class="hljs-comment"># æ˜ å°„åˆ° /posts?category=tech</span>
</code></pre>
<h3 data-id="heading-31">ä¸­é—´ä»¶</h3>
<h4 data-id="heading-32">åˆ›å»ºä¸­é—´ä»¶</h4>
<p>åˆ›å»º <code>middleware.js</code>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = <span class="hljs-function">(<span class="hljs-params">req, res, next</span>) =&gt;</span> {
  <span class="hljs-comment">// æ·»åŠ å“åº”å¤´</span>
  res.<span class="hljs-title function_">header</span>(<span class="hljs-string">'X-Custom-Header'</span>, <span class="hljs-string">'Custom Value'</span>)
  
  <span class="hljs-comment">// è®°å½•è¯·æ±‚</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${req.method}</span> <span class="hljs-subst">${req.url}</span>`</span>)
  
  <span class="hljs-comment">// æ¨¡æ‹Ÿå»¶è¿Ÿ</span>
  <span class="hljs-keyword">if</span> (req.<span class="hljs-property">url</span>.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'delay'</span>)) {
    <span class="hljs-built_in">setTimeout</span>(next, <span class="hljs-number">2000</span>)
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-title function_">next</span>()
  }
}
</code></pre>
<h4 data-id="heading-33">ä½¿ç”¨ä¸­é—´ä»¶</h4>
<pre><code class="hljs language-bash" lang="bash">json-server db.json --middlewares middleware.js
</code></pre>
<h4 data-id="heading-34">é«˜çº§ä¸­é—´ä»¶ç¤ºä¾‹</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = <span class="hljs-function">(<span class="hljs-params">req, res, next</span>) =&gt;</span> {
  <span class="hljs-comment">// èº«ä»½éªŒè¯æ¨¡æ‹Ÿ</span>
  <span class="hljs-keyword">if</span> (req.<span class="hljs-property">method</span> === <span class="hljs-string">'POST'</span> &amp;&amp; !req.<span class="hljs-property">headers</span>.<span class="hljs-property">authorization</span>) {
    <span class="hljs-keyword">return</span> res.<span class="hljs-title function_">status</span>(<span class="hljs-number">401</span>).<span class="hljs-title function_">json</span>({ <span class="hljs-attr">error</span>: <span class="hljs-string">'Unauthorized'</span> })
  }
  
  <span class="hljs-comment">// è¯·æ±‚æ—¥å¿—</span>
  <span class="hljs-keyword">const</span> timestamp = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">toISOString</span>()
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`[<span class="hljs-subst">${timestamp}</span>] <span class="hljs-subst">${req.method}</span> <span class="hljs-subst">${req.url}</span>`</span>)
  
  <span class="hljs-comment">// ä¿®æ”¹å“åº”</span>
  <span class="hljs-keyword">const</span> originalSend = res.<span class="hljs-property">send</span>
  res.<span class="hljs-property">send</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">data</span>) {
    <span class="hljs-keyword">const</span> modifiedData = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(data)
    modifiedData.<span class="hljs-property">timestamp</span> = timestamp
    originalSend.<span class="hljs-title function_">call</span>(<span class="hljs-variable language_">this</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(modifiedData))
  }
  
  <span class="hljs-title function_">next</span>()
}
</code></pre>
<h3 data-id="heading-35">æ•°æ®ç”Ÿæˆ</h3>
<h4 data-id="heading-36">ä½¿ç”¨ Faker.js ç”Ÿæˆæµ‹è¯•æ•°æ®</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> faker = <span class="hljs-built_in">require</span>(<span class="hljs-string">'faker'</span>)
<span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>)

<span class="hljs-keyword">const</span> <span class="hljs-title function_">generateData</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> users = []
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">1</span>; i &lt;= <span class="hljs-number">100</span>; i++) {
    users.<span class="hljs-title function_">push</span>({
      <span class="hljs-attr">id</span>: i,
      <span class="hljs-attr">name</span>: faker.<span class="hljs-property">name</span>.<span class="hljs-title function_">findName</span>(),
      <span class="hljs-attr">email</span>: faker.<span class="hljs-property">internet</span>.<span class="hljs-title function_">email</span>(),
      <span class="hljs-attr">phone</span>: faker.<span class="hljs-property">phone</span>.<span class="hljs-title function_">phoneNumber</span>(),
      <span class="hljs-attr">address</span>: {
        <span class="hljs-attr">street</span>: faker.<span class="hljs-property">address</span>.<span class="hljs-title function_">streetAddress</span>(),
        <span class="hljs-attr">city</span>: faker.<span class="hljs-property">address</span>.<span class="hljs-title function_">city</span>(),
        <span class="hljs-attr">country</span>: faker.<span class="hljs-property">address</span>.<span class="hljs-title function_">country</span>()
      },
      <span class="hljs-attr">company</span>: faker.<span class="hljs-property">company</span>.<span class="hljs-title function_">companyName</span>()
    })
  }
  
  <span class="hljs-keyword">const</span> db = { users }
  fs.<span class="hljs-title function_">writeFileSync</span>(<span class="hljs-string">'db.json'</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(db, <span class="hljs-literal">null</span>, <span class="hljs-number">2</span>))
}

<span class="hljs-title function_">generateData</span>()
</code></pre>
<h4 data-id="heading-37">è¿è¡Œç”Ÿæˆå™¨</h4>
<pre><code class="hljs language-bash" lang="bash">node generate-data.js
json-server db.json
</code></pre>
<h3 data-id="heading-38">ä¸å‰ç«¯æ¡†æ¶é›†æˆ</h3>
<h4 data-id="heading-39">React ç¤ºä¾‹</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> axios <span class="hljs-keyword">from</span> <span class="hljs-string">'axios'</span>

<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">API_URL</span> = <span class="hljs-string">'http://localhost:3000'</span>

<span class="hljs-comment">// è·å–æ‰€æœ‰æ–‡ç« </span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">getPosts</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> axios.<span class="hljs-title function_">get</span>(<span class="hljs-string">`<span class="hljs-subst">${API_URL}</span>/posts`</span>)
  <span class="hljs-keyword">return</span> response.<span class="hljs-property">data</span>
}

<span class="hljs-comment">// åˆ›å»ºæ–‡ç« </span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">createPost</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">post</span>) =&gt; {
  <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> axios.<span class="hljs-title function_">post</span>(<span class="hljs-string">`<span class="hljs-subst">${API_URL}</span>/posts`</span>, post)
  <span class="hljs-keyword">return</span> response.<span class="hljs-property">data</span>
}

<span class="hljs-comment">// æ›´æ–°æ–‡ç« </span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">updatePost</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">id, post</span>) =&gt; {
  <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> axios.<span class="hljs-title function_">put</span>(<span class="hljs-string">`<span class="hljs-subst">${API_URL}</span>/posts/<span class="hljs-subst">${id}</span>`</span>, post)
  <span class="hljs-keyword">return</span> response.<span class="hljs-property">data</span>
}

<span class="hljs-comment">// åˆ é™¤æ–‡ç« </span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">deletePost</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">id</span>) =&gt; {
  <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> axios.<span class="hljs-title function_">delete</span>(<span class="hljs-string">`<span class="hljs-subst">${API_URL}</span>/posts/<span class="hljs-subst">${id}</span>`</span>)
  <span class="hljs-keyword">return</span> response.<span class="hljs-property">data</span>
}
</code></pre>
<h4 data-id="heading-40">Vue ç¤ºä¾‹</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> axios <span class="hljs-keyword">from</span> <span class="hljs-string">'axios'</span>

<span class="hljs-keyword">const</span> api = axios.<span class="hljs-title function_">create</span>({
  <span class="hljs-attr">baseURL</span>: <span class="hljs-string">'http://localhost:3000'</span>
})

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">getPosts</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> api.<span class="hljs-title function_">get</span>(<span class="hljs-string">'/posts'</span>)
    <span class="hljs-keyword">return</span> response.<span class="hljs-property">data</span>
  },
  
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">createPost</span>(<span class="hljs-params">post</span>) {
    <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> api.<span class="hljs-title function_">post</span>(<span class="hljs-string">'/posts'</span>, post)
    <span class="hljs-keyword">return</span> response.<span class="hljs-property">data</span>
  },
  
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">updatePost</span>(<span class="hljs-params">id, post</span>) {
    <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> api.<span class="hljs-title function_">put</span>(<span class="hljs-string">`/posts/<span class="hljs-subst">${id}</span>`</span>, post)
    <span class="hljs-keyword">return</span> response.<span class="hljs-property">data</span>
  },
  
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">deletePost</span>(<span class="hljs-params">id</span>) {
    <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> api.<span class="hljs-title function_">delete</span>(<span class="hljs-string">`/posts/<span class="hljs-subst">${id}</span>`</span>)
    <span class="hljs-keyword">return</span> response.<span class="hljs-property">data</span>
  }
}
</code></pre>
<h3 data-id="heading-41">package.json é…ç½®</h3>
<h4 data-id="heading-42">æ·»åŠ è„šæœ¬</h4>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"my-project"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"version"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"1.0.0"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"scripts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"json-server"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"json-server --watch db.json --port 4000"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"dev"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"npm run json-server"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"devDependencies"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"json-server"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^0.17.3"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h4 data-id="heading-43">è¿è¡Œè„šæœ¬</h4>
<pre><code class="hljs language-bash" lang="bash">npm run dev
</code></pre>
<h3 data-id="heading-44">å¸¸è§é—®é¢˜</h3>
<h4 data-id="heading-45">1. ç«¯å£è¢«å ç”¨</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ä½¿ç”¨å…¶ä»–ç«¯å£</span>
json-server db.json --port 4000
</code></pre>
<h4 data-id="heading-46">2. CORS é—®é¢˜</h4>
<p>json-server é»˜è®¤å¯ç”¨ CORSï¼Œå¦‚æœé‡åˆ°é—®é¢˜ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ç¡®ä¿æ²¡æœ‰ç¦ç”¨ CORS</span>
json-server db.json
</code></pre>
<h4 data-id="heading-47">3. æ•°æ®æŒä¹…åŒ–</h4>
<p>json-server ä¼šå°†ä¿®æ”¹ä¿å­˜åˆ° <code>db.json</code> æ–‡ä»¶ä¸­ï¼Œç¡®ä¿æ–‡ä»¶æœ‰å†™å…¥æƒé™ã€‚</p>
<h4 data-id="heading-48">4. é‡ç½®æ•°æ®</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åˆ é™¤ db.json æˆ–æ¢å¤å¤‡ä»½</span>
<span class="hljs-built_in">rm</span> db.json
<span class="hljs-built_in">cp</span> db.json.backup db.json
</code></pre>
<h3 data-id="heading-49">æœ€ä½³å®è·µ</h3>
<h4 data-id="heading-50">1. ç‰ˆæœ¬æ§åˆ¶</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ·»åŠ åˆ° .gitignore</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"db.json"</span> &gt;&gt; .gitignore

<span class="hljs-comment"># åˆ›å»ºç¤ºä¾‹æ•°æ®æ–‡ä»¶</span>
<span class="hljs-built_in">cp</span> db.json db.example.json
</code></pre>
<h4 data-id="heading-51">2. ç¯å¢ƒé…ç½®</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// config.js</span>
<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">port</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">JSON_SERVER_PORT</span> || <span class="hljs-number">3000</span>,
  <span class="hljs-attr">host</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">JSON_SERVER_HOST</span> || <span class="hljs-string">'localhost'</span>,
  <span class="hljs-attr">watch</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">NODE_ENV</span> !== <span class="hljs-string">'production'</span>
}
</code></pre>
<h4 data-id="heading-52">3. æ•°æ®éªŒè¯</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// middleware.js</span>
<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = <span class="hljs-function">(<span class="hljs-params">req, res, next</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (req.<span class="hljs-property">method</span> === <span class="hljs-string">'POST'</span> || req.<span class="hljs-property">method</span> === <span class="hljs-string">'PUT'</span>) {
    <span class="hljs-keyword">const</span> body = req.<span class="hljs-property">body</span>
    
    <span class="hljs-comment">// éªŒè¯å¿…å¡«å­—æ®µ</span>
    <span class="hljs-keyword">if</span> (!body.<span class="hljs-property">title</span>) {
      <span class="hljs-keyword">return</span> res.<span class="hljs-title function_">status</span>(<span class="hljs-number">400</span>).<span class="hljs-title function_">json</span>({ <span class="hljs-attr">error</span>: <span class="hljs-string">'Title is required'</span> })
    }
  }
  <span class="hljs-title function_">next</span>()
}
</code></pre>
<h4 data-id="heading-53">4. æ€§èƒ½ä¼˜åŒ–</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ä½¿ç”¨é™æ€æ–‡ä»¶æœåŠ¡</span>
json-server db.json --static ./public

<span class="hljs-comment"># ç¦ç”¨æ—¥å¿—ï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰</span>
json-server db.json --quiet
</code></pre>
<h3 data-id="heading-54">æ€»ç»“</h3>
<p>json-server æ˜¯ä¸€ä¸ªå¼ºå¤§ä¸”æ˜“äºä½¿ç”¨çš„å·¥å…·ï¼Œé€‚åˆï¼š</p>
<ul>
<li>âœ… å‰ç«¯å¼€å‘å’ŒåŸå‹è®¾è®¡</li>
<li>âœ… API æµ‹è¯•å’Œè°ƒè¯•</li>
<li>âœ… å¿«é€Ÿæ­å»ºæ¼”ç¤ºé¡¹ç›®</li>
<li>âœ… å­¦ä¹  REST API æ¦‚å¿µ</li>
</ul>
<p>é€šè¿‡æœ¬æ•™ç¨‹ï¼Œä½ åº”è¯¥èƒ½å¤Ÿï¼š</p>
<ul>
<li>å®‰è£…å’Œå¯åŠ¨ json-server</li>
<li>æ‰§è¡Œ CRUD æ“ä½œ</li>
<li>ä½¿ç”¨é«˜çº§æŸ¥è¯¢åŠŸèƒ½</li>
<li>è‡ªå®šä¹‰è·¯ç”±å’Œä¸­é—´ä»¶</li>
<li>ä¸å‰ç«¯æ¡†æ¶é›†æˆ</li>
</ul>
<p>å¼€å§‹ä½¿ç”¨ json-serverï¼Œå¿«é€Ÿæ„å»ºä½ çš„ REST API å§ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[VS Code ç»ˆç«¯å´©æºƒé—®é¢˜åˆ†æä¸è§£å†³æ–¹æ¡ˆ]]></title>    <link>https://juejin.cn/post/7590020026395574326</link>    <guid>https://juejin.cn/post/7590020026395574326</guid>    <pubDate>2026-01-03T02:35:40.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7590020026395574326" data-draft-id="7589919989039480895" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="VS Code ç»ˆç«¯å´©æºƒé—®é¢˜åˆ†æä¸è§£å†³æ–¹æ¡ˆ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-03T02:35:40.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‡¯å“¥1970"/> <meta itemprop="url" content="https://juejin.cn/user/3954283342211335"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            VS Code ç»ˆç«¯å´©æºƒé—®é¢˜åˆ†æä¸è§£å†³æ–¹æ¡ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3954283342211335/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‡¯å“¥1970
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-03T02:35:40.000Z" title="Sat Jan 03 2026 02:35:40 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">VS Code ç»ˆç«¯å´©æºƒé—®é¢˜åˆ†æä¸è§£å†³æ–¹æ¡ˆ</h2>
<h3 data-id="heading-1">é”™è¯¯ä»£ç ï¼š<code>-2147023895 (0x800703E9)</code></h3>
<p>æ˜¾ç¤ºå¦‚ä¸‹</p>
<pre><code class="hljs language-shell" lang="shell">ç»ˆç«¯è¿›ç¨‹â€œC:\WINDOWS\System32\WindowsPowerShell\v1.0\powershell.exeâ€å·²ç»ˆæ­¢ï¼Œé€€å‡ºä»£ç : -2147023895ã€‚
</code></pre>
<h4 data-id="heading-2">é—®é¢˜æè¿°</h4>
<p>åœ¨ VS Code ä¸­æ‰“å¼€ç»ˆç«¯æ—¶ï¼ŒPowerShell è¿›ç¨‹å¼‚å¸¸é€€å‡ºï¼Œè¿”å›é”™è¯¯ä»£ç Â <code>-2147023895</code>ã€‚è¯¥é”™è¯¯ä¼šå¯¼è‡´ç»ˆç«¯æ— æ³•æ­£å¸¸å¯åŠ¨æˆ–ä½¿ç”¨ï¼Œå½±å“å¼€å‘æ•ˆç‡ã€‚</p>
<hr/>
<h4 data-id="heading-3">é”™è¯¯åŸå› åˆ†æ</h4>
<p>é”™è¯¯ä»£ç Â <code>-2147023895</code>Â å¯¹åº”åå…­è¿›åˆ¶å€¼Â <code>0x800703E9</code>ï¼Œæ˜¯ä¸€ä¸ªæ ‡å‡†çš„Â <strong>HRESULT é”™è¯¯ç </strong>ï¼Œå…¶ç»“æ„è§£æå¦‚ä¸‹ï¼š</p>
<ul>
<li><strong>ä¸¥é‡æ€§ä½ï¼ˆBit 31ï¼‰</strong> ï¼š1ï¼Œè¡¨ç¤ºå¤±è´¥ã€‚</li>
<li><strong>è®¾å¤‡ä»£ç ï¼ˆBits 16-26ï¼‰</strong> ï¼š7ï¼ˆ<code>FACILITY_WIN32</code>ï¼‰ï¼Œè¡¨ç¤ºé”™è¯¯æºè‡ª Windows API è°ƒç”¨ã€‚</li>
<li><strong>ä½ä½ä»£ç ï¼ˆBits 0-15ï¼‰</strong> ï¼š<code>0x03E9</code>ï¼ˆåè¿›åˆ¶ 1001ï¼‰ã€‚</li>
</ul>
<h5 data-id="heading-4">å¯èƒ½çš„åŸå› ï¼š</h5>
<ol>
<li><strong>æ ˆæº¢å‡ºï¼ˆStack Overflowï¼‰</strong><br/>
PowerShell å¯åŠ¨æ—¶è„šæœ¬é™·å…¥æ— é™é€’å½’ï¼Œè€—å°½çº¿ç¨‹æ ˆç©ºé—´ï¼Œè§¦å‘ç³»ç»Ÿå¼‚å¸¸ã€‚</li>
<li><strong>æ–‡ä»¶å®Œæ•´æ€§æ ¡éªŒå¤±è´¥ï¼ˆInvalid Image Hashï¼‰</strong><br/>
Windows ä»£ç å®Œæ•´æ€§æœºåˆ¶æˆ–å®‰å…¨è½¯ä»¶ï¼ˆå¦‚ AppLockerï¼‰æ£€æµ‹åˆ°è„šæœ¬æ–‡ä»¶ç­¾åæ— æ•ˆã€æ–‡ä»¶æŸåæˆ–å“ˆå¸Œä¸åŒ¹é…ï¼Œå¯¼è‡´åŠ è½½è¢«æ‹’ç»ã€‚</li>
<li><strong>ç¯å¢ƒå˜é‡å†²çª</strong><br/>
è„šæœ¬æ‰§è¡Œè¿‡ç¨‹ä¸­å±•å¼€çš„ç¯å¢ƒå˜é‡ï¼ˆå¦‚Â <code>PATH</code>ï¼‰è¿‡é•¿ï¼Œå¼•å‘å†…å­˜æˆ–æ ˆæº¢å‡ºã€‚</li>
</ol>
<h4 data-id="heading-5">æ ¹æœ¬åŸå› å®šä½</h4>
<p>å¤šæ•°æƒ…å†µä¸‹ï¼Œè¯¥é”™è¯¯ä¸Â <strong>VS Code ç»ˆç«¯ Shell é›†æˆè„šæœ¬</strong>Â <code>shellIntegration.ps1</code>Â æœ‰å…³ã€‚è¯¥è„šæœ¬åœ¨ç»ˆç«¯å¯åŠ¨æ—¶è¢«è‡ªåŠ¨åŠ è½½ï¼Œè‹¥æ–‡ä»¶æŸåæˆ–ä¸ç”¨æˆ·é…ç½®å†²çªï¼Œå³ä¼šè§¦å‘ä¸Šè¿°é”™è¯¯ã€‚</p>
<hr/>
<h4 data-id="heading-6">è§£å†³æ–¹æ¡ˆï¼šæ‰‹åŠ¨æ›¿æ¢è„šæœ¬æ–‡ä»¶ï¼ˆæ²»æœ¬ï¼‰</h4>
<p>æ— éœ€ç¦ç”¨ç»ˆç«¯åŠŸèƒ½ï¼Œç›´æ¥æ›¿æ¢æŸåçš„è„šæœ¬æ–‡ä»¶å³å¯æ ¹æ²»é—®é¢˜ã€‚</p>
<h5 data-id="heading-7">æ“ä½œæ­¥éª¤ï¼š</h5>
<ol>
<li>
<p><strong>å®šä½è„šæœ¬æ–‡ä»¶</strong><br/>
æ ¹æ® VS Code å®‰è£…æ–¹å¼ï¼Œæ‰¾åˆ°ç›®æ ‡ç›®å½•ï¼š</p>
<ul>
<li><strong>ç”¨æˆ·å®‰è£…</strong>ï¼š<br/>
<code>%LOCALAPPDATA%\Programs&lt;EditorName&gt;\resources\app\out\vs\workbench\contrib\terminal\common\scripts</code></li>
<li><strong>ç³»ç»Ÿå®‰è£…</strong>ï¼š<br/>
<code>C:\Program Files\Microsoft VS Code\resources\app\out\vs\workbench\contrib\terminal\common\scripts</code></li>
</ul>
</li>
<li>
<p><strong>å¤‡ä»½åŸæ–‡ä»¶</strong><br/>
å°†ç›®å½•ä¸­çš„Â <code>shellIntegration.ps1</code>Â é‡å‘½åä¸ºÂ <code>shellIntegration.ps1.bak</code>ï¼Œä½œä¸ºå¤‡ä»½ã€‚</p>
</li>
<li>
<p><strong>ä¸‹è½½å®˜æ–¹è„šæœ¬</strong><br/>
è®¿é—® VS Code å®˜æ–¹ GitHub ä»“åº“ï¼Œä¸‹è½½æœ€æ–°ç‰ˆæœ¬çš„è„šæœ¬æ–‡ä»¶ï¼š<br/>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fraw.githubusercontent.com%2Fmicrosoft%2Fvscode%2Fmain%2Fsrc%2Fvs%2Fworkbench%2Fcontrib%255Cterminal%255Ccommon%255Cscripts%255CshellIntegration.ps1" target="_blank" title="https://raw.githubusercontent.com/microsoft/vscode/main/src/vs/workbench/contrib%5Cterminal%5Ccommon%5Cscripts%5CshellIntegration.ps1" ref="nofollow noopener noreferrer">raw.githubusercontent.com/microsoft/vâ€¦</a></p>
</li>
<li>
<p><strong>æ›¿æ¢æ–‡ä»¶</strong><br/>
å°†ä¸‹è½½çš„Â <code>shellIntegration.ps1</code>Â å¤åˆ¶åˆ°æ­¥éª¤ 1 çš„ç›®å½•ä¸­ï¼Œç¡®ä¿å½“å‰ç”¨æˆ·æœ‰è¯»å–æƒé™ã€‚</p>
</li>
<li>
<p><strong>é‡å¯éªŒè¯</strong><br/>
å®Œå…¨å…³é—­ VS Codeï¼ˆåŒ…æ‹¬åå°è¿›ç¨‹ï¼‰ï¼Œé‡æ–°å¯åŠ¨å¹¶æ‰“å¼€ç»ˆç«¯ï¼Œæ£€æŸ¥æ˜¯å¦æ¢å¤æ­£å¸¸ã€‚</p>
</li>
</ol>
<hr/>
<h4 data-id="heading-8">æ–¹æ¡ˆåŸç†</h4>
<p>é€šè¿‡æ›¿æ¢ä¸ºå®˜æ–¹å®Œå¥½çš„è„šæœ¬æ–‡ä»¶ï¼Œç¡®ä¿ï¼š</p>
<ul>
<li>PowerShell è§£æå™¨èƒ½æ­£å¸¸è§£æè¯­æ³•ï¼Œé¿å…å› æ–‡ä»¶æŸåå¯¼è‡´çš„å´©æºƒã€‚</li>
<li>è„šæœ¬ä¸ç”¨æˆ·ç¯å¢ƒå…¼å®¹ï¼Œé¿å…é€’å½’å†²çªæˆ–å®‰å…¨æ ¡éªŒå¤±è´¥ã€‚</li>
<li>ä¿ç•™å®Œæ•´çš„ç»ˆç«¯ Shell é›†æˆåŠŸèƒ½ï¼ˆå¦‚å‘½ä»¤è£…é¥°ã€çŠ¶æ€æç¤ºç­‰ï¼‰ã€‚</li>
</ul>
<hr/>
<h4 data-id="heading-9">æ³¨æ„äº‹é¡¹</h4>
<ul>
<li>è‹¥é—®é¢˜ä»ç„¶å­˜åœ¨ï¼Œå¯æ£€æŸ¥ç”¨æˆ· PowerShell é…ç½®æ–‡ä»¶ï¼ˆ<code>$PROFILE</code>ï¼‰ä¸­æ˜¯å¦å­˜åœ¨ä¸ Shell é›†æˆå†²çªçš„è‡ªå®šä¹‰ä»£ç ã€‚</li>
<li>å»ºè®®å®šæœŸæ›´æ–° VS Codeï¼Œä»¥è·å–å®˜æ–¹ä¿®å¤çš„è„šæœ¬ç‰ˆæœ¬ã€‚</li>
</ul>
<hr/>
<p>é€šè¿‡ä»¥ä¸Šæ­¥éª¤ï¼Œå¯ä»æ ¹æœ¬ä¸Šè§£å†³ç»ˆç«¯å´©æºƒé—®é¢˜ï¼Œæ— éœ€ä¸´æ—¶ç¦ç”¨åŠŸèƒ½æˆ–ä¿®æ”¹å¯åŠ¨å‘½ä»¤ï¼Œç¡®ä¿å¼€å‘ç¯å¢ƒç¨³å®šå¯ç”¨ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Kotlin extensionsæ˜¯ä»€ä¹ˆï¼Ÿ]]></title>    <link>https://juejin.cn/post/7590503651141419034</link>    <guid>https://juejin.cn/post/7590503651141419034</guid>    <pubDate>2026-01-03T02:24:20.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7590503651141419034" data-draft-id="7590292138346610698" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Kotlin extensionsæ˜¯ä»€ä¹ˆï¼Ÿ"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-03T02:24:20.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Poorguy9527"/> <meta itemprop="url" content="https://juejin.cn/user/1746465251931063"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Kotlin extensionsæ˜¯ä»€ä¹ˆï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1746465251931063/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Poorguy9527
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-03T02:24:20.000Z" title="Sat Jan 03 2026 02:24:20 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æ‰©å±•æ˜¯æ€ä¹ˆåšåˆ°çš„</p>
</blockquote>
<p>Kotlinæ‰©å±•ï¼ˆExtensionsï¼‰çš„å®ç°åŸç†ä¸»è¦åŸºäº<strong>ç¼–è¯‘æ—¶çš„é™æ€åˆ†æ´¾</strong>å’Œ<strong>è¯­æ³•ç³–</strong>ã€‚</p>
<blockquote>
<p>ä»ç¼–è¯‘åçš„å­—èŠ‚ç å±‚é¢çœ‹</p>
</blockquote>
<p>æ‰©å±•å‡½æ•°è¢«ç¼–è¯‘ä¸ºï¼š</p>
<ul>
<li>é™æ€æ–¹æ³•ï¼ˆstatic methodï¼‰</li>
<li>ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æ¥æ”¶è€…ç±»å‹ï¼ˆreceiver typeï¼‰</li>
<li>æ–¹æ³•ååŒ…å«æ¥æ”¶è€…ç±»å‹ä¿¡æ¯ï¼ˆé¿å…å†²çªï¼‰</li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// Kotlinä»£ç </span>
fun <span class="hljs-title class_">String</span>.<span class="hljs-title function_">addExclamation</span>(): <span class="hljs-title class_">String</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-string">"$this!"</span>
}

<span class="hljs-comment">// ç¼–è¯‘åç­‰ä»·äºJava</span>
public <span class="hljs-keyword">static</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">addExclamation</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> receiver</span>) {
    <span class="hljs-keyword">return</span> receiver + <span class="hljs-string">"!"</span>;
}


<span class="hljs-comment">// åç¼–è¯‘åçš„Javaä»£ç ç¤ºä¾‹</span>
public final <span class="hljs-keyword">class</span> <span class="hljs-title class_">StringExtensionsKt</span> {
    public <span class="hljs-keyword">static</span> final <span class="hljs-title class_">String</span> <span class="hljs-title function_">addExclamation</span>(<span class="hljs-params">@NotNull <span class="hljs-built_in">String</span> $this$addExclamation</span>) {
        <span class="hljs-comment">// æ–¹æ³•ä½“</span>
    }
}
</code></pre>
<h3 data-id="heading-0">Â é™åˆ¶å’Œæ³¨æ„äº‹é¡¹</h3>
<ol>
<li><strong>æ²¡æœ‰å¤šæ€æ€§</strong>ï¼šæ‰©å±•æ˜¯é™æ€åˆ†æ´¾çš„</li>
<li><strong>ä¸èƒ½è¦†ç›–æˆå‘˜</strong>ï¼šæ‰©å±•å‡½æ•°ä¸ä¼šè¦†ç›–ç±»çš„æˆå‘˜å‡½æ•°</li>
<li><strong>ä½œç”¨åŸŸé™åˆ¶</strong>ï¼šéœ€è¦å¯¼å…¥æ‰èƒ½ä½¿ç”¨</li>
<li><strong>ä¼˜å…ˆçº§</strong>ï¼šæˆå‘˜å‡½æ•°ä¼˜å…ˆäºæ‰©å±•å‡½æ•°</li>
</ol>
<h3 data-id="heading-1">Kotlinæ‰©å±•çš„æœ¬è´¨æ˜¯ï¼š</h3>
<ul>
<li><strong>è¯­æ³•ç³–</strong>ï¼šæä¾›æ›´å¥½çš„APIè®¾è®¡ä½“éªŒ</li>
<li><strong>é™æ€åˆ†æ´¾</strong>ï¼šç¼–è¯‘æ—¶ç¡®å®šè°ƒç”¨çš„æ–¹æ³•</li>
<li><strong>æ— ä¾µå…¥</strong>ï¼šä¸ä¿®æ”¹åŸæœ‰ç±»çš„å­—èŠ‚ç </li>
<li><strong>ç±»å‹å®‰å…¨</strong>ï¼šç¼–è¯‘å™¨è¿›è¡Œå®Œæ•´çš„ç±»å‹æ£€æŸ¥</li>
</ul>
<p>è¿™ç§è®¾è®¡ä½¿å¾—Kotlinèƒ½å¤Ÿåœ¨ä¸ç ´åç°æœ‰Javaå…¼å®¹æ€§çš„å‰æä¸‹ï¼Œæä¾›çµæ´»çš„APIæ‰©å±•èƒ½åŠ›ã€‚</p>
<h2 data-id="heading-2">ä¸åŒç±»å‹æ‰©å±•å®ç°</h2>
<h4 data-id="heading-3">é¡¶å±‚æ‰©å±•</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// æ–‡ä»¶: StringExtensions.kt</span>
package com.<span class="hljs-property">example</span>

fun <span class="hljs-title class_">String</span>.<span class="hljs-title function_">customExtension</span>(<span class="hljs-params"/>) { ... }

<span class="hljs-comment">// ä½¿ç”¨ï¼šè‡ªåŠ¨å¯¼å…¥</span>
<span class="hljs-string">"hello"</span>.<span class="hljs-title function_">customExtension</span>()
</code></pre>
<h4 data-id="heading-4">æˆå‘˜æ‰©å±•</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Host</span> {
    <span class="hljs-comment">// æ‰©å±•çš„æ¥æ”¶è€…æ˜¯Stringï¼Œä½†å£°æ˜åœ¨Hostå†…éƒ¨</span>
    fun <span class="hljs-title class_">String</span>.<span class="hljs-title function_">doSomething</span>(<span class="hljs-params"/>) {
        <span class="hljs-comment">// å¯ä»¥è®¿é—®Hostçš„æˆå‘˜</span>
    }
}
</code></pre>
<h4 data-id="heading-5">æ‰©å±•ä¼´éšå¯¹è±¡</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyClass</span> {
    companion object
}

fun <span class="hljs-title class_">MyClass</span>.<span class="hljs-property">Companion</span>.<span class="hljs-title function_">extension</span>(<span class="hljs-params"/>) { ... }
</code></pre>
<h2 data-id="heading-6">ç‰¹æ®Šæƒ…å†µçš„å¤„ç†</h2>
<h4 data-id="heading-7">æ‰©å±•ä¸ç»§æ‰¿</h4>
<pre><code class="hljs language-js" lang="js">open <span class="hljs-keyword">class</span> <span class="hljs-title class_">Animal</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Dog</span> : <span class="hljs-title class_">Animal</span>()

fun <span class="hljs-title class_">Animal</span>.<span class="hljs-title function_">speak</span>() = <span class="hljs-string">"Animal sound"</span>
fun <span class="hljs-title class_">Dog</span>.<span class="hljs-title function_">speak</span>() = <span class="hljs-string">"Bark"</span>

val <span class="hljs-attr">animal</span>: <span class="hljs-title class_">Animal</span> = <span class="hljs-title class_">Dog</span>()
<span class="hljs-title function_">println</span>(animal.<span class="hljs-title function_">speak</span>()) <span class="hljs-comment">// "Animal sound" (é™æ€åˆ†æ´¾)</span>
</code></pre>
<h4 data-id="heading-8">å¯ç©ºæ¥æ”¶è€…</h4>
<pre><code class="hljs language-js" lang="js">fun <span class="hljs-title class_">String</span>?.<span class="hljs-title function_">safeLength</span>(): <span class="hljs-title class_">Int</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>?.<span class="hljs-property">length</span> ?: <span class="hljs-number">0</span>
}

<span class="hljs-comment">// ç¼–è¯‘ä¸ºå¤„ç†nullçš„é™æ€æ–¹æ³•</span>

</code></pre>
<h4 data-id="heading-9">æ³›å‹æ‰©å±•</h4>
<pre><code class="hljs language-js" lang="js">fun &lt;T&gt; <span class="hljs-title class_">List</span>&lt;T&gt;.<span class="hljs-title function_">customFilter</span>(): <span class="hljs-title class_">List</span>&lt;T&gt; { ... }

<span class="hljs-comment">// ç¼–è¯‘æ—¶è¿›è¡Œç±»å‹æ“¦é™¤ï¼Œä½†ä¿ç•™ç±»å‹å®‰å…¨æ£€æŸ¥</span>
</code></pre>
<h2 data-id="heading-10">æ‰©å±•å±æ€§èƒŒåçš„æœºåˆ¶</h2>
<p>æ‰©å±•å±æ€§<strong>æ²¡æœ‰å¹•åå­—æ®µ</strong>ï¼ˆbacking fieldï¼‰ï¼Œå¿…é¡»æä¾›getterï¼ˆå’Œsetterï¼‰ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">var</span> <span class="hljs-title class_">StringBuilder</span>.<span class="hljs-property">lastChar</span>: <span class="hljs-title class_">Char</span>
    <span class="hljs-title function_">get</span>() = <span class="hljs-title function_">get</span>(length - <span class="hljs-number">1</span>)
    <span class="hljs-title function_">set</span>(value) = <span class="hljs-title function_">setCharAt</span>(length - <span class="hljs-number">1</span>, value)

<span class="hljs-comment">// ç¼–è¯‘ä¸ºä¸¤ä¸ªé™æ€æ–¹æ³•ï¼š</span>
<span class="hljs-comment">// getLastChar(StringBuilder)</span>
<span class="hljs-comment">// setLastChar(StringBuilder, Char)</span>
</code></pre>
<h2 data-id="heading-11">ä¸Javaçš„äº’æ“ä½œæ€§</h2>
<h4 data-id="heading-12">ä»Javaè°ƒç”¨Kotlinæ‰©å±•</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// Kotlinæ‰©å±•</span>
fun <span class="hljs-title class_">String</span>.<span class="hljs-title function_">kotlinExtension</span>(): <span class="hljs-title class_">String</span> { ... }

<span class="hljs-comment">// Javaä¸­è°ƒç”¨</span>
<span class="hljs-title class_">String</span> result = <span class="hljs-title class_">ExtensionKt</span>.<span class="hljs-title function_">kotlinExtension</span>(<span class="hljs-string">"hello"</span>);
</code></pre>
<h4 data-id="heading-13">æ‰©å±•çš„JVMæ³¨è§£</h4>
<p>ç¼–è¯‘å™¨å¯ä»¥æ·»åŠ <code>@JvmName</code>æ¥ä¿®æ”¹ç”Ÿæˆçš„Javaæ–¹æ³•åï¼š</p>
<pre><code class="hljs language-js" lang="js">@<span class="hljs-title class_">JvmName</span>(<span class="hljs-string">"addPrefix"</span>)
fun <span class="hljs-title class_">String</span>.<span class="hljs-title function_">prefix</span>() = <span class="hljs-string">"prefix_$this"</span>
</code></pre>
<h2 data-id="heading-14">å®é™…åº”ç”¨ç¤ºä¾‹</h2>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// å®é™…ç¼–è¯‘ç¤ºä¾‹</span>
fun <span class="hljs-title class_">String</span>.<span class="hljs-title function_">repeat</span>(<span class="hljs-attr">n</span>: <span class="hljs-title class_">Int</span>): <span class="hljs-title class_">String</span> {
    val builder = <span class="hljs-title class_">StringBuilder</span>()
    <span class="hljs-title function_">repeat</span>(<span class="hljs-params">n</span>) { builder.<span class="hljs-title function_">append</span>(<span class="hljs-variable language_">this</span>) }
    <span class="hljs-keyword">return</span> builder.<span class="hljs-title function_">toString</span>()
}

<span class="hljs-comment">// ç¼–è¯‘ä¸ºï¼š</span>
public <span class="hljs-keyword">static</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">repeat</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> receiver, int n</span>) {
    <span class="hljs-title class_">StringBuilder</span> builder = <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuilder</span>();
    <span class="hljs-keyword">for</span> (int i = <span class="hljs-number">0</span>; i &lt; n; i++) {
        builder.<span class="hljs-title function_">append</span>(receiver);
    }
    <span class="hljs-keyword">return</span> builder.<span class="hljs-title function_">toString</span>();
}
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸€æ¬¡å¿…ç°ANRé—®é¢˜çš„æ·±åº¦åˆ†æä¸è§£å†³ä¹‹æ—…:å½“NestedScrollViewé‡ä¸ŠVelocityTracker]]></title>    <link>https://juejin.cn/post/7590128405351432192</link>    <guid>https://juejin.cn/post/7590128405351432192</guid>    <pubDate>2026-01-03T02:34:49.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7590128405351432192" data-draft-id="7590128405351415808" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸€æ¬¡å¿…ç°ANRé—®é¢˜çš„æ·±åº¦åˆ†æä¸è§£å†³ä¹‹æ—…:å½“NestedScrollViewé‡ä¸ŠVelocityTracker"/> <meta itemprop="keywords" content="Android,Debug,æ€§èƒ½ä¼˜åŒ–"/> <meta itemprop="datePublished" content="2026-01-03T02:34:49.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å†¬å¥‡Lab"/> <meta itemprop="url" content="https://juejin.cn/user/1857501105781193"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸€æ¬¡å¿…ç°ANRé—®é¢˜çš„æ·±åº¦åˆ†æä¸è§£å†³ä¹‹æ—…:å½“NestedScrollViewé‡ä¸ŠVelocityTracker
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1857501105781193/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å†¬å¥‡Lab
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-03T02:34:49.000Z" title="Sat Jan 03 2026 02:34:49 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»13åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸‹ç­å‰æ€»ä¼šæœ‰é—®é¢˜åœ¨ç­‰ä½ </h2>
<p>å‘¨äº”ä¸‹åˆå¿«ä¸‹ç­äº†,æµ‹è¯•åŒå­¦çªç„¶æ‰¾è¿‡æ¥:"è¿™ä¸ªé¡µé¢æ¯æ¬¡ç‚¹å‡»éƒ½ä¼šå¡æ­»,å¿…ç°çš„!"ä½ å¿ƒæƒ³,"å¿…ç°?é‚£è¿˜ä¸ç®€å•,åˆ†åˆ†é’Ÿæå®šã€‚"ç»“æœæ‹¿åˆ°æ—¥å¿—ä¸€çœ‹,å¥½å®¶ä¼™,<strong>ä¸€å°æ—¶å†…è¿ç»­å‘ç”Ÿäº†7æ¬¡ANR</strong>,ä¸»çº¿ç¨‹å±…ç„¶åœ¨CPUä¸Šæ‰§è¡Œäº†è¶…è¿‡7ç§’çš„è®¡ç®—ä»»åŠ¡!</p>
<p>è¿™ä¸æ˜¯æ®µå­,è¿™æ˜¯æˆ‘æœ€è¿‘é‡åˆ°çš„ä¸€ä¸ªçœŸå®æ¡ˆä¾‹ã€‚ä»Šå¤©å°±å’Œå¤§å®¶åˆ†äº«è¿™æ¬¡"æƒŠå¿ƒåŠ¨é­„"çš„ANRæ’æŸ¥ä¹‹æ—…â€”â€”ä»å‘ç°é—®é¢˜åˆ°æ·±åº¦åˆ†æ,å†åˆ°æä¾›å¤šå¥—è§£å†³æ–¹æ¡ˆçš„å®Œæ•´è¿‡ç¨‹ã€‚</p>
<h2 data-id="heading-1">è¿‡ç¨‹é€Ÿè§ˆ</h2>
<ul>
<li><strong>é—®é¢˜</strong>: è½¦è½½è®¾ç½®åº”ç”¨ä¸­,ç‚¹å‡»æ—¥é—´è¡Œè½¦ç¯è®¾ç½®æ—¶å¿…ç°ANR,ä¸»çº¿ç¨‹é˜»å¡è¶…è¿‡7ç§’</li>
<li><strong>æ ¹å› </strong>: <code>NestedScrollView</code> è§¦æ‘¸äº‹ä»¶å¤„ç†æ—¶,<code>VelocityTracker</code> çš„é€Ÿåº¦è®¡ç®—(æœ€å°äºŒä¹˜æ³•)è€—æ—¶å¼‚å¸¸</li>
<li><strong>å½±å“</strong>: P0çº§ä¸¥é‡é—®é¢˜,å¿…ç°,å½±å“ç”¨æˆ·ä½“éªŒ</li>
<li><strong>è§£å†³</strong>: æä¾›4ä¸ªå±‚çº§çš„è§£å†³æ–¹æ¡ˆ,ä»å¿«é€Ÿä¿®å¤åˆ°æ¶æ„ä¼˜åŒ–</li>
<li><strong>æ”¶è·</strong>: æ·±å…¥ç†è§£Androidè§¦æ‘¸äº‹ä»¶å¤„ç†æœºåˆ¶,æŒæ¡ANRæ’æŸ¥æ–¹æ³•è®º</li>
</ul>
<h2 data-id="heading-2">é—®é¢˜ç°åœºè¿˜åŸ</h2>
<h3 data-id="heading-3">æ¡ˆå‘ç°åœº</h3>
<p><strong>æ—¶é—´</strong>: 2025å¹´12æœˆ23æ—¥ 15:25-16:13<br/>
<strong>åœ°ç‚¹</strong>: è½¦è½½è®¾ç½®åº”ç”¨ â†’ è½¦ç¯ â†’ ç¯å¢ƒç¯ â†’ æ—¥é—´è¡Œè½¦ç¯è®¾ç½®<br/>
<strong>æ¡ˆæƒ…</strong>: æ¯æ¬¡ç‚¹å‡»æ—¥é—´è¡Œè½¦ç¯ä¸‹æ–¹çš„æ–‡å­—,åº”ç”¨ç«‹å³å¡æ­»å¹¶é—ªé€€</p>
<p><strong>å…³é”®è¯æ®</strong> (æ¥è‡ªANR traceæ–‡ä»¶):</p>
<pre><code class="hljs language-ini" lang="ini">Subject: Input dispatching timed out
(SMART_POPUP_INTERRUPT_PERM is not responding.
Waited 5000ms for MotionEvent(<span class="hljs-attr">action</span>=UP))

ä¸»çº¿ç¨‹çŠ¶æ€:
- <span class="hljs-attr">state</span>=Native (æ­£åœ¨æ‰§è¡Œnativeä»£ç )
- CPU <span class="hljs-attr">time</span>=<span class="hljs-number">7538472365</span>çº³ç§’ â‰ˆ <span class="hljs-number">7.5</span>ç§’
- ç”¨æˆ·æ€æ—¶é—´:702ä¸ªæ—¶é—´ç‰‡ â‰ˆ 7.02ç§’
</code></pre>
<p>çœ‹åˆ°è¿™é‡Œæˆ‘å°±çº³é—·äº†:ä¸€ä¸ªç®€å•çš„è§¦æ‘¸äº‹ä»¶,å‡­ä»€ä¹ˆè¦æ¶ˆè€—7ç§’çš„CPUæ—¶é—´?</p>
<h3 data-id="heading-4">è¿ç»­ä½œæ¡ˆè®°å½•</h3>
<p>æ›´è®©äººæƒŠè®¶çš„æ˜¯,è¿™ä¸æ˜¯å­¤ç«‹äº‹ä»¶ã€‚ä»Critical Event Logä¸­å‘ç°,è¿™ä¸ªANRåœ¨ä¸€å°æ—¶å†…é‡å¤å‡ºç°äº†7æ¬¡:</p>





















































<table><thead><tr><th>æ—¶é—´</th><th>PID</th><th>æ—¶é—´é—´éš”</th><th>çŠ¶æ€</th></tr></thead><tbody><tr><td>15:25:03</td><td>3292</td><td>-</td><td>é¦–æ¬¡å‡ºç°</td></tr><tr><td>15:49:16</td><td>15858</td><td>24åˆ†13ç§’</td><td>åº”ç”¨é‡å¯</td></tr><tr><td>15:49:52</td><td>16887</td><td>36ç§’</td><td>å¿«é€Ÿå¤ç°</td></tr><tr><td>15:52:31</td><td>16887</td><td>2åˆ†39ç§’</td><td>æŒç»­å‡ºç°</td></tr><tr><td><strong>15:53:18</strong></td><td><strong>17362</strong></td><td><strong>47ç§’</strong></td><td><strong>å½“å‰åˆ†æ</strong></td></tr><tr><td>15:54:10</td><td>?</td><td>52ç§’</td><td>å†æ¬¡å¤ç°</td></tr><tr><td>16:13:27</td><td>?</td><td>19åˆ†17ç§’</td><td>ä»åœ¨å‘ç”Ÿ</td></tr></tbody></table>
<p><strong>ç»“è®º</strong>:è¿™æ˜¯ä¸€ä¸ªç¨³å®šå¤ç°çš„ä»£ç çº§Bug,è€Œä¸æ˜¯å¶å‘çš„ç³»ç»Ÿé—®é¢˜æˆ–ç¡¬ä»¶å¼‚å¸¸ã€‚</p>
<h2 data-id="heading-5">æ·±å…¥åˆ†æ:çœŸç›¸åªæœ‰ä¸€ä¸ª</h2>
<h3 data-id="heading-6">è°ƒç”¨æ ˆè¿½è¸ª</h3>
<p>è®©æˆ‘ä»¬çœ‹çœ‹ä¸»çº¿ç¨‹åœ¨å¹²ä»€ä¹ˆ(å…³é”®éƒ¨åˆ†):</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">Native</span>å±‚é˜»å¡ç‚¹:
  <span class="hljs-selector-id">#00</span> <span class="hljs-selector-tag">libinput</span><span class="hljs-selector-class">.so</span>: <span class="hljs-selector-tag">LeastSquaresVelocityTrackerStrategy</span>::<span class="hljs-selector-tag">getEstimator</span>+<span class="hljs-number">299</span>
  <span class="hljs-selector-id">#01</span> <span class="hljs-selector-tag">libinput</span><span class="hljs-selector-class">.so</span>: <span class="hljs-selector-tag">VelocityTracker</span>::<span class="hljs-selector-tag">getVelocity</span>+<span class="hljs-number">65</span>
  <span class="hljs-selector-id">#02</span> <span class="hljs-selector-tag">libandroid_runtime</span><span class="hljs-selector-class">.so</span>: <span class="hljs-selector-tag">android_view_VelocityTracker_nativeComputeCurrentVelocity</span>

<span class="hljs-selector-tag">Java</span>å±‚è°ƒç”¨é“¾:
  <span class="hljs-selector-tag">at</span> <span class="hljs-selector-tag">android</span><span class="hljs-selector-class">.view</span><span class="hljs-selector-class">.VelocityTracker</span><span class="hljs-selector-class">.nativeComputeCurrentVelocity</span>(Native)
  <span class="hljs-selector-tag">at</span> <span class="hljs-selector-tag">android</span><span class="hljs-selector-class">.view</span><span class="hljs-selector-class">.VelocityTracker</span><span class="hljs-selector-class">.computeCurrentVelocity</span>(VelocityTracker.<span class="hljs-attribute">java</span>:<span class="hljs-number">354</span>)
  <span class="hljs-selector-tag">at</span> <span class="hljs-selector-tag">androidx</span><span class="hljs-selector-class">.core</span><span class="hljs-selector-class">.widget</span><span class="hljs-selector-class">.NestedScrollView</span><span class="hljs-selector-class">.onTouchEvent</span>(<span class="hljs-attribute">unavailable</span>:<span class="hljs-number">467</span>)
  <span class="hljs-selector-tag">at</span> <span class="hljs-selector-tag">android</span><span class="hljs-selector-class">.view</span><span class="hljs-selector-class">.View</span><span class="hljs-selector-class">.dispatchTouchEvent</span>(View.<span class="hljs-attribute">java</span>:<span class="hljs-number">15010</span>)
  ...
  <span class="hljs-selector-tag">at</span> <span class="hljs-selector-tag">android</span><span class="hljs-selector-class">.app</span><span class="hljs-selector-class">.Dialog</span><span class="hljs-selector-class">.dispatchTouchEvent</span>(Dialog.<span class="hljs-attribute">java</span>:<span class="hljs-number">911</span>)  â† é—®é¢˜å‘ç”Ÿåœ¨<span class="hljs-selector-tag">Dialog</span>ä¸­
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c5b5278982954dcba4bb7f23672d66d0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yas5aWHTGFi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768012488&amp;x-signature=jvQvQkPhMsz2d8q7tyfZQdmmTHc%3D" alt="case4-anr-touch-event-flow.png" loading="lazy"/></p>
<p><em>å›¾1: ANRè§¦æ‘¸äº‹ä»¶å¤„ç†å®Œæ•´æµç¨‹</em></p>
<h3 data-id="heading-7">ç½ªé­ç¥¸é¦–:VelocityTracker</h3>
<p><strong>ä»€ä¹ˆæ˜¯VelocityTracker?</strong></p>
<p><code>VelocityTracker</code> æ˜¯Androidä¸­ç”¨äºè®¡ç®—è§¦æ‘¸æ»‘åŠ¨é€Ÿåº¦çš„å·¥å…·ç±»ã€‚å½“ä½ åœ¨å±å¹•ä¸Šæ»‘åŠ¨æ—¶,å®ƒä¼šè®°å½•ä½ æ‰‹æŒ‡çš„è½¨è¿¹,ç„¶åç”¨**æœ€å°äºŒä¹˜æ³•(Least Squares)**æ‹Ÿåˆä¸€æ¡æ›²çº¿,è®¡ç®—å‡ºæ»‘åŠ¨é€Ÿåº¦ã€‚è¿™ä¸ªé€Ÿåº¦ç”¨äºå®ç°æƒ¯æ€§æ»šåŠ¨(Fling)æ•ˆæœã€‚</p>
<p><strong>æ­£å¸¸æƒ…å†µ</strong>:è¿™ä¸ªè®¡ç®—åº”è¯¥åœ¨å‡ æ¯«ç§’å†…å®Œæˆã€‚
<strong>æˆ‘ä»¬çš„æƒ…å†µ</strong>:è€—æ—¶è¶…è¿‡7ç§’!</p>
<p><strong>ä¸ºä»€ä¹ˆä¼šè¿™æ ·?</strong></p>
<p>ç»è¿‡åˆ†æ,æœ€å¯èƒ½çš„åŸå› æ˜¯<strong>è§¦æ‘¸æ•°æ®å¼‚å¸¸</strong>:</p>
<ol>
<li>
<p><strong>è§¦æ‘¸ç‚¹ç§¯ç´¯è¿‡å¤š</strong>: <code>VelocityTracker</code> å†…éƒ¨ç»´æŠ¤äº†ä¸€ä¸ªå†å²è§¦æ‘¸ç‚¹é˜Ÿåˆ—ã€‚å¦‚æœè§¦æ‘¸å±é©±åŠ¨äº§ç”Ÿäº†å¼‚å¸¸çš„é«˜é¢‘é‡‡æ ·,é˜Ÿåˆ—ä¸­å¯èƒ½ç§¯ç´¯äº†æˆç™¾ä¸Šåƒä¸ªè§¦æ‘¸ç‚¹ã€‚</p>
</li>
<li>
<p><strong>æœ€å°äºŒä¹˜æ³•çš„å¤æ‚åº¦</strong>: å‡è®¾æœ‰Nä¸ªè§¦æ‘¸ç‚¹,æœ€å°äºŒä¹˜æ³•çš„æ—¶é—´å¤æ‚åº¦å¤§çº¦æ˜¯O(NÂ²)åˆ°O(NÂ³),å½“Nå˜å¾—å¾ˆå¤§æ—¶,è®¡ç®—é‡æš´å¢ã€‚</p>
</li>
<li>
<p><strong>Nativeå±‚æ²¡æœ‰è¶…æ—¶ä¿æŠ¤</strong>: Androidçš„VelocityTrackerå®ç°æ²¡æœ‰è¶…æ—¶æœºåˆ¶,å¦‚æœæ•°æ®å¼‚å¸¸,å®ƒä¼šè€è€å®å®æŠŠæ‰€æœ‰ç‚¹éƒ½ç®—å®Œ,å“ªæ€•è¦ç®—7ç§’ã€‚</p>
</li>
</ol>
<p><strong>æˆ‘è¸©è¿‡çš„å‘</strong>:åˆšå¼€å§‹æˆ‘ä»¥ä¸ºæ˜¯ä¸»çº¿ç¨‹åšäº†è€—æ—¶æ“ä½œ(æ¯”å¦‚ç½‘ç»œè¯·æ±‚æˆ–æ•°æ®åº“æŸ¥è¯¢),ç»“æœå‘ç°æ ¹æœ¬ä¸æ˜¯!è¿™ä¸ªANRå®Œå…¨æ˜¯ç”±ä¸€ä¸ª"åº”è¯¥ç¬é—´å®Œæˆ"çš„é€Ÿåº¦è®¡ç®—å¼•èµ·çš„ã€‚è¿™å‘Šè¯‰æˆ‘ä»¬:æ°¸è¿œä¸è¦å¯¹ç³»ç»ŸAPIçš„æ€§èƒ½åšå‡è®¾ã€‚</p>
<h3 data-id="heading-8">ç•Œé¢ç»“æ„åˆ†æ</h3>
<p>é—®é¢˜å‘ç”Ÿåœ¨è¿™æ ·çš„è§†å›¾å±‚æ¬¡ä¸­:</p>
<pre><code class="hljs language-scss" lang="scss">DecorView
  â””â”€ Dialog (è½¦ç¯ç¯å¢ƒç¯è®¾ç½®å¯¹è¯æ¡†)
      â””â”€ ViewGroup (å¤šå±‚åµŒå¥—)
          â””â”€ NestedScrollView  â† é—®é¢˜å‘ç”Ÿä½ç½®
              â””â”€ <span class="hljs-selector-attr">[æ—¥é—´è¡Œè½¦ç¯è®¾ç½®å†…å®¹]</span>
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆæ˜¯NestedScrollView?</strong></p>
<p><code>NestedScrollView</code> æ˜¯ AndroidX æä¾›çš„å¢å¼ºç‰ˆ <code>ScrollView</code>,æ”¯æŒåµŒå¥—æ»‘åŠ¨(Nested Scrolling)ã€‚ç›¸æ¯”æ™®é€š <code>ScrollView</code>,å®ƒçš„è§¦æ‘¸äº‹ä»¶å¤„ç†æ›´å¤æ‚,æ›´ä¾èµ– <code>VelocityTracker</code> æ¥åè°ƒåµŒå¥—æ»‘åŠ¨ã€‚</p>
<h2 data-id="heading-9">è§£å†³æ–¹æ¡ˆ:å››ä¸ªå±‚çº§çš„æˆ˜æœ¯é€‰æ‹©</h2>
<p>é¢å¯¹è¿™ä¸ªé—®é¢˜,æˆ‘å‡†å¤‡äº†4ä¸ªä¸åŒå±‚çº§çš„è§£å†³æ–¹æ¡ˆ,ä»"å¿«é€Ÿæ­¢è¡€"åˆ°"æ ¹æ²»ç—…ç¶"ã€‚</p>
<h3 data-id="heading-10">æ–¹æ¡ˆ1:ç¦ç”¨é€Ÿåº¦è¿½è¸ª(ç«‹å³ä¿®å¤,5åˆ†é’Ÿæå®š)</h3>
<p><strong>ä¼˜å…ˆçº§</strong>: â­â­â­â­â­
<strong>å®æ–½éš¾åº¦</strong>: â˜…â˜†â˜†â˜†â˜†
<strong>é¢„æœŸæ•ˆæœ</strong>: ç›´æ¥é¿å…VelocityTrackerè®¡ç®—,ç«‹å³è§£å†³ANR</p>
<p><strong>å®æ–½æ­¥éª¤</strong>:</p>
<p>åœ¨å¸ƒå±€æ–‡ä»¶ä¸­:</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">androidx.core.widget.NestedScrollView</span>
    <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/nested_scroll_view"</span>
    <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
    <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"match_parent"</span>
    <span class="hljs-attr">android:nestedScrollingEnabled</span>=<span class="hljs-string">"false"</span>
    <span class="hljs-attr">android:overScrollMode</span>=<span class="hljs-string">"never"</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- å†…å®¹ --&gt;</span>

<span class="hljs-tag">&lt;/<span class="hljs-name">androidx.core.widget.NestedScrollView</span>&gt;</span>
</code></pre>
<p>æˆ–åœ¨ä»£ç ä¸­åŠ¨æ€è®¾ç½®:</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">val</span> nestedScrollView = dialog.findViewById&lt;NestedScrollView&gt;(R.id.nested_scroll_view)
nestedScrollView.isNestedScrollingEnabled = <span class="hljs-literal">false</span>
nestedScrollView.overScrollMode = View.OVER_SCROLL_NEVER

<span class="hljs-comment">// å¦‚æœé—®é¢˜ä¾ç„¶å­˜åœ¨,å®Œå…¨ç¦ç”¨flingè¡Œä¸º</span>
nestedScrollView.setOnTouchListener { _, event -&gt;
    <span class="hljs-keyword">if</span> (event.action == MotionEvent.ACTION_UP) {
        nestedScrollView.fling(<span class="hljs-number">0</span>)  <span class="hljs-comment">// ç¦ç”¨æƒ¯æ€§æ»šåŠ¨</span>
    }
    <span class="hljs-literal">false</span>
}
</code></pre>
<p><strong>æƒè¡¡</strong>:</p>
<ul>
<li>âœ… è¶…å¿«:5åˆ†é’Ÿå†…å®Œæˆå¹¶éªŒè¯</li>
<li>âœ… ä½é£é™©:ä¸å½±å“æ­£å¸¸æ»‘åŠ¨,åªæ˜¯æ²¡æœ‰æƒ¯æ€§æ•ˆæœ</li>
<li>âš ï¸ ç”¨æˆ·ä½“éªŒç•¥æœ‰ä¸‹é™:å¤±å»äº†ä¸æ»‘çš„æƒ¯æ€§æ»šåŠ¨</li>
</ul>
<p><strong>æˆ‘çš„ç»éªŒ</strong>:å¯¹äºç”Ÿäº§ç¯å¢ƒçš„ç´§æ€¥Bug,è¿™æ˜¯æœ€ä½³é€‰æ‹©ã€‚å…ˆæ­¢è¡€,å†ä¼˜åŒ–ã€‚</p>
<h3 data-id="heading-11">æ–¹æ¡ˆ2:æ›¿æ¢ä¸ºScrollView(æ ¹æœ¬è§£å†³,1å°æ—¶é‡æ„)</h3>
<p><strong>ä¼˜å…ˆçº§</strong>: â­â­â­â­
<strong>å®æ–½éš¾åº¦</strong>: â˜…â˜…â˜†â˜†â˜†
<strong>é¢„æœŸæ•ˆæœ</strong>: ä»æ ¹æœ¬ä¸Šé¿å…NestedScrollViewçš„å¤æ‚æ€§</p>
<p>å¦‚æœä½ çš„Dialogå†…å®¹ä¸éœ€è¦åµŒå¥—æ»‘åŠ¨åŠŸèƒ½,ç›´æ¥ç”¨ <code>ScrollView</code> æ›¿ä»£:</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ScrollView</span>
    <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/scroll_view"</span>
    <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
    <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"match_parent"</span>
    <span class="hljs-attr">android:fillViewport</span>=<span class="hljs-string">"true"</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- ä¿æŒåŸæœ‰å†…å®¹ç»“æ„ --&gt;</span>

<span class="hljs-tag">&lt;/<span class="hljs-name">ScrollView</span>&gt;</span>
</code></pre>
<p>ä»£ç è¿ç§»:</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// ScrollView çš„ API ä¸ NestedScrollView é«˜åº¦å…¼å®¹</span>
<span class="hljs-keyword">val</span> scrollView = dialog.findViewById&lt;ScrollView&gt;(R.id.scroll_view)
<span class="hljs-comment">// å¤§éƒ¨åˆ†æƒ…å†µä¸‹ä¸éœ€è¦ä¿®æ”¹å…¶ä»–ä»£ç </span>
</code></pre>
<p><strong>é€‚ç”¨åœºæ™¯</strong>:</p>
<ul>
<li>å†…å®¹è¾ƒç®€å•,ä¸éœ€è¦ä¸å…¶ä»–æ»‘åŠ¨ç»„ä»¶ååŒ</li>
<li>ä¸éœ€è¦ CoordinatorLayout ç­‰é«˜çº§åŠŸèƒ½</li>
</ul>
<p><strong>æƒè¡¡</strong>:</p>
<ul>
<li>âœ… å½»åº•è§£å†³:ä¸å†æœ‰VelocityTrackerçš„æ€§èƒ½éšæ‚£</li>
<li>âœ… æ›´ç®€å•:ScrollView çš„ä»£ç è·¯å¾„æ›´çŸ­,æ›´ç¨³å®š</li>
<li>âš ï¸ éœ€æµ‹è¯•:ç¡®ä¿ä¸å½±å“å…¶ä»–åµŒå¥—æ»‘åŠ¨åŠŸèƒ½</li>
</ul>
<h3 data-id="heading-12">æ–¹æ¡ˆ3:è‡ªå®šä¹‰SafeNestedScrollView(é˜²å¾¡æ€§ç¼–ç¨‹,2å°æ—¶å¼€å‘)</h3>
<p><strong>ä¼˜å…ˆçº§</strong>: â­â­â­
<strong>å®æ–½éš¾åº¦</strong>: â˜…â˜…â˜…â˜†â˜†
<strong>é¢„æœŸæ•ˆæœ</strong>: æ‹¦æˆªå¼‚å¸¸,é˜²æ­¢ANR,å¹¶è®°å½•æ—¥å¿—</p>
<p>åˆ›å»ºä¸€ä¸ªå¸¦ä¿æŠ¤æœºåˆ¶çš„è‡ªå®šä¹‰ <code>NestedScrollView</code>:</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">package</span> com.android.settings.widget

<span class="hljs-keyword">import</span> android.content.Context
<span class="hljs-keyword">import</span> android.util.AttributeSet
<span class="hljs-keyword">import</span> android.util.Log
<span class="hljs-keyword">import</span> android.view.MotionEvent
<span class="hljs-keyword">import</span> androidx.core.widget.NestedScrollView

<span class="hljs-comment">/**
 * å®‰å…¨çš„NestedScrollView,é˜²æ­¢VelocityTrackerè®¡ç®—å¯¼è‡´ANR
 */</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">SafeNestedScrollView</span> <span class="hljs-meta">@JvmOverloads</span> <span class="hljs-keyword">constructor</span>(
    context: Context,
    attrs: AttributeSet? = <span class="hljs-literal">null</span>,
    defStyleAttr: <span class="hljs-built_in">Int</span> = <span class="hljs-number">0</span>
) : NestedScrollView(context, attrs, defStyleAttr) {

    <span class="hljs-keyword">companion</span> <span class="hljs-keyword">object</span> {
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">const</span> <span class="hljs-keyword">val</span> TAG = <span class="hljs-string">"SafeNestedScrollView"</span>
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">const</span> <span class="hljs-keyword">val</span> MAX_TOUCH_EVENTS_PER_100MS = <span class="hljs-number">100</span>  <span class="hljs-comment">// å¼‚å¸¸é˜ˆå€¼</span>
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> lastTouchTime = <span class="hljs-number">0L</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> touchEventCount = <span class="hljs-number">0</span>

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onTouchEvent</span><span class="hljs-params">(ev: <span class="hljs-type">MotionEvent</span>)</span></span>: <span class="hljs-built_in">Boolean</span> {
        <span class="hljs-keyword">when</span> (ev.action) {
            MotionEvent.ACTION_DOWN -&gt; {
                lastTouchTime = System.currentTimeMillis()
                touchEventCount = <span class="hljs-number">0</span>
            }

            MotionEvent.ACTION_MOVE -&gt; {
                touchEventCount++

                <span class="hljs-comment">// æ£€æµ‹å¼‚å¸¸:çŸ­æ—¶é—´å†…å¤§é‡MOVEäº‹ä»¶</span>
                <span class="hljs-keyword">val</span> currentTime = System.currentTimeMillis()
                <span class="hljs-keyword">val</span> duration = currentTime - lastTouchTime

                <span class="hljs-keyword">if</span> (duration <span class="hljs-keyword">in</span> <span class="hljs-number">1.</span><span class="hljs-number">.99</span> &amp;&amp; touchEventCount &gt; MAX_TOUCH_EVENTS_PER_100MS) {
                    Log.w(TAG, <span class="hljs-string">"æ£€æµ‹åˆ°å¼‚å¸¸è§¦æ‘¸äº‹ä»¶æµ: <span class="hljs-variable">$touchEventCount</span> ä¸ªäº‹ä»¶åœ¨ <span class="hljs-subst">${duration}</span>ms å†…"</span>)
                    <span class="hljs-comment">// æ¸…ç†è§¦æ‘¸çŠ¶æ€,é˜²æ­¢VelocityTrackerç§¯ç´¯è¿‡å¤šæ•°æ®</span>
                    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
                }
            }

            MotionEvent.ACTION_UP, MotionEvent.ACTION_CANCEL -&gt; {
                <span class="hljs-keyword">try</span> {
                    <span class="hljs-keyword">return</span> <span class="hljs-keyword">super</span>.onTouchEvent(ev)
                } <span class="hljs-keyword">catch</span> (e: Exception) {
                    Log.e(TAG, <span class="hljs-string">"è§¦æ‘¸äº‹ä»¶å¤„ç†å¼‚å¸¸"</span>, e)
                    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
                }
            }
        }

        <span class="hljs-keyword">return</span> <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">super</span>.onTouchEvent(ev)
        } <span class="hljs-keyword">catch</span> (e: Exception) {
            Log.e(TAG, <span class="hljs-string">"è§¦æ‘¸äº‹ä»¶å¤„ç†å¼‚å¸¸"</span>, e)
            <span class="hljs-literal">true</span>
        }
    }

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">fling</span><span class="hljs-params">(velocityY: <span class="hljs-type">Int</span>)</span></span> {
        <span class="hljs-comment">// é™åˆ¶flingé€Ÿåº¦,é˜²æ­¢è¿‡å¤§å€¼å¯¼è‡´è®¡ç®—é—®é¢˜</span>
        <span class="hljs-keyword">val</span> limitedVelocity = velocityY.coerceIn(-<span class="hljs-number">5000</span>, <span class="hljs-number">5000</span>)
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">super</span>.fling(limitedVelocity)
        } <span class="hljs-keyword">catch</span> (e: Exception) {
            Log.e(TAG, <span class="hljs-string">"Flingæ‰§è¡Œå¼‚å¸¸"</span>, e)
        }
    }
}
</code></pre>
<p>åœ¨å¸ƒå±€ä¸­ä½¿ç”¨:</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">com.android.settings.widget.SafeNestedScrollView</span>
    <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/nested_scroll_view"</span>
    <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
    <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"match_parent"</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- å†…å®¹ --&gt;</span>

<span class="hljs-tag">&lt;/<span class="hljs-name">com.android.settings.widget.SafeNestedScrollView</span>&gt;</span>
</code></pre>
<p><strong>æ ¸å¿ƒæ€æƒ³</strong>:</p>
<ol>
<li><strong>å¼‚å¸¸æ£€æµ‹</strong>: ç›‘æ§è§¦æ‘¸äº‹ä»¶çš„é¢‘ç‡,è¯†åˆ«å¼‚å¸¸æ¨¡å¼</li>
<li><strong>æå‰ä¸­æ–­</strong>: æ£€æµ‹åˆ°å¼‚å¸¸æ—¶ç«‹å³ä¸­æ–­,ä¸è®©é—®é¢˜ä¼ é€’åˆ°VelocityTracker</li>
<li><strong>å¼‚å¸¸æ•è·</strong>: Try-catchåŒ…è£¹å…³é”®è°ƒç”¨,é˜²æ­¢å´©æºƒ</li>
<li><strong>é€Ÿåº¦é™åˆ¶</strong>: é™åˆ¶flingé€Ÿåº¦,é¿å…æç«¯å€¼</li>
<li><strong>æ—¥å¿—è®°å½•</strong>: è®°å½•å¼‚å¸¸æƒ…å†µ,ä¾¿äºåç»­åˆ†æ</li>
</ol>
<p><strong>æƒè¡¡</strong>:</p>
<ul>
<li>âœ… é˜²å¾¡æ€§å¼º:å¤šé‡ä¿æŠ¤æœºåˆ¶</li>
<li>âœ… å¯è§‚æµ‹æ€§:æ—¥å¿—è®°å½•ä¾¿äºæ’æŸ¥</li>
<li>âœ… å‘åå…¼å®¹:ä¸å½±å“æ­£å¸¸ä½¿ç”¨åœºæ™¯</li>
<li>âš ï¸ å¼€å‘æˆæœ¬:éœ€è¦ç¼–å†™å’Œæµ‹è¯•è‡ªå®šä¹‰View</li>
</ul>
<h3 data-id="heading-13">æ–¹æ¡ˆ4:ç³»ç»Ÿå±‚ä¼˜åŒ–(é•¿æœŸæ–¹æ¡ˆ,éœ€è·¨å›¢é˜Ÿåä½œ)</h3>
<p><strong>ä¼˜å…ˆçº§</strong>: â­â­
<strong>å®æ–½éš¾åº¦</strong>: â˜…â˜…â˜…â˜…â˜…
<strong>é€‚ç”¨åœºæ™¯</strong>: å¦‚æœæ˜¯ç³»ç»ŸROMæˆ–ç¡¬ä»¶é—®é¢˜</p>
<p>è¿™ä¸ªæ–¹æ¡ˆéœ€è¦ä¸ç¡¬ä»¶å›¢é˜Ÿå’Œç³»ç»Ÿå›¢é˜Ÿåä½œ:</p>
<ol>
<li>
<p><strong>æ£€æŸ¥è§¦æ‘¸å±é©±åŠ¨</strong>: ç¡®è®¤è§¦æ‘¸äº‹ä»¶çš„é‡‡æ ·ç‡æ˜¯å¦æ­£å¸¸,æ˜¯å¦å­˜åœ¨é©±åŠ¨Bug</p>
</li>
<li>
<p><strong>ä¼˜åŒ–ç³»ç»Ÿåº“</strong>: è€ƒè™‘ä½¿ç”¨GoogleåŸç”Ÿçš„ <code>libinput.so</code>,æˆ–åœ¨x86_64æ¶æ„ä¸Šä¼˜åŒ–æ€§èƒ½</p>
</li>
<li>
<p><strong>æ·»åŠ è¶…æ—¶ä¿æŠ¤</strong>: ä¸ºVelocityTrackerçš„nativeå®ç°æ·»åŠ è¶…æ—¶æœºåˆ¶</p>
</li>
</ol>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ä½¿ç”¨systraceç›‘æ§è§¦æ‘¸äº‹ä»¶</span>
systrace.py -t 10 -o trace.html input view

<span class="hljs-comment"># åˆ†æè§¦æ‘¸äº‹ä»¶çš„é‡‡æ ·é¢‘ç‡å’Œå¤„ç†æ—¶é—´</span>
</code></pre>
<p><strong>è¿™æ˜¯æˆ‘çš„ç»éªŒ</strong>:è¿™ç±»ç³»ç»Ÿçº§é—®é¢˜å¾€å¾€ç‰µæ¶‰å¤šä¸ªå›¢é˜Ÿ,å‘¨æœŸé•¿,ä¸ç¡®å®šæ€§å¤§ã€‚é™¤éä½ æœ‰æ˜ç¡®è¯æ®è¡¨æ˜æ˜¯ç³»ç»Ÿé—®é¢˜,å¦åˆ™ä¼˜å…ˆé€‰æ‹©åº”ç”¨å±‚æ–¹æ¡ˆã€‚</p>
<h2 data-id="heading-14">è§£å†³æ–¹æ¡ˆå¯¹æ¯”</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/47a847b516bb4299a6d80270e109ad39~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yas5aWHTGFi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768012488&amp;x-signature=JWKNza9jTv2%2BYyVVgXUWNKP6gOY%3D" alt="case4-solutions-comparison.png" loading="lazy"/></p>
<p><em>å›¾2: å››ç§è§£å†³æ–¹æ¡ˆçš„ä¼˜ç¼ºç‚¹å¯¹æ¯”</em></p>













































<table><thead><tr><th align="left">æ–¹æ¡ˆ</th><th align="center">ä¿®å¤æ—¶é—´</th><th align="center">éš¾åº¦</th><th align="center">é£é™©</th><th align="center">æ•ˆæœ</th><th align="left">æ¨èåœºæ™¯</th></tr></thead><tbody><tr><td align="left">æ–¹æ¡ˆ1: ç¦ç”¨é€Ÿåº¦è¿½è¸ª</td><td align="center">5åˆ†é’Ÿ</td><td align="center">â­</td><td align="center">ä½</td><td align="center">ç«‹å³è§£å†³</td><td align="left">ç´§æ€¥ä¿®å¤,ç”Ÿäº§ç¯å¢ƒ</td></tr><tr><td align="left">æ–¹æ¡ˆ2: æ›¿æ¢ä¸ºScrollView</td><td align="center">1å°æ—¶</td><td align="center">â­â­</td><td align="center">ä¸­</td><td align="center">æ ¹æ²»</td><td align="left">ä¸éœ€è¦åµŒå¥—æ»‘åŠ¨</td></tr><tr><td align="left">æ–¹æ¡ˆ3: SafeNestedScrollView</td><td align="center">2å°æ—¶</td><td align="center">â­â­â­</td><td align="center">ä½</td><td align="center">é˜²å¾¡+ç›‘æ§</td><td align="left">éœ€è¦åµŒå¥—æ»‘åŠ¨+é˜²å¾¡</td></tr><tr><td align="left">æ–¹æ¡ˆ4: ç³»ç»Ÿå±‚ä¼˜åŒ–</td><td align="center">æ•°å‘¨</td><td align="center">â­â­â­â­â­</td><td align="center">é«˜</td><td align="center">å½»åº•æ ¹æ²»</td><td align="left">ç³»ç»Ÿå®šåˆ¶ROM</td></tr></tbody></table>
<p><strong>æˆ‘çš„å»ºè®®</strong>:</p>
<ul>
<li><strong>ç”Ÿäº§ç¯å¢ƒç´§æ€¥ä¿®å¤</strong>: æ–¹æ¡ˆ1(ç¦ç”¨) + æ–¹æ¡ˆ2(æ›¿æ¢)ç»„åˆæ‹³</li>
<li><strong>é•¿æœŸæ¶æ„ä¼˜åŒ–</strong>: æ–¹æ¡ˆ3(è‡ªå®šä¹‰View) + ä»£ç è§„èŒƒå»ºç«‹</li>
<li><strong>è½¦è½½ç³»ç»Ÿå®šåˆ¶</strong>: æ–¹æ¡ˆ4(ç³»ç»Ÿä¼˜åŒ–) + åº”ç”¨å±‚é˜²å¾¡</li>
</ul>
<h2 data-id="heading-15">éªŒè¯ä¸æµ‹è¯•:ä¿®å¤ä¹‹åçš„åŠŸè¯¾</h2>
<p>ä¿®å¤åªæ˜¯ç¬¬ä¸€æ­¥,éªŒè¯æ‰æ˜¯å…³é”®ã€‚ä»¥ä¸‹æ˜¯æˆ‘çš„æµ‹è¯•æ¸…å•:</p>
<h3 data-id="heading-16">åŠŸèƒ½æµ‹è¯•</h3>
<pre><code class="hljs language-markdown" lang="markdown">æµ‹è¯•æ­¥éª¤:
<span class="hljs-bullet">1.</span> è¿›å…¥è®¾ç½®åº”ç”¨
<span class="hljs-bullet">2.</span> ç‚¹å‡»è½¦ç¯ â†’ ç¯å¢ƒç¯
<span class="hljs-bullet">3.</span> åå¤ç‚¹å‡»æ—¥é—´è¡Œè½¦ç¯ä¸‹é¢çš„æ–‡å­—(è‡³å°‘20æ¬¡)
<span class="hljs-bullet">4.</span> è§‚å¯Ÿæ˜¯å¦å†æ¬¡å‡ºç°ANR
<span class="hljs-bullet">5.</span> æµ‹è¯•å…¶ä»–è®¾ç½®é¡µé¢çš„æ»‘åŠ¨åŠŸèƒ½
</code></pre>
<h3 data-id="heading-17">æ€§èƒ½æµ‹è¯•</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1. ç›‘æ§ä¸»çº¿ç¨‹æ€§èƒ½</span>
adb shell am profile start com.android.settings /data/local/tmp/profile.trace
<span class="hljs-comment"># æ‰§è¡Œæµ‹è¯•æ“ä½œ</span>
adb shell am profile stop com.android.settings

<span class="hljs-comment"># 2. å®æ—¶æŸ¥çœ‹æ—¥å¿—</span>
adb logcat -s SafeNestedScrollView:* AndroidRuntime:E

<span class="hljs-comment"># 3. æ£€æŸ¥æ˜¯å¦æœ‰æ–°çš„ANR</span>
adb shell <span class="hljs-built_in">ls</span> -lt /data/anr/
</code></pre>
<h3 data-id="heading-18">å…³é”®æŒ‡æ ‡</h3>



































<table><thead><tr><th align="left">æŒ‡æ ‡</th><th align="center">ä¿®å¤å‰</th><th align="center">ç›®æ ‡å€¼</th><th align="left">æµ‹é‡æ–¹æ³•</th></tr></thead><tbody><tr><td align="left">è§¦æ‘¸å“åº”æ—¶é—´</td><td align="center">å¤§äº5000ms</td><td align="center">å°äº100ms</td><td align="left">Systrace</td></tr><tr><td align="left">ä¸»çº¿ç¨‹æœ€å¤§é˜»å¡</td><td align="center">7520ms</td><td align="center">å°äº200ms</td><td align="left">StrictMode</td></tr><tr><td align="left">ANRå‘ç”Ÿç‡</td><td align="center">100%(å¿…ç°)</td><td align="center">0%</td><td align="left">çº¿ä¸Šç›‘æ§</td></tr><tr><td align="left">Flingæµç•…åº¦</td><td align="center">N/A</td><td align="center">â‰¥55fps</td><td align="left">FrameMetrics</td></tr></tbody></table>
<h3 data-id="heading-19">å›å½’æµ‹è¯•æ¸…å•</h3>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> å…¶ä»–è®¾ç½®é¡µé¢çš„æ»‘åŠ¨æ­£å¸¸</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> Dialogçš„æ˜¾ç¤ºå’Œå…³é—­æ­£å¸¸</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> å…¶ä»–ä½¿ç”¨NestedScrollViewçš„é¡µé¢æ­£å¸¸</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> åº”ç”¨å¯åŠ¨é€Ÿåº¦æ— æ˜æ˜¾ä¸‹é™</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> å†…å­˜å ç”¨æ— æ˜æ˜¾å¢é•¿</li>
</ul>
<h2 data-id="heading-20">é¢„é˜²æªæ–½:æˆäººä»¥é±¼ä¸å¦‚æˆäººä»¥æ¸”</h2>
<p>ç»å†äº†è¿™æ¬¡"æƒŠå¿ƒåŠ¨é­„"çš„æ’æŸ¥,æˆ‘æ€»ç»“äº†ä¸€äº›é¢„é˜²æªæ–½,å¸Œæœ›èƒ½å¸®åŠ©ä½ é¿å…ç±»ä¼¼çš„å‘ã€‚</p>
<h3 data-id="heading-21">ç¼–ç è§„èŒƒ</h3>
<h4 data-id="heading-22">âŒ åé¢æ•™æ:ä¸»çº¿ç¨‹éšå¼è®¡ç®—</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// âŒ é”™è¯¯:ä¾èµ–ç³»ç»Ÿç»„ä»¶çš„éšå¼è®¡ç®—</span>
nestedScrollView.fling(velocity)  <span class="hljs-comment">// å†…éƒ¨ä¼šè§¦å‘VelocityTrackerè®¡ç®—</span>
</code></pre>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// âœ… æ­£ç¡®:ä¸»åŠ¨æ§åˆ¶,é¿å…éšå¼è€—æ—¶æ“ä½œ</span>
nestedScrollView.smoothScrollTo(x, y, <span class="hljs-number">300</span>)  <span class="hljs-comment">// æ˜ç¡®çš„æ»šåŠ¨è¡Œä¸º</span>
</code></pre>
<h4 data-id="heading-23">âŒ åé¢æ•™æ:è¿‡åº¦åµŒå¥—</h4>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- âŒ é”™è¯¯:ä¸å¿…è¦çš„åµŒå¥—æ»‘åŠ¨ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">NestedScrollView</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">NestedScrollView</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">RecyclerView</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">NestedScrollView</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">NestedScrollView</span>&gt;</span>
</code></pre>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- âœ… æ­£ç¡®:ä½¿ç”¨CoordinatorLayout --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">androidx.coordinatorlayout.widget.CoordinatorLayout</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">com.google.android.material.appbar.AppBarLayout</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Toolbar</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">com.google.android.material.appbar.AppBarLayout</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">RecyclerView</span>
        <span class="hljs-attr">app:layout_behavior</span>=<span class="hljs-string">"@string/appbar_scrolling_view_behavior"</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">androidx.coordinatorlayout.widget.CoordinatorLayout</span>&gt;</span>
</code></pre>
<h3 data-id="heading-24">æ€§èƒ½ç›‘æ§æ–¹æ¡ˆ</h3>
<h4 data-id="heading-25">æ–¹æ¡ˆA: Firebase Performance Monitoring</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">val</span> trace = Firebase.performance.newTrace(<span class="hljs-string">"settings_light_dialog_touch"</span>)
trace.start()

<span class="hljs-keyword">try</span> {
    showLightSettingsDialog()
} <span class="hljs-keyword">finally</span> {
    trace.stop()
}
</code></pre>
<h4 data-id="heading-26">æ–¹æ¡ˆB: è‡ªå®šä¹‰ANRå®ˆå«</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">AnrWatchdog</span> : <span class="hljs-type">Thread</span>(<span class="hljs-string">"AnrWatchdog"</span>) {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> handler = Handler(Looper.getMainLooper())
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> checkInterval = <span class="hljs-number">5000L</span>  <span class="hljs-comment">// 5ç§’æ£€æŸ¥ä¸€æ¬¡</span>

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">run</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">while</span> (!isInterrupted) {
            <span class="hljs-keyword">val</span> blockDetected = AtomicBoolean(<span class="hljs-literal">false</span>)

            handler.post {
                blockDetected.<span class="hljs-keyword">set</span>(<span class="hljs-literal">true</span>)
            }

            sleep(checkInterval)

            <span class="hljs-keyword">if</span> (!blockDetected.<span class="hljs-keyword">get</span>()) {
                <span class="hljs-comment">// ä¸»çº¿ç¨‹é˜»å¡è¶…è¿‡5ç§’</span>
                reportAnr(Thread.getAllStackTraces())
            }
        }
    }

    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">reportAnr</span><span class="hljs-params">(stackTraces: <span class="hljs-type">Map</span>&lt;<span class="hljs-type">Thread</span>, Array&lt;StackTraceElement&gt;&gt;)</span></span> {
        <span class="hljs-comment">// ä¸ŠæŠ¥åˆ°ç›‘æ§å¹³å°</span>
        Log.e(<span class="hljs-string">"AnrWatchdog"</span>, <span class="hljs-string">"æ£€æµ‹åˆ°ANR"</span>, Exception().apply {
            stackTrace = stackTraces[Looper.getMainLooper().thread] ?: emptyArray()
        })
    }
}

<span class="hljs-comment">// åœ¨Applicationä¸­å¯åŠ¨</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MyApplication</span> : <span class="hljs-type">Application</span>() {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreate</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">super</span>.onCreate()
        AnrWatchdog().start()
    }
}
</code></pre>
<h3 data-id="heading-27">Code Reviewæ£€æŸ¥ç‚¹</h3>
<p>åœ¨ä»£ç å®¡æŸ¥æ—¶,é‡ç‚¹å…³æ³¨ä»¥ä¸‹å‡ ç‚¹:</p>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> æ‰€æœ‰UIçº¿ç¨‹æ“ä½œæ˜¯å¦è€—æ—¶å°äº16ms?(ä¸€å¸§æ—¶é—´)</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> æ˜¯å¦ä½¿ç”¨äº†StrictModeæ£€æµ‹ä¸»çº¿ç¨‹è¿è§„?</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> å¤æ‚è§†å›¾æ˜¯å¦åšäº†æ€§èƒ½æµ‹è¯•?</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> è§¦æ‘¸äº‹ä»¶å¤„ç†æ˜¯å¦æœ‰è¶…æ—¶ä¿æŠ¤?</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> æ˜¯å¦æœ‰å¿…è¦çš„try-catchä¿æŠ¤?</li>
</ul>
<h3 data-id="heading-28">å›¢é˜Ÿæµç¨‹ä¼˜åŒ–</h3>
<ol>
<li><strong>æ€§èƒ½æµ‹è¯•è‡ªåŠ¨åŒ–</strong></li>
</ol>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åœ¨CI/CDä¸­é›†æˆæ€§èƒ½æµ‹è¯•</span>
./gradlew connectedAndroidTest \
  -Pandroid.testInstrumentationRunnerArguments.class=\
  com.android.settings.PerformanceTest
</code></pre>
<ol start="2">
<li>
<p><strong>ANRç›‘æ§å‘Šè­¦</strong></p>
<ul>
<li>é›†æˆBuglyã€Sentryç­‰APMå·¥å…·</li>
<li>é…ç½®ANRç‡å‘Šè­¦é˜ˆå€¼:&gt;0.1%ç«‹å³å‘Šè­¦</li>
<li>æ¯å‘¨Review ANRæ•°æ®,ä¼˜å…ˆä¿®å¤é«˜é¢‘é—®é¢˜</li>
</ul>
</li>
<li>
<p><strong>æ€§èƒ½å¡ç‚¹è®°å½•</strong></p>
<ul>
<li>å»ºç«‹"æ€§èƒ½é™·é˜±"æ–‡æ¡£,è®°å½•å›¢é˜Ÿè¸©è¿‡çš„å‘</li>
<li>åœ¨æ–°äººåŸ¹è®­ä¸­åˆ†äº«æ€§èƒ½ä¼˜åŒ–æ¡ˆä¾‹</li>
<li>å®šæœŸç»„ç»‡æ€§èƒ½ä¼˜åŒ–æŠ€æœ¯åˆ†äº«</li>
</ul>
</li>
</ol>
<h2 data-id="heading-29">ç»éªŒæ•™è®­:æˆ‘è¸©è¿‡çš„å‘</h2>
<p>è¿™æ¬¡æ’æŸ¥è®©æˆ‘æ·±åˆ»ä½“ä¼šåˆ°å‡ ç‚¹:</p>
<h3 data-id="heading-30">1. æ°¸è¿œä¸è¦å¯¹ç³»ç»ŸAPIçš„æ€§èƒ½åšå‡è®¾</h3>
<p>æˆ‘åŸä»¥ä¸º <code>computeCurrentVelocity()</code> è¿™ç§ç³»ç»ŸAPIåº”è¯¥æ˜¯é«˜åº¦ä¼˜åŒ–çš„,ä¸ä¼šæœ‰æ€§èƒ½é—®é¢˜ã€‚<strong>é”™äº†!</strong> åœ¨å¼‚å¸¸æ•°æ®é¢å‰,ä»»ä½•ç®—æ³•éƒ½å¯èƒ½é€€åŒ–ã€‚</p>
<h3 data-id="heading-31">2. ANRä¸ä¸€å®šæ˜¯ä½ å†™çš„ä»£ç é—®é¢˜</h3>
<p>è¿™æ¬¡ANRçš„ç›´æ¥åŸå› æ˜¯ç³»ç»Ÿè§¦æ‘¸å±é©±åŠ¨äº§ç”Ÿçš„å¼‚å¸¸æ•°æ®,ä½†æœ€ç»ˆæš´éœ²åœ¨åº”ç”¨å±‚ã€‚è¿™æé†’æˆ‘ä»¬:åº”ç”¨å¼€å‘è¦æœ‰é˜²å¾¡æ€§æ€ç»´,ä¸èƒ½å‡è®¾ç³»ç»Ÿæ°¸è¿œæ­£å¸¸ã€‚</p>
<h3 data-id="heading-32">3. æ—¥å¿—æ˜¯æ’æŸ¥é—®é¢˜çš„ç¬¬ä¸€ç”Ÿäº§åŠ›</h3>
<p>å¹¸äºAndroidæä¾›äº†è¯¦ç»†çš„ANR trace,è®©æˆ‘èƒ½å¿«é€Ÿå®šä½åˆ° <code>VelocityTracker</code>ã€‚å¦‚æœæ²¡æœ‰è¿™äº›æ—¥å¿—,å¯èƒ½è¦èŠ±å¥½å‡ å¤©æ—¶é—´ç›²çŒœã€‚</p>
<h3 data-id="heading-33">4. å¿«é€Ÿæ­¢è¡€æ¯”è¿½æ±‚å®Œç¾æ›´é‡è¦</h3>
<p>é¢å¯¹ç”Ÿäº§ç¯å¢ƒçš„ç´§æ€¥Bug,æ–¹æ¡ˆ1(ç¦ç”¨é€Ÿåº¦è¿½è¸ª)è™½ç„¶ä¸å®Œç¾,ä½†5åˆ†é’Ÿå°±èƒ½æ­¢è¡€ã€‚å…ˆè®©ç”¨æˆ·èƒ½ç”¨èµ·æ¥,å†æ…¢æ…¢ä¼˜åŒ–,è¿™æ‰æ˜¯åŠ¡å®çš„å·¥ç¨‹æ€åº¦ã€‚</p>
<h3 data-id="heading-34">5. æ–‡æ¡£å’Œå¤ç›˜åŒæ ·é‡è¦</h3>
<p>å†™è¿™ç¯‡æ–‡ç« çš„è¿‡ç¨‹,ä¹Ÿæ˜¯å¯¹é—®é¢˜çš„å†æ€è€ƒã€‚æŠŠæ’æŸ¥è¿‡ç¨‹è®°å½•ä¸‹æ¥,ä¸ä»…èƒ½å¸®åŠ©å›¢é˜Ÿå…¶ä»–æˆå‘˜é¿å‘,ä¹Ÿèƒ½åœ¨ä¸‹æ¬¡é‡åˆ°ç±»ä¼¼é—®é¢˜æ—¶å¿«é€Ÿå›å¿†èµ·è§£å†³æ€è·¯ã€‚</p>
<h2 data-id="heading-35">ç›¸å…³æ–‡ç« </h2>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fhome.wonlab.top%2Fblog%2Fandroid_stability_performance%2Fandroid-stability-perf-series-readme" target="_blank" title="https://home.wonlab.top/blog/android_stability_performance/android-stability-perf-series-readme" ref="nofollow noopener noreferrer">Androidç¨³å®šæ€§&amp;æ€§èƒ½æ·±å…¥ç†è§£ä¸“æ ä»‹ç»</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fhome.wonlab.top%2Fblog%2Fandroid_stability_performance%2Fcase1-android-ivi-lag-case-analysis-binder-consumed" target="_blank" title="https://home.wonlab.top/blog/android_stability_performance/case1-android-ivi-lag-case-analysis-binder-consumed" ref="nofollow noopener noreferrer">Androidè½¦æœºå¡é¡¿æ¡ˆä¾‹å‰–æ:ä»Binderè€—å°½åˆ°å•ä¾‹ç¼ºå¤±çš„æ·±åº¦æ’æŸ¥</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fhome.wonlab.top%2Fblog%2Fandroid_stability_performance%2Fcase2-anr-audioserver-deadlock-system-failure" target="_blank" title="https://home.wonlab.top/blog/android_stability_performance/case2-anr-audioserver-deadlock-system-failure" ref="nofollow noopener noreferrer">ANRå®æˆ˜åˆ†æï¼šä¸€æ¬¡audioserveræ­»é”å¼•å‘çš„ç³»ç»Ÿçº§æ•…éšœæ’æŸ¥</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fhome.wonlab.top%2Fblog%2Fandroid_stability_performance%2Fcase3-android-black-screen-analysis" target="_blank" title="https://home.wonlab.top/blog/android_stability_performance/case3-android-black-screen-analysis" ref="nofollow noopener noreferrer">ä¸€æ¬¡ Android è½¦æœºé»‘å±é—®é¢˜çš„æ·±åº¦å‰–æï¼šå½“æ˜¾ç¤ºé©±åŠ¨é‡ä¸Šä¸­æ–­é£æš´</a></li>
</ul>
<hr/>
<p><em>å¦‚æœä½ ä¹Ÿé‡åˆ°è¿‡ç±»ä¼¼çš„è¯¡å¼‚é—®é¢˜,æ¬¢è¿åœ¨è¯„è®ºåŒºåˆ†äº«!æœ‰ä»»ä½•ç–‘é—®ä¹Ÿå¯ä»¥éšæ—¶ç•™è¨€è®¨è®ºã€‚</em></p>
<p><em>æœ¬æ–‡åŸºäºçœŸå®æ¡ˆä¾‹æ”¹ç¼–,éƒ¨åˆ†æ•æ„Ÿä¿¡æ¯å·²è„±æ•å¤„ç†ã€‚</em></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¹¶è¡Œä¸ç­‰äºæ›´å¿«ï¼šCompletableFuture è®©ä½ æ›´æ…¢çš„ 5 ä¸ªå§¿åŠ¿]]></title>    <link>https://juejin.cn/post/7589893746081169449</link>    <guid>https://juejin.cn/post/7589893746081169449</guid>    <pubDate>2026-01-02T01:37:52.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589893746081169449" data-draft-id="7590054976488882216" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¹¶è¡Œä¸ç­‰äºæ›´å¿«ï¼šCompletableFuture è®©ä½ æ›´æ…¢çš„ 5 ä¸ªå§¿åŠ¿"/> <meta itemprop="keywords" content="åç«¯,æ€§èƒ½ä¼˜åŒ–,Java"/> <meta itemprop="datePublished" content="2026-01-02T01:37:52.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸€åªå«ç…¤çƒçš„çŒ«"/> <meta itemprop="url" content="https://juejin.cn/user/1732486058745054"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¹¶è¡Œä¸ç­‰äºæ›´å¿«ï¼šCompletableFuture è®©ä½ æ›´æ…¢çš„ 5 ä¸ªå§¿åŠ¿
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1732486058745054/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸€åªå«ç…¤çƒçš„çŒ«
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-02T01:37:52.000Z" title="Fri Jan 02 2026 01:37:52 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>ä¸Šå‘¨çš„æŸä¸€å¤©ï¼Œè¿ç»´åŒå­¦æ‰¾åˆ°æˆ‘è¯´ç”Ÿäº§ç¯å¢ƒçš„è®¢å•å¤„ç†æ¥å£å“åº”æ—¶é—´çªç„¶é£™åˆ°äº† 3 ç§’ã€‚</p>
<p>æˆ‘å…ˆè®©åç«¯åŒå­¦å’Œè¿ç»´ä¸€èµ·æŸ¥ç›‘æ§ï¼ŒCPU ä½¿ç”¨ç‡å€’æ˜¯ä¸é«˜ï¼Œçº¿ç¨‹æ± çš„æ´»è·ƒçº¿ç¨‹æ•°å´æ¶¨åˆ°äº† 500 å¤šã€‚</p>
<p>å†çœ‹äº†çœ¼æœ€è¿‘ä¸Šçº¿çš„ä»£ç ï¼Œé‡Œé¢ä¸€æ®µåŸæœ¬ä¸²è¡Œçš„ä»£ç ï¼Œæ”¹æˆäº† <code>CompletableFuture</code> å¹¶è¡Œå¤„ç†ï¼Œæœ¬æ„è‚¯å®šæ˜¯æƒ³å¿«ä¸€ç‚¹ï¼Œç»“æœåè€Œå˜æ…¢äº†ã€‚</p>
<p>è¿™ä¹Ÿä¸æ˜¯ä¸ªä¾‹ã€‚</p>
<p>å¾ˆå¤šæ—¶å€™æˆ‘ä»¬æ‹¿åˆ°ä¸€æ®µä¸²è¡Œä»£ç ï¼Œç¬¬ä¸€ååº”å°±æ˜¯çœ‹èƒ½ä¸èƒ½æ”¹æˆå¹¶è¡Œï¼Œè§‰å¾—å¤šçº¿ç¨‹è·‘èµ·æ¥è‚¯å®šå¿«ã€‚</p>
<p>ä½†ä¸ªåˆ«æƒ…å†µä¸‹ï¼Œæ”¹å®Œä¹‹åä¸ä»…ä¸ä¼šå˜å¿«ï¼Œå¯èƒ½è¿˜ä¼šæ¯”åŸæ¥è¿˜æ…¢ã€‚</p>
<p>é—®é¢˜å‡ºåœ¨å“ªé‡Œï¼Ÿçº¿ç¨‹æ± ä¸å¤Ÿå¤§å—ï¼Ÿè¿˜æ˜¯æœºå™¨é…ç½®å¤ªä½å—ï¼Ÿå…¶å®ä¸ç„¶ã€‚</p>
<p>çœŸæ­£çš„åŸå› ï¼Œå¯èƒ½è¿˜æ˜¯æˆ‘ä»¬ä½¿ç”¨ CompletableFuture çš„å§¿åŠ¿ä¸æ­£ç¡®ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cf49d84b171e481eba7dd320657d9007~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5Y-q5Y-r54Wk55CD55qE54yr:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767922671&amp;x-signature=cBPTmOh3ZRTwNMsyNdvL4r%2FQB4E%3D" alt="fullmetal alchemist ed GIF.gif" loading="lazy"/></p>
<h2 data-id="heading-1">ä»»åŠ¡æ‹†çš„å¤ªç¢ï¼šä¸Šä¸‹æ–‡åˆ‡æ¢åƒæ‰äº†æ‰€æœ‰æ”¶ç›Š</h2>
<p>å‡è®¾ä½ è¦å¤„ç† 1000 ä¸ªè®¢å•å·ï¼Œæ¯ä¸ªè®¢å•å·éœ€è¦è°ƒç”¨ä¸€ä¸ªæ–¹æ³•åšæ ¡éªŒï¼Œå•æ¬¡è°ƒç”¨è€—æ—¶ 0.1 æ¯«ç§’ã€‚ä¸²è¡Œå¤„ç†æ€»å…±éœ€è¦ 100 æ¯«ç§’ã€‚ä½ è§‰å¾—ç”¨ CompletableFuture å¹¶è¡Œå¤„ç†ï¼Œå¼€ 10 ä¸ªçº¿ç¨‹åº”è¯¥èƒ½å¿« 10 å€å§ï¼Ÿ</p>
<p>è®©æˆ‘ä»¬å†™ä¸ªæµ‹è¯•ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">// ä¸²è¡Œå¤„ç†
long <span class="hljs-attr">start</span> = System.nanoTime()<span class="hljs-comment">;</span>
for (String orderId : orderIds) {
    validateOrder(orderId)<span class="hljs-comment">;</span>
}
long <span class="hljs-attr">serialTime</span> = System.nanoTime() - start<span class="hljs-comment">;</span>

// å¹¶è¡Œå¤„ç†
ExecutorService <span class="hljs-attr">executor</span> = Executors.newFixedThreadPool(<span class="hljs-number">10</span>)<span class="hljs-comment">;</span>
<span class="hljs-attr">start</span> = System.nanoTime()<span class="hljs-comment">;</span>
List&lt;CompletableFuture&lt;Void&gt;&gt; <span class="hljs-attr">futures</span> = orderIds.stream()
    .map(orderId -&gt; CompletableFuture.runAsync(
        () -&gt; validateOrder(orderId), executor))
    .collect(Collectors.toList())<span class="hljs-comment">;</span>
CompletableFuture.allOf(futures.toArray(new CompletableFuture<span class="hljs-section">[0]</span>)).join()<span class="hljs-comment">;</span>
long <span class="hljs-attr">parallelTime</span> = System.nanoTime() - start<span class="hljs-comment">;</span>
</code></pre>
<p>ç»“æœä¸²è¡Œç”¨äº† 98 æ¯«ç§’ï¼Œå¹¶è¡Œç”¨äº† 145 æ¯«ç§’ã€‚</p>
<p>ä¸ºä»€ä¹ˆä¼šè¿™æ ·ï¼Ÿ</p>
<p>æ¯æäº¤ä¸€ä¸ª CompletableFutureï¼Œç³»ç»Ÿéƒ½è¦åšä¸€æ¬¡ä»»åŠ¡è°ƒåº¦ï¼Œæ¶‰åŠçº¿ç¨‹å”¤é†’ã€ä¸Šä¸‹æ–‡åˆ‡æ¢ã€CPU ç¼“å­˜å¤±æ•ˆã€‚è¿™äº›å¼€é”€åŠ èµ·æ¥å¯èƒ½å°±è¦å‡ å¾®ç§’ã€‚å½“å•ä¸ªä»»åŠ¡æœ¬èº«åªéœ€è¦ 0.1 æ¯«ç§’æ—¶ï¼Œè°ƒåº¦å¼€é”€å æ¯”å°±å¾ˆé«˜äº†ã€‚1000 ä¸ªä»»åŠ¡å°±æ˜¯ 1000 æ¬¡è°ƒåº¦ï¼Œç´¯ç§¯èµ·æ¥çš„å¼€é”€è¶…è¿‡äº†å¹¶è¡Œå¸¦æ¥çš„æ”¶ç›Šã€‚</p>
<p>æ›´ç¨³å¦¥çš„åšæ³•æ˜¯æŠŠç²’åº¦æ”¶ç²—ï¼Œè®©æ¯ä¸ªä»»åŠ¡è¶³å¤Ÿå¤§ï¼Œè‡³å°‘è¦†ç›–è°ƒåº¦æˆæœ¬ã€‚</p>
<p>æˆ‘ä»¬æ”¹æˆæ¯ 100 ä¸ªè®¢å•å·ä½œä¸ºä¸€æ‰¹ï¼Œæäº¤ä¸€ä¸ª CompletableFutureï¼š</p>
<pre><code class="hljs language-ini" lang="ini">List&lt;CompletableFuture&lt;Void&gt;&gt; <span class="hljs-attr">futures</span> = new ArrayList&lt;&gt;()<span class="hljs-comment">;</span>
for (int <span class="hljs-attr">i</span> = <span class="hljs-number">0</span><span class="hljs-comment">; i &lt; orderIds.size(); i += 100) {</span>
    List&lt;String&gt; <span class="hljs-attr">batch</span> = orderIds.subList(i, 
        Math.min(i + 100, orderIds.size()))<span class="hljs-comment">;</span>
    futures.add(CompletableFuture.runAsync(() -&gt; {
        for (String orderId : batch) {
            validateOrder(orderId)<span class="hljs-comment">;</span>
        }
    }, executor))<span class="hljs-comment">;</span>
}
CompletableFuture.allOf(futures.toArray(new CompletableFuture<span class="hljs-section">[0]</span>)).join()<span class="hljs-comment">;</span>
</code></pre>
<p>è¿™æ¬¡åªç”¨äº† 12 æ¯«ç§’ã€‚è°ƒåº¦æ¬¡æ•°ä» 1000 æ¬¡é™åˆ°äº† 10 æ¬¡ï¼Œä¸Šä¸‹æ–‡åˆ‡æ¢çš„å¼€é”€å¤§å¹…å‡å°‘ï¼Œå¹¶è¡Œçš„ä¼˜åŠ¿æ‰çœŸæ­£ä½“ç°å‡ºæ¥ã€‚</p>
<p>è¿™å…¶å®å°±æ˜¯æœ€å¸¸è§çš„ç­–ç•¥â€”â€”åˆ†æ‰¹å¤„ç†æˆ–åˆ†ç‰‡å¤„ç†ã€‚</p>
<p>å½“ç„¶è¿˜æœ‰ä¸€ç‚¹ç»éªŒä¸»ä¹‰ï¼Œå•ä¸ªä»»åŠ¡çš„æ‰§è¡Œæ—¶é—´è‡³å°‘è¦åœ¨ 1 æ¯«ç§’ä»¥ä¸Šï¼Œå¹¶è¡Œæ‰æœ‰æ„ä¹‰ã€‚å¦‚æœä»»åŠ¡æœ¬èº«å¾ˆè½»é‡ï¼Œå°±åº”è¯¥æ‰“åŒ…æˆæ‰¹æ¬¡å†æäº¤ã€‚</p>
<h2 data-id="heading-2">å…±äº«èµ„æºï¼šæ‰€æœ‰çº¿ç¨‹æŒ¤åœ¨åŒä¸€æ‰‡é—¨å‰</h2>
<p>å¹¶è¡Œå¤„ç†æ—¶ï¼Œå¦‚æœå¤šä¸ªçº¿ç¨‹éœ€è¦è®¿é—®åŒä¸€ä¸ªèµ„æºï¼Œè¿™ä¸ªèµ„æºå°±ä¼šæˆä¸ºç“¶é¢ˆã€‚æœ€å¸¸è§çš„å°±æ˜¯<strong>æ•°æ®åº“è¿æ¥æ± </strong>ã€‚</p>
<p>æ¯”æ–¹è¯´ç”¨ CompletableFuture å¹¶è¡ŒæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯ï¼Œæ¯ä¸ª future éƒ½è¦ä»è¿æ¥æ± æ‹¿ä¸€ä¸ªæ•°æ®åº“è¿æ¥ã€‚è¿æ¥æ± é…ç½®äº† 20 ä¸ªè¿æ¥ï¼Œä½†åŒæ—¶æäº¤äº† 100 ä¸ª CompletableFutureã€‚</p>
<p>ç»“æœå°±æ˜¯ 80 ä¸ªçº¿ç¨‹åœ¨ç­‰å¾…è¿æ¥é‡Šæ”¾ï¼Œç™½ç™½æµªè´¹æ—¶é—´ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">// è¿æ¥æ± åªæœ‰ 20 ä¸ªè¿æ¥
HikariConfig <span class="hljs-attr">config</span> = new HikariConfig()<span class="hljs-comment">;</span>
config.setMaximumPoolSize(20)<span class="hljs-comment">;</span>
DataSource <span class="hljs-attr">dataSource</span> = new HikariDataSource(config)<span class="hljs-comment">;</span>

// åŒæ—¶å‘èµ· 100 ä¸ªæŸ¥è¯¢
ExecutorService <span class="hljs-attr">executor</span> = Executors.newFixedThreadPool(<span class="hljs-number">100</span>)<span class="hljs-comment">;</span>
List&lt;CompletableFuture&lt;User&gt;&gt; <span class="hljs-attr">futures</span> = userIds.stream()
    .map(userId -&gt; CompletableFuture.supplyAsync(() -&gt; {
        try (Connection <span class="hljs-attr">conn</span> = dataSource.getConnection()) {
            return queryUser(conn, userId)<span class="hljs-comment">;</span>
        }
    }, executor))
    .collect(Collectors.toList())<span class="hljs-comment">;</span>
</code></pre>
<p>ç›‘æ§æ˜¾ç¤ºï¼Œå¹³å‡æ¯ä¸ªæŸ¥è¯¢è€—æ—¶ä»ä¸²è¡Œæ—¶çš„ 5 æ¯«ç§’æ¶¨åˆ°äº† 50 æ¯«ç§’ã€‚å¤§éƒ¨åˆ†æ—¶é—´éƒ½èŠ±åœ¨äº†ç­‰å¾…è¿æ¥ä¸Šã€‚</p>
<p>é™¤äº†æ•°æ®åº“è¿æ¥æ± ï¼Œè¿˜æœ‰å¾ˆå¤šè¿™ç§å…¸å‹çš„åœºæ™¯æ¡ˆä¾‹ï¼š</p>
<ul>
<li>é”ä¸åŒæ­¥å—</li>
<li>æ•°æ®åº“è¿æ¥æ± ã€Redis è¿æ¥æ± </li>
<li>HTTP å®¢æˆ·ç«¯è¿æ¥æ± </li>
<li>é™æµå™¨ã€ç†”æ–­å™¨</li>
<li>å•çº¿ç¨‹æ—¥å¿— appendã€å•é˜Ÿåˆ—ç¼“å†²</li>
</ul>
<p>ä¸€èˆ¬æ¥è®²ï¼Œè¿™ç§é—®é¢˜çš„åº”å¯¹æ€è·¯é€šå¸¸æ˜¯ï¼š</p>
<ul>
<li>æŠŠå…±äº«åŒºç¼©å°ï¼ŒæŠŠé”ç²’åº¦å‹ç¼©åˆ°å¿…è¦èŒƒå›´</li>
<li>è®©å¹¶å‘åº¦å—èµ„æºå®¹é‡çº¦æŸï¼Œåˆ«è¶…è¿‡è¿æ¥æ± å’Œä¸‹æ¸¸çš„å¯æ‰¿å—å¹¶å‘</li>
<li>å¯¹ I/O åšéš”ç¦»æ± ï¼Œé¿å…åŒä¸€ä¸ªæ± é‡Œæ—¢è·‘ CPU åˆè·‘é˜»å¡ I/O</li>
</ul>
<p>æœ€ç®€å•çš„æ–¹å¼å°±æ˜¯æŠŠçº¿ç¨‹æ± æ”¹æˆ 20ï¼Œå½“ç„¶è¿˜æœ‰å¦ä¸€ä¸ªæœ´ç´ ä½†æœ‰æ•ˆçš„æ‰‹æ®µï¼Œæ˜¯ç”¨ä¿¡å·é‡æŠŠå¹¶å‘åº¦å¡åœ¨èµ„æºå®¹é‡ä¹‹å†…ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">Semaphore <span class="hljs-attr">semaphore</span> = new Semaphore(<span class="hljs-number">20</span>)<span class="hljs-comment">; // ä¸è¦è¶…è¿‡è¿æ¥æ± æˆ–ä¸‹æ¸¸å¹¶å‘ä¸Šé™</span>
List&lt;CompletableFuture&lt;User&gt;&gt; <span class="hljs-attr">futures</span> = userIds.stream()
    .map(userId -&gt; CompletableFuture.supplyAsync(() -&gt; {
        try {
            semaphore.acquire()<span class="hljs-comment">;</span>
            try (Connection <span class="hljs-attr">conn</span> = dataSource.getConnection()) {
                return queryUser(conn, userId)<span class="hljs-comment">;</span>
            }
        } finally {
            semaphore.release()<span class="hljs-comment">;</span>
        }
    }, executor))
    .collect(Collectors.toList())<span class="hljs-comment">;</span>
</code></pre>
<p>å¦‚æœä½ çš„ä»»åŠ¡éœ€è¦è·å–è¿™äº›èµ„æºï¼Œå¹¶å‘åº¦å°±ä¸èƒ½è®¾å¾—å¤ªé«˜ï¼Œå¦åˆ™å¤§é‡çº¿ç¨‹ä¼šé˜»å¡åœ¨èµ„æºç«äº‰ä¸Šã€‚</p>
<h2 data-id="heading-3">å†…å­˜çˆ†ç‚¸ï¼šä¸€å£æ°”æäº¤åä¸‡ä¸ª Future</h2>
<p>æœ‰ä¸ªå®šæ—¶ä»»åŠ¡éœ€è¦å¤„ç†æ•°æ®åº“é‡Œçš„æ‰€æœ‰å¾…å¤„ç†è®¢å•ï¼Œæ•°é‡å¤§æ¦‚åå‡ ä¸‡ã€‚åç«¯åŒå­¦å†™äº†è¿™æ ·çš„ä»£ç ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">List&lt;Order&gt; <span class="hljs-attr">orders</span> = orderRepository.findAllPending()<span class="hljs-comment">; // 10 ä¸‡æ¡</span>
ExecutorService <span class="hljs-attr">executor</span> = Executors.newFixedThreadPool(<span class="hljs-number">50</span>)<span class="hljs-comment">;</span>

List&lt;CompletableFuture&lt;Void&gt;&gt; <span class="hljs-attr">futures</span> = orders.stream()
    .map(order -&gt; CompletableFuture.runAsync(
        () -&gt; processOrder(order), executor))
    .collect(Collectors.toList())<span class="hljs-comment">;</span>

CompletableFuture.allOf(futures.toArray(new CompletableFuture<span class="hljs-section">[0]</span>)).join()<span class="hljs-comment">;</span>
</code></pre>
<p>è¿™æ®µä»£ç åœ¨æµ‹è¯•ç¯å¢ƒè·‘å¾—å¥½å¥½çš„ï¼Œå› ä¸ºæµ‹è¯•æ•°æ®åªæœ‰å‡ ç™¾æ¡ã€‚ä¸Šäº†ç”Ÿäº§ä¹‹åï¼ˆè‰å°ç­å­æ²¡æœ‰åšå¥½ä»£ç å®¡æŸ¥ ğŸ˜­ï¼‰ï¼ŒJVM ç›´æ¥ OOM äº†ã€‚</p>
<p>é—®é¢˜åœ¨äºè¿™è¡Œä»£ç ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">.collect(Collectors.toList())<span class="hljs-comment">;</span>
</code></pre>
<p>å®ƒä¼šä¸€å£æ°”åˆ›å»º 10 ä¸‡ä¸ª CompletableFuture å¯¹è±¡ï¼Œæ¯ä¸ªå¯¹è±¡å ç”¨å‡ ç™¾å­—èŠ‚åˆ°ä¸Šåƒå­—èŠ‚ä¸ç­‰ã€‚è¿˜æ²¡å¼€å§‹å¤„ç†ï¼Œå…‰æ˜¯è¿™äº› Future å¯¹è±¡å°±å ç”¨äº†å‡ ç™¾ MB å†…å­˜ã€‚åŠ ä¸Šçº¿ç¨‹æ± é˜Ÿåˆ—é‡Œå †ç§¯çš„ä»»åŠ¡å¯¹è±¡ï¼Œå†…å­˜å¾ˆå¿«å°±æ’‘ä¸ä½äº†ã€‚</p>
<p>æ­£ç¡®çš„åšæ³•æ˜¯åˆ†æ‰¹å¤„ç†ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">List&lt;Order&gt; <span class="hljs-attr">orders</span> = orderRepository.findAllPending()<span class="hljs-comment">;</span>
ExecutorService <span class="hljs-attr">executor</span> = Executors.newFixedThreadPool(<span class="hljs-number">50</span>)<span class="hljs-comment">;</span>

int <span class="hljs-attr">batchSize</span> = <span class="hljs-number">1000</span><span class="hljs-comment">;</span>
for (int <span class="hljs-attr">i</span> = <span class="hljs-number">0</span><span class="hljs-comment">; i &lt; orders.size(); i += batchSize) {</span>
    List&lt;Order&gt; <span class="hljs-attr">batch</span> = orders.subList(i, 
        Math.min(i + batchSize, orders.size()))<span class="hljs-comment">;</span>
    
    List&lt;CompletableFuture&lt;Void&gt;&gt; <span class="hljs-attr">futures</span> = batch.stream()
        .map(order -&gt; CompletableFuture.runAsync(
            () -&gt; processOrder(order), executor))
        .collect(Collectors.toList())<span class="hljs-comment">;</span>
    
    CompletableFuture.allOf(futures.toArray(new CompletableFuture<span class="hljs-section">[0]</span>)).join()<span class="hljs-comment">;</span>
}
</code></pre>
<p>æ¯æ¬¡åªåˆ›å»º 1000 ä¸ª Futureï¼Œå¤„ç†å®Œä¸€æ‰¹å†å¤„ç†ä¸‹ä¸€æ‰¹ã€‚å†…å­˜å ç”¨ç¨³å®šåœ¨å¯æ§èŒƒå›´å†…ã€‚</p>
<p>è¿™ä¸ªé—®é¢˜çš„æœ¬è´¨æ˜¯ç¼ºå°‘èƒŒå‹æœºåˆ¶ã€‚</p>
<p>ç”Ÿäº§è€…ä¸€è‚¡è„‘åœ°æäº¤ä»»åŠ¡ï¼Œå®Œå…¨ä¸ç®¡æ¶ˆè´¹è€…çš„å¤„ç†èƒ½åŠ›ã€‚å½“ä»»åŠ¡æäº¤é€Ÿåº¦è¿œå¤§äºå¤„ç†é€Ÿåº¦æ—¶ï¼Œæœªå¤„ç†çš„ä»»åŠ¡å°±ä¼šåœ¨å†…å­˜é‡Œå †ç§¯ï¼Œæœ€ç»ˆå¯¼è‡´ OOMã€‚</p>
<h2 data-id="heading-4">çº¿ç¨‹æ± é…ç½®ï¼šä¸æ˜¯è¶Šå¤§è¶Šå¥½</h2>
<p>é‡åˆ°æ€§èƒ½é—®é¢˜æ—¶ï¼Œå¾ˆå¤šäººçš„ç¬¬ä¸€ååº”æ˜¯åŠ å¤§çº¿ç¨‹æ± ã€‚åŸæ¥æ˜¯ 50ï¼Œæ”¹æˆ 100ï¼Œè¿˜æ˜¯æ…¢å°±æ”¹æˆ 200ã€‚ç»“æœå¾€å¾€æ˜¯çº¿ç¨‹è¶Šå¤šè¶Šæ…¢ã€‚</p>
<p>ä»¥å‰åšè¿‡ä¸€ä¸ªå®éªŒï¼Œç”¨ä¸åŒå¤§å°çš„çº¿ç¨‹æ± å¤„ç†åŒä¸€æ‰¹ IO å¯†é›†å‹ä»»åŠ¡ã€‚æ¯ä¸ªä»»åŠ¡éœ€è¦è°ƒç”¨ä¸€ä¸ªå¤–éƒ¨ HTTP æ¥å£ï¼Œå¹³å‡è€—æ—¶ 200 æ¯«ç§’ã€‚ä¸€å…± 1000 ä¸ªä»»åŠ¡ã€‚</p>



































<table><thead><tr><th>çº¿ç¨‹æ•°</th><th>æ€»è€—æ—¶(ç§’)</th><th>CPU ä½¿ç”¨ç‡</th></tr></thead><tbody><tr><td>10</td><td>20.5</td><td>15%</td></tr><tr><td>50</td><td>4.2</td><td>45%</td></tr><tr><td>100</td><td>2.8</td><td>68%</td></tr><tr><td>200</td><td>3.1</td><td>82%</td></tr><tr><td>500</td><td>4.8</td><td>91%</td></tr></tbody></table>
<p>å¯ä»¥çœ‹åˆ°ï¼Œçº¿ç¨‹æ•°ä» 10 å¢åŠ åˆ° 100 æ—¶ï¼Œæ€§èƒ½æŒç»­æå‡ã€‚ä½†è¶…è¿‡ 100 ä¹‹åï¼Œæ€§èƒ½åè€Œä¸‹é™äº†ã€‚è¿™æ˜¯å› ä¸ºçº¿ç¨‹æ•°å¤ªå¤šä¼šå¸¦æ¥å‡ ä¸ªé—®é¢˜ï¼š</p>
<p>çº¿ç¨‹æœ¬èº«è¦å ç”¨å†…å­˜ï¼Œæ¯ä¸ªçº¿ç¨‹çš„æ ˆç©ºé—´é»˜è®¤æ˜¯ 1MBã€‚500 ä¸ªçº¿ç¨‹å°±æ˜¯ 500MBã€‚</p>
<p>çº¿ç¨‹è¶Šå¤šï¼Œæ“ä½œç³»ç»Ÿçš„è°ƒåº¦å¼€é”€è¶Šå¤§ã€‚CPU è¦åœ¨ä¸åŒçº¿ç¨‹ä¹‹é—´é¢‘ç¹åˆ‡æ¢ï¼Œæ¯æ¬¡åˆ‡æ¢éƒ½è¦ä¿å­˜å’Œæ¢å¤ä¸Šä¸‹æ–‡ã€‚</p>
<p>å¯¹äº IO å¯†é›†å‹ä»»åŠ¡ï¼Œç»éªŒå…¬å¼æ˜¯ <code>çº¿ç¨‹æ•°ç­‰äº CPU æ ¸å¿ƒæ•°ä¹˜ä»¥ (1 + IO æ—¶é—´ / CPU æ—¶é—´)</code>ã€‚</p>
<p>å‡è®¾ IO æ—¶é—´æ˜¯ 200 æ¯«ç§’ï¼ŒCPU æ—¶é—´æ˜¯ 1 æ¯«ç§’ï¼Œé‚£ä¹ˆ 8 æ ¸æœºå™¨çš„ç†æƒ³çº¿ç¨‹æ•°æ˜¯ <code> 8 * (1 + 200/1) = 1608</code> ã€‚</p>
<p>ä½†è¿™åªæ˜¯ç†è®ºå€¼ï¼Œå®é™…ä¸Šå¾ˆå°‘éœ€è¦è¿™ä¹ˆå¤šçº¿ç¨‹ã€‚</p>
<p>æ›´å®ç”¨çš„åšæ³•æ˜¯ä»ä¸€ä¸ªåˆç†çš„åˆå§‹å€¼å¼€å§‹ï¼Œæ¯”å¦‚ CPU æ ¸å¿ƒæ•°çš„ 2 åˆ° 4 å€ï¼Œç„¶åé€šè¿‡å‹æµ‹é€æ­¥è°ƒæ•´ï¼Œè§‚å¯Ÿ CPU ä½¿ç”¨ç‡ã€å“åº”æ—¶é—´å’Œååé‡ï¼Œæ‰¾åˆ°æœ€ä½³çš„å¹³è¡¡ç‚¹ã€‚</p>
<p>å¦ä¸€ä¸ªå¸¸è§é”™è¯¯æ˜¯æ··ç”¨çº¿ç¨‹æ± ã€‚æœ‰çš„ä»£ç é‡Œåˆ›å»ºäº†å¤šä¸ª ExecutorServiceï¼Œæ¯ä¸ªåœ°æ–¹éƒ½ç”¨ newFixedThreadPool(50)ã€‚</p>
<p>å®é™…è¿è¡Œæ—¶å¯èƒ½æœ‰ 5 ä¸ªè¿™æ ·çš„çº¿ç¨‹æ± ï¼Œæ€»å…± 250 ä¸ªçº¿ç¨‹åœ¨è·‘ã€‚æ¯ä¸ªçº¿ç¨‹æ± å•ç‹¬çœ‹éƒ½ä¸å¤§ï¼Œåˆåœ¨ä¸€èµ·å°±è¶…è´Ÿè·äº†ã€‚</p>
<p>æœ€å¥½æ˜¯åœ¨åº”ç”¨å¯åŠ¨æ—¶åˆ›å»ºä¸€ä¸ªå…¨å±€çš„çº¿ç¨‹æ± ï¼Œæ‰€æœ‰ CompletableFuture å…±ç”¨è¿™ä¸€ä¸ªã€‚</p>
<p>å¦‚æœç¡®å®éœ€è¦éš”ç¦»ï¼Œä¹Ÿåº”è¯¥ä»”ç»†è§„åˆ’å„ä¸ªçº¿ç¨‹æ± çš„å¤§å°ï¼Œç¡®ä¿æ€»æ•°å¯æ§ã€‚</p>
<h2 data-id="heading-5">å¼‚å¸¸å¤„ç†ï¼šä¸€ä¸ªä»»åŠ¡æŒ‚äº†ï¼Œå…¶ä»–ä»»åŠ¡ä¹Ÿç™½è·‘</h2>
<p>CompletableFuture æœ‰ä¸ªç‰¹ç‚¹ï¼Œå¦‚æœå…¶ä¸­ä¸€ä¸ªä»»åŠ¡æŠ›å‡ºå¼‚å¸¸ï¼Œè°ƒç”¨ allOf().join() æ—¶ä¼šç«‹å³æŠ›å‡ºå¼‚å¸¸ï¼Œä½†å…¶ä»–ä»»åŠ¡ä¸ä¼šåœæ­¢ï¼Œå®ƒä»¬ä¼šç»§ç»­åœ¨åå°æ‰§è¡Œå®Œã€‚</p>
<pre><code class="hljs language-scss" lang="scss">List&lt;CompletableFuture&lt;Void&gt;&gt; futures = Arrays<span class="hljs-selector-class">.asList</span>(
    CompletableFuture.runAsync(() -&gt; <span class="hljs-built_in">task1</span>()),
    CompletableFuture<span class="hljs-selector-class">.runAsync</span>(() -&gt; { throw new <span class="hljs-built_in">RuntimeException</span>(); }),
    CompletableFuture<span class="hljs-selector-class">.runAsync</span>(() -&gt; <span class="hljs-built_in">task3</span>())
);

try {
    CompletableFuture<span class="hljs-selector-class">.allOf</span>(futures.toArray(new CompletableFuture[<span class="hljs-number">0</span>]))<span class="hljs-selector-class">.join</span>();
} catch (Exception e) {
    <span class="hljs-comment">// è¿›å…¥è¿™é‡Œæ—¶ï¼Œtask1 å’Œ task3 å¯èƒ½è¿˜åœ¨æ‰§è¡Œ</span>
}
</code></pre>
<p>å¦‚æœä½ çš„ä»»åŠ¡ä¹‹é—´æœ‰ä¾èµ–å…³ç³»ï¼Œè¿™ç§è¡Œä¸ºä¼šå¯¼è‡´èµ„æºæµªè´¹ã€‚æ¯”å¦‚ç¬¬ä¸€æ­¥æŸ¥è¯¢è®¢å•å¤±è´¥äº†ï¼Œåé¢çš„è®¡ç®—ä»·æ ¼ã€æ›´æ–°åº“å­˜éƒ½æ²¡æœ‰æ„ä¹‰ï¼Œä½†å®ƒä»¬è¿˜åœ¨ç»§ç»­è·‘ã€‚</p>
<p>æ›´ç³Ÿç³•çš„æƒ…å†µæ˜¯ï¼Œå¦‚æœæ²¡æœ‰æ­£ç¡®å¤„ç†å¼‚å¸¸ï¼Œæœ‰äº›ä»»åŠ¡å¯èƒ½ä¼šæ°¸è¿œå¡ä½ã€‚æ¯”å¦‚ä»»åŠ¡å†…éƒ¨è·å–äº†é”ä½†æ²¡æœ‰åœ¨ finally é‡Œé‡Šæ”¾ï¼ŒæŠ›å‡ºå¼‚å¸¸åé”å°±æ°¸è¿œä¸ä¼šé‡Šæ”¾äº†ã€‚</p>
<p>å»ºè®®æ¯ä¸ªä»»åŠ¡éƒ½ç”¨ exceptionally æˆ– handle æ–¹æ³•æ•è·å¼‚å¸¸ï¼š</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">List</span>&lt;<span class="hljs-selector-tag">CompletableFuture</span>&lt;<span class="hljs-selector-tag">Result</span>&gt;&gt; <span class="hljs-selector-tag">futures</span> = <span class="hljs-selector-tag">tasks</span><span class="hljs-selector-class">.stream</span>()
    <span class="hljs-selector-class">.map</span>(task -&gt; CompletableFuture.<span class="hljs-built_in">supplyAsync</span>(() -&gt; task.<span class="hljs-built_in">execute</span>())
        .<span class="hljs-built_in">exceptionally</span>(ex -&gt; {
            log.<span class="hljs-built_in">error</span>(<span class="hljs-string">"Task failed"</span>, ex);
            return Result.<span class="hljs-built_in">failure</span>(ex);
        }))
    <span class="hljs-selector-class">.collect</span>(Collectors.<span class="hljs-built_in">toList</span>());

<span class="hljs-selector-tag">List</span>&lt;<span class="hljs-selector-tag">Result</span>&gt; <span class="hljs-selector-tag">results</span> = <span class="hljs-selector-tag">CompletableFuture</span><span class="hljs-selector-class">.allOf</span>(
    futures.<span class="hljs-built_in">toArray</span>(new CompletableFuture[<span class="hljs-number">0</span>]))
    <span class="hljs-selector-class">.thenApply</span>(v -&gt; futures.<span class="hljs-built_in">stream</span>()
        .<span class="hljs-built_in">map</span>(<span class="hljs-attribute">CompletableFuture</span>::join)
        .<span class="hljs-built_in">collect</span>(Collectors.<span class="hljs-built_in">toList</span>()))
    <span class="hljs-selector-class">.join</span>();
</code></pre>
<p>è¿™æ ·å¯ä»¥ç¡®ä¿å¼‚å¸¸è¢«æ­£ç¡®è®°å½•ï¼Œè€Œä¸”ä¸ä¼šä¸­æ–­å…¶ä»–ä»»åŠ¡ã€‚æœ€åæ”¶é›†ç»“æœæ—¶ï¼Œå¯ä»¥æ£€æŸ¥æ¯ä¸ª Result æ˜¯æˆåŠŸè¿˜æ˜¯å¤±è´¥ï¼Œåšç›¸åº”çš„å¤„ç†ã€‚</p>
<h2 data-id="heading-6">æ€§èƒ½æµ‹è¯•ï¼šçœ‹æ¸…å¹¶å‘åº¦æ›²çº¿</h2>
<p>ä¸ºäº†éªŒè¯ä¸Šé¢æåˆ°çš„å‡ ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬æ¥åšä¸€ç»„å¯¹æ¯”å®éªŒã€‚ä»»åŠ¡åœºæ™¯æ˜¯æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯å¹¶è®¡ç®—ç§¯åˆ†ï¼Œå•æ¬¡æŸ¥è¯¢è€—æ—¶çº¦ 10 æ¯«ç§’ã€‚æ•°æ®åº“è¿æ¥æ± é…ç½® 20 ä¸ªè¿æ¥ã€‚</p>
<p>æµ‹è¯•ä»£ç ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">// ä¸²è¡Œå¤„ç†
long <span class="hljs-attr">start</span> = System.currentTimeMillis()<span class="hljs-comment">;</span>
for (int userId : userIds) {
    User <span class="hljs-attr">user</span> = queryUser(userId)<span class="hljs-comment">;</span>
    calculatePoints(user)<span class="hljs-comment">;</span>
}
long <span class="hljs-attr">serialTime</span> = System.currentTimeMillis() - start<span class="hljs-comment">;</span>

// å¹¶è¡Œå¤„ç†ï¼ˆä¸åŒå¹¶å‘åº¦ï¼‰
for (int concurrency : new int<span class="hljs-section">[]</span>{10, 20, 50, 100, 200}) {
    ExecutorService <span class="hljs-attr">executor</span> = Executors.newFixedThreadPool(concurrency)<span class="hljs-comment">;</span>
    Semaphore <span class="hljs-attr">semaphore</span> = new Semaphore(<span class="hljs-number">20</span>)<span class="hljs-comment">; // é™åˆ¶æ•°æ®åº“å¹¶å‘</span>
    
    <span class="hljs-attr">start</span> = System.currentTimeMillis()<span class="hljs-comment">;</span>
    List&lt;CompletableFuture&lt;Void&gt;&gt; <span class="hljs-attr">futures</span> = userIds.stream()
        .map(userId -&gt; CompletableFuture.runAsync(() -&gt; {
            try {
                semaphore.acquire()<span class="hljs-comment">;</span>
                User <span class="hljs-attr">user</span> = queryUser(userId)<span class="hljs-comment">;</span>
                calculatePoints(user)<span class="hljs-comment">;</span>
            } finally {
                semaphore.release()<span class="hljs-comment">;</span>
            }
        }, executor))
        .collect(Collectors.toList())<span class="hljs-comment">;</span>
    
    CompletableFuture.allOf(futures.toArray(new CompletableFuture<span class="hljs-section">[0]</span>)).join()<span class="hljs-comment">;</span>
    long <span class="hljs-attr">parallelTime</span> = System.currentTimeMillis() - start<span class="hljs-comment">;</span>
    
    System.out.printf("Concurrency: %d, Time: %dms, Speedup: %.2fx%n",
        concurrency, parallelTime, (double)serialTime / parallelTime)<span class="hljs-comment">;</span>
    
    executor.shutdown()<span class="hljs-comment">;</span>
}
</code></pre>
<p>æµ‹è¯•ç»“æœï¼ˆå¤„ç† 1000 ä¸ªç”¨æˆ·ï¼‰ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">Serial:</span> <span class="hljs-string">10200ms</span>
<span class="hljs-attr">Concurrency:</span> <span class="hljs-number">10</span><span class="hljs-string">,</span> <span class="hljs-attr">Time:</span> <span class="hljs-string">1050ms,</span> <span class="hljs-attr">Speedup:</span> <span class="hljs-number">9.</span><span class="hljs-string">71x</span>
<span class="hljs-attr">Concurrency:</span> <span class="hljs-number">20</span><span class="hljs-string">,</span> <span class="hljs-attr">Time:</span> <span class="hljs-string">530ms,</span> <span class="hljs-attr">Speedup:</span> <span class="hljs-number">19.</span><span class="hljs-string">25x</span>
<span class="hljs-attr">Concurrency:</span> <span class="hljs-number">50</span><span class="hljs-string">,</span> <span class="hljs-attr">Time:</span> <span class="hljs-string">540ms,</span> <span class="hljs-attr">Speedup:</span> <span class="hljs-number">18.</span><span class="hljs-string">89x</span>
<span class="hljs-attr">Concurrency:</span> <span class="hljs-number">100</span><span class="hljs-string">,</span> <span class="hljs-attr">Time:</span> <span class="hljs-string">650ms,</span> <span class="hljs-attr">Speedup:</span> <span class="hljs-number">15.</span><span class="hljs-string">69x</span>
<span class="hljs-attr">Concurrency:</span> <span class="hljs-number">200</span><span class="hljs-string">,</span> <span class="hljs-attr">Time:</span> <span class="hljs-string">890ms,</span> <span class="hljs-attr">Speedup:</span> <span class="hljs-number">11.</span><span class="hljs-string">46x</span>
</code></pre>
<p>å¯ä»¥çœ‹åˆ°ï¼Œå¹¶å‘åº¦åœ¨ 20 æ—¶è¾¾åˆ°æœ€ä½³æ€§èƒ½ï¼Œè¿™æ­£å¥½ç­‰äºæ•°æ®åº“è¿æ¥æ± å¤§å°ã€‚å†å¾€ä¸ŠåŠ ï¼Œæ€§èƒ½åè€Œä¸‹é™äº†ã€‚</p>
<p>æˆ‘åˆå»æ‰äº†ä¿¡å·é‡é™åˆ¶ï¼Œè®©æ‰€æœ‰çº¿ç¨‹ç›´æ¥ç«äº‰è¿æ¥æ± ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">Concurrency:</span> <span class="hljs-number">50</span> <span class="hljs-string">(no</span> <span class="hljs-string">semaphore),</span> <span class="hljs-attr">Time:</span> <span class="hljs-string">1200ms</span>
<span class="hljs-attr">Concurrency:</span> <span class="hljs-number">100</span> <span class="hljs-string">(no</span> <span class="hljs-string">semaphore),</span> <span class="hljs-attr">Time:</span> <span class="hljs-string">1850ms</span>
</code></pre>
<p>æ€§èƒ½æ˜¾è‘—å˜å·®ï¼Œå› ä¸ºå¤§é‡çº¿ç¨‹é˜»å¡åœ¨ç­‰å¾…è¿æ¥ä¸Šã€‚</p>
<p>æœ€åæµ‹è¯•ä»»åŠ¡ç²’åº¦çš„å½±å“ã€‚æŠŠ 1000 ä¸ªä»»åŠ¡æ‰“åŒ…æˆä¸åŒæ‰¹æ¬¡ï¼š</p>
<pre><code class="hljs language-perl" lang="perl"><span class="hljs-number">1000</span> tasks individually: <span class="hljs-number">2100</span>ms
<span class="hljs-number">100</span> batches (<span class="hljs-number">10</span> tasks <span class="hljs-keyword">each</span>): <span class="hljs-number">180</span>ms
<span class="hljs-number">10</span> batches (<span class="hljs-number">100</span> tasks <span class="hljs-keyword">each</span>): <span class="hljs-number">95</span>ms
<span class="hljs-number">1</span> batch (<span class="hljs-number">1000</span> tasks): <span class="hljs-number">10200</span>ms (serial)
</code></pre>
<p>æ‰¹æ¬¡å¤§å°åœ¨ 50 åˆ° 100 ä¹‹é—´æ—¶æ•ˆæœæœ€å¥½ï¼Œæ—¢å‡å°‘äº†è°ƒåº¦å¼€é”€ï¼Œåˆä¿ç•™äº†å¹¶è¡Œåº¦ã€‚</p>
<h2 data-id="heading-7">å†™åœ¨æœ€å</h2>
<p>å¼€å¤´çš„äº‹æ•…ï¼Œåæ¥æ€ä¹ˆä¿®å¤çš„ï¼Ÿå…¶å®å¹¶ä¸å¤æ‚ï¼šä»»åŠ¡ç²’åº¦æ”¶ç²—ã€I/O å’Œ CPU åˆ†æ± ã€å¹¶å‘åº¦æŒ‰è¿æ¥æ± å®¹é‡å¡ä½ã€æ‰¹é‡æäº¤åŠ çª—å£ã€æ¯ä¸ªä»»åŠ¡åŠ è¶…æ—¶ä¸é™çº§ã€‚</p>
<p>CompletableFuture é€‚åˆç”¨åœ¨éœ€è¦å¹¶å‘è¡¨è¾¾ã€éœ€è¦ç»„åˆä¸ç¼–æ’çš„åœºæ™¯ã€‚</p>
<p>å¾æ—¥ä¸‰çœå¾èº«ã€‚</p>
<p>ä½¿ç”¨CompletableFutureæ—¶ï¼Œæœ€å¥½ä¹Ÿå…ˆæƒ³æ¸…æ¥šå‡ ä¸ªé—®é¢˜ï¼šå•ä»»åŠ¡æ˜¯å¦è¶³å¤Ÿé‡ã€å…±äº«èµ„æºæ˜¯å¦å……è¶³ã€ä¸‹æ¸¸æ˜¯å¦èƒ½æ‰¿å—å¹¶å‘ã€é˜Ÿåˆ—æ˜¯å¦æœ‰ä¸Šç•Œã€å¤±è´¥å’Œè¶…æ—¶æ˜¯å¦å¯æ§ã€‚</p>
<p>æœ‰äº†ç­”æ¡ˆï¼Œå†å»è½åœ°ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[MyBatisç±»å‹å¤„ç†æ¨¡å—è¯¦è§£]]></title>    <link>https://juejin.cn/post/7589908657682628658</link>    <guid>https://juejin.cn/post/7589908657682628658</guid>    <pubDate>2026-01-02T00:33:08.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589908657682628658" data-draft-id="7589903499599429686" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="MyBatisç±»å‹å¤„ç†æ¨¡å—è¯¦è§£"/> <meta itemprop="keywords" content="MyBatis,Java"/> <meta itemprop="datePublished" content="2026-01-02T00:33:08.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é›¨ä¸­é£˜è¡çš„è®°å¿†"/> <meta itemprop="url" content="https://juejin.cn/user/694547077666606"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            MyBatisç±»å‹å¤„ç†æ¨¡å—è¯¦è§£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/694547077666606/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é›¨ä¸­é£˜è¡çš„è®°å¿†
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-02T00:33:08.000Z" title="Fri Jan 02 2026 00:33:08 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æ·±å…¥ç†è§£MyBatisç±»å‹è½¬æ¢æœºåˆ¶ï¼ŒæŒæ¡Javaä¸JDBCä¹‹é—´çš„æ¡¥æ¢</h2>
<h2 data-id="heading-1">ä¸€ã€MyBatisæ•´ä½“æ¶æ„ä¸ç±»å‹å¤„ç†æ¨¡å—</h2>
<p>åœ¨æ·±å…¥ç±»å‹å¤„ç†æ¨¡å—ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆäº†è§£MyBatisçš„æ•´ä½“æ¶æ„ï¼Œä»¥åŠç±»å‹å¤„ç†æ¨¡å—åœ¨å…¶ä¸­çš„é‡è¦åœ°ä½ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/aa3fb0c4d5a7446ca23a602eccd2c6f6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767918788&amp;x-signature=wtUr2ytFVsbv4eNXpEOp1UhkPnA%3D" alt="" loading="lazy"/></p>
<p>ä»æ¶æ„å›¾å¯ä»¥çœ‹å‡ºï¼ŒMyBatisé‡‡ç”¨äº†åˆ†å±‚æ¶æ„è®¾è®¡ï¼Œè€Œç±»å‹å¤„ç†æ¨¡å—ï¼ˆTypeHandlerï¼‰ä½äºåŸºç¡€æ”¯æ’‘å±‚ï¼Œæ˜¯è¿æ¥Javaç±»å‹ä¸JDBCç±»å‹çš„æ¡¥æ¢ã€‚å®ƒè´Ÿè´£åœ¨SQLæ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œå°†Javaå¯¹è±¡å‚æ•°è½¬æ¢ä¸ºJDBCèƒ½å¤Ÿè¯†åˆ«çš„å‚æ•°ç±»å‹ï¼Œä»¥åŠå°†ResultSetä¸­çš„æ•°æ®è½¬æ¢ä¸ºJavaå¯¹è±¡ã€‚</p>
<h2 data-id="heading-2">å‹å¤„ç†æ¨¡å—çš„æ ¸å¿ƒèŒè´£</h2>
<p>ç±»å‹å¤„ç†æ¨¡å—ä¸»è¦æ‰¿æ‹…ä»¥ä¸‹æ ¸å¿ƒèŒè´£ï¼š</p>
<pre><code class="hljs language-sql" lang="sql">âœ… Javaç±»å‹ä¸JDBCç±»å‹ç›¸äº’è½¬æ¢ <span class="hljs-operator">-</span> å®ç°åŒå‘ç±»å‹è½¬æ¢
âœ… å‚æ•°è®¾ç½®æ—¶çš„ç±»å‹è½¬æ¢ <span class="hljs-operator">-</span> å°†Javaå‚æ•°è½¬æ¢ä¸ºJDBCå‚æ•°
âœ… ç»“æœé›†è·å–æ—¶çš„ç±»å‹è½¬æ¢ <span class="hljs-operator">-</span> å°†JDBCç»“æœè½¬æ¢ä¸ºJavaå¯¹è±¡
âœ… <span class="hljs-keyword">Null</span>å€¼å¤„ç† <span class="hljs-operator">-</span> å¤„ç†Javaç©ºå€¼ä¸JDBC <span class="hljs-keyword">NULL</span>çš„è½¬æ¢
âœ… ç±»å‹æ³¨å†Œä¸ç®¡ç† <span class="hljs-operator">-</span> ç»´æŠ¤Javaç±»å‹ä¸TypeHandlerçš„æ˜ å°„å…³ç³»
</code></pre>
<h2 data-id="heading-3">ä¸ºä»€ä¹ˆéœ€è¦TypeHandlerï¼Ÿ</h2>
<p>åœ¨Javaåº”ç”¨ç¨‹åºå’Œæ•°æ®åº“ä¹‹é—´ï¼Œå­˜åœ¨ç€ç±»å‹ç³»ç»Ÿçš„å·®å¼‚ï¼š</p>



































<table><thead><tr><th>Javaç±»å‹</th><th>JDBCç±»å‹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>String</td><td>VARCHAR, CHAR</td><td>å­—ç¬¦ä¸²ç±»å‹</td></tr><tr><td>Integer</td><td>INTEGER</td><td>æ•´æ•°ç±»å‹</td></tr><tr><td>Long</td><td>BIGINT</td><td>é•¿æ•´æ•°ç±»å‹</td></tr><tr><td>Date</td><td>TIMESTAMP</td><td>æ—¥æœŸæ—¶é—´ç±»å‹</td></tr><tr><td>BigDecimal</td><td>NUMERIC</td><td>ç²¾ç¡®æ•°å€¼ç±»å‹</td></tr></tbody></table>
<p>TypeHandlerçš„æ ¸å¿ƒä½œç”¨å°±æ˜¯è§£å†³è¿™äº›ç±»å‹ä¹‹é—´çš„æ˜ å°„å’Œè½¬æ¢é—®é¢˜ã€‚</p>
<h2 data-id="heading-4">äºŒã€TypeHandlerä½“ç³»æ¶æ„</h2>
<p>TypeHandleré‡‡ç”¨äº†æ³›å‹æ¥å£è®¾è®¡ï¼Œæ”¯æŒå„ç§ç±»å‹çš„æ‰©å±•ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3ad51ae683ef4acaa902418b69e1a75b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767918788&amp;x-signature=SzXgf14IkE6foO9Sa0ZNOmOtSb8%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-5">TypeHandleræ¥å£</h2>
<p>TypeHandleræ˜¯ç±»å‹è½¬æ¢çš„æ ¸å¿ƒæ¥å£ï¼Œå®šä¹‰äº†ç±»å‹è½¬æ¢çš„åŸºæœ¬æ–¹æ³•ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">TypeHandler</span>&lt;T&gt; {
    <span class="hljs-comment">// è®¾ç½®PreparedStatementå‚æ•°ï¼ˆJava â†’ JDBCï¼‰</span>
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">setParameter</span><span class="hljs-params">(PreparedStatement ps, <span class="hljs-type">int</span> i, 
                     T parameter, JdbcType jdbcType)</span> 
                     <span class="hljs-keyword">throws</span> SQLException;

    <span class="hljs-comment">// è·å–ResultSetç»“æœï¼ˆJDBC â†’ Javaï¼ŒæŒ‰åˆ—åï¼‰</span>
    T <span class="hljs-title function_">getResult</span><span class="hljs-params">(ResultSet rs, String columnName)</span> 
               <span class="hljs-keyword">throws</span> SQLException;

    <span class="hljs-comment">// è·å–ResultSetç»“æœï¼ˆJDBC â†’ Javaï¼ŒæŒ‰åˆ—ç´¢å¼•ï¼‰</span>
    T <span class="hljs-title function_">getResult</span><span class="hljs-params">(ResultSet rs, <span class="hljs-type">int</span> columnIndex)</span> 
               <span class="hljs-keyword">throws</span> SQLException;

    <span class="hljs-comment">// è·å–CallableStatementç»“æœï¼ˆå­˜å‚¨è¿‡ç¨‹ï¼‰</span>
    T <span class="hljs-title function_">getResult</span><span class="hljs-params">(CallableStatement cs, <span class="hljs-type">int</span> columnIndex)</span> 
               <span class="hljs-keyword">throws</span> SQLException;
}
</code></pre>
<h2 data-id="heading-6">BaseTypeHandleræŠ½è±¡ç±»</h2>
<p>ä¸ºäº†ç®€åŒ–TypeHandlerçš„å®ç°ï¼ŒMyBatisæä¾›äº†BaseTypeHandleræŠ½è±¡ç±»ï¼Œå®ƒå¸®æˆ‘ä»¬å¤„ç†äº†Nullå€¼æ£€æŸ¥ç­‰é€šç”¨é€»è¾‘ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BaseTypeHandler</span>&lt;T&gt; 
    <span class="hljs-keyword">implements</span> <span class="hljs-title class_">TypeHandler</span>&lt;T&gt; {

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setParameter</span><span class="hljs-params">(PreparedStatement ps, <span class="hljs-type">int</span> i, 
                            T parameter, JdbcType jdbcType)</span> 
                            <span class="hljs-keyword">throws</span> SQLException {
        <span class="hljs-keyword">if</span> (parameter == <span class="hljs-literal">null</span>) {
            <span class="hljs-comment">// å¤„ç†Nullå€¼</span>
            ps.setNull(i, jdbcType.TYPE_CODE);
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-comment">// è®¾ç½®éç©ºå‚æ•°ï¼Œç”±å­ç±»å®ç°</span>
            setNonNullParameter(ps, i, parameter, jdbcType);
        }
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> T <span class="hljs-title function_">getResult</span><span class="hljs-params">(ResultSet rs, String columnName)</span> 
                      <span class="hljs-keyword">throws</span> SQLException {
        <span class="hljs-type">T</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> getNullableResult(rs, columnName);
        <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦ä¸ºnull</span>
        <span class="hljs-keyword">return</span> rs.wasNull() ? <span class="hljs-literal">null</span> : result;
    }

    <span class="hljs-comment">// æŠ½è±¡æ–¹æ³•ï¼Œç”±å­ç±»å®ç°</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setNonNullParameter</span><span class="hljs-params">(
        PreparedStatement ps, <span class="hljs-type">int</span> i, 
        T parameter, JdbcType jdbcType)</span> 
        <span class="hljs-keyword">throws</span> SQLException;

    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">abstract</span> T <span class="hljs-title function_">getNullableResult</span><span class="hljs-params">(
        ResultSet rs, String columnName)</span> 
        <span class="hljs-keyword">throws</span> SQLException;
}
</code></pre>
<h2 data-id="heading-7">TypeHandlerç»§æ‰¿ä½“ç³»</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/26bad2f4c5c04afb89f4562dafd21504~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767918788&amp;x-signature=seTQVfs5hUvlRob5Vz3jihj5V5Q%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-8">ä¸‰ã€ç±»å‹è½¬æ¢åŒå‘æµç¨‹</h2>
<p>TypeHandlerå®ç°äº†Javaç±»å‹ä¸JDBCç±»å‹ä¹‹é—´çš„åŒå‘è½¬æ¢ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6f9997be96a74b76859dc8ce2cc2a2e5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767918788&amp;x-signature=R66jf4fAEP4quOgUYQxhR1ryAzk%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-9">Java â†’ JDBC è½¬æ¢æµç¨‹</h2>
<p>å½“æ‰§è¡ŒSQLè¯­å¥æ—¶ï¼Œéœ€è¦å°†Javaå‚æ•°è½¬æ¢ä¸ºJDBCå‚æ•°ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">// 1. ParameterHandlerè·å–å‚æ•°å€¼
Object <span class="hljs-attr">value</span> = getParameterValue(
    parameterObject, parameterMapping)<span class="hljs-comment">;</span>

// 2. è·å–å¯¹åº”çš„TypeHandler
TypeHandler&lt;?&gt; <span class="hljs-attr">typeHandler</span> = 
    parameterMapping.getTypeHandler()<span class="hljs-comment">;</span>

// 3. è°ƒç”¨setParameterè®¾ç½®å‚æ•°
typeHandler.setParameter(ps, i + 1, value, jdbcType)<span class="hljs-comment">;</span>
</code></pre>
<h2 data-id="heading-10">JDBC â†’ Java è½¬æ¢æµç¨‹</h2>
<p>å½“ä»ResultSetè·å–ç»“æœæ—¶ï¼Œéœ€è¦å°†JDBCæ•°æ®è½¬æ¢ä¸ºJavaå¯¹è±¡ï¼š</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// 1. ResultSetHandlerå¤„ç†ResultSet</span>
while (resultSet.next()) {
    <span class="hljs-comment">// 2. æ ¹æ®ResultMappingè·å–TypeHandler</span>
    TypeHandler&lt;?&gt; typeHandler = 
        resultMapping<span class="hljs-selector-class">.getTypeHandler</span>();

    <span class="hljs-comment">// 3. è°ƒç”¨getResultè·å–ç»“æœ</span>
    <span class="hljs-selector-tag">Object</span> value = typeHandler<span class="hljs-selector-class">.getResult</span>(
        resultSet, column);

    <span class="hljs-comment">// 4. è®¾ç½®åˆ°ç›®æ ‡å¯¹è±¡</span>
    metaObject<span class="hljs-selector-class">.setValue</span>(property, value);
}
</code></pre>
<h2 data-id="heading-11">å››ã€å‚æ•°è®¾ç½®æ—¶çš„ç±»å‹è½¬æ¢</h2>
<p>å‚æ•°è®¾ç½®æ˜¯Javaç±»å‹å‘JDBCç±»å‹è½¬æ¢çš„è¿‡ç¨‹ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7a139f1c5f914effbc2d910d4b21482f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767918788&amp;x-signature=JQ5i9FSDz4Y6XO951gOfIG5S5vg%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-12">åŸºæœ¬ç±»å‹è½¬æ¢ç¤ºä¾‹</h2>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">StringTypeHandler</span> 
    <span class="hljs-keyword">extends</span> <span class="hljs-title class_">BaseTypeHandler</span>&lt;String&gt; {

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setNonNullParameter</span><span class="hljs-params">(
        PreparedStatement ps, <span class="hljs-type">int</span> i, 
        String parameter, JdbcType jdbcType)</span> 
        <span class="hljs-keyword">throws</span> SQLException {
        <span class="hljs-comment">// String â†’ VARCHAR</span>
        ps.setString(i, parameter);
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getNullableResult</span><span class="hljs-params">(
        ResultSet rs, String columnName)</span> 
        <span class="hljs-keyword">throws</span> SQLException {
        <span class="hljs-comment">// VARCHAR â†’ String</span>
        <span class="hljs-keyword">return</span> rs.getString(columnName);
    }
}
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LongTypeHandler</span> 
    <span class="hljs-keyword">extends</span> <span class="hljs-title class_">BaseTypeHandler</span>&lt;Long&gt; {

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setNonNullParameter</span><span class="hljs-params">(
        PreparedStatement ps, <span class="hljs-type">int</span> i, 
        Long parameter, JdbcType jdbcType)</span> 
        <span class="hljs-keyword">throws</span> SQLException {
        <span class="hljs-comment">// Long â†’ BIGINT</span>
        ps.setLong(i, parameter);
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> Long <span class="hljs-title function_">getNullableResult</span><span class="hljs-params">(
        ResultSet rs, String columnName)</span> 
        <span class="hljs-keyword">throws</span> SQLException {
        <span class="hljs-comment">// BIGINT â†’ Long</span>
        <span class="hljs-type">long</span> <span class="hljs-variable">value</span> <span class="hljs-operator">=</span> rs.getLong(columnName);
        <span class="hljs-comment">// âš ï¸ å…³é”®ï¼šæ£€æŸ¥æ˜¯å¦ä¸ºNULL</span>
        <span class="hljs-keyword">return</span> value == <span class="hljs-number">0</span> &amp;&amp; rs.wasNull() ? <span class="hljs-literal">null</span> : value;
    }
}
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DateTypeHandler</span> 
    <span class="hljs-keyword">extends</span> <span class="hljs-title class_">BaseTypeHandler</span>&lt;Date&gt; {

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setNonNullParameter</span><span class="hljs-params">(
        PreparedStatement ps, <span class="hljs-type">int</span> i, 
        Date parameter, JdbcType jdbcType)</span> 
        <span class="hljs-keyword">throws</span> SQLException {
        <span class="hljs-comment">// Date â†’ Timestamp</span>
        ps.setTimestamp(i, 
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">Timestamp</span>(parameter.getTime()));
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> Date <span class="hljs-title function_">getNullableResult</span><span class="hljs-params">(
        ResultSet rs, String columnName)</span> 
        <span class="hljs-keyword">throws</span> SQLException {
        <span class="hljs-comment">// Timestamp â†’ Date</span>
        <span class="hljs-type">Timestamp</span> <span class="hljs-variable">timestamp</span> <span class="hljs-operator">=</span> rs.getTimestamp(columnName);
        <span class="hljs-keyword">return</span> timestamp == <span class="hljs-literal">null</span> ? <span class="hljs-literal">null</span> : 
               <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(timestamp.getTime());
    }
}
</code></pre>
<h2 data-id="heading-13">Nullå€¼å¤„ç†</h2>
<p>Nullå€¼å¤„ç†æ˜¯å‚æ•°è®¾ç½®ä¸­çš„é‡è¦ç¯èŠ‚ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- åœºæ™¯1ï¼šæ˜ç¡®çš„jdbcType --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">insert</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"insertUser"</span>&gt;</span>
    INSERT INTO t_user (name, email)
    VALUES (
        #{name, jdbcType=VARCHAR}, 
        #{email, jdbcType=VARCHAR}
    )
<span class="hljs-tag">&lt;/<span class="hljs-name">insert</span>&gt;</span>

<span class="hljs-comment">&lt;!-- åœºæ™¯2ï¼šå…¨å±€é…ç½®Nullçš„jdbcType --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">settings</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">setting</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"jdbcTypeForNull"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"NULL"</span>/&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">settings</span>&gt;</span>
</code></pre>
<p>é‡è¦æç¤ºï¼šæœªæŒ‡å®šjdbcTypeæ—¶ï¼Œä¼ å…¥nullå‚æ•°ä¼šæŠ›å‡ºå¼‚å¸¸ï¼</p>
<h2 data-id="heading-14">äº”ã€ç»“æœé›†è·å–æ—¶çš„ç±»å‹è½¬æ¢</h2>
<p>ç»“æœé›†è·å–æ˜¯JDBCç±»å‹å‘Javaç±»å‹è½¬æ¢çš„è¿‡ç¨‹ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d8f85705b7994c8da2d333c98536eced~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767918788&amp;x-signature=a4y9WD%2B28op%2FvBRBXoVesQBIlhM%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-15">ResultSetç»“æœè·å–æµç¨‹</h2>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// éå†ResultSetçš„å®Œæ•´æµç¨‹</span>
while (resultSet.next()) {
    for (ResultMapping mapping : 
         resultMap.getPropertyResultMappings()) {

        <span class="hljs-comment">// è·å–åˆ—å</span>
        String column = mapping<span class="hljs-selector-class">.getColumn</span>();

        <span class="hljs-comment">// è·å–TypeHandler</span>
        TypeHandler&lt;?&gt; handler = 
            mapping<span class="hljs-selector-class">.getTypeHandler</span>();

        <span class="hljs-comment">// è·å–ç»“æœå€¼</span>
        <span class="hljs-selector-tag">Object</span> value = handler<span class="hljs-selector-class">.getResult</span>(
            resultSet, column);

        <span class="hljs-comment">// è®¾ç½®åˆ°ç›®æ ‡å¯¹è±¡</span>
        metaObject<span class="hljs-selector-class">.setValue</span>(
            mapping.getProperty(), value);
    }
}
</code></pre>
<h2 data-id="heading-16">ä¸‰ç§getResultæ–¹å¼</h2>
<p>TypeHandleræä¾›äº†ä¸‰ç§è·å–ç»“æœçš„æ–¹å¼ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">@<span class="hljs-function">Override
<span class="hljs-keyword">public</span> <span class="hljs-type">String</span> <span class="hljs-title">getNullableResult</span><span class="hljs-params">(
    ResultSet rs, <span class="hljs-type">String</span> columnName)</span> 
    throws SQLException </span>{
    <span class="hljs-keyword">return</span> rs.<span class="hljs-built_in">getString</span>(columnName);
}
</code></pre>
<p>ä½¿ç”¨åœºæ™¯ï¼š</p>
<pre><code class="hljs language-java" lang="java">&lt;result column=<span class="hljs-string">"user_name"</span> property=<span class="hljs-string">"userName"</span>/&gt;
<span class="hljs-meta">@Override</span>
<span class="hljs-keyword">public</span> String <span class="hljs-title function_">getNullableResult</span><span class="hljs-params">(
    ResultSet rs, <span class="hljs-type">int</span> columnIndex)</span> 
    <span class="hljs-keyword">throws</span> SQLException {
    <span class="hljs-keyword">return</span> rs.getString(columnIndex);
}
</code></pre>
<p>ä½¿ç”¨åœºæ™¯ï¼šè‡ªåŠ¨æ˜ å°„æˆ–éœ€è¦æŒ‰ç´¢å¼•è·å–æ—¶</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Override</span>
<span class="hljs-keyword">public</span> String <span class="hljs-title function_">getNullableResult</span><span class="hljs-params">(
    CallableStatement cs, <span class="hljs-type">int</span> columnIndex)</span> 
    <span class="hljs-keyword">throws</span> SQLException {
    <span class="hljs-keyword">return</span> cs.getString(columnIndex);
}
</code></pre>
<p>ä½¿ç”¨åœºæ™¯ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-operator">&lt;</span><span class="hljs-keyword">select</span> id<span class="hljs-operator">=</span>"callProcedure" statementType<span class="hljs-operator">=</span>"CALLABLE"<span class="hljs-operator">&gt;</span>
    {<span class="hljs-keyword">call</span> get_user_info(
        #{userId, mode<span class="hljs-operator">=</span><span class="hljs-keyword">IN</span>, jdbcType<span class="hljs-operator">=</span><span class="hljs-type">BIGINT</span>},
        #{userName, mode<span class="hljs-operator">=</span><span class="hljs-keyword">OUT</span>, jdbcType<span class="hljs-operator">=</span><span class="hljs-type">VARCHAR</span>}
    )}
<span class="hljs-operator">&lt;</span><span class="hljs-operator">/</span><span class="hljs-keyword">select</span><span class="hljs-operator">&gt;</span>
</code></pre>
<h2 data-id="heading-17">wasNull()çš„é‡è¦æ€§</h2>
<p>åœ¨ç±»å‹è½¬æ¢ä¸­ï¼ŒwasNull()æ–¹æ³•éå¸¸å…³é”®ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Override</span>
<span class="hljs-keyword">public</span> Long <span class="hljs-title function_">getNullableResult</span><span class="hljs-params">(
    ResultSet rs, String columnName)</span> 
    <span class="hljs-keyword">throws</span> SQLException {

    <span class="hljs-type">long</span> <span class="hljs-variable">value</span> <span class="hljs-operator">=</span> rs.getLong(columnName);
    <span class="hljs-comment">// âš ï¸ å¦‚æœæ•°æ®åº“æ˜¯NULLï¼ŒgetLong()è¿”å›0</span>

    <span class="hljs-comment">// âœ… å¿…é¡»æ£€æŸ¥wasNull()åŒºåˆ†çœŸå®çš„0å’ŒNULL</span>
    <span class="hljs-keyword">return</span> value == <span class="hljs-number">0</span> &amp;&amp; rs.wasNull() ? <span class="hljs-literal">null</span> : value;
}
</code></pre>
<h2 data-id="heading-18">å…­ã€TypeHandleræ³¨å†Œæœºåˆ¶</h2>
<p>TypeHandlerRegistryè´Ÿè´£ç®¡ç†æ‰€æœ‰TypeHandlerçš„æ³¨å†Œå’ŒæŸ¥æ‰¾ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/089b9e45490544f1bfe3881634b176d3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767918788&amp;x-signature=ECN3JC3i9YWAkTLsa5To5ZUoe8Y%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-19">TypeHandlerRegistryç»“æ„</h2>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TypeHandlerRegistry</span> {
    <span class="hljs-comment">// JDBCç±»å‹ â†’ TypeHandler</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Map&lt;JdbcType, TypeHandler&lt;?&gt;&gt; 
        jdbcTypeHandlerMap = <span class="hljs-keyword">new</span> EnumMap&lt;&gt;(JdbcType.<span class="hljs-keyword">class</span>);

    <span class="hljs-comment">// Javaç±»å‹ â†’ (JDBCç±»å‹ â†’ TypeHandler)</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Map&lt;Type, Map&lt;JdbcType, TypeHandler&lt;?&gt;&gt;&gt; 
        typeHandlerMap = <span class="hljs-keyword">new</span> HashMap&lt;&gt;();

    <span class="hljs-comment">// Javaç±»å‹ â†’ é»˜è®¤TypeHandler</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Map&lt;Class&lt;?&gt;, TypeHandler&lt;?&gt;&gt; 
        allTypeHandlersMap = <span class="hljs-keyword">new</span> HashMap&lt;&gt;();

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">TypeHandlerRegistry</span><span class="hljs-params">()</span></span>{
        <span class="hljs-comment">// æ³¨å†Œæ‰€æœ‰å†…ç½®TypeHandler</span>
        <span class="hljs-built_in">register</span>(Boolean.<span class="hljs-keyword">class</span>, <span class="hljs-keyword">new</span> <span class="hljs-built_in">BooleanTypeHandler</span>());
        <span class="hljs-built_in">register</span>(Integer.<span class="hljs-keyword">class</span>, <span class="hljs-keyword">new</span> <span class="hljs-built_in">IntegerTypeHandler</span>());
        <span class="hljs-built_in">register</span>(Long.<span class="hljs-keyword">class</span>, <span class="hljs-keyword">new</span> <span class="hljs-built_in">LongTypeHandler</span>());
        <span class="hljs-built_in">register</span>(<span class="hljs-type">String</span>.<span class="hljs-keyword">class</span>, <span class="hljs-keyword">new</span> <span class="hljs-built_in">StringTypeHandler</span>());
        <span class="hljs-built_in">register</span>(Date.<span class="hljs-keyword">class</span>, <span class="hljs-keyword">new</span> <span class="hljs-built_in">DateTypeHandler</span>());
        <span class="hljs-comment">// ... æ›´å¤šæ³¨å†Œ</span>
    }
}
</code></pre>
<h2 data-id="heading-20">æ³¨å†ŒTypeHandlerçš„å››ç§æ–¹å¼</h2>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">public</span> &lt;T&gt; <span class="hljs-built_in">void</span> <span class="hljs-title function_">register</span>(<span class="hljs-params">
    Class&lt;T&gt; javaType, 
    TypeHandler&lt;? <span class="hljs-keyword">extends</span> T&gt; typeHandler</span>) {
    <span class="hljs-title function_">register</span>((<span class="hljs-title class_">Type</span>) javaType, typeHandler);
}
<span class="hljs-keyword">public</span> &lt;T&gt; <span class="hljs-built_in">void</span> <span class="hljs-title function_">register</span>(<span class="hljs-params">
    Class&lt;T&gt; <span class="hljs-keyword">type</span>, 
    JdbcType jdbcType, 
    TypeHandler&lt;? <span class="hljs-keyword">extends</span> T&gt; typeHandler</span>) {
    <span class="hljs-title function_">register</span>((<span class="hljs-title class_">Type</span>) <span class="hljs-keyword">type</span>, jdbcType, typeHandler);
}
<span class="hljs-keyword">public</span> &lt;T&gt; <span class="hljs-built_in">void</span> <span class="hljs-title function_">register</span>(<span class="hljs-params">
    TypeReference&lt;T&gt; javaTypeReference, 
    TypeHandler&lt;? <span class="hljs-keyword">extends</span> T&gt; typeHandler</span>) {
    <span class="hljs-title function_">register</span>(javaTypeReference.<span class="hljs-title function_">getRawType</span>(), 
             typeHandler);
}
<span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">register</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> packageName</span>) {
    <span class="hljs-title class_">ResolverUtil</span>&lt;<span class="hljs-title class_">Class</span>&lt;?&gt;&gt; resolverUtil = 
        <span class="hljs-keyword">new</span> <span class="hljs-title class_">ResolverUtil</span>&lt;&gt;();
    resolverUtil.<span class="hljs-title function_">find</span>(
        <span class="hljs-keyword">new</span> <span class="hljs-title class_">ResolverUtil</span>.<span class="hljs-title class_">IsA</span>(<span class="hljs-title class_">TypeHandler</span>.<span class="hljs-property">class</span>), 
        packageName);

    <span class="hljs-title class_">Set</span>&lt;<span class="hljs-title class_">Class</span>&lt;? <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Class</span>&lt;?&gt;&gt;&gt; handlerSet = 
        resolverUtil.<span class="hljs-title function_">getClasses</span>();

    <span class="hljs-keyword">for</span> (<span class="hljs-title class_">Class</span>&lt;?&gt; <span class="hljs-keyword">type</span> : handlerSet) {
        <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">type</span>.<span class="hljs-title function_">isAnonymousClass</span>() &amp;&amp; 
            !<span class="hljs-keyword">type</span>.<span class="hljs-title function_">isInterface</span>() &amp;&amp; 
            !<span class="hljs-title class_">Modifier</span>.<span class="hljs-title function_">isAbstract</span>(<span class="hljs-keyword">type</span>.<span class="hljs-title function_">getModifiers</span>())) {
            <span class="hljs-title function_">register</span>(<span class="hljs-keyword">type</span>);
        }
    }
}
</code></pre>
<h2 data-id="heading-21">æŸ¥æ‰¾TypeHandler</h2>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// æ ¹æ®Javaç±»å‹å’ŒJDBCç±»å‹æŸ¥æ‰¾</span>
<span class="hljs-keyword">public</span> &lt;T&gt; <span class="hljs-title class_">TypeHandler</span>&lt;T&gt; <span class="hljs-title function_">getTypeHandler</span>(<span class="hljs-params">
    Class&lt;T&gt; <span class="hljs-keyword">type</span>, JdbcType jdbcType</span>) {

    <span class="hljs-comment">// 1. ä»Javaç±»å‹æ˜ å°„ä¸­æŸ¥æ‰¾</span>
    <span class="hljs-title class_">Map</span>&lt;<span class="hljs-title class_">JdbcType</span>, <span class="hljs-title class_">TypeHandler</span>&lt;?&gt;&gt; jdbcHandlerMap = 
        typeHandlerMap.<span class="hljs-title function_">get</span>(<span class="hljs-keyword">type</span>);

    <span class="hljs-keyword">if</span> (jdbcHandlerMap != <span class="hljs-literal">null</span>) {
        <span class="hljs-title class_">TypeHandler</span>&lt;?&gt; handler = 
            jdbcHandlerMap.<span class="hljs-title function_">get</span>(jdbcType);
        <span class="hljs-keyword">if</span> (handler != <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">return</span> (<span class="hljs-title class_">TypeHandler</span>&lt;T&gt;) handler;
        }
    }

    <span class="hljs-comment">// 2. æŸ¥æ‰¾é»˜è®¤TypeHandler</span>
    <span class="hljs-keyword">return</span> (<span class="hljs-title class_">TypeHandler</span>&lt;T&gt;) <span class="hljs-title function_">getTypeHandler</span>((<span class="hljs-title class_">Type</span>) <span class="hljs-keyword">type</span>);
}
</code></pre>
<h2 data-id="heading-22">ä¸ƒã€è‡ªå®šä¹‰TypeHandler</h2>
<p>å½“å†…ç½®TypeHandleræ— æ³•æ»¡è¶³éœ€æ±‚æ—¶ï¼Œå¯ä»¥è‡ªå®šä¹‰TypeHandlerã€‚</p>
<h2 data-id="heading-23">å®ç°TypeHandleræ¥å£</h2>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªJSONç±»å‹å¤„ç†å™¨çš„å®Œæ•´ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@MappedTypes(List.class)</span>
<span class="hljs-meta">@MappedJdbcTypes(JdbcType.VARCHAR)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">JsonListTypeHandler</span> 
    <span class="hljs-keyword">extends</span> <span class="hljs-title class_">BaseTypeHandler</span>&lt;List&lt;String&gt;&gt; {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">Gson</span> <span class="hljs-variable">GSON</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Gson</span>();
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">Type</span> <span class="hljs-variable">LIST_TYPE</span> <span class="hljs-operator">=</span> 
        <span class="hljs-keyword">new</span> <span class="hljs-title class_">TypeToken</span>&lt;List&lt;String&gt;&gt;(){}.getType();

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setNonNullParameter</span><span class="hljs-params">(
        PreparedStatement ps, <span class="hljs-type">int</span> i, 
        List&lt;String&gt; parameter, JdbcType jdbcType)</span> 
        <span class="hljs-keyword">throws</span> SQLException {
        <span class="hljs-comment">// List&lt;String&gt; â†’ JSONå­—ç¬¦ä¸²</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">json</span> <span class="hljs-operator">=</span> GSON.toJson(parameter);
        ps.setString(i, json);
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> List&lt;String&gt; <span class="hljs-title function_">getNullableResult</span><span class="hljs-params">(
        ResultSet rs, String columnName)</span> 
        <span class="hljs-keyword">throws</span> SQLException {
        <span class="hljs-comment">// JSONå­—ç¬¦ä¸² â†’ List&lt;String&gt;</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">json</span> <span class="hljs-operator">=</span> rs.getString(columnName);
        <span class="hljs-keyword">return</span> parseJson(json);
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> List&lt;String&gt; <span class="hljs-title function_">getNullableResult</span><span class="hljs-params">(
        ResultSet rs, <span class="hljs-type">int</span> columnIndex)</span> 
        <span class="hljs-keyword">throws</span> SQLException {
        <span class="hljs-type">String</span> <span class="hljs-variable">json</span> <span class="hljs-operator">=</span> rs.getString(columnIndex);
        <span class="hljs-keyword">return</span> parseJson(json);
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> List&lt;String&gt; <span class="hljs-title function_">getNullableResult</span><span class="hljs-params">(
        CallableStatement cs, <span class="hljs-type">int</span> columnIndex)</span> 
        <span class="hljs-keyword">throws</span> SQLException {
        <span class="hljs-type">String</span> <span class="hljs-variable">json</span> <span class="hljs-operator">=</span> cs.getString(columnIndex);
        <span class="hljs-keyword">return</span> parseJson(json);
    }

    <span class="hljs-keyword">private</span> List&lt;String&gt; <span class="hljs-title function_">parseJson</span><span class="hljs-params">(String json)</span> {
        <span class="hljs-keyword">if</span> (json == <span class="hljs-literal">null</span> || json.trim().isEmpty()) {
            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
        }
        <span class="hljs-keyword">return</span> GSON.fromJson(json, LIST_TYPE);
    }
}
</code></pre>
<h2 data-id="heading-24">æšä¸¾ç±»å‹å¤„ç†</h2>
<p>MyBatisæä¾›äº†ä¸¤ç§æšä¸¾ç±»å‹å¤„ç†å™¨ï¼š</p>
<pre><code class="hljs language-scala" lang="scala">public <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">EnumTypeHandler&lt;E</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Enum&lt;E&gt;&gt;</span> </span>
    <span class="hljs-keyword">extends</span> <span class="hljs-type">BaseTypeHandler</span>&lt;<span class="hljs-type">E</span>&gt; {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">Class</span>&lt;<span class="hljs-type">E</span>&gt; <span class="hljs-class"><span class="hljs-keyword">type</span></span>;

    <span class="hljs-meta">@Override</span>
    public void setNonNullParameter(
        <span class="hljs-type">PreparedStatement</span> ps, int i, 
        <span class="hljs-type">E</span> parameter, <span class="hljs-type">JdbcType</span> jdbcType) 
        <span class="hljs-keyword">throws</span> <span class="hljs-type">SQLException</span> {
        <span class="hljs-comment">// Enum â†’ name (VARCHAR)</span>
        ps.setString(i, parameter.name());
    }

    <span class="hljs-meta">@Override</span>
    public <span class="hljs-type">E</span> getNullableResult(
        <span class="hljs-type">ResultSet</span> rs, <span class="hljs-type">String</span> columnName) 
        <span class="hljs-keyword">throws</span> <span class="hljs-type">SQLException</span> {
        <span class="hljs-comment">// name â†’ Enum</span>
        <span class="hljs-type">String</span> name = rs.getString(columnName);
        <span class="hljs-keyword">return</span> name == <span class="hljs-literal">null</span> ? <span class="hljs-literal">null</span> : 
               <span class="hljs-type">Enum</span>.valueOf(<span class="hljs-class"><span class="hljs-keyword">type</span>, <span class="hljs-title">name</span>)</span>;
    }
}
public <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">EnumOrdinalTypeHandler&lt;E</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Enum&lt;E&gt;&gt;</span> </span>
    <span class="hljs-keyword">extends</span> <span class="hljs-type">BaseTypeHandler</span>&lt;<span class="hljs-type">E</span>&gt; {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">Class</span>&lt;<span class="hljs-type">E</span>&gt; <span class="hljs-class"><span class="hljs-keyword">type</span></span>;

    <span class="hljs-meta">@Override</span>
    public void setNonNullParameter(
        <span class="hljs-type">PreparedStatement</span> ps, int i, 
        <span class="hljs-type">E</span> parameter, <span class="hljs-type">JdbcType</span> jdbcType) 
        <span class="hljs-keyword">throws</span> <span class="hljs-type">SQLException</span> {
        <span class="hljs-comment">// Enum â†’ ordinal (INTEGER)</span>
        ps.setInt(i, parameter.ordinal());
    }

    <span class="hljs-meta">@Override</span>
    public <span class="hljs-type">E</span> getNullableResult(
        <span class="hljs-type">ResultSet</span> rs, <span class="hljs-type">String</span> columnName) 
        <span class="hljs-keyword">throws</span> <span class="hljs-type">SQLException</span> {
        <span class="hljs-comment">// ordinal â†’ Enum</span>
        int ordinal = rs.getInt(columnName);
        <span class="hljs-keyword">if</span> (ordinal == <span class="hljs-number">0</span> &amp;&amp; rs.wasNull()) {
            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
        }
        <span class="hljs-type">E</span>[] enums = <span class="hljs-keyword">type</span>.getEnumConstants();
        <span class="hljs-keyword">return</span> enums[ordinal];
    }
}
</code></pre>
<h2 data-id="heading-25">æ³¨å†Œè‡ªå®šä¹‰TypeHandlerçš„ä¸‰ç§æ–¹å¼</h2>
<pre><code class="hljs language-xml" lang="xml">@MappedTypes(List.class)
@MappedJdbcTypes(JdbcType.VARCHAR)
public class JsonListTypeHandler 
    extends BaseTypeHandler&lt;List<span class="hljs-tag">&lt;<span class="hljs-name">String</span>&gt;</span>&gt; {
    // å®ç°ä»£ç ...
}
<span class="hljs-tag">&lt;<span class="hljs-name">typeHandlers</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- æŒ‡å®šç±»å --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">typeHandler</span> 
        <span class="hljs-attr">handler</span>=<span class="hljs-string">"com.example.JsonListTypeHandler"</span>/&gt;</span>

    <span class="hljs-comment">&lt;!-- æŒ‡å®šJavaç±»å‹å’ŒJDBCç±»å‹ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">typeHandler</span> 
        <span class="hljs-attr">javaType</span>=<span class="hljs-string">"java.util.List"</span>
        <span class="hljs-attr">jdbcType</span>=<span class="hljs-string">"VARCHAR"</span>
        <span class="hljs-attr">handler</span>=<span class="hljs-string">"com.example.JsonListTypeHandler"</span>/&gt;</span>

    <span class="hljs-comment">&lt;!-- åŒ…æ‰«æ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">package</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"com.example.typehandler"</span>/&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">typeHandlers</span>&gt;</span>
@Configuration
public class MyBatisConfig {
    @Bean
    public ConfigurationCustomizer 
        configurationCustomizer() {
        return configuration -&gt; {
            TypeHandlerRegistry registry = 
                configuration.getTypeHandlerRegistry();
            registry.register(
                List.class, 
                JdbcType.VARCHAR, 
                new JsonListTypeHandler()
            );
        };
    }
}
</code></pre>
<h2 data-id="heading-26">å…«ã€æœ€ä½³å®è·µ</h2>
<h2 data-id="heading-27">é—®é¢˜1ï¼šç±»å‹è½¬æ¢å¼‚å¸¸</h2>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-operator">/</span><span class="hljs-operator">/</span> é—®é¢˜ï¼šCannot <span class="hljs-keyword">convert</span> <span class="hljs-keyword">value</span> <span class="hljs-string">'0000'</span> <span class="hljs-keyword">from</span> <span class="hljs-keyword">column</span> <span class="hljs-number">1</span> <span class="hljs-keyword">to</span> <span class="hljs-type">TIMESTAMP</span>
<span class="hljs-operator">/</span><span class="hljs-operator">/</span> åŸå› ï¼šæ—¥æœŸæ ¼å¼ä¸åŒ¹é…
<span class="hljs-operator">/</span><span class="hljs-operator">/</span> è§£å†³ï¼šä½¿ç”¨æ­£ç¡®çš„æ—¥æœŸç±»å‹æˆ–è‡ªå®šä¹‰TypeHandler
</code></pre>
<h2 data-id="heading-28">é—®é¢˜2ï¼šNullå€¼å¤„ç†</h2>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// é—®é¢˜ï¼šJDBC requires that the JdbcType must be specified</span>
<span class="hljs-comment">// è§£å†³1ï¼šæŒ‡å®šjdbcType</span>
<span class="hljs-meta">#{name, jdbcType=VARCHAR}</span>

<span class="hljs-comment">// è§£å†³2ï¼šå…¨å±€é…ç½®</span>
&lt;setting name=<span class="hljs-string">"jdbcTypeForNull"</span> <span class="hljs-keyword">value</span>=<span class="hljs-string">"NULL"</span>/&gt;
</code></pre>
<h2 data-id="heading-29">é—®é¢˜3ï¼šæšä¸¾ç±»å‹å¤„ç†</h2>
<pre><code class="hljs language-ini" lang="ini">// é…ç½®é»˜è®¤æšä¸¾å¤„ç†å™¨
&lt;settings&gt;
    &lt;setting <span class="hljs-attr">name</span>=<span class="hljs-string">"defaultEnumTypeHandler"</span> value=<span class="hljs-string">"org.apache.ibatis.type.EnumTypeHandler"</span>/&gt;
&lt;/settings&gt;

// æˆ–åœ¨ResultMapä¸­æŒ‡å®š
&lt;result <span class="hljs-attr">column</span>=<span class="hljs-string">"status"</span> property=<span class="hljs-string">"status"</span>
         <span class="hljs-attr">typeHandler</span>=<span class="hljs-string">"org.apache.ibatis.type.EnumOrdinalTypeHandler"</span>/&gt;
</code></pre>
<h2 data-id="heading-30">ä¹ã€æ€»ç»“</h2>
<p>MyBatisçš„ç±»å‹å¤„ç†æ¨¡å—æ˜¯æ•´ä¸ªæ¡†æ¶çš„åŸºç¡€ç»„ä»¶ï¼Œé€šè¿‡ç²¾å¿ƒè®¾è®¡çš„TypeHandlerä½“ç³»ï¼Œå®ç°äº†Javaç±»å‹ä¸JDBCç±»å‹çš„æ— ç¼è½¬æ¢ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Weex åº•å±‚åŸç†ä¸ APM]]></title>    <link>https://juejin.cn/post/7590575755491328054</link>    <guid>https://juejin.cn/post/7590575755491328054</guid>    <pubDate>2026-01-02T02:21:46.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7590575755491328054" data-draft-id="7589916567876354090" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Weex åº•å±‚åŸç†ä¸ APM"/> <meta itemprop="keywords" content="å‰ç«¯æ¡†æ¶,iOS,Weex"/> <meta itemprop="datePublished" content="2026-01-02T02:21:46.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ­åŸå°åˆ˜"/> <meta itemprop="url" content="https://juejin.cn/user/3175045309408429"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Weex åº•å±‚åŸç†ä¸ APM
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3175045309408429/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ­åŸå°åˆ˜
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-02T02:21:46.000Z" title="Fri Jan 02 2026 02:21:46 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»42åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>ä» Vue ç»„ä»¶åº“ï¼ˆVue Libï¼‰åˆ° Weex æ¸²æŸ“ä¸º iOS åŸç”Ÿ UIKit å…ƒç´ ï¼Œæ ¸å¿ƒæ˜¯ â€œVirtual DOM â†’ è·¨çº¿ç¨‹é€šä¿¡ â†’ Native DOM æ„å»º â†’ å¸ƒå±€è®¡ç®— â†’ åŸç”Ÿ View æ¸²æŸ“ â†’ äº‹ä»¶åå‘ç»‘å®šâ€ çš„å®Œæ•´é“¾è·¯ã€‚Weex ä½œä¸ºä¸­é—´å±‚ï¼Œä¸»è¦å®Œæˆ 7 å¤§æ ¸å¿ƒå·¥ä½œï¼Œæ¥ä¸‹å»çœ‹çœ‹è¯¦ç»†å†…å®¹.</p>
<p>Weex ä¾§ APM è¯¥æ€ä¹ˆå¼€å±•ï¼Ÿ</p>
</blockquote>
<h2 data-id="heading-0">ä¸€ã€æ ¸å¿ƒæ­¥éª¤</h2>
<p>ä» Vue Lib åˆ° Weex åŸç”Ÿ UIKit å…ƒç´ çš„å®Œæ•´æµç¨‹ã€‚</p>
<p>é¦–å…ˆï¼Œç”¨æˆ·çš„éœ€æ±‚æ˜¯ â€œåˆ—ä¸¾ Weex åšçš„äº‹æƒ…â€ å¹¶ â€œç»“åˆæœ€æ–°æºç æ ‡ä½ç½®â€ï¼Œæ‰€ä»¥æ€è€ƒè¿‡ç¨‹è¦å…ˆæ‹†è§£æµç¨‹ï¼šä» Vue ç¼–è¯‘äº§ç‰©å¤„ç†ã€JS-Native é€šä¿¡ã€Virtual DOM è§£æã€DOM æ„å»ºä¸å¸ƒå±€è®¡ç®—ã€æ¸²æŸ“æŒ‡ä»¤ç”Ÿæˆã€åŸç”Ÿ View åˆ›å»ºä¸æ›´æ–°ï¼Œè¿™å‡ ä¸ªæ ¸å¿ƒæ­¥éª¤ã€‚æ¯ä¸ªæ­¥éª¤éƒ½è¦å¯¹åº” Weex çš„å…·ä½“å·¥ä½œï¼Œè¿˜è¦æ‰¾åˆ°æœ€æ–°æºç ä¸­çš„å¯¹åº”ç±»å’Œæ–¹æ³•ã€‚</p>
<p>ç¬¬ä¸€æ­¥ï¼Œåº”è¯¥æ˜¯ Vue ç¼–è¯‘äº§ç‰©çš„é€‚é…ã€‚å› ä¸º Vue å†™çš„ä»£ç è¦è¢« Weex è¯†åˆ«ï¼ŒWeex éœ€è¦å¤„ç† Vue çš„æ¨¡æ¿ç¼–è¯‘ç»“æœï¼ˆæ¯”å¦‚ render å‡½æ•°ç”Ÿæˆçš„ Virtual DOMï¼‰ï¼Œè¿˜è¦æ³¨å…¥ Weex çš„ JS Runtime APIã€‚è¿™é‡Œè¦æ‰¾æœ€æ–°æºç ä¸­ JS Runtime çš„åˆå§‹åŒ–ç±»ï¼Œæ¯”å¦‚ WXJSContext æˆ– WXBridgeCoreï¼Œå› ä¸º JS ç¯å¢ƒçš„æ­å»ºæ˜¯ç¬¬ä¸€æ­¥ã€‚</p>
<p>ç¬¬äºŒæ­¥ï¼ŒJS-Native é€šä¿¡çš„å»ºç«‹ã€‚Vue çš„ Virtual DOM å˜åŒ–éœ€è¦ä¼ é€’ç»™ Nativeï¼Œæ‰€ä»¥ Weex çš„ Bridge æ ¸å¿ƒè¦æ³¨å†Œé€šä¿¡æ–¹æ³•ï¼ˆæ¯”å¦‚ callNativeï¼‰ï¼Œè¿™é‡Œå¯¹åº” WXBridgeCore çš„ invokeNative æ–¹æ³•ï¼Œä¹‹å‰è®¨è®ºè¿‡ bridge é˜Ÿåˆ—ï¼Œè¿™é‡Œè¦ç»“åˆæœ€æ–°æºç ä¸­é€šä¿¡ä»»åŠ¡çš„è°ƒåº¦ã€‚</p>
<p>ç¬¬ä¸‰æ­¥ï¼ŒVirtual DOM çš„è§£æä¸ DOM æ ‘æ„å»ºã€‚Weex éœ€è¦æŠŠ Vue çš„ Virtual DOMï¼ˆJSON ç»“æ„ï¼‰è§£ææˆ Native ä¾§çš„ DOM èŠ‚ç‚¹ï¼ˆWXDOMNodeï¼‰ï¼Œè¿™éƒ¨åˆ†ç°åœ¨åœ¨ WXDOMCore ä¸­ï¼Œæ¯”å¦‚ createNode æ–¹æ³•ï¼Œå¤„ç†èŠ‚ç‚¹åˆ›å»ºã€å±æ€§æ›´æ–°ï¼Œè¿˜è¦ç»´æŠ¤ DOM æ ‘ç»“æ„ã€‚</p>
<p>ç¬¬å››æ­¥ï¼Œæ ·å¼è§£æä¸ Yoga å¸ƒå±€è®¡ç®—ã€‚Vue çš„æ ·å¼ï¼ˆæ¯”å¦‚ flexï¼‰è¦è¢« Weex è§£æï¼Œè½¬æ¢ä¸º Yoga çš„å¸ƒå±€å±æ€§ï¼Œç„¶ååœ¨ dom çº¿ç¨‹è®¡ç®—å¸ƒå±€ï¼Œè¿™éƒ¨åˆ†åœ¨ WXDOMCore çš„_scheduleLayout æ–¹æ³•ï¼Œè°ƒç”¨ Yoga çš„ calculateLayoutã€‚</p>
<p>ç¬¬äº”æ­¥ï¼Œæ¸²æŸ“æŒ‡ä»¤ç”Ÿæˆä¸ä¼ é€’ã€‚DOM å’Œå¸ƒå±€è®¡ç®—å®Œæˆåï¼Œè¦æŠŠç»“æœå°è£…æˆæ¸²æŸ“æŒ‡ä»¤ï¼ˆèŠ‚ç‚¹ IDã€frameã€ç±»å‹ç­‰ï¼‰ï¼Œé€šè¿‡ä¸»çº¿ç¨‹ä¼ é€’ç»™æ¸²æŸ“æ ¸å¿ƒï¼Œè¿™é‡Œæ˜¯ WXDOMCore çš„_notifyRender æ–¹æ³•ï¼Œåˆ‡æ¢åˆ° main queueã€‚</p>
<p>ç¬¬å…­æ­¥ï¼ŒåŸç”Ÿ UIKit å…ƒç´ çš„åˆ›å»ºä¸æ›´æ–°ã€‚æ¸²æŸ“æ ¸å¿ƒï¼ˆWXRenderCoreï¼‰æ¥æ”¶æŒ‡ä»¤ï¼Œåˆ›å»ºå¯¹åº” UIKit æ§ä»¶ï¼ˆUILabelã€UIImageView ç­‰ï¼‰ï¼Œæˆ–å¤ç”¨å·²æœ‰ Viewï¼Œæ›´æ–° frame å’Œæ ·å¼ï¼Œè¿™éƒ¨åˆ†åœ¨ WXRenderCore çš„ render æ–¹æ³•ï¼Œè¿˜æœ‰å…·ä½“çš„ View å·¥å‚ç±»ï¼ˆæ¯”å¦‚ WXViewFactoryï¼‰ã€‚</p>
<p>ç¬¬ä¸ƒæ­¥ï¼Œäº‹ä»¶ç»‘å®šä¸åå‘é€šä¿¡ã€‚åŸç”Ÿ UI çš„äº‹ä»¶ï¼ˆæ¯”å¦‚ç‚¹å‡»ï¼‰è¦ä¼ é€’å› Vueï¼ŒWeex éœ€è¦æ³¨å†Œ Native äº‹ä»¶ï¼Œé€šè¿‡ Bridge å›è°ƒ JSï¼Œè¿™é‡Œå¯¹åº” WXEventDispatcher å’Œ WXBridgeCore çš„ callbackJS æ–¹æ³•ã€‚</p>
<p>å…·ä½“çš„é€»è¾‘ä¸åšæ·±å…¥æ¢è®¨ï¼Œå¯ä»¥æŸ¥çœ‹æºç ç ”ç©¶ã€‚</p>
<h2 data-id="heading-1">äºŒã€Yoga</h2>
<h3 data-id="heading-2">1. æ”¯æŒ"å¢é‡å¸ƒå±€æ›´æ–°"</h3>
<p>å½“ç»„ä»¶æ ·å¼å˜åŒ–æ—¶ï¼ŒYoga ä»…é‡æ–°è®¡ç®—å—å½±å“çš„ç»„ä»¶æ ‘åˆ†æ”¯ï¼Œè€Œéå…¨é‡é‡ç®—ï¼Œå¤§å¹…å‡å°‘ RN åº”ç”¨çš„å¸ƒå±€è€—æ—¶å’Œå¡é¡¿ã€Yoga æ˜¯å¦‚ä½•å®ç°ä»…è®¡ç®—å—å½±å“çš„ç»„ä»¶æ ‘åˆ†æ”¯çš„ï¼Ÿç±»ä¼¼æœ‰ä¸ªæ‰“æ ‡è®°ï¼Œæ ‡è®°ä¸º dirtyï¼Ÿ</p>
<p>Yoga å®ç°å¢é‡å¸ƒå±€çš„æ ¸å¿ƒå°±æ˜¯ ã€ŒDirty æ ‡è®°æœºåˆ¶ã€+ã€Œç»„ä»¶æ ‘ä¾èµ–ä¼ æ’­ã€â€”â€” é€šè¿‡æ ‡è®° â€œå—å½±å“çš„èŠ‚ç‚¹â€ï¼Œå¹¶ä»…å¤„ç†è¿™äº›èŠ‚ç‚¹åŠå…¶å…³è”åˆ†æ”¯ï¼Œé¿å…å…¨é‡é‡ç®—ã€‚</p>
<h4 data-id="heading-3">1. YogaNode ä¸ Dirty çŠ¶æ€æ ‡è¯†</h4>
<p>Yoga ä¸­æ¯ä¸ªç»„ä»¶å¯¹åº”ä¸€ä¸ª YogaNodeï¼ˆå¸ƒå±€è®¡ç®—çš„æœ€å°å•å…ƒï¼‰ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½åŒ…å« 3 ä¸ªå…³é”®çŠ¶æ€æ ‡è®°ï¼ˆç”¨äºåˆ¤æ–­æ˜¯å¦éœ€è¦é‡ç®—ï¼‰ï¼š</p>
<ul>
<li>dirtyFlagsï¼ˆæ ¸å¿ƒæ ‡è®°ï¼‰ï¼šè®°å½•èŠ‚ç‚¹çš„ â€œè„çŠ¶æ€ç±»å‹â€ï¼Œä¸»è¦åˆ†ä¸¤ç±»ï¼š
<ul>
<li>LAYOUT_DIRTYï¼šèŠ‚ç‚¹è‡ªèº«æ ·å¼ï¼ˆå¦‚ widthã€flexï¼‰æˆ–å­èŠ‚ç‚¹å¸ƒå±€å˜åŒ–ï¼Œéœ€è¦é‡æ–°è®¡ç®—è‡ªèº«å¸ƒå±€ï¼›</li>
<li>MEASURE_DIRTYï¼šèŠ‚ç‚¹çš„æµ‹é‡ç›¸å…³å±æ€§ï¼ˆå¦‚ measureFunction è‡ªå®šä¹‰æµ‹é‡é€»è¾‘ï¼‰å˜åŒ–ï¼Œéœ€è¦å…ˆé‡æ–°æµ‹é‡å°ºå¯¸ï¼Œå†è®¡ç®—å¸ƒå±€ã€‚</li>
</ul>
</li>
<li>isLayoutCleanï¼šå¸ƒå°”å€¼ï¼Œå¿«é€Ÿåˆ¤æ–­èŠ‚ç‚¹æ˜¯å¦ â€œå¹²å‡€â€ï¼ˆæ— è„çŠ¶æ€ï¼‰ï¼Œé¿å…é‡å¤æ£€æŸ¥ dirtyFlagsï¼›</li>
<li>childCount + children æŒ‡é’ˆï¼šç»´æŠ¤å­èŠ‚ç‚¹åˆ—è¡¨ï¼Œç”¨äºåç»­éå†ä¾èµ–åˆ†æ”¯ã€‚</li>
</ul>
<h4 data-id="heading-4">2. è„çŠ¶æ€è§¦å‘ä¸ä¼ æ’­ï¼šä» â€œå˜åŒ–èŠ‚ç‚¹â€ åˆ° â€œæ ¹èŠ‚ç‚¹â€ çš„å†’æ³¡</h4>
<p>å½“ç»„ä»¶æ ·å¼å˜åŒ–æ—¶ï¼ˆå¦‚ RN ä¸­ä¿®æ”¹ style={{ flex: 2 }}ï¼‰ï¼ŒYoga ä¼šè§¦å‘ä»¥ä¸‹æµç¨‹ï¼š</p>
<ul>
<li>
<p>æ­¥éª¤ 1ï¼šæ ‡è®°è‡ªèº«ä¸º Dirty
ç›´æ¥ä¿®æ”¹å˜åŒ–èŠ‚ç‚¹çš„ dirtyFlags |= LAYOUT_DIRTYï¼ˆæˆ– MEASURE_DIRTYï¼‰ï¼ŒåŒæ—¶è®¾ç½® isLayoutClean = falseã€‚</p>
</li>
<li>
<p>æ­¥éª¤ 2ï¼šå‘ä¸Šå†’æ³¡é€šçŸ¥çˆ¶èŠ‚ç‚¹
ç”±äºçˆ¶èŠ‚ç‚¹çš„å¸ƒå±€ï¼ˆå¦‚å°ºå¯¸ã€ä½ç½®ï¼‰ä¾èµ–å­èŠ‚ç‚¹çš„å¸ƒå±€ç»“æœï¼ˆæ¯”å¦‚çˆ¶èŠ‚ç‚¹æ˜¯ flex:1ï¼Œå­èŠ‚ç‚¹å°ºå¯¸å˜åŒ–ä¼šå½±å“çˆ¶èŠ‚ç‚¹çš„å‰©ä½™ç©ºé—´åˆ†é…ï¼‰ï¼Œå› æ­¤ä¼šé€’å½’å‘ä¸Šéå†çˆ¶èŠ‚ç‚¹ï¼Œç›´åˆ°æ ¹èŠ‚ç‚¹ï¼Œå°†æ‰€æœ‰ â€œä¾èµ–èŠ‚ç‚¹â€ éƒ½æ ‡è®°ä¸º LAYOUT_DIRTYã€‚
å…³é”®ä¼˜åŒ–ï¼šçˆ¶èŠ‚ç‚¹ä»…æ ‡è®° â€œéœ€è¦é‡ç®—â€ï¼Œä½†ä¸ä¼šç«‹å³è®¡ç®—ï¼Œé¿å…ä¸­é€”é‡å¤è§¦å‘è®¡ç®—ã€‚</p>
</li>
<li>
<p>æ­¥éª¤ 3ï¼šè·³è¿‡å·²æ ‡è®°çš„èŠ‚ç‚¹
è‹¥æŸä¸ªèŠ‚ç‚¹å·²è¢«æ ‡è®°ä¸º Dirtyï¼Œåç»­é‡å¤è§¦å‘æ—¶ä¼šç›´æ¥è·³è¿‡ï¼ˆé¿å…é‡å¤å†’æ³¡ï¼‰ï¼Œæå‡æ•ˆç‡ã€‚</p>
</li>
</ul>
<h4 data-id="heading-5">3. å¸ƒå±€è®¡ç®—é˜¶æ®µï¼šåªå¤„ç† Dirty åˆ†æ”¯ï¼Œè·³è¿‡å¹²å‡€èŠ‚ç‚¹ï¼ˆDFSï¼‰</h4>
<p>å½“ Yoga è§¦å‘å¸ƒå±€è®¡ç®—ï¼ˆå¦‚ RN æ¸²æŸ“å¸§è§¦å‘ã€ç»„ä»¶æŒ‚è½½å®Œæˆï¼‰æ—¶ï¼Œä¼šä»æ ¹èŠ‚ç‚¹å¼€å§‹éå†ç»„ä»¶æ ‘ï¼Œä½†ä»…å¤„ç† â€œDirty èŠ‚ç‚¹åŠå…¶å­æ ‘â€ï¼š</p>
<ul>
<li>
<p>æ­¥éª¤ 1ï¼šæ ¹èŠ‚ç‚¹åˆ¤æ–­çŠ¶æ€
è‹¥æ ¹èŠ‚ç‚¹æ˜¯å¹²å‡€çš„ï¼ˆisLayoutClean = trueï¼‰ï¼Œç›´æ¥ç»ˆæ­¢è®¡ç®—ï¼ˆå…¨é‡è·³è¿‡ï¼‰ï¼›è‹¥ä¸º Dirtyï¼Œè¿›å…¥åˆ†æ”¯å¤„ç†ã€‚</p>
</li>
<li>
<p>æ­¥éª¤ 2ï¼šé€’å½’å¤„ç† Dirty åˆ†æ”¯
å¯¹æ¯ä¸ªèŠ‚ç‚¹ï¼Œå…ˆæ£€æŸ¥è‡ªèº«çŠ¶æ€ï¼š</p>
</li>
<li>
<p>è‹¥å¹²å‡€ï¼šç›´æ¥å¤ç”¨ä¸Šæ¬¡ç¼“å­˜çš„å¸ƒå±€ç»“æœï¼ˆx/y/width/heightï¼‰ï¼Œä¸é‡ç®—ï¼›</p>
</li>
<li>
<p>è‹¥ Dirtyï¼š</p>
<ul>
<li>å…ˆå¤„ç†å­èŠ‚ç‚¹ï¼šå¦‚æœå­èŠ‚ç‚¹æ˜¯ Dirtyï¼Œå…ˆé€’å½’è®¡ç®—å­èŠ‚ç‚¹å¸ƒå±€ï¼ˆä¿è¯çˆ¶èŠ‚ç‚¹è®¡ç®—æ—¶ä¾èµ–çš„å­èŠ‚ç‚¹æ•°æ®æ˜¯æœ€æ–°çš„ï¼‰ï¼›</li>
<li>å†è®¡ç®—è‡ªèº«å¸ƒå±€ï¼šæ ¹æ® Flex è§„åˆ™ï¼ˆå¦‚ flexDirectionã€justifyContentï¼‰å’Œå­èŠ‚ç‚¹å¸ƒå±€ç»“æœï¼Œè®¡ç®—è‡ªèº«çš„æœ€ç»ˆå°ºå¯¸å’Œä½ç½®ï¼›</li>
<li>æ¸…é™¤ Dirty æ ‡è®°ï¼šè®¡ç®—å®Œæˆåï¼Œè®¾ç½® dirtyFlags = 0ã€isLayoutClean = trueï¼Œæ ‡è®°ä¸ºå¹²å‡€ã€‚</li>
</ul>
</li>
<li>
<p>æ­¥éª¤ 3ï¼šå¢é‡æ›´æ–°çš„æ ¸å¿ƒæ•ˆæœ
æ¯”å¦‚ä¿®æ”¹ä¸€ä¸ªåˆ—è¡¨é¡¹çš„ marginï¼Œåªä¼šæ ‡è®°è¯¥åˆ—è¡¨é¡¹ â†’ çˆ¶åˆ—è¡¨å®¹å™¨ â†’ æ ¹èŠ‚ç‚¹ä¸º Dirtyï¼Œå…¶ä»–åˆ—è¡¨é¡¹ã€é¡µé¢å…¶ä»–ç»„ä»¶å‡ä¸ºå¹²å‡€ï¼Œä¼šç›´æ¥è·³è¿‡è®¡ç®—ï¼Œä»…é‡ç®— â€œåˆ—è¡¨é¡¹â†’çˆ¶å®¹å™¨â€ è¿™ä¸€å°åˆ†æ”¯ã€‚</p>
</li>
</ul>
<h3 data-id="heading-6">2. Flex å¸ƒå±€é€»è¾‘å¦‚ä½•åˆ° Native ç³»ç»Ÿ</h3>
<p>Flex å¸ƒå±€é€»è¾‘ï¼Œæˆ–è€…è¯´ DSLï¼Œæ˜¯å¦‚ä½•ç¿»è¯‘ä¸º iOS çš„ AutoLayout å’Œ Android çš„ LayoutParams çš„ï¼Ÿ</p>
<p>Yoga å…ˆå°† Flex DSL è§£æä¸ºç»Ÿä¸€çš„ã€Œå¸ƒå±€è®¡ç®—ç»“æœã€ï¼ˆèŠ‚ç‚¹çš„ x/y/width/heightã€é—´è·ã€å¯¹é½æ–¹å¼ç­‰ï¼‰ï¼Œå†æ ¹æ®å¹³å°å·®å¼‚ï¼Œå°†è®¡ç®—ç»“æœ â€œæ˜ å°„â€ ä¸ºå¯¹åº”å¹³å°çš„åŸç”Ÿå¸ƒå±€è§„åˆ™â€”â€”iOS æ˜ å°„ä¸º AutoLayout çº¦æŸï¼ŒAndroid æ˜ å°„ä¸º LayoutParams + åŸç”Ÿå¸ƒå±€å®¹å™¨å±æ€§ã€‚</p>
<h4 data-id="heading-7">1. ç¬¬ä¸€æ­¥ï¼šé€šç”¨å‰ç½®æµç¨‹ï¼ˆè·¨å¹³å°ç»Ÿä¸€ï¼‰</h4>
<p>æ— è®º iOS è¿˜æ˜¯ Androidï¼ŒYoga éƒ½ä¼šå…ˆå®Œæˆä»¥ä¸‹æ­¥éª¤ï¼Œå±è”½ Flex DSL çš„è§£æå·®å¼‚ï¼š</p>
<ol>
<li>è§£æ Flex æ ·å¼ï¼šå°†ä¸Šå±‚æ¡†æ¶çš„ Flex é…ç½®ï¼ˆå¦‚ RN çš„ StyleSheetã€Weex çš„æ¨¡æ¿æ ·å¼ï¼‰è§£æä¸º YogaNode çš„å±æ€§ï¼ˆå¦‚ flexDirectionã€justifyContentã€marginã€padding ç­‰ï¼‰ï¼›</li>
<li>æ‰§è¡Œå¸ƒå±€è®¡ç®—ï¼šé€šè¿‡ Flexbox ç®—æ³•ï¼ˆåŸºäº Web æ ‡å‡†ï¼‰ï¼Œè®¡ç®—å‡ºæ¯ä¸ª YogaNode çš„æœ€ç»ˆå¸ƒå±€æ•°æ®ï¼š</li>
</ol>
<ul>
<li>å›ºå®šå±æ€§ï¼šwidth/heightï¼ˆå« auto/flex è®¡ç®—åçš„å…·ä½“æ•°å€¼ï¼‰ã€x/yï¼ˆç›¸å¯¹çˆ¶èŠ‚ç‚¹çš„åæ ‡ï¼‰ï¼›</li>
<li>é—´è·å±æ€§ï¼šmarginLeft/Top/Right/Bottomã€paddingLeft/Top/Right/Bottomï¼›</li>
<li>å¯¹é½å±æ€§ï¼šalignItemsã€justifyContent å¯¹åº”çš„èŠ‚ç‚¹ç›¸å¯¹ä½ç½®å…³ç³»ï¼›</li>
</ul>
<ol start="3">
<li>è¾“å‡ºæ ‡å‡†åŒ–å¸ƒå±€æ•°æ®ï¼šå°†ä¸Šè¿°ç»“æœå°è£…ä¸ºå¹³å°æ— å…³çš„ç»“æ„ä½“ï¼Œä¾›åç»­å¹³å°æ˜ å°„ä½¿ç”¨ã€‚</li>
</ol>
<h4 data-id="heading-8">2. ç¬¬äºŒæ­¥ï¼šiOS ç«¯ï¼šæ˜ å°„ä¸º AutoLayout çº¦æŸï¼ˆNSLayoutConstraintï¼‰</h4>
<p>AutoLayout çš„æ ¸å¿ƒæ˜¯ã€ŒåŸºäºçº¦æŸçš„å…³ç³»æè¿°ã€ï¼ˆè€Œéç›´æ¥è®¾ç½®åæ ‡ï¼‰ï¼Œå› æ­¤ Yoga ä¼šå°† â€œè®¡ç®—å‡ºçš„å…·ä½“å°ºå¯¸ / ä½ç½®â€ è½¬åŒ–ä¸º UIView çš„çº¦æŸï¼ˆNSLayoutConstraintï¼‰ï¼Œæ ¸å¿ƒæ˜ å°„è§„åˆ™å¦‚ä¸‹ï¼šä¸€ä¸€ç¿»è¯‘ css è§„åˆ™åˆ° iOS AutoLayout å†™æ³•ï¼š</p>





































<table><thead><tr><th>Flex æ ¸å¿ƒå±æ€§</th><th>å¯¹åº”çš„ AutoLayout çº¦æŸé€»è¾‘</th></tr></thead><tbody><tr><td><code>width: 100</code></td><td>æ˜ å°„ä¸º <code>view.widthAnchor.constraint(equalToConstant: 100)</code></td></tr><tr><td><code>height: auto</code></td><td>å…ˆé€šè¿‡ Yoga è®¡ç®—å‡ºå…·ä½“é«˜åº¦ï¼ˆå¦‚æ–‡å­—é«˜åº¦ã€å­èŠ‚ç‚¹åŒ…è£¹é«˜åº¦ï¼‰ï¼Œå†æ˜ å°„ä¸º <code>heightAnchor</code> çº¦æŸï¼›è‹¥ä¸º <code>flex:1</code>ï¼Œåˆ™æ˜ å°„ä¸º <code>heightAnchor.constraint(equalTo: superview.heightAnchor, multiplier: 1)</code>ï¼ˆå æ»¡çˆ¶å®¹å™¨å‰©ä½™é«˜åº¦ï¼‰</td></tr><tr><td><code>marginLeft: 20</code></td><td>æ˜ å°„ä¸º <code>view.leadingAnchor.constraint(equalTo: superview.leadingAnchor, constant: 20)</code></td></tr><tr><td><code>marginTop: 15</code></td><td>æ˜ å°„ä¸º <code>view.topAnchor.constraint(equalTo: superview.topAnchor, constant: 15)</code></td></tr><tr><td><code>justifyContent: center</code>ï¼ˆçˆ¶èŠ‚ç‚¹ flexDirection: rowï¼‰</td><td>çˆ¶èŠ‚ç‚¹çº¦æŸï¼š<code>view.centerXAnchor.constraint(equalTo: superview.centerXAnchor)</code>ï¼›è‹¥æœ‰å¤šä¸ªå­èŠ‚ç‚¹ï¼Œé€šè¿‡è°ƒæ•´å­èŠ‚ç‚¹é—´çš„ <code>spacing</code> çº¦æŸå®ç°å‡åŒ€åˆ†å¸ƒ</td></tr><tr><td><code>alignItems: center</code>ï¼ˆçˆ¶èŠ‚ç‚¹ flexDirection: columnï¼‰</td><td>å­èŠ‚ç‚¹çº¦æŸï¼š<code>view.centerYAnchor.constraint(equalTo: superview.centerYAnchor)</code></td></tr><tr><td><code>flex: 1</code>ï¼ˆå­èŠ‚ç‚¹ï¼‰</td><td>æ˜ å°„ä¸º <code>view.widthAnchor.constraint(equalTo: superview.widthAnchor, multiplier: 1)</code>ï¼ˆæ¨ªå‘å æ»¡ï¼‰+ çˆ¶èŠ‚ç‚¹çš„ <code>distribution</code> çº¦æŸï¼ˆåˆ†é…å‰©ä½™ç©ºé—´ï¼‰</td></tr></tbody></table>
<p>è¡¥å……ä¿¡æ¯ï¼š</p>
<ul>
<li>Yoga ä¼šä¸ºæ¯ä¸ª <code>UIView</code> å…³è”ä¸€ä¸ª <code>YogaNode</code>ï¼Œå¸ƒå±€è®¡ç®—å®Œæˆåï¼Œé€šè¿‡ <code>YogaKit</code>ï¼ˆæˆ–ä¸Šå±‚æ¡†æ¶å¦‚ RN çš„åŸç”Ÿå±‚ï¼‰è‡ªåŠ¨ç”Ÿæˆçº¦æŸï¼›</li>
<li>æ”¯æŒ â€œçº¦æŸä¼˜å…ˆçº§â€ é€‚é…ï¼šæ¯”å¦‚ <code>flex:1</code> å¯¹åº”çš„çº¦æŸä¼˜å…ˆçº§ä¼šé«˜äºå›ºå®šå°ºå¯¸çº¦æŸï¼Œç¡®ä¿ Flex è§„åˆ™ä¼˜å…ˆç”Ÿæ•ˆï¼›</li>
<li>æ··åˆå¸ƒå±€å…¼å®¹ï¼šè‹¥åŸç”Ÿè§†å›¾å·²æœ‰éƒ¨åˆ† AutoLayout çº¦æŸï¼ŒYoga ä¼šç”Ÿæˆ â€œè¡¥å……çº¦æŸâ€ï¼Œé¿å…å†²çªï¼ˆé€šè¿‡ <code>active</code>å±æ€§æ§åˆ¶çº¦æŸå¯ç”¨ / ç¦ç”¨ï¼‰ã€‚</li>
</ul>
<h2 data-id="heading-9">ä¸‰ã€Weex å‰–æ</h2>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant V as Vueç»„ä»¶
    participant J as JS Framework
    participant B as JS-Native Bridge
    participant N as Nativeå¼•æ“
    participant P as åŸç”ŸUI

    V-&gt;&gt;J: .vueå•æ–‡ä»¶ (template/style/script)
    Note right of J: ç¼–è¯‘é˜¶æ®µ&lt;br&gt;weex-loaderç¼–è¯‘Vueç»„ä»¶
    J-&gt;&gt;J: ç”ŸæˆVirtual DOMæ ‘
    Note right of J: è¿è¡Œé˜¶æ®µ&lt;br&gt;JS Frameworkç®¡ç†VNodeç”Ÿå‘½å‘¨æœŸ
    J-&gt;&gt;B: é€šè¿‡callNativeå‘é€&lt;br&gt;æ¸²æŸ“æŒ‡ä»¤JSON
    Note right of B: é€šä¿¡å±‚&lt;br&gt;å°†JSè°ƒç”¨è½¬ä¸ºåŸç”Ÿæ¨¡å—è°ƒç”¨
    B-&gt;&gt;N: ä¼ é€’æ¸²æŸ“æŒ‡ä»¤
    Note right of N: åŸç”Ÿæ¸²æŸ“å¼•æ“&lt;br&gt;WXRenderManager (Android)&lt;br&gt;WXComponent (iOS)
    N-&gt;&gt;N: è§£ææŒ‡ä»¤ï¼Œåˆ›å»º/æ›´æ–°ç»„ä»¶æ ‘
    N-&gt;&gt;P: è°ƒç”¨åŸç”ŸAPIæ¸²æŸ“&lt;br&gt;ï¼ˆe.g., UIView, TextViewï¼‰
    P-&gt;&gt;P: æœ€ç»ˆåŸç”Ÿè§†å›¾
</code></pre>
<p>ä¸‹é¢é’ˆå¯¹æ ¸å¿ƒæœºåˆ¶è¯¦è§£ä¸æºç å®šä½</p>
<h3 data-id="heading-10">1. ç¼–è¯‘é˜¶æ®µï¼šä» Vue åˆ° Virtual DOM</h3>
<ul>
<li>å¤„ç† Vue å•æ–‡ä»¶ï¼šå¼€å‘è€…çš„<code>.vue</code>æ–‡ä»¶é€šè¿‡ Webpack å’Œ <code>weex-loader</code> ç¼–è¯‘æˆ JavaScript Bundleã€‚è¿™ä¸ª Bundle åŒ…å«äº†æ¸²æŸ“é¡µé¢æ‰€éœ€çš„æ‰€æœ‰ä¿¡æ¯</li>
<li>ç”ŸæˆVirtual DOMï¼šåœ¨JSè¿è¡Œæ—¶ï¼ŒVue.jsï¼ˆæˆ– Raxï¼‰çš„æ¸²æŸ“å‡½æ•°ä¼šç”Ÿæˆä¸€æ£µ Virtual DOMæ ‘ï¼ˆVNodeï¼‰ã€‚Weex çš„ JS Framework ä¼šæ‹¦æˆªå¸¸è§„çš„ DOM æ“ä½œï¼Œå°†å…¶å¯¼å‘ Weex çš„æ¸²æŸ“ç®¡é“</li>
</ul>
<p>æºç ç›¸å…³ï¼šç¼–è¯‘è¿‡ç¨‹ä¸»è¦æ¶‰åŠ <code>weex-loader</code> (åœ¨ <code>weex-toolkit</code> é¡¹ç›®ä¸­)ï¼Œè€Œ JS Framework å¯¹ VNode çš„å¤„ç†åœ¨ <code>js-framework</code> ç›®å½•ä¸‹ã€‚é‡ç‚¹å…³æ³¨ <code>src/framework.js</code> ä¸­çš„ <code>Document</code> å’Œ <code>Element</code> ç±»ï¼Œå®ƒä»¬æ¨¡æ‹Ÿäº† DOM ç»“æ„</p>
<h3 data-id="heading-11">2. æŒ‡ä»¤ç”Ÿæˆä¸é€šä¿¡</h3>
<ul>
<li>
<p>åºåˆ—åŒ–ä¸ºæ¸²æŸ“æŒ‡ä»¤ï¼ˆjson æ•°æ®ï¼‰ï¼šJS-Framework ä¸ä¼šç›´æ¥æ“ä½œ Domï¼Œè€Œæ˜¯æŠŠå¯¹ Dom çš„æ“ä½œï¼Œæè¿°æˆå¯¹ VNode å¯¹è±¡çš„åˆ›å»ºã€æ›´æ–°ã€åˆ é™¤ç­‰ï¼Œåºåˆ—åŒ–æˆä¸€ç§ç‰¹æ®Šçš„ JSON æ ¼å¼çš„æ¸²æŸ“æŒ‡ä»¤ã€‚æ¯”å¦‚</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"module"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"dom"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"method"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"createBody"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"args"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">{</span><span class="hljs-attr">"ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"1"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"div"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"style"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>...<span class="hljs-punctuation">}</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
</li>
<li>
<p>JS-Native æ¡¥æ¥ï¼šè¿™äº›æŒ‡ä»¤é€šè¿‡ callNative æ–¹æ³•ï¼Œä» JS ç«¯å‘é€åˆ° Native ç«¯ï¼ŒåŒæ—¶ Native ç«¯ä¹Ÿå¯ä»¥é€šè¿‡ callJS æ–¹æ³•å‘ JS ç«¯å‘é€äº‹ä»¶ï¼ˆæ¯”å¦‚ç”¨æˆ·ç‚¹å‡»ï¼‰</p>
</li>
</ul>
<h3 data-id="heading-12">3. åŸç”Ÿç«¯æ¸²æŸ“</h3>
<ul>
<li>æŒ‡ä»¤è§£æä¸ç»„ä»¶æ¸²æŸ“ï¼šNative ç«¯çš„æ¸²æŸ“å¼•æ“ï¼ˆå¦‚ Android çš„ WXRenderManger å’Œ iOS çš„ WXComponentManagerï¼‰æ¥æ”¶å¹¶è§£æ JS æŒ‡ä»¤ã€‚Weex ç»´æŠ¤äº†ä¸€ä¸ªä» JS ç»„ä»¶åˆ°åŸç”Ÿ UI ç»„ä»¶çš„æ˜ å°„è¡¨ã€‚ï¼ˆä¾‹å¦‚  æ˜ å°„åˆ° iOS çš„ UILabelï¼‰</li>
<li>å¸ƒå±€ä¸æ ·å¼ï¼šWeex ä½¿ç”¨çš„ Flexbox å¸ƒå±€æ¨¡å‹åšä¸ºç»Ÿä¸€çš„å¸ƒå±€æ–¹æ¡ˆï¼ŒNative ç«¯éœ€è¦å°† JS ä¼ é€’çš„ css æ ·å¼å±æ€§ï¼Œè½¬æ¢ä¸ºåŸç”Ÿç»„ä»¶èƒ½å¤Ÿç†è§£çš„å¸ƒå±€å‚æ•°ä¸æ ·å¼å±æ€§ã€‚</li>
<li>å¤šçº¿ç¨‹æ¨¡å‹ï¼šä¸ºäº†ä¿è¯ UI æµç•…ï¼ŒWeex é‡‡ç”¨äº†å¤šçº¿ç¨‹æ¨¡å‹ã€‚DOM æ“ä½œå’Œå¸ƒå±€è®¡ç®—é€šå¸¸åœ¨å•ç‹¬çš„ DOM çº¿ç¨‹è¿›è¡Œï¼Œè€Œæœ€ç»ˆåˆ›å»ºå’Œæ›´æ–°åŸç”Ÿè§†å›¾çš„æ“ä½œå¿…é¡»åœ¨ UI ä¸»çº¿ç¨‹ä¸Šè¿›è¡Œ</li>
</ul>
<h3 data-id="heading-13">4. æ‹“å±•æœºåˆ¶</h3>
<ul>
<li>æ¨¡å—ï¼ˆModuleï¼‰ï¼šç”¨äºæš´éœ²åŸç”Ÿèƒ½åŠ›ï¼ˆå¦‚ç½‘ç»œã€å­˜å‚¨ï¼‰ç»™å‰ç«¯è°ƒç”¨ï¼Œé€šè¿‡ callNative è§¦å‘ï¼Œæ”¯æŒå›è°ƒ</li>
<li>ç»„ä»¶ï¼ˆComponentï¼‰ï¼šæ‹“å±•è‡ªå®šä¹‰ UI ç»„ä»¶ï¼Œå…è®¸å¼€å‘è€…åˆ›å»ºè‡ªå®šä¹‰çš„åŸç”Ÿ UI ç»„ä»¶ï¼Œå¹¶åœ¨ JSX ä¸­ä½¿ç”¨</li>
<li>é€‚é…å™¨ï¼ˆAdapterï¼‰ï¼šæä¾›å¯æ›¿æ¢çš„å®ç°ï¼Œå¦‚å›¾ç‰‡ä¸‹è½½å™¨</li>
</ul>
<h2 data-id="heading-14">å››ã€ä¸ºä»€ä¹ˆè‡ªå®šä¹‰ Component éƒ½éœ€è¦ç»§æ‰¿è‡ª WXComponentï¼Ÿ</h2>
<p>æ¯”å¦‚ä¸‹é¢çš„ä»£ç </p>
<pre><code class="hljs language-objective-c" lang="objective-c">[self registerComponent:@"image" withClass:NSClassFromString(@"WXImageComponent") withProperties:nil];

@interface WXImageComponent : WXComponent

@end
</code></pre>
<p>ç­”ï¼š<strong>è‡ªå®šä¹‰åŸç”Ÿç»„ä»¶å¿…é¡»ç»§æ‰¿è‡ª WXComponentï¼Œæœ¬è´¨æ˜¯å¤ç”¨ Weex å°è£…çš„ã€ŒJS - åŸç”Ÿäº¤äº’ã€ç”Ÿå‘½å‘¨æœŸã€æ ·å¼å¸ƒå±€ã€æ¸²æŸ“åŸºç¡€ã€ç­‰é€šç”¨èƒ½åŠ›ï¼Œç¡®ä¿ç»„ä»¶èƒ½æ¥å…¥ Weex è¿è¡Œæ—¶ç”Ÿæ€</strong>ã€‚</p>
<p>Weex Module ä¸ Componet çš„åŒºåˆ«</p>























<table><thead><tr><th>ç±»å‹</th><th>æ ¸å¿ƒä½œç”¨</th><th>åŸºç±»</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td>Component</td><td>åŸç”Ÿ UI æ¸²æŸ“ï¼ˆæœ‰è§†å›¾ï¼‰</td><td><code>WXComponent</code></td><td><code>WXImageComponent</code>ï¼ˆå›¾ç‰‡ï¼‰ã€<code>WXTextComponent</code>ï¼ˆæ–‡æœ¬ï¼‰ã€è‡ªå®šä¹‰æŒ‰é’®ç»„ä»¶</td></tr><tr><td>Module</td><td>åŠŸèƒ½æ‰©å±•ï¼ˆæ— è§†å›¾ï¼‰</td><td><code>WXModule</code></td><td><code>WXNavigatorModule</code>ï¼ˆå¯¼èˆªï¼‰ã€<code>WXStorageModule</code>ï¼ˆå­˜å‚¨ï¼‰ã€è‡ªå®šä¹‰å·¥å…·æ¨¡å—</td></tr></tbody></table>
<p>å®ç° JS ä¸åŸç”Ÿç»„ä»¶çš„ã€Œæ•°æ®åŒæ­¥ã€ï¼ˆå±æ€§ã€äº‹ä»¶ã€æ–¹æ³•ï¼‰</p>
<p>Weex çš„æ ¸å¿ƒæ˜¯ã€ŒJS æ§åˆ¶åŸç”Ÿç»„ä»¶ã€ï¼Œè€Œ <code>WXComponent</code> å°è£…äº† JS ä¸åŸç”Ÿä¹‹é—´çš„é€šä¿¡åè®®ï¼Œæ— éœ€è‡ªå®šä¹‰ç»„ä»¶æ‰‹åŠ¨å¤„ç†ï¼š</p>
<ul>
<li>
<p>å±æ€§åŒæ­¥ï¼ˆPropsï¼‰ï¼šJS ç«¯é€šè¿‡ <code>&lt;my-component prop1="xxx" prop2="yyy"&gt;</code> ä¼ é€’çš„å±æ€§ï¼ŒWXComponent ä¼šè‡ªåŠ¨è§£æã€ç±»å‹è½¬æ¢ï¼ˆå¦‚ JS å­—ç¬¦ä¸² â†’ åŸç”Ÿ NSString/NSNumberï¼‰ï¼Œå¹¶é€šè¿‡ <code>setter</code> æ–¹æ³•åŒæ­¥åˆ°è‡ªå®šä¹‰ç»„ä»¶ã€‚</p>
<p>ç¤ºä¾‹ï¼šWXImageComponent ç»§æ‰¿ <code>WXComponent</code> åï¼Œåªéœ€é‡å†™ <code>-setSrc:(NSString*)src</code> æ–¹æ³•ï¼Œå°±èƒ½æ¥æ”¶ JS ä¼ çš„ <code>src</code> å±æ€§ï¼Œæ— éœ€å…³å¿ƒã€ŒJS å¦‚ä½•æŠŠå€¼ä¼ ç»™åŸç”Ÿã€ã€‚</p>
</li>
<li>
<p>äº‹ä»¶åˆ†å‘ï¼ˆEventsï¼‰ï¼šåŸç”Ÿç»„ä»¶çš„äº¤äº’äº‹ä»¶ï¼ˆå¦‚ç‚¹å‡»ã€åŠ è½½å®Œæˆï¼‰ï¼Œ<code>WXComponent</code> ä¼šæŒ‰ç…§ Weex åè®®å›ä¼ ç»™ JS ç«¯ï¼ˆå¦‚ <code>@emit('click')</code> )</p>
<p>ç¤ºä¾‹ï¼šè‡ªå®šä¹‰æŒ‰é’®ç»„ä»¶ç»§æ‰¿åï¼Œåªéœ€è°ƒç”¨ <code>[self fireEvent:@"click" params:@{@"x": @100, @"y": @200}]</code> ï¼ŒJS ç«¯å°±èƒ½é€šè¿‡ <code>@onclick</code>æ¥æ”¶äº‹ä»¶ï¼Œæ— éœ€è‡ªå·±å®ç°äº‹ä»¶é€šä¿¡ã€‚</p>
</li>
<li>
<p>æ–¹æ³•è°ƒç”¨ï¼ˆMethodsï¼‰ï¼šJS ç«¯é€šè¿‡ <code>this.$refs.myComponent.callMethod('xxx', params)</code> è°ƒç”¨åŸç”Ÿç»„ä»¶æ–¹æ³•ï¼Œ<code>WXComponent</code></p>
<p>ä¼šè§£ææ–¹æ³•åå’Œå‚æ•°ï¼Œåå°„è°ƒç”¨è‡ªå®šä¹‰ç»„ä»¶çš„å¯¹åº”æ–¹æ³•ã€‚</p>
<p>ç¤ºä¾‹ï¼šè‡ªå®šä¹‰æ’­æ”¾å™¨ç»„ä»¶ç»§æ‰¿åï¼Œåªéœ€æš´éœ² <code>-play</code>æ–¹æ³•ï¼ŒJS å°±èƒ½ç›´æ¥è°ƒç”¨ï¼Œ<code>WXComponent</code>è´Ÿè´£æ–¹æ³•æŸ¥æ‰¾å’Œå‚æ•°ä¼ é€’ã€‚</p>
</li>
</ul>
<h2 data-id="heading-15">äº”ã€JS æ•°æ®å˜åŒ–æ˜¯å¦‚ä½•é©±åŠ¨ Native UI æ›´æ–°çš„</h2>
<p>çº¯ Web ç«¯çš„æ•°æ®å˜åŒ–ä¼šé€šè¿‡ Proxy å»é©±åŠ¨å…³è”çš„ UI æ›´æ–°ï¼Œè¿™ä¹Ÿæ˜¯ Vue3 çš„å·¥ä½œåŸç†ï¼Œé‚£ä¹ˆ JS ç«¯çš„æ•°æ®å˜åŒ–æ˜¯å¦‚ä½•é©±åŠ¨ Native UI ç»„ä»¶çš„æ›´æ–°çš„ï¼Ÿ</p>
<p>æ‰€æœ‰çš„ Native UI Component éƒ½ç»§æ‰¿è‡ª WXComponentï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥ç»™ WXComponent æ·»åŠ ä¸€ä¸ªå®ç° DataBinding çš„ Categoryï¼Œè¿™å°±æ˜¯ Weex æœ€æ–°æºç ä¸­çš„ <code>WXComponent+DataBinding.mm</code></p>
<p>æ ¸å¿ƒæ˜¯ï¼š<strong>è§£æ JS ç«¯ä¼ é€’çš„ã€Œç»‘å®šè¡¨è¾¾å¼ã€ï¼ˆå¦‚ <code>{{a + b}}</code>ï¼‰ï¼Œç¼–è¯‘ä¸ºåŸç”Ÿå¯æ‰§è¡Œçš„å›è°ƒ Blockï¼Œå½“ JS æ•°æ®å˜åŒ–æ—¶ï¼Œé€šè¿‡ Block è®¡ç®—å‡ºç»„ä»¶æ‰€éœ€çš„æ–°å€¼ï¼Œè‡ªåŠ¨æ›´æ–°ç»„ä»¶çš„å±æ€§ã€æ ·å¼ã€äº‹ä»¶ï¼Œæˆ–å¤„ç†åˆ—è¡¨ï¼ˆ<code>v-for</code>ï¼‰ã€æ¡ä»¶ï¼ˆ<code>v-if</code>ï¼‰ã€ä¸€æ¬¡æ€§ç»‘å®šï¼ˆ<code>v-once</code>ï¼‰ç­‰é€»è¾‘</strong></p>
<p>å¯èƒ½æœ‰äº›äººè¦é—®äº†ï¼šä¸ºä»€ä¹ˆå½“ js æ•°æ®å˜åŒ–æ—¶ï¼Œéœ€è¦è®© Native è®¡ç®—ç»„ä»¶æ‰€éœ€çš„æ–°å€¼ï¼Ÿè¿™ä¸å°±æ˜¯ Native åšäº†ä¸€é Vue å“åº”å¼çš„é€»è¾‘å—ï¼Ÿè¿™ç§é‡å¤é€»è¾‘çš„ä»·å€¼æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<p><strong>Vue3 çš„ Proxy åªè´Ÿè´£ã€ŒJS ç«¯æ•°æ®å˜åŒ–çš„ç›‘å¬ + ä¾èµ–æ”¶é›† + è§¦å‘æ›´æ–°é€šçŸ¥ã€â€”â€” å®ƒæ˜¯ â€œå“åº”å¼çš„è§¦å‘å™¨â€ï¼Œè€Œé â€œUI æ›´æ–°çš„æ‰§è¡Œè€…â€</strong></p>
<p>è€Œ Weex ä¹‹æ‰€ä»¥éœ€è¦ Native æ‰˜ç®¡ï¼Œæ ¸å¿ƒæ˜¯å› ä¸ºã€Œç»§æ‰¿è‡ª WXComponent çš„ UI ç»„ä»¶æ˜¯ Native ä¾§çš„åŸç”Ÿç»„ä»¶ï¼Œè€Œé DOM ç»„ä»¶ã€ï¼ŒJS ç«¯æ²¡æœ‰ä»»ä½•èƒ½åŠ›ï¼ˆAPIï¼‰å»è®¿é—®ã€æ“ä½œä»–ä»¬ï¼ŒProxy å†å¼ºå¤§ï¼Œå®ƒä¹Ÿåªæ˜¯ Native ä¾§ï¼ˆWeexï¼‰å’Œ Web ç«¯ï¼ˆVueï¼‰è´Ÿè´£â€œå–Šä¸€å£°ï¼Œå“ï¼Œæ•°æ®å˜äº†ï¼Œä½ ä»¬è°éœ€è¦çš„è‡ªåŠ©ï¼Œè‡ªå·±å»å¤„ç†æ„Ÿå…´è¶£çš„ UIâ€ï¼Œå´æ‘¸ä¸åˆ° UI ç»„ä»¶ï¼ŒWeb ç«¯ç”± DOM API å»æ¸²æŸ“ç»˜åˆ¶ï¼ŒNative ç«¯æ›´è§¦ç¢°ä¸åˆ°ï¼Œå¿…é¡»ç”± Native è‡ªå·±æ¥å®Œæˆï¼šå¬åˆ°é€šçŸ¥ -&gt; è®¡ç®—æ–°å€¼ -&gt; æ›´æ–°æ§ä»¶çš„æµç¨‹ã€‚</p>
<h3 data-id="heading-16">1. Proxy éƒ½åšäº†äº›ä»€ä¹ˆï¼Ÿ</h3>
<p>Vue3 çš„æ ¸å¿ƒå®ç°é‡Œ Proxy åšäº†3ä»¶äº‹ï¼šå…¨ç¨‹åœ¨ JS ä¾§ï¼Œä¸æ¶‰åŠä»»ä½• UI æ“ä½œ</p>
<p>ç›‘å¬æ•°æ®æ“ä½œï¼šé€šè¿‡ Proxy ä»£ç†å¯¹è±¡æ‹¦æˆªæ•°æ®çš„ getterã€setter</p>
<ul>
<li>é€šè¿‡ getter æ”¶é›†ä¾èµ–å…³ç³»ï¼šå½“ç»„ä»¶æ¸²æŸ“æ—¶è§¦å‘ getterï¼ŒProxy ä¼šè®°å½•è¿™ä¸ªç»„ä»¶ä¾èµ–äº†è¿™ä¸ªæ•°æ®</li>
<li>é€šè¿‡ setter è§¦å‘æ›´æ–°é€šçŸ¥ï¼šå½“æ•°æ®è¢«ä¿®æ”¹æ—¶è§¦å‘ setterï¼ŒProxy ä¼šå‘Šè¯‰ Vue è¿è¡Œæ—¶ï¼Œâ€œuser.nameâ€ å˜äº†ï¼Œæ‰€æœ‰ä¾èµ–å®ƒçš„ç»„ä»¶è¯¥æ›´æ–°äº†</li>
</ul>
<p>Proxyï¼ˆä»£ç†ï¼‰æ˜¯ ES6 æ–°å¢çš„å†…ç½®å¯¹è±¡ï¼Œç”¨äº<strong>åˆ›å»ºä¸€ä¸ªå¯¹è±¡çš„ä»£ç†å‰¯æœ¬</strong>ï¼Œå¹¶é€šè¿‡ã€Œé™·é˜±ï¼ˆTrapï¼‰ã€æ‹¦æˆªå¯¹åŸå¯¹è±¡çš„åŸºæœ¬æ“ä½œï¼ˆå¦‚å±æ€§è®¿é—®ã€èµ‹å€¼ã€åˆ é™¤ç­‰ï¼‰ï¼Œä»è€Œè‡ªå®šä¹‰è¿™äº›æ“ä½œçš„è¡Œä¸ºã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> proxy = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Proxy</span>(target, handler);
</code></pre>
<ul>
<li><code>target</code>ï¼šè¢«ä»£ç†çš„<strong>åŸå§‹å¯¹è±¡</strong>ï¼ˆå¯ä»¥æ˜¯å¯¹è±¡ã€æ•°ç»„ï¼Œç”šè‡³å‡½æ•°ï¼‰ï¼›</li>
<li><code>handler</code>ï¼šé…ç½®å¯¹è±¡ï¼ŒåŒ…å«å¤šä¸ªã€Œé™·é˜±æ–¹æ³•ã€ï¼ˆå¦‚ <code>get</code>ã€<code>set</code>ï¼‰ï¼Œç”¨äºå®šä¹‰æ‹¦æˆªé€»è¾‘ï¼›</li>
<li><code>proxy</code>ï¼šä»£ç†å¯¹è±¡ï¼Œåç»­å¯¹åŸå§‹å¯¹è±¡çš„æ“ä½œéœ€é€šè¿‡ä»£ç†å¯¹è±¡è¿›è¡Œï¼Œæ‰èƒ½è§¦å‘æ‹¦æˆªã€‚</li>
</ul>






























<table><thead><tr><th>é™·é˜±æ–¹æ³•</th><th>ä½œç”¨</th><th>è§¦å‘åœºæ™¯</th></tr></thead><tbody><tr><td><code>get(target, key, receiver)</code></td><td>æ‹¦æˆªã€Œå±æ€§è®¿é—®ã€</td><td><code>proxy.key</code> æˆ– <code>proxy[key]</code></td></tr><tr><td><code>set(target, key, value, receiver)</code></td><td>æ‹¦æˆªã€Œå±æ€§èµ‹å€¼ã€</td><td><code>proxy.key = value</code> æˆ– <code>proxy[key] = value</code></td></tr><tr><td><code>deleteProperty(target, key)</code></td><td>æ‹¦æˆªã€Œå±æ€§åˆ é™¤ã€</td><td><code>delete proxy.key</code></td></tr><tr><td><code>has(target, key)</code></td><td>æ‹¦æˆªã€Œ<code>in</code> è¿ç®—ç¬¦åˆ¤æ–­ã€</td><td><code>key in proxy</code></td></tr></tbody></table>
<p>Tips: Proxy ä»£ç†çš„æ˜¯ã€Œæ•´ä¸ªå¯¹è±¡ã€ï¼Œè€Œéå•ä¸ªå±æ€§ï¼Œä¸”æ‹¦æˆªçš„æ˜¯ã€Œæ“ä½œè¡Œä¸ºã€ï¼ˆå¦‚ â€œè®¿é—®å±æ€§â€ è¿™ä¸ªåŠ¨ä½œï¼‰ï¼Œè€Œéå±æ€§æœ¬èº«ã€‚</p>
<p>Vue æ ¸å¿ƒæµç¨‹ï¼š<strong>åˆ›å»ºä»£ç† â†’ ä¾èµ–æ”¶é›† â†’ æ•°æ®ä¿®æ”¹ â†’ è§¦å‘æ›´æ–°</strong>ã€‚</p>
<h4 data-id="heading-17">1. åˆ›å»ºä»£ç†ï¼ˆreactive å‡½æ•°çš„æ ¸å¿ƒï¼‰</h4>
<p><code>reactive</code> å‡½æ•°æ¥æ”¶ä¸€ä¸ªåŸå§‹å¯¹è±¡ï¼Œè¿”å›å…¶ Proxy ä»£ç†å¯¹è±¡ï¼ŒåŒæ—¶é…ç½® <code>get</code>ã€<code>set</code> ç­‰é™·é˜±æ–¹æ³•ï¼Œä¸ºåç»­ä¾èµ–æ”¶é›†å’Œæ›´æ–°åšå‡†å¤‡</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">reactive</span>(<span class="hljs-params">target</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Proxy</span>(target, {
    <span class="hljs-comment">// æ‹¦æˆªå±æ€§è®¿é—®</span>
    <span class="hljs-title function_">get</span>(<span class="hljs-params">target, key, receiver</span>) {
      <span class="hljs-comment">// 1. å…ˆè·å–åŸå§‹å±æ€§å€¼</span>
      <span class="hljs-keyword">const</span> value = <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">get</span>(target, key, receiver);
      <span class="hljs-comment">// 2. æ”¶é›†ä¾èµ–ï¼ˆå…³é”®ï¼šè®°å½•â€œè°åœ¨è®¿é—®è¿™ä¸ªå±æ€§â€ï¼‰</span>
      <span class="hljs-title function_">track</span>(target, key);
      <span class="hljs-comment">// 3. è‹¥è®¿é—®çš„æ˜¯åµŒå¥—å¯¹è±¡ï¼Œé€’å½’åˆ›å»ºä»£ç†ï¼ˆæ‡’ä»£ç†ï¼Œä¼˜åŒ–æ€§èƒ½ï¼‰</span>
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> value === <span class="hljs-string">'object'</span> &amp;&amp; value !== <span class="hljs-literal">null</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-title function_">reactive</span>(value);
      }
      <span class="hljs-keyword">return</span> value;
    },
    <span class="hljs-comment">// æ‹¦æˆªå±æ€§èµ‹å€¼</span>
    <span class="hljs-title function_">set</span>(<span class="hljs-params">target, key, value, receiver</span>) {
      <span class="hljs-comment">// 1. å…ˆè®¾ç½®åŸå§‹å±æ€§å€¼</span>
      <span class="hljs-keyword">const</span> oldValue = <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">get</span>(target, key, receiver);
      <span class="hljs-keyword">const</span> success = <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">set</span>(target, key, value, receiver);
      <span class="hljs-comment">// 2. è‹¥å€¼å‘ç”Ÿå˜åŒ–ï¼Œè§¦å‘ä¾èµ–æ›´æ–°</span>
      <span class="hljs-keyword">if</span> (success &amp;&amp; oldValue !== value) {
        <span class="hljs-title function_">trigger</span>(target, key);
      }
      <span class="hljs-keyword">return</span> success;
    },
    <span class="hljs-comment">// æ‹¦æˆªå±æ€§åˆ é™¤</span>
    <span class="hljs-title function_">deleteProperty</span>(<span class="hljs-params">target, key</span>) {
      <span class="hljs-keyword">const</span> success = <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">deleteProperty</span>(target, key);
      <span class="hljs-keyword">if</span> (success) {
        <span class="hljs-title function_">trigger</span>(target, key); <span class="hljs-comment">// åˆ é™¤å±æ€§ä¹Ÿè§¦å‘æ›´æ–°</span>
      }
      <span class="hljs-keyword">return</span> success;
    }
  });
}
</code></pre>
<ul>
<li>ç”¨ <code>Reflect</code> æ“ä½œåŸå§‹å¯¹è±¡ï¼ŒReflect æ˜¯ ES6 æ–°å¢çš„å†…ç½®å¯¹è±¡ï¼Œæä¾›äº†ä¸ Proxy é™·é˜±å¯¹åº”çš„æ–¹æ³•ï¼Œæ¯”å¦‚ <code>Relect.get</code>ã€<code>Reflect.set</code> ç¡®ä¿æ“ä½œåŸå§‹å¯¹è±¡çš„è¡Œä¸ºä¸€ç›´ï¼ŒåŒæ—¶é¿å…ç›´æ¥æ“ä½œ target æ‰€äº§ç”Ÿçš„é—®é¢˜</li>
<li>åµŒå¥—å¯¹è±¡æ‡’ä»£ç†ï¼šProxy ä»…ä»£ç†å½“å‰å±‚çº§å¯¹è±¡ï¼Œå½“è®¿é—®åµŒå¥—å¯¹è±¡ ï¼ˆproxy.user.nameï¼‰æ—¶ï¼Œæ‰é€’å½’å¯¹ user å¯¹è±¡åˆ›å»ºä»£ç†ï¼Œé¿å…åˆå§‹åŒ–æ—¶é€’å½’éå†æ‰€æœ‰å±æ€§ï¼Œä¼˜åŒ–æ€§èƒ½</li>
</ul>
<h4 data-id="heading-18">2. ä¾èµ–æ”¶é›†</h4>
<p>Vue3 ç”¨ã€Œä¸‰å±‚æ˜ å°„ã€å­˜å‚¨ä¾èµ–ï¼Œç¡®ä¿ç²¾å‡†å®šä½</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// WeakMapï¼škey æ˜¯è¢«ä»£ç†çš„åŸå§‹å¯¹è±¡ï¼ˆtargetï¼‰ï¼Œvalue æ˜¯è¯¥å¯¹è±¡çš„å±æ€§-ä¾èµ–æ˜ å°„</span>
<span class="hljs-keyword">const</span> targetMap = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WeakMap</span>();

<span class="hljs-keyword">function</span> <span class="hljs-title function_">track</span>(<span class="hljs-params">target, key</span>) {
  <span class="hljs-comment">// 1. è‹¥æ²¡æœ‰å½“å‰ç›®æ ‡å¯¹è±¡çš„æ˜ å°„ï¼Œåˆ›å»ºä¸€ä¸ªï¼ˆMapï¼škey æ˜¯å±æ€§åï¼Œvalue æ˜¯ä¾èµ–é›†åˆï¼‰</span>
  <span class="hljs-keyword">if</span> (!targetMap.<span class="hljs-title function_">has</span>(target)) {
    targetMap.<span class="hljs-title function_">set</span>(target, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>());
  }
  <span class="hljs-keyword">const</span> depsMap = targetMap.<span class="hljs-title function_">get</span>(target);

  <span class="hljs-comment">// 2. è‹¥æ²¡æœ‰å½“å‰å±æ€§çš„ä¾èµ–é›†åˆï¼Œåˆ›å»ºä¸€ä¸ªï¼ˆSetï¼šå­˜å‚¨ä¾èµ–å‡½æ•°ï¼Œå»é‡ï¼‰</span>
  <span class="hljs-keyword">if</span> (!depsMap.<span class="hljs-title function_">has</span>(key)) {
    depsMap.<span class="hljs-title function_">set</span>(key, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>());
  }
  <span class="hljs-keyword">const</span> deps = depsMap.<span class="hljs-title function_">get</span>(key);

  <span class="hljs-comment">// 3. å°†å½“å‰æ´»è·ƒçš„ä¾èµ–å‡½æ•°ï¼ˆeffectï¼‰æ·»åŠ åˆ°é›†åˆä¸­</span>
  <span class="hljs-keyword">if</span> (activeEffect) {
    deps.<span class="hljs-title function_">add</span>(activeEffect);
  }
}
</code></pre>
<p>ä¼šäº§ç”Ÿä¸€ä¸ªè¿™æ ·çš„ç»“æ„</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
	<span class="hljs-string">""</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h4 data-id="heading-19">3. æ•°æ®ä¿®æ”¹ï¼ˆè§¦å‘ set/deleteProperty çš„é™·é˜±ï¼‰</h4>
<p>å½“é€šè¿‡ä»£ç†å¯¹è±¡ä¿®æ”¹å±æ€§ï¼ˆå¦‚ <code>proxy.name = 'newName'</code>ï¼‰æˆ–åˆ é™¤å±æ€§ï¼ˆå¦‚ <code>delete proxy.age</code>ï¼‰æ—¶ï¼Œä¼šè§¦å‘å¯¹åº”çš„ Proxy é™·é˜±ï¼ˆ<code>set</code> æˆ– <code>deleteProperty</code>ï¼‰ã€‚</p>
<p>é™·é˜±å‡½æ•°ä¼šå…ˆæ›´æ–°åŸå§‹å¯¹è±¡çš„å±æ€§å€¼ï¼Œå†åˆ¤æ–­å€¼æ˜¯å¦çœŸçš„å‘ç”Ÿå˜åŒ–ï¼ˆé¿å…æ— æ•ˆæ›´æ–°ï¼‰</p>
<h4 data-id="heading-20">4. è§¦å‘æ›´æ–° ï¼ˆtigger å‡½æ•°ï¼‰</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">trigger</span>(<span class="hljs-params">target, key</span>) {
  <span class="hljs-comment">// 1. ä» targetMap ä¸­è·å–å½“å‰å¯¹è±¡çš„å±æ€§-ä¾èµ–æ˜ å°„</span>
  <span class="hljs-keyword">const</span> depsMap = targetMap.<span class="hljs-title function_">get</span>(target);
  <span class="hljs-keyword">if</span> (!depsMap) <span class="hljs-keyword">return</span>;

  <span class="hljs-comment">// 2. è·å–å½“å‰å±æ€§çš„æ‰€æœ‰ä¾èµ–</span>
  <span class="hljs-keyword">const</span> deps = depsMap.<span class="hljs-title function_">get</span>(key);
  <span class="hljs-keyword">if</span> (!deps) <span class="hljs-keyword">return</span>;

  <span class="hljs-comment">// 3. æ‰§è¡Œæ‰€æœ‰ä¾èµ–å‡½æ•°ï¼ˆè§¦å‘æ›´æ–°ï¼‰</span>
  deps.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">effect</span> =&gt;</span> <span class="hljs-title function_">effect</span>());
}
</code></pre>
<h3 data-id="heading-21">2. Proxy ä¸åšçš„äº‹æƒ…</h3>
<ul>
<li>ä¸è®¡ç®—è¡¨è¾¾å¼ï¼ˆæ¯”å¦‚ user.name + "åç¼€"çš„ç»“æœï¼ŒProxy ä¸ç®¡ï¼‰</li>
<li>ä¸æ“ä½œ UIï¼ˆä¸ç®¡æ˜¯ DOM å’Œ Native æ§ä»¶ï¼ŒProxy éƒ½ä¸ç¢°ï¼‰</li>
<li>ä¸è·¨ç«¯é€šä¿¡</li>
</ul>
<p>ä¸ºä»€ä¹ˆ Native ç»„ä»¶ä¸èƒ½è®© Proxy â€œè§£å†³â€ï¼Ÿ</p>
<p>æ ¸å¿ƒçŸ›ç›¾ï¼šæ¸²æŸ“è½½ä½“ä¸åŒã€‚Proxy ä¹‹æ‰€ä»¥åœ¨ Web ç«¯èƒ½ â€œé—´æ¥é©±åŠ¨ UIâ€ï¼Œæ˜¯å› ä¸º Web ç«¯æœ‰ä¸ªã€Œä¸­é—´æ¡¥æ¢ã€â€”â€” DOMï¼Œä¸” JS ç«¯æœ‰å®Œæ•´çš„ DOM APIï¼ˆæ¯”å¦‚ <code>document.getElementById</code>ã€<code>element.style.setProperty</code>ï¼‰ï¼š</p>
<p>Web ç«¯å®Œæ•´é“¾è·¯ï¼šProxy è§¦å‘æ›´æ–° â†’ Vue è¿è¡Œæ—¶è®¡ç®—è¡¨è¾¾å¼ â†’ è™šæ‹Ÿ DOM diff â†’ è°ƒç”¨ DOM API æ“ä½œ DOM â†’ UI æ›´æ–°</p>
<ul>
<li><strong>JS ç«¯æ²¡æœ‰æ“ä½œ Native æ§ä»¶çš„ API</strong>ï¼šæµè§ˆå™¨ç»™ JS æš´éœ²äº† DOM APIï¼Œä½† iOS/Android ç³»ç»Ÿä¸ä¼šç»™ JS å¼•æ“æš´éœ² â€œä¿®æ”¹ <code>UILabel</code> æ–‡æœ¬â€â€œè®¾ç½® <code>UIImageView</code> å›¾ç‰‡â€ çš„ API â€”â€” JS ç«¯è¿ Native æ§ä»¶çš„ â€œå¼•ç”¨â€ éƒ½æ‹¿ä¸åˆ°ï¼Œæ›´åˆ«è¯´æ›´æ–°äº†ï¼›</li>
<li><strong>Native æ§ä»¶ä¸åœ¨ JS è¿è¡Œæ—¶çš„å†…å­˜ç©ºé—´</strong>ï¼šJS å¼•æ“ï¼ˆå¦‚ V8ã€JSCï¼‰å’Œ Native åº”ç”¨æ˜¯ä¸¤ä¸ªç‹¬ç«‹çš„ â€œè¿›ç¨‹ / è™šæ‹Ÿæœºâ€ï¼Œå†…å­˜ä¸å…±äº« â€”â€” Proxy æ‰€åœ¨çš„ JS å†…å­˜é‡Œï¼Œæ ¹æœ¬æ²¡æœ‰ Native æ§ä»¶çš„å®ä¾‹ï¼Œæƒ³æ“ä½œéƒ½æ— ä»ä¸‹æ‰‹</li>
</ul>
<p>Weex çš„è®¾è®¡ä¼˜é›…ä¹‹å¤„åœ¨äºï¼šNative æ‰˜ç®¡â€œæ‰§è¡Œå±‚â€ï¼ŒProxy ä¿ç•™â€œè§¦å‘å±‚â€ã€‚å“åº”å¼å·¥ä½œç»§ç»­å¤ç”¨ç°æœ‰é€»è¾‘ï¼Œç”± Proxy å®Œæˆï¼Œæœ€åçš„æ‰§è¡Œå±‚ç”± Native å®ç°ï¼Œä¹Ÿå°±æ˜¯ WXComponent+DataBinding</p>
<ul>
<li><strong>å“åº”å¼ç³»ç»Ÿï¼ˆProxyï¼‰çš„æ ¸å¿ƒæ˜¯ â€œå‘ç°å˜åŒ–â€</strong>ï¼šä¸ç®¡æ˜¯ Web è¿˜æ˜¯ Weexï¼ŒProxy éƒ½åªå¹²è¿™ä»¶äº‹ï¼›</li>
<li><strong>UI æ›´æ–°çš„æ ¸å¿ƒæ˜¯ â€œæ“ä½œæ¸²æŸ“è½½ä½“â€</strong>ï¼šWeb ç«¯æ“ä½œ DOMï¼ˆJS ç«¯èƒ½åšï¼‰ï¼ŒWeex ç«¯æ“ä½œ Native æ§ä»¶ï¼ˆåªèƒ½ Native ç«¯åšï¼‰ï¼›</li>
<li><strong>WXComponent+DataBinding çš„è§’è‰²æ˜¯ â€œNative ç«¯çš„ UI æ‰§è¡Œå™¨â€</strong>ï¼šå®ƒä¸æ˜¯æ›¿ä»£ Proxyï¼Œè€Œæ˜¯ Proxy è§¦å‘æ›´æ–°åï¼Œè´Ÿè´£æŠŠ â€œæ›´æ–°é€šçŸ¥â€ è½åœ°åˆ° Native æ§ä»¶ä¸Šçš„å”¯ä¸€é€”å¾„</li>
</ul>
<h2 data-id="heading-22">å…­ã€Weex è‡ªå®šä¹‰ç»„ä»¶æ˜¯å¦‚ä½•å·¥ä½œçš„</h2>
<p>ä¸Šé¢åˆ†æäº†è‡ªå®šä¹‰ç»„ä»¶çš„æ•°æ®å˜åŒ–å’Œè¡¨è¾¾å¼è¿ç®—æ˜¯ Native è´Ÿè´£çš„ï¼Œæ‰§è¡Œå±‚ä¹Ÿå°±æ˜¯ <code>WXComponent+DataBinding.mm</code> è¿™ä¸ªç±»ã€‚</p>
<p>ä¸€è¨€ä»¥è”½ä¹‹å°±æ˜¯ï¼šæŠŠ JS ç«¯ä¼ é€’çš„â€œåŸå§‹æ•°æ®â€ï¼Œé€šè¿‡é¢„ç¼–è¯‘çš„ç»‘å®šè§„åˆ™ï¼ˆBlockï¼‰è®¡ç®—å‡º Native ç»„ä»¶éœ€è¦çš„æœ€ç»ˆå€¼ï¼Œå¹¶è‡ªåŠ¨æ›´æ–° UI ç»„ä»¶ï¼ŒåŒæ—¶é€‚é…é•¿åˆ—è¡¨ç»„ä»¶ç­‰å¤æ‚åœºæ™¯çš„ UI ä¼˜åŒ–ã€‚</p>
<p>è¯¥åˆ†ç±»ä¸ºæ‰€æœ‰ç»§æ‰¿è‡ª WXComponent çš„ç»„ä»¶ï¼Œæ³¨å…¥â€œæ•°æ®ç»‘å®šèƒ½åŠ›â€ï¼Œæ— éœ€æ‰‹åŠ¨å®ç°ã€‚</p>
<h3 data-id="heading-23">1. ç»‘å®šè§„åˆ™çš„â€œç¼–è¯‘å­˜å‚¨â€ï¼ŒæŠŠ JS è¡¨è¾¾å¼è½¬æ¢ä¸º Native å¯æ‰§è¡Œçš„ block</h3>
<p>æ•°æ®ç»‘å®šçš„ã€Œå‰ç½®å‡†å¤‡ã€ï¼šåœ¨ç»„ä»¶åˆå§‹åŒ–æ—¶ï¼Œè§£æ JS ç«¯ä¼ é€’çš„ç»‘å®šè§„åˆ™ï¼ˆå¦‚ <code>[[user.name]]</code>ã€<code>[[repeat]]</code>ï¼‰ï¼Œç¼–è¯‘ä¸º Native å¯æ‰§è¡Œçš„ <code>WXDataBindingBlock</code>ï¼ˆä»£ç å—ï¼‰ï¼Œå¹¶å­˜å‚¨åˆ°ç»„ä»¶çš„ç»‘å®šæ˜ å°„è¡¨ä¸­ï¼ˆ<code>_bindingProps/_bindingStyles/_bindingEvents</code> ç­‰ï¼‰</p>
<pre><code class="hljs language-objective-c" lang="objective-c">- (void)_storeBindingsWithProps:(NSDictionary *)props styles:(NSDictionary *)styles attributes:(NSDictionary *)attributes events:(NSDictionary *)events;
</code></pre>
<p>æ¥æ”¶ç»„ä»¶çš„ props/attrbutes/styles/events ä¸­çš„ç»‘å®šè§„åˆ™ï¼Œè§£æå¹¶å­˜å‚¨ä¸ºå¯æ‰§è¡Œçš„ blockã€‚</p>
<ol>
<li><strong>è¯†åˆ«ç»‘å®šè¡¨è¾¾å¼</strong>ï¼šåˆ¤æ–­æ˜¯å¦åŒ…å« <code>WXBindingIdentify</code>ï¼ˆ<code>@"@binding"</code>ï¼‰æ ‡è®°ï¼Œæ¯”å¦‚ <code>{"src": {"@binding": "user.name"}}</code>ï¼›</li>
<li><strong>AST è§£æ</strong>ï¼šé€šè¿‡ <code>WXJSASTParser</code> æŠŠç»‘å®šè¡¨è¾¾å¼å­—ç¬¦ä¸²ï¼ˆå¦‚ <code>"user.name + 'åç¼€'"</code>ï¼‰è§£æä¸º AST èŠ‚ç‚¹ï¼ˆ<code>WXJSExpression</code>ï¼‰ï¼›</li>
<li><strong>ç”Ÿæˆæ‰§è¡Œ Block</strong>ï¼šè°ƒç”¨ <code>-bindingBlockWithExpression:</code> æŠŠ AST èŠ‚ç‚¹è½¬æˆ <code>WXDataBindingBlock</code>ï¼ˆåç»­æ•°æ®å˜åŒ–æ—¶ç›´æ¥æ‰§è¡Œè¯¥ Block è®¡ç®—ç»“æœï¼‰ï¼›</li>
<li>åˆ†ç±»å­˜å‚¨ï¼šæŒ‰ç»‘å®šç±»å‹ï¼ˆå±æ€§ / æ ·å¼ / äº‹ä»¶ / ç‰¹æ®Šç»‘å®šï¼‰å­˜å…¥å¯¹åº”çš„æ˜ å°„è¡¨ï¼š
<ul>
<li><code>_bindingProps</code>ï¼šå±æ€§ç»‘å®šï¼ˆå¦‚ <code>src</code>ï¼‰ï¼›</li>
<li><code>_bindingStyles</code>ï¼šæ ·å¼ç»‘å®šï¼ˆå¦‚ <code>fontSize</code>ï¼‰ï¼›</li>
<li><code>_bindingEvents</code>ï¼šäº‹ä»¶ç»‘å®šï¼ˆå¦‚ <code>onClick</code> å‚æ•°ï¼‰ï¼›</li>
<li>ç‰¹æ®Šç»‘å®šï¼š<code>_bindingRepeat</code>ï¼ˆ<code>[[repeat]]</code> å¯¹åº” <code>v-for</code>ï¼‰ã€<code>_bindingMatch</code>ï¼ˆ<code>[[match]]</code> å¯¹åº” <code>v-if</code>ï¼‰ã€<code>_dataBindOnce</code>ï¼ˆ<code>[[once]]</code> å¯¹åº” <code>v-once</code>ï¼‰ã€‚</li>
</ul>
</li>
</ol>
<h3 data-id="heading-24">2. WXComponentManager éƒ½åšäº†ä»€ä¹ˆ</h3>
<p><code>WXComponentManager</code> æ˜¯ Weex iOS ç«¯çš„ <strong>ç»„ä»¶å…¨ç”Ÿå‘½å‘¨æœŸä¸ä»»åŠ¡è°ƒåº¦æ ¸å¿ƒ</strong>ï¼Œæ‰€æœ‰ä¸ Native ç»„ä»¶ç›¸å…³çš„æ“ä½œï¼ˆåˆ›å»ºã€æ›´æ–°ã€å¸ƒå±€ã€é”€æ¯ã€äº‹ä»¶ç»‘å®šï¼‰éƒ½ç”±å®ƒç»Ÿä¸€ç®¡ç†ï¼ŒåŒæ—¶æ‰¿æ‹…ã€Œçº¿ç¨‹åˆ†å·¥åè°ƒã€UI ä»»åŠ¡æ‰¹é‡å¤„ç†ã€æ€§èƒ½ç›‘æ§ã€ç­‰å…³é”®èŒè´£ï¼Œæ˜¯è¿æ¥ JS æŒ‡ä»¤ã€Native ç»„ä»¶ã€å¸ƒå±€å¼•æ“å’Œ UI æ¸²æŸ“çš„ â€œä¸­æ¢å¤§è„‘â€ã€‚</p>
<h4 data-id="heading-25">1. ç»„ä»¶çº¿ç¨‹ç®¡ç†</h4>
<p>ç»„ä»¶ä¸šåŠ¡çš„ â€œä¸“å±æ‰§è¡Œç¯å¢ƒâ€ï¼Œä½œä¸ºç»„ä»¶çº¿ç¨‹çš„ã€Œåˆ›å»ºè€…å’Œç»´æŠ¤è€…ã€ï¼Œ<code>WXComponentManager</code> ç¡®ä¿æ‰€æœ‰ç»„ä»¶æ ¸å¿ƒæ“ä½œéƒ½åœ¨<strong>å…¨å±€å”¯ä¸€çš„ç»„ä»¶çº¿ç¨‹</strong>ä¸­æ‰§è¡Œï¼Œé¿å…çº¿ç¨‹å®‰å…¨é—®é¢˜å’Œä¸»çº¿ç¨‹é˜»å¡ã€‚</p>
<p>æ ¸å¿ƒå·¥ä½œï¼š</p>
<ul>
<li>æ‡’åŠ è½½åˆ›å»ºå…¨å±€ç»„ä»¶çº¿ç¨‹ï¼ˆ<code>+componentThread</code>ï¼‰ï¼Œå¯åŠ¨ RunLoop ç¡®ä¿çº¿ç¨‹å¸¸é©»ï¼ˆ<code>_runLoopThread</code>ï¼‰</li>
<li>æä¾›çº¿ç¨‹è°ƒåº¦æ¥å£ï¼š<code>WXPerformBlockOnComponentThread</code>ï¼ˆå¼‚æ­¥ï¼‰ã€<code>WXPerformBlockSyncOnComponentThread</code>ï¼ˆåŒæ­¥ï¼‰ï¼Œè®©å¤–éƒ¨æ¨¡å—ï¼ˆå¦‚ <code>WXBridgeManager</code>ï¼‰èƒ½å°†ç»„ä»¶ä»»åŠ¡æäº¤åˆ°ç»„ä»¶çº¿ç¨‹</li>
<li>çº¿ç¨‹æ–­è¨€çº¦æŸï¼šæ‰€æœ‰ç»„ä»¶æ ¸å¿ƒæ–¹æ³•ï¼ˆå¦‚ <code>createBody</code>ã€<code>updateStyles</code>ï¼‰å¼€å¤´éƒ½æœ‰ <code>WXAssertComponentThread</code>ï¼Œå¼ºåˆ¶ç»„ä»¶æ“ä½œåœ¨ç»„ä»¶çº¿ç¨‹æ‰§</li>
</ul>
<h4 data-id="heading-26">2. ç»„ä»¶æ ‘æ„å»ºä¸ç®¡ç†ï¼šç»„ä»¶çš„ â€œå¢åˆ æ”¹æŸ¥â€ å…¨ç”Ÿå‘½å‘¨æœŸ</h4>
<p>æ ¸å¿ƒå·¥ä½œï¼š</p>
<ul>
<li>åˆ›å»ºç»„ä»¶
<ul>
<li>æ ¹ç»„ä»¶åˆ›å»ºï¼ˆ<code>createBody:</code>ï¼‰ï¼šæ¥æ”¶ JS ç«¯æ ¹ç»„ä»¶æŒ‡ä»¤ï¼Œåˆ›å»ºé¡µé¢æ ¹ç»„ä»¶ï¼ˆå¦‚ <code>&lt;div&gt;</code> æ ¹èŠ‚ç‚¹ï¼‰ï¼Œç»‘å®šåˆ°é¡µé¢æ ¹è§†å›¾ï¼›</li>
<li>å­ç»„ä»¶åˆ›å»ºï¼ˆ<code>addComponent:type:parentRef:</code>ï¼‰ï¼šæ ¹æ® JS ç«¯æŒ‡ä»¤ï¼Œåˆ›å»ºå­ç»„ä»¶å¹¶å…³è”çˆ¶ç»„ä»¶ï¼Œå­˜å…¥ <code>_indexDict</code>ï¼ˆç»„ä»¶ ref â†’ å®ä¾‹æ˜ å°„ï¼Œå¿«é€ŸæŸ¥æ‰¾ï¼‰ã€‚</li>
</ul>
</li>
<li>æ›´æ–°ç»„ä»¶å…³ç³»
<ul>
<li>ç§»åŠ¨ç»„ä»¶ï¼ˆ<code>moveComponent:toSuper:atIndex:</code>ï¼‰ï¼šè°ƒæ•´ç»„ä»¶åœ¨ç»„ä»¶æ ‘ä¸­çš„ä½ç½®ï¼ŒåŒæ­¥æ›´æ–°è§†å›¾å±‚çº§ï¼›</li>
<li>åˆ é™¤ç»„ä»¶ï¼ˆ<code>removeComponent:</code>ï¼‰ï¼šä»ç»„ä»¶æ ‘å’Œç´¢å¼•å­—å…¸ä¸­ç§»é™¤ç»„ä»¶ï¼Œé€’å½’åˆ é™¤å­ç»„ä»¶ï¼Œé‡Šæ”¾è§†å›¾èµ„æºã€‚</li>
</ul>
</li>
<li>ç»„ä»¶æŸ¥è¯¢ä¸éå†
<ul>
<li>æŒ‰ ref æŸ¥æ‰¾ç»„ä»¶ï¼ˆ<code>componentForRef:</code>ï¼‰ï¼šä¾› JS ç«¯ <code>this.$refs</code> è®¿é—®åŸç”Ÿç»„ä»¶å®ä¾‹ï¼›</li>
<li>éå†ç»„ä»¶æ ‘ï¼ˆ<code>enumerateComponentsUsingBlock:</code>ï¼‰ï¼šæ”¯æŒé€’å½’éå†æ‰€æœ‰ç»„ä»¶ï¼ˆå¦‚æ€§èƒ½ç»Ÿè®¡ã€å…¨å±€æ ·å¼æ›´æ–°ï¼‰</li>
</ul>
</li>
</ul>
<h4 data-id="heading-27">3.  æ•°æ®ç»‘å®šè¾…åŠ©ï¼šç»‘å®šè§„åˆ™çš„æå–ä¸å­˜å‚¨</h4>
<p>é…åˆ <code>WXComponent+DataBinding</code> æ¨¡å—ï¼Œ<code>WXComponentManager</code> åœ¨ç»„ä»¶åˆ›å»ºæ—¶ï¼Œä» JS ç«¯ä¼ é€’çš„ <code>props</code>/<code>styles</code>/<code>attributes</code> ä¸­æå–ã€Œç»‘å®šè¡¨è¾¾å¼é…ç½®ã€ï¼Œä¸ºå“åº”å¼æ›´æ–°é“ºè·¯ã€‚æ ¸å¿ƒå·¥ä½œï¼š</p>
<ul>
<li>æå–ç»‘å®šè§„åˆ™ï¼š
<ul>
<li><code>_extractBindings:</code>ï¼šä»æ ·å¼ / å±æ€§ä¸­æå– <code>[[repeat]]</code>/<code>{"@binding": "expr"}</code> ç­‰ç»‘å®šé…ç½®ï¼Œç§»é™¤åŸå§‹å­—å…¸ä¸­çš„ç»‘å®šå­—æ®µï¼ˆé¿å…å¹²æ‰°æ™®é€šå±æ€§å¤„ç†ï¼‰</li>
<li><code>_extractBindingEvents:</code>ï¼šä»äº‹ä»¶æ•°ç»„ä¸­æå–ç»‘å®šå‚æ•°ï¼ˆå¦‚ <code>onClick</code> çš„å›è°ƒè¡¨è¾¾å¼ï¼‰ï¼›</li>
<li><code>_extractBindingProps:</code>ï¼šæå–ç»„ä»¶è‡ªå®šä¹‰ props ç»‘å®šï¼ˆ<code>@componentProps</code>ï¼‰ã€‚</li>
</ul>
</li>
<li>å­˜å‚¨ç»‘å®šè§„åˆ™ï¼šè°ƒç”¨ç»„ä»¶çš„ <code>_storeBindingsWithProps:styles:attributes:events:</code>ï¼Œå°†æå–çš„ç»‘å®šé…ç½®å­˜å…¥ç»„ä»¶å®ä¾‹ï¼Œåç»­æ•°æ®å˜åŒ–æ—¶è§¦å‘è¡¨è¾¾å¼è®¡ç®—ã€‚</li>
</ul>
<h4 data-id="heading-28">4. ç»„ä»¶æ›´æ–°è°ƒåº¦ï¼šæ ·å¼ / å±æ€§ / äº‹ä»¶çš„ â€œåŒæ­¥ä¸æ‰§è¡Œâ€</h4>
<p>å½“ JS ç«¯è§¦å‘ç»„ä»¶æ›´æ–°ï¼ˆå¦‚ä¿®æ”¹æ ·å¼ã€å±æ€§ã€ç»‘å®šäº‹ä»¶ï¼‰æ—¶ï¼Œ<code>WXComponentManager</code> è´Ÿè´£ã€Œè·¨çº¿ç¨‹è°ƒåº¦ã€æ•°æ®é¢„å¤„ç†ã€UI åŒæ­¥ã€ï¼Œç¡®ä¿æ›´æ–°æµç¨‹é«˜æ•ˆä¸”å®‰å…¨ã€‚</p>
<ul>
<li>æ ·å¼æ›´æ–°ï¼ˆ<code>updateStyles:forComponent:</code>ï¼‰
<ul>
<li>ç»„ä»¶çº¿ç¨‹ï¼šè¿‡æ»¤æ— æ•ˆæ ·å¼ï¼ˆå¦‚ç©ºå€¼ï¼‰ï¼Œæ›´æ–°ç»„ä»¶å®ä¾‹çš„æ ·å¼æ•°æ®ï¼Œè§¦å‘å¸ƒå±€è®¡ç®—ï¼›</li>
<li>ä¸»çº¿ç¨‹ï¼šé€šè¿‡ <code>_addUITask</code> å°†æ ·å¼æ›´æ–°ä»»åŠ¡ï¼ˆå¦‚è®¾ç½® <code>CALayer.backgroundColor</code>ã€<code>UILabel.font</code>ï¼‰æ‰¹é‡è°ƒåº¦åˆ°ä¸»çº¿ç¨‹æ‰§è¡Œã€‚</li>
</ul>
</li>
<li><strong>å±æ€§æ›´æ–°ï¼ˆ<code>updateAttributes:forComponent:</code>ï¼‰</strong>ï¼šç±»ä¼¼æ ·å¼æ›´æ–°ï¼Œç»„ä»¶çº¿ç¨‹å¤„ç†æ•°æ®é€»è¾‘ï¼Œä¸»çº¿ç¨‹æ›´æ–°åŸç”Ÿç»„ä»¶å±æ€§ï¼ˆå¦‚ <code>UIImageView.image</code>ã€<code>UIScrollView.contentOffset</code>ï¼‰ã€‚</li>
<li>äº‹ä»¶ç»‘å®š / è§£ç»‘
<ul>
<li>ç»„ä»¶çº¿ç¨‹ï¼šç»´æŠ¤ç»„ä»¶çš„äº‹ä»¶åˆ—è¡¨ï¼ˆå¦‚ <code>click</code>/<code>scroll</code>ï¼‰ï¼›</li>
<li>ä¸»çº¿ç¨‹ï¼šç»‘å®š / ç§»é™¤åŸç”Ÿæ‰‹åŠ¿è¯†åˆ«å™¨ï¼ˆå¦‚ <code>UITapGestureRecognizer</code>ï¼‰ï¼Œæ•è·ç”¨æˆ·äº¤äº’ã€‚</li>
</ul>
</li>
<li><strong>æ‰¹é‡æ›´æ–°ä¼˜åŒ–</strong>ï¼šé€šè¿‡ <code>performBatchBegin</code>/<code>performBatchEnd</code> æ ‡è®°æ‰¹é‡æ›´æ–°èŒƒå›´ï¼Œåˆå¹¶å¤šä¸ª UI ä»»åŠ¡ï¼Œå‡å°‘ä¸»çº¿ç¨‹è°ƒåº¦æ¬¡æ•°ï¼ˆæå‡æ€§èƒ½ï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-29">5. å¸ƒå±€è°ƒåº¦ä¸ UI åŒæ­¥ï¼šä»å¸ƒå±€è®¡ç®—åˆ° UI æ¸²æŸ“</h4>
<p>Weex é‡‡ç”¨ Flex å¸ƒå±€å¼•æ“ï¼ˆYogaï¼‰ï¼Œ<code>WXComponentManager</code> è´Ÿè´£å¸ƒå±€è®¡ç®—çš„è§¦å‘ã€ç»„ä»¶ frame åˆ†é…ã€UI ä»»åŠ¡æ‰¹é‡æ‰§è¡Œï¼Œç¡®ä¿ç»„ä»¶æŒ‰é¢„æœŸä½ç½®æ¸²æŸ“ã€‚</p>
<ul>
<li>è§¦å‘å¸ƒå±€è®¡ç®—ï¼šç»„ä»¶æ›´æ–°ã€æ ¹è§†å›¾å°ºå¯¸å˜åŒ–ï¼ˆ<code>rootViewFrameDidChange:</code>ï¼‰æ—¶ï¼Œè°ƒç”¨ <code>_layoutAndSyncUI</code> è§¦å‘ <code>WXCoreBridge</code> æ‰§è¡Œ Yoga å¸ƒå±€è®¡ç®—ï¼Œå¾—åˆ°æ‰€æœ‰ç»„ä»¶çš„ frameã€‚</li>
<li>åˆ†é…ç»„ä»¶ frameï¼š<code>layoutComponent:frame:isRTL:innerMainSize:</code> å°†è®¡ç®—åçš„ frame åˆ†é…ç»™ç»„ä»¶ï¼Œè‹¥ä¸ºæ ¹ç»„ä»¶ï¼ŒåŒæ­¥æ›´æ–°é¡µé¢æ ¹è§†å›¾å°ºå¯¸ï¼ˆé€‚é… <code>wrap_content</code> æ¨¡å¼ï¼‰ã€‚</li>
<li>UI ä»»åŠ¡åŒæ­¥ï¼š<code>_syncUITasks</code> æ‰¹é‡æ‰§è¡Œ <code>_uiTaskQueue</code> ä¸­çš„ UI ä»»åŠ¡ï¼ˆå¦‚ <code>addSubview</code>ã€<code>setFrame</code>ï¼‰ï¼Œå¼‚æ­¥è°ƒåº¦åˆ°ä¸»çº¿ç¨‹ï¼Œé¿å…é¢‘ç¹ä¸»çº¿ç¨‹åˆ‡æ¢å¯¼è‡´æ‰å¸§ã€‚</li>
<li>å¸§ç‡åŒæ­¥ï¼šé€šè¿‡ <code>WXDisplayLinkManager</code> ç›‘å¬å±å¹•åˆ·æ–°ç‡ï¼ˆ60fpsï¼‰ï¼Œç¡®ä¿å¸ƒå±€æ›´æ–°ä¸å¸§ç‡åŒæ­¥ï¼Œæå‡æ¸²æŸ“æµç•…åº¦ã€‚</li>
</ul>
<h4 data-id="heading-30">6. ç”Ÿå‘½å‘¨æœŸä¸èµ„æºé‡Šæ”¾ï¼šé¡µé¢å¸è½½æ—¶çš„ â€œæ¸…ç†å·¥ä½œâ€</h4>
<p>å½“ Weex é¡µé¢é”€æ¯ï¼ˆ<code>WXSDKInstance</code> å¸è½½ï¼‰æ—¶ï¼Œ<code>WXComponentManager</code> è´Ÿè´£æ¸…ç†ç»„ä»¶èµ„æºï¼Œé¿å…å†…å­˜æ³„æ¼ã€‚</p>
<p>æ ¸å¿ƒå·¥ä½œï¼ˆ<code>unload</code> æ–¹æ³•ï¼‰ï¼š</p>
<ul>
<li>åœæ­¢å¸ƒå±€è°ƒåº¦ï¼šè°ƒç”¨ <code>_stopDisplayLink</code>ï¼Œåœæ­¢å¸§ç‡ç›‘å¬å’Œå¸ƒå±€è®¡ç®—ï¼›</li>
<li>è§£ç»‘æ¸²æŸ“èµ„æºï¼šéå†æ‰€æœ‰ç»„ä»¶ï¼Œè§£é™¤ä¸åº•å±‚æ¸²æŸ“å¯¹è±¡ï¼ˆ<code>RenderObject</code>ï¼‰çš„ç»‘å®šï¼›</li>
<li>é‡Šæ”¾ UI èµ„æºï¼šè°ƒåº¦åˆ°ä¸»çº¿ç¨‹ï¼Œé”€æ¯æ‰€æœ‰ç»„ä»¶çš„åŸç”Ÿè§†å›¾ï¼ˆ<code>_unloadViewWithReusing:</code>ï¼‰ï¼›</li>
<li>æ¸…ç©ºçŠ¶æ€ï¼šæ¸…ç©º <code>_indexDict</code>ã€<code>_uiTaskQueue</code>ã€<code>_fixedComponents</code> ç­‰å®¹å™¨ï¼Œè§£é™¤ä¸ <code>WXSDKInstance</code>çš„ç»‘å®šã€‚</li>
<li>æ¸…é™¤äº‹ä»¶ç»‘å®šï¼šæ¸…é™¤æ‰€æœ‰çš„äº‹ä»¶ã€æ‰‹åŠ¿ç­‰é€»è¾‘</li>
</ul>
<h2 data-id="heading-31">ä¸ƒã€WXModule çš„æ³¨å†Œæœºåˆ¶åŠå…¶è°ƒç”¨æµç¨‹</h2>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant JS as JSç¯å¢ƒ
    participant B as WXBridge
    participant MF as WXModuleFactory
    participant MM as WXModuleManager
    participant MI as Moduleå®ä¾‹
    participant MC as è‡ªå®šä¹‰Module

    Note over JS,MC: æ³¨å†Œé˜¶æ®µ
    MC-&gt;&gt;+MF: registerModule("customModule", MyModule.class)
    MF-&gt;&gt;MF: ç”ŸæˆModuleFactoryå¹¶ç¼“å­˜
    MF-&gt;&gt;MF: åå°„è§£æ@JSMethodæ–¹æ³•
    MF-&gt;&gt;B: å°†æ¨¡å—&amp;æ–¹æ³•ä¿¡æ¯ä¼ é€’ç»™JS

    Note over JS,MC: è°ƒç”¨é˜¶æ®µ
    JS-&gt;&gt;+B: weex.requireModule('customModule').myMethod(args)
    B-&gt;&gt;+MM: è°ƒç”¨ invokeModuleMethod
    MM-&gt;&gt;+MF: è·å–Moduleå®ä¾‹å’Œæ–¹æ³•Invoker
    MF-&gt;&gt;MF: æŸ¥æ‰¾/åˆ›å»ºModuleå®ä¾‹
    MF-&gt;&gt;MF: è·å–æ–¹æ³•Invoker
    MF-&gt;&gt;MM: è¿”å›å®ä¾‹å’ŒInvoker
    MM-&gt;&gt;+MI: é€šè¿‡Invoker.invokeè°ƒç”¨
    MI-&gt;&gt;+MC: æ‰§è¡ŒåŸç”Ÿæ–¹æ³•å®ç°
    MC-&gt;&gt;JS: é€šè¿‡callbackå›è°ƒJSï¼ˆå¯é€‰ï¼‰
</code></pre>
<h3 data-id="heading-32">1. WXModule çš„æ³¨å†Œåˆ†ä¸º Naitve æ³¨å†Œå’Œ JS æ³¨å†Œ</h3>
<ul>
<li><strong>Native æ³¨å†Œ</strong>ï¼šåœ¨ Native ç«¯ï¼Œè°ƒç”¨ <code>[WXSDKEngine registerModule:withClass:]</code> æ–¹æ³•ï¼ˆåœ¨ iOS ä¸­ï¼‰ ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¼šå°†è‡ªå®šä¹‰ Module çš„ç±»å’Œä¸€ä¸ªæ¨¡å—åç§°ï¼ˆä¾‹å¦‚ <code>TestModule</code>ï¼‰å»ºç«‹æ˜ å°„å…³ç³»ï¼Œå¹¶ç”Ÿæˆä¸€ä¸ª <code>ModuleFactory</code> å­˜å‚¨åœ¨ä¸€ä¸ªå…¨å±€çš„ Mapï¼ˆä¾‹å¦‚ <code>sModuleFactoryMap</code>ï¼‰ä¸­ã€‚åŒæ—¶ï¼Œå¦‚æœè¯¥ Module è¢«æ ‡è®°ä¸ºå…¨å±€ï¼ˆglobalï¼‰ï¼ŒSDK ä¼šç«‹å³åˆ›å»ºä¸€ä¸ªå®ä¾‹å¹¶ç¼“å­˜èµ·æ¥ã€‚</li>
<li><strong>JS æ³¨å†Œ</strong>ï¼šNative æ³¨å†Œå®Œæˆåï¼ŒWeex ä¼šå°†æ‰€æœ‰å·²æ³¨å†Œ Module çš„<strong>æ¨¡å—åç§°</strong>åŠå…¶<strong>æš´éœ²ç»™ JS çš„æ–¹æ³•ååˆ—è¡¨</strong>ï¼Œé€šè¿‡ <code>WXBridge</code>ï¼ˆJS-Native é€šä¿¡æ¡¥æ¢ï¼‰ä¼ é€’ç»™ JS å¼•æ“ã€‚è¿™æ ·ï¼ŒJS ç«¯å°±çŸ¥é“å­˜åœ¨å“ªäº›æ¨¡å—ä»¥åŠæ¯ä¸ªæ¨¡å—æœ‰å“ªäº›æ–¹æ³•å¯ä»¥è°ƒç”¨ã€‚</li>
</ul>
<h3 data-id="heading-33">2. å½“ JS è°ƒç”¨ Module æ–¹æ³•æ—¶</h3>
<ul>
<li>JS å‘èµ·è°ƒç”¨ï¼šåœ¨ JS ä»£ç ä¸­ï¼Œé€šè¿‡ <code>weex.requireModule('moduleName')</code> è·å–æ¨¡å—å®ä¾‹ ã€‚ç„¶ååŠå½±å…¶æ–¹æ³•ï¼Œæ¯”å¦‚ 'staream.fetch()options, callack)'</li>
<li>Bridge æ¡¥æ¥ï¼šJS å¼•æ“é€šè¿‡ JSBridge å°†è¿™æ¬¡è°ƒç”¨ï¼ˆåŒ…æ‹¬æ¨¡å—åã€æ–¹æ³•åã€å‚æ•°ç­‰ä¿¡æ¯ï¼‰ä¼ é€’ç»™ Native æ®µ</li>
<li>Native ç«¯æŸ¥æ‰¾ä¸æ‰§è¡Œï¼šNative ç«¯çš„ WXModuleManager æ ¹æ®æ¨¡å—åä»ä¹‹å‰æ³¨å†Œçš„å·¥å‚ä¸­è·å–åˆ›å»ºçš„ Module å®ä¾‹ï¼Œå¹¶æ ¹æ®æ–¹æ³•åæ‰¾åˆ°å¯¹åº”çš„ MethodInvokerã€‚MethodInvoker ä¼šé€šè¿‡åå°„æ‰‹æ®µè°ƒç”¨å…·ä½“çš„ Native æ–¹æ³•</li>
<li>ç»“æœå›è°ƒï¼šå¦‚æœæœ‰éœ€è¦ï¼ŒNative å¯ä»¥é€šè¿‡ WXModuleCallBack æˆ–è€… WXModuleKeepAliveCallBack å°†ç»“æœå›è°ƒç»™ JSã€‚WXModuleCallback åªèƒ½å›è°ƒ1æ¬¡ï¼Œè€Œ WXModuleKeepAliveCallback å¯ä»¥å¤šæ¬¡å›è°ƒ</li>
</ul>
<h3 data-id="heading-34">3. WXModuleProtocol çš„ä½œç”¨</h3>
<p><strong><code>WXModuleProtocol</code> æ˜¯ä¸€ä¸ªåè®®ï¼Œå®šä¹‰äº† Module çš„è¡Œä¸ºè§„èŒƒ</strong>ã€‚ä½ çš„è‡ªå®šä¹‰ Module å¿…é¡»éµå¾ªæ­¤åè®®ã€‚å®ƒå£°æ˜äº† Module éœ€è¦å®ç°çš„æ–¹æ³•æˆ–å±æ€§ï¼Œä¾‹å¦‚å¦‚ä½•æš´éœ²æ–¹æ³•ç»™ JSï¼ˆé€šè¿‡ <code>WX_EXPORT_METHOD</code> å®ï¼‰ã€æ–¹æ³•åœ¨å“ªä¸ªçº¿ç¨‹æ‰§è¡Œï¼ˆé€šè¿‡å®ç°ç‰¹å®šçš„æ–¹æ³•è¿”å›ç›®æ ‡çº¿ç¨‹ï¼Œä¾‹å¦‚ <code>targetExecuteThread</code>ï¼‰ã€ä»¥åŠå¦‚ä½•é€šè¿‡ <code>weexInstance</code> å±æ€§å¼±å¼•ç”¨æŒæœ‰å®ƒçš„ WXSDKInstance å®ä¾‹ã€‚
é€šè¿‡éµå¾ª <code>WXModuleProtocol</code>ï¼Œä½ è‡ªå®šä¹‰çš„ Module å°±èƒ½è¢« Weex SDK æ­£ç¡®è¯†åˆ«å’Œè°ƒ</p>
<h3 data-id="heading-35">4. WXModuleFactory çš„ä½œç”¨</h3>
<ol>
<li><strong>å­˜å‚¨é…ç½®</strong>ï¼šåœ¨æ³¨å†Œé˜¶æ®µï¼Œå®ƒä¼šç¼“å­˜ Module çš„é…ç½®ä¿¡æ¯ï¼Œä¾‹å¦‚æ¨¡å—åå’Œå¯¹åº”çš„å·¥å‚ç±»ï¼ˆ<code>WXModuleConfig</code>ï¼‰ã€‚</li>
<li><strong>æ–¹æ³•è§£æ</strong>ï¼šé€šè¿‡åå°„ï¼Œè§£æ Module ç±»ä¸­æ‰€æœ‰é€šè¿‡ <code>WX_EXPORT_METHOD</code> æˆ– <code>WX_EXPORT_METHOD_SYNC</code> å®æš´éœ²çš„æ–¹æ³•ï¼Œå¹¶ç”Ÿæˆæ–¹æ³•åä¸ <code>MethodInvoker</code>ï¼ˆå°è£…äº†åå°„è°ƒç”¨é€»è¾‘ï¼‰çš„æ˜ å°„å…³ç³»ã€‚</li>
<li>æä¾›å®ä¾‹ï¼šå½“ JS è°ƒç”¨ Module æ–¹æ³•æ—¶ï¼Œ<code>WXModuleManager</code> ä¼šé€šè¿‡ <code>WXModuleFactory</code> æ ¹æ®æ¨¡å—åè·å–æˆ–åˆ›å»º Module å®ä¾‹ï¼Œä»¥åŠå¯¹åº”æ–¹æ³•çš„ <code>MethodInvoker</code>ã€‚</li>
</ol>
<h2 data-id="heading-36">å…«ã€Weex åˆ†ä¸ºå‡ ä¸ªçº¿ç¨‹</h2>
<h3 data-id="heading-37">1. ä¸»çº¿ç¨‹</h3>
<p>æ ¸å¿ƒå®šä½ï¼šåº”ç”¨çš„ UI çº¿ç¨‹ï¼ˆä¸åŸç”Ÿ App ä¸»çº¿ç¨‹åŒæºï¼‰ï¼Œè´Ÿè´£ UI æ¸²æŸ“ã€ç”¨æˆ·äº¤äº’å“åº”ï¼Œ<strong>ç¦æ­¢è€—æ—¶æ“ä½œ</strong>ã€‚</p>
<p>æ ¸å¿ƒèŒè´£ï¼š</p>
<ul>
<li>æ‰¿è½½ Weex é¡µé¢çš„ <strong>åŸç”Ÿæ¸²æŸ“å®¹å™¨</strong>ï¼ˆå¦‚ Android çš„ <code>WXFrameLayout</code>ã€iOS çš„ <code>WXSDKInstanceView</code>ï¼‰ï¼Œæ‰§è¡Œè§†å›¾å¸ƒå±€ã€ç»˜åˆ¶ã€åŠ¨ç”»è§¦å‘ï¼›</li>
<li>å¤„ç†ç”¨æˆ·äº¤äº’äº‹ä»¶ï¼ˆç‚¹å‡»ã€æ»‘åŠ¨ã€è¾“å…¥ç­‰ï¼‰ï¼Œå¹¶å°†äº‹ä»¶è½¬å‘ç»™ JS çº¿ç¨‹ï¼ˆå¦‚éœ€è¦ JS é€»è¾‘å“åº”æ—¶ï¼‰ï¼›</li>
<li>æ‰§è¡ŒåŸç”Ÿæ¨¡å—çš„ <strong>ä¸»çº¿ç¨‹æ–¹æ³•</strong>ï¼ˆé€šè¿‡ <code>@WXModuleAnnotation(runOnUIThread = true)</code> æ ‡è®°çš„æ–¹æ³•ï¼Œå¦‚å¼¹ Toastã€æ›´æ–° UI çš„åŸç”Ÿèƒ½åŠ›ï¼‰ï¼›</li>
<li>æ¥æ”¶ JS çº¿ç¨‹ä¸‹å‘çš„ <strong>UI æ“ä½œæŒ‡ä»¤</strong>ï¼ˆå¦‚åˆ›å»ºè§†å›¾ã€ä¿®æ”¹æ ·å¼ã€æ›´æ–°å±æ€§ï¼‰ï¼Œå¹¶æ˜ å°„ä¸ºåŸç”Ÿè§†å›¾æ“ä½œï¼›</li>
</ul>
<p><strong>å…³é”®çº¦æŸ</strong>ï¼šæ‰€æœ‰ç›´æ¥æ“ä½œåŸç”Ÿè§†å›¾çš„é€»è¾‘å¿…é¡»åœ¨ä¸»çº¿ç¨‹æ‰§è¡Œï¼Œå¦åˆ™ä¼šå¯¼è‡´ UI é”™ä¹±æˆ–å´©æºƒ</p>
<h3 data-id="heading-38">2. JS çº¿ç¨‹</h3>
<p>æ ¸å¿ƒå®šä½ï¼šWeex çš„ â€œä¸šåŠ¡é€»è¾‘çº¿ç¨‹â€ï¼Œç‹¬ç«‹äºä¸»çº¿ç¨‹ï¼Œä¸“é—¨è¿è¡Œ JavaScript ä»£ç ï¼Œé¿å…é˜»å¡ UIã€‚</p>
<p>æ ¸å¿ƒèŒè´£ï¼š</p>
<ul>
<li>åŠ è½½å¹¶æ‰§è¡Œ Weex ä¸šåŠ¡ä»£ç ï¼ˆ<code>.we</code> ç¼–è¯‘åçš„ JS bundleï¼‰ï¼ŒåŒ…æ‹¬ Vue/React ç»„ä»¶åˆå§‹åŒ–ã€æ•°æ®ç»‘å®šã€ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼›</li>
<li>å¤„ç† JS å±‚é¢çš„ä¸šåŠ¡é€»è¾‘ï¼ˆäº‹ä»¶å“åº”ã€æ•°æ®è®¡ç®—ã€æ¥å£è¯·æ±‚é¢„å¤„ç†ï¼‰ï¼›</li>
<li>è°ƒç”¨åŸç”Ÿæ¨¡å—æ—¶ï¼Œé€šè¿‡ <strong>JSBridge è½¬å‘è¯·æ±‚</strong>ï¼ˆåŒºåˆ†åŒæ­¥ / å¼‚æ­¥ï¼ŒåŒæ­¥è¯·æ±‚ä¼šçŸ­æš‚é˜»å¡ JS çº¿ç¨‹ï¼Œéœ€è°¨æ…ä½¿ç”¨ï¼‰ï¼›</li>
<li>ç”Ÿæˆ UI æ“ä½œæŒ‡ä»¤ï¼ˆå¦‚ <code>createElement</code>ã€<code>updateStyle</code>ï¼‰ï¼Œé€šè¿‡è·¨çº¿ç¨‹é€šä¿¡å‘é€ç»™ä¸»çº¿ç¨‹æ‰§è¡Œï¼›</li>
<li>æ¥æ”¶ä¸»çº¿ç¨‹è½¬å‘çš„ç”¨æˆ·äº¤äº’äº‹ä»¶ï¼ˆå¦‚ç‚¹å‡»å›è°ƒï¼‰ï¼Œæ‰§è¡Œå¯¹åº”çš„ JS äº‹ä»¶å¤„ç†å‡½æ•°ï¼›</li>
</ul>
<p>å…³é”®ä¼˜åŒ–**ï¼šæœ€æ–°ç‰ˆæœ¬ä¸­ï¼ŒJS çº¿ç¨‹æ”¯æŒ <strong>Bundle é¢„åŠ è½½</strong>ã€<strong>æ‡’åŠ è½½ç»„ä»¶</strong>ï¼Œå‡å°‘å¯åŠ¨è€—æ—¶ï¼›åŒæ—¶é€šè¿‡ <code>JSContext</code>éš”ç¦»å¤šä¸ª Weex å®ä¾‹ï¼Œé¿å…çº¿ç¨‹å†…èµ„æºç«äº‰ã€‚</p>
<h3 data-id="heading-39">3. è€—æ—¶çº¿ç¨‹</h3>
<h4 data-id="heading-40">1. ç½‘ç»œçº¿ç¨‹</h4>
<p>æ ¸å¿ƒå®šä½ï¼šWeex æ¡†æ¶å°è£…çš„ <strong>ä¸“ç”¨ç½‘ç»œçº¿ç¨‹</strong>ï¼ˆè·¨ç«¯ç»Ÿä¸€è°ƒåº¦ï¼‰ï¼Œé¿å…ç½‘ç»œè¯·æ±‚é˜»å¡ä¸»çº¿ç¨‹æˆ– JS çº¿ç¨‹ã€‚</p>
<p>æ ¸å¿ƒèŒè´£ï¼š</p>
<ul>
<li>å¤„ç† Weex å†…ç½®çš„ç½‘ç»œè¯·æ±‚ï¼ˆå¦‚ <code>weex.requireModule('stream')</code> å‘èµ·çš„ HTTP/HTTPS è¯·æ±‚ï¼‰ï¼›</li>
<li>è´Ÿè´£ JS Bundle çš„ä¸‹è½½ï¼ˆé¦–æ¬¡åŠ è½½æˆ–æ›´æ–°æ—¶ï¼‰ï¼Œæ”¯æŒæ–­ç‚¹ç»­ä¼ ã€ç¼“å­˜ç®¡ç†ï¼›</li>
<li>å¤„ç†ç½‘ç»œè¯·æ±‚çš„æ‹¦æˆªã€é‡è¯•ã€è¶…æ—¶æ§åˆ¶ï¼ˆæ¡†æ¶å±‚ç»Ÿä¸€å®ç°ï¼Œæ— éœ€ä¸šåŠ¡å…³å¿ƒï¼‰ï¼›</li>
<li>å°†ç½‘ç»œå“åº”ç»“æœé€šè¿‡ JSBridge å›ä¼ ç»™ JS çº¿ç¨‹ï¼›</li>
</ul>
<p>è®¾è®¡äº®ç‚¹ï¼šä¸åŸç”Ÿç³»ç»Ÿçš„ç½‘ç»œåº“è§£è€¦ï¼Œä½†å¯¹å¤–æš´éœ²ç»Ÿä¸€çš„ JS APIï¼Œçº¿ç¨‹è°ƒåº¦ç”±æ¡†æ¶å†…éƒ¨ç®¡ç†ï¼Œä¸šåŠ¡æ— éœ€æ‰‹åŠ¨åˆ‡æ¢çº¿ç¨‹</p>
<h4 data-id="heading-41">2. å›¾ç‰‡ä¸‹è½½çº¿ç¨‹</h4>
<p>æ ¸å¿ƒå®šä½ï¼šä¸“é—¨å¤„ç† Weex å›¾ç‰‡çš„å¼‚æ­¥åŠ è½½ã€è§£ç ï¼Œé¿å…å ç”¨ä¸»çº¿ç¨‹èµ„æºå¯¼è‡´ UI å¡é¡¿ã€‚</p>
<p>æ ¸å¿ƒèŒè´£ï¼š</p>
<ul>
<li>åŠ è½½ç½‘ç»œå›¾ç‰‡ã€æœ¬åœ°å›¾ç‰‡ï¼ˆé€šè¿‡ <code>img</code> æ ‡ç­¾æˆ– <code>weex.requireModule('image')</code>ï¼‰ï¼›</li>
<li>å›¾ç‰‡è§£ç ã€å‹ç¼©ï¼ˆé€‚é…è§†å›¾å°ºå¯¸ï¼Œå‡å°‘å†…å­˜å ç”¨ï¼‰ï¼›</li>
<li>å›¾ç‰‡ç¼“å­˜ç®¡ç†ï¼ˆå†…å­˜ç¼“å­˜ + ç£ç›˜ç¼“å­˜ï¼Œæ¡†æ¶å±‚ç»Ÿä¸€ç»´æŠ¤ï¼‰ï¼›</li>
<li>åŠ è½½å®Œæˆåï¼Œå°†å›¾ç‰‡ bitmap æäº¤åˆ°ä¸»çº¿ç¨‹æ¸²æŸ“ï¼›</li>
</ul>
<p>iOS ä¾§å›¾ç‰‡åŠ è½½çº¿ç¨‹çš„æ ¸å¿ƒç®¡ç†ç±»æ˜¯ <code>WXImageComponent</code>ã€‚</p>
<p>Weex çº¿ç¨‹èŒè´£è¾¹ç•Œæ¸…æ™°ï¼š<strong>UI æ“ä½œå½’ä¸»çº¿ç¨‹ï¼ŒJS é€»è¾‘å½’ JS çº¿ç¨‹ï¼Œè€—æ—¶æ“ä½œå½’å·¥ä½œçº¿ç¨‹ / ç½‘ç»œçº¿ç¨‹</strong>ï¼Œé¿å…è·¨çº¿ç¨‹ç›´æ¥æ“ä½œèµ„æº</p>
<h2 data-id="heading-42">ä¹ã€JS å’Œ Native é€šä¿¡</h2>
<h3 data-id="heading-43">1. callJS å’Œ callNative</h3>


























<table><thead><tr><th>é€šä¿¡æ–¹å‘</th><th>å‘èµ·æ–¹</th><th>æ¥æ”¶æ–¹</th><th>æ ¸å¿ƒç›®çš„</th><th>å…¸å‹åœºæ™¯</th></tr></thead><tbody><tr><td><code>callNative</code></td><td>JS</td><td>Native</td><td>JS è°ƒç”¨ Native çš„æ¨¡å— / ç»„ä»¶æ¥å£</td><td>æ¸²æŸ“ç»„ä»¶ã€å¼¹ Toastã€è·å–è®¾å¤‡ä¿¡æ¯</td></tr><tr><td><code>callJS</code></td><td>Native</td><td>JS</td><td>Native è§¦å‘ JS çš„å›è°ƒå‡½æ•°</td><td>ç»„ä»¶äº‹ä»¶å›è°ƒï¼ˆå¦‚æŒ‰é’®ç‚¹å‡»ï¼‰ã€æ•°æ®åŒæ­¥ï¼ˆå¦‚ç½‘ç»œè¯·æ±‚ç»“æœï¼‰</td></tr></tbody></table>
<p>ä¸¤è€…çš„åº•å±‚ä¾èµ– <strong>åŒä¸€ä¸ª JS Bridge é€šé“</strong>ï¼Œåªæ˜¯ã€Œå‘èµ·æ–¹ã€å’Œã€Œæ•°æ®æ ¼å¼ã€ä¸åŒï¼ŒWeex å·²å°è£…å¥½ç»Ÿä¸€çš„é€šä¿¡æ¡†æ¶ï¼Œå¼€å‘è€…æ— éœ€å…³å¿ƒåº•å±‚ä¼ è¾“ç»†èŠ‚</p>
<h3 data-id="heading-44">2. callNative å®ç°</h3>
<p><code>callNative</code> æ˜¯ JS ä¸»åŠ¨è°ƒç”¨ Native æ¥å£çš„è¿‡ç¨‹ï¼Œæ ¸å¿ƒæµç¨‹ï¼š<strong>JS æ„é€ æ ‡å‡†åŒ–æŒ‡ä»¤ â†’ åºåˆ—åŒ– JSON â†’ æ¡¥æ¥é€šé“å‘é€ â†’ Native è§£ææŒ‡ä»¤ â†’ æ‰§è¡Œå¯¹åº”æ¥å£ â†’ å“åº”ç»“æœå›ä¼ </strong>ã€‚</p>
<p>æ€ä¹ˆæ ·ï¼Ÿæ˜¯ä¸æ˜¯æ„Ÿè§‰ä¼¼æ›¾ç›¸è¯†ï¼Œæ—©æœŸåš Hybrid çš„æ—¶å€™ï¼ŒJS å’Œ Native çš„é€šä¿¡ä¹Ÿæ˜¯ä¸€æ ·çš„æµç¨‹ï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥æŸ¥çœ‹<a href="https://link.juejin.cn?target=.%2F1.44.md" target="_blank" title="./1.44.md" ref="nofollow noopener noreferrer">è¿™ç¯‡æ–‡ç« </a>ã€‚</p>
<p>æ˜¯çš„ï¼Œé€šä¿¡è¦è§£å†³çš„é—®é¢˜ä¸€ç›´ä¸å˜ï¼Œæ‰€ä»¥æ–¹æ¡ˆä¹Ÿä¸å˜ã€‚</p>
<h4 data-id="heading-45">1. æ ‡å‡†åŒ–æŒ‡ä»¤æ ¼å¼</h4>
<p>ä¸ºäº†è®© Native èƒ½ç»Ÿä¸€è§£æï¼ŒWeex è§„å®š <code>callNative</code> çš„æŒ‡ä»¤å¿…é¡»åŒ…å« 4 ä¸ªæ ¸å¿ƒå­—æ®µï¼ˆJS ç«¯æ„é€ ï¼‰ï¼š</p>
<pre><code class="hljs language-json" lang="json">const callNativeæŒ‡ä»¤ = <span class="hljs-punctuation">{</span>
  module<span class="hljs-punctuation">:</span> <span class="hljs-string">"component"</span><span class="hljs-punctuation">,</span>    <span class="hljs-comment">// æ¨¡å—åï¼ˆå¦‚ component/modal/deviceï¼‰</span>
  method<span class="hljs-punctuation">:</span> <span class="hljs-string">"create"</span><span class="hljs-punctuation">,</span>       <span class="hljs-comment">// æ–¹æ³•åï¼ˆå¦‚ create/toast/getInfoï¼‰</span>
  params<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>             <span class="hljs-comment">// å…¥å‚ï¼ˆå¦‚ç»„ä»¶æ ·å¼ã€Toast å†…å®¹ï¼‰</span>
  callbackId<span class="hljs-punctuation">:</span> <span class="hljs-string">"cb_123"</span>    <span class="hljs-comment">// å›è°ƒ IDï¼ˆç”¨äº Native å›ä¼ ç»“æœï¼‰</span>
<span class="hljs-punctuation">}</span>;
</code></pre>
<ul>
<li><code>module</code> + <code>method</code>ï¼šå®šä½ Native ç«¯çš„å…·ä½“æ¥å£ï¼ˆå¦‚ <code>modal.toast</code> å¯¹åº” Native çš„ã€Œå¼¹ Toastã€æ¥å£ï¼‰ï¼›</li>
<li><code>params</code>ï¼šJS ä¼ é€’ç»™ Native çš„æ•°æ®ï¼ˆéœ€æ˜¯ JSON å…¼å®¹ç±»å‹ï¼‰ï¼›</li>
<li><code>callbackId</code>ï¼šå”¯ä¸€æ ‡è¯†å½“å‰è¯·æ±‚ï¼ŒNative æ‰§è¡Œå®Œæˆåé€šè¿‡è¯¥ ID æ‰¾åˆ°å¯¹åº”çš„ JS å›è°ƒå‡½æ•°ã€‚</li>
</ul>
<h4 data-id="heading-46">2. JS ç«¯å®ç°</h4>
<p>JS ä¾§è°ƒç”¨ Native çš„æ ¸å¿ƒæ˜¯3ä¸ªå®ä¾‹æ–¹æ³•ï¼Œå¯¹åº”3ç±»åœºæ™¯</p>

























<table><thead><tr><th>æ–¹æ³•å</th><th>ç”¨é€”</th><th>å¯¹åº” Native æ¥å£</th></tr></thead><tbody><tr><td><code>callModule</code></td><td>è°ƒç”¨ Native æ™®é€šæ¨¡å—ï¼ˆå¦‚ <code>modal</code>/<code>storage</code>ï¼‰</td><td><code>global.callNativeModule</code></td></tr><tr><td><code>callComponent</code></td><td>è°ƒç”¨ Native è‡ªå®šä¹‰ç»„ä»¶æ–¹æ³•</td><td><code>global.callNativeComponent</code></td></tr><tr><td><code>callDOM</code></td><td>è°ƒç”¨ DOM ç›¸å…³ Native æ–¹æ³•ï¼ˆå¦‚åˆ›å»ºå…ƒç´ ï¼‰</td><td><code>global.callAddElement</code> ç­‰ç‹¬ç«‹æ–¹æ³•</td></tr></tbody></table>
<p>è¿™3ä¸ªæ–¹æ³•éƒ½ä¼šé€šè¿‡ Native æ³¨å…¥çš„å…¨å±€å‡½æ•°ï¼ˆglobal ä¸Šçš„æ–¹æ³•ï¼‰å°†è°ƒç”¨ä¼ é€’ç»™ Native å±‚</p>
<p>è¿™3ä¸ªæ–¹æ³•åœ¨æºç æœ€å</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// è°ƒç”¨ DOM ç›¸å…³ Native æ–¹æ³•</span>
callDOM (action, args) {
  <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>[action](<span class="hljs-variable language_">this</span>.<span class="hljs-property">instanceId</span>, args)
}

<span class="hljs-comment">// è°ƒç”¨ Native è‡ªå®šä¹‰ç»„ä»¶æ–¹æ³•</span>
callComponent (ref, method, args, options) {
  <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">componentHandler</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">instanceId</span>, ref, method, args, options)
}

<span class="hljs-comment">// è°ƒç”¨ Native æ™®é€šæ¨¡å—æ–¹æ³•ï¼ˆæœ€å¸¸ç”¨ï¼Œå¯¹åº”åŸ callNativeï¼‰</span>
callModule (<span class="hljs-variable language_">module</span>, method, args, options) {
  <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">moduleHandler</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">instanceId</span>, <span class="hljs-variable language_">module</span>, method, args, options)
}
</code></pre>
<h5 data-id="heading-47">1. æ™®é€šæ¨¡å—è°ƒç”¨ callModule â†’ moduleHandler</h5>
<p><code>moduleHandler</code> æ˜¯æ™®é€šæ¨¡å—è°ƒç”¨çš„æœ€ç»ˆè½¬å‘å‡½æ•°ï¼Œæºç ä¸­é€šè¿‡ <code>global.callNativeModule</code> å¯¹æ¥ Nativeï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">proto.<span class="hljs-property">moduleHandler</span> = <span class="hljs-variable language_">global</span>.<span class="hljs-property">callNativeModule</span> ||
    (<span class="hljs-function">(<span class="hljs-params">id, <span class="hljs-variable language_">module</span>, method, args</span>) =&gt;</span>
      <span class="hljs-title function_">fallback</span>(id, [{ <span class="hljs-variable language_">module</span>, method, args }]))
</code></pre>
<ul>
<li>æ­£å¸¸æƒ…å†µï¼ˆå®¢æˆ·ç«¯ç¯å¢ƒï¼‰ï¼š<code>global.callNativeModule</code> æ˜¯ <strong>Native æ³¨å…¥åˆ° JS å…¨å±€çš„å‡½æ•°</strong>ï¼ˆiOS/Android åŸç”Ÿå®ç°ï¼‰ï¼Œç›´æ¥æ¥æ”¶ <code>instanceId</code>ã€æ¨¡å—åã€æ–¹æ³•åã€å‚æ•°ï¼Œä¼ é€’ç»™ Native å±‚ã€‚</li>
<li>é™çº§æƒ…å†µï¼ˆæ—  Native æ¡¥æ¥ï¼‰ï¼šè°ƒç”¨ <code>fallback</code> å‡½æ•°ï¼ˆåˆå§‹åŒ–æ—¶ç”± <code>sendTasks</code> å‚æ•°ä¼ å…¥ï¼Œé€šå¸¸ç”¨äºè°ƒè¯• / æ¨¡æ‹Ÿï¼‰ã€‚</li>
</ul>
<h5 data-id="heading-48">2. è‡ªå®šä¹‰ç»„ä»¶è°ƒç”¨ callComponent â†’ componentHandler</h5>
<p>é€»è¾‘ä¸ <code>moduleHandler</code> ä¸€è‡´ï¼Œå¯¹æ¥ <code>global.callNativeComponent</code>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">proto.<span class="hljs-property">componentHandler</span> = <span class="hljs-variable language_">global</span>.<span class="hljs-property">callNativeComponent</span> ||
  (<span class="hljs-function">(<span class="hljs-params">id, ref, method, args, options</span>) =&gt;</span>
    <span class="hljs-title function_">fallback</span>(id, [{ <span class="hljs-attr">component</span>: options.<span class="hljs-property">component</span>, ref, method, args }]))
</code></pre>
<h5 data-id="heading-49">3. DOM æ–¹æ³•è°ƒç”¨ callDOM â†’ ç‹¬ç«‹å…¨å±€å‡½æ•°æ˜ å°„</h5>
<p>DOM ç›¸å…³çš„ Native æ–¹æ³•ï¼ˆå¦‚ <code>addElement</code>/<code>updateStyle</code>ï¼‰è¢«å•ç‹¬æ˜ å°„åˆ° <code>global</code> ä¸Šçš„ç‹¬ç«‹å‡½æ•°ï¼ˆè€Œéç»Ÿä¸€çš„ <code>callNative</code>ï¼‰ï¼Œæºç é€šè¿‡ <code>init</code> å‡½æ•°åˆå§‹åŒ–æ˜ å°„ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æºç ç¬¬ 116-138 è¡Œï¼šDOM æ–¹æ³•ä¸ Native å…¨å±€å‡½æ•°çš„æ˜ å°„</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">init</span> () {
  <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">DOM_METHODS</span> = {
    <span class="hljs-attr">createFinish</span>: <span class="hljs-variable language_">global</span>.<span class="hljs-property">callCreateFinish</span>,
    <span class="hljs-attr">addElement</span>: <span class="hljs-variable language_">global</span>.<span class="hljs-property">callAddElement</span>, <span class="hljs-comment">// DOM åˆ›å»ºå…ƒç´  â†’ Native çš„ callAddElement</span>
    <span class="hljs-attr">removeElement</span>: <span class="hljs-variable language_">global</span>.<span class="hljs-property">callRemoveElement</span>, <span class="hljs-comment">// DOM åˆ é™¤å…ƒç´  â†’ Native çš„ callRemoveElement</span>
    <span class="hljs-attr">updateAttrs</span>: <span class="hljs-variable language_">global</span>.<span class="hljs-property">callUpdateAttrs</span>, <span class="hljs-comment">// æ›´æ–°å±æ€§ â†’ Native çš„ callUpdateAttrs</span>
    <span class="hljs-comment">// ... å…¶ä»– DOM æ–¹æ³•</span>
  }
  <span class="hljs-keyword">const</span> proto = <span class="hljs-title class_">TaskCenter</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>

  <span class="hljs-comment">// ç»™ TaskCenter åŸå‹æŒ‚è½½ DOM æ–¹æ³•ï¼Œç›´æ¥è°ƒç”¨ Native æ³¨å…¥çš„å…¨å±€å‡½æ•°</span>
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> name <span class="hljs-keyword">in</span> <span class="hljs-variable constant_">DOM_METHODS</span>) {
    <span class="hljs-keyword">const</span> method = <span class="hljs-variable constant_">DOM_METHODS</span>[name]
    proto[name] = method ?
      <span class="hljs-function">(<span class="hljs-params">id, args</span>) =&gt;</span> <span class="hljs-title function_">method</span>(id, ...args) : <span class="hljs-comment">// æ­£å¸¸æƒ…å†µï¼šè°ƒç”¨ Native å…¨å±€å‡½æ•°</span>
      <span class="hljs-function">(<span class="hljs-params">id, args</span>) =&gt;</span> <span class="hljs-title function_">fallback</span>(...) <span class="hljs-comment">// é™çº§æƒ…å†µ</span>
  }
}
</code></pre>
<p>ä¾‹å¦‚è°ƒç”¨ <code>callDOM('addElement', args)</code> æ—¶ï¼Œæœ€ç»ˆä¼šæ‰§è¡Œ <code>global.callAddElement(instanceId, ...args)</code>ï¼Œç›´æ¥å¯¹æ¥ Native çš„ DOM æ¨¡å—ã€‚å…¶å®æ˜¯æ³¨å…¥åˆ° JSContext é‡Œçš„æ–¹æ³•å¯¹è±¡ã€‚</p>
<p>åœ¨ Weex çš„ JS è¿è¡Œç¯å¢ƒä¸­ï¼Œ<code>global</code> æ˜¯ <strong>JS å…¨å±€å¯¹è±¡ï¼ˆGlobal Objectï¼‰</strong>â€”â€” å®ƒæ˜¯æ‰€æœ‰ JS ä»£ç çš„ â€œé¡¶å±‚å®¹å™¨â€ï¼Œæ‰€æœ‰æœªè¢«å®šä¹‰åœ¨å±€éƒ¨ä½œç”¨åŸŸçš„å˜é‡ã€å‡½æ•°ï¼Œæœ€ç»ˆéƒ½ä¼šæŒ‚è½½åˆ° <code>global</code> ä¸Šï¼ˆç±»ä¼¼æµè§ˆå™¨ç¯å¢ƒçš„ <code>window</code>ï¼ŒNode.js ç¯å¢ƒçš„ <code>global</code>ï¼‰</p>
<p><strong>Native å‘ JS å¼•æ“çš„ â€œå…¨å±€ä¸Šä¸‹æ–‡â€ æ³¨å…¥ <code>callAddElement</code> å‡½æ•°æ—¶ï¼Œè¯¥å‡½æ•°ä¼šè‡ªåŠ¨æˆä¸º <code>global</code> å¯¹è±¡çš„å±æ€§</strong>â€”â€”JS ä¾§çš„ <code>global.callAddElement</code>ï¼Œæœ¬è´¨å°±æ˜¯è®¿é—®è¿™ä¸ªè¢« Native æ³¨å…¥åˆ°å…¨å±€çš„å‡½æ•°ã€‚</p>
<p>QAï¼šglobal æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<p>æ˜¯ JS å…¨å±€å¯¹è±¡ã€‚ä¸ç®¡æ˜¯æµè§ˆå™¨ã€Node.js è¿˜æ˜¯ Weex çš„ JS å¼•æ“ï¼ˆJavaScriptCore/QuickJSï¼‰ï¼Œéƒ½æœ‰ä¸€ä¸ª <strong>å…¨å±€å¯¹è±¡ï¼ˆGlobal Objectï¼‰</strong>ï¼š</p>
<ul>
<li>å®ƒæ˜¯ JS è¿è¡Œç¯å¢ƒçš„ â€œæ ¹â€ï¼Œæ‰€æœ‰å…¨å±€å˜é‡ã€å‡½æ•°éƒ½æ˜¯å®ƒçš„å±æ€§ï¼›</li>
<li>ä¸åŒç¯å¢ƒçš„å…¨å±€å¯¹è±¡åç§°ä¸åŒï¼š
<ul>
<li>æµè§ˆå™¨ç¯å¢ƒï¼šå« <code>window</code>ï¼ˆæ¯”å¦‚ <code>window.alert</code>ã€<code>window.document</code>ï¼‰ï¼›</li>
<li>Node.js ç¯å¢ƒï¼šå« <code>global</code>ï¼ˆæ¯”å¦‚ <code>global.console</code>ã€<code>global.setTimeout</code>ï¼‰ï¼›</li>
<li>Weex ç¯å¢ƒï¼šå« <code>global</code>ï¼ˆå› ä¸º Weex ä¸ä¾èµ–æµè§ˆå™¨ï¼Œæ²¡æœ‰ <code>window</code>ï¼Œç›´æ¥ç”¨ JS å¼•æ“åŸç”Ÿçš„å…¨å±€å¯¹è±¡ <code>global</code>ï¼‰ã€‚</li>
</ul>
</li>
</ul>
<pre><code class="hljs language-objective-c" lang="objective-c">// WXJSCoreBridge.mm
- (void)registerCallAddElement:(WXJSCallAddElement)callAddElement
{
    id callAddElementBlock = ^(JSValue *instanceId, JSValue *ref, JSValue *element, JSValue *index, JSValue *ifCallback) {
        NSString *instanceIdString = [instanceId toString];
        WXSDKInstance *instance = [WXSDKManager instanceForID:instanceIdString];
        if (instance.unicornRender) {
            JSValueRef args[] = {instanceId.JSValueRef, ref.JSValueRef, element.JSValueRef, index.JSValueRef};
            [WXCoreBridge callUnicornRenderAction:instanceIdString
                                           module:"dom"
                                           method:"addElement"
                                          context:[JSContext currentContext]
                                             args:args
                                         argCount:4];
            return [JSValue valueWithInt32:0 inContext:[JSContext currentContext]];
        }

        NSDictionary *componentData = [element toDictionary];
        NSString *parentRef = [ref toString];
        NSInteger insertIndex = [[index toNumber] integerValue];
        if (WXAnalyzerCenter.isInteractionLogOpen) {
            WXLogDebug(@"wxInteractionAnalyzer : [jsengin][addElementStart],%@,%@",instanceIdString,componentData[@"ref"]);
        }
        return [JSValue valueWithInt32:(int32_t)callAddElement(instanceIdString, parentRef, componentData, insertIndex) inContext:[JSContext currentContext]];
    };
    
    _jsContext[@"callAddElement"] = callAddElementBlock;
}
</code></pre>
<p>åœ¨ js ä¾§æ˜¯é€šè¿‡  TaskCenter.js çš„ init æ–¹æ³•ä¸­å®šä¹‰çš„ï¼Œå­˜åœ¨æ˜ å°„å…³ç³»ï¼Œ <code>addElement: global.callAddElement,</code></p>
<h3 data-id="heading-50">3. callJS å®ç°</h3>
<p><code>WXReactorProtocol</code> åè®®ï¼š</p>
<ul>
<li>å®šä¹‰ Native è°ƒç”¨ JS çš„ã€Œæ ‡å‡†æ¥å£ã€ï¼ˆå¦‚è§¦å‘å›è°ƒã€å‘é€äº‹ä»¶ï¼‰ï¼Œä¸å…³å¿ƒåº•å±‚ç”¨å“ªç§ JS å¼•æ“ï¼ˆJavaScriptCore / å…¶ä»–ï¼‰ï¼›</li>
<li>å…·ä½“çš„æ¡¥æ¥ç±»ï¼ˆå¦‚ <code>WXJSCoreBridge</code>ï¼‰éµå®ˆè¿™ä¸ªåè®®ï¼Œå®ç°æ¥å£æ–¹æ³• â€”â€” å³ä½¿æœªæ¥æ›¿æ¢ JS å¼•æ“ï¼Œåªè¦éµå®ˆåè®®ï¼Œä¸Šå±‚ä»£ç ï¼ˆå¦‚ Native æ¨¡å—ã€ç»„ä»¶ï¼‰æ— éœ€ä¿®æ”¹ã€‚</li>
</ul>
<pre><code class="hljs language-objective-c" lang="objective-c">
@class JSContext;

@protocol WXReactorProtocol &lt;NSObject&gt;

@required

/**
Weex should register a JSContext to reactor
*/
- (void)registerJSContext:(NSString *)instanceId;

/**
 Reactor execute js source
*/
- (void)render:(NSString *)instanceId source:(NSString*)source data:(NSDictionary* _Nullable)data;

- (void)unregisterJSContext:(NSString *)instanceId;

/**
 When js call Weex NativeModule, invoke callback function
 
 @param instanceId : weex instance id
 @param callbackId : callback function id
 @param args       : args
*/
- (void)invokeCallBack:(NSString *)instanceId function:(NSString *)callbackId args:(NSArray * _Nullable)args;

/**
Native event to js
 
@param instanceId :   instance id
@param ref        :   node reference
@param event      :   event type
@param args       :   parameters in event object
@param domChanges :  dom value changes, used for two-way data binding
*/
- (void)fireEvent:(NSString *)instanceId ref:(NSString *)ref event:(NSString *)event args:(NSDictionary * _Nullable)args domChanges:(NSDictionary * _Nullable)domChanges;

@end
</code></pre>
<p>Native æ¨¡å—ï¼ˆModule)/ç»„ä»¶(Component) å®Œæˆä»»åŠ¡å -&gt;  <code>WXBridgeManager.callBack(...)</code> â†’ æ„é€  JS è„šæœ¬ï¼ˆè°ƒç”¨ <code>TaskCenter.callback</code>ï¼‰ â†’ <code>WXJSCoreBridge.executeJavascript(...)</code> â†’ JS å¼•æ“æ‰§è¡Œ â†’ <code>TaskCenter.callback</code> å“åº”</p>
<p><code>WXJSCoreBridge</code> æœ¬èº«ä¸ç›´æ¥æ‹¼æ¥å›è°ƒè„šæœ¬ï¼Œè€Œæ˜¯æä¾› <code>executeJavascript:</code> æ–¹æ³•ï¼ˆæºç ç¬¬ 102 è¡Œï¼‰ï¼Œä½œä¸º JS è„šæœ¬æ‰§è¡Œçš„åº•å±‚å…¥å£ï¼›çœŸæ­£çš„è„šæœ¬æ„é€ ï¼Œåœ¨ <code>WXBridgeManager</code> ä¸­</p>
<p>WXBridgeManager äº‹ä»¶å›è°ƒ</p>
<pre><code class="hljs language-javascript" lang="javascript">- (<span class="hljs-keyword">void</span>)<span class="hljs-attr">fireEvent</span>:(<span class="hljs-title class_">NSString</span> *)instanceId <span class="hljs-attr">ref</span>:(<span class="hljs-title class_">NSString</span> *)ref <span class="hljs-attr">type</span>:(<span class="hljs-title class_">NSString</span> *)type <span class="hljs-attr">params</span>:(<span class="hljs-title class_">NSDictionary</span> *)params
{
    [self <span class="hljs-attr">fireEvent</span>:instanceId <span class="hljs-attr">ref</span>:ref <span class="hljs-attr">type</span>:type <span class="hljs-attr">params</span>:params <span class="hljs-attr">domChanges</span>:nil];
}

- (<span class="hljs-keyword">void</span>)<span class="hljs-attr">fireEvent</span>:(<span class="hljs-title class_">NSString</span> *)instanceId <span class="hljs-attr">ref</span>:(<span class="hljs-title class_">NSString</span> *)ref <span class="hljs-attr">type</span>:(<span class="hljs-title class_">NSString</span> *)type <span class="hljs-attr">params</span>:(<span class="hljs-title class_">NSDictionary</span> *)params <span class="hljs-attr">domChanges</span>:(<span class="hljs-title class_">NSDictionary</span> *)domChanges
{
    [self <span class="hljs-attr">fireEvent</span>:instanceId <span class="hljs-attr">ref</span>:ref <span class="hljs-attr">type</span>:type <span class="hljs-attr">params</span>:params <span class="hljs-attr">domChanges</span>:domChanges <span class="hljs-attr">handlerArguments</span>:nil];
}
- (<span class="hljs-keyword">void</span>)<span class="hljs-attr">fireEvent</span>:(<span class="hljs-title class_">NSString</span> *)instanceId <span class="hljs-attr">ref</span>:(<span class="hljs-title class_">NSString</span> *)ref <span class="hljs-attr">type</span>:(<span class="hljs-title class_">NSString</span> *)type <span class="hljs-attr">params</span>:(<span class="hljs-title class_">NSDictionary</span> *)params <span class="hljs-attr">domChanges</span>:(<span class="hljs-title class_">NSDictionary</span> *)domChanges <span class="hljs-attr">handlerArguments</span>:(<span class="hljs-title class_">NSArray</span> *)handlerArguments
{
	   <span class="hljs-comment">// ...</span>
    <span class="hljs-title class_">WXCallJSMethod</span> *method = [[<span class="hljs-title class_">WXCallJSMethod</span> alloc] <span class="hljs-attr">initWithModuleName</span>:nil <span class="hljs-attr">methodName</span>:@<span class="hljs-string">"fireEvent"</span> <span class="hljs-attr">arguments</span>:[<span class="hljs-title class_">WXUtility</span> <span class="hljs-attr">convertContainerToImmutable</span>:args] <span class="hljs-attr">instance</span>:instance];
    [self <span class="hljs-attr">callJsMethod</span>:method];
}

- (<span class="hljs-keyword">void</span>)<span class="hljs-attr">callJsMethod</span>:(<span class="hljs-title class_">WXCallJSMethod</span> *)method
{
    <span class="hljs-keyword">if</span> (!method || !method.<span class="hljs-property">instance</span>) <span class="hljs-keyword">return</span>;
    
    __weak <span class="hljs-title function_">typeof</span>(self) weakSelf = self;
    <span class="hljs-title class_">WXPerformBlockOnBridgeThreadForInstance</span>(^(){
        <span class="hljs-title class_">WXBridgeContext</span>* context = method.<span class="hljs-property">instance</span>.<span class="hljs-property">useBackupJsThread</span> ? weakSelf.<span class="hljs-property">backupBridgeCtx</span> :  weakSelf.<span class="hljs-property">bridgeCtx</span>;
        [context <span class="hljs-attr">executeJsMethod</span>:method];
    }, method.<span class="hljs-property">instance</span>.<span class="hljs-property">instanceId</span>);
}
</code></pre>
<p>WXBridgeContext.m ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">- (<span class="hljs-keyword">void</span>)<span class="hljs-attr">executeJsMethod</span>:(<span class="hljs-title class_">WXCallJSMethod</span> *)method {    
   <span class="hljs-comment">// ...</span>
    [sendQueue <span class="hljs-attr">addObject</span>:method];
    [self <span class="hljs-attr">performSelector</span>:@<span class="hljs-title function_">selector</span>(_sendQueueLoop) <span class="hljs-attr">withObject</span>:nil];
}

- (<span class="hljs-keyword">void</span>)_sendQueueLoop {
    <span class="hljs-keyword">if</span> ([tasks count] &gt; <span class="hljs-number">0</span> &amp;&amp; execIns) {
        <span class="hljs-title class_">WXSDKInstance</span> * execInstance = [<span class="hljs-title class_">WXSDKManager</span> <span class="hljs-attr">instanceForID</span>:execIns];
        <span class="hljs-title class_">NSTimeInterval</span> start = <span class="hljs-title class_">CACurrentMediaTime</span>()*<span class="hljs-number">1000</span>;
        
        <span class="hljs-keyword">if</span> (execInstance.<span class="hljs-property">instanceJavaScriptContext</span> &amp;&amp; execInstance.<span class="hljs-property">bundleType</span>) {
            [self <span class="hljs-attr">callJSMethod</span>:@<span class="hljs-string">"__WEEX_CALL_JAVASCRIPT__"</span> <span class="hljs-attr">args</span>:@[execIns, [tasks copy]] <span class="hljs-attr">onContext</span>:execInstance.<span class="hljs-property">instanceJavaScriptContext</span> <span class="hljs-attr">completion</span>:nil];
        } <span class="hljs-keyword">else</span> {
            [self <span class="hljs-attr">callJSMethod</span>:@<span class="hljs-string">"callJS"</span> <span class="hljs-attr">args</span>:@[execIns, [tasks copy]]];
        }
        <span class="hljs-comment">// ...</span>
    }
}

- (<span class="hljs-keyword">void</span>)<span class="hljs-attr">callJSMethod</span>:(<span class="hljs-title class_">NSString</span> *)method <span class="hljs-attr">args</span>:(<span class="hljs-title class_">NSArray</span> *)args {
    <span class="hljs-keyword">if</span> (self.<span class="hljs-property">frameworkLoadFinished</span>) {
        [self.<span class="hljs-property">jsBridge</span> <span class="hljs-attr">callJSMethod</span>:method <span class="hljs-attr">args</span>:args];
    } <span class="hljs-keyword">else</span> {
        [_methodQueue <span class="hljs-attr">addObject</span>:@{@<span class="hljs-string">"method"</span>:method, @<span class="hljs-string">"args"</span>:args}];
    }
}
</code></pre>
<p>å†åˆ° WXJSCoreManager</p>
<pre><code class="hljs language-javascript" lang="javascript">- (<span class="hljs-title class_">JSValue</span> *)<span class="hljs-attr">callJSMethod</span>:(<span class="hljs-title class_">NSString</span> *)method <span class="hljs-attr">args</span>:(<span class="hljs-title class_">NSArray</span> *)args {
    <span class="hljs-title class_">WXLogDebug</span>(@<span class="hljs-string">"Calling JS... method:%@, args:%@"</span>, method, args);
    <span class="hljs-title class_">WXPerformBlockOnMainThread</span>(^{
        [[<span class="hljs-title class_">WXBridgeManager</span> sharedManager].<span class="hljs-property">lastMethodInfo</span> <span class="hljs-attr">setObject</span>:method ?: @<span class="hljs-string">""</span> <span class="hljs-attr">forKey</span>:@<span class="hljs-string">"method"</span>];
        [[<span class="hljs-title class_">WXBridgeManager</span> sharedManager].<span class="hljs-property">lastMethodInfo</span> <span class="hljs-attr">setObject</span>:args ?: @[] <span class="hljs-attr">forKey</span>:@<span class="hljs-string">"args"</span>];
    });
    <span class="hljs-keyword">return</span> [[_jsContext globalObject] <span class="hljs-attr">invokeMethod</span>:method <span class="hljs-attr">withArguments</span>:[args copy]];
}
</code></pre>
<p>å…¶å®ä¸ç®¡æ˜¯ CallJS è¿˜æ˜¯ CallNativeï¼Œé€šä¿¡çš„æŠ€æœ¯æ–¹æ¡ˆè®¾è®¡å’Œ Hybrid çš„è®¾è®¡ä¸€è‡´ï¼Œéƒ½éœ€è¦åœ¨ JavascriptCore çš„ global å¯¹è±¡ä¸ŠæŒ‚è½½ä¸€ä¸ªæ–¹æ³•ã€‚æ¯”å¦‚ Native æ³¨å†Œäº†ä¸€ä¸ª WXComponent ä¹‹åï¼ŒWeex ä¾§ç”¨ Vue è¯­æ³•å†™å®Œäº†ä¸ªé¡µé¢ï¼Œå‘ˆç°åœ¨ç”¨æˆ·æ‰‹æœºä¸Šï¼Œç”¨æˆ·ç‚¹å‡»é¡µé¢ä¸Šçš„æŒ‰é’®ä¹‹åï¼ŒNative å†å°†äº‹ä»¶å›è°ƒç»™ Weex ä¾§ï¼ŒWeex å†å»å¤„ç†åç»­é€»è¾‘ã€‚</p>
<h3 data-id="heading-51">4. WXAssertComponentThread æ–­è¨€</h3>
<p><code>WXAssertComponentThread</code> çš„æ ¸å¿ƒä½œç”¨æ˜¯ <strong>å¼ºåˆ¶çº¦æŸç»„ä»¶ç›¸å…³æ“ä½œåœ¨ã€Œç»„ä»¶ä¸“å±çº¿ç¨‹ã€æ‰§è¡Œ</strong>ï¼Œæœ¬è´¨æ˜¯ä¸ºäº†è§£å†³ã€Œçº¿ç¨‹å®‰å…¨ã€å’Œã€Œæ€§èƒ½ç¨³å®šæ€§ã€é—®é¢˜</p>
<p>iOS å¼€å‘çš„æ ¸å¿ƒçº¿ç¨‹è§„åˆ™æ˜¯ã€ŒUI æ“ä½œå¿…é¡»åœ¨ä¸»çº¿ç¨‹ã€ï¼Œä½† Weex ç»„ä»¶çš„å·¥ä½œæµç¨‹ï¼ˆç»‘å®šè§£æã€æ•°æ®è®¡ç®—ã€å¸ƒå±€è®¡ç®—ã€å­ç»„ä»¶ç®¡ç†ï¼‰åŒ…å«å¤§é‡ã€Œé UI æ“ä½œã€â€”â€” å¦‚æœè¿™äº›æ“ä½œéƒ½åœ¨ä¸»çº¿ç¨‹æ‰§è¡Œï¼Œä¼šé˜»å¡ä¸»çº¿ç¨‹ï¼ˆæ¯”å¦‚é•¿åˆ—è¡¨æ•°æ®è§£æã€å¤æ‚è¡¨è¾¾å¼è®¡ç®—ï¼‰ï¼Œå¯¼è‡´ UI å¡é¡¿ï¼ˆæ¯”å¦‚æ»‘åŠ¨æ‰å¸§ï¼‰</p>
<p>å› æ­¤ Weex è®¾è®¡äº†çº¿ç¨‹åˆ†å·¥</p>

















<table><thead><tr><th>çº¿ç¨‹ç±»å‹</th><th>è´Ÿè´£çš„æ“ä½œ</th></tr></thead><tbody><tr><td>ç»„ä»¶ä¸“å±çº¿ç¨‹</td><td>ç»‘å®šè§„åˆ™è§£æï¼ˆ<code>_storeBindings</code>ï¼‰ã€è¡¨è¾¾å¼è®¡ç®—ï¼ˆ<code>bindingBlockWithExpression</code>ï¼‰ã€æ•°æ®æ›´æ–°ï¼ˆ<code>updateBindingData</code>ï¼‰ã€å¸ƒå±€è®¡ç®—ï¼ˆ<code>calculateLayout</code>ï¼‰</td></tr><tr><td>ä¸»çº¿ç¨‹</td><td>æœ€ç»ˆ UI æ¸²æŸ“ï¼ˆå¦‚ <code>UIImageView</code> è®¾å›¾ã€<code>UILabel</code> è®¾æ–‡æœ¬ï¼‰ã€å­è§†å›¾å¢åˆ ï¼ˆ<code>insertSubview</code>ï¼‰</td></tr></tbody></table>
<h4 data-id="heading-52">1. é¿å…ã€Œçº¿ç¨‹å®‰å…¨é—®é¢˜ã€ï¼Œé˜²æ­¢å´©æºƒ / æ•°æ®é”™ä¹±</h4>
<p>ç»„ä»¶çš„æ ¸å¿ƒæ•°æ®ï¼ˆå¦‚ <code>_bindingProps</code>ã€<code>_subcomponents</code>ã€<code>_flexCssNode</code>ï¼‰éƒ½æ˜¯ã€Œéçº¿ç¨‹å®‰å…¨çš„ã€ï¼ˆæ²¡æœ‰åŠ é”ä¿æŠ¤ï¼‰â€”â€” å¦‚æœå¤šä¸ªçº¿ç¨‹åŒæ—¶è¯»å†™è¿™äº›æ•°æ®ï¼Œä¼šå¯¼è‡´ï¼š</p>
<ul>
<li>æ•°æ®ç«äº‰ï¼šæ¯”å¦‚ä¸»çº¿ç¨‹è¯»å– <code>_subcomponents</code> éå†ï¼Œç»„ä»¶çº¿ç¨‹åŒæ—¶ä¿®æ”¹ <code>_subcomponents</code>ï¼ˆå¢åˆ å­ç»„ä»¶ï¼‰ï¼Œå¯¼è‡´æ•°ç»„è¶Šç•Œå´©æºƒï¼›</li>
<li>æ•°æ®ä¸ä¸€è‡´ï¼šæ¯”å¦‚ç»„ä»¶çº¿ç¨‹æ›´æ–° <code>_bindingProps</code> çš„å€¼ï¼Œä¸»çº¿ç¨‹åŒæ—¶è¯»å–è¯¥å€¼ç”¨äº UI æ›´æ–°ï¼Œå¯¼è‡´æ˜¾ç¤ºé”™è¯¯çš„æ—§å€¼ï¼›</li>
<li>é‡æŒ‡é’ˆï¼šæ¯”å¦‚ç»„ä»¶çº¿ç¨‹é”€æ¯å­ç»„ä»¶ï¼Œä¸»çº¿ç¨‹è¿˜åœ¨è®¿é—®è¯¥å­ç»„ä»¶çš„ <code>view</code>ã€‚</li>
</ul>
<p>çº¿ç¨‹æ–­è¨€é€šè¿‡ã€Œå¼ºåˆ¶æ‰€æœ‰ç»„ä»¶æ ¸å¿ƒæ“ä½œåœ¨åŒä¸€çº¿ç¨‹æ‰§è¡Œã€ï¼Œä»æ ¹æºä¸Šé¿å…äº†è¿™äº›è·¨çº¿ç¨‹é—®é¢˜ â€”â€” åŒä¸€æ—¶é—´åªæœ‰ä¸€ä¸ªçº¿ç¨‹æ“ä½œç»„ä»¶æ•°æ®ï¼Œæ— éœ€å¤æ‚é”æœºåˆ¶ï¼ˆé”ä¼šé™ä½æ€§èƒ½ï¼‰ã€‚</p>
<h4 data-id="heading-53">2. ç®€åŒ–è°ƒè¯•ï¼Œå¿«é€Ÿå®šä½çº¿ç¨‹é—®é¢˜</h4>
<p>å¦‚æœæ²¡æœ‰çº¿ç¨‹æ–­è¨€ï¼Œè·¨çº¿ç¨‹æ“ä½œç»„ä»¶å¯èƒ½å¯¼è‡´ã€Œå¶ç°å´©æºƒã€ï¼ˆæ¯”å¦‚ 100 æ¬¡æ“ä½œå‡ºç° 1 æ¬¡ï¼‰ï¼Œéš¾ä»¥å¤ç°å’Œæ’æŸ¥ï¼ˆæ—¥å¿—ä¸­çœ‹ä¸åˆ°çº¿ç¨‹ä¸Šä¸‹æ–‡ï¼‰ã€‚è€Œçº¿ç¨‹æ–­è¨€ä¼šåœ¨ã€Œè¿è§„çº¿ç¨‹è°ƒç”¨æ—¶ç›´æ¥å´©æºƒã€ï¼Œå¹¶æ˜ç¡®æç¤ºã€Œå¿…é¡»åœ¨ç»„ä»¶çº¿ç¨‹æ‰§è¡Œã€ï¼Œå¼€å‘è€…èƒ½ç«‹åˆ»å®šä½åˆ°è¿è§„ä»£ç ï¼ˆæ¯”å¦‚åœ¨ä¸»çº¿ç¨‹è°ƒç”¨äº† <code>updateBindingData</code>ï¼‰ï¼Œå¤§å¹…é™ä½è°ƒè¯•æˆæœ¬ã€‚</p>
<h4 data-id="heading-54">3. ä¿è¯æ“ä½œé¡ºåºä¸€è‡´æ€§</h4>
<p>ç»„ä»¶çš„æ›´æ–°æµç¨‹æ˜¯ã€Œè§£æç»‘å®š â†’ è®¡ç®—è¡¨è¾¾å¼ â†’ æ›´æ–°å±æ€§ â†’ å¸ƒå±€è®¡ç®— â†’ UI æ¸²æŸ“ã€â€”â€” è¿™äº›æ­¥éª¤å¿…é¡»æŒ‰é¡ºåºæ‰§è¡Œã€‚å¦‚æœåˆ†æ•£åœ¨å¤šä¸ªçº¿ç¨‹ï¼Œå¯èƒ½å‡ºç°ã€Œå¸ƒå±€è®¡ç®—è¿˜æ²¡å®Œæˆï¼ŒUI å·²ç»å¼€å§‹æ¸²æŸ“ã€çš„æƒ…å†µï¼ˆå¯¼è‡´å¸ƒå±€é”™ä¹±ï¼‰ã€‚ç»„ä»¶ä¸“å±çº¿ç¨‹ä¿è¯äº†æ‰€æœ‰æ“ä½œä¸²è¡Œæ‰§è¡Œï¼Œé¡ºåºä¸ä¼šä¹±ã€‚</p>
<h3 data-id="heading-55">5. WXJSASTParser çš„å·¥ä½œåŸç†</h3>
<p><code>WXJSASTParser</code> å¦‚ä½•æŠŠè¡¨è¾¾å¼å­—ç¬¦ä¸²è§£æä¸º AST èŠ‚ç‚¹ï¼Ÿ</p>
<p><code>WXJSASTParser</code> æ˜¯ Weex è‡ªå®šä¹‰çš„ã€Œè½»é‡ JS è¡¨è¾¾å¼è§£æå™¨ã€â€”â€” æ ¸å¿ƒæ˜¯ã€ŒæŒ‰ JS è¯­æ³•è§„åˆ™ï¼ŒæŠŠå­—ç¬¦ä¸²æ‹†åˆ†ä¸ºç»“æ„åŒ–çš„ AST èŠ‚ç‚¹ã€ï¼Œå…¨ç¨‹ä¸ä¾èµ–å®Œæ•´ JS å¼•æ“ï¼ˆå¦‚ JSC/V8ï¼‰ï¼Œåªæ”¯æŒç»‘å®šè¡¨è¾¾å¼éœ€è¦çš„åŸºç¡€è¯­æ³•ï¼ˆæ ‡è¯†ç¬¦ã€æˆå‘˜è®¿é—®ã€äºŒå…ƒè¿ç®—ç­‰ï¼‰ï¼Œå…¼é¡¾æ€§èƒ½å’Œä½“ç§¯ã€‚</p>
<p>æ•´ä¸ªè§£æè¿‡ç¨‹åˆ† 3 æ­¥ï¼š<strong>è¯æ³•åˆ†æ â†’ è¯­æ³•åˆ†æ â†’ AST èŠ‚ç‚¹å°è£…</strong>ï¼Œå’Œç¼–è¯‘å™¨çš„å‰ç«¯æµç¨‹ä¸€è‡´ï¼Œä»¥ä¸‹ç»“åˆç¤ºä¾‹ï¼ˆ<code>"user.name + '?size=100'"</code>ï¼‰æ‹†è§£ï¼š</p>
<p>å…ˆæ˜ç¡®ï¼šAST æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<p>ASTï¼ˆæŠ½è±¡è¯­æ³•æ ‘ï¼‰æ˜¯ã€Œç”¨æ ‘å½¢ç»“æ„è¡¨ç¤ºä»£ç è¯­æ³•ã€çš„ä¸­é—´ç»“æ„ â€”â€” æ¯”å¦‚è¡¨è¾¾å¼ <code>user.name + '?size=100'</code>ï¼ŒAST ä¼šæ‹†åˆ†ä¸ºï¼š</p>
<pre><code class="hljs language-shell" lang="shell">æ ¹èŠ‚ç‚¹ï¼šBinaryExpressionï¼ˆè¿ç®—ç¬¦ '+'ï¼‰
â”œâ”€ å·¦å­èŠ‚ç‚¹ï¼šMemberExpressionï¼ˆæˆå‘˜è®¿é—®ï¼‰
â”‚  â”œâ”€ objectï¼šIdentifierï¼ˆæ ‡è¯†ç¬¦ 'user'ï¼‰
â”‚  â””â”€ propertyï¼šIdentifierï¼ˆæ ‡è¯†ç¬¦ 'name'ï¼‰
â””â”€ å³å­èŠ‚ç‚¹ï¼šStringLiteralï¼ˆå­—ç¬¦ä¸²å­—é¢é‡ '?size=100'ï¼‰
</code></pre>
<p>è¿™ç§ç»“æ„èƒ½è¢«ç¨‹åºå¿«é€Ÿéå†å’Œè®¡ç®—ï¼ˆæ¯”å¦‚ä¹‹å‰è®²çš„ç”Ÿæˆ <code>WXDataBindingBlock</code> æ—¶ï¼Œé€’å½’éå†èŠ‚ç‚¹æ‰§è¡Œè¿ç®—ï¼‰ã€‚</p>
<h4 data-id="heading-56">1.è¯æ³•åˆ†æï¼ˆLexical Analysisï¼‰</h4>
<p>æ‹†åˆ†ä¸ºè¯æ³•å•å…ƒï¼ˆTokenï¼‰ã€‚è¯æ³•åˆ†ææ˜¯ã€ŒæŠŠè¡¨è¾¾å¼å­—ç¬¦ä¸²æ‹†åˆ†ä¸ºæœ€å°çš„ã€æœ‰æ„ä¹‰çš„è¯­æ³•å•å…ƒã€ï¼Œå¿½ç•¥ç©ºæ ¼ã€æ¢è¡Œç­‰æ— å…³å­—ç¬¦ã€‚æ ¸å¿ƒæ˜¯ã€ŒæŒ‰ JS è¯­æ³•è§„åˆ™åŒ¹é…å­—ç¬¦åºåˆ—ã€ã€‚</p>
<p><code>è¡¨è¾¾å¼ </code>"user.name + '?size=100'"` è¯æ³•åˆ†æåå¾—åˆ°çš„ Token åºåˆ—ï¼š</p>



































<table><thead><tr><th>Token ç±»å‹</th><th>Token å€¼</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>IDENTIFIER</code></td><td><code>user</code></td><td>æ ‡è¯†ç¬¦ï¼ˆå˜é‡å / å±æ€§åï¼‰</td></tr><tr><td><code>DOT</code></td><td><code>.</code></td><td>æˆå‘˜è®¿é—®è¿ç®—ç¬¦</td></tr><tr><td><code>IDENTIFIER</code></td><td><code>name</code></td><td>æ ‡è¯†ç¬¦</td></tr><tr><td><code>PLUS</code></td><td><code>+</code></td><td>äºŒå…ƒè¿ç®—ç¬¦ï¼ˆåŠ æ³• / æ‹¼æ¥ï¼‰</td></tr><tr><td><code>STRING_LITERAL</code></td><td><code>?size=100</code></td><td>å­—ç¬¦ä¸²å­—é¢é‡ï¼ˆå»æ‰å¼•å·ï¼‰</td></tr></tbody></table>
<p>è¯æ³•åˆ†æçš„å®ç°é€»è¾‘ï¼ˆç®€åŒ–ï¼‰ï¼š</p>
<ol>
<li>åˆå§‹åŒ–ä¸€ä¸ªã€Œå­—ç¬¦æŒ‡é’ˆã€ï¼Œä»è¡¨è¾¾å¼å­—ç¬¦ä¸²å¼€å¤´éå†ï¼›</li>
<li>é‡åˆ°å­—æ¯ / ä¸‹åˆ’çº¿ â†’ ç»§ç»­å¾€åè¯»ï¼Œç›´åˆ°éå­—æ¯ / æ•°å­— / ä¸‹åˆ’çº¿ â†’ è¯†åˆ«ä¸º <code>IDENTIFIER</code>ï¼ˆå¦‚ <code>user</code>ï¼‰ï¼›</li>
<li>é‡åˆ° <code>+</code>/<code>-</code>/<code>*</code>/<code>/</code>/<code>&gt;</code>/<code>=</code> ç­‰ â†’ è¯†åˆ«ä¸ºå¯¹åº”è¿ç®—ç¬¦ï¼ˆå¦‚ <code>+</code> â†’ <code>PLUS</code>ï¼‰ï¼›</li>
<li>é‡åˆ° <code>"</code> æˆ– <code>'</code> â†’ ç»§ç»­å¾€åè¯»ï¼Œç›´åˆ°ä¸‹ä¸€ä¸ªç›¸åŒå¼•å· â†’ è¯†åˆ«ä¸º <code>STRING_LITERAL</code>ï¼ˆå»æ‰å¼•å·ï¼‰ï¼›</li>
<li>é‡åˆ° <code>.</code> â†’ è¯†åˆ«ä¸º <code>DOT</code>ï¼ˆæˆå‘˜è®¿é—®ï¼‰ï¼›</li>
<li>é‡åˆ°ç©ºæ ¼ / åˆ¶è¡¨ç¬¦ â†’ ç›´æ¥è·³è¿‡ï¼ˆæ— æ„ä¹‰å­—ç¬¦ï¼‰ï¼›</li>
<li>é‡åˆ°æ— æ³•è¯†åˆ«çš„å­—ç¬¦ï¼ˆå¦‚ <code>#</code>/<code>@</code>ï¼‰â†’ æŠ›å‡ºè¯­æ³•é”™è¯¯ï¼ˆ<code>WXLogError</code>ï¼‰ã€‚</li>
</ol>
<p>Weex çš„ <code>WXJSASTParser</code> å†…éƒ¨ä¼šç»´æŠ¤ä¸€ä¸ªã€ŒToken æµã€ï¼ˆæ•°ç»„ï¼‰ï¼Œè¯æ³•åˆ†æåæŠŠ Token æŒ‰é¡ºåºå­˜å…¥æµä¸­ï¼Œä¾›ä¸‹ä¸€æ­¥è¯­æ³•åˆ†æä½¿ç”¨ã€‚</p>
<h4 data-id="heading-57">2. è¯­æ³•åˆ†æï¼ˆSyntactic Analysisï¼‰</h4>
<p>è¯­æ³•åˆ†ææ˜¯ã€Œæ ¹æ® JS è¡¨è¾¾å¼è¯­æ³•è§„åˆ™ï¼ŒæŠŠ Token æµç»„åˆä¸ºæ ‘å½¢ AST èŠ‚ç‚¹ã€â€”â€” æ ¸å¿ƒæ˜¯ã€ŒéªŒè¯ Token åºåˆ—æ˜¯å¦ç¬¦åˆè¯­æ³•ï¼Œå¹¶æ„å»ºå±‚çº§å…³ç³»ã€ã€‚</p>
<p>Weex æ”¯æŒçš„ JS è¡¨è¾¾å¼è¯­æ³•å­é›†ï¼ˆæ ¸å¿ƒï¼‰ï¼š</p>
<ul>
<li>æ ‡è¯†ç¬¦ï¼š<code>user</code>ã€<code>imageUrl</code>ï¼ˆå¯¹åº” <code>WXJSIdentifier</code>ï¼‰ï¼›</li>
<li>æˆå‘˜è®¿é—®ï¼š<code>user.name</code>ã€<code>list[0]</code>ï¼ˆå¯¹åº” <code>WXJSMemberExpression</code>ï¼‰ï¼›</li>
<li>å­—é¢é‡ï¼šå­—ç¬¦ä¸²ï¼ˆ<code>'abc'</code>ï¼‰ã€æ•°å­—ï¼ˆ<code>123</code>ï¼‰ã€å¸ƒå°”ï¼ˆ<code>true</code>ï¼‰ã€nullï¼ˆå¯¹åº” <code>WXJSStringLiteral</code>/<code>WXJSNumericLiteral</code> ç­‰ï¼‰ï¼›</li>
<li>äºŒå…ƒè¿ç®—ï¼š<code>a + b</code>ã€<code>age &gt; 18</code>ã€<code>a === b</code>ï¼ˆå¯¹åº” <code>WXJSBinaryExpression</code>ï¼‰ï¼›</li>
<li>æ¡ä»¶è¿ç®—ï¼š<code>age &gt; 18 ? 'adult' : 'teen'</code>ï¼ˆå¯¹åº” <code>WXJSConditionalExpression</code>ï¼‰ï¼›</li>
<li>æ•°ç»„è¡¨è¾¾å¼ï¼š<code>[a, b, c]</code>ï¼ˆå¯¹åº” <code>WXJSArrayExpression</code>ï¼‰ã€‚</li>
</ul>
<p>ç¤ºä¾‹ï¼šToken æµ â†’ AST èŠ‚ç‚¹çš„æ„å»ºè¿‡ç¨‹</p>
<p>Token æµï¼š<code>IDENTIFIER(user) â†’ DOT â†’ IDENTIFIER(name) â†’ PLUS â†’ STRING_LITERAL(?size=100)</code></p>
<ol>
<li>è¯­æ³•åˆ†æå™¨å…ˆè¯»å–å‰ 3 ä¸ª Tokenï¼ˆ<code>user</code> â†’ <code>.</code> â†’ <code>name</code>ï¼‰ï¼ŒåŒ¹é…ã€Œæˆå‘˜è®¿é—®è¯­æ³•è§„åˆ™ã€ï¼ˆ<code>IDENTIFIER . IDENTIFIER</code>ï¼‰â†’ æ„å»º <code>WXJSMemberExpression</code> èŠ‚ç‚¹ï¼ˆå·¦å­èŠ‚ç‚¹ <code>user</code>ï¼Œå³å­èŠ‚ç‚¹ <code>name</code>ï¼‰ï¼›</li>
<li>æ¥ç€è¯»å– <code>PLUS</code>ï¼ˆäºŒå…ƒè¿ç®—ç¬¦ï¼‰ï¼Œå†è¯»å–åé¢çš„ <code>STRING_LITERAL(?size=100)</code> â†’ åŒ¹é…ã€ŒäºŒå…ƒè¿ç®—è¯­æ³•è§„åˆ™ã€ï¼ˆ<code>Expression + Expression</code>ï¼‰ï¼›</li>
<li>æŠŠä¹‹å‰æ„å»ºçš„ <code>WXJSMemberExpression</code> ä½œä¸ºã€Œå·¦å­èŠ‚ç‚¹ã€ï¼Œ<code>STRING_LITERAL</code> ä½œä¸ºã€Œå³å­èŠ‚ç‚¹ã€ï¼Œ<code>PLUS</code>ä½œä¸ºã€Œè¿ç®—ç¬¦ã€â†’ æ„å»ºæ ¹èŠ‚ç‚¹ <code>WXJSBinaryExpression</code>ï¼›</li>
<li>æœ€ç»ˆç”Ÿæˆ AST æ ‘ï¼ˆå¦‚ä¹‹å‰çš„ç»“æ„ï¼‰ã€‚</li>
</ol>
<p>è¯­æ³•åˆ†æçš„å®ç°é€»è¾‘ï¼ˆç®€åŒ–ï¼‰ï¼š</p>
<p>Weex é‡‡ç”¨ã€Œé€’å½’ä¸‹é™åˆ†ææ³•ã€ï¼ˆæœ€é€‚åˆæ‰‹å·¥å®ç°çš„è¯­æ³•åˆ†ææ–¹æ³•ï¼‰ï¼š</p>
<ol>
<li>ä¸ºæ¯ç§è¡¨è¾¾å¼ç±»å‹å®šä¹‰ä¸€ä¸ªã€Œè§£æå‡½æ•°ã€ï¼ˆå¦‚ <code>parseMemberExpression</code> è§£ææˆå‘˜è®¿é—®ã€<code>parseBinaryExpression</code> è§£æäºŒå…ƒè¿ç®—ï¼‰ï¼›</li>
<li>è§£æå‡½æ•°é€’å½’è°ƒç”¨ï¼šæ¯”å¦‚ <code>parseBinaryExpression</code> ä¼šè°ƒç”¨ <code>parseMemberExpression</code> è§£æå·¦å³æ“ä½œæ•°ï¼Œ<code>parseMemberExpression</code> ä¼šè°ƒç”¨ <code>parseIdentifier</code> è§£ææ ‡è¯†ç¬¦ï¼›</li>
<li>è¯­æ³•æ ¡éªŒï¼šå¦‚æœ Token åºåˆ—ä¸ç¬¦åˆè§„åˆ™ï¼ˆå¦‚ <code>user.name +</code> ç¼ºå°‘å³æ“ä½œæ•°ï¼‰ï¼Œä¼šæŠ›å‡ºã€Œè¯­æ³•é”™è¯¯ã€æ—¥å¿—ï¼Œç»ˆæ­¢è§£æã€‚</li>
</ol>
<h4 data-id="heading-58">3. AST èŠ‚ç‚¹å°è£…</h4>
<p>è½¬ä¸º Weex è‡ªå®šä¹‰çš„ <code>WXJSExpression</code>ã€‚è¯­æ³•åˆ†æç”Ÿæˆçš„æ˜¯ã€ŒæŠ½è±¡è¯­æ³•æ ‘ç»“æ„ã€ï¼ŒWeex ä¼šæŠŠè¿™ä¸ªç»“æ„å°è£…ä¸ºè‡ªå®šä¹‰çš„ <code>WXJSExpression</code> å­ç±»ï¼ˆå¯¹åº”ä¸åŒè¡¨è¾¾å¼ç±»å‹ï¼‰ï¼Œæ¯ä¸ªå­ç±»å­˜å‚¨è¯¥èŠ‚ç‚¹çš„å…³é”®ä¿¡æ¯ï¼ˆå¦‚è¿ç®—ç¬¦ã€å­èŠ‚ç‚¹ï¼‰ï¼Œä¾›åç»­ç”Ÿæˆ <code>WXDataBindingBlock</code> ä½¿ç”¨ã€‚</p>
<p>ç¤ºä¾‹å°è£…ï¼š</p>
<ul>
<li><code>WXJSMemberExpression</code> ç±»ï¼šå­˜å‚¨ <code>object</code>ï¼ˆå­èŠ‚ç‚¹ï¼Œå¦‚ <code>user</code>ï¼‰ã€<code>property</code>ï¼ˆå­èŠ‚ç‚¹ï¼Œå¦‚ <code>name</code>ï¼‰ã€<code>computed</code>ï¼ˆæ˜¯å¦æ˜¯è®¡ç®—å±æ€§ï¼Œå¦‚ <code>list[0]</code> ä¸º <code>YES</code>ï¼Œ<code>user.name</code> ä¸º <code>NO</code>ï¼‰ï¼›</li>
<li><code>WXJSBinaryExpression</code> ç±»ï¼šå­˜å‚¨ <code>left</code>ï¼ˆå·¦å­èŠ‚ç‚¹ï¼‰ã€<code>right</code>ï¼ˆå³å­èŠ‚ç‚¹ï¼‰ã€<code>operator_</code>ï¼ˆè¿ç®—ç¬¦å­—ç¬¦ä¸²ï¼Œå¦‚ <code>"+"</code>ï¼‰ï¼›</li>
<li>å­—é¢é‡ç±»ï¼ˆå¦‚ <code>WXJSStringLiteral</code>ï¼‰ï¼šå­˜å‚¨ <code>value</code>ï¼ˆå­—é¢é‡å€¼ï¼Œå¦‚ <code>?size=100</code>ï¼‰ã€‚</li>
</ul>
<p>è¿™äº›ç±»çš„å®šä¹‰åœ¨ Weex æºç çš„ <code>WXJSASTParser.h</code> ä¸­ï¼Œæœ¬è´¨æ˜¯ã€Œæ•°æ®å®¹å™¨ã€ï¼ŒæŠŠ AST ç»“æ„è½¬åŒ–ä¸º Objective-C ä»£ç å¯è®¿é—®çš„å¯¹è±¡ã€‚</p>
<p><code>WXJSASTParser</code> æœ¬è´¨ï¼šå®ƒä¸æ˜¯å®Œæ•´çš„ JS è§£æå™¨ï¼ˆä¸æ”¯æŒ <code>function</code>ã€<code>for</code> ç­‰å¤æ‚è¯­æ³•ï¼‰ï¼Œè€Œæ˜¯ã€Œä¸“é—¨ä¸º Weex ç»‘å®šè¡¨è¾¾å¼è®¾è®¡çš„è½»é‡è§£æå™¨ã€â€”â€” åªè§£æéœ€è¦çš„ JS è¡¨è¾¾å¼å­é›†ï¼ŒæŠŠå­—ç¬¦ä¸²è½¬ä¸ºç»“æ„åŒ–çš„ AST èŠ‚ç‚¹ï¼Œæœ€ç»ˆç›®çš„æ˜¯ã€Œè®© Native ä»£ç èƒ½é€’å½’éå†èŠ‚ç‚¹ï¼Œè®¡ç®—å‡ºè¡¨è¾¾å¼ç»“æœã€ï¼ˆå¦‚ <code>user.name + '?size=100'</code> â†’ <code>avatar.png?size=100</code>ï¼‰ã€‚</p>
<p>è¿™ç§ã€Œè‡ªå®šä¹‰è½»é‡è§£æå™¨ã€çš„è®¾è®¡ï¼Œæ—¢é¿å…äº†ä¾èµ–å®Œæ•´ JS å¼•æ“çš„ä½“ç§¯å’Œæ€§èƒ½å¼€é”€ï¼Œåˆèƒ½ç²¾å‡†é€‚é… Weex çš„ç»‘å®šéœ€æ±‚ï¼Œæ˜¯è·¨ç«¯æ¡†æ¶çš„å¸¸è§ä¼˜åŒ–æ€è·¯ã€‚</p>
<h2 data-id="heading-59">åã€å€¼å¾—å€Ÿé‰´çš„åœ°æ–¹</h2>
<h3 data-id="heading-60">1. WXThreadSafeMutableDictionary çº¿ç¨‹å®‰å…¨å­—å…¸</h3>
<p>Weex ä¸­çš„ WXThreadSafeMutableDictionary æä¾›äº†ä¸€ä¸ªçº¿ç¨‹å®‰å…¨çš„å­—å…¸ï¼Œå…¶æœ¬è´¨æ˜¯é€šè¿‡åŠ  pthread_muext_t é”æ¥ç»´æŠ¤å†…éƒ¨çš„ä¸€ä¸ªå­—å…¸çš„ã€‚
æ¯”å¦‚ä¸‹é¢çš„ä»£ç </p>
<p>åˆå§‹åŒ–é”ç›¸å…³çš„é…ç½®</p>
<pre><code class="hljs language-Objective-C" lang="Objective-C">@interface WXThreadSafeMutableDictionary ()
{
    NSMutableDictionary* _dict;
    pthread_mutex_t _safeThreadDictionaryMutex;
    pthread_mutexattr_t _safeThreadDictionaryMutexAttr;
}

@end

@implementation WXThreadSafeMutableDictionary

- (instancetype)initCommon
{
    self = [super init];
    if (self) {
        pthread_mutexattr_init(&amp;(_safeThreadDictionaryMutexAttr));
        pthread_mutexattr_settype(&amp;(_safeThreadDictionaryMutexAttr), PTHREAD_MUTEX_RECURSIVE); // must use recursive lock
        pthread_mutex_init(&amp;(_safeThreadDictionaryMutex), &amp;(_safeThreadDictionaryMutexAttr));
    }
    return self;
}

- (instancetype)init
{
    self = [self initCommon];
    if (self) {
        _dict = [NSMutableDictionary dictionary];
    }
    return self;
}
</code></pre>
<p>åœ¨å­—å…¸æ“ä½œçš„åœ°æ–¹ä½¿ç”¨é”</p>
<pre><code class="hljs language-Objective-C" lang="Objective-C">- (void)setObject:(id)anObject forKey:(id&lt;NSCopying&gt;)aKey
{
    id originalObject = nil; // make sure that object is not released in lock
    @try {
        pthread_mutex_lock(&amp;_safeThreadDictionaryMutex);
        originalObject = [_dict objectForKey:aKey];
        [_dict setObject:anObject forKey:aKey];
    }
    @finally {
        pthread_mutex_unlock(&amp;_safeThreadDictionaryMutex);
    }
    originalObject = nil;
}
</code></pre>
<p>è¿™ä¹ˆå†™çš„ä»·å€¼ï¼š<strong>è§£é”é€»è¾‘ã€Œç»å¯¹æ‰§è¡Œã€ï¼Œå½»åº•é¿å…æ­»é”</strong>
è¿™æ˜¯ <code>@try-finally</code> æœ€æ ¸å¿ƒçš„ä»·å€¼ â€”â€”æ— è®º try å—å†…å‘ç”Ÿä»€ä¹ˆï¼ˆæ­£å¸¸æ‰§è¡Œã€æå‰ returnã€æŠ›å¼‚å¸¸ï¼‰ï¼Œfinally å—çš„è§£é”é€»è¾‘ä¸€å®šä¼šæ‰§è¡Œ</p>
<p>å¯¹æ¯”æ—  try-finally çš„å†™æ³•</p>
<pre><code class="hljs language-Objective-C" lang="Objective-C">// Bad: è‹¥setObjectæŠ›å¼‚å¸¸ï¼Œunlockä¸ä¼šæ‰§è¡Œâ†’æ­»é”
pthread_mutex_lock(&amp;_mutex);
[_dict setObject:anObject forKey:aKey];
pthread_mutex_unlock(&amp;_mutex); 
</code></pre>
<p>é—®é¢˜ï¼š<code>[_dict setObject:anObject forKey:aKey]</code> å¯èƒ½æŠ›å¼‚å¸¸ï¼ˆæ¯”å¦‚ aKey = nil æ—¶ä¼šè§¦å‘ NSInvalidArgumentExceptionï¼‰ï¼Œè‹¥æ²¡æœ‰ finallyï¼Œé”ä¼šè¢«æ°¸ä¹…æŒæœ‰â†’å…¶ä»–çº¿ç¨‹è°ƒç”¨ lock æ—¶æ­»é”ï¼Œæ•´ä¸ªå­—å…¸æ— æ³•å†æ“ä½œã€‚</p>
<p>è®¾è®¡ä¼˜ç‚¹ï¼š</p>
<ul>
<li><code>@try-finallly</code>ï¼šå³ä½¿ try å†…é€»è¾‘å‡ºé”™ï¼Œfinally ä¹Ÿä¼šæ‰§è¡Œ pthread_mutex_unlockï¼Œä¿è¯é”æœ€ç»ˆé‡Šæ”¾ï¼Œè¿™æ˜¯<strong>çº¿ç¨‹å®‰å…¨çš„ã€Œå…œåº•ä¿éšœã€</strong></li>
<li>æ³¨æ„ï¼Œä¸æ˜¯ <code>try...catch...finally</code>: å¦‚æœåŠ äº† catch é€»è¾‘ï¼Œåˆ™å­—å…¸çš„ key ä¸º nil äº§ç”Ÿçš„å´©æºƒä¹Ÿä¼šè¢«æ•è·æ‰ï¼Œè¿™å±äºä¸ç¬¦åˆé¢„æœŸçš„è¡Œä¸ºã€‚å› ä¸º key ä¸º nil äº§ç”Ÿçš„åŸå› å¤ªå¤šäº†ï¼Œå¯èƒ½æ˜¯ä¸šåŠ¡ä»£ç å¼‚å¸¸ï¼Œä¹Ÿå¯èƒ½æ˜¯æ•°æ®å¼‚å¸¸ï¼Œä¹Ÿå¯èƒ½æ˜¯é€»è¾‘é”™è¯¯ï¼Œå¦‚æœä¸€åˆ€åˆ‡ç›´æ¥ç”¨ <code>try...catch...finally</code> æ•è·äº†å¼‚å¸¸ï¼Œä½†æ˜¯æ²¡æœ‰é…ç½®å¼‚å¸¸çš„æ”¶é›†ã€ä¸ŠæŠ¥ã€å¤„ç†é€»è¾‘ï¼Œå±äºè¾¹ç•Œä¸æ¸…æ™°ï¼Œæœ¬è´¨æ˜¯ä¸ºäº†è§£å†³åŠ è§£é”ä¸åŒ¹é…è€Œå¯èƒ½å¸¦æ¥çš„çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Œå´"å¤šç®¡é—²äº‹"ï¼ŒæŠŠå­—å…¸ key ä¸º nil æœ¬è¯¥å‘ä¸Šè·‘çš„å¼‚å¸¸è€Œå¡ä½äº†ï¼ˆè¿™ä¸ªé—®é¢˜ä¸å†èµ˜è¿°ï¼Œæ˜¯ä¸€ä¸ªç»å…¸çš„ç­–ç•¥é—®é¢˜ï¼Œç«¯ä¸Šçš„å¼‚å¸¸å‘ç”Ÿæ—¶ï¼Œå®‰å…¨æ°”å«çš„â€œåšä¸ä¸åšâ€é—®é¢˜ï¼‰</li>
</ul>
<p>å»¶ä¼¸ï¼šèŠèŠç±»ä¼¼ç½‘æ˜“çš„å¤§ç™½è§£å†³æ–¹æ¡ˆæˆ–è€…ä¸šç•Œå…¶ä»–å…¬å¸ä¸­ï¼Œå®‰å…¨æ°”å«è™½ç„¶ä¿è¯äº†ä»£ç ä¸ crashï¼Œå½±å“ç”¨æˆ·ä½“éªŒï¼Œä½†æ˜¯æ¯”å¦‚æ•°ç»„æœ¬è¯¥è¶Šç•Œï¼Œç°åœ¨å´ä¸è¶Šç•Œï¼š</p>
<ol>
<li>å”¯ä¸€èƒ½åšçš„å°±æ˜¯è¿”å›ä¸€ä¸ªé”™è¯¯çš„å€¼ï¼Œæ¯”å¦‚æ•°ç»„é•¿åº¦ä¸º3ï¼Œè®¿é—®4ï¼Œç°åœ¨ä¸ crashï¼Œè¿”å›äº† 0 çš„å€¼ï¼Œé‚£æ˜¯ä¸æ˜¯äº§ç”Ÿäº†ä¸šåŠ¡å¼‚å¸¸ï¼Ÿæ¯”å¦‚å•†å“ä»·æ ¼</li>
<li>ä¸ crashï¼Œä¹Ÿä¸è¿”å›é”™è¯¯ä½ç½®çš„å€¼ï¼Œç±»ä¼¼ç»™ä¸€ä¸ªå›è°ƒï¼Œå‘Šè¯‰ä¸šåŠ¡æ–¹å‡ºç°äº†å¼‚å¸¸ï¼Œå¯ä»¥åšä¸€äº›ä¸šåŠ¡å±‚é¢çš„æé†’æˆ–è€…é…ç½®(æ¯”å¦‚å¼€å‘é˜¶æ®µå•†å“å¡ç‰‡çš„ä»·æ ¼ Label æ˜¾ç¤ºï¼šå•†å“ä»·æ ¼è·å–é”™è¯¯ï¼Œæ•°ç»„è¶Šç•Œ)ï¼ŒåŒæ—¶äº§ç”Ÿçš„å¼‚å¸¸æ¡ˆå‘ç°åœºä¿¡æ¯å’Œå…¶ä»–çš„ä¸€äº›æ•°æ®ä¼šä¸ŠæŠ¥ï¼Œç”¨äº APM å¹³å°å»åˆ†æå’Œå®šä½ã€‚</li>
</ol>
<p>ä½†è¿™ä¹Ÿäº§ç”Ÿä¸€ä¸ªé—®é¢˜ï¼Œç±»ä¼¼æ•°ç»„è¶Šç•Œçš„åœºæ™¯ï¼Œå¯èƒ½10000æ¬¡é‡Œé¢9999æ¬¡éƒ½æ­£å¸¸ï¼Œåªæœ‰1æ¬¡å¼‚å¸¸ï¼Œä¸šåŠ¡å¼€å‘ä¸ºäº†è¿™ä¸‡åˆ†ä¹‹ä¸€å‡ºç°çš„å¼‚å¸¸ï¼Œè¿˜éœ€è¦å†™ä¸€äº›å¼‚å¸¸å¤„ç†çš„é€»è¾‘ï¼ˆæ¯”å¦‚å•†å“å¡ç‰‡å±•ç¤ºä»·æ ¼è·å–é”™è¯¯ï¼Œæ•°ç»„è¶Šç•Œï¼‰ã€‚é‚£å­—å…¸çš„ key ä¸º nil å‘¢ï¼Ÿé™¤æ³•çš„åˆ†æ¯ä¸º0å‘¢ï¼Ÿè¯¸å¦‚æ­¤ç±»ï¼Œç±»ä¼¼ä¹è§‚é”å’Œæ‚²è§‚é”çš„åœºæ™¯</p>
<p>ç›¸å…³é—®é¢˜çš„æ€è€ƒå¯ä»¥æŸ¥çœ‹è¿™ç¯‡æ–‡ç« ï¼š<a href="https://link.juejin.cn?target=.%2F1.148.md" target="_blank" title="./1.148.md" ref="nofollow noopener noreferrer">å®‰å…¨æ°”å«</a></p>
<ul>
<li>WXHandlerFactoryï¼šWeex æ ¸å¿ƒçš„ã€Œå¤„ç†å™¨å·¥å‚ã€ï¼Œè´Ÿè´£ç®¡ç†æ‰€æœ‰åè®®ï¼ˆå¦‚å›¾ç‰‡åŠ è½½ã€ç½‘ç»œè¯·æ±‚ã€å­˜å‚¨ç­‰ï¼‰çš„å®ç°ç±»æ³¨å†Œ / æŸ¥æ‰¾ï¼›</li>
<li>WXImgLoaderProtocolï¼šWeex å®šä¹‰çš„ã€Œå›¾ç‰‡åŠ è½½åè®®ã€ï¼Œä»…å£°æ˜æ¥å£ï¼ˆä¸‹è½½ã€å–æ¶ˆã€ç¼“å­˜ç­‰ï¼‰ï¼Œä¸åŒ…å«å…·ä½“å®ç°ã€‚</li>
</ul>
<p>Weex æ”¯æŒä¸šåŠ¡å±‚è‡ªå®šä¹‰å›¾ç‰‡åŠ è½½é€»è¾‘ï¼ˆæ¯”å¦‚ç»Ÿä¸€ç”¨é¡¹ç›®çš„å›¾ç‰‡ç¼“å­˜åº“ã€æ·»åŠ ä¸‹è½½æ‹¦æˆªã€åŸ‹ç‚¹ç­‰ï¼‰ï¼Œæ­¤æ—¶è‡ªå®šä¹‰å®ç°ç±»ä¼šæ›¿ä»£é»˜è®¤å®ç°ï¼Œæˆä¸ºä¸‹è½½æ‰§è¡Œè€…ï¼š
æ­¥éª¤ 1ï¼šä¸šåŠ¡å±‚åˆ›å»ºç±»ï¼ˆå¦‚ MyCustomImgLoaderï¼‰ï¼Œéµå¾ª WXImgLoaderProtocolï¼Œå®ç° wx_loadImageWithURL: ç­‰åè®®æ–¹æ³•ï¼ˆå†…éƒ¨å¯è°ƒç”¨ SDWebImage/AFNetworking ç­‰å®Œæˆä¸‹è½½ï¼‰ï¼›
æ­¥éª¤ 2ï¼šå°†è‡ªå®šä¹‰ç±»æ³¨å†Œåˆ° WXHandlerFactoryï¼š</p>
<pre><code class="hljs language-Objective-C" lang="Objective-C">[WXHandlerFactory registerHandler:[MyCustomImgLoader new] forProtocol:@protocol(WXImgLoaderProtocol)];
</code></pre>
<p>æ­¥éª¤ 3ï¼šæ­¤æ—¶ [WXHandlerFactory handlerForProtocol:@protocol(WXImgLoaderProtocol)] ä¼šè¿”å› MyCustomImgLoader å®ä¾‹ï¼Œæ‰€æœ‰å›¾ç‰‡ä¸‹è½½ç”±è¯¥ç±»è´Ÿè´£</p>
<h3 data-id="heading-61">2. è®¾è®¡åˆ†å±‚åˆç†</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TD
    A[å¼€å‘è€…ç¼–å†™çš„ .we/.vue æ–‡ä»¶] --&gt; B[Transformer&lt;br/&gt;è½¬æ¢JS Bundle];
    B --&gt; C[JS Framework&lt;br/&gt;è§£æå¹¶ç®¡ç†Virtual DOM];
    C -- é€šè¿‡JS Bridgeå‘é€æ¸²æŸ“æŒ‡ä»¤ --&gt; D[Native SDK&lt;br/&gt;æ¸²æŸ“å¼•æ“];
    D --&gt; E[iOS/Android/Web åŸç”Ÿè§†å›¾];
    
    C -- æ”¯æŒå¤šç§DSL --&gt; F[Vue.js];
    C -- æ”¯æŒå¤šç§DSL --&gt; G[Raxï¼ˆç±»Reactï¼‰];
    D -- åŸç”Ÿèƒ½åŠ›æ‰©å±• --&gt; H[è‡ªå®šä¹‰Component];
    D -- åŸç”Ÿèƒ½åŠ›æ‰©å±• --&gt; I[è‡ªå®šä¹‰Module];
</code></pre>
<p>Weex æœ€æ ¸å¿ƒçš„è®¾è®¡æ˜¯å°†æ•´ä¸ªæ¡†æ¶æ¸…æ™°åœ°åˆ†ä¸ºï¼š<strong>è¯­æ³•å±‚ï¼ˆDSLï¼‰</strong>ã€<strong>ä¸­é—´å±‚ï¼ˆJS Frameworkï¼‰<strong>å’Œ</strong>æ¸²æŸ“å±‚ï¼ˆNative SDKï¼‰</strong></p>
<p>è¿™ç§æ¸²æŸ“å¼•æ“å’Œè¯­æ³•å±‚ DSL åˆ†ç¦»çš„è®¾è®¡ï¼Œå¯ä»¥ä½¿å¾—ä¸Šå±‚ DSL æ–¹ä¾¿æ‹“å±• Vueã€Rax å†™æ³•ï¼Œä¸‹å±‚æ¸²æŸ“å¼•æ“å¯ä»¥ä¿æŒè¾ƒå¥½çš„ç¨³å®šæ€§ã€‚ä¸ºäº†ç”Ÿæ€çš„æ‹“å±•æä¾›äº†æå¤§çš„ä¾¿æºæ€§ã€‚</p>
<h3 data-id="heading-62">3. å¯æ‰©å±•çš„ç»„ä»¶ä¸æ¨¡å—ç³»ç»Ÿ</h3>
<p>Weex é€šè¿‡<code>WXSDKEngine.registerComponent()</code> å’Œ <code>registerModule()</code> æ–¹æ³•ï¼Œå…è®¸å¼€å‘è€…æ‰©å±•åŸç”Ÿç»„ä»¶ ï¼ˆUI Componentï¼‰å’Œæ¨¡å—ï¼ˆLogin Moduleï¼‰ã€‚è¿™å¥—æœºåˆ¶è®¾è®¡å¾—è¶³å¤Ÿåº•å±‚å’Œé€šç”¨ï¼Œä½¿å¾— Weex å¯ä»¥ç”±å¼€å‘è€…æ¥æ³¨å†Œï¼Œç”±å…¬å¸å†…çš„ä½“éªŒè®¾è®¡ä¸­å¿ƒè§„èŒƒæ¥è½åœ°çš„ç»„ä»¶ã€‚ä»¥åŠä¸€äº›åŸºç¡€èƒ½åŠ›ã€‚è¿™æ ·å­ Weex å®˜æ–¹å·²ç»æä¾›äº†ä¸€äº›åŠŸèƒ½å¼ºå¤§çš„ç­‹éª¨ï¼Œæˆ‘ä»¬åœ¨å…¶ä¹‹ä¸Šå¯ä»¥æä¾›æ›´ç¬¦åˆéœ€æ±‚çš„å¤–è¡¨å’Œæ›´æœ‰åŠ›é‡çš„ä¸€å—æ‰‹è‡‚è‚Œè‚‰ã€‚</p>
<p>è™½ç„¶äº‹åè§†è§’æ¥çœ‹ï¼ŒWeexã€RNã€Flutterï¼Œç”šè‡³æ˜¯æ›´æ—©çš„ã€è®¾è®¡å®Œå–„çš„ Hybrid éƒ½æœ‰è¯¥èƒ½åŠ›ã€‚ä½†è¿™å¯¹äºè¿œå¤æ—¶æœŸçš„ Weex æ¥è¯´ï¼Œè¿˜æ˜¯å¯åœˆå¯ç‚¹çš„ã€‚</p>
<h3 data-id="heading-63">4.  è½»é‡ JSBundle + å¢é‡æ›´æ–°æ”¯æŒ</h3>
<p>Weex çš„ JSBundle ä»…åŒ…å«ä¸šåŠ¡é€»è¾‘å’Œç»„ä»¶æè¿°ï¼Œæ¡†æ¶ä»£ç ï¼ˆVue å†…æ ¸ã€Weex åŸºç¡€ APIï¼‰å†…ç½®åœ¨åŸç”Ÿ SDK ä¸­ï¼Œå› æ­¤ Bundle ä½“ç§¯æå°ï¼›åŒæ—¶æ”¯æŒå°† Bundle æ‹†åˆ†ä¸º â€œåŸºç¡€åŒ…ï¼ˆå…¬å…±é€»è¾‘ï¼‰+ ä¸šåŠ¡åŒ…ï¼ˆé¡µé¢é€»è¾‘ï¼‰â€ï¼Œå®ç°å¢é‡æ›´æ–°ã€‚</p>
<p>è§£å†³äº†è·¨ç«¯æ¡†æ¶ â€œé¦–å±åŠ è½½æ…¢â€ çš„ç—›ç‚¹ï¼ˆå° Bundle åŠ è½½æ›´å¿«ï¼‰ï¼ŒåŒæ—¶å¢é‡æ›´æ–°é™ä½äº†å‘å¸ƒæˆæœ¬ã€‚</p>
<h2 data-id="heading-64">åä¸€ã€Weex APM</h2>
<h3 data-id="heading-65">1. å†å²èƒŒæ™¯</h3>
<p>Weex æ˜¯è¯¸å¤šå¹´å‰çš„äº§ç‰©ï¼Œéƒ¨åˆ†ä¸šåŠ¡çº¿ç”¨ Weex å†™äº†éƒ¨åˆ†åŠŸèƒ½æ¨¡å—ï¼Œæˆ–è€…æ˜¯æŸå‡ ä¸ªé¡µé¢ï¼Œæˆ–è€…æ˜¯æŸä¸ªäºŒçº§ã€ä¸‰çº§ä¸šåŠ¡ SDK çš„é¡µé¢ã€‚ä½†å¯ä»¥ç¡®å®šçš„æ˜¯ï¼š</p>
<ul>
<li>21å¹´å°±å®Œæˆäº† Flutter çš„åŸºå»ºå¼€å‘ï¼ˆå¯¹é½ Native çš„ UI ç»„ä»¶åº“ï¼Œéµå¾ªä½“éªŒè®¾è®¡å¹³å°äº§å‡ºçš„é›†å›¢ UI æ ‡å‡†ï¼›åšäº† Flutter çš„å¤§é‡ pluginã€æ‰“åŒ…æ„å»ºå¹³å°ã€æ—¥å¿—åº“ã€ç½‘ç»œåº“ã€æ¢ç…§ç¯ã€APM SDKã€çƒ­ä¿®å¤èƒ½åŠ›ç­‰ï¼‰ã€‚æ–°ä¸šåŠ¡çš„å®ç°åªä¼šåœ¨ Native å’Œ Flutter ä¸Šè€ƒè™‘</li>
<li>Weex ä¸šåŠ¡ä»£ç åŸºæœ¬ä¸Šæ˜¯å­˜é‡çš„</li>
<li>Weex ä»£ç æ²¡æœ‰ bug å°±ä¸å»ä¿®æ”¹ï¼›æœ‰ç‰ˆæœ¬è¿­ä»£ï¼Œä¹‹å‰æ˜¯ Weex å®ç°çš„ï¼Œæœ¬æ¬¡åªåšç®€å• UI å¢åˆ æˆ–å­—æ®µè°ƒæ•´ï¼Œä¹Ÿæ˜¯ä¼šä¿®æ”¹ä¸€ä¸‹ã€‚åˆæ¬¡ä¹‹å¤–ä¸ä¿®æ”¹ Weex ä»£ç </li>
</ul>
<p>æ‰€ä»¥åƒ Native ä¸€æ ·å»å…¨é¢ç›‘æ§æ€§èƒ½ã€ç½‘ç»œã€crashã€å¼‚å¸¸ã€ç™½å±ã€é¡µé¢åŠ è½½è€—æ—¶ç­‰ç»´åº¦çš„è¯ï¼ŒROI æ˜¯å¾ˆä½çš„ã€‚é‚£ä¹ˆå°±éœ€è¦åˆ¶å®šä¸€äº›ç­–ç•¥å»æœ‰é’ˆå¯¹æ€§çš„ç›‘æ§é«˜ä¼˜é—®é¢˜ã€‚</p>
<p>Weex çš„å¼‚å¸¸æ¯”è¾ƒæœ‰ç‰¹ç‚¹ï¼Œæ¯”å¦‚åœ¨é¡µé¢çš„æ¨¡ç‰ˆä»£ç ä¸­ç»‘å®šäº† data ä¸­çš„ä¸€ä¸ªå¯¹è±¡ï¼Œæ­¤æ—¶å¯¹è±¡å¯èƒ½å¹¶æ²¡æœ‰å€¼ï¼Œè€Œæ˜¯ä¾èµ–åç»­çš„ç½‘ç»œè¯·æ±‚å®Œæˆï¼Œå¯¹è±¡æ‰æœ‰äº†å…·ä½“çš„å€¼ data æ”¹å˜ï¼Œæ•°æ®é©±åŠ¨ï¼Œé¡µé¢å†æ¬¡ renderã€‚æ‰€ä»¥ç›‘æ§ä»£ç ä¼šè®¤ä¸ºç¬¬ä¸€æ¬¡ render çš„æ—¶å€™è®¿é—®å¯¹è±¡ä¸å­˜åœ¨çš„å±æ€§ã€‚
çœŸæ­£æœ‰é—®é¢˜çš„ä»£ç å’Œä¸å½±å“ä¸šåŠ¡çš„å¼‚å¸¸ä¿¡æ¯ï¼Œéƒ½ä¼šè¢« Vue å®˜æ–¹è®¤ä¸ºæ˜¯å¼‚å¸¸ã€‚åŸºäºè¿™æ ·çš„èƒŒæ™¯ï¼Œæˆ‘ä»¬æ— æ³• pick å‡ºçœŸæ­£å¼‚å¸¸æˆ–è€…æ˜¯å¼€å‘è€…åˆ¤ç©ºä»£ç æ²¡å†™å¥½çš„é—®é¢˜ã€‚åŸºäºæ­¤ï¼Œæˆ‘ä»¬éœ€è¦åšä¸€äº›çº¦å®šå’Œæ ‡å‡†ã€‚</p>
<h3 data-id="heading-66">2. ä¼˜å…ˆçº§æƒè¡¡æ ‡å‡†</h3>
<p>è¿™æ—¶å€™å°±éœ€è¦æ‘’å¼ƒç¨‹åºå‘˜è§†è§’ï¼ˆä¸ç„¶ä¼šé™·å…¥å•¥æ•°æ®éƒ½æƒ³ç»Ÿè®¡ï¼Œå¯èƒ½æ˜¯æ´ç™–ã€å¯èƒ½æ˜¯è¿½æ±‚ï¼‰ï¼Œä½†ä» ROI è§’åº¦å‡ºå‘ï¼Œæˆ‘ä»¬å°±éœ€è¦åˆ‡æ¢åˆ°ç”¨æˆ·è§†è§’ã€‚</p>
<p>å‡è®¾ä½ æ˜¯ä¸€ä¸ªç”¨æˆ·ï¼Œä»€ä¹ˆæ ·çš„æƒ…å†µä»£è¡¨ä¸šåŠ¡å¼‚å¸¸ï¼Œå¯¹æˆ‘ä»¬çš„ç”¨æˆ·æ¥è¯´æ¯”è¾ƒç—›å‘¢ï¼Ÿ</p>
<ul>
<li>é¡µé¢ç™½å±äº†ï¼Œçœ‹éƒ½çœ‹ä¸åˆ°äº†ï¼Œåˆ«è¯´ä½ ä»¬çš„ App ä¸ºæˆ‘èµ‹èƒ½è§£å†³ç”¨æˆ·ç—›ç‚¹äº†</li>
<li>ç¨å¾®å¥½ç‚¹ï¼Œå¯ä»¥çœ‹åˆ°é¡µé¢äº†ï¼Œä½†æ˜¯æŸä¸€ä¸ªåŒºåŸŸæ˜¯ç™½å±çš„ã€‚æ¯”å¦‚ï¼šè¯¥é¡µé¢å¤§éƒ¨åˆ†åœ¨å±•ç¤ºå•†å“ä»·æ ¼ã€å•†å“æ•°é‡ã€å•†å“æŠ˜æ‰£ä»·ã€å•†å“æŠ˜æ‰£ä¿¡æ¯ã€ä¸‹é¢åº”è¯¥æ˜¯æœ‰ä¸ªâ€œç¡®è®¤æ”¯ä»˜â€æŒ‰é’®ï¼Œä½†æ˜¯æ­¤å¤„å°±æ˜¯ç©ºç™½ï¼Œç‚¹ä¹Ÿç‚¹ä¸äº†ã€‚</li>
<li>æƒ…å†µå†å¥½ç‚¹ã€‚å¯ä»¥çœ‹åˆ°å…¨éƒ¨çš„é¡µé¢äº†ï¼Œä½†æ˜¯ç‚¹å‡»åæ— å“åº”ã€‚æ¯”å¦‚ï¼šè¯¥é¡µé¢å¤§éƒ¨åˆ†åœ¨å±•ç¤ºå•†å“ä»·æ ¼ã€å•†å“æ•°é‡ã€å•†å“æŠ˜æ‰£ä»·ã€å•†å“æŠ˜æ‰£ä¿¡æ¯ã€ä¸‹é¢æœ‰ä¸ªâ€œç¡®è®¤æ”¯ä»˜â€æŒ‰é’®ã€‚ç”¨æˆ·åœ¨è€ƒè™‘å†ä¸‰ï¼Œæœ¬ç€ç†æ€§è´­ç‰©åï¼Œå‘ç°æ˜¯åˆšéœ€å“ï¼Œå’¬ç´§ç‰™è¦ä»˜æ¬¾äº†ï¼Œæ­¤æ—¶ç‚¹å‡»â€œç¡®è®¤æ”¯ä»˜â€æŒ‰é’®äº†ï¼Œä½†æ˜¯é¡µé¢æ²¡æœ‰ä»»ä½•ååº”ã€‚ç”¨æˆ·ä¹Ÿæ˜¯â€œè§å¤šè¯†å¹¿â€çš„ä½“é¢äººï¼ŒçŒœæµ‹å¯èƒ½æ˜¯ç½‘ç»œä¸å¥½çš„æƒ…å†µï¼Œæ‰€ä»¥ç­‰äº†1åˆ†é’Ÿï¼Œä»–å¾ˆæœ‰è€å¿ƒã€‚åˆ‡æ¢äº† WI-FI åˆ° 5G åï¼Œç»§ç»­ç‚¹å‡»ï¼Œä¾æ—§æ²¡ååº”ã€‚ä¸€æ€’ä¹‹ä¸‹ç‚¹äº†10æ¬¡ï¼Œç­‰äº†2åˆ†é’Ÿï¼Œè¿˜æ˜¯æ²¡ååº”ã€‚ä»–å¥”æºƒäº†ï¼Œå¸è½½äº† App</li>
</ul>
<p>ä¸Šè¿°å‡ ç§æƒ…å†µï¼Œæ€»ç»“ä¸ºï¼šæŒ‰ç…§å¼‚å¸¸ç­‰çº§ï¼Œå¯ä»¥åˆ’åˆ†ä¸ºå½±å“ä¸šåŠ¡å’Œä¸å½±å“ä¸šåŠ¡ã€‚ä»€ä¹ˆå«â€œå½±å“ä¸šåŠ¡â€ï¼Ÿè¿™æ˜¯æˆ‘ä»¬è‡ªå·±å®šä¹‰çš„æ ‡å‡†ï¼Œå½±å“ç”¨æˆ·æ˜¯å¦æ­£å¸¸æ“ä½œ Appã€‚æ¯”å¦‚ï¼šé¡µé¢ç™½å±ï¼ˆé¡µé¢å…¨éƒ¨ç™½å±ã€é¡µé¢éƒ¨åˆ†ç™½å±ï¼‰ã€ç‚¹å‡»æŸä¸ªæŒ‰é’®æ— å“åº”ï¼Œè¿™äº›å«åšâ€œå½±å“ä¸šåŠ¡â€ï¼Œå±äº Error çº§åˆ«ã€‚å…¶ä»–çš„ä¸€äº›è½»å¾®å¼‚å¸¸ï¼Œä¸å½±å“ç”¨æˆ·ä½¿ç”¨ App åŠŸèƒ½ï¼Œä¸å½±å“ä¸šåŠ¡ï¼Œå±äº Warning çº§åˆ«ã€‚</p>
<h3 data-id="heading-67">3. UI æ˜¾ç¤ºå¼‚å¸¸</h3>
<h4 data-id="heading-68">1. éƒ¨åˆ†ç™½å±ï¼šæ³¨å†Œçš„ Component ä½¿ç”¨å¼‚å¸¸</h4>
<p>è¿™ç§æƒ…å†µå°±å±äºé¡µé¢éƒ¨åˆ†ç™½å±ã€‚å› ä¸ºæŸä¸ªå“ªä¸ª Compoent ä¼šé“ºæ»¡é¡µé¢ï¼ŒåŸºæœ¬ç±»ä¼¼ iOS UI æ§ä»¶ä¸€æ ·ç»„åˆä½¿ç”¨ã€‚å°±åƒä¸Šæ–‡æè¿°çš„ã€Œè¯¥é¡µé¢å¤§éƒ¨åˆ†åœ¨å±•ç¤ºå•†å“ä»·æ ¼ã€å•†å“æ•°é‡ã€å•†å“æŠ˜æ‰£ä»·ã€å•†å“æŠ˜æ‰£ä¿¡æ¯ã€ä¸‹é¢åº”è¯¥æ˜¯æœ‰ä¸ªâ€œç¡®è®¤æ”¯ä»˜â€æŒ‰é’®ï¼Œä½†æ˜¯æ­¤å¤„å°±æ˜¯ç©ºç™½ã€è¿™ä¸ªç©ºç™½ç²—ï¼Œç†åº”æ˜¾ç¤ºä¸€ä¸ª Native æ³¨å†Œçš„ Buttonï¼Œä½†æ˜¯æ²¡æœ‰æ˜¾ç¤ºå‡ºæ¥ï¼Œé€ æˆä¸šåŠ¡çš„é˜»å¡ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a551c125b89945c492daac9ae8f28310~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5p2t5Z-O5bCP5YiY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767925474&amp;x-signature=OD34iKcnKNSl9Au61CaChYwUsvs%3D" alt="WeexComponentRegisterError.png" loading="lazy"/>
.vueï¼ˆæˆ– Weex ä¸“å±.weï¼‰æ–‡ä»¶å†…åŸºäº Vue æ‰©å±•çš„ Weex è·¨å¹³å°æ¨¡æ¿ DSL ä»£ç ï¼Œåœ¨å‰ç«¯æ„å»ºé˜¶æ®µä¼šå…ˆç”± Webpack çš„weex-loaderè§¦å‘ç¼–è¯‘æµç¨‹ï¼šé¦–å…ˆé€šè¿‡ Weex æ ¸å¿ƒç¼–è¯‘å™¨@weex-cli/compilerï¼ˆå¤ç”¨å¹¶æ‰©å±•vue-template-compilerï¼‰å°†æ¨¡æ¿ DSL è§£æä¸ºæ¨¡æ¿ ASTï¼ˆæŠ½è±¡è¯­æ³•æ ‘ï¼‰ï¼›æ¥ç€ç”± Weex è‡ªå®šä¹‰ Babel æ’ä»¶ï¼ˆå¦‚babel-plugin-transform-weex-templateï¼‰å°†æ¨¡æ¿ AST è½¬æ¢ä¸ºæ ‡å‡†åŒ–çš„ JS ASTï¼Œå¹¶é’ˆå¯¹ iOS/Android è·¨å¹³å°ç‰¹æ€§åšå±æ€§ã€æ ·å¼ã€äº‹ä»¶çš„é€‚é…å¤„ç†ï¼ˆå¦‚æ ·å¼å•ä½å½’ä¸€åŒ–ã€äº‹ä»¶åæ ‡å‡†åŒ–ï¼‰ï¼›æœ€ç»ˆç”ŸæˆåŒ…å«_hï¼ˆå³ Weex è¿è¡Œæ—¶çš„$createElementï¼Œç­‰ä»·äº Vue çš„createElementï¼‰è°ƒç”¨çš„renderå‡½æ•°ï¼Œè¯¥å‡½æ•°ä¼šè¢« Webpack æ‰“åŒ…åˆ°æœ€ç»ˆçš„ Weex JS Bundle ä¸­ã€‚</p>
<pre><code class="hljs language-json" lang="json">_c('color-button'<span class="hljs-punctuation">,</span>
  <span class="hljs-punctuation">{</span>
    staticStyle<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      width<span class="hljs-punctuation">:</span> <span class="hljs-string">"400px"</span><span class="hljs-punctuation">,</span>
      height<span class="hljs-punctuation">:</span> <span class="hljs-string">"40px"</span><span class="hljs-punctuation">,</span>
      marginBottom<span class="hljs-punctuation">:</span> <span class="hljs-string">"20px"</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    attrs<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"title"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ç‚¹å‡»è®¡ç®—10+20"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"bgColor"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"#FF6600"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"message"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"hello"</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    on<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"click"</span><span class="hljs-punctuation">:</span> _vm.handleButtonClick
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-comment">// å¦‚æœæœ‰ children å°±æ˜¯ children ä¿¡æ¯</span>
)
</code></pre>
<p>åœ¨ App è¿è¡Œé˜¶æ®µï¼ŒWeex çš„ JS å¼•æ“ï¼ˆiOS ç«¯ä¸º JSCoreã€Android ç«¯ä¸º V8ï¼‰åŠ è½½ JS Bundle åï¼Œæ‰§è¡Œç»„ä»¶çš„renderå‡½æ•°ï¼Œé€šè¿‡è°ƒç”¨ <code>_h</code> å‡½æ•°å°†æ¨¡æ¿æè¿°è½¬æ¢ä¸ºè·¨å¹³å°çš„è™šæ‹Ÿ DOMï¼ˆVNodeï¼‰ï¼ŒVNode ä¼šè¢«åºåˆ—åŒ–ä¸º JSON æ ¼å¼ï¼Œæœ€ç»ˆé€šè¿‡ JS Bridge ä¼ é€’ç»™ Native ç«¯ï¼ˆiOS/Androidï¼‰ç”¨äºåŸç”Ÿè§†å›¾æ¸²æŸ“ã€‚</p>
<p>Weex çš„ Component ç›¸å…³é€»è¾‘éƒ½ç”± <code>WXComponentManager</code> è´Ÿè´£ã€‚é¡µé¢åœ¨æ„å»ºå±•ç¤ºçš„æ—¶å€™ï¼Œä¼šè°ƒç”¨ <code>_buildComponent</code> æ–¹æ³•ï¼Œå…¶å†…éƒ¨ä¼šè°ƒç”¨ WXComponentFactory çš„èƒ½åŠ›ï¼ˆ<code>configWithComponentName</code>ï¼‰ï¼Œæ ¹æ® ComponentName è·å– Componentã€‚</p>
<p><code>configWithComponentName</code> æ˜¯ Weex iOS ä¾§ WXComponentFactoryï¼ˆç»„ä»¶å·¥å‚ç±»ï¼‰çš„æ ¸å¿ƒæ–¹æ³•ä¹‹ä¸€ï¼Œæ ¸å¿ƒä½œç”¨æ˜¯ï¼šæ ¹æ®ä¼ å…¥çš„ç»„ä»¶åç§°ï¼ˆå¦‚ color-button/div/textï¼‰ï¼ŒæŸ¥æ‰¾è¯¥ç»„ä»¶å¯¹åº”çš„ Native ä¾§é…ç½®ï¼ˆWXComponentConfigï¼‰ï¼›è‹¥æ‰¾ä¸åˆ°å¯¹åº”é…ç½®ï¼Œåˆ™é™çº§ä½¿ç”¨åŸºç¡€å®¹å™¨ç»„ä»¶ div çš„é»˜è®¤é…ç½®ï¼Œå¹¶è¾“å‡ºè­¦å‘Šæ—¥å¿—ã€‚</p>
<pre><code class="hljs language-Objective-C" lang="Objective-C">- (WXComponentConfig *)configWithComponentName:(NSString *)name
{
    WXAssert(name, @"Can not find config for a nil component name");
    
    WXComponentConfig *config = nil;
    
    [_configLock lock];
    config = [_componentConfigs objectForKey:name];
    if (!config) {
        WXLogWarning(@"No component config for name:%@, use default config", name);
        config = [_componentConfigs objectForKey:@"div"];
    }
    [_configLock unlock];
    
    return config;
}
</code></pre>
<p>UI Component åšçš„æ¯”è¾ƒéšæ„ï¼Œè®¤ä¸ºæ˜¾ç¤ºé—®é¢˜é™çº§ç”¨ div å°±å¯ä»¥äº†ã€‚åšä¸º SDK è¿™ä¹ˆè®¾è®¡ä¹Ÿä¼¼ä¹å¯ä»¥æ¥å—ï¼Œä½†ä½œä¸ºä¸šåŠ¡æ–¹ï¼Œæˆ‘ä»¬å¿…é¡»æ”¶é›†ç»Ÿè®¡è¿™ç§å¼‚å¸¸æƒ…å†µã€‚
æ‰€ä»¥æ­¤å¤„æˆ‘ä»¬å¯ä»¥æ”¶é›†æ¡ˆå‘ç°åœºæ•°æ®ï¼Œè¿›è¡Œä¸ŠæŠ¥ã€‚æˆ‘ä»¬å‘ç° Weex è‡ªå·±å°è£…äº† <code>WXExceptionUtils</code>ç±»ï¼Œæš´éœ²äº† <code>commitCriticalExceptionRT</code> æ¥å£ï¼Œç”¨äºæ”¶é›†è‡´å‘½é—®é¢˜ã€‚</p>
<pre><code class="hljs language-Objective-C" lang="Objective-C">+ (void)commitCriticalExceptionRT:(WXJSExceptionInfo *)jsExceptionInfo{
    
    WXPerformBlockOnComponentThread(^ {
        id&lt;WXJSExceptionProtocol&gt; jsExceptionHandler = [WXHandlerFactory handlerForProtocol:@protocol(WXJSExceptionProtocol)];
        if ([jsExceptionHandler respondsToSelector:@selector(onJSException:)]) {
            [jsExceptionHandler onJSException:jsExceptionInfo];
        }
        if ([WXAnalyzerCenter isOpen]) {
            [WXAnalyzerCenter transErrorInfo:jsExceptionInfo];
        }
    });
}
</code></pre>
<p>å¯ä»¥çœ‹åˆ°ä¼šåˆ¤æ–­æ˜¯å¦å­˜åœ¨å¯ä»¥å¤„ç† exception éµå¾ª WXJSExceptionProtocol çš„ handlerã€‚æ‰€ä»¥æˆ‘ä»¬æ–°å¢ä¸€ä¸ª <code>WXExceptionReporter</code> ç±»ï¼ˆéµå¾ª WXJSExceptionProtocol åè®®ï¼‰ï¼Œç”¨äºæ”¶é›†å¼‚å¸¸ï¼Œç„¶åç”¨äºç»Ÿä¸€çš„ä¸ŠæŠ¥ï¼Œå†…éƒ¨æä¾›åŸºç¡€æ•°æ®çš„ç»„è£…ã€å­—æ®µè§£æåŠŸèƒ½ã€‚</p>
<p>æ•ˆæœå¦‚ä¸‹ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ad9fc6690769433e8cefadb6cfb52f17~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5p2t5Z-O5bCP5YiY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767925474&amp;x-signature=D%2FyuvCXgWZug8Q8IzvqDBppj2dg%3D" alt="WeexComponentBuildFlow.png" loading="lazy"/></p>
<h4 data-id="heading-69">2. å…¨éƒ¨ç™½å±</h4>
<p>æ ¹æ® Weex çš„å·¥ä½œåŸç†å¯ä»¥çŸ¥é“ï¼Œé¡µé¢éœ€è¦å±•ç¤ºè‚¯å®šè¦æ ¹æ® url å»è·å– JS Bundle å†…å®¹ï¼Œç„¶åè§£ææˆ VNode æœ€åé€šè¿‡ JSBridge å»è°ƒç”¨ Native çš„ UI Component å»å±•ç¤º UIï¼Œé‚£ä¹ˆæ•´ä¸ªæµç¨‹å‡ ä¸ªé‡è¦çš„ç¯èŠ‚éƒ½å¯èƒ½å‡ºé”™ï¼Œå¯¼è‡´é¡µé¢ç™½å±ã€‚</p>
<h5 data-id="heading-70">1. èµ„æºè¯·æ±‚å¤±è´¥</h5>
<p>JS Bundle èµ„æºè¯·æ±‚å¤±è´¥ï¼Œå­˜åœ¨ Errorï¼Œæ­¤æ—¶æ˜¯æ— æ³•å»å±•ç¤º Weex é¡µé¢çš„ã€‚è¿™ç§æƒ…å†µå°±æ˜¯ HTTP çŠ¶æ€ç é200çš„æƒ…å†µã€‚</p>
<p>æ¯ä¸ª Weex é¡µé¢éƒ½ç”± WXSDKInstance è´Ÿè´£ä¸‹è½½ JS Bundle èµ„æºï¼Œæ‰€ä»¥ä¸‹è½½çš„é€»è¾‘åœ¨ WXSDKInstance é‡Œã€‚</p>
<pre><code class="hljs language-Objective-C" lang="Objective-C">- (void)_renderWithRequest:(WXResourceRequest *)request options:(NSDictionary *)options data:(id)data; 
{
  _mainBundleLoader.onFinished = ^(WXResourceResponse *response, NSData *data) {

      NSError *error = nil;
      if ([response isKindOfClass:[NSHTTPURLResponse class]] &amp;&amp; ((NSHTTPURLResponse *)response).statusCode != 200) {
          error = [NSError errorWithDomain:WX_ERROR_DOMAIN
                                      code:((NSHTTPURLResponse *)response).statusCode
                                  userInfo:@{@"message":@"status code error."}];
          if (strongSelf.onFailed) {
              strongSelf.onFailed(error);
          }
      }
      
      if (error) {
          [WXExceptionUtils commitCriticalExceptionRT:strongSelf.instanceId
                                              errCode:[NSString stringWithFormat:@"%d", WX_KEY_EXCEPTION_JS_DOWNLOAD]
                                              function:@"_renderWithRequest:options:data:"
                                            exception:[NSString stringWithFormat:@"download bundle error :%@",[error localizedDescription]]
                                            extParams:nil];
          return;
      }

      if (!data) {
          NSString *errorMessage = [NSString stringWithFormat:@"Request to %@ With no data return", request.URL];
          WX_MONITOR_FAIL_ON_PAGE(WXMTJSDownload, WX_ERR_JSBUNDLE_DOWNLOAD, errorMessage, strongSelf.pageName);
          [WXExceptionUtils commitCriticalExceptionRT:strongSelf.instanceId
                                              errCode:[NSString stringWithFormat:@"%d", WX_KEY_EXCEPTION_JS_DOWNLOAD]
                                              function:@"_renderWithRequest:options:data:"
                                            exception:errorMessage
                                            extParams:nil];
          return;
      }
  };
}
</code></pre>
<p>æ¨¡æ‹Ÿ JS Bundle ä¸‹è½½é”™è¯¯ï¼Œæ•ˆæœå¦‚ä¸‹ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8127cf21938140c0ae40a15a9a5a26b3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5p2t5Z-O5bCP5YiY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767925474&amp;x-signature=r0g86JWgUX33NF7lfv3iwvOb%2B7E%3D" alt="WeexJSBundleDownloadFailed.png" loading="lazy"/></p>
<p>ä¸‹è½½ JS Bundle ç½‘ç»œè¯·æ±‚å®Œæˆåï¼Œå¦‚æœå‡ºç° Errorï¼Œåˆ™ä¼šè°ƒç”¨ WXExceptionUtils çš„èƒ½åŠ›ï¼Œå°†å¼‚å¸¸äº¤ç»™ <code>WXExceptionReporter</code> å»å¤„ç†ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4f045d0177a8483b857901ad7520f993~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5p2t5Z-O5bCP5YiY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767925474&amp;x-signature=RuNioiYspuc%2FThdWHk3%2BOyOUpZE%3D" alt="WeexJSBundleDownloadFailedAPM.png" loading="lazy"/></p>
<h5 data-id="heading-71">2. èµ„æºè¯·æ±‚æˆåŠŸï¼Œæ•°æ®ä¸ºç©º</h5>
<p>è¿˜æœ‰ä¸€ç§æƒ…å†µå°±æ˜¯ï¼š**JSBundle ä¸‹è½½è¯·æ±‚åœ¨ HTTP å±‚é¢ â€œæˆåŠŸå®Œæˆâ€ï¼ˆçŠ¶æ€ç  200ï¼‰ï¼Œä½†è¿”å›çš„äºŒè¿›åˆ¶æ•°æ® data ä¸º nil æˆ–ç©ºï¼ˆé•¿åº¦ä¸º 0ï¼‰ **</p>
<p>å¯èƒ½ä½ ä¼šå¥½å¥‡ï¼Œæ€ä¹ˆå¯èƒ½æœ‰ç©ºçš„ JSBundleï¼Œä»€ä¹ˆåœºæ™¯ä¸‹ä¼šäº§ç”Ÿè¿™ç§æƒ…å†µï¼Ÿ
å‡¡æ˜¯æ­£å¸¸å†™ä»£ç éƒ½ç¬¦åˆé¢„æœŸå°±æ²¡æœ‰ä»»ä½• bug å’Œæ•…éšœäº†ï¼Œæ‰€ä»¥åˆ©ç”¨æ‚²è§‚ç­–ç•¥ï¼Œå°†å„ç§å¯èƒ½å‡ºç°é—®é¢˜çš„åœ°æ–¹éƒ½ç›‘æ§åˆ°ï¼Œå› ä¸ºåªè¦ JSBundle ä¸ºç©ºï¼Œé¡µé¢è‚¯å®šæ˜¯ç™½å±ï¼Œå¯¹äºç”¨æˆ·ä¾§æ¥è¯´éƒ½æ˜¯è‡´å‘½çš„ã€‚</p>
<ol>
<li>æœåŠ¡å™¨/CDN è¿”å›â€œç©ºå“åº”â€ï¼šåç«¯ / CDN é…ç½®å¼‚å¸¸ï¼šè¯·æ±‚çš„ JSBundle URL æœ‰æ•ˆï¼ŒHTTP çŠ¶æ€ç è¿”å› 200ï¼Œä½†å“åº”ä½“ï¼ˆBodyï¼‰ä¸ºç©ºï¼ˆæ¯”å¦‚é™æ€ JS æ–‡ä»¶è¢«åˆ é™¤ã€CDN ç¼“å­˜å¤±æ•ˆä¸”æºç«™æ— æ•°æ®ã€åç«¯æ¥å£é€»è¾‘é”™è¯¯æœªå†™å…¥å“åº”å†…å®¹ï¼‰ï¼›</li>
<li>ä¸‹è½½è¿‡ç¨‹ä¸­æ•°æ®ä¼ è¾“æˆªæ–­ / ä¸¢å¤±</li>
</ol>
<ul>
<li>ç½‘ç»œæ³¢åŠ¨ï¼šä¸‹è½½è¯·æ±‚å·²æ”¶åˆ°æœåŠ¡å™¨çš„ â€œå“åº”å®Œæˆâ€ ä¿¡å·ï¼Œä½†æ•°æ®ä¼ è¾“è¿‡ç¨‹ä¸­å› ç½‘ç»œä¸­æ–­ã€è¶…æ—¶ç­‰å¯¼è‡´ NSData æœªå®Œæ•´æ¥æ”¶ï¼ˆä»… HTTP å¤´æˆåŠŸæ¥æ”¶ï¼Œä½“æ•°æ®ä¸ºç©ºï¼‰ï¼›</li>
<li>Weex åŠ è½½å™¨ï¼ˆmainBundleLoaderï¼‰å¼‚å¸¸ï¼šåŠ è½½å™¨åœ¨å°†å“åº”æ•°æ®è½¬ä¸º NSData æ—¶å‡ºç°åº•å±‚é”™è¯¯ï¼ˆå¦‚å†…å­˜ä¸è¶³ã€æ•°æ®è§£ç å¤±è´¥ï¼‰ï¼Œå¯¼è‡´ data è¢«ç½®ä¸º nilã€‚</li>
</ul>
<p>Mockï¼šå°† data è®¾ä¸º nilã€‚æ•ˆæœå¦‚ä¸‹ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f7346ccdc0574cba97a9bd195bebbbd6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5p2t5Z-O5bCP5YiY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767925474&amp;x-signature=3QAb3CTSFZfYP99pqlhWGR3V7mI%3D" alt="WeexJSBundleParseFailed.png" loading="lazy"/></p>
<p>å¯ä»¥çœ‹åˆ° Weex ä¹Ÿä¼šæŠŠè¿™ç§é”™è¯¯è¿›è¡Œæ”¶é›†ï¼Œè°ƒç”¨ <code>WXExceptionUtils commitCriticalExceptionRT</code>ï¼Œæ‰€ä»¥æˆ‘ä»¬æ·»åŠ çš„ Analyzer æ˜¯å¯ä»¥ç›‘æ§åˆ°è¿™ç§å¼‚å¸¸çš„ã€‚
æ•ˆæœå¦‚ä¸‹ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/03d2c52a165c4844a7a264724a02f71a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5p2t5Z-O5bCP5YiY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767925474&amp;x-signature=dZM6FItKQRExX0qKh0VNp53gcl0%3D" alt="WeexJSBundleParseErrorAPM.png" loading="lazy"/></p>
<h5 data-id="heading-72">3. èµ„æºè¯·æ±‚æˆåŠŸï¼Œæ•°æ®æ— æ³•è§£æ</h5>
<p>è¿˜æœ‰ä¸€ç§ç‰¹æ®Šçš„æƒ…å†µå°±æ˜¯ï¼š<strong>ä¸‹è½½çš„ JSBundle äºŒè¿›åˆ¶æ•°æ®è™½éç©ºï¼Œä½†å› æ— æ³•ä»¥ UTF-8 ç¼–ç è§£ç ä¸ºå­—ç¬¦ä¸²ï¼Œå¯¼è‡´ Weex å®ä¾‹æ— æ³•åŠ è½½æ‰§è¡Œè¯¥æ•°æ®ï¼Œæœ€ç»ˆé¡µé¢ UI æ— æ³•æ­£å¸¸å±•ç¤º</strong>ã€‚æ¯”å¦‚ä¸‹é¢çš„æƒ…å†µï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e6fdbef3fa6549fea8ba93b5ab23f467~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5p2t5Z-O5bCP5YiY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767925474&amp;x-signature=QQ5sLB64xvhg92mNApfF6SljymI%3D" alt="WeexJSbundleEncodingError.png" loading="lazy"/></p>
<p>å’Œä¸Šé¢çš„æƒ…å†µç±»ä¼¼ï¼Œè¿™ç§éƒ½å±äºæ¦‚ç‡è¾ƒå°çš„é—®é¢˜ï¼Œä½†ä¹Ÿè¦ç›‘æ§å’Œé¢„é˜²ã€‚</p>
<p>ä¸€äº›å¯èƒ½çš„æƒ…å†µï¼š</p>
<ol>
<li>JSBundle æ–‡ä»¶ç¼–ç é UTF-8ã€‚ <strong>Weex è¦æ±‚ï¼šJS Bundle æ–‡ä»¶å¿…é¡»é‡‡ç”¨ UTF-8 ç¼–ç ï¼ˆæ—  BOMï¼‰ä»¥ä¿è¯è·¨å¹³å°å…¼å®¹æ€§ï¼Œé UTF-8 ç¼–ç ï¼ˆå¦‚ GBKã€UTF-16ï¼‰å¯èƒ½å¯¼è‡´ iOS/Android å¹³å°è§£æå¤±è´¥</strong></li>
<li>æ•°æ®æŸå/åŒ…å«éæ³• UTF-8 å­—èŠ‚</li>
</ol>
<ul>
<li>ä¸‹è½½æˆªæ–­ï¼šUTF-8 æ˜¯ã€Œå¤šå­—èŠ‚ç¼–ç ã€ï¼ˆæ¯”å¦‚ä¸­æ–‡å  3 å­—èŠ‚ï¼‰ï¼Œè‹¥ä¸‹è½½è¿‡ç¨‹ä¸­æ•°æ®æœ«å°¾çš„å­—ç¬¦å­—èŠ‚ä¸å®Œæ•´ï¼ˆå¦‚åªä¸‹äº† 2 å­—èŠ‚ï¼‰ï¼Œè§£ç æ—¶ä¼šå›  â€œå­—èŠ‚åºåˆ—ä¸åˆæ³•â€ å¤±è´¥ï¼›</li>
<li>æ•°æ®ç¯¡æ”¹ï¼šCDN / ç½‘å…³ / ä»£ç†åœ¨ä¼ è¾“ä¸­æ··å…¥é UTF-8 å­—èŠ‚ï¼ˆå¦‚ 0xFFã€0xFEã€0x00 ç­‰æ— æ•ˆå­—èŠ‚ï¼‰ï¼Œç ´åç¼–ç ç»“æ„ï¼›</li>
<li>æ–‡ä»¶æŸåï¼šJSBundle æ–‡ä»¶æ‰“åŒ… / ä¸Šä¼ æ—¶å‡ºé”™ï¼ˆå¦‚å‹ç¼©åæœªæ­£ç¡®è§£å‹ï¼‰ï¼ŒåŒ…å«ä¹±ç  / äºŒè¿›åˆ¶ç¢ç‰‡</li>
</ul>
<ol start="3">
<li>è¯·æ±‚åˆ°éæ–‡æœ¬æ•°æ®ï¼ˆURL é”™è¯¯ï¼‰ã€‚è¯·æ±‚çš„ JS Bundle è¿”å›çš„ä¸æ˜¯ JS æ–‡æœ¬ï¼Œè€Œæ˜¯äºŒè¿›åˆ¶ï¼š</li>
</ol>
<ul>
<li>URL é…ç½®é”™è¯¯ï¼šæŒ‡å‘å›¾ç‰‡ï¼ˆpng/jpgï¼‰ã€å‹ç¼©åŒ…ï¼ˆzipï¼‰ã€äºŒè¿›åˆ¶åè®®æ•°æ®ï¼ˆå¦‚ protobufï¼‰ã€å¯æ‰§è¡Œæ–‡ä»¶ç­‰</li>
<li>åç«¯æ¥å£é”™è¯¯ï¼šåŸæœ¬åº”è¿”å› JS æ–‡æœ¬çš„æ¥å£ï¼Œå¼‚å¸¸æ—¶è¿”å›äºŒè¿›åˆ¶æ ¼å¼çš„é”™è¯¯ä¿¡æ¯ï¼ˆè€Œéæ–‡æœ¬é”™è¯¯ï¼‰</li>
<li>ç¼“å­˜æ±¡æŸ“ï¼šWeex æœ¬åœ°ç¼“å­˜çš„ JSBundle è¢«å…¶ä»–äºŒè¿›åˆ¶æ–‡ä»¶è¦†ç›–ï¼ˆå¦‚ç¼“å­˜è·¯å¾„å†²çªï¼‰</li>
</ul>
<ol start="4">
<li>ç‰¹æ®Šå­—ç¬¦/ç¼–ç æº¢å‡º</li>
</ol>
<ul>
<li>JSBundle ä¸­åŒ…å« UTF-8 æ— æ³•è¡¨ç¤ºçš„ã€Œæ— æ•ˆ Unicode ç ç‚¹ã€ï¼ˆå¦‚è¶…å‡º U+10FFFF èŒƒå›´ï¼Œæˆ–ä¿ç•™çš„æœªå®šä¹‰ç ç‚¹ï¼‰</li>
<li>æ•°æ®é‡è¿‡å¤§ï¼šæå¤§å‹ JSBundle è§£ç æ—¶å› å†…å­˜ä¸è¶³ / ç³»ç»Ÿé™åˆ¶ï¼Œå¯¼è‡´è§£ç æ¥å£è¿”å› nilï¼ˆiOS ä¸­ NSString å¯¹å•å­—ç¬¦ä¸²é•¿åº¦æœ‰éšæ€§é™åˆ¶ï¼‰</li>
</ul>
<p>è¿™ç§æƒ…å†µï¼ŒWeex å®˜æ–¹æ˜¯æ€ä¹ˆåšçš„ï¼Ÿ</p>
<pre><code class="hljs language-Objective-C" lang="Objective-C">NSString *jsBundleString = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];
if (!jsBundleString) {
    WX_MONITOR_FAIL_ON_PAGE(WXMTJSDownload, WX_ERR_JSBUNDLE_STRING_CONVERT, @"data converting to string failed.", strongSelf.pageName)
    [strongSelf.apmInstance setProperty:KEY_PROPERTIES_ERROR_CODE withValue:[@(WX_ERR_JSBUNDLE_STRING_CONVERT) stringValue]];
    return;
}
</code></pre>
<p>å¯ä»¥çœ‹åˆ°ï¼Œè¿™ç§æƒ…å†µæ²¡æœ‰è¢« Weex æ²¡æœ‰è§†ä¸ºâ€œè‡´å‘½é—®é¢˜â€è¿›è¡Œä¸ŠæŠ¥ã€‚åªæ˜¯è¿›è¡Œäº†ç®€å•æ‰“å°ã€‚å°è¯•ç«™åœ¨æ¡†æ¶è§’åº¦æƒ³é—®é¢˜ï¼Œä» SDK Owner è§’åº¦å½’å› ï¼š</p>
<ul>
<li>HTTP çŠ¶æ€ç é”™è¯¯/æ— æ•°æ®ï¼šWeex è®¤ä¸ºè¿™ç±»é”™è¯¯æ˜¯ã€Œå¤–éƒ¨ä¸å¯æ§æ•…éšœã€ï¼ˆç½‘ç»œã€CDNã€æœåŠ¡ç«¯å®•æœºï¼‰ï¼Œä¼šå½±å“å¤§æ‰¹é‡å®ä¾‹ï¼Œå±äº â€œæ¡†æ¶çº§è‡´å‘½å¼‚å¸¸â€ï¼Œå¿…é¡»é€šè¿‡ WXExceptionUtils ä¸ŠæŠ¥ï¼ˆè§¦å‘å…¨å±€å¼‚å¸¸ç»Ÿè®¡ã€å‘Šè­¦ï¼‰</li>
<li>ç¼–ç è½¬æ¢å¤±è´¥ï¼šå¯èƒ½æ˜¯åˆ†æ‰¹å¤šæ¬¡æ‰“åŒ…ï¼Œå‰å‡ æ¬¡éƒ½æ˜¯ UTF-8 æ ¼å¼ï¼Œåªæ˜¯è¿™æ¬¡ç¼–ç é”™è¯¯ï¼Œæ˜¯å¯ä»¥å®šä½çš„ã€‚Weex è®¤ä¸ºè¿™ç±»é”™è¯¯æ˜¯ã€Œå†…éƒ¨å¯æ§é—®é¢˜ã€ï¼ˆå‰ç«¯æ‰“åŒ…æ—¶æœªæŒ‰ UTF-8 è§„èŒƒè¾“å‡ºã€URL é…ç½®é”™è¯¯æŒ‡å‘äºŒè¿›åˆ¶æ–‡ä»¶ï¼‰ï¼Œå±äº â€œä¸šåŠ¡ä¾§é”™è¯¯â€ï¼Œæ¡†æ¶åªéœ€è®°å½•ç›‘æ§ï¼ˆæé†’å¼€å‘è€…ä¿®å¤ï¼‰ï¼Œæ— éœ€å‡çº§ä¸º â€œæ¡†æ¶çº§è‡´å‘½å¼‚å¸¸â€ã€‚</li>
</ul>
<p>ä½†ä»ä¸šåŠ¡æ–¹è§’åº¦å‡ºå‘ï¼Œä¸å…‰é¡µé¢æ˜¯ Weexã€Nativeã€Flutterã€H5ï¼Œåªè¦æ˜¯å½±å“äº†ç”¨æˆ·ä½“éªŒï¼Œéƒ½å±äºè‡´å‘½é—®é¢˜ï¼Œå°¤å…¶è¿™ç§æ•´ä¸ªé¡µé¢éƒ½æ˜¯ç™½å±çš„æƒ…å†µã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦ä¿®æ”¹æºç ï¼Œå»ä¸ŠæŠ¥è‡´å‘½å¼‚å¸¸ã€‚è°ƒç”¨ <code>WXExceptionUtils commitCriticalExceptionRT</code> çš„èƒ½åŠ›ã€‚</p>
<p>æ•ˆæœå¦‚ä¸‹ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2154e2845b9049a0be6451bfb74e380e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5p2t5Z-O5bCP5YiY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767925474&amp;x-signature=3BwQrPAEiMiQArQhfy%2FCp2TsDg0%3D" alt="WeexJSBundleEncodingAPM.png" loading="lazy"/></p>
<h3 data-id="heading-73">4. é€»è¾‘å¼‚å¸¸</h3>
<h4 data-id="heading-74">1. JS ä¾§ require Module å¤±è´¥</h4>
<p>åœ¨ Native <code>[WXSDKEngine registerModule:@"logicCalculation" withClass:[WXLogicCalculationModule class]]</code> æ­£å¸¸æ³¨å†Œçš„ Moduleï¼Œåå­—å« <code>logicCalculation</code>ã€‚åœ¨ js ä¾§ä½¿ç”¨çš„æ—¶å€™ä¸å°å¿ƒå†™æˆ <code>const logicCalculation = weex.requireModule('logicCalculation1')</code>ï¼Œæµ‹è¯•åˆæ²¡å›å½’åˆ°ï¼Œé—®é¢˜é€ƒé€¸åˆ°çº¿ä¸Šï¼Œå¯èƒ½å°±æ˜¯é€»è¾‘é—®é¢˜ã€‚Weex å®˜æ–¹çš„åšæ³•å°±æ˜¯åœ¨ Xcode æ‰“å° logã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/23cb98cbb5e049c3acc196b1c116b623~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5p2t5Z-O5bCP5YiY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767925474&amp;x-signature=l7HXLokeuQyH909ZpVlNHoO1GiM%3D" alt="WeexModuleRequireError.png" loading="lazy"/></p>
<p>æ‰€ä»¥ä½œä¸º APM ä¾§ï¼Œæˆ‘ä»¬è¦å®šä½å’Œæ”¶é›†åˆ°è¯¥é—®é¢˜ï¼Œè¿›è¡Œé—®é¢˜ä¸ŠæŠ¥ã€‚</p>
<p>æƒ³åŠæ³•çŸ¥é“å“ªé‡ŒæŠ¥é”™ï¼ŒrequireModule ä¸æ˜¯åŸç”Ÿå†™æ³•ï¼Œè¿™è‚¯å®šæ˜¯ JS ä¾§å°è£…çš„ï¼ŒæŸ¥çœ‹ Weex æºç </p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f1c8b35c5beb4958b0d1c0af4513e905~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5p2t5Z-O5bCP5YiY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767925474&amp;x-signature=GNJIzZRV5ymObWuqAm1zU15ZEuM%3D" alt="WeexRequireModuleError.png" loading="lazy"/></p>
<pre><code class="hljs language-JS" lang="JS"><span class="hljs-comment">// Weex JS Framework æ ¸å¿ƒæºç ï¼ˆç®€åŒ–ï¼‰</span>
<span class="hljs-title class_">WeexInstance</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">requireModule</span> = <span class="hljs-keyword">function</span> <span class="hljs-title function_">requireModule</span>(<span class="hljs-params">moduleName</span>) {
  <span class="hljs-comment">// 1. åŸºç¡€æ ¡éªŒï¼šWeexå®ä¾‹æ˜¯å¦æœ‰æ•ˆï¼ˆæ¯”å¦‚æ˜¯å¦å·²é”€æ¯ï¼‰</span>
  <span class="hljs-keyword">var</span> id = <span class="hljs-title function_">getId</span>(<span class="hljs-variable language_">this</span>); <span class="hljs-comment">// è·å–å½“å‰Weexå®ä¾‹ID</span>
  <span class="hljs-keyword">if</span> (!(id &amp;&amp; <span class="hljs-variable language_">this</span>.<span class="hljs-property">document</span> &amp;&amp; <span class="hljs-variable language_">this</span>.<span class="hljs-property">document</span>.<span class="hljs-property">taskCenter</span>)) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"[JS Framework] Failed to requireModule(\""</span> + moduleName + <span class="hljs-string">"\"), instance doesn't exist."</span>);
    <span class="hljs-keyword">return</span>;
  }

  <span class="hljs-comment">// 2. å…³é”®æ ¡éªŒï¼šæ£€æŸ¥Moduleæ˜¯å¦åœ¨Nativeä¾§æ³¨å†Œè¿‡</span>
  <span class="hljs-keyword">if</span> (!<span class="hljs-title function_">isRegisteredModule</span>(moduleName)) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">"[JS Framework] using unregistered weex module \""</span> + moduleName + <span class="hljs-string">"\""</span>);
    <span class="hljs-keyword">return</span>;
  }

  <span class="hljs-comment">// 3. æ ¸å¿ƒï¼šåˆ›å»ºModuleä»£ç†å¯¹è±¡ï¼ˆå¹¶éçœŸå®å¯¹è±¡ï¼Œä»…å°è£…æ¡¥æ¥è°ƒç”¨ï¼‰</span>
  <span class="hljs-keyword">var</span> moduleProxy = {};
  <span class="hljs-comment">// è·å–è¯¥Moduleåœ¨Nativeä¾§æ³¨å†Œçš„æ‰€æœ‰æ–¹æ³•ï¼ˆæå‰ä»NativeåŒæ­¥åˆ°JSçš„æ–¹æ³•æ˜ å°„è¡¨ï¼‰</span>
  <span class="hljs-keyword">var</span> moduleMethods = <span class="hljs-title function_">getRegisteredMethods</span>(moduleName);
  
  <span class="hljs-comment">// 4. ä¸ºä»£ç†å¯¹è±¡ç»‘å®šæ–¹æ³•ï¼šè°ƒç”¨æ–¹æ³•æ—¶è§¦å‘JS-Nativeæ¡¥æ¥</span>
  moduleMethods.<span class="hljs-title function_">forEach</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">methodName</span>) {
    moduleProxy[methodName] = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
      <span class="hljs-comment">// å°è£…è°ƒç”¨å‚æ•°ï¼šå®ä¾‹IDã€Moduleåã€æ–¹æ³•åã€å‚æ•°ã€å›è°ƒ</span>
      <span class="hljs-keyword">var</span> args = <span class="hljs-title class_">Array</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">slice</span>.<span class="hljs-title function_">call</span>(<span class="hljs-variable language_">arguments</span>);
      <span class="hljs-keyword">var</span> callback = <span class="hljs-literal">null</span>;
      <span class="hljs-comment">// æå–æœ€åä¸€ä¸ªå‚æ•°ä½œä¸ºå›è°ƒï¼ˆWeexçº¦å®šï¼‰</span>
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> args[args.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>] === <span class="hljs-string">'function'</span>) {
        callback = args.<span class="hljs-title function_">pop</span>();
      }
      
      <span class="hljs-comment">// 5. æ ¸å¿ƒï¼šé€šè¿‡taskCenterï¼ˆæ¡¥æ¥æ ¸å¿ƒï¼‰è°ƒç”¨Native</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">document</span>.<span class="hljs-property">taskCenter</span>.<span class="hljs-title function_">sendNative</span>(<span class="hljs-string">'callNative'</span>, {
        <span class="hljs-attr">instanceId</span>: id,
        <span class="hljs-attr">module</span>: moduleName,
        <span class="hljs-attr">method</span>: methodName,
        <span class="hljs-attr">params</span>: args,
        <span class="hljs-attr">callback</span>: callback ? <span class="hljs-title function_">generateCallbackId</span>(callback) : <span class="hljs-literal">null</span>
      });
    }.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>);
  }, <span class="hljs-variable language_">this</span>);

  <span class="hljs-comment">// 6. è¿”å›ä»£ç†å¯¹è±¡ç»™JSä¾§ä½¿ç”¨</span>
  <span class="hljs-keyword">return</span> moduleProxy;
};
</code></pre>
<ul>
<li>è¿”å›çš„ä¸æ˜¯çœŸå®çš„ Module å®ä¾‹ï¼Œè€Œæ˜¯ä»£ç†å¯¹è±¡ï¼ˆProxyï¼‰ â€”â€” æ‰€æœ‰æ–¹æ³•è°ƒç”¨éƒ½ä¼šè¢«æ‹¦æˆªï¼Œè½¬è€Œé€šè¿‡æ¡¥æ¥å‘é€åˆ° Nativeï¼›</li>
<li>isRegisteredModule æ ¡éªŒï¼šJS ä¾§ä¼šç¼“å­˜ä¸€ä»½ã€ŒNative å·²æ³¨å†Œ Module åˆ—è¡¨ã€ï¼ˆNative åˆå§‹åŒ–æ—¶åŒæ­¥åˆ° JSï¼‰ï¼Œé¿å…æ— æ•ˆæ¡¥æ¥ã€‚</li>
</ul>
<p>æ–¹æ¡ˆä¸€ï¼šWeex ç”±äºå®‰å…¨è®¾è®¡ï¼Œæ²¡åŠæ³•ç›´æ¥æ³¨å…¥ JSã€‚ä¹Ÿå°±æ˜¯è¯´æƒ³é€šè¿‡â€œåˆ‡é¢â€æ€æƒ³ï¼Œhook JS ä¾§ requireModule æ˜¯è¡Œä¸é€šçš„ã€‚è¿™ç§æ–¹æ¡ˆï¼Œä»£ç å¦‚ä¸‹</p>
<pre><code class="hljs language-JS" lang="JS"><span class="hljs-comment">// å¤‡ä»½åŸç”ŸrequireModuleæ–¹æ³•</span>
<span class="hljs-keyword">const</span> originalRequireModule = <span class="hljs-title class_">WeexInstance</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">requireModule</span>;

<span class="hljs-comment">// é‡å†™requireModuleï¼Œåœ¨é”™è¯¯è§¦å‘æ—¶ä¸»åŠ¨ä¸ŠæŠ¥Native</span>
<span class="hljs-title class_">WeexInstance</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">requireModule</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">moduleName</span>) {
  <span class="hljs-comment">// å…ˆæ‰§è¡ŒåŸç”Ÿåˆ¤æ–­é€»è¾‘</span>
  <span class="hljs-keyword">const</span> id = <span class="hljs-title function_">getId</span>(<span class="hljs-variable language_">this</span>);
  <span class="hljs-keyword">if</span> (!(id &amp;&amp; <span class="hljs-variable language_">this</span>.<span class="hljs-property">document</span> &amp;&amp; <span class="hljs-variable language_">this</span>.<span class="hljs-property">document</span>.<span class="hljs-property">taskCenter</span>)) {
    <span class="hljs-keyword">const</span> errorMsg = <span class="hljs-string">"[JS Framework] Failed to requireModule(\""</span> + moduleName + <span class="hljs-string">"\"), instance ("</span> + id + <span class="hljs-string">") doesn't exist anymore."</span>;
    <span class="hljs-comment">// ä¸»åŠ¨ä¸ŠæŠ¥â€œå®ä¾‹ä¸å­˜åœ¨â€é”™è¯¯åˆ°Native</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">document</span>.<span class="hljs-property">taskCenter</span>.<span class="hljs-title function_">sendNative</span>(<span class="hljs-string">'__weex_apm_report'</span>, {
      <span class="hljs-attr">type</span>: <span class="hljs-string">'module_require_failed'</span>,
      <span class="hljs-attr">subType</span>: <span class="hljs-string">'instance_not_exist'</span>,
      <span class="hljs-attr">moduleName</span>: moduleName,
      <span class="hljs-attr">message</span>: errorMsg,
      <span class="hljs-attr">instanceId</span>: id
    });
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(errorMsg);
    <span class="hljs-keyword">return</span>;
  }

  <span class="hljs-comment">// æ ¸å¿ƒï¼šæ‹¦æˆªâ€œæœªæ³¨å†ŒModuleâ€åˆ¤æ–­</span>
  <span class="hljs-keyword">if</span> (!<span class="hljs-title function_">isRegisteredModule</span>(moduleName)) {
    <span class="hljs-keyword">const</span> warnMsg = <span class="hljs-string">"[JS Framework] using unregistered weex module \""</span> + moduleName + <span class="hljs-string">"\""</span>;
    <span class="hljs-comment">// ä¸»åŠ¨ä¸ŠæŠ¥â€œModuleæœªæ³¨å†Œâ€é”™è¯¯åˆ°Nativeï¼ˆå…³é”®ï¼‰</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">document</span>.<span class="hljs-property">taskCenter</span>.<span class="hljs-title function_">sendNative</span>(<span class="hljs-string">'__weex_apm_report'</span>, {
      <span class="hljs-attr">type</span>: <span class="hljs-string">'module_not_registered'</span>,
      <span class="hljs-attr">moduleName</span>: moduleName,
      <span class="hljs-attr">message</span>: warnMsg,
      <span class="hljs-attr">instanceId</span>: id,
      <span class="hljs-attr">timestamp</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>()
    });
    <span class="hljs-comment">// ä¿ç•™åŸç”Ÿwarnæ—¥å¿—ï¼ˆä¸å½±å“åŸæœ‰é€»è¾‘ï¼‰</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(warnMsg);
    <span class="hljs-keyword">return</span>;
  }

  <span class="hljs-comment">// æ‰§è¡ŒåŸç”Ÿé€»è¾‘</span>
  <span class="hljs-keyword">return</span> originalRequireModule.<span class="hljs-title function_">call</span>(<span class="hljs-variable language_">this</span>, moduleName);
};
</code></pre>
<p>æ–¹æ¡ˆäºŒï¼šNative ä¾§æ‹¦æˆª JS çš„ console.warn è°ƒç”¨ï¼ˆæ—  JS ä¾µå…¥ï¼‰</p>
<p>å†™æ³•1ï¼šWeex JS ä¾§çš„ <code>console.warn</code> æœ€ç»ˆä¼šé€šè¿‡ WXBridgeContext çš„ <code>handleJSLog</code> æ–¹æ³•ä¼ é€’åˆ° Nativeï¼Œæ— éœ€è§£ææœ€ç»ˆæ—¥å¿—ï¼Œç›´æ¥ Hook è¯¥æ–¹æ³•æ‹¦æˆª warn ä¿¡æ¯ï¼Œç²¾å‡†åŒ¹é… Module æœªæ³¨å†Œé”™è¯¯</p>
<pre><code class="hljs language-Objective-C" lang="Objective-C">#import &lt;objc/runtime.h&gt;

@implementation NSObject (WXJSLogHook)
+ (void)load {
    static dispatch_once_t onceToken;
    dispatch_once(&amp;onceToken, ^{
        // è·å–WXBridgeContextç±»ï¼ˆæ— éœ€å¤´æ–‡ä»¶ï¼‰
        Class bridgeContextClass = NSClassFromString(@"WXBridgeContext");
        if (!bridgeContextClass) return;
        
        // Hookå¤„ç†JSæ—¥å¿—çš„æ ¸å¿ƒæ–¹æ³•ï¼šhandleJSLog:
        SEL handleJSLogSel = NSSelectorFromString(@"handleJSLog:");
        Method originalMethod = class_getInstanceMethod(bridgeContextClass, handleJSLogSel);
        if (!originalMethod) return;
        
        SEL swizzledSel = NSSelectorFromString(@"weex_apm_handleJSLog:");
        Method swizzledMethod = class_getInstanceMethod(self, swizzledSel);
        class_addMethod(bridgeContextClass, swizzledSel, method_getImplementation(swizzledMethod), method_getTypeEncoding(swizzledMethod));
        method_exchangeImplementations(originalMethod, swizzledMethod);
    });
}

// Hookåçš„handleJSLogæ–¹æ³•ï¼šæ‹¦æˆªJSä¾§çš„warnæ—¥å¿—
- (void)weex_apm_handleJSLog:(NSDictionary *)logInfo {
    // 1. å…ˆæ‰§è¡ŒåŸæ–¹æ³•ï¼Œä¿ç•™åŸæœ‰æ—¥å¿—è¾“å‡ºé€»è¾‘
    [self weex_apm_handleJSLog:logInfo];
    
    // 2. è§£æJSæ—¥å¿—ä¿¡æ¯ï¼ˆlogInfoæ ¼å¼ï¼š{level: 'warn', msg: 'xxx', ...}ï¼‰
    NSString *logLevel = logInfo[@"level"];
    NSString *logMsg = logInfo[@"msg"];
    
    // 3. ç²¾å‡†åŒ¹é…â€œæœªæ³¨å†ŒModuleâ€çš„warn
    if ([logLevel isEqualToString:@"warn"] &amp;&amp; [logMsg containsString:@"using unregistered weex module"]) {
        // æå–Moduleåç§°
        NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"using unregistered weex module \"(.*?)\"" options:0 error:nil];
        NSTextCheckingResult *match = [regex firstMatchInString:logMsg options:0 range:NSMakeRange(0, logMsg.length)];
        NSString *moduleName = match ? [logMsg substringWithRange:match.rangeAtIndex(1)] : @"";
        
        // 4. æ„é€ APMæ•°æ®ä¸ŠæŠ¥
        NSDictionary *apmData = @{
            @"error_type": @"weex_module_not_registered",
            @"module_name": moduleName,
            @"message": logMsg,
            @"source": @"js_console_warn", // æ ‡è®°æ¥æºï¼šJS console.warn
            @"timestamp": @([[NSDate date] timeIntervalSince1970] * 1000)
        };
        
        // è°ƒç”¨ APM SDK æ¥å£ï¼Œæ•°æ®å…ˆè½åº“ï¼Œåç»­ç»Ÿä¸€æŒ‰ç…§æ•°æ®ä¸ŠæŠ¥ç­–ç•¥ï¼Œä»æœ¬åœ° DB æå–ã€èšåˆã€ä¸ŠæŠ¥
        // [YourAPMManager reportWeexError:apmData];
    }
}
@end
</code></pre>
<p>æ ¸å¿ƒä¼˜åŠ¿</p>
<ul>
<li>æ— ä¾µå…¥ï¼šæ— éœ€ä¿®æ”¹ / æ³¨å…¥ JS ä»£ç ï¼Œçº¯ Native ä¾§å®ç°ï¼›</li>
<li>ç²¾å‡†ï¼šæ‹¦æˆªçš„æ˜¯ JS ä¾§ä¼ é€’åˆ° Native çš„åŸå§‹æ—¥å¿—æ•°æ®ï¼ˆè€Œéæœ€ç»ˆæ‰“å°çš„å­—ç¬¦ä¸²ï¼‰ï¼Œæ— æ ¼å¼è¯¯å·®ï¼›</li>
<li>è¦†ç›–å…¨ï¼šæ‰€æœ‰ JS ä¾§çš„console.warnéƒ½ä¼šç»è¿‡æ­¤æ–¹æ³•ï¼Œ100% è¦†ç›– Module æœªæ³¨å†Œåœºæ™¯</li>
</ul>
<p>å†™æ³•äºŒï¼šç”±äº Weex ä»£ç æ˜¯å¤§é‡çš„å­˜é‡ä¸šåŠ¡ä»£ç ï¼Œå¾ˆç¨³å®šã€‚è€Œä¸” Weex å®˜æ–¹å¥½å‡ å¹´ä¸æ›´æ–°ï¼Œæ‰€ä»¥æˆ‘ä»¬å†…éƒ¨ç§æœ‰åŒ– Weex SDKï¼Œä¹Ÿå°±æ²¡æœ‰é‡‡å– Hook æ‰‹æ®µã€‚è€Œæ˜¯ç›´æ¥ä¿®æ”¹æºç ï¼Œ<code>WXBridgeContext.m</code> çš„ <code>+ (void)handleConsoleOutputWithArgument:(NSArray *)arguments logLevel:(WXLogFlag)logLevel</code> æ–¹æ³•ã€‚æ¯”å¦‚ï¼š</p>
<pre><code class="hljs language-Objective-C" lang="Objective-C">+ (void)handleConsoleOutputWithArgument:(NSArray *)arguments logLevel:(WXLogFlag)logLevel
{
    NSMutableString *string = [NSMutableString string];
    [string appendString:@"jsLog: "];
    [arguments enumerateObjectsUsingBlock:^(JSValue *jsVal, NSUInteger idx, BOOL *stop) {
        [string appendFormat:@"%@ ", jsVal];
        if (idx == arguments.count - 1) {
            if (logLevel) {
                if (WXLogFlagWarning == logLevel || WXLogFlagError == logLevel) {
                    if ([string containsString:@"using unregistered weex module"]) {
                        // æå–Moduleåç§°
                        NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"using unregistered weex module \"(.*?)\"" options:0 error:nil];
                        NSTextCheckingResult *match = [regex firstMatchInString:string options:0 range:NSMakeRange(0, string.length)];
                        NSString *moduleName = match ? [string substringWithRange:[match rangeAtIndex:1]] : @"";
                        
                        // æ¥å…¥æ”¶å£å·¥å…·ç±»
                        NSString *exceptionMsg = [NSString stringWithFormat:@"JS requireæœªæ³¨å†Œæ¨¡å—ï¼š%@ï¼ŒåŸå§‹æ—¥å¿—ï¼š%@", moduleName, string];
                        NSDictionary *customExt = @{@"moduleName": moduleName};
                        NSString *instanceId = [WXSDKEngine topInstance].instanceId ?: @"";
                        NSString *bundleUrl = [WXSDKEngine topInstance].scriptURL.absoluteString ?: @"";
                        [[WXExceptionReporter sharedInstance] reportExceptionWithCode:WXCustomExceptionCode_Module_NotRegistered
                                                                        exceptionType:WXCustomExceptionType_Module
                                                                            instanceId:instanceId
                                                                             function:@"handleConsoleOutputWithArgument:logLevel:"
                                                                         exceptionMsg:exceptionMsg
                                                                            bundleUrl:bundleUrl
                                                                         customExtParams:customExt];
                    }
                    
                    id&lt;WXAppMonitorProtocol&gt; appMonitorHandler = [WXSDKEngine handlerForProtocol:@protocol(WXAppMonitorProtocol)];
                    if ([appMonitorHandler respondsToSelector:@selector(commitAppMonitorAlarm:monitorPoint:success:errorCode:errorMsg:arg:)]) {
                        [appMonitorHandler commitAppMonitorAlarm:@"weex" monitorPoint:@"jswarning" success:NO errorCode:@"99999" errorMsg:string arg:[WXSDKEngine topInstance].pageName];
                    }
                }
                WX_LOG(logLevel, @"%@", string);
            } else {
                [string appendFormat:@"%@ ", jsVal];
                WXLogInfo(@"%@", string);
            }
        }
    }];
}
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/feaa4cd760594fb0bf97f43cff8d8778~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5p2t5Z-O5bCP5YiY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767925474&amp;x-signature=CzPMJNi1rHB2uiQkqsrjsWjl49M%3D" alt="WeexRequireModuleErrorAPM.png" loading="lazy"/></p>
<h4 data-id="heading-75">2. JS è°ƒç”¨ Moudle æ–¹æ³•å¤±è´¥</h4>
<p>Native æ³¨å†Œäº†ä¸€ä¸ªè´Ÿè´£é€»è¾‘çš„ Moduleï¼Œä½†æ˜¯åœ¨ JS ä¾§ä½¿ç”¨çš„æ—¶å€™ï¼Œè¦ä¹ˆæ–¹æ³•åå†™é”™äº†ï¼Œè¦ä¹ˆå‚æ•°å°‘ä¼ äº†ï¼Œéƒ½å¯èƒ½å¯¼è‡´é¢„æœŸçš„é€»è¾‘æ‰§è¡Œé”™è¯¯ï¼Œå‘ç”Ÿä¸ç¬¦åˆé¢„æœŸçš„è¡Œä¸ºã€‚</p>
<h5 data-id="heading-76">1. ç‚¹å‡»äº‹ä»¶å·¥ä½œåŸç†</h5>
<p>æ ¸å¿ƒé—®é¢˜ï¼šç‚¹å‡»äº‹ä»¶å‘ç”Ÿæ—¶ï¼Œå¦‚ä½•æ ¹æ® Component çš„ç‚¹å‡»äº‹ä»¶å®šä½åˆ°è¯¥ Component åœ¨ Vue DSL ä¸­å£°æ˜çš„äº‹ä»¶ï¼Ÿ</p>
<p>ç¬¬ä¸€æ­¥ï¼šé¡µé¢åˆå§‹åŒ–æ—¶ï¼ŒJS ä¾§æ„å»º<strong>äº‹ä»¶æ˜ å°„è¡¨</strong>ã€‚
Weex é¡µé¢æ¸²æŸ“æ—¶ï¼Œä¼šä¸ºæ¯ä¸ªç»„ä»¶åš2ä»¶äº‹æƒ…ï¼š</p>
<ul>
<li>ç”Ÿæˆç»„ä»¶å”¯ä¸€æ ‡è¯†ï¼šæ¯ä¸ªç»„ä»¶éƒ½æœ‰ <code>ref/componentId/docId</code>ï¼Œç±»ä¼¼ç»„ä»¶èº«ä»½è¯</li>
<li>ç»‘å®šäº‹ä»¶ä¸æ–¹æ³•ï¼šè§£æ <code>@click="handleButtonClick"</code> æ—¶ï¼ŒJS ä¼šå°†ã€Œç»„ä»¶ ID + äº‹ä»¶ç±»å‹ï¼ˆclickï¼‰ã€ä½œä¸º keyï¼Œ<code>handleButtonClick</code> ä½œä¸º valueï¼Œä¸€èµ·å­˜è¿›ç»„ä»¶å®ä¾‹çš„æ˜ å°„è¡¨é‡Œï¼Œï¼ˆå¯¹åº”ä¸‹é¢çš„ <code>this.event[type]</code>ï¼‰</li>
</ul>
<p>ç¬¬äºŒæ­¥ï¼šNative ä¾§æ•è·ç‚¹å‡»ï¼Œæºå¸¦å…³é”®ä¿¡æ¯è°ƒç”¨ fireEventã€‚
Native ä¾§èƒ½æ‹¿åˆ° componentIdï¼Œæ˜¯å› ä¸ºæ¸²æŸ“ç»„ä»¶æ—¶ï¼ŒJS ä¾§ä¼šæŠŠç»„ä»¶ ID åŒæ­¥ç»™ Native æ¸²æŸ“å¼•æ“ï¼ˆWXComponentï¼‰ï¼ŒNative æ§ä»¶å’Œ JS ç»„ä»¶å®ä¾‹é€šè¿‡ ID ä¸€ä¸€ç»‘å®š</p>
<p>ç¬¬ä¸‰æ­¥ï¼šJS ä¾§è°ƒç”¨ <code>fireEvent</code> æ–¹æ³•ï¼Œå…¶å†…éƒ¨é€šè¿‡ <code>ID + äº‹ä»¶ç±»å‹</code> æ‰¾æ–¹æ³•ã€‚</p>
<ul>
<li>å®šä½ç»„ä»¶å®ä¾‹ï¼šJS é€šè¿‡ componentIDï¼ˆä»£ç é‡Œçš„ this.refï¼‰æ‰¾åˆ°ç»„ä»¶å®ä¾‹ã€‚</li>
<li>æŸ¥æ‰¾äº‹ä»¶æ˜ å°„ï¼šä»ç»„ä»¶å®ä¾‹çš„ <code>this.event</code> é‡Œæ ¹æ® type ï¼ˆå¦‚ clickï¼‰æ‰¾åˆ°å…·ä½“çš„ eventDescï¼ˆåŒ…å«å…·ä½“çš„ handlerï¼‰</li>
<li>å‘èµ·è°ƒç”¨ <code>handler.call</code></li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">/**
   * Fire an event manually.
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} type type
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">function</span>} event handler
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">boolean</span>} isBubble whether or not event bubble
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">boolean</span>} <span class="hljs-variable">options</span>
   * <span class="hljs-doctag">@return</span> {<span class="hljs-type"/>} anything returned by handler function
   */</span>
  <span class="hljs-title class_">Element</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">fireEvent</span> = <span class="hljs-keyword">function</span> <span class="hljs-title function_">fireEvent</span> (type, event, isBubble, options) {
    <span class="hljs-keyword">var</span> result = <span class="hljs-literal">null</span>;
    <span class="hljs-keyword">var</span> isStopPropagation = <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">var</span> eventDesc = <span class="hljs-variable language_">this</span>.<span class="hljs-property">event</span>[type];
    <span class="hljs-keyword">if</span> (eventDesc &amp;&amp; event) {
      <span class="hljs-keyword">var</span> handler = eventDesc.<span class="hljs-property">handler</span>;
      event.<span class="hljs-property">stopPropagation</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
        isStopPropagation = <span class="hljs-literal">true</span>;
      };
      <span class="hljs-keyword">if</span> (options &amp;&amp; options.<span class="hljs-property">params</span>) {
        result = handler.<span class="hljs-property">call</span>.<span class="hljs-title function_">apply</span>(handler, [ <span class="hljs-variable language_">this</span> ].<span class="hljs-title function_">concat</span>( options.<span class="hljs-property">params</span>, [event] ));
      }
      <span class="hljs-keyword">else</span> {
        result = handler.<span class="hljs-title function_">call</span>(<span class="hljs-variable language_">this</span>, event);
      }
    }

    <span class="hljs-keyword">if</span> (!isStopPropagation
      &amp;&amp; isBubble
      &amp;&amp; (<span class="hljs-variable constant_">BUBBLE_EVENTS</span>.<span class="hljs-title function_">indexOf</span>(type) !== -<span class="hljs-number">1</span>)
      &amp;&amp; <span class="hljs-variable language_">this</span>.<span class="hljs-property">parentNode</span>
      &amp;&amp; <span class="hljs-variable language_">this</span>.<span class="hljs-property">parentNode</span>.<span class="hljs-property">fireEvent</span>) {
      event.<span class="hljs-property">currentTarget</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">parentNode</span>;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">parentNode</span>.<span class="hljs-title function_">fireEvent</span>(type, event, isBubble); <span class="hljs-comment">// no options</span>
    }

    <span class="hljs-keyword">return</span> result
  };
</code></pre>
<h5 data-id="heading-77">2. JS è°ƒç”¨ module æ–¹æ³•ï¼Œæ–¹æ³•åé”™è¯¯</h5>
<p>Native æ³¨å†Œçš„ Module æ–¹æ³•åä¸º <code>multiply:num2:callback:</code>ï¼Œè€Œåœ¨ JS ä¾§è°ƒç”¨çš„æ—¶å€™æ–¹æ³•åå¤šåŠ äº†å‡ ä¸ªå­—ç¬¦ï¼Œé€ æˆæ–¹æ³•åå¯¹ä¸ä¸Šï¼Œæ–¹æ³•è°ƒç”¨å¤±è´¥çš„é—®é¢˜ã€‚</p>
<p>ç”¨æˆ·ç‚¹å‡»å±å¹•ä¸Šçš„ UI æ§ä»¶ï¼ˆæ­¤å¤„å°±æ˜¯æ³¨å†Œ Component <code>[WXSDKEngine registerComponent:@"color-button" withClass:[WXColorButtonComponent class]]</code>)ã€‚</p>
<p>Weex ç»Ÿä¸€ç»™ Comonent æ·»åŠ äº†åˆ†ç±»æ¥è´Ÿè´£äº‹ä»¶çš„å¤„ç†ã€‚<code>WXComponent+Events</code>ã€‚æºç ä¸­ <code>addClickEvent</code> å°±æ˜¯æ·»åŠ äº†ç‚¹å‡»äº‹ä»¶çš„ç›‘å¬ã€‚å½“å‘ç”Ÿç‚¹å‡»åä¼šè®¡ç®—ç‚¹å‡»äº‹ä»¶çš„åæ ‡å’Œæ—¶é—´æˆ³ä¿¡æ¯ï¼Œæœ€åå°è£…ä¸€ä¸ª <code>WXCallJSMethod</code> å¯¹è±¡ï¼Œæ–¹æ³•åå›ºå®šä¸º <code>fireEvent</code>ã€‚å¦‚ä¸‹å †æ ˆæ‰€ç¤ºï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4aa523b5d1a047e690cd3e0d5e178dbd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5p2t5Z-O5bCP5YiY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767925474&amp;x-signature=WvFysSIJKSbgGF6gOWhsRXSiMLk%3D" alt="WeexComponentClickLogic.png" loading="lazy"/></p>
<p>ç”±äº <code>logicCalculation</code> æ²¡æœ‰å¯¹åº”çš„ <code>multiplyWith</code> æ–¹æ³•ï¼Œæ‰€ä»¥ä¼šæŠ¥é”™ï¼Œè¢« JS çš„ <code>try...catch...</code> æ•è·åï¼Œé€šè¿‡ <code>console.error</code> çš„æ–¹å¼è¾“å‡ºå¼‚å¸¸ä¿¡æ¯ã€‚ä½†æ˜¯ <code>console.error</code> è¢« Native æ¥ç®¡äº†ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥åœ¨ Native æ¥ç®¡çš„åœ°æ–¹ç»Ÿä¸€æ‹¦æˆªå¤„ç†ã€‚åªè¦æ—¥å¿—åŒ…å« <code>Failed to invoke the event handler</code> å°±å¯ä»¥è®¤ä¸ºæ˜¯å› ä¸ºæ–¹æ³•åé—®é¢˜ï¼Œå¯¼è‡´è°ƒç”¨æ–¹æ³•å‡ºé”™</p>
<p>ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-Objective-c" lang="Objective-c">+ (void)handleConsoleOutputWithArgument:(NSArray *)arguments logLevel:(WXLogFlag)logLevel
{
    // ...
    if ([string containsString:@"Failed to invoke the event handler"]) {
        // åŸæœ‰è§£æé€»è¾‘ä¿ç•™
                        NSString *errorMethodName = @"";
                        NSString *eventType = @"";
                        NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"'\\.\\.\\.(?:logicCalculation\\.)([a-zA-Z0-9_]+)\\.\\.\\." options:0 error:nil];
                        NSTextCheckingResult *match = [regex firstMatchInString:string options:0 range:NSMakeRange(0, string.length)];
                        if (match) {
                            errorMethodName = [string substringWithRange:[match rangeAtIndex:1]];
                        }
                        NSRegularExpression *eventRegex = [NSRegularExpression regularExpressionWithPattern:@"event handler of \"([^\"]+)\"" options:0 error:nil];
                        NSTextCheckingResult *eventMatch = [eventRegex firstMatchInString:string options:0 range:NSMakeRange(0, string.length)];
                        if (eventMatch) {
                            eventType = [string substringWithRange:[eventMatch rangeAtIndex:1]];
                        }
                        
                        // æ¥å…¥æ”¶å£å·¥å…·ç±»
                        NSString *exceptionMsg = [NSString stringWithFormat:@"Moduleæ–¹æ³•åé”™è¯¯ï¼š%@ï¼Œäº‹ä»¶ç±»å‹ï¼š%@ï¼ŒåŸå§‹æ—¥å¿—ï¼š%@", errorMethodName, eventType, string];
                        NSDictionary *customExt = @{
                            @"moduleName": @"logicCalculation",
                            @"methodName": errorMethodName,
                            @"eventType": eventType
                        };
                        NSString *instanceId = [WXSDKEngine topInstance].instanceId ?: @"";
                        NSString *bundleUrl = [WXSDKEngine topInstance].scriptURL.absoluteString ?: @"";
                        [[WXExceptionReporter sharedInstance] reportExceptionWithCode:WXCustomExceptionCode_Module_MethodNotFound
                                                                         exceptionType:WXCustomExceptionType_Module
                                                                            instanceId:instanceId
                                                                              function:@"handleConsoleOutputWithArgument:logLevel:"
                                                                         exceptionMsg:exceptionMsg
                                                                             bundleUrl:bundleUrl
                                                                         customExtParams:customExt];
    }
    // ...
}
</code></pre>
<p>æ•ˆæœå¦‚ä¸‹</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/caecf4541d1646cfadc4fb59dd7abf93~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5p2t5Z-O5bCP5YiY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767925474&amp;x-signature=MZypkqirSmTiJApbXBRu7j6mUvM%3D" alt="WeexCallModuleMethodNameMismatch.png" loading="lazy"/></p>
<h5 data-id="heading-78">3. JS è°ƒç”¨ module æ–¹æ³•ï¼Œæ–¹æ³•å‚æ•°ä¸ªæ•°ä¸åŒ¹é…</h5>
<p>ä¸Šé¢å·²ç»è®²äº†ç‚¹å‡»äº‹ä»¶çš„å·¥ä½œæµç¨‹ï¼Œè°ƒç”¨æ–¹æ³•æ—¶ï¼Œé™¤äº†è°ƒç”¨äº†ä¸å­˜åœ¨çš„æ–¹æ³•æˆ–è€…æ–¹æ³•åå†™é”™äº†ï¼Œè¿˜æœ‰ä¸€ç§æƒ…å†µå°±æ˜¯å‚æ•°ä¸ªæ•°ä¸åŒ¹é…ã€‚</p>
<p>è¿™ç§æƒ…å†µå¦‚ä½•è¯†åˆ«å¹¶ç›‘æ§ï¼Ÿ
JS çš„äº‹ä»¶å¤„ç†å‡½æ•°é‡Œï¼Œè°ƒç”¨æ³¨å†Œçš„ Module å’Œå¯¹åº”çš„æ–¹æ³•ï¼Œä¼šç»Ÿä¸€èµ°åˆ° <code>WXJSCoreBridge.mm</code> çš„ <code>- (void)registerCallNativeModule:(WXJSCallNativeModule)callNativeModuleBlock</code> ç»™å½“å‰çš„ JSContext æ³¨å†Œå¥½çš„ <code>callNativeModule</code> å›è°ƒé‡Œã€‚<code>_jsContext[@"callNativeModule"] = ^JSValue *(JSValue *instanceId, JSValue *moduleName, JSValue *methodName, JSValue *args, JSValue *options)</code> å¯ä»¥æ‹¿åˆ°æ¨¡å—åã€æ–¹æ³•åã€å‚æ•°ä¸ªæ•°ã€instanceID ç­‰ã€‚æ‹¿åˆ°å®é™…ä¼ é€’çš„æ–¹æ³•å‚æ•°åˆ—è¡¨ï¼Œå†é€šè¿‡æ¨¡å—åæ ¹æ® <code>ModuleFactory</code> æ‰¾åˆ°æ¨¡å—ç±»å¯¹è±¡ï¼Œç„¶ååˆ©ç”¨ runtime èƒ½åŠ›ï¼Œéå†ç±»å¯¹è±¡çš„æ–¹æ³•åˆ—è¡¨ï¼Œæ‰¾åˆ°å¯¹åº”çš„ SELï¼Œåˆ¤æ–­å…¶é¢„æœŸçš„æ–¹æ³•å‚æ•°ä¸ªæ•°ï¼Œç„¶åå†å’Œå®é™…ä¼ é€’è¿‡æ¥çš„æ–¹æ³•å‚æ•°ä¸ªæ•°åšæ¯”è¾ƒå³å¯</p>
<pre><code class="hljs language-Objective-c" lang="Objective-c">- (void)registerCallNativeModule:(WXJSCallNativeModule)callNativeModuleBlock
{
    // JS è°ƒç”¨ Native çš„æ–¹æ³•éƒ½ä¼šèµ°è¿™é‡Œã€‚å¯ä»¥è§£æåˆ°ï¼šæ¨¡å—åã€æ–¹æ³•åã€å‚æ•°æ•°ç»„ç­‰ä¿¡æ¯ã€‚å¯ä»¥åœ¨è¿™é‡Œåˆ¤æ–­æ–¹æ³•å‚æ•°ä¸ªæ•°æ˜¯å¦ç›¸åŒã€‚
    _jsContext[@"callNativeModule"] = ^JSValue *(JSValue *instanceId, JSValue *moduleName, JSValue *methodName, JSValue *args, JSValue *options) {
        // ...
    };
}
</code></pre>
<p>åœ¨å…¶ <code>callNativeModule</code> çš„ block é‡Œï¼Œå¢åŠ ä¸€ä¸ªæ–¹æ³•ï¼Œä¸“é—¨ç”¨æ¥åˆ¤æ–­å’Œæ£€æŸ¥æ–¹æ³•å‚æ•°ä¸ªæ•°æ˜¯å¦åŒ¹é…çš„é—®é¢˜</p>
<pre><code class="hljs language-Objective-C" lang="Objective-C">// è¾…åŠ©æ–¹æ³•ï¼šæ ¡éªŒModuleæ–¹æ³•å‚æ•°ä¸ªæ•°
- (void)checkModuleParamCount:(NSString *)moduleName
                   methodName:(NSString *)methodName
                 actualParams:(NSArray *)actualParams
                   instanceId:(NSString *)instanceId {
    // 1. è·³è¿‡ç©ºå€¼/ç³»ç»Ÿæ¨¡å—ï¼ˆé¿å…æ— æ„ä¹‰æ ¡éªŒï¼‰
    if (!moduleName || !methodName || actualParams.count &lt; 0) return;
    Class moduleClass = [WXModuleFactory classWithModuleName:moduleName];
    if (!moduleClass) return;

    // 2. æ‹¼æ¥å®Œæ•´çš„æ–¹æ³•é€‰æ‹©å™¨ï¼ˆWeex Moduleæ–¹æ³•åå¸¦å†’å·ï¼Œéœ€è¡¥å…¨ï¼Œå¦‚multiplyâ†’multiply:num2:callback:ï¼‰
    // æ³¨ï¼šè‹¥æ–¹æ³•åè§„åˆ™å›ºå®šï¼Œå¯é€šè¿‡æ¨¡å—ç±»çš„æ–¹æ³•åˆ—è¡¨è·å–æ‰€æœ‰selectorï¼ŒåŒ¹é…å‰ç¼€
    SEL targetSel = nil;
    unsigned int methodCount = 0;
    Method *methods = class_copyMethodList(moduleClass, &amp;methodCount);
    for (int i = 0; i &lt; methodCount; i++) {
        Method method = methods[i];
        SEL sel = method_getName(method);
        NSString *selStr = NSStringFromSelector(sel);
        // åŒ¹é…å‰ç¼€ï¼ˆå¦‚multiplyå¼€å¤´çš„æ–¹æ³•ï¼‰
        if ([selStr hasPrefix:methodName]) {
            targetSel = sel;
            break;
        }
    }
    free(methods);
    if (!targetSel) return;

    // 3. è§£ææ–¹æ³•ç­¾åï¼Œè®¡ç®—é¢„æœŸå‚æ•°ä¸ªæ•°ï¼ˆå‡self/_cmdï¼‰
    NSMethodSignature *methodSig = [moduleClass instanceMethodSignatureForSelector:targetSel];
    NSInteger weexParamCount = methodSig.numberOfArguments - 2;

    // 4. åˆ¤æ–­å‚æ•°ä¸ªæ•°æ˜¯å¦ä¸åŒ¹é…
    if (actualParams.count != weexParamCount) {
        // æ„é€ é”™è¯¯ä¿¡æ¯
        NSString *errorMsg = [NSString stringWithFormat:@"Module:%@ æ–¹æ³•:%@ å‚æ•°ä¸ªæ•°ä¸åŒ¹é…ï¼Œé¢„æœŸ%ldä¸ªï¼Œå®é™…%ldä¸ª",
                              moduleName, methodName, weexParamCount, actualParams.count];
        WXLogError(@"[WeexParamError] %@", errorMsg);

        // 5. ä¸ŠæŠ¥APMï¼ˆæ ¸å¿ƒï¼šç”Ÿäº§ç¯å¢ƒç›‘æ§ï¼‰
        NSDictionary *apmData = @{
            @"error_type": @"weex_module_param_count_mismatch",
            @"module_name": moduleName,
            @"method_name": methodName,
            @"expected_count": @(weexParamCount),
            @"actual_count": @(actualParams.count),
            @"actual_params": actualParams,
            @"instance_id": instanceId ?: @"",
            @"timestamp": @([[NSDate date] timeIntervalSince1970] * 1000),
            @"message": errorMsg
        };

        // APM:å¼‚æ­¥ä¸ŠæŠ¥ï¼Œé¿å…é˜»å¡JSæ¡¥æ¥
        NSLog(@"APM æ•°æ®ä¸ŠæŠ¥é€šé“ï¼Œã€JS é€šè¿‡ Module è°ƒç”¨ Native æ–¹æ³•ï¼Œå‚æ•°ä¸ªæ•°ä¸åŒ¹é…ã€‘ï¼š%@", apmData);
    }
}
</code></pre>
<p>æ•ˆæœå¦‚ä¸‹ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5bd25d1035904328bb1420da7f7961c0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5p2t5Z-O5bCP5YiY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767925474&amp;x-signature=Vt4Dsl4Nmtzch2kyJ9N%2FnA6qwsk%3D" alt="WeexCallNativeModuleParamsError.png" loading="lazy"/></p>
<h4 data-id="heading-79">5. Vue å±‚é¢å¼‚å¸¸</h4>
<p>Weex åº•å±‚ä¾é  Vue å®ç°ï¼Œå·®å¼‚åŒ–å°±æ˜¯ VM å»é€šè¿‡ Bridge åœ¨ WeexSDK Native å»åšç»˜åˆ¶ã€‚å¼‚å¸¸æ–¹é¢é™¤äº†å¸¸è§„çš„ JS è¿è¡Œæ—¶å¼‚å¸¸ï¼ˆå¦‚è¯­æ³•é”™è¯¯ã€ç±»å‹é”™è¯¯ç­‰ 7 ç§ï¼‰ï¼ŒVue æ¡†æ¶è‡ªèº«çš„é€»è¾‘å±‚ã€ç¼–è¯‘å±‚ã€å“åº”å¼ç³»ç»Ÿã€ç»„ä»¶ç”Ÿå‘½å‘¨æœŸ ç­‰ç¯èŠ‚ä¼šæŠ›å‡ºä¸“å±å¼‚å¸¸ï¼Œè¿™äº›å¼‚å¸¸å¿…é¡»é€šè¿‡ Vue.config.errorHandler å…œåº•ã€‚</p>
<p>åˆ†æ Weex æºç ä¸­ï¼š<code>packages/weex-js-framework/index.js/</code></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">handleError</span> (err, vm, info) {
  <span class="hljs-keyword">if</span> (vm) {
    <span class="hljs-keyword">var</span> cur = vm;
    <span class="hljs-keyword">while</span> ((cur = cur.<span class="hljs-property">$parent</span>)) {
      <span class="hljs-keyword">var</span> hooks = cur.<span class="hljs-property">$options</span>.<span class="hljs-property">errorCaptured</span>;
      <span class="hljs-keyword">if</span> (hooks) {
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; hooks.<span class="hljs-property">length</span>; i++) {
          <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">var</span> capture = hooks[i].<span class="hljs-title function_">call</span>(cur, err, vm, info) === <span class="hljs-literal">false</span>;
            <span class="hljs-keyword">if</span> (capture) { <span class="hljs-keyword">return</span> }
          } <span class="hljs-keyword">catch</span> (e) {
            <span class="hljs-title function_">globalHandleError</span>(e, cur, <span class="hljs-string">'errorCaptured hook'</span>);
          }
        }
      }
    }
  }
  <span class="hljs-title function_">globalHandleError</span>(err, vm, info);
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">globalHandleError</span> (err, vm, info) {
  <span class="hljs-keyword">if</span> (config.<span class="hljs-property">errorHandler</span>) {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">return</span> config.<span class="hljs-property">errorHandler</span>.<span class="hljs-title function_">call</span>(<span class="hljs-literal">null</span>, err, vm, info)
    } <span class="hljs-keyword">catch</span> (e) {
      <span class="hljs-title function_">logError</span>(e, <span class="hljs-literal">null</span>, <span class="hljs-string">'config.errorHandler'</span>);
    }
  }
  <span class="hljs-title function_">logError</span>(err, vm, info);
}
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f59bc9512ac44aa7868c7bec1817a4f7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5p2t5Z-O5bCP5YiY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767925474&amp;x-signature=5SezT87Wi5Mt311I3SEDLwsrRaA%3D" alt="WeexCaptureVueError.png" loading="lazy"/></p>
<p>æºç ä¸­ nextTickã€Vue.prototype.$emitã€callHookã€Watcher.prototype.getã€Watcher.prototype.runã€renderRecyclableComponentTemplateã€Vue.prototype._render ç­‰ç­‰éƒ½è°ƒç”¨äº†  handleError æ–¹æ³•ã€‚
Vue å†…éƒ¨å¯¹éƒ¨åˆ†å¼‚å¸¸åšäº†å°è£…/æ‹¦æˆªï¼Œé¿å…ç›´æ¥å†’æ³¡åˆ°å…¨å±€ï¼ˆé˜²æ­¢é˜»æ–­åº”ç”¨æ•´ä½“è¿è¡Œï¼‰ï¼Œä½†ä¼šé€šè¿‡ errorHandler æš´éœ²å‡ºæ¥ã€‚</p>
<p>ä¸¾ä¸ªä¾‹å­ï¼ŒWeexAPM ç±»å¯ä»¥å°è£…ä¸ºï¼š</p>
<pre><code class="hljs language-JS" lang="JS"><span class="hljs-comment">/**
 * APM
 */</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">WeexAPM</span> {
  <span class="hljs-comment">/**
   * è·å–å½“å‰çš„å¶å­èŠ‚ç‚¹
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">*</span>} Vue vm
   * <span class="hljs-doctag">@returns</span> å½“å‰ç»„ä»¶åç§°
   */</span>
  formatComponentName (vm) {
    <span class="hljs-keyword">if</span> (vm.<span class="hljs-property">$root</span> === vm) <span class="hljs-keyword">return</span> <span class="hljs-string">'root'</span>
    <span class="hljs-keyword">var</span> name = vm.<span class="hljs-property">_isVue</span>
      ? (vm.<span class="hljs-property">$options</span> &amp;&amp; vm.<span class="hljs-property">$options</span>.<span class="hljs-property">name</span>) ||
        (vm.<span class="hljs-property">$options</span> &amp;&amp; vm.<span class="hljs-property">$options</span>.<span class="hljs-property">_componentTag</span>)
      : vm.<span class="hljs-property">name</span>
    <span class="hljs-keyword">return</span> (
      (name ? <span class="hljs-string">'component &lt;'</span> + name + <span class="hljs-string">'&gt;'</span> : <span class="hljs-string">'anonymous component'</span>) +
      (vm.<span class="hljs-property">_isVue</span> &amp;&amp; vm.<span class="hljs-property">$options</span> &amp;&amp; vm.<span class="hljs-property">$options</span>.<span class="hljs-property">__file</span>
        ? <span class="hljs-string">' at '</span> + (vm.<span class="hljs-property">$options</span> &amp;&amp; vm.<span class="hljs-property">$options</span>.<span class="hljs-property">__file</span>)
        : <span class="hljs-string">''</span>)
    )
  }

  <span class="hljs-comment">/**
   * å¤„ç†Vueé”™è¯¯æç¤º
   */</span>
  monitor (<span class="hljs-title class_">Vue</span>) {
    <span class="hljs-keyword">if</span> (!<span class="hljs-title class_">Vue</span>) {
      <span class="hljs-keyword">return</span>
    }
    <span class="hljs-comment">// é”™è¯¯å¤„ç†</span>
    <span class="hljs-title class_">Vue</span>.<span class="hljs-property">config</span>.<span class="hljs-property">errorHandler</span> = <span class="hljs-function">(<span class="hljs-params">err, vm, info</span>) =&gt;</span> {
      <span class="hljs-keyword">let</span> componentName = <span class="hljs-string">'unknown'</span>
      <span class="hljs-keyword">if</span> (vm) {
        componentName = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">formatComponentName</span>(vm)
      }
      <span class="hljs-keyword">let</span> errorInfo = {
        <span class="hljs-attr">name</span>: err.<span class="hljs-property">name</span>,
        <span class="hljs-attr">reason</span>: err.<span class="hljs-property">message</span>,
        <span class="hljs-attr">callStack</span>: err.<span class="hljs-property">stack</span>,
        <span class="hljs-attr">componentName</span>: componentName,
        <span class="hljs-attr">info</span>: info,
        <span class="hljs-attr">level</span>: <span class="hljs-string">'VUE_ERROR'</span>
      }
      <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">const</span> weexAPMUploader = weex.requireModule(<span class="hljs-string">'weexAPMUploader'</span>)
        weexAPMUploader.<span class="hljs-title function_">uploadException</span>(errorInfo)
      } <span class="hljs-keyword">catch</span> (error) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'APMMonitor èƒ½åŠ›æœ‰é—®é¢˜ï¼Œè¯·æ£€æŸ¥æ˜¯å¦æ³¨å†Œäº†weexAPMUploaderæ¨¡å—'</span> + error)
      }
    }
  }
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">WeexAPM</span>
</code></pre>
<p>åœ¨æ•è·åˆ° Vue å±‚é¢çš„å¼‚å¸¸æ—¶ï¼Œå¯ä»¥è°ƒç”¨æ³¨å†Œå¥½çš„ weexAPMUploader module èƒ½åŠ›ï¼Œå°†æ•°æ®ä¼ è¾“åˆ° Native ä¾§ï¼Œç”± Native ä¾§è¿›è¡Œç»Ÿä¸€çš„å‚æ•°ç»„è£…ï¼Œæœ€åè°ƒç”¨ APM SDK çš„èƒ½åŠ›è¿›è¡Œæ•°æ®å†™å…¥æ•°æ®åº“ã€æŒ‰ç…§ç­–ç•¥ä¸ŠæŠ¥åˆ° APM æœåŠ¡ç«¯è¿›è¡Œæ¶ˆè´¹ã€‚</p>
<p>æ¨¡æ‹Ÿäº§ç”Ÿ Vue å±‚çº§çš„é”™è¯¯ï¼šç»™ä¸€ä¸ªå­—ç¬¦ä¸²ç±»å‹çš„æ•°æ®ï¼Œåœ¨è®¡ç®—å±æ€§é‡Œè°ƒç”¨ <code>toFixed</code> æ–¹æ³•ã€‚æŒ‰é’®çš„ç‚¹å‡»äº‹ä»¶é‡Œå°†æ•°æ®æ”¹ä¸ºå­—ç¬¦ä¸²ï¼Œåˆ™ä¼šæŠ¥é”™ã€‚
å¯ä»¥çœ‹åˆ°è¢« <code>Vue.config.errorHandler</code> æ•è·äº†ï¼Œåç»­äº¤ç»™ Native å¤„ç†å³å¯ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1c302b4a08944df885a48f5cb732c7ca~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5p2t5Z-O5bCP5YiY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767925474&amp;x-signature=VtY%2Flp2%2F9jlnThAaAsyQlyi8zgM%3D" alt="WeexMockVueAPM.png" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¤§æ•°æ®-201 å†³ç­–æ ‘ä»åˆ†è£‚åˆ°å‰ªæï¼šä¿¡æ¯å¢ç›Š/å¢ç›Šç‡ã€è¿ç»­å˜é‡ä¸CARTè¦ç‚¹]]></title>    <link>https://juejin.cn/post/7589940210832474155</link>    <guid>https://juejin.cn/post/7589940210832474155</guid>    <pubDate>2026-01-03T01:29:43.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589940210832474155" data-draft-id="7590654280899674155" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¤§æ•°æ®-201 å†³ç­–æ ‘ä»åˆ†è£‚åˆ°å‰ªæï¼šä¿¡æ¯å¢ç›Š/å¢ç›Šç‡ã€è¿ç»­å˜é‡ä¸CARTè¦ç‚¹"/> <meta itemprop="keywords" content="åç«¯,å¤§æ•°æ®,æœºå™¨å­¦ä¹ "/> <meta itemprop="datePublished" content="2026-01-03T01:29:43.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ­¦å­åº·"/> <meta itemprop="url" content="https://juejin.cn/user/149189314230039"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¤§æ•°æ®-201 å†³ç­–æ ‘ä»åˆ†è£‚åˆ°å‰ªæï¼šä¿¡æ¯å¢ç›Š/å¢ç›Šç‡ã€è¿ç»­å˜é‡ä¸CARTè¦ç‚¹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/149189314230039/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ­¦å­åº·
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-03T01:29:43.000Z" title="Sat Jan 03 2026 01:29:43 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»14åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">TL;DR</h2>
<ul>
<li>åœºæ™¯ï¼šç”¨å†³ç­–æ ‘åšåˆ†ç±»/å›å½’ï¼Œéœ€è¦è§£é‡Šâ€œè´ªå¿ƒå±€éƒ¨æœ€ä¼˜ã€åˆ†è£‚å‡†åˆ™ã€å‰ªæã€è¿ç»­å˜é‡å¤„ç†â€ã€‚</li>
<li>ç»“è®ºï¼šæ ¸å¿ƒçŸ›ç›¾æ˜¯â€œè®­ç»ƒé›†çº¯åº¦æå‡â€ä¸â€œæ³›åŒ–èƒ½åŠ›â€å†²çªï¼›ç”¨å¢ç›Šç‡/åŸºå°¼å‡†åˆ™ +ï¼ˆé¢„/åï¼‰å‰ªæ + éªŒè¯ç­–ç•¥æ¥å¹³è¡¡ã€‚</li>
<li>äº§å‡ºï¼šä¸€å¥—å¯å¤ç”¨çš„æ¦‚å¿µæ¡†æ¶ï¼šåˆ†è£‚æ ‡å‡†â†’äºŒå‰åˆ†è£‚â†’è¿ç»­å˜é‡å€™é€‰åˆ‡åˆ†ç‚¹â†’å‰ªæä¸éªŒè¯é›†ä¿®æ­£ã€‚</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d3f819ee50ca40f7acd0b97136f1ef65~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768008582&amp;x-signature=%2F27FUN5TSkjF7bb4ea1Qr0cCoSA%3D" alt="å¤§æ•°æ®-201 å†³ç­–æ ‘ä»åˆ†è£‚åˆ°å‰ªæï¼šä¿¡æ¯å¢ç›Š/å¢ç›Šç‡ã€è¿ç»­å˜é‡ä¸CARTè¦ç‚¹" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0c92c6d2df6d4f619d8384e5c214dd0a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768008582&amp;x-signature=EKYpFqdwW%2BxyiyJ9Br68jmFvSrM%3D" alt="å¤§æ•°æ®-201 å†³ç­–æ ‘ä»åˆ†è£‚åˆ°å‰ªæï¼šä¿¡æ¯å¢ç›Š/å¢ç›Šç‡ã€è¿ç»­å˜é‡ä¸CARTè¦ç‚¹" loading="lazy"/></p>
<h2 data-id="heading-1">å†³ç­–æ ‘</h2>
<p>å†³ç­–æ ‘æ˜¯ä¸€ç§åŸºäºæ ‘çŠ¶ç»“æ„çš„ç›‘ç£å­¦ä¹ æ¨¡å‹ï¼Œå¸¸ç”¨äºåˆ†ç±»å’Œå›å½’ä»»åŠ¡ã€‚å®ƒçš„åŸºæœ¬æ€æƒ³æ˜¯é€šè¿‡ä¸€ç³»åˆ—é—®é¢˜çš„åˆ†å±‚æ¬¡åˆ¤æ–­ï¼Œå°†æ•°æ®åˆ†å‰²æˆè¶Šæ¥è¶Šå°çš„å­é›†ï¼Œç›´åˆ°è¾¾åˆ°é¢„æœŸçš„ç›®æ ‡ï¼ˆå¦‚çº¯åº¦è¾ƒé«˜çš„å¶å­èŠ‚ç‚¹ï¼Œæˆ–é¢„æµ‹å€¼çš„è¯¯å·®è¶³å¤Ÿå°ï¼‰ã€‚å†³ç­–æ ‘çš„èŠ‚ç‚¹è¡¨ç¤ºåˆ¤æ–­æ¡ä»¶ï¼Œåˆ†æ”¯è¡¨ç¤ºä¸åŒçš„æ¡ä»¶ç»“æœï¼Œæœ€ç»ˆçš„å¶å­èŠ‚ç‚¹å¯¹åº”å…·ä½“çš„åˆ†ç±»ç»“æœæˆ–é¢„æµ‹å€¼ã€‚</p>
<h2 data-id="heading-2">å±€éƒ¨æœ€ä¼˜</h2>
<p>åœ¨æ„å»ºå†³ç­–æ ‘çš„æœºå™¨å­¦ä¹ è¿‡ç¨‹ä¸­ï¼Œé€šå¸¸é‡‡ç”¨è´ªå¿ƒç®—æ³•ï¼ˆGreedy Algorithmï¼‰ä½œä¸ºæ ¸å¿ƒçš„åˆ†å‰²ç­–ç•¥ã€‚è¿™ç§æ–¹æ³•çš„åŸºæœ¬åŸç†æ˜¯ï¼šåœ¨æ¯ä¸€æ­¥å†³ç­–æ—¶ï¼Œéƒ½é€‰æ‹©å½“å‰æ¡ä»¶ä¸‹æœ€ä¼˜çš„åˆ†å‰²æ–¹å¼ï¼Œè€Œä¸è€ƒè™‘è¿™ä¸€é€‰æ‹©å¯¹åç»­æ­¥éª¤å¯èƒ½äº§ç”Ÿçš„å½±å“ã€‚</p>
<p>å…·ä½“æ¥è¯´ï¼Œå†³ç­–æ ‘çš„æ„å»ºè¿‡ç¨‹ä¼šé€’å½’åœ°è¿›è¡Œä»¥ä¸‹æ“ä½œï¼š</p>
<ol>
<li>åœ¨å½“å‰èŠ‚ç‚¹ä¸Šï¼Œè®¡ç®—æ‰€æœ‰å¯èƒ½çš„ç‰¹å¾å’Œåˆ†å‰²ç‚¹çš„ä¿¡æ¯å¢ç›Šï¼ˆæˆ–åŸºå°¼ä¸çº¯åº¦ç­‰åˆ†è£‚æ ‡å‡†ï¼‰</li>
<li>é€‰æ‹©ä½¿ä¿¡æ¯å¢ç›Šæœ€å¤§åŒ–çš„ç‰¹å¾å’Œåˆ†å‰²ç‚¹</li>
<li>æ ¹æ®é€‰å®šçš„åˆ†å‰²å°†æ•°æ®é›†åˆ’åˆ†ä¸ºè‹¥å¹²å­é›†</li>
<li>å¯¹æ¯ä¸ªå­é›†é€’å½’åœ°é‡å¤ä¸Šè¿°è¿‡ç¨‹ï¼Œç›´åˆ°æ»¡è¶³åœæ­¢æ¡ä»¶ï¼ˆå¦‚è¾¾åˆ°æœ€å¤§æ·±åº¦ã€èŠ‚ç‚¹æ ·æœ¬æ•°ä½äºé˜ˆå€¼ç­‰ï¼‰</li>
</ol>
<p>è¿™ç§æ–¹æ³•è¢«ç§°ä¸º"å±€éƒ¨æœ€ä¼˜"ï¼ˆLocally Optimalï¼‰ï¼Œå› ä¸ºå®ƒåªå…³æ³¨å½“å‰æ­¥éª¤çš„æœ€ä½³å†³ç­–ï¼Œè€Œä¸è€ƒè™‘å…¨å±€æœ€ä¼˜ï¼ˆGlobally Optimalï¼‰çš„è§£å†³æ–¹æ¡ˆã€‚è™½ç„¶è¿™ç§ç­–ç•¥å¯èƒ½å¯¼è‡´æœ€ç»ˆçš„å†³ç­–æ ‘ä¸æ˜¯ç†è®ºä¸Šæœ€ä¼˜çš„ï¼Œä½†å®ƒå…·æœ‰ä»¥ä¸‹æ˜¾è‘—ä¼˜åŠ¿ï¼š</p>
<ul>
<li>è®¡ç®—æ•ˆç‡é«˜ï¼šé¿å…äº†ç©·ä¸¾æ‰€æœ‰å¯èƒ½çš„æ ‘ç»“æ„</li>
<li>å®ç°ç®€å•ï¼šç®—æ³•é€»è¾‘æ¸…æ™°ï¼Œæ˜“äºç†è§£å’Œå®ç°</li>
<li>å®é™…æ•ˆæœå¥½ï¼šåœ¨å¤§å¤šæ•°å®é™…åº”ç”¨åœºæ™¯ä¸­ä»èƒ½è·å¾—è‰¯å¥½çš„é¢„æµ‹æ€§èƒ½</li>
</ul>
<p>ä¾‹å¦‚ï¼Œåœ¨ID3ã€C4.5å’ŒCARTç­‰ç»å…¸å†³ç­–æ ‘ç®—æ³•ä¸­ï¼Œéƒ½é‡‡ç”¨äº†è¿™ç§è´ªå¿ƒç­–ç•¥ã€‚è™½ç„¶ç†è®ºä¸Šå­˜åœ¨å¯èƒ½æ‰¾åˆ°æ›´ä¼˜æ ‘çš„ç®—æ³•ï¼ˆå¦‚åŠ¨æ€è§„åˆ’ï¼‰ï¼Œä½†ç”±äºå†³ç­–æ ‘æ„å»ºé—®é¢˜çš„ç»„åˆçˆ†ç‚¸ç‰¹æ€§ï¼Œè¿™äº›æ–¹æ³•é€šå¸¸è®¡ç®—å¤æ‚åº¦å¤ªé«˜ï¼Œä¸é€‚åˆå¤„ç†å®é™…è§„æ¨¡çš„æ•°æ®é›†ã€‚</p>
<h2 data-id="heading-3">å‰ªæ</h2>
<p>å‰ªææ˜¯ä¸€ç§ç”¨äºé˜²æ­¢å†³ç­–æ ‘è¿‡æ‹Ÿåˆçš„æ–¹æ³•ã€‚åœ¨å†³ç­–æ ‘çš„æ„å»ºè¿‡ç¨‹ä¸­ï¼Œè¿‡åº¦çš„åˆ†è£‚ä¼šå¯¼è‡´æ¨¡å‹å¯¹è®­ç»ƒæ•°æ®è¿‡åº¦æ‹Ÿåˆï¼Œè¿›è€Œé™ä½å¯¹æ–°æ•°æ®çš„æ³›åŒ–èƒ½åŠ›ã€‚å‰ªæçš„ç›®çš„æ˜¯é€šè¿‡å»é™¤ä¸€äº›ä¸å¿…è¦çš„åˆ†æ”¯ï¼Œç®€åŒ–å†³ç­–æ ‘ç»“æ„ï¼Œä»è€Œæå‡æ¨¡å‹çš„æ³›åŒ–èƒ½åŠ›ã€‚å¸¸è§çš„å‰ªææ–¹æ³•æœ‰é¢„å‰ªæï¼ˆpre-pruningï¼‰å’Œåå‰ªæï¼ˆpost-pruningï¼‰ã€‚é¢„å‰ªæåœ¨æ„å»ºå†³ç­–æ ‘æ—¶æå‰åœæ­¢æŸäº›åˆ†è£‚ï¼Œè€Œåå‰ªæåˆ™æ˜¯åœ¨æ ‘æ„å»ºå®Œæˆåå†å»æ‰ä¸€äº›ä¸é‡è¦çš„åˆ†æ”¯ã€‚</p>
<h2 data-id="heading-4">åˆ†è£‚</h2>
<p>åˆ†è£‚æ˜¯å†³ç­–æ ‘æ„å»ºä¸­çš„ä¸€ä¸ªæ ¸å¿ƒè¿‡ç¨‹ï¼ŒæŒ‡çš„æ˜¯ä»æ ¹èŠ‚ç‚¹å¼€å§‹ï¼Œæ ¹æ®æŸä¸ªç‰¹å¾çš„å€¼ï¼Œå°†æ•°æ®åˆ’åˆ†åˆ°ä¸åŒçš„å­èŠ‚ç‚¹ä¸­ã€‚é€šè¿‡ä¸æ–­åœ°åˆ†è£‚ï¼Œå†³ç­–æ ‘é€æ¸å°†æ•°æ®é›†åˆ’åˆ†æˆæ›´å°çš„å­é›†ï¼Œä½¿å¾—æ¯ä¸ªå­é›†å†…éƒ¨çš„æ ·æœ¬æ›´å…·ä¸€è‡´æ€§ã€‚åœ¨åˆ†ç±»ä»»åŠ¡ä¸­ï¼Œåˆ†è£‚çš„ç›®æ ‡æ˜¯æœ€å¤§åŒ–ä¿¡æ¯å¢ç›Šæˆ–åŸºå°¼ç³»æ•°çš„å˜åŒ–ï¼Œåœ¨å›å½’ä»»åŠ¡ä¸­åˆ™å¸¸é‡‡ç”¨å‡æ–¹è¯¯å·®æˆ–æ–¹å·®ä½œä¸ºæŒ‡æ ‡ã€‚åˆ†è£‚çš„è¿‡ç¨‹ç›´åˆ°è¾¾åˆ°è®¾å®šçš„åœæ­¢æ¡ä»¶ï¼ˆå¦‚èŠ‚ç‚¹çº¯åº¦ã€æ ‘çš„æ·±åº¦é™åˆ¶ç­‰ï¼‰æ‰ä¼šåœæ­¢ã€‚</p>
<h2 data-id="heading-5">äºŒå‰åˆ†è£‚</h2>
<p>äºŒå‰åˆ†è£‚æ˜¯ä¸€ç§ç‰¹å®šçš„åˆ†è£‚æ–¹å¼ï¼Œæ¯æ¬¡åªå°†èŠ‚ç‚¹åˆ†æˆä¸¤ä¸ªå­èŠ‚ç‚¹ï¼Œå½¢æˆä¸€ä¸ªäºŒå‰æ ‘ç»“æ„ã€‚å†³ç­–æ ‘å¯ä»¥é€šè¿‡äºŒå‰åˆ†è£‚çš„æ–¹å¼æ„å»ºï¼Œå…¶ä¸­æ¯æ¬¡åˆ†è£‚æ—¶ï¼Œå°†æ ·æœ¬æ•°æ®åˆ†æˆä¸¤ä¸ªäº’æ–¥çš„å­é›†ã€‚è¿™ç§åˆ†è£‚æ–¹å¼çš„ä¼˜ç‚¹æ˜¯ç»“æ„ç®€å•ï¼Œä¸”åœ¨å¾ˆå¤šå®ç°ä¸­æ•ˆç‡è¾ƒé«˜ã€‚è®¸å¤šå†³ç­–æ ‘ç®—æ³•ï¼ˆå¦‚CARTç®—æ³•ï¼‰å°±æ˜¯åŸºäºäºŒå‰åˆ†è£‚æ„å»ºçš„ã€‚è¿™ç§ç»“æ„çš„å†³ç­–æ ‘åœ¨æ¯ä¸ªèŠ‚ç‚¹ä¸Šåªèƒ½æœ‰ä¸¤ä¸ªåˆ†æ”¯ï¼Œå³ã€Œæ˜¯ã€æˆ–ã€Œå¦ã€ï¼Œä»è€Œç¡®ä¿æ ‘ç»“æ„çš„ç®€æ´æ€§ã€‚</p>
<h2 data-id="heading-6">ä¿®æ”¹å±€éƒ¨æœ€ä¼˜æ¡ä»¶</h2>
<ul>
<li>ä»¥ä¿¡æ¯å¢ç›Šä½œä¸ºåˆ’åˆ†è®­ç»ƒæ•°æ®é›†çš„ç‰¹å¾ï¼Œå­˜åœ¨åå‘äºé€‰æ‹©å–å€¼è¾ƒå¤šçš„ç‰¹å¾çš„é—®é¢˜ã€‚</li>
<li>ä½¿ç”¨ä¿¡æ¯å¢ç›Šæ¯”ï¼ˆinformation gain ratioï¼‰å¯ä»¥å¯¹è¿™ä¸€é—®é¢˜è¿›è¡ŒçŸ«æ­£</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/903d6150cc9a4c13926cb4d915de437b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768008582&amp;x-signature=%2FCUCpptviQfdSgCxDNoZC2rCFtQ%3D" alt="ä¿®æ”¹å±€éƒ¨æœ€ä¼˜æ¡ä»¶" loading="lazy"/>
ç§°ä¸ºå±æ€§ a çš„â€œå›ºæœ‰å€¼â€ï¼ˆintrinsic valueï¼‰
å±æ€§ a çš„å¯èƒ½å–å€¼è¶Šå¤šï¼ˆå³ V è¶Šå¤§ï¼‰ï¼Œåˆ™ IVï¼ˆaï¼‰çš„å€¼é€šå¸¸ä¼šè¶Šå¤§ã€‚
IV å€¼ä¼šéšç€å¶èŠ‚ç‚¹ä¸Šæ ·æœ¬é‡çš„å˜å°è€Œé€æ¸å˜å¤§ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸€ä¸ªç‰¹å¾ä¸­å¦‚æœæ ‡ç­¾åˆ†ç±»å¤ªå¤šï¼Œæ¯ä¸ªå¶å­ä¸Šçš„ IV å€¼å°±ä¼šéå¸¸å¤§ã€‚
å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå¢ç›Šç‡å‡†åˆ™å¯¹å¯å–å€¼æ•°ç›®è¾ƒå°‘çš„å±æ€§æœ‰æ‰€åå¥½ï¼Œå› æ­¤ï¼ŒC4.5 ç®—æ³•å¹¶ä¸æ˜¯ç›´æ¥é€‰æ‹©å¢ç›Šç‡æœ€å¤§çš„å€™é€‰åˆ’åˆ†å±æ€§ï¼Œè€Œæ˜¯ä½¿ç”¨äº†ä¸€ç§å¯å‘å¼ï¼šå…ˆä»å€™é€‰åˆ’åˆ†å±æ€§ä¸­æ‰¾å‡ºä¿¡æ¯å¢ç›Šé«˜äºå¹³å‡æ°´å¹³çš„å±æ€§ï¼Œå†ä»ä¸­é€‰æ‹©å¢ç›Šç‡æœ€é«˜çš„ã€‚</p>
<h2 data-id="heading-7">è¿ç»­å˜é‡å¤„ç†æ‰‹æ®µ</h2>
<p>åœ¨ C4.5 ä¸­ï¼ŒåŒæ ·è¿˜å¢åŠ äº†é’ˆå¯¹è¿ç»­å˜é‡çš„å¤„ç†æ‰‹æ®µã€‚å¦‚æœè¾“å…¥ç‰¹å¾å­—æ®µæ˜¯è¿ç»­å‹å˜é‡ï¼Œåˆ™ç®—æ³•é¦–å…ˆä¼šå¯¹è¿™ä¸€åˆ—æ•°è¿›è¡Œä»å°åˆ°å¤§çš„æ’åºï¼Œç„¶åé€‰å–ç›¸é‚»çš„ä¸¤ä¸ªæ•°çš„ä¸­é—´æ•°ä½œä¸ºåˆ‡åˆ†æ•°æ®é›†çš„å¤‡é€‰ç‚¹ï¼Œè‹¥ä¸€ä¸ªè¿ç»­å˜é‡æœ‰ N ä¸ªå€¼ï¼Œåˆ™åœ¨ C4.5 çš„å¤„ç†è¿‡ç¨‹ä¸­å°†äº§ç”Ÿ N-1 ä¸ªå¤‡é€‰åˆ‡åˆ†ç‚¹ï¼Œå¹¶ä¸”æ¯ä¸ªåˆ‡åˆ†ç‚¹éƒ½ä»£è¡¨ç€ä¸€ç§äºŒå‰æ ‘çš„åˆ‡åˆ†æ–¹æ¡ˆï¼Œä¾‹å¦‚ï¼š
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ad0c6431e0cd4c27957b13288fa617e6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768008582&amp;x-signature=uD06e6dwmJu8lLDYPYInLWtB%2F%2B4%3D" alt="è¿ç»­å˜é‡å¤„ç†æ‰‹æ®µ" loading="lazy"/>
è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ­¤æ—¶è¿ç»­å˜é‡çš„å¤„ç†å¹¶éæ˜¯å°†å…¶è½¬æ¢ä¸ºä¸€ä¸ªæ‹¥æœ‰ N-1 ä¸ªåˆ†ç±»æ°´å¹³çš„åˆ†ç±»å˜é‡ï¼Œè€Œæ˜¯å°†å…¶è½¬æ¢ä¸ºäº† N-1 ä¸ªäºŒåˆ†æ–¹æ¡ˆï¼Œè€Œåœ¨è¿›è¡Œäº†ä¸‹ä¸€æ¬¡çš„åˆ‡åˆ†è¿‡ç¨‹ä¸­ï¼Œåœ¨ N-1 ä¸ªæ–¹æ¡ˆéƒ½è¦å•ç‹¬å¸¦å…¥è€ƒè™‘ï¼Œå…¶ä¸­æ¯ä¸€ä¸ªåˆ‡åˆ†æ–¹æ¡ˆå’Œä¸€ä¸ªç¦»æ•£å˜é‡çš„åœ°ä½å‡ç›¸åŒï¼ˆä¸€ä¸ªç¦»æ•£å˜é‡å°±æ˜¯ä¸€ä¸ªå•ç‹¬çš„å¤šè·¯åˆ‡åˆ†æ–¹æ¡ˆï¼‰ã€‚
ä¾‹å¦‚å¦‚ä¸‹æ•°æ®é›†ï¼Œæ•°æ®é›†ä¸­çš„åªæœ‰ä¸¤ä¸ªå­—æ®µï¼Œç¬¬ä¸€è¡Œä»£è¡¨å¹´é¾„ï¼Œæ˜¯ç‰¹å¾å˜é‡ï¼Œç¬¬äºŒè¡Œä»£è¡¨æ€§åˆ«ï¼Œæ˜¯ç›®æ ‡å­—æ®µï¼Œåˆ™å¯¹å¹´é¾„è¿™ä¸€è¿ç»­å˜é‡çš„åˆ‡åˆ†æ–¹æ¡ˆå¦‚å›¾æ‰€ç¤ºï¼š
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/74674d38e4594c23953a17c4dc829b19~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768008582&amp;x-signature=Uyj6yrNzSyfr%2B8eS%2FyQVOJOfhYs%3D" alt="è¿ç»­å˜é‡å¤„ç†æ‰‹æ®µ" loading="lazy"/>
ä»ä¸Šè¿°èƒ½å¤Ÿçœ‹å‡ºï¼Œåœ¨å¯¹äºåŒ…å«è¿ç»­å˜é‡çš„æ•°æ®é›†è¿›è¡Œæ ‘æ¨¡å‹æ„å»ºçš„è¿‡ç¨‹ä¸­è¦æ¶ˆè€—æ›´å¤šçš„è¿ç®—èµ„æºã€‚ä½†ä¸æ­¤åŒæ—¶ï¼Œæˆ‘ä»¬ä¹Ÿä¼šå‘ç°ï¼Œå½“è¿ç»­å˜é‡çš„æŸä¸­é—´ç‚¹å‚ä¸åˆ°å†³ç­–çš„äºŒåˆ†è¿‡ç¨‹ä¸­ï¼Œå¾€å¾€ä»£è¡¨è¯¥ç‚¹å¯¹äºæœ€ç»ˆåˆ†ç±»ç»“æœæœ‰è¾ƒå¤§å½±å“ï¼Œè¿™ä¹Ÿä¸ºæˆ‘ä»¬è¿ç»­å˜é‡çš„åˆ†ç®±å‹ç¼©æä¾›äº†æŒ‡å¯¼æ€§æ„è§ã€‚</p>
<p>ä¾‹å¦‚ä¸Šè¿°æ¡ˆä¾‹ï¼Œè‹¥è¦å¯¹ Age åˆ—è¿›è¡Œå‹ç¼©ï¼Œåˆ™å¯è€ƒè™‘ä½¿ç”¨ 36.5 å¯¹å…¶è¿›è¡Œåˆ†ç®±ï¼Œåˆ™åˆ†ç®±ç»“æœå¯¹äºæ€§åˆ«è¿™ä¸€ç›®æ ‡å­—æ®µä»ç„¶å…·æœ‰è¾ƒå¥½çš„åˆ†ç±»æ•ˆæœï¼Œè¿™ä¹Ÿæ˜¯å†³ç­–æ ‘æœ€å¸¸è§çš„ç”¨é€”ä¹‹ä¸€ï¼Œä¹Ÿæ˜¯æœ€é‡è¦çš„æ¨¡å‹æŒ‡å¯¼åˆ†ç®±çš„æ–¹æ³•ã€‚</p>
<h2 data-id="heading-8">å†³ç­–æ ‘çš„æ‹Ÿåˆåº¦ä¼˜åŒ–</h2>
<p>åœ¨å®é™…æ“ä½œä¸­ï¼Œæˆ‘ä»¬åˆ¤æ–­æ¨¡å‹çš„æ˜¯å¦æ‹Ÿåˆå¾€å¾€æ˜¯ä»æ¨¡å‹è®­ç»ƒè¯¯å·®å’Œæ³›åŒ–è¯¯å·®ï¼ŒäºŒè€…ç»“åˆä½¿ç”¨å°±èƒ½åˆ¤æ–­æ¨¡å‹æ˜¯å¦å­˜åœ¨è¿‡æ‹Ÿåˆç°è±¡ã€‚è™½ç„¶æˆ‘ä»¬ä¹‹å‰ä¸¾ä¾‹æ—¶å¹¶æ²¡æœ‰å¯¹æ•°æ®é›†è¿›è¡Œåˆ‡åˆ†ï¼Œä½†ä»»ä½•æœ‰ç›‘ç£å­¦ä¹ ç®—æ³•å»ºæ¨¡è¿‡ç¨‹ä¸­éƒ½éœ€è¦è¿›è¡Œè®­ç»ƒé›†å’Œæµ‹è¯•é›†çš„åˆ’åˆ†ï¼Œå†³ç­–æ ‘ä¹Ÿä¸ä¾‹å¤–ï¼Œè¿›è€Œæˆ‘ä»¬å¯ç”¨äº¤å‰éªŒè¯è®¡ç®—è®­ç»ƒè¯¯å·®å’Œæ³›åŒ–è¯¯å·®ï¼Œè¿›è€Œåˆ¤æ–­å†³ç­–æ ‘æ˜¯å¦å­˜åœ¨è¿‡æ‹Ÿåˆã€‚
è¿™æ˜¯ä¸€å¥—é€šç”¨çš„åˆ¤æ–­æœ‰ç›‘ç£å­¦ä¹ ç®—æ³•æ˜¯å¦è¿‡æ‹Ÿåˆçš„æ–¹æ³•ï¼ŒåŒæ—¶é€šç”¨çš„æ–¹æ³•ä¸­è¿˜æœ‰æ›´é«˜çº§çš„æ–¹æ³•ã€‚
ä½†å¯¹äºå†³ç­–æ ‘è€Œè¨€ï¼Œæœ‰ä¸€å¥—å†³ç­–æ ‘ç‹¬æœ‰çš„é˜²æ­¢è¿‡æ‹Ÿåˆçš„è§£å†³æ–¹æ¡ˆ--å‰ªæã€‚</p>
<h2 data-id="heading-9">å†³ç­–æ ‘å‰ªæ</h2>
<p>æ‰€è°“å‰ªææ˜¯æŒ‡åœ¨å†³ç­–æ ‘ä¸­å»é™¤éƒ¨åˆ†å¶èŠ‚ç‚¹ï¼Œå‰ªæï¼ˆPruningï¼‰ä¸»è¦ç”¨æ¥é˜²æ­¢è¿‡æ‹Ÿåˆï¼Œå¯¹äºä¸€èˆ¬çš„æ•°æ®é›†å¦‚æœæ€»æ˜¯è¿½æ±‚çº¯çš„å¶èŠ‚ç‚¹ï¼Œæˆ–è€…è§‚æµ‹æ•°è¾ƒå°çš„å¶èŠ‚ç‚¹ï¼Œå¾ˆå®¹æ˜“ä½¿å¾—æ ‘è¿‡äºåºæ‚ï¼Œå°¤å…¶æ˜¯å­˜åœ¨å¯ä»¥åå¤ä½¿ç”¨çš„è¿ç»­å˜é‡çš„æ—¶å€™ï¼Œæ­¤æ—¶å°±éœ€è¦ä¸»åŠ¨å»æ‰ä¸€äº›åˆ†æ”¯æ¥é™ä½è¿‡æ‹Ÿåˆçš„é£é™©ã€‚</p>
<p>å¸¸è§çš„å‰ªæç­–ç•¥æœ‰â€œé¢„å‰ªæâ€ï¼ˆPre-Pruningï¼‰å’Œâ€œåå‰ªæâ€ï¼ˆPost-Purningï¼‰</p>
<ul>
<li>é¢„å‰ªæï¼šåœ¨å†³ç­–æ ‘ç”Ÿæˆçš„è¿‡ç¨‹ä¸­ï¼Œå¯¹æ¯ä¸ªèŠ‚ç‚¹åœ¨åˆ’åˆ†å‰å…ˆè¿›è¡Œä¼°è®¡ï¼Œå¦‚æœå½“å‰çš„èŠ‚ç‚¹åˆ’åˆ†ä¸èƒ½å¸¦æ¥å†³ç­–æ ‘æ³›åŒ–æ€§èƒ½ï¼ˆé¢„æµ‹æ€§èƒ½ï¼‰çš„æå‡ï¼Œåˆ™åœæ­¢åˆ’åˆ†å¹¶ä¸”å½“å‰èŠ‚ç‚¹æ ‡è®°ä¸ºå¶èŠ‚ç‚¹ã€‚</li>
<li>åå‰ªæï¼šå…ˆè®­ç»ƒç”Ÿæˆä¸€é¢—å®Œæ•´çš„æ ‘ï¼Œè‡ªåº•å‘ä¸Šå¯¹éå¶èŠ‚ç‚¹è¿›è¡Œè€ƒå¯Ÿï¼Œå¦‚æœè¯¥èŠ‚ç‚¹å¯¹åº”çš„å­æ ‘æ›¿æ¢ä¸ºå¶èŠ‚ç‚¹èƒ½å¸¦æ¥å†³ç­–æ ‘æ³›åŒ–èƒ½åŠ›çš„æå‡ï¼Œåˆ™è¯¥å­æ ‘æ›¿æ¢ä¸ºå¶èŠ‚ç‚¹ã€‚</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5e856729cd3d45959036fa2d780b81e5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768008582&amp;x-signature=zdykpwRiMMV7A5rHNBz5GKkRtkU%3D" alt="å†³ç­–æ ‘å‰ªæ" loading="lazy"/></p>
<h2 data-id="heading-10">åˆ†è£‚å‡†åˆ™</h2>
<p>äºŒå‰é€’å½’åˆ’åˆ†ï¼šæ¡ä»¶æˆç«‹å‘å·¦ï¼Œåä¹‹å‘å³</p>
<ul>
<li>å¯¹äºè¿ç»­å˜é‡ï¼šæ¡ä»¶æ˜¯å±æ€§å°äºç­‰äºæœ€ä¼˜åˆ†è£‚ç‚¹</li>
<li>å¯¹äºåˆ†ç±»å˜é‡ï¼šæ¡ä»¶æ˜¯å±æ€§å±äºè‹¥å¹²ç±»</li>
</ul>
<h2 data-id="heading-11">äºŒå‰åˆ†è£‚ä¼˜ç‚¹</h2>
<p>ç›¸æ¯”å¤šè·¯åˆ†è£‚å¯¼è‡´æ•°æ®ç¢ç‰‡åŒ–çš„é€Ÿåº¦æ…¢ï¼Œå…è®¸åœ¨ä¸€ä¸ªå±æ€§ä¸Šé‡å¤åˆ†è£‚ï¼Œå³å¯ä»¥åœ¨ä¸€ä¸ªå±æ€§ä¸Šäº§ç”Ÿè¶³å¤Ÿå¤šçš„åˆ†è£‚ã€‚ä¸¤è·¯åˆ†è£‚å¸¦æ¥çš„æ ‘é¢„æµ‹æ€§èƒ½æå‡è¶³ä»¥å¼¥è¡¥å…¶ç›¸åº”çš„æ ‘æ˜“è¯»æ€§æŸå¤±ã€‚</p>
<p>å¯¹äºå±æ€§ä¸åŒçš„è¢«é¢„æµ‹å˜é‡ Y åˆ†è£‚å‡†åˆ™ä¸åŒï¼š</p>
<ul>
<li>åˆ†ç±»æ ‘ï¼šGini å‡†åˆ™ï¼Œä¸ä¹‹å‰çš„ä¿¡æ¯å¢ç›Šå¾ˆç±»ä¼¼ï¼ŒGini ç³»æ•°åº¦é‡ä¸€ä¸ªèŠ‚ç‚¹çš„ä¸çº¯åº¦ã€‚</li>
<li>å›å½’æ ‘ï¼šä¸€ç§å¸¸è§çš„åˆ†å‰²æ ‡å‡†æ˜¯åå·®å‡å°‘ï¼ˆStand Deviation Reductionï¼ŒSDRï¼‰ï¼Œç±»ä¼¼äºæœ€å°å‡æ–¹å·® LSï¼ˆLeast Squares é¢„æµ‹é”™è¯¯çš„å¹³æ–¹å’Œï¼‰å‡†åˆ™ã€‚</li>
</ul>
<h2 data-id="heading-12">åˆ©ç”¨æµ‹è¯•é›†è¿›è¡Œå‰ªæ</h2>
<p>ç®€å•è®¨è®º CART ç®—æ³•å‰ªæè¿‡ç¨‹ï¼Œè¯¥è¿‡ç¨‹ä¹Ÿæ˜¯æµ‹è¯•é›†ç”¨äºä¿®æ­£æ¨¡å‹çš„æœ€ä½³ä½“ç°ã€‚ä¾‹å¦‚ï¼Œåœ¨å¦‚ä¸‹è®­ç»ƒé›†ä¸­è®­ç»ƒå¾—åˆ°çš„æ¨¡å‹ï¼Œé»‘è‰²æ•°å­—è¡¨ç¤ºè®­ç»ƒé›†ä¸Šçš„åˆ†ç±»æƒ…å†µï¼Œçº¢è‰²æ•°å­—è¡¨ç¤ºæ¨¡å‹ä½œç”¨äºéªŒè¯é›†ä¸Šçš„åˆ†ç±»æƒ…å†µã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a587f14cc2dd420d8b75ce380d8e279f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768008582&amp;x-signature=slNUScYrdEmvmlkY8KjY1iHYVwg%3D" alt="åˆ©ç”¨æµ‹è¯•é›†è¿›è¡Œå‰ªæ" loading="lazy"/>
åˆ™ CART ç®—æ³•åˆ©ç”¨éªŒè¯é›†å‰ªæçš„è¿‡ç¨‹å¦‚ä¸‹ï¼š</p>
<ul>
<li>åˆ¤æ–­æ¯ä¸ªå¶èŠ‚ç‚¹åœ¨éªŒè¯é›†ä¸Šçš„é”™è¯¯ç‡</li>
<li>èŠ‚ç‚¹ 4 çš„é”™è¯¯ç‡ï¼še(4) = 1/3</li>
<li>èŠ‚ç‚¹ 5 çš„é”™è¯¯ç‡ e(5) = 1</li>
<li>èŠ‚ç‚¹ 6 çš„é”™è¯¯ç‡ e(6) = 1</li>
<li>èŠ‚ç‚¹ 7 çš„é”™è¯¯ç‡ä¸º e(7) = 4 / 9</li>
</ul>
<p>è®¡ç®—èŠ‚ç‚¹æ€»åŠ æƒå¹³å‡é”™è¯¯ç‡å¹¶å’Œçˆ¶èŠ‚ç‚¹è¿›è¡Œæ¯”è¾ƒï¼ŒåŠ æƒæ–¹æ³•å°±æ˜¯ä¹˜ä»¥è¯¥èŠ‚ç‚¹æ ·æœ¬æ•°é‡å çˆ¶èŠ‚ç‚¹æ ·æœ¬æ€»é‡çš„ç™¾åˆ†æ¯”ï¼ˆæµ‹è¯•é›†ï¼‰ï¼š</p>
<p>å¦‚èŠ‚ç‚¹ 2 çš„é”™è¯¯ç‡ä¸º e(2)=1/4ï¼Œè€ŒèŠ‚ç‚¹ 4 å’ŒèŠ‚ç‚¹ 5 çš„åŠ æƒå¹³å‡é”™è¯¯ç‡ä¸º e(4) * 3/4 + e(5) * 1/4 = 2/4ï¼Œå› æ­¤å­èŠ‚ç‚¹é”™è¯¯ç‡æ›´é«˜ï¼Œè€ƒè™‘å‰ªæã€‚
èŠ‚ç‚¹ 3 çš„é”™è¯¯ç‡ä¸º e(3) = 4/10ï¼Œè€Œ e(6)* 1/10 + e(7)*9/10 = 5/10ï¼Œå› æ­¤è€ƒè™‘å‰ªæã€‚
èŠ‚ç‚¹ 2 å’ŒèŠ‚ç‚¹ 3 çš„åŠ æƒå¹³å‡é”™è¯¯ç‡ e(2) * 4/14 + e(3) * 10/14 =  5/14ï¼Œæ¯”çˆ¶èŠ‚ç‚¹ï¼ˆèŠ‚ç‚¹ 1ï¼‰çš„é”™è¯¯ç‡ e(1) = 7/14 è¦å°ï¼Œå› æ­¤ä¿ç•™è¯¥èŠ‚ç‚¹ï¼Œåœæ­¢å‰ªæã€‚</p>
<p>å¯ä»¥çœ‹å‡ºï¼ŒCART ç®—æ³•å‰ªæè¿‡ç¨‹æ›´æ˜“ç†è§£ä¹Ÿæ›´ä¾¿äºæ“ä½œï¼ŒåŒæ—¶æˆ‘ä»¬ä¹Ÿèƒ½çœ‹åˆ°å¯¹äºå»ºç«‹æ¨¡å‹çš„ç®—æ³•è€Œè¨€ï¼Œæµ‹è¯•é›†ä¸ä»…èƒ½å¤Ÿå¯¹æ¨¡å‹å‡†ç¡®ç‡è¿›è¡Œè¯„ä¼°ï¼ŒåŒæ—¶è¿˜èƒ½èµ·åˆ°ä¿®æ­£ä¼˜åŒ–æ¨¡å‹çš„ä½œç”¨ã€‚</p>
<h2 data-id="heading-13">æµ‹è¯•é›†å’ŒéªŒè¯é›†</h2>
<p>å¯¹äºå¤§å¤šæ•°æ¨¡å‹è€Œè¨€ï¼Œæµ‹è¯•é›†å®é™…ä¸Šçš„ä½œç”¨å°±æ˜¯ç”¨æ¥ä¿®æ­£æ¨¡å‹ï¼Œä¸ºäº†æé«˜ä¿®æ­£çš„å‡†ç¡®ç‡ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥é‡‡ç”¨äº¤å‰éªŒè¯çš„æ–¹æ³•ï¼Œåå¤åˆ¤åˆ«æ¨¡å‹ä¿®æ”¹æ¡ä»¶ï¼ˆå¦‚æ˜¯å¦è¦å‰ªæï¼‰ï¼Œå¹¶è®¾ç½®æ¨¡å‹ä¿®æ”¹å‡ºå‘æ¡ä»¶ï¼ˆå¦‚å¤šæ•°éªŒè¯æƒ…å†µéœ€è¦ä¿®æ”¹åˆ™å¯¹å…¶è¿›è¡Œä¿®æ”¹ï¼‰ï¼Œä»è€Œæé«˜æ¨¡å‹ä¼˜åŒ–çš„å¯é æ€§ã€‚</p>
<p>è€Œé™¤äº†è®­ç»ƒé›†å’Œæµ‹è¯•é›†ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜å°å°ä¼šåˆ’åˆ†ä¸€ä¸ªéªŒè¯é›†ï¼ŒéªŒè¯é›†æ•°æ®ä¸å‚ä¸å»ºæ¨¡å¶ä¸å‚ä¸æ¨¡å‹ä¿®æ”¹å’Œä¼˜åŒ–ï¼Œåªç”¨äºæ¨¡å‹æœ€ç»ˆä¼˜åŒ–åçš„æ¨¡å‹æ•ˆåŠ›ã€‚</p>
<p>è€Œè®­ç»ƒé›†ã€æµ‹è¯•é›†å’ŒéªŒè¯é›†çš„åˆ’åˆ†é€šå¸¸éµç…§ 6:2:2 çš„æ¯”ä¾‹è¿›è¡Œåˆ’åˆ†ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥æ ¹æ®å®é™…éœ€æ±‚é€‚å½“è°ƒæ•´åˆ’åˆ†æ¯”ä¾‹ï¼Œä½†æ— è®ºå¦‚ä½•ï¼Œæµ‹è¯•é›†å’ŒéªŒè¯é›†æ•°æ®é‡éƒ½ä¸å®œè¿‡å¤šä¹Ÿä¸å®œè¿‡å°‘ï¼Œè¯¥äºŒè€…æ•°æ®é›†æ•°æ®å‡ä¸å‚ä¸å»ºæ¨¡ï¼Œè‹¥å æ¯”å¤ªå¤šï¼Œåˆ™ä¼šå¯¹æ¨¡å‹çš„æ„å»ºè¿‡ç¨‹é€ æˆè¾ƒå¤§çš„å½±å“ï¼ˆæ¬ æ‹Ÿåˆï¼‰ï¼Œè€Œè‹¥åˆ’åˆ†æ•°æ®è¿‡å°‘ï¼Œè®­ç»ƒé›†æ•°æ®é‡è¾ƒå¤§ï¼Œåˆ™åˆå¯èƒ½é€ æˆè¿‡æ‹Ÿåˆï¼Œæ•°æ®é›†çš„åˆ’åˆ†ä¹Ÿæ˜¯å½±å“æ‹Ÿåˆåº¦çš„é‡è¦å› ç´ ã€‚</p>
<h2 data-id="heading-14">é”™è¯¯é€ŸæŸ¥</h2>



























































<table><thead><tr><th>ç—‡çŠ¶</th><th>æ ¹å› </th><th>å®šä½</th><th>ä¿®å¤</th></tr></thead><tbody><tr><td>è®­ç»ƒé›†å‡†ç¡®ç‡é«˜ã€çº¿ä¸Š/æµ‹è¯•é›†å·®</td><td>æ ‘å¤ªæ·±ã€å¶å­å¤ªçº¯å¯¼è‡´è¿‡æ‹Ÿåˆ</td><td>çœ‹æ·±åº¦ã€å¶å­æ ·æœ¬æ•°ã€è®­ç»ƒ-éªŒè¯å·®è·</td><td>é¢„å‰ªæï¼ˆmax_depth/min_samples_*ï¼‰ã€åå‰ªæã€äº¤å‰éªŒè¯é€‰å¤æ‚åº¦</td></tr><tr><td>æ€»æ˜¯é€‰â€œå–å€¼å¾ˆå¤šâ€çš„ç‰¹å¾å…ˆåˆ†è£‚</td><td>ä¿¡æ¯å¢ç›Šå¯¹å¤šå–å€¼ç‰¹å¾æœ‰åå¥½</td><td>ç»Ÿè®¡å€™é€‰ç‰¹å¾å–å€¼æ•°ä¸è¢«é€‰é¢‘ç‡</td><td>ä½¿ç”¨å¢ç›Šç‡/å¢ç›Šæ¯”ï¼›æˆ–æ”¹ç”¨åŸºå°¼/æ­£åˆ™åŒ–å‰ªæç­–ç•¥</td></tr><tr><td>è¿ç»­å˜é‡åˆ†è£‚å¾ˆæ…¢ã€è®­ç»ƒè€—æ—¶æš´æ¶¨</td><td>è¿ç»­å˜é‡å€™é€‰åˆ‡åˆ†ç‚¹å¤šï¼ˆN-1ï¼‰</td><td>å•åˆ—å”¯ä¸€å€¼æ•°é‡ã€æ’åºä¸è¯„ä¼°æ¬¡æ•°</td><td>å…ˆåˆ†ç®±/é‡‡æ ·å€™é€‰ç‚¹/é™åˆ¶æœ€å¤§å¶å­æ•°ï¼›å‡å°‘é«˜åŸºæ•°è¿ç»­ç‰¹å¾å‚ä¸</td></tr><tr><td>å¤šè·¯åˆ†è£‚åæ•°æ®ç¢ç‰‡åŒ–ä¸¥é‡</td><td>å¤šè·¯åˆ†è£‚ç¨€é‡Šæ ·æœ¬ï¼Œå­èŠ‚ç‚¹æ ·æœ¬å¤ªå°‘</td><td>æŸ¥çœ‹æ¯æ¬¡åˆ†è£‚åçš„å­èŠ‚ç‚¹æ ·æœ¬å æ¯”</td><td>å€¾å‘äºŒå‰åˆ†è£‚ï¼›æé«˜æœ€å°å¶å­æ ·æœ¬é˜ˆå€¼</td></tr><tr><td>æ ‘ç»“æ„å¯è§£é‡Šä½†ç¨³å®šæ€§å·®</td><td>æ•°æ®æ‰°åŠ¨å¯¼è‡´åˆ†è£‚ç‚¹å˜åŒ–ï¼ˆé«˜æ–¹å·®æ¨¡å‹ï¼‰</td><td>ä¸åŒéšæœºç§å­/é‡é‡‡æ ·ä¸‹æ ‘ç»“æ„å·®å¼‚</td><td>ç”¨å‰ªæ/é™åˆ¶å¤æ‚åº¦ï¼›éœ€è¦ç¨³å®šæ€§åˆ™ç”¨é›†æˆï¼ˆéšæœºæ£®æ—/GBDTï¼‰</td></tr><tr><td>å‰ªæåå‡†ç¡®ç‡åè€Œä¸‹é™</td><td>å‰ªæå¼ºåº¦è¿‡å¤§æˆ–éªŒè¯é›†ä»£è¡¨æ€§å·®</td><td>å¯¹æ¯”å‰ªæå‰åè®­ç»ƒ/éªŒè¯/æµ‹è¯•æŒ‡æ ‡</td><td>è°ƒæ•´å‰ªæé˜ˆå€¼ï¼›é‡åšæ•°æ®åˆ’åˆ†æˆ–ç”¨äº¤å‰éªŒè¯ç¨³å®šé€‰æ‹©</td></tr><tr><td>éªŒè¯é›†æ•ˆæœå¥½ã€æµ‹è¯•é›†å´©</td><td>éªŒè¯é›†å‚ä¸è¿‡å¤šè°ƒå‚å¯¼è‡´â€œéªŒè¯é›†è¿‡æ‹Ÿåˆâ€</td><td>è§‚å¯Ÿè°ƒå‚æ¬¡æ•°ä¸æŒ‡æ ‡æ³¢åŠ¨</td><td>ä½¿ç”¨åµŒå¥—äº¤å‰éªŒè¯ï¼›ä¿ç•™æœ€ç»ˆç‹¬ç«‹æµ‹è¯•é›†ä¸€æ¬¡æ€§è¯„ä¼°</td></tr><tr><td>ç±»åˆ«æä¸å¹³è¡¡æ—¶å¶å­é¢„æµ‹åå‘å¤šæ•°ç±»</td><td>åˆ†è£‚å‡†åˆ™æœªæ˜¾å¼å¤„ç†ç±»åˆ«æƒé‡</td><td>æ··æ·†çŸ©é˜µã€å°‘æ•°ç±»å¬å›ç‡å¼‚å¸¸ä½</td><td>ç±»åˆ«æƒé‡/é‡é‡‡æ ·ï¼›ä»¥å¬å›/F1ä¸ºä¸»ç›®æ ‡çº¦æŸåˆ†è£‚ä¸å‰ªæ</td></tr></tbody></table>
<h2 data-id="heading-15">å…¶ä»–ç³»åˆ—</h2>
<h3 data-id="heading-16">ğŸš€ AIç¯‡æŒç»­æ›´æ–°ä¸­ï¼ˆé•¿æœŸæ›´æ–°ï¼‰</h3>
<p><strong>AIç‚¼ä¸¹æ—¥å¿—-29 - å­—èŠ‚è·³åŠ¨ DeerFlow æ·±åº¦ç ”ç©¶æ¡†<em>æ–œä½“æ ·å¼</em>æ¶ ç§æœ‰éƒ¨ç½² æµ‹è¯•ä¸Šæ‰‹ æ¶æ„ç ”ç©¶</strong>ï¼ŒæŒç»­æ‰“é€ å®ç”¨AIå·¥å…·æŒ‡å—ï¼
<strong>AIç ”ç©¶-132 Java ç”Ÿæ€å‰æ²¿ 2025ï¼šSpringã€Quarkusã€GraalVMã€CRaC ä¸äº‘åŸç”Ÿè½åœ°</strong></p>
<h3 data-id="heading-17">ğŸ’» Javaç¯‡æŒç»­æ›´æ–°ä¸­ï¼ˆé•¿æœŸæ›´æ–°ï¼‰</h3>
<p><strong>Java-207 RabbitMQ Direct äº¤æ¢å™¨è·¯ç”±ï¼šRoutingKey ç²¾ç¡®åŒ¹é…ã€é˜Ÿåˆ—å¤šç»‘å®šä¸æ—¥å¿—åˆ†æµå®æˆ˜</strong>
MyBatis å·²å®Œç»“ï¼ŒSpring å·²å®Œç»“ï¼ŒNginxå·²å®Œç»“ï¼ŒTomcatå·²å®Œç»“ï¼Œåˆ†å¸ƒå¼æœåŠ¡å·²å®Œç»“ï¼ŒDubboå·²å®Œç»“ï¼ŒMySQLå·²å®Œç»“ï¼ŒMongoDBå·²å®Œç»“ï¼ŒNeo4jå·²å®Œç»“ï¼ŒFastDFS å·²å®Œç»“ï¼ŒOSSå·²å®Œç»“ï¼ŒGuavaCacheå·²å®Œç»“ï¼ŒEVCacheå·²å®Œç»“ï¼ŒRabbitMQæ­£åœ¨æ›´æ–°... æ·±å…¥æµ…å‡ºåŠ©ä½ æ‰“ç‰¢åŸºç¡€ï¼</p>
<h3 data-id="heading-18">ğŸ“Š å¤§æ•°æ®æ¿å—å·²å®Œæˆå¤šé¡¹å¹²è´§æ›´æ–°ï¼ˆ300ç¯‡ï¼‰ï¼š</h3>
<p>åŒ…æ‹¬ Hadoopã€Hiveã€Kafkaã€Flinkã€ClickHouseã€Elasticsearch ç­‰äºŒåä½™é¡¹æ ¸å¿ƒç»„ä»¶ï¼Œè¦†ç›–ç¦»çº¿+å®æ—¶æ•°ä»“å…¨æ ˆï¼
<strong>å¤§æ•°æ®-278 Spark MLib - åŸºç¡€ä»‹ç» æœºå™¨å­¦ä¹ ç®—æ³• æ¢¯åº¦æå‡æ ‘ GBDTæ¡ˆä¾‹ è¯¦è§£</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ‰‹æŠŠæ‰‹æ•™ä½ å®‰è£… SQLServer2014-x64-CHSé™„è¯¦ç»†æ–‡æ­¥éª¤ä¸é¿å‘æŒ‡å—]]></title>    <link>https://juejin.cn/post/7590159073989525556</link>    <guid>https://juejin.cn/post/7590159073989525556</guid>    <pubDate>2026-01-03T01:32:40.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7590159073989525556" data-draft-id="7590128405351301120" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ‰‹æŠŠæ‰‹æ•™ä½ å®‰è£… SQLServer2014-x64-CHSé™„è¯¦ç»†æ–‡æ­¥éª¤ä¸é¿å‘æŒ‡å—"/> <meta itemprop="keywords" content="SQL Server"/> <meta itemprop="datePublished" content="2026-01-03T01:32:40.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æˆ·613541146016"/> <meta itemprop="url" content="https://juejin.cn/user/1602431422584832"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ‰‹æŠŠæ‰‹æ•™ä½ å®‰è£… SQLServer2014-x64-CHSé™„è¯¦ç»†æ–‡æ­¥éª¤ä¸é¿å‘æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1602431422584832/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æˆ·613541146016
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-03T01:32:40.000Z" title="Sat Jan 03 2026 01:32:40 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>â€‹Â </p>
<p><strong>ç¬¬ä¸€æ­¥ï¼šå‡†å¤‡å·¥ä½œï¼ˆåˆ«å«Œéº»çƒ¦ï¼Œè¿™æ­¥æœ€å…³é”®ï¼‰</strong></p>
<ol>
<li><strong>è§£å‹æ–‡ä»¶</strong>ï¼š<strong>å®‰è£…åŒ…ä¸‹è½½ï¼š</strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fpan.quark.cn%2Fs%2F0ec37ef40661" title="https://pan.quark.cn/s/0ec37ef40661" target="_blank" ref="nofollow noopener noreferrer">pan.quark.cn/s/0ec37ef40â€¦</a>ï¼Œä½ ä¸‹è½½çš„Â <code>SQLServer2014-x64-CHS.zip</code>æ˜¯ä¸ªå‹ç¼©åŒ…ï¼Œå…ˆæŠŠå®ƒè§£å‹åˆ°ä¸€ä¸ª<strong>æ ¹ç›®å½•</strong>ä¸‹ï¼Œæ¯”å¦‚ <code>D:\SQL2014</code>ã€‚<strong>åƒä¸‡åˆ«æ”¾å¤ªæ·±çš„æ–‡ä»¶å¤¹é‡Œ</strong>ï¼Œä¹Ÿ<strong>åƒä¸‡åˆ«æœ‰ä¸­æ–‡è·¯å¾„</strong>ï¼Œä¸ç„¶å®¹æ˜“æŠ¥é”™ã€‚</li>
<li><strong>æ–­ç½‘</strong>ï¼šè™½ç„¶ä¸è”ç½‘ä¹Ÿèƒ½è£…ï¼Œä½†è”ç½‘å¯èƒ½ä¼šè®©ä½ æ³¨å†Œå¾®è½¯è´¦å·ï¼Œæ¯”è¾ƒéº»çƒ¦ï¼Œç›´æ¥æ‹”ç½‘çº¿æˆ–ç¦ç”¨ç½‘å¡æœ€çœäº‹ã€‚</li>
</ol>
<hr/>
<h3 data-id="heading-0"><strong>ç¬¬äºŒæ­¥ï¼šå¼€å§‹å®‰è£…</strong></h3>
<ol>
<li>è¿›å…¥ä½ è§£å‹å¥½çš„æ–‡ä»¶å¤¹ï¼Œæ‰¾åˆ°Â <code>setup.exe</code>ï¼Œå³é”®é€‰æ‹© <strong>â€œä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œâ€</strong> ã€‚è¿™ä¸€æ­¥å¿…é¡»æœ‰ï¼Œå¦åˆ™åé¢æƒé™ä¸å¤Ÿã€‚</li>
<li>ç¨ç­‰ç‰‡åˆ»ï¼Œä¼šå¼¹å‡ºå®‰è£…ç•Œé¢ã€‚</li>
</ol>
<hr/>
<h3 data-id="heading-1"><strong>ç¬¬ä¸‰æ­¥ï¼šæ ¸å¿ƒå®‰è£…æ“ä½œï¼ˆè·Ÿç€ç‚¹å°±è¡Œï¼‰</strong></h3>
<ol>
<li>
<p>åœ¨å·¦ä¾§ç‚¹å‡»Â  <strong>â€œå…¨æ–° SQL Server ç‹¬ç«‹å®‰è£…æˆ–å‘ç°æœ‰å®‰è£…æ·»åŠ åŠŸèƒ½â€</strong> ã€‚</p>
</li>
<li>
<p>äº§å“å¯†é’¥é¡µé¢ï¼šå¦‚æœä½ æœ‰æ­£ç‰ˆå¯†é’¥å°±å¡«ä¸Šï¼Œæ²¡æœ‰çš„è¯ç›´æ¥é€‰ä¸‹é¢çš„Â  <strong>â€œæŒ‡å®šå¯ç”¨ç‰ˆæœ¬â€ -&gt; â€œEvaluationï¼ˆè¯„ä¼°ç‰ˆï¼‰â€</strong> ï¼Œè¿™ä¸ªèƒ½ç”¨180å¤©ï¼Œå¤Ÿä½ å­¦ä¹ ç”¨äº†ã€‚ç„¶åç‚¹â€œä¸‹ä¸€æ­¥â€ã€‚</p>
</li>
<li>
<p>è®¸å¯æ¡æ¬¾ï¼šå¿…é¡»æ¥å—ï¼Œç‚¹â€œä¸‹ä¸€æ­¥â€ã€‚</p>
</li>
<li>
<p><strong>å…¨å±€è§„åˆ™æ£€æŸ¥</strong>ï¼šè®©å®ƒè‡ªå·±è·‘ä¸€éï¼Œå¦‚æœå…¨æ˜¯ç»¿è‰²å¯¹å‹¾ï¼Œå°±ç‚¹â€œä¸‹ä¸€æ­¥â€ã€‚å¦‚æœæœ‰çº¢è‰²çš„ï¼Œå°±å¾—æ ¹æ®æç¤ºè§£å†³ä¸€ä¸‹ï¼ˆé€šå¸¸æ˜¯ç³»ç»Ÿç¼ºä¸ªè¡¥ä¸ï¼‰ã€‚</p>
</li>
<li>
<p><strong>Microsoft Update</strong>ï¼šè¿™é‡Œå»ºè®®<strong>å–æ¶ˆå‹¾é€‰</strong>ï¼Œä¸ç„¶å®ƒä¼šå¸®ä½ æ›´æ–°ç³»ç»Ÿï¼Œå¾ˆæ…¢ã€‚ç‚¹â€œä¸‹ä¸€æ­¥â€ã€‚</p>
</li>
<li>
<p><strong>å®‰è£…å®‰è£…ç¨‹åºæ–‡ä»¶</strong>ï¼šç³»ç»Ÿä¼šè‡ªåŠ¨ä¸‹è½½ä¸€äº›å¿…è¦çš„ç»„ä»¶ï¼Œç­‰ç€å®ƒè½¬å®Œåœˆåœˆï¼Œå®Œæˆåç‚¹â€œä¸‹ä¸€æ­¥â€ã€‚</p>
</li>
<li>
<p><strong>åŠŸèƒ½é€‰æ‹©ï¼ˆé‡ç‚¹æ¥äº†ï¼ï¼‰</strong> ï¼š</p>
<ul>
<li>
<p>åœ¨å·¦è¾¹åˆ—è¡¨é‡Œï¼Œ<strong>è‡³å°‘è¦å‹¾é€‰è¿™å‡ ä¸ª</strong>ï¼š</p>
<ul>
<li><strong>æ•°æ®åº“å¼•æ“æœåŠ¡</strong>ï¼ˆè¿™ä¸ªæ˜¯æ ¸å¿ƒï¼Œå¿…è£…ï¼‰</li>
<li><strong>SQL Server å¤åˆ¶</strong>ï¼ˆå¯é€‰ï¼Œä¸€èˆ¬ä¹Ÿè£…ä¸Šï¼‰</li>
<li><strong>å®¢æˆ·ç«¯å·¥å…·è¿æ¥</strong>ï¼ˆè£…äº†è¿™ä¸ªæ‰èƒ½ç”¨SSMSç®¡ç†æ•°æ®åº“ï¼‰</li>
<li><strong>ç®¡ç†å·¥å…· - åŸºæœ¬</strong>ï¼ˆè¿™ä¸ªå°±æ˜¯é‚£ä¸ªå«SSMSçš„å›¾å½¢åŒ–ç®¡ç†ç•Œé¢ï¼Œå¼ºçƒˆå»ºè®®è£…ä¸Šï¼‰</li>
</ul>
</li>
<li>
<p>å…±äº«åŠŸèƒ½ç›®å½•ä¿æŒé»˜è®¤å°±è¡Œï¼Œç‚¹â€œä¸‹ä¸€æ­¥â€ã€‚</p>
</li>
</ul>
</li>
<li>
<p><strong>å®ä¾‹é…ç½®</strong>ï¼šç›´æ¥ç”¨é»˜è®¤çš„Â <strong>MSSQLSERVER</strong>â€‹ å°±è¡Œï¼Œç‚¹â€œä¸‹ä¸€æ­¥â€ã€‚</p>
</li>
<li>
<p><strong>æœåŠ¡å™¨é…ç½®</strong>ï¼šæŠŠâ€œSQL Server ä»£ç†â€å’Œâ€œSQL Server æ•°æ®åº“å¼•æ“â€è¿™ä¸¤ä¸ªæœåŠ¡çš„â€œå¯åŠ¨ç±»å‹â€éƒ½æ”¹æˆÂ  <strong>â€œè‡ªåŠ¨â€</strong> ï¼Œè¿™æ ·å¼€æœºå°±èƒ½è‡ªå·±å¯åŠ¨ã€‚ç‚¹â€œä¸‹ä¸€æ­¥â€ã€‚</p>
</li>
<li>
<p><strong>æ•°æ®åº“å¼•æ“é…ç½®ï¼ˆåˆä¸€ä¸ªé‡ç‚¹ï¼ï¼‰</strong> ï¼š</p>
<ul>
<li>èº«ä»½éªŒè¯æ¨¡å¼ï¼š<strong>æ··åˆæ¨¡å¼ (SQL Server èº«ä»½éªŒè¯å’Œ Windows èº«ä»½éªŒè¯)</strong> ã€‚ä¸€å®šè¦é€‰è¿™ä¸ªï¼</li>
<li>ä¸‹é¢è®¾ç½®Â <strong>sa å¯†ç </strong>ï¼šè¿™ä¸ªsaè´¦å·æ˜¯æœ€é«˜æƒé™ï¼Œå¯†ç è®¾å¤æ‚ç‚¹ï¼Œè®°ç‰¢äº†ï¼</li>
<li>æŒ‡å®šSQL Server ç®¡ç†å‘˜ï¼šç‚¹â€œæ·»åŠ å½“å‰ç”¨æˆ·â€ï¼Œæˆ–è€…æŠŠä½ è‡ªå·±çš„Windowsç”¨æˆ·ååŠ è¿›å»ã€‚ç‚¹â€œä¸‹ä¸€æ­¥â€ã€‚</li>
</ul>
</li>
<li>
<p>åé¢çš„â€œAnalysis Servicesé…ç½®â€ã€â€œReporting Servicesé…ç½®â€ç­‰ç­‰ï¼Œå¦‚æœä½ æ²¡ç‰¹æ®Šéœ€æ±‚ï¼Œå…¨éƒ¨ç‚¹â€œä¸‹ä¸€æ­¥â€è·³è¿‡å°±è¡Œã€‚</p>
</li>
<li>
<p>æœ€ååˆ°â€œå‡†å¤‡å®‰è£…â€é¡µé¢ï¼Œæ£€æŸ¥ä¸€ä¸‹ä½ é€‰çš„åŠŸèƒ½å¯¹ä¸å¯¹ï¼Œæ²¡é—®é¢˜å°±ç‚¹Â  <strong>â€œå®‰è£…â€</strong> ã€‚</p>
</li>
</ol>
<hr/>
<h3 data-id="heading-2"><strong>ç¬¬å››æ­¥ï¼šå–æ¯èŒ¶ï¼Œç­‰å®ƒè·‘å®Œ</strong></h3>
<p>ç°åœ¨å°±ç­‰ç€è¿›åº¦æ¡èµ°å®Œå§ï¼Œæ—¶é—´å–å†³äºä½ ç”µè„‘é…ç½®ï¼Œå¯èƒ½åå‡ åˆ†é’Ÿåˆ°åŠå°æ—¶ä¸ç­‰ã€‚çœ‹åˆ°æ‰€æœ‰åŠŸèƒ½éƒ½æ˜¾ç¤ºâ€œæˆåŠŸâ€åï¼Œç‚¹â€œå…³é—­â€ã€‚</p>
<hr/>
<h3 data-id="heading-3"><strong>ç¬¬äº”æ­¥ï¼šéªŒè¯æ˜¯å¦å®‰è£…æˆåŠŸ</strong></h3>
<ol>
<li>æŒ‰é”®ç›˜ä¸Šçš„Â <code>Win + R</code>é”®ï¼Œè¾“å…¥Â <code>services.msc</code>å›è½¦ï¼Œæ‰“å¼€æœåŠ¡åˆ—è¡¨ã€‚</li>
<li>æ‰¾åˆ°Â  <strong>â€œSQL Server (MSSQLSERVER)â€</strong> â€‹ è¿™ä¸ªæœåŠ¡ï¼Œçœ‹å®ƒçš„çŠ¶æ€æ˜¯ä¸æ˜¯â€œæ­£åœ¨è¿è¡Œâ€ã€‚å¦‚æœæ˜¯ï¼Œè¯´æ˜å®‰è£…æˆåŠŸäº†ï¼</li>
</ol>
<p>â€‹</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item>  </channel></rss>