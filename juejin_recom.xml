<?xml version="1.0" encoding="UTF-8"?><rss version="2.0">  <channel>      <title>æ˜é‡‘æ–‡ç« æ¨è</title>      <link>https://juejin.cn/recommended?sort=newest</link>      <description>ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…æˆé•¿çš„ç¤¾åŒº</description>      <generator>python juejin_recom.py @Pi20</generator>      <item>    <title><![CDATA[é‚£ä¸ªæŠŠä»£ç å†™å¾—äº²å¦ˆéƒ½ä¸è®¤çš„åŒäº‹ï¼Œæœ€åè¢«åŠé€€äº†ğŸ¤·â€â™‚ï¸]]></title>    <link>https://juejin.cn/post/7585897699603693594</link>    <guid>https://juejin.cn/post/7585897699603693594</guid>    <pubDate>2025-12-22T04:03:34.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7585897699603693594" data-draft-id="7586136543954632742" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é‚£ä¸ªæŠŠä»£ç å†™å¾—äº²å¦ˆéƒ½ä¸è®¤çš„åŒäº‹ï¼Œæœ€åè¢«åŠé€€äº†ğŸ¤·â€â™‚ï¸"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,ä»£ç è§„èŒƒ"/> <meta itemprop="datePublished" content="2025-12-22T04:03:34.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ErpanOmer"/> <meta itemprop="url" content="https://juejin.cn/user/3878732754331096"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é‚£ä¸ªæŠŠä»£ç å†™å¾—äº²å¦ˆéƒ½ä¸è®¤çš„åŒäº‹ï¼Œæœ€åè¢«åŠé€€äº†ğŸ¤·â€â™‚ï¸
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3878732754331096/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ErpanOmer
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-22T04:03:34.000Z" title="Mon Dec 22 2025 04:03:34 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ğŸ˜ã€‚</p>
<p>ä¸Šä¸Šå‘¨ï¼Œæˆ‘ä»¬åœ¨ä¾‹ä¼šä¸Šé€åˆ«äº†å›¢é˜Ÿé‡Œçš„ä¸€ä½æŠ€æœ¯å¤§ç‰›ï¼Œé˜¿Kã€‚</p>
<p>è¯´å®è¯ï¼Œé˜¿K çš„æŠ€æœ¯åº•å­å¾ˆå¼ºã€‚ä»–èƒ½æ‰‹å†™ Webpack æ’ä»¶ï¼Œç†Ÿè¯» ECMA è§„èŒƒï¼Œå¯¹ Chrome çš„æ¸²æŸ“ç®¡çº¿äº†å¦‚æŒ‡æŒã€‚</p>
<p>ä½†æœ€ç»ˆï¼ŒCTO è¿˜æ˜¯å†³å®šåŠé€€ä»–äº†ã€‚</p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5a7672acbb864ef1ae09c60dd7b20838~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRXJwYW5PbWVy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766981014&amp;x-signature=054la%2BeYJnC0QPIt8VTi%2FOqNCfs%3D" alt="Suggestion.gif" loading="lazy"/></p>
<p>ç†ç”±å¾ˆæ®‹é…·ï¼Œåªæœ‰ä¸€å¥è¯ï¼š <strong>ä½ çš„ä»£ç ï¼Œå›¢é˜Ÿé‡Œæ²¡äººæ•¢æ¥æ‰‹ã€‚ğŸ¤·â€â™‚ï¸</strong></p>
<p><strong>ä¸ºäº†æ‰€è°“çš„æè‡´æ€§èƒ½ï¼Œç‰ºç‰²ä»£ç çš„å¯è¯»æ€§ï¼Œåˆ°åº•å€¼ä¸å€¼ï¼Ÿ</strong></p>
<hr/>
<h4 data-id="heading-0"><strong>äº‹ä»¶çš„å¼€å§‹</strong></h4>
<p>æˆ‘ä»¬æœ‰ä¸€ä¸ªå¾ˆæ™®é€šçš„åå°ç®¡ç†ç³»ç»Ÿé‡æ„ã€‚</p>
<p>é˜¿K è´Ÿè´£æœ€æ ¸å¿ƒçš„æƒé™æ ¡éªŒæ¨¡å—ã€‚è¿™æœ¬æ˜¯ä¸€ä¸ªå¾ˆç®€å•çš„é€»è¾‘ï¼šåç«¯è¿”å›ä¸€ä¸ªæƒé™åˆ—è¡¨ï¼Œå‰ç«¯åˆ¤æ–­ä¸€ä¸‹ç”¨æˆ·æœ‰æ²¡æœ‰æŸä¸ªæŒ‰é’®çš„æƒé™ã€‚</p>
<p>æ™®é€šäººï¼ˆæ¯”å¦‚æˆ‘ï¼‰å¤§æ¦‚ä¼šè¿™ä¹ˆå†™ï¼š</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-comment">// ä¸€çœ¼å°±èƒ½çœ‹æ‡‚</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">hasPermission</span> = (<span class="hljs-params">userPermissions, requiredPermission</span>) =&gt; {
  <span class="hljs-keyword">return</span> userPermissions.<span class="hljs-title function_">includes</span>(requiredPermission);
};

<span class="hljs-keyword">if</span> (<span class="hljs-title function_">hasPermission</span>(currentUser.<span class="hljs-property">permissions</span>, <span class="hljs-string">'DELETE_USER'</span>)) {
  <span class="hljs-title function_">showDeleteButton</span>();
}
</code></pre>
<p>ä½†æ˜¯ï¼Œé˜¿K çœ‹åˆ°è¿™æ®µä»£ç æ—¶ï¼Œéœ²å‡ºäº†é„™å¤·çš„ç¥æƒ…ğŸ˜’ã€‚</p>
<p><strong>includes è¿™ç§éå†æ“ä½œå¤ªæ…¢äº†ï¼æˆ‘ä»¬è¦å¤„ç†çš„æ˜¯åä¸‡çº§çš„ç”¨æˆ·å¹¶å‘ï¼ˆå¹¶æ²¡æœ‰ï¼‰ï¼Œå¿…é¡»ä¼˜åŒ–ï¼</strong></p>
<p>äºæ˜¯ï¼Œä»–é—­å…³ä¸‰å¤©ï¼Œé‡å†™äº†æ•´ä¸ªæ¨¡å—ã€‚</p>
<p>Code Review çš„æ—¶å€™ï¼Œæˆ‘ä»¬æ‰€æœ‰äººéƒ½å‚»äº†ã€‚å±å¹•ä¸Šå‡ºç°äº†ä¸€å †æˆ‘ä»¬çœ‹ä¸æ‡‚çš„å¤©ä¹¦ğŸ˜–ï¼š</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-comment">// å…¨ç¨‹ä½è¿ç®—ï¼Œæ²¡æœ‰ä»»ä½•æ³¨é‡Š</span>
<span class="hljs-keyword">const</span> P = { <span class="hljs-attr">r</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">w</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">e</span>: <span class="hljs-number">4</span>, <span class="hljs-attr">d</span>: <span class="hljs-number">8</span> }; 
<span class="hljs-keyword">const</span> <span class="hljs-title function_">_c</span> = (<span class="hljs-params">u, p</span>) =&gt; (u &amp; p) === p;

<span class="hljs-comment">// è¿™é‡Œç”šè‡³ç”¨äº†ä¸€ä¸ªä½ç§»æ©ç ç”Ÿæˆçš„å“ˆå¸Œè¡¨</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">_m</span> = (<span class="hljs-params">l</span>) =&gt; l.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">a, c</span>) =&gt;</span> a | (P[c] || <span class="hljs-number">0</span>), <span class="hljs-number">0</span>);

<span class="hljs-comment">// åƒä¸åƒä¸€æ®µä¹±ç ï¼Ÿ</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">chk</span> = (<span class="hljs-params">u, r</span>) =&gt; <span class="hljs-title function_">_c</span>(<span class="hljs-title function_">_m</span>(u.<span class="hljs-property">r</span>), P[r]);
</code></pre>
<p>æˆ‘é—®ä»–ï¼šé˜¿Kï¼Œè¿™ <code>_c</code> å’Œ <code>_m</code> æ˜¯å•¥æ„æ€ï¼Ÿèƒ½åŠ ä¸ªæ³¨é‡Šå—ï¼Ÿ</p>
<p>é˜¿K æŒ¯æŒ¯æœ‰è¯ï¼š <strong>å¥½çš„ä»£ç ä¸éœ€è¦æ³¨é‡Šï¼ä½è¿ç®—æ˜¯è®¡ç®—æœºæ‰§è¡Œæœ€å¿«çš„æ“ä½œï¼Œæ¯”å­—ç¬¦ä¸²æ¯”å¯¹å¿«å‡ ç™¾å€ï¼è¿™ä¸ä»…ä»…æ˜¯ä»£ç ï¼Œè¿™æ˜¯å¯¹ CPU çš„å°Šé‡ï¼Œæ˜¯è‰ºæœ¯ï¼</strong></p>
<p>æˆ‘ï¼š <strong>ã€‚ ã€‚ ã€‚ ã€‚ğŸ¤£</strong></p>
<p>åœ¨é‚£ä¸ªæ²¡æœ‰æ€§èƒ½ç“¶é¢ˆçš„åå°ç®¡ç†ç³»ç»Ÿé‡Œï¼Œä»–ä¸ºäº†é‚£è‚‰çœ¼ä¸å¯è§çš„ 0.0001 æ¯«ç§’æå‡ï¼Œåˆ¶é€ äº†ä¸€ä¸ªç»´æŠ¤éº»çƒ¦ã€‚</p>
<hr/>
<h4 data-id="heading-1"><strong>å±å±±ğŸ’©å´©æºƒçš„é‚£ä¸€å¤©</strong></h4>
<p>ç¾éš¾å‘ç”Ÿåœ¨ä¸¤ä¸ªæœˆåã€‚</p>
<p>ä¸šåŠ¡æ–¹çªç„¶æäº†ä¸€ä¸ªéœ€æ±‚ï¼š <strong>æƒé™é€»è¾‘è¦æ”¹ï¼Œç°åœ¨æ”¯æŒâ€˜åå‘æ’é™¤â€™æƒé™ï¼Œè€Œä¸”æƒé™å­—æ®µè¦ä»æ•°å­—æ”¹æˆå­—ç¬¦ä¸²ç»„ã€‚</strong></p>
<p>é‚£å¤©ï¼Œé˜¿K æ­£å¥½å»å¹´å‡äº†ï¼Œæ‰‹æœºå…³æœºğŸ˜’ã€‚</p>
<p>ä»»åŠ¡è½åˆ°äº†åˆšå…¥èŒçš„å®ä¹ ç”Ÿå°æå¤´ä¸Šã€‚</p>
<p>å°ææ‰“å¼€ <code>permission.js</code>ï¼Œçœ‹ç€æ»¡å±çš„ <code>&gt;&gt;</code>ã€<code>&amp;</code>ã€<code>|</code> å’Œå•å­—æ¯å˜é‡ï¼Œæ•´ä¸ªäººåƒµåœ¨äº†å·¥ä½ä¸Šã€‚</p>
<p>ä»–è¯•å›¾å»ç†è§£é‚£ä¸ªä½ç§»æ©ç çš„é€»è¾‘ï¼Œä½†ä»–å‘ç°ï¼Œåªè¦æ”¹åŠ¨ä¸€ä¸ªå­—ç¬¦ï¼Œæ•´ä¸ªç³»ç»Ÿçš„æƒé™å°±å…¨ä¹±å¥—äº†â€”â€”ç®¡ç†å‘˜çªç„¶çœ‹ä¸äº†é¡µé¢ï¼Œå®ä¹ ç”Ÿçªç„¶èƒ½åˆ åº“äº†ğŸ¤”ã€‚</p>
<p><strong>è¿™ä»£ç æœ‰æ¯’å§â€¦â€¦</strong> å°æåœ¨ç¬¬ 10 æ¬¡å°è¯•ä¿®å¤å¤±è´¥åï¼Œå·®ç‚¹å“­å‡ºæ¥ğŸ˜­ã€‚</p>
<p>å› ä¸ºè¿™ä¸ªæ¨¡å—çš„é€»è¾‘è¿‡äºæ™¦æ¶©ï¼Œä¸”å’Œå…¶ä»–æ¨¡å—é«˜åº¦è€¦åˆï¼ˆé˜¿K ä¸ºäº†å¤ç”¨ï¼ŒæŠŠè¿™äº›ä½è¿ç®—é€»è¾‘æ³¨å…¥åˆ°äº†å…¨å±€åŸå‹é“¾é‡Œï¼‰ï¼Œæˆ‘ä»¬æ ¹æœ¬ä¸æ•¢åŠ¨ã€‚</p>
<p>ç»“æœæ˜¯ï¼š<strong>é‚£ä¸ªç®€å•çš„éœ€æ±‚ï¼Œè¢«ç¡¬ç”Ÿç”Ÿæ‹–äº†ä¸€å‘¨ã€‚</strong> ä¸šåŠ¡æ–¹æŠ•è¯‰åˆ°äº† CTO é‚£é‡Œã€‚</p>
<p>CTO çœ‹äº†çœ¼ä»£ç ï¼Œæ²‰é»˜äº†ä¸‰åˆ†é’Ÿï¼Œç„¶åé—®äº†ä¸€å¥ï¼š</p>
<p>å†™è¿™ç©æ„å„¿çš„äººï¼Œæ˜¯è§‰å¾—ä»¥åéƒ½ä¸ç”¨ç»´æŠ¤äº†å—ï¼ŸğŸ˜¥</p>
<hr/>
<h4 data-id="heading-2"><strong>è¿‡æ—©ä¼˜åŒ–æ˜¯ä¸‡æ¶ä¹‹æº !</strong></h4>
<p>é˜¿K å›æ¥åï¼Œå¾ˆä¸æœæ°”ã€‚ä»–è§‰å¾—æ˜¯æˆ‘ä»¬æŠ€æœ¯å¤ªèœï¼Œçœ‹ä¸æ‡‚ä»–çš„é«˜çº§æ“ä½œã€‚</p>
<p>ä»–æ‹¿å‡ºäº† Chrome Profiler çš„æˆªå›¾ï¼ŒæŒ‡ç€é‚£å¾®ä¹å…¶å¾®çš„å·®è·è¯´ï¼šçœ‹ï¼æˆ‘çš„å†™æ³•æ¯”ä½ ä»¬å¿«äº† 40%ï¼</p>
<p>ä½†ä»–å¿½ç•¥äº†è½¯ä»¶å·¥ç¨‹ä¸­æœ€é‡è¦çš„ä¸€æ¡å…¬å¼ï¼š</p>
<blockquote>
<p><strong>ä»£ç ä»·å€¼ = (å®ç°åŠŸèƒ½ + å¯ç»´æŠ¤æ€§) / å¤æ‚åº¦</strong></p>
</blockquote>
<p><strong>è¿‡æ—©ä¼˜åŒ–æ˜¯ä¸‡æ¶ä¹‹æº ! ! !</strong></p>
<p>åœ¨ 99% çš„ä¸šåŠ¡åœºæ™¯ä¸‹ï¼ŒV8 å¼•æ“å·²ç»è¶³å¤Ÿå¿«äº†ã€‚</p>
<ul>
<li>ä½ æŠŠ <code>forEach</code> æ”¹æˆ <code>while</code> å€’åºå¾ªç¯ï¼Œæ€§èƒ½ç¡®å®æå‡äº†ï¼Œä½†ä»£ç å˜å¾—éš¾è¯»äº†ã€‚</li>
<li>ä½ æŠŠæ¸…æ™°çš„ <code>switch-case</code> æ”¹æˆäº†æ™¦æ¶©çš„ <code>lookup table</code> è¿˜æ²¡æœ‰ç±»å‹æç¤ºï¼ŒBug ç‡ä¸Šå‡äº†ã€‚</li>
<li>ä½ ä¸ºäº†çœå‡ ä¸ªå­—èŠ‚çš„å†…å­˜ï¼Œç”¨å„ç§é»‘é­”æ³•æ“ä½œå¯¹è±¡ï¼Œå¯¼è‡´åæ¥çš„äººæ ¹æœ¬ä¸æ•¢ç¢°ğŸ˜–ã€‚</li>
</ul>
<p><strong>è¿™ç§æ‰€è°“çš„æ€§èƒ½ä¼˜åŒ–ï¼Œå…¶å®æ˜¯ç¨‹åºå‘˜çš„è‡ªå—¨ã€‚</strong></p>
<p>å®ƒæ˜¯ç”¨<strong>å›¢é˜Ÿçš„ç»´æŠ¤æˆæœ¬</strong>ï¼Œå»æ¢å–<strong>æœºå™¨é‚£ä¸€ç¬é—´çš„å¿«æ„Ÿ</strong>ã€‚å®ƒä¸æ˜¯ä¼˜åŒ–ï¼Œå®ƒæ˜¯ç»™é¡¹ç›®åŸ‹é›·ã€‚</p>
<hr/>
<h4 data-id="heading-3"><strong>ä»€ä¹ˆæ ·çš„ä»£ç æ‰æ˜¯å¥½ä»£ç ï¼Ÿ</strong></h4>
<p>åæ¥ï¼Œæˆ‘ä»¬å°†é˜¿K çš„é‚£å¨ä»£ç  é€šè¿‡ chatGPT å…¨éƒ¨æ¨å€’é‡å†™ã€‚</p>
<p>1ï¸âƒ£ æƒé™å®šä¹‰ï¼ˆè¯­ä¹‰æ¸…æ™°ï¼‰</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// permissions.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">Permission</span> {
  <span class="hljs-variable constant_">READ</span> = <span class="hljs-string">'read'</span>,
  <span class="hljs-variable constant_">WRITE</span> = <span class="hljs-string">'write'</span>,
  <span class="hljs-variable constant_">EDIT</span> = <span class="hljs-string">'edit'</span>,
  <span class="hljs-variable constant_">DELETE</span> = <span class="hljs-string">'delete'</span>,
}
</code></pre>
<p>2ï¸âƒ£ ç”¨æˆ·æ¨¡å‹</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// user.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Permission</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./permissions'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">User</span> {
  <span class="hljs-attr">id</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">permissions</span>: <span class="hljs-title class_">Permission</span>[];
}

</code></pre>
<p>3ï¸âƒ£ æƒé™æ ¡éªŒå‡½æ•°ï¼ˆæ ¸å¿ƒï¼‰</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// auth.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Permission</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./permissions'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">User</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./user'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">hasPermission</span>(<span class="hljs-params">
  user: User,
  required: Permission
</span>): boolean {
  <span class="hljs-keyword">return</span> user.<span class="hljs-property">permissions</span>.<span class="hljs-title function_">includes</span>(required);
}

</code></pre>
<p>4ï¸âƒ£ æ‰¹é‡æƒé™æ ¡éªŒ</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">hasAllPermissions</span>(<span class="hljs-params">
  user: User,
  required: Permission[]
</span>): <span class="hljs-built_in">boolean</span> {
  <span class="hljs-keyword">return</span> required.<span class="hljs-title function_">every</span>(<span class="hljs-function"><span class="hljs-params">p</span> =&gt;</span> user.<span class="hljs-property">permissions</span>.<span class="hljs-title function_">includes</span>(p));
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">hasAnyPermission</span>(<span class="hljs-params">
  user: User,
  required: Permission[]
</span>): <span class="hljs-built_in">boolean</span> {
  <span class="hljs-keyword">return</span> required.<span class="hljs-title function_">some</span>(<span class="hljs-function"><span class="hljs-params">p</span> =&gt;</span> user.<span class="hljs-property">permissions</span>.<span class="hljs-title function_">includes</span>(p));
}

</code></pre>
<p>5ï¸âƒ£ åˆ¤æ–­æ–¹æ³•</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">if</span> (!<span class="hljs-title function_">hasPermission</span>(user, <span class="hljs-title class_">Permission</span>.<span class="hljs-property">DELETE</span>)) {
  <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'No permission to delete'</span>);
}
</code></pre>
<p>ç”¨å›äº†ç”¨æˆ·æƒé™ç»“æ„æ¸…æ™°å¯è§çš„ï¼Œæƒé™åˆ¤æ–­ï¼Œä¸€çœ¼å°±æ‡‚ã€‚ç”šè‡³éƒ½ä¸éœ€è¦æ³¨é‡ŠğŸ¤·â€â™‚ï¸</p>
<p>è™½ç„¶è·‘åˆ†æ…¢äº†é‚£ä¹ˆä¸€ä¸ç‚¹ï¼ˆç”¨æˆ·æ ¹æœ¬æ— æ„ŸçŸ¥ï¼‰ï¼Œä½†ä»»ä½•ä¸€ä¸ªæ–°æ¥çš„åŒäº‹ï¼Œåªè¦ 5 åˆ†é’Ÿå°±èƒ½çœ‹æ‡‚å¹¶ä¸Šæ‰‹ä¿®æ”¹ã€‚</p>
<p>è¿™ä»¶äº‹ç»™æˆ‘ç•™ä¸‹äº†æ·±åˆ»çš„æ•™è®­ï¼š</p>
<ol>
<li>
<p>ä»£ç æ˜¯å†™ç»™äººçœ‹çš„ï¼Œé¡ºä¾¿ç»™æœºå™¨è¿è¡Œã€‚</p>
<p>å¦‚æœä¸€æ®µä»£ç åªæœ‰ä½ ç°åœ¨èƒ½çœ‹æ‡‚ï¼Œé‚£å®ƒå°±æ˜¯åƒåœ¾ä»£ç ï¼›å¦‚æœä¸€æ®µä»£ç è¿ä½ ä¸€ä¸ªæœˆåéƒ½çœ‹ä¸æ‡‚ï¼Œé‚£å®ƒå°±æ˜¯æœ‰å®³ä»£ç ã€‚</p>
</li>
<li>
<p>ä¸è¦åœ¨éç“¶é¢ˆå¤„ç‚«æŠ€ã€‚</p>
<p>å¦‚æœé¡µé¢å¡é¡¿æ˜¯å› ä¸º DOM èŠ‚ç‚¹å¤ªå¤šï¼Œä½ å»ä¼˜åŒ– JS çš„å˜é‡èµ‹å€¼é€Ÿåº¦ï¼Œé‚£å°±æ˜¯éš”é´æ”ç—’ã€‚æ‰¾åˆ°çœŸæ­£çš„ç“¶é¢ˆï¼ˆNetwork, Layout, Paintï¼‰ï¼Œå†å¯¹ç—‡ä¸‹è¯ã€‚</p>
</li>
<li>
<p>å¯è¯»æ€§ &gt; å·§æŠ€ã€‚</p>
<p>ç®€å•çš„é€»è¾‘ï¼Œæ˜¯å¯¹åŒäº‹æœ€å¤§çš„å–„æ„ã€‚</p>
</li>
</ol>
<hr/>
<p>é˜¿K èµ°çš„æ—¶å€™ï¼Œè¿˜æ˜¯è§‰å¾—è‡ªå·±æ€€æ‰ä¸é‡ï¼Œè§‰å¾—è¿™å®¶å…¬å¸é…ä¸ä¸Šä»–çš„æŠ€æœ¯ğŸ¤£ã€‚</p>
<p>æˆ‘ç¥ä»–æœªæ¥å‰ç¨‹ä¼¼é”¦ã€‚</p>
<p>ä½†æˆ‘æ›´å¸Œæœ›çœ‹åˆ°è¿™ç¯‡æ–‡ç« çš„ä½ ï¼Œä¸‹æ¬¡åœ¨æƒ³è¦æŒ‰ä¸‹é”®ç›˜å†™ä¸€æ®µç»å¦™çš„ã€åªæœ‰ä½ çœ‹æ‡‚çš„å•è¡Œä»£ç æ—¶ï¼Œèƒ½åœä¸‹æ¥æƒ³ä¸€æƒ³ï¼š</p>
<p><strong>å¦‚æœæ˜å¤©æˆ‘ç¦»èŒäº†ï¼Œæ¥æ‰‹çš„äººä¼šä¸ä¼šéª‚å¨˜ï¼Ÿ</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/946390729f864eefab5bc9c87661f25a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRXJwYW5PbWVy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766981014&amp;x-signature=ZW21Xm6N1gqLt9uV5DQARa2U1XQ%3D" alt="ä½ æ˜¯è„‘æ®‹ä¹ˆ.gif" loading="lazy"/></p>
<p><strong>æ¯•ç«Ÿï¼Œæˆ‘ä»¬ä¸æƒ³è®©äº²å¦ˆéƒ½ä¸è®¤è¯†ä»£ç ï¼Œæˆ‘ä»¬æ›´ä¸æƒ³è®©åŒäº‹åœ¨é‚£éª‚å¨˜ã€‚</strong></p>
<p>è°¢è°¢å¤§å®¶ğŸ‘</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[canvas.rotate(rotation); åˆ°åº•æ˜¯å¾€å“ªä¸ªæ–¹å‘è½¬åŠ¨]]></title>    <link>https://juejin.cn/post/7586509410567733289</link>    <guid>https://juejin.cn/post/7586509410567733289</guid>    <pubDate>2025-12-22T04:09:03.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7586509410567733289" data-draft-id="7586136543954780198" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content=" canvas.rotate(rotation); åˆ°åº•æ˜¯å¾€å“ªä¸ªæ–¹å‘è½¬åŠ¨"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-22T04:09:03.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç«æŸ´å°±æ˜¯æˆ‘"/> <meta itemprop="url" content="https://juejin.cn/user/272334614705575"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
             canvas.rotate(rotation); åˆ°åº•æ˜¯å¾€å“ªä¸ªæ–¹å‘è½¬åŠ¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/272334614705575/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç«æŸ´å°±æ˜¯æˆ‘
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-22T04:09:03.000Z" title="Mon Dec 22 2025 04:09:03 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5e1d157c31b243bca94a14ccdfb24ab6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54Gr5p-05bCx5piv5oiR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766981343&amp;x-signature=WES6egmMg0OPkJR7b519kOgFgCQ%3D" alt="image.png" width="30%" loading="lazy"/>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/748f551b923f4cbea15db69632e5fc7f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54Gr5p-05bCx5piv5oiR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766981343&amp;x-signature=mipmL62Xy%2BAOlz%2FwEqyL0mnqnoQ%3D" alt="image.png" width="30%" loading="lazy"/>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d2109f15d2b44b65835f654bc8509dc1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54Gr5p-05bCx5piv5oiR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766981343&amp;x-signature=TFCV4NKDU9CCJw91ihwMfzvy1Bs%3D" alt="image.png" width="30%" loading="lazy"/>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/00456e3c3c054db18633506fe29b2ba4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54Gr5p-05bCx5piv5oiR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766981343&amp;x-signature=ynsvmkj7GID6i542CRSgfz3CCGw%3D" alt="image.png" width="30%" loading="lazy"/>
<p>ä¸Šé¢çš„å››å¼ å›¾ å°±æ˜¯x yè½´åœ¨ä¸åŒæ–¹å‘çš„æ—¶å€™ æ—‹è½¬æ–¹å‘çš„ç¤ºæ„å›¾ã€‚æˆ‘ä»¬å¯ä»¥å‘ç°éƒ½æ˜¯xè½´å‘yè½´æ–¹å‘æ—‹è½¬ã€‚</p>
<p>è¿™ä¸ªæœ‰ä»€ä¹ˆç”¨ï¼Ÿä¸»è¦å°±æ˜¯ä¸ºäº†çº æ­£æœ‰æ—¶å€™ æˆ‘ä»¬è®¤ä¸ºæ—‹è½¬æ€»åº”è¯¥æ˜¯é¡ºæ—¶é’ˆçš„é”™è§‰ã€‚æ¯”å¦‚ç¬¬ä¸€å¼ å›¾æ˜¯æ­£å¸¸çš„ç”»å¸ƒçš„åæ ‡ç³»,æˆ‘ä»¬æ­£å¸¸æ—‹è½¬ç”»å¸ƒä¹Ÿæ˜¯æŒ‰è¿™ä¸ªæ–¹å‘æ—‹è½¬ï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬æ‰§è¡Œäº† scale(1,-1),ç”»å¸ƒå°±ä¼šå˜æˆç¬¬ä¸‰å¼ å›¾ï¼Œå†æ—‹è½¬ pi/4ï¼Œå°±æ˜¯åæ–¹å‘æ—‹è½¬äº†ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3f47c39a65e647369340c126e22c0ee1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54Gr5p-05bCx5piv5oiR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766981343&amp;x-signature=FiIZoFfkG6MF7kQ4Z2%2FtXWadJtw%3D" alt="image.png" loading="lazy"/></p>
<p>è¿™æ˜¯ä¸€ä¸ªæ—‹è½¬äº†æŒ‡å®šè§’åº¦çš„çŸ©å½¢ï¼Œæˆ‘ç°åœ¨æƒ³ç»˜åˆ¶ä¸€ä¸ªè·Ÿè¿™ä¸ªçŸ©å½¢åœ¨æ°´å¹³æ–¹å‘å¯¹ç§°çš„å›¾å½¢ï¼Œåº”è¯¥æ€ä¹ˆç”»?ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Rediså®æˆ˜ç²¾è¦ï¼š5ç§é«˜é¢‘ä½¿ç”¨åœºæ™¯ä¸æ€§èƒ½ä¼˜åŒ–å…¨è§£æï½œå¾—ç‰©æŠ€æœ¯]]></title>    <link>https://juejin.cn/post/7586237019987902464</link>    <guid>https://juejin.cn/post/7586237019987902464</guid>    <pubDate>2025-12-22T04:20:09.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7586237019987902464" data-draft-id="7586208617603694626" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Rediså®æˆ˜ç²¾è¦ï¼š5ç§é«˜é¢‘ä½¿ç”¨åœºæ™¯ä¸æ€§èƒ½ä¼˜åŒ–å…¨è§£æï½œå¾—ç‰©æŠ€æœ¯"/> <meta itemprop="keywords" content="åç«¯,å‰ç«¯,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-22T04:20:09.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿æ©™çš„ç™¾å®ç®±"/> <meta itemprop="url" content="https://juejin.cn/user/1638743356481367"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Rediså®æˆ˜ç²¾è¦ï¼š5ç§é«˜é¢‘ä½¿ç”¨åœºæ™¯ä¸æ€§èƒ½ä¼˜åŒ–å…¨è§£æï½œå¾—ç‰©æŠ€æœ¯
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1638743356481367/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿æ©™çš„ç™¾å®ç®±
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-22T04:20:09.000Z" title="Mon Dec 22 2025 04:20:09 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>Rediså®æˆ˜ç²¾è¦ï¼š5ç§é«˜é¢‘ä½¿ç”¨åœºæ™¯ä¸æ€§èƒ½ä¼˜åŒ–å…¨è§£æï½œå¾—ç‰©æŠ€æœ¯</strong></h2>
<h2 data-id="heading-1">å¼•è¨€</h2>
<p>Redisä½œä¸ºä¸€æ¬¾é«˜æ€§èƒ½çš„å†…å­˜æ•°æ®åº“ï¼Œå·²æˆä¸ºç°ä»£åˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„æ ¸å¿ƒç»„ä»¶ã€‚å…¶ä¸°å¯Œçš„æ•°æ®ç»“æ„ã€è¶…é«˜çš„ååé‡ä»¥åŠçµæ´»çš„æ‰©å±•èƒ½åŠ›ï¼Œä½¿å…¶åœ¨ç¼“å­˜ã€ä¼šè¯ç®¡ç†ã€æ’è¡Œæ¦œç­‰åœºæ™¯ä¸­è¡¨ç°å‡ºè‰²ã€‚ç„¶è€Œï¼Œåœ¨å®é™…åº”ç”¨ä¸­ï¼Œè®¸å¤šå¼€å‘è€…ä»…åœç•™åœ¨åŸºç¡€ä½¿ç”¨å±‚é¢ï¼Œæœªèƒ½å……åˆ†å‘æŒ¥Redisçš„æ½œåŠ›ã€‚æœ¬æ–‡å°†æ·±å…¥å‰–æRedisçš„5ç§é«˜é¢‘ä½¿ç”¨åœºæ™¯ï¼Œå¹¶ç»“åˆå¾—ç‰©æŠ€æœ¯çš„å®æˆ˜ç»éªŒï¼Œä»æ¶æ„è®¾è®¡åˆ°æ€§èƒ½ä¼˜åŒ–è¿›è¡Œå…¨é¢è§£æã€‚</p>
<hr/>
<h2 data-id="heading-2">ä¸€ã€Redisæ ¸å¿ƒä¼˜åŠ¿å›é¡¾</h2>
<p>åœ¨æ·±å…¥å…·ä½“åœºæ™¯ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆç®€è¦å›é¡¾Redisçš„æ ¸å¿ƒç‰¹æ€§ï¼š</p>
<ol>
<li><strong>äºšæ¯«ç§’çº§å“åº”</strong>ï¼šå†…å­˜å­˜å‚¨+å•çº¿ç¨‹æ¨¡å‹å¸¦æ¥æè‡´æ€§èƒ½</li>
<li><strong>ä¸°å¯Œçš„æ•°æ®ç»“æ„</strong>ï¼šString/Hash/List/Set/ZSetç­‰å¤šæ ·åŒ–é€‰æ‹©</li>
<li><strong>æŒä¹…åŒ–æœºåˆ¶</strong>ï¼šRDBå¿«ç…§ä¸AOFæ—¥å¿—åŒé‡ä¿éšœ</li>
<li><strong>é«˜å¯ç”¨æ¶æ„</strong>ï¼šSentinelå’ŒClusteræ–¹æ¡ˆæˆç†Ÿ</li>
<li><strong>åŸå­æ“ä½œ</strong>ï¼šLuaè„šæœ¬æ”¯æŒå¤æ‚äº‹åŠ¡</li>
</ol>
<p>è¿™äº›ç‰¹æ€§ä½¿Redisèƒ½åœ¨ç‰¹å®šåœºæ™¯ä¸‹æ›¿ä»£ä¼ ç»Ÿå…³ç³»å‹æ•°æ®åº“çš„éƒ¨åˆ†åŠŸèƒ½ã€‚</p>
<hr/>
<h2 data-id="heading-3">äºŒã€äº”å¤§é«˜é¢‘ä½¿ç”¨åœºæ™¯æ·±åº¦è§£æ</h2>
<h3 data-id="heading-4">åœºæ™¯1ï¼šç¼“å­˜åŠ é€Ÿâ€”â€”ç”µå•†å•†å“è¯¦æƒ…é¡µå®è·µ</h3>
<h4 data-id="heading-5">å…¸å‹æ¶æ„</h4>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-bullet">1.</span> å®¢æˆ·ç«¯è¯·æ±‚ â†’ Nginx â†’ 
<span class="hljs-bullet">2.</span> æŸ¥è¯¢Redis â†’ 
<span class="hljs-bullet">3.</span> æœªå‘½ä¸­æ—¶å›æºæ•°æ®åº“ â†’
<span class="hljs-bullet">4.</span> å¼‚æ­¥æ›´æ–°ç¼“å­˜ï¼ˆCache-Asideæ¨¡å¼ï¼‰
</code></pre>
<h4 data-id="heading-6">å¾—ç‰©æŠ€æœ¯å®è·µï¼š</h4>
<ul>
<li><strong>å¤šçº§Keyè®¾è®¡</strong>ï¼š<code>product:{id}:base_info</code> + <code>product:{id}:ext_info</code></li>
<li><strong>çƒ­ç‚¹æ¢æµ‹</strong>ï¼šé€šè¿‡<code>redis-cli --hotkeys</code>è¯†åˆ«å¹¶ç‰¹æ®Šå¤„ç†çƒ­Key</li>
<li><strong>ä¸€è‡´æ€§ä¿éšœ</strong>ï¼š
<pre><code class="hljs language-lua" lang="lua"><span class="hljs-comment">-- Luaè„šæœ¬ä¿è¯åŸå­æ€§åˆ é™¤</span>
<span class="hljs-keyword">if</span> redis.call(<span class="hljs-string">"get"</span>,KEYS[<span class="hljs-number">1</span>]) == ARGV[<span class="hljs-number">1</span>] <span class="hljs-keyword">then</span>
    <span class="hljs-keyword">return</span> redis.call(<span class="hljs-string">"del"</span>,KEYS[<span class="hljs-number">1</span>])
<span class="hljs-keyword">end</span>
</code></pre>
</li>
</ul>
<h4 data-id="heading-7">æ€§èƒ½ä¼˜åŒ–ç‚¹ï¼š</h4>
<ul>
<li>Valueå¤§å°æ§åˆ¶åœ¨10KBä»¥å†…ï¼ˆé¿å…ç½‘ç»œä¼ è¾“ç“¶é¢ˆï¼‰</li>
<li>Pipelineæ‰¹é‡è¯»å–é™ä½RTTå½±å“</li>
<li>TTLé‡‡ç”¨éšæœºè¿‡æœŸé˜²æ­¢ç¼“å­˜é›ªå´©</li>
</ul>
<h3 data-id="heading-8">åœºæ™¯2ï¼šåˆ†å¸ƒå¼é”â€”â€”ç§’æ€ç³»ç»Ÿå®ç°æ–¹æ¡ˆ</h3>
<h4 data-id="heading-9">Redlockç®—æ³•è¦ç‚¹ï¼š</h4>
<ol>
<li>è·å–å½“å‰æ¯«ç§’æ—¶é—´æˆ³T1</li>
<li>é¡ºåºå‘Nä¸ªèŠ‚ç‚¹è¯·æ±‚åŠ é”ï¼ˆSET key random_value NX PXï¼‰</li>
<li>å½“è·å¾—(N/2)+1ä¸ªæˆåŠŸå“åº”æ—¶è®¡ç®—è€—æ—¶T2-T1</li>
<li>T2-T1 &lt; é”æœ‰æ•ˆæœŸæ—¶æ‰è§†ä¸ºæˆåŠŸ</li>
</ol>
<h4 data-id="heading-10">Javaå®ç°ç¤ºä¾‹ï¼š</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">tryLock</span><span class="hljs-params">(JedisPool[] pools, String lockName, <span class="hljs-type">long</span> expireTime)</span> {
    <span class="hljs-type">String</span> <span class="hljs-variable">identifier</span> <span class="hljs-operator">=</span> UUID.randomUUID().toString();
    <span class="hljs-type">int</span> <span class="hljs-variable">lockedCount</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
    
    <span class="hljs-keyword">for</span> (JedisPool pool : pools) {
        <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> pool.getResource()) {
            <span class="hljs-keyword">if</span> (<span class="hljs-string">"OK"</span>.equals(jedis.set(lockName, identifier, <span class="hljs-string">"NX"</span>, <span class="hljs-string">"PX"</span>, expireTime))) {
                lockedCount++;
            }
        }
    }
    <span class="hljs-keyword">return</span> lockedCount &gt;= pools.length/<span class="hljs-number">2</span> + <span class="hljs-number">1</span>;
}
</code></pre>
<h4 data-id="heading-11">CAPæƒè¡¡å»ºè®®ï¼š</h4>
<ul>
<li>CPç³»ç»Ÿé¦–é€‰Redlockï¼ˆå¦‚åº“å­˜æ‰£å‡ï¼‰</li>
<li>APç³»ç»Ÿå¯è€ƒè™‘ä¹è§‚é”ï¼ˆå¦‚ç‚¹èµè®¡æ•°ï¼‰</li>
</ul>
<h3 data-id="heading-12">åœºæ™¯3ï¼šå®æ—¶æ’è¡Œæ¦œâ€”â€”è¿åŠ¨ç¤¾åŒºæ¦œå•è®¾è®¡</h3>
<h4 data-id="heading-13">ZSetæœ€ä½³å®è·µï¼š</h4>
<pre><code class="hljs language-bash" lang="bash">ZADD leaderboard timestamp_score user_id   <span class="hljs-comment"># timestampä¿è¯åŒåˆ†æœ‰åºæ€§</span>
ZREVRANGE leaderboard 0 topN WITHSCORES     <span class="hljs-comment"># TOPNæŸ¥è¯¢</span>
ZSCORE leaderboard user_id                  <span class="hljs-comment">#ä¸ªäººæ’åæŸ¥è¯¢  </span>
</code></pre>
<h4 data-id="heading-14">GCå‹åŠ›ä¼˜åŒ–ï¼š</h4>
<p>å¯¹äºæµ·é‡ç”¨æˆ·ï¼ˆå¦‚&gt;1000ä¸‡ï¼‰ï¼š</p>
<ol>
<li>Shardingç­–ç•¥ï¼šæŒ‰uidå“ˆå¸Œåˆ†ç‰‡å­˜å‚¨</li>
<li>Cold-Hotåˆ†ç¦»ï¼šæ´»è·ƒç”¨æˆ·å•ç‹¬ZSetå­˜å‚¨</li>
</ol>
<h3 data-id="heading-15">åœºæ™¯4ï¼šæ¶ˆæ¯é˜Ÿåˆ—â€”â€”ç‰©æµçŠ¶æ€å˜æ›´é€šçŸ¥</h3>
<h4 data-id="heading-16">Streamæ–¹æ¡ˆå¯¹æ¯”ä¼ ç»ŸMQï¼š</h4>






























<table><thead><tr><th>ç‰¹æ€§</th><th>Redis Stream</th><th>Kafka</th></tr></thead><tbody><tr><td>å»¶è¿Ÿ</td><td>&lt;10ms</td><td>~50ms</td></tr><tr><td>æŒä¹…åŒ–</td><td>AOF+RDB</td><td>Segmentæ–‡ä»¶</td></tr><tr><td>æ¶ˆè´¹ç»„</td><td>â‰¥6.xæ”¯æŒ</td><td>åŸç”Ÿæ”¯æŒ</td></tr><tr><td>å›æº¯æ¶ˆè´¹</td><td>XREADæ”¯æŒ</td><td>åŸç”Ÿæ”¯æŒ</td></tr></tbody></table>
<h4 data-id="heading-17">ACKæœºåˆ¶å®ç°ï¼š</h4>
<pre><code class="hljs language-lua" lang="lua"><span class="hljs-comment">-- Luaè„šæœ¬å¤„ç†æ¶ˆè´¹ç¡®è®¤å’Œé‡è¯•é˜Ÿåˆ—  </span>
<span class="hljs-keyword">local</span> msg = redis.call(<span class="hljs-string">"XREADGROUP"</span>, <span class="hljs-string">"GROUP"</span>, ARGV[<span class="hljs-number">1</span>], ARGV[<span class="hljs-number">2</span>], <span class="hljs-string">"COUNT"</span>, <span class="hljs-string">"1"</span>, <span class="hljs-string">"STREAMS"</span>, KEYS[<span class="hljs-number">1</span>], <span class="hljs-string">"&gt;"</span>)
<span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> msg <span class="hljs-keyword">then</span> <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span> <span class="hljs-keyword">end</span>
    
redis.call(<span class="hljs-string">"XACK"</span>, KEYS[<span class="hljs-number">1</span>], ARGV[<span class="hljs-number">1</span>], msg[<span class="hljs-number">0</span>])
<span class="hljs-keyword">return</span> msg 
</code></pre>
<h3 data-id="heading-18">åœºæ™¯5ï¼šç¤¾äº¤å…³ç³»å›¾è°±â€”â€”å…³æ³¨ç²‰ä¸åˆ—è¡¨å­˜å‚¨</h3>
<h4 data-id="heading-19">Hybridå­˜å‚¨æ–¹æ¡ˆï¼š</h4>
<pre><code class="hljs language-markdown" lang="markdown">String:  å­˜å‚¨ç”¨æˆ·åŸºç¡€ä¿¡æ¯ï¼ˆJSONæ ¼å¼ï¼‰
Set:     å­˜åŒå‘å…³ç³»(userA<span class="hljs-emphasis">_followers/userA_</span>following)
Hash:    å­˜å…³ç³»å…ƒæ•°æ®(å…³æ³¨æ—¶é—´ç­‰)
</code></pre>
<h4 data-id="heading-20">Gearsæ¨¡å—åº”ç”¨ï¼š</h4>
<p>åˆ©ç”¨RedisGearså®ç°å¼‚æ­¥å¤„ç†ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># Pythonå‡½æ•°æ³¨å†Œä¸ºåå°ä»»åŠ¡  </span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">process_new_follower</span>(<span class="hljs-params">record</span>):
    execute(<span class="hljs-string">'HINCRBY'</span>, <span class="hljs-string">'user:%s'</span>%record[<span class="hljs-string">'key'</span>], <span class="hljs-string">'follower_count'</span>, <span class="hljs-number">1</span>)

gb.register(<span class="hljs-string">'*'</span>, event_types=[<span class="hljs-string">'hset'</span>], callback=process_new_follower)
</code></pre>
<hr/>
<p>##ä¸‰ã€é«˜çº§æ€§èƒ½ä¼˜åŒ–ç­–ç•¥</p>
<p>###å†…å­˜ç®¡ç†ä¸‰æ¿æ–§ï¼š</p>
<p>1.<strong>jemallocè°ƒå‚</strong></p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">ä¿®æ”¹redis.conf:</span>
<span class="hljs-section">jemalloc_bg_thread: yes  </span>
<span class="hljs-section">arena_max:16 # CPUæ ¸å¿ƒæ•°Ã—4 </span>
</code></pre>
<p>2.<strong>ä¸»åŠ¨ç¢ç‰‡æ•´ç†</strong></p>
<pre><code class="hljs language-arduino" lang="arduino">#è¿è¡Œæ—¶é…ç½®åŠ¨æ€è°ƒæ•´  
config set activedefrag yes  
config set active-defrag-threshold-lowerÂ <span class="hljs-number">20</span>Â 
</code></pre>
<p>3.<strong>Valueå‹ç¼©</strong>
å¯¹äºè¶…è¿‡8KBçš„Valueå¯ç”¨LZFå‹ç¼©:</p>
<pre><code class="hljs language-arduino" lang="arduino">config set hash-max-ziplist-valueÂ <span class="hljs-number">8000</span>Â 
</code></pre>
<p>###ç½‘ç»œä¼˜åŒ–Checklistï¼š</p>
<p>âœ“ Linuxå†…æ ¸å‚æ•°è°ƒä¼˜:</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">net.core.somaxconn</span> =Â <span class="hljs-number">2048</span>  
<span class="hljs-attr">vm.swappiness</span>=<span class="hljs-number">10</span>  
</code></pre>
<p>âœ“ TCPå¿«é€Ÿæ‰“å¼€:</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">echo</span>Â 3 &gt; /proc/sys/net/ipv4/tcp_fastopenÂ 
</code></pre>
<p>âœ“ Clientè¿æ¥æ± é…ç½®:
æœ€å¤§è¿æ¥æ•°=QPSÃ—å¹³å‡RT(ms)/1000 Ã—Â å†—ä½™ç³»æ•°(å»ºè®®â‰¥3)</p>
<hr/>
<p>##å››ã€æ•…éšœæ’æŸ¥å·¥å…·ç®±</p>
<p>###æ…¢æŸ¥è¯¢åˆ†æä¸‰æ­¥æ³•:</p>
<p>Stepâ‘ å¼€å¯ç›‘æ§:</p>
<pre><code class="hljs language-lua" lang="lua">slowlog-<span class="hljs-built_in">log</span>-slower-thanÂ <span class="hljs-number">5000</span> #å¾®ç§’å•ä½  
slowlog-<span class="hljs-built_in">max</span>-<span class="hljs-built_in">len</span>Â <span class="hljs-number">1024</span>  
</code></pre>
<p>Stepâ‘¡å…³é”®æŒ‡æ ‡å…³è”åˆ†æ:</p>
<pre><code class="hljs language-bash" lang="bash">redis-cli --latency-history -i5 Â  <span class="hljs-comment">#æ¯5ç§’é‡‡æ ·ä¸€æ¬¡P99å»¶è¿Ÿ   </span>
info commandstats Â  Â  Â  Â  Â  Â  Â    <span class="hljs-comment">#å‘½ä»¤è°ƒç”¨ç»Ÿè®¡TOP20 Â  </span>
</code></pre>
<p>Stepâ‘¢çƒ­ç‚¹Keyå®šä½:</p>
<pre><code class="hljs language-perl" lang="perl">redis-cli --bigkeys --memkeys Â  Â  <span class="hljs-comment">#å†…å­˜å ç”¨TOPåˆ†æ    </span>
monitor | <span class="hljs-keyword">grep</span> -E <span class="hljs-string">'GETSET|HSET'</span>Â   <span class="hljs-comment">#å®æ—¶æµé‡è§‚æµ‹ Â  </span>
</code></pre>
<hr/>
<p>##äº”ã€æ€»ç»“å±•æœ›</p>
<p>éšç€Redis7æ¨å‡ºFunctionæ•°æ®ç»“æ„å’Œå¤šçº¿ç¨‹IOç­‰æ–°ç‰¹æ€§ï¼Œå…¶åœ¨å®æ—¶è®¡ç®—é¢†åŸŸçš„æ½œåŠ›å°†è¿›ä¸€æ­¥é‡Šæ”¾ã€‚å»ºè®®å¼€å‘è€…é‡ç‚¹å…³æ³¨ä»¥ä¸‹æ–¹å‘ï¼š</p>
<p>â€¢ RedisGraphåœ¨å›¾æ•°æ®æŸ¥è¯¢ä¸­çš„è¡¨ç°æå‡<br/>
â€¢ Serverlessæ¨¡å¼ä¸‹è‡ªåŠ¨æ‰©ç¼©å®¹æ–¹æ¡ˆ<br/>
â€¢ WASMè¿è¡Œæ—¶å¯¹Luaè„šæœ¬çš„æ›¿ä»£å¯èƒ½æ€§</p>
<p>é€šè¿‡æœ¬æ–‡çš„åœºæ™¯åˆ†æå’Œä¼˜åŒ–å»ºè®®ï¼Œå¸Œæœ›èƒ½å¸®åŠ©å¼€å‘è€…åœ¨å®é™…ä¸šåŠ¡ä¸­æ„å»ºæ›´é«˜æ€§èƒ½çš„Redisä½“ç³»æ¶æ„ã€‚è®°ä½ï¼š"æ²¡æœ‰é“¶å¼¹"ï¼Œæ‰€æœ‰æŠ€æœ¯é€‰å‹éƒ½åº”åŸºäºçœŸå®ä¸šåŠ¡è¯‰æ±‚å’Œæ•°æ®ç‰¹å¾åšå‡ºæƒè¡¡å†³ç­–ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[iOS è¯ä¹¦å¦‚ä½•åˆ›å»ºï¼Œä»èƒ½ç”Ÿæˆåˆ°èƒ½é•¿æœŸä½¿ç”¨]]></title>    <link>https://juejin.cn/post/7586182451598065710</link>    <guid>https://juejin.cn/post/7586182451598065710</guid>    <pubDate>2025-12-22T04:20:05.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7586182451598065710" data-draft-id="7586182451598049326" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="iOS è¯ä¹¦å¦‚ä½•åˆ›å»ºï¼Œä»èƒ½ç”Ÿæˆåˆ°èƒ½é•¿æœŸä½¿ç”¨"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-22T04:20:05.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç–¯ç‹‚çš„ç¨‹åºçŒ´"/> <meta itemprop="url" content="https://juejin.cn/user/2760245749234147"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            iOS è¯ä¹¦å¦‚ä½•åˆ›å»ºï¼Œä»èƒ½ç”Ÿæˆåˆ°èƒ½é•¿æœŸä½¿ç”¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2760245749234147/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç–¯ç‹‚çš„ç¨‹åºçŒ´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-22T04:20:05.000Z" title="Mon Dec 22 2025 04:20:05 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ iOS å¼€å‘ä¸­ï¼Œè¯ä¹¦å‡ ä¹æ˜¯æ‰€æœ‰æµç¨‹çš„èµ·ç‚¹ã€‚
ä½†åœ¨å®é™…é¡¹ç›®é‡Œï¼Œè¯ä¹¦å¾€å¾€ä¸æ˜¯â€œä¸ä¼šåˆ›å»ºâ€ï¼Œè€Œæ˜¯ <strong>åˆ›å»ºæ–¹å¼å¹¶ä¸é€‚åˆå½“å‰çš„å·¥ç¨‹çŠ¶æ€</strong>ã€‚</p>
<p>æˆ‘è§è¿‡ä¸å°‘é¡¹ç›®ï¼Œè¯ä¹¦ç”Ÿæˆæ—¶ä¸€åˆ‡é¡ºåˆ©ï¼Œå´åœ¨åç»­é˜¶æ®µåå¤å‡ºé—®é¢˜ï¼š
æ„å»ºæœºæ— æ³•ä½¿ç”¨ã€æˆå‘˜ä¹‹é—´æ— æ³•å¤ç”¨ã€è¯ä¹¦åˆ°æœŸæ²¡äººæ³¨æ„ï¼Œç”šè‡³åœ¨ä¸Šæ¶å½“å¤©æ‰å‘ç°ç§é’¥åªå­˜åœ¨äºæŸä¸€å° Mac ä¸Šã€‚</p>
<p>è¿™äº›é—®é¢˜å¹¶ä¸æ˜¯æŠ€æœ¯éš¾åº¦é€ æˆçš„ï¼Œè€Œæ˜¯ <strong>è¯ä¹¦åˆ›å»ºæ–¹å¼ä¸å·¥ç¨‹åä½œæ–¹å¼ä¸åŒ¹é…</strong>ã€‚</p>
<hr/>
<h2 data-id="heading-0"><strong>è¯ä¹¦çš„æœ¬è´¨ï¼Œå¹¶ä¸æ˜¯ä¸€ä¸ªæ­¥éª¤ï¼Œè€Œæ˜¯ä¸€ä¸ªå·¥ç¨‹èµ„æº</strong></h2>
<p>åœ¨å®˜æ–¹æ–‡æ¡£é‡Œï¼Œè¯ä¹¦é€šå¸¸è¢«æè¿°ä¸ºä¸€æ¬¡æ€§çš„é…ç½®ã€‚ä½†åœ¨çœŸå®é¡¹ç›®ä¸­ï¼Œè¯ä¹¦æ›´åƒä¸€ç§é•¿æœŸå­˜åœ¨çš„å·¥ç¨‹èµ„æºï¼š</p>
<ul>
<li>ä¼šè¢«æ„å»ºç³»ç»Ÿåå¤ä½¿ç”¨</li>
<li>ä¼šè¢«å¤šä¸ªåº”ç”¨å…±äº«</li>
<li>ä¼šè·¨è®¾å¤‡ã€è·¨äººå‘˜æµè½¬</li>
<li>ä¼šåœ¨ä¸€å¹´åè¿‡æœŸ</li>
</ul>
<p>å¦‚æœè¯ä¹¦åœ¨åˆ›å»ºä¹‹åˆå°±è¢«ç»‘å®šåœ¨æŸä¸€å° Mac æˆ–æŸä¸€ä¸ªäººèº«ä¸Šï¼Œåç»­é—®é¢˜å‡ ä¹æ˜¯å¿…ç„¶çš„ã€‚</p>
<hr/>
<h2 data-id="heading-1"><strong>å¸¸è§çš„å‡ ç§è¯ä¹¦åˆ›å»ºæ–¹å¼ï¼Œå„è‡ªéƒ½æœ‰è¾¹ç•Œ</strong></h2>
<p>åœ¨é¡¹ç›®ä¸­ï¼Œæˆ‘æ¥è§¦è¿‡å‡ ç§å¸¸è§çš„è¯ä¹¦åˆ›å»ºè·¯å¾„ï¼š</p>
<ul>
<li><strong>Xcode è‡ªåŠ¨ç®¡ç†</strong>
é€‚åˆå•äººå¼€å‘æˆ–åŸå‹é˜¶æ®µï¼Œä½†è¯ä¹¦å’Œç§é’¥é«˜åº¦ä¾èµ–é’¥åŒ™ä¸²ï¼Œè¿ç§»æˆæœ¬é«˜ã€‚</li>
<li><strong>Apple Developer åå° + Keychain</strong>
å¯æ§æ€§æ›´å¼ºï¼Œä½†æ“ä½œæ­¥éª¤ç¹çï¼Œå¯¹æ–°æˆå‘˜ä¸å‹å¥½ã€‚</li>
<li><strong>Fastlane match</strong>
é€‚åˆæˆç†Ÿ CI å›¢é˜Ÿï¼Œä½†å¯¹æµç¨‹ç†è§£è¦æ±‚è¾ƒé«˜ï¼Œä¸€æ—¦å‡ºé—®é¢˜æ’æŸ¥æˆæœ¬ä¸ä½ã€‚</li>
</ul>
<p>è¿™äº›æ–¹å¼æœ¬èº«æ²¡æœ‰é—®é¢˜ï¼Œé—®é¢˜åœ¨äºï¼š
å½“é¡¹ç›®æˆå‘˜ä¸å…¨ä½¿ç”¨ macOSï¼Œæˆ–è€…æ„å»ºã€å‘å¸ƒèŠ‚ç‚¹å¼€å§‹æ‹†åˆ†æ—¶ï¼Œè¯ä¹¦å°±éœ€è¦ä¸€ç§ <strong>æ›´ä¸­æ€§çš„ç®¡ç†æ–¹å¼</strong>ã€‚</p>
<hr/>
<h2 data-id="heading-2"><strong>ä¸ºä»€ä¹ˆåœ¨ä¸€äº›é¡¹ç›®ä¸­ä¼šå¼•å…¥ Appuploader åˆ›å»ºè¯ä¹¦</strong></h2>
<p>åœ¨éƒ¨åˆ†è·¨å¹³å°æˆ– CI é©±åŠ¨çš„é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬å¼€å§‹ä½¿ç”¨ <strong>å¼€å¿ƒä¸Šæ¶ï¼ˆAppuploaderï¼‰</strong> æ¥åˆ›å»ºå’Œç®¡ç† iOS è¯ä¹¦ï¼Œå¹¶ä¸æ˜¯ä¸ºäº†æ›¿ä»£å®˜æ–¹æµç¨‹ï¼Œè€Œæ˜¯ä¸ºäº†æ»¡è¶³å‡ ä¸ªç°å®éœ€æ±‚ï¼š</p>
<ul>
<li>ä¸ä¾èµ– Mac æˆ–é’¥åŒ™ä¸²</li>
<li>è¯ä¹¦æ–‡ä»¶å¯ä»¥ç›´æ¥è½åœ°ä¿å­˜</li>
<li>åŒä¸€è¯ä¹¦å¯åœ¨å¤šå°æœºå™¨ä¸Šä½¿ç”¨</li>
<li>è¯ä¹¦çŠ¶æ€æ›´å®¹æ˜“è¢«ç¡®è®¤å’Œå¤æŸ¥</li>
</ul>
<p>å°¤å…¶åœ¨ Windows / Linux æˆå‘˜å‚ä¸å‘å¸ƒçš„é¡¹ç›®ä¸­ï¼Œè¿™ç§æ–¹å¼å¯ä»¥æ˜¾è‘—é™ä½æ²Ÿé€šå’Œè¿ç§»æˆæœ¬ã€‚</p>
<hr/>
<h2 data-id="heading-3"><strong>å¼€å‘è¯ä¹¦ä¸å‘å¸ƒè¯ä¹¦ï¼Œåœ¨å·¥ç¨‹é‡Œçš„è§’è‰²å·®å¼‚</strong></h2>
<p>åœ¨å®é™…å·¥ç¨‹ä¸­ï¼ŒåŒºåˆ†è¯ä¹¦ç±»å‹éå¸¸é‡è¦ï¼Œä½†å¾ˆå¤šé—®é¢˜å¹¶ä¸æ˜¯â€œé€‰é”™ç±»å‹â€ï¼Œè€Œæ˜¯ <strong>ä½¿ç”¨åœºæ™¯æ··æ·†</strong>ã€‚</p>
<ul>
<li><strong>å¼€å‘è¯ä¹¦ï¼ˆiOS App Development / Apple Developmentï¼‰</strong>
æ›´é€‚åˆæœ¬åœ°è°ƒè¯•ã€æµ‹è¯•è®¾å¤‡å®‰è£…ï¼Œç”Ÿå‘½å‘¨æœŸçŸ­ï¼Œå˜åŠ¨é¢‘ç¹ã€‚</li>
<li><strong>å‘å¸ƒè¯ä¹¦ï¼ˆiOS Distributionï¼‰</strong>
ç›´æ¥å…³ç³»åˆ° App Store ä¸Šä¼ ï¼Œåº”å°½é‡ä¿æŒç¨³å®šã€å¯å¤ç”¨ã€‚</li>
</ul>
<p>åœ¨ä¸€äº›é¡¹ç›®é‡Œï¼Œå‘å¸ƒè¯ä¹¦ä¼šè¢«ä¸¥æ ¼é™åˆ¶åˆ›å»ºæ¬¡æ•°ï¼Œç”šè‡³åªä¿ç•™ä¸€åˆ°ä¸¤ä»½ã€‚è¿™ç§ç­–ç•¥æœ¬èº«æ²¡é—®é¢˜ï¼Œä½†å‰ææ˜¯ï¼š
è¯ä¹¦çš„åˆ›å»ºã€ä¿å­˜å’ŒåŒæ­¥æ–¹å¼è¶³å¤Ÿæ¸…æ™°ã€‚</p>
<hr/>
<h2 data-id="heading-4"><strong>è¯ä¹¦åˆ›å»ºå®Œæˆä¹‹åï¼ŒçœŸæ­£é‡è¦çš„æ˜¯èƒ½å¦è¢«æ­£ç¡®ä½¿ç”¨</strong></h2>
<p>è¯ä¹¦ç”Ÿæˆå¹¶ä¸ç­‰äºæµç¨‹ç»“æŸã€‚
åœ¨çœŸå®é¡¹ç›®ä¸­ï¼Œè¯ä¹¦è‡³å°‘è¿˜ä¼šç»å†è¿™äº›é˜¶æ®µï¼š</p>
<ul>
<li>è¢«æè¿°æ–‡ä»¶å¼•ç”¨</li>
<li>è¢«æ„å»ºå·¥å…·ä½¿ç”¨</li>
<li>è¢« CI èŠ‚ç‚¹åŠ è½½</li>
<li>è¢«ä¸Šä¼ æµç¨‹éªŒè¯</li>
</ul>
<p>å¦‚æœè¯ä¹¦æ–‡ä»¶æœ¬èº«ä¸å¯å¤ç”¨ã€å¯†ç ä¸æ¸…æ¥šã€æ¥æºä¸æ˜ç¡®ï¼Œåç»­æ¯ä¸€æ­¥éƒ½ä¼šå¢åŠ é£é™©ã€‚</p>
<p>è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆåœ¨ä¸€äº›é¡¹ç›®ä¸­ï¼Œä¼šé€‰æ‹©ä½¿ç”¨ <strong>Appuploader çš„è¯ä¹¦åŒæ­¥èƒ½åŠ›</strong>ï¼Œè®©è¯ä¹¦ä¸å†ä¾èµ–æŸä¸€å°ç”µè„‘çš„æœ¬åœ°çŠ¶æ€ã€‚</p>
<hr/>
<h2 data-id="heading-5"><strong>å…³äºå…è´¹è´¦å·ä¸è¯ä¹¦æœ‰æ•ˆæœŸçš„ç°å®é™åˆ¶</strong></h2>
<p>éœ€è¦ç‰¹åˆ«è¯´æ˜çš„æ˜¯ï¼š
ä½¿ç”¨ Apple å…è´¹å¼€å‘è€…è´¦å·ç”Ÿæˆçš„è¯ä¹¦ï¼Œæœ¬èº«å°±å­˜åœ¨æ˜ç¡®é™åˆ¶ï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li>æœ‰æ•ˆæœŸè¾ƒçŸ­ï¼ˆ7 å¤©ï¼‰</li>
<li>æ— æ³•ç”¨äº App Store ä¸Šæ¶</li>
</ul>
<p>è¿™å¹¶ä¸æ˜¯å·¥å…·é™åˆ¶ï¼Œè€Œæ˜¯è‹¹æœè´¦å·ä½“ç³»çš„è§„åˆ™ã€‚
åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œå¦‚æœç›®æ ‡æ˜¯å‘å¸ƒåº”ç”¨ï¼Œè¿™ä¸€ç‚¹å¿…é¡»åœ¨è¯ä¹¦åˆ›å»ºé˜¶æ®µå°±è€ƒè™‘æ¸…æ¥šã€‚</p>
<hr/>
<h2 data-id="heading-6"><strong>è¯ä¹¦ç®¡ç†å¹¶ä¸æ˜¯â€œåˆ›å»ºä¸€æ¬¡å°±ç»“æŸâ€</strong></h2>
<p>åœ¨ç»å†è¿‡å¤šæ¬¡è¯ä¹¦é—®é¢˜ä¹‹åï¼Œæˆ‘é€æ¸å½¢æˆä¸€ä¸ªå…±è¯†ï¼š
è¯ä¹¦åˆ›å»ºåªæ˜¯å¼€å§‹ï¼Œç®¡ç†æ–¹å¼æ‰å†³å®šå®ƒæ˜¯å¦ä¼šæˆä¸ºéšæ‚£ã€‚</p>
<p>ä¸€äº›å®è·µç»éªŒåŒ…æ‹¬ï¼š</p>
<ul>
<li>è¯ä¹¦åç§°å…·æœ‰å¯è¯»æ€§</li>
<li>å¯†ç ç»Ÿä¸€è§„åˆ™å¹¶å¦¥å–„ä¿å­˜</li>
<li>é¿å…é‡å¤åˆ›å»ºåŒç±»å‹è¯ä¹¦</li>
<li>æ˜ç¡®è¯ä¹¦ä¸é¡¹ç›®çš„ä½¿ç”¨å…³ç³»</li>
</ul>
<p>è¿™äº›å¹¶ä¸ä¾èµ–æŸä¸€ä¸ªå·¥å…·ï¼Œä½†å·¥å…·æ˜¯å¦æ”¯æŒè¿™äº›è¡Œä¸ºï¼Œä¼šç›´æ¥å½±å“æ‰§è¡Œæˆæœ¬ã€‚</p>
<hr/>
<p>ä¸‹é¢è¿™éƒ¨åˆ†ï¼Œæ˜¯ <strong>ä½¿ç”¨ å¼€å¿ƒä¸Šæ¶ï¼ˆAppuploaderï¼‰åˆ¶ä½œ Apple è¯ä¹¦çš„å®Œæ•´å®æ“æµç¨‹</strong>ã€‚
å®ƒæ˜¯å¯¹åº”å‰é¢è®¨è®ºçš„ä¸€ä¸ªå…·ä½“å®ç°æ–¹å¼ï¼Œé€‚åˆï¼š</p>
<ul>
<li>ä¸æƒ³ä¾èµ– Mac</li>
<li>éœ€è¦è¯ä¹¦è·¨è®¾å¤‡ä½¿ç”¨</li>
<li>å¸Œæœ›å¿«é€Ÿç”Ÿæˆå¯ç”¨è¯ä¹¦</li>
</ul>
<hr/>
<h2 data-id="heading-7">å¦‚ä½•ä½¿ç”¨ AppUploader åˆ¶ä½œ Apple è¯ä¹¦</h2>
<p>æœ¬æ–‡å°†ä»‹ç»å¦‚ä½•ä½¿ç”¨ AppUploader å·¥å…·åˆ¶ä½œ iOS å¼€å‘ä¸å‘å¸ƒæ‰€éœ€çš„è¯ä¹¦ï¼Œå¸®åŠ©åˆå­¦è€…å¿«é€ŸæŒæ¡è¯ä¹¦çš„ç”Ÿæˆæµç¨‹ï¼Œå¹¶åœ¨å®é™…å·¥ç¨‹ä¸­æ­£ç¡®ä½¿ç”¨è¯ä¹¦ã€‚</p>
<hr/>
<p>åœ¨ iOS å¼€å‘ä¸­ï¼Œè¯ä¹¦æ˜¯åº”ç”¨æ‰“åŒ…ã€è°ƒè¯•å’Œä¸Šæ¶çš„å¿…å¤‡æ¡ä»¶ã€‚
è‹¹æœè¦æ±‚å¼€å‘è€…ä¸ºåº”ç”¨åˆ›å»ºç›¸åº”çš„è¯ä¹¦ï¼Œä½†å¯¹äºåˆå­¦è€…æ¥è¯´ï¼Œç›¸å…³æ­¥éª¤å¾€å¾€è¾ƒä¸ºå¤æ‚ï¼Œä¸”å®¹æ˜“ä¸é’¥åŒ™ä¸²ã€Xcode æµç¨‹æ··åœ¨ä¸€èµ·ã€‚
ä¸‹é¢å°†é€šè¿‡ AppUploaderï¼Œé€æ­¥å®Œæˆè¯ä¹¦çš„åˆ›å»ºè¿‡ç¨‹ã€‚</p>
<hr/>
<h2 data-id="heading-8"><strong>ç¬¬ä¸€æ­¥ï¼šè¿›å…¥è¯ä¹¦ç®¡ç†ç•Œé¢</strong></h2>
<ol>
<li>æ‰“å¼€ <strong>AppUploader</strong> å·¥å…·</li>
<li>åœ¨ä¸»é¡µé¢ç‚¹å‡» <strong>è¯ä¹¦ç®¡ç†</strong></li>
<li>è¿›å…¥è¯ä¹¦ç®¡ç†ç•Œé¢
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c920562e056748f89b7ef6db5d295387~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55av54uC55qE56iL5bqP54y0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766982005&amp;x-signature=zc%2BvEoRvJX1lQr6C8IwZN43udLw%3D" alt="è¿›å…¥" loading="lazy"/></li>
</ol>
<hr/>
<h2 data-id="heading-9"><strong>ç¬¬äºŒæ­¥ï¼šæ–°å»ºè¯ä¹¦</strong></h2>
<ol>
<li>åœ¨è¯ä¹¦ç®¡ç†ç•Œé¢ç‚¹å‡» <strong>æ·»åŠ </strong></li>
<li>æ–°å»ºè¯ä¹¦</li>
</ol>
<p>åœ¨å¼¹å‡ºçš„å¯¹è¯æ¡†ä¸­é€‰æ‹©è¯ä¹¦ç±»å‹ï¼š</p>
<ul>
<li><strong>å¼€å‘è¯ä¹¦ï¼ˆiOS App Developmentï¼‰</strong>
ç”¨äºå®‰è£…å’Œè°ƒè¯•æµ‹è¯• App</li>
<li><strong>å‘å¸ƒè¯ä¹¦ï¼ˆiOS Distributionï¼‰</strong>
ç”¨äºä¸Šä¼ åˆ° App Storeï¼ˆéœ€ Apple å¼€å‘è€…å¹´è´¹è´¦å·ï¼‰
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a05390dfc38341d78c394d82c9a4eed7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55av54uC55qE56iL5bqP54y0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766982005&amp;x-signature=FqtlyKCkO%2FKS3CjkDEgbjf2AQVs%3D" alt="æ–°å»º" loading="lazy"/></li>
</ul>
<hr/>
<h2 data-id="heading-10"><strong>ç¬¬ä¸‰æ­¥ï¼šè®¾ç½®è¯ä¹¦ä¿¡æ¯</strong></h2>
<p>åœ¨è¯ä¹¦ç”Ÿæˆç•Œé¢å¡«å†™ä»¥ä¸‹å†…å®¹ï¼š</p>
<ul>
<li><strong>ç±»å‹</strong>
<ul>
<li><code>development</code> â†’ å¼€å‘è¯ä¹¦</li>
<li><code>distribution</code> â†’ å‘å¸ƒè¯ä¹¦</li>
</ul>
</li>
<li><strong>åç§°</strong>
ç”¨äºåŒºåˆ†è¯ä¹¦ï¼Œå»ºè®®ä½¿ç”¨å­—æ¯ä¸æ•°å­—ç»„åˆï¼Œä¾¿äºåç»­ç®¡ç†å’Œè¯†åˆ«</li>
<li><strong>å¯†ç </strong>
è¿™æ˜¯ç”Ÿæˆçš„ <code>.p12</code> æ–‡ä»¶å¯†ç ï¼ˆä¸æ˜¯ Apple è´¦å·å¯†ç ï¼‰
<ul>
<li>å»ºè®®ä½¿ç”¨å­—æ¯æ•°å­—ç»„åˆ</li>
<li>å¯†ç é—å¿˜åæ— æ³•ä¿®æ”¹ï¼Œåªèƒ½é‡æ–°ç”Ÿæˆè¯ä¹¦</li>
</ul>
</li>
</ul>
<blockquote>
<p>æ³¨æ„ï¼š
å…è´¹è´¦å·ç”Ÿæˆçš„è¯ä¹¦æœ‰æ•ˆæœŸä»… 7 å¤©ï¼Œä¸”æ— æ³•ä¸Šä¼ è‡³ App Storeã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-11"><strong>ç¬¬å››æ­¥ï¼šä½¿ç”¨ AppUploader æœåŠ¡åŒæ­¥è¯ä¹¦</strong></h2>
<p>å¦‚æœå‹¾é€‰ <strong>ä½¿ç”¨ AppUploader æœåŠ¡åŒæ­¥è¯ä¹¦</strong>ï¼š</p>
<ul>
<li>å¯åœ¨ä¸åŒç”µè„‘ä¸Šä¸‹è½½å¹¶ä½¿ç”¨è¯¥è¯ä¹¦</li>
<li>æ— éœ€ä¾èµ– Mac æˆ– Xcode</li>
<li>æ–¹ä¾¿åœ¨ Windowsã€Linux ç¯å¢ƒä¸­ä¸Šä¼  IPA è‡³ App Store</li>
</ul>
<hr/>
<h2 data-id="heading-12"><strong>è¯ä¹¦å®Œæˆ</strong></h2>
<ul>
<li>ç”Ÿæˆçš„è¯ä¹¦æ–‡ä»¶ä¸º <code>.p12</code> æ ¼å¼</li>
<li>å¯ç›´æ¥ä½¿ç”¨ï¼Œæ— éœ€é¢å¤–è½¬æ¢</li>
<li>è¯ä¹¦ç”ŸæˆæˆåŠŸåå³å¯ç”¨äºåç»­æµç¨‹</li>
</ul>
<hr/>
<h2 data-id="heading-13"><strong>è¡¥å……è¯´æ˜</strong></h2>
<ul>
<li>ä¸€ä¸ªè¯ä¹¦å¯ä»¥å¯¹åº”å¤šä¸ª Appï¼Œå¹¶éä¸€ä¸€ç»‘å®š</li>
<li>å»ºè®®ç»Ÿä¸€ç®¡ç†è¯ä¹¦ï¼Œé¿å…é‡å¤åˆ›å»º</li>
<li>æ¸…æ™°çš„è¯ä¹¦ç­–ç•¥ï¼Œå¾€å¾€æ¯”â€œä¼šä¸ä¼šç”Ÿæˆâ€æ›´é‡è¦</li>
</ul>
<p>å‚è€ƒé“¾æ¥ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.appuploader.net%2Ftutorial%2Fzh%2F4%2F4.html" target="_blank" title="https://www.appuploader.net/tutorial/zh/4/4.html" ref="nofollow noopener noreferrer">www.appuploader.net/tutorial/zhâ€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å½“ç¡…åŸºç¥æ˜æ’ä¸Šäººç±»çš„â€œå¹æ¯ä¹‹å¢™â€ï¼šè·ç¦»è¯æ˜å“¥å¾·å·´èµ«çŒœæƒ³ï¼ŒAIè¿˜æœ‰å¤šè¿œï¼Ÿ]]></title>    <link>https://juejin.cn/post/7586136543954878502</link>    <guid>https://juejin.cn/post/7586136543954878502</guid>    <pubDate>2025-12-22T04:39:25.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7586136543954878502" data-draft-id="7585866811717697563" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content=" å½“ç¡…åŸºç¥æ˜æ’ä¸Šäººç±»çš„â€œå¹æ¯ä¹‹å¢™â€ï¼šè·ç¦»è¯æ˜å“¥å¾·å·´èµ«çŒœæƒ³ï¼ŒAIè¿˜æœ‰å¤šè¿œï¼Ÿ"/> <meta itemprop="keywords" content="ç®—æ³•,æ¶æ„,å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-22T04:39:25.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="HiStewie"/> <meta itemprop="url" content="https://juejin.cn/user/1591748568038823"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
             å½“ç¡…åŸºç¥æ˜æ’ä¸Šäººç±»çš„â€œå¹æ¯ä¹‹å¢™â€ï¼šè·ç¦»è¯æ˜å“¥å¾·å·´èµ«çŒœæƒ³ï¼ŒAIè¿˜æœ‰å¤šè¿œï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1591748568038823/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    HiStewie
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-22T04:39:25.000Z" title="Mon Dec 22 2025 04:39:25 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#383838;font-size:15px;line-height:30px;letter-spacing:2px;word-break:break-word;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;scroll-behavior:smooth;background-image:linear-gradient(0deg,transparent 24%,rgba(201,195,195,.329) 25%,hsla(0,8%,80.4%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent),linear-gradient(90deg,transparent 24%,rgba(204,196,196,.226) 25%,hsla(0,4%,66.1%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent);background-color:#fff;background-size:50px 50px;padding-bottom:60px}.markdown-body ::selection{color:#fff;background-color:#a862ea}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin:24px 0 12px;color:#a862ea}.markdown-body h1{line-height:2;font-size:1.4em}.markdown-body h1~p:first-of-type:first-letter{color:#a862ea;float:left;font-size:2em;margin-right:.4em;font-weight:bolder}.markdown-body h2{font-size:1.2em}.markdown-body h3{font-size:1.1em}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;padding-left:.2em}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#a862ea}.markdown-body ol li.task-list-item,.markdown-body ul li.task-list-item{list-style:none}.markdown-body ol li.task-list-item ol,.markdown-body ol li.task-list-item ul,.markdown-body ul li.task-list-item ol,.markdown-body ul li.task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:10px}.markdown-body a,.markdown-body code,.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6,.markdown-body li,.markdown-body p{opacity:.85;vertical-align:baseline;transition:all .1s ease}.markdown-body a:hover,.markdown-body code:hover,.markdown-body h1:hover,.markdown-body h2:hover,.markdown-body h3:hover,.markdown-body h4:hover,.markdown-body h5:hover,.markdown-body h6:hover,.markdown-body li:hover,.markdown-body p:hover{opacity:1}.markdown-body a{display:inline-block;color:#a862ea;cursor:pointer;text-decoration:none;position:relative}.markdown-body a:after{content:"";position:absolute;width:98%;height:1px;bottom:0;left:0;transform:scaleX(0);background-color:#a862ea;transform-origin:bottom right;transition:transform .3s ease-in-out}.markdown-body a:hover:after{transform:scaleX(1);transform-origin:bottom left}.markdown-body a:active,.markdown-body a:link{color:#a862ea}.markdown-body img{max-width:100%;user-select:none;margin:1em 0;transition:transform .2s ease 0s;background-color:#f8f5ff;box-shadow:0 0 10px #e7daff}.markdown-body img:hover{opacity:1;box-shadow:0 0 20px #e7daff;transform:translateY(-1px)}.markdown-body blockquote{padding:.5em 1em;margin:12px 0;border-top-left-radius:2px;border-bottom-left-radius:2px;border-left:3px solid #a862ea;background-color:#f8f5ff}.markdown-body blockquote&gt;p{margin:0}.markdown-body .math{font-style:italic;margin:12px 0;padding:.5em 1em;background-color:#f8f5ff}.markdown-body .math&gt;p{margin:0}.markdown-body code{padding:2px .4em;overflow-x:auto;color:#a862ea;font-weight:700;word-break:break-word;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;background-color:#f8f5ff}.markdown-body pre{margin:2em 0}.markdown-body pre&gt;code{display:block;padding:1.5em;word-break:normal;font-size:.9em;font-style:normal;font-weight:400;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;line-height:18px;color:#383838;border-radius:2px;scroll-behavior:smooth;box-shadow:0 0 10px #e7daff}.markdown-body pre&gt;code:hover{box-shadow:0 0 20px #e7daff}.markdown-body pre&gt;code::-webkit-scrollbar{height:6px;background-color:#f8f5ff}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:#e7daff;border-bottom-left-radius:3px;border-bottom-right-radius:3px}.markdown-body hr{margin:2em 0;border-top:1px solid #a862ea}.markdown-body table{width:100%;font-size:12px;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{color:#a862ea;background:#f8f5ff}.markdown-body td,.markdown-body th{padding:.5em;border:1px solid #e7daff}.markdown-body tr{background-color:#f8f5ff}@media (max-width:720px){.markdown-body{font-size:12px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>åƒä¸ªç“œï¼Œè¿‘æœŸçƒ­ç‚¹äº‹ä»¶ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.zhihu.com%2Fquestion%2F1981623306370180619%2Fanswer%2F1982117455234089374" target="_blank" title="https://www.zhihu.com/question/1981623306370180619/answer/1982117455234089374" ref="nofollow noopener noreferrer">26å²æ–‡ç§‘åšå¯¼å¼•äº‰è®®</a>ï¼Œ22å²æ•°å­¦æ•™æˆå®è‡³åå½’ã€‚</p>
<p><a href="https://link.juejin.cn?target=http%3A%2F%2Fbilibili.com%2Fvideo%2FBV1PPqjBLEst%2F%3Fspm_id_from%3D333.1007.top_right_bar_window_custom_collection.content.click%26vd_source%3D0bcafb665fe6140f5a86a181137e5c7d" target="_blank" title="http://bilibili.com/video/BV1PPqjBLEst/?spm_id_from=333.1007.top_right_bar_window_custom_collection.content.click&amp;vd_source=0bcafb665fe6140f5a86a181137e5c7d" ref="nofollow noopener noreferrer">bilibili.com/video/BV1PPâ€¦</a></p>
</blockquote>
<p>æœ€è¿‘é«˜å¼ºåº¦ä½¿ç”¨ AI ååŠ©å·¥ä½œï¼Œè®©æˆ‘ä¸ç¦æœ‰äº›ææƒšï¼šçœ¼ä¸‹çš„ Gemini 3 Pro é€šè¯†æ°´å¹³å·²ç„¶åª²ç¾åšå£«ï¼Œé‚£è·ç¦»ä¼ è¯´ä¸­çš„<code>è¶…äººç±»æ™ºèƒ½</code>ç©¶ç«Ÿè¿˜æœ‰å¤šè¿œï¼Ÿ å¸¦ç€è¿™ä»½å¥½å¥‡ï¼Œæˆ‘é‡è¯»äº†é‚£æ®µæ³¢æ¾œå£®é˜”çš„æ•°å­¦å²ï¼Œè¯•ç€å°†äººç±»çš„æ™ºåŠ›å¾é€”ä¸å½“ä¸‹é¡¶å°– AI çš„èƒ½åŠ›ç‰ˆå›¾åšäº†ä¸€æ¬¡å¯¹ç…§ã€‚</p>
<p>è¿™ç¯‡ç§‘æ™®å°æ–‡ç®—æ˜¯ä¸€æ¬¡ç²—æµ…çš„æ¢ç´¢ï¼Œè‹¥æœ‰ç–æ¼ï¼ŒæœŸå¾…å¤§å®¶æŒ‡æ­£ã€‚</p>
<h2 data-id="heading-0">1. ä¸¤ä¸ªä¸–ç•Œçš„ç¢°æ’ï¼šå½“ç¢³åŸºå¤©æ‰é‡ä¸Šç¡…åŸºç¥æ˜</h2>
<p>æ—¶é—´å€’å› <strong>2010 å¹´</strong>ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8e9f738c908d4771bc326151c7ab04c2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGlTdGV3aWU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766983164&amp;x-signature=KcPfUzk0bMuh0Ly5gBtm6Bgx5HI%3D" alt="æˆªå±2025-12-22 12.33.16.png" loading="lazy"/></p>
<p>ä¸­å—å¤§å­¦çš„å¤§ä¸‰å­¦ç”Ÿåˆ˜è·¯ï¼Œåœ¨å¯å®¤é‡Œç™¾æ— èŠèµ–åœ°ç¿»ç€ä¹¦ã€‚çª—å¤–æ˜¯å–§åš£çš„æ ¡å›­ï¼Œä½†ä»–è„‘æµ·é‡Œå´æ˜¯ä¸€ç‰‡æ­»å¯‚çš„æ·±æµ·ã€‚ ä»–é¢å¯¹çš„æ˜¯ <strong>â€œè¥¿å¡”æ½˜çŒœæƒ³â€</strong> â€”â€”è¿™æ˜¯ä¸€ä¸ªå…³äº<strong>åæ¨æ•°å­¦</strong>çš„é€»è¾‘é™·é˜±ã€‚ç®€å•æ¥è¯´ï¼Œå›½é™…æ•°å­¦ç•Œè‹¦æˆ˜äº†åå‡ å¹´ï¼Œè¯•å›¾æ‰¾åˆ°ä¸€ç§ç‰¹å®šçš„é€»è¾‘è·¯å¾„æ¥è¯æ˜å®ƒæˆç«‹ã€‚æ— æ•°ä¸“å®¶éƒ½åœ¨è¿™è¿·å®«é‡Œæ’äº†å—å¢™ã€‚</p>
<p>çªç„¶ï¼Œçµæ„Ÿåƒä¸€é“é—ªç”µåˆ’ç ´äº†å¯‚é™ã€‚åˆ˜è·¯æ„è¯†åˆ°ï¼š<strong>æ—¢ç„¶æ‰¾ä¸åˆ°è·¯ï¼Œä¹Ÿè®¸æ˜¯å› ä¸ºè·¯æ ¹æœ¬å°±ä¸å­˜åœ¨ï¼Ÿ</strong></p>
<p>ä»–è¿å¤œå†™å‡ºäº†ä¸€ç¯‡è®ºæ–‡ï¼Œä¸å†è¯•å›¾å»è¯æ˜å®ƒæ˜¯å¯¹çš„ï¼Œè€Œæ˜¯åå…¶é“è€Œè¡Œä¹‹ã€‚ä»–åˆ©ç”¨<strong>ç»„åˆæ•°å­¦ä¸­çš„æŸ“è‰²æ³•</strong>ï¼Œæ„é€ äº†ä¸€ä¸ªæå…¶ç‰¹æ®Šçš„æ•°å­¦æ¨¡å‹â€”â€”<strong>è¿™ä¸ªæ¨¡å‹è™½ç„¶å®Œç¾ç¬¦åˆäº†â€œæ‹‰å§†é½å®šç†â€çš„è§„åˆ™ï¼Œå´å”¯ç‹¬æ¨å¯¼ä¸å‡ºé‚£ä¸ªé¢„æœŸçš„â€œå¼•ç†â€</strong> ã€‚</p>
<p>è¿™å°±åƒæ˜¯æ‰€æœ‰äººéƒ½è¯•å›¾è¯æ˜â€œA å¿…ç„¶å¯¼è‡´ Bâ€ï¼Œè€Œåˆ˜è·¯ç›´æ¥é€ å‡ºäº†ä¸€ä¸ªâ€œæœ‰ A å´æ²¡æœ‰ Bâ€çš„æ•°å­¦ä¸–ç•Œã€‚ä»–ç”¨è¿™ä¸ªæ— æ‡ˆå¯å‡»çš„åä¾‹ï¼Œåƒæ‰‹æœ¯åˆ€ä¸€æ ·åˆ‡æ–­äº†ä¸¤ä¸ªå…¬ç†ä¹‹é—´è¢«äººä»¬è¯¯ä»¥ä¸ºå­˜åœ¨çš„é€»è¾‘é“¾æ¡ï¼Œå½»åº•ç»ˆç»“äº†è¿™ä¸ªçŒœæƒ³ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e86357f67de04928b893994a8fe31da0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGlTdGV3aWU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766983164&amp;x-signature=B0myHvpvdTIsIvV6JBZ%2FtdO49wA%3D" alt="æˆªå±2025-12-22 12.31.33.png" loading="lazy"/></p>
<p><strong>ç»“æœæˆ‘ä»¬éƒ½çŸ¥é“äº†</strong>ï¼š22 å²ï¼Œç ´æ ¼æ™‹å‡æ­£æ•™æˆï¼Œç™¾ä¸‡å¥–é‡‘ï¼Œä¸€å¤œå°ç¥ã€‚ åˆ˜è·¯é çš„ä¸æ˜¯è¶…çº§è®¡ç®—æœºï¼Œä¸æ˜¯æµ·é‡æ•°æ®ï¼Œä»…ä»…æ˜¯ä¸€é¢— 1.4 å…¬æ–¤é‡çš„äººè„‘ï¼Œå’Œé‚£ä¸€ç¬é—´æå…¶ä¼˜ç¾ã€ä¸å¯å¤åˆ¶çš„â€œé€»è¾‘é—­ç¯â€ã€‚</p>
<p>æ—¶é—´æ¥åˆ° <strong>2025 å¹´ 12 æœˆ</strong>çš„ä»Šå¤©ã€‚</p>
<p>æˆ‘ä»¬æ‰‹é‡Œçš„å·¥å…·å·²ç»è¿›åŒ–åˆ°äº†â€œåšå£«â€çš„çº§åˆ«ï¼š</p>
<ul>
<li><strong>GPT-5.2</strong> èƒ½åœ¨å‡ ç§’é’Ÿå†…å†™å‡ºä»¥å‡ä¹±çœŸçš„è¯ºè´å°”æ–‡å­¦å¥–é£æ ¼å°è¯´ï¼›</li>
<li><strong>Claude 4.5 Opus</strong> èƒ½ç‹¬è‡ªé‡æ„æ•°ç™¾ä¸‡è¡Œçš„ä¼ä¸šçº§ä»£ç åº“ï¼›</li>
<li><strong>Gemini 3 Pro</strong> ç»“åˆ AlphaProof 2.0ï¼Œç”šè‡³åˆšåˆšæ‹¿ä¸‹äº†å›½é™…å¥¥æ•°ï¼ˆIMOï¼‰çš„æ»¡åˆ†é‡‘ç‰Œã€‚</li>
</ul>
<p><strong>è¿™é‡Œå°±å‡ºç°äº†ä¸€ä¸ªå·¨å¤§çš„è®¤çŸ¥å†²çªï¼š</strong></p>
<p>æŒ‰ç†è¯´ï¼ŒAI çš„æ™ºå•†å’ŒçŸ¥è¯†å‚¨å¤‡å·²ç»ç¢¾å‹äº†äººç±»ã€‚</p>
<p>ä½†å¦‚æœæˆ‘å‘Šè¯‰ä½ ï¼Œé¢å¯¹æ•°å­¦çš‡å† ä¸Šçš„æ˜ç â€”â€”<strong>å“¥å¾·å·´èµ«çŒœæƒ³</strong>ï¼Œè¿™ä¸‰ä½â€œç¡…åŸºå¤§ç¥â€ç›®å‰çš„è¡¨ç°ï¼Œå¯èƒ½è¿˜ä¸å¦‚å½“å¹´çš„é‚£ä¸ªæœ¬ç§‘ç”Ÿåˆ˜è·¯ã€‚</p>
<p>ä¸ºä»€ä¹ˆï¼Ÿæ˜¯ AI åœ¨è£…å‚»ï¼Œè¿˜æ˜¯åœ¨æ•°å­¦é‚£æ·±ä¸è§åº•çš„æ·±æ¸Šé‡Œï¼Œè—ç€æŸç§è¿ç¡…åŸºç”Ÿå‘½éƒ½æ— æ³•é€¾è¶Šçš„ <strong>â€œå¹æ¯ä¹‹å¢™â€</strong> ï¼Ÿ</p>
<hr/>
<h2 data-id="heading-1">2. å‡¡äººçš„å¼‘ç¥ä¹‹è·¯ï¼šä»æ¬§æ‹‰åˆ°é™ˆæ™¯æ¶¦çš„ 200 å¹´è¡€æ³ª</h2>
<p>ä¸ºäº†ç†è§£ AI ä¸ºä»€ä¹ˆâ€œåƒç˜ªâ€ï¼Œæˆ‘ä»¬å¿…é¡»å…ˆå›å¤´çœ‹çœ‹ï¼Œäººç±»ä¸ºäº†æ”»å…‹è¿™åº§å ¡å’ï¼Œä»˜å‡ºäº†æ€æ ·æƒ¨çƒˆçš„ä»£ä»·ã€‚è¿™ç»ä¸æ˜¯ç®€å•çš„ç®—æœ¯é¢˜ï¼Œè€Œæ˜¯ä¸€åœºè·¨è¶Šä¸‰ä¸ªä¸–çºªçš„æ™ºåŠ›æ¥åŠ›ã€‚</p>
<p><strong>çœŸæ­£çš„å®šä¹‰ï¼ˆ1742å¹´æå‡ºï¼‰ï¼š</strong></p>
<p><strong>â€œä»»ä¸€å¤§äº 2 çš„å¶æ•°ï¼Œéƒ½å¯ä»¥å†™æˆä¸¤ä¸ªè´¨æ•°ä¹‹å’Œã€‚â€</strong></p>
<ul>
<li><strong>ä¸¾ä¸ªæ —å­</strong>ï¼š</li>
</ul>

<ul>
<li>
<ul>
<li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>4</mn><mo>=</mo><mn>2</mn><mo>+</mo></mrow><annotation encoding="application/x-tex">4 = 2 + </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">4</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"/><span class="mord">2</span><span class="mord">+</span></span></span></span></span></li>
<li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>10</mn><mo>=</mo><mn>3</mn><mo>+</mo></mrow><annotation encoding="application/x-tex">10 = 3 + </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">10</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"/><span class="mord">3</span><span class="mord">+</span></span></span></span></span></li>
<li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>100</mn><mo>=</mo><mn>3</mn><mo>+</mo><mn>9</mn></mrow><annotation encoding="application/x-tex">100 = 3 + 9</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">100</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"/><span class="mord">3</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">9</span></span></span></span></span></li>
<li>...</li>
<li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>100</mn><mo separator="true">,</mo><mn>000</mn><mo separator="true">,</mo><mn>000</mn><mo>=</mo><mn>53</mn><mo>+</mo><mn>99</mn><mo separator="true">,</mo><mn>999</mn><mo separator="true">,</mo><mn>94</mn></mrow><annotation encoding="application/x-tex">100,000,000 = 53 + 99,999,94</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8389em;vertical-align:-0.1944em;"/><span class="mord">100</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord">000</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord">000</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"/><span class="mord">53</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.8389em;vertical-align:-0.1944em;"/><span class="mord">99</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord">999</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord">94</span></span></span></span></span></li>
</ul>
</li>
</ul>
<p>çœ‹èµ·æ¥äººç•œæ— å®³ï¼Œå¯¹å§ï¼Ÿåªè¦ä½ æœ‰ä¸€ä¸ªè®¡ç®—å™¨ï¼Œä¼¼ä¹å°±èƒ½æ— é™éªŒè¯ä¸‹å»ã€‚</p>
<p><strong>ä½†è¿™å°±æ˜¯é™·é˜±ã€‚</strong></p>
<p>æ•°å­¦å®¶é¢å¯¹çš„æ˜¯ <strong>â€œæ— ç©·â€</strong> ã€‚å¶æ•°æ˜¯æ— ç©·æ— å°½çš„ï¼Œè€Œè´¨æ•°åœ¨æ•°è½´ä¸Šçš„åˆ†å¸ƒå´æ˜¯æ— åºä¸”æ··æ²Œçš„ã€‚</p>
<p>è¿™å°±å¥½æ¯”è®©ä½ åœ¨æ— é™å»¶ä¼¸çš„æ²™æ»©ä¸Šï¼Œä¿è¯<strong>æ¯ä¸€ç²’æ²™å­</strong>ï¼ˆå¶æ•°ï¼‰éƒ½èƒ½è¢«å®Œç¾æ‹†è§£æˆ<strong>ä¸¤é¢—ç‰¹å®šçš„çç </strong>ï¼ˆè´¨æ•°ï¼‰ã€‚</p>
<p>åªè¦å®‡å®™å°½å¤´å­˜åœ¨<strong>ä¸€ä¸ª</strong>åä¾‹ï¼Œæ•´ä¸ªçŒœæƒ³å°±ä¼šå´©å¡Œã€‚</p>
<h3 data-id="heading-2">ç¬¬ä¸€æ£’ï¼šå·¨äººçš„å¹æ¯ï¼ˆ1742-1900ï¼‰</h3>
<p>ä¸€åˆ‡å§‹äºå“¥å¾·å·´èµ«ç»™æ¬§æ‹‰çš„ä¸€å°ä¿¡ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0a6fd286ba0542d3b9a3fa248365d18c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGlTdGV3aWU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766983164&amp;x-signature=HSJLEViP9a7sw26%2B5xtbjz4SRqc%3D" alt="æˆªå±2025-12-22 12.35.56.png" loading="lazy"/></p>
<p>å½“æ—¶çš„æ•°å­¦ä¹‹ç¥<strong>æ¬§æ‹‰</strong>ï¼Œç©·å°½æ¯•ç”Ÿç²¾åŠ›åæ— å¥ˆå›å¤ï¼šâ€œè™½ç„¶æˆ‘æ— æ³•è¯æ˜ï¼Œä½†æˆ‘ç¡®ä¿¡å®ƒæ˜¯çœŸçš„ã€‚â€</p>
<p>è¿æ¬§æ‹‰éƒ½ç¼´æ¢°æŠ•é™ï¼Œè¿™é“é¢˜æ²‰ç¡äº† 160 å¹´ã€‚è¿™æœŸé—´ï¼Œäººç±»ç»æœ›åœ°æ„è¯†åˆ°ï¼šé¢å¯¹æ— ç©·å°½çš„å¶æ•°ï¼Œé â€œç®—â€æ˜¯æ²¡ç”¨çš„ï¼Œå¿…é¡»æ‰¾åˆ°é€šç”¨çš„é€»è¾‘æ­¦å™¨ã€‚</p>
<h3 data-id="heading-3">ç¬¬äºŒæ£’ï¼šé‡æ­¦å™¨ç™»åœºï¼ˆ1920s - åœ†æ³•ä¸ç­›æ³•ï¼‰</h3>
<p>20 ä¸–çºªåˆï¼Œæ•°å­¦å®¶ä»¬ç»ˆäºé€ å‡ºäº†ä¸¤æŠŠç¥å…µï¼š</p>
<ul>
<li><strong>åœ†æ³• (Circle Method)</strong> ï¼šå“ˆä»£å’Œæç‰¹å°”ä¼å¾·å¼•å…¥äº†å¤å˜å‡½æ•°ï¼ŒæŠŠæ•°è®ºé—®é¢˜è½¬åŒ–æˆäº†ç§¯åˆ†é—®é¢˜ã€‚è¿™å°±åƒæ˜¯ç”¨å¤§ç‚®è½°èšŠå­ï¼Œå¨åŠ›å·¨å¤§ä½†ç²¾åº¦ä¸å¤Ÿï¼Œåªèƒ½è§£å†³â€œä¸‰ä¸ªè´¨æ•°ä¹‹å’Œâ€ã€‚</li>
<li><strong>ç­›æ³• (Sieve Method)</strong> ï¼šè¿™æ˜¯åæ¥çš„ä¸»æˆ˜åœºã€‚æŒªå¨æ•°å­¦å®¶å¸ƒæœ—æŠŠå®ƒè¿›åŒ–æˆäº†ç²¾å¯†çš„æ‰‹æœ¯åˆ€ã€‚ç®€å•è¯´ï¼Œå°±æ˜¯æŠŠä¸ç¬¦åˆæ¡ä»¶çš„æ•°åƒè¿‡ç­›å­ä¸€æ ·æ»¤æ‰ã€‚</li>
</ul>
<h3 data-id="heading-4">ç¬¬ä¸‰æ£’ï¼šæ‚²å£®çš„åŒ…å›´æˆ˜ï¼ˆ1920-1962ï¼‰</h3>
<p>æ—¢ç„¶ç›´æ¥è¯æ˜â€œ1+1â€ï¼ˆä¸€ä¸ªè´¨æ•°+ä¸€ä¸ªè´¨æ•°ï¼‰å¤ªéš¾ï¼Œäººç±»å†³å®šé‡‡ç”¨ <strong>â€œè¿‚å›åŒ…å›´æˆ˜æœ¯â€</strong> ï¼š</p>
<p>å…ˆè¯æ˜â€œå¤§å¶æ•° = ä¸€ä¸ªè´¨æ•° + ä¸€ä¸ª<strong>ç”±ä¸è¶…è¿‡ N ä¸ªè´¨æ•°ä¹˜ç§¯ç»„æˆçš„åˆæ•°</strong>â€ã€‚</p>
<ul>
<li>1920å¹´ï¼Œå¸ƒæœ—è¯æ˜äº†â€œ9+9â€ã€‚</li>
<li>1948å¹´ï¼Œé›·å°¼è¯æ˜äº†â€œ1+câ€ã€‚</li>
<li>1962å¹´ï¼Œä¸­å›½çš„æ½˜æ‰¿æ´è¯æ˜äº†â€œ1+5â€ã€‚</li>
</ul>
<p><strong>åŒ…å›´åœˆè¶Šæ¥è¶Šå°ï¼Œäººç±»ç¦»çœŸç†è¶Šæ¥è¶Šè¿‘ï¼Œç©ºæ°”ä¹Ÿè¶Šæ¥è¶Šç¨€è–„ã€‚</strong></p>
<h3 data-id="heading-5">æœ€åä¸€æ£’ï¼šé™ˆæ™¯æ¶¦çš„å­¤å‹‡ï¼ˆ1966ï¼‰</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/886ca48ae0814da9977e62fbe2225945~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGlTdGV3aWU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766983164&amp;x-signature=Ix4ANJ3Eb4GB1EfHEogMTSmDvgM%3D" alt="æˆªå±2025-12-22 12.35.00.png" loading="lazy"/></p>
<p><strong>è¿™æ˜¯ä¸­å›½æ•°å­¦å²ä¸Šæœ€è€€çœ¼çš„æ—¶åˆ»ï¼Œä¹Ÿæ˜¯æœ€ä»¤äººå¿ƒç¢çš„æ—¶åˆ»ã€‚</strong></p>
<p>åœ¨åªæœ‰ 6 å¹³æ–¹ç±³çš„æ–—å®¤é‡Œï¼Œå€Ÿç€ç…¤æ²¹ç¯å¾®å¼±çš„å…‰ï¼Œé™ˆæ™¯æ¶¦æŠŠâ€œç­›æ³•â€è¿ç”¨åˆ°äº†æè‡´ã€‚ä»–æ¶ˆè€—äº†å‡ éº»è¢‹çš„è‰ç¨¿çº¸ï¼Œç”šè‡³æ¶ˆè€—äº†è‡ªå·±çš„ç”Ÿå‘½ï¼ŒæˆåŠŸè¯æ˜äº†ï¼š</p>
<p><strong>â€œä»»ä½•å……åˆ†å¤§çš„å¶æ•°ï¼Œéƒ½å¯ä»¥è¡¨ç¤ºä¸ºä¸€ä¸ªè´¨æ•°å’Œä¸€ä¸ªâ€˜ç”±ä¸è¶…è¿‡ä¸¤ä¸ªè´¨æ•°ä¹˜ç§¯â€™çš„æ•°ä¹‹å’Œã€‚â€</strong></p>
<p>è¿™å°±æ˜¯è‘—åçš„ <strong>â€œ1+2â€</strong> ã€‚</p>
<p>æˆ‘ä»¬ç»ˆäºç«™åœ¨äº†æµ·æ‹” 8800 ç±³çš„åœ°æ–¹ï¼Œè·ç¦» 8848 ç±³çš„é¡¶å³°ï¼ˆ1+1ï¼‰ï¼Œåªå·®æœ€åä¸€æ­¥ã€‚</p>
<p><strong>ä½†è¿™æœ€åä¸€æ­¥ï¼Œæˆ‘ä»¬å¡äº†æ•´æ•´ 60 å¹´ï¼Œäººç±»å¡äº†æ•´æ•´60å¹´ã€‚</strong></p>
<p>å› ä¸ºæ•°å­¦ç•Œæ‚²å“€åœ°å‘ç°ï¼Œä¼ ç»Ÿçš„ç­›æ³•å·²ç»ç”¨å°½äº†æ½œåŠ›ï¼Œæˆ‘ä»¬æ’ä¸Šäº†ä¸€å µå« <strong>â€œå¥‡å¶æ€§éšœç¢ï¼ˆParity Problemï¼‰</strong> â€çš„å¢™ã€‚è¦ç¿»è¿‡è¿™å µå¢™ï¼Œå¿…é¡»å‘æ˜å…¨æ–°çš„æ•°å­¦å·¥å…·ã€‚</p>
<hr/>
<h2 data-id="heading-6">3. 2025å¹´çš„ AI æˆ˜å†µï¼šä¸ºä»€ä¹ˆè·¨ä¸è¿‡è¿™æœ€åä¸€æ­¥ï¼Ÿ</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/42e42096c6624fa1bfe584d498402734~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGlTdGV3aWU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766983164&amp;x-signature=XLDwn2u7deBDusCztRlfusugGw4%3D" alt="nthme-1766376500477.png" loading="lazy"/></p>
<p>ç°åœ¨ä½ æ˜ç™½äº†ï¼Œè¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä¸èƒ½é æš´åŠ›çš„â€œç®—â€ï¼Œè€Œæ˜¯è¦å‘æ˜åƒâ€œç­›æ³•â€æˆ–â€œåœ†æ³•â€è¿™æ · <strong>å…¨æ–°çš„æ•°å­¦å·¥å…·</strong>ã€‚</p>
<p>è®©æˆ‘ä»¬çœ‹çœ‹ 2025 å¹´çš„ä¸‰å¤§ AI æ¨¡å‹åœ¨åšä»€ä¹ˆã€‚</p>
<h3 data-id="heading-7">OpenAI GPT-5.2ï¼šæœ‰çµæ„Ÿï¼Œæ— é€»è¾‘çš„â€œæ–‡ç§‘ç”Ÿâ€</h3>
<p>GPT-5.2 æ˜¯ç›®å‰æœ€å¼ºçš„ç›´è§‰æœºå™¨ã€‚</p>
<p>å¦‚æœä½ é—®å®ƒå¦‚ä½•è¯æ˜ï¼Œå®ƒä¼šæ¨¡ä»¿é™ˆæ™¯æ¶¦çš„è®ºæ–‡é£æ ¼ï¼Œå†™å¾—å¤´å¤´æ˜¯é“ã€‚å®ƒç”šè‡³ä¼šå»ºè®®ä½ ï¼šâ€œè¯•ç€ç»“åˆæ¤­åœ†æ›²çº¿å’Œæ¨¡å½¢å¼...â€</p>
<p><strong>ä½†å®ƒæœ‰ä¸€ä¸ªè‡´å‘½ä¼¤ï¼šå¹»è§‰ã€‚</strong></p>
<p>å®ƒä¸æ‡‚ä»€ä¹ˆæ˜¯ä¸¥è°¨çš„æ¨å¯¼ã€‚å®ƒæ˜¯åœ¨ç”¨æ¦‚ç‡é¢„æµ‹ä¸‹ä¸€ä¸ªå­—ï¼Œè€Œä¸æ˜¯åœ¨æ„å»ºé€»è¾‘é“¾ã€‚å®ƒç»™å‡ºçš„è¯æ˜ï¼Œå¾€å¾€åœ¨ç¬¬ 5-10 æ­¥å°±å¼•ç”¨äº†ä¸€ä¸ªæ ¹æœ¬ä¸å­˜åœ¨çš„å®šç†ã€‚</p>
<p><strong>å®ƒåƒä¸€ä¸ªå–é†‰äº†çš„å¤©æ‰ï¼Œæ»¡å˜´é‡‘å¥ï¼Œä½†èµ°ä¸æˆç›´çº¿ã€‚</strong></p>
<h3 data-id="heading-8">Anthropic Claude 4.5 Opusï¼šæœ‰é€»è¾‘ï¼Œæ— æ–¹å‘çš„â€œåšé¢˜å®¶â€</h3>
<p>Claude 4.5 æ¥å…¥äº† Lean 4ï¼ˆå½¢å¼åŒ–éªŒè¯è¯­è¨€ï¼‰ã€‚å®ƒæ˜¯æœ€ä¸¥è°¨çš„ã€‚</p>
<p>å®ƒèƒ½å®Œç¾åœ°å¤ç°é™ˆæ™¯æ¶¦å½“å¹´çš„â€œ1+2â€è¯æ˜è¿‡ç¨‹ï¼Œæ¯ä¸€æ­¥éƒ½æ— æ‡ˆå¯å‡»ã€‚</p>
<p><strong>ä½†å®ƒå¡åœ¨äº†â€œåˆ›é€ æ€§â€ä¸Šã€‚</strong></p>
<p>ç›®å‰çš„ AI åªèƒ½åœ¨<strong>å·²æœ‰çš„å…¬ç†ä½“ç³»</strong>å†…è¿›è¡Œæœç´¢ã€‚è€Œè¦ä»â€œ1+2â€è·¨è¶Šåˆ°â€œ1+1â€ï¼Œæ•°å­¦ç•Œå…¬è®¤ç°æœ‰çš„â€œç­›æ³•â€å·²ç»ç”¨åˆ°äº†æé™ï¼Œå¿…é¡»æœ‰é¢ è¦†æ€§çš„æ–°æ–¹æ³•ã€‚</p>
<p><strong>Claude 4.5 å°±åƒä¸€ä¸ªå®Œç¾çš„å·¥åŒ ï¼Œå®ƒèƒ½æŠŠæ—§åœ°å›¾ç”»å¾—æ— æ¯”ç²¾ç»†ï¼Œä½†å®ƒæ— æ³•ç”»å‡ºåœ°å›¾ä¸Šæ²¡æœ‰çš„æ–°å¤§é™†ã€‚</strong></p>
<h3 data-id="heading-9">Google Gemini 3 Proï¼šæš´åŠ›ç¾å­¦çš„æé™</h3>
<p>Google è¯•å›¾ç”¨ DeepMind çš„ AlphaProof 2.0 æš´åŠ›ç ´è§£ã€‚</p>
<p>å®ƒæŠŠæ•°å­¦è¯æ˜å˜æˆäº†ä¸€ä¸ª<strong>æœç´¢æ ‘</strong>é—®é¢˜ã€‚åœ¨å¥¥æ•°é¢˜é‡Œï¼Œæœç´¢æ·±åº¦å¯èƒ½åªæœ‰å‡ åå±‚ï¼Œå®ƒèƒ½ç®—å‡ºæœ€ä¼˜è§£ã€‚</p>
<p>ä½†åœ¨å“¥å¾·å·´èµ«çŒœæƒ³é¢å‰ï¼Œæœç´¢ç©ºé—´æ˜¯<strong>æŒ‡æ•°çº§çˆ†ç‚¸</strong>çš„ã€‚å³ä½¿æ˜¯ 2025 å¹´çš„é‡å­è¾…åŠ©ç®—åŠ›ï¼Œé¢å¯¹è¿™ç§é‡çº§ï¼Œä¹Ÿåƒæ˜¯åœ¨å¤ªå¹³æ´‹é‡Œæä¸€æ ¹é’ˆã€‚</p>
<p><strong>å®ƒå°±åƒè¥¿è¥¿å¼—æ–¯ï¼Œæ‹¥æœ‰æ¨å¾—åŠ¨å·¨çŸ³çš„ç®—åŠ›ï¼Œå´è¢«å›°åœ¨äº†â€œæ— ç©·â€è¿™åº§æ°¸è¿œæ¨ä¸åˆ°é¡¶çš„å±±è„šä¸‹ã€‚</strong></p>
<p>è¿™ä¸‰ä¸ª AI å°±åˆ†åˆ«ä»£è¡¨äº†ï¼š<strong>æ··ä¹±çš„ç›´è§‰</strong>ã€<strong>åƒµåŒ–çš„å®ˆæˆ</strong>ã€<strong>å¾’åŠ³çš„æš´åŠ›</strong>ã€‚æ›´è¡¬æ‰˜å‡ºäººç±»â€œçµæ„Ÿâ€çš„çè´µã€‚</p>
<hr/>
<h2 data-id="heading-10">4. AI çš„é«˜ç»´å›°å¢ƒï¼šä¸ºä»€ä¹ˆâ€œæš´åŠ›è®¡ç®—â€å¤±æ•ˆäº†ï¼Ÿ</h2>
<p>çœ‹å®Œå†å²ï¼Œä½ å°±æ˜ç™½äº†ï¼š<strong>å“¥å¾·å·´èµ«çŒœæƒ³ä¸æ˜¯è®¡ç®—é‡çš„é—®é¢˜ï¼Œè€Œæ˜¯é€»è¾‘æ¶æ„çš„é—®é¢˜ã€‚</strong></p>
<p>ç›®å‰çš„ AIï¼ˆGPT-5.2, Gemini 3 Pro, Claude 4.5ï¼‰è™½ç„¶å¼ºå¤§ï¼Œä½†æœ¬è´¨ä¸Šè¿˜æ˜¯ <strong>â€œè¶…çº§æ¨¡ä»¿è€…â€</strong> ã€‚å®ƒä»¬åœ¨åšçš„æ˜¯ï¼š</p>
<ol>
<li><strong>æ¦‚ç‡é¢„æµ‹</strong>ï¼šæ ¹æ®å·²æœ‰çš„æ•°å­¦è®ºæ–‡ï¼ŒçŒœä¸‹ä¸€ä¸ªè¯ã€‚</li>
<li><strong>æœç´¢ä¼˜åŒ–</strong>ï¼šåœ¨å·²çŸ¥çš„è§£é¢˜è·¯å¾„é‡Œæ‰¾æœ€ä¼˜è§£ã€‚</li>
</ol>
<p>ä½†è¦è¯æ˜å“¥å¾·å·´èµ«çŒœæƒ³ï¼ŒAI å¿…é¡»ä» <strong>â€œæ¨¡ä»¿è€…â€</strong> è¿›åŒ–ä¸º <strong>â€œæ¦‚å¿µåˆ›é€ è€…â€</strong> ã€‚</p>
<p>è¿™éœ€è¦ AI è·¨è¶Šä¸‰ä¸ªå…·ä½“çš„è¿›åŒ–é˜¶æ®µï¼š</p>
<h3 data-id="heading-11">é˜¶æ®µä¸€ï¼šç¿»è¯‘å®˜â€”â€”ä»â€œè‡ªç„¶è¯­è¨€â€åˆ°â€œå½¢å¼åŒ–æ•°å­¦â€ï¼ˆå½“å‰é˜¶æ®µï¼‰</h3>
<p>ç›®å‰çš„ AI ç»å¸¸ä¸€æœ¬æ­£ç»åœ°èƒ¡è¯´å…«é“ï¼ˆå¹»è§‰ï¼‰ã€‚è¦è§£å†³æ•°å­¦éš¾é¢˜ï¼Œç¬¬ä¸€æ­¥æ˜¯ <strong>â€œå»æ¨¡ç³ŠåŒ–â€</strong> ã€‚</p>
<ul>
<li><strong>ç›®æ ‡</strong>ï¼šAI éœ€è¦æŠŠé™ˆæ™¯æ¶¦ã€é™¶å“²è½©ç­‰äººçš„è®ºæ–‡ï¼Œå®Œç¾æ— è¯¯åœ°ç¿»è¯‘æˆè®¡ç®—æœºèƒ½ç»å¯¹ç†è§£çš„ä¸¥è°¨è¯­è¨€ï¼ˆå¦‚ Lean æˆ– Coqï¼‰ã€‚</li>
<li><strong>ç°çŠ¶</strong>ï¼šClaude 4.5 Opus å·²ç»èƒ½åšå¾—å¾ˆå¥½äº†ï¼Œä½†è¿™åªæ˜¯æ‰“å¥½äº†åœ°åŸºã€‚</li>
</ul>
<h3 data-id="heading-12">é˜¶æ®µäºŒï¼šé€»è¾‘å¤§å¸ˆâ€”â€”æŒæ¡â€œé•¿é“¾æ¡æ¨ç†â€ï¼ˆAlphaProof é˜¶æ®µï¼‰</h3>
<p>å¥¥æ•°é¢˜çš„è¯æ˜é€šå¸¸åªæœ‰å‡ åæ­¥ï¼Œè€Œå“¥å¾·å·´èµ«çŒœæƒ³å¯èƒ½éœ€è¦<strong>æ•°ä¸‡æ­¥</strong>æå…¶ä¸¥å¯†çš„é€»è¾‘è·³è·ƒã€‚</p>
<ul>
<li><strong>ç›®æ ‡</strong>ï¼šç¥ç»ç¬¦å·ç³»ç»Ÿçš„æˆç†Ÿã€‚</li>
</ul>

<ul>
<li>
<ul>
<li><strong>å·¦è„‘ï¼ˆç¬¦å·é€»è¾‘ï¼‰</strong> ï¼šä¿è¯æ¯ä¸€æ­¥æ¨å¯¼ç»å¯¹æ­£ç¡®ï¼Œåƒè®¡ç®—å™¨ä¸€æ ·ä¸¥è°¨ã€‚</li>
<li><strong>å³è„‘ï¼ˆç¥ç»ç½‘ç»œï¼‰</strong> ï¼šåƒäººç±»å¤§å¸ˆä¸€æ ·æ‹¥æœ‰â€œç›´è§‰â€ï¼Œåœ¨èŒ«èŒ«çš„é€»è¾‘è¿·å®«ä¸­ï¼Œç¬é—´åˆ¤æ–­å‡ºå“ªæ¡è·¯é€šå‘ç»ˆç‚¹ã€‚</li>
</ul>
</li>
</ul>

<ul>
<li><strong>ç°çŠ¶</strong>ï¼šGoogle DeepMind åœ¨è¿™æ–¹é¢åˆšèµ·æ­¥ï¼Œæ‹¿åˆ°äº† IMO é“¶ç‰Œï¼Œä½†è·ç¦»â€œä¸‡æ­¥æ¨ç†â€è¿˜æœ‰æ•°é‡çº§çš„å·®è·ã€‚</li>
</ul>
<h3 data-id="heading-13">é˜¶æ®µä¸‰ï¼šé€ ç‰©ä¸»â€”â€”å…·å¤‡â€œæ¦‚å¿µåˆ›é€ â€èƒ½åŠ›ï¼ˆå…³é”®è½¬æŠ˜ç‚¹ï¼‰</h3>
<p>è¿™æ˜¯æœ€éš¾çš„ä¸€æ­¥ï¼Œä¹Ÿæ˜¯ç›®å‰ AI çš„<strong>ç»å¯¹ç›²åŒº</strong>ã€‚</p>
<p>å›é¡¾å†å²ï¼Œé™ˆæ™¯æ¶¦ä¹‹æ‰€ä»¥èƒ½åšåˆ°â€œ1+2â€ï¼Œæ˜¯å› ä¸ºä»–<strong>æ”¹è¿›</strong>äº†ç­›æ³•ã€‚</p>
<p>è¦è§£å†³â€œ1+1â€ï¼ŒAI ä¸èƒ½åªåœ¨æ—§è§„åˆ™é‡Œç©æ¸¸æˆï¼ˆåƒä¸‹å›´æ£‹é‚£æ ·ï¼‰ï¼Œ<strong>å®ƒå¿…é¡»ä¿®æ”¹è§„åˆ™ï¼ï¼</strong></p>
<ul>
<li><strong>ç›®æ ‡</strong>ï¼šçªç ´â€œå¥‡å¶æ€§éšœç¢â€ã€‚AI éœ€è¦å‡­ç©ºå‘æ˜å‡ºäººç±»æœªæ›¾è®¾æƒ³è¿‡çš„æ•°å­¦å¯¹è±¡ï¼ˆæ¯”å¦‚å®šä¹‰ä¸€ç§â€œå¹¿ä¹‰ç´ æ•°â€æˆ–â€œé«˜ç»´ç­›æ³•â€ï¼‰ã€‚</li>
<li><strong>æœ¬è´¨</strong>ï¼šè¿™ä¸ä»…ä»…æ˜¯è§£é¢˜ï¼Œè¿™æ˜¯<strong>çˆ±å› æ–¯å¦æå‡ºç›¸å¯¹è®ºçº§åˆ«çš„æ€ç»´é£è·ƒ</strong>ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-14">5. ç»ˆæé¢„æµ‹ï¼šæˆ‘ä»¬è·ç¦»é‚£ä¸€å¤©è¿˜æœ‰å¤šè¿œï¼Ÿ</h2>
<p>å¦‚æœæœªæ¥æŸå¤©ä½ çœ‹åˆ°ä»¥ä¸‹æ–°é—»ï¼Œè¯´æ˜ AI è·ç¦»æ‘˜ä¸‹çš‡å† ä¸è¿œäº†ã€‚æˆ‘ä»¬å¯ä»¥æŠŠè¿™ä¸ªè¿›åº¦æ¡é‡åŒ–ä¸ºå››ä¸ªé‡Œç¨‹ç¢‘ï¼š</p>



































<table><thead><tr><th><strong>å‘å±•é˜¶æ®µ</strong></th><th><strong>æ ‡å¿—æ€§äº‹ä»¶</strong></th><th><strong>é¢„è®¡å®ç°æ—¶é—´</strong></th><th><strong>è·ç¦»ç»ˆæçœŸç†</strong></th></tr></thead><tbody><tr><td><strong>L1: è¾…åŠ©è€…</strong></td><td>AI æ— é”™è¯¯åœ°æ£€æŸ¥é¡¶å°–è®ºæ–‡ï¼ŒæŸ¥æ¼è¡¥ç¼ºã€‚</td><td><strong>å½“å‰å·²å®ç°</strong></td><td>é¥è¿œ (ä¾ç„¶æ˜¯å·¥å…·)</td></tr><tr><td><strong>L2: ç«èµ›è€…</strong></td><td>AI åœ¨å›½é™…å¥¥æ•° (IMO) æ‹¿æ»¡åˆ†é‡‘ç‰Œï¼Œè§£æ³•æ¯”äººç±»ä¼˜ç¾ã€‚</td><td><strong>1-2 å¹´å†…</strong></td><td>è¿˜æœ‰è·ç¦» (åªä¼šåšé¢˜ï¼Œä¸ä¼šå‡ºé¢˜)</td></tr><tr><td><strong>L3: å‘ç°è€…</strong></td><td>AI ç‹¬ç«‹å‘ç°å¹¶è¯æ˜ä¸€ä¸ªäººç±»æœªçŸ¥çš„ã€æœ‰æ„ä¹‰çš„æ–°å®šç†ã€‚</td><td><strong>5-10 å¹´</strong></td><td>æ¥è¿‘ (å…·å¤‡äº†åˆæ­¥åˆ›é€ åŠ›)</td></tr><tr><td><strong>L4: åˆ›é€ è€…</strong></td><td><strong>AI å‘æ˜å…¨æ–°çš„æ•°å­¦å®šä¹‰æˆ–æ¡†æ¶ (å¦‚æ–°ç­›æ³•)ã€‚</strong></td><td><strong>æœªçŸ¥ / å¥‡ç‚¹</strong></td><td>ä¸´é—¨ä¸€è„š (æ‰“ç ´å¹æ¯ä¹‹å¢™)</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-15">6. ç»“è¯­</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cf054906a7de45f58c9d430da0ccccc2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGlTdGV3aWU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766983164&amp;x-signature=FKR5J7N5LL0yScoU2y%2FtpOJC4kM%3D" alt="e891b3de8bbd391592c279c7186a1491_1766376928.png" loading="lazy"/>
å›åˆ°æœ€åˆçš„æ•…äº‹ã€‚22 å²çš„åˆ˜è·¯ä¹‹æ‰€ä»¥èƒ½éœ‡æ’¼ä¸–ç•Œï¼Œæ˜¯å› ä¸ºä»–åœ¨æ—§æœ‰çš„çŸ¥è¯†ä½“ç³»ä¸Šï¼Œæ…ç ´äº†ä¸€å±‚çª—æˆ·çº¸ã€‚</p>
<p>è€Œå“¥å¾·å·´èµ«çŒœæƒ³ï¼Œæ˜¯ä¸€å µåšé‡çš„å¢™ã€‚</p>
<p>2025 å¹´çš„ AIï¼Œä¾ç„¶æ˜¯æœ€å¥½çš„<strong>å‰¯é©¾é©¶</strong>ã€‚å®ƒèƒ½å¸®æˆ‘ä»¬æŠŠè½¦å¼€å¾—é£å¿«ï¼Œèƒ½å¸®æˆ‘ä»¬é¿å¼€è·¯ä¸Šçš„å‘ï¼Œä½†å®ƒè¿˜ä¸çŸ¥é“å¦‚ä½•<strong>é£è¶Š</strong>è¿™å µå¢™ã€‚</p>
<p><strong>å“¥å¾·å·´èµ«çŒœæƒ³çš„çš‡å† ï¼Œæœ€ç»ˆå¯èƒ½ä¸ä¼šæˆ´åœ¨ AI çš„å¤´ä¸Šã€‚</strong></p>
<p>å®ƒå¤§æ¦‚ç‡ä¼šæˆ´åœ¨ä¸‹ä¸€ä½äººç±»å¤©æ‰çš„å¤´ä¸Šâ€”â€”è€Œè¿™ä½å¤©æ‰çš„æ‰‹é‡Œï¼Œä¸€å®šç´§ç´§æ¡ç€é€šå¾€ AI ç®—åŠ›æ·±å¤„çš„é’¥åŒ™ã€‚</p>
<p><strong>ä¸æ˜¯ AI æˆ˜èƒœäº†æ•°å­¦ï¼Œè€Œæ˜¯äººç±»åˆ©ç”¨ AIï¼Œå†ä¸€æ¬¡æˆ˜èƒœäº†è‡ªå·±ã€‚</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ™ºèƒ½ä½“åŸºç¡€æ¦‚å¿µç¬”è®°]]></title>    <link>https://juejin.cn/post/7586192313635520546</link>    <guid>https://juejin.cn/post/7586192313635520546</guid>    <pubDate>2025-12-22T04:41:34.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7586192313635520546" data-draft-id="7586192313635487778" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ™ºèƒ½ä½“åŸºç¡€æ¦‚å¿µç¬”è®°"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-22T04:41:34.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æ³¥ç§è·èŠ±"/> <meta itemprop="url" content="https://juejin.cn/user/4212984289442030"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ™ºèƒ½ä½“åŸºç¡€æ¦‚å¿µç¬”è®°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4212984289442030/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æ³¥ç§è·èŠ±
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-22T04:41:34.000Z" title="Mon Dec 22 2025 04:41:34 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»34åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;color:rgba(46,36,36,.87);overflow-x:hidden}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{margin-bottom:5px;font-size:30px;font-weight:500}.markdown-body h1:before{content:"#";margin-right:10px;color:#1976d2}.markdown-body h2{font-size:28px;font-weight:400;border-left:5px solid #454545;margin-top:20px;padding-left:10px;transition:all .3s ease-in-out}.markdown-body h2:hover{border-color:#1976d2}.markdown-body h3{font-size:24px;font-weight:400;margin-top:15px;padding-bottom:0}.markdown-body h4{font-size:20px;font-weight:500}.markdown-body h5{font-size:16px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body h2:first-letter,.markdown-body h3:first-letter,.markdown-body p:first-letter{text-transform:capitalize}.markdown-body em{text-emphasis:dot;text-emphasis-position:under}.markdown-body img{display:block;margin:0 auto!important;max-width:100%;border-radius:2px;box-shadow:0 2px 4px -1px rgba(0,0,0,.2),0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12)!important}.markdown-body hr{position:relative;width:98%;height:1px;border:none;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,#ddd,#999,#ddd);overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background:#fff;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center}.markdown-body code{font-weight:900;word-break:break-word;border-radius:2px;overflow-x:auto;font-size:.87em;padding:.065em .4em;background-color:#fbe5e1;color:#c0341d}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;border-radius:0 4px}.markdown-body pre&gt;code{font-weight:400;font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{margin:0 4px;text-decoration:none;color:#027fff;transition:all .3s ease-in-out;padding-bottom:4px;border-bottom:2px solid transparent}.markdown-body a:after{content:"";display:inline-block;width:18px;height:18px;margin-left:4px;vertical-align:middle;background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMiIgaGVpZ2h0PSIyMiI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIiBzdHJva2U9IiMwMjdGRkYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCI+PHBhdGggZD0iTTkuODE1IDYuNDQ4bDEuOTM2LTEuOTM2YzEuMzM3LTEuMzM2IDMuNTgtMS4yNTkgNS4wMTMuMTczIDEuNDMyIDEuNDMyIDEuNTEgMy42NzYuMTczIDUuMDEzbC0xLjQ1MiAxLjQ1Mi0uOTY4Ljk2OGMtMS4zMzcgMS4zMzYtMy41ODEgMS4yNTktNS4wMTMtLjE3MyIvPjxwYXRoIGQ9Ik0xMS4yNjcgMTUuMzY3bC0xLjkzNiAxLjkzNmMtMS4zMzYgMS4zMzctMy41OCAxLjI2LTUuMDEyLS4xNzMtMS40MzItMS40MzItMS41MS0zLjY3Ni0uMTczLTUuMDEybDEuNDUyLTEuNDUyLjk2OC0uOTY4YzEuMzM2LTEuMzM3IDMuNTgtMS4yNiA1LjAxMi4xNzMiLz48L2c+PC9zdmc+);background-size:cover;background-repeat:no-repeat}.markdown-body a:hover{border-color:#027fff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body a.footnote-backref:after,.markdown-body a.footnote-ref:after,.markdown-body sup a:after{display:none!important}.markdown-body table{margin:0 auto 10px;font-size:12px;width:auto;max-width:100%;overflow:auto;border:2px solid #c6c6c6}.markdown-body table img{box-shadow:none!important}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body del{color:rgba(0,0,0,.6)}.markdown-body blockquote{position:relative;color:#666;padding:5px 23px 1px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:hsla(0,0%,78.4%,.12);transition:all .2s ease-in-out}.markdown-body blockquote:hover{border-color:#1976d2}.markdown-body blockquote:after,.markdown-body blockquote:before{position:absolute;font-size:24px;font-weight:800;line-height:24px;color:#cbcbcb;opacity:.6}.markdown-body blockquote:before{content:"â€œ";top:4px;left:6px}.markdown-body blockquote:after{content:"â€";right:8px;bottom:-8px}.markdown-body blockquote&gt;p,.markdown-body blockquote blockquote{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body details{outline:none;border:none;border-left:4px solid #1976d2;padding-left:10px;margin-left:4px}.markdown-body details summary{cursor:pointer;border:none;outline:none;background:#fff;margin:0 -17px}.markdown-body details summary:hover::-webkit-details-marker{color:#1976d2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">AIæ ¸å¿ƒæŠ€æœ¯ä½“ç³»ç¬”è®°ï¼šå¤§æ¨¡å‹ã€æ™ºèƒ½ä½“ä¸å…³é”®æ”¯æ’‘æŠ€æœ¯</h2>
<p>æœ¬æ–‡ç³»ç»Ÿæ¢³ç†AIé¢†åŸŸæ ¸å¿ƒæŠ€æœ¯æ¨¡å—â€”â€”å¤§æ¨¡å‹ï¼ˆLLMï¼‰ã€æ™ºèƒ½ä½“ï¼ˆAgentï¼‰ã€æç¤ºè¯ï¼ˆPromptï¼‰ã€æ£€ç´¢å¢å¼ºç”Ÿæˆï¼ˆRAGï¼‰ã€å·¥å…·è°ƒç”¨ï¼ˆFunction Callingï¼‰çš„å®šä¹‰ã€æ ¸å¿ƒèƒ½åŠ›ã€åº”ç”¨åœºæ™¯åŠå†…åœ¨å…³è”ï¼Œæ„å»ºå®Œæ•´çš„æŠ€æœ¯è®¤çŸ¥æ¡†æ¶ï¼ŒåŠ©åŠ›ç†è§£AIæŠ€æœ¯çš„è½åœ°é€»è¾‘ä¸ä»·å€¼è¾¹ç•Œã€‚</p>
<h2 data-id="heading-1">ä¸€ã€åŸºç¡€æ ¸å¿ƒï¼šå¤§æ¨¡å‹ï¼ˆLLMï¼‰â€”â€”AIèƒ½åŠ›çš„â€œåŸç”Ÿå¼•æ“â€</h2>
<p>å¤§æ¨¡å‹æ˜¯æ•´ä¸ªAIæŠ€æœ¯ä½“ç³»çš„åŸºç¡€ç»„ä»¶ï¼Œæä¾›æ ¸å¿ƒçš„è‡ªç„¶è¯­è¨€ç†è§£ä¸ç”Ÿæˆç­‰åŸºç¡€æ™ºèƒ½èƒ½åŠ›ï¼Œæ˜¯åç»­æŠ€æœ¯å»¶ä¼¸ï¼ˆå¦‚æ™ºèƒ½ä½“ã€RAGç­‰ï¼‰çš„å‰æã€‚</p>
<h3 data-id="heading-2">1.1 æ ¸å¿ƒå®šä¹‰</h3>
<p>åŸºäºTransformeræ¶æ„ã€æµ·é‡æ–‡æœ¬/å¤šæ¨¡æ€æ•°æ®é¢„è®­ç»ƒçš„é€šç”¨æ·±åº¦å­¦ä¹ æ¨¡å‹ï¼Œé€šå¸¸å…·å¤‡æ•°åäº¿è‡³æ•°ä¸‡äº¿çº§å‚æ•°ï¼Œé€šè¿‡è‡ªç›‘ç£å­¦ä¹ æŒæ¡è¯­è¨€ç»Ÿè®¡è§„å¾‹ä¸è¯­ä¹‰é€»è¾‘ï¼Œæ ¸å¿ƒä¼˜åŠ¿é›†ä¸­äºè‡ªç„¶è¯­è¨€ç†è§£ä¸ç”Ÿæˆã€ä»£ç è¡¥å…¨ã€ä¿¡æ¯æŠ½å–ã€é€»è¾‘æ¨ç†ç­‰åŸºç¡€æ™ºèƒ½èƒ½åŠ›ï¼Œæ˜¯äººå·¥æ™ºèƒ½çš„æ ¸å¿ƒåŸºç¡€ç»„ä»¶ã€‚</p>
<ul>
<li>è¡¥å……è¦ç‚¹ï¼šå¼ºè°ƒTransformeræ¶æ„ä¸è‡ªç›‘ç£å­¦ä¹ çš„æ ¸å¿ƒåœ°ä½ï¼Œæ˜ç¡®å‚æ•°è§„æ¨¡ä¸è®­ç»ƒèŒƒå¼æ˜¯å¤§æ¨¡å‹èƒ½åŠ›æ¶Œç°çš„å…³é”®ã€‚</li>
</ul>
<h3 data-id="heading-3">1.2 æ ¸å¿ƒç‰¹å¾</h3>
<ol>
<li>æ— åŸç”Ÿé•¿æœŸè®°å¿†ï¼šä»…æ”¯æŒçŸ­æœŸä¸Šä¸‹æ–‡è®°å¿†ï¼Œä¾èµ–å½“å‰ä¼šè¯çš„ä¸Šä¸‹æ–‡çª—å£ï¼ˆTokenæ•°é‡é™åˆ¶ï¼‰å­˜å‚¨ä¸´æ—¶ä¿¡æ¯ï¼Œä¼šè¯ç»“æŸåè®°å¿†è‡ªåŠ¨æ¸…ç©ºï¼Œæ— æ³•è·¨ä¼šè¯å¤ç”¨æ•°æ®ï¼›ä»…èƒ½é€šè¿‡å¤–éƒ¨å·¥å…·ï¼ˆå¦‚å‘é‡æ•°æ®åº“ï¼‰å®ç°é•¿æœŸè®°å¿†æ¨¡æ‹Ÿã€‚</li>
<li>è¢«åŠ¨å“åº”æ¨¡å¼ï¼šéœ€ä¾èµ–å¤–éƒ¨æŒ‡ä»¤ï¼ˆPromptï¼‰é©±åŠ¨è¿è¡Œï¼Œæ— è‡ªä¸»è®¾å®šç›®æ ‡ã€è§„åˆ’ä»»åŠ¡çš„æ„è¯†ï¼Œä»…èƒ½é’ˆå¯¹è¾“å…¥æŒ‡ä»¤è¾“å‡ºå¯¹åº”ç»“æœï¼Œä¸å…·å¤‡ä¸»åŠ¨æ„ŸçŸ¥ä¸å†³ç­–èƒ½åŠ›ã€‚</li>
<li>èƒ½åŠ›æ¶Œç°ç‰¹æ€§ï¼šå‚æ•°ã€æ•°æ®è§„æ¨¡è¾¾åˆ°é˜ˆå€¼åï¼Œä¼šæ¶Œç°å‡ºå°æ¨¡å‹ä¸å…·å¤‡çš„å¤æ‚æ¨ç†ã€å°æ ·æœ¬å­¦ä¹ ç­‰èƒ½åŠ›ï¼Œè¿™æ˜¯å¤§æ¨¡å‹åŒºåˆ«äºä¼ ç»ŸAIçš„æ ¸å¿ƒæ ‡å¿—ã€‚</li>
</ol>
<h3 data-id="heading-4">1.3 èƒ½åŠ›è¾¹ç•Œï¼ˆæ ¸å¿ƒçŸ­æ¿ï¼‰</h3>
<ol>
<li>ä¸Šä¸‹æ–‡çª—å£æœ‰é™ï¼šå¤„ç†é•¿æ–‡æœ¬æ—¶éœ€åˆ†æ®µè¾“å…¥ï¼Œæˆ–ç»“åˆæ£€ç´¢å·¥å…·è¾…åŠ©è¡¥å……ä¿¡æ¯ï¼Œçª—å£å¤–ä¿¡æ¯éš¾ä»¥æœ‰æ•ˆå…³è”ã€‚</li>
<li>å®æ—¶æ•°æ®è·å–å—é™ï¼šè®­ç»ƒæ•°æ®å­˜åœ¨æ—¶é—´æˆªæ­¢ç‚¹ï¼Œæ— æ³•åŸç”Ÿè”ç½‘è·å–æœ€æ–°åŠ¨æ€æ•°æ®ï¼Œéœ€é€šè¿‡æ’ä»¶/APIç­‰å·¥å…·æ‰©å±•ã€‚</li>
<li>ä¸“ä¸šé¢†åŸŸæ·±åº¦ä¸è¶³ï¼šé€šç”¨æ¨¡å‹åœ¨åŒ»ç–—ã€æ³•å¾‹ã€å·¥ä¸šç­‰å‚ç›´é¢†åŸŸçš„ä¸“ä¸šç²¾åº¦ä¸è¶³ï¼Œéœ€é€šè¿‡å¾®è°ƒã€RAGç­‰æ–¹å¼æå‡é€‚é…åº¦ã€‚</li>
<li>ç§åŸŸçŸ¥è¯†æ— æ³•åŸç”Ÿåº”ç­”ï¼šæœªçº³å…¥è®­ç»ƒæ•°æ®çš„ä¼ä¸šå†…éƒ¨æ–‡æ¡£ã€ä¸“å±å®¢æˆ·æ•°æ®ç­‰ç§åŸŸä¿¡æ¯ï¼Œæ¨¡å‹æ— æ³•åŸç”Ÿåº”ç­”ï¼Œéœ€é€šè¿‡çŸ¥è¯†æ³¨å…¥è§£å†³ã€‚</li>
<li>å­˜åœ¨â€œå¹»è§‰â€é£é™©ï¼šç”Ÿæˆå†…å®¹å¯èƒ½ä¸äº‹å®ä¸ç¬¦ï¼Œæ ¸å¿ƒè¯±å› æ˜¯ä¾èµ–å‚æ•°è®°å¿†+çŸ­æœŸä¸Šä¸‹æ–‡è®°å¿†ï¼Œç¼ºä¹é•¿æœŸäº‹å®æ ¡éªŒæœºåˆ¶ï¼Œåœ¨å¤æ‚æ¨ç†ä¸æ¨¡ç³Šä¿¡æ¯åœºæ™¯ä¸­æ›´æ˜“å‡ºç°ã€‚</li>
<li>ç¼ºä¹ä»»åŠ¡é—­ç¯èƒ½åŠ›ï¼šæ— æ³•è‡ªä¸»æ‹†è§£å¤æ‚å¤šæ­¥ä»»åŠ¡ï¼Œä¹Ÿä¸èƒ½æ ¹æ®æ‰§è¡Œç»“æœè°ƒæ•´ç­–ç•¥ï¼Œéœ€å¤–éƒ¨æ¡†æ¶ï¼ˆå¦‚æ™ºèƒ½ä½“ï¼‰å®ç°ä»»åŠ¡è§„åˆ’ä¸åé¦ˆè¿­ä»£ã€‚</li>
</ol>
<h3 data-id="heading-5">1.4 é€‚ç”¨åœºæ™¯</h3>
<p>é—®ç­”äº’åŠ¨ã€æ–‡æœ¬æ‘˜è¦ã€å†…å®¹æ”¹å†™ã€æ•°æ®åˆ†ç±»ã€è¯­è¨€ç¿»è¯‘ã€ä»£ç è‰ç¨¿ç”Ÿæˆç­‰å•ä¸€ã€çŸ­æµç¨‹ä»»åŠ¡ã€‚</p>
<ul>
<li>
<p>åœºæ™¯ç¤ºä¾‹ï¼š</p>
</li>
<li>
<p>å†…å®¹åˆ›ä½œï¼šå…¬ä¼—å·æ–‡ç« åˆç¨¿ã€äº§å“æ–‡æ¡ˆç”Ÿæˆï¼›</p>
</li>
<li>
<p>åŠå…¬æ•ˆç‡ï¼šä¼šè®®çºªè¦è‡ªåŠ¨æ•´ç†ã€é‚®ä»¶æ™ºèƒ½å›å¤ï¼›</p>
</li>
<li>
<p>ç ”å‘è¾…åŠ©ï¼šä»£ç ç‰‡æ®µè¡¥å…¨ã€ç®€å•Bugæ’æŸ¥ï¼›</p>
</li>
<li>
<p>æ•°æ®å¤„ç†ï¼šç»“æ„åŒ–æ•°æ®åˆ†ç±»ã€éç»“æ„åŒ–ä¿¡æ¯æŠ½å–ã€‚</p>
</li>
</ul>
<h2 data-id="heading-6">äºŒã€èƒ½åŠ›å‡çº§ï¼šæ™ºèƒ½ä½“ï¼ˆAgentï¼‰â€”â€”å¤§æ¨¡å‹çš„â€œä¸»åŠ¨æ‰§è¡Œè½½ä½“â€</h2>
<p>æ™ºèƒ½ä½“ä»¥å¤§æ¨¡å‹ä¸ºæ ¸å¿ƒâ€œå¤§è„‘â€ï¼Œé€šè¿‡æ•´åˆå¤šæ¨¡å—èƒ½åŠ›ï¼Œè§£å†³å¤§æ¨¡å‹çš„è¢«åŠ¨å“åº”å’Œä»»åŠ¡é—­ç¯çŸ­æ¿ï¼Œå®ç°ä»â€œå·¥å…·â€åˆ°â€œç³»ç»Ÿâ€çš„å‡çº§ã€‚</p>
<h3 data-id="heading-7">2.1 æ ¸å¿ƒå®šä¹‰</h3>
<p>ä»¥å¤§æ¨¡å‹ä¸ºæ ¸å¿ƒâ€œå¤§è„‘â€ï¼Œæ•´åˆæ„ŸçŸ¥æ¨¡å—ã€å†³ç­–è§„åˆ’æ¨¡å—ã€å·¥å…·è°ƒç”¨æ¨¡å—ã€è®°å¿†ç®¡ç†æ¨¡å—çš„å®Œæ•´æ™ºèƒ½ç³»ç»Ÿï¼Œå…·å¤‡è‡ªä¸»æ„ŸçŸ¥ç¯å¢ƒã€è®¾å®šç›®æ ‡ã€æ‹†è§£ä»»åŠ¡å¹¶æ‰§è¡Œé—­ç¯çš„èƒ½åŠ›ã€‚</p>
<h3 data-id="heading-8">2.2 æ ¸å¿ƒç‰¹å¾</h3>
<ol>
<li>å…·å¤‡é•¿æœŸè®°å¿†ä¸çŠ¶æ€ç®¡ç†ï¼šå¯é€šè¿‡å¤–éƒ¨æ•°æ®åº“/å‘é‡åº“ï¼Œç»´æŠ¤ä»»åŠ¡å…¨æµç¨‹çš„å…³é”®ä¿¡æ¯ä¸æ‰§è¡ŒçŠ¶æ€ï¼Œæ”¯æŒè·¨æ­¥éª¤ã€è·¨åœºæ™¯å¤ç”¨è®°å¿†ï¼Œä»æºå¤´å‡å°‘â€œè„‘è¡¥â€éœ€æ±‚ï¼Œå¼¥è¡¥å¤§æ¨¡å‹é•¿æœŸè®°å¿†ç¼ºå¤±çŸ­æ¿ã€‚</li>
<li>ä¸»åŠ¨é—­ç¯èƒ½åŠ›ï¼šå½¢æˆâ€œæ„ŸçŸ¥â†’è§„åˆ’â†’æ‰§è¡Œâ†’åæ€ä¼˜åŒ–â€çš„è‡ªä¸»å¾ªç¯ï¼Œæ— éœ€äººç±»æŒç»­å¹²é¢„ï¼Œè§£å†³å¤§æ¨¡å‹è¢«åŠ¨å“åº”ä¸ä»»åŠ¡é—­ç¯ç¼ºå¤±é—®é¢˜ã€‚</li>
</ol>
<h3 data-id="heading-9">2.3 æ ¸å¿ƒèƒ½åŠ›</h3>
<ol>
<li>ä»»åŠ¡æ‹†è§£ä¸è§„åˆ’ï¼šå°†å¤æ‚ç›®æ ‡æ‹†åˆ†ä¸ºå¯æ‰§è¡Œçš„å¤šæ­¥å­ä»»åŠ¡ï¼Œæ˜ç¡®å„æ­¥éª¤ä¼˜å…ˆçº§ä¸æ‰§è¡Œè·¯å¾„ï¼Œé€‚é…å¤æ‚ä»»åŠ¡éœ€æ±‚ã€‚</li>
<li>å·¥å…·è°ƒç”¨æ‰©å±•ï¼šçµæ´»è°ƒç”¨å¤–éƒ¨å·¥å…·ï¼ˆAPIã€æ•°æ®åº“ã€æµè§ˆå™¨ã€RAGç³»ç»Ÿç­‰ï¼‰ï¼Œå¼¥è¡¥å¤§æ¨¡å‹åŸç”ŸçŸ­æ¿ï¼ˆå¦‚å®æ—¶æ•°æ®è·å–ã€ä¸“ä¸šé¢†åŸŸç²¾åº¦ä¸è¶³ç­‰ï¼‰ã€‚</li>
<li>åŠ¨æ€è°ƒæ•´ç­–ç•¥ï¼šåŸºäºå·¥å…·åé¦ˆä¸æ‰§è¡Œç»“æœåæ€ä¼˜åŒ–ï¼Œåº”å¯¹ä»»åŠ¡ä¸­çš„å˜é‡ä¸çªå‘æƒ…å†µï¼Œä¿éšœä»»åŠ¡æ¨è¿›çš„ç¨³å®šæ€§ã€‚</li>
</ol>
<h3 data-id="heading-10">2.4 é€‚ç”¨åœºæ™¯</h3>
<p>è‡ªåŠ¨åŒ–å·¥ä½œæµæ­å»ºã€æ•°æ®é‡‡é›†ä¸åˆ†æå¤„ç†ã€é•¿é“¾è·¯å¤æ‚ä»»åŠ¡ï¼ˆå¦‚é¡¹ç›®å¼€å‘è¾…åŠ©ã€æ´»åŠ¨ç­–åˆ’ï¼‰ã€æ™ºèƒ½è¿ç»´ã€ä¸ªæ€§åŒ–åŠ©ç†ç­‰éœ€è‡ªä¸»é—­ç¯çš„åœºæ™¯ã€‚</p>
<ul>
<li>
<p>åœºæ™¯ç¤ºä¾‹ï¼š</p>
</li>
<li>
<p>é¡¹ç›®å¼€å‘è¾…åŠ©ï¼šè‡ªåŠ¨æ‹†è§£å¼€å‘ä»»åŠ¡ã€åˆ†é…æ¨¡å—ã€è°ƒç”¨ä»£ç æ£€æŸ¥å·¥å…·ã€ç”Ÿæˆå¼€å‘è¿›åº¦æŠ¥å‘Šï¼›</p>
</li>
<li>
<p>æ™ºèƒ½è¿ç»´ï¼šå®æ—¶ç›‘æµ‹ç³»ç»ŸçŠ¶æ€ã€è¯†åˆ«å¼‚å¸¸ã€è°ƒç”¨ä¿®å¤å·¥å…·æ‰§è¡Œåº”æ€¥å¤„ç†ã€è®°å½•è¿ç»´æ—¥å¿—ï¼›</p>
</li>
<li>
<p>ä¸ªæ€§åŒ–åŠ©ç†ï¼šæ ¹æ®ç”¨æˆ·æ—¥ç¨‹è§„åˆ’æ¯æ—¥è¡Œç¨‹ã€è°ƒç”¨ç¥¨åŠ¡APIé¢„è®¢äº¤é€šã€æ¨é€ç›¸å…³è¡Œç¨‹æé†’ã€‚</p>
</li>
</ul>
<h3 data-id="heading-11">2.5 ä¸å¤§æ¨¡å‹çš„æ ¸å¿ƒå…³è”</h3>
<ol>
<li>å¤§æ¨¡å‹æ˜¯æ™ºèƒ½ä½“çš„â€œæ ¸å¿ƒç»„ä»¶â€ï¼šä¸ºæ™ºèƒ½ä½“æä¾›åŸºç¡€çš„ç†è§£ã€æ¨ç†èƒ½åŠ›ï¼Œæ˜¯å†³ç­–è§„åˆ’æ¨¡å—çš„æ ¸å¿ƒæ”¯æ’‘ï¼Œå†³å®šæ™ºèƒ½ä½“çš„åŸºç¡€æ™ºèƒ½ä¸Šé™ã€‚</li>
<li>æ™ºèƒ½ä½“æ˜¯å¤§æ¨¡å‹çš„â€œè½åœ°è½½ä½“â€ï¼šé€šè¿‡è¡¥å……è®°å¿†ç®¡ç†ã€å·¥å…·è°ƒç”¨ã€ä»»åŠ¡é—­ç¯èƒ½åŠ›ï¼Œè®©å¤§æ¨¡å‹ä»â€œè¢«åŠ¨å“åº”å·¥å…·â€å‡çº§ä¸ºâ€œä¸»åŠ¨æ‰§è¡Œç³»ç»Ÿâ€ï¼Œé€‚é…å¤æ‚å®é™…åœºæ™¯ã€‚</li>
<li>å…³é”®è”åŠ¨ï¼šæ™ºèƒ½ä½“é€šè¿‡ä¼˜åŒ–â€œè®°å¿†æœºåˆ¶â€ï¼ˆå¤–éƒ¨é•¿æœŸè®°å¿†ï¼‰å’Œâ€œäº‹å®æ ¡éªŒæœºåˆ¶â€ï¼ˆå·¥å…·è°ƒç”¨+RAGï¼‰ï¼Œé’ˆå¯¹æ€§è§£å†³å¤§æ¨¡å‹çš„â€œè®°å¿†çŸ­æ¿â€ä¸â€œå¹»è§‰é£é™©â€ï¼Œå®ç°1+1&gt;2çš„åº”ç”¨æ•ˆæœã€‚</li>
</ol>
<h2 data-id="heading-12">ä¸‰ã€äº¤äº’æ¡¥æ¢ï¼šæç¤ºè¯ï¼ˆPromptï¼‰â€”â€”é©±åŠ¨æ™ºèƒ½çš„â€œç²¾å‡†æŒ‡ä»¤ç³»ç»Ÿâ€</h2>
<p>æç¤ºè¯æ˜¯ç”¨æˆ·ä¸å¤§æ¨¡å‹/æ™ºèƒ½ä½“äº¤äº’çš„æ ¸å¿ƒåª’ä»‹ï¼Œé€šè¿‡ç»“æ„åŒ–æŒ‡ä»¤å¯¹é½åŒæ–¹é¢„æœŸï¼ŒåŒæ—¶å¼¥è¡¥å¤§æ¨¡å‹çš„éƒ¨åˆ†åŸç”ŸçŸ­æ¿ï¼ˆå¦‚å¹»è§‰ã€è¾“å‡ºä¸è§„èŒƒç­‰ï¼‰ã€‚</p>
<h3 data-id="heading-13">3.1 æ ¸å¿ƒå®šä¹‰</h3>
<p>å‘å¤§æ¨¡å‹è¾“å…¥çš„ç»“æ„åŒ–æŒ‡ä»¤ã€é—®é¢˜æˆ–ä¸Šä¸‹æ–‡ä¿¡æ¯çš„é›†åˆï¼Œç”¨äºç²¾å‡†å¼•å¯¼æ¨¡å‹ç†è§£ä»»åŠ¡ç›®æ ‡ã€çº¦æŸæ¡ä»¶ä¸è¾“å‡ºè¦æ±‚ï¼Œè¿›è€Œç”Ÿæˆç¬¦åˆé¢„æœŸçš„ç»“æœã€‚</p>
<h3 data-id="heading-14">3.2 æ ¸å¿ƒä½œç”¨</h3>
<ol>
<li>å¼¥è¡¥å¤§æ¨¡å‹åŸç”ŸçŸ­æ¿ï¼šæ˜ç¡®ä»»åŠ¡è¾¹ç•Œä¸äº‹å®çº¦æŸï¼Œå‡å°‘â€œå¹»è§‰â€é£é™©ï¼›é™å®šè¾“å‡ºèŒƒå¼ï¼Œé™ä½åç»­å†…å®¹åŠ å·¥æˆæœ¬ã€‚</li>
<li>å¯¹é½ç”¨æˆ·ä¸æ¨¡å‹é¢„æœŸï¼šå°†æ¨¡ç³Šéœ€æ±‚ï¼ˆå¦‚â€œå†™ä¸€ç¯‡å¥½çš„æ–‡æ¡ˆâ€ï¼‰è½¬åŒ–ä¸ºæ¨¡å‹å¯ç†è§£çš„æ˜ç¡®æŒ‡ä»¤ï¼ˆå¦‚â€œå†™ä¸€ç¯‡é¢å‘å¹´è½»å¥³æ€§çš„æŠ¤è‚¤å“æ¨å¹¿æ–‡æ¡ˆï¼Œé£æ ¼æ´»æ³¼ï¼Œçªå‡ºä¿æ¹¿åŠŸæ•ˆï¼Œ300å­—ä»¥å†…â€ï¼‰ï¼Œé¿å…ç”Ÿæˆå†…å®¹åç¦»æ ¸å¿ƒç›®æ ‡ã€‚</li>
<li>é€‚é…ä¸“ä¸šåœºæ™¯éœ€æ±‚ï¼šé€šè¿‡è§’è‰²ä¸è§„åˆ™å®šä¹‰ï¼Œè®©æ¨¡å‹è¾“å‡ºè´´åˆç‰¹å®šé¢†åŸŸï¼ˆå¦‚å‰ç«¯å¼€å‘ã€æ•°æ®åˆ†æã€åŒ»ç–—è¯Šæ–­ï¼‰çš„ä¸“ä¸šå†…å®¹ï¼Œæå‡è¾“å‡ºç²¾å‡†åº¦ã€‚</li>
</ol>
<h3 data-id="heading-15">3.3 æ ¸å¿ƒç»„æˆï¼ˆç»“æ„åŒ–Promptå…­è¦ç´ ï¼‰</h3>
<ol>
<li>è§’è‰²å®šä½ï¼šæ˜ç¡®æ¨¡å‹çš„ä»»åŠ¡èº«ä»½ï¼ˆå¦‚â€œèµ„æ·±Vueå‰ç«¯å·¥ç¨‹å¸ˆâ€â€œæ™ºèƒ½ä½“ä»»åŠ¡è§„åˆ’å¸ˆâ€â€œåŒ»ç–—æ–‡æ¡ˆå®¡æ ¸ä¸“å®¶â€ï¼‰ï¼Œå¼•å¯¼æ¨¡å‹åŒ¹é…å¯¹åº”è§’è‰²çš„ä¸“ä¸šç”¨è¯­ä¸æ€ç»´é€»è¾‘ã€‚</li>
<li>ä»»åŠ¡æè¿°ï¼šæ¸…æ™°é˜è¿°æ ¸å¿ƒéœ€æ±‚ä¸è¾¾æˆæ ‡å‡†ï¼Œé¿å…æ¨¡ç³Šè¡¨è¿°ï¼Œä¾‹å¦‚â€œç”ŸæˆVue3å•†å“åˆ—è¡¨ç»„ä»¶ä»£ç ï¼Œéœ€æ”¯æŒä¸‹æ‹‰åˆ·æ–°ä¸ä¸Šæ‹‰åŠ è½½ï¼Œå…¼å®¹ç§»åŠ¨ç«¯â€ã€‚</li>
<li>å·¥å…·è°ƒç”¨è¦æ±‚ï¼ˆå¯é€‰ï¼‰ï¼šé’ˆå¯¹æ™ºèƒ½ä½“ä¸“å±åœºæ™¯ï¼Œæ˜ç¡®éœ€è¦è°ƒç”¨çš„å¤–éƒ¨å·¥å…·åŠè°ƒç”¨è§„åˆ™ï¼Œä¾‹å¦‚â€œè°ƒç”¨æµè§ˆå™¨æ£€ç´¢Vueå®˜æ–¹æœ€æ–°APIæ–‡æ¡£ï¼Œä¼˜å…ˆå‚è€ƒComposition APIç”¨æ³•â€ã€‚</li>
<li>å·¥ä½œæµè¦æ±‚ï¼ˆå¯é€‰ï¼‰ï¼šæ˜ç¡®ä»»åŠ¡æ‰§è¡Œçš„æ­¥éª¤é¡ºåºä¸è¡”æ¥è§„åˆ™ï¼Œä¾‹å¦‚â€œå…ˆæ¢³ç†ç»„ä»¶æ ¸å¿ƒåŠŸèƒ½ç‚¹ï¼Œå†ç¼–å†™ä»£ç ï¼Œæœ€åæ·»åŠ è¯¦ç»†æ³¨é‡Šâ€ï¼Œé€‚ç”¨äºå¤šæ­¥éª¤ã€æœ‰å…ˆåé¡ºåºçš„å¤æ‚ä»»åŠ¡ã€‚</li>
<li>è¾“å‡ºæ ¼å¼ï¼šæŒ‡å®šå†…å®¹çš„å‘ˆç°ç±»å‹ä¸è§„èŒƒç»†èŠ‚ï¼Œä¾‹å¦‚â€œå¸¦è¯¦ç»†æ³¨é‡Šçš„JavaScriptä»£ç â€â€œMarkdownè¡¨æ ¼â€â€œåˆ†ç‚¹å¼æŠ¥å‘Šâ€ï¼ŒåŒæ—¶æ˜ç¡®æ’ç‰ˆã€ç¯‡å¹…ã€ç‰ˆæœ¬å…¼å®¹ç­‰è¦æ±‚ã€‚</li>
<li>å‚è€ƒç¤ºä¾‹ï¼ˆå¯é€‰ï¼‰ï¼šæä¾›1-2ç»„è¾“å…¥è¾“å‡ºèŒƒä¾‹ï¼Œå¸®åŠ©æ¨¡å‹å¿«é€Ÿç†è§£ä»»åŠ¡æ ‡å‡†ï¼Œé€‚ç”¨äºå¤æ‚æˆ–å®šåˆ¶åŒ–éœ€æ±‚ï¼ˆå¦‚â€œæŒ‰ä»¥ä¸‹ç¤ºä¾‹æ ¼å¼ç”Ÿæˆæ•°æ®åˆ†ç±»ç»“æœï¼šè¾“å…¥ï¼šè‹¹æœï¼›è¾“å‡ºï¼šæ°´æœ-å¸¸è§é²œæœâ€ï¼‰ã€‚</li>
<li>çº¦æŸæ¡ä»¶ï¼šåˆ’å®šå†…å®¹çš„è¾¹ç•Œä¸ç¦å¿Œï¼Œä¾‹å¦‚â€œç¦æ­¢ç¼–é€ æœªç»éªŒè¯çš„Vue APIç”¨æ³•â€â€œå›ç­”é•¿åº¦æ§åˆ¶åœ¨300å­—ä»¥å†…â€â€œé¿å…ä½¿ç”¨ä¸“ä¸šæœ¯è¯­ï¼Œé‡‡ç”¨é€šä¿—è¡¨è¾¾â€ã€‚</li>
</ol>
<h3 data-id="heading-16">3.4 ç¼–å†™å…³é”®åŸåˆ™</h3>
<ol>
<li>ç»“æ„åŒ–ä¼˜å…ˆï¼šé¿å…å¤§æ®µæ— æ¡ç†æ–‡æœ¬ï¼Œé‡‡ç”¨åˆ†æ®µã€ç¼–å·ã€åˆ†ç‚¹å½¢å¼æ˜ç¡®é€»è¾‘å…³ç³»ï¼Œé™ä½æ¨¡å‹ç†è§£æˆæœ¬ã€‚</li>
<li>æŒ‡ä»¤ç²¾å‡†åŒ–ï¼šå‡å°‘æ¨¡ç³Šè¡¨è¿°ï¼Œç”¨å…·ä½“ã€é‡åŒ–è¦æ±‚æ›¿ä»£æŠ½è±¡æè¿°ï¼Œä¾‹å¦‚å°†â€œå†™ä¸€ä¸ªç»„ä»¶â€ä¼˜åŒ–ä¸ºâ€œå†™ä¸€ä¸ªåŸºäºComposition APIçš„Vue3å•†å“åˆ—è¡¨ç»„ä»¶ï¼Œæ”¯æŒåˆ†é¡µåŠŸèƒ½â€ã€‚</li>
<li>ä¸Šä¸‹æ–‡é€‚é…æ€§ï¼šå¤šè½®å¯¹è¯åœºæ™¯ä¸‹ï¼ŒåµŒå…¥å†å²ä¼šè¯å…³é”®ä¿¡æ¯ï¼Œåˆ©ç”¨æ¨¡å‹çŸ­æœŸä¸Šä¸‹æ–‡è®°å¿†æå‡å›ç­”è¿è´¯æ€§ï¼Œä¾‹å¦‚â€œåŸºäºä¸Šä¸€è½®ç”Ÿæˆçš„ç»„ä»¶æ¡†æ¶ï¼Œè¡¥å……æœç´¢åŠŸèƒ½æ¨¡å—ä»£ç â€ã€‚</li>
</ol>
<h3 data-id="heading-17">3.5 ä½¿ç”¨åœºæ™¯</h3>
<ol>
<li>ç³»ç»Ÿæç¤ºè¯ï¼šä¼šè¯åˆå§‹åŒ–æ—¶æ³¨å…¥çš„å…¨å±€æŒ‡ä»¤ï¼Œå®šä¹‰æ¨¡å‹åŸºç¡€è§’è‰²ã€é€šç”¨è§„åˆ™ä¸å“åº”èŒƒå¼ï¼Œè´¯ç©¿æ•´ä¸ªå¯¹è¯ï¼Œé€‚ç”¨äºé•¿æœŸç¨³å®šçš„äº¤äº’åœºæ™¯ï¼ˆå¦‚ä¼ä¸šæ™ºèƒ½å®¢æœçš„è§’è‰²å®šä¹‰ï¼‰ã€‚</li>
<li>ç”¨æˆ·æç¤ºè¯ï¼šé’ˆå¯¹å…·ä½“éœ€æ±‚è¾“å…¥çš„å³æ—¶æŒ‡ä»¤ï¼Œè¡¥å……ä»»åŠ¡ç»†èŠ‚ã€çº¦æŸä¸è¾“å‡ºåå¥½ï¼Œé€‚é…å•æ¬¡/å•è½®ä»»åŠ¡ï¼ˆå¦‚ä¸´æ—¶ç”Ÿæˆä¸€ä»½ä¼šè®®çºªè¦ï¼‰ã€‚</li>
</ol>
<h2 data-id="heading-18">å››ã€çŸ¥è¯†å¢å¼ºï¼šæ£€ç´¢å¢å¼ºç”Ÿæˆï¼ˆRAGï¼‰â€”â€”å¤§æ¨¡å‹çš„â€œå¼€å·è€ƒè¯•å·¥å…·â€</h2>
<p>RAGé€šè¿‡èåˆå¤–éƒ¨çŸ¥è¯†åº“æ£€ç´¢ä¸å¤§æ¨¡å‹ç”Ÿæˆèƒ½åŠ›ï¼Œé’ˆå¯¹æ€§è§£å†³å¤§æ¨¡å‹çš„å¹»è§‰ã€ç§åŸŸçŸ¥è¯†ç¼ºå¤±ã€çŸ¥è¯†æ»åç­‰æ ¸å¿ƒçŸ­æ¿ï¼Œæ˜¯å¤§æ¨¡å‹çŸ¥è¯†è¡¥å……çš„æ ¸å¿ƒæŠ€æœ¯æ¡†æ¶ã€‚</p>
<h3 data-id="heading-19">4.1 æ ¸å¿ƒå®šä¹‰</h3>
<p>æ£€ç´¢å¢å¼ºç”Ÿæˆï¼ˆRetrieval-Augmented Generationï¼ŒRAGï¼‰æ˜¯èåˆæ£€ç´¢å™¨ï¼ˆè·å–ç›¸å…³æ–‡æ¡£ï¼‰ä¸ç”Ÿæˆå™¨ï¼ˆå¤§æ¨¡å‹ï¼‰çš„æŠ€æœ¯æ¡†æ¶ï¼Œæ ¸å¿ƒæ˜¯ç”Ÿæˆç­”æ¡ˆå‰å…ˆä»æƒå¨å¤–éƒ¨çŸ¥è¯†åº“ï¼ˆå«ç§åŸŸæ–‡æ¡£ã€ä¸“ä¸šèµ„æ–™ã€å®æ—¶æ•°æ®ç­‰ï¼‰æ£€ç´¢ç›¸å…³äº‹å®ä¿¡æ¯ï¼Œå°†å…¶ä½œä¸ºå‚è€ƒè¡¥å……åˆ°æç¤ºè¯ä¸­ï¼Œå†é©±åŠ¨å¤§æ¨¡å‹ç”Ÿæˆå‡†ç¡®ã€å¯è¿½æº¯çš„ç»“æœï¼Œæœ¬è´¨æ˜¯ä¸ºå¤§æ¨¡å‹æä¾›â€œå¼€å·è€ƒè¯•â€èƒ½åŠ›ã€‚</p>
<h3 data-id="heading-20">4.2 æ ¸å¿ƒä»·å€¼ï¼ˆç²¾å‡†è§£å†³å¤§æ¨¡å‹å››å¤§ç—›ç‚¹ï¼‰</h3>
<ol>
<li>å¯¹æŠ—å¹»è§‰é£é™©ï¼šå›ç­”åŸºäºæ£€ç´¢åˆ°çš„çœŸå®æƒå¨å†…å®¹ï¼Œç¡®ä¿ä¿¡æ¯æœ‰ä¾æ®ä¸”å¯æº¯æºï¼Œæ˜¾è‘—é™ä½ç¼–é€ é”™è¯¯ä¿¡æ¯çš„æ¦‚ç‡ã€‚</li>
<li>è¡¥å……ç§åŸŸçŸ¥è¯†ï¼šé€šè¿‡æ£€ç´¢ä¼ä¸šå†…éƒ¨æ–‡æ¡£ã€ä¸“å±å®¢æˆ·æ•°æ®ç­‰ç§åŸŸèµ„æºï¼Œè§£å†³å¤§æ¨¡å‹â€œç§åŸŸçŸ¥è¯†æ— æ³•å›ç­”â€çš„é—®é¢˜ï¼Œæ— éœ€å¯¹å¤§æ¨¡å‹è¿›è¡Œå…¨é‡å¾®è°ƒã€‚</li>
<li>ä¿æŒçŸ¥è¯†æ–°é²œï¼šæ— éœ€é‡æ–°è®­ç»ƒæ¨¡å‹ï¼Œä»…æ›´æ–°å¤–éƒ¨çŸ¥è¯†åº“å³å¯çº³å…¥æœ€æ–°ä¿¡æ¯ï¼ˆå¦‚è¡Œä¸šæ–°è§„ã€çƒ­ç‚¹äº‹ä»¶ï¼‰ï¼Œçªç ´è®­ç»ƒæ•°æ®æ—¶é—´å±€é™ã€‚</li>
<li>æå‡ä¸“ä¸šç²¾åº¦ï¼šä¾æ‰˜å‚ç›´é¢†åŸŸæƒå¨èµ„æ–™ï¼ˆå¦‚åŒ»ç–—æ–‡çŒ®ã€è¡Œä¸šè§„èŒƒã€æ³•å¾‹æ¡æ–‡ï¼‰ï¼Œè®©è¾“å‡ºæ›´è´´åˆä¸“ä¸šåœºæ™¯éœ€æ±‚ï¼Œæå‡å‚ç›´é¢†åŸŸåº”ç”¨ä»·å€¼ã€‚</li>
</ol>
<h3 data-id="heading-21">4.3 æ ¸å¿ƒå·¥ä½œæµç¨‹ï¼ˆäº”é˜¶æ®µé—­ç¯ï¼‰</h3>
<ol>
<li>æ–‡æ¡£åˆ†å—ï¼šå°†é•¿æ–‡æœ¬ï¼ˆå¦‚PDFã€ä¼ä¸šæ‰‹å†Œã€å­¦æœ¯è®ºæ–‡ï¼‰æ‹†è§£ä¸ºè¯­ä¹‰å®Œæ•´çš„å°å—ï¼Œå¹³è¡¡ä¸Šä¸‹æ–‡å®Œæ•´æ€§ä¸æ£€ç´¢ç²¾å‡†åº¦ï¼Œé¿å…å› æ–‡æœ¬è¿‡é•¿å¯¼è‡´çš„æ£€ç´¢åå·®ã€‚</li>
<li>ç´¢å¼•æ„å»ºï¼šé€šè¿‡åµŒå…¥æ¨¡å‹ï¼ˆå¦‚BERTã€Sentence-BERTï¼‰å°†æ–‡æœ¬å—è½¬æ¢ä¸ºé«˜ç»´å‘é‡ï¼Œå­˜å…¥å‘é‡æ•°æ®åº“ï¼ˆå¦‚FAISSã€Chromaã€Milvusï¼‰ï¼Œå½¢æˆå¯å¿«é€Ÿæ£€ç´¢çš„å‘é‡ç´¢å¼•ã€‚</li>
<li>ç›®æ ‡æ£€ç´¢ï¼šå°†ç”¨æˆ·é—®é¢˜å‘é‡åŒ–åï¼Œåœ¨å‘é‡æ•°æ®åº“ä¸­é€šè¿‡è¯­ä¹‰ç›¸ä¼¼åº¦åŒ¹é…ï¼Œå¬å›è¯­ä¹‰æœ€ç›¸å…³çš„Top-Kæ–‡æœ¬å—ï¼ˆKå€¼å¯æ ¹æ®åœºæ™¯è°ƒæ•´ï¼Œé€šå¸¸ä¸º3-5ï¼‰ï¼Œç²¾å‡†ç­›é€‰æœ‰ç”¨ä¿¡æ¯ã€‚</li>
<li>æç¤ºå¢å¼ºï¼šå°†æ£€ç´¢åˆ°çš„æ–‡æœ¬ç‰‡æ®µä¸ç”¨æˆ·é—®é¢˜ã€ä»»åŠ¡è¦æ±‚ã€çº¦æŸæ¡ä»¶æ•´åˆï¼Œæ„å»ºç»“æ„åŒ–æç¤ºè¯ï¼Œä¸ºå¤§æ¨¡å‹æä¾›æ˜ç¡®çš„äº‹å®å‚è€ƒã€‚</li>
<li>ç”Ÿæˆè¾“å‡ºï¼šå¤§æ¨¡å‹åŸºäºå¢å¼ºæç¤ºè¯ï¼Œæ•´åˆå‚è€ƒä¿¡æ¯ç”Ÿæˆæµç•…ã€å‡†ç¡®çš„å›ç­”ï¼ŒåŒæ—¶å¯å…³è”åŸå§‹æ–‡æ¡£æ¥æºï¼ˆå¦‚æ–‡æ¡£åç§°ã€é¡µç ï¼‰ï¼Œæ–¹ä¾¿éªŒè¯ä¿¡æ¯çœŸå®æ€§ã€‚</li>
</ol>
<h3 data-id="heading-22">4.4 å…³é”®æŠ€æœ¯ç»†èŠ‚</h3>
<ol>
<li>åˆ†å—ç­–ç•¥ï¼šå¸¸ç”¨å›ºå®šå°ºå¯¸åˆ†å—ï¼ˆæŒ‰Tokenæ•°é‡æ‹†åˆ†ï¼Œè®¾10%-20%é‡å éƒ¨åˆ†ï¼Œä¿éšœè¯­ä¹‰è¿è´¯æ€§ï¼‰å’Œé€’å½’åˆ†å—ï¼ˆæŒ‰æ®µè½ã€å¥å­è‡ªé€‚åº”æ‹†åˆ†ï¼Œé€‚é…ç»“æ„åŒ–æ–‡æ¡£ï¼‰ã€‚</li>
<li>æ£€ç´¢æ ¸å¿ƒï¼šç”±åµŒå…¥æ¨¡å‹ï¼ˆè´Ÿè´£è¯­ä¹‰è½¬æ¢ï¼Œå†³å®šå‘é‡è¡¨å¾çš„ç²¾å‡†åº¦ï¼‰å’Œå‘é‡æ•°æ®åº“ï¼ˆè´Ÿè´£å¿«é€Ÿè¿‘ä¼¼åŒ¹é…ï¼Œå†³å®šæ£€ç´¢æ•ˆç‡ï¼‰ç»„æˆï¼ŒäºŒè€…å…±åŒå½±å“æ£€ç´¢è´¨é‡ã€‚</li>
<li>æº¯æºèƒ½åŠ›ï¼šç”Ÿæˆç»“æœæ—¶å…³è”åŸå§‹æ–‡æ¡£æ¥æºï¼Œå®ç°â€œç­”æ¡ˆ-ä¾æ®â€çš„ä¸€ä¸€å¯¹åº”ï¼Œä¾¿äºåç»­äº‹å®æ ¡éªŒä¸è´£ä»»è¿½æº¯ï¼Œé€‚ç”¨äºåŒ»ç–—ã€æ³•å¾‹ç­‰ä¸¥è°¨åœºæ™¯ã€‚</li>
<li>ä¼˜åŒ–æŠ€å·§ï¼šé€šè¿‡é‡æ’åºæ¨¡å‹ï¼ˆå¦‚Cross-BERTï¼‰è¿‡æ»¤ä½ç›¸å…³åº¦æ–‡æœ¬ï¼›é€šè¿‡ä¸Šä¸‹æ–‡å‹ç¼©å‡å°‘Tokenå ç”¨ï¼Œé€‚é…å¤§æ¨¡å‹ä¸Šä¸‹æ–‡çª—å£é™åˆ¶ï¼›é‡‡ç”¨å¤šè½®æ£€ç´¢è¡¥å……é—æ¼ä¿¡æ¯ï¼Œæå‡æ£€ç´¢å…¨é¢æ€§ã€‚</li>
</ol>
<h3 data-id="heading-23">4.5 ä¸»æµåº”ç”¨åœºæ™¯</h3>
<ol>
<li>ä¼ä¸šçŸ¥è¯†ç®¡ç†ï¼šå¦‚é“¶æ³°å•†ä¸šé€šè¿‡RAGæ„å»ºå†…éƒ¨çŸ¥è¯†åº“ï¼Œå®ç°å‘˜å·¥æ‰‹å†Œã€ä¸šåŠ¡æµç¨‹ã€äº§å“èµ„æ–™çš„å¿«é€ŸæŸ¥è¯¢ï¼Œæå‡å†…éƒ¨åä½œæ•ˆç‡ã€‚</li>
<li>æ™ºèƒ½å®¢æœ/é—®ç­”ï¼šå¦‚ä¼¯ä¿Šç§‘æŠ€â€œAIé€šè¯†å°åŠ©æ‰‹â€ï¼Œé€šè¿‡æ£€ç´¢ä¼ä¸šå•†å“æ•°æ®åº“ï¼Œå®ç°å•†å“æ ‡ç­¾æ˜ å°„ã€åº“å­˜è°ƒåº¦ç­‰åœºæ™¯çš„ç§’çº§å“åº”ï¼Œæå‡å®¢æˆ·æœåŠ¡ä½“éªŒã€‚</li>
<li>ä¸“ä¸šé¢†åŸŸæ”¯æŒï¼šåŒ»ç–—è¯Šæ–­å»ºè®®ï¼ˆæ£€ç´¢ä¸´åºŠæŒ‡å—ã€ç—…ä¾‹æ–‡çŒ®ï¼‰ã€æ³•å¾‹æ¡æ–‡è§£è¯»ï¼ˆæ£€ç´¢æ³•å¾‹æ³•è§„ã€åˆ¤ä¾‹èµ„æ–™ï¼‰ã€é‡‘èé£é™©è¯„ä¼°ï¼ˆæ£€ç´¢è¡Œä¸šæ”¿ç­–ã€å¸‚åœºæŠ¥å‘Šï¼‰ã€‚</li>
<li>é•¿æ–‡æœ¬å¤„ç†ï¼šè®ºæ–‡è¾…åŠ©å†™ä½œï¼ˆæ£€ç´¢å‚è€ƒæ–‡çŒ®ã€å­¦æœ¯è§‚ç‚¹ï¼‰ã€åˆåŒå®¡æ ¸ï¼ˆæ£€ç´¢æ³•å¾‹æ¡æ¬¾ã€è¡Œä¸šæ ‡å‡†ï¼‰ã€ä¹¦ç±æ‘˜è¦ï¼ˆæ£€ç´¢æ ¸å¿ƒç« èŠ‚å†…å®¹ï¼‰ã€‚</li>
<li>äº‹å®æ ¡éªŒï¼šå¯¹å¤§æ¨¡å‹ç”Ÿæˆå†…å®¹çš„å…³é”®æ•°æ®ï¼ˆå¦‚ç»Ÿè®¡æ•°æ®ã€æ”¿ç­–æ¡æ¬¾ï¼‰è¿›è¡Œæ£€ç´¢éªŒè¯ï¼Œä¿®æ­£è¿‡æ—¶æˆ–é”™è¯¯ä¿¡æ¯ï¼Œä¿éšœå†…å®¹å‡†ç¡®æ€§ã€‚</li>
</ol>
<h3 data-id="heading-24">4.6 å±€é™æ€§ä¸ä¼˜åŒ–æ–¹å‘</h3>
<ol>
<li>ç°å­˜å±€é™ï¼šæ£€ç´¢ç²¾åº¦å—åµŒå…¥æ¨¡å‹æ€§èƒ½ä¸åˆ†å—ç­–ç•¥å½±å“ï¼Œæ˜“å‡ºç°â€œæ¼æ£€â€â€œè¯¯æ£€â€ï¼›é•¿çŸ¥è¯†åº“åœºæ™¯ä¸‹ï¼ˆå¦‚ç™¾ä¸‡çº§æ–‡æ¡£ï¼‰å­˜åœ¨æ£€ç´¢æ•ˆç‡ç“¶é¢ˆï¼›æ— æ³•ç›´æ¥å¤„ç†éæ–‡æœ¬æ•°æ®ï¼ˆå¦‚å›¾ç‰‡ã€éŸ³é¢‘ã€è¡¨æ ¼ï¼‰ã€‚</li>
<li>ä¼˜åŒ–æ–¹å‘ï¼šç»“åˆå¤šæ¨¡æ€åµŒå…¥æ¨¡å‹æ”¯æŒè·¨åª’ä½“æ£€ç´¢ï¼ˆå¦‚å›¾ç‰‡+æ–‡æœ¬æ··åˆæ£€ç´¢ï¼‰ï¼›å¼•å…¥çŸ¥è¯†å›¾è°±æå‡ç»“æ„åŒ–çŸ¥è¯†æ£€ç´¢èƒ½åŠ›ï¼Œè§£å†³æ–‡æœ¬æ£€ç´¢çš„æ­§ä¹‰é—®é¢˜ï¼›é€šè¿‡å¼ºåŒ–å­¦ä¹ ä¼˜åŒ–æ£€ç´¢-ç”Ÿæˆè”åŠ¨é€»è¾‘ï¼Œæå‡æ•´ä½“æ•ˆæœã€‚</li>
</ol>
<h3 data-id="heading-25">4.7 ä¸å…¶ä»–æŠ€æœ¯çš„å…³è”</h3>
<ol>
<li>ä¸å¤§æ¨¡å‹ï¼šRAGæ˜¯å¤§æ¨¡å‹çš„â€œèƒ½åŠ›å»¶ä¼¸å·¥å…·â€ï¼Œæ— éœ€æ”¹å˜å¤§æ¨¡å‹å‚æ•°ï¼Œé€šè¿‡å¤–éƒ¨çŸ¥è¯†è¡¥å……çš„æ–¹å¼ï¼Œä½æˆæœ¬å¼¥è¡¥å…¶ç§åŸŸçŸ¥è¯†ç¼ºå¤±ã€å¹»è§‰ã€çŸ¥è¯†æ»åç­‰çŸ­æ¿ã€‚</li>
<li>ä¸æ™ºèƒ½ä½“ï¼šRAGæ˜¯æ™ºèƒ½ä½“çš„æ ¸å¿ƒç»„æˆéƒ¨åˆ†ï¼Œä¸ºæ™ºèƒ½ä½“æä¾›ç¨³å®šçš„å¤–éƒ¨çŸ¥è¯†æ£€ç´¢èƒ½åŠ›ï¼Œé…åˆå·¥å…·è°ƒç”¨æ¨¡å—æ”¯æ’‘å¤æ‚ä»»åŠ¡é—­ç¯ï¼ˆå¦‚æ™ºèƒ½ä½“è§„åˆ’ä»»åŠ¡æ—¶ï¼Œé€šè¿‡RAGæ£€ç´¢ç›¸å…³æµç¨‹è§„èŒƒï¼‰ã€‚</li>
<li>ä¸æç¤ºè¯ï¼šRAGæ£€ç´¢åˆ°çš„äº‹å®ä¿¡æ¯æ˜¯æç¤ºè¯çš„é‡è¦ç»„æˆéƒ¨åˆ†ï¼Œé€šè¿‡â€œé—®é¢˜+äº‹å®å‚è€ƒâ€çš„å¢å¼ºæç¤ºè¯ï¼Œè®©å¤§æ¨¡å‹ç”Ÿæˆçš„å†…å®¹æ›´ç²¾å‡†ã€æœ‰ä¾æ®ã€‚</li>
</ol>
<h2 data-id="heading-26">äº”ã€äº¤äº’å»¶ä¼¸ï¼šå·¥å…·è°ƒç”¨ï¼ˆFunction Callingï¼‰â€”â€”æ™ºèƒ½ä½“çš„â€œç°å®äº¤äº’æ¥å£â€</h2>
<p>Function Callingæ˜¯å¤§æ¨¡å‹/æ™ºèƒ½ä½“ä¸å¤–éƒ¨ç³»ç»Ÿäº¤äº’çš„æ ¸å¿ƒæŠ€æœ¯ï¼Œè®©æ¨¡å‹çªç ´â€œçº¯æ–‡æœ¬ç”Ÿæˆâ€çš„å±€é™ï¼Œå…·å¤‡è·å–å®æ—¶æ•°æ®ã€æ‰§è¡Œä¸“ä¸šæ“ä½œçš„èƒ½åŠ›ï¼Œæ˜¯è¿æ¥AIä¸ç°å®ä¸–ç•Œçš„å…³é”®æ¡¥æ¢ã€‚</p>
<h3 data-id="heading-27">5.1 æ ¸å¿ƒå®šä¹‰</h3>
<p>Function Callingæ˜¯å¤§æ¨¡å‹/æ™ºèƒ½ä½“ä¸å¤–éƒ¨ç³»ç»Ÿã€å·¥å…·ã€APIäº¤äº’çš„æ ¸å¿ƒæŠ€æœ¯ï¼ŒæŒ‡æ¨¡å‹æ ¹æ®ä»»åŠ¡éœ€æ±‚è‡ªä¸»è¯†åˆ«å¹¶è°ƒç”¨é¢„è®¾å‡½æ•°/æ¥å£ï¼Œè·å–å¤–éƒ¨æ•°æ®æˆ–æ‰§è¡Œç‰¹å®šæ“ä½œï¼Œå†å°†ç»“æœæ•´åˆåˆ°ç”Ÿæˆå†…å®¹ä¸­ï¼Œæœ¬è´¨æ˜¯è®©æ¨¡å‹å…·å¤‡ä¸ç°å®ä¸–ç•Œäº¤äº’çš„èƒ½åŠ›ã€‚</p>
<h3 data-id="heading-28">5.2 æ ¸å¿ƒä»·å€¼ï¼ˆå¼¥è¡¥å¤§æ¨¡å‹ä¸‰å¤§æ ¸å¿ƒçŸ­æ¿ï¼‰</h3>
<ol>
<li>è·å–å®æ—¶åŠ¨æ€æ•°æ®ï¼šè°ƒç”¨æµè§ˆå™¨ã€è‚¡ç¥¨è¡Œæƒ…APIã€å¤©æ°”APIç­‰ï¼Œè§£å†³å¤§æ¨¡å‹è®­ç»ƒæ•°æ®â€œæ—¶é—´æˆªæ­¢ç‚¹â€é—®é¢˜ï¼Œæ”¯æŒæŸ¥è¯¢æœ€æ–°æ–°é—»ã€å®æ—¶è‚¡ä»·ã€å½“æ—¥å¤©æ°”ç­‰åŠ¨æ€ä¿¡æ¯ã€‚</li>
<li>æ‰§è¡Œä¸“ä¸šè®¡ç®—/æ“ä½œï¼šè°ƒç”¨ä»£ç ç¼–è¯‘å™¨ã€æ•°æ®åº“æŸ¥è¯¢æ¥å£ã€Excelå·¥å…·ç­‰ï¼Œå®Œæˆå¤æ‚è¿ç®—ï¼ˆå¦‚æ•°å­¦å»ºæ¨¡ã€ç»Ÿè®¡åˆ†æï¼‰ã€æ•°æ®è¯»å†™ï¼ˆå¦‚æŸ¥è¯¢ä¼ä¸šé”€å”®æ•°æ®åº“ã€ä¿®æ”¹è¡¨æ ¼æ•°æ®ï¼‰ç­‰ä»»åŠ¡ã€‚</li>
<li>è”åŠ¨ç¬¬ä¸‰æ–¹å·¥å…·é“¾ï¼šå¯¹æ¥è¡Œä¸šä¸“å±å·¥å…·ï¼ˆå¦‚CADè®¾è®¡æ¥å£ã€åŒ»ç–—å½±åƒåˆ†æå·¥å…·ã€è´¢åŠ¡æŠ¥é”€ç³»ç»Ÿï¼‰ã€è‡ªåŠ¨åŒ–å·¥ä½œæµï¼ˆå¦‚é’‰é’‰æ¶ˆæ¯æ¨é€ã€é‚®ä»¶å‘é€ï¼‰ï¼Œæ‹“å±•å‚ç›´é¢†åŸŸè½åœ°åœºæ™¯ã€‚</li>
</ol>
<h3 data-id="heading-29">5.3 æ ¸å¿ƒå·¥ä½œæµç¨‹ï¼ˆå››æ­¥æ‰§è¡Œé—­ç¯ï¼‰</h3>
<ol>
<li>ä»»åŠ¡è§£æä¸å‡½æ•°åŒ¹é…ï¼šå¤§æ¨¡å‹æ¥æ”¶æŒ‡ä»¤åï¼Œåˆ†æä»»åŠ¡æ‰€éœ€çš„å¤–éƒ¨èƒ½åŠ›ï¼Œä»é¢„è®¾å‡½æ•°åˆ—è¡¨ä¸­åŒ¹é…æœ€åˆé€‚çš„å‡½æ•°ï¼ˆæ˜ç¡®å‡½æ•°åã€å…¥å‚æ ¼å¼ã€åŠŸèƒ½æè¿°ï¼‰ï¼Œåˆ¤æ–­æ˜¯å¦éœ€è¦è°ƒç”¨å·¥å…·ã€‚</li>
<li>å‚æ•°ç”Ÿæˆä¸æ ¼å¼æ ¡éªŒï¼šæ¨¡å‹æ ¹æ®ä»»åŠ¡éœ€æ±‚ç”Ÿæˆå‡½æ•°æ‰€éœ€çš„æ ‡å‡†åŒ–å…¥å‚ï¼ˆå¦‚è°ƒç”¨â€œå¤©æ°”æŸ¥è¯¢â€å‡½æ•°æ—¶ç”Ÿæˆ<code>city: ä¸Šæµ·, date: 2025-12-19</code>ï¼‰ï¼Œå¹¶ä¸¥æ ¼éµå¾ªé¢„è®¾æ ¼å¼ï¼ˆå¦‚JSONã€XMLï¼‰ï¼Œé¿å…è°ƒç”¨å¤±è´¥ã€‚</li>
<li>å‡½æ•°æ‰§è¡Œä¸ç»“æœè¿”å›ï¼šå¤–éƒ¨æ‰§è¡Œç¯å¢ƒï¼ˆå¦‚LangChainã€AgentBuilderï¼‰è°ƒç”¨ç›®æ ‡å‡½æ•°/APIï¼Œæ‰§è¡Œå…·ä½“æ“ä½œå¹¶è·å–ç»“æœï¼ˆå¦‚è¿”å›ä¸Šæµ·å½“æ—¥å¤©æ°”â€œæ™´ï¼Œ10-18â„ƒâ€ï¼‰ï¼ŒåŒæ—¶å¤„ç†è°ƒç”¨å¼‚å¸¸ï¼ˆå¦‚å‚æ•°é”™è¯¯ã€æ¥å£è¶…æ—¶ï¼‰ã€‚</li>
<li>ç»“æœæ•´åˆä¸ç”Ÿæˆè¾“å‡ºï¼šæ¨¡å‹å°†å¤–éƒ¨å·¥å…·æ‰§è¡Œç»“æœä¸è‡ªèº«æ¨ç†èƒ½åŠ›ç»“åˆï¼Œç”Ÿæˆè‡ªç„¶è¯­è¨€å›ç­”ï¼Œå¯æ ‡æ³¨æ•°æ®æ¥æºï¼ˆå¦‚â€œæ•°æ®æ¥æºï¼šXXå¤©æ°”APIâ€ï¼‰ï¼Œæå‡ç»“æœå¯ä¿¡åº¦ã€‚</li>
</ol>
<h3 data-id="heading-30">5.4 å…³é”®æŠ€æœ¯ç»†èŠ‚</h3>
<ol>
<li>å‡½æ•°å®šä¹‰è§„èŒƒï¼šéœ€æä¾›æ¸…æ™°çš„å‡½æ•°æè¿°æ–‡æ¡£ï¼ŒåŒ…å«åŠŸèƒ½è¯´æ˜ã€å…¥å‚è¦æ±‚ï¼ˆåç§°ã€ç±»å‹ã€å¿…å¡«é¡¹ã€å–å€¼èŒƒå›´ï¼‰ã€å‡ºå‚æ ¼å¼ã€é”™è¯¯ç è¯´æ˜ï¼Œå¸®åŠ©æ¨¡å‹å‡†ç¡®ç†è§£å‡½æ•°åŠŸèƒ½ã€‚</li>
<li>æ ¼å¼çº¦æŸä¸å®¹é”™æœºåˆ¶ï¼šé€šè¿‡Promptå¼ºåˆ¶æ¨¡å‹è¾“å‡ºæ ‡å‡†åŒ–è°ƒç”¨æ ¼å¼ï¼ˆå¦‚â€œæ‰€æœ‰å‡½æ•°è°ƒç”¨å¿…é¡»é‡‡ç”¨JSONæ ¼å¼ï¼Œç¤ºä¾‹ï¼š{"name":"get_weather","parameters":{"city":"ä¸Šæµ·","date":"2025-12-19"}}â€ï¼‰ï¼›è®¾ç½®å®¹é”™é€»è¾‘ï¼Œå½“å‚æ•°ç¼ºå¤±æˆ–æ ¼å¼é”™è¯¯æ—¶ï¼Œä¸»åŠ¨è¿½é—®ç”¨æˆ·è¡¥å……ä¿¡æ¯ï¼Œæˆ–é‡æ–°ç”Ÿæˆå‚æ•°ã€‚</li>
<li>å®‰å…¨ç®¡æ§ç­–ç•¥ï¼šå¯¹è°ƒç”¨æƒé™åˆ†çº§ç®¡ç†ï¼ˆåŒºåˆ†â€œåªè¯»æ¥å£â€å¦‚æ•°æ®æŸ¥è¯¢ã€â€œè¯»å†™æ¥å£â€å¦‚æ•°æ®ä¿®æ”¹ã€â€œæ‰§è¡Œæ¥å£â€å¦‚ç³»ç»Ÿæ“ä½œï¼‰ï¼Œé¿å…è¯¯æ“ä½œé£é™©ï¼›è®¾ç½®æ“ä½œè¶…æ—¶ä¸å¼‚å¸¸å¤„ç†æœºåˆ¶ï¼ˆå¦‚æ¥å£è°ƒç”¨è¶…æ—¶åé‡è¯•3æ¬¡ï¼Œå¤±è´¥åˆ™æç¤ºç”¨æˆ·ï¼‰ï¼Œé¿å…ä»»åŠ¡ä¸­æ–­ã€‚</li>
</ol>
<h3 data-id="heading-31">5.5 ä¸RAGçš„åŒºåˆ«ä¸ååŒ</h3>






























<table><thead><tr><th>ç‰¹æ€§</th><th>Function Callingï¼ˆå·¥å…·è°ƒç”¨ï¼‰</th><th>RAGï¼ˆæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰</th></tr></thead><tbody><tr><td>æ ¸å¿ƒç›®æ ‡</td><td>ä¸å¤–éƒ¨å·¥å…·äº¤äº’ï¼Œæ‰§è¡ŒåŠ¨æ€æ“ä½œã€è·å–å®æ—¶æ•°æ®</td><td>ä»é™æ€çŸ¥è¯†åº“æ£€ç´¢äº‹å®ä¿¡æ¯ï¼Œè¡¥å……æ¨¡å‹çŸ¥è¯†</td></tr><tr><td>æ•°æ®ç±»å‹</td><td>å®æ—¶åŠ¨æ€æ•°æ®ã€å¯æ‰§è¡Œæ“ä½œç»“æœ</td><td>é™æ€ç»“æ„åŒ–/éç»“æ„åŒ–æ–‡æ¡£çŸ¥è¯†</td></tr><tr><td>æ ¸å¿ƒä¼˜åŠ¿</td><td>åŠ¨æ€äº¤äº’ã€å®æ—¶æ€§å¼ºã€å¯æ‰§è¡Œæ“ä½œ</td><td>çŸ¥è¯†è¡¥å……æˆæœ¬ä½ã€å¯æº¯æºã€ç¨³å®šæ€§é«˜</td></tr><tr><td>åº”ç”¨åœºæ™¯</td><td>å®æ—¶æŸ¥è¯¢ã€ä¸“ä¸šè®¡ç®—ã€å·¥å…·è”åŠ¨ã€è‡ªåŠ¨åŒ–æ“ä½œ</td><td>ç§åŸŸçŸ¥è¯†é—®ç­”ã€æ–‡æ¡£è§£è¯»ã€äº‹å®æ ¡éªŒã€ä¸“ä¸šèµ„æ–™æŸ¥è¯¢</td></tr></tbody></table>
<p>ååŒæ¨¡å¼ï¼šåœ¨æ™ºèƒ½ä½“æ¶æ„ä¸­ï¼ŒFunction Callingä¸RAGå½¢æˆäº’è¡¥â€”â€”å½“RAGæ£€ç´¢çš„é™æ€çŸ¥è¯†ä¸è¶³ä»¥å®Œæˆä»»åŠ¡æ—¶ï¼Œæ¨¡å‹å¯è°ƒç”¨å·¥å…·è·å–å®æ—¶æ•°æ®ï¼›å½“å·¥å…·è°ƒç”¨éœ€è¦ä¸“ä¸šçŸ¥è¯†æ”¯æ’‘æ—¶ï¼Œå¯é€šè¿‡RAGæ£€ç´¢ç›¸å…³è§„èŒƒã€‚ä¾‹å¦‚â€œå…ˆä»ä¼ä¸šçŸ¥è¯†åº“ï¼ˆRAGï¼‰æ£€ç´¢äº§å“åŸºç¡€å‚æ•°ï¼Œå†è°ƒç”¨ç”µå•†å¹³å°APIï¼ˆFunction Callingï¼‰è·å–æœ€æ–°é”€é‡æ•°æ®ï¼Œæœ€ç»ˆç”Ÿæˆé”€å”®åˆ†ææŠ¥å‘Šâ€ï¼Œå®ç°é™æ€çŸ¥è¯†ä¸åŠ¨æ€æ•°æ®çš„æ·±åº¦èåˆã€‚</p>
<h3 data-id="heading-32">5.6 ä¸å¤§æ¨¡å‹/æ™ºèƒ½ä½“çš„å…³è”</h3>
<ol>
<li>ä¸å¤§æ¨¡å‹ï¼šFunction Callingæ˜¯å¤§æ¨¡å‹ä»â€œè¢«åŠ¨ç”Ÿæˆâ€è½¬å‘â€œä¸»åŠ¨äº¤äº’â€çš„å…³é”®èƒ½åŠ›ï¼Œä½†å•ç‹¬å¤§æ¨¡å‹çš„å·¥å…·è°ƒç”¨éœ€ä¾èµ–äººå·¥å®šä¹‰å‡½æ•°åˆ—è¡¨å’Œæ ¼å¼çº¦æŸï¼Œæ— æ³•è‡ªä¸»è§„åˆ’è°ƒç”¨é€»è¾‘ã€‚</li>
<li>ä¸æ™ºèƒ½ä½“ï¼šFunction Callingæ˜¯æ™ºèƒ½ä½“å·¥å…·æ¨¡å—çš„æ ¸å¿ƒæŠ€æœ¯ï¼Œä¸ä»»åŠ¡è§„åˆ’æ¨¡å—ã€è®°å¿†æ¨¡å—æ·±åº¦è”åŠ¨â€”â€”æ™ºèƒ½ä½“å¯è‡ªä¸»å†³å®šâ€œä½•æ—¶è°ƒç”¨å·¥å…·ã€è°ƒç”¨å“ªç§å·¥å…·ã€å¦‚ä½•å¤„ç†è°ƒç”¨ç»“æœâ€ï¼Œå¹¶å°†æ‰§è¡Œç»“æœå­˜å…¥é•¿æœŸè®°å¿†ï¼Œç”¨äºåç»­å†³ç­–ä¼˜åŒ–ï¼Œå®ç°ç«¯åˆ°ç«¯çš„ä»»åŠ¡é—­ç¯ã€‚</li>
</ol>
<h3 data-id="heading-33">5.7 å…¸å‹åº”ç”¨åœºæ™¯</h3>
<ol>
<li>æ™ºèƒ½æ•°æ®åˆ†æï¼šè°ƒç”¨ä¼ä¸šæ•°æ®åº“æ¥å£æå–é”€å”®æ•°æ®â†’è°ƒç”¨Pythonç¼–è¯‘å™¨è¿›è¡Œè¶‹åŠ¿å»ºæ¨¡â†’ç”Ÿæˆå¯è§†åŒ–åˆ†ææŠ¥å‘Šâ†’æ¨é€è‡³ç®¡ç†å±‚é‚®ç®±ã€‚</li>
<li>è‡ªåŠ¨åŒ–åŠå…¬åŠ©æ‰‹ï¼šè¯†åˆ«ç”¨æˆ·éœ€æ±‚â€œæ•´ç†æœ¬å‘¨ä¼šè®®çºªè¦â€â†’è°ƒç”¨ä¼ä¸šé‚®ç®±APIè·å–ä¼šè®®é‚®ä»¶â†’è°ƒç”¨è¯­éŸ³è½¬æ–‡å­—å·¥å…·å¤„ç†ä¼šè®®å½•éŸ³â†’ç”Ÿæˆçºªè¦å¹¶æ¨é€è‡³é’‰é’‰ç¾¤ã€‚</li>
<li>å®æ—¶ä¿¡æ¯æŸ¥è¯¢åŠ©æ‰‹ï¼šå›ç­”ç”¨æˆ·é—®é¢˜â€œä»Šæ—¥ä¸Šè¯æŒ‡æ•°æ”¶ç›˜æƒ…å†µâ€â†’è°ƒç”¨è‚¡ç¥¨è¡Œæƒ…APIè·å–å®æ—¶æ•°æ®â†’æ•´åˆæ•°æ®ç”Ÿæˆè‡ªç„¶è¯­è¨€å›ç­”ï¼Œæ ‡æ³¨æ•°æ®æ¥æºä¸æŸ¥è¯¢æ—¶é—´ã€‚</li>
<li>å‚ç›´é¢†åŸŸå·¥å…·è”åŠ¨ï¼šåŒ»ç–—æ™ºèƒ½ä½“è°ƒç”¨å½±åƒåˆ†æAPIå¤„ç†CTå½±åƒâ†’é€šè¿‡RAGæ£€ç´¢ç›¸å…³ç—…ä¾‹æ–‡çŒ®â†’ç»“åˆä¸¤è€…ç»“æœç”Ÿæˆè¯Šæ–­å»ºè®®ï¼›å·¥ä¸šæ™ºèƒ½ä½“è°ƒç”¨è®¾å¤‡ä¼ æ„Ÿå™¨APIè·å–è¿è¡Œæ•°æ®â†’è°ƒç”¨æ•…éšœè¯Šæ–­å·¥å…·è¯†åˆ«å¼‚å¸¸â†’ç”Ÿæˆè¿ç»´æ–¹æ¡ˆã€‚</li>
</ol>
<h2 data-id="heading-34">å…­ã€å·¥ä½œæµâ€”â€”AIæŠ€æœ¯è½åœ°çš„â€œæµç¨‹åŒ–è½½ä½“â€</h2>
<p>å·¥ä½œæµæ˜¯AIæŠ€æœ¯ä»â€œé›¶æ•£èƒ½åŠ›â€èµ°å‘â€œè§„æ¨¡åŒ–è½åœ°â€çš„å…³é”®æ”¯æ’‘ï¼Œé€šè¿‡å®šä¹‰æ ‡å‡†åŒ–çš„ä»»åŠ¡æ‰§è¡Œæ­¥éª¤ã€è§’è‰²åˆ†å·¥ä¸è¡”æ¥è§„åˆ™ï¼Œå°†å¤§æ¨¡å‹ã€æ™ºèƒ½ä½“ã€RAGã€å·¥å…·è°ƒç”¨ç­‰æŠ€æœ¯æ¨¡å—ä¸²è”èµ·æ¥ï¼Œå®ç°å¤æ‚ä¸šåŠ¡éœ€æ±‚çš„ç«¯åˆ°ç«¯é—­ç¯å¤„ç†ã€‚å…¶æ ¸å¿ƒä»·å€¼åœ¨äºé™ä½æŠ€æœ¯è½åœ°çš„å¤æ‚åº¦ï¼Œæå‡ä»»åŠ¡æ‰§è¡Œçš„ç¨³å®šæ€§ä¸å¯å¤ç”¨æ€§ã€‚</p>
<h3 data-id="heading-35">6.1 æ ¸å¿ƒå®šä¹‰</h3>
<p>AIé¢†åŸŸçš„å·¥ä½œæµæ˜¯æŒ‡ä¸ºå®Œæˆç‰¹å®šä¸šåŠ¡ç›®æ ‡ï¼Œå¯¹å¤šæ­¥ä»»åŠ¡è¿›è¡Œç»“æ„åŒ–æ‹†è§£ï¼Œæ˜ç¡®å„æ­¥éª¤çš„æ‰§è¡Œä¸»ä½“ï¼ˆå¤§æ¨¡å‹/æ™ºèƒ½ä½“ï¼‰ã€ä¾èµ–èµ„æºï¼ˆå¤–éƒ¨å·¥å…·/çŸ¥è¯†åº“ï¼‰ã€è¾“å…¥è¾“å‡ºæ ‡å‡†åŠè¡”æ¥æ¡ä»¶çš„æµç¨‹æ¡†æ¶ã€‚å®ƒå¹¶éç‹¬ç«‹æŠ€æœ¯ï¼Œè€Œæ˜¯æ•´åˆå„ç±»AIæŠ€æœ¯çš„â€œä¸²è”å™¨â€ï¼Œè®©åˆ†æ•£çš„æŠ€æœ¯èƒ½åŠ›å½¢æˆååŒæ•ˆåº”ã€‚</p>
<h3 data-id="heading-36">6.2 ä¸æ ¸å¿ƒæŠ€æœ¯æ¨¡å—çš„å…³è”</h3>
<ol>
<li>ä¸æ™ºèƒ½ä½“ï¼šå·¥ä½œæµæ˜¯æ™ºèƒ½ä½“ä»»åŠ¡è§„åˆ’çš„å…·è±¡åŒ–å‘ˆç°ï¼Œæ™ºèƒ½ä½“çš„â€œä»»åŠ¡æ‹†è§£ä¸è§„åˆ’â€èƒ½åŠ›éœ€ä¾æ‰˜å·¥ä½œæµå®šä¹‰çš„æ­¥éª¤é€»è¾‘ï¼Œç¡®ä¿ä»»åŠ¡æ¨è¿›çš„æœ‰åºæ€§ï¼›åŒæ—¶ï¼Œæ™ºèƒ½ä½“çš„åŠ¨æ€è°ƒæ•´ç­–ç•¥å¯åå“ºå·¥ä½œæµä¼˜åŒ–ï¼Œå®ç°æµç¨‹çš„æŸ”æ€§é€‚é…ã€‚</li>
<li>ä¸æç¤ºè¯ï¼šæç¤ºè¯ä¸­çš„â€œå·¥ä½œæµè¦æ±‚â€æ˜¯å·¥ä½œæµåœ¨äº¤äº’å±‚çš„å…·ä½“ä½“ç°ï¼Œé€šè¿‡å‘å¤§æ¨¡å‹/æ™ºèƒ½ä½“ä¼ é€’æ­¥éª¤è§„åˆ™ï¼Œå¼•å¯¼å…¶æŒ‰é¢„è®¾æµç¨‹æ‰§è¡Œä»»åŠ¡ï¼›è€Œå·¥ä½œæµåˆ™ä¸ºæç¤ºè¯æä¾›äº†æ ‡å‡†åŒ–çš„æµç¨‹æ¡†æ¶ï¼Œé¿å…æ­¥éª¤æè¿°çš„æ¨¡ç³Šæ€§ã€‚</li>
<li>ä¸RAG+å·¥å…·è°ƒç”¨ï¼šå·¥ä½œæµæ˜ç¡®äº†RAGï¼ˆé™æ€çŸ¥è¯†è¡¥å……ï¼‰ä¸å·¥å…·è°ƒç”¨ï¼ˆåŠ¨æ€æ“ä½œæ‰§è¡Œï¼‰çš„è§¦å‘æ—¶æœºä¸è¡”æ¥é€»è¾‘ï¼Œä¾‹å¦‚â€œå…ˆé€šè¿‡RAGæ£€ç´¢ä¸šåŠ¡è§„èŒƒâ†’å†è°ƒç”¨æ•°æ®æŸ¥è¯¢å·¥å…·è·å–å®æ“æ•°æ®â†’æœ€åç”±å¤§æ¨¡å‹ç”Ÿæˆåˆ†ææŠ¥å‘Šâ€ï¼Œç¡®ä¿ä¸¤ç±»æŠ€æœ¯ç²¾å‡†é…åˆã€‚</li>
<li>ä¸å¤§æ¨¡å‹ï¼šå¤§æ¨¡å‹æ˜¯å·¥ä½œæµå„æ­¥éª¤çš„æ ¸å¿ƒæ‰§è¡Œå•å…ƒï¼Œè´Ÿè´£ç†è§£ä»»åŠ¡éœ€æ±‚ã€å¤„ç†æ–‡æœ¬ä¿¡æ¯ã€ç”Ÿæˆä¸­é—´ç»“æœï¼›å·¥ä½œæµåˆ™ä¸ºå¤§æ¨¡å‹é™å®šäº†æ‰§è¡Œè¾¹ç•Œï¼Œé¿å…å…¶å› ç¼ºä¹æµç¨‹çº¦æŸè€Œåç¦»ä»»åŠ¡ç›®æ ‡ã€‚</li>
</ol>
<h3 data-id="heading-37">6.3 æ ¸å¿ƒç±»å‹ä¸åº”ç”¨åœºæ™¯</h3>
<ol>
<li>å›ºå®šæµç¨‹å‹å·¥ä½œæµï¼šé€‚ç”¨äºæ­¥éª¤æ˜ç¡®ã€è§„åˆ™å›ºå®šçš„æ ‡å‡†åŒ–ä»»åŠ¡ï¼Œæ ¸å¿ƒæ˜¯é€šè¿‡æµç¨‹å›ºåŒ–æå‡æ•ˆç‡ã€‚ - åœºæ™¯ç¤ºä¾‹ï¼šä¼ä¸šå‘ç¥¨å®¡æ ¸ï¼ˆæ­¥éª¤ï¼šè°ƒç”¨OCRå·¥å…·è¯†åˆ«å‘ç¥¨ä¿¡æ¯â†’é€šè¿‡RAGæ£€ç´¢æŠ¥é”€è§„èŒƒâ†’è°ƒç”¨è´¢åŠ¡ç³»ç»Ÿæ ¡éªŒé‡‘é¢â†’ç”Ÿæˆå®¡æ ¸ç»“æœå¹¶æ¨é€ï¼‰ã€å®¢æˆ·å’¨è¯¢åº”ç­”ï¼ˆæ­¥éª¤ï¼šæ¥æ”¶ç”¨æˆ·é—®é¢˜â†’RAGæ£€ç´¢çŸ¥è¯†åº“â†’å¤§æ¨¡å‹ç”Ÿæˆæ ‡å‡†åŒ–å›ç­”â†’äººå·¥å¤æ ¸ï¼ˆå¯é€‰ï¼‰â†’æ¨é€ç»“æœï¼‰ã€‚</li>
<li>æŸ”æ€§é€‚é…å‹å·¥ä½œæµï¼šé€‚ç”¨äºéœ€æ±‚å¤šå˜ã€æ­¥éª¤å­˜åœ¨ä¸ç¡®å®šæ€§çš„å¤æ‚ä»»åŠ¡ï¼Œæ ¸å¿ƒæ˜¯ç»“åˆæ™ºèƒ½ä½“çš„åŠ¨æ€è°ƒæ•´èƒ½åŠ›å®ç°æµç¨‹é€‚é…ã€‚ - åœºæ™¯ç¤ºä¾‹ï¼šé¡¹ç›®æ–¹æ¡ˆç­–åˆ’ï¼ˆæ­¥éª¤ï¼šæ˜ç¡®ç­–åˆ’ç›®æ ‡â†’æ™ºèƒ½ä½“æ‹†è§£å­ä»»åŠ¡ï¼ˆå¸‚åœºè°ƒç ”ã€éœ€æ±‚åˆ†æã€æ–¹æ¡ˆæ’°å†™ç­‰ï¼‰â†’è°ƒç”¨æµè§ˆå™¨è·å–è¡Œä¸šæ•°æ®ï¼ˆå·¥å…·è°ƒç”¨ï¼‰â†’RAGæ£€ç´¢åŒç±»æ–¹æ¡ˆå‚è€ƒâ†’å¤§æ¨¡å‹ç”Ÿæˆåˆç¨¿â†’æ™ºèƒ½ä½“åæ€ä¼˜åŒ–â†’è¾“å‡ºç»ˆç¨¿ï¼‰ã€ä¸ªæ€§åŒ–è¯Šç–—è¾…åŠ©ï¼ˆæ­¥éª¤ï¼šè·å–æ‚£è€…ç—…å†â†’è°ƒç”¨å½±åƒåˆ†æå·¥å…·å¤„ç†æ£€æŸ¥ç»“æœâ†’RAGæ£€ç´¢ä¸´åºŠæŒ‡å—â†’å¤§æ¨¡å‹ç”Ÿæˆåˆæ­¥è¯Šç–—å»ºè®®â†’æ™ºèƒ½ä½“ç»“åˆåŒ»ç”Ÿåé¦ˆè°ƒæ•´â†’å½¢æˆæœ€ç»ˆæ–¹æ¡ˆï¼‰ã€‚</li>
</ol>
<h3 data-id="heading-38">6.4 è½åœ°å…³é”®è¦ç‚¹</h3>
<ol>
<li>æ­¥éª¤æ‹†è§£é¢—ç²’åº¦ï¼šå¹³è¡¡â€œç²¾ç»†åŒ–â€ä¸â€œé«˜æ•ˆæ€§â€ï¼Œè¿‡ç»†çš„æ­¥éª¤ä¼šå¢åŠ äº¤äº’æˆæœ¬ï¼Œè¿‡ç²—çš„æ­¥éª¤åˆ™ä¼šé™ä½å¯æ§æ€§ï¼›å»ºè®®æŒ‰â€œå•ä¸€èŒè´£åŸåˆ™â€æ‹†è§£ï¼Œç¡®ä¿æ¯ä¸ªæ­¥éª¤ä»…å®Œæˆä¸€é¡¹æ ¸å¿ƒä»»åŠ¡ã€‚</li>
<li>è¾“å…¥è¾“å‡ºæ ‡å‡†åŒ–ï¼šä¸ºæ¯ä¸ªæ­¥éª¤å®šä¹‰æ¸…æ™°çš„è¾“å…¥æ ¼å¼ï¼ˆå¦‚æ•°æ®ç±»å‹ã€å‚æ•°è¦æ±‚ï¼‰ä¸è¾“å‡ºæ ‡å‡†ï¼ˆå¦‚ç»“æœæ ¼å¼ã€é”™è¯¯ç è§„èŒƒï¼‰ï¼Œé¿å…å› æ•°æ®ä¸å…¼å®¹å¯¼è‡´æµç¨‹ä¸­æ–­ã€‚</li>
<li>å¼‚å¸¸å¤„ç†æœºåˆ¶ï¼šé¢„è®¾æµç¨‹ä¸­æ–­çš„åº”å¯¹ç­–ç•¥ï¼Œä¾‹å¦‚å·¥å…·è°ƒç”¨å¤±è´¥æ—¶çš„é‡è¯•é€»è¾‘ã€RAGæ£€ç´¢æ— ç»“æœæ—¶çš„å…œåº•æ–¹æ¡ˆï¼ˆå¦‚è½¬äººå·¥å¤„ç†ï¼‰ã€å¤§æ¨¡å‹ç”Ÿæˆå†…å®¹ä¸ç¬¦åˆè¦æ±‚æ—¶çš„é‡æ–°ç”Ÿæˆè§„åˆ™ã€‚</li>
<li>å¯è¿½æº¯æ€§è®¾è®¡ï¼šè®°å½•å·¥ä½œæµå„æ­¥éª¤çš„æ‰§è¡Œæ—¥å¿—ï¼ˆå¦‚æ‰§è¡Œæ—¶é—´ã€è°ƒç”¨å·¥å…·ã€ç”Ÿæˆç»“æœã€æ“ä½œä¸»ä½“ï¼‰ï¼Œä¾¿äºåç»­é—®é¢˜æ’æŸ¥ã€æµç¨‹ä¼˜åŒ–ä¸è´£ä»»è¿½æº¯ã€‚</li>
</ol>
<h3 data-id="heading-39">6.5 ä¸»æµå®ç°å·¥å…·</h3>
<p>è½åœ°å·¥ä½œæµéœ€ä¾æ‰˜ä¸“é—¨çš„æ¡†æ¶å·¥å…·ï¼Œå®ç°æµç¨‹çš„å¯è§†åŒ–æ­å»ºã€æ‰§è¡Œä¸ç®¡ç†ï¼š - é€šç”¨æ¡†æ¶ï¼šLangChainï¼ˆæ”¯æŒä¸å¤§æ¨¡å‹ã€å·¥å…·ã€RAGçš„æ·±åº¦é›†æˆï¼Œé€‚åˆå¿«é€Ÿæ­å»ºç®€å•å·¥ä½œæµï¼‰ã€Airflowï¼ˆä¾§é‡ä»»åŠ¡è°ƒåº¦ä¸ç›‘æ§ï¼Œé€‚åˆå¤æ‚å®šæ—¶å·¥ä½œæµï¼‰ï¼› - ä½ä»£ç å¹³å°ï¼šMakeï¼ˆåŸIntegromatï¼‰ã€Zapierï¼ˆæ”¯æŒæ— ä»£ç æ‹–æ‹½æ­å»ºå·¥ä½œæµï¼Œé€‚é…éæŠ€æœ¯äººå‘˜ä½¿ç”¨ï¼‰ï¼› - å‚ç›´é¢†åŸŸå·¥å…·ï¼šåŒ»ç–—é¢†åŸŸçš„DrChronoï¼ˆé›†æˆè¯Šç–—å·¥ä½œæµä¸AIè¾…åŠ©èƒ½åŠ›ï¼‰ã€ä¼ä¸šåŠå…¬é¢†åŸŸçš„é£ä¹¦å¤šç»´è¡¨æ ¼ï¼ˆé€šè¿‡AIæ’ä»¶è”åŠ¨å·¥ä½œæµï¼‰ã€‚</p>
<h2 data-id="heading-40">ä¸ƒã€æ•°æ®åŒå¼•æ“ï¼šæ•°æ®åº“â€”â€”æ™ºèƒ½ä½“çš„ä¸šåŠ¡æ“ä½œä¸è¯­ä¹‰è®°å¿†è½½ä½“</h2>
<p>æ™ºèƒ½ä½“çš„è¿è¡Œä¾èµ–ä¸¤ç±»æ•°æ®åº“çš„ååŒæ”¯æ’‘ï¼ŒäºŒè€…åˆ†å·¥æ˜ç¡®ï¼Œåˆ†åˆ«æ‰¿è½½â€œä¸šåŠ¡æ•°æ®æ“ä½œâ€å’Œâ€œè¯­ä¹‰è®°å¿†æ£€ç´¢â€ä¸¤å¤§æ ¸å¿ƒéœ€æ±‚ï¼Œæ˜¯æ™ºèƒ½ä½“å®ç°â€œä¸šåŠ¡è½åœ°+è®°å¿†è¿›åŒ–â€çš„åŸºç¡€ã€‚å…¶ä¸­ï¼Œç»“æ„åŒ–æ•°æ®åº“çš„åŠŸèƒ½æä¾›äº†ä¸€ç§ç®€å•ã€é«˜æ•ˆçš„æ–¹å¼æ¥ç®¡ç†å’Œå¤„ç†ç»“æ„åŒ–æ•°æ®ï¼Œå¼€å‘è€…å’Œç”¨æˆ·å¯é€šè¿‡è‡ªç„¶è¯­è¨€æ’å…¥ã€æŸ¥è¯¢ã€ä¿®æ”¹æˆ–åˆ é™¤æ•°æ®åº“ä¸­çš„æ•°æ®ã€‚</p>
<h3 data-id="heading-41">7.1 æ ¸å¿ƒåˆ†ç±»ä¸å®šä½</h3>


























<table><thead><tr><th>æ•°æ®åº“ç±»å‹</th><th>æ ¸å¿ƒå®šä½</th><th>å…³è”æŠ€æœ¯</th><th>æ“ä½œæ–¹å¼</th><th>å…¸å‹å·¥å…·</th></tr></thead><tbody><tr><td>ç»“æ„åŒ–æ•°æ®åº“</td><td>æ™ºèƒ½ä½“æ“ä½œçœŸå®ä¸šåŠ¡æ•°æ®çš„æ ¸å¿ƒè½½ä½“</td><td>å·¥å…·è°ƒç”¨ï¼ˆFunction Callingï¼‰</td><td>å¤§æ¨¡å‹ç”ŸæˆSQLè¯­å¥ï¼Œç›´æ¥å¢åˆ æ”¹æŸ¥ï¼›æ”¯æŒè‡ªç„¶è¯­è¨€é©±åŠ¨çš„æ•°æ“ä½œ</td><td>MySQLã€PostgreSQLã€MongoDBï¼ˆåŠç»“æ„åŒ–ï¼‰</td></tr><tr><td>å‘é‡æ•°æ®åº“</td><td>æ™ºèƒ½ä½“RAGä¸é•¿æœŸè®°å¿†çš„ä¸“å±è¯­ä¹‰è½½ä½“</td><td>RAGã€æ™ºèƒ½ä½“é•¿æœŸè®°å¿†</td><td>åµŒå…¥æ¨¡å‹ç”Ÿæˆå‘é‡+è¯­ä¹‰ç›¸ä¼¼åº¦æ£€ç´¢ï¼Œæ— SQLæ“ä½œ</td><td>FAISSã€Chromaã€Milvusã€Pinecone</td></tr></tbody></table>
<h3 data-id="heading-42">7.2 ç»“æ„åŒ–æ•°æ®åº“ï¼šæ™ºèƒ½ä½“çš„â€œä¸šåŠ¡æ“ä½œä¸­æ¢â€</h3>
<h4 data-id="heading-43">7.2.1 æ ¸å¿ƒå®šä¹‰</h4>
<p>å­˜å‚¨ä¼ä¸šç»“æ„åŒ–ä¸šåŠ¡æ•°æ®ï¼ˆå®¢æˆ·ä¿¡æ¯ã€é”€å”®è®¢å•ã€åº“å­˜å°è´¦ã€ä»»åŠ¡æ—¥å¿—ç­‰ï¼‰çš„è½½ä½“ï¼Œå…¶åŠŸèƒ½æä¾›äº†ä¸€ç§ç®€å•ã€é«˜æ•ˆçš„æ–¹å¼æ¥ç®¡ç†å’Œå¤„ç†ç»“æ„åŒ–æ•°æ®ã€‚æ™ºèƒ½ä½“å¯é€šè¿‡å¤§æ¨¡å‹å°†ç”¨æˆ·è‡ªç„¶è¯­è¨€æŒ‡ä»¤è½¬æ¢ä¸ºæ ‡å‡†åŒ–SQLè¯­å¥ï¼Œç›´æ¥å¯¹æ•°æ®è¿›è¡Œæ’å…¥ã€æŸ¥è¯¢ã€ä¿®æ”¹æˆ–åˆ é™¤ï¼Œæ— éœ€ç”¨æˆ·æ‰‹åŠ¨ç¼–å†™SQLï¼Œæ˜¯è¿æ¥AIä¸ç°å®ä¸šåŠ¡ç³»ç»Ÿçš„å”¯ä¸€æ¥å£ã€‚</p>
<h4 data-id="heading-44">7.2.2 æ™ºèƒ½ä½“æ“ä½œæµç¨‹ï¼ˆSQLé©±åŠ¨é—­ç¯ï¼‰</h4>
<ol>
<li>éœ€æ±‚è§£æï¼šæ™ºèƒ½ä½“æ¥æ”¶è‡ªç„¶è¯­è¨€æŒ‡ä»¤ï¼ˆå¦‚â€œæŸ¥è¯¢2025å¹´12æœˆåŒ—äº¬åœ°åŒºçš„ç©ºè°ƒé”€é‡â€ï¼‰ï¼Œä¾æ‰˜å¤§æ¨¡å‹æå–æ ¸å¿ƒæ¡ä»¶ï¼ˆæ—¶é—´ã€åœ°åŒºã€å“ç±»ï¼‰ã€‚</li>
<li>SQLç”Ÿæˆä¸æ ¡éªŒï¼šå¤§æ¨¡å‹æ ¹æ®æŒ‡ä»¤ç”Ÿæˆç¬¦åˆæ•°æ®åº“è¯­æ³•çš„SQLè¯­å¥ï¼ŒåŒæ—¶æ ¡éªŒå­—æ®µåˆæ³•æ€§ä¸æƒé™èŒƒå›´ï¼Œç¤ºä¾‹ï¼š <code> SELECT product_model, sales_volume  `` FROM sales_data  ``WHERE sale_month = '2025-12' AND region = 'åŒ—äº¬' AND product_type = 'ç©ºè°ƒ';</code></li>
<li>æƒé™ç®¡æ§ä¸æ‰§è¡Œï¼šæ™ºèƒ½ä½“é€šè¿‡å·¥å…·è°ƒç”¨æ¥å£æ‰§è¡ŒSQLï¼Œä»…èµ‹äºˆâ€œæœ€å°å¿…è¦æƒé™â€ï¼ˆå¦‚æŸ¥è¯¢ç±»ä»»åŠ¡ä»…å¼€æ”¾<code>SELECT</code>æƒé™ï¼Œç¦æ­¢<code>DROP/ALTER</code>ç­‰é«˜å±æ“ä½œï¼‰ï¼Œé¿å…è¯¯æ“ä½œé£é™©ã€‚</li>
<li>ç»“æœè½¬åŒ–ä¸åé¦ˆï¼šå°†æ•°æ®åº“è¿”å›çš„ç»“æ„åŒ–ç»“æœï¼Œé€šè¿‡å¤§æ¨¡å‹è½¬æ¢ä¸ºè‡ªç„¶è¯­è¨€å›ç­”ï¼ŒåŒæ—¶å¯ç”Ÿæˆå¯è§†åŒ–å›¾è¡¨ï¼ˆå¦‚æŸ±çŠ¶å›¾ï¼‰è¾…åŠ©å‘ˆç°ã€‚</li>
</ol>
<h4 data-id="heading-45">7.2.3 å…¸å‹åº”ç”¨åœºæ™¯</h4>
<ul>
<li>é”€å”®ä¸šåŠ¡ï¼šç”ŸæˆSQLæŸ¥è¯¢å®¢æˆ·å†å²è®¢å•ã€å½•å…¥æ–°è®¢å•æ•°æ®ã€æ›´æ–°å®¢æˆ·å›æ¬¾çŠ¶æ€ï¼›</li>
<li>ä»“å‚¨ç®¡ç†ï¼šç”ŸæˆSQLæ‰£å‡å·²å‘è´§å•†å“åº“å­˜ã€æŸ¥è¯¢åº“å­˜é¢„è­¦å•†å“ã€æ–°å¢å…¥åº“è®°å½•ï¼›</li>
<li>ä»»åŠ¡æ—¥å¿—ï¼šç”ŸæˆSQLè®°å½•æ™ºèƒ½ä½“æ‰§è¡Œä»»åŠ¡çš„æ—¶é—´ã€æ­¥éª¤ã€ç»“æœï¼Œç”¨äºåç»­æµç¨‹è¿½æº¯ã€‚</li>
</ul>
<h3 data-id="heading-46">7.3 å‘é‡æ•°æ®åº“ï¼šæ™ºèƒ½ä½“çš„â€œè¯­ä¹‰è®°å¿†ä¸­æ¢â€</h3>
<h4 data-id="heading-47">7.3.1 æ ¸å¿ƒå®šä¹‰</h4>
<p>å­˜å‚¨éç»“æ„åŒ–æ•°æ®å‘é‡è¡¨å¾ï¼ˆç”¨æˆ·å¯¹è¯å†å²ã€ç§åŸŸæ–‡æ¡£ç‰‡æ®µã€ä»»åŠ¡ç»éªŒæ€»ç»“ç­‰ï¼‰çš„è½½ä½“ï¼Œä¸æ”¯æŒSQLæ“ä½œï¼Œä»…é€šè¿‡â€œåµŒå…¥æ¨¡å‹+è¯­ä¹‰æ£€ç´¢â€ä¸ºRAGå’Œé•¿æœŸè®°å¿†æä¾›æ”¯æ’‘ï¼Œæ˜¯æ™ºèƒ½ä½“å®ç°â€œè¯­ä¹‰çº§è®°å¿†â€çš„æ ¸å¿ƒå·¥å…·ã€‚</p>
<h4 data-id="heading-48">7.3.2 æ ¸å¿ƒå·¥ä½œæµç¨‹ï¼ˆè¯­ä¹‰æ£€ç´¢é—­ç¯ï¼‰</h4>
<ol>
<li>å‘é‡ç”Ÿæˆï¼šé€šè¿‡åµŒå…¥æ¨¡å‹ï¼ˆå¦‚Sentence-BERTã€text-embedding-ada-002ï¼‰å°†éç»“æ„åŒ–æ•°æ®è½¬æ¢ä¸ºé«˜ç»´å‘é‡ï¼Œå‘é‡è·ç¦»è¶Šè¿‘ï¼Œä»£è¡¨è¯­ä¹‰ç›¸ä¼¼åº¦è¶Šé«˜ï¼›</li>
<li>å‘é‡å­˜å‚¨ï¼šå°†ç”Ÿæˆçš„å‘é‡å­˜å…¥å‘é‡æ•°æ®åº“ï¼Œé€šè¿‡è¿‘ä¼¼æœ€è¿‘é‚»ï¼ˆANNï¼‰ç®—æ³•æ„å»ºç´¢å¼•ï¼Œæå‡æ£€ç´¢æ•ˆç‡ï¼›</li>
<li>è¯­ä¹‰æ£€ç´¢ï¼šå°†ç”¨æˆ·æ–°æŒ‡ä»¤è½¬ä¸ºå‘é‡ï¼Œåœ¨æ•°æ®åº“ä¸­æ£€ç´¢ç›¸ä¼¼åº¦æœ€é«˜çš„Top-Kå‘é‡ï¼Œæ˜ å°„å›åŸå§‹æ–‡æœ¬æ•°æ®ï¼ˆå¦‚ç”¨æˆ·ä¸Šå‘¨æåˆ°çš„â€œåå¥½ç®€æ´æŠ¥å‘Šâ€ï¼‰ï¼›</li>
<li>ç»“æœåº”ç”¨ï¼šå°†æ£€ç´¢åˆ°çš„è¯­ä¹‰ä¿¡æ¯æ•´åˆåˆ°æç¤ºè¯ä¸­ï¼ŒæŒ‡å¯¼æ™ºèƒ½ä½“ç”Ÿæˆä¸ªæ€§åŒ–ã€ä¸Šä¸‹æ–‡è¿è´¯çš„è¾“å‡ºã€‚</li>
</ol>
<h4 data-id="heading-49">7.3.3 å…¸å‹åº”ç”¨åœºæ™¯</h4>
<ul>
<li>RAGçŸ¥è¯†æ£€ç´¢ï¼šæ£€ç´¢ä¼ä¸šäº§å“æ‰‹å†Œã€æŠ€æœ¯æ–‡æ¡£çš„å‘é‡ç‰‡æ®µï¼Œä¸ºå¤§æ¨¡å‹æä¾›ç²¾å‡†äº‹å®å‚è€ƒï¼Œå¯¹æŠ—å¹»è§‰ï¼›</li>
<li>ç”¨æˆ·è®°å¿†æ£€ç´¢ï¼šæ£€ç´¢ç”¨æˆ·å†å²å¯¹è¯å‘é‡ï¼Œè®°ä½ç”¨æˆ·åå¥½ï¼ˆå¦‚â€œä¸å–œæ¬¢ä¸“ä¸šæœ¯è¯­â€ï¼‰ã€éœ€æ±‚ï¼ˆå¦‚â€œéœ€è¦æ¯å‘¨ç”Ÿæˆé”€å”®æŠ¥å‘Šâ€ï¼‰ï¼›</li>
<li>ä»»åŠ¡ç»éªŒæ£€ç´¢ï¼šæ£€ç´¢åŒç±»ä»»åŠ¡çš„æ‰§è¡Œç»éªŒå‘é‡ï¼Œå¤ç”¨æˆåŠŸç­–ç•¥ï¼ˆå¦‚â€œæŸç±»æ•°æ®åˆ†æéœ€è°ƒç”¨ç‰¹å®šAPIâ€ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-50">7.4 ä¸¤ç±»æ•°æ®åº“çš„ååŒé€»è¾‘ï¼ˆæ™ºèƒ½ä½“è§†è§’ï¼‰</h3>
<p>ä»¥â€œç”Ÿæˆå®¢æˆ·ä¸ªæ€§åŒ–è·Ÿè¿›æŠ¥å‘Šâ€ä¸ºä¾‹ï¼Œçœ‹ä¸¤ç±»æ•°æ®åº“çš„è”åŠ¨æµç¨‹ï¼š</p>
<ol>
<li>æ™ºèƒ½ä½“æ¥æ”¶æŒ‡ä»¤ï¼šâ€œç”Ÿæˆå®¢æˆ·ææ€»çš„è·Ÿè¿›æŠ¥å‘Šï¼ŒåŒ…å«ä»–çš„å†å²è®¢å•å’Œä¸Šæ¬¡æåˆ°çš„éœ€æ±‚â€ï¼›</li>
<li>è°ƒç”¨ç»“æ„åŒ–æ•°æ®åº“ï¼šå¤§æ¨¡å‹ç”ŸæˆSQLï¼ŒæŸ¥è¯¢<code>customer_order</code>è¡¨ä¸­ææ€»çš„å†å²è®¢å•æ•°æ®ï¼ˆè®¢å•å·ã€é‡‘é¢ã€äº§å“ç±»å‹ï¼‰ï¼›</li>
<li>è°ƒç”¨å‘é‡æ•°æ®åº“ï¼šå°†æŒ‡ä»¤è½¬ä¸ºå‘é‡ï¼Œæ£€ç´¢ä¸â€œææ€»ä¸Šæ¬¡éœ€æ±‚â€ç›¸å…³çš„å¯¹è¯å‘é‡ï¼Œè·å–â€œéœ€è¦å®šåˆ¶åŒ–å”®åæ–¹æ¡ˆâ€çš„è¯­ä¹‰ä¿¡æ¯ï¼›</li>
<li>æ•´åˆç”ŸæˆæŠ¥å‘Šï¼šå¤§æ¨¡å‹ç»“åˆç»“æ„åŒ–è®¢å•æ•°æ®å’Œå‘é‡æ£€ç´¢çš„éœ€æ±‚ä¿¡æ¯ï¼Œç”Ÿæˆä¸ªæ€§åŒ–è·Ÿè¿›æŠ¥å‘Šï¼›</li>
<li>æ•°æ®å­˜å‚¨é—­ç¯ï¼šå°†æŠ¥å‘Šå†…å®¹è½¬ä¸ºå‘é‡å­˜å…¥å‘é‡æ•°æ®åº“ï¼ˆæ›´æ–°é•¿æœŸè®°å¿†ï¼‰ï¼ŒåŒæ—¶å°†æŠ¥å‘Šç”Ÿæˆè®°å½•å­˜å…¥ç»“æ„åŒ–æ•°æ®åº“ï¼ˆæ›´æ–°ä»»åŠ¡æ—¥å¿—ï¼‰ã€‚</li>
</ol>
<h2 data-id="heading-51">å…«ã€èƒ½åŠ›æ²‰æ·€ï¼šé•¿æœŸè®°å¿†â€”â€”æ™ºèƒ½ä½“çš„â€œè¯­ä¹‰ç»éªŒåº“â€</h2>
<p>æ™ºèƒ½ä½“çš„é•¿æœŸè®°å¿†æ˜¯åŸºäºå‘é‡æ•°æ®åº“æ„å»ºçš„è¯­ä¹‰çº§è®°å¿†ç³»ç»Ÿï¼Œä¸“æ³¨å­˜å‚¨éç»“æ„åŒ–çš„äº¤äº’ç»éªŒä¸çŸ¥è¯†ï¼Œæ”¯æŒè·¨ä¼šè¯å¤ç”¨ï¼Œæ˜¯æ™ºèƒ½ä½“ä»â€œå•æ¬¡æ‰§è¡Œè€…â€å‡çº§ä¸ºâ€œå¯è¿›åŒ–ä¼™ä¼´â€çš„æ ¸å¿ƒèƒ½åŠ›ã€‚</p>
<h3 data-id="heading-52">8.1 æ ¸å¿ƒå®šä¹‰</h3>
<p>æ™ºèƒ½ä½“ä¾æ‰˜å‘é‡æ•°æ®åº“ï¼Œå¯¹ç”¨æˆ·äº¤äº’å†å²ã€ä»»åŠ¡æ‰§è¡Œç»éªŒã€RAGæ£€ç´¢çŸ¥è¯†è¿›è¡Œè¯­ä¹‰åŒ–å­˜å‚¨ä¸å¤ç”¨çš„èƒ½åŠ›ï¼Œæ ¸å¿ƒç‰¹å¾æ˜¯â€œè¯­ä¹‰å…³è”æ£€ç´¢â€ï¼Œè€Œéç»“æ„åŒ–æ•°æ®çš„å¢åˆ æ”¹æŸ¥ã€‚</p>
<h3 data-id="heading-53">8.2 æ ¸å¿ƒåˆ†ç±»ä¸å­˜å‚¨è½½ä½“</h3>
<p>é•¿æœŸè®°å¿†çš„æ‰€æœ‰å†…å®¹å‡ä»¥å‘é‡å½¢å¼å­˜å‚¨åœ¨å‘é‡æ•°æ®åº“ä¸­ï¼ŒæŒ‰ç”¨é€”åˆ†ä¸ºä¸‰ç±»ï¼š</p>





























<table><thead><tr><th>è®°å¿†ç±»å‹</th><th>å­˜å‚¨å†…å®¹</th><th>æ ¸å¿ƒä½œç”¨</th><th>æ£€ç´¢è§¦å‘æ¡ä»¶</th></tr></thead><tbody><tr><td>ç”¨æˆ·è®°å¿†</td><td>ç”¨æˆ·èº«ä»½ä¿¡æ¯ã€æ²Ÿé€šåå¥½ï¼ˆå¦‚â€œå–œæ¬¢ç®€æ´è¡¨è¾¾â€ï¼‰ã€å†å²éœ€æ±‚ï¼ˆå¦‚â€œéœ€è¦æœˆåº¦åº“å­˜æŠ¥å‘Šâ€ï¼‰</td><td>å®ç°ä¸ªæ€§åŒ–äº¤äº’ï¼Œé¿å…é‡å¤æé—®ï¼Œæå‡ç”¨æˆ·ä½“éªŒ</td><td>æ¥æ”¶åˆ°åŒä¸€ç”¨æˆ·çš„æ–°æŒ‡ä»¤æ—¶</td></tr><tr><td>ä»»åŠ¡è®°å¿†</td><td>ä»»åŠ¡æ‹†è§£æ­¥éª¤ã€å·¥å…·è°ƒç”¨ç­–ç•¥ã€æ‰§è¡ŒæˆåŠŸ/å¤±è´¥ç»éªŒï¼ˆå¦‚â€œæŸAPIè°ƒç”¨éœ€ä¼ å…¥regionå‚æ•°â€ï¼‰</td><td>å¤ç”¨åŒç±»ä»»åŠ¡ç»éªŒï¼Œä¼˜åŒ–æ‰§è¡Œæ•ˆç‡ï¼Œå‡å°‘è¯•é”™æˆæœ¬</td><td>æ¥æ”¶åˆ°åŒç±»ä»»åŠ¡æŒ‡ä»¤æ—¶</td></tr><tr><td>çŸ¥è¯†è®°å¿†</td><td>RAGæ£€ç´¢åˆ°çš„æƒå¨çŸ¥è¯†ï¼ˆå¦‚äº§å“å‚æ•°ã€è¡Œä¸šè§„èŒƒï¼‰ã€å¤–éƒ¨å·¥å…·è·å–çš„å…³é”®ä¿¡æ¯</td><td>è¡¥å……æ™ºèƒ½ä½“ä¸“ä¸šçŸ¥è¯†å‚¨å¤‡ï¼Œæå‡å¤æ‚ä»»åŠ¡çš„å†³ç­–ç²¾åº¦</td><td>æ¥æ”¶åˆ°æ¶‰åŠä¸“ä¸šé¢†åŸŸçš„æŒ‡ä»¤æ—¶</td></tr></tbody></table>
<h3 data-id="heading-54">8.3 æ ¸å¿ƒå·¥ä½œæµç¨‹ï¼ˆå‘é‡é©±åŠ¨çš„è®°å¿†é—­ç¯ï¼‰</h3>
<h4 data-id="heading-55">8.3.1 è®°å¿†å­˜å‚¨</h4>
<p>æ™ºèƒ½ä½“åœ¨ä»»åŠ¡æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œå°†ä¸‰ç±»éç»“æ„åŒ–æ•°æ®è½¬æ¢ä¸ºå‘é‡ï¼Œå­˜å…¥å‘é‡æ•°æ®åº“ï¼š</p>
<ol>
<li>ç”¨æˆ·äº¤äº’æ•°æ®ï¼šå°†ç”¨æˆ·å¯¹è¯å†…å®¹ï¼ˆå¦‚â€œæŠ¥å‘Šä¸è¦è¶…è¿‡3é¡µâ€ï¼‰é€šè¿‡åµŒå…¥æ¨¡å‹è½¬ä¸ºå‘é‡ï¼›</li>
<li>ä»»åŠ¡æ‰§è¡Œæ•°æ®ï¼šå°†ä»»åŠ¡æ‹†è§£æ­¥éª¤ã€å·¥å…·è°ƒç”¨ç»“æœï¼ˆå¦‚â€œè°ƒç”¨å¤©æ°”APIå¤±è´¥ï¼Œå› å‚æ•°æ ¼å¼é”™è¯¯â€ï¼‰è½¬ä¸ºå‘é‡ï¼›</li>
<li>çŸ¥è¯†æ•°æ®ï¼šå°†RAGæ£€ç´¢åˆ°çš„æ–‡æ¡£ç‰‡æ®µï¼ˆå¦‚â€œäº§å“Açš„ä¿ä¿®æœŸä¸º2å¹´â€ï¼‰è½¬ä¸ºå‘é‡ã€‚</li>
</ol>
<h4 data-id="heading-56">8.3.2 è®°å¿†æ£€ç´¢</h4>
<p>æ™ºèƒ½ä½“æ¥æ”¶æ–°æŒ‡ä»¤åï¼Œé€šè¿‡â€œè¯­ä¹‰åŒ¹é…â€æ£€ç´¢ç›¸å…³è®°å¿†ï¼š</p>
<ol>
<li>å°†æ–°æŒ‡ä»¤è½¬ä¸ºå‘é‡ï¼Œåœ¨å‘é‡æ•°æ®åº“ä¸­æ£€ç´¢ç›¸ä¼¼åº¦æœ€é«˜çš„Top-Kå‘é‡ï¼›</li>
<li>è¿‡æ»¤å†—ä½™ä¿¡æ¯ï¼ˆå¦‚å·²å¤±æ•ˆçš„ä»»åŠ¡ç»éªŒï¼‰ï¼Œä¼˜å…ˆæ£€ç´¢é«˜ä»·å€¼è®°å¿†ï¼ˆå¦‚ç”¨æˆ·é•¿æœŸåå¥½ï¼‰ï¼›</li>
<li>å°†æ£€ç´¢åˆ°çš„è®°å¿†å†…å®¹æ•´åˆåˆ°æç¤ºè¯ä¸­ï¼ŒæŒ‡å¯¼ä»»åŠ¡æ‰§è¡Œã€‚</li>
</ol>
<h4 data-id="heading-57">8.3.3 è®°å¿†æ›´æ–°ä¸è¿›åŒ–</h4>
<p>ä»»åŠ¡å®Œæˆåï¼Œæ™ºèƒ½ä½“æ ¹æ®æ‰§è¡Œåé¦ˆæ›´æ–°è®°å¿†ï¼š</p>
<ol>
<li>æ–°å¢æœ‰æ•ˆè®°å¿†ï¼šå°†æˆåŠŸçš„ä»»åŠ¡ç­–ç•¥ï¼ˆå¦‚â€œæŸ¥è¯¢é”€é‡éœ€åŒæ—¶ç­›é€‰æ—¶é—´å’Œåœ°åŒºâ€ï¼‰è½¬ä¸ºå‘é‡å­˜å…¥ï¼›</li>
<li>æ ‡è®°æ— æ•ˆè®°å¿†ï¼šå°†å¤±è´¥ç»éªŒï¼ˆå¦‚â€œæŸAPIå·²åœç”¨â€ï¼‰æ ‡æ³¨ä¸ºä½ä¼˜å…ˆçº§ï¼Œé¿å…åç»­å¤ç”¨ï¼›</li>
<li>è®°å¿†å‹ç¼©ï¼šå®šæœŸæ¸…ç†é‡å¤ã€è¿‡æ—¶çš„å‘é‡æ•°æ®ï¼Œæå‡æ£€ç´¢æ•ˆç‡ã€‚</li>
</ol>
<h3 data-id="heading-58">8.4 å…³é”®æŠ€æœ¯æŒ‘æˆ˜ä¸ä¼˜åŒ–æ–¹å‘</h3>
<h4 data-id="heading-59">8.4.1 æ ¸å¿ƒæŒ‘æˆ˜</h4>
<ol>
<li>è®°å¿†å†—ä½™ï¼šé•¿æœŸç§¯ç´¯çš„æµ·é‡å‘é‡æ•°æ®å¯èƒ½åŒ…å«æ— æ•ˆä¿¡æ¯ï¼Œå¯¼è‡´æ£€ç´¢æ•ˆç‡ä¸‹é™ï¼›</li>
<li>è¯­ä¹‰æ­§ä¹‰ï¼šç›¸ä¼¼è¡¨è¿°å¯èƒ½è¢«è¯¯åˆ¤ä¸ºä¸åŒè¯­ä¹‰ï¼ˆå¦‚â€œç®€æ´æŠ¥å‘Šâ€å’Œâ€œç®€çŸ­æŠ¥å‘Šâ€ï¼‰ï¼›</li>
<li>éšç§é£é™©ï¼šç”¨æˆ·è®°å¿†åŒ…å«æ•æ„Ÿä¿¡æ¯ï¼ˆå¦‚è”ç³»æ–¹å¼ã€ä¸šåŠ¡éœ€æ±‚ï¼‰ï¼Œå­˜åœ¨æ³„éœ²é£é™©ã€‚</li>
</ol>
<h4 data-id="heading-60">8.4.2 ä¼˜åŒ–æ–¹å‘</h4>
<ol>
<li>è®°å¿†æ¸…æ´—ï¼šåŸºäºä½¿ç”¨é¢‘ç‡å’Œæœ‰æ•ˆæ€§ï¼Œè‡ªåŠ¨æ¸…ç†ä½ä»·å€¼å‘é‡æ•°æ®ï¼›</li>
<li>è¯­ä¹‰å¢å¼ºï¼šé‡‡ç”¨æ›´å…ˆè¿›çš„åµŒå…¥æ¨¡å‹ï¼ˆå¦‚å¤šæ¨¡æ€åµŒå…¥ï¼‰ï¼Œæå‡è¯­ä¹‰æ£€ç´¢çš„ç²¾å‡†åº¦ï¼›</li>
<li>éšç§ä¿æŠ¤ï¼šå¯¹ç”¨æˆ·æ•æ„Ÿä¿¡æ¯å‘é‡è¿›è¡ŒåŠ å¯†å­˜å‚¨ï¼Œè®¾ç½®æ£€ç´¢æƒé™åˆ†çº§ã€‚</li>
</ol>
<h3 data-id="heading-61">8.5 ä¸æ ¸å¿ƒæŠ€æœ¯çš„å…³è”</h3>
<ol>
<li>ä¸å‘é‡æ•°æ®åº“ï¼šå‘é‡æ•°æ®åº“æ˜¯é•¿æœŸè®°å¿†çš„å”¯ä¸€å­˜å‚¨è½½ä½“ï¼Œæ²¡æœ‰å‘é‡æ•°æ®åº“ï¼Œæ™ºèƒ½ä½“æ— æ³•å®ç°è¯­ä¹‰çº§çš„è®°å¿†ä¸æ£€ç´¢ï¼›</li>
<li>ä¸RAGï¼šRAGæ£€ç´¢çš„çŸ¥è¯†æ˜¯é•¿æœŸè®°å¿†çš„é‡è¦æ¥æºï¼Œè€Œé•¿æœŸè®°å¿†ä¸­çš„çŸ¥è¯†å¯åå“ºRAGï¼Œæå‡åç»­æ£€ç´¢çš„ç²¾å‡†åº¦ï¼›</li>
<li>ä¸æ™ºèƒ½ä½“ï¼šé•¿æœŸè®°å¿†æ˜¯æ™ºèƒ½ä½“â€œè‡ªä¸»è¿›åŒ–â€çš„æ ¸å¿ƒæ”¯æ’‘ï¼Œè®©æ™ºèƒ½ä½“èƒ½å¤Ÿä»å†å²ç»éªŒä¸­å­¦ä¹ ï¼Œè€Œéæ¯æ¬¡ä»é›¶å¼€å§‹ã€‚</li>
</ol>
<h2 data-id="heading-62">ä¹ã€æŠ€æœ¯ä½“ç³»æ ¸å¿ƒé€»è¾‘æ€»ç»“</h2>
<p>æ•´ä¸ªAIæ ¸å¿ƒæŠ€æœ¯ä½“ç³»å›´ç»•â€œå¤§æ¨¡å‹èƒ½åŠ›å»¶ä¼¸+æ™ºèƒ½ä½“é—­ç¯è½åœ°â€å±•å¼€ï¼Œå½¢æˆâ€œåŸºç¡€å±‚-äº¤äº’å±‚-å¢å¼ºå±‚-æ•°æ®å±‚-åº”ç”¨å±‚â€çš„äº”å±‚ååŒæ¶æ„ï¼Œå„æ¨¡å—åˆ†å·¥æ˜ç¡®ã€ç›¸äº’æ”¯æ’‘ï¼Œå…±åŒæ¨åŠ¨AIä»â€œåŸºç¡€æ™ºèƒ½å·¥å…·â€èµ°å‘â€œå¤æ‚ä¸šåŠ¡ç³»ç»Ÿâ€ã€‚</p>
<ol>
<li><strong>åŸºç¡€å±‚ï¼šå¤§æ¨¡å‹ï¼ˆLLMï¼‰â€”â€” åŸç”Ÿæ™ºèƒ½å¼•æ“</strong>æä¾›è‡ªç„¶è¯­è¨€ç†è§£ã€ç”Ÿæˆã€é€»è¾‘æ¨ç†çš„æ ¸å¿ƒèƒ½åŠ›ï¼Œæ˜¯æ•´ä¸ªæŠ€æœ¯ä½“ç³»çš„åº•å±‚åŸºç¡€ã€‚å…¶åŸç”ŸçŸ­æ¿ï¼ˆè¢«åŠ¨å“åº”ã€æ— é•¿æœŸè®°å¿†ã€æ˜“å¹»è§‰ï¼‰æ˜¯æ‰€æœ‰ä¸Šå±‚æŠ€æœ¯éœ€è¦è§£å†³çš„æ ¸å¿ƒç›®æ ‡ï¼Œå†³å®šäº†ä½“ç³»çš„åŸºç¡€æ™ºèƒ½ä¸Šé™ã€‚</li>
<li><strong>äº¤äº’å±‚ï¼šæç¤ºè¯ï¼ˆPromptï¼‰â€”â€” ç²¾å‡†æŒ‡ä»¤æ¡¥æ¢</strong>ä½œä¸ºç”¨æˆ·ä¸AIç³»ç»Ÿçš„äº¤äº’åª’ä»‹ï¼Œé€šè¿‡ç»“æ„åŒ–æŒ‡ä»¤å¯¹é½ç”¨æˆ·éœ€æ±‚ä¸æ¨¡å‹èƒ½åŠ›ï¼Œçº¦æŸè¾“å‡ºè¾¹ç•Œã€å‡å°‘å¹»è§‰é£é™©ã€‚åŒæ—¶ä¸ºæ™ºèƒ½ä½“çš„ä»»åŠ¡è§„åˆ’ã€RAGçš„æ£€ç´¢å¢å¼ºã€å·¥å…·è°ƒç”¨çš„å‚æ•°ç”Ÿæˆæä¾›æ˜ç¡®æŒ‡å¼•ï¼Œæ˜¯æå‡AIè¾“å‡ºç²¾å‡†åº¦çš„â€œä½æˆæœ¬æ æ†â€ã€‚</li>
<li><strong>å¢å¼ºå±‚ï¼šRAG + å·¥å…·è°ƒç”¨ï¼ˆFunction Callingï¼‰â€”â€” èƒ½åŠ›å»¶ä¼¸åŒæŠ“æ‰‹</strong>ä»ä¸¤ä¸ªç»´åº¦å¼¥è¡¥å¤§æ¨¡å‹çš„æ ¸å¿ƒçŸ­æ¿ï¼Œå®ç°â€œé™æ€çŸ¥è¯†+åŠ¨æ€æ“ä½œâ€çš„åŒé‡å¢å¼ºï¼š</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[JavaScript ä¸­ this çš„ç»ˆæè§£æï¼šä» callã€bind åˆ°ç®­å¤´å‡½æ•°çš„æ·±åº¦æ¢ç´¢]]></title>    <link>https://juejin.cn/post/7585808181240102963</link>    <guid>https://juejin.cn/post/7585808181240102963</guid>    <pubDate>2025-12-22T02:47:59.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7585808181240102963" data-draft-id="7585839411123191854" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="JavaScript ä¸­ this çš„ç»ˆæè§£æï¼šä» callã€bind åˆ°ç®­å¤´å‡½æ•°çš„æ·±åº¦æ¢ç´¢"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,ECMAScript 6"/> <meta itemprop="datePublished" content="2025-12-22T02:47:59.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="AAAé˜¿giao"/> <meta itemprop="url" content="https://juejin.cn/user/473218785740627"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            JavaScript ä¸­ this çš„ç»ˆæè§£æï¼šä» callã€bind åˆ°ç®­å¤´å‡½æ•°çš„æ·±åº¦æ¢ç´¢
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/473218785740627/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    AAAé˜¿giao
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-22T02:47:59.000Z" title="Mon Dec 22 2025 02:47:59 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    10
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€</h2>
<p>åœ¨ JavaScript ç¼–ç¨‹çš„ä¸–ç•Œé‡Œï¼Œ<code>this</code> æ˜¯ä¸€ä¸ªæ—¢åŸºç¡€åˆä»¤äººå›°æƒ‘çš„æ¦‚å¿µã€‚å®ƒçœ‹ä¼¼ç®€å•ï¼Œå´å¸¸å¸¸åœ¨ä¸ç»æ„é—´â€œèƒŒå›â€æˆ‘ä»¬çš„é¢„æœŸï¼›å®ƒçµæ´»å¤šå˜ï¼Œå´åˆéµå¾ªç€ä¸€å¥—ä¸¥æ ¼çš„è§„åˆ™ã€‚å°¤å…¶å½“ä¸ <code>call</code>ã€<code>apply</code>ã€<code>bind</code> ä»¥åŠ ES6 å¼•å…¥çš„<strong>ç®­å¤´å‡½æ•°</strong>ç»“åˆæ—¶ï¼Œ<code>this</code> çš„è¡Œä¸ºå˜å¾—æ›´åŠ å¾®å¦™è€Œå¼ºå¤§ã€‚</p>
<p>æœ¬æ–‡å°†ç»“åˆä»£ç ï¼Œå¯¹ <code>this</code> çš„æœºåˆ¶è¿›è¡Œä¸€æ¬¡å…¨é¢ã€æ·±å…¥ä¸”ç”ŸåŠ¨çš„å‰–æã€‚æˆ‘ä»¬å°†é€å­—å¼•ç”¨åŸå§‹ä»£ç ç‰‡æ®µï¼Œè¿˜åŸå…¶æŠ€æœ¯å«ä¹‰ï¼Œå¹¶é€šè¿‡å¤§é‡ç¤ºä¾‹æ­ç¤ºèƒŒåçš„åŸç†ã€‚æ— è®ºä½ æ˜¯åˆå­¦è€…è¿˜æ˜¯èµ„æ·±å¼€å‘è€…ï¼Œç›¸ä¿¡éƒ½èƒ½ä»ä¸­è·å¾—æ–°çš„æ´è§ã€‚</p>
<hr/>
<h2 data-id="heading-1">ä¸€ã€æ ¸å¿ƒå†…å®¹</h2>
<p>æˆ‘ä»¬å¯ä»¥å°†thisé—®é¢˜æ‹†è§£ä¸ºå‡ ä¸ªæ ¸å¿ƒå‘½é¢˜ï¼š</p>
<ol>
<li><strong><code>this</code> å¯ä»¥è¢«è¦†ç›–</strong></li>
<li><strong><code>bind</code> ç”¨äºå®šæ—¶å™¨ä¸­ç»‘å®š <code>this</code>ï¼Œå»¶è¿Ÿæ‰§è¡Œ</strong></li>
<li><strong><code>call</code> / <code>apply</code> å¯æŒ‡å®š <code>this</code> æŒ‡å‘ï¼Œå¹¶ç«‹å³è¿è¡Œ</strong></li>
<li><strong><code>that = this</code> åˆ©ç”¨ä½œç”¨åŸŸé“¾ä¿å­˜ <code>this</code></strong></li>
<li><strong>ç®­å¤´å‡½æ•°æ²¡æœ‰è‡ªå·±çš„ <code>this</code>ï¼Œè€Œæ˜¯ç»§æ‰¿çˆ¶çº§ä½œç”¨åŸŸçš„ <code>this</code></strong></li>
</ol>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†å›´ç»•è¿™äº”ç‚¹å±•å¼€è¯¦ç»†è®ºè¿°ã€‚</p>
<p>æºä»£ç é“¾æ¥ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2FgiaoZou%2Flesson_zp%2Ftree%2Fmaster%2Fbatjtmd%2Fthis" title="https://gitee.com/giaoZou/lesson_zp/tree/master/batjtmd/this" target="_blank" ref="nofollow noopener noreferrer">lesson_zp/batjtmd/this: AI + å…¨æ ˆå­¦ä¹ ä»“åº“</a></p>
<hr/>
<h2 data-id="heading-2">äºŒã€this çš„é»˜è®¤è¡Œä¸ºï¼šè°è°ƒç”¨ï¼Œå°±å±äºè°</h2>
<p>åœ¨æ·±å…¥é«˜çº§æŠ€å·§å‰ï¼Œå¿…é¡»å…ˆç†è§£ <code>this</code> çš„<strong>é»˜è®¤ç»‘å®šè§„åˆ™</strong>ã€‚</p>
<h3 data-id="heading-3">1. å…¨å±€ä¸Šä¸‹æ–‡ä¸­çš„ this</h3>
<p>åœ¨éä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œå…¨å±€ä½œç”¨åŸŸä¸­çš„ <code>this</code> æŒ‡å‘å…¨å±€å¯¹è±¡ï¼ˆæµè§ˆå™¨ä¸­æ˜¯ <code>window</code>ï¼ŒNode.js ä¸­æ˜¯ <code>global</code>ï¼‰ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span> === <span class="hljs-variable language_">window</span>); <span class="hljs-comment">// true (æµè§ˆå™¨)</span>
</code></pre>
<p>åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œå…¨å±€å‡½æ•°ä¸­çš„ <code>this</code> ä¸º <code>undefined</code>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-meta">'use strict'</span>;
<span class="hljs-keyword">function</span> <span class="hljs-title function_">f</span>(<span class="hljs-params"/>) { <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>); }
<span class="hljs-title function_">f</span>(); <span class="hljs-comment">// undefined</span>
</code></pre>
<h3 data-id="heading-4">2. å¯¹è±¡æ–¹æ³•ä¸­çš„ this</h3>
<p>å½“å‡½æ•°ä½œä¸ºå¯¹è±¡çš„æ–¹æ³•è¢«è°ƒç”¨æ—¶ï¼Œ<code>this</code> æŒ‡å‘è¯¥å¯¹è±¡ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> obj = {
  <span class="hljs-attr">name</span>: <span class="hljs-string">'Alice'</span>,
  <span class="hljs-title function_">greet</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>);
  }
};
obj.<span class="hljs-title function_">greet</span>(); <span class="hljs-comment">// "Alice"</span>
</code></pre>
<p>ä½†æ³¨æ„ï¼š<strong>å‡½æ•°ä¸€æ—¦è„±ç¦»å¯¹è±¡è°ƒç”¨ï¼Œthis å°±ä¼šä¸¢å¤±</strong>ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">const <span class="hljs-attr">fn</span> = obj.greet<span class="hljs-comment">;</span>
fn()<span class="hljs-comment">; // éä¸¥æ ¼æ¨¡å¼ä¸‹è¾“å‡º undefinedï¼ˆthis æŒ‡å‘ windowï¼‰</span>
</code></pre>
<p>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦ <code>call</code>ã€<code>bind</code> ç­‰å·¥å…·æ¥â€œæ‹¯æ•‘â€è¿·å¤±çš„ <code>this</code>ã€‚</p>
<hr/>
<h2 data-id="heading-5">ä¸‰ã€call ä¸ applyï¼šå¼ºåˆ¶æŒ‡å®š thisï¼Œç«‹å³æ‰§è¡Œï¼</h2>
<h3 data-id="heading-6">åŸç†ä¸è¯­æ³•</h3>
<ul>
<li><code>func.call(thisArg, arg1, arg2, ...)</code></li>
<li><code>func.apply(thisArg, [arg1, arg2, ...])</code></li>
</ul>
<p>ä¸¤è€…åŠŸèƒ½ç›¸åŒï¼ŒåŒºåˆ«ä»…åœ¨äºå‚æ•°ä¼ é€’æ–¹å¼ã€‚</p>
<blockquote>
<p>â€œcall apply æŒ‡å®šthis æŒ‡å‘ ç«‹å³è¿è¡Œâ€</p>
</blockquote>
<p><code>call</code> å’Œ <code>apply</code> çš„æ ¸å¿ƒä½œç”¨å°±æ˜¯åœ¨<strong>è°ƒç”¨å‡½æ•°çš„åŒæ—¶</strong>ï¼Œæ˜¾å¼æŒ‡å®š <code>this</code> çš„å€¼ï¼Œå¹¶<strong>ç«‹åˆ»æ‰§è¡Œ</strong>è¯¥å‡½æ•°ã€‚</p>
<h3 data-id="heading-7">ç¤ºä¾‹æ¼”ç¤º</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">introduce</span>(<span class="hljs-params">age</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`I'm <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span>, <span class="hljs-subst">${age}</span> years old.`</span>);
}

<span class="hljs-keyword">const</span> person = { <span class="hljs-attr">name</span>: <span class="hljs-string">'Bob'</span> };

introduce.<span class="hljs-title function_">call</span>(person, <span class="hljs-number">25</span>);   <span class="hljs-comment">// I'm Bob, 25 years old.</span>
introduce.<span class="hljs-title function_">apply</span>(person, [<span class="hljs-number">30</span>]); <span class="hljs-comment">// I'm Bob, 30 years old.</span>
</code></pre>
<p>å³ä½¿ <code>introduce</code> ä¸æ˜¯ <code>person</code> çš„æ–¹æ³•ï¼Œæˆ‘ä»¬ä¹Ÿèƒ½è®©å®ƒâ€œå‡è£…â€æ˜¯â€”â€”è¿™å°±æ˜¯ <code>this</code> çš„çµæ´»æ€§ã€‚</p>
<h3 data-id="heading-8">å®é™…åº”ç”¨åœºæ™¯</h3>
<ul>
<li>
<p>æ•°ç»„æ–¹æ³•å€Ÿç”¨ï¼ˆå¦‚å°†ç±»æ•°ç»„è½¬ä¸ºçœŸæ•°ç»„ï¼‰ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> args = <span class="hljs-title class_">Array</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">slice</span>.<span class="hljs-title function_">call</span>(<span class="hljs-variable language_">arguments</span>);
</code></pre>
</li>
<li>
<p>é€šç”¨å·¥å…·å‡½æ•°é€‚é…ä¸åŒä¸Šä¸‹æ–‡ã€‚</p>
</li>
</ul>
<hr/>
<h2 data-id="heading-9">å››ã€bindï¼šæ°¸ä¹…ç»‘å®š thisï¼Œå»¶è¿Ÿæ‰§è¡Œ</h2>
<h3 data-id="heading-10">åŸç†ä¸è¯­æ³•</h3>
<p><code>func.bind(thisArg, arg1, arg2, ...)</code> è¿”å›ä¸€ä¸ª<strong>æ–°å‡½æ•°</strong>ï¼Œè¯¥å‡½æ•°çš„ <code>this</code> è¢«æ°¸ä¹…ç»‘å®šåˆ° <code>thisArg</code>ï¼Œä¸”å¯é¢„è®¾éƒ¨åˆ†å‚æ•°ï¼ˆæŸ¯é‡ŒåŒ–ï¼‰ã€‚</p>
<blockquote>
<p>â€œbind å®šæ—¶å™¨thisç»‘å®š(a) ä»¥åå†æ‰§è¡Œâ€</p>
</blockquote>
<p>è¿™å¥è¯ç²¾å‡†æŒ‡å‡ºäº† <code>bind</code> çš„ä¸¤å¤§ç‰¹ç‚¹ï¼š</p>
<ol>
<li><strong>å¸¸ç”¨äºå®šæ—¶å™¨ç­‰å¼‚æ­¥å›è°ƒä¸­ç»‘å®š <code>this</code></strong></li>
<li><strong>ä¸ç«‹å³æ‰§è¡Œï¼Œè€Œæ˜¯è¿”å›ä¸€ä¸ªå¯ç¨åè°ƒç”¨çš„å‡½æ•°</strong></li>
</ol>
<h3 data-id="heading-11">ç»å…¸é—®é¢˜ï¼šsetTimeout ä¸­çš„ this ä¸¢å¤±</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> timer = {
  <span class="hljs-attr">seconds</span>: <span class="hljs-number">0</span>,
  <span class="hljs-title function_">start</span>(<span class="hljs-params"/>) {
    <span class="hljs-built_in">setInterval</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">seconds</span>++; <span class="hljs-comment">// âŒ this æŒ‡å‘ global/window</span>
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">seconds</span>);
    }, <span class="hljs-number">1000</span>);
  }
};
timer.<span class="hljs-title function_">start</span>(); <span class="hljs-comment">// è¾“å‡º NaNï¼ˆå› ä¸º window.seconds æœªå®šä¹‰ï¼‰</span>
</code></pre>
<h3 data-id="heading-12">è§£å†³æ–¹æ¡ˆä¸€ï¼šä½¿ç”¨ bind</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> timer = {
  <span class="hljs-attr">seconds</span>: <span class="hljs-number">0</span>,
  <span class="hljs-title function_">start</span>(<span class="hljs-params"/>) {
    <span class="hljs-built_in">setInterval</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">seconds</span>++;
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">seconds</span>);
    }.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>), <span class="hljs-number">1000</span>); <span class="hljs-comment">// âœ… ç»‘å®šå¤–å±‚ this</span>
  }
};
timer.<span class="hljs-title function_">start</span>(); <span class="hljs-comment">// 1, 2, 3...</span>
</code></pre>
<p>è¿™é‡Œï¼Œ<code>.bind(this)</code> åˆ›å»ºäº†ä¸€ä¸ªæ–°å‡½æ•°ï¼Œå…¶ <code>this</code> æ°¸ä¹…æŒ‡å‘ <code>timer</code> å¯¹è±¡ï¼Œæ— è®ºä½•æ—¶è¢«è°ƒç”¨éƒ½ä¸ä¼šæ”¹å˜ã€‚</p>
<h3 data-id="heading-13">è§£å†³æ–¹æ¡ˆäºŒï¼šthat = thisï¼ˆé—­åŒ…ä¿å­˜ï¼‰</h3>
<blockquote>
<p>â€œthat = this; ä½œç”¨åŸŸé“¾ä¿å­˜thisä¸”æŒ‡å‘â€</p>
</blockquote>
<p>è¿™æ˜¯ ES5 æ—¶ä»£çš„ç»å…¸å†™æ³•ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> timer = {
  <span class="hljs-attr">seconds</span>: <span class="hljs-number">0</span>,
  <span class="hljs-title function_">start</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> that = <span class="hljs-variable language_">this</span>; <span class="hljs-comment">// ä¿å­˜ this åˆ°å˜é‡</span>
    <span class="hljs-built_in">setInterval</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
      that.<span class="hljs-property">seconds</span>++; <span class="hljs-comment">// é€šè¿‡é—­åŒ…è®¿é—®</span>
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(that.<span class="hljs-property">seconds</span>);
    }, <span class="hljs-number">1000</span>);
  }
};
</code></pre>
<p>è™½ç„¶æœ‰æ•ˆï¼Œä½†éœ€è¦é¢å¤–å˜é‡ï¼Œä¸”åœ¨æ·±å±‚åµŒå¥—ä¸­å®¹æ˜“æ··ä¹±ã€‚<code>bind</code> æ›´åŠ å£°æ˜å¼å’Œå®‰å…¨ã€‚</p>
<hr/>
<h2 data-id="heading-14">äº”ã€ç®­å¤´å‡½æ•°ï¼šæ²¡æœ‰ this çš„â€œä½›ç³»â€å‡½æ•°</h2>
<h3 data-id="heading-15">æ ¸å¿ƒç‰¹æ€§</h3>
<p>ç®­å¤´å‡½æ•°ï¼ˆArrow Functionï¼‰<strong>æ²¡æœ‰è‡ªå·±çš„ <code>this</code></strong>ã€‚å®ƒä¸ä¼šåˆ›å»ºæ–°çš„ <code>this</code> ä¸Šä¸‹æ–‡ï¼Œè€Œæ˜¯<strong>è¯æ³•åœ°ç»§æ‰¿å¤–å±‚ä½œç”¨åŸŸçš„ <code>this</code></strong>ã€‚</p>
<blockquote>
<p>â€œCherryç®­å¤´å‡½æ•°æ”¾å¼ƒäº†è‡ªå·±çš„thisï¼Œæ²¡æœ‰this æŒ‡å‘æŒ‡å‘ çˆ¶çº§ä½œç”¨åŸŸçš„thisâ€</p>
</blockquote>
<p>è¿™å¥è¯å ªç§°å¯¹ç®­å¤´å‡½æ•° <code>this</code> è¡Œä¸ºçš„å®Œç¾æ¦‚æ‹¬ï¼</p>
<ul>
<li>â€œæ”¾å¼ƒäº†è‡ªå·±çš„ thisâ€ â†’ ç®­å¤´å‡½æ•°å†…éƒ¨ä¸å­˜åœ¨ <code>this</code> ç»‘å®šã€‚</li>
<li>â€œæŒ‡å‘çˆ¶çº§ä½œç”¨åŸŸçš„ thisâ€ â†’ å®ƒçš„ <code>this</code> ç”±å®šä¹‰æ—¶çš„å¤–å±‚ä½œç”¨åŸŸå†³å®šï¼Œä¸è°ƒç”¨æ–¹å¼æ— å…³ã€‚</li>
</ul>
<h3 data-id="heading-16">ç¤ºä¾‹å¯¹æ¯”</h3>
<h4 data-id="heading-17">æ™®é€šå‡½æ•°ï¼ˆthis ä¸¢å¤±ï¼‰</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> obj = {
  <span class="hljs-attr">name</span>: <span class="hljs-string">'David'</span>,
  <span class="hljs-title function_">delayedLog</span>(<span class="hljs-params"/>) {
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>); <span class="hljs-comment">// âŒ undefined</span>
    }, <span class="hljs-number">100</span>);
  }
};
obj.<span class="hljs-title function_">delayedLog</span>();
</code></pre>
<h4 data-id="heading-18">ç®­å¤´å‡½æ•°ï¼ˆè‡ªåŠ¨ç»§æ‰¿ï¼‰</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> obj = {
  <span class="hljs-attr">name</span>: <span class="hljs-string">'Cherry'</span>, <span class="hljs-comment">// æ³¨æ„ï¼šåŸæ–‡ç‰¹æ„ç”¨äº† "Cherry"</span>
  <span class="hljs-title function_">delayedLog</span>(<span class="hljs-params"/>) {
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>); <span class="hljs-comment">// âœ… "Cherry"</span>
    }, <span class="hljs-number">100</span>);
  }
};
obj.<span class="hljs-title function_">delayedLog</span>();
</code></pre>
<p>ä¸ºä»€ä¹ˆèƒ½æˆåŠŸï¼Ÿå› ä¸ºç®­å¤´å‡½æ•°çš„ <code>this</code> ç»§æ‰¿è‡ª <code>delayedLog</code> æ–¹æ³•ï¼Œè€Œ <code>delayedLog</code> çš„ <code>this</code> æŒ‡å‘ <code>obj</code>ã€‚</p>
<h3 data-id="heading-19">ç®­å¤´å‡½æ•°çš„ä¸å¯å˜æ€§</h3>
<p>ç”±äºç®­å¤´å‡½æ•°æ²¡æœ‰ <code>this</code>ï¼Œæ‰€ä»¥ä»¥ä¸‹æ“ä½œæ— æ•ˆï¼š</p>
<pre><code class="hljs language-ini" lang="ini">const <span class="hljs-attr">fn</span> = () =&gt; console.log(this.name)<span class="hljs-comment">;</span>
const <span class="hljs-attr">obj</span> = { name: <span class="hljs-string">'Eve'</span> }<span class="hljs-comment">;</span>

fn.call(obj)<span class="hljs-comment">;   // ä»è¾“å‡ºå…¨å±€ä½œç”¨åŸŸçš„ nameï¼ˆæˆ– undefinedï¼‰</span>
fn.bind(obj)()<span class="hljs-comment">; // åŒä¸Š</span>
</code></pre>
<p><code>call</code>ã€<code>apply</code>ã€<code>bind</code> å¯¹ç®­å¤´å‡½æ•°çš„ <code>this</code> <strong>æ¯«æ— å½±å“</strong>ã€‚</p>
<h3 data-id="heading-20">é€‚ç”¨åœºæ™¯ vs é™·é˜±</h3>
<p>âœ… <strong>é€‚åˆ</strong>ï¼š</p>
<ul>
<li>å›è°ƒå‡½æ•°ï¼ˆå¦‚ <code>map</code>, <code>filter</code>, <code>setTimeout</code>ï¼‰</li>
<li>é¿å… <code>that = this</code> çš„æ ·æ¿ä»£ç </li>
</ul>
<p>âŒ <strong>ä¸é€‚åˆ</strong>ï¼š</p>
<ul>
<li>å¯¹è±¡æ–¹æ³•ï¼ˆä¼šç»§æ‰¿å¤–å±‚ thisï¼Œå¯èƒ½ä¸æ˜¯å¯¹è±¡æœ¬èº«ï¼‰</li>
<li>æ„é€ å‡½æ•°ï¼ˆç®­å¤´å‡½æ•°ä¸èƒ½ç”¨ <code>new</code> è°ƒç”¨ï¼‰</li>
<li>éœ€è¦åŠ¨æ€ <code>this</code> çš„åœºæ™¯</li>
</ul>
<hr/>
<h2 data-id="heading-21">å…­ã€ç»¼åˆæ¡ˆä¾‹ï¼šå››ç§æ–¹å¼å¯¹æ¯”</h2>
<p>å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªè®¡æ•°å™¨å¯¹è±¡ï¼Œéœ€è¦åœ¨ 1 ç§’åæ‰“å°å½“å‰å€¼ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> counter = {
  <span class="hljs-attr">count</span>: <span class="hljs-number">0</span>,
  
  <span class="hljs-comment">// æ–¹å¼1ï¼šæ™®é€šå‡½æ•° + that = this</span>
  <span class="hljs-title function_">method1</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> self = <span class="hljs-variable language_">this</span>;
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'method1:'</span>, self.<span class="hljs-property">count</span>);
    }, <span class="hljs-number">1000</span>);
  },

  <span class="hljs-comment">// æ–¹å¼2ï¼šbind</span>
  <span class="hljs-title function_">method2</span>(<span class="hljs-params"/>) {
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'method2:'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span>);
    }.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>), <span class="hljs-number">1000</span>);
  },

  <span class="hljs-comment">// æ–¹å¼3ï¼šç®­å¤´å‡½æ•°</span>
  <span class="hljs-title function_">method3</span>(<span class="hljs-params"/>) {
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'method3:'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span>);
    }, <span class="hljs-number">1000</span>);
  },

  <span class="hljs-comment">// æ–¹å¼4ï¼šcallï¼ˆéœ€ç«‹å³æ‰§è¡Œï¼Œä¸é€‚åˆå®šæ—¶å™¨ï¼Œä½†å¯æ¨¡æ‹Ÿï¼‰</span>
  <span class="hljs-title function_">method4</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> fn = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) { <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'method4:'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span>); };
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> fn.<span class="hljs-title function_">call</span>(<span class="hljs-variable language_">this</span>), <span class="hljs-number">1000</span>); <span class="hljs-comment">// ç»“åˆç®­å¤´+call</span>
  }
};

counter.<span class="hljs-title function_">method1</span>(); <span class="hljs-comment">// 0</span>
counter.<span class="hljs-title function_">method2</span>(); <span class="hljs-comment">// 0</span>
counter.<span class="hljs-title function_">method3</span>(); <span class="hljs-comment">// 0</span>
counter.<span class="hljs-title function_">method4</span>(); <span class="hljs-comment">// 0</span>
</code></pre>
<p>å››ç§æ–¹å¼éƒ½èƒ½æ­£ç¡®è¾“å‡ºï¼Œä½†<strong>ç®­å¤´å‡½æ•°æœ€ç®€æ´</strong>ï¼Œ<strong>bind æœ€æ˜¾å¼</strong>ï¼Œ<strong>that = this æœ€ä¼ ç»Ÿ</strong>ã€‚</p>
<hr/>
<h2 data-id="heading-22">ä¸ƒã€this ç»‘å®šä¼˜å…ˆçº§æ€»ç»“</h2>
<p>å½“å¤šä¸ªè§„åˆ™åŒæ—¶å­˜åœ¨æ—¶ï¼ŒJavaScript æŒ‰ä»¥ä¸‹ä¼˜å…ˆçº§ç¡®å®š <code>this</code>ï¼š</p>
<ol>
<li><strong>new ç»‘å®š</strong>ï¼ˆæ„é€ å‡½æ•°ï¼‰â†’ æœ€é«˜</li>
<li><strong>æ˜¾å¼ç»‘å®š</strong>ï¼ˆ<code>call</code> / <code>apply</code> / <code>bind</code>ï¼‰</li>
<li><strong>éšå¼ç»‘å®š</strong>ï¼ˆå¯¹è±¡æ–¹æ³•è°ƒç”¨ï¼Œå¦‚ <code>obj.fn()</code>ï¼‰</li>
<li><strong>é»˜è®¤ç»‘å®š</strong>ï¼ˆç‹¬ç«‹å‡½æ•°è°ƒç”¨ï¼‰</li>
</ol>
<blockquote>
<p>ç®­å¤´å‡½æ•°ä¸å‚ä¸æ­¤è§„åˆ™ï¼Œå› ä¸ºå®ƒæ ¹æœ¬æ²¡æœ‰ <code>this</code>ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-23">å…«ã€å¸¸è§è¯¯åŒºä¸æœ€ä½³å®è·µ</h2>
<h3 data-id="heading-24">è¯¯åŒº1ï¼šè®¤ä¸ºç®­å¤´å‡½æ•°æ€»æ˜¯æ›´å¥½</h3>
<p>é”™ï¼ç®­å¤´å‡½æ•°åœ¨å¯¹è±¡æ–¹æ³•ä¸­ä¼šå¯¼è‡´ <code>this</code> æŒ‡å‘å¤–å±‚ï¼ˆå¯èƒ½æ˜¯å…¨å±€ï¼‰ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> badObj = {
  <span class="hljs-attr">name</span>: <span class="hljs-string">'Bad'</span>,
  <span class="hljs-attr">getName</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> <span class="hljs-comment">// âŒ this æŒ‡å‘å…¨å±€</span>
};
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(badObj.<span class="hljs-title function_">getName</span>()); <span class="hljs-comment">// undefined</span>
</code></pre>
<p>åº”ä½¿ç”¨æ™®é€šå‡½æ•°ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> goodObj = {
  <span class="hljs-attr">name</span>: <span class="hljs-string">'Good'</span>,
  <span class="hljs-title function_">getName</span>(<span class="hljs-params"/>) { <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>; } <span class="hljs-comment">// âœ…</span>
};
</code></pre>
<h3 data-id="heading-25">è¯¯åŒº2ï¼šbind åè¿˜èƒ½è¢« call è¦†ç›–</h3>
<p>ä¸èƒ½ï¼<code>bind</code> åˆ›å»ºçš„å‡½æ•°å…¶ <code>this</code> æ˜¯<strong>æ°¸ä¹…é”å®š</strong>çš„ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">f</span>(<span class="hljs-params"/>) { <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">x</span>); }
<span class="hljs-keyword">const</span> bound = f.<span class="hljs-title function_">bind</span>({<span class="hljs-attr">x</span>: <span class="hljs-number">1</span>});
bound.<span class="hljs-title function_">call</span>({<span class="hljs-attr">x</span>: <span class="hljs-number">2</span>}); <span class="hljs-comment">// è¾“å‡º 1ï¼Œä¸æ˜¯ 2ï¼</span>
</code></pre>
<h3 data-id="heading-26">æœ€ä½³å®è·µ</h3>
<ul>
<li>åœ¨ç±»æ–¹æ³•æˆ–å¯¹è±¡æ–¹æ³•ä¸­ï¼Œä½¿ç”¨æ™®é€šå‡½æ•°ã€‚</li>
<li>åœ¨å›è°ƒã€äº‹ä»¶ç›‘å¬ã€å®šæ—¶å™¨ä¸­ï¼Œä¼˜å…ˆè€ƒè™‘ç®­å¤´å‡½æ•°ã€‚</li>
<li>è‹¥éœ€å…¼å®¹æ—§ç¯å¢ƒæˆ–éœ€è¦é¢„è®¾å‚æ•°ï¼Œä½¿ç”¨ <code>bind</code>ã€‚</li>
<li>é¿å…è¿‡åº¦ä½¿ç”¨ <code>that = this</code>ï¼Œé™¤éåœ¨ä¸æ”¯æŒç®­å¤´å‡½æ•°çš„ç¯å¢ƒä¸­ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-27">ä¹ã€ç»“è¯­ï¼šæŒæ¡ thisï¼Œå°±æ˜¯æŒæ¡ JavaScript çš„çµé­‚</h2>
<p>ç°åœ¨ï¼Œæˆ‘ä»¬ä¸ä»…è¯»æ‡‚äº†å®ƒï¼Œæ›´ç†è§£äº†å…¶èƒŒåçš„æŠ€æœ¯å“²å­¦ï¼š</p>
<ul>
<li><strong><code>call</code>/<code>apply</code></strong> æ˜¯â€œå‘½ä»¤å¼â€çš„å¹²é¢„â€”â€”æˆ‘è¦ä½ ç°åœ¨å°±ç”¨è¿™ä¸ª <code>this</code>ï¼</li>
<li><strong><code>bind</code></strong> æ˜¯â€œé˜²å¾¡å¼â€çš„è®¾è®¡â€”â€”æ— è®ºä½•æ—¶è°ƒç”¨ï¼Œéƒ½å¿…é¡»ç”¨è¿™ä¸ª <code>this</code>ï¼</li>
<li><strong><code>that = this</code></strong> æ˜¯â€œå¦¥åå¼â€çš„æ™ºæ…§â€”â€”æ—¢ç„¶ä½ é ä¸ä½ï¼Œæˆ‘å°±è‡ªå·±å­˜ä¸€ä»½ï¼</li>
<li><strong>ç®­å¤´å‡½æ•°</strong> æ˜¯â€œå£°æ˜å¼â€çš„ä¼˜é›…â€”â€”æˆ‘ä¸éœ€è¦ <code>this</code>ï¼Œæˆ‘ä¿¡ä»»æˆ‘çš„ä¸Šä¸‹æ–‡ï¼</li>
</ul>
<p>JavaScript çš„é­…åŠ›ï¼Œæ­£åœ¨äºè¿™ç§çµæ´»æ€§ä¸è§„åˆ™æ€§çš„ç»Ÿä¸€ã€‚å½“ä½ èƒ½è‡ªå¦‚åœ°åœ¨è¿™äº›å·¥å…·ä¹‹é—´åˆ‡æ¢ï¼Œä½ å°±ä¸å†æ˜¯ <code>this</code> çš„å¥´éš¶ï¼Œè€Œæ˜¯å®ƒçš„ä¸»äººã€‚</p>
<p>æ„¿ä½ åœ¨æœªæ¥çš„ä»£ç ä¸­ï¼Œä¸å†å¯¹ <code>this</code> æ„Ÿåˆ°è¿·èŒ«ï¼Œè€Œæ˜¯å¾®ç¬‘ç€è¯´ï¼š</p>
<blockquote>
<p>â€œæˆ‘çŸ¥é“ä½ æ˜¯è°ï¼Œä¹ŸçŸ¥é“ä½ è¯¥å»å“ªã€‚â€</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åœ¨ Kubernetes ä¸Šé€šè¿‡ .NET + Argo Workflows å®ç°å¤§è§„æ¨¡å¹¶è¡Œä»¿çœŸå®éªŒ]]></title>    <link>https://juejin.cn/post/7586208617603366946</link>    <guid>https://juejin.cn/post/7586208617603366946</guid>    <pubDate>2025-12-22T03:23:47.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7586208617603366946" data-draft-id="7585888537642450959" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åœ¨ Kubernetes ä¸Šé€šè¿‡ .NET + Argo Workflows å®ç°å¤§è§„æ¨¡å¹¶è¡Œä»¿çœŸå®éªŒ"/> <meta itemprop="keywords" content="æ¶æ„"/> <meta itemprop="datePublished" content="2025-12-22T03:23:47.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="gohchunlin"/> <meta itemprop="url" content="https://juejin.cn/user/3491704660036302"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åœ¨ Kubernetes ä¸Šé€šè¿‡ .NET + Argo Workflows å®ç°å¤§è§„æ¨¡å¹¶è¡Œä»¿çœŸå®éªŒ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3491704660036302/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    gohchunlin
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-22T03:23:47.000Z" title="Mon Dec 22 2025 03:23:47 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>æœ€è¿‘æˆ‘å¤„ç†äº†ä¸€ä¸ªç¦»æ•£äº‹ä»¶ä»¿çœŸï¼ˆDiscrete Event Simulationï¼ŒDESï¼‰çš„é¡¹ç›®ï¼Œé¢ä¸´ä¸€ä¸ªç»å…¸éš¾é¢˜ï¼šä»£ç é€»è¾‘å®Œå…¨æ­£ç¡®ï¼Œä½†è¿è¡Œé€Ÿåº¦æ…¢åˆ°ä»¤äººç»æœ›ã€‚</p>
<p>å¦‚æœæŒ‰ç…§ä¼ ç»Ÿçš„å•æœºæ€è·¯ï¼Œå®Œæˆä¸€æ¬¡å¯é çš„è’™ç‰¹å¡æ´›ï¼ˆMonte Carloï¼‰å®éªŒéœ€è¦åˆ° 2026 å¹´æ‰èƒ½è·‘å‡ºç»“æœã€‚æœ¬æ–‡å°†åˆ†äº«æˆ‘å¦‚ä½•æ‰“åˆ©ç”¨ Kubernetes ï¼ˆK8sï¼‰ å’Œ Argo Workflows æ„å»ºä¸€å¥—â€œä»¿çœŸå®éªŒå®¤â€ï¼Œå®ç°ç®—åŠ›è·ƒå‡ã€‚</p>
<h2 data-id="heading-1">æ ¸å¿ƒç—›ç‚¹ï¼šä¸ºä»€ä¹ˆâ€œåŠ  CPUâ€è§£å†³ä¸äº†é—®é¢˜ï¼Ÿ</h2>
<p>åœ¨ç¦»æ•£äº‹ä»¶ä»¿çœŸä¸­ï¼Œç³»ç»Ÿçš„å®Œæ•´æ€§ä¾èµ–äºä¸€ä¸ª<strong>ç»Ÿä¸€çš„è™šæ‹Ÿæ—¶é’Ÿ</strong>å’Œ<strong>ä¸­å¤®æœªæ¥äº‹ä»¶åˆ—è¡¨ï¼ˆFuture Event List, FELï¼‰</strong>ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/197ecf5cebc8414185371a5a5139fb12~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZ29oY2h1bmxpbg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766978627&amp;x-signature=9FuJE1Ep44sZTIiI3o6yRJMnhIg%3D" alt="" loading="lazy"/></p>
<p>DES çš„æ ¸å¿ƒé€»è¾‘æ˜¯ä¸¥æ ¼æŒ‰æ—¶é—´é¡ºåºå¤„ç†äº‹ä»¶ã€‚è¿™æ„å‘³ç€ï¼š</p>
<ul>
<li>ä½ æ— æ³•å°†å•ä¸ªä»¿çœŸä»»åŠ¡æ‹†åˆ†åˆ°å¤šä¸ª Pod ä¸Šè·‘ã€‚</li>
<li>å„èŠ‚ç‚¹é—´çš„ç½‘ç»œå»¶è¿Ÿä¼šå½»åº•æ‘§æ¯äº‹ä»¶çš„å› æœé“¾ã€‚</li>
<li><strong>ç»“è®ºï¼š</strong> å•æ¬¡ä»¿çœŸä»»åŠ¡åœ¨æ¶æ„ä¸Šæ˜¯<strong>å¤©ç„¶å•çº¿ç¨‹</strong>çš„ã€‚</li>
</ul>
<p>è™½ç„¶æˆ‘ä»¬æ— æ³•å¹¶è¡ŒåŒ–â€œå•ä¸ªä»¿çœŸâ€ï¼Œä½†æˆ‘ä»¬å¯ä»¥å¹¶è¡ŒåŒ–â€œæ•´ä¸ªå®éªŒâ€ã€‚è¿™æ˜¯ä¸€ä¸ªå…¸å‹çš„ <strong>â€œå°´å°¬å¹¶è¡Œâ€ï¼ˆEmbarrassingly Parallelï¼‰</strong> åœºæ™¯ã€‚</p>
<h2 data-id="heading-2">æ¶æ„è®¾è®¡ï¼šä»â€œæœåŠ¡å™¨â€è½¬å‘â€œå®éªŒå®¤â€</h2>
<p>ä¸ºäº†è§£å†³ 5,000 æ¬¡å‚æ•°æ‰«é¢‘ï¼ˆParameter Sweepsï¼‰çš„éœ€æ±‚ï¼Œæˆ‘å°† Kubernetes ä»ä¸€ä¸ªâ€œæ‰˜ç®¡ç½‘ç«™çš„å¹³å°â€è½¬åŒ–ä¸ºä¸€å°â€œæŒ‰éœ€ä½¿ç”¨çš„è¶…çº§è®¡ç®—æœºâ€ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/52d10789b1b24dde827de9d864ee11ae~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZ29oY2h1bmxpbg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766978627&amp;x-signature=zm80z4Mqx9u6FbuSlCnVbaydhxw%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-3">æ‰§è¡Œå¼•æ“ï¼šHeadless .NET 10</h3>
<p>åº•å±‚åŸºäº .NET Console ç¨‹åºï¼Œå…³é”®ç‚¹åœ¨äºåˆ©ç”¨ System.CommandLine å»ºç«‹å®¹å™¨ä¸ç¼–æ’å™¨ä¹‹é—´çš„<strong>ä¸¥æ ¼å¥‘çº¦</strong>ã€‚</p>
<p>æˆ‘ä»¬å°†ä»¿çœŸå˜é‡è®¾ç½®ä¸º CLI å‚æ•°ã€‚</p>
<pre><code class="hljs language-dart" lang="dart">using System.CommandLine;

<span class="hljs-comment">// å®šä¹‰æ ¹å‘½ä»¤</span>
<span class="hljs-keyword">var</span> rootCommand = <span class="hljs-keyword">new</span> RootCommand { Description = <span class="hljs-string">"ç¦»æ•£äº‹ä»¶ä»¿çœŸ CLI å·¥å…·"</span> };

<span class="hljs-comment">// æ ¸å¿ƒå‚æ•°ï¼šå¹³å‡åˆ°è¾¾æ—¶é—´</span>
<span class="hljs-keyword">var</span> meanArrivalSecondsOption = <span class="hljs-keyword">new</span> Option&lt;<span class="hljs-built_in">double</span>&gt;(
    name: <span class="hljs-string">"--arrival-secs"</span>,
    description: <span class="hljs-string">"Mean arrival time in seconds."</span>,
    getDefaultValue: () =&gt; <span class="hljs-number">5.0</span>
);

<span class="hljs-keyword">var</span> simpleServerCommand = <span class="hljs-keyword">new</span> Command(<span class="hljs-string">"simple-server"</span>, <span class="hljs-string">"è¿è¡Œä»¿çœŸæ¼”ç¤º"</span>);
simpleServerCommand.AddOption(meanArrivalSecondsOption);

simpleServerCommand.SetHandler((<span class="hljs-built_in">double</span> meanArrivalSeconds) =&gt;
{
    <span class="hljs-comment">// è¿™é‡Œçš„é€»è¾‘æ˜¯å•çº¿ç¨‹çš„ï¼Œä½†å®ƒæ˜¯å¯é…ç½®çš„</span>
    SimpleServerAndGenerator.RunDemo(loggerFactory, meanArrivalSeconds);
}, meanArrivalSecondsOption);
</code></pre>
<h3 data-id="heading-4">ä»»åŠ¡ç¼–æ’ï¼šArgo Workflows</h3>
<p>å¾ˆå¤šäººç¬¬ä¸€ååº”æ˜¯ä½¿ç”¨åŸç”Ÿ K8s Jobã€‚ä½†åœ¨å¤§è§„æ¨¡åœºæ™¯ä¸‹ï¼ŒåŸç”Ÿ Job å¤ªè¿‡ç®€é™‹ï¼Œéš¾ä»¥å¯è§†åŒ–ï¼Œä¸”å¼‚å¸¸å¤„ç†æˆæœ¬æé«˜ã€‚</p>
<p>æˆ‘é€‰æ‹©äº† <strong>Argo Workflows</strong>ã€‚å®ƒçš„æ€æ‰‹é”æ˜¯ withItemsï¼ˆæˆ– withParamï¼‰ï¼Œå¯ä»¥è½»æ¾å®ç°<strong>æ‰‡å‡ºï¼ˆFan-outï¼‰</strong>ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">argoproj.io/v1alpha1</span>
<span class="hljs-attr">kind:</span> <span class="hljs-string">Workflow</span>
<span class="hljs-attr">metadata:</span>
  <span class="hljs-attr">generateName:</span> <span class="hljs-string">sna-parallel-experiment-</span>
<span class="hljs-attr">spec:</span>
  <span class="hljs-attr">entrypoint:</span> <span class="hljs-string">sna-demo</span>
  <span class="hljs-attr">templates:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">sna-demo</span>
    <span class="hljs-attr">steps:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">run-simulation</span>
        <span class="hljs-attr">template:</span> <span class="hljs-string">simulation-job</span>
        <span class="hljs-attr">arguments:</span>
          <span class="hljs-attr">parameters:</span> [{<span class="hljs-attr">name:</span> <span class="hljs-string">arrival-secs</span>, <span class="hljs-attr">value:</span> <span class="hljs-string">"<span class="hljs-template-variable">{{item}}</span>"</span>}]
        <span class="hljs-comment"># æ ¸å¿ƒï¼šå®šä¹‰å‚æ•°æ± ï¼ŒArgo ä¼šè‡ªåŠ¨è°ƒåº¦æˆç™¾ä¸Šåƒçš„ Pod å¹¶å‘æ‰§è¡Œ</span>
        <span class="hljs-attr">withItems:</span> [<span class="hljs-string">"5"</span>, <span class="hljs-string">"10"</span>, <span class="hljs-string">"15"</span>, <span class="hljs-string">"20"</span>, <span class="hljs-string">"25"</span>] 

  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">simulation-job</span>
    <span class="hljs-attr">inputs:</span>
      <span class="hljs-attr">parameters:</span> [{<span class="hljs-attr">name:</span> <span class="hljs-string">arrival-secs</span>}]
    <span class="hljs-attr">container:</span>
      <span class="hljs-attr">image:</span> <span class="hljs-string">my-registry/sna-demo:latest</span>
      <span class="hljs-attr">args:</span> [<span class="hljs-string">"demo"</span>, <span class="hljs-string">"simple-server"</span>, <span class="hljs-string">"--arrival-secs"</span>, <span class="hljs-string">"<span class="hljs-template-variable">{{inputs.parameters.arrival-secs}}</span>"</span>]
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/276d08d3e8df4167811067428bc28dd2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZ29oY2h1bmxpbg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766978627&amp;x-signature=V21tZI4TjxDMLIK6KcqmGE0Tce4%3D" alt="" loading="lazy"/></p>
<p>Argo å¸®æˆ‘ä»¬å¤„ç†äº†èŠ‚æµï¼ˆThrottlingï¼‰ã€å¹¶å‘æ§åˆ¶å’Œå¤±è´¥é‡è¯•ï¼Œæˆ‘ä»¬åªéœ€å£°æ˜å®éªŒç›®æ ‡ã€‚</p>
<h3 data-id="heading-5">ç»“æ„åŒ–æ—¥å¿—</h3>
<p>å½“ä¸€åƒä¸ª Pod åŒæ—¶è¿è¡Œæ—¶ï¼Œkubectl logs æ¯«æ— æ„ä¹‰ã€‚æˆ‘ä»¬æ‰€è¦é¢å¯¹çš„æ˜¯æ¯åˆ†é’Ÿæ•°å¤§é‡çš„æ–‡æœ¬æµã€‚</p>
<p>å› æ­¤ï¼Œæˆ‘ä»¬å¿…é¡»å¼ƒç”¨çº¯æ–‡æœ¬æ—¥å¿—ï¼Œæ”¹ç”¨ <strong>ç»“æ„åŒ–æ—¥å¿— (Structured Logging)</strong>ã€‚é€šè¿‡ Serilog å°†å‚æ•°å’Œç»“æœç»‘å®šä¸º JSONï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"Timestamp"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2025-05-20T10:00:00"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"Level"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Information"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"Message"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Simulation Completed"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"Properties"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"WorkerCount"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">5</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"ServiceTime"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">12.5</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"Throughput"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0.98</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8c7724ded21d4b06873313af21e0473e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZ29oY2h1bmxpbg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766978627&amp;x-signature=HllnWYa%2FFXwdWVDHWfE1caaaHJk%3D" alt="" loading="lazy"/></p>
<p>é…åˆ <strong>Seq</strong> æˆ– <strong>ELK</strong>ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç›´æ¥é€šè¿‡ SQL è¯­å¥åœ¨å‡ ä¸‡ä»½å®éªŒç»“æœä¸­ç²¾å‡†å®šä½å¼‚å¸¸ç‚¹ã€‚</p>
<h2 data-id="heading-6">å®æˆ˜å¤ç›˜</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a022624743dc46329e69c114b26353d3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZ29oY2h1bmxpbg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766978627&amp;x-signature=286usV3R9RNVSKwDuvb%2BFWBya2Q%3D" alt="" loading="lazy"/></p>
<p>åœ¨æœ€è¿‘çš„å°åŒ— <strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fhwdc.ithome.com.tw%2F2025%2Fsession-page%2F4063" target="_blank" title="https://hwdc.ithome.com.tw/2025/session-page/4063" ref="nofollow noopener noreferrer">Hello World Developer Conference 2025</a></strong> ä¸Šï¼Œæˆ‘ä¹Ÿåˆ†äº«äº†è¿™ä¸€æ¨¡å‹ã€‚é€šè¿‡è¿™å¥—æ¶æ„ï¼š</p>
<ol>
<li><strong>å¼€å‘æ•ˆç‡ï¼š</strong> C# æ ¸å¿ƒé€»è¾‘æ— éœ€ä»»ä½•åˆ†å¸ƒå¼æ”¹é€ ã€‚</li>
<li><strong>ç®—åŠ›åˆ©ç”¨ï¼š</strong> ä»¥å‰å•æœºè·‘ä¸€å‘¨çš„å®éªŒï¼Œç°åœ¨åœ¨ K8s é›†ç¾¤ä¸Š 10 åˆ†é’Ÿå†…è·‘å®Œã€‚</li>
<li><strong>å¯ç»´æŠ¤æ€§ï¼š</strong> æ‰€æœ‰çš„å®éªŒå‚æ•°éƒ½æ˜¯å£°æ˜å¼çš„ï¼Œå¯è¿½æº¯ã€å¯é‡ç°ã€‚</li>
</ol>
<h3 data-id="heading-7">æ€»ç»“</h3>
<p>Kubernetes çš„å¼ºå¤§ä¸ä»…åœ¨äºæ‰˜ç®¡å¾®æœåŠ¡ï¼Œæ›´åœ¨äºå®ƒå¤„ç†<strong>å¤§è§„æ¨¡å¹¶å‘è®¡ç®—</strong>çš„èƒ½åŠ›ã€‚é€šè¿‡å°†â€œæ‰§è¡Œå¼•æ“â€ä¸â€œç¼–æ’å¤§è„‘â€è§£è€¦ï¼Œæˆ‘ä»¬èƒ½è®©è€æ—§çš„å•çº¿ç¨‹ç¨‹åºåœ¨äº‘åŸç”Ÿæ—¶ä»£ç„•å‘æ–°ç”Ÿã€‚</p>
<p><strong>é¡¹ç›®å¼€æºåœ°å€ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fgcl-team%2FSNA**" target="_blank" title="https://github.com/gcl-team/SNA**" ref="nofollow noopener noreferrer">github.com/gcl-team/SNâ€¦</a>Â (æ¬¢è¿äº¤æµæŒ‡æ­£)</p>
<p>--------</p>
<p><em>ä½œè€…ç®€ä»‹ï¼šåæ ‡æ–°åŠ å¡ï¼Œ20å¹´æ¶æ„/SREç»éªŒã€‚ä¸“æ³¨å¯è§‚æµ‹æ€§ (O11y) ä¸ç³»ç»Ÿç¨³å®šæ€§ã€‚Grafana &amp; Friends SG ç¤¾åŒºä¸»ç†äººã€‚ ä¸šä½™é¡¹ç›®ï¼šæ­£åœ¨å¼€å‘ SNAã€‚è¯•å›¾ç”¨ç®—æ³•æ¨¡æ‹Ÿé«˜å¹¶å‘åœºæ™¯ä¸‹çš„æ’é˜Ÿè®ºä¸ç³»ç»Ÿç“¶é¢ˆï¼ˆç”¨ AI è¾…åŠ©æ„å»ºï¼‰ã€‚</em></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åˆ©ç”¨ WebMKS å’Œ Java å®ç°å‰ç«¯è®¿é—®è™šæ‹Ÿæœºç½‘é¡µ]]></title>    <link>https://juejin.cn/post/7586157459971538996</link>    <guid>https://juejin.cn/post/7586157459971538996</guid>    <pubDate>2025-12-22T02:55:56.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7586157459971538996" data-draft-id="7585850609017110543" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åˆ©ç”¨ WebMKS å’Œ Java å®ç°å‰ç«¯è®¿é—®è™šæ‹Ÿæœºç½‘é¡µ"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-22T02:55:56.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="404NotFound305"/> <meta itemprop="url" content="https://juejin.cn/user/270910253182796"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åˆ©ç”¨ WebMKS å’Œ Java å®ç°å‰ç«¯è®¿é—®è™šæ‹Ÿæœºç½‘é¡µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/270910253182796/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    404NotFound305
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-22T02:55:56.000Z" title="Mon Dec 22 2025 02:55:56 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å®æˆ˜å¹²è´§ï¼šæ‰‹æŠŠæ‰‹æ•™ä½ ç”¨ WebMKS å’Œ Java æå®š ESXi è™šæ‹Ÿæœºç½‘é¡µæ§åˆ¶å°</h2>
<p>æœ€è¿‘åœ¨æŠ˜è…¾è™šæ‹Ÿæœºç½‘é¡µæ§åˆ¶å°ï¼Œå‘ç°ç”¨ VMware åŸç”Ÿçš„ WebMKS SDK é…åˆ ESXi çš„ API æ•ˆæœæœ€å¥½ã€‚è¿™å¥—æ–¹æ¡ˆä¸ç”¨è£…æ’ä»¶ï¼Œç›´æ¥åœ¨æµè§ˆå™¨é‡Œå°±èƒ½æ“ä½œã€‚æŠŠä¸­é—´è¸©è¿‡çš„å‘å’Œå®ç°é€»è¾‘æ•´ç†å‡ºæ¥ï¼Œå¸Œæœ›èƒ½å¸®åˆ°å¤§å®¶ã€‚</p>
<hr/>
<h3 data-id="heading-1">1. å‡†å¤‡å·¥ä½œï¼šä¾èµ–å¾—æ”¾æœ¬åœ°</h3>
<p>WebMKS è¿™ä¸ª SDK æ¯”è¾ƒè€æ´¾ï¼Œå®ƒç¦»ä¸å¼€ <strong>jQuery</strong>ã€‚ä¸ºäº†ç¨³å¦¥ï¼Œåˆ«ç”¨ CDNï¼Œç›´æ¥æŠŠè¿™å‡ ä¸ªæ–‡ä»¶ä¸‹è½½ä¸‹æ¥æ”¾åˆ°ä½ é¡¹ç›®çš„ <code>public/static/wmks</code> ç›®å½•ä¸‹ã€‚</p>
<h4 data-id="heading-2">æ€ä¹ˆå¼•å…¥ï¼Ÿ</h4>
<p>åœ¨ <code>index.html</code> é‡ŒæŒ‰è¿™ä¸ªé¡ºåºæ’å¥½ï¼ŒjQuery å¿…é¡»åœ¨æœ€å‰é¢ï¼Œä¸ç„¶ SDK æŠ¥é”™ã€‚</p>
<p>HTML</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"/static/wmks/css/wmks-all.css"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"/static/wmks/jquery.min.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"/static/wmks/jquery-ui.min.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"/static/wmks/wmks.min.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
</code></pre>
<hr/>
<h3 data-id="heading-3">2. åç«¯ï¼šJava æ€ä¹ˆæ‹¿ Ticket</h3>
<p>æ§åˆ¶å°è¿æ¥å‰å¾—å…ˆè¦ä¸ªâ€œé—¨ç¥¨â€ï¼ˆTicketï¼‰ã€‚åç«¯ç”¨ Java è°ƒç”¨å®˜æ–¹çš„ <code>vijava</code> åº“ï¼Œå» ESXi é‚£é‡Œç”³è¯·ä¸€ä¸ªã€‚</p>
<p><strong>æ ¸å¿ƒé€»è¾‘ï¼š</strong></p>
<ol>
<li>è¿ä¸Š ESXiã€‚</li>
<li>é  UUID æ‰¾åˆ°é‚£å°è™šæ‹Ÿæœºã€‚</li>
<li>ç”³è¯·ä¸€ä¸ªç±»å‹å« <code>webmks</code> çš„ç¥¨æ®ã€‚</li>
</ol>
<p>Java</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> TicketInfo <span class="hljs-title function_">getVmTicket</span><span class="hljs-params">(String host, String user, String pwd, String vmUuid)</span> <span class="hljs-keyword">throws</span> Exception {
    <span class="hljs-comment">// å»ºç«‹è¿æ¥</span>
    <span class="hljs-type">ServiceInstance</span> <span class="hljs-variable">si</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ServiceInstance</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">URL</span>(<span class="hljs-string">"https://"</span> + host + <span class="hljs-string">"/sdk"</span>), user, pwd, <span class="hljs-literal">true</span>);
    <span class="hljs-keyword">try</span> {
        <span class="hljs-type">InventoryNavigator</span> <span class="hljs-variable">nav</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">InventoryNavigator</span>(si.getRootFolder());
        <span class="hljs-type">VirtualMachine</span> <span class="hljs-variable">vm</span> <span class="hljs-operator">=</span> (VirtualMachine) nav.searchManagedEntity(<span class="hljs-string">"VirtualMachine"</span>, vmUuid);
        
        <span class="hljs-comment">// å…³é”®ï¼šæ‹¿ webmks ç¥¨æ®</span>
        <span class="hljs-type">VirtualMachineTicket</span> <span class="hljs-variable">vmt</span> <span class="hljs-operator">=</span> vm.acquireTicket(<span class="hljs-string">"webmks"</span>);
        
        <span class="hljs-comment">// æŠŠç¥¨æ®ã€ä¸»æœºIPã€ç«¯å£å‘ç»™å‰ç«¯</span>
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TicketInfo</span>(vmt.getTicket(), vmt.getHost(), <span class="hljs-number">443</span>);
    } <span class="hljs-keyword">finally</span> {
        si.getServerConnection().logout(); <span class="hljs-comment">// è®°å¾—é€€å‡ºç™»å½•ï¼Œä¸ç„¶ä¼šè¯å †ç§¯</span>
    }
}
</code></pre>
<hr/>
<h3 data-id="heading-4">3. å‰ç«¯ï¼šVue 3 é‡Œçš„æ ¸å¿ƒæ§åˆ¶</h3>
<h4 data-id="heading-5">åˆå§‹åŒ–è¿æ¥</h4>
<p>åœ¨ Vue é‡Œçš„æ€è·¯æ˜¯ï¼šæ‹¿åˆ°ç¥¨æ®åï¼Œç«‹åˆ»åˆå§‹åŒ– SDK å¹¶è¿ä¸Š WebSocketã€‚</p>
<p>TypeScript</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">startWMKS</span> = (<span class="hljs-params">ticket: <span class="hljs-built_in">string</span></span>) =&gt; {
  <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">WMKS_LIB</span> = <span class="hljs-variable language_">window</span>.<span class="hljs-property">WMKS</span>;
  
  <span class="hljs-comment">// åˆå§‹åŒ–é…ç½®</span>
  wmksInstance.<span class="hljs-property">value</span> = <span class="hljs-variable constant_">WMKS_LIB</span>.<span class="hljs-title function_">createWMKS</span>(<span class="hljs-string">"wmks-container"</span>, {
    <span class="hljs-attr">enableHints</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">changeResolutionOnResizing</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// çª—å£å˜äº†ï¼Œåˆ†è¾¨ç‡ä¹Ÿè·Ÿç€å˜</span>
    <span class="hljs-attr">rescaleOnParentResize</span>: <span class="hljs-literal">true</span>,      <span class="hljs-comment">// è‡ªåŠ¨ç¼©æ”¾</span>
    <span class="hljs-attr">position</span>: <span class="hljs-string">'absolute'</span>
  });

  <span class="hljs-comment">// è¿ä¸Š ESXi çš„ 443 ç«¯å£</span>
  wmksInstance.<span class="hljs-property">value</span>.<span class="hljs-title function_">connect</span>(<span class="hljs-string">`wss://<span class="hljs-subst">${activeVM.value.host}</span>:443/ticket/<span class="hljs-subst">${ticket}</span>`</span>);
};
</code></pre>
<h4 data-id="heading-6">å…¨å±æ€ä¹ˆå˜æ¸…æ™°ï¼Ÿ</h4>
<p>å…¨å±æ—¶å¦‚æœç›´æ¥æ‹‰ä¼¸ï¼Œç”»é¢ä¼šç³Šã€‚æˆ‘çš„åŠæ³•æ˜¯ï¼š<strong>å…ˆæ–­å¼€ï¼Œå˜å…¨å±ï¼Œå†é‡è¿</strong>ã€‚è™½ç„¶å¤šç­‰äº†åŠç§’ï¼Œä½†ç”»é¢ä¼šæ ¹æ®å…¨å±åçš„å°ºå¯¸é‡æ–°åå•†ï¼Œæ¸…æ™°åº¦ç¬é—´æå‡ã€‚</p>
<hr/>
<h3 data-id="heading-7">4. Windows è™šæ‹Ÿæœºçš„ä¸“é¡¹å…³ç…§</h3>
<p>æ Linux åŸºæœ¬æ²¡å•¥äº‹ï¼Œä½† Windows æŒºæŒ‘å‰”ï¼Œè¿™å‡ ç‚¹æ²¡åšåˆ°è‚¯å®šå‡ºé—®é¢˜ï¼š</p>
<ol>
<li><strong>å¿…è£… VMware Tools</strong>ï¼šä¸è£…çš„è¯ï¼Œæ˜¾å¡é©±åŠ¨ä¸è¡Œï¼Œç”»é¢ä¼ è¾“æ…¢ç”šè‡³ç›´æ¥é»‘å±ã€‚</li>
<li><strong>æ˜¾å­˜ç»™å¤Ÿ</strong>ï¼šWindows 10 è¿™ç§ç³»ç»Ÿï¼Œæ˜¾å­˜èµ·ç ç»™åˆ° <strong>128MB</strong>ã€‚</li>
<li><strong>CAD æŒ‰é’®</strong>ï¼šWindows ç™»å½•å¾—æŒ‰ <code>Ctrl+Alt+Del</code>ã€‚ç½‘é¡µé‡ŒæŒ‰æ²¡ç”¨ï¼Œå¿…é¡»ç»™ç”¨æˆ·åšä¸ªæŒ‰é’®è°ƒç”¨ <code>wmksInstance.sendCAD()</code>ã€‚</li>
</ol>
<hr/>
<h3 data-id="heading-8">5. æ ·å¼ï¼šåˆ«ç•™ç™½è¾¹</h3>
<p>ä¸ºäº†è®©é»‘è‰²èƒŒæ™¯é“ºæ»¡æ•´ä¸ªå¼¹çª—ï¼ŒCSS å¾—è¿™ä¹ˆå†™ï¼š</p>
<p>SCSS</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* å¼¹çª—æ ·å¼ */</span>
:<span class="hljs-built_in">deep</span>(.vnc-session-dialog) {
  <span class="hljs-attribute">display</span>: flex;
  <span class="hljs-attribute">flex-direction</span>: column;
  <span class="hljs-attribute">background</span>: <span class="hljs-number">#000</span> <span class="hljs-meta">!important</span>;

  <span class="hljs-comment">/* å…¨å±æ¨¡å¼å¼ºè¡Œå æ»¡ */</span>
  &amp;<span class="hljs-selector-class">.is-fullscreen</span> { 
    <span class="hljs-attribute">height</span>: <span class="hljs-number">100vh</span> <span class="hljs-meta">!important</span>;
    <span class="hljs-selector-class">.el-dialog__body</span> { <span class="hljs-attribute">flex</span>: <span class="hljs-number">1</span>; <span class="hljs-attribute">display</span>: flex; <span class="hljs-attribute">flex-direction</span>: column; }
  }

  <span class="hljs-comment">/* æ ¸å¿ƒï¼šè®© body è‡ªåŠ¨æ’‘å¼€ */</span>
  <span class="hljs-selector-class">.el-dialog__body</span> {
    <span class="hljs-attribute">flex</span>: <span class="hljs-number">1</span>;
    <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span> <span class="hljs-meta">!important</span>;
    <span class="hljs-attribute">overflow</span>: hidden;
  }
}
</code></pre>
<hr/>
<h3 data-id="heading-9">æ€»ç»“ä¸€ä¸‹</h3>
<p>åšè¿™ç©æ„å„¿é€»è¾‘å…¶å®ä¸éš¾ï¼Œå…³é”®åœ¨äºç»†èŠ‚ï¼š</p>
<ul>
<li><strong>é¡ºåº</strong>ï¼šjQuery å¿…é¡»å…ˆå¼•ã€‚</li>
<li><strong>æ—¶æœº</strong>ï¼šå…¨å±é‡è¿èƒ½è§£å†³ç”»é¢ç³Šçš„é—®é¢˜ã€‚</li>
<li><strong>è¡¥ä¸</strong>ï¼šç»™ Windows ç•™ä¸ª CAD æŒ‰é’®ï¼Œè£…å¥½ VMware Toolsã€‚</li>
</ul>
<p>åªè¦è¿™å‡ ç‚¹å¯¹é½äº†ï¼Œå‰©ä¸‹çš„å°±æ˜¯è°ƒ UI è®©å®ƒçœ‹ç€æ›´é¡ºæ‰‹çš„äº‹å„¿äº†ã€‚
æœ€åæ”¾ä¸Šå›¾ç‰‡å’Œæºç </p>
<pre><code class="hljs language-js" lang="js">&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"vnc-app-wrapper"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"page-header"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"brand"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">el-icon</span> <span class="hljs-attr">:size</span>=<span class="hljs-string">"28"</span> <span class="hljs-attr">color</span>=<span class="hljs-string">"#409eff"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">Monitor</span> /&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">el-icon</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>VMware è™šæ‹ŸåŒ–èµ„æºç®¡ç†<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"vm-grid"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">"(vm, index) in vmList"</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">"index"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"vm-mini-card"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"vm-status-bar"</span> <span class="hljs-attr">:class</span>=<span class="hljs-string">"vm.status"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"vm-card-body"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"vm-icon"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">Platform</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">"vm.os === 'windows'"</span> /&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">Cpu</span> <span class="hljs-attr">v-else</span> /&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"vm-details"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">h3</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"vm-name"</span>&gt;</span>{{ vm.name }}<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"vm-ip"</span>&gt;</span>{{ vm.host }}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"vm-actions"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"primary"</span> <span class="hljs-attr">plain</span> <span class="hljs-attr">size</span>=<span class="hljs-string">"small"</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"openConsole(vm)"</span>&gt;</span>
              è¿æ¥æ§åˆ¶å°
            <span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"vm-footer"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>UUID: {{ vm.vmUuid.substring(0, 14) }}...<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">el-dialog</span> 
      <span class="hljs-attr">v-model</span>=<span class="hljs-string">"vncDialogVisible"</span> 
      <span class="hljs-attr">:fullscreen</span>=<span class="hljs-string">"isFullscreen"</span>
      <span class="hljs-attr">:width</span>=<span class="hljs-string">"isFullscreen ? '100%' : '1100px'"</span> 
      <span class="hljs-attr">top</span>=<span class="hljs-string">"5vh"</span>
      <span class="hljs-attr">:draggable</span>=<span class="hljs-string">"true"</span>
      <span class="hljs-attr">:show-close</span>=<span class="hljs-string">"false"</span>
      <span class="hljs-attr">class</span>=<span class="hljs-string">"vnc-session-dialog"</span>
      <span class="hljs-attr">:before-close</span>=<span class="hljs-string">"handleCloseVNC"</span>
    &gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">template</span> #<span class="hljs-attr">header</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"session-header drag-area"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"session-info"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"status-indicator"</span> <span class="hljs-attr">:class</span>=<span class="hljs-string">"connectionClass"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"session-name"</span>&gt;</span>
              {{ activeVM?.name }} | {{ activeVM?.host }}
            <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"session-controls"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> <span class="hljs-attr">size</span>=<span class="hljs-string">"small"</span> <span class="hljs-attr">link</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"sendCAD"</span>&gt;</span>CAD<span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"divider"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> <span class="hljs-attr">size</span>=<span class="hljs-string">"small"</span> <span class="hljs-attr">link</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"toggleFullscreen"</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">el-icon</span> <span class="hljs-attr">:size</span>=<span class="hljs-string">"16"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">FullScreen</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">"!isFullscreen"</span> /&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">CopyDocument</span> <span class="hljs-attr">v-else</span> /&gt;</span>
              <span class="hljs-tag">&lt;/<span class="hljs-name">el-icon</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> <span class="hljs-attr">size</span>=<span class="hljs-string">"small"</span> <span class="hljs-attr">link</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"danger"</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"handleCloseVNC"</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">el-icon</span> <span class="hljs-attr">:size</span>=<span class="hljs-string">"16"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">Close</span> /&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">el-icon</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> 
        <span class="hljs-attr">class</span>=<span class="hljs-string">"session-stage"</span> 
        <span class="hljs-attr">v-loading</span>=<span class="hljs-string">"reloading"</span> 
        <span class="hljs-attr">element-loading-background</span>=<span class="hljs-string">"rgba(0, 0, 0, 0.9)"</span>
        <span class="hljs-attr">element-loading-text</span>=<span class="hljs-string">"æ­£åœ¨é‡æ„ç”»é¢..."</span>
      &gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"wmks-container"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">el-dialog</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
&lt;/template&gt;

&lt;script setup lang="ts"&gt;
import { ref, nextTick, computed, onBeforeUnmount } from 'vue'
import { ElMessage } from 'element-plus'
import { Monitor, FullScreen, Close, CopyDocument, Platform, Cpu } from '@element-plus/icons-vue'
import { getVmConsoleTicket } from '@/api/taskManagement/vmConsole'


const vmList = ref([
  { 
    name: 'Windows-æµ‹è¯•æœº', 
    host: '', 
    username: '', 
    password: '', 
    vmUuid: '',
    os: 'windows',
    status: 'online'
  },
  { 
    name: 'Linux-ç”Ÿäº§æœº', 
    host: '', 
    username: '', 
    password: '', 
    vmUuid: '',
    os: 'linux',
    status: 'online'
  }
])

const activeVM = ref&lt;any&gt;(null)
const vncDialogVisible = ref(false)
const isFullscreen = ref(false)
const reloading = ref(false)
const vncStatus = ref('disconnected')
const wmksInstance = ref&lt;any&gt;(null)

const connectionClass = computed(() =&gt; ({
  'is-connecting': vncStatus.value === 'connecting',
  'is-connected': vncStatus.value === 'connected'
}))


const openConsole = (vm: any) =&gt; {
  activeVM.value = vm;
  handleConnect(false);
}

const toggleFullscreen = async () =&gt; {
  reloading.value = true;
  if (wmksInstance.value) {
    wmksInstance.value.disconnect();
    wmksInstance.value.destroy();
    wmksInstance.value = null;
  }
  isFullscreen.value = !isFullscreen.value;
  await nextTick();
  setTimeout(async () =&gt; {
    try { await handleConnect(true); } finally { reloading.value = false; }
  }, 500);
}

const handleConnect = async (isRetry = false) =&gt; {
  const win = window as any;
  if (!win.WMKS) return ElMessage.error("SDK æœªåŠ è½½");

  try {
    vncStatus.value = 'connecting';
    if (!isRetry) vncDialogVisible.value = true;

    const res = await getVmConsoleTicket({
      host: activeVM.value.host,
      username: activeVM.value.username,
      password: activeVM.value.password,
      vmUuid: activeVM.value.vmUuid
    });
    
    const ticket = res.data?.ticket || res.ticket || res;
    await nextTick();
    startWMKS(ticket);
  } catch (err) {
    ElMessage.error("Ticket ç”³è¯·å¤±è´¥ï¼Œè¯·æ£€æŸ¥æœºæˆ¿è¿æ¥");
    vncStatus.value = 'disconnected';
  }
}

const startWMKS = (ticket: string) =&gt; {
  const WMKS_LIB = (window as any).WMKS;
  wmksInstance.value = WMKS_LIB.createWMKS("wmks-container", {
    enableHints: true,
    useVNCHandshake: false,
    changeResolutionOnResizing: true,
    rescaleOnParentResize: true,
    position: 'absolute'
  });
  
  wmksInstance.value.register(WMKS_LIB.CONST.Events.CONNECTION_STATE_CHANGE, (evt: any, data: any) =&gt; {
    if (data.state === WMKS_LIB.CONST.ConnectionState.CONNECTED) {
      vncStatus.value = 'connected';
    }
  });

  wmksInstance.value.connect(`wss://${activeVM.value.host}:443/ticket/${ticket}`);
}

const sendCAD = () =&gt; wmksInstance.value?.sendCAD();
const handleCloseVNC = () =&gt; {
  if (wmksInstance.value) {
    wmksInstance.value.disconnect();
    wmksInstance.value.destroy();
    wmksInstance.value = null;
  }
  vncDialogVisible.value = false;
  isFullscreen.value = false;
  vncStatus.value = 'disconnected';
}

onBeforeUnmount(handleCloseVNC);
&lt;/script&gt;

&lt;style scoped lang="scss"&gt;
.vnc-app-wrapper {
  padding: 40px;
  background-color: #f8fafc;
  min-height: 100vh;
}

.page-header {
  max-width: 1200px;
  margin: 0 auto 40px;
  .brand {
    display: flex; align-items: center; gap: 12px;
    h1 { font-size: 22px; color: #334155; margin: 0; }
  }
}

.vm-grid {
  max-width: 1200px;
  margin: 0 auto;
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
  gap: 24px;
}

.vm-mini-card {
  background: #fff; border-radius: 12px; overflow: hidden;
  border: 1px solid #e2e8f0; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1);
  transition: transform 0.2s;
  &amp;:hover { transform: translateY(-4px); }

  .vm-status-bar { 
    height: 4px; background: #cbd5e1;
    &amp;.online { background: #10b981; }
  }
  
  .vm-card-body {
    padding: 24px; display: flex; flex-direction: column; align-items: center;
    .vm-icon {
      font-size: 32px; color: #3b82f6; margin-bottom: 16px;
      padding: 12px; background: #eff6ff; border-radius: 12px;
    }
    .vm-name { font-size: 17px; font-weight: 600; color: #1e293b; margin: 0 0 4px; }
    .vm-ip { font-size: 13px; color: #64748b; margin-bottom: 24px; }
    .vm-actions { width: 100%; .el-button { width: 100%; } }
  }

  .vm-footer {
    padding: 12px 20px; background: #f8fafc; border-top: 1px solid #f1f5f9;
    font-size: 11px; color: #94a3b8; font-family: ui-monospace, SFMono-Regular;
  }
}

:deep(.vnc-session-dialog) {
  display: flex; flex-direction: column;
  background: #000 !important; border-radius: 12px; overflow: hidden;
  
  .el-dialog__header {
    padding: 0 !important;
    margin: 0 !important;
    height: 50px;
    cursor: move; 
  }

  .el-dialog__body {
    flex: 1; display: flex; flex-direction: column;
    padding: 0 !important;
  }
  
  &amp;.is-fullscreen { border-radius: 0; }
}

.session-header {
  height: 50px; background: #1e293b; padding: 0 20px;
  display: flex; justify-content: space-between; align-items: center;
  
  .session-info {
    display: flex; align-items: center; gap: 10px;
    pointer-events: none; 
    .status-indicator { 
      width: 8px; height: 8px; border-radius: 50%; background: #64748b;
      &amp;.is-connected { background: #10b981; box-shadow: 0 0 8px #10b981; }
    }
    .session-name { color: #f1f5f9; font-size: 14px; font-weight: 500; }
  }
  
  .session-controls {
    pointer-events: auto;
    display: flex; align-items: center; gap: 10px;
    .divider { width: 1px; height: 16px; background: #334155; }
    .el-button { color: #94a3b8; &amp;:hover { color: #fff; } }
  }
}

.session-stage {
  flex: 1; width: 100%; min-height: 600px;
  background: #000; position: relative;
  #wmks-container { width: 100% !important; height: 100% !important; position: absolute; }
}

:deep(.el-dialog__headerbtn) { display: none; }
&lt;/style&gt;
</code></pre>
<p>è¿™æ˜¯index.htmlä¸‹é¢éœ€è¦å¼•å…¥çš„å†…å®¹</p>
<pre><code class="hljs language-js" lang="js">    &lt;link rel=<span class="hljs-string">"stylesheet"</span> href=<span class="hljs-string">"/WebMKS_SDK_2.2.0/css/wmks-all.css"</span>&gt;

    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://code.jquery.com/jquery-3.6.0.min.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
    
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
        <span class="hljs-variable language_">window</span>.<span class="hljs-property">jQuery</span> = <span class="hljs-variable language_">window</span>.<span class="hljs-property">$</span> = <span class="hljs-variable language_">window</span>.<span class="hljs-property">jQuery</span>;
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'JQuery Check:'</span>, <span class="hljs-variable language_">window</span>.<span class="hljs-property">jQuery</span>.<span class="hljs-property">fn</span>.<span class="hljs-property">jquery</span>);
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>

    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"/jquery-ui.min.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>

    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"/WebMKS_SDK_2.2.0/wmks.min.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>

    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
        <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">window</span>.<span class="hljs-property">jQuery</span> &amp;&amp; (<span class="hljs-variable language_">window</span>.<span class="hljs-property">jQuery</span>.<span class="hljs-property">ui</span> || <span class="hljs-variable language_">window</span>.<span class="hljs-property">jQuery</span>.<span class="hljs-property">widget</span>)) {
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Result: jQuery UI is fully loaded and attached to jQuery.'</span>);
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Result: jQuery UI failed to attach to window.jQuery!'</span>);
        }
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>

</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/eaddee8e7016447088ca752d2d4960da~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgNDA0Tm90Rm91bmQzMDU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766976955&amp;x-signature=4yNg4PNckCnrq4fr35duMAE5rx4%3D" alt="image.png" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ’ä»¶å¼€å‘å®å½•ï¼šæˆ‘ç”¨Comateåœ¨VS Codeé‡Œé€ äº†ä¸€åœºâ€œèƒ½è¢«ä»£ç èåŒ–â€çš„åˆé›ª]]></title>    <link>https://juejin.cn/post/7586482851098165288</link>    <guid>https://juejin.cn/post/7586482851098165288</guid>    <pubDate>2025-12-22T03:25:58.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7586482851098165288" data-draft-id="7585948869844795427" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ’ä»¶å¼€å‘å®å½•ï¼šæˆ‘ç”¨Comateåœ¨VS Codeé‡Œé€ äº†ä¸€åœºâ€œèƒ½è¢«ä»£ç èåŒ–â€çš„åˆé›ª"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯,å‰ç«¯æ¡†æ¶"/> <meta itemprop="datePublished" content="2025-12-22T03:25:58.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ–‡å¿ƒå¿«ç BaiduComate"/> <meta itemprop="url" content="https://juejin.cn/user/992209294070809"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ’ä»¶å¼€å‘å®å½•ï¼šæˆ‘ç”¨Comateåœ¨VS Codeé‡Œé€ äº†ä¸€åœºâ€œèƒ½è¢«ä»£ç èåŒ–â€çš„åˆé›ª
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/992209294070809/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ–‡å¿ƒå¿«ç BaiduComate
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-22T03:25:58.000Z" title="Mon Dec 22 2025 03:25:58 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»17åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>2025å¹´çš„ç¬¬ä¸€åœºé›ªï¼Œæˆ‘æ˜¯åœ¨æŠ¥é”™æ—¥å¿—é‡Œåº¦è¿‡çš„ğŸ˜­</p>
<p>æœ‹å‹åœˆåœ¨æ™’é›ªæ™¯ï¼Œæˆ‘åœ¨ç›¯ç€ VS Code ä¸‡å¹´ä¸å˜çš„ç•Œé¢å‘å‘†ã€‚</p>
<p>æ—¢ç„¶é”™è¿‡äº†ç°å®é‡Œçš„åˆé›ªï¼Œé‚£æˆ‘ä¸ºä»€ä¹ˆä¸èƒ½åœ¨æˆ‘çš„ IDE é‡Œä¸‹ä¸€åœºé›ªï¼Ÿ</p>
<p>äºæ˜¯ï¼Œä¸€ä¸ªæå…¶ç¦»è°±åˆå¸¦æ„Ÿçš„è„‘æ´è¯ç”Ÿäº†â€”â€”æˆ‘æƒ³åšä¸€ä¸ªVS Codeæ’ä»¶ï¼Œå®ç°ï¼š</p>
<ul>
<li>è½é›ªï¼šå½“æˆ‘åœä¸‹æ¥æ€è€ƒæˆ–è€…å•çº¯æ‘¸é±¼æ—¶ï¼Œè®©å±å¹•é£˜è½åˆé›ªï¼Œç§¯é›ªæ…¢æ…¢è¦†ç›–ä»£ç ï¼Œå‡è£…æˆ‘ä¹Ÿåœ¨è¿‡å†¬ã€‚</li>
<li>ç‡ƒç«ï¼šä¸€æ—¦æˆ‘å¼€å§‹ç‹‚ä¿® Bugï¼ŒæŒ‡å°–çš„æ¯ä¸€æ¬¡æ•²å‡»éƒ½è¦åœ¨å±å¹•åº•éƒ¨ç‚¹ç‡ƒçƒˆç«ã€‚æ‰‹é€Ÿè¶Šå¿«ï¼Œç«åŠ¿è¶Šæ—ºï¼Œç”šè‡³è¦è®©ç«æ˜Ÿå­æº…æ»¡æ•´ä¸ªå±å¹•ï¼Œä¸»æ‰“ä¸€ä¸ªç‰©ç†å–æš–å’Œè¾›åŠ³å¯è§†åŒ–ã€‚</li>
<li>äº’åŠ¨ï¼šåœ£è¯èŠ‚å¿«åˆ°äº†ï¼Œåœ¨æ²¡æœ‰æ“ä½œçš„æ—¶å€™ï¼Œè·³å‡ºNPCå’Œæˆ‘äº’åŠ¨ï¼Œå¢æ·»åœ£è¯æ°›å›´ã€‚</li>
</ul>
<p>æƒ³æ³•å¾ˆä¸°æ»¡ï¼Œç°å®å¾ˆéª¨æ„Ÿã€‚</p>
<p>è¦åœ¨ VS Code æå…¶å—é™çš„ Webview ç¯å¢ƒé‡Œï¼ŒåŒæ—¶è·‘é€šç‰©ç†ç§¯é›ªå †å ç®—æ³•å’Œ Doom Fire ç«ç„°æ¸²æŸ“ï¼Œè¿˜è¦ä¿è¯ä¸å¡é¡¿ï¼Œè¿™å¯¹æˆ‘è¿™ä¸ªåªæœ‰ç¢ç‰‡æ—¶é—´çš„å¼€å‘è€…æ¥è¯´ï¼Œç®€ç›´æ˜¯é™ç»´æ‰“å‡»ã€‚</p>
<p>å¥½åœ¨ï¼Œè¿™ä¸ªå†¬å¤©ï¼Œè™½ç„¶æ²¡æœ‰å¥³æœ‹å‹æš–æ‰‹ï¼Œä½†æˆ‘æœ‰éšå«éšåˆ°çš„ æ–‡å¿ƒå¿«ç ï¼ˆComateï¼‰ æš–å¿ƒğŸ¶</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5f6018bc8df3430d9ea0a86424d2cf2a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paH5b-D5b-r56CBQmFpZHVDb21hdGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766978758&amp;x-signature=qsGAUFFmMbRqdHUD16zveDlvSdE%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<h2 data-id="heading-0">01 æ™ºèƒ½è§„åˆ’ï¼šä»ä¸€å¥è¯éœ€æ±‚åˆ° MVPè½åœ°</h2>
<p>ï»¿é¡¹ç›®å¯åŠ¨é˜¶æ®µï¼Œæˆ‘é¢ä¸´çš„æœ€å¤§æŒ‘æˆ˜æ˜¯æ¶æ„è®¾è®¡ã€‚VS Code æ’ä»¶å¼€å‘æ¶‰åŠ Extension ä¸»è¿›ç¨‹ä¸ Webview æ¸²æŸ“è¿›ç¨‹çš„é€šä¿¡ï¼Œé…ç½®ç¹çä¸”å®¹æ˜“å‡ºé”™ã€‚è¿™æ¬¡æˆ‘æ²¡æœ‰ç›´æ¥å†™ä»£ç ï¼Œè€Œæ˜¯ä½¿ç”¨äº† Comate çš„ Spec æ¨¡å¼ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d85396cb8fcc40cd8fc933d50ca1d759~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paH5b-D5b-r56CBQmFpZHVDb21hdGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766978758&amp;x-signature=RwlFV%2B3qe7DhHPyB4e9vLnO2fjE%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>æˆ‘å‘ Comate æŠ›å‡ºäº†æˆ‘çš„æ ¸å¿ƒæ„æƒ³ï¼š</p>
<blockquote>
<p>â€œæˆ‘è¦åšä¸€ä¸ª VS Code æ’ä»¶ï¼Œæ ¸å¿ƒé€»è¾‘æ˜¯ç›‘å¬é”®ç›˜è¾“å…¥ã€‚è¾“å…¥é¢‘ç‡é«˜æ—¶åº•éƒ¨æ¸²æŸ“ç«ç„°ï¼Œé—²ç½®æ—¶é¡¶éƒ¨ä¸‹é›ªå¹¶ç§¯é›ªã€‚è¯·å¸®æˆ‘è®¾è®¡æ¶æ„å¹¶ç”Ÿæˆä»£ç ã€‚â€</p>
</blockquote>
<p>Comate è¿…é€Ÿè¿›å…¥äº†éœ€æ±‚åˆ†ææ¨¡å¼ï¼Œå‡ ç§’é’Ÿåï¼Œå®ƒè¿”è¿˜äº†ä¸€ä»½ç»“æ„å®Œæ•´çš„ FrostFire æ’ä»¶éœ€æ±‚æ–‡æ¡£ã€‚æˆ‘ä»”ç»†å®¡è§†äº†è¿™ä»½æ–‡æ¡£ï¼Œå‘ç°å¤§æ¡†æ¶éå¸¸å®Œç¾ï¼Œé€»è¾‘å±‚å’Œæ¸²æŸ“å±‚åˆ†å¾—æ¸…æ¸…æ¥šæ¥šã€‚</p>
<p>æ’ä»¶éœ€æ±‚æ–‡æ¡£è§æ–‡ç« æœ«å°¾ã€é™„å½•1ã€‘</p>
<p>ä¸ºäº†æŠŠé”™è¯¯æ‹¦æˆªåœ¨å¼€å‘ä¹‹å‰ï¼Œæˆ‘åŸºäºè¿™ä»½æ–‡æ¡£è¿›è¡Œäº†ä¸€äº›å¾®è°ƒï¼š</p>
<ul>
<li>package.jsonï¼šæˆ‘è¡¥å……äº† activationEvents é…ç½®ï¼Œç¡®ä¿æ’ä»¶åœ¨æ‰“å¼€ä»»ä½•æ–‡ä»¶æ—¶éƒ½èƒ½è‡ªåŠ¨æ¿€æ´»ï¼Œè€Œä¸ä»…ä»…æ˜¯ç‰¹å®šè¯­è¨€ã€‚</li>
<li>src/webview/index.htmlï¼šæˆ‘ç‰¹åˆ«å¼ºè°ƒäº†è¦é…ç½® CSP ç­–ç•¥ï¼Œå¹¶å°†èƒŒæ™¯å¼ºåˆ¶è®¾ä¸ºçº¯é»‘ï¼Œä»¥é…åˆ Canvas çš„æ¸²æŸ“æ•ˆæœã€‚</li>
</ul>
<p>ç¡®è®¤ä¿®æ”¹åï¼ŒComate è‡ªåŠ¨æ ¹æ®éœ€æ±‚æ–‡æ¡£æ‹†è§£å‡ºäº†å…·ä½“çš„å¼€å‘ä»»åŠ¡åˆ—è¡¨ï¼ˆTasksï¼‰ï¼Œä»ç¯å¢ƒé…ç½®åˆ°æ ¸å¿ƒç®—æ³•å®ç°ï¼Œæ¡ç†æ¸…æ™°ã€‚</p>
<p>æ’ä»¶å¼€å‘ä»»åŠ¡è®¡åˆ’è§æ–‡ç« æœ«å°¾ã€é™„å½•2ã€‘</p>
<p>éšç€ä¸€ä¸ªä¸ª Task è¢«è‡ªåŠ¨æ‰§è¡Œï¼Œä»…ä»…10åˆ†é’Ÿï¼ŒFrostFire çš„ V1.0 ç‰ˆæœ¬ï¼ˆMVPï¼‰è¯ç”Ÿäº†ã€‚</p>
<p>ç”Ÿæˆå®Œæ¯•åï¼ŒComateè¿˜ç»™å‡ºäº†è´´å¿ƒçš„ä¸‹ä¸€æ­¥å¼•å¯¼ï¼Œæ¸…æ™°åœ°å‘Šè¯‰äº†æˆ‘ä»¬å¦‚ä½•è¿ç§»åˆ°VS Codeé‡Œä½¿ç”¨æ’ä»¶â¬‡ï¸</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/df89bc9d45c24cb2b71654509a4e2e73~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paH5b-D5b-r56CBQmFpZHVDb21hdGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766978758&amp;x-signature=5iu8bNfYhcCEmbUt2eEbyEMeofg%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>æˆ‘æ‰“å¼€VS Codeï¼ŒæŒ‰ç…§å®ƒè¯´çš„ä¸€æ­¥æ­¥åšï¼Œå±å¹•ä¸ŠçœŸçš„ç‡ƒèµ·äº†ç«ç„°ï¼</p>
<p>ğŸ‘‰è§‚çœ‹ç‡ƒèµ·ç«ç„°æ•ˆæœè§†é¢‘<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FzDAbDvEc-2-8yKNBEeY86A" target="_blank" title="https://mp.weixin.qq.com/s/zDAbDvEc-2-8yKNBEeY86A" ref="nofollow noopener noreferrer">mp.weixin.qq.com/s/zDAbDvEc-â€¦</a></p>
<p>å¯¹äº†ï¼ŒVS Codeé‡Œä¹Ÿæ”¯æŒæ–‡å¿ƒå¿«ç æ’ä»¶ï½æ’ä»¶å¸‚åœºæœç´¢æ–‡å¿ƒå¿«ç ï¼Œå³å¯ä¸‹è½½ï½</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a7813a94ce9f4c96b9190fbda78d6255~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paH5b-D5b-r56CBQmFpZHVDb21hdGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766978758&amp;x-signature=GntUHX9i3D%2BWa2vu7qOZE9G6Q18%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>æ–‡å¿ƒå¿«ç æ’ä»¶ä¸‹è½½ä¸‹æ¥åï¼Œä¼šè‡ªåŠ¨å‡ºç”Ÿåœ¨å·¦è¾¹ï¼Œæœ‰ç‚¹å’Œæ–‡ä»¶ç›®å½•é‡åˆäº†ã€‚æ²¡å…³ç³»ï¼Œæˆ‘ä»¬å¯ä»¥ç‚¹å‡»å·¦ä¾§é¡¹ç›®æ ä¸­æ–‡å¿ƒå¿«ç æ ‡è¯†ï¼ŒæŠŠå®ƒæ‹–åˆ°å³è¾¹</p>
<p>ğŸ‘‰è§‚çœ‹å…·ä½“æ“ä½œè§†é¢‘<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FzDAbDvEc-2-8yKNBEeY86A" target="_blank" title="https://mp.weixin.qq.com/s/zDAbDvEc-2-8yKNBEeY86A" ref="nofollow noopener noreferrer">mp.weixin.qq.com/s/zDAbDvEc-â€¦</a></p>
<h2 data-id="heading-1">02 æ ¸å¿ƒç»´ç¨³ï¼šç”¨â€œè®°å¿†â€æ ¹é™¤é¬¼ç«Bug</h2>
<p>ç„¶è€Œï¼ŒV1 ç‰ˆæœ¬å¾ˆå¿«æš´éœ²å‡ºäº†ä¸¥é‡çš„ç¨³å®šæ€§é—®é¢˜â€”â€”å¹½çµç«ã€‚</p>
<p>ç—‡çŠ¶éå¸¸è¯¡å¼‚ï¼š</p>
<ol>
<li>æœ‰æ—¶å€™æˆ‘æ˜æ˜åŒæ‰‹ç¦»å¼€äº†é”®ç›˜ï¼Œå±å¹•ä¸Šçš„ç«å´çªç„¶çƒ§äº†èµ·æ¥ã€‚</li>
<li>åˆšæ‰“å¼€ VS Codeï¼Œè¿˜æ²¡å¼€å§‹å·¥ä½œï¼Œç«ç„°å°±ç›´æ¥é“ºæ»¡äº†å±å¹•ã€‚</li>
</ol>
<p>ç»è¿‡æ’æŸ¥ï¼ŒåŸæ¥æ˜¯åç«¯çš„å¿ƒè·³åŒ…å’Œè‡ªåŠ¨ä¿å­˜æœºåˆ¶å¹²æ‰°äº† idleTime çš„è®¡ç®—ï¼Œå¯¼è‡´ç³»ç»Ÿè¯¯åˆ¤æˆ‘æœ‰è¾“å…¥ã€‚</p>
<p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä¸ Comate è¿›è¡Œäº†å¤šæ¬¡æ·±åº¦çš„ Debug äº¤äº’ã€‚æœ€ç»ˆï¼Œæˆ‘ä»¬å…±åŒåˆ¶å®šäº†ä¸€å¥—åŸºäºè¶‹åŠ¿åˆ¤å®šçš„â€œå®‰å…¨æ “â€é€»è¾‘ï¼šåªæœ‰å½“ç›‘æµ‹åˆ°é—²ç½®æ—¶é—´å‡ºç°éª¤é™ï¼ˆæ—¶é—´å€’æµï¼‰æ—¶ï¼Œæ‰è®¤å®šä¸ºæœ‰æ•ˆè¾“å…¥ï¼Œç»ä¸èƒ½ä»…ä¾èµ–æ•°å€¼å¤§å°æ¥åˆ¤æ–­ã€‚</p>
<p>è¿™æ®µé€»è¾‘éå¸¸å…³é”®ï¼Œä¸ºäº†é˜²æ­¢åœ¨æœªæ¥çš„è¿­ä»£ä¸­ Comate å¿˜è®°è¿™ä¸ªæ ¸å¿ƒè§„åˆ™ï¼Œæˆ‘ä½¿ç”¨äº† Comate çš„ Memoryï¼ˆè®°å¿†ï¼‰ åŠŸèƒ½ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a32661a4995e4cf6abbbbbb72ccabdb1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paH5b-D5b-r56CBQmFpZHVDb21hdGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766978758&amp;x-signature=aMzE9hexqU1vd7DooVSmpCp266A%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>æˆ‘åœ¨ Memory è®¾ç½®ä¸­æ‰‹åŠ¨å½•å…¥äº†ä¸€æ¡æ ¸å¿ƒæŒ‡ä»¤ï¼š</p>
<blockquote>
<p>â€œåœ¨ FrostFire é¡¹ç›®ä¸­ï¼Œå¿…é¡»å§‹ç»ˆä¿ç•™åŸºäºâ€˜å®‰å…¨æ “â€™ï¼ˆå¦‚ hasWitnessedDrop å˜é‡ï¼‰çš„é€»è¾‘ï¼šåªæœ‰å½“æ£€æµ‹åˆ° idleTime ç¡®å®å‘ç”Ÿä¸‹é™ï¼ˆcurrent &lt; prevï¼‰æ—¶æ‰å…è®¸è§£é”ç‚¹ç«åŠŸèƒ½ï¼Œç»å¯¹ä¸èƒ½ä»…ä¾èµ– idleTimeçš„ç»å¯¹æ•°å€¼æ¥åˆ¤å®šæ‰“å­—çŠ¶æ€ï¼Œä»¥é˜²æ­¢â€˜åˆšæ‰“å¼€æˆ–é™æ­¢æ—¶è‡ªåŠ¨èµ·ç«â€™çš„ Bug å¤å‘ã€‚â€</p>
</blockquote>
<p>è¿™ä¸€æ­¥æ“ä½œè‡³å…³é‡è¦ã€‚ ä»æ­¤ä¹‹åï¼Œæ— è®ºæˆ‘è¦æ±‚ Comate å¦‚ä½•é‡æ„ä»£ç ï¼Œå®ƒéƒ½ä¼šæ­»æ­»å®ˆä½è¿™æ¡â€œå®‰å…¨åº•çº¿â€ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c89006bc7dbc4376b7defcdd09d114af~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paH5b-D5b-r56CBQmFpZHVDb21hdGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766978758&amp;x-signature=mfalusOizTnIuGjgy1mIXl4mnZ4%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>å½“ Comate ç”Ÿæˆäº†æœ€ç»ˆä¿®å¤ç‰ˆçš„ä»£ç åï¼Œæˆ‘ç‚¹å‡»äº†å¯¹è¯æ¡†ä¸‹æ–¹çš„ â€œèµâ€ æŒ‰é’®åé¦ˆäº†æ»¡æ„åº¦ï¼Œå¹¶ä½¿ç”¨äº† â€œå…¨æ–‡å¤åˆ¶â€åŠŸèƒ½ï¼Œä¸€é”®å°†è¿™æ®µå¤æ‚çš„é€»è¾‘åŒæ­¥åˆ°äº†æˆ‘çš„é¡¹ç›®ä¸­ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1e5200c18e0d4d49a8a198abe647182c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paH5b-D5b-r56CBQmFpZHVDb21hdGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766978758&amp;x-signature=iHTCJqaboYuHTAJ0L9AhxhNuMsA%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<h2 data-id="heading-2">03 è¿­ä»£å¼€å‘ï¼šä»â€œèƒ½ç”¨â€åˆ°â€œæƒŠè‰³â€</h2>
<p>æå®šäº†ç¨³å®šæ€§ä¹‹åï¼ŒFrostFire è™½ç„¶èƒ½è·‘äº†ï¼Œä½†çœ‹èµ·æ¥è¿˜å¾ˆå»‰ä»·ã€‚æˆ‘å†³å®šç»™å®ƒæ³¨å…¥çµé­‚ï¼Œå¼€å¯äº†ä¸‰æ¬¡å…³é”®çš„è¿­ä»£ã€‚</p>
<h3 data-id="heading-3">è¿­ä»£ä¸€ï¼šæŒ‘æˆ˜â€œç‰©ç†ç§¯é›ªâ€ç®—æ³•</h3>
<p>æˆ‘å¸Œæœ›é›ªèŠ±è½ä¸‹æ—¶ï¼Œèƒ½åƒçœŸå®çš„æ²™å †ä¸€æ ·ï¼Œå½¢æˆä¸­é—´é«˜ã€ä¸¤è¾¹ä½çš„è‡ªç„¶å¡åº¦ï¼Œè€Œä¸æ˜¯åƒæ°´ä¸€æ ·å¹³é“ºã€‚ä½†è¿™éœ€è¦ç¼–å†™å¤æ‚çš„â€œä¼‘æ­¢è§’â€ç®—æ³•ï¼Œæ¶‰åŠå¤§é‡çš„æ•°æ®ç»“æ„è®¡ç®—ã€‚</p>
<p>æˆ‘å‘ Comate æè¿°äº†éœ€æ±‚ï¼š</p>
<blockquote>
<p>â€œæˆ‘éœ€è¦ç§¯é›ªå †å çš„æ„Ÿè§‰ï¼Œæœ€é«˜å †å åˆ°å±å¹•æœ€ä¸Šæ–¹ã€‚â€</p>
</blockquote>
<p>Comate å®Œç¾æ‰§è¡Œäº†æˆ‘çš„æŒ‡ä»¤ã€‚å®ƒåœ¨ snowEffect.js ä¸­é‡æ„äº†æ•°æ®ç»“æ„ï¼Œå¼•å…¥äº†ä¸€ä¸ªåŒå‘å¹³æ»‘ç®—æ³•ã€‚ ç°åœ¨çš„ç§¯é›ªï¼Œä¸ä»…æœ‰è‡ªç„¶çš„èµ·ä¼ï¼Œç”šè‡³èƒ½æŠŠä»£ç ç¼–è¾‘å™¨åº•éƒ¨çš„çŠ¶æ€æ æ…¢æ…¢â€œåŸ‹â€èµ·æ¥ï¼Œé‚£ç§æ²‰æµ¸æ„Ÿç®€ç›´ç»äº†ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/457d367cd28e45b58ba3895ec021962b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paH5b-D5b-r56CBQmFpZHVDb21hdGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766978758&amp;x-signature=lvkEZk3x9Ufxk9c7N66JMFoaMi8%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<h3 data-id="heading-4">è¿­ä»£äºŒï¼šæ‰‹æ„Ÿè°ƒä¼˜ä¸æ¸©å’Œæ¨¡å¼</h3>
<p>V1 çš„ç«ç„°å¤ªæš´èºäº†ï¼Œç¨å¾®æ‰“å‡ ä¸ªå­—å°±æ»¡å±ç«å…‰ã€‚æˆ‘å¸Œæœ›å®ƒèƒ½æ›´ä¼˜é›…ä¸€äº›ï¼Œå¼•å…¥ä¸€ç§æ¸©å’Œæ¨¡å¼ï¼šå¹³æ—¶åªæ˜¯å°ç«è‹—ï¼Œåªæœ‰åœ¨ç–¯ç‹‚è¾“å‡ºæ—¶æ‰ä¼šæœ‰ç«æ˜Ÿå››æº…çš„æ•ˆæœã€‚è€Œä¸”ï¼Œå•çº¯çš„â€œä¸æ‰“å­—ä¸‹é›ªï¼Œæ‰“å­—èµ·ç«â€å¤ªç”Ÿç¡¬äº†ã€‚æˆ‘æƒ³è¦ä¸€ç§çº¿æ€§çš„å¯¹æŠ—æ„Ÿã€‚</p>
<p>æ€•æ™ºèƒ½ä½“ä¹±æ”¹æ”¹é”™ï¼Œæˆ‘æ¢æˆäº†Askæ™ºèƒ½ä½“ï¼Œè§‰å¾—AIè¯´çš„æœ‰é“ç†ï¼Œå°±ç‚¹æ’å…¥ï¼Œä»£ç å°±è‡ªåŠ¨æ’å…¥åˆ°äº†æˆ‘çš„å…‰æ ‡ä½ç½®ï¼Œä½“éªŒæ„Ÿååˆ†ä¸æ»‘ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/62213cd3f4fe4cda8f256dfa4c2a6fdc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paH5b-D5b-r56CBQmFpZHVDb21hdGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766978758&amp;x-signature=m8qfuWaj27K%2BZbmOJ7B3Q732460%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<h3 data-id="heading-5">è¿­ä»£ä¸‰ï¼šèŠ‚æ—¥é™å®šçš„æµªæ¼«</h3>
<p>æ—¢ç„¶æ˜¯åœ£è¯ç‰¹ä¾›ï¼Œæ€ä¹ˆèƒ½å°‘äº†èŠ‚æ—¥æ°”æ°›ï¼Ÿ</p>
<p>æˆ‘ç»™ Comate ä¸‹è¾¾äº†æ–°çš„å¢é‡éœ€æ±‚ï¼š</p>
<blockquote>
<p>â€œæˆ‘éœ€è¦å¢åŠ ä¸¤ä¸ªå½©è›‹ã€‚ç¬¬ä¸€ï¼Œå½“ç§¯é›ªå˜åšæ—¶ï¼Œé›ªåœ°é‡Œè¦é’»å‡ºä¸€ä¸ªé›ªäººï¼›ä¸€æ—¦æˆ‘å¼€å§‹æ‰“å­—èµ·ç«ï¼Œé›ªäººè¦è¡¨ç°å¾—å¾ˆæƒŠæå¹¶é€ƒè·‘ã€‚ç¬¬äºŒï¼Œåœ¨ç«åŠ¿æ—ºç››æ—¶ï¼Œå¶å°”è¦æœ‰åœ£è¯è€äººåé›ªæ©‡é£è¿‡ï¼ŒæŠ•é€’ç¤¼ç‰©ã€‚â€</p>
</blockquote>
<p>Comate çš„è¡¨ç°ä»¤äººæƒŠå–œï¼š</p>
<ul>
<li>æ€•çƒ­çš„é›ªäººï¼šå®ƒè®¾è®¡äº†ä¸€ä¸ªç®€æ˜“çš„çŠ¶æ€æœºã€‚é›ªäººå¹³æ—¶åœ¨å‘å‘†ï¼Œæ£€æµ‹åˆ°çƒ­é‡ä¸Šå‡æ—¶ï¼Œä¼šç»˜åˆ¶å‡ºæµæ±—å’Œé¢¤æŠ–çš„åŠ¨ç”»ï¼Œå¹¶åŠ é€Ÿç§»å‡ºå±å¹•ã€‚</li>
<li>åœ£è¯ç©ºæŠ•ï¼šå®ƒå®Œç¾å®ç°äº†é›ªæ©‡çš„é£è¡Œè½¨è¿¹å’Œç¤¼ç‰©ç›’çš„ç‰©ç†æŠ›ç‰©çº¿ã€‚</li>
</ul>
<p>æœ€è®©æˆ‘æ„ŸåŠ¨çš„æ˜¯ï¼ŒComate è¿˜è®°å¾—æˆ‘ä¹‹å‰çš„ Memoryã€‚åœ¨å®ç°è¿™äº›æ–°åŠŸèƒ½æ—¶ï¼Œå®ƒä¾ç„¶ä¸¥æ ¼éµå®ˆäº†â€œå®‰å…¨æ “â€é€»è¾‘ï¼Œç¡®ä¿é›ªäººå’Œåœ£è¯è€äººä¸ä¼šå› ä¸ºè¯¯è§¦è€Œä¹±è·‘ã€‚</p>
<p>æœ€åï¼Œè®©æˆ‘ä»¬ä¸€èµ·æ¥çœ‹çœ‹æœ€ç»ˆç‰ˆæœ¬è§†é¢‘ğŸ¤©ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FzDAbDvEc-2-8yKNBEeY86A" target="_blank" title="https://mp.weixin.qq.com/s/zDAbDvEc-2-8yKNBEeY86A" ref="nofollow noopener noreferrer">mp.weixin.qq.com/s/zDAbDvEc-â€¦</a></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ce901f063c1843b2ad31cbc12418556c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paH5b-D5b-r56CBQmFpZHVDb21hdGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766978758&amp;x-signature=tvXwEXmdcTtd4zzbWJOJ8sCSOG4%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<h2 data-id="heading-6">04 æ€»ç»“ï¼šAI æ—¶ä»£çš„å¼€å‘æ–°èŒƒå¼</h2>
<p>å›çœ‹ FrostFire çš„å¼€å‘å†ç¨‹ï¼Œä»è§£å†³åº•å±‚çš„â€œå¹½çµç«â€é€»è¾‘æ¼æ´ï¼Œåˆ°å®ç°ç»†è…»çš„ç‰©ç†ç§¯é›ªï¼Œå†åˆ°å……æ»¡åˆ›æ„çš„åœ£è¯å½©è›‹ï¼Œæ–‡å¿ƒå¿«ç ï¼ˆComateï¼‰ å±•ç°å‡ºçš„èƒ½åŠ›è¿œè¶…ä¸€ä¸ªä»£ç è¡¥å…¨å·¥å…·ã€‚</p>
<ul>
<li>Spec æ¨¡å¼ è®©æ¶æ„è®¾è®¡ä¸å†æ˜¯éš¾é¢˜ï¼Œå°†æˆ‘çš„æŠ½è±¡æƒ³æ³•å¿«é€Ÿè½¬åŒ–ä¸ºå¯æ‰§è¡Œçš„ä»£ç æ¡†æ¶ã€‚</li>
<li>Memory æœºåˆ¶ è§£å†³äº† AI å®¹æ˜“â€œé—å¿˜ä¸Šä¸‹æ–‡â€çš„ç—›ç‚¹ï¼Œè®©å®ƒæˆä¸ºäº†ä¸€ä¸ªè¶Šç”¨è¶Šæ‡‚æˆ‘çš„ä¸“å±å·¥ç¨‹å¸ˆã€‚</li>
<li>æµç•…çš„äº¤äº’ä½“éªŒï¼ˆå¦‚å¯ç¼–è¾‘è¾“å…¥ã€ä¸€é”®å¤åˆ¶ï¼‰åˆ™æå¤§åœ°é™ä½äº†æ²Ÿé€šæˆæœ¬ï¼Œè®©å¼€å‘è¿‡ç¨‹å¦‚ä¸èˆ¬é¡ºæ»‘ã€‚</li>
</ul>
<p>ç°åœ¨çš„ FrostFireï¼Œå·²ç»ä¸ä»…ä»…æ˜¯ä¸€ä¸ªæ’ä»¶ï¼Œå®ƒæ˜¯æˆ‘åœ¨ Comate ååŠ©ä¸‹ï¼Œé€ç»™è‡ªå·±å’Œæ‰€æœ‰å¼€å‘è€…çš„ä¸€ä»½å†¬æ—¥ç¤¼ç‰©ã€‚</p>
<p>åœ¨è¿™ä¸ªé¡¹ç›®ä¸­ï¼Œæˆ‘åªéœ€è´Ÿè´£æ„æƒ³å’Œå†³ç­–ï¼Œè€Œé‚£äº›ç¹ççš„å®ç°ç»†èŠ‚ï¼Œå…¨éƒ¨äº¤ç»™äº† AIã€‚</p>
<p>å¦‚æœä½ ä¹Ÿæƒ³ä½“éªŒè¿™ç§å¿ƒæƒ³äº‹æˆçš„å¼€å‘å¿«æ„Ÿï¼Œä¸å¦¨è¯•è¯•è®©æ–‡å¿ƒå¿«ç æˆä¸ºä½ çš„AIç¼–ç¨‹åŠ©æ‰‹ã€‚æˆ–è®¸ä½ çš„ä¸‹ä¸€ä¸ªè„‘æ´ï¼Œå°±æ˜¯ä¸‹ä¸€ä¸ªçˆ†æ¬¾ã€‚</p>
<h2 data-id="heading-7">ã€é™„å½•1ã€‘æ’ä»¶éœ€æ±‚æ–‡æ¡£</h2>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># FrostFire VS Code æ’ä»¶éœ€æ±‚æ–‡æ¡£</span>

<span class="hljs-comment">## 1. é¡¹ç›®æ¦‚è¿°</span>

**FrostFire** æ˜¯ä¸€ä¸ªå¢åŠ ç¼–ç¨‹è¶£å‘³æ€§çš„ VS Code è§†è§‰å¢å¼ºæ’ä»¶ï¼Œé€šè¿‡åœ¨ç¼–è¾‘å™¨ä¸­æ¸²æŸ“åŠ¨æ€è§†è§‰æ•ˆæœï¼ˆç«ç„°å’Œé›ªèŠ±ï¼‰ï¼Œè®©ç¼–ç¨‹ä½“éªŒæ›´åŠ ç”ŸåŠ¨æœ‰è¶£ã€‚

<span class="hljs-comment">## 2. æ ¸å¿ƒåŠŸèƒ½</span>

<span class="hljs-comment">### 2.1 Fire çŠ¶æ€ï¼ˆç«ç„°æ•ˆæœï¼‰</span>
- **è§¦å‘æ¡ä»¶**ï¼šç”¨æˆ·é”®ç›˜è¾“å…¥é¢‘ç‡ï¼ˆKeystrokes per minute, KPMï¼‰è¾ƒé«˜æ—¶è§¦å‘
- **è§†è§‰æ•ˆæœ**ï¼šç¼–è¾‘å™¨åº•éƒ¨æ¸²æŸ“åƒç´ é£æ ¼ç«ç„°ï¼ˆåŸºäº Doom Fire Algorithmï¼‰
- **åŠ¨æ€å“åº”**ï¼šè¾“å…¥è¶Šå¿«ï¼Œç«ç„°è¶Šé«˜è¶Šæ—ºç››
- **çƒ­åº¦è®¡ç®—**ï¼šæ ¹æ®æœ€è¿‘ä¸€æ®µæ—¶é—´å†…çš„æŒ‰é”®é¢‘ç‡è®¡ç®—"çƒ­åº¦å€¼"

<span class="hljs-comment">### 2.2 Ice çŠ¶æ€ï¼ˆé›ªèŠ±æ•ˆæœï¼‰</span>
- **è§¦å‘æ¡ä»¶**ï¼šç”¨æˆ·åœæ­¢è¾“å…¥è¶…è¿‡ 15 ç§’
- **è§†è§‰æ•ˆæœ**ï¼šç¼–è¾‘å™¨é¡¶éƒ¨å¼€å§‹ä¸‹é›ª
- **ç§¯é›ªæœºåˆ¶**ï¼šåœæ­¢è¾“å…¥è¶…è¿‡ 60 ç§’åï¼Œé›ªèŠ±åœ¨åº•éƒ¨ç§¯ç´¯å½¢æˆç§¯é›ªå±‚
- **é®æŒ¡æ•ˆæœ**ï¼šç§¯é›ªå¯è½»å¾®é®æŒ¡ä»£ç åŒºåŸŸï¼Œå¢å¼ºæ²‰æµ¸æ„Ÿ

<span class="hljs-comment">### 2.3 çŠ¶æ€åˆ‡æ¢</span>
- Fire å’Œ Ice çŠ¶æ€äº’æ–¥ï¼Œä¸ä¼šåŒæ—¶å‡ºç°
- ç”¨æˆ·å¼€å§‹è¾“å…¥æ—¶ï¼Œé›ªèŠ±æ•ˆæœé€æ¸æ¶ˆå¤±ï¼Œç«ç„°æ•ˆæœé€æ¸å‡ºç°
- çŠ¶æ€åˆ‡æ¢æœ‰å¹³æ»‘è¿‡æ¸¡åŠ¨ç”»

<span class="hljs-comment">## 3. æŠ€æœ¯æ¶æ„</span>

<span class="hljs-comment">### 3.1 æŠ€æœ¯æ ˆ</span>
- **è¯­è¨€**ï¼šTypeScript
- **API**ï¼šVS Code Extension API
- **æ¸²æŸ“**ï¼šHTML5 Canvasï¼ˆåœ¨ Webview ä¸­è¿è¡Œï¼‰

<span class="hljs-comment">### 3.2 é¡¹ç›®ç›®å½•ç»“æ„</span>
```
frostfire/
â”œâ”€â”€ .vscode/
â”‚   â””â”€â”€ launch.json              <span class="hljs-comment"># è°ƒè¯•é…ç½®</span>
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ extension.ts             <span class="hljs-comment"># æ’ä»¶å…¥å£ï¼Œæ³¨å†Œå‘½ä»¤å’Œç›‘å¬å™¨</span>
â”‚   â”œâ”€â”€ activityTracker.ts       <span class="hljs-comment"># ç”¨æˆ·æ´»è·ƒåº¦è¿½è¸ªå™¨</span>
â”‚   â”œâ”€â”€ webviewProvider.ts       <span class="hljs-comment"># Webview é¢æ¿ç®¡ç†</span>
â”‚   â””â”€â”€ webview/
â”‚       â”œâ”€â”€ index.html           <span class="hljs-comment"># Webview HTML æ¨¡æ¿</span>
â”‚       â”œâ”€â”€ main.js              <span class="hljs-comment"># Webview ä¸»é€»è¾‘</span>
â”‚       â”œâ”€â”€ fireEffect.js        <span class="hljs-comment"># Doom Fire ç«ç„°ç®—æ³•å®ç°</span>
â”‚       â””â”€â”€ snowEffect.js        <span class="hljs-comment"># é›ªèŠ±å’Œç§¯é›ªæ•ˆæœå®ç°</span>
â”œâ”€â”€ package.json                 <span class="hljs-comment"># æ’ä»¶é…ç½®æ¸…å•</span>
â”œâ”€â”€ tsconfig.json                <span class="hljs-comment"># TypeScript é…ç½®</span>
â””â”€â”€ README.md                    <span class="hljs-comment"># é¡¹ç›®è¯´æ˜</span>
```

<span class="hljs-comment">### 3.3 æ¶æ„è®¾è®¡</span>

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     VS Code Extension Host                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  extension.ts                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚  â”‚ ActivityTracker â”‚â”€â”€â”€â–¶â”‚ WebviewProvider  â”‚                â”‚
â”‚  â”‚ - ç›‘å¬æ–‡æ¡£å˜åŒ–   â”‚    â”‚ - ç®¡ç† Webview   â”‚                â”‚
â”‚  â”‚ - è®¡ç®—çƒ­åº¦å€¼     â”‚    â”‚ - å‘é€çŠ¶æ€æ¶ˆæ¯    â”‚                â”‚
â”‚  â”‚ - åˆ¤æ–­çŠ¶æ€åˆ‡æ¢   â”‚    â”‚                  â”‚                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚                                  â”‚ postMessage               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Webview (Canvas)                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚  â”‚   FireEffect    â”‚    â”‚   SnowEffect     â”‚                â”‚
â”‚  â”‚ - Doom Fireç®—æ³•  â”‚    â”‚ - é›ªèŠ±ç²’å­ç³»ç»Ÿ   â”‚                â”‚
â”‚  â”‚ - ç«ç„°é«˜åº¦æ§åˆ¶   â”‚    â”‚ - ç§¯é›ªç´¯ç§¯é€»è¾‘   â”‚                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚                    main.js (æ¶ˆæ¯è°ƒåº¦)                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

<span class="hljs-comment">## 4. å®ç°ç»†èŠ‚</span>

<span class="hljs-comment">### 4.1 ActivityTrackerï¼ˆæ´»è·ƒåº¦è¿½è¸ªå™¨ï¼‰</span>

```typescript
// src/activityTracker.ts
export class ActivityTracker {
    private keystrokeTimestamps: number<span class="hljs-section">[]</span> = <span class="hljs-section">[]</span><span class="hljs-comment">;  // è®°å½•æŒ‰é”®æ—¶é—´æˆ³</span>
    private readonly <span class="hljs-attr">WINDOW_SIZE</span> = <span class="hljs-number">60000</span><span class="hljs-comment">;         // ç»Ÿè®¡çª—å£ï¼š60ç§’</span>
    private readonly <span class="hljs-attr">IDLE_THRESHOLD</span> = <span class="hljs-number">15000</span><span class="hljs-comment">;      // ç©ºé—²é˜ˆå€¼ï¼š15ç§’</span>
    private readonly <span class="hljs-attr">SNOW_ACCUMULATE_THRESHOLD</span> = <span class="hljs-number">60000</span><span class="hljs-comment">; // ç§¯é›ªé˜ˆå€¼ï¼š60ç§’</span>
    
    // è®°å½•ä¸€æ¬¡æŒ‰é”®
    public recordKeystroke(): void {
        const <span class="hljs-attr">now</span> = Date.now()<span class="hljs-comment">;</span>
        this.keystrokeTimestamps.push(now)<span class="hljs-comment">;</span>
        this.cleanOldTimestamps(now)<span class="hljs-comment">;</span>
    }
    
    // æ¸…ç†è¿‡æœŸçš„æ—¶é—´æˆ³
    private cleanOldTimestamps(now: number): void {
        <span class="hljs-attr">this.keystrokeTimestamps</span> = this.keystrokeTimestamps.filter(
            <span class="hljs-attr">ts</span> =&gt; now - ts &lt; this.WINDOW_SIZE
        )<span class="hljs-comment">;</span>
    }
    
    // è®¡ç®—å½“å‰çƒ­åº¦å€¼ (0-100)
    public getHeatLevel(): number {
        const <span class="hljs-attr">now</span> = Date.now()<span class="hljs-comment">;</span>
        this.cleanOldTimestamps(now)<span class="hljs-comment">;</span>
        // åŸºäºæœ€è¿‘10ç§’çš„æŒ‰é”®æ•°è®¡ç®—çƒ­åº¦
        const <span class="hljs-attr">recentKeystrokes</span> = this.keystrokeTimestamps.filter(
            <span class="hljs-attr">ts</span> =&gt; now - ts &lt; <span class="hljs-number">10000</span>
        ).length<span class="hljs-comment">;</span>
        // å‡è®¾æ¯ç§’6æ¬¡æŒ‰é”®ä¸ºæ»¡çƒ­åº¦
        return Math.min(100, (recentKeystrokes / 60) * 100)<span class="hljs-comment">;</span>
    }
    
    // è·å–ç©ºé—²æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰
    public getIdleTime(): number {
        if (<span class="hljs-attr">this.keystrokeTimestamps.length</span> === <span class="hljs-number">0</span>) return Infinity<span class="hljs-comment">;</span>
        const <span class="hljs-attr">lastKeystroke</span> = Math.max(...this.keystrokeTimestamps)<span class="hljs-comment">;</span>
        return Date.now() - lastKeystroke<span class="hljs-comment">;</span>
    }
    
    // åˆ¤æ–­å½“å‰çŠ¶æ€
    public getCurrentState(): 'fire' | 'idle' | 'snow' | 'snow_accumulate' {
        const <span class="hljs-attr">idleTime</span> = this.getIdleTime()<span class="hljs-comment">;</span>
        if (idleTime &gt;= this.SNOW_ACCUMULATE_THRESHOLD) return 'snow_accumulate'<span class="hljs-comment">;</span>
        if (idleTime &gt;= this.IDLE_THRESHOLD) return 'snow'<span class="hljs-comment">;</span>
        if (this.getHeatLevel() &gt; 10) return 'fire'<span class="hljs-comment">;</span>
        return 'idle'<span class="hljs-comment">;</span>
    }
}
```

<span class="hljs-comment">### 4.2 Extension æ ¸å¿ƒé€»è¾‘</span>

```typescript
// src/extension.ts
import * as vscode from 'vscode'<span class="hljs-comment">;</span>
import { ActivityTracker } from './activityTracker'<span class="hljs-comment">;</span>
import { FrostFireWebviewProvider } from './webviewProvider'<span class="hljs-comment">;</span>

let activityTracker: ActivityTracker<span class="hljs-comment">;</span>
let webviewProvider: FrostFireWebviewProvider<span class="hljs-comment">;</span>
let updateInterval: NodeJS.Timeout<span class="hljs-comment">;</span>

export function activate(context: vscode.ExtensionContext) {
    <span class="hljs-attr">activityTracker</span> = new ActivityTracker()<span class="hljs-comment">;</span>
    <span class="hljs-attr">webviewProvider</span> = new FrostFireWebviewProvider(context.extensionUri)<span class="hljs-comment">;</span>
    
    // æ³¨å†Œ Webview è§†å›¾
    context.subscriptions.push(
        vscode.window.registerWebviewViewProvider(
            'frostfire.effectView',
            webviewProvider
        )
    )<span class="hljs-comment">;</span>
    
    // æ³¨å†Œå¯åŠ¨å‘½ä»¤
    context.subscriptions.push(
        vscode.commands.registerCommand('frostfire.start', () =&gt; {
            vscode.commands.executeCommand('frostfire.effectView.focus')<span class="hljs-comment">;</span>
        })
    )<span class="hljs-comment">;</span>
    
    // ç›‘å¬æ–‡æ¡£å˜åŒ–ï¼ˆç”¨æˆ·è¾“å…¥ï¼‰
    context.subscriptions.push(
        vscode.workspace.onDidChangeTextDocument((event) =&gt; {
            // åªç»Ÿè®¡å®é™…çš„æ–‡æœ¬å˜åŒ–
            if (event.contentChanges.length &gt; 0) {
                activityTracker.recordKeystroke()<span class="hljs-comment">;</span>
            }
        })
    )<span class="hljs-comment">;</span>
    
    // å®šæ—¶æ›´æ–°çŠ¶æ€åˆ° Webview
    <span class="hljs-attr">updateInterval</span> = setInterval(() =&gt; {
        const <span class="hljs-attr">state</span> = activityTracker.getCurrentState()<span class="hljs-comment">;</span>
        const <span class="hljs-attr">heatLevel</span> = activityTracker.getHeatLevel()<span class="hljs-comment">;</span>
        const <span class="hljs-attr">idleTime</span> = activityTracker.getIdleTime()<span class="hljs-comment">;</span>
        
        webviewProvider.postMessage({
            type: 'stateUpdate',
            state: state,
            heatLevel: heatLevel,
            idleTime: idleTime
        })<span class="hljs-comment">;</span>
    }, 100)<span class="hljs-comment">; // æ¯100msæ›´æ–°ä¸€æ¬¡</span>
    
    context.subscriptions.push({
        dispose: () =&gt; clearInterval(updateInterval)
    })<span class="hljs-comment">;</span>
}

export function deactivate() {
    if (updateInterval) {
        clearInterval(updateInterval)<span class="hljs-comment">;</span>
    }
}
```

<span class="hljs-comment">### 4.3 Doom Fire ç«ç„°ç®—æ³•</span>

```javascript
// src/webview/fireEffect.js
class FireEffect {
    constructor(canvas) {
        <span class="hljs-attr">this.canvas</span> = canvas<span class="hljs-comment">;</span>
        <span class="hljs-attr">this.ctx</span> = canvas.getContext(<span class="hljs-string">'2d'</span>)<span class="hljs-comment">;</span>
        <span class="hljs-attr">this.fireWidth</span> = <span class="hljs-number">80</span><span class="hljs-comment">;  // ç«ç„°åƒç´ å®½åº¦</span>
        <span class="hljs-attr">this.fireHeight</span> = <span class="hljs-number">50</span><span class="hljs-comment">; // ç«ç„°åƒç´ é«˜åº¦</span>
        <span class="hljs-attr">this.firePixels</span> = []<span class="hljs-comment">;</span>
        <span class="hljs-attr">this.fireColorPalette</span> = this.createPalette()<span class="hljs-comment">;</span>
        <span class="hljs-attr">this.intensity</span> = <span class="hljs-number">0</span><span class="hljs-comment">;   // ç«ç„°å¼ºåº¦ 0-100</span>
        this.initFire()<span class="hljs-comment">;</span>
    }
    
    // åˆ›å»ºç«ç„°é¢œè‰²è°ƒè‰²æ¿ï¼ˆ36è‰²ï¼‰
    createPalette() {
        return <span class="hljs-section">[
            {r:7,g:7,b:7}, {r:31,g:7,b:7}, {r:47,g:15,b:7}, {r:71,g:15,b:7},
            {r:87,g:23,b:7}, {r:103,g:31,b:7}, {r:119,g:31,b:7}, {r:143,g:39,b:7},
            {r:159,g:47,b:7}, {r:175,g:63,b:7}, {r:191,g:71,b:7}, {r:199,g:71,b:7},
            {r:223,g:79,b:7}, {r:223,g:87,b:7}, {r:223,g:87,b:7}, {r:215,g:95,b:7},
            {r:215,g:103,b:15}, {r:207,g:111,b:15}, {r:207,g:119,b:15}, {r:207,g:127,b:15},
            {r:207,g:135,b:23}, {r:199,g:135,b:23}, {r:199,g:143,b:23}, {r:199,g:151,b:31},
            {r:191,g:159,b:31}, {r:191,g:159,b:31}, {r:191,g:167,b:39}, {r:191,g:167,b:39},
            {r:191,g:175,b:47}, {r:183,g:175,b:47}, {r:183,g:183,b:47}, {r:183,g:183,b:55},
            {r:207,g:207,b:111}, {r:223,g:223,b:159}, {r:239,g:239,b:199}, {r:255,g:255,b:255}
        ]</span><span class="hljs-comment">;</span>
    }
    
    // åˆå§‹åŒ–ç«ç„°æ•°ç»„
    initFire() {
        const <span class="hljs-attr">totalPixels</span> = this.fireWidth * this.fireHeight<span class="hljs-comment">;</span>
        <span class="hljs-attr">this.firePixels</span> = new Array(totalPixels).fill(<span class="hljs-number">0</span>)<span class="hljs-comment">;</span>
    }
    
    // è®¾ç½®ç«ç„°å¼ºåº¦
    setIntensity(level) {
        <span class="hljs-attr">this.intensity</span> = Math.max(<span class="hljs-number">0</span>, Math.min(<span class="hljs-number">100</span>, level))<span class="hljs-comment">;</span>
        // æ ¹æ®å¼ºåº¦è®¾ç½®åº•éƒ¨ç«æº
        const <span class="hljs-attr">maxColorIndex</span> = Math.floor((this.intensity / <span class="hljs-number">100</span>) * <span class="hljs-number">35</span>)<span class="hljs-comment">;</span>
        for (let <span class="hljs-attr">x</span> = <span class="hljs-number">0</span><span class="hljs-comment">; x &lt; this.fireWidth; x++) {</span>
            const <span class="hljs-attr">bottomIndex</span> = (this.fireHeight - <span class="hljs-number">1</span>) * this.fireWidth + x<span class="hljs-comment">;</span>
            this.firePixels<span class="hljs-section">[bottomIndex]</span> = this.intensity &gt; 5 ? maxColorIndex : 0<span class="hljs-comment">;</span>
        }
    }
    
    // ç«ç„°ä¼ æ’­ç®—æ³•
    spreadFire() {
        for (let <span class="hljs-attr">x</span> = <span class="hljs-number">0</span><span class="hljs-comment">; x &lt; this.fireWidth; x++) {</span>
            for (let <span class="hljs-attr">y</span> = <span class="hljs-number">1</span><span class="hljs-comment">; y &lt; this.fireHeight; y++) {</span>
                const <span class="hljs-attr">srcIndex</span> = y * this.fireWidth + x<span class="hljs-comment">;</span>
                const <span class="hljs-attr">pixel</span> = this.firePixels[srcIndex]<span class="hljs-comment">;</span>
                
                if (<span class="hljs-attr">pixel</span> === <span class="hljs-number">0</span>) {
                    this.firePixels<span class="hljs-section">[(y - 1) * this.fireWidth + x]</span> = 0<span class="hljs-comment">;</span>
                } else {
                    // éšæœºåç§»äº§ç”Ÿé£˜åŠ¨æ•ˆæœ
                    const <span class="hljs-attr">randIdx</span> = Math.floor(Math.random() * <span class="hljs-number">3</span>)<span class="hljs-comment">;</span>
                    const <span class="hljs-attr">dstX</span> = Math.min(this.fireWidth - <span class="hljs-number">1</span>, Math.max(<span class="hljs-number">0</span>, x - randIdx + <span class="hljs-number">1</span>))<span class="hljs-comment">;</span>
                    const <span class="hljs-attr">dstIndex</span> = (y - <span class="hljs-number">1</span>) * this.fireWidth + dstX<span class="hljs-comment">;</span>
                    this.firePixels<span class="hljs-section">[dstIndex]</span> = Math.max(0, pixel - (randIdx &amp; 1))<span class="hljs-comment">;</span>
                }
            }
        }
    }
    
    // æ¸²æŸ“ç«ç„°
    render() {
        this.spreadFire()<span class="hljs-comment">;</span>
        
        const <span class="hljs-attr">pixelWidth</span> = this.canvas.width / this.fireWidth<span class="hljs-comment">;</span>
        const <span class="hljs-attr">pixelHeight</span> = this.canvas.height / this.fireHeight<span class="hljs-comment">;</span>
        
        for (let <span class="hljs-attr">y</span> = <span class="hljs-number">0</span><span class="hljs-comment">; y &lt; this.fireHeight; y++) {</span>
            for (let <span class="hljs-attr">x</span> = <span class="hljs-number">0</span><span class="hljs-comment">; x &lt; this.fireWidth; x++) {</span>
                const <span class="hljs-attr">colorIndex</span> = this.firePixels[y * this.fireWidth + x]<span class="hljs-comment">;</span>
                const <span class="hljs-attr">color</span> = this.fireColorPalette[colorIndex]<span class="hljs-comment">;</span>
                
                if (colorIndex &gt; 0) {
                    <span class="hljs-attr">this.ctx.fillStyle</span> = `rgba(<span class="hljs-variable">${color.r}</span>,<span class="hljs-variable">${color.g}</span>,<span class="hljs-variable">${color.b}</span>,<span class="hljs-number">0.9</span>)`<span class="hljs-comment">;</span>
                    this.ctx.fillRect(
                        x * pixelWidth,
                        y * pixelHeight,
                        pixelWidth + 1,
                        pixelHeight + 1
                    )<span class="hljs-comment">;</span>
                }
            }
        }
    }
}
```

<span class="hljs-comment">### 4.4 é›ªèŠ±æ•ˆæœ</span>

```javascript
// src/webview/snowEffect.js
class SnowEffect {
    constructor(canvas) {
        <span class="hljs-attr">this.canvas</span> = canvas<span class="hljs-comment">;</span>
        <span class="hljs-attr">this.ctx</span> = canvas.getContext(<span class="hljs-string">'2d'</span>)<span class="hljs-comment">;</span>
        <span class="hljs-attr">this.snowflakes</span> = []<span class="hljs-comment">;</span>
        <span class="hljs-attr">this.snowAccumulation</span> = []<span class="hljs-comment">; // ç§¯é›ªå±‚é«˜åº¦æ•°ç»„</span>
        <span class="hljs-attr">this.maxSnowflakes</span> = <span class="hljs-number">200</span><span class="hljs-comment">;</span>
        <span class="hljs-attr">this.isSnowing</span> = <span class="hljs-literal">false</span><span class="hljs-comment">;</span>
        <span class="hljs-attr">this.isAccumulating</span> = <span class="hljs-literal">false</span><span class="hljs-comment">;</span>
        this.initAccumulation()<span class="hljs-comment">;</span>
    }
    
    // åˆå§‹åŒ–ç§¯é›ªå±‚
    initAccumulation() {
        const <span class="hljs-attr">segments</span> = Math.floor(this.canvas.width / <span class="hljs-number">5</span>)<span class="hljs-comment">;</span>
        <span class="hljs-attr">this.snowAccumulation</span> = new Array(segments).fill(<span class="hljs-number">0</span>)<span class="hljs-comment">;</span>
    }
    
    // åˆ›å»ºé›ªèŠ±
    createSnowflake() {
        return {
            x: Math.random() * this.canvas.width,
            y: -10,
            radius: Math.random() * 3 + 1,
            speed: Math.random() * 1 + 0.5,
            wind: Math.random() * 0.5 - 0.25,
            opacity: Math.random() * 0.5 + 0.5
        }<span class="hljs-comment">;</span>
    }
    
    // å¼€å§‹ä¸‹é›ª
    startSnow(<span class="hljs-attr">accumulate</span> = <span class="hljs-literal">false</span>) {
        <span class="hljs-attr">this.isSnowing</span> = <span class="hljs-literal">true</span><span class="hljs-comment">;</span>
        <span class="hljs-attr">this.isAccumulating</span> = accumulate<span class="hljs-comment">;</span>
    }
    
    // åœæ­¢ä¸‹é›ª
    stopSnow() {
        <span class="hljs-attr">this.isSnowing</span> = <span class="hljs-literal">false</span><span class="hljs-comment">;</span>
        <span class="hljs-attr">this.isAccumulating</span> = <span class="hljs-literal">false</span><span class="hljs-comment">;</span>
    }
    
    // æ¸…é™¤æ•ˆæœ
    clear() {
        <span class="hljs-attr">this.snowflakes</span> = []<span class="hljs-comment">;</span>
        this.initAccumulation()<span class="hljs-comment">;</span>
        <span class="hljs-attr">this.isSnowing</span> = <span class="hljs-literal">false</span><span class="hljs-comment">;</span>
        <span class="hljs-attr">this.isAccumulating</span> = <span class="hljs-literal">false</span><span class="hljs-comment">;</span>
    }
    
    // æ›´æ–°é›ªèŠ±ä½ç½®
    update() {
        // æ·»åŠ æ–°é›ªèŠ±
        if (this.isSnowing &amp;&amp; this.snowflakes.length &lt; this.maxSnowflakes) {
            if (Math.random() &lt; 0.3) {
                this.snowflakes.push(this.createSnowflake())<span class="hljs-comment">;</span>
            }
        }
        
        // æ›´æ–°é›ªèŠ±ä½ç½®
        for (let <span class="hljs-attr">i</span> = this.snowflakes.length - <span class="hljs-number">1</span><span class="hljs-comment">; i &gt;= 0; i--) {</span>
            const <span class="hljs-attr">flake</span> = this.snowflakes[i]<span class="hljs-comment">;</span>
            flake.y += flake.speed<span class="hljs-comment">;</span>
            flake.x += flake.wind<span class="hljs-comment">;</span>
            
            // æ£€æŸ¥æ˜¯å¦è½åˆ°åº•éƒ¨æˆ–ç§¯é›ªä¸Š
            const <span class="hljs-attr">segmentIndex</span> = Math.floor(flake.x / <span class="hljs-number">5</span>)<span class="hljs-comment">;</span>
            const <span class="hljs-attr">groundLevel</span> = this.canvas.height - (this.snowAccumulation[segmentIndex] || <span class="hljs-number">0</span>)<span class="hljs-comment">;</span>
            
            if (flake.y &gt;= groundLevel) {
                // ç§¯é›ª
                if (this.isAccumulating &amp;&amp; segmentIndex &gt;= 0 &amp;&amp; segmentIndex &lt; this.snowAccumulation.length) {
                    this.snowAccumulation<span class="hljs-section">[segmentIndex]</span> = Math.min(
                        this.snowAccumulation<span class="hljs-section">[segmentIndex]</span> + 0.2,
                        this.canvas.height * 0.3 // æœ€å¤§ç§¯é›ªé«˜åº¦30%
                    )<span class="hljs-comment">;</span>
                }
                this.snowflakes.splice(i, 1)<span class="hljs-comment">;</span>
            } else if (flake.x &lt; 0 || flake.x &gt; this.canvas.width) {
                this.snowflakes.splice(i, 1)<span class="hljs-comment">;</span>
            }
        }
    }
    
    // æ¸²æŸ“é›ªèŠ±å’Œç§¯é›ª
    render() {
        this.update()<span class="hljs-comment">;</span>
        
        // ç»˜åˆ¶é›ªèŠ±
        <span class="hljs-attr">this.ctx.fillStyle</span> = <span class="hljs-string">'white'</span><span class="hljs-comment">;</span>
        for (const flake of this.snowflakes) {
            <span class="hljs-attr">this.ctx.globalAlpha</span> = flake.opacity<span class="hljs-comment">;</span>
            this.ctx.beginPath()<span class="hljs-comment">;</span>
            this.ctx.arc(flake.x, flake.y, flake.radius, 0, Math.PI * 2)<span class="hljs-comment">;</span>
            this.ctx.fill()<span class="hljs-comment">;</span>
        }
        <span class="hljs-attr">this.ctx.globalAlpha</span> = <span class="hljs-number">1</span><span class="hljs-comment">;</span>
        
        // ç»˜åˆ¶ç§¯é›ª
        if (this.isAccumulating) {
            <span class="hljs-attr">this.ctx.fillStyle</span> = <span class="hljs-string">'rgba(255, 255, 255, 0.8)'</span><span class="hljs-comment">;</span>
            this.ctx.beginPath()<span class="hljs-comment">;</span>
            this.ctx.moveTo(0, this.canvas.height)<span class="hljs-comment">;</span>
            
            for (let <span class="hljs-attr">i</span> = <span class="hljs-number">0</span><span class="hljs-comment">; i &lt; this.snowAccumulation.length; i++) {</span>
                const <span class="hljs-attr">x</span> = i * <span class="hljs-number">5</span><span class="hljs-comment">;</span>
                const <span class="hljs-attr">y</span> = this.canvas.height - this.snowAccumulation[i]<span class="hljs-comment">;</span>
                this.ctx.lineTo(x, y)<span class="hljs-comment">;</span>
            }
            
            this.ctx.lineTo(this.canvas.width, this.canvas.height)<span class="hljs-comment">;</span>
            this.ctx.closePath()<span class="hljs-comment">;</span>
            this.ctx.fill()<span class="hljs-comment">;</span>
        }
    }
}
```

<span class="hljs-comment">### 4.5 Webview ä¸»é€»è¾‘</span>

```javascript
// src/webview/main.js
(function() {
    const <span class="hljs-attr">vscode</span> = acquireVsCodeApi()<span class="hljs-comment">;</span>
    const <span class="hljs-attr">canvas</span> = document.getElementById(<span class="hljs-string">'effectCanvas'</span>)<span class="hljs-comment">;</span>
    const <span class="hljs-attr">ctx</span> = canvas.getContext(<span class="hljs-string">'2d'</span>)<span class="hljs-comment">;</span>
    
    let fireEffect, snowEffect<span class="hljs-comment">;</span>
    let <span class="hljs-attr">currentState</span> = <span class="hljs-string">'idle'</span><span class="hljs-comment">;</span>
    let animationId<span class="hljs-comment">;</span>
    
    // åˆå§‹åŒ–
    function init() {
        resizeCanvas()<span class="hljs-comment">;</span>
        <span class="hljs-attr">fireEffect</span> = new FireEffect(canvas)<span class="hljs-comment">;</span>
        <span class="hljs-attr">snowEffect</span> = new SnowEffect(canvas)<span class="hljs-comment">;</span>
        animate()<span class="hljs-comment">;</span>
    }
    
    // è°ƒæ•´ç”»å¸ƒå¤§å°
    function resizeCanvas() {
        <span class="hljs-attr">canvas.width</span> = window.innerWidth<span class="hljs-comment">;</span>
        <span class="hljs-attr">canvas.height</span> = window.innerHeight<span class="hljs-comment">;</span>
    }
    
    // åŠ¨ç”»å¾ªç¯
    function animate() {
        ctx.clearRect(0, 0, canvas.width, canvas.height)<span class="hljs-comment">;</span>
        
        if (<span class="hljs-attr">currentState</span> === <span class="hljs-string">'fire'</span>) {
            fireEffect.render()<span class="hljs-comment">;</span>
        } else if (<span class="hljs-attr">currentState</span> === <span class="hljs-string">'snow'</span> || currentState === <span class="hljs-string">'snow_accumulate'</span>) {
            snowEffect.render()<span class="hljs-comment">;</span>
        }
        
        <span class="hljs-attr">animationId</span> = requestAnimationFrame(animate)<span class="hljs-comment">;</span>
    }
    
    // å¤„ç†æ¥è‡ªæ‰©å±•çš„æ¶ˆæ¯
    window.addEventListener('message', <span class="hljs-attr">event</span> =&gt; {
        const <span class="hljs-attr">message</span> = event.data<span class="hljs-comment">;</span>
        
        if (<span class="hljs-attr">message.type</span> === <span class="hljs-string">'stateUpdate'</span>) {
            handleStateUpdate(message)<span class="hljs-comment">;</span>
        }
    })<span class="hljs-comment">;</span>
    
    // å¤„ç†çŠ¶æ€æ›´æ–°
    function handleStateUpdate(message) {
        const <span class="hljs-attr">newState</span> = message.state<span class="hljs-comment">;</span>
        
        if (newState !== currentState) {
            // çŠ¶æ€åˆ‡æ¢
            if (<span class="hljs-attr">newState</span> === <span class="hljs-string">'fire'</span>) {
                snowEffect.clear()<span class="hljs-comment">;</span>
            } else if (<span class="hljs-attr">newState</span> === <span class="hljs-string">'snow'</span> || newState === <span class="hljs-string">'snow_accumulate'</span>) {
                fireEffect.setIntensity(0)<span class="hljs-comment">;</span>
            }
            <span class="hljs-attr">currentState</span> = newState<span class="hljs-comment">;</span>
        }
        
        // æ›´æ–°æ•ˆæœå‚æ•°
        if (<span class="hljs-attr">currentState</span> === <span class="hljs-string">'fire'</span>) {
            fireEffect.setIntensity(message.heatLevel)<span class="hljs-comment">;</span>
        } else if (<span class="hljs-attr">currentState</span> === <span class="hljs-string">'snow'</span>) {
            snowEffect.startSnow(false)<span class="hljs-comment">;</span>
        } else if (<span class="hljs-attr">currentState</span> === <span class="hljs-string">'snow_accumulate'</span>) {
            snowEffect.startSnow(true)<span class="hljs-comment">;</span>
        } else {
            fireEffect.setIntensity(0)<span class="hljs-comment">;</span>
            snowEffect.stopSnow()<span class="hljs-comment">;</span>
        }
    }
    
    // çª—å£å¤§å°æ”¹å˜æ—¶é‡æ–°è°ƒæ•´
    window.addEventListener('resize', () =&gt; {
        resizeCanvas()<span class="hljs-comment">;</span>
        if (snowEffect) snowEffect.initAccumulation()<span class="hljs-comment">;</span>
    })<span class="hljs-comment">;</span>
    
    // å¯åŠ¨
    init()<span class="hljs-comment">;</span>
})()<span class="hljs-comment">;</span>
```

<span class="hljs-comment">## 5. è¾¹ç•Œæ¡ä»¶ä¸å¼‚å¸¸å¤„ç†</span>

<span class="hljs-comment">### 5.1 è¾“å…¥è¾¹ç•Œ</span>
- çƒ­åº¦å€¼èŒƒå›´ï¼š0-100ï¼Œè¶…å‡ºèŒƒå›´è‡ªåŠ¨æˆªæ–­
- ç©ºé—²æ—¶é—´ï¼šä½¿ç”¨ Infinity è¡¨ç¤ºä»æœªè¾“å…¥
- æŒ‰é”®æ—¶é—´æˆ³æ•°ç»„ï¼šå®šæœŸæ¸…ç†è¿‡æœŸæ•°æ®ï¼Œé¿å…å†…å­˜æ³„æ¼

<span class="hljs-comment">### 5.2 çŠ¶æ€åˆ‡æ¢</span>
- çŠ¶æ€åˆ‡æ¢æ—¶æ¸…ç†å‰ä¸€çŠ¶æ€çš„è§†è§‰æ®‹ç•™
- ä½¿ç”¨å¹³æ»‘è¿‡æ¸¡é¿å…çªå…€æ„Ÿ

<span class="hljs-comment">### 5.3 æ€§èƒ½ä¼˜åŒ–</span>
- ç«ç„°åƒç´ çŸ©é˜µä½¿ç”¨å›ºå®šå¤§å°ï¼ˆ80x50ï¼‰ï¼Œé€šè¿‡ç¼©æ”¾æ¸²æŸ“åˆ°å®é™…å°ºå¯¸
- é›ªèŠ±æ•°é‡ä¸Šé™ 200 ä¸ªï¼Œé¿å…æ€§èƒ½é—®é¢˜
- ä½¿ç”¨ requestAnimationFrame ä¿è¯åŠ¨ç”»æµç•…

<span class="hljs-comment">### 5.4 Webview ç”Ÿå‘½å‘¨æœŸ</span>
- Webview éšè—æ—¶æš‚åœåŠ¨ç”»
- Webview é”€æ¯æ—¶æ¸…ç†èµ„æº
- é‡æ–°æ˜¾ç¤ºæ—¶æ¢å¤çŠ¶æ€

<span class="hljs-comment">## 6. æ•°æ®æµåŠ¨è·¯å¾„</span>

```
ç”¨æˆ·è¾“å…¥ â†’ onDidChangeTextDocument â†’ ActivityTracker.recordKeystroke()
                                            â†“
                                    è®¡ç®—çƒ­åº¦å€¼/ç©ºé—²æ—¶é—´
                                            â†“
                              å®šæ—¶å™¨(100ms) â†’ getCurrentState()
                                            â†“
                              WebviewProvider.postMessage()
                                            â†“
                              Webview æ¥æ”¶æ¶ˆæ¯ â†’ handleStateUpdate()
                                            â†“
                              æ›´æ–° FireEffect/SnowEffect å‚æ•°
                                            â†“
                              requestAnimationFrame â†’ render()
```

<span class="hljs-comment">## 7. é¢„æœŸæˆæœ</span>

å®Œæˆåçš„ MVP åº”å…·å¤‡ï¼š
1. âœ… ä¸€é”®å¯åŠ¨è§†è§‰æ•ˆæœé¢æ¿
2. âœ… å®æ—¶å“åº”ç”¨æˆ·è¾“å…¥ï¼Œæ¸²æŸ“ç«ç„°æ•ˆæœ
3. âœ… ç©ºé—²æ—¶è‡ªåŠ¨åˆ‡æ¢åˆ°é›ªèŠ±æ•ˆæœ
4. âœ… é•¿æ—¶é—´ç©ºé—²äº§ç”Ÿç§¯é›ªæ•ˆæœ
5. âœ… æµç•…çš„åŠ¨ç”»å’ŒçŠ¶æ€åˆ‡æ¢
6. âœ… è¯¦ç»†çš„ä»£ç æ³¨é‡Šï¼Œä¾¿äºç†è§£å’Œæ‰©å±•
</code></pre>
<h2 data-id="heading-8">ã€é™„å½•2ã€‘æ’ä»¶å¼€å‘ä»»åŠ¡è®¡åˆ’</h2>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># FrostFire VS Code æ’ä»¶å¼€å‘ä»»åŠ¡è®¡åˆ’</span>

<span class="hljs-bullet">-</span> [ ] <span class="hljs-string">ä»»åŠ¡</span> <span class="hljs-number">1</span><span class="hljs-string">ï¼šåˆå§‹åŒ–é¡¹ç›®ç»“æ„ä¸é…ç½®æ–‡ä»¶</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">1.1:</span> <span class="hljs-string">åˆ›å»º</span> <span class="hljs-string">`package.json`ï¼Œé…ç½®æ’ä»¶å…ƒä¿¡æ¯ã€activationEventsã€commands</span> <span class="hljs-string">å’Œ</span> <span class="hljs-string">viewsï¼ˆä¾§è¾¹æ æ³¨å†Œï¼‰</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">1.2:</span> <span class="hljs-string">åˆ›å»º</span> <span class="hljs-string">`tsconfig.json`ï¼Œé…ç½®</span> <span class="hljs-string">TypeScript</span> <span class="hljs-string">ç¼–è¯‘é€‰é¡¹</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">1.3:</span> <span class="hljs-string">åˆ›å»º</span> <span class="hljs-string">`.vscode/launch.json`ï¼Œé…ç½®è°ƒè¯•å¯åŠ¨é¡¹</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">1.4:</span> <span class="hljs-string">åˆ›å»º</span> <span class="hljs-string">`.vscode/tasks.json`ï¼Œé…ç½®</span> <span class="hljs-string">watch</span> <span class="hljs-string">ç¼–è¯‘ä»»åŠ¡</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">1.5:</span> <span class="hljs-string">åˆ›å»º</span> <span class="hljs-string">`README.md`ï¼Œè¯´æ˜é¡¹ç›®ç”¨é€”å’Œä½¿ç”¨æ–¹æ³•</span>

<span class="hljs-bullet">-</span> [ ] <span class="hljs-string">ä»»åŠ¡</span> <span class="hljs-number">2</span><span class="hljs-string">ï¼šå®ç°</span> <span class="hljs-string">ActivityTracker</span> <span class="hljs-string">æ´»è·ƒåº¦è¿½è¸ªæ¨¡å—</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">2.1:</span> <span class="hljs-string">åˆ›å»º</span> <span class="hljs-string">`src/activityTracker.ts`ï¼Œå®šä¹‰</span> <span class="hljs-string">ActivityTracker</span> <span class="hljs-string">ç±»</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">2.2:</span> <span class="hljs-string">å®ç°</span> <span class="hljs-string">`recordKeystroke()`</span> <span class="hljs-string">æ–¹æ³•ï¼Œè®°å½•æŒ‰é”®æ—¶é—´æˆ³</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">2.3:</span> <span class="hljs-string">å®ç°</span> <span class="hljs-string">`getHeatLevel()`</span> <span class="hljs-string">æ–¹æ³•ï¼Œè®¡ç®—çƒ­åº¦å€¼ï¼ˆ0-100ï¼‰</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">2.4:</span> <span class="hljs-string">å®ç°</span> <span class="hljs-string">`getIdleTime()`</span> <span class="hljs-string">æ–¹æ³•ï¼Œè®¡ç®—ç©ºé—²æ—¶é—´</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">2.5:</span> <span class="hljs-string">å®ç°</span> <span class="hljs-string">`getCurrentState()`</span> <span class="hljs-string">æ–¹æ³•ï¼Œåˆ¤æ–­å½“å‰çŠ¶æ€ï¼ˆfire/idle/snow/snow_accumulateï¼‰</span>

<span class="hljs-bullet">-</span> [ ] <span class="hljs-string">ä»»åŠ¡</span> <span class="hljs-number">3</span><span class="hljs-string">ï¼šå®ç°</span> <span class="hljs-string">WebviewProvider</span> <span class="hljs-string">é¢æ¿ç®¡ç†æ¨¡å—</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">3.1:</span> <span class="hljs-string">åˆ›å»º</span> <span class="hljs-string">`src/webviewProvider.ts`ï¼Œå®šä¹‰</span> <span class="hljs-string">FrostFireWebviewProvider</span> <span class="hljs-string">ç±»</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">3.2:</span> <span class="hljs-string">å®ç°</span> <span class="hljs-string">`resolveWebviewView()`</span> <span class="hljs-string">æ–¹æ³•ï¼Œåˆ›å»ºå¹¶é…ç½®</span> <span class="hljs-string">Webview</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">3.3:</span> <span class="hljs-string">å®ç°</span> <span class="hljs-string">`getHtmlContent()`</span> <span class="hljs-string">æ–¹æ³•ï¼Œç”ŸæˆåŒ…å«</span> <span class="hljs-string">Canvas</span> <span class="hljs-string">å’Œè„šæœ¬çš„</span> <span class="hljs-string">HTML</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">3.4:</span> <span class="hljs-string">å®ç°</span> <span class="hljs-string">`postMessage()`</span> <span class="hljs-string">æ–¹æ³•ï¼Œå‘</span> <span class="hljs-string">Webview</span> <span class="hljs-string">å‘é€çŠ¶æ€æ›´æ–°æ¶ˆæ¯</span>

<span class="hljs-bullet">-</span> [ ] <span class="hljs-string">ä»»åŠ¡</span> <span class="hljs-number">4</span><span class="hljs-string">ï¼šå®ç°æ’ä»¶ä¸»å…¥å£</span> <span class="hljs-string">extension.ts</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">4.1:</span> <span class="hljs-string">åˆ›å»º</span> <span class="hljs-string">`src/extension.ts`ï¼Œå®ç°</span> <span class="hljs-string">`activate()`</span> <span class="hljs-string">å‡½æ•°</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">4.2:</span> <span class="hljs-string">æ³¨å†Œ</span> <span class="hljs-string">WebviewViewProvider</span> <span class="hljs-string">åˆ°</span> <span class="hljs-string">frostfire.effectView</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">4.3:</span> <span class="hljs-string">æ³¨å†Œ</span> <span class="hljs-string">frostfire.start</span> <span class="hljs-string">å’Œ</span> <span class="hljs-string">frostfire.stop</span> <span class="hljs-string">å‘½ä»¤</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">4.4:</span> <span class="hljs-string">æ·»åŠ </span> <span class="hljs-string">`onDidChangeTextDocument`</span> <span class="hljs-string">ç›‘å¬å™¨ï¼Œè®°å½•ç”¨æˆ·è¾“å…¥</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">4.5:</span> <span class="hljs-string">è®¾ç½®å®šæ—¶å™¨ï¼ˆ100msï¼‰ï¼Œå®šæœŸå‘</span> <span class="hljs-string">Webview</span> <span class="hljs-string">å‘é€çŠ¶æ€æ›´æ–°</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">4.6:</span> <span class="hljs-string">å®ç°</span> <span class="hljs-string">`deactivate()`</span> <span class="hljs-string">å‡½æ•°ï¼Œæ¸…ç†èµ„æº</span>

<span class="hljs-bullet">-</span> [ ] <span class="hljs-string">ä»»åŠ¡</span> <span class="hljs-number">5</span><span class="hljs-string">ï¼šå®ç°</span> <span class="hljs-string">Webview</span> <span class="hljs-string">å‰ç«¯æ•ˆæœï¼ˆç«ç„°æ•ˆæœï¼‰</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">5.1:</span> <span class="hljs-string">åˆ›å»º</span> <span class="hljs-string">`src/webview/fireEffect.js`ï¼Œå®šä¹‰</span> <span class="hljs-string">FireEffect</span> <span class="hljs-string">ç±»</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">5.2:</span> <span class="hljs-string">å®ç°</span> <span class="hljs-string">`createPalette()`</span> <span class="hljs-string">æ–¹æ³•ï¼Œåˆ›å»º</span> <span class="hljs-number">36</span> <span class="hljs-string">è‰²ç«ç„°è°ƒè‰²æ¿</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">5.3:</span> <span class="hljs-string">å®ç°</span> <span class="hljs-string">`setIntensity()`</span> <span class="hljs-string">æ–¹æ³•ï¼Œæ ¹æ®çƒ­åº¦è®¾ç½®ç«ç„°å¼ºåº¦</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">5.4:</span> <span class="hljs-string">å®ç°</span> <span class="hljs-string">`spreadFire()`</span> <span class="hljs-string">æ–¹æ³•ï¼ŒDoom</span> <span class="hljs-string">Fire</span> <span class="hljs-string">ä¼ æ’­ç®—æ³•</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">5.5:</span> <span class="hljs-string">å®ç°</span> <span class="hljs-string">`render()`</span> <span class="hljs-string">æ–¹æ³•ï¼Œæ¸²æŸ“ç«ç„°åˆ°</span> <span class="hljs-string">Canvas</span>

<span class="hljs-bullet">-</span> [ ] <span class="hljs-string">ä»»åŠ¡</span> <span class="hljs-number">6</span><span class="hljs-string">ï¼šå®ç°</span> <span class="hljs-string">Webview</span> <span class="hljs-string">å‰ç«¯æ•ˆæœï¼ˆé›ªèŠ±æ•ˆæœï¼‰</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">6.1:</span> <span class="hljs-string">åˆ›å»º</span> <span class="hljs-string">`src/webview/snowEffect.js`ï¼Œå®šä¹‰</span> <span class="hljs-string">SnowEffect</span> <span class="hljs-string">ç±»</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">6.2:</span> <span class="hljs-string">å®ç°</span> <span class="hljs-string">`createSnowflake()`</span> <span class="hljs-string">æ–¹æ³•ï¼Œç”Ÿæˆéšæœºé›ªèŠ±ç²’å­</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">6.3:</span> <span class="hljs-string">å®ç°</span> <span class="hljs-string">`startSnow()`</span> <span class="hljs-string">/</span> <span class="hljs-string">`stopSnow()`</span> <span class="hljs-string">/</span> <span class="hljs-string">`clear()`</span> <span class="hljs-string">æ§åˆ¶æ–¹æ³•</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">6.4:</span> <span class="hljs-string">å®ç°</span> <span class="hljs-string">`update()`</span> <span class="hljs-string">æ–¹æ³•ï¼Œæ›´æ–°é›ªèŠ±ä½ç½®å’Œç§¯é›ªå±‚</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">6.5:</span> <span class="hljs-string">å®ç°</span> <span class="hljs-string">`render()`</span> <span class="hljs-string">æ–¹æ³•ï¼Œæ¸²æŸ“é›ªèŠ±å’Œç§¯é›ªåˆ°</span> <span class="hljs-string">Canvas</span>

<span class="hljs-bullet">-</span> [ ] <span class="hljs-string">ä»»åŠ¡</span> <span class="hljs-number">7</span><span class="hljs-string">ï¼šå®ç°</span> <span class="hljs-string">Webview</span> <span class="hljs-string">ä¸»é€»è¾‘ä¸</span> <span class="hljs-string">HTML</span> <span class="hljs-string">æ¨¡æ¿</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">7.1:</span> <span class="hljs-string">åˆ›å»º</span> <span class="hljs-string">`src/webview/main.js`ï¼Œå®ç°æ¶ˆæ¯ç›‘å¬å’ŒçŠ¶æ€è°ƒåº¦</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">7.2:</span> <span class="hljs-string">å®ç°</span> <span class="hljs-string">`handleStateUpdate()`</span> <span class="hljs-string">æ–¹æ³•ï¼Œæ ¹æ®çŠ¶æ€åˆ‡æ¢æ•ˆæœ</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">7.3:</span> <span class="hljs-string">å®ç°åŠ¨ç”»å¾ªç¯</span> <span class="hljs-string">`animate()`ï¼Œä½¿ç”¨</span> <span class="hljs-string">requestAnimationFrame</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">7.4:</span> <span class="hljs-string">åˆ›å»º</span> <span class="hljs-string">`src/webview/index.html`ï¼Œçº¯é»‘èƒŒæ™¯</span> <span class="hljs-string">Canvas</span> <span class="hljs-string">æ¨¡æ¿</span>

<span class="hljs-bullet">-</span> [ ] <span class="hljs-string">ä»»åŠ¡</span> <span class="hljs-number">8</span><span class="hljs-string">ï¼šå®‰è£…ä¾èµ–å¹¶ç¼–è¯‘éªŒè¯</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">8.1:</span> <span class="hljs-string">æ‰§è¡Œ</span> <span class="hljs-string">`npm</span> <span class="hljs-string">install`</span> <span class="hljs-string">å®‰è£…</span> <span class="hljs-string">TypeScript</span> <span class="hljs-string">å’Œ</span> <span class="hljs-string">VS</span> <span class="hljs-string">Code</span> <span class="hljs-string">ç±»å‹å®šä¹‰</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">8.2:</span> <span class="hljs-string">æ‰§è¡Œ</span> <span class="hljs-string">`npm</span> <span class="hljs-string">run</span> <span class="hljs-string">compile`</span> <span class="hljs-string">ç¼–è¯‘</span> <span class="hljs-string">TypeScript</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">8.3:</span> <span class="hljs-string">æ£€æŸ¥ç¼–è¯‘è¾“å‡ºï¼Œç¡®ä¿æ— æŠ¥é”™</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">8.4:</span> <span class="hljs-string">æä¾›è°ƒè¯•å¯åŠ¨æŒ‡å—ï¼Œç¡®è®¤</span> <span class="hljs-string">MVP</span> <span class="hljs-string">å¯è¿è¡Œ</span>
<span class="hljs-string">æœ‰é—®é¢˜å—</span>
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[React ç»„ä»¶é€šè®¯å…¨æ”»ç•¥ï¼šæ‹’ç» "Props" ç„¦è™‘ï¼ŒæŒæ¡æ•°æ®æµåŠ¨çš„è‰ºæœ¯]]></title>    <link>https://juejin.cn/post/7586482851097968680</link>    <guid>https://juejin.cn/post/7586482851097968680</guid>    <pubDate>2025-12-22T03:06:38.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7586482851097968680" data-draft-id="7585850609015914511" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="React ç»„ä»¶é€šè®¯å…¨æ”»ç•¥ï¼šæ‹’ç» &quot;Props&quot; ç„¦è™‘ï¼ŒæŒæ¡æ•°æ®æµåŠ¨çš„è‰ºæœ¯"/> <meta itemprop="keywords" content="React.js,å‰ç«¯æ¡†æ¶,å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-22T03:06:38.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ¼«å¤©é»„å¶è¿œé£"/> <meta itemprop="url" content="https://juejin.cn/user/2948205649344634"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            React ç»„ä»¶é€šè®¯å…¨æ”»ç•¥ï¼šæ‹’ç» "Props" ç„¦è™‘ï¼ŒæŒæ¡æ•°æ®æµåŠ¨çš„è‰ºæœ¯
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2948205649344634/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ¼«å¤©é»„å¶è¿œé£
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-22T03:06:38.000Z" title="Mon Dec 22 2025 03:06:38 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:14px;overflow-x:hidden;color:var(--cyanosis-base-color);transition:color .35s;--cyanosis-base-color:#353535;--cyanosis-title-color:#005bb7;--cyanosis-strong-color:#2196f3;--cyanosis-em-color:#4fc3f7;--cyanosis-del-color:#ccc;--cyanosis-link-color:#3da8f5;--cyanosis-linkh-color:#007fff;--cyanosis-border-color:#bedcff;--cyanosis-border-color-2:#ececec;--cyanosis-bg-color:#fff;--cyanosis-blockquote-color:#8c8c8c;--cyanosis-blockquote-bg-color:#f0fdff;--cyanosis-code-color:#c2185b;--cyanosis-code-bg-color:#fff4f4;--cyanosis-code-pre-color:#f8f8f8;--cyanosis-table-border-color:#c3e0fd;--cyanosis-table-th-color:#dff0ff;--cyanosis-table-tht-color:#005bb7;--cyanosis-table-tr-nc-color:#f7fbff;--cyanosis-table-trh-color:#e0edf7;--cyanosis-slct-title-color:#005bb7;--cyanosis-slct-titlebg-color:rgba(175,207,247,0.25);--cyanosis-slct-text-color:#c80000;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#e8ebec;--cyanosis-slct-codebg-color:#ffeaeb;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body.__dark{--cyanosis-base-color:#cacaca;--cyanosis-title-color:#ddd;--cyanosis-strong-color:#fe9900;--cyanosis-em-color:#ffd28e;--cyanosis-del-color:#ccc;--cyanosis-link-color:#ffb648;--cyanosis-linkh-color:#fe9900;--cyanosis-border-color:#ffe3ba;--cyanosis-border-color-2:#ffcb7b;--cyanosis-bg-color:#2f2f2f;--cyanosis-blockquote-color:#c7c7c7;--cyanosis-blockquote-bg-color:rgba(255,199,116,0.1);--cyanosis-code-color:#000;--cyanosis-code-bg-color:#ffcb7b;--cyanosis-code-pre-color:rgba(255,227,185,0.5);--cyanosis-table-border-color:#fe9900;--cyanosis-table-th-color:#ffb648;--cyanosis-table-tht-color:#000;--cyanosis-table-tr-nc-color:#6d5736;--cyanosis-table-trh-color:#947443;--cyanosis-slct-title-color:#000;--cyanosis-slct-titlebg-color:#fe9900;--cyanosis-slct-text-color:#00c888;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#000;--cyanosis-slct-codebg-color:#ffcb7b;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body h1{padding-bottom:4px;font-size:30px}.markdown-body h1,.markdown-body h2{margin-top:36px;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);transition:color .35s}.markdown-body h2{position:relative;padding-left:10px;padding-right:10px;padding-bottom:10px;font-size:24px;border-bottom:1px solid var(--cyanosis-border-color-2)}.markdown-body h2:before{content:"ã€Œ";position:absolute;top:-6px;left:-14px}.markdown-body h2:after{content:"ã€";position:relative;top:6px;right:auto}.markdown-body h3{position:relative;padding-bottom:0;margin-top:30px;margin-bottom:10px;font-size:20px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h3:before{content:"Â»";padding-right:6px;color:var(--cyanosis-strong-color)}.markdown-body h4{margin-top:24px;font-size:16px}.markdown-body h4,.markdown-body h5{padding-bottom:0;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h5{margin-top:18px;font-size:14px}.markdown-body h6{padding-bottom:0;margin-top:12px;margin-bottom:10px;font-size:12px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body p{line-height:inherit;margin-top:16px;margin-bottom:16px}.markdown-body img{max-width:100%}.markdown-body hr{position:relative;width:98%;height:1px;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,var(--cyanosis-link-color),rgba(255,0,0,.3),hsla(0,0%,100%,.1),rgba(255,0,0,.3),var(--cyanosis-link-color));border-width:0;overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background-color:var(--cyanosis-bg-color);background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center;transition:background-color .5s}.markdown-body code{padding:.065em .4em;font-size:.87em;color:var(--cyanosis-code-color);word-break:break-word;overflow-x:auto;background-color:var(--cyanosis-code-bg-color);border-radius:2px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;padding:16px 12px;margin:0;font-size:12px;color:#333;word-break:normal;overflow-x:auto;background:var(--cyanosis-code-pre-color)}.markdown-body pre&gt;code::-webkit-scrollbar{width:4px;height:4px}.markdown-body pre&gt;code::-webkit-scrollbar-track{background-color:var(--cyanosis-border-color)}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:var(--cyanosis-strong-color);border-radius:10px}.markdown-body a{position:relative;text-decoration:none;color:var(--cyanosis-link-color);border-bottom:1px solid var(--cyanosis-border-color)}.markdown-body a:hover{border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body a:active,.markdown-body a:hover{color:var(--cyanosis-linkh-color)}.markdown-body a:after{position:absolute;content:"";top:100%;left:0;width:100%;opacity:0;border-bottom:1px solid var(--cyanosis-border-color);transition:top .3s,opacity .3s;transform:translateZ(0)}.markdown-body a:hover:after{top:0;opacity:1;border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid var(--cyanosis-table-border-color);border-spacing:0;border-collapse:collapse}.markdown-body table thead{color:#000;text-align:left;font-size:14px;background:#f6f6f6}.markdown-body table tr:nth-child(2n){background-color:var(--cyanosis-table-tr-nc-color)}.markdown-body table tr:hover{background-color:var(--cyanosis-table-trh-color)}.markdown-body table td,.markdown-body table th{padding:12px 8px;line-height:24px;border:1px solid var(--cyanosis-table-border-color)}.markdown-body table th{color:var(--cyanosis-table-tht-color);background-color:var(--cyanosis-table-th-color)}.markdown-body table td{min-width:120px}.markdown-body blockquote{color:var(--cyanosis-blockquote-color);border-left:4px solid var(--cyanosis-strong-color);background-color:var(--cyanosis-blockquote-bg-color);padding:1px 20px;margin:22px 0;transition:color .35s}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body b,.markdown-body blockquote&gt;b,.markdown-body blockquote&gt;strong,.markdown-body strong{color:var(--cyanosis-strong-color)}.markdown-body em,.markdown-body i{color:var(--cyanosis-em-color)}.markdown-body del{color:var(--cyanosis-del-color)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:4px}.markdown-body ol li{padding-left:6px}.markdown-body details&gt;summary{outline:none;color:var(--cyanosis-title-color);font-size:20px;font-weight:bolder;border-bottom:1px solid var(--cyanosis-border-color);cursor:pointer}.markdown-body details&gt;p{padding:10px 20px;margin:10px 0 0;color:#666;background-color:var(--cyanosis-blockquote-bg-color);border:2px dashed var(--cyanosis-strong-color)}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection{color:var(--cyanosis-slct-title-color);background-color:var(--cyanosis-slct-titlebg-color)}.markdown-body ol li::selection,.markdown-body p::selection,.markdown-body ul li::selection{color:var(--cyanosis-slct-text-color);background-color:var(--cyanosis-slct-bg-color)}.markdown-body a::selection,.markdown-body b::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:var(--cyanosis-slct-elbg-color)}.markdown-body del::selection{color:var(--cyanosis-slct-del-color);background-color:var(--cyanosis-slct-elbg-color)}.markdown-body table thead th::selection{background-color:transparent}.markdown-body table tbody td::selection{background-color:var(--cyanosis-slct-bg-color)}.markdown-body code::selection{background-color:var(--cyanosis-slct-codebg-color)}.markdown-body pre&gt;code::selection{background-color:var(--cyanosis-slct-prebg-color)}.markdown-body .contains-task-list{padding-left:14px;list-style:none}.markdown-body .contains-task-list input[type=checkbox]{position:relative}.markdown-body .contains-task-list input[type=checkbox]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;width:inherit;height:inherit;background:#f0f8ff;border:1px solid #add6ff;border-radius:2px;box-sizing:border-box;z-index:1}.markdown-body .contains-task-list input[type=checkbox]:checked:after{content:"âœ“";position:absolute;top:-12px;left:0;right:0;bottom:0;width:0;height:0;color:#f55;font-size:20px;font-weight:700;z-index:2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="agate">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#333;color:#fff}.hljs-name,.hljs-strong{font-weight:700}.hljs-code,.hljs-emphasis{font-style:italic}.hljs-tag{color:#62c8f3}.hljs-selector-class,.hljs-selector-id,.hljs-template-variable,.hljs-variable{color:#ade5fc}.hljs-bullet,.hljs-string{color:#a2fca2}.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-quote,.hljs-section,.hljs-title,.hljs-type{color:#ffa}.hljs-bullet,.hljs-number,.hljs-symbol{color:#d36363}.hljs-keyword,.hljs-literal,.hljs-selector-tag{color:#fcc28c}.hljs-code,.hljs-comment,.hljs-deletion{color:#888}.hljs-link,.hljs-regexp{color:#c6b4f0}.hljs-meta{color:#fc9b9b}.hljs-deletion{background-color:#fc9b9b;color:#333}.hljs-addition{background-color:#a2fca2;color:#333}.hljs a{color:inherit}.hljs a:focus,.hljs a:hover{color:inherit;text-decoration:underline}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>åœ¨ <strong>React</strong> çš„å¼€å‘æ—…ç¨‹ä¸­ï¼Œç»„ä»¶å°±åƒæ˜¯ä¹é«˜ç§¯æœ¨ï¼Œæˆ‘ä»¬æŠŠå®ƒä»¬ä¸€ä¸ªä¸ªæ­èµ·æ¥æ„å»ºå‡ºå¤æ‚çš„é¡µé¢ã€‚ä½†å…‰æ­èµ·æ¥è¿˜ä¸å¤Ÿï¼Œè¿™äº›ç§¯æœ¨ä¹‹é—´å¿…é¡»æœ‰â€œç”µæµâ€æµé€šâ€”â€”è¿™å°±æ˜¯æ•°æ®ã€‚<br/>
<strong>React</strong> çš„è®¾è®¡å“²å­¦æ˜¯å•å‘æ•°æ®æµï¼Œå°±åƒç€‘å¸ƒä¸€æ ·ï¼Œæ°´æµé»˜è®¤åªèƒ½ä»é«˜å¤„æµå‘ä½å¤„ã€‚ä½†åœ¨å®é™…ä¸šåŠ¡ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦é€†æµè€Œä¸Šï¼Œæˆ–è€…åœ¨ä¸¤ä¸ªå¹³è¡Œçš„æ°´æ± é—´äº¤æ¢æ°´æµã€‚ä»Šå¤©æˆ‘ä»¬å°±æ¥ç›˜ç‚¹ <strong>React</strong> ä¸­æœ€ä¸»æµçš„å››ç§â€œå¼•æ°´â€æ–¹å¼ï¼Œæ‰“é€šä½ çš„ç»„ä»¶ç»è„‰ã€‚</p>
<hr/>
<h2 data-id="heading-1">1. çˆ¶ä¼ å­ï¼šé¡ºæµè€Œä¸‹çš„ Props</h2>
<p>è¿™æ˜¯ <strong>React</strong> ä¸­æœ€è‡ªç„¶ã€æœ€åŸºç¡€çš„é€šä¿¡æ–¹å¼ã€‚æƒ³è±¡ä¸€ä¸‹ï¼Œçˆ¶äº²ç»™å­©å­é›¶èŠ±é’±ï¼Œçˆ¶äº²ï¼ˆçˆ¶ç»„ä»¶ï¼‰åªéœ€è¦è¦æŠŠé’±ï¼ˆæ•°æ®ï¼‰é€’è¿‡å»ï¼Œå­©å­ï¼ˆå­ç»„ä»¶ï¼‰ä¼¸æ‰‹æ¥ç€å°±è¡Œã€‚<br/>
åœ¨ä»£ç å±‚é¢ï¼Œçˆ¶ç»„ä»¶é€šè¿‡åœ¨å­ç»„ä»¶æ ‡ç­¾ä¸Šå†™ä¸Šè‡ªå®šä¹‰å±æ€§ï¼ˆmsgï¼‰æ¥ä¼ é€’æ•°æ®ã€‚</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">Child</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"./Child"</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Parent</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> state = {
    <span class="hljs-attr">name</span>: <span class="hljs-string">'å°é¥¶'</span>
  }
  
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>çˆ¶ç»„ä»¶<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
      {/* çˆ¶äº²æŠŠ 'å°é¥¶' è¿™ä¸ªåå­—æ‰“åŒ…è¿› msg å±æ€§ä¼ ç»™å­©å­ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">Child</span> <span class="hljs-attr">msg</span>=<span class="hljs-string">{state.name}</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  )
}
</code></pre>
<p>å­©å­ç»„ä»¶è¿™è¾¹ï¼Œæ‰€æœ‰æ¥æ”¶åˆ°çš„ç¤¼ç‰©éƒ½è£…åœ¨ä¸€ä¸ªå« <code>props</code> çš„ç›’å­é‡Œã€‚ä¸è¿‡è¦æ³¨æ„ï¼Œ<code>Props</code> æ˜¯åªè¯»çš„â€”â€”è¿™æ„å‘³ç€å­©å­åªèƒ½ä½¿ç”¨è¿™äº›æ•°æ®ï¼Œä¸èƒ½ç›´æ¥ä¿®æ”¹å®ƒã€‚å°±åƒå­©å­ä¸èƒ½è‡ªå·±ä¿®æ”¹çˆ¶äº²é“¶è¡Œå¡çš„ä½™é¢ä¸€æ ·ï¼Œå¦‚æœè¦æ”¹ï¼Œå¿…é¡»è¯·æ±‚çˆ¶äº²æ“ä½œã€‚</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Child</span>(<span class="hljs-params">props</span>) {
  <span class="hljs-comment">// æ‰“å¼€ç›’å­çœ‹çœ‹æ”¶åˆ°äº†ä»€ä¹ˆ</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(props);
  
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>å­ç»„ä»¶ -- {props.msg}<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span></span>
  )
}
</code></pre>
<hr/>
<h2 data-id="heading-2">2. å­ä¼ çˆ¶ï¼šç»™å­©å­ä¸€ä¸ªâ€œé¥æ§å™¨â€</h2>
<p>æ—¢ç„¶æ°´æµé»˜è®¤å‘ä¸‹ï¼Œé‚£å­ç»„ä»¶æƒ³è¦æ”¹å˜çˆ¶ç»„ä»¶çš„æ•°æ®è¯¥æ€ä¹ˆåŠï¼Ÿæ¯”å¦‚ï¼Œå­©å­æƒ³å‘Šè¯‰çˆ¶äº²ï¼šâ€œæˆ‘è€ƒäº† 100 åˆ†ï¼Œè¯·æ›´æ–°ä¸€ä¸‹ä½ çš„å¿ƒæƒ…çŠ¶æ€â€ã€‚<br/>
è¿™æ—¶å€™ï¼Œçˆ¶ç»„ä»¶éœ€è¦æå‰å‡†å¤‡ä¸€ä¸ªâ€œé¥æ§å™¨â€â€”â€”ä¹Ÿå°±æ˜¯ä¸€ä¸ªå‡½æ•°ã€‚çˆ¶ç»„ä»¶æŠŠè¿™ä¸ªå‡½æ•°é€šè¿‡ <code>props</code> ä¼ ç»™å­ç»„ä»¶ï¼Œå½“å­ç»„ä»¶éœ€è¦é€šä¿¡æ—¶ï¼Œå°±æŒ‰ä¸‹è¿™ä¸ªé¥æ§å™¨ï¼ˆè°ƒç”¨å‡½æ•°ï¼‰ï¼Œå¹¶æŠŠæ•°æ®ä½œä¸ºå‚æ•°ä¼ å›å»ã€‚
**çˆ¶ç»„ä»¶ï¼š å‡†å¤‡å¥½ <code>getNum</code> å‡½æ•°ï¼Œç”¨æ¥æ¥æ”¶æ•°æ®å¹¶æ›´æ–°è‡ªå·±çš„ <code>count</code>ã€‚ **</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">Child</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"./Child"</span>
<span class="hljs-keyword">import</span> { useState } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Parent</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">let</span> [count, setCount] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">1</span>)  

  <span class="hljs-comment">// è¿™å°±æ˜¯é‚£ä¸ªâ€œé¥æ§å™¨â€å‡½æ•°</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">getNum</span> = (<span class="hljs-params">n</span>) =&gt; {
    <span class="hljs-title function_">setCount</span>(n)
  }

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>çˆ¶ç»„ä»¶äºŒ -- {count}<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
      {/* æŠŠé¥æ§å™¨äº¤ç»™å­©å­ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">Child</span> <span class="hljs-attr">getNum</span>=<span class="hljs-string">{getNum}</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">Child</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  )
}
</code></pre>
<p><strong>å­ç»„ä»¶ï¼š åœ¨åˆé€‚çš„æ—¶æœºï¼ˆæ¯”å¦‚ç‚¹å‡»æŒ‰é’®æ—¶ï¼‰ï¼Œé€šè¿‡ props æ‹¿åˆ°å¹¶æŒ‰ä¸‹è¿™ä¸ªâ€œé¥æ§å™¨â€ã€‚</strong></p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Child</span>(<span class="hljs-params">props</span>) {
  
  <span class="hljs-keyword">const</span> state = {
    <span class="hljs-attr">num</span>: <span class="hljs-number">100</span>
  }

  <span class="hljs-keyword">function</span> <span class="hljs-title function_">send</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// æ­¤æ—¶è°ƒç”¨çš„æ˜¯çˆ¶ç»„ä»¶é‡Œçš„å‡½æ•°ï¼ŒæŠŠ 100 ä¼ äº†å›å»</span>
    props.<span class="hljs-title function_">getNum</span>(state.<span class="hljs-property">num</span>)
  }

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>å­ç»„ä»¶äºŒ<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{send}</span>&gt;</span>å‘é€<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  )
}
</code></pre>
<hr/>
<h2 data-id="heading-3">3. å…„å¼Ÿç»„ä»¶ï¼šæ‰¾ä¸ªå…±åŒçš„â€œå®¶é•¿â€</h2>
<p>å…„å¼Ÿç»„ä»¶ä¹‹é—´æ²¡æœ‰ç›´æ¥çš„è¿çº¿ï¼Œå°±åƒä½ å’Œä½ çš„è¡¨å¼Ÿä½åœ¨ä¸åŒçš„å±‹å­é‡Œï¼Œæƒ³èŠå¤©å¾—é€šè¿‡å¤§å…é‡Œçš„é•¿è¾ˆä¼ è¯ã€‚
è¿™ç§æ¨¡å¼åœ¨ <strong>React</strong> ä¸­é€šå¸¸è¢«ç§°ä¸ºçŠ¶æ€æå‡ã€‚æ—¢ç„¶ <strong>Brother1</strong> æƒ³è¦ç»™ <strong>Brother2</strong> ä¼ å€¼ï¼Œé‚£æˆ‘ä»¬å°±æŠŠè¿™ä¸ªå€¼ä¿å­˜åœ¨ä»–ä»¬å…±åŒçš„çˆ¶äº²èº«ä¸Šã€‚</p>
<ul>
<li>Brother1 -&gt; Parentï¼šBrother1 å…ˆæŠŠæ•°æ®ä¼ ç»™çˆ¶äº²ï¼ˆåˆ©ç”¨ä¸Šé¢çš„å­ä¼ çˆ¶æŠ€å·§ï¼‰ã€‚</li>
<li>Parent -&gt; Brother2ï¼šçˆ¶äº²æ‹¿åˆ°æ•°æ®åï¼Œæ›´æ–°è‡ªå·±çš„çŠ¶æ€ï¼Œå†æŠŠè¿™ä¸ªæ–°çŠ¶æ€é¡ºæ‰‹ä¼ ç»™ Brother2ï¼ˆåˆ©ç”¨çˆ¶ä¼ å­æŠ€å·§ï¼‰ã€‚</li>
</ul>
<p><strong>çˆ¶ç»„ä»¶ï¼ˆä¸­é—´æ¢çº½ï¼‰ï¼š</strong></p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> { useState } <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Child1</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"./Child1"</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Child2</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"./Child2"</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Parent</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">let</span> [message, setMessage] = <span class="hljs-title function_">useState</span>()

  <span class="hljs-comment">// æ¥æ”¶è€å¤§ä¼ æ¥çš„æ¶ˆæ¯</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">getMsg</span> = (<span class="hljs-params">msg</span>) =&gt; {
    <span class="hljs-title function_">setMessage</span>(msg)
  }

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span> çˆ¶ç»„ä»¶ä¸‰ <span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
      {/* æ¥æ”¶è€…ï¼šä» Child1 æ”¶ä¿¡ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">Child1</span> <span class="hljs-attr">getMsg</span>=<span class="hljs-string">{getMsg}</span> /&gt;</span>
      {/* å‘é€è€…ï¼šæŠŠä¿¡è½¬äº¤ç»™ Child2 */}
      <span class="hljs-tag">&lt;<span class="hljs-name">Child2</span> <span class="hljs-attr">message</span>=<span class="hljs-string">{message}</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  )
}
</code></pre>
<p><strong>Child1ï¼ˆæ¶ˆæ¯å‘é€æ–¹ï¼‰ï¼š</strong></p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Child1</span>(<span class="hljs-params">props</span>) {
  <span class="hljs-keyword">const</span> state = {
    <span class="hljs-attr">msg</span>: <span class="hljs-string">'1 ä¸­çš„æ•°æ®'</span>
  }

  <span class="hljs-keyword">function</span> <span class="hljs-title function_">send</span>(<span class="hljs-params"/>) {
    props.<span class="hljs-title function_">getMsg</span>(state.<span class="hljs-property">msg</span>)
  }
  
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>å­ç»„ä»¶1<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{send}</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  )
}
</code></pre>
<p><strong>Child2ï¼ˆæ¶ˆæ¯æ¥æ”¶æ–¹ï¼‰ï¼š</strong></p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Child2</span>(<span class="hljs-params">props</span>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      {/* åç­‰çˆ¶äº²æŠŠå…„å¼Ÿçš„æ¶ˆæ¯é€è¿‡æ¥ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>å­ç»„ä»¶2 --- {props.message}<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  )
}
</code></pre>
<hr/>
<h2 data-id="heading-4">4. è·¨ä»£ç»„ä»¶é€šä¿¡ï¼šContext ä¼ é€é—¨</h2>
<p>å¦‚æœç»„ä»¶å±‚çº§å¾ˆæ·±ï¼Œæ¯”å¦‚â€œçˆ·çˆ· -&gt; çˆ¸çˆ¸ -&gt; å„¿å­ -&gt; å­™å­â€ï¼Œå¦‚æœè¿˜ç”¨ <strong>Props</strong> ä¸€å±‚å±‚ä¼ ï¼Œé‚£ä¸­é—´çš„çˆ¸çˆ¸å’Œå„¿å­å°±æˆäº†æ— è¾œçš„â€œæ¬è¿å·¥â€ï¼Œä»£ç ä¼šå˜å¾—éå¸¸è‡ƒè‚¿éº»çƒ¦ã€‚<br/>
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œ<strong>React</strong> æä¾›äº†ä¸€ä¸ª <strong>Context</strong>ï¼ˆä¸Šä¸‹æ–‡ï¼‰æœºåˆ¶ã€‚è¿™å°±åƒåœ¨å®¶æ—é‡Œè®¾ç«‹äº†ä¸€ä¸ªâ€œå¹¿æ’­ç«™â€ï¼Œçˆ·çˆ·åœ¨é¡¶å±‚å¹¿æ’­ï¼Œåº•ä¸‹çš„ä»»ä½•ä¸€ä»£å­å­™ï¼Œåªè¦æƒ³å¬ï¼Œå°±å¯ä»¥ç›´æ¥æ¥æ”¶ä¿¡å·ï¼Œå®Œå…¨ä¸éœ€è¦ä¸­é—´äººè½¬æ‰‹ã€‚<br/>
<strong>çˆ·ç»„ä»¶ï¼ˆæ•°æ®æºå¤´ï¼‰ï¼š</strong><br/>
æˆ‘ä»¬éœ€è¦å…ˆ <code>createContext</code> åˆ›å»ºä¸€ä¸ªä¿¡å·å¡”ï¼Œç„¶åç”¨ <code>&lt;Context.Provider&gt;</code> æŠŠæ‰€æœ‰åä»£åŒ…èµ·æ¥ï¼Œ<code>value</code> å°±æ˜¯æˆ‘ä»¬è¦å¹¿æ’­çš„æ•°æ®ã€‚</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">Parent</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"./Parent"</span>
<span class="hljs-keyword">import</span> { createContext } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">Context</span> = <span class="hljs-title function_">createContext</span>()  <span class="hljs-comment">// 1. å»ºç«‹ä¿¡å·å¡”</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Grand</span>(<span class="hljs-params"/>) {

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span> çˆ·ç»„ä»¶ <span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
      {/* 2. å‘å°„ä¿¡å·ï¼Œå†…å®¹æ˜¯ value ä¸­çš„æ•°æ® */}
      <span class="hljs-tag">&lt;<span class="hljs-name">Context.Provider</span> <span class="hljs-attr">value</span>= <span class="hljs-string">{</span>'<span class="hljs-attr">çˆ·ç»„ä»¶çš„æ•°æ®</span>'}&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Parent</span>/&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">Context.Provider</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  )
}
</code></pre>
<p><strong>çˆ¶ç»„ä»¶ï¼ˆè·¯äººç”²ï¼‰ï¼š</strong><br/>
ä½ çœ‹ï¼Œçˆ¶ç»„ä»¶å®Œå…¨ä¸éœ€è¦ç¢°è¿™äº›æ•°æ®ï¼Œå®ƒåªéœ€è¦å®‰é™åœ°æ¸²æŸ“å®ƒçš„å­ç»„ä»¶å³å¯ã€‚</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">Child</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"./Child"</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Parent</span>(<span class="hljs-params"/>) {

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>çˆ¶ç»„ä»¶<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Child</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">Child</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  )
}
</code></pre>
<p><strong>å­™å­ç»„ä»¶ï¼ˆæ•°æ®æ¥æ”¶è€…ï¼‰ï¼š</strong><br/>
å­™å­ç»„ä»¶ä¸éœ€è¦ç®¡å®ƒç¦»çˆ·çˆ·éš”äº†å¤šå°‘ä»£ï¼Œç›´æ¥ç”¨ <code>useContext</code> è¿™ä¸ªé’©å­å‡½æ•°ï¼Œå°±èƒ½è¿ä¸Šä¿¡å·å¡”æ‹¿åˆ°æ•°æ®ã€‚</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> { useContext } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Context</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./Grand'</span>  <span class="hljs-comment">// 3. å¼•å…¥ä¿¡å·å¡”å®šä¹‰</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Child</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// 4. æ¥æ”¶ä¿¡å·</span>
  <span class="hljs-keyword">const</span> msg = <span class="hljs-title function_">useContext</span>(<span class="hljs-title class_">Context</span>)

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h4</span>&gt;</span>å­™å­ç»„ä»¶ --- {msg}<span class="hljs-tag">&lt;/<span class="hljs-name">h4</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  )
}
</code></pre>
<h2 data-id="heading-5">ç»“è¯­</h2>
<p>ç»„ä»¶é€šä¿¡æ˜¯ <strong>React</strong> å¼€å‘ä¸­æœ€åŸºæœ¬ä¹Ÿæœ€é‡è¦çš„å†…åŠŸã€‚</p>
<ul>
<li>ç®€å•çš„çˆ¶å­å…³ç³»ï¼Œ<strong>Props</strong> å’Œ <strong>Callback</strong> æ˜¯æœ€è½»é‡çš„é€‰æ‹©ï¼›</li>
<li>å…„å¼Ÿç»„ä»¶ï¼Œè®°å¾—æ‰¾å…±åŒçš„çˆ¶çº§å¸®å¿™å‘¨è½¬ï¼›</li>
<li>å½“å±‚çº§å¤ªæ·±æ„Ÿåˆ°ç¹çæ—¶ï¼Œ<strong>Context</strong> å°±æ˜¯ä½ çš„æ•‘æ˜Ÿã€‚</li>
</ul>
<p>æŒæ¡äº†è¿™å››æ‹›ï¼Œä½ å°±èƒ½ä»å®¹åº”å¯¹ç»å¤§å¤šæ•°çš„ç»„ä»¶äº¤äº’åœºæ™¯ï¼Œè®©æ•°æ®åœ¨ä½ çš„åº”ç”¨ä¸­æµåŠ¨å¾—äº•äº•æœ‰æ¡ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€vue3ã€‘ + ã€viteã€‘ + ã€vite-plugin-obfuscatorã€‘æ··æ·†æ‰“åŒ… => æ”¾å¼ƒäº†ï¼Œæ ·å¼ä¼šä¸¢]]></title>    <link>https://juejin.cn/post/7586509410567405609</link>    <guid>https://juejin.cn/post/7586509410567405609</guid>    <pubDate>2025-12-22T03:15:40.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7586509410567405609" data-draft-id="7585789195869388836" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€vue3ã€‘ + ã€viteã€‘ + ã€vite-plugin-obfuscatorã€‘æ··æ·†æ‰“åŒ…  =&gt;  æ”¾å¼ƒäº†ï¼Œæ ·å¼ä¼šä¸¢"/> <meta itemprop="keywords" content="å‰ç«¯,Vue.js"/> <meta itemprop="datePublished" content="2025-12-22T03:15:40.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ¢¦æƒ³æ˜¯å‡†ç‚¹ä¸‹ç­"/> <meta itemprop="url" content="https://juejin.cn/user/2192851914196873"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€vue3ã€‘ + ã€viteã€‘ + ã€vite-plugin-obfuscatorã€‘æ··æ·†æ‰“åŒ…  =&gt;  æ”¾å¼ƒäº†ï¼Œæ ·å¼ä¼šä¸¢
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2192851914196873/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ¢¦æƒ³æ˜¯å‡†ç‚¹ä¸‹ç­
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-22T03:15:40.000Z" title="Mon Dec 22 2025 03:15:40 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><code>vite-plugin-obfuscator</code>Â å¯ä»¥å°†ä½ çš„ä»£ç è¿›è¡Œæ··æ·†ï¼Œä¸€ä¸ªä¾èµ–</p>
<hr/>
<p>å®‰è£…</p>
<p>npm install vite-plugin-obfuscator --save-dev</p>
<p>é…ç½®æ–‡ä»¶å¼•å…¥å’Œé…ç½®</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { viteObfuscateFile } <span class="hljs-keyword">from</span> <span class="hljs-string">'vite-plugin-obfuscator'</span>;

<span class="hljs-comment">// https://vitejs.dev/config/</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>({
  <span class="hljs-attr">plugins</span>: [
    <span class="hljs-title function_">vue</span>(),
    <span class="hljs-title function_">vueJsx</span>(),
    <span class="hljs-title function_">viteMockServe</span>({
      <span class="hljs-attr">mockPath</span>: <span class="hljs-string">'mock'</span>,
      <span class="hljs-attr">localEnabled</span>: <span class="hljs-literal">true</span>
    }),
    <span class="hljs-title function_">viteObfuscateFile</span>({
      <span class="hljs-attr">options</span>: {
        <span class="hljs-attr">debugProtection</span>: <span class="hljs-literal">true</span>
      }
    })
  ],
</code></pre>
<p>æŠ¥é”™ï¼š</p>
<p>æ— æ³•æ‰¾åˆ°æ¨¡å—â€œvite-plugin-obfuscatorâ€çš„å£°æ˜æ–‡ä»¶ã€‚</p>
<p>æ²¡æœ‰å…·ä½“æ­¥éª¤ï¼Œè¿™ä¸ªä¾èµ–ç¼ºå°‘ç±»å‹å£°æ˜ï¼Œtsè¿›è¡ŒæŠ¥é”™ï¼Œç»™å®ƒä¸€ä¸ªå£°æ˜å°±è¡Œï¼Œä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// æ·»åŠ  vite-plugin-obfuscator çš„ç±»å‹å£°æ˜</span>
declare <span class="hljs-variable language_">module</span> <span class="hljs-string">'vite-plugin-obfuscator'</span> {
  <span class="hljs-keyword">import</span> { <span class="hljs-title class_">Plugin</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'vite'</span>;

  interface <span class="hljs-title class_">ViteObfuscateFileOptions</span> {
    options?: any;
  }

  <span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">viteObfuscateFile</span>(<span class="hljs-params">options?: ViteObfuscateFileOptions</span>): <span class="hljs-title class_">Plugin</span>;
}
</code></pre>
<p>å…·ä½“çš„æ··æ·†é…ç½®ï¼š</p>








































<table><thead><tr><th><code>compact</code></th><th><code>boolean</code></th><th><code>true</code></th><th>å‹ç¼©ä»£ç ï¼Œç§»é™¤ç©ºæ ¼å’Œæ¢è¡Œç¬¦ã€‚</th><th>æ ·å¼ä¸¢å¤±</th></tr></thead><tbody><tr><td><code>debugProtection</code></td><td><code>boolean</code></td><td><code>false</code></td><td>é˜²æ­¢åœ¨å¼€å‘è€…å·¥å…·ä¸­è°ƒè¯•ä»£ç ã€‚</td><td/></tr><tr><td>-----------------</td><td>---------</td><td>-------</td><td>--------------</td><td/></tr><tr><td><code>renameGlobals</code></td><td><code>boolean</code></td><td><code>false</code></td><td>é‡å‘½åå…¨å±€å˜é‡å’Œå‡½æ•°åã€‚</td><td>æ¥å£è·¯å¾„å¤±æ•ˆ</td></tr><tr><td>---------------</td><td>---------</td><td>-------</td><td>------------</td><td>---</td></tr></tbody></table>










<table><thead><tr><th><code>renameProperties</code></th><th><code>boolean</code></th><th><code>false</code></th><th>é‡å‘½åå¯¹è±¡çš„å±æ€§åã€‚</th><th>æ ·å¼ä¸¢å¤±ï¼Ÿ</th></tr></thead></table>










<table><thead><tr><th><code>transformObjectKeys</code></th><th><code>boolean</code></th><th><code>false</code></th><th>è½¬æ¢å¯¹è±¡çš„é”®åï¼Œå¢åŠ ä»£ç çš„å¤æ‚æ€§ã€‚</th><th>æ ·å¼ä¸¢å¤±ï¼Ÿ</th></tr></thead></table>
<p>éš¾æå•Šï¼Œæ ·å¼ä¼šä¸¢</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é«˜å¾·åœ°å›¾-ç‰©æµè·¯çº¿]]></title>    <link>https://juejin.cn/post/7586208617603285026</link>    <guid>https://juejin.cn/post/7586208617603285026</guid>    <pubDate>2025-12-22T03:13:59.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7586208617603285026" data-draft-id="7585920796100395035" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é«˜å¾·åœ°å›¾-ç‰©æµè·¯çº¿"/> <meta itemprop="keywords" content="å‰ç«¯,Vue.js"/> <meta itemprop="datePublished" content="2025-12-22T03:13:59.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ˜Ÿ_ç¦»"/> <meta itemprop="url" content="https://juejin.cn/user/2652464856962254"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é«˜å¾·åœ°å›¾-ç‰©æµè·¯çº¿
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2652464856962254/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ˜Ÿ_ç¦»
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-22T03:13:59.000Z" title="Mon Dec 22 2025 03:13:59 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ‰äº›æ—¶å€™æˆ‘ä»¬çš„é¡¹ç›®åªä½¿ç”¨åŸç”Ÿä¸€äº›å†…å®¹æ˜¯æ— æ³•å®ç°ä¸€äº›åŠŸèƒ½çš„ï¼Œæ‰€ä»¥ä»Šå¤©æˆ‘å¸¦æ¥äº†ä¸€ä¸ªå¤§å®¶éƒ½ç†Ÿæ‚‰çš„ï¼Œä¹Ÿæ˜¯ç”Ÿæ´»ä¸­å¸¸è§çš„ä¸€ä¸ªåŠŸèƒ½ï¼Œä¹Ÿå°±æ˜¯å¤§å®¶åœ¨ç½‘è´­çš„æ—¶å€™ï¼Œä¸‹å•æˆåŠŸåå°±å¯ä»¥çœ‹åˆ°è‡ªå·±çš„è®¢å•ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥æŸ¥çœ‹ç‰©æµä¿¡æ¯ï¼Œé‚£ä¹ˆç‰©æµä¿¡æ¯ä¸­æœ‰ä¸€ä¸ªéƒ¨åˆ†å°±æ˜¯åœ°å›¾éƒ¨åˆ†ï¼Œè¿™éƒ¨åˆ†å¯ä»¥è®©ç”¨æˆ·çœ‹åˆ°è‡ªå·±è´­ä¹°çš„å•†å“åˆ°äº†å“ªé‡Œã€‚é‚£è¿™ä¸ªåŠŸèƒ½æˆ‘ä»¬ä½¿ç”¨åŸç”Ÿå¤§æ¦‚ç‡æ˜¯æ— æ³•å®Œæˆçš„ï¼Œè¿™å°±éœ€è¦æˆ‘ä»¬ä½¿ç”¨é«˜å¾·åœ°å›¾ã€ç™¾åº¦åœ°å›¾æˆ–è€…è…¾è®¯ä¹‹ç±»çš„å¼€æ”¾åœ°å›¾ç±» API çš„åŠŸèƒ½ï¼Œé‚£ä¹ˆä»Šå¤©æˆ‘å°±æ¥å’Œå¤§å®¶åˆ†äº«ä¸€ä¸‹å¦‚ä½•å»ä½¿ç”¨é«˜å¾·åœ°å›¾å®ç°è¿™ä¸€åŠŸèƒ½ã€‚</p>
<h2 data-id="heading-0">1. å‡†å¤‡å·¥ä½œ</h2>
<h3 data-id="heading-1">1.1. å®˜æ–¹æ–‡æ¡£</h3>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Flbs.amap.com%2Fapi%2Fjavascript-api-v2%2Fguide%2Fabc%2Famap-vue" target="_blank" title="https://lbs.amap.com/api/javascript-api-v2/guide/abc/amap-vue" ref="nofollow noopener noreferrer">lbs.amap.com/api/javascrâ€¦</a></p>
<h3 data-id="heading-2">1.2. éœ€è¦å®‰è£…çš„ä¾èµ–</h3>
<pre><code class="hljs language-css" lang="css">npm <span class="hljs-selector-tag">i</span> <span class="hljs-keyword">@amap</span>/amap-jsapi-loader --save
</code></pre>
<h2 data-id="heading-3">2. å¼€å§‹</h2>
<p>é¦–å…ˆæˆ‘ä»¬éœ€è¦ç»™åœ°å›¾è®¾ç½®ä¸€ä¸ªå®¹å™¨ï¼Œå‘½åä¸º<code>container</code></p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"container"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
</code></pre>
<p>è®¾ç½®æ ·å¼</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span>  <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
  <span class="hljs-selector-id">#container</span>{
      <span class="hljs-attribute">padding</span>:<span class="hljs-number">0px</span>;
      <span class="hljs-attribute">margin</span>: <span class="hljs-number">0px</span>;
      <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
      <span class="hljs-attribute">height</span>: <span class="hljs-number">800px</span>;
  }
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
</code></pre>
<h3 data-id="heading-4">2.1. åˆ›å»ºåœ°å›¾ç»„ä»¶</h3>
<p>é¦–å…ˆæˆ‘ä»¬éœ€è¦å»æ‰©å±• window æ¥å£ç±»å‹çš„å®šä¹‰ï¼Œå¦‚æœä¸é…ç½®å°±ä¼šå‡ºç°é”™è¯¯ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2f0385debae646ab83e710854d3b0ac3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pifX-emuw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766978039&amp;x-signature=O8Y5ucWsYVL8ETeID06i8MZzUGk%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/117de5c26e2a46d782e2e04bf551cbcb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pifX-emuw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766978039&amp;x-signature=ymA2M1Ncx6aRcZ%2BWVgVHYCIGpLA%3D" alt="" loading="lazy"/></p>
<p>æ ¸å¿ƒåŸå› ï¼š</p>
<p>TypeScript å¯¹ <code>window</code> çš„ç±»å‹æœ‰ä¸¥æ ¼å®šä¹‰ï¼Œé»˜è®¤çš„ <code>Window</code> æ¥å£é‡Œæ²¡æœ‰ <code>_AMapSecurityConfig</code>ï¼Œæ‰€ä»¥ä¼šæç¤º â€œè¯¥å±æ€§ä¸å­˜åœ¨â€ã€‚ä½†æ˜¯é«˜å¾·åœ°å›¾åˆéœ€è¦è¿™ä¸ªå±æ€§æ¥é…ç½®å®‰å…¨å¯†é’¥ï¼Œæ‰€ä»¥æˆ‘ä»¬å°±éœ€è¦æ¥æ‰©å±•ä¸€ä¸‹ window ç±»å‹ã€‚</p>
<p>é‚£ä¹ˆæˆ‘ä»¬å°±éœ€è¦å…ˆæ¥é…ç½®ä¸€ä¸‹ï¼šæŒ‰ç…§ä»¥ä¸‹è·¯å¾„åˆ›å»º global.d.ts æ–‡ä»¶</p>
<p>src--&gt;types--&gt;global.d.ts</p>
<p>è¿›å…¥æ–‡ä»¶é…ç½®ä»¥ä¸‹å†…å®¹ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">interface</span> <span class="hljs-title">Window</span> {
  _AMapSecurityConfig: {
      securityJsCode: <span class="hljs-built_in">string</span>
  }
}
</code></pre>
<h3 data-id="heading-5">2.2. åˆå§‹åŒ–åœ°å›¾ç»„ä»¶</h3>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"ts"</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span>  {onMounted,onUnmounted} <span class="hljs-keyword">from</span> <span class="hljs-string">"vue"</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">AMapLoader</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'@amap/amap-jsapi-loader'</span>;

<span class="hljs-keyword">let</span> map = <span class="hljs-literal">null</span>;
<span class="hljs-title function_">onMounted</span>(<span class="hljs-function">()=&gt;</span>{
  <span class="hljs-variable language_">window</span>.<span class="hljs-property">_AMapSecurityConfig</span> = {
    <span class="hljs-attr">securityJsCode</span>: <span class="hljs-string">"379c75538f6ae27ee95c983a6feaf358"</span>,
  };
  <span class="hljs-title class_">AMapLoader</span>.<span class="hljs-title function_">load</span>({
    <span class="hljs-attr">key</span>:<span class="hljs-string">"3d0735cef9dc47489452066b7dbe2510"</span>,
    <span class="hljs-attr">version</span>:<span class="hljs-string">"2.0"</span>,
    <span class="hljs-attr">plugins</span>:[<span class="hljs-string">"AMap.scale"</span>]
  })
    .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">AMap</span>)=&gt;</span>{
      map = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AMap</span>.<span class="hljs-title class_">Map</span>(<span class="hljs-string">"container"</span>,{
        <span class="hljs-comment">//è®¾ç½®åœ°å›¾å®¹å™¨çš„Id</span>
        <span class="hljs-attr">viewMode</span>:<span class="hljs-string">"3D"</span>,<span class="hljs-comment">//æ˜¯å¦ä¸º3Dåœ°å›¾æ¨¡å¼</span>
        <span class="hljs-attr">zoom</span>:<span class="hljs-number">11</span>,<span class="hljs-comment">//åˆå§‹åŒ–åœ°å›¾çº§åˆ«</span>
        <span class="hljs-attr">center</span>:[<span class="hljs-number">116.397428</span>, <span class="hljs-number">39.90923</span>]
      })
    })
    .<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">e</span>)=&gt;</span>{
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(e)
    })
})
<span class="hljs-title function_">onUnmounted</span>(<span class="hljs-function">()=&gt;</span>{
  map?.<span class="hljs-title function_">destroy</span>();
})
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<h2 data-id="heading-6">3. è·¯çº¿è§„åˆ’</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Flbs.amap.com%2Fdemo%2Fjavascript-api-v2%2Fexample%2Fdriving-route%2Fplan-route-according-to-lnglat" target="_blank" title="https://lbs.amap.com/demo/javascript-api-v2/example/driving-route/plan-route-according-to-lnglat" ref="nofollow noopener noreferrer">lbs.amap.com/demo/javascâ€¦</a></p>
<p>é€šè¿‡æ•°æ®å¤„ç†å‡ºèµ·å§‹ç‚¹å’Œé€”å¾„ç‚¹çš„åæ ‡ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">const <span class="hljs-attr">logisticsInfo</span> = [
  {
    <span class="hljs-string">"latitude"</span>: <span class="hljs-string">"23.129152403638752"</span>,
    <span class="hljs-string">"longitude"</span>: <span class="hljs-string">"113.42775362698366"</span>
  },
  {
    <span class="hljs-string">"latitude"</span>: <span class="hljs-string">"30.454012"</span>,
    <span class="hljs-string">"longitude"</span>: <span class="hljs-string">"114.42659"</span>
  },
  {
    <span class="hljs-string">"latitude"</span>: <span class="hljs-string">"31.93182"</span>,
    <span class="hljs-string">"longitude"</span>: <span class="hljs-string">"118.633415"</span>
  },
  {
    <span class="hljs-string">"latitude"</span>: <span class="hljs-string">"31.035032"</span>,
    <span class="hljs-string">"longitude"</span>: <span class="hljs-string">"121.611504"</span>
  }
]
</code></pre>

<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">// ç‰©æµè½¨è¿¹çš„èµ·å§‹ç‚¹</span>
  <span class="hljs-type">const</span> start = logisticsInfo.<span class="hljs-built_in">shift</span>()<span class="hljs-comment">//èµ·ç‚¹</span>
  <span class="hljs-type">const</span> end = logisticsInfo.<span class="hljs-built_in">pop</span>()<span class="hljs-comment">//ç»ˆç‚¹</span>
  <span class="hljs-type">const</span> ways = logisticsInfo.<span class="hljs-built_in">map</span>(item =&gt; [item.longitude, item.latitude])<span class="hljs-comment">//é€”å¾„ç‚¹æ•°ç»„</span>
</code></pre>

<pre><code class="hljs language-arduino" lang="arduino">AMap.<span class="hljs-built_in">plugin</span>(<span class="hljs-string">'AMap.Driving'</span>, () =&gt; {
  <span class="hljs-comment">//æ„é€ è·¯çº¿å¯¼èˆªç±»</span>
  var driving = <span class="hljs-keyword">new</span> AMap.<span class="hljs-built_in">Driving</span>({
    map: map, <span class="hljs-comment">// æŒ‡å®šç»˜åˆ¶çš„è·¯çº¿è½¨è¿¹æ˜¾ç¤ºåˆ°mapåœ°å›¾</span>
    showTraffic: <span class="hljs-literal">false</span>, <span class="hljs-comment">// å…³é—­å®æ—¶äº¤é€šè·¯å†µ</span>
    hideMarkers: <span class="hljs-literal">false</span> <span class="hljs-comment">// éšè—é»˜è®¤çš„å›¾æ ‡</span>
  });
  <span class="hljs-comment">// æ ¹æ®èµ·ç»ˆç‚¹ç»çº¬åº¦è§„åˆ’é©¾è½¦å¯¼èˆªè·¯çº¿</span>
  driving.<span class="hljs-built_in">search</span>(<span class="hljs-keyword">new</span> AMap.<span class="hljs-built_in">LngLat</span>(start.longitude, start.latitude), <span class="hljs-keyword">new</span> AMap.<span class="hljs-built_in">LngLat</span>(end.longitude, end.latitude), {
    waypoints:ways, <span class="hljs-comment">// é€”ç»ç‚¹è¿™é‡Œæ˜¯ä¸€ä¸ªäºŒç»´æ•°ç»„çš„æ ¼å¼[[ç»åº¦, ç»´åº¦], [ç»åº¦, ç»´åº¦]]</span>
  },<span class="hljs-built_in">function</span> (status: string, result: object) {

    <span class="hljs-keyword">if</span> (status === <span class="hljs-string">'complete'</span>) {
      console.<span class="hljs-built_in">log</span>(<span class="hljs-string">'ç»˜åˆ¶é©¾è½¦è·¯çº¿å®Œæˆ'</span>)
      <span class="hljs-comment">// è°ƒæ•´è§†é‡è¾¾åˆ°æœ€ä½³æ˜¾ç¤ºåŒºåŸŸ</span>
      map.<span class="hljs-built_in">setFitView</span>([ startMarker, endMarker, currentMarker ])
    } <span class="hljs-keyword">else</span> {
      console.<span class="hljs-built_in">log</span>(<span class="hljs-string">'è·å–é©¾è½¦æ•°æ®å¤±è´¥ï¼š'</span> + result)
    }
  })
})
</code></pre>
<h2 data-id="heading-7">4. è‡ªå®šä¹‰å›¾æ ‡</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/de6dc325047142c19f81746b5cb14ba1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pifX-emuw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766978039&amp;x-signature=xhm3Jn3jEWk4eZt2q9BImk%2FzHmQ%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5a63a855fae740b7ae3907546cc372bc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pifX-emuw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766978039&amp;x-signature=%2FFhHSgxw4JKWXH%2Fk7ea3Dv%2BtvCs%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8322b3e6b50a459196d3e85bd56e3b3e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pifX-emuw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766978039&amp;x-signature=CAVa0FgeYxN%2Fw9ERK8m9RarXZPg%3D" alt="" loading="lazy"/></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> startImg <span class="hljs-keyword">from</span> <span class="hljs-string">'../public/start.png'</span>
<span class="hljs-keyword">import</span> endImg <span class="hljs-keyword">from</span> <span class="hljs-string">'../public/end.png'</span>
<span class="hljs-keyword">import</span> carImg <span class="hljs-keyword">from</span> <span class="hljs-string">'../public/car.png'</span>
</code></pre>
<p>è‡ªå®šä¹‰å›¾æ ‡éœ€è¦ä½¿ç”¨åˆ° marker ç±»</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">// è‡ªå®šä¹‰å¼€å§‹åæ ‡å›¾ç‰‡</span>
<span class="hljs-type">const</span> startMarker = <span class="hljs-keyword">new</span> AMap.<span class="hljs-built_in">Marker</span>({
  position: [start.longitude, start.latitude], <span class="hljs-comment">// è‡ªå®šä¹‰å›¾æ ‡ä½ç½®</span>
  icon:startImg,
  map: map <span class="hljs-comment">// æŒ‡å®šå›¾æ ‡æ˜¾ç¤ºåœ¨å“ªä¸ªåœ°å›¾å®ä¾‹</span>
})
<span class="hljs-comment">// è‡ªå®šä¹‰ç»ˆç‚¹åæ ‡å›¾ç‰‡</span>
<span class="hljs-type">const</span> endMarker = <span class="hljs-keyword">new</span> AMap.<span class="hljs-built_in">Marker</span>({
  position: [end.longitude, end.latitude],
  icon:endImg,
  map: map
})
<span class="hljs-comment">// è‡ªå®šä¹‰å½“å‰åæ ‡å›¾ç‰‡</span>
<span class="hljs-type">const</span> currentMarker = <span class="hljs-keyword">new</span> AMap.<span class="hljs-built_in">Marker</span>({
  position: [currentLocationInfo.longitude, currentLocationInfo.latitude],
  icon:carImg,
  map: map
})
</code></pre>
<h2 data-id="heading-8">5. å®Œæ•´ä»£ç å®ç°</h2>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>åœ°å›¾ç»„ä»¶<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"container"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"width:100%; height: 500px;"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"ts"</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { onMounted } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">AMapLoader</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'@amap/amap-jsapi-loader'</span>
<span class="hljs-keyword">import</span> startImg <span class="hljs-keyword">from</span> <span class="hljs-string">'../public/start.png'</span>
<span class="hljs-keyword">import</span> endImg <span class="hljs-keyword">from</span> <span class="hljs-string">'../public/end.png'</span>
<span class="hljs-keyword">import</span> carImg <span class="hljs-keyword">from</span> <span class="hljs-string">'../public/car.png'</span>
<span class="hljs-comment">// æ¥å£è¿”å›çš„æ•°æ®</span>
<span class="hljs-keyword">const</span> logisticsInfo = [
  {
    <span class="hljs-string">"latitude"</span>: <span class="hljs-string">"23.129152403638752"</span>,
    <span class="hljs-string">"longitude"</span>: <span class="hljs-string">"113.42775362698366"</span>
  },
  {
    <span class="hljs-string">"latitude"</span>: <span class="hljs-string">"30.454012"</span>,
    <span class="hljs-string">"longitude"</span>: <span class="hljs-string">"114.42659"</span>
  },
  {
    <span class="hljs-string">"latitude"</span>: <span class="hljs-string">"31.93182"</span>,
    <span class="hljs-string">"longitude"</span>: <span class="hljs-string">"118.633415"</span>
  },
  {
    <span class="hljs-string">"latitude"</span>: <span class="hljs-string">"31.035032"</span>,
    <span class="hljs-string">"longitude"</span>: <span class="hljs-string">"121.611504"</span>
  }
]
<span class="hljs-comment">// å½“å‰åæ ‡</span>
<span class="hljs-keyword">const</span> currentLocationInfo = {
  <span class="hljs-attr">latitude</span>: <span class="hljs-string">"31.93182"</span>,
  <span class="hljs-attr">longitude</span>: <span class="hljs-string">"118.633415"</span>
}
<span class="hljs-variable language_">window</span>.<span class="hljs-property">_AMapSecurityConfig</span> = {
  <span class="hljs-attr">securityJsCode</span>: <span class="hljs-string">'2af1e64a8f6b16d6d79bfa8162c46755'</span>
}
<span class="hljs-title function_">onMounted</span>(<span class="hljs-keyword">async</span> () =&gt; {
  <span class="hljs-keyword">const</span> <span class="hljs-title class_">AMap</span> = <span class="hljs-keyword">await</span> <span class="hljs-title class_">AMapLoader</span>.<span class="hljs-title function_">load</span>({
    <span class="hljs-attr">key</span>: <span class="hljs-string">'9ac7a2671565e21bc21aca6df07eb5cb'</span>,
    <span class="hljs-attr">version</span>: <span class="hljs-string">'2.0'</span>
  })
  <span class="hljs-comment">// åœ°å›¾çš„åˆ›å»º</span>
  <span class="hljs-keyword">var</span> map = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AMap</span>.<span class="hljs-title class_">Map</span>(<span class="hljs-string">'container'</span>, {
    <span class="hljs-attr">viewMode</span>: <span class="hljs-string">'2D'</span>, <span class="hljs-comment">// é»˜è®¤ä½¿ç”¨ 2D æ¨¡å¼ï¼Œå¦‚æœå¸Œæœ›ä½¿ç”¨å¸¦æœ‰ä¿¯ä»°è§’çš„ 3D æ¨¡å¼ï¼Œè¯·è®¾ç½® viewMode: '3D'</span>
    <span class="hljs-attr">zoom</span>:<span class="hljs-number">16</span>, <span class="hljs-comment">// åˆå§‹åŒ–åœ°å›¾å±‚çº§</span>
    <span class="hljs-attr">center</span>: [<span class="hljs-number">116.209804</span>,<span class="hljs-number">40.149393</span>], <span class="hljs-comment">// åˆå§‹åŒ–åœ°å›¾ä¸­å¿ƒç‚¹</span>
    <span class="hljs-attr">plugins</span>:[<span class="hljs-string">"AMap.Driving"</span>]
  });


  <span class="hljs-comment">// ç‰©æµè½¨è¿¹çš„èµ·å§‹ç‚¹</span>
  <span class="hljs-keyword">const</span> start = logisticsInfo.<span class="hljs-title function_">shift</span>()
  <span class="hljs-keyword">const</span> end = logisticsInfo.<span class="hljs-title function_">pop</span>()
  <span class="hljs-keyword">const</span> ways = logisticsInfo.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> [item.<span class="hljs-property">longitude</span>, item.<span class="hljs-property">latitude</span>])
  <span class="hljs-comment">// è‡ªå®šä¹‰å¼€å§‹åæ ‡å›¾ç‰‡</span>
  <span class="hljs-keyword">const</span> startMarker = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AMap</span>.<span class="hljs-title class_">Marker</span>({
    <span class="hljs-attr">position</span>: [start.<span class="hljs-property">longitude</span>, start.<span class="hljs-property">latitude</span>], <span class="hljs-comment">// è‡ªå®šä¹‰å›¾æ ‡ä½ç½®</span>
    <span class="hljs-attr">icon</span>:startImg,
    <span class="hljs-attr">map</span>: map <span class="hljs-comment">// æŒ‡å®šå›¾æ ‡æ˜¾ç¤ºåœ¨å“ªä¸ªåœ°å›¾å®ä¾‹</span>
  })
  <span class="hljs-comment">// è‡ªå®šä¹‰ç»ˆç‚¹åæ ‡å›¾ç‰‡</span>
  <span class="hljs-keyword">const</span> endMarker = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AMap</span>.<span class="hljs-title class_">Marker</span>({
    <span class="hljs-attr">position</span>: [end.<span class="hljs-property">longitude</span>, end.<span class="hljs-property">latitude</span>],
    <span class="hljs-attr">icon</span>:endImg,
    <span class="hljs-attr">map</span>: map
  })
<span class="hljs-comment">// è‡ªå®šä¹‰å½“å‰åæ ‡å›¾ç‰‡</span>
  <span class="hljs-keyword">const</span> currentMarker = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AMap</span>.<span class="hljs-title class_">Marker</span>({
    <span class="hljs-attr">position</span>: [currentLocationInfo.<span class="hljs-property">longitude</span>, currentLocationInfo.<span class="hljs-property">latitude</span>],
    <span class="hljs-attr">icon</span>:carImg,
    <span class="hljs-attr">map</span>: map
  })

  <span class="hljs-comment">// ç»˜åˆ¶ç‰©æµè½¨è¿¹</span>
  <span class="hljs-title class_">AMap</span>.<span class="hljs-title function_">plugin</span>(<span class="hljs-string">'AMap.Driving'</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">//æ„é€ è·¯çº¿å¯¼èˆªç±»</span>
    <span class="hljs-keyword">var</span> driving = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AMap</span>.<span class="hljs-title class_">Driving</span>({
      <span class="hljs-attr">map</span>: map, <span class="hljs-comment">// æŒ‡å®šç»˜åˆ¶çš„è·¯çº¿è½¨è¿¹æ˜¾ç¤ºåˆ°mapåœ°å›¾</span>
      <span class="hljs-attr">showTraffic</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">// å…³é—­å®æ—¶äº¤é€šè·¯å†µ</span>
      <span class="hljs-attr">hideMarkers</span>: <span class="hljs-literal">true</span> <span class="hljs-comment">// éšè—é»˜è®¤çš„å›¾æ ‡</span>
    });
    <span class="hljs-comment">// æ ¹æ®èµ·ç»ˆç‚¹ç»çº¬åº¦è§„åˆ’é©¾è½¦å¯¼èˆªè·¯çº¿</span>
    driving.<span class="hljs-title function_">search</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">AMap</span>.<span class="hljs-title class_">LngLat</span>(start.<span class="hljs-property">longitude</span>, start.<span class="hljs-property">latitude</span>), <span class="hljs-keyword">new</span> <span class="hljs-title class_">AMap</span>.<span class="hljs-title class_">LngLat</span>(end.<span class="hljs-property">longitude</span>, end.<span class="hljs-property">latitude</span>), {
      <span class="hljs-attr">waypoints</span>:ways, <span class="hljs-comment">// é€”ç»ç‚¹è¿™é‡Œæ˜¯ä¸€ä¸ªäºŒç»´æ•°ç»„çš„æ ¼å¼[[ç»åº¦, ç»´åº¦], [ç»åº¦, ç»´åº¦]]</span>
    },<span class="hljs-keyword">function</span> (<span class="hljs-params">status: string, result: object</span>) {

      <span class="hljs-keyword">if</span> (status === <span class="hljs-string">'complete'</span>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç»˜åˆ¶é©¾è½¦è·¯çº¿å®Œæˆ'</span>)
        <span class="hljs-comment">// è°ƒæ•´è§†é‡è¾¾åˆ°æœ€ä½³æ˜¾ç¤ºåŒºåŸŸ</span>
        map.<span class="hljs-title function_">setFitView</span>([ startMarker, endMarker, currentMarker ])
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è·å–é©¾è½¦æ•°æ®å¤±è´¥ï¼š'</span> + result)
      }
    })
  })

})
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Lexical å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ç»„ä»¶è¯¦è§£]]></title>    <link>https://juejin.cn/post/7586509410567438377</link>    <guid>https://juejin.cn/post/7586509410567438377</guid>    <pubDate>2025-12-22T03:18:04.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7586509410567438377" data-draft-id="7586136543954354214" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Lexical å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ç»„ä»¶è¯¦è§£"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-22T03:18:04.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç»†å¿ƒç»†å¿ƒå†ç»†å¿ƒ"/> <meta itemprop="url" content="https://juejin.cn/user/721738373803879"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Lexical å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ç»„ä»¶è¯¦è§£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/721738373803879/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç»†å¿ƒç»†å¿ƒå†ç»†å¿ƒ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-22T03:18:04.000Z" title="Mon Dec 22 2025 03:18:04 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">ğŸ“š Lexical ç®€ä»‹</h3>
<p><strong>Lexical</strong>Â æ˜¯ Meta å¼€æºçš„åŸºäº React çš„å¯Œæ–‡æœ¬ç¼–è¾‘å™¨æ¡†æ¶ï¼Œç”¨äºæ›¿ä»£ Draft.jsï¼Œå…·æœ‰æ›´å¥½çš„æ€§èƒ½ã€æ‰©å±•æ€§å’Œç¨³å®šæ€§ã€‚</p>
<h3 data-id="heading-1">ğŸ¯ æ ¸å¿ƒç‰¹æ€§</h3>
<ul>
<li>âœ… é«˜æ€§èƒ½ã€å¯æ‰©å±•</li>
<li>âœ… æ— ä¾èµ–ã€è½»é‡çº§</li>
<li>âœ… å®Œæ•´çš„ TypeScript æ”¯æŒ</li>
<li>âœ… æ’ä»¶åŒ–æ¶æ„</li>
<li>âœ… åµŒå¥—ç¼–è¾‘å™¨æ”¯æŒ</li>
</ul>
<h3 data-id="heading-2">ğŸ”§ åŸºç¡€ç»„ä»¶</h3>
<h4 data-id="heading-3">1.Â <strong>LexicalComposer</strong>Â - ç¼–è¾‘å™¨å®¹å™¨</h4>
<p>jsx</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">LexicalComposer</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@lexical/react/LexicalComposer'</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> initialConfig = {
    <span class="hljs-attr">namespace</span>: <span class="hljs-string">'MyEditor'</span>,
    <span class="hljs-attr">theme</span>: theme,
    <span class="hljs-attr">nodes</span>: [],
    <span class="hljs-attr">onError</span>: <span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(error),
  };

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">LexicalComposer</span> <span class="hljs-attr">initialConfig</span>=<span class="hljs-string">{initialConfig}</span>&gt;</span>
      {/* å…¶ä»–æ’ä»¶ç»„ä»¶ */}
    <span class="hljs-tag">&lt;/<span class="hljs-name">LexicalComposer</span>&gt;</span></span>
  );
}
</code></pre>
<h4 data-id="heading-4">2.Â <strong>RichTextPlugin</strong>Â - å¯Œæ–‡æœ¬æ ¸å¿ƒ</h4>
<p>jsx</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">RichTextPlugin</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@lexical/react/LexicalRichTextPlugin'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ContentEditable</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@lexical/react/LexicalContentEditable'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">HistoryPlugin</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@lexical/react/LexicalHistoryPlugin'</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">Editor</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">RichTextPlugin</span>
        <span class="hljs-attr">contentEditable</span>=<span class="hljs-string">{</span>
          &lt;<span class="hljs-attr">ContentEditable</span>
            <span class="hljs-attr">className</span>=<span class="hljs-string">"editor-input"</span>
            <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span>
              <span class="hljs-attr">minHeight:</span> '<span class="hljs-attr">150px</span>',
              <span class="hljs-attr">border:</span> '<span class="hljs-attr">1px</span> <span class="hljs-attr">solid</span> #<span class="hljs-attr">ccc</span>',
              <span class="hljs-attr">padding:</span> '<span class="hljs-attr">10px</span>',
            }}
          /&gt;</span>
        }
        placeholder={
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"editor-placeholder"</span>&gt;</span>è¾“å…¥å†…å®¹...<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        }
        ErrorBoundary={LexicalErrorBoundary}
      /&gt;
      <span class="hljs-tag">&lt;<span class="hljs-name">HistoryPlugin</span> /&gt;</span>
    <span class="hljs-tag">&lt;/&gt;</span></span>
  );
}
</code></pre>
<h4 data-id="heading-5">3.Â <strong>å®Œæ•´çš„åŸºç¡€ç¼–è¾‘å™¨</strong></h4>
<p>jsx</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> { 
  <span class="hljs-title class_">LexicalComposer</span>, 
  <span class="hljs-title class_">RichTextPlugin</span>,
  <span class="hljs-title class_">ContentEditable</span>,
  <span class="hljs-title class_">HistoryPlugin</span>,
  <span class="hljs-title class_">AutoFocusPlugin</span>
} <span class="hljs-keyword">from</span> <span class="hljs-string">'@lexical/react'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">HeadingNode</span>, <span class="hljs-title class_">QuoteNode</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@lexical/rich-text'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">TableCellNode</span>, <span class="hljs-title class_">TableNode</span>, <span class="hljs-title class_">TableRowNode</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@lexical/table'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ListNode</span>, <span class="hljs-title class_">ListItemNode</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@lexical/list'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">CodeHighlightNode</span>, <span class="hljs-title class_">CodeNode</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@lexical/code'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">AutoLinkNode</span>, <span class="hljs-title class_">LinkNode</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@lexical/link'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-variable constant_">TRANSFORMERS</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@lexical/markdown'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">MarkdownShortcutPlugin</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@lexical/react/LexicalMarkdownShortcutPlugin'</span>;

<span class="hljs-keyword">const</span> theme = {
  <span class="hljs-comment">// è‡ªå®šä¹‰æ ·å¼</span>
  <span class="hljs-attr">text</span>: {
    <span class="hljs-attr">bold</span>: <span class="hljs-string">'editor-text-bold'</span>,
    <span class="hljs-attr">italic</span>: <span class="hljs-string">'editor-text-italic'</span>,
    <span class="hljs-attr">underline</span>: <span class="hljs-string">'editor-text-underline'</span>,
    <span class="hljs-attr">strikethrough</span>: <span class="hljs-string">'editor-text-strikethrough'</span>,
  }
};

<span class="hljs-keyword">const</span> initialConfig = {
  <span class="hljs-attr">namespace</span>: <span class="hljs-string">'MyEditor'</span>,
  theme,
  <span class="hljs-attr">nodes</span>: [
    <span class="hljs-title class_">HeadingNode</span>,
    <span class="hljs-title class_">QuoteNode</span>,
    <span class="hljs-title class_">TableNode</span>,
    <span class="hljs-title class_">TableCellNode</span>,
    <span class="hljs-title class_">TableRowNode</span>,
    <span class="hljs-title class_">ListNode</span>,
    <span class="hljs-title class_">ListItemNode</span>,
    <span class="hljs-title class_">CodeNode</span>,
    <span class="hljs-title class_">CodeHighlightNode</span>,
    <span class="hljs-title class_">AutoLinkNode</span>,
    <span class="hljs-title class_">LinkNode</span>
  ],
  <span class="hljs-attr">onError</span>: <span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(error),
};

<span class="hljs-keyword">function</span> <span class="hljs-title function_">MyEditor</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">LexicalComposer</span> <span class="hljs-attr">initialConfig</span>=<span class="hljs-string">{initialConfig}</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"editor-container"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">RichTextPlugin</span>
          <span class="hljs-attr">contentEditable</span>=<span class="hljs-string">{</span>
            &lt;<span class="hljs-attr">ContentEditable</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"editor-input"</span> /&gt;</span>
          }
          placeholder={
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"editor-placeholder"</span>&gt;</span>å¼€å§‹å†™ä½œ...<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
          }
        /&gt;
        <span class="hljs-tag">&lt;<span class="hljs-name">HistoryPlugin</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">AutoFocusPlugin</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">MarkdownShortcutPlugin</span> <span class="hljs-attr">transformers</span>=<span class="hljs-string">{TRANSFORMERS}</span> /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">LexicalComposer</span>&gt;</span></span>
  );
}
</code></pre>
<h3 data-id="heading-6">ğŸ”Œ å¸¸ç”¨æ’ä»¶ç»„ä»¶</h3>
<h4 data-id="heading-7">1.Â <strong>ToolbarPlugin</strong>Â - å·¥å…·æ ç»„ä»¶</h4>
<p>jsx</p>
<pre><code class="hljs language-ini" lang="ini">import { 
  $getSelection, 
  $isRangeSelection, 
  FORMAT_TEXT_COMMAND 
} from 'lexical'<span class="hljs-comment">;</span>

function ToolbarPlugin() {
  const <span class="hljs-section">[isBold, setIsBold]</span> = useState(false)<span class="hljs-comment">;</span>
  const <span class="hljs-section">[isItalic, setIsItalic]</span> = useState(false)<span class="hljs-comment">;</span>
  const <span class="hljs-attr">editor</span> = useLexicalComposerContext()<span class="hljs-comment">;</span>

  const <span class="hljs-attr">updateToolbar</span> = useCallback(() =&gt; {
    const <span class="hljs-attr">selection</span> = <span class="hljs-variable">$getSelection</span>()<span class="hljs-comment">;</span>
    if ($isRangeSelection(selection)) {
      setIsBold(selection.hasFormat('bold'))<span class="hljs-comment">;</span>
      setIsItalic(selection.hasFormat('italic'))<span class="hljs-comment">;</span>
    }
  }, <span class="hljs-section">[]</span>)<span class="hljs-comment">;</span>

  // ç›‘å¬ç¼–è¾‘å™¨çŠ¶æ€å˜åŒ–
  useEffect(() =&gt; {
    return editor.registerUpdateListener(({ editorState }) =&gt; {
      editorState.read(() =&gt; {
        updateToolbar()<span class="hljs-comment">;</span>
      })<span class="hljs-comment">;</span>
    })<span class="hljs-comment">;</span>
  }, <span class="hljs-section">[editor, updateToolbar]</span>)<span class="hljs-comment">;</span>

  return (
    &lt;div <span class="hljs-attr">className</span>=<span class="hljs-string">"toolbar"</span>&gt;
      &lt;button
        <span class="hljs-attr">className</span>={isBold ? <span class="hljs-string">'active'</span> : <span class="hljs-string">''</span>}
        <span class="hljs-attr">onClick</span>={() =&gt; editor.dispatchCommand(FORMAT_TEXT_COMMAND, <span class="hljs-string">'bold'</span>)}
      &gt;
        åŠ ç²—
      &lt;/button&gt;
      &lt;button
        <span class="hljs-attr">className</span>={isItalic ? <span class="hljs-string">'active'</span> : <span class="hljs-string">''</span>}
        <span class="hljs-attr">onClick</span>={() =&gt; editor.dispatchCommand(FORMAT_TEXT_COMMAND, <span class="hljs-string">'italic'</span>)}
      &gt;
        æ–œä½“
      &lt;/button&gt;
      &lt;button
        <span class="hljs-attr">onClick</span>={() =&gt; editor.dispatchCommand(FORMAT_TEXT_COMMAND, <span class="hljs-string">'underline'</span>)}
      &gt;
        ä¸‹åˆ’çº¿
      &lt;/button&gt;
    &lt;/div&gt;
  )<span class="hljs-comment">;</span>
}
</code></pre>
<h4 data-id="heading-8">2.Â <strong>ImagePlugin</strong>Â - å›¾ç‰‡ä¸Šä¼ </h4>
<p>jsx</p>
<pre><code class="hljs language-ini" lang="ini">import { INSERT_IMAGE_COMMAND } from './ImagePlugin'<span class="hljs-comment">;</span>

function ImagePlugin() {
  const <span class="hljs-section">[editor]</span> = useLexicalComposerContext()<span class="hljs-comment">;</span>

  const <span class="hljs-attr">handleImageUpload</span> = useCallback((files: FileList) =&gt; {
    const <span class="hljs-attr">reader</span> = new FileReader()<span class="hljs-comment">;</span>
    <span class="hljs-attr">reader.onload</span> = function () {
      if (typeof <span class="hljs-attr">reader.result</span> === <span class="hljs-string">'string'</span>) {
        editor.dispatchCommand(INSERT_IMAGE_COMMAND, {
          altText: 'å›¾ç‰‡',
          src: reader.result,
        })<span class="hljs-comment">;</span>
      }
    }<span class="hljs-comment">;</span>
    reader.readAsDataURL(files<span class="hljs-section">[0]</span>)<span class="hljs-comment">;</span>
  }, <span class="hljs-section">[editor]</span>)<span class="hljs-comment">;</span>

  return (
    &lt;input
      <span class="hljs-attr">type</span>=<span class="hljs-string">"file"</span>
      <span class="hljs-attr">accept</span>=<span class="hljs-string">"image/*"</span>
      <span class="hljs-attr">onChange</span>={(e) =&gt; handleImageUpload(e.target.files)}
    /&gt;
  )<span class="hljs-comment">;</span>
}
</code></pre>
<h4 data-id="heading-9">3.Â <strong>LinkPlugin</strong>Â - é“¾æ¥å¤„ç†</h4>
<p>jsx</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">LinkPlugin</span> <span class="hljs-keyword">as</span> <span class="hljs-title class_">LexicalLinkPlugin</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@lexical/react/LexicalLinkPlugin'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">LinkNode</span>, <span class="hljs-variable constant_">TOGGLE_LINK_COMMAND</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@lexical/link'</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">LinkPlugin</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [editor] = <span class="hljs-title function_">useLexicalComposerContext</span>();
  <span class="hljs-keyword">const</span> [isLink, setIsLink] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);

  <span class="hljs-keyword">const</span> insertLink = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">if</span> (!isLink) {
      <span class="hljs-keyword">const</span> url = <span class="hljs-title function_">prompt</span>(<span class="hljs-string">'è¾“å…¥é“¾æ¥åœ°å€:'</span>, <span class="hljs-string">'https://'</span>);
      <span class="hljs-keyword">if</span> (url) {
        editor.<span class="hljs-title function_">dispatchCommand</span>(<span class="hljs-variable constant_">TOGGLE_LINK_COMMAND</span>, url);
      }
    } <span class="hljs-keyword">else</span> {
      editor.<span class="hljs-title function_">dispatchCommand</span>(<span class="hljs-variable constant_">TOGGLE_LINK_COMMAND</span>, <span class="hljs-literal">null</span>);
    }
  }, [editor, isLink]);

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{insertLink}</span>&gt;</span>
        {isLink ? 'å–æ¶ˆé“¾æ¥' : 'æ·»åŠ é“¾æ¥'}
      <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">LexicalLinkPlugin</span> /&gt;</span>
    <span class="hljs-tag">&lt;/&gt;</span></span>
  );
}
</code></pre>
<h3 data-id="heading-10">ğŸ“‹ è‡ªå®šä¹‰èŠ‚ç‚¹ç»„ä»¶</h3>
<h4 data-id="heading-11">1.Â <strong>è‡ªå®šä¹‰èŠ‚ç‚¹å®šä¹‰</strong></h4>
<p>jsx</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// CustomNode.js</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">DecoratorNode</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'lexical'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CustomNode</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">DecoratorNode</span> {
  <span class="hljs-keyword">static</span> <span class="hljs-title function_">getType</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-string">'custom'</span>;
  }

  <span class="hljs-keyword">static</span> <span class="hljs-title function_">clone</span>(<span class="hljs-params">node</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">CustomNode</span>(node.<span class="hljs-property">__key</span>);
  }

  <span class="hljs-title function_">createDOM</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> div = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'div'</span>);
    div.<span class="hljs-property">className</span> = <span class="hljs-string">'custom-node'</span>;
    <span class="hljs-keyword">return</span> div;
  }

  <span class="hljs-title function_">updateDOM</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  }

  <span class="hljs-title function_">decorate</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">CustomComponent</span> <span class="hljs-attr">nodeKey</span>=<span class="hljs-string">{this.__key}</span> /&gt;</span></span>;
  }
}

<span class="hljs-comment">// è‡ªå®šä¹‰ç»„ä»¶</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">CustomComponent</span>(<span class="hljs-params">{ nodeKey }</span>) {
  <span class="hljs-keyword">const</span> [value, setValue] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">'è‡ªå®šä¹‰å†…å®¹'</span>);
  
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"custom-component"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">input</span>
        <span class="hljs-attr">value</span>=<span class="hljs-string">{value}</span>
        <span class="hljs-attr">onChange</span>=<span class="hljs-string">{(e)</span> =&gt;</span> setValue(e.target.value)}
      /&gt;
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}

<span class="hljs-comment">// åœ¨é…ç½®ä¸­æ³¨å†Œ</span>
<span class="hljs-keyword">const</span> initialConfig = {
  <span class="hljs-attr">nodes</span>: [<span class="hljs-title class_">CustomNode</span>, ...å…¶ä»–èŠ‚ç‚¹],
};
</code></pre>
<h4 data-id="heading-12">2.Â <strong>è‡ªå®šä¹‰æ’ä»¶ç¤ºä¾‹</strong></h4>
<p>jsx</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { useLexicalComposerContext } <span class="hljs-keyword">from</span> <span class="hljs-string">'@lexical/react/LexicalComposerContext'</span>;


<span class="hljs-comment">// è‡ªå®šä¹‰é”®ç›˜å¿«æ·é”®æ’ä»¶</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">KeyboardShortcutPlugin</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [editor] = <span class="hljs-title function_">useLexicalComposerContext</span>();

  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleKeyDown</span> = (<span class="hljs-params">event</span>) =&gt; {
      <span class="hljs-comment">// Ctrl + S ä¿å­˜</span>
      <span class="hljs-keyword">if</span> ((event.<span class="hljs-property">ctrlKey</span> || event.<span class="hljs-property">metaKey</span>) &amp;&amp; event.<span class="hljs-property">key</span> === <span class="hljs-string">'s'</span>) {
        event.<span class="hljs-title function_">preventDefault</span>();
        <span class="hljs-comment">// ä¿å­˜é€»è¾‘</span>
        editor.<span class="hljs-title function_">update</span>(<span class="hljs-function">() =&gt;</span> {
          <span class="hljs-keyword">const</span> editorState = editor.<span class="hljs-title function_">getEditorState</span>();
          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ä¿å­˜å†…å®¹:'</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(editorState.<span class="hljs-title function_">toJSON</span>()));
        });
      }
      
      <span class="hljs-comment">// Ctrl + B åŠ ç²—</span>
      <span class="hljs-keyword">if</span> ((event.<span class="hljs-property">ctrlKey</span> || event.<span class="hljs-property">metaKey</span>) &amp;&amp; event.<span class="hljs-property">key</span> === <span class="hljs-string">'b'</span>) {
        event.<span class="hljs-title function_">preventDefault</span>();
        editor.<span class="hljs-title function_">dispatchCommand</span>(<span class="hljs-variable constant_">FORMAT_TEXT_COMMAND</span>, <span class="hljs-string">'bold'</span>);
      }
    };

    <span class="hljs-keyword">return</span> editor.<span class="hljs-title function_">registerRootListener</span>(<span class="hljs-function">(<span class="hljs-params">rootElement</span>) =&gt;</span> {
      <span class="hljs-keyword">if</span> (rootElement) {
        rootElement.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'keydown'</span>, handleKeyDown);
        <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
          rootElement.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'keydown'</span>, handleKeyDown);
        };
      }
    });
  }, [editor]);

  <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
}
</code></pre>
<h2 data-id="heading-13">å®é™…ä½¿ç”¨</h2>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">LexicalComposer</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@lexical/react/LexicalComposer'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">LexicalComposer</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@lexical/react/LexicalComposer'</span>;
<span class="hljs-keyword">import</span> { useLexicalComposerContext } <span class="hljs-keyword">from</span> <span class="hljs-string">'@lexical/react/LexicalComposerContext'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ContentEditable</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@lexical/react/LexicalContentEditable'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">LexicalErrorBoundary</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@lexical/react/LexicalErrorBoundary'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">HistoryPlugin</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@lexical/react/LexicalHistoryPlugin'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">OnChangePlugin</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@lexical/react/LexicalOnChangePlugin'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">RichTextPlugin</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@lexical/react/LexicalRichTextPlugin'</span>;


<span class="hljs-keyword">import</span> { <span class="hljs-title class_">VariableTextNode</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./node'</span>;
<span class="hljs-keyword">import</span> styles <span class="hljs-keyword">from</span> <span class="hljs-string">'./style.module.css'</span>;

  <span class="hljs-keyword">const</span> initialConfig = {
    <span class="hljs-attr">namespace</span>: <span class="hljs-string">'prompt-composer'</span>,
    <span class="hljs-attr">nodes</span>: [<span class="hljs-title class_">VariableTextNode</span>],
    <span class="hljs-attr">onError</span>: <span class="hljs-function">(<span class="hljs-params">error: <span class="hljs-built_in">Error</span></span>) =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(error);
    },
    <span class="hljs-attr">theme</span>: {
      <span class="hljs-attr">paragraph</span>: styles.<span class="hljs-property">editorParagraph</span>,
    },
  };



<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{styles.editorWrapper}</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">LexicalComposer</span> <span class="hljs-attr">initialConfig</span>=<span class="hljs-string">{initialConfig}</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>
      <span class="hljs-attr">className</span>=<span class="hljs-string">{cx(styles.editor,</span> <span class="hljs-attr">readOnly</span> &amp;&amp; <span class="hljs-attr">styles.editorReadonly</span>)}
      <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">height</span>, <span class="hljs-attr">minHeight</span> }}
    &gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">RichTextPlugin</span>
        <span class="hljs-attr">contentEditable</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">ContentEditable</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{styles.contentEditable}</span> /&gt;</span>}
        placeholder={<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{styles.placeholder}</span>&gt;</span>{placeholder || ''}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>}
        ErrorBoundary={LexicalErrorBoundary}
      /&gt;
      <span class="hljs-tag">&lt;<span class="hljs-name">OnChangePlugin</span> <span class="hljs-attr">onChange</span>=<span class="hljs-string">{handleEditorChange}</span> /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">HistoryPlugin</span> /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">VariablePlugin</span> <span class="hljs-attr">variables</span>=<span class="hljs-string">{variables}</span> /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">VariableTransformerPlugin</span> /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">EditorUpdatePlugin</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{value}</span> /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">OnBlurPlugin</span> <span class="hljs-attr">onBlur</span>=<span class="hljs-string">{onBlur}</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">LexicalComposer</span>&gt;</span>
  {!readOnly &amp;&amp; (
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{styles.resizeHandle}</span> <span class="hljs-attr">onMouseDown</span>=<span class="hljs-string">{beginResize}</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{styles.resizeIcon}</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  )}
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
</code></pre>
<pre><code class="hljs language-style.module.css" lang="style.module.css">//æ ·å¼æ–‡ä»¶
.editorParagraph {
  margin: 0;
  position: relative;
}
</code></pre>
<pre><code class="hljs language-node.ts" lang="node.ts">//è‡ªå®šä¹‰èŠ‚ç‚¹
import { TextNode, SerializedTextNode, Spread, NodeKey, $applyNodeReplacement } from 'lexical';

import styles from './style.module.css';

export type SerializedVariableTextNode = Spread&lt;
  {
    variableName: string;
  },
  SerializedTextNode
&gt;;

// Custom Text Node to handle variable highlighting
export class VariableTextNode extends TextNode {
  __variableName: string;

  constructor(text: string, variableName: string, key?: NodeKey) {
    super(text, key);
    this.__variableName = variableName;
  }

  static getType(): string {
    return 'variable-text';
  }

  isSimpleText(): boolean {
    return false;
  }

  // Make this node behave as a single unit - cannot be partially selected or edited
  isTextEntity(): boolean {
    return true;
  }

  static clone(node: VariableTextNode): VariableTextNode {
    return new VariableTextNode(node.getTextContent(), node.__variableName, node.getKey());
  }

  createDOM(config: any): HTMLElement {
    const element = super.createDOM(config);
    element.className = styles.variableToken;
    element.dataset.variable = this.__variableName;
    return element;
  }

  updateDOM(prevNode: VariableTextNode, dom: HTMLElement, config: any): boolean {
    const isUpdated = super.updateDOM(prevNode as any, dom, config);
    if (prevNode.__variableName !== this.__variableName) {
      dom.dataset.variable = this.__variableName;
      return true;
    }
    return isUpdated;
  }

  exportJSON(): SerializedVariableTextNode {
    return {
      ...super.exportJSON(),
      variableName: this.__variableName,
      type: 'variable-text',
    };
  }

  static importJSON(serializedNode: SerializedVariableTextNode): VariableTextNode {
    const node = new VariableTextNode(serializedNode.text, serializedNode.variableName);
    node.setFormat(serializedNode.format);
    node.setDetail(serializedNode.detail);
    node.setMode(serializedNode.mode);
    node.setStyle(serializedNode.style);
    return node;
  }
}

export function $createVariableTextNode(text: string, variableName: string): VariableTextNode {
  return $applyNodeReplacement(new VariableTextNode(text, variableName));
}//åˆ›å»ºå¹¶æ³¨å†Œä¸€ä¸ªVariableTextNodeèŠ‚ç‚¹å®ä¾‹



</code></pre>
<ul>
<li>$applyNodeReplacementçš„ä½œç”¨</li>
</ul>
<pre><code class="hljs language-ts" lang="ts"/></pre>
<p>// è¿™æ˜¯ Lexical çš„å†…éƒ¨å·¥å…·å‡½æ•°
import { $applyNodeReplacement } from 'lexical';</p>
<p>// å®ƒä¸»è¦åšä¸‰ä»¶äº‹ï¼š
function $applyNodeReplacement(newNode) {
// 1. âœ… æ£€æŸ¥èŠ‚ç‚¹æ˜¯å¦å·²å­˜åœ¨ï¼ˆé€šè¿‡ keyï¼‰
// 2. âœ… å¦‚æœå­˜åœ¨ï¼Œè¿”å›å·²å­˜åœ¨çš„èŠ‚ç‚¹ï¼ˆé¿å…é‡å¤ï¼‰
// 3. âœ… å¦‚æœä¸å­˜åœ¨ï¼Œæ³¨å†Œæ–°èŠ‚ç‚¹åˆ°ç¼–è¾‘å™¨çŠ¶æ€
// 4. âœ… ç¡®ä¿èŠ‚ç‚¹åœ¨ç¼–è¾‘å™¨ä¸­è¢«æ­£ç¡®è¿½è¸ª
}</p>
<pre><code class="hljs"/></pre>
<h3 data-id="heading-14">ğŸ“ æ€»ç»“</h3>
<p>Lexical æä¾›äº†ï¼š</p>
<ol>
<li><strong>æ¨¡å—åŒ–æ¶æ„</strong>Â - æŒ‰éœ€åŠ è½½æ’ä»¶</li>
<li><strong>å®Œå…¨æ§åˆ¶</strong>Â - è‡ªå®šä¹‰èŠ‚ç‚¹å’Œå‘½ä»¤</li>
<li><strong>é«˜æ€§èƒ½</strong>Â - åŸºäºä¸å¯å˜æ•°æ®</li>
<li><strong>æ‰©å±•æ€§å¼º</strong>Â - æ”¯æŒå¤æ‚éœ€æ±‚</li>
</ol>
<p>æ¨èä½¿ç”¨æ¨¡å¼ï¼š</p>
<p>jsx</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">LexicalComposer</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">Toolbar</span> /&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">RichTextPlugin</span> /&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">EssentialPlugins</span> /&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">CustomPlugins</span> /&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">UtilityPlugins</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">LexicalComposer</span>&gt;</span>
</code></pre>
<ul>
<li>"@lexical/code": "^0.38.2"</li>
<li>"@lexical/link": "^0.38.2"</li>
<li>"@lexical/list": "^0.38.2"</li>
<li>"@lexical/react": "^0.16.0"</li>
<li>"@lexical/selection": "^0.38.2"</li>
<li>"@lexical/text": "^0.38.2"</li>
<li>"@lexical/utils": "^0.38.2"</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Kuikly å®æˆ˜ï¼šæ‰‹æŠŠæ‰‹æ’¸ä¸€ä¸ªè·¨å¹³å° AI èŠå¤©åŠ©æ‰‹ (ChatDemo)]]></title>    <link>https://juejin.cn/post/7586157459971506228</link>    <guid>https://juejin.cn/post/7586157459971506228</guid>    <pubDate>2025-12-22T02:54:08.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7586157459971506228" data-draft-id="7585888537642270735" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Kuikly å®æˆ˜ï¼šæ‰‹æŠŠæ‰‹æ’¸ä¸€ä¸ªè·¨å¹³å° AI èŠå¤©åŠ©æ‰‹ (ChatDemo)"/> <meta itemprop="keywords" content="Android"/> <meta itemprop="datePublished" content="2025-12-22T02:54:08.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æˆ‘æœ‰ä¸ä¸ç—‡"/> <meta itemprop="url" content="https://juejin.cn/user/4466629837071787"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Kuikly å®æˆ˜ï¼šæ‰‹æŠŠæ‰‹æ’¸ä¸€ä¸ªè·¨å¹³å° AI èŠå¤©åŠ©æ‰‹ (ChatDemo)
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4466629837071787/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æˆ‘æœ‰ä¸ä¸ç—‡
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-22T02:54:08.000Z" title="Mon Dec 22 2025 02:54:08 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    5
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>é¡¹ç›®åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FTencent-TDS%2FKuiklyUI%2Ftree%2Fmain%2Fdemo%2Fsrc%2FcommonMain%2Fkotlin%2Fcom%2Ftencent%2Fkuikly%2Fdemo%2Fpages%2Fcompose%2FchatDemo" target="_blank" title="https://github.com/Tencent-TDS/KuiklyUI/tree/main/demo/src/commonMain/kotlin/com/tencent/kuikly/demo/pages/compose/chatDemo" ref="nofollow noopener noreferrer">GitHub</a></p>
<p>Â </p>
<p>åœ¨è¿™ä¸ª AI å¤§æ¨¡å‹æ»¡å¤©é£çš„æ—¶ä»£ï¼Œè°ä¸æƒ³æ‹¥æœ‰ä¸€ä¸ªå±äºè‡ªå·±çš„ AI åŠ©æ‰‹å‘¢ï¼Ÿä»Šå¤©ï¼Œæˆ‘ä»¬å°±ä»¥ ChatDemo ä¸ºä¾‹ï¼Œçœ‹çœ‹å¦‚ä½•ç”¨ä¸€å¥— Kotlin ä»£ç ï¼Œåœ¨ Androidã€iOS å’Œ HarmonyOS ä¸‰ç«¯ä¸Šé€šè¿‡ Kuikly Compose å®Œç¾å¤åˆ» ChatGPT çš„æµå¼å¯¹è¯ä½“éªŒã€‚</p>
<p>Â </p>
<p>åˆ«è¢« AI çš„é«˜å¤§ä¸Šå“è·‘äº†ï¼Œå…¶å®æ‹†è§£ä¸‹æ¥ï¼Œæ ¸å¿ƒé€»è¾‘å°±åƒæ­ç§¯æœ¨ä¸€æ ·ç®€å•ã€‚å‡†å¤‡å¥½äº†å—ï¼Ÿå‘è½¦ï¼</p>
<p>Â </p>
<h2 data-id="heading-0">é¡µé¢ç»“æ„åˆ†æ</h2>
<p>æ‰“å¼€ <code>ChatDemo.kt</code>ï¼Œæˆ‘ä»¬ä»¿ä½›çœ‹åˆ°äº†ä¸€ä½èº«ææ›¼å¦™çš„â€œç¾å¥³â€â€”â€”å“¦ä¸ï¼Œæ˜¯ä¸€æ®µç»“æ„æ¸…æ™°çš„ä»£ç ã€‚æ•´ä¸ªèŠå¤©é¡µé¢ (<code>ChatScreen</code>) ä¸»è¦ç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼š</p>
<p>Â </p>
<ol>
<li>
<p>é¡¶éƒ¨å¯¼èˆªæ  (NavBar)ï¼šå±•ç¤ºæ ‡é¢˜å’Œè¿”å›æŒ‰é’®ï¼Œé›·æ‰“ä¸åŠ¨çš„â€œå¤©çµç›–â€ã€‚</p>
</li>
<li>
<p>èŠå¤©å†…å®¹åŒº (MessageList)ï¼šæ˜¾ç¤ºå¯¹è¯æµï¼Œè¿™æ˜¯æ ¸å¿ƒçš„â€œèº¯å¹²â€ã€‚</p>
</li>
<li>
<p>åº•éƒ¨è¾“å…¥åŒº (InputArea)ï¼šè¾“å…¥æ¡†å’Œå‘é€æŒ‰é’®ï¼Œè´Ÿè´£äº¤äº’çš„â€œå››è‚¢â€ã€‚</p>
</li>
</ol>
<p>Â </p>
<p>è¿™ç§ç»“æ„åœ¨ Kuikly Compose ä¸­å®ç°èµ·æ¥å¼‚å¸¸æ¸…çˆ½ï¼Œç®€ç›´å°±æ˜¯â€œæ‰€è§å³æ‰€å¾—â€ï¼š</p>
<p>Â </p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// ä¼ªä»£ç ç»“æ„æ¼”ç¤º</span>

Box(modifier = Modifier.fillMaxSize()) {

    Column {

        NavBar() <span class="hljs-comment">// 1. å¤©çµç›–</span>

        ChatList() <span class="hljs-comment">// 2. èº¯å¹²</span>

        InputArea() <span class="hljs-comment">// 3. å››è‚¢</span>
    }
}

</code></pre>
<p>Â </p>
<h2 data-id="heading-1">Kuikly Compose å†™æ³•</h2>
<p>Â </p>
<h3 data-id="heading-2">é¡µé¢å®šä¹‰</h3>
<p>ä¸åŒäºä¹‹å‰çš„ <code>BasePager</code> + DSLï¼ŒCompose é£æ ¼çš„é¡µé¢ç»§æ‰¿è‡ª <code>ComposeContainer</code>ï¼Œé€šè¿‡ <code>setContent</code> å¼€å¯ Compose çš„ä¸–ç•Œï¼š</p>
<p>Â </p>
<pre><code class="hljs language-kotlin" lang="kotlin">
<span class="hljs-meta">@Page(<span class="hljs-string">"ChatDemo"</span>)</span>

<span class="hljs-keyword">internal</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ChatDemo</span> : <span class="hljs-type">ComposeContainer</span>() {

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">willInit</span><span class="hljs-params">()</span></span> {

        <span class="hljs-keyword">super</span>.willInit()

        setContent {

            ChatScreen() <span class="hljs-comment">// è¿›å…¥ Compose çš„å£°æ˜å¼ UI ä¸–ç•Œ</span>

        }
    }
}

</code></pre>
<p>ç®€å•ç²—æš´ï¼Œç›´æ¥å…¥é¢˜ï¼</p>
<p>Â </p>
<h3 data-id="heading-3">ç»„ä»¶ä¸å¸ƒå±€</h3>
<p>Kuikly Compose å®Œç¾å¤åˆ»äº† Jetpack Compose çš„å¼€å‘ä½“éªŒï¼Œè®©ä¹ æƒ¯äº† Android å¼€å‘çš„åŒå­¦ä»¬å€æ„Ÿäº²åˆ‡ã€‚</p>
<p>Â </p>
<h4 data-id="heading-4">1. åˆ—è¡¨ç»„ä»¶ (LazyColumn)</h4>
<p>èŠå¤©è®°å½•æ€ä¹ˆå±•ç¤ºï¼Ÿ<code>LazyColumn</code> ä¹Ÿå°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„ RecyclerView çš„â€œå‡çº§ç‰ˆâ€ã€‚</p>
<p>Â </p>
<pre><code class="hljs language-kotlin" lang="kotlin">
LazyColumn(

    state = listState,

    modifier = Modifier.weight(<span class="hljs-number">1f</span>)

) {

    itemsIndexed(chatList) { index, message -&gt;

        <span class="hljs-comment">// æ ¹æ® index åˆ¤æ–­æ˜¯ç”¨æˆ·è¿˜æ˜¯ AIï¼Œæ¸²æŸ“ä¸åŒçš„æ°”æ³¡</span>

        ChatMessageItem(message, isUser = (index % <span class="hljs-number">2</span> == <span class="hljs-number">0</span>))

    }
}

</code></pre>
<p>çœ‹åˆ°æ²¡ï¼Ÿæ²¡æœ‰ Adapterï¼Œæ²¡æœ‰ ViewHolderï¼Œå°±æ˜¯ä¸€ä¸ªç®€å•çš„ Lambdaï¼Œæ•°æ®é©±åŠ¨ UIï¼Œæ¸…çˆ½ï¼</p>
<p>Â </p>
<h4 data-id="heading-5">2. è¾“å…¥æ¡† (TextField)</h4>
<p>åº•éƒ¨çš„è¾“å…¥æ¡†ä½¿ç”¨äº† <code>TextField</code>ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªäº®ç‚¹â€”â€”é”®ç›˜é¿è®©ã€‚Kuikly è´´å¿ƒåœ°æä¾›äº† <code>keyboardHeightChange</code> ä¿®é¥°ç¬¦ï¼š</p>
<p>Â </p>
<pre><code class="hljs language-kotlin" lang="kotlin">
TextField(

    modifier = Modifier

    .keyboardHeightChange {

        <span class="hljs-comment">// é”®ç›˜å¼¹èµ·æ—¶ï¼Œè‡ªåŠ¨è°ƒæ•´é«˜åº¦ï¼Œé¿å…é®æŒ¡è¾“å…¥æ¡†</span>

        keyboardHeight = it.height
    }

)

</code></pre>
<p>è¿™è¡Œä»£ç ä¸€åŠ ï¼Œé”®ç›˜å¼¹èµ·æ—¶çš„é¡µé¢æŠ–åŠ¨ã€é®æŒ¡é—®é¢˜ç»Ÿç»Ÿä¸è§ï¼Œä¸èˆ¬é¡ºæ»‘ã€‚</p>
<p>Â </p>
<h3 data-id="heading-6">æ ·å¼ä¸ä¿®é¥°ç¬¦ (Modifier)</h3>
<p>åœ¨ Kuikly Compose ä¸­ï¼Œ<code>attr {}</code> å˜æˆäº†æ›´å¼ºå¤§çš„ <code>Modifier</code> é“¾å¼è°ƒç”¨ã€‚æ¯”å¦‚é¦–é¡µé‚£ä¸ªå¥½çœ‹çš„æ¸å˜è‰²å¡ç‰‡ï¼š</p>
<p>Â </p>
<pre><code class="hljs language-kotlin" lang="kotlin">
Box(
    modifier = Modifier

    .clip(RoundedCornerShape(<span class="hljs-number">16.</span>dp)) <span class="hljs-comment">// è£ä¸ªåœ†è§’</span>

    .background(

        <span class="hljs-comment">// æ¥ä¸ªæ¸å˜è‰²</span>

        Brush.horizontalGradient(listOf(box.startColor, box.endColor))
    )
    .clickable { ... } <span class="hljs-comment">// åŠ ä¸ªç‚¹å‡»äº‹ä»¶</span>
)

</code></pre>
<p>è¿™å°±æ˜¯å£°æ˜å¼ UI çš„é­…åŠ›ï¼Œä½ è¦ä»€ä¹ˆæ•ˆæœï¼Œç›´æ¥å¾€ä¸Šâ€œå â€å°±è¡Œäº†ã€‚</p>
<p>Â </p>
<h2 data-id="heading-7">æ ¸å¿ƒé»‘ç§‘æŠ€ï¼šè·¨å¹³å°æµå¼å“åº”</h2>
<p>Â </p>
<p>ç•Œé¢ç”»å¥½äº†ï¼Œæ€ä¹ˆè®© AI â€œåŠ¨â€èµ·æ¥ï¼ŸChatDemo çš„æ ¸å¿ƒåœ¨äºæµå¼å“åº” (SSE)ï¼Œä¹Ÿå°±æ˜¯é‚£ä¸ªé…·ç‚«çš„â€œæ‰“å­—æœºâ€æ•ˆæœã€‚è¿™é‡Œå±•ç¤ºäº† Kuikly å¼ºå¤§çš„è·¨å¹³å°èƒ½åŠ›ã€‚</p>
<p>Â </p>
<h3 data-id="heading-8">Android &amp; iOS (Ktor åç¨‹)</h3>
<p>è¿™ä¸¤å…„å¼Ÿå…³ç³»å¥½ï¼Œç›´æ¥ç”¨ Kotlin åç¨‹é…åˆ Ktor ç½‘ç»œåº“ï¼Œå¤„ç†èµ·æ¥è¡Œäº‘æµæ°´ï¼š</p>
<p>Â </p>
<pre><code class="hljs language-kotlin" lang="kotlin">
<span class="hljs-comment">// ChatDemo.kt</span>

<span class="hljs-keyword">val</span> channel = response.bodyAsChannel()

<span class="hljs-keyword">while</span> (!channel.isClosedForRead) {

    <span class="hljs-keyword">val</span> line = channel.readUTF8Line()

    <span class="hljs-keyword">if</span> (line.startsWith(<span class="hljs-string">"data:"</span>)) {
        <span class="hljs-comment">// æ”¶åˆ°æ•°æ®ï¼Œæ›´æ–° UI</span>
        withContext(Dispatchers.Main) {
            chatList[msgIndex] += delta <span class="hljs-comment">// ç•Œé¢è‡ªåŠ¨åˆ·æ–°</span>
        }
    }
}

</code></pre>
<p>Â </p>
<h3 data-id="heading-9">HarmonyOS (Native Module æ¡¥æ¥)</h3>
<p>é¸¿è’™è¿™ä½æ–°æœ‹å‹ï¼ŒKuikly ä¹Ÿæœ‰å¦™æ‹›ã€‚åœ¨ç¬¬ä¸‰æ–¹ç»„ä»¶Ktorè¿˜æœªå®Œå–„å¯¹é¸¿è’™çš„æ”¯æŒæƒ…å†µä¸‹ï¼ŒKuiklyæä¾›äº†Module æ¡¥æ¥æœºåˆ¶ï¼Œ99% çš„ä»£ç ç”¨ KMP å…±äº«ï¼Œå‰©ä¸‹ 1% æä¸å®šçš„å¹³å°ç‰¹æ€§ï¼Œé€šè¿‡ Module è½»æ¾æ¡¥æ¥åŸç”Ÿèƒ½åŠ›ã€‚é€šè¿‡ <code>OhosStreamRequestModule</code>ï¼Œæˆ‘ä»¬èƒ½è½»æ¾è°ƒç”¨é¸¿è’™åŸç”Ÿçš„ ArkTS èƒ½åŠ›ï¼š</p>
<p>Â </p>
<pre><code class="hljs language-kotlin" lang="kotlin">
<span class="hljs-comment">// OhosStreamRequestModule.kt</span>

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">request</span><span class="hljs-params">(...)</span></span> {

    <span class="hljs-comment">// å‘¼å«é¸¿è’™åŸç”Ÿå±‚ï¼šå¸®æˆ‘å‘ä¸ªè¯·æ±‚ï¼</span>

    toNative(<span class="hljs-literal">true</span>, <span class="hljs-string">"request"</span>, params) { retEvent -&gt;
        <span class="hljs-comment">// åŸç”Ÿå±‚æ”¶åˆ° SSE æ•°æ®ï¼Œå›ä¼ ç»™ Kotlin</span>
        callbackFn.invoke(eventObj)
    }
}

</code></pre>
<p>è¿™å°±æ˜¯ Kuikly çš„å“²å­¦ï¼šèƒ½é€šç”¨çš„é€šç”¨ï¼Œä¸èƒ½é€šç”¨çš„æ¡¥æ¥ã€‚ä¸€å¥—æ¶æ„ï¼Œæå®šæ‰€æœ‰å¹³å°ã€‚</p>
<p>Â </p>
<h2 data-id="heading-10">ç»†èŠ‚æ‰“ç£¨ï¼šMarkdown æ¸²æŸ“</h2>
<p>AI è¿”å›çš„ä»£ç å—ã€åŠ ç²—å­—ä½“æ€ä¹ˆæ˜¾ç¤ºï¼Ÿç›´æ¥å¡è¿› <code>Text</code> è‚¯å®šä¸è¡Œã€‚Kuikly æä¾›äº† <code>Markdown</code> ç»„ä»¶ï¼š</p>
<p>Â </p>
<pre><code class="hljs language-kotlin" lang="kotlin">
Markdown(
    state = markdownState,
    colors = markdownColor(text = Color.Black), <span class="hljs-comment">// å®šåˆ¶é¢œè‰²</span>
    typography = markdownTypography() <span class="hljs-comment">// å®šåˆ¶æ’ç‰ˆ</span>
)

</code></pre>
<p>å®ƒèƒ½å®æ—¶è§£ææµå¼ä¼ è¾“è¿‡æ¥çš„ Markdown æ–‡æœ¬ï¼Œæ¸²æŸ“è¿‡ç¨‹æ¯«æ— é—ªçƒï¼Œç¨³å¦‚è€ç‹—ã€‚</p>
<p>Â </p>
<h2 data-id="heading-11">æ€»ç»“</h2>
<p>é€šè¿‡ Review <code>ChatDemo</code> çš„æºç ï¼Œæˆ‘ä»¬ä¸ä»…å­¦ä¼šäº†å¦‚ä½•ç”»ç•Œé¢ï¼Œæ›´è§£é”äº† AI åº”ç”¨å¼€å‘çš„æ ¸å¿ƒæŠ€èƒ½ï¼š</p>
<p>Â </p>
<ol>
<li>
<p>Compose å†™æ³•ï¼šç”¨ <code>Modifier</code> å’Œå£°æ˜å¼ç»„ä»¶æ„å»º UIï¼Œæ•ˆç‡èµ·é£ã€‚</p>
</li>
<li>
<p>çŠ¶æ€ç®¡ç†ï¼š<code>mutableState</code> è®©æ•°æ®é©±åŠ¨ç•Œé¢æ›´æ–°ï¼Œå‘Šåˆ«ç¹ççš„ <code>setText</code>ã€‚</p>
</li>
<li>
<p>è·¨å¹³å°æ¶æ„ï¼šKtor å¤„ç†æ ‡å‡†å¹³å°ï¼ŒModule æ¡¥æ¥æ–°å…´å¹³å°ï¼ˆé¸¿è’™ï¼‰ï¼Œæ¸¸åˆƒæœ‰ä½™ã€‚</p>
</li>
</ol>
<p>Â </p>
<p>Kuikly å·²ç»æŠŠâ€œåœ°åŸºâ€æ‰“å¥½äº†ï¼Œå‰©ä¸‹çš„å°±çœ‹ä½ ä»¬å¦‚ä½•åœ¨ä¸Šé¢ç›–å‡ºä¸‡ä¸ˆé«˜æ¥¼äº†ï¼ä»Šå¤©çš„ä»£ç  Review å°±åˆ°è¿™é‡Œï¼Œè¿˜ä¸å¿«å» Clone ä¸‹æ¥è·‘ä¸€è·‘ï¼Ÿ</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€vue3ã€‘ + ã€viteã€‘ + ã€rollup-plugin-obfuscatorã€‘æ··æ·†æ‰“åŒ… => æ‰“åŒ…æŠ¥é”™]]></title>    <link>https://juejin.cn/post/7586509410567585833</link>    <guid>https://juejin.cn/post/7586509410567585833</guid>    <pubDate>2025-12-22T03:33:26.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7586509410567585833" data-draft-id="7585751355593703443" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€vue3ã€‘ + ã€viteã€‘ + ã€rollup-plugin-obfuscatorã€‘æ··æ·†æ‰“åŒ… =&gt; æ‰“åŒ…æŠ¥é”™"/> <meta itemprop="keywords" content="å‰ç«¯,Vue.js"/> <meta itemprop="datePublished" content="2025-12-22T03:33:26.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ¢¦æƒ³æ˜¯å‡†ç‚¹ä¸‹ç­"/> <meta itemprop="url" content="https://juejin.cn/user/2192851914196873"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€vue3ã€‘ + ã€viteã€‘ + ã€rollup-plugin-obfuscatorã€‘æ··æ·†æ‰“åŒ… =&gt; æ‰“åŒ…æŠ¥é”™
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2192851914196873/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ¢¦æƒ³æ˜¯å‡†ç‚¹ä¸‹ç­
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-22T03:33:26.000Z" title="Mon Dec 22 2025 03:33:26 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><code>rollup-plugin-obfuscator</code>Â å¯ä»¥åœ¨åŸºäº Vite çš„ Vue 3 é¡¹ç›®ä¸­ä½¿ç”¨ï¼Œå› ä¸º Vite æœ¬èº«å°±æ˜¯åŸºäº Rollup æ„å»ºçš„</p>
<p>npm install --save-dev rollup-plugin-obfuscator javascript-obfuscator</p>
<p>yarn add javascript-obfuscator -D</p>
<pre><code class="hljs language-js" lang="js">
<span class="hljs-keyword">import</span> { defineConfig } <span class="hljs-keyword">from</span> <span class="hljs-string">'vite'</span>
<span class="hljs-keyword">import</span> vue <span class="hljs-keyword">from</span> <span class="hljs-string">'@vitejs/plugin-vue'</span>
<span class="hljs-keyword">import</span> obfuscator <span class="hljs-keyword">from</span> <span class="hljs-string">'rollup-plugin-obfuscator'</span>;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>({
  <span class="hljs-comment">// base: "",</span>
  <span class="hljs-attr">build</span>: {
    <span class="hljs-attr">minify</span>: <span class="hljs-string">'esbuild'</span>, <span class="hljs-comment">// é»˜è®¤</span>
  },
  <span class="hljs-attr">esbuild</span>: {
    <span class="hljs-attr">drop</span>: [<span class="hljs-string">'console'</span>, <span class="hljs-string">'debugger'</span>],<span class="hljs-comment">//æ‰“åŒ…å»é™¤</span>
  },
  <span class="hljs-attr">plugins</span>: [
    <span class="hljs-title function_">vue</span>(),
    <span class="hljs-title function_">obfuscator</span>({
      <span class="hljs-attr">global</span>:<span class="hljs-literal">false</span>,
      <span class="hljs-comment">// optionsé…ç½®é¡¹å®é™…ä¸º javascript-obfuscator é€‰é¡¹ï¼Œå…·ä½“å¯æŸ¥çœ‹https://github.com/javascript-obfuscator/javascript-obfuscator</span>
      <span class="hljs-attr">options</span>: {
        <span class="hljs-attr">compact</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">controlFlowFlattening</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">controlFlowFlatteningThreshold</span>: <span class="hljs-number">0.75</span>,
        <span class="hljs-attr">numbersToExpressions</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">simplify</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">stringArrayShuffle</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">splitStrings</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">splitStringsChunkLength</span>: <span class="hljs-number">10</span>,
        <span class="hljs-attr">rotateUnicodeArray</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">deadCodeInjection</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">deadCodeInjectionThreshold</span>: <span class="hljs-number">0.4</span>,
        <span class="hljs-attr">debugProtection</span>: <span class="hljs-literal">false</span>,
        <span class="hljs-attr">debugProtectionInterval</span>: <span class="hljs-number">2000</span>,
        <span class="hljs-attr">disableConsoleOutput</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">domainLock</span>: [],
        <span class="hljs-attr">identifierNamesGenerator</span>: <span class="hljs-string">"hexadecimal"</span>,
        <span class="hljs-attr">identifiersPrefix</span>: <span class="hljs-string">""</span>,
        <span class="hljs-attr">inputFileName</span>: <span class="hljs-string">""</span>,
        <span class="hljs-attr">log</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">renameGlobals</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">reservedNames</span>: [],
        <span class="hljs-attr">reservedStrings</span>: [],
        <span class="hljs-attr">seed</span>: <span class="hljs-number">0</span>,
        <span class="hljs-attr">selfDefending</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">sourceMap</span>: <span class="hljs-literal">false</span>,
        <span class="hljs-attr">sourceMapBaseUrl</span>: <span class="hljs-string">""</span>,
        <span class="hljs-attr">sourceMapFileName</span>: <span class="hljs-string">""</span>,
        <span class="hljs-attr">sourceMapMode</span>: <span class="hljs-string">"separate"</span>,
        <span class="hljs-attr">stringArray</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">stringArrayEncoding</span>: [<span class="hljs-string">"base64"</span>],
        <span class="hljs-attr">stringArrayThreshold</span>: <span class="hljs-number">0.75</span>,
        <span class="hljs-attr">target</span>: <span class="hljs-string">"browser"</span>,
        <span class="hljs-attr">transformObjectKeys</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">unicodeEscapeSequence</span>: <span class="hljs-literal">true</span>,

        <span class="hljs-attr">domainLockRedirectUrl</span>: <span class="hljs-string">"about:blank"</span>,
        <span class="hljs-attr">forceTransformStrings</span>: [],
        <span class="hljs-attr">identifierNamesCache</span>: <span class="hljs-literal">null</span>,
        <span class="hljs-attr">identifiersDictionary</span>: [],
        <span class="hljs-attr">ignoreImports</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">optionsPreset</span>: <span class="hljs-string">"default"</span>,
        <span class="hljs-attr">renameProperties</span>: <span class="hljs-literal">false</span>,
        <span class="hljs-attr">renamePropertiesMode</span>: <span class="hljs-string">"safe"</span>,
        <span class="hljs-attr">sourceMapSourcesMode</span>: <span class="hljs-string">"sources-content"</span>,
       
        <span class="hljs-attr">stringArrayCallsTransform</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">stringArrayCallsTransformThreshold</span>: <span class="hljs-number">0.5</span>,
       
        <span class="hljs-attr">stringArrayIndexesType</span>: [<span class="hljs-string">"hexadecimal-number"</span>],
        <span class="hljs-attr">stringArrayIndexShift</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">stringArrayRotate</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">stringArrayWrappersCount</span>: <span class="hljs-number">1</span>,
        <span class="hljs-attr">stringArrayWrappersChainedCalls</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">stringArrayWrappersParametersMaxCount</span>: <span class="hljs-number">2</span>,
        <span class="hljs-attr">stringArrayWrappersType</span>: <span class="hljs-string">"variable"</span>,
      }
    })
  ]
})

</code></pre>
<p>æ‰“åŒ…æŠ¥é”™â€¦â€¦</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Android è‡ªå®šä¹‰ View å®æˆ˜ï¼šæ‰“é€ ä¸€ä¸ªè·Ÿéšæ»‘åŠ¨çš„ä¸æ»‘æŒ‡ç¤ºå™¨]]></title>    <link>https://juejin.cn/post/7585751355593834515</link>    <guid>https://juejin.cn/post/7585751355593834515</guid>    <pubDate>2025-12-22T03:33:37.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7585751355593834515" data-draft-id="7586509410567536681" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Android è‡ªå®šä¹‰ View å®æˆ˜ï¼šæ‰“é€ ä¸€ä¸ªè·Ÿéšæ»‘åŠ¨çš„ä¸æ»‘æŒ‡ç¤ºå™¨ "/> <meta itemprop="keywords" content="Android,Kotlin"/> <meta itemprop="datePublished" content="2025-12-22T03:33:37.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å„¿æ­Œå…«ä¸‡é¦–"/> <meta itemprop="url" content="https://juejin.cn/user/3034307822894333"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Android è‡ªå®šä¹‰ View å®æˆ˜ï¼šæ‰“é€ ä¸€ä¸ªè·Ÿéšæ»‘åŠ¨çš„ä¸æ»‘æŒ‡ç¤ºå™¨ 
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3034307822894333/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å„¿æ­Œå…«ä¸‡é¦–
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-22T03:33:37.000Z" title="Mon Dec 22 2025 03:33:37 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ Android å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦ä¸º <code>RecyclerView</code>ã€<code>ViewPager</code> æˆ– <code>HorizontalScrollView</code> æ·»åŠ ä¸€ä¸ªå¯è§†åŒ–çš„æ»šåŠ¨æŒ‡ç¤ºå™¨ã€‚è™½ç„¶ç³»ç»Ÿè‡ªå¸¦çš„ ScrollBar èƒ½æ»¡è¶³åŸºæœ¬éœ€æ±‚ï¼Œä½†å¦‚æœ UI è®¾è®¡è¦æ±‚æŒ‡ç¤ºå™¨æœ‰å›ºå®šçš„å®½åº¦ã€åœ†è§’ä»¥åŠç‰¹å®šçš„é¢œè‰²ï¼Œè‡ªå®šä¹‰ View å¾€å¾€æ˜¯æœ€ä½³é€‰æ‹©ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4a0c083739fd4b53a2c868c8355b1731~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YS_5q2M5YWr5LiH6aaW:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766979217&amp;x-signature=YBCuhfCI3YuEJoPIIuQwPwpfeV8%3D" alt="" loading="lazy"/></p>
<p>æœ¬æ–‡å°†å¸¦ä½ ä½¿ç”¨ Kotlin å®ç°ä¸€ä¸ªè½»é‡çº§ã€é«˜æ€§èƒ½çš„æ°´å¹³æ»‘åŠ¨æŒ‡ç¤ºå™¨ç»„ä»¶ <code>BottomLineView</code>ï¼Œå¹¶è¯¦ç»†è®²è§£å¦‚ä½•é€‚é…ä¸»æµçš„æ»šåŠ¨æ§ä»¶ã€‚</p>
<h2 data-id="heading-0">1. æ ¸å¿ƒç»„ä»¶å®ç°ï¼šBottomLineView</h2>
<p>æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªç»§æ‰¿è‡ª <code>View</code> çš„ç±» <code>BottomLineView</code>ã€‚å®ƒä¸ä¾èµ–å…·ä½“çš„æ»šåŠ¨æ§ä»¶ï¼Œåªæ¥æ”¶<strong>æŒ‡ç¤ºå™¨å®½åº¦</strong>å’Œ<strong>æ»šåŠ¨æ¯”ä¾‹</strong>ä¸¤ä¸ªå‚æ•°ï¼Œå®ç°äº†é«˜åº¦è§£è€¦ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">BottomLineView</span> <span class="hljs-meta">@JvmOverloads</span> <span class="hljs-keyword">constructor</span>(
    context: Context,
    attrs: AttributeSet? = <span class="hljs-literal">null</span>,
    defStyleAttr: <span class="hljs-built_in">Int</span> = <span class="hljs-number">0</span>
) : View(context, attrs, defStyleAttr) {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">lateinit</span> <span class="hljs-keyword">var</span> paintGray: Paint  <span class="hljs-comment">// èƒŒæ™¯çº¿ç”»ç¬”</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">lateinit</span> <span class="hljs-keyword">var</span> paintGreen: Paint <span class="hljs-comment">// æŒ‡ç¤ºå™¨ç”»ç¬”</span>
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> indicatorWidth = <span class="hljs-number">0f</span> <span class="hljs-comment">// æŒ‡ç¤ºå™¨çš„å›ºå®šå®½åº¦</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> currentOffset = <span class="hljs-number">0f</span>  <span class="hljs-comment">// å½“å‰åç§»é‡</span>

    <span class="hljs-keyword">init</span> {
        initPaint()
    }

    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">initPaint</span><span class="hljs-params">()</span></span> {
        <span class="hljs-comment">// èƒŒæ™¯çº¿ï¼šç°è‰²ï¼Œåœ†è§’</span>
        paintGray = Paint().apply {
            color = -<span class="hljs-number">0x333334</span> <span class="hljs-comment">// 0xFFCCCCCC</span>
            strokeCap = Paint.Cap.ROUND
            strokeWidth = <span class="hljs-number">10f</span>
            isAntiAlias = <span class="hljs-literal">true</span>
        }
        <span class="hljs-comment">// æŒ‡ç¤ºå™¨ï¼šç»¿è‰²ï¼Œåœ†è§’</span>
        paintGreen = Paint().apply {
            color = -<span class="hljs-number">0xff0100</span> <span class="hljs-comment">// 0xFF00FF00</span>
            strokeCap = Paint.Cap.ROUND
            strokeWidth = <span class="hljs-number">10f</span>
            isAntiAlias = <span class="hljs-literal">true</span>
        }
    }

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onDraw</span><span class="hljs-params">(canvas: <span class="hljs-type">Canvas</span>)</span></span> {
        <span class="hljs-keyword">super</span>.onDraw(canvas)
        <span class="hljs-keyword">val</span> centerY = height / <span class="hljs-number">2f</span>
        <span class="hljs-keyword">val</span> totalWidth = width.toFloat()

        <span class="hljs-comment">// 1. ç»˜åˆ¶èƒŒæ™¯çº¿</span>
        canvas.drawLine(<span class="hljs-number">0f</span>, centerY, totalWidth, centerY, paintGray)

        <span class="hljs-comment">// 2. ç»˜åˆ¶æŒ‡ç¤ºå™¨ï¼ˆç¡®ä¿ä¸è¶Šç•Œï¼‰</span>
        <span class="hljs-keyword">val</span> start = max(<span class="hljs-number">0f</span>, min(currentOffset, totalWidth - indicatorWidth))
        <span class="hljs-keyword">val</span> end = start + indicatorWidth

        <span class="hljs-keyword">if</span> (indicatorWidth &gt; <span class="hljs-number">0</span>) {
            canvas.drawLine(start, centerY, end, centerY, paintGreen)
        }
    }

    <span class="hljs-comment">/** è®¾ç½®æŒ‡ç¤ºå™¨ç‰©ç†å®½åº¦ */</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">setIndicatorWidth</span><span class="hljs-params">(width: <span class="hljs-type">Float</span>)</span></span> {
        <span class="hljs-keyword">this</span>.indicatorWidth = width
        invalidate()
    }

    <span class="hljs-comment">/** æ›´æ–°æ»šåŠ¨æ¯”ä¾‹ (0.0 ~ 1.0) */</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">updateScrollRatio</span><span class="hljs-params">(ratio: <span class="hljs-type">Float</span>)</span></span> {
        <span class="hljs-keyword">val</span> maxOffset = width - indicatorWidth
        <span class="hljs-keyword">this</span>.currentOffset = maxOffset * ratio
        invalidate()
    }
}
</code></pre>
<h2 data-id="heading-1">2. åœºæ™¯é€‚é…æŒ‡å—</h2>
<p>ä¸‹é¢æ˜¯ä¸‰ç§æœ€å¸¸è§çš„æ»šåŠ¨æ§ä»¶é€‚é…æ–¹æ¡ˆã€‚</p>
<h3 data-id="heading-2">åœºæ™¯ä¸€ï¼šä¸ RecyclerView è”åŠ¨</h3>
<p>è¿™æ˜¯æœ€å¸¸ç”¨çš„åœºæ™¯ã€‚åˆ©ç”¨ <code>computeHorizontalScrollXXX</code> ç³»åˆ—æ–¹æ³•å¯ä»¥ç²¾ç¡®è®¡ç®—æ»šåŠ¨ä½ç½®ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// 1. è®¾ç½®æŒ‡ç¤ºå™¨å®½åº¦</span>
bottomLineView.setIndicatorWidth(<span class="hljs-number">100f</span>)

<span class="hljs-comment">// 2. ç›‘å¬æ»šåŠ¨</span>
recyclerView.addOnScrollListener(<span class="hljs-keyword">object</span> : RecyclerView.OnScrollListener() {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onScrolled</span><span class="hljs-params">(recyclerView: <span class="hljs-type">RecyclerView</span>, dx: <span class="hljs-type">Int</span>, dy: <span class="hljs-type">Int</span>)</span></span> {
        <span class="hljs-comment">// è·å–æ»šåŠ¨å‚æ•°</span>
        <span class="hljs-keyword">val</span> offset = recyclerView.computeHorizontalScrollOffset() <span class="hljs-comment">// å½“å‰åç§»</span>
        <span class="hljs-keyword">val</span> range = recyclerView.computeHorizontalScrollRange()   <span class="hljs-comment">// å†…å®¹æ€»å®½</span>
        <span class="hljs-keyword">val</span> extent = recyclerView.computeHorizontalScrollExtent() <span class="hljs-comment">// å¯è§å®½åº¦</span>
        
        <span class="hljs-comment">// è®¡ç®—æœ€å¤§å¯æ»šåŠ¨è·ç¦»</span>
        <span class="hljs-keyword">val</span> maxScroll = range - extent
        
        <span class="hljs-keyword">if</span> (maxScroll &gt; <span class="hljs-number">0</span>) {
            <span class="hljs-keyword">val</span> ratio = offset.toFloat() / maxScroll
            bottomLineView.updateScrollRatio(ratio)
        }
    }
})
</code></pre>
<h3 data-id="heading-3">åœºæ™¯äºŒï¼šä¸ HorizontalScrollView è”åŠ¨</h3>
<p><code>HorizontalScrollView</code> éœ€è¦ API 23 (Android 6.0) ä»¥ä¸Šæ‰èƒ½é€šè¿‡ <code>setOnScrollChangeListener</code> ç›‘å¬ã€‚å¦‚æœæ˜¯ä½ç‰ˆæœ¬ï¼Œå¯èƒ½éœ€è¦ç»§æ‰¿å¹¶é‡å†™ <code>onScrollChanged</code>ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin">horizontalScrollView.setOnScrollChangeListener { _, scrollX, _, _, _ -&gt;
    <span class="hljs-comment">// 1. è·å–å­ View (å†…å®¹)</span>
    <span class="hljs-keyword">val</span> contentView = horizontalScrollView.getChildAt(<span class="hljs-number">0</span>) ?: <span class="hljs-keyword">return</span><span class="hljs-symbol">@setOnScrollChangeListener</span>
    
    <span class="hljs-comment">// 2. è®¡ç®—æœ€å¤§å¯æ»šåŠ¨è·ç¦» = å†…å®¹å®½åº¦ - å®¹å™¨å®½åº¦</span>
    <span class="hljs-keyword">val</span> maxScroll = contentView.width - horizontalScrollView.width
    
    <span class="hljs-keyword">if</span> (maxScroll &gt; <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">val</span> ratio = scrollX.toFloat() / maxScroll
        bottomLineView.updateScrollRatio(ratio)
    }
}
</code></pre>
<h3 data-id="heading-4">åœºæ™¯ä¸‰ï¼šä¸ ViewPager2 è”åŠ¨</h3>
<p><code>ViewPager2</code> çš„è®¡ç®—é€»è¾‘ç•¥æœ‰ä¸åŒï¼Œå› ä¸ºå®ƒæ˜¯æŒ‰â€œé¡µâ€æ»šåŠ¨çš„ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin">viewPager2.registerOnPageChangeCallback(<span class="hljs-keyword">object</span> : ViewPager2.OnPageChangeCallback() {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onPageScrolled</span><span class="hljs-params">(position: <span class="hljs-type">Int</span>, positionOffset: <span class="hljs-type">Float</span>, positionOffsetPixels: <span class="hljs-type">Int</span>)</span></span> {
        <span class="hljs-keyword">super</span>.onPageScrolled(position, positionOffset, positionOffsetPixels)
        
        <span class="hljs-comment">// å‡è®¾ Adapter ä¸­æœ‰ itemCount</span>
        <span class="hljs-keyword">val</span> itemCount = adapter.itemCount
        
        <span class="hljs-keyword">if</span> (itemCount &gt; <span class="hljs-number">1</span>) {
            <span class="hljs-comment">// è®¡ç®—æ€»è¿›åº¦</span>
            <span class="hljs-comment">// å½“å‰é¡µç´¢å¼• + å½“å‰é¡µåç§»ç™¾åˆ†æ¯”</span>
            <span class="hljs-keyword">val</span> currentProgress = position + positionOffset
            
            <span class="hljs-comment">// æ€»çš„å¯ç§»åŠ¨é¡µæ•° = æ€»é¡µæ•° - 1</span>
            <span class="hljs-keyword">val</span> totalProgress = (itemCount - <span class="hljs-number">1</span>).toFloat()
            
            <span class="hljs-keyword">val</span> ratio = currentProgress / totalProgress
            bottomLineView.updateScrollRatio(ratio)
        }
    }
})
</code></pre>
<h2 data-id="heading-5">3. æ€»ç»“</h2>
<p>é€šè¿‡å°† UI ç»˜åˆ¶é€»è¾‘å°è£…åœ¨ <code>BottomLineView</code> å†…éƒ¨ï¼Œå¹¶å°†çŠ¶æ€æ›´æ–°æŠ½è±¡ä¸º <code>updateScrollRatio(0.0~1.0)</code> æ¥å£ï¼Œæˆ‘ä»¬æˆåŠŸåœ°è®©è¿™ä¸ªæŒ‡ç¤ºå™¨é€‚é…äº† Android æ‰€æœ‰çš„æ°´å¹³æ»šåŠ¨ç»„ä»¶ã€‚æ— è®ºåº•å±‚æ˜¯ç”¨ RecyclerView è¿˜æ˜¯ ViewPagerï¼ŒUI å±‚çš„è¡¨ç°éƒ½ä¸€æ ·ä¸æ»‘æµç•…ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[VS codeä¸ºpythonæ–‡ä»¶é…ç½®é»˜è®¤æ¨¡æ¿]]></title>    <link>https://juejin.cn/post/7585948869844942883</link>    <guid>https://juejin.cn/post/7585948869844942883</guid>    <pubDate>2025-12-22T02:53:23.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7585948869844942883" data-draft-id="7585929179319533603" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="VS codeä¸ºpythonæ–‡ä»¶é…ç½®é»˜è®¤æ¨¡æ¿"/> <meta itemprop="keywords" content="Python"/> <meta itemprop="datePublished" content="2025-12-22T02:53:23.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ³¢å…‹å¸ƒæ—çš„çŸ©é˜µ633"/> <meta itemprop="url" content="https://juejin.cn/user/3762989890536400"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            VS codeä¸ºpythonæ–‡ä»¶é…ç½®é»˜è®¤æ¨¡æ¿
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3762989890536400/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ³¢å…‹å¸ƒæ—çš„çŸ©é˜µ633
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-22T02:53:23.000Z" title="Mon Dec 22 2025 02:53:23 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ‰äº›å¤§ä½“ç§¯çš„IDEä¼šæœ‰è‡ªå¸¦å¤´éƒ¨ä¿¡æ¯çš„åŠŸèƒ½ï¼Œ</p>
<p>åˆšå¼€å§‹å­¦pythonçš„æˆ‘ï¼Œä½¿ç”¨çš„æ˜¯VSCodeï¼Œæ²¡æœ‰å‘ç°æœ‰æ’ä»¶å¯ä»¥å®Œæˆï¼ˆä¼¼ä¹æœ‰Cçš„ï¼‰</p>
<p>ä½†æ˜¯ä¹Ÿå¯ä»¥é€šè¿‡åœ¨VSCodeä¸­è‡ªå®šä¹‰User Snippets(ç”¨æˆ·ä»£ç æ®µ)æ¥å®ç°ç±»ä¼¼çš„åŠŸèƒ½</p>
<h2 data-id="heading-0">1 é…ç½®æ–¹æ³•</h2>
<p>æ‰“å¼€VScodeâ€”â€”Fileâ€”â€”Preferenceâ€”â€”Configure Snippets
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2f2d92ceb8a6435b9dd84cc4f77bf2c7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rOi5YWL5biD5p6X55qE55-p6Zi1NjMz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766976802&amp;x-signature=XYmZnjFJKx0isumHyGDpw%2Bmk3JE%3D" alt="image.png" loading="lazy"/></p>
<p>æˆ‘ä¹‹å‰å·²ç»é…ç½®è¿‡äº†ï¼Œæœªé…ç½®è¿‡ï¼Œè¿™é‡Œéœ€è¦æ‰¾åˆ°python.json</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1dd0878e44fc491a8e61fdedc1bb73b4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rOi5YWL5biD5p6X55qE55-p6Zi1NjMz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766976802&amp;x-signature=FcmdhwUF3JzIp9fMKHboYIQbOvs%3D" alt="image.png" loading="lazy"/></p>
<p>åœ¨å¼¹å‡ºçš„python.jsonæ–‡ä»¶ä¸­æ³¨é‡Šæ‰åŸæ¥çš„ï¼ŒåŠ å…¥ä»¥ä¸‹è‡ªå®šä¹‰çš„ä»£ç æ®µï¼Œä¿å­˜é€€å‡º</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"HEADER"</span><span class="hljs-punctuation">:</span><span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"prefix"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"header"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"body"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
        <span class="hljs-comment">// "#!/usr/bin/env python",</span>
        <span class="hljs-string">"# -*- encoding: utf-8 -*-"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-string">"'''"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-string">"@File    :   $TM_FILENAME"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-string">"@Time    :   $CURRENT_YEAR/$CURRENT_MONTH/$CURRENT_DATE $CURRENT_HOUR:$CURRENT_MINUTE:$CURRENT_SECOND"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-string">"@Author  :   Jiahao Chen "</span><span class="hljs-punctuation">,</span>
        <span class="hljs-string">"@Version :   1.0"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-string">"@Contact :  244671870@qq.com"</span><span class="hljs-punctuation">,</span>
        
        <span class="hljs-string">"'''"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-string">""</span><span class="hljs-punctuation">,</span>
        <span class="hljs-string">"# here put the import lib"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-string">"$0"</span>
    <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">}</span>
    
<span class="hljs-punctuation">}</span>
</code></pre>
<h2 data-id="heading-1">2 ä½¿ç”¨æ–¹æ³•</h2>
<p>åœ¨æ–‡æ¡£ä¸­è¾“å…¥headerå°±å¯ä»¥å¤´éƒ¨æ³¨é‡Š äº†</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f2c8cd94bfb746dc8b71ea37d329e416~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rOi5YWL5biD5p6X55qE55-p6Zi1NjMz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766976802&amp;x-signature=ElC8Z9giBx0a1RRKUwdRJqTXov4%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dbb93c72046d4b6daa6235d938b0b922~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rOi5YWL5biD5p6X55qE55-p6Zi1NjMz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766976802&amp;x-signature=qceDbXx7ZOHvoBlE6lQ2Xkzt83g%3D" alt="image.png" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Flutter UI è®¾è®¡åº“è§£è€¦é‡æ„è¿›åº¦ï¼Œå®˜æ–¹è§£ç­”æœªæ¥å¦‚ä½•é€‚é…]]></title>    <link>https://juejin.cn/post/7585751355593850899</link>    <guid>https://juejin.cn/post/7585751355593850899</guid>    <pubDate>2025-12-22T03:34:11.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7585751355593850899" data-draft-id="7585969437032267818" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Flutter UI è®¾è®¡åº“è§£è€¦é‡æ„è¿›åº¦ï¼Œå®˜æ–¹è§£ç­”æœªæ¥å¦‚ä½•é€‚é…"/> <meta itemprop="keywords" content="å‰ç«¯,Flutter,Android"/> <meta itemprop="datePublished" content="2025-12-22T03:34:11.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ‹çŒ«deå°éƒ­"/> <meta itemprop="url" content="https://juejin.cn/user/817692379985752"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Flutter UI è®¾è®¡åº“è§£è€¦é‡æ„è¿›åº¦ï¼Œå®˜æ–¹è§£ç­”æœªæ¥å¦‚ä½•é€‚é…
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/817692379985752/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ‹çŒ«deå°éƒ­
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-22T03:34:11.000Z" title="Mon Dec 22 2025 03:34:11 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ç›®å‰çš„ Flutter æ¶æ„ä¸­ï¼ŒMaterialï¼ˆAndroid ï¼‰å’Œ Cupertinoï¼ˆiOSï¼‰çš„ UI åº“æ˜¯ä¸æ ¸å¿ƒæ¡†æ¶æ†ç»‘åœ¨ä¸€èµ·çš„ï¼Œä¹Ÿå°±æ˜¯å¸¸è§çš„ "batteries included" åŸåˆ™ï¼Œä¸ºçš„æ˜¯æ–¹ä¾¿å¼€å‘è€…å¼€ç®±å³ç”¨ï¼Œä½†æ˜¯ä¹Ÿå¯¼è‡´äº† Widgetsã€Material å’Œ Cupertino è¿™ä¸‰ä¸ª lib ç´§å¯†è€¦åˆã€‚</p>
<p>è€Œä»Šå¹´æå‡ºçš„ decoupling design é‡æ„ï¼Œå°±æ˜¯<strong>è®¡åˆ’å°†è¿™ä¸¤ä¸ªè®¾è®¡åº“ä»æ ¸å¿ƒæ¡†æ¶ä¸­è§£è€¦ï¼Œå¹¶è°ƒæ•´åˆ°ç‹¬ç«‹çš„ Pub åŒ…</strong>ï¼Œä¹Ÿå°±æ˜¯æ ¸å¿ƒæ¡†æ¶å°†åªåŒ…å«åŸºç¡€çš„ <code>Widgets</code> åº“ï¼Œè€Œç‰¹å®šçš„è®¾è®¡é£æ ¼å°†å˜ä¸ºå¯é€‰çš„æ’ä»¶ ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c7f08af96f354221ab52520890f27380~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oGL54yrZGXlsI_pg60=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766979251&amp;x-signature=r95H8TJV7oMzVG70mcSaJ8gnn8M%3D" alt="" loading="lazy"/></p>
<p>ä¹‹æ‰€ä»¥ä¼šæœ‰è¿™ä¸ªè°ƒæ•´ï¼Œæœ€ä¸»è¦è¿˜æ˜¯å› ä¸ºåœ¨æœ€æ–°çš„ Material 3 Expressive å’Œ Liquid Glass é£æ ¼å‘å¸ƒä¹‹åï¼ŒUI åœ¨ Framework å±‚çš„é€‚é…æˆæœ¬å˜é«˜ï¼Œå¹¶ä¸” <strong>Framework çš„æ›´æ–°èŠ‚å¥ä¹Ÿæ— æ³•å¾ˆå¥½é€‚åº”è¿™ç§ UI é£æ ¼è°ƒæ•´</strong>ï¼Œæ‰€ä»¥åœ¨ç¤¾åŒºçš„å‘¼å£°ä¸‹ï¼Œå®˜æ–¹æ­£å¼å¼€å§‹äº† decoupling design è®¡åˆ’ã€‚</p>
<p>å®é™…ä¸Šåœ¨ä¹‹å‰ï¼Œå¾ˆå¤šåŸºç¡€ç»„ä»¶å¯¹ç‰¹å®šè®¾è®¡åº“æœ‰ä¸å¿…è¦çš„ä¾èµ–ï¼Œä½ ä»¥ä¸ºæ¡†æ¶çš„ä»£ç ç»“æ„æ˜¯ä¸‹å›¾ A ï¼Œä½†æ˜¯åœ¨å¤šå¹´ç»´æŠ¤åï¼Œç›®å‰å·²ç»æ˜¯ä¸‹å›¾ B çš„æƒ…å†µï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/369d602fb81d4fe1b65e446997de2572~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oGL54yrZGXlsI_pg60=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766979251&amp;x-signature=6qAsbJsdiaILfSsykRKpbhEQOnQ%3D" alt="" loading="lazy"/></p>
<p>å¦å¤–ï¼Œç±»ä¼¼ <code>SelectionArea</code> ç»„ä»¶ï¼Œå®ƒçœ‹èµ·æ¥æ˜¯ä¸€ä¸ªçº¯ Widget çš„åŸºç¡€ç»„ä»¶ï¼Œä½†ä¸ºäº†å®ç°è·¨å¹³å°é€‚é…ï¼Œåº•å±‚å´å¿…é¡»ä¾èµ– Material å’Œ Cupertino åº“ ï¼Œå¦‚æœæ²¡æœ‰ï¼Œä½ å°±ä¼šå‘ç°ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5259133efa5c48faa624e75b8dc5dfa5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oGL54yrZGXlsI_pg60=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766979251&amp;x-signature=npmC5nlW3N6ZY9HEKsRLclLt73Q%3D" alt="" loading="lazy"/></p>
<p>å› ä¸ºåœ¨ä¹‹å‰çš„ "batteries included" åŸåˆ™ï¼Œå®é™…ä¸Šæ§ä»¶å†…éƒ¨ä¼šæ ¹æ®ä½¿ç”¨çš„é£æ ¼æˆ–è€…è¿è¡Œçš„å¹³å°ï¼Œä¸»åŠ¨ä¸ºç”¨æˆ·é‡‡ç”¨å¯¹åº”çš„ä¸»é¢˜é£æ ¼ï¼Œè¿™æ ·çš„è¯å¥½å¤„è‚¯å®šæ˜¯å¼€ç®±å³ç”¨ï¼Œä½†æ˜¯å®é™…ä¸Šç”¨æˆ·å¾ˆå¤šæ—¶å€™å¹¶ä¸ç†è§£è¿™ä¸€ç‚¹ï¼Œå¹¶ä¸”æœ€é‡è¦çš„æ˜¯ï¼š</p>
<blockquote>
<p><strong>ç”±äºè®¾è®¡åº“ä¸æ¡†æ¶å‘å¸ƒå‘¨æœŸç»‘å®šï¼Œæ–°è®¾è®¡çš„è·Ÿè¿›è¶‹åŠ¿ä¼šè®©é€‚åº”é€Ÿåº¦å˜æ…¢å¾ˆå¤šï¼ŒåŒæ—¶ç´§å¯†çš„è€¦åˆä¹Ÿè®© PR å˜å¾—å¤æ‚ï¼Œæ¯æ¬¡è°ƒæ•´é£é™©æ›´é«˜ï¼Œå®¹æ˜“å¼•å‘å›å½’é”™è¯¯</strong> ã€‚</p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0b2278e0a4c947a0a189036864f45187~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oGL54yrZGXlsI_pg60=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766979251&amp;x-signature=4lT3LjEFHBWBGzGN194n4Ek8ni0%3D" alt="" loading="lazy"/></p>
<p>å¦å¤–ï¼Œç°é˜¶æ®µå¼€å‘è€…å¦‚æœæƒ³æ„å»ºé Material/Cupertino çš„è‡ªå®šä¹‰è®¾è®¡ç³»ç»Ÿï¼Œå¾€å¾€ä¸å¾—ä¸ä»å¤´å¼€å§‹ï¼Œå› ä¸ºç°æœ‰çš„åŸºç¡€ç»„ä»¶çš„å®šåˆ¶åŠŸèƒ½å¼€å‘ä¸è¶³ ï¼Œæ‰€ä»¥ decoupling design ä½œä¸ºç°é˜¶æ®µå¿…é¡»ç»å†çš„äº§ç‰©ï¼Œæœ€ç»ˆæä¸Šäº†æ—¥ç¨‹ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f849dc87fb8b4a838b4bb5509b028c2f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oGL54yrZGXlsI_pg60=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766979251&amp;x-signature=YaEXHekZKeZOlUgDuC8Ed3zKvuY%3D" alt="" loading="lazy"/></p>
<p>å½“ç„¶ï¼Œå®é™…ä¸Šè§£è€¦å’Œé‡æ„è®¾è®¡åº“æ˜¯ä¸€ä¸ªéå¸¸å¤§çš„åº•å±‚è°ƒæ•´ï¼Œå…¶ä¸­æ ¸å¿ƒä¸»è¦æ¶‰åŠäº†å››ä¸ªé¢†åŸŸï¼š</p>
<ul>
<li><strong>System UI</strong> ï¼šéœ€è¦é‡æ–°ç•Œå®šè®¾è®¡åº“ä¸å¹³å°ä¹‹é—´çš„ç•Œé™ï¼ˆä¾‹å¦‚æ–‡æœ¬é€‰æ‹©ã€é¡µé¢è¿‡æ¸¡ï¼‰ ï¼Œè¿™ä¸ªæ˜¯æœ€å¤§çš„æˆæœ¬ä¹‹ä¸€</li>
<li><strong>ä»£ç ç»„ç»‡</strong> ï¼šåœ¨åŸºç¡€ <code>Widgets</code> åº“ä¸­åˆ›å»ºæ›´å¤šçš„â€œåŸå§‹ç»„ä»¶æŠ½è±¡â€ (raw widget abstractions)ï¼Œç±»ä¼¼ç°åœ¨çš„ <code>RawRadio</code><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9e79ad1ea8cf4bda87832255ae530e84~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oGL54yrZGXlsI_pg60=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766979251&amp;x-signature=OKahAaQVVHvPFPi6LwM6n9oIfZc%3D" alt="" loading="lazy"/></li>
<li><strong>ä¸»é¢˜</strong>ï¼šè¯„ä¼°å¹¶æ”¹è¿›ä¸»é¢˜ç³»ç»Ÿï¼Œè§£å†³ Material å’Œ Cupertino ä¸»é¢˜ç¼ºä¹å…±åŒ BASE çš„é—®é¢˜ ï¼Œå› ä¸ºä¹‹å‰ Widgets å®Œå…¨æ²¡æœ‰ä¸»é¢˜ä½“ç³»ï¼Œæ‰€ä»¥éœ€è¦è€ƒè™‘æ˜¯å¦å¼•å…¥æ›´é€šç”¨çš„ theme abstraction</li>
<li><strong>åŸºç¡€è®¾æ–½é€‚é…</strong>ï¼šè¿ç§»è¶…è¿‡ 200 ä¸ªæµ‹è¯•ï¼Œå¹¶å°†ç›¸å…³çš„ CI æµç¨‹ä»ä¸»ä»“åº“è¿ç§»å‡ºå» ï¼Œé¿å…äº¤å‰å¯¼å…¥ï¼Œå»ºç«‹ç‹¬ç«‹çš„ CI æµç¨‹ï¼Œè®© PR æ›´ä¾¿æ·è¿‡å®¡</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2dc792c8a50d4f9a90e6478487e2e0e6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oGL54yrZGXlsI_pg60=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766979251&amp;x-signature=nq3LVhvrxJxQD%2BAOWsZUX%2BQw2eU%3D" alt="" loading="lazy"/></p>
<p>è€Œå¯¹äºè§£è€¦å®Œæˆçš„æ˜¯å‡å˜ï¼Œæ•´ä¸ªé¡¹ç›®åˆ†ä¸‰ä¸ªé˜¶æ®µè¿›è¡Œï¼š</p>
<ul>
<li>
<p><strong>é˜¶æ®µä¸€ (2025å¹´12æœˆ)</strong> ï¼š</p>
<ul>
<li>åŸºç¡€è°ƒæ•´ï¼Œå°† Material/Cupertino ä¸­çš„é€šç”¨æ ¸å¿ƒé€»è¾‘ä¸‹æ²‰ç§»åŠ¨åˆ° <code>widgets</code> åº“</li>
<li>æ­å»º Flutter packages ä»“åº“çš„åŸºç¡€æ”¯æŒ</li>
</ul>
</li>
<li>
<p><strong>é˜¶æ®µäºŒ 2026å¹´</strong> ï¼š</p>
<ul>
<li>æ­£å¼è§£è€¦ï¼Œå°†ä»£ç ç§»è‡³æ–°çš„åŒ…ä¸­å¹¶å‘å¸ƒåˆ° Pub</li>
<li>åœ¨ä¸»æ¡†æ¶ä¸­æ ‡è®°æ—§åº“ä¸ºâ€œå·²å¼ƒç”¨â€ (deprecated)</li>
</ul>
</li>
<li>
<p><strong>é˜¶æ®µä¸‰ - 2026å¹´æ™šäº›æ—¶å€™</strong> ï¼š</p>
<ul>
<li>ä»æ ¸å¿ƒæ¡†æ¶ä¸­å½»åº•ç§»é™¤å·²å¼ƒç”¨çš„ Material å’Œ Cupertino åº“</li>
</ul>
</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bb4eda73d66a4a6a84a4bb3385cb4e2f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oGL54yrZGXlsI_pg60=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766979251&amp;x-signature=eYX2ZyzSg4ENvbGcvoTvAC9HAWw%3D" alt="" loading="lazy"/></p>
<blockquote>
<p>ä¹Ÿå°±æ˜¯ï¼Œ2026 å¹´æˆ‘ä»¬å°±å¯ä»¥æ‹¥æœ‰å…¨æ–°çš„ Material 3 Expressive å’Œ Liquid Glass é£æ ¼æ”¯æŒï¼Œå¹¶ä¸”æ˜¯å¯é€‰ package</p>
</blockquote>
<p>å½“ç„¶ï¼Œå¯¹å¼€å‘è€…çš„å½±å“çš„ä½¿ç”¨è‚¯å®šæœ‰å½±å“ï¼Œè¿™ä¸ªå½±å“æœ‰å¥½æœ‰åï¼š</p>
<ul>
<li><strong>ç‰ˆæœ¬ç®¡ç†æ›´çµæ´»</strong>ï¼šè§£è€¦åï¼ŒMaterial å’Œ Cupertino å°†éµå¾ªè¯­ä¹‰åŒ–ç‰ˆæœ¬æ§åˆ¶ï¼Œå¼€å‘è€…å¯ä»¥é”å®šç‰¹å®šç‰ˆæœ¬ï¼Œç‹¬ç«‹äº Flutter æ¡†æ¶çš„å‡çº§èŠ‚å¥ ï¼Œæ›´åŠ æ–¹ä¾¿çµæ´»ï¼Œ<strong>ä¸å¿…è·Ÿç€ Flutter å‡çº§ UI è®¾è®¡</strong></li>
<li><strong>æ›´å®¹æ˜“æ„å»ºè‡ªå®šä¹‰è®¾è®¡</strong>ï¼šé€šè¿‡ä½¿ç”¨åº•å±‚çš„â€œåŸå§‹ç»„ä»¶â€ (raw widgetsï¼Œå¦‚ <code>RawRadio</code>)ï¼Œæ„å»ºå®Œå…¨è‡ªå®šä¹‰çš„ UI ç³»ç»Ÿå°†å˜å¾—æ›´åŠ å®¹æ˜“ï¼Œä¸å†è¢«è¿«åŸºäº Material ç»„ä»¶ä¿®æ”¹</li>
<li><strong>ç ´åæ€§å˜æ›´ (Breaking Changes)</strong> ï¼šè™½ç„¶æœªæ¥ä¼šæä¾›å¿«é€Ÿä¿®å¤å·¥å…· (quick fixes)ï¼Œä½†è§£è€¦è¿‡ç¨‹ä¸å¯é¿å…åœ°ä¼šå¸¦æ¥ä¸€äº›ç ´åæ€§å˜æ›´ ï¼Œè¿™äº›æ˜¯æ˜¯éœ€è¦å¼€å‘è€…è‡ªå·±é€‚é…</li>
<li><strong>è®¾è®¡åº“æ›´æ–°æš‚åœ</strong>ï¼šä¸ºäº†å‡å°‘è¿ç§»éš¾åº¦ï¼Œåœ¨è§£è€¦å®Œæˆå‰ï¼Œ Flutter ä¼šå°†æš‚åœå¼•å…¥æ–°çš„é‡å¤§è®¾è®¡æ›´æ–°ï¼ˆå¦‚ Material 3 Expressive æˆ– Liquid Glassï¼‰ ï¼Œæ‰€ä»¥è¿™ä¸ªéœ€è¦å¼€å‘è€å¿ƒç­‰å¾…</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c3fa99b8f6d842f2acfc7786def5d092~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oGL54yrZGXlsI_pg60=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766979251&amp;x-signature=P7KXXLTGu4fKwzFHOl8%2BkEvYgfs%3D" alt="" loading="lazy"/></p>
<p>å½“ç„¶ï¼Œè§£è€¦ä¹‹åï¼Œ<strong>Framework çš„ UI break change ä¼šè¶Šæ¥è¶Šå°‘ï¼Œè€Œå¼€å‘è€…ä¹Ÿå¯ä»¥é€‰æ‹©è‡ªå·±çš„ style package è¿›è¡Œ lock</strong> ï¼Œæ•´ä½“çµæ´»æ€§å’Œå¯ç”¨åº¦ä¼šæ›´å¥½ã€‚</p>
<p>ä¸è¿‡ï¼Œå¯¹äº Pluginå¼€å‘è€…æ¥è¯´ï¼Œå¯èƒ½ä¼šæœ‰æ›´é«˜çš„é€‚é…æˆæœ¬ï¼Œ<strong>å› ä¸ºéœ€è¦è€ƒè™‘ UI å®ç°é‡Œä½¿ç”¨çš„æ˜¯å“ªä¸ª version çš„ style package ï¼Œä¹Ÿéœ€è¦è€ƒè™‘ä¼šä¸ä¼šç»™ç”¨æˆ·å¸¦æ¥ç‰ˆæœ¬å†²çªç­‰</strong>ï¼Œåœ¨è¿™æ–¹é¢ä¹Ÿè®¸æœªæ¥ä¼šå‡ºç°ç±»ä¼¼ RN çš„ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ff1a70cf4a9347aba175551957b971b1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oGL54yrZGXlsI_pg60=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766979251&amp;x-signature=NLTo0F37w3rKBu1LOuWLfBf4LxI%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-0">æœ€å</h2>
<p>è¿™æ¬¡é‡æ„è™½ç„¶æ˜¯ä¸€é¡¹å·¨å¤§çš„å·¥ç¨‹ï¼Œä½†é•¿è¿œæ¥çœ‹ä¼šè®© Flutter æ¡†æ¶æ›´è€ç”¨ï¼Œä¹Ÿè®©è®¾è®¡åº“çš„è¿­ä»£æ›´è¿…é€Ÿï¼Œå¹¶æ›´å¥½åœ°æ”¯æŒç¬¬ä¸‰æ–¹è®¾è®¡ç”Ÿæ€ç³»ç»Ÿçš„å‘å±• ï¼Œç”šè‡³æœªæ¥ PC å¹³å°çš„ç¬¬ä¸‰æ–¹ UI é£æ ¼ä¹Ÿå¯ä»¥æ›´å¥½é€‚é…ï¼Œè¿™ä¹Ÿå¼•å‡ºå¦ä¸€ä¸ªé—®é¢˜ï¼š</p>
<blockquote>
<p>Compose Multiplatform æ˜¯å¦ä¹Ÿæœ‰ç±»ä¼¼é—®é¢˜ï¼Œæ˜¯å¦ä¹Ÿä¼šè·Ÿè¿›ï¼Ÿæ¯•ç«Ÿ CMP ä¹Ÿæ˜¯ä»¥ Material ä¸ºä¸»ï¼Œä¸è¿‡ç›®å‰çœ‹æ¥ Compose å…ˆå¤©å…·å¤‡åˆ†å±‚é£æ ¼ function ï¼Œæ›´å€¾å‘äºå¹³å°å±‚ UI è‡ªå·±ç‹¬ç«‹å®ç°ï¼Œå®é™…ä¸Šé—®é¢˜ä¼šå°å¾ˆå¤šã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»"äººå·¥å‚¬åŠ"åˆ°"AI è§„åˆ™é©±åŠ¨"ï¼šæˆ‘ä»¬å¦‚ä½•è§£æ”¾æµ‹è¯•å›¢é˜Ÿçš„ç”Ÿäº§åŠ›]]></title>    <link>https://juejin.cn/post/7585969437032349738</link>    <guid>https://juejin.cn/post/7585969437032349738</guid>    <pubDate>2025-12-22T03:41:41.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7585969437032349738" data-draft-id="7586509410567553065" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»&quot;äººå·¥å‚¬åŠ&quot;åˆ°&quot;AI è§„åˆ™é©±åŠ¨&quot;ï¼šæˆ‘ä»¬å¦‚ä½•è§£æ”¾æµ‹è¯•å›¢é˜Ÿçš„ç”Ÿäº§åŠ›"/> <meta itemprop="keywords" content="æµ‹è¯•"/> <meta itemprop="datePublished" content="2025-12-22T03:41:41.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è½¬è½¬æŠ€æœ¯å›¢é˜Ÿ"/> <meta itemprop="url" content="https://juejin.cn/user/606586148237431"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»"äººå·¥å‚¬åŠ"åˆ°"AI è§„åˆ™é©±åŠ¨"ï¼šæˆ‘ä»¬å¦‚ä½•è§£æ”¾æµ‹è¯•å›¢é˜Ÿçš„ç”Ÿäº§åŠ›
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/606586148237431/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è½¬è½¬æŠ€æœ¯å›¢é˜Ÿ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-22T03:41:41.000Z" title="Mon Dec 22 2025 03:41:41 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä»"äººå·¥å‚¬åŠ"åˆ°"AI è§„åˆ™é©±åŠ¨"ï¼šæˆ‘ä»¬å¦‚ä½•è§£æ”¾æµ‹è¯•å›¢é˜Ÿçš„ç”Ÿäº§åŠ›</h2>
<p>å¾ˆå¤šæµ‹è¯•åŒå­¦é™¤äº†æœ¬èŒå·¥ä½œï¼Œè¿˜æ‰¿æ‹…ç€ä¸­å°å‹é¡¹ç›®çš„ç®¡ç†å·¥ä½œï¼Œå´å› æ­¤æˆäº†é¡¹ç›®ä¸­çš„â€œäººå·¥å¾…åŠæ¸…å•â€ã€‚
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2145343fb245464ba1034dd25ab8b93e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2s6L2s5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766979817&amp;x-signature=qVZD5C37p6hR1n2WA4DowsSn75Q%3D" alt="" loading="lazy"/></p>
<p>â€œäººå·¥å¾…åŠâ€ä¾èµ–è®°å¿†çš„æµç¨‹èŠ‚ç‚¹å»æ¨åŠ¨äº‹æƒ…ï¼Œæˆ‘ä»¬å‘ç°ï¼šæµ‹è¯•å›¢é˜ŸçœŸæ­£è¯¥åšçš„æµ‹è¯•å·¥ä½œï¼ˆæ·±åº¦æµ‹è¯•ã€è´¨é‡åˆ†æã€é£é™©æŒ–æ˜ï¼‰ï¼Œæ­£è¢«æµç¨‹ç®¡ç†æ‚„æ‚„å·èµ°ã€‚</p>
<p>äºæ˜¯ï¼Œæˆ‘ä»¬æ‰“é€ äº†è¿™ä¸ª<strong>è¶…è½»é‡çš„é¡¹ç›®ç®¡ç†å·¥å…·</strong>ï¼Œè®©è§„åˆ™åœ¨é¡¹ç›®ç¾¤â€œä¸»åŠ¨è¯´è¯â€ï¼Œå°†â€œ<strong>ä½•æ—¶ã€è°ã€åšä»€ä¹ˆ</strong>â€æ ‡å‡†åŒ–ï¼Œç”±ç¨‹åºæ”¶é›†ä¿¡æ¯ã€æé†’æ¨è¿›ã€‚</p>
<h3 data-id="heading-1">Part 1. ä»â€œæ··ä¹±çš„è®°å¿†ç»éªŒâ€åˆ°â€œåŠ¨æ€çš„å®¢è§‚è§„åˆ™â€</h3>
<p>è®¤è¯†åˆ°â€œä¾èµ–äººå·¥å¾…åŠâ€çš„ç—›ç‚¹åªæ˜¯ç¬¬ä¸€æ­¥ã€‚æ ¸å¿ƒæŒ‘æˆ˜æ˜¯ï¼š<strong>é¡¹ç›®ç®¡ç†æœ¬èº«æ—¢æœ‰å®šå¼åˆæœ‰å˜åŒ–</strong>ã€‚</p>
<ul>
<li>3 äºº 3 å¤©çš„ç´§æ€¥éœ€æ±‚ï¼Œä¸è·¨ç«¯æ—¥å¸¸è¿­ä»£çš„ç®¡ç†å·®å¼‚ï¼Ÿ</li>
<li>å†…éƒ¨åä½œé¡¹ç›®ï¼Œä¸å¤–éƒ¨é¢‘ç¹å¯¹æ¥é¡¹ç›®çš„èŠ‚ç‚¹åŒºåˆ«ï¼Ÿ</li>
</ul>
<p>è¿‡å»ï¼Œå…¨å‡­æµ‹è¯•è´Ÿè´£äººçš„â€œä¸ªäººç»éªŒâ€å¤„ç†ï¼Œå¯èƒ½å‡ºç°çš„ç»“æœï¼š</p>
<ul>
<li>å°å‹é¡¹ç›®è¢«<strong>è¿‡åº¦ç®¡ç†</strong>ï¼Œå¾’å¢è´Ÿæ‹…ï¼›</li>
<li>å¤§å‹é¡¹ç›®åˆ<strong>ç®¡ç†ä¸è¶³</strong>ï¼Œæ¼æ´ç™¾å‡ºã€‚</li>
</ul>
<p>æˆ‘ä»¬æ„è¯†åˆ°ï¼Œé¡¹ç›®ç®¡ç†è§„åˆ™ä¸æ˜¯ç»Ÿä¸€æ¨¡æ¿ï¼Œè€Œæ˜¯èƒ½åº”å¯¹ä¸åŒâ€œé¡¹ç›®å‚æ•°â€çš„<strong>åŠ¨æ€è§„åˆ™ç³»ç»Ÿ</strong>ã€‚</p>
<p>æ­å»ºè¿™å¥—ç³»ç»Ÿï¼Œéœ€å›´ç»•é¡¹ç›®ç®¡ç†æ—¶çš„å…·ä½“é—®é¢˜å±•å¼€ï¼š
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/098dd0bfb3844bf89047eb127571b589~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2s6L2s5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766979817&amp;x-signature=9bqubVZxQfwUiRyRtG69YItsnXo%3D" alt="" loading="lazy"/></p>
<p>æ®æ­¤ï¼Œæˆ‘ä»¬å¾—å‡ºä¸‰ä¸ªè§£é¢˜æ–¹å‘ã€‚</p>
<h4 data-id="heading-2">1ã€æŒ‰é¡¹ç›®è§„æ¨¡ æ§åˆ¶ç®¡ç†ç²’åº¦</h4>

























<table><thead><tr><th>é¡¹ç›®ç±»å‹</th><th>ç®¡ç†ç­–ç•¥</th><th>å…³é”®åŠ¨ä½œ</th></tr></thead><tbody><tr><td><strong>å°å‹éœ€æ±‚</strong></td><td>åŠŸèƒ½ç‹¬ç«‹ï¼Œè¿­ä»£è¦â€œå¿«â€</td><td>åªä¿ç•™ç¡®ä¿è´¨é‡åº•çº¿çš„å…³é”®æ£€æŸ¥ç‚¹</td></tr><tr><td><strong>ä¸­å‹è¿­ä»£</strong></td><td>ä¿è¯é€Ÿåº¦ + å¼ºè°ƒâ€œç¨³â€</td><td>åŠ å…¥æŠ€æœ¯è¯„å®¡ã€è”è°ƒæ—¥ä¼šç­‰èŠ‚ç‚¹ï¼Œç¡®ä¿ä¿¡æ¯åŒæ­¥å’Œé£é™©å‰ç½®</td></tr><tr><td><strong>å¤§å‹é¡¹ç›®</strong></td><td>åœ¨ä¸­å‹åŸºç¡€ä¸Šå¼ºè°ƒâ€œå¯æ§â€ä¸â€œå¯¹é½â€</td><td>å¢åŠ æ¯æ—¥ç«™ä¼šã€ç»†åŒ–è”è°ƒè®¡åˆ’ç­‰</td></tr></tbody></table>
<h4 data-id="heading-3">2ã€ æŒ‰é¡¹ç›®ç±»å‹ åŒºåˆ†å·®å¼‚èŠ‚ç‚¹</h4>
<ul>
<li><strong>å«å®¢æˆ·ç«¯é¡¹ç›®</strong>ï¼šå¢åŠ é›†æµ‹ã€ä¸Šçº¿å‰ç‰©æ–™æ£€æŸ¥ã€å‘ç‰ˆç­‰èŠ‚ç‚¹</li>
<li><strong>æ¶‰å¤–éƒ¨é—¨é¡¹ç›®</strong>ï¼šå¢åŠ éœ€æ±‚ä¸²è®²ã€æŠ€æœ¯æ–¹æ¡ˆä¸²è®²ã€æµ‹è¯•è¾¹ç•Œæ‹‰é½ç­‰èŠ‚ç‚¹</li>
</ul>
<h4 data-id="heading-4">3ã€ å››ä¸ªç»´åº¦å®šè§„åˆ™ æ¸…æ™°å¯è½åœ°</h4>






























<table><thead><tr><th>ç»´åº¦</th><th>å®šä¹‰</th><th>ç¤ºä¾‹ï¼ˆæµ‹è¯•æœŸæ¯æ—¥ç«™ä¼šï¼‰</th></tr></thead><tbody><tr><td><strong>è°</strong></td><td>è´Ÿè´£äºº</td><td>æµ‹è¯•è´Ÿè´£äºº</td></tr><tr><td><strong>ä»€ä¹ˆæ—¶é—´</strong></td><td>è§¦å‘æ¡ä»¶</td><td>æµ‹è¯•æœŸé—´</td></tr><tr><td><strong>å¹²ä»€ä¹ˆäº‹(ä»¥ä»€ä¹ˆæ ‡å‡†)</strong></td><td>å…·ä½“åŠ¨ä½œ</td><td>å›ºå®šæ—¶é—´ç»„ç»‡ç«™ä¼š<br/>ä¼šä¸Šå‘è¨€æ¨¡æ¿ï¼šæ˜¨æ—¥ã€ä»Šæ—¥ã€é£é™©ä¾èµ–<br/>ç«™ä¼šæ§åˆ¶æ—¶é—´</td></tr><tr><td><strong>äº¤ä»˜ä»€ä¹ˆç»“æœ</strong></td><td>äº§å‡ºå†…å®¹</td><td>ç¾¤å†…å‘é€ç«™ä¼šè®°å½•</td></tr></tbody></table>
<blockquote>
<p><strong>äº§å‡ºç»“æœä¸¾ä¾‹ï¼šç«™ä¼šè®°å½•è¦æ±‚</strong></p>
<ul>
<li>æ¸…æ™°é˜æ˜æ•´ä½“è¿›åº¦æ˜¯å¦æ­£å¸¸ï¼Œé£é™©æƒ…å†µï¼ˆé«˜ã€ä¸­ã€ä½ã€æ— ï¼‰</li>
<li>è‹¥ä¸æ­£å¸¸ï¼Œé˜æ˜åŸå› å’Œåº”å¯¹è§£å†³æ–¹æ¡ˆ</li>
<li>Todo äº‹é¡¹éœ€åŒ…å«ï¼šäº‹é¡¹å†…å®¹ã€è·Ÿè¿›äººã€è§£å†³æ—¶é—´</li>
</ul>
</blockquote>
<p>æˆ‘ä»¬æ¨å‡ºä¸€ä»½è¯¦å°½çš„é¡¹ç›®ç®¡ç†è§„èŒƒï¼Œä½†<strong>è½åœ°ä¸å°½äººæ„</strong>ã€‚<br/>
æ¯”å¦‚è¿™ä»½â€œå·®ç‚¹æ„æ€â€çš„ç«™ä¼šè®°å½•ï¼š</p>
<blockquote>
<p><strong>ä¼šè®®å†…å®¹</strong></p>
<ul>
<li>æµ‹è¯• Aï¼šæ˜¨å¤©æµ‹é¦–é¡µï¼Œå¥½å¤š bugï¼Œå›¾ç‰‡åŠ è½½æ…¢ã€æŒ‰é’®ç‚¹ä¸åŠ¨ï¼Œç¯å¢ƒä¹Ÿå¡ã€‚</li>
<li>æµ‹è¯• Bï¼šæ”¯ä»˜æ¨¡å—æµ‹ä¸€åŠï¼Œå¼€å‘æ”¹äº†ä»£ç æ²¡è¯´ï¼Œä¹‹å‰çš„æµ‹è¯•ç™½åšäº†ï¼Œä»Šå¤©å†é‡æ–°æµ‹ã€‚</li>
<li>å¼€å‘ C(ä¸´æ—¶å‚ä¼š)ï¼šA è¯´çš„æŒ‰é’®é—®é¢˜ä¸æ˜¯æˆ‘å†™çš„ï¼Œæ²¡æ³•ä¿®ï¼Œç¯å¢ƒå¡æ˜¯è¿ç»´çš„äº‹ã€‚</li>
<li>å¾…åŠ 1ï¼šé¦–é¡µå›¾ç‰‡åŠ è½½æ…¢ã€æŒ‰é’®å¼‚å¸¸ã€ç¯å¢ƒå¡é¡¿</li>
<li>å¾…åŠ 2ï¼šæ”¯ä»˜æ¨¡å—éœ€é‡æ–°æµ‹è¯•</li>
</ul>
</blockquote>
<p>æ·±åˆ»ä½“ä¼šåˆ°ï¼š<strong>æœ€éš¾çš„ä»æ¥ä¸æ˜¯â€œåˆ¶å®šè§„åˆ™â€ï¼Œè€Œæ˜¯â€œè®©è§„åˆ™æ‰§è¡Œâ€</strong></p>
<p>![](&lt;<a href="https://link.juejin.cn?target=https%3A%2F%2Fpic4.zhuanstatic.com%2Fzhuanzh%2Fd7317dfb-0708-4c7a-accb-3f4d019e3f11.png%23pic_center%3D128x128" target="_blank" title="https://pic4.zhuanstatic.com/zhuanzh/d7317dfb-0708-4c7a-accb-3f4d019e3f11.png#pic_center=128x128" ref="nofollow noopener noreferrer">pic4.zhuanstatic.com/zhuanzh/d73â€¦</a>)</p>
<h3 data-id="heading-5">Part 2. å¦‚ä½•è®©è§„åˆ™æ‹¥æœ‰â€œæ‰§è¡ŒåŠ›â€ï¼Ÿ</h3>
<h4 data-id="heading-6">1ã€æ€è€ƒï¼šä¸ºä½•è½åœ°éš¾ï¼Ÿ</h4>
<p>æˆ‘ä»¬æ„è¯†åˆ°æ‰§è¡Œé—®é¢˜å¯èƒ½å‡ºåœ¨ä¸‰ä¸ªâ€œäººæ€§å¼±ç‚¹â€ä¸è§„åˆ™çš„å†²çªï¼š</p>
<ul>
<li><strong>è®°å¿†è´Ÿæ‹…</strong>ï¼šæµç¨‹èŠ‚ç‚¹å¤šï¼Œæ˜“é—æ¼</li>
<li><strong>æ‰§è¡Œæˆæœ¬</strong>ï¼šå†™çºªè¦ç­‰éœ€é¢å¤–æ€è€ƒæ ¼å¼ï¼Œè¾ƒéº»çƒ¦</li>
<li><strong>ç¼ºå¤±ç›‘ç£</strong>ï¼šæ— å®æ—¶å®¢è§‚æ£€æŸ¥ï¼Œå…¨é è‡ªè§‰</li>
</ul>
<p><strong>æˆ‘ä»¬æ„è¯†åˆ°ï¼š</strong><br/>
é™æ€æ–‡æ¡£éš¾ä»¥è½åœ°ï¼Œè§„åˆ™å¿…é¡»è¿›åŒ–ä¸ºä¸€ä¸ª<strong>åŠ¨æ€çš„ã€èƒ½å¤Ÿä¸»åŠ¨é©±åŠ¨è¡Œä¸ºçš„å·¥å…·</strong>ã€‚</p>
<p>æ ¸å¿ƒé—®é¢˜éšä¹‹è€Œæ¥ï¼š<strong>ä»€ä¹ˆæ ·çš„å·¥å…·ï¼Œæ‰èƒ½çœŸæ­£å…·å¤‡é©±åŠ¨å›¢é˜Ÿéµå®ˆè§„åˆ™çš„â€œåŠ›â€ï¼Ÿ</strong></p>
<p>![](<a href="https://link.juejin.cn?target=https%3A%2F%2Fpic6.zhuanstatic.com%2Fzhuanzh%2Fb48a93f0-b6e0-40db-b6bf-e0c2d54e4ad5.png%23pic_center" target="_blank" title="https://pic6.zhuanstatic.com/zhuanzh/b48a93f0-b6e0-40db-b6bf-e0c2d54e4ad5.png#pic_center" ref="nofollow noopener noreferrer">pic6.zhuanstatic.com/zhuanzh/b48â€¦</a> =128x128)</p>
<h4 data-id="heading-7">2ã€ æ”¹å˜ï¼šèå…¥è€Œéå¯¹æŠ—ï¼Œèµ‹èƒ½è€Œéç›‘æ§</h4>
<p>æ ¸å¿ƒæ€è·¯ï¼š<strong>å¿…é¡»æ·±åº¦èå…¥å¤§å®¶å·²ç»å½¢æˆä¹ æƒ¯çš„ã€æœ€è‡ªç„¶ã€æœ€é«˜é¢‘çš„åä½œåœºæ™¯é‡Œ</strong>ã€‚</p>
<p>åœ¨æˆ‘ä»¬å›¢é˜Ÿï¼Œè¿™ä¸ªåœºæ™¯å°±æ˜¯ <strong>â€œé¡¹ç›®ç¾¤â€</strong>ã€‚å‡ ä¹æ‰€æœ‰çš„é¡¹ç›®åä½œéƒ½å‘ç”Ÿåœ¨è¿™é‡Œï¼š</p>
<ul>
<li><strong>ä¿¡æ¯ä¸­æ¢</strong>ï¼šéœ€æ±‚æ–‡æ¡£ã€æŠ€æœ¯æ–¹æ¡ˆã€æµ‹è¯•ç”¨ä¾‹ã€é¡¹ç›®æ’æœŸç­‰æ ¸å¿ƒèµ„äº§ï¼Œéƒ½ä»¥ç¾¤å…¬å‘Šçš„å½¢å¼æ²‰æ·€</li>
<li><strong>åä½œå¹¿åœº</strong>ï¼šè¯„å®¡é‚€çº¦ã€è¿›åº¦åŒæ­¥ã€é—®é¢˜è®¨è®ºã€å†³ç­–æ‹æ¿ï¼Œæ‰€æœ‰æ²Ÿé€šéƒ½åœ¨ç¾¤èŠä¸­å®æ—¶å‘ç”Ÿ</li>
</ul>
<p>ç ´å±€è·¯å¾„ç”±æ­¤æ˜ç¡®ï¼š
<strong>ä»¥â€œé¡¹ç›®ç¾¤â€ä¸ºåŸºç¡€ï¼Œå°†è§„åˆ™å¼•æ“æ‚„æ— å£°æ¯åœ°ç¼–ç»‡è¿›å»</strong>ã€‚<br/>
æˆ‘ä»¬ä¸å†è¦æ±‚å¤§å®¶â€œçœ‹æ–‡æ¡£â€ï¼Œè€Œæ˜¯è®©è§„åˆ™åœ¨ç¾¤é‡Œâ€œ<strong>ä¸»åŠ¨è¯´è¯</strong>â€ã€â€œ<strong>ä¸»åŠ¨åŠäº‹</strong>â€ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ebcc6ac1ff674559a8aa4ca9e7609bcd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2s6L2s5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766979817&amp;x-signature=Js82m6uRTbng60AGKDlGUwQp6MY%3D" alt="" loading="lazy"/></p>
<h5 data-id="heading-8">1. ä½æˆæœ¬ï¼šç®€å•æ™ºèƒ½äº¤äº’</h5>
<p>å…³é”®ä¿¡æ¯å‘é€è‡³ç¾¤å†…å‘¨çŸ¥æ—¶ï¼Œä»…éœ€å¢åŠ  <strong>@é¡¹ç›®ç®¡ç†åŠ©æ‰‹</strong></p>
<ul>
<li>ç³»ç»Ÿ<strong>è‡ªåŠ¨è¯†åˆ«æ„å›¾ï¼Œå­˜å‚¨</strong>è‡³é¡¹ç›®ç®¡ç†è¡¨æ ¼</li>
<li><strong>å°†æ¥å…¥å’Œä¿¡æ¯åŒæ­¥æˆæœ¬é™åˆ°æœ€ä½</strong></li>
</ul>
<h5 data-id="heading-9">2. èŠ‚ç‚¹æ¨é€ï¼šå˜â€œäººæ‰¾äº‹â€ä¸ºâ€œäº‹æ‰¾äººâ€</h5>
<p>è§„åˆ™å¼•æ“æŒ‰é¡¹ç›®æ’æœŸè‡ªåŠ¨æ¨é€ä¿¡æ¯ï¼š</p>
<ul>
<li><strong>äº‹å‰æé†’</strong>ï¼š<br/>
â€œä¸‹ä¸ªå·¥ä½œæ—¥å°±è¦è¿›å…¥æµ‹è¯•å•¦ï¼Œè¾›è‹¦æµ‹è¯•è´Ÿè´£äºº @xx ç”³è¯·æµ‹è¯•ç¯å¢ƒï¼ŒåŒæ­¥è‡³ç¾¤å†…å¹¶ @é¡¹ç›®ç®¡ç†æœºå™¨äººâ€</li>
<li><strong>è¿‡ç¨‹èµ‹èƒ½</strong>ï¼š<br/>
â€œxxx ç¯å¢ƒæ‰€éƒ¨ç½²åˆ†æ”¯è¦†ç›–ç‡ä¸è¶³ï¼Œè¯·æµ‹è¯•è´Ÿè´£äºº @xx å…³æ³¨â€</li>
<li><strong>ç»“æœæ ¡éªŒ</strong>ï¼š<br/>
â€œä¼šè®®çºªè¦å†…å®¹é£é™©ä¸ºé«˜ï¼Œä½†æ— åŸå› å’Œå¯¹åº”è§£å†³æªæ–½â€<br/>
â€œé¡¹ç›®å·²ä¸Šçº¿ï¼Œä½†å­˜åœ¨æœªå…³é—­ç¼ºé™·ï¼Œè¯·åŠæ—¶å…³æ³¨â€</li>
</ul>
<h3 data-id="heading-10">Part 3. æˆ‘ä»¬æ˜¯å¦‚ä½•å®ç°è½åœ°çš„ï¼Ÿ</h3>
<h4 data-id="heading-11">ä¸‰å±‚æ¡†æ¶</h4>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/23d3b1cc65d549358a5bfe0ffddf2be3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2s6L2s5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766979817&amp;x-signature=l2EzqWj8ln88dRoGchMsI4VH96Y%3D" alt="" loading="lazy"/></p>
<h5 data-id="heading-12">1. äº¤äº’å±‚ï¼šä¼å¾®ç¾¤æœºå™¨äºº</h5>
<ul>
<li><strong>æ™ºèƒ½æœºå™¨äºº</strong>ï¼šæ¥æ”¶ç¾¤å†…æ¶ˆæ¯ï¼Œç†è§£ç”¨æˆ·æ„å›¾</li>
<li><strong>æ™®é€šæœºå™¨äºº</strong>ï¼šè´Ÿè´£å®šæ—¶æ¶ˆæ¯æ¨é€</li>
</ul>
<h5 data-id="heading-13">2. ä¸­é—´å±‚ï¼šè½¬æ¢å±‚</h5>
<ul>
<li>å°†æ™ºèƒ½æœºå™¨äººæ¥æ”¶åˆ°çš„æ¶ˆæ¯ä¼ é€’ç»™ Coze</li>
<li>å°è£…ä»£ç é€»è¾‘ä¾› Coze è°ƒç”¨ï¼Œå®ç°ç¾¤æ¨é€ç­‰åŠŸèƒ½</li>
</ul>
<h5 data-id="heading-14">3. æ‰§è¡Œå±‚ï¼šåŸºäº Coze æ­å»ºçš„è‡ªåŠ¨åŒ–æµç¨‹</h5>
<ul>
<li>
<p><strong>æ¥æ”¶ç”¨æˆ·æ¶ˆæ¯</strong></p>
<ul>
<li>ä½¿ç”¨å¤§æ¨¡å‹è¯†åˆ«æ„å›¾ã€æå–å…³é”®ä¿¡æ¯</li>
<li>è¯„ä¼°è¾“å…¥æ˜¯å¦ç¬¦åˆè¦æ±‚</li>
<li>æ›´æ–°è‡³é¡¹ç›®ç®¡ç†è¡¨æ ¼</li>
</ul>
</li>
<li>
<p><strong>å®šæ—¶æ¨é€</strong></p>
<ul>
<li>è®¾ç½®è§¦å‘å™¨å®šæ—¶æ‰§è¡Œ</li>
<li>æ ¹æ®é¡¹ç›®ç®¡ç†è¡¨ + å½“å‰æ—¥æœŸ â†’ åˆ¤æ–­èŠ‚ç‚¹ â†’ æ¨é€ä¿¡æ¯</li>
</ul>
</li>
<li>
<p><strong>é€šç”¨èƒ½åŠ›</strong></p>
<ul>
<li>è¦†ç›–ç‡è·å–ã€é™æ€æ‰«æç»“æœè·å–ç­‰</li>
</ul>
</li>
<li>
<p><strong>è‡ªå®šä¹‰ Coze æ’ä»¶</strong></p>
<ul>
<li>é£ä¹¦å®˜æ–¹æ’ä»¶ä¸èƒ½å®ç°æœŸæœ›åŠŸèƒ½ â†’ å¼€å‘é£ä¹¦æ’ä»¶å¹¶ä¸Šæ¶å•†åº—ï¼ˆå¤åˆ¶å·¥ä½œè¡¨ã€Sheet é¡µã€è¿½åŠ æ•°æ®ï¼‰
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/504f77c97b4240319dbb883329ab7479~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2s6L2s5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766979817&amp;x-signature=%2FmctEiEdl%2BsvjisjZFKMfFBIm0U%3D" alt="" loading="lazy"/></li>
</ul>
</li>
</ul>
<h4 data-id="heading-15">ç®€å•æ¶æ„å›¾</h4>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b7ec97a6f51c4db0ba6daf403b69ff14~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2s6L2s5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766979817&amp;x-signature=M9Lhyb6TXyKDlZLfyDSl8fHUHBE%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-16">æ ¸å¿ƒæ•°æ®è¡¨æ ¼</h4>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/25bf6d8d47984c5397d884456a28f517~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2s6L2s5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766979817&amp;x-signature=hTuGVvlI8JpBFiWcjtYCtptmw7I%3D" alt="" loading="lazy"/></p>

















<table><thead><tr><th>è¡¨å</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td><strong>é¡¹ç›®æ€»è§ˆè¡¨</strong></td><td>æ¥å…¥è¡¨ï¼Œè®°å½•é¡¹ç›®å…³é”®ä¿¡æ¯ï¼š<br/>ç¾¤èŠ IDã€é¡¹ç›®åç§°ã€é¡¹ç›®ç®¡ç†è¡¨æ ¼ï¼ˆè‡ªåŠ¨åˆ›å»ºï¼‰ã€TAPD åœ°å€ã€ç¾¤æ¶ˆæ¯æœºå™¨äºº</td></tr><tr><td><strong>é¡¹ç›®ç®¡ç†è¡¨</strong></td><td>åŸºäº PART1 æ²‰æ·€çš„è§„åˆ™ï¼Œè®°å½•é¡¹ç›®å…³é”®èŠ‚ç‚¹ä¸çŠ¶æ€</td></tr></tbody></table>
<h4 data-id="heading-17">å…·ä½“åŠŸèƒ½è¯´æ˜</h4>
<ol>
<li><strong>è‡ªåŠ¨æ¥å…¥</strong>ï¼šåŸºäºç¾¤å†…æ ‡å‡†åŒ–è¾“å…¥ï¼Œè‡ªåŠ¨å†™å…¥æ€»è§ˆè¡¨</li>
<li><strong>è‡ªåŠ¨æ›´æ–°</strong>ï¼šç”¨æˆ·ä¸»åŠ¨æ¨é€ä¿¡æ¯ â†’ è‡ªåŠ¨æ›´æ–°é¡¹ç›®ç®¡ç†è¡¨ï¼Œæ— éœ€é¢å¤–ç»´æŠ¤</li>
<li><strong>å®šæ—¶æé†’</strong>ï¼šéœ€æ‰§è¡ŒåŠ¨ä½œ/å…³æ³¨å†…å®¹ â†’ è‡ªåŠ¨ @ å…·ä½“äººå‘˜</li>
<li><strong>å·¥å…·èµ‹èƒ½</strong>ï¼šè”åŠ¨ TAPDã€å…¬å¸å¹³å°ï¼Œé€šè¿‡æ¥å£è·å–èŠ‚ç‚¹ä¿¡æ¯ â†’ Coze å¤„ç† â†’ æ¨é€</li>
<li><strong>è‡ªåŠ¨é—­ç¯</strong>ï¼šä¸Šçº¿åæŒç»­è·Ÿè¿› TAPD çŠ¶æ€å’Œ Bug æƒ…å†µ â†’ å…¨éƒ¨å¤„ç†å â†’ è‡ªåŠ¨æ ‡è®°ä¸ºâ€œå·²ä¸Šçº¿â€</li>
</ol>
<h4 data-id="heading-18">è½åœ°æ•ˆæœç¤ºä¾‹</h4>
<blockquote>
<hr/>
<ul>
<li>âœ… è¾“å…¥ä¿¡æ¯è‡ªåŠ¨æ¥å…¥
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e26c7aada0d64214b79f9b30d5a2dc01~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2s6L2s5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766979817&amp;x-signature=i47%2BnfkXRfHI2kpPt99BMzuM0QE%3D" alt="" loading="lazy"/></li>
</ul>
<hr/>
<ul>
<li>âœ… æµ‹è¯•è¿›åº¦ä¸ŠæŠ¥æ ¡éªŒ + Bug æƒ…å†µæ€»ç»“
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a7376f7d936c4871982db4f5e2081bde~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2s6L2s5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766979817&amp;x-signature=MpNZqiiWWf6evi9J4vUPUAVzDZE%3D" alt="" loading="lazy"/></li>
</ul>
<hr/>
<ul>
<li>âœ… åˆ†æ”¯è¦†ç›–ç‡ç»“æœæ¨é€
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ac203d2a79d042919b29f06f51ce6a37~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2s6L2s5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766979817&amp;x-signature=oY5E6q2oA0TJNI%2FuMXon6OyxEpo%3D" alt="" loading="lazy"/></li>
</ul>
<hr/>
<ul>
<li>âœ… æå‰ä¸€å¤©äº‹é¡¹æé†’ï½œé™æ€æ‰«æç»“æœæé†’
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e0106c915d8443369f8b58a589b3af94~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2s6L2s5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766979817&amp;x-signature=P6eA4HBUm4xBx%2BJVuzGqpWhFROw%3D" alt="" loading="lazy"/></li>
</ul>
<hr/>
</blockquote>
<h4 data-id="heading-19">å¤§å®¶å¯èƒ½æœ‰çš„å°ç–‘é—®</h4>
<blockquote>
<p><strong>Qï¼šä¸ºä»€ä¹ˆè¦ç”¨ 2 ä¸ªæœºå™¨äººï¼Ÿ</strong><br/>
Aï¼šå—ä¼ä¸šå¾®ä¿¡é™åˆ¶ï¼Œæ™ºèƒ½æœºå™¨äººåªèƒ½è¢«åŠ¨å“åº”ç”¨æˆ·ä¸»åŠ¨ @ çš„æ¶ˆæ¯ï¼Œæ— æ³•ä¸»åŠ¨æ¨é€ã€‚æ™®é€šæœºå™¨äººç”¨äºå®šæ—¶ä»»åŠ¡ã€‚</p>
<p><strong>Qï¼šä¸ºä»€ä¹ˆä¸ç”¨ä¼ä¸šå¾®ä¿¡æ–‡æ¡£ï¼Ÿ</strong><br/>
Aï¼šä¼å¾®æ–‡æ¡£èƒ½åŠ›å—é™ï¼Œä¸”ä¸ Coze é›†æˆå¼±ï¼›è€Œ<strong>é£ä¹¦ + Coze é›†æˆæˆç†Ÿ</strong>ï¼Œå¯è‡ªè¡Œå¼€å‘æ’ä»¶ï¼Œçµæ´»åº¦é«˜ã€‚</p>
</blockquote>
<hr/>
<h4 data-id="heading-20">ç›¸å…³èµ„æ–™åˆé›†</h4>
<blockquote>
<ul>
<li>
<p>ä¼å¾®æ™ºèƒ½æœºå™¨äººï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.work.weixin.qq.com%2Fdocument%2Fpath%2F100719" target="_blank" title="https://developer.work.weixin.qq.com/document/path/100719" ref="nofollow noopener noreferrer">developer.work.weixin.qq.com/document/paâ€¦</a></p>
</li>
<li>
<p>ä¼å¾®æ™®é€šç¾¤æœºå™¨äººï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.work.weixin.qq.com%2Fdocument%2Fpath%2F99110" target="_blank" title="https://developer.work.weixin.qq.com/document/path/99110" ref="nofollow noopener noreferrer">developer.work.weixin.qq.com/document/paâ€¦</a></p>
</li>
<li>
<p>é£ä¹¦ç”µå­è¡¨æ ¼ APIï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fopen.feishu.cn%2Fdocument%2Fserver-docs%2Fdocs%2Fsheets-v3%2Foverview" target="_blank" title="https://open.feishu.cn/document/server-docs/docs/sheets-v3/overview" ref="nofollow noopener noreferrer">open.feishu.cn/document/seâ€¦</a></p>
</li>
<li>
<p>Coze åŸºäº API åˆ›å»ºæ’ä»¶ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.coze.cn%2Fopen%2Fdocs%2Fguides%2Fservices" target="_blank" title="https://www.coze.cn/open/docs/guides/services" ref="nofollow noopener noreferrer">www.coze.cn/open/docs/gâ€¦</a></p>
</li>
</ul>
</blockquote>
<h4 data-id="heading-21">åº”ç”¨æ•ˆæœ</h4>
<h5 data-id="heading-22">å®é™…åé¦ˆï¼š</h5>
<blockquote>
<ul>
<li>â€œäº‹é¡¹å¹¶è¡Œæ—¶ï¼Œä¼šå¿˜è®°ä¸€äº›èŠ‚ç‚¹ã€‚æ¥å…¥åï¼Œåˆ°å…³é”®èŠ‚ç‚¹è‡ªåŠ¨æé†’ï¼Œä¸ä¼šå¿˜å•¦ï¼â€</li>
<li>â€œBug æƒ…å†µçš„æ¨é€å¾ˆç»™åŠ›ï¼Œä¹‹å‰æ€»æœ‰äººä¸åŠæ—¶è§£å†³ï¼Œéœ€è¦ä¸€ç›´å‚¬ã€‚ç°åœ¨æ¯å¤©æ¨é€åï¼Œè§£å†³è¿›åº¦éƒ½å˜å¿«äº†ã€‚â€</li>
<li>â€œå„åˆ†æ”¯çš„è¦†ç›–ç‡æ˜¯å¦è¾¾æ ‡ä¸€ç›®äº†ç„¶ï¼Œå†ä¹Ÿä¸ç”¨ä¸€ä¸ªä¸ªæ£€æŸ¥äº†ã€‚â€</li>
</ul>
</blockquote>
<h5 data-id="heading-23">å›¢é˜Ÿå»ºè®®ï¼š</h5>
<blockquote>
<ul>
<li>å¯¹æœªå®Œæˆçš„ Todo åˆ—è¡¨è¿›è¡Œæé†’</li>
<li>æ ¹æ®ä¸Šçº¿è®¡åˆ’ï¼ŒCheck æ˜¯å¦æ‰§è¡Œåˆ°ä½ï¼ˆå¦‚å®šæ—¶ä»»åŠ¡æ˜¯å¦é…ç½®å¹¶å¼€å¯ï¼‰</li>
<li>é€šè¿‡å†’çƒŸä»»åŠ¡æ‰§è¡Œæƒ…å†µæ ¡éªŒè”è°ƒè¿›åº¦æ˜¯å¦æ­£å¸¸</li>
</ul>
</blockquote>
<h3 data-id="heading-24">å†™åœ¨æœ€å</h3>
<p>è¿™ä¸ªå·¥å…·æŠŠæˆ‘ä»¬è¿‡å»<strong>é äººè„‘è®°å¿†ã€é äººå·¥å‚¬ä¿ƒçš„è§„åˆ™ï¼Œäº¤ç»™äº†ç¨‹åº</strong>ã€‚å¸¦æ¥åˆ‡å®æ”¹å˜ï¼šï¼š</p>
<blockquote>
<ul>
<li>ä¸å†è´¹å¿ƒè®°å¿†æ¯ä¸ªæ—¶é—´èŠ‚ç‚¹è¯¥åšä»€ä¹ˆ</li>
<li>ä¸ç”¨è‡ªå·±ä¸€ä¸ªä¸ªæŸ¥è¦†ç›–ç‡ã€äººå·¥æ±‡æ€» Bug</li>
<li>äº§å‡ºå†…å®¹æ˜¯å¦åˆç†ï¼Œä¸ç”¨ç»„é•¿ç›¯ï¼Œå·¥å…·ä¼šè‡ªåŠ¨å‘Šè¯‰ä½ é—®é¢˜åœ¨å“ª</li>
</ul>
<p><strong>æœ€é‡è¦çš„æ˜¯ï¼šæµ‹è¯•å›¢é˜Ÿç»ˆäºèƒ½æŠŠä¸»è¦ç²¾åŠ›ï¼Œé€æ­¥æ”¾å›æµ‹è¯•æœ¬èº«</strong>ã€‚</p>
</blockquote>
<p>æˆ‘ä»¬ä»åœ¨èµ·æ­¥é˜¶æ®µï¼Œåç»­å°†èµ‹èƒ½æ›´å¤šæµç¨‹èŠ‚ç‚¹ã€‚è®©é¡¹ç›®è¿‡ç¨‹ç®¡ç†è¶Šæ¥è¶Šè½»æ¾ã€‚</p>
<p>å¦‚æœä½ ä¹Ÿå—å›°äºâ€œäººå·¥å¾…åŠâ€ï¼Œæˆ–ä¹Ÿæƒ³ç”¨ Coze åšä¸€äº›å·¥å…·èµ‹èƒ½ï¼Œæ¬¢è¿ä¸€èµ·äº¤æµï¼</p>
<p><code>&gt; è½¬è½¬ç ”å‘ä¸­å¿ƒåŠä¸šç•Œå°ä¼™ä¼´ä»¬çš„æŠ€æœ¯å­¦ä¹ äº¤æµå¹³å°ï¼Œå®šæœŸåˆ†äº«ä¸€çº¿çš„å®æˆ˜ç»éªŒåŠä¸šç•Œå‰æ²¿çš„æŠ€æœ¯è¯é¢˜ã€‚</code></p>
<p><code>&gt; å…³æ³¨å…¬ä¼—å·ã€Œè½¬è½¬æŠ€æœ¯ã€ï¼ˆç»¼åˆæ€§ï¼‰ã€ã€Œå¤§è½¬è½¬FEã€ï¼ˆä¸“æ³¨äºFEï¼‰ã€ã€Œè½¬è½¬QAã€ï¼ˆä¸“æ³¨äºQAï¼‰ï¼Œæ›´å¤šå¹²è´§å®è·µï¼Œæ¬¢è¿äº¤æµåˆ†äº«~</code></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æµå¼è®¡ç®—æ¡†æ¶ç®€å•ç»¼è¿°-ç¬¬ä¸€ç¯‡]]></title>    <link>https://juejin.cn/post/7586136543954747430</link>    <guid>https://juejin.cn/post/7586136543954747430</guid>    <pubDate>2025-12-22T03:43:21.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7586136543954747430" data-draft-id="7585920796100509723" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æµå¼è®¡ç®—æ¡†æ¶ç®€å•ç»¼è¿°-ç¬¬ä¸€ç¯‡"/> <meta itemprop="keywords" content="æ¶æ„"/> <meta itemprop="datePublished" content="2025-12-22T03:43:21.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è‡ªç”±ç”Ÿé•¿2024"/> <meta itemprop="url" content="https://juejin.cn/user/1591748569862670"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æµå¼è®¡ç®—æ¡†æ¶ç®€å•ç»¼è¿°-ç¬¬ä¸€ç¯‡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1591748569862670/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è‡ªç”±ç”Ÿé•¿2024
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-22T03:43:21.000Z" title="Mon Dec 22 2025 03:43:21 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»15åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æ‘˜è¦</h2>
<p>æœ¬æ–‡æ·±å…¥å‰–ææµå¼è®¡ç®—åŸç†ã€æµæ‰¹ä¸€ä½“æ¶æ„ã€Lambdaä¸Kappaæ¶æ„ä¼˜åŠ£ï¼Œå¹¶ç»“åˆå®é™…åœºæ™¯ï¼Œå…¨é¢é˜è¿°å®æ—¶æ•°æ®å¤„ç†çš„æŠ€æœ¯æ¼”è¿›ä¸å·¥ç¨‹å®è·µã€‚</p>
<h2 data-id="heading-1">å¼•è¨€</h2>
<h3 data-id="heading-2">æµå¼è®¡ç®—çš„èƒŒæ™¯å’Œåœºæ™¯</h3>
<p>åœ¨æ—¥å¸¸ç”Ÿæ´»ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šå…ˆæŠŠæ•°æ®å­˜å‚¨åœ¨ä¸€å¼ è¡¨ä¸­ï¼Œç„¶åå†è¿›è¡ŒåŠ å·¥ã€åˆ†æï¼Œè¿™é‡Œå°±æ¶‰åŠåˆ°ä¸€ä¸ªæ—¶æ•ˆæ€§çš„é—®é¢˜ã€‚å¦‚æœæˆ‘ä»¬å¤„ç†ä»¥å¹´ã€æœˆä¸ºå•ä½çš„çº§åˆ«çš„æ•°æ®ï¼Œé‚£ä¹ˆå¤šæ•°æ®çš„å®æ—¶æ€§è¦æ±‚å¹¶ä¸é«˜ï¼›ä½†å¦‚æœæˆ‘ä»¬å¤„ç†çš„æ˜¯ä»¥å¤©ã€å°æ—¶ï¼Œç”šè‡³åˆ†é’Ÿä¸ºå•ä½çš„æ•°æ®ï¼Œé‚£ä¹ˆå¯¹æ•°æ®çš„æ—¶æ•ˆæ€§è¦æ±‚å°±æ¯”è¾ƒé«˜ã€‚åœ¨ç¬¬äºŒç§åœºæ™¯ä¸‹ï¼Œå¦‚æœæˆ‘ä»¬ä»æ—§é‡‡ç”¨ä¼ ç»Ÿçš„æ•°æ®å¤„ç†æ–¹å¼ï¼Œç»Ÿä¸€æ”¶é›†æ•°æ®ï¼Œå­˜å‚¨åˆ°æ•°æ®åº“ä¸­ï¼Œä¹‹ååœ¨è¿›è¡Œåˆ†æï¼Œå°±å¯èƒ½æ— æ³•æ»¡è¶³æ—¶æ•ˆæ€§çš„è¦æ±‚ã€‚</p>
<p>é€šè¿‡å¤§æ•°æ®å¤„ç†æˆ‘ä»¬è·å–äº†æ•°æ®çš„ä»·å€¼ï¼Œä½†æ˜¯æ•°æ®çš„ä»·å€¼æ˜¾ç„¶ä¸æ˜¯æ’å®šä¸å˜çš„ã€‚ä¸€äº›æ•°æ®åœ¨äº‹æƒ…å‘ç”Ÿåä¸ä¹…å°±æœ‰äº†æ›´é«˜çš„ä»·å€¼ï¼Œè€Œä¸”è¿™ç§ä»·å€¼ä¼šéšç€æ—¶é—´çš„æ¨ç§»è€Œè¿…é€Ÿå‡å°‘ã€‚æµå¤„ç†çš„å…³é”®ä¼˜åŠ¿åœ¨äºå®ƒèƒ½å¤Ÿæ›´å¿«åœ°æä¾›æ´å¯ŸåŠ›ï¼Œé€šå¸¸åœ¨æ¯«ç§’åˆ°ç§’ä¹‹é—´ã€‚</p>
<p>æµå¼å¤„ç†å¯ä»¥ç”¨äºä¸¤ç§ä¸åŒåœºæ™¯ï¼š äº‹ä»¶æµå’ŒæŒç»­è®¡ç®—ã€‚</p>
<p>1ã€äº‹ä»¶æµ</p>
<p>äº‹ä»¶æµèƒ½å¤ŸæŒç»­äº§ç”Ÿå¤§é‡çš„æ•°æ®ï¼Œè¿™ç±»æ•°æ®æœ€æ—©å‡ºç°ä¸ä¼ ç»Ÿçš„é“¶è¡Œå’Œè‚¡ç¥¨äº¤æ˜“é¢†åŸŸï¼Œä¹Ÿåœ¨äº’è”ç½‘ç›‘æ§ã€æ— çº¿é€šä¿¡ç½‘ç­‰é¢†åŸŸå‡ºç°ã€<strong>éœ€è¦ä»¥è¿‘å®æ—¶çš„æ–¹å¼å¯¹æ›´æ–°æ•°æ®æµè¿›è¡Œå¤æ‚åˆ†æå¦‚è¶‹åŠ¿åˆ†æã€é¢„æµ‹ã€ç›‘æ§ç­‰</strong>ã€‚ç®€å•æ¥è¯´ï¼Œäº‹ä»¶æµé‡‡ç”¨çš„æ˜¯æŸ¥è¯¢ä¿æŒé™æ€ï¼Œè¯­å¥æ˜¯å›ºå®šçš„ï¼Œæ•°æ®ä¸æ–­å˜åŒ–çš„æ–¹å¼ã€‚</p>
<p>2ã€æŒç»­è®¡ç®—</p>
<p>æ¯”å¦‚å¯¹äºå¤§å‹ç½‘ç«™çš„æµå¼æ•°æ®ï¼šç½‘ç«™çš„è®¿é—®PV/UVã€ç”¨æˆ·è®¿é—®äº†ä»€ä¹ˆå†…å®¹ã€æœç´¢äº†ä»€ä¹ˆå†…å®¹ç­‰ï¼Œå®æ—¶çš„æ•°æ®è®¡ç®—å’Œåˆ†æå¯ä»¥åŠ¨æ€å®æ—¶åœ°åˆ·æ–°ç”¨æˆ·è®¿é—®æ•°æ®ï¼Œå±•ç¤ºç½‘ç«™å®æ—¶æµé‡çš„å˜åŒ–æƒ…å†µï¼Œ<strong>åˆ†ææ¯å¤©å„å°æ—¶çš„æµé‡å’Œç”¨æˆ·åˆ†å¸ƒæƒ…å†µ</strong>ï¼›</p>
<p><strong>æ¯”å¦‚é‡‘èè¡Œä¸šï¼Œæ¯«ç§’çº§å»¶è¿Ÿçš„éœ€æ±‚è‡³å…³é‡è¦</strong>ã€‚ä¸€äº›éœ€è¦å®æ—¶å¤„ç†æ•°æ®çš„åœºæ™¯ä¹Ÿå¯ä»¥åº”ç”¨Stormï¼Œæ¯”å¦‚æ ¹æ®ç”¨æˆ·è¡Œä¸ºäº§ç”Ÿçš„æ—¥å¿—æ–‡ä»¶è¿›è¡Œå®æ—¶åˆ†æï¼Œ<strong>å¯¹ç”¨æˆ·è¿›è¡Œå•†å“çš„å®æ—¶æ¨èç­‰</strong>ã€‚</p>
<p>å…¶å®è¿™ä¸¤ç§ï¼Œäº‹ä»¶æµå’ŒæŒç»­è®¡ç®—æœ¬è´¨ä¸Šéƒ½æ˜¯äº‹ä»¶æµã€‚</p>
<h3 data-id="heading-3">æµå¼è®¡ç®—ä¸æ‰¹é‡è®¡ç®—</h3>
<p>å¤§æ•°æ®çš„è®¡ç®—æ¨¡å¼ä¸»è¦åˆ†ä¸ºæ‰¹é‡è®¡ç®—(batch computing)ã€æµå¼è®¡ç®—(stream computing)ã€äº¤äº’è®¡ç®—(interactive computing)ã€å›¾è®¡ç®—(graph computing)ç­‰ã€‚å…¶ä¸­ï¼Œæµå¼è®¡ç®—å’Œæ‰¹é‡è®¡ç®—æ˜¯ä¸¤ç§ä¸»è¦çš„å¤§æ•°æ®è®¡ç®—æ¨¡å¼ï¼Œåˆ†åˆ«é€‚ç”¨äºä¸åŒçš„å¤§æ•°æ®åº”ç”¨åœºæ™¯ã€‚</p>
<p>æµæ•°æ®ï¼ˆæˆ–æ•°æ®æµï¼‰æ˜¯æŒ‡åœ¨æ—¶é—´åˆ†å¸ƒå’Œæ•°é‡ä¸Šæ— é™çš„ä¸€ç³»åˆ—åŠ¨æ€æ•°æ®é›†åˆä½“ï¼Œæ•°æ®çš„ä»·å€¼éšç€æ—¶é—´çš„æµé€è€Œé™ä½ï¼Œå› æ­¤å¿…é¡»å®æ—¶è®¡ç®—ç»™å‡ºç§’çº§å“åº”ã€‚æµå¼è®¡ç®—ï¼Œé¡¾åæ€ä¹‰ï¼Œå°±æ˜¯å¯¹æ•°æ®æµè¿›è¡Œå¤„ç†ï¼Œæ˜¯å®æ—¶è®¡ç®—ã€‚æ‰¹é‡è®¡ç®—åˆ™ç»Ÿä¸€æ”¶é›†æ•°æ®ï¼Œå­˜å‚¨åˆ°æ•°æ®åº“ä¸­ï¼Œç„¶åå¯¹æ•°æ®è¿›è¡Œæ‰¹é‡å¤„ç†çš„æ•°æ®è®¡ç®—æ–¹å¼ã€‚ä¸»è¦ä½“ç°åœ¨ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š</p>
<p>1ã€æ•°æ®æ—¶æ•ˆæ€§ä¸åŒï¼šæµå¼è®¡ç®—å®æ—¶ã€ä½å»¶è¿Ÿï¼Œ æ‰¹é‡è®¡ç®—éå®æ—¶ã€é«˜å»¶è¿Ÿã€‚</p>
<p>2ã€æ•°æ®ç‰¹å¾ä¸åŒï¼šæµå¼è®¡ç®—çš„æ•°æ®ä¸€èˆ¬æ˜¯åŠ¨æ€çš„ã€æ²¡æœ‰è¾¹ç•Œçš„ï¼Œè€Œæ‰¹å¤„ç†çš„æ•°æ®ä¸€èˆ¬åˆ™æ˜¯é™æ€æ•°æ®ã€‚</p>
<p>3ã€åº”ç”¨åœºæ™¯ä¸åŒï¼šæµå¼è®¡ç®—åº”ç”¨åœ¨å®æ—¶åœºæ™¯ï¼Œæ—¶æ•ˆæ€§è¦æ±‚æ¯”è¾ƒé«˜çš„åœºæ™¯ï¼Œå¦‚å®æ—¶æ¨èã€ä¸šåŠ¡ç›‘æ§â€¦æ‰¹é‡è®¡ç®—ä¸€èˆ¬è¯´æ‰¹å¤„ç†ï¼Œåº”ç”¨åœ¨å®æ—¶æ€§è¦æ±‚ä¸é«˜ã€ç¦»çº¿è®¡ç®—çš„åœºæ™¯ä¸‹ï¼Œæ•°æ®åˆ†æã€ç¦»çº¿æŠ¥è¡¨ç­‰ã€‚</p>
<p>4ã€è¿è¡Œæ–¹å¼ä¸åŒï¼Œæµå¼è®¡ç®—çš„ä»»åŠ¡æŒç»­è¿›è¡Œçš„ï¼Œæ‰¹é‡è®¡ç®—çš„ä»»åŠ¡åˆ™ä¸€æ¬¡æ€§å®Œæˆã€‚</p>
<h3 data-id="heading-4">æµå¼è®¡ç®—æ¡†æ¶ã€å¹³å°ä¸ç›¸å…³äº§å“</h3>
<p>ç¬¬ä¸€ç±»ï¼Œå•†ä¸šçº§æµå¼è®¡ç®—å¹³å°ï¼ˆIBM InfoSphere Streamsã€IBM StreamBaseç­‰ï¼‰ï¼›</p>
<p>ç¬¬äºŒç±»ï¼Œå¼€æºæµå¼è®¡ç®—æ¡†æ¶ï¼ˆTwitter Stormã€S4ç­‰ï¼‰ï¼›</p>
<p>ç¬¬ä¸‰ç±»ï¼Œå…¬å¸ä¸ºæ”¯æŒè‡ªèº«ä¸šåŠ¡å¼€å‘çš„æµå¼è®¡ç®—æ¡†æ¶ã€‚</p>
<p>Stromï¼šTwitter å¼€å‘çš„ç¬¬ä¸€ä»£æµå¤„ç†ç³»ç»Ÿã€‚1</p>
<p>Heronï¼šTwitter å¼€å‘çš„ç¬¬äºŒä»£æµå¤„ç†ç³»ç»Ÿã€‚</p>
<p>Spark streamingï¼šæ˜¯Sparkæ ¸å¿ƒAPIçš„ä¸€ä¸ªæ‰©å±•ï¼Œå¯ä»¥å®ç°é«˜ååé‡çš„ã€å…·å¤‡å®¹é”™æœºåˆ¶çš„å®æ—¶æµæ•°æ®çš„å¤„ç†ã€‚</p>
<p>Flinkï¼šæ˜¯ä¸€ä¸ªé’ˆå¯¹æµæ•°æ®å’Œæ‰¹æ•°æ®çš„åˆ†å¸ƒå¼å¤„ç†å¼•æ“ã€‚</p>
<p>Apache Kafkaï¼šLinkedinå¼€å‘çš„å¤§æ•°æ®æ¶ˆæ¯é˜Ÿåˆ—ï¼Œç”±Scalaå†™æˆã€‚è¯¥é¡¹ç›®çš„ç›®æ ‡æ˜¯ä¸ºå¤„ç†å®æ—¶æ•°æ®æä¾›ä¸€ä¸ªç»Ÿä¸€ã€é«˜é€šé‡ã€ä½ç­‰å¾…çš„å¹³å°ã€‚</p>
<p>Apache Samza, Linkedinå¼€å‘çš„å¤§æ•°æ®æµå¼å¤„ç†ç³»ç»Ÿï¼Œ å¯ä»¥å®ç°æµæ‰¹ä¸€ä½“çš„åˆ†å¸ƒå¼å¤„ç†å¼•æ“ã€‚</p>
<h2 data-id="heading-5">æµå¼è®¡ç®—æœ¯è¯­ç®€ä»‹</h2>
<p>æ°´ä½ï¼š</p>
<p>è¿æ¥ï¼š</p>
<p>çŠ¶æ€ï¼š</p>
<p>exactly-once: åœ¨æ¶ˆæ¯é˜Ÿåˆ—ä¸­ï¼Œç”Ÿäº§è€…é‡è¯•å‘é€æ¶ˆæ¯ï¼Œä¹Ÿåªä¼šè®©æ¶ˆæ¯è¢«å‘é€ç»™æ¶ˆè´¹è€…ä¸€æ¬¡ã€‚[2]</p>
<h2 data-id="heading-6">Lamdaè®¡ç®—æ¡†æ¶æ¶æ„</h2>
<p>å¦‚ä½•å®æ—¶åœ°åœ¨ä»»æ„å¤§æ•°æ®é›†ä¸Šè¿›è¡ŒæŸ¥è¯¢ï¼Ÿå¤§æ•°æ®å†åŠ ä¸Šå®æ—¶è®¡ç®—ï¼Œé—®é¢˜çš„éš¾åº¦æ¯”è¾ƒå¤§ã€‚Lambdaæ¶æ„é€šè¿‡åˆ†è§£çš„ä¸‰å±‚æ¶æ„æ¥è§£å†³è¯¥é—®é¢˜ï¼šBatch Layerï¼ŒSpeed Layerå’ŒServing Layerã€‚</p>
<h3 data-id="heading-7">Batch Layer</h3>
<p>ç†æƒ³çŠ¶æ€ä¸‹ï¼Œä»»ä½•æ•°æ®è®¿é—®éƒ½å¯ä»¥ä»è¡¨è¾¾å¼Query= function(all data)å¼€å§‹ï¼Œä½†æ˜¯ï¼Œè‹¥æ•°æ®è¾¾åˆ°ç›¸å½“å¤§çš„ä¸€ä¸ªçº§åˆ«ï¼ˆä¾‹å¦‚PBï¼‰ï¼Œä¸”è¿˜éœ€è¦æ”¯æŒå®æ—¶æŸ¥è¯¢æ—¶ï¼Œå°±éœ€è¦è€—è´¹éå¸¸åºå¤§çš„èµ„æºã€‚ä¸€ä¸ªè§£å†³æ–¹å¼æ˜¯é¢„è¿ç®—æŸ¥è¯¢å‡½æ•°ï¼ˆprecomputed query functionï¼‰ã€‚ä¹¦ä¸­å°†è¿™ç§é¢„è¿ç®—æŸ¥è¯¢å‡½æ•°ç§°ä¹‹ä¸ºBatch Viewï¼ˆAï¼‰ï¼Œè¿™æ ·å½“éœ€è¦æ‰§è¡ŒæŸ¥è¯¢æ—¶ï¼Œå¯ä»¥ä»Batch Viewä¸­è¯»å–ç»“æœã€‚è¿™æ ·ä¸€ä¸ªé¢„å…ˆè¿ç®—å¥½çš„Viewæ˜¯å¯ä»¥å»ºç«‹ç´¢å¼•çš„ï¼Œå› è€Œå¯ä»¥æ”¯æŒéšæœºè¯»å–ï¼ˆBï¼‰ã€‚äºæ˜¯ç³»ç»Ÿå°±å˜æˆï¼š</p>
<p>ï¼ˆAï¼‰batch view = function(all data)</p>
<p>ï¼ˆBï¼‰query = function(batch view)</p>
<p>åœ¨Lambdaæ¶æ„ä¸­ï¼Œå®ç°ï¼ˆAï¼‰batch view =function(all data)çš„éƒ¨åˆ†ç§°ä¹‹ä¸ºBatch Layerã€‚Batch Layerçš„åŠŸèƒ½ä¸»è¦æœ‰ä¸¤ç‚¹ï¼š</p>
<ul>
<li>å­˜å‚¨master dataset, è¿™æ˜¯ä¸€ä¸ªä¸å˜çš„æŒç»­å¢é•¿çš„æ•°æ®é›†</li>
<li>åœ¨master datasetä¸Šé¢„å…ˆè®¡ç®—æŸ¥è¯¢å‡½æ•°ï¼Œæ„å»ºæŸ¥è¯¢æ‰€å¯¹åº”çš„View</li>
</ul>
<p>Viewæ˜¯ä¸€ä¸ªå’Œä¸šåŠ¡å…³è”æ€§æ¯”è¾ƒå¤§çš„æ¦‚å¿µï¼ŒViewçš„åˆ›å»ºéœ€è¦ä»ä¸šåŠ¡è‡ªèº«çš„éœ€æ±‚å‡ºå‘ã€‚ä¸€ä¸ªé€šç”¨çš„æ•°æ®åº“æŸ¥è¯¢ç³»ç»Ÿï¼ŒæŸ¥è¯¢å¯¹åº”çš„å‡½æ•°åƒå˜ä¸‡åŒ–ï¼Œä¸å¯èƒ½ç©·ä¸¾ã€‚ä½†æ˜¯å¦‚æœä»ä¸šåŠ¡è‡ªèº«çš„éœ€æ±‚å‡ºå‘ï¼Œå¯ä»¥å‘ç°ä¸šåŠ¡æ‰€éœ€è¦çš„æŸ¥è¯¢å¸¸å¸¸æ˜¯æœ‰é™çš„ã€‚Batch Layeréœ€è¦åšçš„ä¸€ä»¶é‡è¦çš„å·¥ä½œå°±æ˜¯æ ¹æ®ä¸šåŠ¡çš„éœ€æ±‚ï¼Œè€ƒå¯Ÿå¯èƒ½éœ€è¦çš„å„ç§æŸ¥è¯¢ï¼Œæ ¹æ®æŸ¥è¯¢å®šä¹‰å…¶åœ¨æ•°æ®é›†ä¸Šå¯¹åº”çš„Viewsã€‚</p>
<p><strong>viewå¯ä»¥ç†è§£ä¸ºæ˜¯ç­‰åŒäºå…³ç³»å‹æ•°æ®åº“ä¸­çš„ç‰©åŒ–è§†å›¾çš„æ¦‚å¿µã€‚</strong></p>
<h3 data-id="heading-8">Speed Layer</h3>
<p>Batch Layerå¯ä»¥å¾ˆå¥½çš„å¤„ç†ç¦»çº¿æ•°æ®ï¼Œä½†æœ‰å¾ˆå¤šåœºæ™¯æ•°æ®ä¸æ–­å®æ—¶ç”Ÿæˆï¼Œå¹¶ä¸”éœ€è¦å®æ—¶æŸ¥è¯¢å¤„ç†ã€‚Speed Layeræ­£æ˜¯ç”¨æ¥å¤„ç†å¢é‡çš„å®æ—¶æ•°æ®ã€‚</p>
<p>Speed Layerå’ŒBatch Layeræ¯”è¾ƒç±»ä¼¼ï¼Œå¯¹æ•°æ®è¿›è¡Œè®¡ç®—å¹¶ç”ŸæˆRealtime Viewï¼Œå…¶ä¸»è¦åŒºåˆ«åœ¨äºï¼š</p>
<ul>
<li>Speed Layerå¤„ç†çš„æ•°æ®æ˜¯æœ€è¿‘çš„å¢é‡æ•°æ®æµï¼ŒBatch Layerå¤„ç†çš„å…¨ä½“æ•°æ®é›†</li>
<li>Speed Layerä¸ºäº†æ•ˆç‡ï¼Œæ¥æ”¶åˆ°æ–°æ•°æ®æ—¶ä¸æ–­æ›´æ–°Realtime Viewï¼Œè€ŒBatch Layeræ ¹æ®å…¨ä½“ç¦»çº¿æ•°æ®é›†ç›´æ¥å¾—åˆ°Batch Viewã€‚Speed Layeræ˜¯ä¸€ç§å¢é‡è®¡ç®—ï¼Œè€Œéé‡æ–°è®¡ç®—ï¼ˆrecomputationï¼‰</li>
<li>Speed Layerå› ä¸ºé‡‡ç”¨å¢é‡è®¡ç®—ï¼Œæ‰€ä»¥å»¶è¿Ÿå°ï¼Œè€ŒBatch Layeræ˜¯å…¨æ•°æ®é›†çš„è®¡ç®—ï¼Œè€—æ—¶æ¯”è¾ƒé•¿</li>
</ul>
<p>ç»¼ä¸Šæ‰€è¯‰ï¼ŒSpeed Layeræ˜¯Batch Layeråœ¨å®æ—¶æ€§ä¸Šçš„ä¸€ä¸ªè¡¥å……ã€‚Speed Layerå¯æ€»ç»“ä¸ºï¼š</p>
<p>ï¼ˆCï¼‰realtime viewï¼function(realtime viewï¼Œnew data)</p>
<p>æ³¨æ„ï¼Œrealtime viewæ˜¯åŸºäºæ–°æ•°æ®å’Œå·²æœ‰çš„realtime viewã€‚</p>
<p>Lambdaæ¶æ„å°†æ•°æ®å¤„ç†åˆ†è§£ä¸ºBatch Layerå’ŒSpeed Layeræœ‰å¦‚ä¸‹ä¼˜ç‚¹ï¼š</p>
<ul>
<li>å®¹é”™æ€§ã€‚Speed Layerä¸­å¤„ç†çš„æ•°æ®ä¹Ÿä¸æ–­å†™å…¥Batch Layerï¼Œå½“Batch Layerä¸­é‡æ–°è®¡ç®—çš„æ•°æ®é›†åŒ…å«Speed Layerå¤„ç†çš„æ•°æ®é›†åï¼Œå½“å‰çš„Realtime Viewå°±å¯ä»¥ä¸¢å¼ƒï¼Œè¿™ä¹Ÿå°±æ„å‘³ç€Speed Layerå¤„ç†ä¸­å¼•å…¥çš„é”™è¯¯ï¼Œåœ¨Batch Layeré‡æ–°è®¡ç®—æ—¶éƒ½å¯ä»¥å¾—åˆ°ä¿®æ­£ã€‚è¿™ç‚¹ä¹Ÿå¯ä»¥çœ‹æˆæ˜¯CAPç†è®ºä¸­çš„æœ€ç»ˆä¸€è‡´æ€§ï¼ˆEventual Consistencyï¼‰çš„ä½“ç°ã€‚</li>
<li>å¤æ‚æ€§éš”ç¦»ã€‚Batch Layerå¤„ç†çš„æ˜¯ç¦»çº¿æ•°æ®ï¼Œå¯ä»¥å¾ˆå¥½çš„æŒæ§ã€‚Speed Layeré‡‡ç”¨å¢é‡ç®—æ³•å¤„ç†å®æ—¶æ•°æ®ï¼Œå¤æ‚æ€§æ¯”Batch Layerè¦é«˜å¾ˆå¤šã€‚é€šè¿‡åˆ†å¼€Batch Layerå’ŒSpeed Layerï¼ŒæŠŠå¤æ‚æ€§éš”ç¦»åˆ°Speed Layerï¼Œå¯ä»¥å¾ˆå¥½çš„æé«˜æ•´ä¸ªç³»ç»Ÿçš„é²æ£’æ€§å’Œå¯é æ€§ã€‚</li>
</ul>
<h3 data-id="heading-9">Serving Layer</h3>
<p>æœ‰ä¸€ç±»ç§°ä¸ºMonoidç‰¹æ€§çš„å‡½æ•°åº”ç”¨éå¸¸å¹¿æ³›ã€‚Monoidçš„æ¦‚å¿µæ¥æºäºèŒƒç•´å­¦ï¼ˆCategory Theoryï¼‰ï¼Œå…¶ä¸€ä¸ªé‡è¦ç‰¹æ€§æ˜¯æ»¡è¶³ç»“åˆå¾‹ã€‚å¦‚æ•´æ•°çš„åŠ æ³•å°±æ»¡è¶³Monoidï¼ˆç»“åˆå¾‹ï¼‰ç‰¹æ€§ï¼š</p>
<pre><code class="hljs language-plaintext" lang="plaintext">(a+b)+c=a+(b+c)
</code></pre>
<p>ä¸æ»¡è¶³Monoidç‰¹æ€§çš„å‡½æ•°å¾ˆå¤šæ—¶å€™å¯ä»¥è½¬åŒ–æˆå¤šä¸ªæ»¡è¶³Monoidç‰¹æ€§çš„å‡½æ•°çš„è¿ç®—ã€‚å¦‚å¤šä¸ªæ•°çš„å¹³å‡å€¼Avgå‡½æ•°ï¼Œå¤šä¸ªå¹³å‡å€¼æ²¡æ³•ç›´æ¥é€šè¿‡ç»“åˆæ¥å¾—åˆ°æœ€ç»ˆçš„å¹³å‡å€¼ï¼Œä½†æ˜¯å¯ä»¥æ‹†æˆåˆ†æ¯é™¤ä»¥åˆ†å­ï¼Œåˆ†æ¯å’Œåˆ†å­éƒ½æ˜¯æ•´æ•°çš„åŠ æ³•ï¼Œä»è€Œæ»¡è¶³Monoidç‰¹æ€§ã€‚</p>
<p>Monoidçš„ç»“åˆå¾‹ç‰¹æ€§åœ¨åˆ†å¸ƒå¼è®¡ç®—ä¸­æå…¶é‡è¦ï¼Œæ»¡è¶³Monoidç‰¹æ€§æ„å‘³ç€æˆ‘ä»¬å¯ä»¥å°†è®¡ç®—åˆ†è§£åˆ°å¤šå°æœºå™¨å¹¶è¡Œè¿ç®—ï¼Œç„¶åå†ç»“åˆå„è‡ªçš„éƒ¨åˆ†è¿ç®—ç»“æœå¾—åˆ°æœ€ç»ˆç»“æœã€‚åŒæ—¶ä¹Ÿæ„å‘³ç€éƒ¨åˆ†è¿ç®—ç»“æœå¯ä»¥å‚¨å­˜ä¸‹æ¥è¢«åˆ«çš„è¿ç®—å…±äº«åˆ©ç”¨ï¼ˆå¦‚æœè¯¥è¿ç®—ä¹ŸåŒ…å«ç›¸åŒçš„éƒ¨åˆ†å­è¿ç®—ï¼‰ï¼Œä»è€Œå‡å°‘é‡å¤è¿ç®—çš„å·¥ä½œé‡ã€‚</p>
<p>Lambdaæ¶æ„çš„Serving Layerç”¨äºå“åº”ç”¨æˆ·çš„æŸ¥è¯¢è¯·æ±‚ï¼Œåˆå¹¶Batch Viewå’ŒRealtime Viewä¸­çš„ç»“æœæ•°æ®é›†åˆ°æœ€ç»ˆçš„æ•°æ®é›†ã€‚</p>
<p>è¿™å„¿æ¶‰åŠåˆ°æ•°æ®å¦‚ä½•åˆå¹¶çš„é—®é¢˜ã€‚å‰é¢æˆ‘ä»¬è®¨è®ºäº†æŸ¥è¯¢å‡½æ•°çš„Monoidæ€§è´¨ï¼Œå¦‚æœæŸ¥è¯¢å‡½æ•°æ»¡è¶³Monoidæ€§è´¨ï¼Œå³æ»¡è¶³ç»“åˆå¾‹ï¼Œåªéœ€è¦ç®€å•çš„åˆå¹¶Batch Viewå’ŒRealtime Viewä¸­çš„ç»“æœæ•°æ®é›†å³å¯ã€‚å¦åˆ™çš„è¯ï¼Œå¯ä»¥æŠŠæŸ¥è¯¢å‡½æ•°è½¬æ¢æˆå¤šä¸ªæ»¡è¶³Monoidæ€§è´¨çš„æŸ¥è¯¢å‡½æ•°çš„è¿ç®—ï¼Œå•ç‹¬å¯¹æ¯ä¸ªæ»¡è¶³Monoidæ€§è´¨çš„æŸ¥è¯¢å‡½æ•°è¿›è¡ŒBatch Viewå’ŒRealtime Viewä¸­çš„ç»“æœæ•°æ®é›†åˆå¹¶ï¼Œç„¶åå†è®¡ç®—å¾—åˆ°æœ€ç»ˆçš„ç»“æœæ•°æ®é›†ã€‚å¦å¤–ä¹Ÿå¯ä»¥æ ¹æ®ä¸šåŠ¡è‡ªèº«çš„ç‰¹æ€§ï¼Œè¿ç”¨ä¸šåŠ¡è‡ªèº«çš„è§„åˆ™æ¥å¯¹Batch Viewå’ŒRealtime Viewä¸­çš„ç»“æœæ•°æ®é›†åˆå¹¶ã€‚</p>
<p>ç»¼ä¸Šæ‰€è¯‰ï¼ŒServing Layeré‡‡ç”¨å¦‚ä¸‹ç­‰å¼è¡¨ç¤ºï¼š</p>
<p>ï¼ˆDï¼‰query<strong>ï¼</strong>function(batch view, realtime view)</p>
<h3 data-id="heading-10">Lambdaæ¶æ„ç»„ä»¶é€‰å‹</h3>
<p>ä¸Šé¢åˆ†åˆ«è®¨è®ºäº†Lambdaæ¶æ„çš„ä¸‰å±‚ï¼šBatch Layerï¼ŒSpeed Layerå’ŒServing Layerã€‚æ€»ç»“ä¸‹æ¥ï¼ŒLambdaæ¶æ„å°±æ˜¯å¦‚ä¸‹çš„ä¸‰ä¸ªç­‰å¼ï¼š</p>
<pre><code class="hljs language-plaintext" lang="plaintext">batch view = function(all data)
realtime view = function(realtime view, new data)
query = function(batch view, realtime view)
</code></pre>
<p>æ•°æ®æµè¿›å…¥ç³»ç»Ÿåï¼ŒåŒæ—¶å‘å¾€Batch Layerå’ŒSpeed Layerå¤„ç†ã€‚Batch Layerä»¥ä¸å¯å˜æ¨¡å‹ç¦»çº¿å­˜å‚¨æ‰€æœ‰æ•°æ®é›†ï¼Œé€šè¿‡åœ¨å…¨ä½“æ•°æ®é›†ä¸Šä¸æ–­é‡æ–°è®¡ç®—æ„å»ºæŸ¥è¯¢æ‰€å¯¹åº”çš„Batch Viewsã€‚Speed Layerå¤„ç†å¢é‡çš„å®æ—¶æ•°æ®æµï¼Œä¸æ–­æ›´æ–°æŸ¥è¯¢æ‰€å¯¹åº”çš„Realtime Viewsã€‚Serving Layerå“åº”ç”¨æˆ·çš„æŸ¥è¯¢è¯·æ±‚ï¼Œåˆå¹¶Batch Viewå’ŒRealtime Viewä¸­çš„ç»“æœæ•°æ®é›†åˆ°æœ€ç»ˆçš„æ•°æ®é›†ã€‚</p>
<p>ä¸‹å›¾ç»™å‡ºäº†Lambdaæ¶æ„ä¸­å„ç»„ä»¶åœ¨å¤§æ•°æ®ç”Ÿæ€ç³»ç»Ÿä¸­å’Œé˜¿é‡Œé›†å›¢çš„å¸¸ç”¨ç»„ä»¶ã€‚æ•°æ®æµå­˜å‚¨é€‰ç”¨ä¸å¯å˜æ—¥å¿—çš„åˆ†å¸ƒå¼ç³»ç»ŸKafkaã€TTã€Metaqï¼›BatchLayeræ•°æ®é›†çš„å­˜å‚¨é€‰ç”¨Hadoopçš„HDFSæˆ–è€…é˜¿é‡Œäº‘çš„ODPSï¼›BatchViewçš„åŠ å·¥é‡‡ç”¨MapReduceï¼›BatchViewæ•°æ®çš„å­˜å‚¨é‡‡ç”¨Mysqlï¼ˆæŸ¥è¯¢å°‘é‡çš„æœ€è¿‘ç»“æœæ•°æ®ï¼‰ã€Hbaseï¼ˆæŸ¥è¯¢å¤§é‡çš„å†å²ç»“æœæ•°æ®ï¼‰ã€‚SpeedLayeré‡‡ç”¨å¢é‡æ•°æ®å¤„ç†Stormã€Flinkï¼›RealtimeViewå¢é‡ç»“æœæ•°æ®é›†é‡‡ç”¨å†…å­˜æ•°æ®åº“Redisã€‚</p>
<h4 data-id="heading-11">Lambdaæ¶æ„æ€»ç»“</h4>
<p>æ•°æ®ä»åº•å±‚çš„æ•°æ®æºå¼€å§‹ï¼Œç»è¿‡å„ç§å„æ ·çš„æ ¼å¼è¿›å…¥å¤§æ•°æ®å¹³å°ï¼Œåœ¨å¤§æ•°æ®å¹³å°ä¸­ç»è¿‡Kafkaã€Flumeç­‰æ•°æ®ç»„ä»¶è¿›è¡Œæ”¶é›†ï¼Œç„¶ååˆ†æˆä¸¤æ¡çº¿è¿›è¡Œè®¡ç®—ã€‚ä¸€æ¡çº¿æ˜¯è¿›å…¥æµå¼è®¡ç®—å¹³å°ï¼ˆä¾‹å¦‚ Stormã€Flinkæˆ–è€…Spark Streamingï¼‰ï¼Œå»è®¡ç®—å®æ—¶çš„ä¸€äº›æŒ‡æ ‡ï¼›å¦ä¸€æ¡çº¿è¿›å…¥æ‰¹é‡æ•°æ®å¤„ç†ç¦»çº¿è®¡ç®—å¹³å°ï¼ˆä¾‹å¦‚Mapreduceã€Hiveï¼ŒSpark SQLï¼‰ï¼Œå»è®¡ç®—T+1çš„ç›¸å…³ä¸šåŠ¡æŒ‡æ ‡ï¼Œè¿™äº›æŒ‡æ ‡éœ€è¦éš”æ—¥æ‰èƒ½çœ‹è§ã€‚</p>
<p>Lambdaæ¶æ„ç»å†å¤šå¹´çš„å‘å±•ï¼Œå…¶ä¼˜ç‚¹æ˜¯ç¨³å®šï¼Œå¯¹äºå®æ—¶è®¡ç®—éƒ¨åˆ†çš„è®¡ç®—æˆæœ¬å¯æ§ï¼Œæ‰¹é‡å¤„ç†å¯ä»¥ç”¨æ™šä¸Šçš„æ—¶é—´æ¥æ•´ä½“æ‰¹é‡è®¡ç®—ï¼Œè¿™æ ·æŠŠå®æ—¶è®¡ç®—å’Œç¦»çº¿è®¡ç®—é«˜å³°åˆ†å¼€ï¼Œè¿™ç§æ¶æ„æ”¯æ’‘äº†æ•°æ®è¡Œä¸šçš„æ—©æœŸå‘å±•ï¼Œä½†æ˜¯å®ƒä¹Ÿæœ‰ä¸€äº›è‡´å‘½ç¼ºç‚¹ï¼Œå¹¶åœ¨å¤§æ•°æ®3.0æ—¶ä»£è¶Šæ¥è¶Šä¸é€‚åº”æ•°æ®åˆ†æä¸šåŠ¡çš„éœ€æ±‚ã€‚ç¼ºç‚¹å¦‚ä¸‹ï¼š</p>
<ul>
<li><strong>å®æ—¶ä¸æ‰¹é‡è®¡ç®—ç»“æœä¸ä¸€è‡´å¼•èµ·çš„æ•°æ®å£å¾„é—®é¢˜</strong>ï¼šå› ä¸ºæ‰¹é‡å’Œå®æ—¶è®¡ç®—èµ°çš„æ˜¯ä¸¤ä¸ªè®¡ç®—æ¡†æ¶å’Œè®¡ç®—ç¨‹åºï¼Œç®—å‡ºçš„ç»“æœå¾€å¾€ä¸åŒï¼Œç»å¸¸çœ‹åˆ°ä¸€ä¸ªæ•°å­—å½“å¤©çœ‹æ˜¯ä¸€ä¸ªæ•°æ®ï¼Œç¬¬äºŒå¤©çœ‹æ˜¨å¤©çš„æ•°æ®åè€Œå‘ç”Ÿäº†å˜åŒ–ã€‚</li>
<li><strong>æ‰¹é‡è®¡ç®—åœ¨è®¡ç®—çª—å£å†…æ— æ³•å®Œæˆ</strong>ï¼šåœ¨IOTæ—¶ä»£ï¼Œæ•°æ®é‡çº§è¶Šæ¥è¶Šå¤§ï¼Œç»å¸¸å‘ç°å¤œé—´åªæœ‰4ã€5ä¸ªå°æ—¶çš„æ—¶é—´çª—å£ï¼Œå·²ç»æ— æ³•å®Œæˆç™½å¤©20å¤šä¸ªå°æ—¶ç´¯è®¡çš„æ•°æ®ï¼Œä¿è¯æ—©ä¸Šä¸Šç­å‰å‡†æ—¶å‡ºæ•°æ®å·²æˆä¸ºæ¯ä¸ªå¤§æ•°æ®å›¢é˜Ÿå¤´ç–¼çš„é—®é¢˜ã€‚</li>
<li><strong>å¼€å‘å’Œç»´æŠ¤çš„å¤æ‚æ€§é—®é¢˜</strong>ï¼šLambda æ¶æ„éœ€è¦åœ¨ä¸¤ä¸ªä¸åŒçš„ APIï¼ˆapplication programming interfaceï¼Œåº”ç”¨ç¨‹åºç¼–ç¨‹æ¥å£ï¼‰ä¸­å¯¹åŒæ ·çš„ä¸šåŠ¡é€»è¾‘è¿›è¡Œä¸¤æ¬¡ç¼–ç¨‹ï¼šä¸€æ¬¡ä¸ºæ‰¹é‡è®¡ç®—çš„ETLç³»ç»Ÿï¼Œä¸€æ¬¡ä¸ºæµå¼è®¡ç®—çš„Streamingç³»ç»Ÿã€‚é’ˆå¯¹åŒä¸€ä¸ªä¸šåŠ¡é—®é¢˜äº§ç”Ÿäº†ä¸¤ä¸ªä»£ç åº“ï¼Œå„æœ‰ä¸åŒçš„æ¼æ´ã€‚è¿™ç§ç³»ç»Ÿå®é™…ä¸Šéå¸¸éš¾ç»´æŠ¤</li>
<li><strong>æœåŠ¡å™¨å­˜å‚¨å¤§</strong>ï¼šæ•°æ®ä»“åº“çš„å…¸å‹è®¾è®¡ï¼Œä¼šäº§ç”Ÿå¤§é‡çš„ä¸­é—´ç»“æœè¡¨ï¼Œé€ æˆæ•°æ®æ€¥é€Ÿè†¨èƒ€ï¼ŒåŠ å¤§æœåŠ¡å™¨å­˜å‚¨å‹åŠ›ã€‚</li>
</ul>
<p>å› æ­¤ä¸Šæœ‰äº†Kappaæ¶æ„ã€‚</p>
<h3 data-id="heading-12">Kappaæ¶æ„</h3>
<p>Kafkaçš„åˆ›å§‹äººJay Krepsè®¤ä¸ºåœ¨å¾ˆå¤šåœºæ™¯ä¸‹ï¼Œç»´æŠ¤ä¸€å¥—Lambdaæ¶æ„çš„å¤§æ•°æ®å¤„ç†å¹³å°è€—æ—¶è€—åŠ›ï¼Œäºæ˜¯æå‡ºåœ¨æŸäº›åœºæ™¯ä¸‹ï¼Œæ²¡æœ‰å¿…è¦ç»´æŠ¤ä¸€ä¸ªæ‰¹å¤„ç†å±‚ï¼Œç›´æ¥ä½¿ç”¨ä¸€ä¸ªæµå¤„ç†å±‚å³å¯æ»¡è¶³éœ€æ±‚ï¼ŒKappaæ¶æ„ã€‚</p>
<p>Kappaæ¶æ„çš„å…´èµ·ä¸»è¦åŸå› ï¼š</p>
<ul>
<li>
<p>æ‰¹å¤„ç†è¢«è¢«è®¤ä¸ºæ˜¯æµå¼å¤„ç†çš„ä¸€ä¸ªå­é›†ï¼Œæ‰€ä»¥å¯ä»¥çœç•¥æ‰ã€‚</p>
</li>
<li>
<p>Kappaæ¶æ„ç›¸å¯¹æ›´ç®€å•ï¼Œå®æ—¶æ€§æ›´å¥½ï¼Œæ‰€éœ€çš„è®¡ç®—èµ„æºè¿œå°äºLambdaæ¶æ„ï¼Œéšç€å®æ—¶å¤„ç†çš„éœ€æ±‚åœ¨ä¸æ–­å¢é•¿ï¼Œæ›´å¤šçš„ä¼ä¸šå¼€å§‹ä½¿ç”¨Kappaæ¶æ„ã€‚</p>
</li>
</ul>
<p>Kappaæ¶æ„çš„æµè¡Œå¹¶ä¸æ„å‘³ç€ä¸å†éœ€è¦æ‰¹å¤„ç†ï¼Œæ‰¹å¤„ç†åœ¨ä¸€äº›ç‰¹å®šåœºæ™¯ä¸Šä»ç„¶æœ‰è‡ªå·±çš„ä¼˜åŠ¿ã€‚æ¯”å¦‚è¿›è¡Œä¸€äº›æ•°æ®æ¢ç´¢ã€æœºå™¨å­¦ä¹ å®éªŒï¼Œéœ€è¦ä½¿ç”¨æ‰¹å¤„ç†æ¥åå¤éªŒè¯ä¸åŒçš„ç®—æ³•ã€‚Kappaæ¶æ„é€‚ç”¨äºä¸€äº›é€»è¾‘å›ºå®šçš„æ•°æ®é¢„å¤„ç†æµç¨‹ï¼Œå¦‚ç»Ÿè®¡ä¸€ä¸ªæ—¶é—´æ®µå†…å•†å“çš„æ›å…‰å’Œè´­ä¹°æ¬¡æ•°ã€æŸäº›å…³é”®è¯çš„æœç´¢æ¬¡æ•°ç­‰ã€‚</p>
<h2 data-id="heading-13">ç›¸å…³å·¥ä½œ</h2>
<p>mob604756ebed9fåœ¨ä»–çš„åšå®¢[1]é‡Œé€šè¿‡é—®ç­”çš„å½¢å¼ï¼Œè®²è§£äº†å…·ä½“çš„Flinkçš„ä½¿ç”¨æ–¹å¼å’Œé¢è¯•å¸¸è§é—®é¢˜ã€‚</p>
<p>é˜¿å‡¡å¢åœ¨ä»–çš„åšå®¢[2]é‡Œè¯¦ç»†è§£é‡Šäº†å¦‚ä½•å®ç°exactly-once, at-least once, atmost onceç­‰è¯­ä¹‰å’Œå®ç°åŸç†ã€‚</p>
<p>å¤§æ•°æ®æµåŠ¨åœ¨ä»–çš„åšå®¢[3]é‡Œè¯¦ç»†ä»‹ç»äº†Flinkçš„ç®€å•å†å²ã€ç¯å¢ƒæ­å»ºã€æµ‹è¯•ã€ç¼–ç¨‹æ¨¡å‹å’ŒFlink DataStreaming APIçš„ä½¿ç”¨ã€‚</p>
<p>ç‹¬å­¤é£åœ¨ä»–çš„å…¬ä¼—å·æ–‡ç« [4]é‡Œä»‹ç»äº†Flinkæµæ‰¹ä¸€ä½“çš„å®ç°åŸç†ã€‚</p>
<p>kkå¤§æ•°æ®åœ¨è…¾è®¯äº‘+ç¤¾åŒºé‡Œå‘è¡¨äº†æ–‡ç« [5]ä»‹ç»äº†Flinkæ°´ä½å’Œçª—å£çš„å…³ç³»ï¼Œä»‹ç»äº†å‡ ç§çª—å£ä»¥åŠæ°´ä½çš„æ¦‚å¿µã€‚</p>
<p>å…ˆèåœ¨ä»–çš„åšå®¢[6]é‡Œä»‹ç»äº†æµå¼è®¡ç®—çš„èƒŒæ™¯.</p>
<p>Heriamåœ¨ä»–çš„åšæ–‡[7]é‡Œè¯¦ç»†å¹¶ä¸”é€šä¿—æ˜“æ‡‚ä»‹ç»äº†Lamdaæ¶æ„å‡ºç°çš„å†å²åŸå› ï¼ŒLambdaä¸‰å±‚æ¶æ„çš„ç†è§£ã€‚ä»‹ç»Lambdaæ¶æ„çš„æ–‡ç« å¾ˆå¤šï¼Œä½†æ˜¯é€šä¿—æ˜“æ‡‚çš„ä»‹ç»Lambdaæ¶æ„çš„åšå®¢ä¸å¤šï¼Œèƒ½æ·±å…¥æµ…å‡ºè®²æ˜ç™½çš„æ›´æ˜¯çè´µã€‚</p>
<p>åºŸç‰©å¤§å¸ˆå…„åœ¨ä»–çš„æ–‡ç« ã€ŠFlinkå…¥é—¨ã€‹[9]é‡Œï¼Œä»‹ç»äº†Flinké€‚é…çš„è®¡ç®—é›†ç¾¤èµ„æºã€ä»‹ç»äº†Flinkçš„åŸºæœ¬æ¦‚å¿µï¼Œæ¯”å¦‚çŠ¶æ€ã€æ—¶é—´ç›¸å…³çš„ç‰¹æ€§ç­‰ã€‚</p>
<h2 data-id="heading-14">å‚è€ƒ</h2>
<p>[1]mob604756ebed9f, ä¸€ç½‘æ‰“å°½Flinké«˜é¢‘é¢è¯•é¢˜,<a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.51cto.com%2Fu_15127538%2F2659011" target="_blank" title="https://blog.51cto.com/u_15127538/2659011" ref="nofollow noopener noreferrer">blog.51cto.com/u_15127538/â€¦</a></p>
<p>[2]é˜¿å‡¡å¢,Kafkaä¸­çš„exactly-once,<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.cnblogs.com%2Fluxiaoxun%2Fp%2F13048474.html" target="_blank" title="https://www.cnblogs.com/luxiaoxun/p/13048474.html" ref="nofollow noopener noreferrer">www.cnblogs.com/luxiaoxun/pâ€¦</a></p>
<p>[3]å¤§æ•°æ®æµåŠ¨,Flinkå…¥é—¨å®å…¸ï¼ˆè¯¦ç»†æˆªå›¾ç‰ˆï¼‰,<a href="https://juejin.cn/post/684490394427195392" target="_blank" title="https://juejin.cn/post/684490394427195392">juejin.cn/post/684490â€¦</a></p>
<p>[4]ç‹¬å­¤é£/å¤§æ•°æ®æµåŠ¨ï¼ŒFlinkæµæ‰¹ä¸€ä½“å®ç°åŸç†ï¼Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2Fo8ZIinTSeGZvfT19gyU2Eg" target="_blank" title="https://mp.weixin.qq.com/s/o8ZIinTSeGZvfT19gyU2Eg" ref="nofollow noopener noreferrer">mp.weixin.qq.com/s/o8ZIinTSeâ€¦</a></p>
<p>[5]kkå¤§æ•°æ®ï¼Œæ°´ä½å’Œçª—å£ï¼Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fcloud.tencent.com%2Fdeveloper%2Farticle%2F1539213" target="_blank" title="https://cloud.tencent.com/developer/article/1539213" ref="nofollow noopener noreferrer">cloud.tencent.com/developer/aâ€¦</a></p>
<p>[6]å…ˆèï¼Œæµå¼è®¡ç®—ç®€ä»‹ï¼Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Faijishu.com%2Fa%2F1060000000009451" target="_blank" title="https://aijishu.com/a/1060000000009451" ref="nofollow noopener noreferrer">aijishu.com/a/106000000â€¦</a></p>
<p>[7]Heriamï¼Œæ·±å…¥ç†è§£Lamdaæ¶æ„ï¼Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.cnblogs.com%2Fcciejh%2Fp%2Flambda-architecture.html" target="_blank" title="https://www.cnblogs.com/cciejh/p/lambda-architecture.html" ref="nofollow noopener noreferrer">www.cnblogs.com/cciejh/p/laâ€¦</a></p>
<p>[8]çš®çš®é²çš„ç§‘æŠ€æ˜Ÿçƒ,å¤§æ•°æ®å¤„ç†å¹³å°ä»Lambdaåˆ°Kappaçš„æ¼”è¿›,<a href="https://juejin.cn/post/6844904013217923086" target="_blank" title="https://juejin.cn/post/6844904013217923086">juejin.cn/post/684490â€¦</a></p>
<p>[9]åºŸç‰©å¤§å¸ˆå…„, Flink å…¥é—¨, <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.cnblogs.com%2Fcjsblog%2Fp%2F12905871.html" target="_blank" title="https://www.cnblogs.com/cjsblog/p/12905871.html" ref="nofollow noopener noreferrer">www.cnblogs.com/cjsblog/p/1â€¦</a></p>
<p>[10]zhisheng, Flinkä»0åˆ°1å­¦ä¹ â€”â€” åˆ†äº«å››æœ¬ Flink å›½å¤–çš„ä¹¦å’ŒäºŒåå¤šç¯‡ Paper è®ºæ–‡,<a href="https://link.juejin.cn?target=https%3A%2F%2Faijishu.com%2Fa%2F1060000000002768" target="_blank" title="https://aijishu.com/a/1060000000002768" ref="nofollow noopener noreferrer">aijishu.com/a/106000000â€¦</a></p>
<p>[11]Flinkå®˜æ–¹ï¼ŒFlinkçš„å®¹é”™æœºåˆ¶ï¼Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fnightlies.apache.org%2Fflink%2Fflink-docs-master%2Fzh%2Fdocs%2Flearn-flink%2Ffault_tolerance%2F" target="_blank" title="https://nightlies.apache.org/flink/flink-docs-master/zh/docs/learn-flink/fault_tolerance/" ref="nofollow noopener noreferrer">nightlies.apache.org/flink/flinkâ€¦</a></p>
<p>[12]æ—å°é“‚ï¼ŒFlinkå®¹é”™ï¼Œ<a href="https://link.juejin.cn?target=http%3A%2F%2Fwww.whitewood.me%2F2019%2F07%2F28%2F%25E6%25B7%25B1%25E5%2585%25A5%25E7%2590%2586%25E8%25A7%25A3-Flink-%25E5%25AE%25B9%25E9%2594%2599%25E6%259C%25BA%25E5%2588%25B6%2F" target="_blank" title="http://www.whitewood.me/2019/07/28/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3-Flink-%E5%AE%B9%E9%94%99%E6%9C%BA%E5%88%B6/" ref="nofollow noopener noreferrer">www.whitewood.me/2019/07/28/â€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Web æŠ“åŒ…åœ¨æµè§ˆå™¨ã€ä»£ç†ã€è®¾å¤‡ä¾§ç­‰ä¸åŒå±‚é¢çš„ä½œç”¨]]></title>    <link>https://juejin.cn/post/7585825055437963270</link>    <guid>https://juejin.cn/post/7585825055437963270</guid>    <pubDate>2025-12-22T03:42:56.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7585825055437963270" data-draft-id="7585789195870224420" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Web æŠ“åŒ…åœ¨æµè§ˆå™¨ã€ä»£ç†ã€è®¾å¤‡ä¾§ç­‰ä¸åŒå±‚é¢çš„ä½œç”¨"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-22T03:42:56.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç–¯ç‹‚çš„ç¨‹åºçŒ´"/> <meta itemprop="url" content="https://juejin.cn/user/2760245749234147"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Web æŠ“åŒ…åœ¨æµè§ˆå™¨ã€ä»£ç†ã€è®¾å¤‡ä¾§ç­‰ä¸åŒå±‚é¢çš„ä½œç”¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2760245749234147/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç–¯ç‹‚çš„ç¨‹åºçŒ´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-22T03:42:56.000Z" title="Mon Dec 22 2025 03:42:56 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ Web é¡¹ç›®é‡Œï¼ŒæŠ“åŒ…å¸¸å¸¸è¢«å½“ä½œä¸€ä»¶ç†æ‰€å½“ç„¶çš„äº‹æƒ…ã€‚
æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·ï¼Œçœ‹ Network é¢æ¿ï¼Œè¯·æ±‚ã€å“åº”ã€çŠ¶æ€ç éƒ½åœ¨é‚£é‡Œï¼Œä¼¼ä¹å·²ç»è¶³å¤Ÿã€‚</p>
<p>ä½†çœŸæ­£ç»å¸¸ä¼šå‘ç”Ÿå‰ç«¯è¯´è¯·æ±‚å·²ç»å‘å‡ºï¼Œåç«¯è¯´æ—¥å¿—é‡Œæ²¡çœ‹åˆ°ï¼›åç«¯ç¡®è®¤å·²ç»è¿”å›ï¼Œå‰ç«¯å´å§‹ç»ˆæ‹¿ä¸åˆ°æ•°æ®ã€‚</p>
<p>è¿™ç§æ—¶å€™ï¼ŒWeb æŠ“åŒ…æ‰çœŸæ­£è¿›å…¥è§†é‡ã€‚</p>
<hr/>
<h2 data-id="heading-0"><strong>æµè§ˆå™¨ Network é¢æ¿ï¼šæœ€ç†Ÿæ‚‰ï¼Œä¹Ÿæœ€å®¹æ˜“è¢«é«˜ä¼°</strong></h2>
<p>å¯¹ Web å¼€å‘æ¥è¯´ï¼Œæµè§ˆå™¨è‡ªå¸¦çš„ Network é¢æ¿å‡ ä¹æ˜¯é»˜è®¤å·¥å…·ã€‚
å®ƒéå¸¸é€‚åˆåšä¸€ä»¶äº‹ï¼š<strong>éªŒè¯æµè§ˆå™¨å†…éƒ¨å‘ç”Ÿäº†ä»€ä¹ˆ</strong>ã€‚</p>
<p>ä½ å¯ä»¥æ¸…æ¥šçœ‹åˆ°ï¼š</p>
<ul>
<li>è¯·æ±‚çš„å‘èµ·æ—¶æœº</li>
<li>Header æ˜¯å¦ç¬¦åˆé¢„æœŸ</li>
<li>è¿”å›å†…å®¹æ˜¯å¦è¢«æµè§ˆå™¨æ­£ç¡®è§£æ</li>
<li>è¯·æ±‚æ˜¯å¦è¢«ç¼“å­˜æˆ–é‡å®šå‘</li>
</ul>
<p>åœ¨è°ƒè¯•å‰ç«¯é€»è¾‘æ—¶ï¼Œè¿™å·²ç»è§£å†³äº†å¤§éƒ¨åˆ†é—®é¢˜ã€‚</p>
<p>ä½† Network é¢æ¿æœ‰ä¸€ä¸ªå¤©ç„¶é™åˆ¶ï¼šå®ƒåªèƒ½åæ˜ <strong>æµè§ˆå™¨è§†è§’</strong>ä¸‹çš„ç½‘ç»œè¡Œä¸ºã€‚</p>
<hr/>
<h2 data-id="heading-1"><strong>å½“é—®é¢˜ä¸å†åªå‘ç”Ÿåœ¨æµè§ˆå™¨é‡Œ</strong></h2>
<p>Web æŠ“åŒ…å¼€å§‹å˜å¤æ‚ï¼Œé€šå¸¸æ˜¯å› ä¸ºç³»ç»Ÿç»“æ„å˜å¤æ‚äº†ã€‚</p>
<p>æ¯”å¦‚ï¼š</p>
<ul>
<li>Web é¡µé¢è¯·æ±‚çš„æ˜¯ä¸­é—´å±‚æ¥å£</li>
<li>åŒä¸€ä¸ªæ¥å£è¢«å¤šä¸ªå®¢æˆ·ç«¯è°ƒç”¨</li>
<li>è¯·æ±‚ç»è¿‡äº† CDNã€ç½‘å…³æˆ–å®‰å…¨è®¾å¤‡</li>
<li>é¡µé¢ä¾èµ–ç¬¬ä¸‰æ–¹è„šæœ¬æˆ– SDK</li>
</ul>
<p>è¿™æ—¶ï¼Œä»…çœ‹æµè§ˆå™¨ Networkï¼Œå¾ˆéš¾å›ç­”ä¸€ä¸ªå…³é”®é—®é¢˜ï¼š</p>
<blockquote>
<p>è¯·æ±‚åœ¨ç¦»å¼€æµè§ˆå™¨ä¹‹åï¼Œç©¶ç«Ÿå‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ</p>
</blockquote>
<hr/>
<h2 data-id="heading-2"><strong>ä»£ç†æŠ“åŒ…ï¼šæŠŠ Web è¯·æ±‚æ”¾åˆ°â€œç½‘ç»œè·¯å¾„â€ä¸­çœ‹</strong></h2>
<p>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘é€šå¸¸ä¼šå¼•å…¥ä»£ç†æŠ“åŒ…å·¥å…·ï¼Œæ¯”å¦‚Charlesï¼ŒFiddlerã€‚</p>
<p>ä»£ç†æŠ“åŒ…çš„æ„ä¹‰ï¼Œä¸æ˜¯æ›¿ä»£æµè§ˆå™¨å·¥å…·ï¼Œè€Œæ˜¯æ¢ä¸€ä¸ªè§‚å¯Ÿä½ç½®ã€‚
å®ƒèƒ½çœ‹åˆ°è¯·æ±‚åœ¨æµè§ˆå™¨ä¹‹å¤–çš„è¡¨ç°ï¼Œæ¯”å¦‚ï¼š</p>
<ul>
<li>å®é™…è®¿é—®çš„åŸŸåå’Œ IP</li>
<li>Header æ˜¯å¦è¢«ä¸­é—´å±‚ä¿®æ”¹</li>
<li>è¯·æ±‚æ˜¯å¦è¢«é‡è¯•æˆ–é‡å®šå‘</li>
<li>HTTPS è§£å¯†åçš„å®Œæ•´å†…å®¹</li>
</ul>
<p>åœ¨ Web æŠ“åŒ…ä¸­ï¼Œä»£ç†å·¥å…·éå¸¸é€‚åˆç”¨æ¥ç¡®è®¤ï¼š<strong>æ˜¯ä¸æ˜¯æµè§ˆå™¨ä¹‹å¤–çš„æŸä¸ªç¯èŠ‚æ”¹å˜äº†è¯·æ±‚ã€‚</strong></p>
<hr/>
<h2 data-id="heading-3"><strong>HTTPS ä¹‹åï¼ŒWeb æŠ“åŒ…ä¹Ÿä¼šé‡åˆ°â€œçœ‹ä¸æ¸…â€çš„é—®é¢˜</strong></h2>
<p>å½“ Web é¡¹ç›®å…¨é¢åˆ‡æ¢åˆ° HTTPS ä¹‹åï¼ŒæŠ“åŒ…å¹¶ä¸æ€»æ˜¯é‚£ä¹ˆé¡ºåˆ©ã€‚</p>
<p>å¦‚æœé¡µé¢è¯·æ±‚æ¥è‡ª WebViewã€Hybrid åº”ç”¨ï¼Œæˆ–è€…æŸäº›è¯·æ±‚å¹¶ä¸èµ°ç³»ç»Ÿä»£ç†è·¯å¾„ï¼Œä»£ç†æŠ“åŒ…å·¥å…·çœ‹åˆ°çš„å†…å®¹å°±ä¼šå˜å¾—ä¸å®Œæ•´ã€‚</p>
<p>è¿™æ—¶ç»§ç»­çº ç»“â€œä¸ºä»€ä¹ˆæŠ“ä¸åˆ°â€ï¼Œä¸å¦‚å…ˆç¡®è®¤ä¸€ä¸ªäº‹å®ï¼šè¯·æ±‚æ˜¯å¦çœŸçš„æŒ‰ä½ è®¤ä¸ºçš„æ–¹å¼å‘é€äº†ã€‚</p>
<hr/>
<h2 data-id="heading-4"><strong>è®¾å¤‡ä¾§æŠ“åŒ…ï¼Œåœ¨ Web åœºæ™¯ä¸‹ä¹Ÿæœ‰ä»·å€¼</strong></h2>
<p>åœ¨åˆ†æ WebViewã€Hybrid é¡µé¢æˆ–åµŒå…¥å¼ Web è¯·æ±‚æ—¶ï¼Œæˆ‘ä¼šç”¨ <strong>æŠ“åŒ…å¤§å¸ˆï¼ˆSniff Masterï¼‰</strong> ä»è®¾å¤‡ä¾§æŠ“å–é€šä¿¡æ•°æ®ã€‚</p>
<p>å®ƒåœ¨ Web æŠ“åŒ…ä¸­çš„ä½œç”¨ï¼Œå¹¶ä¸æ˜¯æ›¿ä»£æµè§ˆå™¨æˆ–ä»£ç†å·¥å…·ï¼Œè€Œæ˜¯è§£å†³ä¸€ä¸ªç‰¹å®šé—®é¢˜ï¼š</p>
<blockquote>
<p>å½“ Web è¯·æ±‚è¿è¡Œåœ¨ App æˆ–è®¾å¤‡ç¯å¢ƒä¸­æ—¶ï¼Œæˆ‘èƒ½å¦çœ‹åˆ°å®ƒçœŸå®å‘å‡ºçš„ç½‘ç»œè¡Œä¸ºï¼Ÿ</p>
</blockquote>
<p>ç”±äºä¸ä¾èµ–ç³»ç»Ÿä»£ç†ï¼Œä¹Ÿä¸éœ€è¦è¶Šç‹±æˆ– rootï¼Œå®ƒæ›´æ¥è¿‘çœŸå®è¿è¡Œç¯å¢ƒã€‚
è¿™åœ¨æ’æŸ¥â€œWeb é¡µé¢åœ¨ App å†…è¡Œä¸ºå¼‚å¸¸â€æ—¶å°¤å…¶æœ‰ç”¨ã€‚</p>
<hr/>
<h2 data-id="heading-5"><strong>åªæŠ“ç›®æ ‡æµé‡ï¼ŒWeb æŠ“åŒ…æ‰èƒ½ç»§ç»­æ¨è¿›</strong></h2>
<p>åœ¨çœŸå®ç¯å¢ƒä¸‹æŠ“ Web æµé‡ï¼Œå¾ˆå®¹æ˜“è¢«å™ªéŸ³å¹²æ‰°ã€‚
åå°åŒæ­¥ã€ç³»ç»ŸæœåŠ¡ã€å…¶ä»–é¡µé¢è¯·æ±‚ï¼Œå¾ˆå¿«å°±ä¼šè®©åˆ†æå˜å¾—æ··ä¹±ã€‚</p>
<p>æ”¯æŒåªæŠ“å–æŒ‡å®š App æˆ–æŒ‡å®šæµé‡çš„å·¥å…·ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ä»·å€¼ä¼šéå¸¸æ˜æ˜¾ã€‚
å½“ä½ èƒ½æŠŠæ³¨æ„åŠ›é™åˆ¶åœ¨ä¸€ä¸ª Web é¡µé¢æˆ–ä¸€ä¸ªæ¥å£ä¸Šï¼Œå¾ˆå¤šæ¨¡ç³Šçš„é—®é¢˜åè€Œä¼šå˜å¾—å…·ä½“ã€‚</p>
<hr/>
<h2 data-id="heading-6"><strong>Web æŠ“åŒ…å¹¶ä¸æ€»æ˜¯ HTTP å±‚çš„é—®é¢˜</strong></h2>
<p>åœ¨ä¸€äº›å¤æ‚åœºæ™¯ä¸­ï¼ŒWeb è¯·æ±‚åªæ˜¯æ•´ä¸ªé€šä¿¡è¿‡ç¨‹çš„ä¸€éƒ¨åˆ†ã€‚</p>
<p>ä¾‹å¦‚ï¼š</p>
<ul>
<li>Web é¡µé¢è§¦å‘æ¥å£ï¼Œæ¥å£å†å»ºç«‹é•¿è¿æ¥</li>
<li>Web é…ç½®è¯·æ±‚æˆåŠŸï¼Œä½†æ•°æ®æ¨é€å¤±è´¥</li>
<li>Web è¡Œä¸ºä¾èµ– TCP æˆ– WebSocket é€šä¿¡</li>
</ul>
<p>å¦‚æœåªåœç•™åœ¨ HTTP æŠ“åŒ…å±‚é¢ï¼Œå¾ˆå®¹æ˜“è¯¯åˆ¤â€œè¯·æ±‚å·²ç»å®Œæˆâ€ã€‚</p>
<p>è¿™æ—¶ï¼Œå°±éœ€è¦ç»“åˆæ•°æ®æµæŠ“åŒ…ï¼Œå»ç¡®è®¤è¿æ¥æ˜¯å¦å»ºç«‹ã€æ˜¯å¦ä¿æŒã€‚
æŠ“åŒ…å¤§å¸ˆæ”¯æŒ TCP / UDP æ•°æ®æµæŠ“å–ï¼Œåœ¨åˆ†æè¿™ç±»æ··åˆé€šä¿¡æ¨¡å‹æ—¶ï¼Œèƒ½è¡¥é½ HTTP çœ‹ä¸åˆ°çš„éƒ¨åˆ†ã€‚</p>
<hr/>
<h2 data-id="heading-7"><strong>Wireshark å¯ä»¥ç”¨æ¥è§£ææ›´ç»†èŠ‚çš„è¯·æ±‚</strong></h2>
<p>åœ¨ Web æŠ“åŒ…åˆ†æä¸­ï¼Œæˆ‘å¹¶ä¸ä¼šé¢‘ç¹ä½¿ç”¨ Wiresharkã€‚
å®ƒæ›´åƒæ˜¯ä¸€ä¸ªåœ¨å…³é”®èŠ‚ç‚¹å‡ºç°çš„å·¥å…·ï¼Œç”¨æ¥ç¡®è®¤ä¸€äº›åº•å±‚äº‹å®ï¼Œæ¯”å¦‚ï¼š</p>
<ul>
<li>TCP è¿æ¥æ˜¯å¦è¢«é‡ç½®</li>
<li>æ•°æ®æ˜¯å¦å‘ç”Ÿé‡ä¼ </li>
<li>ç½‘ç»œå±‚æ˜¯å¦å­˜åœ¨å¼‚å¸¸</li>
</ul>
<p>åœ¨æ²¡æœ‰æ˜ç¡®æ–¹å‘ä¹‹å‰ï¼Œè¿‡æ—©ä½¿ç”¨ Wiresharkï¼Œåè€Œå®¹æ˜“è®©äººè¿·å¤±åœ¨ç»†èŠ‚é‡Œã€‚</p>
<hr/>
<h2 data-id="heading-8"><strong>æ‹¦æˆªå’Œä¿®æ”¹ï¼Œç”¨æ¥éªŒè¯ç†è§£æ˜¯å¦æ­£ç¡®</strong></h2>
<p>ç†è§£ Web æŠ“åŒ…çš„å¦ä¸€ç§æ–¹å¼ï¼Œæ˜¯ä¸»åŠ¨æ”¹å˜è¯·æ±‚ã€‚</p>
<p>åœ¨æ’æŸ¥è¿‡ç¨‹ä¸­ï¼Œæˆ‘ç»å¸¸ä¼šä¿®æ”¹ Headerã€è¿”å›çŠ¶æ€ç æˆ–å“åº”å†…å®¹ï¼Œè§‚å¯Ÿå‰ç«¯è¡Œä¸ºå˜åŒ–ã€‚
è¿™ç§åšæ³•ï¼Œæ¯”å•çº¯â€œçœ‹æ•°æ®â€æ›´å®¹æ˜“éªŒè¯å¯¹ç³»ç»Ÿçš„ç†è§£æ˜¯å¦æ­£ç¡®ã€‚</p>
<p>æŠ“åŒ…å¤§å¸ˆæ”¯æŒé€šè¿‡è„šæœ¬æ‹¦æˆªå’Œä¿®æ”¹è¯·æ±‚ã€å“åº”ï¼Œåœ¨è¿™ä¸€æ­¥æ›´åƒæ˜¯ä¸€ä¸ªå®éªŒå·¥å…·ï¼Œè€Œä¸æ˜¯åˆ†æå·¥å…·ã€‚</p>
<hr/>
<h2 data-id="heading-9"><strong>å¯¹ Web æŠ“åŒ…çš„ä¸€ç‚¹å®é™…ä½“ä¼š</strong></h2>
<p>åšè¿‡å‡ æ¬¡å¤æ‚æ’æŸ¥ä¹‹åï¼Œæˆ‘å¯¹ Web æŠ“åŒ…çš„çœ‹æ³•å˜å¾—æ›´åŠ è°¨æ…ï¼š</p>
<ul>
<li>æµè§ˆå™¨å·¥å…·è§£å†³çš„æ˜¯â€œé¡µé¢å†…éƒ¨â€çš„é—®é¢˜</li>
<li>ä»£ç†æŠ“åŒ…è§£å†³çš„æ˜¯â€œç½‘ç»œè·¯å¾„â€çš„é—®é¢˜</li>
<li>è®¾å¤‡ä¾§æŠ“åŒ…è§£å†³çš„æ˜¯â€œçœŸå®è¿è¡Œç¯å¢ƒâ€çš„é—®é¢˜</li>
<li>æ•°æ®æµæŠ“åŒ…è§£å†³çš„æ˜¯â€œè¿æ¥æ˜¯å¦æˆç«‹â€çš„é—®é¢˜</li>
</ul>
<p>å¤šå·¥å…·ç»„åˆï¼Œå¹¶ä¸æ˜¯ä¸ºäº†æ˜¾å¾—å¤æ‚ï¼Œè€Œæ˜¯ä¸ºäº†é¿å…åœ¨é”™è¯¯å±‚é¢åå¤çº ç»“ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¼€ç®±å³ç”¨çš„ GoWind Adminï½œé£è¡Œï¼Œä¼ä¸šçº§å‰åç«¯ä¸€ä½“ä¸­åå°æ¡†æ¶ï¼šç”¨ JavaScript/Lua è§£é”åŠ¨æ€ä¸šåŠ¡æ‰©å±•èƒ½åŠ›]]></title>    <link>https://juejin.cn/post/7585897699603562522</link>    <guid>https://juejin.cn/post/7585897699603562522</guid>    <pubDate>2025-12-22T03:49:37.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7585897699603562522" data-draft-id="7586167377381818394" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¼€ç®±å³ç”¨çš„ GoWind Adminï½œé£è¡Œï¼Œä¼ä¸šçº§å‰åç«¯ä¸€ä½“ä¸­åå°æ¡†æ¶ï¼šç”¨ JavaScript/Lua è§£é”åŠ¨æ€ä¸šåŠ¡æ‰©å±•èƒ½åŠ›"/> <meta itemprop="keywords" content="Go,JavaScript,Lua"/> <meta itemprop="datePublished" content="2025-12-22T03:49:37.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å–µä¸ªå’ª"/> <meta itemprop="url" content="https://juejin.cn/user/1350630784901262"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¼€ç®±å³ç”¨çš„ GoWind Adminï½œé£è¡Œï¼Œä¼ä¸šçº§å‰åç«¯ä¸€ä½“ä¸­åå°æ¡†æ¶ï¼šç”¨ JavaScript/Lua è§£é”åŠ¨æ€ä¸šåŠ¡æ‰©å±•èƒ½åŠ›
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1350630784901262/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å–µä¸ªå’ª
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-22T03:49:37.000Z" title="Mon Dec 22 2025 03:49:37 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼€ç®±å³ç”¨çš„ GoWind Adminï½œé£è¡Œï¼Œä¼ä¸šçº§å‰åç«¯ä¸€ä½“ä¸­åå°æ¡†æ¶ï¼šç”¨ JavaScript/Lua è§£é”åŠ¨æ€ä¸šåŠ¡æ‰©å±•èƒ½åŠ›</h2>
<p>åœ¨ä¼ä¸šçº§ä¸­åå°ç³»ç»Ÿå¼€å‘é¢†åŸŸï¼Œã€Œä¸šåŠ¡è§„åˆ™é¢‘ç¹è¿­ä»£ã€ä¸ã€Œä¸ªæ€§åŒ–éœ€æ±‚å¿«é€Ÿå“åº”ã€å§‹ç»ˆæ˜¯å›°æ‰°å¼€å‘å›¢é˜Ÿçš„æ ¸å¿ƒç—›ç‚¹ã€‚è¯•æƒ³è¿™æ ·çš„åœºæ™¯ï¼šç”µå•†å¹³å°çš„ä¿ƒé”€è§„åˆ™éœ€éšèŠ‚æ—¥å®æ—¶è°ƒæ•´ï¼Œ SaaS ç³»ç»Ÿéœ€ä¸ºä¸åŒè¡Œä¸šå®¢æˆ·å®šåˆ¶ä¸“å±å®¡æ‰¹æµç¨‹ï¼Œé£æ§ç³»ç»Ÿéœ€æ ¹æ®æœ€æ–°é£é™©æ¨¡å‹åŠ¨æ€æ›´æ–°æ ¡éªŒé€»è¾‘â€¦â€¦ ä¼ ç»Ÿã€Œä»£ç å¼€å‘ - ç¼–è¯‘æ‰“åŒ… - éƒ¨ç½²ä¸Šçº¿ã€çš„å…¨æµç¨‹ï¼Œå¾€å¾€éœ€è¦æ•°å°æ—¶ç”šè‡³æ•°å¤©æ‰èƒ½å®Œæˆè¿­ä»£ï¼Œä¸¥é‡æ»åäºä¸šåŠ¡èŠ‚å¥ã€‚</p>
<p>è„šæœ¬å¼•æ“çš„åµŒå…¥å¼é›†æˆï¼Œä¸ºè¿™ä¸€å›°å¢ƒæä¾›äº†ä¼˜é›…çš„ç ´å±€æ€è·¯â€”â€”é€šè¿‡åŠ¨æ€æ‰§è¡Œè„šæœ¬ä»£ç ï¼Œå®ç°ä¸šåŠ¡é€»è¾‘çš„ã€Œçƒ­æ›´æ–°ã€çƒ­éƒ¨ç½²ã€ï¼Œæ— éœ€é‡å¯æœåŠ¡å³å¯å®Œæˆè§„åˆ™è¿­ä»£ä¸éœ€æ±‚é€‚é…ã€‚GoWind Adminï¼ˆé£è¡Œï¼‰ä½œä¸ºä¸€æ¬¾ä¸»æ‰“ã€Œå¼€ç®±å³ç”¨ã€çš„ä¼ä¸šçº§å‰åç«¯ä¸€ä½“ä¸­åå°æ¡†æ¶ï¼Œç²¾å‡†æ´å¯Ÿè¿™ä¸€éœ€æ±‚ï¼Œæ·±åº¦æ•´åˆ <code>kratos-bootstrap</code> ç”Ÿæ€ä¸­çš„ <code>script_engine</code> ç»„ä»¶ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftx7do%2Fkratos-bootstrap%2Ftree%2Fmain%2Fscript_engine" target="_blank" title="https://github.com/tx7do/kratos-bootstrap/tree/main/script_engine" ref="nofollow noopener noreferrer">github.com/tx7do/kratoâ€¦</a>ï¼‰ï¼Œå®ç°äº†å¯¹ JavaScriptã€Lua ä¸¤ç§ä¸»æµè„šæœ¬è¯­è¨€çš„æ— ç¼æ”¯æŒï¼Œè®©å¼€å‘è€…èƒ½å¤Ÿä»¥æä½æˆæœ¬åµŒå…¥åŠ¨æ€é€»è¾‘ï¼Œä¸ºä¸­åå°ç³»ç»Ÿæ³¨å…¥ã€Œéšéœ€è€Œå˜ã€çš„çµæ´»åŸºå› ã€‚</p>
<h3 data-id="heading-1">ä¸ºä»€ä¹ˆé€‰æ‹© script_engineï¼ŸGo ç”Ÿæ€ä¸‹çš„åµŒå…¥å¼è„šæœ¬å¼•æ“ä¼˜é€‰</h3>
<p>åœ¨ Go åº”ç”¨ä¸­å®ç°åŠ¨æ€è„šæœ¬èƒ½åŠ›ï¼Œå¹¶éåªæœ‰<code>script_engine</code> ä¸€ç§é€‰æ‹©ï¼Œä½†ç»“åˆä¼ä¸šçº§ä¸­åå°ç³»ç»Ÿã€Œé«˜æ€§èƒ½ã€é«˜å¯é ã€æ˜“é›†æˆã€çš„æ ¸å¿ƒè¯‰æ±‚ï¼Œå®ƒæˆä¸ºäº† GoWind Admin çš„æœ€ä¼˜è§£ã€‚è¿™æ¬¾ä¸“ä¸º Go åº”ç”¨è®¾è®¡çš„åµŒå…¥å¼è„šæœ¬å¼•æ“ç»„ä»¶ï¼Œæ ¸å¿ƒä¼˜åŠ¿ä½“ç°åœ¨å››ä¸ªç»´åº¦ï¼š</p>
<h4 data-id="heading-2">1. å¤šè¯­è¨€è¦†ç›–ï¼Œé€‚é…å…¨åœºæ™¯åŠ¨æ€éœ€æ±‚</h4>
<p>åŸç”Ÿæ”¯æŒ Lua ä¸ JavaScript ä¸¤ç§ä¸»æµè„šæœ¬è¯­è¨€ï¼Œç²¾å‡†åŒ¹é…ä¸åŒä¸šåŠ¡åœºæ™¯ä¸å¼€å‘å›¢é˜Ÿçš„æŠ€æœ¯æ ˆï¼š</p>
<ul>
<li><strong>Lua</strong>ï¼šä»¥è½»é‡ã€é«˜æ•ˆã€ä½èµ„æºå ç”¨è‘—ç§°ï¼Œå­—èŠ‚ç æ‰§è¡Œé€Ÿåº¦å¿«ï¼Œå†…å­˜å¼€é”€å°ï¼Œç‰¹åˆ«é€‚åˆé«˜é¢‘æ‰§è¡Œçš„è½»é‡çº§ä¸šåŠ¡é€»è¾‘ï¼ˆå¦‚è®¢å•é‡‘é¢è®¡ç®—ã€é£æ§è§„åˆ™æ ¡éªŒã€æ•°æ®æ ¼å¼è½¬æ¢ç­‰ï¼‰ï¼›</li>
<li><strong>JavaScript</strong>ï¼šå‰ç«¯å¼€å‘è€…çš„ã€Œæ¯è¯­ã€ï¼Œæ— éœ€é¢å¤–å­¦ä¹ æˆæœ¬å³å¯å‚ä¸åç«¯åŠ¨æ€é€»è¾‘å¼€å‘ï¼Œå®Œç¾é€‚é…å‰åç«¯ååŒåœºæ™¯ï¼ˆå¦‚è¡¨å•æ ¡éªŒè§„åˆ™åŒæ­¥ã€é¡µé¢äº¤äº’é€»è¾‘å¤ç”¨ç­‰ï¼‰ã€‚</li>
</ul>
<p>ä¸¤ç§è¯­è¨€çš„æ— ç¼åˆ‡æ¢ï¼Œè®©å¼€å‘å›¢é˜Ÿå¯æ ¹æ®ä¸šåŠ¡ç‰¹æ€§çµæ´»é€‰å‹ï¼Œé¿å…ã€Œä¸ºé€‚é…è„šæœ¬è¯­è¨€è€Œè°ƒæ•´æŠ€æœ¯æ ˆã€çš„å°´å°¬ã€‚</p>
<h4 data-id="heading-3">2. æ™ºèƒ½æ± åŒ–ç®¡ç†ï¼Œå¹³è¡¡æ€§èƒ½ä¸èµ„æºå¼€é”€</h4>
<p>è„šæœ¬å¼•æ“çš„åˆ›å»ºä¸é”€æ¯æ˜¯å…¸å‹çš„ã€Œé‡æ“ä½œã€ï¼Œè‹¥æ¯æ¬¡è„šæœ¬æ‰§è¡Œéƒ½é‡æ–°åˆå§‹åŒ–å¼•æ“ï¼Œä¼šäº§ç”Ÿå¤§é‡æ€§èƒ½æŸè€—ï¼Œå°¤å…¶åœ¨ä¸­åå°ç³»ç»Ÿé«˜å¹¶å‘åœºæ™¯ä¸‹ï¼Œå¯èƒ½æˆä¸ºæ€§èƒ½ç“¶é¢ˆã€‚<code>script_engine</code> æä¾›ä¸¤ç§æˆç†Ÿçš„å¼•æ“æ± å®ç°ï¼Œé€šè¿‡å®ä¾‹å¤ç”¨å½»åº•è§£å†³è¿™ä¸€é—®é¢˜ï¼š</p>
<ul>
<li><strong>EnginePoolï¼ˆå›ºå®šå¤§å°æ± ï¼‰</strong>ï¼šåˆå§‹åŒ–æ—¶åˆ›å»ºå›ºå®šæ•°é‡çš„å¼•æ“å®ä¾‹ï¼Œé€‚ç”¨äºå¹¶å‘é‡ç¨³å®šçš„åœºæ™¯ï¼Œèµ„æºå ç”¨å¯é¢„æµ‹ï¼Œé¿å…ä¸å¿…è¦çš„æ‰©å®¹å¼€é”€ï¼›</li>
<li><strong>AutoGrowEnginePoolï¼ˆè‡ªåŠ¨æ‰©å®¹æ± ï¼‰</strong>ï¼šæ”¯æŒæ ¹æ®è¯·æ±‚é‡åŠ¨æ€æ‰©å®¹ï¼Œåˆå§‹åˆ›å»ºå°‘é‡å®ä¾‹èŠ‚çœèµ„æºï¼Œå½“å¹¶å‘è¯·æ±‚æ¿€å¢æ—¶è‡ªåŠ¨æ–°å¢å®ä¾‹ï¼ˆä¸è¶…è¿‡ä¸Šé™ï¼‰ï¼Œæµé‡å›è½æ—¶é‡Šæ”¾ç©ºé—²å®ä¾‹ï¼Œå®Œç¾é€‚é…ä¸­åå°ç³»ç»Ÿã€Œæ½®æ±å¼æµé‡ã€ç‰¹å¾ï¼ˆå¦‚è´¢åŠ¡ç»“ç®—é«˜å³°æœŸã€æŠ¥è¡¨å¯¼å‡ºå³°å€¼ç­‰ï¼‰ã€‚</li>
</ul>
<p>æ± åŒ–æœºåˆ¶çš„å¼•å…¥ï¼Œè®©åŠ¨æ€è„šæœ¬æ‰§è¡Œçš„æ€§èƒ½æŸè€—é™ä½ 80% ä»¥ä¸Šï¼ŒåŒæ—¶é€šè¿‡å®ä¾‹ä¸Šé™æ§åˆ¶ï¼Œé¿å…èµ„æºè€—å°½é£é™©ï¼Œå…¼é¡¾çµæ´»æ€§ä¸ç¨³å®šæ€§ã€‚</p>
<h4 data-id="heading-4">3. åŒå‘æ·±åº¦äº¤äº’ï¼Œæ‰“é€š Go ä¸è„šæœ¬çš„èƒ½åŠ›è¾¹ç•Œ</h4>
<p>ä¼˜ç§€çš„åµŒå…¥å¼è„šæœ¬å¼•æ“ï¼Œæ ¸å¿ƒåœ¨äºã€Œä¸å­¤ç«‹ã€â€”â€”èƒ½å¤Ÿä¸å®¿ä¸»åº”ç”¨ï¼ˆGo ç¨‹åºï¼‰å®ç°æ·±åº¦ååŒã€‚<code>script_engine</code> æ”¯æŒ Go ä¸è„šæœ¬è¯­è¨€çš„åŒå‘é€šä¿¡ï¼Œå®ç°ä¸šåŠ¡é€»è¾‘çš„çµæ´»æ‹†åˆ†ä¸ç»„åˆï¼š</p>
<ul>
<li><strong>Go å‘è„šæœ¬æ³¨å…¥èƒ½åŠ›</strong>ï¼šå¯å°† Go ä¸­çš„å…¨å±€å˜é‡ã€ä¸šåŠ¡å‡½æ•°ã€ç»“æ„ä½“å®ä¾‹æ³¨å†Œåˆ°è„šæœ¬ç¯å¢ƒï¼Œè®©è„šæœ¬ç›´æ¥è°ƒç”¨æ¡†æ¶æ ¸å¿ƒèƒ½åŠ›ï¼ˆå¦‚ç”¨æˆ·è®¤è¯ã€æ•°æ®æŸ¥è¯¢ã€æ¶ˆæ¯æ¨é€ç­‰ï¼‰ï¼Œæ— éœ€é‡å¤å¼€å‘ï¼›</li>
<li><strong>è„šæœ¬å‘ Go åé¦ˆç»“æœ</strong>ï¼šGo å¯ç›´æ¥è°ƒç”¨è„šæœ¬ä¸­å®šä¹‰çš„å‡½æ•°ï¼Œè·å–è¿”å›ç»“æœå¹¶é›†æˆåˆ°æ ¸å¿ƒæµç¨‹ä¸­ï¼Œå®ç°ã€Œå›ºå®šæ¡†æ¶ + åŠ¨æ€é€»è¾‘ã€çš„æ¶æ„æ¨¡å¼ã€‚</li>
</ul>
<h4 data-id="heading-5">4. æ ‡å‡†åŒ–é›†æˆï¼Œå¼€ç®±å³ç”¨é›¶é—¨æ§›</h4>
<p>ä½œä¸º <code>kratos-bootstrap</code> ç”Ÿæ€çš„æ ¸å¿ƒç»„ä»¶ï¼Œ`script_engineéµå¾ªæ ‡å‡†åŒ–çš„æ¥å£è®¾è®¡ï¼Œä¸ GoWind Admin çš„æ¶æ„ä½“ç³»æ— ç¼èåˆã€‚å¼€å‘è€…æ— éœ€å…³æ³¨åº•å±‚å¼•æ“å®ç°ã€å†…å­˜ç®¡ç†ã€å¹¶å‘æ§åˆ¶ç­‰ç»†èŠ‚ï¼Œåªéœ€é€šè¿‡ç®€å•çš„ API è°ƒç”¨ï¼Œå³å¯å®Œæˆè„šæœ¬å¼•æ“çš„åˆå§‹åŒ–ã€èµ„æºæ³¨å†Œã€è„šæœ¬æ‰§è¡Œç­‰æ“ä½œï¼ŒçœŸæ­£å®ç°ã€Œå¼€ç®±å³ç”¨ã€ã€‚</p>
<h3 data-id="heading-6">æ ¸å¿ƒå®è·µï¼šGoWind Admin ä¸­åŠ¨æ€è„šæœ¬èƒ½åŠ›çš„è½åœ°æ­¥éª¤</h3>
<p>GoWind Admin åŸºäº <code>script_engine</code> å®ç°åŠ¨æ€ä¸šåŠ¡æ‰©å±•çš„æ ¸å¿ƒæµç¨‹ï¼Œå¯æ¦‚æ‹¬ä¸ºã€Œåˆå§‹åŒ–å¼•æ“æ±  - æ³¨å†Œäº¤äº’èµ„æº - æ‰§è¡ŒåŠ¨æ€è„šæœ¬ - è·¨è¯­è¨€å‡½æ•°è°ƒç”¨ã€å››æ­¥é—­ç¯ã€‚ä»¥ä¸‹ç»“åˆä¼ä¸šçº§çœŸå®åœºæ™¯ï¼Œæ‹†è§£æ¯ä¸€æ­¥çš„å®ç°ç»†èŠ‚ä¸æœ€ä½³å®è·µï¼š</p>
<h4 data-id="heading-7">1. å¼•æ“æ± åˆå§‹åŒ–ï¼šæŒ‰éœ€é€‰å‹ï¼Œé€‚é…å¹¶å‘åœºæ™¯</h4>
<p>ä¸­åå°ç³»ç»Ÿçš„å¹¶å‘ç‰¹å¾å·®å¼‚è¾ƒå¤§ï¼ˆå¦‚åå°ç®¡ç†ç³»ç»Ÿå¹¶å‘ä½ä½†åœºæ™¯å¤æ‚ï¼Œäº¤æ˜“ç³»ç»Ÿå¹¶å‘é«˜ä¸”å®æ—¶æ€§è¦æ±‚é«˜ï¼‰ï¼ŒGoWind Admin æ”¯æŒæ ¹æ®ä¸šåŠ¡åœºæ™¯é€‰æ‹©åˆé€‚çš„å¼•æ“æ± ç±»å‹ã€‚ä»¥ä¸‹ä»¥æœ€å¸¸ç”¨çš„ã€Œè‡ªåŠ¨æ‰©å®¹å¼•æ“æ± ã€ä¸ºä¾‹ï¼Œå±•ç¤º JavaScript å¼•æ“çš„åˆå§‹åŒ–è¿‡ç¨‹ï¼š</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">import</span> (
	<span class="hljs-string">"context"</span>
	<span class="hljs-string">"fmt"</span>
	<span class="hljs-string">"log"</span>

	conf <span class="hljs-string">"github.com/tx7do/kratos-bootstrap/api/gen/go/conf/v1"</span>
	<span class="hljs-string">"github.com/tx7do/kratos-bootstrap/script_engine"</span>
	_ <span class="hljs-string">"github.com/tx7do/go-scripts/javascript"</span> <span class="hljs-comment">// æ³¨å†ŒJavaScriptå¼•æ“é©±åŠ¨</span>

	<span class="hljs-string">"google.golang.org/protobuf/types/known/wrapperspb"</span>
)

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">initScriptEngine</span><span class="hljs-params">()</span></span> (script_engine.ScriptEngine, <span class="hljs-type">error</span>) {
	<span class="hljs-comment">// 1. é…ç½®å¼•æ“å‚æ•°ï¼šæŒ‡å®šè„šæœ¬è¯­è¨€ã€æ± åŒ–ç­–ç•¥</span>
	cfg := &amp;conf.Script{
		Engine: conf.Script_JAVASCRIPT, <span class="hljs-comment">// é€‰æ‹©JavaScriptå¼•æ“</span>
		Pool: &amp;conf.Script_Pool{
			Initial: &amp;wrapperspb.Int32Value{Value: <span class="hljs-number">2</span>}, <span class="hljs-comment">// åˆå§‹å®ä¾‹æ•°ï¼š2ä¸ª</span>
			Max:     &amp;wrapperspb.Int32Value{Value: <span class="hljs-number">10</span>}, <span class="hljs-comment">// æœ€å¤§å®ä¾‹æ•°ï¼š10ä¸ªï¼ˆé¿å…èµ„æºè€—å°½ï¼‰</span>
			IdleTimeout: &amp;wrapperspb.DurationValue{Value: <span class="hljs-number">300</span>}, <span class="hljs-comment">// ç©ºé—²å®ä¾‹è¶…æ—¶é”€æ¯ï¼š300ç§’</span>
		},
	}

	<span class="hljs-comment">// 2. åˆå§‹åŒ–å¼•æ“æ± </span>
	enginePool, err := script_engine.NewAutoGrowScriptEnginePool(cfg)
	<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
		log.Printf(<span class="hljs-string">"å¼•æ“æ± åˆå§‹åŒ–å¤±è´¥ï¼š%v"</span>, err)
		<span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>, err
	}

	<span class="hljs-comment">// 3. å»¶è¿Ÿå…³é—­å¼•æ“æ± ï¼ˆç¨‹åºé€€å‡ºæ—¶é‡Šæ”¾èµ„æºï¼‰</span>
	<span class="hljs-keyword">defer</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> {
		<span class="hljs-keyword">if</span> err := enginePool.Close(); err != <span class="hljs-literal">nil</span> {
			log.Printf(<span class="hljs-string">"å¼•æ“æ± å…³é—­å¤±è´¥ï¼š%v"</span>, err)
		}
	}()

	<span class="hljs-keyword">return</span> enginePool, <span class="hljs-literal">nil</span>
}
</code></pre>
<blockquote>
<p>æœ€ä½³å®è·µï¼šåˆå§‹åŒ–æ—¶å»ºè®®æ ¹æ®ä¸šåŠ¡å³°å€¼é¢„ä¼°æœ€å¤§å®ä¾‹æ•°ï¼Œé¿å…è®¾ç½®è¿‡é«˜å¯¼è‡´å†…å­˜æº¢å‡ºï¼›åŒæ—¶é…ç½®ç©ºé—²è¶…æ—¶æ—¶é—´ï¼Œé‡Šæ”¾é•¿æœŸé—²ç½®çš„å¼•æ“å®ä¾‹ï¼ŒèŠ‚çœèµ„æºã€‚</p>
</blockquote>
<h4 data-id="heading-8">2. æ³¨å†Œäº¤äº’èµ„æºï¼šæ‰“é€š Go ä¸è„šæœ¬çš„èƒ½åŠ›é€šé“</h4>
<p>ä¸ºè®©è„šæœ¬èƒ½å¤Ÿå¤ç”¨ GoWind Admin çš„æ ¸å¿ƒä¸šåŠ¡èƒ½åŠ›ï¼Œéœ€å°†æ¡†æ¶ä¸­çš„å‡½æ•°ã€æ•°æ®ç»“æ„æ³¨å†Œåˆ°è„šæœ¬ç¯å¢ƒã€‚ä»¥ä¸‹ä»¥ã€Œç”¨æˆ·çŠ¶æ€ç®¡ç†ã€åœºæ™¯ä¸ºä¾‹ï¼Œå±•ç¤º Go å‡½æ•°å‘ <code>JavaScript</code> è„šæœ¬çš„æ³¨å†Œè¿‡ç¨‹ï¼š</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// å®šä¹‰Goä¸­çš„æ ¸å¿ƒä¸šåŠ¡å‡½æ•°ï¼šæ›´æ–°ç”¨æˆ·çŠ¶æ€ï¼ˆçœŸå®åœºæ™¯ä¸­ä¼šå¯¹æ¥æ•°æ®åº“ã€ç¼“å­˜ç­‰ï¼‰</span>
<span class="hljs-keyword">type</span> UserService <span class="hljs-keyword">struct</span>{}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(s *UserService)</span></span> UpdateUserStatus(userId <span class="hljs-type">int64</span>, status <span class="hljs-type">string</span>) (<span class="hljs-type">bool</span>, <span class="hljs-type">error</span>) {
	<span class="hljs-comment">// æ¨¡æ‹Ÿä¸šåŠ¡é€»è¾‘ï¼šæ ¡éªŒç”¨æˆ·å­˜åœ¨æ€§ã€æ›´æ–°çŠ¶æ€</span>
	<span class="hljs-keyword">if</span> userId &lt;= <span class="hljs-number">0</span> {
		<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>, fmt.Errorf(<span class="hljs-string">"æ— æ•ˆç”¨æˆ·ID"</span>)
	}
	<span class="hljs-comment">// å®é™…åœºæ™¯ï¼šè°ƒç”¨ORMæ¡†æ¶æ›´æ–°æ•°æ®åº“</span>
	log.Printf(<span class="hljs-string">"ç”¨æˆ·[%d]çŠ¶æ€æ›´æ–°ä¸ºï¼š%s"</span>, userId, status)
	<span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>, <span class="hljs-literal">nil</span>
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">registerResources</span><span class="hljs-params">(eng script_engine.Engine)</span></span> <span class="hljs-type">error</span> {
	<span class="hljs-comment">// 1. åˆå§‹åŒ–ä¸šåŠ¡æœåŠ¡å®ä¾‹</span>
	userService := &amp;UserService{}

	<span class="hljs-comment">// 2. æ³¨å†Œä¸šåŠ¡å‡½æ•°åˆ°è„šæœ¬ç¯å¢ƒï¼Œè„šæœ¬ä¸­å¯é€šè¿‡"updateUserStatus"ç›´æ¥è°ƒç”¨</span>
	err := eng.RegisterFunction(<span class="hljs-string">"updateUserStatus"</span>, userService.UpdateUserStatus)
	<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
		<span class="hljs-keyword">return</span> fmt.Errorf(<span class="hljs-string">"æ³¨å†ŒUpdateUserStatuså¤±è´¥ï¼š%v"</span>, err)
	}

	<span class="hljs-comment">// 3. æ³¨å†Œå…¨å±€å˜é‡åˆ°è„šæœ¬ç¯å¢ƒï¼ˆå¦‚ç³»ç»Ÿé…ç½®ã€å¸¸é‡ç­‰ï¼‰</span>
	err = eng.RegisterVariable(<span class="hljs-string">"SYSTEM_ENV"</span>, <span class="hljs-string">"production"</span>)
	<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
		<span class="hljs-keyword">return</span> fmt.Errorf(<span class="hljs-string">"æ³¨å†Œå…¨å±€å˜é‡å¤±è´¥ï¼š%v"</span>, err)
	}

	<span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>
}
</code></pre>
<p>æ³¨å†Œå®Œæˆåï¼ŒJavaScript è„šæœ¬å³å¯ç›´æ¥è°ƒç”¨è¿™äº›èµ„æºï¼Œå®ç°ä¸æ¡†æ¶æ ¸å¿ƒé€»è¾‘çš„ååŒï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// JavaScriptè„šæœ¬ä¸­è°ƒç”¨Goæ³¨å†Œçš„å‡½æ•°</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleUserStatus</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> userId = <span class="hljs-number">10086</span>;
    <span class="hljs-keyword">const</span> targetStatus = <span class="hljs-string">"active"</span>;
    
    <span class="hljs-comment">// è°ƒç”¨Goæ³¨å†Œçš„updateUserStatuså‡½æ•°</span>
    <span class="hljs-keyword">const</span> [success, err] = <span class="hljs-keyword">await</span> <span class="hljs-title function_">updateUserStatus</span>(userId, targetStatus);
    
    <span class="hljs-keyword">if</span> (success) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`ç”¨æˆ·<span class="hljs-subst">${userId}</span>çŠ¶æ€æ›´æ–°æˆåŠŸï¼Œå½“å‰ç¯å¢ƒï¼š<span class="hljs-subst">${SYSTEM_ENV}</span>`</span>);
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`æ›´æ–°å¤±è´¥ï¼š<span class="hljs-subst">${err.message}</span>`</span>);
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
}
</code></pre>
<h4 data-id="heading-9">3. æ‰§è¡ŒåŠ¨æ€è„šæœ¬ï¼šåŠ è½½å¹¶è¿è¡Œè‡ªå®šä¹‰ä¸šåŠ¡é€»è¾‘</h4>
<p>GoWind Admin æ”¯æŒé€šè¿‡ã€Œå­—ç¬¦ä¸²ã€æœ¬åœ°æ–‡ä»¶ã€è¿œç¨‹æµã€ä¸‰ç§æ–¹å¼åŠ è½½è„šæœ¬ï¼Œé€‚é…ä¸åŒåœºæ™¯çš„åŠ¨æ€é€»è¾‘éƒ¨ç½²éœ€æ±‚ï¼ˆå¦‚æœ¬åœ°è°ƒè¯•ç”¨å­—ç¬¦ä¸²ã€ç”Ÿäº§ç¯å¢ƒç”¨è¿œç¨‹é…ç½®ä¸­å¿ƒåŠ è½½è„šæœ¬ï¼‰ã€‚ä»¥ä¸‹ä»¥ã€Œè®¢å•é‡‘é¢è®¡ç®—ã€åœºæ™¯ä¸ºä¾‹ï¼Œå±•ç¤º <code>Lua</code> è„šæœ¬çš„æ–‡ä»¶åŠ è½½ä¸æ‰§è¡Œè¿‡ç¨‹ï¼š</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">executeScript</span><span class="hljs-params">(eng script_engine.Engine)</span></span> (<span class="hljs-keyword">interface</span>{}, <span class="hljs-type">error</span>) {
	<span class="hljs-comment">// åœºæ™¯ï¼šç”µå•†ä¿ƒé”€æ´»åŠ¨ï¼Œè®¢å•é‡‘é¢è®¡ç®—è§„åˆ™é¢‘ç¹å˜æ›´ï¼Œç”¨Luaè„šæœ¬åŠ¨æ€å®ç°</span>
	<span class="hljs-comment">// ä»æœ¬åœ°æ–‡ä»¶åŠ è½½Luaè„šæœ¬ï¼ˆç”Ÿäº§ç¯å¢ƒå¯æ”¹ä¸ºä»é…ç½®ä¸­å¿ƒã€å¯¹è±¡å­˜å‚¨åŠ è½½ï¼‰</span>
	result, err := eng.ExecuteFile(context.Background(), <span class="hljs-string">"./scripts/calculate_order.lua"</span>)
	<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
		<span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>, fmt.Errorf(<span class="hljs-string">"è„šæœ¬æ‰§è¡Œå¤±è´¥ï¼š%v"</span>, err)
	}
	<span class="hljs-keyword">return</span> result, <span class="hljs-literal">nil</span>
}
</code></pre>
<p>Lua è„šæœ¬ï¼ˆ<code>calculate_order.lua</code>ï¼‰ï¼šå®ç°å«é˜¶æ¢¯æŠ˜æ‰£çš„è®¢å•é‡‘é¢è®¡ç®—é€»è¾‘ï¼ˆå¯åŠ¨æ€æ›´æ–°ï¼‰</p>
<pre><code class="hljs language-lua" lang="lua"><span class="hljs-comment">-- é˜¶æ¢¯æŠ˜æ‰£è§„åˆ™ï¼šæ»¡3ä»¶9æŠ˜ï¼Œæ»¡5ä»¶8æŠ˜ï¼Œæ»¡10ä»¶7æŠ˜</span>
<span class="hljs-keyword">local</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">calculateOrderAmount</span><span class="hljs-params">(price, quantity, baseDiscount)</span></span>
    <span class="hljs-keyword">local</span> discount = baseDiscount
    <span class="hljs-comment">-- åŠ¨æ€è°ƒæ•´æŠ˜æ‰£</span>
    <span class="hljs-keyword">if</span> quantity &gt;= <span class="hljs-number">10</span> <span class="hljs-keyword">then</span>
        discount = <span class="hljs-number">0.7</span>
    <span class="hljs-keyword">elseif</span> quantity &gt;= <span class="hljs-number">5</span> <span class="hljs-keyword">then</span>
        discount = <span class="hljs-number">0.8</span>
    <span class="hljs-keyword">elseif</span> quantity &gt;= <span class="hljs-number">3</span> <span class="hljs-keyword">then</span>
        discount = <span class="hljs-number">0.9</span>
    <span class="hljs-keyword">end</span>
    <span class="hljs-comment">-- è®¡ç®—æœ€ç»ˆé‡‘é¢ï¼ˆä¿ç•™2ä½å°æ•°ï¼‰</span>
    <span class="hljs-keyword">local</span> finalAmount = price * quantity * discount
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">math</span>.<span class="hljs-built_in">floor</span>(finalAmount * <span class="hljs-number">100</span>) / <span class="hljs-number">100</span>
<span class="hljs-keyword">end</span>

<span class="hljs-comment">-- ä¸šåŠ¡å‚æ•°ï¼šå•ä»·99.9å…ƒï¼Œæ•°é‡5ä»¶ï¼ŒåŸºç¡€æŠ˜æ‰£0.95</span>
<span class="hljs-keyword">return</span> calculateOrderAmount(<span class="hljs-number">99.9</span>, <span class="hljs-number">5</span>, <span class="hljs-number">0.95</span>)
</code></pre>
<p>å½“ä¿ƒé”€è§„åˆ™å˜æ›´æ—¶ï¼ˆå¦‚æ–°å¢ã€Œä¼šå‘˜é¢å¤–9.5æŠ˜ã€ï¼‰ï¼Œåªéœ€ä¿®æ”¹ Lua è„šæœ¬å¹¶é‡æ–°åŠ è½½ï¼Œæ— éœ€é‡å¯ GoWind Admin æœåŠ¡ï¼Œå®ç°ã€Œç§’çº§è¿­ä»£ã€ã€‚</p>
<h4 data-id="heading-10">4. å‡½æ•°è°ƒç”¨ï¼šç²¾ç»†åŒ–è·¨è¯­è¨€é€»è¾‘äº¤äº’</h4>
<p>é™¤äº†æ‰§è¡Œå®Œæ•´è„šæœ¬ï¼Œ<code>script_engine</code> è¿˜æ”¯æŒåœ¨ Go ä¸­ç›´æ¥è°ƒç”¨è„šæœ¬ä¸­å®šä¹‰çš„ç‰¹å®šå‡½æ•°ï¼Œå®ç°æ›´ç²¾ç»†åŒ–çš„é€»è¾‘äº¤äº’ã€‚ä»¥ä¸‹ä»¥ã€Œæƒé™æ ¡éªŒã€åœºæ™¯ä¸ºä¾‹ï¼Œå±•ç¤º Go è°ƒç”¨ JavaScript å‡½æ•°çš„è¿‡ç¨‹ï¼š</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">callScriptFunction</span><span class="hljs-params">(eng script_engine.Engine)</span></span> (<span class="hljs-type">bool</span>, <span class="hljs-type">error</span>) {
	<span class="hljs-comment">// åœºæ™¯ï¼šç”¨æˆ·æ“ä½œå‰çš„æƒé™æ ¡éªŒï¼Œæ ¡éªŒè§„åˆ™åŠ¨æ€é…ç½®</span>
	userId := <span class="hljs-type">int64</span>(<span class="hljs-number">10086</span>)
	requiredPermission := <span class="hljs-string">"order:edit"</span> <span class="hljs-comment">// æ‰€éœ€æƒé™ï¼šç¼–è¾‘è®¢å•</span>

	<span class="hljs-comment">// è°ƒç”¨JavaScriptè„šæœ¬ä¸­å®šä¹‰çš„checkPermissionå‡½æ•°</span>
	result, err := eng.CallFunction(
		context.Background(),
		<span class="hljs-string">"checkPermission"</span>, <span class="hljs-comment">// è„šæœ¬ä¸­å‡½æ•°å</span>
		userId,            <span class="hljs-comment">// å‚æ•°1ï¼šç”¨æˆ·ID</span>
		requiredPermission,<span class="hljs-comment">// å‚æ•°2ï¼šæ‰€éœ€æƒé™</span>
	)
	<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
		<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>, fmt.Errorf(<span class="hljs-string">"è°ƒç”¨æƒé™æ ¡éªŒå‡½æ•°å¤±è´¥ï¼š%v"</span>, err)
	}

	<span class="hljs-comment">// è§£æè¿”å›ç»“æœï¼ˆè„šæœ¬è¿”å›boolç±»å‹ï¼‰</span>
	hasPermission, ok := result.(<span class="hljs-type">bool</span>)
	<span class="hljs-keyword">if</span> !ok {
		<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>, fmt.Errorf(<span class="hljs-string">"æƒé™æ ¡éªŒç»“æœæ ¼å¼é”™è¯¯"</span>)
	}

	<span class="hljs-keyword">return</span> hasPermission, <span class="hljs-literal">nil</span>
}
</code></pre>
<p>JavaScript è„šæœ¬ä¸­å®šä¹‰çš„æƒé™æ ¡éªŒå‡½æ•°ï¼ˆæ”¯æŒåŠ¨æ€æ›´æ–°æ ¡éªŒè§„åˆ™ï¼‰ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æƒé™æ ¡éªŒå‡½æ•°ï¼šæ”¯æŒè§’è‰²ç»§æ‰¿ã€ä¸´æ—¶æƒé™å åŠ é€»è¾‘</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">checkPermission</span>(<span class="hljs-params">userId, requiredPermission</span>) {
    <span class="hljs-comment">// æ¨¡æ‹Ÿä»ç¼“å­˜è·å–ç”¨æˆ·æƒé™ï¼ˆçœŸå®åœºæ™¯å¯è°ƒç”¨Goæ³¨å†Œçš„ç¼“å­˜æŸ¥è¯¢å‡½æ•°ï¼‰</span>
    <span class="hljs-keyword">const</span> userRoles = <span class="hljs-title function_">getUserRoles</span>(userId); <span class="hljs-comment">// è„šæœ¬å†…éƒ¨å‡½æ•°</span>
    <span class="hljs-keyword">const</span> userPermissions = <span class="hljs-title function_">getPermissionsByRoles</span>(userRoles); <span class="hljs-comment">// è„šæœ¬å†…éƒ¨å‡½æ•°</span>
    
    <span class="hljs-comment">// ä¸´æ—¶æƒé™ï¼šä¸ºæµ‹è¯•è´¦å·å¼€æ”¾æ‰€æœ‰æƒé™ï¼ˆåŠ¨æ€é…ç½®ï¼‰</span>
    <span class="hljs-keyword">if</span> (userId === <span class="hljs-number">10000</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }
    
    <span class="hljs-comment">// æ ¡éªŒæ ¸å¿ƒæƒé™</span>
    <span class="hljs-keyword">return</span> userPermissions.<span class="hljs-title function_">includes</span>(requiredPermission);
}

<span class="hljs-comment">// è¾…åŠ©å‡½æ•°ï¼šæ ¹æ®ç”¨æˆ·IDè·å–è§’è‰²</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">getUserRoles</span>(<span class="hljs-params">userId</span>) {
    <span class="hljs-comment">// æ¨¡æ‹Ÿæ•°æ®ï¼šå®é™…å¯è°ƒç”¨Goæ³¨å†Œçš„ç”¨æˆ·è§’è‰²æŸ¥è¯¢å‡½æ•°</span>
    <span class="hljs-keyword">const</span> roleMap = {
        <span class="hljs-number">10086</span>: [<span class="hljs-string">"order_manager"</span>, <span class="hljs-string">"user_manager"</span>],
        <span class="hljs-number">10087</span>: [<span class="hljs-string">"order_viewer"</span>]
    };
    <span class="hljs-keyword">return</span> roleMap[userId] || [];
}

<span class="hljs-comment">// è¾…åŠ©å‡½æ•°ï¼šæ ¹æ®è§’è‰²è·å–æƒé™</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">getPermissionsByRoles</span>(<span class="hljs-params">roles</span>) {
    <span class="hljs-keyword">const</span> permissionMap = {
        <span class="hljs-attr">order_manager</span>: [<span class="hljs-string">"order:view"</span>, <span class="hljs-string">"order:edit"</span>, <span class="hljs-string">"order:delete"</span>],
        <span class="hljs-attr">user_manager</span>: [<span class="hljs-string">"user:view"</span>, <span class="hljs-string">"user:edit"</span>],
        <span class="hljs-attr">order_viewer</span>: [<span class="hljs-string">"order:view"</span>]
    };
    <span class="hljs-keyword">let</span> permissions = [];
    roles.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">role</span> =&gt;</span> {
        permissions = [...permissions, ...(permissionMap[role] || [])];
    });
    <span class="hljs-keyword">return</span> [...<span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>(permissions)]; <span class="hljs-comment">// å»é‡</span>
}
</code></pre>
<h3 data-id="heading-11">ä¼ä¸šçº§ä»·å€¼ï¼šåŠ¨æ€æ‰©å±•èƒ½åŠ›å¦‚ä½•èµ‹èƒ½ä¸šåŠ¡å¢é•¿ï¼Ÿ</h3>
<p>GoWind Admin æ•´åˆ script_engine åï¼Œä¸ºä¼ä¸šçº§ä¸­åå°ç³»ç»Ÿå¸¦æ¥å¤šç»´åº¦çš„èƒ½åŠ›è·ƒå‡ï¼Œç›´æ¥èµ‹èƒ½ä¸šåŠ¡å¢é•¿ï¼š</p>
<h4 data-id="heading-12">1. ç¼©çŸ­ä¸šåŠ¡è¿­ä»£å‘¨æœŸï¼Œæå‡å¸‚åœºå“åº”é€Ÿåº¦</h4>
<p>ä¿ƒé”€è§„åˆ™ã€å®šä»·ç­–ç•¥ã€å®¡æ‰¹æµç¨‹ç­‰é«˜é¢‘å˜æ›´çš„ä¸šåŠ¡é€»è¾‘ï¼Œæ— éœ€ç»è¿‡ã€Œå¼€å‘ - æµ‹è¯• - éƒ¨ç½²ã€å…¨æµç¨‹ï¼Œåªéœ€ä¿®æ”¹è„šæœ¬å¹¶åŠ è½½å³å¯ç”Ÿæ•ˆã€‚ä»¥ç”µå•†å¹³å°ä¸ºä¾‹ï¼ŒèŠ‚æ—¥å¤§ä¿ƒæœŸé—´çš„è§„åˆ™è°ƒæ•´å¯ä»ã€Œå¤©çº§ã€ç¼©çŸ­è‡³ã€Œç§’çº§ã€ï¼Œç²¾å‡†æŠ“ä½æµé‡å³°å€¼çš„è½¬åŒ–æœºä¼šã€‚</p>
<h4 data-id="heading-13">2. é™ä½å®šåˆ¶åŒ–æˆæœ¬ï¼Œæ”¯æ’‘è§„æ¨¡åŒ– SaaS è¿è¥</h4>
<p>å¯¹äº SaaS å‹ä¸­åå°ç³»ç»Ÿï¼Œä¸åŒè¡Œä¸šã€ä¸åŒè§„æ¨¡çš„å®¢æˆ·å¾€å¾€æœ‰ä¸ªæ€§åŒ–éœ€æ±‚ã€‚é€šè¿‡è„šæœ¬å®ç°å·®å¼‚åŒ–é€»è¾‘ï¼Œå¯é¿å…æ ¸å¿ƒä»£ç åˆ†æ”¯çˆ†ç‚¸ï¼ˆå¦‚ä¸ºæ¯ä¸ªå®¢æˆ·ç»´æŠ¤ä¸€ä¸ªä»£ç åˆ†æ”¯ï¼‰ï¼Œé™ä½å¼€å‘ä¸ç»´æŠ¤æˆæœ¬ã€‚ä¾‹å¦‚ï¼Œä¸ºé‡‘èå®¢æˆ·å®šåˆ¶ã€Œå¤šç»´åº¦é£æ§æ ¡éªŒã€ï¼Œä¸ºé›¶å”®å®¢æˆ·å®šåˆ¶ã€Œè¿›é”€å­˜ä¸“å±æŠ¥è¡¨é€»è¾‘ã€ï¼Œå‡æ— éœ€ä¿®æ”¹æ¡†æ¶æ ¸å¿ƒä»£ç ã€‚</p>
<h4 data-id="heading-14">3. æ‰“ç ´æŠ€æœ¯å£å’ï¼Œæå‡å›¢é˜Ÿåä½œæ•ˆç‡</h4>
<p>å‰ç«¯å¼€å‘è€…å¯ç›´æ¥ä½¿ç”¨ JavaScript ç¼–å†™åç«¯åŠ¨æ€é€»è¾‘ï¼Œæ— éœ€å­¦ä¹  Go è¯­è¨€ï¼›è¿ç»´äººå‘˜å¯é€šè¿‡è„šæœ¬å¿«é€Ÿè°ƒæ•´ç³»ç»Ÿé…ç½®ã€ä¿®å¤å°é—®é¢˜ï¼Œæ— éœ€ä¾èµ–å¼€å‘å›¢é˜Ÿã€‚æŠ€æœ¯å£å’çš„æ‰“ç ´ï¼Œè®©å›¢é˜Ÿåä½œæ›´é«˜æ•ˆï¼Œèµ„æºè°ƒåº¦æ›´çµæ´»ã€‚</p>
<h4 data-id="heading-15">4. ä¿éšœç³»ç»Ÿç¨³å®šæ€§ï¼Œå¹³è¡¡çµæ´»ä¸å¯é </h4>
<p>å¼•æ“æ± çš„èµ„æºé™åˆ¶ä¸å®ä¾‹å¤ç”¨æœºåˆ¶ï¼Œè®©åŠ¨æ€è„šæœ¬æ‰§è¡Œçš„èµ„æºå ç”¨å¯é¢„æµ‹ã€å¯æ§åˆ¶ï¼Œé¿å…å› è„šæœ¬å¼‚å¸¸å¯¼è‡´æ•´ä¸ªç³»ç»Ÿå´©æºƒã€‚åŒæ—¶ï¼Œè„šæœ¬æ‰§è¡Œå¤±è´¥ä¸ä¼šå½±å“ Go æ ¸å¿ƒæµç¨‹çš„è¿è¡Œï¼Œå®ç°ã€ŒåŠ¨æ€é€»è¾‘æ•…éšœéš”ç¦»ã€ï¼Œå¹³è¡¡äº†ä¸šåŠ¡çµæ´»æ€§ä¸ç³»ç»Ÿç¨³å®šæ€§ã€‚</p>
<h3 data-id="heading-16">æ€»ç»“ï¼šä»¥åŠ¨æ€èƒ½åŠ›é©±åŠ¨ä¸­åå°ç³»ç»Ÿè¿›åŒ–</h3>
<p>åœ¨æ•°å­—åŒ–è½¬å‹åŠ é€Ÿçš„ä»Šå¤©ï¼Œä¼ä¸šå¯¹ä¸­åå°ç³»ç»Ÿçš„ã€Œæ•æ·æ€§ã€è¦æ±‚è¶Šæ¥è¶Šé«˜ã€‚GoWind Admin å€ŸåŠ© <code>go-scripts</code> ä¸ <code>kratos-bootstrap</code> çš„ <code>script_engine</code> ç»„ä»¶ï¼ŒæˆåŠŸå°†ã€ŒåŠ¨æ€è„šæœ¬æ‰©å±•èƒ½åŠ›ã€èå…¥ä¼ä¸šçº§æ¡†æ¶çš„æ ¸å¿ƒæ¶æ„ï¼Œæ—¢ä¿ç•™äº† Go è¯­è¨€çš„é«˜æ€§èƒ½ã€é«˜å¯é ä¼˜åŠ¿ï¼Œåˆå¼¥è¡¥äº†ä¼ ç»Ÿç¼–è¯‘å‹è¯­è¨€çš„çµæ´»æ€§ä¸è¶³ã€‚</p>
<p>ä»é«˜é¢‘å˜æ›´çš„ä¸šåŠ¡è§„åˆ™ï¼Œåˆ°ä¸ªæ€§åŒ–çš„å®¢æˆ·éœ€æ±‚ï¼Œå†åˆ°è·¨å›¢é˜Ÿçš„ååŒæ•ˆç‡æå‡ï¼ŒGoWind Admin çš„åŠ¨æ€æ‰©å±•èƒ½åŠ›æ­£åœ¨é‡æ–°å®šä¹‰ä¸­åå°ç³»ç»Ÿçš„å¼€å‘ä¸è¿è¥æ¨¡å¼ã€‚å¯¹äºå¼€å‘å›¢é˜Ÿè€Œè¨€ï¼Œæ— éœ€å†ä¸ºã€Œå¿«é€Ÿè¿­ä»£ã€ä¸ã€Œç³»ç»Ÿç¨³å®šã€çš„çŸ›ç›¾çº ç»“ï¼Œåªéœ€èšç„¦ä¸šåŠ¡æœ¬èº«ï¼Œé€šè¿‡ç®€å•çš„è„šæœ¬äº¤äº’å³å¯å®ç°éœ€æ±‚è½åœ°ï¼›å¯¹äºä¼ä¸šè€Œè¨€ï¼Œè¿™æ„å‘³ç€æ›´ä½çš„ç ”å‘æˆæœ¬ã€æ›´å¿«çš„å¸‚åœºå“åº”é€Ÿåº¦ï¼Œä»¥åŠæ›´å¼ºçš„ä¸šåŠ¡åˆ›æ–°èƒ½åŠ›ã€‚</p>
<p>å¦‚éœ€å¿«é€Ÿä¸Šæ‰‹å®è·µï¼Œå¯ç›´æ¥å‚è€ƒä»¥ä¸‹èµ„æºï¼š</p>
<ul>
<li><code>script_engine</code> ç»„ä»¶æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftx7do%2Fkratos-bootstrap%2Ftree%2Fmain%2Fscript_engine" target="_blank" title="https://github.com/tx7do/kratos-bootstrap/tree/main/script_engine" ref="nofollow noopener noreferrer">github.com/tx7do/kratoâ€¦</a></li>
<li><code>go-scripts</code> å¼•æ“å°è£…ä»£ç åº“ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftx7do%2Fgo-scripts" target="_blank" title="https://github.com/tx7do/go-scripts" ref="nofollow noopener noreferrer">github.com/tx7do/go-scâ€¦</a></li>
<li><code>GoWind Admin</code> å®˜æ–¹ä»£ç åº“ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftx7do%2Fgo-wind-admin" target="_blank" title="https://github.com/tx7do/go-wind-admin" ref="nofollow noopener noreferrer">github.com/tx7do/go-wiâ€¦</a></li>
</ul>
<p>è§£é”åŠ¨æ€ä¸šåŠ¡æ‰©å±•èƒ½åŠ›ï¼Œè®©ä½ çš„ä¸­åå°ç³»ç»Ÿåœ¨å¿«é€Ÿè¿­ä»£ä¸­å§‹ç»ˆä¿æŒã€Œé£è¡Œã€ä¹‹åŠ¿ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¤§æ¨¡å‹å­¦ä¹ æ•™ç¨‹ï¼šRAGæŠ€æœ¯å…¨æ™¯è§£æ]]></title>    <link>https://juejin.cn/post/7585920796100624411</link>    <guid>https://juejin.cn/post/7585920796100624411</guid>    <pubDate>2025-12-22T03:55:35.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7585920796100624411" data-draft-id="7586182451597918254" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¤§æ¨¡å‹å­¦ä¹ æ•™ç¨‹ï¼šRAGæŠ€æœ¯å…¨æ™¯è§£æ"/> <meta itemprop="keywords" content="Agent,LLM,ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2025-12-22T03:55:35.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="AIå¤§æ¨¡å‹"/> <meta itemprop="url" content="https://juejin.cn/user/3817967696221534"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¤§æ¨¡å‹å­¦ä¹ æ•™ç¨‹ï¼šRAGæŠ€æœ¯å…¨æ™¯è§£æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3817967696221534/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    AIå¤§æ¨¡å‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-22T03:55:35.000Z" title="Mon Dec 22 2025 03:55:35 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»52åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#383838;font-size:15px;line-height:30px;letter-spacing:2px;word-break:break-word;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;scroll-behavior:smooth;background-image:linear-gradient(0deg,transparent 24%,rgba(201,195,195,.329) 25%,hsla(0,8%,80.4%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent),linear-gradient(90deg,transparent 24%,rgba(204,196,196,.226) 25%,hsla(0,4%,66.1%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent);background-color:#fff;background-size:50px 50px;padding-bottom:60px}.markdown-body ::selection{color:#fff;background-color:#a862ea}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin:24px 0 12px;color:#a862ea}.markdown-body h1{line-height:2;font-size:1.4em}.markdown-body h1~p:first-of-type:first-letter{color:#a862ea;float:left;font-size:2em;margin-right:.4em;font-weight:bolder}.markdown-body h2{font-size:1.2em}.markdown-body h3{font-size:1.1em}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;padding-left:.2em}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#a862ea}.markdown-body ol li.task-list-item,.markdown-body ul li.task-list-item{list-style:none}.markdown-body ol li.task-list-item ol,.markdown-body ol li.task-list-item ul,.markdown-body ul li.task-list-item ol,.markdown-body ul li.task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:10px}.markdown-body a,.markdown-body code,.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6,.markdown-body li,.markdown-body p{opacity:.85;vertical-align:baseline;transition:all .1s ease}.markdown-body a:hover,.markdown-body code:hover,.markdown-body h1:hover,.markdown-body h2:hover,.markdown-body h3:hover,.markdown-body h4:hover,.markdown-body h5:hover,.markdown-body h6:hover,.markdown-body li:hover,.markdown-body p:hover{opacity:1}.markdown-body a{display:inline-block;color:#a862ea;cursor:pointer;text-decoration:none;position:relative}.markdown-body a:after{content:"";position:absolute;width:98%;height:1px;bottom:0;left:0;transform:scaleX(0);background-color:#a862ea;transform-origin:bottom right;transition:transform .3s ease-in-out}.markdown-body a:hover:after{transform:scaleX(1);transform-origin:bottom left}.markdown-body a:active,.markdown-body a:link{color:#a862ea}.markdown-body img{max-width:100%;user-select:none;margin:1em 0;transition:transform .2s ease 0s;background-color:#f8f5ff;box-shadow:0 0 10px #e7daff}.markdown-body img:hover{opacity:1;box-shadow:0 0 20px #e7daff;transform:translateY(-1px)}.markdown-body blockquote{padding:.5em 1em;margin:12px 0;border-top-left-radius:2px;border-bottom-left-radius:2px;border-left:3px solid #a862ea;background-color:#f8f5ff}.markdown-body blockquote&gt;p{margin:0}.markdown-body .math{font-style:italic;margin:12px 0;padding:.5em 1em;background-color:#f8f5ff}.markdown-body .math&gt;p{margin:0}.markdown-body code{padding:2px .4em;overflow-x:auto;color:#a862ea;font-weight:700;word-break:break-word;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;background-color:#f8f5ff}.markdown-body pre{margin:2em 0}.markdown-body pre&gt;code{display:block;padding:1.5em;word-break:normal;font-size:.9em;font-style:normal;font-weight:400;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;line-height:18px;color:#383838;border-radius:2px;scroll-behavior:smooth;box-shadow:0 0 10px #e7daff}.markdown-body pre&gt;code:hover{box-shadow:0 0 20px #e7daff}.markdown-body pre&gt;code::-webkit-scrollbar{height:6px;background-color:#f8f5ff}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:#e7daff;border-bottom-left-radius:3px;border-bottom-right-radius:3px}.markdown-body hr{margin:2em 0;border-top:1px solid #a862ea}.markdown-body table{width:100%;font-size:12px;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{color:#a862ea;background:#f8f5ff}.markdown-body td,.markdown-body th{padding:.5em;border:1px solid #e7daff}.markdown-body tr{background-color:#f8f5ff}@media (max-width:720px){.markdown-body{font-size:12px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æœ¬æ–‡è¾ƒé•¿ï¼Œå»ºè®®ç‚¹èµæ”¶è—ã€‚æ›´å¤šAIå¤§æ¨¡å‹åº”ç”¨å¼€å‘å­¦ä¹ è§†é¢‘åŠèµ„æ–™ï¼Œåœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fgitcode.com%2FEnjoyEDU%2FLLM" target="_blank" title="https://gitcode.com/EnjoyEDU/LLM" ref="nofollow noopener noreferrer">è¿™é‡Œ</a>ã€‚</p>
</blockquote>
<p>åœ¨å¤§è¯­è¨€æ¨¡å‹åŸºç¡€çŸ¥è¯†ä¸€æ–‡ä¸­ï¼Œæ£€ç´¢å¢å¼ºç”Ÿæˆï¼ˆRetrieval-Augmented Generationï¼Œç®€ç§° RAGï¼‰æŠ€æœ¯ä½œä¸ºæ„å»ºå¤§è¯­è¨€æ¨¡å‹ï¼ˆLarge Language Modelï¼Œç®€ç§° LLMï¼‰åº”ç”¨çš„ä¸€ç§æ–¹å¼å·²è¢«ç®€è¦æåŠï¼Œæœ¬æ–‡å°†è¯¦ç»†ä»‹ç»RAGæŠ€æœ¯çš„å®ç°æµç¨‹åŠå…¶æ¼”è¿›è¶‹åŠ¿ã€‚</p>
<p>å…³äºRAGæŠ€æœ¯æ›´å…¨é¢æ›´ç³»ç»Ÿçš„ä»‹ç»ï¼Œå¯ä»¥é˜…è¯»ä»¥ä¸‹è®ºæ–‡ï¼š</p>
<ul>
<li>Retrieval-Augmented Generation for AI-Generated Content: A Survey[1]</li>
<li>Retrieval-Augmented Generation for Large Language Models: A Survey[2]</li>
</ul>
<h2 data-id="heading-0">1 RAGæŠ€æœ¯è§£æ</h2>
<h3 data-id="heading-1">1.1 RAGæŠ€æœ¯çš„é‡è¦æ€§</h3>
<p><strong>ä»…ä¾èµ–LLMçš„å±€é™æ€§</strong></p>
<p>å°½ç®¡LLMçš„å‚æ•°è§„æ¨¡ä¸è®­ç»ƒæ•°æ®é‡æ˜¾è‘—å¢é•¿ï¼Œä½¿å…¶åœ¨è‡ªç„¶è¯­è¨€å¤„ç†ä»»åŠ¡ä¸­çš„èƒ½åŠ›å¿«é€Ÿæå‡ï¼Œä½†æ¨¡å‹çš„çŸ¥è¯†è®°å¿†èƒ½åŠ›ä»å—é™äºæ¶æ„ä¸è®­ç»ƒèŒƒå¼ã€‚ç”±äºé€šå¸¸éœ€è¦é¢„è®­ç»ƒæ•°æ®å¯¹åŒä¸€çŸ¥è¯†ç‚¹è¿›è¡Œå¤šæ¬¡æ›å…‰æ‰èƒ½å®ç°æœ‰æ•ˆè®°å¿†ï¼Œå¯¼è‡´å…¶è®°å¿†æ•ˆç‡åä½ï¼Œä¸”éš¾ä»¥å…¨é¢è¦†ç›–å„é¢†åŸŸçŸ¥è¯†ã€‚</p>
<p>æ›´æ ¸å¿ƒçš„å±€é™åœ¨äºï¼ŒLLMçš„æ€§èƒ½é«˜åº¦ä¾èµ–è®­ç»ƒé˜¶æ®µæ¥è§¦çš„é™æ€æ•°æ®ã€‚è¿™ä½¿å…¶åœ¨å¤„ç†å®æ—¶æ›´æ–°ä¿¡æ¯ï¼ˆå¦‚æœ€æ–°ç§‘æŠ€ã€æ—¶äº‹æ–°é—»ï¼‰ã€é•¿å°¾çŸ¥è¯†ï¼ˆå³ç½•è§æˆ–æœªçº³å…¥è®­ç»ƒæ•°æ®çš„å†…å®¹ï¼‰åŠåŠ¨æ€å˜åŒ–å†…å®¹æ—¶è¡¨ç°ä¸ä½³ï¼Œå¯èƒ½ç”Ÿæˆé”™è¯¯ã€ä¸å®Œæ•´ç”šè‡³è™šæ„çš„ä¿¡æ¯ï¼Œå³å‡ºç° â€œå¹»è§‰â€ é—®é¢˜ã€‚</p>
<p>æ­¤å¤–ï¼Œé’ˆå¯¹ç‰¹å®šé¢†åŸŸçš„å¤æ‚ä¸“ä¸šçŸ¥è¯†ï¼ŒLLMçš„å¤„ç†æ•ˆç‡ä¸æ·±åº¦ç†è§£èƒ½åŠ›ä¹Ÿæ˜¾ä¸è¶³ã€‚ä»…ä¾é æ¨¡å‹æ— æ³•åŠ¨æ€è®¿é—®å¤–éƒ¨çŸ¥è¯†åº“ï¼Œè¿™åœ¨éœ€ä¾èµ–ç²¾ç¡®ã€æœ€æ–°ä¿¡æ¯çš„åœºæ™¯ï¼ˆå¦‚é—®ç­”ã€åŒ»ç–—è¯Šæ–­ã€æ³•å¾‹å’¨è¯¢ã€å®æ—¶ä¿¡æ¯æŸ¥è¯¢ç­‰ï¼‰ä¸­å°¤ä¸ºå—é™ã€‚å› æ­¤ï¼Œå¦‚ä½•å…‹æœå¯¹é™æ€æ•°æ®çš„ä¾èµ–ã€æå‡çŸ¥è¯†è·å–çš„æ•ˆç‡ä¸å®æ—¶æ€§ã€å‡å°‘å¹»è§‰ç°è±¡å¹¶å¢å¼ºé¢†åŸŸæ·±åº¦ç†è§£èƒ½åŠ›ï¼Œå·²æˆä¸ºå½“å‰LLMå‘å±•é¢ä¸´çš„å…³é”®æŒ‘æˆ˜ã€‚</p>
<p><strong>RAGæŠ€æœ¯çš„è¯ç”Ÿ</strong></p>
<p>ä¸ºå¼¥è¡¥LLMå•ç‹¬ä½¿ç”¨æ—¶çš„å±€é™æ€§ï¼Œæ£€ç´¢å¢å¼ºç”ŸæˆæŠ€æœ¯åº”è¿è€Œç”Ÿã€‚å…¶æ ¸å¿ƒåŸç†æ˜¯èåˆâ€œæ£€ç´¢â€ä¸â€œç”Ÿæˆâ€ï¼šåœ¨æ¥æ”¶ç”¨æˆ·æŸ¥è¯¢æ—¶ï¼Œç³»ç»Ÿå…ˆä»å¤–éƒ¨å¤§è§„æ¨¡çŸ¥è¯†æºï¼ˆå¦‚æ–‡æ¡£ã€æ•°æ®åº“ï¼‰ä¸­åŠ¨æ€æ£€ç´¢ç›¸å…³ä¿¡æ¯ç‰‡æ®µï¼Œå†å°†è¿™äº›ç‰‡æ®µä½œä¸ºé™„åŠ ä¸Šä¸‹æ–‡è¾“å…¥ç”Ÿæˆæ¨¡å‹ï¼Œè¾…åŠ©å…¶å®Œæˆç­”æ¡ˆåˆ›ä½œã€‚å€ŸåŠ©è¿™ä¸€æœºåˆ¶ï¼Œæ¨¡å‹èƒ½å¤Ÿç”Ÿæˆæ›´ç²¾å‡†ã€å¯é ä¸”è´´åˆä¸Šä¸‹æ–‡çš„ç­”æ¡ˆï¼Œä¸ä»…å¤§å¹…æå‡äº†ç”Ÿæˆå†…å®¹çš„å‡†ç¡®æ€§ã€ç›¸å…³æ€§ä¸å®æ—¶æ€§ï¼Œæœ‰æ•ˆç¼“è§£äº†â€œå¹»è§‰â€é—®é¢˜ï¼Œè¿˜å¢å¼ºäº†ç­”æ¡ˆçš„å¯è¿½æº¯æ€§ä¸å¯ä¿¡åº¦ï¼›åŒæ—¶ï¼Œé€šè¿‡åŠ¨æ€å¼•å…¥æœ€æ–°ä¿¡æ¯æºï¼ŒRAGæŠ€æœ¯æ˜¾è‘—åŠ å¿«äº†çŸ¥è¯†æ›´æ–°æ•ˆç‡ã€‚</p>
<p>æ­¤å¤–ï¼ŒRAGæŠ€æœ¯èµ‹äºˆæ¨¡å‹å¤„ç†å¤æ‚ä»»åŠ¡çš„èƒ½åŠ›ï¼Œä¾‹å¦‚ä¸²è”æ•´åˆå¤šæ­¥éª¤æ¨ç†ã€èåˆä¸åŒé¢†åŸŸçŸ¥è¯†ç­‰ã€‚ä»¥â€œè¿‘æœŸå“ªä¸ªå“ç‰Œçš„æ–°æ¬¾æ‰‹æœºæ‹ç…§åŠŸèƒ½æœ€ä¼˜â€è¿™ä¸€é—®é¢˜ä¸ºä¾‹ï¼Œå…¶å¯å¿«é€Ÿè°ƒå–æœ€æ–°æµ‹è¯„æ–‡ç« ï¼Œå¹¶åŸºäºè¿™äº›å†…å®¹ç»™å‡ºè¯¦å°½è§£ç­”ï¼Œå› æ­¤åœ¨éœ€ç²¾å‡†ä¸”åŠæ—¶ä¿¡æ¯çš„åœºæ™¯ä¸­ä¼˜åŠ¿æ˜¾è‘—ã€‚</p>
<p>ç®€è¨€ä¹‹ï¼ŒRAGæŠ€æœ¯æ˜¯ä¸€ç§é€šè¿‡èå…¥å¤–éƒ¨çŸ¥è¯†åº“ä¼˜åŒ–LLMæ€§èƒ½çš„æ¨¡å¼ã€‚å…³äºRAGæŠ€æœ¯çš„èµ·æºå¯ä»¥å‚è€ƒRAGèµ·æºã€æ¼”è¿›ä¸æ€è€ƒ[3]ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/af972421e6954f6790fc2dd9cfaa369b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766980534&amp;x-signature=KB6m5kfAEVMGQUAxEDfUAaJFu3s%3D" alt="" loading="lazy"/></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdev.to%2Fazubuike" target="_blank" title="https://dev.to/azubuike" ref="nofollow noopener noreferrer">dev.to/azubuike</a>_alexmmaghiri_9e/revolutionizing-ai-with-retrieval-augmented-generation-rag-architectures-workflows-and-9c4</p>
<p><strong>RAGæŠ€æœ¯çš„åº”ç”¨åœºæ™¯</strong></p>
<p>RAGæŠ€æœ¯çš„æ ¸å¿ƒä¼˜åŠ¿åœ¨äºæ•´åˆä¿¡æ¯æ£€ç´¢ä¸æ–‡æœ¬ç”Ÿæˆèƒ½åŠ›ï¼Œæœ‰æ•ˆçªç ´äº†LLMåœ¨æ—¶æ•ˆæ€§ä¸å‡†ç¡®æ€§ä¸è¶³ç­‰å›ºæœ‰å±€é™ï¼Œå‡­å€Ÿè¿™ä¸€æ ¸å¿ƒä¼˜åŠ¿ï¼Œå…¶åº”ç”¨å·²å»¶ä¼¸è‡³æ™ºèƒ½é—®ç­”ã€æ–‡æœ¬æ‘˜è¦ã€å¯¹è¯ç³»ç»Ÿã€æ•™è‚²åŸ¹è®­ã€çŸ¥è¯†å¢å¼ºå‹é—®ç­”ä¸æ¨ç†ã€ä¸ªæ€§åŒ–æ¨èåŠå†³ç­–æ”¯æŒç­‰å¤šä¸ªé¢†åŸŸã€‚å…¸å‹å¦‚ï¼š</p>
<ul>
<li>åœ¨ä¼ä¸šçŸ¥è¯†åº“ç®¡ç†ä¸­ï¼Œå¯å¿«é€Ÿå®šä½å†…éƒ¨æ–‡æ¡£ä¸­çš„å…³é”®ä¿¡æ¯å¹¶ç”Ÿæˆç»“æ„åŒ–è§£è¯»ï¼Œæå‡å›¢é˜Ÿåä½œæ•ˆç‡ï¼›</li>
<li>åœ¨é‡‘èé¢†åŸŸï¼Œèƒ½å®æ—¶æ•´åˆå¸‚åœºåŠ¨æ€ã€æ”¿ç­–å˜åŠ¨ç­‰æ•°æ®ï¼Œä¸ºæŠ•èµ„åˆ†ææä¾›åŸºäºå¤šæºä¿¡æ¯çš„è¶‹åŠ¿é¢„åˆ¤ï¼›</li>
<li>åœ¨å®¢æœåœºæ™¯ä¸­ï¼Œå¯ç»“åˆç”¨æˆ·å†å²äº¤äº’è®°å½•ä¸äº§å“çŸ¥è¯†åº“ï¼Œç”Ÿæˆè´´åˆéœ€æ±‚çš„ç²¾å‡†å›å¤ï¼Œä¼˜åŒ–æœåŠ¡ä½“éªŒï¼›</li>
<li>åœ¨ç§‘ç ”é¢†åŸŸï¼ŒåŠ©åŠ›ç ”ç©¶è€…æ•´åˆè·¨å­¦ç§‘æ–‡çŒ®ã€å®éªŒæ•°æ®ï¼Œç”Ÿæˆå…·æœ‰é’ˆå¯¹æ€§çš„ç ”ç©¶æ€è·¯ä¸æ–‡çŒ®ç»¼è¿°æ¡†æ¶ã€‚</li>
</ul>
<p>éšç€LLMçš„å…´èµ·ï¼Œä»¥RAGæŠ€æœ¯ä¸ºæ ¸å¿ƒé©±åŠ¨åŠ›çš„æ–°ä¸€ä»£æ™ºèƒ½æœç´¢ç³»ç»Ÿè¿…çŒ›å‘å±•ï¼Œæ·±åˆ»é‡å¡‘ç€ä¿¡æ¯è·å–æ¨¡å¼ã€‚ä¸ä¼ ç»Ÿæœç´¢å¼•æ“ä¸åŒï¼Œå¾®è½¯Bing Chatã€ç™¾åº¦æ–‡å¿ƒä¸€è¨€ç­‰åŸºäºRAGçš„ç³»ç»Ÿï¼Œä¸ä»…èƒ½æ›´æ™ºèƒ½åœ°ç†è§£ç”¨æˆ·æ„å›¾ï¼Œæ›´èƒ½æä¾›é«˜åº¦ä¸ªæ€§åŒ–ã€ä¸Šä¸‹æ–‡å…³è”çš„äº¤äº’ä½“éªŒï¼Œå…¶è§’è‰²ä¹Ÿä»å•çº¯çš„ä¿¡æ¯æ£€ç´¢å·¥å…·ï¼Œæ¼”è¿›ä¸ºå¯ç›´æ¥è¾“å‡ºç»ä¿¡æ¯æ•´åˆä¸åˆ†æçš„ç²¾ç¡®ç­”æ¡ˆçš„æ™ºèƒ½ç³»ç»Ÿã€‚</p>
<h3 data-id="heading-2">1.2 RAGç³»ç»Ÿç®€ä»‹</h3>
<p><strong>RAGç³»ç»Ÿå·¥ä½œæµç¨‹æ¦‚è§ˆ</strong></p>
<p>RAGç³»ç»Ÿçš„æ ¸å¿ƒåœ¨äºæ£€ç´¢ä¸ç”Ÿæˆæµç¨‹çš„æ·±åº¦èåˆï¼Œå…¶æ ¸å¿ƒé€»è¾‘æ˜¯é€šè¿‡åŠ¨æ€å¼•å…¥å¤–éƒ¨çŸ¥è¯†ï¼Œå¤§å¹…æå‡è¾“å‡ºå†…å®¹çš„å‡†ç¡®æ€§ä¸ç›¸å…³æ€§ã€‚å…·ä½“å·¥ä½œæµç¨‹ä»¥ç”¨æˆ·æŸ¥è¯¢ä¸ºèµ·ç‚¹ï¼šé¦–å…ˆï¼Œæ£€ç´¢æ¨¡å—å€ŸåŠ©å‘é‡æ£€ç´¢ç­‰æŠ€æœ¯ï¼Œå°†ç”¨æˆ·æŸ¥è¯¢è½¬åŒ–ä¸ºå‘é‡å½¢å¼ï¼Œä»æ–‡æ¡£åº“ã€çŸ¥è¯†å›¾è°±æˆ–æœç´¢å¼•æ“ç­‰å¤–éƒ¨çŸ¥è¯†æºä¸­å¿«é€Ÿå®šä½ã€ç­›é€‰å¹¶æå–é«˜åº¦ç›¸å…³çš„ä¿¡æ¯ç‰‡æ®µï¼›éšåï¼Œä»¥LLMä¸ºåŸºç¡€çš„ç”Ÿæˆæ¨¡å—ä¼šæ•´åˆæŸ¥è¯¢å†…å®¹ä¸æ£€ç´¢åˆ°çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œç»æ¨ç†ã€æ•´åˆä¸é‡ç»„ï¼Œæœ€ç»ˆç”Ÿæˆè¿è´¯ä¸”ç²¾å‡†çš„ç­”æ¡ˆã€‚</p>
<p>ä¾‹å¦‚ï¼Œå½“ç”¨æˆ·è¯¢é—®â€œ2024å¹´å¤å­£å¥¥è¿ä¼šçš„ä¸¾åŠåŸå¸‚æ˜¯å“ªé‡Œï¼Œæœ‰å“ªäº›ç‰¹è‰²æ¯”èµ›é¡¹ç›®ï¼Ÿâ€æ—¶ï¼ŒRAGç³»ç»Ÿä¼šç‡å…ˆæ£€ç´¢2024å¹´å¥¥è¿ä¼šçš„ç›¸å…³èµ„æ–™ï¼Œè·å–ä¸¾åŠåŸå¸‚ä¸ºå·´é»ï¼Œä»¥åŠæ–°å¢çš„å†²æµªã€æ»‘æ¿ç­‰ç‰¹è‰²é¡¹ç›®ï¼Œè¿˜æœ‰å·´é»å¥¥è¿ä¼šåœ¨å¡çº³æ²³ä¸¾åŠå…¬å¼€æ°´åŸŸæ¯”èµ›ç­‰ä¿¡æ¯ã€‚æ¥ç€ï¼Œå°†è¿™äº›ä¿¡æ¯æ•´åˆï¼Œç”Ÿæˆâ€œ2024å¹´å¤å­£å¥¥è¿ä¼šçš„ä¸¾åŠåŸå¸‚æ˜¯æ³•å›½å·´é»ã€‚è¯¥å±Šå¥¥è¿ä¼šæ–°å¢äº†å†²æµªã€æ»‘æ¿ç­‰æ·±å—å¹´è½»äººå–œçˆ±çš„é¡¹ç›®â€çš„å›ç­”ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/088e65d15c39486ca40a67905eab6c43~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766980534&amp;x-signature=swsg9ERcLFMzRdVlxK2HgX3aurc%3D" alt="" loading="lazy"/></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2402.19473" target="_blank" title="https://arxiv.org/abs/2402.19473" ref="nofollow noopener noreferrer">arxiv.org/abs/2402.19â€¦</a></p>
<p><strong>åŸºç¡€çš„RAGç³»ç»Ÿ</strong></p>
<p>ä¸ºæ¸…æ™°é˜è¿°RAGç³»ç»Ÿçš„åŸºæœ¬åŸç†ä¸å®ç°é€»è¾‘ï¼Œæœ¬éƒ¨åˆ†èšç„¦å…¶æ ¸å¿ƒæµç¨‹ï¼ˆæ£€ç´¢+ç”Ÿæˆï¼‰çš„ç®€åŒ–æ¨¡å‹å±•å¼€è¯´æ˜ã€‚</p>
<p>RAGç³»ç»Ÿçš„æ ¸å¿ƒæœºåˆ¶æ˜¯åœ¨ç”Ÿæˆç­”æ¡ˆå‰ï¼Œå…ˆä»çŸ¥è¯†åº“ä¸­æ£€ç´¢ç›¸å…³ä¿¡æ¯ï¼Œå†ä»¥è¿™äº›ä¿¡æ¯ä¸ºä¾æ®å¼•å¯¼ç”Ÿæˆè¿‡ç¨‹ã€‚è¿™ä¸€æœºåˆ¶å¸¦æ¥å¤šé‡ä¼˜åŠ¿ï¼šæ—¢èƒ½æ˜¾è‘—æå‡ç»“æœçš„å‡†ç¡®æ€§ä¸ç›¸å…³æ€§ï¼Œæœ‰æ•ˆç¼“è§£æ¨¡å‹å¹»è§‰é—®é¢˜ï¼›åˆèƒ½é€šè¿‡ä»…æ›´æ–°çŸ¥è¯†åº“å³å¯çº³å…¥æ–°çŸ¥è¯†ï¼ˆæ— éœ€é‡æ–°è®­ç»ƒæ¨¡å‹ï¼‰ï¼Œå®ç°å¿«é€Ÿè¿­ä»£ï¼›åŒæ—¶å¢å¼ºç»“æœå¯è¿½æº¯æ€§ï¼Œå¤§å¹…æå‡å¤§æ¨¡å‹åº”ç”¨çš„å¯é æ€§ä¸å®ç”¨æ€§ã€‚åŸºç¡€RAGç³»ç»Ÿæ›´åŠ è¯¦ç»†ä»‹ç»å¯ä»¥å‚è€ƒï¼šRAGåˆ°åº•å’‹å·¥ä½œçš„[4]ã€‚</p>
<p>ä¸€ä¸ªåŸºç¡€çš„RAGç³»ç»Ÿé€šè¿‡ä»¥ä¸‹æ ¸å¿ƒæ¨¡å—ååŒå®ç°ä¸Šè¿°æµç¨‹ï¼š</p>
<ol start="0">
<li>æ–‡æ¡£å¤„ç†æ¨¡å—ï¼šè´Ÿè´£åŠ è½½æ–‡ç« ã€ä¹¦ç±ã€å¯¹è¯ã€ä»£ç ç­‰å„ç±»åŸå§‹æ–‡æœ¬ï¼Œå¹¶å°†å…¶åˆ‡åˆ†ä¸ºä¾¿äºå¤„ç†çš„ç‰‡æ®µã€‚åˆ‡åˆ†é€šå¸¸ä»¥å¥å­ä¸ºå•ä½ï¼Œä¸”ä¼šç‰¹æ„ä¿ç•™ç‰‡æ®µé—´çš„éƒ¨åˆ†é‡å å†…å®¹ã€‚æ­¤ä¸¾å¯é¿å…è¯­ä¹‰è¢«ç”Ÿç¡¬å‰²è£‚ï¼Œä»è€Œæé«˜åç»­æ£€ç´¢å‡†ç¡®æ€§ã€‚</li>
<li>å‘é‡ç¼–ç å™¨ï¼šå€ŸåŠ©Embeddingæ¨¡å‹å°†æ–‡æœ¬ç‰‡æ®µè½¬åŒ–ä¸ºå‘é‡ã€‚é€šä¿—è€Œè¨€ï¼Œå°±æ˜¯å°†æ–‡å­—â€œç¿»è¯‘â€ä¸ºè®¡ç®—æœºå¯ç†è§£çš„æ•°å­—å‘é‡ï¼Œä½¿æ–‡æœ¬è¯­ä¹‰è½¬åŒ–ä¸ºå¯è®¡ç®—çš„æ•°å€¼ç‰¹å¾ã€‚</li>
<li>å‘é‡æ•°æ®åº“ï¼šä½œä¸ºä¸“é—¨å­˜å‚¨æ–‡æ¡£ç‰‡æ®µåŠå…¶å¯¹åº”å‘é‡çš„è½½ä½“ï¼Œåœ¨æ–‡æœ¬åˆ‡åˆ†ä¸å‘é‡ç¼–ç å®Œæˆåï¼Œä¼šé›†ä¸­å­˜å‚¨è¿™äº›æ•°æ®ï¼Œä¸ºåç»­å¿«é€Ÿæ£€ç´¢å¥ å®šåŸºç¡€ã€‚</li>
<li>æ£€ç´¢å™¨ï¼šä½œä¸ºè¿æ¥ç”¨æˆ·æŸ¥è¯¢ä¸æ•°æ®åº“çš„â€œæ¡¥æ¢â€ï¼Œæ¥æ”¶ç”¨æˆ·æŸ¥è¯¢ï¼ˆQueryï¼‰åï¼Œé€šè¿‡è®¡ç®—æŸ¥è¯¢å‘é‡ä¸æ•°æ®åº“ä¸­å‘é‡çš„ç›¸ä¼¼åº¦ï¼Œå¿«é€Ÿå®šä½æœ€ç›¸å…³çš„æ–‡æ¡£ç‰‡æ®µã€‚</li>
<li>LLMï¼šä»¥æ£€ç´¢åˆ°çš„ç›¸å…³æ–‡æ¡£ç‰‡æ®µä¸ºä¸Šä¸‹æ–‡ï¼Œç»“åˆè‡ªèº«è¯­è¨€ç†è§£èƒ½åŠ›ç”Ÿæˆè´´åˆç”¨æˆ·éœ€æ±‚çš„è‡ªç„¶è¯­è¨€ç­”æ¡ˆï¼Œæœ€ç»ˆå®ç°â€œåŸºäºäº‹å®çš„æ™ºèƒ½å›ç­”â€ã€‚</li>
</ol>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/692772bd61454d62b607d4168359a5f1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766980534&amp;x-signature=EjxSAaYxePSuv7FI4cU1ZoG6M0U%3D" alt="" loading="lazy"/></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2312.10997v5" target="_blank" title="https://arxiv.org/abs/2312.10997v5" ref="nofollow noopener noreferrer">arxiv.org/abs/2312.10â€¦</a></p>
<p>ä¸Šè¿°æ¨¡å—çš„åä½œå¯æ¢³ç†ä¸ºRAGçš„åŸºç¡€æµç¨‹ï¼Œå³ç´¢å¼•ã€æ£€ç´¢ã€ç”Ÿæˆä¸‰ä¸ªæ ¸å¿ƒç¯èŠ‚ï¼Œå„ç¯èŠ‚ä¸æ¨¡å—çš„å¯¹åº”å…³ç³»å¦‚ä¸‹ï¼š</p>
<ol start="0">
<li>ç´¢å¼•ï¼šå€ŸåŠ©æ–‡æ¡£å¤„ç†æ¨¡å—ã€å‘é‡ç¼–ç å™¨ã€å‘é‡æ•°æ®åº“ï¼Œå°†æ–‡æ¡£åº“åˆ†å‰²ä¸ºè¾ƒçŸ­ç‰‡æ®µï¼Œå†é€šè¿‡ç¼–ç å™¨æ„å»ºå‘é‡ç´¢å¼•ã€‚</li>
<li>æ£€ç´¢ï¼šä¾æ‰˜ä¸Šè¿°ä¸‰è€…ï¼Œæ ¹æ®é—®é¢˜ä¸ç‰‡æ®µçš„ç›¸ä¼¼åº¦æ£€ç´¢ç›¸å…³æ–‡æ¡£ç‰‡æ®µã€‚</li>
<li>ç”Ÿæˆï¼šç”±LLMä»¥æ£€ç´¢åˆ°çš„ä¸Šä¸‹æ–‡ä¸ºæ¡ä»¶ï¼Œç”Ÿæˆé—®é¢˜çš„å›ç­”ã€‚</li>
</ol>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4216f0c88d934d9aa7ddd0fe0f5b5030~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766980534&amp;x-signature=9VFhRxlhfLcDvv2jmqlW0h0YxUg%3D" alt="" loading="lazy"/></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.dailydoseofds.com%2Fp%2F5-chunking-strategies-for-rag%3Fref%3Ddailydoseofds.com" target="_blank" title="https://blog.dailydoseofds.com/p/5-chunking-strategies-for-rag?ref=dailydoseofds.com" ref="nofollow noopener noreferrer">blog.dailydoseofds.com/p/5-chunkinâ€¦</a></p>
<h3 data-id="heading-3">1.3 RAGç³»ç»Ÿå·¥ä½œæµç¨‹è¯¦ç»†ä»‹ç»</h3>
<p>æœ¬èŠ‚ä¸»è¦åœ¨1.2èŠ‚åŸºç¡€ä¸Šè¯¦ç»†ä»‹ç»RAGç³»ç»Ÿçš„å·¥ä½œæµç¨‹ï¼Œç›¸å…³å†…å®¹æ›´åŠ è¯¦ç»†çš„ä»‹ç»å¯ä»¥è§ï¼š16 Techniques to Supercharge and Build Real-world RAG Systems[5]ã€‚</p>
<p>1.æ–‡æœ¬åˆ†æ®µ</p>
<p>æ–‡æ¡£å¤„ç†æ¨¡å—é¦–å…ˆå°†å¤–éƒ¨æ–‡æ¡£æ‹†åˆ†ä¸ºæ–‡æœ¬ç‰‡æ®µï¼Œç›®çš„æ˜¯é¿å…å› æ–‡æ¡£è¿‡é•¿å¯¼è‡´çš„æ£€ç´¢æ•ˆç‡ä½ã€è¯­ä¹‰ç†è§£å—é™ã€èµ„æºæµªè´¹ã€ç”Ÿæˆè´¨é‡ä¸‹é™åŠæ­§ä¹‰é£é™©å¢åŠ ç­‰é—®é¢˜ã€‚åˆç†åˆ†æ®µæ˜¯ä¿éšœåç»­æ£€ç´¢ä¸Šä¸‹æ–‡æœ‰æ•ˆæ€§çš„å‰æã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f784d57cb9624fb2bd02eca14c42b58d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766980534&amp;x-signature=z0sDqD0gimY37g3g0t10qZ3UGOw%3D" alt="" loading="lazy"/></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.dailydoseofds.com%2F16-techniques-to-supercharge-and-build-real-world-rag-systems-part-1%2F" target="_blank" title="https://www.dailydoseofds.com/16-techniques-to-supercharge-and-build-real-world-rag-systems-part-1/" ref="nofollow noopener noreferrer">www.dailydoseofds.com/16-techniquâ€¦</a></p>
<ol start="2">
<li>æ–‡æœ¬ç‰‡æ®µå‘é‡åŒ–</li>
</ol>
<p>å®Œæˆæ–‡æœ¬åˆ†æ®µåï¼Œå€ŸåŠ©å‘é‡ç¼–ç å™¨å°†å„æ–‡æœ¬ç‰‡æ®µè½¬åŒ–ä¸ºè¯­ä¹‰å‘é‡ã€‚ç›®å‰ä¸»æµçš„åšæ³•æ˜¯é‡‡ç”¨Transformeræ¨¡å‹ï¼Œå…¶å¼ºå¤§çš„ä¸Šä¸‹æ–‡ç†è§£èƒ½åŠ›ï¼Œæ­£æ˜¯ç”Ÿæˆé«˜è´¨é‡è¯­ä¹‰å‘é‡çš„å…³é”®ã€‚å…³äºæ–‡æœ¬å‘é‡çš„æå–æ–¹æ³•ï¼Œå¯å‚è€ƒæ–‡ç« ï¼šBi-encoders and Cross-encoders for Sentence Pair Similarity Scoring[6]ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0906e629cb994648883c39ee97e4db9f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766980534&amp;x-signature=UTKcSOCVRQDeD%2FO3BDVEx31QXcw%3D" alt="" loading="lazy"/></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.dailydoseofds.com%2F16-techniques-to-supercharge-and-build-real-world-rag-systems-part-1%2F" target="_blank" title="https://www.dailydoseofds.com/16-techniques-to-supercharge-and-build-real-world-rag-systems-part-1/" ref="nofollow noopener noreferrer">www.dailydoseofds.com/16-techniquâ€¦</a></p>
<ol start="3">
<li>å‘é‡å­˜å‚¨ä¸çŸ¥è¯†åº“æ„å»º</li>
</ol>
<p>å°†æ–‡æœ¬å‘é‡å­˜å…¥å‘é‡æ•°æ®åº“ï¼Œæ•°æ®åº“é€šè¿‡å…³è”å­˜å‚¨åŸå§‹å†…å®¹ä¸å¯¹åº”å‘é‡æ„å»ºå¤–éƒ¨çŸ¥è¯†æ–‡æœ¬åº“ã€‚ä½œä¸ºRAGçš„çŸ¥è¯†å­˜å‚¨å±‚ï¼Œå‘é‡æ•°æ®åº“èšåˆå„ç±»çŸ¥è¯†ï¼Œä¸ºæŸ¥è¯¢å“åº”æä¾›ç²¾å‡†ä¾æ®ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/00b4a6703d09474a9c9e1a9d24b89403~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766980534&amp;x-signature=eRTsXSAZLSA8fvM3Xrch%2BfgjPTQ%3D" alt="" loading="lazy"/></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.dailydoseofds.com%2F16-techniques-to-supercharge-and-build-real-world-rag-systems-part-1%2F" target="_blank" title="https://www.dailydoseofds.com/16-techniques-to-supercharge-and-build-real-world-rag-systems-part-1/" ref="nofollow noopener noreferrer">www.dailydoseofds.com/16-techniquâ€¦</a></p>
<ol start="4">
<li>ç”¨æˆ·æŸ¥è¯¢å‘é‡åŒ–</li>
</ol>
<p>ç”¨æˆ·è¾“å…¥æŸ¥è¯¢æ–‡æœ¬ï¼ˆqueryï¼‰åï¼Œç³»ç»Ÿä½¿ç”¨ä¸æ„å»ºçŸ¥è¯†åº“æ—¶ä¸€è‡´çš„å‘é‡ç¼–ç å™¨å°†å…¶è½¬åŒ–ä¸ºå‘é‡ï¼Œç¡®ä¿è¯­ä¹‰ç©ºé—´ä¸€è‡´æ€§ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/00bd8add6a3b44b8bb802724f5add87e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766980534&amp;x-signature=1b1qLZhfun6qfB3rwb45AlMLqng%3D" alt="" loading="lazy"/></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.dailydoseofds.com%2F16-techniques-to-supercharge-and-build-real-world-rag-systems-part-1%2F" target="_blank" title="https://www.dailydoseofds.com/16-techniques-to-supercharge-and-build-real-world-rag-systems-part-1/" ref="nofollow noopener noreferrer">www.dailydoseofds.com/16-techniquâ€¦</a></p>
<ol start="5">
<li>ç›¸ä¼¼ç‰‡æ®µæ£€ç´¢</li>
</ol>
<p>æ£€ç´¢å™¨é€šè¿‡æ¯”å¯¹æŸ¥è¯¢å‘é‡ä¸æ•°æ®åº“ä¸­å­˜å‚¨çš„æ–‡æœ¬å‘é‡ï¼Œå®šä½ç›¸ä¼¼åº¦æœ€é«˜çš„ä¿¡æ¯ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cb7806ab8fcc4fc99f40b7039bda3483~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766980534&amp;x-signature=ejQzhkE7eCgDnKYFUYrLw1PtYUM%3D" alt="" loading="lazy"/></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.dailydoseofds.com%2F16-techniques-to-supercharge-and-build-real-world-rag-systems-part-1%2F" target="_blank" title="https://www.dailydoseofds.com/16-techniques-to-supercharge-and-build-real-world-rag-systems-part-1/" ref="nofollow noopener noreferrer">www.dailydoseofds.com/16-techniquâ€¦</a></p>
<p>å®é™…åº”ç”¨ä¸­ï¼Œæ£€ç´¢å™¨é€šè¿‡è¿‘ä¼¼æœ€è¿‘é‚»æœç´¢è¿”å›å‰kä¸ªï¼ˆtopkï¼‰æœ€ç›¸ä¼¼ç‰‡æ®µï¼Œè¿™æ˜¯å› ä¸ºå¤æ‚æŸ¥è¯¢å¸¸å…³è”å¤šä¸ªç›¸å…³å†…å®¹ï¼Œå¤šç»“æœèƒ½é¿å…å…³é”®ä¿¡æ¯é—æ¼ï¼Œä¸ºå“åº”ç”Ÿæˆæä¾›å…¨é¢ä¾æ®ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/170337bf91f74913b4ab004dceed526c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766980534&amp;x-signature=ygIgqz%2FSLgZb%2BOsAw3PQ%2B%2F9VLHo%3D" alt="" loading="lazy"/></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.dailydoseofds.com%2F16-techniques-to-supercharge-and-build-real-world-rag-systems-part-1%2F" target="_blank" title="https://www.dailydoseofds.com/16-techniques-to-supercharge-and-build-real-world-rag-systems-part-1/" ref="nofollow noopener noreferrer">www.dailydoseofds.com/16-techniquâ€¦</a></p>
<ol start="6">
<li>æ–‡æœ¬ç‰‡æ®µé‡æ’åº</li>
</ol>
<p>æ£€ç´¢å®Œæˆåï¼Œéœ€è¿›ä¸€æ­¥å¤„ç†æŒ‘é€‰å‡ºçš„æ–‡æ¡£ç‰‡æ®µï¼Œå°†ç›¸å…³æ€§æœ€é«˜çš„æ–‡æœ¬æ®µè½ç½®äºæœ€å‰ï¼Œè¿™ä¸€è¿‡ç¨‹ç§°ä¸ºé‡æ’åºã€‚æ­¤æ­¥éª¤é€šå¸¸ä½¿ç”¨Rerankeræ¨¡å‹ï¼Œè¿™ç±»æ¨¡å‹å¤šä¸ºäº¤å‰ç¼–ç å™¨ï¼Œä¼šè¯„ä¼°æŸ¥è¯¢ä¸å„å€™é€‰æ®µè½çš„ç›¸å…³æ€§å¹¶ç»™å‡ºç²¾ç¡®ç›¸å…³åº¦åˆ†æ•°ï¼Œéšåä¾åˆ†æ•°é‡æ–°æ’åºï¼Œå°†æœ€ç›¸å…³æ®µè½ç½®äºå‰åˆ—ï¼Œä¾¿äºç”Ÿæˆæ¨¡å‹ä¼˜å…ˆé€‰ç”¨ã€‚</p>
<p>è¿™æ ·åšèƒ½æå‡åç»­ç”Ÿæˆå†…å®¹çš„å‡†ç¡®æ€§å’Œé’ˆå¯¹æ€§ï¼Œä¸è¿‡å¹¶éæ‰€æœ‰RAGåº”ç”¨éƒ½åŒ…å«æ­¤æ­¥éª¤ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5a699ebfdcbb4851bad31f00c52c9113~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766980534&amp;x-signature=xm0MI6pzYFuM4g1y0jHCBjw9tbk%3D" alt="" loading="lazy"/></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.dailydoseofds.com%2F16-techniques-to-supercharge-and-build-real-world-rag-systems-part-1%2F" target="_blank" title="https://www.dailydoseofds.com/16-techniques-to-supercharge-and-build-real-world-rag-systems-part-1/" ref="nofollow noopener noreferrer">www.dailydoseofds.com/16-techniquâ€¦</a></p>
<ol start="7">
<li>ç”Ÿæˆå›ç­”</li>
</ol>
<p>å°†ç”¨æˆ·åŸå§‹æŸ¥è¯¢ä¸æ£€ç´¢åˆ°çš„æ–‡æœ¬ç‰‡æ®µæ•´åˆä¸ºæç¤ºæ¨¡æ¿ï¼Œè¾“å…¥è‡³LLMã€‚æ¨¡å‹ä»¥æ–‡æœ¬ç‰‡æ®µä¸ºä¸Šä¸‹æ–‡ï¼Œç”Ÿæˆæ—¢èåˆæ–‡æ¡£ä¿¡æ¯ã€åˆå…·å¤‡è¿è´¯æ€§å’Œç›¸å…³æ€§çš„å›ç­”ï¼Œç›´æ¥å›åº”ç”¨æˆ·æŸ¥è¯¢ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cd466cde49414810aca47e65ad2e4720~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766980534&amp;x-signature=yXp%2BCe7jPb%2Febdp1I65UN5vZdHg%3D" alt="" loading="lazy"/></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.dailydoseofds.com%2F16-techniques-to-supercharge-and-build-real-world-rag-systems-part-1%2F" target="_blank" title="https://www.dailydoseofds.com/16-techniques-to-supercharge-and-build-real-world-rag-systems-part-1/" ref="nofollow noopener noreferrer">www.dailydoseofds.com/16-techniquâ€¦</a></p>
<h2 data-id="heading-4">2 RAGæŠ€æœ¯æ¼”è¿›è¶‹åŠ¿å’Œå¸¸è§é—®é¢˜</h2>
<h3 data-id="heading-5">2.1 RAGæŠ€æœ¯ä¼˜åŒ–ä¸æ¼”è¿›è¶‹åŠ¿</h3>
<h4 data-id="heading-6">2.1.1 RAGæŠ€æœ¯å¢å¼ºè·¯å¾„</h4>
<p>éšç€LLMçš„è¿…çŒ›å‘å±•ï¼ŒRAGæŠ€æœ¯åŒæ­¥è¿›å…¥å¿«é€Ÿæ¼”è¿›é˜¶æ®µã€‚ç›®å‰ï¼Œå·²æœ‰å¤§é‡ç ”ç©¶ä¸å®è·µä»å¤šç»´åº¦åˆ‡å…¥ã€‚ä¸‹é¢å°†ä»å¢å¼ºé˜¶æ®µã€å¢å¼ºæ¥æºå’Œå¢å¼ºè¿‡ç¨‹ä¸‰ä¸ªæ–¹é¢ï¼Œä»‹ç»ç°æœ‰æŠ€æœ¯å¦‚ä½•é€šè¿‡å¤šæ ·åŒ–æ‰‹æ®µæå‡RAGçš„æ£€ç´¢ç²¾åº¦å¹¶ä¼˜åŒ–è¿è¡Œæ•ˆç‡ã€‚</p>
<p><strong>å¢å¼ºé˜¶æ®µ</strong></p>
<p>ä»æŠ€æœ¯å¢å¼ºçš„é˜¶æ®µç‰¹æ€§æ¥çœ‹ï¼ŒLLMåœ¨é¢„è®­ç»ƒã€å¾®è°ƒå’Œæ¨ç†ç¯èŠ‚çš„ä¼˜åŒ–æ–¹å¼å…·ä½“å¦‚ä¸‹ï¼š</p>
<ul>
<li>Pre-trainingï¼ˆé¢„è®­ç»ƒé˜¶æ®µï¼‰ï¼šå¼•å…¥æ£€ç´¢å¢å¼ºæœºåˆ¶ï¼Œå¼ºåŒ–æ¨¡å‹å¯¹å¤–éƒ¨çŸ¥è¯†çš„èåˆèƒ½åŠ›</li>
<li>Fine-tuningï¼ˆå¾®è°ƒé˜¶æ®µï¼‰ï¼šä¾æ‰˜æ£€ç´¢ä¼˜åŒ–æ‰‹æ®µï¼Œæå‡æ¨¡å‹å¯¹ç‰¹å®šä»»åŠ¡çš„é€‚é…æ€§èƒ½</li>
<li>Inferenceï¼ˆæ¨ç†é˜¶æ®µï¼‰ï¼šé€šè¿‡åŠ¨æ€æ£€ç´¢çŸ¥è¯†è¾…åŠ©ç”Ÿæˆè¿‡ç¨‹ï¼Œè¿™ä¹Ÿæ˜¯RAGæŠ€æœ¯æœ€æ ¸å¿ƒçš„åº”ç”¨åœºæ™¯</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f303b2ac049940dd82060d4967e1d543~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766980534&amp;x-signature=xboNx6WnLbB5grmkOTltbkuVPZM%3D" alt="" loading="lazy"/></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2312.10997v4" target="_blank" title="https://arxiv.org/abs/2312.10997v4" ref="nofollow noopener noreferrer">arxiv.org/abs/2312.10â€¦</a></p>
<p><strong>å¢å¼ºæ¥æº</strong></p>
<p>åœ¨RAGæŠ€æœ¯ä¸­ï¼Œå¢å¼ºæ¥æºæŒ‡é€šè¿‡å¤–éƒ¨æ•°æ®å¼¥è¡¥æ¨¡å‹å›ºæœ‰ç¼ºé™·çš„ä¿¡æ¯æ¸ é“ï¼Œä¸»è¦åŒ…æ‹¬ä¸‰ç±»ï¼š</p>
<ol start="0">
<li>éç»“æ„åŒ–æ•°æ®ï¼ˆå¤©ç„¶æ–‡æœ¬å½¢å¼ï¼Œå¦‚æ–‡ç« ã€å°è¯´ï¼‰</li>
</ol>
<ul>
<li>å®šä¹‰ï¼šæ— å›ºå®šæ ¼å¼çš„æ–‡æœ¬å†…å®¹ï¼Œæ¶µç›–æ–°é—»ã€è®ºæ–‡ã€å°è¯´ã€ç½‘é¡µæ®µè½ç­‰ã€‚</li>
<li>ç¤ºä¾‹ï¼š</li>
</ul>

<ul>
<li>æ¨¡å‹é¢„è®­ç»ƒæ—¶å­¦ä¹ çš„ç™¾ç§‘â€œæç™½ç”Ÿå¹³â€çº¯æ–‡å­—è¯æ¡ï¼›</li>
<li>æ¨ç†é˜¶æ®µæ£€ç´¢çš„é—®ç­”ç½‘ç«™â€œå¦‚ä½•è¯„ä»·æç™½â€çš„æ•£æ–‡å¼ç”¨æˆ·å›ç­”ã€‚</li>
</ul>

<ul>
<li>ç‰¹ç‚¹ï¼šäººç±»å¯ç›´æ¥é˜…è¯»ï¼Œä½†æå–å…³é”®ä¿¡æ¯éœ€â€œå¤§æµ·æé’ˆâ€ï¼ˆä¾‹å¦‚ä»ä¸€ç¯‡è®ºæ–‡ä¸­å®šä½æŸå¥è¯ï¼‰ã€‚</li>
</ul>
<ol start="2">
<li>ç»“æ„åŒ–æ•°æ®ï¼ˆè§„æ•´æ ¼å¼å‘ˆç°ï¼Œå¦‚è¡¨æ ¼ã€æ•°æ®åº“ï¼‰</li>
</ol>
<ul>
<li>å®šä¹‰ï¼šæ ¼å¼æ˜ç¡®çš„æ•°æ®å½¢æ€ï¼ŒåŒ…æ‹¬Excelè¡¨æ ¼ã€æ•°æ®åº“è¡¨ã€çŸ¥è¯†å›¾è°±ï¼ˆå«èŠ‚ç‚¹ä¸å…³ç³»ï¼‰ç­‰ã€‚</li>
<li>ç¤ºä¾‹ï¼š</li>
</ul>

<ul>
<li>æ¨¡å‹é¢„è®­ç»ƒæ—¶å­¦ä¹ çš„â€œä¸­å›½è¯—äººæœä»£è¡¨â€ï¼ˆè¡¨æ ¼ä¸­åŒ…å«â€œå§“å-æœä»£-ä»£è¡¨ä½œâ€å­—æ®µï¼‰ï¼›</li>
<li>æ¨ç†æ—¶æŸ¥è¯¢çŸ¥è¯†å›¾è°±ä¸­â€œæç™½â†’å¥½å‹â†’æœç”«â€çš„å…³è”å…³ç³»ã€‚</li>
</ul>

<ul>
<li>ç‰¹ç‚¹ï¼šæ•°æ®æ’åˆ—è§„æ•´ï¼Œå¯ç²¾å‡†æå–ä¿¡æ¯ï¼ˆå¦‚ç›´æ¥è·å–è¡¨æ ¼ä¸­çš„â€œæç™½ç”Ÿå’å¹´â€ï¼‰ï¼Œä½†è¦æ±‚æ¨¡å‹å…·å¤‡è§£ææ ¼å¼çš„èƒ½åŠ›ï¼ˆå¦‚è¡¨æ ¼è§£æèƒ½åŠ›ï¼‰ã€‚</li>
</ul>
<ol start="3">
<li>LLMç”Ÿæˆå†…å®¹ï¼ˆæ¨¡å‹å®æ—¶ç”Ÿæˆçš„æ€è€ƒè‰ç¨¿ï¼‰</li>
</ol>
<ul>
<li>å®šä¹‰ï¼šæ¨¡å‹åœ¨æ¨ç†è¿‡ç¨‹ä¸­ä¸´æ—¶äº§ç”Ÿçš„æ–‡æœ¬ï¼ˆéå¤–éƒ¨ç°æˆä¿¡æ¯ï¼Œå±äºæ€è€ƒé˜¶æ®µçš„åŠ¨æ€äº§ç‰©ï¼‰ã€‚</li>
<li>ç¤ºä¾‹ï¼š</li>
</ul>

<ul>
<li>å›ç­”â€œæç™½ä¸æœç”«çš„å…³ç³»â€æ—¶ï¼Œæ¨¡å‹å…ˆè‡ªä¸»ç”Ÿæˆå‡è®¾ï¼šâ€œä»–ä»¬æ˜¯å¥½å‹ï¼Œæœç”«æ›¾ä½œã€Šèµ æç™½ã€‹â€ï¼ˆæ­¤ä¸ºæ¨¡å‹å®æ—¶æ„æ€çš„å†…å®¹ï¼‰ï¼›</li>
<li>éšåä»¥è¯¥å‡è®¾ä¸ºçº¿ç´¢ï¼Œæ£€ç´¢ã€Šæœå·¥éƒ¨é›†ã€‹ä¸­çš„è¯—å¥è¿›è¡ŒéªŒè¯ã€‚</li>
</ul>

<ul>
<li>ç‰¹ç‚¹ï¼šå…·å¤‡åŠ¨æ€æ€§ä¸çµæ´»æ€§ï¼ˆæ¨¡å‹è¾¹æ€è€ƒè¾¹ç”Ÿæˆï¼‰ï¼Œä½†å¯èƒ½å­˜åœ¨è¯¯å·®ï¼ˆå¦‚å‡è®¾é”™è¯¯éœ€é€šè¿‡æ£€ç´¢ä¿®æ­£ï¼‰ã€‚</li>
</ul>
<p>ä¸€å¥è¯æ€»ç»“å·®å¼‚ï¼š</p>
<ul>
<li>éç»“æ„åŒ–æ•°æ®ä¸ç»“æ„åŒ–æ•°æ®ï¼šå€ŸåŠ©å¤–éƒ¨ç°æˆçš„â€œçŸ¥è¯†å‚¨å¤‡â€ï¼ˆä»–äººæ’°å†™çš„æ–‡ç« ã€è¡¨æ ¼ç­‰ï¼‰ï¼›</li>
<li>LLMç”Ÿæˆå†…å®¹ï¼šå€ŸåŠ©è‡ªèº«ä¸´æ—¶çš„â€œè„‘æš´è‰ç¨¿â€ï¼ˆæ¨¡å‹æ¨ç†ä¸­åŠ¨æ€ç”Ÿæˆçš„å†…å®¹ï¼Œç”¨ä½œæ£€ç´¢çº¿ç´¢ï¼‰ã€‚</li>
</ul>
<p><strong>å¢å¼ºè¿‡ç¨‹</strong></p>
<p>å¢å¼ºè¿‡ç¨‹æŒ‡æ¨¡å‹é€šè¿‡æ£€ç´¢çŸ¥è¯†è¾…åŠ©ç”Ÿæˆå†…å®¹çš„æœºåˆ¶ï¼Œæ ¸å¿ƒåœ¨äºæ£€ç´¢ç­–ç•¥çš„é€»è¾‘è®¾è®¡ï¼Œå…·ä½“åŒ…æ‹¬ä»¥ä¸‹å‡ ç±»ï¼š</p>
<ol start="0">
<li>ä¸€æ¬¡æ£€ç´¢ï¼ˆOnce Retrievalï¼‰</li>
</ol>
<ul>
<li>å®šä¹‰ï¼šé’ˆå¯¹é—®é¢˜ä»…æ‰§è¡Œå•æ¬¡æ£€ç´¢ï¼Œç›´æ¥ç”¨ç»“æœç”Ÿæˆç­”æ¡ˆã€‚</li>
<li>ç±»æ¯”ï¼šæŸ¥å­—å…¸æ—¶åªç¿»ä¸€æ¬¡é¡µç ï¼Œä¸è®ºè§£é‡Šæ˜¯å¦å‡†ç¡®ä¾¿ç›´æ¥å¼•ç”¨ã€‚</li>
<li>ç‰¹ç‚¹ï¼šæ“ä½œç®€å•ã€æ•ˆç‡é«˜ï¼Œä½†å¯èƒ½å› æ£€ç´¢ç»“æœä¸å…¨æˆ–é—®é¢˜éœ€å¤šç»´åº¦çŸ¥è¯†è€Œé—æ¼ä¿¡æ¯ã€‚</li>
</ul>
<ol start="2">
<li>è¿­ä»£æ£€ç´¢ï¼ˆIterative Retrievalï¼‰</li>
</ol>
<ul>
<li>å®šä¹‰ï¼šåŸºäºé¦–æ¬¡ç”Ÿæˆçš„å†…å®¹åå¤æ£€ç´¢è¡¥å……çŸ¥è¯†ï¼Œé€æ­¥ä¼˜åŒ–ç­”æ¡ˆã€‚</li>
<li>ç±»æ¯”ï¼šå†™ä½œæ–‡æ—¶å…ˆåˆ—å¤§çº²ï¼ˆé¦–æ¬¡ç”Ÿæˆï¼‰ï¼Œå‘ç°â€œæç™½çš„å¥½å‹â€ä»…æåŠæœç”«ï¼Œä¾¿å†æŸ¥é«˜é€‚ã€ç‹æ˜Œé¾„ç­‰èµ„æ–™ï¼ˆè¿­ä»£æ£€ç´¢ï¼‰ä»¥è¡¥å……å†…å®¹ã€‚</li>
<li>ç‰¹ç‚¹ï¼šå½¢æˆâ€œç”Ÿæˆâ†’åé¦ˆâ†’å†æ£€ç´¢â€çš„å¾ªç¯ï¼Œç±»ä¼¼â€œæ¸¸æˆä¸­å¤æ´»åç»§ç»­é—¯å…³â€ã€‚</li>
</ul>
<ol start="3">
<li>è‡ªé€‚åº”æ£€ç´¢ï¼ˆAdaptive Patternï¼‰</li>
</ol>
<ul>
<li>å®šä¹‰ï¼šæ ¹æ®ä»»åŠ¡ç±»å‹æˆ–ç”ŸæˆçŠ¶æ€åŠ¨æ€è°ƒæ•´æ£€ç´¢ç­–ç•¥ï¼Œä¾‹å¦‚åˆ‡æ¢æ•°æ®åº“ã€è°ƒæ•´æ£€ç´¢èŒƒå›´ç­‰ã€‚</li>
<li>ç±»æ¯”ï¼šç©æ¸¸æˆæ—¶ï¼Œé‡â€œå†å²é¢˜â€åˆ‡æ¢è‡³å†å²æ•°æ®åº“ï¼Œé‡â€œæ•°å­¦é¢˜â€åˆ‡æ¢è‡³å…¬å¼åº“ï¼›æˆ–å‘ç°ç”Ÿæˆå†…å®¹æ¨¡ç³Šæ—¶ï¼Œæ‰©å¤§æ£€ç´¢èŒƒå›´ã€‚</li>
<li>ç‰¹ç‚¹ï¼šçµæ´»æ€§å¼ºï¼Œå¦‚åŒâ€œæ™ºèƒ½åˆ‡æ¢æ­¦å™¨â€ï¼Œä½†éœ€æ¨¡å‹å…·å¤‡åˆ¤æ–­â€œä½•æ—¶ä½¿ç”¨ä½•ç§ç­–ç•¥â€çš„èƒ½åŠ›ã€‚</li>
</ul>
<ol start="4">
<li>é€’å½’æ£€ç´¢ï¼ˆRecursive Retrievalï¼‰</li>
</ol>
<ul>
<li>å®šä¹‰ï¼šå°†å¤æ‚é—®é¢˜æ‹†è§£ä¸ºå­é—®é¢˜ï¼Œé€å±‚é€’å½’æ£€ç´¢ï¼Œåƒâ€œä¿„ç½—æ–¯å¥—å¨ƒâ€èˆ¬æ·±å…¥æ¢ç©¶ã€‚</li>
<li>ç±»æ¯”ï¼šç ´æ¡ˆæ—¶ï¼Œå…ˆæŸ¥â€œæç™½çš„æ­»å› â€ï¼ˆä¸»é—®é¢˜ï¼‰ï¼Œæ‹†è§£ä¸ºâ€œæç™½æ™šå¹´å¥åº·çŠ¶å†µâ€ï¼ˆå­é—®é¢˜1ï¼‰ï¼Œå†æ‹†è§£ä¸ºâ€œå”æœåŒ»ç–—æ°´å¹³â€ï¼ˆå­é—®é¢˜2ï¼‰ï¼Œæ¯å±‚å‡è¿›è¡Œæ£€ç´¢ã€‚</li>
<li>æ ¸å¿ƒé€»è¾‘ï¼šéµå¾ªâ€œé—®é¢˜â†’æ‹†è§£â†’å­æ£€ç´¢â†’å†æ‹†è§£â†’æ·±å±‚æ£€ç´¢â€çš„è·¯å¾„ï¼Œä¸é€’å½’å‡½æ•°æ€è·¯ä¸€è‡´ã€‚</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1e1717c1aad44211851d192db95ded15~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766980534&amp;x-signature=I1%2BkZVGi6ScefsidfLE8SagNfQM%3D" alt="" loading="lazy"/></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2312.10997v4" target="_blank" title="https://arxiv.org/abs/2312.10997v4" ref="nofollow noopener noreferrer">arxiv.org/abs/2312.10â€¦</a></p>
<p>æ€»ä¹‹ï¼ŒRAGå‘å±•çš„ä¸‰å¤§å…³é”®æŠ€æœ¯åŒ…æ‹¬å¢å¼ºé˜¶æ®µã€æ•°æ®æ¥æºåŠå¤„ç†è¿‡ç¨‹ï¼Œè¿™ä¸‰å¤§æŠ€æœ¯èƒ½å¤Ÿæ¸…æ™°å‘ˆç°RAGæ ¸å¿ƒç»„ä»¶çš„åˆ†ç±»ä½“ç³»ï¼ŒåŒæ—¶RAGçš„å®ç°æ¨¡å¼ä¹Ÿåœ¨ä¸æ–­æ¼”å˜ã€‚æ—©æœŸçš„RAGå¯èƒ½åªæ˜¯ â€œç®€å•æ£€ç´¢+ç›´æ¥ç”Ÿæˆâ€ çš„æ¨¡å¼ï¼Œè€Œéšç€æŠ€æœ¯è¿›æ­¥ï¼Œå…¶å®ç°ä¸­å·²èå…¥æ›´å¤æ‚çš„ç¯èŠ‚ï¼Œè¿™äº›å…·ä½“å®ç°æ–¹æ³•å§‹ç»ˆå¤„äºåŠ¨æ€å˜åŒ–ä¸­ï¼Œæ„ˆå‘ç²¾ç»†ä¸”èƒ½æ›´å¥½åœ°é€‚é…ä¸åŒåœºæ™¯ã€‚</p>
<p>æ­å»ºRAGç³»ç»Ÿæ—¶ï¼ŒæŠ€æœ¯é€‰å‹çš„åº”è¯¥ä»¥éœ€æ±‚é€‚é…ä¸ºå¯¼å‘ï¼Œå…¼é¡¾æ•ˆæœçš„è¯„ä¼°ä¸ä¼˜åŒ–ï¼Œé€‰æ‹©èƒ½é«˜æ•ˆæ”¯æ’‘ç›®æ ‡åœºæ™¯ä¸”è¡¨ç°æ›´ä¼˜çš„æ–¹æ¡ˆã€‚å…³äºRAGç³»ç»Ÿçš„æ„å»ºå’ŒæŠ€æœ¯é€‰å‹å¯ä»¥å‚è€ƒï¼šæ–‡ç« <a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzIyNTA3NDY2NQ%3D%3D%26mid%3D2247487604%26idx%3D1%26sn%3D38ef1ad966a816275f47cf4e28f80d2f%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzIyNTA3NDY2NQ==&amp;mid=2247487604&amp;idx=1&amp;sn=38ef1ad966a816275f47cf4e28f80d2f&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">17ç§RAGæ¶æ„å®ç°åŸç†ä¸é€‰å‹</a>æˆ–å‚è€ƒä¸‹ä¸€èŠ‚å†…å®¹ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ff99103122194482a685093d129675b3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766980534&amp;x-signature=FO%2B8d6eEYgooMlp9s2FCu4HVgf0%3D" alt="" loading="lazy"/></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.abacus.ai%2Fblog%2F2023%2F08%2F10%2Fcreate-your-custom-chatgpt-pick-the-best-llm-that-works-for-you%2F" target="_blank" title="https://blog.abacus.ai/blog/2023/08/10/create-your-custom-chatgpt-pick-the-best-llm-that-works-for-you/" ref="nofollow noopener noreferrer">blog.abacus.ai/blog/2023/0â€¦</a></p>
<h4 data-id="heading-7">2.1.2 RAGç³»ç»Ÿå®ç°æ¨¡å¼çš„æ¼”åŒ–</h4>
<p>å®ç°é«˜æ•ˆæ–‡æ¡£æ£€ç´¢éœ€è¦è§£å†³ä¸‰å¤§æ ¸å¿ƒé—®é¢˜ï¼š</p>
<ol start="0">
<li>æ„å»ºç²¾ç¡®çš„è¯­ä¹‰è¡¨ç¤ºï¼Œç¡®ä¿æ–‡æ¡£å’ŒæŸ¥è¯¢çš„åµŒå…¥èƒ½å‡†ç¡®æ•æ‰å…¶å«ä¹‰ã€‚</li>
<li>å¯¹é½æŸ¥è¯¢ä¸æ–‡æ¡£çš„è¯­ä¹‰ç©ºé—´ï¼Œç¼©å°æ£€ç´¢æ¨¡å‹ç†è§£çš„æŸ¥è¯¢æ„å›¾ä¸æ–‡æ¡£å®é™…å†…å®¹ä¹‹é—´çš„è¯­ä¹‰é¸¿æ²Ÿã€‚</li>
<li>é€‚é…æ£€ç´¢å™¨è¾“å‡ºä¸LLMåå¥½ï¼Œä½¿æ£€ç´¢åˆ°çš„ä¸Šä¸‹æ–‡ä¿¡æ¯æ›´ç¬¦åˆä¸‹æ¸¸å¤§å‹è¯­è¨€æ¨¡å‹çš„ç”Ÿæˆéœ€æ±‚ã€‚</li>
</ol>
<p>ä¸ºåº”å¯¹ä¸Šè¿°æŒ‘æˆ˜ï¼Œåœ¨RAGæ¶æ„ä¹‹ä¸Šå¼•å…¥äº†æ£€ç´¢å‰ä¼˜åŒ–å’Œæ£€ç´¢åä¼˜åŒ–çš„ç­–ç•¥ã€‚</p>
<ol start="0">
<li>æ£€ç´¢å‰ä¼˜åŒ–ï¼Œæå‡ç´¢å¼•è´¨é‡å¦‚æ–‡æ¡£åˆ‡åˆ†ç²’åº¦ä¼˜åŒ–ã€å…ƒæ•°æ®å¢å¼ºå’ŒæŸ¥è¯¢å¤„ç†å¦‚è¯­ä¹‰è½¬æ¢ã€å…³é”®è¯æ‰©å±•ï¼Œæ—¨åœ¨æ”¹å–„æ£€ç´¢ç›¸å…³æ€§ã€‚</li>
<li>æ£€ç´¢åä¼˜åŒ–ï¼Œå¯¹æ£€ç´¢ç»“æœè¿›è¡Œè¿‡æ»¤ã€å»å†—ä½™ã€é‡æ’åºæŒ‰é‡è¦æ€§å’Œä¿¡æ¯å‹ç¼©æ•´åˆï¼Œç¡®ä¿è¾“å…¥LLMçš„ä¸Šä¸‹æ–‡ä¿¡æ¯æ›´ç²¾ç‚¼ç›¸å…³ã€‚</li>
</ol>
<p>åŸºäºä¼˜åŒ–ç­–ç•¥çš„åº”ç”¨æ·±åº¦ï¼Œå½“å‰RAGç ”ç©¶å½¢æˆäº†ä¸‰ç§ä¸»è¦èŒƒå¼ï¼š</p>
<ol start="0">
<li>åŸºç¡€RAGï¼ˆNaive RAGï¼‰</li>
</ol>
<ul>
<li>æ£€ç´¢è´¨é‡ä½ï¼Œå¯¼è‡´æ£€ç´¢ç»“æœä¸ç²¾å‡†ä¸å…¨é¢ã€‚</li>
<li>ç”Ÿæˆè´¨é‡å—é™ï¼ŒLLMæ˜“äº§ç”Ÿå¹»è§‰ï¼Œéš¾ä»¥æœ‰æ•ˆèåˆæ£€ç´¢åˆ°çš„ä¸Šä¸‹æ–‡ä¸å½“å‰ç”Ÿæˆä»»åŠ¡ã€‚</li>
<li>ä¿¡æ¯å†—ä½™ä¸é£æ ¼å†²çªï¼Œæ£€ç´¢ç»“æœå¸¸åŒ…å«é‡å¤å†—ä½™ä¿¡æ¯ï¼Œä¸”ä¸åŒæ¥æºæ–‡æœ¬é£æ ¼è¯­æ°”ä¸ä¸€è‡´ï¼Œå½±å“ç”Ÿæˆè¿è´¯æ€§ã€‚</li>
<li>è¿‡åº¦ä¾èµ–é£é™©ï¼ŒLLMå¯èƒ½è¿‡åº¦ä¾èµ–æœ‰æ—¶ä¸å‡†ç¡®çš„æ£€ç´¢ä¿¡æ¯ã€‚</li>
<li>éµå¾ªåŸºç¡€æµç¨‹ç´¢å¼•ã€æ£€ç´¢ã€ç”Ÿæˆã€‚</li>
<li>ä¸»è¦ç—›ç‚¹ï¼š</li>
</ul>
<ol start="2">
<li>è¿›é˜¶RAGï¼ˆAdvanced RAGï¼‰</li>
</ol>
<ul>
<li>é€šè¿‡å¼ºåŒ–æ£€ç´¢å‰å’Œæ£€ç´¢åä¼˜åŒ–çš„æµç¨‹ï¼Œå¹¶æ”¹è¿›ç´¢å¼•å¦‚æ»‘åŠ¨çª—å£ã€ç»†ç²’åº¦åˆ†å‰²ã€å…ƒæ•°æ®åˆ©ç”¨ï¼Œä»¥è§£å†³åŸºç¡€RAGçš„ç¼ºé™·ã€‚</li>
<li>æ£€ç´¢å‰ä¼˜åŒ–ï¼šåŒ…æ‹¬æ•°æ®ç²’åº¦ä¼˜åŒ–ã€ç´¢å¼•ç»“æ„è°ƒæ•´ã€å…ƒæ•°æ®æ³¨å…¥ã€å‘é‡å¯¹é½ã€æ··åˆæ£€ç´¢å¦‚ç»“åˆç¨€ç–ä¸ç¨ å¯†æ£€ç´¢ç­‰ã€‚</li>
<li>æ£€ç´¢æ ¸å¿ƒï¼šä¾èµ–åµŒå…¥æ¨¡å‹è®¡ç®—æŸ¥è¯¢ä¸æ–‡æ¡£å—çš„ç›¸ä¼¼åº¦ã€‚</li>
<li>æ£€ç´¢åä¼˜åŒ–ï¼šé‡‡ç”¨é‡æ’åºå’Œæç¤ºå‹ç¼©æŠ€æœ¯ï¼Œå…‹æœä¸Šä¸‹æ–‡çª—å£é™åˆ¶ï¼Œæç‚¼å…³é”®ä¿¡æ¯ã€‚</li>
<li>æ½œåœ¨æŒ‘æˆ˜ï¼šä»¥å¤æ‚åº¦æ¢æ•ˆæœï¼Œæå‡äº†åŸºç¡€RAGæ€§èƒ½ï¼Œä½†å…¶é¢å¤–æ¨¡å—çš„å¼•å…¥ä¹Ÿå¸¦æ¥äº†æ•ˆç‡ã€æ³›åŒ–æ€§å’Œå¯ç»´æŠ¤æ€§çš„æ–°æŒ‘æˆ˜ã€‚</li>
</ul>
<ol start="3">
<li>æ¨¡å—åŒ–RAGï¼ˆModular RAGï¼‰</li>
</ol>
<ul>
<li>æå‡ä¿¡æ¯æ•ˆç‡ä¸è´¨é‡ï¼Œæ•´åˆå¤šç§æ£€ç´¢æŠ€æœ¯ï¼Œä¼˜åŒ–æ£€ç´¢æ­¥éª¤å¦‚å¼•å…¥è®¤çŸ¥å›æº¯æœºåˆ¶ï¼Œå®æ–½å¤šæ ·åŒ–æŸ¥è¯¢ç­–ç•¥ï¼Œæœ‰æ•ˆåˆ©ç”¨åµŒå…¥ç›¸ä¼¼æ€§ã€‚</li>
<li>æ”¯æŒå¤æ‚äº¤äº’ï¼Œæ¨¡å—åŒ–è®¾è®¡ä¾¿äºå¤„ç†è¿­ä»£æ£€ç´¢ä¸å¤šè½®ç”Ÿæˆï¼Œå¦‚å¯¹å›æº¯æç¤ºçš„å“åº”ã€‚</li>
<li>å¼ºè°ƒæ¡†æ¶çš„é«˜åº¦çµæ´»æ€§ä¸é€‚åº”æ€§ï¼Œå¯å°†RAGæµç¨‹æ‹†è§£ä¸ºå¯æ›¿æ¢å¯é‡ç»„çš„æ¨¡å—ï¼Œä»¥è§£å†³ç‰¹å®šé—®é¢˜ã€‚</li>
<li>ä¼˜åŒ–æ–¹å‘ï¼š</li>
<li>æ½œåœ¨æŒ‘æˆ˜ï¼šå½“LLMå¯¹ä¸»é¢˜çŸ¥è¯†åŒ®ä¹æ—¶ï¼Œä¾èµ–æ£€ç´¢ä¿¡æ¯å¯èƒ½å¯¼è‡´é”™è¯¯ç‡ä¸Šå‡ã€‚</li>
</ul>
<p>äº‹å®ä¸Šé™¤äº†è¿™ä¸‰ç§RAGèŒƒå¼ï¼Œè¿˜æœ‰å…¶ä»–æ›´å¤šçš„èŒƒå¼ï¼Œå…·ä½“å¯å‚è€ƒï¼šä¸€ç¯‡ææ˜ç™½RAGçš„å‡ ç§ä¸åŒç±»å‹[7]ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/24d6fd434ed1452292cb21288ddc03f2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766980534&amp;x-signature=kw0lmJ67SN4UMcM5XpSErMAffnU%3D" alt="" loading="lazy"/></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2312.10997v5" target="_blank" title="https://arxiv.org/abs/2312.10997v5" ref="nofollow noopener noreferrer">arxiv.org/abs/2312.10â€¦</a></p>
<p>æ€»ä¹‹ï¼ŒRAGæŠ€æœ¯åŠå…¶æ„æˆä½“ç³»å…·æœ‰è¾ƒå¼ºçš„å¤æ‚æ€§ï¼Œæ¶µç›–çŸ¥è¯†è·å–ã€æ•°æ®é¢„å¤„ç†ã€ç´¢å¼•æ„å»ºã€æ£€ç´¢ç­–ç•¥ä¼˜åŒ–ã€ç”Ÿæˆæ¨¡å‹è°ƒä¼˜ç­‰å¤šä¸ªç¯èŠ‚ã€‚å¯¹äºåº”ç”¨å±‚é¢è€…è€Œè¨€ï¼Œä¼˜å…ˆèšç„¦äºæ£€ç´¢æ¨¡å—çš„ç²¾å‡†æ€§æå‡ï¼ˆå¦‚å‘é‡æ•°æ®åº“é€‰å‹ã€ç›¸ä¼¼åº¦ç®—æ³•ä¼˜åŒ–ï¼‰ä¸ç”Ÿæˆæ¨¡å—çš„è¯­ä¹‰è¿è´¯æ€§æ„å»ºï¼ˆå¦‚æç¤ºè¯å·¥ç¨‹ã€å¤§æ¨¡å‹é€‚é…ï¼‰è¿™ä¸¤å¤§æ ¸å¿ƒåŸºç¡€ï¼Œæ˜¯å¿«é€ŸæŒæ¡æŠ€æœ¯åº”ç”¨é€»è¾‘çš„æœ‰æ•ˆè·¯å¾„ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b2418a5255a147f3925c93f76c72681c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766980534&amp;x-signature=JNNu3Iv1mUIirQ2wKA3liqFRmMQ%3D" alt="" loading="lazy"/></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2312.10997v5" target="_blank" title="https://arxiv.org/abs/2312.10997v5" ref="nofollow noopener noreferrer">arxiv.org/abs/2312.10â€¦</a></p>
<h3 data-id="heading-8">2.2 RAGæŠ€æœ¯å…¸å‹é—®é¢˜ä¸ä¼˜åŒ–æ–¹æ¡ˆ</h3>
<h4 data-id="heading-9">2.2.1 RAGæŠ€æœ¯å¸¸è§é—®é¢˜åŠè§£å†³åŠæ³•</h4>
<p>æœ¬èŠ‚ä¸»è¦ä»‹ç»RAGæŠ€æœ¯çš„å¸¸è§é—®é¢˜åŠç›¸åº”è§£å†³åŠæ³•ï¼Œæ›´è¯¦ç»†çš„å†…å®¹å¯å‚è€ƒæ–‡ç« Traditional RAG vs. HyDE[8]ã€‚</p>
<ol start="0">
<li>é—®é¢˜ä¸ç­”æ¡ˆè¯­ä¹‰ä¸åŒ¹é…</li>
</ol>
<p>æ£€ç´¢åˆ°çš„æ–‡æ¡£å¯èƒ½ä¸é—®é¢˜æ— å…³ï¼Œç”šè‡³æ— å…³æ–‡æ¡£çš„ä½™å¼¦ç›¸ä¼¼åº¦å¯èƒ½é«˜äºå«ç­”æ¡ˆçš„æ–‡æ¡£ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8593413ba0a545188e6da035d0dbcf8a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766980534&amp;x-signature=9AKfhqbFX2VDZUN1jezEEW5yrzc%3D" alt="" loading="lazy"/></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.dailydoseofds.com%2Fp%2Ftraditional-rag-vs-hyde" target="_blank" title="https://blog.dailydoseofds.com/p/traditional-rag-vs-hyde" ref="nofollow noopener noreferrer">blog.dailydoseofds.com/p/traditionâ€¦</a></p>
<p>ä¸€ç§ä¼˜åŒ–æ–¹æ¡ˆä¸ºï¼šå…ˆç”¨LLMé’ˆå¯¹é—®é¢˜ç”Ÿæˆå‡è®¾ç­”æ¡ˆï¼Œå¼¥è¡¥è¡¨è¿°æ¨¡ç³Šä»¥æ˜ç¡®è¯­ä¹‰æŒ‡å‘ï¼›å†å°†é—®é¢˜ä¸å‡è®¾ç­”æ¡ˆè½¬åŒ–ä¸ºæ–‡æœ¬å‘é‡ï¼Œé€šè¿‡å‘é‡æ‹¼æ¥æˆ–åŠ æƒæ±‚å’Œç­‰æ–¹å¼ï¼›æœ€åç”¨è¯¥æ–‡æœ¬å‘é‡æŸ¥è¯¢å‘é‡æ•°æ®åº“ï¼Œæå‡åŒ¹é…ç²¾åº¦ã€‚</p>
<p>ä¾‹å¦‚ï¼Œå¯¹äºé—®é¢˜â€œéœ€è¦é€‚åˆæ–°æ‰‹ï¼Œè€ƒè™‘å­¦ä¹ éš¾åº¦ä½ï¼Œå…¥é—¨æˆæœ¬é€‚ä¸­ï¼Œä¾¿äºæºå¸¦çš„å…¥é—¨ä¹å™¨â€ï¼ŒLLMå¯ç”Ÿæˆå‡è®¾ç­”æ¡ˆä»¥æ˜ç¡®æŒ‡å‘ï¼›å†ç»“åˆè¯¥é—®é¢˜ä¸å‡è®¾ç­”æ¡ˆçš„è¯­ä¹‰å‘é‡æŸ¥è¯¢æ•°æ®åº“ï¼Œå°±èƒ½ç²¾å‡†åŒ¹é…åˆ°â€œå°¤å…‹é‡Œé‡Œå­¦ä¹ éš¾åº¦ä½ï¼Œå…¥é—¨æˆæœ¬ä½ï¼Œä½“ç§¯å°ä¾¿äºæºå¸¦ï¼Œé€‚åˆæ–°æ‰‹å…¥é—¨â€è¿™ç±»ç»“æœã€‚</p>
<p>éœ€æ³¨æ„è¿™ç§æ–¹æ³•åªèƒ½åœ¨ä¸€å®šç¨‹åº¦ä¸Šå‡è½»é—®é¢˜å½±å“ï¼Œæ— æ³•å®Œå…¨æ¶ˆé™¤é—®é¢˜æœ¬èº«çš„å±€é™æ€§ã€‚</p>
<ol start="2">
<li>è¯­ä¹‰ç›¸ä¼¼æ€§å¯èƒ½è¢«å¼±åŒ–</li>
</ol>
<p>éƒ¨åˆ†å«é‡è¦ä¿¡æ¯çš„é•¿æ–‡æœ¬å¸¸å¤¹æ‚èƒŒæ™¯æè¿°ã€ç»†èŠ‚è¡¥å……ç­‰æ— å…³å†…å®¹ï¼Œä¼šç¨€é‡Šæ ¸å¿ƒä¿¡æ¯ã€‚å¦‚åŒç³–æ°´åŠ æ°´åå‘³é“å˜æ·¡ï¼Œå¯¼è‡´RAGè®¡ç®—è¯­ä¹‰ç›¸ä¼¼åº¦æ—¶ï¼Œä¸æœç´¢å†…å®¹çš„åŒ¹é…åº¦ä¸‹é™ã€‚åè§‚çŸ­æ–‡æœ¬ï¼Œå³ä¾¿å†…å®¹ä¸é‡è¦ï¼Œè‹¥å«å°‘é‡ç›¸å…³è¯ï¼Œå› å¹²æ‰°å°‘ä¸”ç›¸å…³è¯é›†ä¸­ï¼Œä¸æœç´¢å†…å®¹çš„ç›¸ä¼¼åº¦åè€Œæ›´é«˜ã€‚æœ€ç»ˆå¯èƒ½å¯¼è‡´ç³»ç»Ÿè¾“å‡ºæ— å…³ä¿¡æ¯æˆ–é—æ¼å…³é”®ä¿¡æ¯ï¼Œå½±å“æ•´ä½“æ•ˆæœã€‚</p>
<p>é‡‡ç”¨æ–‡æœ¬æ‘˜è¦æˆ–å…³é”®å¥æŠ½å–æŠ€æœ¯é¢„å¤„ç†é•¿æ–‡æ¡£ï¼ŒåŒæ­¥è¿›è¡Œç²¾å‡†åˆ†æ®µã€å†—ä½™æ¸…æ´—ä¸æ ¸å¿ƒå†…å®¹æå–ï¼Œä»…å°†æµ“ç¼©åçš„æ ¸å¿ƒä¿¡æ¯å­˜å…¥è¯­ä¹‰å‘é‡åº“ï¼Œå†ç»“åˆä¼˜åŒ–çš„æ£€ç´¢ç­–ç•¥ç²¾å‡†åŒ¹é…ç›¸å…³ç‰‡æ®µï¼Œæ˜¯åº”å¯¹è¯¥é—®é¢˜çš„æœ‰æ•ˆæ–¹æ³•ã€‚</p>
<ol start="3">
<li>æ£€ç´¢æ–‡æ¡£çš„å…³æ³¨åå·®</li>
</ol>
<p>åŸºäºç›¸ä¼¼æ€§æœç´¢ä»æ•°æ®åº“æ£€ç´¢æ–‡æ¡£æ—¶ï¼Œé€šå¸¸æŒ‰ç›¸ä¼¼æ€§åº¦é‡æ’åºï¼Œä½†LLMåŸºäºè¿™äº›æ–‡æ¡£ç”Ÿæˆå›ç­”æ—¶ï¼Œè™½èƒ½é€šè¿‡ä½ç½®ç¼–ç æ˜ç¡®æ„ŸçŸ¥è¾“å…¥é¡ºåºï¼Œå…¶å…³æ³¨é‡ç‚¹å´ä¸éµå¾ªäººç±»â€œå‰åºä¼˜å…ˆâ€çš„ä¸»è§‚å€¾å‘ï¼Œè€Œæ˜¯ç”±æ³¨æ„åŠ›æœºåˆ¶ä¸ä¸Šä¸‹æ–‡é•¿åº¦å…±åŒå†³å®šï¼ŒçŸ­ä¸Šä¸‹æ–‡æ—¶å¤„ç†æ›´å‡åŒ€ï¼Œé•¿ä¸Šä¸‹æ–‡åˆ™å› â€œæ³¨æ„åŠ›ç¨€é‡Šâ€æ›´å…³æ³¨é¦–å°¾æ–‡æ¡£ã€‚è‹¥é«˜ç›¸ä¼¼æ–‡æ¡£å› ä½ç½®é åè¢«å¿½ç•¥ï¼Œä¼šé€ æˆâ€œæ£€ç´¢ä¼˜è´¨ä½†åˆ©ç”¨ä½æ•ˆâ€ï¼Œæœ€ç»ˆé™ä½å›ç­”è´¨é‡ã€‚</p>
<p>ä¾‹å¦‚é—®â€œç¼“è§£é¢ˆæ¤ç—›çš„å¥½åŠæ³•â€ï¼Œæ•°æ®åº“æ£€ç´¢å‡º6ç¯‡æ–‡æ¡£ï¼ŒæŒ‰ç›¸ä¼¼æ€§ä»é«˜åˆ°ä½æ’åºï¼Œç¬¬4ç¯‡æœ€ç›¸å…³ï¼Œå†™äº†å…·ä½“çš„ç©´ä½æŒ‰æ‘©æ³•ï¼Œç¬¬1ç¯‡åªè¯´â€œåˆ«ä¹…åâ€ã€‚LLMå¤„ç†è¿™6ç¯‡é•¿ä¸Šä¸‹æ–‡æ—¶ï¼Œæ³¨æ„åŠ›ç¨€é‡Šï¼Œä¸»è¦å…³æ³¨é¦–å°¾ï¼Œæœªå¤ªå…³æ³¨ç¬¬4ç¯‡ï¼Œæœ€ç»ˆå›ç­”åªæâ€œåˆ«ä¹…åâ€ï¼Œé—æ¼äº†æœ€æœ‰æ•ˆçš„ç©´ä½æŒ‰æ‘©æ³•ã€‚æ˜æ˜æ£€ç´¢åˆ°äº†ä¼˜è´¨ä¿¡æ¯å´æ²¡ç”¨å¥½ï¼Œå›ç­”è‡ªç„¶ä¸å¤Ÿå¥½ã€‚</p>
<p>åº”å¯¹æ–¹æ¡ˆå¯é‡‡ç”¨â€œå…³é”®æ–‡æ¡£é¦–å°¾åŒæ›å…‰â€ç­–ç•¥ï¼šå°†æ£€ç´¢ç»“æœä¸­æœ€ç›¸å…³çš„æ–‡æ¡£äº¤æ›¿ç½®äºè¾“å…¥åºåˆ—çš„å¤´éƒ¨å’Œå°¾éƒ¨ï¼Œå¦‚å¤åˆ¶æœ€å…³é”®çš„1-3ç¯‡æ–‡æ¡£åˆ°é¦–å°¾ä½ç½®ï¼›åˆ©ç”¨LLMåœ¨é•¿ä¸Šä¸‹æ–‡ä¸­å¤©ç„¶å…³æ³¨é¦–å°¾çš„â€œæ³¨æ„åŠ›é”šç‚¹æ•ˆåº”â€ï¼Œé¦–å°¾ä¿¡æ¯ç¨€é‡Šåº¦æœ€ä½ï¼›ç¡®ä¿é«˜ä»·å€¼å†…å®¹ä¸è¢«ä¸­é—´ä½ç½®æ·¹æ²¡ï¼ŒåŒæ—¶è¾…ä»¥æ–‡æ¡£å†…å®¹æµ“ç¼©ï¼Œé€šè¿‡æ‘˜è¦å‹ç¼©æ–‡æœ¬å‡å°‘å†—ä½™å¹²æ‰°ï¼Œä»¥åŠæ˜¾å¼æŒ‡ä»¤å¼•å¯¼ï¼Œåœ¨è¾“å…¥ä¸­æ ‡æ³¨â€œè¯·é‡ç‚¹å‚è€ƒä»¥ä¸‹é«˜ç›¸å…³æ–‡æ¡£â€ã€‚ä¸‰é‡æªæ–½ååŒçªç ´æ³¨æ„åŠ›ç¨€é‡Šç“¶é¢ˆï¼Œæ˜¾è‘—æå‡ä¼˜è´¨æ£€ç´¢ç»“æœçš„åˆ©ç”¨ç‡ã€‚</p>
<ol start="4">
<li>éœ€é¿å…è¯¢é—®éœ€æ•´åˆå…¨å±€ä¿¡æ¯çš„é—®é¢˜</li>
</ol>
<p>ä½¿ç”¨RAGç³»ç»Ÿæ—¶ï¼Œéœ€é¿å…éœ€è¦å…¨å±€ä¿¡æ¯æ±‡æ€»çš„é—®é¢˜ï¼Œè¿™ç±»é—®é¢˜éœ€æ•´åˆå¤§é‡åˆ†æ•£æ•°æ®ï¼Œè€ŒRAGç³»ç»Ÿä¾èµ–çš„ç›¸ä¼¼æ€§æœç´¢é€šå¸¸åªèƒ½å®šä½å°‘æ•°æœ€ç›¸å…³æ–‡æ¡£ï¼Œéš¾ä»¥è¦†ç›–å…¨éƒ¨å¿…è¦ä¿¡æ¯æºï¼Œå¯¼è‡´ç­”æ¡ˆå¸¸å‡ºé”™ã€‚è‹¥ç­”æ¡ˆé›†ä¸­åœ¨ä¸€ä¸¤ä»½æ–‡æ¡£ä¸­ï¼Œç›¸ä¼¼æ€§æœç´¢ç²¾å‡†é«˜æ•ˆï¼ŒRAGç³»ç»Ÿè¡¨ç°è‰¯å¥½ï¼Œä½†è‹¥ç­”æ¡ˆéœ€éå†æ‰€æœ‰æ–‡æ¡£ã€èšåˆåˆ†æ•£ä¿¡æ¯ï¼Œç›¸ä¼¼æ€§æœç´¢åˆ™åŠ›ä¸ä»å¿ƒã€‚æœ¬è´¨ä¸Šï¼ŒRAGç³»ç»Ÿæ˜¯æ£€ç´¢å¢å¼ºå·¥å…·ï¼Œè€Œéå…¨å±€æ•°æ®èšåˆå™¨ï¼Œå¤„ç†è·¨æ–‡æ¡£æ±‡æ€»å’Œç»Ÿè®¡ç±»é—®é¢˜æ—¶å­˜åœ¨å¤©ç„¶å±€é™ã€‚</p>
<p>åœ¨RAGç³»ç»Ÿä¸­ç¼“è§£å…¨å±€æ±‡æ€»é—®é¢˜ï¼Œæ ¸å¿ƒæ˜¯ç»“åˆæ··åˆæ£€ç´¢å‘é‡+å…³é”®è¯æå‡è¦†ç›–åº¦ï¼Œå¹¶é€šè¿‡æŸ¥è¯¢åˆ†è§£è®©RAGç³»ç»Ÿåˆ†æ­¥å¤„ç†å­é—®é¢˜ï¼Œæœ€åèšåˆç»“æœã€‚è‹¥éœ€å¼ºç»Ÿè®¡èƒ½åŠ›ï¼Œéœ€æ•´åˆä¼ ç»Ÿæ•°æ®åº“æ‰§è¡Œèšåˆè®¡ç®—ã€‚</p>
<h4 data-id="heading-10">2.2.2 RAGç³»ç»Ÿå›ºæœ‰æŒ‘æˆ˜</h4>
<p>é™¤ä¸Šè¿°é—®é¢˜å¤–ï¼ŒRAGç³»ç»Ÿè¿˜å­˜åœ¨ä»¥ä¸‹å›ºæœ‰æŒ‘æˆ˜ï¼š</p>
<ol start="0">
<li>æ£€ç´¢æ•ˆç‡ä¸å»¶è¿Ÿé—®é¢˜ï¼šé¢å¯¹ç™¾ä¸‡çº§æ–‡æ¡£ç­‰å¤§è§„æ¨¡çŸ¥è¯†åº“æ—¶ï¼Œæ£€ç´¢æ˜“äº§ç”Ÿé«˜å»¶è¿Ÿï¼Œéš¾ä»¥æ»¡è¶³å®æ—¶äº¤äº’éœ€æ±‚ã€‚</li>
<li>å¯¹çŸ¥è¯†åº“è´¨é‡çš„é«˜åº¦ä¾èµ–ï¼šç”Ÿæˆç»“æœç›´æ¥å—æ£€ç´¢å†…å®¹å½±å“ã€‚è‹¥çŸ¥è¯†åº“å­˜åœ¨æ•°æ®è¿‡æ—¶ã€ä¿¡æ¯ä¸å®Œæ•´æˆ–åŒ…å«å™ªå£°ç­‰é—®é¢˜ï¼Œä¼šå¯¼è‡´è¾“å‡ºé”™è¯¯ï¼›åŒæ—¶ï¼Œåœ¨å°ä¼—é¢†åŸŸç­‰æœªè¦†ç›–åœºæ™¯ä¸­ï¼Œå…¶é¢†åŸŸé€‚åº”æ€§è¾ƒå·®ã€‚</li>
<li>ä¸Šä¸‹æ–‡çª—å£é™åˆ¶ï¼šå—ç”Ÿæˆæ¨¡å‹ä¸Šä¸‹æ–‡çª—å£å®¹é‡æ‰€é™ï¼Œæ£€ç´¢åˆ°çš„é•¿æ–‡æ¡£å¯èƒ½è¢«æˆªæ–­ï¼Œé€ æˆå…³é”®ä¿¡æ¯ä¸¢å¤±ã€‚</li>
<li>ç”Ÿæˆä¸æ£€ç´¢çš„ååŒé—®é¢˜ï¼š</li>
</ol>
<ul>
<li>æ¨¡å‹å¯èƒ½å¿½ç•¥æ£€ç´¢ç»“æœï¼Œä»…ä¾èµ–è‡ªèº«å‚æ•°ç”Ÿæˆé”™è¯¯ä¿¡æ¯ï¼ˆå³"æ£€ç´¢æ— ç”¨"ï¼‰ï¼›</li>
<li>æˆ–è¿‡åº¦ä¾èµ–æ£€ç´¢å†…å®¹ï¼Œæœºæ¢°å¤åˆ¶ç‰‡æ®µè€Œç¼ºä¹é€»è¾‘æ•´åˆã€‚</li>
</ul>
<ol start="5">
<li>è¯„ä¼°ä½“ç³»ç¼ºå¤±ï¼šç›®å‰ç¼ºä¹ç»Ÿä¸€çš„é‡åŒ–æŒ‡æ ‡æ¥è¯„ä¼°æ£€ç´¢ä¸ç”Ÿæˆçš„ååŒæ•ˆæœï¼Œäººå·¥è¯„ä¼°æˆæœ¬é«˜ä¸”éš¾ä»¥æ ‡å‡†åŒ–ï¼Œé˜»ç¢äº†æ¨¡å‹è¿­ä»£ä¼˜åŒ–ã€‚</li>
</ol>
<p>RAGçš„è¿™äº›å›ºæœ‰æŒ‘æˆ˜ï¼Œæºäºæ£€ç´¢ä¸ç”Ÿæˆè¿™ä¸¤ä¸ªå¤æ‚ç³»ç»Ÿçš„è€¦åˆï¼Œå…¶ä¸­æ¶‰åŠç®—æ³•ã€æ•°æ®åŠå·¥ç¨‹ç­‰å¤šæ–¹é¢çš„æƒè¡¡ã€‚ç”±äºç›®å‰è¿™äº›æŒ‘æˆ˜å°šæ— æ³•å®Œå…¨è§£å†³ï¼Œå› æ­¤åœ¨ä½¿ç”¨RAGæŠ€æœ¯æ—¶éœ€è¦åŠ ä»¥è€ƒé‡ã€‚å…³äºè¿™äº›å›ºæœ‰æŒ‘æˆ˜çš„è¯¦ç»†ä»‹ç»ï¼Œå¯å‚è€ƒè®ºæ–‡ï¼šSeven Failure Points When Engineering a Retrieval Augmented Generation System[9]ã€‚</p>
<h4 data-id="heading-11">2.2.3 RAGæŠ€æœ¯ä¸æ¨¡å‹æŒ‡ä»¤å¾®è°ƒçš„å¯¹æ¯”</h4>
<p>åœ¨æ„å»ºLLMåº”ç”¨æ—¶ï¼Œé™¤äº†RAGæŠ€æœ¯ï¼Œæ¨¡å‹æŒ‡ä»¤å¾®è°ƒä¹Ÿæ˜¯ä¸€ç§è¢«å¹¿æ³›é‡‡ç”¨çš„æŠ€æœ¯è·¯å¾„ã€‚å…³äºè¿™ä¸¤ç§æŠ€æœ¯çš„è¯¦ç»†å¯¹æ¯”ï¼Œå¯ä»¥å‚è€ƒæ–‡ç« Full-model Fine-tuning vs. LoRA vs. RAG[10]ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8b02cfa8628146ecbc37abcc6521348e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766980534&amp;x-signature=k8ucCA0f85WWN4s2VmBF7o9n8ZU%3D" alt="" loading="lazy"/></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.dailydoseofds.com%2Fp%2Ffull-model-fine-tuning-vs-lora-vs" target="_blank" title="https://blog.dailydoseofds.com/p/full-model-fine-tuning-vs-lora-vs" ref="nofollow noopener noreferrer">blog.dailydoseofds.com/p/full-modeâ€¦</a></p>
<p>å¯¹æ¯”å†…å®¹æ¦‚è§ˆå¦‚ä¸‹ï¼š</p>
<ol start="0">
<li>åŸºç¡€æœºåˆ¶ä¸æ•°æ®éœ€æ±‚</li>
</ol>
<ul>
<li>RAG ï¼šé€šè¿‡æ£€ç´¢å¤–éƒ¨çŸ¥è¯†åº“ï¼ˆæ–‡æ¡£ã€æ•°æ®åº“ç­‰ï¼‰è·å–ä¿¡æ¯ï¼Œç»“åˆç”Ÿæˆæ¨¡å‹è¾“å‡ºç­”æ¡ˆï¼›æ— éœ€ä¿®æ”¹æ¨¡å‹å‚æ•°ï¼Œä¾èµ–çŸ¥è¯†åº“è´¨é‡ï¼Œæ— éœ€æ ‡æ³¨è®­ç»ƒæ•°æ®ã€‚</li>
<li>æŒ‡ä»¤å¾®è°ƒ ï¼šåœ¨ç‰¹å®šæ ‡æ³¨æ•°æ®é›†ä¸Šè°ƒæ•´é¢„è®­ç»ƒæ¨¡å‹å‚æ•°ï¼Œé€‚é…ç‰¹å®šä»»åŠ¡/é¢†åŸŸï¼›éœ€é«˜è´¨é‡æ ‡æ³¨æ•°æ®ï¼Œç›´æ¥ä¿®æ”¹æ¨¡å‹å‚æ•°ã€‚</li>
</ul>
<ol start="2">
<li>æ›´æ–°æœºåˆ¶ä¸æˆæœ¬</li>
</ol>
<ul>
<li>RAG ï¼šæ”¯æŒå®æ—¶æ›´æ–°çŸ¥è¯†åº“ï¼Œæ¨¡å‹æ— éœ€é‡æ–°è®­ç»ƒï¼›ä»…æ¶‰åŠæ£€ç´¢+ç”Ÿæˆï¼Œæ¨ç†æˆæœ¬ä½ã€‚</li>
<li>æŒ‡ä»¤å¾®è°ƒ ï¼šçŸ¥è¯†æ›´æ–°éœ€é‡æ–°å¾®è°ƒæˆ–å¢é‡è®­ç»ƒï¼Œæˆæœ¬é«˜ï¼ˆä¾èµ–GPUèµ„æºï¼‰ï¼›æ— æ£€ç´¢æ­¥éª¤ï¼Œæ¨ç†é€Ÿåº¦å¿«ã€‚</li>
</ul>
<ol start="3">
<li>ä¼˜åŠ¿ä¸å±€é™</li>
</ol>
<ul>
<li>RAG ï¼š âœ… ä¼˜åŠ¿ï¼šçµæ´»é€‚åº”æ–°çŸ¥è¯†ã€é™ä½å¹»è§‰é£é™©ï¼ˆä¾èµ–æƒå¨æ•°æ®æºï¼‰ã€æ— éœ€è®­ç»ƒæ•°æ®ã€‚ âŒ å±€é™ï¼šæ£€ç´¢å»¶è¿Ÿå¯èƒ½å½±å“å“åº”é€Ÿåº¦ã€ä¾èµ–çŸ¥è¯†åº“è´¨é‡ã€ç”Ÿæˆé€»è¾‘å—é™äºæ£€ç´¢ç‰‡æ®µã€‚</li>
<li>æŒ‡ä»¤å¾®è°ƒ ï¼š âœ… ä¼˜åŠ¿ï¼šè¾“å‡ºé£æ ¼å¯æ§ã€é¢†åŸŸå†…ä»»åŠ¡æ€§èƒ½æ›´ä¼˜ã€æ¨ç†é€Ÿåº¦å¿«ï¼ˆæ— æ£€ç´¢æ­¥éª¤ï¼‰ã€‚ âŒ å±€é™ï¼šæ•°æ®ä¸è¶³æ—¶æ˜“è¿‡æ‹Ÿåˆã€çŸ¥è¯†æ›´æ–°éœ€é‡æ–°è®­ç»ƒã€å¯èƒ½äº§ç”Ÿäº‹å®æ€§å¹»è§‰ã€‚</li>
</ul>
<ol start="4">
<li>é€‚ç”¨åœºæ™¯ä¸å…¸å‹åº”ç”¨</li>
</ol>
<ul>
<li>RAG ï¼šé€‚ç”¨äºçŸ¥è¯†å¯†é›†å‹ä»»åŠ¡ï¼ˆéœ€åŠ¨æ€/é¢†åŸŸå¤–çŸ¥è¯†ï¼‰ï¼Œå¦‚å¼€æ”¾åŸŸé—®ç­”ã€åŒ»ç–—å’¨è¯¢ã€äº§å“æ–‡æ¡£å®¢æœã€‚</li>
<li>æŒ‡ä»¤å¾®è°ƒ ï¼šé€‚ç”¨äºéœ€ç‰¹å®šè¾“å‡ºé£æ ¼æˆ–é¢†åŸŸä¸“ç²¾çš„ä»»åŠ¡ï¼Œå¦‚ä»£ç ç”Ÿæˆã€æƒ…æ„Ÿåˆ†æã€æ³•å¾‹æ–‡æœ¬ç”Ÿæˆã€ä¸“ä¸šæœ¯è¯­ç¿»è¯‘ã€‚</li>
</ul>
<ol start="5">
<li>æŠ€æœ¯ä»£è¡¨</li>
</ol>
<ul>
<li>RAG ï¼šFAISS + GPTã€DPR + BART</li>
<li>æŒ‡ä»¤å¾®è°ƒ ï¼šLoRAã€Adapterã€å…¨å‚æ•°å¾®è°ƒ</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/be2f31b2a22240e4a4d71fa4db126a1e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766980534&amp;x-signature=2xAWqOTCfkbGwfrx%2B8DV%2BmAqzgs%3D" alt="" loading="lazy"/></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2312.10997v5" target="_blank" title="https://arxiv.org/abs/2312.10997v5" ref="nofollow noopener noreferrer">arxiv.org/abs/2312.10â€¦</a></p>
<h2 data-id="heading-12">3 å®æˆ˜</h2>
<h3 data-id="heading-13">3.1 RAGç³»ç»Ÿç¤ºä¾‹ä»£ç </h3>
<p>æœ¬æ–‡ç¬¬ä¸€ç« å·²è¯¦ç»†é˜è¿°äº†RAGç³»ç»Ÿçš„åŸºæœ¬å·¥ä½œæµç¨‹ï¼Œå…¶æ ¸å¿ƒç¯èŠ‚æ¶µç›–ï¼šæ–‡æœ¬åˆ†æ®µã€æ–‡æœ¬ç‰‡æ®µå‘é‡åŒ–ã€å‘é‡å­˜å‚¨ä¸çŸ¥è¯†åº“æ„å»ºã€ç”¨æˆ·æŸ¥è¯¢å‘é‡åŒ–ã€ç›¸ä¼¼ç‰‡æ®µæ£€ç´¢ã€æ–‡æœ¬ç‰‡æ®µé‡æ’åºä»¥åŠç”Ÿæˆå›ç­”ã€‚ ä¸ºäº†æ›´å¥½åœ°è§£é‡ŠRAGæ¨¡å‹çš„åŸç†å’Œå®ç°ï¼Œæœ¬ç« å°†æä¾›å®Œæ•´çš„ç¤ºä¾‹ä»£ç ï¼Œç³»ç»Ÿæ€§åœ°æ¼”ç¤ºå¦‚ä½•å®ç°ä¸Šè¿°å„ä¸ªç¯èŠ‚ï¼Œä»è€Œæ„å»ºä¸€ä¸ªå¯è¿è¡Œçš„æœ€å°åŒ–RAGåº”ç”¨ç³»ç»Ÿã€‚è¯¥éƒ¨åˆ†å†…å®¹å‚è€ƒè‡ªï¼šHappy-LLM[11]ã€‚</p>
<p>ä¸‹é¢å°†ä»‹ç»è¯¥ç¤ºä¾‹å„éƒ¨åˆ†ä»£ç ã€‚æ‰€æœ‰ä»£ç éœ€æ”¾åœ¨åŒä¸€æ–‡ä»¶å¤¹ä¸­ï¼Œ<strong>æœ€åä¸€ä¸ªæ¨¡å—ï¼Œå³ç”Ÿæˆå›ç­”çš„ä»£ç ä¸ºè¿è¡Œå…¥å£ã€‚è¯·æ³¨æ„ï¼Œä»£ç ä¸­ä½¿ç”¨çš„å‡ä¸ºåŸºç¡€ç‰ˆæ¨¡å‹</strong>ã€‚</p>
<p>è‹¥å›ç­”æ•ˆæœæ¬ ä½³ï¼Œå¯èƒ½æºäºå¤šæ–¹é¢å› ç´ ï¼šæ–‡æ¡£åˆ†å—ä¸åˆç†ã€å‘é‡æå–æ¨¡å‹å¯¹é¢†åŸŸè¯­ä¹‰æ•æ‰ä¸è¶³ã€æ£€ç´¢ç­–ç•¥æœªè¿”å›æœ€ç›¸å…³ä¸Šä¸‹æ–‡ã€å¤§è¯­è¨€æ¨¡å‹å¯¹æ£€ç´¢å†…å®¹åˆ©ç”¨ä¸å……åˆ†ï¼Œæˆ–æµ‹è¯•æ–‡ä»¶ä¸é—®é¢˜ç›¸å…³æ€§ä½ã€å¯¹è¯å†å²ç´¯ç§¯é€ æˆå¹²æ‰°ç­‰ã€‚è¿™äº›ç¯èŠ‚éƒ½ä¼šå½±å“æœ€ç»ˆå›ç­”çš„å‡†ç¡®æ€§å’Œé’ˆå¯¹æ€§ã€‚å®é™…æ­å»ºRAGç³»ç»Ÿå¯å‚è€ƒæœ¬æ–‡3.2èŠ‚å†…å®¹</p>
<p><strong>0. ç”Ÿæˆç¤ºä¾‹æ•°æ®</strong></p>
<p>è¿™æ®µä»£ç æ–‡ä»¶æ˜¯ä¸€ä¸ªç”¨äºç”ŸæˆRAGç³»ç»Ÿæµ‹è¯•æ–‡ä»¶çš„Pythonè„šæœ¬ï¼Œä¸»è¦åŠŸèƒ½æ˜¯åˆ›å»ºå‡ ä¸ªåŒ…å«ç‰¹å®šå†…å®¹çš„æ–‡æœ¬æ–‡ä»¶ï¼Œæ³¨æ„è¾“å‡ºæ–‡ä»¶éƒ½ä¸ºtxtæ ¼å¼ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># Generate.py  </span>
<span class="hljs-keyword">import</span>Â os  
  
defgenerate_rag_test_files(folder_name:<span class="hljs-built_in">str</span> =<span class="hljs-string">"rag_test_files"</span>):  
<span class="hljs-string">"""ç”ŸæˆRAGæµ‹è¯•æ–‡ä»¶å¹¶ä¿å­˜åˆ°æŒ‡å®šæ–‡ä»¶å¤¹"""</span>  
<span class="hljs-comment"># åˆ›å»ºå­˜æ”¾æ–‡ä»¶çš„æ–‡ä»¶å¤¹  </span>
ifnotÂ os.path.exists(folder_name):  
Â  Â  Â  Â  os.makedirs(folder_name)  
  
<span class="hljs-comment"># å®šä¹‰æ–‡ä»¶å†…å®¹  </span>
Â  Â  planets_content =Â <span class="hljs-string">"""å¤ªé˜³ç³»è¡Œæ˜ŸåŸºç¡€çŸ¥è¯†  
  
1. æ°´æ˜Ÿï¼ˆMercuryï¼‰  
- ä½ç½®ï¼šè·ç¦»å¤ªé˜³æœ€è¿‘çš„è¡Œæ˜Ÿï¼ˆçº¦0.39å¤©æ–‡å•ä½ï¼‰  
- ç‰¹å¾ï¼šè¡¨é¢å¸ƒæ»¡é™¨çŸ³å‘ï¼Œæ²¡æœ‰å¤§æ°”å±‚ä¿æŠ¤ï¼Œæ˜¼å¤œæ¸©å·®æå¤§ï¼ˆç™½å¤©çº¦430â„ƒï¼Œå¤œæ™šçº¦-180â„ƒï¼‰  
- è‡ªè½¬å‘¨æœŸï¼š58.6åœ°çƒæ—¥ï¼Œå…¬è½¬å‘¨æœŸï¼š88åœ°çƒæ—¥  
  
2. é‡‘æ˜Ÿï¼ˆVenusï¼‰  
- ä½ç½®ï¼šè·ç¦»å¤ªé˜³ç¬¬äºŒè¿‘ï¼ˆçº¦0.72å¤©æ–‡å•ä½ï¼‰  
- ç‰¹å¾ï¼šè¢«æµ“å¯†çš„äºŒæ°§åŒ–ç¢³å¤§æ°”å±‚è¦†ç›–ï¼Œäº§ç”Ÿå¼ºçƒˆæ¸©å®¤æ•ˆåº”ï¼Œè¡¨é¢æ¸©åº¦çº¦467â„ƒï¼ˆå¤ªé˜³ç³»ä¸­æœ€çƒ­çš„è¡Œæ˜Ÿï¼‰  
- ç‰¹æ®Šç‚¹ï¼šè‡ªè½¬æ–¹å‘ä¸å…¶ä»–è¡Œæ˜Ÿç›¸åï¼ˆè‡ªä¸œå‘è¥¿ï¼‰ï¼Œè‡ªè½¬å‘¨æœŸ243åœ°çƒæ—¥ï¼Œå…¬è½¬å‘¨æœŸ225åœ°çƒæ—¥  
  
3. åœ°çƒï¼ˆEarthï¼‰  
- ä½ç½®ï¼šè·ç¦»å¤ªé˜³ç¬¬ä¸‰è¿‘ï¼ˆçº¦1å¤©æ–‡å•ä½ï¼‰  
- å”¯ä¸€å·²çŸ¥å­˜åœ¨æ¶²æ€æ°´å’Œç”Ÿå‘½çš„è¡Œæ˜Ÿï¼Œå¤§æ°”å±‚ä»¥æ°®å’Œæ°§ä¸ºä¸»  
- è‡ªè½¬å‘¨æœŸ23å°æ—¶56åˆ†ï¼Œå…¬è½¬å‘¨æœŸ365.24å¤©  
  
4. ç«æ˜Ÿï¼ˆMarsï¼‰  
- ä½ç½®ï¼šè·ç¦»å¤ªé˜³ç¬¬å››è¿‘ï¼ˆçº¦1.52å¤©æ–‡å•ä½ï¼‰  
- ç‰¹å¾ï¼šè¡¨é¢å‘ˆçº¢è‰²ï¼ˆå› å¯Œå«æ°§åŒ–é“ï¼‰ï¼Œæœ‰ç¨€è–„çš„äºŒæ°§åŒ–ç¢³å¤§æ°”å±‚ï¼Œå­˜åœ¨æåœ°å†°ç›–ï¼ˆä¸»è¦æ˜¯å¹²å†°å’Œæ°´å†°ï¼‰  
- åœ°æ ‡ï¼šå¥¥æ—åŒ¹æ–¯å±±ï¼ˆå¤ªé˜³ç³»æœ€é«˜å±±å³°ï¼Œçº¦21åƒç±³ï¼‰ã€æ°´æ‰‹è°·ï¼ˆé•¿çº¦4000åƒç±³çš„å³¡è°·ï¼‰  
  
5. æœ¨æ˜Ÿï¼ˆJupiterï¼‰  
- ä½ç½®ï¼šè·ç¦»å¤ªé˜³ç¬¬äº”è¿‘ï¼ˆçº¦5.2å¤©æ–‡å•ä½ï¼‰  
- ç‰¹å¾ï¼šå¤ªé˜³ç³»ä¸­æœ€å¤§çš„è¡Œæ˜Ÿï¼ˆè´¨é‡æ˜¯å…¶ä»–æ‰€æœ‰è¡Œæ˜Ÿæ€»å’Œçš„2.5å€ï¼‰ï¼Œç”±æ°¢å’Œæ°¦ç»„æˆï¼Œè¡¨é¢æœ‰æ˜æ˜¾çš„æ¡çº¹å’Œâ€œå¤§çº¢æ–‘â€ï¼ˆæŒç»­æ•°ç™¾å¹´çš„é£æš´ï¼‰  
- å«æ˜Ÿï¼šå·²çŸ¥æœ‰95é¢—å«æ˜Ÿï¼Œå…¶ä¸­æœ€å¤§çš„4é¢—æ˜¯â€œä¼½åˆ©ç•¥å«æ˜Ÿâ€ï¼ˆæœ¨å«ä¸€è‡³æœ¨å«å››ï¼‰  
"""</span>  
  
Â  Â  purifier_content =Â <span class="hljs-string">"""å®¶ç”¨ç©ºæ°”å‡€åŒ–å™¨ï¼ˆå‹å·ï¼šCleanAir X5ï¼‰ä½¿ç”¨æŒ‡å—  
  
ä¸€ã€æ ¸å¿ƒåŠŸèƒ½  
1. å‡€åŒ–èŒƒå›´ï¼šé€‚ç”¨é¢ç§¯20-30ã¡ï¼ˆå¯†é—­ç©ºé—´ï¼‰  
2. è¿‡æ»¤ç³»ç»Ÿï¼š  
Â  Â - åˆçº§æ»¤ç½‘ï¼šæ‹¦æˆªæ¯›å‘ã€ç°å°˜ç­‰å¤§é¢—ç²’  
Â  Â - HEPAæ»¤ç½‘ï¼šè¿‡æ»¤PM2.5ã€èŠ±ç²‰ã€ç»†èŒï¼ˆæ•ˆç‡99.97%@0.3Î¼mï¼‰  
Â  Â - æ´»æ€§ç‚­æ»¤ç½‘ï¼šå¸é™„ç”²é†›ã€TVOCç­‰æœ‰å®³æ°”ä½“  
3. è¿è¡Œæ¨¡å¼ï¼š  
Â  Â - è‡ªåŠ¨æ¨¡å¼ï¼šæ ¹æ®å†…ç½®ä¼ æ„Ÿå™¨æ£€æµ‹çš„ç©ºæ°”è´¨é‡è‡ªåŠ¨è°ƒèŠ‚é£é€Ÿ  
Â  Â - ç¡çœ æ¨¡å¼ï¼šé£é€Ÿæœ€ä½ï¼Œå™ªéŸ³â‰¤30åˆ†è´ï¼Œé€‚åˆå¤œé—´ä½¿ç”¨  
  
äºŒã€æ“ä½œæ­¥éª¤  
1. é¦–æ¬¡ä½¿ç”¨ï¼š  
Â  Â - æ‹†é™¤æ»¤ç½‘å¤–å±‚çš„å¡‘æ–™åŒ…è£…ï¼ˆå¦åˆ™ä¼šå½±å“å‡€åŒ–æ•ˆæœï¼‰  
Â  Â - è¿æ¥ç”µæºï¼ŒæŒ‰æœºèº«â€œç”µæºé”®â€å¼€æœºï¼ˆé»˜è®¤è¿›å…¥è‡ªåŠ¨æ¨¡å¼ï¼‰  
2. æ›´æ¢æ»¤ç½‘æç¤ºï¼š  
Â  Â - å½“æœºèº«â€œæ»¤ç½‘æŒ‡ç¤ºç¯â€äº®èµ·æ—¶ï¼Œéœ€æ›´æ¢å¯¹åº”æ»¤ç½‘ï¼ˆHEPAæ»¤ç½‘å»ºè®®6-8ä¸ªæœˆæ›´æ¢ä¸€æ¬¡ï¼Œæ´»æ€§ç‚­æ»¤ç½‘å»ºè®®3-4ä¸ªæœˆæ›´æ¢ä¸€æ¬¡ï¼‰  
Â  Â - æ›´æ¢æ–¹æ³•ï¼šæ‰“å¼€æœºå™¨èƒŒéƒ¨é¢æ¿ï¼Œå–å‡ºæ—§æ»¤ç½‘ï¼ŒæŒ‰æ ‡è¯†æ–¹å‘è£…å…¥æ–°æ»¤ç½‘  
  
ä¸‰ã€æ³¨æ„äº‹é¡¹  
1. é¿å…åœ¨æ½®æ¹¿ç¯å¢ƒï¼ˆå¦‚æµ´å®¤ï¼‰ä½¿ç”¨ï¼Œä»¥å…æ»¤ç½‘å—æ½®å‘éœ‰  
2. é•¿æœŸä¸ä½¿ç”¨æ—¶ï¼Œéœ€æ–­å¼€ç”µæºå¹¶æ¸…æ´æœºèº«è¡¨é¢  
3. è‹¥å‡ºç°å¼‚å“æˆ–å‡€åŒ–æ•ˆæœä¸‹é™ï¼Œæ£€æŸ¥æ˜¯å¦æ»¤ç½‘å®‰è£…é”™è¯¯æˆ–é£æ‰‡æ•…éšœ  
"""</span>  
  
Â  Â  reimbursement_content =Â <span class="hljs-string">"""HelloWorldå…¬å¸å‘˜å·¥æŠ¥é”€æµç¨‹æŒ‡å—ï¼ˆ2024ç‰ˆï¼‰  
  
ä¸€ã€å¯æŠ¥é”€è´¹ç”¨ç±»å‹  
1. å·®æ—…è´¹ç”¨ï¼š  
Â  Â - åŒ…å«ï¼šäº¤é€šï¼ˆæœºç¥¨/é«˜é“ç¥¨éœ€æä¾›è¡Œç¨‹å•ï¼‰ã€ä½å®¿ï¼ˆéœ€æä¾›é…’åº—å‘ç¥¨å’Œä½å®¿æ¸…å•ï¼‰ã€å¸‚å†…äº¤é€šï¼ˆåœ°é“/æ‰“è½¦ç¥¨ï¼Œå•æ—¥ä¸Šé™200å…ƒï¼‰  
Â  Â - æ ‡å‡†ï¼šä¸€çº¿åŸå¸‚ä½å®¿ä¸Šé™800å…ƒ/æ™šï¼ŒäºŒçº¿åŸå¸‚600å…ƒ/æ™š  
2. åŠå…¬é‡‡è´­ï¼š  
Â  Â - éœ€æå‰åœ¨OAç³»ç»Ÿæäº¤â€œé‡‡è´­ç”³è¯·å•â€ï¼Œå®¡æ‰¹é€šè¿‡åå‡­å‘ç¥¨æŠ¥é”€ï¼ˆå•ç¬”è¶…è¿‡5000å…ƒéœ€èµ°å¯¹å…¬è½¬è´¦ï¼‰  
3. ä¸šåŠ¡æ‹›å¾…ï¼š  
Â  Â - éœ€æ³¨æ˜æ‹›å¾…å¯¹è±¡ã€äº‹ç”±ï¼Œå•æ¬¡æ‹›å¾…é‡‘é¢è¶…è¿‡2000å…ƒéœ€éƒ¨é—¨æ€»ç›‘å®¡æ‰¹  
  
äºŒã€æŠ¥é”€æµç¨‹æ­¥éª¤  
1. æ”¶é›†å‡­è¯ï¼šä¿ç•™æ‰€æœ‰è´¹ç”¨çš„åŸå§‹å‘ç¥¨ï¼ˆç”µå­å‘ç¥¨éœ€æ‰“å°çº¸è´¨ç‰ˆå¹¶ç­¾å­—ï¼‰  
2. æäº¤ç”³è¯·ï¼šåœ¨OAç³»ç»Ÿâ€œæŠ¥é”€æ¨¡å—â€å¡«å†™æŠ¥é”€å•ï¼Œä¸Šä¼ å‘ç¥¨ç…§ç‰‡å¹¶å…³è”å¯¹åº”é¡¹ç›®ç¼–å·  
3. å®¡æ‰¹ç¯èŠ‚ï¼š  
Â  Â - å•ç¬”â‰¤1000å…ƒï¼šéƒ¨é—¨ç»ç†å®¡æ‰¹â†’è´¢åŠ¡å®¡æ ¸â†’æ‰“æ¬¾  
Â  Â - å•ç¬”ï¼1000å…ƒï¼šéƒ¨é—¨ç»ç†â†’è´¢åŠ¡ä¸»ç®¡â†’æ€»ç»ç†â†’è´¢åŠ¡å®¡æ ¸â†’æ‰“æ¬¾  
4. åˆ°è´¦æ—¶é—´ï¼šè´¢åŠ¡å®¡æ ¸é€šè¿‡å3ä¸ªå·¥ä½œæ—¥å†…ï¼Œæ¬¾é¡¹å°†æ‰“å…¥å‘˜å·¥å·¥èµ„å¡  
  
ä¸‰ã€å¸¸è§é—®é¢˜  
1. å‘ç¥¨æŠ¬å¤´å¿…é¡»ä¸ºâ€œXXç§‘æŠ€æœ‰é™å…¬å¸â€ï¼Œå¦åˆ™ä¸äºˆæŠ¥é”€  
2. å·®æ—…æŠ¥é”€éœ€åœ¨å‡ºå·®ç»“æŸå15å¤©å†…æäº¤ï¼Œé€¾æœŸè§†ä¸ºè‡ªåŠ¨æ”¾å¼ƒ  
3. è™šæŠ¥è´¹ç”¨å°†æ‰£é™¤å½“æœˆç»©æ•ˆ20%ï¼Œå¹¶è®°å½•è¿è§„ä¸€æ¬¡  
"""</span>  
  
<span class="hljs-comment"># å®šä¹‰è¦åˆ›å»ºçš„æ–‡ä»¶åˆ—è¡¨  </span>
Â  Â  files = [  
Â  Â  Â  Â  {<span class="hljs-string">"name"</span>:Â <span class="hljs-string">"å¤ªé˜³ç³»è¡Œæ˜ŸçŸ¥è¯†.txt"</span>,Â <span class="hljs-string">"content"</span>: planets_content},  
Â  Â  Â  Â  {<span class="hljs-string">"name"</span>:Â <span class="hljs-string">"å®¶ç”¨ç©ºæ°”å‡€åŒ–å™¨ä½¿ç”¨æŒ‡å—.txt"</span>,Â <span class="hljs-string">"content"</span>: purifier_content},  
Â  Â  Â  Â  {<span class="hljs-string">"name"</span>:Â <span class="hljs-string">"å…¬å¸æŠ¥é”€æµç¨‹æŒ‡å—.txt"</span>,Â <span class="hljs-string">"content"</span>: reimbursement_content}  
Â  Â  ]  
  
<span class="hljs-comment"># å°†å†…å®¹å†™å…¥æ–‡ä»¶  </span>
<span class="hljs-keyword">for</span>Â fileÂ <span class="hljs-keyword">in</span>Â files:  
Â  Â  Â  Â  file_path = os.path.join(folder_name, file[<span class="hljs-string">"name"</span>])  
<span class="hljs-keyword">with</span>Â <span class="hljs-built_in">open</span>(file_path,Â <span class="hljs-string">"w"</span>, encoding=<span class="hljs-string">"utf-8"</span>)Â <span class="hljs-keyword">as</span>Â f:  
Â  Â  Â  Â  Â  Â  f.write(file[<span class="hljs-string">"content"</span>])  
  
Â  Â  <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å·²ç”Ÿæˆ3ä¸ªRAGæµ‹è¯•æ–‡ä»¶ï¼Œå­˜æ”¾äºï¼š<span class="hljs-subst">{os.path.abspath(folder_name)}</span>"</span>)  
<span class="hljs-keyword">return</span>Â folder_name  
  
<span class="hljs-comment"># è°ƒç”¨å‡½æ•°ç”Ÿæˆæ–‡ä»¶  </span>
<span class="hljs-keyword">if</span>Â __name__ ==Â <span class="hljs-string">"__main__"</span>:  
Â  Â  generate_rag_test_files()
</code></pre>
<p><strong>1. æ–‡æœ¬åˆ†æ®µ</strong></p>
<p>ä»¥ä¸‹ä»£ç æ–‡ä»¶å®ç°äº†ReadFilesç±»ï¼Œç”¨äºæ–‡æ¡£åŠ è½½ä¸åˆ‡åˆ†ï¼šè¯»å–æŒ‡å®šæ–‡ä»¶å¤¹ä¸­çš„æ‰€æœ‰txtæ–‡ä»¶ï¼Œä»¥æœ€å¤§tokené•¿åº¦ä¸ºä¾æ®ï¼Œå…ˆæŒ‰æ¢è¡Œç¬¦åˆæ­¥åˆ‡åˆ†ï¼Œå•è¡Œtokenè¶…é™æ—¶åˆ™è¿›ä¸€æ­¥æŒ‰tokenåˆ†å‰²ï¼ŒåŒæ—¶ä¿ç•™ç›¸é‚»ç‰‡æ®µçš„é‡å å†…å®¹ä»¥æå‡åç»­æ£€ç´¢å‡†ç¡®æ€§ã€‚æ­¤å¤–ï¼Œè¯¥æ–‡ä»¶è¿˜åŒ…å«Documentsç±»ï¼Œç”¨äºå°†æ•°æ®è§£æç»“æœå­˜å…¥JSONæ ¼å¼æ–‡æ¡£ï¼Œå¹¶è¿”å›ç›¸åº”æ¥å£ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># Utils.py  </span>
<span class="hljs-keyword">import</span>Â os  
<span class="hljs-keyword">import</span>Â json  
<span class="hljs-keyword">import</span>Â tiktoken Â <span class="hljs-comment"># å¯¼å…¥tiktokenåº“ï¼Œç”¨äºè®¡ç®—æ–‡æœ¬çš„tokenæ•°é‡  </span>
  
<span class="hljs-comment"># åˆå§‹åŒ–ç¼–ç å™¨ï¼Œä½¿ç”¨cl100k_baseç¼–ç æ–¹å¼  </span>
enc = tiktoken.get_encoding(<span class="hljs-string">"cl100k_base"</span>)  
  
classReadFiles:  
<span class="hljs-string">"""  
Â  Â  è¯»å–æŒ‡å®šç›®å½•ä¸‹çš„æ–‡æœ¬æ–‡ä»¶ï¼Œå¹¶æ ¹æ®tokené•¿åº¦è¿›è¡Œåˆ†å—å¤„ç†çš„ç±»  
Â  Â  ä¸»è¦ç”¨äºå°†é•¿æ–‡æœ¬åˆ†å‰²ä¸ºé€‚åˆå¤§è¯­è¨€æ¨¡å‹å¤„ç†çš„å°å—  
Â  Â  """</span>  
  
def__init__(self, path: <span class="hljs-built_in">str</span>)Â -&gt;Â <span class="hljs-literal">None</span>:  
<span class="hljs-string">"""  
Â  Â  Â  Â  åˆå§‹åŒ–ReadFileså®ä¾‹  
Â  Â  Â  Â  :param path: ç›®æ ‡æ–‡ä»¶å¤¹è·¯å¾„ï¼Œç”¨äºè¯»å–å…¶ä¸­çš„æ–‡æœ¬æ–‡ä»¶  
Â  Â  Â  Â  """</span>  
Â  Â  Â  Â  self._path = path Â <span class="hljs-comment"># å­˜å‚¨ç›®æ ‡æ–‡ä»¶å¤¹è·¯å¾„  </span>
Â  Â  Â  Â  self.file_list = self.get_files() Â <span class="hljs-comment"># è·å–æ–‡ä»¶å¤¹ä¸­æ‰€æœ‰ç¬¦åˆæ¡ä»¶çš„æ–‡ä»¶è·¯å¾„åˆ—è¡¨  </span>
  
defget_files(self):  
<span class="hljs-string">"""  
Â  Â  Â  Â  éå†æŒ‡å®šæ–‡ä»¶å¤¹åŠå…¶å­æ–‡ä»¶å¤¹ï¼Œæ”¶é›†æ‰€æœ‰.txtåç¼€çš„æ–‡ä»¶è·¯å¾„  
Â  Â  Â  Â  :return: åŒ…å«æ‰€æœ‰txtæ–‡ä»¶ç»å¯¹è·¯å¾„çš„åˆ—è¡¨  
Â  Â  Â  Â  """</span>  
Â  Â  Â  Â  file_list = []  
<span class="hljs-comment"># os.walké€’å½’éå†æ–‡ä»¶å¤¹ï¼šè¿”å›å½“å‰è·¯å¾„ã€å­æ–‡ä»¶å¤¹åˆ—è¡¨ã€æ–‡ä»¶åˆ—è¡¨  </span>
<span class="hljs-keyword">for</span>Â filepath, dirnames, filenamesÂ <span class="hljs-keyword">in</span>Â os.walk(self._path):  
<span class="hljs-keyword">for</span>Â filenameÂ <span class="hljs-keyword">in</span>Â filenames:  
<span class="hljs-comment"># ç­›é€‰å‡ºåç¼€ä¸º.txtçš„æ–‡ä»¶  </span>
<span class="hljs-keyword">if</span>Â filename.endswith(<span class="hljs-string">".txt"</span>):  
<span class="hljs-comment"># æ‹¼æ¥å®Œæ•´æ–‡ä»¶è·¯å¾„å¹¶æ·»åŠ åˆ°åˆ—è¡¨  </span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  file_list.append(os.path.join(filepath, filename))  
<span class="hljs-keyword">return</span>Â file_list  
  
defget_content(self, max_token_len: <span class="hljs-built_in">int</span> =Â <span class="hljs-number">600</span>, cover_content: <span class="hljs-built_in">int</span> =Â <span class="hljs-number">150</span>):  
<span class="hljs-string">"""  
Â  Â  Â  Â  è¯»å–æ‰€æœ‰æ–‡ä»¶å†…å®¹ï¼Œå¹¶æŒ‰æŒ‡å®štokené•¿åº¦è¿›è¡Œåˆ†å—å¤„ç†  
Â  Â  Â  Â  :param max_token_len: æ¯ä¸ªå—çš„æœ€å¤§tokené•¿åº¦ï¼Œé»˜è®¤600  
Â  Â  Â  Â  :param cover_content: å—ä¹‹é—´é‡å çš„å†…å®¹é•¿åº¦ï¼ˆå­—ç¬¦æ•°ï¼‰ï¼Œç”¨äºä¿æŒä¸Šä¸‹æ–‡è¿è´¯æ€§ï¼Œé»˜è®¤150  
Â  Â  Â  Â  :return: æ‰€æœ‰æ–‡ä»¶åˆ†å—åçš„å†…å®¹åˆ—è¡¨  
Â  Â  Â  Â  """</span>  
Â  Â  Â  Â  docs = []  
<span class="hljs-comment"># éå†æ¯ä¸ªæ–‡ä»¶å¹¶å¤„ç†  </span>
<span class="hljs-keyword">for</span>Â fileÂ <span class="hljs-keyword">in</span>Â self.file_list:  
<span class="hljs-comment"># è¯»å–æ–‡ä»¶å†…å®¹  </span>
Â  Â  Â  Â  Â  Â  content = self.read_file_content(file)  
<span class="hljs-comment"># å¯¹å†…å®¹è¿›è¡Œåˆ†å—  </span>
Â  Â  Â  Â  Â  Â  chunk_content = self.get_chunk(  
Â  Â  Â  Â  Â  Â  Â  Â  content, max_token_len=max_token_len, cover_content=cover_content)  
<span class="hljs-comment"># å°†åˆ†å—ç»“æœæ·»åŠ åˆ°æ€»åˆ—è¡¨  </span>
Â  Â  Â  Â  Â  Â  docs.extend(chunk_content)  
<span class="hljs-keyword">return</span>Â docs  
  
Â  Â  @<span class="hljs-built_in">classmethod</span>  
defget_chunk(cls, text: <span class="hljs-built_in">str</span>, max_token_len: <span class="hljs-built_in">int</span> =Â <span class="hljs-number">600</span>, cover_content: <span class="hljs-built_in">int</span> =Â <span class="hljs-number">150</span>):  
<span class="hljs-string">"""  
Â  Â  Â  Â  å°†æ–‡æœ¬æŒ‰tokené•¿åº¦åˆ†å—ï¼Œå¤„ç†é•¿æ–‡æœ¬å¹¶ä¿æŒå—ä¹‹é—´çš„é‡å   
Â  Â  Â  Â  :param text: è¦åˆ†å—çš„åŸå§‹æ–‡æœ¬  
Â  Â  Â  Â  :param max_token_len: æ¯ä¸ªå—çš„æœ€å¤§tokené•¿åº¦  
Â  Â  Â  Â  :param cover_content: å—ä¹‹é—´é‡å çš„å†…å®¹é•¿åº¦ï¼ˆå­—ç¬¦æ•°ï¼‰  
Â  Â  Â  Â  :return: åˆ†å—åçš„æ–‡æœ¬åˆ—è¡¨  
Â  Â  Â  Â  """</span>  
Â  Â  Â  Â  chunk_text = [] Â <span class="hljs-comment"># å­˜å‚¨åˆ†å—ç»“æœ  </span>
  
Â  Â  Â  Â  curr_len =Â <span class="hljs-number">0</span><span class="hljs-comment"># å½“å‰å—çš„tokené•¿åº¦  </span>
Â  Â  Â  Â  curr_chunk =Â <span class="hljs-string">''</span><span class="hljs-comment"># å½“å‰å—çš„æ–‡æœ¬å†…å®¹  </span>
  
<span class="hljs-comment"># å®é™…å¯ç”¨çš„tokené•¿åº¦ = æœ€å¤§é•¿åº¦ - é‡å éƒ¨åˆ†ï¼ˆä¸ºé‡å å†…å®¹é¢„ç•™ç©ºé—´ï¼‰  </span>
Â  Â  Â  Â  token_len = max_token_len - cover_content  
<span class="hljs-comment"># æŒ‰è¡Œåˆ†å‰²æ–‡æœ¬ï¼ˆå‡è®¾è¡Œæ˜¯æœ‰æ„ä¹‰çš„æ–‡æœ¬å•å…ƒï¼‰  </span>
Â  Â  Â  Â  lines = text.splitlines()  
  
<span class="hljs-keyword">for</span>Â lineÂ <span class="hljs-keyword">in</span>Â lines:  
<span class="hljs-comment"># å»é™¤è¡Œé¦–å°¾ç©ºæ ¼ï¼Œä½†ä¿ç•™è¡Œå†…ç©ºæ ¼  </span>
Â  Â  Â  Â  Â  Â  line = line.strip()  
<span class="hljs-comment"># è®¡ç®—å½“å‰è¡Œçš„tokené•¿åº¦  </span>
Â  Â  Â  Â  Â  Â  line_len = <span class="hljs-built_in">len</span>(enc.encode(line))  
  
<span class="hljs-comment"># æƒ…å†µ1ï¼šå½“å‰è¡Œçš„tokené•¿åº¦è¶…è¿‡æœ€å¤§é™åˆ¶  </span>
<span class="hljs-keyword">if</span>Â line_len &gt; max_token_len:  
<span class="hljs-comment"># å¦‚æœå½“å‰å—æœ‰å†…å®¹ï¼Œå…ˆä¿å­˜  </span>
<span class="hljs-keyword">if</span>Â curr_chunk:  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  chunk_text.append(curr_chunk)  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  curr_chunk =Â <span class="hljs-string">''</span>  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  curr_len =Â <span class="hljs-number">0</span>  
  
<span class="hljs-comment"># å°†è¶…é•¿è¡ŒæŒ‰tokené•¿åº¦åˆ†å‰²æˆå¤šä¸ªå—  </span>
Â  Â  Â  Â  Â  Â  Â  Â  line_tokens = enc.encode(line)  
<span class="hljs-comment"># è®¡ç®—éœ€è¦åˆ†æˆå¤šå°‘å—  </span>
Â  Â  Â  Â  Â  Â  Â  Â  num_chunks = (<span class="hljs-built_in">len</span>(line_tokens) + token_len -Â <span class="hljs-number">1</span>) // token_len  
  
<span class="hljs-keyword">for</span>Â iÂ <span class="hljs-keyword">in</span>Â <span class="hljs-built_in">range</span>(num_chunks):  
<span class="hljs-comment"># è®¡ç®—å½“å‰å—çš„tokenèµ·å§‹å’Œç»“æŸä½ç½®  </span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  start_token = i * token_len  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  end_token = <span class="hljs-built_in">min</span>(start_token + token_len, <span class="hljs-built_in">len</span>(line_tokens))  
  
<span class="hljs-comment"># å°†tokenç‰‡æ®µè§£ç å›æ–‡æœ¬  </span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  chunk_tokens = line_tokens[start_token:end_token]  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  chunk_part = enc.decode(chunk_tokens)  
  
<span class="hljs-comment"># é™¤äº†ç¬¬ä¸€ä¸ªå—ï¼Œå…¶ä»–å—éƒ½æ·»åŠ å‰ä¸€ä¸ªå—çš„ç»“å°¾ä½œä¸ºé‡å å†…å®¹  </span>
<span class="hljs-keyword">if</span>Â i &gt;Â <span class="hljs-number">0</span><span class="hljs-keyword">and</span>Â chunk_text:  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  prev_chunk = chunk_text[-<span class="hljs-number">1</span>]  
<span class="hljs-comment"># å–å‰ä¸€ä¸ªå—çš„æœ€åcover_contentä¸ªå­—ç¬¦ä½œä¸ºé‡å å†…å®¹  </span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  cover_part = prev_chunk[-cover_content:]Â <span class="hljs-keyword">if</span>Â <span class="hljs-built_in">len</span>(prev_chunk) &gt; cover_contentÂ <span class="hljs-keyword">else</span>Â prev_chunk  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  chunk_part = cover_part + chunk_part  
  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  chunk_text.append(chunk_part)  
  
<span class="hljs-comment"># é‡ç½®å½“å‰å—çŠ¶æ€  </span>
Â  Â  Â  Â  Â  Â  Â  Â  curr_chunk =Â <span class="hljs-string">''</span>  
Â  Â  Â  Â  Â  Â  Â  Â  curr_len =Â <span class="hljs-number">0</span>  
  
<span class="hljs-comment"># æƒ…å†µ2ï¼šå½“å‰è¡Œå¯ä»¥åŠ å…¥å½“å‰å—ï¼ˆåŠ ä¸Šæ¢è¡Œç¬¦çš„1ä¸ªtokenï¼‰  </span>
<span class="hljs-keyword">elif</span>Â curr_len + line_len +Â <span class="hljs-number">1</span>Â &lt;= token_len: Â <span class="hljs-comment"># +1 æ˜¯ä¸ºæ¢è¡Œç¬¦é¢„ç•™çš„token  </span>
<span class="hljs-keyword">if</span>Â curr_chunk: Â <span class="hljs-comment"># å¦‚æœå½“å‰å—å·²æœ‰å†…å®¹ï¼Œå…ˆåŠ æ¢è¡Œç¬¦  </span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  curr_chunk +=Â <span class="hljs-string">'\n'</span>  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  curr_len +=Â <span class="hljs-number">1</span><span class="hljs-comment"># æ¢è¡Œç¬¦ç®—1ä¸ªtoken  </span>
Â  Â  Â  Â  Â  Â  Â  Â  curr_chunk += line Â <span class="hljs-comment"># æ·»åŠ å½“å‰è¡Œæ–‡æœ¬  </span>
Â  Â  Â  Â  Â  Â  Â  Â  curr_len += line_len Â <span class="hljs-comment"># æ›´æ–°å½“å‰å—çš„tokené•¿åº¦  </span>
<span class="hljs-comment"># æƒ…å†µ3ï¼šå½“å‰è¡Œæ— æ³•åŠ å…¥å½“å‰å—ï¼Œéœ€è¦å¼€å§‹æ–°å—  </span>
<span class="hljs-keyword">else</span>:  
<span class="hljs-comment"># ä¿å­˜å½“å‰å—  </span>
<span class="hljs-keyword">if</span>Â curr_chunk:  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  chunk_text.append(curr_chunk)  
  
<span class="hljs-comment"># å¼€å§‹æ–°å—ï¼Œæ·»åŠ ä¸å‰ä¸€å—çš„é‡å å†…å®¹  </span>
<span class="hljs-keyword">if</span>Â chunk_text: Â <span class="hljs-comment"># å¦‚æœå·²æœ‰å—ï¼Œæ·»åŠ é‡å éƒ¨åˆ†  </span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  prev_chunk = chunk_text[-<span class="hljs-number">1</span>]  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  cover_part = prev_chunk[-cover_content:]Â <span class="hljs-keyword">if</span>Â <span class="hljs-built_in">len</span>(prev_chunk) &gt; cover_contentÂ <span class="hljs-keyword">else</span>Â prev_chunk  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  curr_chunk = cover_part +Â <span class="hljs-string">'\n'</span>Â + line  
<span class="hljs-comment"># è®¡ç®—æ–°å—çš„åˆå§‹tokené•¿åº¦ï¼ˆé‡å éƒ¨åˆ†+æ¢è¡Œç¬¦+å½“å‰è¡Œï¼‰  </span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  curr_len = <span class="hljs-built_in">len</span>(enc.encode(cover_part)) +Â <span class="hljs-number">1</span>Â + line_len  
<span class="hljs-keyword">else</span>: Â <span class="hljs-comment"># å¦‚æœæ˜¯ç¬¬ä¸€ä¸ªå—ï¼Œç›´æ¥æ·»åŠ å½“å‰è¡Œ  </span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  curr_chunk = line  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  curr_len = line_len  
  
<span class="hljs-comment"># æ·»åŠ æœ€åä¸€ä¸ªæœªå¤„ç†çš„å—ï¼ˆå¦‚æœæœ‰å†…å®¹ï¼‰  </span>
<span class="hljs-keyword">if</span>Â curr_chunk:  
Â  Â  Â  Â  Â  Â  chunk_text.append(curr_chunk)  
  
<span class="hljs-keyword">return</span>Â chunk_text  
  
Â  Â  @<span class="hljs-built_in">classmethod</span>  
defread_file_content(cls, file_path: <span class="hljs-built_in">str</span>):  
<span class="hljs-string">"""  
Â  Â  Â  Â  æ ¹æ®æ–‡ä»¶ç±»å‹è¯»å–å†…å®¹ï¼ˆç›®å‰ä»…æ”¯æŒtxtæ–‡ä»¶ï¼‰  
Â  Â  Â  Â  :param file_path: æ–‡ä»¶è·¯å¾„  
Â  Â  Â  Â  :return: æ–‡ä»¶å†…å®¹å­—ç¬¦ä¸²  
Â  Â  Â  Â  :raises ValueError: å¦‚æœæ–‡ä»¶ç±»å‹ä¸æ”¯æŒ  
Â  Â  Â  Â  """</span>  
<span class="hljs-keyword">if</span>Â file_path.endswith(<span class="hljs-string">'.txt'</span>):  
<span class="hljs-keyword">return</span>Â cls.read_text(file_path)  
<span class="hljs-keyword">else</span>:  
<span class="hljs-keyword">raise</span>Â ValueError(<span class="hljs-string">"Unsupported file type"</span>) Â <span class="hljs-comment"># æŠ›å‡ºä¸æ”¯æŒæ–‡ä»¶ç±»å‹çš„å¼‚å¸¸  </span>
  
Â  Â  @<span class="hljs-built_in">classmethod</span>  
defread_text(cls, file_path: <span class="hljs-built_in">str</span>):  
<span class="hljs-string">"""  
Â  Â  Â  Â  è¯»å–æ–‡æœ¬æ–‡ä»¶å†…å®¹  
Â  Â  Â  Â  :param file_path: txtæ–‡ä»¶è·¯å¾„  
Â  Â  Â  Â  :return: æ–‡ä»¶å†…å®¹å­—ç¬¦ä¸²  
Â  Â  Â  Â  """</span>  
<span class="hljs-comment"># ä½¿ç”¨utf-8ç¼–ç æ‰“å¼€å¹¶è¯»å–æ–‡ä»¶  </span>
<span class="hljs-keyword">with</span>Â <span class="hljs-built_in">open</span>(file_path,Â <span class="hljs-string">'r'</span>, encoding=<span class="hljs-string">'utf-8'</span>)Â <span class="hljs-keyword">as</span>Â file:  
<span class="hljs-keyword">return</span>Â file.read()  
  
  
classDocuments:  
<span class="hljs-string">"""  
Â  Â  è¯»å–å·²åˆ†ç±»çš„JSONæ ¼å¼æ–‡æ¡£çš„ç±»  
Â  Â  ç”¨äºè·å–é¢„å…ˆå¤„ç†å¥½çš„JSONæ ¼å¼å†…å®¹  
Â  Â  """</span>  
def__init__(self, path: <span class="hljs-built_in">str</span> =Â <span class="hljs-string">''</span>)Â -&gt;Â <span class="hljs-literal">None</span>:  
<span class="hljs-string">"""  
Â  Â  Â  Â  åˆå§‹åŒ–Documentså®ä¾‹  
Â  Â  Â  Â  :param path: JSONæ–‡ä»¶è·¯å¾„ï¼Œé»˜è®¤ä¸ºç©ºå­—ç¬¦ä¸²  
Â  Â  Â  Â  """</span>  
Â  Â  Â  Â  self.path = path Â <span class="hljs-comment"># å­˜å‚¨JSONæ–‡ä»¶è·¯å¾„  </span>
  
defget_content(self):  
<span class="hljs-string">"""  
Â  Â  Â  Â  è¯»å–å¹¶è§£æJSONæ–‡ä»¶å†…å®¹  
Â  Â  Â  Â  :return: è§£æåçš„JSONæ•°æ®ï¼ˆé€šå¸¸ä¸ºå­—å…¸æˆ–åˆ—è¡¨ï¼‰  
Â  Â  Â  Â  """</span>  
<span class="hljs-keyword">with</span>Â <span class="hljs-built_in">open</span>(self.path, mode=<span class="hljs-string">'r'</span>, encoding=<span class="hljs-string">'utf-8'</span>)Â <span class="hljs-keyword">as</span>Â f:  
Â  Â  Â  Â  Â  Â  content = json.load(f) Â <span class="hljs-comment"># åŠ è½½å¹¶è§£æJSONæ•°æ®  </span>
<span class="hljs-keyword">return</span>Â content
</code></pre>
<p><strong>2. æ–‡æœ¬ç‰‡æ®µå‘é‡åŒ–</strong></p>
<p>ä»¥ä¸‹ä»£ç æ–‡ä»¶ä¸»è¦å®ç°äº†æ–‡æœ¬ç‰‡æ®µå‘é‡åŒ–ç›¸å…³åŠŸèƒ½ï¼Œæ ¸å¿ƒæ˜¯å°†æ–‡æœ¬è½¬æ¢ä¸ºæ•°å€¼å‘é‡å¹¶æä¾›å‘é‡ç›¸ä¼¼åº¦è®¡ç®—èƒ½åŠ›ï¼Œå…·ä½“åŒ…æ‹¬ï¼š</p>
<ol start="0">
<li>å®šä¹‰äº†æŠ½è±¡åŸºç±»<code>BaseEmbeddings</code>ï¼Œè§„å®šäº†å‘é‡æå–æ¨¡å‹ï¼ˆåµŒå…¥æ¨¡å‹ï¼‰çš„åŸºæœ¬æ¥å£ï¼š</li>
</ol>
<ul>
<li>å­˜å‚¨æ¨¡å‹è·¯å¾„çš„åˆå§‹åŒ–æ–¹æ³•</li>
<li>æŠ½è±¡æ–¹æ³•<code>get_embedding</code>ï¼ˆéœ€å­ç±»å®ç°æ–‡æœ¬åˆ°å‘é‡çš„è½¬æ¢ï¼‰</li>
<li>ç±»æ–¹æ³•<code>cosine_similarity</code>ï¼ˆè®¡ç®—ä¸¤ä¸ªå‘é‡çš„ä½™å¼¦ç›¸ä¼¼åº¦ï¼Œè¡¡é‡æ–‡æœ¬ç›¸ä¼¼åº¦ï¼‰</li>
</ul>
<ol start="2">
<li>å®ç°äº†å…·ä½“å­ç±»<code>SentenceEmbedding</code>ï¼š</li>
</ol>
<ul>
<li>åŸºäºSentence-BERTæ¨¡å‹å®ç°æ–‡æœ¬åµŒå…¥åŠŸèƒ½</li>
<li>æ”¯æŒä»Hugging Faceæˆ–ModelScopeåŠ è½½é¢„è®­ç»ƒæ¨¡å‹</li>
<li>å®ç°<code>get_embedding</code>æ–¹æ³•ï¼Œå°†æ–‡æœ¬é¢„å¤„ç†åè½¬æ¢ä¸ºå‘é‡</li>
</ul>
<ol start="3">
<li>æä¾›äº†æµ‹è¯•ä»£ç ï¼š</li>
</ol>
<ul>
<li>åˆå§‹åŒ–é»˜è®¤æ¨¡å‹ï¼ˆsentence-transformers/all-MiniLM-L6-v2ï¼‰</li>
<li>æ¼”ç¤ºæ–‡æœ¬åµŒå…¥è¿‡ç¨‹å¹¶è¾“å‡ºå‘é‡ç»´åº¦å’Œç¤ºä¾‹å€¼</li>
<li>å‘é‡è¾“å‡ºç»´åº¦é»˜è®¤ä¸º384</li>
</ul>
<p>æ€»ä¹‹ï¼Œè¯¥ä»£ç æ•´ä½“åŠŸèƒ½æ˜¯å°†æ–‡æœ¬è½¬åŒ–ä¸ºè®¡ç®—æœºå¯ç†è§£çš„å‘é‡è¡¨ç¤ºï¼Œä¸ºåç»­çš„æ–‡æœ¬ç›¸ä¼¼åº¦è®¡ç®—ã€è¯­ä¹‰æœç´¢ç­‰ä»»åŠ¡æä¾›åŸºç¡€ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># Embeddings.py  </span>
<span class="hljs-keyword">from</span>Â typingÂ <span class="hljs-keyword">import</span>Â <span class="hljs-type">List</span>  
<span class="hljs-keyword">import</span>Â numpyÂ <span class="hljs-keyword">as</span>Â np  
  
classBaseEmbeddings:  
<span class="hljs-string">"""  
Â  Â  åµŒå…¥æ¨¡å‹çš„åŸºç±»ï¼Œå®šä¹‰äº†æ‰€æœ‰åµŒå…¥æ¨¡å‹åº”å®ç°çš„åŸºæœ¬æ¥å£  
Â  Â  ä½œä¸ºæŠ½è±¡åŸºç±»ï¼Œä¸èƒ½ç›´æ¥å®ä¾‹åŒ–ï¼Œéœ€é€šè¿‡å­ç±»å®ç°å…·ä½“åŠŸèƒ½  
Â  Â  """</span>  
def__init__(self, path: <span class="hljs-built_in">str</span>)Â -&gt;Â <span class="hljs-literal">None</span>:  
<span class="hljs-string">"""  
Â  Â  Â  Â  åˆå§‹åŒ–åµŒå…¥åŸºç±»ï¼Œå­˜å‚¨æ¨¡å‹æˆ–æ•°æ®çš„è·¯å¾„  
  
Â  Â  Â  Â  Args:  
Â  Â  Â  Â  Â  Â  path (str): æ¨¡å‹æˆ–æ•°æ®çš„è·¯å¾„ï¼Œå¯ä»¥æ˜¯æœ¬åœ°è·¯å¾„æˆ–è¿œç¨‹ä»“åº“åœ°å€  
Â  Â  Â  Â  """</span>  
Â  Â  Â  Â  self.path = path Â <span class="hljs-comment"># å­˜å‚¨æ¨¡å‹è·¯å¾„ä¾›åç»­ä½¿ç”¨  </span>
  
defget_embedding(self, text: <span class="hljs-built_in">str</span>)Â -&gt; <span class="hljs-type">List</span>[<span class="hljs-built_in">float</span>]:  
<span class="hljs-string">"""  
Â  Â  Â  Â  è·å–æ–‡æœ¬çš„åµŒå…¥å‘é‡è¡¨ç¤ºçš„æŠ½è±¡æ–¹æ³•  
Â  Â  Â  Â  å­ç±»å¿…é¡»å®ç°æ­¤æ–¹æ³•ä»¥æä¾›å…·ä½“çš„åµŒå…¥è®¡ç®—é€»è¾‘  
  
Â  Â  Â  Â  Args:  
Â  Â  Â  Â  Â  Â  text (str): éœ€è¦è½¬æ¢ä¸ºåµŒå…¥å‘é‡çš„è¾“å…¥æ–‡æœ¬  
  
Â  Â  Â  Â  Returns:  
Â  Â  Â  Â  Â  Â  List[float]: æ–‡æœ¬å¯¹åº”çš„åµŒå…¥å‘é‡ï¼Œä»¥æµ®ç‚¹æ•°åˆ—è¡¨å½¢å¼è¿”å›  
  
Â  Â  Â  Â  Raises:  
Â  Â  Â  Â  Â  Â  NotImplementedError: å¦‚æœå­ç±»æœªå®ç°æ­¤æ–¹æ³•åˆ™ä¼šæŠ›å‡ºæ­¤å¼‚å¸¸  
Â  Â  Â  Â  """</span>  
<span class="hljs-comment"># æŠ›å‡ºæœªå®ç°å¼‚å¸¸ï¼Œå¼ºåˆ¶å­ç±»å®ç°è¯¥æ–¹æ³•  </span>
<span class="hljs-keyword">raise</span>Â NotImplementedError  
  
Â  Â  @<span class="hljs-built_in">classmethod</span>  
defcosine_similarity(cls, vector1: <span class="hljs-type">List</span>[<span class="hljs-built_in">float</span>], vector2: <span class="hljs-type">List</span>[<span class="hljs-built_in">float</span>])Â -&gt; <span class="hljs-built_in">float</span>:  
<span class="hljs-string">"""  
Â  Â  Â  Â  è®¡ç®—ä¸¤ä¸ªå‘é‡ä¹‹é—´çš„ä½™å¼¦ç›¸ä¼¼åº¦  
Â  Â  Â  Â  ä½™å¼¦ç›¸ä¼¼åº¦æ˜¯è¡¡é‡ä¸¤ä¸ªå‘é‡æ–¹å‘ç›¸ä¼¼æ€§çš„æŒ‡æ ‡ï¼Œå€¼è¶Šæ¥è¿‘1è¡¨ç¤ºæ–¹å‘è¶Šç›¸ä¼¼  
  
Â  Â  Â  Â  Args:  
Â  Â  Â  Â  Â  Â  vector1 (List[float]): ç¬¬ä¸€ä¸ªå‘é‡  
Â  Â  Â  Â  Â  Â  vector2 (List[float]): ç¬¬äºŒä¸ªå‘é‡  
  
Â  Â  Â  Â  Returns:  
Â  Â  Â  Â  Â  Â  float: ä¸¤ä¸ªå‘é‡çš„ä½™å¼¦ç›¸ä¼¼åº¦ï¼ŒèŒƒå›´åœ¨[-1, 1]ä¹‹é—´  
Â  Â  Â  Â  Â  Â  Â  Â  Â  1è¡¨ç¤ºå®Œå…¨ç›¸ä¼¼ï¼Œ-1è¡¨ç¤ºå®Œå…¨ç›¸åï¼Œ0è¡¨ç¤ºæ­£äº¤  
Â  Â  Â  Â  """</span>  
<span class="hljs-comment"># å°†è¾“å…¥çš„Pythonåˆ—è¡¨è½¬æ¢ä¸ºnumpyæ•°ç»„ï¼Œå¹¶æŒ‡å®šæ•°æ®ç±»å‹ä¸ºfloat32ä»¥èŠ‚çœå†…å­˜  </span>
Â  Â  Â  Â  v1 = np.array(vector1, dtype=np.float32)  
Â  Â  Â  Â  v2 = np.array(vector2, dtype=np.float32)  
  
<span class="hljs-comment"># æ£€æŸ¥å‘é‡ä¸­æ˜¯å¦åŒ…å«æ— ç©·å¤§æˆ–NaNå€¼ï¼Œè¿™äº›å€¼ä¼šå¯¼è‡´è®¡ç®—é”™è¯¯  </span>
ifnotÂ np.<span class="hljs-built_in">all</span>(np.isfinite(v1))Â ornotÂ np.<span class="hljs-built_in">all</span>(np.isfinite(v2)):  
return0<span class="hljs-number">.0</span><span class="hljs-comment"># å­˜åœ¨æ— æ•ˆå€¼æ—¶è¿”å›0è¡¨ç¤ºæ— ç›¸ä¼¼æ€§  </span>
  
<span class="hljs-comment"># è®¡ç®—ä¸¤ä¸ªå‘é‡çš„ç‚¹ç§¯ï¼ˆå†…ç§¯ï¼‰  </span>
Â  Â  Â  Â  dot_product = np.dot(v1, v2)  
<span class="hljs-comment"># è®¡ç®—æ¯ä¸ªå‘é‡çš„L2èŒƒæ•°ï¼ˆæ¬§å‡ é‡Œå¾—é•¿åº¦ï¼‰  </span>
Â  Â  Â  Â  norm_v1 = np.linalg.norm(v1)  
Â  Â  Â  Â  norm_v2 = np.linalg.norm(v2)  
  
<span class="hljs-comment"># è®¡ç®—ä¸¤ä¸ªå‘é‡èŒƒæ•°çš„ä¹˜ç§¯ä½œä¸ºåˆ†æ¯  </span>
Â  Â  Â  Â  magnitude = norm_v1 * norm_v2  
<span class="hljs-comment"># å¤„ç†åˆ†æ¯ä¸º0çš„ç‰¹æ®Šæƒ…å†µï¼ˆé¿å…é™¤ä»¥é›¶é”™è¯¯ï¼‰  </span>
<span class="hljs-keyword">if</span>Â magnitude ==Â <span class="hljs-number">0</span>:  
return0<span class="hljs-number">.0</span><span class="hljs-comment"># é›¶å‘é‡ä¹‹é—´çš„ç›¸ä¼¼åº¦å®šä¹‰ä¸º0  </span>
  
<span class="hljs-comment"># è¿”å›ä½™å¼¦ç›¸ä¼¼åº¦ï¼šç‚¹ç§¯é™¤ä»¥èŒƒæ•°ä¹˜ç§¯  </span>
<span class="hljs-keyword">return</span>Â dot_product / magnitude  
  
classSentenceEmbedding(BaseEmbeddings):  
<span class="hljs-string">"""  
Â  Â  åŸºäºSentence-BERTçš„å¥å­åµŒå…¥å®ç°ç±»  
Â  Â  ç»§æ‰¿è‡ªBaseEmbeddingsï¼Œå®ç°äº†å…·ä½“çš„å¥å­åµŒå…¥è®¡ç®—åŠŸèƒ½  
Â  Â  """</span>  
def__init__(self, path: <span class="hljs-built_in">str</span> =Â <span class="hljs-string">"sentence-transformers/all-MiniLM-L6-v2"</span>)Â -&gt;Â <span class="hljs-literal">None</span>:  
<span class="hljs-string">"""  
Â  Â  Â  Â  åˆå§‹åŒ–SentenceEmbeddingå®ä¾‹ï¼ŒåŠ è½½æŒ‡å®šçš„å¥å­åµŒå…¥æ¨¡å‹  
  
Â  Â  Â  Â  Args:  
Â  Â  Â  Â  Â  Â  path (str, optional): æ¨¡å‹è·¯å¾„ï¼Œé»˜è®¤ä¸ºé¢„è®­ç»ƒæ¨¡å‹"sentence-transformers/all-MiniLM-L6-v2"  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â å¯ä»¥æ˜¯modelscopeæ¨¡å‹ä»“åº“åç§°æˆ–æœ¬åœ°æ¨¡å‹è·¯å¾„  
Â  Â  Â  Â  """</span>  
<span class="hljs-comment"># è°ƒç”¨çˆ¶ç±»çš„åˆå§‹åŒ–æ–¹æ³•ï¼Œå­˜å‚¨æ¨¡å‹è·¯å¾„  </span>
Â  Â  Â  Â  <span class="hljs-built_in">super</span>().__init__(path)  
<span class="hljs-keyword">try</span>:  
<span class="hljs-keyword">from</span>Â sentence_transformersÂ <span class="hljs-keyword">import</span>Â SentenceTransformer  
<span class="hljs-comment"># åˆ©ç”¨modelscopeåŠ é€Ÿä¸‹è½½  </span>
<span class="hljs-keyword">from</span>Â modelscopeÂ <span class="hljs-keyword">import</span>Â snapshot_download  
  
Â  Â  Â  Â  Â  Â  model_name = path Â <span class="hljs-comment"># æ¨¡å‹åç§°/è·¯å¾„  </span>
<span class="hljs-comment"># ä»æ¨¡å‹ä»“åº“ä¸‹è½½æ¨¡å‹åˆ°æœ¬åœ°ï¼ˆå¦‚æœæœ¬åœ°å·²å­˜åœ¨åˆ™ç›´æ¥ä½¿ç”¨ï¼‰  </span>
Â  Â  Â  Â  Â  Â  model_dir = snapshot_download(model_name)  
<span class="hljs-comment"># åˆå§‹åŒ–SentenceTransformeræ¨¡å‹å®ä¾‹  </span>
Â  Â  Â  Â  Â  Â  self.model = SentenceTransformer(model_dir)  
<span class="hljs-keyword">except</span>Â ExceptionÂ <span class="hljs-keyword">as</span>Â e:  
<span class="hljs-comment"># æ•è·æ‰€æœ‰å¯èƒ½çš„å¼‚å¸¸å¹¶åŒ…è£…ä¸ºè¿è¡Œæ—¶é”™è¯¯ï¼Œæä¾›æ›´æ˜ç¡®çš„é”™è¯¯ä¿¡æ¯  </span>
<span class="hljs-keyword">raise</span>Â RuntimeError(<span class="hljs-string">f"åŠ è½½SentenceTransformeræ¨¡å‹å¤±è´¥:Â <span class="hljs-subst">{<span class="hljs-built_in">str</span>(e)}</span>"</span>)  
  
defget_embedding(self, text: <span class="hljs-built_in">str</span>)Â -&gt; <span class="hljs-type">List</span>[<span class="hljs-built_in">float</span>]:  
<span class="hljs-string">"""  
Â  Â  Â  Â  å®ç°çˆ¶ç±»çš„æŠ½è±¡æ–¹æ³•ï¼Œè·å–æ–‡æœ¬çš„åµŒå…¥å‘é‡  
  
Â  Â  Â  Â  Args:  
Â  Â  Â  Â  Â  Â  text (str): éœ€è¦è½¬æ¢ä¸ºåµŒå…¥å‘é‡çš„è¾“å…¥æ–‡æœ¬  
  
Â  Â  Â  Â  Returns:  
Â  Â  Â  Â  Â  Â  List[float]: æ–‡æœ¬å¯¹åº”çš„åµŒå…¥å‘é‡ï¼Œä»¥æµ®ç‚¹æ•°åˆ—è¡¨å½¢å¼è¿”å›  
Â  Â  Â  Â  """</span>  
<span class="hljs-comment"># æ–‡æœ¬é¢„å¤„ç†ï¼šå°†æ¢è¡Œç¬¦æ›¿æ¢ä¸ºç©ºæ ¼ï¼Œé¿å…æ¨¡å‹å¤„ç†æ¢è¡Œç¬¦å¯èƒ½å¸¦æ¥çš„é—®é¢˜  </span>
Â  Â  Â  Â  text = text.replace(<span class="hljs-string">"\n"</span>,Â <span class="hljs-string">" "</span>)  
<span class="hljs-comment"># ä½¿ç”¨åŠ è½½çš„æ¨¡å‹å¯¹æ–‡æœ¬è¿›è¡Œç¼–ç ï¼Œè·å–åµŒå…¥å‘é‡ï¼ˆnumpyæ•°ç»„æ ¼å¼ï¼‰  </span>
Â  Â  Â  Â  embedding = self.model.encode(text)  
  
<span class="hljs-comment"># å°†numpyæ•°ç»„è½¬æ¢ä¸ºPythonåˆ—è¡¨å¹¶è¿”å›  </span>
<span class="hljs-keyword">return</span>Â embedding.tolist()  
  
<span class="hljs-comment"># å½“è„šæœ¬ä½œä¸ºä¸»ç¨‹åºè¿è¡Œæ—¶æ‰§è¡Œä»¥ä¸‹ä»£ç   </span>
<span class="hljs-keyword">if</span>Â __name__ ==Â <span class="hljs-string">"__main__"</span>:  
<span class="hljs-comment"># åˆ›å»ºSentenceEmbeddingå®ä¾‹ï¼Œä½¿ç”¨é»˜è®¤æ¨¡å‹  </span>
Â  Â  embedding = SentenceEmbedding()  
  
<span class="hljs-comment"># å®šä¹‰æµ‹è¯•æ–‡æœ¬  </span>
Â  Â  text =Â <span class="hljs-string">"è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•æ–‡æœ¬"</span>  
<span class="hljs-comment"># è·å–æ–‡æœ¬çš„åµŒå…¥å‘é‡  </span>
Â  Â  vectors = embedding.get_embedding(text)  
  
<span class="hljs-comment"># æ‰“å°åµŒå…¥å‘é‡çš„ç»´åº¦å’Œå‰10ä¸ªå…ƒç´ ï¼ŒéªŒè¯åŠŸèƒ½æ˜¯å¦æ­£å¸¸  </span>
Â  Â  <span class="hljs-built_in">print</span>(<span class="hljs-string">f"åµŒå…¥å‘é‡ç»´åº¦:Â <span class="hljs-subst">{<span class="hljs-built_in">len</span>(vectors)}</span>"</span>)  
Â  Â  <span class="hljs-built_in">print</span>(<span class="hljs-string">f"åµŒå…¥å‘é‡ç¤ºä¾‹:Â <span class="hljs-subst">{vectors[:<span class="hljs-number">10</span>]}</span>..."</span>)
</code></pre>
<p><strong>3. å‘é‡å­˜å‚¨ä¸çŸ¥è¯†åº“æ„å»º</strong></p>
<p>å®Œæˆæ–‡æ¡£åˆ‡åˆ†ä¸Embeddingæ¨¡å‹åŠ è½½åï¼Œéœ€æ„å»ºå‘é‡æ•°æ®åº“å­˜å‚¨æ–‡æ¡£ç‰‡æ®µåŠå…¶å‘é‡è¡¨ç¤ºï¼Œå¹¶è®¾è®¡æ£€ç´¢æ¨¡å—å®ç°æŸ¥è¯¢å“åº”ã€‚ä»¥ä¸‹ä»£ç æ–‡ä»¶å®ç°äº†ä¸€ä¸ªå‘é‡å­˜å‚¨ä¸çŸ¥è¯†åº“æ„å»ºç±»ï¼Œä¸»è¦åŠŸèƒ½å¦‚ä¸‹ï¼š</p>
<ul>
<li>ç®¡ç†æ–‡æ¡£åŠå…¶å¯¹åº”çš„å‘é‡ï¼šå­˜å‚¨æ–‡æœ¬æ–‡æ¡£åŠå…¶å¯¹åº”çš„å‘é‡è¡¨ç¤º</li>
<li>å‘é‡ç”Ÿæˆï¼šé€šè¿‡æ–‡æœ¬ç‰‡æ®µå‘é‡åŒ–å°†æ–‡æ¡£è½¬æ¢ä¸ºå‘é‡</li>
<li>æŒä¹…åŒ–å­˜å‚¨ï¼šå°†æ–‡æ¡£å’Œå‘é‡æ•°æ®ä¿å­˜åˆ°æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿï¼Œä¹Ÿå¯ä»æœ¬åœ°åŠ è½½</li>
<li>ç›¸ä¼¼åº¦è®¡ç®—ï¼šæä¾›å‘é‡é—´çš„ä½™å¼¦ç›¸ä¼¼åº¦è®¡ç®—åŠŸèƒ½</li>
<li>ç›¸ä¼¼æ€§æŸ¥è¯¢ï¼šæ ¹æ®è¾“å…¥çš„æŸ¥è¯¢æ–‡æœ¬ï¼Œæ‰¾åˆ°æœ€ç›¸ä¼¼çš„å‰kä¸ªæ–‡æ¡£</li>
</ul>

<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># VectorBase.py  </span>
<span class="hljs-keyword">import</span>Â os  
<span class="hljs-keyword">from</span>Â typingÂ <span class="hljs-keyword">import</span>Â <span class="hljs-type">List</span>  
<span class="hljs-keyword">import</span>Â json  
<span class="hljs-keyword">from</span>Â EmbeddingsÂ <span class="hljs-keyword">import</span>Â BaseEmbeddings  
<span class="hljs-keyword">import</span>Â numpyÂ <span class="hljs-keyword">as</span>Â np  
<span class="hljs-comment"># å¯¼å…¥è¿›åº¦æ¡åº“ï¼Œç”¨äºæ˜¾ç¤ºå¤„ç†è¿›åº¦  </span>
<span class="hljs-keyword">from</span>Â tqdmÂ <span class="hljs-keyword">import</span>Â tqdm  
  
classVectorStore:  
<span class="hljs-string">"""  
Â  Â  å‘é‡å­˜å‚¨ç±»ï¼Œç”¨äºç®¡ç†æ–‡æ¡£åŠå…¶å¯¹åº”çš„å‘é‡è¡¨ç¤º  
Â  Â  æä¾›å‘é‡è®¡ç®—ã€æŒä¹…åŒ–å­˜å‚¨ã€ç›¸ä¼¼åº¦æŸ¥è¯¢ç­‰åŠŸèƒ½  
Â  Â  """</span>  
def__init__(self, document: <span class="hljs-type">List</span>[<span class="hljs-built_in">str</span>] = [<span class="hljs-string">''</span>])Â -&gt;Â <span class="hljs-literal">None</span>:  
<span class="hljs-string">"""  
Â  Â  Â  Â  åˆå§‹åŒ–å‘é‡å­˜å‚¨å®ä¾‹  
  
Â  Â  Â  Â  å‚æ•°:  
Â  Â  Â  Â  Â  Â  document: åˆå§‹æ–‡æ¡£åˆ—è¡¨ï¼Œé»˜è®¤ä¸ºåŒ…å«ä¸€ä¸ªç©ºå­—ç¬¦ä¸²çš„åˆ—è¡¨  
Â  Â  Â  Â  """</span>  
Â  Â  Â  Â  self.document = document Â <span class="hljs-comment"># å­˜å‚¨æ–‡æ¡£å†…å®¹çš„åˆ—è¡¨  </span>
Â  Â  Â  Â  self.vectors = [] Â <span class="hljs-comment"># å­˜å‚¨æ–‡æ¡£å¯¹åº”çš„å‘é‡è¡¨ç¤º  </span>
  
defget_vector(self, EmbeddingModel: BaseEmbeddings)Â -&gt; <span class="hljs-type">List</span>[<span class="hljs-type">List</span>[<span class="hljs-built_in">float</span>]]:  
<span class="hljs-string">"""  
Â  Â  Â  Â  ä½¿ç”¨åµŒå…¥æ¨¡å‹ä¸ºæ–‡æ¡£ç”Ÿæˆå‘é‡è¡¨ç¤º  
  
Â  Â  Â  Â  å‚æ•°:  
Â  Â  Â  Â  Â  Â  EmbeddingModel: ç”¨äºç”ŸæˆåµŒå…¥å‘é‡çš„æ¨¡å‹å®ä¾‹ï¼Œéœ€ç»§æ‰¿è‡ªBaseEmbeddings  
  
Â  Â  Â  Â  è¿”å›:  
Â  Â  Â  Â  Â  Â  æ–‡æ¡£åˆ—è¡¨å¯¹åº”çš„å‘é‡åˆ—è¡¨ï¼Œæ¯ä¸ªå‘é‡æ˜¯ä¸€ä¸ªæµ®ç‚¹æ•°åˆ—è¡¨  
Â  Â  Â  Â  """</span>  
Â  Â  Â  Â  self.vectors = []  
<span class="hljs-comment"># ä½¿ç”¨tqdmæ˜¾ç¤ºå¤„ç†è¿›åº¦ï¼Œdescè®¾ç½®è¿›åº¦æ¡æè¿°  </span>
<span class="hljs-keyword">for</span>Â docÂ <span class="hljs-keyword">in</span>Â tqdm(self.document, desc=<span class="hljs-string">"Calculating embeddings"</span>):  
<span class="hljs-comment"># ä¸ºæ¯ä¸ªæ–‡æ¡£ç”ŸæˆåµŒå…¥å‘é‡å¹¶æ·»åŠ åˆ°åˆ—è¡¨  </span>
Â  Â  Â  Â  Â  Â  self.vectors.append(EmbeddingModel.get_embedding(doc))  
<span class="hljs-keyword">return</span>Â self.vectors  
  
defpersist(self, path: <span class="hljs-built_in">str</span> =Â <span class="hljs-string">'storage'</span>):  
<span class="hljs-string">"""  
Â  Â  Â  Â  å°†æ–‡æ¡£å’Œå‘é‡æ•°æ®æŒä¹…åŒ–å­˜å‚¨åˆ°æ–‡ä»¶ç³»ç»Ÿ  
  
Â  Â  Â  Â  å‚æ•°:  
Â  Â  Â  Â  Â  Â  path: å­˜å‚¨ç›®å½•è·¯å¾„ï¼Œé»˜è®¤ä¸º'storage'  
Â  Â  Â  Â  """</span>  
<span class="hljs-comment"># å¦‚æœç›®å½•ä¸å­˜åœ¨åˆ™åˆ›å»º  </span>
ifnotÂ os.path.exists(path):  
Â  Â  Â  Â  Â  Â  os.makedirs(path)  
<span class="hljs-comment"># ä¿å­˜æ–‡æ¡£å†…å®¹åˆ°JSONæ–‡ä»¶  </span>
<span class="hljs-keyword">with</span>Â <span class="hljs-built_in">open</span>(<span class="hljs-string">f"<span class="hljs-subst">{path}</span>/doecment.json"</span>,Â <span class="hljs-string">'w'</span>, encoding=<span class="hljs-string">'utf-8'</span>)Â <span class="hljs-keyword">as</span>Â f:  
Â  Â  Â  Â  Â  Â  json.dump(self.document, f, ensure_ascii=<span class="hljs-literal">False</span>)  
<span class="hljs-comment"># å¦‚æœå­˜åœ¨å‘é‡æ•°æ®ï¼Œåˆ™ä¿å­˜å‘é‡åˆ°JSONæ–‡ä»¶  </span>
<span class="hljs-keyword">if</span>Â self.vectors:  
<span class="hljs-keyword">with</span>Â <span class="hljs-built_in">open</span>(<span class="hljs-string">f"<span class="hljs-subst">{path}</span>/vectors.json"</span>,Â <span class="hljs-string">'w'</span>, encoding=<span class="hljs-string">'utf-8'</span>)Â <span class="hljs-keyword">as</span>Â f:  
Â  Â  Â  Â  Â  Â  Â  Â  json.dump(self.vectors, f)  
  
defload_vector(self, path: <span class="hljs-built_in">str</span> =Â <span class="hljs-string">'storage'</span>):  
<span class="hljs-string">"""  
Â  Â  Â  Â  ä»æ–‡ä»¶ç³»ç»ŸåŠ è½½å·²æŒä¹…åŒ–çš„æ–‡æ¡£å’Œå‘é‡æ•°æ®  
  
Â  Â  Â  Â  å‚æ•°:  
Â  Â  Â  Â  Â  Â  path: å­˜å‚¨ç›®å½•è·¯å¾„ï¼Œé»˜è®¤ä¸º'storage'  
Â  Â  Â  Â  """</span>  
<span class="hljs-comment"># åŠ è½½å‘é‡æ•°æ®  </span>
<span class="hljs-keyword">with</span>Â <span class="hljs-built_in">open</span>(<span class="hljs-string">f"<span class="hljs-subst">{path}</span>/vectors.json"</span>,Â <span class="hljs-string">'r'</span>, encoding=<span class="hljs-string">'utf-8'</span>)Â <span class="hljs-keyword">as</span>Â f:  
Â  Â  Â  Â  Â  Â  self.vectors = json.load(f)  
<span class="hljs-comment"># åŠ è½½æ–‡æ¡£å†…å®¹  </span>
<span class="hljs-keyword">with</span>Â <span class="hljs-built_in">open</span>(<span class="hljs-string">f"<span class="hljs-subst">{path}</span>/doecment.json"</span>,Â <span class="hljs-string">'r'</span>, encoding=<span class="hljs-string">'utf-8'</span>)Â <span class="hljs-keyword">as</span>Â f:  
Â  Â  Â  Â  Â  Â  self.document = json.load(f)  
  
defget_similarity(self, vector1: <span class="hljs-type">List</span>[<span class="hljs-built_in">float</span>], vector2: <span class="hljs-type">List</span>[<span class="hljs-built_in">float</span>])Â -&gt; <span class="hljs-built_in">float</span>:  
<span class="hljs-string">"""  
Â  Â  Â  Â  è®¡ç®—ä¸¤ä¸ªå‘é‡ä¹‹é—´çš„ä½™å¼¦ç›¸ä¼¼åº¦  
  
Â  Â  Â  Â  å‚æ•°:  
Â  Â  Â  Â  Â  Â  vector1: ç¬¬ä¸€ä¸ªå‘é‡  
Â  Â  Â  Â  Â  Â  vector2: ç¬¬äºŒä¸ªå‘é‡  
  
Â  Â  Â  Â  è¿”å›:  
Â  Â  Â  Â  Â  Â  ä¸¤ä¸ªå‘é‡çš„ä½™å¼¦ç›¸ä¼¼åº¦ï¼Œå€¼è¶Šæ¥è¿‘1è¡¨ç¤ºè¶Šç›¸ä¼¼  
Â  Â  Â  Â  """</span>  
<span class="hljs-keyword">return</span>Â BaseEmbeddings.cosine_similarity(vector1, vector2)  
  
defquery(self, query: <span class="hljs-built_in">str</span>, EmbeddingModel: BaseEmbeddings, k: <span class="hljs-built_in">int</span> =Â <span class="hljs-number">1</span>)Â -&gt; <span class="hljs-type">List</span>[<span class="hljs-built_in">str</span>]:  
<span class="hljs-string">"""  
Â  Â  Â  Â  æ ¹æ®æŸ¥è¯¢æ–‡æœ¬ï¼Œè¿”å›æœ€ç›¸ä¼¼çš„kä¸ªæ–‡æ¡£  
  
Â  Â  Â  Â  å‚æ•°:  
Â  Â  Â  Â  Â  Â  query: æŸ¥è¯¢æ–‡æœ¬  
Â  Â  Â  Â  Â  Â  EmbeddingModel: ç”¨äºç”ŸæˆåµŒå…¥å‘é‡çš„æ¨¡å‹å®ä¾‹  
Â  Â  Â  Â  Â  Â  k: è¿”å›çš„ç›¸ä¼¼æ–‡æ¡£æ•°é‡ï¼Œé»˜è®¤ä¸º1  
  
Â  Â  Â  Â  è¿”å›:  
Â  Â  Â  Â  Â  Â  ä¸æŸ¥è¯¢æ–‡æœ¬æœ€ç›¸ä¼¼çš„kä¸ªæ–‡æ¡£åˆ—è¡¨  
Â  Â  Â  Â  """</span>  
<span class="hljs-comment"># ç”ŸæˆæŸ¥è¯¢æ–‡æœ¬çš„å‘é‡è¡¨ç¤º  </span>
Â  Â  Â  Â  query_vector = EmbeddingModel.get_embedding(query)  
<span class="hljs-comment"># è®¡ç®—æŸ¥è¯¢å‘é‡ä¸æ‰€æœ‰æ–‡æ¡£å‘é‡çš„ç›¸ä¼¼åº¦  </span>
Â  Â  Â  Â  result = np.array([self.get_similarity(query_vector, vector)  
<span class="hljs-keyword">for</span>Â vectorÂ <span class="hljs-keyword">in</span>Â self.vectors])  
<span class="hljs-comment"># å¯¹ç›¸ä¼¼åº¦æ’åºï¼Œå–å‰kä¸ªæœ€ç›¸ä¼¼çš„æ–‡æ¡£å¹¶è¿”å›  </span>
<span class="hljs-comment"># argsort()[-k:][::-1] ç”¨äºè·å–ç›¸ä¼¼åº¦æœ€é«˜çš„kä¸ªæ–‡æ¡£çš„ç´¢å¼•  </span>
<span class="hljs-keyword">return</span>Â np.array(self.document)[result.argsort()[-k:][::-<span class="hljs-number">1</span>]].tolist()
</code></pre>
<p><strong>4. ç”Ÿæˆå›ç­”</strong></p>
<p>è¿™æ®µä»£ç å®ç°äº†åŸºäºDeepSeekæ¨¡å‹çš„RAGé—®ç­”åŠ©æ‰‹ï¼Œå¯ç»“åˆä¸Šä¸‹æ–‡æŒ‰è§„åˆ™ç”Ÿæˆå›ç­”ï¼ŒåŒ…å«æ¨¡å‹åŠ è½½ä¸å¯¹è¯ç¤ºä¾‹ã€‚ä¸ºä¾¿äºæ‰©å±•ï¼Œå®šä¹‰äº†å«chatå’Œoad_modelæ³•çš„åŸºç±»BaseModelï¼Œæœ¬åœ°å¼€æºæ¨¡å‹éœ€å®ç°load_modelæ–¹æ³•ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># LLM.py  </span>
<span class="hljs-keyword">from</span>Â typingÂ <span class="hljs-keyword">import</span>Â <span class="hljs-type">List</span>  
<span class="hljs-keyword">from</span>Â unslothÂ <span class="hljs-keyword">import</span>Â FastLanguageModel  
<span class="hljs-comment"># torch2.5ç‰ˆæœ¬ä»¥ä¸‹é˜²æ­¢unslothåŠ è½½å‡ºé—®é¢˜  </span>
<span class="hljs-keyword">from</span>Â transformersÂ <span class="hljs-keyword">import</span>Â modeling_utils  
ifnotÂ <span class="hljs-built_in">hasattr</span>(modeling_utils,Â <span class="hljs-string">"ALL_PARALLEL_STYLES"</span>)Â <span class="hljs-keyword">or</span>Â modeling_utils.ALL_PARALLEL_STYLESÂ isNone:  
Â  Â  modeling_utils.ALL_PARALLEL_STYLES = [<span class="hljs-string">"tp"</span>,Â <span class="hljs-string">"none"</span>,<span class="hljs-string">"colwise"</span>,<span class="hljs-string">'rowwise'</span>]  
  
<span class="hljs-keyword">from</span>Â dotenvÂ <span class="hljs-keyword">import</span>Â load_dotenv, find_dotenv  
_ = load_dotenv(find_dotenv())  
  
RAG_PROMPT_TEMPLATE=<span class="hljs-string">"""  
  
# ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„RAGå›ç­”åŠ©æ‰‹  
  
## å¯å‚è€ƒçš„ä¸Šä¸‹æ–‡ï¼š  
  
{context}  
  
## è¯·ä¸¥æ ¼æŒ‰ä»¥ä¸‹è§„åˆ™å›ç­”ï¼š  
  
1. å¿…é¡»ä¼˜å…ˆä½¿ç”¨ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œç¦æ­¢ä¸»åŠ¨å¼•å…¥å¤–éƒ¨çŸ¥è¯†  
2. å¿…é¡»å¯¹é—®é¢˜å’Œä¸Šä¸‹æ–‡è¿›è¡Œç†è§£ï¼Œè€Œä¸ä»…ä»…æ˜¯å‡­å€Ÿå­—é¢æ„æ€å›ç­”ã€‚åœ¨æä¾›çš„ä¸Šä¸‹æ–‡ä¸­ï¼Œä»”ç»†æŸ¥æ‰¾ä¸é—®é¢˜æ ¸å¿ƒç›´æ¥ç›¸å…³çš„è¯­å¥ã€‚åŒæ—¶ï¼Œæ³¨æ„æŸ¥æ‰¾èƒ½æ”¯æŒæ¨ç†å‡ºç­”æ¡ˆçš„ä¿¡æ¯ï¼ˆä¾‹å¦‚ï¼šå› æœå…³ç³»ã€å®šä¹‰ã€å±æ€§æè¿°ã€æ—¶é—´é¡ºåºã€æ¯”è¾ƒå…³ç³»ç­‰ï¼‰  
3. å›ç­”é€»è¾‘ï¼š  
Â  Â - è‹¥ä¸Šä¸‹æ–‡ç›´æ¥åŒ…å«é—®é¢˜ç­”æ¡ˆï¼šè¾“å‡ºç­”æ¡ˆå¹¶å¼•ç”¨åŸæ–‡  
Â  Â - è‹¥ä¸Šä¸‹æ–‡å¦å®šé—®é¢˜é™ˆè¿°ï¼šå›ç­”"ä¸å¯¹"å¹¶å¼•ç”¨åŸæ–‡  
Â  Â - è‹¥ä¸èƒ½é€šè¿‡ä¸Šä¸‹æ–‡å›ç­”é—®é¢˜ï¼š å›ç­”"ä¸Šä¸‹æ–‡æœªæä¾›ç›¸å…³ä¿¡æ¯"  
Â  Â - æ³¨æ„ä»£è¯ï¼ˆå®ƒã€ä»–ã€ä»–ä»¬ã€è¿™ä¸ªã€é‚£ä¸ªï¼‰åœ¨ä¸Šä¸‹æ–‡ä¸­çš„å…·ä½“æŒ‡ä»£å¯¹è±¡  
4. è¾“å‡ºæ ¼å¼ï¼š  
Â  Â - ä»…ç”¨ä¸­æ–‡å›ç­”  
Â  Â - ç­”æ¡ˆåº”ç®€æ´ç›´æ¥ï¼Œèšç„¦äºå›ç­”é—®é¢˜æœ¬èº«  
Â  Â - ç¦æ­¢ä¸»è§‚è§£é‡Š  
Â  Â - å¿…é¡»æ ‡æ³¨å¼•ç”¨ä½ç½®ï¼ˆä¾‹ï¼šæ®ä¸Šä¸‹æ–‡ç¬¬Xæ®µï¼‰  
"""</span>  
  
classBaseModel:  
def__init__(self, model_name)Â -&gt;Â <span class="hljs-literal">None</span>:  
Â  Â  Â  Â  self.model_name = model_name  
  
defchat(self, prompt, history, content)Â -&gt; <span class="hljs-built_in">str</span>:  
<span class="hljs-keyword">pass</span>  
  
defload_model(self):  
<span class="hljs-keyword">pass</span>  
  
classDeepSeekChat(BaseModel):  
def__init__(self, model_name: <span class="hljs-built_in">str</span> =Â <span class="hljs-string">"deepseek-ai/DeepSeek-R1-Distill-Qwen-1.5B"</span>)Â -&gt;Â <span class="hljs-literal">None</span>:  
Â  Â  Â  Â  <span class="hljs-built_in">super</span>().__init__(model_name)  
Â  Â  Â  Â  self.model, self.tokenizer = self.load_model()  
Â  Â  Â  Â  self.max_length =Â <span class="hljs-number">2048</span>  
Â  Â  Â  Â  self.temperature =Â <span class="hljs-number">0.1</span>  
  
defload_model(self):  
<span class="hljs-keyword">try</span>:  
<span class="hljs-comment"># åŸå§‹æ¨¡å‹åœ°å€ï¼šhttps://huggingface.co/unsloth/DeepSeek-R1-Distill-Qwen-1.5B  </span>
<span class="hljs-comment"># 1. åˆ©ç”¨modelscopeåº“ä¸‹è½½æ¨¡å‹åˆ°æœ¬åœ°ï¼Œç„¶åé€šè¿‡unslothåŠ è½½æ¨¡å‹  </span>
<span class="hljs-keyword">from</span>Â modelscopeÂ <span class="hljs-keyword">import</span>Â snapshot_download  
<span class="hljs-comment"># åŠ è½½é¢„è®­ç»ƒæ¨¡å‹ ,åˆ©ç”¨modelscopeåº“  </span>
Â  Â  Â  Â  Â  Â  model_name = self.model_name Â <span class="hljs-comment"># å‡è®¾è¿™æ˜¯æ”¯æŒåˆ†è¯çš„æ¨¡å‹åç§°  </span>
<span class="hljs-comment"># ä¸‹è½½æ¨¡å‹  </span>
Â  Â  Â  Â  Â  Â  model_dir = snapshot_download(model_name)  
  
<span class="hljs-comment"># ä»huggingfaceçš„é•œåƒhttps://hf-mirror.com/ä¸­ä¸‹è½½æ¨¡å‹åˆ°æœ¬åœ°  </span>
<span class="hljs-comment"># model_dir= "./DeepSeek-R1-Distill-Qwen-1.5B"  </span>
  
<span class="hljs-comment"># è®¾ç½®æœ€å¤§åºåˆ—é•¿åº¦ï¼Œè¡¨ç¤ºæ¨¡å‹åœ¨ä¸€æ¬¡å‰å‘ä¼ é€’ä¸­å¯ä»¥å¤„ç†çš„æœ€å¤§ä»¤ç‰Œæ•°é‡ã€‚  </span>
Â  Â  Â  Â  Â  Â  max_seq_length =Â <span class="hljs-number">2048</span>  
  
<span class="hljs-comment"># https://hf-mirror.com/  </span>
<span class="hljs-comment"># è°ƒç”¨FastLanguageModel.from_pretrained()æ–¹æ³•åŠ è½½é¢„è®­ç»ƒçš„æ¨¡å‹å’Œå¯¹åº”çš„Tokenizerï¼ˆåˆ†è¯å™¨ï¼‰ã€‚  </span>
Â  Â  Â  Â  Â  Â  model, tokenizer = FastLanguageModel.from_pretrained(  
Â  Â  Â  Â  Â  Â  Â  Â  model_name = model_dir,Â <span class="hljs-comment"># ä»hfä¸­ç›´æ¥è°ƒç”¨ï¼šmodel_name = unsloth/DeepSeek-R1-Distill-Qwen-1.5B  </span>
Â  Â  Â  Â  Â  Â  Â  Â  max_seq_length = max_seq_length, Â <span class="hljs-comment"># æœ€å¤§åºåˆ—é•¿åº¦ï¼Œè¡¨ç¤ºæ¨¡å‹åœ¨ä¸€æ¬¡å‰å‘ä¼ é€’ä¸­å¯ä»¥å¤„ç†çš„æœ€å¤§ä»¤ç‰Œæ•°é‡ã€‚  </span>
Â  Â  Â  Â  Â  Â  Â  Â  dtype =Â <span class="hljs-literal">None</span>, Â  Â  Â  Â  Â Â <span class="hljs-comment"># è‡ªåŠ¨æ£€æµ‹ï¼ˆBF16æˆ–FP16ï¼‰ã€‚BF16èŒƒå›´å¤§ï¼ŒFP16ç²¾åº¦é«˜  </span>
Â  Â  Â  Â  Â  Â  Â  Â  local_files_only=<span class="hljs-literal">True</span><span class="hljs-comment"># åªç”¨æœ¬åœ°æ–‡ä»¶  </span>
Â  Â  Â  Â  Â  Â  )  
<span class="hljs-keyword">except</span>Â ExceptionÂ <span class="hljs-keyword">as</span>Â e:  
<span class="hljs-keyword">raise</span>Â RuntimeError(<span class="hljs-string">f"åŠ è½½ DeepSeek æ¨¡å‹å¤±è´¥"</span>)  
<span class="hljs-keyword">return</span>Â model, tokenizer  
  
defchat(self, prompt: <span class="hljs-built_in">str</span>, history: <span class="hljs-type">List</span>[<span class="hljs-built_in">dict</span>], content: <span class="hljs-type">List</span>[<span class="hljs-built_in">str</span>])Â -&gt; <span class="hljs-built_in">str</span>:  
<span class="hljs-comment"># æ„å»ºä¸Šä¸‹æ–‡ï¼ˆä¼˜åŒ–æ ¼å¼ï¼‰  </span>
Â  Â  Â  Â  formatted_context =Â <span class="hljs-string">"\n"</span>.join(  
Â  Â  Â  Â  Â  Â  [<span class="hljs-string">f"ã€ä¸Šä¸‹æ–‡ç¬¬<span class="hljs-subst">{idx}</span>æ®µã€‘<span class="hljs-subst">{text}</span>"</span>  
<span class="hljs-keyword">for</span>Â idx, textÂ <span class="hljs-keyword">in</span>Â <span class="hljs-built_in">enumerate</span>(content,Â <span class="hljs-number">1</span>)Â <span class="hljs-keyword">if</span>Â text.strip()]  
Â  Â  Â  Â  )  
  
<span class="hljs-comment"># æ„å»ºç³»ç»Ÿæç¤º  </span>
Â  Â  Â  Â  system_prompt = RAG_PROMPT_TEMPLATE.<span class="hljs-built_in">format</span>(context=formatted_context.strip())  
  
<span class="hljs-comment"># æ„å»ºå®Œæ•´æ¶ˆæ¯é˜Ÿåˆ—  </span>
Â  Â  Â  Â  messages = []  
  
<span class="hljs-comment"># 1. æ·»åŠ å½“å‰ç³»ç»Ÿæç¤º  </span>
Â  Â  Â  Â  messages.append({<span class="hljs-string">"role"</span>:Â <span class="hljs-string">"system"</span>,Â <span class="hljs-string">"content"</span>: system_prompt})  
  
<span class="hljs-comment"># 2. æ·»åŠ å†å²å¯¹è¯ï¼ˆè¿‡æ»¤æ—§ç³»ç»Ÿæ¶ˆæ¯ï¼‰  </span>
<span class="hljs-keyword">for</span>Â msgÂ <span class="hljs-keyword">in</span>Â history:  
<span class="hljs-keyword">if</span>Â msg[<span class="hljs-string">"role"</span>] !=Â <span class="hljs-string">"system"</span>: Â <span class="hljs-comment"># è¿‡æ»¤å†å²ä¸­çš„ç³»ç»Ÿæ¶ˆæ¯  </span>
Â  Â  Â  Â  Â  Â  Â  Â  messages.append(msg)  
  
<span class="hljs-comment"># 3. æ·»åŠ å½“å‰ç”¨æˆ·é—®é¢˜  </span>
Â  Â  Â  Â  messages.append({<span class="hljs-string">"role"</span>:Â <span class="hljs-string">"user"</span>,Â <span class="hljs-string">"content"</span>: prompt})  
  
<span class="hljs-comment"># åº”ç”¨å¯¹è¯æ¨¡æ¿ï¼Œæ·»åŠ ç”Ÿæˆå¼•å¯¼ç¬¦  </span>
Â  Â  Â  Â  inputs = self.tokenizer.apply_chat_template(  
Â  Â  Â  Â  Â  Â  messages,  
Â  Â  Â  Â  Â  Â  tokenize=<span class="hljs-literal">False</span>,  
Â  Â  Â  Â  Â  Â  add_generation_prompt=<span class="hljs-literal">True</span>  
Â  Â  Â  Â  )  
Â  Â  Â  Â  inputs = self.tokenizer(inputs, return_tensors=<span class="hljs-string">"pt"</span>, padding=<span class="hljs-literal">True</span>, truncation=<span class="hljs-literal">True</span>).to(<span class="hljs-string">"cuda"</span>)  
Â  Â  Â  Â  input_length = inputs[<span class="hljs-string">"input_ids"</span>].shape[<span class="hljs-number">1</span>] Â <span class="hljs-comment"># è®°å½•è¾“å…¥é•¿åº¦ç”¨äºæˆªå–ç”Ÿæˆå†…å®¹  </span>
  
Â  Â  Â  Â  outputs = self.model.generate(  
Â  Â  Â  Â  Â  Â  **inputs,  
Â  Â  Â  Â  Â  Â  max_new_tokens=self.max_length,  
Â  Â  Â  Â  Â  Â  temperature=self.temperature,  
Â  Â  Â  Â  Â  Â  pad_token_id=self.tokenizer.eos_token_id Â  Â  Â Â   
Â  Â  Â  Â  Â  Â  )  
  
<span class="hljs-comment"># åªè¿”å›æ–°ç”Ÿæˆçš„æ–‡æœ¬ï¼ˆå»æ‰è¾“å…¥æç¤ºï¼‰  </span>
Â  Â  Â  Â  generated_tokens = outputs[<span class="hljs-number">0</span>][input_length:] Â <span class="hljs-comment"># ç›´æ¥æˆªå–ç”Ÿæˆçš„token  </span>
Â  Â  Â  Â  response = self.tokenizer.decode(generated_tokens, skip_special_tokens=<span class="hljs-literal">True</span>).strip()  
  
<span class="hljs-keyword">return</span>Â response  
  
<span class="hljs-comment"># ç¤ºä¾‹ï¼šä½¿ç”¨ DeepSeekChat è¿›è¡Œå¯¹è¯  </span>
defmain():  
<span class="hljs-comment"># åˆå§‹åŒ–æ¨¡å‹  </span>
Â  Â  <span class="hljs-built_in">print</span>(<span class="hljs-string">"æ­£åœ¨åŠ è½½ DeepSeek æ¨¡å‹..."</span>)  
Â  Â  chat_model = DeepSeekChat() Â <span class="hljs-comment"># ä¹Ÿå¯ä»¥å°è¯•å…¶ä»– DeepSeek æ¨¡å‹  </span>
  
<span class="hljs-comment"># ç¤ºä¾‹ä¸Šä¸‹æ–‡ï¼Œå†…å®¹ä¸ºå‡æ•°æ®  </span>
Â  Â  context = [<span class="hljs-string">"""  
Â  Â  DeepSeek æ˜¯æ·±åº¦æ±‚ç´¢å…¬å¸å¼€å‘çš„å¤§è¯­è¨€æ¨¡å‹ã€‚  
Â  Â  å½“å‰æœ€æ–°ç‰ˆæœ¬æ˜¯ DeepSeek-V3ï¼ŒçŸ¥è¯†æˆªæ­¢æ—¥æœŸä¸º2024å¹´7æœˆã€‚  
Â  Â  è¯¥æ¨¡å‹æ”¯æŒæœ€å¤§128Kä¸Šä¸‹æ–‡é•¿åº¦ï¼Œæ“…é•¿ä¸­æ–‡å’Œè‹±æ–‡ä»»åŠ¡ã€‚  
Â  Â  """</span>]  
  
<span class="hljs-comment"># ç¤ºä¾‹å¯¹è¯å†å²  </span>
Â  Â  history = [  
Â  Â  Â  Â  {<span class="hljs-string">"role"</span>:Â <span class="hljs-string">"system"</span>,Â <span class="hljs-string">"content"</span>:Â <span class="hljs-string">"ä½ æ˜¯ä¸€ä¸ªä¹äºåŠ©äººçš„AIåŠ©æ‰‹ã€‚"</span>},  
Â  Â  Â  Â  {<span class="hljs-string">"role"</span>:Â <span class="hljs-string">"user"</span>,Â <span class="hljs-string">"content"</span>:Â <span class="hljs-string">"ä½ å¥½ï¼Œè¯·ä»‹ç»ä¸€ä¸‹ä½ è‡ªå·±"</span>},  
Â  Â  Â  Â  {<span class="hljs-string">"role"</span>:Â <span class="hljs-string">"assistant"</span>,Â <span class="hljs-string">"content"</span>:Â <span class="hljs-string">"æˆ‘æ˜¯åŸºäºDeepSeekæ¨¡å‹æ„å»ºçš„AIåŠ©æ‰‹ï¼Œå¾ˆé«˜å…´ä¸ºæ‚¨æœåŠ¡ã€‚"</span>}  
Â  Â  ]  
  
<span class="hljs-comment"># ç¬¬ä¸€ä¸ªé—®é¢˜  </span>
Â  Â  question1 =Â <span class="hljs-string">"DeepSeekæ¨¡å‹æœ€æ–°ç‰ˆæœ¬çš„çŸ¥è¯†æˆªæ­¢æ—¥æœŸæ˜¯ä»€ä¹ˆï¼Ÿ"</span>  
Â  Â  <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\nç”¨æˆ·æé—®:Â <span class="hljs-subst">{question1}</span>"</span>)  
Â  Â  response1 = chat_model.chat(question1, history, context)  
Â  Â  <span class="hljs-built_in">print</span>(<span class="hljs-string">f"AIå›ç­”:Â <span class="hljs-subst">{response1}</span>"</span>)  
  
<span class="hljs-comment"># å°†å›ç­”æ·»åŠ åˆ°å†å²è®°å½•ä¸­  </span>
Â  Â  history.append({<span class="hljs-string">"role"</span>:Â <span class="hljs-string">"user"</span>,Â <span class="hljs-string">"content"</span>: question1})  
Â  Â  history.append({<span class="hljs-string">"role"</span>:Â <span class="hljs-string">"assistant"</span>,Â <span class="hljs-string">"content"</span>: response1})  
  
<span class="hljs-comment"># ç¬¬äºŒä¸ªé—®é¢˜ï¼ˆæµ‹è¯•å†å²å¯¹è¯+ä¸Šä¸‹æ–‡ï¼‰  </span>
Â  Â  question2 =Â <span class="hljs-string">"å®ƒæ”¯æŒæœ€å¤§çš„ä¸Šä¸‹æ–‡é•¿åº¦æ˜¯å¤šå°‘ï¼Ÿ"</span><span class="hljs-comment"># "å®ƒ"æŒ‡ä»£å†å²å¯¹è¯ä¸­çš„DeepSeekæ¨¡å‹  </span>
Â  Â  <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\nç”¨æˆ·æé—®:Â <span class="hljs-subst">{question2}</span>"</span>)  
Â  Â  response2 = chat_model.chat(question2, history, context)  
Â  Â  <span class="hljs-built_in">print</span>(<span class="hljs-string">f"AIå›ç­”:Â <span class="hljs-subst">{response2}</span>"</span>)  
  
<span class="hljs-keyword">if</span>Â __name__ ==Â <span class="hljs-string">"__main__"</span>:  
Â  Â  main()
</code></pre>
<p><strong>5. è°ƒç”¨ä»£ç </strong></p>
<p>ä»¥ä¸‹ä»£ç å®ç°äº†ä¸€ä¸ªç®€å•RAGç³»ç»Ÿçš„è°ƒç”¨æµç¨‹ï¼šç”Ÿæˆæµ‹è¯•æ–‡ä»¶åï¼Œæ™ºèƒ½åŠ è½½æˆ–æ–°å»ºå‘é‡æ•°æ®åº“ï¼Œå†é€šè¿‡DeepSeekæ¨¡å‹ç»“åˆæ£€ç´¢åˆ°çš„ç›¸å…³ä¸Šä¸‹æ–‡ä¸å¯¹è¯å†å²ï¼Œä¾æ¬¡å¤„ç†é¢„è®¾é—®é¢˜å¹¶ç”Ÿæˆå›ç­”ï¼Œæ ¸å¿ƒæ˜¯å€ŸåŠ©å‘é‡æ£€ç´¢æå‡å›ç­”å‡†ç¡®æ€§ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># main.py  </span>
<span class="hljs-keyword">import</span>Â os  
<span class="hljs-keyword">from</span>Â GenerateÂ <span class="hljs-keyword">import</span>Â generate_rag_test_files  
<span class="hljs-keyword">from</span>Â VectorBaseÂ <span class="hljs-keyword">import</span>Â VectorStore  
<span class="hljs-keyword">from</span>Â UtilsÂ <span class="hljs-keyword">import</span>Â ReadFiles  
<span class="hljs-keyword">from</span>Â LLMÂ <span class="hljs-keyword">import</span>Â DeepSeekChat  
<span class="hljs-keyword">from</span>Â EmbeddingsÂ <span class="hljs-keyword">import</span>Â SentenceEmbedding  
  
defmain():  
<span class="hljs-comment"># ç”Ÿæˆæµ‹è¯•æ–‡ä»¶  </span>
Â  Â  folder_name = generate_rag_test_files()  
  
<span class="hljs-comment"># å‘é‡å­˜å‚¨è·¯å¾„  </span>
Â  Â  vector_path =Â <span class="hljs-string">'storage'</span>  
  
<span class="hljs-comment"># åˆå§‹åŒ–åµŒå…¥æ¨¡å‹  </span>
Â  Â  embedding = SentenceEmbedding()  
  
<span class="hljs-comment"># æ™ºèƒ½åŠ è½½å‘é‡å­˜å‚¨ï¼šå­˜åœ¨åˆ™åŠ è½½ï¼Œå¦åˆ™ç”Ÿæˆå¹¶æŒä¹…åŒ–  </span>
<span class="hljs-keyword">if</span>Â os.path.exists(vector_path):  
Â  Â  Â  Â  <span class="hljs-built_in">print</span>(<span class="hljs-string">"åŠ è½½æœ¬åœ°å‘é‡æ•°æ®åº“..."</span>)  
Â  Â  Â  Â  vector = VectorStore([]) Â <span class="hljs-comment"># ç©ºæ–‡æ¡£åˆå§‹åŒ–ï¼Œåç»­åŠ è½½æœ¬åœ°æ•°æ®  </span>
Â  Â  Â  Â  vector.load_vector(vector_path)  
<span class="hljs-keyword">else</span>:  
Â  Â  Â  Â  <span class="hljs-built_in">print</span>(<span class="hljs-string">"ç”Ÿæˆæ–°çš„å‘é‡æ•°æ®åº“..."</span>)  
<span class="hljs-comment"># è¯»å–å¹¶åˆ†å‰²æ–‡æ¡£  </span>
Â  Â  Â  Â  docs = ReadFiles(folder_name).get_content(max_token_len=<span class="hljs-number">600</span>, cover_content=<span class="hljs-number">150</span>)  
Â  Â  Â  Â  vector = VectorStore(docs)  
<span class="hljs-comment"># ç”Ÿæˆå¹¶æŒä¹…åŒ–å‘é‡  </span>
Â  Â  Â  Â  vector.get_vector(EmbeddingModel=embedding)  
Â  Â  Â  Â  vector.persist(path=vector_path)  
  
<span class="hljs-comment"># åˆå§‹åŒ–å¯¹è¯æ¨¡å‹  </span>
Â  Â  chat = DeepSeekChat()  
  
<span class="hljs-comment"># åˆå§‹åŒ–å¯¹è¯å†å²  </span>
Â  Â  chat_history = []  
  
<span class="hljs-comment"># å¾…å¤„ç†çš„é—®é¢˜åˆ—è¡¨  </span>
Â  Â  questions = [  
<span class="hljs-string">"HelloWorldå…¬å¸ä¸‰çº¿åŸå¸‚ä½å®¿ä¸Šé™æ˜¯å¤šå°‘ï¼Ÿ"</span>,  
<span class="hljs-string">"HelloWorldå…¬å¸å·®æ—…æŠ¥é”€åœ¨å‡ºå·®ç»“æŸå20å¤©æäº¤ï¼Œæœ‰ä»€ä¹ˆåæœï¼Ÿ"</span>,  
<span class="hljs-comment"># "CleanAir X5ç©ºæ°”å‡€åŒ–å™¨è‹¥å‡€åŒ–æ•ˆæœä¸‹é™ï¼Œæ€ä¹ˆè§£å†³ï¼Ÿ",  </span>
<span class="hljs-comment"># "åœ°çƒè‡ªè½¬å‘¨æœŸæ˜¯48å°æ—¶å—ï¼Ÿ",  </span>
<span class="hljs-comment"># "å¤ªé˜³ç³»è¡Œæ˜Ÿè·ç¦»å¤ªé˜³ç¬¬å››è¿‘çš„æ˜¯å“ªä¸ªï¼Ÿ"  </span>
Â  Â  ]  
  
<span class="hljs-comment"># ä¾æ¬¡å¤„ç†æ¯ä¸ªé—®é¢˜ï¼Œç»´æŠ¤å¯¹è¯å†å²  </span>
<span class="hljs-keyword">for</span>Â idx, questionÂ <span class="hljs-keyword">in</span>Â <span class="hljs-built_in">enumerate</span>(questions,Â <span class="hljs-number">1</span>):  
Â  Â  Â  Â  <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\n===== é—®é¢˜Â <span class="hljs-subst">{idx}</span>Â ====="</span>)  
Â  Â  Â  Â  <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ç”¨æˆ·:Â <span class="hljs-subst">{question}</span>"</span>)  
  
<span class="hljs-comment"># æ£€ç´¢ç›¸å…³ä¸Šä¸‹æ–‡  </span>
Â  Â  Â  Â  content = vector.query(question, EmbeddingModel=embedding, k=<span class="hljs-number">2</span>)  
  
<span class="hljs-comment"># è°ƒç”¨æ¨¡å‹ç”Ÿæˆå›ç­”ï¼ˆä¼ å…¥å†å²è®°å½•ï¼‰  </span>
Â  Â  Â  Â  response = chat.chat(question, chat_history, content)  
Â  Â  Â  Â  <span class="hljs-built_in">print</span>(<span class="hljs-string">f"AI:Â <span class="hljs-subst">{response}</span>"</span>)  
  
<span class="hljs-comment"># æ›´æ–°å¯¹è¯å†å²  </span>
Â  Â  Â  Â  chat_history.append({<span class="hljs-string">"role"</span>:Â <span class="hljs-string">"user"</span>,Â <span class="hljs-string">"content"</span>: question})  
Â  Â  Â  Â  chat_history.append({<span class="hljs-string">"role"</span>:Â <span class="hljs-string">"assistant"</span>,Â <span class="hljs-string">"content"</span>: response})  
  
<span class="hljs-keyword">if</span>Â __name__ ==Â <span class="hljs-string">"__main__"</span>:  
Â  Â  main()
</code></pre>
<h3 data-id="heading-14">3.2 ä¸»æµå¼€æºRAGæ¡†æ¶æ¦‚è§ˆ</h3>
<p>å‰æ–‡ä»‹ç»çš„è‡ªå»ºRAGç³»ç»Ÿæ›´é€‚ç”¨äºå­¦ä¹ ä¸æ¼”ç¤ºåœºæ™¯ï¼›è€Œåœ¨å®é™…å¼€å‘è¿‡ç¨‹ä¸­ï¼ŒåŸºäºæˆç†Ÿçš„å¼€æºæ¡†æ¶æ­å»ºRAGç³»ç»Ÿåˆ™æ˜¯æ›´ä¼˜é€‰æ‹©ã€‚ä»¥ä¸‹ä¸ºå½“å‰ä¸»æµçš„15ä¸ªå¼€æºRAGæ¡†æ¶æ’ååŠæ ¸å¿ƒç‰¹æ€§è§£æï¼š</p>





















































































































































<table><thead><tr><th>æ’å</th><th>æ¡†æ¶</th><th>æ ¸å¿ƒèšç„¦</th><th>æœ€ä½³é€‚ç”¨åœºæ™¯</th><th>æ ¸å¿ƒåŠŸèƒ½</th><th>éƒ¨ç½²å¤æ‚åº¦</th><th>GitHubæ˜Ÿæ ‡æ•°</th></tr></thead><tbody><tr><td>1</td><td>LangChain</td><td>ç»„ä»¶é“¾åˆ</td><td>é€šç”¨RAGåº”ç”¨</td><td>æ•°æ®è¿æ¥ã€æ¨¡å‹çµæ´»æ€§</td><td>ä¸­</td><td>105k</td></tr><tr><td>2</td><td>Dify</td><td>å¯è§†åŒ–å¼€å‘</td><td>éæŠ€æœ¯ç”¨æˆ·ã€ä¼ä¸š</td><td>å¯è§†åŒ–ç¼–è¾‘å™¨ã€å¤šæ¨¡å‹æ”¯æŒ</td><td>ä½</td><td>90.5k</td></tr><tr><td>3</td><td>RAGFlow</td><td>æ–‡æ¡£å¤„ç†</td><td>å¤æ‚æ–‡æ¡£handling</td><td>æ·±åº¦æ–‡æ¡£ç†è§£ã€GraphRAG</td><td>ä¸­</td><td>48.5k</td></tr><tr><td>4</td><td>LlamaIndex</td><td>æ•°æ®ç´¢å¼•</td><td>è‡ªå®šä¹‰çŸ¥è¯†æº</td><td>çµæ´»è¿æ¥å™¨ã€è‡ªå®šä¹‰ç´¢å¼•</td><td>ä½</td><td>40.8k</td></tr><tr><td>5</td><td>Milvus</td><td>å‘é‡å­˜å‚¨</td><td>å¤§è§„æ¨¡å‘é‡æœç´¢</td><td>é«˜çº§å‘é‡æœç´¢ã€æ°´å¹³æ‰©å±•</td><td>ä¸­</td><td>33.9k</td></tr><tr><td>6</td><td>mem0</td><td>æŒä¹…è®°å¿†</td><td>éœ€ä¸Šä¸‹æ–‡ä¿ç•™çš„åŠ©æ‰‹</td><td>å¤šçº§è®°å¿†ã€è‡ªåŠ¨å¤„ç†</td><td>ä½</td><td>27.3k</td></tr><tr><td>7</td><td>DSPy</td><td>æç¤ºä¼˜åŒ–</td><td>éœ€è‡ªæˆ‘æ”¹è¿›çš„ç³»ç»Ÿ</td><td>è‡ªåŠ¨ä¼˜åŒ–ã€æ¨¡å—åŒ–</td><td>ä¸­</td><td>23k</td></tr><tr><td>8</td><td>Haystack</td><td>ç®¡é“ç¼–æ’</td><td>ç”Ÿäº§åº”ç”¨</td><td>çµæ´»ç»„ä»¶ã€æŠ€æœ¯æ— å…³</td><td>ä¸­</td><td>20.2k</td></tr><tr><td>9</td><td>LightRAG</td><td>æ€§èƒ½</td><td>é€Ÿåº¦å…³é”®åº”ç”¨</td><td>ç®€å•æ¶æ„ã€é«˜æ•ˆæ£€ç´¢</td><td>ä½</td><td>14.6k</td></tr><tr><td>10</td><td>LLMWare</td><td>èµ„æºæ•ˆç‡</td><td>è¾¹ç¼˜/CPUéƒ¨ç½²</td><td>å°å‹æ¨¡å‹ã€å¹¶è¡Œè§£æ</td><td>ä½</td><td>12.7k</td></tr><tr><td>11</td><td>txtai</td><td>ä¸€ä½“åŒ–è§£å†³æ–¹æ¡ˆ</td><td>ç®€åŒ–å®ç°</td><td>åµŒå…¥æ•°æ®åº“ã€å¤šæ¨¡æ€</td><td>ä½</td><td>10.7k</td></tr><tr><td>12</td><td>RAGAS</td><td>è¯„ä¼°</td><td>RAGç³»ç»Ÿæµ‹è¯•</td><td>å®¢è§‚æŒ‡æ ‡ã€æµ‹è¯•ç”Ÿæˆ</td><td>ä½</td><td>8.7k</td></tr><tr><td>13</td><td>R2R</td><td>ä»£ç†å¼RAG</td><td>å¤æ‚æŸ¥è¯¢</td><td>å¤šæ¨¡æ€æ‘„å…¥ã€ä»£ç†æ¨ç†</td><td>ä¸­</td><td>6.3k</td></tr><tr><td>14</td><td>Ragatouille</td><td>é«˜çº§æ£€ç´¢</td><td>é«˜ç²¾åº¦æœç´¢</td><td>æ™šæœŸäº¤äº’æ£€ç´¢ã€å¾®è°ƒ</td><td>ä¸­</td><td>3.4k</td></tr><tr><td>15</td><td>FlashRAG</td><td>ç ”ç©¶</td><td>å®éªŒä¸åŸºå‡†æµ‹è¯•</td><td>é¢„å¤„ç†æ•°æ®é›†ã€å¤šç®—æ³•</td><td>ä¸­</td><td>2.1k</td></tr></tbody></table>
<p>ä»¥ä¸Šå†…å®¹å‚è€ƒè‡ªï¼š15 Best Open-Source RAG Frameworks in 2025[12]ã€‚ä¸åŒå¼€æºRAGæ¡†æ¶çš„æ ¸å¿ƒå·®å¼‚ä¸»è¦ä½“ç°åœ¨æŠ€æœ¯å®šä½ä¸åŠŸèƒ½ç‰¹æ€§ä¸Šï¼Œåœ¨è¿›è¡Œæ¡†æ¶é€‰å‹æ—¶ï¼Œéœ€ç»“åˆåº”ç”¨è§„æ¨¡ã€æ€§èƒ½æŒ‡æ ‡ã€å¼€å‘å‘¨æœŸç­‰å®é™…éœ€æ±‚ç»¼åˆåˆ¤æ–­ã€‚éœ€è¦ç‰¹åˆ«å¼ºè°ƒçš„æ˜¯ï¼Œæ— è®ºé€‰æ‹©ä½•ç§æ¡†æ¶ï¼ŒçŸ¥è¯†åº“çš„è´¨é‡å§‹ç»ˆæ˜¯å†³å®šRAGç³»ç»Ÿæ•ˆæœçš„æ ¸å¿ƒå› ç´ ã€‚</p>
<p>å…·ä½“é€‰å‹å»ºè®®å¦‚ä¸‹ï¼š</p>
<ul>
<li>è‹¥ä»¥æ˜“ç”¨æ€§ä¸ºä¼˜å…ˆè€ƒé‡ï¼šæ¨èDifyã€LlamaIndexã€mem0ã€LightRAGã€txtai</li>
<li>é’ˆå¯¹æ–‡æ¡£å¯†é›†å‹åº”ç”¨ï¼šä¼˜å…ˆè€ƒè™‘RAGFlowã€LLMWare</li>
<li>é¢å‘å¤§è§„æ¨¡ç”Ÿäº§éƒ¨ç½²ï¼šé€‚åˆé€‰æ‹©Milvusã€Haystackã€LangChain</li>
<li>ç¡¬ä»¶èµ„æºå—é™åœºæ™¯ï¼šä¼˜å…ˆé€‰ç”¨LLMWareã€LightRAG</li>
<li>å­˜åœ¨å¤æ‚æ¨ç†éœ€æ±‚çš„åœºæ™¯ï¼šå»ºè®®æ¢ç´¢R2Rã€DSPy</li>
<li>éœ€è¿›è¡Œç³»ç»Ÿè¯„ä¼°çš„åœºæ™¯ï¼šæ¨èä½¿ç”¨RAGAS</li>
<li>ç ”ç©¶ä¸å®éªŒåœºæ™¯ï¼šé€‚åˆé€‰æ‹©FlashRAG</li>
</ul>
<hr/>
<h3 data-id="heading-15">å­¦ä¹ èµ„æºæ¨è</h3>
<p>å¦‚æœä½ æƒ³æ›´æ·±å…¥åœ°å­¦ä¹ å¤§æ¨¡å‹ï¼Œä»¥ä¸‹æ˜¯ä¸€äº›éå¸¸æœ‰ä»·å€¼çš„å­¦ä¹ èµ„æºï¼Œè¿™äº›èµ„æºå°†å¸®åŠ©ä½ ä»ä¸åŒè§’åº¦å­¦ä¹ å¤§æ¨¡å‹ï¼Œæå‡ä½ çš„å®è·µèƒ½åŠ›ã€‚</p>
<blockquote>
<p>æœ¬æ–‡è¾ƒé•¿ï¼Œå»ºè®®ç‚¹èµæ”¶è—ã€‚æ›´å¤šAIå¤§æ¨¡å‹åº”ç”¨å¼€å‘å­¦ä¹ è§†é¢‘åŠèµ„æ–™ï¼Œåœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fgitcode.com%2FEnjoyEDU%2FLLM" target="_blank" title="https://gitcode.com/EnjoyEDU/LLM" ref="nofollow noopener noreferrer">è¿™é‡Œ</a>ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[RAGå®è·µæŒ‡å—ï¼šä¸€æ–‡æå®šå¤§æ¨¡å‹RAGè¿‡ç¨‹]]></title>    <link>https://juejin.cn/post/7585920796100657179</link>    <guid>https://juejin.cn/post/7585920796100657179</guid>    <pubDate>2025-12-22T03:58:49.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7585920796100657179" data-draft-id="7585920796100640795" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="RAGå®è·µæŒ‡å—ï¼šä¸€æ–‡æå®šå¤§æ¨¡å‹RAGè¿‡ç¨‹"/> <meta itemprop="keywords" content="LLM,Agent,ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2025-12-22T03:58:49.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="AIå¤§æ¨¡å‹"/> <meta itemprop="url" content="https://juejin.cn/user/3817967696221534"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            RAGå®è·µæŒ‡å—ï¼šä¸€æ–‡æå®šå¤§æ¨¡å‹RAGè¿‡ç¨‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3817967696221534/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    AIå¤§æ¨¡å‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-22T03:58:49.000Z" title="Mon Dec 22 2025 03:58:49 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#383838;font-size:15px;line-height:30px;letter-spacing:2px;word-break:break-word;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;scroll-behavior:smooth;background-image:linear-gradient(0deg,transparent 24%,rgba(201,195,195,.329) 25%,hsla(0,8%,80.4%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent),linear-gradient(90deg,transparent 24%,rgba(204,196,196,.226) 25%,hsla(0,4%,66.1%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent);background-color:#fff;background-size:50px 50px;padding-bottom:60px}.markdown-body ::selection{color:#fff;background-color:#a862ea}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin:24px 0 12px;color:#a862ea}.markdown-body h1{line-height:2;font-size:1.4em}.markdown-body h1~p:first-of-type:first-letter{color:#a862ea;float:left;font-size:2em;margin-right:.4em;font-weight:bolder}.markdown-body h2{font-size:1.2em}.markdown-body h3{font-size:1.1em}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;padding-left:.2em}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#a862ea}.markdown-body ol li.task-list-item,.markdown-body ul li.task-list-item{list-style:none}.markdown-body ol li.task-list-item ol,.markdown-body ol li.task-list-item ul,.markdown-body ul li.task-list-item ol,.markdown-body ul li.task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:10px}.markdown-body a,.markdown-body code,.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6,.markdown-body li,.markdown-body p{opacity:.85;vertical-align:baseline;transition:all .1s ease}.markdown-body a:hover,.markdown-body code:hover,.markdown-body h1:hover,.markdown-body h2:hover,.markdown-body h3:hover,.markdown-body h4:hover,.markdown-body h5:hover,.markdown-body h6:hover,.markdown-body li:hover,.markdown-body p:hover{opacity:1}.markdown-body a{display:inline-block;color:#a862ea;cursor:pointer;text-decoration:none;position:relative}.markdown-body a:after{content:"";position:absolute;width:98%;height:1px;bottom:0;left:0;transform:scaleX(0);background-color:#a862ea;transform-origin:bottom right;transition:transform .3s ease-in-out}.markdown-body a:hover:after{transform:scaleX(1);transform-origin:bottom left}.markdown-body a:active,.markdown-body a:link{color:#a862ea}.markdown-body img{max-width:100%;user-select:none;margin:1em 0;transition:transform .2s ease 0s;background-color:#f8f5ff;box-shadow:0 0 10px #e7daff}.markdown-body img:hover{opacity:1;box-shadow:0 0 20px #e7daff;transform:translateY(-1px)}.markdown-body blockquote{padding:.5em 1em;margin:12px 0;border-top-left-radius:2px;border-bottom-left-radius:2px;border-left:3px solid #a862ea;background-color:#f8f5ff}.markdown-body blockquote&gt;p{margin:0}.markdown-body .math{font-style:italic;margin:12px 0;padding:.5em 1em;background-color:#f8f5ff}.markdown-body .math&gt;p{margin:0}.markdown-body code{padding:2px .4em;overflow-x:auto;color:#a862ea;font-weight:700;word-break:break-word;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;background-color:#f8f5ff}.markdown-body pre{margin:2em 0}.markdown-body pre&gt;code{display:block;padding:1.5em;word-break:normal;font-size:.9em;font-style:normal;font-weight:400;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;line-height:18px;color:#383838;border-radius:2px;scroll-behavior:smooth;box-shadow:0 0 10px #e7daff}.markdown-body pre&gt;code:hover{box-shadow:0 0 20px #e7daff}.markdown-body pre&gt;code::-webkit-scrollbar{height:6px;background-color:#f8f5ff}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:#e7daff;border-bottom-left-radius:3px;border-bottom-right-radius:3px}.markdown-body hr{margin:2em 0;border-top:1px solid #a862ea}.markdown-body table{width:100%;font-size:12px;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{color:#a862ea;background:#f8f5ff}.markdown-body td,.markdown-body th{padding:.5em;border:1px solid #e7daff}.markdown-body tr{background-color:#f8f5ff}@media (max-width:720px){.markdown-body{font-size:12px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æœ¬æ–‡è¾ƒé•¿ï¼Œå»ºè®®ç‚¹èµæ”¶è—ã€‚æ›´å¤šAIå¤§æ¨¡å‹åº”ç”¨å¼€å‘å­¦ä¹ è§†é¢‘åŠèµ„æ–™ï¼Œåœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fgitcode.com%2FEnjoyEDU%2FLLM" target="_blank" title="https://gitcode.com/EnjoyEDU/LLM" ref="nofollow noopener noreferrer">è¿™é‡Œ</a>ã€‚</p>
</blockquote>
<h2 data-id="heading-0"><strong>RAGæ˜¯ä»€ä¹ˆï¼Ÿ</strong></h2>
<p><strong>RAGï¼ˆRetrieval-Augmented Generationï¼Œæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰</strong> , ä¸€ç§AIæ¡†æ¶ï¼Œå°†ä¼ ç»Ÿçš„ä¿¡æ¯æ£€ç´¢ç³»ç»Ÿ(ä¾‹å¦‚æ•°æ®åº“)çš„ä¼˜åŠ¿ä¸ç”Ÿæˆå¼å¤§è¯­è¨€æ¨¡å‹(LLM)çš„åŠŸèƒ½ç»“åˆåœ¨ä¸€èµ·ã€‚ä¸å†ä¾èµ–LLMè®­ç»ƒæ—¶çš„å›ºæœ‰çŸ¥è¯†ï¼Œè€Œæ˜¯åœ¨å›ç­”é—®é¢˜å‰ï¼Œå…ˆä»å¤–éƒ¨èµ„æ–™åº“ä¸­â€œç¿»ä¹¦â€æ‰¾èµ„æ–™ï¼ŒåŸºäºè¿™äº›èµ„æ–™ç”Ÿæˆæ›´å‡†ç¡®çš„ç­”æ¡ˆã€‚</p>
<p>RAGæŠ€æœ¯æ ¸å¿ƒç¼“è§£å¤§æ¨¡å‹è½åœ°åº”ç”¨çš„å‡ ä¸ªå…³é”®é—®é¢˜ï¼š</p>
<ul>
<li><strong>çŸ¥è¯†æ–°é²œåº¦</strong>ï¼šå¤§æ¨¡å‹çªç ´æ¨¡å‹è®­ç»ƒæ•°æ®çš„æ—¶é—´é™åˆ¶</li>
<li><strong>å¹»è§‰é—®é¢˜</strong>ï¼šé™ä½ç”Ÿæˆç­”æ¡ˆçš„è™šæ„æ¦‚ç‡ï¼Œæä¾›å‚ç…§æ¥æº</li>
<li><strong>ä¿¡æ¯å®‰å…¨</strong>ï¼šé€šè¿‡å¤–æŒ‚çŸ¥è¯†åº“è€Œä¸æ˜¯å†…éƒ¨è®­ç»ƒæ•°æ®ï¼Œå‡å°‘éšç§æ³„éœ²</li>
<li><strong>å‚ç›´é¢†åŸŸçŸ¥è¯†</strong>ï¼šæ— éœ€è®­ç»ƒç›´æ¥æ•´åˆå‚ç›´é¢†åŸŸçŸ¥è¯†</li>
</ul>
<p><strong>RAGæ ¸å¿ƒæµç¨‹</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/77afaa25fe4943f5927219aef16e3128~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766980728&amp;x-signature=iTkOV3hhkqco7ucMwRVc%2B8abfNI%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-1">2.1 çŸ¥è¯†å‡†å¤‡é˜¶æ®µ</h2>
<h4 data-id="heading-2">2.1.1 æ•°æ®é¢„å¤„ç†</h4>
<h4 data-id="heading-3">a. æ–‡æ¡£è§£æ</h4>
<p><strong>è¾“å…¥</strong>ï¼šåŸå§‹æ–‡æ¡£ï¼ˆå¦‚Markdown/PDF/HTMLï¼‰</p>
<p><strong>æ“ä½œ</strong>ï¼š</p>
<ul>
<li>æå–çº¯æ–‡æœ¬ï¼ˆå¦‚è§£æMarkdownæ ‡é¢˜ã€æ®µè½ï¼‰</li>
<li>å¤„ç†ç‰¹æ®Šæ ¼å¼ï¼ˆå¦‚ä»£ç å—ã€è¡¨æ ¼ã€å›¾ç‰‡ã€è§†é¢‘ç­‰ï¼‰</li>
</ul>
<p>ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-selector-attr">[æ ‡é¢˜]</span> ä»€ä¹ˆæ˜¯ ROMAï¼Ÿ
<span class="hljs-selector-attr">[æ®µè½]</span> ROMA æ˜¯ä¸€ä¸ªå…¨è‡ªä¸»ç ”å‘çš„å‰ç«¯å¼€å‘åŸºäºè‡ªå®šä¹‰<span class="hljs-built_in">DSL</span>(Jueè¯­è¨€)ï¼Œä¸€ä»½ä»£ç ï¼Œå¯åœ¨iOSã€Androidã€Harmonyã€Webå››ç«¯è¿è¡Œçš„è·¨å¹³å°è§£å†³æ–¹æ¡ˆã€‚
<span class="hljs-selector-attr">[æ®µè½]</span> ROMA æ¡†æ¶çš„ä¸­æ–‡åä¸ºç½—ç ã€‚
<span class="hljs-selector-attr">[æ ‡é¢˜]</span> ä»Šå¤©å¤©æ°”
<span class="hljs-selector-attr">[åˆ—è¡¨é¡¹]</span> ä»Šå¤©çš„å®¤å¤–æ¸©åº¦ä¸º<span class="hljs-number">35</span>Â°Cï¼Œå¤©æ°”æ™´æœ—ã€‚
</code></pre>
<h5 data-id="heading-4"><strong>æ–‡æ¡£çš„è§£æè¿‡ç¨‹éœ€è¦è€ƒè™‘ä¸åŒæ–‡æ¡£å†…å®¹ä¾‹å¦‚æ–‡æœ¬ã€å›¾ç‰‡ã€è¡¨æ ¼ç­‰åœºæ™¯ï¼Œä»¥åŠæ–‡æ¡£çš„è¯­è¨€ï¼Œå¸ƒå±€æƒ…å†µï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨ä¸€äº›ä¼˜ç§€çš„ä¸‰æ–¹å·¥å…·æˆ–è€…ä¸€äº›è§†è§‰æ¨¡å‹ï¼Œå¸ƒå±€åˆ†ææ¨¡å‹ï¼Œè¯­ä¹‰ç†è§£æ¨¡å‹æ¥è¾…åŠ©è§£æã€‚</strong></h5>
<h5 data-id="heading-5"><strong>b. æ•°æ®æ¸…æ´—ä¸æ ‡å‡†åŒ–å¤„ç†</strong></h5>
<p>æå‡æ–‡æœ¬è´¨é‡å’Œä¸€è‡´æ€§ï¼Œä½¿å‘é‡è¡¨ç¤ºæ›´å‡†ç¡®ï¼Œä»è€Œå¢å¼ºæ£€ç´¢ç›¸å…³æ€§å’ŒLLMå›ç­”è´¨é‡ï¼›åŒæ—¶æ¶ˆé™¤å™ªå£°å’Œä¸è§„åˆ™æ ¼å¼ï¼Œç¡®ä¿ç³»ç»Ÿèƒ½æ­£ç¡®ç†è§£å’Œå¤„ç†æ–‡æ¡£å†…å®¹ã€‚åŒ…æ‹¬:Â </p>
<ul>
<li>å»é™¤ç‰¹æ®Šå­—ç¬¦ã€æ ‡ç­¾ã€ä¹±ç ã€é‡å¤å†…å®¹ã€‚</li>
<li>æ–‡æœ¬æ ‡å‡†åŒ–ï¼Œä¾‹å¦‚ æ—¶é—´ã€å•ä½æ ‡å‡†åŒ–ï¼ˆå¦‚â€œä»Šå¤©â€ â†’ â€œ2025-07-17â€ï¼‰ã€‚</li>
<li>å…¶ä»–å¤„ç†</li>
</ul>
<p>æ•°æ®çš„æ¸…æ´—å’Œæ ‡å‡†åŒ–è¿‡ç¨‹å¯ä»¥ä½¿ç”¨ä¸€äº›å·¥å…·æˆ–<strong>NLTKã€spaCy</strong>ç­‰NLPå·¥å…·è¿›è¡Œå¤„ç†ã€‚</p>
<p>ä¾‹å¦‚:Â </p>
<pre><code class="hljs language-bash" lang="bash">&lt;p&gt;ROMAæ¡†æ¶&lt;/p&gt;
å¤„ç†ï¼š
<span class="hljs-string">"ROMAæ¡†æ¶"</span>
ä»Šå¤©çš„å®¤å¤–æ¸©åº¦ä¸º35Â°Cï¼Œå¤©æ°”æ™´æœ—ã€‚
å¤„ç†ï¼š
<span class="hljs-string">"2025-07-17 çš„å®¤å¤–æ¸©åº¦ä¸º35Â°Cï¼Œå¤©æ°”æ™´æœ—"</span>
</code></pre>
<p>c. å…ƒæ•°æ®æå–</p>
<p>å…³äºæ•°æ®çš„æ•°æ®ï¼Œç”¨äºæè¿°å’Œæä¾›æœ‰å…³æ•°æ®çš„é™„åŠ ä¿¡æ¯ã€‚</p>
<ul>
<li><strong>æ–‡æ¡£æ¥æº</strong>ï¼šæ–‡æ¡£çš„å‡ºå¤„ï¼Œä¾‹å¦‚URLã€æ–‡ä»¶åã€æ•°æ®åº“è®°å½•ç­‰ã€‚</li>
<li><strong>åˆ›å»ºæ—¶é—´</strong>ï¼šæ–‡æ¡£çš„åˆ›å»ºæˆ–æ›´æ–°æ—¶é—´ã€‚</li>
<li><strong>ä½œè€…ä¿¡æ¯</strong>ï¼šæ–‡æ¡£çš„ä½œè€…æˆ–ç¼–è¾‘è€…ã€‚</li>
<li><strong>æ–‡æ¡£ç±»å‹</strong>ï¼šæ–‡æ¡£çš„ç±»å‹ï¼Œå¦‚æ–°é—»æ–‡ç« ã€å­¦æœ¯è®ºæ–‡ã€åšå®¢ç­‰ã€‚</li>
</ul>
<p>å…ƒæ•°æ®åœ¨RAGä¸­ä¹Ÿéå¸¸é‡è¦ï¼Œä¸ä»…æä¾›äº†é¢å¤–çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œè¿˜èƒ½æå‡æ£€ç´¢è´¨é‡ï¼š</p>
<ol>
<li><strong>æ£€ç´¢å¢å¼º</strong></li>
</ol>
<ul>
<li>ç²¾å‡†è¿‡æ»¤ï¼šæŒ‰æ—¶é—´ã€ä½œè€…ã€ä¸»é¢˜ç­‰ç¼©å°æœç´¢èŒƒå›´</li>
<li>ç›¸å…³æ€§æå‡ï¼šç»“åˆå‘é‡ç›¸ä¼¼åº¦å’Œå…ƒæ•°æ®ç‰¹å¾æé«˜æ£€ç´¢å‡†ç¡®æ€§</li>
</ul>
<p>ii. ä¸Šä¸‹æ–‡ä¸°å¯Œ</p>
<ul>
<li>æ¥æºæ ‡æ³¨ï¼šæä¾›æ–‡æ¡£æ¥æºã€ä½œè€…ã€å‘å¸ƒæ—¥æœŸç­‰ä¿¡æ¯</li>
<li>æ–‡æ¡£å…³ç³»ï¼šå±•ç¤ºæ–‡æ¡£é—´çš„å±‚çº§æˆ–å¼•ç”¨å…³ç³»</li>
</ul>
<p>iii. å¸¸è§çš„å…ƒæ•°æ®æå–æ–¹å¼:</p>
<ul>
<li>æ­£åˆ™/HTML/... ç­‰è§£æå·¥å…·ï¼Œæå–æ ‡é¢˜ã€ä½œè€…ã€æ—¥æœŸç­‰</li>
<li>è‡ªç„¶è¯­è¨€å¤„ç†:Â ä½¿ç”¨NLPæŠ€æœ¯ï¼ˆå¦‚å‘½åå®ä½“è¯†åˆ«ã€å…³é”®è¯æå–ï¼‰ä»æ–‡æ¡£å†…å®¹ä¸­æå–å…ƒæ•°æ®ï¼Œå¦‚äººåã€åœ°åã€ç»„ç»‡åã€å…³é”®è¯ç­‰</li>
<li>æœºå™¨å­¦ä¹ æ¨¡å‹:Â Â è®­ç»ƒæœºå™¨å­¦ä¹ æ¨¡å‹æ¥è‡ªåŠ¨æå–å…ƒæ•°æ®</li>
<li>é€šè¿‡è°ƒç”¨å¤–éƒ¨APIï¼ˆå¦‚Google Scholar APIã€Wikipedia APIï¼‰è·å–æ–‡æ¡£çš„å…ƒæ•°æ®</li>
</ul>
<p>ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">complete_metadata_chunk1 = {
<span class="hljs-string">'file_path'</span>: <span class="hljs-string">'/mydocs/roma_intro.md'</span>,
<span class="hljs-string">'file_name'</span>: <span class="hljs-string">'roma_intro.md'</span>,
<span class="hljs-string">'chunk_id'</span>: 0,
<span class="hljs-string">'section_title'</span>: <span class="hljs-string">'# ä»€ä¹ˆæ˜¯ ROMAï¼Ÿ'</span>,
<span class="hljs-string">'subsection_title'</span>: <span class="hljs-string">''</span>,
<span class="hljs-string">'section_type'</span>: <span class="hljs-string">'section'</span>,
<span class="hljs-string">'chunking_strategy'</span>: 3,
<span class="hljs-string">'content_type'</span>: <span class="hljs-string">'product_description'</span>,
<span class="hljs-string">'main_entity'</span>: <span class="hljs-string">'ROMA'</span>,
<span class="hljs-string">'language'</span>: <span class="hljs-string">'zh-CN'</span>,
<span class="hljs-string">'creation_date'</span>: <span class="hljs-string">'2025-07-02'</span>,  <span class="hljs-comment"># ä»æ–‡ä»¶ç³»ç»Ÿè·å–</span>
<span class="hljs-string">'word_count'</span>: 42  <span class="hljs-comment"># è®¡ç®—å¾—å‡º,</span>
<span class="hljs-string">'topics'</span>: [<span class="hljs-string">'ROMA'</span>, <span class="hljs-string">'å‰ç«¯æ¡†æ¶'</span>, <span class="hljs-string">'è·¨å¹³å°å¼€å‘'</span>],
<span class="hljs-string">'entities'</span>: {
<span class="hljs-string">'products'</span>: [<span class="hljs-string">'ROMA'</span>, <span class="hljs-string">'Jueè¯­è¨€'</span>], <span class="hljs-comment"># å®ä½“è¯†åˆ«</span>
<span class="hljs-string">'platforms'</span>: [<span class="hljs-string">'iOS'</span>, <span class="hljs-string">'Android'</span>, <span class="hljs-string">'Web'</span>]
},
}
</code></pre>
<h4 data-id="heading-6">2.1.2 å†…å®¹åˆ†å—(Chunking)</h4>
<p>åœ¨RAGæ¶æ„ä¸­ï¼Œåˆ†å—æ—¢æ˜¯æ ¸å¿ƒï¼Œä¹Ÿæ˜¯æŒ‘æˆ˜ï¼Œå®ƒç›´æ¥å½±å“æ£€ç´¢ç²¾åº¦ã€ç”Ÿæˆè´¨é‡ï¼Œéœ€è¦åœ¨æ£€ç´¢ç²¾åº¦ã€è¯­å¢ƒå®Œæ•´æ€§å’Œè®¡ç®—æ€§èƒ½ä¹‹é—´å–å¾—å¹³è¡¡ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fca9df08e1a047bbb20cd8cf9d5e09e8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766980728&amp;x-signature=%2Ff5qw79v4IgksDvgiSHT82amS8I%3D" alt="" loading="lazy"/></p>
<p>å†…å®¹åˆ†å—å°†é•¿æ–‡æ¡£åˆ‡åˆ†æˆå°å—ï¼Œå¯ä»¥è§£å†³å‘é‡æ¨¡å‹çš„tokené•¿åº¦é™åˆ¶ï¼Œä½¿RAGæ›´ç²¾ç¡®å®šä½ç›¸å…³ä¿¡æ¯ï¼Œæå‡æ£€ç´¢ç²¾åº¦å’Œè®¡ç®—æ•ˆç‡ã€‚</p>
<ul>
<li>AutoBots(JoyAgent)åŠŸèƒ½åˆ†å—ï¼š</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/da2e1bbf0f064702b64ba20593815329~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766980728&amp;x-signature=aAjaqAE4LGImYEJJPuMDT1XeBHI%3D" alt="" loading="lazy"/></p>
<p>å®é™…RAGæ¡†æ¶ä¸­æŒ‰ç…§æ–‡æ¡£çš„ç‰¹æ€§é€‰æ‹©åˆé€‚çš„åˆ†å—ç­–ç•¥è¿›è¡Œåˆ†å—ã€‚</p>
<ul>
<li>
<h5 data-id="heading-7">å¸¸è§çš„åˆ†å—ç­–ç•¥ï¼š</h5>
</li>
</ul>
<p><strong>a. æŒ‰å¤§å°åˆ†å—</strong></p>
<p>æŒ‰å›ºå®šå­—ç¬¦æ•°è¿›è¡Œåˆ†å—ï¼Œå®ç°ç®€å•ä½†å¯èƒ½åˆ‡æ–­è¯­ä¹‰å•å…ƒã€‚</p>
<p>ä¼˜ç‚¹ï¼šå®ç°ç®€å•ä¸”è®¡ç®—å¼€é”€å°ï¼Œå—å¤§å°å‡åŒ€ä¾¿äºç®¡ç†ã€‚</p>
<p><strong>ç¼ºç‚¹</strong>ï¼šå¯èƒ½åˆ‡æ–­è¯­ä¹‰å•å…ƒï¼Œå¦‚å¥å­æˆ–æ®µè½è¢«åˆ†åˆ°ä¸åŒå—ä¸­ã€‚</p>
<p>ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">ç¬¬ä¸€æ®µï¼š# ROMAæ¡†æ¶ä»‹ç»ROMAæ˜¯ä¸€ä¸ªå…¨è‡ªä¸»ç ”å‘çš„å‰ç«¯å¼€å‘æ¡†æ¶ï¼ŒåŸºäºè‡ªå®šä¹‰<span class="hljs-built_in">DSL</span>(Jueè¯­è¨€)ã€‚
ä¸€ä»½ä»£ç ï¼Œå¯åœ¨iOSã€Androidã€Harmony
ç¬¬äºŒæ®µï¼šã€Webä¸‰ç«¯è¿è¡Œçš„è·¨å¹³å°è§£å†³æ–¹æ¡ˆã€‚ROMAæ¡†æ¶çš„ä¸­æ–‡åä¸ºç½—ç ã€‚
</code></pre>
<p>å¥å­è¢«æˆªæ–­ï¼Œ"ä¸€ä»½ä»£ç ï¼Œå¯åœ¨iOSã€Androidã€Harmony" å’Œ "ã€Webä¸‰ç«¯è¿è¡Œçš„è·¨å¹³å°è§£å†³æ–¹æ¡ˆ" è¢«åˆ†åˆ°ä¸åŒå—ï¼Œå½±å“ç†è§£ã€‚</p>
<p>b.Â æŒ‰æ®µè½åˆ†å—</p>
<p>ä»¥æ®µè½ä¸ºåŸºæœ¬å•ä½è¿›è¡Œåˆ†å—ï¼Œä¿æŒæ®µè½å®Œæ•´æ€§ï¼Œä½†æ®µè½é•¿åº¦å¯èƒ½å·®å¼‚å¾ˆå¤§ã€‚</p>
<p><strong>ä¼˜ç‚¹</strong>ï¼šå°Šé‡æ–‡æ¡£è‡ªç„¶ç»“æ„ï¼Œä¿ç•™å®Œæ•´è¯­ä¹‰å•å…ƒã€‚</p>
<p><strong>ç¼ºç‚¹</strong>ï¼šæ®µè½é•¿åº¦å·®å¼‚å¤§ï¼Œå¯èƒ½å¯¼è‡´å—å¤§å°ä¸å‡è¡¡ã€‚</p>
<p>ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">ç¬¬ä¸€æ®µï¼š<span class="hljs-comment"># ROMAæ¡†æ¶ä»‹ç»ROMAæ˜¯ä¸€ä¸ªå…¨è‡ªä¸»ç ”å‘çš„å‰ç«¯å¼€å‘æ¡†æ¶ï¼ŒåŸºäºè‡ªå®šä¹‰DSL(Jueè¯­è¨€)ã€‚</span>
ä¸€ä»½ä»£ç ï¼Œå¯åœ¨iOSã€Androidã€Harmonyã€Webä¸‰ç«¯è¿è¡Œçš„è·¨å¹³å°è§£å†³æ–¹æ¡ˆã€‚ROMAæ¡†æ¶çš„ä¸­æ–‡åä¸ºç½—ç ã€‚
ç¬¬äºŒæ®µï¼š<span class="hljs-comment"># æ ¸å¿ƒç‰¹æ€§1. è·¨å¹³å°ï¼šä¸€å¥—ä»£ç è¿è¡Œäºå¤šç«¯2. é«˜æ€§èƒ½ï¼šæ¥è¿‘åŸç”Ÿçš„æ€§èƒ½è¡¨ç°3. å¯æ‰©å±•ï¼šä¸°å¯Œçš„æ’ä»¶ç³»ç»Ÿ</span>
</code></pre>
<p>ç¬¬ä¸€æ®µåŒ…å«æ ‡é¢˜å’Œå¤šè¡Œå†…å®¹ï¼Œè€Œå…¶ä»–æ®µè½ç›¸å¯¹è¾ƒçŸ­ï¼Œå¯èƒ½å¯¼è‡´æ£€ç´¢ä¸å‡è¡¡ã€‚</p>
<p><strong>c. æŒ‰è¯­ä¹‰åˆ†å—</strong></p>
<p>åŸºäºæ–‡æœ¬è¯­ä¹‰ç›¸ä¼¼åº¦è¿›è¡ŒåŠ¨æ€åˆ†å—ï¼Œä¿æŒè¯­ä¹‰è¿è´¯æ€§ï¼Œä½†è®¡ç®—å¼€é”€å¤§ã€‚</p>
<p><strong>è¯´æ˜</strong>ï¼šåŸºäºæ–‡æœ¬è¯­ä¹‰ç›¸ä¼¼åº¦åŠ¨æ€è°ƒæ•´åˆ†å—è¾¹ç•Œã€‚</p>
<p><strong>ä¼˜ç‚¹</strong>ï¼šä¿æŒè¯­ä¹‰è¿è´¯æ€§ï¼Œèƒ½è¯†åˆ«å†…å®¹ä¸»é¢˜è¾¹ç•Œã€‚</p>
<p>ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">ç¬¬ä¸€æ®µï¼š<span class="hljs-comment"># ROMAæ¡†æ¶ä»‹ç»ROMAæ˜¯ä¸€ä¸ªå…¨è‡ªä¸»ç ”å‘çš„å‰ç«¯å¼€å‘æ¡†æ¶ï¼ŒåŸºäºè‡ªå®šä¹‰DSL(Jueè¯­è¨€)ã€‚</span>
ä¸€ä»½ä»£ç ï¼Œå¯åœ¨iOSã€Androidã€Harmonyã€Webå››ç«¯è¿è¡Œçš„è·¨å¹³å°è§£å†³æ–¹æ¡ˆã€‚
ç¬¬äºŒæ®µï¼šROMAæ¡†æ¶çš„ä¸­æ–‡åä¸ºç½—ç ã€‚
<span class="hljs-comment">## æ ¸å¿ƒç‰¹æ€§1. è·¨å¹³å°ï¼šä¸€å¥—ä»£ç è¿è¡Œäºå¤šç«¯</span>
</code></pre>
<p>ä½¿ç”¨ä¾èµ–æ¨¡å‹è´¨é‡ï¼Œç›¸åŒæ–‡æœ¬åœ¨ä¸åŒè¿è¡Œä¸­å¯èƒ½äº§ç”Ÿä¸åŒåˆ†å—ç»“æœã€‚</p>
<p><strong>d. åˆ†å—ç­–ç•¥æ€»ç»“</strong></p>
<p><strong><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/68d8e50d5b2845f3bb68027ec0270090~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766980728&amp;x-signature=i5q2elWGV7Sr3hxOt1YKwyyFJSY%3D" alt="" loading="lazy"/></strong></p>
<p><strong>e. ä¼˜åŒ–æ–¹å¼</strong></p>
<ul>
<li><strong>æ··åˆåˆ†å—ç­–ç•¥</strong></li>
</ul>
<p>ç»“åˆå¤šç§åˆ†å—æ–¹æ³•çš„ä¼˜ç‚¹ï¼Œå¦‚å…ˆæŒ‰æ®µè½åˆ†å—ï¼Œå†æ ¹æ®å—å¤§å°è°ƒæ•´ï¼Œåšåˆ°æ—¢ä¿æŒè¯­ä¹‰å®Œæ•´æ€§ï¼Œåˆèƒ½æ§åˆ¶å—å¤§å°å‡åŒ€</p>
<ul>
<li>ä¼˜åŒ–é‡å åŒºåŸŸ</li>
</ul>
<p>æ ¹æ®å†…å®¹ç‰¹æ€§åŠ¨æ€è°ƒæ•´å—ä¹‹é—´çš„é‡å åŒºåŸŸå¤§å°ï¼Œå…³é”®ä¿¡æ¯å‡ºç°åœ¨å¤šä¸ªå—ä¸­ï¼Œæé«˜æ£€ç´¢å¬å›ç‡</p>
<h5 data-id="heading-8"><strong>f. å¸¸ç”¨çš„åˆ†å—å·¥å…·</strong></h5>
<ul>
<li><strong>Lang Chainæ¡†æ¶</strong>ï¼šæä¾›å¤šç§åˆ†å—ç­–ç•¥ï¼ŒåŒ…æ‹¬RecursiveCharacterTextSplitterã€MarkdownTextSplitterç­‰</li>
<li><strong>NLTK</strong>ï¼šç”¨äºåŸºäºè‡ªç„¶è¯­è¨€å¥å­çš„åˆ†å—</li>
<li><strong>spaCy</strong>ï¼šæä¾›è¯­è¨€å­¦æ„ŸçŸ¥çš„æ–‡æœ¬åˆ†å‰²</li>
</ul>
<h4 data-id="heading-9">2.1.3 å‘é‡åŒ–</h4>
<p>å°†é«˜ç»´æ–‡æœ¬æ•°æ®å‹ç¼©åˆ°ä½ç»´ç©ºé—´ï¼Œä¾¿äºå¤„ç†å’Œå­˜å‚¨ã€‚å°†æ–‡æœ¬è½¬æ¢ä¸ºè®¡ç®—æœºå¯ä»¥ç†è§£çš„æ•°å€¼ï¼Œä½¿å¾—è®¡ç®—æœºèƒ½å¤Ÿç†è§£å’Œå¤„ç†è¯­ä¹‰ä¿¡æ¯ï¼Œä»è€Œåœ¨æµ·é‡æ•°æ®æ–‡æœ¬ä¸­å®ç°å¿«é€Ÿã€é«˜æ•ˆçš„ç›¸ä¼¼åº¦è®¡ç®—å’Œæ£€ç´¢ã€‚</p>
<p>ç®€å•ç†è§£ï¼šé€šè¿‡ä¸€ç»„æ•°å­—æ¥ä»£è¡¨æ–‡æœ¬å†…å®¹çš„â€œæœ¬è´¨â€ã€‚</p>
<p>ä¾‹å¦‚ï¼Œâ€œROMAæ˜¯ä¸€ä¸ªè·¨å¹³å°è§£å†³æ–¹æ¡ˆ...â€è¿™å¥è¯å¯èƒ½è¢«è½¬æ¢ä¸ºä¸€ä¸ª384ç»´çš„å‘é‡ï¼š</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-selector-attr">[å—1]</span> ä»€ä¹ˆæ˜¯ROMAï¼Ÿ
ROMAæ˜¯ä¸€ä¸ªå…¨è‡ªä¸»ç ”å‘çš„å‰ç«¯å¼€å‘æ¡†æ¶ï¼ŒåŸºäºè‡ªå®šä¹‰<span class="hljs-built_in">DSL</span>(Jueè¯­è¨€)...
<span class="hljs-selector-attr">[{<span class="hljs-string">"chunk_id"</span>: <span class="hljs-string">"doc1_chunk1"</span>,<span class="hljs-string">"text"</span>: <span class="hljs-string">"# ä»€ä¹ˆæ˜¯ ROMAï¼Ÿ\nROMA æ˜¯ä¸€ä¸ªå…¨è‡ªä¸»ç ”å‘çš„å‰ç«¯å¼€å‘åŸºäºè‡ªå®šä¹‰DSL(Jueè¯­è¨€)ï¼Œä¸€ä»½ä»£ç ï¼Œå¯åœ¨iOSã€Androidã€Harmonyã€Webç«¯è¿è¡Œçš„è·¨å¹³å°è§£å†³æ–¹æ¡ˆã€‚"</span>,<span class="hljs-string">"vector"</span>: [0.041, -0.018, 0.063, ..., 0.027]</span>,
"metadata": {
"source": <span class="hljs-string">"roma_introduction.md"</span>,
<span class="hljs-string">"position"</span>: <span class="hljs-number">0</span>,
<span class="hljs-string">"title"</span>: <span class="hljs-string">"ROMAæ¡†æ¶ä»‹ç»"</span>
}
},
<span class="hljs-comment">// æ›´å¤šæ–‡æ¡£å—...</span>
]
</code></pre>
<ul>
<li><strong>å¸¸ç”¨çš„Embeddingæ¨¡å‹ï¼š</strong></li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/49b17a48baec40a386bc5e9eddc89dd5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766980728&amp;x-signature=HyRwgbb0Z%2BltqJSPQl7AMv24%2Fg8%3D" alt="" loading="lazy"/></p>
<h5 data-id="heading-10"/>
<h4 data-id="heading-11"><strong>2.1.4 å‘é‡æ•°æ®åº“å…¥åº“</strong></h4>
<p>å°†ç”Ÿæˆçš„å‘é‡æ•°æ®å’Œå…ƒæ•°æ®è¿›è¡Œå­˜å‚¨ï¼ŒåŒæ—¶åˆ›å»ºç´¢å¼•ç»“æ„æ¥æ”¯æŒå¿«é€Ÿç›¸ä¼¼æ€§æœç´¢ã€‚</p>
<ul>
<li><strong>å¸¸ç”¨çš„å‘é‡æ•°æ®åº“åŒ…æ‹¬ï¼š</strong></li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d1e98e85a42240f298306e1e8be66efc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766980728&amp;x-signature=QXr85eJQIrEbQSauR6AJemfnbqY%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-12">2.2 é—®ç­”é˜¶æ®µ</h3>
<h3 data-id="heading-13">2.2.1 æŸ¥è¯¢é¢„å¤„ç†</h3>
<ul>
<li>
<h3 data-id="heading-14">æ„å›¾è¯†åˆ«ï¼šä½¿ç”¨åˆ†ç±»æ¨¡å‹åŒºåˆ†é—®é¢˜ç±»å‹ï¼ˆäº‹å®æŸ¥è¯¢ã€å»ºè®®ã€é—²èŠç­‰ï¼‰ã€‚</h3>
</li>
<li>
<h3 data-id="heading-15">é—®é¢˜é¢„å¤„ç†ï¼šé—®é¢˜å†…å®¹æ¸…æ´—å’Œæ ‡å‡†åŒ–ï¼Œè¿‡ç¨‹ä¸å‰é¢æ•°æ®é¢„å¤„ç†ç±»ä¼¼ã€‚</h3>
</li>
<li>
<h3 data-id="heading-16">æŸ¥è¯¢å¢å¼ºï¼šä½¿ç”¨çŸ¥è¯†åº“æˆ–LLMç”ŸæˆåŒä¹‰è¯ï¼ˆå¦‚â€œåŠ¨æ€åŒ–â€ â†’ â€œRomaâ€ï¼‰ï¼Œä¸Šä¸‹æ–‡è¡¥å…¨å¯ä»¥ç»“åˆå†å²ä¼šè¯æ€»ç»“ï¼ˆä¾‹å¦‚ç”¨æˆ·ä¹‹å‰é—®è¿‡â€œRomaæ˜¯ä»€ä¹ˆâ€ï¼‰ã€‚</h3>
</li>
</ul>
<h4 data-id="heading-17"><strong>2.2.2 æ•°æ®æ£€ç´¢(å¬å›)</strong></h4>
<h4 data-id="heading-18"><strong>a. å‘é‡åŒ–</strong></h4>
<p>ä½¿ç”¨ä¸å…¥åº“å‰æ•°æ®å‘é‡åŒ–ç›¸åŒçš„æ¨¡å‹ï¼Œå°†å¤„ç†åçš„é—®é¢˜å†…å®¹å‘é‡åŒ–ã€‚</p>
<p>ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-css" lang="css">é—®é¢˜: <span class="hljs-string">"ROMAæ˜¯ä»€ä¹ˆ?"</span>
å¤„ç†å
{
"vector": [<span class="hljs-number">0.052</span>, -<span class="hljs-number">0.021</span>, <span class="hljs-number">0.075</span>, ..., <span class="hljs-number">0.033</span>],
<span class="hljs-string">"top_k"</span>: <span class="hljs-number">3</span>,
<span class="hljs-string">"score_threshold"</span>: <span class="hljs-number">0.8</span>,
<span class="hljs-string">"filter"</span>: {"doc_type": <span class="hljs-string">"æŠ€æœ¯æ–‡æ¡£"</span>}
}
</code></pre>
<h5 data-id="heading-19"><strong>b. æ£€ç´¢</strong></h5>
<ul>
<li>ç›¸ä¼¼åº¦æ£€ç´¢ï¼šæŸ¥è¯¢å‘é‡ä¸æ‰€å­˜å‚¨çš„å‘é‡æœ€ç›¸ä¼¼(é€šè¿‡ä½™å¼¦ç›¸ä¼¼åº¦åŒ¹é…)çš„å‰ top_k ä¸ªæ–‡æ¡£å—ã€‚</li>
<li>å…³é”®è¯æ£€ç´¢ï¼šå€’æ’ç´¢å¼•çš„ä¼ ç»Ÿæ–¹æ³•,æ£€ç´¢åŒ…å«â€œRomaâ€ã€â€œä¼˜åŠ¿â€ç­‰ç²¾ç¡®å…³é”®è¯çš„æ–‡æ¡£ã€‚</li>
<li>æ··åˆæ£€ç´¢ï¼šåˆå¹¶ä¸Šé¢å¤šç§æ£€ç´¢ç»“æœï¼Œæ•ˆæœæœ€ä¼˜ã€‚</li>
</ul>
<p>ä¾‹å¦‚ï¼šæ£€ç´¢â€œROMAæ˜¯ä»€ä¹ˆ?â€</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8507791f9d7e465baa630696eeaeab63~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766980728&amp;x-signature=XHBPEWzm5Qxfs1Qywlz37aTN1Ys%3D" alt="" loading="lazy"/></p>
<h5 data-id="heading-20"><strong>c. é‡æ’åº(Reranking)</strong></h5>
<p>åˆæ­¥æ£€ç´¢åœ¨ç²¾åº¦å’Œè¯­ä¹‰ç†è§£ä¸Šçš„ä¸è¶³ï¼Œé€šè¿‡æ›´ç²¾ç»†çš„ä¸Šä¸‹æ–‡åˆ†ææå‡ç»“æœç›¸å…³æ€§ã€‚å®ƒèƒ½æ›´å¥½å¤„ç†åŒä¹‰è¯æ›¿æ¢ã€ä¸€è¯å¤šä¹‰ç­‰è¯­ä¹‰ç»†å¾®å·®å¼‚ï¼Œä½¿æœ€ç»ˆç»“æœå‡†ç¡®ã€‚</p>
<ul>
<li>åŸç†ï¼šä½¿ç”¨æ¨¡å‹å¯¹æ¯ä¸ªæ£€ç´¢ç»“æœè®¡ç®—ç›¸å…³æ€§åˆ†æ•°ã€‚</li>
<li>å½’ä¸€åŒ–ï¼šé‡æ’åºæ¨¡å‹åŸå§‹è¾“å‡ºåˆ†æ•°æ²¡æœ‰å›ºå®šçš„èŒƒå›´ï¼Œå®ƒå¯èƒ½æ˜¯ä»»æ„å®æ•°ï¼Œå°†ç»“æœå½’ä¸€åŒ–å¤„ç†ï¼Œå°†åˆ†æ•°æ˜ å°„åˆ° [0, 1] èŒƒå›´å†…ï¼Œä½¿å…¶æ›´å®¹æ˜“ä¸å‘é‡ç›¸ä¼¼åº¦åˆ†æ•°è¿›è¡Œæ¯”è¾ƒã€‚</li>
</ul>
<p>ä¾‹å¦‚ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a7edad535c0942678b7403740b1d8876~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766980728&amp;x-signature=AlUML6Pn%2BV1n5p84JW6MtPdrPDk%3D" alt="" loading="lazy"/></p>
<ul>
<li>å¸¸ç”¨çš„é‡æ’åºæ¨¡å‹ï¼š</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2bd66d6756f34e6284f39d99a59a4106~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766980728&amp;x-signature=E4nZM4Ry7EfTDxruh8G2SpsPSM0%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-21"><strong>2.2.3 ä¿¡æ¯æ•´åˆ</strong></h4>
<p>æ ¼å¼åŒ–æ£€ç´¢çš„ç»“æœï¼Œæ„å»ºæç¤ºè¯æ¨¡æ¿ï¼ŒåŒæ—¶å°†æœç´¢çš„å†…å®¹æˆªæ–­æˆ–æ‘˜è¦é•¿æ–‡æœ¬ä»¥é€‚åº”LLMä¸Šä¸‹æ–‡çª—å£tokenã€‚</p>
<p>æç¤ºè¯ä¼˜åŒ–ï¼š</p>
<ol>
<li>é™å®šå›ç­”èŒƒå›´</li>
<li>è¦æ±‚æ ‡æ³¨æ¥æº</li>
<li>è®¾ç½®æ‹’ç»å›ç­”è§„åˆ™</li>
<li>...</li>
</ol>
<p>ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">prompt</span> æ¨¡æ¿ï¼š
ä½ æ˜¯ä¸€å<span class="hljs-selector-tag">ROMA</span>æ¡†æ¶ä¸“å®¶ï¼Œè¯·åŸºäºä»¥ä¸‹ä¸Šä¸‹æ–‡å›ç­”ï¼š
å‚è€ƒä¿¡æ¯:
<span class="hljs-selector-attr">[æ–‡æ¡£1]</span> ä»€ä¹ˆæ˜¯ <span class="hljs-selector-tag">ROMA</span>ï¼Ÿ
<span class="hljs-selector-tag">ROMA</span> æ˜¯ä¸€ä¸ªå…¨è‡ªä¸»ç ”å‘çš„å‰ç«¯å¼€å‘åŸºäºè‡ªå®šä¹‰<span class="hljs-selector-tag">DSL</span>(Jueè¯­è¨€)ï¼Œä¸€ä»½ä»£ç ï¼Œå¯åœ¨<span class="hljs-selector-tag">iOS</span>ã€<span class="hljs-selector-tag">Android</span>ã€<span class="hljs-selector-tag">Harmony</span>ã€<span class="hljs-selector-tag">Web</span>å››ç«¯è¿è¡Œçš„è·¨å¹³å°è§£å†³æ–¹æ¡ˆã€‚
<span class="hljs-selector-tag">ROMA</span> æ¡†æ¶çš„ä¸­æ–‡åä¸ºç½—ç ã€‚
<span class="hljs-selector-attr">[æ–‡æ¡£2]</span> <span class="hljs-selector-tag">Roma</span>ä»‹ç»ï¼Ÿ
<span class="hljs-selector-attr">[Romaä»‹ç»]</span>(docs/guide/guide/introduction.md)
æ–‡æ¡£åœ°å€: <span class="hljs-selector-tag">https</span>:<span class="hljs-comment">//roma-design.jd.com/docs/guide/guide/introduction.html</span>
è¦æ±‚ï¼š
<span class="hljs-number">1</span>. åˆ†æ­¥éª¤è¯´æ˜ï¼Œå«ä»£ç ç¤ºä¾‹
<span class="hljs-number">2</span>. æ ‡æ³¨æ¥æºæ–‡æ¡£ç‰ˆæœ¬
<span class="hljs-number">3</span>. å¦‚æœå‚è€ƒä¿¡æ¯ä¸­æ²¡æœ‰ç›¸å…³å†…å®¹ï¼Œè¯·ç›´æ¥è¯´æ˜æ— æ³•å›ç­”ï¼Œä¸è¦ç¼–é€ ä¿¡æ¯
è¯·åŸºäºä»¥ä¸‹å‚è€ƒä¿¡æ¯å›ç­”ç”¨æˆ·çš„é—®é¢˜ã€‚å¦‚æœå‚è€ƒä¿¡æ¯ä¸­æ²¡æœ‰ç›¸å…³å†…å®¹ï¼Œè¯·ç›´æ¥è¯´æ˜æ— æ³•å›ç­”ï¼Œä¸è¦ç¼–é€ ä¿¡æ¯ã€‚
ç”¨æˆ·é—®é¢˜: <span class="hljs-selector-tag">ROMA</span>æ˜¯ä»€ä¹ˆï¼Ÿ
å›ç­”: {<span class="hljs-selector-tag">answer</span>}
</code></pre>
<h4 data-id="heading-22"><strong>2.2.4 LLMç”Ÿæˆ</strong></h4>
<p>å‘LLMï¼ˆå¦‚GPT-4ã€Claudeï¼‰å‘é€æç¤ºï¼Œè·å–ç”Ÿæˆç»“æœã€‚</p>
<ul>
<li>AutoBots(JoyAgent)ç¤ºä¾‹ï¼š</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b4a819d3c165478db42301782cdcd42e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766980728&amp;x-signature=b6dqJn%2FQqhBs00o%2BiQBGlPLzVmM%3D" alt="" loading="lazy"/></p>
<p>ä»¥ä¸Šï¼Œå®ç°äº†æœ€ç®€å•çš„RAGæµç¨‹ã€‚å®é™…çš„RAGè¿‡ç¨‹ä¼šæ¯”ä¸Šè¿°éº»çƒ¦æ›´å¤šï¼ŒåŒ…æ‹¬å›¾ç‰‡ã€è¡¨æ ¼ç­‰å¤šæ¨¡æ€å†…å®¹çš„å¤„ç†ï¼Œæ›´å¤æ‚çš„æ–‡æœ¬è§£æå’Œé¢„å¤„ç†è¿‡ç¨‹ï¼Œæ–‡æ¡£æ ¼å¼çš„å…¼å®¹ï¼Œç»“æ„åŒ–ä¸éç»“æ„åŒ–æ•°æ®çš„å…¼å®¹ç­‰ç­‰ã€‚</p>
<p>æœ€åï¼Œå±•ç¤ºä¸€ä¸‹RAGå„é˜¶æ®µçš„ä¼˜åŒ–æ–¹å¼ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/448a68ba3ccf40b1b2cfd0f34880f184~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766980728&amp;x-signature=dycYOqrUNMnDkw9JdDEYlsG9sbc%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-23">å­¦ä¹ èµ„æºæ¨è</h3>
<p>å¦‚æœä½ æƒ³æ›´æ·±å…¥åœ°å­¦ä¹ å¤§æ¨¡å‹ï¼Œä»¥ä¸‹æ˜¯ä¸€äº›éå¸¸æœ‰ä»·å€¼çš„å­¦ä¹ èµ„æºï¼Œè¿™äº›èµ„æºå°†å¸®åŠ©ä½ ä»ä¸åŒè§’åº¦å­¦ä¹ å¤§æ¨¡å‹ï¼Œæå‡ä½ çš„å®è·µèƒ½åŠ›ã€‚</p>
<blockquote>
<p>æœ¬æ–‡è¾ƒé•¿ï¼Œå»ºè®®ç‚¹èµæ”¶è—ã€‚æ›´å¤šAIå¤§æ¨¡å‹åº”ç”¨å¼€å‘å­¦ä¹ è§†é¢‘åŠèµ„æ–™ï¼Œåœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fgitcode.com%2FEnjoyEDU%2FLLM" target="_blank" title="https://gitcode.com/EnjoyEDU/LLM" ref="nofollow noopener noreferrer">è¿™é‡Œ</a>ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Node.js åŸç”ŸåŠŸèƒ½ç‹‚é£™ï¼Œ15 ä¸ªçƒ­é—¨ npm åŒ…è¦å¤±ä¸šäº†]]></title>    <link>https://juejin.cn/post/7586192313635389474</link>    <guid>https://juejin.cn/post/7586192313635389474</guid>    <pubDate>2025-12-22T04:00:10.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7586192313635389474" data-draft-id="7586136543954812966" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Node.js åŸç”ŸåŠŸèƒ½ç‹‚é£™ï¼Œ15 ä¸ªçƒ­é—¨ npm åŒ…è¦å¤±ä¸šäº†"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯"/> <meta itemprop="datePublished" content="2025-12-22T04:00:10.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Immerse"/> <meta itemprop="url" content="https://juejin.cn/user/2708812817761752"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Node.js åŸç”ŸåŠŸèƒ½ç‹‚é£™ï¼Œ15 ä¸ªçƒ­é—¨ npm åŒ…è¦å¤±ä¸šäº†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2708812817761752/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Immerse
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-22T04:00:10.000Z" title="Mon Dec 22 2025 04:00:10 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯ Immerseï¼Œä¸€åç‹¬ç«‹å¼€å‘è€…ã€å†…å®¹åˆ›ä½œè€…ã€AGI å®è·µè€…ã€‚</p>
<p>å…³æ³¨å…¬ä¼—å·ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fyaolifeng.com%2Fother%2Fwx_public_account.webp" target="_blank" title="https://yaolifeng.com/other/wx_public_account.webp" ref="nofollow noopener noreferrer">æ²‰æµ¸å¼è¶£è°ˆ</a>ï¼Œè·å–æœ€æ–°æ–‡ç« ï¼ˆæ›´å¤šå†…å®¹åªåœ¨å…¬ä¼—å·æ›´æ–°ï¼‰</p>
<p>ä¸ªäººç½‘ç«™ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fyaolifeng.com" target="_blank" title="https://yaolifeng.com" ref="nofollow noopener noreferrer">yaolifeng.com</a> ä¹ŸåŒæ­¥æ›´æ–°ã€‚</p>
<p>è½¬è½½è¯·åœ¨æ–‡ç« å¼€å¤´æ³¨æ˜å‡ºå¤„å’Œç‰ˆæƒä¿¡æ¯ã€‚</p>
<p>æˆ‘ä¼šåœ¨è¿™é‡Œåˆ†äº«å…³äº<code>ç¼–ç¨‹</code>ã€<code>ç‹¬ç«‹å¼€å‘</code>ã€<code>AIå¹²è´§</code>ã€<code>å¼€æº</code>ã€<code>ä¸ªäººæ€è€ƒ</code>ç­‰å†…å®¹ã€‚</p>
<p>å¦‚æœæœ¬æ–‡å¯¹æ‚¨æœ‰æ‰€å¸®åŠ©ï¼Œæ¬¢è¿åŠ¨åŠ¨å°æ‰‹æŒ‡ä¸€é”®ä¸‰è¿(<code>ç‚¹èµ</code>ã€<code>è¯„è®º</code>ã€<code>è½¬å‘</code>)ï¼Œç»™æˆ‘ä¸€äº›æ”¯æŒå’Œé¼“åŠ±ï¼Œè°¢è°¢ï¼</p>
<hr/>
<p>ä¹‹å‰è£…ä¸ª Node.js é¡¹ç›®ï¼Œnpm åŒ…èƒ½è£…ä¸€å¤§å †ã€‚</p>
<p>ç°åœ¨å‘ç°å¾ˆå¤šåŒ…å…¶å®ä¸ç”¨è£…äº†ï¼ŒNode.js è‡ªå·±å°±æ”¯æŒã€‚</p>
<p>è¿™æ¬¡æ•´ç†äº† 15 ä¸ªå·²ç»è¢« Node.js åŸç”ŸåŠŸèƒ½æ›¿ä»£çš„çƒ­é—¨ npm åŒ…ã€‚</p>
<p>æœ‰äº›å·²ç»ç¨³å®šäº†ï¼Œæœ‰äº›è¿˜åœ¨å®éªŒé˜¶æ®µï¼Œä½†éƒ½èƒ½ç”¨èµ·æ¥äº†ã€‚</p>
<h2 data-id="heading-0">fetch ç»ˆäºæˆå…¨å±€å‡½æ•°äº†</h2>
<p>ä»¥å‰åœ¨ Node.js é‡Œç”¨ fetchï¼Œå¿…é¡»è£… node-fetchã€‚</p>
<p>ç°åœ¨ Node.js 18 å¼€å§‹ï¼Œfetch å·²ç»æ˜¯å…¨å±€å‡½æ•°äº†ï¼Œå’Œæµè§ˆå™¨é‡Œçš„ç”¨æ³•å®Œå…¨ä¸€æ ·ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">"https://api.github.com/repos/nodejs/node"</span>);
<span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> res.<span class="hljs-title function_">json</span>();
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data.<span class="hljs-property">full_name</span>);
</code></pre>
<p>ç›´æ¥å°±èƒ½ç”¨ï¼Œä¸ç”¨è£…ä»»ä½•åŒ…ã€‚</p>
<p>Node.js 17.5 å¼€å§‹å®éªŒæ€§æ”¯æŒï¼Œåˆ° 18 å°±ç¨³å®šäº†ã€‚</p>
<p>å¦‚æœä½ çš„é¡¹ç›®è¿˜åœ¨ç”¨ Node.js 18 ä¹‹å‰çš„ç‰ˆæœ¬ï¼Œé‚£è¿˜æ˜¯å¾—è£… node-fetchã€‚</p>
<h2 data-id="heading-1">WebSocket ä¹ŸåŸç”Ÿæ”¯æŒäº†</h2>
<p>ä¹‹å‰åš WebSocket å®¢æˆ·ç«¯ï¼ŒåŸºæœ¬éƒ½ç”¨ ws è¿™ä¸ªåŒ…ã€‚</p>
<p>ç°åœ¨ Node.js æœ‰äº†å…¨å±€çš„ WebSocket ç±»ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> ws = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WebSocket</span>(<span class="hljs-string">"wss://echo.websocket.org"</span>);

ws.<span class="hljs-property">onopen</span> = <span class="hljs-function">() =&gt;</span> ws.<span class="hljs-title function_">send</span>(<span class="hljs-string">"Hello!"</span>);
ws.<span class="hljs-property">onmessage</span> = <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Received:"</span>, event.<span class="hljs-property">data</span>);
</code></pre>
<p>Node.js 21 åŠ çš„ï¼Œä¸è¿‡è¿˜æ˜¯å®éªŒæ€§çš„ã€‚</p>
<p>è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™åªæ˜¯å®¢æˆ·ç«¯æ”¯æŒã€‚</p>
<p>å¦‚æœè¦åš WebSocket æœåŠ¡ç«¯ï¼Œè¿˜æ˜¯å¾—ç”¨ ws æˆ–è€…å…¶ä»–åº“ã€‚</p>
<h2 data-id="heading-2">æµ‹è¯•æ¡†æ¶ä¸ç”¨è£…äº†</h2>
<p>ä»¥å‰å†™æµ‹è¯•ï¼Œè¦è£… mochaã€jest è¿™äº›æ¡†æ¶ã€‚</p>
<p>ç°åœ¨ Node.js è‡ªå¸¦æµ‹è¯•æ¨¡å— node:testã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> test <span class="hljs-keyword">from</span> <span class="hljs-string">"node:test"</span>;
<span class="hljs-keyword">import</span> assert <span class="hljs-keyword">from</span> <span class="hljs-string">"node:assert"</span>;

<span class="hljs-title function_">test</span>(<span class="hljs-string">"addition works"</span>, <span class="hljs-function">() =&gt;</span> {
  assert.<span class="hljs-title function_">strictEqual</span>(<span class="hljs-number">2</span> + <span class="hljs-number">2</span>, <span class="hljs-number">4</span>);
});
</code></pre>
<p>Node.js 18 åŠ çš„å®éªŒæ€§åŠŸèƒ½ï¼Œåˆ° 20 å°±ç¨³å®šäº†ã€‚</p>
<p>å¦‚æœéœ€è¦å¿«ç…§æµ‹è¯•ã€mock è¿™äº›é«˜çº§åŠŸèƒ½ï¼Œç¬¬ä¸‰æ–¹æ¡†æ¶è¿˜æ˜¯æ›´å¼ºã€‚</p>
<p>ä¸è¿‡å¯¹äºæ¨¡å—çº§åˆ«çš„æµ‹è¯•ï¼Œnode:test å®Œå…¨å¤Ÿç”¨äº†ã€‚</p>
<h2 data-id="heading-3">SQLite ä¹Ÿè¦åŸç”Ÿæ”¯æŒäº†</h2>
<p>ä¹‹å‰ç”¨ SQLiteï¼Œè¦è£… sqlite3 æˆ– better-sqlite3ã€‚</p>
<p>è¿™ä¿©åŒ…éƒ½éœ€è¦ç¼–è¯‘åŸç”Ÿæ¨¡å—ï¼Œå‡çº§ Node.js ç‰ˆæœ¬ç»å¸¸å‡ºé—®é¢˜ã€‚</p>
<p>ç°åœ¨ Node.js åœ¨å¼€å‘ node:sqlite æ¨¡å—ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { open } <span class="hljs-keyword">from</span> <span class="hljs-string">"node:sqlite"</span>;

<span class="hljs-keyword">const</span> db = <span class="hljs-keyword">await</span> <span class="hljs-title function_">open</span>(<span class="hljs-string">":memory:"</span>);
<span class="hljs-keyword">await</span> db.<span class="hljs-title function_">exec</span>(<span class="hljs-string">"CREATE TABLE users (id INTEGER, name TEXT)"</span>);
</code></pre>
<p>ä¸è¿‡è¿˜æ˜¯å®éªŒæ€§çš„ï¼Œç­‰ç¨³å®šäº†å°±èƒ½å½»åº•å‘Šåˆ«ç¼–è¯‘é—®é¢˜äº†ã€‚</p>
<h2 data-id="heading-4">æ§åˆ¶å°å½©è‰²è¾“å‡ºä¸ç”¨è£… chalk äº†</h2>
<p>ç»™æ§åˆ¶å°è¾“å‡ºåŠ é¢œè‰²ï¼Œä»¥å‰éƒ½ç”¨ chalk æˆ– kleurã€‚</p>
<p>ç°åœ¨ Node.js æœ‰ util.styleText å‡½æ•°ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { styleText } <span class="hljs-keyword">from</span> <span class="hljs-string">"node:util"</span>;

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">styleText</span>(<span class="hljs-string">"red"</span>, <span class="hljs-string">"Error!"</span>));
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">styleText</span>([<span class="hljs-string">"bold"</span>, <span class="hljs-string">"green"</span>], <span class="hljs-string">"Success!"</span>));
</code></pre>
<p>Node.js 20.12 åŠ çš„ï¼Œåˆ° 22.17 å°±ç¨³å®šäº†ã€‚</p>
<p>å¦‚æœéœ€è¦å¤æ‚çš„ä¸»é¢˜é…ç½®æˆ–é“¾å¼è°ƒç”¨ï¼Œchalk è¿˜æ˜¯æ›´å¥½ç”¨ã€‚</p>
<p>ä½†ç®€å•çš„é¢œè‰²è¾“å‡ºï¼ŒåŸç”Ÿçš„å°±å¤Ÿäº†ã€‚</p>
<h2 data-id="heading-5">æ¸…ç† ANSI ç ä¹Ÿä¸ç”¨è£…åŒ…äº†</h2>
<p>ä»¥å‰è¦å»æ‰æ—¥å¿—é‡Œçš„ ANSI è½¬ä¹‰ç ï¼Œå¾—è£… strip-ansiã€‚</p>
<p>ç°åœ¨æœ‰ util.stripVTControlCharacters å‡½æ•°ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { stripVTControlCharacters } <span class="hljs-keyword">from</span> <span class="hljs-string">"node:util"</span>;

<span class="hljs-keyword">const</span> text = <span class="hljs-string">"\u001B[4mUnderlined\u001B[0m"</span>;
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">stripVTControlCharacters</span>(text));
</code></pre>
<p>åŸç”Ÿå¤„ç†ï¼Œç¨³å®šå¯é ã€‚</p>
<p>åŸºæœ¬ä¸éœ€è¦å†è£…ç¬¬ä¸‰æ–¹åŒ…äº†ã€‚</p>
<h2 data-id="heading-6">glob åŒ¹é…æ–‡ä»¶ä¹ŸåŸç”Ÿäº†</h2>
<p>åŒ¹é…æ–‡ä»¶è·¯å¾„ï¼Œä»¥å‰å¿…é¡»ç”¨ glob åŒ…ã€‚</p>
<p>Node.js 22 å¼€å§‹æœ‰ fs.glob å‡½æ•°äº†ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> fs <span class="hljs-keyword">from</span> <span class="hljs-string">"node:fs/promises"</span>;

<span class="hljs-keyword">const</span> files = <span class="hljs-keyword">await</span> fs.<span class="hljs-title function_">glob</span>(<span class="hljs-string">"**/*.js"</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(files);
</code></pre>
<p>22 ç‰ˆæœ¬å°±ç¨³å®šäº†ï¼Œå¯ä»¥æ”¾å¿ƒç”¨ã€‚</p>
<p>è€é¡¹ç›®è¿˜åœ¨ç”¨æ—§ç‰ˆæœ¬ Node.js çš„è¯ï¼Œè¿˜æ˜¯å¾—ç»§ç»­ç”¨ glob åŒ…ã€‚</p>
<h2 data-id="heading-7">é€’å½’åˆ é™¤ç›®å½•ä¸ç”¨ rimraf äº†</h2>
<p>åˆ é™¤æ•´ä¸ªç›®å½•æ ‘ï¼Œä»¥å‰éƒ½ç”¨ rimrafã€‚</p>
<p>ç°åœ¨ fs.rm ç›´æ¥æ”¯æŒé€’å½’åˆ é™¤ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> fs <span class="hljs-keyword">from</span> <span class="hljs-string">"node:fs/promises"</span>;

<span class="hljs-keyword">await</span> fs.<span class="hljs-title function_">rm</span>(<span class="hljs-string">"dist"</span>, { <span class="hljs-attr">recursive</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">force</span>: <span class="hljs-literal">true</span> });
</code></pre>
<p>Node.js 12.10 å°±æœ‰äº†ï¼Œç°åœ¨æ‰€æœ‰ LTS ç‰ˆæœ¬éƒ½ç¨³å®šæ”¯æŒã€‚</p>
<h2 data-id="heading-8">é€’å½’åˆ›å»ºç›®å½•ä¹Ÿä¸ç”¨ mkdir äº†</h2>
<p>åˆ›å»ºå¤šçº§ç›®å½•ï¼Œä»¥å‰è¦è£… mkdirã€‚</p>
<p>ç°åœ¨ fs.mkdir åŸç”Ÿæ”¯æŒã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">await</span> fs.<span class="hljs-title function_">mkdir</span>(<span class="hljs-string">"logs/app"</span>, { <span class="hljs-attr">recursive</span>: <span class="hljs-literal">true</span> });
</code></pre>
<p>Node.js 10.12 å°±åŠ äº†ï¼Œæ—©å°±ç¨³å®šäº†ã€‚</p>
<h2 data-id="heading-9">UUID ç”Ÿæˆä¸ç”¨è£…åŒ…äº†</h2>
<p>ç”Ÿæˆ UUID v4ï¼Œä»¥å‰è¦è£… uuid åŒ…ã€‚</p>
<p>ç°åœ¨ crypto æ¨¡å—è‡ªå¸¦ randomUUID å‡½æ•°ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { randomUUID } <span class="hljs-keyword">from</span> <span class="hljs-string">"node:crypto"</span>;

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">randomUUID</span>());
</code></pre>
<p>Node.js 14.17 å°±æœ‰äº†ï¼Œç¨³å®šç‰ˆæœ¬ã€‚</p>
<h2 data-id="heading-10">Base64 ç¼–è§£ç ä¹ŸåŸç”Ÿæ”¯æŒäº†</h2>
<p>ä»¥å‰è¦ polyfill atob å’Œ btoa å‡½æ•°ã€‚</p>
<p>ç°åœ¨è¿™ä¿©å·²ç»æ˜¯å…¨å±€å‡½æ•°äº†ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> encoded = <span class="hljs-title function_">btoa</span>(<span class="hljs-string">"hello"</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(encoded);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">atob</span>(encoded));
</code></pre>
<p>Buffer ä¸€ç›´éƒ½æœ‰ï¼Œç°åœ¨åŠ ä¸Š atob å’Œ btoaï¼Œæµè§ˆå™¨å’Œ Node.js çš„ä»£ç ç»ˆäºç»Ÿä¸€äº†ã€‚</p>
<p>Node.js 20 å·¦å³åŠ çš„ï¼Œç°åœ¨ LTS ç‰ˆæœ¬éƒ½æœ‰ã€‚</p>
<h2 data-id="heading-11">URL è·¯ç”±åŒ¹é…æœ‰äº† URLPattern</h2>
<p>åšè·¯ç”±åŒ¹é…ï¼Œä»¥å‰è¦è£… url-patternã€‚</p>
<p>ç°åœ¨æœ‰å…¨å±€çš„ URLPattern APIã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> pattern = <span class="hljs-keyword">new</span> <span class="hljs-title class_">URLPattern</span>({ <span class="hljs-attr">pathname</span>: <span class="hljs-string">"/users/:id"</span> });
<span class="hljs-keyword">const</span> match = pattern.<span class="hljs-title function_">exec</span>(<span class="hljs-string">"/users/42"</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(match.<span class="hljs-property">pathname</span>.<span class="hljs-property">groups</span>.<span class="hljs-property">id</span>);
</code></pre>
<p>Node.js 20 åŠ çš„ï¼Œä¸è¿‡è¿˜æ˜¯å®éªŒæ€§çš„ã€‚</p>
<p>ä½†å·²ç»èƒ½ç”¨äº†ï¼Œè€Œä¸”å’Œæµè§ˆå™¨çš„ URLPattern å®Œå…¨ä¸€æ ·ã€‚</p>
<h2 data-id="heading-12">åŠ è½½ .env æ–‡ä»¶ä¸ä¸€å®šè¦ dotenv äº†</h2>
<p>ä¹‹å‰åŠ è½½ç¯å¢ƒå˜é‡æ–‡ä»¶ï¼Œå¿…é¡»è£… dotenvã€‚</p>
<p>ç°åœ¨å¯ä»¥ç”¨ --env-file å‚æ•°ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">node <span class="hljs-attr">--env-file</span>=.env app.js
</code></pre>
<p>Node.js 20.10 åŠ çš„å®éªŒæ€§åŠŸèƒ½ã€‚</p>
<p>å¦‚æœéœ€è¦å˜é‡å±•å¼€æˆ–å¤šæ–‡ä»¶æ”¯æŒï¼Œdotenv è¿˜æ˜¯æ›´å¼ºã€‚</p>
<p>ä½†ç®€å•åœºæ™¯ä¸‹ï¼ŒåŸç”Ÿçš„å°±å¤Ÿäº†ã€‚</p>
<h2 data-id="heading-13">EventTarget ä¹Ÿæ˜¯å…¨å±€çš„äº†</h2>
<p>ä»¥å‰ Node.js åªæœ‰ EventEmitterï¼Œè¦ç”¨ Web æ ‡å‡†çš„ EventTarget å¾—è£… event-target-shimã€‚</p>
<p>ç°åœ¨ EventTarget å·²ç»æ˜¯å…¨å±€çš„äº†ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> target = <span class="hljs-keyword">new</span> <span class="hljs-title class_">EventTarget</span>();
target.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"ping"</span>, <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"pong"</span>));
target.<span class="hljs-title function_">dispatchEvent</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Event</span>(<span class="hljs-string">"ping"</span>));
</code></pre>
<p>Node.js 15 åŠ çš„ï¼Œ15.4 å°±ç¨³å®šäº†ã€‚</p>
<p>æµè§ˆå™¨å’Œ Node.js ç»ˆäºå¯ä»¥ç”¨åŒæ ·çš„äº‹ä»¶ API äº†ã€‚</p>
<h2 data-id="heading-14">è¿è¡Œ TypeScript ä¸ä¸€å®šè¦ tsc äº†</h2>
<p>ä»¥å‰è¿è¡Œ .ts æ–‡ä»¶ï¼Œè¦è£… TypeScript ç¼–è¯‘å™¨æˆ– ts-nodeã€‚</p>
<p>ç°åœ¨ Node.js æœ‰å®éªŒæ€§çš„ TypeScript æ”¯æŒã€‚</p>
<pre><code class="hljs language-css" lang="css">node <span class="hljs-attr">--experimental-strip-types</span> app<span class="hljs-selector-class">.ts</span>
</code></pre>
<p>Node.js 21 åŠ çš„å®éªŒæ€§åŠŸèƒ½ã€‚</p>
<p>ä¸è¿‡è¿™åªæ˜¯å»æ‰ç±»å‹æ ‡æ³¨ï¼Œä¸åšç±»å‹æ£€æŸ¥ã€‚</p>
<p>ç”Ÿäº§ç¯å¢ƒè¿˜æ˜¯å¾—ç”¨å®Œæ•´çš„ TypeScript å·¥å…·é“¾ã€‚</p>
<h2 data-id="heading-15">ä¸ºå•¥ Node.js è¦æŠŠè¿™äº›åŠŸèƒ½å†…ç½®</h2>
<p>çœ‹è¿™äº›å˜åŒ–ï¼Œèƒ½å‘ç°ä¸€ä¸ªè¶‹åŠ¿ã€‚</p>
<p>ä»¥å‰éœ€è¦å¤–éƒ¨ä¾èµ–çš„åŠŸèƒ½ï¼Œç°åœ¨è¶Šæ¥è¶Šå¤šå˜æˆäº†æ ¸å¿ƒåŠŸèƒ½ã€‚</p>
<p>è¿™æ ·åšæœ‰å‡ ä¸ªå¥½å¤„ã€‚</p>
<p>å‡å°‘ä¾èµ–æ•°é‡ï¼Œé¡¹ç›®æ›´è½»é‡ã€‚</p>
<p>é™ä½ä¾›åº”é“¾æ”»å‡»é£é™©ï¼Œä¸ç”¨æ‹…å¿ƒæŸä¸ªåŒ…è¢«æŠ•æ¯’ã€‚</p>
<p>ä»£ç åœ¨æµè§ˆå™¨å’ŒæœåŠ¡ç«¯ä¹‹é—´æ›´å®¹æ˜“ç§»æ¤ã€‚</p>
<h2 data-id="heading-16">èƒ½ç”¨å°±ç”¨èµ·æ¥</h2>
<p>è¿™äº›åŸç”ŸåŠŸèƒ½ï¼Œæµè§ˆå™¨æ”¯æŒå¥½çš„å°±å¯ä»¥ç›´æ¥ç”¨äº†ã€‚</p>
<p>å®éªŒæ€§çš„åŠŸèƒ½å¯ä»¥åœ¨å¼€å‘ç¯å¢ƒå…ˆè¯•è¯•ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[nest.js / hono.js ä¸€èµ·å­¦ï¼æ—¥å¿—åŠŸèƒ½/ç»Ÿä¸€è¿”å›æ ¼å¼/é”™è¯¯å¤„ç†]]></title>    <link>https://juejin.cn/post/7585798113547829298</link>    <guid>https://juejin.cn/post/7585798113547829298</guid>    <pubDate>2025-12-22T02:14:42.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7585798113547829298" data-draft-id="7450771973871091724" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="nest.js / hono.js ä¸€èµ·å­¦ï¼æ—¥å¿—åŠŸèƒ½/ç»Ÿä¸€è¿”å›æ ¼å¼/é”™è¯¯å¤„ç†"/> <meta itemprop="keywords" content="Node.js,å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-22T02:14:42.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å­Ÿç¥¥_æˆéƒ½"/> <meta itemprop="url" content="https://juejin.cn/user/96412752684744"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            nest.js / hono.js ä¸€èµ·å­¦ï¼æ—¥å¿—åŠŸèƒ½/ç»Ÿä¸€è¿”å›æ ¼å¼/é”™è¯¯å¤„ç†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/96412752684744/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å­Ÿç¥¥_æˆéƒ½
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-22T02:14:42.000Z" title="Mon Dec 22 2025 02:14:42 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>åœ¨ç»§ç»­æ­å»º <strong>NestJS</strong> å’Œ <strong>Hono.js</strong> çš„é€šç”¨æ¡†æ¶ä¹‹å‰ï¼Œå¯ä»¥å…ˆå›é¡¾ä¸€ä¸‹å‰å‡ ç¯‡æ–‡ç« ï¼š</p>
<ul>
<li><a href="https://juejin.cn/post/7576555431943503882" target="_blank" title="https://juejin.cn/post/7576555431943503882">æ·±å…¥ NestJS åº•å±‚æ¦‚å¿µï¼ˆ1ï¼‰ï¼šä¾èµ–æ³¨å…¥å’Œé¢å‘åˆ‡é¢ç¼–ç¨‹ AOP</a></li>
<li><a href="https://juejin.cn/post/7580564126403362866" target="_blank" title="https://juejin.cn/post/7580564126403362866">NestJS / Hono.js ä¸€èµ·å­¦ï¼Hono çš„è®¾è®¡æ€æƒ³</a></li>
<li><a href="https://juejin.cn/post/7581448482544713754" target="_blank" title="https://juejin.cn/post/7581448482544713754">NestJS / Hono.js ä¸€èµ·å­¦ï¼å¼€å‘å‰å¿…å¤‡</a></li>
<li><a href="https://juejin.cn/post/7583727768543199268" target="_blank" title="https://juejin.cn/post/7583727768543199268">NestJS / Hono.js ä¸€èµ·å­¦ï¼å­—èŠ‚å›¢é˜Ÿå¦‚ä½•é…ç½®å¤šç¯å¢ƒæ”»ç•¥</a></li>
</ul>
<p>æœ¬ç¯‡æ–‡ç« ä¸»è¦å®ç° <strong>NestJS ä¸ Hono.js</strong> çš„ä»¥ä¸‹åŠŸèƒ½ï¼š</p>
<ol>
<li><strong>æ‰“å°æ—¥å¿— &amp; æ”¶é›†æ—¥å¿—</strong></li>
<li><strong>ç»Ÿä¸€è¿”å›å‰ç«¯çš„æ•°æ®æ ¼å¼</strong></li>
<li><strong>ç»Ÿä¸€é”™è¯¯å¤„ç†</strong></li>
</ol>
<p>è¿™äº›åŠŸèƒ½åœ¨å¾ˆå¤š NestJS æ•™ç¨‹ä¸­éƒ½æœ‰è¦†ç›–ï¼Œä½†æˆ‘ä»¬ä¼šåœ¨æ­¤åŸºç¡€ä¸Šåšä¸€äº›å¢å¼ºï¼š</p>
<ul>
<li>
<p><strong>æ—¥å¿—æ‰“å°å¢åŠ  <code>traceId</code> åŠŸèƒ½</strong></p>
<ul>
<li>åœ¨ Node.js é«˜å¹¶å‘åœºæ™¯ä¸‹ï¼Œ<strong>æ¯ä¸ªè¯·æ±‚çš„ traceId å¿…é¡»ç‹¬ç«‹</strong>ï¼Œå› ä¸ºå®ƒæ˜¯<strong>å•çº¿ç¨‹å¼‚æ­¥</strong>æ¨¡å‹ï¼Œå¦‚æœæˆ‘ä»¬åƒå†™ä¼ ç»ŸåŒæ­¥ä»£ç é‚£æ ·ç›´æ¥å®šä¹‰ä¸€ä¸ªå…¨å±€å˜é‡æ¥å­˜ <code>traceId</code>ï¼Œå°±ä¼šå‘ç”Ÿä¸¥é‡çš„â€œä¸²å·â€ç°è±¡ã€‚</li>
</ul>
</li>
</ul>
<p><strong>æ¡ˆä¾‹ï¼š</strong></p>
<p>å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ª Web æœåŠ¡ï¼ŒåŒæ—¶æ”¶åˆ°ä¸¤ä¸ªç”¨æˆ·è¯·æ±‚ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">let</span> traceId; <span class="hljs-comment">// å…¨å±€å˜é‡</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">handleRequest</span>(<span class="hljs-params">user</span>) {
  traceId = <span class="hljs-string">`trace-<span class="hljs-subst">${<span class="hljs-built_in">Math</span>.floor(<span class="hljs-built_in">Math</span>.random() * <span class="hljs-number">1000</span>)}</span>`</span>; <span class="hljs-comment">// ç»™å½“å‰è¯·æ±‚ç”Ÿæˆ traceId</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`[<span class="hljs-subst">${traceId}</span>] å¼€å§‹å¤„ç† <span class="hljs-subst">${user}</span> çš„è¯·æ±‚`</span>);

  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">// å¼‚æ­¥æ“ä½œï¼Œå¯èƒ½æ™šäºå…¶ä»–è¯·æ±‚æ‰§è¡Œ</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`[<span class="hljs-subst">${traceId}</span>] å®Œæˆå¤„ç† <span class="hljs-subst">${user}</span> çš„è¯·æ±‚`</span>);
  }, <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * <span class="hljs-number">1000</span>);
}

<span class="hljs-comment">// æ¨¡æ‹Ÿä¸¤ä¸ªç”¨æˆ·å‡ ä¹åŒæ—¶å‘èµ·è¯·æ±‚</span>
<span class="hljs-title function_">handleRequest</span>(<span class="hljs-string">'Alice'</span>);
<span class="hljs-title function_">handleRequest</span>(<span class="hljs-string">'Bob'</span>);
</code></pre>
<p><strong>å¯èƒ½çš„è¾“å‡ºï¼ˆä¸²å·ï¼‰</strong> ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp">[<span class="hljs-meta">trace-532</span>] å¼€å§‹å¤„ç† Alice çš„è¯·æ±‚
[<span class="hljs-meta">trace-764</span>] å¼€å§‹å¤„ç† Bob çš„è¯·æ±‚
[<span class="hljs-meta">trace-764</span>] å®Œæˆå¤„ç† Alice çš„è¯·æ±‚   â† é”™è¯¯ï¼Œæ—¥å¿— traceId è¢«è¦†ç›–ï¼Œå› ä¸ºå…¨å±€ç›®å‰çš„ traceId å·²ç»æ˜¯ trace<span class="hljs-number">-764</span> äº†
[<span class="hljs-meta">trace-764</span>] å®Œæˆå¤„ç† Bob çš„è¯·æ±‚
</code></pre>
<p>ä»¥ä¸Šçš„é—®é¢˜æœ‰äº›ç¬¨åŠæ³•å¯ä»¥å¤„ç†ï¼Œä½†æˆ‘ä»¬æœ€ç»ˆä¼šå€ŸåŠ© node.js AsyncLocalStorageï¼ˆåœ¨ nest.js æœ‰å¯¹åº”æ¨¡å—ï¼Œç®€å•å®ç°ï¼Œåœ¨ hono.js ä¸­æˆ‘ä»¬è‡ªå·±å°è£…ä¸€ä¸ªç±»ä¼¼åŠŸèƒ½çš„æ¨¡å—ã€‚ï¼‰</p>
<p>è¿˜æœ‰ä¸€ä¸ªå¿…é¡»äº†è§£çš„ï¼Œè¿™ä¸ª traceId æ˜¯æœåŠ¡ç«¯å¿…é¡»æœ‰çš„ï¼Œå› ä¸ºæˆ‘ä»¬çš„å¤„ç†ä¸€ä¸ªç”¨æˆ·è¯·æ±‚ä¼šç»è¿‡å¾ˆå¤šä¸­é—´ä»¶å¾ˆå¤šä¸åŒçš„æ¨¡å—å¤„ç†ï¼Œå¦‚ä½•åˆ¤æ–­ç»è¿‡è¿™ä¹ˆå¤šæ¨¡å—çš„æŸä¸ªè¯·æ±‚æ˜¯åŒä¸€ä¸ªè¯·æ±‚ï¼Œå°±è¦ç”¨è¿™ä¸ª traceId æ¥è®°å½•ã€‚</p>
<ul>
<li>
<p><strong>ç»Ÿä¸€è¿”å›å‰ç«¯çš„æ•°æ®æ ¼å¼</strong>ï¼Œä¾‹å¦‚ï¼Œæˆ‘ä»¬å¸Œæœ›æ‰€æœ‰æ¥å£è¿”å›ï¼š</p>
<pre><code class="hljs language-css" lang="css">```
{
  "<span class="hljs-selector-tag">code</span>": <span class="hljs-number">0</span>,
  <span class="hljs-string">"data"</span>: {...},
  "message": <span class="hljs-string">"success"</span>
}
```
</code></pre>
<ul>
<li><strong>å¯é€‰é…ç½®</strong>ï¼šæŸäº›è·¯ç”±å¯ä»¥è·³è¿‡ç»Ÿä¸€æ ¼å¼è¿”å›ã€‚</li>
</ul>
</li>
</ul>
<hr/>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†å…ˆä» nest.js æ¡†æ¶å¼€å§‹ï¼Œé€æ­¥å®ç°è¿™äº›åŠŸèƒ½ã€‚</p>
<h2 data-id="heading-1">nest.js é…ç½®</h2>
<h3 data-id="heading-2">é“¾è·¯æ—¥å¿—è¿½è¸ªåŠŸèƒ½</h3>
<p>è¿™å¥—ç³»ç»Ÿçš„çµé­‚åœ¨äº <code>nestjs-cls</code> å’Œ <code>Winston</code> çš„ç»“åˆã€‚</p>
<p>ä¸ºä»€ä¹ˆè¦è¿™ä¹ˆåšï¼Ÿ</p>
<p>åœ¨ Node.js å¼‚æ­¥ç¯å¢ƒä¸­ï¼Œä¼ ç»Ÿçš„å…¨å±€å˜é‡æ— æ³•åŒºåˆ†å“ªä¸ªæ—¥å¿—å±äºå“ªä¸ªç”¨æˆ·è¯·æ±‚ã€‚</p>
<ul>
<li><strong>ClsModule (ä¸Šä¸‹æ–‡å­˜å‚¨)</strong> ï¼šå°±åƒç»™æ¯ä¸ªè¿›ç«™çš„ä¹˜å®¢ï¼ˆè¯·æ±‚ï¼‰å‘ä¸€ä¸ªä¸“å±çš„â€œé€æ˜ä¿¡å°â€ã€‚è¿™ä¸ªä¿¡å°é‡Œè£…ç€ <code>traceId</code>ã€‚</li>
<li><strong>Winston (è®°å½•å‘˜)</strong> ï¼šå½“ç¨‹åºéœ€è¦è®°å½•æ—¥å¿—æ—¶ï¼Œè®°å½•å‘˜ä¼šä»è¿™ä¸ªâ€œä¿¡å°â€é‡Œæå‡º <code>traceId</code> ç›–åœ¨æ—¥å¿—æ¡ç›®ä¸Šã€‚</li>
</ul>
<p>è¿™æ ·ï¼Œå³ä¾¿æœåŠ¡å™¨åŒæ—¶å¤„ç† 1000 ä¸ªè¯·æ±‚ï¼Œä½ åªéœ€è¦åœ¨æ—¥å¿—é‡Œæœç´¢ç‰¹å®šçš„ <code>traceId</code>ï¼Œå°±èƒ½çœ‹åˆ°è¯¥è¯·æ±‚ä»â€œè¿›å…¥â€åˆ°â€œæŠ¥é”™â€çš„æ‰€æœ‰å¿ƒè·¯å†ç¨‹ã€‚</p>
<hr/>
<h3 data-id="heading-3">ä»£ç åŠŸèƒ½æ·±åº¦æ‹†è§£</h3>
<p>æˆ‘ä»¬å°†ä»£ç é€»è¾‘åˆ†ä¸ºä¸‰ä¸ªæ ¸å¿ƒæ¨¡å—æ¥ç†è§£ï¼š</p>
<h4 data-id="heading-4">ç¬¬ä¸€éƒ¨åˆ†ï¼šCLS ä¸Šä¸‹æ–‡åˆå§‹åŒ– (AppModule)</h4>
<p>è¿™æ˜¯å…¨é“¾è·¯è¿½è¸ªçš„èµ·ç‚¹ã€‚åœ¨æ ¹ module é…ç½®ï¼Œä¹Ÿå°±æ˜¯ app.module.tsä¸­å¢åŠ ï¼š</p>
<pre><code class="hljs language-TypeScript" lang="TypeScript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Module</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ConfigModule</span>, <span class="hljs-title class_">ConfigService</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/config'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ClsModule</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'nestjs-cls'</span>;
<span class="hljs-keyword">import</span> { randomUUID } <span class="hljs-keyword">from</span> <span class="hljs-string">'crypto'</span>;

<span class="hljs-meta">@Module</span>({
  <span class="hljs-attr">imports</span>: [
    <span class="hljs-comment">// ä¹‹å‰æ–‡ç« è®²çš„ç¯å¢ƒå˜é‡é…ç½®æ¨¡å—</span>
    <span class="hljs-title class_">ConfigModule</span>.<span class="hljs-title function_">forRoot</span>({
      <span class="hljs-attr">isGlobal</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// å…¨å±€å¯ç”¨ï¼Œæ— éœ€åœ¨æ¯ä¸ªæ¨¡å—å¯¼å…¥</span>
      <span class="hljs-attr">load</span>: [initConfig], <span class="hljs-comment">// ä½¿ç”¨è‡ªå®šä¹‰åŠ è½½å™¨</span>
    }),
    <span class="hljs-comment">// 1. åˆå§‹åŒ– CLS ä¸Šä¸‹æ–‡ï¼Œå¹¶è‡ªåŠ¨ç”Ÿæˆ traceId</span>
    <span class="hljs-title class_">ClsModule</span>.<span class="hljs-title function_">forRoot</span>({
      <span class="hljs-attr">global</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">middleware</span>: {
        <span class="hljs-attr">mount</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">generateId</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">idGenerator</span>: <span class="hljs-function">(<span class="hljs-params">req: <span class="hljs-built_in">any</span></span>) =&gt;</span>
          (req.<span class="hljs-property">headers</span>[<span class="hljs-string">'x-request-id'</span>] <span class="hljs-keyword">as</span> <span class="hljs-built_in">string</span>) ?? <span class="hljs-title function_">randomUUID</span>(), <span class="hljs-comment">// ä¼˜å…ˆä½¿ç”¨ header ä¸­çš„ ID</span>
      },
    }),
  ],
  <span class="hljs-attr">controllers</span>: [],
  <span class="hljs-attr">providers</span>: [],
})
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AppModule</span> {}

</code></pre>
<p>é€šè¿‡ä¼˜å…ˆè¯»å– <code>x-request-id</code>ï¼Œæˆ‘ä»¬å¯ä»¥å®ç°è·¨ç³»ç»Ÿçš„å…¨é“¾è·¯è¿½è¸ªï¼ˆå¦‚æœä½ çš„å‰ç«¯æˆ–ä¸Šæ¸¸ç½‘å…³ä¹Ÿå¸¦äº†è¿™ä¸ª IDï¼Œå°±èƒ½å®ç°çœŸæ­£çš„ç«¯åˆ°ç«¯æ‰“é€šï¼‰ã€‚</p>
<p>è¿™é‡Œæˆ‘ä»¬ç®€å•è¯´ä¸‹ ClsModule å®ç°çš„åŸºæœ¬åŸç†ï¼š</p>
<p>æˆ‘ä»¬åˆ†ä¸‰æ­¥æ¥å®ç°ï¼š</p>
<ul>
<li>ç¬¬ä¸€æ­¥ï¼šå°è£… ALS å·¥å…·ç±»</li>
</ul>
<p>è¿™æ˜¯æˆ‘ä»¬çš„â€œå‚¨ç‰©æŸœâ€ç®¡ç†å™¨ã€‚</p>
<pre><code class="hljs language-TypeScript" lang="TypeScript"><span class="hljs-comment">// cls.service.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">AsyncLocalStorage</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'async_hooks'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyClsService</span> {
  <span class="hljs-comment">// 1. åˆ›å»ºä¸€ä¸ªç‰©ç†å­˜å‚¨å¯¹è±¡</span>
  <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> storage = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AsyncLocalStorage</span>&lt;<span class="hljs-title class_">Map</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">any</span>&gt;&gt;();

  <span class="hljs-comment">// 2. å¯åŠ¨ä¸Šä¸‹æ–‡ï¼ˆåŒ…è£¹è¯·æ±‚ï¼‰</span>
  <span class="hljs-keyword">static</span> <span class="hljs-title function_">run</span>(<span class="hljs-params">callback: () =&gt; <span class="hljs-built_in">void</span></span>) {
    <span class="hljs-keyword">const</span> store = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">storage</span>.<span class="hljs-title function_">run</span>(store, callback);
  }

  <span class="hljs-comment">// 3. å­˜å‚¨æ•°æ®</span>
  <span class="hljs-keyword">static</span> <span class="hljs-title function_">set</span>(<span class="hljs-params">key: <span class="hljs-built_in">string</span>, value: <span class="hljs-built_in">any</span></span>) {
    <span class="hljs-keyword">const</span> store = <span class="hljs-variable language_">this</span>.<span class="hljs-property">storage</span>.<span class="hljs-title function_">getStore</span>();
    <span class="hljs-keyword">if</span> (store) store.<span class="hljs-title function_">set</span>(key, value);
  }

  <span class="hljs-comment">// 4. è·å–æ•°æ®</span>
  <span class="hljs-keyword">static</span> <span class="hljs-title function_">get</span>(<span class="hljs-params">key: <span class="hljs-built_in">string</span></span>) {
    <span class="hljs-keyword">const</span> store = <span class="hljs-variable language_">this</span>.<span class="hljs-property">storage</span>.<span class="hljs-title function_">getStore</span>();
    <span class="hljs-keyword">return</span> store?.<span class="hljs-title function_">get</span>(key);
  }
}
</code></pre>
<ul>
<li>ç¼–å†™ä¸­é—´ä»¶ (Middleware)</li>
</ul>
<p>åœ¨ NestJS ä¸­ï¼Œä¸­é—´ä»¶æ˜¯è¯·æ±‚è¿›æ¥çš„ç¬¬ä¸€ç«™ï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œâ€œå¼€å¯â€å‚¨ç‰©æŸœã€‚</p>
<pre><code class="hljs language-TypeScript" lang="TypeScript"><span class="hljs-comment">// cls.middleware.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Injectable</span>, <span class="hljs-title class_">NestMiddleware</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>;
<span class="hljs-keyword">import</span> { randomUUID } <span class="hljs-keyword">from</span> <span class="hljs-string">'crypto'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">MyClsService</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./cls.service'</span>;

<span class="hljs-meta">@Injectable</span>()
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyClsMiddleware</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">NestMiddleware</span> {
  <span class="hljs-title function_">use</span>(<span class="hljs-params">req: <span class="hljs-built_in">any</span>, res: <span class="hljs-built_in">any</span>, next: () =&gt; <span class="hljs-built_in">void</span></span>) {
    <span class="hljs-comment">// å…³é”®ç‚¹ï¼šå°†åç»­æ‰€æœ‰çš„é€»è¾‘ï¼ˆnextï¼‰éƒ½è¿è¡Œåœ¨ MyClsService.run çš„å›è°ƒé‡Œ</span>
    <span class="hljs-title class_">MyClsService</span>.<span class="hljs-title function_">run</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-keyword">const</span> traceId = req.<span class="hljs-property">headers</span>[<span class="hljs-string">'x-request-id'</span>] || <span class="hljs-title function_">randomUUID</span>();
      <span class="hljs-title class_">MyClsService</span>.<span class="hljs-title function_">set</span>(<span class="hljs-string">'traceId'</span>, traceId); <span class="hljs-comment">// å­˜å…¥ traceId</span>
      <span class="hljs-title function_">next</span>();
    });
  }
}
</code></pre>
<p>è¿™ä¸ªä¸­é—´ä»¶æ·»åŠ ä¹‹åï¼Œæ„å‘³ç€æ‰€æœ‰çš„è¯·æ±‚éƒ½ä¼šæœ‰ä¸€ä¸ª traceId å€¼ï¼Œé‚£åœ¨å…¶å®ƒåœ°æ–¹å¦‚ä½•è°ƒç”¨å‘¢ï¼Ÿè¯·çœ‹</p>
<ul>
<li>ç¬¬ä¸‰æ­¥ï¼šåœ¨ä»»ä½•åœ°æ–¹ä½¿ç”¨</li>
</ul>
<p>ç”±äº <code>AsyncLocalStorage</code> è·Ÿè¸ªçš„æ˜¯å¼‚æ­¥è°ƒç”¨æ ˆï¼Œä½ ä¸å†éœ€è¦é€šè¿‡å‚æ•°ä¼ é€’ <code>traceId</code>ã€‚</p>
<pre><code class="hljs language-TypeScript" lang="TypeScript"><span class="hljs-comment">// any.service.ts</span>
<span class="hljs-meta">@Injectable</span>()
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AnyService</span> {
  <span class="hljs-title function_">doSomething</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// åƒå˜é­”æœ¯ä¸€æ ·ï¼Œç›´æ¥æ‹¿ï¼</span>
    <span class="hljs-keyword">const</span> traceId = <span class="hljs-title class_">MyClsService</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">'traceId'</span>);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`[å½“å‰ä»»åŠ¡] TraceID æ˜¯: <span class="hljs-subst">${traceId}</span>`</span>);
  }
}
</code></pre>
<p>æˆ‘ä»¬æ¥ç€è®²æ—¥å¿—åŠŸèƒ½ï¼Œ</p>
<h3 data-id="heading-5">ç¬¬äºŒéƒ¨åˆ†ï¼šWinston åŠ¨æ€å·¥å‚ (common/logger)</h3>
<p>è¿™é‡Œä½“ç°äº†<strong>ç¯å¢ƒå·®å¼‚åŒ–å¤„ç†</strong>çš„æ€æƒ³ã€‚</p>

























<table><thead><tr><th><strong>ç‰¹æ€§</strong></th><th><strong>å¼€å‘ç¯å¢ƒ (Development)</strong></th><th><strong>ç”Ÿäº§ç¯å¢ƒ (Production)</strong></th></tr></thead><tbody><tr><td><strong>è¾“å‡ºç›®æ ‡</strong></td><td>åªæœ‰æ§åˆ¶å° (Console)</td><td>æ§åˆ¶å° + æ¯æ—¥æ»šåŠ¨æ–‡ä»¶ (Daily File)</td></tr><tr><td><strong>å±•ç¤ºæ ·å¼</strong></td><td>æ¼‚äº®çš„å½©è‰²ã€ç¼©è¿›ã€Nest é£æ ¼</td><td>ä¸¥è°¨çš„ JSON æ ¼å¼ï¼ˆæ–¹ä¾¿æ—¥å¿—åˆ†æç³»ç»Ÿ ELK æŠ“å–ï¼‰</td></tr><tr><td><strong>æ—¥å¿—ä¿ç•™</strong></td><td>éšå¯éšçœ‹</td><td>ä¿ç•™ 14 å¤©ï¼Œå•æ–‡ä»¶ 20MBï¼ˆé˜²æ­¢ç¡¬ç›˜çˆ†æ‰ï¼‰</td></tr></tbody></table>
<h3 data-id="heading-6">ç¬¬ä¸‰éƒ¨åˆ†ï¼šå¼‚æ­¥æ³¨å…¥ (WinstonModule.forRootAsync)</h3>
<p>è¿™æ˜¯ NestJS çš„é«˜çº§ç”¨æ³•ï¼Œç¡®ä¿æ—¥å¿—é…ç½®æ˜¯åœ¨è·å–åˆ°ç³»ç»Ÿé…ç½®ï¼ˆConfigServiceï¼‰ä¹‹åæ‰ç”Ÿæˆçš„ã€‚</p>
<p>åœ¨ app.module.ts ä¸­å¢åŠ  winstoné…ç½®</p>
<pre><code class="hljs language-TypeScript" lang="TypeScript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">WinstonModule</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'nest-winston'</span>;
<span class="hljs-keyword">import</span> { winstonConfigFactory } <span class="hljs-keyword">from</span> <span class="hljs-string">'./common/logger'</span>;

<span class="hljs-meta">@Module</span>({
  <span class="hljs-attr">imports</span>: [
     <span class="hljs-comment">// ... å…¶å®ƒé…ç½®</span>
    <span class="hljs-comment">// 2. æ³¨å…¥ Winston</span>
    <span class="hljs-comment">// 3. ä½¿ç”¨ forRootAsync å¼‚æ­¥åŠ è½½é…ç½®</span>
    <span class="hljs-title class_">WinstonModule</span>.<span class="hljs-title function_">forRootAsync</span>({
      <span class="hljs-attr">imports</span>: [<span class="hljs-title class_">ConfigModule</span>], <span class="hljs-comment">// å¯¼å…¥ ConfigModule ä»¥ä¾¿ä½¿ç”¨ ConfigService</span>
      <span class="hljs-attr">inject</span>: [<span class="hljs-title class_">ConfigService</span>], <span class="hljs-comment">// æ³¨å…¥ ConfigService</span>
      <span class="hljs-attr">useFactory</span>: <span class="hljs-function">(<span class="hljs-params">configService: ConfigService</span>) =&gt;</span> {
        <span class="hljs-comment">// è°ƒç”¨æˆ‘ä»¬æŠ½ç¦»å‡ºå»çš„é…ç½®å‡½æ•°</span>
        <span class="hljs-keyword">return</span> <span class="hljs-title function_">winstonConfigFactory</span>(configService);
      },
    }),
  ],
  <span class="hljs-attr">controllers</span>: [],
  <span class="hljs-attr">providers</span>: [],
})
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AppModule</span> {}

</code></pre>
<p>å…¶ä¸­  winstonConfigFactory çš„ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> winston, { transports, format } <span class="hljs-keyword">from</span> <span class="hljs-string">'winston'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'winston-daily-rotate-file'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ConfigService</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/config'</span>;
<span class="hljs-keyword">import</span> { utilities <span class="hljs-keyword">as</span> nestWinstonModuleUtilities } <span class="hljs-keyword">from</span> <span class="hljs-string">'nest-winston'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ClsServiceManager</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'nestjs-cls'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-variable constant_">DEFAULT_LOG_DIR</span>, <span class="hljs-variable constant_">DIR_NAME</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'src/config/constants'</span>;

<span class="hljs-comment">// ä¿æŒä¹‹å‰çš„ format å®šä¹‰ä¸å˜</span>
<span class="hljs-keyword">const</span> appendRequestId = <span class="hljs-title function_">format</span>(<span class="hljs-function">(<span class="hljs-params">info</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> cls = <span class="hljs-title class_">ClsServiceManager</span>.<span class="hljs-title function_">getClsService</span>();
  <span class="hljs-keyword">const</span> traceId = cls?.<span class="hljs-property">get</span>&lt;string&gt;(<span class="hljs-string">'traceId'</span>);
  <span class="hljs-keyword">if</span> (traceId) {
    info.<span class="hljs-property">traceId</span> = traceId;
  }
  <span class="hljs-keyword">return</span> info;
});

<span class="hljs-comment">// æ ¸å¿ƒä¿®æ”¹ï¼šå¯¼å‡ºä¸€ä¸ª Factory å‡½æ•°ï¼Œè€Œä¸æ˜¯é™æ€å¯¹è±¡</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">winstonConfigFactory</span> = (<span class="hljs-params">configService: ConfigService</span>) =&gt; {
  <span class="hljs-comment">// 1. ä» ConfigService è·å–é…ç½®ï¼Œæä¾›é»˜è®¤å€¼</span>
  <span class="hljs-keyword">const</span> logDir = configService.<span class="hljs-property">get</span>&lt;string&gt;(<span class="hljs-variable constant_">DIR_NAME</span>, <span class="hljs-variable constant_">DEFAULT_LOG_DIR</span>);
  <span class="hljs-keyword">const</span> isProduction = configService.<span class="hljs-property">get</span>&lt;string&gt;(<span class="hljs-string">'NODE_ENV'</span>) === <span class="hljs-string">'production'</span>;

  <span class="hljs-keyword">return</span> {
    <span class="hljs-attr">transports</span>: isProduction
      ? [
          <span class="hljs-comment">// 2. å®šä¹‰ DailyRotateFile (ä½¿ç”¨åŠ¨æ€è·¯å¾„)</span>
          <span class="hljs-comment">// é”™è¯¯æ—¥å¿—æŒ‰å¤©æ»šåŠ¨ï¼Œä¿ç•™ 14 å¤©ï¼Œæ¯ä¸ªæ–‡ä»¶æœ€å¤§ 20MB</span>
          <span class="hljs-comment">// ä»ç„¶æŠŠé”™è¯¯æ‰“å°åˆ°æ§åˆ¶å°ï¼ˆk8s / docker æ—¥å¿—ï¼‰</span>
          <span class="hljs-keyword">new</span> winston.<span class="hljs-property">transports</span>.<span class="hljs-title class_">Console</span>({
            <span class="hljs-attr">level</span>: <span class="hljs-string">'error'</span>,
            <span class="hljs-attr">format</span>: winston.<span class="hljs-property">format</span>.<span class="hljs-title function_">combine</span>(
              winston.<span class="hljs-property">format</span>.<span class="hljs-title function_">colorize</span>(),
              winston.<span class="hljs-property">format</span>.<span class="hljs-title function_">printf</span>(<span class="hljs-function">(<span class="hljs-params">info: any</span>) =&gt;</span> {
                <span class="hljs-keyword">const</span> trace = info.<span class="hljs-property">traceId</span> ? <span class="hljs-string">` [trace:<span class="hljs-subst">${info.traceId}</span>]`</span> : <span class="hljs-string">''</span>;
                <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">${info.timestamp}</span> <span class="hljs-subst">${info.level}</span><span class="hljs-subst">${trace}</span>: <span class="hljs-subst">${info.message}</span>`</span>;
              }),
            ),
          }),
          <span class="hljs-keyword">new</span> transports.<span class="hljs-title class_">DailyRotateFile</span>({
            <span class="hljs-attr">dirname</span>: logDir, <span class="hljs-comment">// &lt;--- è¿™é‡Œä½¿ç”¨äº†é…ç½®ä¸­çš„è·¯å¾„</span>
            <span class="hljs-attr">filename</span>: <span class="hljs-string">'error-%DATE%.log'</span>,
            <span class="hljs-attr">datePattern</span>: <span class="hljs-string">'YYYY-MM-DD'</span>,
            <span class="hljs-attr">maxSize</span>: <span class="hljs-string">'20m'</span>,
            <span class="hljs-attr">maxFiles</span>: <span class="hljs-string">'14d'</span>,
            <span class="hljs-attr">level</span>: <span class="hljs-string">'error'</span>,
            <span class="hljs-attr">format</span>: format.<span class="hljs-title function_">combine</span>(
              <span class="hljs-title function_">appendRequestId</span>(),
              format.<span class="hljs-title function_">timestamp</span>(),
              format.<span class="hljs-title function_">json</span>(),
            ),
          }),
        ]
      : [
          <span class="hljs-comment">// 3. å®šä¹‰ Console Transport</span>
          <span class="hljs-comment">// å¼€å‘ç¯å¢ƒé€šå¸¸åªéœ€è¦ Consoleï¼Œä¹Ÿå¯ä»¥æŒ‰éœ€åŠ  File</span>
          <span class="hljs-keyword">new</span> transports.<span class="hljs-title class_">Console</span>({
            <span class="hljs-attr">level</span>: <span class="hljs-string">'info'</span>,
            <span class="hljs-attr">format</span>: format.<span class="hljs-title function_">combine</span>(
              format.<span class="hljs-title function_">timestamp</span>(),
              nestWinstonModuleUtilities.<span class="hljs-property">format</span>.<span class="hljs-title function_">nestLike</span>(<span class="hljs-string">'MyApp'</span>, {
                <span class="hljs-attr">colors</span>: <span class="hljs-literal">true</span>,
                <span class="hljs-attr">prettyPrint</span>: <span class="hljs-literal">true</span>,
              }),
            ),
          }),
        ],
  };
};
</code></pre>
<p>æ³¨æ„ï¼Œä¸Šé¢çš„ä¾‹å­ï¼Œæˆ‘ä»¬åç»­ä¾‹å¦‚å•æœºä½¿ç”¨ docker-compose éƒ¨ç½²ä¹Ÿå¥½ï¼Œè¿˜æ˜¯ä½¿ç”¨k8s/k3séƒ¨ç½²ä¹Ÿå¥½ï¼Œå°±ä¸éœ€è¦ä½¿ç”¨winstonæœ¬èº«çš„ DailyRotateFile åŠŸèƒ½äº†ï¼Œå¯ä»¥å€ŸåŠ© docker æˆ–è€… k8s/k3s æœ¬èº«çš„æ—¥å¿—è½®è½¬åŠŸèƒ½å®ç°</p>
<p>ä¸ºäº†è®©è¿™å¥—ç³»ç»Ÿæ›´å®Œç¾ï¼Œåœ¨å®é™…åº”ç”¨ä¸­ï¼Œä½ å¯ä»¥è¿™æ ·ä½¿ç”¨ï¼š</p>
<h3 data-id="heading-7">å¦‚ä½•åœ¨ Service ä¸­æ‰“å°å¸¦ TraceId çš„æ—¥å¿—ï¼Ÿ</h3>
<p>è¿™é‡Œä½¿ç”¨ <code>this.logger.log</code> çš„æ—¶å€™ï¼Œä½ ä¸éœ€è¦æ‰‹åŠ¨å»å– IDï¼Œå› ä¸ºæˆ‘ä»¬åœ¨ <code>winstonConfigFactory</code> é‡Œçš„ <code>appendRequestId</code> å·²ç»è‡ªåŠ¨å¤„ç†äº†ã€‚æ‰€ä»¥ä¼šè‡ªå¸¦ traceId å±æ€§åœ¨æ—¥å¿—é‡Œã€‚</p>
<pre><code class="hljs language-TypeScript" lang="TypeScript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Logger</span>, <span class="hljs-title class_">Injectable</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>;

<span class="hljs-meta">@Injectable</span>()
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AppService</span> {
  <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> logger = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Logger</span>(<span class="hljs-title class_">AppService</span>.<span class="hljs-property">name</span>);

  <span class="hljs-title function_">doSomething</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">logger</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è¿™æ˜¯ä¸€æ¡å¸¦æœ‰ traceId çš„ä¸šåŠ¡æ—¥å¿—ï¼'</span>); 
    <span class="hljs-comment">// è¾“å‡ºç»“æœä¼šè‡ªåŠ¨å¸¦ä¸Š: {"traceId":"...", "message":"...", "timestamp":"..."}</span>
  }
}
</code></pre>
<p>æ¥ä¸‹æ¥å®ç°ç¬¬äºŒä¸ªåŠŸèƒ½ï¼Œå°†è¿”å›å‰ç«¯çš„æ ¼å¼ç»Ÿä¸€</p>
<h3 data-id="heading-8">ç»Ÿä¸€è¿”å›æ ¼å¼</h3>
<p>ç»Ÿä¸€æ ¼å¼ï¼Œåœ¨ nest.js ä¸­æœ‰æ‹¦æˆªå™¨å®ç°ï¼ˆhono.jså°±æ²¡æœ‰æ‹¦æˆªå™¨çš„æ¦‚å¿µï¼‰ï¼Œå¾ˆç®€å•ï¼š</p>
<h4 data-id="heading-9">nest.js ç»Ÿä¸€è¿”å›æ ¼å¼ï¼šç”¨æ‹¦æˆªå™¨å®ç°æ ‡å‡†å“åº”ç»“æ„</h4>
<p>åœ¨å‰åç«¯åˆ†ç¦»çš„ä¸šåŠ¡æ¶æ„ä¸­ï¼Œ<strong>ç»Ÿä¸€æ¥å£è¿”å›æ ¼å¼</strong>å·²æˆä¸ºæ ‡é…ï¼š<br/>
æ— è®ºåç«¯è¿”å›ä»€ä¹ˆï¼Œéƒ½åº”è¯¥åœ¨ä¸€å±‚æ ‡å‡†çš„æ ¼å¼ä¸­è¾“å‡ºï¼Œä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript">{
  <span class="hljs-string">"code"</span>: <span class="hljs-number">0</span>,
  <span class="hljs-string">"message"</span>: <span class="hljs-string">"OK"</span>,
  <span class="hljs-string">"data"</span>: {...},
  <span class="hljs-string">"traceId"</span>: <span class="hljs-string">"xxx"</span>
}
</code></pre>
<p>è¿™æ ·åšæœ‰å‡ ä¸ªç›´æ¥æ”¶ç›Šï¼š</p>
<ol>
<li>å‰ç«¯æ›´å®¹æ˜“åšå¼‚å¸¸å’Œå±•ç¤ºé€»è¾‘ï¼Œä¸éœ€è¦æ¯ä¸ªæ¥å£å•ç‹¬å¤„ç†ã€‚</li>
<li>æœåŠ¡ç«¯å¯ä»¥ç»Ÿä¸€æ ‡è®° traceIdï¼Œæ–¹ä¾¿é“¾è·¯æ’æŸ¥é—®é¢˜ã€‚</li>
<li>åè®®ä¸€è‡´åï¼Œå¯å¿«é€Ÿæ‰©å±•é”™è¯¯ç ä½“ç³»ã€‚</li>
</ol>
<p>åœ¨ nest.js ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <strong>Interceptorsï¼ˆæ‹¦æˆªå™¨ï¼‰</strong> æ¥å®Œæˆè¿™ä¸€ç›®æ ‡ã€‚ä¸‹é¢æ˜¯ä¸€æ®µå®Œæ•´çš„æ‹¦æˆªå™¨ä»£ç ã€‚</p>
<h4 data-id="heading-10">æ‹¦æˆªå™¨æ ¸å¿ƒä»£ç ç¤ºä¾‹</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> {
  <span class="hljs-title class_">Injectable</span>,
  <span class="hljs-title class_">NestInterceptor</span>,
  <span class="hljs-title class_">ExecutionContext</span>,
  <span class="hljs-title class_">CallHandler</span>,
} <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>;
<span class="hljs-keyword">import</span> { map } <span class="hljs-keyword">from</span> <span class="hljs-string">'rxjs/operators'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ClsService</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'nestjs-cls'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ErrorCodes</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'../constants'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">StandardResponse</span>&lt;T&gt; {
  <span class="hljs-attr">code</span>: <span class="hljs-built_in">number</span>;
  <span class="hljs-attr">message</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">data</span>: T;
  traceId?: <span class="hljs-built_in">string</span>;
}

<span class="hljs-meta">@Injectable</span>()
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">StandardResponseInterceptor</span>&lt;T&gt; <span class="hljs-keyword">implements</span> <span class="hljs-title class_">NestInterceptor</span>&lt;
  T,
  <span class="hljs-title class_">StandardResponse</span>&lt;T&gt;
&gt; {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> cls: ClsService</span>) {}

  <span class="hljs-title function_">intercept</span>(<span class="hljs-params">context: ExecutionContext, next: CallHandler</span>) {
    <span class="hljs-keyword">if</span> (context.<span class="hljs-title function_">getType</span>() !== <span class="hljs-string">'http'</span>) {
      <span class="hljs-keyword">return</span> next.<span class="hljs-title function_">handle</span>();
    }

    <span class="hljs-keyword">const</span> handler = context.<span class="hljs-title function_">getHandler</span>();
    <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">getMetadata</span>(<span class="hljs-string">'skip_transform'</span>, handler)) {
      <span class="hljs-keyword">return</span> next.<span class="hljs-title function_">handle</span>();
    }

    <span class="hljs-keyword">const</span> traceId = <span class="hljs-variable language_">this</span>.<span class="hljs-property">cls</span>.<span class="hljs-title function_">getId</span>();

    <span class="hljs-keyword">return</span> next.<span class="hljs-title function_">handle</span>().<span class="hljs-title function_">pipe</span>(
      <span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> ({
        <span class="hljs-attr">code</span>: <span class="hljs-title class_">ErrorCodes</span>.<span class="hljs-property">SUCCESS</span>,
        <span class="hljs-attr">message</span>: <span class="hljs-string">'OK'</span>,
        data,
        traceId,
      })),
    );
  }
}
</code></pre>
<p>è¯´æ˜ï¼š</p>
<ul>
<li>ClsService ç”¨äºè·å–å½“å‰è¯·æ±‚çš„ traceId</li>
<li>map() åŒ…è£¹æ‰€æœ‰è¿”å›å†…å®¹</li>
<li>æ‹¦æˆªå™¨åªåœ¨ HTTP è¯·æ±‚ä¸Šæ‰§è¡Œï¼ˆGraphQLã€Microservice å¯ä»¥å¿½ç•¥ï¼‰</li>
<li>å¯é€šè¿‡è‡ªå®šä¹‰ Decorator è·³è¿‡åŒ…è£…</li>
</ul>
<h4 data-id="heading-11">å¦‚ä½•æ³¨å†Œæ‹¦æˆªå™¨ï¼ˆå…¨å±€å¯ç”¨ï¼‰</h4>
<p>åœ¨ <code>main.ts</code> ä¸­ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript">app.<span class="hljs-title function_">useGlobalInterceptors</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">StandardResponseInterceptor</span>(app.<span class="hljs-title function_">get</span>(<span class="hljs-title class_">ClsService</span>)));
</code></pre>
<p>è¿™æ ·æ‰€æœ‰è·¯ç”±é»˜è®¤éƒ½ç»Ÿä¸€æ ¼å¼è¾“å‡ºã€‚</p>
<h4 data-id="heading-12">æŸäº›æ¥å£ä¸æƒ³è¢«ç»Ÿä¸€æ ¼å¼æ€ä¹ˆåŠï¼Ÿ</h4>
<p>ä¾‹å¦‚å¯¼å‡ºæ–‡ä»¶ç­‰ç‰¹æ®Šæ¥å£ï¼Œä¸å¸Œæœ›åŒ…è£¹ã€‚</p>
<p>ä½ å¯ä»¥åŠ è‡ªå®šä¹‰è£…é¥°å™¨ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> <span class="hljs-string">'reflect-metadata'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">SkipTransform</span> = (<span class="hljs-params"/>) =&gt; <span class="hljs-title class_">SetMetadata</span>(<span class="hljs-string">'skip_transform'</span>, <span class="hljs-literal">true</span>);
</code></pre>
<p>ä½¿ç”¨æ–¹å¼ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@Get</span>(<span class="hljs-string">'upload'</span>)
<span class="hljs-meta">@SkipTransform</span>()
<span class="hljs-title function_">getCaptcha</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> someRawBinary;
}
</code></pre>
<p>å½“å‰è·¯ç”±ä¼šè·³è¿‡ç»Ÿä¸€åŒ…è£¹ã€‚</p>
<h4 data-id="heading-13">å®é™…æ•ˆæœå±•ç¤º</h4>
<p>åŸæœ¬æ§åˆ¶å™¨è¿”å›ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@Get</span>(<span class="hljs-string">'user'</span>)
<span class="hljs-title function_">getUser</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> { <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'Tom'</span> };
}
</code></pre>
<p>æœ€ç»ˆå‰ç«¯æ”¶åˆ°ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript">{
  <span class="hljs-string">"code"</span>: <span class="hljs-number">0</span>,
  <span class="hljs-string">"message"</span>: <span class="hljs-string">"OK"</span>,
  <span class="hljs-string">"data"</span>: {
    <span class="hljs-string">"id"</span>: <span class="hljs-number">1</span>,
    <span class="hljs-string">"name"</span>: <span class="hljs-string">"Tom"</span>
  },
  <span class="hljs-string">"traceId"</span>: <span class="hljs-string">"abc-123-xyz"</span>
}
</code></pre>
<h2 data-id="heading-14">é€šç”¨é”™è¯¯å¤„ç†</h2>
<p>åœ¨åç«¯ç³»ç»Ÿä¸­ï¼Œé”™è¯¯å¤„ç†å¾€å¾€ç»å†ä¸‰ä¸ªé˜¶æ®µï¼š</p>
<ol>
<li>èƒ½è·‘ï¼ˆæ¡†æ¶å…œåº•ï¼‰</li>
<li>èƒ½è¿”å›ï¼ˆè®©å‰ç«¯çŸ¥é“é”™å“ªé‡Œï¼‰</li>
<li>èƒ½æ’éšœï¼ˆæ—¥å¿—é“¾è·¯ã€å®šä½æ•ˆç‡ï¼‰</li>
</ol>
<p>nestjs çš„ <code>ExceptionFilter</code> ä¸ºç¬¬ä¸‰é˜¶æ®µæä¾›äº†å®Œæ•´æ²»ç†èƒ½åŠ›ã€‚æœ¬èŠ‚é€šè¿‡è‡ªå®šä¹‰ <code>AllExceptionsFilter</code>ï¼Œä»â€œæ‹¦æˆªé”™è¯¯â€å¼€å§‹ï¼Œä¸€å±‚å±‚å¢å¼ºé”™è¯¯è¾“å‡ºã€ä¸šåŠ¡è¯­ä¹‰ã€æ—¥å¿—èƒ½åŠ›å’Œ traceId æ”¯æŒã€‚</p>
<h3 data-id="heading-15">ç¬¬ä¸€å±‚ï¼šæ‹¦æˆªæ‰€æœ‰å¼‚å¸¸ï¼Œè€Œä¸æ˜¯ä¾èµ–æ¡†æ¶é»˜è®¤è¡Œä¸º</h3>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œæ¡†æ¶ä¼šå°è¯•å¤„ç†å¼‚å¸¸ï¼Œä½†æ ¼å¼ã€å†…å®¹å’Œå¤„ç†æ–¹å¼ä¸å¯æ§ã€‚<br/>
é€šè¿‡ <code>@Catch()</code> æ‹¦æˆªå…¨åœºæ™¯é”™è¯¯ï¼Œæˆ‘ä»¬å°†æ¥ç®¡æ‰€æœ‰å¼‚å¸¸é€šé“ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@Catch</span>()
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AllExceptionsFilter</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">ExceptionFilter</span> {
  <span class="hljs-keyword">catch</span>(<span class="hljs-attr">exception</span>: <span class="hljs-built_in">unknown</span>, <span class="hljs-attr">host</span>: <span class="hljs-title class_">ArgumentsHost</span>) {
</code></pre>
<p>å€ŸåŠ© <code>ArgumentsHost</code>ï¼Œæˆ‘ä»¬æ‹¿åˆ° HTTP è¯·æ±‚ä¸Šä¸‹æ–‡ï¼Œåç»­å°±èƒ½æ„é€ ä¸“å±å“åº”ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> ctx = host.<span class="hljs-title function_">switchToHttp</span>();
<span class="hljs-keyword">const</span> response = ctx.<span class="hljs-property">getResponse</span>&lt;<span class="hljs-title class_">Response</span>&gt;();
<span class="hljs-keyword">const</span> request = ctx.<span class="hljs-property">getRequest</span>&lt;<span class="hljs-title class_">Request</span>&gt;();
</code></pre>
<p>æ­¤æ—¶çš„ç›®æ ‡æ˜¯â€œæŒæ§å…¥å£â€ã€‚</p>
<h3 data-id="heading-16">ç¬¬äºŒå±‚ï¼šåŒºåˆ† HTTP çŠ¶æ€ç ï¼Œè®©åè®®æ­£ç¡®è¡¨è¾¾æˆåŠŸæˆ–å¤±è´¥</h3>
<p>æ¡†æ¶å±‚èƒ½åŠ›æ‹¦æˆªä¹‹åï¼Œä¸‹ä¸€å±‚è¯‰æ±‚æ˜¯åè®®è¯­ä¹‰æ­£ç¡®ã€‚<br/>
å¯¹å®¢æˆ·ç«¯è¿”å›çš„ HTTP Status å¿…é¡»å‡†ç¡®ï¼Œå¦åˆ™ä»£ç†ã€æµè§ˆå™¨ã€ç›‘æ§ç³»ç»Ÿå‡æ— æ³•åˆ¤æ–­è¯·æ±‚æƒ…å†µï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> httpStatus =
  exception <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">HttpException</span>
    ? exception.<span class="hljs-title function_">getStatus</span>()
    : <span class="hljs-title class_">HttpStatus</span>.<span class="hljs-property">INTERNAL_SERVER_ERROR</span>;
</code></pre>
<p>ç®€å•è®²ï¼š</p>
<ul>
<li>å¯é¢„æœŸçš„ä¸šåŠ¡é”™è¯¯ç»´æŒ 4xx</li>
<li>å…¶å®ƒé”™è¯¯ä¸æƒ³è®©å‰ç«¯çŸ¥é“å…·ä½“é”™è¯¯ï¼Œç›´æ¥è¿”å›  <code>INTERNAL_SERVER_ERROR</code>ã€‚</li>
</ul>
<p>è¿™å®ç°äº†â€œç³»ç»Ÿå¯¹å¤–çš„åè®®æ²»ç†â€ã€‚</p>
<h3 data-id="heading-17">ç¬¬ä¸‰å±‚ï¼šå»ºç«‹ä¸šåŠ¡é”™è¯¯ç ä½“ç³»ï¼Œä¸åè®®è¯­ä¹‰è§£è€¦</h3>
<p>HTTP Status æ°¸è¿œä¸é€‚åˆä½œä¸ºä¸šåŠ¡åˆ¤æ–­ä¾æ®ã€‚<br/>
å› æ­¤ä½“ç³»åŒ–é¡¹ç›®ä¼šåˆ†ç¦»â€œåè®®é”™è¯¯ç â€å’Œâ€œä¸šåŠ¡é”™è¯¯ç â€ã€‚è¿™ä¸€æ­¥å®ç°ä¸šåŠ¡è¯­ä¹‰æ²»ç†ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">let</span> <span class="hljs-attr">businessCode</span>: <span class="hljs-built_in">number</span>;
<span class="hljs-keyword">if</span> (httpStatus &gt;= <span class="hljs-number">400</span> &amp;&amp; httpStatus &lt; <span class="hljs-number">500</span>) {
  businessCode = <span class="hljs-title class_">ErrorCodes</span>.<span class="hljs-property">BUSINESS_ERROR</span>;
} <span class="hljs-keyword">else</span> {
  businessCode = <span class="hljs-title class_">ErrorCodes</span>.<span class="hljs-property">SYSTEM_ERROR</span>;
}
</code></pre>
<p>ä»æ­¤ï¼Œå‰ç«¯ä¸å†éœ€è¦çœ‹ 400/500 å†³ç­–ï¼Œè€Œæ˜¯çœ‹ä¸šåŠ¡ç  1000/5000 åšé€»è¾‘åˆ†æ”¯(å¦‚æœéœ€è¦æœ‰ä¸šåŠ¡é”™è¯¯ç çš„è¯ï¼Œä¸€èˆ¬å¯ä»¥ä¸åŠ ä¸šåŠ¡çŠ¶æ€ç )ã€‚</p>
<h3 data-id="heading-18">ç¬¬å››å±‚ï¼šæ§åˆ¶è¿”å›ç»™ç”¨æˆ·çš„ messageï¼Œä¸æ³„æ¼å†…éƒ¨å®ç°</h3>
<p>ç»§ç»­å‘ä¸‹èµ°ï¼Œæˆ‘ä»¬éœ€è¦æ§åˆ¶â€œç”¨æˆ·å¯è§ä¿¡æ¯â€ã€‚</p>
<p>å¯¹äº <code>HttpException</code>ï¼Œè¿”å›å¼‚å¸¸ä¿¡æ¯å®‰å…¨å¯æ§ï¼›<br/>
è€Œæ™®é€šå¼‚å¸¸æœ‰å †æ ˆã€å†…éƒ¨é”™è¯¯ï¼Œä¸å¯ç›´ç»™å®¢æˆ·ç«¯ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">let</span> <span class="hljs-attr">userMessage</span>: <span class="hljs-built_in">string</span>;
<span class="hljs-keyword">if</span> (exception <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">HttpException</span>) {
  <span class="hljs-keyword">const</span> exceptionResponse = exception.<span class="hljs-title function_">getResponse</span>() <span class="hljs-keyword">as</span> <span class="hljs-built_in">any</span>;
  userMessage = exceptionResponse.<span class="hljs-property">message</span> || exception.<span class="hljs-property">message</span>;
} <span class="hljs-keyword">else</span> {
  userMessage = <span class="hljs-string">'Server Internal Error'</span>;
}
</code></pre>
<h3 data-id="heading-19">ç¬¬äº”å±‚ï¼šæ³¨å…¥ traceIdï¼Œå°†é”™è¯¯çº³å…¥é“¾è·¯è¿½è¸ªä½“ç³»</h3>
<p>åè®®æ²»ç†ä¸å®‰å…¨æ²»ç†ä¹‹åï¼Œæˆ‘ä»¬éœ€è¦å¯è§‚æµ‹æ€§ã€‚<br/>
ä¾èµ– <code>ClsService</code> è·å– traceIdï¼Œä½¿ä»»æ„å¼‚å¸¸éƒ½èƒ½ä¸ä¸€æ¬¡è¯·æ±‚ç»‘å®šï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> traceId = <span class="hljs-variable language_">this</span>.<span class="hljs-property">cls</span>.<span class="hljs-title function_">getId</span>();
</code></pre>
<p>è¿™è®©åç»­æ—¥å¿—æ£€ç´¢æœ‰äº†çº¿ç´¢ï¼Œä»â€œå‡ºé”™â€å˜ä¸ºâ€œå®šä½åœ¨å“ªä¸ªè¯·æ±‚å‡ºé”™â€ã€‚</p>
<hr/>
<h3 data-id="heading-20">ç¬¬å…­å±‚ï¼šæ„é€ ç»Ÿä¸€é”™è¯¯è¿”å›ä½“ï¼Œè®©å‰ç«¯æ¥æ”¶ç»“æ„ç¨³å®š</h3>
<p>ä¸šåŠ¡å“åº”æ ¼å¼ç»Ÿä¸€ä¹‹åï¼Œå®¢æˆ·ç«¯è§£æä¸ UI é€»è¾‘æ‰èƒ½æ ‡å‡†åŒ–ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> finalClientResponse = {
  <span class="hljs-attr">code</span>: businessCode,
  <span class="hljs-attr">message</span>: userMessage,
  traceId,
  <span class="hljs-attr">error</span>: {
    <span class="hljs-attr">timestamp</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">toISOString</span>(),
    <span class="hljs-attr">path</span>: request.<span class="hljs-property">url</span>,
    <span class="hljs-attr">method</span>: request.<span class="hljs-property">method</span>,
    httpStatus,
  },
};
</code></pre>
<p>è¿™ä¸€å±‚ï¼Œä»â€œä¸å›ºå®šå­—æ®µâ€å˜ä¸ºâ€œè¿”å›å¥‘çº¦ç»Ÿä¸€â€ã€‚</p>
<hr/>
<h3 data-id="heading-21">ç¬¬ä¸ƒå±‚ï¼šæŒ‰ä¸¥é‡ç¨‹åº¦ç»“æ„åŒ–æ—¥å¿—ï¼Œç»“åˆ traceId å¯æŸ¥å¯è¿½</h3>
<p>æœ‰äº† traceId åï¼Œæ—¥å¿—æ‰å…·å¤‡ä¸Šä¸‹æ–‡æ„ä¹‰ã€‚<br/>
å¯¹éé¢„æœŸé”™è¯¯è®°å½•å †æ ˆå¹¶å‡ä¸º <code>error</code>ï¼Œå¯¹å®¢æˆ·ç«¯è°ƒç”¨é”™è¯¯é™çº§ä¸º <code>warn</code>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">if</span> (httpStatus &gt;= <span class="hljs-number">500</span>) {
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">logger</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`[<span class="hljs-subst">${httpStatus}</span>] Unhandled Exception: <span class="hljs-subst">${userMessage}</span>`</span>, {
    <span class="hljs-attr">clientResponse</span>: finalClientResponse,
    <span class="hljs-attr">stack</span>: (exception <span class="hljs-keyword">as</span> <span class="hljs-title class_">Error</span>).<span class="hljs-property">stack</span>,
    traceId,
  });
} <span class="hljs-keyword">else</span> {
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">logger</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">`[<span class="hljs-subst">${httpStatus}</span>] Client Error: <span class="hljs-subst">${userMessage}</span>`</span>, {
    <span class="hljs-attr">clientResponse</span>: finalClientResponse,
    traceId,
  });
}
</code></pre>
<p>æ­¤å¤„æ˜¯â€œæ—¥å¿—æ²»ç† + å¯è§‚æµ‹æ€§æ²»ç†â€ã€‚</p>
<hr/>
<h3 data-id="heading-22">ç¬¬å…«å±‚ï¼šä¿æŒ HTTP çŠ¶æ€åŸæ ·è¿”å›ï¼Œç¡®ä¿åè®®é“¾è·¯æ­£å¸¸è¯†åˆ«</h3>
<p>æœ€ç»ˆè¾“å‡ºå¿…é¡»ä¿ç•™åè®®è¯­ä¹‰ï¼Œå¦åˆ™ç›‘æ§ã€è´Ÿè½½å‡è¡¡ã€æµè§ˆå™¨éƒ½å°†é”™è¯¯åˆ¤æ–­è¯·æ±‚ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript">response.<span class="hljs-title function_">status</span>(httpStatus).<span class="hljs-title function_">json</span>(finalClientResponse);
</code></pre>
<p>æ¥ä¸‹æ¥å°±å¯ä»¥åœ¨ main.ts ä¸­ä½¿ç”¨è¿™ä¸ªå…¨å±€é”™è¯¯ç®¡ç†å™¨äº†ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">NestFactory</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/core'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">AppModule</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./app.module'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ClsService</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'nestjs-cls'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">AllExceptionsFilter</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./common/filters/http-exception.filter'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-keyword">type</span> <span class="hljs-title class_">NestExpressApplication</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/platform-express'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-keyword">type</span> <span class="hljs-title class_">LoggerService</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ConfigService</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/config'</span>;

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">bootstrap</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> app = <span class="hljs-keyword">await</span> <span class="hljs-title class_">NestFactory</span>.<span class="hljs-property">create</span>&lt;<span class="hljs-title class_">NestExpressApplication</span>&gt;(<span class="hljs-title class_">AppModule</span>, {
    <span class="hljs-attr">bufferLogs</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// å…ˆç¼“å­˜æ—¥å¿—ï¼Œç›´åˆ° Logger æ›¿æ¢å®Œæˆ</span>
  });

  <span class="hljs-keyword">const</span> configService = app.<span class="hljs-title function_">get</span>(<span class="hljs-title class_">ConfigService</span>);

  <span class="hljs-comment">// 1. æ›¿æ¢ Nest é»˜è®¤ Logger ä¸º Winston</span>
  <span class="hljs-keyword">const</span> <span class="hljs-attr">logger</span>: <span class="hljs-title class_">LoggerService</span> = app.<span class="hljs-title function_">get</span>(<span class="hljs-variable constant_">WINSTON_MODULE_NEST_PROVIDER</span>);

  app.<span class="hljs-title function_">useLogger</span>(logger);

  <span class="hljs-comment">// è·å– CLS æœåŠ¡å®ä¾‹</span>
  <span class="hljs-keyword">const</span> clsService = app.<span class="hljs-title function_">get</span>(<span class="hljs-title class_">ClsService</span>);

  <span class="hljs-comment">// 4. æ³¨å†Œå…¨å±€å¼‚å¸¸è¿‡æ»¤å™¨ï¼šæ•è·æ‰€æœ‰å¼‚å¸¸å¹¶æ‰“å°æ—¥å¿— + è¿”å›ç»Ÿä¸€ç»“æ„</span>
  app.<span class="hljs-title function_">useGlobalFilters</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">AllExceptionsFilter</span>(clsService, logger));

  <span class="hljs-keyword">const</span> port = configService.<span class="hljs-property">get</span>&lt;<span class="hljs-built_in">number</span>&gt;(<span class="hljs-string">'port'</span>) ?? <span class="hljs-number">3000</span>;

  <span class="hljs-keyword">await</span> app.<span class="hljs-title function_">listen</span>(port, <span class="hljs-function">() =&gt;</span> {
    logger.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Server on :<span class="hljs-subst">${port}</span>`</span>);
  });
}
<span class="hljs-title function_">bootstrap</span>();
</code></pre>
<h2 data-id="heading-23">honojs é…ç½®</h2>
<h3 data-id="heading-24">ç¬¬ä¸€éƒ¨åˆ†ï¼šé“¾è·¯æ—¥å¿—è¿½è¸ªåŠŸèƒ½</h3>
<p>é¦–å…ˆæˆ‘ä»¬å°è£…è®°å½• traceId çš„åŠŸèƒ½ï¼Œæˆ‘ä»¬é€šè¿‡ç¼–å†™ä¸€ä¸ªä¸­é—´ä»¶æ¥å®ç°ï¼Œè¿™ä¸ªä¸­é—´ä»¶æ˜¯æ‰€æœ‰è¯·æ±‚è¿‡æ¥ï¼Œç»è¿‡çš„ç¬¬ä¸€æ­¥ï¼Œè¿™æ ·æ‰€æœ‰è¯·æ±‚å°±å¸¦äº† traceIdï¼Œå…·ä½“å®ç°å¦‚ä¸‹ï¼š</p>
<p>é¦–å…ˆæˆ‘ä»¬è¦åˆ›å»ºä¸€ä¸ª AsyncLocalStorage å®ä¾‹ï¼Œè®©åç»­çš„ä¸­é—´ä»¶è°ƒç”¨å…¶ run æ–¹æ³•ï¼Œä¸ºæ¯ä¸ªè¯·æ±‚åˆ›å»ºç‹¬ç«‹çš„ä¸Šä¸‹æ–‡ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">AsyncLocalStorage</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"node:async_hooks"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">RequestContext</span> {
  <span class="hljs-attr">traceId</span>: <span class="hljs-built_in">string</span>;
}

<span class="hljs-comment">// åˆå§‹åŒ–å…¨å±€å­˜å‚¨</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> ctx = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AsyncLocalStorage</span>&lt;<span class="hljs-title class_">RequestContext</span>&gt;();

<span class="hljs-comment">// å°è£…ä¸€ä¸ªè·å– traceId çš„å¿«æ·æ–¹æ³•</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> getTraceId = (): <span class="hljs-built_in">string</span> | <span class="hljs-function"><span class="hljs-params">undefined</span> =&gt;</span> {
  <span class="hljs-keyword">const</span> store = ctx.<span class="hljs-title function_">getStore</span>();
  <span class="hljs-keyword">return</span> store?.<span class="hljs-property">traceId</span>;
};

</code></pre>
<p>ä»¥ä¸‹æ˜¯ middleware çš„å®ç°</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { createMiddleware } <span class="hljs-keyword">from</span> <span class="hljs-string">"hono/factory"</span>;
<span class="hljs-keyword">import</span> { ctx } <span class="hljs-keyword">from</span> <span class="hljs-string">"../context"</span>; <span class="hljs-comment">// å¯¼å…¥æ‚¨çš„ ctx</span>

<span class="hljs-comment">// ç¡®ä¿åœ¨ Node.js ç¯å¢ƒä¸‹ä½¿ç”¨</span>
<span class="hljs-keyword">import</span> { randomUUID } <span class="hljs-keyword">from</span> <span class="hljs-string">"node:crypto"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> traceMiddleware = <span class="hljs-title function_">createMiddleware</span>(<span class="hljs-keyword">async</span> (c, next) =&gt; {
  <span class="hljs-comment">// 1. ç”Ÿæˆå”¯ä¸€çš„ Trace ID</span>
    <span class="hljs-keyword">const</span> traceId = c.<span class="hljs-property">req</span>.<span class="hljs-title function_">header</span>(<span class="hljs-string">"x-request-id"</span>) || <span class="hljs-title function_">randomUUID</span>();

  <span class="hljs-comment">// 2. å°† Trace ID å­˜å‚¨åœ¨ AsyncLocalStorage ä¸­ï¼Œå¹¶è¿è¡Œåç»­çš„å¤„ç†é“¾</span>
  <span class="hljs-keyword">await</span> ctx.<span class="hljs-title function_">run</span>({ traceId }, <span class="hljs-keyword">async</span> () =&gt; {
    <span class="hljs-comment">// 3. (å¯é€‰) è®°å½•è¯·æ±‚å¼€å§‹æ—¥å¿—</span>
    <span class="hljs-comment">// logger.info(`Request started: ${c.req.method} ${c.req.url}`, {</span>
    <span class="hljs-comment">//   traceId: getTraceId(),</span>
    <span class="hljs-comment">// });</span>

    <span class="hljs-comment">// 4. ç»§ç»­å¤„ç†é“¾</span>
    <span class="hljs-keyword">await</span> <span class="hljs-title function_">next</span>();

    <span class="hljs-comment">// 5. (å¯é€‰) è®¾ç½®å“åº”å¤´</span>
    c.<span class="hljs-property">res</span>.<span class="hljs-property">headers</span>.<span class="hljs-title function_">set</span>(<span class="hljs-string">"X-Trace-ID"</span>, traceId);

    <span class="hljs-comment">// // 6. (å¯é€‰) è®°å½•è¯·æ±‚ç»“æŸæ—¥å¿—</span>
    <span class="hljs-comment">// logger.info(`Request finished: ${c.req.method} ${c.req.url}`, {</span>
    <span class="hljs-comment">//   traceId: getTraceId(),</span>
    <span class="hljs-comment">//   status: c.res.status,</span>
    <span class="hljs-comment">// });</span>
  });
});
</code></pre>
<p>é€šè¿‡ä¼˜å…ˆè¯»å– <code>x-request-id</code>ï¼Œæˆ‘ä»¬å¯ä»¥å®ç°è·¨ç³»ç»Ÿçš„å…¨é“¾è·¯è¿½è¸ªï¼ˆå¦‚æœä½ çš„å‰ç«¯æˆ–ä¸Šæ¸¸ç½‘å…³ä¹Ÿå¸¦äº†è¿™ä¸ª IDï¼Œå°±èƒ½å®ç°çœŸæ­£çš„ç«¯åˆ°ç«¯æ‰“é€šï¼‰ã€‚</p>
<p>ä¸»è¦ä»£ç å°±æ˜¯ ctx.run({ traceId }, async () =&gt; { xxx }), å°†åæ‰€æœ‰å†…å®¹ï¼ŒåŒ…å«åœ¨ AsyncLocalStorage ä¸Šä¸‹æ–‡ä¸­ï¼Œä¹Ÿå°±æ˜¯ traceId ä¼šä¼´éšæ•´ä¸ªè¯·æ±‚çš„ç”Ÿå‘½å‘¨æœŸã€‚</p>
<h3 data-id="heading-25">ç¬¬äºŒéƒ¨åˆ†ï¼šWinston åŠ¨æ€å·¥å‚ (common/logger)</h3>
<p>è¿™é‡Œä½“ç°äº†<strong>ç¯å¢ƒå·®å¼‚åŒ–å¤„ç†</strong>çš„æ€æƒ³ã€‚</p>

























<table><thead><tr><th><strong>ç‰¹æ€§</strong></th><th><strong>å¼€å‘ç¯å¢ƒ (Development)</strong></th><th><strong>ç”Ÿäº§ç¯å¢ƒ (Production)</strong></th></tr></thead><tbody><tr><td><strong>è¾“å‡ºç›®æ ‡</strong></td><td>åªæœ‰æ§åˆ¶å° (Console)</td><td>æ§åˆ¶å° + æ¯æ—¥æ»šåŠ¨æ–‡ä»¶ (Daily File)</td></tr><tr><td><strong>å±•ç¤ºæ ·å¼</strong></td><td>æ¼‚äº®çš„å½©è‰²ã€ç¼©è¿›ã€Nest é£æ ¼</td><td>ä¸¥è°¨çš„ JSON æ ¼å¼ï¼ˆæ–¹ä¾¿æ—¥å¿—åˆ†æç³»ç»Ÿ ELK æŠ“å–ï¼‰</td></tr><tr><td><strong>æ—¥å¿—ä¿ç•™</strong></td><td>éšå¯éšçœ‹</td><td>ä¿ç•™ 14 å¤©ï¼Œå•æ–‡ä»¶ 20MBï¼ˆé˜²æ­¢ç¡¬ç›˜çˆ†æ‰ï¼‰</td></tr></tbody></table>
<p>ä»¥ä¸Šçš„åŠŸèƒ½ï¼Œæˆ‘ä»¬å°è£…åˆ°ä¸€ä¸ª logger.ts ä¸­ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { format, transports, createLogger } <span class="hljs-keyword">from</span> <span class="hljs-string">"winston"</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">"winston-daily-rotate-file"</span>;
<span class="hljs-keyword">import</span> { getTraceId } <span class="hljs-keyword">from</span> <span class="hljs-string">"../context"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-variable constant_">PROD_ENV</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"../../../constant"</span>;

<span class="hljs-comment">// 1. è‡ªå®šä¹‰ Formatï¼šè‡ªåŠ¨ä» ALS è·å– Trace ID</span>
<span class="hljs-keyword">const</span> appendTraceId = <span class="hljs-title function_">format</span>(<span class="hljs-function">(<span class="hljs-params">info</span>) =&gt;</span> {
  <span class="hljs-comment">// ä½¿ç”¨ ctx.getStore() è·å¾—</span>
  <span class="hljs-keyword">const</span> traceId = <span class="hljs-title function_">getTraceId</span>();
  <span class="hljs-keyword">if</span> (!traceId) {
    info.<span class="hljs-property">traceId</span> = traceId;
  }
  <span class="hljs-keyword">return</span> info;
});

<span class="hljs-comment">/// 2. åŸºç¡€é…ç½®</span>
<span class="hljs-keyword">const</span> logFormat = format.<span class="hljs-title function_">combine</span>(
  <span class="hljs-title function_">appendTraceId</span>(),
  format.<span class="hljs-title function_">timestamp</span>({ <span class="hljs-attr">format</span>: <span class="hljs-string">"YYYY-MM-DD HH:mm:ss"</span> }),
  format.<span class="hljs-title function_">errors</span>({ <span class="hljs-attr">stack</span>: <span class="hljs-literal">true</span> }), <span class="hljs-comment">// è‡ªåŠ¨æ•è· error stack</span>
  format.<span class="hljs-title function_">json</span>()
);

<span class="hljs-keyword">const</span> devTransport = <span class="hljs-keyword">new</span> transports.<span class="hljs-title class_">Console</span>({
  <span class="hljs-attr">level</span>: <span class="hljs-string">"info"</span>,
  <span class="hljs-attr">format</span>: format.<span class="hljs-title function_">combine</span>(
    format.<span class="hljs-title function_">colorize</span>(),
    format.<span class="hljs-title function_">printf</span>(<span class="hljs-function">(<span class="hljs-params">{ timestamp, level, message, traceId, stack }</span>) =&gt;</span> {
      <span class="hljs-keyword">const</span> tid = traceId ? <span class="hljs-string">`[Trace: <span class="hljs-subst">${traceId}</span>]`</span> : <span class="hljs-string">""</span>;
      <span class="hljs-keyword">const</span> output = <span class="hljs-string">`<span class="hljs-subst">${timestamp}</span> <span class="hljs-subst">${level}</span> <span class="hljs-subst">${tid}</span>: <span class="hljs-subst">${message}</span>`</span>;
      <span class="hljs-keyword">return</span> stack ? <span class="hljs-string">`<span class="hljs-subst">${output}</span>\n<span class="hljs-subst">${stack}</span>`</span> : output;
    })
  ),
});

<span class="hljs-comment">// å¯¼å‡º Logger å®ä¾‹</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> logger = <span class="hljs-title function_">createLogger</span>({
  <span class="hljs-attr">format</span>: logFormat,
  <span class="hljs-attr">transports</span>:
    process.<span class="hljs-property">env</span>.<span class="hljs-property">NODE_ENV</span> === <span class="hljs-variable constant_">PROD_ENV</span>
      ? <span class="hljs-comment">// ç”Ÿäº§ç¯å¢ƒ Transports</span>
        [
          <span class="hljs-keyword">new</span> transports.<span class="hljs-title class_">DailyRotateFile</span>({
            <span class="hljs-attr">filename</span>: <span class="hljs-string">"logs/error-%DATE%.log"</span>,
            <span class="hljs-attr">datePattern</span>: <span class="hljs-string">"YYYY-MM-DD"</span>,
            <span class="hljs-attr">level</span>: <span class="hljs-string">"error"</span>,
            <span class="hljs-attr">maxSize</span>: <span class="hljs-string">"20m"</span>,
            <span class="hljs-attr">maxFiles</span>: <span class="hljs-string">"14d"</span>,
          }),
          <span class="hljs-keyword">new</span> transports.<span class="hljs-title class_">Console</span>({
            <span class="hljs-attr">level</span>: <span class="hljs-string">"error"</span>,
            <span class="hljs-attr">format</span>: format.<span class="hljs-title function_">combine</span>(
              format.<span class="hljs-title function_">colorize</span>(),
              format.<span class="hljs-title function_">printf</span>(<span class="hljs-function">(<span class="hljs-params">{ timestamp, level, message, traceId, stack }</span>) =&gt;</span> {
                <span class="hljs-keyword">const</span> tid = traceId ? <span class="hljs-string">`[Trace: <span class="hljs-subst">${traceId}</span>]`</span> : <span class="hljs-string">""</span>;
                <span class="hljs-keyword">const</span> output = <span class="hljs-string">`<span class="hljs-subst">${timestamp}</span> <span class="hljs-subst">${level}</span> <span class="hljs-subst">${tid}</span>: <span class="hljs-subst">${message}</span>`</span>;
                <span class="hljs-keyword">return</span> stack ? <span class="hljs-string">`<span class="hljs-subst">${output}</span>\n<span class="hljs-subst">${stack}</span>`</span> : output;
              })
            ),
          }),
        ]
      : <span class="hljs-comment">// å¼€å‘ç¯å¢ƒ Transport</span>
        [devTransport],
});

</code></pre>
<p>æ³¨æ„ï¼Œä¸Šé¢çš„ä¾‹å­ï¼Œæˆ‘ä»¬åç»­ä¾‹å¦‚å•æœºä½¿ç”¨ docker-compose éƒ¨ç½²ä¹Ÿå¥½ï¼Œè¿˜æ˜¯ä½¿ç”¨k8s/k3séƒ¨ç½²ä¹Ÿå¥½ï¼Œå°±ä¸éœ€è¦ä½¿ç”¨winstonæœ¬èº«çš„ DailyRotateFile åŠŸèƒ½äº†ï¼Œå¯ä»¥å€ŸåŠ© docker æˆ–è€… k8s/k3s æœ¬èº«çš„æ—¥å¿—è½®è½¬åŠŸèƒ½å®ç°</p>
<h3 data-id="heading-26">å¦‚ä½•åœ¨ Service ä¸­æ‰“å°å¸¦ TraceId çš„æ—¥å¿—ï¼Ÿ</h3>
<p>å¦‚ä¸‹ï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨è·¯ç”±ä¸­ä½¿ç”¨ logger åŠŸèƒ½ï¼Œå°±ä¼šè‡ªå¸¦ traceId äº†</p>
<pre><code class="hljs language-TypeScript" lang="TypeScript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Hono</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"hono"</span>;
<span class="hljs-keyword">import</span> { logger } <span class="hljs-keyword">from</span> <span class="hljs-string">"./common/logger"</span>;
<span class="hljs-keyword">import</span> { standardResponse } <span class="hljs-keyword">from</span> <span class="hljs-string">"./utils"</span>;
<span class="hljs-keyword">import</span> { getTraceId } <span class="hljs-keyword">from</span> <span class="hljs-string">"./context"</span>;

<span class="hljs-keyword">const</span> app = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Hono</span>();

app.<span class="hljs-title function_">get</span>(<span class="hljs-string">"/users"</span>, <span class="hljs-keyword">async</span> (c) =&gt; {
  logger.<span class="hljs-title function_">info</span>(<span class="hljs-string">"å¼€å§‹å¤„ç† /users è¯·æ±‚"</span>);

  <span class="hljs-keyword">const</span> list = [{ <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">"Tom"</span> }];

  logger.<span class="hljs-title function_">info</span>(<span class="hljs-string">`æŸ¥è¯¢ç”¨æˆ·æ•°é‡=<span class="hljs-subst">${list.length}</span>`</span>);

  <span class="hljs-keyword">return</span> <span class="hljs-title function_">standardResponse</span>(c, { list });
});
</code></pre>
<p>è®¿é—®ç»“æœè¾“å‡ºï¼ˆç¤ºä¾‹ï¼‰ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-number">2025-01-05 22:11:01 </span><span class="hljs-string">info</span> [<span class="hljs-attr">Trace:</span> <span class="hljs-string">099f42...</span>] <span class="hljs-string">å¼€å§‹å¤„ç†</span> <span class="hljs-string">/users</span> <span class="hljs-string">è¯·æ±‚</span>
<span class="hljs-number">2025-01-05 22:11:01 </span><span class="hljs-string">info</span> [<span class="hljs-attr">Trace:</span> <span class="hljs-string">099f42...</span>] <span class="hljs-string">æŸ¥è¯¢ç”¨æˆ·æ•°é‡=1</span>
</code></pre>
<h3 data-id="heading-27">åœ¨ hono.js ä¸­å°è£…ç»Ÿä¸€è¿”å›æ ¼å¼</h3>
<p>ä¸ nest.js ä¸åŒï¼Œhono.js æ²¡æœ‰ <strong>Interceptor</strong> çš„æ¦‚å¿µï¼Œå› æ­¤æ— æ³•åœ¨æ¡†æ¶å±‚è‡ªåŠ¨åŒ…è£…æ‰€æœ‰è·¯ç”±çš„è¿”å›å€¼ã€‚hono æ›´åå‘æç®€è®¾è®¡ï¼šæ¡†æ¶æä¾› Contextï¼ˆ<code>c</code>ï¼‰ä¸å“åº”æ–¹æ³•ï¼ˆå¦‚ <code>c.json()</code>ï¼‰ï¼Œå¼€å‘è€…é€šè¿‡ middleware æˆ–å·¥å…·å‡½æ•°æ‰©å±•èƒ½åŠ›ã€‚</p>
<p>åœ¨è¿™ç§æ¨¡å¼ä¸‹ï¼Œä¸€ä¸ªå¸¸è§ç­–ç•¥æ˜¯ï¼š<strong>åœ¨ utils å±‚å°è£…ä¸€ä¸ªæ ‡å‡†å“åº”å‡½æ•°</strong>ï¼Œæ¯å½“è·¯ç”±å¤„ç†å®Œæˆä¸šåŠ¡é€»è¾‘åï¼Œè°ƒç”¨è¯¥å‡½æ•°è¾“å‡ºæ ‡å‡†æ ¼å¼ã€‚ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// utils/response.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-keyword">type</span> <span class="hljs-title class_">Context</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"hono"</span>;
<span class="hljs-keyword">import</span> { getTraceId } <span class="hljs-keyword">from</span> <span class="hljs-string">"../common/context"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-variable constant_">CODES</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"../common/constants/codes"</span>;
<span class="hljs-keyword">import</span> <span class="hljs-keyword">type</span> { <span class="hljs-title class_">ContentfulStatusCode</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"hono/utils/http-status"</span>;

<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">SUCCESS_MESSAGE</span> = <span class="hljs-string">"OK"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> standardResponse = &lt;T&gt;(
  <span class="hljs-attr">c</span>: <span class="hljs-title class_">Context</span>,
  <span class="hljs-attr">data</span>: T,
  <span class="hljs-attr">httpStatus</span>: <span class="hljs-title class_">ContentfulStatusCode</span> = <span class="hljs-number">200</span>
): <span class="hljs-function"><span class="hljs-params">Response</span> =&gt;</span> {
  <span class="hljs-keyword">const</span> traceId = <span class="hljs-title function_">getTraceId</span>();

  <span class="hljs-keyword">const</span> finalResponse = {
    <span class="hljs-attr">code</span>: <span class="hljs-variable constant_">CODES</span>.<span class="hljs-property">SUCCESS</span>,
    <span class="hljs-attr">message</span>: <span class="hljs-variable constant_">SUCCESS_MESSAGE</span>,
    data,
    traceId,
  };
  
   <span class="hljs-comment">// ä½¿ç”¨ c.json() è¿”å› Response</span>
  <span class="hljs-comment">// c.json() è´Ÿè´£è®¾ç½® Content-Type: application/json</span>
  <span class="hljs-keyword">return</span> c.<span class="hljs-title function_">json</span>(finalResponse, httpStatus);
};
</code></pre>
<p>è¿™ä¸€å‡½æ•°å®ç°äº†å‡ ä¸ªèƒ½åŠ›ï¼š</p>
<ol>
<li><strong>ç»Ÿä¸€ä¸šåŠ¡ç»“æ„</strong>ï¼šcode / message / data ç»Ÿä¸€æ ¼å¼åŒ–ã€‚</li>
<li><strong>é“¾è·¯å¯è§‚æµ‹æ€§</strong>ï¼šè‡ªåŠ¨ä» ALS ä¸­è·å– traceIdï¼Œå¯è·¨è·¯ç”±è·Ÿè¸ªè°ƒç”¨é“¾è·¯ã€‚</li>
<li><strong>æ§åˆ¶åè®®è¡Œä¸º</strong>ï¼šå¯æŒ‡å®š HTTP statusï¼Œè€Œä¸å½±å“ä¸šåŠ¡ codeã€‚</li>
<li><strong>æ— æ¡†æ¶ä¾µå…¥æ€§</strong>ï¼šä¸éœ€è¦å…¨å±€ patchï¼Œè·¯ç”±è‡ªç”±å†³å®šæ˜¯å¦ä½¿ç”¨ã€‚</li>
</ol>
<p>å®é™…ä½¿ç”¨æ–¹å¼éå¸¸ç›´æ¥ï¼šåœ¨è·¯ç”±å¤„ç†å‡½æ•°ä¸­è°ƒç”¨è¯¥å‡½æ•°åŒ…è£¹è¾“å‡ºå³å¯ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { standardResponse } <span class="hljs-keyword">from</span> <span class="hljs-string">"./utils/response"</span>;

app.<span class="hljs-title function_">get</span>(<span class="hljs-string">"/user"</span>, <span class="hljs-function">(<span class="hljs-params">c</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> user = { <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">"Tom"</span> };
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">standardResponse</span>(c, user);
});
</code></pre>
<p>è¾“å‡ºç»“æ„ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript">{
  <span class="hljs-string">"code"</span>: <span class="hljs-number">0</span>,
  <span class="hljs-string">"message"</span>: <span class="hljs-string">"OK"</span>,
  <span class="hljs-string">"data"</span>: {
    <span class="hljs-string">"id"</span>: <span class="hljs-number">1</span>,
    <span class="hljs-string">"name"</span>: <span class="hljs-string">"Tom"</span>
  },
  <span class="hljs-string">"traceId"</span>: <span class="hljs-string">"abc-123-xyz"</span>
}
</code></pre>
<h3 data-id="heading-28">é”™è¯¯å¤„ç†</h3>
<p>hono.js å¹¶æ²¡æœ‰ nest.js ä¸­é‚£æ ·çš„ exceptionï¼ˆå¼‚å¸¸ï¼‰å¤„ç†å™¨ï¼Œä½† hono å®˜æ–¹æä¾›äº†ä¸¤ä¸ªæ–¹æ³•æ¥å¤„ç†å…¨å±€å¼‚å¸¸ã€‚</p>
<ul>
<li>Error Handling å›è°ƒå‡½æ•°</li>
<li>Not Found å›è°ƒå‡½æ•°</li>
</ul>
<p>å…¶ä¸­ <code>app.onError</code>Â å…è®¸æˆ‘ä»¬å¤„ç†æœªæ•è·çš„é”™è¯¯å¹¶è¿”å›è‡ªå®šä¹‰å“åº”ã€‚ä¾‹å¦‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> app = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Hono</span>();
app.<span class="hljs-title function_">onError</span>(<span class="hljs-function">(<span class="hljs-params">err, c</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`<span class="hljs-subst">${err}</span>`</span>);
  <span class="hljs-keyword">return</span> c.<span class="hljs-title function_">text</span>(<span class="hljs-string">"Custom Error Message"</span>, <span class="hljs-number">500</span>);
});
</code></pre>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬å®ç°ä¸€ä¸ªç”Ÿäº§çº§åˆ«çš„å…¨å±€é”™è¯¯å¤„ç†å‡½æ•°ï¼Œä»£æ›¿ä¸Šé¢çš„ onError ä¸­çš„å‡½æ•°ï¼š</p>
<h4 data-id="heading-29">é˜¶æ®µä¸€ï¼šåªå®ç°å…œåº•ï¼Œç¡®ä¿ä¸ä¼šçˆ†æ ˆåˆ°æ¡†æ¶</h4>
<p>ç›®æ ‡ï¼šä»»ä½•å¼‚å¸¸éƒ½è¿”å› 500ï¼Œé¿å…æ¡†æ¶ç›´æ¥è¾“å‡ºé»˜è®¤é”™è¯¯é¡µé¢ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">customErrorHandler</span> = (<span class="hljs-params">exception: <span class="hljs-built_in">unknown</span>, c: Context</span>) =&gt; {
  <span class="hljs-keyword">return</span> c.<span class="hljs-title function_">json</span>(
    {
      <span class="hljs-attr">message</span>: <span class="hljs-string">"Internal Server Error"</span>,
    },
    <span class="hljs-number">500</span>,
  );
};
</code></pre>
<p>æ­¤é˜¶æ®µçš„å‡½æ•°è™½ç„¶ç®€é™‹ï¼Œä½†å®ç°äº†åŸºæœ¬â€œæ‹¦æˆªèƒ½åŠ›â€ã€‚æŠ€æœ¯äººå‘˜å¯ä»¥ç†è§£åˆ°ï¼šä¸å…è®¸å¼‚å¸¸ç›´æ¥æ³„æ¼ç»™æ¡†æ¶ã€‚</p>
<h4 data-id="heading-30">é˜¶æ®µäºŒï¼šæ”¯æŒé”™è¯¯åˆ†ç±»ï¼ˆä¸šåŠ¡å¯æ§é”™è¯¯ vs ç³»ç»Ÿé”™è¯¯ï¼‰</h4>
<p>éœ€æ±‚å‡ºç°ï¼šä¸šåŠ¡å±‚éœ€è¦æ˜¾å¼æŠ›å‡º 4xxï¼Œä¸åº”è¯¥å…¨éƒ¨å˜æˆ 500ã€‚å› æ­¤æˆ‘ä»¬å¼•å…¥ Hono çš„ HTTPExceptionã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">HTTPException</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"hono/http-exception"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">customErrorHandler</span> = (<span class="hljs-params">exception: <span class="hljs-built_in">unknown</span>, c: Context</span>) =&gt; {
  <span class="hljs-keyword">let</span> httpStatus = <span class="hljs-number">500</span>;
  <span class="hljs-keyword">let</span> message = <span class="hljs-string">"Internal Server Error"</span>;

  <span class="hljs-keyword">if</span> (exception <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">HTTPException</span>) {
    httpStatus = exception.<span class="hljs-property">status</span>;
    message = exception.<span class="hljs-property">message</span>;
  }

  <span class="hljs-keyword">return</span> c.<span class="hljs-title function_">json</span>({ message }, httpStatus);
};
</code></pre>
<p>å›¢é˜Ÿåˆ°æ­¤èƒ½çœ‹åˆ°ä¸¤ä¸ªå·®å¼‚ï¼š</p>
<ul>
<li>ä¸å†ä¸€åˆ€åˆ‡åœ°ç”¨ 500</li>
<li>æ”¯æŒæ¡†æ¶çº§é”™è¯¯è¯­ä¹‰</li>
</ul>
<h4 data-id="heading-31">é˜¶æ®µä¸‰ï¼šæ”¯æŒæ™®é€š Errorï¼Œå¹¶æå–å †æ ˆ</h4>
<p>å½“åç«¯ä»£ç æŠ›å‡º Error å¯¹è±¡æ—¶ï¼Œæˆ‘ä»¬ä¸å¸Œæœ›æŠŠå†…éƒ¨å †æ ˆæš´éœ²ç»™å®¢æˆ·ç«¯ï¼Œä½†æ—¥å¿—éœ€è¦ä¿ç•™ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">if</span> (exception <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Error</span>) {
  httpStatus = <span class="hljs-number">500</span>;
  message = exception.<span class="hljs-property">message</span>;
  stack = exception.<span class="hljs-property">stack</span>;
}
</code></pre>
<p>ä¸ç¬¬äºŒé˜¶æ®µç»“åˆåï¼Œä»£ç å±€éƒ¨å·²ç»å…·å¤‡ä¸‰ç±»æ¥æºï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">if</span> (exception <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">HTTPException</span>) {
  <span class="hljs-comment">// åˆæ³•ä¸šåŠ¡é”™è¯¯</span>
} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (exception <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Error</span>) {
  <span class="hljs-comment">// éé¢„æœŸç³»ç»Ÿé”™è¯¯</span>
} <span class="hljs-keyword">else</span> {
  <span class="hljs-comment">// å­—ç¬¦ä¸²æˆ–å…¶ä»–ç±»å‹ï¼Œå…œåº•è½¬å­—ç¬¦ä¸²</span>
}
</code></pre>
<p>è¿™ä¸€é˜¶æ®µè§£å†³â€œæ‰€æœ‰ç±»å‹å¼‚å¸¸éƒ½èƒ½è¿›å…¥ç»Ÿä¸€é€šè·¯â€ã€‚</p>
<h4 data-id="heading-32">é˜¶æ®µå››ï¼šå¯¹å¤– Message å®‰å…¨è„±æ•</h4>
<p>ç”Ÿäº§ä¼šæå‡ºå®‰å…¨è¦æ±‚ï¼š500 æ®µé”™è¯¯ä¸èƒ½æš´éœ²å†…éƒ¨ messageã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> userMessage =
  httpStatus &gt;= <span class="hljs-number">500</span> ? <span class="hljs-string">"Server Internal Error"</span> : exceptionMessage;
</code></pre>
<h4 data-id="heading-33">é˜¶æ®µäº”ï¼šåŠ å…¥ Trace IDï¼Œå®ç°å¯è§‚æµ‹èƒ½åŠ›</h4>
<p>åœ¨å‰å‡ é˜¶æ®µä¹‹åï¼Œå›¢é˜Ÿå¼€å§‹å‘ç°ï¼šä»…å‡­æ—¥å¿—å¾ˆéš¾å®šä½è¯·æ±‚è°ƒç”¨é“¾ã€‚å› æ­¤å¼•å…¥ Trace IDï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { getTraceId } <span class="hljs-keyword">from</span> <span class="hljs-string">"../context"</span>;

<span class="hljs-keyword">const</span> traceId = <span class="hljs-title function_">getTraceId</span>();
</code></pre>
<p>å¹¶å°†å…¶æ”¾å…¥å“åº”ï¼Œç”¨äº API ä¸æ—¥å¿—ä¸Šä¸‹æ¸¸è”åŠ¨ã€‚</p>
<h4 data-id="heading-34">é˜¶æ®µå…­ï¼šæ„å»ºç»Ÿä¸€å“åº”åè®®</h4>
<p>ç°åœ¨é”™è¯¯ä¿¡æ¯ã€trace ä¿¡æ¯éƒ½æœ‰äº†ï¼Œæˆ‘ä»¬éœ€è¦å½¢æˆä¸€è‡´è¿”å›ç»“æ„ï¼Œä¾¿äºå‰ç«¯æˆ– API ç½‘å…³è§£æï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> finalClientResponse = {
  <span class="hljs-attr">code</span>: <span class="hljs-number">500</span>,
  <span class="hljs-attr">message</span>: userMessage,
  <span class="hljs-attr">traceId</span>: traceId,
  <span class="hljs-attr">error</span>: {
    <span class="hljs-attr">timestamp</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">toISOString</span>(),
    <span class="hljs-attr">path</span>: c.<span class="hljs-property">req</span>.<span class="hljs-property">path</span>,
    <span class="hljs-attr">method</span>: c.<span class="hljs-property">req</span>.<span class="hljs-property">method</span>,
    <span class="hljs-attr">httpStatus</span>: httpStatus,
  },
};
</code></pre>
<p>è¿™æ ·å¯ä»¥å›å¤æ ¼å¼ç»Ÿä¸€çš„å“åº”ã€‚</p>
<h4 data-id="heading-35">é˜¶æ®µä¸ƒï¼šç»“æ„åŒ–æ—¥å¿—åˆ†çº§è¾“å‡º</h4>
<p>ç”Ÿäº§è¦æ±‚æ—¥å¿—å¯æ£€ç´¢ã€å¯å‘Šè­¦ï¼Œå› æ­¤éœ€è¦æŒ‰çŠ¶æ€åŒºåˆ† error ä¸ warnï¼Œå¹¶æºå¸¦å †æ ˆï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">if</span> (httpStatus &gt;= <span class="hljs-number">500</span>) {
  logger.<span class="hljs-title function_">error</span>(<span class="hljs-string">`[<span class="hljs-subst">${httpStatus}</span>] Unhandled Exception: <span class="hljs-subst">${exceptionMessage}</span>`</span>, {
    <span class="hljs-attr">clientResponse</span>: finalClientResponse,
    <span class="hljs-attr">stack</span>: exceptionStack,
    <span class="hljs-attr">traceId</span>: traceId,
    <span class="hljs-attr">path</span>: c.<span class="hljs-property">req</span>.<span class="hljs-property">path</span>,
  });
} <span class="hljs-keyword">else</span> {
  logger.<span class="hljs-title function_">warn</span>(<span class="hljs-string">`[<span class="hljs-subst">${httpStatus}</span>] Client Error: <span class="hljs-subst">${exceptionMessage}</span>`</span>, {
    <span class="hljs-attr">clientResponse</span>: finalClientResponse,
    <span class="hljs-attr">traceId</span>: traceId,
    <span class="hljs-attr">path</span>: c.<span class="hljs-property">req</span>.<span class="hljs-property">path</span>,
  });
}
</code></pre>
<p>å›¢é˜Ÿèƒ½çœ‹åˆ°ï¼š</p>
<ul>
<li>500+ æ˜¯å‘Šè­¦çº§åˆ«</li>
<li>4xx åªæ˜¯ç”¨æˆ·è¯·æ±‚é—®é¢˜ï¼Œä¸æ±¡æŸ“å‘Šè­¦ç³»ç»Ÿ</li>
</ul>
<h4 data-id="heading-36">é˜¶æ®µå…«ï¼šæœ€ç»ˆé—­ç¯ï¼ŒæŒ‰çŠ¶æ€è¿”å›å“åº”</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">return</span> c.<span class="hljs-title function_">json</span>(finalClientResponse, httpStatus);
</code></pre>
<p>è¯·æ±‚é—­ç¯å¦‚ä¸‹ï¼š</p>
<ol>
<li>è¯†åˆ«å¼‚å¸¸</li>
<li>åˆ†ç±»</li>
<li>å®‰å…¨è„±æ•</li>
<li>ç»‘å®š Trace</li>
<li>æ„å»ºåè®®</li>
<li>ç»“æ„åŒ–æ—¥å¿—</li>
<li>è¿”å›çŠ¶æ€ç ä¸å“åº”ä½“</li>
</ol>
<p>æœ€ç»ˆæˆæœï¼ˆåˆå¹¶æ®µè½ï¼‰å³ä¸ºæˆ‘ä»¬èµ·åˆæä¾›çš„å®Œæ•´ç”Ÿäº§ä»£ç ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { <span class="hljs-keyword">type</span> <span class="hljs-title class_">Context</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"hono"</span>;
<span class="hljs-keyword">import</span> { getTraceId } <span class="hljs-keyword">from</span> <span class="hljs-string">"../context"</span>;
<span class="hljs-keyword">import</span> { logger } <span class="hljs-keyword">from</span> <span class="hljs-string">"../logger"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">HTTPException</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"hono/http-exception"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-keyword">type</span> <span class="hljs-title class_">ContentfulStatusCode</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"hono/utils/http-status"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">customErrorHandler</span> = (<span class="hljs-params">exception: <span class="hljs-built_in">unknown</span>, c: Context</span>) =&gt; {
  <span class="hljs-keyword">let</span> <span class="hljs-attr">httpStatus</span>: <span class="hljs-title class_">ContentfulStatusCode</span>;
  <span class="hljs-keyword">let</span> <span class="hljs-attr">exceptionMessage</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">"Internal Server Error"</span>;
  <span class="hljs-keyword">let</span> <span class="hljs-attr">exceptionStack</span>: <span class="hljs-built_in">string</span> | <span class="hljs-literal">undefined</span>;

  <span class="hljs-keyword">if</span> (exception <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">HTTPException</span>) {
    httpStatus = exception.<span class="hljs-property">status</span>;
    exceptionMessage = exception.<span class="hljs-property">message</span>;
    exceptionStack = exception.<span class="hljs-property">stack</span>;
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (exception <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Error</span>) {
    httpStatus = <span class="hljs-number">500</span>;
    exceptionMessage = exception.<span class="hljs-property">message</span>;
    exceptionStack = exception.<span class="hljs-property">stack</span>;
  } <span class="hljs-keyword">else</span> {
    httpStatus = <span class="hljs-number">500</span>;
    exceptionMessage = <span class="hljs-title class_">String</span>(exception);
  }

  <span class="hljs-keyword">const</span> userMessage =
    httpStatus &gt;= <span class="hljs-number">500</span> ? <span class="hljs-string">"Server Internal Error"</span> : exceptionMessage;

  <span class="hljs-keyword">const</span> traceId = <span class="hljs-title function_">getTraceId</span>();

  <span class="hljs-keyword">const</span> finalClientResponse = {
    <span class="hljs-attr">code</span>: <span class="hljs-number">500</span>,
    <span class="hljs-attr">message</span>: userMessage,
    <span class="hljs-attr">traceId</span>: traceId,
    <span class="hljs-attr">error</span>: {
      <span class="hljs-attr">timestamp</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">toISOString</span>(),
      <span class="hljs-attr">path</span>: c.<span class="hljs-property">req</span>.<span class="hljs-property">path</span>,
      <span class="hljs-attr">method</span>: c.<span class="hljs-property">req</span>.<span class="hljs-property">method</span>,
      <span class="hljs-attr">httpStatus</span>: httpStatus,
    },
  };

  <span class="hljs-keyword">if</span> (httpStatus &gt;= <span class="hljs-number">500</span>) {
    logger.<span class="hljs-title function_">error</span>(<span class="hljs-string">`[<span class="hljs-subst">${httpStatus}</span>] Unhandled Exception: <span class="hljs-subst">${exceptionMessage}</span>`</span>, {
      <span class="hljs-attr">clientResponse</span>: finalClientResponse,
      <span class="hljs-attr">stack</span>: exceptionStack,
      <span class="hljs-attr">traceId</span>: traceId,
      <span class="hljs-attr">path</span>: c.<span class="hljs-property">req</span>.<span class="hljs-property">path</span>,
    });
  } <span class="hljs-keyword">else</span> {
    logger.<span class="hljs-title function_">warn</span>(<span class="hljs-string">`[<span class="hljs-subst">${httpStatus}</span>] Client Error: <span class="hljs-subst">${exceptionMessage}</span>`</span>, {
      <span class="hljs-attr">clientResponse</span>: finalClientResponse,
      <span class="hljs-attr">traceId</span>: traceId,
      <span class="hljs-attr">path</span>: c.<span class="hljs-property">req</span>.<span class="hljs-property">path</span>,
    });
  }

  <span class="hljs-keyword">return</span> c.<span class="hljs-title function_">json</span>(finalClientResponse, httpStatus);
};
</code></pre>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬æ¥å¤„ç†å…¨å±€æ•è·çš„ 404 å›è°ƒï¼Œä¹Ÿå°±æ˜¯è‡ªå®šä¹‰ Not Found Response, ä¸ªäººæ„Ÿè§‰ç”Ÿäº§ç¯å¢ƒå°±ç®€å•è¿”å› 404 çŠ¶æ€ç å°±è¶³å¤Ÿäº†ï¼Œæ‰€ä»¥å‡½æ•°å®šä¹‰å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">notFoundHandler</span> = (<span class="hljs-params">c: Context</span>) =&gt; {
  <span class="hljs-keyword">return</span> c.<span class="hljs-title function_">json</span>({ <span class="hljs-attr">message</span>: <span class="hljs-string">"Resource not found"</span> }, <span class="hljs-number">404</span>);
};
</code></pre>
<h2 data-id="heading-37">æ¬¢è¿ä¸€èµ·äº¤æµ</h2>
<p>æ¬¢è¿å¤§å®¶ä¸€èµ·è¿›ç¾¤è®¨è®ºå‰ç«¯å…¨æ ˆæŠ€æœ¯å’Œ ai agent ï¼Œä¸€èµ·è¿›æ­¥ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»ç©ºåœ°å¯¹æŠ—åˆ°ç©ºæˆ˜ï¼šé¦–ä¸ªæ— äººæœºé—´è¿½è¸ªç™¾ä¸‡çº§åŸºå‡†ä¸æ—¶ç©ºè¯­ä¹‰åŸºçº¿MambaSTSæ·±åº¦è§£æ]]></title>    <link>https://juejin.cn/post/7585948869844746275</link>    <guid>https://juejin.cn/post/7585948869844746275</guid>    <pubDate>2025-12-22T02:14:31.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7585948869844746275" data-draft-id="7585888537641762831" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»ç©ºåœ°å¯¹æŠ—åˆ°ç©ºæˆ˜ï¼šé¦–ä¸ªæ— äººæœºé—´è¿½è¸ªç™¾ä¸‡çº§åŸºå‡†ä¸æ—¶ç©ºè¯­ä¹‰åŸºçº¿MambaSTSæ·±åº¦è§£æ"/> <meta itemprop="keywords" content="ç®—æ³•,è®¡ç®—æœºè§†è§‰,æ·±åº¦å­¦ä¹ "/> <meta itemprop="datePublished" content="2025-12-22T02:14:31.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="CoovallyAIHub"/> <meta itemprop="url" content="https://juejin.cn/user/2461151071843739"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»ç©ºåœ°å¯¹æŠ—åˆ°ç©ºæˆ˜ï¼šé¦–ä¸ªæ— äººæœºé—´è¿½è¸ªç™¾ä¸‡çº§åŸºå‡†ä¸æ—¶ç©ºè¯­ä¹‰åŸºçº¿MambaSTSæ·±åº¦è§£æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2461151071843739/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    CoovallyAIHub
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-22T02:14:31.000Z" title="Mon Dec 22 2025 02:14:31 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å½“ä»Šè§†è§‰è¿½è¸ªé¢†åŸŸï¼Œä¸€é¡¹å…¨æ–°ä»»åŠ¡æ­£å¼•å‘å­¦æœ¯ç•Œå’Œå·¥ä¸šç•Œçš„å…³æ³¨ã€‚è¿™é¡¹è¢«ç§°ä¸ºã€Œæ— äººæœºå¯¹æŠ—æ— äººæœºã€çš„æŒ‘æˆ˜å°†è¿½è¸ªæŠ€æœ¯çš„éš¾åº¦æ¨å‘äº†å…¨æ–°é«˜åº¦ã€‚</p>
<p>è¿‘æœŸï¼Œæ¥è‡ªé¦™æ¸¯ç§‘æŠ€å¤§å­¦ï¼ˆå¹¿å·ï¼‰ã€ä¸Šæµ·äº¤é€šå¤§å­¦ã€ä¸­å±±å¤§å­¦ã€ä¸­å›½ç§‘å­¦é™¢ä¿¡æ¯å·¥ç¨‹ç ”ç©¶æ‰€å’Œäº‘ä»ç§‘æŠ€çš„è”åˆå›¢é˜Ÿå‘å¸ƒäº†é¢˜ä¸ºã€ŠHow Far are Modern Trackers from UAV-Anti-UAV? A Million-Scale Benchmark and New Baselineã€‹çš„çªç ´æ€§ç ”ç©¶ã€‚</p>
<p>è¿™é¡¹ç ”ç©¶ä¸ä»…ä»…æå‡ºäº†æ–°çš„ä»»åŠ¡èŒƒå¼ï¼Œæ›´æ˜¯æ„å»ºäº†<strong>ä¸€ä¸ªç™¾ä¸‡çº§è§„æ¨¡çš„åŸºå‡†æ•°æ®é›†</strong>ï¼Œå¹¶å¯¹ç°æœ‰50ç§å…ˆè¿›è¿½è¸ªå™¨è¿›è¡Œäº†å…¨é¢æµ‹è¯„ï¼Œç»“æœä»¤äººéœ‡æƒŠã€‚</p>
<p align="center"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/68829052a96c4406ae709ada68f3356a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766974471&amp;x-signature=qZTBVb7uRqPVl4s3s9js0%2BwH0Oo%3D" alt="å›¾ç‰‡1.png" loading="lazy"/></p>
<blockquote>
<p><strong>è®ºæ–‡åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fpdf%2F2512.07385" target="_blank" title="https://arxiv.org/pdf/2512.07385" ref="nofollow noopener noreferrer">arxiv.org/pdf/2512.07â€¦</a></strong></p>
<p><strong>é¡¹ç›®åœ°å€ï¼š</strong> <strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2F983632847%2FAwesome-Multimodal-Object-Tracking" target="_blank" title="https://github.com/983632847/Awesome-Multimodal-Object-Tracking" ref="nofollow noopener noreferrer">github.com/983632847/Aâ€¦</a></strong></p>
</blockquote>
<h2 data-id="heading-0"><strong>æ— äººæœºè¿½è¸ªæ–°ç¯‡ç« ï¼šä»â€œç©ºåœ°å¯¹æŠ—â€åˆ°â€œç©ºæˆ˜â€</strong></h2>
<p>å½“å‰çš„æ— äººæœºç›¸å…³è¿½è¸ªç ”ç©¶ä¸»è¦åˆ†ä¸ºä¸¤ç§æ¨¡å¼ã€‚ç¬¬ä¸€ç§æ˜¯æ— äººæœºè¿½è¸ªåœ°é¢ç›®æ ‡ï¼Œå¦‚è½¦è¾†æˆ–è¡Œäººï¼Œæ­¤æ—¶è¿½è¸ªå¹³å°åŠ¨æ€ä½†ç›®æ ‡ç›¸å¯¹é™æ­¢ã€‚</p>
<p>å¦ä¸€ç§æ˜¯åœ°é¢æ‘„åƒå¤´è¿½è¸ªç©ºä¸­æ— äººæœºï¼Œç›®æ ‡åŠ¨æ€è€Œè§‚æµ‹å¹³å°é™æ­¢ã€‚</p>
<p>è¿™ä¸¤ç§æ¨¡å¼éƒ½æ— æ³•æ¨¡æ‹ŸçœŸå®çš„ç©ºä¸­å¯¹æŠ—ç¯å¢ƒâ€”â€”å½“ä¸€æ¶æ— äººæœºéœ€è¦è¿½å‡»å¦ä¸€æ¶æ— äººæœºæ—¶ï¼ŒåŒæ–¹éƒ½å¤„äºé«˜é€Ÿã€å‰§çƒˆçš„è¿åŠ¨ä¸­ã€‚</p>
<p>ç ”ç©¶å›¢é˜Ÿå°†è¿™ç§åŒå‘åŠ¨æ€å¹²æ‰°ç§°ä¸ºâ€œdual-dynamic disturbancesâ€ï¼Œå®ƒå¯¼è‡´äº†è§†è§’æ€¥å‰§å˜åŒ–ã€èƒŒæ™¯å¿«é€Ÿç§»åŠ¨å’Œç›®æ ‡è¿åŠ¨æ¨¡ç³Šç­‰ä¸€ç³»åˆ—å¤æ‚é—®é¢˜ã€‚</p>
<p>è¿™æ­£æ˜¯UAV-Anti-UAVä»»åŠ¡çš„æ ¸å¿ƒæŒ‘æˆ˜æ‰€åœ¨ã€‚</p>
<p align="center"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/56c97ba5b71846cca733922ad0f2b49f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766974471&amp;x-signature=B%2FgfRPS0xuGENo1hkDDavNH9SFs%3D" alt="å›¾ç‰‡2.png" loading="lazy"/></p>
<h2 data-id="heading-1"><strong>ç™¾ä¸‡çº§åŸºå‡†ï¼šæ‰“é€ çœŸå®ä¸–ç•Œçš„ç©ºä¸­æˆ˜</strong></h2>
<p>ä¸ºäº†æ¨åŠ¨è¿™ä¸€æ–°å…´é¢†åŸŸçš„å‘å±•ï¼Œç ”ç©¶å›¢é˜Ÿä»é›¶æ„å»ºäº†ä¸€ä¸ªè¶…å¤§è§„æ¨¡ã€é«˜è´¨é‡æ ‡æ³¨çš„æ•°æ®é›†ã€‚</p>
<p>è¿™ä¸ªæ•°æ®é›†åŒ…å« 1810ä¸ªè§†é¢‘åºåˆ—ï¼Œæ€»è®¡105ä¸‡æ ‡æ³¨å¸§ï¼Œæ¶µç›–äº†å›ºå®šç¿¼ã€å¤šæ—‹ç¿¼ã€å‚ç›´èµ·é™ã€FPVæ— äººæœºå’Œæ— äººç›´å‡æœºç­‰äº”ç§ç›®æ ‡æ— äººæœºç±»å‹ã€‚</p>
<p align="center"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b9726a836f4d4cfaa902ed92ce116d4f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766974471&amp;x-signature=3VTVyf%2F3d%2FugsoDNnhrR%2FUZgQYw%3D" alt="å›¾ç‰‡3.png" loading="lazy"/></p>
<p>ä¸UAV123ã€Anti-UAV318ç­‰ç°æœ‰åŸºå‡†ç›¸æ¯”ï¼Œæ–°æ•°æ®é›†ä¸ä»…åœ¨è§„æ¨¡ä¸Šé¥é¥é¢†å…ˆï¼Œæ›´åœ¨å¤šä¸ªç»´åº¦ä¸Šå®ç°äº†çªç ´ï¼š</p>
<ul>
<li>å¤šæ¨¡æ€åˆ›æ–°ï¼šé¦–æ¬¡ä¸ºæ¯ä¸ªè§†é¢‘åºåˆ—æä¾›ç®€æ´çš„è‡ªç„¶è¯­è¨€æè¿°ï¼Œä¸ºè§†è§‰-è¯­è¨€å¤šæ¨¡æ€è¿½è¸ªå¼€è¾Ÿäº†æ–°é€”å¾„ï¼›</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/62834470f9164395955db8afcc30772a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766974471&amp;x-signature=TkkX0kqy5%2BQzLggJ0i0fmJvUtEI%3D" alt="å›¾ç‰‡4.png" loading="lazy"/></p>
<ul>
<li>æç«¯æŒ‘æˆ˜æ€§ï¼šæ•°æ®é›†æ ‡æ³¨äº†15ç§é«˜éš¾åº¦è¿½è¸ªå±æ€§ï¼Œå¦‚å¿«é€Ÿè¿åŠ¨ã€å…‰ç…§å˜åŒ–å’Œç›¸ä¼¼å¹²æ‰°ç‰©ç­‰ã€‚æ•°æ®åˆ†ææ˜¾ç¤ºï¼Œæ–°æ•°æ®é›†åœ¨å…‰ç…§å˜åŒ–èŒƒå›´å’Œç›®æ ‡ç›¸å¯¹é€Ÿåº¦ä¸Šæ¯”ç°æœ‰åŸºå‡†æ›´ä¸ºâ€œæç«¯â€ï¼Œæ›´è´´è¿‘çœŸå®å¤æ‚ç¯å¢ƒï¼›</li>
</ul>
<p align="center"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/52870b36678c411bb6f26f75b7a7716c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766974471&amp;x-signature=FfSip5BM2Fccn0h8qdLpRf%2BP1xY%3D" alt="å›¾ç‰‡5.png" loading="lazy"/></p>
<p align="center"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7652c94003a94beeb44064558f9c6987~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766974471&amp;x-signature=Euydw%2FgIvVcIdyvNrQRDxH7K0Yk%3D" alt="å›¾ç‰‡6.png" loading="lazy"/></p>
<p align="left"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/629b28c2f6a541ac8c9f90f2449f82fe~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766974471&amp;x-signature=C36bJcHEf2%2F9EFPoZOJwwJ5LnyE%3D" alt="å›¾ç‰‡7.png" loading="lazy"/></p>
<ul>
<li>çœŸå®åœºæ™¯è¦†ç›–ï¼šæ•°æ®é‡‡é›†è‡ªå¤šæ ·åŒ–çœŸå®ç¯å¢ƒï¼Œç¡®ä¿ç®—æ³•åœ¨å®é™…åº”ç”¨ä¸­çš„é²æ£’æ€§ã€‚</li>
</ul>
<p><strong>ç›®å‰Coovallyå®˜ç½‘å·²æœ‰Vistroneç­‰æƒå¨æ— äººæœºå¼€æºæ•°æ®é›†å…è´¹ä¸ºç”¨æˆ·æä¾›ï¼Œå¹¶ä¸”è¿˜æœ‰å¯ç›´æ¥éƒ¨ç½²åº”ç”¨äºå¤§ç–†æ— äººæœºçš„ç®—æ³•æ¨¡å‹ï¼Œæ— éœ€é‡æ–°ä¿®æ”¹éƒ¨ç½²è½¬æ¢</strong>ï¼Œå…·ä½“æ–‡ç« å¯å‚è€ƒï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzkzOTg3NTAyNA%3D%3D%26mid%3D2247490614%26idx%3D2%26sn%3D4cdaf1278f908fc12877d8aa26de6211%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzkzOTg3NTAyNA==&amp;mid=2247490614&amp;idx=2&amp;sn=4cdaf1278f908fc12877d8aa26de6211&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">VisDroneæ•°æ®é›†ï¼Œä¸“ä¸ºæ— äººæœºè§†è§‰ä»»åŠ¡æ‰“é€ </a></p>
<p>Coovallyå¹³å°ä¸ä»…æä¾›æ¨¡å‹èµ„æºï¼Œè¿˜å¯ä»¥å¸®åŠ©ä½ æä¾›<strong>AIè§£å†³æ–¹æ¡ˆ</strong>ï¼Œå¯ä»¥æ‰«æäºŒç»´ç ï¼Œæˆ‘ä»¬æ¥ç»™ä½ æä¾›è§£å†³æ–¹æ¡ˆï¼ï¼</p>
<p align="center"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/994fd8b13bf64e88a3790ab8a2b892e5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766974471&amp;x-signature=t6dbHdwgJpKsPPgLMwv4tVVtoh4%3D" alt="å°åŠ©æ‰‹äºŒç»´ç .png" loading="lazy"/></p>
<p>ç‚¹å‡»<strong>é˜…è¯»åŸæ–‡</strong>ï¼Œå³å¯ä½“éªŒCoovallyå¹³å°ï¼</p>
<h2 data-id="heading-2"><strong>MambaSTSï¼šæ—¶ç©ºè¯­ä¹‰èåˆçš„è¿½è¸ªæ–°æ¡†æ¶</strong></h2>
<p>é¢å¯¹è¿™ä¸€é«˜éš¾åº¦ä»»åŠ¡ï¼Œç ”ç©¶å›¢é˜Ÿæå‡ºäº†MambaSTSâ€”â€”ä¸€ç§ä¸“ä¸ºæ—¶ç©ºè¯­ä¹‰é›†æˆå­¦ä¹ è®¾è®¡çš„æ–°æ¡†æ¶ã€‚</p>
<p align="center"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/60ab660f94b5416495b3507836eb1990~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766974471&amp;x-signature=luQKPXckHhVRA3ypU9fTFmobzaI%3D" alt="å›¾ç‰‡8.png" loading="lazy"/></p>
<p>MambaSTSçš„æ ¸å¿ƒåˆ›æ–°åœ¨äºå·§å¦™åœ°ç»“åˆäº†Transformerå’ŒMambaä¸¤å¤§æ¶æ„çš„ä¼˜åŠ¿ï¼š</p>
<ul>
<li>Transformeræä¾›å¼ºå¤§çš„å…¨å±€ç©ºé—´å»ºæ¨¡èƒ½åŠ›ï¼Œæå–ä¸°å¯Œçš„è§†è§‰ç‰¹å¾ï¼›</li>
<li>Mambaä»¥çº¿æ€§å¤æ‚åº¦é«˜æ•ˆå¤„ç†é•¿åºåˆ—æ•°æ®ï¼Œå»ºç«‹è§†é¢‘å¸§é—´çš„é•¿æœŸä¸Šä¸‹æ–‡å…³ç³»ã€‚</li>
</ul>
<p>å…·ä½“å®ç°ä¸­ï¼Œæ¨¡å‹å°†æ¨¡æ¿å›¾åƒã€æœç´¢å›¾åƒå’Œè¯­è¨€æè¿°ä½œä¸ºå¤šæ¨¡æ€è¾“å…¥ã€‚è®¾è®¡äº†ä¸€ä¸ªâ€œæ—¶é—´ä»¤ç‰Œä¼ æ’­â€æœºåˆ¶ï¼Œå¯è§†ä¸ºä¸€ä¸ªâ€œè®°å¿†å•å…ƒâ€ã€‚</p>
<p>è¿™ä¸ªå•å…ƒæŒç»­æ”¶é›†å’Œå‹ç¼©è¿‡å»å¸§ä¸­å…³äºç›®æ ‡çš„å…³é”®ä¿¡æ¯ï¼ˆå¦‚å¤–è§‚ã€è¿åŠ¨çŠ¶æ€ï¼‰ï¼Œç„¶åå°†è¿™ä»½â€œè®°å¿†â€ä¼ é€’ç»™å½“å‰å¸§çš„å¤„ç†è¿‡ç¨‹ã€‚</p>
<p>å³ä½¿ç›®æ ‡åœ¨æŸä¸€ç¬é—´è¢«å®Œå…¨é®æŒ¡æˆ–å› é«˜é€Ÿè¿åŠ¨è€Œå˜å¾—æ¨¡ç³Šï¼Œæ¨¡å‹ä¾ç„¶èƒ½ä¾é é•¿æœŸè®°å¿†ä¿æŒå¯¹ç›®æ ‡çš„ç¨³å®šè®¤çŸ¥ã€‚æœ€ç»ˆï¼Œç»Ÿä¸€çš„æ—¶ç©ºè¯­ä¹‰ç½‘ç»œå°†è¿™äº›ä¿¡æ¯æ·±åº¦èåˆï¼Œé€šè¿‡æ— é”šæ¡†è¿½è¸ªå¤´é¢„æµ‹ç›®æ ‡çš„ç²¾ç¡®ä½ç½®ã€‚</p>
<h2 data-id="heading-3"><strong>å®éªŒç»“æœï¼šç°æœ‰è¿½è¸ªå™¨åœ¨â€œç©ºæˆ˜â€ä¸­å…¨é¢æºƒè´¥</strong></h2>
<p>ç ”ç©¶å›¢é˜Ÿå¯¹50ç§å½“å‰æœ€å…ˆè¿›çš„è¿½è¸ªå™¨è¿›è¡Œäº†å…¨é¢è¯„ä¼°ï¼Œç»“æœä»¤äººæ·±æ€ï¼šç°æœ‰æ–¹æ³•åœ¨UAV-Anti-UAVä»»åŠ¡ä¸Šè¡¨ç°æ™®éä¸è¶³ã€‚</p>
<p align="center"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/074358b325904be7934f23d0270efdf0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766974471&amp;x-signature=Jfd6DKIs45gU0K7Rqm7WDfEuLqI%3D" alt="å›¾ç‰‡9.png" loading="lazy"/></p>
<p>ä»æ•´ä½“æ€§èƒ½æ›²çº¿çœ‹ï¼Œå¤§éƒ¨åˆ†è¿½è¸ªå™¨çš„æˆåŠŸç‡ï¼ˆSuccess/AUCï¼‰éƒ½å¤„äºè¾ƒä½æ°´å¹³ã€‚è€Œè®ºæ–‡æå‡ºçš„MambaSTSåŸºçº¿æ¨¡å‹å‡­å€Ÿå…¶å‡ºè‰²çš„æ—¶ç©ºå»ºæ¨¡èƒ½åŠ›ï¼Œå–å¾—äº†43.7%çš„AUCå¾—åˆ†ï¼Œæ˜¾è‘—é¢†å…ˆäºå…¶ä»–æ–¹æ³•ã€‚</p>
<p align="center"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9510fcea629b4d659d265d2ecc363d20~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766974471&amp;x-signature=rxEuHQQS%2BaXcm92gUF5H9OItbt0%3D" alt="å›¾ç‰‡10.png" loading="lazy"/></p>
<p>åˆ†æä¸åŒè¿½è¸ªå±æ€§ä¸‹çš„è¡¨ç°å‘ç°ï¼Œç°æœ‰è¿½è¸ªå™¨åœ¨å¤„ç†å…‰ç…§å‰§çƒˆå˜åŒ–ã€ç›¸ä¼¼ç‰©ä½“å¹²æ‰°ã€è¿åŠ¨æ¨¡ç³Šå’Œå®Œå…¨é®æŒ¡ç­‰æŒ‘æˆ˜æ—¶å°¤å…¶åŠ›ä¸ä»å¿ƒã€‚</p>
<p>æ¶ˆèå®éªŒå……åˆ†è¯æ˜äº†MambaSTSå„ä¸ªç»„ä»¶çš„æœ‰æ•ˆæ€§ã€‚ä»å¼ºå¤§çš„åŸºçº¿æ¨¡å‹OSTrackï¼ˆAUC 27.8%ï¼‰å¼€å§‹ï¼Œé€šè¿‡é€æ­¥åŠ å…¥æ—¶é—´å»ºæ¨¡ã€ç©ºé—´å»ºæ¨¡å’Œè¯­ä¹‰å»ºæ¨¡æ¨¡å—ï¼Œæ€§èƒ½æœ€ç»ˆæå‡è‡³43.7%ï¼Œç›¸å¯¹æ¶¨å¹…è¶…è¿‡57%ï¼Œæ•ˆæœæ˜¾è‘—ã€‚</p>
<h2 data-id="heading-4"><strong>æ„ä¹‰ä¸å±•æœ›</strong></h2>
<p>è¿™é¡¹ç ”ç©¶çš„ä»·å€¼ä¸ä»…åœ¨äºæŠ€æœ¯çªç ´ï¼Œæ›´åœ¨äºå®ƒä¸ºä½ç©ºç»æµå®‰å…¨æä¾›äº†å…³é”®æŠ€æœ¯æ”¯æ’‘ã€‚éšç€æ— äººæœºåœ¨ç‰©æµã€å·¡æ£€ã€å¨±ä¹ç­‰é¢†åŸŸçš„å¹¿æ³›åº”ç”¨ï¼Œå¦‚ä½•é˜²æ­¢æ— äººæœºæ»¥ç”¨ã€ä¿éšœä½ç©ºå®‰å…¨å·²æˆä¸ºè¿«åœ¨çœ‰ç«çš„é—®é¢˜ã€‚</p>
<p>UAV-Anti-UAVæŠ€æœ¯æœ‰æœ›åº”ç”¨äºæ— äººæœºæ‹¦æˆªã€ç¦é£åŒºé˜²æŠ¤ã€é‡è¦è®¾æ–½ä¿æŠ¤ç­‰åœºæ™¯ï¼Œæˆä¸ºä½ç©ºå®‰å…¨çš„â€œæ™ºèƒ½å®ˆæŠ¤è€…â€ã€‚</p>
<p>ä»å­¦æœ¯è§’åº¦çœ‹ï¼Œè¿™é¡¹ç ”ç©¶å¼€è¾Ÿäº†è§†è§‰è¿½è¸ªçš„æ–°æ–¹å‘ï¼ŒæŒ‘æˆ˜äº†ç°æœ‰ç®—æ³•çš„æé™ï¼Œæ¨åŠ¨äº†å¤šæ¨¡æ€ã€é•¿æ—¶åºç†è§£ç­‰æŠ€æœ¯çš„å‘å±•ã€‚</p>
<p>éšç€ä½ç©ºç»æµçš„è“¬å‹ƒå‘å±•ï¼Œæ— äººæœºå¯¹æŠ—æ— äººæœºçš„æŠ€æœ¯å°†æˆä¸ºä¿éšœå®‰å…¨çš„å…³é”®å±éšœã€‚è¿™é¡¹ç ”ç©¶ä¸ä»…æå‡ºäº†æŒ‘æˆ˜ï¼Œæ›´æŒ‡æ˜äº†æ–¹å‘â€”â€”åœ¨è¿™ä¸ªå…¨æ–°çš„â€œç©ºæˆ˜â€æ—¶ä»£ï¼Œè§†è§‰è¿½è¸ªæŠ€æœ¯å¿…é¡»è¿æ¥æ›´å¤æ‚ã€æ›´åŠ¨æ€ã€æ›´çœŸå®çš„è€ƒéªŒã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[SpringBootè‡ªåŠ¨é…ç½®ï¼šä¸ºä»€ä¹ˆä½ çš„åº”ç”¨èƒ½â€œå¼€ç®±å³ç”¨]]></title>    <link>https://juejin.cn/post/7585839411122913326</link>    <guid>https://juejin.cn/post/7585839411122913326</guid>    <pubDate>2025-12-22T02:11:21.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7585839411122913326" data-draft-id="7585897699602808858" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="SpringBootè‡ªåŠ¨é…ç½®ï¼šä¸ºä»€ä¹ˆä½ çš„åº”ç”¨èƒ½â€œå¼€ç®±å³ç”¨"/> <meta itemprop="keywords" content="åç«¯,Java,Spring Boot"/> <meta itemprop="datePublished" content="2025-12-22T02:11:21.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°åè¯´Java"/> <meta itemprop="url" content="https://juejin.cn/user/3898184413750203"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            SpringBootè‡ªåŠ¨é…ç½®ï¼šä¸ºä»€ä¹ˆä½ çš„åº”ç”¨èƒ½â€œå¼€ç®±å³ç”¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3898184413750203/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°åè¯´Java
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-22T02:11:21.000Z" title="Mon Dec 22 2025 02:11:21 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ã€ŠSpringBootè‡ªåŠ¨é…ç½®ï¼šä¸ºä»€ä¹ˆä½ çš„åº”ç”¨èƒ½â€œå¼€ç®±å³ç”¨ã€ï¼Ÿã€‹</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV1RVyYBZE4z%2F%3Fvd_source%3Dd9789da0ed994ac777a822cd5ea4cf30" target="_blank" title="https://www.bilibili.com/video/BV1RVyYBZE4z/?vd_source=d9789da0ed994ac777a822cd5ea4cf30" ref="nofollow noopener noreferrer">é›¶åŸºç¡€å…¨æ ˆå¼€å‘Javaå¾®æœåŠ¡ç‰ˆæœ¬å®æˆ˜-åç«¯-å‰ç«¯-è¿ç»´-å®æˆ˜ä¼ä¸šçº§ä¸‰ä¸ªå®æˆ˜é¡¹ç›®</a></p>
<blockquote>
<p>æ¯å¤©5åˆ†é’Ÿï¼ŒæŒæ¡ä¸€ä¸ªSpringBootæ ¸å¿ƒçŸ¥è¯†ç‚¹ã€‚å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯SpringBootæŒ‡å—çš„åˆ›å§‹äººå°åã€‚</p>
</blockquote>
<p><strong>å¯ä»¥å…³æ³¨å…¬ä¼—å·ï¼šå°åè¯´Java</strong></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV1RVyYBZE4z%2F%3Fvd_source%3Dd9789da0ed994ac777a822cd5ea4cf30" target="_blank" title="https://www.bilibili.com/video/BV1RVyYBZE4z/?vd_source=d9789da0ed994ac777a822cd5ea4cf30" ref="nofollow noopener noreferrer">é›¶åŸºç¡€å…¨æ ˆå¼€å‘Javaå¾®æœåŠ¡ç‰ˆæœ¬å®æˆ˜-åç«¯-å‰ç«¯-è¿ç»´-å®æˆ˜ä¼ä¸šçº§ä¸‰ä¸ªå®æˆ˜é¡¹ç›®</a></p>
<h3 data-id="heading-1">å¼•è¨€</h3>
<p>ä½ æ˜¯å¦æ›¾ç»å¥½å¥‡ï¼Œä¸ºä»€ä¹ˆåˆ›å»ºä¸€ä¸ªSpringBootåº”ç”¨åªéœ€è¦å‡ è¡Œä»£ç ï¼Œå°±èƒ½è‡ªåŠ¨è·å¾—WebæœåŠ¡å™¨ã€æ•°æ®åº“è¿æ¥ã€å®‰å…¨é…ç½®ç­‰åŠŸèƒ½ï¼Ÿä»Šå¤©æˆ‘ä»¬å°±æ¥æ­å¼€SpringBootæœ€æ ¸å¿ƒçš„ç‰¹æ€§â€”â€”è‡ªåŠ¨é…ç½®çš„ç¥ç§˜é¢çº±ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV1RVyYBZE4z%2F%3Fvd_source%3Dd9789da0ed994ac777a822cd5ea4cf30" target="_blank" title="https://www.bilibili.com/video/BV1RVyYBZE4z/?vd_source=d9789da0ed994ac777a822cd5ea4cf30" ref="nofollow noopener noreferrer">é›¶åŸºç¡€å…¨æ ˆå¼€å‘Javaå¾®æœåŠ¡ç‰ˆæœ¬å®æˆ˜-åç«¯-å‰ç«¯-è¿ç»´-å®æˆ˜ä¼ä¸šçº§ä¸‰ä¸ªå®æˆ˜é¡¹ç›®</a></p>
<p>å…ˆçœ‹ä¸€ä¸ªç»å…¸å¯¹æ¯”ï¼š</p>
<p><strong>ä¼ ç»ŸSpring MVCé¡¹ç›®</strong>ï¼šéœ€è¦é…ç½®web.xmlã€DispatcherServletã€è§†å›¾è§£æå™¨ã€æ•°æ®æºç­‰æ•°åä¸ªé…ç½®é¡¹ã€‚</p>
<p><strong>SpringBooté¡¹ç›®</strong>ï¼šåªéœ€è¦ä¸€ä¸ªmainæ–¹æ³•åŠ ä¸Š<code>@SpringBootApplication</code>æ³¨è§£ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// å°±æ˜¯è¿™ä¹ˆç®€å•ï¼</span>
<span class="hljs-meta">@SpringBootApplication</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyApplication</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        SpringApplication.run(MyApplication.class, args);
    }
}
</code></pre>
<h3 data-id="heading-2">ä¸€ã€@SpringBootApplicationçš„ä¸‰é‡é­”æ³•</h3>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV1RVyYBZE4z%2F%3Fvd_source%3Dd9789da0ed994ac777a822cd5ea4cf30" target="_blank" title="https://www.bilibili.com/video/BV1RVyYBZE4z/?vd_source=d9789da0ed994ac777a822cd5ea4cf30" ref="nofollow noopener noreferrer">é›¶åŸºç¡€å…¨æ ˆå¼€å‘Javaå¾®æœåŠ¡ç‰ˆæœ¬å®æˆ˜-åç«¯-å‰ç«¯-è¿ç»´-å®æˆ˜ä¼ä¸šçº§ä¸‰ä¸ªå®æˆ˜é¡¹ç›®</a></p>
<p>è¿™ä¸ªçœ‹ä¼¼ç®€å•çš„æ³¨è§£ï¼Œå®é™…ä¸Šæ˜¯ä¸€ä¸ª<strong>å¤åˆæ³¨è§£</strong>ï¼ŒåŒ…å«äº†ä¸‰ä¸ªæ ¸å¿ƒæ³¨è§£ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Target(ElementType.TYPE)</span>
<span class="hljs-meta">@Retention(RetentionPolicy.RUNTIME)</span>
<span class="hljs-meta">@Documented</span>
<span class="hljs-meta">@Inherited</span>
<span class="hljs-meta">@SpringBootConfiguration</span>
<span class="hljs-meta">@EnableAutoConfiguration</span>
<span class="hljs-meta">@ComponentScan(excludeFilters = { 
    @Filter(type = FilterType.CUSTOM, classes = TypeExcludeFilter.class),
    @Filter(type = FilterType.CUSTOM, classes = AutoConfigurationExcludeFilter.class) 
})</span>
<span class="hljs-keyword">public</span> <span class="hljs-meta">@interface</span> SpringBootApplication {
    <span class="hljs-comment">// ...</span>
}
</code></pre>
<p>è®©æˆ‘ä»¬é€ä¸€è§£æè¿™ä¸‰ä¸ªæ ¸å¿ƒæ³¨è§£çš„ä½œç”¨ï¼š</p>
<h4 data-id="heading-3">1. @SpringBootConfiguration</h4>
<p>è¿™æ˜¯<code>@Configuration</code>çš„ç‰¹åŒ–ç‰ˆæœ¬ï¼Œè¡¨æ˜è¿™ä¸ªç±»æ˜¯ä¸€ä¸ªé…ç½®ç±»ã€‚å®ƒå…è®¸æˆ‘ä»¬åœ¨åŒä¸€ä¸ªç±»ä¸­å®šä¹‰Beanã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ç­‰ä»·äºä¼ ç»Ÿçš„@Configuration</span>
<span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AppConfig</span> {
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> UserService <span class="hljs-title function_">userService</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UserServiceImpl</span>();
    }
}
</code></pre>
<h4 data-id="heading-4">2. @ComponentScan</h4>
<p>è¿™ä¸ªæ³¨è§£å‘Šè¯‰Springåœ¨å“ªäº›åŒ…ä¸‹æ‰«æç»„ä»¶ï¼ˆ@Componentã€@Serviceã€@Controllerç­‰ï¼‰ã€‚é»˜è®¤æ‰«æçš„æ˜¯<strong>å½“å‰åŒ…åŠå…¶å­åŒ…</strong>ã€‚</p>
<h4 data-id="heading-5">3. @EnableAutoConfigurationï¼ˆé‡ç‚¹ï¼ï¼‰</h4>
<p>è¿™æ˜¯è‡ªåŠ¨é…ç½®çš„<strong>æ ¸å¿ƒå¼€å…³</strong>ã€‚è®©æˆ‘ä»¬çœ‹çœ‹å®ƒçš„æºç ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Target(ElementType.TYPE)</span>
<span class="hljs-meta">@Retention(RetentionPolicy.RUNTIME)</span>
<span class="hljs-meta">@Documented</span>
<span class="hljs-meta">@Inherited</span>
<span class="hljs-meta">@AutoConfigurationPackage</span>
<span class="hljs-meta">@Import(AutoConfigurationImportSelector.class)</span>
<span class="hljs-keyword">public</span> <span class="hljs-meta">@interface</span> EnableAutoConfiguration {
    <span class="hljs-comment">// ...</span>
}
</code></pre>
<p>å…³é”®ç‚¹åœ¨äº<code>@Import(AutoConfigurationImportSelector.class)</code>ï¼Œè¿™ä¸ªç±»è´Ÿè´£åŠ è½½æ‰€æœ‰è‡ªåŠ¨é…ç½®ç±»ã€‚</p>
<h3 data-id="heading-6">äºŒã€è‡ªåŠ¨é…ç½®çš„åŠ è½½æœºåˆ¶</h3>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV1RVyYBZE4z%2F%3Fvd_source%3Dd9789da0ed994ac777a822cd5ea4cf30" target="_blank" title="https://www.bilibili.com/video/BV1RVyYBZE4z/?vd_source=d9789da0ed994ac777a822cd5ea4cf30" ref="nofollow noopener noreferrer">é›¶åŸºç¡€å…¨æ ˆå¼€å‘Javaå¾®æœåŠ¡ç‰ˆæœ¬å®æˆ˜-åç«¯-å‰ç«¯-è¿ç»´-å®æˆ˜ä¼ä¸šçº§ä¸‰ä¸ªå®æˆ˜é¡¹ç›®</a></p>
<h4 data-id="heading-7">1. spring.factoriesæ–‡ä»¶çš„ä½œç”¨</h4>
<p>SpringBootå¯åŠ¨æ—¶ï¼Œ<code>AutoConfigurationImportSelector</code>ä¼šè¯»å–<code>META-INF/spring.factories</code>æ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶åœ¨spring-boot-autoconfigureåŒ…ä¸­ï¼š</p>
<pre><code class="hljs language-properties" lang="properties"># æ–‡ä»¶ä½ç½®: spring-boot-autoconfigure-2.7.x.jar!/META-INF/spring.factories

# Auto Configure
org.springframework.boot.autoconfigure.EnableAutoConfiguration=\
org.springframework.boot.autoconfigure.admin.SpringApplicationAdminJmxAutoConfiguration,\
org.springframework.boot.autoconfigure.aop.AopAutoConfiguration,\
org.springframework.boot.autoconfigure.amqp.RabbitAutoConfiguration,\
org.springframework.boot.autoconfigure.batch.BatchAutoConfiguration,\
# ... ä¸Šç™¾ä¸ªè‡ªåŠ¨é…ç½®ç±»
</code></pre>
<p>ç›®å‰SpringBoot 2.7.xç‰ˆæœ¬ä¸­ï¼Œè¿™ä¸ªæ–‡ä»¶åˆ—å‡ºäº†<strong>140å¤šä¸ªè‡ªåŠ¨é…ç½®ç±»</strong>ï¼è¿™å°±æ˜¯SpringBoot"å¼€ç®±å³ç”¨"èƒ½åŠ›çš„æ¥æºã€‚</p>
<h4 data-id="heading-8">2. æŒ‰éœ€åŠ è½½æœºåˆ¶</h4>
<p>ä½ å¯èƒ½ä¼šæ‹…å¿ƒï¼šåŠ è½½è¿™ä¹ˆå¤šé…ç½®ç±»ï¼Œä¸ä¼šå½±å“å¯åŠ¨é€Ÿåº¦å—ï¼Ÿ</p>
<p>å®é™…ä¸Šï¼ŒSpringBootä½¿ç”¨äº†<strong>æ¡ä»¶åŒ–é…ç½®</strong>æœºåˆ¶ã€‚æ¯ä¸ªè‡ªåŠ¨é…ç½®ç±»éƒ½æœ‰å„ç§<code>@ConditionalOnXxx</code>æ³¨è§£ï¼Œåªæœ‰åœ¨æ¡ä»¶æ»¡è¶³æ—¶æ‰ä¼šç”Ÿæ•ˆã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Configuration</span>
<span class="hljs-comment">// æ¡ä»¶1ï¼šç±»è·¯å¾„ä¸‹æœ‰DataSourceç±»</span>
<span class="hljs-meta">@ConditionalOnClass(DataSource.class)</span>
<span class="hljs-comment">// æ¡ä»¶2ï¼šæœ‰DataSourceç±»å‹çš„Bean</span>
<span class="hljs-meta">@ConditionalOnBean(DataSource.class)</span>
<span class="hljs-comment">// æ¡ä»¶3ï¼šé…ç½®äº†spring.datasourceå±æ€§</span>
<span class="hljs-meta">@ConditionalOnProperty(prefix = "spring.datasource", name = "url")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DataSourceAutoConfiguration</span> {
    
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-comment">// æ¡ä»¶4ï¼šä¸å­˜åœ¨DataSourceç±»å‹çš„Beanæ—¶æ‰åˆ›å»º</span>
    <span class="hljs-meta">@ConditionalOnMissingBean(DataSource.class)</span>
    <span class="hljs-keyword">public</span> DataSource <span class="hljs-title function_">dataSource</span><span class="hljs-params">(DataSourceProperties properties)</span> {
        <span class="hljs-keyword">return</span> properties.initializeDataSourceBuilder().build();
    }
}
</code></pre>
<h3 data-id="heading-9">ä¸‰ã€æ¡ä»¶æ³¨è§£è¯¦è§£</h3>
<p>SpringBootæä¾›äº†ä¸€ç³»åˆ—æ¡ä»¶æ³¨è§£ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹æœ€å¸¸ç”¨çš„å‡ ä¸ªï¼š</p>













































<table><thead><tr><th>æ¡ä»¶æ³¨è§£</th><th>ä½œç”¨</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td>@ConditionalOnClass</td><td>ç±»è·¯å¾„ä¸‹å­˜åœ¨æŒ‡å®šç±»æ—¶ç”Ÿæ•ˆ</td><td><code>@ConditionalOnClass(RedisTemplate.class)</code></td></tr><tr><td>@ConditionalOnMissingClass</td><td>ç±»è·¯å¾„ä¸‹ä¸å­˜åœ¨æŒ‡å®šç±»æ—¶ç”Ÿæ•ˆ</td><td><code>@ConditionalOnMissingClass("javax.servlet.Servlet")</code></td></tr><tr><td>@ConditionalOnBean</td><td>å®¹å™¨ä¸­å­˜åœ¨æŒ‡å®šBeanæ—¶ç”Ÿæ•ˆ</td><td><code>@ConditionalOnBean(DataSource.class)</code></td></tr><tr><td>@ConditionalOnMissingBean</td><td>å®¹å™¨ä¸­ä¸å­˜åœ¨æŒ‡å®šBeanæ—¶ç”Ÿæ•ˆ</td><td><code>@ConditionalOnMissingBean(RedisTemplate.class)</code></td></tr><tr><td>@ConditionalOnProperty</td><td>é…ç½®æ–‡ä»¶ä¸­å­˜åœ¨æŒ‡å®šå±æ€§æ—¶ç”Ÿæ•ˆ</td><td><code>@ConditionalOnProperty(prefix="redis", name="enabled")</code></td></tr><tr><td>@ConditionalOnWebApplication</td><td>æ˜¯Webåº”ç”¨æ—¶ç”Ÿæ•ˆ</td><td><code>@ConditionalOnWebApplication</code></td></tr><tr><td>@ConditionalOnNotWebApplication</td><td>ä¸æ˜¯Webåº”ç”¨æ—¶ç”Ÿæ•ˆ</td><td><code>@ConditionalOnNotWebApplication</code></td></tr></tbody></table>
<h3 data-id="heading-10">å››ã€å®æˆ˜ï¼šåˆ›å»ºè‡ªå®šä¹‰Starter</h3>
<p>ç†è§£äº†åŸç†åï¼Œæˆ‘ä»¬æ¥è‡ªå®šä¹‰ä¸€ä¸ªStarterï¼Œå®ç°ä¸€ä¸ªç®€å•çš„çŸ­ä¿¡æœåŠ¡ã€‚</p>
<h4 data-id="heading-11">æ­¥éª¤1ï¼šåˆ›å»ºStarteré¡¹ç›®ç»“æ„</h4>
<pre><code class="hljs language-css" lang="css">sms-spring-boot-starter/
â”œâ”€â”€ <span class="hljs-attribute">src</span>/
â”‚   â”œâ”€â”€ <span class="hljs-selector-tag">main</span>/
â”‚   â”‚   â”œâ”€â”€ java/com/example/sms/
â”‚   â”‚   â”‚   â”œâ”€â”€ SmsAutoConfiguration<span class="hljs-selector-class">.java</span>
â”‚   â”‚   â”‚   â”œâ”€â”€ SmsProperties<span class="hljs-selector-class">.java</span>
â”‚   â”‚   â”‚   â”œâ”€â”€ SmsService<span class="hljs-selector-class">.java</span>
â”‚   â”‚   â”‚   â””â”€â”€ SmsServiceImpl<span class="hljs-selector-class">.java</span>
â”‚   â”‚   â””â”€â”€ resources/
â”‚   â”‚       â””â”€â”€ META-INF/
â”‚   â”‚           â””â”€â”€ spring<span class="hljs-selector-class">.factories</span>
â”‚   â””â”€â”€ pom<span class="hljs-selector-class">.xml</span>
</code></pre>
<h4 data-id="heading-12">æ­¥éª¤2ï¼šåˆ›å»ºé…ç½®å±æ€§ç±»</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// SmsProperties.java</span>
<span class="hljs-meta">@ConfigurationProperties(prefix = "sms")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SmsProperties</span> {
    <span class="hljs-keyword">private</span> String accessKey;
    <span class="hljs-keyword">private</span> String secretKey;
    <span class="hljs-keyword">private</span> String signName;
    <span class="hljs-keyword">private</span> <span class="hljs-type">String</span> <span class="hljs-variable">endpoint</span> <span class="hljs-operator">=</span> <span class="hljs-string">"https://dysmsapi.aliyuncs.com"</span>;
    
    <span class="hljs-comment">// getters and setters</span>
}
</code></pre>
<h4 data-id="heading-13">æ­¥éª¤3ï¼šåˆ›å»ºè‡ªåŠ¨é…ç½®ç±»</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// SmsAutoConfiguration.java</span>
<span class="hljs-meta">@Configuration</span>
<span class="hljs-meta">@EnableConfigurationProperties(SmsProperties.class)</span>  <span class="hljs-comment">// å¯ç”¨é…ç½®å±æ€§</span>
<span class="hljs-meta">@ConditionalOnClass(SmsService.class)</span>  <span class="hljs-comment">// å½“SmsServiceåœ¨ç±»è·¯å¾„æ—¶ç”Ÿæ•ˆ</span>
<span class="hljs-meta">@ConditionalOnProperty(prefix = "sms", value = "enabled", havingValue = "true", matchIfMissing = true)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SmsAutoConfiguration</span> {
    
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-meta">@ConditionalOnMissingBean(SmsService.class)</span>  <span class="hljs-comment">// å®¹å™¨ä¸­æ²¡æœ‰SmsServiceæ—¶æ‰åˆ›å»º</span>
    <span class="hljs-keyword">public</span> SmsService <span class="hljs-title function_">smsService</span><span class="hljs-params">(SmsProperties properties)</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SmsServiceImpl</span>(properties);
    }
}
</code></pre>
<h4 data-id="heading-14">æ­¥éª¤4ï¼šåˆ›å»ºæœåŠ¡æ¥å£å’Œå®ç°</h4>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV1RVyYBZE4z%2F%3Fvd_source%3Dd9789da0ed994ac777a822cd5ea4cf30" target="_blank" title="https://www.bilibili.com/video/BV1RVyYBZE4z/?vd_source=d9789da0ed994ac777a822cd5ea4cf30" ref="nofollow noopener noreferrer">é›¶åŸºç¡€å…¨æ ˆå¼€å‘Javaå¾®æœåŠ¡ç‰ˆæœ¬å®æˆ˜-åç«¯-å‰ç«¯-è¿ç»´-å®æˆ˜ä¼ä¸šçº§ä¸‰ä¸ªå®æˆ˜é¡¹ç›®</a></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// SmsService.java</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">SmsService</span> {
    <span class="hljs-type">boolean</span> <span class="hljs-title function_">send</span><span class="hljs-params">(String phone, String content)</span>;
}

<span class="hljs-comment">// SmsServiceImpl.java</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SmsServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">SmsService</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> SmsProperties properties;
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">SmsServiceImpl</span><span class="hljs-params">(SmsProperties properties)</span> {
        <span class="hljs-built_in">this</span>.properties = properties;
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">send</span><span class="hljs-params">(String phone, String content)</span> {
        System.out.printf(<span class="hljs-string">"å‘é€çŸ­ä¿¡åˆ°%s: %s [ä½¿ç”¨é…ç½®: %s]%n"</span>, 
            phone, content, properties.getEndpoint());
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }
}
</code></pre>
<h4 data-id="heading-15">æ­¥éª¤5ï¼šæ³¨å†Œè‡ªåŠ¨é…ç½®</h4>
<p>åœ¨<code>resources/META-INF/spring.factories</code>ä¸­ï¼š</p>
<pre><code class="hljs language-properties" lang="properties">org.springframework.boot.autoconfigure.EnableAutoConfiguration=\
com.example.sms.SmsAutoConfiguration
</code></pre>
<h4 data-id="heading-16">æ­¥éª¤6ï¼šåœ¨å…¶ä»–é¡¹ç›®ä¸­ä½¿ç”¨</h4>
<ol>
<li>å¼•å…¥ä¾èµ–ï¼š</li>
</ol>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.example<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>sms-spring-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<ol start="2">
<li>æ·»åŠ é…ç½®ï¼š</li>
</ol>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># application.yml</span>
<span class="hljs-attr">sms:</span>
  <span class="hljs-attr">enabled:</span> <span class="hljs-literal">true</span>
  <span class="hljs-attr">access-key:</span> <span class="hljs-string">your-access-key</span>
  <span class="hljs-attr">secret-key:</span> <span class="hljs-string">your-secret-key</span>
  <span class="hljs-attr">sign-name:</span> <span class="hljs-string">é˜¿é‡Œäº‘</span>
</code></pre>
<ol start="3">
<li>ç›´æ¥æ³¨å…¥ä½¿ç”¨ï¼š</li>
</ol>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserService</span> {
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> SmsService smsService;  <span class="hljs-comment">// è‡ªåŠ¨æ³¨å…¥</span>
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">register</span><span class="hljs-params">(User user)</span> {
        <span class="hljs-comment">// æ³¨å†Œé€»è¾‘...</span>
        smsService.send(user.getPhone(), <span class="hljs-string">"æ³¨å†ŒéªŒè¯ç : 123456"</span>);
    }
}
</code></pre>
<h3 data-id="heading-17">äº”ã€è‡ªåŠ¨é…ç½®çš„è°ƒè¯•æŠ€å·§</h3>
<p>å½“ä½ é‡åˆ°é…ç½®ä¸ç”Ÿæ•ˆçš„é—®é¢˜æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ–¹æ³•è°ƒè¯•ï¼š</p>
<h4 data-id="heading-18">1. å¼€å¯è°ƒè¯•æ—¥å¿—</h4>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># application.yml</span>
<span class="hljs-attr">debug:</span> <span class="hljs-literal">true</span>
</code></pre>
<p>å¯åŠ¨æ—¶ä¼šæ‰“å°å“ªäº›è‡ªåŠ¨é…ç½®ç±»ç”Ÿæ•ˆäº†ï¼Œå“ªäº›æ²¡æœ‰ç”Ÿæ•ˆåŠå…¶åŸå› ã€‚</p>
<h4 data-id="heading-19">2. ä½¿ç”¨ConditionEvaluationReport</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@SpringBootApplication</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Application</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">ConfigurableApplicationContext</span> <span class="hljs-variable">context</span> <span class="hljs-operator">=</span> 
            SpringApplication.run(Application.class, args);
        
        <span class="hljs-comment">// æ‰“å°æ¡ä»¶è¯„ä¼°æŠ¥å‘Š</span>
        <span class="hljs-type">ConditionEvaluationReport</span> <span class="hljs-variable">report</span> <span class="hljs-operator">=</span> 
            ConditionEvaluationReport.get(context.getBeanFactory());
        report.getConditionAndOutcomesBySource().forEach((source, outcomes) -&gt; {
            System.out.println(source);
            outcomes.forEach(outcome -&gt; {
                System.out.println(<span class="hljs-string">"\t"</span> + outcome.getOutcome());
            });
        });
    }
}
</code></pre>
<h3 data-id="heading-20">å…­ã€è‡ªåŠ¨é…ç½®çš„æœ€ä½³å®è·µ</h3>
<ol>
<li><strong>åˆç†ä½¿ç”¨æ¡ä»¶æ³¨è§£</strong>ï¼šé¿å…è¿‡åº¦é…ç½®ï¼Œåªåœ¨æ¡ä»¶æ»¡è¶³æ—¶ç”Ÿæ•ˆ</li>
<li><strong>æä¾›åˆç†çš„é»˜è®¤å€¼</strong>ï¼šè®©ç”¨æˆ·æ— éœ€é…ç½®å°±èƒ½ä½¿ç”¨</li>
<li><strong>å…è®¸ç”¨æˆ·è¦†ç›–</strong>ï¼šä½¿ç”¨<code>@ConditionalOnMissingBean</code>è®©ç”¨æˆ·èƒ½è‡ªå®šä¹‰Bean</li>
<li><strong>è‰¯å¥½çš„é…ç½®å‰ç¼€</strong>ï¼šä½¿ç”¨æ¸…æ™°çš„å‰ç¼€ï¼Œå¦‚<code>spring.datasource</code></li>
<li><strong>æä¾›é…ç½®æç¤º</strong>ï¼šåˆ›å»º<code>spring-configuration-metadata.json</code>æä¾›IDEæç¤º</li>
</ol>
<h3 data-id="heading-21">æ€»ç»“</h3>
<p>SpringBootçš„è‡ªåŠ¨é…ç½®é€šè¿‡ä»¥ä¸‹æœºåˆ¶å®ç°"çº¦å®šä¼˜äºé…ç½®"ï¼š</p>
<ol>
<li><strong>å¯åŠ¨æ³¨è§£å¤åˆ</strong>ï¼š<code>@SpringBootApplication</code>é›†æˆäº†é…ç½®ã€æ‰«æå’Œè‡ªåŠ¨é…ç½®</li>
<li><strong>å·¥å‚åŠ è½½æœºåˆ¶</strong>ï¼šé€šè¿‡<code>spring.factories</code>åŠ è½½æ‰€æœ‰è‡ªåŠ¨é…ç½®ç±»</li>
<li><strong>æ¡ä»¶åŒ–è£…é…</strong>ï¼šæ ¹æ®ç¯å¢ƒæŒ‰éœ€åŠ è½½ï¼Œé¿å…ä¸å¿…è¦çš„é…ç½®</li>
<li><strong>åˆç†çš„é»˜è®¤å€¼</strong>ï¼šæä¾›å¼€ç®±å³ç”¨çš„é»˜è®¤é…ç½®</li>
</ol>
<h3 data-id="heading-22">ä»Šæ—¥æ€è€ƒé¢˜</h3>
<p>å¦‚æœæˆ‘æƒ³åˆ›å»ºä¸€ä¸ªæ•°æ®åº“è¿æ¥æ± çš„Starterï¼Œéœ€è¦æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼š</p>
<ol>
<li>å½“ç±»è·¯å¾„ä¸‹æœ‰HikariCPæ—¶ä½¿ç”¨HikariCP</li>
<li>å½“ç±»è·¯å¾„ä¸‹æœ‰Druidæ—¶ä½¿ç”¨Druid</li>
<li>ç”¨æˆ·å¯ä»¥é€šè¿‡é…ç½®é€‰æ‹©ä½¿ç”¨å“ªä¸ªè¿æ¥æ± </li>
</ol>
<p>è¯¥å¦‚ä½•è®¾è®¡è¿™ä¸ªè‡ªåŠ¨é…ç½®ç±»å‘¢ï¼Ÿæ¬¢è¿åœ¨è¯„è®ºåŒºåˆ†äº«ä½ çš„æ€è·¯ï¼</p>
<p>å¯ä»¥å…³æ³¨å…¬ä¼—å·ï¼šå°åè¯´Java</p>
<hr/>
<p><strong>ä¸‹æœŸé¢„å‘Š</strong>ï¼šæ˜å¤©æˆ‘ä»¬å°†æ¢è®¨ã€ŠSpringBootå…¨å±€å¼‚å¸¸å¤„ç†ï¼šåˆ«å†åˆ°å¤„try-catchäº†ï¼ã€‹ï¼Œå­¦ä¹ å¦‚ä½•ä¼˜é›…åœ°å¤„ç†å¼‚å¸¸ï¼Œæ‰“é€ å¥å£®çš„åº”ç”¨ã€‚</p>
<p><strong>äº’åŠ¨æ—¶é—´</strong>ï¼šä½ åœ¨ä½¿ç”¨SpringBootè‡ªåŠ¨é…ç½®æ—¶é‡åˆ°è¿‡å“ªäº›æœ‰è¶£çš„é—®é¢˜æˆ–æŠ€å·§ï¼Ÿæ¬¢è¿ç•™è¨€åˆ†äº«ï¼</p>
<p><strong>èµ„æºè·å–</strong>ï¼šå…³æ³¨å…¬ä¼—å·å›å¤"è‡ªåŠ¨é…ç½®æºç "ï¼Œè·å–æœ¬æ–‡æ‰€æœ‰ç¤ºä¾‹ä»£ç åŠè‡ªå®šä¹‰Starterå®Œæ•´é¡¹ç›®ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV1RVyYBZE4z%2F%3Fvd_source%3Dd9789da0ed994ac777a822cd5ea4cf30" target="_blank" title="https://www.bilibili.com/video/BV1RVyYBZE4z/?vd_source=d9789da0ed994ac777a822cd5ea4cf30" ref="nofollow noopener noreferrer">é›¶åŸºç¡€å…¨æ ˆå¼€å‘Javaå¾®æœåŠ¡ç‰ˆæœ¬å®æˆ˜-åç«¯-å‰ç«¯-è¿ç»´-å®æˆ˜ä¼ä¸šçº§ä¸‰ä¸ªå®æˆ˜é¡¹ç›®</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[iOS Swift å¯é€‰å€¼ï¼ˆOptionalï¼‰è¯¦è§£]]></title>    <link>https://juejin.cn/post/7586482851097706536</link>    <guid>https://juejin.cn/post/7586482851097706536</guid>    <pubDate>2025-12-22T02:16:22.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7586482851097706536" data-draft-id="7581036773607800832" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="iOS Swift å¯é€‰å€¼ï¼ˆOptionalï¼‰è¯¦è§£"/> <meta itemprop="keywords" content="å‰ç«¯,iOS"/> <meta itemprop="datePublished" content="2025-12-22T02:16:22.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="tangbin583085"/> <meta itemprop="url" content="https://juejin.cn/user/95026578465675"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            iOS Swift å¯é€‰å€¼ï¼ˆOptionalï¼‰è¯¦è§£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/95026578465675/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    tangbin583085
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-22T02:16:22.000Z" title="Mon Dec 22 2025 02:16:22 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>Swift ä¸ Objective-C æœ€å¤§çš„åŒºåˆ«ä¹‹ä¸€ï¼Œå°±æ˜¯ <strong>Optionalï¼ˆå¯é€‰å€¼ï¼‰æœºåˆ¶</strong>ã€‚<br/>
å®ƒä»è¯­è¨€å±‚é¢è§£å†³äº†â€œç©ºæŒ‡é’ˆå´©æºƒâ€çš„é—®é¢˜ï¼Œä½†å¦‚æœä½¿ç”¨ä¸å½“ï¼Œä¹Ÿå¯èƒ½å¼•å…¥æ–°çš„ Crashã€‚</p>
<p>åœ¨æ—¥å¸¸å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸çœ‹åˆ°ä¸‹é¢è¿™äº›å†™æ³•ï¼š</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">var</span> name: <span class="hljs-type">String</span>?
<span class="hljs-keyword">var</span> age: <span class="hljs-type">Int</span>!

<span class="hljs-keyword">let</span> title <span class="hljs-operator">=</span> text <span class="hljs-operator">??</span> <span class="hljs-string">"é»˜è®¤æ ‡é¢˜"</span>
imageView.image <span class="hljs-operator">=</span> <span class="hljs-type">UIImage</span>(named: imgName <span class="hljs-operator">??</span> <span class="hljs-string">""</span>)
</code></pre>
<p>æœ¬æ–‡å°†<strong>ç³»ç»Ÿè®²è§£ <code>?</code>ã€<code>!</code>ã€<code>??</code> çš„å«ä¹‰ã€åŒºåˆ«ã€é€‚ç”¨åœºæ™¯ä¸å·¥ç¨‹çº§æœ€ä½³å®è·µ</strong>ï¼Œå¸®åŠ©ä½ åœ¨ Swift é¡¹ç›®ä¸­å†™å‡ºæ›´å®‰å…¨ã€æ›´ä¸“ä¸šçš„ä»£ç ã€‚</p>
<hr/>
<h2 data-id="heading-0">ä»€ä¹ˆæ˜¯ Optionalï¼ˆå¯é€‰å€¼ï¼‰</h2>
<p>åœ¨ Swift ä¸­ï¼Œ<strong>Optional è¡¨ç¤ºä¸€ä¸ªå˜é‡ã€Œå¯èƒ½æœ‰å€¼ï¼Œä¹Ÿå¯èƒ½ä¸º nilã€</strong>ã€‚</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">var</span> name: <span class="hljs-type">String</span>? <span class="hljs-operator">=</span> <span class="hljs-string">"Hello World"</span>
name <span class="hljs-operator">=</span> <span class="hljs-literal">nil</span>
</code></pre>
<p>ç­‰ä»·ç†è§£ä¸ºï¼š</p>
<blockquote>
<p>ã€Œè¿™ä¸ªå˜é‡å¯ä»¥ä¸ºç©ºï¼Œç¼–è¯‘å™¨å¼ºåˆ¶ä½ åœ¨ä½¿ç”¨å‰å¤„ç†å¥½ä¸ºç©ºçš„æƒ…å†µã€</p>
</blockquote>
<p>è¿™ä¸ OC ä¸­çš„ <code>id</code>ã€<code>NSString *</code> å®Œå…¨ä¸åŒï¼Œæ˜¯ <strong>ç¼–è¯‘å™¨å±‚é¢çš„å®‰å…¨ä¿éšœ</strong>ã€‚</p>
<hr/>
<h2 data-id="heading-1">Optional æœ¬è´¨æ˜¯ä»€ä¹ˆï¼Ÿ</h2>
<p>ä»è¯­è¨€å±‚é¢æ¥çœ‹ï¼š</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">let</span> value: <span class="hljs-type">Int</span>?
</code></pre>
<p>æœ¬è´¨ä¸Šç›¸å½“äºä¸€ä¸ªæšä¸¾ï¼š</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">enum</span> <span class="hljs-title class_">Optional</span>&lt;<span class="hljs-title class_">Int</span>&gt; {
    <span class="hljs-keyword">case</span> <span class="hljs-keyword">some</span>(<span class="hljs-type">Int</span>)
    <span class="hljs-keyword">case</span> none
}
</code></pre>
<p>ä¹Ÿæ­£æ˜¯å› ä¸ºè¿™æ ·ï¼Œ<strong>Swift ä¸å…è®¸ä½ ç›´æ¥ä½¿ç”¨ Optional çš„å€¼</strong>ã€‚</p>
<hr/>
<h2 data-id="heading-2">ä¸€ã€<code>?</code> â€”â€” å¯é€‰ç±»å‹ï¼ˆOptionalï¼‰</h2>
<h3 data-id="heading-3">å®šä¹‰æ–¹å¼</h3>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">var</span> username: <span class="hljs-type">String</span>?
</code></pre>
<p>è¡¨ç¤ºï¼š</p>
<ul>
<li>å¯èƒ½æœ‰å€¼</li>
<li>ä¹Ÿå¯èƒ½ä¸º <code>nil</code></li>
</ul>
<h3 data-id="heading-4">ä½¿ç”¨é™åˆ¶</h3>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">let</span> len <span class="hljs-operator">=</span> username.count <span class="hljs-operator">âŒ</span> ç¼–è¯‘é”™è¯¯
</code></pre>
<p>ä½ å¿…é¡» <strong>å…ˆè§£åŒ…ï¼ˆunwrapï¼‰</strong> ï¼Œæ‰èƒ½ä½¿ç”¨ã€‚</p>
<hr/>
<h3 data-id="heading-5">å®‰å…¨è§£åŒ…æ–¹å¼ä¸€ï¼š<code>if let</code></h3>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> name <span class="hljs-operator">=</span> username {
    <span class="hljs-built_in">print</span>(name.count)
} <span class="hljs-keyword">else</span> {
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"username ä¸º nil"</span>)
}
</code></pre>
<hr/>
<h3 data-id="heading-6">å®‰å…¨è§£åŒ…æ–¹å¼äºŒï¼š<code>guard let</code></h3>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">func</span> <span class="hljs-title function_">printName</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">username</span>: <span class="hljs-type">String</span>?) {
    <span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> name <span class="hljs-operator">=</span> username <span class="hljs-keyword">else</span> {
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"name ä¸º nilï¼Œæå‰è¿”å›"</span>)
        <span class="hljs-keyword">return</span>
    }
    
    <span class="hljs-built_in">print</span>(name.count)
}
</code></pre>
<hr/>
<h2 data-id="heading-7">äºŒã€<code>!</code> â€”â€” å¼ºåˆ¶è§£åŒ…ï¼ˆForce Unwrapï¼‰</h2>
<h3 data-id="heading-8">å®šä¹‰æ–¹å¼</h3>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">var</span> age: <span class="hljs-type">Int</span>! <span class="hljs-operator">=</span> <span class="hljs-number">18</span>
</code></pre>
<p>è¡¨ç¤ºï¼š</p>
<blockquote>
<p>â€œæˆ‘<strong>ç¡®ä¿¡</strong>è¿™ä¸ªå˜é‡åœ¨ä½¿ç”¨æ—¶ä¸€å®šä¸ä¸º nilâ€</p>
</blockquote>
<hr/>
<h3 data-id="heading-9">ä½¿ç”¨æ–¹å¼</h3>
<p>swift</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">print</span>(age + <span class="hljs-number">1</span>)   <span class="hljs-comment">// çœ‹èµ·æ¥åƒé Optional</span>
</code></pre>
<p><strong>é£é™©ç‚¹</strong></p>
<pre><code class="hljs language-swift" lang="swift">age <span class="hljs-operator">=</span> <span class="hljs-literal">nil</span>
<span class="hljs-built_in">print</span>(age <span class="hljs-operator">+</span> <span class="hljs-number">1</span>)  <span class="hljs-comment">// è¿è¡Œæ—¶å´©æºƒ</span>
</code></pre>
<hr/>
<h3 data-id="heading-10">"!"çš„æ­£ç¡®ä½¿ç”¨åœºæ™¯</h3>
<p>IBOutlet<br/>
ç”Ÿå‘½å‘¨æœŸå—æ§å˜é‡</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">@IBOutlet</span> <span class="hljs-keyword">weak</span> <span class="hljs-keyword">var</span> titleLabel: <span class="hljs-type">UILabel</span>!
</code></pre>
<p>åŸå› ï¼š</p>
<ul>
<li>view åŠ è½½å®Œæˆåä¸€å®šå­˜åœ¨</li>
<li>ç³»ç»Ÿä¿è¯åˆå§‹åŒ–æ—¶æœº</li>
</ul>
<p>æŸäº›ä¾èµ–æ³¨å…¥åä¸€å®šå­˜åœ¨çš„å¯¹è±¡</p>
<hr/>
<h3 data-id="heading-11">ä¸æ¨èçš„ç”¨æ³•</h3>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">var</span> userName: <span class="hljs-type">String</span>!
<span class="hljs-built_in">print</span>(userName.count) <span class="hljs-comment">// éå¸¸å±é™© âŒ</span>
</code></pre>
<p><strong>æ€»ç»“ä¸€å¥è¯</strong>ï¼š</p>
<blockquote>
<p><code>!</code> æ˜¯å†™ç»™â€œä½ æœªæ¥çš„è‡ªå·±çœ‹çš„æ‰¿è¯ºâ€ï¼Œä¸€æ—¦è¿èƒŒå°±ä¼š Crash</p>
</blockquote>
<hr/>
<h2 data-id="heading-12">ä¸‰ã€<code>??</code> â€”â€” ç©ºå€¼åˆå¹¶è¿ç®—ç¬¦ï¼ˆNil-Coalescingï¼‰</h2>
<h3 data-id="heading-13">åŸºæœ¬ç”¨æ³•</h3>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">let</span> displayName <span class="hljs-operator">=</span> username <span class="hljs-operator">??</span> <span class="hljs-string">"åŒ¿åç”¨æˆ·"</span>
</code></pre>
<p>å«ä¹‰ï¼š</p>
<blockquote>
<p>å¦‚æœ <code>username</code> ä¸ä¸º nilï¼Œä½¿ç”¨å®ƒ<br/>
å¦åˆ™ä½¿ç”¨ <code>"åŒ¿åç”¨æˆ·"</code></p>
</blockquote>
<hr/>
<h3 data-id="heading-14">å¸¸è§ä½¿ç”¨åœºæ™¯</h3>
<h4 data-id="heading-15">åœºæ™¯ 1ï¼šUI æ˜¾ç¤ºå…œåº•</h4>
<pre><code class="hljs language-swift" lang="swift">titleLabel.text <span class="hljs-operator">=</span> model.title <span class="hljs-operator">??</span> <span class="hljs-string">"æš‚æ— æ ‡é¢˜"</span>
</code></pre>
<h4 data-id="heading-16">åœºæ™¯ 2ï¼šå‚æ•°é»˜è®¤å€¼</h4>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">func</span> <span class="hljs-title function_">loadData</span>(<span class="hljs-params">page</span>: <span class="hljs-type">Int</span>?) {
    <span class="hljs-keyword">let</span> currentPage <span class="hljs-operator">=</span> page <span class="hljs-operator">??</span> <span class="hljs-number">1</span>
    <span class="hljs-built_in">print</span>(currentPage)
}
</code></pre>
<h4 data-id="heading-17">åœºæ™¯ 3ï¼šData / String è½¬æ¢å…œåº•</h4>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">let</span> data <span class="hljs-operator">=</span> <span class="hljs-type">Data</span>(base64Encoded: base64Str <span class="hljs-operator">??</span> <span class="hljs-string">""</span>)
</code></pre>
<hr/>
<h2 data-id="heading-18"><code>?</code> + <code>?.</code> â€”â€” å¯é€‰é“¾ï¼ˆOptional Chainingï¼‰</h2>
<h3 data-id="heading-19">ç¤ºä¾‹</h3>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">let</span> length <span class="hljs-operator">=</span> username<span class="hljs-operator">?</span>.count
</code></pre>
<p>è¿”å›å€¼ç±»å‹ï¼š</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-type">Int</span>?
</code></pre>
<p>å¦‚æœ <code>username == nil</code>ï¼š</p>
<ul>
<li>ä¸ä¼šæ‰§è¡Œ <code>.count</code></li>
<li>æ•´ä¸ªè¡¨è¾¾å¼è¿”å› nil</li>
</ul>
<hr/>
<h3 data-id="heading-20">å¸¸è§é“¾å¼è°ƒç”¨</h3>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">let</span> city <span class="hljs-operator">=</span> user<span class="hljs-operator">?</span>.profile<span class="hljs-operator">?</span>.address<span class="hljs-operator">?</span>.city
</code></pre>
<h3 data-id="heading-21">ä»æœåŠ¡å™¨è¿”å›æ•°æ®è§£æ</h3>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">User</span> {
    <span class="hljs-keyword">let</span> name: <span class="hljs-type">String</span>?
    <span class="hljs-keyword">let</span> age: <span class="hljs-type">Int</span>?
}

<span class="hljs-keyword">func</span> <span class="hljs-title function_">showUser</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">user</span>: <span class="hljs-type">User</span>?) {
    <span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> user <span class="hljs-keyword">else</span> {
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"user ä¸å­˜åœ¨"</span>)
        <span class="hljs-keyword">return</span>
    }
    
    <span class="hljs-keyword">let</span> name <span class="hljs-operator">=</span> user.name <span class="hljs-operator">??</span> <span class="hljs-string">"æœªçŸ¥"</span>
    <span class="hljs-keyword">let</span> age <span class="hljs-operator">=</span> user.age <span class="hljs-operator">??</span> <span class="hljs-number">0</span>
    
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"(name)ï¼Œ(age) å²"</span>)
}
</code></pre>
<hr/>
<h2 data-id="heading-22">å¸¸è§é”™è¯¯ç”¨æ³•æ€»ç»“</h2>
<p>æ»¥ç”¨ <code>!</code></p>
<pre><code class="hljs language-swift" lang="swift">user<span class="hljs-operator">!</span>.name<span class="hljs-operator">!</span>.count <span class="hljs-operator">âŒ</span>
</code></pre>
<p>åµŒå¥— if let è¿‡æ·±</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> a <span class="hljs-operator">=</span> a {
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> b <span class="hljs-operator">=</span> b {
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> c <span class="hljs-operator">=</span> c {
            <span class="hljs-operator">...</span>
        }
    }
}
</code></pre>
<p>æ›´ä¼˜å†™æ³•ï¼š</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> a, <span class="hljs-keyword">let</span> b, <span class="hljs-keyword">let</span> c <span class="hljs-keyword">else</span> { <span class="hljs-keyword">return</span> }
</code></pre>
<h2 data-id="heading-23">æ€»ç»“</h2>
<p>Swift çš„ Optional ä¸æ˜¯è¯­æ³•ç³–ï¼Œè€Œæ˜¯ <strong>é€¼ç€ä½ åœ¨ä»£ç å±‚é¢æå‰æ€è€ƒé£é™©</strong>ã€‚</p>
<p>å¦‚æœ‰è¯´é”™çš„åœ°æ–¹ï¼Œæ»¡å‘æŒ‡æ­£ç›¸äº’å­¦ä¹ ï¼Œè°¢è°¢~</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Next.jsç¬¬åäº”ç« (Image)]]></title>    <link>https://juejin.cn/post/7585897699602923546</link>    <guid>https://juejin.cn/post/7585897699602923546</guid>    <pubDate>2025-12-22T02:17:09.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7585897699602923546" data-draft-id="7585808181239873587" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Next.jsç¬¬åäº”ç« (Image)"/> <meta itemprop="keywords" content="å‰ç«¯,Next.js"/> <meta itemprop="datePublished" content="2025-12-22T02:17:09.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°æ»¡zs"/> <meta itemprop="url" content="https://juejin.cn/user/2463384809252397"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Next.jsç¬¬åäº”ç« (Image)
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2463384809252397/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°æ»¡zs
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-22T02:17:09.000Z" title="Mon Dec 22 2025 02:17:09 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Imageç»„ä»¶</h2>
<p>è¯¥ç»„ä»¶æ˜¯Next.jså†…ç½®çš„å›¾ç‰‡ç»„ä»¶ï¼Œæ˜¯åŸºäºåŸç”Ÿ<code>img</code>æ ‡ç­¾è¿›è¡Œæ‰©å±•ï¼Œå¹¶ä¸ä»£è¡¨åŸç”Ÿ<code>img</code>æ ‡ç­¾ä¸èƒ½ä½¿ç”¨ã€‚</p>
<ul>
<li>å°ºå¯¸ä¼˜åŒ–ï¼šæ”¯æŒä½¿ç”¨ç°ä»£åŒ–å›¾ç‰‡æ ¼å¼ï¼Œå¦‚<code>webp</code>ï¼Œ<code>avif</code>ï¼Œ<code>apng</code>ç­‰,å¹¶è‡ªåŠ¨æ ¹æ®è®¾å¤‡æä¾›æ­£ç¡®çš„å°ºå¯¸ã€‚</li>
<li>è§†è§‰ç¨³å®šæ€§ï¼šé˜²æ­¢å›¾ç‰‡åŠ è½½æ—¶å‘ç”Ÿå¸ƒå±€åç§»ï¼Œå…·ä½“å‚è€ƒ<a href="https://link.juejin.cn?target=https%3A%2F%2Fweb.dev%2Farticles%2Fcls%3Fhl%3Dzh-cn" target="_blank" title="https://web.dev/articles/cls?hl=zh-cn" ref="nofollow noopener noreferrer">CLS</a></li>
<li>æ‡’åŠ è½½ï¼šåœ¨å›¾ç‰‡è¿›å…¥è§†å£æ‰ä¼šåŠ è½½ï¼Œä½¿ç”¨æµè§ˆå™¨åŸç”Ÿæ‡’åŠ è½½ï¼Œå¹¶å¯é€‰æ‹©æ·»åŠ æ¨¡ç³Šæ˜¾ç¤ºå ä½ç¬¦ã€‚</li>
<li>çµæ´»æ€§ï¼šå¯æŒ‰éœ€è°ƒæ•´å›¾åƒå¤§å°ï¼Œå³ä½¿æ˜¯å­˜å‚¨åœ¨è¿œç¨‹æœåŠ¡å™¨ä¸Šçš„å›¾åƒä¹Ÿå¯ä»¥è°ƒæ•´ã€‚</li>
</ul>
<h4 data-id="heading-1">å›¾ç‰‡å¼•å…¥</h4>
<h5 data-id="heading-2">1. srcæœ¬åœ°å›¾ç‰‡å¼•å…¥</h5>
<p>Next.jså»ºè®®æˆ‘ä»¬æŠŠå›¾ç‰‡æ”¾åœ¨æ ¹ç›®å½•ä¸‹çš„<code>public</code>æ–‡ä»¶å¤¹ä¸­ï¼Œç„¶åä½¿ç”¨<code>/</code>å¼€å¤´è®¿é—®ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8a73a9cf6e7c4be8b3f3b61e531a778f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5ruhenM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766974628&amp;x-signature=GFjfFcsoNvoSwKUNnkb9VH%2F68kc%3D" alt="public.png" loading="lazy"/></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">Image</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"next/image"</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Home</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> (
        <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Home<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">Image</span>
                <span class="hljs-attr">src</span>=<span class="hljs-string">"/1.png"</span>
                <span class="hljs-attr">width</span>=<span class="hljs-string">{100}</span>
                <span class="hljs-attr">height</span>=<span class="hljs-string">{100}</span>
                <span class="hljs-attr">alt</span>=<span class="hljs-string">"1"</span>
            /&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
    )
}
</code></pre>
<h5 data-id="heading-3">2. importé™æ€å¼•å…¥</h5>
<p>ä½¿ç”¨<code>import</code>å¼•å…¥å›¾ç‰‡ï¼Œæ˜¯ä¸éœ€è¦å¡«å†™å®½åº¦å’Œé«˜åº¦ï¼ŒNext.jsä¼šè‡ªåŠ¨ç¡®å®šå›¾ç‰‡çš„å°ºå¯¸ã€‚</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"compilerOptions"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"paths"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">"@/*"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"./src/*"</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"@/public/*"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"./public/*"</span><span class="hljs-punctuation">]</span> <span class="hljs-comment">// æ–°å¢è¿™ä¸€è¡Œä»£ç ï¼Œé…ç½®å›¾ç‰‡è·¯å¾„ã€‚</span>
        <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>ä½¿ç”¨é™æ€<code>import</code>å¼•å…¥å›¾ç‰‡ï¼Œä½ ä¼šå‘ç°æ— éœ€å¡«å†™å®½åº¦å’Œé«˜åº¦ï¼ŒNext.jsä¼šè‡ªåŠ¨ç¡®å®šå›¾ç‰‡çš„å°ºå¯¸ã€‚</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">Image</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"next/image"</span>
<span class="hljs-keyword">import</span> test <span class="hljs-keyword">from</span> <span class="hljs-string">'@/public/1.png'</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Home</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> (
        <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Home<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">Image</span>
                <span class="hljs-attr">src</span>=<span class="hljs-string">{test}</span>
                <span class="hljs-attr">alt</span>=<span class="hljs-string">"1"</span>
            /&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
    )
}
</code></pre>
<h5 data-id="heading-4">3. è¿œç¨‹å›¾ç‰‡å¼•å…¥</h5>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">Image</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"next/image"</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Home</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> len = <span class="hljs-number">20</span>;
    <span class="hljs-keyword">return</span> (
        <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Home<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
            {Array.from({ length: len }).map((_, index) =&gt; (
                <span class="hljs-tag">&lt;<span class="hljs-name">Image</span>
                    <span class="hljs-attr">key</span>=<span class="hljs-string">{index}</span>
                    <span class="hljs-attr">src</span>=<span class="hljs-string">{</span>`<span class="hljs-attr">https:</span>//<span class="hljs-attr">eo-img.521799.xyz</span>/<span class="hljs-attr">i</span>/<span class="hljs-attr">pc</span>/<span class="hljs-attr">img</span>${<span class="hljs-attr">index</span> + <span class="hljs-attr">1</span>}<span class="hljs-attr">.webp</span>`}
                    <span class="hljs-attr">alt</span>=<span class="hljs-string">"1"</span>
                    <span class="hljs-attr">width</span>=<span class="hljs-string">{192}</span>
                    <span class="hljs-attr">height</span>=<span class="hljs-string">{108}</span>
                /&gt;</span>
            ))}
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
    )
}
</code></pre>
<p>å½“æˆ‘ä»¬ç›´æ¥ä½¿ç”¨è¿œç¨‹å›¾ç‰‡å¼•å…¥çš„æ—¶å€™Next.jsä¼šæŠ¥é”™ï¼Œå› ä¸ºNext.jsé»˜è®¤åªå…è®¸åŠ è½½æœ¬åœ°å›¾ç‰‡ï¼Œå¦‚æœéœ€è¦åŠ è½½è¿œç¨‹å›¾ç‰‡ï¼Œéœ€è¦é…ç½®<code>next.config.js</code>æ–‡ä»¶ã€‚</p>
<p>image-loader.ts:86 Uncaught Error: Invalid src prop (<a href="https://link.juejin.cn?target=https%3A%2F%2Feo-img.521799.xyz%2Fi%2Fpc%2Fimg1.webp" target="_blank" title="https://eo-img.521799.xyz/i/pc/img1.webp" ref="nofollow noopener noreferrer">eo-img.521799.xyz/i/pc/img1.wâ€¦</a>) on <code>next/image</code>, hostname "eo-img.521799.xyz" is not configured under images in your <code>next.config.js</code></p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">import</span> <span class="hljs-keyword">type</span> { <span class="hljs-title class_">NextConfig</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"next"</span>;

<span class="hljs-keyword">const</span> <span class="hljs-attr">nextConfig</span>: <span class="hljs-title class_">NextConfig</span> = {
  <span class="hljs-comment">/* config options here */</span>
  <span class="hljs-attr">images</span>: {
    <span class="hljs-attr">remotePatterns</span>: [
      {
        <span class="hljs-attr">protocol</span>: <span class="hljs-string">'https'</span>, <span class="hljs-comment">// åè®®</span>
        <span class="hljs-attr">hostname</span>: <span class="hljs-string">'eo-img.521799.xyz'</span>, <span class="hljs-comment">// ä¸»æœºå</span>
        <span class="hljs-attr">pathname</span>: <span class="hljs-string">'/i/pc/**'</span>, <span class="hljs-comment">// è·¯å¾„</span>
        <span class="hljs-attr">port</span>: <span class="hljs-string">''</span>, <span class="hljs-comment">// ç«¯å£</span>
      },
    ],
  },
};
</code></pre>
<h5 data-id="heading-5">4. LCPè­¦å‘Š</h5>
<p>å¦‚æœå›¾ç‰‡æ˜¯é¦–å±æˆ–è€…LCPå›¾ç‰‡ï¼Œéœ€è¦æ·»åŠ <code>loading="eager"</code>å±æ€§ï¼Œå¦åˆ™ä¼šè§¦å‘LCPè­¦å‘Š,å› ä¸ºImageç»„ä»¶é»˜è®¤æ˜¯æ‡’åŠ è½½çš„ã€‚</p>
<ul>
<li>lazy: æ‡’åŠ è½½ï¼Œé»˜è®¤å€¼ï¼Œåœ¨å›¾ç‰‡è¿›å…¥è§†å£æ‰ä¼šåŠ è½½ã€‚</li>
<li>eager: ç«‹å³åŠ è½½ï¼Œåœ¨å›¾ç‰‡è¿›å…¥è§†å£å°±ä¼šåŠ è½½ã€‚</li>
</ul>
<p>Image with src "<a href="https://link.juejin.cn?target=https%3A%2F%2Feo-img.521799.xyz%2Fi%2Fpc%2Fimg1.webp" target="_blank" title="https://eo-img.521799.xyz/i/pc/img1.webp" ref="nofollow noopener noreferrer">eo-img.521799.xyz/i/pc/img1.wâ€¦</a>" was detected as the Largest Contentful Paint (LCP). Please add the <code>loading="eager"</code> property if this image is above the fold.
Read more: <a href="https://link.juejin.cn?target=https%3A%2F%2Fnextjs.org%2Fdocs%2Fapp%2Fapi-reference%2Fcomponents%2Fimage%23loading" target="_blank" title="https://nextjs.org/docs/app/api-reference/components/image#loading" ref="nofollow noopener noreferrer">nextjs.org/docs/app/apâ€¦</a></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">Image</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"next/image"</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Home</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> len = <span class="hljs-number">20</span>
    <span class="hljs-keyword">return</span> (
        <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Home<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
            {Array.from({ length: len }).map((_, index) =&gt; (
                <span class="hljs-tag">&lt;<span class="hljs-name">Image</span>
                    <span class="hljs-attr">key</span>=<span class="hljs-string">{index}</span>
                    <span class="hljs-attr">src</span>=<span class="hljs-string">{</span>`<span class="hljs-attr">https:</span>//<span class="hljs-attr">eo-img.521799.xyz</span>/<span class="hljs-attr">i</span>/<span class="hljs-attr">pc</span>/<span class="hljs-attr">img</span>${<span class="hljs-attr">index</span> + <span class="hljs-attr">1</span>}<span class="hljs-attr">.webp</span>`}
                    <span class="hljs-attr">alt</span>=<span class="hljs-string">"1"</span>
                    <span class="hljs-attr">width</span>=<span class="hljs-string">{192}</span>
                    <span class="hljs-attr">height</span>=<span class="hljs-string">{108}</span>
                    <span class="hljs-attr">loading</span>=<span class="hljs-string">"eager"</span> // <span class="hljs-attr">ç«‹å³åŠ è½½</span>
                /&gt;</span>
            ))}
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
    )
}
</code></pre>
<p>ç¬¬äºŒç§è§£å†³æ–¹æ¡ˆä½¿ç”¨<code>preload</code>å±æ€§åŠ è½½å›¾ç‰‡ï¼Œè¡¨ç¤ºæå‰é¢„åŠ è½½å›¾ç‰‡ï¼Œä¸è¿‡Next.jsè¿˜æ˜¯æ›´åŠ æ¨èä½¿ç”¨<code>loading="eager"</code>å±æ€§åŠ è½½å›¾ç‰‡ã€‚</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">Image</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"next/image"</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Home</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> len = <span class="hljs-number">20</span>
    <span class="hljs-keyword">return</span> (
        <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Home<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
            {Array.from({ length: len }).map((_, index) =&gt; (
                <span class="hljs-tag">&lt;<span class="hljs-name">Image</span>
                    <span class="hljs-attr">key</span>=<span class="hljs-string">{index}</span>
                    <span class="hljs-attr">src</span>=<span class="hljs-string">{</span>`<span class="hljs-attr">https:</span>//<span class="hljs-attr">eo-img.521799.xyz</span>/<span class="hljs-attr">i</span>/<span class="hljs-attr">pc</span>/<span class="hljs-attr">img</span>${<span class="hljs-attr">index</span> + <span class="hljs-attr">1</span>}<span class="hljs-attr">.webp</span>`}
                    <span class="hljs-attr">alt</span>=<span class="hljs-string">"1"</span>
                    <span class="hljs-attr">width</span>=<span class="hljs-string">{192}</span>
                    <span class="hljs-attr">height</span>=<span class="hljs-string">{108}</span>
                    <span class="hljs-attr">preload</span>=<span class="hljs-string">{index</span> &lt; <span class="hljs-attr">10</span>} // <span class="hljs-attr">ä¼˜å…ˆåŠ è½½ç­–ç•¥</span>
                /&gt;</span>
            ))}
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
    )
}
</code></pre>
<h5 data-id="heading-6">5. å›¾ç‰‡æ ¼å¼ä¼˜åŒ–</h5>
<p>Next.js ä¼šé€šè¿‡è¯·æ±‚Acceptå¤´è‡ªåŠ¨æ£€æµ‹æµè§ˆå™¨æ”¯æŒçš„å›¾åƒæ ¼å¼ï¼Œä»¥ç¡®å®šæœ€ä½³è¾“å‡ºæ ¼å¼</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-title class_">Accept</span>:image/avif,image/webp,image/apng,image/svg+xml,image<span class="hljs-comment">/*,*/</span>*;q=<span class="hljs-number">0.8</span>
</code></pre>
<p>æˆ‘ä»¬å¯ä»¥åŒæ—¶å¯ç”¨ AVIF å’Œ WebP æ ¼å¼ã€‚å¯¹äºæ”¯æŒ AVIF çš„æµè§ˆå™¨ï¼Œç³»ç»Ÿå°†ä¼˜å…ˆä½¿ç”¨ AVIF æ ¼å¼ï¼ŒWebP æ ¼å¼ä½œä¸ºå¤‡é€‰æ–¹æ¡ˆã€‚ç›®å‰AVIFæ ¼å¼æœ€ä¼˜ã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> <span class="hljs-attr">nextConfig</span>: <span class="hljs-title class_">NextConfig</span> = {
  <span class="hljs-comment">/* config options here */</span>
  <span class="hljs-attr">images</span>: {
    <span class="hljs-attr">formats</span>: [<span class="hljs-string">'image/avif'</span>, <span class="hljs-string">'image/webp'</span>], <span class="hljs-comment">//é»˜è®¤æ˜¯ ['image/webp']</span>
  },
};
</code></pre>
<h5 data-id="heading-7">6. è®¾å¤‡é€‚é…</h5>
<p>å¦‚æœä½ çš„è€æ¿å‘Šè¯‰ä½ è¦å…¼å®¹å“ªäº›è®¾å¤‡ï¼Œä½ å¯ä»¥ä½¿ç”¨<code>deviceSizes</code>å’Œ<code>imageSizes</code>å±æ€§æ¥é…ç½®ã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> <span class="hljs-attr">nextConfig</span>: <span class="hljs-title class_">NextConfig</span> = {
  <span class="hljs-comment">/* config options here */</span>
  <span class="hljs-attr">images</span>: {
    <span class="hljs-attr">deviceSizes</span>: [<span class="hljs-number">640</span>, <span class="hljs-number">750</span>, <span class="hljs-number">828</span>, <span class="hljs-number">1080</span>, <span class="hljs-number">1200</span>, <span class="hljs-number">1920</span>, <span class="hljs-number">2048</span>, <span class="hljs-number">3840</span>], <span class="hljs-comment">// è®¾å¤‡å°ºå¯¸</span>
    <span class="hljs-attr">imageSizes</span>: [<span class="hljs-number">16</span>, <span class="hljs-number">32</span>, <span class="hljs-number">48</span>, <span class="hljs-number">64</span>, <span class="hljs-number">96</span>, <span class="hljs-number">128</span>, <span class="hljs-number">256</span>, <span class="hljs-number">384</span>], <span class="hljs-comment">// å›¾ç‰‡å°ºå¯¸</span>
  },
};
</code></pre>
<p>è¿™ä¸¤ä¸ªå±æ€§ç»“åˆä¼šæœ€ç»ˆç”Ÿæˆä¸€ä¸ª<code>srcset</code>å±æ€§ï¼Œç”¨äºæµè§ˆå™¨é€‰æ‹©æœ€ä½³å›¾ç‰‡ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2bed6fc34c0a414484df71bcf1dbe922~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5ruhenM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766974628&amp;x-signature=vOdeCraZzznSMXE%2FFPdALioNi2Y%3D" alt="srcset.png" loading="lazy"/></p>
<p>é‚£ä¸ºä»€ä¹ˆéœ€è¦ä¸¤ä¸ªæ•°ç»„å»å®ç°å‘¢ï¼Ÿ</p>
<p>æˆ‘ä»¬è§‚å¯Ÿä¸Šå›¾å¯ä»¥å‘ç°ï¼Œ<code>imageSizes</code>ç”¨äºç”Ÿæˆå°å›¾ç‰‡å°ºå¯¸ä¾‹å¦‚(ç¼©ç•¥å›¾ï¼Œå¤´åƒç­‰)ï¼Œè€Œ<code>deviceSizes</code>ç”¨äºç”Ÿæˆå¤§å›¾ç‰‡å°ºå¯¸ä¾‹å¦‚(æ¨ªå¹…å›¾ã€èƒŒæ™¯å›¾ã€å…¨å±å±•ç¤ºå›¾)ã€‚</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">Image</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"next/image"</span>

<span class="hljs-comment">// å¤´åƒ - å›ºå®š 64px</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Avatar</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Image</span>
      <span class="hljs-attr">src</span>=<span class="hljs-string">"/avatar.jpg"</span>
      <span class="hljs-attr">width</span>=<span class="hljs-string">{64}</span>
      <span class="hljs-attr">height</span>=<span class="hljs-string">{64}</span>
      <span class="hljs-attr">alt</span>=<span class="hljs-string">"ç”¨æˆ·å¤´åƒ"</span>
      <span class="hljs-attr">sizes</span>=<span class="hljs-string">"64px"</span>  // â† <span class="hljs-attr">å‘Šè¯‰æµè§ˆå™¨è¿™å¼ å›¾åªéœ€è¦</span> <span class="hljs-attr">64px</span>
    /&gt;</span></span>
  )
}

<span class="hljs-comment">// æ¨ªå¹…å›¾ - å“åº”å¼å…¨å®½</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Banner</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Image</span>
      <span class="hljs-attr">src</span>=<span class="hljs-string">"/banner.jpg"</span>
      <span class="hljs-attr">width</span>=<span class="hljs-string">{1920}</span>
      <span class="hljs-attr">height</span>=<span class="hljs-string">{600}</span>
      <span class="hljs-attr">alt</span>=<span class="hljs-string">"æ¨ªå¹…"</span>
      <span class="hljs-attr">sizes</span>=<span class="hljs-string">"100vw"</span>  // â† <span class="hljs-attr">å æ»¡æ•´ä¸ªè§†å£å®½åº¦</span>ï¼Œ<span class="hljs-attr">ä½¿ç”¨</span> <span class="hljs-attr">deviceSizes</span>
    /&gt;</span></span>
  )
}

<span class="hljs-comment">// å“åº”å¼å†…å®¹å›¾</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">ContentImage</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Image</span>
      <span class="hljs-attr">src</span>=<span class="hljs-string">"/content.jpg"</span>
      <span class="hljs-attr">width</span>=<span class="hljs-string">{1200}</span>
      <span class="hljs-attr">height</span>=<span class="hljs-string">{800}</span>
      <span class="hljs-attr">alt</span>=<span class="hljs-string">"å†…å®¹å›¾"</span>
      <span class="hljs-attr">sizes</span>=<span class="hljs-string">"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 1200px"</span>
      // â†‘ <span class="hljs-attr">æ‰‹æœºä¸Š</span> <span class="hljs-attr">100</span>% <span class="hljs-attr">å®½åº¦</span>ï¼Œ<span class="hljs-attr">å¹³æ¿ä¸Š</span> <span class="hljs-attr">50</span>%ï¼Œ<span class="hljs-attr">æ¡Œé¢æœ€å¤§</span> <span class="hljs-attr">1200px</span>
    /&gt;</span></span>
  )
}
</code></pre>
<h4 data-id="heading-8">Props</h4>
<p>ä»¥ä¸‹æ˜¯ Image ç»„ä»¶å¯ç”¨çš„å±æ€§ï¼š</p>
<h5 data-id="heading-9">å¿…éœ€å±æ€§</h5>























<table><thead><tr><th>å±æ€§</th><th>ç±»å‹</th><th>ç¤ºä¾‹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>src</td><td>String</td><td><code>src="/profile.png"</code></td><td>å›¾ç‰‡æºè·¯å¾„ï¼Œæ”¯æŒæœ¬åœ°è·¯å¾„æˆ–è¿œç¨‹ URL</td></tr><tr><td>alt</td><td>String</td><td><code>alt="Picture of the author"</code></td><td>å›¾ç‰‡æ›¿ä»£æ–‡æœ¬ï¼Œç”¨äºæ— éšœç¢è®¿é—®å’Œ SEO</td></tr></tbody></table>
<h5 data-id="heading-10">å°ºå¯¸ç›¸å…³</h5>



































<table><thead><tr><th>å±æ€§</th><th>ç±»å‹</th><th>ç¤ºä¾‹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>width</td><td>Integer (px)</td><td><code>width={500}</code></td><td>å›¾ç‰‡å®½åº¦ï¼Œé™æ€å¯¼å…¥æ—¶å¯é€‰</td></tr><tr><td>height</td><td>Integer (px)</td><td><code>height={500}</code></td><td>å›¾ç‰‡é«˜åº¦ï¼Œé™æ€å¯¼å…¥æ—¶å¯é€‰</td></tr><tr><td>fill</td><td>Boolean</td><td><code>fill={true}</code></td><td>å¡«å……çˆ¶å®¹å™¨ï¼Œæ›¿ä»£ width å’Œ height</td></tr><tr><td>sizes</td><td>String</td><td><code>sizes="(max-width: 768px) 100vw"</code></td><td>å“åº”å¼å›¾ç‰‡å°ºå¯¸</td></tr></tbody></table>
<h5 data-id="heading-11">ä¼˜åŒ–ç›¸å…³</h5>





























<table><thead><tr><th>å±æ€§</th><th>ç±»å‹</th><th>ç¤ºä¾‹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>quality</td><td>Integer (1-100)</td><td><code>quality={80}</code></td><td>å›¾ç‰‡å‹ç¼©è´¨é‡ï¼Œé»˜è®¤ä¸º 75</td></tr><tr><td>loader</td><td>Function</td><td><code>loader={imageLoader}</code></td><td>è‡ªå®šä¹‰å›¾ç‰‡åŠ è½½å™¨å‡½æ•°</td></tr><tr><td>unoptimized</td><td>Boolean</td><td><code>unoptimized={true}</code></td><td>ç¦ç”¨å›¾ç‰‡ä¼˜åŒ–ï¼Œä½¿ç”¨åŸå›¾</td></tr></tbody></table>
<h5 data-id="heading-12">åŠ è½½ç›¸å…³</h5>



































<table><thead><tr><th>å±æ€§</th><th>ç±»å‹</th><th>ç¤ºä¾‹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>loading</td><td>String</td><td><code>loading="lazy"</code></td><td>åŠ è½½ç­–ç•¥ï¼Œ"lazy" æˆ– "eager"</td></tr><tr><td>preload</td><td>Boolean</td><td><code>preload={true}</code></td><td>æ˜¯å¦é¢„åŠ è½½ï¼Œç”¨äº LCP å…ƒç´ </td></tr><tr><td>placeholder</td><td>String</td><td><code>placeholder="blur"</code></td><td>å ä½ç¬¦ç±»å‹ï¼Œ"blur" æˆ– "empty"</td></tr><tr><td>blurDataURL</td><td>String</td><td><code>blurDataURL="data:image/jpeg..."</code></td><td>æ¨¡ç³Šå ä½ç¬¦çš„ Data URL</td></tr></tbody></table>
<h5 data-id="heading-13">äº‹ä»¶å›è°ƒ</h5>























<table><thead><tr><th>å±æ€§</th><th>ç±»å‹</th><th>ç¤ºä¾‹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>onLoad</td><td>Function</td><td><code>onLoad={e =&gt; done()}</code></td><td>å›¾ç‰‡åŠ è½½å®Œæˆæ—¶çš„å›è°ƒ</td></tr><tr><td>onError</td><td>Function</td><td><code>onError={e =&gt; fail()}</code></td><td>å›¾ç‰‡åŠ è½½å¤±è´¥æ—¶çš„å›è°ƒ</td></tr></tbody></table>
<h5 data-id="heading-14">å…¶ä»–å±æ€§</h5>





























<table><thead><tr><th>å±æ€§</th><th>ç±»å‹</th><th>ç¤ºä¾‹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>style</td><td>Object</td><td><code>style={{objectFit: "contain"}}</code></td><td>å†…è”æ ·å¼å¯¹è±¡</td></tr><tr><td>overrideSrc</td><td>String</td><td><code>overrideSrc="/seo.png"</code></td><td>è¦†ç›– srcï¼Œç”¨äº SEO ä¼˜åŒ–</td></tr><tr><td>decoding</td><td>String</td><td><code>decoding="async"</code></td><td>è§£ç æ–¹å¼ï¼Œ"async"/"sync"/"auto"</td></tr></tbody></table></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[antd 5 + react 18 + vite 7 å‡çº§]]></title>    <link>https://juejin.cn/post/7585948869844762659</link>    <guid>https://juejin.cn/post/7585948869844762659</guid>    <pubDate>2025-12-22T02:17:19.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7585948869844762659" data-draft-id="7584719268044668962" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="antd 5 + react 18 + vite 7 å‡çº§"/> <meta itemprop="keywords" content="å‰ç«¯,React.js"/> <meta itemprop="datePublished" content="2025-12-22T02:17:19.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="holidaypenguin"/> <meta itemprop="url" content="https://juejin.cn/user/2313028194801421"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            antd 5 + react 18 + vite 7 å‡çº§
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2313028194801421/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    holidaypenguin
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-22T02:17:19.000Z" title="Mon Dec 22 2025 02:17:19 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€å¹´å‰react + vite + antd é¡¹ç›® å‡çº§</h2>
<blockquote>
<p>ç›®æ ‡å‡çº§åˆ° antd 6 ã€ react 19ã€vite 8ã€babel-plugin-react-compiler</p>
<p>è¿˜æœ‰å…¶ä»–ä¾èµ–é¡¹ç›® å¦‚ echarts</p>
</blockquote>
<h3 data-id="heading-1">å‡çº§ antd6 å’Œ vite 8</h3>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fant-design.antgroup.com%2Fdocs%2Freact%2Fmigration-v6-cn" target="_blank" title="https://ant-design.antgroup.com/docs/react/migration-v6-cn" ref="nofollow noopener noreferrer">ä» v5 åˆ° v6 - Ant Design</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fcn.vite.dev%2Fblog%2Fannouncing-vite8-beta" target="_blank" title="https://cn.vite.dev/blog/announcing-vite8-beta" ref="nofollow noopener noreferrer">Vite 8 Beta: The Rolldown-powered Vite | Vite å®˜æ–¹ä¸­æ–‡æ–‡æ¡£</a></li>
</ul>
<h4 data-id="heading-2">æ›´æ–°ç›¸å…³ä¾èµ–</h4>
<ul>
<li>æ‰‹åŠ¨æŸ¥çœ‹ç›¸å…³ä¾èµ–ç‰ˆæœ¬ï¼Œä¿®æ”¹antdå’Œviteç›¸å…³ä¾èµ–ç‰ˆæœ¬
<ul>
<li>antd</li>
<li>@ant-design/icons</li>
<li>@vitejs/plugin-react-oxc -&gt; @vitejs/plugin-react</li>
<li>vite</li>
<li>å…¶ä»–ä¸€äº›æ— å…³ç´§è¦çš„ä¾èµ–ç‰ˆæœ¬å‡çº§</li>
</ul>
</li>
<li><code>antd@6</code>Â è¦æ±‚Â <code>@ant-design/icons</code>Â ç‰ˆæœ¬ &gt;= 6.0.0</li>
<li>@vitejs/plugin-react-oxc is deprecated. Please use @vitejs/plugin-react instead. The changes of this plugin is now included in @vitejs/plugin-react.</li>
</ul>
<p>ä¿®æ”¹ç›¸å…³ä¾èµ–é¡¹ç‰ˆæœ¬ç„¶åå®‰è£…ä¾èµ–</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9d3deef43a06436dbb7d4fb673986fed~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaG9saWRheXBlbmd1aW4=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766974639&amp;x-signature=yWn3N%2F%2FcTv0aoePwoglLwaINhF0%3D" alt="image.png" loading="lazy"/></p>
<p>ç¬¬ä¸€æ¬¡å¯åŠ¨</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fa81367939e140f5bfe49ee0b5b650c1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaG9saWRheXBlbmd1aW4=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766974639&amp;x-signature=z0FUwfMVE7rO31XEiRMtBgm35gQ%3D" alt="image.png" loading="lazy"/></p>
<p>@vitejs/plugin-react</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9a41ac2e84c149dc97e71d8a787165f3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaG9saWRheXBlbmd1aW4=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766974639&amp;x-signature=xCWgBB15u25WX1glTRlpxYYgf0I%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-3">ä¿®æ”¹ antd 6 çš„APIè°ƒæ•´</h4>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fant-design.antgroup.com%2Fdocs%2Freact%2Fmigration-v6-cn%23api-%25E8%25B0%2583%25E6%2595%25B4" target="_blank" title="https://ant-design.antgroup.com/docs/react/migration-v6-cn#api-%E8%B0%83%E6%95%B4" ref="nofollow noopener noreferrer">ä» v5 åˆ° v6 - Ant Design</a></p>
<h5 data-id="heading-4"><code>Alert</code></h5>
<p>message  å±æ€§æ”¹æˆ title</p>
<h5 data-id="heading-5"><code>Card</code></h5>
<p>bodyStyle å±æ€§æ²¡æœ‰äº†ï¼Œç»„ä»¶ä¸­ styles å±æ€§ä¸­ body è‡ªå®šä¹‰çš„æ—¶å€™æŠ¥é”™
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0ef092b66e2d4dad884826b2200990e0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaG9saWRheXBlbmd1aW4=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766974639&amp;x-signature=rft%2BS7qR1DEoh1meMlf%2BtE6CoSo%3D" alt="image.png" loading="lazy"/></p>
<p>å› ä¸º  <code>styles</code> çš„ç±»å‹   Record&lt;<a href="https://link.juejin.cn?target=https%3A%2F%2Fant-design.antgroup.com%2Fcomponents%2Fcard-cn%23semantic-dom" target="_blank" title="https://ant-design.antgroup.com/components/card-cn#semantic-dom" ref="nofollow noopener noreferrer">SemanticDOM</a>, CSSProperties&gt; | (info: { props })=&gt; Record&lt;<a href="https://link.juejin.cn?target=https%3A%2F%2Fant-design.antgroup.com%2Fcomponents%2Fcard-cn%23semantic-dom" target="_blank" title="https://ant-design.antgroup.com/components/card-cn#semantic-dom" ref="nofollow noopener noreferrer">SemanticDOM</a>, CSSProperties&gt;</p>
<p>å¢åŠ ä¸€ä¸ªä»£ç†å±æ€§</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">const</span> <span class="hljs-title function_">stylesProxy</span> = (<span class="hljs-params">info</span>) =&gt; {
    <span class="hljs-keyword">const</span> stylesObj = <span class="hljs-keyword">typeof</span> styles === <span class="hljs-string">'function'</span> ? <span class="hljs-title function_">styles</span>(info) : styles
    <span class="hljs-keyword">return</span> {
        ...stylesObj,
        <span class="hljs-attr">body</span>: {
            ...(stylesObj.<span class="hljs-property">body</span> || {}),
            <span class="hljs-attr">height</span>: full ? <span class="hljs-string">'100%'</span> : stylesObj?.<span class="hljs-property">body</span>?.<span class="hljs-property">height</span> || <span class="hljs-string">'auto'</span>,
        }
    }
}

&lt;<span class="hljs-title class_">Card</span> 
    {...args}
    styles={stylesProxy}
/&gt;
</code></pre>
<h5 data-id="heading-6"><code>Dropdown</code> <code>Button</code></h5>
<blockquote>
<p>hoveræ˜¾ç¤ºçš„æ—¶å€™ç‚¹å‡»ä¼šæ¶ˆå¤±ï¼Œå†æ¬¡hoverä¹Ÿä¸æ˜¾ç¤ºï¼Œç­‰ç»„ä»¶åº“å‡çº§å¥½ä»¥åï¼Œåœ¨å‡çº§react 19 çœ‹çœ‹æ˜¯å¦èƒ½è§£å†³ã€‚</p>
</blockquote>
<h5 data-id="heading-7"><code>Input</code> å’Œ <code>InputNumber</code>   <code>addonAfter</code>  <code>addonAfter</code> å±æ€§åºŸå¼ƒ</h5>
<blockquote>
<p>é¢„ç•™é—®é¢˜ï¼šå› ä¸ºæš‚æ—¶è¿˜èƒ½ç”¨ï¼Œå…ˆæ•´ä½“å‡çº§å®Œå†è§£å†³</p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/87fafaa096fc435a86c70fb68bb450d1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaG9saWRheXBlbmd1aW4=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766974639&amp;x-signature=e3xGEsIOXB187Bm1nJlBaAIauTo%3D" alt="image.png" loading="lazy"/></p>
<h5 data-id="heading-8"><code>Progress</code></h5>
<p><code>strokeWidth</code>Â å¼ƒç”¨ï¼Œå˜ä¸ºÂ <code>size</code>ã€‚å½“  <code>type="circle"</code>  <code>type="dashboard"</code> çš„æ—¶å€™ strokeWidth è¿˜æ˜¯ä¿ç•™çš„</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ed8cb8242a404fd38a583a4773f52058~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaG9saWRheXBlbmd1aW4=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766974639&amp;x-signature=C9ZiJcpSGeRin94oDYJ%2BiiLjf4U%3D" alt="image.png" loading="lazy"/></p>
<h5 data-id="heading-9"><code>Select</code></h5>
<p>filterOption åºŸå¼ƒï¼Œä½¿ç”¨ showSearch.filterOption</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2fef1f97fde94ba7b628e75f2e0cc8b6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaG9saWRheXBlbmd1aW4=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766974639&amp;x-signature=aTWqmJ%2BOf0AA0LqJGedPDle8dIQ%3D" alt="image.png" loading="lazy"/></p>
<p>é€šç”¨ç»„ä»¶ç±»å‹å®šä¹‰</p>
<pre><code class="hljs language-java" lang="java">export <span class="hljs-keyword">interface</span> <span class="hljs-title class_">FISelectProps</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Omit</span>&lt;SelectProps, <span class="hljs-string">'filterOption'</span>&gt; {}
</code></pre>
<p>é€šç”¨ç»„ä»¶åˆ¶å®šé»˜è®¤æœç´¢æ–¹æ³•</p>
<pre><code class="hljs language-tsx" lang="tsx">
<span class="hljs-keyword">const</span> <span class="hljs-attr">showSearchProxy</span>: <span class="hljs-title class_">SelectProps</span>[<span class="hljs-string">'showSearch'</span>] = <span class="hljs-keyword">typeof</span> showSearch === <span class="hljs-string">'boolean'</span> &amp;&amp; showSearch === <span class="hljs-literal">true</span>
    ? {
        <span class="hljs-attr">filterOption</span>: filterOptionProxy,
    }
    : <span class="hljs-keyword">typeof</span> showSearch !== <span class="hljs-string">'boolean'</span>
        ? {
            ...showSearch,
            <span class="hljs-attr">filterOption</span>: showSearch.<span class="hljs-property">filterOption</span> || filterOptionProxy,
        }
        : showSearch
</code></pre>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fant-design%2Fant-design%2Fissues%2F55877" target="_blank" title="https://github.com/ant-design/ant-design/issues/55877" ref="nofollow noopener noreferrer">[Bug 6.0] Select ç»„ä»¶çš„ options é€‰é¡¹å­˜åœ¨ label/value ç­‰å®ƒæ”¯æŒçš„å±æ€§å¤–çš„å…¶ä»–å±æ€§æ—¶ React æŠ¥è­¦å‘Šé”™è¯¯ Â· Issue #55877 Â· ant-design/ant-design</a></p>
<p>è¿™ä¸ªè­¦å‘Šæ˜¯å› ä¸º Select çš„ options é‡Œè‡ªå®šä¹‰å±æ€§ï¼ˆæ¯”å¦‚ labelPinyinï¼‰è¢«ç›´æ¥ä¼ é€’åˆ° DOM å…ƒç´ ä¸Šï¼ŒReact 19 å¯¹æœªçŸ¥å±æ€§æ£€æŸ¥æ›´ä¸¥æ ¼ï¼Œæ‰€ä»¥ä¼šæŠ¥é”™ã€‚Ant Design 6.0.0 æ²¡æœ‰è‡ªåŠ¨è¿‡æ»¤è¿™äº›éæ ‡å‡†å±æ€§ï¼Œå¯¼è‡´è‡ªå®šä¹‰å­—æ®µä¼šè¢«å½“ä½œ DOM å±æ€§æ¸²æŸ“ï¼Œè§¦å‘è­¦å‘ŠÂ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fant-design%2Fant-design%2Fblob%2F816912441c855a2bc17c06d697299f312d81a4a2%2Fcomponents%2Fselect%2Findex.tsx%23L3-L419" target="_blank" title="https://github.com/ant-design/ant-design/blob/816912441c855a2bc17c06d697299f312d81a4a2/components/select/index.tsx#L3-L419" ref="nofollow noopener noreferrer">æºç åˆ†æ</a>ã€‚</p>
<p>Issue æ¨èåšæ³•æ˜¯ç”¨Â <code>optionRender</code>ï¼Œåªåœ¨æ¸²æŸ“æ—¶å–å‡ºè‡ªå®šä¹‰å±æ€§ï¼Œä¸è®©å®ƒä»¬ç›´æ¥ä¼ é€’åˆ° DOMã€‚ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">const <span class="hljs-attr">options</span> = [
  { label: <span class="hljs-string">'è‹¹æœ'</span>, value: <span class="hljs-string">'apple'</span>, labelPinyin: <span class="hljs-string">'pingguo'</span> },
  { label: <span class="hljs-string">'é¦™è•‰'</span>, value: <span class="hljs-string">'banana'</span>, labelPinyin: <span class="hljs-string">'xiangjiao'</span> },
]<span class="hljs-comment">;</span>

&lt;Select
  <span class="hljs-attr">options</span>={options}
  <span class="hljs-attr">optionRender</span>={option =&gt; (
    &lt;span&gt;
      {option.data.label} &lt;span <span class="hljs-attr">style</span>={{ color: <span class="hljs-string">'#aaa'</span> }}&gt;{option.data.labelPinyin}&lt;/span&gt;
    &lt;/span&gt;
  )}
/&gt;
</code></pre>
<p>ç»“æœè¯•äº†ä¸‹éƒ½ä¸è¡Œï¼Œä»ç„¶æ²¡æœ‰ç»“æœè­¦å‘Šã€‚ä½†æ˜¯æˆ‘å‘ç°å³ä½¿æ²¡æœ‰ optionRender ï¼Œé€‰é¡¹å‡ºç°çš„æ—¶å€™ä¹Ÿæ²¡æœ‰é—®é¢˜ï¼Œä½†æ˜¯é—®é¢˜å‡ºç°åœ¨é€‰ä¸­åçš„æ˜¾ç¤ºä¸Šï¼Œæˆ‘è™½ç„¶åŠ äº† labelRender ï¼Œä¹Ÿä¸€æ ·ä¼šæœ‰è­¦å‘Šã€‚</p>
<p>æ‰€ä»¥æˆ‘æœ€ç»ˆé‡‡ç”¨çš„åŠæ³•æ˜¯ä½¿ç”¨ä¸€ä¸ªç»Ÿä¸€ç»„ä»¶å»è¿‡æ»¤éå¿…è¦çš„å±æ€§</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, { memo, useContext, useEffect, useState } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Select</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'antd'</span>
<span class="hljs-keyword">import</span> <span class="hljs-keyword">type</span> { <span class="hljs-title class_">SelectProps</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'antd'</span>

<span class="hljs-keyword">import</span> { isArray, isEmpty, isString } <span class="hljs-keyword">from</span> <span class="hljs-string">'lodash'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">FISelectProps</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Omit</span>&lt;<span class="hljs-title class_">SelectProps</span>, 'filterOption'&gt; {
}

<span class="hljs-keyword">const</span> <span class="hljs-title class_">FISelect</span>: <span class="hljs-title class_">React</span>.<span class="hljs-property">FC</span>&lt;<span class="hljs-title class_">FISelectProps</span>&gt; = <span class="hljs-function">(<span class="hljs-params">{
    options,
    placeholder = <span class="hljs-string">'è¯·é€‰æ‹©'</span>,
    value,
    onChange = () =&gt; {},
    mode,
    allowClear = <span class="hljs-literal">true</span>,
    showSearch = <span class="hljs-literal">true</span>,
    fieldNames = {},
    optionRender,
    ...args
}</span>) =&gt;</span> {

    <span class="hljs-keyword">const</span> isMultiple = mode === <span class="hljs-string">'multiple'</span>
    <span class="hljs-keyword">const</span> [valueProxy, setValueProxy] = useState&lt;<span class="hljs-built_in">any</span>&gt;(isMultiple ? [] : <span class="hljs-string">''</span>)

    <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-title function_">setValueProxy</span>(value)
    }, [value])


    <span class="hljs-keyword">const</span> <span class="hljs-title function_">getOptions</span> = (<span class="hljs-params"/>) =&gt; {
        <span class="hljs-comment">// console.log('-- getOptions --')</span>
        <span class="hljs-keyword">return</span> (options || []).<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">item: <span class="hljs-built_in">any</span></span>) =&gt;</span> {
            <span class="hljs-keyword">return</span> {
                <span class="hljs-attr">origin_data</span>: item,
                <span class="hljs-attr">value</span>: item[fieldNames.<span class="hljs-property">value</span> || <span class="hljs-string">'value'</span>],
                <span class="hljs-attr">label</span>: item[fieldNames.<span class="hljs-property">label</span> || <span class="hljs-string">'label'</span>],
            }
        })
    }

    <span class="hljs-keyword">const</span> <span class="hljs-title function_">onChangeProxy</span> = (<span class="hljs-params">value: <span class="hljs-built_in">any</span>, option: <span class="hljs-built_in">any</span></span>) =&gt; {
        <span class="hljs-comment">// console.log('--onChangeProxy--', value, option, getOuterValue(value))</span>
        <span class="hljs-title function_">onChange</span>(value, option.<span class="hljs-property">origin_data</span>)
    }

    <span class="hljs-keyword">const</span> <span class="hljs-attr">showSearchProxy</span>: <span class="hljs-title class_">SelectProps</span>[<span class="hljs-string">'showSearch'</span>] = <span class="hljs-keyword">typeof</span> showSearch === <span class="hljs-string">'boolean'</span> &amp;&amp; showSearch === <span class="hljs-literal">true</span>
        ? {
            <span class="hljs-attr">filterOption</span>: filterOptionProxy,
        }
        : <span class="hljs-keyword">typeof</span> showSearch !== <span class="hljs-string">'boolean'</span>
            ? {
                ...showSearch,
                <span class="hljs-attr">filterOption</span>: showSearch.<span class="hljs-property">filterOption</span> || filterOptionProxy,
            }
            : showSearch

    <span class="hljs-keyword">function</span> <span class="hljs-title function_">filterOptionProxy</span> (<span class="hljs-attr">inputValue</span>: <span class="hljs-built_in">any</span>, <span class="hljs-attr">option</span>: <span class="hljs-built_in">any</span>) {
        <span class="hljs-comment">// console.log('-- filterOptionProxy --',inputValue, option)</span>
        <span class="hljs-keyword">const</span> { <span class="hljs-attr">value</span>: vf, <span class="hljs-attr">label</span>: vl } = fieldNames
        <span class="hljs-keyword">const</span> value = option.<span class="hljs-property">origin_data</span>[vf || <span class="hljs-string">'value'</span>]
        <span class="hljs-keyword">const</span> label = option.<span class="hljs-property">origin_data</span>[vl || <span class="hljs-string">'label'</span>]
        <span class="hljs-keyword">return</span> value?.<span class="hljs-property">toString</span>?.() === inputValue?.<span class="hljs-property">toString</span>?.() || <span class="hljs-title class_">String</span>(label).<span class="hljs-title function_">toLowerCase</span>().<span class="hljs-title function_">indexOf</span>(<span class="hljs-title class_">String</span>(inputValue).<span class="hljs-title function_">toLowerCase</span>()) &gt; -<span class="hljs-number">1</span>
    }

    <span class="hljs-keyword">const</span> <span class="hljs-attr">optionRenderProxy</span>: <span class="hljs-title class_">SelectProps</span>[<span class="hljs-string">'optionRender'</span>] = <span class="hljs-function">(<span class="hljs-params">option: <span class="hljs-built_in">any</span>, info</span>) =&gt;</span> {
        <span class="hljs-comment">// console.log('-- optionRenderProxy --',option, info)</span>
        <span class="hljs-keyword">const</span> value = option.<span class="hljs-property">data</span>.<span class="hljs-property">origin_data</span>[fieldNames.<span class="hljs-property">value</span> || <span class="hljs-string">'value'</span>]
        <span class="hljs-keyword">const</span> label = option.<span class="hljs-property">data</span>.<span class="hljs-property">origin_data</span>[fieldNames.<span class="hljs-property">label</span> || <span class="hljs-string">'label'</span>]
        <span class="hljs-keyword">if</span> (!optionRender) {
            <span class="hljs-keyword">return</span> (label)
        }
        <span class="hljs-keyword">return</span> <span class="hljs-title function_">optionRender</span>(option.<span class="hljs-property">data</span>.<span class="hljs-property">origin_data</span>, info)
    }

    <span class="hljs-keyword">return</span> (
        <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Select</span>
            {<span class="hljs-attr">...args</span>}
            <span class="hljs-attr">options</span>=<span class="hljs-string">{getOptions()}</span>
            <span class="hljs-attr">placeholder</span>=<span class="hljs-string">{placeholder}</span>
            <span class="hljs-attr">className</span>=<span class="hljs-string">{</span>`<span class="hljs-attr">fi-select</span> ${<span class="hljs-attr">args.className</span> || ''}`}
            <span class="hljs-attr">value</span>=<span class="hljs-string">{valueProxy}</span>
            <span class="hljs-attr">onChange</span>=<span class="hljs-string">{onChangeProxy}</span>
            <span class="hljs-attr">mode</span>=<span class="hljs-string">{mode}</span>
            <span class="hljs-attr">allowClear</span>=<span class="hljs-string">{allowClear}</span>
            <span class="hljs-attr">showSearch</span>=<span class="hljs-string">{showSearchProxy}</span>
            <span class="hljs-attr">optionRender</span>=<span class="hljs-string">{optionRender</span> ? <span class="hljs-attr">optionRenderProxy</span> <span class="hljs-attr">:</span> <span class="hljs-attr">undefined</span>}
        /&gt;</span></span>
    )
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">memo</span>(<span class="hljs-title class_">FISelect</span>)
</code></pre>
<h3 data-id="heading-10">å‡çº§ react 19</h3>
<p>react-activation</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f888a448c4f34a2ebc984a9fe67ab974~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaG9saWRheXBlbmd1aW4=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766974639&amp;x-signature=Wi3hVS%2FevhWk4wLfBd1X4%2FxR%2Fog%3D" alt="image.png" loading="lazy"/></p>
<p>ä½¿ç”¨ <code>keepalive-for-react</code> æ›¿ä»£ <code>react-activation</code></p>
<ol>
<li><strong>React Router v7 æ¶æ„å˜æ›´</strong>
<ul>
<li>React Router v7 ä½¿ç”¨äº†æ–°çš„ Data Router æ¶æ„</li>
<li>è¦æ±‚æ‰€æœ‰ hooks å¿…é¡»åœ¨æ­£ç¡®çš„ router ä¸Šä¸‹æ–‡å†…ä½¿ç”¨</li>
<li>å¯¹ç»„ä»¶åµŒå¥—å’Œä¸Šä¸‹æ–‡ä¼ é€’æœ‰æ›´ä¸¥æ ¼çš„è¦æ±‚</li>
</ul>
</li>
<li><strong>react-activation ä¸å…¼å®¹</strong>
<ul>
<li><code>react-activation</code> (v0.13.4) è¿˜ä¸æ”¯æŒ React 19,ä½†æ˜¯ç†è®ºä¸Šæ˜¯æ”¯æŒçš„</li>
<li>ä¸ React Router v7 çš„æ–°æ¶æ„å­˜åœ¨å†²çª</li>
<li><code>KeepAlive</code> ç»„ä»¶ç ´åäº† Router çš„ä¸Šä¸‹æ–‡ä¼ é€’</li>
<li>æŸ¥çœ‹äº†ä¸‹ç»„ä»¶çš„ä½¿ç”¨æ–¹å¼ï¼Œå‘ç°åŸæ¥çš„ä½¿ç”¨æ–¹æ³•å¯èƒ½ä¸æ­£ç¡®ï¼Œå¾…åç»­è§£å†³</li>
</ul>
</li>
</ol>
<h3 data-id="heading-11">å‡çº§ babel-plugin-react-compiler</h3>
<h3 data-id="heading-12">å‡çº§å…¶ä»–ç»„ä»¶åº“</h3>
<h3 data-id="heading-13">é—ç•™é—®é¢˜</h3>
<ul>
<li>Input  InputNumber   addonAfter  addonAfter å±æ€§åºŸå¼ƒ è§£å†³æ–¹æ¡ˆ</li>
<li>react-activation æ— æ³•è¿è¡Œ</li>
<li>å‡çº§babel-plugin-react-compiler</li>
<li>å‡çº§å…¶ä»–ç»„ä»¶åº“</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åˆ«å†åˆ°å¤„try-catchäº†ï¼SpringBootå…¨å±€å¼‚å¸¸å¤„ç†è¿™æ ·è®¾è®¡]]></title>    <link>https://juejin.cn/post/7585808181239922739</link>    <guid>https://juejin.cn/post/7585808181239922739</guid>    <pubDate>2025-12-22T02:26:01.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7585808181239922739" data-draft-id="7585920796100018203" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åˆ«å†åˆ°å¤„try-catchäº†ï¼SpringBootå…¨å±€å¼‚å¸¸å¤„ç†è¿™æ ·è®¾è®¡"/> <meta itemprop="keywords" content="åç«¯,Java,Spring Boot"/> <meta itemprop="datePublished" content="2025-12-22T02:26:01.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°åè¯´Java"/> <meta itemprop="url" content="https://juejin.cn/user/3898184413750203"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åˆ«å†åˆ°å¤„try-catchäº†ï¼SpringBootå…¨å±€å¼‚å¸¸å¤„ç†è¿™æ ·è®¾è®¡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3898184413750203/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°åè¯´Java
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-22T02:26:01.000Z" title="Mon Dec 22 2025 02:26:01 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ã€Šåˆ«å†åˆ°å¤„try-catchäº†ï¼SpringBootå…¨å±€å¼‚å¸¸å¤„ç†è¿™æ ·è®¾è®¡ã€‹</h2>
<blockquote>
<p>æ¯å¤©5åˆ†é’Ÿï¼ŒæŒæ¡ä¸€ä¸ªSpringBootæ ¸å¿ƒçŸ¥è¯†ç‚¹ã€‚å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯SpringBootæŒ‡å—çš„åˆ›å§‹äººå°æ˜ã€‚æ˜¨å¤©æˆ‘ä»¬è®²è§£äº†è‡ªåŠ¨é…ç½®ï¼Œä»Šå¤©æ¥èŠèŠå¼‚å¸¸å¤„ç†ã€‚
<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV1RVyYBZE4z%2F%3Fvd_source%3Dd9789da0ed994ac777a822cd5ea4cf30" target="_blank" title="https://www.bilibili.com/video/BV1RVyYBZE4z/?vd_source=d9789da0ed994ac777a822cd5ea4cf30" ref="nofollow noopener noreferrer">é›¶åŸºç¡€å…¨æ ˆå¼€å‘Javaå¾®æœåŠ¡ç‰ˆæœ¬å®æˆ˜-åç«¯-å‰ç«¯-è¿ç»´-å®æˆ˜ä¼ä¸šçº§ä¸‰ä¸ªå®æˆ˜é¡¹ç›®</a></p>
</blockquote>
<p><strong>èµ„æºè·å–</strong>ï¼š<strong>å…³æ³¨å…¬ä¼—å·ï¼šå°åç¡è¯´Java</strong></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV1RVyYBZE4z%2F%3Fvd_source%3Dd9789da0ed994ac777a822cd5ea4cf30" target="_blank" title="https://www.bilibili.com/video/BV1RVyYBZE4z/?vd_source=d9789da0ed994ac777a822cd5ea4cf30" ref="nofollow noopener noreferrer">é›¶åŸºç¡€å…¨æ ˆå¼€å‘Javaå¾®æœåŠ¡ç‰ˆæœ¬å®æˆ˜-åç«¯-å‰ç«¯-è¿ç»´-å®æˆ˜ä¼ä¸šçº§ä¸‰ä¸ªå®æˆ˜é¡¹ç›®</a></p>
<h3 data-id="heading-1">å¼•è¨€</h3>
<p>æƒ³è±¡ä¸€ä¸‹è¿™æ ·çš„åœºæ™¯ï¼šä½ çš„é¡¹ç›®æœ‰50ä¸ªControllerï¼Œæ¯ä¸ªControlleræ–¹æ³•é‡Œéƒ½æœ‰ç±»ä¼¼çš„try-catchä»£ç ï¼Œè€Œä¸”æ¯ä¸ªå¼€å‘è€…å¤„ç†å¼‚å¸¸çš„æ–¹å¼éƒ½ä¸ä¸€æ ·ã€‚çº¿ä¸Šå‡ºäº†é—®é¢˜ï¼Œæ—¥å¿—é‡Œè¦ä¹ˆæ²¡æœ‰è®°å½•ï¼Œè¦ä¹ˆè®°å½•å¾—ä¹±ä¸ƒå…«ç³Ÿ...</p>
<p>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦ç»Ÿä¸€çš„å…¨å±€å¼‚å¸¸å¤„ç†ã€‚ä»Šå¤©ï¼Œæˆ‘å°†å¸¦ä½ è®¾è®¡ä¸€ä¸ªä¼˜é›…çš„å…¨å±€å¼‚å¸¸å¤„ç†æ–¹æ¡ˆï¼Œè®©ä½ çš„ä»£ç <strong>å¹²å‡€ã€ç»Ÿä¸€ã€æ˜“äºç»´æŠ¤</strong>ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV1RVyYBZE4z%2F%3Fvd_source%3Dd9789da0ed994ac777a822cd5ea4cf30" target="_blank" title="https://www.bilibili.com/video/BV1RVyYBZE4z/?vd_source=d9789da0ed994ac777a822cd5ea4cf30" ref="nofollow noopener noreferrer">é›¶åŸºç¡€å…¨æ ˆå¼€å‘Javaå¾®æœåŠ¡ç‰ˆæœ¬å®æˆ˜-åç«¯-å‰ç«¯-è¿ç»´-å®æˆ˜ä¼ä¸šçº§ä¸‰ä¸ªå®æˆ˜é¡¹ç›®</a></p>
<p>å…ˆçœ‹ä¸¤ä¸ªå¯¹æ¯”ï¼š</p>
<p><strong>âŒ æ··ä¹±çš„å¼‚å¸¸å¤„ç†æ–¹å¼</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@RestController</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserController</span> {
    <span class="hljs-meta">@PostMapping("/register")</span>
    <span class="hljs-keyword">public</span> ResponseEntity&lt;?&gt; register(<span class="hljs-meta">@RequestBody</span> UserDTO user) {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-type">User</span> <span class="hljs-variable">registered</span> <span class="hljs-operator">=</span> userService.register(user);
            <span class="hljs-keyword">return</span> ResponseEntity.ok(registered);
        } <span class="hljs-keyword">catch</span> (ValidationException e) {
            <span class="hljs-keyword">return</span> ResponseEntity.badRequest().body(<span class="hljs-string">"å‚æ•°é”™è¯¯ï¼š"</span> + e.getMessage());
        } <span class="hljs-keyword">catch</span> (DuplicateException e) {
            <span class="hljs-keyword">return</span> ResponseEntity.status(<span class="hljs-number">409</span>).body(<span class="hljs-string">"ç”¨æˆ·å·²å­˜åœ¨"</span>);
        } <span class="hljs-keyword">catch</span> (Exception e) {
            log.error(<span class="hljs-string">"æ³¨å†Œå¤±è´¥"</span>, e);
            <span class="hljs-keyword">return</span> ResponseEntity.status(<span class="hljs-number">500</span>).body(<span class="hljs-string">"ç³»ç»Ÿç¹å¿™"</span>);
        }
    }
    
    <span class="hljs-meta">@GetMapping("/{id}")</span>
    <span class="hljs-keyword">public</span> ResponseEntity&lt;?&gt; getUser(<span class="hljs-meta">@PathVariable</span> Long id) {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> userService.findById(id);
            <span class="hljs-keyword">return</span> ResponseEntity.ok(user);
        } <span class="hljs-keyword">catch</span> (NotFoundException e) {
            <span class="hljs-keyword">return</span> ResponseEntity.status(<span class="hljs-number">404</span>).body(<span class="hljs-string">"ç”¨æˆ·ä¸å­˜åœ¨"</span>);
        } <span class="hljs-keyword">catch</span> (Exception e) {
            log.error(<span class="hljs-string">"æŸ¥è¯¢ç”¨æˆ·å¤±è´¥"</span>, e);
            <span class="hljs-keyword">return</span> ResponseEntity.status(<span class="hljs-number">500</span>).body(<span class="hljs-string">"ç³»ç»Ÿé”™è¯¯"</span>);
        }
    }
    <span class="hljs-comment">// ... å…¶ä»–æ–¹æ³•é‡å¤ç±»ä¼¼çš„æ¨¡å¼</span>
}
</code></pre>
<p><strong>âœ… ä¼˜é›…çš„å…¨å±€å¼‚å¸¸å¤„ç†</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@RestController</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserController</span> {
    <span class="hljs-meta">@PostMapping("/register")</span>
    <span class="hljs-keyword">public</span> ResponseResult&lt;User&gt; <span class="hljs-title function_">register</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> UserDTO user)</span> {
        <span class="hljs-type">User</span> <span class="hljs-variable">registered</span> <span class="hljs-operator">=</span> userService.register(user);
        <span class="hljs-keyword">return</span> ResponseResult.success(registered);
    }
    
    <span class="hljs-meta">@GetMapping("/{id}")</span>
    <span class="hljs-keyword">public</span> ResponseResult&lt;User&gt; <span class="hljs-title function_">getUser</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable</span> Long id)</span> {
        <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> userService.findById(id);
        <span class="hljs-keyword">return</span> ResponseResult.success(user);
    }
    <span class="hljs-comment">// ... å¹²å‡€çš„ä¸šåŠ¡ä»£ç ï¼Œä¸åŒ…å«ä»»ä½•å¼‚å¸¸å¤„ç†é€»è¾‘</span>
}
</code></pre>
<p>æ‰€æœ‰çš„å¼‚å¸¸éƒ½åœ¨<strong>ä¸€ä¸ªåœ°æ–¹ç»Ÿä¸€å¤„ç†</strong>ï¼ä¸‹é¢ï¼Œè®©æˆ‘ä»¬ä¸€æ­¥æ­¥å®ç°è¿™ä¸ªç›®æ ‡ã€‚</p>
<h3 data-id="heading-2">ä¸€ã€SpringBootå¼‚å¸¸å¤„ç†æ ¸å¿ƒæ³¨è§£</h3>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV1RVyYBZE4z%2F%3Fvd_source%3Dd9789da0ed994ac777a822cd5ea4cf30" target="_blank" title="https://www.bilibili.com/video/BV1RVyYBZE4z/?vd_source=d9789da0ed994ac777a822cd5ea4cf30" ref="nofollow noopener noreferrer">é›¶åŸºç¡€å…¨æ ˆå¼€å‘Javaå¾®æœåŠ¡ç‰ˆæœ¬å®æˆ˜-åç«¯-å‰ç«¯-è¿ç»´-å®æˆ˜ä¼ä¸šçº§ä¸‰ä¸ªå®æˆ˜é¡¹ç›®</a></p>
<h4 data-id="heading-3">1. @ControllerAdviceï¼šå…¨å±€å¼‚å¸¸å¤„ç†çš„åŸºçŸ³</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Target(ElementType.TYPE)</span>
<span class="hljs-meta">@Retention(RetentionPolicy.RUNTIME)</span>
<span class="hljs-meta">@Documented</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-meta">@interface</span> ControllerAdvice {
    <span class="hljs-comment">// å¯ä»¥æŒ‡å®šè¦å¤„ç†çš„åŒ…</span>
    String[] value() <span class="hljs-keyword">default</span> {};
    
    <span class="hljs-comment">// æŒ‡å®šè¦å¤„ç†çš„Controllerç±»å‹</span>
    Class&lt;?&gt;[] basePackageClasses() <span class="hljs-keyword">default</span> {};
    
    <span class="hljs-comment">// æŒ‡å®šè¦å¤„ç†çš„æ³¨è§£</span>
    Class&lt;? <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Annotation</span>&gt;[] annotations() <span class="hljs-keyword">default</span> {};
}
</code></pre>
<p><strong>ä¸‰ç§å¸¸è§ç”¨æ³•</strong>ï¼š</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV1RVyYBZE4z%2F%3Fvd_source%3Dd9789da0ed994ac777a822cd5ea4cf30" target="_blank" title="https://www.bilibili.com/video/BV1RVyYBZE4z/?vd_source=d9789da0ed994ac777a822cd5ea4cf30" ref="nofollow noopener noreferrer">é›¶åŸºç¡€å…¨æ ˆå¼€å‘Javaå¾®æœåŠ¡ç‰ˆæœ¬å®æˆ˜-åç«¯-å‰ç«¯-è¿ç»´-å®æˆ˜ä¼ä¸šçº§ä¸‰ä¸ªå®æˆ˜é¡¹ç›®</a></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æ–¹å¼1ï¼šå¤„ç†æ‰€æœ‰Controllerçš„å¼‚å¸¸ï¼ˆæœ€å¸¸ç”¨ï¼‰</span>
<span class="hljs-meta">@ControllerAdvice</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">GlobalExceptionHandler</span> {
    <span class="hljs-comment">// å¤„ç†é€»è¾‘...</span>
}

<span class="hljs-comment">// æ–¹å¼2ï¼šåªå¤„ç†æŒ‡å®šåŒ…ä¸‹çš„Controller</span>
<span class="hljs-meta">@ControllerAdvice("com.example.user")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserExceptionHandler</span> {
    <span class="hljs-comment">// åªå¤„ç†useræ¨¡å—çš„å¼‚å¸¸</span>
}

<span class="hljs-comment">// æ–¹å¼3ï¼šåªå¤„ç†å¸¦æœ‰ç‰¹å®šæ³¨è§£çš„Controller</span>
<span class="hljs-meta">@ControllerAdvice(annotations = RestController.class)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RestExceptionHandler</span> {
    <span class="hljs-comment">// åªå¤„ç†@RestControlleræ³¨è§£çš„ç±»</span>
}
</code></pre>
<h4 data-id="heading-4">2. @RestControllerAdviceï¼šæ›´ä¾¿æ·çš„é€‰æ‹©</h4>
<p><code>@RestControllerAdvice</code> æ˜¯ <code>@ControllerAdvice</code> å’Œ <code>@ResponseBody</code> çš„ç»„åˆï¼Œä¸“é—¨ç”¨äºREST APIå¼€å‘ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Target(ElementType.TYPE)</span>
<span class="hljs-meta">@Retention(RetentionPolicy.RUNTIME)</span>
<span class="hljs-meta">@Documented</span>
<span class="hljs-meta">@ControllerAdvice</span>
<span class="hljs-meta">@ResponseBody</span>
<span class="hljs-keyword">public</span> <span class="hljs-meta">@interface</span> RestControllerAdvice {
    <span class="hljs-comment">// åŒ@ControllerAdvice</span>
}
</code></pre>
<h4 data-id="heading-5">3. @ExceptionHandlerï¼šæŒ‡å®šå¤„ç†ä»€ä¹ˆå¼‚å¸¸</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Target(ElementType.METHOD)</span>
<span class="hljs-meta">@Retention(RetentionPolicy.RUNTIME)</span>
<span class="hljs-meta">@Documented</span>
<span class="hljs-keyword">public</span> <span class="hljs-meta">@interface</span> ExceptionHandler {
    <span class="hljs-comment">// æŒ‡å®šè¦å¤„ç†çš„å¼‚å¸¸ç±»å‹</span>
    Class&lt;? <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Throwable</span>&gt;[] value() <span class="hljs-keyword">default</span> {};
}
</code></pre>
<h3 data-id="heading-6">äºŒã€è®¾è®¡ä¼˜é›…çš„å¼‚å¸¸ä½“ç³»</h3>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV1RVyYBZE4z%2F%3Fvd_source%3Dd9789da0ed994ac777a822cd5ea4cf30" target="_blank" title="https://www.bilibili.com/video/BV1RVyYBZE4z/?vd_source=d9789da0ed994ac777a822cd5ea4cf30" ref="nofollow noopener noreferrer">é›¶åŸºç¡€å…¨æ ˆå¼€å‘Javaå¾®æœåŠ¡ç‰ˆæœ¬å®æˆ˜-åç«¯-å‰ç«¯-è¿ç»´-å®æˆ˜ä¼ä¸šçº§ä¸‰ä¸ªå®æˆ˜é¡¹ç›®</a></p>
<h4 data-id="heading-7">1. å¼‚å¸¸åˆ†ç±»ç­–ç•¥</h4>
<pre><code class="hljs language-php" lang="php"><span class="hljs-built_in">Throwable</span>
â”œâ”€â”€ <span class="hljs-built_in">Error</span>ï¼ˆç³»ç»Ÿé”™è¯¯ï¼Œå¦‚OutOfMemoryErrorï¼Œé€šå¸¸ä¸æ•è·ï¼‰
â””â”€â”€ <span class="hljs-built_in">Exception</span>ï¼ˆå¼‚å¸¸ï¼‰
    â”œâ”€â”€ <span class="hljs-built_in">RuntimeException</span>ï¼ˆè¿è¡Œæ—¶å¼‚å¸¸ï¼‰
    â”‚   â”œâ”€â”€ BusinessExceptionï¼ˆè‡ªå®šä¹‰ä¸šåŠ¡å¼‚å¸¸ï¼‰
    â”‚   â”‚   â”œâ”€â”€ ValidationExceptionï¼ˆå‚æ•°æ ¡éªŒå¼‚å¸¸ï¼‰
    â”‚   â”‚   â”œâ”€â”€ DuplicateExceptionï¼ˆæ•°æ®é‡å¤å¼‚å¸¸ï¼‰
    â”‚   â”‚   â”œâ”€â”€ NotFoundExceptionï¼ˆæ•°æ®ä¸å­˜åœ¨å¼‚å¸¸ï¼‰
    â”‚   â”‚   â””â”€â”€ PermissionExceptionï¼ˆæƒé™å¼‚å¸¸ï¼‰
    â”‚   â””â”€â”€ SystemExceptionï¼ˆè‡ªå®šä¹‰ç³»ç»Ÿå¼‚å¸¸ï¼‰
    â””â”€â”€ å…¶ä»–Checked <span class="hljs-built_in">Exception</span>ï¼ˆå·²æ£€æŸ¥å¼‚å¸¸ï¼‰
</code></pre>
<h4 data-id="heading-8">2. åŸºç¡€å¼‚å¸¸ç±»è®¾è®¡</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// åŸºç¡€ä¸šåŠ¡å¼‚å¸¸</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BusinessException</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">RuntimeException</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> code;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> String message;
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">BusinessException</span><span class="hljs-params">(<span class="hljs-type">int</span> code, String message)</span> {
        <span class="hljs-built_in">super</span>(message);
        <span class="hljs-built_in">this</span>.code = code;
        <span class="hljs-built_in">this</span>.message = message;
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">BusinessException</span><span class="hljs-params">(ErrorCode errorCode)</span> {
        <span class="hljs-built_in">super</span>(errorCode.getMessage());
        <span class="hljs-built_in">this</span>.code = errorCode.getCode();
        <span class="hljs-built_in">this</span>.message = errorCode.getMessage();
    }
    
    <span class="hljs-comment">// getters...</span>
}

<span class="hljs-comment">// é”™è¯¯ç æšä¸¾</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">ErrorCode</span> {
    <span class="hljs-comment">// ç³»ç»Ÿé”™è¯¯</span>
    SUCCESS(<span class="hljs-number">200</span>, <span class="hljs-string">"æˆåŠŸ"</span>),
    SYSTEM_ERROR(<span class="hljs-number">500</span>, <span class="hljs-string">"ç³»ç»Ÿé”™è¯¯"</span>),
    
    <span class="hljs-comment">// ä¸šåŠ¡é”™è¯¯</span>
    PARAM_VALID_ERROR(<span class="hljs-number">10001</span>, <span class="hljs-string">"å‚æ•°æ ¡éªŒå¤±è´¥"</span>),
    DATA_NOT_FOUND(<span class="hljs-number">10002</span>, <span class="hljs-string">"æ•°æ®ä¸å­˜åœ¨"</span>),
    DATA_DUPLICATE(<span class="hljs-number">10003</span>, <span class="hljs-string">"æ•°æ®å·²å­˜åœ¨"</span>),
    PERMISSION_DENIED(<span class="hljs-number">10004</span>, <span class="hljs-string">"æƒé™ä¸è¶³"</span>),
    USER_NOT_LOGIN(<span class="hljs-number">10005</span>, <span class="hljs-string">"ç”¨æˆ·æœªç™»å½•"</span>),
    
    <span class="hljs-comment">// ç¬¬ä¸‰æ–¹æœåŠ¡é”™è¯¯</span>
    THIRD_PARTY_ERROR(<span class="hljs-number">20001</span>, <span class="hljs-string">"ç¬¬ä¸‰æ–¹æœåŠ¡å¼‚å¸¸"</span>);
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> code;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> String message;
    
    ErrorCode(<span class="hljs-type">int</span> code, String message) {
        <span class="hljs-built_in">this</span>.code = code;
        <span class="hljs-built_in">this</span>.message = message;
    }
    
    <span class="hljs-comment">// getters...</span>
}

<span class="hljs-comment">// å…·ä½“çš„ä¸šåŠ¡å¼‚å¸¸</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ValidationException</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">BusinessException</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">ValidationException</span><span class="hljs-params">(String message)</span> {
        <span class="hljs-built_in">super</span>(ErrorCode.PARAM_VALID_ERROR.getCode(), message);
    }
}

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">NotFoundException</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">BusinessException</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">NotFoundException</span><span class="hljs-params">(String message)</span> {
        <span class="hljs-built_in">super</span>(ErrorCode.DATA_NOT_FOUND.getCode(), message);
    }
}
</code></pre>
<h3 data-id="heading-9">ä¸‰ã€ç»Ÿä¸€å“åº”ä½“è®¾è®¡</h3>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV1RVyYBZE4z%2F%3Fvd_source%3Dd9789da0ed994ac777a822cd5ea4cf30" target="_blank" title="https://www.bilibili.com/video/BV1RVyYBZE4z/?vd_source=d9789da0ed994ac777a822cd5ea4cf30" ref="nofollow noopener noreferrer">é›¶åŸºç¡€å…¨æ ˆå¼€å‘Javaå¾®æœåŠ¡ç‰ˆæœ¬å®æˆ˜-åç«¯-å‰ç«¯-è¿ç»´-å®æˆ˜ä¼ä¸šçº§ä¸‰ä¸ªå®æˆ˜é¡¹ç›®</a></p>
<h4 data-id="heading-10">1. å“åº”ä½“åŸºç¡€ç»“æ„</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ç»Ÿä¸€å“åº”ä½“</span>
<span class="hljs-meta">@Data</span>
<span class="hljs-meta">@Builder</span>
<span class="hljs-meta">@NoArgsConstructor</span>
<span class="hljs-meta">@AllArgsConstructor</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ResponseResult</span>&lt;T&gt; {
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> code;        <span class="hljs-comment">// çŠ¶æ€ç </span>
    <span class="hljs-keyword">private</span> String message;  <span class="hljs-comment">// æ¶ˆæ¯</span>
    <span class="hljs-keyword">private</span> T data;          <span class="hljs-comment">// æ•°æ®</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> timestamp;  <span class="hljs-comment">// æ—¶é—´æˆ³</span>
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> &lt;T&gt; ResponseResult&lt;T&gt; <span class="hljs-title function_">success</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> success(<span class="hljs-literal">null</span>);
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> &lt;T&gt; ResponseResult&lt;T&gt; <span class="hljs-title function_">success</span><span class="hljs-params">(T data)</span> {
        <span class="hljs-keyword">return</span> ResponseResult.&lt;T&gt;builder()
                .code(ErrorCode.SUCCESS.getCode())
                .message(ErrorCode.SUCCESS.getMessage())
                .data(data)
                .timestamp(System.currentTimeMillis())
                .build();
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> &lt;T&gt; ResponseResult&lt;T&gt; <span class="hljs-title function_">fail</span><span class="hljs-params">(<span class="hljs-type">int</span> code, String message)</span> {
        <span class="hljs-keyword">return</span> ResponseResult.&lt;T&gt;builder()
                .code(code)
                .message(message)
                .timestamp(System.currentTimeMillis())
                .build();
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> &lt;T&gt; ResponseResult&lt;T&gt; <span class="hljs-title function_">fail</span><span class="hljs-params">(ErrorCode errorCode)</span> {
        <span class="hljs-keyword">return</span> fail(errorCode.getCode(), errorCode.getMessage());
    }
}
</code></pre>
<h3 data-id="heading-11">å››ã€å®ç°å…¨å±€å¼‚å¸¸å¤„ç†å™¨</h3>
<h4 data-id="heading-12">1. å®Œæ•´å¼‚å¸¸å¤„ç†å™¨å®ç°</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Slf4j</span>
<span class="hljs-meta">@RestControllerAdvice</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">GlobalExceptionHandler</span> {
    
    <span class="hljs-comment">/**
     * å¤„ç†ä¸šåŠ¡å¼‚å¸¸
     */</span>
    <span class="hljs-meta">@ExceptionHandler(BusinessException.class)</span>
    <span class="hljs-keyword">public</span> ResponseResult&lt;Void&gt; <span class="hljs-title function_">handleBusinessException</span><span class="hljs-params">(BusinessException e)</span> {
        log.warn(<span class="hljs-string">"ä¸šåŠ¡å¼‚å¸¸ï¼šcode={}, message={}"</span>, e.getCode(), e.getMessage());
        <span class="hljs-keyword">return</span> ResponseResult.fail(e.getCode(), e.getMessage());
    }
    
    <span class="hljs-comment">/**
     * å¤„ç†å‚æ•°æ ¡éªŒå¼‚å¸¸ï¼ˆ<span class="hljs-doctag">@Validated</span>è§¦å‘çš„å¼‚å¸¸ï¼‰
     */</span>
    <span class="hljs-meta">@ExceptionHandler(MethodArgumentNotValidException.class)</span>
    <span class="hljs-keyword">public</span> ResponseResult&lt;Void&gt; <span class="hljs-title function_">handleMethodArgumentNotValidException</span><span class="hljs-params">(
            MethodArgumentNotValidException e)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">message</span> <span class="hljs-operator">=</span> e.getBindingResult().getAllErrors().stream()
                .map(DefaultMessageSourceResolvable::getDefaultMessage)
                .collect(Collectors.joining(<span class="hljs-string">", "</span>));
        log.warn(<span class="hljs-string">"å‚æ•°æ ¡éªŒå¤±è´¥ï¼š{}"</span>, message);
        <span class="hljs-keyword">return</span> ResponseResult.fail(ErrorCode.PARAM_VALID_ERROR.getCode(), message);
    }
    
    <span class="hljs-comment">/**
     * å¤„ç†è¯·æ±‚å‚æ•°ç»‘å®šå¼‚å¸¸ï¼ˆç±»å‹è½¬æ¢é”™è¯¯ç­‰ï¼‰
     */</span>
    <span class="hljs-meta">@ExceptionHandler(BindException.class)</span>
    <span class="hljs-keyword">public</span> ResponseResult&lt;Void&gt; <span class="hljs-title function_">handleBindException</span><span class="hljs-params">(BindException e)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">message</span> <span class="hljs-operator">=</span> e.getBindingResult().getAllErrors().stream()
                .map(ObjectError::getDefaultMessage)
                .collect(Collectors.joining(<span class="hljs-string">", "</span>));
        log.warn(<span class="hljs-string">"å‚æ•°ç»‘å®šå¤±è´¥ï¼š{}"</span>, message);
        <span class="hljs-keyword">return</span> ResponseResult.fail(ErrorCode.PARAM_VALID_ERROR.getCode(), message);
    }
    
    <span class="hljs-comment">/**
     * å¤„ç†å‚æ•°è§£æå¼‚å¸¸ï¼ˆJSONè§£æé”™è¯¯ç­‰ï¼‰
     */</span>
    <span class="hljs-meta">@ExceptionHandler(HttpMessageNotReadableException.class)</span>
    <span class="hljs-keyword">public</span> ResponseResult&lt;Void&gt; <span class="hljs-title function_">handleHttpMessageNotReadableException</span><span class="hljs-params">(
            HttpMessageNotReadableException e)</span> {
        log.warn(<span class="hljs-string">"è¯·æ±‚å‚æ•°è§£æå¤±è´¥"</span>, e);
        <span class="hljs-keyword">return</span> ResponseResult.fail(ErrorCode.PARAM_VALID_ERROR.getCode(), <span class="hljs-string">"è¯·æ±‚å‚æ•°æ ¼å¼é”™è¯¯"</span>);
    }
    
    <span class="hljs-comment">/**
     * å¤„ç†404å¼‚å¸¸
     */</span>
    <span class="hljs-meta">@ExceptionHandler(NoHandlerFoundException.class)</span>
    <span class="hljs-keyword">public</span> ResponseResult&lt;Void&gt; <span class="hljs-title function_">handleNoHandlerFoundException</span><span class="hljs-params">(
            NoHandlerFoundException e)</span> {
        log.warn(<span class="hljs-string">"æ¥å£ä¸å­˜åœ¨ï¼š{} {}"</span>, e.getHttpMethod(), e.getRequestURL());
        <span class="hljs-keyword">return</span> ResponseResult.fail(<span class="hljs-number">404</span>, <span class="hljs-string">"æ¥å£ä¸å­˜åœ¨"</span>);
    }
    
    <span class="hljs-comment">/**
     * å¤„ç†è¯·æ±‚æ–¹æ³•ä¸æ”¯æŒå¼‚å¸¸
     */</span>
    <span class="hljs-meta">@ExceptionHandler(HttpRequestMethodNotSupportedException.class)</span>
    <span class="hljs-keyword">public</span> ResponseResult&lt;Void&gt; <span class="hljs-title function_">handleHttpRequestMethodNotSupportedException</span><span class="hljs-params">(
            HttpRequestMethodNotSupportedException e)</span> {
        log.warn(<span class="hljs-string">"è¯·æ±‚æ–¹æ³•ä¸æ”¯æŒï¼š{}ï¼Œæ”¯æŒçš„æ–¹æ³•ï¼š{}"</span>, 
                e.getMethod(), e.getSupportedHttpMethods());
        <span class="hljs-keyword">return</span> ResponseResult.fail(<span class="hljs-number">405</span>, <span class="hljs-string">"è¯·æ±‚æ–¹æ³•ä¸æ”¯æŒ"</span>);
    }
    
    <span class="hljs-comment">/**
     * å¤„ç†æ‰€æœ‰æœªæ•è·çš„å¼‚å¸¸
     */</span>
    <span class="hljs-meta">@ExceptionHandler(Exception.class)</span>
    <span class="hljs-keyword">public</span> ResponseResult&lt;Void&gt; <span class="hljs-title function_">handleException</span><span class="hljs-params">(Exception e)</span> {
        log.error(<span class="hljs-string">"ç³»ç»Ÿå¼‚å¸¸"</span>, e);
        
        <span class="hljs-comment">// ç”Ÿäº§ç¯å¢ƒè¿”å›æ¨¡ç³Šçš„é”™è¯¯ä¿¡æ¯ï¼Œå¼€å‘ç¯å¢ƒè¿”å›è¯¦ç»†é”™è¯¯</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">message</span> <span class="hljs-operator">=</span> isProduction() ? <span class="hljs-string">"ç³»ç»Ÿç¹å¿™ï¼Œè¯·ç¨åé‡è¯•"</span> : e.getMessage();
        <span class="hljs-keyword">return</span> ResponseResult.fail(ErrorCode.SYSTEM_ERROR.getCode(), message);
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isProduction</span><span class="hljs-params">()</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">env</span> <span class="hljs-operator">=</span> System.getProperty(<span class="hljs-string">"spring.profiles.active"</span>);
        <span class="hljs-keyword">return</span> <span class="hljs-string">"prod"</span>.equals(env);
    }
}
</code></pre>
<h4 data-id="heading-13">2. å¢å¼ºç‰ˆï¼šå¸¦å¼‚å¸¸æ—¥å¿—è®°å½•çš„å¤„ç†å™¨</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Slf4j</span>
<span class="hljs-meta">@RestControllerAdvice</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EnhancedGlobalExceptionHandler</span> {
    
    <span class="hljs-comment">/**
     * å¼‚å¸¸ä¿¡æ¯ä¸Šä¸‹æ–‡ï¼Œç”¨äºè®°å½•é¢å¤–ä¿¡æ¯
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> ThreadLocal&lt;Map&lt;String, Object&gt;&gt; exceptionContext = 
            ThreadLocal.withInitial(HashMap::<span class="hljs-keyword">new</span>);
    
    <span class="hljs-comment">/**
     * æ·»åŠ ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼ˆå¯åœ¨ä¸šåŠ¡ä»£ç ä¸­è°ƒç”¨ï¼‰
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addContext</span><span class="hljs-params">(String key, Object value)</span> {
        exceptionContext.get().put(key, value);
    }
    
    <span class="hljs-comment">/**
     * æ¸…ç†ä¸Šä¸‹æ–‡ï¼ˆåœ¨è¿‡æ»¤å™¨æˆ–æ‹¦æˆªå™¨ä¸­è°ƒç”¨ï¼‰
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">clearContext</span><span class="hljs-params">()</span> {
        exceptionContext.remove();
    }
    
    <span class="hljs-meta">@ExceptionHandler(BusinessException.class)</span>
    <span class="hljs-keyword">public</span> ResponseResult&lt;Void&gt; <span class="hljs-title function_">handleBusinessException</span><span class="hljs-params">(
            BusinessException e, HttpServletRequest request)</span> {
        
        Map&lt;String, Object&gt; context = exceptionContext.get();
        log.warn(<span class="hljs-string">"ä¸šåŠ¡å¼‚å¸¸ | è·¯å¾„ï¼š{} | å‚æ•°ï¼š{} | é”™è¯¯ç ï¼š{} | æ¶ˆæ¯ï¼š{} | ä¸Šä¸‹æ–‡ï¼š{}"</span>,
                request.getRequestURI(),
                getRequestParams(request),
                e.getCode(),
                e.getMessage(),
                context);
        
        clearContext();
        <span class="hljs-keyword">return</span> ResponseResult.fail(e.getCode(), e.getMessage());
    }
    
    <span class="hljs-meta">@ExceptionHandler(Exception.class)</span>
    <span class="hljs-keyword">public</span> ResponseResult&lt;Void&gt; <span class="hljs-title function_">handleException</span><span class="hljs-params">(
            Exception e, HttpServletRequest request)</span> {
        
        Map&lt;String, Object&gt; context = exceptionContext.get();
        log.error(<span class="hljs-string">"ç³»ç»Ÿå¼‚å¸¸ | è·¯å¾„ï¼š{} | å‚æ•°ï¼š{} | ä¸Šä¸‹æ–‡ï¼š{}"</span>,
                request.getRequestURI(),
                getRequestParams(request),
                context,
                e);
        
        clearContext();
        <span class="hljs-keyword">return</span> ResponseResult.fail(ErrorCode.SYSTEM_ERROR.getCode(), 
                isProduction() ? <span class="hljs-string">"ç³»ç»Ÿç¹å¿™"</span> : e.getMessage());
    }
    
    <span class="hljs-keyword">private</span> String <span class="hljs-title function_">getRequestParams</span><span class="hljs-params">(HttpServletRequest request)</span> {
        Map&lt;String, String[]&gt; params = request.getParameterMap();
        <span class="hljs-keyword">return</span> params.entrySet().stream()
                .map(entry -&gt; entry.getKey() + <span class="hljs-string">"="</span> + 
                        Arrays.toString(entry.getValue()))
                .collect(Collectors.joining(<span class="hljs-string">", "</span>));
    }
    
    <span class="hljs-comment">// ... å…¶ä»–å¼‚å¸¸å¤„ç†æ–¹æ³•</span>
}
</code></pre>
<h3 data-id="heading-14">äº”ã€æœ€ä½³å®è·µä¸é«˜çº§ç”¨æ³•</h3>
<h4 data-id="heading-15">1. å‚æ•°æ ¡éªŒçš„ä¼˜é›…å¤„ç†</h4>
<p><strong>ä¼ ç»Ÿæ–¹å¼</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@RestController</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserController</span> {
    <span class="hljs-meta">@PostMapping("/user")</span>
    <span class="hljs-keyword">public</span> ResponseResult&lt;User&gt; <span class="hljs-title function_">createUser</span><span class="hljs-params">(<span class="hljs-meta">@Valid</span> <span class="hljs-meta">@RequestBody</span> UserDTO user)</span> {
        <span class="hljs-comment">// éœ€è¦æ‰‹åŠ¨å¤„ç†BindingResult</span>
        <span class="hljs-comment">// æˆ–è€…ä¾èµ–å…¨å±€å¼‚å¸¸å¤„ç†å™¨</span>
    }
}
</code></pre>
<p><strong>å¢å¼ºæ–¹å¼</strong>ï¼šè‡ªå®šä¹‰æ ¡éªŒæ³¨è§£</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// è‡ªå®šä¹‰æ‰‹æœºå·æ ¡éªŒæ³¨è§£</span>
<span class="hljs-meta">@Target({ElementType.FIELD})</span>
<span class="hljs-meta">@Retention(RetentionPolicy.RUNTIME)</span>
<span class="hljs-meta">@Constraint(validatedBy = PhoneValidator.class)</span>
<span class="hljs-keyword">public</span> <span class="hljs-meta">@interface</span> Phone {
    String <span class="hljs-title function_">message</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> <span class="hljs-string">"æ‰‹æœºå·æ ¼å¼é”™è¯¯"</span>;
    Class&lt;?&gt;[] groups() <span class="hljs-keyword">default</span> {};
    Class&lt;? <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Payload</span>&gt;[] payload() <span class="hljs-keyword">default</span> {};
}

<span class="hljs-comment">// å®ç°æ ¡éªŒé€»è¾‘</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PhoneValidator</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">ConstraintValidator</span>&lt;Phone, String&gt; {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">Pattern</span> <span class="hljs-variable">PHONE_PATTERN</span> <span class="hljs-operator">=</span> 
            Pattern.compile(<span class="hljs-string">"^1[3-9]\\d{9}$"</span>);
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isValid</span><span class="hljs-params">(String value, ConstraintValidatorContext context)</span> {
        <span class="hljs-keyword">if</span> (value == <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>; <span class="hljs-comment">// ç”±@NotNullå¤„ç†ç©ºå€¼</span>
        }
        <span class="hljs-keyword">return</span> PHONE_PATTERN.matcher(value).matches();
    }
}

<span class="hljs-comment">// ä½¿ç”¨æ–¹å¼</span>
<span class="hljs-meta">@Data</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserDTO</span> {
    <span class="hljs-meta">@NotBlank(message = "ç”¨æˆ·åä¸èƒ½ä¸ºç©º")</span>
    <span class="hljs-meta">@Size(min = 2, max = 20, message = "ç”¨æˆ·åé•¿åº¦2-20")</span>
    <span class="hljs-keyword">private</span> String username;
    
    <span class="hljs-meta">@Phone</span>  <span class="hljs-comment">// ä½¿ç”¨è‡ªå®šä¹‰æ³¨è§£</span>
    <span class="hljs-keyword">private</span> String phone;
}
</code></pre>
<h4 data-id="heading-16">2. å¤šç¯å¢ƒå·®å¼‚åŒ–å¤„ç†</h4>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># application.yml</span>
<span class="hljs-attr">spring:</span>
  <span class="hljs-attr">profiles:</span>
    <span class="hljs-attr">active:</span> <span class="hljs-string">dev</span>

<span class="hljs-attr">app:</span>
  <span class="hljs-attr">exception:</span>
    <span class="hljs-comment"># å¼€å‘ç¯å¢ƒè¿”å›è¯¦ç»†é”™è¯¯</span>
    <span class="hljs-attr">detail-in-dev:</span> <span class="hljs-literal">true</span>
    <span class="hljs-comment"># ç”Ÿäº§ç¯å¢ƒå±è”½å †æ ˆ</span>
    <span class="hljs-attr">hide-stack-in-prod:</span> <span class="hljs-literal">true</span>
</code></pre>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@ConfigurationProperties(prefix = "app.exception")</span>
<span class="hljs-meta">@Data</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ExceptionProperties</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> <span class="hljs-variable">detailInDev</span> <span class="hljs-operator">=</span> <span class="hljs-literal">true</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> <span class="hljs-variable">hideStackInProd</span> <span class="hljs-operator">=</span> <span class="hljs-literal">true</span>;
}

<span class="hljs-meta">@RestControllerAdvice</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EnvironmentAwareExceptionHandler</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> ExceptionProperties properties;
    
    <span class="hljs-meta">@ExceptionHandler(Exception.class)</span>
    <span class="hljs-keyword">public</span> ResponseResult&lt;Void&gt; <span class="hljs-title function_">handleException</span><span class="hljs-params">(Exception e, 
            HttpServletRequest request)</span> {
        
        <span class="hljs-comment">// è®°å½•å¼‚å¸¸æ—¥å¿—ï¼ˆç”Ÿäº§ç¯å¢ƒè®°å½•ç®€è¦ï¼Œå¼€å‘ç¯å¢ƒè®°å½•è¯¦ç»†ï¼‰</span>
        <span class="hljs-keyword">if</span> (isProduction()) {
            log.error(<span class="hljs-string">"ç³»ç»Ÿå¼‚å¸¸ | è·¯å¾„ï¼š{} | é”™è¯¯ï¼š{}"</span>, 
                    request.getRequestURI(), e.getMessage());
        } <span class="hljs-keyword">else</span> {
            log.error(<span class="hljs-string">"ç³»ç»Ÿå¼‚å¸¸ | è·¯å¾„ï¼š{}"</span>, request.getRequestURI(), e);
        }
        
        <span class="hljs-comment">// æ„å»ºå“åº”</span>
        <span class="hljs-type">ErrorResponse</span> <span class="hljs-variable">error</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ErrorResponse</span>();
        error.setCode(ErrorCode.SYSTEM_ERROR.getCode());
        error.setMessage(buildErrorMessage(e));
        
        <span class="hljs-keyword">if</span> (!isProduction() &amp;&amp; properties.isDetailInDev()) {
            error.setDetail(e.getMessage());
            error.setPath(request.getRequestURI());
            error.setException(e.getClass().getName());
        }
        
        <span class="hljs-keyword">if</span> (!isProduction() || !properties.isHideStackInProd()) {
            error.setTrace(getStackTrace(e));
        }
        
        <span class="hljs-keyword">return</span> ResponseResult.fail(error);
    }
    
    <span class="hljs-keyword">private</span> String <span class="hljs-title function_">buildErrorMessage</span><span class="hljs-params">(Exception e)</span> {
        <span class="hljs-keyword">if</span> (isProduction()) {
            <span class="hljs-keyword">return</span> <span class="hljs-string">"ç³»ç»Ÿç¹å¿™ï¼Œè¯·ç¨åé‡è¯•"</span>;
        }
        <span class="hljs-keyword">return</span> e.getMessage();
    }
}
</code></pre>
<h4 data-id="heading-17">3. é›†æˆSentinelè¿›è¡Œæµæ§å¼‚å¸¸å¤„ç†</h4>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV1RVyYBZE4z%2F%3Fvd_source%3Dd9789da0ed994ac777a822cd5ea4cf30" target="_blank" title="https://www.bilibili.com/video/BV1RVyYBZE4z/?vd_source=d9789da0ed994ac777a822cd5ea4cf30" ref="nofollow noopener noreferrer">é›¶åŸºç¡€å…¨æ ˆå¼€å‘Javaå¾®æœåŠ¡ç‰ˆæœ¬å®æˆ˜-åç«¯-å‰ç«¯-è¿ç»´-å®æˆ˜ä¼ä¸šçº§ä¸‰ä¸ªå®æˆ˜é¡¹ç›®</a></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SentinelExceptionHandler</span> {
    
    <span class="hljs-meta">@ExceptionHandler(BlockException.class)</span>
    <span class="hljs-keyword">public</span> ResponseResult&lt;Void&gt; <span class="hljs-title function_">handleBlockException</span><span class="hljs-params">(BlockException e)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">message</span> <span class="hljs-operator">=</span> <span class="hljs-string">"ç³»ç»Ÿç¹å¿™ï¼Œè¯·ç¨åé‡è¯•"</span>;
        
        <span class="hljs-keyword">if</span> (e <span class="hljs-keyword">instanceof</span> FlowException) {
            message = <span class="hljs-string">"æ¥å£é™æµï¼Œè¯·ç¨åé‡è¯•"</span>;
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (e <span class="hljs-keyword">instanceof</span> DegradeException) {
            message = <span class="hljs-string">"æ¥å£é™çº§ï¼Œè¯·ç¨åé‡è¯•"</span>;
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (e <span class="hljs-keyword">instanceof</span> ParamFlowException) {
            message = <span class="hljs-string">"çƒ­ç‚¹å‚æ•°é™æµ"</span>;
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (e <span class="hljs-keyword">instanceof</span> SystemBlockException) {
            message = <span class="hljs-string">"ç³»ç»Ÿä¿æŠ¤ï¼ˆCPU/è´Ÿè½½ï¼‰"</span>;
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (e <span class="hljs-keyword">instanceof</span> AuthorityException) {
            message = <span class="hljs-string">"æˆæƒè§„åˆ™ä¸é€šè¿‡"</span>;
        }
        
        log.warn(<span class="hljs-string">"Sentinelæµæ§ï¼š{}"</span>, message);
        <span class="hljs-keyword">return</span> ResponseResult.fail(<span class="hljs-number">429</span>, message);
    }
}
</code></pre>
<h3 data-id="heading-18">å…­ã€å®Œæ•´ç¤ºä¾‹ï¼šç”µå•†ç³»ç»Ÿå¼‚å¸¸å¤„ç†å®æˆ˜</h3>
<h4 data-id="heading-19">1. ä¸šåŠ¡å¼‚å¸¸å®šä¹‰</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// åº“å­˜ä¸è¶³å¼‚å¸¸</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">InsufficientStockException</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">BusinessException</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Long productId;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Integer requested;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Integer available;
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">InsufficientStockException</span><span class="hljs-params">(Long productId, 
            Integer requested, Integer available)</span> {
        <span class="hljs-built_in">super</span>(ErrorCode.INSUFFICIENT_STOCK);
        <span class="hljs-built_in">this</span>.productId = productId;
        <span class="hljs-built_in">this</span>.requested = requested;
        <span class="hljs-built_in">this</span>.available = available;
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getMessage</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> String.format(<span class="hljs-string">"å•†å“[%d]åº“å­˜ä¸è¶³ï¼Œéœ€è¦%dï¼Œå¯ç”¨%d"</span>, 
                productId, requested, available);
    }
}

<span class="hljs-comment">// è®¢å•çŠ¶æ€å¼‚å¸¸</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderStateException</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">BusinessException</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Long orderId;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> String currentState;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> String requiredState;
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">OrderStateException</span><span class="hljs-params">(Long orderId, 
            String currentState, String requiredState)</span> {
        <span class="hljs-built_in">super</span>(ErrorCode.ORDER_STATE_ERROR);
        <span class="hljs-built_in">this</span>.orderId = orderId;
        <span class="hljs-built_in">this</span>.currentState = currentState;
        <span class="hljs-built_in">this</span>.requiredState = requiredState;
    }
}
</code></pre>
<h4 data-id="heading-20">2. ä¸šåŠ¡ä½¿ç”¨ç¤ºä¾‹</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Service</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">OrderService</span> {
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-meta">@Transactional</span>
    <span class="hljs-keyword">public</span> Order <span class="hljs-title function_">createOrder</span><span class="hljs-params">(OrderCreateDTO dto)</span> {
        <span class="hljs-comment">// å‚æ•°æ ¡éªŒï¼ˆä¼šè‡ªåŠ¨æŠ›å‡ºMethodArgumentNotValidExceptionï¼‰</span>
        validateOrder(dto);
        
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// æ£€æŸ¥åº“å­˜</span>
            checkStock(dto);
            
            <span class="hljs-comment">// åˆ›å»ºè®¢å•</span>
            <span class="hljs-type">Order</span> <span class="hljs-variable">order</span> <span class="hljs-operator">=</span> buildOrder(dto);
            orderRepository.save(order);
            
            <span class="hljs-comment">// æ‰£å‡åº“å­˜</span>
            reduceStock(dto);
            
            <span class="hljs-comment">// å‘é€åˆ›å»ºè®¢å•äº‹ä»¶</span>
            eventPublisher.publishEvent(<span class="hljs-keyword">new</span> <span class="hljs-title class_">OrderCreatedEvent</span>(order));
            
            <span class="hljs-keyword">return</span> order;
            
        } <span class="hljs-keyword">catch</span> (InsufficientStockException e) {
            <span class="hljs-comment">// æ·»åŠ ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œä¾¿äºæ—¥å¿—è®°å½•</span>
            EnhancedGlobalExceptionHandler.addContext(<span class="hljs-string">"orderDTO"</span>, dto);
            <span class="hljs-keyword">throw</span> e;
        }
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">checkStock</span><span class="hljs-params">(OrderCreateDTO dto)</span> {
        dto.getItems().forEach(item -&gt; {
            <span class="hljs-type">Integer</span> <span class="hljs-variable">available</span> <span class="hljs-operator">=</span> stockService.getAvailableStock(item.getProductId());
            <span class="hljs-keyword">if</span> (available &lt; item.getQuantity()) {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">InsufficientStockException</span>(
                        item.getProductId(), 
                        item.getQuantity(), 
                        available);
            }
        });
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">validateOrder</span><span class="hljs-params">(OrderCreateDTO dto)</span> {
        <span class="hljs-keyword">if</span> (dto.getItems() == <span class="hljs-literal">null</span> || dto.getItems().isEmpty()) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ValidationException</span>(<span class="hljs-string">"è®¢å•å•†å“ä¸èƒ½ä¸ºç©º"</span>);
        }
        
        <span class="hljs-keyword">if</span> (dto.getTotalAmount() == <span class="hljs-literal">null</span> || dto.getTotalAmount().compareTo(BigDecimal.ZERO) &lt;= <span class="hljs-number">0</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ValidationException</span>(<span class="hljs-string">"è®¢å•é‡‘é¢å¿…é¡»å¤§äº0"</span>);
        }
    }
}
</code></pre>
<h4 data-id="heading-21">3. Controllerå±‚ç¤ºä¾‹</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@RestController</span>
<span class="hljs-meta">@RequestMapping("/orders")</span>
<span class="hljs-meta">@Validated</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderController</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> OrderService orderService;
    
    <span class="hljs-meta">@PostMapping</span>
    <span class="hljs-keyword">public</span> ResponseResult&lt;Order&gt; <span class="hljs-title function_">createOrder</span><span class="hljs-params">(
            <span class="hljs-meta">@Valid</span> <span class="hljs-meta">@RequestBody</span> OrderCreateDTO dto)</span> {
        
        log.info(<span class="hljs-string">"åˆ›å»ºè®¢å•ï¼Œç”¨æˆ·ï¼š{}ï¼Œå•†å“æ•°é‡ï¼š{}"</span>, 
                dto.getUserId(), dto.getItems().size());
        
        <span class="hljs-type">Order</span> <span class="hljs-variable">order</span> <span class="hljs-operator">=</span> orderService.createOrder(dto);
        <span class="hljs-keyword">return</span> ResponseResult.success(order);
    }
    
    <span class="hljs-meta">@PostMapping("/{orderId}/cancel")</span>
    <span class="hljs-keyword">public</span> ResponseResult&lt;Void&gt; <span class="hljs-title function_">cancelOrder</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable</span> Long orderId)</span> {
        orderService.cancelOrder(orderId);
        <span class="hljs-keyword">return</span> ResponseResult.success();
    }
    
    <span class="hljs-meta">@GetMapping("/{orderId}")</span>
    <span class="hljs-keyword">public</span> ResponseResult&lt;Order&gt; <span class="hljs-title function_">getOrder</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable</span> Long orderId)</span> {
        <span class="hljs-type">Order</span> <span class="hljs-variable">order</span> <span class="hljs-operator">=</span> orderService.getOrder(orderId);
        <span class="hljs-keyword">return</span> ResponseResult.success(order);
    }
}
</code></pre>
<h3 data-id="heading-22">ä¸ƒã€æµ‹è¯•ä½ çš„å¼‚å¸¸å¤„ç†å™¨</h3>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV1RVyYBZE4z%2F%3Fvd_source%3Dd9789da0ed994ac777a822cd5ea4cf30" target="_blank" title="https://www.bilibili.com/video/BV1RVyYBZE4z/?vd_source=d9789da0ed994ac777a822cd5ea4cf30" ref="nofollow noopener noreferrer">é›¶åŸºç¡€å…¨æ ˆå¼€å‘Javaå¾®æœåŠ¡ç‰ˆæœ¬å®æˆ˜-åç«¯-å‰ç«¯-è¿ç»´-å®æˆ˜ä¼ä¸šçº§ä¸‰ä¸ªå®æˆ˜é¡¹ç›®</a></p>
<h4 data-id="heading-23">1. å•å…ƒæµ‹è¯•</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@SpringBootTest</span>
<span class="hljs-meta">@AutoConfigureMockMvc</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">GlobalExceptionHandlerTest</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> MockMvc mockMvc;
    
    <span class="hljs-meta">@Test</span>
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">testBusinessException</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception {
        mockMvc.perform(get(<span class="hljs-string">"/api/test/business-error"</span>))
                .andExpect(status().isOk())
                .andExpect(jsonPath(<span class="hljs-string">"$.code"</span>).value(<span class="hljs-number">10001</span>))
                .andExpect(jsonPath(<span class="hljs-string">"$.message"</span>).value(<span class="hljs-string">"ä¸šåŠ¡å¼‚å¸¸æµ‹è¯•"</span>));
    }
    
    <span class="hljs-meta">@Test</span>
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">testValidationException</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception {
        mockMvc.perform(post(<span class="hljs-string">"/api/users"</span>)
                .contentType(MediaType.APPLICATION_JSON)
                .content(<span class="hljs-string">"{\"username\":\"\"}"</span>))
                .andExpect(status().isOk())
                .andExpect(jsonPath(<span class="hljs-string">"$.code"</span>).value(<span class="hljs-number">10001</span>))
                .andExpect(jsonPath(<span class="hljs-string">"$.message"</span>).contains(<span class="hljs-string">"ä¸èƒ½ä¸ºç©º"</span>));
    }
    
    <span class="hljs-meta">@Test</span>
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">testSystemException</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception {
        mockMvc.perform(get(<span class="hljs-string">"/api/test/system-error"</span>))
                .andExpect(status().isOk())
                .andExpect(jsonPath(<span class="hljs-string">"$.code"</span>).value(<span class="hljs-number">500</span>));
    }
}
</code></pre>
<h4 data-id="heading-24">2. é›†æˆæµ‹è¯•å¼‚å¸¸å¤„ç†å™¨</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@WebMvcTest(OrderController.class)</span>
<span class="hljs-meta">@Import(GlobalExceptionHandler.class)</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderControllerExceptionTest</span> {
    
    <span class="hljs-meta">@MockBean</span>
    <span class="hljs-keyword">private</span> OrderService orderService;
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> MockMvc mockMvc;
    
    <span class="hljs-meta">@Test</span>
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">createOrder_InsufficientStock</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception {
        <span class="hljs-comment">// æ¨¡æ‹Ÿåº“å­˜ä¸è¶³å¼‚å¸¸</span>
        when(orderService.createOrder(any()))
                .thenThrow(<span class="hljs-keyword">new</span> <span class="hljs-title class_">InsufficientStockException</span>(<span class="hljs-number">1L</span>, <span class="hljs-number">10</span>, <span class="hljs-number">5</span>));
        
        mockMvc.perform(post(<span class="hljs-string">"/orders"</span>)
                .contentType(MediaType.APPLICATION_JSON)
                .content(<span class="hljs-string">"{...}"</span>))
                .andExpect(status().isOk())
                .andExpect(jsonPath(<span class="hljs-string">"$.code"</span>).value(ErrorCode.INSUFFICIENT_STOCK.getCode()))
                .andExpect(jsonPath(<span class="hljs-string">"$.message"</span>).value(<span class="hljs-string">"å•†å“[1]åº“å­˜ä¸è¶³ï¼Œéœ€è¦10ï¼Œå¯ç”¨5"</span>));
    }
}
</code></pre>
<h3 data-id="heading-25">å…«ã€ä¸ªäººå»ºè®®æ€§èƒ½ä¸æ³¨æ„äº‹é¡¹</h3>
<p><strong>èµ„æºè·å–</strong>ï¼š<strong>å…³æ³¨å…¬ä¼—å·ï¼šå°åç¡è¯´Java</strong></p>
<h4 data-id="heading-26">1. æ€§èƒ½è€ƒè™‘</h4>
<ul>
<li>å¼‚å¸¸åˆ›å»ºå¼€é”€ï¼šå¼‚å¸¸å¯¹è±¡çš„åˆ›å»ºæ¯”æ™®é€šå¯¹è±¡å¼€é”€å¤§</li>
<li>æ ˆè¿½è¸ªå¼€é”€ï¼š<code>fillInStackTrace()</code>æ–¹æ³•æ¯”è¾ƒè€—æ—¶</li>
<li>å»ºè®®ï¼šå¯¹äºé¢‘ç¹å‘ç”Ÿçš„ä¸šåŠ¡å¼‚å¸¸ï¼Œè€ƒè™‘ä½¿ç”¨é”™è¯¯ç è€Œéå¼‚å¸¸</li>
</ul>
<h3 data-id="heading-27">æ€»ç»“</h3>
<p>ä»Šå¤©æˆ‘ä»¬ä¸€èµ·æ„å»ºäº†ä¸€ä¸ªå®Œæ•´çš„å…¨å±€å¼‚å¸¸å¤„ç†ä½“ç³»ï¼š</p>
<ol>
<li><strong>æ ¸å¿ƒæœºåˆ¶</strong>ï¼š<code>@RestControllerAdvice</code> + <code>@ExceptionHandler</code></li>
<li><strong>å¼‚å¸¸ä½“ç³»</strong>ï¼šä¸šåŠ¡å¼‚å¸¸ä¸ç³»ç»Ÿå¼‚å¸¸åˆ†ç¦»</li>
<li><strong>ç»Ÿä¸€å“åº”</strong>ï¼šæ ‡å‡†åŒ–çš„å“åº”æ ¼å¼</li>
<li><strong>æ—¥å¿—è®°å½•</strong>ï¼šå®Œæ•´çš„å¼‚å¸¸ä¸Šä¸‹æ–‡ä¿¡æ¯</li>
<li><strong>å¤šç¯å¢ƒé€‚é…</strong>ï¼šå¼€å‘/ç”Ÿäº§ç¯å¢ƒå·®å¼‚åŒ–å¤„ç†</li>
<li><strong>æœ€ä½³å®è·µ</strong>ï¼šå‚æ•°æ ¡éªŒã€Sentinelé›†æˆç­‰</li>
</ol>
<p>é€šè¿‡å…¨å±€å¼‚å¸¸å¤„ç†ï¼Œæˆ‘ä»¬å®ç°äº†ï¼š</p>
<ul>
<li>âœ… <strong>ä»£ç æ•´æ´</strong>ï¼šControllerå±‚åªæœ‰ä¸šåŠ¡é€»è¾‘</li>
<li>âœ… <strong>ç»Ÿä¸€æ ¼å¼</strong>ï¼šæ‰€æœ‰å¼‚å¸¸å“åº”æ ¼å¼ä¸€è‡´</li>
<li>âœ… <strong>æ˜“äºç»´æŠ¤</strong>ï¼šå¼‚å¸¸å¤„ç†é€»è¾‘é›†ä¸­ç®¡ç†</li>
<li>âœ… <strong>ä¾¿äºç›‘æ§</strong>ï¼šå¼‚å¸¸æ—¥å¿—å®Œæ•´è®°å½•</li>
</ul>
<h3 data-id="heading-28">ä»Šæ—¥æ€è€ƒé¢˜</h3>
<p>åœ¨ä½ çš„é¡¹ç›®ä¸­ï¼Œæœ‰æ²¡æœ‰é‡åˆ°è¿‡ä»¥ä¸‹æƒ…å†µï¼š</p>
<ol>
<li>æŸä¸ªç¬¬ä¸‰æ–¹æ¥å£é¢‘ç¹è¶…æ—¶ï¼Œéœ€è¦ç‰¹æ®Šå¤„ç†</li>
<li>ä¸åŒå¾®æœåŠ¡ä¹‹é—´çš„å¼‚å¸¸éœ€è¦ç»Ÿä¸€å¤„ç†</li>
<li>éœ€è¦æ ¹æ®ç”¨æˆ·ç±»å‹è¿”å›ä¸åŒçš„é”™è¯¯ä¿¡æ¯</li>
</ol>
<p>ä½ æ˜¯å¦‚ä½•è§£å†³è¿™äº›é—®é¢˜çš„ï¼Ÿæ¬¢è¿åœ¨è¯„è®ºåŒºåˆ†äº«ä½ çš„ç»éªŒï¼</p>
<hr/>
<p><strong>ä¸‹æœŸé¢„å‘Š</strong>ï¼šæ˜å¤©æˆ‘ä»¬å°†æ¢è®¨ã€ŠSpringBooté…ç½®æ–‡ä»¶ï¼šä¸€ä¸ªæ³¨è§£æå®šå¤šç¯å¢ƒé…ç½®ï¼ã€‹ï¼Œå­¦ä¹ å¦‚ä½•ä¼˜é›…ç®¡ç†ä¸åŒç¯å¢ƒçš„é…ç½®ã€‚</p>
<p><strong>äº’åŠ¨æ—¶é—´</strong>ï¼šä½ åœ¨å¼‚å¸¸å¤„ç†ä¸­é‡åˆ°è¿‡å“ªäº›"å‘"ï¼Ÿæˆ–è€…æœ‰å“ªäº›æ›´å¥½çš„å®è·µå»ºè®®ï¼Ÿ</p>
<p><strong>èµ„æºè·å–</strong>ï¼š<strong>å…³æ³¨å…¬ä¼—å·ï¼šå°åç¡è¯´Java</strong>     å›å¤"å¼‚å¸¸å¤„ç†æºç "ï¼Œè·å–æœ¬æ–‡æ‰€æœ‰ç¤ºä¾‹ä»£ç åŠå®Œæ•´é¡¹ç›®ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è‡ªå®šä¹‰ç®€æ˜“æ—¥å†]]></title>    <link>https://juejin.cn/post/7585897699603071002</link>    <guid>https://juejin.cn/post/7585897699603071002</guid>    <pubDate>2025-12-22T02:25:59.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7585897699603071002" data-draft-id="7585888537641959439" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è‡ªå®šä¹‰ç®€æ˜“æ—¥å†"/> <meta itemprop="keywords" content="Android"/> <meta itemprop="datePublished" content="2025-12-22T02:25:59.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é£å¾€å“ªè¾¹èµ°"/> <meta itemprop="url" content="https://juejin.cn/user/3433151760706957"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è‡ªå®šä¹‰ç®€æ˜“æ—¥å†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3433151760706957/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é£å¾€å“ªè¾¹èµ°
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-22T02:25:59.000Z" title="Mon Dec 22 2025 02:25:59 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{font-family:-apple-system,system-ui,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial;color:#00325e}.markdown-body ::selection{background-color:#00325e;color:#fff}.markdown-body blockquote{padding:10px 20px;background-color:#fffaf0;box-shadow:0 3px 10px 0 rgba(255,172,194,.24);border:1px solid #f3ca8e;transition:all .2s;margin:1em 0;border-radius:5px}.markdown-body blockquote p{font-size:14px;line-height:25px;color:#795548}.markdown-body blockquote p:last-child{margin:0}.markdown-body blockquote:hover{border-color:#ff9800;background-color:#fff8e0;box-shadow:0 6px 10px -5px rgba(225,173,98,.3803921569)}.markdown-body blockquote code{color:#ff502c}.markdown-body pre{border:1px solid #8cc0f3;box-shadow:0 3px 10px 0 rgba(255,198,198,.28);border-radius:5px;transition:all .2s;overflow-x:auto;white-space:pre-wrap}.markdown-body pre:hover{border-color:#6d9dce}.markdown-body pre&gt;code{padding:10px 20px;color:#00325e;background:#f0f8ff;font-size:12px;line-height:1.6;display:block}.markdown-body code{background:#f6fbff;color:#0b5393;padding:2px 4px;border-radius:4px;font-size:12px}.markdown-body p{font-size:14px;line-height:28px;text-align:justify;margin-bottom:17px;color:#595959}.markdown-body a{color:#00325e;text-decoration:none}.markdown-body a:after{content:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAAXNSR0IArs4c6QAAAQdJREFUKFNt0DtLA0EUBeBzZle0Eks7rcUfEfBRCha7NorYa6NmVJzgyi4smUgKtdZGCJktLMVH4Y8QeztLWyE7VyLEuNFbXj4Oh0P8c8mZm+uJrEN4BJFTeP/MUVe3bnocfALwkOlo1zS7iZAzf6Cx7oXgbaqjxiDEWCcVaGyxQ8pSWo9XhqhoQ/xUFbaKjhe5V+CmR7mnSplEEF6GSmJ+F/d0KHvbCIIJCLc85U6BC5mONgbJNM3uFag++sX7z8O8MzsWBucifMx0dDGE1kmm458KDVukAlnNdDz/exEeW3dNkbfsYC0xtmgDWP6ELLZ0/F6BJu/UoFQN5AkoeUjeJPvx6+i+X5Sjah4tA6gYAAAAAElFTkSuQmCC);margin-left:2px}.markdown-body a:hover{box-shadow:0 1px}.markdown-body table{max-width:100%;border-collapse:collapse;border-spacing:0;box-shadow:0 3px 10px 0 rgba(255,238,172,.24);transition:all .2s}.markdown-body table:hover{box-shadow:0 3px 10px 0 rgba(185,169,103,.24)}.markdown-body table tr th{border:1px solid #8cc0f3;background-color:#f0f8ff;padding:12px 15px}.markdown-body table tr td{border:1px solid rgba(243,202,142,.4);padding:12px 15px}.markdown-body table tbody tr{transition:all .2s}.markdown-body table tbody tr:hover td{border-color:#f3ca8e;background-color:#fff8e0;z-index:1}.markdown-body img{max-width:100%}.markdown-body h1{font-size:20px;margin-top:30px;margin-bottom:10px;padding-left:30px;position:relative}.markdown-body h1&gt;code{font-size:20px}.markdown-body h1:before{content:"ğŸº";display:block;font-size:18px;width:18px;height:18px;left:0;position:absolute}.markdown-body h2{font-size:18px;margin-top:30px;margin-bottom:10px;padding-left:28px;position:relative}.markdown-body h2&gt;code{font-size:18px}.markdown-body h2:before{content:"ğŸ»";display:block;font-size:16px;width:16px;height:16px;left:0;position:absolute}.markdown-body h3{font-size:16px;margin-top:30px;margin-bottom:10px;padding-left:26px;position:relative}.markdown-body h3&gt;code{font-size:16px}.markdown-body h3:before{content:"ğŸ¥‚";display:block;font-size:14px;width:14px;height:14px;left:0;position:absolute}.markdown-body h4{font-size:14px;margin-top:30px;margin-bottom:10px;padding-left:24px;position:relative}.markdown-body h4&gt;code{font-size:14px}.markdown-body h4:before{content:"ğŸ¥ƒ";display:block;font-size:12px;width:12px;height:12px;left:0;position:absolute}.markdown-body h5{font-size:12px;margin-top:30px;margin-bottom:10px}.markdown-body h5&gt;code{font-size:12px}.markdown-body h6{font-size:10px;margin-top:30px;margin-bottom:10px}.markdown-body h6&gt;code{font-size:10px}.markdown-body h1,.markdown-body h2{color:#ff502c}.markdown-body hr{height:4px;border:none;margin-top:32px;margin-bottom:32px;background-size:4px 1px;background-image:linear-gradient(270deg,#6d9dce,#8cc0f3 25%,transparent 50%)}.markdown-body hr:nth-child(2n){background-image:linear-gradient(270deg,#ff9800,#fff8e0 25%,transparent 50%)}.markdown-body ul{padding-inline-start:20px}.markdown-body ul li{list-style-type:"ğŸ”¸"}.markdown-body ul li li{list-style-type:"â—»ï¸"}.markdown-body ul li li li{list-style-type:"â–«ï¸"}.markdown-body ol{padding-inline-start:20px}.markdown-body ol ::marker{color:#ff9800}.markdown-body ol,.markdown-body ul{line-height:2em}.markdown-body li{padding-inline-start:1ch}.markdown-body li.task-list-item{list-style:none;padding-inline-start:0}.markdown-body li input{padding-right:2px}.markdown-body li input[type=checkbox i]{appearance:none}.markdown-body li input:before{content:"ğŸŸ©";display:block;width:13px;height:13px}.markdown-body li input:checked:before{content:"âœ…"}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atelier-sulphurpool-light">.hljs-comment,.hljs-quote{color:#6b7394}.hljs-attribute,.hljs-link,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#c94922}.hljs-built_in,.hljs-builtin-name,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#c76b29}.hljs-bullet,.hljs-string,.hljs-symbol{color:#ac9739}.hljs-section,.hljs-title{color:#3d8fd1}.hljs-keyword,.hljs-selector-tag{color:#6679cc}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#f5f7ff;color:#5e6687}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">è‡ªå®šä¹‰ç®€æ˜“æ—¥å†</h2>
<ul>
<li>
<blockquote>
<p>å½“å‰æœˆä»½æ—¥æœŸå¯ç‚¹å‡»é€‰ä¸­</p>
</blockquote>
</li>
<li>
<blockquote>
<p>ä»Šå¤©æ—¥æœŸæœ‰çº¢è‰²åœ†åœˆæ ‡è®°</p>
</blockquote>
</li>
<li>
<blockquote>
<p>è·¨æœˆæ—¥æœŸä¸ºç°è‰²ï¼Œä¸å¯ç‚¹å‡»</p>
</blockquote>
</li>
<li>
<blockquote>
<p>å¯åˆ‡æ¢ä¸Šä¸ªæœˆ/ä¸‹ä¸ªæœˆ</p>
</blockquote>
</li>
<li>
<blockquote>
<p>æ”¯æŒå›åˆ°ä»Šå¤©</p>
</blockquote>
</li>
<li>
<blockquote>
<p>å¯ä»¥è®¾ç½®çº¢ç‚¹ç»¿ç‚¹æ—¥æœŸã€‚æ¯”å¦‚æ‰“å¡æ—¥æœŸ</p>
</blockquote>
</li>
</ul>
<h2 data-id="heading-1">è‡ªå®šä¹‰æ—¥å†<code>SimpleCalendarView.kt</code></h2>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">package</span> cn.nio.calendar


<span class="hljs-keyword">import</span> android.content.Context
<span class="hljs-keyword">import</span> android.graphics.Canvas
<span class="hljs-keyword">import</span> android.graphics.Color
<span class="hljs-keyword">import</span> android.graphics.Paint
<span class="hljs-keyword">import</span> android.graphics.RectF
<span class="hljs-keyword">import</span> android.graphics.Typeface
<span class="hljs-keyword">import</span> android.util.AttributeSet
<span class="hljs-keyword">import</span> android.view.MotionEvent
<span class="hljs-keyword">import</span> android.view.View
<span class="hljs-keyword">import</span> java.util.Calendar
<span class="hljs-keyword">import</span> kotlin.math.min

<span class="hljs-keyword">class</span> <span class="hljs-title class_">SimpleCalendarView</span> <span class="hljs-meta">@JvmOverloads</span> <span class="hljs-keyword">constructor</span>(
    context: Context,
    attrs: AttributeSet? = <span class="hljs-literal">null</span>,
    defStyleAttr: <span class="hljs-built_in">Int</span> = <span class="hljs-number">0</span>,
) : View(context, attrs, defStyleAttr) {

    <span class="hljs-comment">// é¢œè‰²</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> todayColor = Color.RED
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> selectedColor = Color.parseColor(<span class="hljs-string">"#00B594"</span>)
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> normalTextColor = Color.BLACK
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> selectedTextColor = Color.WHITE
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> otherMonthTextColor = Color.parseColor(<span class="hljs-string">"#CCCCCC"</span>)
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> gridLineColor = Color.parseColor(<span class="hljs-string">"#E0E0E0"</span>)
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> weekBackgroundColor = Color.parseColor(<span class="hljs-string">"#F5F5F5"</span>)

    <span class="hljs-comment">// æ–°å¢ï¼šçº¢ç‚¹å’Œç»¿ç‚¹é¢œè‰²</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> redDotColor = Color.parseColor(<span class="hljs-string">"#FF4444"</span>)
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> greenDotColor = Color.parseColor(<span class="hljs-string">"#00B594"</span>)

    <span class="hljs-comment">// æ•°æ®</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> calendar = Calendar.getInstance()
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> currentYear: <span class="hljs-built_in">Int</span> = calendar.<span class="hljs-keyword">get</span>(Calendar.YEAR)
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> currentMonth: <span class="hljs-built_in">Int</span> = calendar.<span class="hljs-keyword">get</span>(Calendar.MONTH)
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> selectedDate: Calendar? = <span class="hljs-literal">null</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> today: Calendar = Calendar.getInstance()

    <span class="hljs-comment">// æ–°å¢ï¼šå­˜å‚¨éœ€è¦æ˜¾ç¤ºç‚¹çš„æ—¥æœŸ</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> redDotDates = mutableSetOf&lt;String&gt;() <span class="hljs-comment">// æ ¼å¼: "2024-01-15"</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> greenDotDates = mutableSetOf&lt;String&gt;()

    <span class="hljs-comment">// ç”»ç¬”</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> paint = Paint(Paint.ANTI_ALIAS_FLAG)
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> weekPaint = Paint(Paint.ANTI_ALIAS_FLAG)
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> selectedPaint = Paint(Paint.ANTI_ALIAS_FLAG)
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> todayPaint = Paint(Paint.ANTI_ALIAS_FLAG)

    <span class="hljs-comment">// æ–°å¢ï¼šç‚¹ç”»ç¬”</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> redDotPaint = Paint(Paint.ANTI_ALIAS_FLAG)
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> greenDotPaint = Paint(Paint.ANTI_ALIAS_FLAG)

    <span class="hljs-comment">// å°ºå¯¸</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> cellWidth: <span class="hljs-built_in">Float</span> = <span class="hljs-number">0f</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> cellHeight: <span class="hljs-built_in">Float</span> = <span class="hljs-number">0f</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> weekHeight: <span class="hljs-built_in">Float</span> = <span class="hljs-number">0f</span>

    <span class="hljs-comment">// æ–°å¢ï¼šç‚¹ç›¸å…³å°ºå¯¸</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> dotRadius: <span class="hljs-built_in">Float</span> = <span class="hljs-number">0f</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> dotSpacing: <span class="hljs-built_in">Float</span> = <span class="hljs-number">0f</span>

    <span class="hljs-comment">// ç›‘å¬å™¨</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> onDateClickListener: ((year: <span class="hljs-built_in">Int</span>, month: <span class="hljs-built_in">Int</span>, day: <span class="hljs-built_in">Int</span>) -&gt; <span class="hljs-built_in">Unit</span>)? = <span class="hljs-literal">null</span>

    <span class="hljs-comment">// æ˜ŸæœŸæ ‡é¢˜</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> weekDays = arrayOf(<span class="hljs-string">"æ—¥"</span>, <span class="hljs-string">"ä¸€"</span>, <span class="hljs-string">"äºŒ"</span>, <span class="hljs-string">"ä¸‰"</span>, <span class="hljs-string">"å››"</span>, <span class="hljs-string">"äº”"</span>, <span class="hljs-string">"å…­"</span>)

    <span class="hljs-keyword">init</span> {
        <span class="hljs-comment">// åˆå§‹åŒ–ç”»ç¬”</span>
        paint.color = normalTextColor
        paint.textSize = spToPx(<span class="hljs-number">16f</span>)
        paint.textAlign = Paint.Align.CENTER

        weekPaint.color = normalTextColor
        weekPaint.textSize = spToPx(<span class="hljs-number">18f</span>)
        weekPaint.textAlign = Paint.Align.CENTER
        weekPaint.typeface = Typeface.DEFAULT_BOLD

        selectedPaint.color = selectedColor
        selectedPaint.style = Paint.Style.FILL

        todayPaint.color = todayColor
        todayPaint.style = Paint.Style.STROKE
        todayPaint.strokeWidth = <span class="hljs-number">3f</span>

        <span class="hljs-comment">// åˆå§‹åŒ–ç‚¹ç”»ç¬”</span>
        redDotPaint.color = redDotColor
        redDotPaint.style = Paint.Style.FILL

        greenDotPaint.color = greenDotColor
        greenDotPaint.style = Paint.Style.FILL

        <span class="hljs-comment">// è®¾ç½®åˆå§‹é€‰ä¸­æ—¥æœŸä¸ºä»Šå¤©</span>
        selectedDate = today.clone() <span class="hljs-keyword">as</span> Calendar
    }

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onMeasure</span><span class="hljs-params">(widthMeasureSpec: <span class="hljs-type">Int</span>, heightMeasureSpec: <span class="hljs-type">Int</span>)</span></span> {
        <span class="hljs-keyword">val</span> width = MeasureSpec.getSize(widthMeasureSpec)
<span class="hljs-comment">//        val height = (width * 6 / 7f).toInt()</span>
        setMeasuredDimension(width, width)
    }

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onSizeChanged</span><span class="hljs-params">(w: <span class="hljs-type">Int</span>, h: <span class="hljs-type">Int</span>, oldw: <span class="hljs-type">Int</span>, oldh: <span class="hljs-type">Int</span>)</span></span> {
        <span class="hljs-keyword">super</span>.onSizeChanged(w, h, oldw, oldh)

        cellWidth = w / <span class="hljs-number">7f</span>
        weekHeight = h * <span class="hljs-number">0.15f</span>
        cellHeight = (h - weekHeight) / <span class="hljs-number">6f</span>

        <span class="hljs-comment">// è®¡ç®—ç‚¹çš„å°ºå¯¸</span>
        dotRadius = dpToPx(<span class="hljs-number">2f</span>)
        dotSpacing = dpToPx(<span class="hljs-number">1f</span>)
    }

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onDraw</span><span class="hljs-params">(canvas: <span class="hljs-type">Canvas</span>)</span></span> {
        <span class="hljs-keyword">super</span>.onDraw(canvas)

        <span class="hljs-comment">// ç»˜åˆ¶ç™½è‰²èƒŒæ™¯</span>
        canvas.drawColor(Color.WHITE)

        <span class="hljs-comment">// ç»˜åˆ¶æ˜ŸæœŸæ </span>
        drawWeekBackground(canvas)
        drawWeekDays(canvas)

        <span class="hljs-comment">// ç»˜åˆ¶æ—¥æœŸ</span>
        drawDates(canvas)
    }

    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">drawWeekBackground</span><span class="hljs-params">(canvas: <span class="hljs-type">Canvas</span>)</span></span> {
        <span class="hljs-keyword">val</span> rect = RectF(<span class="hljs-number">0f</span>, <span class="hljs-number">0f</span>, width.toFloat(), weekHeight)
        paint.color = weekBackgroundColor
        paint.style = Paint.Style.FILL
        canvas.drawRect(rect, paint)
        paint.style = Paint.Style.FILL
    }

    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">drawWeekDays</span><span class="hljs-params">(canvas: <span class="hljs-type">Canvas</span>)</span></span> {
        <span class="hljs-keyword">val</span> baseline = weekHeight * <span class="hljs-number">0.7f</span>

        <span class="hljs-keyword">for</span> (i <span class="hljs-keyword">in</span> weekDays.indices) {
            <span class="hljs-keyword">val</span> x = i * cellWidth + cellWidth / <span class="hljs-number">2</span>
            canvas.drawText(weekDays[i], x, baseline, weekPaint)
        }
    }

    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">drawDates</span><span class="hljs-params">(canvas: <span class="hljs-type">Canvas</span>)</span></span> {
        <span class="hljs-comment">// è®¾ç½®å½“å‰æœˆä»½ç¬¬ä¸€å¤©</span>
        calendar.<span class="hljs-keyword">set</span>(currentYear, currentMonth, <span class="hljs-number">1</span>)
        <span class="hljs-keyword">val</span> firstDayOfWeek = calendar.<span class="hljs-keyword">get</span>(Calendar.DAY_OF_WEEK) - <span class="hljs-number">1</span>

        <span class="hljs-comment">// è·å–å½“æœˆå®é™…å¤©æ•°</span>
        <span class="hljs-keyword">val</span> daysInMonth = getMonthDays(currentYear, currentMonth)

        <span class="hljs-comment">// ç»˜åˆ¶å½“å‰æœˆä»½æ—¥æœŸ</span>
        <span class="hljs-keyword">for</span> (day <span class="hljs-keyword">in</span> <span class="hljs-number">1.</span>.daysInMonth) {
            drawDateCell(canvas, day, firstDayOfWeek, daysInMonth, <span class="hljs-literal">true</span>)
        }

        <span class="hljs-comment">// ç»˜åˆ¶è·¨æœˆæ—¥æœŸï¼ˆç°è‰²ï¼Œä¸å¯ç‚¹å‡»ï¼‰</span>
        drawOtherMonthDays(canvas, firstDayOfWeek, daysInMonth)

        <span class="hljs-comment">// ç»˜åˆ¶ç½‘æ ¼çº¿</span>
        drawGridLines(canvas)
    }

    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">drawDateCell</span><span class="hljs-params">(
        canvas: <span class="hljs-type">Canvas</span>,
        day: <span class="hljs-type">Int</span>,
        firstDayOfWeek: <span class="hljs-type">Int</span>,
        daysInMonth: <span class="hljs-type">Int</span>,
        isCurrentMonth: <span class="hljs-type">Boolean</span>,
    )</span></span> {
        <span class="hljs-keyword">val</span> position = firstDayOfWeek + (day - <span class="hljs-number">1</span>)
        <span class="hljs-keyword">val</span> row = position / <span class="hljs-number">7</span>
        <span class="hljs-keyword">val</span> col = position % <span class="hljs-number">7</span>

        <span class="hljs-keyword">val</span> x = col * cellWidth + cellWidth / <span class="hljs-number">2</span>
        <span class="hljs-keyword">val</span> y = weekHeight + row * cellHeight + cellHeight * <span class="hljs-number">0.6f</span>

        <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦ä¸ºé€‰ä¸­æ—¥æœŸ</span>
        <span class="hljs-keyword">val</span> isSelected = selectedDate?.let {
            it.<span class="hljs-keyword">get</span>(Calendar.YEAR) == currentYear &amp;&amp;
                    it.<span class="hljs-keyword">get</span>(Calendar.MONTH) == currentMonth &amp;&amp;
                    it.<span class="hljs-keyword">get</span>(Calendar.DAY_OF_MONTH) == day
        } ?: <span class="hljs-literal">false</span>

        <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦ä¸ºä»Šå¤©</span>
        <span class="hljs-keyword">val</span> isToday = today.<span class="hljs-keyword">get</span>(Calendar.YEAR) == currentYear &amp;&amp;
                today.<span class="hljs-keyword">get</span>(Calendar.MONTH) == currentMonth &amp;&amp;
                today.<span class="hljs-keyword">get</span>(Calendar.DAY_OF_MONTH) == day

        <span class="hljs-comment">// ç»˜åˆ¶é€‰ä¸­èƒŒæ™¯</span>
        <span class="hljs-keyword">if</span> (isSelected &amp;&amp; isCurrentMonth) {
            <span class="hljs-keyword">val</span> radius = min(cellWidth, cellHeight) * <span class="hljs-number">0.3f</span>
            canvas.drawCircle(x, y - (paint.textSize / <span class="hljs-number">3</span>), radius, selectedPaint)
        }

        <span class="hljs-comment">// ç»˜åˆ¶ä»Šå¤©åœ†åœˆ</span>
        <span class="hljs-keyword">if</span> (isToday &amp;&amp; isCurrentMonth) {
            <span class="hljs-keyword">val</span> radius = min(cellWidth, cellHeight) * <span class="hljs-number">0.35f</span>
            canvas.drawCircle(x, y - (paint.textSize / <span class="hljs-number">3</span>), radius, todayPaint)
        }

        <span class="hljs-comment">// ç»˜åˆ¶æ—¥æœŸæ–‡å­—</span>
        paint.color = <span class="hljs-keyword">when</span> {
            isSelected -&gt; selectedTextColor
            <span class="hljs-keyword">else</span> -&gt; normalTextColor
        }

        paint.textSize = spToPx(<span class="hljs-number">16f</span>)
        canvas.drawText(day.toString(), x, y, paint)

        <span class="hljs-comment">// æ–°å¢ï¼šç»˜åˆ¶çº¢ç‚¹å’Œç»¿ç‚¹ï¼ˆä»…åœ¨å½“å‰æœˆä»½æ—¥æœŸæ˜¾ç¤ºï¼‰</span>
        <span class="hljs-keyword">if</span> (isCurrentMonth) {
            <span class="hljs-keyword">val</span> dateKey = formatDateKey(currentYear, currentMonth, day)

            <span class="hljs-keyword">val</span> redDotExists = redDotDates.contains(dateKey)
            <span class="hljs-keyword">val</span> greenDotExists = greenDotDates.contains(dateKey)

            <span class="hljs-comment">// è®¡ç®—ç‚¹çš„ä½ç½®</span>
            <span class="hljs-keyword">val</span> dotY = y + paint.textSize / <span class="hljs-number">2</span> + dotSpacing

            <span class="hljs-comment">// å¦‚æœåªæœ‰ä¸€ç§ç‚¹ï¼Œå±…ä¸­æ˜¾ç¤º</span>
            <span class="hljs-keyword">when</span> {
                redDotExists &amp;&amp; greenDotExists -&gt; {
                    <span class="hljs-comment">// ä¸¤ç§ç‚¹éƒ½å­˜åœ¨ï¼Œåœ¨å·¦å³ä¸¤ä¾§æ˜¾ç¤º</span>
                    <span class="hljs-keyword">val</span> leftX = x - dotRadius * <span class="hljs-number">1.5f</span>
                    <span class="hljs-keyword">val</span> rightX = x + dotRadius * <span class="hljs-number">1.5f</span>
                    canvas.drawCircle(leftX, dotY, dotRadius, redDotPaint)
                    canvas.drawCircle(rightX, dotY, dotRadius, greenDotPaint)
                }

                redDotExists -&gt; {
                    <span class="hljs-comment">// åªæœ‰çº¢ç‚¹</span>
                    canvas.drawCircle(x, dotY, dotRadius, redDotPaint)
                }

                greenDotExists -&gt; {
                    <span class="hljs-comment">// åªæœ‰ç»¿ç‚¹</span>
                    canvas.drawCircle(x, dotY, dotRadius, greenDotPaint)
                }
            }
        }
    }

    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">drawOtherMonthDays</span><span class="hljs-params">(canvas: <span class="hljs-type">Canvas</span>, firstDayOfWeek: <span class="hljs-type">Int</span>, daysInMonth: <span class="hljs-type">Int</span>)</span></span> {
        <span class="hljs-comment">// ç»˜åˆ¶ä¸Šä¸ªæœˆåœ¨å½“æœˆæ—¥å†ä¸­æ˜¾ç¤ºçš„æ—¥æœŸ</span>
        <span class="hljs-keyword">if</span> (firstDayOfWeek &gt; <span class="hljs-number">0</span>) {
            <span class="hljs-keyword">val</span> prevMonthCalendar = Calendar.getInstance().apply {
                <span class="hljs-keyword">set</span>(currentYear, currentMonth, <span class="hljs-number">1</span>)
                add(Calendar.MONTH, -<span class="hljs-number">1</span>)
            }
            <span class="hljs-keyword">val</span> daysInPrevMonth = getMonthDays(
                prevMonthCalendar.<span class="hljs-keyword">get</span>(Calendar.YEAR),
                prevMonthCalendar.<span class="hljs-keyword">get</span>(Calendar.MONTH)
            )

            <span class="hljs-keyword">for</span> (i <span class="hljs-keyword">in</span> <span class="hljs-number">0</span> until firstDayOfWeek) {
                <span class="hljs-keyword">val</span> day = daysInPrevMonth - firstDayOfWeek + i + <span class="hljs-number">1</span>
                <span class="hljs-keyword">val</span> row = <span class="hljs-number">0</span>
                <span class="hljs-keyword">val</span> col = i
                drawOtherMonthDate(canvas, row, col, day)
            }
        }

        <span class="hljs-comment">// ç»˜åˆ¶ä¸‹ä¸ªæœˆåœ¨å½“æœˆæ—¥å†ä¸­æ˜¾ç¤ºçš„æ—¥æœŸ</span>
        <span class="hljs-keyword">val</span> totalRows = <span class="hljs-number">6</span>
        <span class="hljs-keyword">val</span> totalCells = totalRows * <span class="hljs-number">7</span>
        <span class="hljs-keyword">val</span> cellsUsedByCurrentMonth = firstDayOfWeek + daysInMonth
        <span class="hljs-keyword">val</span> remainingCells = totalCells - cellsUsedByCurrentMonth

        <span class="hljs-keyword">if</span> (remainingCells &gt; <span class="hljs-number">0</span>) {
            <span class="hljs-keyword">var</span> nextMonthDay = <span class="hljs-number">1</span>
            <span class="hljs-keyword">for</span> (i <span class="hljs-keyword">in</span> <span class="hljs-number">0</span> until remainingCells) {
                <span class="hljs-keyword">val</span> position = cellsUsedByCurrentMonth + i
                <span class="hljs-keyword">val</span> row = position / <span class="hljs-number">7</span>
                <span class="hljs-keyword">val</span> col = position % <span class="hljs-number">7</span>
                drawOtherMonthDate(canvas, row, col, nextMonthDay)
                nextMonthDay++
            }
        }
    }

    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">drawOtherMonthDate</span><span class="hljs-params">(canvas: <span class="hljs-type">Canvas</span>, row: <span class="hljs-type">Int</span>, col: <span class="hljs-type">Int</span>, day: <span class="hljs-type">Int</span>)</span></span> {
        <span class="hljs-keyword">val</span> x = col * cellWidth + cellWidth / <span class="hljs-number">2</span>
        <span class="hljs-keyword">val</span> y = weekHeight + row * cellHeight + cellHeight * <span class="hljs-number">0.6f</span>

        <span class="hljs-comment">// ä¿å­˜å½“å‰ç”»ç¬”çŠ¶æ€</span>
        <span class="hljs-keyword">val</span> originalColor = paint.color
        <span class="hljs-keyword">val</span> originalTextSize = paint.textSize

        <span class="hljs-comment">// ç»˜åˆ¶è·¨æœˆæ—¥æœŸæ–‡å­—ï¼ˆç°è‰²ï¼‰</span>
        paint.color = otherMonthTextColor
        paint.textSize = spToPx(<span class="hljs-number">16f</span>)
        canvas.drawText(day.toString(), x, y, paint)

        <span class="hljs-comment">// æ¢å¤ç”»ç¬”çŠ¶æ€</span>
        paint.color = originalColor
        paint.textSize = originalTextSize
    }

    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">drawGridLines</span><span class="hljs-params">(canvas: <span class="hljs-type">Canvas</span>)</span></span> {
        paint.color = gridLineColor
        paint.strokeWidth = <span class="hljs-number">1f</span>

        <span class="hljs-comment">// ç»˜åˆ¶æ˜ŸæœŸæ åº•éƒ¨åˆ†éš”çº¿</span>
        canvas.drawLine(<span class="hljs-number">0f</span>, weekHeight, width.toFloat(), weekHeight, paint)

        <span class="hljs-comment">// ç»˜åˆ¶å‚ç›´çº¿</span>
        <span class="hljs-keyword">for</span> (i <span class="hljs-keyword">in</span> <span class="hljs-number">1</span> until <span class="hljs-number">7</span>) {
            <span class="hljs-keyword">val</span> x = i * cellWidth
            canvas.drawLine(x, weekHeight, x, height.toFloat(), paint)
        }

        <span class="hljs-comment">// ç»˜åˆ¶æ°´å¹³çº¿</span>
        <span class="hljs-keyword">for</span> (i <span class="hljs-keyword">in</span> <span class="hljs-number">1.</span><span class="hljs-number">.6</span>) {
            <span class="hljs-keyword">val</span> y = weekHeight + i * cellHeight
            canvas.drawLine(<span class="hljs-number">0f</span>, y, width.toFloat(), y, paint)
        }
    }

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onTouchEvent</span><span class="hljs-params">(event: <span class="hljs-type">MotionEvent</span>)</span></span>: <span class="hljs-built_in">Boolean</span> {
        <span class="hljs-keyword">when</span> (event.action) {
            MotionEvent.ACTION_DOWN -&gt; <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
            MotionEvent.ACTION_UP -&gt; {
                handleClick(event.x, event.y)
                <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
            }
        }
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">super</span>.onTouchEvent(event)
    }

    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">handleClick</span><span class="hljs-params">(x: <span class="hljs-type">Float</span>, y: <span class="hljs-type">Float</span>)</span></span> {
        <span class="hljs-keyword">if</span> (y &lt; weekHeight) <span class="hljs-keyword">return</span>

        <span class="hljs-comment">// è®¡ç®—ç‚¹å‡»çš„è¡Œåˆ—</span>
        <span class="hljs-keyword">val</span> row = ((y - weekHeight) / cellHeight).toInt()
        <span class="hljs-keyword">val</span> col = (x / cellWidth).toInt()

        <span class="hljs-keyword">if</span> (row &lt; <span class="hljs-number">0</span> || row &gt;= <span class="hljs-number">6</span> || col &lt; <span class="hljs-number">0</span> || col &gt;= <span class="hljs-number">7</span>) <span class="hljs-keyword">return</span>

        <span class="hljs-comment">// è·å–å½“å‰æœˆä»½ç¬¬ä¸€å¤©æ˜¯æ˜ŸæœŸå‡ </span>
        calendar.<span class="hljs-keyword">set</span>(currentYear, currentMonth, <span class="hljs-number">1</span>)
        <span class="hljs-keyword">val</span> firstDayOfWeek = calendar.<span class="hljs-keyword">get</span>(Calendar.DAY_OF_WEEK) - <span class="hljs-number">1</span>

        <span class="hljs-comment">// è·å–å½“æœˆå¤©æ•°</span>
        <span class="hljs-keyword">val</span> daysInMonth = getMonthDays(currentYear, currentMonth)

        <span class="hljs-comment">// è®¡ç®—ç‚¹å‡»çš„æ—¥æœŸç´¢å¼•</span>
        <span class="hljs-keyword">val</span> position = row * <span class="hljs-number">7</span> + col
        <span class="hljs-keyword">val</span> dayIndex = position - firstDayOfWeek + <span class="hljs-number">1</span>

        <span class="hljs-keyword">if</span> (dayIndex <span class="hljs-keyword">in</span> <span class="hljs-number">1.</span>.daysInMonth) {
            <span class="hljs-comment">// ç‚¹å‡»å½“å‰æœˆä»½æ—¥æœŸ</span>
            selectDate(currentYear, currentMonth, dayIndex)
        }
        <span class="hljs-comment">// è·¨æœˆæ—¥æœŸä¸å¯ç‚¹å‡»ï¼Œä¸åšä»»ä½•å¤„ç†</span>
    }

    <span class="hljs-comment">/**
     * è·å–æœˆä»½å¤©æ•°
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getMonthDays</span><span class="hljs-params">(year: <span class="hljs-type">Int</span>, month: <span class="hljs-type">Int</span>)</span></span>: <span class="hljs-built_in">Int</span> {
        <span class="hljs-keyword">val</span> isLeapYear = (year % <span class="hljs-number">4</span> == <span class="hljs-number">0</span> &amp;&amp; year % <span class="hljs-number">100</span> != <span class="hljs-number">0</span>) || (year % <span class="hljs-number">400</span> == <span class="hljs-number">0</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">when</span> (month) {
            <span class="hljs-number">0</span>, <span class="hljs-number">2</span>, <span class="hljs-number">4</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">9</span>, <span class="hljs-number">11</span> -&gt; <span class="hljs-number">31</span>
            <span class="hljs-number">3</span>, <span class="hljs-number">5</span>, <span class="hljs-number">8</span>, <span class="hljs-number">10</span> -&gt; <span class="hljs-number">30</span>
            <span class="hljs-number">1</span> -&gt; <span class="hljs-keyword">if</span> (isLeapYear) <span class="hljs-number">29</span> <span class="hljs-keyword">else</span> <span class="hljs-number">28</span>
            <span class="hljs-keyword">else</span> -&gt; <span class="hljs-number">0</span>
        }
    }

    <span class="hljs-comment">/**
     * é€‰æ‹©æ—¥æœŸ
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">selectDate</span><span class="hljs-params">(year: <span class="hljs-type">Int</span>, month: <span class="hljs-type">Int</span>, day: <span class="hljs-type">Int</span>)</span></span> {
        <span class="hljs-comment">// å¦‚æœé€‰æ‹©çš„æ—¥æœŸä¸åœ¨å½“å‰æœˆä»½ï¼Œå…ˆåˆ‡æ¢åˆ°è¯¥æœˆä»½</span>
        <span class="hljs-keyword">if</span> (year != currentYear || month != currentMonth) {
            currentYear = year
            currentMonth = month
        }

        <span class="hljs-comment">// è®¾ç½®é€‰ä¸­æ—¥æœŸ</span>
        selectedDate = Calendar.getInstance().apply {
            <span class="hljs-keyword">set</span>(year, month, day)
        }

        <span class="hljs-comment">// é‡ç»˜</span>
        invalidate()

        <span class="hljs-comment">// å›è°ƒ</span>
        onDateClickListener?.invoke(year, month, day)
    }

    <span class="hljs-comment">/**
     * æ–°å¢ï¼šè®¾ç½®çº¢ç‚¹æ—¥æœŸ
     * <span class="hljs-doctag">@param</span> dates æ—¥æœŸåˆ—è¡¨ï¼Œæ ¼å¼: "2024-01-15"
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">setRedDotDates</span><span class="hljs-params">(dates: <span class="hljs-type">List</span>&lt;<span class="hljs-type">String</span>&gt;)</span></span> {
        redDotDates.clear()
        redDotDates.addAll(dates)
        invalidate()
    }

    <span class="hljs-comment">/**
     * æ–°å¢ï¼šè®¾ç½®ç»¿ç‚¹æ—¥æœŸ
     * <span class="hljs-doctag">@param</span> dates æ—¥æœŸåˆ—è¡¨ï¼Œæ ¼å¼: "2024-01-15"
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">setGreenDotDates</span><span class="hljs-params">(dates: <span class="hljs-type">List</span>&lt;<span class="hljs-type">String</span>&gt;)</span></span> {
        greenDotDates.clear()
        greenDotDates.addAll(dates)
        invalidate()
    }

    <span class="hljs-comment">/**
     * æ–°å¢ï¼šæ·»åŠ å•ä¸ªçº¢ç‚¹æ—¥æœŸ
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">addRedDotDate</span><span class="hljs-params">(year: <span class="hljs-type">Int</span>, month: <span class="hljs-type">Int</span>, day: <span class="hljs-type">Int</span>)</span></span> {
        <span class="hljs-keyword">val</span> dateKey = formatDateKey(year, month, day)
        redDotDates.add(dateKey)
        invalidate()
    }

    <span class="hljs-comment">/**
     * æ–°å¢ï¼šæ·»åŠ å•ä¸ªç»¿ç‚¹æ—¥æœŸ
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">addGreenDotDate</span><span class="hljs-params">(year: <span class="hljs-type">Int</span>, month: <span class="hljs-type">Int</span>, day: <span class="hljs-type">Int</span>)</span></span> {
        <span class="hljs-keyword">val</span> dateKey = formatDateKey(year, month, day)
        greenDotDates.add(dateKey)
        invalidate()
    }

    <span class="hljs-comment">/**
     * æ–°å¢ï¼šç§»é™¤çº¢ç‚¹æ—¥æœŸ
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">removeRedDotDate</span><span class="hljs-params">(year: <span class="hljs-type">Int</span>, month: <span class="hljs-type">Int</span>, day: <span class="hljs-type">Int</span>)</span></span> {
        <span class="hljs-keyword">val</span> dateKey = formatDateKey(year, month, day)
        redDotDates.remove(dateKey)
        invalidate()
    }

    <span class="hljs-comment">/**
     * æ–°å¢ï¼šç§»é™¤ç»¿ç‚¹æ—¥æœŸ
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">removeGreenDotDate</span><span class="hljs-params">(year: <span class="hljs-type">Int</span>, month: <span class="hljs-type">Int</span>, day: <span class="hljs-type">Int</span>)</span></span> {
        <span class="hljs-keyword">val</span> dateKey = formatDateKey(year, month, day)
        greenDotDates.remove(dateKey)
        invalidate()
    }

    <span class="hljs-comment">/**
     * æ–°å¢ï¼šæ¸…ç©ºæ‰€æœ‰çº¢ç‚¹
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">clearRedDotDates</span><span class="hljs-params">()</span></span> {
        redDotDates.clear()
        invalidate()
    }

    <span class="hljs-comment">/**
     * æ–°å¢ï¼šæ¸…ç©ºæ‰€æœ‰ç»¿ç‚¹
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">clearGreenDotDates</span><span class="hljs-params">()</span></span> {
        greenDotDates.clear()
        invalidate()
    }

    <span class="hljs-comment">/**
     * æ–°å¢ï¼šæ ¼å¼åŒ–æ—¥æœŸé”®
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">formatDateKey</span><span class="hljs-params">(year: <span class="hljs-type">Int</span>, month: <span class="hljs-type">Int</span>, day: <span class="hljs-type">Int</span>)</span></span>: String {
        <span class="hljs-keyword">return</span> String.format(<span class="hljs-string">"%d-%02d-%02d"</span>, year, month + <span class="hljs-number">1</span>, day)
    }

    <span class="hljs-comment">/**
     * è®¾ç½®å½“å‰æ˜¾ç¤ºçš„æœˆä»½
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">setCurrentMonth</span><span class="hljs-params">(year: <span class="hljs-type">Int</span>, month: <span class="hljs-type">Int</span>)</span></span> {
        currentYear = year
        currentMonth = month
        invalidate()
    }

    <span class="hljs-comment">/**
     * è·å–å½“å‰æ˜¾ç¤ºçš„æœˆä»½
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getCurrentMonth</span><span class="hljs-params">()</span></span>: Pair&lt;<span class="hljs-built_in">Int</span>, <span class="hljs-built_in">Int</span>&gt; {
        <span class="hljs-keyword">return</span> Pair(currentYear, currentMonth)
    }

    <span class="hljs-comment">/**
     * è·å–é€‰ä¸­çš„æ—¥æœŸ
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getSelectedDate</span><span class="hljs-params">()</span></span>: Triple&lt;<span class="hljs-built_in">Int</span>, <span class="hljs-built_in">Int</span>, <span class="hljs-built_in">Int</span>&gt;? {
        <span class="hljs-keyword">return</span> selectedDate?.let {
            Triple(
                it.<span class="hljs-keyword">get</span>(Calendar.YEAR),
                it.<span class="hljs-keyword">get</span>(Calendar.MONTH),
                it.<span class="hljs-keyword">get</span>(Calendar.DAY_OF_MONTH)
            )
        }
    }

    <span class="hljs-comment">/**
     * åˆ‡æ¢åˆ°ä¸Šä¸ªæœˆ
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">previousMonth</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">var</span> newYear = currentYear
        <span class="hljs-keyword">var</span> newMonth = currentMonth - <span class="hljs-number">1</span>

        <span class="hljs-keyword">if</span> (newMonth &lt; <span class="hljs-number">0</span>) {
            newYear--
            newMonth = <span class="hljs-number">11</span>
        }

        setCurrentMonth(newYear, newMonth)
    }

    <span class="hljs-comment">/**
     * åˆ‡æ¢åˆ°ä¸‹ä¸ªæœˆ
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">nextMonth</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">var</span> newYear = currentYear
        <span class="hljs-keyword">var</span> newMonth = currentMonth + <span class="hljs-number">1</span>

        <span class="hljs-keyword">if</span> (newMonth &gt; <span class="hljs-number">11</span>) {
            newYear++
            newMonth = <span class="hljs-number">0</span>
        }

        setCurrentMonth(newYear, newMonth)
    }

    <span class="hljs-comment">/**
     * å›åˆ°ä»Šå¤©
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">goToToday</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">val</span> now = Calendar.getInstance()
        currentYear = now.<span class="hljs-keyword">get</span>(Calendar.YEAR)
        currentMonth = now.<span class="hljs-keyword">get</span>(Calendar.MONTH)
        selectedDate = now.clone() <span class="hljs-keyword">as</span> Calendar
        invalidate()

        <span class="hljs-comment">// å›è°ƒä»Šå¤©çš„æ—¥æœŸ</span>
        onDateClickListener?.invoke(
            currentYear,
            currentMonth,
            now.<span class="hljs-keyword">get</span>(Calendar.DAY_OF_MONTH)
        )
    }

    <span class="hljs-comment">/**
     * è®¾ç½®æ—¥æœŸç‚¹å‡»ç›‘å¬å™¨
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">setOnDateClickListener</span><span class="hljs-params">(listener: (<span class="hljs-type">year</span>: <span class="hljs-type">Int</span>, <span class="hljs-type">month</span>: <span class="hljs-type">Int</span>, <span class="hljs-type">day</span>: <span class="hljs-type">Int</span>) -&gt; <span class="hljs-type">Unit</span>)</span></span> {
        <span class="hljs-keyword">this</span>.onDateClickListener = listener
    }

    <span class="hljs-comment">/**
     * spè½¬px
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">spToPx</span><span class="hljs-params">(sp: <span class="hljs-type">Float</span>)</span></span>: <span class="hljs-built_in">Float</span> {
        <span class="hljs-keyword">return</span> sp * resources.displayMetrics.scaledDensity
    }

    <span class="hljs-comment">/**
     * æ–°å¢ï¼šdpè½¬px
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">dpToPx</span><span class="hljs-params">(dp: <span class="hljs-type">Float</span>)</span></span>: <span class="hljs-built_in">Float</span> {
        <span class="hljs-keyword">return</span> dp * resources.displayMetrics.density
    }
}
</code></pre>
<h2 data-id="heading-2">æ ·ä¾‹å¸ƒå±€<code>activity_main.xml</code></h2>
<pre><code class="hljs language-ini" lang="ini">&lt;?xml <span class="hljs-attr">version</span>=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"utf-8"</span>?&gt;
&lt;LinearLayout xmlns:<span class="hljs-attr">android</span>=<span class="hljs-string">"http://schemas.android.com/apk/res/android"</span>
    xmlns:<span class="hljs-attr">tools</span>=<span class="hljs-string">"http://schemas.android.com/tools"</span>
    android:<span class="hljs-attr">id</span>=<span class="hljs-string">"@+id/main"</span>
    android:<span class="hljs-attr">layout_width</span>=<span class="hljs-string">"match_parent"</span>
    android:<span class="hljs-attr">layout_height</span>=<span class="hljs-string">"match_parent"</span>
    android:<span class="hljs-attr">orientation</span>=<span class="hljs-string">"vertical"</span>
    tools:<span class="hljs-attr">context</span>=<span class="hljs-string">".MainActivity"</span>&gt;

    &lt;!-- æ ‡é¢˜ --&gt;
    &lt;TextView
        android:<span class="hljs-attr">layout_width</span>=<span class="hljs-string">"match_parent"</span>
        android:<span class="hljs-attr">layout_height</span>=<span class="hljs-string">"wrap_content"</span>
        android:<span class="hljs-attr">gravity</span>=<span class="hljs-string">"center"</span>
        android:<span class="hljs-attr">text</span>=<span class="hljs-string">"ç®€æ˜“æ—¥å†"</span>
        android:<span class="hljs-attr">textSize</span>=<span class="hljs-string">"18sp"</span>
        android:<span class="hljs-attr">textStyle</span>=<span class="hljs-string">"bold"</span> /&gt;

    &lt;!-- æœˆä»½å¯¼èˆª --&gt;
    &lt;LinearLayout
        android:<span class="hljs-attr">layout_width</span>=<span class="hljs-string">"match_parent"</span>
        android:<span class="hljs-attr">layout_height</span>=<span class="hljs-string">"wrap_content"</span>
        android:<span class="hljs-attr">gravity</span>=<span class="hljs-string">"center"</span>
        android:<span class="hljs-attr">orientation</span>=<span class="hljs-string">"horizontal"</span>&gt;

        &lt;Button
            android:<span class="hljs-attr">id</span>=<span class="hljs-string">"@+id/prevMonthButton"</span>
            android:<span class="hljs-attr">layout_width</span>=<span class="hljs-string">"wrap_content"</span>
            android:<span class="hljs-attr">layout_height</span>=<span class="hljs-string">"wrap_content"</span>
            android:<span class="hljs-attr">text</span>=<span class="hljs-string">"â—€ ä¸Šä¸ªæœˆ"</span> /&gt;

        &lt;TextView
            android:<span class="hljs-attr">id</span>=<span class="hljs-string">"@+id/monthYearTextView"</span>
            android:<span class="hljs-attr">layout_width</span>=<span class="hljs-string">"wrap_content"</span>
            android:<span class="hljs-attr">layout_height</span>=<span class="hljs-string">"wrap_content"</span>
            android:<span class="hljs-attr">layout_marginHorizontal</span>=<span class="hljs-string">"16dp"</span>
            android:<span class="hljs-attr">text</span>=<span class="hljs-string">"2024å¹´2æœˆ"</span>
            android:<span class="hljs-attr">textSize</span>=<span class="hljs-string">"18sp"</span>
            android:<span class="hljs-attr">textStyle</span>=<span class="hljs-string">"bold"</span> /&gt;

        &lt;Button
            android:<span class="hljs-attr">id</span>=<span class="hljs-string">"@+id/nextMonthButton"</span>
            android:<span class="hljs-attr">layout_width</span>=<span class="hljs-string">"wrap_content"</span>
            android:<span class="hljs-attr">layout_height</span>=<span class="hljs-string">"wrap_content"</span>
            android:<span class="hljs-attr">text</span>=<span class="hljs-string">"ä¸‹ä¸ªæœˆ â–¶"</span> /&gt;
    &lt;/LinearLayout&gt;

    &lt;!-- æ—¥å†è§†å›¾ --&gt;
    &lt;cn.nio.calendar.SimpleCalendarView
        android:<span class="hljs-attr">id</span>=<span class="hljs-string">"@+id/calendarView"</span>
        android:<span class="hljs-attr">layout_width</span>=<span class="hljs-string">"match_parent"</span>
        android:<span class="hljs-attr">layout_height</span>=<span class="hljs-string">"wrap_content"</span> /&gt;

    &lt;!-- é€‰ä¸­çš„æ—¥æœŸ --&gt;
    &lt;TextView
        android:<span class="hljs-attr">id</span>=<span class="hljs-string">"@+id/selectedDateTextView"</span>
        android:<span class="hljs-attr">layout_width</span>=<span class="hljs-string">"match_parent"</span>
        android:<span class="hljs-attr">layout_height</span>=<span class="hljs-string">"wrap_content"</span>
        android:<span class="hljs-attr">gravity</span>=<span class="hljs-string">"center"</span>
        android:<span class="hljs-attr">text</span>=<span class="hljs-string">"é€‰ä¸­: 2024å¹´2æœˆ15æ—¥"</span>
        android:<span class="hljs-attr">textSize</span>=<span class="hljs-string">"13sp"</span>
        android:<span class="hljs-attr">textStyle</span>=<span class="hljs-string">"bold"</span> /&gt;

    &lt;!-- å›åˆ°ä»Šå¤©æŒ‰é’® --&gt;
    &lt;Button
        android:<span class="hljs-attr">id</span>=<span class="hljs-string">"@+id/todayButton"</span>
        android:<span class="hljs-attr">layout_width</span>=<span class="hljs-string">"match_parent"</span>
        android:<span class="hljs-attr">layout_height</span>=<span class="hljs-string">"wrap_content"</span>
        android:<span class="hljs-attr">layout_marginHorizontal</span>=<span class="hljs-string">"12dp"</span>
        android:<span class="hljs-attr">text</span>=<span class="hljs-string">"å›åˆ°ä»Šå¤©"</span> /&gt;


&lt;/LinearLayout&gt;
</code></pre>
<h2 data-id="heading-3">æ ·ä¾‹<code>MainActivity.kt</code></h2>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">package</span> cn.nio.calendar

<span class="hljs-keyword">import</span> android.os.Bundle
<span class="hljs-keyword">import</span> android.widget.Button
<span class="hljs-keyword">import</span> android.widget.TextView
<span class="hljs-keyword">import</span> androidx.activity.enableEdgeToEdge
<span class="hljs-keyword">import</span> androidx.appcompat.app.AppCompatActivity
<span class="hljs-keyword">import</span> androidx.core.view.ViewCompat
<span class="hljs-keyword">import</span> androidx.core.view.WindowInsetsCompat
<span class="hljs-keyword">import</span> java.text.SimpleDateFormat
<span class="hljs-keyword">import</span> java.util.Calendar
<span class="hljs-keyword">import</span> java.util.Locale

<span class="hljs-comment">/**
 * ç®€æ˜“æ—¥å†
 */</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MainActivity</span> : <span class="hljs-type">AppCompatActivity</span>() {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">lateinit</span> <span class="hljs-keyword">var</span> calendarView: SimpleCalendarView
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">lateinit</span> <span class="hljs-keyword">var</span> monthYearTextView: TextView
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">lateinit</span> <span class="hljs-keyword">var</span> selectedDateTextView: TextView
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">lateinit</span> <span class="hljs-keyword">var</span> prevMonthButton: Button
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">lateinit</span> <span class="hljs-keyword">var</span> nextMonthButton: Button
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">lateinit</span> <span class="hljs-keyword">var</span> todayButton: Button

    <span class="hljs-comment">//    private val monthFormat = SimpleDateFormat("yyyyå¹´MMæœˆ", Locale.getDefault())</span>
<span class="hljs-comment">//    private val dateFormat = SimpleDateFormat("yyyyå¹´MMæœˆddæ—¥", Locale.getDefault())</span>
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreate</span><span class="hljs-params">(savedInstanceState: <span class="hljs-type">Bundle</span>?)</span></span> {
        <span class="hljs-keyword">super</span>.onCreate(savedInstanceState)
        enableEdgeToEdge()
        setContentView(R.layout.activity_main)
        ViewCompat.setOnApplyWindowInsetsListener(findViewById(R.id.main)) { v, insets -&gt;
            <span class="hljs-keyword">val</span> systemBars = insets.getInsets(WindowInsetsCompat.Type.systemBars())
            v.setPadding(systemBars.left, systemBars.top, systemBars.right, systemBars.bottom)
            insets
        }

        <span class="hljs-comment">// åˆå§‹åŒ–è§†å›¾</span>
        calendarView = findViewById(R.id.calendarView)
        monthYearTextView = findViewById(R.id.monthYearTextView)
        selectedDateTextView = findViewById(R.id.selectedDateTextView)
        prevMonthButton = findViewById(R.id.prevMonthButton)
        nextMonthButton = findViewById(R.id.nextMonthButton)
        todayButton = findViewById(R.id.todayButton)

        <span class="hljs-comment">// åˆå§‹åŒ–æ˜¾ç¤º</span>
        updateMonthYearText()
        updateSelectedDateText()

        <span class="hljs-comment">// ç‚¹å‡»é€‰ä¸­æ—¥æœŸ</span>
        calendarView.setOnDateClickListener { year, month, day -&gt;
            updateSelectedDateText()
        }

        <span class="hljs-comment">// ä¸Šä¸ªæœˆ</span>
        prevMonthButton.setOnClickListener {
            calendarView.previousMonth()
            updateMonthYearText()
        }
        <span class="hljs-comment">// ä¸‹ä¸ªæœˆ</span>
        nextMonthButton.setOnClickListener {
            calendarView.nextMonth()
            updateMonthYearText()
        }
        <span class="hljs-comment">// å›åˆ°ä»Šå¤©</span>
        todayButton.setOnClickListener {
            calendarView.goToToday()
            updateMonthYearText()
            updateSelectedDateText()
        }
        calculatePreviousDaysWithCalendar()
    }

    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">updateMonthYearText</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">val</span> (year, month) = calendarView.getCurrentMonth()
        monthYearTextView.text = <span class="hljs-string">"<span class="hljs-subst">${year}</span>å¹´<span class="hljs-subst">${month + <span class="hljs-number">1</span>}</span>æœˆ"</span>
    }

    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">updateSelectedDateText</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">val</span> selectedDate = calendarView.getSelectedDate()
        selectedDate?.let { (year, month, day) -&gt;
            selectedDateTextView.text = <span class="hljs-string">"é€‰ä¸­: <span class="hljs-subst">${year}</span>å¹´<span class="hljs-subst">${month + <span class="hljs-number">1</span>}</span>æœˆ<span class="hljs-subst">${day}</span>æ—¥"</span>
        }
    }

    <span class="hljs-comment">/**
     *  è®¾ç½®çº¢ç‚¹ç»¿ç‚¹æ—¥æœŸ
     *
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">calculatePreviousDaysWithCalendar</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">val</span> calendar = Calendar.getInstance()
        <span class="hljs-keyword">val</span> sdf = SimpleDateFormat(<span class="hljs-string">"yyyy-MM-dd"</span>, Locale.getDefault()) <span class="hljs-comment">// çº¿ç¨‹ä¸å®‰å…¨ï¼Œå¤šçº¿ç¨‹éœ€æ³¨æ„</span>

        <span class="hljs-comment">// è®¡ç®—å‰1å¤©</span>
        calendar.add(Calendar.DAY_OF_MONTH, -<span class="hljs-number">1</span>)
        <span class="hljs-keyword">val</span> previous1DayStr = sdf.format(calendar.time)
        <span class="hljs-comment">// è®¡ç®—å‰2å¤©ï¼ˆåœ¨åŸåŸºç¡€ä¸Šå†å‡1ï¼‰</span>
        calendar.add(Calendar.DAY_OF_MONTH, -<span class="hljs-number">1</span>)
        <span class="hljs-keyword">val</span> previous2DayStr = sdf.format(calendar.time)
        <span class="hljs-comment">// è®¡ç®—å‰3å¤©</span>
        calendar.add(Calendar.DAY_OF_MONTH, -<span class="hljs-number">1</span>)
        <span class="hljs-keyword">val</span> previous3DayStr = sdf.format(calendar.time)

        <span class="hljs-comment">// é‡ç½®Calendaråˆ°å½“å‰æ—¶é—´ï¼ˆå¯é€‰ï¼‰</span>
        calendar.add(Calendar.DAY_OF_MONTH, <span class="hljs-number">3</span>)

        println(<span class="hljs-string">"å½“å‰æ—¥æœŸï¼š<span class="hljs-subst">${sdf.format(Calendar.getInstance().time)}</span>"</span>)
        println(<span class="hljs-string">"å‰1å¤©ï¼š<span class="hljs-variable">$previous1DayStr</span>"</span>)
        println(<span class="hljs-string">"å‰2å¤©ï¼š<span class="hljs-variable">$previous2DayStr</span>"</span>)
        println(<span class="hljs-string">"å‰3å¤©ï¼š<span class="hljs-variable">$previous3DayStr</span>"</span>)
        calendarView.setGreenDotDates(listOf(previous1DayStr, previous3DayStr))
        calendarView.setRedDotDates(listOf(previous2DayStr))
    }

}
</code></pre>
<h2 data-id="heading-4">æ•ˆæœå±•ç¤º</h2>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9d6c727db18440388ec3692f986b832b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOO5b6A5ZOq6L656LWw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766975159&amp;x-signature=BcwkkKd7sz9gpiujJpXtA37S1W8%3D" alt="Screen_recording_20251222_100250 00_00_00-00_00_30.gif" width="50%" loading="lazy"/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»é›¶å¼€å§‹ï¼šMCPæ•°æ®åº“åŠ©æ‰‹ï¼ˆä¸€ï¼‰- åŸºç¡€æ­å»º]]></title>    <link>https://juejin.cn/post/7585866811717074971</link>    <guid>https://juejin.cn/post/7585866811717074971</guid>    <pubDate>2025-12-22T02:22:22.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7585866811717074971" data-draft-id="7585897699602956314" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»é›¶å¼€å§‹ï¼šMCPæ•°æ®åº“åŠ©æ‰‹ï¼ˆä¸€ï¼‰- åŸºç¡€æ­å»º"/> <meta itemprop="keywords" content="MCP"/> <meta itemprop="datePublished" content="2025-12-22T02:22:22.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="çº¢é¼»å­æ—¶ä»£"/> <meta itemprop="url" content="https://juejin.cn/user/1743149753974384"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»é›¶å¼€å§‹ï¼šMCPæ•°æ®åº“åŠ©æ‰‹ï¼ˆä¸€ï¼‰- åŸºç¡€æ­å»º
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1743149753974384/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    çº¢é¼»å­æ—¶ä»£
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-22T02:22:22.000Z" title="Mon Dec 22 2025 02:22:22 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    5
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">MCPæ˜¯ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆè¦ç”¨å®ƒï¼Ÿ</h2>
<p>MCPå…¨ç§°Model Context Protocolï¼Œç®€å•è¯´å°±æ˜¯è®©AIåŠ©æ‰‹èƒ½å¤Ÿè°ƒç”¨å¤–éƒ¨å·¥å…·çš„æ ‡å‡†åè®®ã€‚æƒ³è±¡ä¸€ä¸‹ï¼Œå¦‚æœAIåªèƒ½èŠå¤©ï¼Œé‚£å°±åƒä¸€ä¸ªå¾ˆèªæ˜ä½†æ²¡æœ‰æ‰‹çš„äººã€‚MCPå°±æ˜¯ç»™AIè£…ä¸Šäº†"æ‰‹"ï¼Œè®©å®ƒèƒ½å¤ŸçœŸæ­£æ“ä½œæ•°æ®åº“ã€æ–‡ä»¶ç³»ç»Ÿç­‰ç­‰ã€‚</p>
<p>å¯¹äºæ•°æ®åº“æ“ä½œæ¥è¯´ï¼ŒMCPçš„ä¼˜åŠ¿ç‰¹åˆ«æ˜æ˜¾ï¼š</p>
<ul>
<li><strong>ä¸€é—®å³ç­”</strong>ï¼šç›´æ¥é—®AIå°±èƒ½è·å–æ•°æ®åº“ä¿¡æ¯</li>
<li><strong>å®‰å…¨å¯æ§</strong>ï¼šAIåªèƒ½è°ƒç”¨ä½ é¢„è®¾çš„å·¥å…·å‡½æ•°</li>
<li><strong>æ™ºèƒ½åˆ†æ</strong>ï¼šAIèƒ½ç†è§£æ•°æ®å…³ç³»ï¼Œç»™å‡ºæœ‰ç”¨çš„å»ºè®®</li>
</ul>
<h2 data-id="heading-1">ç¬¬ä¸€æ­¥ï¼šé¡¹ç›®ç»“æ„æ­å»º</h2>
<p>å’±ä»¬å…ˆæŠŠé¡¹ç›®çš„éª¨æ¶æ­èµ·æ¥ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">v1/
â”œâ”€â”€ pyproject.toml            <span class="hljs-comment"># uv é¡¹ç›®é…ç½®</span>
â”œâ”€â”€ README.md                <span class="hljs-comment"># é¡¹ç›®è¯´æ˜</span>
â”œâ”€â”€ src/
â”‚   â””â”€â”€ mcp_datatools/       <span class="hljs-comment"># ä¸»åŒ…</span>
â”‚       â”œâ”€â”€ __init__.py
â”‚       â”œâ”€â”€ server.py        <span class="hljs-comment"># MCP æœåŠ¡å™¨</span>
â”‚       â””â”€â”€ database.py      <span class="hljs-comment"># æ•°æ®åº“ç®¡ç†</span>
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ init_scripts/
â”‚   â”‚   â””â”€â”€ init_sqlite_db.py   <span class="hljs-comment"># åˆå§‹åŒ– SQLite æ•°æ®åº“è„šæœ¬</span>
â”‚   â””â”€â”€ test.db             <span class="hljs-comment"># SQLite æµ‹è¯•æ•°æ®åº“</span>
â””â”€â”€ tests/                  <span class="hljs-comment"># æµ‹è¯•æ–‡ä»¶ç›®å½•</span>
</code></pre>
<p>ä¸ºä»€ä¹ˆè¿™æ ·è®¾è®¡ï¼Ÿ</p>
<ul>
<li>ä½¿ç”¨ <code>uv</code> ä½œä¸ºåŒ…ç®¡ç†å™¨ï¼Œæ›´ç°ä»£æ›´å¿«é€Ÿ</li>
<li><code>src/</code> ç›®å½•è®©ä»£ç ç»“æ„æ›´æ¸…æ™°</li>
<li><code>data/</code> å­˜æ”¾æµ‹è¯•æ•°æ®å’Œåˆå§‹åŒ–è„šæœ¬</li>
<li><code>tests/</code> ç›®å½•ä¸ºåç»­å•å…ƒæµ‹è¯•é¢„ç•™</li>
<li>é…ç½®æ–‡ä»¶ç®€æ´ï¼Œä¸“æ³¨æ ¸å¿ƒåŠŸèƒ½</li>
</ul>
<h2 data-id="heading-2">ç¬¬äºŒæ­¥ï¼šç¯å¢ƒé…ç½®å’Œä¾èµ–</h2>
<p>å’±ä»¬ä½¿ç”¨ç°ä»£çš„ <code>uv</code> åŒ…ç®¡ç†å™¨æ¥ç®¡ç†ä¾èµ–ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å®‰è£… uv (å¦‚æœè¿˜æ²¡æœ‰å®‰è£…)</span>
curl -LsSf https://astral.sh/uv/install.sh | sh

<span class="hljs-comment"># è¿›å…¥é¡¹ç›®ç›®å½•</span>
<span class="hljs-built_in">cd</span> v1

<span class="hljs-comment"># å®‰è£…ä¾èµ–</span>
uv <span class="hljs-built_in">sync</span>
</code></pre>
<p><code>pyproject.toml</code> æ–‡ä»¶å†…å®¹ï¼š</p>
<pre><code class="hljs language-toml" lang="toml"><span class="hljs-section">[project]</span>
<span class="hljs-attr">name</span> = <span class="hljs-string">"mcp-datatools"</span>
<span class="hljs-attr">version</span> = <span class="hljs-string">"0.1.0"</span>
<span class="hljs-attr">description</span> = <span class="hljs-string">"A MCP server that connects to your database"</span>
<span class="hljs-attr">requires-python</span> = <span class="hljs-string">"&gt;=3.10"</span>

<span class="hljs-attr">dependencies</span> = [
    <span class="hljs-string">"mcp&gt;=1.0.0"</span>,
    <span class="hljs-string">"sqlalchemy&gt;=2.0.0"</span>,
]

<span class="hljs-section">[build-system]</span>
<span class="hljs-attr">requires</span> = [<span class="hljs-string">"hatchling"</span>]
<span class="hljs-attr">build-backend</span> = <span class="hljs-string">"hatchling.build"</span>
</code></pre>
<p>ä¸ºä»€ä¹ˆé€‰æ‹© <code>uv</code>ï¼Ÿ</p>
<ul>
<li><strong>é€Ÿåº¦æå¿«</strong>ï¼šæ¯” pip å¿« 10-100 å€</li>
<li><strong>ä¾èµ–è§£æ</strong>ï¼šæ›´æ™ºèƒ½çš„ä¾èµ–ç®¡ç†</li>
<li><strong>é¡¹ç›®éš”ç¦»</strong>ï¼šè‡ªåŠ¨åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ</li>
<li><strong>ç°ä»£æ ‡å‡†</strong>ï¼šæ”¯æŒæœ€æ–°çš„ Python åŒ…ç®¡ç†æ ‡å‡†</li>
</ul>
<h2 data-id="heading-3">ç¬¬ä¸‰æ­¥ï¼šæ•°æ®åº“è¿æ¥ç®¡ç†</h2>
<p>æ•°æ®åº“è¿æ¥æ˜¯æ•´ä¸ªé¡¹ç›®çš„åŸºç¡€ï¼Œå’±ä»¬å…ˆæŠŠè¿™éƒ¨åˆ†æå®šã€‚æˆ‘è®¾è®¡äº†ä¸€ä¸ª<code>DatabaseManager</code>ç±»æ¥ç®¡ç†è¿æ¥ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-string">"""
database.py - æ•°æ®åº“ç®¡ç†æ¨¡å—
"""</span>

<span class="hljs-keyword">import</span> os
<span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> <span class="hljs-type">List</span>
<span class="hljs-keyword">from</span> contextlib <span class="hljs-keyword">import</span> contextmanager
<span class="hljs-keyword">from</span> sqlalchemy <span class="hljs-keyword">import</span> create_engine,inspect,text
<span class="hljs-keyword">from</span> sqlalchemy.exc <span class="hljs-keyword">import</span> SQLAlchemyError
<span class="hljs-keyword">from</span> mcp.server.fastmcp.utilities.logging <span class="hljs-keyword">import</span> get_logger


logger = get_logger(__name__)

<span class="hljs-keyword">class</span> <span class="hljs-title class_">DatabaseManager</span>:
    <span class="hljs-string">"""æ•°æ®åº“ç®¡ç†å™¨"""</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):
        <span class="hljs-string">"""åˆå§‹åŒ–æ•°æ®åº“ç®¡ç†å™¨"""</span>
        
        self.database_url = os.getenv(<span class="hljs-string">"DB_URL"</span>)
        self.engine = <span class="hljs-literal">None</span>
        self._connect()


    <span class="hljs-keyword">def</span> <span class="hljs-title function_">_connect</span>(<span class="hljs-params">self</span>) -&gt; <span class="hljs-literal">None</span>:
        <span class="hljs-string">"""è¿æ¥æ•°æ®åº“"""</span>
        <span class="hljs-keyword">try</span>:
            self.engine = create_engine(self.database_url, echo=<span class="hljs-literal">False</span>)
            logger.info(<span class="hljs-string">f"æˆåŠŸè¿æ¥åˆ°æ•°æ®åº“: <span class="hljs-subst">{self.database_url}</span>"</span>)
        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
            logger.error(<span class="hljs-string">f"è¿æ¥æ•°æ®åº“æ—¶å‡ºé”™: <span class="hljs-subst">{<span class="hljs-built_in">str</span>(e)}</span>"</span>)
            <span class="hljs-keyword">raise</span>

<span class="hljs-meta">    @contextmanager</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_connection</span>(<span class="hljs-params">self</span>):
        <span class="hljs-string">"""è·å–æ•°æ®åº“è¿æ¥çš„ä¸Šä¸‹æ–‡ç®¡ç†å™¨"""</span>
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> self.engine:
            <span class="hljs-keyword">raise</span> RuntimeError(<span class="hljs-string">"æ•°æ®åº“æœªè¿æ¥"</span>)
        
        conn = self.engine.connect()
        <span class="hljs-keyword">try</span>:
            <span class="hljs-keyword">yield</span> conn
        <span class="hljs-keyword">finally</span>:
            conn.close()
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_table_names</span>(<span class="hljs-params">self</span>) -&gt; <span class="hljs-type">List</span>[<span class="hljs-built_in">str</span>]:
        <span class="hljs-string">"""è·å–æ•°æ®åº“ä¸­çš„æ‰€æœ‰è¡¨å"""</span>
        <span class="hljs-keyword">try</span>:
            <span class="hljs-keyword">with</span> self.get_connection() <span class="hljs-keyword">as</span> conn:
                inspector = inspect(conn)
                table_names = inspector.get_table_names()
                <span class="hljs-keyword">return</span> table_names
        <span class="hljs-keyword">except</span> SQLAlchemyError <span class="hljs-keyword">as</span> e:
            logger.error(<span class="hljs-string">f"è·å–è¡¨åå¤±è´¥: <span class="hljs-subst">{e}</span>"</span>)
            <span class="hljs-keyword">raise</span>

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">test_connection</span>(<span class="hljs-params">self</span>) -&gt; <span class="hljs-built_in">bool</span>:
        <span class="hljs-string">"""æµ‹è¯•æ•°æ®åº“è¿æ¥"""</span>
        <span class="hljs-keyword">try</span>:
            <span class="hljs-keyword">with</span> self.get_connection() <span class="hljs-keyword">as</span> conn:

                result = conn.execute(text(<span class="hljs-string">"SELECT 1"</span>)).scalar()
                <span class="hljs-keyword">return</span> result == <span class="hljs-number">1</span>
        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
            logger.error(<span class="hljs-string">f"æµ‹è¯•æ•°æ®åº“è¿æ¥æ—¶å‡ºé”™: <span class="hljs-subst">{<span class="hljs-built_in">str</span>(e)}</span>"</span>)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span>

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_db_info</span>(<span class="hljs-params">self</span>) -&gt; <span class="hljs-built_in">str</span>:
        <span class="hljs-keyword">try</span>:
            tables = self.get_table_names()
            <span class="hljs-keyword">return</span> <span class="hljs-string">f"æ•°æ®åº“URL: <span class="hljs-subst">{self.database_url}</span>\nå…±æœ‰ <span class="hljs-subst">{<span class="hljs-built_in">len</span>(tables)}</span> ä¸ªè¡¨"</span>
        <span class="hljs-keyword">except</span> Exception:
            <span class="hljs-keyword">return</span> <span class="hljs-string">f"æ•°æ®åº“URL: <span class="hljs-subst">{self.database_url}</span>\næ•°æ®åº“è¿æ¥å¤±è´¥"</span>

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">close</span>(<span class="hljs-params">self</span>) -&gt; <span class="hljs-literal">None</span>:
        <span class="hljs-string">"""å…³é—­æ•°æ®åº“è¿æ¥"""</span>
        <span class="hljs-keyword">if</span> self.engine:
            self.engine.dispose()
            logger.info(<span class="hljs-string">"æ•°æ®åº“è¿æ¥å·²å…³é—­"</span>)
        
</code></pre>
<h2 data-id="heading-4">ç¬¬å››æ­¥ï¼šç¬¬ä¸€ä¸ªMCPå·¥å…·å‡½æ•°</h2>
<p>ç°åœ¨æ˜¯æœ€é‡è¦çš„éƒ¨åˆ† - å®ç°ç¬¬ä¸€ä¸ªMCPå·¥å…·å‡½æ•°<code>list_tables()</code>ï¼</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-string">"""
server.py - MCPæœåŠ¡å™¨ä¸»æ–‡ä»¶
"""</span>

<span class="hljs-keyword">import</span> os
<span class="hljs-keyword">from</span> mcp.server.fastmcp <span class="hljs-keyword">import</span> FastMCP
<span class="hljs-keyword">from</span> mcp.server.fastmcp.utilities.logging <span class="hljs-keyword">import</span> get_logger
<span class="hljs-keyword">from</span> .database <span class="hljs-keyword">import</span> DatabaseManager

mcp = FastMCP(<span class="hljs-string">"MCP DataTools"</span>)
logger = get_logger(__name__)
db_manager = <span class="hljs-literal">None</span>

<span class="hljs-keyword">def</span> <span class="hljs-title function_">get_database_manager</span>():
    <span class="hljs-string">"""è·å–æ•°æ®åº“ç®¡ç†å™¨å®ä¾‹"""</span>
    <span class="hljs-keyword">global</span> db_manager
    <span class="hljs-keyword">if</span> db_manager <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>:
        db_manager = DatabaseManager()
    <span class="hljs-keyword">return</span> db_manager
    
<span class="hljs-meta">@mcp.tool(<span class="hljs-params">description=<span class="hljs-string">"æŸ¥è¯¢æ•°æ®åº“ä¸­çš„æ‰€æœ‰è¡¨"</span></span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">list_tables</span>() -&gt; <span class="hljs-built_in">str</span>:
    <span class="hljs-string">"""è·å–æ•°æ®åº“è¡¨åˆ—è¡¨"""</span>
    <span class="hljs-keyword">try</span>:
        db_mgr = get_database_manager()
        tables = db_mgr.get_table_names()
        
        <span class="hljs-keyword">if</span> tables:
            table_list = <span class="hljs-string">","</span>.join(tables)
            result = <span class="hljs-string">f"æ•°æ®åº“ä¸­å…±æœ‰ <span class="hljs-subst">{<span class="hljs-built_in">len</span>(tables)}</span> ä¸ªè¡¨:\n\n"</span>
            <span class="hljs-keyword">for</span> i,table <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(tables,<span class="hljs-number">1</span>):
                result += <span class="hljs-string">f"<span class="hljs-subst">{i}</span>. <span class="hljs-subst">{table}</span>\n"</span>
            logger.info(<span class="hljs-string">f"æˆåŠŸè¿”å› <span class="hljs-subst">{<span class="hljs-built_in">len</span>(tables)}</span> ä¸ªè¡¨: <span class="hljs-subst">{table_list}</span>"</span>)
            <span class="hljs-keyword">return</span> result
        <span class="hljs-keyword">else</span>:
            <span class="hljs-keyword">return</span> <span class="hljs-string">"æ•°æ®åº“ä¸­æ²¡æœ‰è¡¨"</span>

    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
        error_msg = <span class="hljs-string">f"è·å–æ•°æ®åº“è¡¨åˆ—è¡¨å¤±è´¥: <span class="hljs-subst">{<span class="hljs-built_in">str</span>(e)}</span>"</span>
        logger.error(error_msg)
        <span class="hljs-keyword">return</span> <span class="hljs-string">f"<span class="hljs-subst">{error_msg}</span>\n\nè¯·æ£€æŸ¥æ•°æ®åº“è¿æ¥ã€‚"</span>


<span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():
    <span class="hljs-keyword">try</span>:
        logger.info(<span class="hljs-string">"å¯åŠ¨MCP DataToolsæœåŠ¡å™¨"</span>)

        db_mgr = get_database_manager()

        <span class="hljs-keyword">if</span> db_mgr.test_connection():
            logger.info(<span class="hljs-string">"æ•°æ®åº“è¿æ¥æµ‹è¯•æˆåŠŸ"</span>)
        <span class="hljs-keyword">else</span>:
            logger.warning(<span class="hljs-string">"æ•°æ®åº“è¿æ¥æµ‹è¯•å¤±è´¥ï¼Œä½†æœåŠ¡å™¨ä»ä¼šå¯åŠ¨"</span>)
            logger.info(<span class="hljs-string">"æç¤ºï¼šè¿è¡Œ 'python data/init_scripts/init_sqlite_db.py' åˆ›å»ºæµ‹è¯•æ•°æ®åº“"</span>)

        logger.info(<span class="hljs-string">"å½“å‰åŠŸèƒ½ï¼šlist_tables() - è·å–æ•°æ®åº“è¡¨åˆ—è¡¨"</span>)
        logger.info(<span class="hljs-string">"MCPæœåŠ¡å™¨å¯åŠ¨æˆåŠŸï¼Œç­‰å¾…å®¢æˆ·ç«¯è¿æ¥..."</span>)
        
        mcp.run()

    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
        logger.error(<span class="hljs-string">f"æœåŠ¡å™¨å¯åŠ¨å¤±è´¥: <span class="hljs-subst">{<span class="hljs-built_in">str</span>(e)}</span>"</span>)
        <span class="hljs-keyword">raise</span>

<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    main()
</code></pre>
<h2 data-id="heading-5">ç¬¬äº”æ­¥ï¼šæµ‹è¯•æ•°æ®å‡†å¤‡</h2>
<p>å…‰æœ‰å·¥å…·è¿˜ä¸è¡Œï¼Œå¾—æœ‰æ•°æ®æ¥æµ‹è¯•ã€‚ç¬¬1å‘¨æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªè¶…çº§ç®€å•çš„æµ‹è¯•æ•°æ®åº“ï¼Œé‡ç‚¹æ˜¯èƒ½è®©<code>list_tables()</code>åŠŸèƒ½å·¥ä½œï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-string">"""
data/init_sqlite_db.py - åˆå§‹åŒ– SQLite æ•°æ®åº“
"""</span>

<span class="hljs-keyword">import</span> sqlite3
<span class="hljs-keyword">import</span> os
<span class="hljs-keyword">from</span> pathlib <span class="hljs-keyword">import</span> Path

<span class="hljs-keyword">def</span> <span class="hljs-title function_">create_simple_test_database</span>():
    <span class="hljs-string">"""åˆ›å»ºç®€å•æµ‹è¯•æ•°æ®åº“"""</span>
    
    data_dir = Path(__file__).parent.parent / <span class="hljs-string">"data"</span>
    db_path = data_dir / <span class="hljs-string">"test.db"</span>
    
    <span class="hljs-built_in">print</span>(<span class="hljs-string">" æµ‹è¯•æ•°æ®åº“åˆ›å»ºå™¨"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ•°æ®åº“è·¯å¾„: <span class="hljs-subst">{db_path}</span>"</span>)
    
    <span class="hljs-keyword">if</span> db_path.exists():
        os.remove(db_path)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"åˆ é™¤æ—§æ•°æ®åº“æ–‡ä»¶"</span>)
    
    conn = sqlite3.connect(db_path)
    cursor = conn.cursor()
    
    <span class="hljs-keyword">try</span>:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"åˆ›å»ºåŸºç¡€è¡¨ç»“æ„..."</span>)
        
        <span class="hljs-comment"># åˆ›å»ºç”¨æˆ·è¡¨</span>
        cursor.execute(<span class="hljs-string">"""
            CREATE TABLE users (
                id INTEGER PRIMARY KEY,
                name VARCHAR(50) NOT NULL,
                email VARCHAR(100) NOT NULL
            )
        """</span>)
        
        <span class="hljs-comment"># åˆ›å»ºäº§å“è¡¨</span>
        cursor.execute(<span class="hljs-string">"""
            CREATE TABLE products (
                id INTEGER PRIMARY KEY,
                name VARCHAR(100) NOT NULL,
                price DECIMAL(10, 2) NOT NULL
            )
        """</span>)
        
        <span class="hljs-comment"># åˆ›å»ºè®¢å•è¡¨</span>
        cursor.execute(<span class="hljs-string">"""
            CREATE TABLE orders (
                id INTEGER PRIMARY KEY,
                user_id INTEGER,
                total_amount DECIMAL(10, 2)
            )
        """</span>)
        
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"æ’å…¥æµ‹è¯•æ•°æ®..."</span>)
        
        <span class="hljs-comment"># æ’å…¥æµ‹è¯•æ•°æ®</span>
        cursor.execute(<span class="hljs-string">"INSERT INTO users (name, email) VALUES ('Alice', 'alice@test.com')"</span>)
        cursor.execute(<span class="hljs-string">"INSERT INTO users (name, email) VALUES ('Bob', 'bob@test.com')"</span>)
        
        cursor.execute(<span class="hljs-string">"INSERT INTO products (name, price) VALUES ('ç¬”è®°æœ¬ç”µè„‘', 5999.99)"</span>)
        cursor.execute(<span class="hljs-string">"INSERT INTO products (name, price) VALUES ('é¼ æ ‡', 129.99)"</span>)
        
        cursor.execute(<span class="hljs-string">"INSERT INTO orders (user_id, total_amount) VALUES (1, 6129.98)"</span>)
        cursor.execute(<span class="hljs-string">"INSERT INTO orders (user_id, total_amount) VALUES (2, 129.99)"</span>)
        
        conn.commit()
        
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"æµ‹è¯•æ•°æ®åº“åˆ›å»ºæˆåŠŸï¼"</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"æ•°æ®åº“åŒ…å«è¡¨:"</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"  1. users - ç”¨æˆ·è¡¨ (2æ¡è®°å½•)"</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"  2. products - äº§å“è¡¨ (2æ¡è®°å½•)"</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"  3. orders - è®¢å•è¡¨ (2æ¡è®°å½•)"</span>)
        
    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"åˆ›å»ºæ•°æ®åº“æ—¶å‡ºé”™: <span class="hljs-subst">{e}</span>"</span>)
        conn.rollback()
        <span class="hljs-keyword">raise</span>
    <span class="hljs-keyword">finally</span>:
        conn.close()

<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    create_simple_test_database()
</code></pre>
<p>è¿è¡Œè¿™ä¸ªè„šæœ¬ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">python data/init_scripts/init_sqlite_db.py
</code></pre>
<p>ä½ å°±ä¼šå¾—åˆ°ä¸€ä¸ªåŒ…å«3ä¸ªåŸºç¡€è¡¨çš„æµ‹è¯•æ•°æ®åº“ã€‚</p>
<h2 data-id="heading-6">ç¬¬å…­æ­¥ï¼šCursor é›†æˆæµ‹è¯•</h2>
<h3 data-id="heading-7">é…ç½® Cursor</h3>
<p>åœ¨ Cursor çš„ MCP é…ç½®ä¸­æ·»åŠ æˆ‘ä»¬çš„æœåŠ¡å™¨ã€‚æ‰“å¼€ Cursor è®¾ç½®ï¼Œæ‰¾åˆ° MCP é…ç½®éƒ¨åˆ†ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"mcpServers"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"mcp-datatools"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"command"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"uv"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"args"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"run"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"--project"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"/path"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"python"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"-m"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"mcp_datatools.server"</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"env"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"DB_URL"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"sqlite:///data/test.db"</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>æ­£å¸¸æ¥è¯´æ˜¯èƒ½å¼€å¯çš„ï¼š
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/783a37f73f6b4888a9d9043909d95d97~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg57qi6by75a2Q5pe25Luj:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766975331&amp;x-signature=X1wJMrdM5Vf%2BYpcDC9WYTQv6f58%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-8">æµ‹è¯•åŠŸèƒ½</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bf55e82ab5ad4e9d9b7e7c5cf396c6ee~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg57qi6by75a2Q5pe25Luj:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766975331&amp;x-signature=v9mBfGnHWd35M5cyYjPUFD3CiT0%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h2 data-id="heading-9">æ€»ç»“ä¸é¢„å‘Š</h2>
<p>ç¬¬1ç« æˆ‘ä»¬æˆåŠŸæ­å»ºäº†MCPæ•°æ®åº“æ™ºèƒ½åŠ©æ‰‹çš„åŸºç¡€ï¼Œä¸‹ä¸€ç« å°†å®ç°æ›´å¤šçš„å·¥å…·å‡½æ•°ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»é›¶å¼€å§‹ï¼šMCPæ•°æ®åº“åŠ©æ‰‹ï¼ˆäºŒï¼‰- æ ¸å¿ƒåŠŸèƒ½å®ç°]]></title>    <link>https://juejin.cn/post/7585897699603054618</link>    <guid>https://juejin.cn/post/7585897699603054618</guid>    <pubDate>2025-12-22T02:23:58.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7585897699603054618" data-draft-id="7585920796100001819" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»é›¶å¼€å§‹ï¼šMCPæ•°æ®åº“åŠ©æ‰‹ï¼ˆäºŒï¼‰- æ ¸å¿ƒåŠŸèƒ½å®ç°"/> <meta itemprop="keywords" content="MCP"/> <meta itemprop="datePublished" content="2025-12-22T02:23:58.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="çº¢é¼»å­æ—¶ä»£"/> <meta itemprop="url" content="https://juejin.cn/user/1743149753974384"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»é›¶å¼€å§‹ï¼šMCPæ•°æ®åº“åŠ©æ‰‹ï¼ˆäºŒï¼‰- æ ¸å¿ƒåŠŸèƒ½å®ç°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1743149753974384/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    çº¢é¼»å­æ—¶ä»£
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-22T02:23:58.000Z" title="Mon Dec 22 2025 02:23:58 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸ºä»€ä¹ˆè¦å®ç°è¿™3ä¸ªæ ¸å¿ƒåŠŸèƒ½ï¼Ÿ</h2>
<p>ä¸Šä¸€ç¯‡æˆ‘ä»¬æ­å»ºäº†åŸºç¡€æ¡†æ¶ï¼ŒAIå·²ç»èƒ½"çœ‹åˆ°"æ•°æ®åº“ä¸­æœ‰å“ªäº›è¡¨äº†ã€‚ä½†è¿™è¿˜è¿œè¿œä¸å¤Ÿï¼Œä»Šå¤©å’±ä»¬è¦è®©AIå˜å¾—æ›´èªæ˜ï¼Œå®ç°3ä¸ªæ ¸å¿ƒåŠŸèƒ½ï¼š</p>
<ul>
<li>èƒ½æ™ºèƒ½æœç´¢ç›¸å…³çš„è¡¨</li>
<li>èƒ½æ·±åº¦ç†è§£è¡¨çš„ç»“æ„</li>
<li>èƒ½å®‰å…¨åœ°æ‰§è¡ŒSQLæŸ¥è¯¢</li>
</ul>
<h2 data-id="heading-1">ç¬¬ä¸€æ­¥ï¼šfilter_table_names() - æ™ºèƒ½æœç´¢è¡¨å</h2>
<p>ç¬¬1å‘¨æˆ‘ä»¬å·²ç»èƒ½è·å–æ‰€æœ‰è¡¨åäº†ï¼Œä½†å½“æ•°æ®åº“æœ‰å‡ åä¸ªè¡¨çš„æ—¶å€™ï¼Œä½ å¾—èƒ½å¿«é€Ÿæ‰¾åˆ°ç›¸å…³çš„è¡¨ã€‚è¿™å°±åƒåœ¨å›¾ä¹¦é¦†é‡Œæ‰¾ä¹¦ï¼Œä½ ä¸å¯èƒ½ä¸€æœ¬æœ¬ç¿»ï¼Œå¾—æŒ‰åˆ†ç±»æ‰¾ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-meta">@mcp.tool(<span class="hljs-params">description=<span class="hljs-string">"æ ¹æ®å…³é”®è¯æœç´¢ç›¸å…³çš„è¡¨åã€‚æ”¯æŒæ¨¡ç³ŠåŒ¹é…ï¼Œä¸åŒºåˆ†å¤§å°å†™ã€‚"</span></span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">filter_table_names</span>(<span class="hljs-params">keyword: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">str</span>:
    <span class="hljs-string">"""æ ¹æ®å…³é”®è¯æœç´¢ç›¸å…³çš„è¡¨å"""</span>
    <span class="hljs-keyword">try</span>:
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> keyword <span class="hljs-keyword">or</span> <span class="hljs-keyword">not</span> keyword.strip():
            <span class="hljs-keyword">return</span> <span class="hljs-string">"è¯·æä¾›æœç´¢å…³é”®è¯"</span>

        db_mgr = get_database_manager()
        matching_tables = db_mgr.filter_table_names(keyword.strip())
        
        <span class="hljs-keyword">if</span> matching_tables:
            table_list = <span class="hljs-string">", "</span>.join(matching_tables)
            result = <span class="hljs-string">f"æœç´¢å…³é”®è¯ '<span class="hljs-subst">{keyword}</span>' æ‰¾åˆ° <span class="hljs-subst">{<span class="hljs-built_in">len</span>(matching_tables)}</span> ä¸ªç›¸å…³è¡¨:\n"</span>
            result += <span class="hljs-string">f"åŒ¹é…çš„è¡¨: <span class="hljs-subst">{table_list}</span>"</span>
            logger.info(<span class="hljs-string">f"å…³é”®è¯ '<span class="hljs-subst">{keyword}</span>' åŒ¹é…åˆ°: <span class="hljs-subst">{table_list}</span>"</span>)
            <span class="hljs-keyword">return</span> result
        <span class="hljs-keyword">else</span>:
            all_tables = db_mgr.get_table_names()
            all_table_list = <span class="hljs-string">", "</span>.join(all_tables) <span class="hljs-keyword">if</span> all_tables <span class="hljs-keyword">else</span> <span class="hljs-string">"æ— "</span>
            result = <span class="hljs-string">f"æœç´¢å…³é”®è¯ '<span class="hljs-subst">{keyword}</span>' æ²¡æœ‰æ‰¾åˆ°åŒ¹é…çš„è¡¨ã€‚\n"</span>
            result += <span class="hljs-string">f"æ•°æ®åº“ä¸­çš„æ‰€æœ‰è¡¨: <span class="hljs-subst">{all_table_list}</span>\n"</span>
            result += <span class="hljs-string">f"å»ºè®®å°è¯•å…¶ä»–å…³é”®è¯ï¼Œå¦‚è¡¨åçš„ä¸€éƒ¨åˆ†ã€‚"</span>
            logger.info(<span class="hljs-string">f"å…³é”®è¯ '<span class="hljs-subst">{keyword}</span>' æ²¡æœ‰æ‰¾åˆ°åŒ¹é…çš„è¡¨ã€‚"</span>)
            <span class="hljs-keyword">return</span> result
    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
        error_msg = <span class="hljs-string">f"æœç´¢è¡¨åå¤±è´¥: <span class="hljs-subst">{<span class="hljs-built_in">str</span>(e)}</span>"</span>
        logger.error(error_msg)
        <span class="hljs-keyword">return</span> <span class="hljs-string">f"<span class="hljs-subst">{error_msg}</span>"</span>
</code></pre>
<p>æ•°æ®åº“ç®¡ç†å™¨ä¸­çš„æœç´¢é€»è¾‘ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">filter_table_names</span>(<span class="hljs-params">self, keyword: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-type">List</span>[<span class="hljs-built_in">str</span>]:
    <span class="hljs-string">"""æ ¹æ®å…³é”®è¯æœç´¢ç›¸å…³è¡¨å"""</span>
    <span class="hljs-keyword">try</span>:
        all_tables = self.get_table_names()
        <span class="hljs-comment"># ä¸åŒºåˆ†å¤§å°å†™çš„æ¨¡ç³ŠåŒ¹é…</span>
        matching_tables = [
            table <span class="hljs-keyword">for</span> table <span class="hljs-keyword">in</span> all_tables 
            <span class="hljs-keyword">if</span> keyword.lower() <span class="hljs-keyword">in</span> table.lower()
        ]
        <span class="hljs-keyword">return</span> matching_tables
    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
        logger.error(<span class="hljs-string">f"æœç´¢è¡¨åå¤±è´¥: <span class="hljs-subst">{e}</span>"</span>)
        <span class="hljs-keyword">raise</span>
</code></pre>
<p>è¿™ä¸ªåŠŸèƒ½åœ¨å¤§å‹é¡¹ç›®ä¸­ç‰¹åˆ«æœ‰ç”¨ï¼Œæƒ³è±¡ä¸€ä¸‹åœ¨ä¸€ä¸ªæœ‰100ä¸ªè¡¨çš„ç”µå•†ç³»ç»Ÿä¸­å¿«é€Ÿæ‰¾åˆ°æ‰€æœ‰æ”¯ä»˜ç›¸å…³çš„è¡¨ï¼</p>
<h2 data-id="heading-2">ç¬¬äºŒæ­¥ï¼šschema_definitions() - æ·±åº¦è§£æè¡¨ç»“æ„</h2>
<p>çŸ¥é“è¡¨åè¿˜ä¸å¤Ÿï¼Œå¾—çŸ¥é“è¡¨é‡Œæœ‰ä»€ä¹ˆå­—æ®µã€ä»€ä¹ˆç±»å‹ã€ä»€ä¹ˆå…³ç³»ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-meta">@mcp.tool(<span class="hljs-params">description=<span class="hljs-string">"è·å–æŒ‡å®šè¡¨çš„è¯¦ç»†ç»“æ„ä¿¡æ¯ï¼ŒåŒ…æ‹¬åˆ—ã€ç±»å‹ã€ä¸»é”®ã€ç´¢å¼•ã€å¤–é”®ç­‰ã€‚æ”¯æŒåŒæ—¶æŸ¥è¯¢å¤šä¸ªè¡¨ã€‚"</span></span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">schema_info</span>(<span class="hljs-params">table_names: <span class="hljs-type">List</span>[<span class="hljs-built_in">str</span>]</span>) -&gt; <span class="hljs-built_in">str</span>:
    <span class="hljs-string">"""è·å–æŒ‡å®šè¡¨çš„è¯¦ç»†ç»“æ„ä¿¡æ¯"""</span>
    <span class="hljs-keyword">try</span>:
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> table_names:
            <span class="hljs-keyword">return</span> <span class="hljs-string">"è¯·æä¾›è¦æŸ¥è¯¢çš„è¡¨å"</span>

        db_mgr = get_database_manager()
        result_parts = []

        <span class="hljs-keyword">for</span> table_name <span class="hljs-keyword">in</span> table_names:
            <span class="hljs-keyword">try</span>:
                schema_info = db_mgr.get_table_schema(table_name)
                
                <span class="hljs-comment"># æ ¼å¼åŒ–è¡¨ç»“æ„ä¿¡æ¯</span>
                table_section = <span class="hljs-string">f"\n<span class="hljs-subst">{<span class="hljs-string">'='</span>*<span class="hljs-number">50</span>}</span>\n"</span>
                table_section += <span class="hljs-string">f"è¡¨åï¼š<span class="hljs-subst">{table_name}</span>\n"</span>
                table_section += <span class="hljs-string">f"åˆ—ï¼š<span class="hljs-subst">{schema_info[<span class="hljs-string">'columns'</span>]}</span>\n"</span>
                table_section += <span class="hljs-string">f"<span class="hljs-subst">{<span class="hljs-string">'='</span>*<span class="hljs-number">50</span>}</span>\n"</span>

                <span class="hljs-comment"># åˆ—ä¿¡æ¯</span>
                column_section = <span class="hljs-string">"åˆ—ä¿¡æ¯ï¼š\n"</span>
                <span class="hljs-keyword">for</span> col <span class="hljs-keyword">in</span> schema_info[<span class="hljs-string">'columns'</span>]:
                    col_type = col[<span class="hljs-string">'type'</span>]
                    nullable = <span class="hljs-string">"å¯ç©º"</span> <span class="hljs-keyword">if</span> col[<span class="hljs-string">'nullable'</span>] <span class="hljs-keyword">else</span> <span class="hljs-string">"ä¸å¯ç©º"</span>
                    pk_mark = <span class="hljs-string">" ä¸»é”®"</span> <span class="hljs-keyword">if</span> col[<span class="hljs-string">'is_primary_key'</span>] <span class="hljs-keyword">else</span> <span class="hljs-string">""</span>
                    default_info = <span class="hljs-string">f" (é»˜è®¤: <span class="hljs-subst">{col[<span class="hljs-string">'default'</span>]}</span>)"</span> <span class="hljs-keyword">if</span> col[<span class="hljs-string">'default'</span>] <span class="hljs-keyword">else</span> <span class="hljs-string">""</span>

                    table_section += <span class="hljs-string">f"  â€¢ <span class="hljs-subst">{col[<span class="hljs-string">'name'</span>]}</span>: <span class="hljs-subst">{col_type}</span> - <span class="hljs-subst">{nullable}</span><span class="hljs-subst">{pk_mark}</span><span class="hljs-subst">{default_info}</span>\n"</span>
                
                <span class="hljs-comment"># ä¸»é”®ä¿¡æ¯</span>
                <span class="hljs-keyword">if</span> schema_info[<span class="hljs-string">'primary_keys'</span>]:
                    table_section += <span class="hljs-string">f"\nä¸»é”®: <span class="hljs-subst">{<span class="hljs-string">', '</span>.join(schema_info[<span class="hljs-string">'primary_keys'</span>])}</span>\n"</span>

                <span class="hljs-comment"># ç´¢å¼•ä¿¡æ¯</span>
                <span class="hljs-keyword">if</span> schema_info[<span class="hljs-string">'indexes'</span>]:
                    table_section += <span class="hljs-string">"\nç´¢å¼•ä¿¡æ¯:\n"</span>
                    <span class="hljs-keyword">for</span> idx <span class="hljs-keyword">in</span> schema_info[<span class="hljs-string">'indexes'</span>]:
                        unique_mark = <span class="hljs-string">"å”¯ä¸€ç´¢å¼•"</span> <span class="hljs-keyword">if</span> idx.get(<span class="hljs-string">'unique'</span>, <span class="hljs-literal">False</span>) <span class="hljs-keyword">else</span> <span class="hljs-string">"æ™®é€šç´¢å¼•"</span>
                        columns = <span class="hljs-string">', '</span>.join(idx[<span class="hljs-string">'column_names'</span>])
                        table_section += <span class="hljs-string">f"  â€¢ <span class="hljs-subst">{idx[<span class="hljs-string">'name'</span>]}</span>: <span class="hljs-subst">{unique_mark}</span> (<span class="hljs-subst">{columns}</span>)\n"</span>

                <span class="hljs-comment"># å¤–é”®ä¿¡æ¯</span>
                <span class="hljs-keyword">if</span> schema_info[<span class="hljs-string">'foreign_keys'</span>]:
                    table_section += <span class="hljs-string">"\nå¤–é”®å…³ç³»:\n"</span>
                    <span class="hljs-keyword">for</span> fk <span class="hljs-keyword">in</span> schema_info[<span class="hljs-string">'foreign_keys'</span>]:
                        local_cols = <span class="hljs-string">', '</span>.join(fk[<span class="hljs-string">'constrained_columns'</span>])
                        ref_table = fk[<span class="hljs-string">'referred_table'</span>]
                        ref_cols = <span class="hljs-string">', '</span>.join(fk[<span class="hljs-string">'referred_columns'</span>])
                        table_section += <span class="hljs-string">f"  â€¢ <span class="hljs-subst">{local_cols}</span> â†’ <span class="hljs-subst">{ref_table}</span>.<span class="hljs-subst">{ref_cols}</span>\n"</span>
                
                result_parts.append(table_section)
            
            <span class="hljs-keyword">except</span> ValueError <span class="hljs-keyword">as</span> e:
                result_parts.append(<span class="hljs-string">f"\nè¡¨ '<span class="hljs-subst">{table_name}</span>': <span class="hljs-subst">{<span class="hljs-built_in">str</span>(e)}</span>\n"</span>)
            <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
                result_parts.append(<span class="hljs-string">f"\nè¡¨ '<span class="hljs-subst">{table_name}</span>' è§£æå¤±è´¥: <span class="hljs-subst">{<span class="hljs-built_in">str</span>(e)}</span>\n"</span>)

        final_result = <span class="hljs-string">'\n'</span>.join(result_parts)
        logger.info(<span class="hljs-string">f"æˆåŠŸè§£æ <span class="hljs-subst">{<span class="hljs-built_in">len</span>(table_names)}</span> ä¸ªè¡¨çš„ç»“æ„"</span>)

        <span class="hljs-keyword">return</span> final_result
    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
        error_msg = <span class="hljs-string">f"è·å–è¡¨ç»“æ„ä¿¡æ¯å¤±è´¥: <span class="hljs-subst">{<span class="hljs-built_in">str</span>(e)}</span>"</span>
        logger.error(error_msg)
        <span class="hljs-keyword">return</span> <span class="hljs-string">f"<span class="hljs-subst">{error_msg}</span>"</span>
</code></pre>
<p>æ•°æ®åº“ç®¡ç†å™¨ä¸­çš„è§£æé€»è¾‘ï¼š</p>
<pre><code class="hljs language-python" lang="python">    <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_table_schema</span>(<span class="hljs-params">self, table_name: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-type">Dict</span>[<span class="hljs-built_in">str</span>, <span class="hljs-type">Any</span>]:
        <span class="hljs-string">"""è·å–æŒ‡å®šè¡¨çš„è¯¦ç»†ç»“æ„ä¿¡æ¯"""</span>
        <span class="hljs-keyword">try</span>:
            <span class="hljs-keyword">with</span> self.get_connection() <span class="hljs-keyword">as</span> conn:
                inspector = inspect(conn)

                <span class="hljs-comment"># éªŒè¯è¡¨æ˜¯å¦å­˜åœ¨</span>
                <span class="hljs-keyword">if</span> table_name <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> inspector.get_table_names():
                    <span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">f"è¡¨ '<span class="hljs-subst">{table_name}</span>' ä¸å­˜åœ¨"</span>)
                
                <span class="hljs-comment"># è·å–åˆ—ä¿¡æ¯</span>
                columns = inspector.get_columns(table_name)
                
                <span class="hljs-comment"># è·å–ä¸»é”®ä¿¡æ¯</span>
                pk_constraint = inspector.get_pk_constraint(table_name)
                primary_keys = <span class="hljs-built_in">set</span>(pk_constraint[<span class="hljs-string">"constrained_columns"</span>])
                           
                <span class="hljs-comment"># è·å–ç´¢å¼•ä¿¡æ¯</span>
                indexes = inspector.get_indexes(table_name)
                
                <span class="hljs-comment"># è·å–å¤–é”®ä¿¡æ¯</span>
                foreign_keys = inspector.get_foreign_keys(table_name)

                <span class="hljs-comment"># æ ¼å¼åŒ–åˆ—ä¿¡æ¯</span>
                formatted_columns = []
                <span class="hljs-keyword">for</span> col <span class="hljs-keyword">in</span> columns:
                    col_info = {
                        <span class="hljs-string">"name"</span>: col[<span class="hljs-string">"name"</span>],
                        <span class="hljs-string">"type"</span>: <span class="hljs-built_in">str</span>(col[<span class="hljs-string">"type"</span>]),
                        <span class="hljs-string">"nullable"</span>: col[<span class="hljs-string">"nullable"</span>],
                        <span class="hljs-string">"default"</span>: col.get(<span class="hljs-string">"default"</span>),
                        <span class="hljs-string">"is_primary_key"</span>: col[<span class="hljs-string">"name"</span>] <span class="hljs-keyword">in</span> primary_keys
                    }
                    formatted_columns.append(col_info)

                schema_info = {
                    <span class="hljs-string">"table_name"</span>: table_name,
                    <span class="hljs-string">"columns"</span>: formatted_columns,
                    <span class="hljs-string">"primary_keys"</span>: <span class="hljs-built_in">list</span>(primary_keys),
                    <span class="hljs-string">"indexes"</span>: indexes,
                    <span class="hljs-string">"foreign_keys"</span>: foreign_keys,
                    <span class="hljs-string">"column_count"</span>: <span class="hljs-built_in">len</span>(columns)
                }

                <span class="hljs-keyword">return</span> schema_info
        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
            logger.error(<span class="hljs-string">f"è·å–è¡¨ç»“æ„ä¿¡æ¯å¤±è´¥: <span class="hljs-subst">{e}</span>"</span>)
            <span class="hljs-keyword">raise</span>

</code></pre>
<h2 data-id="heading-3">ç¬¬ä¸‰æ­¥ï¼šexecute_query() - å®‰å…¨æ‰§è¡ŒSQLæŸ¥è¯¢</h2>
<p>æœ€åè¿™ä¸ªåŠŸèƒ½æ˜¯æ ¸å¿ƒä¸­çš„æ ¸å¿ƒï¼è®©AIèƒ½æ‰§è¡ŒSQLæŸ¥è¯¢ï¼Œä½†å¿…é¡»ç¡®ä¿å®‰å…¨æ€§ã€‚æˆ‘ä»¬åªå…è®¸SELECTæŸ¥è¯¢ï¼Œå¹¶ä¸”æœ‰å®Œæ•´çš„é˜²æŠ¤æªæ–½ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-meta">@mcp.tool(<span class="hljs-params">description=<span class="hljs-string">"å®‰å…¨æ‰§è¡ŒSQLæŸ¥è¯¢è¯­å¥ã€‚åªæ”¯æŒSELECTæŸ¥è¯¢ï¼Œè‡ªåŠ¨æ·»åŠ ç»“æœé™åˆ¶ï¼Œæ”¯æŒå‚æ•°åŒ–æŸ¥è¯¢é˜²æ­¢SQLæ³¨å…¥ã€‚"</span></span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">execute_query</span>(<span class="hljs-params">query: <span class="hljs-built_in">str</span>, params: <span class="hljs-built_in">dict</span> = <span class="hljs-literal">None</span></span>) -&gt; <span class="hljs-built_in">str</span>:
    <span class="hljs-keyword">try</span>:
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> query <span class="hljs-keyword">or</span> <span class="hljs-keyword">not</span> query.strip():
                <span class="hljs-keyword">return</span> <span class="hljs-string">"è¯·æä¾›æŸ¥è¯¢è¯­å¥"</span>
            
        db_mgr = get_database_manager()
        
        <span class="hljs-comment"># å¦‚æœæ²¡æœ‰æä¾›å‚æ•°ï¼Œè®¾ä¸ºNone</span>
        query_params = params <span class="hljs-keyword">if</span> params <span class="hljs-keyword">else</span> <span class="hljs-literal">None</span>

        <span class="hljs-comment"># æ‰§è¡ŒæŸ¥è¯¢</span>
        result = db_mgr.execute_query(query.strip(), query_params)

        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> result:
                <span class="hljs-keyword">return</span> <span class="hljs-string">"æŸ¥è¯¢ç»“æœä¸ºç©º"</span>
            
        <span class="hljs-comment">#æ ¼å¼åŒ–è¿”ç»“æœ</span>
        result_text = <span class="hljs-string">"æŸ¥è¯¢ç»“æœ:\n"</span>
        <span class="hljs-keyword">for</span> row <span class="hljs-keyword">in</span> result:
                result_text += <span class="hljs-string">f"<span class="hljs-subst">{row}</span>\n"</span>
                
        <span class="hljs-keyword">return</span> result_text
    
    <span class="hljs-keyword">except</span> ValueError <span class="hljs-keyword">as</span> e:
        <span class="hljs-comment"># å®‰å…¨éªŒè¯å¤±è´¥</span>
        error_msg = <span class="hljs-string">f"æŸ¥è¯¢å®‰å…¨éªŒè¯å¤±è´¥: <span class="hljs-subst">{<span class="hljs-built_in">str</span>(e)}</span>"</span>
        logger.warning(error_msg)
        <span class="hljs-keyword">return</span> <span class="hljs-string">f"<span class="hljs-subst">{error_msg}</span>\n\n æç¤ºï¼šæœ¬å·¥å…·åªæ”¯æŒ SELECT æŸ¥è¯¢ï¼Œä¸”ä¼šè‡ªåŠ¨æ·»åŠ å®‰å…¨é™åˆ¶ã€‚"</span>
        
    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
        error_msg = <span class="hljs-string">f"æ‰§è¡ŒæŸ¥è¯¢å¤±è´¥: <span class="hljs-subst">{<span class="hljs-built_in">str</span>(e)}</span>"</span>
        logger.error(error_msg)
        <span class="hljs-keyword">return</span> <span class="hljs-string">f"<span class="hljs-subst">{error_msg}</span>"</span>
</code></pre>
<p>æ•°æ®åº“ç®¡ç†å™¨ä¸­ä¹Ÿè¦æœ‰éªŒè¯ï¼š</p>
<pre><code class="hljs language-python" lang="python">    <span class="hljs-keyword">def</span> <span class="hljs-title function_">_validate_query</span>(<span class="hljs-params">self, query: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-literal">None</span>:
        <span class="hljs-string">"""éªŒè¯æŸ¥è¯¢å®‰å…¨æ€§"""</span>
        query_upper = query.upper().strip()
        
        <span class="hljs-comment"># æ£€æŸ¥å±é™©çš„SQLæ“ä½œ</span>
        dangerous_keywords = [
            <span class="hljs-string">"DROP"</span>, <span class="hljs-string">"DELETE"</span>, <span class="hljs-string">"UPDATE"</span>, <span class="hljs-string">"INSERT"</span>, <span class="hljs-string">"ALTER"</span>, <span class="hljs-string">"CREATE"</span>, <span class="hljs-string">"TRUNCATE"</span>
        ]
        
        <span class="hljs-keyword">for</span> keyword <span class="hljs-keyword">in</span> dangerous_keywords:
            <span class="hljs-keyword">if</span> keyword <span class="hljs-keyword">in</span> query_upper:
                <span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">f"æŸ¥è¯¢åŒ…å«å±é™©æ“ä½œ: <span class="hljs-subst">{keyword}</span>"</span>)
        
        <span class="hljs-comment"># æ£€æŸ¥æ˜¯å¦æ˜¯SELECTæŸ¥è¯¢</span>
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> query_upper.startswith(<span class="hljs-string">"SELECT"</span>):
            <span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">"åªå…è®¸æ‰§è¡ŒSELECTæŸ¥è¯¢"</span>)

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">_add_limit_to_query</span>(<span class="hljs-params">self, query: <span class="hljs-built_in">str</span>, limit: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">str</span>:
        <span class="hljs-string">"""ä¸ºæŸ¥è¯¢æ·»åŠ LIMITå­å¥"""</span>
        query_upper = query.upper()
        
        <span class="hljs-comment"># å¦‚æœå·²ç»æœ‰LIMITï¼Œä¸å†æ·»åŠ </span>
        <span class="hljs-keyword">if</span> <span class="hljs-string">"LIMIT"</span> <span class="hljs-keyword">in</span> query_upper:
            <span class="hljs-keyword">return</span> query
        
        <span class="hljs-comment"># æ·»åŠ LIMITå­å¥</span>
        <span class="hljs-keyword">return</span> <span class="hljs-string">f"<span class="hljs-subst">{query.rstrip(<span class="hljs-string">';'</span>)}</span> LIMIT <span class="hljs-subst">{limit}</span>"</span>

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">execute_query</span>(<span class="hljs-params">self, query: <span class="hljs-built_in">str</span>, params: <span class="hljs-built_in">dict</span> = <span class="hljs-literal">None</span></span>) -&gt; <span class="hljs-type">List</span>[<span class="hljs-type">Dict</span>[<span class="hljs-built_in">str</span>, <span class="hljs-type">Any</span>]]:
        <span class="hljs-string">"""å®‰å…¨æ‰§è¡ŒSQLæŸ¥è¯¢"""</span>
        <span class="hljs-keyword">try</span>:
            <span class="hljs-comment"># éªŒè¯æŸ¥è¯¢å®‰å…¨æ€§</span>
            self._validate_query(query)
            
            <span class="hljs-comment"># æ·»åŠ é»˜è®¤é™åˆ¶</span>
            limited_query = self._add_limit_to_query(query, <span class="hljs-number">1000</span>)
            
            <span class="hljs-keyword">with</span> self.get_connection() <span class="hljs-keyword">as</span> conn:
                <span class="hljs-keyword">if</span> params:
                    <span class="hljs-comment"># ä½¿ç”¨å‚æ•°åŒ–æŸ¥è¯¢</span>
                    result = conn.execute(text(limited_query), params)
                <span class="hljs-keyword">else</span>:
                    <span class="hljs-comment"># ç›´æ¥æ‰§è¡ŒæŸ¥è¯¢</span>
                    result = conn.execute(text(limited_query))
                
                <span class="hljs-comment"># è·å–åˆ—å</span>
                columns = result.keys()
                
                <span class="hljs-comment"># è½¬æ¢ä¸ºå­—å…¸åˆ—è¡¨</span>
                rows = []
                <span class="hljs-keyword">for</span> row <span class="hljs-keyword">in</span> result:
                    row_dict = <span class="hljs-built_in">dict</span>(<span class="hljs-built_in">zip</span>(columns, row))
                    rows.append(row_dict)
                
                <span class="hljs-keyword">return</span> rows
                
        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
            logger.error(<span class="hljs-string">f"æ‰§è¡ŒæŸ¥è¯¢å¤±è´¥: <span class="hljs-subst">{e}</span>"</span>)
            <span class="hljs-keyword">raise</span>
</code></pre>
<h2 data-id="heading-4">ç¬¬å››æ­¥ï¼šåŠŸèƒ½éªŒè¯æµ‹è¯•</h2>
<p>ä¸ºäº†ç¡®ä¿æ‰€æœ‰åŠŸèƒ½éƒ½æ­£å¸¸å·¥ä½œï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªç®€å•çš„éªŒè¯è„šæœ¬ã€‚è¿™ä¸æ˜¯å¤æ‚çš„å•å…ƒæµ‹è¯•ï¼Œè€Œæ˜¯å¸®åŠ©è¯»è€…å¿«é€ŸéªŒè¯åŠŸèƒ½çš„å·¥å…·ã€‚</p>
<h3 data-id="heading-5">åˆ›å»ºéªŒè¯è„šæœ¬</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-string">"""
tests/verify_functions.py - åŠŸèƒ½éªŒè¯è„šæœ¬
"""</span>

<span class="hljs-keyword">import</span> os
<span class="hljs-keyword">import</span> sys
<span class="hljs-keyword">from</span> pathlib <span class="hljs-keyword">import</span> Path

<span class="hljs-comment"># æ·»åŠ é¡¹ç›®è·¯å¾„</span>
project_root = Path(__file__).parent.parent
sys.path.insert(<span class="hljs-number">0</span>, <span class="hljs-built_in">str</span>(project_root / <span class="hljs-string">"src"</span>))

<span class="hljs-keyword">def</span> <span class="hljs-title function_">verify_database_connection</span>():
    <span class="hljs-string">"""éªŒè¯æ•°æ®åº“è¿æ¥"""</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"=== æ•°æ®åº“è¿æ¥éªŒè¯ ==="</span>)
    
    <span class="hljs-comment"># è®¾ç½®æ•°æ®åº“URL</span>
    db_path = project_root / <span class="hljs-string">"data"</span> / <span class="hljs-string">"test.db"</span>
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> db_path.exists():
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"æµ‹è¯•æ•°æ®åº“ä¸å­˜åœ¨ï¼"</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span>
    
    os.environ[<span class="hljs-string">'DB_URL'</span>] = <span class="hljs-string">f'sqlite:///<span class="hljs-subst">{db_path}</span>'</span>
    
    <span class="hljs-keyword">try</span>:
        <span class="hljs-keyword">from</span> mcp_datatools.database <span class="hljs-keyword">import</span> DatabaseManager
        db_mgr = DatabaseManager()
        
        <span class="hljs-keyword">if</span> db_mgr.test_connection():
            <span class="hljs-built_in">print</span>(<span class="hljs-string">"æ•°æ®åº“è¿æ¥æˆåŠŸ"</span>)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span>
        <span class="hljs-keyword">else</span>:
            <span class="hljs-built_in">print</span>(<span class="hljs-string">"æ•°æ®åº“è¿æ¥å¤±è´¥"</span>)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span>
    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ•°æ®åº“è¿æ¥é”™è¯¯: <span class="hljs-subst">{e}</span>"</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span>

<span class="hljs-keyword">def</span> <span class="hljs-title function_">verify_basic_functions</span>():
    <span class="hljs-string">"""éªŒè¯åŸºç¡€åŠŸèƒ½"""</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"\n=== åŸºç¡€åŠŸèƒ½éªŒè¯ ==="</span>)
    
    <span class="hljs-keyword">try</span>:
        <span class="hljs-keyword">from</span> mcp_datatools.database <span class="hljs-keyword">import</span> DatabaseManager
        db_mgr = DatabaseManager()
        
        <span class="hljs-comment"># æµ‹è¯•1: è·å–è¡¨å</span>
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"1. æµ‹è¯• list_tables() åŠŸèƒ½..."</span>)
        tables = db_mgr.get_table_names()
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"   æ‰¾åˆ° <span class="hljs-subst">{<span class="hljs-built_in">len</span>(tables)}</span> ä¸ªè¡¨: <span class="hljs-subst">{<span class="hljs-string">', '</span>.join(tables)}</span>"</span>)
        
        <span class="hljs-comment"># æµ‹è¯•2: æœç´¢è¡¨å</span>
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"2. æµ‹è¯• filter_table_names() åŠŸèƒ½..."</span>)
        user_tables = db_mgr.filter_table_names(<span class="hljs-string">'user'</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"   æœç´¢ 'user' æ‰¾åˆ°: <span class="hljs-subst">{user_tables}</span>"</span>)
        
        <span class="hljs-comment"># æµ‹è¯•3: è·å–è¡¨ç»“æ„</span>
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"3. æµ‹è¯• get_table_schema() åŠŸèƒ½..."</span>)
        <span class="hljs-keyword">if</span> tables:
            schema = db_mgr.get_table_schema(tables[<span class="hljs-number">0</span>])
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"  è¡¨ '<span class="hljs-subst">{tables[<span class="hljs-number">0</span>]}</span>' æœ‰ <span class="hljs-subst">{schema[<span class="hljs-string">'column_count'</span>]}</span> ä¸ªåˆ—"</span>)
        
        <span class="hljs-comment"># æµ‹è¯•4: æ‰§è¡ŒæŸ¥è¯¢</span>
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"4. æµ‹è¯• execute_query() åŠŸèƒ½..."</span>)
        result = db_mgr.execute_query(<span class="hljs-string">"SELECT COUNT(*) as count FROM users"</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"   æŸ¥è¯¢ç»“æœ: <span class="hljs-subst">{result}</span>"</span>)
        
        <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span>
        
    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"åŠŸèƒ½éªŒè¯å¤±è´¥: <span class="hljs-subst">{e}</span>"</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span>

<span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():
    <span class="hljs-string">"""ä¸»éªŒè¯æµç¨‹"""</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"MCP DataTools åŠŸèƒ½éªŒè¯"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"="</span> * <span class="hljs-number">50</span>)
    
    <span class="hljs-comment"># éªŒè¯æ•°æ®åº“è¿æ¥</span>
    db_ok = verify_database_connection()
    
    <span class="hljs-keyword">if</span> db_ok:
        <span class="hljs-comment"># éªŒè¯åŸºç¡€åŠŸèƒ½</span>
        func_ok = verify_basic_functions()
        
        <span class="hljs-keyword">if</span> func_ok:
            <span class="hljs-built_in">print</span>(<span class="hljs-string">"\n æ‰€æœ‰åŸºç¡€åŠŸèƒ½éªŒè¯é€šè¿‡ï¼"</span>)
        <span class="hljs-keyword">else</span>:
            <span class="hljs-built_in">print</span>(<span class="hljs-string">"\néƒ¨åˆ†åŠŸèƒ½éªŒè¯å¤±è´¥ï¼Œè¯·æ£€æŸ¥ä»£ç "</span>)
    <span class="hljs-keyword">else</span>:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"\næ•°æ®åº“è¿æ¥å¤±è´¥ï¼Œè¯·å…ˆåˆ›å»ºæµ‹è¯•æ•°æ®åº“"</span>)
    
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"\n"</span> + <span class="hljs-string">"="</span> * <span class="hljs-number">50</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"éªŒè¯å®Œæˆï¼ç°åœ¨å¯ä»¥åœ¨Cursorä¸­æµ‹è¯•MCPåŠŸèƒ½äº†ã€‚"</span>)

<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    main()
</code></pre>
<h3 data-id="heading-6">è¿è¡ŒéªŒè¯</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1. ç¡®ä¿æœ‰æµ‹è¯•æ•°æ®</span>
python data/init_sqlite_db.py

<span class="hljs-comment"># 2. è¿è¡ŒåŠŸèƒ½éªŒè¯</span>
python tests/verify_functions.py
</code></pre>
<h3 data-id="heading-7">éªŒè¯ç»“æœç¤ºä¾‹</h3>
<pre><code class="hljs language-css" lang="css">MCP DataTools åŠŸèƒ½éªŒè¯
==================================================
=== æ•°æ®åº“è¿æ¥éªŒè¯ ===
æ•°æ®åº“è¿æ¥æˆåŠŸ

=== åŸºç¡€åŠŸèƒ½éªŒè¯ ===
<span class="hljs-number">1</span>. æµ‹è¯• list_tables() åŠŸèƒ½...
   æ‰¾åˆ° <span class="hljs-number">3</span> ä¸ªè¡¨: orders, products, users
<span class="hljs-number">2</span>. æµ‹è¯• <span class="hljs-built_in">filter_table_names</span>() åŠŸèƒ½...
   æœç´¢ <span class="hljs-string">'user'</span> æ‰¾åˆ°: [<span class="hljs-string">'users'</span>]
<span class="hljs-number">3</span>. æµ‹è¯• <span class="hljs-built_in">get_table_schema</span>() åŠŸèƒ½...
  è¡¨ <span class="hljs-string">'orders'</span> æœ‰ <span class="hljs-number">3</span> ä¸ªåˆ—
<span class="hljs-number">4</span>. æµ‹è¯• <span class="hljs-built_in">execute_query</span>() åŠŸèƒ½...
   æŸ¥è¯¢ç»“æœ: [{'count': <span class="hljs-number">2</span>}]

 æ‰€æœ‰åŸºç¡€åŠŸèƒ½éªŒè¯é€šè¿‡ï¼

==================================================
éªŒè¯å®Œæˆï¼ç°åœ¨å¯ä»¥åœ¨<span class="hljs-attribute">Cursor</span>ä¸­æµ‹è¯•MCPåŠŸèƒ½äº†ã€‚
</code></pre>
<h2 data-id="heading-8">ç¬¬äº”æ­¥ï¼šåŠŸèƒ½æ¼”ç¤ºæ•ˆæœ</h2>
<p>ç°åœ¨è®©æˆ‘ä»¬çœ‹çœ‹è¿™äº›åŠŸèƒ½åœ¨å®é™…ä½¿ç”¨ä¸­çš„æ•ˆæœï¼š</p>
<h3 data-id="heading-9">1. æ™ºèƒ½æœç´¢è¡¨å</h3>
<p>è¯•è¯•é—®AIï¼š"æ‰¾æ‰¾ç”¨æˆ·ç›¸å…³çš„è¡¨"</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a9aaf1817a1142ec8d64fc5e6abd1ea3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg57qi6by75a2Q5pe25Luj:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766975226&amp;x-signature=hPNGGSq%2FZQ%2B3cOM94IJFedhU99g%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>æˆ–è€…é—®ï¼š"æœ‰å“ªäº›è®¢å•ç›¸å…³çš„è¡¨ï¼Ÿ"</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/60fdae4b2f1749a480ca74749740d2ee~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg57qi6by75a2Q5pe25Luj:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766975226&amp;x-signature=4KDTd474mpK00bfGShmovx4jfSc%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-10">2. æ·±åº¦è§£æè¡¨ç»“æ„</h3>
<p>é—®AIï¼š"usersè¡¨çš„ç»“æ„æ˜¯ä»€ä¹ˆæ ·çš„ï¼Ÿ"
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c616716b2b5147d4bc59acb8a43e501c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg57qi6by75a2Q5pe25Luj:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766975226&amp;x-signature=Hrpqg2FSTe%2BIpa8GZAIH4RFnCk8%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-11">3. å®‰å…¨æ‰§è¡ŒSQLæŸ¥è¯¢</h3>
<p><strong>ç®€å•æŸ¥è¯¢ï¼š</strong> "æŸ¥è¯¢usersè¡¨ä¸­çš„æ‰€æœ‰æ•°æ®"
AIæ‰§è¡Œï¼š<code>SELECT * FROM users</code>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/26ae800e66a84824ae826b4bb7fb35a9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg57qi6by75a2Q5pe25Luj:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766975226&amp;x-signature=K%2FqXHYIrcTFNldQ5y6MPzx4A5Ro%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p><strong>æ¡ä»¶æŸ¥è¯¢ï¼š</strong> "æŸ¥è¯¢ä»·æ ¼å¤§äº1000çš„äº§å“"
AIæ‰§è¡Œï¼š<code>SELECT * FROM products WHERE price &gt; 1000</code>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f13e52213a844868bfc6f1846dbe91a7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg57qi6by75a2Q5pe25Luj:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766975226&amp;x-signature=GBIBwNm1C4OwUo1XVpHhth0QS6A%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p><strong>å¤æ‚æŸ¥è¯¢ï¼š</strong> "æŸ¥è¯¢æ¯ä¸ªç”¨æˆ·çš„è®¢å•æ•°é‡"
AIå¯ä»¥æ‰§è¡ŒJOINæŸ¥è¯¢
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1f7057d74bcd404685a17c71b52e843d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg57qi6by75a2Q5pe25Luj:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766975226&amp;x-signature=tsGmtk4qNW2NMH%2FZlBtc1kkMrqY%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h2 data-id="heading-12">æ€»ç»“ä¸é¢„å‘Š</h2>
<p>ç¬¬2ç¯‡æˆ‘ä»¬æˆåŠŸå®ç°äº†3ä¸ªæ ¸å¿ƒåŠŸèƒ½ï¼šè¡¨æœç´¢ã€ç»“æ„åˆ†æã€å®‰å…¨SQLæ‰§è¡Œï¼Œè®©AIèƒ½å¤Ÿç†è§£æ•°æ®åº“ç»“æ„å¹¶æ‰§è¡Œå¤æ‚æŸ¥è¯¢ã€‚ç¬¬3ç¯‡å°†å®ç°PostgreSQLã€MySQLç­‰ä¸»æµæ•°æ®åº“æ”¯æŒï¼ŒåŠ ä¸ŠåŸºç¡€è¿æ¥æ± é…ç½®å’ŒDockeréƒ¨ç½²ï¼Œè®©è¿™ä¸ªå·¥å…·çœŸæ­£èµ°å‘ç”Ÿäº§ç¯å¢ƒã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[JobFlow èƒŒåï¼šäº”ä¸ªè®©æˆ‘è±ç„¶å¼€æœ—çš„è®¾è®¡ç¬é—´]]></title>    <link>https://juejin.cn/post/7585751355593506835</link>    <guid>https://juejin.cn/post/7585751355593506835</guid>    <pubDate>2025-12-22T02:31:20.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7585751355593506835" data-draft-id="7585825055437488134" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="JobFlow èƒŒåï¼šäº”ä¸ªè®©æˆ‘è±ç„¶å¼€æœ—çš„è®¾è®¡ç¬é—´"/> <meta itemprop="keywords" content="åç«¯,æ¶æ„,åˆ†å¸ƒå¼"/> <meta itemprop="datePublished" content="2025-12-22T02:31:20.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è¸æµªæ— ç—•"/> <meta itemprop="url" content="https://juejin.cn/user/2834988091055719"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            JobFlow èƒŒåï¼šäº”ä¸ªè®©æˆ‘è±ç„¶å¼€æœ—çš„è®¾è®¡ç¬é—´
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2834988091055719/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è¸æµªæ— ç—•
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-22T02:31:20.000Z" title="Mon Dec 22 2025 02:31:20 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    9
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»17åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ğŸ”— å¼€æºåœ°å€ä¸ç³»åˆ—æ–‡ç« </h2>
<ul>
<li><strong>å¼€æºåœ°å€</strong>ï¼š<code>https://gitee.com/sh_wangwanbao/job-flow</code></li>
<li><strong>ç³»åˆ—æ–‡ç« ï¼š</strong>
<ul>
<li><a href="https://juejin.cn/post/7583469866007969827" target="_blank" title="https://juejin.cn/post/7583469866007969827">ç¬¬ä¸€ç¯‡ï¼šåŸºäºNacosçš„è½»é‡ä»»åŠ¡è°ƒåº¦æ–¹æ¡ˆ â€”â€” ä» XXL-Job çš„ç—›ç‚¹è¯´èµ·</a></li>
<li><a href="https://juejin.cn/post/7584353612501106729" target="_blank" title="https://juejin.cn/post/7584353612501106729">ç¬¬äºŒç¯‡ï¼šJobFlow å®ç°æ–¹æ¡ˆï¼šäº‘åŸç”Ÿæ—¶ä»£çš„ä»»åŠ¡è°ƒåº¦æ–°æ€è·¯</a></li>
<li><a href="https://juejin.cn/post/7585727457472823296" target="_blank" title="https://juejin.cn/post/7585727457472823296">ç¬¬ä¸‰ç¯‡ï¼šJobFlow å®æˆ˜ï¼šæ— é”è°ƒåº¦æ˜¯æ€ä¹ˆåšåˆ°çš„</a></li>
<li><a href="https://juejin.cn/editor/drafts/7585825055437488134" target="_blank" title="https://juejin.cn/editor/drafts/7585825055437488134">ç¬¬å››ç¯‡ï¼šJobFlow èƒŒåï¼šäº”ä¸ªè®©æˆ‘è±ç„¶å¼€æœ—çš„è®¾è®¡ç¬é—´</a></li>
<li>ç¬¬äº”ç¯‡ï¼šåˆ†å¸ƒå¼è°ƒåº¦çš„ç»ˆæéš¾é¢˜ï¼šè¶…æ—¶ã€è¡¥å¿ä¸æ¼è°ƒï¼ˆç»Ÿå†™ä¸­ï¼‰</li>
<li>ç¬¬å…­ç¯‡ï¼šå»¶æ—¶é˜Ÿåˆ—çš„è®¾è®¡ä¸å®ç°ï¼ˆç»Ÿå†™ä¸­ï¼‰</li>
</ul>
</li>
</ul>
<h2 data-id="heading-1">å‰è¨€</h2>
<p>æ˜¨å¤©æ™šä¸ŠæŠ˜è…¾åˆ°12ç‚¹ï¼ŒæŠŠ JobFlow çš„å»¶æ—¶é˜Ÿåˆ—åŠŸèƒ½æµ‹è¯•å®Œï¼Œçœ‹ç€æ—¥å¿—é‡Œä¸€æ¡æ¡ä»»åŠ¡å‡†æ—¶æ‰§è¡Œï¼Œçªç„¶æœ‰ç§æ„Ÿè§‰ï¼š<strong>è¿™ä¸ªä¸œè¥¿ï¼Œæƒ³é€šäº†å°±å¾ˆç®€å•ã€‚</strong></p>
<p>ä»æœ€å¼€å§‹è¢« XXL-Job çš„ä¸¤å¥—æ³¨å†Œä¸­å¿ƒæå¾—å¤´ç–¼ï¼Œåˆ°å†³å®šè‡ªå·±å†™ä¸€ä¸ªè°ƒåº¦æ¡†æ¶ï¼Œå†åˆ°æ ¸å¿ƒåŠŸèƒ½å¼€å‘å®Œæˆï¼Œå‰åä¸åˆ°ä¸¤å‘¨æ—¶é—´ã€‚ä¸æ˜¯å› ä¸ºæˆ‘å†™ä»£ç æœ‰å¤šå¿«ï¼Œè€Œæ˜¯æƒ³æ¸…æ¥šäº†å‡ ä¸ªå…³é”®é—®é¢˜ä¹‹åï¼Œä»£ç å‡ ä¹æ˜¯è‡ªå·±é•¿å‡ºæ¥çš„ã€‚</p>
<p>è¿™ç¯‡æ–‡ç« ä¸è®²å…·ä½“çš„ä»£ç å®ç°ï¼Œé‚£äº›æŠ€æœ¯ç»†èŠ‚åé¢ä¼šæœ‰ä¸“é—¨çš„æ–‡ç« ã€‚ä»Šå¤©æƒ³èŠçš„æ˜¯ï¼š<strong>è¿™ä¸¤å‘¨æˆ‘æ˜¯æ€ä¹ˆæƒ³çš„ï¼Œä¸ºä»€ä¹ˆä¼šè¿™ä¹ˆè®¾è®¡ã€‚</strong></p>
<p><strong>å…ˆè¯´æ¸…æ¥šé€‚ç”¨è¾¹ç•Œï¼š</strong></p>
<p>JobFlow ä¸æ˜¯è¦æ›¿ä»£ XXL-Jobï¼Œè€Œæ˜¯åœ¨ç‰¹å®šåœºæ™¯ä¸‹çš„ä¸€ä¸ªè½»é‡çº§é€‰æ‹©ã€‚</p>
<p>é€‚åˆç”¨ JobFlow çš„åœºæ™¯ï¼š</p>
<ul>
<li>æŠ€æœ¯æ ˆ all-in Spring Cloud Alibaba + Nacos</li>
<li>ä¸šåŠ¡å›¢é˜Ÿè‡ªå·±ç»´æŠ¤è°ƒåº¦ç³»ç»Ÿï¼ˆä¸éœ€è¦ä¸­é—´ä»¶å›¢é˜Ÿï¼‰</li>
<li>ä¸šåŠ¡å‹è°ƒåº¦ + å»¶æ—¶ä»»åŠ¡ï¼ˆè®¢å•è¶…æ—¶ã€æ•°æ®åŒæ­¥ã€å®šæ—¶æ¸…ç†ï¼‰</li>
<li>ä¸­å°è§„æ¨¡ï¼ˆç™¾ä¸‡çº§ä»¥ä¸‹ä»»åŠ¡é‡ï¼‰</li>
</ul>
<p>ä¸é€‚åˆç”¨ JobFlow çš„åœºæ™¯ï¼š</p>
<ul>
<li>éœ€è¦ Web ç®¡ç†åå°ï¼ˆJobFlow æ²¡æœ‰ UIï¼Œé€šè¿‡æ•°æ®åº“å’Œé…ç½®æ–‡ä»¶ç®¡ç†ï¼‰</li>
<li>è·¨å…¬å¸ã€å¤šç§Ÿæˆ·çš„é€šç”¨è°ƒåº¦å¹³å°</li>
<li>å¼º SLA çš„é‡‘èæ ¸å¿ƒä»»åŠ¡ï¼ˆç§’çº§ç²¾åº¦ä¿è¯ï¼‰</li>
<li>è¶…å¤§è§„æ¨¡ Cron å¹³å°ï¼ˆéœ€è¦åˆ†åº“åˆ†è¡¨ï¼‰</li>
</ul>
<p>å¦‚æœä½ çš„åœºæ™¯ä¸åœ¨ä¸Šé¢çš„"é€‚åˆ"åˆ—è¡¨é‡Œï¼Œå»ºè®®ç›´æ¥ç”¨ XXL-Jobï¼ŒåŠŸèƒ½å®Œæ•´ã€ç¤¾åŒºæˆç†Ÿã€‚</p>
<p>å¥½ï¼Œè¾¹ç•Œè¯´æ¸…æ¥šäº†ï¼Œå¼€å§‹æ­£æ–‡ã€‚</p>
<p>å†™è¿™ç¯‡æ–‡ç« æœ‰ç‚¹å†’é™©ï¼Œå› ä¸ºä¸å¤Ÿ"ä¸“ä¸š"ã€‚æ²¡æœ‰ä¸¥è°¨çš„ç†è®ºæ¨å¯¼ï¼Œæ²¡æœ‰å®Œæ•´çš„æ€§èƒ½æµ‹è¯•æŠ¥å‘Šï¼Œå°±æ˜¯è®°å½•ä¸€äº›æƒ³æ³•å’Œæ„Ÿæ‚Ÿã€‚ä½†æˆ‘è§‰å¾—è¿™ç§"æƒ³é€šäº†"çš„è¿‡ç¨‹ï¼Œå¯èƒ½æ¯”ä»£ç æœ¬èº«æ›´æœ‰ä»·å€¼ã€‚</p>
<h2 data-id="heading-2">ç—›ç‚¹ï¼šä¸¤å¥—æ³¨å†Œä¸­å¿ƒçš„å‰²è£‚æ„Ÿ</h2>
<p>äº‹æƒ…çš„èµ·å› å¾ˆç®€å•ï¼šæˆ‘ä»¬çš„å¾®æœåŠ¡ç”¨çš„æ˜¯ Spring Cloud Alibaba + Nacosï¼Œé¡¹ç›®é‡Œè¦åŠ å®šæ—¶ä»»åŠ¡ï¼Œè‡ªç„¶å°±æƒ³åˆ°äº† XXL-Jobã€‚</p>
<p>è£…ä¸Šï¼Œé…å¥½ï¼Œè·‘èµ·æ¥ï¼Œä¸€åˆ‡æ­£å¸¸ã€‚ä½†ç”¨äº†ä¸€æ®µæ—¶é—´ä¹‹åï¼Œæ€»è§‰å¾—å“ªé‡Œåˆ«æ‰­ã€‚</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TB
    subgraph Nacosä½“ç³»
        N[Nacos&lt;br/&gt;æœåŠ¡å‘ç°]
        S1[è®¢å•æœåŠ¡]
        S2[ç”¨æˆ·æœåŠ¡]
        S3[æ”¯ä»˜æœåŠ¡]
    end
    
    subgraph XXL-Jobä½“ç³»
        A[XXL-Job Admin&lt;br/&gt;è°ƒåº¦ä¸­å¿ƒ]
        E1[è®¢å•æœåŠ¡&lt;br/&gt;Executor]
        E2[ç”¨æˆ·æœåŠ¡&lt;br/&gt;Executor]
    end
    
    S1 --&gt; N
    S2 --&gt; N
    S3 --&gt; N
    
    E1 --&gt; A
    E2 --&gt; A
    
    S1 -.åŒä¸€ä¸ªåº”ç”¨.-&gt; E1
    S2 -.åŒä¸€ä¸ªåº”ç”¨.-&gt; E2
    
    style N fill:#90EE90
    style A fill:#FFB6C1
</code></pre>
<p>é—®é¢˜åœ¨å“ªï¼Ÿ</p>
<p><strong>åŒä¸€ä¸ªæœåŠ¡ï¼Œåœ¨ Nacos é‡Œæ³¨å†Œä¸€æ¬¡ï¼Œåœ¨ XXL-Job é‡Œåˆè¦æ³¨å†Œä¸€æ¬¡ã€‚</strong></p>
<p>æŸå¤©ä¸‹åˆï¼Œè®¢å•æœåŠ¡åœ¨ Nacos é‡Œæ˜¾ç¤ºä¸‹çº¿äº†ï¼Œè¿ç»´åŒå­¦è¯´æœºå™¨é‡å¯äº†ã€‚ä½† XXL-Job çš„ç®¡ç†åå°ä¸Šï¼Œè®¢å•æœåŠ¡çš„æ‰§è¡Œå™¨è¿˜æ˜¯åœ¨çº¿çŠ¶æ€ï¼Œå®šæ—¶ä»»åŠ¡è¿˜åœ¨å¾€è¿™ä¸ªå·²ç»æŒ‚æ‰çš„å®ä¾‹ä¸Šè°ƒåº¦ã€‚</p>
<p>æ’æŸ¥äº†åŠå¤©æ‰å‘ç°ï¼ŒXXL-Job çš„å¿ƒè·³æ£€æµ‹é—´éš”æ¯” Nacos é•¿ï¼Œæ‰€ä»¥æ‘˜é™¤å¾—æ…¢ã€‚</p>
<p>å½“æ—¶å°±åœ¨æƒ³ï¼š<strong>ä¸ºä»€ä¹ˆè¦ç»´æŠ¤ä¸¤å¥—çŠ¶æ€ï¼Ÿ</strong></p>
<p>è¿˜æœ‰ä¸ªé—®é¢˜ï¼šæ’æŸ¥ä»»åŠ¡æ‰§è¡Œå¤±è´¥çš„æ—¶å€™ï¼Œå¾—å…ˆå» XXL-Job çš„ç®¡ç†åå°æŸ¥è°ƒåº¦æ—¥å¿—ï¼Œç„¶åå†å» ELK æŸ¥æ‰§è¡Œå™¨çš„ä¸šåŠ¡æ—¥å¿—ã€‚ä¸¤ä¸ªæ—¥å¿—ç³»ç»Ÿä¹‹é—´æ²¡æœ‰å…³è”ï¼Œåªèƒ½é æ—¶é—´æˆ³å¯¹ã€‚</p>
<p>æœ‰ä¸€æ¬¡åŠå¤œè¢«å«èµ·æ¥æ’æŸ¥é—®é¢˜ï¼Œä»»åŠ¡è°ƒåº¦æ—¶é—´æ˜¯å‡Œæ™¨ 2:00:01ï¼Œæ‰§è¡Œå™¨æ—¥å¿—æ˜¯ 2:00:03ï¼Œä¸­é—´å·®äº† 2 ç§’ã€‚è¿™ 2 ç§’é‡Œå‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿä¸çŸ¥é“ã€‚è°ƒåº¦å™¨åˆ°æ‰§è¡Œå™¨ä¹‹é—´çš„é“¾è·¯æ–­äº†ï¼ŒæŸ¥ä¸åˆ°ã€‚</p>
<p><strong>ä¸¤å¥—æ³¨å†Œä¸­å¿ƒï¼Œä¸¤å¥—æ—¥å¿—ä½“ç³»ï¼Œå‰²è£‚çš„ã€‚</strong></p>
<h2 data-id="heading-3">ç¬¬ä¸€ä¸ªæƒ³æ³•ï¼šèƒ½ä¸èƒ½åªç”¨ Nacosï¼Ÿ</h2>
<p>å‘¨æœ«åœ¨å®¶èººç€ï¼Œè„‘å­é‡Œä¸€ç›´åœ¨æƒ³è¿™ä¸ªé—®é¢˜ã€‚</p>
<p>XXL-Job ä¸ºä»€ä¹ˆè¦è‡ªå·±æä¸€å¥—æ³¨å†Œä¸­å¿ƒï¼Ÿå› ä¸ºå®ƒè¦åšæˆé€šç”¨çš„ä»»åŠ¡è°ƒåº¦å¹³å°ï¼Œä¸èƒ½ç»‘å®šåœ¨æŸä¸ªå…·ä½“çš„æœåŠ¡å‘ç°ç»„ä»¶ä¸Šã€‚è¿™ä¸ªé€»è¾‘æ²¡é—®é¢˜ï¼Œä½†å¯¹æˆ‘ä»¬è¿™ç§å·²ç» all-in Nacos çš„é¡¹ç›®æ¥è¯´ï¼Œå°±æ˜¯é‡å¤å»ºè®¾äº†ã€‚</p>
<p><strong>å¦‚æœè°ƒåº¦å™¨ä¹Ÿæ˜¯ä¸€ä¸ªæ™®é€šçš„å¾®æœåŠ¡ï¼Œç›´æ¥æ³¨å†Œåˆ° Nacos ä¸Šå‘¢ï¼Ÿ</strong></p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TB
    subgraph Nacosç»Ÿä¸€ä½“ç³»
        N[Nacos]
        
        subgraph è°ƒåº¦å±‚
            J1[JobFlow&lt;br/&gt;Scheduler-1]
            J2[JobFlow&lt;br/&gt;Scheduler-2]
        end
        
        subgraph ä¸šåŠ¡å±‚
            S1[è®¢å•æœåŠ¡-1]
            S2[è®¢å•æœåŠ¡-2]
            S3[ç”¨æˆ·æœåŠ¡-1]
        end
    end
    
    J1 --&gt; N
    J2 --&gt; N
    S1 --&gt; N
    S2 --&gt; N
    S3 --&gt; N
    
    J1 -.å‘ç°æœåŠ¡.-&gt; N
    J1 --&gt; |HTTPè°ƒç”¨| S1
    J1 --&gt; |HTTPè°ƒç”¨| S2
    
    style N fill:#90EE90
</code></pre>
<p>è¿™ä¸ªæƒ³æ³•ä¸€å‡ºæ¥ï¼Œåé¢çš„è®¾è®¡å°±é¡ºäº†ã€‚</p>
<p>è°ƒåº¦å™¨ä¸æ˜¯ç‹¬ç«‹çš„å¹³å°ï¼Œè€Œæ˜¯ä¸šåŠ¡ä¸­å°çš„ä¸€éƒ¨åˆ†ï¼š</p>
<ul>
<li>å’Œä¸šåŠ¡æœåŠ¡éƒ¨ç½²åœ¨åŒä¸€ä¸ª K8s é›†ç¾¤</li>
<li>ç”¨åŒä¸€å¥— Prometheus ç›‘æ§</li>
<li>æ—¥å¿—è¾“å‡ºåˆ°åŒä¸€ä¸ª ELK</li>
<li>é€šè¿‡ Nacos å‘ç°ä¸šåŠ¡æœåŠ¡</li>
</ul>
<p><strong>ä¸éœ€è¦å•ç‹¬çš„ç®¡ç†åå°ï¼Œä¸éœ€è¦å•ç‹¬çš„è¿ç»´å›¢é˜Ÿï¼Œä¸šåŠ¡å›¢é˜Ÿè‡ªå·±å°±èƒ½ç»´æŠ¤ã€‚</strong></p>
<p>è¿™ä¸ªæ€è·¯ç¡®å®šä¸‹æ¥ï¼Œå¾ˆå¤šé—®é¢˜å°±è¿åˆƒè€Œè§£äº†ã€‚</p>
<h2 data-id="heading-4">ç¬¬äºŒä¸ªæƒ³æ³•ï¼šè°ƒåº¦å™¨å¤šå®ä¾‹æ€ä¹ˆåŠï¼Ÿ</h2>
<p>è°ƒåº¦å™¨æ˜¯ä¸ªå¾®æœåŠ¡ï¼Œé‚£è‚¯å®šè¦å¤šå®ä¾‹éƒ¨ç½²ï¼ˆé«˜å¯ç”¨ï¼‰ã€‚é—®é¢˜æ¥äº†ï¼š</p>
<pre><code class="hljs">å‡è®¾éƒ¨ç½² 3 ä¸ªè°ƒåº¦å™¨å®ä¾‹
æœ‰ 50 ä¸ªå®šæ—¶ä»»åŠ¡
æ¯åˆ†é’Ÿéƒ½è¦æ‰§è¡Œ

å¦‚æœ 3 ä¸ªå®ä¾‹éƒ½å»è°ƒåº¦è¿™ 50 ä¸ªä»»åŠ¡
â†’ æ¯ä¸ªä»»åŠ¡ä¼šè¢«è°ƒåº¦ 3 æ¬¡
â†’ é‡å¤æ‰§è¡Œ
</code></pre>
<p>ä¼ ç»Ÿæ–¹æ¡ˆæ˜¯ç”¨åˆ†å¸ƒå¼é”ï¼š3 ä¸ªå®ä¾‹å»æ•°æ®åº“æŠ¢é”ï¼ŒæŠ¢åˆ°çš„æ‰èƒ½è°ƒåº¦ã€‚</p>
<p>ä½†è¿™æ ·æœ‰ä¸ªé—®é¢˜ï¼š</p>
<pre><code class="hljs language-diff" lang="diff">æ¯åˆ†é’Ÿï¼š
<span class="hljs-deletion">- 3 ä¸ªå®ä¾‹ Ã— 50 ä¸ªä»»åŠ¡ = 150 æ¬¡æ•°æ®åº“ UPDATE</span>
<span class="hljs-deletion">- ä½†åªæœ‰ 50 æ¬¡æ˜¯æœ‰æ•ˆçš„</span>
<span class="hljs-deletion">- å¦å¤– 100 æ¬¡æ˜¯æµªè´¹</span>

ä¸€å¤©ä¸‹æ¥ï¼š
<span class="hljs-deletion">- 144,000 æ¬¡æ— æ•ˆæ“ä½œ</span>
</code></pre>
<p>å‘¨æ—¥æ™šä¸Šåƒå®Œé¥­ï¼Œåœ¨é˜³å°æŠ½çƒŸçš„æ—¶å€™æƒ³åˆ°ä¸€ä¸ªç‚¹ï¼š<strong>ä¸ºä»€ä¹ˆä¸€å®šè¦æŠ¢é”ï¼Ÿ</strong></p>
<p>3 ä¸ªå®ä¾‹éƒ½å»æŠ¢ï¼Œæœ¬è´¨ä¸Šæ˜¯å› ä¸ºå®ƒä»¬ä¸çŸ¥é“è‡ªå·±è¯¥ä¸è¯¥æ‰§è¡Œè¿™ä¸ªä»»åŠ¡ã€‚é‚£å¦‚æœè®©æ¯ä¸ªå®ä¾‹è‡ªå·±ç®—å‡ºæ¥å‘¢ï¼Ÿ</p>
<pre><code class="hljs language-diff" lang="diff">è°ƒåº¦å™¨å®ä¾‹åˆ—è¡¨ï¼ˆä» Nacos æ‹¿åˆ°ï¼‰ï¼š
<span class="hljs-deletion">- scheduler-001</span>
<span class="hljs-deletion">- scheduler-002  </span>
<span class="hljs-deletion">- scheduler-003</span>

ä»»åŠ¡åˆ—è¡¨ï¼š
<span class="hljs-deletion">- orderSync</span>
<span class="hljs-deletion">- userClean</span>
<span class="hljs-deletion">- reportGen</span>

åˆ†é…è§„åˆ™ï¼š
<span class="hljs-deletion">- "orderSync".hashCode() % 3 = 0 â†’ scheduler-001 è´Ÿè´£</span>
<span class="hljs-deletion">- "userClean".hashCode() % 3 = 2 â†’ scheduler-003 è´Ÿè´£</span>
<span class="hljs-deletion">- "reportGen".hashCode() % 3 = 1 â†’ scheduler-002 è´Ÿè´£</span>
</code></pre>
<p><strong>æ¯ä¸ªå®ä¾‹è‡ªå·±ç®—ï¼Œç®—å®Œä¹‹ååªæ‰§è¡Œè‡ªå·±è´Ÿè´£çš„ä»»åŠ¡ï¼Œä¸éœ€è¦å»æŠ¢é”ã€‚</strong></p>
<p>è¿™å°±æ˜¯ Hash åˆ†åŒº + Owner åˆ¤å®šã€‚</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TB
    subgraph ä¼ ç»Ÿæ–¹æ¡ˆ
        A1[å®ä¾‹1] --&gt; L[åˆ†å¸ƒå¼é”]
        A2[å®ä¾‹2] --&gt; L
        A3[å®ä¾‹3] --&gt; L
        L --&gt; T[ä»»åŠ¡æ‰§è¡Œ]
    end
    
    subgraph JobFlowæ–¹æ¡ˆ
        B1[å®ä¾‹1&lt;br/&gt;ç®—å‡ºè´Ÿè´£ A,D,G] --&gt; T1[æ‰§è¡Œ A,D,G]
        B2[å®ä¾‹2&lt;br/&gt;ç®—å‡ºè´Ÿè´£ B,E,H] --&gt; T2[æ‰§è¡Œ B,E,H]
        B3[å®ä¾‹3&lt;br/&gt;ç®—å‡ºè´Ÿè´£ C,F,I] --&gt; T3[æ‰§è¡Œ C,F,I]
    end
</code></pre>
<p>ä»£ç å†™èµ·æ¥ä¹Ÿå¾ˆç®€å•ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä» Nacos è·å–æ‰€æœ‰è°ƒåº¦å™¨å®ä¾‹</span>
List&lt;Instance&gt; instances = namingService.getAllInstances(serviceName);

<span class="hljs-comment">// æ’åºï¼ˆå…³é”®ï¼æ‰€æœ‰å®ä¾‹çœ‹åˆ°çš„é¡ºåºè¦ä¸€è‡´ï¼‰</span>
instances.sort(Comparator.comparing(i -&gt; i.getIp() + <span class="hljs-string">":"</span> + i.getPort()));

<span class="hljs-comment">// è®¡ç®—ä»»åŠ¡å½’è°</span>
<span class="hljs-type">int</span> <span class="hljs-variable">hash</span> <span class="hljs-operator">=</span> Math.abs(jobName.hashCode());
<span class="hljs-type">int</span> <span class="hljs-variable">targetIndex</span> <span class="hljs-operator">=</span> hash % instances.size();

<span class="hljs-comment">// åˆ¤æ–­æ˜¯ä¸æ˜¯æˆ‘</span>
<span class="hljs-keyword">return</span> currentIndex == targetIndex;
</code></pre>
<p>æƒ³é€šè¿™ä¸ªä¹‹åï¼Œæˆ‘çŸ¥é“è¿™äº‹èƒ½æˆäº†ã€‚</p>
<h2 data-id="heading-5">ç¬¬ä¸‰ä¸ªæƒ³æ³•ï¼šä¼šä¸ä¼šæ¼è°ƒï¼Ÿ</h2>
<p>æ— é”è®¾è®¡è§£å†³äº†é‡å¤æ‰§è¡Œçš„é—®é¢˜ï¼Œä½†å¸¦æ¥äº†æ–°é—®é¢˜ï¼š<strong>ä¼šä¸ä¼šæ¼è°ƒï¼Ÿ</strong></p>
<pre><code class="hljs language-diff" lang="diff">åœºæ™¯ï¼š3 ä¸ªè°ƒåº¦å™¨å®ä¾‹
<span class="hljs-deletion">- scheduler-001 è´Ÿè´£ orderSync</span>
<span class="hljs-deletion">- scheduler-002 è´Ÿè´£ userClean</span>
<span class="hljs-deletion">- scheduler-003 è´Ÿè´£ reportGen</span>

å¦‚æœ scheduler-001 æŒ‚äº†ï¼š
<span class="hljs-deletion">- Nacos æ£€æµ‹åˆ°ï¼ˆçº¦ 15 ç§’ï¼‰</span>
<span class="hljs-deletion">- scheduler-002 å’Œ 003 é‡æ–°è®¡ç®— Hash</span>
<span class="hljs-deletion">- scheduler-002 æ¥ç®¡ orderSync</span>

ä½†è¿™ 15 ç§’å†…ï¼ŒorderSync å¦‚æœåˆ°æœŸäº†å‘¢ï¼Ÿ
â†’ æ¼è°ƒäº†
</code></pre>
<p>è¿™æ˜¯æ— é”è®¾è®¡çš„ä»£ä»·ã€‚</p>
<p><strong>è¯´æ¸…æ¥šï¼šæˆ‘ä»¬ç‰ºç‰²äº†ä»€ä¹ˆ</strong></p>
<p>ä¸ºäº†è¿½æ±‚æ— é”çš„æ€§èƒ½ï¼Œæˆ‘ä»¬æ”¾å¼ƒäº†ä¸€äº›ä¸œè¥¿ï¼š</p>
<p>æ”¾å¼ƒçš„ä¿è¯ï¼š</p>
<ul>
<li>ç²¾ç¡®åˆ°ç§’çš„å¼ºä¿è¯ â†’ å¯èƒ½å»¶è¿Ÿ 3-5 åˆ†é’Ÿï¼ˆå·¡æ£€å‘¨æœŸï¼‰</li>
<li>è°ƒåº¦ç¬æ—¶ä¸€è‡´æ€§ â†’ å®ä¾‹åˆ‡æ¢æœŸé—´å¯èƒ½æ¼è°ƒ</li>
<li>å®Œå…¨æ—  DB ä¾èµ– â†’ å”¯ä¸€ç´¢å¼•å…œåº•ä»éœ€æ•°æ®åº“</li>
</ul>
<p>æ¢æ¥çš„å¥½å¤„ï¼š</p>
<ul>
<li>æ•°æ®åº“å‹åŠ›é™ä½ 67%</li>
<li>æ— åˆ†å¸ƒå¼é”å¼€é”€</li>
<li>å®ä¾‹æ‰©ç¼©å®¹è‡ªåŠ¨ç”Ÿæ•ˆ</li>
</ul>
<p>è¿™æ˜¯å…¸å‹çš„åˆ†å¸ƒå¼æƒè¡¡ï¼š<strong>ä¸è¿½æ±‚å®Œç¾çš„ä¸€è‡´æ€§ï¼Œè€Œæ˜¯ç”¨å¼‚æ­¥è¡¥å¿æ¢å–æ›´å¥½çš„æ€§èƒ½ã€‚</strong></p>
<p>å‘¨ä¸€ä¸Šåˆå†™ä»£ç çš„æ—¶å€™ä¸€ç›´åœ¨æƒ³è¿™ä¸ªé—®é¢˜ã€‚ä¸­åˆåƒé¥­çš„æ—¶å€™çªç„¶æƒ³æ˜ç™½äº†ï¼š<strong>ç”¨å·¡æ£€è¡¥å¿ã€‚</strong></p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TB
    subgraph æ­£å¸¸æµç¨‹
        A[Hashåˆ†åŒº] --&gt; B[Owneråˆ¤å®š]
        B --&gt; C[æ‰§è¡Œä»»åŠ¡]
    end
    
    subgraph å¼‚å¸¸æµç¨‹
        D[å·¡æ£€ä»»åŠ¡&lt;br/&gt;æœ€å°èŠ‚ç‚¹è´Ÿè´£] --&gt; E[æ‰«ææ•°æ®åº“]
        E --&gt; F{åº”è¯¥æ‰§è¡Œ&lt;br/&gt;ä½†æ²¡æ‰§è¡Œ?}
        F --&gt; |æ˜¯| G[è¡¥å¿è§¦å‘]
        F --&gt; |å¦| H[è·³è¿‡]
    end
    
    C --&gt; |99%æƒ…å†µ| I[ä»»åŠ¡å®Œæˆ]
    G --&gt; |1%æƒ…å†µ| I
</code></pre>
<p>å…·ä½“æ€ä¹ˆåšï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">æœ€å°èŠ‚ç‚¹è´Ÿè´£å·¡æ£€ï¼ˆé€‰ä¸»è§„åˆ™å¾ˆç®€å•ï¼‰ï¼š
<span class="hljs-bullet">1.</span> ä» Nacos è·å–æ‰€æœ‰å®ä¾‹
<span class="hljs-bullet">2.</span> æ’åº
<span class="hljs-bullet">3.</span> æœ€å°çš„é‚£ä¸ªå°±æ˜¯ Leader

å·¡æ£€ä»»åŠ¡æ¯ 3 åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡ï¼š
<span class="hljs-bullet">1.</span> æŸ¥è¯¢æ‰€æœ‰å¯ç”¨çš„ä»»åŠ¡
<span class="hljs-bullet">2.</span> åˆ¤æ–­ï¼šåº”è¯¥æ‰§è¡Œä½†æ²¡æ‰§è¡Œ
<span class="hljs-bullet">3.</span> è¡¥å¿è§¦å‘

å³ä½¿æ¼è°ƒäº†ï¼Œæœ€å¤šå»¶è¿Ÿ 3 åˆ†é’Ÿ
</code></pre>
<p>è¿™æ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿçš„ç»å…¸åšæ³•ï¼š<strong>æ­£å¸¸æµç¨‹è¿½æ±‚æ•ˆç‡ï¼Œå¼‚å¸¸æµç¨‹è¿½æ±‚å¯é æ€§ã€‚</strong></p>
<p>å‘¨ä¸€ä¸‹åˆæŠŠè¿™å—ä»£ç å†™å®Œï¼Œæµ‹è¯•äº†ä¸€ä¸‹ï¼šåœæ‰ä¸€ä¸ªè°ƒåº¦å™¨å®ä¾‹ï¼Œä»»åŠ¡ç¡®å®åœ¨ 15 ç§’å·¦å³åˆ‡æ¢è¿‡å»äº†ï¼›åœæ‰æ‰€æœ‰å®ä¾‹å†å¯åŠ¨ï¼Œå·¡æ£€ä»»åŠ¡ä¼šè¡¥å¿æ‰§è¡Œã€‚</p>
<p>å¿ƒé‡Œè¸å®äº†ã€‚</p>
<h2 data-id="heading-6">ç¬¬å››ä¸ªæƒ³æ³•ï¼šå›ºå®šåˆ†ç‰‡çš„å¦™å¤„</h2>
<p>ä»»åŠ¡è°ƒåº¦è¿˜æœ‰ä¸ªå¸¸è§åœºæ™¯ï¼šå¤§æ•°æ®é‡çš„æ‰¹å¤„ç†ã€‚</p>
<p>æ¯”å¦‚æ¯å¤©å‡Œæ™¨è¦ç»™ 100 ä¸‡ç”¨æˆ·å‘æ¨é€ï¼Œæ€ä¹ˆåŠï¼Ÿ</p>
<p>ä¼ ç»Ÿåšæ³•æ˜¯åŠ¨æ€åˆ†ç‰‡ï¼šè°ƒåº¦å™¨æ ¹æ®æ‰§è¡Œå™¨å®ä¾‹æ•°ï¼ŒåŠ¨æ€åˆ†é…ä»»åŠ¡èŒƒå›´ã€‚æ¯”å¦‚æœ‰ 10 ä¸ªæ‰§è¡Œå™¨å®ä¾‹ï¼Œå°±åˆ†æˆ 10 ç‰‡ã€‚</p>
<p>ä½†è¿™æ ·æœ‰ä¸ªé—®é¢˜ï¼š</p>
<pre><code class="hljs language-diff" lang="diff">åœºæ™¯ï¼š10 ä¸ªæ‰§è¡Œå™¨å®ä¾‹ï¼Œ100 ä¸‡ç”¨æˆ·

è°ƒåº¦æ—¶åˆ»ï¼š
<span class="hljs-deletion">- å®ä¾‹ 1 è´Ÿè´£ 0-10 ä¸‡</span>
<span class="hljs-deletion">- å®ä¾‹ 2 è´Ÿè´£ 10-20 ä¸‡</span>
<span class="hljs-deletion">- ...</span>

å¦‚æœå®ä¾‹ 5 æŒ‚äº†ï¼š
<span class="hljs-deletion">- å‰©ä½™ 9 ä¸ªå®ä¾‹</span>
<span class="hljs-deletion">- éœ€è¦é‡æ–°åˆ†ç‰‡ï¼š0-11.1 ä¸‡ã€11.1-22.2 ä¸‡...</span>
<span class="hljs-deletion">- ä½†å·²ç»åœ¨æ‰§è¡Œçš„åˆ†ç‰‡æ€ä¹ˆåŠï¼Ÿ</span>
</code></pre>
<p>å‘¨äºŒæ™šä¸Šåœ¨å®¶æƒ³è¿™ä¸ªé—®é¢˜ï¼Œæƒ³äº†å¾ˆä¹…ã€‚</p>
<p>å‘¨ä¸‰æ—©ä¸Šæ´—æ¾¡çš„æ—¶å€™çªç„¶æƒ³é€šäº†ï¼š<strong>å›ºå®šåˆ†ç‰‡ + å›è°ƒé©±åŠ¨ã€‚</strong></p>
<pre><code class="hljs language-markdown" lang="markdown">ä»»åŠ¡é…ç½®ï¼šå›ºå®š 100 ä¸ªåˆ†ç‰‡ï¼ˆå’Œå®ä¾‹æ•°æ— å…³ï¼‰

æ‰§è¡Œæµç¨‹ï¼š
<span class="hljs-bullet">1.</span> è°ƒåº¦å™¨åˆ›å»º 100 æ¡åˆ†ç‰‡è®°å½•ï¼ˆPENDING çŠ¶æ€ï¼‰
<span class="hljs-bullet">2.</span> åˆå§‹åˆ†é…ï¼šmin(åˆ†ç‰‡æ•°, å®ä¾‹æ•°) ä¸ªåˆ†ç‰‡
<span class="hljs-bullet">3.</span> æ‰§è¡Œå™¨æ‰§è¡Œå®Œä¸€ä¸ªåˆ†ç‰‡ï¼Œå›è°ƒè°ƒåº¦å™¨
<span class="hljs-bullet">4.</span> è°ƒåº¦å™¨ CAS æ›´æ–°çŠ¶æ€ï¼Œåˆ†é…ä¸‹ä¸€ä¸ª PENDING åˆ†ç‰‡
<span class="hljs-bullet">5.</span> ç»§ç»­å¾ªç¯ï¼Œç›´åˆ°æ‰€æœ‰åˆ†ç‰‡å®Œæˆ
</code></pre>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant S as è°ƒåº¦å™¨
    participant E1 as æ‰§è¡Œå™¨1
    participant E2 as æ‰§è¡Œå™¨2
    participant DB as æ•°æ®åº“
    
    S-&gt;&gt;DB: åˆ›å»º100ä¸ªåˆ†ç‰‡&lt;br/&gt;çŠ¶æ€=PENDING
    S-&gt;&gt;DB: CASæ›´æ–°åˆ†ç‰‡0&lt;br/&gt;PENDINGâ†’RUNNING
    S-&gt;&gt;E1: æ‰§è¡Œåˆ†ç‰‡0
    S-&gt;&gt;DB: CASæ›´æ–°åˆ†ç‰‡1&lt;br/&gt;PENDINGâ†’RUNNING
    S-&gt;&gt;E2: æ‰§è¡Œåˆ†ç‰‡1
    
    E1-&gt;&gt;E1: æ‰§è¡Œä¸šåŠ¡é€»è¾‘
    E1-&gt;&gt;S: å›è°ƒï¼šåˆ†ç‰‡0å®Œæˆ
    S-&gt;&gt;DB: æ›´æ–°åˆ†ç‰‡0&lt;br/&gt;RUNNINGâ†’SUCCESS
    S-&gt;&gt;DB: CASæ›´æ–°åˆ†ç‰‡2&lt;br/&gt;PENDINGâ†’RUNNING
    S-&gt;&gt;E1: æ‰§è¡Œåˆ†ç‰‡2
    
    E2-&gt;&gt;E2: æ‰§è¡Œä¸šåŠ¡é€»è¾‘
    E2-&gt;&gt;S: å›è°ƒï¼šåˆ†ç‰‡1å®Œæˆ
    S-&gt;&gt;DB: æ›´æ–°åˆ†ç‰‡1&lt;br/&gt;RUNNINGâ†’SUCCESS
    S-&gt;&gt;DB: CASæ›´æ–°åˆ†ç‰‡3&lt;br/&gt;PENDINGâ†’RUNNING
    S-&gt;&gt;E2: æ‰§è¡Œåˆ†ç‰‡3
</code></pre>
<p>è¿™ä¸ªè®¾è®¡çš„å¥½å¤„ï¼š</p>
<p><strong>1. å›ºå®šåˆ†ç‰‡ï¼Œä¸å—å®ä¾‹æ•°å½±å“</strong></p>
<pre><code class="hljs">100 ä¸ªåˆ†ç‰‡ï¼Œ10 ä¸ªå®ä¾‹ï¼šæ¯ä¸ªå®ä¾‹å¹³å‡ 10 ä¸ªåˆ†ç‰‡
100 ä¸ªåˆ†ç‰‡ï¼Œ5 ä¸ªå®ä¾‹ï¼šæ¯ä¸ªå®ä¾‹å¹³å‡ 20 ä¸ªåˆ†ç‰‡
100 ä¸ªåˆ†ç‰‡ï¼Œ20 ä¸ªå®ä¾‹ï¼šæ¯ä¸ªå®ä¾‹å¹³å‡ 5 ä¸ªåˆ†ç‰‡

åˆ†ç‰‡æ•°æ˜¯å›ºå®šçš„ï¼Œå®ä¾‹æ•°å¯ä»¥åŠ¨æ€å˜åŒ–
</code></pre>
<p><strong>2. å›è°ƒé©±åŠ¨ï¼ŒåŠ¨æ€è´Ÿè½½å‡è¡¡</strong></p>
<pre><code class="hljs">å¿«çš„å®ä¾‹å¤šæ‰§è¡Œå‡ ä¸ªåˆ†ç‰‡
æ…¢çš„å®ä¾‹å°‘æ‰§è¡Œå‡ ä¸ªåˆ†ç‰‡
è‡ªåŠ¨è´Ÿè½½å‡è¡¡ï¼Œä¸éœ€è¦é¢„å…ˆè®¡ç®—
</code></pre>
<p><strong>3. çŠ¶æ€å¯æŸ¥ï¼Œè¿›åº¦é€æ˜</strong></p>
<pre><code class="hljs language-diff" lang="diff">æ•°æ®åº“é‡Œæœ‰æ¯ä¸ªåˆ†ç‰‡çš„çŠ¶æ€ï¼š
<span class="hljs-deletion">- PENDINGï¼šç­‰å¾…æ‰§è¡Œ</span>
<span class="hljs-deletion">- RUNNINGï¼šæ‰§è¡Œä¸­</span>
<span class="hljs-deletion">- SUCCESSï¼šæˆåŠŸ</span>
<span class="hljs-deletion">- FAILEDï¼šå¤±è´¥</span>

éšæ—¶å¯ä»¥çœ‹åˆ°ä»»åŠ¡è¿›åº¦
</code></pre>
<p><strong>4. æ–­ç‚¹ç»­ä¼ ï¼Œå¤±è´¥é‡è¯•</strong></p>
<pre><code class="hljs language-diff" lang="diff">å¦‚æœæŸä¸ªåˆ†ç‰‡å¤±è´¥äº†ï¼š
<span class="hljs-deletion">- çŠ¶æ€æ ‡è®°ä¸º FAILED</span>
<span class="hljs-deletion">- å·¡æ£€ä»»åŠ¡ä¼šé‡è¯•</span>
<span class="hljs-deletion">- é‡è¯•æ¬¡æ•°å¯æ§</span>

ä¸ä¼šå› ä¸ºä¸€ä¸ªåˆ†ç‰‡å¤±è´¥ï¼Œæ•´ä¸ªä»»åŠ¡é‡æ¥
</code></pre>
<p>è¿™ä¸ªè®¾è®¡æƒ³é€šäº†ä¹‹åï¼Œä»£ç å†™èµ·æ¥ç‰¹åˆ«é¡ºã€‚çˆ¶å­è®°å½•ç»“æ„ã€CAS ä¹è§‚é”ã€å›è°ƒæ¥å£ï¼Œä¸€å¤©å°±å†™å®Œäº†ã€‚</p>
<h2 data-id="heading-7">ç¬¬äº”ä¸ªæƒ³æ³•ï¼šTraceId çš„å¨åŠ›</h2>
<p>å‰é¢è¯´äº†ï¼Œæ’æŸ¥é—®é¢˜çš„æ—¶å€™ï¼Œè°ƒåº¦å™¨å’Œæ‰§è¡Œå™¨çš„æ—¥å¿—æ˜¯å‰²è£‚çš„ã€‚è¿™ä¸ªé—®é¢˜æ€ä¹ˆè§£å†³ï¼Ÿ</p>
<p>å‘¨å››ä¸Šåˆåœ¨å†™æ—¥å¿—çš„æ—¶å€™ï¼Œçªç„¶æƒ³åˆ°ä¸€ä¸ªç‚¹ï¼š<strong>èƒ½ä¸èƒ½è®© TraceId ä»è°ƒåº¦å™¨è´¯ç©¿åˆ°æ‰§è¡Œå™¨ï¼Ÿ</strong></p>
<p>TraceId çš„è®¾è®¡å¾ˆç®€å•ï¼š</p>
<pre><code class="hljs language-diff" lang="diff">æ ¼å¼ï¼šyyyyMMddHHmmss-shortuuid-shardindex

ç¤ºä¾‹ï¼š
<span class="hljs-deletion">- çˆ¶è®°å½•ï¼š20241221100000-a1b2c3d4</span>
<span class="hljs-deletion">- åˆ†ç‰‡ 0ï¼š20241221100000-a1b2c3d4-0</span>
<span class="hljs-deletion">- åˆ†ç‰‡ 1ï¼š20241221100000-a1b2c3d4-1</span>
</code></pre>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[è°ƒåº¦å™¨åˆ›å»ºTraceId&lt;br/&gt;20241221100000-a1b2c3d4] --&gt; B[HTTP Headerä¼ é€’]
    B --&gt; C[æ‰§è¡Œå™¨æ¥æ”¶TraceId]
    C --&gt; D[MDC.put]
    D --&gt; E[ä¸šåŠ¡æ—¥å¿—è‡ªåŠ¨å¸¦ä¸ŠTraceId]
    
    E --&gt; F[ELKæ”¶é›†]
    F --&gt; G[æœç´¢TraceId&lt;br/&gt;çœ‹åˆ°å®Œæ•´é“¾è·¯]
</code></pre>
<p>å®é™…æ•ˆæœï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># è°ƒåº¦å™¨æ—¥å¿—</span>
2024-12-21 10:00:00.123 <span class="hljs-section">[traceId=20241221100000-a1b2c3d4]</span> 
è§¦å‘ä»»åŠ¡æ‰§è¡Œï¼Œ<span class="hljs-attr">jobName</span>=orderSync

2024-12-21 10:00:00.456 <span class="hljs-section">[traceId=20241221100000-a1b2c3d4-0]</span> 
è°ƒç”¨æ‰§è¡Œå™¨ï¼Œ<span class="hljs-attr">url</span>=http://order-service:<span class="hljs-number">8081</span>/internal/job/orderSync

<span class="hljs-comment"># æ‰§è¡Œå™¨æ—¥å¿—</span>
2024-12-21 10:00:00.600 <span class="hljs-section">[traceId=20241221100000-a1b2c3d4-0]</span> 
æ¥æ”¶åˆ°ä»»åŠ¡è¯·æ±‚ï¼Œ<span class="hljs-attr">handler</span>=orderSync

2024-12-21 10:00:01.800 <span class="hljs-section">[traceId=20241221100000-a1b2c3d4-0]</span> 
æŸ¥è¯¢è®¢å•æ•°æ®ï¼Œ<span class="hljs-attr">count</span>=<span class="hljs-number">1523</span>

2024-12-21 10:00:05.000 <span class="hljs-section">[traceId=20241221100000-a1b2c3d4-0]</span> 
ä»»åŠ¡æ‰§è¡Œå®Œæˆï¼Œ<span class="hljs-attr">duration</span>=<span class="hljs-number">4300</span>ms
</code></pre>
<p>åœ¨ ELK é‡Œæœ <code>traceId="20241221100000-a1b2c3d4*"</code>ï¼Œè°ƒåº¦å™¨å’Œæ‰§è¡Œå™¨çš„æ—¥å¿—å…¨å‡ºæ¥äº†ï¼ŒæŒ‰æ—¶é—´æ’åºï¼Œå®Œæ•´é“¾è·¯ä¸€ç›®äº†ç„¶ã€‚</p>
<p>è¿™ä¸ªè®¾è®¡æˆæœ¬å‡ ä¹ä¸ºé›¶ï¼ˆå°±æ˜¯åœ¨ HTTP Header é‡ŒåŠ ä¸ªå­—æ®µï¼‰ï¼Œä½†ä»·å€¼å·¨å¤§ã€‚</p>
<p><strong>æ—¥å¿—æ‰“é€šäº†ï¼Œæ’æŸ¥é—®é¢˜çš„æ•ˆç‡è‡³å°‘æå‡ 10 å€ã€‚</strong></p>
<h2 data-id="heading-8">å»¶æ—¶é˜Ÿåˆ—ï¼šå¤ç”¨çš„è‰ºæœ¯</h2>
<p>å‘¨äº”ä¸Šåˆï¼Œæ­£åœ¨å†™æ–‡æ¡£çš„æ—¶å€™ï¼Œçœ‹åˆ°ä¸€ç¯‡åšå®¢è®²å»¶æ—¶é˜Ÿåˆ—çš„å®ç°ã€‚çªç„¶æƒ³åˆ°ï¼š<strong>æˆ‘ä»¬çš„æ¶æ„å¯ä»¥å¾ˆå¿«èå…¥å»¶æ—¶é˜Ÿåˆ—åŠŸèƒ½ã€‚</strong></p>
<p>ä¸ºä»€ä¹ˆï¼Ÿå› ä¸º JobFlow å·²ç»æœ‰äº†æ‰€æœ‰éœ€è¦çš„åŸºç¡€è®¾æ–½ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">å»¶æ—¶é˜Ÿåˆ—éœ€è¦ä»€ä¹ˆï¼š
<span class="hljs-bullet">1.</span> å®šæ—¶æ‰«ææœºåˆ¶ â†’ å·²ç»æœ‰äº†ï¼ˆå‘¨æœŸä»»åŠ¡æ‰«æï¼‰
<span class="hljs-bullet">2.</span> æœåŠ¡å‘ç° â†’ å·²ç»æœ‰äº†ï¼ˆNacosï¼‰
<span class="hljs-bullet">3.</span> HTTP è°ƒç”¨ â†’ å·²ç»æœ‰äº†ï¼ˆè°ƒç”¨æ‰§è¡Œå™¨ï¼‰
<span class="hljs-bullet">4.</span> TraceId è¿½è¸ª â†’ å·²ç»æœ‰äº†ï¼ˆå…¨é“¾è·¯æ—¥å¿—ï¼‰
<span class="hljs-bullet">5.</span> æ•°æ®åº“å­˜å‚¨ â†’ å·²ç»æœ‰äº†ï¼ˆMySQLï¼‰

æ–°å¢ä»€ä¹ˆï¼š
<span class="hljs-bullet">1.</span> ç‹¬ç«‹çš„ job<span class="hljs-emphasis">_delay_</span>task è¡¨
<span class="hljs-bullet">2.</span> ä¸€æ¬¡æ€§æ‰§è¡Œçš„é€»è¾‘
<span class="hljs-bullet">3.</span> JSON Payload é€ä¼ 
<span class="hljs-bullet">4.</span> æŒ‡æ•°é€€é¿é‡è¯•
</code></pre>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TB
    subgraph å»¶æ—¶é˜Ÿåˆ—
        A[ä¸šåŠ¡ä»£ç ] --&gt; B[æäº¤å»¶æ—¶ä»»åŠ¡&lt;br/&gt;bizUuid + executeTime]
        B --&gt; C[(job_delay_taskè¡¨)]
    end
    
    subgraph JobFlowåŸºç¡€è®¾æ–½
        D[å®šæ—¶æ‰«æ&lt;br/&gt;æ¯5ç§’] --&gt; C
        C --&gt; E{åˆ°æœŸ?}
        E --&gt; |æ˜¯| F[Nacoså‘ç°æœåŠ¡]
        F --&gt; G[HTTPè°ƒç”¨æ‰§è¡Œå™¨]
        G --&gt; H[TraceIdè¿½è¸ª]
        H --&gt; I[æ‰§è¡Œå™¨å¤„ç†]
        I --&gt; J[å›è°ƒæ›´æ–°çŠ¶æ€]
    end
    
    J --&gt; K{æˆåŠŸ?}
    K --&gt; |æ˜¯| L[åˆ é™¤ä»»åŠ¡]
    K --&gt; |å¦| M[æŒ‡æ•°é€€é¿é‡è¯•]
</code></pre>
<p>å‘¨äº”ä¸‹åˆèŠ±äº† 3 ä¸ªå°æ—¶ï¼ŒæŠŠå»¶æ—¶é˜Ÿåˆ—å†™å®Œäº†ã€‚æµ‹è¯•äº†ä¸€ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä¸šåŠ¡ä»£ç </span>
delayTaskService.submit(DelayTask.builder()
    .bizUuid(<span class="hljs-string">"order_timeout_"</span> + orderId)
    .serviceName(<span class="hljs-string">"order-service"</span>)
    .handler(<span class="hljs-string">"orderTimeoutHandler"</span>)
    .executeTime(LocalDateTime.now().plusMinutes(<span class="hljs-number">30</span>))
    .payloadJson(JSON.toJSONString(Map.of(<span class="hljs-string">"orderId"</span>, orderId)))
    .build());

<span class="hljs-comment">// 30 åˆ†é’Ÿå</span>
<span class="hljs-comment">// æ‰§è¡Œå™¨è‡ªåŠ¨æ”¶åˆ°è°ƒç”¨</span>
<span class="hljs-meta">@JobHandler("orderTimeoutHandler")</span>
<span class="hljs-keyword">public</span> JobResult <span class="hljs-title function_">orderTimeout</span><span class="hljs-params">(JobContext context)</span> {
    Map&lt;String, Object&gt; payload = JSON.parseObject(
        context.getPayloadJson(), Map.class);
    <span class="hljs-type">Long</span> <span class="hljs-variable">orderId</span> <span class="hljs-operator">=</span> (Long) payload.get(<span class="hljs-string">"orderId"</span>);
    
    <span class="hljs-comment">// å–æ¶ˆè®¢å•</span>
    orderService.cancel(orderId);
    
    <span class="hljs-keyword">return</span> JobResult.success();
}
</code></pre>
<p>å®Œç¾ã€‚</p>
<p><strong>è¿™å°±æ˜¯å¤ç”¨çš„å¨åŠ›ï¼šåŸºç¡€è®¾æ–½æ­å¥½äº†ï¼Œæ–°åŠŸèƒ½å‡ ä¹æ˜¯è‡ªå·±é•¿å‡ºæ¥çš„ã€‚</strong></p>
<h2 data-id="heading-9">å†™ä»£ç çš„èŠ‚å¥</h2>
<p>å›é¡¾ä¸€ä¸‹è¿™ä¸¤å‘¨çš„å¼€å‘è¿‡ç¨‹ï¼š</p>
<pre><code class="hljs language-objectivec" lang="objectivec">ç¬¬ä¸€å‘¨ï¼ˆæ€è€ƒä¸ºä¸»ï¼‰ï¼š
å‘¨æœ«ï¼šæƒ³æ¸…æ¥šæ ¸å¿ƒè®¾è®¡ï¼ˆNacos + Hashåˆ†åŒºï¼‰
å‘¨ä¸€ï¼šå†™ Owner åˆ¤å®š + å®šæ—¶æ‰«æ
å‘¨äºŒï¼šå†™å›ºå®šåˆ†ç‰‡ + å›è°ƒé©±åŠ¨
å‘¨ä¸‰ï¼šå†™ TraceId + HTTP è°ƒç”¨
å‘¨å››ï¼šå†™å·¡æ£€è¡¥å¿
å‘¨äº”ï¼šæµ‹è¯• + ä¿® Bug

ç¬¬äºŒå‘¨ï¼ˆå®Œå–„åŠŸèƒ½ï¼‰ï¼š
å‘¨ä¸€ï¼šä¼˜åŒ– <span class="hljs-built_in">CAS</span> é€»è¾‘
å‘¨äºŒï¼šå®Œå–„è¶…æ—¶ç¡®è®¤
å‘¨ä¸‰ï¼šå†™ä½é¢‘ä»»åŠ¡æ¼è°ƒæ£€æµ‹
å‘¨å››ï¼šå†™æ–‡æ¡£
å‘¨äº”ï¼šå»¶æ—¶é˜Ÿåˆ—ï¼ˆæ„å¤–ä¹‹å–œï¼‰
</code></pre>
<p>ä»£ç é‡å…¶å®ä¸å¤§ï¼Œæ ¸å¿ƒåŠŸèƒ½ 3000 è¡Œå·¦å³ã€‚ä½†è®¾è®¡æƒ³æ¸…æ¥šä¹‹åï¼Œä»£ç å†™èµ·æ¥ç‰¹åˆ«å¿«ã€‚</p>
<p><strong>å¾ˆå¤šæ—¶å€™ä¸æ˜¯ä»£ç éš¾å†™ï¼Œè€Œæ˜¯æ²¡æƒ³æ¸…æ¥šã€‚æƒ³æ¸…æ¥šäº†ï¼Œä»£ç å‡ ä¹æ˜¯ä¸€æ°”å‘µæˆçš„ã€‚</strong></p>
<h2 data-id="heading-10">å‡ ä¸ªå…³é”®çªç ´</h2>
<p>å›è¿‡å¤´çœ‹ï¼Œè¿™ä¸¤å‘¨æœ‰å‡ ä¸ªå…³é”®çš„æ€ç»´çªç ´ï¼š</p>
<h3 data-id="heading-11">1. è°ƒåº¦å™¨å³ä¸šåŠ¡</h3>
<p><strong>ä¸è¦æŠŠè°ƒåº¦å™¨å½“æˆç‹¬ç«‹çš„å¹³å°ï¼Œè€Œæ˜¯å½“æˆä¸šåŠ¡ä¸­å°çš„ä¸€éƒ¨åˆ†ã€‚</strong></p>
<p>è¿™ä¸ªçªç ´å¸¦æ¥çš„å¥½å¤„ï¼š</p>
<ul>
<li>å¤ç”¨ Nacosï¼Œé›¶é¢å¤–ä¾èµ–</li>
<li>å¤ç”¨ç›‘æ§æ—¥å¿—ï¼Œé›¶è¿ç»´æˆæœ¬</li>
<li>ä¸šåŠ¡å›¢é˜Ÿè‡ªå·±ç»´æŠ¤ï¼Œé›¶æ²Ÿé€šæˆæœ¬</li>
</ul>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TB
    subgraph ä¼ ç»Ÿæ€ç»´
        A[è°ƒåº¦å¹³å°&lt;br/&gt;ç‹¬ç«‹éƒ¨ç½²] -.è°ƒç”¨.-&gt; B[ä¸šåŠ¡æœåŠ¡]
    end
    
    subgraph JobFlowæ€ç»´
        C[è°ƒåº¦å™¨&lt;br/&gt;æ™®é€šå¾®æœåŠ¡]
        D[ä¸šåŠ¡æœåŠ¡]
        E[æ¶ˆæ¯ä¸­å°]
        F[æ•°æ®ä¸­å°]
    end
    
    C --&gt; G[Nacos]
    D --&gt; G
    E --&gt; G
    F --&gt; G
</code></pre>
<h3 data-id="heading-12">2. å›ºå®šåˆ†ç‰‡çš„ç®€å•</h3>
<p><strong>ä¸è¦åŠ¨æ€åˆ†ç‰‡ï¼Œå›ºå®šåˆ†ç‰‡æ•°é‡ï¼Œè®©å›è°ƒé©±åŠ¨åˆ†é…ã€‚</strong></p>
<p>è¿™ä¸ªçªç ´å¸¦æ¥çš„å¥½å¤„ï¼š</p>
<ul>
<li>ä¸å—å®ä¾‹æ•°å½±å“</li>
<li>è‡ªåŠ¨è´Ÿè½½å‡è¡¡</li>
<li>çŠ¶æ€å¯æŸ¥å¯æ§</li>
<li>æ–­ç‚¹ç»­ä¼ </li>
</ul>
<pre><code class="hljs language-diff" lang="diff">åŠ¨æ€åˆ†ç‰‡çš„å¤æ‚ï¼š
<span class="hljs-deletion">- å®ä¾‹æ•°å˜äº†ï¼Œåˆ†ç‰‡è¦é‡æ–°è®¡ç®—</span>
<span class="hljs-deletion">- è®¡ç®—é€»è¾‘å¤æ‚</span>
<span class="hljs-deletion">- çŠ¶æ€éš¾ä»¥è¿½è¸ª</span>

å›ºå®šåˆ†ç‰‡çš„ç®€å•ï¼š
<span class="hljs-deletion">- åˆ†ç‰‡æ•°å›ºå®š</span>
<span class="hljs-deletion">- å›è°ƒé©±åŠ¨</span>
<span class="hljs-deletion">- çŠ¶æ€æ¸…æ™°</span>
</code></pre>
<h3 data-id="heading-13">3. æ— é”çš„ä»£ä»·ä¸è¡¥å¿</h3>
<p><strong>ä¸è¦è¿½æ±‚å®Œç¾çš„æ— é”ï¼Œè€Œæ˜¯æ¥å—ä»£ä»·ï¼Œç”¨è¡¥å¿è§£å†³ã€‚</strong></p>
<p>è¿™ä¸ªçªç ´å¸¦æ¥çš„å¥½å¤„ï¼š</p>
<ul>
<li>æ€§èƒ½å¥½ï¼ˆæ— é”ï¼‰</li>
<li>å¯é æ€§é«˜ï¼ˆè¡¥å¿ï¼‰</li>
<li>è®¾è®¡æ¸…æ™°ï¼ˆåˆ†å±‚ï¼‰</li>
</ul>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[æ­£å¸¸æµç¨‹&lt;br/&gt;Hashåˆ†åŒº&lt;br/&gt;99%æƒ…å†µ] --&gt; C[ä»»åŠ¡æ‰§è¡Œ]
    B[å¼‚å¸¸æµç¨‹&lt;br/&gt;å·¡æ£€è¡¥å¿&lt;br/&gt;1%æƒ…å†µ] --&gt; C
    
    style A fill:#90EE90
    style B fill:#FFB6C1
</code></pre>
<h3 data-id="heading-14">4. å¤ç”¨çš„å¨åŠ›</h3>
<p><strong>ä¸è¦é‡å¤é€ è½®å­ï¼Œèƒ½å¤ç”¨å°±å¤ç”¨ã€‚</strong></p>
<p>è¿™ä¸ªçªç ´å¸¦æ¥çš„å¥½å¤„ï¼š</p>
<ul>
<li>Nacos æœåŠ¡å‘ç° â†’ å¤ç”¨</li>
<li>HTTP è°ƒç”¨ â†’ å¤ç”¨</li>
<li>TraceId è¿½è¸ª â†’ å¤ç”¨</li>
<li>ç›‘æ§æ—¥å¿— â†’ å¤ç”¨</li>
</ul>
<p>å»¶æ—¶é˜Ÿåˆ—ä¸ºä»€ä¹ˆèƒ½ 3 å°æ—¶å†™å®Œï¼Ÿå› ä¸º 90% çš„ä»£ç éƒ½æ˜¯å¤ç”¨çš„ã€‚</p>
<h2 data-id="heading-15">ä¸€äº›å¯ç¤º</h2>
<h3 data-id="heading-16">å¯ç¤ºä¸€ï¼šæƒ³æ¸…æ¥šæ¯”å†™ä»£ç é‡è¦</h3>
<p>è¿™ä¸¤å‘¨ï¼ŒçœŸæ­£å†™ä»£ç çš„æ—¶é—´å¯èƒ½åªæœ‰ 30%ï¼Œ70% çš„æ—¶é—´åœ¨æƒ³è®¾è®¡ã€‚</p>
<p>ä½†æ­£æ˜¯è¿™ 70% çš„æ€è€ƒï¼Œè®© 30% çš„ç¼–ç å˜å¾—ç®€å•ã€‚</p>
<p><strong>æ¶æ„è®¾è®¡ä¸æ˜¯æ‹è„‘è¢‹ï¼Œæ˜¯ä¸€ä¸ªæŒç»­æ€è€ƒã€æ¨ç¿»é‡æ¥ã€é€æ­¥æ¸…æ™°çš„è¿‡ç¨‹ã€‚</strong></p>
<h3 data-id="heading-17">å¯ç¤ºäºŒï¼šç®€å•çš„è®¾è®¡æ›´å¯é </h3>
<p>æœ€å¼€å§‹æƒ³è¿‡å¾ˆå¤šå¤æ‚çš„æ–¹æ¡ˆï¼š</p>
<ul>
<li>ç”¨ Raft åè®®é€‰ä¸»</li>
<li>ç”¨ Redisson åˆ†å¸ƒå¼é”</li>
<li>ç”¨ ZooKeeper åè°ƒ</li>
</ul>
<p>åæ¥å‘ç°ï¼Œè¿™äº›éƒ½ä¸éœ€è¦ï¼š</p>
<ul>
<li>é€‰ä¸»ï¼Ÿæœ€å°èŠ‚ç‚¹å°±æ˜¯ Leader</li>
<li>åˆ†å¸ƒå¼é”ï¼ŸHash åˆ†åŒº + æ•°æ®åº“å…œåº•</li>
<li>åè°ƒï¼ŸNacos æœåŠ¡å‘ç°å°±å¤Ÿäº†</li>
</ul>
<p><strong>å¤æ‚çš„æ–¹æ¡ˆä¸ä¸€å®šæ›´å¥½ï¼Œç®€å•çš„æ–¹æ¡ˆå¾€å¾€æ›´å¯é ã€‚</strong></p>
<h3 data-id="heading-18">å¯ç¤ºä¸‰ï¼šåˆ†å¸ƒå¼çš„æœ¬è´¨æ˜¯æƒè¡¡</h3>
<p>æ— é”è®¾è®¡å¾ˆå¿«ï¼Œä½†å¯èƒ½æ¼è°ƒ â†’ ç”¨å·¡æ£€è¡¥å¿
å›ºå®šåˆ†ç‰‡å¾ˆç®€å•ï¼Œä½†å¯èƒ½ä¸å‡åŒ€ â†’ ç”¨å›è°ƒé©±åŠ¨è´Ÿè½½å‡è¡¡
æ•°æ®åº“å…œåº•å¾ˆå¯é ï¼Œä½†æœ‰æ€§èƒ½æŸè€— â†’ 99% çš„åœºæ™¯æ— æŸè€—</p>
<p><strong>æ²¡æœ‰å®Œç¾çš„æ–¹æ¡ˆï¼Œåªæœ‰åˆé€‚çš„æƒè¡¡ã€‚</strong></p>
<pre><code class="hljs language-diff" lang="diff">åˆ†å¸ƒå¼ç³»ç»Ÿçš„æƒè¡¡ï¼š
<span class="hljs-deletion">- æ€§èƒ½ vs ä¸€è‡´æ€§</span>
<span class="hljs-deletion">- ç®€å• vs å®Œç¾</span>
<span class="hljs-deletion">- æ•ˆç‡ vs å¯é </span>

å…³é”®æ˜¯ï¼šçŸ¥é“è‡ªå·±åœ¨æƒè¡¡ä»€ä¹ˆï¼Œä¸ºä»€ä¹ˆè¿™ä¹ˆæƒè¡¡
</code></pre>
<h3 data-id="heading-19">å¯ç¤ºå››ï¼šå¤ç”¨æ˜¯æœ€å¤§çš„åˆ›æ–°</h3>
<p>å»¶æ—¶é˜Ÿåˆ—ä¸æ˜¯æ–°åŠŸèƒ½ï¼Œä½†å¤ç”¨ JobFlow çš„åŸºç¡€è®¾æ–½ï¼Œå°±èƒ½å¾ˆå¿«å®ç°ã€‚</p>
<p><strong>åˆ›æ–°ä¸ä¸€å®šæ˜¯å‘æ˜æ–°ä¸œè¥¿ï¼ŒæŠŠå·²æœ‰çš„ä¸œè¥¿ç»„åˆå¥½ï¼Œä¹Ÿæ˜¯åˆ›æ–°ã€‚</strong></p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TB
    A[åŸºç¡€è®¾æ–½] --&gt; B[å‘¨æœŸä»»åŠ¡]
    A --&gt; C[å»¶æ—¶é˜Ÿåˆ—]
    A --&gt; D[åˆ†ç‰‡è°ƒåº¦]
    A --&gt; E[å·¡æ£€è¡¥å¿]
    
    A --&gt; |Nacos| F[æœåŠ¡å‘ç°]
    A --&gt; |HTTP| G[è¿œç¨‹è°ƒç”¨]
    A --&gt; |TraceId| H[é“¾è·¯è¿½è¸ª]
    A --&gt; |MySQL| I[çŠ¶æ€å­˜å‚¨]
</code></pre>
<h3 data-id="heading-20">å¯ç¤ºäº”ï¼šåˆ†å¸ƒå¼å°±æ˜¯è¿™ä¹ˆå›äº‹</h3>
<p>å›åˆ°å¼€å¤´é‚£ä¸ªé—®é¢˜ï¼š<strong>åˆ†å¸ƒå¼åˆ°åº•åœ¨æä»€ä¹ˆï¼Ÿ</strong></p>
<p>åšå®Œ JobFlow ä¹‹åï¼Œæˆ‘çš„ç­”æ¡ˆæ˜¯ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">åˆ†å¸ƒå¼å°±æ˜¯åœ¨è§£å†³è¿™äº›é—®é¢˜ï¼š
<span class="hljs-bullet">1.</span> æ•°æ®æ€ä¹ˆå¤åˆ¶ï¼ˆæ—¥å¿—å¤åˆ¶ï¼‰
<span class="hljs-bullet">2.</span> æ•…éšœæ€ä¹ˆåˆ‡æ¢ï¼ˆä¸»ä»åˆ‡æ¢ã€Hashåˆ†åŒºï¼‰
<span class="hljs-bullet">3.</span> çŠ¶æ€æ€ä¹ˆåŒæ­¥ï¼ˆNacosã€æ•°æ®åº“ï¼‰
<span class="hljs-bullet">4.</span> ä»»åŠ¡æ€ä¹ˆåˆ†é…ï¼ˆåˆ†ç‰‡ã€è´Ÿè½½å‡è¡¡ï¼‰
<span class="hljs-bullet">5.</span> å¼‚å¸¸æ€ä¹ˆå¤„ç†ï¼ˆè¡¥å¿ã€é‡è¯•ï¼‰
</code></pre>
<p>xxl-job ä¹Ÿå¥½ï¼ŒRocketMQ ä¹Ÿå¥½ï¼ŒRedis Cluster ä¹Ÿå¥½ï¼Œæœ¬è´¨ä¸Šéƒ½æ˜¯åœ¨è§£å†³è¿™äº›é—®é¢˜ã€‚</p>
<p><strong>æƒ³é€šäº†è¿™äº›ï¼Œå†å»çœ‹ä»»ä½•åˆ†å¸ƒå¼ç³»ç»Ÿï¼Œéƒ½èƒ½çœ‹åˆ°ç›¸åŒçš„å½±å­ã€‚</strong></p>
<h2 data-id="heading-21">å†™åœ¨æœ€å</h2>
<p>è¿™ä¸¤å‘¨å¼€å‘ JobFlow çš„ç»å†ï¼Œå¯¹æˆ‘æ¥è¯´æ˜¯ä¸€æ¬¡æ€ç»´çªç ´ã€‚</p>
<p>ä¸æ˜¯è¯´æˆ‘åšå‡ºäº†å¤šä¹ˆå‰å®³çš„ä¸œè¥¿ï¼Œè€Œæ˜¯æƒ³æ¸…æ¥šäº†ä¸€äº›ä»¥å‰æ¨¡ç³Šçš„ç‚¹ï¼š</p>
<ul>
<li>ä¸ºä»€ä¹ˆè¦è¿™ä¹ˆè®¾è®¡</li>
<li>è®¾è®¡çš„è¾¹ç•Œåœ¨å“ªé‡Œ</li>
<li>ä»€ä¹ˆæ—¶å€™è¯¥æƒè¡¡ä»€ä¹ˆ</li>
</ul>
<p>è¿™äº›ä¸œè¥¿ï¼Œä¹¦ä¸Šå¾ˆéš¾å­¦åˆ°ã€‚å®ƒæ¥è‡ªäºå®è·µï¼Œæ¥è‡ªäºæ€è€ƒï¼Œæ¥è‡ªäºä¸€æ¬¡æ¬¡çš„æ¨ç¿»é‡æ¥ã€‚</p>
<p>JobFlow ç°åœ¨è¿˜å¾ˆç®€é™‹ï¼š</p>
<ul>
<li>æ²¡æœ‰ Web ç®¡ç†åå°</li>
<li>æ²¡æœ‰å®Œå–„çš„ç›‘æ§é¢æ¿</li>
<li>æ²¡æœ‰ä¸°å¯Œçš„è·¯ç”±ç­–ç•¥</li>
</ul>
<p>ä½†æ ¸å¿ƒçš„è®¾è®¡ç†å¿µæ˜¯æ¸…æ™°çš„ï¼š</p>
<ul>
<li>å¤ç”¨ä¼˜äºé‡é€ </li>
<li>è½»é‡çº§ä¼˜å…ˆ</li>
<li>é«˜æ€§ä»·æ¯”å®¹é”™</li>
</ul>
<p>åé¢ä¼šç»§ç»­å®Œå–„åŠŸèƒ½ï¼Œä½†è¿™ä¸ªæ ¸å¿ƒä¸ä¼šå˜ã€‚</p>
<h3 data-id="heading-22">å¦‚æœé‡æ¥ä¸€æ¬¡</h3>
<p>å†™å®Œä¹‹åï¼Œå›è¿‡å¤´çœ‹ï¼Œæœ‰äº›åœ°æ–¹æˆ‘ä¼šæ¢ä¸ªåšæ³•ï¼š</p>
<p><strong>ä¼šä¿ç•™çš„è®¾è®¡ï¼š</strong></p>
<ul>
<li>Hash åˆ†åŒº + Owner åˆ¤å®šï¼šè¿™ä¸ªè®¾è®¡ç»è¿‡éªŒè¯ï¼Œéå¸¸ç¨³å®š</li>
<li>å›ºå®šåˆ†ç‰‡ + å›è°ƒé©±åŠ¨ï¼šæ¯”åŠ¨æ€åˆ†ç‰‡ç®€å•å¤ªå¤š</li>
<li>TraceId å…¨é“¾è·¯è¿½è¸ªï¼šæˆæœ¬ä½ï¼Œä»·å€¼å¤§</li>
</ul>
<p><strong>ä¼šè°ƒæ•´çš„è®¾è®¡ï¼š</strong></p>
<ul>
<li>å·¡æ£€è¡¥å¿çš„å‘¨æœŸï¼š3 åˆ†é’Ÿå¯èƒ½å¤ªé•¿ï¼Œåº”è¯¥åšæˆå¯é…ç½®çš„</li>
<li>æ•°æ®åº“è¡¨ç»“æ„ï¼šçˆ¶å­è®°å½•æœ‰äº›å­—æ®µæ˜¯å†—ä½™çš„ï¼Œå¯ä»¥ä¼˜åŒ–</li>
<li>è¶…æ—¶ç¡®è®¤é€»è¾‘ï¼šç°åœ¨çš„"åå‘è¯¢é—®"å®ç°æœ‰ç‚¹é‡ï¼Œå¯ä»¥ç®€åŒ–</li>
</ul>
<p><strong>å†™æ—©äº†çš„ä»£ç ï¼š</strong></p>
<ul>
<li>ä½é¢‘ä»»åŠ¡æ¼è°ƒæ£€æµ‹ï¼šè¿™ä¸ªåŠŸèƒ½ç”¨çš„äººå¾ˆå°‘ï¼Œåº”è¯¥åé¢å†åŠ </li>
<li>åˆ†ç‰‡ç­–ç•¥æŠ½è±¡ï¼šç°åœ¨åªæœ‰ MOD_HASH ä¸€ç§ï¼ŒæŠ½è±¡å±‚æœ‰ç‚¹è¿‡åº¦è®¾è®¡</li>
</ul>
<p><strong>åæ‚”æ²¡åšçš„ï¼š</strong></p>
<ul>
<li>å•å…ƒæµ‹è¯•ï¼šå¼€å‘å¤ªå¿«ï¼Œæµ‹è¯•è¦†ç›–ä¸å¤Ÿï¼Œåé¢è¡¥æµ‹è¯•å¾ˆç—›è‹¦</li>
<li>é…ç½®æ ¡éªŒï¼šå¾ˆå¤šé…ç½®æ²¡åšåˆæ³•æ€§æ£€æŸ¥ï¼Œä¸Šçº¿åæ‰å‘ç°é—®é¢˜</li>
<li>ç›‘æ§æŒ‡æ ‡ï¼šåº”è¯¥ä¸€å¼€å§‹å°±æŠŠ Prometheus æŒ‡æ ‡è®¾è®¡å¥½</li>
</ul>
<p>è¿™äº›åæ€ï¼Œä¼šåœ¨åç»­çš„è¿­ä»£ä¸­æ…¢æ…¢è°ƒæ•´ã€‚</p>
<p><strong>æœ€é‡è¦çš„æ”¶è·ï¼š</strong></p>
<p>åˆ†å¸ƒå¼ç³»ç»Ÿçš„è®¾è®¡ï¼Œæœ¬è´¨ä¸Šæ˜¯åœ¨åšæƒè¡¡ï¼š</p>
<ul>
<li>æˆ‘æ¥å—ä»€ä¹ˆä»£ä»·</li>
<li>æˆ‘æ¢å–ä»€ä¹ˆå¥½å¤„</li>
<li>æˆ‘ç”¨ä»€ä¹ˆå…œåº•</li>
</ul>
<p>æƒ³æ¸…æ¥šè¿™ä¸‰ç‚¹ï¼Œä»£ç è‡ªç„¶å°±æ¸…æ™°äº†ã€‚</p>
<hr/>
<p><strong>æœ€åæƒ³é—®é—®å¤§å®¶ï¼š</strong></p>
<p>ä½ åœ¨åšæ¶æ„è®¾è®¡çš„æ—¶å€™ï¼Œæœ‰æ²¡æœ‰ç±»ä¼¼çš„"çªç„¶æƒ³é€š"çš„æ—¶åˆ»ï¼Ÿ</p>
<p>æ˜¯ä»€ä¹ˆè®©ä½ æƒ³é€šçš„ï¼Ÿä¸€ä¸ªå…·ä½“çš„åœºæ™¯ï¼Ÿä¸€æ¬¡å¤±è´¥çš„æ•™è®­ï¼Ÿè¿˜æ˜¯æŸä¸ªå¶ç„¶çš„çµæ„Ÿï¼Ÿ</p>
<p>æ¬¢è¿è¯„è®ºåŒºèŠèŠã€‚</p>
<p>æ¶æ„è¿™ä¸œè¥¿ï¼Œå¾ˆå¤šæ—¶å€™ä¸æ˜¯çœ‹ä¹¦çœ‹å‡ºæ¥çš„ï¼Œæ˜¯è¸©å‘è¸©å‡ºæ¥çš„ï¼Œæ˜¯æƒ³å‡ºæ¥çš„ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é™æ€å†…å®¹é¡µè¯¥ç”¨HTMLè¿˜æ˜¯Next.jså±•ç¤ºæ›´å¥½]]></title>    <link>https://juejin.cn/post/7585789195869782052</link>    <guid>https://juejin.cn/post/7585789195869782052</guid>    <pubDate>2025-12-22T02:33:25.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7585789195869782052" data-draft-id="7586481379589914643" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é™æ€å†…å®¹é¡µè¯¥ç”¨HTMLè¿˜æ˜¯Next.jså±•ç¤ºæ›´å¥½"/> <meta itemprop="keywords" content="Next.js,HTML,å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-22T02:33:25.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="LeonGao"/> <meta itemprop="url" content="https://juejin.cn/user/3976252950591149"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é™æ€å†…å®¹é¡µè¯¥ç”¨HTMLè¿˜æ˜¯Next.jså±•ç¤ºæ›´å¥½
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3976252950591149/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    LeonGao
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-22T02:33:25.000Z" title="Mon Dec 22 2025 02:33:25 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body blockquote&gt;:first-child{margin-top:0}.markdown-body blockquote&gt;:last-child{margin-bottom:0}.markdown-body{overflow:hidden;line-height:1.75;font-size:15px;background-image:linear-gradient(90deg,rgba(72,42,10,.05) 5%,rgba(72,42,10,0) 0),linear-gradient(1turn,rgba(72,42,10,.05) 5%,rgba(72,42,10,0) 0);background-size:20px 20px;background-position:50%;padding-top:0!important}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{position:relative;display:flex;border-bottom:5px solid #6d4e00;line-height:35px;letter-spacing:1px;font-size:25px;padding-left:25px;color:#664900;text-shadow:1px 1px 1px #8a6200;padding-bottom:0}.markdown-body h1:before{content:"";display:flex;position:absolute;left:0;top:3px;bottom:0;margin:auto;width:20px;height:20px;background-size:20px 20px;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAQlBMVEVHcEwlRnqtZBj76q4lRnolRnolRnolRnolRnokRnr/gGtrVUeLXDBKTl+hYSHasW7Ik0zs0JG4dCvUdEE0SW+rYxrLQJfjAAAACnRSTlMA////0H/xUaMi5MCoTwAACfVJREFUeNrtnQl3qygUgJ9GXAqosfL//+pgmgXwXmRNJGdu55xO+6rx8+6I8O9fehmGriN93zdN07bVXdpW/ih/SbpuGP6dXbpOXv7z2i3S9ISck2eQOnAhMHG64VQQbmrAaM4B05GmipaGdB+m6BNQPBXzMYtKR3EPbB/RS5eY4g+lIW9WBqnySCvVMrzRpqqs0g9nwVg5p1KYlHEchRT5bftp+y3n6xlQDjAkABtrKULU9f377ev+4/1/NiT+URRiZRhrcZP6WLa/Gq005BORaqXsdYEuHPIP798ZxSyt6d5sVfxJESRCsvB32lfXwhRjnUBGmKXNoJQe04VIASJqRC/9G7yDsyQMiloYz+0pHYghEoPISAGgpDSvHsCoMwmA0mfjSG5UOsqah2RodkljzMkhZZdamiEDB8+Nsbk9T04yGNljDXGOZZ6u0+Tj9DuvbyNJBuPO0ABtLNPlJtfZJ4CNNCWJoY8gddwxNpm9YrHh9DEkBoeMud4Kma8XRZaYpBJOYvg59U9wOsblMvmGrzQe30dyqFZ1dxPfO0FT5BOdw989THVs4q1TFk+iN4PMu7CaLpd4EJOExNaJLE4d0xQKYpJ0cY5Ozcwwu6WOu2cs9TUYxPB4b4fvLRzTUXbT1HH7y0BnB0j6CAehkPFfFzd1TMsi6sU1/P4VM9NiISHBlYnBMR+kad075sXlmMehj1twnfTUqJH4GJfqIKte7S72emPnHbdiYHIB0e6ATjKq1UoTaFh6wBL2csMIVo9fH/v6QRHAgoxrOHQQxG/36tC1ODmGOeBGBRmXalgcdhDQ1xF1vI6a3DF2d4r7G1enOUgNOshlFq7qUCxrca9ldiCam7ilxRbP6JbOYsYtfLFmkcXEgLG1DN/6eroxHjqh5bh+Uw27e1oWVK7pN+AqwzUcq/UYTPw8nWufLFBHN2zcxLRYlmGPs6rA2Wy0uJe/E7TknbHIa1WH1bLA8DAj3JpxET+FCNCWZ5uNT6jxTPZK/1mXoCBeKlGLRT2lP69XN3XdqqCojKX1ZVda6iD2McjeXSHa0I+AHd2InGAJgjRVM6gOBfygDrarRJnho6eQBbrns+HkcNUCWtYClJa66qFgPbqqZEBTCOAgRqxCOhQBWpZeIC6QBq91hEoI5unTjsMsK9DCFigY9WNn19hgVCrELalrTw6WnYMYzjHhQ2/7G2xTx1HvwpzSe4cVi5ORQQwMW9+72FU5L4gGsa6Yu1RcDeIhs64Qs8izt0vGH+n9/IKaIlYpM2UqkYOrwwq5CgBjWpyGtxaonxe4KaJ3hx+7O0HaqVkxLBPj8FmBVmjNevIUFhUuDmMq5NDV9RwyPe/95IvxAhG7ymqxHGE5sZJL2kPLUhUinkXfrnFwGFwXD99djNLSFh/meXEb2B6Oyiwm0I7BC+OlTlOVPk9K8CIYzu5YHwKDTI6XAo5lz3WEqEXwQRKhh5cyLa6D81P4PXBw984as9YaGXHwx4Ba8rmOldUat/BHt9cQ38AaljnBdCJqs60OcXVDJZP//ZwSWtV9FpHNtgg22KuYx/U2tB5Mcp1TYOiphNhiFjgWeJ3DL2OZpuuUisIoUyzZEJ76I+LmyqWdv8LwnEiwMYczihjxeqtBsuFJSTg2oD1ETQx4v6D1VleSZW1xCwvAfVGWpQ069kgrQksAUW2rReYzsboIjSABuDQX0QJwB9cnZVgWVgE31vrklAJnEmVObykgYCk/VGX5OlpuKb5eiovUAvJ2tMstw0kIkNdpiSA91K6XA6K8CVCyr4PePhTo65q3DyX7OpTbSVk1PB62mhJ9HSpSqtKaESxsFRm0tLBVcvTV+vbBrLRK4hC7aitN9B0ZpX6vNMgjGIt5ZdmMv32KrmprD1afsPd4FEhThK0+WfTl3kpd482AGvG3jQdZK1+t8ireDswhofigRb3fxfI/4jj+xkffUX/1ccxxhEP9qyyBEH9Cx9vhf8TB7eiSpBHjZVSa4whQMJC1TqIR6q8RERtjOr2ID0yx3oYi0oAIvZCPz4eG64p3ObuREeOHUIR3MBVJwq9yll5P7KHdiPBOiOoRa/AjXz21J3k04l+i8OjErj4kaXWQiIVO/EvA+KLRAEnUVomtjPd6SvR3RLoeMT54nKFH1EqtkkEGFaQuTlSQrsxhRiOIt51S/Ho8B11+FUlwRaHnU4utEI38/mgSjRJ8PhWEtN6Z6WcncQOU4efjKoh3zfi7/+DfhPrwOZ9a/iYBiVJJxPlei3CqIDTYEqAPFow5/c71fAdVIwmo4n+cTIGbr2n9NULAE5ifcNNS63hvEOFk0wxYnICBBZ0I9xERBVILF0uggNdxuOkR4S6ngvgPmArzHv4KpMKGQFjQ+Rw6q9dC6R6dgZaJF7RVWIH0BTY9h+fz0ohHOyLuy+He/hN4GUR3/RxcBx2f76izarI9CaXmzRmhNQuSfIgJkva5GzN6HJbhQxCNsDGDSh56plmef6sg2eaXPsYBt5W+H6VE6omG6hOS1w4hiTWiThbJ1YO+RSO1vrpMlomf6nhQGz0m7qT6W04XOUHyzhZ4rkG+0hxL66oDW9mnPWyL3TMmssxyQUwr01CHX7b2OvUIaqS48TnMtAoEQTQixJeAlDfSiGmk/l8jpwIpTyFqOfeNIHWBooC036ERtUQp2tm/CKT5jjySbxTlvUVj2yhjvyWDVL3yfKRojXwLSEWUp7q0PBAKPp7m5YGoT3WH7wAZ1BeOywNZv3Gak/LIqriwxbQ5jaTcsEW1eb+FvoWo+zr5V/IUOvNtsapU2zJXSyj0xVB13sPfq0kkZA7dubIIKXIlJ8Cy7u+BN22RVcr+peOuxHdcBbA04FAVmEoEtO5vX55K4KVZS1QJvBBzU1rgUl8JapBNYIowLoZtD9NWRTWKqqe36L48BSz8QPH9epqqIDehlh2UuqocEmrdV7AvhuRoM74m80yeDIEX3ppreNN235FxV58DNjhswn5K8zK21+5ctjut6NmUIoy9tVvitnHr2VDM3ahtW8KQ/Vbsp9GGiWHfk8skyTSFz9/HdxhHe4uR/RxX/mG1SGXwypcDJNmCMfucZ/C1CuCQUbiBUDYbe7tiRkZX8GIat50d+wqR1fdN7ygGzrHrcN4kGFHK02cil5M6INgQVsvnNz77T5PqUFYJJInYmIBplJfP5On4eiOwYfhuCD44oLyYVs43rI1rk3H7usttzq8Qo3j84vavN9mOkAeuq8dHEd9NtCVKX51Oen+MM6IEYvz5StOehKLpIjD+nKU5AQWJpLizdB+1sb5LQvFRxbSJVGHmSdK/0WWaPguEYmcSJ68aWkK6rAw6jwSSCmrTWVHT96R7HwHANEgqybVJL+E2vE2q7Uu91Gr73SbbNUvZDtiOlCeIv4r/AI+0XUwz1lvcAAAAAElFTkSuQmCC")}.markdown-body h2{position:relative;padding:0 0 0 20px;font-size:20px;font-weight:700;color:#614500}.markdown-body h2:before{content:"";position:absolute;top:3px;bottom:0;left:0;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAQlBMVEVHcEwlRnqtZBj76q4lRnolRnolRnolRnolRnokRnr/gGtrVUeLXDBKTl+hYSHasW7Ik0zs0JG4dCvUdEE0SW+rYxrLQJfjAAAACnRSTlMA////0H/xUaMi5MCoTwAACfVJREFUeNrtnQl3qygUgJ9GXAqosfL//+pgmgXwXmRNJGdu55xO+6rx8+6I8O9fehmGriN93zdN07bVXdpW/ih/SbpuGP6dXbpOXv7z2i3S9ISck2eQOnAhMHG64VQQbmrAaM4B05GmipaGdB+m6BNQPBXzMYtKR3EPbB/RS5eY4g+lIW9WBqnySCvVMrzRpqqs0g9nwVg5p1KYlHEchRT5bftp+y3n6xlQDjAkABtrKULU9f377ev+4/1/NiT+URRiZRhrcZP6WLa/Gq005BORaqXsdYEuHPIP798ZxSyt6d5sVfxJESRCsvB32lfXwhRjnUBGmKXNoJQe04VIASJqRC/9G7yDsyQMiloYz+0pHYghEoPISAGgpDSvHsCoMwmA0mfjSG5UOsqah2RodkljzMkhZZdamiEDB8+Nsbk9T04yGNljDXGOZZ6u0+Tj9DuvbyNJBuPO0ABtLNPlJtfZJ4CNNCWJoY8gddwxNpm9YrHh9DEkBoeMud4Kma8XRZaYpBJOYvg59U9wOsblMvmGrzQe30dyqFZ1dxPfO0FT5BOdw989THVs4q1TFk+iN4PMu7CaLpd4EJOExNaJLE4d0xQKYpJ0cY5Ozcwwu6WOu2cs9TUYxPB4b4fvLRzTUXbT1HH7y0BnB0j6CAehkPFfFzd1TMsi6sU1/P4VM9NiISHBlYnBMR+kad075sXlmMehj1twnfTUqJH4GJfqIKte7S72emPnHbdiYHIB0e6ATjKq1UoTaFh6wBL2csMIVo9fH/v6QRHAgoxrOHQQxG/36tC1ODmGOeBGBRmXalgcdhDQ1xF1vI6a3DF2d4r7G1enOUgNOshlFq7qUCxrca9ldiCam7ilxRbP6JbOYsYtfLFmkcXEgLG1DN/6eroxHjqh5bh+Uw27e1oWVK7pN+AqwzUcq/UYTPw8nWufLFBHN2zcxLRYlmGPs6rA2Wy0uJe/E7TknbHIa1WH1bLA8DAj3JpxET+FCNCWZ5uNT6jxTPZK/1mXoCBeKlGLRT2lP69XN3XdqqCojKX1ZVda6iD2McjeXSHa0I+AHd2InGAJgjRVM6gOBfygDrarRJnho6eQBbrns+HkcNUCWtYClJa66qFgPbqqZEBTCOAgRqxCOhQBWpZeIC6QBq91hEoI5unTjsMsK9DCFigY9WNn19hgVCrELalrTw6WnYMYzjHhQ2/7G2xTx1HvwpzSe4cVi5ORQQwMW9+72FU5L4gGsa6Yu1RcDeIhs64Qs8izt0vGH+n9/IKaIlYpM2UqkYOrwwq5CgBjWpyGtxaonxe4KaJ3hx+7O0HaqVkxLBPj8FmBVmjNevIUFhUuDmMq5NDV9RwyPe/95IvxAhG7ymqxHGE5sZJL2kPLUhUinkXfrnFwGFwXD99djNLSFh/meXEb2B6Oyiwm0I7BC+OlTlOVPk9K8CIYzu5YHwKDTI6XAo5lz3WEqEXwQRKhh5cyLa6D81P4PXBw984as9YaGXHwx4Ba8rmOldUat/BHt9cQ38AaljnBdCJqs60OcXVDJZP//ZwSWtV9FpHNtgg22KuYx/U2tB5Mcp1TYOiphNhiFjgWeJ3DL2OZpuuUisIoUyzZEJ76I+LmyqWdv8LwnEiwMYczihjxeqtBsuFJSTg2oD1ETQx4v6D1VleSZW1xCwvAfVGWpQ069kgrQksAUW2rReYzsboIjSABuDQX0QJwB9cnZVgWVgE31vrklAJnEmVObykgYCk/VGX5OlpuKb5eiovUAvJ2tMstw0kIkNdpiSA91K6XA6K8CVCyr4PePhTo65q3DyX7OpTbSVk1PB62mhJ9HSpSqtKaESxsFRm0tLBVcvTV+vbBrLRK4hC7aitN9B0ZpX6vNMgjGIt5ZdmMv32KrmprD1afsPd4FEhThK0+WfTl3kpd482AGvG3jQdZK1+t8ireDswhofigRb3fxfI/4jj+xkffUX/1ccxxhEP9qyyBEH9Cx9vhf8TB7eiSpBHjZVSa4whQMJC1TqIR6q8RERtjOr2ID0yx3oYi0oAIvZCPz4eG64p3ObuREeOHUIR3MBVJwq9yll5P7KHdiPBOiOoRa/AjXz21J3k04l+i8OjErj4kaXWQiIVO/EvA+KLRAEnUVomtjPd6SvR3RLoeMT54nKFH1EqtkkEGFaQuTlSQrsxhRiOIt51S/Ho8B11+FUlwRaHnU4utEI38/mgSjRJ8PhWEtN6Z6WcncQOU4efjKoh3zfi7/+DfhPrwOZ9a/iYBiVJJxPlei3CqIDTYEqAPFow5/c71fAdVIwmo4n+cTIGbr2n9NULAE5ifcNNS63hvEOFk0wxYnICBBZ0I9xERBVILF0uggNdxuOkR4S6ngvgPmArzHv4KpMKGQFjQ+Rw6q9dC6R6dgZaJF7RVWIH0BTY9h+fz0ohHOyLuy+He/hN4GUR3/RxcBx2f76izarI9CaXmzRmhNQuSfIgJkva5GzN6HJbhQxCNsDGDSh56plmef6sg2eaXPsYBt5W+H6VE6omG6hOS1w4hiTWiThbJ1YO+RSO1vrpMlomf6nhQGz0m7qT6W04XOUHyzhZ4rkG+0hxL66oDW9mnPWyL3TMmssxyQUwr01CHX7b2OvUIaqS48TnMtAoEQTQixJeAlDfSiGmk/l8jpwIpTyFqOfeNIHWBooC036ERtUQp2tm/CKT5jjySbxTlvUVj2yhjvyWDVL3yfKRojXwLSEWUp7q0PBAKPp7m5YGoT3WH7wAZ1BeOywNZv3Gak/LIqriwxbQ5jaTcsEW1eb+FvoWo+zr5V/IUOvNtsapU2zJXSyj0xVB13sPfq0kkZA7dubIIKXIlJ8Cy7u+BN22RVcr+peOuxHdcBbA04FAVmEoEtO5vX55K4KVZS1QJvBBzU1rgUl8JapBNYIowLoZtD9NWRTWKqqe36L48BSz8QPH9epqqIDehlh2UuqocEmrdV7AvhuRoM74m80yeDIEX3ppreNN235FxV58DNjhswn5K8zK21+5ctjut6NmUIoy9tVvitnHr2VDM3ahtW8KQ/Vbsp9GGiWHfk8skyTSFz9/HdxhHe4uR/RxX/mG1SGXwypcDJNmCMfucZ/C1CuCQUbiBUDYbe7tiRkZX8GIat50d+wqR1fdN7ygGzrHrcN4kGFHK02cil5M6INgQVsvnNz77T5PqUFYJJInYmIBplJfP5On4eiOwYfhuCD44oLyYVs43rI1rk3H7usttzq8Qo3j84vavN9mOkAeuq8dHEd9NtCVKX51Oen+MM6IEYvz5StOehKLpIjD+nKU5AQWJpLizdB+1sb5LQvFRxbSJVGHmSdK/0WWaPguEYmcSJ68aWkK6rAw6jwSSCmrTWVHT96R7HwHANEgqybVJL+E2vE2q7Uu91Gr73SbbNUvZDtiOlCeIv4r/AI+0XUwz1lvcAAAAAElFTkSuQmCC");background-size:100% 100%;background-repeat:no-repeat;width:15px;height:15px;margin:auto}.markdown-body h3{width:100%;text-align:left;margin:20px 10px 0 0;font-size:18px;font-weight:700;display:inline-block;padding-left:10px;padding-bottom:0;border-left:5px solid #8f6600;color:#614500}.markdown-body h4,.markdown-body h5,.markdown-body h6{font-weight:700;color:#a37400}.markdown-body h4{font-size:17px}.markdown-body h5,.markdown-body h6{display:flex;align-items:center}.markdown-body h5:after,.markdown-body h6:after{display:inline-block;border:2px solid #fff6e0;color:rgba(189,134,0,.5);border-radius:50%;text-align:center;margin-left:5px}.markdown-body h5{font-size:14px}.markdown-body h5:after{content:"5";width:15px;height:15px;line-height:15px;font-size:13px}.markdown-body h6{font-size:12px}.markdown-body h6:after{content:"6";width:13px;height:13px;line-height:13px;font-size:12px}.markdown-body p{color:#412c0c;letter-spacing:1px;font-weight:400;margin-bottom:16px}.markdown-body img{max-width:100%;display:block;margin:auto}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#755300;font-weight:400;border-bottom:1px solid #755300;font-weight:bolder;text-decoration:none}.markdown-body table{width:100%!important;margin:0;font-size:12px;width:auto;max-width:100%;overflow:auto;border-collapse:collapse;border-spacing:0}.markdown-body table img{box-shadow:none}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body thead tr th{text-align:center}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px;box-sizing:border-box;border:1px solid rgba(72,42,10,.1)}.markdown-body blockquote{position:relative;text-size-adjust:100%;line-height:25px;font-weight:400;border-radius:10px;font-style:normal;text-align:left;box-sizing:inherit;border:1px solid #ffd87a;background-color:rgba(189,134,0,.5);margin:20px 0;padding:20px}.markdown-body blockquote p{color:#fff6e0;letter-spacing:2px;margin:0}.markdown-body blockquote:after,.markdown-body blockquote:before{position:absolute;color:#cc9100;font-size:34px;font-weight:700}.markdown-body blockquote:before{content:"â";top:8px;left:5px}.markdown-body blockquote:after{content:"â";right:5px;bottom:-5px}.markdown-body strong{color:#c28a00;font-weight:bolder}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{color:#c28a00}.markdown-body em strong{font-style:normal;color:#c28a00;background-color:#8a6200}.markdown-body s{color:#c28a00}.markdown-body hr{border-top:1px solid #805b00}.markdown-body code,.markdown-body li code,.markdown-body p code{color:#996d00;background-color:rgba(130,98,0,.3)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit;color:#858585;font-family:bold;letter-spacing:1px}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection,.markdown-body img::selection{color:rgba(189,134,0,.5);background-color:#fff}.markdown-body a::selection,.markdown-body b::selection,.markdown-body del::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:transparent}.markdown-body pre&gt;code::selection{background-color:rgba(189,134,0,.5)}.markdown-body .math .math-inline::selection,.markdown-body blockquote::selection,.markdown-body ol::selection,.markdown-body p::selection,.markdown-body strong::selection,.markdown-body table::selection,.markdown-body ul::selection{background-color:rgba(189,134,0,.5)}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ğŸ§© ä¸€ã€åº•å±‚åŸç†ï¼šä¸¤è€…åˆ°åº•åœ¨â€œç”Ÿæˆä»€ä¹ˆâ€</h2>























<table><thead><tr><th align="left">æŠ€æœ¯</th><th align="left">æ ¸å¿ƒæœºåˆ¶</th><th align="left">è¾“å‡ºå½¢æ€</th><th align="left">æ¶æ„æ€æƒ³</th></tr></thead><tbody><tr><td align="left"><strong>HTML</strong></td><td align="left">é™æ€æ–‡ä»¶ï¼Œæµè§ˆå™¨ç›´æ¥æ¸²æŸ“</td><td align="left"><code>.html</code> æ–‡ä»¶ + èµ„æºï¼ˆCSS/JSï¼‰</td><td align="left">â€œå†™å¥½äº†ï¼Œå°±æ‘†åœ¨é‚£é‡Œâ€</td></tr><tr><td align="left"><strong>Next.js</strong></td><td align="left">Reactæ¡†æ¶ + æ¸²æŸ“å¼•æ“ï¼ˆSSR/SSG/ISRï¼‰</td><td align="left">åŠ¨æ€æˆ–é¢„ç”Ÿæˆçš„HTML</td><td align="left">â€œæ ¹æ®æ•°æ®å’Œé€»è¾‘ç”Ÿæˆé¡µé¢â€</td></tr></tbody></table>
<h3 data-id="heading-1">ğŸ’¡ç†è§£é‡ç‚¹ï¼š</h3>
<ul>
<li>HTML â†’ å°±åƒä¸€æœ¬å°å¥½çš„ä¹¦ï¼šå†…å®¹ç¡®å®šã€ç»´æŠ¤ç®€å•ã€æ°¸è¿œé«˜é€Ÿã€‚</li>
<li>Next.js â†’ åƒä¸€å°å°åˆ·æœºï¼šå¯ä»¥éšæ—¶é‡å°ã€åŠ å†…å®¹ã€æ¢å°é¢ã€‚</li>
</ul>
<p>ğŸ‘‰ è‹¥ä½ ç¡®å®šå†…å®¹æ°¸è¿œä¸å˜ï¼Œé‚£HTMLå°±å¤Ÿäº†ã€‚<br/>
ğŸ‘‰ è‹¥å†…å®¹éšæ—¶é—´æˆ–æ•°æ®å˜åŒ–ï¼ŒNext.jsæ›´åˆé€‚ã€‚</p>
<hr/>
<h2 data-id="heading-2">âš™ï¸ äºŒã€ä»æ€§èƒ½è§’åº¦çœ‹ï¼šé™æ€=å¿«ï¼Ÿä¸æ€»æ˜¯ï¼</h2>
<p>ç°ä»£Webæ€§èƒ½å·²ä¸åªæ˜¯â€œæœ‰å¤šå¿«â€ï¼Œè€Œæ˜¯â€œ<strong>åœ¨ä¸åŒæƒ…å¢ƒä¸‹ä¿æŒä¸€è‡´çš„å¿«</strong>â€ã€‚</p>



































<table><thead><tr><th align="left">åœºæ™¯</th><th align="left">HTML</th><th align="left">Next.js (SSG)</th><th align="left">Next.js (SSR)</th></tr></thead><tbody><tr><td align="left"><strong>é¦–å±åŠ è½½</strong></td><td align="left">ğŸš€ æå¿«</td><td align="left">ğŸš€ å‡ ä¹ä¸€æ ·å¿«</td><td align="left">ğŸ¢ ç¨æ…¢ï¼ˆæœåŠ¡å™¨æ¸²æŸ“ï¼‰</td></tr><tr><td align="left"><strong>CDNç¼“å­˜åˆ†å‘</strong></td><td align="left">âœ… æ˜“å®ç°</td><td align="left">âœ… å¯é™æ€å¯¼å‡º</td><td align="left">âš ï¸ åŠ¨æ€å†…å®¹è¾ƒéš¾ç¼“å­˜</td></tr><tr><td align="left"><strong>åŠ¨æ€æ›´æ–°</strong></td><td align="left">âŒ éœ€è¦é‡æ–°éƒ¨ç½²</td><td align="left">âœ… SSG + revalidate</td><td align="left">âœ… SSRå³æ—¶æ›´æ–°</td></tr><tr><td align="left"><strong>ç»´æŠ¤æˆæœ¬</strong></td><td align="left">ğŸª¶ æä½</td><td align="left">ğŸ§© ä¸­ç­‰ï¼ˆä¾èµ–æ¡†æ¶ï¼‰</td><td align="left">ğŸ§© è¾ƒé«˜ï¼ˆéœ€è¦æœåŠ¡ç«¯ï¼‰</td></tr></tbody></table>
<blockquote>
<p>å¦‚æœä½ è¦ç»´æŠ¤ä¸€ä¸ª<strong>çº¯å†…å®¹å‹åšå®¢</strong>ã€<strong>æ–‡æ¡£ä¸­å¿ƒ</strong>ã€æˆ–<strong>å“ç‰Œå±•ç¤ºé¡µ</strong>ï¼š</p>
<ul>
<li>HTML = â€œè½»é‡+ç¨³å®š+æ²¡äººæ”¹â€ã€‚</li>
<li>Next.jsï¼ˆSSG æ¨¡å¼ï¼‰ = â€œçµæ´»+è‡ªåŠ¨åŒ–ç”Ÿæˆ+æ˜“æ¥å…¥ CI/CDâ€ã€‚</li>
</ul>
</blockquote>
<hr/>
<h2 data-id="heading-3">ğŸ§  ä¸‰ã€ä»å·¥ç¨‹ç”Ÿæ€å’Œè‡ªåŠ¨åŒ–è§’åº¦è®²</h2>
<p>å·¥ç¨‹å¸ˆæœ€æ€•ä»€ä¹ˆï¼Ÿâ€”â€”<strong>é‡å¤åŠ³åŠ¨</strong>ã€‚</p>
<p>çº¯HTMLï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- about.html --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>å…³äºæˆ‘ä»¬<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>æˆ‘ä»¬æ˜¯ä¸€å®¶çƒ­çˆ±ä»£ç ä¸æ–‡åŒ–çš„å›¢é˜Ÿã€‚<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">footer</span>&gt;</span>Â©2025 Company Name<span class="hljs-tag">&lt;/<span class="hljs-name">footer</span>&gt;</span>
</code></pre>
<p>æ”¹ä¸€æ¬¡é¡µè„šï¼Ÿæ‰€æœ‰æ–‡ä»¶éƒ½å¾—åŠ¨æ‰‹æ”¹ ğŸ‘‹ã€‚</p>
<p>Next.js å¯ä»¥ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// components/Layout.js</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Layout</span>(<span class="hljs-params">{ children }</span>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;&gt;</span>
      {children}
      <span class="hljs-tag">&lt;<span class="hljs-name">footer</span>&gt;</span>Â©2025 Company Name<span class="hljs-tag">&lt;/<span class="hljs-name">footer</span>&gt;</span>
    <span class="hljs-tag">&lt;/&gt;</span></span>
  );
}
</code></pre>
<p>ä¸€æ”¹å…¨ç«™åŒæ­¥ âœ¨<br/>
è¿™å°±å« <strong>â€œç»„ä»¶åŒ–æ€ç»´â€</strong> ï¼šæ–‡åŒ–å†…å®¹ä¸è¯¥ä¸€æ¬¡æ€§é›•åˆ»ï¼Œè€Œåº”è¯¥èƒ½çµæ´»æ¼”åŒ–ã€‚</p>
<hr/>
<h2 data-id="heading-4">ğŸŒ å››ã€ä»SEOä¸å›½é™…åŒ–è§’åº¦</h2>
<p>å¦‚æœä½ çš„é™æ€å†…å®¹éœ€è¦ï¼š</p>
<ul>
<li>å¤šè¯­è¨€ç‰ˆæœ¬ï¼ˆå›½é™…ç½‘ç«™ ğŸŒï¼‰ï¼›</li>
<li>åŠ¨æ€Metaï¼ˆè‡ªåŠ¨ç”Ÿæˆæ ‡é¢˜ã€æè¿°ã€OGå›¾ç­‰ï¼‰ï¼›</li>
<li>AIGCå†…å®¹è‡ªåŠ¨æ›´æ–°ï¼›</li>
</ul>
<p>ğŸ‘‰ é‚£Next.jså‹å€’æ€§æ›´ä¼˜ç§€ã€‚</p>
<p><strong>ä¸ºä»€ä¹ˆï¼Ÿ</strong><br/>
å› ä¸ºNextæ”¯æŒï¼š</p>
<ul>
<li>å†…ç½® <strong>å›½é™…åŒ–è·¯ç”±ï¼ˆi18nï¼‰</strong> ï¼›</li>
<li>åŠ¨æ€<strong>Metaç”Ÿæˆ</strong>ï¼›</li>
<li><strong>ISRï¼ˆå¢é‡é™æ€å†ç”Ÿæˆï¼‰</strong> ï¼Œå¯è‡ªåŠ¨å‘¨æœŸæ€§åˆ·æ–°å†…å®¹ã€‚</li>
</ul>
<p>HTMLè™½ç„¶ä¹Ÿèƒ½åšè¿™äº›ï¼Œä½†å¾—é â€œäººè‚‰æ›´æ–°â€æˆ–â€œè„šæœ¬æ‹¼æ¥â€ï¼Œæˆæœ¬é«˜ã€å®¹æ˜“å¿˜ã€‚</p>
<hr/>
<h2 data-id="heading-5">ğŸ­ äº”ã€æ–‡åŒ–ä¸è¡¨è¾¾å±‚é¢ï¼šå“ªç§æ›´â€œæœ‰ç”Ÿå‘½åŠ›â€</h2>
<p>æˆ‘ä»¬å¸¸è¯´ï¼š</p>
<blockquote>
<p>â€œHTML æ˜¯ç¢‘æ–‡ï¼ŒNext æ˜¯ç”Ÿæ€ã€‚â€</p>
</blockquote>
<p>å½“WebAIGCæ—¶ä»£åˆ°æ¥â€”â€”ç½‘ç«™ä¸Šçš„å†…å®¹ä¸å†é™æ­¢ï¼Œè€Œæ˜¯<strong>æ–‡åŒ–å¯¹è¯çš„æŒç»­ç”Ÿæˆä½“</strong>ã€‚</p>
<ul>
<li>HTMLæ›´åƒ<strong>ä¸€å¹…æŒ‚åœ¨å¢™ä¸Šçš„æ²¹ç”»</strong>ï¼›</li>
<li>Nextæ›´åƒ<strong>ä¸€ç‰‡èƒ½ç”Ÿé•¿çš„AIèŠ±å›­</strong>ã€‚ ğŸŒ¸</li>
</ul>
<p>å¦‚æœä½ è¦åšçš„æ˜¯ï¼š</p>
<ul>
<li>æ•°å­—å±•é¦†</li>
<li>äº’åŠ¨å¼æ–‡åŒ–æ¡£æ¡ˆ</li>
<li>AIGCå†…å®¹å±•ç¤º<br/>
é‚£Next.jsæ˜¯æœªæ¥å‹é€‰æ‹©ï¼Œå› ä¸ºå®ƒèƒ½ï¼š</li>
<li>åŠ¨æ€æ³¨å…¥AIç”Ÿæˆå†…å®¹ï¼›</li>
<li>ä¿ç•™è¯­ä¹‰åŒ–ï¼›</li>
<li>å®ç°WebåŠ¨ç”»äº¤äº’ï¼›</li>
<li>ä¸åç«¯çŸ¥è¯†åº“è”åŠ¨ï¼ˆå¦‚LangChainã€RAGæ¶æ„ï¼‰ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-6">ğŸ§­ å…­ã€æœ€ç»ˆå»ºè®®è¡¨ï¼ˆå†³ç­–å‚è€ƒï¼‰</h2>



































<table><thead><tr><th align="left">ç›®æ ‡</th><th align="left">æ¨èæ–¹æ¡ˆ</th><th align="left">ç†ç”±</th></tr></thead><tbody><tr><td align="left"><strong>ä¸€æ¬¡æ€§å…¬å¸å®˜ç½‘ï¼ˆé•¿å¹´ä¸æ”¹ï¼‰</strong></td><td align="left">HTML</td><td align="left">ç®€æ´ã€å¿«é€Ÿã€æˆæœ¬ä½</td></tr><tr><td align="left"><strong>å­¦æœ¯æˆ–å“ç‰Œä»‹ç»+å¤šè¯­ç§</strong></td><td align="left">Next.jsï¼ˆSSG + i18nï¼‰</td><td align="left">é™æ€+å¤šæ–‡åŒ–é€‚é…</td></tr><tr><td align="left"><strong>æ–‡åŒ–æ¡£æ¡ˆã€æ•™è‚²å¹³å°</strong></td><td align="left">Next.jsï¼ˆSSR/ISRï¼‰</td><td align="left">æ”¯æŒåŠ¨æ€å†…å®¹æ›´æ–°</td></tr><tr><td align="left"><strong>AIç”Ÿæˆå†…å®¹å±•ç¤ºï¼ˆWebAIGCï¼‰</strong></td><td align="left">Next.js</td><td align="left">å¯è¯»å†™AIæ¥å£ã€å¯äº¤äº’</td></tr><tr><td align="left"><strong>æç®€Landing Page</strong></td><td align="left">HTML</td><td align="left">å‡ KBå³å¯éƒ¨ç½²</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-7">ğŸ”® ä¸ƒã€æˆ‘çš„æ¶æ„å»ºè®®</h2>
<p>ç»“åˆåº•å±‚ç†è§£ä¸æ–‡åŒ–é¡¹ç›®çš„å¯æŒç»­æ€§ï¼Œæˆ‘æœ€æ¨èçš„ç»„åˆæ˜¯ï¼š</p>
<blockquote>
<p>â€œNext.js + Markdownå†…å®¹ä»“åº“ + SSGå¯¼å‡º + CDNéƒ¨ç½²â€</p>
</blockquote>
<p>ä¹Ÿå°±æ˜¯ï¼š</p>
<ul>
<li>ç¼–è¾‘è€…å†™<code>Markdown</code>ï¼ˆæ–‡åŒ–å†…å®¹ï¼‰ï¼›</li>
<li>Nextè‡ªåŠ¨æ„å»ºé™æ€é¡µï¼›</li>
<li>CDNå…¨çƒåˆ†å‘ï¼›</li>
<li>æŸäº›ç‰ˆå—è¿˜èƒ½è‡ªåŠ¨é‡ç”Ÿï¼ˆISRï¼‰ã€‚</li>
</ul>
<p>è¿™å°±æ˜¯æ‰€è°“çš„â€œ<strong>å¯æ¼”åŒ–çš„é™æ€å†…å®¹æ¶æ„ï¼ˆEvolvable Static Web)</strong> â€ã€‚<br/>
æ—¢å…¼å®¹æ–‡åŒ–ä¼ æ‰¿çš„ç¨³å®šæ€§ï¼Œä¹Ÿæ‹¥æŠ±æœªæ¥å˜åŒ–çš„AIé€»è¾‘ã€‚</p>
<hr/>
<h2 data-id="heading-8">ğŸ¯ æœ€åä¸€å¥è¯æ€»ç»“</h2>
<blockquote>
<p>ğŸ’¬ â€œé™æ€HTMLæ˜¯è®°å¿†çš„å®¹å™¨ï¼›Next.jsæ˜¯æ–‡åŒ–çš„å¼•æ“ã€‚â€</p>
</blockquote>
<p>â€”â€”å¦‚æœä½ åªéœ€è¦è®°ä½ä¸€ä»¶äº‹ï¼š<br/>
ğŸ‘‰ <strong>ä¸å˜çš„å†…å®¹ç”¨HTMLï¼Œæ´»ç€çš„æ–‡åŒ–ç”¨Nextã€‚</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»é›¶å¼€å§‹ï¼šMCPæ•°æ®åº“åŠ©æ‰‹ï¼ˆä¸‰ï¼‰- å¤šæ•°æ®åº“æ”¯æŒ]]></title>    <link>https://juejin.cn/post/7585839411122978862</link>    <guid>https://juejin.cn/post/7585839411122978862</guid>    <pubDate>2025-12-22T02:26:25.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7585839411122978862" data-draft-id="7585866811717124123" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»é›¶å¼€å§‹ï¼šMCPæ•°æ®åº“åŠ©æ‰‹ï¼ˆä¸‰ï¼‰- å¤šæ•°æ®åº“æ”¯æŒ"/> <meta itemprop="keywords" content="MCP"/> <meta itemprop="datePublished" content="2025-12-22T02:26:25.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="çº¢é¼»å­æ—¶ä»£"/> <meta itemprop="url" content="https://juejin.cn/user/1743149753974384"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»é›¶å¼€å§‹ï¼šMCPæ•°æ®åº“åŠ©æ‰‹ï¼ˆä¸‰ï¼‰- å¤šæ•°æ®åº“æ”¯æŒ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1743149753974384/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    çº¢é¼»å­æ—¶ä»£
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-22T02:26:25.000Z" title="Mon Dec 22 2025 02:26:25 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»17åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä»£ç å·²ä¸Šä¼ githubä¸Šï¼Œè¿™æ˜¯<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fbiao994%2Fmcp-datatools" target="_blank" title="https://github.com/biao994/mcp-datatools" ref="nofollow noopener noreferrer">githubä»“åº“åœ°å€</a>ï¼Œå¦‚æœé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œæ¬¢è¿ç‚¹ä¸ªStaré¼“åŠ±ï¼</p>
<h2 data-id="heading-0">ä¸ºä»€ä¹ˆè¦æ”¯æŒå¤šæ•°æ®åº“ï¼Ÿ</h2>
<p>å‰ä¸¤ç« æˆ‘ä»¬åªæ”¯æŒSQLiteï¼Œä½†ç°å®ä¸­çš„ä¼ä¸šç¯å¢ƒéœ€è¦ï¼š</p>
<ul>
<li><strong>PostgreSQL</strong> - ä¼ä¸šçº§åº”ç”¨çš„é¦–é€‰ï¼ŒåŠŸèƒ½å¼ºå¤§</li>
<li><strong>MySQL</strong> - Webåº”ç”¨æœ€æµè¡Œçš„æ•°æ®åº“</li>
<li><strong>é…ç½®ç®¡ç†</strong> - ä¸€å¥—ä»£ç æ”¯æŒå¤šç§ç¯å¢ƒ</li>
</ul>
<p>ä»Šå¤©æˆ‘ä»¬è¦è®©MCP DataToolsä»"ç©å…·"å˜æˆ"å·¥å…·"ï¼</p>
<h2 data-id="heading-1">ç¬¬ä¸€æ­¥ï¼šé¡¹ç›®ç»“æ„å‡çº§</h2>
<p>è¿™æ¬¡çš„é¡¹ç›®ç»“æ„æ›´åŠ å®Œå–„ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">mcp-datatools/
â”œâ”€â”€ pyproject.toml              <span class="hljs-comment"># å‡çº§ä¾èµ–é…ç½®</span>
â”œâ”€â”€ docker-compose.db.yml       <span class="hljs-comment"># æ•°æ®åº“ç¯å¢ƒï¼ˆå¯é€‰ï¼‰</span>
â”œâ”€â”€ config/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ settings.py             <span class="hljs-comment"># åº”ç”¨é…ç½®ç®¡ç†</span>
â”œâ”€â”€ src/
â”‚   â””â”€â”€ mcp_datatools/
â”‚       â”œâ”€â”€ __init__.py
â”‚       â”œâ”€â”€ server.py           <span class="hljs-comment"># å‡çº§çš„MCPæœåŠ¡å™¨</span>
â”‚       â”œâ”€â”€ database.py         <span class="hljs-comment"># å¤šæ•°æ®åº“ç®¡ç†å™¨</span>
â”‚       â””â”€â”€ utils.py            <span class="hljs-comment"># å…¬å…±å·¥å…·å‡½æ•°</span>
â”œâ”€â”€ tests/
â”‚   â””â”€â”€ test_multi_database.py  <span class="hljs-comment"># å¤šæ•°æ®åº“æµ‹è¯•</span>
â””â”€â”€ data/
    â”œâ”€â”€ test.db                <span class="hljs-comment"># SQLiteæµ‹è¯•æ•°æ®</span>
    â””â”€â”€ init_scripts/          <span class="hljs-comment"># æ•°æ®åº“åˆå§‹åŒ–è„šæœ¬</span>
        â”œâ”€â”€ init_sqlite_db.py   <span class="hljs-comment"># SQLiteåˆå§‹åŒ–è„šæœ¬</span>
        â”œâ”€â”€ init_postgresql_db.py <span class="hljs-comment"># PostgreSQLåˆå§‹åŒ–è„šæœ¬</span>
        â””â”€â”€ mysql.sql          <span class="hljs-comment"># MySQLåˆå§‹åŒ–è„šæœ¬</span>
</code></pre>
<h2 data-id="heading-2">ç¬¬äºŒæ­¥ï¼šä¾èµ–å‡çº§</h2>
<p>é¦–å…ˆå‡çº§<code>pyproject.toml</code>ï¼Œæ·»åŠ å¤šæ•°æ®åº“æ”¯æŒï¼š</p>
<pre><code class="hljs language-toml" lang="toml"><span class="hljs-comment"># MCP DataTools é¡¹ç›®é…ç½®æ–‡ä»¶</span>
<span class="hljs-comment"># è¿™æ˜¯ä¸€ä¸ªæ”¯æŒå¤šæ•°æ®åº“è¿æ¥çš„MCPæœåŠ¡å™¨é¡¹ç›®</span>

<span class="hljs-section">[project]</span>
<span class="hljs-comment"># é¡¹ç›®åŸºæœ¬ä¿¡æ¯</span>
<span class="hljs-attr">name</span> = <span class="hljs-string">"mcp-datatools"</span>
<span class="hljs-attr">version</span> = <span class="hljs-string">"0.3.0"</span>
<span class="hljs-attr">description</span> = <span class="hljs-string">"A MCP server that connects to multiple databases"</span>
<span class="hljs-attr">requires-python</span> = <span class="hljs-string">"&gt;=3.10"</span>  <span class="hljs-comment"># æœ€ä½Pythonç‰ˆæœ¬è¦æ±‚</span>

<span class="hljs-comment"># æ ¸å¿ƒä¾èµ–åŒ…</span>
<span class="hljs-attr">dependencies</span> = [
    <span class="hljs-string">"mcp&gt;=1.0.0"</span>,                    <span class="hljs-comment"># MCPåè®®æ ¸å¿ƒåº“</span>
    <span class="hljs-string">"sqlalchemy&gt;=2.0.0"</span>,             <span class="hljs-comment"># SQLAlchemy ORMï¼Œæ”¯æŒå¤šç§æ•°æ®åº“</span>
    <span class="hljs-string">"psycopg2-binary&gt;=2.9.0"</span>,        <span class="hljs-comment"># PostgreSQLæ•°æ®åº“é©±åŠ¨</span>
    <span class="hljs-string">"pymysql&gt;=1.1.0"</span>,                <span class="hljs-comment"># MySQLæ•°æ®åº“é©±åŠ¨</span>
    <span class="hljs-string">"cryptography&gt;=41.0.0"</span>,          <span class="hljs-comment"># åŠ å¯†æ”¯æŒï¼Œç”¨äºå®‰å…¨è¿æ¥</span>
    <span class="hljs-string">"python-dotenv&gt;=1.0.0"</span>,          <span class="hljs-comment"># ç¯å¢ƒå˜é‡ç®¡ç†</span>
    <span class="hljs-string">"pydantic&gt;=2.0.0"</span>,               <span class="hljs-comment"># æ•°æ®éªŒè¯å’Œåºåˆ—åŒ–</span>
    <span class="hljs-string">"pydantic-settings&gt;=2.10.1"</span>,     <span class="hljs-comment"># é…ç½®ç®¡ç†æ‰©å±•</span>
]

<span class="hljs-comment"># å¯é€‰ä¾èµ–åŒ…ï¼ˆå¼€å‘ç¯å¢ƒï¼‰</span>
<span class="hljs-section">[project.optional-dependencies]</span>
<span class="hljs-attr">dev</span> = [
    <span class="hljs-string">"pytest&gt;=7.0.0"</span>,                 <span class="hljs-comment"># æµ‹è¯•æ¡†æ¶</span>
    <span class="hljs-string">"pytest-asyncio&gt;=0.21.0"</span>,        <span class="hljs-comment"># å¼‚æ­¥æµ‹è¯•æ”¯æŒ</span>
    <span class="hljs-string">"black&gt;=23.0.0"</span>,                 <span class="hljs-comment"># ä»£ç æ ¼å¼åŒ–å·¥å…·</span>
    <span class="hljs-string">"isort&gt;=5.12.0"</span>,                 <span class="hljs-comment"># å¯¼å…¥æ’åºå·¥å…·</span>
]

<span class="hljs-comment"># æ„å»ºç³»ç»Ÿé…ç½®</span>
<span class="hljs-section">[build-system]</span>
<span class="hljs-attr">requires</span> = [<span class="hljs-string">"hatchling"</span>]              <span class="hljs-comment"># ä½¿ç”¨hatchlingä½œä¸ºæ„å»ºåç«¯</span>
<span class="hljs-attr">build-backend</span> = <span class="hljs-string">"hatchling.build"</span>

<span class="hljs-comment"># æ‰“åŒ…é…ç½®</span>
<span class="hljs-section">[tool.hatch.build.targets.wheel]</span>
<span class="hljs-attr">packages</span> = [<span class="hljs-string">"src/mcp_datatools"</span>]      <span class="hljs-comment"># æŒ‡å®šè¦æ‰“åŒ…çš„æºç ç›®å½•</span>

<span class="hljs-comment"># å‘½ä»¤è¡Œè„šæœ¬é…ç½®</span>
<span class="hljs-section">[project.scripts]</span>
<span class="hljs-attr">mcp-datatools</span> = <span class="hljs-string">"mcp_datatools.server:main"</span>  <span class="hljs-comment"># å®šä¹‰å‘½ä»¤è¡Œå…¥å£ç‚¹</span>

<span class="hljs-comment"># æµ‹è¯•é…ç½®</span>
<span class="hljs-section">[tool.pytest.ini_options]</span>
<span class="hljs-attr">pythonpath</span> = [<span class="hljs-string">"src"</span>]                  <span class="hljs-comment"># æ·»åŠ srcç›®å½•åˆ°Pythonè·¯å¾„</span>

<span class="hljs-comment"># ä»£ç æ ¼å¼åŒ–é…ç½®</span>
<span class="hljs-section">[tool.black]</span>
<span class="hljs-attr">line-length</span> = <span class="hljs-number">88</span>                      <span class="hljs-comment"># æ¯è¡Œæœ€å¤§å­—ç¬¦æ•°</span>
<span class="hljs-attr">target-version</span> = [<span class="hljs-string">'py310'</span>]            <span class="hljs-comment"># ç›®æ ‡Pythonç‰ˆæœ¬</span>

<span class="hljs-comment"># å¯¼å…¥æ’åºé…ç½®</span>
<span class="hljs-section">[tool.isort]</span>
<span class="hljs-attr">profile</span> = <span class="hljs-string">"black"</span>                     <span class="hljs-comment"># ä½¿ç”¨blackå…¼å®¹çš„é…ç½®</span>
<span class="hljs-attr">multi_line_output</span> = <span class="hljs-number">3</span>                 <span class="hljs-comment"># å¤šè¡Œå¯¼å…¥çš„æ ¼å¼</span>
</code></pre>
<h2 data-id="heading-3">ç¬¬ä¸‰æ­¥ï¼šé…ç½®ç®¡ç†ç³»ç»Ÿ</h2>
<p>åˆ›å»ºç»Ÿä¸€çš„é…ç½®ç®¡ç†ç³»ç»Ÿï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-string">"""
config/settings.py - åº”ç”¨é…ç½®ç®¡ç†
"""</span>
<span class="hljs-keyword">from</span> pydantic_settings <span class="hljs-keyword">import</span> BaseSettings
<span class="hljs-keyword">from</span> pydantic <span class="hljs-keyword">import</span> Field, ConfigDict
<span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> <span class="hljs-type">Dict</span>, <span class="hljs-type">Any</span>

<span class="hljs-keyword">class</span> <span class="hljs-title class_">DatabaseConfig</span>(<span class="hljs-title class_ inherited__">BaseSettings</span>):
    <span class="hljs-string">"""æ•°æ®åº“é…ç½®"""</span>
    model_config = ConfigDict(env_prefix=<span class="hljs-string">"DB_"</span>)
    
    pool_size : <span class="hljs-built_in">int</span> = Field(default=<span class="hljs-number">20</span>, description=<span class="hljs-string">"è¿æ¥æ± å¤§å°"</span>)
    max_overflow: <span class="hljs-built_in">int</span> = Field(default=<span class="hljs-number">10</span>, description=<span class="hljs-string">"è¿æ¥æ± æœ€å¤§æº¢å‡ºæ•°"</span>)
    pool_timeout: <span class="hljs-built_in">int</span> = Field(default=<span class="hljs-number">30</span>, description=<span class="hljs-string">"è¿æ¥æ± è¶…æ—¶æ—¶é—´"</span>)
    pool_recycle: <span class="hljs-built_in">int</span> = Field(default=<span class="hljs-number">3600</span>, description=<span class="hljs-string">"è¿æ¥æ± å›æ”¶æ—¶é—´"</span>)
    echo: <span class="hljs-built_in">bool</span> = Field(default=<span class="hljs-literal">False</span>, description=<span class="hljs-string">"æ˜¯å¦æ‰“å°SQLè¯­å¥"</span>)

<span class="hljs-keyword">class</span> <span class="hljs-title class_">AppConfig</span>(<span class="hljs-title class_ inherited__">BaseSettings</span>):
    <span class="hljs-string">"""åº”ç”¨é…ç½®"""</span>
    model_config = ConfigDict(env_prefix=<span class="hljs-string">"APP_"</span>)
    
    name: <span class="hljs-built_in">str</span> = Field(default=<span class="hljs-string">"MCP DataTools"</span>, description=<span class="hljs-string">"åº”ç”¨åç§°"</span>)
    version: <span class="hljs-built_in">str</span> = Field(default=<span class="hljs-string">"1.0.0"</span>, description=<span class="hljs-string">"åº”ç”¨ç‰ˆæœ¬"</span>)
    log_level: <span class="hljs-built_in">str</span> = Field(default=<span class="hljs-string">"INFO"</span>, description=<span class="hljs-string">"æ—¥å¿—çº§åˆ«"</span>)
    max_query_results: <span class="hljs-built_in">int</span> = Field(default=<span class="hljs-number">1000</span>, description=<span class="hljs-string">"ç»“æœæœ€å¤§æŸ¥è¯¢è¡Œæ•°"</span>)

    <span class="hljs-comment"># æ•°æ®åº“é…ç½®</span>
    database: DatabaseConfig = Field(default_factory=DatabaseConfig, description=<span class="hljs-string">"æ•°æ®åº“é…ç½®"</span>)

<span class="hljs-comment"># å…¨å±€é…ç½®å®ä¾‹</span>
config = AppConfig()
</code></pre>
<h2 data-id="heading-4">ç¬¬å››æ­¥ï¼šå¤šæ•°æ®åº“è¿æ¥ç®¡ç†</h2>
<p>å‡çº§æ•°æ®åº“ç®¡ç†å™¨ï¼Œæ”¯æŒå¤šç§æ•°æ®åº“ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-string">"""
src/mcp_datatools/database.py - å¤šæ•°æ®åº“ç®¡ç†å™¨
"""</span>

<span class="hljs-keyword">from</span> .utils <span class="hljs-keyword">import</span> setup_project_path
setup_project_path()

<span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> <span class="hljs-type">List</span>, <span class="hljs-type">Dict</span>, <span class="hljs-type">Any</span>
<span class="hljs-keyword">from</span> contextlib <span class="hljs-keyword">import</span> contextmanager
<span class="hljs-keyword">from</span> sqlalchemy <span class="hljs-keyword">import</span> create_engine, inspect, text
<span class="hljs-keyword">from</span> sqlalchemy.exc <span class="hljs-keyword">import</span> SQLAlchemyError
<span class="hljs-keyword">from</span> sqlalchemy.pool <span class="hljs-keyword">import</span> QueuePool
<span class="hljs-keyword">from</span> mcp.server.fastmcp.utilities.logging <span class="hljs-keyword">import</span> get_logger

<span class="hljs-keyword">from</span> config.settings <span class="hljs-keyword">import</span> config
<span class="hljs-keyword">from</span> .utils <span class="hljs-keyword">import</span> mask_password

logger = get_logger(__name__)

<span class="hljs-keyword">class</span> <span class="hljs-title class_">MultiDatabaseManager</span>:
    <span class="hljs-string">"""å¤šæ•°æ®åº“ç®¡ç†å™¨"""</span>
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, database_url: <span class="hljs-built_in">str</span></span>):
        <span class="hljs-string">"""åˆå§‹åŒ–æ•°æ®åº“ç®¡ç†å™¨ï¼ˆå¿…é¡»æ˜¾å¼æä¾› database_urlï¼‰"""</span>
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> database_url <span class="hljs-keyword">or</span> <span class="hljs-keyword">not</span> <span class="hljs-built_in">isinstance</span>(database_url, <span class="hljs-built_in">str</span>) <span class="hljs-keyword">or</span> <span class="hljs-keyword">not</span> database_url.strip():
            <span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">"å¿…é¡»æ˜¾å¼æä¾› database_url"</span>)
        self.database_url = database_url.strip()
        self.engine = <span class="hljs-literal">None</span>
        self.db_type = self._detect_database_type()
        self._connect()
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">_detect_database_type</span>(<span class="hljs-params">self</span>) -&gt; <span class="hljs-built_in">str</span>:
        <span class="hljs-string">"""æ£€æµ‹æ•°æ®åº“ç±»å‹"""</span>
        url = self.database_url.lower()
        <span class="hljs-keyword">if</span> url.startswith(<span class="hljs-string">"postgresql://"</span>) <span class="hljs-keyword">or</span> url.startswith(<span class="hljs-string">"postgres://"</span>):
            <span class="hljs-keyword">return</span> <span class="hljs-string">"postgresql"</span>
        <span class="hljs-keyword">elif</span> url.startswith(<span class="hljs-string">"mysql://"</span>) <span class="hljs-keyword">or</span> url.startswith(<span class="hljs-string">"mysql+"</span>):
            <span class="hljs-keyword">return</span> <span class="hljs-string">"mysql"</span>
        <span class="hljs-keyword">elif</span> url.startswith(<span class="hljs-string">"sqlite://"</span>):
            <span class="hljs-keyword">return</span> <span class="hljs-string">"sqlite"</span>
        <span class="hljs-keyword">else</span>:
            <span class="hljs-keyword">return</span> <span class="hljs-string">"unknown"</span>
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">_connect</span>(<span class="hljs-params">self</span>) -&gt; <span class="hljs-literal">None</span>:
        <span class="hljs-string">"""è¿æ¥æ•°æ®åº“"""</span>
        <span class="hljs-keyword">try</span>:
            <span class="hljs-comment"># æ ¹æ®æ•°æ®åº“ç±»å‹è°ƒæ•´é…ç½®</span>
            <span class="hljs-keyword">if</span> self.db_type == <span class="hljs-string">"sqlite"</span>:
                <span class="hljs-comment"># SQLiteä½¿ç”¨æœ€ç®€é…ç½®ï¼Œé¿å…å¤æ‚çš„è¿æ¥æ± </span>
                self.engine = create_engine(
                    self.database_url,
                    echo=config.database.echo,
                    connect_args={<span class="hljs-string">"check_same_thread"</span>: <span class="hljs-literal">False</span>}  <span class="hljs-comment"># å…è®¸å¤šçº¿ç¨‹</span>
                )
            <span class="hljs-keyword">else</span>:
                <span class="hljs-comment"># PostgreSQLå’ŒMySQLä½¿ç”¨å®Œæ•´è¿æ¥æ± é…ç½®</span>
                self.engine = create_engine(
                    self.database_url,
                    poolclass=QueuePool,  <span class="hljs-comment"># æ˜ç¡®æŒ‡å®šé˜Ÿåˆ—å¼è¿æ¥æ± </span>
                    pool_size=config.database.pool_size,
                    max_overflow=config.database.max_overflow,
                    pool_timeout=config.database.pool_timeout,
                    pool_recycle=config.database.pool_recycle,
                    echo=config.database.echo
                )
                        
            logger.info(<span class="hljs-string">f"æˆåŠŸè¿æ¥åˆ° <span class="hljs-subst">{self.db_type}</span> æ•°æ®åº“: <span class="hljs-subst">{mask_password(self.database_url)}</span>"</span>)
            
        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
            logger.error(<span class="hljs-string">f"è¿æ¥æ•°æ®åº“æ—¶å‡ºé”™: <span class="hljs-subst">{<span class="hljs-built_in">str</span>(e)}</span>"</span>)
            <span class="hljs-keyword">raise</span>
    
<span class="hljs-meta">    @contextmanager</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_connection</span>(<span class="hljs-params">self</span>):
        <span class="hljs-string">"""è·å–æ•°æ®åº“è¿æ¥çš„ä¸Šä¸‹æ–‡ç®¡ç†å™¨"""</span>
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> self.engine:
            <span class="hljs-keyword">raise</span> RuntimeError(<span class="hljs-string">"æ•°æ®åº“æœªè¿æ¥"</span>)
        
        conn = self.engine.connect()
        <span class="hljs-keyword">try</span>:
            <span class="hljs-keyword">yield</span> conn
        <span class="hljs-keyword">finally</span>:
            conn.close()
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_database_info</span>(<span class="hljs-params">self</span>) -&gt; <span class="hljs-type">Dict</span>[<span class="hljs-built_in">str</span>, <span class="hljs-type">Any</span>]:
        <span class="hljs-string">"""è·å–æ•°æ®åº“ä¿¡æ¯"""</span>
        <span class="hljs-keyword">try</span>:
            <span class="hljs-keyword">with</span> self.get_connection() <span class="hljs-keyword">as</span> conn:
                info = {
                    <span class="hljs-string">"type"</span>: self.db_type,
                    <span class="hljs-string">"url"</span>: mask_password(self.database_url),
                    <span class="hljs-string">"tables_count"</span>: <span class="hljs-built_in">len</span>(self.get_table_names()),
                }
                
                <span class="hljs-comment"># åªä¸ºéSQLiteæ•°æ®åº“æ˜¾ç¤ºè¿æ¥æ± ä¿¡æ¯</span>
                <span class="hljs-keyword">if</span> self.db_type != <span class="hljs-string">"sqlite"</span>:
                    <span class="hljs-keyword">if</span> <span class="hljs-built_in">hasattr</span>(self.engine, <span class="hljs-string">'pool'</span>):
                        <span class="hljs-keyword">try</span>:
                            pool_info = {}
                            <span class="hljs-comment"># ç»Ÿä¸€å°è¯•è·å–å„ç§è¿æ¥æ± ä¿¡æ¯</span>
                            <span class="hljs-keyword">if</span> <span class="hljs-built_in">hasattr</span>(self.engine.pool, <span class="hljs-string">'size'</span>):
                                pool_info[<span class="hljs-string">"size"</span>] = self.engine.pool.size()
                            <span class="hljs-keyword">if</span> <span class="hljs-built_in">hasattr</span>(self.engine.pool, <span class="hljs-string">'checkedout'</span>):
                                pool_info[<span class="hljs-string">"checked_out"</span>] = self.engine.pool.checkedout()
                            <span class="hljs-keyword">if</span> <span class="hljs-built_in">hasattr</span>(self.engine.pool, <span class="hljs-string">'overflow'</span>):
                                pool_info[<span class="hljs-string">"overflow"</span>] = self.engine.pool.overflow()
                            <span class="hljs-comment"># å¯¹äºchecked_inï¼Œä¸åŒçš„è¿æ¥æ± å®ç°å¯èƒ½ä¸åŒ</span>
                            <span class="hljs-keyword">if</span> <span class="hljs-built_in">hasattr</span>(self.engine.pool, <span class="hljs-string">'checked_in'</span>):
                                pool_info[<span class="hljs-string">"checked_in"</span>] = self.engine.pool.checked_in()
                            <span class="hljs-keyword">elif</span> <span class="hljs-built_in">hasattr</span>(self.engine.pool, <span class="hljs-string">'checkedin'</span>):
                                pool_info[<span class="hljs-string">"checked_in"</span>] = self.engine.pool.checkedin()
                            <span class="hljs-keyword">else</span>:
                                <span class="hljs-comment"># å¦‚æœéƒ½æ²¡æœ‰ï¼Œè®¡ç®—å¯ç”¨è¿æ¥æ•°</span>
                                <span class="hljs-keyword">if</span> <span class="hljs-string">"size"</span> <span class="hljs-keyword">in</span> pool_info <span class="hljs-keyword">and</span> <span class="hljs-string">"checked_out"</span> <span class="hljs-keyword">in</span> pool_info:
                                    pool_info[<span class="hljs-string">"checked_in"</span>] = pool_info[<span class="hljs-string">"size"</span>] - pool_info[<span class="hljs-string">"checked_out"</span>]
                            
                            info[<span class="hljs-string">"connection_pool"</span>] = pool_info <span class="hljs-keyword">if</span> pool_info <span class="hljs-keyword">else</span> <span class="hljs-literal">None</span>
                        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> pool_error:
                            logger.warning(<span class="hljs-string">f"è·å–è¿æ¥æ± ä¿¡æ¯å¤±è´¥: <span class="hljs-subst">{pool_error}</span>"</span>)
                            info[<span class="hljs-string">"connection_pool"</span>] = <span class="hljs-literal">None</span>
                    <span class="hljs-keyword">else</span>:
                        info[<span class="hljs-string">"connection_pool"</span>] = <span class="hljs-literal">None</span>
                <span class="hljs-keyword">else</span>:
                    <span class="hljs-comment"># SQLite ä¸æ˜¾ç¤ºè¿æ¥æ± ä¿¡æ¯</span>
                    info[<span class="hljs-string">"connection_pool"</span>] = <span class="hljs-literal">None</span>
                
                <span class="hljs-keyword">return</span> info
        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
            logger.error(<span class="hljs-string">f"è·å–æ•°æ®åº“ä¿¡æ¯å¤±è´¥: <span class="hljs-subst">{e}</span>"</span>)
            <span class="hljs-keyword">return</span> {<span class="hljs-string">"type"</span>: self.db_type, <span class="hljs-string">"error"</span>: <span class="hljs-built_in">str</span>(e)}
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_table_names</span>(<span class="hljs-params">self</span>) -&gt; <span class="hljs-type">List</span>[<span class="hljs-built_in">str</span>]:
        <span class="hljs-string">"""è·å–æ•°æ®åº“ä¸­çš„æ‰€æœ‰è¡¨å"""</span>
        <span class="hljs-keyword">try</span>:
            <span class="hljs-keyword">with</span> self.get_connection() <span class="hljs-keyword">as</span> conn:
                inspector = inspect(conn)
                table_names = inspector.get_table_names()
                <span class="hljs-keyword">return</span> table_names
        <span class="hljs-keyword">except</span> SQLAlchemyError <span class="hljs-keyword">as</span> e:
            logger.error(<span class="hljs-string">f"è·å–è¡¨åå¤±è´¥: <span class="hljs-subst">{e}</span>"</span>)
            <span class="hljs-keyword">raise</span>
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">test_connection</span>(<span class="hljs-params">self</span>) -&gt; <span class="hljs-built_in">bool</span>:
        <span class="hljs-string">"""æµ‹è¯•æ•°æ®åº“è¿æ¥"""</span>
        <span class="hljs-keyword">try</span>:
            <span class="hljs-keyword">with</span> self.get_connection() <span class="hljs-keyword">as</span> conn:

                result = conn.execute(text(<span class="hljs-string">"SELECT 1"</span>)).scalar()
                <span class="hljs-keyword">return</span> result == <span class="hljs-number">1</span>
        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
            logger.error(<span class="hljs-string">f"æµ‹è¯•æ•°æ®åº“è¿æ¥æ—¶å‡ºé”™: <span class="hljs-subst">{<span class="hljs-built_in">str</span>(e)}</span>"</span>)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span>
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">filter_table_names</span>(<span class="hljs-params">self, keyword: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-type">List</span>[<span class="hljs-built_in">str</span>]:
        <span class="hljs-string">"""æ ¹æ®å…³é”®è¯æœç´¢ç›¸å…³è¡¨å"""</span>
        <span class="hljs-keyword">try</span>:
            all_tables = self.get_table_names()
            matching_tables = [
                table <span class="hljs-keyword">for</span> table <span class="hljs-keyword">in</span> all_tables 
                <span class="hljs-keyword">if</span> keyword.lower() <span class="hljs-keyword">in</span> table.lower()
            ]
            <span class="hljs-keyword">return</span> matching_tables
        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
            logger.error(<span class="hljs-string">f"æœç´¢è¡¨åå¤±è´¥: <span class="hljs-subst">{e}</span>"</span>)
            <span class="hljs-keyword">raise</span>
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_table_schema</span>(<span class="hljs-params">self, table_name: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-type">Dict</span>[<span class="hljs-built_in">str</span>, <span class="hljs-type">Any</span>]:
        <span class="hljs-string">"""è·å–æŒ‡å®šè¡¨çš„è¯¦ç»†ç»“æ„ä¿¡æ¯"""</span>
        <span class="hljs-keyword">try</span>:
            <span class="hljs-keyword">with</span> self.get_connection() <span class="hljs-keyword">as</span> conn:
                inspector = inspect(conn)
                
                <span class="hljs-comment"># éªŒè¯è¡¨æ˜¯å¦å­˜åœ¨</span>
                <span class="hljs-keyword">if</span> table_name <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> inspector.get_table_names():
                    <span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">f"è¡¨ '<span class="hljs-subst">{table_name}</span>' ä¸å­˜åœ¨"</span>)
                
                <span class="hljs-comment"># è·å–åˆ—ä¿¡æ¯</span>
                columns = inspector.get_columns(table_name)
                
                <span class="hljs-comment"># è·å–ä¸»é”®ä¿¡æ¯</span>
                pk_constraint = inspector.get_pk_constraint(table_name)
                primary_keys = <span class="hljs-built_in">set</span>(pk_constraint[<span class="hljs-string">"constrained_columns"</span>])
                
                <span class="hljs-comment"># è·å–ç´¢å¼•ä¿¡æ¯</span>
                indexes = inspector.get_indexes(table_name)
                
                <span class="hljs-comment"># è·å–å¤–é”®ä¿¡æ¯</span>
                foreign_keys = inspector.get_foreign_keys(table_name)
                
                <span class="hljs-comment"># æ ¼å¼åŒ–åˆ—ä¿¡æ¯</span>
                formatted_columns = []
                <span class="hljs-keyword">for</span> col <span class="hljs-keyword">in</span> columns:
                    col_info = {
                        <span class="hljs-string">"name"</span>: col[<span class="hljs-string">"name"</span>],
                        <span class="hljs-string">"type"</span>: <span class="hljs-built_in">str</span>(col[<span class="hljs-string">"type"</span>]),
                        <span class="hljs-string">"nullable"</span>: col[<span class="hljs-string">"nullable"</span>],
                        <span class="hljs-string">"default"</span>: col.get(<span class="hljs-string">"default"</span>),
                        <span class="hljs-string">"is_primary_key"</span>: col[<span class="hljs-string">"name"</span>] <span class="hljs-keyword">in</span> primary_keys
                    }
                    formatted_columns.append(col_info)
                
                schema_info = {
                    <span class="hljs-string">"table_name"</span>: table_name,
                    <span class="hljs-string">"columns"</span>: formatted_columns,
                    <span class="hljs-string">"primary_keys"</span>: <span class="hljs-built_in">list</span>(primary_keys),
                    <span class="hljs-string">"indexes"</span>: indexes,
                    <span class="hljs-string">"foreign_keys"</span>: foreign_keys,
                    <span class="hljs-string">"column_count"</span>: <span class="hljs-built_in">len</span>(columns)
                }
                
                <span class="hljs-keyword">return</span> schema_info
        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
            logger.error(<span class="hljs-string">f"è·å–è¡¨ç»“æ„ä¿¡æ¯å¤±è´¥: <span class="hljs-subst">{e}</span>"</span>)
            <span class="hljs-keyword">raise</span>
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">_validate_query</span>(<span class="hljs-params">self, query: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-literal">None</span>:
        <span class="hljs-string">"""éªŒè¯æŸ¥è¯¢å®‰å…¨æ€§"""</span>
        query_upper = query.upper().strip()
        
        <span class="hljs-comment"># æ£€æŸ¥å±é™©çš„SQLæ“ä½œ</span>
        dangerous_keywords = [
            <span class="hljs-string">"DROP"</span>, <span class="hljs-string">"DELETE"</span>, <span class="hljs-string">"UPDATE"</span>, <span class="hljs-string">"INSERT"</span>, <span class="hljs-string">"ALTER"</span>, <span class="hljs-string">"CREATE"</span>, <span class="hljs-string">"TRUNCATE"</span>
        ]
        
        <span class="hljs-keyword">for</span> keyword <span class="hljs-keyword">in</span> dangerous_keywords:
            <span class="hljs-keyword">if</span> keyword <span class="hljs-keyword">in</span> query_upper:
                <span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">f"æŸ¥è¯¢åŒ…å«å±é™©æ“ä½œ: <span class="hljs-subst">{keyword}</span>"</span>)
        
        <span class="hljs-comment"># æ£€æŸ¥æ˜¯å¦æ˜¯SELECTæŸ¥è¯¢</span>
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> query_upper.startswith(<span class="hljs-string">"SELECT"</span>):
            <span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">"åªå…è®¸æ‰§è¡ŒSELECTæŸ¥è¯¢"</span>)
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">_add_limit_to_query</span>(<span class="hljs-params">self, query: <span class="hljs-built_in">str</span>, limit: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">str</span>:
        <span class="hljs-string">"""ä¸ºæŸ¥è¯¢æ·»åŠ LIMITå­å¥"""</span>
        query_upper = query.upper()
        
        <span class="hljs-comment"># å¦‚æœå·²ç»æœ‰LIMITï¼Œä¸å†æ·»åŠ </span>
        <span class="hljs-keyword">if</span> <span class="hljs-string">"LIMIT"</span> <span class="hljs-keyword">in</span> query_upper:
            <span class="hljs-keyword">return</span> query
        
        <span class="hljs-comment"># æ·»åŠ LIMITå­å¥</span>
        <span class="hljs-keyword">return</span> <span class="hljs-string">f"<span class="hljs-subst">{query.rstrip(<span class="hljs-string">';'</span>)}</span> LIMIT <span class="hljs-subst">{limit}</span>"</span>
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">execute_query</span>(<span class="hljs-params">self, query: <span class="hljs-built_in">str</span>, params: <span class="hljs-built_in">dict</span> = <span class="hljs-literal">None</span></span>) -&gt; <span class="hljs-type">List</span>[<span class="hljs-type">Dict</span>[<span class="hljs-built_in">str</span>, <span class="hljs-type">Any</span>]]:
        <span class="hljs-string">"""å®‰å…¨æ‰§è¡ŒSQLæŸ¥è¯¢"""</span>
        <span class="hljs-keyword">try</span>:
            <span class="hljs-comment"># éªŒè¯æŸ¥è¯¢å®‰å…¨æ€§</span>
            self._validate_query(query)
            
            <span class="hljs-comment"># æ·»åŠ é»˜è®¤é™åˆ¶</span>
            limited_query = self._add_limit_to_query(query, config.max_query_results)
            
            <span class="hljs-keyword">with</span> self.get_connection() <span class="hljs-keyword">as</span> conn:
                <span class="hljs-keyword">if</span> params:
                    <span class="hljs-comment"># ä½¿ç”¨å‚æ•°åŒ–æŸ¥è¯¢</span>
                    result = conn.execute(text(limited_query), params)
                <span class="hljs-keyword">else</span>:
                    <span class="hljs-comment"># ç›´æ¥æ‰§è¡ŒæŸ¥è¯¢</span>
                    result = conn.execute(text(limited_query))
                
                <span class="hljs-comment"># è·å–åˆ—å</span>
                columns = result.keys()
                
                <span class="hljs-comment"># è½¬æ¢ä¸ºå­—å…¸åˆ—è¡¨</span>
                rows = []
                <span class="hljs-keyword">for</span> row <span class="hljs-keyword">in</span> result:
                    row_dict = <span class="hljs-built_in">dict</span>(<span class="hljs-built_in">zip</span>(columns, row))
                    rows.append(row_dict)
                
                <span class="hljs-keyword">return</span> rows
                
        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
            logger.error(<span class="hljs-string">f"æ‰§è¡ŒæŸ¥è¯¢å¤±è´¥: <span class="hljs-subst">{e}</span>"</span>)
            <span class="hljs-keyword">raise</span>
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">close</span>(<span class="hljs-params">self</span>) -&gt; <span class="hljs-literal">None</span>:
        <span class="hljs-string">"""å…³é—­æ•°æ®åº“è¿æ¥"""</span>
        <span class="hljs-keyword">if</span> self.engine:
            self.engine.dispose()
            logger.info(<span class="hljs-string">"æ•°æ®åº“è¿æ¥å·²å…³é—­"</span>)
</code></pre>
<h2 data-id="heading-5">ç¬¬äº”æ­¥ï¼šMCPæœåŠ¡å™¨æ¶æ„å‡çº§</h2>
<p><strong>é‡è¦å˜åŒ–</strong>ï¼šå®é™…ä»£ç é‡‡ç”¨äº†æ›´çµæ´»çš„æ¶æ„ï¼Œæ‰€æœ‰å·¥å…·å‡½æ•°éƒ½é‡æ–°è®¾è®¡ä¸º <code>*_by_url</code> å‘½åæ–¹å¼ï¼Œå¿…é¡»æ˜¾å¼ä¼ å…¥ <code>database_url</code> å‚æ•°ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-string">"""
src/mcp_datatools/server.py - ä»…æä¾›å¿…é¡»ä¼ å…¥ database_url çš„å·¥å…·
"""</span>

<span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> <span class="hljs-type">List</span>
<span class="hljs-keyword">from</span> .utils <span class="hljs-keyword">import</span> setup_project_path, database_operation
setup_project_path()

<span class="hljs-keyword">from</span> mcp.server.fastmcp <span class="hljs-keyword">import</span> FastMCP
<span class="hljs-keyword">from</span> mcp.server.fastmcp.utilities.logging <span class="hljs-keyword">import</span> get_logger

<span class="hljs-comment"># æ”¯æŒç›¸å¯¹å¯¼å…¥å’Œç»å¯¹å¯¼å…¥</span>
<span class="hljs-keyword">try</span>:
    <span class="hljs-keyword">from</span> .database <span class="hljs-keyword">import</span> MultiDatabaseManager
<span class="hljs-keyword">except</span> ImportError:
    <span class="hljs-keyword">from</span> mcp_datatools.database <span class="hljs-keyword">import</span> MultiDatabaseManager

<span class="hljs-keyword">from</span> config.settings <span class="hljs-keyword">import</span> config

mcp = FastMCP(config.name)
logger = get_logger(__name__)

<span class="hljs-keyword">def</span> <span class="hljs-title function_">get_database_manager</span>(<span class="hljs-params">database_url: <span class="hljs-built_in">str</span></span>):
    <span class="hljs-string">"""æ ¹æ®æ˜¾å¼æŒ‡å®šçš„æ•°æ®åº“URLè¿”å›ç®¡ç†å™¨"""</span>
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> database_url <span class="hljs-keyword">or</span> <span class="hljs-keyword">not</span> <span class="hljs-built_in">isinstance</span>(database_url, <span class="hljs-built_in">str</span>) <span class="hljs-keyword">or</span> <span class="hljs-keyword">not</span> database_url.strip():
        <span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">"è¯·æä¾›æœ‰æ•ˆçš„ database_url"</span>)
    <span class="hljs-keyword">return</span> MultiDatabaseManager(database_url.strip())

<span class="hljs-meta">@mcp.tool(<span class="hljs-params">description=<span class="hljs-string">"è·å–æ•°æ®åº“ä¿¡æ¯ï¼ˆå¿…é¡»æŒ‡å®š database_urlï¼‰ã€‚ä¾‹å¦‚ï¼šget_database_info_by_url('postgresql://user:pass@host:5432/db')"</span></span>)</span>
<span class="hljs-meta">@database_operation(<span class="hljs-params"><span class="hljs-string">"è·å–æ•°æ®åº“ä¿¡æ¯"</span></span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">get_database_info_by_url</span>(<span class="hljs-params">database_url: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">str</span>:
    <span class="hljs-string">"""æŸ¥è¯¢æŒ‡å®šæ•°æ®åº“çš„ä¿¡æ¯ï¼ˆå¿…é¡»ä¼ å…¥ database_urlï¼‰"""</span>
    db_mgr = get_database_manager(database_url)
    info = db_mgr.get_database_info()

    result = <span class="hljs-string">"æ•°æ®åº“ä¿¡æ¯:\n"</span>
    result += <span class="hljs-string">f"ç±»å‹: <span class="hljs-subst">{info.get(<span class="hljs-string">'type'</span>)}</span>\n"</span>
    result += <span class="hljs-string">f"è¿æ¥: <span class="hljs-subst">{info.get(<span class="hljs-string">'url'</span>)}</span>\n"</span>
    result += <span class="hljs-string">f"è¡¨æ•°é‡: <span class="hljs-subst">{info.get(<span class="hljs-string">'tables_count'</span>)}</span>\n"</span>

    pool = info.get(<span class="hljs-string">'connection_pool'</span>)
    <span class="hljs-keyword">if</span> pool:
        result += <span class="hljs-string">"\nè¿æ¥æ± çŠ¶æ€:\n"</span>
        <span class="hljs-keyword">if</span> <span class="hljs-string">'size'</span> <span class="hljs-keyword">in</span> pool:
            result += <span class="hljs-string">f"  æ± å¤§å°: <span class="hljs-subst">{pool[<span class="hljs-string">'size'</span>]}</span>\n"</span>
        <span class="hljs-keyword">if</span> <span class="hljs-string">'checked_out'</span> <span class="hljs-keyword">in</span> pool:
            result += <span class="hljs-string">f"  å·²è¿æ¥: <span class="hljs-subst">{pool[<span class="hljs-string">'checked_out'</span>]}</span>\n"</span>
        <span class="hljs-keyword">if</span> <span class="hljs-string">'checked_in'</span> <span class="hljs-keyword">in</span> pool:
            result += <span class="hljs-string">f"  å¯ç”¨è¿æ¥: <span class="hljs-subst">{pool[<span class="hljs-string">'checked_in'</span>]}</span>\n"</span>
        <span class="hljs-keyword">if</span> <span class="hljs-string">'overflow'</span> <span class="hljs-keyword">in</span> pool:
            result += <span class="hljs-string">f"  æº¢å‡ºè¿æ¥: <span class="hljs-subst">{pool[<span class="hljs-string">'overflow'</span>]}</span>\n"</span>

    <span class="hljs-keyword">return</span> result

<span class="hljs-meta">@mcp.tool(<span class="hljs-params">description=<span class="hljs-string">"åˆ—å‡ºæ‰€æœ‰è¡¨ï¼ˆå¿…é¡»æŒ‡å®š database_urlï¼‰ã€‚ä¾‹å¦‚ï¼šlist_tables_by_url('mysql+pymysql://user:pass@host:3306/db')"</span></span>)</span>
<span class="hljs-meta">@database_operation(<span class="hljs-params"><span class="hljs-string">"è·å–æ•°æ®åº“è¡¨åˆ—è¡¨"</span></span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">list_tables_by_url</span>(<span class="hljs-params">database_url: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">str</span>:
    <span class="hljs-string">"""æŸ¥è¯¢æŒ‡å®šæ•°æ®åº“çš„è¡¨åˆ—è¡¨ï¼ˆå¿…é¡»ä¼ å…¥ database_urlï¼‰"""</span>
    db_mgr = get_database_manager(database_url)
    tables = db_mgr.get_table_names()

    <span class="hljs-keyword">if</span> tables:
        result = <span class="hljs-string">f"æ•°æ®åº“ä¸­å…±æœ‰ <span class="hljs-subst">{<span class="hljs-built_in">len</span>(tables)}</span> ä¸ªè¡¨:\n\n"</span>
        <span class="hljs-keyword">for</span> i, table <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(tables, <span class="hljs-number">1</span>):
            result += <span class="hljs-string">f"<span class="hljs-subst">{i}</span>. <span class="hljs-subst">{table}</span>\n"</span>
        <span class="hljs-keyword">return</span> result
    <span class="hljs-keyword">else</span>:
        <span class="hljs-keyword">return</span> <span class="hljs-string">"æ•°æ®åº“ä¸­æ²¡æœ‰è¡¨"</span>

<span class="hljs-meta">@mcp.tool(<span class="hljs-params">description=<span class="hljs-string">"è·å–è¡¨ç»“æ„ä¿¡æ¯ï¼ˆå¿…é¡»æŒ‡å®š database_urlï¼‰ã€‚ä¾‹å¦‚ï¼šschema_info_by_url(['users'], 'sqlite:///path/to.db')"</span></span>)</span>
<span class="hljs-meta">@database_operation(<span class="hljs-params"><span class="hljs-string">"è·å–è¡¨ç»“æ„ä¿¡æ¯"</span></span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">schema_info_by_url</span>(<span class="hljs-params">table_names: <span class="hljs-type">List</span>[<span class="hljs-built_in">str</span>], database_url: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">str</span>:
    <span class="hljs-string">"""è·å–æŒ‡å®šæ•°æ®åº“ä¸­è¡¨çš„è¯¦ç»†ç»“æ„ä¿¡æ¯ï¼ˆå¿…é¡»ä¼ å…¥ database_urlï¼‰"""</span>
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> table_names:
        <span class="hljs-keyword">return</span> <span class="hljs-string">"è¯·æä¾›è¦æŸ¥è¯¢çš„è¡¨å"</span>

    db_mgr = get_database_manager(database_url)
    result_parts = []

    <span class="hljs-keyword">for</span> table_name <span class="hljs-keyword">in</span> table_names:
        <span class="hljs-keyword">try</span>:
            schema_info = db_mgr.get_table_schema(table_name)

            <span class="hljs-comment"># æ ¼å¼åŒ–è¡¨ç»“æ„ä¿¡æ¯</span>
            table_section = <span class="hljs-string">f"\n<span class="hljs-subst">{<span class="hljs-string">'='</span>*<span class="hljs-number">50</span>}</span>\n"</span>
            table_section += <span class="hljs-string">f"è¡¨åï¼š<span class="hljs-subst">{table_name}</span>\n"</span>
            table_section += <span class="hljs-string">f"åˆ—ï¼š<span class="hljs-subst">{schema_info[<span class="hljs-string">'columns'</span>]}</span>\n"</span>
            table_section += <span class="hljs-string">f"<span class="hljs-subst">{<span class="hljs-string">'='</span>*<span class="hljs-number">50</span>}</span>\n"</span>

            <span class="hljs-comment"># åˆ—ä¿¡æ¯</span>
            <span class="hljs-keyword">for</span> col <span class="hljs-keyword">in</span> schema_info[<span class="hljs-string">'columns'</span>]:
                col_type = col[<span class="hljs-string">'type'</span>]
                nullable = <span class="hljs-string">"å¯ç©º"</span> <span class="hljs-keyword">if</span> col[<span class="hljs-string">'nullable'</span>] <span class="hljs-keyword">else</span> <span class="hljs-string">"ä¸å¯ç©º"</span>
                pk_mark = <span class="hljs-string">" ä¸»é”®"</span> <span class="hljs-keyword">if</span> col[<span class="hljs-string">'is_primary_key'</span>] <span class="hljs-keyword">else</span> <span class="hljs-string">""</span>
                default_info = <span class="hljs-string">f" (é»˜è®¤: <span class="hljs-subst">{col[<span class="hljs-string">'default'</span>]}</span>)"</span> <span class="hljs-keyword">if</span> col[<span class="hljs-string">'default'</span>] <span class="hljs-keyword">else</span> <span class="hljs-string">""</span>
                table_section += <span class="hljs-string">f"  â€¢ <span class="hljs-subst">{col[<span class="hljs-string">'name'</span>]}</span>: <span class="hljs-subst">{col_type}</span> - <span class="hljs-subst">{nullable}</span><span class="hljs-subst">{pk_mark}</span><span class="hljs-subst">{default_info}</span>\n"</span>

            <span class="hljs-comment"># ä¸»é”®ä¿¡æ¯</span>
            <span class="hljs-keyword">if</span> schema_info[<span class="hljs-string">'primary_keys'</span>]:
                table_section += <span class="hljs-string">f"\nä¸»é”®: <span class="hljs-subst">{<span class="hljs-string">', '</span>.join(schema_info[<span class="hljs-string">'primary_keys'</span>])}</span>\n"</span>

            <span class="hljs-comment"># ç´¢å¼•ä¿¡æ¯</span>
            <span class="hljs-keyword">if</span> schema_info[<span class="hljs-string">'indexes'</span>]:
                table_section += <span class="hljs-string">"\nç´¢å¼•ä¿¡æ¯:\n"</span>
                <span class="hljs-keyword">for</span> idx <span class="hljs-keyword">in</span> schema_info[<span class="hljs-string">'indexes'</span>]:
                    unique_mark = <span class="hljs-string">"å”¯ä¸€ç´¢å¼•"</span> <span class="hljs-keyword">if</span> idx.get(<span class="hljs-string">'unique'</span>, <span class="hljs-literal">False</span>) <span class="hljs-keyword">else</span> <span class="hljs-string">"æ™®é€šç´¢å¼•"</span>
                    columns = <span class="hljs-string">', '</span>.join(idx[<span class="hljs-string">'column_names'</span>])
                    table_section += <span class="hljs-string">f"  â€¢ <span class="hljs-subst">{idx[<span class="hljs-string">'name'</span>]}</span>: <span class="hljs-subst">{unique_mark}</span> (<span class="hljs-subst">{columns}</span>)\n"</span>

            <span class="hljs-comment"># å¤–é”®ä¿¡æ¯</span>
            <span class="hljs-keyword">if</span> schema_info[<span class="hljs-string">'foreign_keys'</span>]:
                table_section += <span class="hljs-string">"\nå¤–é”®å…³ç³»:\n"</span>
                <span class="hljs-keyword">for</span> fk <span class="hljs-keyword">in</span> schema_info[<span class="hljs-string">'foreign_keys'</span>]:
                    local_cols = <span class="hljs-string">', '</span>.join(fk[<span class="hljs-string">'constrained_columns'</span>])
                    ref_table = fk[<span class="hljs-string">'referred_table'</span>]
                    ref_cols = <span class="hljs-string">', '</span>.join(fk[<span class="hljs-string">'referred_columns'</span>])
                    table_section += <span class="hljs-string">f"  â€¢ <span class="hljs-subst">{local_cols}</span> â†’ <span class="hljs-subst">{ref_table}</span>.<span class="hljs-subst">{ref_cols}</span>\n"</span>

            result_parts.append(table_section)

        <span class="hljs-keyword">except</span> ValueError <span class="hljs-keyword">as</span> e:
            result_parts.append(<span class="hljs-string">f"\nè¡¨ '<span class="hljs-subst">{table_name}</span>': <span class="hljs-subst">{<span class="hljs-built_in">str</span>(e)}</span>\n"</span>)
        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
            result_parts.append(<span class="hljs-string">f"\nè¡¨ '<span class="hljs-subst">{table_name}</span>' è§£æå¤±è´¥: <span class="hljs-subst">{<span class="hljs-built_in">str</span>(e)}</span>\n"</span>)

    <span class="hljs-keyword">return</span> <span class="hljs-string">'\n'</span>.join(result_parts)

<span class="hljs-meta">@mcp.tool(<span class="hljs-params">description=<span class="hljs-string">"æ‰§è¡Œåªè¯»SQLæŸ¥è¯¢ï¼ˆå¿…é¡»æŒ‡å®š database_urlï¼›ä»…æ”¯æŒSELECTï¼Œè‡ªåŠ¨åŠ è¡Œæ•°é™åˆ¶ï¼Œæ”¯æŒå‚æ•°åŒ–æŸ¥è¯¢ï¼‰ã€‚ä¾‹å¦‚ï¼šexecute_query_by_url('SELECT 1', 'postgresql://...')"</span></span>)</span>
<span class="hljs-meta">@database_operation(<span class="hljs-params"><span class="hljs-string">"æ‰§è¡ŒSQLæŸ¥è¯¢"</span></span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">execute_query_by_url</span>(<span class="hljs-params">query: <span class="hljs-built_in">str</span>, database_url: <span class="hljs-built_in">str</span>, params: <span class="hljs-built_in">dict</span> = <span class="hljs-literal">None</span></span>) -&gt; <span class="hljs-built_in">str</span>:
    <span class="hljs-string">"""æ‰§è¡Œåªè¯»æŸ¥è¯¢ï¼ˆå¿…é¡»ä¼ å…¥ database_urlï¼‰"""</span>
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> query <span class="hljs-keyword">or</span> <span class="hljs-keyword">not</span> query.strip():
        <span class="hljs-keyword">return</span> <span class="hljs-string">"è¯·æä¾›æŸ¥è¯¢è¯­å¥"</span>

    db_mgr = get_database_manager(database_url)
    query_params = params <span class="hljs-keyword">if</span> params <span class="hljs-keyword">else</span> <span class="hljs-literal">None</span>

    result = db_mgr.execute_query(query.strip(), query_params)

    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> result:
        <span class="hljs-keyword">return</span> <span class="hljs-string">"æŸ¥è¯¢ç»“æœä¸ºç©º"</span>

    result_text = <span class="hljs-string">"æŸ¥è¯¢ç»“æœ:\n"</span>
    <span class="hljs-keyword">for</span> row <span class="hljs-keyword">in</span> result:
        result_text += <span class="hljs-string">f"<span class="hljs-subst">{row}</span>\n"</span>
    <span class="hljs-keyword">return</span> result_text

<span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():
    <span class="hljs-keyword">try</span>:
        logger.info(<span class="hljs-string">f"å¯åŠ¨<span class="hljs-subst">{config.name}</span> v<span class="hljs-subst">{config.version}</span>"</span>)

        logger.info(<span class="hljs-string">"å½“å‰åŠŸèƒ½ï¼š"</span>)
        logger.info(<span class="hljs-string">"  - get_database_info_by_url(database_url) - è·å–æ•°æ®åº“ä¿¡æ¯"</span>)
        logger.info(<span class="hljs-string">"  - list_tables_by_url(database_url) - è·å–æ•°æ®åº“è¡¨åˆ—è¡¨"</span>)
        logger.info(<span class="hljs-string">"  - schema_info_by_url(table_names, database_url) - è·å–è¡¨ç»“æ„"</span>)
        logger.info(<span class="hljs-string">"  - execute_query_by_url(query, database_url, params=None) - æ‰§è¡ŒSQLåªè¯»æŸ¥è¯¢"</span>)
        logger.info(<span class="hljs-string">"MCPæœåŠ¡å™¨å¯åŠ¨æˆåŠŸï¼Œç­‰å¾…å®¢æˆ·ç«¯è¿æ¥..."</span>)

        mcp.run()
    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
        logger.error(<span class="hljs-string">f"æœåŠ¡å™¨å¯åŠ¨å¤±è´¥: <span class="hljs-subst">{<span class="hljs-built_in">str</span>(e)}</span>"</span>)
        <span class="hljs-keyword">raise</span>

<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    main()
</code></pre>
<p><strong>è¿™ç§è®¾è®¡çš„ä¼˜åŠ¿</strong>ï¼š</p>
<ul>
<li><strong>çœŸæ­£çš„å¤šæ•°æ®åº“æ”¯æŒ</strong>ï¼šå¯ä»¥åŒæ—¶è¿æ¥å’Œæ“ä½œå¤šä¸ªä¸åŒçš„æ•°æ®åº“</li>
<li><strong>æ›´é«˜çš„çµæ´»æ€§</strong>ï¼šæ¯ä¸ªæ“ä½œéƒ½å¯ä»¥é’ˆå¯¹ä¸åŒçš„æ•°æ®åº“å®ä¾‹</li>
<li><strong>æ— å…¨å±€çŠ¶æ€</strong>ï¼šé¿å…å¹¶å‘é—®é¢˜ï¼Œæ›´åŠ çº¿ç¨‹å®‰å…¨</li>
<li><strong>æ›´å¥½çš„æ‰©å±•æ€§</strong>ï¼šæ”¯æŒæœªæ¥æ‰©å±•åˆ°æ›´å¤šæ•°æ®åº“ç±»å‹</li>
<li><strong>ç»Ÿä¸€é”™è¯¯å¤„ç†</strong>ï¼šé€šè¿‡è£…é¥°å™¨ç»Ÿä¸€å¤„ç†æ•°æ®åº“æ“ä½œé”™è¯¯</li>
</ul>
<h2 data-id="heading-6">ç¬¬å…­æ­¥ï¼šå…¬å…±å·¥å…·å‡½æ•°</h2>
<p>æ–°å¢çš„ <code>utils.py</code> æ–‡ä»¶æä¾›äº†é‡è¦çš„å…¬å…±åŠŸèƒ½ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-string">"""
src/mcp_datatools/utils.py - å…¬å…±å·¥å…·å‡½æ•°
"""</span>

<span class="hljs-keyword">import</span> os
<span class="hljs-keyword">import</span> sys
<span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> <span class="hljs-type">Any</span>, <span class="hljs-type">Callable</span>
<span class="hljs-keyword">from</span> functools <span class="hljs-keyword">import</span> wraps
<span class="hljs-keyword">from</span> mcp.server.fastmcp.utilities.logging <span class="hljs-keyword">import</span> get_logger

logger = get_logger(__name__)

<span class="hljs-keyword">def</span> <span class="hljs-title function_">setup_project_path</span>():
    <span class="hljs-string">"""ç»Ÿä¸€çš„é¡¹ç›®è·¯å¾„è®¾ç½®"""</span>
    current_dir = os.path.dirname(os.path.abspath(__file__))
    <span class="hljs-comment"># ä» src/mcp_datatools åˆ°é¡¹ç›®æ ¹ç›®å½•</span>
    project_root = os.path.dirname(os.path.dirname(current_dir))
    <span class="hljs-keyword">if</span> project_root <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> sys.path:
        sys.path.insert(<span class="hljs-number">0</span>, project_root)

<span class="hljs-keyword">def</span> <span class="hljs-title function_">handle_database_error</span>(<span class="hljs-params">operation: <span class="hljs-built_in">str</span>, error: Exception</span>) -&gt; <span class="hljs-built_in">str</span>:
    <span class="hljs-string">"""ç»Ÿä¸€çš„æ•°æ®åº“é”™è¯¯å¤„ç†"""</span>
    error_msg = <span class="hljs-string">f"<span class="hljs-subst">{operation}</span>å¤±è´¥: <span class="hljs-subst">{<span class="hljs-built_in">str</span>(error)}</span>"</span>
    logger.error(error_msg)
    <span class="hljs-keyword">return</span> error_msg

<span class="hljs-keyword">def</span> <span class="hljs-title function_">database_operation</span>(<span class="hljs-params">operation_name: <span class="hljs-built_in">str</span></span>):
    <span class="hljs-string">"""æ•°æ®åº“æ“ä½œè£…é¥°å™¨ï¼Œç»Ÿä¸€é”™è¯¯å¤„ç†"""</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">decorator</span>(<span class="hljs-params">func: <span class="hljs-type">Callable</span></span>) -&gt; <span class="hljs-type">Callable</span>:
<span class="hljs-meta">        @wraps(<span class="hljs-params">func</span>)</span>
        <span class="hljs-keyword">def</span> <span class="hljs-title function_">wrapper</span>(<span class="hljs-params">*args, **kwargs</span>) -&gt; <span class="hljs-type">Any</span>:
            <span class="hljs-keyword">try</span>:
                result = func(*args, **kwargs)
                logger.info(<span class="hljs-string">f"æˆåŠŸ<span class="hljs-subst">{operation_name}</span>"</span>)
                <span class="hljs-keyword">return</span> result
            <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
                <span class="hljs-keyword">return</span> handle_database_error(operation_name, e)
        <span class="hljs-keyword">return</span> wrapper
    <span class="hljs-keyword">return</span> decorator

<span class="hljs-keyword">def</span> <span class="hljs-title function_">mask_password</span>(<span class="hljs-params">url: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">str</span>:
    <span class="hljs-string">"""éšè—URLä¸­çš„å¯†ç """</span>
    <span class="hljs-keyword">if</span> <span class="hljs-string">"@"</span> <span class="hljs-keyword">in</span> url <span class="hljs-keyword">and</span> <span class="hljs-string">"://"</span> <span class="hljs-keyword">in</span> url:
        parts = url.split(<span class="hljs-string">"://"</span>)
        <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(parts) == <span class="hljs-number">2</span>:
            protocol = parts[<span class="hljs-number">0</span>]
            rest = parts[<span class="hljs-number">1</span>]
            <span class="hljs-keyword">if</span> <span class="hljs-string">"@"</span> <span class="hljs-keyword">in</span> rest:
                user_pass, host_db = rest.split(<span class="hljs-string">"@"</span>, <span class="hljs-number">1</span>)
                <span class="hljs-keyword">if</span> <span class="hljs-string">":"</span> <span class="hljs-keyword">in</span> user_pass:
                    user, _ = user_pass.split(<span class="hljs-string">":"</span>, <span class="hljs-number">1</span>)
                    <span class="hljs-keyword">return</span> <span class="hljs-string">f"<span class="hljs-subst">{protocol}</span>://<span class="hljs-subst">{user}</span>:***@<span class="hljs-subst">{host_db}</span>"</span>
    <span class="hljs-keyword">return</span> url
</code></pre>
<p><strong>å·¥å…·å‡½æ•°çš„ä½œç”¨</strong>ï¼š</p>
<ul>
<li><strong>è·¯å¾„ç®¡ç†</strong>ï¼š<code>setup_project_path()</code> è§£å†³æ¨¡å—å¯¼å…¥é—®é¢˜</li>
<li><strong>é”™è¯¯å¤„ç†</strong>ï¼š<code>database_operation</code> è£…é¥°å™¨ç»Ÿä¸€å¤„ç†æ•°æ®åº“æ“ä½œé”™è¯¯</li>
<li><strong>å®‰å…¨å¤„ç†</strong>ï¼š<code>mask_password()</code> éšè—è¿æ¥å­—ç¬¦ä¸²ä¸­çš„æ•æ„Ÿä¿¡æ¯</li>
</ul>
<h2 data-id="heading-7">ç¬¬ä¸ƒæ­¥ï¼šæ•°æ®åº“åˆå§‹åŒ–è„šæœ¬</h2>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- data/init_scripts/postgresql.sql</span>
<span class="hljs-comment">-- PostgreSQLæµ‹è¯•æ•°æ®åº“åˆå§‹åŒ–</span>

<span class="hljs-comment">-- åˆ›å»ºç”¨æˆ·è¡¨</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> IF <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span> users (
    id SERIAL <span class="hljs-keyword">PRIMARY</span> KEY,
    name <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
    email <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">100</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">UNIQUE</span>,
    created_at <span class="hljs-type">TIMESTAMP</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span>
);

<span class="hljs-comment">-- åˆ›å»ºäº§å“è¡¨</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> IF <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span> products (
    id SERIAL <span class="hljs-keyword">PRIMARY</span> KEY,
    name <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">100</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
    price <span class="hljs-type">DECIMAL</span>(<span class="hljs-number">10</span>, <span class="hljs-number">2</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
    category <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>),
    created_at <span class="hljs-type">TIMESTAMP</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span>
);

<span class="hljs-comment">-- åˆ›å»ºè®¢å•è¡¨</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> IF <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span> orders (
    id SERIAL <span class="hljs-keyword">PRIMARY</span> KEY,
    user_id <span class="hljs-type">INTEGER</span> <span class="hljs-keyword">REFERENCES</span> users(id),
    total_amount <span class="hljs-type">DECIMAL</span>(<span class="hljs-number">10</span>, <span class="hljs-number">2</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
    status <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">'pending'</span>,
    created_at <span class="hljs-type">TIMESTAMP</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span>
);

<span class="hljs-comment">-- æ’å…¥æµ‹è¯•æ•°æ®</span>
<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> users (name, email) <span class="hljs-keyword">VALUES</span> 
    (<span class="hljs-string">'å´é‚ª'</span>, <span class="hljs-string">'wuxie@example.com'</span>),
    (<span class="hljs-string">'å¼ èµ·çµ'</span>, <span class="hljs-string">'zhangqiling@example.com'</span>),
    (<span class="hljs-string">'ç‹èƒ–å­'</span>, <span class="hljs-string">'wangpangzi@example.com'</span>);

<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> products (name, price, category) <span class="hljs-keyword">VALUES</span> 
    (<span class="hljs-string">'æ´›é˜³é“²'</span>, <span class="hljs-number">299.99</span>, <span class="hljs-string">'æ¢æµ‹å·¥å…·'</span>),
    (<span class="hljs-string">'å¤œæ˜ç '</span>, <span class="hljs-number">9999.99</span>, <span class="hljs-string">'ç…§æ˜è£…å¤‡'</span>),
    (<span class="hljs-string">'é»‘é©´è¹„å­'</span>, <span class="hljs-number">88.88</span>, <span class="hljs-string">'é˜²æŠ¤ç”¨å“'</span>),
    (<span class="hljs-string">'é‡‘åˆšä¼'</span>, <span class="hljs-number">1299.99</span>, <span class="hljs-string">'é˜²å¾¡è£…å¤‡'</span>);

<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> orders (user_id, total_amount, status) <span class="hljs-keyword">VALUES</span> 
    (<span class="hljs-number">1</span>, <span class="hljs-number">10299.98</span>, <span class="hljs-string">'completed'</span>),   <span class="hljs-comment">-- å´é‚ªï¼šå¤œæ˜ç +æ´›é˜³é“²</span>
    (<span class="hljs-number">2</span>, <span class="hljs-number">88.88</span>, <span class="hljs-string">'pending'</span>),        <span class="hljs-comment">-- å¼ èµ·çµï¼šé»‘é©´è¹„å­</span>
    (<span class="hljs-number">3</span>, <span class="hljs-number">1388.87</span>, <span class="hljs-string">'shipped'</span>);      <span class="hljs-comment">-- ç‹èƒ–å­ï¼šé‡‘åˆšä¼+é»‘é©´è¹„å­</span>

<span class="hljs-comment">-- åˆ›å»ºç´¢å¼•</span>
<span class="hljs-keyword">CREATE</span> INDEX IF <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span> idx_users_email <span class="hljs-keyword">ON</span> users(email);
<span class="hljs-keyword">CREATE</span> INDEX IF <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span> idx_products_category <span class="hljs-keyword">ON</span> products(category);
<span class="hljs-keyword">CREATE</span> INDEX IF <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span> idx_orders_user_id <span class="hljs-keyword">ON</span> orders(user_id);
<span class="hljs-keyword">CREATE</span> INDEX IF <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span> idx_orders_status <span class="hljs-keyword">ON</span> orders(status);
</code></pre>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- data/init_scripts/mysql.sql</span>
<span class="hljs-comment">-- MySQLæµ‹è¯•æ•°æ®åº“åˆå§‹åŒ–</span>

<span class="hljs-comment">-- åˆ›å»ºç”¨æˆ·è¡¨</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> IF <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span> users (
    id <span class="hljs-type">INT</span> AUTO_INCREMENT <span class="hljs-keyword">PRIMARY</span> KEY,
    name <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
    email <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">100</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">UNIQUE</span>,
    created_at <span class="hljs-type">TIMESTAMP</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span>
);

<span class="hljs-comment">-- åˆ›å»ºäº§å“è¡¨</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> IF <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span> products (
    id <span class="hljs-type">INT</span> AUTO_INCREMENT <span class="hljs-keyword">PRIMARY</span> KEY,
    name <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">100</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
    price <span class="hljs-type">DECIMAL</span>(<span class="hljs-number">10</span>, <span class="hljs-number">2</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
    category <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>),
    created_at <span class="hljs-type">TIMESTAMP</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span>
);

<span class="hljs-comment">-- åˆ›å»ºè®¢å•è¡¨</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> IF <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span> orders (
    id <span class="hljs-type">INT</span> AUTO_INCREMENT <span class="hljs-keyword">PRIMARY</span> KEY,
    user_id <span class="hljs-type">INT</span>,
    total_amount <span class="hljs-type">DECIMAL</span>(<span class="hljs-number">10</span>, <span class="hljs-number">2</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
    status <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">'pending'</span>,
    created_at <span class="hljs-type">TIMESTAMP</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span>,
    <span class="hljs-keyword">FOREIGN</span> KEY (user_id) <span class="hljs-keyword">REFERENCES</span> users(id)
);

<span class="hljs-comment">-- æ’å…¥æµ‹è¯•æ•°æ®</span>
<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> users (name, email) <span class="hljs-keyword">VALUES</span> 
    (<span class="hljs-string">'èƒ¡å…«ä¸€'</span>, <span class="hljs-string">'hubayii@example.com'</span>),
    (<span class="hljs-string">'ç‹å‡¯æ—‹'</span>, <span class="hljs-string">'wangkaixuan@example.com'</span>),
    (<span class="hljs-string">'é›ªè‰æ¨'</span>, <span class="hljs-string">'xueliyang@example.com'</span>);

<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> products (name, price, category) <span class="hljs-keyword">VALUES</span> 
    (<span class="hljs-string">'æ‘¸é‡‘ç¬¦'</span>, <span class="hljs-number">888.88</span>, <span class="hljs-string">'æŠ¤èº«ç¬¦'</span>),
    (<span class="hljs-string">'é‡‘åˆšä¼'</span>, <span class="hljs-number">1588.88</span>, <span class="hljs-string">'é˜²å¾¡è£…å¤‡'</span>),
    (<span class="hljs-string">'é»‘é©´è¹„å­'</span>, <span class="hljs-number">66.66</span>, <span class="hljs-string">'é•‡é‚ªç”¨å“'</span>),
    (<span class="hljs-string">'æ¢ç…§ç¯'</span>, <span class="hljs-number">299.99</span>, <span class="hljs-string">'ç…§æ˜è£…å¤‡'</span>);

<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> orders (user_id, total_amount, status) <span class="hljs-keyword">VALUES</span> 
    (<span class="hljs-number">1</span>, <span class="hljs-number">955.54</span>, <span class="hljs-string">'completed'</span>),    <span class="hljs-comment">-- èƒ¡å…«ä¸€ï¼šæ‘¸é‡‘ç¬¦+é»‘é©´è¹„å­</span>
    (<span class="hljs-number">2</span>, <span class="hljs-number">299.99</span>, <span class="hljs-string">'pending'</span>),      <span class="hljs-comment">-- ç‹å‡¯æ—‹ï¼šæ¢ç…§ç¯</span>
    (<span class="hljs-number">3</span>, <span class="hljs-number">1655.54</span>, <span class="hljs-string">'shipped'</span>);     <span class="hljs-comment">-- é›ªè‰æ¨ï¼šé‡‘åˆšä¼+é»‘é©´è¹„å­</span>

<span class="hljs-comment">-- åˆ›å»ºç´¢å¼•</span>
<span class="hljs-keyword">CREATE</span> INDEX idx_users_email <span class="hljs-keyword">ON</span> users(email);
<span class="hljs-keyword">CREATE</span> INDEX idx_products_category <span class="hljs-keyword">ON</span> products(category);
<span class="hljs-keyword">CREATE</span> INDEX idx_orders_user_id <span class="hljs-keyword">ON</span> orders(user_id);
<span class="hljs-keyword">CREATE</span> INDEX idx_orders_status <span class="hljs-keyword">ON</span> orders(status);
</code></pre>
<h2 data-id="heading-8">ç¬¬å…«æ­¥ï¼šä½¿ç”¨ Docker å¯åŠ¨æ•°æ®åº“ï¼ˆæ¨èï¼‰ï¼Œåº”ç”¨æœ¬åœ°è¿è¡Œ</h2>
<blockquote>
<p>ä½ å·²åœ¨ä¸Šä¸€æ­¥å‡†å¤‡å¥½äº† init.sqlã€‚é¦–æ¬¡å¯åŠ¨å®¹å™¨ï¼ˆæ•°æ®å·ä¸ºç©ºï¼‰æ—¶ä¼šè‡ªåŠ¨æ‰§è¡Œè¿™äº›è„šæœ¬ã€‚</p>
</blockquote>
<p>åœ¨æ—¥å¸¸å¼€å‘ä¸­ï¼Œå»ºè®®ï¼š</p>
<ul>
<li>åº”ç”¨ä»£ç ç›´æ¥åœ¨æœ¬åœ°è¿è¡Œï¼ˆä¾¿äºè°ƒè¯•ä¸è¿­ä»£ï¼‰</li>
<li>PostgreSQL / MySQL ä½¿ç”¨ Docker å¯åŠ¨ï¼ˆé¿å…æœ¬æœºå®‰è£…ä¸ç‰ˆæœ¬å·®å¼‚ï¼‰</li>
</ul>
<p>è¿™æ ·æ—¢è½»é‡ï¼Œåˆèƒ½å¿«é€Ÿåˆ‡æ¢æ•°æ®åº“ç±»å‹ï¼Œæ»¡è¶³â€œå¤šæ•°æ®åº“æ”¯æŒâ€çš„ç›®æ ‡ã€‚</p>
<h3 data-id="heading-9">ä½¿ç”¨ docker-compose å¯åŠ¨æ•°æ®åº“ï¼ˆPostgreSQL + MySQLï¼‰</h3>
<p>ä½ å¯ä»¥ä¸ºæ•°æ®åº“å•ç‹¬å‡†å¤‡ä¸€ä¸ª compose æ–‡ä»¶ï¼ˆä¾‹å¦‚ï¼šdocker-compose.db.ymlï¼‰ï¼Œä»…åŒ…å« Postgres ä¸ MySQL æœåŠ¡ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># docker-compose.db.yml</span>
<span class="hljs-attr">services:</span>
  <span class="hljs-attr">postgres:</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">postgres:15</span>
    <span class="hljs-attr">environment:</span>
      <span class="hljs-attr">POSTGRES_DB:</span> <span class="hljs-string">testdb_1</span>
      <span class="hljs-attr">POSTGRES_USER:</span> <span class="hljs-string">postgres</span>
      <span class="hljs-attr">POSTGRES_PASSWORD:</span> <span class="hljs-string">password</span>
    <span class="hljs-attr">ports:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"5432:5432"</span>
    <span class="hljs-attr">volumes:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">postgres_data:/var/lib/postgresql/data</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">./data/init_scripts/postgresql.sql:/docker-entrypoint-initdb.d/init.sql</span>
    <span class="hljs-attr">restart:</span> <span class="hljs-string">unless-stopped</span>
    <span class="hljs-attr">healthcheck:</span>
      <span class="hljs-attr">test:</span> [<span class="hljs-string">"CMD-SHELL"</span>, <span class="hljs-string">"pg_isready -U postgres -d testdb || exit 1"</span>]
      <span class="hljs-attr">interval:</span> <span class="hljs-string">10s</span>
      <span class="hljs-attr">timeout:</span> <span class="hljs-string">5s</span>
      <span class="hljs-attr">retries:</span> <span class="hljs-number">5</span>

  <span class="hljs-attr">mysql:</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">mysql:8.0</span>
    <span class="hljs-attr">environment:</span>
      <span class="hljs-attr">MYSQL_ROOT_PASSWORD:</span> <span class="hljs-string">rootpassword</span>
      <span class="hljs-attr">MYSQL_DATABASE:</span> <span class="hljs-string">testdb_2</span>
      <span class="hljs-attr">MYSQL_USER:</span> <span class="hljs-string">testuser</span>
      <span class="hljs-attr">MYSQL_PASSWORD:</span> <span class="hljs-string">testpass</span>
    <span class="hljs-attr">ports:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"3306:3306"</span>
    <span class="hljs-attr">volumes:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">mysql_data:/var/lib/mysql</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">./data/init_scripts/mysql.sql:/docker-entrypoint-initdb.d/init.sql</span>
    <span class="hljs-attr">restart:</span> <span class="hljs-string">unless-stopped</span>
    <span class="hljs-attr">healthcheck:</span>
      <span class="hljs-attr">test:</span> [<span class="hljs-string">"CMD-SHELL"</span>, <span class="hljs-string">"mysqladmin ping -h 127.0.0.1 -ptestpass || exit 1"</span>]
      <span class="hljs-attr">interval:</span> <span class="hljs-string">10s</span>
      <span class="hljs-attr">timeout:</span> <span class="hljs-string">5s</span>
      <span class="hljs-attr">retries:</span> <span class="hljs-number">10</span>

<span class="hljs-attr">volumes:</span>
  <span class="hljs-attr">postgres_data:</span>
  <span class="hljs-attr">mysql_data:</span>
</code></pre>
<p>å¯åŠ¨ä¸éªŒè¯ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å¯åŠ¨æ•°æ®åº“å®¹å™¨</span>
docker-compose -f docker-compose.db.yml up -d

<span class="hljs-comment"># æŸ¥çœ‹çŠ¶æ€</span>
docker-compose -f docker-compose.db.yml ps

<span class="hljs-comment"># æŸ¥çœ‹æ—¥å¿—ï¼ˆå¯é€‰ï¼‰</span>
docker-compose -f docker-compose.db.yml logs -f postgres
docker-compose -f docker-compose.db.yml logs -f mysql
</code></pre>
<h3 data-id="heading-10">ä½¿ç”¨ docker run å¯åŠ¨å•ä¸ªæ•°æ®åº“ï¼ˆä¸ä½¿ç”¨ composeï¼‰</h3>
<p>å¦‚æœä½ åªéœ€è¦å…¶ä¸­ä¸€ä¸ªæ•°æ®åº“ï¼š</p>
<p>PostgreSQLï¼š</p>
<pre><code class="hljs language-bash" lang="bash">docker run -d --name pg15 \
  -e POSTGRES_DB=testdb \
  -e POSTGRES_USER=postgres \
  -e POSTGRES_PASSWORD=password \
  -p 5432:5432 \
  -v $(<span class="hljs-built_in">pwd</span>)/data/init_scripts/postgresql.sql:/docker-entrypoint-initdb.d/init.sql \
  postgres:15
</code></pre>
<p>MySQLï¼š</p>
<pre><code class="hljs language-bash" lang="bash">docker run -d --name mysql8 \
  -e MYSQL_ROOT_PASSWORD=rootpassword \
  -e MYSQL_DATABASE=testdb \
  -e MYSQL_USER=testuser \
  -e MYSQL_PASSWORD=testpass \
  -p 3306:3306 \
  -v $(<span class="hljs-built_in">pwd</span>)/data/init_scripts/mysql.sql:/docker-entrypoint-initdb.d/init.sql \
  mysql:8.0
</code></pre>
<blockquote>
<p>Windows PowerShell ä¸‹å°† <code>$(pwd)</code> æ”¹ä¸º <code>${PWD}</code>ã€‚</p>
</blockquote>
<h2 data-id="heading-11">ç¬¬ä¹æ­¥ï¼šæµ‹è¯•è„šæœ¬</h2>
<p>åˆ›å»ºå¤šæ•°æ®åº“æµ‹è¯•è„šæœ¬ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-string">"""
tests/test_mcp_tools.py - MCP å·¥å…·åŠŸèƒ½æµ‹è¯•
"""</span>

<span class="hljs-keyword">import</span> pytest
<span class="hljs-keyword">import</span> os
<span class="hljs-keyword">from</span> mcp_datatools.database <span class="hljs-keyword">import</span> MultiDatabaseManager

<span class="hljs-keyword">class</span> <span class="hljs-title class_">TestMCPTools</span>:
    <span class="hljs-string">"""MCP å·¥å…·åŠŸèƒ½æµ‹è¯•ç±»"""</span>
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">test_database_type_detection</span>(<span class="hljs-params">self</span>):
        <span class="hljs-string">"""æµ‹è¯•æ•°æ®åº“ç±»å‹æ£€æµ‹ - MCP å·¥å…·éœ€è¦çŸ¥é“æ•°æ®åº“ç±»å‹"""</span>
        <span class="hljs-comment"># SQLite</span>
        db_mgr = MultiDatabaseManager(<span class="hljs-string">"sqlite:///data/test.db"</span>)
        <span class="hljs-keyword">assert</span> db_mgr.db_type == <span class="hljs-string">"sqlite"</span>
        db_mgr.close()
        
        <span class="hljs-comment"># PostgreSQL</span>
        db_mgr = MultiDatabaseManager(<span class="hljs-string">"postgresql://user:pass@host:5432/db"</span>)
        <span class="hljs-keyword">assert</span> db_mgr.db_type == <span class="hljs-string">"postgresql"</span>
        db_mgr.close()
        
        <span class="hljs-comment"># MySQL</span>
        db_mgr = MultiDatabaseManager(<span class="hljs-string">"mysql+pymysql://user:pass@host:3306/db"</span>)
        <span class="hljs-keyword">assert</span> db_mgr.db_type == <span class="hljs-string">"mysql"</span>
        db_mgr.close()
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">test_mcp_tool_get_database_info</span>(<span class="hljs-params">self</span>):
        <span class="hljs-string">"""æµ‹è¯• MCP å·¥å…·ï¼šè·å–æ•°æ®åº“ä¿¡æ¯"""</span>
        db_url = <span class="hljs-string">"sqlite:///data/test.db"</span>
        db_mgr = MultiDatabaseManager(db_url)
        
        <span class="hljs-comment"># æµ‹è¯• MCP å·¥å…·éœ€è¦çš„æ•°æ®åº“ä¿¡æ¯</span>
        info = db_mgr.get_database_info()
        
        <span class="hljs-comment"># éªŒè¯ MCP å·¥å…·è¿”å›çš„å…³é”®ä¿¡æ¯</span>
        <span class="hljs-keyword">assert</span> <span class="hljs-string">'type'</span> <span class="hljs-keyword">in</span> info
        <span class="hljs-keyword">assert</span> <span class="hljs-string">'url'</span> <span class="hljs-keyword">in</span> info
        <span class="hljs-keyword">assert</span> <span class="hljs-string">'tables_count'</span> <span class="hljs-keyword">in</span> info
        <span class="hljs-keyword">assert</span> info[<span class="hljs-string">'type'</span>] == <span class="hljs-string">"sqlite"</span>
        
        db_mgr.close()
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">test_mcp_tool_list_tables</span>(<span class="hljs-params">self</span>):
        <span class="hljs-string">"""æµ‹è¯• MCP å·¥å…·ï¼šåˆ—å‡ºæ•°æ®åº“è¡¨"""</span>
        db_url = <span class="hljs-string">"sqlite:///data/test.db"</span>
        db_mgr = MultiDatabaseManager(db_url)
        
        <span class="hljs-comment"># æµ‹è¯• MCP å·¥å…·éœ€è¦çš„è¡¨åˆ—è¡¨åŠŸèƒ½</span>
        tables = db_mgr.get_table_names()
        
        <span class="hljs-comment"># éªŒè¯è¿”å›æ ¼å¼</span>
        <span class="hljs-keyword">assert</span> <span class="hljs-built_in">isinstance</span>(tables, <span class="hljs-built_in">list</span>)
        <span class="hljs-keyword">assert</span> <span class="hljs-built_in">len</span>(tables) &gt; <span class="hljs-number">0</span>  <span class="hljs-comment"># åº”è¯¥æœ‰ä¸€äº›æµ‹è¯•è¡¨</span>
        
        db_mgr.close()
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">test_mcp_tool_execute_query</span>(<span class="hljs-params">self</span>):
        <span class="hljs-string">"""æµ‹è¯• MCP å·¥å…·ï¼šæ‰§è¡ŒæŸ¥è¯¢"""</span>
        db_url = <span class="hljs-string">"sqlite:///data/test.db"</span>
        db_mgr = MultiDatabaseManager(db_url)
        
        <span class="hljs-comment"># æµ‹è¯• MCP å·¥å…·éœ€è¦çš„æŸ¥è¯¢åŠŸèƒ½</span>
        result = db_mgr.execute_query(<span class="hljs-string">"SELECT 1 as test_value"</span>)
        
        <span class="hljs-comment"># éªŒè¯è¿”å›æ ¼å¼</span>
        <span class="hljs-keyword">assert</span> <span class="hljs-built_in">isinstance</span>(result, <span class="hljs-built_in">list</span>)
        <span class="hljs-keyword">assert</span> <span class="hljs-built_in">len</span>(result) == <span class="hljs-number">1</span>
        <span class="hljs-keyword">assert</span> result[<span class="hljs-number">0</span>][<span class="hljs-string">'test_value'</span>] == <span class="hljs-number">1</span>
        
        db_mgr.close()
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">test_mcp_tool_query_safety</span>(<span class="hljs-params">self</span>):
        <span class="hljs-string">"""æµ‹è¯• MCP å·¥å…·ï¼šæŸ¥è¯¢å®‰å…¨æ€§"""</span>
        db_url = <span class="hljs-string">"sqlite:///data/test.db"</span>
        db_mgr = MultiDatabaseManager(db_url)
        
        <span class="hljs-comment"># æµ‹è¯•å±é™©æ“ä½œè¢«é˜»æ­¢</span>
        dangerous_queries = [
            <span class="hljs-string">"DROP TABLE users"</span>,
            <span class="hljs-string">"DELETE FROM users"</span>,
            <span class="hljs-string">"UPDATE users SET name = 'hack'"</span>
        ]
        
        <span class="hljs-keyword">for</span> query <span class="hljs-keyword">in</span> dangerous_queries:
            <span class="hljs-keyword">with</span> pytest.raises(ValueError, <span class="hljs-keyword">match</span>=<span class="hljs-string">"æŸ¥è¯¢åŒ…å«å±é™©æ“ä½œ"</span>):
                db_mgr.execute_query(query)
        
        db_mgr.close()
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">test_postgresql_mcp_tools</span>(<span class="hljs-params">self</span>):
        <span class="hljs-string">"""æµ‹è¯• PostgreSQL çš„ MCP å·¥å…·åŠŸèƒ½"""</span>
        db_url = <span class="hljs-string">"postgresql://postgres:password@localhost:5432/testdb_1"</span>
        
        <span class="hljs-keyword">try</span>:
            db_mgr = MultiDatabaseManager(db_url)
            
            <span class="hljs-comment"># æµ‹è¯• MCP å·¥å…·åœ¨ PostgreSQL ä¸Šçš„åŠŸèƒ½</span>
            info = db_mgr.get_database_info()
            <span class="hljs-keyword">assert</span> info[<span class="hljs-string">'type'</span>] == <span class="hljs-string">"postgresql"</span>
            
            <span class="hljs-comment"># æµ‹è¯•æŸ¥è¯¢</span>
            result = db_mgr.execute_query(<span class="hljs-string">"SELECT 1 as test"</span>)
            <span class="hljs-keyword">assert</span> <span class="hljs-built_in">len</span>(result) == <span class="hljs-number">1</span>
            
            db_mgr.close()
        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
            pytest.skip(<span class="hljs-string">f"PostgreSQLä¸å¯ç”¨: <span class="hljs-subst">{e}</span>"</span>)
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">test_mysql_mcp_tools</span>(<span class="hljs-params">self</span>):
        <span class="hljs-string">"""æµ‹è¯• MySQL çš„ MCP å·¥å…·åŠŸèƒ½"""</span>
        db_url = <span class="hljs-string">"mysql+pymysql://testuser:testpass@localhost:3306/testdb_2"</span>
        
        <span class="hljs-keyword">try</span>:
            db_mgr = MultiDatabaseManager(db_url)
            
            <span class="hljs-comment"># æµ‹è¯• MCP å·¥å…·åœ¨ MySQL ä¸Šçš„åŠŸèƒ½</span>
            info = db_mgr.get_database_info()
            <span class="hljs-keyword">assert</span> info[<span class="hljs-string">'type'</span>] == <span class="hljs-string">"mysql"</span>
            
            <span class="hljs-comment"># æµ‹è¯•æŸ¥è¯¢</span>
            result = db_mgr.execute_query(<span class="hljs-string">"SELECT 1 as test"</span>)
            <span class="hljs-keyword">assert</span> <span class="hljs-built_in">len</span>(result) == <span class="hljs-number">1</span>
            
            db_mgr.close()
        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
            pytest.skip(<span class="hljs-string">f"MySQLä¸å¯ç”¨: <span class="hljs-subst">{e}</span>"</span>)
</code></pre>
<h2 data-id="heading-12">ç¬¬åæ­¥ï¼šä½¿ç”¨æŒ‡å—</h2>
<h3 data-id="heading-13">å®‰è£…ä¾èµ–</h3>
<pre><code class="hljs language-bash" lang="bash">uv <span class="hljs-built_in">sync</span>
</code></pre>
<h3 data-id="heading-14">å¯åŠ¨MCPæœåŠ¡å™¨</h3>
<pre><code class="hljs language-bash" lang="bash">uv run python -m mcp_datatools.server
</code></pre>
<h2 data-id="heading-15">ç¬¬åä¸€æ­¥ï¼šCursoré…ç½®</h2>
<h3 data-id="heading-16">é…ç½®ç¤ºä¾‹</h3>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"mcpServers"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"mcp-datatools-sqlite"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"command"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"uv"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"args"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"run"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"--project"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"/path/to/project"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"python"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"-m"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"mcp_datatools.server"</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"env"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"DB_URL"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"sqlite:///data/test.db"</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"mcp-datatools-postgres"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"command"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"uv"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"args"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"run"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"--project"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"/path/to/project"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"python"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"-m"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"mcp_datatools.server"</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"env"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"DB_URL"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"postgresql://postgres:password@localhost:5432/testdb_1"</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"mcp-datatools-mysql"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"command"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"uv"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"args"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"run"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"--project"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"/path/to/project"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"python"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"-m"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"mcp_datatools.server"</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"env"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"DB_URL"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"mysql+pymysql://testuser:testpass@localhost:3306/testdb_2"</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h2 data-id="heading-17">æµ‹è¯•æ•ˆæœ</h2>
<p>ç°åœ¨ä½ å¯ä»¥æµ‹è¯•å¤šæ•°æ®åº“åŠŸèƒ½ï¼š</p>
<p><strong>è·å–æ•°æ®åº“ä¿¡æ¯ï¼š</strong></p>
<pre><code class="hljs">é—®ï¼šæŸ¥è¯¢mysqlæ•°æ®åº“testdb_2çš„ä¿¡æ¯
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/aa8741cf63cd40698a0909837ac63062~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg57qi6by75a2Q5pe25Luj:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766975185&amp;x-signature=2WgX6z6TNJBJS31Pe7onVs4oYt0%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p><strong>è·å–æŒ‡å®šæ•°æ®åº“çš„ç”¨æˆ·ä¿¡æ¯ï¼š</strong></p>
<pre><code class="hljs">é—®ï¼štestdb_1ç”¨æˆ·çš„ä¿¡æ¯
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/267c712062b34b15a347b1876e0ebeba~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg57qi6by75a2Q5pe25Luj:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766975185&amp;x-signature=7gE0U69VuMlmEiilqI85bkeabfg%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p><strong>è¿æ¥æ± ç›‘æ§ï¼š</strong></p>
<pre><code class="hljs">é—®ï¼štestdb_1å’Œtestdb_2è¿™2ä¸ªæ•°æ®åº“è¿æ¥æ± çŠ¶æ€å¦‚ä½•ï¼Ÿ
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8824035a1ff44f85bb6e7ea47b5b4551~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg57qi6by75a2Q5pe25Luj:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766975185&amp;x-signature=wS6e9QahgLt1EdvIw%2BkIqogNDl4%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h2 data-id="heading-18">æ€»ç»“ä¸é¢„å‘Š</h2>
<p>è¿™ä¸€ç¯‡æˆ‘ä»¬æˆåŠŸå®ç°äº†PostgreSQLã€MySQLã€SQLiteå¤šæ•°æ®åº“æ”¯æŒï¼ŒåŠ ä¸ŠåŸºç¡€è¿æ¥æ± é…ç½®ã€é…ç½®ç®¡ç†å’Œä½¿ç”¨ Docker å¯åŠ¨æ•°æ®åº“ç¯å¢ƒï¼Œè®©MCPæ•°æ®åº“å·¥å…·ä»â€œç©å…·â€å‡çº§ä¸ºçœŸæ­£çš„ç”Ÿäº§çº§å·¥å…·ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[AIæ™ºèƒ½ä½“ï¼šå®Œæ•´è¯¾ç¨‹(é«˜çº§)]]></title>    <link>https://juejin.cn/post/7586136543954272294</link>    <guid>https://juejin.cn/post/7586136543954272294</guid>    <pubDate>2025-12-22T02:32:10.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7586136543954272294" data-draft-id="7585808181239971891" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="AIæ™ºèƒ½ä½“ï¼šå®Œæ•´è¯¾ç¨‹(é«˜çº§)"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-22T02:32:10.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å®‰æ€æ´¾Anspire"/> <meta itemprop="url" content="https://juejin.cn/user/3044964115417419"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            AIæ™ºèƒ½ä½“ï¼šå®Œæ•´è¯¾ç¨‹(é«˜çº§)
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3044964115417419/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å®‰æ€æ´¾Anspire
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-22T02:32:10.000Z" title="Mon Dec 22 2025 02:32:10 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">é«˜çº§</h2>
<p>å¥½äº†ï¼Œæ¬¢è¿æ¥åˆ°é«˜çº§éƒ¨åˆ†ã€‚å¦‚æœä½ å·²ç»èµ°åˆ°è¿™ä¸€æ­¥ï¼Œè¯´æ˜ä½ æ˜¯è®¤çœŸæƒ³è¦æ„å»ºèƒ½åœ¨ç°å®ä¸–ç•Œä¸­è¿è¡Œçš„çœŸæ­£çš„æ™ºèƒ½ä½“ç³»ç»Ÿã€‚</p>
<p>é‚£äº›è®©ä½ ä»æ— åˆ°æœ‰åšå‡ºåŸå‹çš„æŠ€æœ¯ï¼Œå´æ— æ³•è®©ä½ ä»åŸå‹èµ°å‘é‡äº§ã€‚ä½ éœ€è¦ä¸åŒçš„å·¥å…·ã€ä¸åŒçš„æ€ç»´æ–¹å¼ï¼Œä»¥åŠæ›´å¤šçš„è‡ªå¾‹ã€‚</p>
<p>ç°åœ¨è®©æˆ‘ä»¬æ¥æ¢è®¨ä¸€ä¸‹è¿™äº›å†…å®¹ã€‚</p>
<h3 data-id="heading-1">å¤šæ™ºèƒ½ä½“ç³»ç»Ÿçš„é«˜çº§ä»»åŠ¡åˆ†è§£</h3>
<p>æˆ‘ä»¬å·²ç»è®¨è®ºè¿‡ä»»åŠ¡åˆ†è§£ã€‚ä½†å½“ä½ ä½¿ç”¨å¤šæ™ºèƒ½ä½“ç³»ç»Ÿæ—¶ï¼Œè¿™ä¼šå˜å¾—è¶Šæ¥è¶Šå¤æ‚ã€‚</p>
<p>ä½ å¯ä»¥ä½¿ç”¨å››ç§ä¸»è¦æ¨¡å¼æ¥æŒ‡å¯¼ä½ åšå¥½è¿™ä»¶äº‹ã€‚BTWï¼Œæˆ‘æ˜¯ä»<a href="https://link.juejin.cn?target=https%3A%2F%2Fgerred.github.io%2Fbuilding-an-agentic-system%2Fcore-architecture.html" target="_blank" title="https://gerred.github.io/building-an-agentic-system/core-architecture.html" ref="nofollow noopener noreferrer">è¿™ç¯‡å¾ˆæ£’çš„åšå®¢</a>æ”¹ç¼–çš„ â€”â€” æŸ¥çœ‹æ›´å¤šç»†èŠ‚ï¼</p>
<p><strong>æ¨¡å¼1ï¼šåŠŸèƒ½åˆ†è§£</strong></p>
<p>åœ¨è¿™ç§æ¨¡å¼ä¸‹ï¼Œæˆ‘ä»¬æŒ‰æŠ€æœ¯é¢†åŸŸæˆ–ä¸“ä¸šçŸ¥è¯†æ¥åˆ’åˆ†ä»»åŠ¡ã€‚è¿™å°±æ˜¯æˆ‘ä»¬åˆ°ç›®å‰ä¸ºæ­¢åœ¨ç¤ºä¾‹ä¸­ä¸€ç›´åœ¨ä½¿ç”¨çš„æ–¹æ³•â€”â€”æ ¹æ®éœ€è¦å®Œæˆçš„å·¥ä½œç±»å‹æ¥æ‹†åˆ†ä»»åŠ¡ã€‚</p>
<p>æŒ‰å›è½¦é”®æˆ–ç‚¹å‡»ä»¥æŸ¥çœ‹å…¨å°ºå¯¸å›¾åƒ</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/30eca7bbf0cd4809889cd27bd1e7f4b7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a6J5oCd5rS-QW5zcGlyZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766975560&amp;x-signature=B9w49YaiG8TSd7wiKYmBPNFxMiE%3D" alt="" loading="lazy"/></p>
<p>ä¾‹å¦‚ï¼Œä½ å¯ä»¥è€ƒè™‘å…¨æ ˆåŠŸèƒ½å¼€å‘ã€‚è¿™é‡Œæœ‰å‰ç«¯å·¥ä½œã€åç«¯é€»è¾‘ã€æ•°æ®åº“å˜æ›´ï¼Œä¹Ÿè®¸è¿˜æœ‰ API æ›´æ–°ã€‚æ¯ä¸€é¡¹éƒ½éœ€è¦ä¸åŒçš„çŸ¥è¯†å’Œä¸åŒçš„å·¥å…·ã€‚æ‰€ä»¥ä½ è¦åˆ›å»ºä¸“é—¨é’ˆå¯¹æ¯ä¸ªé¢†åŸŸçš„æ™ºèƒ½ä½“ã€‚</p>
<p><strong>æ¨¡å¼2ï¼šç©ºé—´åˆ†è§£</strong></p>
<p>ä½ è¿˜å¯ä»¥æŒ‰æ–‡ä»¶æˆ–ç›®å½•ç»“æ„è¿›è¡Œæ‹†åˆ†ã€‚å½“ä½ å¤„ç†åŒ…å«è®¸å¤šå¯ç‹¬ç«‹å¤„ç†çš„æ–‡ä»¶çš„å¤§å‹ä»£ç åº“æ—¶ï¼Œè¿™ç§æ–¹æ³•å°¤å…¶å¼ºå¤§ã€‚</p>
<p>å‡è®¾ä½ æ­£åœ¨è¿›è¡Œå¤§è§„æ¨¡é‡æ„â€”â€”ä¹Ÿè®¸æ˜¯å°†æ‰€æœ‰ API ç«¯ç‚¹æ›´æ–°åˆ°æ–°çš„èº«ä»½éªŒè¯ç³»ç»Ÿï¼Œè€Œä¸”ä½ åœ¨ä¸åŒæœåŠ¡ä¸­æœ‰æ•°åä¸ªæ–‡ä»¶ã€‚</p>
<p>ä½ è¿›è¡Œç©ºé—´åˆ†è§£ï¼š</p>
<ul>
<li>
<p>ä»£ç†1å¤„ç†/services/users/*</p>
</li>
<li>
<p>ä»£ç†2å¤„ç†/services/orders/*</p>
</li>
<li>
<p>ä»£ç†3å¤„ç† /services/payments/*</p>
</li>
<li>
<p>ä»£ç†4å¤„ç†/services/notifications/*</p>
</li>
</ul>
<p>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ å¯ä»¥é€šè¿‡ç¡®ä¿ä»£ç†åœ¨ä»£ç åº“çš„ä¸åŒéƒ¨åˆ†å·¥ä½œæ¥å‡å°‘å†²çªã€‚ä»–ä»¬å¯ä»¥å¹¶è¡Œå·¥ä½œã€‚ä½†å¦‚æœä½ çš„æ–‡ä»¶ç›¸äº’ä¹‹é—´å­˜åœ¨å¤æ‚çš„ä¾èµ–å…³ç³»ï¼Œç©ºé—´åˆ†è§£å°±ä¼šå¤±æ•ˆã€‚</p>
<p><strong>æ¨¡å¼3ï¼šæ—¶é—´åˆ†è§£</strong></p>
<p>æ¨¡å¼3æ˜¯å…³äºå°†ä»»åŠ¡åˆ†è§£ä¸ºé¡ºåºé˜¶æ®µï¼Œå…¶ä¸­åç»­é˜¶æ®µä¾èµ–äºå‰æœŸé˜¶æ®µçš„å®Œæˆã€‚</p>
<p>è®©æˆ‘ä»¬ä»¥äº§å“å‘å¸ƒä¸ºä¾‹ã€‚ä½ ä¸èƒ½æŸå¤©ä¸€è§‰é†’æ¥å°±å¼€å§‹å‘é€ä¿ƒé”€é‚®ä»¶ã€‚è¿™é‡Œæœ‰ä¸€ä¸ªé€»è¾‘é¡ºåºï¼š</p>
<p><strong>é˜¶æ®µ1ï¼šå¸‚åœºè°ƒç ”</strong> â€” åˆ†æç«äº‰å¯¹æ‰‹ï¼Œè°ƒæŸ¥ç›®æ ‡å®¢æˆ·ï¼Œç¡®å®šå®šä½æœºä¼š<strong>é˜¶æ®µ2ï¼šå‘å¸ƒè§„åˆ’</strong> â€” ç¡®å®šä¿¡æ¯ä¼ é€’å†…å®¹ï¼Œè®¾å®šä»·æ ¼ï¼Œåˆ¶å®šæ—¶é—´è¡¨ï¼Œç¡®å®šæ¸ é“<strong>é˜¶æ®µ3ï¼šèµ„äº§åˆ›å»º</strong> â€” æ’°å†™æ–‡æ¡ˆï¼Œè®¾è®¡å›¾å½¢ï¼Œæ„å»ºç€é™†é¡µï¼Œå‡†å¤‡é‚®ä»¶åºåˆ—<strong>é˜¶æ®µ4ï¼šå‘å¸ƒä¸ç›‘æ§</strong> â€” æ‰§è¡Œæ´»åŠ¨ï¼Œè·Ÿè¸ªæŒ‡æ ‡ï¼Œå›åº”åé¦ˆï¼Œå®æ—¶è°ƒæ•´</p>
<p>æ¯ä¸ªé˜¶æ®µéƒ½æœ‰è‡ªå·±çš„ä»£ç†æˆ–ä»£ç†å›¢é˜Ÿã€‚é˜¶æ®µ2ç›´åˆ°é˜¶æ®µ1å®Œæˆå¹¶å®¡æ ¸åæ‰å¼€å§‹ã€‚</p>
<p><strong>æ¨¡å¼4ï¼šæ•°æ®é©±åŠ¨çš„åˆ†è§£</strong></p>
<p>æœ€åï¼Œæˆ‘ä»¬å¯ä»¥æŒ‰æ•°æ®åˆ†åŒºè¿›è¡Œæ‹†åˆ†ã€‚è¿™ç§æ–¹æ³•ä¸å¤ªå¸¸è§ï¼Œä½†å¯¹äºæŸäº›ç”¨ä¾‹éå¸¸å¼ºå¤§ï¼Œç‰¹åˆ«æ˜¯æ¶‰åŠå¤§å‹æ•°æ®é›†çš„ä»»åŠ¡ï¼Œåœ¨è¿™äº›ä»»åŠ¡ä¸­ï¼Œä½ å¯ä»¥å¯¹æ•°æ®è¿›è¡Œåˆ†åŒºå¹¶ç‹¬ç«‹å¤„ç†å„ä¸ªæ•°æ®å—ã€‚</p>
<p>å‡è®¾ä½ æ­£åœ¨åˆ†æåº”ç”¨ç¨‹åºæ—¥å¿—ä»¥è¯†åˆ«æ€§èƒ½é—®é¢˜ã€‚ä½ æœ‰ä¸Šä¸ªæœˆçš„æ•°åƒå…†å­—èŠ‚çš„æ—¥å¿—ã€‚</p>
<p>æ‚¨å¯ä»¥æŒ‰æ—¶é—´æˆ–æŒ‰æœåŠ¡è¿›è¡Œåˆ†åŒºï¼š</p>
<ul>
<li>
<p>ä»£ç†1å¤„ç†ç¬¬1å‘¨çš„æ—¥å¿—</p>
</li>
<li>
<p>ä»£ç†2å¤„ç†ç¬¬2å‘¨çš„æ—¥å¿—</p>
</li>
<li>
<p>ä»£ç†3å¤„ç†ç¬¬3å‘¨çš„æ—¥å¿—</p>
</li>
<li>
<p>ä»£ç†4å¤„ç†ç¬¬4å‘¨çš„æ—¥å¿—</p>
</li>
</ul>
<p>æ¯ä¸ªä»£ç†ç‹¬ç«‹è¿è¡Œåˆ†æï¼Œç„¶ååœ¨æœ€åæ±‡æ€»ç»“æœã€‚</p>
<p>ä½ ä¹Ÿå¯ä»¥æ··åˆä½¿ç”¨è¿™äº›æ¨¡å¼ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªå…¨æ ˆåŠŸèƒ½å¯èƒ½ä¼šå¯¹ä¸»è¦ç»“æ„ï¼ˆå‰ç«¯ã€åç«¯ã€æ•°æ®åº“ï¼‰ä½¿ç”¨åŠŸèƒ½åˆ†è§£ï¼Œä½†åç«¯ä»£ç†åœ¨å†…éƒ¨ä½¿ç”¨æ—¶é—´åˆ†è§£ï¼ˆè®¾è®¡ API â†’ å®ç°é€»è¾‘ â†’ æ·»åŠ æµ‹è¯•ï¼‰ã€‚</p>
<h3 data-id="heading-2">æé«˜è´¨é‡</h3>
<p>å¥½å§ï¼Œå‡è®¾åˆ°è¿™ä¸€æ­¥æˆ‘ä»¬å·²ç»æœ‰äº†ä¸€ä¸ªè¿è¡Œä¸­çš„ç³»ç»Ÿï¼Œæˆ‘ä»¬è¿›è¡Œäº†å…¨é¢è¯„ä¼°ä»¥æ‰¾å‡ºé”™è¯¯ï¼Œä½†ä»ç„¶å¯¹æ€§èƒ½ä¸æ»¡æ„ã€‚ä»¥ä¸‹æ˜¯åº”å¯¹æªæ–½ã€‚</p>
<p>é¦–å…ˆè¦æ˜ç™½çš„æ˜¯ï¼Œä½ æ‰€å¤„ç†çš„æ˜¯ä¸¤ç§æ ¹æœ¬ä¸åŒç±»å‹çš„ç»„ä»¶ï¼Œå®ƒä»¬éœ€è¦ä¸åŒçš„æ”¹è¿›ç­–ç•¥ã€‚</p>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬æœ‰éå¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰ç»„ä»¶ã€‚è¿™äº›åŒ…æ‹¬ç½‘ç»œæœç´¢ã€æ£€ç´¢å¢å¼ºç”Ÿæˆï¼ˆRAGï¼‰æ£€ç´¢ã€ä»£ç æ‰§è¡Œã€è¯­éŸ³è¯†åˆ«ã€è§†è§‰æ¨¡å‹ã€PDFè§£æå™¨ç­‰ã€‚</p>
<p>è¿™äº›å¯ä»¥é€šè¿‡ä¸¤ç§ä¸»è¦æ–¹å¼åŠ ä»¥æ”¹è¿›ï¼š</p>
<ul>
<li>
<p>**è°ƒæ•´å‚æ•°ã€‚**è°ƒæ•´è¯¸å¦‚ç½‘ç»œæœç´¢æ—¥æœŸèŒƒå›´ã€å‰kä¸ªç»“æœã€RAGå—å¤§å°ã€ç›¸ä¼¼åº¦é˜ˆå€¼ç­‰è®¾ç½®ã€‚</p>
</li>
<li>
<p>**æˆ–è€…ï¼Œæ›´æ¢ä¾›åº”å•†ã€‚**å°è¯•ä½¿ç”¨å…¶ä»–ç½‘ç»œæœç´¢ APIã€ä¸åŒçš„ OCR æˆ–è§†è§‰æ¨¡å‹ï¼Œç­‰ç­‰ã€‚</p>
</li>
</ul>
<p>ç„¶åæ˜¯å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰ç»„ä»¶ã€‚è¿™äº›ç»„ä»¶ç”¨äºç”Ÿæˆã€æå–ã€æ¨ç†â€”â€”åœ¨ä»»ä½•ä½¿ç”¨è¯­è¨€æ¨¡å‹æœ¬èº«çš„åœ°æ–¹ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥åšå¾ˆå¤šäº‹æƒ…æ¥æ”¹è¿›è¿™ä¸€éƒ¨åˆ†ï¼š</p>
<ul>
<li>
<p>**ä¼˜åŒ–æç¤ºã€‚**æ·»åŠ æ˜ç¡®çš„æŒ‡ä»¤ã€çº¦æŸå’Œæ¨¡å¼ã€‚ä½¿ç”¨å°‘é‡è¾“å…¥è¾“å‡ºå¯¹å‘æ¨¡å‹å±•ç¤ºä½ çš„éœ€æ±‚ã€‚</p>
</li>
<li>
<p>**å°è¯•å…¶ä»–æ¨¡å‹ã€‚**æœ‰äº›æ¨¡å‹æ›´æ“…é•¿éµå¾ªæŒ‡ä»¤ï¼Œæœ‰äº›åˆ™åœ¨ä»£ç æˆ–äº‹å®å›å¿†æ–¹é¢è¡¨ç°å‡ºè‰²ã€‚ä¸è¦è®¤ä¸ºä¸€ç§æ¨¡å‹é€‚ç”¨äºæ‰€æœ‰æƒ…å†µã€‚</p>
</li>
<li>
<p><strong>å°†è‰°å·¨çš„ä»»åŠ¡åˆ†è§£æˆæ›´å°çš„éƒ¨åˆ†ã€‚</strong></p>
</li>
<li>
<p>**ä½œä¸ºæœ€åæ‰‹æ®µè¿›è¡Œå¾®è°ƒã€‚**å¾®è°ƒåŠŸèƒ½å¼ºå¤§ï¼Œä½†æˆæœ¬é«˜æ˜‚ã€‚å°†å…¶ç•™åˆ°æˆç†Ÿç³»ç»Ÿä¸­ä½¿ç”¨ï¼Œåœ¨è¿™äº›ç³»ç»Ÿä¸­ï¼Œä½ éœ€è¦æå‡æœ€åå‡ ä¸ªç™¾åˆ†ç‚¹çš„è´¨é‡ï¼Œä¸”å·²å°è¯•è¿‡å…¶ä»–æ‰€æœ‰æ–¹æ³•ã€‚</p>
</li>
</ul>
<h3 data-id="heading-3">é™ä½å»¶è¿Ÿ</h3>
<p>ç¡®ä¿è¾“å‡ºè´¨é‡åº”è¯¥æ˜¯ä½ çš„ç¬¬ä¸€æ­¥ã€‚ä¹‹åï¼Œæˆ‘ä»¬å†æ¥è°ˆè°ˆé™ä½å»¶è¿Ÿã€‚</p>
<ol>
<li>è·å–åŸºçº¿</li>
</ol>
<p>ç¬¬ä¸€æ­¥æ˜¯ä¸ºå·¥ä½œæµç¨‹ä¸­çš„æ¯ä¸ªæ­¥éª¤è®¡æ—¶ã€‚ä½ å¯èƒ½ä¼šå‘ç°ï¼Œæ¯”å¦‚å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰ç”Ÿæˆæœç´¢è¯éœ€è¦7ç§’ï¼Œç½‘ç»œæœç´¢éœ€è¦5ç§’ï¼Œæ’°å†™æ–‡ç« éœ€è¦11ç§’ï¼Œä¾æ­¤ç±»æ¨ã€‚</p>
<p>è¿™ä¸ºä½ æä¾›äº†ä¸€ä¸ªåŸºçº¿ï¼Œè®©ä½ çŸ¥é“åº”è¯¥ä¼˜åŒ–ä»€ä¹ˆã€‚</p>
<p>2. å¹¶è¡ŒåŒ–</p>
<p>æ¥ä¸‹æ¥ï¼Œå°½å¯èƒ½å¹¶è¡Œè¿è¡Œå„é¡¹ä»»åŠ¡ã€‚ä¾‹å¦‚ç½‘é¡µæŠ“å–ã€å¤šé¡¹æœç´¢æˆ–è§£æå¤šä¸ªæ–‡æ¡£ã€‚è¿™å¾€å¾€æ˜¯æœ€å®¹æ˜“å®ç°çš„ä¼˜åŒ–ã€‚</p>
<p>3. åˆç†è°ƒæ•´æ¨¡å‹è§„æ¨¡</p>
<p>åœ¨ä»»åŠ¡ç®€å•ï¼ˆå¦‚å…³é”®è¯ç”Ÿæˆï¼‰çš„æƒ…å†µä¸‹ï¼Œä½¿ç”¨æ›´å°ã€æ›´å¿«çš„å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰ï¼Œå¹¶å°†é‡é‡çº§æ¨¡å‹ç•™ä½œç»¼åˆå’Œæ¨ç†ä½¿ç”¨ã€‚</p>
<p>4. å°è¯•æ›´å¿«çš„ä¾›åº”å•†ã€‚</p>
<p>ååé‡å’Œä»¤ç‰Œæµé€Ÿåº¦å·®å¼‚å¾ˆå¤§ã€‚ä¼˜åŒ–æœåŠ¡çš„æä¾›å•†å¯ä»¥åœ¨ä¸æ”¹å˜ä»»ä½•æç¤ºçš„æƒ…å†µä¸‹èŠ‚çœæ•°ç§’æ—¶é—´ã€‚</p>
<p>5. æœ€åï¼Œä¿®å‰ªä¸Šä¸‹æ–‡ã€‚</p>
<p>è¾ƒçŸ­çš„æç¤ºå’Œä¸Šä¸‹æ–‡æ„å‘³ç€æ›´å¿«çš„è§£ç é€Ÿåº¦ï¼Œå› æ­¤è¯·å°½é‡åªä¿ç•™è¯¥æ­¥éª¤çœŸæ­£éœ€è¦çš„å†…å®¹ã€‚</p>
<h3 data-id="heading-4">é™ä½æˆæœ¬</h3>
<p>åœ¨è´¨é‡é«˜ä¸”å»¶è¿Ÿå¯æ§çš„æƒ…å†µä¸‹ï¼Œä½ å°±å¯ä»¥å¼€å§‹è€ƒè™‘æˆæœ¬äº†ã€‚é¦–å…ˆï¼Œä½ éœ€è¦åƒæµ‹é‡å»¶è¿Ÿä¸€æ ·ï¼Œæµ‹é‡æ¯ä¸€æ­¥çš„æˆæœ¬ã€‚</p>
<p>ä»£ç†ç³»ç»Ÿæœ‰å‡ ä¸ªæˆæœ¬æ¥æºï¼š</p>
<p>**å¤§è¯­è¨€æ¨¡å‹è°ƒç”¨ï¼š**è¿™ç”±è¾“å…¥ä»¤ç‰Œå’Œè¾“å‡ºä»¤ç‰Œå†³å®šã€‚è¿™äº›é€šå¸¸åˆ†å¼€å®šä»·ï¼ˆè¾“å…¥ä»¤ç‰Œè¾ƒä¾¿å®œï¼Œè¾“å‡ºä»¤ç‰Œæˆæœ¬è¾ƒé«˜ï¼‰ã€‚</p>
<p>**API****è°ƒç”¨ï¼š**å¦‚ç½‘ç»œæœç´¢ã€PDFè½¬æ¢ã€å›¾åƒç”Ÿæˆã€è¯­éŸ³è½¬æ–‡æœ¬ç­‰ã€‚è¿™äº›é€šå¸¸æŒ‰æ¬¡æˆ–æŒ‰å•ä½è®¡è´¹ã€‚</p>
<p>**åŸºç¡€è®¾æ–½ï¼š**å¦‚æœä½ æ­£åœ¨è¿è¡Œè‡ªå·±çš„æ£€ç´¢ç³»ç»Ÿã€å‘é‡æ•°æ®åº“æˆ–ç”¨äºä»£ç æ‰§è¡Œçš„è®¡ç®—èµ„æºã€‚</p>
<p>å‡è®¾ä½ æ­£åœ¨æ„å»ºä¸€ä¸ªæ’°å†™è®ºæ–‡çš„ç ”ç©¶ä»£ç†ã€‚ä»¥ä¸‹æ˜¯ä¸€æ¬¡è¿è¡Œå¯èƒ½çš„æˆæœ¬ï¼š</p>
<p>æŒ‰å›è½¦é”®æˆ–ç‚¹å‡»ä»¥æŸ¥çœ‹å…¨å°ºå¯¸å›¾åƒ</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b977c1f5a2c347e8b5b9b3959724ba78~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a6J5oCd5rS-QW5zcGlyZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766975560&amp;x-signature=7WSNk2vyZuqaQZJKugerD7a82ZU%3D" alt="" loading="lazy"/></p>
<p>å¦‚æœä½ æ¯å¤©è¿è¡Œ1000æ¬¡ï¼Œé‚£å°±æ˜¯æ¯å¤©80ç¾å…ƒï¼Œæˆ–æ¯æœˆ2400ç¾å…ƒã€‚</p>
<p>æŒ‰å›è½¦é”®æˆ–ç‚¹å‡»ä»¥æŸ¥çœ‹å…¨å°ºå¯¸å›¾åƒ</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/241da4e0af884d80aee5363080c1aecd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a6J5oCd5rS-QW5zcGlyZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766975560&amp;x-signature=ofJOwKZA%2FyohtFjlx1rSWbCRjfo%3D" alt="" loading="lazy"/></p>
<p>ä¸€æ—¦ä½ çŸ¥é“æ¯ä¸€æ­¥çš„æˆæœ¬ï¼Œä»¥ä¸‹æ˜¯ä½ å¯ä»¥é‡‡å–çš„ä¼˜åŒ–æªæ–½ï¼š</p>
<ul>
<li>
<p>**å…ˆè§£å†³å¤§å¼€é”€çš„éƒ¨åˆ†ã€‚**å¦‚æœç½‘ç»œæœç´¢æ¯æ¬¡è°ƒç”¨èŠ±è´¹2ç¾åˆ†ï¼Œè€Œä½ æ¯æ¬¡è¿è¡Œè°ƒç”¨10æ¬¡ï¼Œé‚£å°±æ˜¯20ç¾åˆ†ã€‚å°½æœ€å¤§åŠªåŠ›å‡å°‘è°ƒç”¨æ¬¡æ•°ã€ç¼“å­˜ç»“æœæˆ–æ‰¹é‡æŸ¥è¯¢ã€‚</p>
</li>
<li>
<p>**å¯¹æ¨¡å‹è¿›è¡Œåˆ†å±‚ã€‚**ç®€å•ä»»åŠ¡ä½¿ç”¨ä½æˆæœ¬æ¨¡å‹ï¼Œå‰æ²¿æ¨¡å‹ä»…åœ¨çœŸæ­£å…³é”®çš„åœ°æ–¹ä½¿ç”¨ã€‚</p>
</li>
<li>
<p>**ç§¯æç¼“å­˜ã€‚**åƒæœç´¢å“åº”ã€åµŒå…¥ã€å—æ£€ç´¢æˆ–ä¸­é—´æ‘˜è¦è¿™æ ·çš„ç¡®å®šæ€§ç»“æœä¸åº”æ¯æ¬¡éƒ½é‡æ–°è®¡ç®—ã€‚</p>
</li>
<li>
<p>**é™åˆ¶è¾“å‡ºã€‚**ä½¿ç”¨è¯¸å¦‚ â€œè¿”å›åŒ…å«è¿™äº›å¿…å¡«å­—æ®µçš„ JSONâ€ã€â€œæœ€å¤šæä¾› 5 ä¸ªè¦ç‚¹â€ ä¹‹ç±»çš„æŒ‡ä»¤ï¼Œè¦æ±‚è¾“å‡ºç»“æ„åŒ–ã€ç®€æ´çš„ç»“æœã€‚ä½¿ç”¨æ›´å°‘çš„ä»¤ç‰Œï¼Œé™ä½è´¹ç”¨ã€‚</p>
</li>
<li>
<p>**æ‰¹é‡å¤„ç†ã€‚**å¦‚æœæ‚¨è¦å¤„ç†è®¸å¤šç›¸ä¼¼çš„é¡¹ç›®ï¼Œå°½å¯èƒ½å°†æ“ä½œæ†ç»‘åœ¨ä¸€èµ·ã€‚ä¾‹å¦‚ï¼Œåœ¨AWSä¸Šï¼Œæ‰¹é‡å¤„ç†çš„æˆæœ¬ä»…ä¸ºæŒ‰éœ€å¤„ç†çš„50%ã€‚</p>
</li>
</ul>
<h3 data-id="heading-5">å¯è§‚æµ‹æ€§å’Œç›‘æ§</h3>
<p>ä½ å·²ç»æœ‰äº†ä¸€ä¸ªåœ¨è´¨é‡ã€å»¶è¿Ÿå’Œæˆæœ¬æ–¹é¢éƒ½è®©ä½ æ»¡æ„çš„ç³»ç»Ÿã€‚ç°åœ¨æˆ‘ä»¬éœ€è¦ç¡®ä¿å®ƒåœ¨æ‰©å±•åä»èƒ½æŒ‰é¢„æœŸè¿è¡Œã€‚</p>
<p>è¿™å°±æ˜¯ç›‘æ§å’Œå¯è§‚æµ‹æ€§å‘æŒ¥ä½œç”¨çš„åœ°æ–¹ã€‚å¯è§‚æµ‹æ€§æ¶µç›–å¯è°ƒè¯•æ€§ã€è´¨é‡ç›‘æ§å’Œå¹»è§‰è·Ÿè¸ªã€‚åŸºæœ¬ä¸Šï¼Œä»»ä½•æœ‰åŠ©äºä½ è§‚å¯Ÿæ™ºèƒ½ä½“è¡Œä¸ºå’Œæ€§èƒ½çš„å†…å®¹éƒ½å±äºå¯è§‚æµ‹æ€§èŒƒç•´ã€‚</p>
<p>æ£˜æ‰‹çš„æ˜¯ï¼ŒAIç³»ç»Ÿçš„å¯è§‚æµ‹æ€§ä¸ä¼ ç»Ÿè½¯ä»¶æœ‰ç€æ ¹æœ¬çš„ä¸åŒã€‚</p>
<p>ä½¿ç”¨ä¼ ç»Ÿè½¯ä»¶æ—¶ï¼Œä½ å¯ä»¥è¿½è¸ªåˆ°æ¸…æ™°çš„æ‰§è¡Œè·¯å¾„ã€‚å‡½æ•°Aè°ƒç”¨å‡½æ•°Bï¼Œå‡½æ•°BæŸ¥è¯¢æ•°æ®åº“ã€è¿”å›æ•°æ®ã€æ¸²æŸ“é¡µé¢ï¼Œè¯¸å¦‚æ­¤ç±»ã€‚</p>
<p>ç”±äºå¤šç§ä¸åŒåŸå› ï¼ŒAIç³»ç»Ÿå¹¶éå¦‚æ­¤è¿ä½œï¼š</p>
<ul>
<li>
<p>å®ƒä»¬æ˜¯éç¡®å®šæ€§çš„ã€‚ç›¸åŒçš„è¾“å…¥å¯èƒ½ä¼šæ ¹æ®æ¨¡å‹çš„å“åº”äº§ç”Ÿä¸åŒçš„è¾“å‡ºã€‚ä½ ä¸èƒ½ç®€å•åœ°é‡å¤è¯·æ±‚å¹¶æœŸæœ›å¾—åˆ°ç›¸åŒçš„ç»“æœã€‚</p>
</li>
<li>
<p>ä»–ä»¬é€šè¿‡å¹¶è¡Œè¿è¡Œçš„å·¥å…·ã€ä»£ç†ç”Ÿæˆå­ä»£ç†ç­‰æ–¹å¼å®ç°åˆ†å¸ƒå¼æ‰§è¡Œã€‚</p>
</li>
<li>
<p>å¤§é‡å¤–éƒ¨ä¾èµ–é¡¹å­˜åœ¨æ½œåœ¨çš„æ•…éšœç‚¹ï¼Œä¸”è¿™äº›æ•…éšœç‚¹ä¸å—ä½ æ§åˆ¶ã€‚</p>
</li>
<li>
<p>è¿˜æœ‰æ›´å¤šï¼</p>
</li>
</ul>
<p>ä¸ºäº†ç®¡ç†è¿™ä¸€åˆ‡ï¼Œæˆ‘ä»¬éœ€è¦ä¸¤ç§å¯è§æ€§ï¼š</p>
<ul>
<li>
<p><strong>â€œZoom-inâ€æŒ‡æ ‡</strong>å¯å¸®åŠ©æ‚¨è°ƒè¯•å•æ¬¡è¿è¡Œã€‚è¿™æ˜¯æ‚¨çš„å®Œæ•´è·Ÿè¸ªä¿¡æ¯ï¼šæç¤ºã€å·¥å…·è°ƒç”¨ã€ä»¤ç‰Œä½¿ç”¨æƒ…å†µã€é‡è¯•å°è¯•ä»¥åŠæ¯ä¸ªå†³ç­–ç‚¹ã€‚åŸºæœ¬ä¸ŠåŒ…å«é‡ç°é”™è¯¯å¹¶ç¡®åˆ‡æ‰¾å‡ºé”™è¯¯å‘ç”Ÿä½ç½®æ‰€éœ€çš„ä¸€åˆ‡ä¿¡æ¯ã€‚</p>
</li>
<li>
<p><strong>â€œç¼©å°â€æŒ‡æ ‡</strong>å‘Šè¯‰ä½ æ•´ä¸ªç³»ç»Ÿåœ¨å¤šæ¬¡è¿è¡Œä¸­çš„è¡¨ç°ã€‚è¿™åŒ…æ‹¬è‡ªåŠ¨è´¨é‡æ£€æŸ¥ï¼ˆé€šå¸¸ä»¥å¤§è¯­è¨€æ¨¡å‹ä½œä¸ºè¯„åˆ¤ï¼‰ã€å¹»è§‰ç‡ã€æˆåŠŸç‡/æŠ•èµ„å›æŠ¥ç‡ï¼ˆROIï¼‰è¡¡é‡æŒ‡æ ‡ï¼Œä»¥åŠæ˜¾ç¤ºå˜åŒ–æ˜¯æœ‰ç›Šè¿˜æ˜¯æœ‰å®³çš„è¶‹åŠ¿çº¿ã€‚</p>
</li>
</ul>
<p>ä½ ä¸ä»…è¦è®°å½•æ™ºèƒ½ä½“åšäº†ä»€ä¹ˆï¼Œè¿˜è¦è®°å½•å®ƒè¿™ä¹ˆåšçš„åŸå› ã€‚ä¾‹å¦‚ï¼Œä½ å¯èƒ½ä¼šè®°å½•è¿™æ ·çš„å†…å®¹ï¼šâ€œæ™ºèƒ½ä½“é€‰æ‹©ä½¿ç”¨ç½‘ç»œæœç´¢è€Œéæ£€ç´¢å¢å¼ºç”Ÿæˆï¼ˆRAGï¼‰ï¼Œå› ä¸ºæŸ¥è¯¢ä¸­åŒ…å«â€˜è¿‘æœŸâ€™â€æˆ–â€œåæ€è¿‡ç¨‹è¯†åˆ«å‡º3ä¸ªé—®é¢˜ï¼šç¼ºå°‘å¼•ç”¨ã€æ—¥æœŸæ¨¡ç³Šã€è¯­æ°”ä¸å½“â€</p>
<p>å½“ä½ åŒæ—¶è¿è¡Œæ•°åƒä¸ªæ™ºèƒ½ä½“æ—¶ï¼Œä½ æ— æ³•æ‰‹åŠ¨æŸ¥çœ‹æ¯ä¸€æ¡è¿½è¸ªä¿¡æ¯ã€‚è¿™å°±æ˜¯<strong>è´¨é‡æŠ½æ ·</strong>å‘æŒ¥ä½œç”¨çš„åœ°æ–¹ã€‚ä¸å…¶æ·±å…¥æ£€æŸ¥æ¯ä¸€æ¬¡æ‰§è¡Œï¼Œä½ å¯ä»¥å®šä¹‰ä¸€ä¸ªæŠ½æ ·ç‡â€”â€”æ¯”å¦‚ï¼Œæ€»è¿è¡Œæ¬¡æ•°çš„ä¸€å®šç™¾åˆ†æ¯”â€”â€”æ¥è¯„ä¼°è´¨é‡å’Œå¹»è§‰æƒ…å†µã€‚ç„¶åï¼Œç³»ç»Ÿä¼šä½¿ç”¨è¿™éƒ¨åˆ†æ‰§è¡Œæ¥è®¡ç®—æ™ºèƒ½ä½“çš„æ•´ä½“è´¨é‡å¾—åˆ†å’Œå¹»è§‰å¾—åˆ†ã€‚</p>
<p>è¿™ä½¿æ‚¨èƒ½å¤Ÿå¯¹ä¿®å¤å’Œæ”¹è¿›é¢†åŸŸè¿›è¡Œä¼˜å…ˆçº§æ’åºã€‚</p>
<p>é™¤äº†æŠ€æœ¯æŒ‡æ ‡ï¼Œä½ è¿˜éœ€è¦äº†è§£ç”¨æˆ·è¡Œä¸ºã€‚</p>
<ul>
<li>
<p>**äººä»¬å®é™…åœ¨å¯»æ±‚ä»€ä¹ˆï¼Ÿ**ä»–ä»¬æ˜¯å¦æŒ‰é¢„æœŸä½¿ç”¨ä½ çš„ä»£ç†ï¼Œè¿˜æ˜¯æ‰¾åˆ°äº†åˆ›é€ æ€§çš„å˜é€šæ–¹æ³•ï¼Ÿ</p>
</li>
<li>
<p>**ä»–ä»¬åœ¨å“ªé‡Œå¡ä½äº†ï¼Ÿ**ä»–ä»¬ä¼šé‡æ–°è¡¨è¿°å¹¶å†æ¬¡å°è¯•å—ï¼Ÿè¿™è¡¨æ˜ç¬¬ä¸€æ¬¡å°è¯•æ²¡æœ‰æˆåŠŸã€‚</p>
</li>
<li>
<p>**ä»–ä»¬å¦‚ä½•å¤„ç†è¾“å‡ºç»“æœï¼Ÿ**å¦‚æœä»–ä»¬ç«‹å³è¦æ±‚ä¿®æ”¹ï¼Œé‚£ä¹ˆåˆå§‹è´¨é‡å°±ä¸å¤Ÿå¥½ã€‚</p>
</li>
<li>
<p>**ä¼šè¯æ—¶é•¿æ˜¯å¤šå°‘ï¼Ÿ**éå¸¸çŸ­çš„ä¼šè¯å¯èƒ½æ„å‘³ç€å¿«é€ŸæˆåŠŸæˆ–ç«‹å³å¤±è´¥ã€‚éå¸¸é•¿çš„ä¼šè¯å¯èƒ½æ„å‘³ç€ä»£ç†æœ‰èƒ½åŠ›ä½†æ•ˆç‡ä½ä¸‹ã€‚</p>
</li>
</ul>
<p>è¿™äº›å®šæ€§æ•°æ®ä¸ä½ çš„æŠ€æœ¯æŒ‡æ ‡ä¸€æ ·ï¼Œéƒ½èƒ½ä¸ºä½ çš„äº§å“è·¯çº¿å›¾æä¾›æŒ‡å¯¼ã€‚</p>
<h3 data-id="heading-6">å®‰å…¨</h3>
<p>æœ€åï¼Œæˆ‘ä»¬éœ€è¦è°ˆè°ˆæ„å»ºå¼ºå¤§ç³»ç»Ÿä¸­æœ€ä¸ä»¤äººå…´å¥‹ä½†æœ€é‡è¦çš„éƒ¨åˆ†ä¹‹ä¸€ï¼šå®‰å…¨ã€‚</p>
<p>å°±åƒå¯è§‚æµ‹æ€§ä¸€æ ·ï¼ŒAIæ™ºèƒ½ä½“çš„å®‰å…¨æ€§ä¸ä¼ ç»Ÿåº”ç”¨ç¨‹åºçš„å®‰å…¨æ€§ä¸åŒã€‚ä½ ä¸ä»…è¦é˜²èŒƒå¤–éƒ¨æ”»å‡»è€…ï¼Œå®é™…ä¸Šè¿˜å¿…é¡»é˜²èŒƒè‡ªå·±çš„ç³»ç»Ÿåšå‡ºå±é™©å†³ç­–æˆ–è¢«æ“çºµè€Œé‡‡å–æœ‰å®³è¡ŒåŠ¨ã€‚</p>
<p>è¿™äº›å°±æ˜¯éœ€è¦ç•™æ„çš„äº‹é¡¹ï¼š</p>
<ul>
<li>
<p>**æç¤ºæ³¨å…¥ï¼š**ç”¨æˆ·è¾“å…¥æˆ–å¤–éƒ¨æ•°æ®ä¸­çš„æ¶æ„å†…å®¹ï¼Œä¼šåŠ«æŒä½ çš„ä»£ç†æŒ‡ä»¤</p>
</li>
<li>
<p>**ä¸å®‰å…¨çš„ä»£ç ç”Ÿæˆï¼š**ä»£ç†ç¼–å†™è®¿é—®æ•æ„Ÿæ•°æ®æˆ–æ‰§è¡Œå±é™©æ“ä½œçš„ä»£ç </p>
</li>
<li>
<p>**æ•°æ®æ³„éœ²ï¼š**é€šè¿‡ä»£ç†è¾“å‡ºæˆ–å·¥å…·è°ƒç”¨æš´éœ²çš„PIIæˆ–ä¸“æœ‰ä¿¡æ¯</p>
</li>
<li>
<p>**èµ„æºè€—å°½ï¼š**ä»£ç†å¯åŠ¨é«˜æˆæœ¬æ“ä½œæˆ–æ— é™å¾ªç¯</p>
</li>
</ul>
<p>è®©æˆ‘ä»¬ç‰¹åˆ«æ·±å…¥æ¢è®¨ä¸€ä¸‹ä»£ç æ‰§è¡Œã€‚ä»£ç æ‰§è¡Œæ˜¯æ™ºèƒ½ä½“çš„ç»ˆæå·¥å…·ã€‚å®ƒæå…¶å¼ºå¤§ï¼Œå› ä¸ºæ™ºèƒ½ä½“å¯ä»¥ç¼–å†™ä»£ç æ¥ç”Ÿæˆå›¾è¡¨ã€åˆ›å»º Markdown æ–‡ä»¶ã€å¤„ç†æ•°æ®ï¼Œå¹¶ä¸”é€šå¸¸å¯ä»¥åœ¨ä½ è®¾å®šçš„è¾¹ç•Œå†…â€œä¸ºæ‰€æ¬²ä¸ºâ€ã€‚</p>
<p>è¿™æ˜¯ä¸€æŠŠåŒåˆƒå‰‘ã€‚</p>
<p>è®¸å¤šä»»åŠ¡å¯ä»¥é€šè¿‡å®šä¹‰æ˜ç¡®çš„è‡ªå®šä¹‰å·¥å…·æ¥å®Œæˆï¼Œå› æ­¤æ‚¨çš„ç³»ç»Ÿå¹¶ä¸æ€»æ˜¯éœ€è¦é€€å›åˆ°è‡ªç”±å½¢å¼çš„ç¼–ç ã€‚ä½†å½“æ‚¨å¯ç”¨å®ƒæ—¶ï¼Œæ‚¨éœ€è¦è®¾ç½®é˜²æŠ¤æªæ–½ã€‚</p>
<p>ä»¥ä¸‹æ˜¯å®‰å…¨æ‰§è¡Œä»£ç çš„æ–¹æ³•ï¼š</p>
<ul>
<li>
<p>**æ²™ç›’æ‰§è¡Œã€‚**ä½¿ç”¨ Docker æˆ–å—é™çš„è¿è¡Œå™¨ç¯å¢ƒã€‚å°†ä»£ç æ‰§è¡Œä¸ä¸»åº”ç”¨ç¨‹åºå®Œå…¨éš”ç¦»ã€‚ä»£ç åº”åœ¨æ¯æ¬¡æ‰§è¡Œåé”€æ¯çš„å®¹å™¨ä¸­è¿è¡Œã€‚</p>
</li>
<li>
<p>**èµ„æºé™åˆ¶ã€‚**è®¾ç½®è¶…æ—¶æ—¶é—´ã€å†…å­˜ä¸Šé™ã€CPUé™åˆ¶ã€‚é˜»æ­¢å±é™©çš„å¯¼å…¥æ“ä½œã€ç½‘ç»œè®¿é—®ï¼ˆé™¤éæ˜ç¡®éœ€è¦ï¼‰ï¼Œä»¥åŠåœ¨æŒ‡å®šä¸´æ—¶ç›®å½•ä¹‹å¤–çš„æ–‡ä»¶ç³»ç»Ÿå†™å…¥æ“ä½œã€‚</p>
</li>
<li>
<p>**ä»…ä½¿ç”¨ç™½åå•åº“ã€‚**å…è®¸ä½¿ç”¨ç‰¹å®šçš„ã€å®‰å…¨çš„åº“ï¼Œå¦‚pandasã€numpyæˆ–datetimeã€‚ä¸å…è®¸éšæ„å®‰è£…ã€‚å¦‚æœä»£ç†éœ€è¦æŸä¸ªåº“ï¼Œä½ éœ€è¦æ˜ç¡®åœ°å°†å…¶æ·»åŠ åˆ°ç™½åå•ä¸­ã€‚</p>
</li>
<li>
<p>**éªŒè¯åŠ åæ€å¾ªç¯ã€‚**å¦‚æœä»£ç æ‰§è¡Œå‡ºé”™ï¼Œæ•è·å›æº¯ä¿¡æ¯å¹¶è®©æ¨¡å‹ä¿®å¤ä»£ç ã€‚ç»™å®ƒä¸€åˆ°ä¸¤æ¬¡å°è¯•æœºä¼šï¼Œå¹¶ç¡®ä¿è®¾ç½®äº†æ–­è·¯å™¨ã€‚</p>
</li>
<li>
<p>**ç¡®å®šæ€§è¾“å…¥/è¾“å‡ºã€‚**è®©ä»£ç è¿”å›ä¸€ä¸ªå°çš„ã€ç»“æ„åŒ–çš„ç»“æœâ€”â€”ä¸€ä¸ªæ•°å­—ã€ä¸€ä¸ªåˆ—è¡¨ã€ä¸€ä¸ªJSONå¯¹è±¡ã€‚ç„¶åä½ å†ä¸ºç”¨æˆ·æ ¼å¼åŒ–è¿™ä¸ªç»“æœã€‚ä¸è¦è®©ä»£ç ç›´æ¥å‘ç”¨æˆ·è¾“å‡ºæˆ–å†™å…¥ä»–ä»¬å¯ä»¥è®¿é—®çš„æ–‡ä»¶ã€‚</p>
</li>
<li>
<p>ä»¥åŠ<strong>è¾“å…¥å’Œè¾“å‡ºçš„å®‰å…¨å¤„ç†</strong>ï¼Œç¡®ä¿æ‰€æœ‰è¾“å…¥åœ¨åˆ°è¾¾ä»£ç†ä¹‹å‰éƒ½ç»è¿‡éªŒè¯ï¼Œæ‰€æœ‰è¾“å‡ºéƒ½ç»è¿‡æ‰«æï¼Œä»¥æ£€æŸ¥æ˜¯å¦åŒ…å«APIå¯†é’¥æˆ–PIIç­‰æ•æ„Ÿæ•°æ®ã€‚</p>
</li>
</ul>
<p>é«˜çº§éƒ¨åˆ†å°±åˆ°æ­¤ç»“æŸå•¦ï¼æŒæ¡äº†è¿™äº›å†…å®¹ï¼Œä½ å°±å‡†å¤‡å¥½æ„å»ºå¯æ‰©å±•å¹¶åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä¸ºç”¨æˆ·æä¾›æœåŠ¡çš„çœŸå®ç³»ç»Ÿäº†ã€‚</p>
<h2 data-id="heading-7">å¥–é‡‘</h2>
<p>ä½†æ­£å¦‚æ‰¿è¯ºçš„é‚£æ ·ï¼Œæˆ‘ä»¬è¿˜æœ‰ä¸€ä¸ªé¢å¤–ç¦åˆ©è¦é€ç»™è¶…çº§é«˜æ‰‹ä»¬ã€‚</p>
<p>æˆ‘ä»¬ä»Šå¤©è®¨è®ºçš„å¤§éƒ¨åˆ†å†…å®¹éƒ½å‡å®šä½ æ­£åœ¨ä½¿ç”¨åƒLangGraphæˆ–CrewAIè¿™æ ·çš„æ¡†æ¶ã€‚ä½†å¦‚æœä½ æ˜¯ä¸€åå¯¹äº†è§£Claude Codeç­‰æ™ºèƒ½ä½“å·¥å…·å†…éƒ¨å·¥ä½œåŸç†æ„Ÿå…´è¶£çš„å¼€å‘è€…ï¼Œæˆ‘å¼ºçƒˆæ¨èè¿™ç¯‡å…³äºæ™ºèƒ½ä½“ç³»ç»Ÿè®¾è®¡çš„åšå®¢ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgerred.github.io%2Fbuilding-an-agentic-system%2Fcore-architecture.html" target="_blank" title="https://gerred.github.io/building-an-agentic-system/core-architecture.html" ref="nofollow noopener noreferrer">gerred.github.io/building-anâ€¦</a></p>
<p>å®ƒæ¢è®¨äº†è¯¸å¦‚ä¸‰ä¸ªæ ¸å¿ƒå±‚ï¼ˆç»ˆç«¯ UIã€å¤§è¯­è¨€æ¨¡å‹ â€œæ™ºèƒ½â€ å±‚å’Œå·¥å…·å±‚ï¼‰ã€å¦‚ä½•ä½¿ç”¨å¼‚æ­¥ç”Ÿæˆå™¨æ„å»ºå“åº”å¼å‘½ä»¤å¾ªç¯ã€æµå¼ä¼ è¾“ + å·¥å…·è°ƒç”¨æ¨¡å¼ï¼Œç”šè‡³è¿˜æ¶‰åŠä¸€ä¸ªå¹¶è¡Œæ‰§è¡Œå¼•æ“å’Œæ™ºèƒ½å·¥å…·è°ƒåº¦ï¼ˆè¯»ä¸å†™ï¼‰ï¼Œè¿™äº›åœ¨åº•å±‚ä¸æ”¯æ’‘ Claude Code å’Œ Cursor çš„æŠ€æœ¯æä¸ºç›¸ä¼¼ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¢¨æ¢…åšå®¢ MVP å‘å¸ƒä¸è‰æ¢… Auth æ›´æ–° | 2025 å¹´ç¬¬ 51 å‘¨è‰æ¢…å‘¨æŠ¥]]></title>    <link>https://juejin.cn/post/7585808181239136307</link>    <guid>https://juejin.cn/post/7585808181239136307</guid>    <pubDate>2025-12-21T14:53:02.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7585808181239136307" data-draft-id="7585743487259312137" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¢¨æ¢…åšå®¢ MVP å‘å¸ƒä¸è‰æ¢… Auth æ›´æ–° | 2025 å¹´ç¬¬ 51 å‘¨è‰æ¢…å‘¨æŠ¥"/> <meta itemprop="keywords" content="GitHub,å¼€æº,AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2025-12-21T14:53:02.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è‰æ¢…å‹ä»"/> <meta itemprop="url" content="https://juejin.cn/user/3043088413495815"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¢¨æ¢…åšå®¢ MVP å‘å¸ƒä¸è‰æ¢… Auth æ›´æ–° | 2025 å¹´ç¬¬ 51 å‘¨è‰æ¢…å‘¨æŠ¥
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3043088413495815/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è‰æ¢…å‹ä»
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-21T14:53:02.000Z" title="Sun Dec 21 2025 14:53:02 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-21
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æœ¬æ–‡åœ¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmyr.ltd" target="_blank" title="https://blog.cmyr.ltd" ref="nofollow noopener noreferrer">è‰æ¢…å‹ä»çš„åšå®¢</a> å‘å¸ƒå’Œæ›´æ–°ï¼Œå¹¶åœ¨å¤šä¸ªå¹³å°åŒæ­¥å‘å¸ƒã€‚å¦‚æœ‰æ›´æ–°ï¼Œä»¥åšå®¢ä¸Šçš„ç‰ˆæœ¬ä¸ºå‡†ã€‚æ‚¨ä¹Ÿå¯ä»¥é€šè¿‡æ–‡æœ«çš„ <code>åŸæ–‡é“¾æ¥</code> æŸ¥çœ‹æœ€æ–°ç‰ˆæœ¬ã€‚</p>
</blockquote>
<h2 data-id="heading-0">å‰è¨€</h2>
<p>æ¬¢è¿æ¥åˆ°è‰æ¢…å‘¨æŠ¥ï¼è¿™æ˜¯ä¸€ä¸ªç”±è‰æ¢…å‹ä»åŸºäº AI æ•´ç†çš„å‘¨æŠ¥ï¼Œæ—¨åœ¨ä¸ºæ‚¨æä¾›æœ€æ–°çš„åšå®¢æ›´æ–°ã€GitHub åŠ¨æ€ã€ä¸ªäººåŠ¨æ€å’Œå…¶ä»–å‘¨åˆŠæ–‡ç« æ¨èç­‰å†…å®¹ã€‚</p>
<hr/>
<p>æœ¬å‘¨åœ¨å¼€å‘ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FCaoMeiYouRen%2Fmomei" target="_blank" title="https://github.com/CaoMeiYouRen/momei" ref="nofollow noopener noreferrer">å¢¨æ¢… (Momei)</a> ä¸­ã€‚</p>
<blockquote>
<p>æ‚¨å¯ä»¥å‰å¾€å®˜ç½‘è¯•ç”¨ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmomei.app%2F" target="_blank" title="https://momei.app/" ref="nofollow noopener noreferrer">momei.app/</a></p>
<p>ä¹Ÿå¯ä»¥å‰å¾€æ–‡æ¡£ç«™æ¥äº†è§£é¡¹ç›®æ•´ä½“è§„åˆ’å’Œæœªæ¥å¼€å‘è·¯çº¿å›¾ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.momei.app%2F" target="_blank" title="https://docs.momei.app/" ref="nofollow noopener noreferrer">docs.momei.app/</a></p>
</blockquote>
<p>ç»è¿‡ä¸€æ®µæ—¶é—´çš„é«˜å¼ºåº¦å¼€å‘ï¼Œåœ¨æŠŠ GitHub Copilot ç”¨åˆ°ä¸Šé™ï¼Œç”šè‡³è¿˜é¢å¤–æ”¯å‡ºäº†å‡ ç¾å…ƒä¹‹åï¼Œæˆ‘ç»ˆäºå¯ä»¥å®£å¸ƒ <a href="https://link.juejin.cn?target=https%3A%2F%2Fmomei.app%2F" target="_blank" title="https://momei.app/" ref="nofollow noopener noreferrer">å¢¨æ¢…åšå®¢</a> å·²ç»åˆ°äº†å¯ä»¥åˆæ­¥ä½¿ç”¨çš„åœ°æ­¥ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/17a11bffd39e47c3bfa24a737fdf8521~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I2J5qKF5Y-L5LuB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766975816&amp;x-signature=kiU3%2FF8VfeqN6ViW1DYbzhdjzCo%3D" alt="QQæˆªå›¾20251220232130" loading="lazy"/></p>
<p>å½“ç„¶äº†ï¼Œè·ç¦»çœŸæ­£ä¸Šçº¿è‚¯å®šè¿˜æœ‰ç‚¹è·ç¦»ï¼Œç›®å‰è¿˜å­˜åœ¨ä¸å°‘é—®é¢˜è¦ä¿®ã€‚</p>
<p>ä¸è¿‡ä½œä¸ºä¸€ä¸ªå¼€æºé¡¹ç›®ï¼Œæœ€é‡è¦çš„è¿˜æ˜¯å…ˆæŠŠ MVP(æœ€å°å¯è¡Œæ€§äº§å“)ç‰ˆæœ¬ç«¯ä¸Šæ¥ï¼Œå…ˆè®©ç”¨æˆ·çœ‹ä¸‹å¤§æ¦‚çš„æ ·å­ã€‚</p>
<p>åœ¨å½“å‰è¿›åº¦ä¸­ï¼Œå·²ç»å®Œæˆäº†ä¸»é¡µã€æ–‡ç« é¡µã€ç™»å½•æ³¨å†Œé¡µã€åå°ç®¡ç†é¡µç­‰å¤šä¸ªé¡µé¢çš„å†…å®¹ï¼Œå¹¶ä¸”æ”¯æŒå›½é™…åŒ–å’Œæš—è‰²æ¨¡å¼ã€‚</p>
<p>ä»¥ä¸‹æ˜¯éƒ¨åˆ†é¡µé¢çš„æˆªå›¾å±•ç¤ºã€‚</p>
<p>ä¸»é¡µï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d2288084f13a49f8ab5215d0e4d7e63f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I2J5qKF5Y-L5LuB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766975816&amp;x-signature=qvajEszFz51dCQzFhZqA7VyYEY8%3D" alt="QQæˆªå›¾20251221215342" loading="lazy"/></p>
<p>æ–‡ç« åˆ—è¡¨é¡µï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4764a6b7af1f4e1d98ab673e1a2c07b4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I2J5qKF5Y-L5LuB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766975816&amp;x-signature=6xepqiou8BI1cC%2BeI415df4lv6k%3D" alt="QQæˆªå›¾20251221215352" loading="lazy"/></p>
<p>æ­£æ–‡é¡µï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8125a12ed4494349a2d9b7512c818e2c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I2J5qKF5Y-L5LuB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766975816&amp;x-signature=8Owmewzz9YYyhjP9G3eH6ZshiQc%3D" alt="QQæˆªå›¾20251221221235" loading="lazy"/></p>
<p>ç™»å½•æ³¨å†Œé¡µï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0c56beac9cb4452ebbe51daa3127b4ba~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I2J5qKF5Y-L5LuB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766975816&amp;x-signature=DPa1Iy6Q%2F3bsTY6VwW8fursb%2B3s%3D" alt="QQæˆªå›¾20251221215644" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/75e5b62491d04edf8daa3ad2bbaec282~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I2J5qKF5Y-L5LuB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766975816&amp;x-signature=LGGQabNewYWCB7CyFN5gW%2FZpg1s%3D" alt="QQæˆªå›¾20251221215658" loading="lazy"/></p>
<p>å›½é™…åŒ–æ¼”ç¤ºï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/81f1cad24e144ca79f7cff3b25cebd4f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I2J5qKF5Y-L5LuB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766975816&amp;x-signature=NAxAE6D%2Fi32vBcVotkbGkgkuGI8%3D" alt="QQæˆªå›¾20251221215127" loading="lazy"/></p>
<p>æš—è‰²æ¨¡å¼æ¼”ç¤ºï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bd3c3999ec204f5ab8f7ee83fa7bf029~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I2J5qKF5Y-L5LuB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766975816&amp;x-signature=57wBOeywHbZBIjgBR5sqdxbrdmg%3D" alt="QQæˆªå›¾20251221215117" loading="lazy"/></p>
<p>å½“ç„¶ï¼Œç›®å‰å¢¨æ¢…åšå®¢è¿˜æœ‰å¾ˆå¤šéœ€è¦æ‰“ç£¨çš„ç»†èŠ‚ï¼Œé¡µé¢å’ŒåŠŸèƒ½ä¸Šä¹Ÿè¿˜ä¸å®Œå–„ï¼Œå¦‚æœ‰ä»»ä½•æ„è§å’Œå»ºè®®ï¼Œéƒ½å¯ä»¥åœ¨é¡¹ç›®çš„  <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FCaoMeiYouRen%2Fmomei%2Fissues" target="_blank" title="https://github.com/CaoMeiYouRen/momei/issues" ref="nofollow noopener noreferrer">GitHub issues</a> ä¸­æå‡ºã€‚</p>
<blockquote>
<p>å¢¨æ¢…åšå®¢çš„ demo ç«™ä¹Ÿä¼šåœ¨åç»­éƒ¨ç½²ã€‚</p>
</blockquote>
<p>å¦‚æœä½ ä¹Ÿå¯¹å¢¨æ¢…åšå®¢æ„Ÿå…´è¶£ï¼Œæ¬¢è¿å‚ä¸å¼€å‘å’Œæµ‹è¯•ã€‚</p>
<hr/>
<p>æœ¬å‘¨ä¾æ—§åœ¨å¼€å‘ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FCaoMeiYouRen%2Fcaomei-auth" target="_blank" title="https://github.com/CaoMeiYouRen/caomei-auth" ref="nofollow noopener noreferrer">è‰æ¢… Auth</a> ä¸­ã€‚</p>
<blockquote>
<p>ä½ ä¹Ÿå¯ä»¥ç›´æ¥è®¿é—®å®˜ç½‘åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fauth.cmyr.dev%2F" target="_blank" title="https://auth.cmyr.dev/" ref="nofollow noopener noreferrer">auth.cmyr.dev/</a>
Demo ç«™ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fauth-demo.cmyr.dev%2F" target="_blank" title="https://auth-demo.cmyr.dev/" ref="nofollow noopener noreferrer">auth-demo.cmyr.dev/</a>
æ–‡æ¡£åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fauth-docs.cmyr.dev%2F" target="_blank" title="https://auth-docs.cmyr.dev/" ref="nofollow noopener noreferrer">auth-docs.cmyr.dev/</a></p>
</blockquote>
<p>æœ¬å‘¨ è‰æ¢… Auth å‘å¸ƒäº† <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FCaoMeiYouRen%2Fcaomei-auth%2Freleases%2Ftag%2Fv1.12.1" target="_blank" title="https://github.com/CaoMeiYouRen/caomei-auth/releases/tag/v1.12.1" ref="nofollow noopener noreferrer">1.12.1</a> ç‰ˆæœ¬ã€‚</p>
<p>æœ¬å‘¨ä¸»è¦æ˜¯è¿›è¡Œäº† BUG ä¿®å¤ï¼Œä»¥åŠæ›¿æ¢ sqlite3 çš„æ•°æ®åº“é©±åŠ¨ä¸º better-sqlite3ï¼Œä»¥æ”¯æŒæ–°ç‰ˆç‰ˆæœ¬çš„ Node.js</p>
<p>å¦‚æœä½ å¯¹è‰æ¢… Auth æ„Ÿå…´è¶£ï¼Œæ¬¢è¿å‚ä¸å¼€å‘å’Œæµ‹è¯•ã€‚</p>
<h2 data-id="heading-1">GitHub Release</h2>
<h3 data-id="heading-2">caomei-auth</h3>
<h4 data-id="heading-3"><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FCaoMeiYouRen%2Fcaomei-auth%2Freleases%2Ftag%2Fv1.12.1" target="_blank" title="https://github.com/CaoMeiYouRen/caomei-auth/releases/tag/v1.12.1" ref="nofollow noopener noreferrer">v1.12.1</a> - 2025-12-20 20:14:35</h4>
<p>æ‘˜è¦:
ç‰ˆæœ¬ 1.12.1 (2025-12-20) æ‘˜è¦ï¼š</p>
<p>Bug ä¿®å¤ï¼š</p>
<ol>
<li>ä¿®æ­£äº† revokeConsentSchema ä¸­ clientId çš„é”™è¯¯æç¤ºä¿¡æ¯æ ¼å¼é—®é¢˜</li>
<li>æ–°å¢ secureRandom å‡½æ•°ä»¥æé«˜éšæœºæ•°ç”Ÿæˆçš„å®‰å…¨æ€§</li>
<li>å°†æ•°æ®åº“é©±åŠ¨æ›´æ–°ä¸º better-sqlite3ï¼Œå¹¶ç›¸åº”è°ƒæ•´äº†é…ç½®</li>
</ol>
<h3 data-id="heading-4">cmyr-template-cli</h3>
<h4 data-id="heading-5"><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FCaoMeiYouRen%2Fcmyr-template-cli%2Freleases%2Ftag%2Fv1.43.0" target="_blank" title="https://github.com/CaoMeiYouRen/cmyr-template-cli/releases/tag/v1.43.0" ref="nofollow noopener noreferrer">v1.43.0</a> - 2025-12-18 21:15:33</h4>
<p>æ‘˜è¦:
ç‰ˆæœ¬ 1.43.0 æ›´æ–°æ‘˜è¦ï¼š</p>
<p>æ–°åŠŸèƒ½ï¼š</p>
<ul>
<li>æ–°å¢æ”¯æŒåˆ›å»º GitHub ä»“åº“åˆ†æ”¯ä¿æŠ¤è§„åˆ™çš„åŠŸèƒ½</li>
</ul>
<p>Bug ä¿®å¤ï¼š</p>
<ul>
<li>ç§»é™¤äº† catch å—ä¸­çš„é”™è¯¯å‚æ•°ï¼Œç®€åŒ–äº†é”™è¯¯å¤„ç†æµç¨‹</li>
</ul>
<h2 data-id="heading-6">æœ€æ–° GitHub åŠ æ˜Ÿä»“åº“</h2>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fhinesboy%2FmavonEditor" target="_blank" title="https://github.com/hinesboy/mavonEditor" ref="nofollow noopener noreferrer">CaoMeiYouRen starred mavonEditor</a> - 2025-12-20 23:26:42
åŸºäº Vue çš„ Markdown ç¼–è¾‘å™¨ï¼Œæ”¯æŒå¤šç§ä¸ªæ€§åŒ–åŠŸèƒ½ã€‚ä¸»è¦å¼€å‘è¯­è¨€ä¸º Vueï¼Œè·å¾— 6581 ä¸ªæ˜Ÿæ ‡ã€‚</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FAyayaXiaowang%2FAyaya_Miliastra_Editor" target="_blank" title="https://github.com/AyayaXiaowang/Ayaya_Miliastra_Editor" ref="nofollow noopener noreferrer">CaoMeiYouRen starred Ayaya_Miliastra_Editor</a> - 2025-12-19 21:49:47
æ”¯æŒä½¿ç”¨ Python ä»£ç æè¿°èŠ‚ç‚¹å›¾ï¼Œç³»ç»Ÿå†…ç½®å¼•æ“å¯è§£æéªŒè¯å¹¶è‡ªåŠ¨æ’ç‰ˆï¼Œç»“åˆè‡ªåŠ¨åŒ–è„šæœ¬å°†æ­¥éª¤ç²¾å‡†æ˜ å°„åˆ°å®é™…ç¼–è¾‘å™¨ã€‚ä¸»è¦å¼€å‘è¯­è¨€ä¸º Pythonï¼Œé¡¹ç›®è·å¾— 149 ä¸ªæ˜Ÿæ ‡ã€‚</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fgo-gitea%2Fgitea" target="_blank" title="https://github.com/go-gitea/gitea" ref="nofollow noopener noreferrer">CaoMeiYouRen starred gitea</a> - 2025-12-18 21:19:11
åŸºäº Go è¯­è¨€å¼€å‘çš„ä¸€ä½“åŒ–è½¯ä»¶å¼€å‘æœåŠ¡å¹³å°ï¼Œæä¾› Git æ‰˜ç®¡ã€ä»£ç å®¡æŸ¥ã€å›¢é˜Ÿåä½œã€åŒ…æ³¨å†Œè¡¨å’Œ CI/CD åŠŸèƒ½ã€‚è¯¥å¹³å°é‡‡ç”¨è‡ªæ‰˜ç®¡æ–¹å¼ï¼Œè®¾è®¡ç†å¿µå¼ºè°ƒç®€å•æ˜“ç”¨ï¼Œç›®å‰å·²åœ¨ GitHub è·å¾—è¶…è¿‡ 52,000 é¢—æ˜Ÿæ ‡ã€‚</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FheyManNice%2Fbili-cured-my-neck-pain" target="_blank" title="https://github.com/heyManNice/bili-cured-my-neck-pain" ref="nofollow noopener noreferrer">CaoMeiYouRen starred bili-cured-my-neck-pain</a> - 2025-12-15 17:34:52
B ç«™ PC ç½‘é¡µç‰ˆæ–°å¢è§†é¢‘æ—‹è½¬å’Œç¼©æ”¾åŠŸèƒ½ï¼Œä½¿ç”¨ TypeScript å¼€å‘ã€‚è¯¥é¡¹ç›®å·²è·å¾— 52 ä¸ªæ˜Ÿæ ‡ã€‚</li>
</ul>
<h2 data-id="heading-7">å…¶ä»–åšå®¢æˆ–å‘¨åˆŠæ¨è</h2>
<h3 data-id="heading-8">é˜®ä¸€å³°çš„ç½‘ç»œæ—¥å¿—</h3>
<ul>
<li><a href="https://link.juejin.cn?target=http%3A%2F%2Fwww.ruanyifeng.com%2Fblog%2F2025%2F12%2Fweekly-issue-378.html" target="_blank" title="http://www.ruanyifeng.com/blog/2025/12/weekly-issue-378.html" ref="nofollow noopener noreferrer">ç§‘æŠ€çˆ±å¥½è€…å‘¨åˆŠï¼ˆç¬¬ 378 æœŸï¼‰ï¼šé¢„æµ‹æ˜¯æ–°çš„äº’è”ç½‘çƒ­ç‚¹</a> - 2025-12-19 08:06:47</li>
</ul>
<h3 data-id="heading-9">é˜¿çŒ«çš„åšå®¢</h3>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fameow.xyz%2Farchives%2Fweekly-089" target="_blank" title="https://ameow.xyz/archives/weekly-089" ref="nofollow noopener noreferrer">çŒ«é±¼å‘¨åˆŠ vol. 089 Vibe Engineering</a> - 2025-12-21 20:21:28</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fameow.xyz%2Farchives%2Fweekly-088" target="_blank" title="https://ameow.xyz/archives/weekly-088" ref="nofollow noopener noreferrer">çŒ«é±¼å‘¨åˆŠ vol. 088 ä¸¤ä¸ª Linus çš„å²è¯—çº§ä¼šé¢</a> - 2025-12-14 23:25:30</li>
</ul>
<h3 data-id="heading-10">æ½®æµå‘¨åˆŠ</h3>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fweekly.tw93.fun%2Fposts%2F250%2F" target="_blank" title="https://weekly.tw93.fun/posts/250/" ref="nofollow noopener noreferrer">ç¬¬ 250 æœŸ - åŒ—äº¬çš„å†¬</a> - 2025-12-22 08:00:00</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fweekly.tw93.fun%2Fposts%2F249%2F" target="_blank" title="https://weekly.tw93.fun/posts/249/" ref="nofollow noopener noreferrer">ç¬¬ 249 æœŸ - ç¾æ´²çº¢é¹®</a> - 2025-12-15 08:00:00</li>
</ul>
<h2 data-id="heading-11">æ€»ç»“</h2>
<p>æœ¬å‘¨çš„æ›´æ–°å’ŒåŠ¨æ€å¦‚ä¸Šæ‰€ç¤ºã€‚æ„Ÿè°¢æ‚¨çš„é˜…è¯»ï¼
æ‚¨å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼è®¢é˜…è‰æ¢…å‘¨æŠ¥çš„æ›´æ–°ï¼š</p>
<ul>
<li><strong>åšå®¢</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmyr.ltd" target="_blank" title="https://blog.cmyr.ltd" ref="nofollow noopener noreferrer">è‰æ¢…å‹ä»çš„åšå®¢</a></li>
<li><strong>å¢¨æ¢…åšå®¢</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmomei.app" target="_blank" title="https://momei.app" ref="nofollow noopener noreferrer">å¢¨æ¢…åšå®¢</a></li>
<li><strong>RSS</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmyr.ltd%2Fweekly.xml" target="_blank" title="https://blog.cmyr.ltd/weekly.xml" ref="nofollow noopener noreferrer">è‰æ¢…å‘¨æŠ¥</a></li>
<li><strong>å…¬ä¼—å·</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Foss.cmyr.dev%2Fimages%2F20241025184516839-21n2ctv.png" target="_blank" title="https://oss.cmyr.dev/images/20241025184516839-21n2ctv.png" ref="nofollow noopener noreferrer">è‰æ¢…å‹ä»çš„åèŠ±å›­</a></li>
<li><strong>é‚®ç®±è®¢é˜…</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Flistmonk.cmyr.dev%2Fsubscription%2Fform" target="_blank" title="https://listmonk.cmyr.dev/subscription/form" ref="nofollow noopener noreferrer">è‰æ¢…å‹ä»çš„åšå®¢è®¢é˜…</a></li>
</ul>
<h2 data-id="heading-12">å¾€æœŸå›é¡¾</h2>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmyr.ltd%2Farchives%2F2025-50-caomei-weekly-caomei-auth-1-12-0-momei-blog.html" target="_blank" title="https://blog.cmyr.ltd/archives/2025-50-caomei-weekly-caomei-auth-1-12-0-momei-blog.html" ref="nofollow noopener noreferrer">è‰æ¢… Auth 1.12.0 å‘å¸ƒä¸å¢¨æ¢…åšå®¢ç«‹é¡¹ç»éªŒ | 2025 å¹´ç¬¬ 50 å‘¨è‰æ¢…å‘¨æŠ¥</a> - 2025-12-14 20:25:28</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmyr.ltd%2Farchives%2F2025-49-caomei-weekly-caomei-auth-1-11-1-release-and-ai-refactoring.html" target="_blank" title="https://blog.cmyr.ltd/archives/2025-49-caomei-weekly-caomei-auth-1-11-1-release-and-ai-refactoring.html" ref="nofollow noopener noreferrer">è‰æ¢… Auth 1.11.1 ç‰ˆæœ¬å‘å¸ƒä¸ AI è¾…åŠ©ä»£ç é‡æ„å®è·µ | 2025 å¹´ç¬¬ 49 å‘¨è‰æ¢…å‘¨æŠ¥</a> - 2025-12-07 20:10:31</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmyr.ltd%2Farchives%2F2025-48-caomei-weekly-nano-banana-pro-ai-image-generation.html" target="_blank" title="https://blog.cmyr.ltd/archives/2025-48-caomei-weekly-nano-banana-pro-ai-image-generation.html" ref="nofollow noopener noreferrer">Nano Banana Pro AI å›¾åƒç”Ÿæˆæ¨¡å‹ä¸åˆ›æ„å®è·µ | 2025 å¹´ç¬¬ 48 å‘¨è‰æ¢…å‘¨æŠ¥</a> - 2025-11-30 20:30:59</li>
</ul>
<p>æœ¬æ–‡ä½œè€…ï¼šè‰æ¢…å‹ä»<br/>æœ¬æ–‡åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmyr.ltd%2Farchives%2F2025-51-caomei-weekly-momei-blog-mvp-caomei-auth-update.html" target="_blank" title="https://blog.cmyr.ltd/archives/2025-51-caomei-weekly-momei-blog-mvp-caomei-auth-update.html" ref="nofollow noopener noreferrer">blog.cmyr.ltd/archives/20â€¦</a><br/>ç‰ˆæƒå£°æ˜ï¼šæœ¬æ–‡é‡‡ç”¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fcreativecommons.org%2Flicenses%2Fby-nc-sa%2F4.0%2Fdeed.zh-hans" target="_blank" title="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh-hans" ref="nofollow noopener noreferrer">CC BY-NC-SA 4.0 åè®®</a> è¿›è¡Œåˆ†å‘ï¼Œè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼<br/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ— äººæœºä½ç©ºè§†è§‰æ•°æ®é›†å…¨æ™¯è§£è¯»ï¼šä»å•æœºæ„ŸçŸ¥åˆ°å…·èº«æ™ºèƒ½çš„è·¨è¶Š]]></title>    <link>https://juejin.cn/post/7585929179319566371</link>    <guid>https://juejin.cn/post/7585929179319566371</guid>    <pubDate>2025-12-22T02:48:20.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7585929179319566371" data-draft-id="7585850609017061391" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ— äººæœºä½ç©ºè§†è§‰æ•°æ®é›†å…¨æ™¯è§£è¯»ï¼šä»å•æœºæ„ŸçŸ¥åˆ°å…·èº«æ™ºèƒ½çš„è·¨è¶Š"/> <meta itemprop="keywords" content="ç®—æ³•,æ·±åº¦å­¦ä¹ ,è®¡ç®—æœºè§†è§‰"/> <meta itemprop="datePublished" content="2025-12-22T02:48:20.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="CoovallyAIHub"/> <meta itemprop="url" content="https://juejin.cn/user/2461151071843739"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ— äººæœºä½ç©ºè§†è§‰æ•°æ®é›†å…¨æ™¯è§£è¯»ï¼šä»å•æœºæ„ŸçŸ¥åˆ°å…·èº«æ™ºèƒ½çš„è·¨è¶Š
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2461151071843739/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    CoovallyAIHub
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-22T02:48:20.000Z" title="Mon Dec 22 2025 02:48:20 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¹´æ¥ï¼Œéšç€æ— äººæœºæŠ€æœ¯çš„å¿«é€Ÿå‘å±•å’Œä½ç©ºç»æµæ”¿ç­–çš„æ¨è¿›ï¼Œæ— äººæœºåœ¨æ™ºæ…§åŸå¸‚ã€äº¤é€šå·¡æ£€ã€åº”æ€¥æ•‘æ´ç­‰é¢†åŸŸçš„åº”ç”¨æ—¥ç›Šå¹¿æ³›ã€‚ç„¶è€Œï¼Œæ— äººæœºçš„æ™ºèƒ½åŒ–ç¦»ä¸å¼€é«˜è´¨é‡è§†è§‰æ•°æ®çš„æ”¯æŒã€‚é‚£ä¹ˆï¼Œå½“å‰æœ‰å“ªäº›å…¬å¼€çš„ä½ç©ºè§†è§‰æ•°æ®é›†ï¼Ÿå®ƒä»¬åˆå¦‚ä½•åˆ†ç±»ã€æœ‰ä½•ç‰¹ç‚¹ï¼Ÿæœªæ¥åˆå°†å¦‚ä½•å‘å±•ï¼Ÿ</p>
<p>æœ¬æ–‡ç³»ç»Ÿæ¢³ç†è¿‘11å¹´æ¥ä½ç©ºæ— äººæœºè§†è§‰æ•°æ®é›†çš„å‘å±•è„‰ç»œï¼Œä¸ºç ”ç©¶äººå‘˜ä¸åº”ç”¨å¼€å‘è€…æä¾›æ¸…æ™°çš„è®¤çŸ¥æ¡†æ¶ä¸å®è·µå‚è€ƒã€‚</p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c079482600534650af9b9e45b287c3e5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766976500&amp;x-signature=u%2BUK0w5drpVvrWJrxYLVYm0yMaQ%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h2 data-id="heading-0"><strong>ç©ºè§†è§‰æ•°æ®é›†ï¼šä¸ºä»€ä¹ˆå¦‚æ­¤é‡è¦ï¼Ÿ</strong></h2>
<p>ä½ç©ºè§†è§‰æ„ŸçŸ¥æ˜¯æ— äººæœºè·å–ç¯å¢ƒä¿¡æ¯ã€å®ç°è‡ªä¸»å†³ç­–çš„å…³é”®æŠ€æœ¯ã€‚æ— è®ºæ˜¯ç›®æ ‡æ£€æµ‹ã€è·Ÿè¸ªã€è¯­ä¹‰åˆ†å‰²ï¼Œè¿˜æ˜¯æ— äººæœºè‡ªä¸»å¯¼èˆªä¸ååŒä½œä¸šï¼Œéƒ½ç¦»ä¸å¼€å¤§é‡é«˜è´¨é‡ã€å¤šæ ·åŒ–çš„æ ‡æ³¨æ•°æ®ã€‚</p>
<p>å…¬å¼€æ•°æ®é›†çš„å‘å¸ƒï¼Œä¸ä»…æ¨åŠ¨äº†ç®—æ³•ç ”ç©¶çš„æ ‡å‡†åŒ–ï¼Œä¹Ÿé™ä½äº†ç ”ç©¶é—¨æ§›ï¼ŒåŠ é€Ÿäº†æŠ€æœ¯è½åœ°ã€‚ç„¶è€Œï¼Œéšç€ä»»åŠ¡å¤æ‚åŒ–å’Œåœºæ™¯å¤šå…ƒåŒ–ï¼Œå•ä¸€ç±»å‹çš„æ•°æ®å·²éš¾ä»¥æ»¡è¶³éœ€æ±‚ã€‚å› æ­¤ï¼Œç³»ç»Ÿæ¢³ç†ç°æœ‰æ•°æ®é›†ï¼Œæ˜ç¡®å…¶ç‰¹ç‚¹ä¸é€‚ç”¨åœºæ™¯ï¼Œæ˜¾å¾—å°¤ä¸ºé‡è¦ã€‚</p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/96a2dcc979784b63880900a49611a8fc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766976500&amp;x-signature=WtvSuidyXXrFDsDG2Dx0IDac7j0%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h2 data-id="heading-1"><strong>äº”å¤§ç»´åº¦è§£æä½ç©ºè§†è§‰æ•°æ®é›†</strong></h2>
<p>è®ºæ–‡æå‡ºäº†ä¸€å¥—åŸºäºè®¾å¤‡ç±»å‹ã€ä»»åŠ¡éœ€æ±‚ã€æ¨¡æ€ç±»å‹ã€ç¯å¢ƒç‰¹æ€§ã€åº”ç”¨éœ€æ±‚äº”å¤§æ–¹å‘çš„åˆ†ç±»ä½“ç³»ï¼Œå…¨é¢è¦†ç›–ä½ç©ºè§†è§‰æ•°æ®é›†çš„æ„å»ºé€»è¾‘ä¸åº”ç”¨åœºæ™¯ã€‚</p>
<ul>
<li><strong>è®¾å¤‡ç±»å‹ï¼šå•æœº vs å¤šæœº</strong></li>
</ul>

<ul>
<li>å•æœºæ•°æ®é›†ï¼šç”±å•ä¸€æ— äººæœºé‡‡é›†ï¼Œè§†è§’å›ºå®šï¼Œé€‚ç”¨äºç‰¹å®šåœºæ™¯ä¸‹çš„ç›®æ ‡æ£€æµ‹ã€è·Ÿè¸ªç­‰ä»»åŠ¡ã€‚ä»£è¡¨æ•°æ®é›†åŒ…æ‹¬VisDroneã€UAV123ã€AnimalDroneç­‰ã€‚</li>
</ul>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a2cebeed6c9c46bea3dcd79cd2d562d4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766976500&amp;x-signature=TJOwlAQdm8Q26jx0%2BJU%2BXEQVJgQ%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<ul>
<li>å¤šæœºååŒæ•°æ®é›†ï¼šç”±å¤šæ¶æ— äººæœºååŒé‡‡é›†ï¼Œè¦†ç›–å¤šè§†è§’ã€è·¨åœºæ™¯ï¼Œé€‚ç”¨äºç«‹ä½“å®‰é˜²ã€å¹¿åŸŸç›‘æµ‹ç­‰é«˜å¯é æ€§ä»»åŠ¡ã€‚ä»£è¡¨æ•°æ®é›†æœ‰MDOTã€CoPerception-UAVsã€MAVRECç­‰ã€‚</li>
</ul>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/53671fadf524442caf1c932f1a110b45~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766976500&amp;x-signature=Vti6kTZTTvETmkM5Y1an7OgWXw0%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å±•ç¤ºäº†DOTAã€SDDã€DroneVehicleç­‰æ•°æ®é›†çš„å…¸å‹å›¾åƒï¼Œæ¶µç›–ç™½å¤©ä¸å¤œé—´åœºæ™¯ã€‚</p>
<ul>
<li><strong>ä»»åŠ¡éœ€æ±‚ï¼šå•ä»»åŠ¡ vs å¤šä»»åŠ¡</strong></li>
</ul>

<ul>
<li>å•ä¸€ä»»åŠ¡æ•°æ®é›†ï¼šä¸“æ³¨å¦‚è½¦è¾†æ£€æµ‹ã€è¡Œäººè·Ÿè¸ªç­‰å•ä¸€ä»»åŠ¡ï¼Œæ ‡æ³¨ç²’åº¦é›†ä¸­ã€‚å¦‚VEDAIã€COWCç­‰ã€‚</li>
<li>å¤šä»»åŠ¡æ•°æ®é›†ï¼šæ”¯æŒç›®æ ‡æ£€æµ‹ã€è·Ÿè¸ªã€è®¡æ•°ã€è¡Œä¸ºåˆ†æç­‰å¤šä¸ªä»»åŠ¡ï¼Œæ ‡æ³¨ä¿¡æ¯æ›´ä¸°å¯Œã€‚å¦‚VisDroneã€DroneCrowdã€UAV-Humanç­‰ã€‚</li>
</ul>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/74dfdb8e72854a8c956400a3bf294b3b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766976500&amp;x-signature=IqDqoPbsqlYS%2Bfz5HUdATL7WnIo%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<ul>
<li><strong>æ¨¡æ€ç±»å‹ï¼šå•æº vs å¤šæº</strong></li>
</ul>

<ul>
<li>å•æºæ•°æ®é›†ï¼šä»…åŒ…å«å¯è§å…‰æˆ–çº¢å¤–ç­‰å•ä¸€æ¨¡æ€æ•°æ®ï¼Œé€‚ç”¨äºå¸¸è§„åœºæ™¯ã€‚</li>
<li>å¤šæºæ•°æ®é›†ï¼šèåˆå¯è§å…‰ã€çº¢å¤–ã€æ·±åº¦ã€LiDARç­‰å¤šç§ä¼ æ„Ÿå™¨æ•°æ®ï¼Œæå‡åœ¨å¤œé—´ã€é®æŒ¡ç­‰å¤æ‚åœºæ™¯ä¸‹çš„æ„ŸçŸ¥é²æ£’æ€§ã€‚ä»£è¡¨æ•°æ®é›†åŒ…æ‹¬DroneVehicleã€DroneRGBTã€UAV-Humanç­‰ã€‚</li>
</ul>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1e97660cf247415cab3a87e409c99463~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766976500&amp;x-signature=Fek%2FAIc947TKmcf8lLo%2F7VA3NsM%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å±•ç¤ºäº†DroneVehicleã€FIReStereoã€SynDroneç­‰å¤šæºæ•°æ®çš„èåˆç¤ºä¾‹ã€‚</p>
<ul>
<li><strong>ç¯å¢ƒç‰¹æ€§ï¼šå¤æ‚åœºæ™¯ä¸‹çš„æ•°æ®æŒ‘æˆ˜</strong></li>
</ul>
<p>å¤æ‚ç¯å¢ƒæ•°æ®é›†æ¶µç›–é›¾å¤©ã€é›¨å¤©ã€è¿åŠ¨æ¨¡ç³Šã€ä½å…‰ç…§ç­‰æ¶åŠ£æ¡ä»¶ï¼Œç”¨äºæå‡æ¨¡å‹åœ¨çœŸå®åœºæ™¯ä¸­çš„é²æ£’æ€§ã€‚ä»£è¡¨æ•°æ®é›†æœ‰HazyDetã€UAVDTã€UAV-AWIDç­‰ã€‚</p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/464cf1f3469348299840fa3965d78c3d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766976500&amp;x-signature=3Kpmb98F0S3zvTUkZZ5BIVUMRag%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å±•ç¤ºäº†é›¾å¤©ã€é›¨å¤©ã€è¿åŠ¨æ¨¡ç³Šç­‰å¤æ‚åœºæ™¯ä¸‹çš„å›¾åƒç¤ºä¾‹ã€‚</p>
<ul>
<li><strong>åº”ç”¨éœ€æ±‚ï¼šè§†è§‰æ„ŸçŸ¥ vs å…·èº«æ™ºèƒ½</strong></li>
</ul>

<ul>
<li>è§†è§‰æ„ŸçŸ¥æ•°æ®é›†ï¼šä¾§é‡äºç›®æ ‡è¯†åˆ«ä¸ç¯å¢ƒç†è§£ã€‚</li>
<li>å…·èº«æ™ºèƒ½æ•°æ®é›†ï¼šèåˆæ— äººæœºçŠ¶æ€ã€ç¯å¢ƒè¯­ä¹‰ä¸ä»»åŠ¡æŒ‡ä»¤ï¼Œæ”¯æŒè‡ªä¸»å¯¼èˆªä¸å†³ç­–ã€‚å¦‚CityNavã€AeroVerseã€OpenUAVç­‰ã€‚</li>
</ul>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c63a0a4e6f8244eb804108872c6134c2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766976500&amp;x-signature=lwRnnTxDBM0lm7oHMW3Sb5hLqYI%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å±•ç¤ºåŸºäºè¯­è¨€æŒ‡ä»¤çš„æ— äººæœºç›®æ ‡å¯¼èˆªä»»åŠ¡åœºæ™¯ã€‚</p>
<h2 data-id="heading-2"><strong>å…¸å‹æ•°æ®é›†æ·±åº¦è§£æ</strong></h2>
<p>è®ºæ–‡å¯¹å„ç±»åˆ«ä¸­çš„å…¸å‹æ•°æ®é›†è¿›è¡Œäº†è¯¦ç»†åˆ†æï¼Œæ¶µç›–æ•°æ®è§„æ¨¡ã€æ ‡æ³¨ç‰¹ç‚¹ã€é€‚ç”¨ä»»åŠ¡ç­‰å…³é”®ä¿¡æ¯ã€‚</p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dbe0b2abdce34b9fa4908ecf07a75da4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766976500&amp;x-signature=x6fh5X%2BXuKNTTqrPoN8J2jZkXK4%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fbd72fb0602b4441a55c6385cf6fc430~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766976500&amp;x-signature=pxhbdF3btwymFPs0qvidJxAxUFw%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9d7e8d92f62a424abeb26343c5cd2e1b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766976500&amp;x-signature=xRyKWKejEy4brgAYPwyJ0P3%2BtAw%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/11ea8687d097455482bd56695bf78c5c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766976500&amp;x-signature=4iY8qCae3y7X04sKeduhY8M%2F374%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/241e0c5994354a97ad816ba1810e8be4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766976500&amp;x-signature=jNunAMsSPRoytRSuNXwP%2FFour3c%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d605b56a772347e4b986b7adb44c8840~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766976500&amp;x-signature=ZO2XF56iVE5uCFAdE4YHsDQDPoo%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<ul>
<li><strong>å•æœºæ•°æ®é›†ä»£è¡¨ï¼šVisDrone</strong></li>
</ul>
<p>å‘å¸ƒå¹´ä»½ï¼š2018</p>
<p>æ•°æ®é‡ï¼šè¶…2000ä¸‡å¼ å›¾åƒ</p>
<p>ç‰¹ç‚¹ï¼šè¦†ç›–14ä¸ªä¸­å›½åŸå¸‚ã€å¤šç§å¤©æ°”ä¸å…‰ç…§æ¡ä»¶ï¼Œæ”¯æŒæ£€æµ‹ã€è·Ÿè¸ªã€è®¡æ•°ç­‰å¤šä»»åŠ¡ã€‚</p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/661f31660cca41188275e0d77cbd73ed~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766976500&amp;x-signature=qz5UuYSPnx8HIqdGwDa8x0h%2FDUs%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<ul>
<li><strong>å¤šæœºååŒæ•°æ®é›†ä»£è¡¨ï¼šMDOT</strong></li>
</ul>
<p>å‘å¸ƒå¹´ä»½ï¼š2021</p>
<p>ç‰¹ç‚¹ï¼šåŒ…å«åŒæœºä¸ä¸‰æœºååŒæ•°æ®ï¼Œæ ‡æ³¨10ç§åœºæ™¯å±æ€§ï¼Œæ”¯æŒå¤šè§†è§’ç›®æ ‡è·Ÿè¸ªã€‚</p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4a13f807f76a4717bf8167771f9eddcb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766976500&amp;x-signature=L7mrcB37a3PigqGwE3nnuUWZLZc%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<ul>
<li><strong>å¤šä»»åŠ¡æ•°æ®é›†ä»£è¡¨ï¼šDroneCrowd</strong></li>
</ul>
<p>å‘å¸ƒå¹´ä»½ï¼š2021</p>
<p>ç‰¹ç‚¹ï¼šä¸“æ³¨äºæ— äººæœºè§†è§’ä¸‹çš„äººç¾¤å¯†åº¦ä¼°è®¡ä¸è¡Œä¸ºåˆ†æï¼Œæ ‡æ³¨480ä¸‡ä¸ªå¤´éƒ¨ä½ç½®ã€‚</p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2ba8b3bf4fa647b9aeba5250ac0df997~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766976500&amp;x-signature=dCCftwUsSR9vgFSRqMI3ei9y3Qk%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<ul>
<li><strong>å¤šæºæ•°æ®é›†ä»£è¡¨ï¼šDroneVehicle</strong></li>
</ul>
<p>å‘å¸ƒå¹´ä»½ï¼š2020</p>
<p>ç‰¹ç‚¹ï¼šåŒ…å«2.8ä¸‡å¯¹RGB-çº¢å¤–å›¾åƒï¼Œæ”¯æŒè·¨æ¨¡æ€è½¦è¾†æ£€æµ‹ï¼Œæå‡å…¨å¤©å€™æ„ŸçŸ¥èƒ½åŠ›ã€‚</p>
<ul>
<li><strong>å…·èº«æ™ºèƒ½æ•°æ®é›†ä»£è¡¨ï¼šAeroVerse</strong></li>
</ul>
<p>å‘å¸ƒå¹´ä»½ï¼š2024</p>
<p>ç‰¹ç‚¹ï¼šèåˆè§†è§‰ã€è¯­è¨€ä¸å¯¼èˆªæŒ‡ä»¤ï¼Œæ”¯æŒæ— äººæœºåœ¨å¤æ‚åŸå¸‚åœºæ™¯ä¸­çš„è¯­ä¹‰å¯¼èˆªä¸ä»»åŠ¡è§„åˆ’ã€‚</p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4cf64aea48854bdfb0cddcb7dd333d22~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766976500&amp;x-signature=UTZDUEDJXK%2FkLFces7sj%2BKdQrV0%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h2 data-id="heading-3"><strong>ç°çŠ¶æ€»ç»“ä¸æœªæ¥å±•æœ›</strong></h2>
<p>å½“å‰è¿›å±•ï¼š</p>
<p>æ•°æ®é›†ä½“ç³»åˆæ­¥å½¢æˆï¼Œè¦†ç›–å•æœºã€å¤šæœºã€å¤šä»»åŠ¡ã€å¤šæºç­‰å¤šä¸ªç»´åº¦ã€‚</p>
<p>æ•°æ®è§„æ¨¡ä¸è´¨é‡æ˜¾è‘—æå‡ï¼Œæ¨åŠ¨äº†æ„ŸçŸ¥ç®—æ³•æ€§èƒ½çš„è¿›æ­¥ã€‚</p>
<p>ä»å­˜æŒ‘æˆ˜ï¼š</p>
<p>æ ‡æ³¨æˆæœ¬é«˜ã€æ•ˆç‡ä½ï¼šå°¤å…¶åœ¨å¤šä»»åŠ¡ã€å¤šæºåœºæ™¯ä¸‹ï¼Œäººå·¥æ ‡æ³¨ä»å ä¸»å¯¼ã€‚</p>
<p>å¤šæºæ•°æ®å¯¹é½éš¾ï¼šä¸åŒæ¨¡æ€æ•°æ®ä¹‹é—´å­˜åœ¨æ—¶ç©ºåŒæ­¥è¯¯å·®ã€‚</p>
<p>æç«¯ç¯å¢ƒæ•°æ®ç¨€ç¼ºï¼šé›¨é›ªã€é›¾éœ¾ç­‰æ¶åŠ£å¤©æ°”æ•°æ®è¦†ç›–ä¸è¶³ã€‚</p>
<p>å…·èº«æ™ºèƒ½æ•°æ®å‰²è£‚ï¼šç¯å¢ƒæ„ŸçŸ¥ä¸æ— äººæœºçŠ¶æ€æ•°æ®ç¼ºä¹æ·±åº¦èåˆã€‚</p>
<p>æœªæ¥å‘å±•æ–¹å‘ï¼š</p>
<p>æå‡æ•°æ®å¤šæ ·æ€§ä¸æ ‡æ³¨æ•ˆç‡ï¼šç»“åˆåˆæˆæ•°æ®ä¸åŠè‡ªåŠ¨æ ‡æ³¨æŠ€æœ¯ã€‚</p>
<p>æ¨åŠ¨å¤šæºæ•°æ®æ ‡å‡†åŒ–ï¼šåˆ¶å®šç»Ÿä¸€çš„å¯¹é½ã€å­˜å‚¨ä¸è¯„ä¼°æ ‡å‡†ã€‚</p>
<p>åŠ å¼ºæç«¯ç¯å¢ƒæ•°æ®å»ºè®¾ï¼šä¸æ°”è±¡éƒ¨é—¨åˆä½œï¼Œæ„å»ºé‡åŒ–æ ‡æ³¨ä½“ç³»ã€‚</p>
<p>æ·±åŒ–å…·èº«æ™ºèƒ½æ•°æ®èåˆï¼šæ„å»ºâ€œç¯å¢ƒ-æœºä½“-ä»»åŠ¡â€ä¸€ä½“åŒ–çš„æ•°æ®é›†æ¡†æ¶ã€‚</p>
<h2 data-id="heading-4"><strong>æ€»ç»“</strong></h2>
<p>ä½ç©ºè§†è§‰æ•°æ®é›†ä½œä¸ºæ— äººæœºæ™ºèƒ½åŒ–çš„åŸºçŸ³ï¼Œæ­£æœç€å¤šæºèåˆã€åŠ¨æ€é€‚åº”ã€è¯­ä¹‰ç†è§£ã€è‡ªä¸»ååŒçš„æ–¹å‘å¿«é€Ÿå‘å±•ã€‚æœªæ¥ï¼Œéšç€ä»¿çœŸæŠ€æœ¯ã€è‡ªåŠ¨åŒ–æ ‡æ³¨ä¸è·¨æ¨¡æ€å­¦ä¹ æ–¹æ³•çš„è¿›æ­¥ï¼Œæˆ‘ä»¬æœ‰æœ›æ„å»ºæ›´æ™ºèƒ½ã€æ›´é²æ£’ã€æ›´è´´è¿‘çœŸå®ä¸–ç•Œçš„ä½ç©ºè§†è§‰æ•°æ®ç”Ÿæ€ç³»ç»Ÿï¼Œèµ‹èƒ½æ— äººæœºåœ¨ç‰©æµã€å®‰é˜²ã€å†œä¸šã€æ•‘æ´ç­‰é¢†åŸŸçš„æ·±å±‚æ¬¡åº”ç”¨ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸€æ–‡è¯»æ‡‚åˆ†å¸ƒå¼äº‹åŠ¡ï¼šæ ¸å¿ƒåŸç†ã€è§£å†³æ–¹æ¡ˆä¸å®è·µæ€è€ƒ]]></title>    <link>https://juejin.cn/post/7586481379590078483</link>    <guid>https://juejin.cn/post/7586481379590078483</guid>    <pubDate>2025-12-22T02:49:43.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7586481379590078483" data-draft-id="7585778343352188991" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸€æ–‡è¯»æ‡‚åˆ†å¸ƒå¼äº‹åŠ¡ï¼šæ ¸å¿ƒåŸç†ã€è§£å†³æ–¹æ¡ˆä¸å®è·µæ€è€ƒ"/> <meta itemprop="keywords" content="åç«¯,åˆ†å¸ƒå¼"/> <meta itemprop="datePublished" content="2025-12-22T02:49:43.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å›å®¶è·¯ä¸Šç»•äº†å¼¯"/> <meta itemprop="url" content="https://juejin.cn/user/536217404587134"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸€æ–‡è¯»æ‡‚åˆ†å¸ƒå¼äº‹åŠ¡ï¼šæ ¸å¿ƒåŸç†ã€è§£å†³æ–¹æ¡ˆä¸å®è·µæ€è€ƒ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/536217404587134/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å›å®¶è·¯ä¸Šç»•äº†å¼¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-22T02:49:43.000Z" title="Mon Dec 22 2025 02:49:43 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€æ–‡è¯»æ‡‚åˆ†å¸ƒå¼äº‹åŠ¡ï¼šæ ¸å¿ƒåŸç†ã€è§£å†³æ–¹æ¡ˆä¸å®è·µæ€è€ƒ</h2>
<p>åœ¨å•ä½“åº”ç”¨æ—¶ä»£ï¼Œæˆ‘ä»¬å¯¹äº‹åŠ¡çš„è®¤çŸ¥å¤§å¤šåœç•™åœ¨â€œACIDâ€å±‚é¢â€”â€”ä¸€ä¸ªæ“ä½œè¦ä¹ˆå…¨æˆï¼Œè¦ä¹ˆå…¨è´¥ï¼Œæ•°æ®åº“æœ¬èº«ï¼ˆå¦‚MySQLçš„InnoDBå¼•æ“ï¼‰å°±èƒ½å¾ˆå¥½åœ°ä¿éšœè¿™ä¸€ç‚¹ã€‚ä½†éšç€ä¸šåŠ¡å‘å±•ï¼Œç³»ç»Ÿæ‹†åˆ†ä¸ºå¾®æœåŠ¡æ¶æ„åï¼Œæ•°æ®è¢«åˆ†æ•£åˆ°ä¸åŒçš„æ•°æ®åº“å®ä¾‹ç”šè‡³ä¸åŒç±»å‹çš„å­˜å‚¨ä¸­é—´ä»¶ä¸­ï¼Œâ€œåˆ†å¸ƒå¼äº‹åŠ¡â€è¿™ä¸ªéš¾é¢˜å°±æ‘†åœ¨äº†æˆ‘ä»¬é¢å‰ã€‚</p>
<p>æ¯”å¦‚ç”µå•†ä¸‹å•åœºæ™¯ï¼šç”¨æˆ·æ”¯ä»˜æˆåŠŸåï¼Œéœ€è¦åŒæ—¶å®Œæˆâ€œæ‰£å‡åº“å­˜â€â€œæ›´æ–°è®¢å•çŠ¶æ€â€â€œå¢åŠ å•†å®¶è´¦æˆ·ä½™é¢â€ä¸‰ä¸ªæ“ä½œï¼Œè¿™ä¸‰ä¸ªæ“ä½œåˆ†åˆ«å¯¹åº”åº“å­˜æœåŠ¡ã€è®¢å•æœåŠ¡ã€è´¦æˆ·æœåŠ¡çš„æ•°æ®åº“ã€‚å¦‚ä½•ä¿è¯è¿™ä¸‰ä¸ªæ“ä½œè¦ä¹ˆå…¨éƒ¨æˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨å›æ»šï¼Ÿè¿™å°±æ˜¯åˆ†å¸ƒå¼äº‹åŠ¡è¦è§£å†³çš„æ ¸å¿ƒé—®é¢˜ã€‚ä»Šå¤©ï¼Œæˆ‘ä»¬å°±ä»åŸºç¡€æ¦‚å¿µå‡ºå‘ï¼Œæ‹†è§£åˆ†å¸ƒå¼äº‹åŠ¡çš„æ ¸å¿ƒæŒ‘æˆ˜ï¼Œæ¢³ç†ä¸»æµè§£å†³æ–¹æ¡ˆï¼Œå¹¶èŠèŠå®é™…è½åœ°ä¸­çš„å–èˆã€‚</p>
<h3 data-id="heading-1">ä¸€ã€åˆ†å¸ƒå¼äº‹åŠ¡çš„æ ¸å¿ƒï¼šä¸ºä»€ä¹ˆå•ä½“äº‹åŠ¡ä¸é€‚ç”¨äº†ï¼Ÿ</h3>
<p>é¦–å…ˆè¦æ˜ç¡®ï¼šåˆ†å¸ƒå¼äº‹åŠ¡çš„æœ¬è´¨æ˜¯â€œè·¨å¤šä¸ªèµ„æºèŠ‚ç‚¹çš„äº‹åŠ¡åè°ƒâ€ï¼Œå…¶æ ¸å¿ƒç›®æ ‡ä¾ç„¶æ˜¯ä¿éšœæ•°æ®çš„ä¸€è‡´æ€§ï¼Œä½†ç”±äºâ€œåˆ†å¸ƒå¼â€çš„ç‰¹æ€§ï¼Œå•ä½“äº‹åŠ¡çš„ä¿éšœæœºåˆ¶å¤±æ•ˆäº†ã€‚</p>
<p>åœ¨å•ä½“åº”ç”¨ä¸­ï¼Œäº‹åŠ¡ç”±æ•°æ®åº“ç›´æ¥ç®¡ç†ï¼Œä¾æ‰˜æœ¬åœ°é”å’Œæ—¥å¿—å°±èƒ½å®ç°ACIDï¼š</p>
<ul>
<li>åŸå­æ€§ï¼ˆAtomicityï¼‰ï¼šä¾èµ–æ•°æ®åº“çš„undo logï¼Œå¤±è´¥æ—¶å›æ»šï¼›</li>
<li>ä¸€è‡´æ€§ï¼ˆConsistencyï¼‰ï¼šç”±ä¸šåŠ¡é€»è¾‘å’Œæ•°æ®åº“çº¦æŸå…±åŒä¿éšœï¼›</li>
<li>éš”ç¦»æ€§ï¼ˆIsolationï¼‰ï¼šä¾èµ–æ•°æ®åº“é”æœºåˆ¶ï¼Œé¿å…å¹¶å‘é—®é¢˜ï¼›</li>
<li>æŒä¹…æ€§ï¼ˆDurabilityï¼‰ï¼šä¾èµ–æ•°æ®åº“çš„redo logï¼Œç¡®ä¿æäº¤åæ•°æ®ä¸ä¸¢å¤±ã€‚</li>
</ul>
<p>ä½†åœ¨åˆ†å¸ƒå¼åœºæ™¯ä¸‹ï¼Œå¤šä¸ªæ•°æ®åº“å®ä¾‹ä¹‹é—´æ— æ³•å…±äº«é”å’Œæ—¥å¿—ï¼Œå­˜åœ¨ä¸‰ä¸ªæ ¸å¿ƒæŒ‘æˆ˜ï¼š</p>
<ol>
<li>ç½‘ç»œä¸å¯é ï¼šæœåŠ¡é—´é€šä¿¡å¯èƒ½å‡ºç°å»¶è¿Ÿã€è¶…æ—¶ã€ä¸¢åŒ…ï¼Œå¯¼è‡´â€œéƒ¨åˆ†æ“ä½œæˆåŠŸã€éƒ¨åˆ†å¤±è´¥â€ï¼›</li>
<li>èŠ‚ç‚¹æ•…éšœï¼šæŸä¸ªæœåŠ¡çš„æ•°æ®åº“å®•æœºï¼Œå¯èƒ½å¯¼è‡´è¯¥èŠ‚ç‚¹çš„æ“ä½œæœªå®Œæˆï¼Œå…¶ä»–èŠ‚ç‚¹å·²å®Œæˆï¼›</li>
<li>æ•°æ®åˆ†æ•£ï¼šä¸åŒèŠ‚ç‚¹çš„æ•°æ®æ— æ³•å®æ—¶åŒæ­¥ï¼Œéš¾ä»¥åˆ¤æ–­å…¨å±€äº‹åŠ¡çš„çŠ¶æ€ã€‚</li>
</ol>
<p>ä¸ºäº†åº”å¯¹è¿™äº›æŒ‘æˆ˜ï¼Œè¡Œä¸šæå‡ºäº†å¤šç§åˆ†å¸ƒå¼äº‹åŠ¡è§£å†³æ–¹æ¡ˆï¼Œæ ¸å¿ƒæ€è·¯éƒ½æ˜¯â€œé€šè¿‡åè°ƒæœºåˆ¶ï¼Œç¡®ä¿å¤šä¸ªèŠ‚ç‚¹çš„æ“ä½œæœ€ç»ˆè¾¾æˆä¸€è‡´â€ï¼Œä½†åœ¨ä¸€è‡´æ€§ã€å¯ç”¨æ€§ã€æ€§èƒ½ä¸Šå„æœ‰å–èˆã€‚</p>
<h3 data-id="heading-2">äºŒã€åˆ†å¸ƒå¼äº‹åŠ¡ä¸»æµè§£å†³æ–¹æ¡ˆï¼šä»ç†è®ºåˆ°å®è·µ</h3>
<p>èŠè§£å†³æ–¹æ¡ˆå‰ï¼Œå…ˆæä¸€ä¸ªé‡è¦ç†è®ºâ€”â€”CAPå®šç†ï¼šåˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œä¸€è‡´æ€§ï¼ˆConsistencyï¼‰ã€å¯ç”¨æ€§ï¼ˆAvailabilityï¼‰ã€åˆ†åŒºå®¹é”™æ€§ï¼ˆPartition Toleranceï¼‰ä¸‰è€…ä¸å¯å…¼å¾—ï¼Œåªèƒ½é€‰å…¶äºŒã€‚åˆ†å¸ƒå¼äº‹åŠ¡çš„è§£å†³æ–¹æ¡ˆï¼Œæœ¬è´¨ä¸Šéƒ½æ˜¯åœ¨CAPå®šç†ä¸‹çš„æƒè¡¡ã€‚ä¸‹é¢æˆ‘ä»¬é€ä¸€æ‹†è§£ä¸»æµæ–¹æ¡ˆï¼š</p>
<h4 data-id="heading-3">1. 2PCï¼ˆä¸¤é˜¶æ®µæäº¤ï¼‰ï¼šæœ€ç»å…¸çš„â€œå¼ºä¸€è‡´æ€§â€æ–¹æ¡ˆ</h4>
<p>2PCæ˜¯åˆ†å¸ƒå¼äº‹åŠ¡çš„â€œå…ƒè€çº§â€æ–¹æ¡ˆï¼Œæ ¸å¿ƒæ€è·¯æ˜¯â€œåˆ†é˜¶æ®µåè°ƒâ€ï¼Œå¼•å…¥ä¸€ä¸ªâ€œäº‹åŠ¡åè°ƒè€…â€ï¼ˆTCï¼‰æ¥ç»Ÿä¸€ç®¡ç†æ‰€æœ‰å‚ä¸è€…ï¼ˆTMï¼Œå³å„ä¸ªæœåŠ¡çš„æ•°æ®åº“ï¼‰çš„äº‹åŠ¡çŠ¶æ€ã€‚</p>
<p>ä¸¤ä¸ªé˜¶æ®µå…·ä½“å¦‚ä¸‹ï¼š</p>
<ul>
<li>å‡†å¤‡é˜¶æ®µï¼ˆPrepareï¼‰ï¼šåè°ƒè€…å‘æ‰€æœ‰å‚ä¸è€…å‘é€â€œå‡†å¤‡è¯·æ±‚â€ï¼Œå‚ä¸è€…æ‰§è¡Œæœ¬åœ°äº‹åŠ¡ï¼ˆä½†ä¸æäº¤ï¼‰ï¼Œè®°å½•undo/redo logï¼Œç„¶åå‘åè°ƒè€…è¿”å›â€œå‡†å¤‡æˆåŠŸâ€æˆ–â€œå‡†å¤‡å¤±è´¥â€ï¼›</li>
<li>æäº¤é˜¶æ®µï¼ˆCommit/Rollbackï¼‰ï¼šå¦‚æœåè°ƒè€…æ”¶åˆ°æ‰€æœ‰å‚ä¸è€…çš„â€œå‡†å¤‡æˆåŠŸâ€ï¼Œåˆ™å‘é€â€œæäº¤è¯·æ±‚â€ï¼Œå‚ä¸è€…æ‰§è¡Œæäº¤æ“ä½œå¹¶é‡Šæ”¾èµ„æºï¼›å¦‚æœæœ‰ä»»ä½•ä¸€ä¸ªå‚ä¸è€…è¿”å›â€œå‡†å¤‡å¤±è´¥â€ï¼Œåˆ™å‘é€â€œå›æ»šè¯·æ±‚â€ï¼Œå‚ä¸è€…é€šè¿‡undo logå›æ»šäº‹åŠ¡ã€‚</li>
</ul>
<p>ä¼˜ç‚¹ï¼šå®ç°ç®€å•ï¼Œå¼ºä¸€è‡´æ€§ï¼Œç¬¦åˆACIDï¼›</p>
<p>ç¼ºç‚¹ï¼šâ‘  æ€§èƒ½å·®ï¼šå‡†å¤‡é˜¶æ®µä¼šé”å®šèµ„æºï¼Œç›´åˆ°æ•´ä¸ªåˆ†å¸ƒå¼äº‹åŠ¡å®Œæˆï¼Œå¹¶å‘åœºæ™¯ä¸‹ååé‡ä½ï¼›â‘¡ å¯ç”¨æ€§ä½ï¼šåè°ƒè€…æ˜¯å•ç‚¹æ•…éšœï¼Œè‹¥åè°ƒè€…å®•æœºï¼Œæ‰€æœ‰å‚ä¸è€…ä¼šå¤„äºâ€œç­‰å¾…çŠ¶æ€â€ï¼Œèµ„æºæ— æ³•é‡Šæ”¾ï¼›â‘¢ è„‘è£‚é—®é¢˜ï¼šè‹¥åè°ƒè€…åœ¨å‘é€æäº¤è¯·æ±‚æ—¶å®•æœºï¼Œéƒ¨åˆ†å‚ä¸è€…å¯èƒ½æ”¶åˆ°è¯·æ±‚å¹¶æäº¤ï¼Œéƒ¨åˆ†æœªæ”¶åˆ°ï¼Œå¯¼è‡´æ•°æ®ä¸ä¸€è‡´ã€‚</p>
<p>é€‚ç”¨åœºæ™¯ï¼šå¯¹ä¸€è‡´æ€§è¦æ±‚æé«˜ã€å¹¶å‘é‡ä½çš„åœºæ™¯ï¼Œå¦‚é‡‘èæ ¸å¿ƒäº¤æ˜“ï¼ˆä½†ç°åœ¨é‡‘èåœºæ™¯ä¹Ÿæ›´å¤šç”¨ä¼˜åŒ–æ–¹æ¡ˆï¼‰ã€‚</p>
<h4 data-id="heading-4">2. 3PCï¼ˆä¸‰é˜¶æ®µæäº¤ï¼‰ï¼šä¼˜åŒ–2PCçš„å¯ç”¨æ€§é—®é¢˜</h4>
<p>3PCåœ¨2PCçš„åŸºç¡€ä¸Šå¢åŠ äº†â€œé¢„æäº¤é˜¶æ®µâ€ï¼Œå¹¶å¼•å…¥äº†â€œè¶…æ—¶æœºåˆ¶â€ï¼Œè¯•å›¾è§£å†³2PCçš„å•ç‚¹æ•…éšœå’Œèµ„æºé”å®šé—®é¢˜ã€‚</p>
<p>ä¸‰ä¸ªé˜¶æ®µï¼š</p>
<ul>
<li>CanCommité˜¶æ®µï¼šåè°ƒè€…è¯¢é—®å‚ä¸è€…â€œæ˜¯å¦å¯ä»¥æ‰§è¡Œäº‹åŠ¡â€ï¼Œå‚ä¸è€…ä»…åšå¯è¡Œæ€§æ£€æŸ¥ï¼ˆä¸æ‰§è¡Œäº‹åŠ¡ï¼‰ï¼Œè¿”å›yes/noï¼›</li>
<li>PreCommité˜¶æ®µï¼šåè°ƒè€…æ”¶åˆ°æ‰€æœ‰yesåï¼Œå‘é€â€œé¢„æäº¤è¯·æ±‚â€ï¼Œå‚ä¸è€…æ‰§è¡Œæœ¬åœ°äº‹åŠ¡ï¼ˆä¸æäº¤ï¼‰ï¼›è‹¥æœ‰noï¼Œå‘é€â€œä¸­æ–­è¯·æ±‚â€ï¼›</li>
<li>DoCommité˜¶æ®µï¼šåè°ƒè€…ç¡®è®¤æ‰€æœ‰å‚ä¸è€…é¢„æäº¤æˆåŠŸåï¼Œå‘é€â€œæäº¤è¯·æ±‚â€ï¼›è‹¥è¶…æ—¶æœªæ”¶åˆ°ç¡®è®¤ï¼Œé»˜è®¤æ‰§è¡Œæäº¤ï¼ˆåŒºåˆ«äº2PCçš„ç­‰å¾…ï¼‰ã€‚</li>
</ul>
<p>ä¼˜ç‚¹ï¼šè§£å†³äº†2PCåè°ƒè€…å®•æœºåçš„èµ„æºé”å®šé—®é¢˜ï¼Œå¯ç”¨æ€§ç•¥æœ‰æå‡ï¼›</p>
<p>ç¼ºç‚¹ï¼šä¾ç„¶å­˜åœ¨è„‘è£‚é£é™©ï¼ˆå¦‚éƒ¨åˆ†å‚ä¸è€…æœªæ”¶åˆ°DoCommitè¯·æ±‚ï¼Œé»˜è®¤æäº¤ï¼Œè€Œå…¶ä»–å‚ä¸è€…å›æ»šï¼‰ï¼Œä¸”å®ç°æ›´å¤æ‚ï¼Œå®é™…åº”ç”¨è¾ƒå°‘ã€‚</p>
<h4 data-id="heading-5">3. TCCï¼ˆTry-Confirm-Cancelï¼‰ï¼šæŸ”æ€§äº‹åŠ¡çš„â€œé«˜æ€§èƒ½â€æ–¹æ¡ˆ</h4>
<p>TCCæ˜¯ä¸€ç§â€œä¸šåŠ¡ä¾µå…¥å¼â€çš„æŸ”æ€§äº‹åŠ¡æ–¹æ¡ˆï¼Œæ ¸å¿ƒæ€è·¯æ˜¯â€œå°†åˆ†å¸ƒå¼äº‹åŠ¡æ‹†åˆ†ä¸ºä¸‰ä¸ªæœ¬åœ°äº‹åŠ¡â€ï¼Œç”±ä¸šåŠ¡ä»£ç å®ç°ä¸€è‡´æ€§ï¼Œä¸ä¾èµ–æ•°æ®åº“çš„äº‹åŠ¡æœºåˆ¶ã€‚</p>
<p>ä¸‰ä¸ªé˜¶æ®µçš„å®šä¹‰éœ€è¦ä¸šåŠ¡å¼€å‘äººå‘˜æ‰‹åŠ¨å®ç°ï¼š</p>
<ul>
<li>Tryé˜¶æ®µï¼šå°è¯•æ‰§è¡Œäº‹åŠ¡ï¼Œåšä¸šåŠ¡æ£€æŸ¥ï¼ˆå¦‚åº“å­˜æ˜¯å¦å……è¶³ï¼‰ï¼Œå¹¶é”å®šèµ„æºï¼ˆå¦‚å†»ç»“éƒ¨åˆ†åº“å­˜ï¼Œè€Œéç›´æ¥æ‰£å‡ï¼‰ï¼›</li>
<li>Confirmé˜¶æ®µï¼šç¡®è®¤æ‰§è¡Œäº‹åŠ¡ï¼Œå°†Tryé˜¶æ®µçš„é”å®šèµ„æºè½¬ä¸ºå®é™…æ“ä½œï¼ˆå¦‚å°†å†»ç»“çš„åº“å­˜æ‰£å‡ï¼‰ï¼Œè¯¥é˜¶æ®µå¿…é¡»ä¿è¯æˆåŠŸï¼›</li>
<li>Cancelé˜¶æ®µï¼šå–æ¶ˆäº‹åŠ¡ï¼Œé‡Šæ”¾Tryé˜¶æ®µé”å®šçš„èµ„æºï¼ˆå¦‚è§£å†»å†»ç»“çš„åº“å­˜ï¼‰ï¼Œæ¢å¤åˆ°åˆå§‹çŠ¶æ€ã€‚</li>
</ul>
<p>ä¼˜ç‚¹ï¼šâ‘  æ€§èƒ½é«˜ï¼šæ‰€æœ‰æ“ä½œéƒ½æ˜¯æœ¬åœ°äº‹åŠ¡ï¼Œæ— é”ç­‰å¾…ï¼Œé€‚åˆé«˜å¹¶å‘åœºæ™¯ï¼›â‘¡ çµæ´»æ€§å¼ºï¼šå¯æ ¹æ®ä¸šåŠ¡å®šåˆ¶é€»è¾‘ï¼Œæ”¯æŒéå…³ç³»å‹æ•°æ®åº“ï¼ˆå¦‚Redisã€MongoDBï¼‰ï¼›</p>
<p>ç¼ºç‚¹ï¼šâ‘  ä¸šåŠ¡ä¾µå…¥æ€§å¼ºï¼šéœ€è¦å¼€å‘äººå‘˜æ‰‹åŠ¨å®ç°Try/Confirm/Cancelä¸‰ä¸ªæ¥å£ï¼Œå¼€å‘æˆæœ¬é«˜ï¼›â‘¡ éœ€å¤„ç†å¹‚ç­‰æ€§ï¼šConfirmå’ŒCancelå¯èƒ½å› ç½‘ç»œé‡è¯•è¢«å¤šæ¬¡è°ƒç”¨ï¼Œéœ€ä¿è¯é‡å¤æ‰§è¡Œç»“æœä¸€è‡´ï¼›â‘¢ è¡¥å¿é€»è¾‘å¤æ‚ï¼šå¦‚Cancelé˜¶æ®µå¤±è´¥ï¼Œéœ€è¦äººå·¥ä»‹å…¥å¤„ç†ã€‚</p>
<p>é€‚ç”¨åœºæ™¯ï¼šé«˜å¹¶å‘ã€å¯¹ä¸€è‡´æ€§è¦æ±‚ä¸æ˜¯â€œå¼ºå®æ—¶â€çš„åœºæ™¯ï¼Œå¦‚ç”µå•†ä¸‹å•ã€æ”¯ä»˜é€€æ¬¾ã€‚</p>
<h4 data-id="heading-6">4. SAGAæ¨¡å¼ï¼šé•¿äº‹åŠ¡çš„â€œè¡¥å¿å‹â€æ–¹æ¡ˆ</h4>
<p>SAGAæ¨¡å¼é€‚ç”¨äºâ€œé•¿äº‹åŠ¡â€åœºæ™¯ï¼ˆå¦‚è·¨å¤šä¸ªæœåŠ¡çš„å¤æ‚æµç¨‹ï¼Œæ‰§è¡Œæ—¶é—´é•¿ï¼‰ï¼Œæ ¸å¿ƒæ€è·¯æ˜¯â€œå°†åˆ†å¸ƒå¼äº‹åŠ¡æ‹†åˆ†ä¸ºä¸€ç³»åˆ—æœ¬åœ°äº‹åŠ¡ï¼Œæ¯ä¸ªæœ¬åœ°äº‹åŠ¡å®Œæˆåæäº¤ï¼Œè‹¥æŸä¸ªæ­¥éª¤å¤±è´¥ï¼Œåˆ™é€šè¿‡è¡¥å¿äº‹åŠ¡å›æ»šå‰é¢æ‰€æœ‰å·²å®Œæˆçš„æ­¥éª¤â€ã€‚</p>
<p>SAGAæœ‰ä¸¤ç§å®ç°æ–¹å¼ï¼š</p>
<ul>
<li>ç¼–æ’å¼ï¼šå¼•å…¥ä¸€ä¸ªâ€œç¼–æ’å™¨â€ï¼Œç”±ç¼–æ’å™¨ç»Ÿä¸€åè°ƒæ‰€æœ‰æœ¬åœ°äº‹åŠ¡çš„æ‰§è¡Œé¡ºåºå’Œè¡¥å¿é¡ºåºï¼ˆå¦‚Aâ†’Bâ†’CæˆåŠŸï¼Œåˆ™æ­£å¸¸ç»“æŸï¼›è‹¥Cå¤±è´¥ï¼Œåˆ™æ‰§è¡ŒCçš„è¡¥å¿â†’Bçš„è¡¥å¿â†’Açš„è¡¥å¿ï¼‰ï¼›</li>
<li>ååŒå¼ï¼šæ— ç¼–æ’å™¨ï¼Œæ¯ä¸ªæœåŠ¡é€šè¿‡æ¶ˆæ¯é€šçŸ¥ä¸‹ä¸€ä¸ªæœåŠ¡æ‰§è¡Œï¼Œå¤±è´¥æ—¶ç”±å½“å‰æœåŠ¡é€šçŸ¥ä¸Šä¸€ä¸ªæœåŠ¡æ‰§è¡Œè¡¥å¿ï¼ˆè€¦åˆåº¦é«˜ï¼Œä¸æ¨èï¼‰ã€‚</li>
</ul>
<p>ä¼˜ç‚¹ï¼šâ‘  æ”¯æŒé•¿äº‹åŠ¡ï¼šæ— éœ€é”å®šèµ„æºï¼Œé€‚åˆæ‰§è¡Œæ—¶é—´é•¿çš„åœºæ™¯ï¼›â‘¡ å¯ç”¨æ€§é«˜ï¼šæ¯ä¸ªæœ¬åœ°äº‹åŠ¡ç‹¬ç«‹æäº¤ï¼Œå¤±è´¥åé€šè¿‡è¡¥å¿æ¢å¤ï¼›â‘¢ ä½ä¾µå…¥æ€§ï¼ˆç¼–æ’å¼ï¼‰ï¼šè¡¥å¿é€»è¾‘ç”±ä¸šåŠ¡å®ç°ï¼Œä½†ç¼–æ’å™¨ç»Ÿä¸€ç®¡ç†æµç¨‹ï¼›</p>
<p>ç¼ºç‚¹ï¼šâ‘  ä¸€è‡´æ€§å¼±ï¼šå±äºæœ€ç»ˆä¸€è‡´æ€§ï¼Œä¸­é—´çŠ¶æ€å¯èƒ½å­˜åœ¨æ•°æ®ä¸ä¸€è‡´ï¼ˆå¦‚Aã€Bå·²æäº¤ï¼ŒCæœªæäº¤ï¼Œè¡¥å¿å‰æ•°æ®å¤„äºä¸­é—´æ€ï¼‰ï¼›â‘¡ è¡¥å¿é€»è¾‘å¤æ‚ï¼šéœ€ä¸ºæ¯ä¸ªæœ¬åœ°äº‹åŠ¡è®¾è®¡å¯¹åº”çš„è¡¥å¿äº‹åŠ¡ï¼Œä¸”è¡¥å¿äº‹åŠ¡å¯èƒ½å¤±è´¥ã€‚</p>
<p>é€‚ç”¨åœºæ™¯ï¼šé•¿äº‹åŠ¡åœºæ™¯ï¼Œå¦‚ä¾›åº”é“¾ç®¡ç†ï¼ˆé‡‡è´­â†’å…¥åº“â†’ä»˜æ¬¾â†’ç‰©æµï¼‰ã€è®¢å•å±¥çº¦æµç¨‹ã€‚</p>
<h4 data-id="heading-7">5. æœ¬åœ°æ¶ˆæ¯è¡¨ï¼ˆäº‹åŠ¡æ¶ˆæ¯ï¼‰ï¼šåŸºäºæ¶ˆæ¯é˜Ÿåˆ—çš„æœ€ç»ˆä¸€è‡´æ€§æ–¹æ¡ˆ</h4>
<p>è¯¥æ–¹æ¡ˆçš„æ ¸å¿ƒæ€è·¯æ˜¯â€œå°†åˆ†å¸ƒå¼äº‹åŠ¡è½¬åŒ–ä¸ºæ¶ˆæ¯çš„å¯é æŠ•é€’å’Œæ¶ˆè´¹â€ï¼Œä¾æ‰˜æ¶ˆæ¯é˜Ÿåˆ—çš„å¯é æ€§ï¼ˆå¦‚RocketMQçš„äº‹åŠ¡æ¶ˆæ¯ã€Kafkaçš„äº‹åŠ¡æœºåˆ¶ï¼‰ï¼Œå®ç°æœ€ç»ˆä¸€è‡´æ€§ã€‚ç»å…¸å®ç°æ˜¯â€œæœ¬åœ°æ¶ˆæ¯è¡¨+æ¶ˆæ¯é˜Ÿåˆ—â€ï¼š</p>
<ol>
<li>ç¬¬ä¸€æ­¥ï¼šåœ¨å‘èµ·æ–¹çš„æ•°æ®åº“ä¸­åˆ›å»ºâ€œæœ¬åœ°æ¶ˆæ¯è¡¨â€ï¼Œè®°å½•éœ€è¦å‘é€çš„æ¶ˆæ¯ï¼›</li>
<li>ç¬¬äºŒæ­¥ï¼šå‘èµ·æ–¹æ‰§è¡Œæœ¬åœ°äº‹åŠ¡ï¼ˆå¦‚æ‰£å‡åº“å­˜ï¼‰ï¼Œå¹¶å°†æ¶ˆæ¯æ’å…¥æœ¬åœ°æ¶ˆæ¯è¡¨ï¼ˆåŒä¸€æœ¬åœ°äº‹åŠ¡ï¼Œç¡®ä¿åŸå­æ€§ï¼‰ï¼›</li>
<li>ç¬¬ä¸‰æ­¥ï¼šé€šè¿‡å®šæ—¶ä»»åŠ¡æˆ–æ¶ˆæ¯é˜Ÿåˆ—çš„äº‹åŠ¡æœºåˆ¶ï¼Œå°†æœ¬åœ°æ¶ˆæ¯è¡¨ä¸­çš„æ¶ˆæ¯æŠ•é€’åˆ°æ¶ˆæ¯é˜Ÿåˆ—ï¼›</li>
<li>ç¬¬å››æ­¥ï¼šæ¥æ”¶æ–¹æ¶ˆè´¹æ¶ˆæ¯ï¼Œæ‰§è¡Œæœ¬åœ°äº‹åŠ¡ï¼ˆå¦‚æ›´æ–°è®¢å•çŠ¶æ€ï¼‰ï¼›è‹¥æ¶ˆè´¹å¤±è´¥ï¼Œæ¶ˆæ¯é˜Ÿåˆ—é‡è¯•ï¼Œç›´åˆ°æ¶ˆè´¹æˆåŠŸï¼›</li>
<li>ç¬¬äº”æ­¥ï¼šå‘èµ·æ–¹ç¡®è®¤æ¶ˆæ¯å·²è¢«æ¶ˆè´¹ï¼Œåˆ é™¤æœ¬åœ°æ¶ˆæ¯è¡¨ä¸­çš„è®°å½•ã€‚</li>
</ol>
<p>ä¼˜ç‚¹ï¼šâ‘  ä½ä¾µå…¥æ€§ï¼šæ— éœ€ä¿®æ”¹æ ¸å¿ƒä¸šåŠ¡é€»è¾‘ï¼Œä»…éœ€å¢åŠ æ¶ˆæ¯è¡¨å’ŒæŠ•é€’é€»è¾‘ï¼›â‘¡ é«˜å¯ç”¨æ€§ï¼šä¾æ‰˜æ¶ˆæ¯é˜Ÿåˆ—çš„é‡è¯•æœºåˆ¶ï¼Œå®¹é”™æ€§å¼ºï¼›â‘¢ æ€§èƒ½å¥½ï¼šæœ¬åœ°äº‹åŠ¡æ‰§è¡Œåå¼‚æ­¥æŠ•é€’æ¶ˆæ¯ï¼Œæ— é”ç­‰å¾…ï¼›</p>
<p>ç¼ºç‚¹ï¼šâ‘  ä¸€è‡´æ€§å¼±ï¼šå±äºæœ€ç»ˆä¸€è‡´æ€§ï¼Œå­˜åœ¨ä¸­é—´æ€ï¼›â‘¡ éœ€å¤„ç†å¹‚ç­‰æ€§ï¼šæ¶ˆæ¯å¯èƒ½è¢«é‡å¤æŠ•é€’ï¼Œæ¥æ”¶æ–¹éœ€ä¿è¯é‡å¤æ¶ˆè´¹æ— å‰¯ä½œç”¨ï¼›â‘¢ ä»…é€‚ç”¨äºâ€œä¸€å‘èµ·æ–¹å¤šæ¥æ”¶æ–¹â€çš„å•å‘æµç¨‹ï¼Œä¸æ”¯æŒå¤æ‚çš„åŒå‘äº¤äº’ã€‚</p>
<p>é€‚ç”¨åœºæ™¯ï¼šå¼‚æ­¥é€šçŸ¥ç±»åœºæ™¯ï¼Œå¦‚ç”µå•†ä¸‹å•åé€šçŸ¥åº“å­˜ã€ç‰©æµã€è´¦æˆ·æœåŠ¡ï¼Œç”¨æˆ·æ³¨å†Œåé€šçŸ¥ç§¯åˆ†ã€æ¶ˆæ¯æœåŠ¡ã€‚</p>
<h3 data-id="heading-8">ä¸‰ã€è§£å†³æ–¹æ¡ˆé€‰å‹ï¼šæ²¡æœ‰æœ€å¥½ï¼Œåªæœ‰æœ€åˆé€‚</h3>
<p>åˆ†å¸ƒå¼äº‹åŠ¡çš„è§£å†³æ–¹æ¡ˆæ²¡æœ‰â€œé“¶å¼¹â€ï¼Œé€‰å‹æ—¶éœ€ç»“åˆä¸šåŠ¡åœºæ™¯çš„ä¸€è‡´æ€§è¦æ±‚ã€å¹¶å‘é‡ã€ç³»ç»Ÿå¤æ‚åº¦ç­‰å› ç´ ç»¼åˆåˆ¤æ–­ï¼Œä»¥ä¸‹æ˜¯å¸¸è§çš„é€‰å‹å»ºè®®ï¼š</p>



































<table><thead><tr><th>é€‰å‹ç»´åº¦</th><th>æ¨èæ–¹æ¡ˆ</th><th>ä¸æ¨èæ–¹æ¡ˆ</th></tr></thead><tbody><tr><td>å¼ºä¸€è‡´æ€§ã€ä½å¹¶å‘</td><td>2PCï¼ˆå¦‚é‡‘èæ ¸å¿ƒäº¤æ˜“ï¼‰</td><td>TCCã€SAGAï¼ˆä¸€è‡´æ€§ä¸è¶³ï¼‰</td></tr><tr><td>é«˜å¹¶å‘ã€æœ€ç»ˆä¸€è‡´æ€§</td><td>TCCã€æœ¬åœ°æ¶ˆæ¯è¡¨</td><td>2PCï¼ˆæ€§èƒ½å·®ï¼‰</td></tr><tr><td>é•¿äº‹åŠ¡ã€å¤šæ­¥éª¤æµç¨‹</td><td>SAGAæ¨¡å¼ï¼ˆç¼–æ’å¼ï¼‰</td><td>2PCã€3PCï¼ˆèµ„æºé”å®šä¹…ï¼‰</td></tr><tr><td>å¼‚æ­¥é€šçŸ¥ã€å•å‘æµç¨‹</td><td>æœ¬åœ°æ¶ˆæ¯è¡¨ï¼ˆäº‹åŠ¡æ¶ˆæ¯ï¼‰</td><td>TCCï¼ˆå¼€å‘æˆæœ¬é«˜ï¼‰</td></tr><tr><td>éå…³ç³»å‹æ•°æ®åº“åœºæ™¯</td><td>TCCã€SAGA</td><td>2PCã€3PCï¼ˆä¾èµ–æ•°æ®åº“äº‹åŠ¡ï¼‰</td></tr></tbody></table>
<h3 data-id="heading-9">å››ã€å®é™…è½åœ°çš„å…³é”®æ³¨æ„äº‹é¡¹</h3>
<p>æ— è®ºé€‰æ‹©å“ªç§æ–¹æ¡ˆï¼Œè½åœ°æ—¶éƒ½éœ€è¦å…³æ³¨ä»¥ä¸‹å‡ ä¸ªæ ¸å¿ƒé—®é¢˜ï¼Œå¦åˆ™å®¹æ˜“å‡ºç°æ•°æ®ä¸ä¸€è‡´ï¼š</p>
<ol>
<li>å¹‚ç­‰æ€§è®¾è®¡ï¼šæ‰€æœ‰åˆ†å¸ƒå¼äº‹åŠ¡çš„å‚ä¸è€…ï¼ˆå°¤å…¶æ˜¯è¡¥å¿æ“ä½œã€æ¶ˆæ¯æ¶ˆè´¹ï¼‰å¿…é¡»æ”¯æŒå¹‚ç­‰ï¼Œé¿å…é‡å¤æ‰§è¡Œå¯¼è‡´æ•°æ®é”™è¯¯ï¼ˆå¦‚é‡å¤æ‰£å‡åº“å­˜ï¼‰ã€‚å¸¸è§æ–¹æ¡ˆï¼šä½¿ç”¨å”¯ä¸€IDï¼ˆå¦‚è®¢å•å·ï¼‰ä½œä¸ºå¹‚ç­‰é”®ï¼Œæ‰§è¡Œå‰å…ˆæ£€æŸ¥æ˜¯å¦å·²å¤„ç†ï¼›</li>
<li>è¶…æ—¶å¤„ç†ï¼šæ˜ç¡®å„é˜¶æ®µçš„è¶…æ—¶æ—¶é—´ï¼Œé¿å…æ— é™ç­‰å¾…å¯¼è‡´èµ„æºé”å®šæˆ–æ•°æ®ç§¯å‹ã€‚å¦‚TCCçš„Tryé˜¶æ®µè¶…æ—¶ï¼Œç›´æ¥æ‰§è¡ŒCancelï¼›æ¶ˆæ¯æ¶ˆè´¹è¶…æ—¶ï¼Œè§¦å‘é‡è¯•ï¼›</li>
<li>æ—¥å¿—ä¸ç›‘æ§ï¼šå®Œå–„åˆ†å¸ƒå¼äº‹åŠ¡çš„æ—¥å¿—è®°å½•ï¼ˆå¦‚å„é˜¶æ®µçŠ¶æ€ã€æ‰§è¡Œæ—¶é—´ã€é”™è¯¯ä¿¡æ¯ï¼‰ï¼Œä¾¿äºé—®é¢˜æ’æŸ¥ï¼›åŒæ—¶å»ºç«‹ç›‘æ§å‘Šè­¦ï¼ŒåŠæ—¶å‘ç°äº‹åŠ¡å¤±è´¥ã€é‡è¯•é¢‘ç¹ç­‰å¼‚å¸¸æƒ…å†µï¼›</li>
<li>äººå·¥ä»‹å…¥æœºåˆ¶ï¼šå¯¹äºæ— æ³•è‡ªåŠ¨è¡¥å¿çš„å¼‚å¸¸ï¼ˆå¦‚è¡¥å¿äº‹åŠ¡å¤±è´¥ã€æ•°æ®æŸåï¼‰ï¼Œå¿…é¡»æä¾›äººå·¥ä»‹å…¥é€šé“ï¼Œé¿å…æ•°æ®ä¸ä¸€è‡´é•¿æœŸå­˜åœ¨ã€‚</li>
</ol>
<h3 data-id="heading-10">äº”ã€æ€»ç»“</h3>
<p>åˆ†å¸ƒå¼äº‹åŠ¡çš„æ ¸å¿ƒæ˜¯â€œåœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸‹ä¿éšœæ•°æ®ä¸€è‡´æ€§â€ï¼Œè€Œå…¶æœ¬è´¨æ˜¯CAPå®šç†ä¸‹çš„æƒè¡¡â€”â€”å¼ºä¸€è‡´æ€§å¿…ç„¶ç‰ºç‰²å¯ç”¨æ€§å’Œæ€§èƒ½ï¼Œæœ€ç»ˆä¸€è‡´æ€§åˆ™é€šè¿‡ç‰ºç‰²å®æ—¶æ€§æ¢å–é«˜å¯ç”¨å’Œé«˜å¹¶å‘ã€‚</p>
<p>å®é™…å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ä¸å¿…è¿½æ±‚â€œå®Œç¾çš„ä¸€è‡´æ€§â€ï¼Œè€Œæ˜¯è¦æ ¹æ®ä¸šåŠ¡åœºæ™¯é€‰æ‹©åˆé€‚çš„æ–¹æ¡ˆï¼šé‡‘èæ ¸å¿ƒåœºæ™¯ä¼˜å…ˆä¿è¯å¼ºä¸€è‡´æ€§ï¼ˆ2PCï¼‰ï¼Œç”µå•†é«˜å¹¶å‘åœºæ™¯ä¼˜å…ˆé€‰æ‹©æœ€ç»ˆä¸€è‡´æ€§ï¼ˆTCCã€æœ¬åœ°æ¶ˆæ¯è¡¨ï¼‰ï¼Œé•¿äº‹åŠ¡åœºæ™¯é€‰æ‹©SAGAæ¨¡å¼ã€‚åŒæ—¶ï¼Œåšå¥½å¹‚ç­‰æ€§ã€è¶…æ—¶å¤„ç†ã€ç›‘æ§å‘Šè­¦ç­‰è½åœ°ç»†èŠ‚ï¼Œæ‰èƒ½çœŸæ­£ä¿éšœåˆ†å¸ƒå¼äº‹åŠ¡çš„ç¨³å®šè¿è¡Œã€‚</p>
<p>æœ€åï¼Œè®°ä½ä¸€ä¸ªåŸåˆ™ï¼šèƒ½é¿å…åˆ†å¸ƒå¼äº‹åŠ¡ï¼Œå°±å°½é‡é¿å…ã€‚é€šè¿‡ä¸šåŠ¡è®¾è®¡ï¼ˆå¦‚åˆå¹¶æœåŠ¡ã€æ•°æ®å†—ä½™ï¼‰å‡å°‘è·¨æœåŠ¡çš„æ•°æ®æ“ä½œï¼Œæ‰æ˜¯è§£å†³åˆ†å¸ƒå¼äº‹åŠ¡é—®é¢˜çš„æœ€ä¼˜è§£ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»é›¶å®ç°å¯Œæ–‡æœ¬ç¼–è¾‘å™¨#9-ç¼–è¾‘å™¨æ–‡æœ¬ç»“æ„å˜æ›´çš„å—æ§å¤„ç†]]></title>    <link>https://juejin.cn/post/7585778343352221759</link>    <guid>https://juejin.cn/post/7585778343352221759</guid>    <pubDate>2025-12-22T02:50:48.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7585778343352221759" data-draft-id="7585825055437586438" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»é›¶å®ç°å¯Œæ–‡æœ¬ç¼–è¾‘å™¨#9-ç¼–è¾‘å™¨æ–‡æœ¬ç»“æ„å˜æ›´çš„å—æ§å¤„ç†"/> <meta itemprop="keywords" content="å‰ç«¯,GitHub,æ¶æ„"/> <meta itemprop="datePublished" content="2025-12-22T02:50:48.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="WindRunnerMax"/> <meta itemprop="url" content="https://juejin.cn/user/1829999989247214"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»é›¶å®ç°å¯Œæ–‡æœ¬ç¼–è¾‘å™¨#9-ç¼–è¾‘å™¨æ–‡æœ¬ç»“æ„å˜æ›´çš„å—æ§å¤„ç†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1829999989247214/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    WindRunnerMax
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-22T02:50:48.000Z" title="Mon Dec 22 2025 02:50:48 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»27åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å…ˆå‰æˆ‘ä»¬ä¸»è¦å¤„ç†äº†æµè§ˆå™¨å¤æ‚<code>DOM</code>ç»“æ„çš„é»˜è®¤è¡Œä¸ºï¼Œä»¥åŠå…¼å®¹<code>IME</code>è¾“å…¥æ³•çš„å„ç§è¾“å…¥åœºæ™¯ï¼Œä»¥æ­¤éœ€è¦é’ˆå¯¹æ€§åœ°å¤„ç†è¾“å…¥æ³•å’Œæµè§ˆå™¨å…¼å®¹çš„è¡Œä¸ºã€‚åœ¨è¿™é‡Œæˆ‘ä»¬å…³æ³¨äºå¤„ç†æ–‡æœ¬ç»“æ„æ€§å˜æ›´è¡Œä¸ºçš„å¤„ç†ï¼Œä¸»è¦æ˜¯é’ˆå¯¹è¡Œçº§åˆ«çš„æ“ä½œã€æ–‡æœ¬æ‹–æ‹½æ“ä½œç­‰ï¼Œåˆ†åˆ«å¤„äºæ–‡æœ¬ç»“æ„ç»“æ„ä»¥åŠå˜æ›´æ“ä½œæ‰©å±•ã€‚</p>
<ul>
<li>å¼€æºåœ°å€: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FWindRunnerMax%2FBlockKit" target="_blank" title="https://github.com/WindRunnerMax/BlockKit" ref="nofollow noopener noreferrer">github.com/WindRunnerMâ€¦</a></li>
<li>åœ¨çº¿ç¼–è¾‘: <a href="https://link.juejin.cn?target=https%3A%2F%2Fwindrunnermax.github.io%2FBlockKit%2F" target="_blank" title="https://windrunnermax.github.io/BlockKit/" ref="nofollow noopener noreferrer">windrunnermax.github.io/BlockKit/</a></li>
<li>é¡¹ç›®ç¬”è®°: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FWindRunnerMax%2FBlockKit%2Fblob%2Fmaster%2FNOTE.md" target="_blank" title="https://github.com/WindRunnerMax/BlockKit/blob/master/NOTE.md" ref="nofollow noopener noreferrer">github.com/WindRunnerMâ€¦</a></li>
</ul>
<details>
<summary><strong>ä»é›¶å®ç°å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ç³»åˆ—æ–‡ç« </strong></summary>
<ul>
<li><a href="https://juejin.cn/post/7490554094412611636" target="_blank" title="https://juejin.cn/post/7490554094412611636">æ·±æ„Ÿä¸€æ— æ‰€é•¿ï¼Œå‡†å¤‡è¯•ç€ä»é›¶å¼€å§‹å†™ä¸ªå¯Œæ–‡æœ¬ç¼–è¾‘å™¨</a></li>
<li><a href="https://juejin.cn/post/7492339631700377652" target="_blank" title="https://juejin.cn/post/7492339631700377652">ä»é›¶å®ç°å¯Œæ–‡æœ¬ç¼–è¾‘å™¨#2-åŸºäºMVCæ¨¡å¼çš„ç¼–è¾‘å™¨æ¶æ„è®¾è®¡</a></li>
<li><a href="https://juejin.cn/post/7494920513967112227" target="_blank" title="https://juejin.cn/post/7494920513967112227">ä»é›¶å®ç°å¯Œæ–‡æœ¬ç¼–è¾‘å™¨#3-åŸºäºDeltaçš„çº¿æ€§æ•°æ®ç»“æ„æ¨¡å‹</a></li>
<li><a href="https://juejin.cn/post/7508648111485665295" target="_blank" title="https://juejin.cn/post/7508648111485665295">ä»é›¶å®ç°å¯Œæ–‡æœ¬ç¼–è¾‘å™¨#4-æµè§ˆå™¨é€‰åŒºæ¨¡å‹çš„æ ¸å¿ƒäº¤äº’ç­–ç•¥</a></li>
<li><a href="https://juejin.cn/post/7513183180091523107" target="_blank" title="https://juejin.cn/post/7513183180091523107">ä»é›¶å®ç°å¯Œæ–‡æœ¬ç¼–è¾‘å™¨#5-ç¼–è¾‘å™¨é€‰åŒºæ¨¡å‹çš„çŠ¶æ€ç»“æ„è¡¨è¾¾</a></li>
<li><a href="https://juejin.cn/post/7534162607894347828" target="_blank" title="https://juejin.cn/post/7534162607894347828">ä»é›¶å®ç°å¯Œæ–‡æœ¬ç¼–è¾‘å™¨#6-æµè§ˆå™¨é€‰åŒºä¸ç¼–è¾‘å™¨é€‰åŒºæ¨¡å‹åŒæ­¥</a></li>
<li><a href="https://juejin.cn/post/7544561402783793192" target="_blank" title="https://juejin.cn/post/7544561402783793192">ä»é›¶å®ç°å¯Œæ–‡æœ¬ç¼–è¾‘å™¨#7-åŸºäºç»„åˆäº‹ä»¶çš„åŠå—æ§è¾“å…¥æ¨¡å¼</a></li>
<li><a href="https://juejin.cn/post/7562526517516812331" target="_blank" title="https://juejin.cn/post/7562526517516812331">ä»é›¶å®ç°å¯Œæ–‡æœ¬ç¼–è¾‘å™¨#8-æµè§ˆå™¨è¾“å…¥æ¨¡å¼çš„éå—æ§DOMè¡Œä¸º</a></li>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">ä»é›¶å®ç°å¯Œæ–‡æœ¬ç¼–è¾‘å™¨#9-ç¼–è¾‘å™¨æ–‡æœ¬ç»“æ„å˜æ›´çš„å—æ§å¤„ç†</a></li>
</ul>
</details>
<h2 data-id="heading-0">æ¦‚è¿°</h2>
<p>åœ¨å½“å‰æˆ‘ä»¬ä¸»è¦èŠçš„ç¼–è¾‘å™¨è¾“å…¥æ¨¡å¼ä¸­ï¼Œä¸»è¦æ˜¯å…³æ³¨äºæ–‡æœ¬çš„åŠå—æ§è¾“å…¥ä»¥åŠè„<code>DOM</code>çš„æ£€æµ‹ï¼Œè¾“å…¥çŠ¶æ€åŒæ­¥æ˜¯æ¯”è¾ƒå¤æ‚ä¸”å®¹æ˜“å‡ºé—®é¢˜çš„åœ°æ–¹ã€‚è€Œåœ¨è¿™é‡Œæˆ‘ä»¬åˆ™å…³æ³¨äºè¾“å…¥åŒæ­¥è¡Œä¸ºæ‰©å±•ï¼Œä¾‹å¦‚å›è½¦ã€åˆ é™¤ã€æ‹–æ‹½æ–‡æœ¬ç­‰æ“ä½œï¼Œç›¸å½“äºå®Œå–„äº†ç¼–è¾‘å™¨æ•´ä½“è¾“å…¥æ¨¡å¼çš„å¤„ç†ã€‚</p>
<p>å…·ä½“æ¥è¯´ï¼Œæ‰§è¡Œæ¢è¡Œå’Œåˆ é™¤å›è½¦æ—¶ä¼šå˜æ›´<code>DOM</code>ç»“æ„ï¼Œè€Œåˆ é™¤æ–‡æœ¬ä»¥åŠæ‹–æ‹½æ–‡æœ¬åŒæ ·æ˜¯ç”±<code>BeforeInput</code>ç­‰äº‹ä»¶ç»„åˆæ‰§è¡Œçš„ï¼Œåœ¨ç¼–è¾‘å™¨ä¸­è¿™äº›æ“ä½œéƒ½æ˜¯è¾“å…¥çš„ä¸€éƒ¨åˆ†ã€‚æ­¤å¤–ï¼Œè¿™äº›æ“ä½œé€šå¸¸éƒ½æ˜¯å¯ä»¥å—æ§å¤„ç†çš„ï¼Œå› æ­¤å¹¶ä¸å¤ªå®¹æ˜“å‡ºç°è„<code>DOM</code>çš„é—®é¢˜ï¼Œä½†æ˜¯æ•´ä½“ä¸Šè¿˜æ˜¯æœ‰å¾ˆå¤šéœ€è¦æ³¨æ„çš„ç‚¹:</p>
<ul>
<li>å›è½¦æ“ä½œé€šå¸¸éœ€è¦æ‹†åˆ†å½“å‰è¡Œç»“æ„ï¼Œå¹¶ä¸”è¿˜éœ€è¦å…³æ³¨åˆ°è¡Œæ ¼å¼çš„ç»§æ‰¿é—®é¢˜ï¼Œç‰¹åˆ«æ˜¯ç±»ä¼¼äºåˆ—è¡¨ç­‰ç»“æ„å¤„ç†èµ·æ¥ä¼šæ›´å¤æ‚ä¸€äº›ã€‚æ­¤å¤–ç”±äºæ•°æ®ç»“æ„æœ¬èº«çš„è®¾è®¡ä¸åŒï¼Œå›è½¦çš„æ“ä½œå®ç°ä¹Ÿä¼šæœ‰å¾ˆå¤§çš„å·®å¼‚ï¼Œè¿˜æœ‰è¯¸å¦‚è½¯å›è½¦ã€ç¡¬å›è½¦ç­‰ä¸åŒçš„å›è½¦ç±»å‹ã€‚</li>
<li>åˆ é™¤æ“ä½œåŒæ ·ä¼šæ¶‰åŠè¡Œç»“æ„çš„å¤„ç†ï¼Œå³åˆ é™¤å›è½¦æ—¶éœ€è¦åˆå¹¶è¡Œç»“æ„ï¼Œå¹¶ä¸”ä¹Ÿä¼šå—åˆ°æ•°æ®ç»“æ„æœ¬èº«çš„å½±å“ï¼Œåˆ é™¤å¯èƒ½å¹¶ä¸ä¼šç¬¦åˆæ“ä½œç›´è§‰ï¼Œå› æ­¤éœ€è¦æ‰‹åŠ¨æ ¡æ­£è¡Œæ ¼å¼ã€‚å¹¶ä¸”åˆ é™¤çš„æ—¶å€™è¿˜éœ€è¦å…³æ³¨<code>Unicode</code>å­—ç¬¦çš„å¤„ç†ï¼Œç‰¹åˆ«æ˜¯ç±»ä¼¼äº<code>Emoji</code>ç­‰ç¬¦å·çš„åˆ é™¤éœ€è¦ç‰¹æ®Šå¤„ç†ã€‚</li>
<li>æ‹–æ‹½æ“ä½œåŒæ ·ä¼šæ¶‰åŠè¡Œç»“æ„çš„å¤„ç†ï¼Œè€Œåœ¨æˆ‘ä»¬çš„çŠ¶æ€ç®¡ç†ä¸­æœ¬å°±æ˜¯ä»¥è¡Œä¸ºå•ä½è¿›è¡Œç®¡ç†çš„ï¼Œå› æ­¤æ‹–æ‹½è¡Œçº§ç»“æ„ç›¸å¯¹ä¼šç®€å•ï¼Œå½“ç„¶å®ç°çš„äº¤äº’ä¸Šè¿˜æ˜¯æœ‰äº›å·¥ä½œé‡ã€‚è€Œæ–‡æœ¬èŠ‚ç‚¹æœ¬èº«åŒæ ·æ˜¯å¯ä»¥æ‹–æ‹½çš„ï¼Œå› æ­¤æˆ‘ä»¬åŒæ ·éœ€è¦æ ¹æ®é€‰åŒºèŒƒå›´è¿›è¡Œæ–‡æœ¬çš„å‰ªåˆ‡å’Œæ’å…¥ã€‚</li>
</ul>
<h2 data-id="heading-1">å›è½¦æ“ä½œ</h2>
<p>åœ¨æœ€å¼€å§‹çš„æ—¶å€™ï¼Œæˆ‘ä»¬å°±èŠåˆ°äº†<code>ContentEditable</code>çš„ä¸å—æ§è¡Œä¸ºï¼Œç‰¹åˆ«æ˜¯å›è½¦æ“ä½œåœ¨ä¸åŒæµè§ˆå™¨ä¸­çš„è¡¨ç°æ˜¯ä¸ä¸€è‡´çš„ã€‚åœ¨ä¹‹å‰çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å°±æåˆ°äº†å›è½¦æ“ä½œåœ¨ä¸åŒæµè§ˆå™¨ä¸­çš„è¡¨ç°å·®å¼‚:</p>
<ul>
<li>åœ¨ç©º<code>contenteditable</code>ç¼–è¾‘å™¨çš„æƒ…å†µä¸‹ï¼Œç›´æ¥æŒ‰ä¸‹å›è½¦é”®ï¼Œåœ¨<code>Chrome</code>ä¸­çš„è¡¨ç°æ˜¯ä¼šæ’å…¥<code>&lt;div&gt;&lt;br&gt;&lt;/div&gt;</code>ï¼Œè€Œåœ¨<code>FireFox(&lt;60)</code>ä¸­çš„è¡¨ç°æ˜¯ä¼šæ’å…¥<code>&lt;br&gt;</code>ï¼Œ<code>IE</code>ä¸­çš„è¡¨ç°æ˜¯ä¼šæ’å…¥<code>&lt;p&gt;&lt;br&gt;&lt;/p&gt;</code>ã€‚</li>
<li>åœ¨æœ‰æ–‡æœ¬çš„ç¼–è¾‘å™¨ä¸­ï¼Œå¦‚æœåœ¨æ–‡æœ¬ä¸­é—´æ’å…¥å›è½¦ä¾‹å¦‚<code>123|123</code>ï¼Œåœ¨<code>Chrome</code>ä¸­çš„è¡¨ç°å†…å®¹æ˜¯<code>123&lt;div&gt;123&lt;/div&gt;</code>ï¼Œè€Œåœ¨<code>FireFox</code>ä¸­çš„è¡¨ç°åˆ™æ˜¯ä¼šå°†å†…å®¹æ ¼å¼åŒ–ä¸º<code>&lt;div&gt;123&lt;/div&gt;&lt;div&gt;123&lt;/div&gt;</code>ã€‚</li>
<li>åŒæ ·åœ¨æœ‰æ–‡æœ¬çš„ç¼–è¾‘å™¨ä¸­ï¼Œå¦‚æœåœ¨æ–‡æœ¬ä¸­é—´æ’å…¥å›è½¦åå†åˆ é™¤å›è½¦ï¼Œä¾‹å¦‚<code>123|123-&gt;123123</code>ï¼Œåœ¨<code>Chrome</code>ä¸­çš„è¡¨ç°å†…å®¹ä¼šæ¢å¤åŸæœ¬çš„<code>123123</code>ï¼Œè€Œåœ¨<code>FireFox</code>ä¸­çš„è¡¨ç°åˆ™æ˜¯ä¼šå˜ä¸º<code>&lt;div&gt;123123&lt;/div&gt;</code>ã€‚</li>
</ul>
<p>å…¶å®è¿™äº›ç¤ºä¾‹å…¶å®ä¹Ÿå†™è¿‡å¾ˆå¤šæ¬¡äº†ï¼Œæ¯æ¬¡æåˆ°æµè§ˆå™¨çš„ä¸å—æ§è¡Œä¸ºéƒ½ä¼šæåˆ°ç›¸å…³çš„å·®å¼‚ï¼Œè¿™äº›é»˜è®¤è¡Œä¸ºä¹Ÿå˜æˆäº†æˆ‘ä»¬å¤„ç†çŠ¶æ€åŒæ­¥æ—¶éœ€è¦å…³æ³¨çš„ç‚¹ã€‚è€Œå®é™…ä¸Šï¼Œå…³äºå›è½¦çš„è¡Œä¸ºæœ¬èº«æˆ‘ä»¬æ˜¯å¯ä»¥å—æ§å¤„ç†çš„ï¼Œå³é˜»æ­¢å…¶é»˜è®¤è¡Œä¸ºï¼Œç„¶åæ ¹æ®å½“å‰çš„é€‰åŒºçŠ¶æ€è¿›è¡Œè¡Œç»“æ„çš„æ‹†åˆ†å’Œæ ¼å¼ç»§æ‰¿ç­‰å¤„ç†ã€‚</p>
<p>é€šå¸¸æ¥è¯´ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸¤ç§æ–¹å¼é˜»æ­¢é»˜è®¤è¡Œä¸ºï¼Œä¸€ç§æ˜¯ç›‘å¬<code>BeforeInput</code>äº‹ä»¶å¹¶é˜»æ­¢å…¶é»˜è®¤è¡Œä¸ºï¼Œå¦ä¸€ç§æ˜¯ç›‘å¬<code>KeyDown</code>äº‹ä»¶å¹¶é˜»æ­¢å…¶é»˜è®¤è¡Œä¸ºã€‚å‰è€…çš„å¥½å¤„æ˜¯å¯ä»¥ç›´æ¥è·å–åˆ°äº‹ä»¶çš„è¾“å…¥ç±»å‹ï¼Œä¾‹å¦‚è½¯ç¡¬å›è½¦ç­‰ï¼Œè€Œåè€…çš„å¥½å¤„åˆ™æ˜¯å¯ä»¥æ›´æ—©åœ°é˜»æ­¢é»˜è®¤è¡Œä¸ºã€‚</p>
<p>é‚£ä¹ˆè‡ªç„¶çš„æˆ‘ä»¬è¿˜æ˜¯å€ŸåŠ©<code>BeforeInput</code>äº‹ä»¶æ¥å¤„ç†å›è½¦æ“ä½œï¼Œè¿™æ ·ä¼šæ¯”è¾ƒæ–¹ä¾¿ä¸€äº›ã€‚é‚£ä¹ˆè¿™é‡Œçš„å®ç°å°±æ¯”è¾ƒç®€å•ï¼Œç†è®ºä¸Šæ¥è¯´æˆ‘ä»¬åªéœ€è¦åœ¨æ•°æ®ç»“æ„ä¸­æ’å…¥ä¸€ä¸ª<code>\n</code>çš„<code>op</code>å³å¯ã€‚æ­¤å¤–ç”±äºæˆ‘ä»¬çš„ç¼–è¾‘å™¨æœ¬èº«ä¸æ”¯æŒè½¯å›è½¦ï¼Œå› æ­¤è¿™ä¸¤ç§ç±»å‹çš„å›è½¦éƒ½éœ€è¦ç»Ÿä¸€å¤„ç†ä¸ºç¡¬å›è½¦ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">switch</span> (inputType) {
  <span class="hljs-keyword">case</span> <span class="hljs-string">"insertLineBreak"</span>:
  <span class="hljs-keyword">case</span> <span class="hljs-string">"insertParagraph"</span>: {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">editor</span>.<span class="hljs-property">perform</span>.<span class="hljs-title function_">insertBreak</span>(sel);
    <span class="hljs-keyword">break</span>;
  }
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Perform</span> {
  public <span class="hljs-title function_">insertBreak</span>(<span class="hljs-params">sel: Range, attributes?: AttributeMap</span>) {
    <span class="hljs-keyword">const</span> raw = <span class="hljs-title class_">RawRange</span>.<span class="hljs-title function_">fromRange</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">editor</span>, sel);
    <span class="hljs-keyword">const</span> start = raw.<span class="hljs-property">start</span>;
    <span class="hljs-keyword">const</span> len = raw.<span class="hljs-property">len</span>;
    <span class="hljs-keyword">const</span> delta = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Delta</span>().<span class="hljs-title function_">retain</span>(start);
    len &amp;&amp; delta.<span class="hljs-title function_">delete</span>(len);
    delta.<span class="hljs-title function_">insertEOL</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">editor</span>.<span class="hljs-property">state</span>.<span class="hljs-title function_">apply</span>(delta, { <span class="hljs-attr">range</span>: raw });
  }
}
</code></pre>
<p>è¿™ä»¶äº‹çœ‹èµ·æ¥å¹¶æ²¡æœ‰é‚£ä¹ˆå¤æ‚ï¼Œå› ä¸º<code>DOM</code>çš„ç»“æ„å˜æ›´å¤„ç†æ˜¯ç”±æˆ‘ä»¬çš„<code>LineState</code>ä»¥åŠ<code>Mutate</code>æ¨¡å—å®ç°çš„ï¼Œ<code>Mutate</code>æ¨¡å—å®ç°äº†<code>key</code>å€¼çš„ç»´æŠ¤ä»¥åŠ<code>immutable</code>ã€‚æ¥ä¸‹æ¥ï¼Œåœ¨<code>React</code>é€‚é…å™¨ä¸­ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç›´æ¥ä»¥<code>LineState</code>ä¸ºåŸºå‡†æ¸²æŸ“è¡Œç»“æ„ï¼Œæ¸²æŸ“è¿™ä»¶äº‹å°±è‡ªç„¶è€Œç„¶åœ°äº¤ç»™äº†<code>React</code>ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">/**
 * æ•°æ®åŒæ­¥å˜æ›´, å¼‚æ­¥æ‰¹é‡ç»˜åˆ¶å˜æ›´
 */</span>
<span class="hljs-keyword">const</span> onContentChange = <span class="hljs-title function_">useMemoFn</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">setLines</span>(state.<span class="hljs-title function_">getLines</span>());
});

<span class="hljs-comment">/**
 * ç›‘å¬å†…å®¹å˜æ›´äº‹ä»¶, æ›´æ–°å½“å‰å—è§†å›¾
 */</span>
<span class="hljs-title function_">useLayoutEffect</span>(<span class="hljs-function">() =&gt;</span> {
  editor.<span class="hljs-property">event</span>.<span class="hljs-title function_">on</span>(<span class="hljs-variable constant_">EDITOR_EVENT</span>.<span class="hljs-property">CONTENT_CHANGE</span>, onContentChange);
  <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
    editor.<span class="hljs-property">event</span>.<span class="hljs-title function_">off</span>(<span class="hljs-variable constant_">EDITOR_EVENT</span>.<span class="hljs-property">CONTENT_CHANGE</span>, onContentChange);
  };
}, [editor.<span class="hljs-property">event</span>, onContentChange]);
</code></pre>
<p><code>Mutate</code>æ¨¡å—å®ç°çš„ç®—æ³•ä¼šæ¯”è¾ƒå¤æ‚ï¼Œè¿™é‡Œå°±æš‚æ—¶å…ˆä¸å±•å¼€äº†ã€‚ç®€å•æ¥è¯´ï¼Œå°±æ˜¯ä¼šæ ¹æ®å½“å‰çš„é€‰åŒºä½ç½®ï¼Œæ‰¾åˆ°å¯¹åº”çš„è¡Œç»“æ„ï¼Œç„¶åå°†å…¶æ‹†åˆ†ä¸ºä¸¤è¡Œï¼Œå¹¶ä¸”ç»§æ‰¿å½“å‰è¡Œçš„æ ¼å¼å±æ€§ã€‚å½“ç„¶æˆ‘ä»¬å¹¶ä¸æ˜¯<code>Case By Case</code>åœ°å¤„ç†ï¼Œè€Œæ˜¯æ ¹æ®å˜æ›´çš„<code>Delta</code>æ“ä½œå®ç°ä¸€ä¸ªé€šç”¨çš„å˜æ›´æ¨¡å¼ã€‚</p>
<p>çœ‹èµ·æ¥æ’å…¥å›è½¦è¿™ä»¶äº‹å°±ç®€å•çš„ç»“æŸäº†ï¼Œç„¶è€Œå®é™…ä¸Šå¹¶æ²¡æœ‰ï¼Œè¿™ä»¶äº‹å¤æ‚çš„ç‚¹åœ¨äºè¡Œæ ¼å¼çš„ç»§æ‰¿é—®é¢˜ã€‚åœ¨æˆ‘ä»¬çš„<code>Mutate</code>çš„è®¾è®¡ä¸­ï¼Œåœ¨è¡Œæ ·å¼çš„å¤„ç†ä¸Šæˆ‘ä»¬æ˜¯å®Œå…¨éµå¾ªç€<code>delta</code>çš„æ•°æ®ç»“æ„è®¾è®¡ï¼Œå³æœ€åçš„<code>EOL</code>èŠ‚ç‚¹æ‰æ‰¿è½½è¡Œæ ·å¼ã€‚</p>
<p>é‚£ä¹ˆè¿™æ ·ä¼šé€ æˆä¸€ä¸ªæ¯”è¾ƒåç›´è§‰çš„é—®é¢˜ï¼Œå¦‚æœæˆ‘ä»¬ç›´æ¥åœ¨è¡Œä¸­é—´æ’å…¥<code>\n</code>çš„è¯ï¼ŒåŸæœ¬çš„è¡Œæ ·å¼æ˜¯ä¼šå¤„äºä¸‹ä¸€è¡Œçš„ï¼Œå› ä¸ºæœ¬è´¨ä¸Šæ˜¯å› ä¸º<code>EOL</code>èŠ‚ç‚¹æ˜¯åœ¨æœ«å°¾çš„ï¼Œæ­¤æ—¶æ’å…¥<code>\n</code>è‡ªç„¶åŸæœ¬çš„<code>EOL</code>æ˜¯ä¼šç›´æ¥è·Ÿéšåˆ°ä¸‹ä¸€è¡Œçš„ã€‚</p>
<p>è¿™ä¸ªé—®é¢˜æœ¬è´¨ä¸Šæ˜¯ç”±äº<code>\n</code>å¤ªæ»åäº†å¯¼è‡´äº†ï¼Œè€Œå¦‚æœæˆ‘ä»¬å°†æ‰¿è½½è¡Œå†…å®¹çš„èŠ‚ç‚¹å‰æï¼Œä¹Ÿå°±æ˜¯åœ¨è¡Œé¦–åŠ å…¥<code>SOL-Start Of Line</code>èŠ‚ç‚¹ï¼Œç”±è¯¥èŠ‚ç‚¹æ¥æ‰¿è½½æ ·å¼ï¼Œ<code>\n</code>èŠ‚ç‚¹ä»…ç”¨äºåˆ†å‰²è¡Œï¼Œé‚£ä¹ˆåœ¨æ‰§è¡Œ<code>Mutate Insert</code>çš„æ—¶å€™è‡ªç„¶å°±èƒ½å¾ˆè½»æ¾åœ°å¾—åˆ°å°†è¡Œæ ·å¼ä¿ç•™åœ¨ä¸Šä¸€è¡Œï¼Œè€Œä¸æ˜¯è·Ÿéšåˆ°ä¸‹ä¸€è¡Œã€‚</p>
<p>ä½†æ˜¯è¿™ç§æ–¹å¼å¾ˆæ˜æ˜¾ä¼šå› ä¸ºç ´åäº†åŸæœ¬çš„æ•°æ®ç»“æ„ï¼Œå› æ­¤å¯¼è‡´æ•´ä¸ªçŠ¶æ€ç®¡ç†å‘ç”Ÿæ–°çš„é—®é¢˜ï¼Œéœ€è¦å¾ˆå¤šé¢å¤–çš„<code>Case</code>æ¥å¤„ç†è¿™ä¸ªä¸éœ€è¦æ¸²æŸ“çš„èŠ‚ç‚¹æ‰€å¸¦æ¥çš„é—®é¢˜ã€‚è¿˜æœ‰ä¸€ç§æ–¹æ¡ˆæ˜¯åœ¨<code>Mutate Iterator</code>å¯¹è±¡ä¸­åŠ å…¥<code>used</code>æ ‡è®°ï¼Œå½“æ’å…¥çš„èŠ‚ç‚¹ä¸º<code>\n</code>æ—¶ä¼šæ£€æŸ¥å½“å‰çš„å­˜é‡<code>LineState</code>æ˜¯å¦è¢«å¤ç”¨è¿‡ã€‚</p>
<p>å¦‚æœæ²¡æœ‰è¢«å¤ç”¨è¿‡çš„è¯å°±ç›´æ¥å°†è¯¥<code>State</code>çš„<code>key</code>ã€<code>attrs</code>å…¨éƒ¨å¤ç”¨è¿‡æ¥ï¼Œå½“åç»­çš„<code>\n</code>èŠ‚ç‚¹å†è¯»åŒºæ—¶åˆ™ä¼šå› ä¸ºå·²ç»å¤ç”¨è¿‡å¯¼è‡´æ— æ³•å†å¤ç”¨ï¼Œæ­¤æ—¶å°±æ˜¯å®Œå…¨é‡æ–°åˆ›å»ºçš„æ–°çŠ¶æ€ã€‚</p>
<p>ä½†æ˜¯è¿™é‡Œçš„é—®é¢˜æ˜¯æ— æ³•å¾ˆå¥½åœ°ä¿è¯ç¬¬äºŒä¸ª<code>\n</code>çš„å®é™…å€¼ï¼Œä¹Ÿå°±æ˜¯è¯´ç ´åäº†æˆ‘ä»¬åŸæœ¬çš„æ¨¡å‹ç»“æ„ï¼Œå…¶å¹¶ä¸æ˜¯äº¤æ¢å¼çš„ï¼Œä¹Ÿæ— æ³•å°†ç¡®å®šçš„æ–°å€¼ä¼ é€’åˆ°ç¬¬äºŒä¸ª<code>\n</code>ä¸Šï¼Œè€Œä¸”åœ¨<code>Mutate Compose</code>çš„è¿‡ç¨‹ä¸­åšè¿™ä»¶äº‹æ˜¯ä¼šå¯¼è‡´çœŸçš„éœ€è¦å®ç°è¿™ç§æ•ˆæœæ—¶æ— æ³•è§„é¿è¿™ä¸ªè¡Œä¸ºã€‚</p>
<p>å®é™…ä¸Š<code>Quill</code>åˆ™æ˜¯ä¼šå­˜åœ¨åŒæ ·çš„é—®é¢˜ï¼Œæˆ‘å‘ç°å…¶å¦‚æœç›´æ¥æ‰§è¡Œæ’å…¥<code>\n</code>çš„è¯ä¹Ÿæ˜¯ä¼šå°†æ ·å¼è·Ÿéšåˆ°ä¸‹ä¸€è¡Œï¼Œé‚£ä¹ˆå…¶å®è¿™æ ·å°±æ„å‘³ç€å…¶è¡Œæ ·å¼ç»§æ‰¿æ˜¯åœ¨å›è½¦çš„äº‹ä»¶å¤„ç†çš„ï¼Œè®¾æƒ³äº†ä¸€ä¸‹è¿™ç§æ–¹å¼çš„å¤„ç†æ˜¯åˆç†çš„ï¼Œè¿™ç§æƒ…å†µä¸‹æˆ‘ä»¬å°±å¯ä»¥æ˜¯å®Œå…¨å—æ§çš„æƒ…å†µå¤„ç†ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// https://quilljs.com/playground/snow</span>
quill.<span class="hljs-title function_">updateContents</span>([{ <span class="hljs-attr">retain</span>: <span class="hljs-number">3</span> }, { <span class="hljs-attr">insert</span>: <span class="hljs-string">"\n"</span> }]);
</code></pre>
<p>é‚£ä¹ˆå›åˆ°ç¼–è¾‘å™¨å›è½¦è¿™ä»¶äº‹ä¸Šï¼Œåœ¨è¡Œæ ¼å¼çš„ç»§æ‰¿ä¸Šï¼Œå¦‚æœæ¥ç€ä¸Šè¿°çš„æ“ä½œå®ç°ï¼Œåˆ™å¾ˆå®¹æ˜“åœ°å¯ä»¥çœ‹å‡ºæ¥è¡Œæ ¼å¼çš„ç»§æ‰¿é—®é¢˜ã€‚åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œ<code>quota</code>è¡¨ç¤ºå¼•ç”¨æ ¼å¼ï¼Œå¦‚æœåœ¨<code>Md</code>ä¸­å¼•ç”¨æ˜¯ä»¥<code>&gt;</code>åœ¨è¡Œé¦–è¡¨ç¤ºçš„ï¼Œæ’å…¥å›è½¦æ—¶åŸå§‹è¡Œåº”è¯¥ä¿æŒå¼•ç”¨æ ¼å¼ï¼Œè€Œä¸‹é¢çš„ä¾‹å­ä¸­å¼•ç”¨æ ¼å¼å´ä»…è¡¨ç°åœ¨äº†æ–°è¡Œã€‚</p>
<pre><code class="hljs language-js" lang="js">[ { <span class="hljs-attr">insert</span>: <span class="hljs-string">"abc{caret}def"</span> }, { <span class="hljs-attr">insert</span>: <span class="hljs-string">"\n"</span>, <span class="hljs-attr">attributes</span>: { <span class="hljs-attr">quote</span>: <span class="hljs-string">"true"</span> } } ]
<span class="hljs-comment">// æ’å…¥å›è½¦å =&gt;</span>
[ { <span class="hljs-attr">insert</span>: <span class="hljs-string">"abc"</span> }, { <span class="hljs-attr">insert</span>: <span class="hljs-string">"\n"</span> }, { <span class="hljs-attr">insert</span>: <span class="hljs-string">"{caret}def"</span> }, { <span class="hljs-attr">insert</span>: <span class="hljs-string">"\n"</span>, <span class="hljs-attr">attributes</span>: { <span class="hljs-attr">quote</span>: <span class="hljs-string">"true"</span> } } ]
</code></pre>
<p>é‚£ä¹ˆåœ¨è¿™é‡Œå°±éœ€è¦åŒºåˆ†å¤šç§æƒ…å†µï¼Œé‚£ä¹ˆå¦‚æœæ˜¯åœ¨è¡Œé¦–ï¼Œå°±å°†å½“å‰å±æ€§å…¨éƒ¨å¸¦å…¥ä¸‹ä¸€è¡Œï¼Œå³é»˜è®¤çš„è¡Œä¸ºã€‚å¦‚æœåœ¨æœ«å°¾æ’å…¥å›è½¦ï¼Œåˆ™éœ€è¦å°†ä¸‹ä¸€è¡Œçš„å±æ€§å…¨éƒ¨æ¸…ç©ºï¼Œæ­¤æ—¶ä¹Ÿéœ€è¦åˆå¹¶ä¼ å…¥çš„å±æ€§ã€‚å¦‚æœåœ¨è¡Œä¸­é—´æ’å…¥å±æ€§ï¼Œåˆ™éœ€è¦æ‹·è´å½“å‰è¡Œå±æ€§æ”¾ç½®äºå½“å‰æ’å…¥çš„æ–°è¡Œå±æ€§ï¼Œå¦‚æœæ­¤æ—¶å­˜åœ¨ä¼ å…¥çš„å±æ€§åˆ™åŒæ ·éœ€è¦åˆå¹¶ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// |xx(\n {y:1}) =&gt; (\n)xx(\n {y:1})</span>
<span class="hljs-comment">// xx|(\n {y:1}) =&gt; xx(\n {y:1})(\n)</span>
<span class="hljs-comment">// xx|(\n {y:1}) =&gt; xx(\n {y:1})(\n &amp; attributes)</span>
<span class="hljs-comment">// x|x(\n {y:1}) =&gt; x(\n {y:1})x(\n {y:1})</span>
<span class="hljs-comment">// x|x(\n {y:1}) =&gt; x(\n {y:1})x(\n {y:1 &amp; attributes})</span>
</code></pre>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// å½“å…‰æ ‡åœ¨è¡Œé¦–æ—¶, ç›´æ¥ç§»åŠ¨è¡Œå±æ€§</span>
<span class="hljs-comment">// |xx(\n {y:1}) =&gt; (\n)|xx(\n {y:1} &amp; attributes)</span>
<span class="hljs-keyword">if</span> (start === startLine.<span class="hljs-property">start</span>) {
  delta.<span class="hljs-title function_">insertEOL</span>();
  <span class="hljs-keyword">const</span> lineOffset = endLine.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>;
  delta.<span class="hljs-title function_">retain</span>(lineOffset - sel.<span class="hljs-property">end</span>.<span class="hljs-property">offset</span>).<span class="hljs-title function_">retain</span>(<span class="hljs-number">1</span>, attributes);
  point = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Point</span>(sel.<span class="hljs-property">start</span>.<span class="hljs-property">line</span> + <span class="hljs-number">1</span>, <span class="hljs-number">0</span>);
  <span class="hljs-comment">// å½“å…‰æ ‡åœ¨è¡Œå°¾æ—¶, å°†è¡Œå±æ€§ä¿ç•™åœ¨å½“å‰è¡Œ</span>
  <span class="hljs-comment">// xx|(\n {y:1}) =&gt; xx(\n {y:1})(\n attributes)</span>
} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (start === startLine.<span class="hljs-property">start</span> + startLine.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>) {
  delta.<span class="hljs-title function_">retain</span>(<span class="hljs-number">1</span>).<span class="hljs-title function_">insertEOL</span>(attributes);
  point = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Point</span>(sel.<span class="hljs-property">start</span>.<span class="hljs-property">line</span> + <span class="hljs-number">1</span>, <span class="hljs-number">0</span>);
  <span class="hljs-comment">// å½“å…‰æ ‡åœ¨è¡Œä¸­æ—¶, å°†è¡Œå±æ€§ä¿ç•™åœ¨å½“å‰è¡Œ, ä¸‹ä¸€è¡Œåˆå¹¶æ–°å±æ€§</span>
  <span class="hljs-comment">// x|x(\n {y:1}) =&gt; xx(\n {y:1})(\n {y:1} &amp; attributes)</span>
} <span class="hljs-keyword">else</span> {
  delta.<span class="hljs-title function_">insertEOL</span>(startLine.<span class="hljs-property">attributes</span>);
  <span class="hljs-keyword">const</span> lineOffset = endLine.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>;
  <span class="hljs-keyword">const</span> attrs = { ...startLine.<span class="hljs-property">attributes</span>, ...attributes };
  delta.<span class="hljs-title function_">retain</span>(lineOffset - sel.<span class="hljs-property">end</span>.<span class="hljs-property">offset</span>).<span class="hljs-title function_">retain</span>(<span class="hljs-number">1</span>, attrs);
}
</code></pre>
<h2 data-id="heading-2">åˆ é™¤æ“ä½œ</h2>
<p>åˆ é™¤æ“ä½œåŒæ ·æ˜¯æ–‡æœ¬ç»“æ„å˜æ›´ä¸­æ¯”è¾ƒé‡è¦çš„ä¸€ä¸ªæ“ä½œï¼Œè€ŒåŒæ ·çš„åˆ é™¤ä¹Ÿéœ€è¦å…³æ³¨è¡Œç»“æ„çš„åˆå¹¶ä»¥åŠè¡Œæ ¼å¼çš„é—®é¢˜ã€‚é¦–å…ˆèŠçš„æ˜¯ç›¸å¯¹ç®€å•çš„éƒ¨åˆ†ï¼Œåˆ é™¤æ–‡æœ¬ç‰‡æ®µå†…å®¹ï¼Œç”±äºæœ¬èº«æˆ‘ä»¬çš„é€‰åŒºæ˜¯æºå¸¦<code>Range</code>ä¿¡æ¯çš„ï¼Œå› æ­¤åˆ é™¤æ–‡æœ¬ç‰‡æ®µå†…å®¹å…¶å®å¹¶æ²¡æœ‰ä»€ä¹ˆå¤æ‚çš„åœ°æ–¹ï¼Œç›´æ¥æ ¹æ®é€‰åŒºåˆ é™¤å¯¹åº”çš„å†…å®¹å³å¯ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Perform</span> {
  public <span class="hljs-title function_">deleteFragment</span>(<span class="hljs-params">sel: Range</span>) {
    <span class="hljs-keyword">if</span> (sel.<span class="hljs-property">isCollapsed</span>) <span class="hljs-keyword">return</span> <span class="hljs-keyword">void</span> <span class="hljs-number">0</span>;
    <span class="hljs-keyword">const</span> raw = <span class="hljs-title class_">RawRange</span>.<span class="hljs-title function_">fromRange</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">editor</span>, sel);
    <span class="hljs-keyword">if</span> (!raw) <span class="hljs-keyword">return</span> <span class="hljs-keyword">void</span> <span class="hljs-number">0</span>;
    <span class="hljs-keyword">const</span> len = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(raw.<span class="hljs-property">len</span>, <span class="hljs-number">0</span>);
    <span class="hljs-keyword">const</span> start = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(raw.<span class="hljs-property">start</span>, <span class="hljs-number">0</span>);
    <span class="hljs-keyword">if</span> (start &lt; <span class="hljs-number">0</span> || len &lt;= <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-keyword">void</span> <span class="hljs-number">0</span>;
    <span class="hljs-keyword">const</span> delta = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Delta</span>().<span class="hljs-title function_">retain</span>(start).<span class="hljs-title function_">delete</span>(len);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">editor</span>.<span class="hljs-property">state</span>.<span class="hljs-title function_">apply</span>(delta, { <span class="hljs-attr">range</span>: raw });
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">void</span> <span class="hljs-number">0</span>;
  }
}
</code></pre>
<p>è€Œåˆ é™¤æœ¬èº«è¿˜å­˜åœ¨å‘å‰åˆ é™¤å’Œå‘ååˆ é™¤çš„æƒ…å†µï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦åˆ†åˆ«å¤„ç†<code>deleteContentBackward</code>å’Œ<code>deleteContentForward</code>ä¸¤ç§è¾“å…¥ç±»å‹ã€‚å®é™…ä¸Šè¿™ä¸¤ç§åˆ é™¤çš„å®ç°æ˜¯ç±»ä¼¼çš„ï¼Œä¸»è¦æ˜¯è®¡ç®—åˆ é™¤çš„ä½ç½®ä¸åŒè€Œå·²ï¼Œä½†æ˜¯ä¹Ÿéœ€è¦åˆ†åˆ«å¤„ç†è¡Œé¦–è¡Œæœ«ç­‰æƒ…å†µã€‚</p>
<p>å¤„ç†<code>backward</code>åˆ é™¤æ—¶ä¸»è¦æ˜¯å¤„ç†è¡Œé¦–åˆ é™¤çš„æƒ…å†µï¼Œå³å¤„äºå½“å‰è¡Œçš„è¡Œé¦–, ä¸”å­˜åœ¨è¡ŒçŠ¶æ€èŠ‚ç‚¹ã€‚æ­¤æ—¶åˆ†åˆ«å¤„ç†ä¸Šä¸ªèŠ‚ç‚¹ä¸ºå—èŠ‚ç‚¹ã€å½“å‰è¡Œå­˜åœ¨è¡Œå±æ€§ã€å½“å‰è¡Œä¸å­˜åœ¨è¡Œå±æ€§ä¸‰ç§æƒ…å†µï¼Œè¿™é‡Œçš„ä¸»è¦ç›®æ ‡æ˜¯åˆ é™¤æ—¶è¦åˆ é™¤å½“å‰è¡Œç»“æ„ï¼Œä»¥æ­¤æ›´åŠ ç¬¦åˆæ“ä½œç›´è§‰ï¼Œå¹¶ä¸”å°†å…‰æ ‡ç§»åŠ¨åˆ°åˆé€‚çš„ä½ç½®ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// å¤„äºå½“å‰è¡Œçš„è¡Œé¦–, ä¸”å­˜åœ¨è¡ŒçŠ¶æ€èŠ‚ç‚¹</span>
<span class="hljs-keyword">if</span> (line &amp;&amp; sel.<span class="hljs-property">start</span>.<span class="hljs-property">offset</span> === <span class="hljs-number">0</span>) {
  <span class="hljs-keyword">const</span> prevLine = line &amp;&amp; line.<span class="hljs-title function_">prev</span>();
  <span class="hljs-comment">// ä¸Šä¸€è¡Œä¸ºå—èŠ‚ç‚¹ä¸”å¤„äºå½“å‰è¡Œé¦–æ—¶, åˆ é™¤åˆ™ç§»åŠ¨å…‰æ ‡åˆ°è¯¥èŠ‚ç‚¹ä¸Š</span>
  <span class="hljs-keyword">if</span> (prevLine &amp;&amp; <span class="hljs-title function_">isBlockLine</span>(prevLine)) {
  <span class="hljs-comment">// å½“å‰è¡Œä¸ºç©ºæ—¶ç‰¹æ®Šå¤„ç†, å…ˆåˆ é™¤æ‰è¯¥è¡Œ</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-title function_">isEmptyLine</span>(line)) {
      <span class="hljs-keyword">const</span> delta = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Delta</span>().<span class="hljs-title function_">retain</span>(line.<span class="hljs-property">start</span>).<span class="hljs-title function_">delete</span>(<span class="hljs-number">1</span>);
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">editor</span>.<span class="hljs-property">state</span>.<span class="hljs-title function_">apply</span>(delta, { <span class="hljs-attr">autoCaret</span>: <span class="hljs-literal">false</span> });
    }
    <span class="hljs-keyword">const</span> firstLeaf = prevLine.<span class="hljs-title function_">getFirstLeaf</span>();
    <span class="hljs-keyword">const</span> range = firstLeaf &amp;&amp; firstLeaf.<span class="hljs-title function_">toRange</span>();
    range &amp;&amp; <span class="hljs-variable language_">this</span>.<span class="hljs-property">editor</span>.<span class="hljs-property">selection</span>.<span class="hljs-title function_">set</span>(range, <span class="hljs-literal">true</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">void</span> <span class="hljs-number">0</span>;
  }
  <span class="hljs-keyword">const</span> attrsLength = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(line.<span class="hljs-property">attributes</span>).<span class="hljs-property">length</span>;
  <span class="hljs-comment">// å¦‚æœåœ¨å½“å‰è¡Œçš„è¡Œé¦–, ä¸”å­˜åœ¨å…¶ä»–è¡Œå±æ€§, åˆ™åˆ é™¤å½“å‰è¡Œçš„è¡Œå±æ€§</span>
  <span class="hljs-keyword">if</span> (attrsLength &gt; <span class="hljs-number">0</span>) {
    <span class="hljs-keyword">const</span> delta = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Delta</span>().<span class="hljs-title function_">retain</span>(line.<span class="hljs-property">start</span> + line.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>).<span class="hljs-title function_">retain</span>(<span class="hljs-number">1</span>, <span class="hljs-title function_">invertAttributes</span>(line.<span class="hljs-property">attributes</span>));
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">editor</span>.<span class="hljs-property">state</span>.<span class="hljs-title function_">apply</span>(delta, { <span class="hljs-attr">autoCaret</span>: <span class="hljs-literal">false</span> });
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">void</span> <span class="hljs-number">0</span>;
  }
  <span class="hljs-comment">// å¦‚æœåœ¨å½“å‰è¡Œçš„è¡Œé¦–, ä¸”ä¸å­˜åœ¨å…¶ä»–è¡Œå±æ€§, åˆ™å°†å½“å‰è¡Œå±æ€§ç§»åˆ°ä¸‹ä¸€è¡Œ</span>
  <span class="hljs-keyword">if</span> (prevLine &amp;&amp; !attrsLength) {
    <span class="hljs-keyword">const</span> prevAttrs = { ...prevLine.<span class="hljs-property">attributes</span> };
    <span class="hljs-keyword">const</span> delta = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Delta</span>().<span class="hljs-title function_">retain</span>(line.<span class="hljs-property">start</span> - <span class="hljs-number">1</span>).<span class="hljs-title function_">delete</span>(<span class="hljs-number">1</span>).<span class="hljs-title function_">retain</span>(line.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>).<span class="hljs-title function_">retain</span>(<span class="hljs-number">1</span>, prevAttrs);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">editor</span>.<span class="hljs-property">state</span>.<span class="hljs-title function_">apply</span>(delta);
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">void</span> <span class="hljs-number">0</span>;
  }
}
</code></pre>
<p>è€Œå¤„ç†<code>forward</code>åˆ é™¤æ—¶ä¸»è¦æ˜¯å¤„ç†è¡Œæœ«åˆ é™¤çš„æƒ…å†µï¼Œè¿™ä¸ªæƒ…å†µç›¸å¯¹èµ·æ¥ä¼šæ›´ç®€å•ä¸€äº›ï¼Œæ­¤æ—¶å¹¶æ²¡å¤„ç†å¤æ‚æƒ…å†µï¼Œå› ä¸ºå…¶æ“ä½œæ›´ä¸é«˜é¢‘ã€‚å¦‚æœæ­¤æ—¶å…‰æ ‡ä½äºå—èŠ‚ç‚¹ä¸Šï¼Œé‚£ä¹ˆåˆ é™¤æ—¶ç›´æ¥æ‰§è¡Œå½“å‰å—èŠ‚ç‚¹çš„åˆ é™¤æ“ä½œå³å¯ã€‚å¦‚æœå…‰æ ‡ä½äºå½“å‰è¡Œçš„è¡Œæœ«ï¼Œä¸”ä¸‹ä¸€è¡Œä¸ºå—èŠ‚ç‚¹ï¼Œé‚£ä¹ˆåˆ é™¤æ—¶åˆ™å°†å…‰æ ‡ç§»åŠ¨åˆ°è¯¥å—èŠ‚ç‚¹ä¸Šã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// å½“å‰è¡Œä¸ºå—ç»“æ„æ—¶, æ‰§è¡Œ backward åˆ é™¤æ“ä½œ</span>
<span class="hljs-keyword">if</span> (line &amp;&amp; sel.<span class="hljs-property">start</span>.<span class="hljs-property">offset</span> === <span class="hljs-number">1</span> &amp;&amp; <span class="hljs-title function_">isBlockLine</span>(line)) { 
  <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">deleteBackward</span>(sel);
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">void</span> <span class="hljs-number">0</span>;
}
<span class="hljs-keyword">const</span> nextLine = line &amp;&amp; line.<span class="hljs-title function_">next</span>();
<span class="hljs-comment">// ä¸‹ä¸€è¡Œä¸ºå—èŠ‚ç‚¹ä¸”å¤„äºå½“å‰è¡Œæœ«æ—¶, åˆ é™¤åˆ™ç§»åŠ¨å…‰æ ‡åˆ°è¯¥èŠ‚ç‚¹ä¸Š</span>
<span class="hljs-keyword">if</span> (line &amp;&amp; sel.<span class="hljs-property">start</span>.<span class="hljs-property">offset</span> === line.<span class="hljs-property">length</span> - <span class="hljs-number">1</span> &amp;&amp; nextLine &amp;&amp; <span class="hljs-title function_">isBlockLine</span>(nextLine)) {
  <span class="hljs-keyword">const</span> firstLeaf = nextLine.<span class="hljs-title function_">getFirstLeaf</span>();
  <span class="hljs-keyword">const</span> range = firstLeaf &amp;&amp; firstLeaf.<span class="hljs-title function_">toRange</span>();
  range &amp;&amp; <span class="hljs-variable language_">this</span>.<span class="hljs-property">editor</span>.<span class="hljs-property">selection</span>.<span class="hljs-title function_">set</span>(range, <span class="hljs-literal">true</span>);
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">void</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p>åœ¨åˆ é™¤å†…å®¹è¿™é‡Œæœ€éœ€è¦å…³æ³¨çš„å…¶å®æ˜¯è§†å›¾å±‚é—®é¢˜ï¼Œå½“ä¸<code>React</code>ç»“åˆçš„è§†å›¾å±‚é¢æ›´æ–°æ—¶ï¼ŒåŒæ ·ä¹Ÿä¼šå‡ºç°éå—æ§è¡Œä¸ºçš„é—®é¢˜ï¼Œè¿™é‡Œçš„ä¸å—æ§æ˜¯<code>React</code>æ•°æ®å±‚åŠå…¶æ¸²æŸ“å±‚çš„é—®é¢˜ã€‚å…¶å®ï¼Œè¿™é‡Œæœ¬è´¨ä¸Šè¿˜æ˜¯è·Ÿ<code>IME</code>è¾“å…¥çš„<code>DOM</code>å˜æ›´æœ‰å…³ã€‚</p>
<p>å…·ä½“æ¥è¯´ï¼Œå½“é€‰åŒºå­˜åœ¨è·¨èŠ‚ç‚¹è¡Œä¸ºæ—¶ï¼Œæ— è®ºæ˜¯è¡Œå†…è¿˜æ˜¯è·¨è¡Œçš„é€‰åŒºï¼Œå”¤é†’è¾“å…¥æ³•<code>Composing</code>è¾“å…¥å†…å®¹åï¼Œè¿™éƒ¨åˆ†èŠ‚ç‚¹å†…å®¹ä¼šè¢«åˆ é™¤ï¼Œå¹¶ä¸”æ›¿æ¢ä¸ºè¾“å…¥çš„å†…å®¹ã€‚ä½†æ˜¯å½“ç¡®å®šå†…å®¹ä¹‹åï¼Œç¼–è¾‘å™¨ä¾¿ä¼šå´©æºƒï¼Œè¿™ä¹Ÿæ˜¯åˆ é™¤ä¸æ’å…¥çš„åˆå¹¶æ“ä½œé€ æˆçš„é—®é¢˜ï¼ŒæŠ¥é”™å†…å®¹å¦‚ä¸‹:</p>
<pre><code class="hljs language-csharp" lang="csharp">Failed to execute <span class="hljs-string">'removeChild'</span> <span class="hljs-keyword">on</span> <span class="hljs-string">'Node'</span>: The node to be removed <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> a child of <span class="hljs-keyword">this</span> node.
</code></pre>
<p>ä»æŠ¥é”™ä¸Šæ¥çœ‹ï¼Œ<code>React</code>ä¼šå°†å­èŠ‚ç‚¹ä»çˆ¶èŠ‚ç‚¹ç§»é™¤ï¼Œè¿™æœ¬èº«æ˜¯éå¸¸åˆç†çš„è¡Œä¸ºã€‚ä¸¾ä¸ªä¾‹å­ï¼Œå½“å®ç°ä¸€ä¸ªåˆ—è¡¨æ—¶ï¼Œå¦‚æœæ•°æ®æºåˆ é™¤äº†æŸäº›èŠ‚ç‚¹ï¼Œé‚£ä¹ˆ<code>React</code>å°±ä¼šå°†å¯¹åº”çš„<code>DOM</code>èŠ‚ç‚¹è‡ªåŠ¨ç§»é™¤æ‰ï¼Œä¹Ÿå°±æ˜¯ä¸éœ€è¦æ“ä½œ<code>DOM</code>ï¼Œè€Œæ˜¯å¯ä»¥ç›´æ¥é€šè¿‡å£°æ˜å¼çš„æ–¹å¼æ¥å®ç°å˜æ›´ã€‚</p>
<p>é‚£ä¹ˆè¿™é‡Œçš„é—®é¢˜å°±å‡ºç°åœ¨è¿™äº›<code>DOM</code>å·²ç»å®é™…ä¸Šè¢«ç§»é™¤äº†ï¼Œå› æ­¤å½“<code>React</code>å°è¯•ç§»é™¤è¿™äº›èŠ‚ç‚¹æ—¶å°±ä¼šæŠ¥é”™ï¼Œè€Œè¿™ä¸ªå¼‚å¸¸ä¼šå¯¼è‡´æ•´ä¸ªç¼–è¾‘å™¨å´©æºƒï¼Œå› æ­¤æˆ‘ä»¬å°±éœ€è¦é¿å…è¿™ä¸ªæƒ…å†µçš„å‘ç”Ÿã€‚é‚£ä¹ˆé¦–å…ˆå°±éœ€è¦é¿å…<code>removeChild</code>çš„å¼‚å¸¸ï¼Œæˆ‘ä»¬å¾ˆéš¾ç›´æ¥é¿å…<code>React</code>çš„è¡Œä¸ºï¼Œå› æ­¤åªèƒ½åœ¨<code>DOM</code>èŠ‚ç‚¹ä¸Šè¿›è¡Œæ‹¦æˆªã€‚</p>
<p>ç„¶è€Œï¼Œå³ä½¿æ˜¯åœ¨<code>DOM</code>ä¸Šå¤„ç†æ‹¦æˆªè¡Œä¸ºä¹Ÿå¹¶ä¸å®¹æ˜“ï¼Œ<code>removeChild</code>æ–¹æ³•æ˜¯åœ¨<code>Node</code>å¯¹è±¡ä¸Šçš„ï¼Œå¦‚æœæˆ‘ä»¬ç›´æ¥é‡å†™<code>Node.prototype.removeChild</code>æ–¹æ³•ï¼Œé‚£ä¹ˆå°±ä¼šå½±å“åˆ°æ•´ä¸ªé¡µé¢çš„<code>DOM</code>èŠ‚ç‚¹ï¼Œå› æ­¤æˆ‘ä»¬åªèƒ½å°è¯•åœ¨ç¼–è¾‘å™¨çš„<code>ref</code>ä¸Šå¤„ç†ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">/**
 * é‡å†™ removeChild æ–¹æ³•
 * - é¿å… IME ç ´åè·¨èŠ‚ç‚¹æ¸²æŸ“é€ æˆé—®é¢˜
 * - https://github.com/facebookarchive/draft-js/issues/1320
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">rewriteRemoveChild</span> = (<span class="hljs-params">node: Node</span>) =&gt; {
  <span class="hljs-keyword">const</span> removeChild = <span class="hljs-title class_">Node</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">removeChild</span>;
  node.<span class="hljs-property">removeChild</span> = <span class="hljs-keyword">function</span> &lt;T <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Node</span>&gt;(<span class="hljs-attr">child</span>: T) {
    <span class="hljs-keyword">if</span> (child.<span class="hljs-property">parentNode</span> !== <span class="hljs-variable language_">this</span>) <span class="hljs-keyword">return</span> child;
    <span class="hljs-keyword">return</span> removeChild.<span class="hljs-title function_">call</span>(<span class="hljs-variable language_">this</span>, child) <span class="hljs-keyword">as</span> T;
  };
};
</code></pre>
<p>ç„¶è€Œç¼–è¾‘å™¨æœ¬èº«ä¼šå­˜åœ¨å¤§é‡çš„<code>DOM</code>èŠ‚ç‚¹ï¼Œæˆ‘ä»¬å¾ˆéš¾åœ¨æ‰€æœ‰çš„èŠ‚ç‚¹ä¸Šè¿›è¡Œé‡å†™ï¼Œå› æ­¤æˆ‘ä»¬è¿˜éœ€è¦é™åˆ¶<code>DOM</code>å˜åŠ¨çš„èŒƒå›´ã€‚åœ¨<code>React</code>ä¸­æ§åˆ¶é‡æ¸²æŸ“çš„æ–¹å¼å¯ä»¥é€šè¿‡<code>key</code>æ¥å®ç°ï¼Œå› æ­¤å°±éœ€è¦åœ¨<code>IME</code>è¾“å…¥èµ·å§‹æ—¶åˆ·æ–°ç›¸å…³èŠ‚ç‚¹çš„<code>key</code>ï¼Œä»¥æ­¤æ¥é¿å…<code>React</code>å¤ç”¨è¿™äº›èŠ‚ç‚¹ï¼Œç„¶ååˆ·æ–°èŒƒå›´å°±é™åˆ¶åœ¨äº†è¡ŒèŠ‚ç‚¹ä¸Šã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">/**
 * ç»„åˆè¾“å…¥å¼€å§‹
 * <span class="hljs-doctag">@param</span> <span class="hljs-variable">event</span>
 */</span>
@<span class="hljs-title class_">Bind</span>
protected <span class="hljs-title function_">onCompositionStart</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// éœ€è¦å¼ºåˆ¶åˆ·æ–° state.key, ä¸”éœ€è¦é…åˆ removeChild é¿å…æŠ›å‡ºå¼‚å¸¸</span>
  <span class="hljs-keyword">const</span> sel = <span class="hljs-variable language_">this</span>.<span class="hljs-property">editor</span>.<span class="hljs-property">selection</span>.<span class="hljs-title function_">get</span>();
  <span class="hljs-keyword">if</span> (!sel || sel.<span class="hljs-property">isCollapsed</span>) <span class="hljs-keyword">return</span> <span class="hljs-keyword">void</span> <span class="hljs-number">0</span>;
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = sel.<span class="hljs-property">start</span>.<span class="hljs-property">line</span>; i &lt;= sel.<span class="hljs-property">end</span>.<span class="hljs-property">line</span>; ++i) {
    <span class="hljs-keyword">const</span> line = <span class="hljs-variable language_">this</span>.<span class="hljs-property">editor</span>.<span class="hljs-property">state</span>.<span class="hljs-property">block</span>.<span class="hljs-title function_">getLine</span>(i);
    line &amp;&amp; line.<span class="hljs-title function_">forceRefresh</span>();
  }
}
</code></pre>
<p>ç„¶ååœ¨<code>React</code>æ§åˆ¶èŠ‚ç‚¹çš„éƒ¨åˆ†ï¼Œå°±éœ€è¦å°†é‡å†™çš„é€»è¾‘åŠ å…¥åˆ°å—èŠ‚ç‚¹ä»¥åŠè¡ŒèŠ‚ç‚¹çš„<code>DOM</code>ä¸Šï¼Œä»¥æ­¤æ¥é¿å…å¼‚å¸¸çš„å‘ç”Ÿã€‚è¿™é‡Œè¿˜éœ€è¦é¿å…<code>ref</code>å‡½æ•°çš„é‡å¤æ‰§è¡Œï¼Œ<code>React</code>çš„ç‰¹æ€§æ˜¯å¦‚æœ<code>ref</code>å¼•ç”¨ä¸åŒå°±ä¼šåŸå§‹çš„å¼•ç”¨å†è°ƒç”¨æ–°çš„æ–¹æ³•ï¼Œå› æ­¤è¿™é‡Œéœ€è¦å€ŸåŠ©<code>useMemoFn</code>å®ç°ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> setModel = <span class="hljs-title function_">useMemoFn</span>(<span class="hljs-function">(<span class="hljs-params">ref: HTMLDivElement | <span class="hljs-literal">null</span></span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (ref) {
    <span class="hljs-title function_">rewriteRemoveChild</span>(ref);
  }
});
</code></pre>
<p>ä»æœ¬è´¨ä¸Šæ¥çœ‹ï¼Œæ˜¯æ‰§è¡Œè¾“å…¥æ³•æ—¶æ²¡æœ‰åŠæ³•æ§åˆ¶<code>DOM</code>çš„å˜æ›´è¡Œä¸ºï¼Œæˆ–è€…é˜»æ­¢æµè§ˆå™¨çš„é»˜è®¤è¡Œä¸ºã€‚ä½†æ˜¯æˆ‘ä»¬å´å¯ä»¥åœ¨<code>start</code>çš„æ—¶å€™å°±æ‰§è¡Œç›¸å…³çš„å¤„ç†ï¼Œç±»ä¼¼äºå°†<code>end</code>æ—¶çš„åˆ é™¤ä¸”æ’å…¥çš„è¡Œä¸ºåˆ†ç¦»å‡ºæ¥ï¼Œä¹Ÿå°±æ˜¯è¯´å…ˆæ‰§è¡Œ<code>deleteFragment</code>æ–¹æ³•ï¼Œå°†æ‰€æœ‰çš„<code>DOM</code>ç›´æ¥é€šè¿‡å…ˆç§»é™¤æ‰æ¥åŒæ­¥è¡Œä¸ºã€‚</p>
<p>ä½†æ˜¯è¿™é‡Œåˆå‡ºç°äº†æ–°çš„é—®é¢˜ï¼Œå› ä¸ºæœ¬èº«çš„<code>delete</code>æ–¹æ³•ä¼šå°†é€‰åŒºå†…çš„å†…å®¹å…¨éƒ¨åˆ é™¤ï¼Œè¿™æ ·çš„è¯ä¼šå¯¼è‡´å”¤é†’<code>IME</code>æ—¶ï¼Œé€‰åŒºæ‰€åœ¨çš„<code>DOM</code>èŠ‚ç‚¹ä¼šè¢«åˆ é™¤ã€‚å› æ­¤æµè§ˆå™¨ä¼šå°†å…‰æ ‡å…œåº•åˆ°å½“å‰è¡Œçš„èµ·å§‹ä½ç½®ï¼Œè™½ç„¶ä¸å½±å“æœ€ç»ˆè¾“å…¥çš„å†…å®¹ï¼Œä½†æ˜¯åœ¨è¾“å…¥çš„æ—¶å€™å°±å¯ä»¥æ˜æ˜¾åœ°çœ‹å‡ºæ¥é—®é¢˜ï¼Œæœ‰äº›å½±å“ç”¨æˆ·ä½“éªŒã€‚</p>
<p>åœ¨è¿™é‡Œå…¶å®è¿˜å¯ä»¥è€ƒè™‘ä¸€ç§å®ç°ï¼Œåœ¨ç»„åˆè¾“å…¥æ—¶åŒæ ·ä¼šåˆ é™¤é€‰åŒºçš„å†…å®¹ï¼Œä½†æ˜¯ä¿ç•™å…‰æ ‡æ‰€åœ¨çš„<code>DOM</code>èŠ‚ç‚¹ï¼Œè¿™ä¸ªå®ç°å°±ä¼šå¾ˆå¤æ‚ã€‚å…¶å®å¦‚æœèƒ½åœ¨å”¤é†’è¾“å…¥æ³•å‰å°±å°†é€‰åŒºåˆ é™¤å¹¶ä¸”å†è®¾ç½®å¥½å…‰æ ‡ä½ç½®ï¼Œå†å‡ºç°è¾“å…¥æ³•çš„è¯ï¼Œå€’æ˜¯å°±ä¸ä¼šå‡ºç°è¿™ä¸ªé—®é¢˜ï¼Œç„¶è€Œç›®å‰å¹¶æ²¡æœ‰ç›¸å…³çš„<code>API</code>å¯ä»¥å®ç°è¿™æ ·çš„è¡Œä¸ºã€‚</p>
<p>ä½†æ˜¯åœ¨åæœŸç ”ç©¶<code>slate</code>çš„å®ç°å‘ç°ï¼Œå…¶ä»…ä»…æ˜¯åœ¨<code>IME</code>ç»„åˆè¾“å…¥å¼€å§‹çš„æ—¶å€™åˆ é™¤äº†ç›¸å…³çš„èŠ‚ç‚¹ï¼Œè€Œæˆ‘ä»¬çš„ç¼–è¾‘å™¨å´æ— æ³•åšåˆ°ã€‚ç»è¿‡æ’æŸ¥ä¹‹åå‘ç°æ˜¯æ›´æ–°å†…å®¹åçš„æµè§ˆå™¨é€‰åŒºäº‹ä»¶è¢«æˆ‘ä»¬é˜»æ­¢äº†ï¼Œä½†æ˜¯è¿™é‡Œçš„è¡¨ç°ä¹Ÿæ¯”è¾ƒå¥‡æ€ªï¼Œé˜»æ­¢äº†é€‰åŒºæ›´æ–°ç«Ÿç„¶ä¼šå¯¼è‡´è¡Œçš„è¯¥èŠ‚ç‚¹åçš„æ‰€æœ‰èŠ‚ç‚¹éƒ½æ— æ³•æ¸²æŸ“å‡ºæ¥ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Input</span> {
  @<span class="hljs-title class_">Bind</span>
  protected <span class="hljs-title function_">onCompositionStart</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// é¿å… IME ç ´åè·¨èŠ‚ç‚¹æ¸²æŸ“é€ æˆé—®é¢˜</span>
    <span class="hljs-keyword">const</span> sel = <span class="hljs-variable language_">this</span>.<span class="hljs-property">editor</span>.<span class="hljs-property">selection</span>.<span class="hljs-title function_">get</span>();
    <span class="hljs-keyword">if</span> (!sel || sel.<span class="hljs-property">isCollapsed</span>) <span class="hljs-keyword">return</span> <span class="hljs-keyword">void</span> <span class="hljs-number">0</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">editor</span>.<span class="hljs-property">perform</span>.<span class="hljs-title function_">deleteFragment</span>(sel);
  }
}
</code></pre>
<p>å› æ­¤åœ¨è¿™é‡Œæ”¾è¡Œé€‰åŒºæ›´æ–°çš„äº‹ä»¶ï¼Œå³åœ¨<code>Update Effect</code>æ—¶ä¸å†é€šè¿‡<code>Composing</code>çŠ¶æ€é˜»æ­¢é€‰åŒºçš„æ›´æ–°è¡Œä¸ºï¼Œè¿™æ ·å°±å¯ä»¥é¿å…ä¸Šè¿°çš„é—®é¢˜äº†ã€‚ç„¶è€Œè¿™é‡Œçš„è¡¨ç°ç¡®å®æ˜¯éå¸¸å¥‡æ€ªçš„ï¼Œ<code>React</code>ç¡®å®æ˜¯æŒæœ‰äº†<code>DOM</code>çŠ¶æ€ï¼Œè€Œæ”¹åŠ¨å°±æ˜¯è¿™é‡Œçš„æ›´æ–°é€‰åŒºè¡Œä¸ºï¼Œé€‰åŒºæœ¬èº«å¯¼è‡´èŠ‚ç‚¹æ— æ³•æ­£å¸¸æ¸²æŸ“å®åœ¨æ˜¯æœ‰ç‚¹è´¹è§£ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-title function_">useLayoutEffect</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> selection = editor.<span class="hljs-property">selection</span>.<span class="hljs-title function_">get</span>();
  <span class="hljs-comment">// æ¸²æŸ“å®Œæˆåæ›´æ–°æµè§ˆå™¨é€‰åŒº</span>
  <span class="hljs-keyword">if</span> (editor.<span class="hljs-property">state</span>.<span class="hljs-title function_">isFocused</span>() &amp;&amp; selection) {
    editor.<span class="hljs-property">logger</span>.<span class="hljs-title function_">debug</span>(<span class="hljs-string">"UpdateDOMSelection"</span>);
    editor.<span class="hljs-property">selection</span>.<span class="hljs-title function_">updateDOMSelection</span>(<span class="hljs-literal">true</span>);
  }
});
</code></pre>
<h3 data-id="heading-3">Emoji å¤„ç†</h3>
<p><code>Unicode</code>å¯ä»¥è§†ä¸º<code>Map</code>ï¼Œå¯ä»¥ä»æ•°å€¼<code>code point</code>æ˜ å°„åˆ°å…·ä½“çš„å­—å½¢ï¼Œè¿™æ ·å°±å¯ä»¥ç›´æ¥å¼•ç”¨ç¬¦å·è€Œä¸éœ€è¦å®é™…ä½¿ç”¨ç¬¦å·æœ¬èº«ã€‚å¯èƒ½çš„ä»£ç ç‚¹å€¼èŒƒå›´æ˜¯ä»<code>U+0000</code>åˆ°<code>U+10FFFF</code>ï¼Œæœ‰è¶…è¿‡<code>110</code>ä¸‡ä¸ªå¯èƒ½çš„ç¬¦å·ï¼Œä¸ºäº†ä¿æŒæ¡ç†æ€§ï¼Œ<code>Unicode</code>å°†æ­¤ä»£ç ç‚¹èŒƒå›´åˆ’åˆ†ä¸º<code>17</code>ä¸ªå¹³é¢ã€‚</p>
<p>é¦–ä¸ªå¹³é¢<code>U+0000 -&gt; U+FFFF</code>ç§°ä¸ºåŸºæœ¬å¤šè¯­è¨€å¹³é¢æˆ–<code>BMP</code>ï¼ŒåŒ…å«äº†æœ€å¸¸ç”¨çš„å­—ç¬¦ã€‚è¿™æ ·<code>BMP</code>ä¹‹å¤–å°±å‰©ä¸‹å¤§çº¦<code>100</code>ä¸‡ä¸ªä»£ç ç‚¹<code>U+010000 -&gt; U+10FFFF</code>ï¼Œè¿™äº›ä»£ç ç‚¹æ‰€å±çš„å¹³é¢ç§°ä¸ºè¡¥å……å¹³é¢æˆ–æ˜Ÿé¢ã€‚</p>
<p><code>JavaScript</code>çš„å•ä¸ªå­—ç¬¦ç”±æ— ç¬¦å·çš„<code>16</code>ä½æ•´æ•°æ”¯æŒï¼Œå› æ­¤å…¶æ— æ³•å®¹çº³ä»»ä½•é«˜äº<code>U+FFFF</code>çš„ä»£ç ç‚¹ï¼Œè€Œæ˜¯éœ€è¦å°†å…¶æ‹†åˆ†ä¸ºä»£ç†å¯¹ã€‚è¿™å…¶å®å°±æ˜¯<code>JS</code>çš„<code>UCS-2</code>ç¼–ç å½¢å¼ï¼Œé€ æˆäº†æ‰€æœ‰å­—ç¬¦åœ¨<code>JS</code>ä¸­éƒ½æ˜¯<code>2</code>ä¸ªå­—èŠ‚ï¼Œè€Œå¦‚æœæ˜¯<code>4</code>ä¸ªå­—èŠ‚çš„å­—ç¬¦ï¼Œé‚£ä¹ˆå°±ä¼šå½“ä½œä¸¤ä¸ªåŒå­—èŠ‚çš„å­—ç¬¦å¤„ç†å³ä»£ç†å¯¹ã€‚</p>
<p>å…¶å®è¿™ä¹ˆè¯´èµ·æ¥<code>UTF-8</code>çš„å˜é•¿<code>1-4</code>å­—èŠ‚çš„ç¼–ç æ˜¯æ— æ³•è¡¨ç¤ºçš„ï¼Œä»£ç†å¯¹è‡ªç„¶æ˜¯å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚è€Œè¡¨è¾¾<code>UTF-16</code>çš„ç¼–ç é•¿åº¦è¦ä¹ˆæ˜¯<code>2</code>ä¸ªå­—èŠ‚ï¼Œè¦ä¹ˆæ˜¯<code>4</code>ä¸ªå­—èŠ‚ã€‚åœ¨<code>ECMAScript 6</code>ä¸­å¼•å…¥äº†æ–°çš„è¡¨è¾¾æ–¹å¼ï¼Œä½†æ˜¯ä¸ºäº†å‘åå…¼å®¹<code>ECMAScript 5</code>ä¾ç„¶å¯ä»¥ç”¨ä»£ç†å¯¹çš„å½¢å¼è¡¨ç¤ºæ˜Ÿé¢ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-string">"\u{1F3A8}"</span>
<span class="hljs-comment">// ğŸ¨</span>
<span class="hljs-string">"\uD83C\uDFA8"</span>
<span class="hljs-comment">// ğŸ¨</span>
</code></pre>
<p>å®é™…ä¸Šåœ¨<code>ES6</code>ä¸­å¼•å…¥çš„å‡½æ•°ä¹Ÿè§£å†³äº†å­—ç¬¦ä¸²éå†çš„é—®é¢˜ï¼Œæ­£åˆ™è¡¨è¾¾å¼ä¹Ÿæä¾›äº†<code>u</code>ä¿®é¥°ç¬¦æ¥å¤„ç†<code>4</code>å­—èŠ‚çš„å­—ç¬¦ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>(<span class="hljs-string">"1ğŸ¨1"</span>)
<span class="hljs-comment">//Â ["1", "ğŸ¨", "1"]</span>
/^.<span class="hljs-property">$</span>/u.<span class="hljs-title function_">test</span>(<span class="hljs-string">"ğŸ¨"</span>)
<span class="hljs-comment">// true</span>
<span class="hljs-string">"1ğŸ¨1"</span>.<span class="hljs-title function_">split</span>(<span class="hljs-string">""</span>)
<span class="hljs-comment">//Â ["1", "\uD83C", "\uDFA8", "1"]</span>
</code></pre>
<p>å¦å¤–åœ¨åŸºæœ¬å¹³é¢å³ä½ä½ä»£ç†å¯¹å†…ï¼Œä»<code>U+D800</code>åˆ°<code>U+DFFF</code>æ˜¯ä¸€ä¸ªç©ºæ®µï¼Œå³è¿™äº›ç ç‚¹ä¸å¯¹åº”ä»»ä½•å­—ç¬¦ï¼Œè‡ªç„¶å¯ä»¥é¿å…åŸæœ¬åŸºæœ¬å¹³é¢çš„å†²çªï¼Œå› æ­¤å¯ä»¥ç”¨æ¥æ˜ å°„è¾…åŠ©å¹³é¢çš„å­—ç¬¦ã€‚é«˜ä½<code>[\uD800-\uDBFF]</code>ä¸ä½ä½<code>[\uDC00-\uDFFF]</code>æ°å¥½æ˜¯<code>2^10 * 2^10</code>é•¿åº¦ï¼Œæ°å¥½<code>100</code>å¤šä¸‡ä¸ªä»£ç ç‚¹ã€‚</p>
<pre><code class="hljs language-js" lang="js">(<span class="hljs-number">0xDBFF</span> - <span class="hljs-number">0xD800</span> + <span class="hljs-number">1</span>) * (<span class="hljs-number">0xDFFF</span> - <span class="hljs-number">0xDC00</span> + <span class="hljs-number">1</span>) = <span class="hljs-number">1024</span> * <span class="hljs-number">1024</span> = <span class="hljs-number">1048576</span>
</code></pre>
<p>è™½ç„¶å¯ä»¥å·²ç»ç”¨<code>Unicode</code>ä»£ç†å¯¹çš„æ–¹å¼è¡¨è¾¾<code>4</code>å­—èŠ‚ç¬¦å·ï¼Œä½†æ˜¯ç±»ä¼¼<code>Emoji</code>è¿™äº›ç¬¦å·æ˜¯å¯ä»¥ç»„åˆçš„ã€‚é‚£ä¹ˆè¿™æ ·ä¼šå¯¼è‡´å­—å½¢ä¸Šçœ‹èµ·æ¥æ˜¯å•ä¸ªå­—ç¬¦ï¼Œå®é™…ä¸Šæ˜¯é€šè¿‡<code>\u200d</code>å³<code>ZWJ</code>ç»„åˆèµ·æ¥çš„å­—ç¬¦ï¼Œå› æ­¤å…¶é•¿åº¦ä¼šæ›´é•¿ï¼Œä¸”<code>ES6</code>çš„å‡½æ•°ä¹Ÿæ˜¯ä¼šå°†å…¶æ‹†ç¦»è¡¨ç°çš„ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-string">"ğŸ§‘"</span> + <span class="hljs-string">"\u200d"</span> + <span class="hljs-string">"ğŸ¨"</span>
<span class="hljs-comment">// ğŸ§‘â€ğŸ¨</span>
<span class="hljs-string">"ğŸ§‘â€ğŸ¨"</span>.<span class="hljs-property">length</span>
<span class="hljs-comment">// 5</span>
<span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>(<span class="hljs-string">"ğŸ§‘â€ğŸ¨"</span>)
<span class="hljs-comment">//Â ["ğŸ§‘", "â€", "ğŸ¨"]</span>
</code></pre>
<p>å› æ­¤ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬éœ€è¦åœ¨åˆ é™¤ä¹‹å‰åˆ¤æ–­å³å°†è¦åˆ é™¤çš„æ–‡æœ¬é•¿åº¦ï¼Œè¿™æœ¬èº«å…¶å®æ˜¯å¯ä»¥æœ‰å¤šç§æ–¹å¼æ¥å®ç°çš„ã€‚ä¾‹å¦‚æˆ‘ä»¬å³å°†è¦æåˆ°çš„è¯çº§åˆ«çš„å†…å®¹åˆ é™¤ï¼Œå°†å…¶è½¬æ¢ä¸ºéå—æ§çš„çŠ¶æ€æ¥åˆ é™¤ï¼Œè€Œåœ¨è¿™é‡Œæˆ‘ä»¬åˆ™æ˜¯é€šè¿‡è®¡ç®—æœ«å°¾çš„<code>Unicode</code>å­—ç¬¦é•¿åº¦æ¥å®ç°åˆ é™¤ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">/**
 * è·å–æœ«å°¾ Unicode å­—ç¬¦é•¿åº¦
 * <span class="hljs-doctag">@param</span> <span class="hljs-variable">str</span>
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">getLastUnicodeLen</span> = (<span class="hljs-params">str: string | P.Nil</span>) =&gt; {
  <span class="hljs-keyword">if</span> (!str || str.<span class="hljs-property">length</span> &lt; <span class="hljs-number">2</span>) {
    <span class="hljs-keyword">return</span> str ? str.<span class="hljs-property">length</span> : <span class="hljs-number">0</span>;
  }
  <span class="hljs-keyword">const</span> first = str.<span class="hljs-title function_">charCodeAt</span>(str.<span class="hljs-property">length</span> - <span class="hljs-number">2</span>);
  <span class="hljs-keyword">const</span> second = str.<span class="hljs-title function_">charCodeAt</span>(str.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>);
  <span class="hljs-keyword">if</span> (<span class="hljs-number">0xd800</span> &lt; first &amp;&amp; first &lt; <span class="hljs-number">0xdbff</span> &amp;&amp; <span class="hljs-number">0xdc00</span> &lt; second &amp;&amp; second &lt; <span class="hljs-number">0xdfff</span>) {
    <span class="hljs-comment">// æ­¤æ—¶åŸºæœ¬ Unicode å­—ç¬¦é•¿åº¦ä¸º 2</span>
    <span class="hljs-keyword">let</span> len = <span class="hljs-number">2</span>;
    <span class="hljs-comment">// é€šè¿‡è¿æ¥ç¬¦å·æ¥ç»„åˆå•ä¸ª Unicode å­—ç¬¦é•¿åº¦</span>
    <span class="hljs-comment">// [-][-] \u200d [-][-] \u200d [-][-]</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = str.<span class="hljs-property">length</span> - <span class="hljs-number">3</span>; i &gt; <span class="hljs-number">0</span>; i = i - <span class="hljs-number">3</span>) {
      <span class="hljs-keyword">if</span> (str[i].<span class="hljs-title function_">charCodeAt</span>(<span class="hljs-number">0</span>) !== <span class="hljs-number">0x200d</span>) <span class="hljs-keyword">break</span>;
      len = len + <span class="hljs-number">3</span>;
    }
    <span class="hljs-keyword">return</span> len;
  }
  <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;
};
</code></pre>
<h3 data-id="heading-4">è¯çº§æ–‡æœ¬å¤„ç†</h3>
<p>å…ˆå‰æˆ‘ä»¬é’ˆå¯¹<code>Emoji</code>çš„åˆ é™¤åšäº†ç‰¹æ®Šå¤„ç†ï¼Œå› ä¸ºå…¶æœ¬èº«æ˜¯å¤šä¸ªå­—ç¬¦ç»„æˆçš„å†…å®¹ï¼Œæ‰€ä»¥åœ¨åˆ é™¤æ—¶å¦‚æœç›´æ¥å–é•¿åº¦ä¸º<code>1</code>çš„è¯ä¼šå¯¼è‡´å‡ºç°é—ç•™ä¸å¯è§å­—ç¬¦çš„æƒ…å†µã€‚é‚£ä¹ˆé™¤äº†<code>Emoji</code>å¯èƒ½å­˜åœ¨åˆ é™¤å¤šä¸ªå­—ç¬¦çš„æƒ…å†µï¼Œä½¿ç”¨<code>Alt + Del</code>ç»„åˆé”®åœ¨é»˜è®¤æƒ…å†µä¸‹æ˜¯åˆ é™¤è¯çº§åˆ«å†…å®¹ï¼ŒåŒæ ·æ˜¯å­˜åœ¨å¤šä¸ªå­—ç¬¦çš„æƒ…å†µã€‚</p>
<p>å¦‚æœä»…ä»…æ˜¯ä½¿ç”¨<code>ContentEditable</code>çš„æƒ…å†µä¸‹ï¼Œæµè§ˆå™¨ä¼šè‡ªåŠ¨å¤„ç†è¯çº§åˆ«çš„åˆ é™¤è¡Œä¸ºï¼ŒåŒ…æ‹¬<code>Emoji</code>çš„åˆ é™¤è¡Œä¸ºä¹Ÿæ˜¯å¯ä»¥è‡ªåŠ¨å¤„ç†çš„ã€‚å› æ­¤é’ˆå¯¹éå—æ§è¾“å…¥çš„ç¼–è¾‘å™¨ä¾‹å¦‚<code>Quill</code>ã€é£ä¹¦æ–‡æ¡£çš„å®ç°ï¼Œæ˜¯ä¸å¤ªéœ€è¦ä¸»åŠ¨å¤„ç†ç›¸å…³è¡Œä¸ºçš„ï¼Œä¸»è¦å…³æ³¨ç‚¹åœ¨äº<code>DOM</code>å˜æ›´åçš„è¢«åŠ¨åŒæ­¥çŠ¶æ€ã€‚</p>
<p>è€Œåœ¨æˆ‘ä»¬å®ç°çš„ç¼–è¾‘å™¨ä¸­ï¼Œå› ä¸ºè¾“å…¥çš„ç›¸å…³å®ç°æ˜¯å®Œå…¨åŸºäº<code>beforeInput</code>äº‹ä»¶æ¥å¤„ç†çš„ï¼Œæ˜¯å®Œå…¨å—æ§çš„è¡Œä¸ºï¼Œå› æ­¤æˆ‘ä»¬å¿…é¡»è¦ä¸»åŠ¨å¤„ç†åˆ é™¤çš„è¡Œä¸ºã€‚å®é™…ä¸Šåœ¨äº‹ä»¶ä¸­ï¼Œ<code>inputType</code>å€¼æ˜¯ç»™å‡ºäº†<code>deleteWordBackward</code>å’Œ<code>deleteWordForward</code>çš„ï¼Œå´æ²¡æœ‰ç»™å‡ºé»˜è®¤è¡Œä¸ºè¦åˆ é™¤çš„é•¿åº¦ã€‚</p>
<p>å› æ­¤æˆ‘æœ€å¼€å§‹æ˜¯æƒ³è¦ä¹ˆæ”¹ä¸ºéå—æ§è¾“å…¥ï¼Œè¦ä¹ˆæ˜¯é€šè¿‡<code>Intl.Segmenter</code>æ–¹æ³•æ¥ä¸»åŠ¨åˆ†è¯å®ç°ã€‚ç„¶è€Œåœ¨çœ‹åˆ°<code>MDN</code>çš„<code>DEMO</code>ä¹‹åï¼Œå‘ç°è¿™ä¸ªæ„é€ å™¨éœ€è¦ä¼ é€’è¯­è¨€å‚æ•°ï¼Œè¿™æ ·çš„è¯åœ¨ç¼–è¾‘å™¨ä¸­æ˜¯æ²¡æœ‰åŠæ³•å®ç°çš„ï¼Œå› ä¸ºç¼–è¾‘å™¨ä¸­æ— æ³•å®é™…ç¡®å®šè¯­è¨€ç±»å‹ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> segmenterZH = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Intl</span>.<span class="hljs-title class_">Segmenter</span>(<span class="hljs-string">"ZH-CN"</span>, { <span class="hljs-attr">granularity</span>: <span class="hljs-string">"word"</span> });
<span class="hljs-keyword">const</span> string1 = <span class="hljs-string">"å½“å‰æ‰€æœ‰åŠŸèƒ½éƒ½æ˜¯åŸºäºæ’ä»¶åŒ–å®šä¹‰å®ç°"</span>;
<span class="hljs-keyword">const</span> iterator1 = segmenterZH.<span class="hljs-title function_">segment</span>(string1)[<span class="hljs-title class_">Symbol</span>.<span class="hljs-property">iterator</span>]();
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(iterator1.<span class="hljs-title function_">next</span>().<span class="hljs-property">value</span>.<span class="hljs-property">segment</span>); <span class="hljs-comment">// å½“å‰</span>
</code></pre>
<p>å› æ­¤æˆ‘å»æ‰¾äº†ç›¸å…³å¼€æºç¼–è¾‘å™¨çš„å®ç°ï¼Œ<code>slate</code>æ˜¯å®Œå…¨è‡ªå®šä¹‰å¤„ç†çš„è¡Œä¸ºï¼Œä½¿ç”¨<code>getWordDistance</code>æ¥è‡ªè¡Œè®¡ç®—è¯çš„è·ç¦»ã€‚è¿™æ ·å¯¹äºè‹±æ–‡é—®é¢˜ä¸å¤§ï¼Œä½†æ˜¯å¯¹äºä¸­æ–‡è¯ç»„çš„å¤„ç†å°±æ¯”è¾ƒå·®äº†ï¼Œæ˜¯ä»¥æ ‡ç‚¹ç¬¦å·ä¸ºå‡†ä½œä¸ºåˆ‡å‰²ç›®æ ‡çš„ï¼Œå› æ­¤å¯¹äºä¸­æ–‡å®ç°æ›´åƒæ˜¯æŒ‰å¥åˆ é™¤äº†ã€‚</p>
<p>è€Œåœ¨<code>Lexical</code>ä¸­å°è¯•äº†åˆ é™¤è¯ç»„çš„è¡¨ç°åˆ™æ¯”è¾ƒç¬¦åˆé¢„æœŸï¼Œæœ¬æ¥æˆ‘ä»¥ä¸ºä¹Ÿæ˜¯éå—æ§çš„è¾“å…¥ï¼Œä½†æ˜¯æŸ¥é˜…æºç åå‘ç°åŒæ ·æ˜¯åŸºäº<code>beforeInput</code>äº‹ä»¶æ¥å¤„ç†çš„ã€‚é‚£ä¹ˆè¿™ä¸ªè¡¨ç°å°±éå¸¸ç¬¦åˆæµè§ˆå™¨çš„è¡Œä¸ºï¼Œæœ¬æ¥æˆ‘ä»¥ä¸ºä¹Ÿæ˜¯åŸºäº<code>Segmenter</code>å®ç°ï¼Œæƒ³æŸ¥çœ‹æ˜¯å¦‚ä½•å¤„ç†è¯­è¨€é—®é¢˜çš„ï¼Œå‘ç°é¦–å‚æ•°æ˜¯å¯ä»¥ä¸ä¼ é€’çš„ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> segmenterZH = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Intl</span>.<span class="hljs-title class_">Segmenter</span>(<span class="hljs-literal">undefined</span>, { <span class="hljs-attr">granularity</span>: <span class="hljs-string">"word"</span> });
<span class="hljs-keyword">const</span> string1 = <span class="hljs-string">"å½“å‰æ‰€æœ‰åŠŸèƒ½éƒ½æ˜¯åŸºäºæ’ä»¶åŒ–å®šä¹‰å®ç°"</span>;
<span class="hljs-keyword">const</span> iterator1 = segmenterZH.<span class="hljs-title function_">segment</span>(string1)[<span class="hljs-title class_">Symbol</span>.<span class="hljs-property">iterator</span>]();
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(iterator1.<span class="hljs-title function_">next</span>().<span class="hljs-property">value</span>.<span class="hljs-property">segment</span>); <span class="hljs-comment">// å½“å‰</span>
</code></pre>
<p>ç„¶è€Œï¼Œå†ç»†è‡´åœ°æŸ¥é˜…æºç åå‘ç°ï¼Œ<code>Lexical</code>å¹¶æœªç›´æ¥ä½¿ç”¨<code>Segmenter</code>æ¥å¤„ç†åˆ†è¯ï¼Œè€Œæ˜¯ä½¿ç”¨äº†<code>selection.modify</code>è¿™ä¸ª<code>API</code>æ¥é¢„å¤„ç†é€‰åŒºçš„å˜æ›´ã€‚åŸºäºè¿™ä¸ª<code>API</code>å¯ä»¥åŒæ­¥åœ°å˜æ›´é€‰åŒºçš„<code>DOM</code>å¼•ç”¨ï¼Œç„¶åæˆ‘ä»¬å°±å¯ä»¥ç«‹å³å¾—åˆ°æœªæ¥çš„é€‰åŒºçŠ¶æ€ï¼Œå› æ­¤å°±å¯ä»¥æ„é€ åˆ é™¤çš„èŒƒå›´ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> root = <span class="hljs-variable language_">this</span>.<span class="hljs-property">editor</span>.<span class="hljs-title function_">getContainer</span>();
<span class="hljs-keyword">const</span> domSelection = <span class="hljs-title function_">getRootSelection</span>(root);
<span class="hljs-keyword">const</span> selection = <span class="hljs-variable language_">this</span>.<span class="hljs-property">current</span>;
<span class="hljs-keyword">if</span> (!domSelection || !selection) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
domSelection.<span class="hljs-title function_">modify</span>(<span class="hljs-variable constant_">ALERT</span>.<span class="hljs-property">MOVE</span>, direction, granularity);
<span class="hljs-keyword">const</span> staticSel = <span class="hljs-title function_">getStaticSelection</span>(domSelection);
<span class="hljs-keyword">if</span> (!staticSel || <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">limit</span>()) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
<span class="hljs-keyword">const</span> { startContainer } = staticSel;
<span class="hljs-keyword">if</span> (!root.<span class="hljs-title function_">contains</span>(startContainer)) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
<span class="hljs-keyword">const</span> newRange = <span class="hljs-title function_">toModelRange</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">editor</span>, staticSel, <span class="hljs-literal">false</span>);
newRange &amp;&amp; <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">set</span>(newRange);
</code></pre>
<p>å¹¶ä¸”åœ¨<code>Lexical</code>ä¸­è¿˜è§£é‡Šäº†<code>beforeInput</code>äº‹ä»¶ä»¥åŠå¯¹åº”çš„<code>getTargetRanges()</code>æ–¹æ³•ã€‚ç”±æ­¤å…ˆå‰æˆ‘å¯¹äºæµè§ˆå™¨æ²¡æœ‰ç»™å‡ºé»˜è®¤è¦åˆ é™¤çš„é•¿åº¦çš„åˆ¤æ–­æ˜¯é”™è¯¯çš„ï¼Œå…¶æ˜¯é€šè¿‡<code>Range</code>æ¥è¡¨è¾¾çš„ã€‚ä½†æ˜¯æ³¨é‡Šä¸­è¿˜æåˆ°äº†è¿™ä¸ªæ–¹æ¡ˆä¸å¯é ï¼Œå…¶åœ¨å¤æ‚åœºæ™¯ä¸‹å¯èƒ½æ— æ³•æ­£ç¡®ååº”æ“ä½œåçš„é€‰åŒºçŠ¶æ€ã€‚</p>
<p>è€Œå¯¹äºä½¿ç”¨åƒ<code>Intl.Segmenter</code>ç­‰æŒ‰è¯ç»„åˆ†å‰²çš„å·¥å…·ï¼Œæ¯”è¾ƒå®¹æ˜“å‡ºé”™ï¼Œè€Œä¸”éœ€è¦å¯¹äºæ•´ä¸ª<code>Op</code>è¿›è¡Œåˆ†è¯ï¼Œä¹Ÿæœ‰å¾ˆå¤šä¸å¿…è¦çš„è®¡ç®—ã€‚ä¸åŒè¯­è¨€çš„åˆ†è¯è§„åˆ™å·®å¼‚å·¨å¤§ï¼Œä¾‹å¦‚è‹±æ–‡ç©ºæ ¼åˆ†è¯ä»¥åŠä¸­æ–‡æ— ç©ºæ ¼åˆ†è¯ï¼Œè‡ªåŠ¨è¯†åˆ«è¯è¾¹ç•Œéå¸¸å›°éš¾ï¼Œå°¤å…¶æ˜¯åœ¨æ¶‰åŠè‡ªåŠ¨æ¢è¡Œå’Œéç½—é©¬è¯­è¨€çš„æƒ…å†µä¸‹ä¼šéå¸¸å›°éš¾ã€‚</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ffacebook%2Flexical%2Fblob%2Faf687fa%2Fpackages%2Flexical%2Fsrc%2FLexicalSelection.ts%23L1605" target="_blank" title="https://github.com/facebook/lexical/blob/af687fa/packages/lexical/src/LexicalSelection.ts#L1605" ref="nofollow noopener noreferrer">github.com/facebook/leâ€¦</a></li>
</ul>
<p>æ€»ç»“èµ·æ¥ï¼Œä½¿ç”¨<code>selection.modify</code>æ–¹æ³•ç›´æ¥åˆ©ç”¨äº†æµè§ˆå™¨å¼•æ“è‡ªèº«å¯¹é€‰åŒºè®¡ç®—çš„å†…ç½®ã€é«˜åº¦ä¼˜åŒ–çš„é€»è¾‘ï¼Œæµè§ˆå™¨å¦‚ä½•åˆ†è¯è‡ªç„¶æ˜¯æµè§ˆå™¨æœ¬èº«æœ€ç†ŸçŸ¥ã€‚æ­¤å¤–ï¼Œå®é™…ä¸Š<code>BeforeInput</code>äº‹ä»¶è¿˜æœ‰è¯¸å¤šæ–¹æ³•ï¼Œè¯çº§åˆ«åˆ é™¤è¿™ä»¶äº‹æœ¬èº«å…¶å®ä¹Ÿå¯ä»¥ç”¨<code>getTargetRanges</code>æ¥å®ç°ã€‚</p>
<pre><code class="hljs language-js" lang="js">event.<span class="hljs-title function_">getTargetRanges</span>()[<span class="hljs-number">0</span>] <span class="hljs-comment">// InputEvent</span>
<span class="hljs-comment">// StaticRangeÂ {startContainer: text, startOffset: 13, endContainer: text, endOffset: 14, collapsed: false}</span>
</code></pre>
<h2 data-id="heading-5">æ–‡æœ¬æ‹–æ‹½</h2>
<p>æ—¢ç„¶éƒ½æåˆ°äº†<code>getTargetRanges</code>æ–¹æ³•ï¼Œæˆ‘ä»¬è‡ªç„¶å°±å¯ä»¥é¡ºç†æˆç« åœ°ä»¥æ­¤ä¸ºåŸºç¡€èŠä¸€ä¸‹æ–‡æœ¬æ‹–æ‹½çš„å®ç°ã€‚åœ¨<code>beforeInput</code>äº‹ä»¶ä¸­ï¼Œ<code>inputType</code>å€¼æ˜¯æœ‰<code>deleteByDrag</code>ä»¥åŠ<code>insertFromDrop</code>ä¸¤ç§ç±»å‹ï¼Œæ‹–æ‹½éœ€è¦æœ‰ä¸¤ä¸ªæ“ä½œç»„åˆè€Œæ¥ï¼Œåˆ†åˆ«æ˜¯æ–‡æœ¬çš„åˆ é™¤ä¸æ’å…¥æ“ä½œã€‚</p>
<p><code>getTargetRanges</code>æ–¹æ³•è¿”å›çš„å®é™…ä¸Šæ˜¯ä¸ª<code>static range</code>æ•°ç»„ï¼Œå› æ­¤éœ€è¦è°ƒç”¨å…ˆå‰æˆ‘ä»¬å®ç°çš„<code>toModelRange</code>æ–¹æ³•æ¥è½¬æ¢åˆ°ç¼–è¾‘å™¨çš„é€‰åŒºæ¨¡å‹ã€‚é‚£ä¹ˆç§»åŠ¨æ–‡æœ¬çš„è¿™ä¸ªæ“ä½œå®é™…ä¸Šåªéœ€è¦å…³æ³¨ä¸¤ä¸ª<code>Range</code>ï¼Œåˆ†åˆ«è®°å½•åˆ é™¤å’Œæ’å…¥çš„ä½ç½®å°±å¯ä»¥å®ç°äº†ã€‚</p>
<p>å› æ­¤åŸºäº<code>beforeInput</code>äº‹ä»¶çš„æ‹–æ‹½å®ç°å…¶å®æ˜¯éå¸¸ç®€å•çš„ï¼Œä¸»è¦æ˜¯å°†åˆ é™¤å’Œæ’å…¥çš„é€»è¾‘ç»„åˆåœ¨ä¸€èµ·å³å¯ã€‚è¿™é‡Œéœ€è¦æ”¾ç½®ä¸€ä¸ªä¸´æ—¶çš„å˜é‡ï¼Œç”¨æ¥è®°å½•èµ·å§‹çš„ä½ç½®ï¼Œå› ä¸ºè¿™é‡Œæ˜¯ä¸¤ä¸ªäº‹ä»¶åˆ†åˆ«å‘ç”Ÿçš„ï¼Œå› æ­¤éœ€è¦å°†åˆ é™¤çš„ä½ç½®ä¿å­˜ä¸‹æ¥ï¼Œç„¶ååœ¨æ’å…¥æ—¶ä½¿ç”¨è¿™ä¸ªä½ç½®æ¥ç§»åŠ¨æ–‡æœ¬ç‰‡æ®µã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">switch</span> (inputType) {
  <span class="hljs-keyword">case</span> <span class="hljs-string">"deleteByDrag"</span>: {
    <span class="hljs-keyword">const</span> domRange = event.<span class="hljs-title function_">getTargetRanges</span>()[<span class="hljs-number">0</span>];
    <span class="hljs-keyword">const</span> range = domRange &amp;&amp; <span class="hljs-title function_">toModelRange</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">editor</span>, domRange, <span class="hljs-literal">false</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">dragStartRange</span> = range || <span class="hljs-literal">null</span>;
  }
  <span class="hljs-keyword">case</span> <span class="hljs-string">"insertFromDrop"</span>: {
    <span class="hljs-keyword">const</span> domRange = event.<span class="hljs-title function_">getTargetRanges</span>()[<span class="hljs-number">0</span>];
    <span class="hljs-keyword">const</span> range = domRange &amp;&amp; <span class="hljs-title function_">toModelRange</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">editor</span>, domRange, <span class="hljs-literal">false</span>);
    range &amp;&amp; <span class="hljs-variable language_">this</span>.<span class="hljs-property">editor</span>.<span class="hljs-property">perform</span>.<span class="hljs-title function_">moveFragment</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">dragStartRange</span>, range);
  }
}
</code></pre>
<p>ç§»åŠ¨å†…å®¹ç‰‡æ®µçš„éƒ¨åˆ†åˆ™æ¯”è¾ƒç®€å•ï¼Œå”¯ä¸€ä¸€ä¸ªéœ€è¦å…³æ³¨çš„ç‚¹æ˜¯ä½¿ç”¨äº†<code>transformPosition</code>å‡½æ•°æ¥å¤„ç†ä½ç½®åç§»ã€‚å› ä¸ºåœ¨åˆ é™¤å†…å®¹ç‰‡æ®µåï¼Œæ’å…¥ä½ç½®ä¼šå‘ç”Ÿå˜åŒ–ï¼Œä¸¤æ¬¡å˜æ›´çš„åŸºå‡†éƒ½æ˜¯åŒä¸€ä¸ªè‰ç¨¿ï¼Œè€Œå˜æ›´åˆ™æ˜¯é¡ºåºçš„å…³ç³»ï¼Œæ­¤æ—¶å°±éœ€è¦å‡è®¾<code>A</code>å‘ç”Ÿæ¥å¤„ç†å¯¹<code>B</code>çš„å½±å“ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Perform</span> {
  <span class="hljs-comment">/**
   * ç§»åŠ¨é€‰åŒºå†…å®¹ç‰‡æ®µåˆ°ç›®æ ‡é€‰åŒºå¤„
   * <span class="hljs-doctag">@param</span> <span class="hljs-variable">from</span>
   * <span class="hljs-doctag">@param</span> <span class="hljs-variable">to</span>
   */</span>
  public <span class="hljs-title function_">moveFragment</span>(<span class="hljs-params"><span class="hljs-keyword">from</span>: Range, to: Range</span>) {
    <span class="hljs-keyword">const</span> rawFrom = <span class="hljs-title class_">RawRange</span>.<span class="hljs-title function_">fromRange</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">editor</span>, <span class="hljs-keyword">from</span>);
    <span class="hljs-keyword">const</span> rawTo = <span class="hljs-title class_">RawRange</span>.<span class="hljs-title function_">fromRange</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">editor</span>, to);
    <span class="hljs-keyword">if</span> (!rawFrom || !rawTo) <span class="hljs-keyword">return</span> <span class="hljs-keyword">void</span> <span class="hljs-number">0</span>;
    <span class="hljs-keyword">const</span> fragment = <span class="hljs-variable language_">this</span>.<span class="hljs-property">editor</span>.<span class="hljs-property">lookup</span>.<span class="hljs-title function_">getFragment</span>(<span class="hljs-keyword">from</span>);
    <span class="hljs-keyword">if</span> (!fragment) <span class="hljs-keyword">return</span> <span class="hljs-keyword">void</span> <span class="hljs-number">0</span>;
    <span class="hljs-keyword">const</span> delDelta = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Delta</span>().<span class="hljs-title function_">retain</span>(rawFrom.<span class="hljs-property">start</span>).<span class="hljs-title function_">delete</span>(rawFrom.<span class="hljs-property">len</span>);
    <span class="hljs-keyword">const</span> toStart = delDelta.<span class="hljs-title function_">transformPosition</span>(rawTo.<span class="hljs-property">start</span>);
    <span class="hljs-keyword">const</span> insertDelta = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Delta</span>().<span class="hljs-title function_">retain</span>(toStart).<span class="hljs-title function_">merge</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Delta</span>(fragment));
    <span class="hljs-keyword">const</span> composed = delDelta.<span class="hljs-title function_">compose</span>(insertDelta);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">editor</span>.<span class="hljs-property">state</span>.<span class="hljs-title function_">apply</span>(composed, { <span class="hljs-attr">range</span>: rawTo });
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">void</span> <span class="hljs-number">0</span>;
  }
}
</code></pre>
<p>è€Œé™¤äº†åœ¨<code>BeforeInput</code>äº‹ä»¶ä¸­å¤„ç†æ‹–æ‹½å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥åœ¨<code>DragEvent</code>äº‹ä»¶ä¸­å¤„ç†æ‹–æ‹½çš„é€»è¾‘ï¼Œåœ¨<code>slate</code>ä¸­å°±æ˜¯åŸºäº<code>Drag</code>ç›¸å…³çš„äº‹ä»¶æ¥å®Œæˆçš„ã€‚å®é™…ä¸Šè¿™ä¹Ÿæ˜¯åœ¨é˜»æ­¢<code>Drag</code>é»˜è®¤è¡Œä¸ºåï¼Œæ‰‹åŠ¨å¤„ç†æ‹–æ‹½çš„é€»è¾‘ï¼Œå¦‚æœéœ€è¦æ¥ç®¡è¯¸å¦‚å›¾ç‰‡çš„æ‹–æ‹½è¡Œä¸ºç­‰ï¼Œé‚£ä¹ˆå°±å¿…é¡»è¦é‡‡ç”¨è¿™ä¸ªæ–¹æ¡ˆäº†ã€‚</p>
<p>åŸºäº<code>DragEvent</code>çš„æ–¹æ¡ˆä¸­ï¼Œä¸»è¦å…³æ³¨ç‚¹æœ‰ä¸‰éƒ¨åˆ†ï¼Œé¦–å…ˆæ˜¯éœ€è¦åœ¨<code>DragStart</code>äº‹ä»¶ä¸­å°†å½“å‰çš„é€‰åŒºä½ç½®åœ¨<code>dataTransfer</code>ä¸­ä¿å­˜ä¸‹æ¥ï¼Œå…¶æ¬¡æ˜¯åœ¨<code>DragOver</code>äº‹ä»¶ä¸­é˜»æ­¢é»˜è®¤è¡Œä¸ºä»¥å…è®¸æ‹–æ‹½ï¼Œæœ€åæ˜¯åœ¨<code>Drop</code>äº‹ä»¶ä¸­è·å–æ‹–æ‹½çš„å†…å®¹å¹¶ä¸”æ‰§è¡Œç§»åŠ¨æ“ä½œã€‚ä¸‹é¢æ˜¯<code>Slate</code>ä¸­çš„å®ç°:</p>
<pre><code class="hljs language-js" lang="js">&lt;div
  onDragStart={<span class="hljs-title function_">useCallback</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title class_">ReactEditor</span>.<span class="hljs-title function_">setFragmentData</span>(
      editor,
      event.<span class="hljs-property">dataTransfer</span>,
      <span class="hljs-string">'drag'</span>
    )
   }, [])}
  onDragOver={<span class="hljs-title function_">useCallback</span>(<span class="hljs-function">() =&gt;</span> {
    event.<span class="hljs-title function_">preventDefault</span>();
  }, [])}
  onDrop={<span class="hljs-title function_">useCallback</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> draggedRange = editor.<span class="hljs-property">selection</span>
    <span class="hljs-keyword">const</span> range = <span class="hljs-title class_">ReactEditor</span>.<span class="hljs-title function_">findEventRange</span>(editor, event);
    <span class="hljs-keyword">const</span> data = event.<span class="hljs-property">dataTransfer</span>
    <span class="hljs-title class_">Transforms</span>.<span class="hljs-title function_">delete</span>(editor, { <span class="hljs-attr">at</span>: draggedRange })
    <span class="hljs-title class_">Transforms</span>.<span class="hljs-title function_">select</span>(editor, range)
    <span class="hljs-title class_">ReactEditor</span>.<span class="hljs-title function_">insertData</span>(editor, data)
  }, [])}
&gt;&lt;/div&gt;
</code></pre>
<p>åœ¨è¿™é‡Œçš„<code>findEventRange</code>æ–¹æ³•æ˜¯æ¯”è¾ƒéœ€è¦å…³æ³¨çš„ï¼Œå› ä¸ºæ­¤æ—¶çš„<code>DragEvent</code>å¹¶æ²¡æœ‰æä¾›ç±»ä¼¼äº<code>getTargetRanges</code>çš„æ–¹æ³•ï¼Œå› æ­¤æˆ‘ä»¬å¹¶æ²¡æœ‰åŠæ³•ç›´æ¥è·å–æ‹–æ‹½çš„ç›®æ ‡ä½ç½®ã€‚åœ¨ä¹‹å‰æˆ‘ä»¬æåˆ°äº†åœ¨<code>DOM</code>åŸºç¡€ä¸Šçš„è‡ªç»˜é€‰åŒºå®ç°ï¼Œåœ¨è¿™é‡Œä»ç„¶å¯ä»¥è°ƒç”¨ç›¸å…³<code>API</code>æ¥å®ç°æŒ‡å®šä½ç½®çš„é€‰åŒºè·å–ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">let</span> <span class="hljs-attr">domRange</span>: <span class="hljs-title class_">Range</span>;
<span class="hljs-keyword">if</span> (<span class="hljs-variable language_">document</span>.<span class="hljs-property">caretRangeFromPoint</span>) {
  domRange = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">caretRangeFromPoint</span>(x, y);
} <span class="hljs-keyword">else</span> {
  <span class="hljs-keyword">const</span> position = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">caretPositionFromPoint</span>(x, y);
  <span class="hljs-keyword">if</span> (position) {
    domRange = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createRange</span>();
    domRange.<span class="hljs-title function_">setStart</span>(position.<span class="hljs-property">offsetNode</span>, position.<span class="hljs-property">offset</span>);
    domRange.<span class="hljs-title function_">setEnd</span>(position.<span class="hljs-property">offsetNode</span>, position.<span class="hljs-property">offset</span>);
  }
}
<span class="hljs-keyword">const</span> range = domRange &amp;&amp; <span class="hljs-title function_">toModelRange</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">editor</span>, domRange, <span class="hljs-literal">false</span>);
<span class="hljs-comment">// ...</span>
</code></pre>
<h2 data-id="heading-6">æ€»ç»“</h2>
<p>å…ˆå‰æˆ‘ä»¬é’ˆå¯¹æ€§åœ°å¤„ç†è¾“å…¥æ³•å’Œæµè§ˆå™¨å…¼å®¹çš„è¡Œä¸ºï¼Œç”±äºè¾“å…¥æ³•ä¼šç›´æ¥æ“ä½œ<code>DOM</code>ï¼Œå› æ­¤å®ç°ç¼–è¾‘å™¨æ¨¡å‹çš„è¾“å…¥çŠ¶æ€åŒæ­¥éœ€è¦å¤„ç†å¾ˆå¤šé—®é¢˜ã€‚è€Œåœ¨è¿™é‡Œæˆ‘ä»¬å…³æ³¨äºå¤„ç†æ–‡æœ¬ç»“æ„æ€§å˜æ›´è¡Œä¸ºçš„å¤„ç†ï¼Œä¸»è¦æ˜¯å®ç°äº†å›è½¦æ’å…¥ã€åˆ é™¤ã€æ‹–æ‹½ç­‰æ–‡æœ¬å˜æ›´è¡Œä¸ºçš„å¤„ç†ï¼Œè‡³æ­¤å®Œæˆäº†ç¼–è¾‘å™¨è¾“å…¥åŒæ­¥éƒ¨åˆ†çš„å®ç°ã€‚</p>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦å®ç°ç¼–è¾‘å™¨çš„è§†å›¾å±‚åŒæ­¥èƒ½åŠ›ï¼Œå³<code>React/Vue</code>ç­‰è§†å›¾å±‚çš„é€‚é…å™¨å®ç°ï¼Œä»¥æ­¤æ¥å¯¹æ¥æ ¸å¿ƒå±‚çš„ç¼–è¾‘å™¨æ¨¡å‹ã€‚å…ˆå‰æˆ‘ä»¬å·²ç»å®ç°äº†æ¨¡å‹å±‚<code>delta</code>ã€æ§åˆ¶å™¨å±‚<code>core</code>ï¼Œå†åŠ ä¸Šè§†å›¾å±‚çš„é€‚é…å™¨<code>react</code>ï¼Œå°±å¯ä»¥å®Œæ•´å®ç°ç¼–è¾‘å™¨çš„<code>MVC</code>æ¡†æ¶äº†ã€‚</p>
<h2 data-id="heading-7">æ¯æ—¥ä¸€é¢˜</h2>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FWindRunnerMax%2FEveryDay" target="_blank" title="https://github.com/WindRunnerMax/EveryDay" ref="nofollow noopener noreferrer">github.com/WindRunnerMâ€¦</a></li>
</ul>
<h2 data-id="heading-8">å‚è€ƒ</h2>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fmathiasbynens.be%2Fnotes%2Fjavascript-unicode" target="_blank" title="https://mathiasbynens.be/notes/javascript-unicode" ref="nofollow noopener noreferrer">mathiasbynens.be/notes/javasâ€¦</a></li>
<li><a href="https://link.juejin.cn?target=http%3A%2F%2Fwww.ruanyifeng.com%2Fblog%2F2014%2F12%2Funicode.html" target="_blank" title="http://www.ruanyifeng.com/blog/2014/12/unicode.html" ref="nofollow noopener noreferrer">www.ruanyifeng.com/blog/2014/1â€¦</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Feev.ee%2Fblog%2F2015%2F09%2F12%2Fdark-corners-of-unicode" target="_blank" title="https://eev.ee/blog/2015/09/12/dark-corners-of-unicode" ref="nofollow noopener noreferrer">eev.ee/blog/2015/0â€¦</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FAPI%2FInputEvent" target="_blank" title="https://developer.mozilla.org/zh-CN/docs/Web/API/InputEvent" ref="nofollow noopener noreferrer">developer.mozilla.org/zh-CN/docs/â€¦</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FAPI%2FSelection%2Fmodify" target="_blank" title="https://developer.mozilla.org/zh-CN/docs/Web/API/Selection/modify" ref="nofollow noopener noreferrer">developer.mozilla.org/zh-CN/docs/â€¦</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fw3c.github.io%2Finput-events%2F%23interface-InputEvent-Attributes" target="_blank" title="https://w3c.github.io/input-events/#interface-InputEvent-Attributes" ref="nofollow noopener noreferrer">w3c.github.io/input-eventâ€¦</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FAPI%2FInputEvent%2FgetTargetRanges" target="_blank" title="https://developer.mozilla.org/zh-CN/docs/Web/API/InputEvent/getTargetRanges" ref="nofollow noopener noreferrer">developer.mozilla.org/zh-CN/docs/â€¦</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Node.js ç¼–ç¨‹å®æˆ˜ï¼šExpress åŸºç¡€]]></title>    <link>https://juejin.cn/post/7586157459971571764</link>    <guid>https://juejin.cn/post/7586157459971571764</guid>    <pubDate>2025-12-22T03:02:14.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7586157459971571764" data-draft-id="7585929179319713827" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Node.js ç¼–ç¨‹å®æˆ˜ï¼šExpress åŸºç¡€"/> <meta itemprop="keywords" content="åç«¯,å‰ç«¯,Node.js"/> <meta itemprop="datePublished" content="2025-12-22T03:02:14.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºå‘˜çˆ±é’“é±¼"/> <meta itemprop="url" content="https://juejin.cn/user/2799775299157614"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Node.js ç¼–ç¨‹å®æˆ˜ï¼šExpress åŸºç¡€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2799775299157614/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºå‘˜çˆ±é’“é±¼
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-22T03:02:14.000Z" title="Mon Dec 22 2025 03:02:14 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>åœ¨ Node.js åç«¯å¼€å‘ä¸­ï¼ŒExpress æ˜¯ä½¿ç”¨æœ€å¹¿æ³›çš„ Web æ¡†æ¶ä¹‹ä¸€ã€‚å®ƒåœ¨ Node.js åŸç”Ÿ HTTP æ¨¡å—ä¹‹ä¸Šè¿›è¡Œäº†å°è£…ï¼Œæä¾›äº†æ›´åŠ ç®€æ´ã€çµæ´»çš„æ¥å£ï¼Œç”¨äºæ„å»º Web åº”ç”¨å’Œ API æœåŠ¡ã€‚Express å¹¶ä¸è¿½æ±‚åŠŸèƒ½çš„â€œå…¨å®¶æ¡¶â€ï¼Œè€Œæ˜¯å¼ºè°ƒè½»é‡å’Œå¯æ‰©å±•ï¼Œè¿™ä¹Ÿæ­£æ˜¯å®ƒé•¿æœŸæµè¡Œçš„é‡è¦åŸå› ã€‚</p>
</blockquote>
<p>æœ¬æ–‡å°†ä» Express çš„åŸºæœ¬æ¦‚å¿µå‡ºå‘ï¼Œä»‹ç»å…¶æ ¸å¿ƒç”¨æ³•å’Œå¸¸è§å¼€å‘æ¨¡å¼ã€‚</p>
<hr/>
<h2 data-id="heading-0">ä¸€ã€ä¸ºä»€ä¹ˆé€‰æ‹© Express</h2>
<p>Node.js è‡ªå¸¦çš„ HTTP æ¨¡å—è™½ç„¶åŠŸèƒ½å®Œæ•´ï¼Œä½†åœ¨å®é™…å¼€å‘ä¸­ï¼Œå¤„ç†è·¯ç”±ã€å‚æ•°è§£æã€é”™è¯¯å¤„ç†ç­‰å†…å®¹æ—¶ä¼šæ˜¾å¾—è¾ƒä¸ºç¹çã€‚Express å¯¹è¿™äº›å¸¸è§éœ€æ±‚è¿›è¡Œäº†æŠ½è±¡ï¼Œè®©å¼€å‘è€…å¯ä»¥æ›´åŠ ä¸“æ³¨äºä¸šåŠ¡é€»è¾‘æœ¬èº«ã€‚</p>
<p>Express çš„ä¼˜åŠ¿ä¸»è¦ä½“ç°åœ¨ç»“æ„æ¸…æ™°ã€å­¦ä¹ æˆæœ¬ä½ä»¥åŠç”Ÿæ€æˆç†Ÿã€‚å¤§é‡ä¸­é—´ä»¶å’Œç¤¾åŒºå®è·µï¼Œä½¿å¾— Express é€‚åˆä»å°å‹é¡¹ç›®åˆ°ä¸­å¤§å‹æœåŠ¡çš„ä¸åŒåœºæ™¯ã€‚</p>
<hr/>
<h2 data-id="heading-1">äºŒã€åˆ›å»ºç¬¬ä¸€ä¸ª Express åº”ç”¨</h2>
<p>åœ¨å·²æœ‰ Node.js ç¯å¢ƒçš„å‰æä¸‹ï¼Œé¦–å…ˆéœ€è¦å®‰è£… Expressã€‚</p>
<pre><code class="hljs language-bash" lang="bash">npm install express
</code></pre>
<p>åˆ›å»ºä¸€ä¸ªæœ€ç®€å•çš„æœåŠ¡ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> express = <span class="hljs-built_in">require</span>(<span class="hljs-string">'express'</span>);
<span class="hljs-keyword">const</span> app = <span class="hljs-title function_">express</span>();

app.<span class="hljs-title function_">get</span>(<span class="hljs-string">'/'</span>, <span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> {
  res.<span class="hljs-title function_">send</span>(<span class="hljs-string">'Hello Express'</span>);
});

app.<span class="hljs-title function_">listen</span>(<span class="hljs-number">3000</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'server running on port 3000'</span>);
});
</code></pre>
<p>è¿è¡Œåè®¿é—®æµè§ˆå™¨ï¼Œå³å¯çœ‹åˆ°è¿”å›ç»“æœã€‚è¿™ä¹Ÿæ˜¯å¤§å¤šæ•° Express åº”ç”¨çš„èµ·ç‚¹ã€‚</p>
<hr/>
<h2 data-id="heading-2">ä¸‰ã€è·¯ç”±çš„åŸºæœ¬ä½¿ç”¨</h2>
<p>è·¯ç”±æ˜¯ Express ä¸­æœ€æ ¸å¿ƒçš„æ¦‚å¿µä¹‹ä¸€ï¼Œç”¨äºå®šä¹‰è¯·æ±‚è·¯å¾„ä¸å¤„ç†é€»è¾‘ä¹‹é—´çš„æ˜ å°„å…³ç³»ã€‚</p>
<pre><code class="hljs language-js" lang="js">app.<span class="hljs-title function_">get</span>(<span class="hljs-string">'/users'</span>, <span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> {
  res.<span class="hljs-title function_">json</span>({ <span class="hljs-attr">list</span>: [] });
});

app.<span class="hljs-title function_">post</span>(<span class="hljs-string">'/users'</span>, <span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> {
  res.<span class="hljs-title function_">send</span>(<span class="hljs-string">'create user'</span>);
});
</code></pre>
<p>Express æ ¹æ®è¯·æ±‚æ–¹æ³•å’Œè·¯å¾„åŒ¹é…å¯¹åº”çš„è·¯ç”±å¤„ç†å‡½æ•°ï¼Œé¡ºåºåŒ¹é…éå¸¸é‡è¦ã€‚</p>
<hr/>
<h2 data-id="heading-3">å››ã€è¯·æ±‚å¯¹è±¡ä¸å“åº”å¯¹è±¡</h2>
<p>åœ¨è·¯ç”±å¤„ç†ä¸­ï¼Œæœ€å¸¸ç”¨çš„æ˜¯ <code>req</code> å’Œ <code>res</code> å¯¹è±¡ã€‚</p>
<p><code>req</code> ç”¨äºè·å–è¯·æ±‚ä¿¡æ¯ï¼Œä¾‹å¦‚å‚æ•°ã€è¯·æ±‚å¤´ã€è¯·æ±‚ä½“ç­‰ï¼›
<code>res</code> ç”¨äºå‘å®¢æˆ·ç«¯è¿”å›å“åº”ã€‚</p>
<pre><code class="hljs language-js" lang="js">app.<span class="hljs-title function_">get</span>(<span class="hljs-string">'/detail'</span>, <span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> id = req.<span class="hljs-property">query</span>.<span class="hljs-property">id</span>;
  res.<span class="hljs-title function_">send</span>(<span class="hljs-string">`id is <span class="hljs-subst">${id}</span>`</span>);
});
</code></pre>
<p>ç†è§£è¿™ä¸¤ä¸ªå¯¹è±¡çš„å¸¸ç”¨å±æ€§ï¼Œæ˜¯ç¼–å†™ Express æ¥å£çš„åŸºç¡€ã€‚</p>
<hr/>
<h2 data-id="heading-4">äº”ã€ä¸­é—´ä»¶çš„æ¦‚å¿µ</h2>
<p>ä¸­é—´ä»¶æ˜¯ Express çš„æ ¸å¿ƒæœºåˆ¶ï¼Œç”¨äºåœ¨è¯·æ±‚å’Œå“åº”ä¹‹é—´æ‰§è¡Œé€šç”¨é€»è¾‘ã€‚</p>
<pre><code class="hljs language-js" lang="js">app.<span class="hljs-title function_">use</span>(<span class="hljs-function">(<span class="hljs-params">req, res, next</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(req.<span class="hljs-property">method</span>, req.<span class="hljs-property">url</span>);
  <span class="hljs-title function_">next</span>();
});
</code></pre>
<p>ä¸­é—´ä»¶å¯ä»¥ç”¨äºæ—¥å¿—è®°å½•ã€æƒé™æ ¡éªŒã€å‚æ•°å¤„ç†ç­‰åœºæ™¯ã€‚åªæœ‰è°ƒç”¨ <code>next</code>ï¼Œè¯·æ±‚æ‰ä¼šç»§ç»­å‘ä¸‹ä¼ é€’ã€‚</p>
<hr/>
<h2 data-id="heading-5">å…­ã€è§£æè¯·æ±‚ä½“æ•°æ®</h2>
<p>åœ¨å®é™…å¼€å‘ä¸­ï¼Œç»å¸¸éœ€è¦å¤„ç† POST è¯·æ±‚çš„è¯·æ±‚ä½“æ•°æ®ã€‚</p>
<pre><code class="hljs language-js" lang="js">app.<span class="hljs-title function_">use</span>(express.<span class="hljs-title function_">json</span>());
app.<span class="hljs-title function_">use</span>(express.<span class="hljs-title function_">urlencoded</span>({ <span class="hljs-attr">extended</span>: <span class="hljs-literal">true</span> }));
</code></pre>
<p>é…ç½®å®Œæˆåï¼Œå¯ä»¥é€šè¿‡ <code>req.body</code> ç›´æ¥è®¿é—®æäº¤çš„æ•°æ®ã€‚</p>
<hr/>
<h2 data-id="heading-6">ä¸ƒã€é™æ€èµ„æºæœåŠ¡</h2>
<p>Express ä¹Ÿå¯ä»¥ç”¨äºæä¾›é™æ€èµ„æºæœåŠ¡ï¼Œä¾‹å¦‚å›¾ç‰‡ã€å‰ç«¯æ„å»ºäº§ç‰©ç­‰ã€‚</p>
<pre><code class="hljs language-js" lang="js">app.<span class="hljs-title function_">use</span>(express.<span class="hljs-title function_">static</span>(<span class="hljs-string">'public'</span>));
</code></pre>
<p>è¿™æ ·å¯ä»¥ç›´æ¥é€šè¿‡ URL è®¿é—®æŒ‡å®šç›®å½•ä¸‹çš„æ–‡ä»¶ã€‚</p>
<hr/>
<h2 data-id="heading-7">å…«ã€é”™è¯¯å¤„ç†åŸºç¡€</h2>
<p>Express æä¾›äº†ç»Ÿä¸€çš„é”™è¯¯å¤„ç†ä¸­é—´ä»¶æœºåˆ¶ã€‚</p>
<pre><code class="hljs language-js" lang="js">app.<span class="hljs-title function_">use</span>(<span class="hljs-function">(<span class="hljs-params">err, req, res, next</span>) =&gt;</span> {
  res.<span class="hljs-title function_">status</span>(<span class="hljs-number">500</span>).<span class="hljs-title function_">send</span>(<span class="hljs-string">'server error'</span>);
});
</code></pre>
<p>é›†ä¸­å¤„ç†é”™è¯¯ï¼Œæœ‰åŠ©äºä¿æŒä¸šåŠ¡ä»£ç çš„ç®€æ´æ€§å’Œä¸€è‡´æ€§ã€‚</p>
<hr/>
<h2 data-id="heading-8">ä¹ã€Express é¡¹ç›®ç»“æ„å»ºè®®</h2>
<p>ä¸€ä¸ªå¸¸è§çš„ Express é¡¹ç›®ç»“æ„åŒ…æ‹¬ï¼š</p>
<ul>
<li>è·¯ç”±å±‚ï¼Œè´Ÿè´£æ¥å£å®šä¹‰</li>
<li>æ§åˆ¶å±‚ï¼Œå¤„ç†ä¸šåŠ¡é€»è¾‘</li>
<li>æœåŠ¡å±‚ï¼Œå°è£…æ•°æ®è®¿é—®</li>
<li>ä¸­é—´ä»¶å±‚ï¼Œå¤„ç†é€šç”¨åŠŸèƒ½</li>
</ul>
<p>åˆç†çš„ç»“æ„å¯ä»¥æ˜¾è‘—æå‡é¡¹ç›®çš„å¯ç»´æŠ¤æ€§ã€‚</p>
<hr/>
<h2 data-id="heading-9">åã€æ€»ç»“</h2>
<p>Express æ˜¯ Node.js ç”Ÿæ€ä¸­æœ€æˆç†Ÿã€æœ€ç¨³å®šçš„ Web æ¡†æ¶ä¹‹ä¸€ã€‚å®ƒåœ¨ä¿æŒçµæ´»æ€§çš„åŒæ—¶ï¼Œä¸ºå¼€å‘è€…æä¾›äº†è¶³å¤Ÿçš„çº¦æŸå’Œè§„èŒƒï¼Œéå¸¸é€‚åˆä½œä¸ºåç«¯å¼€å‘çš„å…¥é—¨ä¸å®æˆ˜æ¡†æ¶ã€‚</p>
<p>æŒæ¡ Express çš„åŸºç¡€ç”¨æ³•ï¼Œæ˜¯æ·±å…¥å­¦ä¹  Node.js Web å¼€å‘çš„å…³é”®ä¸€æ­¥ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Node.js ç¼–ç¨‹å®æˆ˜ï¼šè·¯ç”±ä¸ä¸­é—´ä»¶]]></title>    <link>https://juejin.cn/post/7585888537642418191</link>    <guid>https://juejin.cn/post/7585888537642418191</guid>    <pubDate>2025-12-22T03:02:41.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7585888537642418191" data-draft-id="7585888537642401807" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Node.js ç¼–ç¨‹å®æˆ˜ï¼šè·¯ç”±ä¸ä¸­é—´ä»¶"/> <meta itemprop="keywords" content="åç«¯,Node.js,å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-22T03:02:41.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºå‘˜çˆ±é’“é±¼"/> <meta itemprop="url" content="https://juejin.cn/user/2799775299157614"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Node.js ç¼–ç¨‹å®æˆ˜ï¼šè·¯ç”±ä¸ä¸­é—´ä»¶
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2799775299157614/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºå‘˜çˆ±é’“é±¼
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-22T03:02:41.000Z" title="Mon Dec 22 2025 03:02:41 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>åœ¨ Node.js Web å¼€å‘ä¸­ï¼Œè·¯ç”±ä¸ä¸­é—´ä»¶æ˜¯æ„å»ºåº”ç”¨çš„ä¸¤å¤§æ ¸å¿ƒæœºåˆ¶ã€‚è·¯ç”±è´Ÿè´£å°†è¯·æ±‚åˆ†å‘åˆ°å…·ä½“çš„ä¸šåŠ¡å¤„ç†é€»è¾‘ï¼Œè€Œä¸­é—´ä»¶åˆ™è´Ÿè´£åœ¨è¯·æ±‚å¤„ç†è¿‡ç¨‹ä¸­æ‰§è¡Œé€šç”¨æ“ä½œã€‚äºŒè€…ç›¸äº’é…åˆï¼Œæ„æˆäº† Express ç­‰æ¡†æ¶çš„è¿è¡ŒåŸºç¡€ã€‚</p>
</blockquote>
<p>ç†è§£è·¯ç”±åŒ¹é…è§„åˆ™å’Œä¸­é—´ä»¶æ‰§è¡Œé¡ºåºï¼Œæ˜¯å†™å¥½ Node.js æœåŠ¡ç«¯ä»£ç çš„å…³é”®ã€‚</p>
<hr/>
<h2 data-id="heading-0">ä¸€ã€ä»€ä¹ˆæ˜¯è·¯ç”±</h2>
<p>è·¯ç”±ç”¨äºæè¿°è¯·æ±‚è·¯å¾„ä¸å¤„ç†å‡½æ•°ä¹‹é—´çš„æ˜ å°„å…³ç³»ã€‚ä¸€ä¸ªå®Œæ•´çš„è·¯ç”±é€šå¸¸ç”±è¯·æ±‚æ–¹æ³•ã€è·¯å¾„å’Œå›è°ƒå‡½æ•°ç»„æˆã€‚</p>
<pre><code class="hljs language-js" lang="js">app.<span class="hljs-title function_">get</span>(<span class="hljs-string">'/users'</span>, <span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> {
  res.<span class="hljs-title function_">send</span>(<span class="hljs-string">'user list'</span>);
});
</code></pre>
<p>å½“å®¢æˆ·ç«¯ä»¥ GET æ–¹æ³•è®¿é—® <code>/users</code> æ—¶ï¼ŒExpress ä¼šæ‰§è¡Œå¯¹åº”çš„å¤„ç†å‡½æ•°ã€‚</p>
<hr/>
<h2 data-id="heading-1">äºŒã€è·¯ç”±åŒ¹é…è§„åˆ™</h2>
<p>Express çš„è·¯ç”±æ˜¯æŒ‰<strong>å®šä¹‰é¡ºåº</strong>è¿›è¡ŒåŒ¹é…çš„ã€‚ä¸€æ—¦åŒ¹é…æˆåŠŸï¼Œåç»­è·¯ç”±å°†ä¸ä¼šå†è¢«æ‰§è¡Œã€‚</p>
<pre><code class="hljs language-js" lang="js">app.<span class="hljs-title function_">get</span>(<span class="hljs-string">'/users/:id'</span>, <span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> {
  res.<span class="hljs-title function_">send</span>(req.<span class="hljs-property">params</span>.<span class="hljs-property">id</span>);
});
</code></pre>
<p>åŠ¨æ€è·¯ç”±å¯ä»¥é€šè¿‡å‚æ•°çš„å½¢å¼è·å–è·¯å¾„ä¸­çš„å˜é‡ï¼Œè¿™åœ¨èµ„æºå‹æ¥å£è®¾è®¡ä¸­éå¸¸å¸¸è§ã€‚</p>
<hr/>
<h2 data-id="heading-2">ä¸‰ã€è·¯ç”±æ‹†åˆ†ä¸æ¨¡å—åŒ–</h2>
<p>åœ¨é¡¹ç›®è§„æ¨¡æ‰©å¤§åï¼Œå°†æ‰€æœ‰è·¯ç”±å†™åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­ä¼šå¯¼è‡´ä»£ç éš¾ä»¥ç»´æŠ¤ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> express = <span class="hljs-built_in">require</span>(<span class="hljs-string">'express'</span>);
<span class="hljs-keyword">const</span> router = express.<span class="hljs-title class_">Router</span>();

router.<span class="hljs-title function_">get</span>(<span class="hljs-string">'/'</span>, <span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> {
  res.<span class="hljs-title function_">send</span>(<span class="hljs-string">'user list'</span>);
});

<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = router;
</code></pre>
<p>é€šè¿‡è·¯ç”±æ¨¡å—åŒ–ï¼Œå¯ä»¥è®©é¡¹ç›®ç»“æ„æ›´åŠ æ¸…æ™°ï¼ŒèŒè´£æ›´åŠ æ˜ç¡®ã€‚</p>
<hr/>
<h2 data-id="heading-3">å››ã€ä¸­é—´ä»¶çš„åŸºæœ¬æ¦‚å¿µ</h2>
<p>ä¸­é—´ä»¶æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œç”¨äºåœ¨è¯·æ±‚è¿›å…¥è·¯ç”±ä¹‹å‰æˆ–å“åº”è¿”å›ä¹‹å‰æ‰§è¡Œé€»è¾‘ã€‚</p>
<pre><code class="hljs language-js" lang="js">app.<span class="hljs-title function_">use</span>(<span class="hljs-function">(<span class="hljs-params">req, res, next</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(req.<span class="hljs-property">method</span>, req.<span class="hljs-property">url</span>);
  <span class="hljs-title function_">next</span>();
});
</code></pre>
<p>ä¸­é—´ä»¶å¯ä»¥è®¿é—®è¯·æ±‚å¯¹è±¡ã€å“åº”å¯¹è±¡ï¼Œå¹¶å†³å®šæ˜¯å¦ç»§ç»­ä¼ é€’è¯·æ±‚ã€‚</p>
<hr/>
<h2 data-id="heading-4">äº”ã€ä¸­é—´ä»¶çš„æ‰§è¡Œé¡ºåº</h2>
<p>ä¸­é—´ä»¶æŒ‰ç…§<strong>æ³¨å†Œé¡ºåº</strong>æ‰§è¡Œã€‚</p>
<ul>
<li>å…¨å±€ä¸­é—´ä»¶ä¼˜å…ˆæ‰§è¡Œ</li>
<li>è·¯ç”±çº§ä¸­é—´ä»¶æŒ‰é¡ºåºæ‰§è¡Œ</li>
<li>é”™è¯¯å¤„ç†ä¸­é—´ä»¶æœ€åæ‰§è¡Œ</li>
</ul>
<p>ä¸€æ—¦ä¸­é—´ä»¶æ²¡æœ‰è°ƒç”¨ <code>next</code>ï¼Œè¯·æ±‚é“¾å°†è¢«ä¸­æ–­ã€‚</p>
<hr/>
<h2 data-id="heading-5">å…­ã€å¸¸è§ä¸­é—´ä»¶ä½¿ç”¨åœºæ™¯</h2>
<p>ä¸­é—´ä»¶é€šå¸¸ç”¨äºå¤„ç†é€šç”¨é€»è¾‘ï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li>è¯·æ±‚æ—¥å¿—è®°å½•</li>
<li>å‚æ•°æ ¡éªŒ</li>
<li>ç”¨æˆ·è®¤è¯ä¸æƒé™æ§åˆ¶</li>
<li>è¯·æ±‚ä½“è§£æ</li>
<li>è·¨åŸŸå¤„ç†</li>
</ul>
<p>å°†è¿™äº›é€»è¾‘ä»ä¸šåŠ¡ä»£ç ä¸­æŠ½ç¦»ï¼Œå¯ä»¥æ˜¾è‘—æå‡ä»£ç å¯è¯»æ€§ã€‚</p>
<hr/>
<h2 data-id="heading-6">ä¸ƒã€è·¯ç”±çº§ä¸­é—´ä»¶</h2>
<p>é™¤äº†å…¨å±€ä¸­é—´ä»¶ï¼Œè¿˜å¯ä»¥ä¸ºç‰¹å®šè·¯ç”±æ·»åŠ ä¸­é—´ä»¶ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> <span class="hljs-title function_">auth</span> = (<span class="hljs-params">req, res, next</span>) =&gt; {
  <span class="hljs-keyword">if</span> (!req.<span class="hljs-property">headers</span>.<span class="hljs-property">token</span>) {
    <span class="hljs-keyword">return</span> res.<span class="hljs-title function_">status</span>(<span class="hljs-number">401</span>).<span class="hljs-title function_">send</span>(<span class="hljs-string">'unauthorized'</span>);
  }
  <span class="hljs-title function_">next</span>();
};

app.<span class="hljs-title function_">get</span>(<span class="hljs-string">'/profile'</span>, auth, <span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> {
  res.<span class="hljs-title function_">send</span>(<span class="hljs-string">'profile'</span>);
});
</code></pre>
<p>è¿™ç§æ–¹å¼å¯ä»¥å®ç°ç²¾ç»†åŒ–çš„æƒé™æ§åˆ¶ã€‚</p>
<hr/>
<h2 data-id="heading-7">å…«ã€é”™è¯¯å¤„ç†ä¸­é—´ä»¶</h2>
<p>Express æä¾›äº†ä¸“é—¨çš„é”™è¯¯å¤„ç†ä¸­é—´ä»¶å½¢å¼ã€‚</p>
<pre><code class="hljs language-js" lang="js">app.<span class="hljs-title function_">use</span>(<span class="hljs-function">(<span class="hljs-params">err, req, res, next</span>) =&gt;</span> {
  res.<span class="hljs-title function_">status</span>(<span class="hljs-number">500</span>).<span class="hljs-title function_">send</span>(<span class="hljs-string">'server error'</span>);
});
</code></pre>
<p>é›†ä¸­å¤„ç†å¼‚å¸¸ï¼Œæœ‰åŠ©äºç»Ÿä¸€é”™è¯¯è¿”å›ç»“æ„ã€‚</p>
<hr/>
<h2 data-id="heading-8">ä¹ã€next çš„ä½¿ç”¨æ³¨æ„äº‹é¡¹</h2>
<p><code>next</code> ç”¨äºå°†æ§åˆ¶æƒäº¤ç»™ä¸‹ä¸€ä¸ªä¸­é—´ä»¶æˆ–è·¯ç”±ã€‚</p>
<p>éœ€è¦æ³¨æ„ï¼š</p>
<ul>
<li>ä¸è°ƒç”¨ <code>next</code>ï¼Œè¯·æ±‚å°†è¢«é˜»å¡</li>
<li>è°ƒç”¨ <code>next(err)</code> ä¼šç›´æ¥è¿›å…¥é”™è¯¯å¤„ç†ä¸­é—´ä»¶</li>
<li>é¿å…é‡å¤è°ƒç”¨ <code>next</code></li>
</ul>
<p>åˆç†ä½¿ç”¨ <code>next</code> æ˜¯ä¸­é—´ä»¶è®¾è®¡çš„æ ¸å¿ƒã€‚</p>
<hr/>
<h2 data-id="heading-9">åã€è·¯ç”±ä¸ä¸­é—´ä»¶çš„åä½œæ¨¡å¼</h2>
<p>åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œå¸¸è§çš„åä½œæ–¹å¼æ˜¯ï¼š</p>
<ul>
<li>ä¸­é—´ä»¶è´Ÿè´£é€šç”¨é€»è¾‘</li>
<li>è·¯ç”±è´Ÿè´£ä¸šåŠ¡åˆ†å‘</li>
<li>æ§åˆ¶å™¨è´Ÿè´£ä¸šåŠ¡å®ç°</li>
</ul>
<p>è¿™ç§åˆ†å±‚è®¾è®¡æœ‰åŠ©äºé¡¹ç›®é•¿æœŸç»´æŠ¤å’Œæ‰©å±•ã€‚</p>
<hr/>
<h2 data-id="heading-10">åä¸€ã€æ€»ç»“</h2>
<p>è·¯ç”±å’Œä¸­é—´ä»¶æ˜¯ Node.js Web æ¡†æ¶ä¸­æœ€é‡è¦çš„åŸºç¡€è®¾æ–½ã€‚è·¯ç”±å†³å®šè¯·æ±‚èµ°å‘ï¼Œä¸­é—´ä»¶å†³å®šè¯·æ±‚å¦‚ä½•è¢«å¤„ç†ã€‚åªæœ‰çœŸæ­£ç†è§£å®ƒä»¬çš„æ‰§è¡Œæœºåˆ¶å’Œè®¾è®¡æ€è·¯ï¼Œæ‰èƒ½å†™å‡ºç»“æ„æ¸…æ™°ã€æ˜“ç»´æŠ¤çš„æœåŠ¡ç«¯ä»£ç ã€‚</p>
<p>åœ¨é¡¹ç›®åˆæœŸå»ºç«‹åˆç†çš„è·¯ç”±å’Œä¸­é—´ä»¶ä½“ç³»ï¼Œå°†ä¸ºåç»­åŠŸèƒ½æ‰©å±•æ‰“ä¸‹åšå®åŸºç¡€ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é¢è¯•å®˜ï¼šVision-Language æ¨¡å‹ä¸­ï¼Œå¦‚ä½•å®ç°è·¨æ¨¡æ€ç‰¹å¾å¯¹é½ï¼ŸCLIP ä¸ BLIP çš„ä¸»è¦åŒºåˆ«ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7585798113546977330</link>    <guid>https://juejin.cn/post/7585798113546977330</guid>    <pubDate>2025-12-21T15:20:19.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7585798113546977330" data-draft-id="7585798113546960946" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é¢è¯•å®˜ï¼šVision-Language æ¨¡å‹ä¸­ï¼Œå¦‚ä½•å®ç°è·¨æ¨¡æ€ç‰¹å¾å¯¹é½ï¼ŸCLIP ä¸ BLIP çš„ä¸»è¦åŒºåˆ«ï¼Ÿ"/> <meta itemprop="keywords" content="ç®—æ³•"/> <meta itemprop="datePublished" content="2025-12-21T15:20:19.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="coting"/> <meta itemprop="url" content="https://juejin.cn/user/933911964427818"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é¢è¯•å®˜ï¼šVision-Language æ¨¡å‹ä¸­ï¼Œå¦‚ä½•å®ç°è·¨æ¨¡æ€ç‰¹å¾å¯¹é½ï¼ŸCLIP ä¸ BLIP çš„ä¸»è¦åŒºåˆ«ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/933911964427818/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    coting
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-21T15:20:19.000Z" title="Sun Dec 21 2025 15:20:19 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-21
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>é¢è¯•å®˜ï¼š<strong>Vision-Language æ¨¡å‹ä¸­æ˜¯å¦‚ä½•å®ç°è·¨æ¨¡æ€ç‰¹å¾å¯¹é½çš„ï¼ŸCLIP å’Œ BLIP æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</strong></p>
<p>è¿™é“é¢˜è¡¨é¢ä¸Šé—®â€œç‰¹å¾å¯¹é½â€ï¼Œå…¶å®è€ƒå¯Ÿçš„æ˜¯ä½ å¯¹å¤šæ¨¡æ€è¡¨ç¤ºå­¦ä¹ ï¼ˆMultimodal Representation Learningï¼‰çš„ç†è§£æ·±åº¦ã€‚</p>
<p>æ‰€æœ‰ç›¸å…³æºç ç¤ºä¾‹ã€æµç¨‹å›¾ã€é¢è¯•å…«è‚¡ã€æ¨¡å‹é…ç½®ä¸çŸ¥è¯†åº“æ„å»ºæŠ€å·§ï¼Œæˆ‘ä¹Ÿå°†æŒç»­æ›´æ–°åœ¨Githubï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Faicoting%2FAIHub" target="_blank" title="https://github.com/aicoting/AIHub" ref="nofollow noopener noreferrer"><strong>AIHub</strong></a>ï¼Œæ¬¢è¿å…³æ³¨æ”¶è—ï¼</p>
<h2 data-id="heading-0">ä¸€ã€ä¸ºä»€ä¹ˆè¦è·¨æ¨¡æ€ç‰¹å¾å¯¹é½ï¼Ÿ</h2>
<p>åœ¨ Vision-Language æ¨¡å‹é‡Œï¼Œæˆ‘ä»¬é¢å¯¹çš„æ˜¯ä¸¤ç§å®Œå…¨ä¸åŒçš„æ•°æ®æ¨¡æ€ï¼š</p>
<ul>
<li>å›¾åƒï¼šäºŒç»´åƒç´ çŸ©é˜µï¼Œç»“æ„è¿ç»­ä½†è¯­ä¹‰éšå«ï¼›</li>
<li>æ–‡æœ¬ï¼šä¸€ç»´ç¦»æ•£åºåˆ—ï¼Œè¯­ä¹‰æ˜ç¡®ä½†ç»“æ„ç¼ºå¤±ã€‚</li>
</ul>
<p>è¿™ä¸¤ç§æ¨¡æ€çš„è¡¨ç¤ºç©ºé—´å¤©ç„¶ä¸ä¸€æ ·ã€‚<br/>
å¦‚æœä½ ç›´æ¥æŠŠå›¾åƒç‰¹å¾å’Œæ–‡æœ¬ç‰¹å¾æ‹¼åœ¨ä¸€èµ·å»ç®—ç›¸ä¼¼åº¦ï¼Œæ¨¡å‹æ˜¯æ— æ³•ç†è§£å®ƒä»¬çš„å…³ç³»çš„ã€‚</p>
<p>æ‰€ä»¥æ ¸å¿ƒç›®æ ‡å°±æ˜¯<strong>æŠŠä¸åŒæ¨¡æ€çš„ç‰¹å¾æ˜ å°„åˆ°åŒä¸€ä¸ªè¯­ä¹‰ç©ºé—´ï¼ˆShared Embedding Spaceï¼‰ä¸­ï¼Œè®©å®ƒä»¬å¯ä»¥å¯¹é½ã€å¯¹æ¯”ã€ç”šè‡³äº’ç›¸ç”Ÿæˆã€‚</strong></p>
<p>è¿™ä¸€æ­¥å°±å« <strong>è·¨æ¨¡æ€ç‰¹å¾å¯¹é½ï¼ˆCross-modal Alignmentï¼‰</strong>ã€‚</p>
<h2 data-id="heading-1">äºŒã€è·¨æ¨¡æ€å¯¹é½çš„ä¸‰ç§å…¸å‹æ€è·¯</h2>
<p>è·¨æ¨¡æ€å¯¹é½å¹¶ä¸æ˜¯ä¸€åˆ€åˆ‡çš„ï¼Œæœ‰ä¸åŒå±‚æ¬¡çš„å®ç°æ–¹å¼ï¼š</p>
<h3 data-id="heading-2">1.è¡¨å¾çº§å¯¹é½ï¼ˆRepresentation-level Alignmentï¼‰</h3>
<p>æœ€å¸¸è§çš„ä¸€ç§ï¼Œä¹Ÿæ˜¯ <strong>CLIP</strong> çš„æ ¸å¿ƒæ€è·¯ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4595bc92670b447a873be80d51efb597~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgY290aW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766935218&amp;x-signature=HWqTa%2FKOJe7VfLy40oSXgQu26hI%3D" alt="" loading="lazy"/></p>
<p>CLIP ä¼šï¼š</p>
<ul>
<li>ç”¨ä¸€ä¸ªè§†è§‰ç¼–ç å™¨ï¼ˆVision Encoder, é€šå¸¸æ˜¯ ViTï¼‰æå–å›¾åƒç‰¹å¾ï¼›</li>
<li>ç”¨ä¸€ä¸ªæ–‡æœ¬ç¼–ç å™¨ï¼ˆText Encoder, é€šå¸¸æ˜¯ Transformerï¼‰æå–æ–‡æœ¬ç‰¹å¾ï¼›</li>
<li>ç„¶åç”¨**å¯¹æ¯”å­¦ä¹ ï¼ˆContrastive Learningï¼‰**è®©åŒä¸€å›¾æ–‡å¯¹çš„ç›¸ä¼¼åº¦æ›´é«˜ï¼Œä¸åŒå›¾æ–‡å¯¹çš„ç›¸ä¼¼åº¦æ›´ä½ã€‚</li>
</ul>
<p>å…¬å¼ä¸Šå†™å°±æ˜¯ï¼š<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/142ac638074c4bcf9345f69ba487a093~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgY290aW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766935218&amp;x-signature=DU408ZKD3wjgkXdKc38PgDDHYfY%3D" alt="image" loading="lazy"/><br/>
è¿™æ ·ï¼Œè§†è§‰ç©ºé—´å’Œè¯­è¨€ç©ºé—´å°±è¢«å‹ç¼©åˆ°ä¸€ä¸ªå…±åŒçš„è¯­ä¹‰ç©ºé—´ä¸­ã€‚</p>
<p>è¡¨å¾çº§å¯¹é½æ–¹æ³•è®­ç»ƒç®€å•ã€é«˜æ•ˆï¼Œä½†æ˜¯åªèƒ½æ•æ‰â€œæ•´ä½“è¯­ä¹‰â€ï¼Œç¼ºä¹ç»†ç²’åº¦çš„å¯¹é½ï¼ˆæ¯”å¦‚â€œç‹—åœ¨è‰åœ°ä¸Šè·‘â€çš„å±€éƒ¨ç†è§£ï¼‰ã€‚</p>
<h3 data-id="heading-3">2.å±€éƒ¨çº§å¯¹é½ï¼ˆFine-grained Alignmentï¼‰</h3>
<p>è¿™ç§æ–¹æ³•æ›´ç²¾ç»†ä¸€äº›ï¼Œæ¯”å¦‚ <strong>BLIP</strong> ç³»åˆ—æ¨¡å‹ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/eb2f0aee169b4136a1151a87916de9db~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgY290aW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766935218&amp;x-signature=Ri0CeM9trk5PlYFDg9n%2FxGK4Gxs%3D" alt="" loading="lazy"/></p>
<p>å®ƒä¸æ»¡è¶³äºåªå¯¹é½æ•´å¼ å›¾ç‰‡å’Œæ•´æ®µæ–‡å­—ï¼Œè€Œæ˜¯è¿›ä¸€æ­¥é€šè¿‡ <strong>Cross-Attention</strong> å®ç°ç»†ç²’åº¦çš„ token-level å¯¹é½ï¼š</p>
<p>å“ªä¸ªè¯å¯¹åº”å›¾åƒçš„å“ªä¸ªåŒºåŸŸï¼Ÿ<br/>
â€œcatâ€ å¯¹åº”å“ªä¸€å—ç‰¹å¾ï¼Ÿ</p>
<p>â€œon the bedâ€ å¯¹åº”å“ªä¸€å—èƒŒæ™¯ï¼Ÿ</p>
<p>åœ¨ BLIP ä¸­ï¼Œå›¾åƒç‰¹å¾ä¼šå…ˆç»è¿‡ä¸€ä¸ªè§†è§‰ç¼–ç å™¨æå–æˆ patch embeddingï¼Œç„¶åè¾“å…¥åˆ°ä¸€ä¸ª<strong>å¤šæ¨¡æ€ Transformer</strong>é‡Œï¼Œä¸æ–‡æœ¬ token é€šè¿‡äº¤å‰æ³¨æ„åŠ›ï¼ˆCross-Attentionï¼‰äº¤äº’ã€‚<br/>
è¿™æ ·æ¨¡å‹ä¸ä»…çŸ¥é“â€œå›¾åƒæ•´ä½“è¯´çš„æ˜¯ä»€ä¹ˆâ€ï¼Œè¿˜èƒ½ç†è§£â€œå›¾åƒé‡Œçš„æ¯ä¸ªéƒ¨åˆ†å¯¹åº”å“ªæ®µæ–‡å­—â€ã€‚</p>
<p>å±€éƒ¨çº§å¯¹é½èƒ½å®ç°å›¾æ–‡ç†è§£ã€é—®ç­”ã€ç”Ÿæˆç­‰å¤æ‚ä»»åŠ¡ï¼Œä½†æ˜¯è®¡ç®—æ›´é‡ã€è®­ç»ƒæ›´å¤æ‚ã€‚</p>
<h3 data-id="heading-4">3.è¯­ä¹‰å±‚å¯¹é½ï¼ˆSemantic-level Alignmentï¼‰</h3>
<p>è¿™ç±»æ–¹æ³•é€šå¸¸å‡ºç°åœ¨ç”Ÿæˆå¼æ¨¡å‹ï¼ˆæ¯”å¦‚ BLIP-2ã€Flamingoã€LLaVAï¼‰ä¸­ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cc13a34e3a0c4ec4ade7e8a958d3afaa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgY290aW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766935218&amp;x-signature=M3g3VGz1BL%2BCJDOG6DTXODywpos%3D" alt="" loading="lazy"/></p>
<p>å®ƒä»¬ä¼šä½¿ç”¨ä¸€ä¸ª<strong>å†»ç»“çš„å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰ä½œä¸ºè¯­è¨€ç†è§£æ ¸å¿ƒï¼Œå†ç”¨ä¸€ä¸ªè½»é‡çš„è§†è§‰æŠ•å½±å™¨ï¼ˆQ-former æˆ– Adapterï¼‰</strong>ï¼ŒæŠŠè§†è§‰ç‰¹å¾è½¬åŒ–ä¸º LLM èƒ½ç†è§£çš„ token å½¢å¼ï¼Œä»è€Œå®ç°è¯­ä¹‰å±‚é¢å¯¹é½ã€‚</p>
<p>è¿™ç§æ–¹å¼ç‰¹åˆ«é€‚åˆ <strong>è§†è§‰é—®ç­”ï¼ˆVQAï¼‰</strong>ã€<strong>å›¾æ–‡ç”Ÿæˆ</strong> ä»»åŠ¡ï¼Œä»£è¡¨æ¨¡å‹åŒ…æ‹¬ <strong>BLIP-2ã€LLaVAã€MiniGPT-4</strong> ç­‰ã€‚</p>
<hr/>
<h2 data-id="heading-5">ä¸‰ã€CLIP vs BLIPï¼šåˆ°åº•æœ‰ä»€ä¹ˆä¸åŒï¼Ÿ</h2>
<p>æˆ‘ä»¬å¯ä»¥ç”¨ä¸€ä¸ªè¡¨æ ¼æ¥çœ‹ä¸€ä¸‹CLIPå’ŒBLIPçš„ä¸»è¦åŒºåˆ«ï¼š</p>













































<table><thead><tr><th align="center">å¯¹æ¯”é¡¹</th><th align="center"><strong>CLIP</strong></th><th align="center"><strong>BLIP</strong></th></tr></thead><tbody><tr><td align="center">æ¨¡å‹ç±»å‹</td><td align="center">åŒç¼–ç å™¨ï¼ˆDual Encoderï¼‰</td><td align="center">äº¤å‰ç¼–ç å™¨ï¼ˆCross Encoderï¼‰</td></tr><tr><td align="center">å¯¹é½æ–¹å¼</td><td align="center">å¯¹æ¯”å­¦ä¹ ï¼Œå…¨å±€è¯­ä¹‰å¯¹é½</td><td align="center">Cross-Attentionï¼Œç»†ç²’åº¦å¯¹é½</td></tr><tr><td align="center">è¾“å…¥è¾“å‡º</td><td align="center">å›¾åƒ + æ–‡æœ¬ â†’ ç›¸ä¼¼åº¦</td><td align="center">å›¾åƒ + æ–‡æœ¬ â†’ ç†è§£æˆ–ç”Ÿæˆ</td></tr><tr><td align="center">ä»»åŠ¡ç±»å‹</td><td align="center">æ£€ç´¢ï¼ˆRetrievalï¼‰ã€åŒ¹é…</td><td align="center">ç†è§£ï¼ˆVQAï¼‰ã€ç”Ÿæˆï¼ˆCaptioningï¼‰</td></tr><tr><td align="center">è®­ç»ƒç›®æ ‡</td><td align="center">å›¾æ–‡å¯¹æ¯”æŸå¤±ï¼ˆInfoNCEï¼‰</td><td align="center">å›¾æ–‡ç”Ÿæˆ + å¯¹æ¯” + é‡æ„</td></tr><tr><td align="center">ç‰¹ç‚¹</td><td align="center">å¿«ã€æ³›åŒ–å¼ºã€é¢„è®­ç»ƒé«˜æ•ˆ</td><td align="center">ç†è§£æ·±ã€è¯­ä¹‰ç»†è…»ã€å¯è¿ç§»ç”Ÿæˆä»»åŠ¡</td></tr><tr><td align="center">ä»£è¡¨åº”ç”¨</td><td align="center">CLIP, ALIGN, Florence</td><td align="center">BLIP, BLIP-2, LLaVA, MiniGPT-4</td></tr></tbody></table>
<p>é¢è¯•å®˜é—®è¿™é¢˜ï¼Œä¸æ˜¯æƒ³å¬ä½ èƒŒè®ºæ–‡ï¼Œè€Œæ˜¯æƒ³çœ‹ä½ èƒ½å¦æŠ“ä½<strong>æ ¸å¿ƒé€»è¾‘</strong>ã€‚</p>
<p>ä¸€ä¸ªç®€æ´é«˜åˆ†ç­”æ¡ˆå¯ä»¥è¿™æ ·ç»„ç»‡ï¼š</p>
<p>Vision-Language æ¨¡å‹çš„å…³é”®æ˜¯è·¨æ¨¡æ€ç‰¹å¾å¯¹é½ã€‚<br/>
å¸¸è§çš„å®ç°æ–¹å¼åŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>è¡¨å¾çº§å¯¹é½</strong>ï¼šCLIP é€šè¿‡å¯¹æ¯”å­¦ä¹ åœ¨å…¨å±€è¯­ä¹‰ç©ºé—´å¯¹é½ï¼›</li>
<li><strong>å±€éƒ¨çº§å¯¹é½</strong>ï¼šBLIP é€šè¿‡ Cross-Attention å®ç°ç»†ç²’åº¦å›¾æ–‡äº¤äº’ï¼›</li>
<li><strong>è¯­ä¹‰å±‚å¯¹é½</strong>ï¼šBLIP-2 å°†è§†è§‰ç‰¹å¾æ˜ å°„åˆ°è¯­è¨€æ¨¡å‹ token ç©ºé—´ã€‚<br/>
å…¶ä¸­ï¼ŒCLIP å¼ºåœ¨é«˜æ•ˆæ£€ç´¢ä¸è¡¨ç¤ºå­¦ä¹ ï¼ŒBLIP å¼ºåœ¨ç”Ÿæˆä¸å¤šæ¨¡æ€ç†è§£ã€‚</li>
</ul>
<p>è¿™æ ·ç­”æ—¢æœ‰ä½“ç³»ï¼Œä¹Ÿèƒ½ä½“ç°ä½ å¯¹æ¶æ„æ¼”è¿›çš„ç†è§£ã€‚</p>
<p>æ€»ç»“ä¸€ä¸‹ï¼ŒCLIP æŠŠè§†è§‰æ•°æ®å’Œæ–‡æœ¬æ•°æ®è¿äº†èµ·æ¥ï¼ŒBLIP è®©æ¨¡å‹ä¸ä»…èƒ½â€œç†è§£â€ï¼Œè¿˜èƒ½â€œè¡¨è¾¾â€ã€‚</p>
<p>è¿™æ¡æ¼”åŒ–è·¯å¾„å…¶å®å°±æ˜¯å¤šæ¨¡æ€æ¨¡å‹èµ°å‘æ™ºèƒ½ä½“ï¼ˆAgentï¼‰çš„å¿…ç»ä¹‹è·¯ï¼šä»å¯¹é½åˆ°äº¤äº’ï¼Œä»ç†è§£åˆ°ç”Ÿæˆã€‚</p>
<p>å¦‚æœä½ èƒ½ä»è¿™ä¸ªè§†è§’å»çœ‹å¾…å¤šæ¨¡æ€æ¨¡å‹çš„è®¾è®¡é€»è¾‘ï¼Œé‚£ä¹ˆä½ ä¹Ÿå°±ä¼šæ…¢æ…¢å¯¹äººå·¥æ™ºèƒ½æœ‰äº†æ›´åŠ æ·±å…¥çš„ç†è§£ã€‚</p>
<p>å…³äºæ·±åº¦å­¦ä¹ å’Œå¤§æ¨¡å‹ç›¸å…³çš„çŸ¥è¯†å’Œå‰æ²¿æŠ€æœ¯æ›´æ–°ï¼Œè¯·å…³æ³¨å…¬ä¼—å· <strong>aicoting</strong>ï¼</p>
<p><strong>ğŸ“šæ¨èé˜…è¯»</strong></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F1962254381677257759" target="_blank" title="https://zhuanlan.zhihu.com/p/1962254381677257759" ref="nofollow noopener noreferrer">é¢è¯•å®˜ï¼šTransformerå¦‚ä½•ä¼˜åŒ–åˆ°çº¿æ€§çº§ï¼Ÿ</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F1962929340292502638" target="_blank" title="https://zhuanlan.zhihu.com/p/1962929340292502638" ref="nofollow noopener noreferrer">é¢è¯•å®˜ï¼šæ¨¡å‹çš„é‡åŒ–äº†è§£å—ï¼Ÿè§£é‡Šä¸€ä¸‹éå¯¹ç§°é‡åŒ–ä¸å¯¹ç§°é‡åŒ–</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F1962947114230346375" target="_blank" title="https://zhuanlan.zhihu.com/p/1962947114230346375" ref="nofollow noopener noreferrer">é¢è¯•å®˜ï¼šæ¨¡å‹å‰ªæäº†è§£å—ï¼Ÿè§£é‡Šä¸€ä¸‹ç»“æ„åŒ–å‰ªæä¸éç»“æ„åŒ–å‰ªæ</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F1963373485435917372" target="_blank" title="https://zhuanlan.zhihu.com/p/1963373485435917372" ref="nofollow noopener noreferrer">é¢è¯•å®˜ï¼šä¸ºä»€ä¹ˆ Adam åœ¨éƒ¨åˆ†ä»»åŠ¡ä¸Šä¼šæ¯” SGD æ”¶æ•›æ›´å¿«ï¼Œä½†æ³›åŒ–æ€§æ›´å·®ï¼Ÿå¦‚ä½•æ”¹è¿›ï¼Ÿ</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F1963547933044631464" target="_blank" title="https://zhuanlan.zhihu.com/p/1963547933044631464" ref="nofollow noopener noreferrer">é¢è¯•å®˜ï¼šBatchNormã€LayerNormã€GroupNormã€InstanceNorm æœ‰ä»€ä¹ˆæœ¬è´¨åŒºåˆ«ï¼Ÿ</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F1964062982347687219" target="_blank" title="https://zhuanlan.zhihu.com/p/1964062982347687219" ref="nofollow noopener noreferrer">é¢è¯•å®˜ï¼šæ·±å±‚ç½‘ç»œæ¢¯åº¦æ¶ˆå¤±çš„æ ¹æœ¬åŸå› æ˜¯ä»€ä¹ˆï¼Ÿé™¤äº† ResNetï¼Œè¿˜æœ‰å“ªäº›æ¶æ„èƒ½æœ‰æ•ˆç¼“è§£ï¼Ÿ</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F82010759692" target="_blank" title="https://zhuanlan.zhihu.com/p/82010759692" ref="nofollow noopener noreferrer">é¢è¯•å®˜ï¼šå¤§æ¨¡å‹ä¸­çš„å¹»è§‰æœ¬è´¨åŸå› æ˜¯ä»€ä¹ˆï¼Ÿå¦‚ä½•é€šè¿‡è®­ç»ƒæˆ–æ¨ç†æ‰‹æ®µæŠ‘åˆ¶ï¼Ÿ</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F1965142986452108272" target="_blank" title="https://zhuanlan.zhihu.com/p/1965142986452108272" ref="nofollow noopener noreferrer">é¢è¯•å®˜ï¼šFlashAttention çš„å®ç°åŸç†ä¸å†…å­˜ä¼˜åŒ–æ–¹å¼ï¼Ÿä¸ºä»€ä¹ˆèƒ½åšåˆ° O(NÂ²) attention çš„æ˜¾å­˜çº¿æ€§åŒ–ï¼Ÿ</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F1965823665364014863" target="_blank" title="https://zhuanlan.zhihu.com/p/1965823665364014863" ref="nofollow noopener noreferrer">é¢è¯•å®˜ï¼šKV Cache äº†è§£å—ï¼Ÿæ¨ç†é˜¶æ®µ KV Cache çš„å¤ç”¨åŸç†ï¼ŸåŠ¨æ€æ‰¹å¤„ç†å¦‚ä½•æå‡ååï¼Ÿ</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Pythonä¸‰ç»´ç»˜å›¾å…¨æ•™ç¨‹ï¼šplot3d/mesh/surf/contourå‡½æ•°å®æˆ˜ï¼ˆé™„å®Œæ•´ä»£ç ï¼‰]]></title>    <link>https://juejin.cn/post/7585743487258689545</link>    <guid>https://juejin.cn/post/7585743487258689545</guid>    <pubDate>2025-12-21T12:10:18.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7585743487258689545" data-draft-id="7585534343562887218" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Pythonä¸‰ç»´ç»˜å›¾å…¨æ•™ç¨‹ï¼šplot3d/mesh/surf/contourå‡½æ•°å®æˆ˜ï¼ˆé™„å®Œæ•´ä»£ç ï¼‰"/> <meta itemprop="keywords" content="Python"/> <meta itemprop="datePublished" content="2025-12-21T12:10:18.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æœˆåº¦ç©ºé—´"/> <meta itemprop="url" content="https://juejin.cn/user/1567280531253689"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Pythonä¸‰ç»´ç»˜å›¾å…¨æ•™ç¨‹ï¼šplot3d/mesh/surf/contourå‡½æ•°å®æˆ˜ï¼ˆé™„å®Œæ•´ä»£ç ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1567280531253689/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æœˆåº¦ç©ºé—´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-21T12:10:18.000Z" title="Sun Dec 21 2025 12:10:18 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-21
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨æ•°æ®å¯è§†åŒ–ã€ç§‘å­¦è®¡ç®—å’Œå·¥ç¨‹åˆ†æä¸­ï¼Œä¸‰ç»´ç»˜å›¾æ˜¯å±•ç¤ºç©ºé—´æ•°æ®ã€å‡½æ•°å…³ç³»çš„é‡è¦æ‰‹æ®µã€‚MATLABä¸­å¸¸ç”¨<code>plot3()</code>ã€<code>mesh()</code>ã€<code>surf()</code>ã€<code>contour()</code>å®ç°ä¸‰ç»´ç»˜å›¾ï¼Œè€ŒPythonçš„<code>matplotlib</code>åº“é€šè¿‡<code>mplot3d</code>æ¨¡å—å®Œç¾å¤åˆ»äº†è¿™äº›åŠŸèƒ½ï¼ˆå¯¹åº”<code>plot3D()</code>ã€<code>plot_wireframe()</code>ã€<code>plot_surface()</code>ã€<code>contour3D()</code>ç­‰å‡½æ•°ï¼‰ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€å‡†å¤‡å·¥ä½œï¼šå®‰è£…ä¾èµ–ä¸åŸºç¡€ç¯å¢ƒæ­å»º</h2>
<h3 data-id="heading-1">1.1 å®‰è£…å¿…å¤‡åº“</h3>
<p>Pythonä¸‰ç»´ç»˜å›¾ä¾èµ–<code>matplotlib</code>ï¼ˆç»˜å›¾æ ¸å¿ƒï¼‰å’Œ<code>numpy</code>ï¼ˆæ•°å€¼è®¡ç®—ä¸æ•°æ®ç”Ÿæˆï¼‰ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£…ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">pip install matplotlib numpy
</code></pre>
<h3 data-id="heading-2">1.2 å¯¼å…¥æ¨¡å—ä¸åˆ›å»º3Dç»˜å›¾ç¯å¢ƒ</h3>
<p><code>matplotlib</code>çš„<code>mplot3d</code>æ¨¡å—æ˜¯å®ç°3Dç»˜å›¾çš„æ ¸å¿ƒï¼Œéœ€å…ˆå¯¼å…¥å¹¶åˆ›å»º3Dåæ ‡è½´å¯¹è±¡ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
<span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt
<span class="hljs-keyword">from</span> mpl_toolkits <span class="hljs-keyword">import</span> mplot3d  <span class="hljs-comment"># å¿…é¡»å¯¼å…¥ï¼Œå¯ç”¨3Dç»˜å›¾åŠŸèƒ½</span>

<span class="hljs-comment"># åˆ›å»ºç”»å¸ƒä¸3Dåæ ‡è½´</span>
fig = plt.figure(figsize=(<span class="hljs-number">8</span>, <span class="hljs-number">6</span>))  <span class="hljs-comment"># è®¾ç½®ç”»å¸ƒå¤§å°</span>
ax = plt.axes(projection=<span class="hljs-string">'3d'</span>)    <span class="hljs-comment"># æŒ‡å®šæŠ•å½±ä¸º3D</span>
plt.show()  <span class="hljs-comment"># æ˜¾ç¤ºç»˜å›¾çª—å£</span>
</code></pre>
<p><strong>å…³é”®è¯´æ˜</strong>ï¼š<code>projection='3d'</code>æ˜¯åˆ›å»º3Dç»˜å›¾ç¯å¢ƒçš„æ ¸å¿ƒå‚æ•°ï¼Œç¼ºå°‘åˆ™é»˜è®¤ç”Ÿæˆ2Dåæ ‡è½´ã€‚</p>
<h2 data-id="heading-3">äºŒã€3Dçº¿å›¾ï¼ˆå¯¹åº”MATLAB plot3()ï¼‰ï¼šax.plot3D()</h2>
<p><code>plot3D()</code>æ˜¯MATLAB<code>plot3()</code>çš„Pythonç­‰ä»·å‡½æ•°ï¼Œç”¨äºç»˜åˆ¶<strong>ä¸‰ç»´ç©ºé—´ä¸­çš„æŠ˜çº¿/æ›²çº¿</strong>ï¼Œé€‚åˆå±•ç¤ºä¸€ç»´æ•°æ®çš„ç©ºé—´è½¨è¿¹ï¼ˆå¦‚è¿åŠ¨è·¯å¾„ã€èºæ—‹çº¿ï¼‰ã€‚</p>
<h3 data-id="heading-4">2.1 åŸºæœ¬è¯­æ³•</h3>
<pre><code class="hljs language-python" lang="python">ax.plot3D(xdata, ydata, zdata, color, linewidth, label, ...)
</code></pre>
<ul>
<li><code>xdata/ydata/zdata</code>ï¼šä¸‰ç»´åæ ‡æ•°æ®ï¼ˆéœ€ä¸ºç­‰é•¿æ•°ç»„ï¼‰ï¼›</li>
<li><code>color</code>ï¼šçº¿æ¡é¢œè‰²ï¼ˆå¦‚<code>'red'</code>ã€<code>'#FF5733'</code>ï¼‰ï¼›</li>
<li><code>linewidth</code>ï¼šçº¿æ¡å®½åº¦ï¼›</li>
<li><code>label</code>ï¼šå›¾ä¾‹æ ‡ç­¾ã€‚</li>
</ul>
<h3 data-id="heading-5">2.2 å®æˆ˜æ¡ˆä¾‹ï¼šç»˜åˆ¶ä¸‰ç»´èºæ—‹çº¿</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
<span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt
<span class="hljs-keyword">from</span> mpl_toolkits <span class="hljs-keyword">import</span> mplot3d

<span class="hljs-comment"># ç”Ÿæˆæ•°æ®ï¼šèºæ—‹çº¿å‚æ•°æ–¹ç¨‹</span>
theta = np.linspace(<span class="hljs-number">0</span>, <span class="hljs-number">10</span> * np.pi, <span class="hljs-number">1000</span>)  <span class="hljs-comment"># è§’åº¦èŒƒå›´</span>
x = np.sin(theta) * np.cos(theta)         <span class="hljs-comment"># xåæ ‡</span>
y = np.sin(theta) * np.sin(theta)         <span class="hljs-comment"># yåæ ‡</span>
z = np.linspace(<span class="hljs-number">0</span>, <span class="hljs-number">5</span>, <span class="hljs-number">1000</span>)               <span class="hljs-comment"># zåæ ‡</span>

<span class="hljs-comment"># åˆ›å»º3Dç»˜å›¾ç¯å¢ƒ</span>
fig = plt.figure(figsize=(<span class="hljs-number">8</span>, <span class="hljs-number">6</span>))
ax = plt.axes(projection=<span class="hljs-string">'3d'</span>)

<span class="hljs-comment"># ç»˜åˆ¶3Dçº¿å›¾</span>
ax.plot3D(x, y, z, color=<span class="hljs-string">'blue'</span>, linewidth=<span class="hljs-number">2</span>, label=<span class="hljs-string">'3Dèºæ—‹çº¿'</span>)

<span class="hljs-comment"># è®¾ç½®åæ ‡è½´æ ‡ç­¾ä¸å›¾ä¾‹</span>
ax.set_xlabel(<span class="hljs-string">'Xè½´'</span>, fontsize=<span class="hljs-number">12</span>)
ax.set_ylabel(<span class="hljs-string">'Yè½´'</span>, fontsize=<span class="hljs-number">12</span>)
ax.set_zlabel(<span class="hljs-string">'Zè½´'</span>, fontsize=<span class="hljs-number">12</span>)
ax.legend(loc=<span class="hljs-string">'upper right'</span>)
ax.set_title(<span class="hljs-string">'ä¸‰ç»´èºæ—‹çº¿ï¼ˆplot3Då®ç°ï¼‰'</span>, fontsize=<span class="hljs-number">14</span>)

plt.show()
</code></pre>
<p><strong>ç»“æœè§£è¯»</strong>ï¼šä»£ç é€šè¿‡å‚æ•°æ–¹ç¨‹ç”Ÿæˆèºæ—‹çº¿çš„ä¸‰ç»´åæ ‡ï¼Œ<code>plot3D()</code>å°†å…¶è¿æ¥ä¸ºè¿ç»­æ›²çº¿ï¼Œå¯æ¸…æ™°çœ‹åˆ°æ›²çº¿åœ¨XYå¹³é¢å‘ˆèºæ—‹çŠ¶ï¼Œæ²¿Zè½´çº¿æ€§ä¸Šå‡ã€‚</p>
<h3 data-id="heading-6">2.3 æ‹“å±•ï¼šç»˜åˆ¶ä¸‰ç»´éšæœºæŠ˜çº¿</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># ç”Ÿæˆéšæœºä¸‰ç»´æ•°æ®</span>
np.random.seed(<span class="hljs-number">42</span>)  <span class="hljs-comment"># å›ºå®šéšæœºç§å­</span>
x = np.cumsum(np.random.randn(<span class="hljs-number">100</span>))
y = np.cumsum(np.random.randn(<span class="hljs-number">100</span>))
z = np.cumsum(np.random.randn(<span class="hljs-number">100</span>))

<span class="hljs-comment"># ç»˜å›¾</span>
fig = plt.figure(figsize=(<span class="hljs-number">8</span>, <span class="hljs-number">6</span>))
ax = plt.axes(projection=<span class="hljs-string">'3d'</span>)
ax.plot3D(x, y, z, color=<span class="hljs-string">'green'</span>, marker=<span class="hljs-string">'o'</span>, markersize=<span class="hljs-number">3</span>, label=<span class="hljs-string">'éšæœºæŠ˜çº¿'</span>)

ax.set_xlabel(<span class="hljs-string">'X'</span>)
ax.set_ylabel(<span class="hljs-string">'Y'</span>)
ax.set_zlabel(<span class="hljs-string">'Z'</span>)
ax.legend()
ax.set_title(<span class="hljs-string">'ä¸‰ç»´éšæœºæŠ˜çº¿'</span>)
plt.show()
</code></pre>
<p><strong>æŠ€å·§</strong>ï¼šæ·»åŠ <code>marker</code>å‚æ•°å¯æ˜¾ç¤ºæ•°æ®ç‚¹ï¼Œä¾¿äºè§‚å¯Ÿç¦»æ•£æ•°æ®çš„ç©ºé—´åˆ†å¸ƒã€‚</p>
<h2 data-id="heading-7">ä¸‰ã€3Dç½‘æ ¼å›¾ï¼ˆå¯¹åº”MATLAB mesh()ï¼‰ï¼šax.plot_wireframe()</h2>
<p><code>plot_wireframe()</code>å¯¹åº”MATLABçš„<code>mesh()</code>ï¼Œç”¨äºç»˜åˆ¶<strong>ä¸‰ç»´ç½‘æ ¼é¢</strong>ï¼Œä»…æ˜¾ç¤ºæ›²é¢çš„ç½‘æ ¼çº¿æ¡ï¼Œé€‚åˆå±•ç¤ºå‡½æ•°çš„ç©ºé—´è½®å»“ï¼Œä¸å¡«å……é¢œè‰²ã€‚</p>
<h3 data-id="heading-8">3.1 æ ¸å¿ƒæ­¥éª¤ï¼šç”Ÿæˆç½‘æ ¼æ•°æ®</h3>
<p>ç»˜åˆ¶äºŒç»´å‡½æ•°<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>z</mi><mo>=</mo><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">z = f(x, y)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"/><span class="mord mathnormal" style="margin-right:0.04398em;">z</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">)</span></span></span></span></span>çš„ç½‘æ ¼å›¾ï¼Œéœ€å…ˆé€šè¿‡<code>np.meshgrid()</code>ç”ŸæˆXã€Yå¹³é¢çš„ç½‘æ ¼åæ ‡ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># ç”Ÿæˆxã€yè½´çš„ä¸€ç»´æ•°æ®</span>
x = np.linspace(-<span class="hljs-number">5</span>, <span class="hljs-number">5</span>, <span class="hljs-number">50</span>)
y = np.linspace(-<span class="hljs-number">5</span>, <span class="hljs-number">5</span>, <span class="hljs-number">50</span>)
<span class="hljs-comment"># ç”Ÿæˆç½‘æ ¼åæ ‡çŸ©é˜µ</span>
X, Y = np.meshgrid(x, y)
</code></pre>
<p><strong>è¯´æ˜</strong>ï¼š<code>np.meshgrid()</code>å°†ä¸€ç»´çš„xã€yè½¬æ¢ä¸ºäºŒç»´çŸ©é˜µï¼Œä½¿æ¯ä¸ª<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>X</mi><mo stretchy="false">[</mo><mi>i</mi><mo separator="true">,</mo><mi>j</mi><mo stretchy="false">]</mo><mo separator="true">,</mo><mi>Y</mi><mo stretchy="false">[</mo><mi>i</mi><mo separator="true">,</mo><mi>j</mi><mo stretchy="false">]</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(X[i,j], Y[i,j])</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="mclose">]</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal" style="margin-right:0.22222em;">Y</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="mclose">])</span></span></span></span></span>å¯¹åº”å¹³é¢ä¸Šçš„ä¸€ä¸ªç‚¹ã€‚</p>
<h3 data-id="heading-9">3.2 åŸºæœ¬è¯­æ³•</h3>
<pre><code class="hljs language-python" lang="python">ax.plot_wireframe(X, Y, Z, rstride, cstride, color, linewidth, ...)
</code></pre>
<ul>
<li><code>rstride/cstride</code>ï¼šè¡Œ/åˆ—æ­¥é•¿ï¼ˆæ•°å€¼è¶Šå¤§ï¼Œç½‘æ ¼è¶Šç¨€ç–ï¼‰ï¼›</li>
<li><code>Z</code>ï¼šä¸Xã€Yå¯¹åº”çš„zè½´æ•°æ®çŸ©é˜µã€‚</li>
</ul>
<h3 data-id="heading-10">3.3 å®æˆ˜æ¡ˆä¾‹ï¼šç»˜åˆ¶æ­£å¼¦æ›²é¢ç½‘æ ¼å›¾</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
<span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt
<span class="hljs-keyword">from</span> mpl_toolkits <span class="hljs-keyword">import</span> mplot3d

<span class="hljs-comment"># 1. ç”Ÿæˆç½‘æ ¼æ•°æ®</span>
x = np.linspace(-np.pi, np.pi, <span class="hljs-number">30</span>)
y = np.linspace(-np.pi, np.pi, <span class="hljs-number">30</span>)
X, Y = np.meshgrid(x, y)
<span class="hljs-comment"># 2. å®šä¹‰ä¸‰ç»´å‡½æ•°ï¼šz = sin(X) + cos(Y)</span>
Z = np.sin(X) + np.cos(Y)

<span class="hljs-comment"># 3. åˆ›å»º3Dç»˜å›¾ç¯å¢ƒ</span>
fig = plt.figure(figsize=(<span class="hljs-number">10</span>, <span class="hljs-number">8</span>))
ax = plt.axes(projection=<span class="hljs-string">'3d'</span>)

<span class="hljs-comment"># 4. ç»˜åˆ¶ç½‘æ ¼å›¾</span>
ax.plot_wireframe(X, Y, Z, rstride=<span class="hljs-number">2</span>, cstride=<span class="hljs-number">2</span>, color=<span class="hljs-string">'purple'</span>, linewidth=<span class="hljs-number">1</span>)

<span class="hljs-comment"># 5. è®¾ç½®æ ‡ç­¾ä¸æ ‡é¢˜</span>
ax.set_xlabel(<span class="hljs-string">'X (rad)'</span>, fontsize=<span class="hljs-number">12</span>)
ax.set_ylabel(<span class="hljs-string">'Y (rad)'</span>, fontsize=<span class="hljs-number">12</span>)
ax.set_zlabel(<span class="hljs-string">'Z'</span>, fontsize=<span class="hljs-number">12</span>)
ax.set_title(<span class="hljs-string">'ä¸‰ç»´æ­£å¼¦æ›²é¢ç½‘æ ¼å›¾ï¼ˆmesh/plot_wireframeå®ç°ï¼‰'</span>, fontsize=<span class="hljs-number">14</span>)

plt.show()
</code></pre>
<p><strong>å‚æ•°è§£è¯»</strong>ï¼š<code>rstride=2, cstride=2</code>è¡¨ç¤ºæ¯éš”2ä¸ªç‚¹ç»˜åˆ¶ä¸€æ¡ç½‘æ ¼çº¿ï¼Œè‹¥è®¾ä¸º1åˆ™ç½‘æ ¼å¯†é›†ï¼Œæ¸²æŸ“é€Ÿåº¦å˜æ…¢ï¼›<code>color</code>ç»Ÿä¸€è®¾ç½®ç½‘æ ¼çº¿æ¡é¢œè‰²ã€‚</p>
<h2 data-id="heading-11">å››ã€3Dæ›²é¢å›¾ï¼ˆå¯¹åº”MATLAB surf()ï¼‰ï¼šax.plot_surface()</h2>
<p><code>plot_surface()</code>å¯¹åº”MATLABçš„<code>surf()</code>ï¼Œç”¨äºç»˜åˆ¶<strong>å¡«å……é¢œè‰²çš„ä¸‰ç»´æ›²é¢</strong>ï¼Œé€šè¿‡é¢œè‰²æ˜ å°„ï¼ˆcolormapï¼‰å¯ç›´è§‚å±•ç¤ºZå€¼çš„å˜åŒ–ï¼Œæ˜¯æœ€å¸¸ç”¨çš„ä¸‰ç»´æ›²é¢å¯è§†åŒ–æ–¹æ³•ã€‚</p>
<h3 data-id="heading-12">4.1 åŸºæœ¬è¯­æ³•</h3>
<pre><code class="hljs language-python" lang="python">ax.plot_surface(X, Y, Z, cmap, alpha, edgecolor, ...)
</code></pre>
<ul>
<li><code>cmap</code>ï¼šé¢œè‰²æ˜ å°„æ–¹æ¡ˆï¼ˆå¦‚<code>'viridis'</code>ã€<code>'plasma'</code>ã€<code>'coolwarm'</code>ï¼‰ï¼›</li>
<li><code>alpha</code>ï¼šé€æ˜åº¦ï¼ˆ0-1ï¼Œ1ä¸ºä¸é€æ˜ï¼‰ï¼›</li>
<li><code>edgecolor</code>ï¼šæ›²é¢è¾¹ç¼˜çº¿æ¡é¢œè‰²ï¼ˆè®¾ä¸º<code>'none'</code>åˆ™éšè—è¾¹ç¼˜ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-13">4.2 å®æˆ˜æ¡ˆä¾‹1ï¼šç»˜åˆ¶æŠ›ç‰©é¢æ›²é¢å›¾</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
<span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt
<span class="hljs-keyword">from</span> mpl_toolkits <span class="hljs-keyword">import</span> mplot3d

<span class="hljs-comment"># ç”Ÿæˆç½‘æ ¼æ•°æ®</span>
x = np.linspace(-<span class="hljs-number">4</span>, <span class="hljs-number">4</span>, <span class="hljs-number">50</span>)
y = np.linspace(-<span class="hljs-number">4</span>, <span class="hljs-number">4</span>, <span class="hljs-number">50</span>)
X, Y = np.meshgrid(x, y)
<span class="hljs-comment"># æŠ›ç‰©é¢å‡½æ•°ï¼šz = xÂ² + yÂ²</span>
Z = X**<span class="hljs-number">2</span> + Y**<span class="hljs-number">2</span>

<span class="hljs-comment"># åˆ›å»ºç»˜å›¾ç¯å¢ƒ</span>
fig = plt.figure(figsize=(<span class="hljs-number">10</span>, <span class="hljs-number">8</span>))
ax = plt.axes(projection=<span class="hljs-string">'3d'</span>)

<span class="hljs-comment"># ç»˜åˆ¶æ›²é¢å›¾</span>
surf = ax.plot_surface(X, Y, Z, cmap=<span class="hljs-string">'viridis'</span>, alpha=<span class="hljs-number">0.8</span>, edgecolor=<span class="hljs-string">'black'</span>)

<span class="hljs-comment"># æ·»åŠ é¢œè‰²æ¡ï¼ˆå±•ç¤ºZå€¼ä¸é¢œè‰²çš„å¯¹åº”å…³ç³»ï¼‰</span>
fig.colorbar(surf, ax=ax, shrink=<span class="hljs-number">0.6</span>, aspect=<span class="hljs-number">10</span>, label=<span class="hljs-string">'Zå€¼'</span>)

<span class="hljs-comment"># è®¾ç½®æ ‡ç­¾ä¸æ ‡é¢˜</span>
ax.set_xlabel(<span class="hljs-string">'X'</span>)
ax.set_ylabel(<span class="hljs-string">'Y'</span>)
ax.set_zlabel(<span class="hljs-string">'Z'</span>)
ax.set_title(<span class="hljs-string">'ä¸‰ç»´æŠ›ç‰©é¢æ›²é¢å›¾ï¼ˆsurf/plot_surfaceå®ç°ï¼‰'</span>, fontsize=<span class="hljs-number">14</span>)

plt.show()
</code></pre>
<p><strong>ç»“æœè§£è¯»</strong>ï¼šé¢œè‰²ä»è“åˆ°é»„æ¸å˜ï¼Œå¯¹åº”Zå€¼ä»0ï¼ˆä¸­å¿ƒï¼‰åˆ°32ï¼ˆè¾¹ç¼˜ï¼‰é€’å¢ï¼Œé¢œè‰²æ¡æ¸…æ™°å±•ç¤ºäº†æ•°å€¼ä¸é¢œè‰²çš„æ˜ å°„å…³ç³»ï¼›<code>edgecolor='black'</code>è®©æ›²é¢çš„ç½‘æ ¼è¾¹ç¼˜æ›´æ˜æ˜¾ã€‚</p>
<h3 data-id="heading-14">4.3 å®æˆ˜æ¡ˆä¾‹2ï¼šå½©è‰²æ­£å¼¦æ›²é¢ï¼ˆéšè—è¾¹ç¼˜ï¼‰</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># å¤ç”¨å‰æ–‡çš„Xã€Yã€Zæ•°æ®ï¼ˆZ = sin(X) + cos(Y)ï¼‰</span>
fig = plt.figure(figsize=(<span class="hljs-number">10</span>, <span class="hljs-number">8</span>))
ax = plt.axes(projection=<span class="hljs-string">'3d'</span>)

<span class="hljs-comment"># éšè—è¾¹ç¼˜çš„æ›²é¢å›¾</span>
surf = ax.plot_surface(X, Y, Z, cmap=<span class="hljs-string">'coolwarm'</span>, alpha=<span class="hljs-number">0.9</span>, edgecolor=<span class="hljs-string">'none'</span>)

fig.colorbar(surf, ax=ax, shrink=<span class="hljs-number">0.6</span>, label=<span class="hljs-string">'Zå€¼'</span>)
ax.set_xlabel(<span class="hljs-string">'X (rad)'</span>)
ax.set_ylabel(<span class="hljs-string">'Y (rad)'</span>)
ax.set_zlabel(<span class="hljs-string">'Z'</span>)
ax.set_title(<span class="hljs-string">'å½©è‰²æ­£å¼¦æ›²é¢ï¼ˆæ— è¾¹ç¼˜ï¼‰'</span>, fontsize=<span class="hljs-number">14</span>)

plt.show()
</code></pre>
<p><strong>æŠ€å·§</strong>ï¼š<code>edgecolor='none'</code>å¯è®©æ›²é¢æ›´å¹³æ»‘ï¼Œé€‚åˆå±•ç¤ºè¿ç»­çš„é¢œè‰²æ¸å˜æ•ˆæœã€‚</p>
<h2 data-id="heading-15">äº”ã€ç­‰é«˜çº¿å›¾ï¼ˆå¯¹åº”MATLAB contour()ï¼‰ï¼šcontour()/contour3D()</h2>
<p>ç­‰é«˜çº¿å›¾é€šè¿‡<strong>äºŒç»´å¹³é¢ä¸Šçš„é—­åˆæ›²çº¿</strong>å±•ç¤ºä¸‰ç»´å‡½æ•°çš„Zå€¼åˆ†å¸ƒï¼Œåˆ†ä¸º<strong>2Dç­‰é«˜çº¿</strong>ï¼ˆ<code>ax.contour()</code>ï¼‰å’Œ<strong>3Dç­‰é«˜çº¿</strong>ï¼ˆ<code>ax.contour3D()</code>ï¼‰ï¼Œå¯¹åº”MATLABçš„<code>contour()</code>å’Œ<code>contour3()</code>ã€‚</p>
<h3 data-id="heading-16">5.1 2Dç­‰é«˜çº¿å›¾ï¼šax.contour()</h3>
<h4 data-id="heading-17">5.1.1 åŸºæœ¬è¯­æ³•</h4>
<pre><code class="hljs language-python" lang="python">ax.contour(X, Y, Z, levels, colors, linewidths, label, ...)
</code></pre>
<ul>
<li><code>levels</code>ï¼šç­‰é«˜çº¿å±‚çº§æ•°ï¼ˆæˆ–æŒ‡å®šå…·ä½“æ•°å€¼ï¼‰ï¼›</li>
<li><code>colors</code>ï¼šç­‰é«˜çº¿é¢œè‰²ï¼›</li>
<li><code>linewidths</code>ï¼šçº¿æ¡å®½åº¦ã€‚</li>
</ul>
<h4 data-id="heading-18">5.1.2 å®æˆ˜æ¡ˆä¾‹ï¼šæŠ›ç‰©é¢2Dç­‰é«˜çº¿</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># å¤ç”¨æŠ›ç‰©é¢çš„Xã€Yã€Zæ•°æ®</span>
fig, ax = plt.subplots(figsize=(<span class="hljs-number">8</span>, <span class="hljs-number">6</span>))

<span class="hljs-comment"># ç»˜åˆ¶2Dç­‰é«˜çº¿</span>
contour = ax.contour(X, Y, Z, levels=<span class="hljs-number">15</span>, cmap=<span class="hljs-string">'viridis'</span>, linewidths=<span class="hljs-number">1.5</span>)

<span class="hljs-comment"># æ·»åŠ ç­‰é«˜çº¿æ•°å€¼æ ‡ç­¾</span>
ax.clabel(contour, inline=<span class="hljs-literal">True</span>, fontsize=<span class="hljs-number">8</span>, fmt=<span class="hljs-string">'%.1f'</span>)

<span class="hljs-comment"># è®¾ç½®æ ‡ç­¾ä¸æ ‡é¢˜</span>
ax.set_xlabel(<span class="hljs-string">'X'</span>)
ax.set_ylabel(<span class="hljs-string">'Y'</span>)
ax.set_title(<span class="hljs-string">'æŠ›ç‰©é¢2Dç­‰é«˜çº¿å›¾'</span>, fontsize=<span class="hljs-number">14</span>)
plt.grid(<span class="hljs-literal">True</span>, alpha=<span class="hljs-number">0.3</span>)
plt.show()
</code></pre>
<p><strong>å…³é”®å‚æ•°</strong>ï¼š<code>ax.clabel()</code>ç”¨äºæ·»åŠ ç­‰é«˜çº¿çš„æ•°å€¼æ ‡ç­¾ï¼Œ<code>inline=True</code>è¡¨ç¤ºæ ‡ç­¾åµŒå…¥çº¿æ¡å†…éƒ¨ã€‚</p>
<h3 data-id="heading-19">5.2 3Dç­‰é«˜çº¿å›¾ï¼šax.contour3D()</h3>
<p><code>contour3D()</code>å°†ç­‰é«˜çº¿ç»˜åˆ¶åœ¨<strong>ä¸‰ç»´ç©ºé—´çš„æŒ‡å®šZå¹³é¢</strong>ï¼Œä¿ç•™ä¸‰ç»´ç©ºé—´çš„ç«‹ä½“æ„Ÿã€‚</p>
<h4 data-id="heading-20">5.2.1 åŸºæœ¬è¯­æ³•</h4>
<pre><code class="hljs language-python" lang="python">ax.contour3D(X, Y, Z, levels, cmap, linewidths, ...)
</code></pre>
<h4 data-id="heading-21">5.2.2 å®æˆ˜æ¡ˆä¾‹ï¼šæ­£å¼¦æ›²é¢3Dç­‰é«˜çº¿</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># å¤ç”¨æ­£å¼¦æ›²é¢çš„Xã€Yã€Zæ•°æ®</span>
fig = plt.figure(figsize=(<span class="hljs-number">10</span>, <span class="hljs-number">8</span>))
ax = plt.axes(projection=<span class="hljs-string">'3d'</span>)

<span class="hljs-comment"># ç»˜åˆ¶3Dç­‰é«˜çº¿ï¼ˆ20ä¸ªå±‚çº§ï¼‰</span>
ax.contour3D(X, Y, Z, levels=<span class="hljs-number">20</span>, cmap=<span class="hljs-string">'coolwarm'</span>, linewidths=<span class="hljs-number">1</span>)

<span class="hljs-comment"># è®¾ç½®è§†è§’ä¸æ ‡ç­¾</span>
ax.view_init(elev=<span class="hljs-number">30</span>, azim=<span class="hljs-number">60</span>)  <span class="hljs-comment"># è°ƒæ•´è§†è§’ï¼ˆä»°è§’30Â°ï¼Œæ–¹ä½è§’60Â°ï¼‰</span>
ax.set_xlabel(<span class="hljs-string">'X (rad)'</span>)
ax.set_ylabel(<span class="hljs-string">'Y (rad)'</span>)
ax.set_zlabel(<span class="hljs-string">'Z'</span>)
ax.set_title(<span class="hljs-string">'æ­£å¼¦æ›²é¢3Dç­‰é«˜çº¿å›¾'</span>, fontsize=<span class="hljs-number">14</span>)

plt.show()
</code></pre>
<p><strong>è§†è§’è°ƒæ•´</strong>ï¼š<code>ax.view_init(elev, azim)</code>å¯æ‰‹åŠ¨è®¾ç½®ç»˜å›¾è§†è§’ï¼Œ<code>elev</code>ä¸ºä»°è§’ï¼ˆä¸XYå¹³é¢çš„å¤¹è§’ï¼‰ï¼Œ<code>azim</code>ä¸ºæ–¹ä½è§’ï¼ˆç»•Zè½´çš„æ—‹è½¬è§’åº¦ï¼‰ã€‚</p>
<h3 data-id="heading-22">5.3 æ··åˆç»˜å›¾ï¼šæ›²é¢å›¾+3Dç­‰é«˜çº¿</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># æŠ›ç‰©é¢æ•°æ®çš„æ›²é¢+3Dç­‰é«˜çº¿æ··åˆå›¾</span>
fig = plt.figure(figsize=(<span class="hljs-number">10</span>, <span class="hljs-number">8</span>))
ax = plt.axes(projection=<span class="hljs-string">'3d'</span>)

<span class="hljs-comment"># ç»˜åˆ¶æ›²é¢ï¼ˆåŠé€æ˜ï¼‰</span>
ax.plot_surface(X, Y, Z, cmap=<span class="hljs-string">'viridis'</span>, alpha=<span class="hljs-number">0.5</span>, edgecolor=<span class="hljs-string">'none'</span>)
<span class="hljs-comment"># ç»˜åˆ¶3Dç­‰é«˜çº¿</span>
ax.contour3D(X, Y, Z, levels=<span class="hljs-number">10</span>, cmap=<span class="hljs-string">'viridis'</span>, linewidths=<span class="hljs-number">2</span>)

ax.set_xlabel(<span class="hljs-string">'X'</span>)
ax.set_ylabel(<span class="hljs-string">'Y'</span>)
ax.set_zlabel(<span class="hljs-string">'Z'</span>)
ax.set_title(<span class="hljs-string">'æŠ›ç‰©é¢ï¼šæ›²é¢å›¾+3Dç­‰é«˜çº¿'</span>, fontsize=<span class="hljs-number">14</span>)
plt.show()
</code></pre>
<p><strong>å®æˆ˜ä»·å€¼</strong>ï¼šæ··åˆç»˜å›¾æ—¢å±•ç¤ºäº†æ›²é¢çš„æ•´ä½“å½¢æ€ï¼Œåˆé€šè¿‡ç­‰é«˜çº¿æ¸…æ™°æ ‡æ³¨äº†Zå€¼çš„åˆ†å¸ƒï¼Œé€‚åˆä¸“ä¸šæŠ¥å‘Šä¸è®ºæ–‡å¯è§†åŒ–ã€‚</p>
<h2 data-id="heading-23">å…­ã€ä¸‰ç»´ç»˜å›¾å¸¸è§æŠ€å·§ä¸é—®é¢˜è§£å†³</h2>
<h3 data-id="heading-24">6.1 è°ƒæ•´è§†è§’</h3>
<p>é™¤äº†<code>ax.view_init()</code>ï¼Œè¿˜å¯åœ¨ç»˜å›¾çª—å£ä¸­<strong>é¼ æ ‡äº¤äº’è°ƒæ•´</strong>ï¼š</p>
<ul>
<li>å·¦é”®æ‹–åŠ¨ï¼šæ—‹è½¬è§†è§’ï¼ˆè°ƒæ•´azim/elevï¼‰ï¼›</li>
<li>æ»šè½®ï¼šç¼©æ”¾ç”»é¢ï¼›</li>
<li>å³é”®æ‹–åŠ¨ï¼šå¹³ç§»ç”»é¢ã€‚</li>
</ul>
<h3 data-id="heading-25">6.2 è®¾ç½®åæ ‡è½´èŒƒå›´</h3>
<p>é€šè¿‡<code>ax.set_xlim()</code>/<code>ax.set_ylim()</code>/<code>ax.set_zlim()</code>å›ºå®šåæ ‡è½´èŒƒå›´ï¼Œé¿å…è‡ªåŠ¨ç¼©æ”¾å¯¼è‡´çš„æ¯”ä¾‹å¤±è°ƒï¼š</p>
<pre><code class="hljs language-python" lang="python">ax.set_xlim(-<span class="hljs-number">5</span>, <span class="hljs-number">5</span>)
ax.set_ylim(-<span class="hljs-number">5</span>, <span class="hljs-number">5</span>)
ax.set_zlim(-<span class="hljs-number">2</span>, <span class="hljs-number">2</span>)
</code></pre>
<h3 data-id="heading-26">6.3 ä¿å­˜é«˜æ¸…å›¾ç‰‡</h3>
<p>ä½¿ç”¨<code>plt.savefig()</code>ä¿å­˜å›¾ç‰‡ï¼Œè®¾ç½®<code>dpi</code>å‚æ•°æé«˜åˆ†è¾¨ç‡ï¼š</p>
<pre><code class="hljs language-python" lang="python">plt.savefig(<span class="hljs-string">'3d_surface.png'</span>, dpi=<span class="hljs-number">300</span>, bbox_inches=<span class="hljs-string">'tight'</span>)
</code></pre>
<ul>
<li><code>dpi=300</code>ï¼šé€‚åˆå°åˆ·/è®ºæ–‡çš„é«˜æ¸…åˆ†è¾¨ç‡ï¼›</li>
<li><code>bbox_inches='tight'</code>ï¼šè£å‰ªç©ºç™½è¾¹ç¼˜ã€‚</li>
</ul>
<h3 data-id="heading-27">6.4 è§£å†³â€œç½‘æ ¼/æ›²é¢æ¸²æŸ“æ¨¡ç³Šâ€é—®é¢˜</h3>
<ul>
<li>å¢å¤§<code>np.linspace()</code>çš„é‡‡æ ·ç‚¹æ•°ï¼ˆå¦‚ä»30æ”¹ä¸º50ï¼‰ï¼Œè®©æ•°æ®æ›´å¯†é›†ï¼›</li>
<li>ä¿å­˜å›¾ç‰‡æ—¶æé«˜<code>dpi</code>ï¼›</li>
<li>å‡å°‘<code>rstride/cstride</code>çš„æ­¥é•¿ï¼ˆè®¾ä¸º1ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-28">6.5 è‡ªå®šä¹‰é¢œè‰²æ˜ å°„</h3>
<p><code>matplotlib</code>å†…ç½®äº†æ•°åç§é¢œè‰²æ˜ å°„æ–¹æ¡ˆï¼Œä¹Ÿå¯è‡ªå®šä¹‰ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> matplotlib.colors <span class="hljs-keyword">import</span> LinearSegmentedColormap

<span class="hljs-comment"># è‡ªå®šä¹‰ä»çº¢åˆ°ç»¿çš„é¢œè‰²æ˜ å°„</span>
colors = [(<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>), (<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>)]  <span class="hljs-comment"># çº¢â†’ç»¿</span>
cmap = LinearSegmentedColormap.from_list(<span class="hljs-string">'custom'</span>, colors, N=<span class="hljs-number">100</span>)
ax.plot_surface(X, Y, Z, cmap=cmap)
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Githubé¡¹ç›®CI&CDéƒ¨ç½²]]></title>    <link>https://juejin.cn/post/7585839411121766446</link>    <guid>https://juejin.cn/post/7585839411121766446</guid>    <pubDate>2025-12-21T13:42:04.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7585839411121766446" data-draft-id="7585839411121750062" data-original-type="2" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Githubé¡¹ç›®CI&amp;CDéƒ¨ç½²"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-21T13:42:04.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="charlee44"/> <meta itemprop="url" content="https://juejin.cn/user/1117549770846872"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Githubé¡¹ç›®CI&amp;CDéƒ¨ç½²
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1117549770846872/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    charlee44
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-21T13:42:04.000Z" title="Sun Dec 21 2025 13:42:04 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-21
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">1. å¼•è¨€</h2>
<p>åœ¨è½¯ä»¶å¼€å‘ä¸­ï¼Œ<strong>CI/CD</strong>ï¼ˆæŒç»­é›†æˆ / æŒç»­éƒ¨ç½²ï¼‰æ˜¯ä¸€ç§è‡ªåŠ¨åŒ–æµç¨‹ï¼šæ¯å½“ä»£ç æ›´æ–°ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨<strong>æ„å»ºã€æµ‹è¯•å¹¶éƒ¨ç½²</strong>åº”ç”¨ï¼Œé¿å…æ‰‹åŠ¨æ“ä½œçš„ç¹çä¸é”™è¯¯ã€‚ä½œä¸º DevOps çš„æ ¸å¿ƒå®è·µï¼ŒCI/CD æœ‰åŠ›æ”¯æ’‘äº†æ•æ·å¼€å‘â€œå¿«é€Ÿäº¤ä»˜ã€æŒç»­åé¦ˆâ€çš„ç†å¿µï¼Œè®©å›¢é˜Ÿæ—¢èƒ½çµæ´»å“åº”å˜åŒ–ï¼Œåˆèƒ½ä¿éšœäº¤ä»˜è´¨é‡ã€‚</p>
<h2 data-id="heading-1">2. æ“ä½œ</h2>
<h3 data-id="heading-2">2.1 é…ç½® SSH å¯†é’¥</h3>
<p>å¦‚æœä»£ç æ‰˜ç®¡åœ¨ GitHub ä¸Šï¼Œé‚£ä¹ˆå¯ä»¥é€šè¿‡ GitHub Actions æ¥å®ç° CI/CD éƒ¨ç½²ã€‚å…¶å® GitHub Actions çš„å®ç°åŸç†å¾ˆç®€å•ï¼Œå°±æ˜¯é€šè¿‡ SSH ç™»å½•åˆ°ç›®æ ‡ä¸»æœºï¼Œç„¶åæ‰§è¡Œä¸€é”®å®‰è£…éƒ¨ç½²è„šæœ¬ã€‚</p>
<p>ç”±äº GitHub Actions çš„åŸç†æ˜¯ Github ä¸»æœºç™»å½•åˆ°ç›®æ ‡ä¸»æœºï¼ˆUbuntuï¼‰æ¥æ‰§è¡Œå‘½ä»¤ï¼Œå› æ­¤æœ€å¥½å…ˆç”Ÿæˆä¸€å¯¹ä¸“ç”¨äº CI/CD æ–°çš„ SSH å¯†é’¥ã€‚ç¬”è€…çš„å¼€å‘ç¯å¢ƒæ˜¯ Windowsï¼Œå› æ­¤é€šè¿‡ PowerShell æ¥ç”Ÿæˆï¼š</p>
<pre><code class="hljs language-bash" lang="bash">ssh-keygen -t rsa -b 4096 -f ./github_cicd_key
</code></pre>
<p>ç„¶åä¼šæç¤ºè¾“å…¥å¯†ç ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">Enter passphrase (empty <span class="hljs-keyword">for</span> no passphrase):
</code></pre>
<p>CI/CD åœºæ™¯ä¸‹ä¸€èˆ¬ç”¨æ— å¯†ç å¯†é’¥ï¼Œç›´æ¥æŒ‰å›è½¦ã€‚ç»“æŸè¿è¡Œåå°±å¯ä»¥çœ‹åˆ°ä¸¤ä¸ªå¯†é’¥æ–‡ä»¶ï¼š</p>
<ul>
<li>github_cicd_keyï¼ˆç§é’¥ï¼‰</li>
<li>github_cicd_key.pubï¼ˆå…¬é’¥ï¼‰</li>
</ul>
<p>å°†å…¬é’¥å†…å®¹æ·»åŠ åˆ° Ubuntu æœåŠ¡å™¨çš„ ~/.ssh/authorized_keysï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åœ¨ Ubuntu æœåŠ¡å™¨ä¸Šæ‰§è¡Œ</span>&#13;
<span class="hljs-built_in">echo</span> <span class="hljs-string">"ç²˜è´´ github_cicd_key.pub çš„å…¨éƒ¨å†…å®¹"</span> &gt;&gt; ~/.ssh/authorized_keys
</code></pre>
<p>å›åˆ° GitHub ä»“åº“é¡µé¢ï¼š</p>
<ul>
<li>è¿›å…¥ Settings -&gt; Security -&gt; Secrets and variables â†’ Actions</li>
<li>ç‚¹å‡» New repository secret</li>
<li>æ·»åŠ ä»¥ä¸‹ä¸‰ä¸ª Secretï¼š</li>
</ul>





















<table><thead><tr><th>Name</th><th>Valueï¼ˆå€¼ï¼‰</th></tr></thead><tbody><tr><td>SERVER_HOST</td><td>ç›®æ ‡ä¸»æœº IPï¼ˆå¦‚ 123.123.123.123ï¼‰</td></tr><tr><td>SERVER_USER</td><td>ç™»å½•ç”¨æˆ·åï¼ˆå¦‚ ubuntuã€root ç­‰ï¼‰</td></tr><tr><td>SSH_PRIVATE_KEY</td><td>æ‰“å¼€ github_cicd_key æ–‡ä»¶ï¼Œå¤åˆ¶å…¨éƒ¨å†…å®¹ç²˜è´´è¿›æ¥</td></tr></tbody></table>
<h3 data-id="heading-3">2.2 åˆ›å»º CI/CD å·¥ä½œæµ</h3>
<p>åœ¨æœ¬åœ°é¡¹ç›®æ ¹ç›®å½•ï¼ˆWindows ä¸Šï¼‰åˆ›å»ºæ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-text" lang="text">.github/workflows/build-and-deploy.yml
</code></pre>
<p>å†…å®¹å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">name:</span> <span class="hljs-string">Deploy</span> <span class="hljs-string">Blog</span>&#13;
&#13;
<span class="hljs-comment"># æ”¯æŒä¸¤ç§è§¦å‘æ–¹å¼</span>&#13;
<span class="hljs-attr">on:</span>&#13;
  <span class="hljs-comment"># 1. æ‰‹åŠ¨è§¦å‘ï¼ˆGitHub UI ä¸Šç‚¹å‡» "Run workflow"ï¼‰</span>&#13;
  <span class="hljs-attr">workflow_dispatch:</span>&#13;
&#13;
  <span class="hljs-comment"># 2. è‡ªåŠ¨è§¦å‘ï¼šä»…å½“æ¨é€åˆ° main åˆ†æ”¯ ä¸” æäº¤ä¿¡æ¯å« [deploy]</span>&#13;
  <span class="hljs-attr">push:</span>&#13;
    <span class="hljs-attr">branches:</span> [<span class="hljs-string">main</span>]&#13;
&#13;
<span class="hljs-attr">jobs:</span>&#13;
  <span class="hljs-attr">deploy:</span> &#13;
    <span class="hljs-attr">if:</span> <span class="hljs-string">&gt;</span>&#13;
      <span class="hljs-string">github.event_name</span> <span class="hljs-string">==</span> <span class="hljs-string">'workflow_dispatch'</span> <span class="hljs-string">||</span>&#13;
      <span class="hljs-string">(github.event_name</span> <span class="hljs-string">==</span> <span class="hljs-string">'push'</span> <span class="hljs-string">&amp;&amp;</span> <span class="hljs-string">contains(github.event.head_commit.message,</span> <span class="hljs-string">'[deploy]'</span><span class="hljs-string">))</span>&#13;
&#13;
    <span class="hljs-attr">runs-on:</span> <span class="hljs-string">ubuntu-latest</span>&#13;
    <span class="hljs-attr">steps:</span>&#13;
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Run</span> <span class="hljs-string">remote</span> <span class="hljs-string">script</span> <span class="hljs-string">via</span> <span class="hljs-string">SSH</span>&#13;
        <span class="hljs-attr">uses:</span> <span class="hljs-string">appleboy/ssh-action@v1.0.3</span>&#13;
        <span class="hljs-attr">with:</span>&#13;
          <span class="hljs-attr">host:</span> <span class="hljs-string">${{</span> <span class="hljs-string">secrets.SERVER_HOST</span> <span class="hljs-string">}}</span>&#13;
          <span class="hljs-attr">username:</span> <span class="hljs-string">${{</span> <span class="hljs-string">secrets.SERVER_USER</span> <span class="hljs-string">}}</span>&#13;
          <span class="hljs-attr">key:</span> <span class="hljs-string">${{</span> <span class="hljs-string">secrets.SSH_PRIVATE_KEY</span> <span class="hljs-string">}}</span>&#13;
          <span class="hljs-attr">script:</span> <span class="hljs-string">|</span>&#13;
            <span class="hljs-string">cd</span> <span class="hljs-string">/home/ubuntu/</span>&#13;
            <span class="hljs-string">bash</span> <span class="hljs-string">-l</span> <span class="hljs-string">-c</span> <span class="hljs-string">'./build-and-deploy.sh'</span>
</code></pre>
<p>è¿™æ®µå·¥ä½œæµé…ç½®çš„æ„æ€æ˜¯ï¼š</p>
<ul>
<li>å¯ä»¥æ‰‹åŠ¨è§¦å‘ï¼ˆGitHub UI ä¸Šç‚¹å‡» "Run workflow"ï¼‰CI/CD å·¥ä½œæµã€‚</li>
<li>å¯ä»¥è‡ªåŠ¨è§¦å‘ CI/CD å·¥ä½œæµï¼Œä¸è¿‡è¦æ±‚æ¨é€åˆ° main åˆ†æ”¯ä¸”æäº¤ä¿¡æ¯å« [deploy] ã€‚</li>
<li>ä½¿ç”¨ SSH çš„é…ç½® <code>SERVER_HOST</code>ã€<code>SERVER_USER</code> å’Œ <code>SSH_PRIVATE_KEY</code> ç™»å½•ç›®æ ‡ä¸»æœº ã€‚</li>
<li>æ‰§è¡Œä¸€é”®æ„å»ºå’Œéƒ¨ç½²è„šæœ¬ <code>build-and-deploy.sh</code> ã€‚</li>
</ul>
<p>build-and-deploy.yml éœ€è¦æäº¤å¹¶æ¨é€åˆ° GitHubï¼š</p>
<pre><code class="hljs language-sql" lang="sql">git <span class="hljs-keyword">add</span> .&#13;
git <span class="hljs-keyword">commit</span> <span class="hljs-operator">-</span>m "Add simple CI/CD workflow"&#13;
git push origin main
</code></pre>
<p>æœ€åï¼Œé€šè¿‡æ‰“å¼€ GitHub ä»“åº“ â†’ Actions æ ‡ç­¾é¡µï¼Œå°±å¯ä»¥çœ‹åˆ°æ˜¯å¦æœ‰ workflow æ­£åœ¨è¿è¡Œï¼ˆç»¿è‰² âœ” è¡¨ç¤ºæˆåŠŸï¼‰ï¼Œè¿˜å¯ä»¥æŸ¥çœ‹å…·ä½“çš„ CI/CD æ—¥å¿—ã€‚</p>
<h3 data-id="heading-4">2.3 æ³¨æ„äº‹é¡¹</h3>
<p>CI/CD çš„é…ç½®æ–‡ä»¶ build-and-deploy.yml ä¸­æ‰§è¡Œä»»æ„ shell å‘½ä»¤ï¼Œä¸è¿‡è¿˜æ˜¯æ¨èå°è£…å¥½ä¸€é”®æ„å»ºéƒ¨ç½²è„šæœ¬ï¼Œç›´æ¥è°ƒç”¨è¿™ä¸ªè„šæœ¬ã€‚å¾ˆå¤šæƒ…å†µä¸‹å¯ä»¥ä½¿ç”¨è¿™ä¸ªè„šæœ¬æ¥è¿›è¡Œæ‰‹åŠ¨éƒ¨ç½²ã€‚</p>
<p>å¦å¤– GitHub Actions ä½¿ç”¨çš„æ˜¯ éäº¤äº’å¼ã€éç™»å½•å¼ shellï¼Œä¸ä¼šåŠ è½½ .bashrc æˆ– .profileï¼Œç¯å¢ƒå˜é‡ï¼ˆå°¤å…¶æ˜¯ PATHï¼‰ä¸æ‰‹åŠ¨ç™»å½•æ—¶ä¸åŒã€‚å› æ­¤ï¼Œæœ‰ä¸¤ç§æ–¹æ¡ˆï¼š</p>
<ol>
<li>åœ¨æ„å»ºéƒ¨ç½²è„šæœ¬çš„å¼€å¤´æ˜¾å¼åŠ è½½ç¯å¢ƒã€‚æ¯”å¦‚ï¼š</li>
</ol>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ç”¨äºCI/CDç¯å¢ƒé…ç½®</span>&#13;
<span class="hljs-built_in">export</span> NVM_DIR=<span class="hljs-string">"<span class="hljs-variable">$HOME</span>/.nvm"</span>&#13;
[ -s <span class="hljs-string">"<span class="hljs-variable">$NVM_DIR</span>/nvm.sh"</span> ] &amp;&amp; \. <span class="hljs-string">"<span class="hljs-variable">$NVM_DIR</span>/nvm.sh"</span>  <span class="hljs-comment"># This loads nvm</span>&#13;
[ -s <span class="hljs-string">"<span class="hljs-variable">$NVM_DIR</span>/bash_completion"</span> ] &amp;&amp; \. <span class="hljs-string">"<span class="hljs-variable">$NVM_DIR</span>/bash_completion"</span>  <span class="hljs-comment"># This loads nvm bash_completion</span>&#13;
&#13;
<span class="hljs-built_in">export</span> LD_LIBRARY_PATH=/home/ubuntu/GISBasic/lib/:/home/ubuntu/GISBasic/lib64/:<span class="hljs-variable">${LD_LIBRARY_PATH:-}</span> <span class="hljs-comment">#æ”¯æŒå˜é‡ LD_LIBRARY_PATH æœªå®šä¹‰æˆ–ä¸ºç©º</span>
</code></pre>
<ol start="2">
<li>é…ç½®æ–‡ä»¶ build-and-deploy.yml æ‰§è¡Œè„šæœ¬å‘½ä»¤å¢åŠ  <code>bash -l -c</code>ï¼Œè¡¨ç¤ºä»¥ç™»å½•ç”¨æˆ·çš„èº«ä»½å¯åŠ¨ä¸€ä¸ªæ–° shellï¼Œå¹¶åœ¨è¿™ä¸ªç¯å¢ƒä¸­è¿è¡Œè„šæœ¬ã€‚ä¾‹å¦‚è¿™é‡Œçš„ï¼š</li>
</ol>
<pre><code class="hljs language-bash" lang="bash">bash -l -c <span class="hljs-string">'./build-and-deploy.sh'</span>
</code></pre>
<h2 data-id="heading-5">3. å±•æœ›</h2>
<p>å…¶å® CI/CD é…ç½®è¿œä¸æ˜¯é‚£ä¹ˆç®€å•ï¼Œéšç€é¡¹ç›®å¤æ‚åº¦æå‡ï¼Œè¿˜å¯ä»¥é€æ­¥å¼•å…¥æ›´å¤šå·¥ç¨‹å®è·µï¼š</p>
<ul>
<li>åŸºäº Git Tag çš„æ­£å¼å‘å¸ƒï¼šå½“åŠŸèƒ½ç¨³å®šæ—¶ï¼Œæ‰“ä¸€ä¸ª v1.0.0 è¿™æ ·çš„è¯­ä¹‰åŒ–ç‰ˆæœ¬æ ‡ç­¾ï¼Œè‡ªåŠ¨è§¦å‘æ„å»ºå¹¶å°†äºŒè¿›åˆ¶æ–‡ä»¶ä¸Šä¼ åˆ° GitHub Releaseï¼Œæ–¹ä¾¿ä»–äººä¸‹è½½ä½¿ç”¨ã€‚</li>
<li>è‡ªåŠ¨åŒ–æµ‹è¯•é›†æˆï¼šåœ¨éƒ¨ç½²å‰è¿è¡Œå•å…ƒæµ‹è¯•ã€ç«¯åˆ°ç«¯æµ‹è¯•ï¼Œç¡®ä¿æ–°ä»£ç ä¸ä¼šç ´åç°æœ‰åŠŸèƒ½ã€‚</li>
<li>å¤šç¯å¢ƒæ”¯æŒï¼šåŒºåˆ†å¼€å‘ã€é¢„å‘ã€ç”Ÿäº§ç¯å¢ƒï¼Œé¿å…ç›´æ¥åœ¨ç”Ÿäº§æœåŠ¡å™¨ä¸Šâ€œè¯•é”™â€ã€‚</li>
<li>åŸºç¡€è®¾æ–½å³ä»£ç ï¼ˆIaCï¼‰ï¼šç”¨ Ansibleã€Terraform ç­‰å·¥å…·ç®¡ç†æœåŠ¡å™¨é…ç½®ï¼Œè®©ç¯å¢ƒå¯å¤ç°ã€å¯ç‰ˆæœ¬æ§åˆ¶ã€‚</li>
<li>ç›‘æ§ä¸å›æ»šæœºåˆ¶ï¼šéƒ¨ç½²åè‡ªåŠ¨æ£€æŸ¥æœåŠ¡å¥åº·çŠ¶æ€ï¼Œå¼‚å¸¸æ—¶è‡ªåŠ¨å›é€€åˆ°ä¸Šä¸€ç‰ˆæœ¬ã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item>  </channel></rss>