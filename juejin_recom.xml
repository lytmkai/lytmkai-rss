<?xml version="1.0" encoding="UTF-8"?><rss version="2.0">  <channel>      <title>æ˜é‡‘æ–‡ç« æ¨è</title>      <link>https://juejin.cn/recommended?sort=newest</link>      <description>ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…æˆé•¿çš„ç¤¾åŒº</description>      <generator>python juejin_recom.py @Pi20</generator>      <item>    <title><![CDATA[åªæœ‰å‰ç«¯ Leader æ‰ä¼šå‘Šè¯‰ä½ ï¼šé‚£äº›å¹´è¸©è¿‡çš„æ¨¡å—åŠ è½½å¤±è´¥çš„å‘]]></title>    <link>https://juejin.cn/post/7572524368876126243</link>    <guid>https://juejin.cn/post/7572524368876126243</guid>    <pubDate>2025-11-15T05:28:19.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572524368876126243" data-draft-id="7572453554331156480" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åªæœ‰å‰ç«¯ Leader æ‰ä¼šå‘Šè¯‰ä½ ï¼šé‚£äº›å¹´è¸©è¿‡çš„æ¨¡å—åŠ è½½å¤±è´¥çš„å‘"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2025-11-15T05:28:19.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¹Ÿæ— é£é›¨ä¹Ÿé›¾æ™´"/> <meta itemprop="url" content="https://juejin.cn/user/2175258804632332"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åªæœ‰å‰ç«¯ Leader æ‰ä¼šå‘Šè¯‰ä½ ï¼šé‚£äº›å¹´è¸©è¿‡çš„æ¨¡å—åŠ è½½å¤±è´¥çš„å‘
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2175258804632332/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¹Ÿæ— é£é›¨ä¹Ÿé›¾æ™´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-15T05:28:19.000Z" title="Sat Nov 15 2025 05:28:19 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰ç«¯éƒ¨ç½²åæ¨¡å—åŠ è½½ 404ï¼šä»å´©æºƒåˆ°è‡ªåŠ¨æ¢å¤çš„è§£å†³æ–¹æ¡ˆ</h2>
<h3 data-id="heading-1">æµ‹è¯•æ—¶å‘ç°çš„è¯¡å¼‚é—®é¢˜</h3>
<p>æœ€è¿‘åœ¨å¼€å‘ä¸€ä¸ªæ–°é¡¹ç›®ï¼Œç”¨çš„ Vite + React æŠ€æœ¯æ ˆï¼Œå¼€å‘ä½“éªŒæŒºä¸é”™ã€‚æµ‹è¯•é˜¶æ®µå´å‘ç°äº†ä¸€ä¸ªè¯¡å¼‚çš„é—®é¢˜ã€‚</p>
<p>æµ‹è¯•åŒå­¦åé¦ˆï¼šç‚¹å‡»æŸä¸ªåŠŸèƒ½æ¨¡å—æ—¶ï¼Œé¡µé¢ç›´æ¥ç™½å±äº†ã€‚æ‰“å¼€æ§åˆ¶å°ä¸€çœ‹ï¼š</p>
<pre><code class="hljs language-sql" lang="sql">Failed <span class="hljs-keyword">to</span> <span class="hljs-keyword">fetch</span> dynamically imported <span class="hljs-keyword">module</span>: <span class="hljs-operator">/</span>assets<span class="hljs-operator">/</span>chat<span class="hljs-operator">-</span>abc123.js
<span class="hljs-keyword">GET</span> <span class="hljs-operator">/</span>assets<span class="hljs-operator">/</span>chat<span class="hljs-operator">-</span>abc123.js <span class="hljs-number">404</span> <span class="hljs-keyword">Not</span> Found
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e1f1758465da4b53bad010364c3529ef~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lmf5peg6aOO6Zuo5Lmf6Zu-5pm0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763789391&amp;x-signature=b9w2P5lUov1SZRjP6KDepf0XAkg%3D" alt="image.png" loading="lazy"/></p>
<p>ç”¨æˆ·åˆ·æ–°é¡µé¢å°±åˆå¥½äº†ã€‚ä½†é—®é¢˜æ˜¯â€”â€”ç”¨æˆ·ä¸è¯¥çœ‹åˆ°è¿™ä¸ªé”™è¯¯é¡µé¢ã€‚</p>
<p>å‡ ä¸ªç–‘é—®ç«‹åˆ»å†’å‡ºæ¥ï¼š</p>
<ul>
<li>ä¸ºå•¥å¥½ç«¯ç«¯çš„ JS æ–‡ä»¶ä¼š 404ï¼Ÿ</li>
<li>ä¸ºå•¥ç”¨æˆ·åˆ·æ–°å°±å¥½äº†ï¼Ÿ</li>
<li>è¿™é—®é¢˜æ˜¯å¶å‘è¿˜æ˜¯å¿…ç°ï¼Ÿ</li>
<li>æ€ä¹ˆè®©ç”¨æˆ·æ— æ„ŸçŸ¥åœ°è§£å†³è¿™ä¸ªé—®é¢˜ï¼Ÿ</li>
</ul>
<h3 data-id="heading-2">é—®é¢˜å¤ç›˜ï¼šä¸ºä»€ä¹ˆä¼š 404ï¼Ÿ</h3>
<p>æ‹äº†ä¸‹æ—¶é—´çº¿ï¼Œé—®é¢˜åŸå› å°±æ¸…æ™°äº†ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant U as ç”¨æˆ·æµè§ˆå™¨
    participant S as æœåŠ¡å™¨
    participant CI as CI/CD

    U-&gt;&gt;S: 10:00 æ‰“å¼€é¡µé¢
    S-&gt;&gt;U: è¿”å› index.html (å¼•ç”¨ chat.abc123.js)
    Note over U: ç”¨æˆ·ä¿æŒé¡µé¢æ‰“å¼€
    
    CI-&gt;&gt;S: 14:30 éƒ¨ç½²æ–°ç‰ˆæœ¬
    Note over S: chat.abc123.js â†’ chat.def456.js
    
    U-&gt;&gt;S: 15:00 ç‚¹å‡»èŠå¤©æŒ‰é’®
    U-&gt;&gt;S: è¯·æ±‚ chat.abc123.js
    S-&gt;&gt;U: 404 Not Found âŒ
    Note over U: é¡µé¢å´©æºƒ
</code></pre>
<p>è¯´ç™½äº†å°±æ˜¯ï¼š<strong>ç”¨æˆ·æµè§ˆå™¨é‡Œçš„ index.html æ˜¯æ—§çš„ï¼Œä½†æœåŠ¡å™¨ä¸Šçš„ JS æ–‡ä»¶å·²ç»æ˜¯æ–°çš„äº†</strong>ã€‚</p>
<p>è¿™é—®é¢˜åªåœ¨ä¸‰ä¸ªæ¡ä»¶åŒæ—¶æ»¡è¶³æ—¶æ‰ä¼šå‡ºç°ï¼š</p>
<ol>
<li>ç”¨æˆ·é•¿æ—¶é—´ä¸åˆ·æ–°é¡µé¢ï¼ˆä¿æŒæ—§ç‰ˆ HTMLï¼‰</li>
<li>åç«¯éƒ¨ç½²äº†æ–°ç‰ˆæœ¬ï¼ˆæ—§ chunk è¢«æ›¿æ¢ï¼‰</li>
<li>ç”¨æˆ·è§¦å‘æ‡’åŠ è½½ï¼ˆåŠ¨æ€ import æ–°æ¨¡å—ï¼‰</li>
</ol>
<p>å¦‚æœé¡¹ç›®æ²¡ç”¨ä»£ç åˆ†å‰²ï¼Œæ‰€æœ‰ JS éƒ½åœ¨é¦–æ¬¡åŠ è½½ï¼Œåè€Œä¸ä¼šæœ‰è¿™é—®é¢˜ã€‚ä½†ä¸ºäº†æ€§èƒ½åšäº†æ‡’åŠ è½½ï¼Œç»“æœè¸©äº†è¿™ä¸ªå‘ã€‚</p>
<h3 data-id="heading-3">è§£å†³æ€è·¯ï¼šè‡ªåŠ¨åˆ·æ–° + å…œåº•æç¤º</h3>
<p>æƒ³äº†å‡ ç§æ–¹æ¡ˆï¼š</p>

























<table><thead><tr><th>æ–¹æ¡ˆ</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th></tr></thead><tbody><tr><td><strong>ä¿ç•™æ—§ç‰ˆæœ¬æ–‡ä»¶</strong></td><td>å½»åº•é¿å… 404</td><td>éœ€è¦æ”¹é€ éƒ¨ç½²æµç¨‹ï¼Œæ¸…ç†ç­–ç•¥å¤æ‚</td></tr><tr><td><strong>ç‰ˆæœ¬æ£€æµ‹è½®è¯¢</strong></td><td>å¯ä»¥ä¸»åŠ¨é€šçŸ¥ç”¨æˆ·</td><td>å¢åŠ æœåŠ¡å™¨å‹åŠ›ï¼Œä½“éªŒä¸€èˆ¬</td></tr><tr><td><strong>æ•è·é”™è¯¯è‡ªåŠ¨åˆ·æ–°</strong></td><td>å®ç°ç®€å•ï¼Œç”¨æˆ·æ— æ„ŸçŸ¥</td><td>éœ€è¦é˜²æ­¢æ— é™åˆ·æ–°</td></tr></tbody></table>
<p>æœ€åé€‰äº†ç¬¬ä¸‰ç§â€”â€”ç®€å•æœ‰æ•ˆï¼Œæ”¹åŠ¨æœ€å°ã€‚</p>
<p>æ ¸å¿ƒé€»è¾‘å¾ˆç®€å•ï¼š</p>
<ol>
<li>æ£€æµ‹åˆ°æ¨¡å—åŠ è½½å¤±è´¥ â†’ è‡ªåŠ¨åˆ·æ–°é¡µé¢</li>
<li>åˆ·æ–°åè¿˜å¤±è´¥ â†’ æ˜¾ç¤ºå‹å¥½é”™è¯¯æç¤º</li>
<li>ç”¨ sessionStorage é˜²æ­¢æ— é™åˆ·æ–°</li>
</ol>
<h3 data-id="heading-4">å…·ä½“å®ç°</h3>
<h4 data-id="heading-5">1. åˆ›å»ºé”™è¯¯å¤„ç†å·¥å…·å‡½æ•°</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// src/utils/moduleLoadErrorHandler.ts</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">RELOAD_FLAG_KEY</span> = <span class="hljs-string">'module_error_reloaded'</span>;

<span class="hljs-comment">// æ£€æµ‹æ˜¯ä¸æ˜¯æ¨¡å—åŠ è½½é”™è¯¯</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">isModuleLoadError</span>(<span class="hljs-params">error: <span class="hljs-built_in">Error</span> | <span class="hljs-built_in">string</span></span>): <span class="hljs-built_in">boolean</span> {
  <span class="hljs-keyword">const</span> message = <span class="hljs-keyword">typeof</span> error === <span class="hljs-string">'string'</span> ? error : error.<span class="hljs-property">message</span> || <span class="hljs-string">''</span>;
  
  <span class="hljs-keyword">return</span> (
    <span class="hljs-comment">// å„ç§æ¨¡å—åŠ è½½é”™è¯¯çš„ç‰¹å¾</span>
    message.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'Failed to fetch dynamically imported module'</span>) ||
    message.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'Loading chunk'</span>) ||
    message.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'ChunkLoadError'</span>)
  );
}

<span class="hljs-comment">// å°è¯•è‡ªåŠ¨åˆ·æ–°ï¼ˆåªåˆ·ä¸€æ¬¡ï¼‰</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">attemptModuleErrorReload</span>(<span class="hljs-params"/>): <span class="hljs-built_in">boolean</span> {
  <span class="hljs-comment">// å·²ç»åˆ·è¿‡äº†ï¼Ÿé‚£å°±åˆ«å†åˆ·äº†</span>
  <span class="hljs-keyword">if</span> (sessionStorage.<span class="hljs-title function_">getItem</span>(<span class="hljs-variable constant_">RELOAD_FLAG_KEY</span>)) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'âŒ æ¨¡å—åŠ è½½æŒç»­å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¼ºåˆ· (Ctrl+F5)'</span>);
    sessionStorage.<span class="hljs-title function_">removeItem</span>(<span class="hljs-variable constant_">RELOAD_FLAG_KEY</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  }

  <span class="hljs-comment">// æ ‡è®°ä¸€ä¸‹ï¼Œé˜²æ­¢æ— é™åˆ·æ–°</span>
  sessionStorage.<span class="hljs-title function_">setItem</span>(<span class="hljs-variable constant_">RELOAD_FLAG_KEY</span>, <span class="hljs-string">'1'</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">'âš ï¸ æ£€æµ‹åˆ°æ¨¡å—åŠ è½½å¤±è´¥ï¼Œè‡ªåŠ¨åˆ·æ–°é¡µé¢...'</span>);
  
  <span class="hljs-comment">// ç¨å¾®å»¶è¿Ÿä¸€ä¸‹ï¼Œé¿å…é¡µé¢é—ªçƒ</span>
  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-title function_">reload</span>(), <span class="hljs-number">100</span>);
  <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
}

<span class="hljs-comment">// å…¨å±€ç›‘å¬ï¼ˆå…œåº•æœºåˆ¶ï¼‰</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">setupModuleLoadErrorHandler</span>(<span class="hljs-params"/>): <span class="hljs-built_in">void</span> {
  <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'error'</span>, <span class="hljs-function">(<span class="hljs-params">event: ErrorEvent</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (<span class="hljs-title function_">isModuleLoadError</span>(event.<span class="hljs-property">message</span> || <span class="hljs-string">''</span>)) {
      <span class="hljs-title function_">attemptModuleErrorReload</span>();
    }
  });

  <span class="hljs-comment">// é¡µé¢æ­£å¸¸åŠ è½½å®Œï¼Œæ¸…é™¤æ ‡è®°</span>
  <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'load'</span>, <span class="hljs-function">() =&gt;</span> {
    sessionStorage.<span class="hljs-title function_">removeItem</span>(<span class="hljs-variable constant_">RELOAD_FLAG_KEY</span>);
  });
}
</code></pre>
<p>å…³é”®ç‚¹ï¼š</p>
<ul>
<li><code>sessionStorage</code> å­˜æ´»æœŸåˆšå¥½æ˜¯ä¸€ä¸ªä¼šè¯ï¼Œå…³é—­æ ‡ç­¾é¡µå°±æ¸…é™¤</li>
<li>å»¶è¿Ÿ 100ms åˆ·æ–°ï¼Œé¿å…ç”¨æˆ·çœ‹åˆ°é—ªçƒ</li>
<li>åˆ·æ–°å¤±è´¥åç»™å‡ºæ˜ç¡®çš„æ‰‹åŠ¨æ“ä½œæç¤º</li>
</ul>
<h4 data-id="heading-6">2. åœ¨ ErrorBoundary ä¸­å¤„ç†</h4>
<p>React é¡¹ç›®ä¸€èˆ¬éƒ½æœ‰ ErrorBoundaryï¼Œæ­£å¥½åœ¨è¿™é‡Œç»Ÿä¸€å¤„ç†ï¼š</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">// src/components/ErrorBoundary/index.tsx</span>

<span class="hljs-title function_">componentDidCatch</span>(<span class="hljs-params">error: <span class="hljs-built_in">Error</span>, errorInfo: ErrorInfo</span>) {
  <span class="hljs-comment">// æ¨¡å—åŠ è½½é”™è¯¯ï¼Ÿè‡ªåŠ¨åˆ·æ–°è¯•è¯•</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-title function_">isModuleLoadError</span>(error)) {
    <span class="hljs-title function_">attemptModuleErrorReload</span>();
    <span class="hljs-keyword">return</span>; <span class="hljs-comment">// é¡µé¢é©¬ä¸Šåˆ·æ–°ï¼Œä¸æ˜¾ç¤ºé”™è¯¯ç•Œé¢</span>
  }

  <span class="hljs-comment">// å…¶ä»–é”™è¯¯æ­£å¸¸æ˜¾ç¤º</span>
  <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>({ error, errorInfo });
}
</code></pre>
<h4 data-id="heading-7">3. åº”ç”¨å…¥å£åˆå§‹åŒ–</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// src/main.tsx</span>
<span class="hljs-keyword">import</span> { setupModuleLoadErrorHandler } <span class="hljs-keyword">from</span> <span class="hljs-string">'./utils/moduleLoadErrorHandler'</span>;

<span class="hljs-comment">// å°½æ—©åˆå§‹åŒ–ï¼Œæ•è·æ‰€æœ‰é”™è¯¯</span>
<span class="hljs-title function_">setupModuleLoadErrorHandler</span>();
</code></pre>
<h3 data-id="heading-8">æµ‹è¯•éªŒè¯ï¼šæ¨¡æ‹ŸçœŸå®åœºæ™¯</h3>
<h4 data-id="heading-9">æ–¹æ³•ä¸€ï¼šChrome DevTools æ‹¦æˆªè¯·æ±‚ï¼ˆæœ€ç®€å•ï¼‰</h4>
<p>è¿™ä¸ªæ–¹æ³•ä¸ç”¨æ”¹ä»£ç ï¼Œç›´æ¥åœ¨æµè§ˆå™¨é‡Œæ¨¡æ‹Ÿï¼š</p>
<ol>
<li>æ‰“å¼€ DevToolsï¼Œåˆ‡åˆ° Network æ ‡ç­¾</li>
<li>å³ä¸Šè§’ä¸‰ä¸ªç‚¹ â†’ More tools â†’ Request blocking</li>
<li>æ·»åŠ æ‹¦æˆªè§„åˆ™ï¼š<code>*page/chat*</code> æˆ– <code>*chunk*</code></li>
<li>åˆ‡æ¢è·¯ç”±è§¦å‘æ‡’åŠ è½½</li>
</ol>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[æ·»åŠ æ‹¦æˆªè§„åˆ™] --&gt; B[è§¦å‘æ‡’åŠ è½½]
    B --&gt; C{é¦–æ¬¡å¤±è´¥?}
    C --&gt;|æ˜¯| D[è‡ªåŠ¨åˆ·æ–°é¡µé¢]
    C --&gt;|å¦| E[æ˜¾ç¤ºé”™è¯¯æç¤º]
    D --&gt; F[åˆ·æ–°åé‡è¯•]
    F --&gt; E
</code></pre>
<p>çœ‹åˆ°é¡µé¢è‡ªåŠ¨åˆ·æ–°å°±è¯´æ˜æˆåŠŸäº†ã€‚ä¿æŒæ‹¦æˆªè§„åˆ™ï¼Œå†è§¦å‘ä¸€æ¬¡ï¼Œåº”è¯¥ç›´æ¥æ˜¾ç¤ºé”™è¯¯ç•Œé¢ï¼ˆä¸ä¼šæ— é™åˆ·æ–°ï¼‰ã€‚</p>
<h4 data-id="heading-10">æ–¹æ³•äºŒï¼šæ¨¡æ‹ŸçœŸå®éƒ¨ç½²</h4>
<p>æ›´æ¥è¿‘ç”Ÿäº§ç¯å¢ƒçš„æµ‹è¯•ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1. æ„å»ºé¡¹ç›®</span>
pnpm build

<span class="hljs-comment"># 2. å¯åŠ¨é¢„è§ˆæœåŠ¡</span>
pnpm preview

<span class="hljs-comment"># 3. æ‰“å¼€é¡µé¢ï¼Œä¸è¦åˆ·æ–°</span>

<span class="hljs-comment"># 4. åˆ é™¤æŸä¸ª chunk æ–‡ä»¶ï¼ˆæ¨¡æ‹Ÿæ–°ç‰ˆæœ¬éƒ¨ç½²ï¼‰</span>
<span class="hljs-built_in">rm</span> dist/assets/chat-*.js

<span class="hljs-comment"># 5. åœ¨é¡µé¢ä¸­ç‚¹å‡»èŠå¤©æŒ‰é’®</span>
</code></pre>
<p>åº”è¯¥çœ‹åˆ°é¡µé¢è‡ªåŠ¨åˆ·æ–°ï¼Œç„¶åæ­£å¸¸åŠ è½½ï¼ˆå¦‚æœæ–‡ä»¶è¿˜åœ¨çš„è¯ï¼‰ã€‚</p>
<h3 data-id="heading-11">ä¸Šçº¿åçš„æ•ˆæœ</h3>
<p>éƒ¨ç½²è¿™ä¸ªæ–¹æ¡ˆä¸€å‘¨äº†ï¼Œæ•ˆæœæŒºå¥½ï¼š</p>
<ul>
<li>ç”¨æˆ·åé¦ˆçš„"é¡µé¢å´©æºƒ"é—®é¢˜æ¶ˆå¤±äº†</li>
<li>ç›‘æ§æ˜¾ç¤ºæ¨¡å—åŠ è½½é”™è¯¯å‡å°‘äº† 95%</li>
<li>å‰©ä¸‹ 5% æ˜¯çœŸçš„ç½‘ç»œé—®é¢˜ï¼Œæœ‰é”™è¯¯æç¤ºå…œåº•</li>
</ul>
<p>å”¯ä¸€çš„å°é—®é¢˜ï¼šç”¨æˆ·æ­£åœ¨å¡«è¡¨å•æ—¶å¦‚æœè§¦å‘äº†è‡ªåŠ¨åˆ·æ–°ï¼Œæ•°æ®ä¼šä¸¢å¤±ã€‚ä¸è¿‡è¿™ç§æƒ…å†µå¾ˆå°‘ï¼Œåç»­å¯ä»¥è€ƒè™‘åŠ ä¸ªè¡¨å•æ•°æ®ç¼“å­˜ã€‚</p>
<h3 data-id="heading-12">Nginx é…ç½®ï¼šä»æ ¹æºé¢„é˜²é—®é¢˜</h3>
<p>å‰ç«¯çš„è‡ªåŠ¨åˆ·æ–°æ˜¯å…œåº•ï¼Œæ›´é‡è¦çš„æ˜¯ Nginx é…ç½®è¦æ­£ç¡®ã€‚</p>
<h4 data-id="heading-13">å½“å‰çš„ nginx.conf é…ç½®</h4>
<pre><code class="hljs language-nginx" lang="nginx">server {
    listen       80;
    server_name  _;

    root   /usr/share/nginx/html;
    index  index.html;

    # é™æ€èµ„æºï¼šæ‰¾ä¸åˆ°ç›´æ¥è¿”å› 404ï¼Œä¸è¿”å› index.html
    location /assets/ {
        try_files $uri =404;
        expires 1y;
        add_header Cache-Control "public, immutable";
    }

    # SPA è·¯ç”±ï¼šHTML å®Œå…¨ä¸ç¼“å­˜
    location / {
        try_files $uri $uri/ /index.html;
        add_header Cache-Control "no-cache, no-store, must-revalidate";
    }

    # gzip å‹ç¼©
    gzip on;
    gzip_types text/plain text/css application/javascript application/json application/xml image/svg+xml;
    gzip_min_length 1024;
}
</code></pre>
<h4 data-id="heading-14">é…ç½®è¯´æ˜</h4>
<p><strong>1. <code>/assets/</code> è·¯å¾„çš„å…³é”®é…ç½®</strong></p>
<pre><code class="hljs language-nginx" lang="nginx">try_files $uri =404;
</code></pre>
<ul>
<li><strong>ä½œç”¨</strong>ï¼šchunk æ–‡ä»¶æ‰¾ä¸åˆ°æ—¶ï¼Œç›´æ¥è¿”å› 404ï¼Œè€Œä¸æ˜¯è¿”å› index.html</li>
<li><strong>ä¸ºä»€ä¹ˆé‡è¦</strong>ï¼šå¦‚æœè¿”å› HTMLï¼Œæµè§ˆå™¨ä¼šå°è¯•æŠŠ HTML å½“ä½œ JavaScript æ‰§è¡Œï¼Œå¯¼è‡´ MIME type é”™è¯¯</li>
<li><strong>æ•ˆæœ</strong>ï¼šå‰ç«¯èƒ½æ­£ç¡®æ•è·åˆ° 404 é”™è¯¯ï¼Œè§¦å‘è‡ªåŠ¨åˆ·æ–°</li>
</ul>
<p><strong>2. index.html ä¸ç¼“å­˜</strong></p>
<pre><code class="hljs language-nginx" lang="nginx">add_header Cache-Control "no-cache, no-store, must-revalidate";
</code></pre>
<ul>
<li><strong>ä½œç”¨</strong>ï¼šç¡®ä¿ç”¨æˆ·æ¯æ¬¡è®¿é—®/åˆ·æ–°éƒ½è·å–æœ€æ–°çš„ index.html</li>
<li><strong>ä¸ºä»€ä¹ˆé‡è¦</strong>ï¼šæ–°ç‰ˆæœ¬ HTML ä¼šå¼•ç”¨æ–°çš„ chunk æ–‡ä»¶å</li>
<li><strong>å±€é™æ€§</strong>ï¼šåªå¯¹"åˆ·æ–°é¡µé¢"æœ‰æ•ˆï¼Œå¯¹"å·²æ‰“å¼€çš„é¡µé¢"æ— æ•ˆï¼ˆè¿™å°±æ˜¯ä¸ºä»€ä¹ˆéœ€è¦å‰ç«¯è‡ªåŠ¨åˆ·æ–°ï¼‰</li>
</ul>
<p><strong>3. é™æ€èµ„æºé•¿æœŸç¼“å­˜</strong></p>
<pre><code class="hljs language-nginx" lang="nginx">expires 1y;
add_header Cache-Control "public, immutable";
</code></pre>
<ul>
<li><strong>ä½œç”¨</strong>ï¼šå¸¦ hash çš„æ–‡ä»¶åå¯ä»¥æ°¸ä¹…ç¼“å­˜</li>
<li><strong>å¥½å¤„</strong>ï¼šå‡å°‘å¸¦å®½æ¶ˆè€—ï¼Œæå‡åŠ è½½é€Ÿåº¦</li>
<li><strong>å®‰å…¨æ€§</strong>ï¼šæ–‡ä»¶åå˜äº†å°±æ˜¯æ–°æ–‡ä»¶ï¼Œä¸ä¼šæœ‰ç¼“å­˜é—®é¢˜</li>
</ul>
<h4 data-id="heading-15">ä¸ºä»€ä¹ˆè¿™æ ·é…ç½®ï¼Ÿ</h4>
<p>è¿™ä¸ªé…ç½®å®ç°äº†<strong>åŒå±‚é˜²æŠ¤</strong>ï¼š</p>
<pre><code class="hljs language-erlang" lang="erlang">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Nginx å±‚ï¼ˆé¢„é˜² <span class="hljs-number">60</span>-<span class="hljs-number">70</span><span class="hljs-comment">%ï¼‰         â”‚</span>
â”‚  - HTML ä¸ç¼“å­˜                   â”‚
â”‚  - <span class="hljs-number">404</span> æ­£ç¡®è¿”å›                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å‰ç«¯å±‚ï¼ˆå…œåº• <span class="hljs-number">30</span>-<span class="hljs-number">40</span><span class="hljs-comment">%ï¼‰           â”‚</span>
â”‚  - ErrorBoundary è‡ªåŠ¨åˆ·æ–°        â”‚
â”‚  - window.error ç›‘å¬             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<p><strong>Nginx èƒ½è§£å†³çš„åœºæ™¯</strong>ï¼š</p>
<ul>
<li>âœ… ç”¨æˆ·åˆ·æ–°é¡µé¢ â†’ è·å–æœ€æ–° HTML</li>
<li>âœ… æ–°ç”¨æˆ·è®¿é—® â†’ è·å–æœ€æ–°ç‰ˆæœ¬</li>
<li>âœ… æ­£ç¡®çš„ 404 å“åº” â†’ å‰ç«¯èƒ½æ•è·é”™è¯¯</li>
</ul>
<p><strong>Nginx ä¸èƒ½è§£å†³çš„åœºæ™¯</strong>ï¼š</p>
<ul>
<li>âŒ ç”¨æˆ·é•¿æ—¶é—´ä¸åˆ·æ–° + è§¦å‘æ‡’åŠ è½½</li>
<li>âŒ å¤šæ ‡ç­¾é¡µæ—§ç‰ˆæœ¬é—®é¢˜</li>
</ul>
<p>è¿™äº›åœºæ™¯å°±éœ€è¦å‰ç«¯çš„è‡ªåŠ¨åˆ·æ–°æ¥å…œåº•ã€‚</p>
<h3 data-id="heading-16">æœ¬æ¬¡ä»£ç ä¿®æ”¹è¯´æ˜</h3>
<p>è¿™æ¬¡ä¿®å¤ä¸»è¦è§£å†³äº†ä¸€ä¸ªå…³é”®é—®é¢˜ï¼š<strong>çº¿ä¸Šç¯å¢ƒæ¨¡å—åŠ è½½é”™è¯¯æ²¡æœ‰è§¦å‘è‡ªåŠ¨åˆ·æ–°</strong>ã€‚</p>
<h4 data-id="heading-17">é—®é¢˜åŸå› </h4>
<p>ä¹‹å‰åªåœ¨å…¨å±€ç›‘å¬äº† <code>window.error</code> äº‹ä»¶ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'error'</span>, <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
  <span class="hljs-comment">// å¤„ç†æ¨¡å—åŠ è½½é”™è¯¯</span>
});
</code></pre>
<p>ä½† React çš„ <code>ErrorBoundary</code> ä¼šå…ˆæ•è·é”™è¯¯ï¼Œå¯¼è‡´é”™è¯¯æ— æ³•å†’æ³¡åˆ° <code>window.error</code>ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">React<span class="hljs-selector-class">.lazy</span>() åŠ è½½å¤±è´¥
    â†“
ErrorBoundary<span class="hljs-selector-class">.componentDidCatch</span>() æ•è· â† åœ¨è¿™é‡Œè¢«æ‹¦æˆªï¼
    â†“
æ˜¾ç¤ºé”™è¯¯ç•Œé¢ï¼Œç­‰å¾…ç”¨æˆ·ç‚¹å‡»
    â†“
âŒ window<span class="hljs-selector-class">.error</span> æ°¸è¿œä¸ä¼šè§¦å‘
    â†“
âŒ è‡ªåŠ¨åˆ·æ–°é€»è¾‘ä»æœªæ‰§è¡Œ
</code></pre>
<h4 data-id="heading-18">è§£å†³æ–¹æ¡ˆ</h4>
<p><strong>1. é‡æ„ä¸ºå¯å¤ç”¨çš„å·¥å…·å‡½æ•°</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// å¯¼å‡ºæ£€æµ‹å‡½æ•°</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">isModuleLoadError</span>(<span class="hljs-params">error: <span class="hljs-built_in">Error</span> | <span class="hljs-built_in">string</span></span>): <span class="hljs-built_in">boolean</span>

<span class="hljs-comment">// å¯¼å‡ºåˆ·æ–°å‡½æ•°</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">attemptModuleErrorReload</span>(<span class="hljs-params"/>): <span class="hljs-built_in">boolean</span>

<span class="hljs-comment">// ä¿ç•™å…¨å±€ç›‘å¬ï¼ˆå…œåº•ï¼‰</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">setupModuleLoadErrorHandler</span>(<span class="hljs-params"/>): <span class="hljs-built_in">void</span>
</code></pre>
<p><strong>2. åœ¨ ErrorBoundary ä¸­é›†æˆ</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-title function_">componentDidCatch</span>(<span class="hljs-params">error: <span class="hljs-built_in">Error</span>, errorInfo: ErrorInfo</span>) {
  <span class="hljs-comment">// æ£€æµ‹å¹¶å¤„ç†æ¨¡å—åŠ è½½é”™è¯¯ - è‡ªåŠ¨åˆ·æ–°</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-title function_">isModuleLoadError</span>(error)) {
    <span class="hljs-title function_">attemptModuleErrorReload</span>();
    <span class="hljs-keyword">return</span>; <span class="hljs-comment">// ä¸æ˜¾ç¤ºé”™è¯¯UIï¼Œé¡µé¢å³å°†åˆ·æ–°</span>
  }

  <span class="hljs-comment">// å…¶ä»–é”™è¯¯æ­£å¸¸å¤„ç†</span>
  <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>({ error, errorInfo });
}
</code></pre>
<h4 data-id="heading-19">ä¿®æ”¹æ•ˆæœ</h4>
<p>ç°åœ¨æœ‰äº†<strong>åŒå±‚é˜²æŠ¤</strong>ï¼š</p>
<ol>
<li><strong>ErrorBoundaryï¼ˆç¬¬ä¸€é“é˜²çº¿ï¼‰</strong> - æ•è· React ç»„ä»¶é”™è¯¯ï¼Œå¿«é€Ÿå“åº”</li>
<li><strong>window.errorï¼ˆå…œåº•ï¼‰</strong> - æ•è·å…¶ä»–æœªå¤„ç†çš„é”™è¯¯</li>
</ol>
<p>æ— è®ºé”™è¯¯ä»å“ªé‡Œæ¥ï¼Œéƒ½èƒ½è¢«æ­£ç¡®å¤„ç†å¹¶è‡ªåŠ¨åˆ·æ–°ã€‚</p>
<hr/>
<h4 data-id="heading-20">å‚è€ƒèµ„æº</h4>
<ol>
<li><strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fvitejs.dev%2Fguide%2Fbuild.html" target="_blank" title="https://vitejs.dev/guide/build.html" ref="nofollow noopener noreferrer">Vite æ–‡æ¡£ - æ„å»ºç”Ÿäº§ç‰ˆæœ¬</a></strong> - å…³äº chunk åˆ†å‰²çš„é…ç½®</li>
<li><strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FJavaScript%2FReference%2FOperators%2Fimport" target="_blank" title="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/import" ref="nofollow noopener noreferrer">MDN - Dynamic import()</a></strong> - åŠ¨æ€å¯¼å…¥çš„åŸç†</li>
<li><strong><a href="https://link.juejin.cn?target=https%3A%2F%2Freact.dev%2Freference%2Freact%2FComponent%23catching-rendering-errors-with-an-error-boundary" target="_blank" title="https://react.dev/reference/react/Component#catching-rendering-errors-with-an-error-boundary" ref="nofollow noopener noreferrer">React Error Boundaries</a></strong> - é”™è¯¯è¾¹ç•Œçš„ä½¿ç”¨</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ğŸµ Go Queryx å…¥é—¨æŒ‡å—ï¼šè®©æ•°æ®åº“æ“ä½œåƒå–å¥¶èŒ¶ä¸€æ ·ä¸æ»‘ï¼]]></title>    <link>https://juejin.cn/post/7572466174224482330</link>    <guid>https://juejin.cn/post/7572466174224482330</guid>    <pubDate>2025-11-15T04:08:48.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572466174224482330" data-draft-id="7569825640852799523" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ğŸµ Go Queryx å…¥é—¨æŒ‡å—ï¼šè®©æ•°æ®åº“æ“ä½œåƒå–å¥¶èŒ¶ä¸€æ ·ä¸æ»‘ï¼"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-15T04:08:48.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="golangå­¦ä¹ è®°"/> <meta itemprop="url" content="https://juejin.cn/user/4371313964100990"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ğŸµ Go Queryx å…¥é—¨æŒ‡å—ï¼šè®©æ•°æ®åº“æ“ä½œåƒå–å¥¶èŒ¶ä¸€æ ·ä¸æ»‘ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4371313964100990/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    golangå­¦ä¹ è®°
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-15T04:08:48.000Z" title="Sat Nov 15 2025 04:08:48 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ğŸ¬ å‰è¨€ï¼šä¸ºä»€ä¹ˆæ˜¯ Queryxï¼Ÿâ€”â€” å› ä¸º bug ç­‰ä¸åŠä½ ã€Œè¿è¡Œæ—¶æ‰å‘ç°ã€</h2>
<p>æƒ³è±¡ä¸€ä¸‹è¿™äº›ç»å…¸åœºæ™¯ï¼š</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// ğŸš¨ GORM çš„â€œæƒŠå–œç›²ç›’â€</span>
db.Where(<span class="hljs-string">"nmae = ?"</span>, <span class="hljs-string">"john"</span>).Find(&amp;users) <span class="hljs-comment">// æ‹¼å†™é”™è¯¯ï¼Ÿç¼–è¯‘å™¨ï¼šæ²¡é—®é¢˜ ğŸ‘Œ  </span>
<span class="hljs-comment">// â†’ è¿è¡Œæ—¶ï¼šæŸ¥ä¸åˆ°æ•°æ®ï¼ŸğŸ¤” è°ƒè¯• 2 å°æ—¶ï¼šå“¦ï¼Œ`nmae` å°‘äº†ä¸ª `e` â€¦â€¦</span>

<span class="hljs-comment">// ğŸ§¨ åŸç”Ÿ SQL çš„â€œç±»å‹å½©ç¥¨â€</span>
rows, _ := db.Query(<span class="hljs-string">"SELECT * FROM users WHERE age &gt; ?"</span>, <span class="hljs-string">"18"</span>) 
<span class="hljs-comment">// å­—ç¬¦ä¸²ä¼ æ•°å­—ï¼ŸMySQLï¼šæˆ‘å…ˆ convert ä¸€ä¸‹ï½ï¼ˆå¯èƒ½æŠ¥é”™ï¼Œä¹Ÿå¯èƒ½é™é»˜æˆªæ–­ï¼ï¼‰</span>
</code></pre>
<blockquote>
<p>ğŸ’¡ <strong>Queryx çš„æ‰¿è¯º</strong>ï¼š<br/>
<em>â€œä½ å†™çš„æ¯ä¸€ä¸ªå­—æ®µã€æ¯ä¸€æ¡æ¡ä»¶ï¼Œéƒ½ç»è¿‡ Go ç¼–è¯‘å™¨çš„â€˜å®‰æ£€é—¨â€™â€”â€”<br/>
é”™åˆ«å­—ï¼Ÿç±»å‹é”™ï¼Ÿå…³è”æ¼ï¼Ÿâ€”â€” ç¼–è¯‘å°±æŠ¥é”™ï¼Œç»ä¸æ‹–åˆ°ç”Ÿäº§ç¯å¢ƒï¼â€</em></p>
</blockquote>
<hr/>
<h2 data-id="heading-1">ğŸ§ ç¬¬ä¸€ç« ï¼šå®‰è£… Queryx â€”â€” æ¯”æ³¡é¢è¿˜å¿«ï¼Œæ¯”ç‚¹å¤–å–è¿˜çœå¿ƒ</h2>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ–¹æ³•ä¸€ï¼šä¸€é”®å®‰è£…ï¼ˆå®˜æ–¹æ¨èè„šæœ¬ï¼‰</span>
curl -sf https://raw.githubusercontent.com/swiftcarrot/queryx/main/install.sh | sh

<span class="hljs-comment"># æ–¹æ³•äºŒï¼šGo installï¼ˆé€‚åˆ CI/CDï¼‰</span>
go install github.com/swiftcarrot/queryx/cmd/queryx@latest
</code></pre>
<p>âœ… å®‰è£…åç»ˆç«¯å¤šä¸€ä¸ª <code>queryx</code> å‘½ä»¤â€”â€”ä½ çš„ <strong>æ•°æ®åº“è‡ªåŠ¨åŒ–ç®¡å®¶</strong> æ­£å¼ä¸Šå²—ï¼ğŸ©<br/>
ï¼ˆå®ƒä¼šå¸®ä½ ç”Ÿæˆä»£ç ã€åšè¿ç§»ã€æ£€æŸ¥ schemaï¼Œå°±æ˜¯ä¸å¸®ä½ å†™ä¸šåŠ¡é€»è¾‘ ğŸ˜ï¼‰</p>
<hr/>
<h2 data-id="heading-2">ğŸ“ ç¬¬äºŒç« ï¼šå®šä¹‰æ•°æ®æ¨¡å‹ â€”â€” åƒå†™æƒ…ä¹¦ä¸€æ ·ä¼˜é›…</h2>
<p>åˆ›å»º <code>schema.hcl</code> æ–‡ä»¶ï¼ˆQueryx çš„â€œé­”æ³•é…æ–¹ä¹¦â€ï¼‰ï¼š</p>
<pre><code class="hljs language-hcl" lang="hcl"># schema.hcl
database "db" {
  adapter = "postgresql"  # ä¹Ÿæ”¯æŒ mysql/sqlite

  config "development" {
    url = "postgres://postgres:postgres@localhost:5432/blog_dev?sslmode=disable"
  }

  config "production" {
    url = env("DATABASE_URL")  # ğŸ›¡ï¸ æ•æ„Ÿä¿¡æ¯èµ°ç¯å¢ƒå˜é‡ï¼
  }

  # ğŸ‘‰ å…³é”®ä¸€æ­¥ï¼šæŒ‡å®šç”Ÿæˆ Go å®¢æˆ·ç«¯
  generator "client-golang" {}
}

# å®šä¹‰ User æ¨¡å‹ â€”â€” åƒæè¿°ä½ çš„ç†æƒ³å‹
model "User" {
  column "name" {
    type = string
    null = false  # ä¸èƒ½ä¸ºç©ºï¼Œå°±åƒçˆ±æƒ…ä¸èƒ½å°†å°± ğŸ’–
  }

  column "email" {
    type = string
    unique = true  # é‚®ç®±å”¯ä¸€ï¼Œåƒèº«ä»½è¯å·
  }

  column "age" {
    type = integer
    null = true  # å¹´é¾„ï¼Ÿå¯ä»¥æ˜¯ç§˜å¯†ï½
  }

  column "created_at" {
    type = datetime
    default = "now()"  # è‡ªåŠ¨å¡«å……ï¼ŒçœŸè´´å¿ƒï¼
  }
}

# Post æ¨¡å‹ï¼šå› ä¸ºç”¨æˆ·æ€»è¦å‘å¸–å­
model "Post" {
  belongs_to "user" {}  # è‡ªåŠ¨åŠ  user_id å¤–é”®ï¼

  column "title"    { type = string }
  column "content"  { type = text }
}
</code></pre>
<blockquote>
<p>âœ… <strong>HCLï¼ˆHashiCorp Configuration Languageï¼‰</strong> çš„ä¼˜åŠ¿ï¼š</p>
<ul>
<li>æ¯” YAML ä¸æ˜“ç¼©è¿›å‡ºé”™</li>
<li>æ¯” JSON æ”¯æŒæ³¨é‡Š + è¡¨è¾¾å¼</li>
<li>æ¯” Go Struct æ›´ä¸“æ³¨ <strong>æ•°æ®å»ºæ¨¡</strong>ï¼Œè€Œéå®ç°ç»†èŠ‚</li>
</ul>
</blockquote>
<hr/>
<h2 data-id="heading-3">ğŸª„ ç¬¬ä¸‰ç« ï¼šæ•°æ®åº“è¿ç§» â€”â€” åƒå˜é­”æœ¯ä¸€æ ·ä¸æ»‘</h2>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1. åˆ›å»ºæ•°æ®åº“ï¼ˆå¦‚æœä¸å­˜åœ¨ï¼‰</span>
queryx db:create

<span class="hljs-comment"># 2. ç”Ÿæˆè¿ç§»æ–‡ä»¶ï¼ˆåŸºäº schema.hclï¼‰</span>
queryx db:migrate

<span class="hljs-comment"># 3. åº”ç”¨è¿ç§»ï¼ˆå»ºè¡¨ + çº¦æŸ + ç´¢å¼•ï¼‰</span>
queryx db:migrate:up
</code></pre>
<p>ğŸ”§ è¿è¡Œåï¼š</p>
<ul>
<li>è‡ªåŠ¨ç”Ÿæˆ <code>migrations/</code> ç›®å½• + ç‰ˆæœ¬åŒ– SQL</li>
<li>è‡ªåŠ¨å»º <code>users</code>ã€<code>posts</code> è¡¨ï¼Œå¸¦å¤–é”®ã€å”¯ä¸€ç´¢å¼•ã€é»˜è®¤å€¼</li>
<li>ä½ çš„åŒæ‰‹ç»ˆäºä» <code>CREATE TABLE</code> ä¸­è§£æ”¾äº†ï¼</li>
</ul>
<blockquote>
<p>ğŸ  <strong>æ¯”å–»æ—¶é—´</strong>ï¼š<br/>
ä½ å‘Šè¯‰ç®¡å®¶ï¼šâ€œæˆ‘è¦ä¸€ä¸ªä¸¤å±…å®¤ï¼Œä¸»å§æœå—ï¼Œå¸¦æ™ºèƒ½é©¬æ¡¶â€<br/>
ç®¡å®¶ç”¨ <code>schema.hcl</code> è®°ä¸‹éœ€æ±‚ â†’ <code>queryx db:migrate</code> â†’ äº¤é’¥åŒ™ï¼âœ¨</p>
</blockquote>
<hr/>
<h2 data-id="heading-4">ğŸ® ç¬¬å››ç« ï¼šCRUD æ“ä½œ â€”â€” æ¯”æ‰“æ¸¸æˆåˆ·å‰¯æœ¬è¿˜çˆ½ï¼</h2>
<p>å…ˆç”Ÿæˆ Go ä»£ç ï¼ˆè®© Queryx ä¸ºä½ æ‰“å·¥ï¼‰ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">queryx g  <span class="hljs-comment"># or queryx generate</span>
<span class="hljs-comment"># â†’ ç”Ÿæˆ db/ ç›®å½•ï¼šå« clientã€modelsã€buildersã€migrations...</span>
</code></pre>
<p>ç„¶ååœ¨ä»£ç ä¸­äº«å—<strong>ç¼–è¯‘æ—¶ç±»å‹å®‰å…¨</strong>çš„å¿«ä¹ï¼š</p>
<h3 data-id="heading-5">4.1 ğŸ‰ åˆ›å»ºç”¨æˆ·ï¼šåƒè¿æ¥æ–°æœ‹å‹ä¸€æ ·æ¸©æš–</h3>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> (
	<span class="hljs-string">"context"</span>
	<span class="hljs-string">"fmt"</span>
	<span class="hljs-string">"log"</span>

	<span class="hljs-string">"your-project/db"</span> <span class="hljs-comment">// â† Queryx ç”Ÿæˆçš„åŒ…ï¼</span>
)

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
	c, err := db.NewClient(context.Background())
	<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
		log.Fatal(<span class="hljs-string">"ğŸ’” è¿ä¸ä¸Šæ•°æ®åº“"</span>)
	}
	<span class="hljs-keyword">defer</span> c.Close()

	<span class="hljs-comment">// âœ… ç±»å‹å®‰å…¨ï¼SetName åªæ¥å— stringï¼ŒSetAge åªæ¥å— *int</span>
	newUser := c.ChangeUser().
		SetName(<span class="hljs-string">"Goè¯­è¨€å°ç‹å­"</span>).
		SetEmail(<span class="hljs-string">"gopher@example.com"</span>).
		SetAge(db.Int(<span class="hljs-number">25</span>)) <span class="hljs-comment">// æ³¨æ„ï¼šnil-safeï¼Œdb.Int(nil) è¡¨ç¤º NULL</span>

	user, err := c.QueryUser().Create(newUser)
	<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
		log.Fatal(<span class="hljs-string">"åˆ›å»ºå¤±è´¥:"</span>, err) <span class="hljs-comment">// å¯èƒ½æ˜¯é‚®ç®±é‡å¤ï¼</span>
	}

	fmt.Printf(<span class="hljs-string">"âœ… ç”¨æˆ·åˆ›å»ºæˆåŠŸï¼ID: %d, å§“å: %s\n"</span>, user.ID, user.Name)
	<span class="hljs-comment">// è¾“å‡ºï¼šID: 1, å§“å: Goè¯­è¨€å°ç‹å­</span>
}
</code></pre>
<blockquote>
<p>ğŸ” <strong>å…³é”®ç»†èŠ‚</strong>ï¼ˆæ¥è‡ª Queryx çœŸå®è®¾è®¡ï¼‰ï¼š</p>
<ul>
<li><code>c.ChangeUser()</code> â†’ è¿”å› <strong>å˜æ›´æ„å»ºå™¨</strong>ï¼ˆBuilder Patternï¼‰</li>
<li><code>SetAge(db.Int(25))</code>ï¼šç”¨åŒ…è£…ç±»å‹æ”¯æŒ <code>NULL</code>ï¼ˆ<code>db.Int(nil)</code>ï¼‰</li>
<li>æ‰€æœ‰ <code>SetXxx()</code> æ–¹æ³•ï¼š<strong>ç¼–è¯‘æ—¶æŠ¥é”™</strong>ï¼å†™é”™å­—æ®µï¼ŸGo ç¼–è¯‘å™¨ç§’æ‹’ï¼</li>
</ul>
</blockquote>
<hr/>
<h3 data-id="heading-6">4.2 ğŸ” æŸ¥è¯¢ç”¨æˆ·ï¼šæ¯”ç¦å°”æ‘©æ–¯æ‰¾çº¿ç´¢è¿˜å‡†</h3>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// ç²¾å‡†æŸ¥æ‰¾ï¼šæŒ‰ ID</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">findUserByID</span><span class="hljs-params">(c *db.Client, id <span class="hljs-type">int64</span>)</span></span> {
	user, err := c.QueryUser().Find(id)
	<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
		fmt.Println(<span class="hljs-string">"ğŸ«£ ç”¨æˆ·ä¸å­˜åœ¨"</span>)
		<span class="hljs-keyword">return</span>
	}
	fmt.Printf(<span class="hljs-string">"ğŸ‘¤ %s (%s, %då²)\n"</span>, user.Name, user.Email, user.Age)
}

<span class="hljs-comment">// æ¡ä»¶æŸ¥è¯¢ï¼šé“¾å¼ API å¦‚è¯—å¦‚ç”»</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">queryUsers</span><span class="hljs-params">(c *db.Client)</span></span> {
	<span class="hljs-comment">// æ‰¾ 18+ ç”¨æˆ·ï¼ŒæŒ‰åˆ›å»ºæ—¶é—´å€’åº</span>
	adults, err := c.QueryUser().
		Where(c.User.Age.GT(<span class="hljs-number">18</span>)).           <span class="hljs-comment">// å¹´é¾„ &gt; 18</span>
		OrderBy(c.User.CreatedAt.Desc()).   <span class="hljs-comment">// æ—¶é—´å€’åº</span>
		All()
	<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
		log.Fatal(<span class="hljs-string">"æŸ¥è¯¢ç¿»è½¦äº†"</span>)
	}

	fmt.Printf(<span class="hljs-string">"ğŸ‘¥ å…± %d ä½æˆå¹´ç”¨æˆ·ï¼š\n"</span>, <span class="hljs-built_in">len</span>(adults))
	<span class="hljs-keyword">for</span> _, u := <span class="hljs-keyword">range</span> adults {
		fmt.Printf(<span class="hljs-string">"â€¢ %sï¼ˆ%då²ï¼‰\n"</span>, u.Name, u.Age)
	}

	<span class="hljs-comment">// é‚®ç®±ç²¾å‡†åŒ¹é…ï¼ˆç¼–è¯‘æ—¶æ£€æŸ¥å­—æ®µï¼ï¼‰</span>
	user, err := c.QueryUser().
		Where(c.User.Email.EQ(<span class="hljs-string">"gopher@example.com"</span>)).
		First()
	<span class="hljs-keyword">if</span> err == <span class="hljs-literal">nil</span> {
		fmt.Printf(<span class="hljs-string">"ğŸ“§ é‚®ç®±ä¸»äººï¼š%s\n"</span>, user.Name)
	}
}
</code></pre>
<blockquote>
<p>ğŸ’¡ <strong>Queryx æŸ¥è¯¢æ„å»ºå™¨ä¸‰å¤§æ³•å®</strong>ï¼š</p>
<ol>
<li><code>c.User.Age.GT(18)</code> â€”â€” å­—æ®µè·¯å¾„ + æ“ä½œç¬¦ï¼ˆGT/LT/EQ/IN...ï¼‰</li>
<li><code>OrderBy(...).Limit(...).Offset(...)</code> â€”â€” é“¾å¼ç»„åˆ</li>
<li><code>First()</code> / <code>All()</code> / <code>Count()</code> â€”â€” æ¸…æ™°è¯­ä¹‰ï¼Œå‘Šåˆ« <code>Scan</code> åœ°ç‹±</li>
</ol>
</blockquote>
<hr/>
<h3 data-id="heading-7">4.3 âœï¸ æ›´æ–°ç”¨æˆ·ï¼šåƒç¾é¢œç›¸æœºä¸€æ ·ç²¾å‡†</h3>
<pre><code class="hljs language-go" lang="go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">updateUser</span><span class="hljs-params">(c *db.Client, id <span class="hljs-type">int64</span>)</span></span> {
	<span class="hljs-comment">// å…ˆæŸ¥åæ”¹ï¼ˆä¹è§‚é”å‹å¥½ï¼‰</span>
	user, err := c.QueryUser().Find(id)
	<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
		<span class="hljs-keyword">return</span>
	}

	<span class="hljs-comment">// æ„å»ºæ›´æ–°ï¼šç±»å‹å®‰å…¨ï¼</span>
	update := c.ChangeUser().
		SetName(<span class="hljs-string">"Goè¯­è¨€å¤§ç¥"</span>).
		SetAge(db.Int(<span class="hljs-number">26</span>)).
		SetEmail(<span class="hljs-string">"master@golang.com"</span>)

	err = user.Update(update)
	<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
		log.Fatal(<span class="hljs-string">"æ›´æ–°å¤±è´¥"</span>)
	}
	fmt.Println(<span class="hljs-string">"âœ¨ ç”¨æˆ·ä¿¡æ¯å·²å‡çº§ï¼"</span>)

	<span class="hljs-comment">// æ‰¹é‡æ›´æ–°ï¼šå…¨å…¬å¸å‘˜å·¥ +1 å²ï¼ˆç”Ÿæ—¥å¿«ä¹ğŸ‚ï¼‰</span>
	count, err := c.QueryUser().
		Where(c.User.Age.IsNotNull()). <span class="hljs-comment">// åªæ›´æ–°é NULL å¹´é¾„</span>
		UpdateAll(c.ChangeUser().SetAge(c.User.Age.Add(<span class="hljs-number">1</span>)))
	<span class="hljs-keyword">if</span> err == <span class="hljs-literal">nil</span> {
		fmt.Printf(<span class="hljs-string">"ğŸ‰ ç»™ %d ä½åŒäº‹è¿‡äº†ç”Ÿæ—¥ï¼\n"</span>, count)
	}
}
</code></pre>
<blockquote>
<p>ğŸŒŸ <strong>äº®ç‚¹</strong>ï¼š</p>
<ul>
<li><code>c.User.Age.Add(1)</code> â†’ ç”Ÿæˆ <code>age = age + 1</code>ï¼Œé¿å…ç«æ€</li>
<li><code>UpdateAll</code> æ”¯æŒè¡¨è¾¾å¼æ›´æ–°ï¼Œ<strong>æ—  N+1 é—®é¢˜</strong></li>
</ul>
</blockquote>
<hr/>
<h3 data-id="heading-8">4.4 ğŸ—‘ï¸ åˆ é™¤ç”¨æˆ·ï¼šæ¯”åˆ†æ‰‹è¿˜å¹²å‡€åˆ©è½</h3>
<pre><code class="hljs language-go" lang="go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">deleteUser</span><span class="hljs-params">(c *db.Client, id <span class="hljs-type">int64</span>)</span></span> {
	<span class="hljs-comment">// æ–¹å¼1ï¼šå…ˆæŸ¥ååˆ ï¼ˆé€‚åˆå¸¦ä¸šåŠ¡é€»è¾‘æ ¡éªŒï¼‰</span>
	user, _ := c.QueryUser().Find(id)
	<span class="hljs-keyword">if</span> user != <span class="hljs-literal">nil</span> {
		err := user.Delete() <span class="hljs-comment">// è½¯åˆ é™¤ï¼Ÿç¡¬åˆ é™¤ï¼Ÿschema å†³å®šï¼</span>
		<span class="hljs-keyword">if</span> err == <span class="hljs-literal">nil</span> {
			fmt.Println(<span class="hljs-string">"âœ… ç”¨æˆ·å·²åˆ é™¤"</span>)
		}
	}

	<span class="hljs-comment">// æ–¹å¼2ï¼šæ¡ä»¶æ‰¹é‡åˆ ï¼ˆé«˜æ•ˆï¼ï¼‰</span>
	count, err := c.QueryUser().
		Where(c.User.Age.LT(<span class="hljs-number">18</span>)). <span class="hljs-comment">// æœªæˆå¹´</span>
		DeleteAll()
	<span class="hljs-keyword">if</span> err == <span class="hljs-literal">nil</span> {
		fmt.Printf(<span class="hljs-string">"ğŸ‘® æ¸…ç†äº† %d ä½æœªæˆå¹´ç”¨æˆ·\n"</span>, count)
	}
}
</code></pre>
<blockquote>
<p>âš ï¸ <strong>å®‰å…¨è®¾è®¡</strong>ï¼š<br/>
Queryx <strong>é»˜è®¤å¼€å¯è½¯åˆ é™¤</strong>ï¼ˆå¦‚æœ‰ <code>deleted_at</code> å­—æ®µï¼‰ï¼Œ<br/>
çœŸè¦ç¡¬åˆ ï¼Ÿéœ€æ˜¾å¼è°ƒç”¨ <code>ForceDelete()</code> â€”â€” é˜²æ‰‹æŠ–ç¬¬ä¸€é“é˜²çº¿ï¼</p>
</blockquote>
<hr/>
<h2 data-id="heading-9">ğŸ¤ ç¬¬äº”ç« ï¼šå…³è”æŸ¥è¯¢ â€”â€” åƒç¤¾äº¤ç½‘ç»œä¸€æ ·è‡ªç„¶</h2>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// é¢„åŠ è½½å¸–å­ï¼ˆ1 æ¬¡æŸ¥è¯¢æå®šï¼Œæ—  N+1ï¼ï¼‰</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">userWithPosts</span><span class="hljs-params">(c *db.Client, userID <span class="hljs-type">int64</span>)</span></span> {
	user, err := c.QueryUser().
		Preload(c.User.Posts). <span class="hljs-comment">// â† å…³é”®ï¼ç”Ÿæˆ JOIN æˆ– IN æŸ¥è¯¢</span>
		Find(userID)
	<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
		log.Fatal(<span class="hljs-string">"æŸ¥è¯¢å¤±è´¥"</span>)
	}

	fmt.Printf(<span class="hljs-string">"ğŸ“ %s çš„åšå®¢ï¼š\n"</span>, user.Name)
	<span class="hljs-keyword">for</span> _, p := <span class="hljs-keyword">range</span> user.Posts {
		fmt.Printf(<span class="hljs-string">"â€¢ %s\n"</span>, truncate(p.Title, <span class="hljs-number">30</span>))
	}
}

<span class="hljs-comment">// åˆ›å»ºã€Œç”¨æˆ·+å¸–å­ã€ç»„åˆæ•°æ®</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">createUserWithPosts</span><span class="hljs-params">(c *db.Client)</span></span> {
	<span class="hljs-comment">// 1. åˆ›å»ºç”¨æˆ·</span>
	user, _ := c.QueryUser().Create(
		c.ChangeUser().SetName(<span class="hljs-string">"åšå®¢è¾¾äºº"</span>).SetEmail(<span class="hljs-string">"blogger@go.com"</span>),
	)

	<span class="hljs-comment">// 2. å…³è”åˆ›å»ºå¸–å­ï¼ˆè‡ªåŠ¨å¡« user_idï¼ï¼‰</span>
	posts := []db.CreatePostInput{
		{Title: <span class="hljs-string">"æˆ‘çš„ç¬¬ä¸€ä¸ª Go ç¨‹åº"</span>, Content: <span class="hljs-string">"Hello, Queryx!"</span>},
		{Title: <span class="hljs-string">"ä¸ºä»€ä¹ˆæˆ‘çˆ± Queryx"</span>, Content: <span class="hljs-string">"ç±»å‹å®‰å…¨è®©æˆ‘ç¡å¾—æ›´é¦™ï½"</span>},
	}

	<span class="hljs-keyword">for</span> _, p := <span class="hljs-keyword">range</span> posts {
		_, _ = c.QueryPost().Create(
			c.ChangePost().
				SetTitle(p.Title).
				SetContent(p.Content).
				SetUserID(user.ID), <span class="hljs-comment">// â† ç±»å‹å®‰å…¨ï¼ID æ˜¯ int64</span>
		)
	}
	fmt.Printf(<span class="hljs-string">"ğŸ“š ç”¨æˆ· %s å‘å¸ƒäº† 2 ç¯‡åšæ–‡ï¼\n"</span>, user.Name)
}

<span class="hljs-comment">// è¾…åŠ©ï¼šæˆªæ–­é•¿æ–‡æœ¬</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">truncate</span><span class="hljs-params">(s <span class="hljs-type">string</span>, n <span class="hljs-type">int</span>)</span></span> <span class="hljs-type">string</span> {
	<span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(s) &lt;= n {
		<span class="hljs-keyword">return</span> s
	}
	<span class="hljs-keyword">return</span> s[:n] + <span class="hljs-string">"â€¦"</span>
}
</code></pre>
<blockquote>
<p>âœ… <strong>å…³è”ä¼˜åŠ¿</strong>ï¼š</p>
<ul>
<li><code>Preload(c.User.Posts)</code> â†’ è‡ªåŠ¨è¯†åˆ« <code>belongs_to</code> å…³ç³»</li>
<li>ç”Ÿæˆé«˜æ•ˆ SQLï¼ˆ<code>JOIN</code> æˆ– <code>SELECT ... WHERE id IN (...)</code>ï¼‰</li>
<li>ç¼–è¯‘æ—¶æ£€æŸ¥å…³è”è·¯å¾„ï¼š<code>c.User.Postxxx</code>ï¼ŸâŒ ä¸å­˜åœ¨ï¼</li>
</ul>
</blockquote>
<hr/>
<h2 data-id="heading-10">ğŸ§™ ç¬¬å…­ç« ï¼šé«˜çº§æŠ€å·§ â€”â€” æˆä¸º Queryx é«˜æ‰‹</h2>
<h3 data-id="heading-11">6.1 ğŸ’° äº‹åŠ¡å¤„ç†ï¼šè¦ä¹ˆå…¨æˆåŠŸï¼Œè¦ä¹ˆå…¨å›æ»š</h3>
<pre><code class="hljs language-go" lang="go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">transferPoints</span><span class="hljs-params">(c *db.Client, fromID, toID <span class="hljs-type">int64</span>, pts <span class="hljs-type">int</span>)</span></span> <span class="hljs-type">error</span> {
	tx, err := c.Begin(context.Background())
	<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
		<span class="hljs-keyword">return</span> err
	}
	<span class="hljs-keyword">defer</span> tx.Rollback() <span class="hljs-comment">// â† å¿˜è®°è¿™è¡Œï¼Ÿdefer ä¿ä½ å¹³å®‰</span>

	<span class="hljs-comment">// æ‰£æ¬¾æ–¹</span>
	from, err := tx.QueryUser().Find(fromID)
	<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> || from.Points &lt; pts {
		<span class="hljs-keyword">return</span> fmt.Errorf(<span class="hljs-string">"ä½™é¢ä¸è¶³"</span>)
	}
	err = from.Update(c.ChangeUser().SetPoints(from.Points - pts))
	<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
		<span class="hljs-keyword">return</span> err
	}

	<span class="hljs-comment">// æ”¶æ¬¾æ–¹</span>
	to, err := tx.QueryUser().Find(toID)
	<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
		<span class="hljs-keyword">return</span> err
	}
	err = to.Update(c.ChangeUser().SetPoints(to.Points + pts))
	<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
		<span class="hljs-keyword">return</span> err
	}

	<span class="hljs-keyword">return</span> tx.Commit() <span class="hljs-comment">// ğŸ¯ æäº¤ï¼èµ„é‡‘åˆ°ä½ï¼</span>
}
</code></pre>
<blockquote>
<p>ğŸ” äº‹åŠ¡ä¸­æ‰€æœ‰æ“ä½œèµ° <code>tx.QueryUser()</code>ï¼Œé <code>c.QueryUser()</code> â€”â€” Queryx å¼ºåˆ¶ä½ åŒºåˆ†ï¼</p>
</blockquote>
<hr/>
<h3 data-id="heading-12">6.2 ğŸ“Š å¤æ‚æŸ¥è¯¢ï¼šåƒæ­ä¹é«˜ä¸€æ ·ç»„åˆ</h3>
<pre><code class="hljs language-go" lang="go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">userStats</span><span class="hljs-params">(c *db.Client)</span></span> {
	<span class="hljs-comment">// ç»Ÿè®¡ï¼šCOUNT + æ¡ä»¶</span>
	total, _ := c.QueryUser().Count()
	adults, _ := c.QueryUser().Where(c.User.Age.GTE(<span class="hljs-number">18</span>)).Count()
	active, _ := c.QueryUser().Where(c.User.LastLogin.GT(time.Now().Add(<span class="hljs-number">-30</span>*<span class="hljs-number">24</span>*time.Hour))).Count()

	fmt.Printf(<span class="hljs-string">`ğŸ“Š ç”¨æˆ·å¤§ç›˜ï¼š
   æ€»ç”¨æˆ·    : %d
   æˆå¹´ç”¨æˆ·  : %d
   è¿‘30å¤©æ´»è·ƒ: %d
`</span>, total, adults, active)
}

<span class="hljs-comment">// åˆ†ç»„ç»Ÿè®¡ï¼šå¹´é¾„åˆ†å¸ƒ</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">ageDistribution</span><span class="hljs-params">(c *db.Client)</span></span> {
	<span class="hljs-keyword">var</span> results []<span class="hljs-keyword">struct</span> {
		AgeRange <span class="hljs-type">string</span> <span class="hljs-string">`db:"age_range"`</span>
		Count    <span class="hljs-type">int</span>    <span class="hljs-string">`db:"count"`</span>
	}

	<span class="hljs-comment">// Queryx æ”¯æŒ Raw SQL ç‰‡æ®µï¼ˆç´§æ€¥æ—¶çš„â€œåˆ›å¯è´´â€ï¼‰</span>
	err := c.QueryRaw(<span class="hljs-string">`
		SELECT 
			CASE 
				WHEN age &lt; 18 THEN 'æœªæˆå¹´'
				WHEN age BETWEEN 18 AND 35 THEN 'é’å£®å¹´'
				ELSE 'èµ„æ·±é’å¹´'
			END AS age_range,
			COUNT(*) AS count
		FROM users 
		WHERE age IS NOT NULL
		GROUP BY age_range
	`</span>).Scan(&amp;results)
	<span class="hljs-comment">// ...</span>
}
</code></pre>
<blockquote>
<p>âœ… åŸåˆ™ï¼š</p>
<ul>
<li>95% åœºæ™¯ç”¨ç±»å‹å®‰å…¨ Builder</li>
<li>5% é«˜çº§ SQL ç”¨ <code>QueryRaw()</code>ï¼Œä½†å‚æ•°ä»èµ° <code>?</code> å ä½é˜²æ³¨å…¥</li>
</ul>
</blockquote>
<hr/>
<h2 data-id="heading-13">âš–ï¸ ç¬¬ä¸ƒç« ï¼šQueryx vs å…¶ä»–æ–¹æ¡ˆ â€”â€” è°æ‰æ˜¯ä½ çš„çœŸå‘½å¤©â€œåº“â€ï¼Ÿ</h2>















































<table><thead><tr><th>ç‰¹æ€§</th><th>Queryx âœ…</th><th>GORM ğŸŸ¡</th><th>åŸç”Ÿ SQL âŒ</th></tr></thead><tbody><tr><td><strong>ç±»å‹å®‰å…¨</strong></td><td>âœ… ç¼–è¯‘æ—¶æŠ¥é”™</td><td>âŒ è¿è¡Œæ—¶æ‰å‘ç°</td><td>âŒ å…¨é äººçœ¼</td></tr><tr><td><strong>æ€§èƒ½</strong></td><td>âœ… é›¶åå°„ï¼Œé¢„ç”Ÿæˆä»£ç </td><td>ğŸŸ¡ åå°„å¼€é”€ï¼ˆä¸­å°é¡¹ç›®å¯å¿ï¼‰</td><td>âœ… æœ€å¿«</td></tr><tr><td><strong>å¼€å‘ä½“éªŒ</strong></td><td>âœ… IDE è‡ªåŠ¨è¡¥å…¨ + è·³è½¬</td><td>âœ… åŠŸèƒ½ä¸°å¯Œ</td><td>âŒ æ˜“é”™ã€éš¾ç»´æŠ¤</td></tr><tr><td><strong>å­¦ä¹ æ›²çº¿</strong></td><td>âœ… 1 0åˆ†é’Ÿä¸Šæ‰‹</td><td>ğŸŸ¡ éœ€ç†è§£ Scopes/Hooks</td><td>âœ… ä¼š SQL å°±è¡Œ</td></tr><tr><td><strong>å…³è”æŸ¥è¯¢</strong></td><td>âœ… <code>Preload()</code> é˜² N+1</td><td>âœ… <code>.Preload()</code></td><td>âŒ æ‰‹å†™ JOIN æ˜“å‡ºé”™</td></tr><tr><td><strong>è¿ç§»ç®¡ç†</strong></td><td>âœ… <code>queryx db:migrate</code></td><td>âœ… <code>AutoMigrate()</code></td><td>âŒ æ‰‹åŠ¨ç»´æŠ¤</td></tr></tbody></table>
<blockquote>
<p>ğŸ¯ <strong>é€‰å‹å»ºè®®</strong>ï¼š</p>
<ul>
<li>æƒ³<strong>æŒæ§ SQLã€è®¨åŒé­”æ³•ã€è¿½æ±‚è½»é‡é«˜æ•ˆ</strong> â†’ <strong>Queryx</strong></li>
<li>å›¢é˜Ÿå·²é‡åº¦ä¾èµ– GORMã€éœ€å¿«é€Ÿ CRUD â†’ <strong>GORM</strong></li>
<li>åš<strong>è¶…é«˜æ€§èƒ½åœºæ™¯ã€å¤æ‚æŠ¥è¡¨</strong> â†’ <strong>åŸç”Ÿ SQL + queryx.QueryRaw()</strong></li>
</ul>
</blockquote>
<hr/>
<h2 data-id="heading-14">ğŸ ç»“è¯­ï¼šç”¨ Queryx çš„ä¸€å¤©ï¼Œæ˜¯å®‰å¿ƒå†™ä»£ç çš„ä¸€å¤©</h2>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// ç”¨ Queryx çš„å¹¸ç¦æ—¶åˆ» ğŸ‘‡</span>
user, err := c.QueryUser().
	Where(c.User.Email.EQ(<span class="hljs-string">"happy@coder.com"</span>)).
	Preload(c.User.Posts).
	First()

<span class="hljs-comment">// è€Œä¸æ˜¯ï¼š</span>
<span class="hljs-comment">// ğŸ¤¯ "ä¸ºä»€ä¹ˆå­—æ®µæ˜¯ç©ºçš„ï¼Ÿå“¦ï¼Œstruct tag å†™é”™äº†..."</span>
<span class="hljs-comment">// ğŸ¤¯ "ä¸ºä»€ä¹ˆæŠ¥é”™ï¼Ÿå“¦ï¼ŒSQL æ‹¼é”™äº†å…³é”®å­—..."</span>
<span class="hljs-comment">// ğŸ¤¯ "ä¸ºä»€ä¹ˆæ…¢ï¼Ÿå“¦ï¼ŒN+1 æŸ¥è¯¢äº† 1000 æ¬¡..."</span>
</code></pre>
<blockquote>
<p>ğŸŒˆ <strong>Queryx çš„å“²å­¦</strong>ï¼š<br/>
<em>â€œæˆ‘ä»¬ä¸ hide SQL â€”â€” æˆ‘ä»¬è®© SQL å†™å¾—æ›´å®‰å…¨ã€æ›´å¿«ä¹ã€æ›´ Goã€‚â€</em></p>
</blockquote>
<hr/>
<h3 data-id="heading-15">ğŸš€ ç°åœ¨å°±è¯•è¯•å§ï¼</h3>
<ol>
<li>
<p><code>go install github.com/swiftcarrot/queryx/cmd/queryx@latest</code></p>
</li>
<li>
<p>å†™ <code>schema.hcl</code></p>
</li>
<li>
<p><code>queryx db:create &amp;&amp; queryx g</code></p>
</li>
<li>
<p>æ„Ÿå—<strong>ç¼–è¯‘æ—¶æŠ¥é”™</strong>å¸¦æ¥çš„å®‰å…¨æ„Ÿ â¤ï¸</p>
</li>
</ol>
<hr/>
<blockquote>
<p><strong>æœ€åä¸€å¥çœŸå¿ƒè¯</strong>ï¼š<br/>
<em>â€œæ—©ç”¨ Queryxï¼Œå°‘ debug 2 å°æ—¶ï¼›<br/>
æ™šç”¨ Queryxï¼Œå¤šåŠ ç­ 3 é€šå®µã€‚â€</em></p>
</blockquote>
<p>Happy Querying! ğŸµğŸ‰<br/>
ï¼ˆå¥¶èŒ¶å·²ä¸‹å•ï¼Œä»£ç æ­£åœ¨è·‘ï½ï¼‰</p>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸€æ–‡ææ‡‚ AI æµå¼å“åº”]]></title>    <link>https://juejin.cn/post/7572403510467772459</link>    <guid>https://juejin.cn/post/7572403510467772459</guid>    <pubDate>2025-11-15T04:51:42.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572403510467772459" data-draft-id="7572459217811144767" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸€æ–‡ææ‡‚ AI æµå¼å“åº”"/> <meta itemprop="keywords" content="å‰ç«¯,Node.js,OpenAI"/> <meta itemprop="datePublished" content="2025-11-15T04:51:42.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åªæƒ³å†™ä¸ªå°ç©æ„"/> <meta itemprop="url" content="https://juejin.cn/user/923245496771783"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸€æ–‡ææ‡‚ AI æµå¼å“åº”
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/923245496771783/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åªæƒ³å†™ä¸ªå°ç©æ„
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-15T04:51:42.000Z" title="Sat Nov 15 2025 04:51:42 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>è¿™æ˜¯ <code>OpenAI</code> æ–‡æ¡£ä¸­æµå¼å“åº”çš„ä»£ç  <a href="https://link.juejin.cn?target=https%3A%2F%2Fplatform.openai.com%2Fdocs%2Fguides%2Fstreaming-responses%3Fapi-mode%3Dresponses%25EF%25BC%259A" target="_blank" title="https://platform.openai.com/docs/guides/streaming-responses?api-mode=responses%EF%BC%9A" ref="nofollow noopener noreferrer">platform.openai.com/docs/guidesâ€¦</a></p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">OpenAI</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"openai"</span>;
<span class="hljs-keyword">const</span> client = <span class="hljs-keyword">new</span> <span class="hljs-title class_">OpenAI</span>();

<span class="hljs-keyword">const</span> stream = <span class="hljs-keyword">await</span> client.<span class="hljs-property">responses</span>.<span class="hljs-title function_">create</span>({
    <span class="hljs-attr">model</span>: <span class="hljs-string">"gpt-5"</span>,
    <span class="hljs-attr">input</span>: [
        {
            <span class="hljs-attr">role</span>: <span class="hljs-string">"user"</span>,
            <span class="hljs-attr">content</span>: <span class="hljs-string">"Say 'double bubble bath' ten times fast."</span>,
        },
    ],
    <span class="hljs-attr">stream</span>: <span class="hljs-literal">true</span>,
});

<span class="hljs-keyword">for</span> <span class="hljs-keyword">await</span> (<span class="hljs-keyword">const</span> event <span class="hljs-keyword">of</span> stream) 
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(event);
}
</code></pre>
<p>åœ¨æˆ‘ç¬¬ä¸€æ¬¡çœ‹åˆ°è¿™æ®µä»£ç æ—¶ï¼Œæœ‰æ— æ•°çš„ç–‘æƒ‘å‡ºç°åœ¨äº†æˆ‘çš„å¤§è„‘ä¸­ï¼š</p>
<ul>
<li><code>stream</code> æ˜¯ä»€ä¹ˆï¼Ÿ</li>
<li>ä¸ºä»€ä¹ˆå¯ä»¥é€šè¿‡ <code>for await of</code> æ¥éå†ï¼Ÿ</li>
<li>è¿™å’Œå¼‚æ­¥æœ‰ä»€ä¹ˆå…³ç³»å—ï¼Ÿ</li>
<li>æœåŠ¡ç«¯è¦å¦‚ä½•å°† <code>stream</code> ä¸€ç‚¹ç‚¹è¿”å›ç»™å‰ç«¯ï¼Ÿ</li>
<li>å‰ç«¯è¦å¦‚ä½•æ¥æ”¶æ•°æ®ï¼Ÿ</li>
<li>â€¦â€¦</li>
</ul>
<p>å¦‚æœä½ ä¹Ÿæœ‰ç±»ä¼¼çš„ç–‘é—®ï¼Œè¯·è€å¿ƒé˜…è¯»æœ¬æ–‡ï¼Œç›¸ä¿¡ä½ ä¸€å®šèƒ½æ‰¾åˆ°ç­”æ¡ˆã€‚</p>
<p>æœ¬æ–‡çš„ä»£ç åœ¨è¿™é‡Œ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fwangkaiwd%2Fai-stream-response%25EF%25BC%258C%25E5%25BB%25BA%25E8%25AE%25AE%25E7%25BB%2593%25E5%2590%2588%25E6%2596%2587%25E7%25AB%25A0%25E4%25B8%2580%25E8%25B5%25B7%25E9%2598%2585%25E8%25AF%25BB" target="_blank" title="https://github.com/wangkaiwd/ai-stream-response%EF%BC%8C%E5%BB%BA%E8%AE%AE%E7%BB%93%E5%90%88%E6%96%87%E7%AB%A0%E4%B8%80%E8%B5%B7%E9%98%85%E8%AF%BB" ref="nofollow noopener noreferrer">github.com/wangkaiwd/aâ€¦</a></p>
<h2 data-id="heading-0">Iterable protocol å’Œ Iterator protocol</h2>
<p>æ”¯æŒ <code>for...of</code> å¾ªç¯çš„å˜é‡ï¼Œä¸€å®šè¦ç¬¦åˆ <code>Iterable protocol</code> å’Œ <code>Iterator protocol</code></p>
<p><code>Iterable protocol</code> :</p>
<ul>
<li>å˜é‡æ˜¯ä¸€ä¸ªå¯¹è±¡</li>
<li>å¯¹è±¡å¿…é¡»å®ç° <code>[Symbol.iterator]</code> æ–¹æ³•</li>
<li><code>[Symbol.iterator]</code> æ–¹æ³•å¿…é¡»è¿”å›éµå¾ª <code>Iterator protocol</code> çº¦å®šçš„å¯¹è±¡</li>
</ul>
<p><code>Iterator protocol</code> :</p>
<ul>
<li>å˜é‡æ˜¯ä¸€ä¸ªå¯¹è±¡</li>
<li>å¯¹è±¡å¿…é¡»å®ç° <code>next</code> æ–¹æ³•</li>
<li><code>next</code> æ–¹æ³•è¦è¿”å›ä¸€ä¸ªå¯¹è±¡ <code>{ done: boolean, value: any }</code>
<ul>
<li><code>done</code> è¡¨ç¤ºè¿­ä»£æ˜¯å¦ç»“æŸ</li>
<li><code>value</code> è¡¨ç¤ºè¿­ä»£å™¨çš„è¿”å›å€¼</li>
</ul>
</li>
</ul>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">makeIterableObj</span> (<span class="hljs-attr">array</span>: any[]) {
  <span class="hljs-keyword">return</span> {
    [<span class="hljs-title class_">Symbol</span>.<span class="hljs-property">iterator</span>] () {
      <span class="hljs-keyword">let</span> nextIndex = <span class="hljs-number">0</span>
      <span class="hljs-keyword">return</span> {
        next () {
          <span class="hljs-keyword">if</span> (nextIndex &lt; array.<span class="hljs-property">length</span>) {
            <span class="hljs-keyword">const</span> result = { <span class="hljs-attr">value</span>: array[nextIndex], <span class="hljs-attr">done</span>: <span class="hljs-literal">false</span> }
            nextIndex++
            <span class="hljs-keyword">return</span> result
          }
          <span class="hljs-keyword">return</span> { <span class="hljs-attr">done</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">value</span>: <span class="hljs-literal">undefined</span> }
        },
      }
    },
  }
}

<span class="hljs-keyword">const</span> iterableObj = <span class="hljs-title function_">makeIterableObj</span>([<span class="hljs-string">'one'</span>, <span class="hljs-string">'two'</span>])
</code></pre>
<p>å¯ä»¥æ‰‹åŠ¨å¾ªç¯ <code>iterableObj</code></p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">const</span> iterator = iterableObj[<span class="hljs-title class_">Symbol</span>.<span class="hljs-property">iterator</span>]()
<span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
  <span class="hljs-keyword">const</span> { value, done } = iterator.<span class="hljs-title function_">next</span>()
  <span class="hljs-keyword">if</span> (done) {
    <span class="hljs-keyword">break</span>
  }
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'value'</span>, value)
}

<span class="hljs-comment">// è¾“å‡ºç»“æœ</span>
<span class="hljs-comment">// value one</span>
<span class="hljs-comment">// value two</span>
</code></pre>
<p>ä¹Ÿå¯ä»¥é€šè¿‡ <code>for...of</code> æ¥å¾ªç¯ <code>iterableObj</code> :</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// è¿™é‡Œçš„ item å°±æ˜¯ next æ–¹æ³•æ‰§è¡Œåå¾—åˆ°çš„ value</span>
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> item <span class="hljs-keyword">of</span> iterableObj) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'item'</span>, item)
}

<span class="hljs-comment">// è¾“å‡ºç»“æœ</span>
<span class="hljs-comment">// item one</span>
<span class="hljs-comment">// item two</span>
</code></pre>
<h2 data-id="heading-1">Async iterable protocol å’Œ Async iterator protocol</h2>
<p>ç†è§£äº† <code>iterable protocol</code> å’Œ <code>iterator protocol</code> å†æ¥ç†è§£ <code>async iterable protocol</code> å’Œ <code>async iterator protocol</code> å°±ä¼šå®¹æ˜“å¾ˆå¤šã€‚</p>
<p>å¼‚æ­¥ç›¸æ¯”äºåŒæ­¥ï¼Œæœ‰ä»¥ä¸‹åŒºåˆ«ï¼š</p>
<ul>
<li>å¯¹è±¡å¿…é¡»æœ‰ <a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FJavaScript%2FReference%2FGlobal_Objects%2FSymbol%2FasyncIterator" target="_blank" title="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol/asyncIterator" ref="nofollow noopener noreferrer"><code>[Symbol.asyncIterator]()</code></a> æ–¹æ³•</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FJavaScript%2FReference%2FGlobal_Objects%2FSymbol%2FasyncIterator" target="_blank" title="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol/asyncIterator" ref="nofollow noopener noreferrer"><code>[Symbol.asyncIterator]()</code></a> è¿”å› <code>async iterator</code></li>
<li><code>async iterator</code> çš„ <code>next</code> æ–¹æ³•è¿”å› <code>Promise</code> ï¼Œ <code>Promise</code> æˆåŠŸæ—¶çš„å€¼ä¸º <code>{ value: any, done: boolean }</code></li>
</ul>
<p>åŒæ ·çš„ç¤ºä¾‹æ”¹ä¸ºå¼‚æ­¥ç‰ˆæœ¬ï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">const</span> <span class="hljs-title function_">sleep</span> = (<span class="hljs-params">result: IResult</span>) =&gt; {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">IResult</span>&gt;(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> {
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-title function_">resolve</span>(result)
    }, <span class="hljs-number">1000</span>)
  })
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">makeIterableObj</span> (<span class="hljs-attr">array</span>: any[]) {
  <span class="hljs-keyword">return</span> {
    [<span class="hljs-title class_">Symbol</span>.<span class="hljs-property">asyncIterator</span>] () {
      <span class="hljs-keyword">let</span> nextIndex = <span class="hljs-number">0</span>
      <span class="hljs-keyword">return</span> {
        next () {
          <span class="hljs-keyword">if</span> (nextIndex &lt; array.<span class="hljs-property">length</span>) {
            <span class="hljs-keyword">const</span> promise = <span class="hljs-title function_">sleep</span>({ <span class="hljs-attr">value</span>: array[nextIndex], <span class="hljs-attr">done</span>: <span class="hljs-literal">false</span> })
            nextIndex++
            <span class="hljs-keyword">return</span> promise
          }
          <span class="hljs-keyword">return</span> <span class="hljs-title function_">sleep</span>({ <span class="hljs-attr">done</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">value</span>: <span class="hljs-literal">undefined</span> })
        },
      }
    },
  }
}
</code></pre>
<p>æ‰‹åŠ¨å¾ªç¯ï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">const</span> asyncIterableObj = <span class="hljs-title function_">makeIterableObj</span>([<span class="hljs-string">'one'</span>, <span class="hljs-string">'two'</span>])
<span class="hljs-keyword">const</span> iterator = asyncIterableObj[<span class="hljs-title class_">Symbol</span>.<span class="hljs-property">asyncIterator</span>]()
<span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
  <span class="hljs-keyword">const</span> { value, done } = <span class="hljs-keyword">await</span> iterator.<span class="hljs-title function_">next</span>()
  <span class="hljs-keyword">if</span> (done) {
    <span class="hljs-keyword">break</span>
  }
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'value'</span>, value)
}
</code></pre>
<p>ä½¿ç”¨ <code>for await ... of</code> å¾ªç¯</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">for</span> <span class="hljs-keyword">await</span> (<span class="hljs-keyword">const</span> item <span class="hljs-keyword">of</span> <span class="hljs-title function_">makeIterableObj</span>([<span class="hljs-string">'one'</span>, <span class="hljs-string">'two'</span>])) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'item'</span>, item)
}
</code></pre>
<p>æ­¤æ—¶å†å›åˆ°å¼€ç¯‡çš„ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">const</span> stream = <span class="hljs-keyword">await</span> client.<span class="hljs-property">responses</span>.<span class="hljs-title function_">create</span>()
</code></pre>
<p><strong><code>stream</code> å…¶å®å°±æ˜¯ä¸€ä¸ªéµå¾ª <code>async iterable protocol</code>  çš„å¯¹è±¡</strong></p>
<h2 data-id="heading-2">å¯è¯»æµ ReadableStream</h2>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ª <code>ReadableStream</code> çš„ç¤ºä¾‹ï¼šæ¯éš” 1s å‘æµä¸­å†™å…¥4ä¸ªå­—ç¬¦ï¼Œç›´åˆ°å­—ç¬¦å®Œå…¨å†™å…¥åˆ°æµä¸­</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">let</span> mockData = <span class="hljs-string">`This is a sample string that will be streamed in chunks.`</span>

<span class="hljs-keyword">let</span> <span class="hljs-attr">timer</span>: any = <span class="hljs-literal">null</span>
<span class="hljs-keyword">const</span> step = <span class="hljs-number">4</span>

<span class="hljs-keyword">const</span> stream = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ReadableStream</span>({
  start (controller) {
    timer = <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-keyword">const</span> chunk = mockData.<span class="hljs-title function_">slice</span>(<span class="hljs-number">0</span>, step)
      <span class="hljs-comment">// åˆ é™¤å·²ç»å†™å…¥çš„å­—ç¬¦</span>
      mockData = mockData.<span class="hljs-title function_">slice</span>(step)
      <span class="hljs-keyword">if</span> (!mockData) {
        <span class="hljs-comment">// å­—ç¬¦å¤„ç†å®Œæˆåï¼Œåœæ­¢å†™å…¥</span>
        controller.<span class="hljs-title function_">close</span>()
        <span class="hljs-keyword">if</span> (timer) {
          <span class="hljs-built_in">clearInterval</span>(timer)
          timer = <span class="hljs-literal">null</span>
        }
      }
      <span class="hljs-comment">// æ·»åŠ å­—ç¬¦åˆ° stream</span>
      controller.<span class="hljs-title function_">enqueue</span>(chunk)
    }, <span class="hljs-number">1000</span>)
  },
  cancel () {
    <span class="hljs-built_in">clearInterval</span>(timer)
  },
})
</code></pre>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FAPI%2FReadableStream" target="_blank" title="https://developer.mozilla.org/en-US/docs/Web/API/ReadableStream" ref="nofollow noopener noreferrer"><code>ReadableStream</code></a> é»˜è®¤å®ç°äº† <code>Symbol.asyncIterator</code> ï¼Œæ‰€ä»¥å®ƒæ˜¯ä¸€ä¸ªå¼‚æ­¥å¯è¿­ä»£å¯¹è±¡ï¼Œå¯ä»¥ä½¿ç”¨ <code>for await ... of</code> æ¥å¾ªç¯</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">for</span> <span class="hljs-keyword">await</span> (<span class="hljs-keyword">const</span> chunk <span class="hljs-keyword">of</span> stream) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'chunk'</span>, chunk)
}
</code></pre>
<p><code>ReadableStream</code> è‡ªå·±ä¹Ÿæä¾›äº† <code>getReader</code> æ–¹æ³•æ¥è¯»å–æµï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">const</span> stream = <span class="hljs-title function_">createStream</span>()
<span class="hljs-keyword">const</span> reader = stream.<span class="hljs-title function_">getReader</span>()
<span class="hljs-comment">// å¾ªç¯ç›´åˆ° done ä¸º true æ—¶ç»“æŸ</span>
<span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
  <span class="hljs-keyword">const</span> { done, value } = <span class="hljs-keyword">await</span> reader.<span class="hljs-title function_">read</span>()
  <span class="hljs-keyword">if</span> (done) {
    <span class="hljs-keyword">break</span>
  }
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'value'</span>, value)
}
</code></pre>
<p>è¿™æ˜¯ <code>mdn</code> å®˜æ–¹ä»“åº“ä¸­çš„ä¸€ä¸ªç¤ºä¾‹ï¼Œä¹Ÿå¯ä»¥ç»“åˆä¸€èµ·å­¦ä¹ ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fmdn%2Fdom-examples%2Fblob%2Fmain%2Fstreams%2Fsimple-random-stream%2Findex.html" target="_blank" title="https://github.com/mdn/dom-examples/blob/main/streams/simple-random-stream/index.html" ref="nofollow noopener noreferrer">github.com/mdn/dom-exaâ€¦</a></p>
<h2 data-id="heading-3">æœåŠ¡ç«¯ SSE</h2>
<p>ç›®å‰çš„ <code>AI</code> åº”ç”¨æœåŠ¡ç«¯æµå¼å“åº”ä½¿ç”¨ <code>Server-Sent Events</code> æ¥å®ç°ï¼Œç®€ç§° <code>SSE</code> ã€‚ä¸‹é¢æ˜¯ <code>ChatGPT</code> ç½‘é¡µç‰ˆçš„å“åº”å†…å®¹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/80a788d9e386448dbd4d646eeced024b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-q5oOz5YaZ5Liq5bCP546p5oSP:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763787101&amp;x-signature=PP56pu8Qid4BxlgVYl1ut2Pz%2Brs%3D" alt="" loading="lazy"/></p>
<p><code>mdn</code> çš„ç›¸å…³ä»‹ç»åœ¨è¿™é‡Œï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FAPI%2FServer-sent_events%2FUsing_server-sent_events" target="_blank" title="https://developer.mozilla.org/en-US/docs/Web/API/Server-sent_events/Using_server-sent_events" ref="nofollow noopener noreferrer">developer.mozilla.org/en-US/docs/â€¦</a></p>
<h3 data-id="heading-4">sse ç¤ºä¾‹</h3>
<p><code>MDN</code> çš„ç¤ºä¾‹æ˜¯ä½¿ç”¨ <code>PHP</code> å®ç°çš„ï¼Œä»£ç æ¯”è¾ƒéš¾æ‡‚ï¼Œæˆ‘ä¹Ÿæ²¡æœ‰æ‰¾åˆ°ä¸€ä¸ªå¯ä»¥ç›´æ¥è¿è¡Œçš„æ¡ˆä¾‹ã€‚ä¸ºäº†æ–¹ä¾¿ç†è§£ï¼Œæˆ‘å‚è€ƒ <a href="https://link.juejin.cn?target=https%3A%2F%2Fstackoverflow.com%2Fquestions%2F36249684%2Fsimple-way-to-implement-server-sent-events-in-node-js" target="_blank" title="https://stackoverflow.com/questions/36249684/simple-way-to-implement-server-sent-events-in-node-js" ref="nofollow noopener noreferrer">stackoverflow.com/questions/3â€¦</a> ï¼Œä½¿ç”¨ <code>express</code> å®ç°äº†æµå¼å“åº”ï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> express <span class="hljs-keyword">from</span> <span class="hljs-string">'express'</span>

<span class="hljs-keyword">const</span> app = <span class="hljs-title function_">express</span>()
app.<span class="hljs-title function_">use</span>(express.<span class="hljs-title function_">static</span>(<span class="hljs-string">'public'</span>))

app.<span class="hljs-title function_">get</span>(<span class="hljs-string">'/countdown'</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params">req, res</span>) {
  <span class="hljs-comment">// sse å“åº”å¤´è®¾ç½®</span>
  res.<span class="hljs-title function_">writeHead</span>(<span class="hljs-number">200</span>, {
    <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'text/event-stream'</span>,
    <span class="hljs-string">'Cache-Control'</span>: <span class="hljs-string">'no-cache'</span>,
    <span class="hljs-string">'Connection'</span>: <span class="hljs-string">'keep-alive'</span>,
  })
  <span class="hljs-keyword">let</span> <span class="hljs-attr">timer</span>: <span class="hljs-title class_">NodeJS</span>.<span class="hljs-property">Timeout</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>
  <span class="hljs-keyword">let</span> count = <span class="hljs-number">10</span>
  timer = <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">if</span> (count &gt;= <span class="hljs-number">0</span>) {
      <span class="hljs-comment">// è¿”å›å†…å®¹å¿…é¡»ä¸¥æ ¼éµå®ˆæ ¼å¼</span>
      res.<span class="hljs-title function_">write</span>(<span class="hljs-string">'data: '</span> + count + <span class="hljs-string">'\n\n'</span>)
      count--
      <span class="hljs-keyword">return</span>
    }
    <span class="hljs-comment">// count å°äº0æ—¶ï¼Œåœæ­¢å“åº”</span>
    <span class="hljs-keyword">if</span> (timer) {
      <span class="hljs-built_in">clearInterval</span>(timer)
      timer = <span class="hljs-literal">null</span>
    }
    res.<span class="hljs-title function_">end</span>()
  }, <span class="hljs-number">1000</span>)
})

app.<span class="hljs-title function_">listen</span>(<span class="hljs-number">3000</span>, <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'SSE app listening on port 3000'</span>))
</code></pre>
<p>è¿™æ®µä»£ç ä¼šæ¯éš” 1s åœ¨å“åº”ä¸­å†™å…¥ <code>count</code> ï¼Œç›´åˆ° <code>count &lt; 0</code> æ—¶ç»“æŸå“åº”ã€‚</p>
<p>ä»£ç ä¸­ä»¥ä¸‹å†…å®¹éœ€è¦æ³¨æ„ï¼š</p>
<ul>
<li>
<p>å“åº”å¤´è®¾ç½®ï¼š <code>'Content-Type': 'text/event-stream'</code></p>
</li>
<li>
<p>è¿”å›å†…å®¹å¿…é¡»ä¸¥æ ¼éµå®ˆæ ¼å¼:   <code>data:</code> + ç©ºæ ¼ + å­—ç¬¦ä¸² + ä¸¤ä¸ªæ¢è¡Œç¬¦ (<code>\n\n</code>)</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5558a1fc0ba64cac84ccaa0dbfa54c23~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-q5oOz5YaZ5Liq5bCP546p5oSP:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763787101&amp;x-signature=IK4kgZDZ1c76zt5Td7BJ8aS1sPs%3D" alt="" loading="lazy"/></p>
</li>
</ul>
<h3 data-id="heading-5">AI æµå¼å“åº”</h3>
<p>ä¸Šé¢æˆ‘ä»¬å…ˆå®ç°äº†ä¸€ä¸ªç®€å•çš„æµå¼å“åº”ï¼Œç°åœ¨æˆ‘ä»¬æŠŠ <code>AI</code> ç»“åˆè¿›æ¥</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">const</span> client = <span class="hljs-keyword">new</span> <span class="hljs-title class_">OpenAI</span>({
  <span class="hljs-attr">apiKey</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">OPENAI_API_KEY</span>,
  <span class="hljs-attr">baseURL</span>: <span class="hljs-string">'https://api.deepseek.com'</span>,
})

<span class="hljs-keyword">const</span> app = <span class="hljs-title function_">express</span>()
app.<span class="hljs-title function_">use</span>(express.<span class="hljs-title function_">static</span>(<span class="hljs-string">'public'</span>))

app.<span class="hljs-title function_">get</span>(<span class="hljs-string">'/chat'</span>, <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> (<span class="hljs-params">req, res</span>) {
  res.<span class="hljs-title function_">writeHead</span>(<span class="hljs-number">200</span>, {
    <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'text/event-stream'</span>,
    <span class="hljs-string">'Cache-Control'</span>: <span class="hljs-string">'no-cache'</span>,
    <span class="hljs-string">'Connection'</span>: <span class="hljs-string">'keep-alive'</span>,
  })
  <span class="hljs-keyword">const</span> stream = <span class="hljs-keyword">await</span> client.<span class="hljs-property">chat</span>.<span class="hljs-property">completions</span>.<span class="hljs-title function_">create</span>({
    <span class="hljs-attr">model</span>: <span class="hljs-string">'deepseek-chat'</span>,
    <span class="hljs-attr">messages</span>: [{ <span class="hljs-attr">role</span>: <span class="hljs-string">'user'</span>, <span class="hljs-attr">content</span>: <span class="hljs-string">'ä½ æ˜¯è°ï¼Ÿ'</span> }],
    <span class="hljs-attr">stream</span>: <span class="hljs-literal">true</span>,
  })
  <span class="hljs-keyword">for</span> <span class="hljs-keyword">await</span> (<span class="hljs-keyword">const</span> chunk <span class="hljs-keyword">of</span> stream) {
    <span class="hljs-keyword">const</span> content = chunk.<span class="hljs-property">choices</span>[<span class="hljs-number">0</span>].<span class="hljs-property">delta</span>.<span class="hljs-property">content</span>
    <span class="hljs-comment">// æ³¨æ„ï¼šè¿™é‡Œé€šè¿‡ JSON.stringify æ¥è¿”å› JSON å­—ç¬¦ä¸²ï¼Œæ›´åŠ çµæ´»</span>
    res.<span class="hljs-title function_">write</span>(<span class="hljs-string">`data: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify({ content })}</span>\n\n`</span>)
  }
  res.<span class="hljs-title function_">write</span>(<span class="hljs-string">`data: [DONE]\n\n`</span>)
  res.<span class="hljs-title function_">end</span>()
})

app.<span class="hljs-title function_">listen</span>(<span class="hljs-number">3000</span>, <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`
SSE app listening on port 3000
Open http://localhost:3000/sse-ai.html in your browser to access page.
`</span>))
</code></pre>
<p>æœ‰ä»¥ä¸‹å‡ ç‚¹éœ€è¦æ³¨æ„ï¼š</p>
<ol>
<li>
<p>å¦‚æœä½¿ç”¨çš„æ˜¯ <code>OpenAI</code> å…¼å®¹çš„ <code>api</code> ï¼Œä¾‹å¦‚æˆ‘åœ¨å½“å‰ç¤ºä¾‹ä¸­ä½¿ç”¨çš„ <code>deepseek</code> ï¼Œè¦ä½¿ç”¨ä¹‹å‰çš„ <code>OpenAI</code> è¯·æ±‚æ ‡å‡†ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fopenai%2Fopenai-node%23usage%25E3%2580%2582%25E6%2596%2587%25E6%25A1%25A3%25E4%25B8%25AD%25E6%259C%2589%25E6%258F%2590%25E5%2588%25B0%25EF%25BC%258C%25E4%25BD%2586%25E6%2598%25AF%25E6%2588%2591%25E4%25B8%2580%25E5%25BC%2580%25E5%25A7%258B%25E6%25B2%25A1%25E6%259C%2589%25E4%25BB%2594%25E7%25BB%2586%25E7%259C%258B%25E6%2596%2587%25E6%25A1%25A3%25EF%25BC%258C%25E5%259B%25B0%25E6%2589%25B0%25E4%25BA%2586%25E5%25BE%2588%25E4%25B9%2585%25E3%2580%2582" target="_blank" title="https://github.com/openai/openai-node#usage%E3%80%82%E6%96%87%E6%A1%A3%E4%B8%AD%E6%9C%89%E6%8F%90%E5%88%B0%EF%BC%8C%E4%BD%86%E6%98%AF%E6%88%91%E4%B8%80%E5%BC%80%E5%A7%8B%E6%B2%A1%E6%9C%89%E4%BB%94%E7%BB%86%E7%9C%8B%E6%96%87%E6%A1%A3%EF%BC%8C%E5%9B%B0%E6%89%B0%E4%BA%86%E5%BE%88%E4%B9%85%E3%80%82" ref="nofollow noopener noreferrer">github.com/openai/openâ€¦</a> <strong>ç”¨æ³•å’Œä¼ å‚éƒ½ä¸ä¸€æ ·</strong>ï¼Œéœ€è¦ç‰¹åˆ«ç•™æ„</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/56cc3dc1470a432db0d816eed9e9af0e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-q5oOz5YaZ5Liq5bCP546p5oSP:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763787101&amp;x-signature=J4uJ%2FQ%2FUNuJeC9VkJUXy0AykAyI%3D" alt="" loading="lazy"/></p>
</li>
<li>
<p>è¿”å›å†…å®¹è¦é€šè¿‡ <code>JSON.stringify</code> æ¥å¤„ç†ï¼Œæ–¹ä¾¿æˆ‘ä»¬ç»™å‰ç«¯è¿”å›æ›´å¤šå­—æ®µ</p>
</li>
<li>
<p>ç»“æŸæ—¶è¿”å› <code>res.write(</code>data: [DONE]\n\n<code>)</code> ï¼Œæ–¹ä¾¿å‰ç«¯ä½¿ç”¨ <code>EventSource</code> æ—¶ç»ˆæ­¢è¯·æ±‚</p>
</li>
</ol>
<h2 data-id="heading-6">å‰ç«¯å¤„ç†æµå¼å“åº”</h2>
<h3 data-id="heading-7">EventSource</h3>
<p>å‰ç«¯å¯ä»¥ä½¿ç”¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FAPI%2FServer-sent_events%2FUsing_server-sent_events" target="_blank" title="https://developer.mozilla.org/en-US/docs/Web/API/Server-sent_events/Using_server-sent_events" ref="nofollow noopener noreferrer"><code>EventSource</code></a> æ¥å¤„ç† <code>sse</code> å“åº”çš„å†…å®¹ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">const</span> stop = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'stop'</span>)
<span class="hljs-keyword">const</span> start = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'start'</span>)
<span class="hljs-keyword">let</span> eventSource = <span class="hljs-literal">null</span>
start.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> eventSource = <span class="hljs-keyword">new</span> <span class="hljs-title class_">EventSource</span>(<span class="hljs-string">'/chat'</span>)
  eventSource.<span class="hljs-property">onmessage</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">event</span>) {
    <span class="hljs-comment">// è¦æ‰‹åŠ¨å…³é—­ï¼Œå¦åˆ™ä¼šä¸€ç›´è¯·æ±‚æœåŠ¡å™¨</span>
    <span class="hljs-keyword">if</span> (event.<span class="hljs-property">data</span> === <span class="hljs-string">'[DONE]'</span>) {
      eventSource.<span class="hljs-title function_">close</span>()
      <span class="hljs-keyword">return</span>
    }
    <span class="hljs-keyword">const</span> json = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(event.<span class="hljs-property">data</span>)
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'log'</span>).<span class="hljs-property">innerHTML</span> += json.<span class="hljs-property">content</span>
  }
})
stop.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
  eventSource.<span class="hljs-title function_">close</span>()
})
</code></pre>
<p>å®Œæ•´ä»£ç ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fwangkaiwd%2Fai-stream-response%2Fblob%2F7e5d1968c2018e5b6632d6eb5631d79af984e7b0%2Fapps%2Fexpress%2Fpublic%2Fsse-ai.html" target="_blank" title="https://github.com/wangkaiwd/ai-stream-response/blob/7e5d1968c2018e5b6632d6eb5631d79af984e7b0/apps/express/public/sse-ai.html" ref="nofollow noopener noreferrer">github.com/wangkaiwd/aâ€¦</a></p>
<p><strong><code>EventSource</code> æœ‰ä¸€ä¸ªç»†èŠ‚éœ€è¦æ³¨æ„</strong>ï¼š</p>
<p>å¦‚æœæ²¡æœ‰è°ƒç”¨ <code>eventSource.close()</code> æ–¹æ³•ï¼Œé‚£ä¹ˆ<strong>è¯·æ±‚ä¼šä¸€ç›´ä¸åœçš„å‘èµ·</strong>ã€‚æ‰€ä»¥æˆ‘<strong>åœ¨æœåŠ¡ç«¯ç‰¹æ„åœ¨å“åº”ç»“æŸæ—¶è¿”å› <code>data: [DONE]\n\n</code> æ¥è®©å‰ç«¯çŸ¥é“ä»€ä¹ˆæ—¶å€™å…³é—­ <code>eventSource</code></strong></p>
<h3 data-id="heading-8">fetch</h3>
<p>å‰é¢æˆ‘ä»¬ä»‹ç»äº†é€šè¿‡ <code>EventSource</code> æ¥å¤„ç†æœåŠ¡ç«¯çš„æµå¼å“åº”ï¼Œä½†å…¶å®å®ƒå­˜åœ¨å¾ˆå¤šé—®é¢˜ï¼š</p>
<ul>
<li>åªèƒ½å‘èµ· <code>get</code> è¯·æ±‚</li>
<li>è¯·æ±‚å‚æ•°åªèƒ½åœ¨ <code>url</code> ä¸­ä¼ é€’ï¼Œä½†æ˜¯ä¸€èˆ¬è¦ä¼ å…¥ç»™ <code>AI</code> çš„æç¤ºè¯é•¿åº¦å¯èƒ½è¾ƒå¤§ï¼Œå®¹æ˜“è¶…è¿‡ <code>url</code> é•¿åº¦çš„æœ€å¤§é™åˆ¶</li>
<li>æ— æ³•è‡ªå®šä¹‰è¯·æ±‚å¤´æ¥è®¾ç½® <code>Authorization</code> ï¼Œç»™æœåŠ¡ç«¯ä¼ é€’ç”¨æˆ· <code>token</code></li>
</ul>
<p>åŸºäºä¸Šè¿°çš„è¿™äº›åŸå› ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šä½¿ç”¨ <code>fetch</code> æ–¹æ³•æ¥å¤„ç†æœåŠ¡ç«¯çš„æµå¼å“åº”ã€‚<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FAzure%2Ffetch-event-source" target="_blank" title="https://github.com/Azure/fetch-event-source" ref="nofollow noopener noreferrer">github.com/Azure/fetchâ€¦</a> å°±æ˜¯åŸºäº <code>fetch</code> å®ç°çš„ç”¨æ¥å‘èµ· <code>EventSource</code> è¯·æ±‚çš„å¼€æºåº“ï¼Œä¸‹é¢æ˜¯å®ƒçš„ä½¿ç”¨ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx">&lt;script type=<span class="hljs-string">"module"</span>&gt;
  <span class="hljs-keyword">import</span> { fetchEventSource } <span class="hljs-keyword">from</span> <span class="hljs-string">"https://esm.sh/@microsoft/fetch-event-source"</span>;

  <span class="hljs-keyword">const</span> stop = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">"stop"</span>);
  <span class="hljs-keyword">const</span> start = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">"start"</span>);
  <span class="hljs-keyword">const</span> controller = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AbortController</span>();
  start.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"click"</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">// å‘èµ·postè¯·æ±‚</span>
    <span class="hljs-title function_">fetchEventSource</span>(<span class="hljs-string">"/chat"</span>, {
      <span class="hljs-attr">signal</span>: controller.<span class="hljs-property">signal</span>,
      <span class="hljs-attr">method</span>: <span class="hljs-string">"POST"</span>,
      <span class="hljs-comment">// ä¸€ç‚¹ç‚¹å¤„ç†æœåŠ¡ç«¯å“åº”</span>
      <span class="hljs-attr">onmessage</span>: <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
        <span class="hljs-keyword">const</span> data = event.<span class="hljs-property">data</span>;
        <span class="hljs-keyword">if</span> (data === <span class="hljs-string">"[DONE]"</span>) {
          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"done"</span>);
          <span class="hljs-keyword">return</span>;
        }
        <span class="hljs-keyword">const</span> json = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(data);
        <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">"log"</span>).<span class="hljs-property">innerHTML</span> += json.<span class="hljs-property">content</span>;
      },
    });
  });
  stop.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"click"</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
    controller.<span class="hljs-title function_">abort</span>();
  });
&lt;/script&gt;
</code></pre>
<p>å®Œæ•´ä»£ç ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fwangkaiwd%2Fai-stream-response%2Fblob%2Fmain%2Fapps%2Fexpress%2Fpublic%2Ffetch.html" target="_blank" title="https://github.com/wangkaiwd/ai-stream-response/blob/main/apps/express/public/fetch.html" ref="nofollow noopener noreferrer">github.com/wangkaiwd/aâ€¦</a></p>
<p>è¿™é‡Œä½¿ç”¨çš„ <code>POST</code> è¯·æ±‚ï¼Œæˆ‘æŠŠæœåŠ¡ç«¯çš„ç¤ºä¾‹æ”¹ä¸ºäº† <code>all</code> æ–¹æ³•æ¥æ¥æ”¶è¯·æ±‚ï¼Œå¯ä»¥åŒæ—¶å¤„ç† <code>GET</code> å’Œ <code>POST</code> è¯·æ±‚</p>
<p>æˆ‘ä»¬ä¹Ÿå¯ä»¥è‡ªå·±é€šè¿‡ <code>fetch</code> è¯·æ±‚æ¥çœ‹çœ‹å…·ä½“çš„å“åº”å†…å®¹</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">"/chat"</span>, {
  <span class="hljs-attr">signal</span>: controller.<span class="hljs-property">signal</span>,
  <span class="hljs-attr">method</span>: <span class="hljs-string">"POST"</span>,
});
</code></pre>
<p>è¿™é‡Œçš„ <code>response.body</code> å°±æ˜¯ä¸€ä¸ª <code>ReadableStream</code> (ps: å‰é¢çš„ç« èŠ‚æœ‰ä»‹ç»è¿‡<code>ReadableStream</code> ï¼Œå¿˜è®°çš„åŒå­¦å¯ä»¥å†å›å»çœ‹ä¸€ä¸‹ )ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥é€šè¿‡ <code>for await ... of</code> æˆ–è€… <code>getReader</code> æ–¹æ³•æ¥æ‹¿åˆ° <code>ReadableStream</code> ä¸­çš„æ•°æ®ï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">const</span> textDecoder = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TextDecoder</span>();
<span class="hljs-comment">// response.body æ˜¯å¯è¯»æµ</span>
<span class="hljs-keyword">for</span> <span class="hljs-keyword">await</span> (<span class="hljs-keyword">const</span> chunk <span class="hljs-keyword">of</span> response.<span class="hljs-property">body</span>) {
  <span class="hljs-comment">// chunk æ˜¯ Uint8Array ï¼Œé€šè¿‡ TextDecoder è½¬æ¢ä¸ºå­—ç¬¦ä¸²</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'chunk'</span>, chunk)
  <span class="hljs-keyword">const</span> text = textDecoder.<span class="hljs-title function_">decode</span>(chunk);
  <span class="hljs-keyword">if</span> (text === <span class="hljs-string">"[DONE]"</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"done"</span>);
    <span class="hljs-keyword">return</span>;
  }
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'text'</span>, text)
}

<span class="hljs-comment">// ä½¿ç”¨ getReader æ–¹æ³•è·å–æ•°æ®</span>
<span class="hljs-comment">//   const reader = response.body.getReader();</span>
<span class="hljs-comment">//   while (true) {</span>
<span class="hljs-comment">//     const { done, value } = await reader.read();</span>
<span class="hljs-comment">//     if (done) {</span>
<span class="hljs-comment">//       break;</span>
<span class="hljs-comment">//     }</span>
<span class="hljs-comment">//     const text = textDecoder.decode(value);</span>
<span class="hljs-comment">//     if (text === "[DONE]") {</span>
<span class="hljs-comment">//       console.log("done");</span>
<span class="hljs-comment">//       return;</span>
<span class="hljs-comment">//     }</span>
<span class="hljs-comment">//     console.log('text', text)</span>
<span class="hljs-comment">//   }</span>
</code></pre>
<p>æœ€ç»ˆç»“æœå¦‚ä¸‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a730cba8404d47488513f9f36e69d310~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-q5oOz5YaZ5Liq5bCP546p5oSP:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763787101&amp;x-signature=WwvpHp%2BlYYENCzkxPLza2KVx9LA%3D" alt="" loading="lazy"/></p>
<p>æˆ‘ä»¬æ‹¿åˆ°çš„æ˜¯æœåŠ¡ç«¯è¿”å›ç¬¦åˆ <code>SSE</code> è§„èŒƒçš„å­—ç¬¦ä¸²ï¼Œå°†å­—ç¬¦æ ¹æ®è§„åˆ™è§£æåï¼Œå°±èƒ½æ‹¿åˆ°æœ€ç»ˆçš„ç»“æœäº†ã€‚<strong>è¿™å…¶å®å°±æ˜¯ <code>fetch-event-source</code> å¸®æˆ‘ä»¬å®ç°çš„é€»è¾‘</strong></p>
<h3 data-id="heading-9">è¸©å‘</h3>
<p>æˆ‘åœ¨ä½¿ç”¨ <code>fetch-event-source</code> çš„è¿‡ç¨‹ä¸­å‘ç°äº†å¦‚ä¸‹é—®é¢˜ï¼š</p>
<p><strong>å¦‚æœæœåŠ¡ç«¯è¿”å›çš„å†…å®¹åªåŒ…å« <code>\n</code> ï¼Œé‚£ä¹ˆå‰ç«¯æ¥æ”¶åˆ°çš„å†…å®¹ä¸ºç©ºå­—ç¬¦ã€‚åœ¨ <code>markdown</code> æ¸²æŸ“çš„åœºæ™¯ä¸‹ï¼Œä¼šå¯¼è‡´æ ¼å¼å®Œå…¨é”™ä¹±ã€‚</strong> ä¸‹é¢æ˜¯ä¼ªä»£ç ï¼Œæ–¹ä¾¿ç†è§£</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// æœåŠ¡ç«¯å¦‚æœè¿”å›çš„å†…å®¹å¦‚æœåªåŒ…å« \n</span>
res.<span class="hljs-title function_">write</span>(<span class="hljs-string">'data: '</span> + <span class="hljs-string">'\n\n'</span> + <span class="hljs-string">'\n\n'</span>)

<span class="hljs-comment">// å‰ç«¯æ‹¿åˆ°çš„å†…å®¹ä¸ºç©ºå­—ç¬¦ä¸²</span>
<span class="hljs-attr">onmessage</span>: <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> data = event.<span class="hljs-property">data</span>;
  <span class="hljs-comment">// true</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data === <span class="hljs-string">''</span>)
}
</code></pre>
<p>å®˜æ–¹ä¹Ÿæœ‰ç›¸å…³çš„ <code>issue</code> ä¸€ç›´æ²¡æœ‰ä¿®å¤ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FAzure%2Ffetch-event-source%2Fissues%2F50" target="_blank" title="https://github.com/Azure/fetch-event-source/issues/50" ref="nofollow noopener noreferrer">github.com/Azure/fetchâ€¦</a></p>
<p>æ‰€ä»¥åœ¨ä½¿ç”¨ <code>fetch-event-source</code> æ—¶å¯ä»¥é€šè¿‡ <code>JSON.stringify</code> æ¥ä¼ å…¥ <code>json</code> å­—ç¬¦ä¸²ï¼Œé˜²æ­¢å‰ç«¯æ¥æ”¶åˆ°ç©ºå­—ç¬¦ä¸²</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">const</span> content = chunk.<span class="hljs-property">choices</span>[<span class="hljs-number">0</span>].<span class="hljs-property">delta</span>.<span class="hljs-property">content</span>
<span class="hljs-comment">// JSON.stringify é¿å…äº†è¿”å›å†…å®¹åªæœ‰ `\n` çš„æƒ…å†µ</span>
res.<span class="hljs-title function_">write</span>(<span class="hljs-string">`data: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify({ content })}</span>\n\n`</span>)
</code></pre>
<h2 data-id="heading-10">ç»“è¯­</h2>
<p>åœ¨ <code>AI</code> å‡ºç°ä¹‹å‰ï¼Œè¿™äº›çŸ¥è¯†å¾ˆå°‘æœ‰ä½¿ç”¨åœºæ™¯ã€‚ä½†éšç€ <code>AI</code> çš„å¿«é€Ÿå‘å±•ï¼Œè¿™äº›ä»£ç ä¸æ–­åœ°å‡ºç°åœ¨æˆ‘çœ¼å‰ï¼Œä¹Ÿè®©æˆ‘æœ‰äº†æ›´å¤šå®è·µçš„æœºä¼šã€‚è¿™ç¯‡æ–‡ç« æ˜¯æˆ‘åœ¨å®è·µä¸­çš„ä¸€äº›æ²‰æ·€å’Œæ€»ç»“ï¼Œå¸Œæœ›èƒ½å¸®åˆ°ä½ ã€‚</p>
<h2 data-id="heading-11">å‚è€ƒ</h2>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FJavaScript%2FReference%2FIteration_protocols%23the_iterator_protocol" target="_blank" title="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Iteration_protocols#the_iterator_protocol" ref="nofollow noopener noreferrer">developer.mozilla.org/en-US/docs/â€¦</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FJavaScript%2FReference%2FStatements%2Ffor...of" target="_blank" title="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/for...of" ref="nofollow noopener noreferrer">developer.mozilla.org/en-US/docs/â€¦</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FAPI%2FReadableStream" target="_blank" title="https://developer.mozilla.org/en-US/docs/Web/API/ReadableStream" ref="nofollow noopener noreferrer">developer.mozilla.org/en-US/docs/â€¦</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fmdn%2Fdom-examples%2Fblob%2Fmain%2Fstreams%2Fsimple-random-stream%2Findex.html" target="_blank" title="https://github.com/mdn/dom-examples/blob/main/streams/simple-random-stream/index.html" ref="nofollow noopener noreferrer">github.com/mdn/dom-exaâ€¦</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FAPI%2FEventSource" target="_blank" title="https://developer.mozilla.org/en-US/docs/Web/API/EventSource" ref="nofollow noopener noreferrer">developer.mozilla.org/en-US/docs/â€¦</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftpiros.dev%2Fblog%2Fstreaming-llm-responses-a-deep-dive%2F" target="_blank" title="https://tpiros.dev/blog/streaming-llm-responses-a-deep-dive/" ref="nofollow noopener noreferrer">tpiros.dev/blog/streamâ€¦</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è·Ÿç€ECMAScript è§„èŒƒï¼Œæ‰‹å†™æ•°ç»„æ–¹æ³•ä¹‹map]]></title>    <link>https://juejin.cn/post/7572455881030025225</link>    <guid>https://juejin.cn/post/7572455881030025225</guid>    <pubDate>2025-11-15T05:55:16.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572455881030025225" data-draft-id="7572781559749820443" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è·Ÿç€ECMAScript è§„èŒƒï¼Œæ‰‹å†™æ•°ç»„æ–¹æ³•ä¹‹map"/> <meta itemprop="keywords" content="JavaScript"/> <meta itemprop="datePublished" content="2025-11-15T05:55:16.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="éé‡‘é“åŒ "/> <meta itemprop="url" content="https://juejin.cn/user/4097251296420188"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è·Ÿç€ECMAScript è§„èŒƒï¼Œæ‰‹å†™æ•°ç»„æ–¹æ³•ä¹‹map
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4097251296420188/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    éé‡‘é“åŒ 
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-15T05:55:16.000Z" title="Sat Nov 15 2025 05:55:16 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;color:rgba(46,36,36,.87);overflow-x:hidden}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{margin-bottom:5px;font-size:30px;font-weight:500}.markdown-body h1:before{content:"#";margin-right:10px;color:#1976d2}.markdown-body h2{font-size:28px;font-weight:400;border-left:5px solid #454545;margin-top:20px;padding-left:10px;transition:all .3s ease-in-out}.markdown-body h2:hover{border-color:#1976d2}.markdown-body h3{font-size:24px;font-weight:400;margin-top:15px;padding-bottom:0}.markdown-body h4{font-size:20px;font-weight:500}.markdown-body h5{font-size:16px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body h2:first-letter,.markdown-body h3:first-letter,.markdown-body p:first-letter{text-transform:capitalize}.markdown-body em{text-emphasis:dot;text-emphasis-position:under}.markdown-body img{display:block;margin:0 auto!important;max-width:100%;border-radius:2px;box-shadow:0 2px 4px -1px rgba(0,0,0,.2),0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12)!important}.markdown-body hr{position:relative;width:98%;height:1px;border:none;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,#ddd,#999,#ddd);overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background:#fff;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center}.markdown-body code{font-weight:900;word-break:break-word;border-radius:2px;overflow-x:auto;font-size:.87em;padding:.065em .4em;background-color:#fbe5e1;color:#c0341d}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;border-radius:0 4px}.markdown-body pre&gt;code{font-weight:400;font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{margin:0 4px;text-decoration:none;color:#027fff;transition:all .3s ease-in-out;padding-bottom:4px;border-bottom:2px solid transparent}.markdown-body a:after{content:"";display:inline-block;width:18px;height:18px;margin-left:4px;vertical-align:middle;background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMiIgaGVpZ2h0PSIyMiI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIiBzdHJva2U9IiMwMjdGRkYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCI+PHBhdGggZD0iTTkuODE1IDYuNDQ4bDEuOTM2LTEuOTM2YzEuMzM3LTEuMzM2IDMuNTgtMS4yNTkgNS4wMTMuMTczIDEuNDMyIDEuNDMyIDEuNTEgMy42NzYuMTczIDUuMDEzbC0xLjQ1MiAxLjQ1Mi0uOTY4Ljk2OGMtMS4zMzcgMS4zMzYtMy41ODEgMS4yNTktNS4wMTMtLjE3MyIvPjxwYXRoIGQ9Ik0xMS4yNjcgMTUuMzY3bC0xLjkzNiAxLjkzNmMtMS4zMzYgMS4zMzctMy41OCAxLjI2LTUuMDEyLS4xNzMtMS40MzItMS40MzItMS41MS0zLjY3Ni0uMTczLTUuMDEybDEuNDUyLTEuNDUyLjk2OC0uOTY4YzEuMzM2LTEuMzM3IDMuNTgtMS4yNiA1LjAxMi4xNzMiLz48L2c+PC9zdmc+);background-size:cover;background-repeat:no-repeat}.markdown-body a:hover{border-color:#027fff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body a.footnote-backref:after,.markdown-body a.footnote-ref:after,.markdown-body sup a:after{display:none!important}.markdown-body table{margin:0 auto 10px;font-size:12px;width:auto;max-width:100%;overflow:auto;border:2px solid #c6c6c6}.markdown-body table img{box-shadow:none!important}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body del{color:rgba(0,0,0,.6)}.markdown-body blockquote{position:relative;color:#666;padding:5px 23px 1px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:hsla(0,0%,78.4%,.12);transition:all .2s ease-in-out}.markdown-body blockquote:hover{border-color:#1976d2}.markdown-body blockquote:after,.markdown-body blockquote:before{position:absolute;font-size:24px;font-weight:800;line-height:24px;color:#cbcbcb;opacity:.6}.markdown-body blockquote:before{content:"â€œ";top:4px;left:6px}.markdown-body blockquote:after{content:"â€";right:8px;bottom:-8px}.markdown-body blockquote&gt;p,.markdown-body blockquote blockquote{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body details{outline:none;border:none;border-left:4px solid #1976d2;padding-left:10px;margin-left:4px}.markdown-body details summary{cursor:pointer;border:none;outline:none;background:#fff;margin:0 -17px}.markdown-body details summary:hover::-webkit-details-marker{color:#1976d2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>ä¸æ­¢äºä¼šç”¨ï¼šè·Ÿç€ ECMAScript è§„èŒƒï¼Œæ‰‹å†™Â <code>map</code></strong></h2>
<p>å¼€å®—æ˜ä¹‰ï¼šä»¥ä¼ å…¥çš„æ•°ç»„ï¼Œå›è°ƒå‡½æ•° å’Œ <code>thisArg</code> åŠ å·¥æˆæ–°æ•°ç»„ã€‚</p>
<p><code>Array.prototype.myMap</code> æ¥å—ä¸€ä¸ªå¯è°ƒç”¨çš„ callback å’Œå¯é€‰çš„ thisArgï¼ŒæŒ‰ä» 0 åˆ° ToLength(O.length)-1 çš„ç´¢å¼•ä¾æ¬¡å¯¹ä¼ å…¥çš„ï¼ˆç±»ï¼‰æ•°ç»„å…ƒç´ è°ƒç”¨ callbackï¼ˆå‚æ•°ä¸º currentValue, index, åŸå¯¹è±¡ï¼‰ï¼ŒæŠŠæ¯æ¬¡è°ƒç”¨çš„è¿”å›å€¼æ”¾åˆ°åŒä¸€ç´¢å¼•çš„æ–°æ•°ç»„å¹¶è¿”å›è¯¥æ–°æ•°ç»„ï¼›å›è°ƒä¸ä¼šæ”¹å˜åŸæ•°ç»„ï¼Œä¹Ÿä¸ä¼šä¸ºåŸæ•°ç»„ä¸­â€œç©ºä½â€ï¼ˆholeï¼‰åˆ›å»ºå€¼ã€‚</p>
<h3 data-id="heading-1">ä¸»å¹²</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-title class_">Array</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">myMap</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">callback</span>) {
    <span class="hljs-comment">// åˆ›å»ºç©ºæ•°ç»„</span>
  <span class="hljs-keyword">const</span> result = [];

  <span class="hljs-comment">// thiså³ä¼ å…¥æ•°ç»„</span>
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-variable language_">this</span>.<span class="hljs-property">length</span>; i++) {
    result.<span class="hljs-title function_">push</span>(<span class="hljs-title function_">callback</span>(<span class="hljs-variable language_">this</span>[i], i, <span class="hljs-variable language_">this</span>));
  }

  <span class="hljs-keyword">return</span> result;
};


</code></pre>
<h3 data-id="heading-2">æ ‘æ</h3>
<p>è€ƒè™‘åˆ°è¾¹ç•Œçš„å¤„ç†</p>
<h4 data-id="heading-3">å¤„ç†Â <code>thisArg</code></h4>
<p>å¦‚æœæƒ³åœ¨å›è°ƒå‡½æ•°é‡Œä½¿ç”¨ä¸€ä¸ªç‰¹å®šçš„Â <code>this</code>Â ä¸Šä¸‹æ–‡</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-title class_">Array</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">myMap</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">callback, thisArg</span>) {
  <span class="hljs-keyword">const</span> result = [];
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-variable language_">this</span>.<span class="hljs-property">length</span>; i++) {
    result.<span class="hljs-title function_">push</span>(callback.<span class="hljs-title function_">call</span>(thisArg, <span class="hljs-variable language_">this</span>[i], i, <span class="hljs-variable language_">this</span>));
  }
  <span class="hljs-keyword">return</span> result;
};

</code></pre>
<p>å˜åŒ–ï¼š</p>
<ol>
<li>åœ¨å‡½æ•°ç­¾åä¸­æ¥æ”¶Â <code>thisArg</code>Â å‚æ•°ã€‚</li>
<li>è°ƒç”¨å›è°ƒæ—¶ï¼Œä¸ç”¨Â <code>callback()</code>ï¼Œè€Œæ˜¯ç”¨Â <code>callback.call(thisArg)</code>Â æ¥æ‰‹åŠ¨æŒ‡å®šÂ <code>this</code>ã€‚</li>
</ol>
<h4 data-id="heading-4">å¤„ç†ç¨€ç–æ•°ç»„</h4>
<p>åŸç”Ÿçš„Â <code>map</code>Â ä¼šè¿”å›Â <code>[2, &lt;1 empty item&gt;, 4]</code>ï¼Œå®ƒä¼š<strong>è·³è¿‡ç©ºä½</strong>ã€‚ä¸»å¹²ç‰ˆæœ¬æ²¡æœ‰è¿™ä¸ªèƒ½åŠ›ï¼Œå®ƒä¼šæŠŠç©ºä½å½“æˆÂ <code>undefined</code>Â æ¥å¤„ç†ã€‚</p>
<p>ç›®æ ‡ï¼š <strong>è¯†åˆ«å¹¶è·³è¿‡ç©ºä½</strong></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-title class_">Array</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">customMap</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">callback, thisArg</span>) {
  <span class="hljs-keyword">const</span> result = [];
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-variable language_">this</span>.<span class="hljs-property">length</span>; i++) {
    <span class="hljs-keyword">if</span> (i <span class="hljs-keyword">in</span> <span class="hljs-variable language_">this</span>) {
      result.<span class="hljs-title function_">push</span>(callback.<span class="hljs-title function_">call</span>(thisArg, <span class="hljs-variable language_">this</span>[i], i, <span class="hljs-variable language_">this</span>));
    }
  }
  <span class="hljs-keyword">return</span> result;
};

</code></pre>
<p>å˜åŒ–ï¼š</p>
<ol>
<li>åœ¨å¾ªç¯ä¸­ï¼Œè®¿é—®å…ƒç´ å‰ï¼Œå…ˆæ£€æŸ¥è¿™ä¸ªç´¢å¼•ä½ç½®ä¸Šæ˜¯å¦çœŸçš„æœ‰å€¼ã€‚</li>
<li>JavaScript çš„Â <code>in</code>Â æ“ä½œç¬¦ï¼š<code>if (i in this)</code>ã€‚</li>
</ol>
<h4 data-id="heading-5">é˜²å¾¡æ€§ç¼–ç¨‹</h4>
<ul>
<li><code>callback</code>Â ä¸æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Ÿ</li>
<li>åœ¨éæ•°ç»„ä¸Šè°ƒç”¨ï¼ˆæ¯”å¦‚Â <code>document.getElementsByTagName('div')</code>Â è¿™ç§ç±»æ•°ç»„ï¼‰ï¼Ÿ</li>
<li><code>this</code>Â æ˜¯Â <code>null</code>Â æˆ–Â <code>undefined</code>ï¼Ÿ</li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-title class_">Array</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">customMap</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">callback, thisArg</span>) {
    <span class="hljs-comment">// ä¿®å‰ª1ï¼šæ£€æŸ¥ callback</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> callback !== <span class="hljs-string">'function'</span>) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TypeError</span>(<span class="hljs-string">'callback is not a function'</span>);
  }
    <span class="hljs-comment">// ä¿®å‰ª2ï¼š åŒ…è£…ç±»</span>
  <span class="hljs-keyword">const</span> O = <span class="hljs-title class_">Object</span>(<span class="hljs-variable language_">this</span>);
    <span class="hljs-comment">// ä¿®å‰ª3ï¼š å®‰å…¨é•¿åº¦</span>
  <span class="hljs-keyword">const</span> len = O.<span class="hljs-property">length</span> &gt;&gt;&gt; <span class="hljs-number">0</span>;

  <span class="hljs-keyword">const</span> result = [];
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; len; i++) {
    <span class="hljs-keyword">if</span> (i <span class="hljs-keyword">in</span> O) {
      result.<span class="hljs-title function_">push</span>(callback.<span class="hljs-title function_">call</span>(thisArg, O[i], i, O));
    }
  }
  <span class="hljs-keyword">return</span> result;
}

</code></pre>
<p>ä¿®å‰ªï¼š</p>
<ol>
<li><strong>æ£€æŸ¥Â <code>callback</code></strong>ï¼šåœ¨å‡½æ•°å¼€å¤´Â <code>if (typeof callback !== 'function')</code>ï¼Œå¦‚æœä¸æ˜¯å‡½æ•°å°±ç«‹åˆ»æŠ¥é”™ã€‚</li>
<li><strong>è½¬æ¢Â <code>this</code></strong>ï¼šä½¿ç”¨Â <code>const O = Object(this)</code>Â ç¡®ä¿Â <code>this</code>Â æ€»æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œè¿™æ ·å³ä½¿åœ¨å­—ç¬¦ä¸²Â <code>hello</code>Â ä¸Šè°ƒç”¨ï¼Œä¹Ÿèƒ½æŠŠå®ƒå˜æˆä¸€ä¸ªç±»æ•°ç»„å¯¹è±¡Â <code>{0: 'h', 1: 'e', ...}</code>Â æ¥å¤„ç†ã€‚</li>
<li><strong>å®‰å…¨è·å–é•¿åº¦</strong>ï¼šä½¿ç”¨Â <code>const len = O.length &gt;&gt;&gt; 0</code>Â ç¡®ä¿é•¿åº¦æ€»æ˜¯ä¸€ä¸ªéè´Ÿæ•´æ•°ï¼Œé¿å…è´Ÿæ•°æˆ–å¥‡æ€ªå€¼å¯¼è‡´å¾ªç¯å‡ºé”™ã€‚</li>
</ol>
<h4 data-id="heading-6">æ€§èƒ½ä¼˜åŒ–</h4>
<ul>
<li><code>result.push()</code>Â å¯èƒ½ä¼šæœ‰æ€§èƒ½å¼€é”€ï¼Œå¹¶ä¸”æ— æ³•åˆ›å»ºç¨€ç–æ•°ç»„ã€‚</li>
<li>è§„èŒƒä¸­åˆ›å»ºæ–°æ•°ç»„çš„æ–¹å¼æ˜¯Â <code>ArraySpeciesCreate</code>ï¼Œå®ƒæ›´å¤æ‚ä½†ä¹Ÿæ›´ç²¾ç¡®ã€‚</li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-title class_">Array</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">myMap</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">callback, thisArg</span>) {
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> callback !== <span class="hljs-string">'function'</span>) {
   <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TypeError</span>(<span class="hljs-string">'callback is not a function'</span>);
  }
  <span class="hljs-keyword">const</span> O = <span class="hljs-title class_">Object</span>(<span class="hljs-variable language_">this</span>);
  <span class="hljs-keyword">const</span> len = O.<span class="hljs-property">length</span> &gt;&gt;&gt; <span class="hljs-number">0</span>;

  <span class="hljs-comment">// ä¿®å‰ªï¼šé¢„åˆ†é…æ–°æ•°ç»„</span>
  <span class="hljs-keyword">const</span> A = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>(len);
  <span class="hljs-keyword">let</span> k = <span class="hljs-number">0</span>;

  <span class="hljs-comment">// ä¿®å‰ªï¼šä½¿ç”¨ while å¾ªç¯</span>
  <span class="hljs-keyword">while</span> (k &lt; len) {
    <span class="hljs-keyword">if</span> (k <span class="hljs-keyword">in</span> O) {
      <span class="hljs-keyword">const</span> kValue = O[k];
      <span class="hljs-keyword">const</span> mappedValue = callback.<span class="hljs-title function_">call</span>(thisArg, kValue, k, O);
      <span class="hljs-comment">// ä¿®å‰ªï¼šç›´æ¥èµ‹å€¼</span>
      A[k] = mappedValue;
    }
    k++;
  }
  <span class="hljs-keyword">return</span> A;
};

<span class="hljs-comment">// 1. åŸºæœ¬åŠŸèƒ½æµ‹è¯•</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>].<span class="hljs-title function_">myMap</span>(<span class="hljs-function"><span class="hljs-params">x</span> =&gt;</span> x * <span class="hljs-number">2</span>)); <span class="hljs-comment">// [2, 4, 6]</span>

<span class="hljs-comment">// 2. ç¨€ç–æ•°ç»„æµ‹è¯•</span>
<span class="hljs-keyword">const</span> sparse = [<span class="hljs-number">1</span>, , <span class="hljs-number">3</span>];
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(sparse.<span class="hljs-title function_">myMap</span>(<span class="hljs-function"><span class="hljs-params">x</span> =&gt;</span> x + <span class="hljs-number">1</span>)); <span class="hljs-comment">// [2, &lt;1 empty item&gt;, 4] (æ­£ç¡®è·³è¿‡ç©ºä½)</span>

<span class="hljs-comment">// 3. thisArg æµ‹è¯•</span>
<span class="hljs-keyword">const</span> multiplier = { <span class="hljs-attr">factor</span>: <span class="hljs-number">10</span> };
<span class="hljs-keyword">function</span> <span class="hljs-title function_">multiply</span>(<span class="hljs-params">item</span>) {
  <span class="hljs-keyword">return</span> item * <span class="hljs-variable language_">this</span>.<span class="hljs-property">factor</span>;
}
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>].<span class="hljs-title function_">myMap</span>(multiply, multiplier)); <span class="hljs-comment">// [10, 20, 30]</span>

<span class="hljs-comment">// 4. ç±»æ•°ç»„å¯¹è±¡æµ‹è¯•</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">f</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> <span class="hljs-title class_">Array</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">myMap</span>.<span class="hljs-title function_">call</span>(<span class="hljs-variable language_">arguments</span>, <span class="hljs-function"><span class="hljs-params">x</span> =&gt;</span> x + <span class="hljs-number">1</span>);
}
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">f</span>(<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>)); <span class="hljs-comment">// [5, 6, 7]</span>

<span class="hljs-comment">// 5. å­—ç¬¦ä¸²æµ‹è¯•</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Array</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">myMap</span>.<span class="hljs-title function_">call</span>(<span class="hljs-string">'abc'</span>, <span class="hljs-function"><span class="hljs-params">char</span> =&gt;</span> char.<span class="hljs-title function_">toUpperCase</span>())); <span class="hljs-comment">// ['A', 'B', 'C']</span>

</code></pre>
<p>ä¿®å‰ªï¼š</p>
<ol>
<li><strong>é¢„åˆ†é…æ•°ç»„</strong>ï¼šç”¨Â <code>const A = new Array(len)</code>Â æå‰åˆ›å»ºå¥½ä¸€ä¸ªå›ºå®šé•¿åº¦çš„æ•°ç»„ã€‚</li>
<li><strong>ç›´æ¥èµ‹å€¼</strong>ï¼šåœ¨å¾ªç¯ä¸­ç”¨Â <code>A[k] = mappedValue</code>Â ç›´æ¥èµ‹å€¼ï¼Œè€Œä¸æ˜¯Â <code>push</code>ã€‚è¿™æ ·æ›´å¿«ï¼Œå¹¶ä¸”å¦‚æœè·³è¿‡æŸä¸ªç´¢å¼•ï¼Œæ–°æ•°ç»„ä¹Ÿä¼šåœ¨å¯¹åº”ä½ç½®ç•™ä¸‹ç©ºä½ã€‚</li>
<li><strong>ä½¿ç”¨Â <code>while</code>Â å¾ªç¯</strong>ï¼šè§„èŒƒä¸­ç”¨çš„æ˜¯Â <code>while</code>ï¼Œæˆ‘ä»¬ä¹Ÿè·Ÿç€ç”¨ï¼Œä¿æŒé£æ ¼ä¸€è‡´ã€‚</li>
</ol>
<h3 data-id="heading-7">æ”¶è·æ€»ç»“</h3>
<h3 data-id="heading-8">å‚è€ƒ</h3>
<blockquote>
<p>æ–‡æ¡£åœ°å€ï¼šECMAScriptÂ® 2023 Language Specification - Array.prototype.map</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV1voWqzGEw7%2F%3Fspm_id_from%3D333.1387.homepage.video_card.click%26vd_source%3Ddf71ce41be96fa18a0fe9dc7eec5f4e7" target="_blank" title="https://www.bilibili.com/video/BV1voWqzGEw7/?spm_id_from=333.1387.homepage.video_card.click&amp;vd_source=df71ce41be96fa18a0fe9dc7eec5f4e7" ref="nofollow noopener noreferrer">ã€JavaScriptã€‘å¤§å‚å‰ç«¯é¢è¯•å®˜æœ€çˆ±è€ƒçš„JSæ‰‹å†™é¢˜æ•´ç†å‡ºæ¥äº†ï¼ä½ èƒ½ç­”å¯¹å‡ é“é¢˜ï¼Ÿ_å“”å“©å“”å“©_bilibili</a></p>
</blockquote>
<h3 data-id="heading-9">æ–‡æ¡£åŸæ–‡</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bcbd466e9ecd499284fc46c9ee974c77~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Y6P6YeR6ZOB5Yyg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763790915&amp;x-signature=vWmJa1ACmYWuSBn7zM5BJ6RcPHk%3D" alt="001_map.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/26733bfb1d524955b698d7768b15fa25~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Y6P6YeR6ZOB5Yyg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763790915&amp;x-signature=TSMzlspiKbhtnHXX%2B4vt%2FfmEQT8%3D" alt="002_map.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fc6683fca2ae4916b3d2996a02a11773~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Y6P6YeR6ZOB5Yyg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763790915&amp;x-signature=4zGNdaReEkTcsBPGX12Ij%2B%2Fepik%3D" alt="003_map.png" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[LangChain v1.0+ å¦‚ä½•æ„å»ºè‡ªå®šä¹‰ä¸­é—´ä»¶æ¥æ‹¦æˆªå’Œæ§åˆ¶ Agent æ‰§è¡Œè¿‡ç¨‹]]></title>    <link>https://juejin.cn/post/7572403510467788843</link>    <guid>https://juejin.cn/post/7572403510467788843</guid>    <pubDate>2025-11-15T04:56:21.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572403510467788843" data-draft-id="7572465262738800659" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="LangChain v1.0+  å¦‚ä½•æ„å»ºè‡ªå®šä¹‰ä¸­é—´ä»¶æ¥æ‹¦æˆªå’Œæ§åˆ¶ Agent æ‰§è¡Œè¿‡ç¨‹"/> <meta itemprop="keywords" content="LangChain,Agent"/> <meta itemprop="datePublished" content="2025-11-15T04:56:21.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸–ç•Œé‚£ä¹ˆå“’å“’"/> <meta itemprop="url" content="https://juejin.cn/user/2285242287142777"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            LangChain v1.0+  å¦‚ä½•æ„å»ºè‡ªå®šä¹‰ä¸­é—´ä»¶æ¥æ‹¦æˆªå’Œæ§åˆ¶ Agent æ‰§è¡Œè¿‡ç¨‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2285242287142777/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸–ç•Œé‚£ä¹ˆå“’å“’
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-15T04:56:21.000Z" title="Sat Nov 15 2025 04:56:21 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    4
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="a11y-dark">.hljs-comment,.hljs-quote{color:#d4d0ab}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#ffa07a}.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#f5ab35}.hljs-attribute{color:gold}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:#abe338}.hljs-section,.hljs-title{color:#00e0e0}.hljs-keyword,.hljs-selector-tag{color:#dcc6e0}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#2b2b2b;color:#f8f8f2}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}@media screen and (-ms-high-contrast:active){.hljs-addition,.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-comment,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-quote,.hljs-string,.hljs-symbol,.hljs-type{color:highlight}.hljs-keyword,.hljs-selector-tag{font-weight:700}}</style><h3 data-id="heading-0">æ³¨ï¼šæœ¬æ–‡ä½¿ç”¨ LangChain v1.0+</h3>
<blockquote>
<p>Custom ä¸­é—´ä»¶æ˜¯ LangChain Agent æœ€å¼ºå¤§çš„æ‰©å±•æœºåˆ¶ï¼Œè®©å¼€å‘è€…èƒ½å¤Ÿåœ¨ Agent æ‰§è¡Œçš„ä»»ä½•å…³é”®ç‚¹æ’å…¥è‡ªå®šä¹‰é€»è¾‘ã€‚</p>
</blockquote>
<h2 data-id="heading-1">Custom ä¸­é—´ä»¶çš„ä¸¤ç§é£æ ¼</h2>
<p>Custom ä¸­é—´ä»¶æä¾›ä¸¤ç§æ–¹å¼æ¥æ‹¦æˆªå’Œä¿®æ”¹ Agent è¡Œä¸ºï¼š</p>
<h3 data-id="heading-2">1ï¸âƒ£ Node-Style Hooksï¼ˆèŠ‚ç‚¹é£æ ¼ï¼‰</h3>
<p>é¡ºåºæ‰§è¡Œåœ¨<strong>ç‰¹å®šæ‰§è¡Œç‚¹</strong>ï¼Œç”¨äºæ—¥å¿—è®°å½•ã€éªŒè¯ã€çŠ¶æ€æ›´æ–°ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> os
<span class="hljs-keyword">from</span> langchain_openai <span class="hljs-keyword">import</span> ChatOpenAI
<span class="hljs-keyword">from</span> langchain.agents <span class="hljs-keyword">import</span> create_agent, AgentState
<span class="hljs-keyword">from</span> langchain.agents.middleware <span class="hljs-keyword">import</span> before_model, after_model
<span class="hljs-keyword">from</span> langchain.tools <span class="hljs-keyword">import</span> tool
<span class="hljs-keyword">from</span> langchain.messages <span class="hljs-keyword">import</span> AIMessage
<span class="hljs-keyword">from</span> langgraph.runtime <span class="hljs-keyword">import</span> Runtime
<span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> TypedDict

model = ChatOpenAI(
    model=os.getenv(<span class="hljs-string">"MODEL_NAME"</span>, <span class="hljs-string">"Qwen/Qwen2-7B-Instruct"</span>),
    temperature=<span class="hljs-number">0.7</span>,
    base_url=os.getenv(<span class="hljs-string">"SILICONFLOW_BASE_URL"</span>),
    api_key=os.getenv(<span class="hljs-string">"SILICONFLOW_API_KEY"</span>)
)

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Context</span>(<span class="hljs-title class_ inherited__">TypedDict</span>):
    user_id: <span class="hljs-built_in">str</span>
    request_id: <span class="hljs-built_in">str</span>

<span class="hljs-comment"># ===== é’©å­ 1: æ¨¡å‹è°ƒç”¨å‰ =====</span>
<span class="hljs-meta">@before_model</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">log_request_info</span>(<span class="hljs-params">state: AgentState, runtime: Runtime[Context]</span>) -&gt; <span class="hljs-built_in">dict</span> | <span class="hljs-literal">None</span>:
    <span class="hljs-string">"""è®°å½•è¯·æ±‚ä¿¡æ¯ï¼ˆèŠ‚ç‚¹é£æ ¼ï¼‰"""</span>
    user_id = runtime.context.user_id
    msg_count = <span class="hljs-built_in">len</span>(state.get(<span class="hljs-string">"messages"</span>, []))
    
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ğŸ“Š [ç”¨æˆ· <span class="hljs-subst">{user_id}</span>] å³å°†è°ƒç”¨æ¨¡å‹"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"   æ¶ˆæ¯æ•°é‡: <span class="hljs-subst">{msg_count}</span>"</span>)
    
    <span class="hljs-comment"># ä¸ä¿®æ”¹çŠ¶æ€ï¼Œè¿”å› None</span>
    <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>

<span class="hljs-comment"># ===== é’©å­ 2: æ¨¡å‹è°ƒç”¨å =====</span>
<span class="hljs-meta">@after_model</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">log_response_info</span>(<span class="hljs-params">state: AgentState, runtime: Runtime[Context]</span>) -&gt; <span class="hljs-built_in">dict</span> | <span class="hljs-literal">None</span>:
    <span class="hljs-string">"""è®°å½•å“åº”ä¿¡æ¯ï¼ˆèŠ‚ç‚¹é£æ ¼ï¼‰"""</span>
    last_msg = state[<span class="hljs-string">"messages"</span>][-<span class="hljs-number">1</span>]
    
    <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(last_msg, AIMessage):
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"âœ… æ¨¡å‹å·²å“åº”ï¼Œé•¿åº¦: <span class="hljs-subst">{<span class="hljs-built_in">len</span>(last_msg.content)}</span>"</span>)
    
    <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>

<span class="hljs-comment"># ===== åˆ›å»º Agent =====</span>
agent = create_agent(
    model=model,
    tools=[],
    middleware=[log_request_info, log_response_info],
    context_schema=Context
)

result = agent.invoke(
    {<span class="hljs-string">"messages"</span>: [{<span class="hljs-string">"role"</span>: <span class="hljs-string">"user"</span>, <span class="hljs-string">"content"</span>: <span class="hljs-string">"ä½ å¥½"</span>}]},
    context={<span class="hljs-string">"user_id"</span>: <span class="hljs-string">"user123"</span>, <span class="hljs-string">"request_id"</span>: <span class="hljs-string">"req_001"</span>}
)
</code></pre>
<h3 data-id="heading-3">2ï¸âƒ£ Wrap-Style Hooksï¼ˆç¯ç»•é£æ ¼ï¼‰</h3>
<p>ç¯ç»•æ‰§è¡Œï¼Œ<strong>ä½ æ§åˆ¶ handler ä½•æ—¶è¢«è°ƒç”¨</strong>ã€‚ç”¨äºé‡è¯•ã€ç¼“å­˜ã€åŠ¨æ€ä¿®æ”¹ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> langchain.agents.middleware <span class="hljs-keyword">import</span> before_model
<span class="hljs-keyword">from</span> langchain.agents <span class="hljs-keyword">import</span> create_agent

<span class="hljs-comment"># ===== Wrap é£æ ¼ä¸­é—´ä»¶ï¼šé‡è¯•é€»è¾‘ =====</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">create_retry_middleware</span>(<span class="hljs-params">max_retries: <span class="hljs-built_in">int</span> = <span class="hljs-number">3</span></span>):
    <span class="hljs-string">"""åˆ›å»ºé‡è¯•ä¸­é—´ä»¶"""</span>
    
    <span class="hljs-comment"># è¿™é‡Œç”¨ before_model æ¼”ç¤ºï¼Œä½†çœŸå®åœºæ™¯ä¸­åº”è¯¥ç”¨ wrap é£æ ¼</span>
<span class="hljs-meta">    @before_model</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">retry_on_error</span>(<span class="hljs-params">state: AgentState, runtime: Runtime[Context]</span>) -&gt; <span class="hljs-built_in">dict</span> | <span class="hljs-literal">None</span>:
        <span class="hljs-comment"># åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨çŠ¶æ€è¿½è¸ªé‡è¯•æ¬¡æ•°</span>
        <span class="hljs-comment"># å®é™…çš„ wrap é£æ ¼éœ€è¦ä½¿ç”¨ç‰¹æ®Šçš„è£…é¥°å™¨</span>
        <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>
    
    <span class="hljs-keyword">return</span> retry_on_error

agent = create_agent(
    model=model,
    tools=[],
    middleware=[create_retry_middleware(max_retries=<span class="hljs-number">3</span>)],
    context_schema=Context
)
</code></pre>
<p>æ›´å®Œæ•´çš„ Wrap é£æ ¼ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> langchain.agents.middleware <span class="hljs-keyword">import</span> before_model

<span class="hljs-keyword">def</span> <span class="hljs-title function_">create_model_retry_middleware</span>(<span class="hljs-params">max_retries: <span class="hljs-built_in">int</span> = <span class="hljs-number">3</span></span>):
    <span class="hljs-string">"""
    ä½¿ç”¨çŠ¶æ€è·Ÿè¸ªæ¥å®ç°é‡è¯•é€»è¾‘
    """</span>
<span class="hljs-meta">    @before_model</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">handle_retry</span>(<span class="hljs-params">state: AgentState, runtime: Runtime[Context]</span>) -&gt; <span class="hljs-built_in">dict</span> | <span class="hljs-literal">None</span>:
        <span class="hljs-comment"># æ£€æŸ¥é‡è¯•è®¡æ•°</span>
        retry_count = state.get(<span class="hljs-string">"retry_count"</span>, <span class="hljs-number">0</span>)
        
        <span class="hljs-keyword">if</span> retry_count &gt;= max_retries:
            <span class="hljs-keyword">return</span> {
                <span class="hljs-string">"messages"</span>: [AIMessage(content=<span class="hljs-string">"å·²è¾¾åˆ°æœ€å¤§é‡è¯•æ¬¡æ•°"</span>)],
                <span class="hljs-string">"jumpTo"</span>: <span class="hljs-string">"end"</span>  <span class="hljs-comment"># è·³åˆ°ç»“æŸ</span>
            }
        
        <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>
    
    <span class="hljs-keyword">return</span> handle_retry
</code></pre>
<h2 data-id="heading-4">ä¿®æ”¹çŠ¶æ€çš„ä¸­é—´ä»¶</h2>
<p><strong>ä¸­é—´ä»¶å¯ä»¥è¿”å›ä¸€ä¸ªå­—å…¸æ¥ä¿®æ”¹çŠ¶æ€ï¼š</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> TypedDict
<span class="hljs-keyword">from</span> langchain.agents <span class="hljs-keyword">import</span> AgentState, create_agent
<span class="hljs-keyword">from</span> langchain.agents.middleware <span class="hljs-keyword">import</span> before_model, after_model
<span class="hljs-keyword">from</span> langchain.messages <span class="hljs-keyword">import</span> AIMessage
<span class="hljs-keyword">from</span> langgraph.runtime <span class="hljs-keyword">import</span> Runtime

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Context</span>(<span class="hljs-title class_ inherited__">TypedDict</span>):
    user_id: <span class="hljs-built_in">str</span>

<span class="hljs-comment"># ===== ä¾‹å­ 1: åœ¨æ¨¡å‹è°ƒç”¨å‰ä¿®æ”¹æ¶ˆæ¯ =====</span>
<span class="hljs-meta">@before_model</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">trim_long_messages</span>(<span class="hljs-params">state: AgentState, runtime: Runtime[Context]</span>) -&gt; <span class="hljs-built_in">dict</span> | <span class="hljs-literal">None</span>:
    <span class="hljs-string">"""å¦‚æœæ¶ˆæ¯è¿‡å¤šï¼Œåˆ é™¤æ—§æ¶ˆæ¯"""</span>
    messages = state.get(<span class="hljs-string">"messages"</span>, [])
    
    <span class="hljs-comment"># è¶…è¿‡ 100 æ¡æ¶ˆæ¯åˆ™åªä¿ç•™æœ€è¿‘ 50 æ¡</span>
    <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(messages) &gt; <span class="hljs-number">100</span>:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"âš ï¸  æ¶ˆæ¯è¿‡å¤š (<span class="hljs-subst">{<span class="hljs-built_in">len</span>(messages)}</span>)ï¼Œæ­£åœ¨ä¿®å‰ª..."</span>)
        trimmed_messages = messages[-<span class="hljs-number">50</span>:]  <span class="hljs-comment"># åªä¿ç•™æœ€å 50 æ¡</span>
        
        <span class="hljs-keyword">return</span> {<span class="hljs-string">"messages"</span>: trimmed_messages}
    
    <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>

<span class="hljs-comment"># ===== ä¾‹å­ 2: åœ¨æ¨¡å‹å“åº”åæ›¿æ¢å†…å®¹ =====</span>
<span class="hljs-meta">@after_model</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">filter_sensitive_content</span>(<span class="hljs-params">state: AgentState, runtime: Runtime[Context]</span>) -&gt; <span class="hljs-built_in">dict</span> | <span class="hljs-literal">None</span>:
    <span class="hljs-string">"""è¿‡æ»¤æ•æ„Ÿå†…å®¹"""</span>
    last_msg = state[<span class="hljs-string">"messages"</span>][-<span class="hljs-number">1</span>]
    
    <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(last_msg, AIMessage):
        content = last_msg.content.lower()
        
        <span class="hljs-comment"># æ£€æµ‹æ•æ„Ÿè¯</span>
        <span class="hljs-keyword">if</span> <span class="hljs-string">"password"</span> <span class="hljs-keyword">in</span> content <span class="hljs-keyword">or</span> <span class="hljs-string">"api_key"</span> <span class="hljs-keyword">in</span> content:
            <span class="hljs-built_in">print</span>(<span class="hljs-string">"ğŸš« æ£€æµ‹åˆ°æ•æ„Ÿå†…å®¹ï¼Œæ­£åœ¨æ›¿æ¢..."</span>)
            <span class="hljs-keyword">return</span> {
                <span class="hljs-string">"messages"</span>: [AIMessage(content=<span class="hljs-string">"æ— æ³•æ˜¾ç¤ºè¯¥å†…å®¹ã€‚"</span>)]
            }
    
    <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>

agent = create_agent(
    model=model,
    tools=[],
    middleware=[trim_long_messages, filter_sensitive_content],
    context_schema=Context
)
</code></pre>
<h2 data-id="heading-5">ä½¿ç”¨ jumpTo æ§åˆ¶æµç¨‹</h2>
<p><strong>ä¸­é—´ä»¶å¯ä»¥ç”¨ <code>jumpTo</code> æå‰ç»“æŸæˆ–è·³è¿‡æ‰§è¡Œï¼š</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> langchain.agents.middleware <span class="hljs-keyword">import</span> before_model

<span class="hljs-meta">@before_model</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">rate_limit_check</span>(<span class="hljs-params">state: AgentState, runtime: Runtime[Context]</span>) -&gt; <span class="hljs-built_in">dict</span> | <span class="hljs-literal">None</span>:
    <span class="hljs-string">"""æ£€æŸ¥é€Ÿç‡é™åˆ¶"""</span>
    msg_count = <span class="hljs-built_in">len</span>(state.get(<span class="hljs-string">"messages"</span>, []))
    
    <span class="hljs-comment"># å¦‚æœæ¶ˆæ¯å¤ªå¤šï¼Œç›´æ¥è¿”å›é”™è¯¯å¹¶ç»“æŸ</span>
    <span class="hljs-keyword">if</span> msg_count &gt; <span class="hljs-number">1000</span>:
        <span class="hljs-keyword">return</span> {
            <span class="hljs-string">"messages"</span>: [AIMessage(content=<span class="hljs-string">"å·²è¾¾åˆ°è¯·æ±‚é™åˆ¶"</span>)],
            <span class="hljs-string">"jumpTo"</span>: <span class="hljs-string">"end"</span>  <span class="hljs-comment"># ç›´æ¥è·³åˆ° agent ç»“æŸ</span>
        }
    
    <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>

agent = create_agent(
    model=model,
    tools=[],
    middleware=[rate_limit_check],
    context_schema=Context
)
</code></pre>
<h2 data-id="heading-6">æ‰©å±•çŠ¶æ€ Schema</h2>
<p><strong>ä¸­é—´ä»¶å¯ä»¥ä¸º Agent çŠ¶æ€æ·»åŠ è‡ªå®šä¹‰å­—æ®µï¼š</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> langchain.agents <span class="hljs-keyword">import</span> AgentState, create_agent
<span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> TypedDict
<span class="hljs-keyword">from</span> langchain.agents.middleware <span class="hljs-keyword">import</span> before_model, after_model

<span class="hljs-comment"># åˆ›å»ºæ‰©å±•çš„çŠ¶æ€ç±»</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ExtendedAgentState</span>(<span class="hljs-title class_ inherited__">AgentState</span>):
    <span class="hljs-string">"""æ‰©å±•çŠ¶æ€ï¼Œæ·»åŠ è‡ªå®šä¹‰å­—æ®µ"""</span>
    call_count: <span class="hljs-built_in">int</span>  <span class="hljs-comment"># æ¨¡å‹è°ƒç”¨æ¬¡æ•°</span>
    total_tokens: <span class="hljs-built_in">int</span>  <span class="hljs-comment"># æ€» token æ•°</span>
    user_metadata: <span class="hljs-built_in">dict</span>  <span class="hljs-comment"># ç”¨æˆ·å…ƒæ•°æ®</span>

<span class="hljs-comment"># ===== ä¸­é—´ä»¶è¿½è¸ªè°ƒç”¨æ¬¡æ•° =====</span>
<span class="hljs-meta">@before_model</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">track_calls</span>(<span class="hljs-params">state: ExtendedAgentState, runtime: Runtime[Context]</span>) -&gt; <span class="hljs-built_in">dict</span> | <span class="hljs-literal">None</span>:
    <span class="hljs-string">"""è®°å½•æ¨¡å‹è°ƒç”¨æ¬¡æ•°"""</span>
    current_count = state.get(<span class="hljs-string">"call_count"</span>, <span class="hljs-number">0</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ğŸ“ è¿™æ˜¯ç¬¬ <span class="hljs-subst">{current_count + <span class="hljs-number">1</span>}</span> æ¬¡æ¨¡å‹è°ƒç”¨"</span>)
    
    <span class="hljs-keyword">return</span> {<span class="hljs-string">"call_count"</span>: current_count + <span class="hljs-number">1</span>}

<span class="hljs-meta">@after_model</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">track_tokens</span>(<span class="hljs-params">state: ExtendedAgentState, runtime: Runtime[Context]</span>) -&gt; <span class="hljs-built_in">dict</span> | <span class="hljs-literal">None</span>:
    <span class="hljs-string">"""è®°å½• token ä½¿ç”¨é‡"""</span>
    last_msg = state[<span class="hljs-string">"messages"</span>][-<span class="hljs-number">1</span>]
    
    <span class="hljs-comment"># ä¼°ç®— token æ•°ï¼ˆç®€å•æ–¹æ³•ï¼‰</span>
    token_count = <span class="hljs-built_in">len</span>(<span class="hljs-built_in">str</span>(last_msg.content).split())
    current_total = state.get(<span class="hljs-string">"total_tokens"</span>, <span class="hljs-number">0</span>)
    
    <span class="hljs-keyword">return</span> {<span class="hljs-string">"total_tokens"</span>: current_total + token_count}

agent = create_agent(
    model=model,
    tools=[],
    middleware=[track_calls, track_tokens],
    context_schema=Context,
    state_schema=ExtendedAgentState  <span class="hljs-comment"># ä½¿ç”¨æ‰©å±•çš„çŠ¶æ€</span>
)

result = agent.invoke(
    {
        <span class="hljs-string">"messages"</span>: [{<span class="hljs-string">"role"</span>: <span class="hljs-string">"user"</span>, <span class="hljs-string">"content"</span>: <span class="hljs-string">"ä½ å¥½"</span>}],
        <span class="hljs-string">"call_count"</span>: <span class="hljs-number">0</span>,
        <span class="hljs-string">"total_tokens"</span>: <span class="hljs-number">0</span>,
        <span class="hljs-string">"user_metadata"</span>: {<span class="hljs-string">"plan"</span>: <span class="hljs-string">"premium"</span>}
    },
    context={<span class="hljs-string">"user_id"</span>: <span class="hljs-string">"user123"</span>}
)

<span class="hljs-built_in">print</span>(<span class="hljs-string">f"æœ€ç»ˆè°ƒç”¨æ¬¡æ•°: <span class="hljs-subst">{result[<span class="hljs-string">'call_count'</span>]}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ€» token æ•°: <span class="hljs-subst">{result[<span class="hljs-string">'total_tokens'</span>]}</span>"</span>)
</code></pre>
<h2 data-id="heading-7">å®æˆ˜ï¼šå®Œæ•´çš„ä¸­é—´ä»¶ç³»ç»Ÿ</h2>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> os
<span class="hljs-keyword">from</span> langchain_openai <span class="hljs-keyword">import</span> ChatOpenAI
<span class="hljs-keyword">from</span> langchain.agents <span class="hljs-keyword">import</span> create_agent, AgentState
<span class="hljs-keyword">from</span> langchain.agents.middleware <span class="hljs-keyword">import</span> before_model, after_model
<span class="hljs-keyword">from</span> langchain.tools <span class="hljs-keyword">import</span> tool
<span class="hljs-keyword">from</span> langchain.messages <span class="hljs-keyword">import</span> AIMessage
<span class="hljs-keyword">from</span> langgraph.runtime <span class="hljs-keyword">import</span> Runtime
<span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> TypedDict
<span class="hljs-keyword">from</span> datetime <span class="hljs-keyword">import</span> datetime
<span class="hljs-keyword">import</span> time

model = ChatOpenAI(
    model=os.getenv(<span class="hljs-string">"MODEL_NAME"</span>, <span class="hljs-string">"Qwen/Qwen2-7B-Instruct"</span>),
    temperature=<span class="hljs-number">0.7</span>,
    base_url=os.getenv(<span class="hljs-string">"SILICONFLOW_BASE_URL"</span>),
    api_key=os.getenv(<span class="hljs-string">"SILICONFLOW_API_KEY"</span>)
)

<span class="hljs-comment"># ===== ä¸Šä¸‹æ–‡å’ŒçŠ¶æ€ =====</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Context</span>(<span class="hljs-title class_ inherited__">TypedDict</span>):
    user_id: <span class="hljs-built_in">str</span>
    user_role: <span class="hljs-built_in">str</span>  <span class="hljs-comment"># "admin" æˆ– "user"</span>

<span class="hljs-keyword">class</span> <span class="hljs-title class_">ExtendedState</span>(<span class="hljs-title class_ inherited__">AgentState</span>):
    call_count: <span class="hljs-built_in">int</span>
    start_time: <span class="hljs-built_in">float</span>
    execution_logs: <span class="hljs-built_in">list</span>

<span class="hljs-comment"># ===== å·¥å…· =====</span>
<span class="hljs-meta">@tool</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">search_tool</span>(<span class="hljs-params">query: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">str</span>:
    <span class="hljs-string">"""æœç´¢å·¥å…·"""</span>
    <span class="hljs-keyword">return</span> <span class="hljs-string">f"æ‰¾åˆ°å…³äº '<span class="hljs-subst">{query}</span>' çš„ 3 ä¸ªç»“æœ"</span>

<span class="hljs-comment"># ===== ä¸­é—´ä»¶ 1: è¯·æ±‚éªŒè¯ =====</span>
<span class="hljs-meta">@before_model</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">validate_request</span>(<span class="hljs-params">state: ExtendedState, runtime: Runtime[Context]</span>) -&gt; <span class="hljs-built_in">dict</span> | <span class="hljs-literal">None</span>:
    <span class="hljs-string">"""éªŒè¯è¯·æ±‚æƒé™"""</span>
    user_role = runtime.context.get(<span class="hljs-string">"user_role"</span>, <span class="hljs-string">"user"</span>)
    
    <span class="hljs-comment"># ä»…ç®¡ç†å‘˜å¯ä»¥è¿ç»­å‘é€è¶…è¿‡ 10 æ¡æ¶ˆæ¯</span>
    msg_count = <span class="hljs-built_in">len</span>(state.get(<span class="hljs-string">"messages"</span>, []))
    <span class="hljs-keyword">if</span> msg_count &gt; <span class="hljs-number">10</span> <span class="hljs-keyword">and</span> user_role != <span class="hljs-string">"admin"</span>:
        <span class="hljs-keyword">return</span> {
            <span class="hljs-string">"messages"</span>: [AIMessage(content=<span class="hljs-string">"æ‚¨å·²è¾¾åˆ°æ¶ˆæ¯é™åˆ¶ã€‚"</span>)],
            <span class="hljs-string">"jumpTo"</span>: <span class="hljs-string">"end"</span>
        }
    
    <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>

<span class="hljs-comment"># ===== ä¸­é—´ä»¶ 2: è¯·æ±‚æ—¥å¿— =====</span>
<span class="hljs-meta">@before_model</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">log_request</span>(<span class="hljs-params">state: ExtendedState, runtime: Runtime[Context]</span>) -&gt; <span class="hljs-built_in">dict</span> | <span class="hljs-literal">None</span>:
    <span class="hljs-string">"""è®°å½•è¯·æ±‚è¯¦æƒ…"""</span>
    user_id = runtime.context.user_id
    call_count = state.get(<span class="hljs-string">"call_count"</span>, <span class="hljs-number">0</span>)
    
    log_msg = <span class="hljs-string">f"[<span class="hljs-subst">{datetime.now().strftime(<span class="hljs-string">'%H:%M:%S'</span>)}</span>] ç”¨æˆ· <span class="hljs-subst">{user_id}</span> - è°ƒç”¨ #<span class="hljs-subst">{call_count + <span class="hljs-number">1</span>}</span>"</span>
    
    logs = state.get(<span class="hljs-string">"execution_logs"</span>, [])
    logs.append(log_msg)
    
    <span class="hljs-keyword">return</span> {
        <span class="hljs-string">"call_count"</span>: call_count + <span class="hljs-number">1</span>,
        <span class="hljs-string">"execution_logs"</span>: logs
    }

<span class="hljs-comment"># ===== ä¸­é—´ä»¶ 3: å“åº”éªŒè¯ =====</span>
<span class="hljs-meta">@after_model</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">validate_response</span>(<span class="hljs-params">state: ExtendedState, runtime: Runtime[Context]</span>) -&gt; <span class="hljs-built_in">dict</span> | <span class="hljs-literal">None</span>:
    <span class="hljs-string">"""æ£€æŸ¥å“åº”è´¨é‡"""</span>
    last_msg = state[<span class="hljs-string">"messages"</span>][-<span class="hljs-number">1</span>]
    
    <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(last_msg, AIMessage):
        content = last_msg.content
        
        <span class="hljs-comment"># å†…å®¹è¿‡çŸ­å¯èƒ½æ˜¯é”™è¯¯</span>
        <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(content) &lt; <span class="hljs-number">10</span>:
            <span class="hljs-keyword">return</span> {
                <span class="hljs-string">"messages"</span>: [AIMessage(content=<span class="hljs-string">"æ¨¡å‹å“åº”å¼‚å¸¸ï¼Œè¯·é‡è¯•ã€‚"</span>)]
            }
    
    <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>

<span class="hljs-comment"># ===== ä¸­é—´ä»¶ 4: æ€§èƒ½ç›‘æ§ =====</span>
<span class="hljs-meta">@after_model</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">monitor_performance</span>(<span class="hljs-params">state: ExtendedState, runtime: Runtime[Context]</span>) -&gt; <span class="hljs-built_in">dict</span> | <span class="hljs-literal">None</span>:
    <span class="hljs-string">"""ç›‘æ§æ‰§è¡Œæ—¶é—´"""</span>
    start_time = state.get(<span class="hljs-string">"start_time"</span>, time.time())
    elapsed = time.time() - start_time
    
    logs = state.get(<span class="hljs-string">"execution_logs"</span>, [])
    logs.append(<span class="hljs-string">f"â±ï¸  è€—æ—¶: <span class="hljs-subst">{elapsed:<span class="hljs-number">.2</span>f}</span>ç§’"</span>)
    
    <span class="hljs-keyword">return</span> {<span class="hljs-string">"execution_logs"</span>: logs}

<span class="hljs-comment"># ===== åˆ›å»º Agent =====</span>
agent = create_agent(
    model=model,
    tools=[search_tool],
    middleware=[
        validate_request,    <span class="hljs-comment"># â‘  éªŒè¯æƒé™</span>
        log_request,        <span class="hljs-comment"># â‘¡ è®°å½•è¯·æ±‚</span>
        validate_response,  <span class="hljs-comment"># â‘¢ éªŒè¯å“åº”</span>
        monitor_performance <span class="hljs-comment"># â‘£ ç›‘æ§æ€§èƒ½</span>
    ],
    context_schema=Context,
    state_schema=ExtendedState
)

<span class="hljs-comment"># ===== æµ‹è¯• =====</span>
<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    result = agent.invoke(
        {
            <span class="hljs-string">"messages"</span>: [{<span class="hljs-string">"role"</span>: <span class="hljs-string">"user"</span>, <span class="hljs-string">"content"</span>: <span class="hljs-string">"æœç´¢ Python"</span>}],
            <span class="hljs-string">"call_count"</span>: <span class="hljs-number">0</span>,
            <span class="hljs-string">"start_time"</span>: time.time(),
            <span class="hljs-string">"execution_logs"</span>: []
        },
        context={<span class="hljs-string">"user_id"</span>: <span class="hljs-string">"user_001"</span>, <span class="hljs-string">"user_role"</span>: <span class="hljs-string">"admin"</span>}
    )
    
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"æ‰§è¡Œæ—¥å¿—:"</span>)
    <span class="hljs-keyword">for</span> log <span class="hljs-keyword">in</span> result.get(<span class="hljs-string">"execution_logs"</span>, []):
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"  <span class="hljs-subst">{log}</span>"</span>)
</code></pre>
<h2 data-id="heading-8">å…³é”®æ¦‚å¿µæ€»ç»“</h2>



































<table><thead><tr><th>ç‰¹æ€§</th><th>Node-Style</th><th>Wrap-Style</th></tr></thead><tbody><tr><td><strong>æ‰§è¡Œæ—¶æœº</strong></td><td>é¡ºåºæ‰§è¡Œåœ¨ç‰¹å®šç‚¹</td><td>ç¯ç»•æ‰§è¡Œ</td></tr><tr><td><strong>ç”¨é€”</strong></td><td>æ—¥å¿—ã€éªŒè¯ã€æ›´æ–°</td><td>é‡è¯•ã€ç¼“å­˜ã€åŠ¨æ€é€‰æ‹©</td></tr><tr><td><strong>æ§åˆ¶æƒ</strong></td><td>æ¡†æ¶æ§åˆ¶</td><td>ä½ æ§åˆ¶ handler</td></tr><tr><td><strong>é’©å­</strong></td><td><code>before_*</code>, <code>after_*</code></td><td><code>wrap_*</code></td></tr><tr><td><strong>è¿”å›å€¼</strong></td><td><code>dict</code> æˆ– <code>None</code></td><td>ç›´æ¥è¿”å›ç»“æœ</td></tr></tbody></table>
<blockquote>
<p>æœ¬æ–‡ä½¿ç”¨çš„æ¨¡å‹æœåŠ¡æ¥è‡ªç¡…åŸºæµåŠ¨å¹³å°ã€‚æ–°ç”¨æˆ·é€šè¿‡é‚€è¯·é“¾æ¥æ³¨å†Œå¯é¢†å– <strong>2000ä¸‡å…è´¹token</strong>ï¼Œæ”¯æŒGLM-4.6ã€Kimi-K2-Thinkingã€MiniMaxAI/MiniMax-M2ã€DeepSeek-R2ç­‰ä¸»æµå¤§æ¨¡å‹è°ƒç”¨ï¼ŒAPIç¨³å®šæ€§ä¸å“åº”é€Ÿåº¦ä¿±ä½³ã€‚</p>
<p>ä¸“å±æ³¨å†Œé“¾æ¥ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fcloud.siliconflow.cn%2Fi%2FAvDmOKTO" title="https://link.juejin.cn?target=https%3A%2F%2Fcloud.siliconflow.cn%2Fi%2FAvDmOKTO" target="_blank">cloud.siliconflow.cn/i/AvDmOKTO</a></p>
<p>ï¼ˆæ‰“ç›´çƒï¼šè¿™æ˜¯æˆ‘çš„æ¨èç  æ„Ÿè°¢å¤§ä½¬çš„æ”¯æŒï¼‰</p>
</blockquote>
<p>ä½œè€…ï¼šä¸–ç•Œé‚£ä¹ˆå“’å“’<br/>
é“¾æ¥ï¼š<a href="https://juejin.cn/post/7572403510467756075" target="_blank" title="https://juejin.cn/post/7572403510467756075">juejin.cn/post/757240â€¦</a><br/>
æ¥æºï¼šç¨€åœŸæ˜é‡‘<br/>
è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</p>
<p><strong>ç›¸å…³æ–‡æ¡£ï¼š</strong></p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.langchain.com%2Foss%2Fpython%2Flangchain%2Fmiddleware%2Fcustom" target="_blank" title="https://docs.langchain.com/oss/python/langchain/middleware/custom" ref="nofollow noopener noreferrer">Custom Middleware è¯¦è§£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.langchain.com%2Foss%2Fpython%2Flangchain%2Fruntime" target="_blank" title="https://docs.langchain.com/oss/python/langchain/runtime" ref="nofollow noopener noreferrer">Runtime å¯¹è±¡</a></li>
<li>[Agents ä¸­é—´ä»¶</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[éƒ¨ç½²Cloudflareå…è´¹å›¾åºŠâ€”â€”å…è´¹å¼€æºå¼ºå¤§]]></title>    <link>https://juejin.cn/post/7572485825705230345</link>    <guid>https://juejin.cn/post/7572485825705230345</guid>    <pubDate>2025-11-15T05:36:46.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572485825705230345" data-draft-id="7572781559750066203" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="éƒ¨ç½²Cloudflareå…è´¹å›¾åºŠâ€”â€”å…è´¹å¼€æºå¼ºå¤§"/> <meta itemprop="keywords" content="GitHub,å¼€æº"/> <meta itemprop="datePublished" content="2025-11-15T05:36:46.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è¿™å„¿æœ‰ä¸€å †èŠ±"/> <meta itemprop="url" content="https://juejin.cn/user/3076912575965819"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            éƒ¨ç½²Cloudflareå…è´¹å›¾åºŠâ€”â€”å…è´¹å¼€æºå¼ºå¤§
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3076912575965819/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è¿™å„¿æœ‰ä¸€å †èŠ±
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-15T05:36:46.000Z" title="Sat Nov 15 2025 05:36:46 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">1. å…ˆè¯´æ¸…æ¥šï¼šImgNaondo åˆ°åº•è§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Ÿ</h2>
<p>ç»å¸¸å†™æ•™ç¨‹ã€æ•´ç†æ–‡æ¡£çš„äººï¼Œå¾ˆå®¹æ˜“é‡åˆ°è¿™æ ·ä¸€è¿ä¸²çš„å°éº»çƒ¦ï¼š</p>
<ul>
<li>æœ¬åœ°æˆªå›¾å¤ªå¤šï¼Œæ•£è½åœ¨å„ä¸ªæ–‡ä»¶å¤¹ï¼›</li>
<li>è´´åˆ°æ–‡ç« é‡Œè¦å…ˆä¸Šä¼ ç¬¬ä¸‰æ–¹å›¾åºŠï¼Œå†å¤åˆ¶ URLï¼›</li>
<li>æŸå¤©ç¬¬ä¸‰æ–¹å›¾åºŠæŠ½é£ã€é™æµæˆ–è€…å…³ç«™ï¼Œæ•´ç¯‡æ–‡ç« æ’å›¾å…¨å†›è¦†æ²¡ã€‚</li>
</ul>
<p>ImgNaondo çš„ç›®æ ‡å¾ˆç›´æ¥ï¼šåœ¨ Cloudflare Workers + R2 ä¸Šï¼Œæ­ä¸€å¥—<strong>åªä¸ºè‡ªå·±æœåŠ¡çš„å›¾åºŠ</strong>ï¼Œç•Œé¢ç®€å•ï¼Œä½¿ç”¨é—¨æ§›ä½ï¼Œåˆä¸éœ€è¦ç»´æŠ¤ä¼ ç»ŸæœåŠ¡å™¨ã€‚</p>
<p>é¡¹ç›®ä»“åº“æœ¬ä½“åœ¨ GitHub ä¸Šï¼Œå¯ä»¥éšæ—¶æŸ¥çœ‹æºç å’Œæ›´æ–°ï¼š</p>
<p><strong>ImgNaondo ä»“åº“</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fjovial-fortune.com%2Fb.3-VN0%2FP%2F3Np%2FvObOmBVmJvZ%2FDA0%2F2HMoD%2FQDw%2FNjDJAH3%2FL%2FTyYzwpNXD%2FA_0rM-Dtgj" target="_blank" title="https://jovial-fortune.com/b.3-VN0/P/3Np/vObOmBVmJvZ/DA0/2HMoD/QDw/NjDJAH3/L/TyYzwpNXD/A_0rM-Dtgj" ref="nofollow noopener noreferrer">github.com/xdanielf/Imâ€¦</a></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0478753fdd5a450c8fd5734a8b5f6994~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-Z5YS_5pyJ5LiA5aCG6Iqx:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763789806&amp;x-signature=%2FWCAfckh4P0gX%2FB1PLg6C%2FAik1M%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-1">2. ç¯å¢ƒå‡†å¤‡ï¼šéœ€è¦å“ªäº›è´¦å·å’Œèµ„æºï¼Ÿ</h2>
<p>æ•´å¥—æ–¹æ¡ˆä¾èµ– Cloudflare çš„æ— æœåŠ¡å™¨äº§å“ç»„åˆï¼š</p>
<ul>
<li><strong>Cloudflare è´¦æˆ·</strong>ï¼ˆç”¨æ¥åˆ›å»º Worker å’Œ R2 å­˜å‚¨æ¡¶ï¼‰</li>
<li><strong>ä¸€ä¸ª R2 Bucket</strong>ï¼Œç”¨æ¥å­˜æ‰€æœ‰å›¾ç‰‡ï¼›</li>
<li><strong>ä¸€ä¸ª Worker è„šæœ¬</strong>ï¼Œè´Ÿè´£æ¥æ”¶ä¸Šä¼ è¯·æ±‚ã€ä» R2 è¯»å–å›¾ç‰‡å¹¶è¾“å‡ºï¼›</li>
<li>ï¼ˆå¯é€‰ï¼‰ä¸€ä¸ªè‡ªå®šä¹‰åŸŸåï¼Œæ¯”å¦‚ <code>img.example.com</code>ã€‚</li>
</ul>
<p>å¦‚æœè¿˜æ²¡æœ‰ Cloudflare è´¦æˆ·ï¼Œå¯ä»¥å…ˆæ³¨å†Œä¸€ä¸ªï¼Œåé¢æ‰€æœ‰æ“ä½œéƒ½ä¼šåœ¨åŒä¸€æ§åˆ¶å°å®Œæˆï¼š</p>
<p><strong>Cloudflare æ§åˆ¶å°</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fjovial-fortune.com%2Fb.3-VN0%2FP%2F3Np%2FvObOmBVmJvZ%2FDA0%2F2HMoD%2FQDw%2FNjDJAH3%2FL%2FTyYzwpNXD%2FA_0rM-Dtgj" target="_blank" title="https://jovial-fortune.com/b.3-VN0/P/3Np/vObOmBVmJvZ/DA0/2HMoD/QDw/NjDJAH3/L/TyYzwpNXD/A_0rM-Dtgj" ref="nofollow noopener noreferrer">dash.cloudflare.com/</a></p>
<p>æ³¨å†Œå®Œæˆåï¼Œåªè¦å¼€å¯ R2ï¼ˆæŒ‰é‡è®¡è´¹ï¼Œå°è§„æ¨¡ä¸ªäººä½¿ç”¨æ—¶æˆæœ¬é€šå¸¸æ¯”è¾ƒå‹å¥½ï¼‰ï¼Œå°±å¯ä»¥ç»§ç»­å¾€ä¸‹èµ°ã€‚
<strong>å®é™…ä¸Šï¼Œ10GBä»¥å†…çš„å­˜å‚¨æ˜¯å…è´¹çš„ï¼Œå•çº¯å­˜å›¾ç‰‡å¾ˆéš¾ç”¨å¾—å®Œã€‚</strong></p>
<hr/>
<h2 data-id="heading-2">3. åˆ›å»º R2 å­˜å‚¨æ¡¶ï¼šç»™å›¾ç‰‡æ‰¾ä¸€ä¸ªâ€œä»“åº“â€</h2>
<p>åœ¨æ§åˆ¶å°ä¸­æ‰“å¼€ R2ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„ Bucketã€‚ImgNaondo é»˜è®¤çº¦å®šçš„åå­—å«ï¼š</p>
<pre><code class="hljs language-text" lang="text">imgnaondo
</code></pre>
<p>å½“ç„¶ï¼Œä¹Ÿå¯ä»¥ç”¨åˆ«çš„åå­—ï¼Œåªè¦åé¢åœ¨ Worker ç»‘å®šæ—¶å¯¹åº”èµ·æ¥å°±è¡Œã€‚</p>
<p>åœ¨ R2 è¿™ä¸€æ­¥ï¼Œä¸éœ€è¦è®¾ç½®å¤æ‚çš„ç”Ÿå‘½å‘¨æœŸç­–ç•¥ï¼Œåªè¦ä¿è¯ï¼š</p>
<ul>
<li>Bucket å¯ä»¥è¢«ç»‘å®šåˆ° Workerï¼›</li>
<li>é»˜è®¤ç§æœ‰ï¼Œä¸å¯¹å…¬ç½‘ç›´æ¥æš´éœ²ï¼ˆçœŸæ­£çš„å‡ºå…¥å£ç”± Worker è´Ÿè´£ï¼‰ã€‚</li>
</ul>
<p>è¿™æ ·åšçš„å¥½å¤„æ˜¯ï¼šä»¥åæƒ³æ¢ä¸€å¥—ç®¡ç†ç•Œé¢ï¼Œæˆ–è€…è‡ªå·±å†™æ–°çš„å‰ç«¯ï¼Œéƒ½å¯ä»¥ç»§ç»­å¤ç”¨åŒä¸€ä¸ª Bucketã€‚</p>
<hr/>
<h2 data-id="heading-3">4. éƒ¨ç½² Workerï¼šè®©è„šæœ¬ç«™åœ¨ Cloudflare è¾¹ç¼˜èŠ‚ç‚¹ä¸Š</h2>
<p>æ¥ä¸‹æ¥æ˜¯è¿™å¥—å›¾åºŠçš„â€œæ ¸å¿ƒå‘åŠ¨æœºâ€â€”â€”Cloudflare Workerã€‚</p>
<p>åœ¨æ§åˆ¶å°ä¸­æ–°å»ºä¸€ä¸ª Workerï¼ŒæŠŠé»˜è®¤ç¤ºä¾‹ä»£ç å…¨éƒ¨åˆ æ‰ï¼Œæ›¿æ¢æˆ ImgNaondo ä»“åº“é‡Œçš„ <code>worker.js</code> å†…å®¹ã€‚ä¸ºäº†ä¾¿äºç†è§£ï¼Œå¯ä»¥å…ˆçœ‹ä¸€ä¸ªé«˜åº¦ç®€åŒ–çš„ç‰ˆæœ¬ï¼Œå¤§è‡´ç»“æ„ç±»ä¼¼è¿™æ ·ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-params">request, env</span>) {
    <span class="hljs-keyword">const</span> url = <span class="hljs-keyword">new</span> <span class="hljs-title function_">URL</span>(request.<span class="hljs-property">url</span>);

    <span class="hljs-comment">// ç®€å•çš„ä¸Šä¼ é‰´æƒ</span>
    <span class="hljs-keyword">if</span> (request.<span class="hljs-property">method</span> === <span class="hljs-string">"POST"</span>) {
      <span class="hljs-keyword">const</span> token = request.<span class="hljs-property">headers</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">"x-upload-token"</span>);
      <span class="hljs-keyword">if</span> (token !== env.<span class="hljs-property">PASSWORD</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Response</span>(<span class="hljs-string">"Unauthorized"</span>, { <span class="hljs-attr">status</span>: <span class="hljs-number">401</span> });
      }
      <span class="hljs-comment">// è¿™é‡Œå¤„ç†ä¸Šä¼ é€»è¾‘ï¼šè¯»å–è¡¨å•ï¼Œå†™å…¥ R2</span>
    }

    <span class="hljs-comment">// è¯»å–å›¾ç‰‡</span>
    <span class="hljs-keyword">if</span> (request.<span class="hljs-property">method</span> === <span class="hljs-string">"GET"</span>) {
      <span class="hljs-keyword">const</span> key = url.<span class="hljs-property">pathname</span>.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/^\/+/</span>, <span class="hljs-string">""</span>); <span class="hljs-comment">// å»æ‰å‰å¯¼ /</span>
      <span class="hljs-keyword">const</span> object = <span class="hljs-keyword">await</span> env.<span class="hljs-property">IMAGES</span>.<span class="hljs-title function_">get</span>(key);
      <span class="hljs-keyword">if</span> (!object) <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Response</span>(<span class="hljs-string">"Not found"</span>, { <span class="hljs-attr">status</span>: <span class="hljs-number">404</span> });

      <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Response</span>(object.<span class="hljs-property">body</span>, {
        <span class="hljs-attr">headers</span>: {
          <span class="hljs-string">"Content-Type"</span>: object.<span class="hljs-property">httpMetadata</span>?.<span class="hljs-property">contentType</span> || <span class="hljs-string">"image/jpeg"</span>,
          <span class="hljs-string">"Cache-Control"</span>: <span class="hljs-string">"public, max-age=31536000, immutable"</span>
        }
      });
    }

    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Response</span>(<span class="hljs-string">"Method Not Allowed"</span>, { <span class="hljs-attr">status</span>: <span class="hljs-number">405</span> });
  }
}
</code></pre>
<p>è¿™æ®µä¼ªä»£ç è¡¨è¾¾å‡ºçš„æ€è·¯éå¸¸æ¸…æ™°ï¼š</p>
<ol>
<li>æ‰€æœ‰ä¸Šä¼ éƒ½å¿…é¡»å¸¦ä¸€ä¸ªå¯†ç ï¼ˆ<code>PASSWORD</code> ç¯å¢ƒå˜é‡ï¼‰ï¼›</li>
<li>æ‰€æœ‰è¯»å–éƒ½é€šè¿‡ <code>env.IMAGES.get(key)</code> ä» R2 æ‹¿æ–‡ä»¶ï¼›</li>
<li>è¿”å›æ—¶åŠ ä¸Šåˆç†çš„ç¼“å­˜å¤´ï¼Œè®©å›¾ç‰‡å¯ä»¥åœ¨ Cloudflare è¾¹ç¼˜èŠ‚ç‚¹é•¿æ—¶é—´ç¼“å­˜ã€‚</li>
</ol>
<p>åœ¨ Worker çš„â€œSettings â†’ Variablesâ€ä¸­ï¼Œéœ€è¦è®¾ç½®ä¸¤ä¸ªå…³é”®å†…å®¹ï¼š</p>
<ul>
<li>ä¸€ä¸ªåä¸º <code>IMAGES</code> çš„ R2 Bindingï¼ŒæŒ‡å‘åˆšæ‰åˆ›å»ºçš„ <code>imgnaondo</code> Bucketï¼›</li>
<li>ä¸€ä¸ªåä¸º <code>PASSWORD</code> çš„ç¯å¢ƒå˜é‡ï¼Œè®¾ç½®ä¸ºè‡ªå®šä¹‰çš„ä¸Šä¼ å¯†ç ã€‚</li>
</ul>
<p>é…ç½®å®Œæˆåï¼Œç‚¹ä¸€ä¸‹â€œSave and deployâ€ï¼Œåç«¯æ¥å£å°±å·²ç»ä¸Šçº¿äº†ã€‚</p>
<hr/>
<h2 data-id="heading-4">5. ç»‘å®šå‰ç«¯é¢æ¿ï¼šä»è„šæœ¬å˜æˆçœŸæ­£å¯ç”¨çš„å›¾åºŠ</h2>
<p>åç«¯æ¥å£å‡†å¤‡å¥½ä¹‹åï¼Œè¿˜å·®ä¸€ä¸ªâ€œäººç±»å‹å¥½â€çš„å‰ç«¯é¢æ¿ã€‚ImgNaondo é¡¹ç›®è‡ªå¸¦çš„é‚£å¥—ç•Œé¢ï¼Œå°±å¯¹åº”è¯»è€…çœ‹åˆ°çš„æˆªå›¾ï¼š</p>
<ul>
<li>é¡¶éƒ¨æ˜¯æ·±è‰²å¯¼èˆªæ å’Œ Logout æŒ‰é’®ï¼›</li>
<li>ä¸­é—´æ˜¯å·¨å¤§çš„æ‹–æ‹½åŒºåŸŸï¼Œå¯ä»¥ç›´æ¥æ‹–å›¾ç‰‡è¿›æ¥ï¼›</li>
<li>ä¸‹æ–¹æœ‰ Custom Name å’Œ Tags çš„è¾“å…¥æ¡†ï¼›</li>
<li>å†å¾€ä¸‹æ˜¯ Tag Cloudã€æœç´¢æ ã€æ’åºæ–¹å¼å’Œ Bulk Selectï¼›</li>
<li>æœ€åº•éƒ¨åˆ™æ˜¯å›¾ç‰‡åˆ—è¡¨ï¼ˆåˆšæ­å¥½æ—¶ä¼šæ˜¾ç¤º â€œNo images found.â€ï¼‰ã€‚</li>
</ul>
<p>é€šå¸¸çš„åšæ³•ï¼Œæ˜¯æŠŠå‰ç«¯æ„å»ºå¥½çš„é™æ€æ–‡ä»¶ç›´æ¥å¡è¿› Worker ä¸­ï¼Œé€šè¿‡ <code>HTML</code> å“åº”ä¸€èµ·è¿”å›ã€‚ä¸€ä¸ªæç®€è·¯ç”±ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">if</span> (url.<span class="hljs-property">pathname</span> === <span class="hljs-string">"/"</span> &amp;&amp; request.<span class="hljs-property">method</span> === <span class="hljs-string">"GET"</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Response</span>(<span class="hljs-keyword">await</span> env.<span class="hljs-property">ASSETS</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">"index.html"</span>), {
    <span class="hljs-attr">headers</span>: { <span class="hljs-string">"Content-Type"</span>: <span class="hljs-string">"text/html; charset=utf-8"</span> }
  });
}
</code></pre>
<p>åœ¨å®é™…é¡¹ç›®é‡Œï¼ŒHTMLã€CSSã€JS å¯èƒ½é€šè¿‡ Wrangler æˆ– Pages Functions æ¥æ‰˜ç®¡ï¼Œå…³é”®ç‚¹æ˜¯ï¼š<strong>å‰ç«¯åªéœ€è¦çŸ¥é“ä¸€ä¸ªä¸Šä¼ æ¥å£å’Œä¸€ä¸ªè·å–åˆ—è¡¨çš„æ¥å£</strong>ï¼Œå‰©ä¸‹çš„éƒ½äº¤ç»™ Worker + R2 å¤„ç†ã€‚</p>
<p>çœŸæ­£è§£ææ—¶åªéœ€è¦æŠŠ <code>img.example.com</code> çš„æµé‡æŒ‡å‘è¿™ä¸ª Worker å³å¯ã€‚</p>
<hr/>
<h2 data-id="heading-5">6. å®æˆ˜æ“ä½œï¼šä»æ‹–æ‹½ä¸Šä¼ ï¼Œåˆ°åœ¨ Markdown ä¸­æ’å›¾</h2>
<p>å½“åå°é¢æ¿å·²ç»å¯ä»¥æ­£å¸¸æ‰“å¼€æ—¶ï¼Œä¸€æ¬¡å®Œæ•´çš„â€œä¸Šä¼  â€” è·å– URL â€” å†™æ–‡æ¡£â€çš„æµç¨‹ä¼šéå¸¸é¡ºæ»‘ã€‚</p>
<p>å¯ä»¥æƒ³è±¡è¿™æ ·ä¸€ä¸ªç”»é¢ï¼šä¸€å°ç¬”è®°æœ¬ç”µè„‘æ”¾åœ¨æ¡Œé¢ä¸Šï¼Œå±å¹•é‡Œæ‰“å¼€çš„æ˜¯æ•™ç¨‹è‰ç¨¿ï¼Œæ—è¾¹æ˜¯æµè§ˆå™¨é‡Œçš„ ImgNaondo åå°ã€‚è¯»è€…åªè¦æŠŠæˆªå›¾ä»å›¾ç‰‡ç®¡ç†å™¨æ‹–åˆ°æµè§ˆå™¨ä¸­é—´é‚£å—è™šçº¿æ¡†ï¼Œå°±èƒ½çœ‹åˆ°ä¸Šä¼ è¿›åº¦å’Œå®Œæˆåçš„ç¼©ç•¥å›¾ã€‚</p>
<p>ç¤ºæ„å›¾å¯ä»¥ç”¨ä¸€å¼ ç±»ä¼¼çš„å·¥ä½œåœºæ™¯ç…§ç‰‡æ¥è¾…åŠ©ç†è§£ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1097f395ef844001913f064e43346444~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-Z5YS_5pyJ5LiA5aCG6Iqx:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763789806&amp;x-signature=VXxjEFg2YB0BE3HH3zUdMmtK5%2Bs%3D" alt="ImgNaondo ä½¿ç”¨åœºæ™¯ç¤ºæ„" loading="lazy"/></p>
<p>ä¸Šä¼ å®Œæˆåï¼Œåå°ä¼šç»™å‡ºä¸€ä¸ªå®Œæ•´çš„è®¿é—®é“¾æ¥ï¼Œä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-text" lang="text">https://img.example.com/2025/11/15/terminal-latency-test.png
</code></pre>
<p>åœ¨ Markdown æ–‡æ¡£é‡Œï¼Œåªè¦è¿™æ ·æ’å…¥å³å¯ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">![<span class="hljs-string">ç»ˆç«¯å»¶è¿Ÿæµ‹è¯•æˆªå›¾</span>](<span class="hljs-link">https://img.example.com/2025/11/15/terminal-latency-test.png</span>)
</code></pre>
<p>å¯¹äºç»å¸¸å†™æ•™ç¨‹ã€åšç¬”è®°çš„äººæ¥è¯´ï¼Œè¿™ç§â€œçœ‹åˆ°å°±èƒ½ç›´æ¥å¤åˆ¶â€çš„ä½“éªŒï¼Œæ¯”ä¸€å †å‘½ä»¤è¡Œå·¥å…·è¦ç›´è§‚å¾—å¤šã€‚</p>
<p>å¦‚æœæ–‡ç« æ‰˜ç®¡åœ¨ GitHub Pages æˆ–å…¶ä»–é™æ€ç«™ç‚¹ä¸Šï¼Œä¹Ÿå¯ä»¥ç»§ç»­ä½¿ç”¨è¿™ç§æ–¹å¼æ’å›¾ï¼Œä¾‹å¦‚ GitHub å®˜æ–¹çš„ä»‹ç»é¡µé¢ï¼š</p>
<p><strong>GitHub Pages è¯´æ˜</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fjovial-fortune.com%2Fb.3-VN0%2FP%2F3Np%2FvObOmBVmJvZ%2FDA0%2F2HMoD%2FQDw%2FNjDJAH3%2FL%2FTyYzwpNXD%2FA_0rM-Dtgj" target="_blank" title="https://jovial-fortune.com/b.3-VN0/P/3Np/vObOmBVmJvZ/DA0/2HMoD/QDw/NjDJAH3/L/TyYzwpNXD/A_0rM-Dtgj" ref="nofollow noopener noreferrer">pages.github.com/</a></p>
<p>ä¸è®ºæ–‡ç« éƒ¨ç½²åˆ°å“ªé‡Œï¼Œåªè¦å›¾åºŠåŸŸåä¸å˜ã€R2 ä¸æ¸…ç†ï¼Œå¯¹å¤–å¯è§çš„å›¾ç‰‡å°±ä¼šç¨³å®šå­˜åœ¨ã€‚</p>
<hr/>
<h2 data-id="heading-6">7. å°å°çš„å®‰å…¨ä¸ç®¡ç†ç»†èŠ‚</h2>
<p>è™½ç„¶ ImgNaondo ä¸»è¦é¢å‘ä¸ªäººæˆ–å°å›¢é˜Ÿä½¿ç”¨ï¼Œä½†ä¸€äº›åŸºç¡€çš„å®‰å…¨å’Œç®¡ç†ç»†èŠ‚è¿˜æ˜¯å€¼å¾—é¡ºæ‰‹åšå¥½ã€‚</p>
<p>æœ€å…³é”®çš„æ˜¯ä¸Šä¼ å¯†ç  <code>PASSWORD</code>ã€‚ä¸ºäº†é¿å…è„šæœ¬è¢«åˆ«äººæ‹¿åˆ°å°±éšæ„ä¸Šä¼ ï¼Œå¯ä»¥å†åŠ ä¸€å±‚ç®€å•çš„çº¦æŸï¼Œä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> allowedOrigins = [<span class="hljs-string">"https://img.example.com"</span>, <span class="hljs-string">"https://wiki.example.com"</span>];

<span class="hljs-keyword">if</span> (request.<span class="hljs-property">method</span> === <span class="hljs-string">"POST"</span>) {
  <span class="hljs-keyword">const</span> origin = request.<span class="hljs-property">headers</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">"Origin"</span>);
  <span class="hljs-keyword">if</span> (!allowedOrigins.<span class="hljs-title function_">includes</span>(origin)) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Response</span>(<span class="hljs-string">"Forbidden"</span>, { <span class="hljs-attr">status</span>: <span class="hljs-number">403</span> });
  }
  <span class="hljs-comment">// å†ç»§ç»­å¯†ç æ ¡éªŒå’Œä¸Šä¼ é€»è¾‘</span>
}
</code></pre>
<p>å¦å¤–ï¼Œå¦‚æœå›¾ç‰‡æ•°é‡ä¼šé•¿æœŸå¢é•¿ï¼Œå»ºè®®æ—¶ä¸æ—¶æŸ¥çœ‹ä¸€ä¸‹ R2 çš„å®¹é‡å’Œè®¡è´¹æƒ…å†µï¼›å¿…è¦æ—¶è¿˜å¯ä»¥è®¾ç½®ç”Ÿå‘½å‘¨æœŸè§„åˆ™ï¼Œå°†éå¸¸å¤è€ã€å‡ ä¹ä¸ä¼šå†è®¿é—®çš„å›¾ç‰‡è¿ç§»åˆ°æ›´ä¾¿å®œçš„å­˜å‚¨ç­‰çº§ã€‚</p>
<p>ImgNaondo çš„ Tag Cloud å’Œæœç´¢åŠŸèƒ½ï¼Œä¹Ÿå¯ä»¥å¸®åŠ©ç®¡ç†ï¼šç»™æ¯ä¸€æ‰¹å›¾ç‰‡æ‰“ä¸Šå¸¦é¡¹ç›®åæˆ–ä¸»é¢˜çš„æ ‡ç­¾ï¼Œä¾‹å¦‚ <code>blog</code>, <code>doc</code>, <code>invoice</code>ï¼ŒåæœŸæŸ¥æ‰¾å’Œæ‰¹é‡æ•´ç†ä¼šè½»æ¾å¾ˆå¤šã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[SpringBoot 3.2æ–°ç‰¹æ€§å®æˆ˜ï¼šè¿™5ä¸ªéšè—æŠ€å·§è®©ä½ çš„åº”ç”¨æ€§èƒ½é£™å‡50%]]></title>    <link>https://juejin.cn/post/7572714389921857576</link>    <guid>https://juejin.cn/post/7572714389921857576</guid>    <pubDate>2025-11-15T04:16:57.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572714389921857576" data-draft-id="7572408522438426659" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="SpringBoot 3.2æ–°ç‰¹æ€§å®æˆ˜ï¼šè¿™5ä¸ªéšè—æŠ€å·§è®©ä½ çš„åº”ç”¨æ€§èƒ½é£™å‡50%"/> <meta itemprop="keywords" content="åç«¯,å‰ç«¯,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-11-15T04:16:57.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="IT_é™ˆå¯’"/> <meta itemprop="url" content="https://juejin.cn/user/1638743356481367"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            SpringBoot 3.2æ–°ç‰¹æ€§å®æˆ˜ï¼šè¿™5ä¸ªéšè—æŠ€å·§è®©ä½ çš„åº”ç”¨æ€§èƒ½é£™å‡50%
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1638743356481367/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    IT_é™ˆå¯’
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-15T04:16:57.000Z" title="Sat Nov 15 2025 04:16:57 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>SpringBoot 3.2æ–°ç‰¹æ€§å®æˆ˜ï¼šè¿™5ä¸ªéšè—æŠ€å·§è®©ä½ çš„åº”ç”¨æ€§èƒ½é£™å‡50%</strong></h2>
<h2 data-id="heading-1">å¼•è¨€</h2>
<p>SpringBoot 3.2ä½œä¸ºSpringç”Ÿæ€çš„æœ€æ–°é‡Œç¨‹ç¢‘ç‰ˆæœ¬ï¼Œä¸ä»…ç»§æ‰¿äº†Spring Framework 6.1çš„å¼ºå¤§åŠŸèƒ½ï¼Œè¿˜å¼•å…¥äº†å¤šé¡¹æ€§èƒ½ä¼˜åŒ–å’Œå¼€å‘æ•ˆç‡æå‡çš„ç‰¹æ€§ã€‚å°½ç®¡å®˜æ–¹æ–‡æ¡£å·²ç»åˆ—ä¸¾äº†ä¸»è¦æ›´æ–°ï¼Œä½†è®¸å¤šéšè—çš„æŠ€å·§å’Œæœ€ä½³å®è·µå°šæœªè¢«å¹¿æ³›è®¨è®ºã€‚æœ¬æ–‡å°†æ·±å…¥æŒ–æ˜SpringBoot 3.2çš„5ä¸ªå…³é”®ç‰¹æ€§ï¼Œç»“åˆå®æˆ˜æ¡ˆä¾‹å±•ç¤ºå¦‚ä½•é€šè¿‡è¿™äº›æŠ€å·§å°†åº”ç”¨æ€§èƒ½æå‡50%ç”šè‡³æ›´å¤šã€‚</p>
<p>æ— è®ºæ˜¯å“åº”å¼ç¼–ç¨‹çš„å¢å¼ºã€GraalVMåŸç”Ÿé•œåƒæ”¯æŒçš„ä¼˜åŒ–ï¼Œè¿˜æ˜¯JVMè°ƒä¼˜çš„æ–°é€‰é¡¹ï¼Œè¿™äº›ç‰¹æ€§éƒ½èƒ½æ˜¾è‘—é™ä½å»¶è¿Ÿã€æé«˜ååé‡ã€‚æˆ‘ä»¬å°†ä»åº•å±‚åŸç†å‡ºå‘ï¼Œé€æ­¥è§£æå¦‚ä½•åœ¨å®é™…é¡¹ç›®ä¸­è½åœ°è¿™äº›ä¼˜åŒ–æ‰‹æ®µã€‚</p>
<h2 data-id="heading-2">ä¸»ä½“</h2>
<h3 data-id="heading-3">1. è™šæ‹Ÿçº¿ç¨‹ï¼ˆVirtual Threadsï¼‰çš„æ·±åº¦é›†æˆ</h3>
<p>SpringBoot 3.2å…¨é¢æ‹¥æŠ±JDK 21çš„è™šæ‹Ÿçº¿ç¨‹ç‰¹æ€§ï¼Œé€šè¿‡ç®€å•çš„é…ç½®å³å¯å°†ä¼ ç»Ÿé˜»å¡å¼IOæ¨¡å‹å‡çº§ä¸ºè½»é‡çº§çº¿ç¨‹æ¨¡å‹ã€‚ç›¸è¾ƒäºå¹³å°çº¿ç¨‹ï¼ˆPlatform Threadï¼‰ï¼Œè™šæ‹Ÿçº¿ç¨‹çš„ä¸Šä¸‹æ–‡åˆ‡æ¢æˆæœ¬æä½ï¼Œç‰¹åˆ«é€‚åˆé«˜å¹¶å‘åœºæ™¯ã€‚</p>
<p><strong>å®æˆ˜æŠ€å·§ï¼š</strong></p>
<pre><code class="hljs language-properties" lang="properties"># application.properties
spring.threads.virtual.enabled=true
spring.datasource.hikari.thread-factory=org.springframework.boot.task.VirtualThreadTaskExecutorBuilder
</code></pre>
<p>é€šè¿‡ä¸Šè¿°é…ç½®ï¼ŒTomcat/Jettyç­‰Webå®¹å™¨çš„è¯·æ±‚å¤„ç†çº¿ç¨‹æ± ä»¥åŠHikariCPçš„è¿æ¥æ± éƒ½å°†ä½¿ç”¨è™šæ‹Ÿçº¿ç¨‹ã€‚å®æµ‹è¡¨æ˜ï¼Œåœ¨IOå¯†é›†å‹åœºæ™¯ä¸‹ï¼ˆå¦‚æ•°æ®åº“æŸ¥è¯¢æˆ–HTTPè°ƒç”¨ï¼‰ï¼Œååé‡å¯æå‡30%-40%ã€‚</p>
<p><strong>æ³¨æ„äº‹é¡¹ï¼š</strong></p>
<ul>
<li>éœ€ç¡®ä¿JDKç‰ˆæœ¬â‰¥21</li>
<li>Synchronizedå—ä¼šå¼ºåˆ¶ç»‘å®šå¹³å°çº¿ç¨‹ï¼Œåº”æ”¹ç”¨<code>ReentrantLock</code></li>
<li>é¿å…åœ¨è™šæ‹Ÿçº¿ç¨‹ä¸­æ‰§è¡ŒCPUå¯†é›†å‹ä»»åŠ¡</li>
</ul>
<h3 data-id="heading-4">2. GraalVMåŸç”Ÿé•œåƒç¼–è¯‘ä¼˜åŒ–</h3>
<p>SpringBoot 3.2å¯¹GraalVMåŸç”Ÿé•œåƒçš„æ”¯æŒè¾¾åˆ°ç”Ÿäº§å°±ç»ªçŠ¶æ€ï¼ŒAOTï¼ˆAhead-of-Timeï¼‰ç¼–è¯‘ç”Ÿæˆçš„äºŒè¿›åˆ¶æ–‡ä»¶å¯åŠ¨æ—¶é—´å¯æ§åˆ¶åœ¨100msä»¥å†…ï¼Œå†…å­˜å ç”¨å‡å°‘50%ã€‚æ–°ç‰ˆNative Build Toolsæä¾›äº†æ›´æ™ºèƒ½çš„åå°„/èµ„æºè‡ªåŠ¨æ£€æµ‹æœºåˆ¶ã€‚</p>
<p><strong>å…³é”®é…ç½®ï¼š</strong></p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- pom.xml --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">build</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">plugins</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.graalvm.buildtools<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>native-maven-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">quickBuild</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">quickBuild</span>&gt;</span> <span class="hljs-comment">&lt;!-- å¯ç”¨å®éªŒæ€§å¿«é€Ÿæ¨¡å¼ --&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">optimizationLevel</span>&gt;</span>O3<span class="hljs-tag">&lt;/<span class="hljs-name">optimizationLevel</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">plugins</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">build</span>&gt;</span>
</code></pre>
<p>é€šè¿‡<code>@NativeHint</code>æ³¨è§£å¯æ‰‹åŠ¨æ³¨å†Œéœ€è¦åŠ¨æ€å¤„ç†çš„ç±»ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@NativeHint(
    types = @TypeHint(types = com.example.CustomClass.class),
    resources = @ResourceHint(patterns = "META-INF/resources/*")
)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">NativeConfig</span> {}
</code></pre>
<h3 data-id="heading-5">3. JDBCè¿æ¥æ± çš„æ™ºèƒ½é¢„çƒ­ç­–ç•¥</h3>
<p>æ–°å¢çš„<code>spring.datasource.hikari.pool-warmup</code>å±æ€§å…è®¸åœ¨åº”ç”¨å¯åŠ¨æ—¶é¢„å…ˆå»ºç«‹æœ€å°ç©ºé—²è¿æ¥æ•°ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># application.yml</span>
<span class="hljs-attr">spring:</span>
  <span class="hljs-attr">datasource:</span>
    <span class="hljs-attr">hikari:</span>
      <span class="hljs-attr">pool-warmup:</span> <span class="hljs-literal">true</span>
      <span class="hljs-attr">minimum-idle:</span> <span class="hljs-number">10</span> <span class="hljs-comment"># Warm-up connections count</span>
</code></pre>
<p>æµ‹è¯•æ˜¾ç¤ºè¯¥ç‰¹æ€§å¯å°†é¦–æ¬¡æ•°æ®åº“æŸ¥è¯¢å»¶è¿Ÿä»200msé™è‡³20msä»¥å†…ã€‚ç»“åˆHikariCPçš„<code>connectionTestQuery</code>ä¼˜åŒ–ï¼Œå…¨é“¾è·¯å“åº”æ—¶é—´P99ä¸‹é™15%ã€‚</p>
<h3 data-id="heading-6">4. RSocketæœåŠ¡ç«¯è´Ÿè½½å‡è¡¡å¢å¼º</h3>
<p>å¯¹äºå¾®æœåŠ¡æ¶æ„ï¼ŒSpringBoot 3.2æ”¹è¿›äº†RSocketè´Ÿè½½å‡è¡¡ç®—æ³•ï¼ˆæ–°å¢WeightedLoadBalanceStrategyï¼‰ï¼Œæ”¯æŒåŸºäºæœåŠ¡ç«¯å®æ—¶æŒ‡æ ‡çš„åŠ¨æ€æƒé‡åˆ†é…ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Bean</span>
<span class="hljs-keyword">public</span> RSocketRequester <span class="hljs-title function_">requester</span><span class="hljs-params">(RSocketStrategies strategies)</span> {
    <span class="hljs-keyword">return</span> RSocketRequester.builder()
           .rsocketConnector(connector -&gt; connector.loadBalancer(LoadBalancerFactory 
               .builder(<span class="hljs-keyword">new</span> <span class="hljs-title class_">WeightedLoadBalanceStrategy</span>())
               .withHealthCheckInterval(Duration.ofSeconds(<span class="hljs-number">5</span>))
               .build()))
           .dataMimeType(MimeTypeUtils.APPLICATION_JSON)
           .tcp(<span class="hljs-string">"localhost"</span>, <span class="hljs-number">7000</span>);
}
</code></pre>
<p>é…åˆæ–°ç‰ˆMicrometeræŒ‡æ ‡å¯¼å‡ºå™¨ï¼ˆæ”¯æŒRSocketåè®®ï¼‰ï¼Œå¯å®ç°äºšç§’çº§çš„æœåŠ¡å®ä¾‹æƒé‡è°ƒæ•´ã€‚æŸç”µå•†å‹æµ‹æ¡ˆä¾‹æ˜¾ç¤ºè¯¥æ–¹æ¡ˆä½¿é”™è¯¯ç‡é™ä½60%ã€‚</p>
<h3 data-id="heading-7">5.JVMå†…å­˜å¸ƒå±€ä¼˜åŒ–ä¸CRaCæ”¯æŒ</h3>
<p>é€šè¿‡JVMå‚æ•°è°ƒæ•´å¯¹è±¡æŒ‡é’ˆå‹ç¼©ï¼ˆOOPsï¼‰ç­–ç•¥æ˜¾è‘—å‡å°‘å†…å­˜å ç”¨ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">java -jar your-app.jar \
     -XX:+UseCompressedOops \
     -XX:ObjectAlignmentInBytes=16 \ <span class="hljs-comment"># SpringBooté»˜è®¤ä¸º8,è°ƒæ•´ä¸º16æå‡å¤§å¯¹è±¡è®¿é—®é€Ÿåº¦</span>
     -XX:+UseZGC \
     -Xmx512m <span class="hljs-comment"># ZGCä¸‹å¯å®‰å…¨è®¾ç½®è¾ƒä½å †å¤§å°</span>
</code></pre>
<p>åŒæ—¶æ”¯æŒCRaCï¼ˆCoordinated Restore at Checkpointï¼‰æŠ€æœ¯å®ç°äºšæ¯«ç§’çº§æ¢å¤ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@RestControllerAdvice</span> 
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CracHandler</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">CRaCLifecycle</span> {

    <span class="hljs-meta">@Override</span> 
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">beforeCheckpoint</span><span class="hljs-params">(Context&lt;? extends Resource&gt; context)</span> { <span class="hljs-comment">/*æ¸…ç†ä¸´æ—¶æ–‡ä»¶*/</span> }
    
    <span class="hljs-meta">@Override</span> 
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">afterRestore</span><span class="hljs-params">(Context&lt;? extends Resource&gt; context)</span> { <span class="hljs-comment">/*é‡å»ºç¼“å­˜*/</span> }
}
</code></pre>
<p>æŸé‡‘èç³»ç»Ÿé‡‡ç”¨è¯¥æ–¹æ¡ˆåå†·å¯åŠ¨æ—¶é—´ä»8ç§’ç¼©çŸ­è‡³200msã€‚</p>
<h2 data-id="heading-8">æ€»ç»“</h2>
<p>SpringBoot 3.2çš„æ€§èƒ½ä¼˜åŒ–ç©ºé—´è¿œè¶…è¡¨é¢å¯è§çš„åŠŸèƒ½åˆ—è¡¨ã€‚æœ¬æ–‡æ­ç¤ºçš„äº”é¡¹å…³é”®æŠ€æœ¯â€”â€”ä»è™šæ‹Ÿçº¿ç¨‹çš„é©å‘½æ€§å¹¶å‘æ¨¡å‹åˆ°GraalVMåŸç”Ÿç¼–è¯‘çš„ç²¾è°ƒå‚æ•°â€”â€”å…±åŒæ„æˆäº†ç°ä»£Javaåº”ç”¨çš„é«˜æ€§èƒ½åŸºçŸ³ã€‚å®é™…è½åœ°æ—¶éœ€è¦æ ¹æ®å…·ä½“ä¸šåŠ¡ç‰¹ç‚¹ç»„åˆä½¿ç”¨è¿™äº›ç‰¹æ€§ï¼š</p>
<ol>
<li>IOå¯†é›†å‹åœºæ™¯ä¼˜å…ˆå¯ç”¨è™šæ‹Ÿçº¿ç¨‹</li>
<li>Serverlessç¯å¢ƒé€‰æ‹©GraalVMåŸç”Ÿé•œåƒ+CRaCç»„åˆæ–¹æ¡ˆ<br/>
3.å¾®æœåŠ¡æ¶æ„å……åˆ†åˆ©ç”¨RSocketçš„åŠ¨æ€è´Ÿè½½å‡è¡¡èƒ½åŠ›</li>
</ol>
<p>æ‰€æœ‰è¿™äº›æ”¹è¿›éƒ½éµå¾ª"é›¶ä¾µå…¥"åŸåˆ™â€”â€”æ— éœ€é‡æ„æ ¸å¿ƒä¸šåŠ¡ä»£ç å³å¯è·å¾—æ˜¾è‘—æ”¶ç›Šã€‚éšç€Javaç”Ÿæ€å‘äº‘åŸç”Ÿæ—¶ä»£çš„æŒç»­æ¼”è¿›ï¼ŒæŒæ¡è¿™äº›æ·±å±‚æ¬¡ä¼˜åŒ–æŠ€å·§å°†æˆä¸ºé«˜çº§å¼€å‘è€…çš„æ ¸å¿ƒç«äº‰åŠ›</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[2025å¹´10æœˆæ€»ç»“]]></title>    <link>https://juejin.cn/post/7572459217811111999</link>    <guid>https://juejin.cn/post/7572459217811111999</guid>    <pubDate>2025-11-15T04:29:44.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572459217811111999" data-draft-id="7572405211441971243" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="2025å¹´10æœˆæ€»ç»“"/> <meta itemprop="keywords" content="AIGC,Coze,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-11-15T04:29:44.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è¢åº­æ–°"/> <meta itemprop="url" content="https://juejin.cn/user/1207714136735408"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            2025å¹´10æœˆæ€»ç»“
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1207714136735408/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è¢åº­æ–°
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-15T04:29:44.000Z" title="Sat Nov 15 2025 04:29:44 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯è¢åº­æ–°ã€‚2025å¹´10æœˆè½¬ç¬å·²é€ï¼Œä»Šå¤©ç³»ç»Ÿæ¢³ç†äº†ä¸‹10æœˆçš„ä¸»è¦å·¥ä½œï¼Œåœ¨è¿™é‡Œç®€è¦åšä¸ªæœˆæ€»ç»“ï¼Œä¸å„ä½æœ‹å‹ä»¬åˆ†äº«ä¸‹ã€‚</p>
<h2 data-id="heading-0">åšå®¢çŸ­è§†é¢‘åˆ›ä½œ</h2>
<p>è¯´å®è¯ï¼Œè¿™ä¸ªæœˆå·æ‡’äº†ã€‚åªå†™äº†1ç¯‡åšå®¢æ–‡ç« ï¼ŒçŸ­è§†é¢‘åˆ›ä½œæ— ã€‚</p>
<p>æˆ‘å¯¹è‡ªå·±çš„è¦æ±‚æ˜¯ï¼Œæ¯å‘¨è‡³å°‘è¾“å‡º1ç¯‡æ–‡ç« ï¼Œ1æ¡çŸ­è§†é¢‘ã€‚æœ¬æœˆä¸¤é¡¹ä»»åŠ¡å‡æœªå®Œæˆï¼Œç”šè‡³çŸ­è§†é¢‘è¿˜æŒ‚äº†é›¶ï¼Œæœ¬æƒ³æ‰¾ä¸ªç†ç”±æ¬ºéª—ä¸‹è‡ªå·±ï¼Œè¿™æ ·ä¼šå¥½å—ç‚¹ï¼Œæƒ³æ¥æƒ³å»é™¤äº†æ‡’ï¼ŒçœŸçš„æ²¡åˆ«çš„åŸå› äº†ã€‚</p>
<p>æ˜æ˜çŸ¥é“æ—¶é—´å¾ˆçè´µï¼Œè¿˜åœ¨å¤§æŠŠå¤§æŠŠåœ°æµªè´¹æ—¶é—´ã€‚2025å¹´åªå‰©ä¸€ä¸ªå¤šæœˆäº†ï¼Œæƒ³æƒ³å°±å¯æ€•ï¼Œæ„Ÿè§‰ä¸Šå‘¨æ‰è¿‡å®Œçš„æ˜¥èŠ‚ï¼Œ2025å¹´æ€ä¹ˆå°±å¿«æ²¡äº†ï½</p>
<h2 data-id="heading-1">å¸‚åœºåˆä½œä¼™ä¼´</h2>
<p>ä»Šå¹´ï¼Œæˆ‘å…¬å¸å¼€æ‹“äº†ä¸€ä¸ªæ–°ä¸šåŠ¡â€œäººå·¥æ™ºèƒ½æŠ€æœ¯èŒä¸šæŠ€æœ¯è¯ä¹¦è®¤è¯åŸ¹è®­â€ï¼Œæˆ‘å¸å‘å·¥ä¸šå’Œä¿¡æ¯åŒ–éƒ¨æ•™è‚²ä¸è€ƒè¯•ä¸­å¿ƒç”³æŠ¥äº†â€œäººå·¥æ™ºèƒ½æŠ€æœ¯åº”ç”¨å·¥ç¨‹å¸ˆâ€å’Œâ€œç”Ÿæˆå¼äººå·¥æ™ºèƒ½æŠ€æœ¯åº”ç”¨å·¥ç¨‹å¸ˆâ€ä¸¤ä¸ªæ–¹å‘çš„è¯ä¹¦ã€‚åŒæ—¶ï¼Œæˆ‘æ˜¯è¯¥è®¤è¯çš„äººæ‰åŸ¹å…»æ ‡å‡†ä¸»è¦å‚ç¼–äººã€‚ä¸”ï¼Œæˆ‘å¸æ˜¯è¥¿åŒ—åœ°åŒºå”¯ä¸€ä¸€å®¶å·¥ä¿¡éƒ¨æ•™è€ƒä¸­å¿ƒè®¤è¯æˆæƒåŸ¹è®­å•ä½ã€‚</p>
<p>ä¸ºäº†å¼€æ‹“å¸‚åœºï¼Œæˆ‘ä¹Ÿä¼šå’Œå…¬å¸çš„è€å¸ˆå‡ºå»è·‘ä¸šåŠ¡ï¼Œå¯»æ‰¾åˆä½œä¼™ä¼´ã€‚è¿™ä¸ªæœˆï¼Œæ–°å»ºç«‹äº†6ä¸ªåˆä½œä¼™ä¼´ï¼Œå…¶ä¸­æœ‰ä»¥ä¸ªäººåä¹‰ä¹Ÿæœ‰ä»¥å…¬å¸åä¹‰å’Œæˆ‘ä»¬åˆä½œçš„ã€‚å¯»æ±‚åˆä½œä¼™ä¼´å¹¶å»ºç«‹åˆä½œå…³ç³»æ˜¯å›°éš¾çš„ï¼Œé¦–å…ˆä½ å¾—è®©äººå®¶å……åˆ†è®¤å¯æˆ‘ä»¬ç°åœ¨æ‰€åšçš„äº‹æƒ…ï¼Œå…‰è¿™è¿˜ä¸è¡Œçš„ï¼Œå…³é”®åœ¨äºäººå®¶è¿˜å¾—æ„¿æ„æŠ•å…¥æ—¶é—´ã€ç²¾åŠ›å’Œèµ„æºå»ä¸€åŒåšè¿™ä»¶äº‹ã€‚</p>
<p>æˆ‘æ˜¯çœŸå¿ƒæ„¿å¤§å®¶åˆä½œå…±èµ¢ï¼Œå…±åŒå¯Œè£•ï½</p>
<h2 data-id="heading-2">è¯¾ç¨‹ç ”å‘</h2>
<p>ç»™å¤§å®¶æ±‡æŠ¥ä¸‹è¿™ä¸ªæœˆã€Šäººå·¥æ™ºèƒ½åº”ç”¨è®¤è¯åŸ¹è®­è¯¾ç¨‹ã€‹äº§å“çš„ç ”å‘è¿›åº¦ã€‚</p>
<p>å…¶ä¸­ã€Šå…¨é¢æŒæ¡LiblibAIåœ¨çº¿AIç»˜ç”»ã€‹æ¨¡å—å·²ç»ç ”å‘å®Œæˆï¼Œå…±è®¡24è¯¾æ—¶ï¼Œè®¡åˆ’11æœˆåˆä¸Šçº¿ã€‚è¿™ä¸ªæ¨¡å—è¯¾ç¨‹å°†å…¨æ–¹ä½è¯¦ç»†çš„è®²è§£å¦‚ä½•åœ¨LiblibAIä¸Šè¿›è¡ŒAIåˆ›ä½œï¼Œæ— éœ€ä»£ç å’Œç¡¬ä»¶ï¼Œä¸€é”®å¼€å¯AIè‰ºæœ¯åˆ›ä½œä¹‹æ—…ï¼å¿«é€Ÿä»AIç»˜ç”»å°ç™½è¿›é˜¶æˆåˆ›ä½œè¾¾äººï¼Œè½»æ¾è½åœ°ä½œå“ç›´è‡³å˜ç°ã€‚</p>
<p>å¾ˆå¤šæœ‹å‹æƒ³åˆ›ä¸šï¼Œè·¨å¢ƒç”µå•†æ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©ã€‚æˆ‘ä»¬è”åˆå‰å­—èŠ‚è·³åŠ¨è·¨å¢ƒç”µå•†é«˜çº§è¿è¥å¸ˆå…±åŒç ”å‘ã€ŠAI+ç¾å®¢å¤šè·¨å¢ƒç”µå•†å®æˆ˜ã€‹ï¼Œå°±æ˜¯æƒ³ä»0åˆ°1ï¼Œæ‰‹æŠŠæ‰‹å¸¦ä½ ç©è½¬è·¨å¢ƒç”Ÿæ„ã€‚ç›®å‰ï¼Œå·²ç»å½•åˆ¶18èŠ‚ï¼Œå¾ˆå¿«å°±ä¼šæ¨ä¸Šçº¿ã€‚</p>
<p>åŒæ—¶ï¼Œæˆ‘è‡ªå·±ä¹Ÿåœ¨ç ”å‘ä¸€å¥—ã€Šå¾®ä¿¡å•†ä¸šç”Ÿæ€å¹³æ°‘åˆ›ä¸šã€‹è¯¾ç¨‹ï¼Œè¿™æ˜¯ä¸€å¥—å…³äºä¸ªäººåˆ›ä¸šçš„å•†ä¸šæ€ç»´è¯¾ç¨‹ã€‚ä¸¤å¹´å‰æˆ‘å°±åœ¨å¼€å§‹å‡†å¤‡å…¶ä¸­çš„å†…å®¹ï¼Œå·²ç»å®Œæˆ9èŠ‚è¯¾ç¨‹çš„å½•åˆ¶ï¼Œé¢„è®¡åœ¨11æœˆåº•ä¸Šä¸‹ã€‚æˆ‘è®²äº†8å¹´è¯¾ï¼Œå¤§å¤§å°å°èƒ½è®²50å¤šé—¨è¯¾ï¼Œä½†æ˜¯å¦‚æœåªæ¨èä¸€é—¨è¯¾ï¼Œé‚£å°±æ˜¯â€”â€”ã€Šå¾®ä¿¡å•†ä¸šç”Ÿæ€å¹³æ°‘åˆ›ä¸šã€‹ã€‚</p>
<h2 data-id="heading-3">çŸ¥è¯†æ˜Ÿçƒ</h2>
<p>10æœˆä»½ï¼Œæˆ‘åœ¨ã€Œäººäººéƒ½è¦å­¦AIã€çŸ¥è¯†æ˜Ÿçƒä¸­å‘å¸ƒäº†6ç¯‡èšç„¦AIGCé¢†åŸŸå‰æ²¿æŠ€æœ¯çš„ä¸»é¢˜å†…å®¹ã€‚åŒæ—¶åœ¨ã€Œåœ†å¿ƒå­¦å ‚ã€Javaæ˜Ÿçƒé‡Œæ›´æ–°äº†8ç¯‡ä¸»é¢˜å†…å®¹ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c01afabf557841c692113dc6838b0ac1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6KKB5bqt5paw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763785783&amp;x-signature=GCkggVZWW3LWvpBGcvWwbCjrlOU%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-4">åœ†å¿ƒå¯ç‚¹å¸‚åœºçŸ¥è¯†åº“</h2>
<p>ä¸ºä¾¿äºå„åˆä½œä¼™ä¼´å¿«é€Ÿäº†è§£ã€Šäººå·¥æ™ºèƒ½åº”ç”¨è®¤è¯åŸ¹è®­è¯¾ç¨‹ã€‹äº§å“ï¼Œæˆ‘ä»¬ç‰¹åˆ«æ•´ç†äº†æœ¬äº§å“çŸ¥è¯†åº“ã€‚å†…å®¹åŒ…å«å…¬å¸ç®€ä»‹ã€è¯ä¹¦ä»‹ç»ã€è¯¾ç¨‹ç®€ç« ã€è¯¾ç¨‹æµ·æŠ¥ã€æŠ¥åè¡¨æ ¼ã€æ‹›ç”Ÿè®²åº§ã€å’¨è¯¢è¯æœ¯ã€è€ƒè¯•æµç¨‹ã€ç»ƒä¹ é¢˜åº“ç­‰æ ¸å¿ƒèµ„æ–™ã€‚æœ¬è¯¾ç¨‹å°†æŒç»­ä¼˜åŒ–å‡çº§ï¼Œç›¸å…³å¸‚åœºç‰©æ–™è¯·ä»¥çŸ¥è¯†åº“æœ€æ–°ç‰ˆæœ¬ä¸ºå‡†ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/703a76e2bcf843b9a23f010b1facb890~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6KKB5bqt5paw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763785783&amp;x-signature=6Kwof2OQlfiXrzXVmT%2BHehC9DJU%3D" alt="" loading="lazy"/></p>
<p>åœ†å¿ƒå¯ç‚¹å¸‚åœºçŸ¥è¯†åº“å†…å®¹è§ä¸‹å›¾ã€‚10æœˆä»½åœ¨è¿™ä¸ªçŸ¥è¯†åº“çš„æ­å»ºä¸ŠèŠ±è´¹äº†å·¨å¤§çš„æ—¶é—´ï¼Œæ¯«ä¸å¤¸å¼ ã€‚ç›®çš„å°±æ˜¯å¸Œæœ›æˆ‘ä»¬çš„åˆä½œä¼™ä¼´æ›´åŠ å¿«é€Ÿçš„äº†è§£æˆ‘ä»¬çš„äº§å“ï¼Œç”¨æœ€å¿«æœ€çŸ­çš„æ—¶é—´å®ç°åˆä½œå…±èµ¢ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/deb80f4ab07747b49c843cb5a77348f3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6KKB5bqt5paw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763785783&amp;x-signature=5uqmJdjkeUszt8nEn2KbNREt1S8%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-5">çŸ¥è¯†åº—é“ºè¿è¥</h2>
<p>è¿™ä¸ªæœˆèŠ±äº†å¾ˆå¤§åŠ›æ°”æ¥è¿è¥åº—é“ºï¼Œå…ˆåæ¨ä¸Šçº¿ã€Šç©è½¬å¤§æ¨¡å‹æç¤ºè¯å·¥ç¨‹ï¼šä»åŸºç¡€æ¡†æ¶åˆ°é«˜çº§åº”ç”¨çš„ç³»ç»Ÿè¯¾ç¨‹ã€‹ã€ã€Šåˆ©ç”¨äººå·¥æ™ºèƒ½æˆä¸ºå­¦ä¹ ä¸“å®¶ï¼šAIèµ‹èƒ½é«˜æ•ˆå­¦ä¹ ä¸èŒåœºåŠå…¬ã€‹ã€ã€Šå¤§æ¨¡å‹æœ¬åœ°éƒ¨ç½²ä¸ä¸ªäººçŸ¥è¯†åº“æ­å»ºã€‹ã€ã€ŠCozeæ‰£å­AIæ™ºèƒ½ä½“ä¸å·¥ä½œæµå¼€å‘å®æˆ˜ã€‹ã€ã€ŠLuaç¼–ç¨‹å®æˆ˜ï¼šä»åŸºç¡€è¯­æ³•åˆ°é«˜çº§ç‰¹æ€§ã€‹ã€ã€ŠRedisé«˜æ€§èƒ½ç¼“å­˜ä¸åˆ†å¸ƒå¼æ¶æ„å®æˆ˜ã€‹å’Œã€Šäººå·¥æ™ºèƒ½åº”ç”¨å…¨é“¾è·¯èŒä¸šæŠ€èƒ½åŸ¹è®­è¯¾ç¨‹ã€‹ç­‰7é—¨è¯¾ç¨‹ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/074c8fab11364c3eba116ab6f5cad151~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6KKB5bqt5paw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763785783&amp;x-signature=FvLqp4%2FV20ociZY1jcGgntpIqc4%3D" alt="" loading="lazy"/></p>
<p>å…¶å®ï¼Œæ—¶é—´ä¸»è¦èŠ±è´¹åœ¨äº†è§†é¢‘å°é¢å’Œé•¿å›¾æµ·æŠ¥è®¾è®¡ä¸Šã€‚æˆ‘æ˜¯ä¸æ‡‚è®¾è®¡çš„ï¼Œé‚£å’‹åŠï¼Ÿä¸æ‡‚å°±å­¦å‘€ï¼Œè¿˜èƒ½å’‹åŠï¼Œæˆ‘åˆæ²¡é’±è¯·åˆ«äººå¸®æˆ‘è®¾è®¡ã€‚å½“ç„¶äº†ï¼Œæˆ‘å¯¹è‡ªå·±è®¾è®¡çš„æµ·æŠ¥è¿˜æ˜¯æŒºæ»¡æ„çš„ï¼Œå¤§å®¶è§‰å¾—å’‹æ ·å‘¢ï¼Ÿ</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/44deba7e1c47480aaec55d0f21a4d9bc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6KKB5bqt5paw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763785783&amp;x-signature=vHxu7HnXdYaGzOCSM6R6fsp%2Blj4%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-6">ç‰©æ–™æ›´æ–°</h2>
<p>è¯¾ç¨‹ç®€ç« æ˜¯éå¸¸é‡è¦çš„å¸‚åœºæ”¯æŒç‰©æ–™æ–‡ä»¶ï¼Œè¯¾ç¨‹å†…å®¹æœ‰æ–°çš„è¿­ä»£äº†ï¼Œç¬¬ä¸€æ—¶é—´è¦åŒæ­¥åˆ°è¯¾ç¨‹ç®€ç« ä¸­ï¼ŒåŒæ—¶è¿˜è¦è€ƒè™‘æ’ç‰ˆè®¾è®¡ï¼Œæ€»ä¸èƒ½å¤ªä¸‘å§ï¼Œé‚£æ ·çœ‹ä¸Šå»å°±å¾ˆlowã€‚ä¸‹å›¾æ˜¯ç™¾åˆ†ç™¾ç”±æˆ‘æ“åˆ€è®¾è®¡çš„ç®€ç« ï¼Œå¤§å®¶è§‰å¾—å’‹æ ·å‘¢ï¼Ÿ</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0406094c01e24b13940e6770bb525895~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6KKB5bqt5paw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763785783&amp;x-signature=lNAjwnhMIg7RIlpJkD%2BPtIUN0D0%3D" alt="" loading="lazy"/></p>
<p>ä¸ºåŠ©åŠ›é«˜æ ¡é€‚æ—¶è°ƒæ•´è¯¾ç¨‹ä½“ç³»ï¼ŒæŒç»­æ·±åŒ–æ•™å­¦æ”¹é©ï¼ŒæŒ‡å¯¼æ•°å­—æŠ€æœ¯è·¨å­¦ç§‘äººæ‰åŸ¹å…»ï¼Œè¿›ä¸€æ­¥æå‡æ•™å­¦ä¸ç§‘ç ”èƒ½åŠ›ï¼Œå°†äºæå‡æ•™å­¦ä¸ç§‘ç ”èƒ½åŠ›ï¼Œæˆ‘å¸è®¡åˆ’å¹´åº•æƒ³ä¸¾åŠçº¿ä¸Šä¸çº¿ä¸‹ç›¸ç»“åˆçš„ â€œAI Agent æ™ºèƒ½ä½“å·¥ä½œæµä¸å¤šæ¨¡æ€åº”ç”¨å®æˆ˜èƒ½åŠ›æå‡å¸ˆèµ„ç ”ä¿®ç­â€ï¼Œä¸ºé«˜æ ¡æ•™å¸ˆåšèµ‹èƒ½åŸ¹è®­ã€‚åŸºäºå¸‚åœºè°ƒç ”åŠé«˜æ ¡æ•™å¸ˆæ•™å­¦çš„ç—›ç‚¹é—®é¢˜ï¼Œæˆ‘åˆ¶å®šäº†ä¸€ä»½å¸ˆèµ„åŸ¹å…»æ–¹æ¡ˆã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5182994c5ce84b009ac6dfb28912fc88~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6KKB5bqt5paw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763785783&amp;x-signature=XHBVIq0sQgArE2n81W5k3J%2FqBtA%3D" alt="" loading="lazy"/></p>
<p>åŒæ—¶ï¼Œè¿˜ä¿®æ”¹äº†åŸ¹å…»æ–¹æ¡ˆï¼Œæ ¹æ®ä¸“å®¶è¯„å®¡æ„è§ï¼Œå¯¹éƒ¨åˆ†çš„å†…å®¹åšäº†è°ƒæ•´ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/769da3f3a0a344c8a3cd811b7a815b8c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6KKB5bqt5paw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763785783&amp;x-signature=U4bXIbR0rVbii3gZGBGe2Cb2WUM%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-7">è€å‹èšä¼š</h2>
<p>å›½åº†èŠ‚å‹äººç»“å©šï¼Œå›äº†è¶Ÿè€å®¶ï¼Œé‡åˆ°äº†å‡ ä½åäº”å…­å¹´æœªè§çš„åŒå­¦ï¼Œæ— æ•°ä¸ªç¾å¥½çš„ç¬é—´æµ®ç°åœ¨çœ¼å‰ï¼Œå­¦ç”Ÿæ—¶ä»£æå¦‚æ˜¨æ—¥èˆ¬ã€‚è¿™çœŸæ˜¯å¹¸ç¦ç¾å¥½çš„æ—¶åˆ»ï¼Œå¸Œæœ›å¤§å®¶æœªæ¥å¥åº·å¹³å®‰è¶Šæ¥è¶Šå¥½ï½</p>
<p>10æœˆ15å·ï¼Œåœ¨è¥¿å®‰è§äº†å®å„¿å“¥ï¼Œåˆä¸­æˆ‘ä»¬æ˜¯åŒæ¡Œï¼Œå°è±¡ä¸­é«˜ä¸­æ¯•ä¸šåå°±æ²¡è§äº†ï¼Œä¸€æ™ƒä¹Ÿ12å¹´ä¸è§äº†ã€‚å®å„¿å“¥å¤§å­¦å­¦çš„æ˜¯ç¾æœ¯è®¾è®¡ï¼Œç°åœ¨åœ¨ä¸€å®¶å›½ä¼ä¸Šç­ï¼Œå·¥ä½œäº‹ä¸šé¡ºé£é¡ºæ°´ã€‚</p>
<p>10æœˆ20å·ï¼Œæ°´æ¥è¥¿å®‰å¸ˆèµ„åŸ¹è®­ï¼Œä¸€å—å„¿åƒäº†å¤œå®µä¹ŸèŠäº†å¾ˆå¤šï¼Œæˆ‘å’Œæ°´æ˜¯åˆä¸­é«˜ä¸­åŒç­åŒå­¦ï¼Œç°åœ¨åœ¨æˆ‘ä»¬å¿åŸé‡Œçš„ä¸€ä¸ªé•‡ä¸Šçš„åˆä¸­æ•™ä¹¦ï¼Œæ˜¯ä¸€ä½äººæ°‘æ•™å¸ˆåŒæ—¶ä¹Ÿæ˜¯å­¦æ ¡é‡Œçš„ä¸»ä»»ï¼Œå‰é€”ä¸€ç‰‡å…‰æ˜ã€‚</p>
<h2 data-id="heading-8">è¿åŠ¨å¥èº«</h2>
<p>è¿™ä¸ªæœˆå¥èº«äº†4æ¬¡ï¼Œè¯´å®è¯æœ‰ç‚¹å°‘ï¼Œä½†ä¹Ÿæ²¡å•¥è´Ÿç½ªæ„Ÿï¼Œå¥èº«è¿™ä¸ªäº‹å„¿æˆ‘å‘æ¥å¯¹è‡ªå·±æ˜¯â€œä¸‰å¤©æ‰“é±¼ä¸¤å¤©æ™’ç½‘â€çš„å¿ƒæ€ï¼Œæƒ³èµ·æ¥å°±å»ï¼Œç´¯äº†å°±èººç€ã€‚</p>
<p>è‡ªå¾‹ï¼Œå’±ä¸æ˜¯æ²¡æƒ³è¿‡ï¼Œä¹Ÿä¸æ˜¯æ²¡è¡ŒåŠ¨è¿‡ï¼Œå…³é”®æ˜¯çœŸåšä¸åˆ°ã€‚æˆ‘ä¹Ÿæƒ³å‘ç½‘ä¸Šå¥èº«åšä¸»é‚£æ ·ï¼Œæ— è®ºåˆ®é£ä¸‹é›¨ï¼Œæ¯å¤©å¥èº«ä»ä¸é—´æ–­ï¼Œåæ¥æƒ³æƒ³è¿˜æ˜¯ç®—äº†ã€‚</p>
<p>å•°å•°å—¦å—¦äº†åŠå¤©ï¼Œå¥½äº†ï¼Œä»Šå¤©çš„åˆ†äº«å°±åˆ°è¿™é‡Œå§ï½</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[MyBatis-Plus ä¸åªæ˜¯ç®€åŒ–CRUDï¼èµ„æ·±æ¶æ„å¸ˆæ€»ç»“çš„15ä¸ªé«˜é˜¶ç”¨æ³•]]></title>    <link>https://juejin.cn/post/7572524368876109859</link>    <guid>https://juejin.cn/post/7572524368876109859</guid>    <pubDate>2025-11-15T04:41:51.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572524368876109859" data-draft-id="7564921269491449871" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="MyBatis-Plus ä¸åªæ˜¯ç®€åŒ–CRUDï¼èµ„æ·±æ¶æ„å¸ˆæ€»ç»“çš„15ä¸ªé«˜é˜¶ç”¨æ³•"/> <meta itemprop="keywords" content="åç«¯,Java,MyBatis"/> <meta itemprop="datePublished" content="2025-11-15T04:41:51.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åˆ˜å¤§å"/> <meta itemprop="url" content="https://juejin.cn/user/3507878440995946"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            MyBatis-Plus ä¸åªæ˜¯ç®€åŒ–CRUDï¼èµ„æ·±æ¶æ„å¸ˆæ€»ç»“çš„15ä¸ªé«˜é˜¶ç”¨æ³•
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3507878440995946/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åˆ˜å¤§å
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-15T04:41:51.000Z" title="Sat Nov 15 2025 04:41:51 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯å¤§åï¼ç›¸ä¿¡Javaåç«¯å¼€å‘çš„æœ‹å‹ä»¬å¯¹<code>MyBatis-Plusï¼ˆç®€ç§°MPï¼‰</code>è‚¯å®šä¸é™Œç”Ÿï¼Œå®ƒå¯ä»¥è®©CRUDçš„æ“ä½œç¬é—´èµ·é£ã€‚</p>
<p>ä»Šå¤©å°±ç»™å¤§å®¶åˆ†äº«15ä¸ªä½¿ç”¨æŠ€å·§ã€‚</p>
<h3 data-id="heading-0">1. Service å’Œ Mapperï¼Ÿ</h3>
<p><strong>IService</strong>ï¼šå†…ç½®äº†æµ·é‡ç°æˆæ–¹æ³•ï¼Œ<code>save</code>, <code>update</code>, <code>list</code>, <code>page</code> ç­‰ï¼Œé€‚ç”¨äºç»å¤§å¤šæ•°å•è¡¨ CRUDã€‚
<strong>BaseMapper</strong>ï¼šå½“éœ€è¦è¿›è¡Œå¤æ‚è”è¡¨æŸ¥è¯¢ã€æˆ–è€…è¦å†™è‡ªå®šä¹‰ SQL æ—¶ï¼Œå®ƒå°±æ˜¯ä½ çš„ä¸»æˆ˜åœºã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ç®€å•æŸ¥è¯¢ï¼Œç”¨ Service çš„ lambdaQuery</span>
List&lt;User&gt; users = userService.lambdaQuery()
                .eq(User::getStatus, <span class="hljs-number">1</span>)
                .like(User::getName, <span class="hljs-string">"å¼ "</span>)
                .list();

<span class="hljs-comment">// å¤æ‚æŸ¥è¯¢ï¼Œç”¨ Mapper + XML æˆ–æ³¨è§£ï¼</span>
<span class="hljs-comment">// åœ¨ UserMapper.java ä¸­</span>
<span class="hljs-meta">@Select("SELECT u.*, d.dept_name FROM user u LEFT JOIN dept d ON u.dept_id = d.id WHERE u.id = #{userId}")</span>
UserVO <span class="hljs-title function_">selectUserDetail</span><span class="hljs-params">(<span class="hljs-meta">@Param("userId")</span> Long userId)</span>;
</code></pre>
<p>åˆ«åœ¨ Service é‡Œç¡¬å¡å¤æ‚ SQLï¼Œè¯¥å†™ XML çš„æ—¶å€™è¿˜æ˜¯ä¸èƒ½å·æ‡’ã€‚</p>
<h3 data-id="heading-1">2. Lambda è¡¨è¾¾å¼</h3>
<p>MP æœ€æ£’çš„ç‰¹æ€§ä¹‹ä¸€å°±æ˜¯ Lambda æŸ¥è¯¢ï¼Œ<strong>ç¼–è¯‘æœŸå°±èƒ½å‘ç°å­—æ®µåé”™è¯¯</strong>ï¼Œå‘Šåˆ«è¿è¡Œæ—¶æ‰å‘ç°æ‹¼é”™çš„å°´å°¬ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ã€é”™è¯¯å§¿åŠ¿ã€‘å­—æ®µåæ˜¯å­—ç¬¦ä¸²ï¼Œå®¹æ˜“æ‹¼é”™ï¼Œç¼–è¯‘å™¨ä¸æŠ¥é”™</span>
userService.lambdaQuery().eq(<span class="hljs-string">"naem"</span>, <span class="hljs-string">"å¼ ä¸‰"</span>); <span class="hljs-comment">// è¿è¡Œæ‰æŠ¥é”™ï¼Œå“­æ­»ï¼</span>

<span class="hljs-comment">// ã€æ­£ç¡®å§¿åŠ¿ã€‘ä½¿ç”¨æ–¹æ³•å¼•ç”¨ï¼Œå®‰å…¨åˆä¼˜é›…</span>
userService.lambdaQuery().eq(User::getName, <span class="hljs-string">"å¼ ä¸‰"</span>); 
<span class="hljs-comment">// ç¼–è¯‘ä¸é€šè¿‡ï¼Œç«‹é©¬æ”¹æ­£ï¼</span>
</code></pre>
<h3 data-id="heading-2">3. åˆ†é¡µæŸ¥è¯¢ï¼Œä¸åªæ˜¯<code>PageHelper</code>çš„æ›¿ä»£å“</h3>
<p>MP çš„åˆ†é¡µåŠŸèƒ½éå¸¸å¼ºå¤§ï¼Œè€Œä¸”ä¸è‡ªèº«æ¡ä»¶æ„é€ å™¨æ— ç¼é›†æˆã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// åˆ›å»ºåˆ†é¡µå‚æ•°ï¼Œå¹¶æŒ‡å®šæ’åº</span>
Page&lt;User&gt; page = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Page</span>&lt;&gt;(<span class="hljs-number">1</span>, <span class="hljs-number">20</span>); <span class="hljs-comment">// æŸ¥ç¬¬1é¡µï¼Œæ¯é¡µ20æ¡</span>
page.addOrder(OrderItem.desc(<span class="hljs-string">"create_time"</span>)); <span class="hljs-comment">// æŒ‰åˆ›å»ºæ—¶é—´å€’åº</span>

<span class="hljs-comment">// æ‰§è¡Œåˆ†é¡µæŸ¥è¯¢</span>
Page&lt;User&gt; userPage = userService.page(page,
        Wrappers.&lt;User&gt;lambdaQuery()
                .eq(User::getDeptId, <span class="hljs-number">2</span>)
);

<span class="hljs-comment">// ç›´æ¥è½¬æ¢ä¸º VO åˆ†é¡µå¯¹è±¡ï¼Œä¸€æ­¥åˆ°ä½</span>
Page&lt;UserVO&gt; voPage = userPage.convert(user -&gt; {
    <span class="hljs-type">UserVO</span> <span class="hljs-variable">vo</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UserVO</span>();
    BeanUtils.copyProperties(user, vo); <span class="hljs-comment">// ä½¿ç”¨ Spring çš„å·¥å…·ç±»</span>
    <span class="hljs-comment">// æˆ–è€…ç”¨ MapStruct ç­‰æ›´ä¸“ä¸šçš„å·¥å…·</span>
    <span class="hljs-keyword">return</span> vo;
});
</code></pre>
<h3 data-id="heading-3">4. æ‰¹é‡æ“ä½œï¼Œæ€§èƒ½æå‡çš„å…³é”®</h3>
<p>å¤§æ‰¹é‡æ•°æ®æ’å…¥/æ›´æ–°æ—¶ï¼Œä¸€æ¡æ¡å¤„ç†ä¼šè®©æ•°æ®åº“å“­æ³£ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æ‰¹é‡æ’å…¥ï¼Œåˆ†æ‰¹æäº¤</span>
List&lt;User&gt; hugeUserList = ... <span class="hljs-comment">// ä¸€ä¸ªå·¨å¤§çš„åˆ—è¡¨</span>
userService.saveBatch(hugeUserList, <span class="hljs-number">1000</span>); <span class="hljs-comment">// æ¯1000æ¡æ‰¹é‡æäº¤ä¸€æ¬¡</span>

<span class="hljs-comment">// æ‰¹é‡æ›´æ–°ï¼ˆè‡ªå·±æ§åˆ¶äº‹åŠ¡ï¼‰</span>
<span class="hljs-meta">@Transactional(rollbackFor = Exception.class)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">batchUpdateStatus</span><span class="hljs-params">(List&lt;Long&gt; ids, Integer status)</span> {
    List&lt;User&gt; updateList = ids.stream().map(id -&gt; {
        <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>();
        user.setId(id);
        user.setStatus(status);
        <span class="hljs-keyword">return</span> user;
    }).collect(Collectors.toList());
    userService.updateBatchById(updateList);
}
</code></pre>
<h3 data-id="heading-4">5. æ¡ä»¶æ„é€ å™¨ï¼Œè®©ä½ çš„é€»è¾‘æ›´æ¸…æ™°</h3>
<p><code>QueryWrapper</code>å’Œ<code>LambdaQueryWrapper</code>å¯ä»¥æ„å»ºéå¸¸å¤æ‚çš„æŸ¥è¯¢é€»è¾‘ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// å¤æ‚çš„ AND-OR ç»„åˆæŸ¥è¯¢</span>
List&lt;User&gt; users = userService.lambdaQuery()
    .eq(User::getStatus, <span class="hljs-number">1</span>)
    .and(wrapper -&gt; wrapper <span class="hljs-comment">// è¿™æ˜¯ä¸€ä¸ª AND åµŒå¥—</span>
        .like(User::getName, <span class="hljs-string">"å¼ "</span>)
        .or()
        .like(User::getEmail, <span class="hljs-string">"zhang"</span>) <span class="hljs-comment">// name LIKE '%å¼ %' OR email LIKE '%zhang%'</span>
    )
    .between(User::getCreateTime, startTime, endTime)
    .list();

<span class="hljs-comment">// ã€æ€§èƒ½æŠ€å·§ã€‘åªæŸ¥éœ€è¦çš„å­—æ®µï¼Œé¿å… SELECT *</span>
List&lt;User&gt; userList = userService.lambdaQuery()
    .select(User::getId, User::getName) <span class="hljs-comment">// åªæŸ¥è¯¢ ID å’Œ Name å­—æ®µ</span>
    .eq(User::getStatus, <span class="hljs-number">1</span>)
    .list();
</code></pre>
<h3 data-id="heading-5">6. è‡ªåŠ¨å¡«å……ï¼Œå‘Šåˆ«æ‰‹åŠ¨ set åˆ›å»ºæ—¶é—´</h3>
<p>åƒ <code>create_time</code>, <code>update_time</code> è¿™ç§å­—æ®µï¼Œå°±åˆ«å†æ‰‹åŠ¨ <code>set</code> äº†ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyMetaObjectHandler</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">MetaObjectHandler</span> {

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">insertFill</span><span class="hljs-params">(MetaObject metaObject)</span> {
        <span class="hljs-comment">// æ’å…¥æ—¶è‡ªåŠ¨å¡«å……</span>
        <span class="hljs-built_in">this</span>.strictInsertFill(metaObject, <span class="hljs-string">"createTime"</span>, LocalDateTime.class, LocalDateTime.now());
        <span class="hljs-built_in">this</span>.strictInsertFill(metaObject, <span class="hljs-string">"createBy"</span>, String.class, getCurrentUser());
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">updateFill</span><span class="hljs-params">(MetaObject metaObject)</span> {
        <span class="hljs-comment">// æ›´æ–°æ—¶è‡ªåŠ¨å¡«å……</span>
        <span class="hljs-built_in">this</span>.strictUpdateFill(metaObject, <span class="hljs-string">"updateTime"</span>, LocalDateTime.class, LocalDateTime.now());
    }
}

<span class="hljs-comment">// å®ä½“ç±»å­—æ®µä¸Šéœ€è¦åŠ æ³¨è§£</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span> {
    <span class="hljs-meta">@TableField(fill = FieldFill.INSERT)</span>
    <span class="hljs-keyword">private</span> LocalDateTime createTime;
    
    <span class="hljs-meta">@TableField(fill = FieldFill.INSERT_UPDATE)</span>
    <span class="hljs-keyword">private</span> LocalDateTime updateTime;
}
</code></pre>
<h3 data-id="heading-6">7. é€»è¾‘åˆ é™¤ï¼Œæ•°æ®ä¸æ˜¯çœŸçš„åˆ é™¤</h3>
<p>åƒä¸‡åˆ«ç”¨ <code>delete from</code> ç¡¬åˆ æ•°æ®äº†ï¼</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># åœ¨ application.yml ä¸­é…ç½®</span>
<span class="hljs-attr">mybatis-plus:</span>
  <span class="hljs-attr">global-config:</span>
    <span class="hljs-attr">db-config:</span>
      <span class="hljs-attr">logic-delete-field:</span> <span class="hljs-string">deleted</span>  <span class="hljs-comment"># å…¨å±€é€»è¾‘åˆ é™¤å®ä½“å­—æ®µå</span>
      <span class="hljs-attr">logic-delete-value:</span> <span class="hljs-number">1</span>        <span class="hljs-comment"># é€»è¾‘å·²åˆ é™¤å€¼ï¼ˆé»˜è®¤ä¸º 1ï¼‰</span>
      <span class="hljs-attr">logic-not-delete-value:</span> <span class="hljs-number">0</span>    <span class="hljs-comment"># é€»è¾‘æœªåˆ é™¤å€¼ï¼ˆé»˜è®¤ä¸º 0ï¼‰</span>
</code></pre>
<p>é…ç½®åï¼Œè°ƒç”¨ <code>userService.removeById(1)</code>ï¼ŒMP å®é™…æ‰§è¡Œçš„æ˜¯ï¼š
<code>UPDATE user SET deleted = 1 WHERE id = 1 AND deleted = 0</code>ã€‚
æ‰€æœ‰æŸ¥è¯¢ä¹Ÿä¼šè‡ªåŠ¨å¸¦ä¸Š <code>AND deleted = 0</code> æ¡ä»¶ã€‚</p>
<h3 data-id="heading-7">8. æšä¸¾å¤„ç†å™¨ï¼Œå‘Šåˆ«æ•°æ®åº“å­˜æ•°å­—çš„è¿·æƒ‘è¡Œä¸º</h3>
<p>æ•°æ®åº“å­˜ <code>status = 1</code>ï¼Œä»£ç é‡Œè¿˜è¦çŒœ 1 æ˜¯å•¥æ„æ€ï¼Ÿç”¨æšä¸¾ï¼</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Getter</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">UserStatus</span> {
    ENABLED(<span class="hljs-number">1</span>, <span class="hljs-string">"å¯ç”¨"</span>),
    DISABLED(<span class="hljs-number">0</span>, <span class="hljs-string">"ç¦ç”¨"</span>);

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> code;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> String desc;

    UserStatus(<span class="hljs-type">int</span> code, String desc) {
        <span class="hljs-built_in">this</span>.code = code;
        <span class="hljs-built_in">this</span>.desc = desc;
    }
}

<span class="hljs-comment">// å®ä½“ç±»ä¸­ç›´æ¥ä½¿ç”¨æšä¸¾ç±»å‹</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span> {
    <span class="hljs-keyword">private</span> UserStatus status;
}

<span class="hljs-comment">// é…ç½®æšä¸¾å¤„ç†å™¨ï¼ˆSpring Boot åŸºæœ¬ä¸ç”¨é…äº†ï¼Œå¼€ç®±å³ç”¨ï¼‰</span>
</code></pre>
<p>è¿™æ ·ï¼Œæ•°æ®åº“å­˜çš„æ˜¯æ•°å­— <code>1</code>ï¼Œä½†ä»£ç é‡Œæ“ä½œçš„ä¸€ç›´æ˜¯ <code>UserStatus.ENABLED</code>ï¼Œæ¸…æ™°æ˜äº†ï¼</p>
<h3 data-id="heading-8">9. å¤šç§Ÿæˆ·æ•°æ®éš”ç¦»ï¼ŒSAAS ç³»ç»Ÿå¿…å¤‡</h3>
<p>SAAS åº”ç”¨ä¸­ï¼Œä¸åŒç§Ÿæˆ·çš„æ•°æ®å¿…é¡»ä¸¥æ ¼éš”ç¦»ã€‚MP çš„ç§Ÿæˆ·æ’ä»¶å¯ä»¥è‡ªåŠ¨åœ¨æ¯æ¬¡æŸ¥è¯¢æ—¶åŠ ä¸Šç§Ÿæˆ· IDã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MybatisPlusConfig</span> {

    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> MybatisPlusInterceptor <span class="hljs-title function_">mybatisPlusInterceptor</span><span class="hljs-params">()</span> {
        <span class="hljs-type">MybatisPlusInterceptor</span> <span class="hljs-variable">interceptor</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MybatisPlusInterceptor</span>();
        
        <span class="hljs-comment">// ç§Ÿæˆ·æ’ä»¶</span>
        <span class="hljs-type">TenantLineInnerInterceptor</span> <span class="hljs-variable">tenantInterceptor</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TenantLineInnerInterceptor</span>();
        tenantInterceptor.setTenantLineHandler(<span class="hljs-keyword">new</span> <span class="hljs-title class_">TenantLineHandler</span>() {
            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> Expression <span class="hljs-title function_">getTenantId</span><span class="hljs-params">()</span> {
                <span class="hljs-comment">// ä»å½“å‰ä¸Šä¸‹æ–‡ä¸­è·å–ç§Ÿæˆ·IDï¼Œæ¯”å¦‚ä» JWT Token ä¸­</span>
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringValue</span>(TenantContext.getCurrentTenantId());
            }
            
            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getTenantIdColumn</span><span class="hljs-params">()</span> {
                <span class="hljs-keyword">return</span> <span class="hljs-string">"tenant_id"</span>; <span class="hljs-comment">// æ•°æ®åº“ä¸­çš„ç§Ÿæˆ·IDåˆ—å</span>
            }
            
            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">ignoreTable</span><span class="hljs-params">(String tableName)</span> {
                <span class="hljs-comment">// å¿½ç•¥ä¸éœ€è¦ç§Ÿæˆ·éš”ç¦»çš„è¡¨ï¼Œå¦‚å…¨å±€é…ç½®è¡¨</span>
                <span class="hljs-keyword">return</span> <span class="hljs-string">"system_config"</span>.equals(tableName);
            }
        });
        interceptor.addInnerInterceptor(tenantInterceptor);
        <span class="hljs-keyword">return</span> interceptor;
    }
}
</code></pre>
<h3 data-id="heading-9">10. ä»£ç ç”Ÿæˆå™¨ï¼Œæ•ˆç‡ç¿»å€åˆ©å™¨</h3>
<p>åˆ«å†æ‰‹æ’¸ <code>Entity</code>, <code>Mapper</code>, <code>Service</code>, <code>Controller</code> äº†ï¼</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CodeGenerator</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">AutoGenerator</span> <span class="hljs-variable">generator</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AutoGenerator</span>();
        
        <span class="hljs-comment">// æ•°æ®æºé…ç½®</span>
        <span class="hljs-type">DataSourceConfig</span> <span class="hljs-variable">dataSourceConfig</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DataSourceConfig</span>();
        dataSourceConfig.setUrl(<span class="hljs-string">"jdbc:mysql://localhost:3306/test"</span>);
        dataSourceConfig.setDriverName(<span class="hljs-string">"com.mysql.cj.jdbc.Driver"</span>);
        dataSourceConfig.setUsername(<span class="hljs-string">"root"</span>);
        dataSourceConfig.setPassword(<span class="hljs-string">"123456"</span>);
        generator.setDataSource(dataSourceConfig);
        
        <span class="hljs-comment">// å…¨å±€é…ç½®</span>
        <span class="hljs-type">GlobalConfig</span> <span class="hljs-variable">globalConfig</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">GlobalConfig</span>();
        globalConfig.setOutputDir(System.getProperty(<span class="hljs-string">"user.dir"</span>) + <span class="hljs-string">"/src/main/java"</span>);
        globalConfig.setAuthor(<span class="hljs-string">"å¤§å"</span>);
        globalConfig.setOpen(<span class="hljs-literal">false</span>);
        globalConfig.setSwagger2(<span class="hljs-literal">true</span>); <span class="hljs-comment">// å®ä½“å±æ€§ Swagger2 æ³¨è§£</span>
        generator.setGlobalConfig(globalConfig);
        
        <span class="hljs-comment">// åŒ…é…ç½®</span>
        <span class="hljs-type">PackageConfig</span> <span class="hljs-variable">packageConfig</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">PackageConfig</span>();
        packageConfig.setParent(<span class="hljs-string">"com.laomao.demo"</span>);
        packageConfig.setEntity(<span class="hljs-string">"domain.entity"</span>);
        packageConfig.setMapper(<span class="hljs-string">"dao.mapper"</span>);
        packageConfig.setService(<span class="hljs-string">"service"</span>);
        packageConfig.setServiceImpl(<span class="hljs-string">"service.impl"</span>);
        generator.setPackageInfo(packageConfig);
        
        generator.execute(); <span class="hljs-comment">// æ‰§è¡Œç”Ÿæˆ</span>
    }
}
</code></pre>
<p>è¿è¡Œä¸€ä¸‹ï¼Œå…¨å¥—ä»£ç ç¬é—´ç”Ÿæˆï¼</p>
<h3 data-id="heading-10">11. è‡ªå®šä¹‰å…¨å±€æ‹¦æˆªå™¨ï¼Œç»Ÿä¸€å¤„ç†é€»è¾‘</h3>
<p>å¯ä»¥ç”¨æ¥åšæ•°æ®æƒé™æ§åˆ¶ã€SQL æ€§èƒ½ç›‘æ§ã€å­—æ®µåŠ è§£å¯†ç­‰ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Component</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SqlLogInterceptor</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">InnerInterceptor</span> {
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">beforeQuery</span><span class="hljs-params">(Executor executor, MappedStatement ms, Object parameter, BoundSql boundSql)</span> {
        <span class="hljs-type">long</span> <span class="hljs-variable">start</span> <span class="hljs-operator">=</span> System.currentTimeMillis();
        <span class="hljs-comment">// å°†å¼€å§‹æ—¶é—´å­˜å…¥å½“å‰çº¿ç¨‹ä¸Šä¸‹æ–‡</span>
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">afterQuery</span><span class="hljs-params">(Executor executor, MappedStatement ms, Object parameter, BoundSql boundSql, List&lt;Object&gt; result)</span> {
        <span class="hljs-type">long</span> <span class="hljs-variable">end</span> <span class="hljs-operator">=</span> System.currentTimeMillis();
        <span class="hljs-type">long</span> <span class="hljs-variable">cost</span> <span class="hljs-operator">=</span> end - start;
        <span class="hljs-keyword">if</span> (cost &gt; <span class="hljs-number">1000</span>) { <span class="hljs-comment">// è¶…è¿‡1ç§’ç®—æ…¢SQL</span>
            log.warn(<span class="hljs-string">"æ…¢SQLè­¦å‘Š: {}, æ‰§è¡Œè€—æ—¶: {}ms"</span>, boundSql.getSql(), cost);
            <span class="hljs-comment">// å¯ä»¥æ¥å…¥å‘Šè­¦ç³»ç»Ÿï¼Œé€šçŸ¥å¼€å‘äººå‘˜</span>
        }
    }
}
</code></pre>
<h3 data-id="heading-11">12. åˆ†å¸ƒå¼ä¸»é”® IDï¼Œå‘Šåˆ«æ•°æ®åº“è‡ªå¢</h3>
<p>åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œæ•°æ®åº“è‡ªå¢ ID æ˜¯ç“¶é¢ˆã€‚æ¨èä½¿ç”¨é›ªèŠ±ç®—æ³•ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span> {
    <span class="hljs-comment">// æŒ‡å®šä¸»é”®ç±»å‹ä¸º ASSIGN_IDï¼ˆé›ªèŠ±ç®—æ³•ï¼‰</span>
    <span class="hljs-meta">@TableId(type = IdType.ASSIGN_ID)</span>
    <span class="hljs-keyword">private</span> Long id; <span class="hljs-comment">// æ³¨æ„æ˜¯ Longï¼Œä¸æ˜¯ Integer</span>
    <span class="hljs-comment">// ...</span>
}
</code></pre>
<h3 data-id="heading-12">13. ä¹è§‚é”ï¼Œé˜²æ­¢å¹¶å‘æ›´æ–°è¦†ç›–</h3>
<p>é«˜å¹¶å‘ä¸‹ï¼Œé˜²æ­¢åæäº¤çš„æ•°æ®è¦†ç›–å…ˆæäº¤çš„æ•°æ®ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// å®ä½“ç±»ä¸­å¢åŠ ç‰ˆæœ¬å·å­—æ®µ</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span> {
    <span class="hljs-meta">@Version</span>
    <span class="hljs-keyword">private</span> Integer version;
}

<span class="hljs-comment">// æ›´æ–°æ—¶ï¼ŒMPä¼šè‡ªåŠ¨å¸¦ä¸Šç‰ˆæœ¬å·æ¡ä»¶</span>
<span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> userService.getById(<span class="hljs-number">1L</span>);
user.setName(<span class="hljs-string">"æ–°åå­—"</span>);
userService.updateById(user); <span class="hljs-comment">// SQL: UPDATE user SET name=?, version=? WHERE id=? AND version=?</span>
</code></pre>
<h3 data-id="heading-13">14. ç»“æœæ˜ å°„ï¼Œè‡ªåŠ¨å¤„ç†ä¸€å¯¹ä¸€ã€ä¸€å¯¹å¤š</h3>
<p>MP å¯ä»¥å’Œ MyBatis çš„ <code>@Result</code> æ³¨è§£å®Œç¾ç»“åˆã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// åœ¨ Mapper æ–¹æ³•ä¸Šä½¿ç”¨å¤æ‚ç»“æœæ˜ å°„</span>
<span class="hljs-meta">@Select("SELECT u.*, d.name as dept_name FROM user u LEFT JOIN department d ON u.dept_id = d.id WHERE u.id = #{id}")</span>
<span class="hljs-meta">@Results({
    @Result(column = "id", property = "id"),
    @Result(column = "dept_name", property = "deptName"),
    @Result(column = "id", property = "roles", 
            many = @Many(select = "com.laomao.mapper.RoleMapper.findByUserId"))
})</span>
UserVO <span class="hljs-title function_">findUserWithDept</span><span class="hljs-params">(Long id)</span>;
</code></pre>
<h3 data-id="heading-14">15. äº‹åŠ¡ç®¡ç†ï¼Œä¿è¯æ•°æ®ä¸€è‡´æ€§</h3>
<p>è¿™æ˜¯æœ€åä¸€é“é˜²çº¿ï¼Œä¹Ÿæ˜¯æœ€å…³é”®çš„ä¸€é“ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserService</span> {
    
    <span class="hljs-meta">@Transactional(rollbackFor = Exception.class)</span> <span class="hljs-comment">// æ³¨æ„ï¼šé»˜è®¤åªå›æ»š RuntimeException</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">createUserWithInitData</span><span class="hljs-params">(User user)</span> {
        <span class="hljs-comment">// 1. ä¿å­˜ç”¨æˆ·åŸºæœ¬ä¿¡æ¯</span>
        userService.save(user);
        
        <span class="hljs-comment">// 2. åˆå§‹åŒ–ç”¨æˆ·è´¦æˆ·</span>
        <span class="hljs-type">Account</span> <span class="hljs-variable">account</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Account</span>();
        account.setUserId(user.getId());
        accountService.save(account);
        
        <span class="hljs-comment">// 3. å‘é€æ¬¢è¿æ¶ˆæ¯ï¼ˆå¦‚æœæ¶ˆæ¯å‘é€å¤±è´¥ï¼Œå¸Œæœ›ç”¨æˆ·åˆ›å»ºä¹Ÿå›æ»šï¼‰</span>
        messageService.sendWelcomeMessage(user.getId());
        
        <span class="hljs-comment">// ä»»ä½•ä¸€ä¸ªæ­¥éª¤å‡ºé”™ï¼Œæ‰€æœ‰æ“ä½œéƒ½ä¼šå›æ»š</span>
    }
}
</code></pre>
<h3 data-id="heading-15">æ€»ç»“</h3>
<p>MyBatis-Plus çš„å¼ºå¤§è¿œä¸æ­¢äºæ­¤ï¼Œä½†æŒæ¡ä»¥ä¸Š <strong>15ä¸ªæ ¸å¿ƒæŠ€å·§</strong>ï¼Œè¶³ä»¥è®©ä½ åœ¨æ—¥å¸¸å¼€å‘ä¸­æ¸¸åˆƒæœ‰ä½™ï¼Œå†™å‡ºæ—¢é«˜æ•ˆåˆä¼˜é›…çš„ä»£ç ã€‚</p>
<blockquote>
<p>æœ¬æ–‡é¦–å‘äºå…¬ä¼—å·ï¼šç¨‹åºå‘˜åˆ˜å¤§åï¼Œä¸“æ³¨åˆ†äº«å‰åç«¯å¼€å‘çš„å®æˆ˜ç¬”è®°ã€‚å…³æ³¨æˆ‘ï¼Œå°‘èµ°å¼¯è·¯ï¼Œä¸€èµ·è¿›æ­¥ï¼</p>
</blockquote>
<h4 data-id="heading-16">ğŸ“Œå¾€æœŸç²¾å½©</h4>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FP7SMincYFKERZbNKAFtzGQ" target="_blank" title="https://mp.weixin.qq.com/s/P7SMincYFKERZbNKAFtzGQ" ref="nofollow noopener noreferrer">ã€Šè¿™20æ¡SQLä¼˜åŒ–æ–¹æ¡ˆï¼Œè®©ä½ çš„æ•°æ®åº“æŸ¥è¯¢é€Ÿåº¦æå‡10å€ã€‹</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2Fy-GJ26kl0-yT6hE3fy2KjQ" target="_blank" title="https://mp.weixin.qq.com/s/y-GJ26kl0-yT6hE3fy2KjQ" ref="nofollow noopener noreferrer">ã€ŠMySQL ä¸ºä»€ä¹ˆä¸æ¨èç”¨é›ªèŠ±ID å’Œ UUID åšä¸»é”®ï¼Ÿã€‹</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FFmTXkMKbOX-g0m58YE81Ew" target="_blank" title="https://mp.weixin.qq.com/s/FmTXkMKbOX-g0m58YE81Ew" ref="nofollow noopener noreferrer">ã€Šå›¾ç‰‡æ ‡ç­¾ç”¨ img è¿˜æ˜¯ pictureï¼Ÿå¾ˆå¤šäººå½»åº•å¼„æ··äº†ã€‹</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FaGLep07rnMQdQLyDHBer8Q" target="_blank" title="https://mp.weixin.qq.com/s/aGLep07rnMQdQLyDHBer8Q" ref="nofollow noopener noreferrer">ã€Šè¿˜åœ¨ç”¨ WebSocket åšå®æ—¶é€šä¿¡ï¼ŸSSE å¯èƒ½æ›´ç®€å•ã€‹</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å®æˆ˜ï¼šç”¨ Rsync å®ç°æœåŠ¡å™¨é—´çš„é«˜æ•ˆå¢é‡åŒæ­¥ä¸å¤‡ä»½]]></title>    <link>https://juejin.cn/post/7572455881029566473</link>    <guid>https://juejin.cn/post/7572455881029566473</guid>    <pubDate>2025-11-15T03:02:27.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572455881029566473" data-draft-id="7572524368875520035" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å®æˆ˜ï¼šç”¨ Rsync å®ç°æœåŠ¡å™¨é—´çš„é«˜æ•ˆå¢é‡åŒæ­¥ä¸å¤‡ä»½"/> <meta itemprop="keywords" content="Linux"/> <meta itemprop="datePublished" content="2025-11-15T03:02:27.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="LCGå…ƒ"/> <meta itemprop="url" content="https://juejin.cn/user/3097802498120889"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å®æˆ˜ï¼šç”¨ Rsync å®ç°æœåŠ¡å™¨é—´çš„é«˜æ•ˆå¢é‡åŒæ­¥ä¸å¤‡ä»½
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3097802498120889/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    LCGå…ƒ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-15T03:02:27.000Z" title="Sat Nov 15 2025 03:02:27 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">1. å¼•è¨€</h2>
<p>åœ¨ç°ä»£ IT åŸºç¡€è®¾æ–½ç®¡ç†ä¸­ï¼Œæ•°æ®åŒæ­¥ä¸å¤‡ä»½æ˜¯ç¡®ä¿ä¸šåŠ¡è¿ç»­æ€§å’Œæ•°æ®å®‰å…¨çš„å…³é”®ç¯èŠ‚ã€‚Rsyncï¼ˆRemote Synchronizationï¼‰ä½œä¸ºä¸€æ¬¾å¼ºå¤§çš„æ–‡ä»¶åŒæ­¥å·¥å…·ï¼Œä»¥å…¶é«˜æ•ˆçš„å¢é‡ä¼ è¾“ç®—æ³•å’Œçµæ´»çš„é…ç½®é€‰é¡¹ï¼Œæˆä¸ºç³»ç»Ÿç®¡ç†å‘˜çš„é¦–é€‰å·¥å…·ä¹‹ä¸€ã€‚</p>
<h3 data-id="heading-1">1.1 Rsync çš„æ ¸å¿ƒä¼˜åŠ¿</h3>
<ul>
<li><strong>å¢é‡åŒæ­¥</strong>ï¼šä»…ä¼ è¾“å‘ç”Ÿå˜åŒ–çš„éƒ¨åˆ†ï¼Œå¤§å¹…å‡å°‘å¸¦å®½æ¶ˆè€—</li>
<li><strong>ä¿æŒæƒé™</strong>ï¼šå®Œæ•´ä¿ç•™æ–‡ä»¶å±æ€§ã€æƒé™å’Œæ—¶é—´æˆ³</li>
<li><strong>å‹ç¼©ä¼ è¾“</strong>ï¼šå†…ç½®å‹ç¼©åŠŸèƒ½ï¼Œä¼˜åŒ–ç½‘ç»œåˆ©ç”¨ç‡</li>
<li><strong>çµæ´»é…ç½®</strong>ï¼šæ”¯æŒå¤šç§ä¼ è¾“æ¨¡å¼å’Œè¿‡æ»¤è§„åˆ™</li>
<li><strong>å¯é æ€§</strong>ï¼šæ”¯æŒæ–­ç‚¹ç»­ä¼ å’Œå®Œæ•´æ€§æ ¡éªŒ</li>
</ul>
<h2 data-id="heading-2">2. ç¯å¢ƒå‡†å¤‡ä¸å®‰è£…</h2>
<h3 data-id="heading-3">2.1 ç³»ç»Ÿè¦æ±‚</h3>
<p>ç¡®ä¿æ‰€æœ‰å‚ä¸åŒæ­¥çš„æœåŠ¡å™¨å‡æ»¡è¶³ä»¥ä¸‹è¦æ±‚ï¼š</p>
<ul>
<li>Linux æ“ä½œç³»ç»Ÿï¼ˆCentOSã€Ubuntu ç­‰ï¼‰</li>
<li>SSH è®¿é—®æƒé™</li>
<li>è¶³å¤Ÿçš„ç£ç›˜ç©ºé—´</li>
</ul>
<h3 data-id="heading-4">2.2 Rsync å®‰è£…</h3>
<p><strong>åˆ›å»ºå®‰è£…è„šæœ¬æ–‡ä»¶ï¼š<code>install_rsync.sh</code></strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>

<span class="hljs-comment"># å®‰è£… Rsync çš„é€šç”¨è„šæœ¬</span>
<span class="hljs-comment"># é€‚ç”¨äºå¤§å¤šæ•° Linux å‘è¡Œç‰ˆ</span>

<span class="hljs-built_in">set</span> -e  <span class="hljs-comment"># é‡åˆ°é”™è¯¯ç«‹å³é€€å‡º</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"å¼€å§‹å®‰è£… Rsync..."</span>

<span class="hljs-comment"># æ£€æµ‹ç³»ç»Ÿç±»å‹å¹¶å®‰è£…</span>
<span class="hljs-keyword">if</span> [ -f /etc/redhat-release ]; <span class="hljs-keyword">then</span>
    <span class="hljs-comment"># CentOS/RHEL ç³»ç»Ÿ</span>
    sudo yum update -y
    sudo yum install -y rsync
<span class="hljs-keyword">elif</span> [ -f /etc/debian_version ]; <span class="hljs-keyword">then</span>
    <span class="hljs-comment"># Ubuntu/Debian ç³»ç»Ÿ</span>
    sudo apt-get update
    sudo apt-get install -y rsync
<span class="hljs-keyword">else</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"ä¸æ”¯æŒçš„ Linux å‘è¡Œç‰ˆ"</span>
    <span class="hljs-built_in">exit</span> 1
<span class="hljs-keyword">fi</span>

<span class="hljs-comment"># éªŒè¯å®‰è£…</span>
rsync_version=$(rsync --version | <span class="hljs-built_in">head</span> -n1)
<span class="hljs-built_in">echo</span> <span class="hljs-string">"å®‰è£…æˆåŠŸ: <span class="hljs-variable">$rsync_version</span>"</span>

<span class="hljs-comment"># åˆ›å»ºå¿…è¦çš„ç›®å½•ç»“æ„</span>
sudo <span class="hljs-built_in">mkdir</span> -p /var/log/rsync
sudo <span class="hljs-built_in">touch</span> /var/log/rsync/sync.log
sudo <span class="hljs-built_in">chmod</span> 666 /var/log/rsync/sync.log

<span class="hljs-built_in">echo</span> <span class="hljs-string">"Rsync å®‰è£…å®Œæˆ"</span>
</code></pre>
<p>è¿è¡Œå®‰è£…è„šæœ¬ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">chmod</span> +x install_rsync.sh
./install_rsync.sh
</code></pre>
<h2 data-id="heading-5">3. Rsync åŸºç¡€é…ç½®</h2>
<h3 data-id="heading-6">3.1 SSH å¯†é’¥è®¤è¯é…ç½®</h3>
<p>ä¸ºå®ç°æ— å¯†ç åŒæ­¥ï¼Œéœ€è¦é…ç½® SSH å¯†é’¥è®¤è¯ã€‚</p>
<p><strong>åˆ›å»º SSH å¯†é’¥é…ç½®è„šæœ¬ï¼š<code>setup_ssh_keys.sh</code></strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>

<span class="hljs-comment"># SSH å¯†é’¥é…ç½®è„šæœ¬</span>
<span class="hljs-comment"># åœ¨æºæœåŠ¡å™¨ä¸Šæ‰§è¡Œ</span>

<span class="hljs-built_in">set</span> -e

<span class="hljs-built_in">echo</span> <span class="hljs-string">"è®¾ç½® SSH å¯†é’¥è®¤è¯..."</span>

<span class="hljs-comment"># ç”Ÿæˆ SSH å¯†é’¥å¯¹ï¼ˆå¦‚æœä¸å­˜åœ¨ï¼‰</span>
<span class="hljs-keyword">if</span> [ ! -f ~/.ssh/id_rsa ]; <span class="hljs-keyword">then</span>
    ssh-keygen -t rsa -b 4096 -f ~/.ssh/id_rsa -N <span class="hljs-string">""</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"SSH å¯†é’¥å¯¹å·²ç”Ÿæˆ"</span>
<span class="hljs-keyword">fi</span>

<span class="hljs-comment"># æ˜¾ç¤ºå…¬é’¥å†…å®¹</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"è¯·å°†ä»¥ä¸‹å…¬é’¥å†…å®¹æ·»åŠ åˆ°ç›®æ ‡æœåŠ¡å™¨çš„ authorized_keys æ–‡ä»¶ä¸­ï¼š"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"=========================================================="</span>
<span class="hljs-built_in">cat</span> ~/.ssh/id_rsa.pub
<span class="hljs-built_in">echo</span> <span class="hljs-string">"=========================================================="</span>

<span class="hljs-comment"># è®¾ç½®æ­£ç¡®çš„æƒé™</span>
<span class="hljs-built_in">chmod</span> 700 ~/.ssh
<span class="hljs-built_in">chmod</span> 600 ~/.ssh/id_rsa
<span class="hljs-built_in">chmod</span> 644 ~/.ssh/id_rsa.pub

<span class="hljs-built_in">echo</span> <span class="hljs-string">"SSH å¯†é’¥è®¾ç½®å®Œæˆ"</span>
</code></pre>
<p>åœ¨ç›®æ ‡æœåŠ¡å™¨ä¸Šæ·»åŠ å…¬é’¥ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å°†æºæœåŠ¡å™¨çš„å…¬é’¥æ·»åŠ åˆ° ~/.ssh/authorized_keys</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"ssh-rsa AAAAB3NzaC1yc2E...ä½ çš„å…¬é’¥å†…å®¹..."</span> &gt;&gt; ~/.ssh/authorized_keys
<span class="hljs-built_in">chmod</span> 600 ~/.ssh/authorized_keys
</code></pre>
<h3 data-id="heading-7">3.2 æµ‹è¯• SSH è¿æ¥</h3>
<p><strong>åˆ›å»ºè¿æ¥æµ‹è¯•è„šæœ¬ï¼š<code>test_connection.sh</code></strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>

<span class="hljs-comment"># æµ‹è¯• SSH è¿æ¥è„šæœ¬</span>

<span class="hljs-built_in">read</span> -p <span class="hljs-string">"è¯·è¾“å…¥ç›®æ ‡æœåŠ¡å™¨IPåœ°å€: "</span> remote_host
<span class="hljs-built_in">read</span> -p <span class="hljs-string">"è¯·è¾“å…¥ç›®æ ‡æœåŠ¡å™¨ç”¨æˆ·å: "</span> remote_user

<span class="hljs-built_in">echo</span> <span class="hljs-string">"æµ‹è¯• SSH è¿æ¥åˆ° <span class="hljs-variable">$remote_user</span>@<span class="hljs-variable">$remote_host</span>..."</span>

<span class="hljs-comment"># æµ‹è¯•è¿æ¥</span>
ssh -o BatchMode=<span class="hljs-built_in">yes</span> -o ConnectTimeout=5 <span class="hljs-variable">$remote_user</span>@<span class="hljs-variable">$remote_host</span> <span class="hljs-string">"echo 'SSH è¿æ¥æˆåŠŸ!'"</span>

<span class="hljs-keyword">if</span> [ $? -eq 0 ]; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"âœ“ SSH è¿æ¥æµ‹è¯•æˆåŠŸ"</span>
<span class="hljs-keyword">else</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"âœ— SSH è¿æ¥æµ‹è¯•å¤±è´¥"</span>
    <span class="hljs-built_in">exit</span> 1
<span class="hljs-keyword">fi</span>
</code></pre>
<h2 data-id="heading-8">4. Rsync åŒæ­¥æµç¨‹è¯¦è§£</h2>
<p>ä»¥ä¸‹æ˜¯ Rsync åŒæ­¥è¿‡ç¨‹çš„å®Œæ•´æµç¨‹å›¾ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TD
    A[å¼€å§‹åŒæ­¥ä»»åŠ¡] --&gt; B[æ‰«ææºç›®å½•æ–‡ä»¶]
    B --&gt; C[ç”Ÿæˆæ–‡ä»¶æ ¡éªŒå’Œ]
    C --&gt; D[ä¸ç›®æ ‡ç›®å½•æ¯”è¾ƒ]
    D --&gt; E{å‘ç°å·®å¼‚?}
    E --&gt;|æ˜¯| F[ä»…ä¼ è¾“å·®å¼‚éƒ¨åˆ†]
    E --&gt;|å¦| G[è·³è¿‡æ–‡ä»¶]
    F --&gt; H[æ›´æ–°ç›®æ ‡æ–‡ä»¶]
    G --&gt; I[éªŒè¯æ–‡ä»¶å®Œæ•´æ€§]
    H --&gt; I
    I --&gt; J[è®°å½•åŒæ­¥æ—¥å¿—]
    J --&gt; K[å‘é€å®Œæˆé€šçŸ¥]
    K --&gt; L[ç»“æŸåŒæ­¥ä»»åŠ¡]
    
    style A fill:#2d5c8a,color:#ffffff
    style L fill:#2d5c8a,color:#ffffff
    style F fill:#4caf50,color:#ffffff
    style H fill:#4caf50,color:#ffffff
    style I fill:#ff9800,color:#ffffff
    style J fill:#ff9800,color:#ffffff
</code></pre>
<h2 data-id="heading-9">5. åŸºç¡€åŒæ­¥å®æˆ˜</h2>
<h3 data-id="heading-10">5.1 æœ¬åœ°æ–‡ä»¶åŒæ­¥</h3>
<p><strong>åˆ›å»ºæœ¬åœ°åŒæ­¥è„šæœ¬ï¼š<code>local_sync.sh</code></strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>

<span class="hljs-comment"># æœ¬åœ°ç›®å½•åŒæ­¥è„šæœ¬</span>

<span class="hljs-built_in">set</span> -e

<span class="hljs-comment"># é…ç½®å˜é‡</span>
SOURCE_DIR=<span class="hljs-string">"/home/user/source"</span>
BACKUP_DIR=<span class="hljs-string">"/home/user/backup"</span>
LOG_FILE=<span class="hljs-string">"/var/log/rsync/local_sync.log"</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-subst">$(date)</span>: å¼€å§‹æœ¬åœ°åŒæ­¥"</span> &gt;&gt; <span class="hljs-variable">$LOG_FILE</span>

<span class="hljs-comment"># æ‰§è¡Œ rsync åŒæ­¥</span>
rsync -avh \
    --progress \
    --delete \
    --exclude=<span class="hljs-string">'*.tmp'</span> \
    --exclude=<span class="hljs-string">'.git/'</span> \
    <span class="hljs-variable">$SOURCE_DIR</span>/ <span class="hljs-variable">$BACKUP_DIR</span>/ &gt;&gt; <span class="hljs-variable">$LOG_FILE</span> 2&gt;&amp;1

<span class="hljs-comment"># æ£€æŸ¥æ‰§è¡Œç»“æœ</span>
<span class="hljs-keyword">if</span> [ $? -eq 0 ]; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-subst">$(date)</span>: æœ¬åœ°åŒæ­¥å®Œæˆ"</span> &gt;&gt; <span class="hljs-variable">$LOG_FILE</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"åŒæ­¥å®Œæˆï¼æŸ¥çœ‹æ—¥å¿—: <span class="hljs-variable">$LOG_FILE</span>"</span>
<span class="hljs-keyword">else</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-subst">$(date)</span>: æœ¬åœ°åŒæ­¥å¤±è´¥"</span> &gt;&gt; <span class="hljs-variable">$LOG_FILE</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"åŒæ­¥å¤±è´¥ï¼æŸ¥çœ‹æ—¥å¿—: <span class="hljs-variable">$LOG_FILE</span>"</span>
    <span class="hljs-built_in">exit</span> 1
<span class="hljs-keyword">fi</span>
</code></pre>
<h3 data-id="heading-11">5.2 è¿œç¨‹æœåŠ¡å™¨åŒæ­¥</h3>
<p><strong>åˆ›å»ºè¿œç¨‹åŒæ­¥è„šæœ¬ï¼š<code>remote_sync.sh</code></strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>

<span class="hljs-comment"># è¿œç¨‹æœåŠ¡å™¨åŒæ­¥è„šæœ¬</span>

<span class="hljs-built_in">set</span> -e

<span class="hljs-comment"># é…ç½®å˜é‡</span>
REMOTE_USER=<span class="hljs-string">"backupuser"</span>
REMOTE_HOST=<span class="hljs-string">"192.168.1.100"</span>
REMOTE_PORT=<span class="hljs-string">"22"</span>
SOURCE_DIR=<span class="hljs-string">"/data/important"</span>
BACKUP_DIR=<span class="hljs-string">"/backup/primary"</span>
LOG_FILE=<span class="hljs-string">"/var/log/rsync/remote_sync.log"</span>

<span class="hljs-comment"># åŒæ­¥é€‰é¡¹</span>
RSYNC_OPTIONS=<span class="hljs-string">"-avzhP \
    --progress \
    --delete \
    --exclude='cache/*' \
    --exclude='temp/*' \
    --exclude='*.log' \
    --log-file=<span class="hljs-variable">$LOG_FILE</span>"</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-subst">$(date)</span>: å¼€å§‹è¿œç¨‹åŒæ­¥åˆ° <span class="hljs-variable">$REMOTE_USER</span>@<span class="hljs-variable">$REMOTE_HOST</span>"</span> &gt;&gt; <span class="hljs-variable">$LOG_FILE</span>

<span class="hljs-comment"># æ‰§è¡Œè¿œç¨‹åŒæ­¥</span>
rsync <span class="hljs-variable">$RSYNC_OPTIONS</span> \
    -e <span class="hljs-string">"ssh -p <span class="hljs-variable">$REMOTE_PORT</span>"</span> \
    <span class="hljs-variable">$SOURCE_DIR</span>/ <span class="hljs-variable">$REMOTE_USER</span>@<span class="hljs-variable">$REMOTE_HOST</span>:<span class="hljs-variable">$BACKUP_DIR</span>/

<span class="hljs-comment"># éªŒè¯åŒæ­¥ç»“æœ</span>
<span class="hljs-keyword">if</span> [ $? -eq 0 ]; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-subst">$(date)</span>: è¿œç¨‹åŒæ­¥æˆåŠŸå®Œæˆ"</span> &gt;&gt; <span class="hljs-variable">$LOG_FILE</span>
    
    <span class="hljs-comment"># ç»Ÿè®¡åŒæ­¥ç»“æœ</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"=== åŒæ­¥ç»Ÿè®¡ ==="</span> &gt;&gt; <span class="hljs-variable">$LOG_FILE</span>
    <span class="hljs-built_in">tail</span> -n 10 <span class="hljs-variable">$LOG_FILE</span> | grep -E <span class="hljs-string">"sent|received"</span> &gt;&gt; <span class="hljs-variable">$LOG_FILE</span>
<span class="hljs-keyword">else</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-subst">$(date)</span>: è¿œç¨‹åŒæ­¥å¤±è´¥"</span> &gt;&gt; <span class="hljs-variable">$LOG_FILE</span>
    <span class="hljs-built_in">exit</span> 1
<span class="hljs-keyword">fi</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"è¿œç¨‹åŒæ­¥å®Œæˆï¼è¯¦ç»†æ—¥å¿—: <span class="hljs-variable">$LOG_FILE</span>"</span>
</code></pre>
<h2 data-id="heading-12">6. é«˜çº§å¤‡ä»½ç­–ç•¥</h2>
<h3 data-id="heading-13">6.1 å¢é‡å¤‡ä»½ä¸è½®è½¬</h3>
<p><strong>åˆ›å»ºæ™ºèƒ½å¤‡ä»½è„šæœ¬ï¼š<code>smart_backup.sh</code></strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>

<span class="hljs-comment"># æ™ºèƒ½å¤‡ä»½è„šæœ¬ - æ”¯æŒå¢é‡å¤‡ä»½å’Œè½®è½¬</span>

<span class="hljs-built_in">set</span> -e

<span class="hljs-comment"># é…ç½®å˜é‡</span>
SOURCE_DIR=<span class="hljs-string">"/data/production"</span>
BACKUP_BASE=<span class="hljs-string">"/backup"</span>
REMOTE_HOST=<span class="hljs-string">"backup.server.com"</span>
REMOTE_USER=<span class="hljs-string">"backup"</span>
LOG_FILE=<span class="hljs-string">"/var/log/rsync/backup_<span class="hljs-subst">$(date +%Y%m%d)</span>.log"</span>

<span class="hljs-comment"># å¤‡ä»½ç±»å‹é…ç½®</span>
BACKUP_TYPE=<span class="hljs-string">"incremental"</span>  <span class="hljs-comment"># incremental æˆ– full</span>
RETENTION_DAYS=30

<span class="hljs-comment"># åˆ›å»ºå¤‡ä»½ç›®å½•ç»“æ„</span>
YEAR=$(<span class="hljs-built_in">date</span> +%Y)
MONTH=$(<span class="hljs-built_in">date</span> +%m)
DAY=$(<span class="hljs-built_in">date</span> +%d)
TIMESTAMP=$(<span class="hljs-built_in">date</span> +%Y%m%d_%H%M%S)

BACKUP_PATH=<span class="hljs-string">"<span class="hljs-variable">$BACKUP_BASE</span>/<span class="hljs-variable">$YEAR</span>/<span class="hljs-variable">$MONTH</span>/<span class="hljs-variable">$DAY</span>"</span>
LATEST_LINK=<span class="hljs-string">"<span class="hljs-variable">$BACKUP_BASE</span>/latest"</span>

<span class="hljs-comment"># è¿œç¨‹å¤‡ä»½ç›®å½•</span>
REMOTE_BACKUP_PATH=<span class="hljs-string">"/backup/<span class="hljs-subst">$(hostname)</span>/<span class="hljs-variable">$YEAR</span>/<span class="hljs-variable">$MONTH</span>/<span class="hljs-variable">$DAY</span>"</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"=========================================="</span> &gt;&gt; <span class="hljs-variable">$LOG_FILE</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"å¼€å§‹å¤‡ä»½: <span class="hljs-subst">$(date)</span>"</span> &gt;&gt; <span class="hljs-variable">$LOG_FILE</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"æºç›®å½•: <span class="hljs-variable">$SOURCE_DIR</span>"</span> &gt;&gt; <span class="hljs-variable">$LOG_FILE</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"å¤‡ä»½è·¯å¾„: <span class="hljs-variable">$BACKUP_PATH</span>"</span> &gt;&gt; <span class="hljs-variable">$LOG_FILE</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"=========================================="</span> &gt;&gt; <span class="hljs-variable">$LOG_FILE</span>

<span class="hljs-comment"># åˆ›å»ºæœ¬åœ°å¤‡ä»½ç›®å½•</span>
<span class="hljs-built_in">mkdir</span> -p <span class="hljs-variable">$BACKUP_PATH</span>

<span class="hljs-comment"># æ ¹æ®å¤‡ä»½ç±»å‹æ‰§è¡Œç›¸åº”æ“ä½œ</span>
<span class="hljs-keyword">case</span> <span class="hljs-variable">$BACKUP_TYPE</span> <span class="hljs-keyword">in</span>
    <span class="hljs-string">"full"</span>)
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"æ‰§è¡Œå®Œæ•´å¤‡ä»½..."</span> &gt;&gt; <span class="hljs-variable">$LOG_FILE</span>
        LINK_DEST=<span class="hljs-string">""</span>
        ;;
    <span class="hljs-string">"incremental"</span>)
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"æ‰§è¡Œå¢é‡å¤‡ä»½..."</span> &gt;&gt; <span class="hljs-variable">$LOG_FILE</span>
        <span class="hljs-keyword">if</span> [ -L <span class="hljs-variable">$LATEST_LINK</span> ]; <span class="hljs-keyword">then</span>
            LINK_DEST=<span class="hljs-string">"--link-dest=<span class="hljs-variable">$LATEST_LINK</span>"</span>
            <span class="hljs-built_in">echo</span> <span class="hljs-string">"åŸºäºä¸Šä¸€ä¸ªå¤‡ä»½: <span class="hljs-subst">$(readlink $LATEST_LINK)</span>"</span> &gt;&gt; <span class="hljs-variable">$LOG_FILE</span>
        <span class="hljs-keyword">else</span>
            LINK_DEST=<span class="hljs-string">""</span>
            <span class="hljs-built_in">echo</span> <span class="hljs-string">"é¦–æ¬¡å®Œæ•´å¤‡ä»½ï¼ˆå¢é‡åŸºå‡†ï¼‰"</span> &gt;&gt; <span class="hljs-variable">$LOG_FILE</span>
        <span class="hljs-keyword">fi</span>
        ;;
    *)
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"é”™è¯¯çš„å¤‡ä»½ç±»å‹: <span class="hljs-variable">$BACKUP_TYPE</span>"</span> &gt;&gt; <span class="hljs-variable">$LOG_FILE</span>
        <span class="hljs-built_in">exit</span> 1
        ;;
<span class="hljs-keyword">esac</span>

<span class="hljs-comment"># æ‰§è¡Œæœ¬åœ°å¤‡ä»½</span>
rsync -avh \
    --progress \
    --delete \
    <span class="hljs-variable">$LINK_DEST</span> \
    --exclude=<span class="hljs-string">'*.tmp'</span> \
    --exclude=<span class="hljs-string">'/cache/'</span> \
    --log-file=<span class="hljs-variable">$LOG_FILE</span> \
    <span class="hljs-variable">$SOURCE_DIR</span>/ <span class="hljs-variable">$BACKUP_PATH</span>/

<span class="hljs-comment"># æ›´æ–° latest ç¬¦å·é“¾æ¥</span>
<span class="hljs-built_in">ln</span> -sfn <span class="hljs-variable">$BACKUP_PATH</span> <span class="hljs-variable">$LATEST_LINK</span>

<span class="hljs-comment"># æ‰§è¡Œè¿œç¨‹åŒæ­¥</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"å¼€å§‹è¿œç¨‹åŒæ­¥..."</span> &gt;&gt; <span class="hljs-variable">$LOG_FILE</span>
rsync -avzh \
    -e <span class="hljs-string">"ssh"</span> \
    --progress \
    --delete \
    <span class="hljs-variable">$BACKUP_BASE</span>/ <span class="hljs-variable">$REMOTE_USER</span>@<span class="hljs-variable">$REMOTE_HOST</span>:<span class="hljs-variable">$REMOTE_BACKUP_PATH</span>/ &gt;&gt; <span class="hljs-variable">$LOG_FILE</span> 2&gt;&amp;1

<span class="hljs-comment"># æ¸…ç†æ—§å¤‡ä»½</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"æ¸…ç†è¶…è¿‡ <span class="hljs-variable">$RETENTION_DAYS</span> å¤©çš„å¤‡ä»½..."</span> &gt;&gt; <span class="hljs-variable">$LOG_FILE</span>
find <span class="hljs-variable">$BACKUP_BASE</span> -<span class="hljs-built_in">type</span> d -mtime +<span class="hljs-variable">$RETENTION_DAYS</span> -<span class="hljs-built_in">exec</span> <span class="hljs-built_in">rm</span> -rf {} \; 2&gt;/dev/null || <span class="hljs-literal">true</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"å¤‡ä»½å®Œæˆ: <span class="hljs-subst">$(date)</span>"</span> &gt;&gt; <span class="hljs-variable">$LOG_FILE</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"å¤‡ä»½æ—¥å¿—: <span class="hljs-variable">$LOG_FILE</span>"</span>
</code></pre>
<h3 data-id="heading-14">6.2 å¤‡ä»½éªŒè¯è„šæœ¬</h3>
<p><strong>åˆ›å»ºå¤‡ä»½éªŒè¯è„šæœ¬ï¼š<code>verify_backup.sh</code></strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>

<span class="hljs-comment"># å¤‡ä»½éªŒè¯è„šæœ¬</span>

<span class="hljs-built_in">set</span> -e

<span class="hljs-comment"># é…ç½®å˜é‡</span>
SOURCE_DIR=<span class="hljs-string">"/data/production"</span>
BACKUP_DIR=<span class="hljs-string">"/backup/latest"</span>
LOG_FILE=<span class="hljs-string">"/var/log/rsync/verify.log"</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-subst">$(date)</span>: å¼€å§‹å¤‡ä»½éªŒè¯"</span> &gt;&gt; <span class="hljs-variable">$LOG_FILE</span>

<span class="hljs-comment"># ç”Ÿæˆæºç›®å½•æ ¡éªŒå’Œ</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"ç”Ÿæˆæºç›®å½•æ–‡ä»¶åˆ—è¡¨..."</span> &gt;&gt; <span class="hljs-variable">$LOG_FILE</span>
find <span class="hljs-variable">$SOURCE_DIR</span> -<span class="hljs-built_in">type</span> f -<span class="hljs-built_in">exec</span> <span class="hljs-built_in">sha256sum</span> {} \; | <span class="hljs-built_in">sort</span> &gt; /tmp/source_checksums.txt

<span class="hljs-comment"># ç”Ÿæˆå¤‡ä»½ç›®å½•æ ¡éªŒå’Œ</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"ç”Ÿæˆå¤‡ä»½ç›®å½•æ–‡ä»¶åˆ—è¡¨..."</span> &gt;&gt; <span class="hljs-variable">$LOG_FILE</span>
find <span class="hljs-variable">$BACKUP_DIR</span> -<span class="hljs-built_in">type</span> f -<span class="hljs-built_in">exec</span> <span class="hljs-built_in">sha256sum</span> {} \; | <span class="hljs-built_in">sort</span> &gt; /tmp/backup_checksums.txt

<span class="hljs-comment"># æ¯”è¾ƒæ ¡éªŒå’Œ</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"æ¯”è¾ƒæ–‡ä»¶æ ¡éªŒå’Œ..."</span> &gt;&gt; <span class="hljs-variable">$LOG_FILE</span>
diff /tmp/source_checksums.txt /tmp/backup_checksums.txt &gt; /tmp/checksum_diff.txt

<span class="hljs-keyword">if</span> [ $? -eq 0 ]; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-subst">$(date)</span>: âœ“ å¤‡ä»½éªŒè¯æˆåŠŸ - æ‰€æœ‰æ–‡ä»¶ä¸€è‡´"</span> &gt;&gt; <span class="hljs-variable">$LOG_FILE</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"å¤‡ä»½éªŒè¯æˆåŠŸï¼"</span>
<span class="hljs-keyword">else</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-subst">$(date)</span>: âœ— å¤‡ä»½éªŒè¯å¤±è´¥ - å‘ç°å·®å¼‚:"</span> &gt;&gt; <span class="hljs-variable">$LOG_FILE</span>
    <span class="hljs-built_in">cat</span> /tmp/checksum_diff.txt &gt;&gt; <span class="hljs-variable">$LOG_FILE</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"å¤‡ä»½éªŒè¯å¤±è´¥ï¼æŸ¥çœ‹æ—¥å¿—: <span class="hljs-variable">$LOG_FILE</span>"</span>
    <span class="hljs-built_in">exit</span> 1
<span class="hljs-keyword">fi</span>

<span class="hljs-comment"># æ¸…ç†ä¸´æ—¶æ–‡ä»¶</span>
<span class="hljs-built_in">rm</span> -f /tmp/source_checksums.txt /tmp/backup_checksums.txt /tmp/checksum_diff.txt
</code></pre>
<h2 data-id="heading-15">7. è‡ªåŠ¨åŒ–ä¸ç›‘æ§</h2>
<h3 data-id="heading-16">7.1 Cron å®šæ—¶ä»»åŠ¡é…ç½®</h3>
<p><strong>åˆ›å»º Cron é…ç½®è„šæœ¬ï¼š<code>setup_cron.sh</code></strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>

<span class="hljs-comment"># è®¾ç½® Rsync å®šæ—¶ä»»åŠ¡</span>

<span class="hljs-built_in">set</span> -e

<span class="hljs-comment"># å¤‡ä»½è„šæœ¬è·¯å¾„</span>
BACKUP_SCRIPT=<span class="hljs-string">"/usr/local/bin/smart_backup.sh"</span>
VERIFY_SCRIPT=<span class="hljs-string">"/usr/local/bin/verify_backup.sh"</span>

<span class="hljs-comment"># ç¡®ä¿è„šæœ¬æœ‰æ‰§è¡Œæƒé™</span>
<span class="hljs-built_in">chmod</span> +x <span class="hljs-variable">$BACKUP_SCRIPT</span>
<span class="hljs-built_in">chmod</span> +x <span class="hljs-variable">$VERIFY_SCRIPT</span>

<span class="hljs-comment"># æ·»åŠ å®šæ—¶ä»»åŠ¡</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"è®¾ç½® Rsync å®šæ—¶ä»»åŠ¡..."</span>

<span class="hljs-comment"># æ¯å¤©å‡Œæ™¨2ç‚¹æ‰§è¡Œå®Œæ•´å¤‡ä»½</span>
(crontab -l 2&gt;/dev/null; <span class="hljs-built_in">echo</span> <span class="hljs-string">"0 2 * * 1 <span class="hljs-variable">$BACKUP_SCRIPT</span>"</span>) | crontab -

<span class="hljs-comment"># æ¯å¤©å‡Œæ™¨3ç‚¹æ‰§è¡Œå¢é‡å¤‡ä»½</span>
(crontab -l 2&gt;/dev/null; <span class="hljs-built_in">echo</span> <span class="hljs-string">"0 3 * * 2-7 <span class="hljs-variable">$BACKUP_SCRIPT</span>"</span>) | crontab -

<span class="hljs-comment"># æ¯å‘¨æ—¥å‡Œæ™¨4ç‚¹éªŒè¯å¤‡ä»½</span>
(crontab -l 2&gt;/dev/null; <span class="hljs-built_in">echo</span> <span class="hljs-string">"0 4 * * 0 <span class="hljs-variable">$VERIFY_SCRIPT</span>"</span>) | crontab -

<span class="hljs-comment"># æ˜¾ç¤ºå½“å‰å®šæ—¶ä»»åŠ¡</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"å½“å‰å®šæ—¶ä»»åŠ¡:"</span>
crontab -l

<span class="hljs-built_in">echo</span> <span class="hljs-string">"å®šæ—¶ä»»åŠ¡è®¾ç½®å®Œæˆ"</span>
</code></pre>
<h3 data-id="heading-17">7.2 ç›‘æ§ä¸å‘Šè­¦è„šæœ¬</h3>
<p><strong>åˆ›å»ºç›‘æ§è„šæœ¬ï¼š<code>monitor_backup.sh</code></strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>

<span class="hljs-comment"># å¤‡ä»½ç›‘æ§å’Œå‘Šè­¦è„šæœ¬</span>

<span class="hljs-built_in">set</span> -e

<span class="hljs-comment"># é…ç½®å˜é‡</span>
LOG_DIR=<span class="hljs-string">"/var/log/rsync"</span>
ALERT_EMAIL=<span class="hljs-string">"admin@company.com"</span>
MAX_LOG_AGE=24  <span class="hljs-comment"># å°æ—¶</span>

<span class="hljs-comment"># æ£€æŸ¥æœ€è¿‘çš„å¤‡ä»½æ—¥å¿—</span>
RECENT_LOGS=$(find <span class="hljs-variable">$LOG_DIR</span> -name <span class="hljs-string">"backup_*.log"</span> -mtime -1)

<span class="hljs-keyword">if</span> [ -z <span class="hljs-string">"<span class="hljs-variable">$RECENT_LOGS</span>"</span> ]; <span class="hljs-keyword">then</span>
    SUBJECT=<span class="hljs-string">"è­¦å‘Š: æœªå‘ç°æœ€è¿‘å¤‡ä»½æ—¥å¿—"</span>
    MESSAGE=<span class="hljs-string">"åœ¨ <span class="hljs-variable">$LOG_DIR</span> ä¸­æœªæ‰¾åˆ°æœ€è¿‘ <span class="hljs-variable">$MAX_LOG_AGE</span> å°æ—¶å†…çš„å¤‡ä»½æ—¥å¿—ï¼Œè¯·æ£€æŸ¥å¤‡ä»½ä»»åŠ¡çŠ¶æ€ã€‚"</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-variable">$MESSAGE</span>"</span> | mail -s <span class="hljs-string">"<span class="hljs-variable">$SUBJECT</span>"</span> <span class="hljs-variable">$ALERT_EMAIL</span>
    <span class="hljs-built_in">exit</span> 1
<span class="hljs-keyword">fi</span>

<span class="hljs-comment"># æ£€æŸ¥æœ€æ–°å¤‡ä»½çŠ¶æ€</span>
LATEST_LOG=$(<span class="hljs-built_in">ls</span> -t <span class="hljs-variable">$LOG_DIR</span>/backup_*.<span class="hljs-built_in">log</span> | <span class="hljs-built_in">head</span> -n1)

<span class="hljs-keyword">if</span> grep -q <span class="hljs-string">"å¤‡ä»½å®Œæˆ"</span> <span class="hljs-string">"<span class="hljs-variable">$LATEST_LOG</span>"</span>; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"å¤‡ä»½çŠ¶æ€: æ­£å¸¸"</span>
    
    <span class="hljs-comment"># æå–å¤‡ä»½ç»Ÿè®¡ä¿¡æ¯</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"=== æœ€æ–°å¤‡ä»½ç»Ÿè®¡ ==="</span>
    <span class="hljs-built_in">tail</span> -n 20 <span class="hljs-variable">$LATEST_LOG</span> | grep -E <span class="hljs-string">"sent|received|Number of files"</span>
<span class="hljs-keyword">else</span>
    SUBJECT=<span class="hljs-string">"ç´§æ€¥: å¤‡ä»½ä»»åŠ¡å¤±è´¥"</span>
    MESSAGE=<span class="hljs-string">"æœ€æ–°å¤‡ä»½ä»»åŠ¡å¯èƒ½å¤±è´¥ï¼Œè¯·ç«‹å³æ£€æŸ¥æ—¥å¿—: <span class="hljs-variable">$LATEST_LOG</span>"</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-variable">$MESSAGE</span>"</span> | mail -s <span class="hljs-string">"<span class="hljs-variable">$SUBJECT</span>"</span> <span class="hljs-variable">$ALERT_EMAIL</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"å¤‡ä»½çŠ¶æ€: å¤±è´¥ - å·²å‘é€å‘Šè­¦"</span>
    <span class="hljs-built_in">exit</span> 1
<span class="hljs-keyword">fi</span>

<span class="hljs-comment"># æ£€æŸ¥ç£ç›˜ç©ºé—´</span>
DISK_USAGE=$(<span class="hljs-built_in">df</span> -h <span class="hljs-variable">$LOG_DIR</span> | awk <span class="hljs-string">'NR==2 {print $5}'</span> | sed <span class="hljs-string">'s/%//'</span>)
<span class="hljs-keyword">if</span> [ <span class="hljs-variable">$DISK_USAGE</span> -gt 90 ]; <span class="hljs-keyword">then</span>
    SUBJECT=<span class="hljs-string">"è­¦å‘Š: å¤‡ä»½ç£ç›˜ç©ºé—´ä¸è¶³"</span>
    MESSAGE=<span class="hljs-string">"å¤‡ä»½ç›®å½•ç£ç›˜ä½¿ç”¨ç‡: <span class="hljs-variable">${DISK_USAGE}</span>%ï¼Œè¯·åŠæ—¶æ¸…ç†ã€‚"</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-variable">$MESSAGE</span>"</span> | mail -s <span class="hljs-string">"<span class="hljs-variable">$SUBJECT</span>"</span> <span class="hljs-variable">$ALERT_EMAIL</span>
<span class="hljs-keyword">fi</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"ç›‘æ§æ£€æŸ¥å®Œæˆ: <span class="hljs-subst">$(date)</span>"</span>
</code></pre>
<h2 data-id="heading-18">8. é«˜çº§é…ç½®ä¸ä¼˜åŒ–</h2>
<h3 data-id="heading-19">8.1 Rsync å®ˆæŠ¤æ¨¡å¼é…ç½®</h3>
<p><strong>åˆ›å»º Rsync æœåŠ¡ç«¯é…ç½®ï¼š<code>rsyncd.conf</code></strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># Rsync å®ˆæŠ¤è¿›ç¨‹é…ç½®æ–‡ä»¶</span>
<span class="hljs-comment"># ä½ç½®: /etc/rsyncd.conf</span>

uid = nobody
gid = nobody
use <span class="hljs-built_in">chroot</span> = <span class="hljs-built_in">yes</span>
max connections = 10
pid file = /var/run/rsyncd.pid
lock file = /var/run/rsync.lock
<span class="hljs-built_in">log</span> file = /var/log/rsyncd.log

[backup]
    path = /data/backup
    comment = Main backup directory
    <span class="hljs-built_in">read</span> only = no
    auth <span class="hljs-built_in">users</span> = backupuser
    secrets file = /etc/rsyncd.secrets
    hosts allow = 192.168.1.0/24
    hosts deny = *
    list = <span class="hljs-built_in">yes</span>

[webdata]
    path = /var/www/html
    comment = Web data backup
    <span class="hljs-built_in">read</span> only = <span class="hljs-built_in">yes</span>
    exclude = cache/ temp/ logs/
    dont compress = *.gz *.zip *.jpg *.png
</code></pre>
<p><strong>åˆ›å»ºè®¤è¯æ–‡ä»¶ï¼š<code>setup_rsync_daemon.sh</code></strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>

<span class="hljs-comment"># è®¾ç½® Rsync å®ˆæŠ¤æ¨¡å¼</span>

<span class="hljs-built_in">set</span> -e

<span class="hljs-built_in">echo</span> <span class="hljs-string">"è®¾ç½® Rsync å®ˆæŠ¤è¿›ç¨‹..."</span>

<span class="hljs-comment"># åˆ›å»ºè®¤è¯æ–‡ä»¶</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"backupuser:password123"</span> | sudo <span class="hljs-built_in">tee</span> /etc/rsyncd.secrets
sudo <span class="hljs-built_in">chmod</span> 600 /etc/rsyncd.secrets

<span class="hljs-comment"># åˆ›å»ºå¤‡ä»½ç›®å½•</span>
sudo <span class="hljs-built_in">mkdir</span> -p /data/backup
sudo <span class="hljs-built_in">chown</span> nobody:nobody /data/backup

<span class="hljs-comment"># å¤åˆ¶é…ç½®æ–‡ä»¶</span>
sudo <span class="hljs-built_in">cp</span> rsyncd.conf /etc/

<span class="hljs-comment"># å¯åŠ¨ Rsync å®ˆæŠ¤è¿›ç¨‹</span>
<span class="hljs-keyword">if</span> <span class="hljs-built_in">command</span> -v systemctl &gt;/dev/null; <span class="hljs-keyword">then</span>
    <span class="hljs-comment"># Systemd ç³»ç»Ÿ</span>
    sudo systemctl <span class="hljs-built_in">enable</span> rsync
    sudo systemctl start rsync
    sudo systemctl status rsync
<span class="hljs-keyword">else</span>
    <span class="hljs-comment"># SysV init ç³»ç»Ÿ</span>
    sudo service rsync start
    sudo service rsync status
<span class="hljs-keyword">fi</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"Rsync å®ˆæŠ¤è¿›ç¨‹è®¾ç½®å®Œæˆ"</span>
</code></pre>
<h3 data-id="heading-20">8.2 æ€§èƒ½ä¼˜åŒ–è„šæœ¬</h3>
<p><strong>åˆ›å»ºæ€§èƒ½ä¼˜åŒ–è„šæœ¬ï¼š<code>optimize_rsync.sh</code></strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>

<span class="hljs-comment"># Rsync æ€§èƒ½ä¼˜åŒ–é…ç½®</span>

<span class="hljs-built_in">set</span> -e

<span class="hljs-built_in">echo</span> <span class="hljs-string">"ä¼˜åŒ– Rsync æ€§èƒ½é…ç½®..."</span>

<span class="hljs-comment"># åˆ›å»ºä¼˜åŒ–é…ç½®</span>
<span class="hljs-built_in">cat</span> &gt; /tmp/rsync_optimizations.txt &lt;&lt; <span class="hljs-string">'EOF'</span>
<span class="hljs-comment"># Rsync æ€§èƒ½ä¼˜åŒ–å»ºè®®</span>

1. ç½‘ç»œä¼˜åŒ–ï¼š
   - ä½¿ç”¨ -z å‹ç¼©ä¼ è¾“
   - è°ƒæ•´ --block-size å‚æ•°
   - ä½¿ç”¨ -W ç¦ç”¨å¢é‡æ£€æµ‹ï¼ˆå…¨é‡ä¼ è¾“æ—¶ï¼‰

2. æ–‡ä»¶å¤„ç†ä¼˜åŒ–ï¼š
   - ä½¿ç”¨ --inplace é¿å…ä¸´æ—¶æ–‡ä»¶
   - åˆç†ä½¿ç”¨ --exclude å‡å°‘æ‰«ææ–‡ä»¶æ•°
   - è€ƒè™‘ä½¿ç”¨ --max-size å’Œ --min-size

3. ç³»ç»Ÿçº§ä¼˜åŒ–ï¼š
   - è°ƒæ•´ TCP ç¼“å†²åŒºå¤§å°
   - ä½¿ç”¨æ›´å¿«çš„åŠ å¯†ç®—æ³•ï¼ˆå¦‚ arcfourï¼‰
   - è€ƒè™‘ä½¿ç”¨ rsync over rsync å®ˆæŠ¤è¿›ç¨‹

4. é’ˆå¯¹å¤§æ–‡ä»¶é›†çš„ä¼˜åŒ–å‚æ•°ï¼š
   rsync -avzh \
     --progress \
     --delete \
     --partial \
     --inplace \
     --compress \
     --compress-level=6 \
     --bwlimit=50000 \
     --<span class="hljs-built_in">timeout</span>=300 \
     <span class="hljs-built_in">source</span>/ destination/
EOF

<span class="hljs-built_in">echo</span> <span class="hljs-string">"æ€§èƒ½ä¼˜åŒ–å»ºè®®å·²ä¿å­˜åˆ°: /tmp/rsync_optimizations.txt"</span>
<span class="hljs-built_in">cat</span> /tmp/rsync_optimizations.txt
</code></pre>
<h2 data-id="heading-21">9. æ•…éšœæ’é™¤ä¸ç»´æŠ¤</h2>
<h3 data-id="heading-22">9.1 å¸¸è§é—®é¢˜è§£å†³è„šæœ¬</h3>
<p><strong>åˆ›å»ºæ•…éšœæ’é™¤è„šæœ¬ï¼š<code>troubleshoot_rsync.sh</code></strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>

<span class="hljs-comment"># Rsync æ•…éšœæ’é™¤å·¥å…·</span>

<span class="hljs-built_in">set</span> -e

<span class="hljs-built_in">echo</span> <span class="hljs-string">"Rsync æ•…éšœæ’é™¤æ£€æŸ¥..."</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"========================"</span>

<span class="hljs-comment"># æ£€æŸ¥ Rsync æ˜¯å¦å®‰è£…</span>
<span class="hljs-keyword">if</span> <span class="hljs-built_in">command</span> -v rsync &gt;/dev/null; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"âœ“ Rsync å·²å®‰è£…: <span class="hljs-subst">$(rsync --version | head -n1)</span>"</span>
<span class="hljs-keyword">else</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"âœ— Rsync æœªå®‰è£…"</span>
    <span class="hljs-built_in">exit</span> 1
<span class="hljs-keyword">fi</span>

<span class="hljs-comment"># æ£€æŸ¥ SSH è¿æ¥</span>
<span class="hljs-built_in">read</span> -p <span class="hljs-string">"æµ‹è¯•è¿œç¨‹è¿æ¥ï¼Ÿ(y/n): "</span> test_ssh
<span class="hljs-keyword">if</span> [ <span class="hljs-string">"<span class="hljs-variable">$test_ssh</span>"</span> = <span class="hljs-string">"y"</span> ]; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">read</span> -p <span class="hljs-string">"è¿œç¨‹ä¸»æœº: "</span> remote_host
    <span class="hljs-built_in">read</span> -p <span class="hljs-string">"ç”¨æˆ·å: "</span> remote_user
    ssh -o BatchMode=<span class="hljs-built_in">yes</span> <span class="hljs-variable">$remote_user</span>@<span class="hljs-variable">$remote_host</span> <span class="hljs-string">"echo 'SSH è¿æ¥æˆåŠŸ'"</span>
<span class="hljs-keyword">fi</span>

<span class="hljs-comment"># æ£€æŸ¥ç£ç›˜ç©ºé—´</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"=== ç£ç›˜ç©ºé—´æ£€æŸ¥ ==="</span>
<span class="hljs-built_in">df</span> -h | grep -E <span class="hljs-string">"(Filesystem|/backup|/data)"</span>

<span class="hljs-comment"># æ£€æŸ¥æœ€è¿‘æ—¥å¿—</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"=== æœ€è¿‘ Rsync æ—¥å¿— ==="</span>
find /var/log/rsync -name <span class="hljs-string">"*.log"</span> -mtime -1 -<span class="hljs-built_in">exec</span> <span class="hljs-built_in">tail</span> -n 5 {} \; 2&gt;/dev/null || <span class="hljs-built_in">echo</span> <span class="hljs-string">"æœªæ‰¾åˆ°æ—¥å¿—æ–‡ä»¶"</span>

<span class="hljs-comment"># æ£€æŸ¥å®šæ—¶ä»»åŠ¡</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"=== å®šæ—¶ä»»åŠ¡æ£€æŸ¥ ==="</span>
crontab -l | grep -E <span class="hljs-string">"(rsync|backup)"</span> || <span class="hljs-built_in">echo</span> <span class="hljs-string">"æœªæ‰¾åˆ°ç›¸å…³å®šæ—¶ä»»åŠ¡"</span>

<span class="hljs-comment"># æ£€æŸ¥è¿›ç¨‹</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"=== ç›¸å…³è¿›ç¨‹æ£€æŸ¥ ==="</span>
ps aux | grep -E <span class="hljs-string">"(rsync|backup)"</span> | grep -v grep || <span class="hljs-built_in">echo</span> <span class="hljs-string">"æœªæ‰¾åˆ°ç›¸å…³è¿›ç¨‹"</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"æ•…éšœæ’é™¤æ£€æŸ¥å®Œæˆ"</span>
</code></pre>
<h3 data-id="heading-23">9.2 æ—¥å¿—åˆ†æè„šæœ¬</h3>
<p><strong>åˆ›å»ºæ—¥å¿—åˆ†æè„šæœ¬ï¼š<code>analyze_logs.sh</code></strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>

<span class="hljs-comment"># Rsync æ—¥å¿—åˆ†æå·¥å…·</span>

<span class="hljs-built_in">set</span> -e

LOG_DIR=<span class="hljs-string">"/var/log/rsync"</span>
OUTPUT_FILE=<span class="hljs-string">"/tmp/rsync_analysis_<span class="hljs-subst">$(date +%Y%m%d)</span>.txt"</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"å¼€å§‹åˆ†æ Rsync æ—¥å¿—..."</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"Rsync æ—¥å¿—åˆ†ææŠ¥å‘Š - <span class="hljs-subst">$(date)</span>"</span> &gt; <span class="hljs-variable">$OUTPUT_FILE</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"================================="</span> &gt;&gt; <span class="hljs-variable">$OUTPUT_FILE</span>

<span class="hljs-comment"># åˆ†ææœ€è¿‘7å¤©çš„æ—¥å¿—</span>
<span class="hljs-keyword">for</span> log_file <span class="hljs-keyword">in</span> $(find <span class="hljs-variable">$LOG_DIR</span> -name <span class="hljs-string">"*.log"</span> -mtime -7); <span class="hljs-keyword">do</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">""</span> &gt;&gt; <span class="hljs-variable">$OUTPUT_FILE</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"åˆ†ææ–‡ä»¶: <span class="hljs-variable">$log_file</span>"</span> &gt;&gt; <span class="hljs-variable">$OUTPUT_FILE</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"-------------------------"</span> &gt;&gt; <span class="hljs-variable">$OUTPUT_FILE</span>
    
    <span class="hljs-comment"># ç»Ÿè®¡æˆåŠŸæ¬¡æ•°</span>
    success_count=$(grep -c <span class="hljs-string">"å®Œæˆ\|æˆåŠŸ"</span> <span class="hljs-string">"<span class="hljs-variable">$log_file</span>"</span> || <span class="hljs-literal">true</span>)
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"æˆåŠŸæ¬¡æ•°: <span class="hljs-variable">$success_count</span>"</span> &gt;&gt; <span class="hljs-variable">$OUTPUT_FILE</span>
    
    <span class="hljs-comment"># ç»Ÿè®¡å¤±è´¥æ¬¡æ•°</span>
    failure_count=$(grep -c <span class="hljs-string">"å¤±è´¥\|é”™è¯¯\|error"</span> <span class="hljs-string">"<span class="hljs-variable">$log_file</span>"</span> || <span class="hljs-literal">true</span>)
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"å¤±è´¥æ¬¡æ•°: <span class="hljs-variable">$failure_count</span>"</span> &gt;&gt; <span class="hljs-variable">$OUTPUT_FILE</span>
    
    <span class="hljs-comment"># æå–ä¼ è¾“ç»Ÿè®¡</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"ä¼ è¾“ç»Ÿè®¡:"</span> &gt;&gt; <span class="hljs-variable">$OUTPUT_FILE</span>
    grep -E <span class="hljs-string">"sent|received|total size"</span> <span class="hljs-string">"<span class="hljs-variable">$log_file</span>"</span> | <span class="hljs-built_in">tail</span> -n 5 &gt;&gt; <span class="hljs-variable">$OUTPUT_FILE</span> || <span class="hljs-built_in">echo</span> <span class="hljs-string">"æ— ä¼ è¾“ç»Ÿè®¡"</span> &gt;&gt; <span class="hljs-variable">$OUTPUT_FILE</span>
    
    <span class="hljs-comment"># æ£€æŸ¥æœ€è¿‘é”™è¯¯</span>
    recent_errors=$(grep -i <span class="hljs-string">"error\|fail"</span> <span class="hljs-string">"<span class="hljs-variable">$log_file</span>"</span> | <span class="hljs-built_in">tail</span> -n 3)
    <span class="hljs-keyword">if</span> [ -n <span class="hljs-string">"<span class="hljs-variable">$recent_errors</span>"</span> ]; <span class="hljs-keyword">then</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"æœ€è¿‘é”™è¯¯:"</span> &gt;&gt; <span class="hljs-variable">$OUTPUT_FILE</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-variable">$recent_errors</span>"</span> &gt;&gt; <span class="hljs-variable">$OUTPUT_FILE</span>
    <span class="hljs-keyword">fi</span>
<span class="hljs-keyword">done</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"æ—¥å¿—åˆ†æå®Œæˆ: <span class="hljs-variable">$OUTPUT_FILE</span>"</span>
<span class="hljs-built_in">cat</span> <span class="hljs-variable">$OUTPUT_FILE</span>
</code></pre>
<h2 data-id="heading-24">10. å®Œæ•´éƒ¨ç½²ç¤ºä¾‹</h2>
<h3 data-id="heading-25">10.1 ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²è„šæœ¬</h3>
<p><strong>åˆ›å»ºå®Œæ•´éƒ¨ç½²è„šæœ¬ï¼š<code>deploy_rsync_system.sh</code></strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>

<span class="hljs-comment"># å®Œæ•´çš„ Rsync å¤‡ä»½ç³»ç»Ÿéƒ¨ç½²è„šæœ¬</span>

<span class="hljs-built_in">set</span> -e

<span class="hljs-built_in">echo</span> <span class="hljs-string">"å¼€å§‹éƒ¨ç½²å®Œæ•´çš„ Rsync å¤‡ä»½ç³»ç»Ÿ..."</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"=================================="</span>

<span class="hljs-comment"># åˆ›å»ºç›®å½•ç»“æ„</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"åˆ›å»ºç›®å½•ç»“æ„..."</span>
sudo <span class="hljs-built_in">mkdir</span> -p /{backup,data,usr/local/bin,var/log/rsync}

<span class="hljs-comment"># å®‰è£… Rsync</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"å®‰è£… Rsync..."</span>
<span class="hljs-keyword">if</span> [ -f /etc/redhat-release ]; <span class="hljs-keyword">then</span>
    sudo yum install -y rsync
<span class="hljs-keyword">elif</span> [ -f /etc/debian_version ]; <span class="hljs-keyword">then</span>
    sudo apt-get update &amp;&amp; sudo apt-get install -y rsync
<span class="hljs-keyword">fi</span>

<span class="hljs-comment"># éƒ¨ç½²æ‰€æœ‰è„šæœ¬</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"éƒ¨ç½²ç®¡ç†è„šæœ¬..."</span>
sudo <span class="hljs-built_in">cp</span> smart_backup.sh /usr/local/bin/
sudo <span class="hljs-built_in">cp</span> verify_backup.sh /usr/local/bin/
sudo <span class="hljs-built_in">cp</span> monitor_backup.sh /usr/local/bin/
sudo <span class="hljs-built_in">cp</span> troubleshoot_rsync.sh /usr/local/bin/

<span class="hljs-comment"># è®¾ç½®æ‰§è¡Œæƒé™</span>
sudo <span class="hljs-built_in">chmod</span> +x /usr/local/bin/*.sh

<span class="hljs-comment"># è®¾ç½®å®šæ—¶ä»»åŠ¡</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"é…ç½®å®šæ—¶ä»»åŠ¡..."</span>
(sudo crontab -l 2&gt;/dev/null | grep -v -E <span class="hljs-string">"(smart_backup|verify_backup)"</span> ; <span class="hljs-built_in">cat</span> &lt;&lt; <span class="hljs-string">'EOF'</span>
<span class="hljs-comment"># Rsync å¤‡ä»½ä»»åŠ¡</span>
0 2 * * * /usr/local/bin/smart_backup.sh
0 4 * * 0 /usr/local/bin/verify_backup.sh
0 6 * * * /usr/local/bin/monitor_backup.sh
EOF
) | sudo crontab -

<span class="hljs-comment"># åˆ›å»ºæ—¥å¿—è½®è½¬é…ç½®</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"é…ç½®æ—¥å¿—è½®è½¬..."</span>
sudo <span class="hljs-built_in">cat</span> &gt; /etc/logrotate.d/rsync &lt;&lt; <span class="hljs-string">'EOF'</span>
/var/log/rsync/*.<span class="hljs-built_in">log</span> {
    daily
    rotate 30
    compress
    delaycompress
    missingok
    notifempty
    create 644 root root
}
EOF

<span class="hljs-built_in">echo</span> <span class="hljs-string">"éƒ¨ç½²å®Œæˆï¼"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"========== éƒ¨ç½²æ‘˜è¦ =========="</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"âœ“ Rsync å·²å®‰è£…"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"âœ“ ç®¡ç†è„šæœ¬å·²éƒ¨ç½²åˆ° /usr/local/bin/"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"âœ“ å®šæ—¶ä»»åŠ¡å·²é…ç½®"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"âœ“ æ—¥å¿—è½®è½¬å·²è®¾ç½®"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"=============================="</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"è¯·æ ¹æ®å®é™…ç¯å¢ƒä¿®æ”¹è„šæœ¬ä¸­çš„é…ç½®å˜é‡"</span>
</code></pre>
<h2 data-id="heading-26">11. æ€»ç»“</h2>
<p>é€šè¿‡æœ¬æ•™ç¨‹ï¼Œæˆ‘ä»¬æ„å»ºäº†ä¸€ä¸ªå®Œæ•´çš„ Rsync å¤‡ä»½å’ŒåŒæ­¥ç³»ç»Ÿï¼Œå…·å¤‡ä»¥ä¸‹ç‰¹æ€§ï¼š</p>
<ul>
<li><strong>å®Œæ•´çš„å®‰è£…å’Œé…ç½®æŒ‡å—</strong></li>
<li><strong>çµæ´»çš„åŒæ­¥ç­–ç•¥</strong>ï¼ˆå®Œæ•´å¤‡ä»½ + å¢é‡å¤‡ä»½ï¼‰</li>
<li><strong>è‡ªåŠ¨åŒ–è¿ç»´</strong>ï¼ˆå®šæ—¶ä»»åŠ¡ + ç›‘æ§å‘Šè­¦ï¼‰</li>
<li><strong>å¥å£®çš„æ•…éšœå¤„ç†</strong>ï¼ˆéªŒè¯ + æ—¥å¿—åˆ†æï¼‰</li>
<li><strong>æ€§èƒ½ä¼˜åŒ–å»ºè®®</strong></li>
</ul>
<p>è¿™å¥—ç³»ç»Ÿå¯ä»¥ç›´æ¥åœ¨ç”Ÿäº§ç¯å¢ƒä¸­éƒ¨ç½²ä½¿ç”¨ï¼Œèƒ½å¤Ÿæ»¡è¶³å¤§å¤šæ•°ä¼ä¸šçš„æ•°æ®åŒæ­¥å’Œå¤‡ä»½éœ€æ±‚ã€‚æ ¹æ®å®é™…ç¯å¢ƒè°ƒæ•´é…ç½®å‚æ•°åï¼Œå³å¯æä¾›å¯é çš„æ•°æ®ä¿æŠ¤è§£å†³æ–¹æ¡ˆã€‚</p>
<h3 data-id="heading-27">11.1 åç»­ç»´æŠ¤å»ºè®®</h3>
<ol>
<li><strong>å®šæœŸæ£€æŸ¥æ—¥å¿—æ–‡ä»¶</strong>ï¼Œç¡®ä¿å¤‡ä»½ä»»åŠ¡æ­£å¸¸è¿è¡Œ</li>
<li><strong>ç›‘æ§ç£ç›˜ç©ºé—´</strong>ï¼ŒåŠæ—¶æ¸…ç†è¿‡æœŸå¤‡ä»½</li>
<li><strong>å®šæœŸéªŒè¯å¤‡ä»½å®Œæ•´æ€§</strong>ï¼Œç¡®ä¿å¯æ¢å¤æ€§</li>
<li><strong>æ›´æ–°å®‰å…¨é…ç½®</strong>ï¼Œå®šæœŸæ›´æ¢è®¤è¯å¯†é’¥</li>
<li><strong>æµ‹è¯•æ¢å¤æµç¨‹</strong>ï¼Œç¡®ä¿ç¾éš¾æ¢å¤å¯è¡Œæ€§</li>
</ol>
<p>é€šè¿‡éµå¾ªè¿™äº›æœ€ä½³å®è·µï¼Œæ‚¨å¯ä»¥æ„å»ºä¸€ä¸ªå¯é ã€é«˜æ•ˆçš„æ•°æ®ä¿æŠ¤ä½“ç³»ï¼Œä¸ºä¸šåŠ¡è¿ç»­æ€§æä¾›åšå®ä¿éšœã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ¥å£è®¾è®¡ä¸­çš„æ‰©å±•ä¸ç»„åˆï¼šä¸€æ¬¡Code Reviewå¼•å‘çš„æ€è€ƒ]]></title>    <link>https://juejin.cn/post/7572437226023387146</link>    <guid>https://juejin.cn/post/7572437226023387146</guid>    <pubDate>2025-11-15T03:05:15.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572437226023387146" data-draft-id="7572455881029582857" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ¥å£è®¾è®¡ä¸­çš„æ‰©å±•ä¸ç»„åˆï¼šä¸€æ¬¡Code Reviewå¼•å‘çš„æ€è€ƒ"/> <meta itemprop="keywords" content="åç«¯,é¢è¯•,Java"/> <meta itemprop="datePublished" content="2025-11-15T03:05:15.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="9å·è¾¾äºº"/> <meta itemprop="url" content="https://juejin.cn/user/2450136052270077"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ¥å£è®¾è®¡ä¸­çš„æ‰©å±•ä¸ç»„åˆï¼šä¸€æ¬¡Code Reviewå¼•å‘çš„æ€è€ƒ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2450136052270077/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    9å·è¾¾äºº
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-15T03:05:15.000Z" title="Sat Nov 15 2025 03:05:15 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">èƒŒæ™¯</h2>
<p>æœ€è¿‘åœ¨å¼€å‘å¾®æœåŠ¡é¡¹ç›®æ—¶é‡åˆ°äº†ä¸€ä¸ªå…¸å‹çš„æŠ€æœ¯å†³ç­–åœºæ™¯ï¼šæˆ‘ä»¬çš„å•†å“æœåŠ¡é€šè¿‡ Dubbo å¯¹å¤–æä¾›äº†ä¸€ä¸ªå•†å“åˆ—è¡¨æŸ¥è¯¢çš„ RPC æ¥å£ï¼Œç›®å‰è¢«ç½‘é¡µç«¯ç³»ç»Ÿè°ƒç”¨ã€‚ç°åœ¨ PC ç«¯ç®¡ç†ç³»ç»Ÿï¼ˆæ–°çš„è°ƒç”¨æ–¹ï¼‰ä¹Ÿéœ€è¦ç±»ä¼¼çš„å•†å“åˆ—è¡¨åŠŸèƒ½ã€‚åœ¨ Code Review è¿‡ç¨‹ä¸­ï¼Œå…³äºæ˜¯æ–°å»ºæ¥å£è¿˜æ˜¯å¤ç”¨ç°æœ‰æ¥å£ï¼Œç»„é•¿å’Œæˆ‘äº§ç”Ÿäº†åˆ†æ­§ã€‚</p>
<p><strong>è¿™æ¬¡äº‰è®ºè®©æˆ‘æ„è¯†åˆ°ï¼šåŒæ ·æ˜¯"ä»£ç å¤ç”¨"ï¼Œä¸åŒäººçœ‹åˆ°çš„åœºæ™¯ä¹Ÿå¯èƒ½æ˜¯ä¸åŒçš„ã€‚</strong></p>
<blockquote>
<p>ğŸ’¡ <strong>æœ¬æ–‡çº¦ 4500 å­—ï¼Œé¢„è®¡é˜…è¯» 10 åˆ†é’Ÿ</strong>ã€‚å¦‚æœä½ ä¹Ÿé‡åˆ°è¿‡ç±»ä¼¼çš„æŠ€æœ¯å†³ç­–å›°æƒ‘ï¼Œæ¬¢è¿å…³æ³¨å…¬ä¼—å·ã€Œ<strong>9å·è¾¾äºº</strong>ã€ï¼Œä¸€èµ·äº¤æµå®æˆ˜ç»éªŒã€‚</p>
</blockquote>
<p><strong>é¡¹ç›®æ¶æ„ï¼š</strong></p>
<pre><code class="hljs language-scss" lang="scss">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Â è®¢å•æœåŠ¡Â Â Â Â Â Â Â Â â”‚Â â”€â”€â”€â”€â”
â”‚Â <span class="hljs-attribute">order</span>-serviceÂ Â Â â”‚Â Â Â Â Â â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜Â Â Â Â Â â”‚
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”Â Â Â Â Â â”‚Â Â Â Â Â Â â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Â PCç®¡ç†ç³»ç»ŸÂ Â Â Â Â Â â”‚Â â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â†’â”‚Â å•†å“æœåŠ¡Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â â”‚
â”‚Â pc-adminÂ Â Â Â Â Â Â Â â”‚Â Â Â Â Â â”‚Â Â Â Â Â Â â”‚Â product-serviceÂ Â Â Â Â Â Â Â Â Â â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜Â Â Â Â Â â”‚Â Â Â Â Â Â â”‚Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â â”‚
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â â”‚Â Â Â Â Â Â â”‚Â ProductFacadeÂ (Dubbo)Â Â Â Â â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”Â Â Â Â Â â”‚Â Â Â Â Â Â â”‚Â Â â”œâ”€Â <span class="hljs-built_in">queryProductList</span>()Â Â Â â”‚
â”‚Â ç½‘é¡µå•†åŸÂ Â Â Â Â Â Â Â â”‚Â â”€â”€â”€â”€â”˜Â Â Â Â Â Â â”‚Â Â â””â”€Â ???Â æ–°å¢æ–¹æ³•Â ???Â Â Â Â â”‚
â”‚Â web-mallÂ Â Â Â Â Â Â Â â”‚Â Â Â Â Â Â Â Â Â Â Â Â â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h3 data-id="heading-1">å…·ä½“åœºæ™¯</h3>
<ul>
<li><strong>ç°æœ‰æ¥å£</strong>ï¼šå•†å“æœåŠ¡å¯¹å¤–æä¾›çš„ RPC æ¥å£ï¼ˆè¢«ç½‘é¡µå•†åŸè°ƒç”¨ï¼ŒåŒ…å«çƒ­åº¦è®¡ç®—ã€æ¨èæ•°æ®ç­‰é¢å¤–æŸ¥è¯¢ï¼‰</li>
<li><strong>æ–°éœ€æ±‚</strong>ï¼šPC ç«¯ç®¡ç†ç³»ç»Ÿéœ€è¦å•†å“åˆ—è¡¨åŠŸèƒ½ï¼ˆåªéœ€è¦åŸºæœ¬æŸ¥è¯¢ï¼Œç”¨äºåå°ç®¡ç†ï¼‰</li>
<li><strong>æˆ‘çš„æ–¹æ¡ˆ</strong>ï¼šåœ¨ Facade æ¥å£ä¸­æ–°å¢ä¸€ä¸ªæ–¹æ³• <code>queryProductListForPc()</code></li>
<li><strong>è´¨ç–‘</strong>ï¼šä¸ºä»€ä¹ˆä¸åœ¨ç°æœ‰æ–¹æ³• <code>queryProductList()</code> åŠ ä¸ª <code>source</code> å‚æ•°æ¥åŒºåˆ†ï¼Œä»£ç å·®ä¸å¤šä¸ºä»€ä¹ˆè¦é‡å¤ï¼Ÿ</li>
</ul>
<hr/>
<h2 data-id="heading-2">ä¸¤ç§è®¾è®¡æ€è·¯çš„å¯¹æ¯”</h2>
<h3 data-id="heading-3">æ–¹æ¡ˆ Aï¼š åœ¨è¯·æ±‚å¯¹è±¡ä¸­æ–°å¢å¯é€‰å­—æ®µï¼Œé€šè¿‡åˆ¤ç©ºå…¼å®¹</h3>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">/**
Â *Â å•†å“æœåŠ¡å¯¹å¤–Â FacadeÂ æ¥å£ï¼ˆAPIÂ å±‚ï¼‰
Â *Â è°ƒç”¨æ–¹ï¼šweb-mall,Â pc-admin,Â order-service
Â */</span>
<span class="hljs-keyword">public</span>Â interfaceÂ <span class="hljs-type">ProductFacade</span>Â {

Â Â Â Â <span class="hljs-comment">/**
Â Â Â Â Â *Â æŸ¥è¯¢å•†å“åˆ—è¡¨ï¼ˆä¿æŒæ–¹æ³•ç­¾åä¸å˜ï¼Œå‘åå…¼å®¹ï¼‰
Â Â Â Â Â */</span>
Â Â Â Â <span class="hljs-type">Result</span>&lt;<span class="hljs-type">List</span>&lt;<span class="hljs-type">ProductDTO</span>&gt;&gt;Â queryProductList(<span class="hljs-type">ProductQueryRequest</span>Â request);
}
</code></pre>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">//Â è¯·æ±‚å¯¹è±¡ï¼ˆåœ¨Â APIÂ jarÂ ä¸­ï¼‰</span>
<span class="hljs-meta">@Data</span>
<span class="hljs-keyword">public</span>Â <span class="hljs-keyword">class</span>Â <span class="hljs-title class_">ProductQueryRequest</span>Â <span class="hljs-keyword">implements</span>Â <span class="hljs-title class_">Serializable</span>Â {
Â Â Â Â <span class="hljs-keyword">private</span>Â <span class="hljs-title class_">Integer</span>Â pageNum;
Â Â Â Â <span class="hljs-keyword">private</span>Â <span class="hljs-title class_">Integer</span>Â pageSize;
Â Â Â Â <span class="hljs-keyword">private</span>Â <span class="hljs-title class_">String</span>Â source;Â Â Â Â <span class="hljs-comment">//Â æ–°å¢å­—æ®µï¼šæ¥æºæ ‡è¯†ï¼ˆå¯é€‰ï¼Œè€è°ƒç”¨æ–¹ä¸ä¼ ï¼‰</span>
}
</code></pre>
<pre><code class="hljs language-less" lang="less"><span class="hljs-comment">//Â product-service-implÂ å®ç°</span>
<span class="hljs-variable">@Service</span>
<span class="hljs-variable">@DubboService</span>
publicÂ classÂ ProductFacadeImplÂ implementsÂ ProductFacadeÂ {

Â Â Â Â <span class="hljs-variable">@Override</span>
Â Â Â Â publicÂ Result&lt;List&lt;ProductDTO&gt;&gt;Â <span class="hljs-built_in">queryProductList</span>(ProductQueryRequestÂ request)Â {
Â Â Â Â Â Â Â Â <span class="hljs-selector-tag">List</span>&lt;<span class="hljs-selector-tag">Product</span>&gt;Â <span class="hljs-selector-tag">products</span>Â =Â <span class="hljs-selector-tag">productService</span><span class="hljs-selector-class">.queryBasicList</span>(
Â Â Â Â Â Â Â Â Â Â Â Â request.<span class="hljs-built_in">getPageNum</span>(),
Â Â Â Â Â Â Â Â Â Â Â Â request.<span class="hljs-built_in">getPageSize</span>()
Â Â Â Â Â Â Â Â );

Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â åˆ¤æ–­Â sourceÂ å­—æ®µæ˜¯å¦ä¸ºç©ºï¼ˆå‘åå…¼å®¹çš„å…³é”®ï¼‰</span>
Â Â Â Â Â Â Â Â <span class="hljs-selector-tag">if</span>Â (request.<span class="hljs-built_in">getSource</span>()Â ==Â nullÂ ||Â <span class="hljs-string">"web"</span>.<span class="hljs-built_in">equals</span>(request.<span class="hljs-built_in">getSource</span>()))Â {
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â è€è°ƒç”¨æ–¹ä¸ä¼ Â sourceï¼Œé»˜è®¤æŒ‰Â WebÂ ç«¯å¤„ç†</span>
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â æˆ–è€…æ˜¾å¼ä¼ Â "web"</span>
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-selector-tag">enrichWebData</span>(products);Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â +50ms</span>
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-selector-tag">calculateWebMetrics</span>(products);Â Â Â Â <span class="hljs-comment">//Â +80ms</span>
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-selector-tag">loadWebRecommendations</span>(products);Â <span class="hljs-comment">//Â +70ms</span>
Â Â Â Â Â Â Â Â }Â <span class="hljs-selector-tag">else</span>Â <span class="hljs-selector-tag">if</span>Â (<span class="hljs-string">"pc"</span>.<span class="hljs-built_in">equals</span>(request.<span class="hljs-built_in">getSource</span>()))Â {
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â PCç«¯é€»è¾‘ï¼ˆæˆ–è€…ä¸åšé¢å¤–å¤„ç†ï¼‰</span>
Â Â Â Â Â Â Â Â }

Â Â Â Â Â Â Â Â returnÂ Result.<span class="hljs-built_in">success</span>(ProductConverter.<span class="hljs-built_in">toDTO</span>(products));
Â Â Â Â }
}
</code></pre>
<h4 data-id="heading-4">ä¼˜ç‚¹</h4>
<ul>
<li>åªä¿®æ”¹è¯·æ±‚å¯¹è±¡ï¼Œä¸ä¿®æ”¹æ–¹æ³•ç­¾åï¼Œå‘åå…¼å®¹</li>
<li>è€è°ƒç”¨æ–¹ä¸ä¼  <code>source</code>ï¼Œä»£ç ä¸ç”¨æ”¹ï¼Œä¹Ÿèƒ½æ­£å¸¸è¿è¡Œ</li>
<li>åªæœ‰ä¸€ä¸ªæ–¹æ³•ï¼Œ"ä»£ç å¤ç”¨ç‡é«˜"ï¼ŒåæœŸå¯ä»¥ç»Ÿä¸€ç»´æŠ¤ï¼Œè®¤çŸ¥æˆæœ¬ä½ï¼ˆå®é™…ä¸Šä¾èµ–å¯¹ source å­—æ®µçš„ç»´æŠ¤ï¼Œè®¤çŸ¥æˆæœ¬ä¹Ÿä¸ä½ï¼‰</li>
</ul>
<h4 data-id="heading-5">å¯èƒ½å­˜åœ¨çš„é—®é¢˜</h4>
<ol>
<li>
<p><strong>éšå¼é»˜è®¤å€¼é—®é¢˜ï¼Œå®¹æ˜“å‡ºé”™</strong></p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-comment">//Â é—®é¢˜ï¼šsourceÂ ==Â nullÂ é»˜è®¤æ˜¯Â WebÂ ç«¯ï¼Œè¿™æ˜¯ä¸€ä¸ªéšå¼å‡è®¾</span>
<span class="hljs-selector-tag">if</span>Â (request.<span class="hljs-built_in">getSource</span>()Â ==Â nullÂ ||Â <span class="hljs-string">"web"</span>.<span class="hljs-built_in">equals</span>(request.<span class="hljs-built_in">getSource</span>()))Â {
Â Â Â Â <span class="hljs-comment">//Â æ‰§è¡ŒÂ WebÂ ç«¯é€»è¾‘</span>
}

<span class="hljs-comment">//Â éšæ‚£ï¼š</span>
<span class="hljs-comment">//Â 1.Â è®¢å•æœåŠ¡è°ƒç”¨æ—¶ï¼Œä¸çŸ¥é“ä¼šèµ°Â WebÂ ç«¯é€»è¾‘ï¼Œå¯èƒ½æ‰§è¡Œäº†ä¸éœ€è¦çš„æŸ¥è¯¢</span>
<span class="hljs-comment">//Â 2.Â æœªæ¥å¦‚æœæœ‰ç¬¬4ä¸ªã€ç¬¬5ä¸ªè°ƒç”¨æ–¹ï¼Œé»˜è®¤å€¼å‡è®¾å¯èƒ½ä¸æˆç«‹</span>
<span class="hljs-comment">//Â 3.Â æ–°äººç»´æŠ¤ä»£ç æ—¶ï¼Œä¸æ¸…æ¥šÂ nullÂ ä»£è¡¨ä»€ä¹ˆå«ä¹‰</span>
</code></pre>
</li>
<li>
<p><strong>èŒè´£ä¸æ¸…æ™°ï¼Œä¸€ä¸ªæ–¹æ³•æœåŠ¡å¤šä¸ªåœºæ™¯</strong></p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">//Â è¿™ä¸ªæ–¹æ³•æ—¢è¦æœåŠ¡Â WebÂ ç«¯ï¼Œåˆè¦æœåŠ¡Â PCÂ ç«¯ï¼Œè¿˜å¯èƒ½è¦æœåŠ¡Â AppÂ ç«¯</span>
<span class="hljs-comment">//Â éšç€ä¸šåŠ¡å‘å±•ï¼Œif-elseÂ ä¼šè¶Šæ¥è¶Šå¤š</span>
<span class="hljs-keyword">if</span>Â (sourceÂ ==Â <span class="hljs-literal">null</span>Â ||Â <span class="hljs-string">"web"</span>.<span class="hljs-keyword">equals</span>(source))Â {
Â Â Â Â <span class="hljs-comment">//Â Webç«¯é€»è¾‘ï¼ˆ50è¡Œï¼‰</span>
}Â <span class="hljs-keyword">else</span>Â <span class="hljs-keyword">if</span>Â (<span class="hljs-string">"pc"</span>.<span class="hljs-keyword">equals</span>(source))Â {
Â Â Â Â <span class="hljs-comment">//Â PCç«¯é€»è¾‘ï¼ˆ80è¡Œï¼‰</span>
}Â <span class="hljs-keyword">else</span>Â <span class="hljs-keyword">if</span>Â (<span class="hljs-string">"app"</span>.<span class="hljs-keyword">equals</span>(source))Â {
Â Â Â Â <span class="hljs-comment">//Â Appç«¯é€»è¾‘ï¼ˆ60è¡Œï¼‰</span>
}
<span class="hljs-comment">//Â è¿™ä¸ªæ–¹æ³•ä¼šè†¨èƒ€åˆ°200è¡Œ+</span>
</code></pre>
</li>
<li>
<p><strong>å„ç«¯é€»è¾‘è€¦åˆï¼Œæ”¹ä¸€å¤„å½±å“å…¨å±€</strong></p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">//Â åœºæ™¯ï¼šWebÂ ç«¯è¦ä¼˜åŒ–æ€§èƒ½ï¼Œè°ƒæ•´äº†åŸºç¡€æŸ¥è¯¢é€»è¾‘</span>
List&lt;Product&gt;Â productsÂ =Â productService<span class="hljs-selector-class">.queryBasicList</span>(pageNum,Â pageSize);

<span class="hljs-comment">//Â é—®é¢˜ï¼šè¿™ä¸ªæ”¹åŠ¨ä¼šå½±å“Â PCÂ ç«¯ã€AppÂ ç«¯çš„æ‰€æœ‰è°ƒç”¨</span>
<span class="hljs-comment">//Â éœ€è¦å›å½’æµ‹è¯•æ‰€æœ‰ç«¯çš„æ‰€æœ‰åœºæ™¯</span>
</code></pre>
</li>
</ol>
<hr/>
<h3 data-id="heading-6">æ–¹æ¡ˆ Bï¼šæˆ‘çš„æ–¹æ¡ˆ - æ–°å¢ç‹¬ç«‹æ–¹æ³•</h3>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">/**
Â *Â å•†å“æœåŠ¡å¯¹å¤–Â FacadeÂ æ¥å£ï¼ˆAPIÂ å±‚ï¼‰
Â */</span>
<span class="hljs-keyword">public</span>Â interfaceÂ <span class="hljs-type">ProductFacade</span>Â {

Â Â Â Â <span class="hljs-comment">/**
Â Â Â Â Â *Â æŸ¥è¯¢å•†å“åˆ—è¡¨ï¼ˆä¿æŒåŸæœ‰ç­¾åä¸å˜ï¼Œå‘åå…¼å®¹ï¼‰
Â Â Â Â Â */</span>
Â Â Â Â <span class="hljs-type">Result</span>&lt;<span class="hljs-type">List</span>&lt;<span class="hljs-type">ProductDTO</span>&gt;&gt;Â queryProductList(<span class="hljs-type">ProductQueryRequest</span>Â request);

Â Â Â Â <span class="hljs-comment">/**
Â Â Â Â Â *Â æŸ¥è¯¢å•†å“åˆ—è¡¨Â -Â PCç«¯ï¼ˆæ–°å¢æ–¹æ³•ï¼Œä¸“é—¨ç»™PCç®¡ç†ç«¯ä½¿ç”¨ï¼‰
Â Â Â Â Â */</span>
Â Â Â Â <span class="hljs-type">Result</span>&lt;<span class="hljs-type">List</span>&lt;<span class="hljs-type">ProductDTO</span>&gt;&gt;Â queryProductListForPc(<span class="hljs-type">ProductQueryRequest</span>Â request);
}
</code></pre>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">//Â è¯·æ±‚å¯¹è±¡ä¿æŒä¸å˜</span>
<span class="hljs-meta">@Data</span>
<span class="hljs-keyword">public</span>Â <span class="hljs-keyword">class</span>Â <span class="hljs-title class_">ProductQueryRequest</span>Â <span class="hljs-keyword">implements</span>Â <span class="hljs-title class_">Serializable</span>Â {
Â Â Â Â <span class="hljs-keyword">private</span>Â IntegerÂ pageNum;
Â Â Â Â <span class="hljs-keyword">private</span>Â IntegerÂ pageSize;
Â Â Â Â <span class="hljs-comment">//Â ä¸æ·»åŠ Â sourceÂ å­—æ®µ</span>
}
</code></pre>
<pre><code class="hljs language-less" lang="less"><span class="hljs-comment">//Â product-service-implÂ å®ç°</span>
<span class="hljs-variable">@Service</span>
<span class="hljs-variable">@DubboService</span>
publicÂ classÂ ProductFacadeImplÂ implementsÂ ProductFacadeÂ {

Â Â Â Â <span class="hljs-comment">/**
Â Â Â Â Â *Â æŸ¥è¯¢å•†å“åˆ—è¡¨ï¼ˆä¿æŒåŸæœ‰é€»è¾‘ä¸å˜ï¼ŒæœåŠ¡Â WebÂ ç«¯å’Œè€è°ƒç”¨æ–¹ï¼‰
Â Â Â Â Â */</span>
Â Â Â Â <span class="hljs-variable">@Override</span>
Â Â Â Â publicÂ Result&lt;List&lt;ProductDTO&gt;&gt;Â <span class="hljs-built_in">queryProductList</span>(ProductQueryRequestÂ request)Â {
Â Â Â Â Â Â Â Â <span class="hljs-selector-tag">List</span>&lt;<span class="hljs-selector-tag">Product</span>&gt;Â <span class="hljs-selector-tag">products</span>Â =Â <span class="hljs-selector-tag">productService</span><span class="hljs-selector-class">.queryBasicList</span>(
Â Â Â Â Â Â Â Â Â Â Â Â request.<span class="hljs-built_in">getPageNum</span>(),
Â Â Â Â Â Â Â Â Â Â Â Â request.<span class="hljs-built_in">getPageSize</span>()
Â Â Â Â Â Â Â Â );

Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â Webç«¯ç‰¹æœ‰çš„æ•°æ®å¢å¼º</span>
Â Â Â Â Â Â Â Â <span class="hljs-selector-tag">enrichWebData</span>(products);Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â +50ms</span>
Â Â Â Â Â Â Â Â <span class="hljs-selector-tag">calculateWebMetrics</span>(products);Â Â Â Â <span class="hljs-comment">//Â +80ms</span>
Â Â Â Â Â Â Â Â <span class="hljs-selector-tag">loadWebRecommendations</span>(products);Â <span class="hljs-comment">//Â +70ms</span>

Â Â Â Â Â Â Â Â <span class="hljs-selector-tag">return</span>Â <span class="hljs-selector-tag">Result</span><span class="hljs-selector-class">.success</span>(ProductConverter.<span class="hljs-built_in">toDTO</span>(products));
Â Â Â Â }

Â Â Â Â <span class="hljs-comment">/**
Â Â Â Â Â *Â PCç«¯å•†å“åˆ—è¡¨ï¼ˆæ–°å¢ï¼Œè½»é‡çº§ï¼‰
Â Â Â Â Â */</span>
Â Â Â Â @<span class="hljs-selector-tag">Override</span>
Â Â Â Â <span class="hljs-selector-tag">public</span>Â <span class="hljs-selector-tag">Result</span>&lt;<span class="hljs-selector-tag">List</span>&lt;<span class="hljs-selector-tag">ProductDTO</span>&gt;&gt;Â <span class="hljs-selector-tag">queryProductListForPc</span>(ProductQueryRequestÂ request)Â {
Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â åªåšåŸºç¡€æŸ¥è¯¢ï¼Œä¸åšé¢å¤–å¢å¼º</span>
Â Â Â Â Â Â Â Â <span class="hljs-selector-tag">List</span>&lt;<span class="hljs-selector-tag">Product</span>&gt;Â <span class="hljs-selector-tag">products</span>Â =Â <span class="hljs-selector-tag">productService</span><span class="hljs-selector-class">.queryBasicList</span>(
Â Â Â Â Â Â Â Â Â Â Â Â request.<span class="hljs-built_in">getPageNum</span>(),
Â Â Â Â Â Â Â Â Â Â Â Â request.<span class="hljs-built_in">getPageSize</span>()
Â Â Â Â Â Â Â Â );
Â Â Â Â Â Â Â Â <span class="hljs-selector-tag">return</span>Â <span class="hljs-selector-tag">Result</span><span class="hljs-selector-class">.success</span>(ProductConverter.<span class="hljs-built_in">toDTO</span>(products));
Â Â Â Â }
}
</code></pre>
<h4 data-id="heading-7">ä¼˜ç‚¹</h4>
<p><strong>1. å®Œå…¨å‘åå…¼å®¹ï¼Œè€è°ƒç”¨æ–¹é›¶æ”¹åŠ¨</strong></p>
<pre><code class="hljs language-ini" lang="ini">//Â è®¢å•æœåŠ¡ã€Webå•†åŸçš„è°ƒç”¨ä»£ç å®Œå…¨ä¸éœ€è¦æ”¹
ProductQueryRequestÂ <span class="hljs-attr">request</span>Â =Â newÂ ProductQueryRequest()<span class="hljs-comment">;</span>
request.setPageNum(1)<span class="hljs-comment">;</span>
request.setPageSize(10)<span class="hljs-comment">;</span>
Result&lt;List&lt;ProductDTO&gt;&gt;Â <span class="hljs-attr">result</span>Â =Â productFacade.queryProductList(request)<span class="hljs-comment">;</span>

//Â PCç®¡ç†ç³»ç»Ÿè°ƒç”¨æ–°æ–¹æ³•
ProductQueryRequestÂ <span class="hljs-attr">request</span>Â =Â newÂ ProductQueryRequest()<span class="hljs-comment">;</span>
request.setPageNum(1)<span class="hljs-comment">;</span>
request.setPageSize(10)<span class="hljs-comment">;</span>
Result&lt;List&lt;ProductDTO&gt;&gt;Â <span class="hljs-attr">result</span>Â =Â productFacade.queryProductListForPc(request)<span class="hljs-comment">;</span>
</code></pre>
<p><strong>2. ç‹¬ç«‹å‡çº§ï¼Œäº’ä¸å½±å“</strong></p>
<ul>
<li>å•†å“æœåŠ¡å‘å¸ƒæ–°ç‰ˆæœ¬ API jar åŒ…ï¼ˆæ–°å¢äº† <code>queryProductListForPc</code> æ–¹æ³•ï¼‰</li>
<li>PC ç®¡ç†ç³»ç»Ÿå‡çº§ jar åŒ…ï¼Œè°ƒç”¨æ–°æ–¹æ³•</li>
<li><strong>è®¢å•æœåŠ¡ã€Web å•†åŸä¸ç”¨åŠ¨</strong>ï¼Œç»§ç»­ç”¨è€æ–¹æ³• <code>queryProductList</code></li>
<li>å„è‡ªæŒ‰è‡ªå·±çš„èŠ‚å¥å‡çº§</li>
</ul>
<p><strong>3. é›¶é£é™©ä¸Šçº¿</strong></p>
<ul>
<li>æ–°æ–¹æ³•åªæœåŠ¡æ–°è°ƒç”¨æ–¹ï¼ˆPC ç®¡ç†ç³»ç»Ÿï¼‰</li>
<li>è€æ–¹æ³•ä¿æŒä¸å˜ï¼Œæ‰€æœ‰è€è°ƒç”¨æ–¹ä¸å—å½±å“</li>
<li>ä¸å­˜åœ¨"é—æ¼æŸä¸ªè°ƒç”¨æ–¹"çš„é—®é¢˜</li>
</ul>
<p><strong>4. èŒè´£æ¸…æ™°ï¼Œç‹¬ç«‹æ¼”è¿›</strong></p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">queryProductList</span>()Â Â Â Â Â Â Â <span class="hljs-comment">//Â æœåŠ¡Â Webç«¯å’Œè€è°ƒç”¨æ–¹ï¼Œæœªæ¥åŠ æ¨èã€çŸ­è§†é¢‘</span>
<span class="hljs-built_in">queryProductListForPc</span>()Â Â <span class="hljs-comment">//Â æœåŠ¡Â PCç«¯ï¼Œæœªæ¥åŠ ERPã€æ‰¹é‡å¯¼å…¥</span>

<span class="hljs-comment">//Â ä¸¤ä¸ªæ–¹æ³•å„ç®¡å„çš„ï¼Œäº’ä¸å¹²æ‰°</span>
</code></pre>
<p><strong>5. æ€§èƒ½ä¼˜åŒ–ï¼Œå„å–æ‰€éœ€</strong></p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">//Â WebÂ ç«¯è°ƒç”¨ï¼šæ‰§è¡Œå®Œæ•´é€»è¾‘ï¼Œè€—æ—¶Â 200ms</span>
productFacade<span class="hljs-selector-class">.queryProductList</span>(request);Â Â <span class="hljs-comment">//Â å«æ¨èã€çƒ­åº¦ç­‰</span>

<span class="hljs-comment">//Â PCÂ ç«¯è°ƒç”¨ï¼šåªæŸ¥åŸºç¡€æ•°æ®ï¼Œè€—æ—¶Â 10ms</span>
productFacade<span class="hljs-selector-class">.queryProductListForPc</span>(request);Â Â <span class="hljs-comment">//Â è½»é‡çº§</span>

<span class="hljs-comment">//Â è€è°ƒç”¨æ–¹ï¼ˆè®¢å•æœåŠ¡ï¼‰ï¼šç»§ç»­èµ°åŸæœ‰é€»è¾‘</span>
productFacade<span class="hljs-selector-class">.queryProductList</span>(request);Â Â <span class="hljs-comment">//Â è™½ç„¶æœ‰å†—ä½™æŸ¥è¯¢ï¼Œä½†å‘åå…¼å®¹</span>
</code></pre>
<p><strong>6. ä¾¿äºç›‘æ§å’Œé—®é¢˜æ’æŸ¥</strong></p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">//Â å¯ä»¥åˆ†åˆ«ç›‘æ§ï¼š</span>
<span class="hljs-comment">//Â -Â queryProductListÂ çš„è°ƒç”¨é‡ã€è€—æ—¶ã€é”™è¯¯ç‡ï¼ˆWebç«¯Â +Â è€è°ƒç”¨æ–¹ï¼‰</span>
<span class="hljs-comment">//Â -Â queryProductListForPcÂ çš„è°ƒç”¨é‡ã€è€—æ—¶ã€é”™è¯¯ç‡ï¼ˆPCç«¯ï¼‰</span>

<span class="hljs-comment">//Â å‡ºé—®é¢˜æ—¶èƒ½å¿«é€Ÿå®šä½æ˜¯å“ªä¸ªç«¯çš„è°ƒç”¨</span>
</code></pre>
<h4 data-id="heading-8">ç¼ºç‚¹</h4>
<ul>
<li>Facade æ¥å£æ–¹æ³•æ•°é‡å¢åŠ ï¼ˆä½†æ¯ä¸ªæ–¹æ³•èŒè´£æ›´æ¸…æ™°ï¼‰</li>
<li>å­˜åœ¨ä¸€å®šç¨‹åº¦çš„ä»£ç é‡å¤ï¼ˆä½†å¯ä»¥é€šè¿‡ Service å±‚å¤ç”¨è§£å†³ï¼‰</li>
<li>å­˜åœ¨è®¤çŸ¥æˆæœ¬ï¼Œæ¢ä¸ªå¼€å‘çœ‹åˆ°å¥½å‡ ä¸ªè·å–å•†å“åˆ—è¡¨çš„æ–¹æ³•ä¼šæœ‰ç‚¹å›°æƒ‘</li>
</ul>
<hr/>
<h2 data-id="heading-9">ä¸ºä»€ä¹ˆæˆ‘ä»¬çš„æƒ³æ³•ä¼šä¸åŒï¼Ÿ</h2>
<p>è®¨è®ºåˆ°è¿™é‡Œï¼Œæˆ‘çªç„¶æ„è¯†åˆ°ä¸€ä¸ªé—®é¢˜ï¼š<strong>æˆ‘ä»¬å®é™…è®¨è®ºçš„æ˜¯æ‰©å±•å’Œç»„åˆã€‚</strong></p>
<h3 data-id="heading-10">ä¸€ä¸ªæˆåŠŸçš„ç»„åˆæ¡ˆä¾‹ï¼šé€€æ¬¾é€»è¾‘åˆå¹¶</h3>
<p>åœ¨æˆ‘ä»¬çš„é¡¹ç›®ä¸­ï¼Œæ›¾ç»è¿›è¡Œè¿‡ä¸€æ¬¡é‡æ„ï¼ŒæŠŠä¸¤æ¡ç‹¬ç«‹çš„é€€æ¬¾é€»è¾‘æˆåŠŸåˆå¹¶åˆ°äº†ä¸€èµ·ï¼Œè¿›è¡Œç»Ÿä¸€ç»´æŠ¤ã€‚</p>
<h4 data-id="heading-11">é‡æ„å‰çš„çŠ¶æ€</h4>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">//Â PCÂ ç«¯é€€æ¬¾é€»è¾‘ï¼ˆå·²ç¨³å®šè¿è¡ŒÂ 1Â å¹´+ï¼‰</span>
publicÂ classÂ PcRefundServiceÂ {
Â Â Â Â publicÂ RefundResultÂ <span class="hljs-built_in">refundForPc</span>(RefundRequestÂ request)Â {
Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â 1.Â PCÂ ç«¯ç‰¹æœ‰çš„å®¡æ ¸æµç¨‹ï¼ˆå¤šçº§å®¡æ‰¹ï¼‰</span>
Â Â Â Â Â Â Â Â pcAuditService<span class="hljs-selector-class">.audit</span>(request);

Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â 2.Â è°ƒç”¨ç¬¬ä¸‰æ–¹æ”¯ä»˜é€€æ¬¾</span>
Â Â Â Â Â Â Â Â paymentGateway<span class="hljs-selector-class">.refund</span>(request);

Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â 3.Â PCÂ ç«¯ç‰¹æœ‰çš„å‡­è¯ç”Ÿæˆ</span>
Â Â Â Â Â Â Â Â pcVoucherService<span class="hljs-selector-class">.generateVoucher</span>(request);

Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â 4.Â åŒæ­¥åˆ°Â ERPÂ ç³»ç»Ÿ</span>
Â Â Â Â Â Â Â Â erpService<span class="hljs-selector-class">.syncRefund</span>(request);
Â Â Â Â }
}

<span class="hljs-comment">//Â WebÂ ç«¯é€€æ¬¾é€»è¾‘ï¼ˆå·²ç¨³å®šè¿è¡ŒÂ 8Â ä¸ªæœˆï¼‰</span>
publicÂ classÂ WebRefundServiceÂ {
Â Â Â Â publicÂ RefundResultÂ <span class="hljs-built_in">refundForWeb</span>(RefundRequestÂ request)Â {
Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â 1.Â WebÂ ç«¯ç‰¹æœ‰çš„é£æ§æ£€æŸ¥</span>
Â Â Â Â Â Â Â Â riskControlService<span class="hljs-selector-class">.check</span>(request);

Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â 2.Â è°ƒç”¨ç¬¬ä¸‰æ–¹æ”¯ä»˜é€€æ¬¾ï¼ˆåŒæ ·çš„æ”¯ä»˜ç½‘å…³ï¼‰</span>
Â Â Â Â Â Â Â Â paymentGateway<span class="hljs-selector-class">.refund</span>(request);

Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â 3.Â WebÂ ç«¯ç‰¹æœ‰çš„ç§¯åˆ†è¿”è¿˜</span>
Â Â Â Â Â Â Â Â pointService<span class="hljs-selector-class">.returnPoints</span>(request);

Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â 4.Â å‘é€é€šçŸ¥ç»™ç”¨æˆ·</span>
Â Â Â Â Â Â Â Â notificationService<span class="hljs-selector-class">.notify</span>(request);
Â Â Â Â }
}
</code></pre>
<h4 data-id="heading-12">é‡æ„åçš„çŠ¶æ€</h4>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">public</span>Â <span class="hljs-keyword">class</span>Â <span class="hljs-title">UnifiedRefundService</span>Â {
Â Â Â Â <span class="hljs-function"><span class="hljs-keyword">public</span>Â RefundResultÂ <span class="hljs-title">refund</span>(<span class="hljs-params">RefundRequestÂ request</span>)</span>Â {
Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â 1.Â æ ¹æ®æ¥æºæ‰§è¡Œä¸åŒçš„å‰ç½®æµç¨‹</span>
Â Â Â Â Â Â Â Â <span class="hljs-keyword">if</span>Â (<span class="hljs-string">"pc"</span>.<span class="hljs-keyword">equals</span>(request.getSource()))Â {
Â Â Â Â Â Â Â Â Â Â Â Â pcAuditService.audit(request);
Â Â Â Â Â Â Â Â }Â <span class="hljs-keyword">else</span>Â <span class="hljs-keyword">if</span>Â (<span class="hljs-string">"web"</span>.<span class="hljs-keyword">equals</span>(request.getSource()))Â {
Â Â Â Â Â Â Â Â Â Â Â Â riskControlService.check(request);
Â Â Â Â Â Â Â Â }

Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â 2.Â é€šç”¨çš„é€€æ¬¾æ ¸å¿ƒé€»è¾‘ï¼ˆæå–å‡ºæ¥ï¼‰</span>
Â Â Â Â Â Â Â Â paymentGateway.refund(request);

Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â 3.Â æ ¹æ®æ¥æºæ‰§è¡Œä¸åŒçš„åç½®æµç¨‹</span>
Â Â Â Â Â Â Â Â <span class="hljs-keyword">if</span>Â (<span class="hljs-string">"pc"</span>.<span class="hljs-keyword">equals</span>(request.getSource()))Â {
Â Â Â Â Â Â Â Â Â Â Â Â pcVoucherService.generateVoucher(request);
Â Â Â Â Â Â Â Â Â Â Â Â erpService.syncRefund(request);
Â Â Â Â Â Â Â Â }Â <span class="hljs-keyword">else</span>Â <span class="hljs-keyword">if</span>Â (<span class="hljs-string">"web"</span>.<span class="hljs-keyword">equals</span>(request.getSource()))Â {
Â Â Â Â Â Â Â Â Â Â Â Â pointService.returnPoints(request);
Â Â Â Â Â Â Â Â Â Â Â Â notificationService.notify(request);
Â Â Â Â Â Â Â Â }
Â Â Â Â }
}
</code></pre>
<h4 data-id="heading-13">è¿™æ¬¡åˆå¹¶ä¸ºä»€ä¹ˆæˆåŠŸï¼Ÿ</h4>
<ul>
<li>ä¸¤æ¡é€€æ¬¾é€»è¾‘éƒ½å·²ç»ç¨³å®šè¿è¡Œå¾ˆä¹…ï¼Œä¸šåŠ¡è¾¹ç•Œæ¸…æ™°</li>
<li>æ ¸å¿ƒæµç¨‹ï¼ˆè°ƒç”¨æ”¯ä»˜ç½‘å…³ï¼‰ç¡®å®å¯ä»¥å¤ç”¨</li>
<li>åˆå¹¶åç»´æŠ¤æ›´æ–¹ä¾¿ï¼Œbug ä¿®å¤åªéœ€æ”¹ä¸€å¤„</li>
<li>æ–°å¢å…¶ä»–ç«¯çš„é€€æ¬¾ï¼ˆå¦‚ App ç«¯ï¼‰ä¹Ÿå¾ˆå®¹æ˜“æ‰©å±•</li>
</ul>
<p><strong>æˆåŠŸçš„å…³é”®å‰æï¼š</strong></p>
<ol>
<li><strong>ä¸¤æ¡ä¸šåŠ¡çº¿éƒ½å·²ç»ç‹¬ç«‹æ¼”è¿›åˆ°ç¨³å®šçŠ¶æ€</strong></li>
<li><strong>ä¸šåŠ¡è¾¹ç•Œå·²ç»æ¸…æ™°</strong></li>
<li><strong>ç¡®å®å‘ç°äº†å¯å¤ç”¨çš„æ ¸å¿ƒé€»è¾‘</strong></li>
<li><strong>è¿™æ˜¯å¯¹å†…çš„é‡æ„</strong>ï¼Œä¸å½±å“å¤–éƒ¨è°ƒç”¨æ–¹</li>
</ol>
<hr/>
<h3 data-id="heading-14">å½“å‰åœºæ™¯ï¼šå•†å“åˆ—è¡¨æŸ¥è¯¢</h3>
<p>ä½†è¿™æ¬¡å•†å“åˆ—è¡¨æŸ¥è¯¢æ˜¯å¦æ»¡è¶³ç»„åˆæ¡ä»¶å‘¢ï¼Ÿæˆ‘è®¤ä¸º<strong>ä¸æ»¡è¶³</strong>ã€‚</p>
<h4 data-id="heading-15">å…³é”®å·®å¼‚å¯¹æ¯”</h4>






























<table><thead><tr><th>ç»´åº¦</th><th>é€€æ¬¾åˆå¹¶ï¼ˆæˆåŠŸçš„ç»„åˆï¼‰</th><th>å•†å“åˆ—è¡¨ï¼ˆå½“å‰åœºæ™¯ï¼‰</th></tr></thead><tbody><tr><td><strong>é˜¶æ®µ</strong></td><td>ä¸¤æ¡çº¿éƒ½å·²ç»ç¨³å®šè¿è¡Œå¾ˆä¹…</td><td>PC ç«¯æ˜¯å…¨æ–°éœ€æ±‚ï¼Œè¿˜æ²¡å¼€å§‹</td></tr><tr><td><strong>ä¸šåŠ¡ç†è§£</strong></td><td>ä¸šåŠ¡è¾¹ç•Œæ¸…æ™°ï¼ŒçŸ¥é“å“ªäº›å¯ä»¥å¤ç”¨</td><td>PC ç«¯éœ€æ±‚è¿˜ä¸æ˜ç¡®ï¼Œå¯èƒ½ä¼šå˜</td></tr><tr><td><strong>å¤ç”¨ä»·å€¼</strong></td><td>ç¡®å®æœ‰æ ¸å¿ƒé€»è¾‘å¯ä»¥æå–</td><td>åªæ˜¯éƒ½å«"å•†å“åˆ—è¡¨"ï¼Œå®é™…é€»è¾‘å·®å¼‚å¤§</td></tr><tr><td><strong>æ–¹å‘</strong></td><td>å¯¹å†…é‡æ„ï¼Œä¼˜åŒ–å†…éƒ¨ç»“æ„</td><td>å¯¹å¤–æ‰©å±•ï¼Œå¢åŠ æ–°èƒ½åŠ›</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-16">æ‰©å±• vs ç»„åˆçš„æœ¬è´¨åŒºåˆ«</h2>
<h3 data-id="heading-17">æ¦‚å¿µå®šä¹‰</h3>
<p><strong>æ‰©å±•ï¼ˆExtensionï¼‰- å¯¹å¤–å¢åŠ èƒ½åŠ›</strong></p>
<ul>
<li><strong>ç›®çš„</strong>ï¼šç»™ç³»ç»Ÿå¢åŠ æ–°çš„å¯¹å¤–èƒ½åŠ›</li>
<li><strong>æ—¶æœº</strong>ï¼šæ–°éœ€æ±‚ã€æ–°ä¸šåŠ¡çº¿</li>
<li><strong>åŸåˆ™</strong>ï¼šå„è‡ªç‹¬ç«‹ï¼Œç»™äºˆè¶³å¤Ÿçš„æ¼”è¿›ç©ºé—´</li>
<li><strong>ç¤ºä¾‹</strong>ï¼šæ–°å¢ PC ç«¯å•†å“åˆ—è¡¨æ¥å£</li>
</ul>
<p><strong>ç»„åˆï¼ˆCompositionï¼‰- å¯¹å†…ä¼˜åŒ–ç»“æ„</strong></p>
<ul>
<li><strong>ç›®çš„</strong>ï¼šé‡æ„å†…éƒ¨å®ç°ï¼Œæ¶ˆé™¤é‡å¤</li>
<li><strong>æ—¶æœº</strong>ï¼šå¤šæ¡ä¸šåŠ¡çº¿ç¨³å®šåï¼Œå‘ç°å¯å¤ç”¨æ¨¡å¼</li>
<li><strong>åŸåˆ™</strong>ï¼šæå–å…±æ€§ï¼Œä¿æŒçµæ´»æ€§</li>
<li><strong>ç¤ºä¾‹</strong>ï¼šåˆå¹¶ PC ç«¯å’Œ Web ç«¯çš„é€€æ¬¾é€»è¾‘</li>
</ul>
<h3 data-id="heading-18">æ ¸å¿ƒåŸåˆ™ï¼šå…ˆæ‰©å±•ï¼Œåç»„åˆ</h3>
<p>é€€æ¬¾é€»è¾‘çš„é‡æ„æœ¬è´¨ä¸Šä¹Ÿæ˜¯<strong>å…ˆè¿›è¡Œäº†æ‰©å±•ï¼Œç„¶åå†è¿›è¡Œç»„åˆ</strong>ã€‚</p>
<p><strong>ä¸ºä»€ä¹ˆé€€æ¬¾ä¼šå…ˆè¿›è¡Œæ‰©å±•ï¼Ÿ</strong></p>
<ol>
<li><strong>æ—¶é—´æˆæœ¬</strong> - æœ¬è´¨ä¸Šè¿˜æ˜¯ä¸¤ä¸ªç‹¬ç«‹çš„ä¸šåŠ¡ï¼Œå¦‚æœåœ¨å¼€å‘ä¹‹åˆå°±å°è¯•ç»„åˆå¤ç”¨ï¼Œä¼šæå¤§å¢åŠ æ—¶é—´æˆæœ¬</li>
<li><strong>éœ€æ±‚å˜åŒ–</strong> - æ–°çš„ä¸šåŠ¡å…ä¸äº†è°ƒæ•´ï¼Œè¿™æ—¶ä¸šåŠ¡è¾¹ç•Œä¸æ¸…æ™°ï¼Œå¾ˆå®¹æ˜“é€ æˆå½±å“</li>
<li><strong>å…¼å®¹æˆæœ¬</strong> - å¦‚æœåœ¨éœ€æ±‚ä¸æ¸…æ™°çš„æ—¶å€™å°±è€ƒè™‘å…¼å®¹ï¼Œå¾ˆå®¹æ˜“å¤„å¤„å—é™</li>
</ol>
<p><strong>ä¸ºä»€ä¹ˆå•†å“åˆ—è¡¨ä¼šè®©äººè€ƒè™‘ç›´æ¥ç»„åˆï¼Ÿ</strong></p>
<ol>
<li><strong>ä¸šåŠ¡é€»è¾‘ç®€å•</strong> - æœ¬è´¨å°±æ˜¯ä¸€ä¸ª CRUDï¼Œå…¼å®¹æˆæœ¬çœ‹èµ·æ¥å¾ˆä½</li>
<li><strong>éœ€æ±‚å˜åŒ–å°</strong> - æ„Ÿè§‰ä¸å¤ªä¼šæœ‰å¤ªå¤šçš„å˜åŒ–</li>
</ol>
<p>ä½†å®é™…ä¸Šè¿™ä¸¤è€…æ˜¯ä¸€æ ·çš„ï¼Œ<strong>å®ƒä»¬éƒ½æ˜¯å¯¹å¤–å¢åŠ äº†æ–°çš„èƒ½åŠ›</strong>ï¼Œè€Œä¸èƒ½å› ä¸ºä¸šåŠ¡ç®€å•å°±ç›´æ¥è€ƒè™‘è¿›è¡Œç»„åˆã€‚</p>
<hr/>
<h2 data-id="heading-19">æ€»ç»“</h2>
<p>è¿™æ¬¡ Code Review è®©æˆ‘æ˜ç™½äº†å‡ ä¸ªé“ç†ï¼š</p>
<h3 data-id="heading-20">1. ä¸è¦æ··æ·†"å¯¹å¤–æ‰©å±•"å’Œ"å¯¹å†…ç»„åˆ"</h3>
<ul>
<li><strong>å¯¹å¤–æ‰©å±•æ—¶</strong>ï¼šä¼˜å…ˆè€ƒè™‘ç‹¬ç«‹æ€§å’Œçµæ´»æ€§</li>
<li><strong>å¯¹å†…ç»„åˆæ—¶</strong>ï¼šå¯ä»¥è€ƒè™‘å¤ç”¨å’Œç»Ÿä¸€</li>
</ul>
<h3 data-id="heading-21">2. ä¸è¦è¿‡æ—©ç»„åˆ</h3>
<ul>
<li>é€€æ¬¾åˆå¹¶æ˜¯æˆåŠŸçš„ï¼Œå› ä¸ºæ˜¯"<strong>å…ˆæ‰©å±•ï¼Œåç»„åˆ</strong>"</li>
<li>å¦‚æœåœ¨ PC ç«¯å•†å“åˆ—è¡¨åˆšç«‹é¡¹æ—¶å°±ç»„åˆï¼Œæ˜¯"<strong>è¿‡æ—©ç»„åˆ</strong>"</li>
</ul>
<h3 data-id="heading-22">3. åˆ†é˜¶æ®µæ¼”è¿›</h3>
<ol>
<li><strong>æ‰©å±•æœŸ</strong>ï¼šæ–°å¢ç‹¬ç«‹æ¥å£ï¼Œç»™äºˆè¶³å¤Ÿçš„æ¼”è¿›ç©ºé—´</li>
<li><strong>ç¨³å®šæœŸ</strong>ï¼šå„è‡ªç‹¬ç«‹å‘å±•ï¼Œç§¯ç´¯ä¸šåŠ¡ç†è§£</li>
<li><strong>ç»„åˆæœŸ</strong>ï¼šå‘ç°å¯å¤ç”¨æ¨¡å¼ï¼Œè¿›è¡Œå†…éƒ¨é‡æ„</li>
</ol>
<h3 data-id="heading-23">4. å½“å‰åœºæ™¯çš„å†³ç­–</h3>
<ul>
<li><strong>ç°åœ¨</strong>ï¼šé‡‡ç”¨æ–¹æ¡ˆ Bï¼Œæ–°å¢ç‹¬ç«‹çš„ <code>queryProductListForPc()</code> æ–¹æ³•</li>
<li><strong>æœªæ¥</strong>ï¼šç­‰ PC ç«¯å•†å“åˆ—è¡¨ä¹Ÿç¨³å®šè¿è¡ŒåŠå¹´åï¼Œå†è¯„ä¼°æ˜¯å¦éœ€è¦ç»„åˆ</li>
<li><strong>åŸåˆ™</strong>ï¼šå…ˆè®©å­å¼¹é£ä¸€ä¼šå„¿ï¼Œä¸è¦æ€¥ç€ä¼˜åŒ–</li>
</ul>
<p><strong>æœ€é‡è¦çš„æ˜¯</strong>ï¼šæ‰©å±•æ€»ä¸ä¼šé”™ï¼Œä¸ä¼šå½±å“è€é€»è¾‘ï¼Œå°¤å…¶æ˜¯åœ¨å°å…¬å¸å¿«é€Ÿè¿­ä»£çš„ç¯å¢ƒä¸‹ã€‚</p>
<hr/>
<h3 data-id="heading-24">å…³æ³¨ã€Œ9å·è¾¾äººã€å…¬ä¼—å·ï¼Œè·å–æ›´å¤šå¹²è´§</h3>
<p>æˆ‘æ˜¯ä¸€åå°å‚ç¨‹åºå‘˜ï¼Œä¸“æ³¨åˆ†äº«<strong>çœŸå®çš„é¡¹ç›®å®æˆ˜ç»éªŒ</strong>å’Œ<strong>æ¥åœ°æ°”çš„æŠ€æœ¯æ€è€ƒ</strong>ã€‚</p>
<p><strong>å…³æ³¨å…¬ä¼—å·ã€Œ9å·è¾¾äººã€</strong></p>
<p><strong>ä¸è®²å¤§è€Œå…¨çš„ç†è®ºï¼ŒåªèŠçœŸå®è¸©è¿‡çš„å‘ã€‚</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ğŸ§¸ å‰ç«¯ä¸æ˜¯åªä¼šå†™ç®¡ç†åå°ï¼Œæˆ‘ç”¨ 400 è¡Œä»£ç ç”»äº†ä¸€ä¸ª LABUBU ï¼]]></title>    <link>https://juejin.cn/post/7571846248719581184</link>    <guid>https://juejin.cn/post/7571846248719581184</guid>    <pubDate>2025-11-13T12:12:51.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571846248719581184" data-draft-id="7572020278386917410" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ğŸ§¸ å‰ç«¯ä¸æ˜¯åªä¼šå†™ç®¡ç†åå°ï¼Œæˆ‘ç”¨ 400 è¡Œä»£ç ç”»äº†ä¸€ä¸ª LABUBU ï¼"/> <meta itemprop="keywords" content="Canvas,Vue.js,TypeScript"/> <meta itemprop="datePublished" content="2025-11-13T12:12:51.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="xiaohe0601"/> <meta itemprop="url" content="https://juejin.cn/user/3183831378302871"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ğŸ§¸ å‰ç«¯ä¸æ˜¯åªä¼šå†™ç®¡ç†åå°ï¼Œæˆ‘ç”¨ 400 è¡Œä»£ç ç”»äº†ä¸€ä¸ª LABUBU ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3183831378302871/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    xiaohe0601
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-13T12:12:51.000Z" title="Thu Nov 13 2025 12:12:51 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252b3a}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px;color:#5e7ce0}.markdown-body h1{font-size:24px;margin-bottom:5px;margin-top:80px;position:relative;text-align:center}.markdown-body h2{font-size:20px;padding-bottom:12px;border-bottom:1px solid #dfe1e6}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h4{font-size:16px;margin-top:30px}.markdown-body h5{font-size:14px;margin-top:20px}.markdown-body h6{font-size:14px;margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #dfe1e6;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#ffeeed;color:#c73636;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#252b3a;background:#f8f8f8}.markdown-body a{position:relative;text-decoration:none;color:#5e7ce0;padding-right:18px;padding-bottom:4px}.markdown-body a[href^=http]:after{position:absolute;display:inline-block;width:16px;height:16px;margin-left:2px;margin-top:6px;content:"";background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAIRlWElmTU0AKgAAAAgABQESAAMAAAABAAEAAAEaAAUAAAABAAAASgEbAAUAAAABAAAAUgEoAAMAAAABAAIAAIdpAAQAAAABAAAAWgAAAAAAAABIAAAAAQAAAEgAAAABAAOgAQADAAAAAQABAACgAgAEAAAAAQAAACCgAwAEAAAAAQAAACAAAAAAX7wP8AAAAAlwSFlzAAALEwAACxMBAJqcGAAAAVlpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDYuMC4wIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iPgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KGV7hBwAABWVJREFUWAnlVktsVFUY/s85997pC9BOTKxRWnEKsXWlxjWJj0RWJjrFAAXjAlewYWOkgauACVu7a2IiNUEyExM3yoZE3Wmi7qgPJthJBDE6JUNpO3Mf5/j95/bOTOcBlBgXejJ37rn/Of/7O/9/iP7vQ/zTAcjnC4ry+a5ii1OkiYTpuvjvEc0Gp51uivP+ZW+QBuSW4QjW5rptAa1Ey0uOGKOxwPetVyafN6p/52/PkNBbjdAhGaGEpMRjLZTryB8+9MUSYSGNRIcBvm8kBAY9tHYlHz78nTs392xIkwv9FA3Oe33bdoX1ZZKOS0bH0CXI6RugYLW6BwIu5gskkQ4sEG0wYF25PjBzbZfSYY6kDLUmWMt7FR7Lw3xYUkaTdjxHfTPnPwav0iEGYADVa9XIRIEyxrAA0jIQxgFL22gYwF7A8/DAzNVdksJvJaTEUZ2kYnZWziN5s1ADPHneEIXByotYuMSrf9JEbbsuv7VcvbaKML8plXtQR0EdIYDqWEmtOgAomZFH8EjWSnek2ulmtljljttHbmaIHCCCHzd9MjwfsmscBeZH9Jyd10nMvz92UQrtCBKvMF06mQy0SiEdRMEGg8mN0YjAlgoDDkPrMI5qJKSkKKydpbB2CZjJkhIBvOBw2CGQgii85bpx//dMqFRKam5uvH7w+K97oe+Cl0HO68uIBH0qyEzpOMwIbZIcFq0I+9cwoElizCjk2KFI1y7Nnx614W1db58fOXIlMzs7Xn/jeDmvBV2Q0mXjGf554O/m4LZHp2N8r61WPMvLZWLdiC4GMAk5BjeeB5lhv39l6+BIbu3m760hXMDKBD08XBKzR8fr04nygnIypOOAJUx/fHrsi0Mnys+vVK+V4VUohaiyPCo2Q9DFALvF/ikw8WS4QvVZALS5ksw47/7R8ejgTPk1UFqU6/3zp8bOM7B/kdu/fkguPGU5JibW+F0sTjWOUw8DklRrg4BiLGeBqbaRLxjlT4no0InFV402RcftJz41cH/f/JnHP3kZaaF6VX/liwist9vYG5+NU9Cg3MNkt/+lU5wS8fTxq3mc7ILjDlAE4CJpe89BOWPiIjBhi9O6PI4G1jsc6RGB3lZwmS76k8H0zOKTkFboG8jS2krFKCX2fvTeaPHIBwAkMHHgncURnL3nuCSnxSopdIzN5th0BIonJ0Lf9yUA9iMkzdRWl3BixOusfDcwQVcS4UKIFwYfGPnM8wY/DyP9NFMXaTE5BU39tGkDgGZz+fJJG0oYcSaOafLcqdECY4LzfSObSzyUOgxqtyisr8SSNOOAkubWoh3TTaeA2YtFEXPnm5x81/j+6MI6JqyS25WSNU6hbCMKHG84marJbdR+vwakRhQLRuQpbzHRLjmpmijI+OmWCtq+LzWtnX5v30gHSsqmWne74DtiACi2+Wz0iXbuLt9D2cDyoPEkWOiyp5XUIwLMi/wJY1FbH5B9ONtdC1KrsD/Q0MCQAS0wccILORDW25amAeOtooAj/KQxfzF17uwTSQ1v3dJ7jnLINwdZYRDa4tPU0sHVXFo/vxFF5BqFqxRfOmgPCk4ft2NgKTCy2Y47JIEg+MIhjYsLy5I25qUYTQlCjMRHsr/UwdYwIK33UO1J5fFNB9XNO6akcywJofVmXQDP2wfrSPcI2xG5BSs3I+IosHr4EtvO1TDAu16xHQq5+ykMblfRXLbhEoFIdDTBdhldvzl+3CMg60ZktI2vNzLW6IIp0waLklot9L63yzuUp8dJd7bglPFe3hIXstBEP58/s6Ocyr4rH2+866ZNbriTzA0RSOWCwakMl1QJgculxPt8Z7O5GLdtW6bvU8R/nO1vb+hMExVAVtEAAAAASUVORK5CYII=");background-size:100%}.markdown-body a:active,.markdown-body a:hover{border-bottom:2px solid #5e7ce0}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #5e7ce0;border-spacing:0}.markdown-body thead{color:#fff;text-align:left}.markdown-body thead tr{background:#5e7ce0}.markdown-body thead th{border-bottom:1px solid #dfe1e6}.markdown-body tr{background-color:#fff}.markdown-body tr:nth-child(2n){background-color:#f2f5fc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#252b3a;padding:1px 23px;margin:22px 0;border-left:4px solid #5e7ce0;background-color:#f2f5fc}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{padding-left:10px;margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#5e7ce0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body ul li::marker{content:"â€¢";color:#5e7ce0}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}.markdown-body input[type=checkbox]:before{display:inline-block;width:16px;height:16px;content:"";background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAABCCAYAAADjVADoAAAK2GlDQ1BJQ0MgUHJvZmlsZQAASImVlwdUU9kWhs+96Y0WiHRC70gngJTQQxGkg6iEJJBQYkgIKmJnUMGxoCKCZcSKKFhGQMaCWLANAopdJ8igoD4HC6Ki5t3AI8zMW++99fZaJ+dbO/vss/e55671XwAoYWyRKBdWAyBPWCCODQ2gJ6ek0nHPAQRgQAI2wIHNkYiYMTGRALHJ+a/28S4Sjdhte0Wuf///v5oGlyfhAAClIZzBlXDyEG5DxkuOSFwAAOoI4jddUCBScBfCmmKkQIR/V3DWBH9ScMY4o8njMfGxgQjTAcCT2WxxFgBkO8RPL+RkIXnIih4chVyBEOFihH05fDYX4TMI2+XlzVfwIMJWSLwIAApyOoCR8aecWX/Jn6HMz2ZnKXmir3HDBwkkolz2ov/zaP635eVKJ/ewQAaZLw6LVeyHnN/9nPkRShZmzIyeZAF3oiYF86VhCZPMkQSmTjKXHRShXJs7M3KSMwUhLGWeAlb8JPMkwXGTLJ4fq9wrUxzInGS2eHxfIsIyaU6C0s/nsZT5i/jxSZNcKEicOcmSnLiIqZhApV8sjVXWzxOGBkztG6LsPU/yp34FLOXaAn58mLJ39lT9PCFzKqckWVkblxcUPBWToIwXFQQo9xLlxijjebmhSr+kME65tgC5nFNrY5RnmM0Oj5lkIABRgA04dNVJAqCAt7BA0UjgfNEisSCLX0BnIm8bj84Schzs6M6Ozs4AKN7dievwnjb+TkK061O+NYjHr10ul5+e8oUi9/i4KfJYbk35LCsAUNUD4Op+jlRcOOFDK34wyNNTBZpABxgCU2AF7IEzcAfewB8Eg3AQDeJBCpiL1MoHeUAMFoBisAKUgnKwEWwF1WA32AsOgaPgBGgGZ8AFcAXcAF2gFzwCMjAAXoFh8BGMQRCEgygQFdKBjCBzyBZyhhiQLxQMRUKxUAqUDmVBQkgKFUOroHKoAqqG9kB10HHoNHQBugZ1Qw+gPmgIegd9gVEwGdaEDWALeDrMgJlwBBwPz4Gz4Hy4CC6B18NVcC18BG6CL8A34F5YBr+CR1AARULRUMYoexQDFYiKRqWiMlFi1FJUGaoSVYtqQLWiOlC3UTLUa9RnNBZNRdPR9mhvdBg6Ac1B56OXotehq9GH0E3oS+jb6D70MPo7hoLRx9hivDAsTDImC7MAU4qpxBzAnMJcxvRiBjAfsVgsDWuJ9cCGYVOw2djF2HXYndhGbBu2G9uPHcHhcDo4W5wPLhrHxhXgSnHbcUdw53E9uAHcJzwJb4R3xofgU/FC/Ep8Jf4w/hy+B/8CP0ZQI5gTvAjRBC5hEWEDYR+hlXCLMEAYI6oTLYk+xHhiNnEFsYrYQLxMfEx8TyKRTEiepFkkAWk5qYp0jHSV1Ef6TNYg25ADyWlkKXk9+SC5jfyA/J5CoVhQ/CmplALKekod5SLlKeWTClXFQYWlwlVZplKj0qTSo/JGlaBqrspUnatapFqpelL1luprNYKahVqgGlttqVqN2mm1e2oj6lR1J/Vo9Tz1deqH1a+pD2rgNCw0gjW4GiUaezUuavRTUVRTaiCVQ11F3Ue9TB3QxGpaarI0szXLNY9qdmoOa2louWolai3UqtE6qyWjoWgWNBYtl7aBdoJ2l/ZlmsE05jTetLXTGqb1TBvV1tP21+Zpl2k3avdqf9Gh6wTr5Ohs0mnWeaKL1rXRnaW7QHeX7mXd13qaet56HL0yvRN6D/VhfRv9WP3F+nv1b+qPGBgahBqIDLYbXDR4bUgz9DfMNtxieM5wyIhq5GskMNpidN7oJV2LzqTn0qvol+jDxvrGYcZS4z3GncZjJpYmCSYrTRpNnpgSTRmmmaZbTNtNh82MzKLMis3qzR6aE8wZ5nzzbeYd5qMWlhZJFqstmi0GLbUtWZZFlvWWj60oVn5W+Va1VnessdYM6xzrndZdNrCNmw3fpsbmli1s624rsN1p222HsfO0E9rV2t2zJ9sz7Qvt6+37HGgOkQ4rHZod3kw3m546fdP0junfHd0ccx33OT5y0nAKd1rp1Or0ztnGmeNc43zHheIS4rLMpcXlrautK891l+t9N6pblNtqt3a3b+4e7mL3BvchDzOPdI8dHvcYmowYxjrGVU+MZ4DnMs8znp+93L0KvE54/eFt753jfdh7cIblDN6MfTP6fUx82D57fGS+dN903598ZX7Gfmy/Wr9n/qb+XP8D/i+Y1sxs5hHmmwDHAHHAqYDRQK/AJYFtQaig0KCyoM5gjeCE4OrgpyEmIVkh9SHDoW6hi0PbwjBhEWGbwu6xDFgcVh1rONwjfEn4pQhyRFxEdcSzSJtIcWRrFBwVHrU56vFM85nCmc3RIJoVvTn6SYxlTH7ML7Ows2Jm1cx6HusUWxzbEUeNmxd3OO5jfED8hvhHCVYJ0oT2RNXEtMS6xNGkoKSKJFny9OQlyTdSdFMEKS2puNTE1AOpI7ODZ2+dPZDmllaadneO5ZyFc67N1Z2bO/fsPNV57Hkn0zHpSemH07+yo9m17JEMVsaOjGFOIGcb5xXXn7uFO8Tz4VXwXmT6ZFZkDmb5ZG3OGuL78Sv5rwWBgmrB2+yw7N3ZoznROQdz5LlJuY15+Lz0vNNCDWGO8NJ8w/kL53eLbEWlIlm+V/7W/GFxhPiABJLMkbQUaCIi6abUSvqDtK/Qt7Cm8NOCxAUnF6ovFC68uchm0dpFL4pCivYvRi/mLG4vNi5eUdy3hLlkz1JoacbS9mWmy0qWDSwPXX5oBXFFzopfVzqurFj5YVXSqtYSg5LlJf0/hP5QX6pSKi69t9p79e416DWCNZ1rXdZuX/u9jFt2vdyxvLL86zrOuus/Ov1Y9aN8feb6zg3uG3ZtxG4Ubry7yW/ToQr1iqKK/s1Rm5u20LeUbfmwdd7Wa5Wulbu3EbdJt8mqIqtatptt37j9azW/urcmoKZxh/6OtTtGd3J39uzy39Ww22B3+e4vPwl+ur8ndE9TrUVt5V7s3sK9z/cl7uvYz9hfd0D3QPmBbweFB2WHYg9dqvOoqzusf3hDPVwvrR86knak62jQ0ZYG+4Y9jbTG8mPgmPTYy+Ppx++eiDjRfpJxsuFn8593nKKeKmuCmhY1DTfzm2UtKS3dp8NPt7d6t576xeGXg2eMz9Sc1Tq74RzxXMk5+fmi8yNtorbXF7Iu9LfPa390MfninUuzLnVejrh89UrIlYsdzI7zV32unrnmde30dcb15hvuN5puut089avbr6c63Tubbnncauny7GrtntF9rsev58LtoNtX7rDu3Oid2dt9N+Hu/Xtp92T3ufcHH+Q+ePuw8OHYo+WPMY/Lnqg9qXyq/7T2N+vfGmXusrN9QX03n8U9e9TP6X/1u+T3rwMlzynPK18YvagbdB48MxQy1PVy9suBV6JXY69L/6H+jx1vrN78/If/HzeHk4cH3orfyt+te6/z/uAH1w/tIzEjTz/mfRwbLfuk8+nQZ8bnji9JX16MLfiK+1r1zfpb6/eI74/leXK5iC1mj0sBFDLgzEwA3h1EtHEKAFRElxNnT2jrcYMmvgfGCfwnntDf4+YOQAMyKWQR0x+Akwo5i8wqyKyQRPH+AHZxUY5/mSTTxXkiFxlRlphPcvl7AwBwrQB8E8vlYzvl8m/7kGIfANCWP6HpFYZFtHyD3vJRg6LbPe3g7zah9//U499noKjAFfx9/ieoZhkWVvYkwwAAAGxlWElmTU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAIdpAAQAAAABAAAATgAAAAAAAACQAAAAAQAAAJAAAAABAAKgAgAEAAAAAQAAAEKgAwAEAAAAAQAAAEIAAAAAgodoEQAAAAlwSFlzAAAWJQAAFiUBSVIk8AAAAhRJREFUeAHtnLEuBFEUhs9cu7JCskEhIrZAgYZGoREPwBuIygOoPITKA6jEG/AAolFoaFCgICIKZBNiY8Pyz5rNOWe9wNz5T7N3Z2eT/b/7zZlpziat3xKWBDJoEyh5EDd3DTk5r8vV7Yc8vzbl6zvfwvSERIYHyzI90SeLc1WZrFV85PR9oi+N/YMnOT6t/3tiLAeXFqqytjrSFacDYmfvQS6u37tOiPHA7FS/bK6PmWhpj4AJRYGA9MiKzLpK6An+cqiNVmRleUhArrec6PNzt/5sttLgh0cvcvfY6Px+ZNY9I6Ax6gKErY1xmZ8ZyD0E5MJGIgsyIZsunT3g7qALJuTdAp0nWyMTsunS2QNukbpwOcRaPpvOHvxzQow2ZBvrs+nsfLL8o0QQBJFdMO1XGkEjaIQlQCMsD/YIGkEjLAEaYXmwR9AIGmEJ0AjLgz2CRtAIS4BGWB7sETSCRlgCNMLyYI+gETTCEqARlgd7BI2gEZYAjbA82CNoBI2wBGiE5cEeQSNohCVAIywP9ggaQSMsARphebBH0AgaYQnQCMsjYC5SF2agYi2fTWcPGA7VFfO0n8+mswdMyOrCNJwnpz/P6xqZkE2Xzh4w8qcLI4Hbu/dydvkWBRAAQBZk0uOOyKyzp5PARRiF1puNtR+NTh+oMCvtJ+D8F2N6j6x+PrwzG46gRTDDm5BtsAGBg0X924Qfj7i23p7HNgQAAAAASUVORK5CYII=");background-size:100%;position:relative;right:2px;top:-5px}.markdown-body input[type=checkbox]:checked:before{background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAABCCAYAAADjVADoAAAK2GlDQ1BJQ0MgUHJvZmlsZQAASImVlwdUU9kWhs+96Y0WiHRC70gngJTQQxGkg6iEJJBQYkgIKmJnUMGxoCKCZcSKKFhGQMaCWLANAopdJ8igoD4HC6Ki5t3AI8zMW++99fZaJ+dbO/vss/e55671XwAoYWyRKBdWAyBPWCCODQ2gJ6ek0nHPAQRgQAI2wIHNkYiYMTGRALHJ+a/28S4Sjdhte0Wuf///v5oGlyfhAAClIZzBlXDyEG5DxkuOSFwAAOoI4jddUCBScBfCmmKkQIR/V3DWBH9ScMY4o8njMfGxgQjTAcCT2WxxFgBkO8RPL+RkIXnIih4chVyBEOFihH05fDYX4TMI2+XlzVfwIMJWSLwIAApyOoCR8aecWX/Jn6HMz2ZnKXmir3HDBwkkolz2ov/zaP635eVKJ/ewQAaZLw6LVeyHnN/9nPkRShZmzIyeZAF3oiYF86VhCZPMkQSmTjKXHRShXJs7M3KSMwUhLGWeAlb8JPMkwXGTLJ4fq9wrUxzInGS2eHxfIsIyaU6C0s/nsZT5i/jxSZNcKEicOcmSnLiIqZhApV8sjVXWzxOGBkztG6LsPU/yp34FLOXaAn58mLJ39lT9PCFzKqckWVkblxcUPBWToIwXFQQo9xLlxijjebmhSr+kME65tgC5nFNrY5RnmM0Oj5lkIABRgA04dNVJAqCAt7BA0UjgfNEisSCLX0BnIm8bj84Schzs6M6Ozs4AKN7dievwnjb+TkK061O+NYjHr10ul5+e8oUi9/i4KfJYbk35LCsAUNUD4Op+jlRcOOFDK34wyNNTBZpABxgCU2AF7IEzcAfewB8Eg3AQDeJBCpiL1MoHeUAMFoBisAKUgnKwEWwF1WA32AsOgaPgBGgGZ8AFcAXcAF2gFzwCMjAAXoFh8BGMQRCEgygQFdKBjCBzyBZyhhiQLxQMRUKxUAqUDmVBQkgKFUOroHKoAqqG9kB10HHoNHQBugZ1Qw+gPmgIegd9gVEwGdaEDWALeDrMgJlwBBwPz4Gz4Hy4CC6B18NVcC18BG6CL8A34F5YBr+CR1AARULRUMYoexQDFYiKRqWiMlFi1FJUGaoSVYtqQLWiOlC3UTLUa9RnNBZNRdPR9mhvdBg6Ac1B56OXotehq9GH0E3oS+jb6D70MPo7hoLRx9hivDAsTDImC7MAU4qpxBzAnMJcxvRiBjAfsVgsDWuJ9cCGYVOw2djF2HXYndhGbBu2G9uPHcHhcDo4W5wPLhrHxhXgSnHbcUdw53E9uAHcJzwJb4R3xofgU/FC/Ep8Jf4w/hy+B/8CP0ZQI5gTvAjRBC5hEWEDYR+hlXCLMEAYI6oTLYk+xHhiNnEFsYrYQLxMfEx8TyKRTEiepFkkAWk5qYp0jHSV1Ef6TNYg25ADyWlkKXk9+SC5jfyA/J5CoVhQ/CmplALKekod5SLlKeWTClXFQYWlwlVZplKj0qTSo/JGlaBqrspUnatapFqpelL1luprNYKahVqgGlttqVqN2mm1e2oj6lR1J/Vo9Tz1deqH1a+pD2rgNCw0gjW4GiUaezUuavRTUVRTaiCVQ11F3Ue9TB3QxGpaarI0szXLNY9qdmoOa2louWolai3UqtE6qyWjoWgWNBYtl7aBdoJ2l/ZlmsE05jTetLXTGqb1TBvV1tP21+Zpl2k3avdqf9Gh6wTr5Ohs0mnWeaKL1rXRnaW7QHeX7mXd13qaet56HL0yvRN6D/VhfRv9WP3F+nv1b+qPGBgahBqIDLYbXDR4bUgz9DfMNtxieM5wyIhq5GskMNpidN7oJV2LzqTn0qvol+jDxvrGYcZS4z3GncZjJpYmCSYrTRpNnpgSTRmmmaZbTNtNh82MzKLMis3qzR6aE8wZ5nzzbeYd5qMWlhZJFqstmi0GLbUtWZZFlvWWj60oVn5W+Va1VnessdYM6xzrndZdNrCNmw3fpsbmli1s624rsN1p222HsfO0E9rV2t2zJ9sz7Qvt6+37HGgOkQ4rHZod3kw3m546fdP0junfHd0ccx33OT5y0nAKd1rp1Or0ztnGmeNc43zHheIS4rLMpcXlrautK891l+t9N6pblNtqt3a3b+4e7mL3BvchDzOPdI8dHvcYmowYxjrGVU+MZ4DnMs8znp+93L0KvE54/eFt753jfdh7cIblDN6MfTP6fUx82D57fGS+dN903598ZX7Gfmy/Wr9n/qb+XP8D/i+Y1sxs5hHmmwDHAHHAqYDRQK/AJYFtQaig0KCyoM5gjeCE4OrgpyEmIVkh9SHDoW6hi0PbwjBhEWGbwu6xDFgcVh1rONwjfEn4pQhyRFxEdcSzSJtIcWRrFBwVHrU56vFM85nCmc3RIJoVvTn6SYxlTH7ML7Ows2Jm1cx6HusUWxzbEUeNmxd3OO5jfED8hvhHCVYJ0oT2RNXEtMS6xNGkoKSKJFny9OQlyTdSdFMEKS2puNTE1AOpI7ODZ2+dPZDmllaadneO5ZyFc67N1Z2bO/fsPNV57Hkn0zHpSemH07+yo9m17JEMVsaOjGFOIGcb5xXXn7uFO8Tz4VXwXmT6ZFZkDmb5ZG3OGuL78Sv5rwWBgmrB2+yw7N3ZoznROQdz5LlJuY15+Lz0vNNCDWGO8NJ8w/kL53eLbEWlIlm+V/7W/GFxhPiABJLMkbQUaCIi6abUSvqDtK/Qt7Cm8NOCxAUnF6ovFC68uchm0dpFL4pCivYvRi/mLG4vNi5eUdy3hLlkz1JoacbS9mWmy0qWDSwPXX5oBXFFzopfVzqurFj5YVXSqtYSg5LlJf0/hP5QX6pSKi69t9p79e416DWCNZ1rXdZuX/u9jFt2vdyxvLL86zrOuus/Ov1Y9aN8feb6zg3uG3ZtxG4Ubry7yW/ToQr1iqKK/s1Rm5u20LeUbfmwdd7Wa5Wulbu3EbdJt8mqIqtatptt37j9azW/urcmoKZxh/6OtTtGd3J39uzy39Ww22B3+e4vPwl+ur8ndE9TrUVt5V7s3sK9z/cl7uvYz9hfd0D3QPmBbweFB2WHYg9dqvOoqzusf3hDPVwvrR86knak62jQ0ZYG+4Y9jbTG8mPgmPTYy+Ppx++eiDjRfpJxsuFn8593nKKeKmuCmhY1DTfzm2UtKS3dp8NPt7d6t576xeGXg2eMz9Sc1Tq74RzxXMk5+fmi8yNtorbXF7Iu9LfPa390MfninUuzLnVejrh89UrIlYsdzI7zV32unrnmde30dcb15hvuN5puut089avbr6c63Tubbnncauny7GrtntF9rsev58LtoNtX7rDu3Oid2dt9N+Hu/Xtp92T3ufcHH+Q+ePuw8OHYo+WPMY/Lnqg9qXyq/7T2N+vfGmXusrN9QX03n8U9e9TP6X/1u+T3rwMlzynPK18YvagbdB48MxQy1PVy9suBV6JXY69L/6H+jx1vrN78/If/HzeHk4cH3orfyt+te6/z/uAH1w/tIzEjTz/mfRwbLfuk8+nQZ8bnji9JX16MLfiK+1r1zfpb6/eI74/leXK5iC1mj0sBFDLgzEwA3h1EtHEKAFRElxNnT2jrcYMmvgfGCfwnntDf4+YOQAMyKWQR0x+Akwo5i8wqyKyQRPH+AHZxUY5/mSTTxXkiFxlRlphPcvl7AwBwrQB8E8vlYzvl8m/7kGIfANCWP6HpFYZFtHyD3vJRg6LbPe3g7zah9//U499noKjAFfx9/ieoZhkWVvYkwwAAAGxlWElmTU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAIdpAAQAAAABAAAATgAAAAAAAACQAAAAAQAAAJAAAAABAAKgAgAEAAAAAQAAAEKgAwAEAAAAAQAAAEIAAAAAgodoEQAAAAlwSFlzAAAWJQAAFiUBSVIk8AAABMtJREFUeAHtXM2KFDEQzrQKruIu4mEXRFlUVLz4A4K7B99AcO8io0/gwQfxDVzFuwu+gQf34EG8iOAPKAh6EFlBFMSf/qa2uqszlVR6ZtYxM5PDJNVVSer78nU6KrHzpyxuVlwx44AY2O0T8eb9D7f5fMu9fPvdff7y0/36nbdgdhUdd+jgHnf62JxbObvgjh/d60Pu2R35ajx49Mk9frqlBk7Kw8sXF9y1K4t9cCoi7tz/4F68/tYXMIkPzpzY725dP9yA1tsjoIRpIQHogRWYZSmwJ4Reh06nI2Nd7rYEA8zAzqXAxhgq/pc1d9vHKbEX+Dr4JbzypJDc/YxXYi/wifRLeOXpU5q7n/FK7EXsnBBeeRoqd7/EHj1ZhleeiMjdz8pArRKR+0pb+UsCuK0SkftKW/kzeFmrRHCAxWzufsaJOkqExWzufpOI8EpP1jnCJCK80pN1jjCJ4ICwMigidz/jRD3bI7bZUInIfaWt/KUSuK0SEd4jqFvufgYva5UIDrCYzd3POFFHifhfV/7k8lwPw7D5mUSEV3r854ju2pK7ffOIWzk/X+Go803Lr+ooGqoiwkyP9xzRXVt0q9sE3CgJYTLqfNPyE/irpkoEe2um6ck4bSiBSeD8JBl41jY/Hgd1lIiaaeoyLlsjgUGAjEH3DB4DtUpEW2Z3Mj5GAgA8efbVvXpX/200nln5IMYvKhHDrvylcwdc9+pSNdeg46WQsP7wo2s7fpWYaPT926fw9ZiVk4BpywYJkGuvlJs4EuWS0p/HTyHh3kbzH2najM85cR0lgpPiYMtukFB26m1u5Ua+vkFkWP3Zn0KCJDg1Px6f42Wtvhrhdyz8ncanrFKCmGH1wrwDMCrh/uxPIUFTAvdHbeVPsc1fVRE+c7Ud/k6fWt7XHFlYqcqQ5wTRvWpiY4wrIZwfDUL+akDRUBXB/jCzFCH9SHCzTDRUmsro7z+cEvrHwxOZn2ZTL/pVFcEBtRLoiWXfxQ5ehvoHHx4vpIwUEuJKSMvPz5/zQq0qwmIy5m+rjBQSwnsCQYnlgwjfT72av6oifOba2qnKcOXeGVIP0rT3BALTNr8mBWSpRHAgmJSTtLGhDHwj+A9GPCbX2DNiBSRoShg0H8zl5y/njxIhJ0WntralDJmIbO+UEvz85Zwt9wj7HIDB5Ttp7RkyGbRDSqC49vOjX50P9aexmr+qInzmajvtO13H02SpyrCVMNj8dT7/4BwByDXzRIC0LWXEldA/njVfip9GpV9VERxQM0lPhrVDyrCVMJr5/fwZJ+qWewR1lSuNJ21sXxnjVgIhck5VhM/cqG1WBpIAMX4Z9Xz+eP58sFUiOBArLQcZpQ0CNCXt1HzA5OfPOFGrrwYHyKTwbNJsxolaJUJbKeo0mu/4uMeXBHBbJSK88qP5jo97fAYva5UIDgivHEXk7mecqKNEhFeOhsjdbxKR+0pb+UsCuK0qIveVtvJn8LJWieAAi9nc/YwTdZQIi9nc/SYR4ZWenSO2yZvgcwTuRYZKWBnUI3e/xF7gcmio5L4HWPlL7AVuyPol95W28me8EnuBa8J+sZjM3c94JfYCd6VxTXjaCjDLe+K9cwTuSuOa8LQUYPXvh1d3w0HC7JK8kMK0/rcJfwHkVMYgi4xhOgAAAABJRU5ErkJggg==");background-size:100%}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atom-one-dark">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#abb2bf;background:#282c34}.hljs-comment,.hljs-quote{color:#5c6370;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#c678dd}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e06c75}.hljs-literal{color:#56b6c2}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#98c379}.hljs-built_in,.hljs-class .hljs-title{color:#e6c07b}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#d19a66}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#61aeee}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}</style><p>æ³¨æ„çœ‹ï¼Œè¿™ä¸ªç”·äººå«å°ä½•ï¼Œåˆ«å°çœ‹ä»–ï¼Œæ¯å¤©æ™šä¸Š 9 ç‚¹ 59 åˆ†ä»–éƒ½å‡†æ—¶æ‰“å¼€æ³¡æ³¡ç›ç‰¹å°ç¨‹åºè¹²å®ˆ LABUBU æŠ¢è´­ã€‚å°±åœ¨åˆšæ‰ï¼Œå±å¹•æ—¶é’Ÿå€’è®¡æ—¶åˆåˆ° 00:00:00 äº†ï¼Œä»–ç«‹åˆ»å¼€å§‹ç‹‚æˆ³å±å¹•ä¸Šçš„ã€Œç«‹å³è´­ä¹°ã€æŒ‰é’®ï¼Œåˆ‡æ¢ã€Œè´­ä¹°æ–¹å¼ã€åå¤åˆ·æ–°åº“å­˜ï¼Œç†Ÿç»ƒçš„è®©äººå¿ƒç–¼ã€‚</p>
<p>å¯æ˜¯ï¼Œç°å®å´ä»æ¥æ²¡æœ‰ä»€ä¹ˆâ€œåŠŸå¤«ä¸è´Ÿæœ‰å¿ƒäººâ€ï¼Œæœ‰çš„åªæ˜¯æ— æ•°â€œé»„ç‰›â€æŒ¥èˆç€è‡ªå·±çš„â€œç§‘æŠ€â€ä¸å°ä½•åŒå°ç«æŠ€ã€‚æ¯«æ— æ„å¤–ï¼Œä»Šå¤©çš„å°ä½•ä¾ç„¶æ²¡æœ‰èƒœåˆ©ï¼Œçœ‹ç€å±å¹•ä¸Šçš„ã€Œå·²å”®ç½„ã€é™·å…¥äº†æ²‰æ€ â€¦â€¦</p>
<p><strong>æ‹¼å°½å…¨åŠ›ä¹Ÿæ— æ³•æˆ˜èƒœå—ï¼Ÿ</strong></p>
<p>ç©ºæ°”é‡Œæ¼‚æ³Šç€æ‰‹æœºå±å¹•åå°„çš„å†·å…‰ï¼Œå°ä½•æŒ‡å°–çš„æ±—æ¸åœ¨ã€Œå·²å”®ç½„ã€ä¸‰ä¸ªå­—ä¸Šæ´‡å‡ºæ·¡æ·¡çš„å°å­ã€‚å±å¹•é‡Œ LABUBU çš„ç¬‘è„¸è¿˜åœ¨å€”å¼º â€”â€” é‚£åªé¡¶ç€æ¯›èŒ¸èŒ¸è€³æœµã€åœ†çœ¼åœ†è…®çš„å°å®¶ä¼™ï¼Œæœ¬è¯¥æ˜¯ç”¨æ¥æ²»æ„ˆç”Ÿæ´»çš„ï¼Œæ­¤åˆ»å´æˆäº†ç§‘æŠ€ä¸æ¬²æœ›â€œå®æ€â€åï¼Œç•™ç»™æ™®é€šäººçš„ä¸€é“å†·ç–¤ã€‚</p>
<p>æŠ€æœ¯ä»æ¥éƒ½è¯¥æ˜¯æ¸©æŸ”çš„ï¼Œå½“â€œé»„ç‰›â€ç”¨å®ƒç­‘èµ·å£å’æ—¶ï¼Œæˆ–è®¸æˆ‘è¯¥ç”¨åŒæ ·çš„ä¸œè¥¿ï¼Œé€ ä¸€æ‰‡çª—ï¼</p>
<p>æˆ‘æ˜¯ä¸€åå‰ç«¯å¼€å‘å·¥ç¨‹å¸ˆï¼Œä¸æ˜¯åˆ‡å›¾ä»”ï¼Œä¸æ˜¯åªä¼šå†™ç®¡ç†åå°ï¼Œä»Šå¤©åŠ¿å¿…è¦å¤ºå›å¤±å»çš„ä¸€åˆ‡ï¼</p>
<p>æ˜¯çš„ï¼Œæˆ‘ç”»äº†ä¸€ä¸ªä¸“å±äºè‡ªå·±çš„ LABUBU ï¼</p>
<p>ğŸ‘‰ åœ¨çº¿ä½“éªŒï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Flabubu.xiaohe.ink" target="_blank" title="https://labubu.xiaohe.ink" ref="nofollow noopener noreferrer">labubu.xiaohe.ink</a></p>
<h2 data-id="heading-0">âœï¸ å¼€å§‹åˆ›ä½œ</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.leaferjs.com" target="_blank" title="https://www.leaferjs.com" ref="nofollow noopener noreferrer">LeaferJS</a> æ˜¯ä¸€æ¬¾å¥½ç”¨çš„ Canvas å¼•æ“ï¼Œé©æ–°çš„å¼€å‘ä½“éªŒï¼Œå¯ç”¨äºé«˜æ•ˆç»˜å›¾ ã€UI äº¤äº’ã€å›¾å½¢ç¼–è¾‘ã€‚</p>
<p>è€Œ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FFliPPeDround%2Fleafer-vue" target="_blank" title="https://github.com/FliPPeDround/leafer-vue" ref="nofollow noopener noreferrer">Leafer Vue</a> æ˜¯ç”± <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FFliPPeDround" target="_blank" title="https://github.com/FliPPeDround" ref="nofollow noopener noreferrer">@FliPPeDround</a> åŸºäº LeaferJS åˆ›å»ºçš„é¡¹ç›®ï¼Œå¯ä»¥ä½¿ç”¨ Vue ç»„ä»¶åŒ–è½»æ¾æ„å»º Leafer åº”ç”¨ï¼Œå…·æœ‰ä»¥ä¸‹ç‰¹æ€§ï¼š</p>
<ul>
<li>ä½¿ç”¨ Vue æ„å»º Leafer åº”ç”¨ï¼Œé«˜æ€§èƒ½</li>
<li>ç”Ÿæ€ç»Ÿä¸€ï¼Œå®Œå…¨å…¼å®¹ Leafer æ’ä»¶</li>
<li>ç”± TypeScript ç¼–å†™ï¼Œæä¾›å¼ºå¤§çš„ç±»å‹æ”¯æŒ</li>
<li>æä¾›åœ¨çº¿æ¼”ç»ƒåœºï¼Œå³å¼€å³ç”¨ã€ç•…äº«åˆ›ä½œ</li>
</ul>
<p>ç°åœ¨ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ Leafer Vue ä¸€èµ·æ¥å®Œæˆè¿™ä¸ªä½œå“ï¼</p>
<h3 data-id="heading-1">ä¸€åŠèŒ¶å¶è›‹</h3>
<p>é¦–å…ˆæ˜¯ LABUBU çš„è„‘è¢‹ï¼Œçœ‹èµ·æ¥æœ‰ç‚¹åƒè¢«åˆ‡å¼€çš„èŒ¶å¶è›‹ï¼Œå¯ä»¥ç”¨ä¸¤æ®µäºŒæ¬¡è´å¡å°”æ›²çº¿æ¥ç»˜åˆ¶ä¸€ä¸ªéå¯¹ç§°æ¤­åœ†è¡¨ç¤ºã€‚</p>
<p>æˆ‘ä»¬å…ˆç¼–å†™ <code>createBezierEllipsePath</code> å·¥å…·æ–¹æ³•ï¼Œç”¨äºç”Ÿæˆæ›´è‡ªç„¶æµç•…çš„æ¤­åœ†è·¯å¾„ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">PathCreator</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"leafer-ui"</span>;

<span class="hljs-keyword">interface</span> <span class="hljs-title class_">Point</span> {
  <span class="hljs-attr">x</span>: <span class="hljs-built_in">number</span>;
  <span class="hljs-attr">y</span>: <span class="hljs-built_in">number</span>;
}

<span class="hljs-comment">/**
 * ä»¥æ§åˆ¶ç‚¹ cp ä¸ºä¸­å¿ƒåå°„ç”Ÿæˆç‚¹ p å…³äºå®ƒçš„å¯¹ç§°ç‚¹
 */</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">reflect</span>(<span class="hljs-params">p: Point, cp: Point</span>) {
  <span class="hljs-keyword">return</span> {
    <span class="hljs-attr">x</span>: p.<span class="hljs-property">x</span> + (p.<span class="hljs-property">x</span> - cp.<span class="hljs-property">x</span>),
    <span class="hljs-attr">y</span>: p.<span class="hljs-property">y</span> + (p.<span class="hljs-property">y</span> - cp.<span class="hljs-property">y</span>)
  };
}

<span class="hljs-comment">/**
 * åˆ›å»ºéå¯¹ç§°æ¤­åœ†è·¯å¾„
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">createBezierEllipsePath</span>(<span class="hljs-params">p1: Point, p2: Point, ox: <span class="hljs-built_in">number</span>, oy: <span class="hljs-built_in">number</span></span>) {
  <span class="hljs-keyword">const</span> cp1 = { <span class="hljs-attr">x</span>: p1.<span class="hljs-property">x</span> + ox, <span class="hljs-attr">y</span>: p1.<span class="hljs-property">y</span> + oy };
  <span class="hljs-keyword">const</span> cp2 = { <span class="hljs-attr">x</span>: p2.<span class="hljs-property">x</span> - ox, <span class="hljs-attr">y</span>: p2.<span class="hljs-property">y</span> + oy };

  <span class="hljs-comment">// é€šè¿‡åå°„ç”Ÿæˆå¦å¤–ä¸¤ä¸ªæ§åˆ¶ç‚¹</span>
  <span class="hljs-keyword">const</span> cp3 = <span class="hljs-title function_">reflect</span>(p2, cp2);
  <span class="hljs-keyword">const</span> cp4 = <span class="hljs-title function_">reflect</span>(p1, cp1);

  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">PathCreator</span>()
    .<span class="hljs-title function_">moveTo</span>(p1.<span class="hljs-property">x</span>, p1.<span class="hljs-property">y</span>)
    <span class="hljs-comment">// ç¬¬ 1 æ®µè´å¡å°”æ›²çº¿</span>
    .<span class="hljs-title function_">bezierCurveTo</span>(cp1.<span class="hljs-property">x</span>, cp1.<span class="hljs-property">y</span>, cp2.<span class="hljs-property">x</span>, cp2.<span class="hljs-property">y</span>, p2.<span class="hljs-property">x</span>, p2.<span class="hljs-property">y</span>)
    <span class="hljs-comment">// ç¬¬ 2 æ®µè´å¡å°”æ›²çº¿</span>
    .<span class="hljs-title function_">bezierCurveTo</span>(cp3.<span class="hljs-property">x</span>, cp3.<span class="hljs-property">y</span>, cp4.<span class="hljs-property">x</span>, cp4.<span class="hljs-property">y</span>, p1.<span class="hljs-property">x</span>, p1.<span class="hljs-property">y</span>)
    .<span class="hljs-title function_">closePath</span>()
    .<span class="hljs-property">path</span>;
}
</code></pre>
<p>ç„¶åè°ƒç”¨ <code>createBezierEllipsePath</code> åˆ›å»ºå¤´éƒ¨å’Œè„¸éƒ¨çš„è·¯å¾„ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> headPath = <span class="hljs-title function_">createBezierEllipsePath</span>(
  { <span class="hljs-attr">x</span>: <span class="hljs-number">40</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">240</span> },
  { <span class="hljs-attr">x</span>: <span class="hljs-number">260</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">240</span> },
  <span class="hljs-number">28</span>,
  -<span class="hljs-number">120</span>
);

<span class="hljs-keyword">const</span> facePath = <span class="hljs-title function_">createBezierEllipsePath</span>(
  { <span class="hljs-attr">x</span>: <span class="hljs-number">60</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">260</span> },
  { <span class="hljs-attr">x</span>: <span class="hljs-number">240</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">260</span> },
  -<span class="hljs-number">10</span>,
  <span class="hljs-number">80</span>
);
</code></pre>
<p>ä½¿ç”¨ <code>Path</code> æ ‡ç­¾ä¼ å…¥è·¯å¾„ï¼Œå†åŠ ä¸Šå¡«å……è‰²å’Œæè¾¹ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-comment">&lt;!-- å¤´ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">Path</span>
  <span class="hljs-attr">:path</span>=<span class="hljs-string">"headPath"</span>
  <span class="hljs-attr">fill</span>=<span class="hljs-string">"#984628"</span>
  <span class="hljs-attr">stroke</span>=<span class="hljs-string">"#000000"</span>
  <span class="hljs-attr">:stroke-width</span>=<span class="hljs-string">"3"</span>
&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">Path</span>&gt;</span>

<span class="hljs-comment">&lt;!-- è„¸ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">Path</span>
  <span class="hljs-attr">:path</span>=<span class="hljs-string">"facePath"</span>
  <span class="hljs-attr">fill</span>=<span class="hljs-string">"#ffd9d0"</span>
  <span class="hljs-attr">stroke</span>=<span class="hljs-string">"#000000"</span>
  <span class="hljs-attr">:stroke-width</span>=<span class="hljs-string">"3"</span>
&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">Path</span>&gt;</span>
</code></pre>
<p>âœ¨ è„‘è¢‹éƒ¨åˆ†å®Œæˆå•¦ï¼</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/00d2a1413203464cb754109681e48d4d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeGlhb2hlMDYwMQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763640771&amp;x-signature=vN0%2BfjPZM43VfbpHBJjEWa2kNiw%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-2">ä¸€ä¸ªé­”ä¸¸</h3>
<p>ç”»å¥½äº†è„‘è¢‹ï¼Œç°åœ¨å¼€å§‹ç”»äº”å®˜ã€‚å…‰çœ‹äº”å®˜ LABUBU è·Ÿâ€œé­”ä¸¸â€å“ªå’æ˜¯ä¸æ˜¯æœ‰ç‚¹ç¥ä¼¼ï¼Ÿå“ªå’å’Œæ³¡æ³¡ç›ç‰¹ç”šè‡³æ¨å‡ºè¿‡è”åæ¬¾ï¼</p>
<p>çœ¼ç›ç”»èµ·æ¥å¾ˆç®€å•ï¼Œç›´æ¥ä½¿ç”¨ <code>Ellipse</code> æ ‡ç­¾ç»˜åˆ¶å‡ ä¸ªæ¤­åœ†ç»„åˆèµ·æ¥å°±å¥½ï¼Œè‡³äºçœ‰æ¯›å°±ç”¨ <code>Line</code> æ ‡ç­¾ç”»ä¸€æ¡æ›²çº¿å§ ï½</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-comment">&lt;!-- å·¦çœ¼ç™½ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">Ellipse</span>
  <span class="hljs-attr">:x</span>=<span class="hljs-string">"93"</span>
  <span class="hljs-attr">:y</span>=<span class="hljs-string">"228"</span>
  <span class="hljs-attr">:width</span>=<span class="hljs-string">"40"</span>
  <span class="hljs-attr">:height</span>=<span class="hljs-string">"60"</span>
  <span class="hljs-attr">fill</span>=<span class="hljs-string">"#f9f9f9"</span>
  <span class="hljs-attr">stroke</span>=<span class="hljs-string">"#000000"</span>
  <span class="hljs-attr">:stroke-width</span>=<span class="hljs-string">"2"</span>
&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">Ellipse</span>&gt;</span>

<span class="hljs-comment">&lt;!-- å·¦ä¸Šçœ¼ç‘ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">Ellipse</span>
  <span class="hljs-attr">:x</span>=<span class="hljs-string">"96"</span>
  <span class="hljs-attr">:y</span>=<span class="hljs-string">"206"</span>
  <span class="hljs-attr">:width</span>=<span class="hljs-string">"44"</span>
  <span class="hljs-attr">:height</span>=<span class="hljs-string">"26"</span>
  <span class="hljs-attr">:rotation</span>=<span class="hljs-string">"10"</span>
  <span class="hljs-attr">:start-angle</span>=<span class="hljs-string">"20"</span>
  <span class="hljs-attr">:end-angle</span>=<span class="hljs-string">"154"</span>
  <span class="hljs-attr">fill</span>=<span class="hljs-string">"#ffd9d0"</span>
&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">Ellipse</span>&gt;</span>

<span class="hljs-comment">&lt;!-- å·¦çœ‰æ¯› --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">Line</span>
  <span class="hljs-attr">:points</span>=<span class="hljs-string">"[96, 226, 104, 233, 124, 235, 134, 232]"</span>
  <span class="hljs-attr">curve</span>
  <span class="hljs-attr">stroke</span>=<span class="hljs-string">"#000000"</span>
  <span class="hljs-attr">:stroke-width</span>=<span class="hljs-string">"2"</span>
  <span class="hljs-attr">stroke-cap</span>=<span class="hljs-string">"round"</span>
&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">Line</span>&gt;</span>

<span class="hljs-comment">&lt;!-- å·¦çœ¼çƒ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">Ellipse</span>
  <span class="hljs-attr">:x</span>=<span class="hljs-string">"100"</span>
  <span class="hljs-attr">:y</span>=<span class="hljs-string">"242"</span>
  <span class="hljs-attr">:width</span>=<span class="hljs-string">"28"</span>
  <span class="hljs-attr">:height</span>=<span class="hljs-string">"45"</span>
  <span class="hljs-attr">fill</span>=<span class="hljs-string">"#000000"</span>
&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">Ellipse</span>&gt;</span>

<span class="hljs-comment">&lt;!-- å·¦çœ¼å…‰ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">Ellipse</span>
  <span class="hljs-attr">:x</span>=<span class="hljs-string">"111"</span>
  <span class="hljs-attr">:y</span>=<span class="hljs-string">"245"</span>
  <span class="hljs-attr">:width</span>=<span class="hljs-string">"6"</span>
  <span class="hljs-attr">:height</span>=<span class="hljs-string">"10"</span>
  <span class="hljs-attr">fill</span>=<span class="hljs-string">"#ffffff"</span>
&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">Ellipse</span>&gt;</span>

<span class="hljs-comment">&lt;!-- å³çœ¼ç™½ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">Ellipse</span>
  <span class="hljs-attr">:x</span>=<span class="hljs-string">"165"</span>
  <span class="hljs-attr">:y</span>=<span class="hljs-string">"228"</span>
  <span class="hljs-attr">:width</span>=<span class="hljs-string">"40"</span>
  <span class="hljs-attr">:height</span>=<span class="hljs-string">"60"</span>
  <span class="hljs-attr">fill</span>=<span class="hljs-string">"#f9f9f9"</span>
  <span class="hljs-attr">stroke</span>=<span class="hljs-string">"#000000"</span>
  <span class="hljs-attr">:stroke-width</span>=<span class="hljs-string">"2"</span>
&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">Ellipse</span>&gt;</span>

<span class="hljs-comment">&lt;!-- å³ä¸Šçœ¼ç‘ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">Ellipse</span>
  <span class="hljs-attr">:x</span>=<span class="hljs-string">"158"</span>
  <span class="hljs-attr">:y</span>=<span class="hljs-string">"214"</span>
  <span class="hljs-attr">:width</span>=<span class="hljs-string">"44"</span>
  <span class="hljs-attr">:height</span>=<span class="hljs-string">"26"</span>
  <span class="hljs-attr">:rotation</span>=<span class="hljs-string">"-10"</span>
  <span class="hljs-attr">:start-angle</span>=<span class="hljs-string">"24"</span>
  <span class="hljs-attr">:end-angle</span>=<span class="hljs-string">"158"</span>
  <span class="hljs-attr">fill</span>=<span class="hljs-string">"#ffd9d0"</span>
&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">Ellipse</span>&gt;</span>

<span class="hljs-comment">&lt;!-- å³çœ‰æ¯› --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">Line</span>
  <span class="hljs-attr">:points</span>=<span class="hljs-string">"[164, 232, 176, 236, 194, 233, 202, 226]"</span>
  <span class="hljs-attr">curve</span>
  <span class="hljs-attr">stroke</span>=<span class="hljs-string">"#000000"</span>
  <span class="hljs-attr">:stroke-width</span>=<span class="hljs-string">"2"</span>
  <span class="hljs-attr">stroke-cap</span>=<span class="hljs-string">"round"</span>
&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">Line</span>&gt;</span>

<span class="hljs-comment">&lt;!-- å³çœ¼çƒ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">Ellipse</span>
  <span class="hljs-attr">:x</span>=<span class="hljs-string">"171"</span>
  <span class="hljs-attr">:y</span>=<span class="hljs-string">"242"</span>
  <span class="hljs-attr">:width</span>=<span class="hljs-string">"28"</span>
  <span class="hljs-attr">:height</span>=<span class="hljs-string">"45"</span>
  <span class="hljs-attr">fill</span>=<span class="hljs-string">"#000000"</span>
&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">Ellipse</span>&gt;</span>

<span class="hljs-comment">&lt;!-- å³çœ¼å…‰ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">Ellipse</span>
  <span class="hljs-attr">:x</span>=<span class="hljs-string">"181"</span>
  <span class="hljs-attr">:y</span>=<span class="hljs-string">"245"</span>
  <span class="hljs-attr">:width</span>=<span class="hljs-string">"6"</span>
  <span class="hljs-attr">:height</span>=<span class="hljs-string">"10"</span>
  <span class="hljs-attr">fill</span>=<span class="hljs-string">"#ffffff"</span>
&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">Ellipse</span>&gt;</span>
</code></pre>
<p>é¼»å­ä¹Ÿæ˜¯ä¸€ä¸ªéå¯¹ç§°æ¤­åœ†ï¼Œå¯ä»¥ç”¨ä¹‹å‰ç¼–å†™çš„ <code>createBezierEllipsePath</code> åˆ›å»ºä¸€ä¸ªå°å°çš„æ¤­åœ†ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> nosePath = <span class="hljs-title function_">createBezierEllipsePath</span>(
  { <span class="hljs-attr">x</span>: <span class="hljs-number">141</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">275</span> },
  { <span class="hljs-attr">x</span>: <span class="hljs-number">157</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">275</span> },
  <span class="hljs-number">2</span>,
  <span class="hljs-number">9</span>
);
</code></pre>
<pre><code class="hljs language-html" lang="html"><span class="hljs-comment">&lt;!-- é¼»å­ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">Path</span>
  <span class="hljs-attr">:path</span>=<span class="hljs-string">"nosePath"</span>
  <span class="hljs-attr">fill</span>=<span class="hljs-string">"#ff0154"</span>
  <span class="hljs-attr">stroke</span>=<span class="hljs-string">"#000000"</span>
  <span class="hljs-attr">:stroke-width</span>=<span class="hljs-string">"2"</span>
&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">Path</span>&gt;</span>
</code></pre>
<p>å˜´å·´æ˜¯ä¸€æ¡ 0.76 æ›²ç‡çš„æ›²çº¿ï¼Œä½¿ç”¨ <code>Path</code> æ ‡ç­¾çš„ <code>curve</code> å‚æ•°å¯ä»¥è½»æ¾å®ç°ã€‚</p>
<p>ä½†æ˜¯ç‰™é½¿ç”»èµ·æ¥å°±æ¯”è¾ƒéº»çƒ¦äº†ï¼Œå› ä¸ºè¦ç´§å¯†è´´åˆå˜´å·´æ›²çº¿ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ç¼–å†™ä¸€ä¸ªæ–¹æ³•å°†å˜´å·´çš„æ›²ç‡è½¬æ¢ä¸ºä¸‰æ¬¡è´å¡å°”æ›²çº¿ï¼Œå†æ ¹æ®ä¼ å…¥ç‰™é½¿çš„æ•°é‡å’Œå¤§å°æ²¿æ›²çº¿åˆ‡çº¿æ–¹å‘æ’å¸ƒå¹¶ç”Ÿæˆå¯¹åº”çš„è·¯å¾„æ•°ç»„ã€‚</p>
<p>æ–¹æ³•çš„å…·ä½“å®ç°å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// å˜´å·´æ›²çº¿</span>
<span class="hljs-keyword">const</span> mouthPoints = [<span class="hljs-number">76</span>, <span class="hljs-number">266</span>, <span class="hljs-number">150</span>, <span class="hljs-number">304</span>, <span class="hljs-number">224</span>, <span class="hljs-number">266</span>];
<span class="hljs-comment">// å˜´å·´æ›²ç‡</span>
<span class="hljs-keyword">const</span> mouthCurve = <span class="hljs-number">0.76</span>;

<span class="hljs-comment">/**
 * åˆ›å»ºç‰™é½¿è·¯å¾„
 */</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">createTeethPaths</span>(<span class="hljs-params">
  count: <span class="hljs-built_in">number</span>,
  toothWidth: <span class="hljs-built_in">number</span>,
  toothHeight: <span class="hljs-built_in">number</span>,
  curve: <span class="hljs-built_in">number</span>
</span>) {
  <span class="hljs-keyword">const</span> p1 = { <span class="hljs-attr">x</span>: mouthPoints[<span class="hljs-number">0</span>], <span class="hljs-attr">y</span>: mouthPoints[<span class="hljs-number">1</span>] };
  <span class="hljs-keyword">const</span> c0 = { <span class="hljs-attr">x</span>: mouthPoints[<span class="hljs-number">2</span>], <span class="hljs-attr">y</span>: mouthPoints[<span class="hljs-number">3</span>] };
  <span class="hljs-keyword">const</span> p2 = { <span class="hljs-attr">x</span>: mouthPoints[<span class="hljs-number">4</span>], <span class="hljs-attr">y</span>: mouthPoints[<span class="hljs-number">5</span>] };

  <span class="hljs-keyword">function</span> <span class="hljs-title function_">lerp</span>(<span class="hljs-params">a: <span class="hljs-built_in">number</span>, b: <span class="hljs-built_in">number</span>, t: <span class="hljs-built_in">number</span></span>) {
    <span class="hljs-keyword">return</span> a + (b - a) * t;
  }

  <span class="hljs-comment">// è´å¡å°”æ›²çº¿ä¸­é—´æ§åˆ¶ç‚¹</span>
  <span class="hljs-keyword">const</span> c1 = {
    <span class="hljs-attr">x</span>: <span class="hljs-title function_">lerp</span>(p1.<span class="hljs-property">x</span>, c0.<span class="hljs-property">x</span>, <span class="hljs-number">0.5</span>) - curve * <span class="hljs-number">20</span>,
    <span class="hljs-attr">y</span>: <span class="hljs-title function_">lerp</span>(p1.<span class="hljs-property">y</span>, c0.<span class="hljs-property">y</span>, <span class="hljs-number">0.5</span>) + curve * <span class="hljs-number">43</span>
  };
  <span class="hljs-keyword">const</span> c2 = {
    <span class="hljs-attr">x</span>: <span class="hljs-title function_">lerp</span>(c0.<span class="hljs-property">x</span>, p2.<span class="hljs-property">x</span>, <span class="hljs-number">0.5</span>) + curve * <span class="hljs-number">20</span>,
    <span class="hljs-attr">y</span>: <span class="hljs-title function_">lerp</span>(c0.<span class="hljs-property">y</span>, p2.<span class="hljs-property">y</span>, <span class="hljs-number">0.5</span>) + curve * <span class="hljs-number">43</span>
  };

  <span class="hljs-comment">/**
   * ä¸‰æ¬¡è´å¡å°”è®¡ç®—
   */</span>
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">cubic</span>(<span class="hljs-params">t: <span class="hljs-built_in">number</span></span>): [<span class="hljs-built_in">number</span>, <span class="hljs-built_in">number</span>] {
    <span class="hljs-keyword">return</span> [
      (<span class="hljs-number">1</span> - t) ** <span class="hljs-number">3</span> * p1.<span class="hljs-property">x</span> + <span class="hljs-number">3</span> * (<span class="hljs-number">1</span> - t) ** <span class="hljs-number">2</span> * t * c1.<span class="hljs-property">x</span> + <span class="hljs-number">3</span> * (<span class="hljs-number">1</span> - t) * t ** <span class="hljs-number">2</span> * c2.<span class="hljs-property">x</span> + t ** <span class="hljs-number">3</span> * p2.<span class="hljs-property">x</span>,
      (<span class="hljs-number">1</span> - t) ** <span class="hljs-number">3</span> * p1.<span class="hljs-property">y</span> + <span class="hljs-number">3</span> * (<span class="hljs-number">1</span> - t) ** <span class="hljs-number">2</span> * t * c1.<span class="hljs-property">y</span> + <span class="hljs-number">3</span> * (<span class="hljs-number">1</span> - t) * t ** <span class="hljs-number">2</span> * c2.<span class="hljs-property">y</span> + t ** <span class="hljs-number">3</span> * p2.<span class="hljs-property">y</span>
    ];
  }

  <span class="hljs-comment">/**
   * è´å¡å°”åˆ‡çº¿
   */</span>
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">derivative</span>(<span class="hljs-params">t: <span class="hljs-built_in">number</span></span>): [<span class="hljs-built_in">number</span>, <span class="hljs-built_in">number</span>] {
    <span class="hljs-keyword">return</span> [
      <span class="hljs-number">3</span> * (<span class="hljs-number">1</span> - t) ** <span class="hljs-number">2</span> * (c1.<span class="hljs-property">x</span> - p1.<span class="hljs-property">x</span>) + <span class="hljs-number">6</span> * (<span class="hljs-number">1</span> - t) * t * (c2.<span class="hljs-property">x</span> - c1.<span class="hljs-property">x</span>) + <span class="hljs-number">3</span> * t ** <span class="hljs-number">2</span> * (p2.<span class="hljs-property">x</span> - c2.<span class="hljs-property">x</span>),
      <span class="hljs-number">3</span> * (<span class="hljs-number">1</span> - t) ** <span class="hljs-number">2</span> * (c1.<span class="hljs-property">y</span> - p1.<span class="hljs-property">y</span>) + <span class="hljs-number">6</span> * (<span class="hljs-number">1</span> - t) * t * (c2.<span class="hljs-property">y</span> - c1.<span class="hljs-property">y</span>) + <span class="hljs-number">3</span> * t ** <span class="hljs-number">2</span> * (p2.<span class="hljs-property">y</span> - c2.<span class="hljs-property">y</span>)
    ];
  }

  <span class="hljs-keyword">const</span> <span class="hljs-attr">value</span>: <span class="hljs-built_in">number</span>[][] = [];

  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; count; i += <span class="hljs-number">1</span>) {
    <span class="hljs-keyword">const</span> t = i / (count - <span class="hljs-number">1</span>);

    <span class="hljs-keyword">const</span> [cx, cy] = <span class="hljs-title function_">cubic</span>(t);
    <span class="hljs-keyword">const</span> [dx, dy] = <span class="hljs-title function_">derivative</span>(t);

    <span class="hljs-keyword">const</span> length = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sqrt</span>(dx * dx + dy * dy);

    <span class="hljs-comment">// æ³•å‘é‡</span>
    <span class="hljs-keyword">const</span> nx = -dy / length;
    <span class="hljs-keyword">const</span> ny = dx / length;

    <span class="hljs-keyword">const</span> halfWidth = toothWidth / <span class="hljs-number">2</span>;

    <span class="hljs-keyword">const</span> x1 = cx - halfWidth * dx / length;
    <span class="hljs-keyword">const</span> y1 = cy - halfWidth * dy / length;
    <span class="hljs-keyword">const</span> x2 = cx + halfWidth * dx / length;
    <span class="hljs-keyword">const</span> y2 = cy + halfWidth * dy / length;

    <span class="hljs-keyword">const</span> xt = cx + toothHeight * nx;
    <span class="hljs-keyword">const</span> yt = cy + toothHeight * ny;

    <span class="hljs-keyword">const</span> path = <span class="hljs-keyword">new</span> <span class="hljs-title class_">PathCreator</span>()
      .<span class="hljs-title function_">moveTo</span>(x1, y1)
      .<span class="hljs-title function_">quadraticCurveTo</span>(xt, yt, x2, y2)
      .<span class="hljs-title function_">closePath</span>()
      .<span class="hljs-property">path</span>;

    value.<span class="hljs-title function_">push</span>(path);
  }

  <span class="hljs-keyword">return</span> value;
}

<span class="hljs-keyword">const</span> teethPaths = <span class="hljs-title function_">createTeethPaths</span>(<span class="hljs-number">11</span>, <span class="hljs-number">16</span>, <span class="hljs-number">18</span>, mouthCurve);
</code></pre>
<p>ç„¶åä½¿ç”¨ <code>v-for</code> å¾ªç¯ç”Ÿæˆç‰™é½¿ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-comment">&lt;!-- å˜´å·´ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">Line</span>
  <span class="hljs-attr">:points</span>=<span class="hljs-string">"mouthPoints"</span>
  <span class="hljs-attr">:curve</span>=<span class="hljs-string">"mouthCurve"</span>
  <span class="hljs-attr">stroke</span>=<span class="hljs-string">"#000000"</span>
  <span class="hljs-attr">:stroke-width</span>=<span class="hljs-string">"2"</span>
  <span class="hljs-attr">stroke-cap</span>=<span class="hljs-string">"round"</span>
&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">Line</span>&gt;</span>

<span class="hljs-comment">&lt;!-- ç‰™é½¿ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">Path</span>
  <span class="hljs-attr">v-for</span>=<span class="hljs-string">"(item, index) in teethPaths"</span>
  <span class="hljs-attr">:key</span>=<span class="hljs-string">"index"</span>
  <span class="hljs-attr">:path</span>=<span class="hljs-string">"item"</span>
  <span class="hljs-attr">fill</span>=<span class="hljs-string">"#ffffff"</span>
  <span class="hljs-attr">stroke</span>=<span class="hljs-string">"#000000"</span>
  <span class="hljs-attr">:stroke-width</span>=<span class="hljs-string">"2"</span>
&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">Path</span>&gt;</span>
</code></pre>
<p>ğŸ¥³ æˆ‘ä»¬å®Œæˆäº†æ•´ä¸ªä½œå“ä¸­æœ€å›°éš¾çš„éƒ¨åˆ†ï¼</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/19eccd5b6bb540edb0cc21d94348aeca~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeGlhb2hlMDYwMQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763640771&amp;x-signature=tO3sSacn2g8OMqQE5WAsycU47Xc%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-3">æ»‘ç¨½å…”è€³æœµ</h3>
<p>LABUBU çš„è€³æœµè·Ÿæ»‘ç¨½å…”å¾ˆåƒï¼Œç”»èµ·æ¥ä¹Ÿæ¯”è¾ƒå®¹æ˜“ï¼Œç”¨ <code>Ellipse</code> æ ‡ç­¾ç»˜åˆ¶ä¸¤ä¸ªçºµå‘çš„æ‰æ¤­åœ†ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-comment">&lt;!-- å·¦è€³ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">Ellipse</span>
  <span class="hljs-attr">:x</span>=<span class="hljs-string">"74"</span>
  <span class="hljs-attr">:y</span>=<span class="hljs-string">"56"</span>
  <span class="hljs-attr">:width</span>=<span class="hljs-string">"65"</span>
  <span class="hljs-attr">:height</span>=<span class="hljs-string">"150"</span>
  <span class="hljs-attr">fill</span>=<span class="hljs-string">"#984628"</span>
  <span class="hljs-attr">stroke</span>=<span class="hljs-string">"#000000"</span>
  <span class="hljs-attr">:stroke-width</span>=<span class="hljs-string">"3"</span>
&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">Ellipse</span>&gt;</span>

<span class="hljs-comment">&lt;!-- å³è€³ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">Ellipse</span>
  <span class="hljs-attr">:x</span>=<span class="hljs-string">"156"</span>
  <span class="hljs-attr">:y</span>=<span class="hljs-string">"56"</span>
  <span class="hljs-attr">:width</span>=<span class="hljs-string">"65"</span>
  <span class="hljs-attr">:height</span>=<span class="hljs-string">"150"</span>
  <span class="hljs-attr">fill</span>=<span class="hljs-string">"#984628"</span>
  <span class="hljs-attr">stroke</span>=<span class="hljs-string">"#000000"</span>
  <span class="hljs-attr">:stroke-width</span>=<span class="hljs-string">"3"</span>
&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">Ellipse</span>&gt;</span>
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fc5b4c5587354fe0813e9ecffa3aa030~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeGlhb2hlMDYwMQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763640771&amp;x-signature=DBUSGrp4UoXIii96EPbNCL6hQJQ%3D" alt="" loading="lazy"/></p>
<p>å†ç”¨ä¸¤ä¸ª <code>Ellipse</code> æ ‡ç­¾ç»˜åˆ¶ä¸åŒé¢œè‰²çš„å°æ¤­åœ†è¡¨ç¤ºå†…è€³å’Œè€³èœ—ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-comment">&lt;!-- å·¦å†…è€³ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">Ellipse</span>
  <span class="hljs-attr">:x</span>=<span class="hljs-string">"82"</span>
  <span class="hljs-attr">:y</span>=<span class="hljs-string">"72"</span>
  <span class="hljs-attr">:width</span>=<span class="hljs-string">"50"</span>
  <span class="hljs-attr">:height</span>=<span class="hljs-string">"120"</span>
  <span class="hljs-attr">fill</span>=<span class="hljs-string">"#ffd9d0"</span>
  <span class="hljs-attr">stroke</span>=<span class="hljs-string">"#000000"</span>
  <span class="hljs-attr">:stroke-width</span>=<span class="hljs-string">"2"</span>
&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">Ellipse</span>&gt;</span>

<span class="hljs-comment">&lt;!-- å·¦è€³èœ— --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">Ellipse</span>
  <span class="hljs-attr">:x</span>=<span class="hljs-string">"95"</span>
  <span class="hljs-attr">:y</span>=<span class="hljs-string">"118"</span>
  <span class="hljs-attr">:width</span>=<span class="hljs-string">"26"</span>
  <span class="hljs-attr">:height</span>=<span class="hljs-string">"60"</span>
  <span class="hljs-attr">fill</span>=<span class="hljs-string">"#ffbbbf"</span>
  <span class="hljs-attr">stroke</span>=<span class="hljs-string">"#000000"</span>
  <span class="hljs-attr">:stroke-width</span>=<span class="hljs-string">"2"</span>
&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">Ellipse</span>&gt;</span>

<span class="hljs-comment">&lt;!-- å³å†…è€³ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">Ellipse</span>
  <span class="hljs-attr">:x</span>=<span class="hljs-string">"164"</span>
  <span class="hljs-attr">:y</span>=<span class="hljs-string">"72"</span>
  <span class="hljs-attr">:width</span>=<span class="hljs-string">"50"</span>
  <span class="hljs-attr">:height</span>=<span class="hljs-string">"120"</span>
  <span class="hljs-attr">fill</span>=<span class="hljs-string">"#ffd9d0"</span>
  <span class="hljs-attr">stroke</span>=<span class="hljs-string">"#000000"</span>
  <span class="hljs-attr">:stroke-width</span>=<span class="hljs-string">"2"</span>
&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">Ellipse</span>&gt;</span>

<span class="hljs-comment">&lt;!-- å³è€³èœ— --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">Ellipse</span>
  <span class="hljs-attr">:x</span>=<span class="hljs-string">"176"</span>
  <span class="hljs-attr">:y</span>=<span class="hljs-string">"118"</span>
  <span class="hljs-attr">:width</span>=<span class="hljs-string">"26"</span>
  <span class="hljs-attr">:height</span>=<span class="hljs-string">"60"</span>
  <span class="hljs-attr">fill</span>=<span class="hljs-string">"#ffbbbf"</span>
  <span class="hljs-attr">stroke</span>=<span class="hljs-string">"#000000"</span>
  <span class="hljs-attr">:stroke-width</span>=<span class="hljs-string">"2"</span>
&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">Ellipse</span>&gt;</span>
</code></pre>
<p>ğŸ° æ•´ä¸ªå¤´éƒ¨éƒ½å®Œæˆå•¦ï¼</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6a45aa3d38ef4a2da5902df412e5dc7d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeGlhb2hlMDYwMQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763640771&amp;x-signature=V6jRgIAbBvnaOuq4hUd7EijAUe0%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-4">åƒä¸ªå¸ƒå¨ƒå¨ƒ</h3>
<p>èº«ä½“éƒ¨åˆ†éœ€è¦èŠ±ä¸€äº›å¿ƒæ€ï¼Œæˆ‘ä»¬è¿™é‡Œä½¿ç”¨ä¸¤æ®µäºŒæ¬¡è´å¡å°”æ›²çº¿ï¼ˆæ‰‹è‡‚ï¼‰å’Œä¸¤æ®µä¸‰æ¬¡è´å¡å°”æ›²çº¿ï¼ˆè…¿ï¼‰ç»„åˆå®Œæˆï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> bodyPath = <span class="hljs-keyword">new</span> <span class="hljs-title class_">PathCreator</span>()
  .<span class="hljs-title function_">moveTo</span>(<span class="hljs-number">84</span>, <span class="hljs-number">316</span>)
  .<span class="hljs-title function_">quadraticCurveTo</span>(<span class="hljs-number">40</span>, <span class="hljs-number">374</span>, <span class="hljs-number">90</span>, <span class="hljs-number">368</span>)
  .<span class="hljs-title function_">bezierCurveTo</span>(<span class="hljs-number">74</span>, <span class="hljs-number">460</span>, <span class="hljs-number">140</span>, <span class="hljs-number">440</span>, <span class="hljs-number">147</span>, <span class="hljs-number">430</span>)
  .<span class="hljs-title function_">bezierCurveTo</span>(<span class="hljs-number">154</span>, <span class="hljs-number">444</span>, <span class="hljs-number">224</span>, <span class="hljs-number">454</span>, <span class="hljs-number">204</span>, <span class="hljs-number">368</span>)
  .<span class="hljs-title function_">quadraticCurveTo</span>(<span class="hljs-number">254</span>, <span class="hljs-number">374</span>, <span class="hljs-number">210</span>, <span class="hljs-number">316</span>)
  .<span class="hljs-title function_">closePath</span>()
  .<span class="hljs-property">path</span>;
</code></pre>
<p>å†åŠ ä¸Šå¡«å……è‰²å’Œæè¾¹å°±å½¢æˆäº†èº«ä½“ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-comment">&lt;!-- èº«ä½“ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">Path</span>
  <span class="hljs-attr">:path</span>=<span class="hljs-string">"bodyPath"</span>
  <span class="hljs-attr">fill</span>=<span class="hljs-string">"#984628"</span>
  <span class="hljs-attr">stroke</span>=<span class="hljs-string">"#000000"</span>
  <span class="hljs-attr">:stroke-width</span>=<span class="hljs-string">"3"</span>
&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">Path</span>&gt;</span>
</code></pre>
<p>ğŸ» æ˜¯ä¸æ˜¯å¾ˆåƒä¸€ä¸ªå¸ƒå¨ƒå¨ƒï¼Ÿå¯çˆ±æï¼</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fcced7cf41ff44b4be531297163731bf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeGlhb2hlMDYwMQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763640771&amp;x-signature=eXdN3x7RAV6%2BaYWhd2wkUfUB0Fs%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-5">åŠ ä¸Šå°æ‰‹å’Œå°è„š</h3>
<p>ç»ˆäºåˆ°äº†ä½œå“çš„æœ€åä¸€éƒ¨åˆ†ï¼Œä½¿ç”¨å¤šæ®µäºŒæ¬¡è´å¡å°”æ›²çº¿ç»„åˆç»˜åˆ¶å‡º LABUBU çš„å°æ‰‹å’Œå°è„šï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> leftHandPath = <span class="hljs-keyword">new</span> <span class="hljs-title class_">PathCreator</span>()
  .<span class="hljs-title function_">moveTo</span>(<span class="hljs-number">68</span>, <span class="hljs-number">352</span>)
  .<span class="hljs-title function_">quadraticCurveTo</span>(<span class="hljs-number">48</span>, <span class="hljs-number">348</span>, <span class="hljs-number">59</span>, <span class="hljs-number">360</span>)
  .<span class="hljs-title function_">quadraticCurveTo</span>(<span class="hljs-number">42</span>, <span class="hljs-number">372</span>, <span class="hljs-number">58</span>, <span class="hljs-number">370</span>)
  .<span class="hljs-title function_">quadraticCurveTo</span>(<span class="hljs-number">50</span>, <span class="hljs-number">386</span>, <span class="hljs-number">66</span>, <span class="hljs-number">372</span>)
  .<span class="hljs-title function_">quadraticCurveTo</span>(<span class="hljs-number">68</span>, <span class="hljs-number">392</span>, <span class="hljs-number">76</span>, <span class="hljs-number">366</span>)
  .<span class="hljs-title function_">closePath</span>()
  .<span class="hljs-property">path</span>;

<span class="hljs-keyword">const</span> rightHandPath = <span class="hljs-keyword">new</span> <span class="hljs-title class_">PathCreator</span>()
  .<span class="hljs-title function_">moveTo</span>(<span class="hljs-number">226</span>, <span class="hljs-number">352</span>)
  .<span class="hljs-title function_">quadraticCurveTo</span>(<span class="hljs-number">246</span>, <span class="hljs-number">348</span>, <span class="hljs-number">235</span>, <span class="hljs-number">360</span>)
  .<span class="hljs-title function_">quadraticCurveTo</span>(<span class="hljs-number">252</span>, <span class="hljs-number">372</span>, <span class="hljs-number">236</span>, <span class="hljs-number">370</span>)
  .<span class="hljs-title function_">quadraticCurveTo</span>(<span class="hljs-number">244</span>, <span class="hljs-number">386</span>, <span class="hljs-number">228</span>, <span class="hljs-number">372</span>)
  .<span class="hljs-title function_">quadraticCurveTo</span>(<span class="hljs-number">226</span>, <span class="hljs-number">392</span>, <span class="hljs-number">218</span>, <span class="hljs-number">366</span>)
  .<span class="hljs-title function_">closePath</span>()
  .<span class="hljs-property">path</span>;

<span class="hljs-keyword">const</span> leftFootPath = <span class="hljs-keyword">new</span> <span class="hljs-title class_">PathCreator</span>()
  .<span class="hljs-title function_">moveTo</span>(<span class="hljs-number">104</span>, <span class="hljs-number">430</span>)
  .<span class="hljs-title function_">quadraticCurveTo</span>(<span class="hljs-number">103</span>, <span class="hljs-number">456</span>, <span class="hljs-number">115</span>, <span class="hljs-number">444</span>)
  .<span class="hljs-title function_">quadraticCurveTo</span>(<span class="hljs-number">122</span>, <span class="hljs-number">456</span>, <span class="hljs-number">128</span>, <span class="hljs-number">444</span>)
  .<span class="hljs-title function_">quadraticCurveTo</span>(<span class="hljs-number">144</span>, <span class="hljs-number">456</span>, <span class="hljs-number">140</span>, <span class="hljs-number">430</span>)
  .<span class="hljs-title function_">closePath</span>()
  .<span class="hljs-property">path</span>;

<span class="hljs-keyword">const</span> rightFootPath = <span class="hljs-keyword">new</span> <span class="hljs-title class_">PathCreator</span>()
  .<span class="hljs-title function_">moveTo</span>(<span class="hljs-number">191</span>, <span class="hljs-number">430</span>)
  .<span class="hljs-title function_">quadraticCurveTo</span>(<span class="hljs-number">192</span>, <span class="hljs-number">456</span>, <span class="hljs-number">180</span>, <span class="hljs-number">444</span>)
  .<span class="hljs-title function_">quadraticCurveTo</span>(<span class="hljs-number">173</span>, <span class="hljs-number">456</span>, <span class="hljs-number">167</span>, <span class="hljs-number">444</span>)
  .<span class="hljs-title function_">quadraticCurveTo</span>(<span class="hljs-number">151</span>, <span class="hljs-number">456</span>, <span class="hljs-number">155</span>, <span class="hljs-number">430</span>)
  .<span class="hljs-title function_">closePath</span>()
  .<span class="hljs-property">path</span>;
</code></pre>
<pre><code class="hljs language-html" lang="html"><span class="hljs-comment">&lt;!-- å·¦æ‰‹ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">Path</span>
  <span class="hljs-attr">:path</span>=<span class="hljs-string">"leftHandPath"</span>
  <span class="hljs-attr">fill</span>=<span class="hljs-string">"#ffdbd7"</span>
  <span class="hljs-attr">stroke</span>=<span class="hljs-string">"#000000"</span>
  <span class="hljs-attr">:stroke-width</span>=<span class="hljs-string">"3"</span>
&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">Path</span>&gt;</span>

<span class="hljs-comment">&lt;!-- å³æ‰‹ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">Path</span>
  <span class="hljs-attr">:path</span>=<span class="hljs-string">"rightHandPath"</span>
  <span class="hljs-attr">fill</span>=<span class="hljs-string">"#ffdbd7"</span>
  <span class="hljs-attr">stroke</span>=<span class="hljs-string">"#000000"</span>
  <span class="hljs-attr">:stroke-width</span>=<span class="hljs-string">"3"</span>
&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">Path</span>&gt;</span>

<span class="hljs-comment">&lt;!-- å·¦è„š --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">Path</span>
  <span class="hljs-attr">:path</span>=<span class="hljs-string">"leftFootPath"</span>
  <span class="hljs-attr">fill</span>=<span class="hljs-string">"#ffdbd7"</span>
  <span class="hljs-attr">stroke</span>=<span class="hljs-string">"#000000"</span>
  <span class="hljs-attr">:stroke-width</span>=<span class="hljs-string">"3"</span>
&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">Path</span>&gt;</span>

<span class="hljs-comment">&lt;!-- å³è„š --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">Path</span>
  <span class="hljs-attr">:path</span>=<span class="hljs-string">"rightFootPath"</span>
  <span class="hljs-attr">fill</span>=<span class="hljs-string">"#ffdbd7"</span>
  <span class="hljs-attr">stroke</span>=<span class="hljs-string">"#000000"</span>
  <span class="hljs-attr">:stroke-width</span>=<span class="hljs-string">"3"</span>
&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">Path</span>&gt;</span>
</code></pre>
<p>ğŸ‰ LABUBU è¯ç”Ÿï¼</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8856848ac11942f18d4133bf6da7cb53~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeGlhb2hlMDYwMQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763640771&amp;x-signature=lR21QVIMozjEDLrSpKadB9TYZn8%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-6">ğŸ–¥ï¸ æºç </h2>
<p>é¡¹ç›®çš„å®Œæ•´ä»£ç å¯ä»¥åœ¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fxiaohe0601%2Fleafer-labubu" target="_blank" title="https://github.com/xiaohe0601/leafer-labubu" ref="nofollow noopener noreferrer">leafer-labubu</a> ä»“åº“ä¸­æŸ¥çœ‹ã€‚</p>
<p>èµ äººç«ç‘°ï¼Œæ‰‹ç•™ä½™é¦™ï¼Œå¦‚æœå¯¹ä½ æœ‰å¸®åŠ©å¯ä»¥ç»™æˆ‘ä¸€ä¸ª â­ï¸ é¼“åŠ±ï¼Œè¿™å°†æ˜¯æˆ‘ç»§ç»­å‰è¿›çš„åŠ¨åŠ›ï¼Œè°¢è°¢å¤§å®¶ ğŸ™ï¼</p>
<h2 data-id="heading-7">ğŸ¬ æ„Ÿè°¢</h2>
<p>é¡¹ç›®çµæ„ŸåŠå›¾å½¢åˆ›æ„æ¥æºäº <a href="https://link.juejin.cn?target=http%3A%2F%2Fxhslink.com%2Fo%2F2Xum9er44EP" target="_blank" title="http://xhslink.com/o/2Xum9er44EP" ref="nofollow noopener noreferrer">LABUBU ç®€ç¬”ç”»æ•™ç¨‹ - Thomas</a> ã€‚</p>
<h2 data-id="heading-8">ğŸµ å†™åœ¨æœ€å</h2>
<p>æˆ‘æ˜¯ xiaohe0601ï¼Œçƒ­çˆ±ä»£ç ï¼Œç›®å‰ä¸“æ³¨äº Web å‰ç«¯é¢†åŸŸã€‚</p>
<p>æ¬¢è¿å…³æ³¨æˆ‘çš„å¾®ä¿¡å…¬ä¼—å·ã€Œå°ä½•ä¸ä¼šå†™ä»£ç ã€ï¼Œæˆ‘ä¼šä¸å®šæœŸåˆ†äº«ä¸€äº›å¼€å‘å¿ƒå¾—ã€æœ€ä½³å®è·µä»¥åŠæŠ€æœ¯æ¢ç´¢ç­‰å†…å®¹ï¼Œå¸Œæœ›èƒ½å¤Ÿå¸®åˆ°ä½ ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[LLM äº¤äº’çš„â€œçœé’±â€æ–°å§¿åŠ¿ï¼šJSON å·²æ­»ï¼ŒTOON å½“ç«‹]]></title>    <link>https://juejin.cn/post/7572453554331009024</link>    <guid>https://juejin.cn/post/7572453554331009024</guid>    <pubDate>2025-11-15T03:38:16.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572453554331009024" data-draft-id="7572408522438344739" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="LLM äº¤äº’çš„â€œçœé’±â€æ–°å§¿åŠ¿ï¼šJSON å·²æ­»ï¼ŒTOON å½“ç«‹"/> <meta itemprop="keywords" content="åç«¯,AIGC"/> <meta itemprop="datePublished" content="2025-11-15T03:38:16.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°å¥æŠ€æœ¯"/> <meta itemprop="url" content="https://juejin.cn/user/395479918848487"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            LLM äº¤äº’çš„â€œçœé’±â€æ–°å§¿åŠ¿ï¼šJSON å·²æ­»ï¼ŒTOON å½“ç«‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/395479918848487/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°å¥æŠ€æœ¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-15T03:38:16.000Z" title="Sat Nov 15 2025 03:38:16 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">èƒŒæ™¯</h2>
<p>å˜¿ï¼Œå…„å¼Ÿï¼ä½ æ˜¯ä¸æ˜¯ä¹Ÿæ„Ÿè§‰ AI è¶Šæ¥è¶Šé¦™ï¼Œä½† Token è´¦å•ä¹Ÿè¶Šæ¥è¶Šâ€œçƒ«â€ï¼Ÿ ğŸ’¸</p>
<p><code>GPT-4o</code>ã€<code>Kimi</code> è¿™äº›æ¨¡å‹çš„ä¸Šä¸‹æ–‡çª—å£åŠ¨ä¸åŠ¨å°±å‡ åä¸‡ã€ä¸Šç™¾ä¸‡ <code>Token</code>ï¼Œæˆ‘ä»¬æ¨ä¸å¾—æŠŠæ•´ä¸ªé¡¹ç›®éƒ½æ‰”è¿›å»ã€‚ä½†å†·é™ä¸‹æ¥çœ‹çœ‹è´¦å•... ... å“‡å“¦</p>
<p><code>LLM</code> çš„ <code>Token</code> æ¯ä¸€åˆ†éƒ½æ˜¯çœŸé‡‘ç™½é“¶å•Šï¼</p>
<p>å½“å¤§å®¶éƒ½åœ¨æƒ³åŠæ³•ä¼˜åŒ–æ¨¡å‹ã€ä¼˜åŒ–ç®—æ³•æ—¶ï¼Œæœ‰æ²¡æœ‰æƒ³è¿‡ï¼Œæˆ‘ä»¬æ¯å¤©éƒ½åœ¨ç”¨çš„ <code>JSON</code>ï¼Œå¯èƒ½å°±æ˜¯é‚£ä¸ªâ€œèƒŒåˆºâ€æˆ‘ä»¬ Token è´¹ç”¨çš„â€œå†…é¬¼â€ï¼Ÿ</p>
<p>JSON è™½å¥½ï¼Œä½†å®ƒå®åœ¨æ˜¯... ... å¤ªï¼å•°ï¼å—¦ï¼äº†ï¼</p>
<h2 data-id="heading-1">â€œå†…é¬¼â€ç°å½¢ï¼šJSON åˆ°åº•æœ‰å¤šæµªè´¹</h2>
<p>åœ¨ LLM çš„ä¸–ç•Œé‡Œï¼ŒToken å°±æ˜¯é’±ã€‚è¡¨è¾¾åŒæ ·çš„ä¿¡æ¯ï¼Œè°ç”¨çš„ Token å°‘ï¼Œè°å°±æ˜¯èµ¢å®¶ã€‚</p>
<p>ä¸ä¿¡ï¼Ÿæˆ‘ä»¬ç›´æ¥ä¸Šä¾‹å­ï¼Œç”¨äº‹å®è¯´è¯ã€‚</p>
<p>å‡è®¾æˆ‘ä»¬æœ‰è¿™æ ·ä¸€ä¸ªç®€å•çš„ç”¨æˆ·åˆ—è¡¨ï¼š</p>
<h3 data-id="heading-2">1. å†—é•¿çš„â€œè€å¤§å“¥â€ï¼šJSON</h3>
<p>æ ‡å‡†çš„ JSON æ ¼å¼ï¼Œå……æ»¡äº†å¤§æ‹¬å·ã€åŒå¼•å·å’Œé€—å·ï¼Œç®€ç›´æ˜¯ Token æ€æ‰‹ã€‚</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">[</span>
  <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Alice"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"age"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">30</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Bob"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"age"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">25</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">3</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Charlie"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"age"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">35</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">]</span>
</code></pre>
<p>ï¼ˆæ•°æ•°çœ‹ï¼Œå…‰æ˜¯ name è¿™ä¸ªè¯å°±é‡å¤äº† 3 éï¼ï¼‰</p>
<h3 data-id="heading-3">2. â€œå°æ¸…æ–°â€ä½†è¿˜ä¸å¤Ÿï¼šYAML</h3>
<p>YAML ç¡®å®æ¸…çˆ½äº†ä¸å°‘ï¼Œç”¨ç¼©è¿›ä»£æ›¿äº†æ‹¬å·ï¼Œä¹Ÿå»æ‰äº†åŒå¼•å·ã€‚</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-bullet">-</span> <span class="hljs-attr">id:</span> <span class="hljs-number">1</span>
  <span class="hljs-attr">name:</span> <span class="hljs-string">Alice</span>
  <span class="hljs-attr">age:</span> <span class="hljs-number">30</span>
<span class="hljs-bullet">-</span> <span class="hljs-attr">id:</span> <span class="hljs-number">2</span>
  <span class="hljs-attr">name:</span> <span class="hljs-string">Bob</span>
  <span class="hljs-attr">age:</span> <span class="hljs-number">25</span>
<span class="hljs-bullet">-</span> <span class="hljs-attr">id:</span> <span class="hljs-number">3</span>
  <span class="hljs-attr">name:</span> <span class="hljs-string">Charlie</span>
  <span class="hljs-attr">age:</span> <span class="hljs-number">35</span>
</code></pre>
<p>å—¯ï¼Œè¿›æ­¥äº†ï¼Œä½†ä¸å¤šã€‚id, name, age è¿™äº›é”®åè¿˜æ˜¯åœ¨æ— æƒ…åœ°é‡å¤ã€‚</p>
<h3 data-id="heading-4">3. â€œæŠ é—¨â€çš„ç‹è€…ï¼šTOON ç™»åœºï¼</h3>
<p>TOON ï¼ˆToken-Oriented Object Notationï¼‰é—ªäº®ç™»åœºï¼Œå®ƒç”¨äº†ä¸€ç§è¿‘ä¹â€œå˜æ€â€çš„æ–¹å¼æ¥å‹ç¼©ä¿¡æ¯ï¼š</p>
<pre><code class="hljs language-TOON" lang="TOON">[3]{id,name,age}:
  1,Alice,30
  2,Bob,25
  3,Charlie,35
</code></pre>
<p>çœ‹æ˜ç™½äº†å—ï¼Ÿ[3] è¡¨ç¤ºæœ‰3ä¸ªå¯¹è±¡ï¼Œ{id,name,age} åªå®šä¹‰äº†ä¸€æ¬¡â€œè¡¨å¤´â€ï¼Œåé¢çš„æ•°æ®å°±åƒ CSV ä¸€æ ·ç´§å‡‘æ’åˆ—ã€‚</p>
<p>æ²¡æœ‰å¯¹æ¯”å°±æ²¡æœ‰ä¼¤å®³ï¼ åŒæ ·çš„æ•°æ®ï¼Œ<code>TOON</code> çš„ <code>Token</code> å ç”¨é‡ç®€ç›´æ˜¯â€œéª¨æŠ˜ä»·â€ï¼</p>
<h2 data-id="heading-5">å•¥æ˜¯ TOONï¼Ÿä¸º LLM è€Œç”Ÿçš„â€œçœé’±åˆ©å™¨â€</h2>
<p><code>TOON</code>ï¼ˆé¢å‘ Token çš„å¯¹è±¡è¡¨ç¤ºæ³•ï¼‰å°±æ˜¯è¿™ä¹ˆä¸€ä¸ªä¸“ä¸º LLM æç¤ºè¯è€Œç”Ÿçš„ã€ç´§å‡‘ä¸”äººç±»å¯è¯»çš„æ•°æ®æ ¼å¼ã€‚</p>
<p>å®ƒèƒ½è¡¨ç¤ºå’Œ <code>JSON</code> ä¸€æ¨¡ä¸€æ ·çš„å¯¹è±¡ã€æ•°ç»„å’Œæ•°æ®ç±»å‹ï¼Œä½†å®ƒçš„è¯­æ³•å°±æ˜¯ä¸ºäº†æœ€å°åŒ– Token ä½¿ç”¨è€Œè®¾è®¡çš„ã€‚</p>
<p>ä½ å¯ä»¥æŠŠå®ƒç†è§£ä¸º <code>YAML</code> çš„åµŒå¥—ç»“æ„ +<code> CSV</code> çš„è¡¨æ ¼å¸ƒå±€ = <code>TOON</code></p>
<p>TOON æœ€æ“…é•¿å¤„ç†çš„åœºæ™¯ï¼Œå°±æ˜¯æˆ‘ä»¬æœ€å¸¸è§çš„**â€œç»“æ„ä¸€è‡´çš„å¯¹è±¡æ•°ç»„â€**ã€‚åœ¨å®ç° CSV èˆ¬ç´§å‡‘çš„åŒæ—¶ï¼Œå®ƒåˆæä¾›äº†æ¸…æ™°çš„ç»“æ„ä¿¡æ¯ï¼ˆ{key1, key2}:ï¼‰ï¼Œå¸®åŠ© LLM æ›´å¯é åœ°è§£æå’ŒéªŒè¯æ•°æ®ã€‚</p>
<blockquote>
<p>æ³¨æ„ï¼š TOON å¹¶éé“¶å¼¹ã€‚å¦‚æœä½ çš„æ•°æ®æ˜¯æ·±åº¦åµŒå¥—æˆ–ç»“æ„æå…¶ä¸ç»Ÿä¸€çš„ï¼Œé‚£ JSON å¯èƒ½è¿˜æ˜¯è€è€å®å®çš„é€‰æ‹©ã€‚ä½†åœ¨â€œå¯¹è±¡æ•°ç»„â€è¿™ä¸ª LLM æœ€å¸¸è§çš„åœºæ™¯ä¸‹ï¼ŒTOON ç®€ç›´æ— æ•Œã€‚</p>
</blockquote>
<h2 data-id="heading-6">æ•°æ®ä¸ºè¯ï¼šTOON åˆ°åº•æœ‰å¤šèƒ½æ‰“ï¼Ÿ</h2>
<p>å…‰è¯´ä¸ç»ƒå‡æŠŠå¼ã€‚<code>Chase Adams</code> å¤§ä½¬åšäº†ä¸€ç»„éå¸¸ç›´è§‚çš„åŸºå‡†æµ‹è¯•ï¼Œå¯¹æ¯”äº† <code>JSON</code>ã€<code>YAML</code>ã€<code>TOON</code> å’Œ <code>CSV</code> çš„ <code>Token</code> æ•ˆç‡ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8fb85506e00a48b19fe5304bcfd16793~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5aWP5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763782696&amp;x-signature=hPM7corj2AoLxlSEq%2BZ16r7lJfQ%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/12f9a5eaf8104b99bbe50a23c0c26149~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5aWP5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763782696&amp;x-signature=Q8OVpSc4uu1YqOfj6VTa3kUyXc4%3D" alt="" loading="lazy"/></p>
<blockquote>
<p>åŸºå‡†æµ‹è¯•é“¾æ¥ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.curiouslychase.com%2Fplayground%2Fformat-tokenization-exploration" target="_blank" title="https://www.curiouslychase.com/playground/format-tokenization-exploration" ref="nofollow noopener noreferrer">www.curiouslychase.com/playground/â€¦</a></p>
</blockquote>
<p>ç»“è®ºä¸€ç›®äº†ç„¶ï¼š</p>
<p><code>CSV</code> æ˜¯ <code>Token</code> æ•ˆç‡çš„â€œå¤©èŠ±æ¿â€ï¼Œä½†å®ƒæ— æ³•è¡¨ç¤ºåµŒå¥—ç»“æ„ï¼Œè€Œä¸”æ²¡æœ‰å…ƒæ•°æ®ï¼ŒLLM å¾ˆå®¹æ˜“â€œè¯»æ­ªâ€ã€‚</p>
<p><code>TOON</code> ç¨³åç¬¬äºŒæŠŠäº¤æ¤…ï¼Œæ•ˆç‡ç›´é€¼ CSVï¼Œä½†å®ƒä¿ç•™äº†å®Œæ•´çš„ç»“æ„ä¿¡æ¯ã€‚</p>
<p>J<code>SON</code> å’Œ <code>YAML</code>... ... ä¸¤ä½è€å¤§å“¥ï¼Œåœ¨ <code>Token</code> æ•ˆç‡ä¸Šè¢« <code>TOON</code> åŠæ‰“ã€‚</p>
<h2 data-id="heading-7">å¦‚ä½•åœ¨ LLM ä¸­â€œæ— ç—›â€ç”¨ä¸Š TOONï¼Ÿ</h2>
<p>ä½ å¯èƒ½ä¼šæƒ³ï¼šâ€œå“‡ï¼Œè¿™ä¹ˆç‰›ï¼Ÿé‚£æˆ‘å²‚ä¸æ˜¯è¦é‡æ„æ•´ä¸ªç³»ç»Ÿï¼Ÿâ€</p>
<p>å®Œå…¨ä¸ç”¨</p>
<p>å®˜æ–¹æ¨èçš„æ¶æ„æ˜¯è¿™æ ·çš„ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1cc3d269124e4fb983ca51c898a65ab1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5aWP5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763782696&amp;x-signature=TeXTKGnpbLsqNdwbD5tpA%2B9zyM8%3D" alt="" loading="lazy"/></p>
<p>çœ‹æ‡‚äº†å—ï¼Ÿ<code>TOON</code> åªæ˜¯ä¸€ä¸ª**â€œè½¬æ¢å±‚â€**ã€‚</p>
<p>ä½ çš„ç³»ç»Ÿå†…éƒ¨ï¼Œè¯¥ç”¨ <code>JSON</code> è¿˜æ˜¯ç”¨ <code>JSON</code>ï¼Œå•¥ä¹Ÿä¸ç”¨æ”¹ã€‚</p>
<p>åœ¨è°ƒç”¨ <code>LLM</code> ä¹‹å‰ï¼Œä½ åªéœ€åŠ ä¸€ä¸ªç¼–ç æ­¥éª¤ï¼ŒæŠŠ <code>JSON</code> ç¼–ç ï¼ˆEncodeï¼‰ æˆ <code>TOON</code> æ ¼å¼å†å‘é€ã€‚</p>
<p><code>LLM</code> è¿”å› <code>TOON</code> æ ¼å¼çš„æ•°æ®åï¼Œä½ å†è§£ç ï¼ˆDecodeï¼‰ æˆ <code>JSON</code> ç»™ç³»ç»Ÿç”¨ã€‚</p>
<p>ä½ å°±æŠŠå®ƒå½“æˆä¸€ä¸ªâ€œä¸­é—´ä»¶â€ï¼Œåœ¨å’Œ <code>LLM</code> äº¤äº’çš„â€œæœ€åä¸€å…¬é‡Œâ€ä¸Šå¸®ä½ çœé’±</p>
<h2 data-id="heading-8">åˆ«å†æµªè´¹ Token äº†ï¼</h2>
<p>åœ¨ <code>LLM</code> æ—¶ä»£ï¼Œ<code>Token</code> æ•ˆç‡å°±æ˜¯æ ¸å¿ƒç«äº‰åŠ›ã€‚</p>
<p><code>JSON</code> æ˜¯ä¸€ä¸ªä¼Ÿå¤§çš„æ ¼å¼ï¼Œä½†åœ¨ <code>LLM</code> äº¤äº’è¿™ä¸ªæ–°åœºæ™¯ä¸‹ï¼Œå®ƒæ˜¾å¾—æ—¢è‡ƒè‚¿åˆæ˜‚è´µã€‚</p>
<p><code>TOON</code> æä¾›äº†ä¸€ä¸ªå®Œç¾çš„æ›¿ä»£æ–¹æ¡ˆï¼šå®ƒåœ¨ä¿ç•™ <code>JSON</code> å®Œæ•´è¡¨è¾¾èƒ½åŠ›çš„åŒæ—¶ï¼Œå®ç°äº†æ¥è¿‘ <code>CSV</code> çš„ <code>Token</code> æ•ˆç‡ã€‚</p>
<p>å¦‚æœä½ è¿˜åœ¨ä¸ºé«˜æ˜‚çš„ <code>LLM Token</code> è´¹ç”¨è€Œå¤´ç–¼ï¼Œå¦‚æœä½ è¿˜åœ¨å¿å— <code>JSON</code> å¸¦æ¥çš„å†—ä½™ï¼Œé‚£ä¹ˆï¼Œæ˜¯æ—¶å€™ç»™ä½ çš„ç³»ç»Ÿâ€œå‡ä¸ªèˆ±â€äº†</p>
<h2 data-id="heading-9">å‚è€ƒ</h2>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftoon-format%2Ftoon" target="_blank" title="https://github.com/toon-format/toon" ref="nofollow noopener noreferrer">github.com/toon-formatâ€¦</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.curiouslychase.com%2Fplayground%2Fformat-tokenization-exploration" target="_blank" title="https://www.curiouslychase.com/playground/format-tokenization-exploration" ref="nofollow noopener noreferrer">www.curiouslychase.com/playground/â€¦</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[mcp-serveræ¡ˆä¾‹åˆ†äº«-å³æ¢¦MCP-Serverå®æˆ˜æ•™ç¨‹-è®©Claudeç›´æ¥è°ƒç”¨AIç”Ÿå›¾è§†é¢‘èƒ½åŠ›]]></title>    <link>https://juejin.cn/post/7572454929143693347</link>    <guid>https://juejin.cn/post/7572454929143693347</guid>    <pubDate>2025-11-15T03:20:08.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572454929143693347" data-draft-id="7572453554330910720" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="mcp-serveræ¡ˆä¾‹åˆ†äº«-å³æ¢¦MCP-Serverå®æˆ˜æ•™ç¨‹-è®©Claudeç›´æ¥è°ƒç”¨AIç”Ÿå›¾è§†é¢‘èƒ½åŠ›"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-15T03:20:08.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="wwwzhouhui"/> <meta itemprop="url" content="https://juejin.cn/user/3428746411400537"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            mcp-serveræ¡ˆä¾‹åˆ†äº«-å³æ¢¦MCP-Serverå®æˆ˜æ•™ç¨‹-è®©Claudeç›´æ¥è°ƒç”¨AIç”Ÿå›¾è§†é¢‘èƒ½åŠ›
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3428746411400537/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    wwwzhouhui
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-15T03:20:08.000Z" title="Sat Nov 15 2025 03:20:08 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">1. å‰è¨€</h2>
<p>åœ¨AIè¾…åŠ©å¼€å‘å·¥å…·å¿«é€Ÿå‘å±•çš„ä»Šå¤©ï¼Œå¦‚ä½•è®©AIåŠ©æ‰‹ç›´æ¥è°ƒç”¨å¤–éƒ¨æœåŠ¡æˆä¸ºäº†å¼€å‘è€…å…³æ³¨çš„ç„¦ç‚¹ã€‚ä¼ ç»Ÿçš„æ–¹å¼å¾€å¾€éœ€è¦å¼€å‘è€…æ‰‹åŠ¨ç¼–å†™å¤§é‡çš„APIè°ƒç”¨ä»£ç ï¼Œä¸åŒæœåŠ¡çš„æ¥å£æ ¼å¼åˆå„ä¸ç›¸åŒï¼Œå¯¼è‡´é›†æˆæˆæœ¬å±…é«˜ä¸ä¸‹ã€‚æ›´å…³é”®çš„æ˜¯ï¼ŒåƒClaudeã€ChatGPTè¿™æ ·çš„AIåŠ©æ‰‹æ— æ³•ç›´æ¥è®¿é—®å¤–éƒ¨èµ„æºï¼Œåªèƒ½é€šè¿‡å¼€å‘è€…ä½œä¸º"ä¸­é—´äºº"æ¥å®Œæˆä»»åŠ¡ï¼Œæ•ˆç‡å¤§æ‰“æŠ˜æ‰£ã€‚</p>
<p>MCPï¼ˆModel Context Protocolï¼Œæ¨¡å‹ä¸Šä¸‹æ–‡åè®®ï¼‰æ˜¯ç”±Anthropicå…¬å¸äº2024å¹´11æœˆå¼€æºçš„æ ‡å‡†åŒ–åè®®ï¼Œä¸“é—¨ç”¨äºè§£å†³AIæ¨¡å‹ä¸å¤–éƒ¨èµ„æºä¹‹é—´çš„è¿æ¥é—®é¢˜ã€‚è€Œä»Šå¤©è¦ä»‹ç»çš„<strong>jimeng-mcp-server</strong>æ­£æ˜¯åŸºäºè¿™ä¸ªåè®®æ‰“é€ çš„å³æ¢¦AIé›†æˆæœåŠ¡å™¨ï¼Œå®ƒèƒ½è®©Claudeã€Cherry Studioç­‰AIåº”ç”¨ç›´æ¥è°ƒç”¨å³æ¢¦çš„"æ–‡ç”Ÿå›¾"ã€"å›¾åƒåˆæˆ"ã€"æ–‡ç”Ÿè§†é¢‘"ã€"å›¾ç”Ÿè§†é¢‘"å››å¤§æ ¸å¿ƒèƒ½åŠ›ã€‚é€šè¿‡"Claudeå®¢æˆ·ç«¯ â†’ MCPæœåŠ¡å™¨ â†’ å³æ¢¦API"çš„ä¸‰å±‚æ¶æ„ï¼Œå®ç°äº†10-20å€çš„tokenå‹ç¼©æ•ˆç‡ï¼ŒåŒæ—¶ä¿æŒ97%ä»¥ä¸Šçš„è°ƒç”¨æˆåŠŸç‡ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/45f23da630684d42bae1625bf65d276e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763781607&amp;x-signature=gUdw9k9aw1qsiVCwAqUHLb35i6I%3D" alt="MCPä¸‰å±‚æ¶æ„å›¾" loading="lazy"/></p>
<p>æ˜¨å¤©å¼€æºåœ¨GitHubä¸Šå¼€æºäº†jimeng-mcp-serverï¼Œä»Šå¤©æˆ‘ä»¬å°±æ‰‹æŠŠæ‰‹æ•™å¤§å®¶åœ¨æœ¬åœ°éƒ¨ç½²è¿™ä¸ªé¡¹ç›®ï¼Œä½“éªŒå’Œæ„Ÿå—ä¸€ä¸‹è®©Claudeç›´æ¥ç”ŸæˆAIå›¾ç‰‡å’Œè§†é¢‘çš„å¼ºå¤§èƒ½åŠ›ã€‚è¯ä¸å¤šè¯´ï¼Œä¸‹é¢å¸¦å¤§å®¶ä¸€èµ·æ¥å®ç°ã€‚</p>
<hr/>
<h2 data-id="heading-1">2. é¡¹ç›®ä»‹ç»</h2>
<p>jimeng-mcp-server æ˜¯ä¸€ä¸ªå¼€æºçš„MCPæœåŠ¡å™¨å®ç°ï¼Œå®ƒå°†å³æ¢¦AIçš„å¤šæ¨¡æ€ç”Ÿæˆèƒ½åŠ›å°è£…æˆæ ‡å‡†çš„MCPå·¥å…·ï¼Œè®©ä»»ä½•æ”¯æŒMCPåè®®çš„AIåº”ç”¨éƒ½èƒ½è½»æ¾è°ƒç”¨ã€‚</p>
<h4 data-id="heading-2">âœ¨ æ ¸å¿ƒç‰¹æ€§</h4>
<ul>
<li><strong>ğŸš€ å››å¤§AIç”Ÿæˆå·¥å…·</strong>ï¼šæ–‡ç”Ÿå›¾ã€å›¾åƒåˆæˆã€æ–‡ç”Ÿè§†é¢‘ã€å›¾ç”Ÿè§†é¢‘ï¼Œæ»¡è¶³å¤šæ ·åŒ–åˆ›ä½œéœ€æ±‚</li>
<li><strong>ğŸ¯ æ ‡å‡†MCPåè®®</strong>ï¼šå®Œå…¨å…¼å®¹Anthropicçš„MCPè§„èŒƒï¼Œæ”¯æŒstdioã€SSEã€HTTPä¸‰ç§è¿è¡Œæ¨¡å¼</li>
<li><strong>ğŸ’° é›¶æˆæœ¬ä½¿ç”¨</strong>ï¼šåŸºäºjimeng-free-api-allé¡¹ç›®ï¼Œå®˜æ–¹æ¯æ—¥èµ é€66ç§¯åˆ†ï¼Œå®Œå…¨å…è´¹ä½“éªŒ</li>
<li><strong>ğŸ”§ ä¸€é”®Dockeréƒ¨ç½²</strong>ï¼šæä¾›å®Œæ•´çš„Docker Composeé…ç½®ï¼Œ3åˆ†é’Ÿå³å¯å¯åŠ¨æœåŠ¡</li>
<li><strong>ğŸ“¦ å¤šå®¢æˆ·ç«¯æ”¯æŒ</strong>ï¼šå…¼å®¹Claude Desktopã€Cherry Studioã€Clineç­‰ä¸»æµMCPå®¢æˆ·ç«¯</li>
<li><strong>ğŸŒ OpenAIå…¼å®¹æ¥å£</strong>ï¼šæ”¯æŒæ ‡å‡†çš„OpenAI APIæ ¼å¼ï¼Œæ˜“äºé›†æˆåˆ°ç°æœ‰é¡¹ç›®</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fdff449c072347888d987c792cabf9be~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763781607&amp;x-signature=t6V%2FWV4W9HkVZqbQafS1y0kw2zo%3D" alt="image-20251115095418050" loading="lazy"/></p>
<h4 data-id="heading-3">ğŸ› ï¸ æŠ€æœ¯æ ˆ</h4>



































<table><thead><tr><th>æŠ€æœ¯ç»„ä»¶</th><th>è¯´æ˜</th><th>ç‰ˆæœ¬è¦æ±‚</th></tr></thead><tbody><tr><td><strong>è¯­è¨€</strong></td><td>Python</td><td>3.10+</td></tr><tr><td><strong>æ¡†æ¶</strong></td><td>FastMCP</td><td>æœ€æ–°ç‰ˆ</td></tr><tr><td><strong>åè®®</strong></td><td>MCP Protocol</td><td>v1.0</td></tr><tr><td><strong>åç«¯API</strong></td><td>jimeng-free-api-all</td><td>Dockeréƒ¨ç½²</td></tr><tr><td><strong>éƒ¨ç½²æ–¹å¼</strong></td><td>Docker / stdio / SSE</td><td>-</td></tr></tbody></table>
<p><strong>æ ¸å¿ƒä¾èµ–ï¼š</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># ä¸»è¦ä¾èµ–åŒ…</span>
mcp&gt;=<span class="hljs-number">1.0</span><span class="hljs-number">.0</span>           <span class="hljs-comment"># MCPåè®®æ ¸å¿ƒåº“</span>
httpx&gt;=<span class="hljs-number">0.27</span><span class="hljs-number">.0</span>        <span class="hljs-comment"># HTTPå®¢æˆ·ç«¯</span>
python-dotenv&gt;=<span class="hljs-number">1.0</span><span class="hljs-number">.0</span> <span class="hljs-comment"># ç¯å¢ƒå˜é‡ç®¡ç†</span>
</code></pre>
<h4 data-id="heading-4">ğŸ¯ åº”ç”¨åœºæ™¯</h4>
<p><strong>AIå†…å®¹åˆ›ä½œ</strong></p>
<ul>
<li>åšå®¢é…å›¾è‡ªåŠ¨ç”Ÿæˆ</li>
<li>çŸ­è§†é¢‘æ‰¹é‡åˆ¶ä½œ</li>
<li>äº§å“å®£ä¼ ç´ æåˆ›ä½œ</li>
</ul>
<p><strong>æ™ºèƒ½åŠå…¬åŠ©æ‰‹</strong></p>
<ul>
<li>PPTè‡ªåŠ¨é…å›¾</li>
<li>æŠ¥å‘Šå¯è§†åŒ–</li>
<li>åˆ›æ„å¤´è„‘é£æš´</li>
</ul>
<p><strong>å¼€å‘è€…å·¥å…·</strong></p>
<ul>
<li>UIåŸå‹å¿«é€Ÿç”Ÿæˆ</li>
<li>æµ‹è¯•æ•°æ®å¯è§†åŒ–</li>
<li>æŠ€æœ¯æ–‡æ¡£é…å›¾</li>
</ul>
<h4 data-id="heading-5">ğŸ†š ä¸ºä»€ä¹ˆé€‰æ‹©MCPæ–¹æ¡ˆï¼Ÿ</h4>
<p>ç›¸æ¯”ä¼ ç»Ÿçš„APIé›†æˆæ–¹å¼ï¼ŒMCPæ–¹æ¡ˆå…·æœ‰æ˜¾è‘—ä¼˜åŠ¿ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f57c5184079046438b3c218cca239092~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763781607&amp;x-signature=UNL36YfTTR%2Fmvs4gpRhvbiCVepE%3D" alt="image-20251115095601637" loading="lazy"/></p>
<p><strong>æ ¸å¿ƒä¼˜åŠ¿æ€»ç»“ï¼š</strong></p>
<ul>
<li>âš¡ <strong>å¼€å‘æ•ˆç‡æå‡95%</strong>ï¼šä»4å‘¨é™è‡³30åˆ†é’Ÿ</li>
<li>ğŸ’° <strong>æˆæœ¬é™ä½90%</strong>ï¼šTokenæ¶ˆè€—å¤§å¹…å‡å°‘</li>
<li>ğŸ¯ <strong>é›¶ç»´æŠ¤æˆæœ¬</strong>ï¼šè‡ªåŠ¨é€‚é…APIå˜æ›´</li>
<li>ğŸš€ <strong>æ— é™æ‰©å±•æ€§</strong>ï¼šè½»æ¾æ·»åŠ æ–°æœåŠ¡</li>
</ul>
<hr/>
<h2 data-id="heading-6">3. éƒ¨ç½²å®æˆ˜</h2>
<p>ä¸‹é¢æˆ‘ä»¬å°±æ¥æ‰‹æŠŠæ‰‹å®ç°è¿™ä¸ªMCPæœåŠ¡å™¨çš„å®Œæ•´éƒ¨ç½²æµç¨‹ã€‚æ•´ä¸ªè¿‡ç¨‹åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼šé¦–å…ˆéƒ¨ç½²jimeng-free-api-allåç«¯æœåŠ¡ï¼Œç„¶åå®‰è£…é…ç½®jimeng-mcp-serverã€‚</p>
<h3 data-id="heading-7">ç¯å¢ƒå‡†å¤‡</h3>
<p>åœ¨å¼€å§‹ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦ç¡®ä¿ç³»ç»Ÿå·²ç»å®‰è£…äº†ä»¥ä¸‹ç¯å¢ƒï¼š</p>
<p><strong>å¿…å¤‡ç¯å¢ƒï¼š</strong></p>
<ul>
<li>Python 3.10 æˆ–æ›´é«˜ç‰ˆæœ¬</li>
<li>Docker å’Œ Docker Composeï¼ˆç”¨äºéƒ¨ç½²åç«¯APIï¼‰</li>
<li>Gitï¼ˆç”¨äºå…‹éš†é¡¹ç›®ï¼‰</li>
</ul>
<p><strong>æ¨èé…ç½®ï¼š</strong></p>
<ul>
<li>æ“ä½œç³»ç»Ÿï¼šUbuntu 20.04+ / macOS 12+ / Windows 10/11ï¼ˆWSL2ï¼‰</li>
<li>å†…å­˜ï¼šè‡³å°‘ 4GB</li>
<li>ç£ç›˜ç©ºé—´ï¼šè‡³å°‘ 10GB</li>
</ul>
<p>é¦–å…ˆæ£€æŸ¥Pythonç‰ˆæœ¬ï¼š</p>
<pre><code class="hljs language-shell" lang="shell">python --version
<span class="hljs-meta prompt_"># </span><span class="bash">è¾“å‡ºåº”è¯¥æ˜¯ Python 3.10.x æˆ–æ›´é«˜</span>
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d270ea4d845a4e1b974b05663d9e85f8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763781607&amp;x-signature=49sH9flqlG37%2BW9y0KYroz%2FMUA8%3D" alt="image-20251115095759755" loading="lazy"/></p>
<p>ç„¶åéªŒè¯Dockeræ˜¯å¦å®‰è£…ï¼š</p>
<pre><code class="hljs language-shell" lang="shell">docker --version
docker-compose --version
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/368509b6e92d42ef80f4973729c9f794~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763781607&amp;x-signature=%2BFWuiFU2vQDu%2BIglWeNFNTwmsrw%3D" alt="image-20251115095905271" loading="lazy"/></p>
<p>å¦‚æœDockeræœªå®‰è£…ï¼Œå¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£è¿›è¡Œå®‰è£…ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.docker.com%2Fget-docker%2F" target="_blank" title="https://docs.docker.com/get-docker/" ref="nofollow noopener noreferrer">docs.docker.com/get-docker/</a></p>
<h3 data-id="heading-8">éƒ¨ç½²åç«¯APIæœåŠ¡</h3>
<p>jimeng-mcp-server éœ€è¦é…åˆ jimeng-free-api-all åç«¯æœåŠ¡ä½¿ç”¨ã€‚æˆ‘ä»¬é¦–å…ˆæ¥éƒ¨ç½²è¿™ä¸ªåç«¯æœåŠ¡ã€‚</p>
<h4 data-id="heading-9">3.2.1 å…‹éš†åç«¯é¡¹ç›®</h4>
<p>æ‰“å¼€ç»ˆç«¯ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_"># </span><span class="bash">å…‹éš† jimeng-free-api-all é¡¹ç›®</span>
git clone https://github.com/wwwzhouhui/jimeng-free-api-all.git
cd jimeng-free-api-all
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9c4c379d40894c0080a96402cbfebf67~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763781607&amp;x-signature=kBrQcP0pgjLuXNq9zhQVAXvM0gU%3D" alt="image-20251115100042667" loading="lazy"/></p>
<h4 data-id="heading-10">3.2.2 é…ç½®ç¯å¢ƒå˜é‡</h4>
<p>è¿›å…¥å³æ¢¦ç™»å½•è´¦å·ï¼Œç„¶å F12 æ‰“å¼€å¼€å‘è€…å·¥å…·ï¼Œä» Application &gt; Cookies ä¸­æ‰¾åˆ°<code>sessionid</code>çš„å€¼ï¼Œè¿™å°†ä½œä¸º Authorization çš„ Bearer Token å€¼ï¼š<code>Authorization: Bearer sessionid</code></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4e82007969894ae4aee904d7e798eb25~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763781607&amp;x-signature=vT5%2FwkCgExT0mo4GzUHITIoWrLU%3D" alt="example0" loading="lazy"/></p>
<h4 data-id="heading-11">3.2.3 å¯åŠ¨åç«¯æœåŠ¡</h4>
<p>ä¸‹è½½é•œåƒ</p>
<pre><code class="hljs language-bash" lang="bash">docker pull wwwzhouhui569/jimeng-free-api-all:latest
</code></pre>
<p>å¯åŠ¨ Docker å®¹å™¨</p>
<pre><code class="hljs language-css" lang="css">docker run -it -d <span class="hljs-attr">--init</span> <span class="hljs-attr">--name</span> jimeng-free-api-<span class="hljs-attribute">all</span> -<span class="hljs-selector-tag">p</span> <span class="hljs-number">8001</span>:<span class="hljs-number">8000</span> -e TZ=Asia/Shanghai wwwzhouhui569/jimeng-free-api-all:latest
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5ce410bc2b954f608c8137f1b3568f64~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763781607&amp;x-signature=5qbhWtaZfZvpf%2BtHAFw4tIOy%2B4c%3D" alt="image-20251115101401289" loading="lazy"/></p>
<h3 data-id="heading-12">å®‰è£…MCPæœåŠ¡å™¨</h3>
<p>åç«¯æœåŠ¡éƒ¨ç½²å®Œæˆåï¼Œæˆ‘ä»¬å¼€å§‹å®‰è£…jimeng-mcp-serverã€‚</p>
<h4 data-id="heading-13">3.3.1 å…‹éš†MCPé¡¹ç›®</h4>
<p>æ‰“å¼€æ–°çš„ç»ˆç«¯çª—å£ï¼Œæ‰§è¡Œï¼š</p>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_"># </span><span class="bash">å…‹éš† jimeng-mcp-server é¡¹ç›®</span>
git clone https://github.com/wwwzhouhui/jimeng-mcp-server.git
cd jimeng-mcp-server
</code></pre>
<h4 data-id="heading-14">3.3.2 å®‰è£…Pythonä¾èµ–</h4>
<p>é¡¹ç›®ä½¿ç”¨ <code>uv</code> ä½œä¸ºåŒ…ç®¡ç†å·¥å…·ï¼ˆæ¨èï¼‰ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ä¼ ç»Ÿçš„ pipã€‚</p>
<p><strong>æ–¹æ³•ä¸€ï¼šä½¿ç”¨ uvï¼ˆæ¨èï¼‰</strong></p>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_"># </span><span class="bash">å®‰è£… uvï¼ˆå¦‚æœå°šæœªå®‰è£…ï¼‰</span>
curl -LsSf https://astral.sh/uv/install.sh | sh
<span class="hljs-meta prompt_">
# </span><span class="bash">åˆ›å»ºè™šæ‹Ÿç¯å¢ƒå¹¶å®‰è£…ä¾èµ–</span>
uv venv
source .venv/bin/activate  # Linux/macOS
<span class="hljs-meta prompt_"># </span><span class="bash">æˆ–è€…åœ¨ Windows ä¸Šä½¿ç”¨: .venv\Scripts\activate</span>

uv pip install -e .
</code></pre>
<p><strong>æ–¹æ³•äºŒï¼šä½¿ç”¨ pip</strong></p>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_"># </span><span class="bash">åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ</span>
python -m venv .venv
source .venv/bin/activate  # Linux/macOS
<span class="hljs-meta prompt_"># </span><span class="bash">æˆ–è€…åœ¨ Windows ä¸Šä½¿ç”¨: .venv\Scripts\activate</span>
<span class="hljs-meta prompt_">
# </span><span class="bash">å®‰è£…ä¾èµ–</span>
pip install -e .
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/eb20f773427c476099c7588709305ecb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763781607&amp;x-signature=NBCxpf%2BtsEHD2kW01SjvnQ6uuqw%3D" alt="image-20251115101728380" loading="lazy"/></p>
<p>å®‰è£…è¿‡ç¨‹ä¸­å¯èƒ½éœ€è¦å‡ åˆ†é’Ÿæ—¶é—´ï¼Œè¯·è€å¿ƒç­‰å¾…ã€‚</p>
<h4 data-id="heading-15">3.3.3 é…ç½®MCPæœåŠ¡å™¨</h4>
<p>åˆ›å»º <code>.env</code> æ–‡ä»¶é…ç½®åç«¯APIåœ°å€ï¼š</p>
<pre><code class="hljs language-shell" lang="shell">touch .env
</code></pre>
<p>ç¼–è¾‘ <code>.env</code> æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-env" lang="env"># å³æ¢¦APIé…ç½®

# æ‚¨çš„å³æ¢¦APIå¯†é’¥ (å¿…éœ€)
JIMENG_API_KEY=æ‚¨çš„APIå¯†é’¥

# APIåŸºç¡€URL (å¯é€‰, é»˜è®¤ä¸º https://jimeng.duckcloud.fun)
JIMENG_API_URL=http://127.0.0.1:8001

# å›¾åƒç”Ÿæˆçš„é»˜è®¤æ¨¡å‹ (å¯é€‰, é»˜è®¤ä¸º jimeng-4.0)
JIMENG_MODEL=jimeng-4.0
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/eaaa95756e4641078efd7545c3f10f98~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763781607&amp;x-signature=g12tWkMPZLNLrqaXMGgn90yoYOw%3D" alt="image-20251115101958669" loading="lazy"/></p>
<p><strong>æ³¨æ„</strong>ï¼š<code>JIMENG_API_KEY</code> å°±æ˜¯å‰é¢ç½‘é¡µç‰ˆæœ¬å³æ¢¦ cookies</p>
<h3 data-id="heading-16">Cherry Studioé…ç½®</h3>
<p>å°†æ­¤æœåŠ¡å™¨æ·»åŠ åˆ°Cherry Studioé…ç½®æ–‡ä»¶:</p>
<p><strong>MacOS</strong>: <code>~/Library/Application Support/Claude/claude_desktop_config.json</code></p>
<p><strong>Windows</strong>: <code>%APPDATA%\Claude\claude_desktop_config.json</code></p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"mcpServers"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"jimeng"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"command"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"python"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"args"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"-m"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"jimeng_mcp.server"</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"env"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"JIMENG_API_KEY"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"æ‚¨çš„APIå¯†é’¥"</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>æˆ–è€…,å¦‚æœæ‚¨æœ‰<code>.env</code>æ–‡ä»¶:</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"mcpServers"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"jimeng"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"command"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"python"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"args"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"-m"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"jimeng_mcp.server"</span><span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>sseé…ç½®</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/98e8af42f454473d9a31741c862c7d0c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763781607&amp;x-signature=oQbsn4NfEgRW1IRbPKBY3uiGj%2BE%3D" alt="image-20251114205117656" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3547a384b2374e81a56a771bd53a954d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763781607&amp;x-signature=Dq1jgfSQNI92TyCgbzk12p6hOCs%3D" alt="image-20251114205145614" loading="lazy"/></p>
<h4 data-id="heading-17">æ–‡æœ¬ç”Ÿæˆå›¾åƒç¤ºä¾‹</h4>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">ç”Ÿæˆä¸€å¼ å›¾åƒ:å°çŒªå’Œå°ç‹—è¸¢çƒ</span>
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2b44f76f3d7e4902b6f6aa03a9f34053~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763781607&amp;x-signature=v3dFgRChNTZTH107pVOZESD6Pvo%3D" alt="image-20251114225936753" loading="lazy"/></p>
<h5 data-id="heading-18">å›¾åƒåˆæˆç¤ºä¾‹</h5>
<pre><code class="hljs language-bash" lang="bash">å°†è¿™ä¸¤å¼ å›¾åƒåˆæˆåœ¨ä¸€èµ·:
- å›¾åƒ1: https://p3-dreamina-sign.byteimg.com/tos-cn-i-tb4s082cfz/bab623359bd9410da0c1f07897b16fec~tplv-tb4s082cfz-resize:0:0.image?lk3s=8e790bc3&amp;x-expires=1788961069&amp;x-signature=cbtnyeSIcqWpngHdoYWFkCra3cA%3D
- å›¾åƒ2: https://p3-dreamina-sign.byteimg.com/tos-cn-i-tb4s082cfz/6acf16d07c47413898aea2bdd1ad339e~tplv-tb4s082cfz-resize:0:0.image?lk3s=8e790bc3&amp;x-expires=1788961069&amp;x-signature=30S2i%2FvCH0eRR32CehcEaK8t5ns%3D
åˆ›å»ºä¸€ä¸ªè‰ºæœ¯é£æ ¼çš„æ— ç¼èåˆ
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9192a831985e4b29b844ae9cee4d75ca~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763781607&amp;x-signature=uaaAdxPTuIlLQVvIZaSI1gTtGM0%3D" alt="image-20251114230207881" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7936feaa3e474c188aa34e26c02acf6b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763781607&amp;x-signature=%2BvJCsgCobZHvl3esX678v0TAy6M%3D" alt="image-20251114230356088" loading="lazy"/></p>
<h5 data-id="heading-19">æ–‡æœ¬ç”Ÿæˆè§†é¢‘ç¤ºä¾‹</h5>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">åˆ›å»ºä¸€ä¸ªè§†é¢‘:å°çŒ«åœ¨é’“é±¼</span>
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/374144ec33c743f1a6c57f95e34ecf28~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763781607&amp;x-signature=kzgXfOBLQIk7P9%2F5t6NT5zKA%2BKM%3D" alt="image-20251114210421561" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4020c55afa9846c4a2aa3d826677765b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763781607&amp;x-signature=nsyuwYk2SG%2BGSg6U00hX2wQj7Jk%3D" alt="image-20251114210442167" loading="lazy"/></p>
<h5 data-id="heading-20">å›¾åƒç”Ÿæˆè§†é¢‘ç¤ºä¾‹</h5>
<pre><code class="hljs language-bash" lang="bash">ä¸ºè¿™å¼ å›¾åƒæ·»åŠ åŠ¨ç”»æ•ˆæœ:
https://p3-dreamina-sign.byteimg.com/tos-cn-i-tb4s082cfz/bab623359bd9410da0c1f07897b16fec~tplv-tb4s082cfz-resize:0:0.image?lk3s=8e790bc3&amp;x-expires=1788961069&amp;x-signature=cbtnyeSIcqWpngHdoYWFkCra3cA%3D
æ·»åŠ è½»æŸ”çš„è¿åŠ¨å’Œè‡ªç„¶çš„é•œå¤´ç¼©æ”¾
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/54ffabdb374b40ec9760dafd34d886e2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763781607&amp;x-signature=ogL5FF4dx58dOrP567XT6hwWxcU%3D" alt="image-20251114231138586" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/118eef1f6d29449b849caf75afff6f48~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763781607&amp;x-signature=6DchFDKcZm%2BxApObdiQ595Bqsr4%3D" alt="image-20251114231206562" loading="lazy"/></p>
<h3 data-id="heading-21">åœ¨claude codeä¸­ä½¿ç”¨</h3>
<h4 data-id="heading-22">æ–‡æœ¬ç”Ÿæˆå›¾åƒç¤ºä¾‹</h4>
<pre><code class="hljs language-vbscript" lang="vbscript">è¯·ä½¿ç”¨jimeng-mcp-<span class="hljs-built_in">server</span> ç”Ÿæˆä¸€å¼ å›¾åƒ:å°çŒªå’Œå°ç‹—è¸¢çƒ
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8b8c6198a40d4acfb225b48244b3881d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763781607&amp;x-signature=KBGNkM1gfsPXMI9%2F3%2BRw3EPSICU%3D" alt="image-20251115003223041" loading="lazy"/></p>
<h4 data-id="heading-23">å›¾åƒåˆæˆç¤ºä¾‹</h4>
<pre><code class="hljs language-bash" lang="bash">è¯·ä½¿ç”¨jimeng-mcp-server å°†è¿™ä¸¤å¼ å›¾åƒåˆæˆåœ¨ä¸€èµ·:
- å›¾åƒ1: https://p3-dreamina-sign.byteimg.com/tos-cn-i-tb4s082cfz/bab623359bd9410da0c1f07897b16fec~tplv-tb4s082cfz-resize:0:0.image?lk3s=8e790bc3&amp;x-expires=1788961069&amp;x-signature=cbtnyeSIcqWpngHdoYWFkCra3cA%3D
- å›¾åƒ2: https://p3-dreamina-sign.byteimg.com/tos-cn-i-tb4s082cfz/6acf16d07c47413898aea2bdd1ad339e~tplv-tb4s082cfz-resize:0:0.image?lk3s=8e790bc3&amp;x-expires=1788961069&amp;x-signature=30S2i%2FvCH0eRR32CehcEaK8t5ns%3D
åˆ›å»ºä¸€ä¸ªè‰ºæœ¯é£æ ¼çš„æ— ç¼èåˆ
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1f109c8bfa4246dfa56447ab44e00138~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763781607&amp;x-signature=UL5n%2FqN32NFTQgXB7w96%2FW8fnoc%3D" alt="image-20251115003456583" loading="lazy"/></p>
<p>å›¾ç‰‡ç”Ÿæˆç»“æœ</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/48885517a7f14e0996278be8c02d5f5f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763781607&amp;x-signature=5ft%2FFkvO8oy3hO1QhByVAVihxJo%3D" alt="image-20251115003526890" loading="lazy"/></p>
<h3 data-id="heading-24">3.6 é«˜çº§é…ç½®ï¼ˆå¯é€‰ï¼‰</h3>
<h4 data-id="heading-25">SSEæ¨¡å¼éƒ¨ç½²</h4>
<p>å¦‚æœéœ€è¦å°†MCPæœåŠ¡å™¨éƒ¨ç½²åˆ°äº‘ç«¯ä¾›å¤šäººä½¿ç”¨ï¼Œå¯ä»¥ä½¿ç”¨SSEï¼ˆServer-Sent Eventsï¼‰æ¨¡å¼ï¼š</p>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_"># </span><span class="bash">å¯åŠ¨SSEæœåŠ¡å™¨</span>
cd jimeng-mcp-server
uv run jimeng-mcp-server --transport sse --port 8080
</code></pre>
<p>ç„¶ååœ¨å®¢æˆ·ç«¯é…ç½®ä¸­ä½¿ç”¨SSEè¿æ¥ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"mcpServers"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"jimeng-remote"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"url"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"http://your-server-ip:8080/sse"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"transport"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"sse"</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h4 data-id="heading-26">HTTP REST APIæ¨¡å¼</h4>
<p>jimeng-mcp-serverè¿˜æ”¯æŒæ ‡å‡†çš„HTTP REST APIè°ƒç”¨ï¼š</p>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_"># </span><span class="bash">å¯åŠ¨HTTPæœåŠ¡</span>
uv run jimeng-mcp-server --transport http --port 8080
</code></pre>
<p>å¯ä»¥ä½¿ç”¨curlæˆ–Postmanæµ‹è¯•ï¼š</p>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_"># </span><span class="bash">è°ƒç”¨æ–‡ç”Ÿå›¾API</span>
curl -X POST http://localhost:8080/tools/text_to_image \
  -H "Content-Type: application/json" \
  -d '{
    "prompt": "ä¸€åªå¯çˆ±çš„æŸ´çŠ¬",
    "width": 1024,
    "height": 1024
  }'
</code></pre>
<hr/>
<h2 data-id="heading-27">4. æ€»ç»“</h2>
<p>ä»Šå¤©ä¸»è¦å¸¦å¤§å®¶äº†è§£å¹¶å®ç°äº† <strong>jimeng-mcp-serverï¼ˆå³æ¢¦MCPæœåŠ¡å™¨ï¼‰</strong> çš„ <strong>å®Œæ•´éƒ¨ç½²ä¸é›†æˆæµç¨‹</strong>ï¼Œè¯¥ <strong>å¼€æºMCPæœåŠ¡å™¨</strong> ä»¥ <strong>"æ ‡å‡†MCPåè®® + å³æ¢¦AIå¤šæ¨¡æ€èƒ½åŠ›"</strong> ä¸ºæ ¸å¿ƒä¼˜åŠ¿ï¼Œç»“åˆ <strong>AIè¾…åŠ©å¼€å‘ä¸å†…å®¹åˆ›ä½œ</strong> éœ€æ±‚ï¼Œé€šè¿‡ <strong>Dockerå®¹å™¨åŒ–éƒ¨ç½²</strong> ä¸ <strong>FastMCPæ¡†æ¶</strong>ï¼Œå½¢æˆäº†ä¸€å¥—ä» <strong>åç«¯APIæ­å»º</strong> åˆ° <strong>Claudeå®¢æˆ·ç«¯é›†æˆ</strong> çš„å…¨é“¾è·¯ <strong>AIå·¥å…·ç¼–æ’è§£å†³æ–¹æ¡ˆ</strong>ã€‚</p>
<p>é€šè¿‡è¿™å¥—å®è·µæ–¹æ¡ˆï¼Œå¼€å‘è€…ä¸å†…å®¹åˆ›ä½œè€… èƒ½å¤Ÿé«˜æ•ˆçªç ´ ä¼ ç»ŸAIåŠ©æ‰‹æ— æ³•ç›´æ¥è°ƒç”¨å¤–éƒ¨æœåŠ¡ çš„æŠ€æœ¯å£å’ â€”â€” å€ŸåŠ© ä¸‰å±‚æ¶æ„è®¾è®¡ï¼ˆåŒ…æ‹¬ Claudeå®¢æˆ·ç«¯å±‚ã€MCPåè®®å±‚ã€å³æ¢¦APIå±‚ï¼‰ï¼Œæ— éœ€ æ‰‹åŠ¨ç¼–å†™APIå¯¹æ¥ä»£ç ï¼Œå°±èƒ½å¿«é€Ÿ å®ç°AIç”Ÿå›¾ã€å›¾åƒåˆæˆã€æ–‡ç”Ÿè§†é¢‘ã€å›¾ç”Ÿè§†é¢‘å››å¤§æ ¸å¿ƒåŠŸèƒ½ï¼ˆå¦‚æœ¬æ¬¡æ¼”ç¤ºçš„ "è®©Claudeç”¨ä¸€å¥è¯ç”Ÿæˆæ¨±èŠ±ä¸‹çš„æŸ´çŠ¬è§†é¢‘"ï¼‰ã€‚æ— è®ºæ˜¯ åšå®¢é…å›¾è‡ªåŠ¨ç”Ÿæˆã€PPTæ™ºèƒ½é…å›¾ï¼Œè¿˜æ˜¯ çŸ­è§†é¢‘æ‰¹é‡åˆ¶ä½œã€UIåŸå‹å¿«é€Ÿç”Ÿæˆï¼Œéƒ½èƒ½é€šè¿‡ è‡ªç„¶è¯­è¨€æŒ‡ä»¤ å®Œæˆï¼Œæå¤§ æå‡å†…å®¹åˆ›ä½œæ•ˆç‡å’Œå¼€å‘ä½“éªŒã€‚</p>
<p>åœ¨å®é™…åº”ç”¨ä¸­ï¼Œè¯¥ <strong>MCPæœåŠ¡å™¨</strong> ä¸ä»… <strong>æ”¯æŒstdioã€SSEã€HTTPä¸‰ç§è¿è¡Œæ¨¡å¼</strong>ï¼Œè¿˜ <strong>æä¾›OpenAIå…¼å®¹æ¥å£</strong>ï¼Œé€‚é…æ€§è¿œä¼˜äº <strong>ä¼ ç»Ÿå•ä¸€åè®®æ–¹æ¡ˆ</strong>ï¼›ç‰¹åˆ«æ˜¯é€šè¿‡ <strong>Docker Composeä¸€é”®éƒ¨ç½²</strong>ï¼Œæœ‰æ•ˆè§£å†³äº† <strong>å¤æ‚ç¯å¢ƒé…ç½®å’Œä¾èµ–ç®¡ç†</strong> çš„éš¾é¢˜ã€‚åŒæ—¶ï¼Œæ–¹æ¡ˆå…·å¤‡è‰¯å¥½çš„æ‰©å±•æ€§ â€”â€” å°ä¼™ä¼´ä»¬å¯ä»¥åŸºäºæ­¤æ‰©å±•æ›´å¤š <strong>AIç”Ÿæˆå·¥å…·</strong>ï¼Œå¦‚ <strong>AIéŸ³ä¹ç”Ÿæˆã€3Dæ¨¡å‹ç”Ÿæˆã€ä»£ç å¯è§†åŒ–ç”Ÿæˆ</strong> ç­‰ï¼Œè¿›ä¸€æ­¥å‘æŒ¥ <strong>MCPåè®®æ ‡å‡†åŒ–èƒ½åŠ›</strong> åœ¨ <strong>ä¼ä¸šçº§AIåº”ç”¨ã€æ™ºèƒ½åŠå…¬ç³»ç»Ÿã€æ•™è‚²åŸ¹è®­å¹³å°</strong> ç­‰é¢†åŸŸçš„åº”ç”¨ä»·å€¼ã€‚æ„Ÿå…´è¶£çš„å°ä¼™ä¼´å¯ä»¥æŒ‰ç…§æ–‡ä¸­æä¾›çš„æ­¥éª¤è¿›è¡Œå®è·µï¼Œæ ¹æ®å®é™… <strong>ä¸šåŠ¡åœºæ™¯å’Œåˆ›ä½œéœ€æ±‚</strong> è°ƒæ•´ <strong>å·¥å…·å‚æ•°ã€åˆ†è¾¨ç‡ã€æ—¶é•¿ç­‰é…ç½®é¡¹</strong>ã€‚ä»Šå¤©çš„åˆ†äº«å°±åˆ°è¿™é‡Œç»“æŸäº†ï¼Œæˆ‘ä»¬ä¸‹ä¸€ç¯‡æ–‡ç« è§ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Monorepoæ€§èƒ½å™©æ¢¦ï¼šä¸€è¡Œé…ç½®è§£å†³VSCodeå¡é¡¿ä¸TSç±»å‹å´©æºƒ]]></title>    <link>https://juejin.cn/post/7572434032518807598</link>    <guid>https://juejin.cn/post/7572434032518807598</guid>    <pubDate>2025-11-15T03:44:33.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572434032518807598" data-draft-id="7572466174224465946" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Monorepoæ€§èƒ½å™©æ¢¦ï¼šä¸€è¡Œé…ç½®è§£å†³VSCodeå¡é¡¿ä¸TSç±»å‹å´©æºƒ"/> <meta itemprop="keywords" content="å‰ç«¯,Visual Studio Code,TypeScript"/> <meta itemprop="datePublished" content="2025-11-15T03:44:33.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="eason_fan"/> <meta itemprop="url" content="https://juejin.cn/user/2995517308808877"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Monorepoæ€§èƒ½å™©æ¢¦ï¼šä¸€è¡Œé…ç½®è§£å†³VSCodeå¡é¡¿ä¸TSç±»å‹å´©æºƒ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2995517308808877/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    eason_fan
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-15T03:44:33.000Z" title="Sat Nov 15 2025 03:44:33 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Monorepoæ€§èƒ½å™©æ¢¦ï¼šä¸€è¡Œé…ç½®è§£å†³VSCodeå¡é¡¿ä¸TSç±»å‹å´©æºƒ</h2>
<h3 data-id="heading-1">å‰è¨€</h3>
<p>åœ¨ç°ä»£å‰ç«¯å¼€å‘ä¸­ï¼ŒMonorepoå·²æˆä¸ºç®¡ç†å¤§å‹é¡¹ç›®çš„æµè¡Œæ–¹æ¡ˆã€‚å®ƒé€šè¿‡å°†å¤šä¸ªé¡¹ç›®ã€åº“å’Œç»„ä»¶é›†ä¸­åœ¨åŒä¸€ä¸ªä»£ç ä»“åº“ä¸­ï¼Œç®€åŒ–äº†ä¾èµ–ç®¡ç†å’Œä»£ç å¤ç”¨ã€‚ç„¶è€Œï¼Œéšç€é¡¹ç›®è§„æ¨¡çš„æ‰©å¤§ï¼ŒMonorepoä¹Ÿå¯èƒ½å¸¦æ¥ä¸€äº›æ„æƒ³ä¸åˆ°çš„æ€§èƒ½é—®é¢˜ã€‚</p>
<p>æœ¬æ–‡å°†åˆ†äº«ä¸€ä¸ªæˆ‘åœ¨å®é™…é¡¹ç›®ä¸­é‡åˆ°çš„æ€§èƒ½å™©æ¢¦ï¼Œä»¥åŠå¦‚ä½•é€šè¿‡ä¸€è¡Œç®€å•çš„VSCodeé…ç½®è§£å†³è¿™ä¸ªé—®é¢˜çš„ç»å†ã€‚</p>
<h3 data-id="heading-2">é—®é¢˜èƒŒæ™¯</h3>
<p>æˆ‘æ‰€åœ¨çš„é¡¹ç›®æ˜¯ä¸€ä¸ªå¤§å‹çš„Monorepoï¼Œå…¶ä¸­åŒ…å«ä¸€ä¸ªä¸»é¡¹ç›®Aï¼Œä»¥åŠä»Aä¸­æ‹†åˆ†å‡ºçš„å­åŒ…Bå’Œåå‡ ä¸ªç»„ä»¶åº“C-Gã€‚é¡¹ç›®çš„å¼•ç”¨å…³ç³»å˜å¾—éå¸¸å¤æ‚ï¼ŒTypeScripté…ç½®ä¸ºç›´æ¥è¯»å–æºç è¿›è¡Œç±»å‹ç”Ÿæˆï¼Œè€Œä¸æ˜¯ä¾èµ–æ‰“åŒ…åçš„<code>dist</code>æ–‡ä»¶ã€‚</p>
<p>æ‹†åŒ…ä¹‹åï¼ŒVSCodeçš„æ€§èƒ½æ€¥å‰§ä¸‹é™ï¼Œå‡ºç°äº†ä»¥ä¸‹é—®é¢˜ï¼š</p>
<ul>
<li><strong>è·¯å¾„è·³è½¬å¡é¡¿</strong>ï¼šæ¯æ¬¡å®‰è£…ä¾èµ–åï¼Œç¬¬ä¸€æ¬¡è·³è½¬åˆ°å®šä¹‰éœ€è¦ç­‰å¾…é•¿è¾¾ä¸€åˆ†é’Ÿçš„åˆå§‹åŒ–æ—¶é—´</li>
<li><strong>ç±»å‹æ¨æ–­å´©æºƒ</strong>ï¼šTypeScriptç±»å‹æç¤ºç»å¸¸å¤±æ•ˆï¼Œå¯¼è‡´å‡ºç°å¤§é‡<code>unsafe type error</code></li>
<li><strong>ç¼–è¾‘å™¨å‡æ­»</strong>ï¼šéœ€è¦é¢‘ç¹é‡å¯VSCodeæ‰èƒ½æ¢å¤æ­£å¸¸</li>
</ul>
<p>æˆ‘å°è¯•äº†å„ç§æ–¹æ³•ï¼ŒåŒ…æ‹¬è°ƒæ•´TypeScripté…ç½®ã€å‡çº§VSCodeã€ç¦ç”¨æ’ä»¶ç­‰ï¼Œä½†éƒ½æ— æµäºäº‹ã€‚</p>
<h3 data-id="heading-3">é—®é¢˜æ ¹æº</h3>
<p>ç»è¿‡åå¤æ’æŸ¥ï¼Œæˆ‘å‘ç°é—®é¢˜çš„æ ¹æºåœ¨äºVSCodeçš„<strong>æ–‡ä»¶ç›‘å¬æœºåˆ¶</strong>ã€‚</p>
<p>ç”±äºæˆ‘ä»¬çš„TypeScripté…ç½®æ˜¯ç›´æ¥è¯»å–æºç ï¼Œ<code>dist</code>ç›®å½•ä¸‹çš„æ‰“åŒ…æ–‡ä»¶å®é™…ä¸Šå¯¹ç±»å‹æ¨æ–­æ˜¯æ— ç”¨çš„ã€‚ç„¶è€Œï¼ŒVSCodeçš„æ–‡ä»¶ç›‘å¬å™¨ï¼ˆFile Watcherï¼‰é»˜è®¤ä¼šç›‘æ§é¡¹ç›®ä¸­çš„æ‰€æœ‰æ–‡ä»¶å˜åŒ–ï¼ŒåŒ…æ‹¬<code>dist</code>ç›®å½•ã€‚</p>
<p>å½“æˆ‘ä»¬åœ¨Monorepoä¸­è¿›è¡Œæ„å»ºæˆ–å®‰è£…ä¾èµ–æ—¶ï¼Œå¤§é‡çš„<code>dist</code>æ–‡ä»¶ä¼šè¢«ç”Ÿæˆæˆ–ä¿®æ”¹ï¼Œå¯¼è‡´VSCodeçš„æ–‡ä»¶ç›‘å¬å™¨ä¸å ªé‡è´Ÿï¼Œå ç”¨äº†å¤§é‡ç³»ç»Ÿèµ„æºï¼Œä»è€Œå¼•å‘äº†ä¸Šè¿°æ€§èƒ½é—®é¢˜ã€‚</p>
<h3 data-id="heading-4">è§£å†³æ–¹æ¡ˆ</h3>
<p>æœ€ç»ˆï¼Œæˆ‘é€šè¿‡åœ¨é¡¹ç›®çš„<code>.vscode/settings.json</code>æ–‡ä»¶ä¸­æ·»åŠ ä¸€è¡Œç®€å•çš„é…ç½®ï¼Œå½»åº•è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"files.watcherExclude"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"**/dist/**"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>è¿™è¡Œé…ç½®çš„ä½œç”¨æ˜¯å‘Šè¯‰VSCodeçš„æ–‡ä»¶ç›‘å¬å™¨<strong>å¿½ç•¥æ‰€æœ‰<code>dist</code>ç›®å½•ä¸‹çš„æ–‡ä»¶å˜åŒ–</strong>ã€‚</p>
<h4 data-id="heading-5">ä¸ºä»€ä¹ˆè¿™ä¸ªé…ç½®æœ‰æ•ˆï¼Ÿ</h4>
<ol>
<li><strong>å‡å°‘ä¸å¿…è¦çš„ç›‘å¬</strong>ï¼šæ’é™¤äº†å¯¹<code>dist</code>ç›®å½•çš„ç›‘å¬ï¼Œå¤§å¤§å‡å°‘äº†VSCodeéœ€è¦å¤„ç†çš„æ–‡ä»¶å˜åŒ–äº‹ä»¶</li>
<li><strong>é‡Šæ”¾ç³»ç»Ÿèµ„æº</strong>ï¼šé™ä½äº†CPUå’Œå†…å­˜å ç”¨ï¼Œä½¿VSCodeèƒ½å¤Ÿæ›´æµç•…åœ°è¿è¡Œ</li>
<li><strong>ä¸“æ³¨æºç </strong>ï¼šè®©VSCodeä¸“æ³¨äºç›‘å¬æºç æ–‡ä»¶ï¼Œç¡®ä¿ç±»å‹æ¨æ–­å’Œè·¯å¾„è·³è½¬çš„æ€§èƒ½</li>
</ol>
<h3 data-id="heading-6">æ€»ç»“</h3>
<p>å¦‚æœä½ ä¹Ÿåœ¨ä½¿ç”¨Monorepoï¼Œå¹¶ä¸”é‡åˆ°äº†ç±»ä¼¼çš„æ€§èƒ½é—®é¢˜ï¼Œä¸å¦¨æ£€æŸ¥ä¸€ä¸‹ä½ çš„VSCodeé…ç½®ã€‚é€šè¿‡<code>files.watcherExclude</code>é…ç½®ï¼Œæ’é™¤æ‰ä¸éœ€è¦ç›‘å¬çš„ç›®å½•ï¼Œå¯èƒ½ä¼šç»™ä½ å¸¦æ¥æ„æƒ³ä¸åˆ°çš„æƒŠå–œã€‚</p>
<p>è¿™ä¸ªç»å†å‘Šè¯‰æˆ‘ä»¬ï¼Œæœ‰æ—¶å€™è§£å†³å¤æ‚é—®é¢˜çš„ç­”æ¡ˆå¯èƒ½å°±éšè—åœ¨æœ€ç®€å•çš„é…ç½®ä¸­ã€‚å¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¸®åŠ©ä½ æ‘†è„±Monorepoæ€§èƒ½å™©æ¢¦ï¼Œäº«å—æ›´æµç•…çš„å¼€å‘ä½“éªŒï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€React Nativeã€‘å¦‚ä½•åœ¨å¼€å‘ä¸­ä½¿ç”¨Appwrite]]></title>    <link>https://juejin.cn/post/7572390974459871232</link>    <guid>https://juejin.cn/post/7572390974459871232</guid>    <pubDate>2025-11-14T12:18:54.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572390974459871232" data-draft-id="7572408208263004200" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€React Nativeã€‘å¦‚ä½•åœ¨å¼€å‘ä¸­ä½¿ç”¨Appwrite"/> <meta itemprop="keywords" content="React Native"/> <meta itemprop="datePublished" content="2025-11-14T12:18:54.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸€å¤´å°é¹¿"/> <meta itemprop="url" content="https://juejin.cn/user/1216481943637741"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€React Nativeã€‘å¦‚ä½•åœ¨å¼€å‘ä¸­ä½¿ç”¨Appwrite
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1216481943637741/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸€å¤´å°é¹¿
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-14T12:18:54.000Z" title="Fri Nov 14 2025 12:18:54 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">ä¸€ã€ä¸ºä»€ä¹ˆé€‰æ‹©Appwrite</h3>
<p>æœ€è¿‘åœ¨åšReact nativeçš„é¡¹ç›®ï¼Œç ”ç©¶åç«¯çš„æ—¶å€™è€ƒè™‘äº†å‡ ç§æ–¹æ³•ï¼Œå…ˆæ˜¯æŒ‰ç…§ä»¥å¾€çš„æ–¹æ³•è‡ªå·±æ­äº†node+mysqlçš„æ•°æ®åº“ï¼Œä½†æ˜¯å®é™…ä½¿ç”¨çš„æ—¶å€™å‘ç°å¾ˆéº»çƒ¦ï¼š</p>
<ul>
<li>ä¸€æ–¹é¢æ˜¯ä½¿ç”¨äº†expoæ¡†æ¶ï¼Œæ¯æ¬¡å¯åŠ¨é¡¹ç›®çš„æ—¶å€™ï¼Œ<strong>expoå’ŒnodeæœåŠ¡å™¨éƒ½éœ€è¦å•ç‹¬è·‘</strong>ï¼Œå¼€å‘æµç¨‹å˜å¾—å¾ˆå¤æ‚ã€‚</li>
<li>ä¸€æ–¹é¢æ˜¯åœ¨æ‰‹æœºç«¯é¢„è§ˆçš„æ—¶å€™<strong>ç¯å¢ƒéå¸¸ä¸ç¨³å®š</strong>ï¼Œå„ç§æ•°æ®çš„æ›´æ–°éƒ½ä¸åŠæ—¶ï¼Œé™ä½äº†å¼€å‘æ•ˆç‡ã€‚ç”±äº Expo è¿è¡Œåœ¨æ‰‹æœºä¸­ï¼Œè€Œæœ¬åœ° Node + MySQL è·‘åœ¨ç”µè„‘ä¸Šï¼Œæ‰‹æœºå¹¶ä¸èƒ½ç›´æ¥è®¿é—® <code>localhost</code>ï¼Œè¿™å¯¼è‡´å¼€å‘è¿‡ç¨‹ä¸­æ¯æ¬¡è¯·æ±‚æ•°æ®éå¸¸ä¸ç¨³å®šã€‚</li>
</ul>
<p>å‚è€ƒäº†å…¶ä»–çš„é¡¹ç›®ï¼Œæœ€åé€‰ç”¨äº†appwriteï¼Œå®ƒæŠŠæ•°æ®åº“ã€ç”¨æˆ·ã€æƒé™ã€æ—¥å¿—ï¼Œåšæˆäº†å¯è§†åŒ–æ§åˆ¶å°ã€‚æˆ‘ä»¬åªéœ€è¦åœ¨<strong>ç½‘é¡µä¸Š</strong>å°±å¯ä»¥åœ¨æ§åˆ¶å°ä¸­åˆ›å»ºæ•°æ®è¡¨ã€è‡ªåŠ¨ç”Ÿæˆæµ‹è¯•æ•°æ®ã€å¼€å…³æƒé™å’ŒæŸ¥çœ‹æ—¥å¿—ï¼Œé›†åˆäº†å¾ˆå¤šæˆ‘ä»¬æ‰€éœ€çš„åŠŸèƒ½ï¼Œå¹¶ä¸”æ˜¯<strong>å¼€æº</strong>çš„ï¼Œå¯¹äºåšdemoè€Œè¨€ååˆ†ä¾¿æ·ã€‚</p>
<h3 data-id="heading-1">äºŒã€Appwriteä»‹ç»</h3>
<p>å…³äºAppwriteï¼Œå¯ä»¥è¿™æ ·ä»‹ç»ï¼šAppwrite æ˜¯ä¸€ä¸ªå¼€ç®±å³ç”¨çš„åç«¯æœåŠ¡å¹³å°ï¼Œå°†åç«¯å¤æ‚çš„åŠŸèƒ½æ¨¡å—åŒ–ï¼Œè®©å¼€å‘è€…ä¸ç”¨æ‰‹å†™åç«¯ä»£ç ï¼Œåœ¨ç½‘é¡µä¸Šå°±å¯ä»¥å®ç°è´¦å·ã€æ•°æ®åº“ã€äº‘å‡½æ•°ã€å¼€å‘æ—¥å¿—ç­‰åŠŸèƒ½ã€‚</p>
<ul>
<li>å®ƒæ˜¯å¼€æºçš„ï¼Œå¯ä»¥è‡ªå·±éƒ¨ç½²ï¼Œä¹Ÿå¯ä»¥ç›´æ¥ç”¨å®˜æ–¹çš„ Cloud æœåŠ¡ã€‚</li>
<li>æ”¯æŒ Web / iOS / Android / Flutter / React Native / Next.js / Vue ç­‰å‰ç«¯æ¡†æ¶ã€‚</li>
</ul>
<p>Appwrite ä¸»è¦åŠŸèƒ½æ¨¡å—ï¼š</p>





























<table><thead><tr><th>æ¨¡å—</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>Auth</td><td>ç™»å½•æ³¨å†Œã€OAuthã€JWT ç®¡ç†</td></tr><tr><td>Database</td><td>ç±»ä¼¼æ–‡æ¡£æ•°æ®åº“ï¼Œæ”¯æŒæƒé™æ§åˆ¶</td></tr><tr><td>Storage</td><td>å›¾ç‰‡/æ–‡ä»¶å­˜å‚¨ã€è®¿é—®æƒé™</td></tr><tr><td>Functions</td><td>äº‘å‡½æ•°ï¼Œå¯ä»¥è·‘ server é€»è¾‘</td></tr><tr><td>Realtime</td><td>æ•°æ®å®æ—¶ç›‘å¬ï¼ˆèŠå¤©å®¤ã€ç‚¹èµæ•°å®æ—¶æ›´æ–°ï¼‰</td></tr></tbody></table>
<h3 data-id="heading-2">ä¸‰ã€ä¼˜ç¼ºç‚¹</h3>
<h4 data-id="heading-3">ä¼˜ç‚¹</h4>
<ul>
<li>
<p>ç•Œé¢ç®€æ´ç¾è§‚ï¼Œæ§åˆ¶å°UIèˆ’é€‚ï¼Œæ“ä½œç®€æ´æ˜“æ‡‚</p>
</li>
<li>
<p>æƒé™æ¨¡å‹ç›´æ¥å¯è§†åŒ–ï¼Œå¯¹äºæ•°æ®ä¸­çš„æ¯ä¸ªè¡¨çš„æƒé™ï¼Œåˆ›å»ºã€è¯»ã€æ”¹éƒ½å¯ä»¥ç›´æ¥GUIè°ƒæ•´ã€‚Appwriteç”¨UIæŠŠæƒé™ï¼ˆowner / user / role / team / publicï¼‰åšæˆäº†å¯è§†åŒ–ç•Œé¢ã€‚</p>
</li>
<li>
<p>APIç®€æ´ç›´è§‚ï¼šåœ¨ç¨‹åºä¸­ä½¿ç”¨APIå‘appwriteä¸­å‘èµ·è¯·æ±‚çš„æ—¶å€™ï¼Œä½¿ç”¨çš„APIååˆ†ç®€æ´æ˜“æ‡‚ï¼Œå¥½ä¸Šæ‰‹</p>
<ul>
<li><code>listDocuments()</code> â†’ è·å–æ–‡æ¡£åˆ—è¡¨</li>
<li><code>createDocument()</code> â†’ åˆ›å»ºæ–‡æ¡£</li>
<li><code>updateDocument()</code> â†’ æ›´æ–°æ–‡æ¡£</li>
</ul>
</li>
</ul>
<h4 data-id="heading-4">ç¼ºç‚¹</h4>
<ul>
<li>ç›¸å…³çš„èµ„æ–™ä¸å¤šï¼Œå¼€å‘è¿‡ç¨‹ä¸­ä¼šé‡åˆ°çš„é—®é¢˜æœ‰æŸ¥ä¸åˆ°çš„å¯èƒ½ï¼Œéœ€è¦è‡ªå·±æ‘¸ç´¢ã€‚æ¯”å¦‚æˆ‘åœ¨å¼€å‘è¿‡ç¨‹ä¸­é‡åˆ°Appwriteçš„æ›´æ–°ï¼Œæ–°ç‰ˆæœ¬ä¸­å¼•å…¥äº†tableçš„æ¦‚å¿µï¼Œä½†æ˜¯åœ¨å…ˆå‰çš„ä¸€äº›æ–‡æ¡£ä¸­ä»‹ç»çš„éƒ½æ˜¯attributeï¼Œè®©æˆ‘ç ”ç©¶äº†å¥½ä¸€ä¼šå“ˆå“ˆå“ˆã€‚</li>
<li>å¯¹äºç›¸å…³æ¦‚å¿µéœ€è¦ä¸€å®šç†è§£ï¼šAppwriteä¸æ˜¯å•çº¯çš„æ•°æ®åº“ï¼Œè™½ç„¶ç±»ä¼¼ Firebaseï¼Œä½†å…¶<code>Collections</code>ã€<code>Documents</code> ç­‰æ•°æ®æ¨¡å‹ä»éœ€è¦ä¸€ç‚¹æ—¶é—´å­¦ä¹ ã€‚</li>
<li>Appwriteçš„å­—æ®µæ˜¯å¼ºç»“æ„åŒ–çš„ï¼Œåˆ›å»ºåä¸èƒ½ä¿®æ”¹å­—æ®µåã€‚è¡¨çš„ç»“æ„ä¸€å®šè¦è®¾è®¡å¥½ï¼Œå¦åˆ™åæœŸç»´æŠ¤ä¼šå¾ˆå›°éš¾ã€‚</li>
</ul>
<h3 data-id="heading-5">å››ã€å¦‚ä½•ä½¿ç”¨</h3>
<h4 data-id="heading-6">1. åˆ›å»º Appwrite é¡¹ç›®</h4>
<ul>
<li>åœ¨Appwriteç½‘é¡µä¸­æ‰“å¼€consoleï¼Œåˆ›å»ºä¸€ä¸ªæ–°é¡¹ç›®ï¼Œè®¾ç½®å¥½å¹³å°</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f7e99ea7453d4b0ea1869b8ea37f6b2c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5aS05bCP6bm_:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763727630&amp;x-signature=OVZ%2FS%2FMk%2FHh7rQaUDeL2wRMZCNo%3D" alt="1.png" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/47f8bf8a270b4d7ea04ed01c3d0c1c46~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5aS05bCP6bm_:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763727630&amp;x-signature=%2BxML6drb2646ZxG6nl%2BXDLvHJoQ%3D" alt="2.png" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/14e63f4135b342e68577dcc54c289484~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5aS05bCP6bm_:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763727630&amp;x-signature=shxPSDWMnUdi4%2FjbFeUBPXVGXPw%3D" alt="3.png" loading="lazy"/></p>
<ul>
<li>ä½ å¯ä»¥å…ˆè¿›è¡Œç¬¬äºŒç‚¹ä¸­æåˆ°çš„é…ç½®ï¼Œä¹Ÿå¯ä»¥å…ˆåˆ›å»ºæ•°æ®åº“å’Œè¡¨ã€‚</li>
<li>PSï¼šå¦‚æœä½ çœ‹çš„æ˜¯å…ˆå‰çš„æ•™ç¨‹ï¼Œåœ¨åˆ›å»ºå®Œæ•°æ®åº“åä»–ä»¬ä¼šå¼€å§‹åˆ›å»º 'Collection'ï¼Œåœ¨æ›¾ç»ç‰ˆæœ¬çš„Appwriteä¸­ï¼Œåœ¨Databaseä¸‹é¢æ˜¯'Collection'ï¼Œç„¶ååœ¨Collectionä¸­åˆ›å»º'Attribute'ä½œä¸ºæ•°æ®ã€‚Collectionä¼šæœ‰IDï¼ˆæ˜¯ä¸€ä¸²å­—æ¯+æ•°å­—çš„æ ¼å¼ï¼‰ï¼Œéœ€è¦å†™åœ¨æ–‡ä»¶é‡Œï¼Œä½†æ˜¯æ–°ç‰ˆæœ¬å–æ¶ˆäº†'Collection'çš„æ¦‚å¿µï¼Œæ›´æ¢ä¸º'Table'ï¼Œæ›´è´´è¿‘äºæ•°æ®åº“çš„é€»è¾‘ï¼Œæ–¹ä¾¿ä½ åˆ›å»ºæ•°æ®ã€‚</li>
</ul>
<h4 data-id="heading-7">2.æ¥ä¸‹æ¥æŒ‰ç…§ç½‘ç«™ç»™å‡ºçš„é¡ºåºè¿›è¡Œé¡¹ç›®é…ç½®</h4>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/822c4d46c13a4d5785d748fbce4259e7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5aS05bCP6bm_:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763727630&amp;x-signature=RiZalj%2FnQTyCjLUycUIht%2FNwE%2F8%3D" alt="4.png" loading="lazy"/></p>
<ul>
<li>åœ¨ç¼–è¯‘å™¨ä¸­æ‰“å¼€ç»ˆç«¯ï¼Œå®‰è£…Appwrite</li>
</ul>

<pre><code class="hljs language-bash" lang="bash">git <span class="hljs-built_in">clone</span> https://github.com/appwrite/starter-for-react-native
<span class="hljs-built_in">cd</span> starter-for-react-native
</code></pre>
<ul>
<li>åœ¨.envæ–‡ä»¶ä¸­æ·»åŠ ä½ çš„Appwriteç›¸å…³IDï¼ˆé¡¹ç›®IDã€æ•°æ®åº“IDã€è¡¨ID......ï¼‰ï¼Œè¿™æ˜¯è¿æ¥å®¢æˆ·ç«¯çš„é’¥åŒ™</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a9500fec9d174914a4e123947d4b7e2e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5aS05bCP6bm_:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763727630&amp;x-signature=Vmyl0GEdWYCfjoMovqIcuNwVT5w%3D" alt="env.png" loading="lazy"/></p>
<p><em>æ³¨æ„</em>ï¼šåœ¨å…ˆå‰ç‰ˆæœ¬ä¸­éœ€è¦å†™ä¸Šæ¯ä¸€ä¸ª'Collection'çš„IDï¼ˆéƒ½æ˜¯æ•°å­—+å­—æ¯çš„å½¢å¼ï¼‰ï¼Œæœ‰äº›å¤æ‚ä¸”ä¸å¥½è¾¨åˆ«ï¼Œç°åœ¨ä½ åªéœ€è¦å†™ä¸Šä½ çš„æ•°æ®åº“IDï¼Œå‰©ä¸‹çš„è¡¨çš„IDéƒ½å’Œè¡¨åç›¸åŒï¼Œå¤§å¤§æ–¹ä¾¿äº†æˆ‘ä»¬ã€‚æ›´æ–°åï¼Œä½ ç”šè‡³å¯ä»¥ä¸ç”¨æå‰å£°æ˜è¡¨çš„IDï¼Œè€Œæ˜¯åœ¨ä½¿ç”¨æ—¶ç›´æ¥çµæ´»è¿ç”¨ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/08f1f7ef021045819ed085277c6c95c8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5aS05bCP6bm_:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763727630&amp;x-signature=TpzuRju%2BkJjQTWES4NWj%2BZ6sJs8%3D" alt="5.png" loading="lazy"/></p>
<ul>
<li>ä¸è¦å¿˜è®°è°ƒæ•´ä½ çš„è¡¨çš„ä½¿ç”¨æƒé™ï¼Œå¦åˆ™è¯·æ±‚çš„æ—¶å€™ä¼šå› ä¸ºæ²¡æœ‰æƒé™è€Œè¯·æ±‚å¤±è´¥</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c01ce1308da842d58006744e562cc289~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5aS05bCP6bm_:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763727630&amp;x-signature=8aXjQVdiqX52zl1f6ojyivMY4vQ%3D" alt="settings.png" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/521b314ab35a4a1ea34d800f4e92e83a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5aS05bCP6bm_:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763727630&amp;x-signature=J5TlKuxpRLhxv1rBLlXsWpOPrFk%3D" alt="permission.png" loading="lazy"/></p>
<h4 data-id="heading-8">3. åœ¨appwrite.tsä¸­åˆå§‹åŒ– Client</h4>
<pre><code class="hljs language-ini" lang="ini">import { Client, Databases } from 'appwrite'<span class="hljs-comment">;</span>
â€‹
const <span class="hljs-attr">DATABASE_ID</span> = process.env.EXPO_PUBLIC_APPWRITE_DATABASE_ID!<span class="hljs-comment">;</span>
const <span class="hljs-attr">ENDPOINT</span> = process.env.EXPO_PUBLIC_APPWRITE_ENDPOINT!<span class="hljs-comment">;</span>
const <span class="hljs-attr">USERS_TABLE_ID</span> = process.env.EXPO_PUBLIC_APPWRITE_USERS_TABLE_ID!<span class="hljs-comment">;</span>
const <span class="hljs-attr">NOTES_TABLE_ID</span> = process.env.EXPO_PUBLIC_APPWRITE_NOTES_TABLE_ID!<span class="hljs-comment">;</span>
â€‹
export const <span class="hljs-attr">client</span> = new Client()
 Â   .setEndpoint(ENDPOINT) // https://cloud.appwrite.io/v1
 Â   .setProject(PROJECT_ID)<span class="hljs-comment">;</span>
â€‹
export const <span class="hljs-attr">databases</span> = new Databases(client)<span class="hljs-comment">;</span>
</code></pre>
<h4 data-id="heading-9">4. è¯»å†™æ•°æ®åº“</h4>
<p>æƒ³è¦ä»æ•°æ®åº“ä¸­è·å–æ•°æ®ï¼Œå°±éœ€è¦åœ¨fetchæ–¹æ³•ä¸­ä½¿ç”¨listDocuments()ã€‚</p>
<p><code>listDocuments()</code> çš„ä½œç”¨å°±æ˜¯ï¼š<strong>ä»æŸä¸ª collection é‡ŒæŠŠæ•°æ®æ‹‰å‡ºæ¥</strong>ã€‚ä¼ å…¥çš„ä¸¤ä¸ªå‚æ•°åˆ†åˆ«æ˜¯ä½ åœ¨Appwriteä¸­çš„Databaseçš„IDå’Œ Tableçš„IDï¼Œé»˜è®¤è·å–åˆ°è¡¨ä¸­çš„å…¨éƒ¨æ•°æ®ã€‚</p>
<p>æƒ³è¦åšç²¾ç»†åŒ–çš„ç­›é€‰ï¼Œå¯ä»¥ä½¿ç”¨Queryæ¥è¿›è¡Œæ¡ä»¶é€‰æ‹©ã€‚</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">const</span> <span class="hljs-selector-tag">res</span> = <span class="hljs-selector-tag">await</span> <span class="hljs-selector-tag">databases</span><span class="hljs-selector-class">.listDocuments</span>(
 Â <span class="hljs-string">"databaseId"</span>,
 Â <span class="hljs-string">"tableId"</span>,
  [
 Â  Â Query.<span class="hljs-built_in">equal</span>(<span class="hljs-string">"userId"</span>, currentUserId),
 Â  Â Query.<span class="hljs-built_in">orderDesc</span>(<span class="hljs-string">"$createdAt"</span>),
 Â  Â Query.<span class="hljs-built_in">limit</span>(<span class="hljs-number">20</span>),
  ]
);
</code></pre>
<p>è¿™æ®µç­‰ä»·äºSQLä¸­çš„'WHERE userId = xxx ORDER BY createdAt DESC LIMIT 20'ã€‚</p>
<p><strong>æ¡ä»¶ç­›é€‰</strong>ï¼š</p>
<p>Queryçš„å¸¸ç”¨æ–¹æ³•æœ‰ï¼š</p>
<ul>
<li>Query.equal('userId', '123')ç­‰ä»·äºuserId == '123'ï¼ˆå¯ä»¥ç”¨äºè·å–æŸäº›ç±»å‹çš„æ•°æ®ï¼Œæˆ–æ˜¯æŸäº›ç”¨æˆ·çš„æ•°æ®ï¼‰</li>
<li>Query.between('age', 18, 30)ç­‰ä»·äºage between 18 and 30 (inclusive)</li>
<li>Query.contains('tags', 'holiday') ç­‰ä»·äºarray/string contains 'holiday'</li>
<li>Query.orderDesc('$createdAt') æ˜¯æŒ‰åˆ›å»ºæ—¶é—´é™åº</li>
<li>Query.orderAsc('price') æ˜¯æŒ‰ price å‡åº</li>
<li>Query.limit(20)æ¯é¡µ 20 æ¡</li>
<li>Query.offset(40) è·³è¿‡å‰ 40 æ¡ï¼ˆé¡µç å¼åˆ†é¡µï¼‰</li>
</ul>
<p><strong>è¿”å›ç»“æœ</strong>ï¼š</p>
<p><code>listDocuments</code> è¿™ä¸ªæ–¹æ³•è¿”å›çš„ç»“æ„é‡Œé€šå¸¸åŒ…å« <code>total</code>ï¼ˆç¬¦åˆæ¡ä»¶çš„æ€»æ¡æ•°ï¼‰å’Œ <code>documents</code>ï¼ˆå½“å‰é¡µæ•°ç»„ï¼‰ã€‚å¦‚æœæ•°æ®é‡å¾ˆå¤§ï¼Œæƒ³è¦åšæ— é™æ»šåŠ¨çš„é¡µé¢ï¼Œéœ€è¦ä½¿ç”¨åˆ†é¡µæœºåˆ¶ï¼Œå¯ä»¥å‚è€ƒæˆ‘çš„å¦ä¸€ç¯‡æ–‡ç« ã€‚
<a href="https://juejin.cn/post/7569576952232624147" target="_blank" title="https://juejin.cn/post/7569576952232624147">ã€React Native+Appwriteã€‘è·å–æ•°æ®æ—¶çš„åˆ†é¡µæœºåˆ¶</a></p>
<p>ä½¿ç”¨ä¾‹å­ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> databases.<span class="hljs-title function_">listDocuments</span>(<span class="hljs-string">'dbId'</span>, <span class="hljs-string">'collectionId'</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(res.<span class="hljs-property">documents</span>);
â€‹
<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getUsers</span>(<span class="hljs-params">page = <span class="hljs-number">1</span>, limit = <span class="hljs-number">15</span></span>) {
 Â  Â <span class="hljs-keyword">const</span> offset = (page - <span class="hljs-number">1</span>) * limit;
â€‹
 Â  Â <span class="hljs-keyword">try</span> {
â€‹
 Â  Â  Â  Â <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> databases.<span class="hljs-title function_">listDocuments</span>(<span class="hljs-variable constant_">DATABASE_ID</span>, <span class="hljs-variable constant_">USERS_TABLE_ID</span>, [
 Â  Â  Â  Â  Â  Â <span class="hljs-title class_">Query</span>.<span class="hljs-title function_">limit</span>(limit),
 Â  Â  Â  Â  Â  Â <span class="hljs-title class_">Query</span>.<span class="hljs-title function_">offset</span>(offset),
 Â  Â  Â  Â  Â  Â <span class="hljs-title class_">Query</span>.<span class="hljs-title function_">equal</span>(<span class="hljs-string">"sex"</span>, <span class="hljs-string">"male"</span>),
 Â  Â  Â   ]);
 Â  Â  Â  Â <span class="hljs-comment">//ç­‰ä»·äºè·³è¿‡offsetä¸ªæ•°æ®ï¼Œæ‰¾åˆ°limitä¸ª'sex'å­—æ®µç­‰äº'male'çš„æ•°æ®</span>
â€‹
â€‹
 Â  Â  Â  Â <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æˆåŠŸè¿æ¥ï¼'</span>)
 Â  Â  Â  Â <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è·å–åˆ°çš„ç”¨æˆ·æ•°æ®:'</span>, result)
â€‹
 Â  Â  Â  Â <span class="hljs-keyword">return</span> result
 Â   } <span class="hljs-keyword">catch</span> (error) {
 Â  Â  Â  Â <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'è¿æ¥ Appwrite å¤±è´¥:'</span>, error)
 Â   }
}
â€‹
</code></pre>
<h4 data-id="heading-10">5. ReactNative ä¸­ä¸€äº›å®¹æ˜“æŠ¥é”™çš„ç‚¹</h4>
<h5 data-id="heading-11"><strong>Localhost Endpointé—®é¢˜ï¼š</strong></h5>
<p>æˆ‘ä»¬åœ¨é…ç½®å®¢æˆ·ç«¯çš„æ—¶å€™ï¼Œéœ€è¦é…ç½®Endpointå’ŒProjectï¼Œå¦‚æœå†™ä¸‹<code>http://localhost/v1</code>ä½œä¸ºEndpointï¼Œåç»­åœ¨æ‰‹æœºç«¯ä¸Šè¿è¡Œé¡¹ç›®çš„æ—¶å€™å¯èƒ½ä¼šå‡ºç°è¯·æ±‚å¤±è´¥çš„é”™è¯¯ï¼Œè¿™æ˜¯å› ä¸ºé¡¹ç›®ä¸­çš„<code>localhost</code>æŒ‡çš„æ˜¯<strong>è¿è¡Œè¯¥è¿›ç¨‹çš„è®¾å¤‡æœ¬èº«</strong>ã€‚æ‰€ä»¥åœ¨æ‰‹æœºä¸Šçš„<code>http://localhost/v1</code>ä¼šå»å°è¯•æ‰‹æœºæœ¬æœºçš„ç«¯å£ï¼Œè€Œä¸æ˜¯ç”µè„‘ä¸Šçš„AppwriteæœåŠ¡å™¨ï¼Œä¼šå¯¼è‡´ç½‘ç»œè¯·æ±‚å¤±è´¥ã€‚</p>
<p>é‚£ä¹ˆå¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿ</p>
<p>â‘ <em>Appwrite Cloud</em>ï¼šæŠŠEndpointè®¾ç½®æˆ<code>https://cloud.appwrite.io/v1</code>ï¼Œæ“ä½œç®€å•ã€é€‚åˆExpoä½¿ç”¨ã€‚</p>
<ul>
<li>è¿™æ˜¯Appwrite å®˜æ–¹æ‰˜ç®¡çš„äº‘å¹³å°ï¼Œå®˜æ–¹å¸®ä½ æ‰˜ç®¡æœåŠ¡ã€æ•°æ®åº“ã€æ–‡ä»¶ç­‰ã€‚</li>
<li>æ— éœ€æ­å»ºåç«¯æˆ–æœåŠ¡å™¨</li>
<li>æ‰‹æœºç«¯å¤©ç„¶å¯è®¿é—®</li>
<li>ç¨³å®šã€æœ€æ¥è¿‘ç”Ÿäº§ç¯å¢ƒï¼Œå…å»äº† IP å˜åŒ–çš„çƒ¦æ¼</li>
</ul>
<p>å¯ä»¥ç†è§£ä¸º Appwrite çš„ <strong>â€œFirebase æ¨¡å¼â€</strong> ï¼šæ‰€æœ‰æœåŠ¡éƒ½åœ¨äº‘ç«¯ï¼Œç”±å®˜æ–¹ç»´æŠ¤ã€‚</p>
<p>é‚£ä¹ˆåœ¨ä¸Šæ–‡ä¸­Appwriteå®˜æ–¹ç»™å‡ºçš„Endpointæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿæ˜¯<code>https://fra.cloud.appwrite.io/v1</code>ï¼Œæ˜¯ç”±äºæˆ‘åœ¨åˆ›å»ºé¡¹ç›®æ—¶é€‰æ‹©äº†å¾·å›½æ³•å…°å…‹ç¦åŒºåŸŸï¼Œç³»ç»Ÿè‡ªåŠ¨ä¸ºæˆ‘åŠ å…¥äº†æ³•å…°å…‹ç¦çš„åœ°åŸŸæ ‡è¯†ä»£ç <code>fra</code>ï¼Œä¸åŠ çš„è¯å°±æ˜¯å…¨å±€çš„å…¥å£ã€‚</p>
<p><strong>æ€»ç»“ï¼š</strong></p>
<ul>
<li><code>https://cloud.appwrite.io/v1</code> æ˜¯ <em>å…¨çƒå…¥å£</em></li>
<li>è€Œ <code>https://fra.cloud.appwrite.io/v1</code> æ˜¯ <em>åŒºåŸŸå…¥å£</em></li>
<li>Cloud ä¼šè‡ªåŠ¨æŠŠä½ çš„é¡¹ç›®åˆ†é…åˆ°æŸä¸ªåŒºåŸŸã€‚</li>
</ul>
<p>â‘¡<em>ä½¿ç”¨å±€åŸŸç½‘IP</em>ï¼šå¦‚æœä½ åšæŒè‡ªå·±æ­ Appwriteï¼ˆæœ¬åœ°æˆ–å†…ç½‘æœåŠ¡å™¨ï¼‰ï¼Œå¯ä»¥ç”¨ä½ ç”µè„‘çš„å±€åŸŸç½‘ IP æ›¿ä»£ <code>localhost</code>ï¼Œå±€åŸŸç½‘IPå¯ä»¥åœ¨ Windows å‘½ä»¤è¡Œè¾“å…¥ <code>ipconfig</code>æŸ¥çœ‹ï¼ˆé€šå¸¸æ˜¯ <code>192.168.x.x</code>ï¼‰ã€‚ç„¶åæŠŠEndpointè®¾ç½®æˆ<code>http://192.168.x.x/v1</code>ã€‚</p>
<ul>
<li>ä½¿ç”¨çš„å‰ææ˜¯æ‰‹æœºå’Œç”µè„‘åœ¨åŒä¸€ä¸ªWiFiä¸‹</li>
<li>Appwrite å·²å…è®¸æ¥è‡ªå±€åŸŸç½‘çš„è®¿é—®</li>
</ul>
<p>â‘¢<em>å†…ç½‘ç©¿é€</em>ï¼šå¦‚æœä½ æƒ³è®©åˆ«äººè®¿é—®ä½ çš„æœ¬åœ°Appwriteï¼Œå¯ä»¥ä½¿ç”¨ngrokã€localtunnelã€Cloudflare Tunnelè¿›è¡Œå†…ç½‘ç©¿é€ã€‚æŠŠä½ æœ¬åœ°çš„æŸä¸ªç«¯å£æš´éœ²æˆä¸€ä¸ªå…¬ç½‘åœ°å€ï¼Œè¿™æ ·å¤–ç½‘è®¾å¤‡ï¼ˆå…¶ä»–äººçš„è®¾å¤‡ï¼‰å°±èƒ½è®¿é—®ä½ çš„æœ¬åœ°æœåŠ¡ï¼Œä¸éœ€è¦åœ¨è·¯ç”±å™¨ä¸Šåšç«¯å£æ˜ å°„æˆ–æ”¹ DNSã€‚</p>
<p>å‘½ä»¤ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs">ngrok http 80
</code></pre>
<p>ä¼šç”Ÿæˆä¸€ä¸ªå…¬ç½‘ URLï¼Œå¦‚ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">https:<span class="hljs-comment">//abc123.ngrok.io</span>
</code></pre>
<p>ç„¶åä½ å°±å¯ä»¥è¿™æ ·å†™ï¼š</p>
<pre><code class="hljs language-vbscript" lang="vbscript">.setEndpo<span class="hljs-built_in">int</span>(<span class="hljs-string">"https://abc123.ngrok.io/v1"</span>)
</code></pre>
<p>é€‚åˆå±•ç¤º demoã€ä¸´æ—¶ç»™åŒäº‹ä½¿ç”¨ã€‚</p>
<h5 data-id="heading-12"><strong>Expo å¼€å‘æœåŠ¡å™¨çš„ HTTPS è¦æ±‚</strong></h5>
<p>åœ¨ Expo Go åº”ç”¨ä¸­ï¼Œå¦‚æœä½ çš„ Appwrite Endpointä½¿ç”¨çš„æ˜¯è‡ªç­¾è¯ä¹¦çš„ HTTPS æˆ–çº¯ HTTPï¼Œå¯èƒ½ä¼šè¢«é˜»æ­¢ï¼Œå¯¼è‡´ <code>Network request failed</code> é”™è¯¯ã€‚è¿™æ˜¯å› ä¸ºExpo Go ä¸ºäº†å®‰å…¨ï¼Œå¯¹éåŠ å¯†æˆ–è¯ä¹¦ä¸å—ä¿¡ä»»çš„ HTTP è¯·æ±‚æœ‰ä¸¥æ ¼é™åˆ¶ã€‚</p>
<p><strong>è§£å†³æ–¹æ³•</strong>ï¼š</p>
<ul>
<li><strong>ä½¿ç”¨ Appwrite Cloud</strong>ï¼šè¿™æ˜¯æœ€ç®€å•çš„æ–¹æ³•ï¼Œå› ä¸ºå®ƒæä¾›äº†æœ‰æ•ˆçš„ HTTPS è¯ä¹¦ã€‚</li>
<li>ä½¿ç”¨ <code>expo start --tunnel</code>ï¼ˆé€šè¿‡éš§é“ç”Ÿæˆä¸€ä¸ªå¯è¢«æ‰‹æœºè®¿é—®çš„ https åœ°å€ï¼‰</li>
<li>ä½¿ç”¨ <code>ngrok http 80</code>ï¼ŒæŠŠ <code>http://localhost:80</code> æš´éœ²æˆ <code>https://xxxx.ngrok.io</code>ï¼Œç„¶åæŠŠ Appwrite endpoint è®¾ä¸º <code>https://xxxx.ngrok.io/v1</code>ã€‚</li>
</ul>
<h5 data-id="heading-13">RN æ²¡æœ‰ Browser API</h5>
<p>React Native è¿è¡Œåœ¨ JavaScriptCore æˆ– Hermes å¼•æ“ä¸­ï¼Œæ²¡æœ‰ DOM å’Œ BOMï¼Œæ‰€ä»¥è®¸å¤šçš„APIéƒ½æ²¡æœ‰ï¼š</p>
<ul>
<li>æ²¡æœ‰windowã€documentå¯¹è±¡</li>
<li>æ²¡æœ‰localStorageã€sessionStorage</li>
<li>æ²¡æœ‰Cookie API</li>
<li>æ²¡æœ‰XMLHttpRequestï¼ˆä½†æœ‰å…¼å®¹å®ç°ï¼‰</li>
<li>æ²¡æœ‰FormDataçš„å®Œæ•´å®ç°</li>
</ul>
<h3 data-id="heading-14">äº”ã€å®æˆ˜Demo</h3>
<p>åœ¨å®æˆ˜ä¸­ï¼Œæˆ‘çš„å†™æ³•æ˜¯ï¼šï¼ˆå‰ææ˜¯å·²ç»é…ç½®å¥½.envæ–‡ä»¶ï¼‰</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">//appwrite.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Client</span>, <span class="hljs-title class_">Databases</span>, <span class="hljs-title class_">Query</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"react-native-appwrite"</span>
â€‹
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">DATABASE_ID</span> = process.<span class="hljs-property">env</span>.<span class="hljs-property">EXPO_PUBLIC_APPWRITE_DATABASE_ID</span>!;
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">TABLE_ID</span> = process.<span class="hljs-property">env</span>.<span class="hljs-property">EXPO_PUBLIC_APPWRITE_TABLE_ID</span>!;
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">NOTES_TABLE_ID</span> = process.<span class="hljs-property">env</span>.<span class="hljs-property">EXPO_PUBLIC_APPWRITE_NOTES_TABLE_ID</span>!;
â€‹
â€‹
<span class="hljs-comment">//åˆå§‹åŒ–å®¢æˆ·ç«¯</span>
<span class="hljs-keyword">const</span> client = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Client</span>().<span class="hljs-title function_">setEndpoint</span>(<span class="hljs-string">'https://cloud.appwrite.io/v1'</span>).<span class="hljs-title function_">setProject</span>(process.<span class="hljs-property">env</span>.<span class="hljs-property">EXPO_PUBLIC_APPWRITE_PROJECT_ID</span>!)
â€‹
<span class="hljs-keyword">const</span> databases = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Databases</span>(client);
â€‹
<span class="hljs-comment">//è·å–æ•°æ®</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getNotes</span>(<span class="hljs-params">page = <span class="hljs-number">1</span>, limit = <span class="hljs-number">15</span></span>) {
 Â  Â 
 Â  Â <span class="hljs-comment">//åç§»é‡</span>
 Â  Â <span class="hljs-keyword">const</span> offset = (page - <span class="hljs-number">1</span>) * limit;
â€‹
 Â  Â <span class="hljs-keyword">try</span> {
â€‹
 Â  Â  Â  Â <span class="hljs-comment">//åç§»offsetæ¡ï¼Œè·å–limitä¸ª'type==plan'çš„æ•°æ®</span>
 Â  Â  Â  Â <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> databases.<span class="hljs-title function_">listDocuments</span>(<span class="hljs-variable constant_">DATABASE_ID</span>, <span class="hljs-variable constant_">NOTES_TABLE_ID</span>, [
 Â  Â  Â  Â  Â  Â <span class="hljs-title class_">Query</span>.<span class="hljs-title function_">limit</span>(limit),
 Â  Â  Â  Â  Â  Â <span class="hljs-title class_">Query</span>.<span class="hljs-title function_">offset</span>(offset),
 Â  Â  Â  Â  Â  Â <span class="hljs-title class_">Query</span>.<span class="hljs-title function_">equal</span>(<span class="hljs-string">"type"</span>, <span class="hljs-string">"plan"</span>),
 Â  Â  Â   ]);
â€‹
        <span class="hljs-comment">//è·å–å®Œåè¾“å‡ºä¸€ä¸‹ç»“æœ</span>
 Â  Â  Â  Â <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æˆåŠŸè¿æ¥ï¼'</span>)
 Â  Â  Â  Â <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è·å–åˆ°çš„ç”¨æˆ·æ•°æ®:'</span>, result)
â€‹
 Â  Â  Â  Â <span class="hljs-keyword">return</span> result
 Â   } <span class="hljs-keyword">catch</span> (error) {
 Â  Â  Â  Â <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'è¿æ¥ Appwrite å¤±è´¥:'</span>, error)
 Â   }
}
</code></pre>

<pre><code class="hljs language-ini" lang="ini">//index.tsx
â€‹
const <span class="hljs-attr">Plan</span> = () =&gt; {
 Â  Â const <span class="hljs-attr">router</span> = useRouter()<span class="hljs-comment">;</span>
â€‹
 Â  Â const <span class="hljs-section">[refreshing, setRefreshing]</span> = useState(false)<span class="hljs-comment">;</span>
 Â  Â const <span class="hljs-section">[loading, setLoading]</span> = useState(false)<span class="hljs-comment">;</span>
 Â  Â const <span class="hljs-section">[notes, setNotes]</span> = useState&lt;any<span class="hljs-section">[]</span>&gt;(<span class="hljs-section">[]</span>)<span class="hljs-comment">;</span>
 Â  Â const <span class="hljs-section">[page, setPage]</span> = useState(1)<span class="hljs-comment">; // åˆ†é¡µé¡µç </span>
 Â  Â const <span class="hljs-section">[hasMore, setHasMore]</span> = useState(true)<span class="hljs-comment">; // æ˜¯å¦è¿˜æœ‰æ›´å¤šæ•°æ®</span>
â€‹
 Â  Â // åŠ è½½æ•°æ®
 Â  Â const <span class="hljs-attr">loadNotes</span> = useCallback(
 Â  Â  Â  Â //resetç”¨äºè®°å½•æ˜¯å¦é‡æ–°åŠ è½½
 Â  Â  Â  Â async (<span class="hljs-attr">reset</span> = <span class="hljs-literal">false</span>) =&gt; {
 Â  Â  Â  Â  Â  Â if (loading) return<span class="hljs-comment">; // é¿å…é‡å¤è¯·æ±‚</span>
 Â  Â  Â  Â  Â  Â setLoading(true)<span class="hljs-comment">;</span>
â€‹
 Â  Â  Â  Â  Â  Â try {
â€‹
 Â  Â  Â  Â  Â  Â  Â  Â //è®¡ç®—è¯·æ±‚çš„é¡µç ï¼Œå¦‚æœæ˜¯é‡æ–°åŠ è½½ï¼Œé‚£ä¹ˆä»ç¬¬1é¡µå¼€å§‹åŠ è½½ï¼Œå¦‚æœä¸æ˜¯ï¼Œä»ç¬¬pageé¡µå¼€å§‹
 Â  Â  Â  Â  Â  Â  Â  Â const <span class="hljs-attr">currentPage</span> = reset ? <span class="hljs-number">1</span> : page<span class="hljs-comment">;</span>
â€‹
 Â  Â  Â  Â  Â  Â  Â  Â const <span class="hljs-attr">result</span> = await getNotes(currentPage)<span class="hljs-comment">; //è·å–æ•°æ®</span>
 Â  Â  Â  Â  Â  Â  Â  Â const <span class="hljs-attr">data</span> = result.documents<span class="hljs-comment">;</span>
â€‹
 Â  Â  Â  Â  Â  Â  Â  Â if (reset) {
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â //å¦‚æœè¦é‡ç½®ï¼ˆé‡åˆ°äº†ä¸‹æ‹‰åˆ·æ–°çš„æƒ…å†µï¼‰ï¼Œé‚£ä¹ˆé‡æ–°è®¾ç½®dataå’Œpage
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â setNotes(data)<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â setPage(2)<span class="hljs-comment">; // ä¸‹ä¸€é¡µé¡µç </span>
 Â  Â  Â  Â  Â  Â  Â   } else {
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â //å¦‚æœä¸æ˜¯é‡ç½®ï¼ˆä¸Šæ‹‰åŠ è½½æ–°é¡µé¢ï¼‰ï¼Œè®¾ç½®å¥½Notesçš„æ•°æ®ï¼Œæ ¹æ® '$id'ç­›é€‰æ‰é‡å¤çš„æ•°æ®ï¼Œç„¶åè¿½åŠ åˆ°notesé‡Œ
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â setNotes(<span class="hljs-attr">prev</span> =&gt; [...prev, ...data.filter(d =&gt; !prev.some(p =&gt; p.<span class="hljs-variable">$id</span> === d.<span class="hljs-variable">$id</span>))])<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â //è®¾ç½®é¡µæ•°
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â setPage(<span class="hljs-attr">prev</span> =&gt; prev + <span class="hljs-number">1</span>)<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â  Â   }
â€‹
 Â  Â  Â  Â  Â  Â  Â  Â if (!data || data.length &lt; 15) setHasMore(false)<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â   } catch (err) {
 Â  Â  Â  Â  Â  Â  Â  Â console.error(err)<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â   } finally {
 Â  Â  Â  Â  Â  Â  Â  Â setLoading(false)<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â   }
 Â  Â  Â   },
 Â  Â  Â   <span class="hljs-section">[loading, page]</span>
 Â   )<span class="hljs-comment">;</span>
â€‹
 Â  Â useEffect(() =&gt; {
 Â  Â  Â  Â loadNotes()<span class="hljs-comment">;</span>
 Â   }, <span class="hljs-section">[]</span>)<span class="hljs-comment">; // åˆæ¬¡åŠ è½½</span>
â€‹
 Â  Â useEffect(() =&gt; {
 Â  Â  Â  Â console.log("notesæ›´æ–°ï¼š", notes)<span class="hljs-comment">;</span>
 Â   }, <span class="hljs-section">[notes]</span>)<span class="hljs-comment">; // æ¯æ¬¡ notes å˜åŒ–æ—¶æ‰“å°</span>
â€‹
â€‹
 Â  Â // ä¸‹æ‹‰åˆ·æ–°
 Â  Â const <span class="hljs-attr">onRefresh</span> = async () =&gt; {
 Â  Â  Â  Â setRefreshing(true)<span class="hljs-comment">;</span>
 Â  Â  Â  Â await loadNotes(true)<span class="hljs-comment">;</span>
 Â  Â  Â  Â setHasMore(true)<span class="hljs-comment">;</span>
 Â  Â  Â  Â setRefreshing(false)<span class="hljs-comment">;</span>
 Â   }<span class="hljs-comment">;</span>
â€‹
 Â  Â // ä¸Šæ‹‰åŠ è½½æ›´å¤š
 Â  Â const <span class="hljs-attr">onEndReached</span> = async () =&gt; {
 Â  Â  Â  Â if (!loading &amp;&amp; hasMore) {
 Â  Â  Â  Â  Â  Â await loadNotes(false)<span class="hljs-comment">;</span>
 Â  Â  Â   }
 Â   }<span class="hljs-comment">;</span>
â€‹
 Â  Â return (
 Â  Â  Â  Â &lt;View <span class="hljs-attr">style</span>={styles.container}&gt;
â€‹
 Â  Â  Â  Â  Â  Â &lt;ScrollView <span class="hljs-attr">showsVerticalScrollIndicator</span>={<span class="hljs-literal">false</span>}&gt;
â€‹
 Â  Â  Â  Â  Â   {/* ç¬”è®°åˆ—è¡¨,ç”¨FlatListæ¥åŠ è½½ï¼ŒNoteCardç»„ä»¶å¯ä»¥è‡ªç”±å‘æŒ¥ */}
 Â  Â  Â  Â  Â  Â &lt;FlatList 
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-attr">data</span>={notes}
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-attr">numColumns</span>={<span class="hljs-number">2</span>}
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-attr">contentContainerStyle</span>={{
 Â  Â  Â  Â  Â  Â  Â  Â paddingHorizontal: 16,
 Â  Â  Â  Â  Â  Â  Â  Â paddingBottom: 60,
 Â  Â  Â  Â  Â  Â  Â   }}
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-attr">columnWrapperStyle</span>={{justifyContent: <span class="hljs-string">"space-around"</span>,}}
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-attr">keyExtractor</span>={(item) =&gt; item.<span class="hljs-variable">$id</span>}
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-attr">renderItem</span>={({ item }) =&gt; (
 Â  Â  Â  Â  Â  Â  Â  Â &lt;NoteCard <span class="hljs-attr">note</span>={item} /&gt;)}
 Â  Â  Â  Â  Â  Â /&gt;
â€‹
 Â  Â  Â  Â  Â  Â &lt;/ScrollView&gt;
â€‹
 Â  Â  Â  Â &lt;/View&gt;
 Â   )<span class="hljs-comment">;</span>
}<span class="hljs-comment">;</span>
â€‹
â€‹
export default Plan<span class="hljs-comment">;</span>
â€‹
</code></pre>
<p>è¿è¡Œåæ§åˆ¶å°ä¼šè¾“å‡ºç»“æœï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/24dc5da7c97648288f288d4edc31057f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5aS05bCP6bm_:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763727630&amp;x-signature=2e39An9QBGD2fZgJ%2F%2BOZcv7g2fc%3D" alt="data.png" loading="lazy"/></p>
<h3 data-id="heading-15">å…­ã€æ€»ç»“</h3>
<p>å¦‚æœä½ æ­£åœ¨å¼€å‘ä¸€æ¬¾åŸºäºReactNative+Expoçš„Appï¼Œç”šè‡³åªæ˜¯ä¸€ä¸ªDemoï¼Œæƒ³å‡å°‘åç«¯å·¥ä½œé‡ï¼Œå®ç°å¿«é€Ÿã€è½»é‡åŒ–çš„å¼€å‘ï¼Œé‚£ä¹ˆAppwriteæ˜¯ä¸€ä¸ªéå¸¸å€¼å¾—å°è¯•çš„BaaSå¹³å°ã€‚</p>
<p>å®ƒçš„ä¼˜ç‚¹åœ¨äºï¼š</p>
<ul>
<li>å®ƒæ˜¯<em>å¼€æºå¹³å°</em>ï¼Œå¯è‡ªè¡Œéƒ¨ç½²</li>
<li>æä¾›äº†<em>ç®€æ´çš„å¯è§†åŒ–åå°</em>ï¼Œæå¤§åœ°æ–¹ä¾¿äº†æ“ä½œ</li>
<li><em>APIè®¾è®¡ä¸æ–‡æ¡£</em>æ¸…æ™°å®Œå–„</li>
<li>æ”¯æŒ<em>å¤šç«¯</em>ï¼šWebã€React Nativeã€Flutterã€iOSã€Android</li>
<li>å†…ç½® æ•°æ®åº“ã€ç”¨æˆ·è®¤è¯ã€æ–‡ä»¶å­˜å‚¨ã€å‡½æ•°äº‘ã€æ¨é€ç­‰<em>å®Œæ•´åç«¯èƒ½åŠ›</em>ã€‚</li>
<li>å…·æœ‰<em>ç›´è§‚çš„APIè®¾è®¡</em>ï¼š<code>listDocuments</code>ã€<code>createDocument</code>ç­‰æ–¹æ³•å‘½åæ¸…æ™°ï¼Œé…åˆQueryæ¡ä»¶ç­›é€‰ï¼Œè®©å‰ç«¯æ•°æ®æ“ä½œå˜å¾—è½»æ¾è‡ªç„¶ã€‚</li>
</ul>
<p>è¾¹åšDemoè¾¹å†™åšå®¢ï¼Œæ–­æ–­ç»­ç»­ç»ˆäºå†™å®Œäº†ï¼Œè€—æ—¶æœ‰ç‚¹é•¿ï¼Œå¯èƒ½æœ‰é”™è¯¯çš„åœ°æ–¹ï¼Œæ¬¢è¿æŒ‡æ­£ã€‚ä¹Ÿæ¬¢è¿å¤§å®¶æ¥è®¨è®º~</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vite & Webpack & Rollup å…¥å£ä¸äº§å‡ºé…ç½®ä¸ç¤ºä¾‹]]></title>    <link>https://juejin.cn/post/7572413448941830171</link>    <guid>https://juejin.cn/post/7572413448941830171</guid>    <pubDate>2025-11-14T13:04:03.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572413448941830171" data-draft-id="7572389069706608650" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vite &amp; Webpack &amp; Rollup å…¥å£ä¸äº§å‡ºé…ç½®ä¸ç¤ºä¾‹"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-14T13:04:03.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ‹¿ä¸æ‹¿é“19"/> <meta itemprop="url" content="https://juejin.cn/user/3417747845299064"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vite &amp; Webpack &amp; Rollup å…¥å£ä¸äº§å‡ºé…ç½®ä¸ç¤ºä¾‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3417747845299064/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ‹¿ä¸æ‹¿é“19
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-14T13:04:03.000Z" title="Fri Nov 14 2025 13:04:03 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¯¹Vite v5.xã€Webpack v5.xã€Rollup v4.xä¸‰ä¸ªä¸»æµå‰ç«¯æ„å»ºå·¥å…·ï¼Œåˆ†åˆ«è®°å½•å…¥å£ä¸äº§å‡ºçš„é…ç½®ï¼Œå¹¶ä¸”ç»™å‡ºä¸é…ç½®æ–‡ä»¶ç›¸å¯¹åº”çš„é¡¹ç›®ç»“æ„å’Œæ„å»ºåçš„ç¤ºä¾‹æ–‡ä»¶å†…å®¹ã€‚</p>
<p>å¤‡æ³¨ï¼šè¾“å‡ºäº§ç‰©æ–‡ä»¶å¤¹ç»Ÿä¸€é‡‡ç”¨â€œæ„å»ºå·¥å…·åç§°+distâ€å‘½åï¼Œé™æ€èµ„æºè·¯å¾„ç»Ÿä¸€é‡‡ç”¨â€œæ„å»ºå·¥å…·åç§°+assetâ€å‘½åã€‚</p>
<h2 data-id="heading-0">ä¸€ã€Vite v5.x é…ç½®ä¸è¾“å‡ºç¤ºä¾‹</h2>
<h3 data-id="heading-1">1.1 æ ¸å¿ƒé…ç½®æ–‡ä»¶ï¼ˆvite.config.jsï¼‰</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { defineConfig } <span class="hljs-keyword">from</span> <span class="hljs-string">'vite'</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>({
  <span class="hljs-comment">// é¡¹ç›®æ ¹ç›®å½•é…ç½®ï¼ˆè‡ªå®šä¹‰ä¸ºsrcç›®å½•ï¼‰</span>
  <span class="hljs-attr">root</span>: <span class="hljs-string">'./src'</span>, <span class="hljs-comment">// è‡ªå®šä¹‰é¡¹ç›®æ ¹ç›®å½•ä¸ºsrcï¼Œå…¥å£è·¯å¾„éœ€åŸºäºæ­¤ç›®å½•ç¼–å†™</span>
  <span class="hljs-comment">// åŸºç¡€è·¯å¾„é…ç½®ï¼ˆè‡ªå®šä¹‰ä¸ºå­è·¯å¾„éƒ¨ç½²åœºæ™¯ï¼‰</span>
  <span class="hljs-attr">base</span>: <span class="hljs-string">'/vite-app/'</span>, <span class="hljs-comment">// è‡ªå®šä¹‰ä¸ºå­è·¯å¾„/vite-app/ï¼Œé€‚é…ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²åˆ°å­ç›®å½•çš„åœºæ™¯</span>
  <span class="hljs-comment">// é™æ€èµ„æºå…¬å…±ç›®å½•é…ç½®ï¼ˆpublicDirï¼‰</span>
  <span class="hljs-attr">publicDir</span>: <span class="hljs-string">'../vite-public'</span>, <span class="hljs-comment">// é…ç½®publicç›®å½•ä¸ºé¡¹ç›®æ ¹ç›®å½•ä¸‹çš„vite-publicï¼Œå­˜æ”¾æ— éœ€å¤„ç†çš„é™æ€èµ„æº</span>
  <span class="hljs-comment">// æ‰“åŒ…é…ç½®</span>
  <span class="hljs-attr">build</span>: {
    <span class="hljs-comment">// äº§å‡ºé…ç½®</span>
    <span class="hljs-attr">outDir</span>: <span class="hljs-string">'../vite-dist'</span>, <span class="hljs-comment">// å› rootä¸ºsrcï¼Œéœ€å‘ä¸Šä¸€çº§è¾“å‡ºï¼Œä¿æŒå·¥å…·å+distè§„åˆ™</span>
    <span class="hljs-attr">assetsDir</span>: <span class="hljs-string">'vite-asset'</span>, <span class="hljs-comment">// é™æ€èµ„æºè·¯å¾„ï¼šæ„å»ºå·¥å…·åç§°+asset</span>
    <span class="hljs-attr">assetsInlineLimit</span>: <span class="hljs-number">4096</span>, <span class="hljs-comment">// å°äº4kbçš„é™æ€èµ„æºå†…è”ï¼Œè¶…è¿‡åˆ™è¾“å‡ºåˆ°assetsDir</span>
    <span class="hljs-attr">rollupOptions</span>: {
      <span class="hljs-comment">// æ˜ç¡®å…¥å£æ–‡ä»¶é…ç½®ï¼ˆåŸºäºroot:./srcï¼Œè·¯å¾„ç®€åŒ–ï¼‰</span>
      <span class="hljs-attr">input</span>: {
        <span class="hljs-attr">main</span>: <span class="hljs-string">'./main.js'</span>, <span class="hljs-comment">// ä¸»å…¥å£ï¼ŒåŸºäºroot:./srcï¼Œå®é™…è·¯å¾„ä¸ºsrc/main.js</span>
        <span class="hljs-attr">subPage</span>: <span class="hljs-string">'./subPage.js'</span> <span class="hljs-comment">// å­å…¥å£ï¼Œå®é™…è·¯å¾„ä¸ºsrc/subPage.js</span>
      },
      <span class="hljs-comment">// å¤šå…¥å£å¯¹åº”è¾“å‡ºé…ç½®ï¼ˆå¯é€‰ï¼Œé»˜è®¤æŒ‰å…¥å£åç”Ÿæˆå¯¹åº”æ–‡ä»¶ï¼‰</span>
      <span class="hljs-attr">output</span>: {
        <span class="hljs-attr">entryFileNames</span>: <span class="hljs-string">'vite-asset/js/[name]-[hash].js'</span>, <span class="hljs-comment">// å…¥å£JSè¾“å‡ºè·¯å¾„åŠå‘½å</span>
        <span class="hljs-attr">chunkFileNames</span>: <span class="hljs-string">'vite-asset/js/[name]-[hash].js'</span>, <span class="hljs-comment">// ä»£ç åˆ†å‰²chunkè¾“å‡ºè·¯å¾„åŠå‘½å</span>
        <span class="hljs-attr">assetFileNames</span>: <span class="hljs-string">'vite-asset/[ext]/[name]-[hash].[ext]'</span> <span class="hljs-comment">// é™æ€èµ„æºï¼ˆcssã€å›¾ç‰‡ç­‰ï¼‰è¾“å‡ºè·¯å¾„åŠå‘½å</span>
      }
    },
    <span class="hljs-attr">sourcemap</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">// æ˜¯å¦ç”Ÿæˆsourcemapï¼Œç”Ÿäº§ç¯å¢ƒå»ºè®®å…³é—­</span>
    <span class="hljs-attr">minify</span>: <span class="hljs-string">'esbuild'</span> <span class="hljs-comment">// å‹ç¼©å·¥å…·ï¼ŒViteé»˜è®¤ä½¿ç”¨esbuildï¼Œå¯æ›¿æ¢ä¸ºterser</span>
  },
  ...
})
</code></pre>
<h3 data-id="heading-2">1.2 å…¥å£ä¸äº§å‡ºé…ç½®è¯´æ˜</h3>







































































<table><thead><tr><th>é…ç½®ç±»å‹</th><th>å…·ä½“é…ç½®é¡¹</th><th>é…ç½®å€¼</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>å…¥å£é…ç½®</td><td>ä¸»å…¥å£</td><td>./main.js</td><td>åŸºäºroot:./srcï¼Œå®é™…è·¯å¾„ä¸ºsrc/main.jsï¼Œè´Ÿè´£åˆå§‹åŒ–åº”ç”¨</td></tr><tr><td/><td>å­å…¥å£</td><td>./subPage.js</td><td>åŸºäºroot:./srcï¼Œå®é™…è·¯å¾„ä¸ºsrc/subPage.jsï¼Œå¤šå…¥å£åœºæ™¯å¯ç‹¬ç«‹æ‰“åŒ…</td></tr><tr><td>äº§å‡ºåŠåŸºç¡€é…ç½®</td><td>é¡¹ç›®æ ¹ç›®å½•ï¼ˆrootï¼‰</td><td>./src</td><td>è‡ªå®šä¹‰ä¸ºsrcç›®å½•ï¼Œå…¥å£è·¯å¾„éœ€åŸºäºæ­¤ç¼–å†™ï¼Œç®€åŒ–å…¥å£è·¯å¾„å†™æ³•</td></tr><tr><td/><td>åŸºç¡€è·¯å¾„ï¼ˆbaseï¼‰</td><td>/vite-app/</td><td>è‡ªå®šä¹‰ä¸ºå­è·¯å¾„ï¼Œé€‚é…ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²åˆ°åŸŸåä¸‹/vite-app/å­ç›®å½•çš„åœºæ™¯ï¼Œå½±å“èµ„æºå¼•ç”¨è·¯å¾„</td></tr><tr><td/><td>é™æ€èµ„æºå…¬å…±ç›®å½•ï¼ˆpublicDirï¼‰</td><td>../vite-public</td><td>åŸºäºroot:./srcï¼Œå®é™…è·¯å¾„ä¸ºé¡¹ç›®æ ¹ç›®å½•ä¸‹vite-publicï¼Œå­˜æ”¾æ— éœ€å¤„ç†çš„é™æ€èµ„æºï¼Œæ‰“åŒ…æ—¶ç›´æ¥å¤åˆ¶åˆ°äº§ç‰©æ ¹ç›®å½•</td></tr><tr><td/><td>äº§ç‰©æ ¹ç›®å½•</td><td>../vite-dist</td><td>å› rootä¸ºsrcï¼Œéœ€å‘ä¸Šä¸€çº§è¾“å‡ºï¼Œä¿æŒâ€œå·¥å…·å+distâ€è§„åˆ™ï¼Œå®é™…ä½äºé¡¹ç›®æ ¹ç›®å½•ä¸‹</td></tr><tr><td/><td>é™æ€èµ„æºç›®å½•</td><td>vite-asset</td><td>å­˜æ”¾JSã€CSSã€å›¾ç‰‡ç­‰ç»å¤„ç†çš„é™æ€èµ„æºï¼Œéµå¾ªâ€œæ„å»ºå·¥å…·åç§°+assetâ€è§„åˆ™</td></tr><tr><td/><td>å…¥å£JSè¾“å‡ºè·¯å¾„</td><td>vite-asset/js/[name]-[hash].js</td><td>[name]ä¸ºå…¥å£åï¼Œ[hash]ä¸ºæ–‡ä»¶å“ˆå¸Œå€¼ï¼Œç”¨äºç¼“å­˜æ§åˆ¶</td></tr><tr><td/><td>chunkè¾“å‡ºè·¯å¾„</td><td>vite-asset/js/[name]-[hash].js</td><td>ä»£ç åˆ†å‰²åç”Ÿæˆçš„å…¬å…±æ¨¡å—æˆ–å¼‚æ­¥æ¨¡å—æ–‡ä»¶è·¯å¾„</td></tr><tr><td/><td>å…¶ä»–é™æ€èµ„æºè·¯å¾„</td><td>vite-asset/[ext]/[name]-[hash].[ext]</td><td>[ext]ä¸ºæ–‡ä»¶æ‰©å±•åï¼ŒæŒ‰æ‰©å±•ååˆ†ç±»å­˜æ”¾ç»å¤„ç†çš„å›¾ç‰‡ã€CSSç­‰èµ„æº</td></tr></tbody></table>
<h3 data-id="heading-3">1.3 æ‰“åŒ…åæ–‡ä»¶å†…å®¹ç¤ºä¾‹</h3>
<h4 data-id="heading-4">1.3.1 æ–‡ä»¶ç»“æ„</h4>
<pre><code class="hljs language-Plain" lang="Plain">// é¡¹ç›®æ•´ä½“ç›®å½•ç»“æ„ï¼ˆä½“ç°rootã€publicDirä¸outDirå…³ç³»ï¼‰
project-root/          // å®é™…é¡¹ç›®æ ¹ç›®å½•
â”œâ”€â”€ src/               // rooté…ç½®æŒ‡å®šçš„é¡¹ç›®æ ¹ç›®å½•
â”‚   â”œâ”€â”€ main.js        // ä¸»å…¥å£æ–‡ä»¶
â”‚   â”œâ”€â”€ subPage.js     // å­å…¥å£æ–‡ä»¶
â”‚   â””â”€â”€ vite.config.js // Viteé…ç½®æ–‡ä»¶ï¼ˆå› rootä¸ºsrcï¼Œé…ç½®æ–‡ä»¶å¯æ”¾srcå†…ï¼‰
â”œâ”€â”€ vite-public/       // publicDiré…ç½®æŒ‡å®šçš„é™æ€èµ„æºå…¬å…±ç›®å½•
â”‚   â”œâ”€â”€ favicon.ico    // ç½‘ç«™å›¾æ ‡ï¼ˆæ— éœ€å¤„ç†ï¼Œæ‰“åŒ…ç›´æ¥å¤åˆ¶ï¼‰
â”‚   â””â”€â”€ static/        // å…¬å…±é™æ€èµ„æºå­ç›®å½•
â”‚       â””â”€â”€ global.css // å…¨å±€é™æ€CSSï¼ˆæ— éœ€æ„å»ºå·¥å…·å¤„ç†ï¼‰
â””â”€â”€ vite-dist/         // äº§ç‰©æ ¹ç›®å½•ï¼Œç”±outDir:../vite-distç”Ÿæˆ
    â”œâ”€â”€ index.html     // ä¸»å…¥å£å¯¹åº”çš„HTMLæ–‡ä»¶
    â”œâ”€â”€ subPage.html   // å­å…¥å£å¯¹åº”çš„HTMLæ–‡ä»¶
    â”œâ”€â”€ favicon.ico    // ä»vite-publicå¤åˆ¶è¿‡æ¥çš„ç½‘ç«™å›¾æ ‡
    â”œâ”€â”€ static/        // ä»vite-publicå¤åˆ¶è¿‡æ¥çš„é™æ€èµ„æºå­ç›®å½•
    â”‚   â””â”€â”€ global.css // ä»vite-publicå¤åˆ¶è¿‡æ¥çš„å…¨å±€CSS
    â””â”€â”€ vite-asset/    // ç»æ„å»ºå·¥å…·å¤„ç†åçš„é™æ€èµ„æºç›®å½•
        â”œâ”€â”€ js/        // JSæ–‡ä»¶ç›®å½•
        â”‚   â”œâ”€â”€ main-8f7d2b.js      // ä¸»å…¥å£JSæ–‡ä»¶ï¼ˆå“ˆå¸Œå€¼ç¤ºä¾‹ï¼‰
        â”‚   â”œâ”€â”€ subPage-3e5a1c.js   // å­å…¥å£JSæ–‡ä»¶ï¼ˆå“ˆå¸Œå€¼ç¤ºä¾‹ï¼‰
        â”‚   â””â”€â”€ vendor-7b9c4d.js    // å…¬å…±ä¾èµ–chunkï¼ˆå¦‚Vueæ¡†æ¶ï¼‰
        â”œâ”€â”€ css/       // CSSæ–‡ä»¶ç›®å½•
        â”‚   â”œâ”€â”€ main-5d8f3e.css     // ä¸»å…¥å£å¯¹åº”çš„CSSæ–‡ä»¶
        â”‚   â””â”€â”€ subPage-2a4c6b.css  // å­å…¥å£å¯¹åº”çš„CSSæ–‡ä»¶
        â””â”€â”€ img/       // å›¾ç‰‡èµ„æºç›®å½•
            â””â”€â”€ logo-9a3b5d.png     // å›¾ç‰‡èµ„æºæ–‡ä»¶ï¼ˆå“ˆå¸Œå€¼ç¤ºä¾‹ï¼Œç»å¤„ç†åè¾“å‡ºï¼‰
</code></pre>
<h4 data-id="heading-5">1.3.2 å…³é”®æ–‡ä»¶å†…å®¹ç¤ºä¾‹</h4>
<p><strong>1. vite-dist/index.html</strong></p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"zh-CN"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Vite ä¸»å…¥å£é¡µé¢<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"icon"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"/vite-app/favicon.ico"</span>&gt;</span> 
  <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"/vite-app/static/global.css"</span>&gt;</span> 
  <span class="hljs-comment">&lt;!-- èµ„æºå¼•ç”¨è·¯å¾„å‰ç¼€ä¸ºbaseé…ç½®çš„/vite-app/ï¼Œç»å¤„ç†çš„CSSåœ¨vite-assetä¸‹ --&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"/vite-app/vite-asset/css/main-5d8f3e.css"</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"app"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-comment">&lt;!-- è„šæœ¬å¼•ç”¨è·¯å¾„åŒæ ·æ·»åŠ baseå‰ç¼€ï¼Œç»å¤„ç†çš„JSåœ¨vite-assetä¸‹ --&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"module"</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"/vite-app/vite-asset/js/vendor-7b9c4d.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"module"</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"/vite-app/vite-asset/js/main-8f7d2b.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<p><strong>2. vite-dist/vite-asset/js/main-8f7d2b.jsï¼ˆç®€åŒ–ç‰ˆï¼‰</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { createApp } <span class="hljs-keyword">from</span> <span class="hljs-string">'./vendor-7b9c4d.js'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./App.vue'</span>;
<span class="hljs-title function_">createApp</span>(<span class="hljs-title class_">App</span>).<span class="hljs-title function_">mount</span>(<span class="hljs-string">'#app'</span>);
<span class="hljs-comment">// ä¸šåŠ¡é€»è¾‘ä»£ç ï¼ˆå·²å‹ç¼©ï¼Œæ­¤å¤„ä¸ºç®€åŒ–å±•ç¤ºï¼‰</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Vite ä¸»å…¥å£åº”ç”¨å¯åŠ¨'</span>);
</code></pre>
<h2 data-id="heading-6">äºŒã€Webpack v5.x é…ç½®ä¸è¾“å‡ºç¤ºä¾‹</h2>
<h3 data-id="heading-7">2.1 æ ¸å¿ƒé…ç½®æ–‡ä»¶ï¼ˆwebpack.config.jsï¼‰</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">'path'</span>);
<span class="hljs-keyword">const</span> <span class="hljs-title class_">HtmlWebpackPlugin</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">'html-webpack-plugin'</span>); <span class="hljs-comment">// ç”ŸæˆHTMLæ–‡ä»¶çš„æ’ä»¶</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">MiniCssExtractPlugin</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">'mini-css-extract-plugin'</span>); <span class="hljs-comment">// æå–CSSä¸ºå•ç‹¬æ–‡ä»¶çš„æ’ä»¶</span>

<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-comment">// é¡¹ç›®æ ¹ç›®å½•é…ç½®</span>
  <span class="hljs-attr">context</span>: path.<span class="hljs-title function_">resolve</span>(__dirname, <span class="hljs-string">'src'</span>), <span class="hljs-comment">// è‡ªå®šä¹‰æ ¹ç›®å½•ä¸ºsrcï¼Œå…¥å£è·¯å¾„åŸºäºæ­¤ç¼–å†™</span>
  <span class="hljs-comment">// å…¥å£é…ç½®ï¼ˆåŸºäºcontext:srcï¼Œè·¯å¾„ç®€åŒ–ï¼‰</span>
  <span class="hljs-attr">entry</span>: {
    <span class="hljs-attr">main</span>: <span class="hljs-string">'./main.js'</span>, <span class="hljs-comment">// ä¸»å…¥å£ï¼ŒåŸºäºcontext:srcï¼Œå®é™…è·¯å¾„ä¸ºsrc/main.js</span>
    <span class="hljs-attr">subPage</span>: <span class="hljs-string">'./subPage.js'</span> <span class="hljs-comment">// å­å…¥å£ï¼Œå®é™…è·¯å¾„ä¸ºsrc/subPage.js</span>
  },
  <span class="hljs-comment">// äº§å‡ºé…ç½®</span>
  <span class="hljs-attr">output</span>: {
    <span class="hljs-attr">path</span>: path.<span class="hljs-title function_">resolve</span>(__dirname, <span class="hljs-string">'webpack-dist'</span>), <span class="hljs-comment">// è¾“å‡ºäº§ç‰©æ–‡ä»¶å¤¹ï¼šæ„å»ºå·¥å…·åç§°+dist</span>
    <span class="hljs-attr">filename</span>: <span class="hljs-string">'webpack-asset/js/[name]-[contenthash].js'</span>, <span class="hljs-comment">// å…¥å£JSè¾“å‡ºè·¯å¾„åŠå‘½å</span>
    <span class="hljs-attr">chunkFilename</span>: <span class="hljs-string">'webpack-asset/js/[name]-[contenthash].chunk.js'</span>, <span class="hljs-comment">// ä»£ç åˆ†å‰²chunkè¾“å‡ºè·¯å¾„</span>
    <span class="hljs-attr">assetModuleFilename</span>: <span class="hljs-string">'webpack-asset/[ext]/[name]-[contenthash].[ext]'</span>, <span class="hljs-comment">// é™æ€èµ„æºè¾“å‡ºè·¯å¾„</span>
    <span class="hljs-attr">publicPath</span>: <span class="hljs-string">'/webpack-app/'</span>, <span class="hljs-comment">// åŸºç¡€è·¯å¾„ï¼Œé€‚é…å­è·¯å¾„éƒ¨ç½²</span>
    <span class="hljs-attr">clean</span>: <span class="hljs-literal">true</span> <span class="hljs-comment">// æ‰“åŒ…å‰æ¸…ç†è¾“å‡ºç›®å½•</span>
  },
  <span class="hljs-comment">// æ¨¡å—è§£æè§„åˆ™</span>
  <span class="hljs-attr">module</span>: {
    <span class="hljs-attr">rules</span>: [
      {
        <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.css$/i</span>,
        <span class="hljs-attr">use</span>: [<span class="hljs-title class_">MiniCssExtractPlugin</span>.<span class="hljs-property">loader</span>, <span class="hljs-string">'css-loader'</span>], <span class="hljs-comment">// æå–CSSä¸ºå•ç‹¬æ–‡ä»¶</span>
      },
      {
        <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.(png|svg|jpg|jpeg|gif)$/i</span>,
        <span class="hljs-attr">type</span>: <span class="hljs-string">'asset'</span>, <span class="hljs-comment">// è‡ªåŠ¨åˆ¤æ–­æ˜¯å¦å†…è”æˆ–è¾“å‡ºä¸ºæ–‡ä»¶</span>
        <span class="hljs-attr">parser</span>: {
          <span class="hljs-attr">dataUrlCondition</span>: {
            <span class="hljs-attr">maxSize</span>: <span class="hljs-number">4</span> * <span class="hljs-number">1024</span> <span class="hljs-comment">// 4kbä»¥ä¸‹å†…è”ï¼Œè¶…è¿‡è¾“å‡ºåˆ°é™æ€èµ„æºç›®å½•</span>
          }
        }
      },
      {
        <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.m?js$/</span>,
        <span class="hljs-attr">exclude</span>: <span class="hljs-regexp">/(node_modules|bower_components)/</span>,
        <span class="hljs-attr">use</span>: {
          <span class="hljs-attr">loader</span>: <span class="hljs-string">'babel-loader'</span>, <span class="hljs-comment">// è½¬è¯‘ES6+è¯­æ³•</span>
          <span class="hljs-attr">options</span>: {
            <span class="hljs-attr">presets</span>: [<span class="hljs-string">'@babel/preset-env'</span>]
          }
        }
      }
    ]
  },
  <span class="hljs-comment">// æ’ä»¶é…ç½®</span>
  <span class="hljs-attr">plugins</span>: [
    <span class="hljs-comment">// ä¸ºæ¯ä¸ªå…¥å£ç”Ÿæˆå¯¹åº”çš„HTMLæ–‡ä»¶</span>
    <span class="hljs-keyword">new</span> <span class="hljs-title class_">HtmlWebpackPlugin</span>({
      <span class="hljs-attr">filename</span>: <span class="hljs-string">'index.html'</span>,
      <span class="hljs-attr">template</span>: path.<span class="hljs-title function_">resolve</span>(__dirname, <span class="hljs-string">'public/index.html'</span>), <span class="hljs-comment">// æ¨¡æ¿è·¯å¾„éœ€è¡¥å…¨æ ¹ç›®å½•</span>
      <span class="hljs-attr">chunks</span>: [<span class="hljs-string">'main'</span>, <span class="hljs-string">'vendor'</span>] <span class="hljs-comment">// å¼•å…¥ä¸»å…¥å£JSå’Œå…¬å…±ä¾èµ–chunk</span>
    }),
    <span class="hljs-keyword">new</span> <span class="hljs-title class_">HtmlWebpackPlugin</span>({
      <span class="hljs-attr">filename</span>: <span class="hljs-string">'subPage.html'</span>,
      <span class="hljs-attr">template</span>: path.<span class="hljs-title function_">resolve</span>(__dirname, <span class="hljs-string">'public/subPage.html'</span>), <span class="hljs-comment">// æ¨¡æ¿è·¯å¾„éœ€è¡¥å…¨æ ¹ç›®å½•</span>
      <span class="hljs-attr">chunks</span>: [<span class="hljs-string">'subPage'</span>, <span class="hljs-string">'vendor'</span>] <span class="hljs-comment">// å¼•å…¥å­å…¥å£JSå’Œå…¬å…±ä¾èµ–chunk</span>
    }),
    <span class="hljs-comment">// é…ç½®CSSè¾“å‡ºè·¯å¾„</span>
    <span class="hljs-keyword">new</span> <span class="hljs-title class_">MiniCssExtractPlugin</span>({
      <span class="hljs-attr">filename</span>: <span class="hljs-string">'webpack-asset/css/[name]-[contenthash].css'</span>,
      <span class="hljs-attr">chunkFilename</span>: <span class="hljs-string">'webpack-asset/css/[name]-[contenthash].chunk.css'</span>
    })
  ],
  <span class="hljs-comment">// ä»£ç åˆ†å‰²é…ç½®</span>
  <span class="hljs-attr">optimization</span>: {
    <span class="hljs-attr">splitChunks</span>: {
      <span class="hljs-attr">chunks</span>: <span class="hljs-string">'all'</span>,
      <span class="hljs-attr">cacheGroups</span>: {
        <span class="hljs-attr">vendor</span>: {
          <span class="hljs-attr">test</span>: <span class="hljs-regexp">/[\\/]node_modules[\\/]/</span>,
          <span class="hljs-attr">name</span>: <span class="hljs-string">'vendor'</span>, <span class="hljs-comment">// å…¬å…±ä¾èµ–chunkåç§°</span>
          <span class="hljs-attr">priority</span>: -<span class="hljs-number">10</span> <span class="hljs-comment">// ä¼˜å…ˆçº§ï¼Œå¤šä¸ªç¼“å­˜ç»„è§„åˆ™å†²çªæ—¶ï¼ŒæŒ‰ä¼˜å…ˆçº§å†³å®šæ¨¡å—å½’å±</span>
        }
      }
    },
    <span class="hljs-attr">runtimeChunk</span>: <span class="hljs-string">'single'</span> <span class="hljs-comment">// æå–è¿è¡Œæ—¶ä»£ç ï¼Œä¼˜åŒ–ç¼“å­˜</span>
  },
  <span class="hljs-attr">mode</span>: <span class="hljs-string">'production'</span> <span class="hljs-comment">// ç”Ÿäº§ç¯å¢ƒæ¨¡å¼ï¼ˆè‡ªåŠ¨å¼€å¯å‹ç¼©ç­‰ä¼˜åŒ–ï¼‰</span>
};
</code></pre>
<h3 data-id="heading-8">2.2 å…¥å£ä¸äº§å‡ºé…ç½®è¯´æ˜</h3>

































































<table><thead><tr><th>é…ç½®ç±»å‹</th><th>å…·ä½“é…ç½®é¡¹</th><th>é…ç½®å€¼</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>å…¥å£é…ç½®</td><td>ä¸»å…¥å£</td><td>./main.js</td><td>åŸºäºcontext:srcï¼Œå®é™…è·¯å¾„ä¸ºsrc/main.jsï¼Œè´Ÿè´£åˆå§‹åŒ–åº”ç”¨</td></tr><tr><td/><td>å­å…¥å£</td><td>./subPage.js</td><td>åŸºäºcontext:srcï¼Œå®é™…è·¯å¾„ä¸ºsrc/subPage.jsï¼Œå¤šå…¥å£åœºæ™¯å¯ç‹¬ç«‹æ‰“åŒ…</td></tr><tr><td>äº§å‡ºåŠåŸºç¡€é…ç½®</td><td>é¡¹ç›®æ ¹ç›®å½•ï¼ˆcontextï¼‰</td><td>path.resolve(__dirname, 'src')</td><td>ç±»ä¼¼Viteçš„rootï¼Œè‡ªå®šä¹‰æ ¹ç›®å½•ä¸ºsrcï¼Œå…¥å£è·¯å¾„åŸºäºæ­¤ç¼–å†™</td></tr><tr><td/><td>åŸºç¡€è·¯å¾„ï¼ˆpublicPathï¼‰</td><td>/webpack-app/</td><td>ç±»ä¼¼Viteçš„baseï¼Œé€‚é…å­è·¯å¾„éƒ¨ç½²ï¼Œè‡ªåŠ¨ä¸ºèµ„æºæ·»åŠ è·¯å¾„å‰ç¼€</td></tr><tr><td/><td>äº§ç‰©æ ¹ç›®å½•</td><td>webpack-dist</td><td>æ‰“åŒ…åæ‰€æœ‰æ–‡ä»¶çš„æ ¹æ–‡ä»¶å¤¹ï¼Œéµå¾ªâ€œæ„å»ºå·¥å…·åç§°+distâ€è§„åˆ™</td></tr><tr><td/><td>é™æ€èµ„æºæ ¹ç›®å½•</td><td>webpack-asset</td><td>å­˜æ”¾JSã€CSSã€å›¾ç‰‡ç­‰é™æ€èµ„æºï¼Œéµå¾ªâ€œæ„å»ºå·¥å…·åç§°+assetâ€è§„åˆ™</td></tr><tr><td/><td>å…¥å£JSè¾“å‡ºè·¯å¾„</td><td>webpack-asset/js/[name]-[contenthash].js</td><td>[name]ä¸ºå…¥å£åï¼Œ[contenthash]ä¸ºå†…å®¹å“ˆå¸Œå€¼ï¼Œç”¨äºé•¿æ•ˆç¼“å­˜</td></tr><tr><td/><td>chunkè¾“å‡ºè·¯å¾„</td><td>webpack-asset/js/[name]-[contenthash].chunk.js</td><td>ä»£ç åˆ†å‰²åç”Ÿæˆçš„å…¬å…±æ¨¡å—ï¼ˆå¦‚vendorï¼‰æˆ–å¼‚æ­¥æ¨¡å—æ–‡ä»¶è·¯å¾„</td></tr><tr><td/><td>å›¾ç‰‡ç­‰èµ„æºè¾“å‡ºè·¯å¾„</td><td>webpack-asset/[ext]/[name]-[contenthash].[ext]</td><td>[ext]ä¸ºæ–‡ä»¶æ‰©å±•åï¼ŒæŒ‰æ‰©å±•ååˆ†ç±»å­˜æ”¾é™æ€èµ„æº</td></tr></tbody></table>
<h3 data-id="heading-9">2.3 æ‰“åŒ…åæ–‡ä»¶å†…å®¹ç¤ºä¾‹</h3>
<h4 data-id="heading-10">2.3.1 æ–‡ä»¶ç»“æ„</h4>
<pre><code class="hljs language-Plain" lang="Plain">// é¡¹ç›®æ•´ä½“ç›®å½•ç»“æ„ï¼ˆä½“ç°contextä¸output.pathå…³ç³»ï¼‰
project-root/          // å®é™…é¡¹ç›®æ ¹ç›®å½•
â”œâ”€â”€ src/               // contexté…ç½®æŒ‡å®šçš„é¡¹ç›®æ ¹ç›®å½•
â”‚   â”œâ”€â”€ main.js        // ä¸»å…¥å£æ–‡ä»¶ï¼ˆåŸºäºcontextç®€åŒ–è·¯å¾„ï¼‰
â”‚   â”œâ”€â”€ subPage.js     // å­å…¥å£æ–‡ä»¶
â”‚   â””â”€â”€ webpack.config.js // Webpacké…ç½®æ–‡ä»¶ï¼ˆå¯æ”¾é¡¹ç›®æ ¹ç›®å½•ï¼Œéœ€è¡¥å…¨è·¯å¾„ï¼‰
â”œâ”€â”€ public/            // é™æ€æ¨¡æ¿ç›®å½•
â”‚   â”œâ”€â”€ index.html     // ä¸»å…¥å£HTMLæ¨¡æ¿
â”‚   â””â”€â”€ subPage.html   // å­å…¥å£HTMLæ¨¡æ¿
â””â”€â”€ webpack-dist/      // äº§ç‰©æ ¹ç›®å½•ï¼Œç”±output.pathç”Ÿæˆ
    â”œâ”€â”€ index.html     // ä¸»å…¥å£å¯¹åº”çš„HTMLæ–‡ä»¶
    â”œâ”€â”€ subPage.html   // å­å…¥å£å¯¹åº”çš„HTMLæ–‡ä»¶
    â”œâ”€â”€ webpack-asset/ // é™æ€èµ„æºç›®å½•
    â”‚   â”œâ”€â”€ js/        // JSæ–‡ä»¶ç›®å½•
    â”‚   â”‚   â”œâ”€â”€ main-9f2d7b.contenthash.js       // ä¸»å…¥å£JSæ–‡ä»¶
    â”‚   â”‚   â”œâ”€â”€ subPage-4e6a3c.contenthash.js    // å­å…¥å£JSæ–‡ä»¶
    â”‚   â”‚   â”œâ”€â”€ vendor-8b7c5d.contenthash.js     // å…¬å…±ä¾èµ–chunkï¼ˆå¦‚ç¬¬ä¸‰æ–¹åº“ï¼‰
    â”‚   â”‚   â””â”€â”€ runtime-main.contenthash.js      // è¿è¡Œæ—¶ä»£ç chunk
    â”‚   â”œâ”€â”€ css/       // CSSæ–‡ä»¶ç›®å½•
    â”‚   â”‚   â”œâ”€â”€ main-6d9f4e.contenthash.css      // ä¸»å…¥å£å¯¹åº”çš„CSSæ–‡ä»¶
    â”‚   â”‚   â””â”€â”€ subPage-3a5c7b.contenthash.css   // å­å…¥å£å¯¹åº”çš„CSSæ–‡ä»¶
    â”‚   â””â”€â”€ png/       // å›¾ç‰‡èµ„æºç›®å½•ï¼ˆæŒ‰æ‰©å±•ååˆ†ç±»ï¼‰
    â”‚       â””â”€â”€ logo-7a4b6d.contenthash.png      // å›¾ç‰‡èµ„æºæ–‡ä»¶
    â””â”€â”€ favicon.ico    // ä»publicç›®å½•å¤åˆ¶çš„é™æ€æ–‡ä»¶ï¼ˆè‹¥æœ‰ï¼‰
</code></pre>
<h4 data-id="heading-11">2.3.2 å…³é”®æ–‡ä»¶å†…å®¹ç¤ºä¾‹</h4>
<p><strong>1. webpack-dist/index.html</strong></p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"zh-CN"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Webpack ä¸»å…¥å£é¡µé¢<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
  <span class="hljs-comment">&lt;!-- èµ„æºè·¯å¾„è‡ªåŠ¨æ·»åŠ publicPathå‰ç¼€/webpack-app/ --&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"/webpack-app/webpack-asset/css/main-6d9f4e.contenthash.css"</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"app"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"/webpack-app/webpack-asset/js/runtime-main.contenthash.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"/webpack-app/webpack-asset/js/vendor-8b7c5d.contenthash.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"/webpack-app/webpack-asset/js/main-9f2d7b.contenthash.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<p><strong>2. webpack-dist/webpack-asset/js/main-9f2d7b.contenthash.jsï¼ˆç®€åŒ–ç‰ˆï¼‰</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-meta">"use strict"</span>;
(<span class="hljs-keyword">function</span>(<span class="hljs-params"/>){<span class="hljs-keyword">function</span> <span class="hljs-title function_">r</span>(<span class="hljs-params">e,n,t</span>){<span class="hljs-keyword">function</span> <span class="hljs-title function_">o</span>(<span class="hljs-params">i,f</span>){<span class="hljs-keyword">if</span>(!n[i]){<span class="hljs-keyword">if</span>(!e[i]){<span class="hljs-keyword">var</span> c=<span class="hljs-string">"function"</span>==<span class="hljs-keyword">typeof</span> <span class="hljs-built_in">require</span>&amp;&amp;<span class="hljs-built_in">require</span>;<span class="hljs-keyword">if</span>(!f&amp;&amp;c)<span class="hljs-keyword">return</span> <span class="hljs-title function_">c</span>(i,!<span class="hljs-number">0</span>);<span class="hljs-keyword">if</span>(u)<span class="hljs-keyword">return</span> <span class="hljs-title function_">u</span>(i,!<span class="hljs-number">0</span>);<span class="hljs-keyword">var</span> a=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">"Cannot find module '"</span>+i+<span class="hljs-string">"'"</span>);<span class="hljs-keyword">throw</span> a.<span class="hljs-property">code</span>=<span class="hljs-string">"MODULE_NOT_FOUND"</span>,a}<span class="hljs-keyword">var</span> p=n[i]={<span class="hljs-attr">exports</span>:{}};e[i][<span class="hljs-number">0</span>].<span class="hljs-title function_">call</span>(p.<span class="hljs-property">exports</span>,<span class="hljs-keyword">function</span>(<span class="hljs-params">r</span>){<span class="hljs-keyword">var</span> n=e[i][<span class="hljs-number">1</span>][r];<span class="hljs-keyword">return</span> <span class="hljs-title function_">o</span>(n||r)},p,p.<span class="hljs-property">exports</span>,r,e,n,t)}<span class="hljs-keyword">return</span> n[i].<span class="hljs-property">exports</span>}<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> u=<span class="hljs-string">"function"</span>==<span class="hljs-keyword">typeof</span> <span class="hljs-built_in">require</span>&amp;&amp;<span class="hljs-built_in">require</span>,i=<span class="hljs-number">0</span>;i&lt;t.<span class="hljs-property">length</span>;i++)<span class="hljs-title function_">o</span>(t[i]);<span class="hljs-keyword">return</span> o}<span class="hljs-keyword">return</span> r})()({<span class="hljs-number">1</span>:[<span class="hljs-keyword">function</span>(<span class="hljs-params"><span class="hljs-built_in">require</span>,<span class="hljs-variable language_">module</span>,<span class="hljs-built_in">exports</span></span>){
<span class="hljs-comment">// å¼•å…¥ä¾èµ–å’Œä¸šåŠ¡ä»£ç </span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">App</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./App.js'</span>);
<span class="hljs-title class_">App</span>.<span class="hljs-title function_">init</span>(<span class="hljs-string">'#app'</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Webpack ä¸»å…¥å£åº”ç”¨å¯åŠ¨'</span>);
},{<span class="hljs-string">'./App.js'</span>:<span class="hljs-number">2</span>}]},{},[<span class="hljs-number">1</span>]);
</code></pre>
<h2 data-id="heading-12">ä¸‰ã€Rollup v4.x é…ç½®ä¸è¾“å‡ºç¤ºä¾‹</h2>
<h3 data-id="heading-13">3.1 æ ¸å¿ƒé…ç½®æ–‡ä»¶ï¼ˆrollup.config.jsï¼‰</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { defineConfig } <span class="hljs-keyword">from</span> <span class="hljs-string">'rollup'</span>;
<span class="hljs-keyword">import</span> babel <span class="hljs-keyword">from</span> <span class="hljs-string">'@rollup/plugin-babel'</span>; <span class="hljs-comment">// è½¬è¯‘ES6+è¯­æ³•</span>
<span class="hljs-keyword">import</span> resolve <span class="hljs-keyword">from</span> <span class="hljs-string">'@rollup/plugin-node-resolve'</span>; <span class="hljs-comment">// è§£æç¬¬ä¸‰æ–¹æ¨¡å—</span>
<span class="hljs-keyword">import</span> commonjs <span class="hljs-keyword">from</span> <span class="hljs-string">'@rollup/plugin-commonjs'</span>; <span class="hljs-comment">// è½¬æ¢CommonJSæ¨¡å—ä¸ºESæ¨¡å—</span>
<span class="hljs-keyword">import</span> css <span class="hljs-keyword">from</span> <span class="hljs-string">'rollup-plugin-css-only'</span>; <span class="hljs-comment">// å¤„ç†CSSæ–‡ä»¶</span>
<span class="hljs-keyword">import</span> html <span class="hljs-keyword">from</span> <span class="hljs-string">'@rollup/plugin-html'</span>; <span class="hljs-comment">// ç”ŸæˆHTMLæ–‡ä»¶</span>
<span class="hljs-keyword">import</span> image <span class="hljs-keyword">from</span> <span class="hljs-string">'@rollup/plugin-image'</span>; <span class="hljs-comment">// å¤„ç†å›¾ç‰‡èµ„æº</span>
<span class="hljs-keyword">import</span> { terser } <span class="hljs-keyword">from</span> <span class="hljs-string">'rollup-plugin-terser'</span>; <span class="hljs-comment">// å‹ç¼©JSä»£ç </span>
<span class="hljs-keyword">import</span> hash <span class="hljs-keyword">from</span> <span class="hljs-string">'rollup-plugin-hash'</span>; <span class="hljs-comment">// ç”Ÿæˆæ–‡ä»¶å“ˆå¸Œå€¼</span>
<span class="hljs-keyword">import</span> path <span class="hljs-keyword">from</span> <span class="hljs-string">'path'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>({
  <span class="hljs-comment">// é¡¹ç›®æ ¹ç›®å½•é…ç½®ï¼Œrollupéœ€è¦é€šè¿‡æ’ä»¶é…ç½®</span>
  <span class="hljs-attr">plugins</span>: [
    <span class="hljs-comment">// é…ç½®æ ¹ç›®å½•ä¸ºsrcï¼Œè§£ææ¨¡å—æ—¶ä¼˜å…ˆä»srcæŸ¥æ‰¾</span>
    <span class="hljs-title function_">resolve</span>({
      <span class="hljs-attr">rootDir</span>: path.<span class="hljs-title function_">resolve</span>(__dirname, <span class="hljs-string">'src'</span>),
      <span class="hljs-attr">moduleDirectories</span>: [path.<span class="hljs-title function_">resolve</span>(__dirname, <span class="hljs-string">'src'</span>)]
    }),
    <span class="hljs-comment">// è½¬æ¢CommonJSæ¨¡å—ä¸ºESæ¨¡å—</span>
    <span class="hljs-title function_">commonjs</span>(),
    <span class="hljs-comment">// è½¬è¯‘ES6+è¯­æ³•</span>
    <span class="hljs-title function_">babel</span>({
      <span class="hljs-attr">exclude</span>: <span class="hljs-string">'node_modules/**'</span>,
      <span class="hljs-attr">presets</span>: [<span class="hljs-string">'@babel/preset-env'</span>]
    }),
    <span class="hljs-comment">// å¤„ç†CSSæ–‡ä»¶ï¼Œæå–ä¸ºå•ç‹¬æ–‡ä»¶</span>
    <span class="hljs-title function_">css</span>({
      <span class="hljs-attr">output</span>: <span class="hljs-string">'rollup-asset/css/[name]-[hash].css'</span>
    }),
    <span class="hljs-comment">// å¤„ç†å›¾ç‰‡èµ„æºï¼Œå°å›¾ç‰‡å†…è”ä¸ºbase64ï¼Œå¤§å›¾ç‰‡è¾“å‡ºä¸ºæ–‡ä»¶</span>
    <span class="hljs-title function_">image</span>({
      <span class="hljs-attr">limit</span>: <span class="hljs-number">4</span> * <span class="hljs-number">1024</span> <span class="hljs-comment">// 4kbä»¥ä¸‹å†…è”</span>
    }),
    <span class="hljs-comment">// ç”ŸæˆHTMLæ–‡ä»¶ï¼Œè‡ªåŠ¨å¼•å…¥æ‰“åŒ…åçš„èµ„æºï¼ˆé…ç½®baseè·¯å¾„ï¼‰</span>
    <span class="hljs-title function_">html</span>({
      <span class="hljs-attr">fileName</span>: <span class="hljs-function">(<span class="hljs-params">{ name }</span>) =&gt;</span> <span class="hljs-string">`<span class="hljs-subst">${name}</span>.html`</span>, <span class="hljs-comment">// ä¸ºæ¯ä¸ªå…¥å£ç”Ÿæˆå¯¹åº”HTML</span>
      <span class="hljs-attr">publicPath</span>: <span class="hljs-string">'/rollup-app/'</span>, <span class="hljs-comment">// åŸºç¡€è·¯å¾„ï¼ˆç±»ä¼¼Viteçš„baseï¼‰ï¼Œé€‚é…å­è·¯å¾„éƒ¨ç½²</span>
      <span class="hljs-attr">template</span>: <span class="hljs-function">(<span class="hljs-params">{ attributes, bundle, files, publicPath, title }</span>) =&gt;</span> {
        <span class="hljs-keyword">const</span> jsFiles = files.<span class="hljs-property">js</span>.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">file</span> =&gt;</span> file.<span class="hljs-property">name</span> === title.<span class="hljs-title function_">toLowerCase</span>());
        <span class="hljs-keyword">const</span> cssFiles = files.<span class="hljs-property">css</span>.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">file</span> =&gt;</span> file.<span class="hljs-property">name</span> === title.<span class="hljs-title function_">toLowerCase</span>());
        <span class="hljs-keyword">return</span> <span class="hljs-string">`
          &lt;!DOCTYPE html&gt;
          &lt;html&gt;
          &lt;head&gt;
            &lt;meta charset="utf-8"&gt;
            &lt;title&gt;<span class="hljs-subst">${title}</span>&lt;/title&gt;
            <span class="hljs-subst">${cssFiles.map(file =&gt; <span class="hljs-string">`&lt;link rel="stylesheet" href="<span class="hljs-subst">${publicPath}</span><span class="hljs-subst">${file.fileName}</span>"&gt;`</span>).join(<span class="hljs-string">''</span>)}</span>
          &lt;/head&gt;
          &lt;body&gt;
            &lt;div id="app"&gt;&lt;/div&gt;
            <span class="hljs-subst">${jsFiles.map(file =&gt; <span class="hljs-string">`&lt;script type="module" src="<span class="hljs-subst">${publicPath}</span><span class="hljs-subst">${file.fileName}</span>"&gt;&lt;/script&gt;`</span>).join(<span class="hljs-string">''</span>)}</span>
          &lt;/body&gt;
          &lt;/html&gt;
        `</span>;
      },
      <span class="hljs-attr">title</span>: <span class="hljs-function">(<span class="hljs-params">{ name }</span>) =&gt;</span> <span class="hljs-string">`Rollup <span class="hljs-subst">${name.charAt(<span class="hljs-number">0</span>).toUpperCase() + name.slice(<span class="hljs-number">1</span>)}</span> Page`</span>
    }),
    <span class="hljs-comment">// ç”Ÿæˆæ–‡ä»¶å“ˆå¸Œå€¼ï¼Œç”¨äºç¼“å­˜æ§åˆ¶</span>
    <span class="hljs-title function_">hash</span>({
      <span class="hljs-attr">dest</span>: <span class="hljs-string">'rollup-dist'</span>,
      <span class="hljs-attr">hashLength</span>: <span class="hljs-number">8</span> <span class="hljs-comment">// å“ˆå¸Œå€¼é•¿åº¦</span>
    }),
    <span class="hljs-comment">// ç”Ÿäº§ç¯å¢ƒå‹ç¼©JSä»£ç </span>
    <span class="hljs-title function_">terser</span>()
  ],
  <span class="hljs-comment">// å…¥å£é…ç½®ï¼ˆåŸºäºrootDir:srcï¼Œè·¯å¾„ç®€åŒ–ï¼‰</span>
  <span class="hljs-attr">input</span>: {
    <span class="hljs-attr">main</span>: <span class="hljs-string">'./main.js'</span>, <span class="hljs-comment">// ä¸»å…¥å£ï¼ŒåŸºäºrootDir:srcï¼Œå®é™…è·¯å¾„ä¸ºsrc/main.js</span>
    <span class="hljs-attr">subPage</span>: <span class="hljs-string">'./subPage.js'</span> <span class="hljs-comment">// å­å…¥å£ï¼Œå®é™…è·¯å¾„ä¸ºsrc/subPage.js</span>
  },
  <span class="hljs-comment">// äº§å‡ºé…ç½®ï¼ˆå¤šå…¥å£æ—¶å¯é…ç½®å¤šä¸ªè¾“å‡ºï¼‰</span>
  <span class="hljs-attr">output</span>: [
    {
      <span class="hljs-attr">dir</span>: <span class="hljs-string">'../rollup-dist'</span>, <span class="hljs-comment">// å› rootDirä¸ºsrcï¼Œéœ€å‘ä¸Šä¸€çº§è¾“å‡ºï¼Œä¿æŒå·¥å…·å+distè§„åˆ™</span>
      <span class="hljs-attr">format</span>: <span class="hljs-string">'esm'</span>, <span class="hljs-comment">// è¾“å‡ºä¸ºESæ¨¡å—æ ¼å¼</span>
      <span class="hljs-attr">entryFileNames</span>: <span class="hljs-string">'rollup-asset/js/[name]-[hash].js'</span>, <span class="hljs-comment">// å…¥å£JSè¾“å‡ºè·¯å¾„</span>
      <span class="hljs-attr">chunkFileNames</span>: <span class="hljs-string">'rollup-asset/js/[name]-[hash].chunk.js'</span>, <span class="hljs-comment">// ä»£ç åˆ†å‰²chunkè·¯å¾„</span>
      <span class="hljs-attr">assetFileNames</span>: <span class="hljs-string">'rollup-asset/[extname]/[name]-[hash][extname]'</span>, <span class="hljs-comment">// é™æ€èµ„æºè·¯å¾„</span>
      <span class="hljs-attr">sourcemap</span>: <span class="hljs-literal">false</span>
    }
  ],
  <span class="hljs-comment">// ä»£ç åˆ†å‰²é…ç½®</span>
  <span class="hljs-attr">preserveModules</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">// å…³é—­ä¿ç•™æ¨¡å—ç»“æ„ï¼Œåˆå¹¶ç›¸å…³æ¨¡å—</span>
});
</code></pre>
<h3 data-id="heading-14">3.2 å…¥å£ä¸äº§å‡ºé…ç½®è¯´æ˜</h3>



























































<table><thead><tr><th>é…ç½®ç±»å‹</th><th>å…·ä½“é…ç½®é¡¹</th><th>é…ç½®å€¼</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>å…¥å£é…ç½®</td><td>ä¸»å…¥å£</td><td>./main.js</td><td>åŸºäºrootDir:srcï¼Œå®é™…è·¯å¾„ä¸ºsrc/main.jsï¼Œè´Ÿè´£åˆå§‹åŒ–åº”ç”¨</td></tr><tr><td/><td>å­å…¥å£</td><td>./subPage.js</td><td>åŸºäºrootDir:srcï¼Œå®é™…è·¯å¾„ä¸ºsrc/subPage.jsï¼Œç‹¬ç«‹ç”Ÿæˆå¯¹åº”æ–‡ä»¶</td></tr><tr><td>äº§å‡ºåŠåŸºç¡€é…ç½®</td><td>é¡¹ç›®æ ¹ç›®å½•ï¼ˆrootDirï¼‰</td><td>path.resolve(__dirname, 'src')</td><td>ç±»ä¼¼Viteçš„rootï¼Œé€šè¿‡resolveæ’ä»¶é…ç½®ï¼Œå…¥å£è·¯å¾„åŸºäºæ­¤ç®€åŒ–</td></tr><tr><td/><td>åŸºç¡€è·¯å¾„ï¼ˆpublicPathï¼‰</td><td>/rollup-app/</td><td>ç±»ä¼¼Viteçš„baseï¼Œåœ¨htmlæ’ä»¶ä¸­é…ç½®ï¼Œä¸ºèµ„æºå¼•ç”¨æ·»åŠ è·¯å¾„å‰ç¼€</td></tr><tr><td/><td>äº§ç‰©æ ¹ç›®å½•</td><td>../rollup-dist</td><td>å› rootDirä¸ºsrcï¼Œå‘ä¸Šä¸€çº§è¾“å‡ºï¼Œå®é™…ä½äºé¡¹ç›®æ ¹ç›®å½•ï¼Œéµå¾ªå·¥å…·å+distè§„åˆ™</td></tr><tr><td/><td>é™æ€èµ„æºæ ¹ç›®å½•</td><td>rollup-asset</td><td>å­˜æ”¾JSã€CSSã€å›¾ç‰‡ç­‰é™æ€èµ„æºï¼Œéµå¾ªâ€œæ„å»ºå·¥å…·åç§°+assetâ€è§„åˆ™</td></tr><tr><td/><td>å…¥å£JSè¾“å‡ºè·¯å¾„</td><td>rollup-asset/js/[name]-[hash].js</td><td>[name]ä¸ºå…¥å£åï¼Œ[hash]ä¸ºæ–‡ä»¶å“ˆå¸Œå€¼ï¼Œè¾“å‡ºä¸ºESæ¨¡å—æ ¼å¼</td></tr><tr><td/><td>CSSè¾“å‡ºè·¯å¾„</td><td>rollup-asset/css/[name]-[hash].css</td><td>é€šè¿‡rollup-plugin-css-onlyæå–çš„å•ç‹¬CSSæ–‡ä»¶è·¯å¾„</td></tr></tbody></table>
<h3 data-id="heading-15">3.3 æ‰“åŒ…åæ–‡ä»¶å†…å®¹ç¤ºä¾‹</h3>
<h4 data-id="heading-16">3.3.1 æ–‡ä»¶ç»“æ„</h4>
<pre><code class="hljs language-Plain" lang="Plain">// é¡¹ç›®æ•´ä½“ç›®å½•ç»“æ„ï¼ˆä½“ç°rootDirä¸output.dirå…³ç³»ï¼‰
project-root/          // å®é™…é¡¹ç›®æ ¹ç›®å½•
â”œâ”€â”€ src/               // rootDiré…ç½®æŒ‡å®šçš„é¡¹ç›®æ ¹ç›®å½•
â”‚   â”œâ”€â”€ main.js        // ä¸»å…¥å£æ–‡ä»¶ï¼ˆåŸºäºrootDirç®€åŒ–è·¯å¾„ï¼‰
â”‚   â”œâ”€â”€ subPage.js     // å­å…¥å£æ–‡ä»¶
â”‚   â””â”€â”€ rollup.config.js // Rollupé…ç½®æ–‡ä»¶ï¼ˆæ”¾srcå†…ï¼Œéœ€é€‚é…æ ¹ç›®å½•ï¼‰
â””â”€â”€ rollup-dist/       // äº§ç‰©æ ¹ç›®å½•ï¼Œç”±output.dir:../rollup-distç”Ÿæˆ
    â”œâ”€â”€ main.html      // ä¸»å…¥å£å¯¹åº”çš„HTMLæ–‡ä»¶
    â”œâ”€â”€ subPage.html   // å­å…¥å£å¯¹åº”çš„HTMLæ–‡ä»¶
    â”œâ”€â”€ manifest.json  // å“ˆå¸Œå€¼æ˜ å°„è¡¨ï¼ˆè®°å½•åŸæ–‡ä»¶åä¸å“ˆå¸Œæ–‡ä»¶åçš„å¯¹åº”å…³ç³»ï¼‰
    â””â”€â”€ rollup-asset/  // é™æ€èµ„æºç›®å½•
        â”œâ”€â”€ js/        // JSæ–‡ä»¶ç›®å½•
        â”‚   â”œâ”€â”€ main-7d2f9b.js      // ä¸»å…¥å£JSæ–‡ä»¶ï¼ˆå“ˆå¸Œå€¼ç¤ºä¾‹ï¼‰
        â”‚   â”œâ”€â”€ subPage-3c5a1e.js   // å­å…¥å£JSæ–‡ä»¶ï¼ˆå“ˆå¸Œå€¼ç¤ºä¾‹ï¼‰
        â”‚   â””â”€â”€ common-5b7c4d.js    // å…¬å…±æ¨¡å—chunkï¼ˆä»£ç åˆ†å‰²ç”Ÿæˆï¼‰
        â”œâ”€â”€ css/       // CSSæ–‡ä»¶ç›®å½•
        â”‚   â”œâ”€â”€ main-4f8d3e.css     // ä¸»å…¥å£å¯¹åº”çš„CSSæ–‡ä»¶
        â”‚   â””â”€â”€ subPage-2b6c5a.css  // å­å…¥å£å¯¹åº”çš„CSSæ–‡ä»¶
        â””â”€â”€ png/       // å›¾ç‰‡èµ„æºç›®å½•ï¼ˆæŒ‰æ‰©å±•ååˆ†ç±»ï¼‰
            â””â”€â”€ logo-6d3b5a.png     // å›¾ç‰‡èµ„æºæ–‡ä»¶ï¼ˆå“ˆå¸Œå€¼ç¤ºä¾‹ï¼Œè¶…è¿‡4kbæ—¶è¾“å‡ºï¼‰
</code></pre>
<h4 data-id="heading-17">3.3.2 å…³é”®æ–‡ä»¶å†…å®¹ç¤ºä¾‹</h4>
<p><strong>1. rollup-dist/main.html</strong></p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"utf-8"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Rollup Main Page<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
  <span class="hljs-comment">&lt;!-- èµ„æºå¼•ç”¨è·¯å¾„æ·»åŠ publicPathå‰ç¼€/rollup-app/ --&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"/rollup-app/rollup-asset/css/main-4f8d3e.css"</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"app"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"module"</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"/rollup-app/rollup-asset/js/common-5b7c4d.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"module"</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"/rollup-app/rollup-asset/js/main-7d2f9b.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<p><strong>2. rollup-dist/rollup-asset/js/main-7d2f9b.jsï¼ˆç®€åŒ–ç‰ˆï¼‰</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { commonFunc } <span class="hljs-keyword">from</span> <span class="hljs-string">'./common-5b7c4d.js'</span>;

<span class="hljs-keyword">class</span> <span class="hljs-title class_">App</span> {
  <span class="hljs-title function_">init</span>(<span class="hljs-params">el</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">el</span> = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(el);
    <span class="hljs-title function_">commonFunc</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">render</span>();
  }
  <span class="hljs-title function_">render</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">el</span>.<span class="hljs-property">innerHTML</span> = <span class="hljs-string">'&lt;h1&gt;Rollup åº”ç”¨&lt;/h1&gt;'</span>;
  }
}

<span class="hljs-keyword">new</span> <span class="hljs-title class_">App</span>().<span class="hljs-title function_">init</span>(<span class="hljs-string">'#app'</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Rollup ä¸»å…¥å£åº”ç”¨å¯åŠ¨'</span>);

</code></pre>
<h2 data-id="heading-18">å››ã€æ„å»ºå·¥å…·å…±æ€§é…ç½®</h2>
<h3 data-id="heading-19">4.1 å…±æ€§é…ç½®ï¼ˆåŠŸèƒ½å¯¹æ ‡ï¼‰</h3>
<p>ä¸‰å¤§å·¥å…·è™½é…ç½®åç§°æˆ–å®ç°æ–¹å¼ä¸åŒï¼Œä½†æ ¸å¿ƒåŠŸèƒ½å­˜åœ¨æ˜ç¡®å¯¹æ ‡å…³ç³»ï¼Œå‡å›´ç»•â€œå…¥å£ç®¡ç†ã€èµ„æºå¤„ç†ã€äº§å‡ºæ§åˆ¶ã€ç¯å¢ƒé€‚é…â€å››å¤§æ ¸å¿ƒåœºæ™¯è®¾è®¡ï¼Œå…·ä½“å¯¹æ ‡å¦‚ä¸‹ï¼š</p>




































































<table><thead><tr><th><strong>åŠŸèƒ½åœºæ™¯</strong></th><th><strong>Vite v5.x</strong></th><th><strong>Webpack v5.x</strong></th><th><strong>Rollup v4.x</strong></th><th><strong>åŠŸèƒ½å…±æ€§è¯´æ˜</strong></th></tr></thead><tbody><tr><td>é¡¹ç›®æ ¹ç›®å½•</td><td>root</td><td>context</td><td>resolve.rootDirï¼ˆæ’ä»¶é…ç½®ï¼‰</td><td>å®šä¹‰é¡¹ç›®åŸºå‡†ç›®å½•ï¼Œç®€åŒ–å…¥å£åŠæ¨¡å—å¼•ç”¨è·¯å¾„ï¼Œç»Ÿä¸€èµ„æºæŸ¥æ‰¾æ ¹èŠ‚ç‚¹</td></tr><tr><td>éƒ¨ç½²åŸºç¡€è·¯å¾„</td><td>base</td><td>output.publicPath</td><td>html.publicPathï¼ˆæ’ä»¶é…ç½®ï¼‰</td><td>é€‚é…å­è·¯å¾„éƒ¨ç½²åœºæ™¯ï¼Œä¸ºæ‰€æœ‰èµ„æºå¼•ç”¨æ·»åŠ ç»Ÿä¸€è·¯å¾„å‰ç¼€ï¼Œé¿å…404é”™è¯¯</td></tr><tr><td>é™æ€èµ„æºå…¬å…±ç›®å½•</td><td>publicDirï¼ˆåŸç”Ÿï¼‰</td><td>copy-webpack-pluginï¼ˆæ’ä»¶ï¼‰</td><td>rollup-plugin-copyï¼ˆæ’ä»¶ï¼‰</td><td>å­˜æ”¾æ— éœ€æ„å»ºå¤„ç†çš„é™æ€èµ„æºï¼ˆå¦‚faviconã€å…¨å±€é™æ€CSSï¼‰ï¼Œæ‰“åŒ…æ—¶ç›´æ¥å¤åˆ¶åˆ°äº§ç‰©æ ¹ç›®å½•</td></tr><tr><td>å…¥å£é…ç½®</td><td>build.rollupOptions.input</td><td>entry</td><td>input</td><td>æ”¯æŒå•å…¥å£/å¤šå…¥å£é…ç½®ï¼ŒæŒ‡å®šåº”ç”¨å¯åŠ¨çš„æ ¸å¿ƒæ–‡ä»¶è·¯å¾„ï¼Œå¤šå…¥å£æ—¶å¯ç‹¬ç«‹ç”Ÿæˆäº§ç‰©</td></tr><tr><td>äº§ç‰©è¾“å‡ºç›®å½•</td><td>build.outDir</td><td>output.path</td><td>output.dir</td><td>æŒ‡å®šæ‰“åŒ…åäº§ç‰©çš„å­˜æ”¾ç›®å½•ï¼Œå‡æ”¯æŒè‡ªå®šä¹‰è·¯å¾„</td></tr><tr><td>é™æ€èµ„æºè¾“å‡ºè·¯å¾„</td><td>build.assetsDir + è¾“å‡ºè§„åˆ™</td><td>output.assetModuleFilename</td><td>output.assetFileNames</td><td>æŒ‡å®šJSã€CSSã€å›¾ç‰‡ç­‰ç»å¤„ç†èµ„æºçš„è¾“å‡ºè·¯å¾„åŠå‘½åè§„åˆ™ï¼Œæ”¯æŒå“ˆå¸Œå€¼ä¼˜åŒ–ç¼“å­˜</td></tr><tr><td>ä»£ç åˆ†å‰²</td><td>build.rollupOptions.output.chunkFileNames</td><td>optimization.splitChunks</td><td>output.chunkFileNames</td><td>æ‹†åˆ†å…¬å…±ä¾èµ–ï¼ˆå¦‚ç¬¬ä¸‰æ–¹åº“ï¼‰æˆ–å¼‚æ­¥æ¨¡å—ï¼Œå‡å°‘é‡å¤ä»£ç ï¼Œæå‡é¦–å±åŠ è½½é€Ÿåº¦</td></tr><tr><td>å‹ç¼©ä¼˜åŒ–</td><td>build.minifyï¼ˆesbuild/terserï¼‰</td><td>mode: productionï¼ˆè‡ªåŠ¨å‹ç¼©ï¼‰</td><td>rollup-plugin-terserï¼ˆæ’ä»¶ï¼‰</td><td>ç”Ÿäº§ç¯å¢ƒå‹ç¼©JS/CSSä»£ç ï¼Œç§»é™¤ç©ºæ ¼ã€æ³¨é‡Šï¼Œé™ä½äº§ç‰©ä½“ç§¯</td></tr></tbody></table>
<h2 data-id="heading-20">æ€»ç»“</h2>
<ol>
<li>Viteï¼šé¡¶å±‚é…ç½®ç®€æ´ç›´è§‚ï¼ŒåŸç”Ÿé›†æˆå¼€å‘/é¢„è§ˆæœåŠ¡å™¨ï¼Œå¼€å‘å¯åŠ¨é€Ÿåº¦å¿«ï¼Œé€‚åˆå‰ç«¯åº”ç”¨å¿«é€Ÿå¼€å‘ï¼›</li>
<li>Webpackï¼šé…ç½®çµæ´»å…¨é¢ï¼Œloader+æ’ä»¶ç”Ÿæ€ä¸°å¯Œï¼Œæ”¯æŒå¤æ‚æ¨¡å—è§£æå’Œåœºæ™¯é€‚é…ï¼Œé€‚åˆå¤§å‹å¤æ‚é¡¹ç›®ï¼›</li>
<li>Rollupï¼šä¸“æ³¨ESæ¨¡å—æ‰“åŒ…ï¼Œæ”¯æŒå¤šæ ¼å¼è¾“å‡ºï¼Œäº§ç‰©è½»é‡æ— å†—ä½™ï¼Œé€‚åˆç±»åº“æˆ–è½»é‡åº”ç”¨å¼€å‘ã€‚</li>
</ol>
<p>å®é™…é¡¹ç›®ä¸­å¯æ ¹æ®é¡¹ç›®ç±»å‹ï¼ˆåº”ç”¨/ç±»åº“ï¼‰ã€å¤æ‚åº¦åŠå›¢é˜Ÿç†Ÿæ‚‰åº¦é€‰æ‹©ï¼šå‰ç«¯åº”ç”¨ä¼˜å…ˆé€‰Viteï¼Œå¤§å‹å¤æ‚é¡¹ç›®é€‰Webpackï¼Œç±»åº“å¼€å‘é€‰Rollupã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Promiseï¼šè®© JavaScript å¼‚æ­¥ä»»åŠ¡â€œåŒæ­¥åŒ–â€çš„åˆ©å™¨]]></title>    <link>https://juejin.cn/post/7572390974460133376</link>    <guid>https://juejin.cn/post/7572390974460133376</guid>    <pubDate>2025-11-14T14:26:27.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572390974460133376" data-draft-id="7570899512782864447" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Promiseï¼šè®© JavaScript å¼‚æ­¥ä»»åŠ¡â€œåŒæ­¥åŒ–â€çš„åˆ©å™¨"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,Promise"/> <meta itemprop="datePublished" content="2025-11-14T14:26:27.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="AAAé˜¿giao"/> <meta itemprop="url" content="https://juejin.cn/user/473218785740627"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Promiseï¼šè®© JavaScript å¼‚æ­¥ä»»åŠ¡â€œåŒæ­¥åŒ–â€çš„åˆ©å™¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/473218785740627/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    AAAé˜¿giao
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-14T14:26:27.000Z" title="Fri Nov 14 2025 14:26:27 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€</h2>
<p>åœ¨å‰ç«¯å¼€å‘ä¸­ï¼Œå¼‚æ­¥ç¼–ç¨‹æ˜¯ç»•ä¸å¼€çš„è¯é¢˜ã€‚JavaScript ä½œä¸ºä¸€é—¨å•çº¿ç¨‹è¯­è¨€ï¼Œæ— æ³•åƒå¤šçº¿ç¨‹è¯­è¨€é‚£æ ·å¹¶è¡Œå¤„ç†å¤šä¸ªä»»åŠ¡ã€‚ä¸ºäº†ä¸è®©è€—æ—¶æ“ä½œï¼ˆå¦‚ç½‘ç»œè¯·æ±‚ã€æ–‡ä»¶è¯»å–ã€å®šæ—¶å™¨ç­‰ï¼‰é˜»å¡ä¸»çº¿ç¨‹ï¼ŒJS å¼•å…¥äº†**äº‹ä»¶å¾ªç¯ï¼ˆEvent Loopï¼‰**æœºåˆ¶ï¼Œå°†è¿™äº›æ“ä½œæ”¾å…¥ä»»åŠ¡é˜Ÿåˆ—ä¸­ï¼Œç­‰å¾…ä¸»çº¿ç¨‹ç©ºé—²åå†æ‰§è¡Œã€‚</p>
<p>ä½†éšä¹‹è€Œæ¥çš„é—®é¢˜æ˜¯ï¼š<strong>ä»£ç çš„æ‰§è¡Œé¡ºåºä¸å†ä¸ä¹¦å†™é¡ºåºä¸€è‡´</strong>ï¼Œè¿™ä½¿å¾—é€»è¾‘å˜å¾—éš¾ä»¥è¿½è¸ªï¼Œå°¤å…¶åœ¨å¤æ‚çš„ä¸šåŠ¡åœºæ™¯ä¸­ï¼Œå¾ˆå®¹æ˜“é™·å…¥â€œå›è°ƒåœ°ç‹±â€ã€‚</p>
<p>ä¸ºäº†è§£å†³è¿™ä¸€é—®é¢˜ï¼ŒES6 å¼•å…¥äº† <strong>Promise</strong> â€”â€” ä¸€ç§ç”¨äºæ›´ä¼˜é›…åœ°å¤„ç†å¼‚æ­¥æ“ä½œçš„å·¥å…·ã€‚å®ƒä¸ä»…è®©å¼‚æ­¥ä»£ç çœ‹èµ·æ¥åƒâ€œåŒæ­¥â€æ‰§è¡Œï¼Œè¿˜æå¤§åœ°æå‡äº†ä»£ç çš„å¯è¯»æ€§ä¸å¯ç»´æŠ¤æ€§ã€‚</p>
<hr/>
<h2 data-id="heading-1">ä¸€ã€ä¸ºä»€ä¹ˆéœ€è¦ Promiseï¼Ÿ</h2>
<h3 data-id="heading-2">1. JavaScript çš„å•çº¿ç¨‹ç‰¹æ€§</h3>
<p>JavaScript æ˜¯å•çº¿ç¨‹è¯­è¨€ï¼Œæ„å‘³ç€åŒä¸€æ—¶é—´åªèƒ½æ‰§è¡Œä¸€ä¸ªä»»åŠ¡ã€‚å¦‚æœé‡åˆ°è€—æ—¶æ“ä½œï¼ˆæ¯”å¦‚ <code>setTimeout</code> æˆ– <code>fs.readFile</code>ï¼‰ï¼Œè‹¥é‡‡ç”¨åŒæ­¥æ–¹å¼ç­‰å¾…ï¼Œé¡µé¢å°±ä¼šå¡æ­»ï¼Œç”¨æˆ·æ— æ³•è¿›è¡Œä»»ä½•äº¤äº’ã€‚</p>
<p>å› æ­¤ï¼ŒJS å°†è¿™äº›æ“ä½œäº¤ç»™æµè§ˆå™¨æˆ– Node.js ç¯å¢ƒå»å¼‚æ­¥å¤„ç†ï¼Œä¸»çº¿ç¨‹ç»§ç»­æ‰§è¡Œåç»­ä»£ç ã€‚ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-number">1</span>);
<span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-number">2</span>), <span class="hljs-number">0</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-number">3</span>);
<span class="hljs-comment">// è¾“å‡ºï¼š1 â†’ 3 â†’ 2</span>
</code></pre>
<p>è™½ç„¶ <code>setTimeout</code> å»¶è¿Ÿä¸º 0ï¼Œä½†å®ƒä»æ˜¯å¼‚æ­¥ä»»åŠ¡ï¼Œä¼šè¢«æ”¾å…¥ä»»åŠ¡é˜Ÿåˆ—ï¼Œç­‰ä¸»çº¿ç¨‹æ‰§è¡Œå®Œæ‰€æœ‰åŒæ­¥ä»£ç åæ‰æ‰§è¡Œã€‚</p>
<h3 data-id="heading-3">2. å›è°ƒå‡½æ•°çš„å±€é™æ€§</h3>
<p>æ—©æœŸæˆ‘ä»¬é€šè¿‡å›è°ƒå‡½æ•°å¤„ç†å¼‚æ­¥ç»“æœï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">fs.<span class="hljs-title function_">readFile</span>(<span class="hljs-string">'a.txt'</span>, <span class="hljs-function">(<span class="hljs-params">err, data</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data.<span class="hljs-title function_">toString</span>());
});
</code></pre>
<p>ä½†å½“å¤šä¸ªå¼‚æ­¥æ“ä½œéœ€è¦æŒ‰é¡ºåºæ‰§è¡Œæ—¶ï¼Œå›è°ƒåµŒå¥—ä¼šè¿…é€Ÿå¤±æ§ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title function_">readFile</span>(<span class="hljs-string">'1.txt'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title function_">readFile</span>(<span class="hljs-string">'2.txt'</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">readFile</span>(<span class="hljs-string">'3.txt'</span>, <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-comment">// å›è°ƒåœ°ç‹±ï¼</span>
    });
  });
});
</code></pre>
<p>è¿™ç§ä»£ç ä¸ä»…éš¾ä»¥é˜…è¯»ï¼Œè°ƒè¯•å’Œé”™è¯¯å¤„ç†ä¹Ÿæå…¶å›°éš¾ã€‚</p>
<hr/>
<h2 data-id="heading-4">äºŒã€Promiseï¼šå¼‚æ­¥å˜â€œåŒæ­¥â€çš„æ¡¥æ¢</h2>
<p>Promise æ˜¯ ES6 æä¾›çš„ä¸€ç§å¯¹è±¡ï¼Œç”¨äºè¡¨ç¤ºä¸€ä¸ªå¼‚æ­¥æ“ä½œçš„æœ€ç»ˆå®Œæˆï¼ˆæˆ–å¤±è´¥ï¼‰åŠå…¶ç»“æœå€¼ã€‚å®ƒçš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼š<strong>å°†å¼‚æ­¥æ“ä½œçš„ç»“æœâ€œå°è£…â€èµ·æ¥ï¼Œé€šè¿‡ <code>.then()</code> å’Œ <code>.catch()</code> æ¥ç»Ÿä¸€å¤„ç†æˆåŠŸä¸å¤±è´¥çš„æƒ…å†µ</strong>ã€‚</p>
<h3 data-id="heading-5">åŸºæœ¬ç”¨æ³•ç¤ºä¾‹</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// 1. ç«‹åˆ»æ‰§è¡Œï¼Œè¾“å‡º 1ï¼ˆåŒæ­¥ä»£ç ï¼‰</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-number">1</span>);

<span class="hljs-comment">// 2. åˆ›å»ºä¸€ä¸ª Promiseï¼Œç«‹åˆ»å¼€å§‹æ‰§è¡Œé‡Œé¢çš„ä»£ç ï¼ˆä½†é‡Œé¢çš„å¼‚æ­¥æ“ä½œä¸ä¼šé˜»å¡åç»­ä»£ç ï¼‰</span>
<span class="hljs-keyword">const</span> p = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> {
  <span class="hljs-comment">// 3. è®¾ç½®ä¸€ä¸ª 1 ç§’åæ‰§è¡Œçš„å®šæ—¶å™¨ï¼ˆå¼‚æ­¥ä»»åŠ¡ï¼Œä¸ä¼šé©¬ä¸Šè¿è¡Œï¼‰</span>
  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">// 5. 1 ç§’åï¼Œå…ˆè¾“å‡º 2</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-number">2</span>);
    <span class="hljs-comment">// 6. è°ƒç”¨ resolve()ï¼Œå‘Šè¯‰ Promiseï¼šâ€œä»»åŠ¡å®Œæˆäº†ï¼â€</span>
    <span class="hljs-title function_">resolve</span>();
  }, <span class="hljs-number">1000</span>);
});

<span class="hljs-comment">// 4. æ³¨å†Œä¸€ä¸ªâ€œå½“ Promise æˆåŠŸå®Œæˆæ—¶â€è¦è¿è¡Œçš„å‡½æ•°ï¼ˆä½†æ­¤æ—¶ Promise è¿˜æ²¡å®Œæˆï¼Œæ‰€ä»¥å…ˆè®°ä¸‹æ¥ï¼‰</span>
p.<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-comment">// 7. Promise å®Œæˆåï¼Œç«‹å³æ‰§è¡Œè¿™é‡Œï¼Œè¾“å‡º 3</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-number">3</span>);
});

<span class="hljs-comment">// æœ€ç»ˆè¾“å‡ºé¡ºåºï¼š1 â†’ 2 â†’ 3</span>
<span class="hljs-comment">// è™½ç„¶ 2 å’Œ 3 æ˜¯å¼‚æ­¥çš„ï¼Œä½†é€šè¿‡ Promiseï¼Œæˆ‘ä»¬ç¡®ä¿äº† 3 ä¸€å®šåœ¨ 2 ä¹‹åæ‰§è¡Œã€‚</span>
</code></pre>
<p>è™½ç„¶ <code>setTimeout</code> ä»æ˜¯å¼‚æ­¥çš„ï¼Œä½†é€šè¿‡ Promiseï¼Œæˆ‘ä»¬ç¡®ä¿äº†â€œ3â€ä¸€å®šåœ¨â€œ2â€ä¹‹åè¾“å‡ºï¼Œ<strong>å®ç°äº†é€»è¾‘ä¸Šçš„â€œåŒæ­¥åŒ–â€</strong> ã€‚</p>
<hr/>
<h2 data-id="heading-6">ä¸‰ã€æ·±å…¥ç†è§£ Promise æœºåˆ¶</h2>
<h3 data-id="heading-7">1. Promise çš„ä¸‰ç§çŠ¶æ€</h3>
<ul>
<li><strong>pendingï¼ˆè¿›è¡Œä¸­ï¼‰</strong> ï¼šåˆå§‹çŠ¶æ€ï¼Œæ—¢ä¸æ˜¯æˆåŠŸä¹Ÿä¸æ˜¯å¤±è´¥ã€‚</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/76b7def1bab040aa8174ac53830c1eac~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUFB6Zi_Z2lhbw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763735187&amp;x-signature=wqq68QatjhOUKOSNVQXWP9mE%2Bew%3D" alt="" loading="lazy"/><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<ul>
<li><strong>fulfilledï¼ˆå·²æˆåŠŸï¼‰</strong> ï¼šå¼‚æ­¥æ“ä½œæˆåŠŸå®Œæˆï¼Œè°ƒç”¨ <code>resolve()</code>ã€‚</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ae7489d88a754d13843e307c4a989e21~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUFB6Zi_Z2lhbw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763735187&amp;x-signature=UYpYpSt2sQBQ6jFbiqEH%2BdcjeMY%3D" alt="" loading="lazy"/><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<ul>
<li><strong>rejectedï¼ˆå·²å¤±è´¥ï¼‰</strong> ï¼šå¼‚æ­¥æ“ä½œå¤±è´¥ï¼Œè°ƒç”¨ <code>reject()</code>ã€‚</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/18e5ef69f25848789e15ebddb74deedc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUFB6Zi_Z2lhbw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763735187&amp;x-signature=qqbiDfNtx7Hyf5489nTv9Q2udYM%3D" alt="" loading="lazy"/><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<p>ä¸€æ—¦çŠ¶æ€æ”¹å˜ï¼Œå°±ä¸å¯é€†ã€‚</p>
<h3 data-id="heading-8">2. æ„é€ å‡½æ•°åŒæ­¥æ‰§è¡Œ</h3>
<p><code>new Promise()</code> ä¸­çš„æ‰§è¡Œå™¨å‡½æ•°ï¼ˆexecutorï¼‰æ˜¯<strong>ç«‹å³åŒæ­¥æ‰§è¡Œ</strong>çš„ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// 1. ç«‹åˆ»æ‰§è¡Œï¼Œè¾“å‡º 'start'ï¼ˆåŒæ­¥ä»»åŠ¡ï¼‰</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'start'</span>);

<span class="hljs-comment">// 2. åˆ›å»ºä¸€ä¸ª Promiseï¼Œä¼š**ç«‹å³åŒæ­¥æ‰§è¡Œ**ä¼ å…¥çš„å‡½æ•°ï¼ˆç§°ä¸º executorï¼‰</span>
<span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> {
  <span class="hljs-comment">// 3. è¿™è¡Œæ˜¯åŒæ­¥æ‰§è¡Œçš„ï¼æ‰€ä»¥é©¬ä¸Šè¾“å‡º 'in executor'</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'in executor'</span>);

  <span class="hljs-comment">// 4. è®¾ç½®ä¸€ä¸ª 1 ç§’åè°ƒç”¨ resolve() çš„å®šæ—¶å™¨ï¼ˆå¼‚æ­¥ä»»åŠ¡ï¼Œä¸ä¼šé˜»å¡ä»£ç ï¼‰</span>
  <span class="hljs-comment">//    æ­¤æ—¶ Promise çŠ¶æ€è¿˜æ˜¯ pendingï¼Œä½†ä¸»çº¿ç¨‹ä¸ä¼šç­‰å®ƒ</span>
  <span class="hljs-built_in">setTimeout</span>(resolve, <span class="hljs-number">1000</span>);
});

<span class="hljs-comment">// 5. ä¸»çº¿ç¨‹ç»§ç»­å¾€ä¸‹èµ°ï¼Œç«‹åˆ»æ‰§è¡Œè¿™è¡Œï¼Œè¾“å‡º 'end'</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'end'</span>);

<span class="hljs-comment">// æœ€ç»ˆè¾“å‡ºé¡ºåºï¼šstart â†’ in executor â†’ end</span>
<span class="hljs-comment">// æ³¨æ„ï¼šsetTimeout é‡Œçš„ resolve è¦ 1 ç§’åæ‰è¿è¡Œï¼Œä½† console.log('end') ä¸ä¼šç­‰å®ƒï¼Œ</span>
<span class="hljs-comment">// å› ä¸º Promise çš„ executor æ˜¯åŒæ­¥æ‰§è¡Œçš„ï¼Œè€Œ setTimeout æ˜¯å¼‚æ­¥çš„ã€‚</span>
</code></pre>
<p>å¼‚æ­¥ä»»åŠ¡ï¼ˆå¦‚ <code>setTimeout</code>ï¼‰åœ¨ executor å†…éƒ¨å¯åŠ¨ï¼Œä½† executor æœ¬èº«æ˜¯åŒæ­¥è¿è¡Œçš„ã€‚</p>
<h3 data-id="heading-9">3. é“¾å¼è°ƒç”¨ä¸é”™è¯¯å¤„ç†</h3>
<p><code>.then()</code> è¿”å›ä¸€ä¸ªæ–°çš„ Promiseï¼Œæ”¯æŒé“¾å¼è°ƒç”¨ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// 1. å‘èµ·ä¸€ä¸ªç½‘ç»œè¯·æ±‚ï¼Œè·å– lemoncode ç»„ç»‡çš„æˆå‘˜åˆ—è¡¨ï¼ˆå¼‚æ­¥æ“ä½œï¼‰</span>
<span class="hljs-comment">//    fetch() ç«‹å³è¿”å›ä¸€ä¸ª Promiseï¼Œä¸ä¼šé˜»å¡åç»­ä»£ç </span>
<span class="hljs-title function_">fetch</span>(<span class="hljs-string">'https://api.github.com/orgs/lemoncode/members'</span>)

  <span class="hljs-comment">// 2. å½“è¯·æ±‚æˆåŠŸè¿”å›å“åº”ï¼ˆResponse å¯¹è±¡ï¼‰åï¼Œè¿›å…¥ç¬¬ä¸€ä¸ª .then()</span>
  <span class="hljs-comment">//    è°ƒç”¨ res.json() å°†å“åº”ä½“è§£æä¸º JSON æ ¼å¼ï¼ˆå®ƒä¹Ÿè¿”å›ä¸€ä¸ª Promiseï¼‰</span>
  .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> res.<span class="hljs-title function_">json</span>())

  <span class="hljs-comment">// 3. å½“ JSON è§£æå®Œæˆåï¼Œè¿›å…¥ç¬¬äºŒä¸ª .then()</span>
  .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">members</span> =&gt;</span> {
    <span class="hljs-comment">// 4. æ‰¾åˆ°é¡µé¢ä¸­ id ä¸º 'members' çš„å…ƒç´ </span>
    <span class="hljs-comment">//    æŠŠæ¯ä¸ªæˆå‘˜çš„ login åç§°è½¬æˆ &lt;li&gt; æ ‡ç­¾ï¼Œå¹¶æ‹¼æ¥æˆå­—ç¬¦ä¸²</span>
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'members'</span>).<span class="hljs-property">innerHTML</span> = 
      members.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> <span class="hljs-string">`&lt;li&gt;<span class="hljs-subst">${item.login}</span>&lt;/li&gt;`</span>).<span class="hljs-title function_">join</span>(<span class="hljs-string">''</span>);
  })

  <span class="hljs-comment">// 5. å¦‚æœä¸Šé¢ä»»æ„ä¸€æ­¥å‡ºé”™ï¼ˆç½‘ç»œå¤±è´¥ã€JSON è§£æå¤±è´¥ç­‰ï¼‰ï¼Œ</span>
  <span class="hljs-comment">//    å°±ä¼šè·³åˆ°è¿™é‡Œï¼Œæ•è·é”™è¯¯å¹¶æ‰“å°å‡ºæ¥</span>
  .<span class="hljs-keyword">catch</span>(<span class="hljs-function"><span class="hljs-params">err</span> =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'è¯·æ±‚å¤±è´¥:'</span>, err);
  });
</code></pre>
<p>è¿™ç§æ–¹å¼é¿å…äº†å›è°ƒåµŒå¥—ï¼Œé€»è¾‘æ¸…æ™°ï¼Œé”™è¯¯ä¹Ÿèƒ½é›†ä¸­å¤„ç†ã€‚</p>
<hr/>
<h2 data-id="heading-10">å››ã€å®é™…åº”ç”¨åœºæ™¯</h2>
<h3 data-id="heading-11">1. æ–‡ä»¶è¯»å–ï¼ˆNode.jsï¼‰</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// 1. å¼•å…¥ Node.js çš„æ–‡ä»¶ç³»ç»Ÿæ¨¡å—ï¼ˆç”¨äºè¯»å†™æ–‡ä»¶ï¼‰</span>
<span class="hljs-keyword">import</span> fs <span class="hljs-keyword">from</span> <span class="hljs-string">'fs'</span>;

<span class="hljs-comment">// 2. ç«‹åˆ»æ‰§è¡Œï¼Œè¾“å‡º 1ï¼ˆåŒæ­¥ä»»åŠ¡ï¼‰</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-number">1</span>);

<span class="hljs-comment">// 3. åˆ›å»ºä¸€ä¸ª Promise å®ä¾‹ p</span>
<span class="hljs-comment">//    æ³¨æ„ï¼šnew Promise() ä¸­çš„å‡½æ•°ä¼š**ç«‹å³åŒæ­¥æ‰§è¡Œ**</span>
<span class="hljs-keyword">const</span> p = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
  <span class="hljs-comment">// 4. è¿™è¡Œæ˜¯åŒæ­¥æ‰§è¡Œçš„ï¼æ‰€ä»¥é©¬ä¸Šè¾“å‡º 3</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-number">3</span>);

  <span class="hljs-comment">// 5. è°ƒç”¨ fs.readFile è¯»å– './b.txt' æ–‡ä»¶ï¼ˆè¿™æ˜¯å¼‚æ­¥ I/O æ“ä½œï¼‰</span>
  <span class="hljs-comment">//    ä¸»çº¿ç¨‹ä¸ä¼šç­‰å¾…ï¼Œè€Œæ˜¯ç»§ç»­å¾€ä¸‹æ‰§è¡Œï¼Œè¯»å–ç»“æœç¨åé€šè¿‡å›è°ƒè¿”å›</span>
  fs.<span class="hljs-title function_">readFile</span>(<span class="hljs-string">'./b.txt'</span>, <span class="hljs-function">(<span class="hljs-params">err, data</span>) =&gt;</span> {
    <span class="hljs-comment">// 8. ã€1ç§’æˆ–æ›´ä¹…åã€‘æ–‡ä»¶è¯»å–å®Œæˆï¼Œè¿›å…¥è¿™ä¸ªå›è°ƒï¼ˆå¼‚æ­¥æ‰§è¡Œï¼‰</span>

    <span class="hljs-comment">// æ‰“å°é”™è¯¯ä¿¡æ¯ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰ï¼Œç”¨äºè°ƒè¯•</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(err, <span class="hljs-string">'//////'</span>);

    <span class="hljs-comment">// å¦‚æœè¯»å–å‡ºé”™ï¼ˆæ¯”å¦‚æ–‡ä»¶ä¸å­˜åœ¨ï¼‰</span>
    <span class="hljs-keyword">if</span> (err) {
      <span class="hljs-title function_">reject</span>(err);  <span class="hljs-comment">// è®© Promise å˜æˆå¤±è´¥çŠ¶æ€</span>
      <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-comment">// è¯»å–æˆåŠŸï¼ŒæŠŠ Buffer è½¬æˆå­—ç¬¦ä¸²å¹¶ resolve</span>
    <span class="hljs-title function_">resolve</span>(data.<span class="hljs-title function_">toString</span>());
  });
});

<span class="hljs-comment">// 6. æ³¨å†ŒæˆåŠŸå’Œå¤±è´¥çš„å¤„ç†å‡½æ•°</span>
p.<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {
  <span class="hljs-comment">// 9. å¦‚æœæ–‡ä»¶è¯»å–æˆåŠŸï¼Œè¿™é‡Œä¼šæ‰§è¡Œï¼Œè¾“å‡ºæ–‡ä»¶å†…å®¹</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data, <span class="hljs-string">'//////'</span>);
}).<span class="hljs-keyword">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
  <span class="hljs-comment">// 9. å¦‚æœæ–‡ä»¶è¯»å–å¤±è´¥ï¼Œè¿™é‡Œä¼šæ‰§è¡Œï¼Œè¾“å‡ºé”™è¯¯</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(err, <span class="hljs-string">'è¯»å–æ–‡ä»¶å¤±è´¥'</span>);
});

<span class="hljs-comment">// 7. ä¸»çº¿ç¨‹ç»§ç»­æ‰§è¡Œï¼Œä¸ç­‰æ–‡ä»¶è¯»å–å®Œæˆï¼Œç«‹åˆ»è¾“å‡º 2ï¼ˆåŒæ­¥ä»»åŠ¡ï¼‰</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-number">2</span>);
</code></pre>
<p><strong>æœ€ç»ˆè¾“å‡ºé¡ºåºï¼ˆå‡è®¾æ–‡ä»¶å­˜åœ¨ï¼‰ï¼š</strong></p>
<pre><code class="hljs language-perl" lang="perl"><span class="hljs-number">1</span>
<span class="hljs-number">3</span>
<span class="hljs-number">2</span>
null //<span class="hljs-regexp">//</span><span class="hljs-regexp">//</span>        â† err ä¸º null è¡¨ç¤ºæ— é”™è¯¯
&lt;æ–‡ä»¶å†…å®¹&gt; <span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span>  
</code></pre>
<p><strong>å¦‚æœæ–‡ä»¶ ä¸å­˜åœ¨ï¼Œåˆ™è¾“å‡ºï¼š</strong></p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-number">1</span>
<span class="hljs-number">3</span>
<span class="hljs-number">2</span>
[<span class="hljs-meta">Error: ENOENT...</span>] <span class="hljs-comment"><span class="hljs-doctag">///</span><span class="hljs-doctag">///</span>  </span>
[<span class="hljs-meta">Error: ENOENT...</span>] è¯»å–æ–‡ä»¶å¤±è´¥
</code></pre>
<h4 data-id="heading-12">å…³é”®æ€»ç»“ï¼š</h4>
<ul>
<li><code>console.log(1)</code>ã€<code>console.log(3)</code>ã€<code>console.log(2)</code>Â éƒ½æ˜¯<strong>åŒæ­¥ä»£ç </strong>ï¼ŒæŒ‰é¡ºåºç«‹å³æ‰§è¡Œ â†’ è¾“å‡ºÂ <strong>1 â†’ 3 â†’ 2</strong>ã€‚</li>
<li><code>fs.readFile</code>Â æ˜¯<strong>å¼‚æ­¥æ“ä½œ</strong>ï¼Œå®ƒçš„å›è°ƒï¼ˆåŒ…æ‹¬Â <code>resolve</code>/<code>reject</code>ï¼‰ä¼šåœ¨ I/O å®Œæˆåæ‰æ‰§è¡Œï¼Œå› æ­¤Â <code>.then()</code>Â æˆ–Â <code>.catch()</code>Â çš„å†…å®¹<strong>ä¸€å®šåœ¨ 2 ä¹‹åè¾“å‡º</strong>ã€‚</li>
<li>Promise çš„ executorï¼ˆä¼ ç»™ new Promise çš„å‡½æ•°ï¼‰æ˜¯<strong>åŒæ­¥æ‰§è¡Œçš„</strong>ï¼Œä½†å…¶ä¸­çš„å¼‚æ­¥æ“ä½œï¼ˆå¦‚ readFileï¼‰ä¸ä¼šé˜»å¡ä¸»çº¿ç¨‹ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-13">2. ç½‘ç»œè¯·æ±‚ï¼ˆæµè§ˆå™¨ï¼‰</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// 1. å‘èµ·ä¸€ä¸ªç½‘ç»œè¯·æ±‚ï¼Œè·å– lemoncode ç»„ç»‡çš„æˆå‘˜åˆ—è¡¨</span>
<span class="hljs-comment">//    fetch() ç«‹åˆ»è¿”å›ä¸€ä¸ª Promiseï¼Œä¸ä¼šå¡ä½é¡µé¢ï¼ˆå¼‚æ­¥æ“ä½œï¼‰</span>
<span class="hljs-title function_">fetch</span>(<span class="hljs-string">'https://api.github.com/orgs/lemoncode/members'</span>)

  <span class="hljs-comment">// 2. å½“æœåŠ¡å™¨è¿”å›å“åº”ï¼ˆæ¯”å¦‚çŠ¶æ€ç  200ï¼‰åï¼Œè¿›å…¥ç¬¬ä¸€ä¸ª .then()</span>
  <span class="hljs-comment">//    response.json() ä¼šæŠŠå“åº”ä½“ï¼ˆé€šå¸¸æ˜¯ JSON å­—ç¬¦ä¸²ï¼‰è§£ææˆ JavaScript å¯¹è±¡</span>
  <span class="hljs-comment">//    å®ƒä¹Ÿè¿”å›ä¸€ä¸ª Promiseï¼Œæ‰€ä»¥å¯ä»¥ç»§ç»­é“¾å¼è°ƒç”¨</span>
  .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> response.<span class="hljs-title function_">json</span>())

  <span class="hljs-comment">// 3. å½“ JSON è§£æå®Œæˆï¼Œè¿›å…¥ç¬¬äºŒä¸ª .then()</span>
  <span class="hljs-comment">//    æ­¤æ—¶ members æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæ¯ä¸ªå…ƒç´ æ˜¯ä¸€ä¸ªæˆå‘˜å¯¹è±¡ï¼Œä¾‹å¦‚ { login: "antonio06", ... }</span>
  .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">members</span> =&gt;</span> {
    <span class="hljs-comment">// 4. æŠŠæ¯ä¸ªæˆå‘˜çš„ç”¨æˆ·åï¼ˆm.loginï¼‰è½¬æˆ &lt;li&gt; æ ‡ç­¾</span>
    <span class="hljs-comment">//    ä¾‹å¦‚ï¼š[{login:"alice"}] â†’ ["&lt;li&gt;alice&lt;/li&gt;"] â†’ "&lt;li&gt;alice&lt;/li&gt;"</span>
    <span class="hljs-keyword">const</span> list = members.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">m</span> =&gt;</span> <span class="hljs-string">`&lt;li&gt;<span class="hljs-subst">${m.login}</span>&lt;/li&gt;`</span>).<span class="hljs-title function_">join</span>(<span class="hljs-string">''</span>);

    <span class="hljs-comment">// 5. æ‰¾åˆ° HTML ä¸­ id="members" çš„å…ƒç´ ï¼ŒæŠŠç”Ÿæˆçš„åˆ—è¡¨æ’å…¥è¿›å»</span>
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'members'</span>).<span class="hljs-property">innerHTML</span> = list;
  })

  <span class="hljs-comment">// 6. å¦‚æœä¸Šé¢ä»»ä½•ä¸€æ­¥å‡ºé”™ï¼ˆæ¯”å¦‚ç½‘ç»œæ–­äº†ã€URL å†™é”™ã€JSON æ ¼å¼ä¸å¯¹ç­‰ï¼‰ï¼Œ</span>
  <span class="hljs-comment">//    å°±ä¼šè·³è¿‡æ‰€æœ‰ .then()ï¼Œç›´æ¥è¿›å…¥ .catch() å¤„ç†é”™è¯¯</span>
  .<span class="hljs-keyword">catch</span>(<span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'è·å–æˆå‘˜å¤±è´¥:'</span>, error);
  });
</code></pre>
<h4 data-id="heading-14">å…³é”®æ€»ç»“ï¼š</h4>
<ul>
<li>æ•´ä¸ªè¿‡ç¨‹æ˜¯<strong>å¼‚æ­¥çš„</strong>ï¼Œä½†é€šè¿‡Â <code>.then()</code>Â é“¾ï¼Œè®©é€»è¾‘åƒâ€œä¸€æ­¥ä¸€æ­¥é¡ºåºæ‰§è¡Œâ€ä¸€æ ·æ¸…æ™°ã€‚</li>
<li><code>.catch()</code>Â èƒ½æ•è·æ•´ä¸ªé“¾ä¸­çš„ä»»ä½•é”™è¯¯ï¼Œé¿å…ç¨‹åºå´©æºƒã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-15">äº”ã€Promise vs å›è°ƒå‡½æ•°ï¼šè°æ›´èƒœä¸€ç­¹ï¼Ÿ</h2>






























<table><thead><tr><th>ç‰¹æ€§</th><th>å›è°ƒå‡½æ•°</th><th>Promise</th></tr></thead><tbody><tr><td>å¯è¯»æ€§</td><td>åµŒå¥—æ·±ï¼Œéš¾ç»´æŠ¤</td><td>é“¾å¼è°ƒç”¨ï¼Œç»“æ„æ¸…æ™°</td></tr><tr><td>é”™è¯¯å¤„ç†</td><td>æ¯å±‚éœ€å•ç‹¬å¤„ç†</td><td>ç»Ÿä¸€ <code>.catch()</code> æ•è·</td></tr><tr><td>ç»„åˆå¤šä¸ªå¼‚æ­¥</td><td>å›°éš¾</td><td>æ”¯æŒ <code>Promise.all()</code>ã€<code>Promise.race()</code> ç­‰</td></tr><tr><td>è¿”å›å€¼ä¼ é€’</td><td>æ‰‹åŠ¨ä¼ å‚</td><td>è‡ªåŠ¨é€šè¿‡ <code>resolve(value)</code> ä¼ é€’</td></tr></tbody></table>
<p>æ˜¾ç„¶ï¼ŒPromise åœ¨ç°ä»£ JS å¼€å‘ä¸­å·²æˆä¸ºå¼‚æ­¥å¤„ç†çš„æ ‡å‡†æ–¹æ¡ˆã€‚</p>
<hr/>
<h2 data-id="heading-16">ç»“è¯­</h2>
<p>Promise å¹¶æ²¡æœ‰çœŸæ­£è®©å¼‚æ­¥å˜æˆåŒæ­¥â€”â€”åº•å±‚ä¾ç„¶æ˜¯å¼‚æ­¥æ‰§è¡Œã€‚ä½†å®ƒé€šè¿‡<strong>çŠ¶æ€ç®¡ç†</strong>å’Œ<strong>é“¾å¼è°ƒç”¨</strong>ï¼Œè®©æˆ‘ä»¬èƒ½ä»¥æ¥è¿‘åŒæ­¥çš„æ–¹å¼ç¼–å†™å’Œç†è§£å¼‚æ­¥ä»£ç ï¼Œæå¤§æå‡äº†å¼€å‘ä½“éªŒã€‚</p>
<p>éšç€ <code>async/await</code> çš„æ™®åŠï¼ˆå…¶åº•å±‚æ­£æ˜¯åŸºäº Promiseï¼‰ï¼Œå¼‚æ­¥ç¼–ç¨‹å˜å¾—æ›´åŠ ç®€æ´ç›´è§‚ã€‚ä½†ç†è§£ Promise çš„åŸç†ï¼Œä»æ˜¯æŒæ¡ç°ä»£ JavaScript å¼‚æ­¥ç¼–ç¨‹çš„åŸºçŸ³ã€‚</p>
<blockquote>
<p>æ­£å¦‚é‚£å¥è€è¯ï¼š <strong>â€œPromise ä¸æ˜¯é­”æ³•ï¼Œä½†å®ƒè®©å¼‚æ­¥ä¸–ç•Œå˜å¾—æ›´æœ‰åºã€‚â€</strong></p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€Šå¤§å‚é¢è¯•ï¼šä»æ‰‹å†™ Ajax åˆ°å°è£… getJSONï¼Œå†åˆ°ç†è§£ Promise ä¸ sleepã€‹]]></title>    <link>https://juejin.cn/post/7572524368875569187</link>    <guid>https://juejin.cn/post/7572524368875569187</guid>    <pubDate>2025-11-14T15:03:03.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572524368875569187" data-draft-id="7572382777838616616" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€Šå¤§å‚é¢è¯•ï¼šä»æ‰‹å†™ Ajax åˆ°å°è£… getJSONï¼Œå†åˆ°ç†è§£ Promise ä¸ sleepã€‹"/> <meta itemprop="keywords" content="é¢è¯•,Ajax"/> <meta itemprop="datePublished" content="2025-11-14T15:03:03.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="xhxxx"/> <meta itemprop="url" content="https://juejin.cn/user/3235201610941578"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€Šå¤§å‚é¢è¯•ï¼šä»æ‰‹å†™ Ajax åˆ°å°è£… getJSONï¼Œå†åˆ°ç†è§£ Promise ä¸ sleepã€‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3235201610941578/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    xhxxx
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-14T15:03:03.000Z" title="Fri Nov 14 2025 15:03:03 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¤§å‚é¢è¯•å¿…è€ƒï¼šä»æ‰‹å†™ Ajax åˆ°å°è£… getJSONï¼Œå†åˆ°ç†è§£ Promise ä¸ sleep</h2>
<p>åœ¨å‰ç«¯å·¥ç¨‹å¸ˆçš„æ±‚èŒè¿‡ç¨‹ä¸­ï¼Œå°¤å…¶æ˜¯å†²å‡»ä¸€çº¿å¤§å‚ï¼ˆå¦‚é˜¿é‡Œã€è…¾è®¯ã€å­—èŠ‚ç­‰ï¼‰æ—¶ï¼Œ<strong>æ‰‹å†™ä»£ç é¢˜</strong>å‡ ä¹æ˜¯ç»•ä¸å¼€çš„ä¸€ç¯ã€‚è¿™äº›é¢˜ç›®çœ‹ä¼¼åŸºç¡€ï¼Œå®åˆ™è€ƒå¯Ÿå€™é€‰äººå¯¹ JavaScript æ ¸å¿ƒæœºåˆ¶çš„ç†è§£æ·±åº¦â€”â€”åŒ…æ‹¬å¼‚æ­¥ç¼–ç¨‹ã€äº‹ä»¶å¾ªç¯ã€å†…å­˜æ¨¡å‹ä»¥åŠæµè§ˆå™¨åŸç”Ÿ API çš„æŒæ¡ç¨‹åº¦ã€‚</p>
<p>æœ¬æ–‡å°†ç„¦ä¸‰ä¸ªç»å…¸æ‰‹å†™é¢˜ï¼š</p>
<ol>
<li><strong>æ‰‹å†™åŸç”Ÿ Ajax</strong></li>
<li><strong>å°è£…æ”¯æŒ Promise çš„ getJSON å‡½æ•°</strong></li>
<li><strong>æ‰‹å†™ sleep å‡½æ•°</strong></li>
</ol>
<p>æˆ‘ä»¬å°†é€å±‚æ·±å…¥ï¼Œä¸ä»…å†™å‡ºä»£ç ï¼Œæ›´è¦è®²æ¸…æ¥šâ€œä¸ºä»€ä¹ˆè¿™ä¹ˆå†™â€ï¼Œå¸®åŠ©ä½ åœ¨é¢è¯•ä¸­ä¸ä»…èƒ½å†™å‡ºæ¥ï¼Œè¿˜èƒ½è®²æ˜ç™½ã€‚</p>
<hr/>
<h3 data-id="heading-1">ä¸€ã€æ‰‹å†™ Ajaxï¼šå›è°ƒåœ°ç‹±çš„èµ·ç‚¹</h3>
<p>è™½ç„¶ç°ä»£å¼€å‘ä¸­æˆ‘ä»¬æ—©å·²ä¹ æƒ¯ä½¿ç”¨ <code>fetch</code> æˆ– <code>axios</code>ï¼Œä½† <strong>Ajax æ˜¯æ‰€æœ‰ç½‘ç»œè¯·æ±‚çš„åŸºçŸ³</strong>ã€‚é¢è¯•å®˜è®©ä½ æ‰‹å†™ Ajaxï¼Œä¸æ˜¯ä¸ºäº†è®©ä½ é‡å¤é€ è½®å­ï¼Œè€Œæ˜¯æ£€éªŒä½ æ˜¯å¦çœŸæ­£ç†è§£ HTTP è¯·æ±‚åœ¨æµè§ˆå™¨ä¸­çš„å®ç°æ–¹å¼ã€‚
ajax åŸºäºå›è°ƒå‡½æ•°å®ç°ï¼Œä»£ç å¤æ‚ï¼Œè¿™æ­£æ˜¯å…¶ç—›ç‚¹æ‰€åœ¨ã€‚</p>
<h4 data-id="heading-2">æ‰‹å†™ä¸€ä¸ªåŸºç¡€ç‰ˆ Ajax</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">ajax</span>(<span class="hljs-params">url, callback</span>) {
  <span class="hljs-keyword">const</span> xhr = <span class="hljs-keyword">new</span> <span class="hljs-title class_">XMLHttpRequest</span>();
  
  xhr.<span class="hljs-title function_">open</span>(<span class="hljs-string">'GET'</span>, url, <span class="hljs-literal">true</span>); <span class="hljs-comment">// å¼‚æ­¥è¯·æ±‚</span>
  xhr.<span class="hljs-property">onreadystatechange</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (xhr.<span class="hljs-property">readyState</span> === <span class="hljs-number">4</span>) { <span class="hljs-comment">// è¯·æ±‚å®Œæˆ</span>
      <span class="hljs-keyword">if</span> (xhr.<span class="hljs-property">status</span> &gt;= <span class="hljs-number">200</span> &amp;&amp; xhr.<span class="hljs-property">status</span> &lt; <span class="hljs-number">300</span>) {
        <span class="hljs-comment">// æˆåŠŸï¼šè°ƒç”¨å›è°ƒå¹¶ä¼ å…¥å“åº”æ•°æ®</span>
        <span class="hljs-title function_">callback</span>(<span class="hljs-literal">null</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(xhr.<span class="hljs-property">responseText</span>));
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-comment">// å¤±è´¥ï¼šä¼ å…¥é”™è¯¯</span>
        <span class="hljs-title function_">callback</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">`HTTP <span class="hljs-subst">${xhr.status}</span>`</span>), <span class="hljs-literal">null</span>);
      }
    }
  };
  xhr.<span class="hljs-title function_">send</span>();
}
</code></pre>
<h4 data-id="heading-3">é—®é¢˜åœ¨å“ªï¼Ÿ</h4>
<ul>
<li><strong>å¼ºä¾èµ–å›è°ƒå‡½æ•°</strong>ï¼šè°ƒç”¨æ–¹å¿…é¡»ä¼ å…¥ <code>callback</code>ï¼Œæ— æ³•é“¾å¼æ“ä½œï¼›</li>
<li><strong>é”™è¯¯å¤„ç†åˆ†æ•£</strong>ï¼šæˆåŠŸå’Œå¤±è´¥é€»è¾‘è€¦åˆåœ¨åŒä¸€ä¸ªå‡½æ•°é‡Œï¼›</li>
<li><strong>æ— æ³•ç»„åˆå¤šä¸ªå¼‚æ­¥æ“ä½œ</strong>ï¼šæ¯”å¦‚â€œå…ˆè¯·æ±‚ Aï¼Œå†æ ¹æ® A çš„ç»“æœè¯·æ±‚ Bâ€ï¼Œä»£ç ä¼šè¿…é€Ÿå˜å¾—åµŒå¥—æ··ä¹±â€”â€”å³æ‰€è°“çš„â€œå›è°ƒåœ°ç‹±â€ã€‚</li>
</ul>
<p>è¿™æ­£æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦ <strong>Promise</strong>ã€‚</p>
<hr/>
<h3 data-id="heading-4">äºŒã€å°è£… getJSONï¼šç”¨ Promise æ”¹é€  Ajax</h3>
<blockquote>
<p>â€œå¦‚ä½•å°è£…ä¸€ä¸ª getJSON å‡½æ•°ã€‚ä½¿ç”¨ ajaxï¼Œæ”¯æŒ Promiseï¼Œget è¯·æ±‚æ–¹æ³•ï¼Œè¿”å›æ˜¯ JSONâ€</p>
</blockquote>
<p>è¿™å…¶å®æ˜¯ä¸€ä¸ªå…¸å‹çš„â€œå°†ä¼ ç»Ÿå›è°ƒå¼ API è½¬ä¸º Promise åŒ–â€çš„è¿‡ç¨‹ã€‚</p>
<h4 data-id="heading-5">å°è£…æ€è·¯</h4>
<ul>
<li>åˆ›å»ºä¸€ä¸ªè¿”å› <code>Promise</code> çš„å‡½æ•°ï¼›</li>
<li>åœ¨ <code>Promise</code> æ„é€ å‡½æ•°å†…éƒ¨æ‰§è¡Œ Ajaxï¼›</li>
<li>æˆåŠŸæ—¶è°ƒç”¨ <code>resolve(data)</code>ï¼Œå¤±è´¥æ—¶è°ƒç”¨ <code>reject(error)</code>ï¼›</li>
<li>è‡ªåŠ¨è§£æ JSON å“åº”ä½“ã€‚</li>
</ul>
<h4 data-id="heading-6">å®ç°ä»£ç </h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">getJSON</span>(<span class="hljs-params">url</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> xhr = <span class="hljs-keyword">new</span> <span class="hljs-title class_">XMLHttpRequest</span>();
    xhr.<span class="hljs-title function_">open</span>(<span class="hljs-string">'GET'</span>, url, <span class="hljs-literal">true</span>);
    xhr.<span class="hljs-title function_">setRequestHeader</span>(<span class="hljs-string">'Accept'</span>, <span class="hljs-string">'application/json'</span>);

    xhr.<span class="hljs-property">onload</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
      <span class="hljs-keyword">if</span> (xhr.<span class="hljs-property">status</span> &gt;= <span class="hljs-number">200</span> &amp;&amp; xhr.<span class="hljs-property">status</span> &lt; <span class="hljs-number">300</span>) {
        <span class="hljs-keyword">try</span> {
          <span class="hljs-keyword">const</span> data = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(xhr.<span class="hljs-property">responseText</span>);
          <span class="hljs-title function_">resolve</span>(data);
        } <span class="hljs-keyword">catch</span> (e) {
          <span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'Invalid JSON response'</span>));
        }
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">`Request failed with status <span class="hljs-subst">${xhr.status}</span>`</span>));
      }
    };

    xhr.<span class="hljs-property">onerror</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
      <span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'Network error'</span>));
    };

    xhr.<span class="hljs-title function_">send</span>();
  });
}
</code></pre>
<h4 data-id="heading-7">ä½¿ç”¨æ–¹å¼ï¼ˆå¯¹æ¯” fetchï¼‰</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// ä½¿ç”¨æˆ‘ä»¬å°è£…çš„ getJSON</span>
<span class="hljs-title function_">getJSON</span>(<span class="hljs-string">'/api/user'</span>)
  .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">user</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(user))
  .<span class="hljs-keyword">catch</span>(<span class="hljs-function"><span class="hljs-params">err</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Failed:'</span>, err));

<span class="hljs-comment">// ç­‰ä»·äº fetch å†™æ³•ï¼ˆä½† fetch ä¸è‡ªåŠ¨æŠ›å‡º HTTP é”™è¯¯ï¼‰</span>
<span class="hljs-title function_">fetch</span>(<span class="hljs-string">'/api/user'</span>)
  .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> {
    <span class="hljs-keyword">if</span> (!res.<span class="hljs-property">ok</span>) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'HTTP error'</span>);
    <span class="hljs-keyword">return</span> res.<span class="hljs-title function_">json</span>();
  })
  .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">user</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(user))
  .<span class="hljs-keyword">catch</span>(<span class="hljs-function"><span class="hljs-params">err</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(err));
</code></pre>
<h4 data-id="heading-8">ä¸ºä»€ä¹ˆ Promise æ›´å¥½ï¼Ÿ</h4>
<blockquote>
<p>â€œfetch ç®€å•æ˜“ç”¨ï¼ŒåŸºäº Promise å®ç°ï¼Œ(then)æ— éœ€å›è°ƒå‡½æ•°â€</p>
</blockquote>
<p>Promise çš„æ ¸å¿ƒä¼˜åŠ¿åœ¨äºï¼š</p>
<ul>
<li><strong>çŠ¶æ€æœºæ¨¡å‹</strong>ï¼šåˆå§‹ä¸º <code>pending</code>ï¼Œåªèƒ½å˜ä¸º <code>fulfilled</code>ï¼ˆé€šè¿‡ <code>resolve</code>ï¼‰æˆ– <code>rejected</code>ï¼ˆé€šè¿‡ <code>reject</code>ï¼‰ï¼Œä¸”çŠ¶æ€ä¸å¯é€†ï¼›</li>
<li><strong>é“¾å¼è°ƒç”¨</strong>ï¼š<code>.then().catch()</code> å½¢æˆæ¸…æ™°çš„æµç¨‹æ§åˆ¶ï¼›</li>
<li><strong>ç»Ÿä¸€é”™è¯¯å¤„ç†</strong>ï¼šä»»æ„ç¯èŠ‚å‡ºé”™ï¼Œéƒ½ä¼šè¢«æœ€è¿‘çš„ <code>.catch</code> æ•è·ã€‚</li>
</ul>
<p>è¿™ä½¿å¾—å¼‚æ­¥ä»£ç æ›´æ¥è¿‘åŒæ­¥é€»è¾‘çš„é˜…è¯»ä½“éªŒã€‚</p>
<hr/>
<h3 data-id="heading-9">ä¸‰ã€æ·±å…¥ Promiseï¼šä¸åªæ˜¯è¯­æ³•ç³–</h3>
<blockquote>
<p>â€œpromise ç±» ï¼Œä¸ºå¼‚æ­¥å˜åŒæ­¥è€Œ(æµç¨‹æ§åˆ¶)å®ä¾‹åŒ–ï¼Œäº‹å®æ ‡å‡†ã€‚æ¥æ”¶ä¸€ä¸ªå‡½æ•°ï¼Œå‡½æ•°æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œresolve rejectï¼Œä»–ä»¬ä¹Ÿæ˜¯å‡½æ•°ã€‚â€</p>
</blockquote>
<ul>
<li><code>new Promise(executor)</code> ä¸­çš„ <code>executor</code> æ˜¯ä¸€ä¸ªç«‹å³æ‰§è¡Œçš„å‡½æ•°ï¼›</li>
<li>å®ƒæ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼š<code>resolve</code> å’Œ <code>reject</code>ï¼Œéƒ½æ˜¯ç”± Promise å†…éƒ¨æä¾›çš„å‡½æ•°ï¼›</li>
<li>è°ƒç”¨ <code>resolve(value)</code> ä¼šå°† Promise çŠ¶æ€è½¬ä¸º <code>fulfilled</code>ï¼Œå¹¶å°† <code>value</code> ä¼ é€’ç»™ä¸‹ä¸€ä¸ª <code>.then</code>ï¼›</li>
<li>è°ƒç”¨ <code>reject(reason)</code> åˆ™è½¬ä¸º <code>rejected</code>ï¼Œè§¦å‘ <code>.catch</code>ã€‚</li>
</ul>
<p>ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> p = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() &gt; <span class="hljs-number">0.5</span> ? <span class="hljs-title function_">resolve</span>(<span class="hljs-string">'ok'</span>) : <span class="hljs-title function_">reject</span>(<span class="hljs-string">'fail'</span>);
  }, <span class="hljs-number">1000</span>);
});

p.<span class="hljs-title function_">then</span>(<span class="hljs-variable language_">console</span>.<span class="hljs-property">log</span>).<span class="hljs-keyword">catch</span>(<span class="hljs-variable language_">console</span>.<span class="hljs-property">error</span>);
</code></pre>
<p>è¿™ç§è®¾è®¡è®©å¼€å‘è€…èƒ½<strong>ä¸»åŠ¨æ§åˆ¶å¼‚æ­¥ç»“æœçš„â€œæˆåŠŸâ€æˆ–â€œå¤±è´¥â€è·¯å¾„</strong>ï¼Œæ˜¯æ„å»ºå¯é å¼‚æ­¥ç³»ç»Ÿçš„åŸºç¡€ã€‚</p>
<hr/>
<h3 data-id="heading-10">å››ã€æ‰‹å†™ sleepï¼šPromise</h3>
<h4 data-id="heading-11">å®ç°</h4>
<pre><code class="hljs language-js" lang="js"> <span class="hljs-keyword">function</span> <span class="hljs-title function_">sleep</span>(<span class="hljs-params">n</span>){
            <span class="hljs-keyword">let</span> p;
                 p = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span> (<span class="hljs-function">(<span class="hljs-params">resolve,reject</span>)=&gt;</span>{
                
                <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">()=&gt;</span>{
                <span class="hljs-comment">// pending ç­‰å¾…</span>
                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(p);
                <span class="hljs-comment">//resolve();</span>
                <span class="hljs-title function_">reject</span>();
                <span class="hljs-comment">// fulfilled  æˆåŠŸ</span>
                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(p);
                }
                    ,n);
            })
            <span class="hljs-keyword">return</span> p;
        }
        <span class="hljs-title function_">sleep</span>(<span class="hljs-number">3000</span>)
        .<span class="hljs-title function_">then</span>(<span class="hljs-function">()=&gt;</span>{
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'3såæ‰§è¡Œ'</span>);

        })
        .<span class="hljs-keyword">catch</span>(<span class="hljs-function">()=&gt;</span>{
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'3såæ‰§è¡Œå¤±è´¥'</span>);
        })
        <span class="hljs-comment">// promise çŠ¶æ€æ”¹å˜ å°±ä¼šæ‰§è¡Œ</span>
        .<span class="hljs-title function_">finally</span>(<span class="hljs-function">()=&gt;</span>{
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'finally'</span>);
        })
</code></pre>
<h3 data-id="heading-12">æ‰‹å†™é¢˜çš„æœ¬è´¨æ˜¯ç†è§£æœºåˆ¶</h3>
<p>å¤§å‚é¢è¯•ä¹‹æ‰€ä»¥åå¤è€ƒå¯Ÿè¿™äº›â€œè€æ‰ç‰™â€çš„æ‰‹å†™é¢˜ï¼Œæ˜¯å› ä¸ºå®ƒä»¬åƒä¸€é¢é•œå­ï¼Œç…§å‡ºä½ å¯¹ JavaScript è¿è¡Œæœºåˆ¶çš„ç†è§£æ·±åº¦ï¼š</p>
<ul>
<li>Ajax â†’ æµè§ˆå™¨ç½‘ç»œ API + å›è°ƒæ¨¡å‹ï¼›</li>
<li>Promise å°è£… â†’ å¼‚æ­¥æµç¨‹æ§åˆ¶èŒƒå¼å‡çº§ï¼›</li>
<li>sleep â†’ Promise ä¸å®šæ—¶å™¨çš„åˆ›é€ æ€§ç»“åˆï¼›</li>
</ul>
<p>å½“ä½ ä¸ä»…èƒ½å†™å‡ºè¿™äº›ä»£ç ï¼Œè¿˜èƒ½æ¸…æ™°è§£é‡Šå…¶èƒŒåçš„åŸç†æ—¶ï¼Œä½ å°±å·²ç»è¶…è¶Šäº†å¤§å¤šæ•°å€™é€‰äººã€‚</p>
<p><strong>è®°ä½ï¼šé¢è¯•ä¸æ˜¯è€ƒä½ ä¼šä¸ä¼šç”¨åº“ï¼Œè€Œæ˜¯è€ƒä½ çŸ¥ä¸çŸ¥é“åº“ä¸ºä»€ä¹ˆå­˜åœ¨ã€‚</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[springbootä¸­ymlã€yamlã€propertiesåŠ è½½é¡ºåº]]></title>    <link>https://juejin.cn/post/7572459217810899007</link>    <guid>https://juejin.cn/post/7572459217810899007</guid>    <pubDate>2025-11-15T02:26:27.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572459217810899007" data-draft-id="7572397142365225002" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="springbootä¸­ymlã€yamlã€propertiesåŠ è½½é¡ºåº"/> <meta itemprop="keywords" content="åç«¯,Spring,Spring Boot"/> <meta itemprop="datePublished" content="2025-11-15T02:26:27.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è€ƒè™‘è€ƒè™‘"/> <meta itemprop="url" content="https://juejin.cn/user/4406498335157287"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            springbootä¸­ymlã€yamlã€propertiesåŠ è½½é¡ºåº
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4406498335157287/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è€ƒè™‘è€ƒè™‘
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-15T02:26:27.000Z" title="Sat Nov 15 2025 02:26:27 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">å‰è¨€</h3>
<p>Springbootå¯¹äºæ–‡ä»¶é…ç½®åŠ è½½ï¼Œæœ‰ç€æ˜ç¡®çš„é…ç½®åŠ è½½é¡ºåº</p>
<h3 data-id="heading-1">é…ç½®æ–‡ä»¶åŠ è½½é¡ºåº</h3>
<p>å¯¹äº<code>yaml</code>ã€<code>yml</code>å’Œ<code>properties</code>é…ç½®æ–‡ä»¶,ä¼˜å…ˆçº§ä½çš„é…ç½®ä¼šè¢«å…ˆåŠ è½½ï¼Œæ‰€ä»¥ä¼˜å…ˆçº§é«˜çš„é…ç½®ä¼šè¦†ç›–ä¼˜å…ˆçº§ä½çš„é…ç½®</p>
<pre><code class="hljs language-scss" lang="scss">propertiesï¼ˆæœ€é«˜ï¼‰&gt; yml &gt; <span class="hljs-built_in">yaml</span>(æœ€ä½)
</code></pre>
<h4 data-id="heading-2">é¡ºåºéªŒè¯</h4>
<p>1ã€é…ç½®åŠ è½½</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@Slf4j</span>
<span class="hljs-meta">@RestController</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">IndexController</span> {

    <span class="hljs-meta">@Value(<span class="hljs-string">"<span class="hljs-subst">${hello.data}</span>"</span>)</span>
    <span class="hljs-keyword">private</span> String <span class="hljs-keyword">data</span>;


    <span class="hljs-meta">@GetMapping(<span class="hljs-string">"/hello"</span>)</span>
    <span class="hljs-keyword">public</span> String hello() {
        log.info(<span class="hljs-string">"æ•°æ®ä¸º:{{}}"</span>, Thread.currentThread());
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">data</span>;
    }
}
</code></pre>
<p>é…ç½®<code>application.yaml</code>é…ç½®æ–‡ä»¶</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">hello:</span>
  <span class="hljs-attr">data:</span> <span class="hljs-string">test1</span>
</code></pre>
<p>å¦‚ä¸‹å›¾æ‰€ç¤º</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e1ee4c9799be4b22a48897c0426b86f5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6ICD6JmR6ICD6JmR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763778387&amp;x-signature=cR%2FvFTuI5RT3Pmj22KvoPhL17p8%3D" alt="image.png" loading="lazy"/></p>
<p>è®¿é—®</p>
<pre><code class="hljs language-bash" lang="bash">http://ip:ç«¯å£/hello
</code></pre>
<p>ç»“æœä¸º</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/18ea7800b4bd4e1e87616eb0ae103a06~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6ICD6JmR6ICD6JmR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763778387&amp;x-signature=kBWJaxmOIPR1u3DXmpvA%2BlGQXRo%3D" alt="image.png" loading="lazy"/>
å¢åŠ é…ç½®<code>application.yml</code>é…ç½®æ–‡ä»¶</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">hello:</span>
  <span class="hljs-attr">data:</span> <span class="hljs-string">test2</span>
</code></pre>
<p>å¦‚ä¸‹å›¾æ‰€ç¤º</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f640ef3ca8f44e95a0fe42168fd28d24~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6ICD6JmR6ICD6JmR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763778387&amp;x-signature=EVvYlZxbRL0wKoTcljqTnL%2B7Vmg%3D" alt="image.png" loading="lazy"/></p>
<p>è¾“å‡ºç»“æœä¸º</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d4d235fe6ebb431c949edb1ae6f9b295~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6ICD6JmR6ICD6JmR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763778387&amp;x-signature=TOr1nzTQQ4CVRGKpVOyhM20MIjw%3D" alt="image.png" loading="lazy"/></p>
<p>å¢åŠ é…ç½®<code>application.properties</code>é…ç½®æ–‡ä»¶</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6d585001d560441f8e6bdf2d0d579f59~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6ICD6JmR6ICD6JmR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763778387&amp;x-signature=hdmTtVL8%2FvCEoU26F0MBP%2F9Six0%3D" alt="image.png" loading="lazy"/>
é…ç½®å†…å®¹ä¸º</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">hello.data</span>=aaa
</code></pre>
<p>è¾“å‡ºç»“æœä¸º</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/59388d9f56fc41009383a0f9e8923f95~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6ICD6JmR6ICD6JmR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763778387&amp;x-signature=YXT9lsJ9YCSFGHpKjDfAzLBzxvU%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-3">æ€»ç»“</h3>
<p><strong>åŒä¸€çº§ç›®å½•ä¸‹åŠ è½½é¡ºåºéªŒè¯ï¼š</strong></p>
<p>propertiesçš„ä¼˜å…ˆçº§é«˜(å½“åªæœ‰propertiesï¼Œymlï¼Œyaml)</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[React 5 ä¸ª â€œéšå½¢å‘â€ï¼šä¸Šçº¿å‰æ²¡æ³¨æ„ï¼Œdebug åˆ°å‡Œæ™¨ 3 ç‚¹]]></title>    <link>https://juejin.cn/post/7572397142364962858</link>    <guid>https://juejin.cn/post/7572397142364962858</guid>    <pubDate>2025-11-14T15:32:10.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572397142364962858" data-draft-id="7572397142364930090" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="React 5 ä¸ª â€œéšå½¢å‘â€ï¼šä¸Šçº¿å‰æ²¡æ³¨æ„ï¼Œdebug åˆ°å‡Œæ™¨ 3 ç‚¹"/> <meta itemprop="keywords" content="å‰ç«¯,React.js,JavaScript"/> <meta itemprop="datePublished" content="2025-11-14T15:32:10.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="zzpper"/> <meta itemprop="url" content="https://juejin.cn/user/3560673121928058"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            React 5 ä¸ª â€œéšå½¢å‘â€ï¼šä¸Šçº¿å‰æ²¡æ³¨æ„ï¼Œdebug åˆ°å‡Œæ™¨ 3 ç‚¹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3560673121928058/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    zzpper
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-14T15:32:10.000Z" title="Fri Nov 14 2025 15:32:10 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">React 5 ä¸ª â€œéšå½¢å‘â€ï¼šä¸Šçº¿å‰æ²¡æ³¨æ„ï¼Œdebug åˆ°å‡Œæ™¨ 3 ç‚¹</h2>
<p>ç”¨äº†è¿™ä¹ˆä¹…çš„Reactï¼Œæˆ‘å‘ç°ä¸€ä¸ªæ‰å¿ƒè§„å¾‹ï¼š<strong>80% çš„çº¿ä¸Š bug å’Œæ€§èƒ½å¡é¡¿ï¼Œéƒ½æ¥è‡ªé‚£äº› â€œçœ‹èµ·æ¥æ²¡é—®é¢˜â€ çš„ç»†èŠ‚</strong>ã€‚</p>
<p>æ¯”å¦‚æ˜æ˜ç”¨äº† React 18 çš„è‡ªåŠ¨æ‰¹å¤„ç†ï¼Œå´è¿˜æ˜¯è§¦å‘å¤šæ¬¡æ¸²æŸ“ï¼›Context åªæ”¹ä¸€ä¸ªå­—æ®µï¼Œæ•´ä¸ªç»„ä»¶æ ‘éƒ½è·Ÿç€é‡æ¸²æŸ“ï¼›å¼‚æ­¥å›è°ƒé‡Œæ‹¿ä¸åˆ°æœ€æ–°çŠ¶æ€ â€”â€” è¿™äº›é—®é¢˜è—åœ¨æ—¥å¸¸ç¼–ç çš„è§’è½ï¼Œå¼€å‘æ—¶å¾ˆéš¾å¯Ÿè§‰ï¼Œä¸Šçº¿åå´èƒ½è®©ä½ è¿å¤œ debugã€‚</p>
<p>ä»Šå¤©å°±æŠŠè¿™äº› â€œé‡è¦ä½†æ˜“å¿½ç•¥â€ çš„ React é™·é˜±ï¼Œæ‹†æˆ 5 ä¸ªå®æˆ˜æ¡ˆä¾‹ï¼Œæ¯ä¸ªéƒ½é™„ â€œåé¢æ¡ˆä¾‹ + é—®é¢˜æ ¹æº + è§£å†³æ–¹æ¡ˆâ€ï¼Œå¸®ä½ é¿å¼€ 90% çš„éšå½¢å‘ï¼Œä»£ç å†™å¾—åˆç¨³åˆå¿«ï½</p>
<h3 data-id="heading-1">ä¸€ã€React 18 è‡ªåŠ¨æ‰¹å¤„ç† â€œå¤±æ•ˆâ€ï¼Ÿè¿™äº›åœºæ™¯ä¸ç”Ÿæ•ˆï¼</h3>
<p>React 18 çš„è‡ªåŠ¨æ‰¹å¤„ç†ï¼ˆAutomatic Batchingï¼‰æ˜¯ä¸ªæ€§èƒ½ç¥å™¨ï¼Œèƒ½æŠŠå¤šæ¬¡çŠ¶æ€æ›´æ–°åˆå¹¶æˆä¸€æ¬¡æ¸²æŸ“ï¼Œå‡å°‘ä¸å¿…è¦çš„è®¡ç®—å¼€é”€ã€‚ä½†å¾ˆå¤šäººä¸çŸ¥é“ï¼Œå®ƒå¹¶ä¸æ˜¯ â€œä¸‡èƒ½çš„â€ï¼Œæœ‰äº›åœºæ™¯ä¸‹ä¼šæ‚„æ‚„å¤±æ•ˆã€‚</p>
<h4 data-id="heading-2">åé¢æ¡ˆä¾‹ï¼šä»¥ä¸ºä¼šåˆå¹¶ï¼Œç»“æœè§¦å‘ä¸¤æ¬¡æ¸²æŸ“</h4>
<p>javascript</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { useState, createRoot } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [a, setA] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);
  <span class="hljs-keyword">const</span> [b, setB] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);

  <span class="hljs-comment">// ç‚¹å‡»æŒ‰é’®ï¼Œé¢„æœŸä¸€æ¬¡æ¸²æŸ“ï¼Œå®é™…ä¸¤æ¬¡</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleClick</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-comment">// æµè§ˆå™¨åŸç”Ÿäº‹ä»¶ï¼Œè‡ªåŠ¨æ‰¹å¤„ç†ä¸ç”Ÿæ•ˆ</span>
    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'resize'</span>, <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-title function_">setA</span>(<span class="hljs-function"><span class="hljs-params">prev</span> =&gt;</span> prev + <span class="hljs-number">1</span>);
      <span class="hljs-title function_">setB</span>(<span class="hljs-function"><span class="hljs-params">prev</span> =&gt;</span> prev + <span class="hljs-number">1</span>);
    });
  };

  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç»„ä»¶æ¸²æŸ“'</span>); <span class="hljs-comment">// ä¼šæ‰“å°ä¸¤æ¬¡</span>
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{handleClick}</span>&gt;</span>ç‚¹å‡»<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>;
}

<span class="hljs-title function_">createRoot</span>(<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'root'</span>)).<span class="hljs-title function_">render</span>(<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">App</span> /&gt;</span></span>);
</code></pre>
<h4 data-id="heading-3">é—®é¢˜æ ¹æº</h4>
<p>React 18 çš„è‡ªåŠ¨æ‰¹å¤„ç†ä»…è¦†ç›– â€œReact èƒ½æ§åˆ¶çš„åœºæ™¯â€ï¼Œæ¯”å¦‚åˆæˆäº‹ä»¶ã€Promiseã€setTimeout ç­‰ï¼Œä½†<strong>æµè§ˆå™¨åŸç”Ÿäº‹ä»¶ï¼ˆresizeã€scrollï¼‰ã€SyntheticEvent ä¹‹å¤–çš„åœºæ™¯</strong>ï¼ŒReact æ— æ³•æ‹¦æˆªè°ƒåº¦ï¼Œæ‰¹å¤„ç†ä¼šå¤±æ•ˆã€‚</p>
<h4 data-id="heading-4">è§£å†³æ–¹æ¡ˆ</h4>
<ol>
<li>ç”¨<code>unstable_batchedUpdates</code>æ‰‹åŠ¨åŒ…è£¹ï¼š</li>
</ol>
<p>javascript</p>
<pre><code class="hljs language-ini" lang="ini">import { unstable_batchedUpdates } from 'react-dom'<span class="hljs-comment">;</span>

const <span class="hljs-attr">handleClick</span> = () =&gt; {
  window.addEventListener('resize', () =&gt; {
    // æ‰‹åŠ¨åˆå¹¶æ›´æ–°ï¼Œä»…è§¦å‘ä¸€æ¬¡æ¸²æŸ“
    unstable_batchedUpdates(() =&gt; {
      setA(<span class="hljs-attr">prev</span> =&gt; prev + <span class="hljs-number">1</span>)<span class="hljs-comment">;</span>
      setB(<span class="hljs-attr">prev</span> =&gt; prev + <span class="hljs-number">1</span>)<span class="hljs-comment">;</span>
    })<span class="hljs-comment">;</span>
  })<span class="hljs-comment">;</span>
}<span class="hljs-comment">;</span>
</code></pre>
<ol start="2">
<li>ä¼˜å…ˆä½¿ç”¨ React åˆæˆäº‹ä»¶ï¼Œé¿å…ç›´æ¥æ“ä½œåŸç”Ÿäº‹ä»¶ã€‚</li>
</ol>
<h4 data-id="heading-5">å…³é”®æé†’</h4>
<p>åˆ«æ»¥ç”¨<code>flushSync</code>ï¼å®ƒä¼šå¼ºåˆ¶åŒæ­¥æ›´æ–°ï¼Œç›´æ¥æ‰“æ–­æ‰¹å¤„ç†ï¼Œéå¿…è¦åœºæ™¯ï¼ˆå¦‚éœ€è¦ç«‹å³è·å–æ›´æ–°å DOMï¼‰ä¸è¦ç”¨ã€‚</p>
<h3 data-id="heading-6">äºŒã€Context çš„ â€œæ€§èƒ½åˆºå®¢â€ï¼šæ”¹ä¸€ä¸ªå­—æ®µï¼Œå…¨ç»„ä»¶æ ‘é‡æ¸²æŸ“</h3>
<p>Context æ˜¯ React å…¨å±€çŠ¶æ€ç®¡ç†çš„å¸¸ç”¨å·¥å…·ï¼Œä½†å¾ˆå¤šäººæŠŠæ‰€æœ‰çŠ¶æ€éƒ½å¡è¿›ä¸€ä¸ª Contextï¼Œç»“æœå˜æˆ â€œç‰µä¸€å‘è€ŒåŠ¨å…¨èº«â€ çš„æ€§èƒ½é™·é˜± â€”â€” æ”¹ç”¨æˆ·æ˜µç§°ï¼Œè¿ä¸»é¢˜ç»„ä»¶éƒ½è·Ÿç€é‡æ¸²æŸ“ã€‚</p>
<h4 data-id="heading-7">åé¢æ¡ˆä¾‹ï¼šå¤§è€Œå…¨çš„ Context å¯¼è‡´æ— æ•ˆé‡æ¸²æŸ“</h4>
<p>javascript</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// é”™è¯¯ï¼šæ‰€æœ‰çŠ¶æ€éƒ½æ”¾ä¸€ä¸ªContext</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">AppContext</span> = <span class="hljs-title function_">createContext</span>();

<span class="hljs-keyword">function</span> <span class="hljs-title function_">AppProvider</span>(<span class="hljs-params">{ children }</span>) {
  <span class="hljs-keyword">const</span> [user, setUser] = <span class="hljs-title function_">useState</span>({ <span class="hljs-attr">name</span>: <span class="hljs-string">'å¼ ä¸‰'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">25</span> });
  <span class="hljs-keyword">const</span> [theme, setTheme] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">'light'</span>);

  <span class="hljs-comment">// æ¯æ¬¡æ¸²æŸ“ç”Ÿæˆæ–°å¯¹è±¡ï¼Œå³ä½¿çŠ¶æ€æ²¡å˜åŒ–ä¹Ÿè§¦å‘é‡æ¸²æŸ“</span>
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">AppContext.Provider</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">user</span>, <span class="hljs-attr">setUser</span>, <span class="hljs-attr">theme</span>, <span class="hljs-attr">setTheme</span> }}&gt;</span>
      {children}
    <span class="hljs-tag">&lt;/<span class="hljs-name">AppContext.Provider</span>&gt;</span></span>
  );
}

<span class="hljs-comment">// åªç”¨åˆ°themeçš„ç»„ä»¶ï¼Œä¹Ÿä¼šå› userå˜åŒ–é‡æ¸²æŸ“</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">ThemeButton</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> { theme, setTheme } = <span class="hljs-title function_">useContext</span>(<span class="hljs-title class_">AppContext</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ä¸»é¢˜æŒ‰é’®é‡æ¸²æŸ“'</span>); <span class="hljs-comment">//  userå˜åŒ–æ—¶ä¹Ÿä¼šæ‰“å°</span>
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> setTheme('dark')}&gt;åˆ‡æ¢ä¸»é¢˜<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>;
}
</code></pre>
<h4 data-id="heading-8">é—®é¢˜æ ¹æº</h4>
<ol>
<li>Context æœªæ‹†åˆ†ï¼Œæ‰€æœ‰çŠ¶æ€è€¦åˆåœ¨ä¸€èµ·ï¼Œä¸€ä¸ªå­—æ®µå˜åŒ–ä¼šé€šçŸ¥æ‰€æœ‰æ¶ˆè´¹è€…ã€‚</li>
<li>Provider çš„<code>value</code>æ˜¯åŠ¨æ€åˆ›å»ºçš„å¯¹è±¡ï¼Œæ¯æ¬¡æ¸²æŸ“éƒ½ä¼šç”Ÿæˆæ–°å¼•ç”¨ï¼Œå¯¼è‡´å­ç»„ä»¶è¯¯åˆ¤ â€œçŠ¶æ€å˜åŒ–â€ã€‚</li>
</ol>
<h4 data-id="heading-9">è§£å†³æ–¹æ¡ˆ</h4>
<h5 data-id="heading-10">1. æ‹†åˆ† Contextï¼ŒæŒ‰åŠŸèƒ½æ¨¡å—åŒ–</h5>
<p>javascript</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ‹†åˆ†åï¼šç”¨æˆ·Contextå’Œä¸»é¢˜Contextç‹¬ç«‹</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">UserContext</span> = <span class="hljs-title function_">createContext</span>();
<span class="hljs-keyword">const</span> <span class="hljs-title class_">ThemeContext</span> = <span class="hljs-title function_">createContext</span>();

<span class="hljs-comment">// ç”¨æˆ·Provider</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">UserProvider</span>(<span class="hljs-params">{ children }</span>) {
  <span class="hljs-keyword">const</span> [user, setUser] = <span class="hljs-title function_">useState</span>({ <span class="hljs-attr">name</span>: <span class="hljs-string">'å¼ ä¸‰'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">25</span> });
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">UserContext.Provider</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">user</span>, <span class="hljs-attr">setUser</span> }}&gt;</span>{children}<span class="hljs-tag">&lt;/<span class="hljs-name">UserContext.Provider</span>&gt;</span></span>;
}

<span class="hljs-comment">// ä¸»é¢˜Provider</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">ThemeProvider</span>(<span class="hljs-params">{ children }</span>) {
  <span class="hljs-keyword">const</span> [theme, setTheme] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">'light'</span>);
  <span class="hljs-comment">// ç”¨useMemoç¼“å­˜valueï¼Œç¡®ä¿å¼•ç”¨ç¨³å®š</span>
  <span class="hljs-keyword">const</span> value = <span class="hljs-title function_">useMemo</span>(<span class="hljs-function">() =&gt;</span> ({ theme, setTheme }), [theme]);
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ThemeContext.Provider</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{value}</span>&gt;</span>{children}<span class="hljs-tag">&lt;/<span class="hljs-name">ThemeContext.Provider</span>&gt;</span></span>;
}

<span class="hljs-comment">// å¤–å±‚ç»„åˆï¼Œé¿å…åµŒå¥—åœ°ç‹±</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">AppProviders</span>(<span class="hljs-params">{ children }</span>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">UserProvider</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">ThemeProvider</span>&gt;</span>{children}<span class="hljs-tag">&lt;/<span class="hljs-name">ThemeProvider</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">UserProvider</span>&gt;</span></span>
  );
}
</code></pre>
<h5 data-id="heading-11">2. ç”¨<code>useContextSelector</code>ç²¾å‡†è®¢é˜…ï¼ˆReact 18+ï¼‰</h5>
<p>å®‰è£…<code>use-context-selector</code>åº“ï¼Œè®©ç»„ä»¶åªè®¢é˜…éœ€è¦çš„å­—æ®µï¼š</p>
<p>javascript</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { useContextSelector } <span class="hljs-keyword">from</span> <span class="hljs-string">'use-context-selector'</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">ThemeButton</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// ä»…è®¢é˜…themeå­—æ®µï¼Œuserå˜åŒ–ä¸å½±å“</span>
  <span class="hljs-keyword">const</span> theme = <span class="hljs-title function_">useContextSelector</span>(<span class="hljs-title class_">ThemeContext</span>, <span class="hljs-function">(<span class="hljs-params">state</span>) =&gt;</span> state.<span class="hljs-property">theme</span>);
  <span class="hljs-keyword">const</span> setTheme = <span class="hljs-title function_">useContextSelector</span>(<span class="hljs-title class_">ThemeContext</span>, <span class="hljs-function">(<span class="hljs-params">state</span>) =&gt;</span> state.<span class="hljs-property">setTheme</span>);
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> setTheme('dark')}&gt;åˆ‡æ¢ä¸»é¢˜<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>;
}
</code></pre>
<p><img src="" alt="" loading="lazy"/><img src="" alt="image" loading="lazy"/></p>
<p>ï¼ˆç¤ºæ„å›¾ï¼šå·¦ä¸ºæœªæ‹†åˆ† Context çš„é‡æ¸²æŸ“ç»„ä»¶æ•°ï¼Œå³ä¸ºæ‹†åˆ†åï¼Œæ ‡æ³¨ â€œé‡æ¸²æŸ“ç»„ä»¶æ•°å‡å°‘ 79%â€ï¼‰</p>
<h3 data-id="heading-12">ä¸‰ã€é—­åŒ…é™·é˜±ï¼šå¼‚æ­¥å›è°ƒé‡Œçš„çŠ¶æ€æ°¸è¿œæ˜¯ â€œæ—§å€¼â€</h3>
<p>è¿™æ˜¯ React Hooks æœ€å®¹æ˜“è¸©çš„å‘ä¹‹ä¸€ï¼šæ˜æ˜çŠ¶æ€å·²ç»æ›´æ–°ï¼Œå¼‚æ­¥å›è°ƒï¼ˆå¦‚ setTimeoutã€æ¥å£å›è°ƒï¼‰é‡Œå´æ‹¿ä¸åˆ°æœ€æ–°å€¼ï¼Œæ’æŸ¥åŠå¤©éƒ½æ‰¾ä¸åˆ°åŸå› ã€‚</p>
<h4 data-id="heading-13">åé¢æ¡ˆä¾‹ï¼šå®šæ—¶å™¨é‡Œçš„çŠ¶æ€ â€œåœæ»ä¸å‰â€</h4>
<p>javascript</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Counter</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [count, setCount] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">showCount</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-comment">// 3ç§’åå¼¹å‡ºçš„countæ˜¯è°ƒç”¨æ—¶çš„æ—§å€¼</span>
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-title function_">alert</span>(<span class="hljs-string">`å½“å‰è®¡æ•°ï¼š<span class="hljs-subst">${count}</span>`</span>); <span class="hljs-comment">// ç‚¹å‡»æ—¶count=3ï¼Œå¼¹å‡ºå´å¯èƒ½æ˜¯0</span>
    }, <span class="hljs-number">3000</span>);
  };

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>count: {count}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> setCount(prev =&gt; prev + 1)}&gt;åŠ 1<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{showCount}</span>&gt;</span>3ç§’åæ˜¾ç¤º<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<h4 data-id="heading-14">é—®é¢˜æ ¹æº</h4>
<p>æ¯æ¬¡ç»„ä»¶æ¸²æŸ“éƒ½æ˜¯ç‹¬ç«‹çš„å‡½æ•°è°ƒç”¨ï¼Œå¼‚æ­¥å›è°ƒä¼šæ•è· â€œåˆ›å»ºæ—¶â€ çš„çŠ¶æ€å¿«ç…§ï¼ˆé—­åŒ…ç‰¹æ€§ï¼‰ã€‚å³ä½¿åç»­çŠ¶æ€æ›´æ–°ï¼Œå›è°ƒé‡Œå¼•ç”¨çš„è¿˜æ˜¯æ—§çš„çŠ¶æ€å€¼ã€‚</p>
<h4 data-id="heading-15">è§£å†³æ–¹æ¡ˆ</h4>
<h5 data-id="heading-16">1. ç”¨ useRef å­˜å‚¨æœ€æ–°çŠ¶æ€</h5>
<p>javascript</p>
<pre><code class="hljs language-scss" lang="scss">function <span class="hljs-built_in">Counter</span>() {
  const <span class="hljs-selector-attr">[count, setCount]</span> = <span class="hljs-built_in">useState</span>(<span class="hljs-number">0</span>);
  const countRef = <span class="hljs-built_in">useRef</span>(count);

  <span class="hljs-comment">// æ¯æ¬¡çŠ¶æ€æ›´æ–°ï¼ŒåŒæ­¥åˆ°ref.current</span>
  <span class="hljs-built_in">useEffect</span>(() =&gt; {
    countRef<span class="hljs-selector-class">.current</span> = count;
  }, <span class="hljs-selector-attr">[count]</span>);

  const showCount = () =&gt; {
    <span class="hljs-built_in">setTimeout</span>(() =&gt; {
      <span class="hljs-built_in">alert</span>(`å½“å‰è®¡æ•°ï¼š${countRef.current}`); <span class="hljs-comment">// æ‹¿åˆ°æœ€æ–°å€¼</span>
    }, <span class="hljs-number">3000</span>);
  };

  <span class="hljs-comment">// å…¶ä½™ä»£ç ä¸å˜</span>
}
</code></pre>
<h5 data-id="heading-17">2. çŠ¶æ€æ›´æ–°ä¾èµ–å‰å€¼ï¼Ÿç”¨å‡½æ•°å¼æ›´æ–°</h5>
<p>javascript</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// ä¾èµ–å‰ä¸€ä¸ªçŠ¶æ€æ—¶ï¼Œé¿å…ç›´æ¥å¼•ç”¨count</span>
<span class="hljs-built_in">setCount</span>(prev =&gt; prev + <span class="hljs-number">1</span>); <span class="hljs-comment">// prevå§‹ç»ˆæ˜¯æœ€æ–°çŠ¶æ€</span>
</code></pre>
<h5 data-id="heading-18">3. å¤æ‚åœºæ™¯ç”¨ useReducer</h5>
<p><code>dispatch</code>å¼•ç”¨åœ¨ç»„ä»¶ç”Ÿå‘½å‘¨æœŸå†…ç¨³å®šï¼Œreducer ä¸­èƒ½è·å–æœ€æ–°çŠ¶æ€ï¼š</p>
<p>javascript</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">reducer</span>(<span class="hljs-params">state, action</span>) </span>{
  <span class="hljs-keyword">switch</span> (action.type) {
    <span class="hljs-keyword">case</span> <span class="hljs-string">'INCREMENT'</span>:
      <span class="hljs-keyword">return</span> { count: state.count + <span class="hljs-number">1</span> };
    <span class="hljs-keyword">default</span>:
      <span class="hljs-keyword">return</span> state;
  }
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Counter</span>(<span class="hljs-params"/>) </span>{
  <span class="hljs-keyword">const</span> [state, dispatch] = <span class="hljs-title function_ invoke__">useReducer</span>(reducer, { <span class="hljs-attr">count</span>: <span class="hljs-number">0</span> });
  <span class="hljs-comment">// æ— éœ€ä¾èµ–stateï¼Œdispatchå§‹ç»ˆèƒ½è§¦å‘æœ€æ–°çŠ¶æ€æ›´æ–°</span>
}
</code></pre>
<h3 data-id="heading-19">å››ã€useMemo/useCallback æ»¥ç”¨ï¼šä¼˜åŒ–å˜ â€œæ·»ä¹±â€</h3>
<p>å¾ˆå¤šå¼€å‘è€…æŠŠ useMemo å’Œ useCallback å½“ â€œä¸‡èƒ½ä¼˜åŒ–è¯â€ï¼Œä¸ç®¡ä»€ä¹ˆåœºæ™¯éƒ½ç”¨ä¸Šï¼Œç»“æœä¸ä»…æ²¡æå‡æ€§èƒ½ï¼Œè¿˜å¢åŠ äº† React çš„ç¼“å­˜å¼€é”€ â€”â€” è¿™ä¿© Hook æ˜¯ â€œä¼˜åŒ–å·¥å…·â€ï¼Œä¸æ˜¯ â€œè£…é¥°å™¨â€ã€‚</p>
<h4 data-id="heading-20">åé¢æ¡ˆä¾‹ï¼šæ²¡å¿…è¦çš„ä¼˜åŒ–</h4>
<p>javascript</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// é”™è¯¯1ï¼šç®€å•è®¡ç®—ç”¨useMemoï¼Œçº¯å±å¤šä½™</span>
const sum = <span class="hljs-built_in">useMemo</span>(() =&gt; <span class="hljs-selector-tag">a</span> + <span class="hljs-selector-tag">b</span>, <span class="hljs-selector-attr">[a, b]</span>);

<span class="hljs-comment">// é”™è¯¯2ï¼šä¸ä¼ é€’ç»™å­ç»„ä»¶çš„å‡½æ•°ç”¨useCallback</span>
const handleInputChange = <span class="hljs-built_in">useCallback</span>((e) =&gt; {
  <span class="hljs-built_in">setValue</span>(e.target.value);
}, <span class="hljs-selector-attr">[]</span>);

<span class="hljs-comment">// é”™è¯¯3ï¼šä¾èµ–é¡¹ä¸å…¨ï¼Œå¯¼è‡´ç¼“å­˜è¿‡æ—¶</span>
const filteredList = <span class="hljs-built_in">useMemo</span>(() =&gt; {
  return list<span class="hljs-selector-class">.filter</span>(item =&gt; item.status === status);
}, <span class="hljs-selector-attr">[list]</span>); <span class="hljs-comment">// æ¼åŠ statusä¾èµ–ï¼Œstatuså˜åŒ–ååˆ—è¡¨ä¸æ›´æ–°</span>
</code></pre>
<h4 data-id="heading-21">é—®é¢˜æ ¹æº</h4>
<ol>
<li>ç®€å•è®¡ç®—çš„å£°æ˜æˆæœ¬è¿œä½äºç¼“å­˜å¼€é”€ï¼Œä¼˜åŒ–åè€Œæ‹–æ…¢æ€§èƒ½ã€‚</li>
<li>å‡½æ•°ä»…åœ¨ç»„ä»¶å†…éƒ¨ä½¿ç”¨æ—¶ï¼Œæ˜¯å¦é‡æ–°åˆ›å»ºå¯¹æ€§èƒ½æ— å½±å“ã€‚</li>
<li>ä¾èµ–é¡¹ä¸å…¨å¯¼è‡´ç¼“å­˜ â€œè¿‡æœŸâ€ï¼Œå¼•å‘é€»è¾‘ bugã€‚</li>
</ol>
<h4 data-id="heading-22">æ­£ç¡®ä½¿ç”¨åœºæ™¯ &amp; æŠ€å·§</h4>
<h5 data-id="heading-23">1. useMemoï¼šç¼“å­˜å¤æ‚è®¡ç®—ç»“æœ</h5>
<p>javascript</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ­£ç¡®ï¼šå¤§æ•°æ®æ’åº/è¿‡æ»¤ï¼Œè®¡ç®—æˆæœ¬é«˜</span>
<span class="hljs-keyword">const</span> sortedProducts = <span class="hljs-title function_">useMemo</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-comment">// 1000+æ¡æ•°æ®æ’åºï¼Œå€¼å¾—ç¼“å­˜</span>
  <span class="hljs-keyword">return</span> products.<span class="hljs-title function_">sort</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> b.<span class="hljs-property">sales</span> - a.<span class="hljs-property">sales</span>);
}, [products]); <span class="hljs-comment">// ä»…å½“productså˜åŒ–æ—¶é‡æ–°è®¡ç®—</span>
</code></pre>
<h5 data-id="heading-24">2. useCallbackï¼šç¼“å­˜ä¼ é€’ç»™å­ç»„ä»¶çš„å‡½æ•°</h5>
<p>javascript</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å­ç»„ä»¶ç”¨React.memoåŒ…è£¹ï¼ˆçº¯ç»„ä»¶ï¼‰</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">ProductItem</span> = <span class="hljs-title function_">memo</span>(<span class="hljs-function">(<span class="hljs-params">{ product, onAddToCart }</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`æ¸²æŸ“å•†å“ï¼š<span class="hljs-subst">${product.name}</span>`</span>);
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> onAddToCart(product.id)}&gt;åŠ å…¥è´­ç‰©è½¦<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>;
});

<span class="hljs-comment">// çˆ¶ç»„ä»¶ï¼šç”¨useCallbackç¼“å­˜å‡½æ•°ï¼Œé¿å…å­ç»„ä»¶æ— æ•ˆé‡æ¸²æŸ“</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">ProductList</span>(<span class="hljs-params">{ products }</span>) {
  <span class="hljs-keyword">const</span> [cartCount, setCartCount] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);
  <span class="hljs-keyword">const</span> onAddToCart = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">(<span class="hljs-params">id</span>) =&gt;</span> {
    <span class="hljs-title function_">setCartCount</span>(<span class="hljs-function"><span class="hljs-params">prev</span> =&gt;</span> prev + <span class="hljs-number">1</span>);
  }, [cartCount]); <span class="hljs-comment">// ä¾èµ–å˜åŒ–æ—¶æ‰é‡æ–°åˆ›å»ºå‡½æ•°</span>

  <span class="hljs-keyword">return</span> products.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">product</span> =&gt;</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ProductItem</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{product.id}</span> <span class="hljs-attr">product</span>=<span class="hljs-string">{product}</span> <span class="hljs-attr">onAddToCart</span>=<span class="hljs-string">{onAddToCart}</span> /&gt;</span></span>
  ));
}
</code></pre>
<h5 data-id="heading-25">3. æ ¸å¿ƒåŸåˆ™</h5>
<ul>
<li>å…ˆå®šä½æ€§èƒ½é—®é¢˜ï¼šç”¨ React DevTools çš„ Profiler å·¥å…·æ‰¾åˆ°é¢‘ç¹é‡æ¸²æŸ“ / è€—æ—¶è®¡ç®—çš„ç»„ä»¶ï¼Œå†ä¼˜åŒ–ã€‚</li>
<li>ä¾èµ–é¡¹è¦ â€œå…¨ä¸”å‡†â€ï¼šç”¨åˆ°çš„æ‰€æœ‰çŠ¶æ€ / å˜é‡éƒ½è¦åŠ å…¥ä¾èµ–æ•°ç»„ã€‚</li>
<li>ä¸åš â€œé¢„é˜²æ€§ä¼˜åŒ–â€ï¼šç®€å•ç»„ä»¶æ— éœ€è¿‡æ—©ä¼˜åŒ–ï¼Œä¼˜å…ˆä¿è¯ä»£ç å¯è¯»æ€§ã€‚</li>
</ul>
<h3 data-id="heading-26">äº”ã€ç»„ä»¶å¸è½½åå¼‚æ­¥æœªå–æ¶ˆï¼šå†…å­˜æ³„æ¼çš„ â€œéšå½¢æ€æ‰‹â€</h3>
<p>åˆ‡æ¢è·¯ç”±æˆ–å…³é—­å¼¹çª—æ—¶ï¼Œç»„ä»¶å·²ç»å¸è½½ï¼Œä½†ä¹‹å‰å‘èµ·çš„æ¥å£è¯·æ±‚ã€å®šæ—¶å™¨è¿˜åœ¨è¿è¡Œï¼Œå®Œæˆåå°è¯•æ›´æ–°çŠ¶æ€ï¼Œå°±ä¼šè§¦å‘è­¦å‘Šï¼š<code>Can't perform a React state update on an unmounted component</code>ï¼Œè¿˜å¯èƒ½å¯¼è‡´å†…å­˜æ³„æ¼ã€‚</p>
<h4 data-id="heading-27">åé¢æ¡ˆä¾‹ï¼šå¸è½½åå¼‚æ­¥ä»»åŠ¡ä»åœ¨æ‰§è¡Œ</h4>
<p>javascript</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">UserProfile</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [userInfo, setUserInfo] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">null</span>);

  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">// å‘èµ·æ¥å£è¯·æ±‚</span>
    <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'/api/user'</span>)
      .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> res.<span class="hljs-title function_">json</span>())
      .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> {
        <span class="hljs-comment">// ç»„ä»¶å¸è½½åï¼Œè¿™é‡Œä»ä¼šæ‰§è¡Œ</span>
        <span class="hljs-title function_">setUserInfo</span>(data);
      });

    <span class="hljs-comment">// å®šæ—¶å™¨æœªæ¸…ç†</span>
    <span class="hljs-keyword">const</span> timer = <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å®šæ—¶å™¨è¿˜åœ¨è¿è¡Œ'</span>);
    }, <span class="hljs-number">1000</span>);

    <span class="hljs-comment">// æ²¡æœ‰æ¸…ç†é€»è¾‘</span>
  }, []);

  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{userInfo?.name}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
}
</code></pre>
<h4 data-id="heading-28">è§£å†³æ–¹æ¡ˆï¼šuseEffect æ¸…ç†å‡½æ•°</h4>
<h5 data-id="heading-29">1. å–æ¶ˆæ¥å£è¯·æ±‚ï¼ˆAbortControllerï¼‰</h5>
<p>javascript</p>
<pre><code class="hljs language-ini" lang="ini">useEffect(() =&gt; {
  const <span class="hljs-attr">controller</span> = new AbortController()<span class="hljs-comment">;</span>
  const <span class="hljs-attr">signal</span> = controller.signal<span class="hljs-comment">;</span>

  fetch('/api/user', { signal })
    .then(<span class="hljs-attr">res</span> =&gt; res.json())
    .then(<span class="hljs-attr">data</span> =&gt; {
      setUserInfo(data)<span class="hljs-comment">;</span>
    })
    .catch(<span class="hljs-attr">err</span> =&gt; {
      if (<span class="hljs-attr">err.name</span> === <span class="hljs-string">'AbortError'</span>) return<span class="hljs-comment">; // å¿½ç•¥å–æ¶ˆè¯·æ±‚çš„é”™è¯¯</span>
    })<span class="hljs-comment">;</span>

  // ç»„ä»¶å¸è½½æ—¶å–æ¶ˆè¯·æ±‚
  return () =&gt; controller.abort()<span class="hljs-comment">;</span>
}, <span class="hljs-section">[]</span>)<span class="hljs-comment">;</span>
</code></pre>
<h5 data-id="heading-30">2. æ¸…ç†å®šæ—¶å™¨ / äº‹ä»¶ç›‘å¬</h5>
<p>javascript</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> timer = <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å®šæ—¶å™¨è¿è¡Œä¸­'</span>);
  }, <span class="hljs-number">1000</span>);

  <span class="hljs-comment">// æ¸…ç†å®šæ—¶å™¨</span>
  <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">clearInterval</span>(timer);
}, []);
</code></pre>
<h5 data-id="heading-31">3. æ ‡è®°ç»„ä»¶æŒ‚è½½çŠ¶æ€</h5>
<p>javascript</p>
<pre><code class="hljs language-ini" lang="ini">useEffect(() =&gt; {
  let <span class="hljs-attr">isMounted</span> = <span class="hljs-literal">true</span><span class="hljs-comment">; // æ ‡è®°ç»„ä»¶æ˜¯å¦æŒ‚è½½</span>

  fetch('/api/user')
    .then(<span class="hljs-attr">res</span> =&gt; res.json())
    .then(<span class="hljs-attr">data</span> =&gt; {
      if (isMounted) { // ä»…å½“ç»„ä»¶æŒ‚è½½æ—¶æ›´æ–°çŠ¶æ€
        setUserInfo(data)<span class="hljs-comment">;</span>
      }
    })<span class="hljs-comment">;</span>

  return () =&gt; {
    <span class="hljs-attr">isMounted</span> = <span class="hljs-literal">false</span><span class="hljs-comment">; // ç»„ä»¶å¸è½½æ—¶æ ‡è®°ä¸ºfalse</span>
  }<span class="hljs-comment">;</span>
}, <span class="hljs-section">[]</span>)<span class="hljs-comment">;</span>
</code></pre>
<h3 data-id="heading-32">ğŸ“Œ æœ€åï¼šReact å¼€å‘çš„ â€œé¿å‘å¿ƒæ³•â€</h3>
<p>å…¶å®è¿™äº›å®¹æ˜“è¢«å¿½ç•¥çš„é—®é¢˜ï¼Œæ ¸å¿ƒéƒ½å›´ç»•ä¸€ä¸ªåŸåˆ™ï¼š<strong>ç†è§£ React çš„åº•å±‚é€»è¾‘ï¼Œè€Œä¸æ˜¯æ­»è®° API ç”¨æ³•</strong>ã€‚</p>
<ul>
<li>çŠ¶æ€æ›´æ–°è¦æ‡‚ â€œæ‰¹å¤„ç†â€ï¼ŒçŸ¥é“å“ªäº›åœºæ™¯ä¼šå¤±æ•ˆï¼›</li>
<li>æ€§èƒ½ä¼˜åŒ–è¦æŠ“ â€œå…³é”®ç‚¹â€ï¼Œä¸åšæ— ç”¨åŠŸï¼›</li>
<li>å¼‚æ­¥æ“ä½œè¦å®ˆ â€œç”Ÿå‘½å‘¨æœŸâ€ï¼ŒåŠæ—¶æ¸…ç†å‰¯ä½œç”¨ã€‚</li>
</ul>
<p>å¼€å‘æ—¶å¤šé—®è‡ªå·±ä¸€å¥ï¼šâ€œè¿™ä¸ªå†™æ³•çš„åº•å±‚é€»è¾‘æ˜¯ä»€ä¹ˆï¼Ÿæœ‰æ²¡æœ‰å¯èƒ½è§¦å‘å¼‚å¸¸ï¼Ÿâ€ å¾ˆå¤šéšå½¢å‘è‡ªç„¶å°±é¿å¼€äº†ã€‚</p>
<p>æœ€åæƒ³é—®ï¼šä½ åœ¨ React å¼€å‘ä¸­è¿˜è¸©è¿‡å“ªäº› â€œä¸èµ·çœ¼â€ çš„å‘ï¼Ÿè¯„è®ºåŒºèŠèŠï¼Œç‚¹èµæœ€é«˜çš„é€ä¸€ä»½ã€ŠReact é¿å‘æ‰‹å†Œã€‹ï¼ˆå«æœ¬æ–‡æ‰€æœ‰æ¡ˆä¾‹ä»£ç  + æ’æŸ¥å·¥å…·æ¸…å•ï¼‰ï½</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Flutter DevTools å…¨æ™¯ä»‹ç»]]></title>    <link>https://juejin.cn/post/7572387666980012058</link>    <guid>https://juejin.cn/post/7572387666980012058</guid>    <pubDate>2025-11-14T11:56:47.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572387666980012058" data-draft-id="7572389069706510346" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Flutter DevTools å…¨æ™¯ä»‹ç»"/> <meta itemprop="keywords" content="Flutter"/> <meta itemprop="datePublished" content="2025-11-14T11:56:47.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="stringwu"/> <meta itemprop="url" content="https://juejin.cn/user/4046654395135800"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Flutter DevTools å…¨æ™¯ä»‹ç»
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4046654395135800/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    stringwu
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-14T11:56:47.000Z" title="Fri Nov 14 2025 11:56:47 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ¬æ–‡é¦–å‘äºå…¬ä¼—å·ï¼šç§»åŠ¨å¼€å‘é‚£äº›äº‹<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FFCB7Jhe1becWYslrm8Wt1g" target="_blank" title="https://mp.weixin.qq.com/s/FCB7Jhe1becWYslrm8Wt1g" ref="nofollow noopener noreferrer">Flutter DevTools å…¨æ™¯ä»‹ç»</a></p>
<h2 data-id="heading-0">1 å‰è¨€</h2>
<p>æ€§èƒ½è°ƒä¼˜ä¸å¯è§†åŒ–è°ƒè¯•æ˜¯æ¯ä¸ª <code>Flutter</code> å·¥ç¨‹å¸ˆæˆé•¿çš„å¿…ä¿®è¯¾ï¼Œè€Œ <code>DevTools</code> æ˜¯ <code>Flutter</code> å®˜æ–¹æä¾›çš„ä¸€å¥—ç”¨äº è°ƒè¯•ã€æ€§èƒ½åˆ†æä¸ä¼˜åŒ– Flutter åº”ç”¨ çš„å¯è§†åŒ–å·¥å…·,
å®ƒå¯ä»¥é€šè¿‡<code>Dart VM Service</code> ä¸åº”ç”¨è¿è¡Œæ—¶é€šä¿¡ï¼Œå¯ä»¥å®æ—¶è¯»å–ï¼š</p>
<ul>
<li><code>Widget</code> æ ‘ä¸æ¸²æŸ“å±‚çŠ¶æ€</li>
<li>å†…å­˜åˆ†é…ä¸ <code>GC</code></li>
<li><code>CPU</code> è°ƒç”¨æ ˆ</li>
<li>ç½‘ç»œè¯·æ±‚ä¸å“åº”</li>
<li>åº”ç”¨åŒ…ä½“å¤§å°</li>
</ul>
<p>ç†Ÿæ‚‰ä½¿ç”¨è¿™å¥—å·¥å…·ï¼Œå¯ä»¥</p>
<ul>
<li>æå‡å¼€å‘è°ƒè¯•æ•ˆç‡</li>
<li>å‘ç°æ€§èƒ½ç“¶é¢ˆ</li>
<li>ä¼˜åŒ–ç”¨æˆ·ä½“éªŒ</li>
<li>ç²¾ç®€äº§ç‰©å¤§å°</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c2d38f4252fe4dbfbf8d3b6a3c34c4b0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc3RyaW5nd3U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763726206&amp;x-signature=emzck2uEUaUBgCbBtU93md5TpFI%3D" alt="flutter_dev_tools.png" loading="lazy"/></p>
<h2 data-id="heading-1">2 DevTools çš„å¯åŠ¨æ–¹å¼</h2>
<p><code>DevTools</code> çš„æ—¢å¯ä»¥é€šè¿‡å‘½ä»¤è¡Œå¯åŠ¨ï¼Œä¹Ÿå¯ä»¥ç›´æ¥åœ¨<code>IDE</code>ä¸­å¯åŠ¨ï¼›</p>
<h3 data-id="heading-2">2.1 å‘½ä»¤è¡Œå¯åŠ¨</h3>
<p>ç›´æ¥åœ¨å‘½ä»¤è¡Œé‡Œè¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp">flutter pub <span class="hljs-keyword">global</span> activate devtools
flutter pub <span class="hljs-keyword">global</span> run devtools
<span class="hljs-meta"># è¿™é‡Œæ˜¯å¯åŠ¨åº”ç”¨ï¼Œå¦‚æœæœ‰æ›´å¤æ‚å¯åŠ¨çš„è¯ï¼Œå¯å‚è€ƒflutterçš„ç›¸å…³çš„å‘½ä»¤</span>
flutter run --debug
</code></pre>
<p>ç„¶åè®¿é—®æç¤ºçš„ <code>URL</code>ï¼ˆé€šå¸¸ä¸º <code>http://127.0.0.1:9100ï¼‰ã€‚</code></p>
<h3 data-id="heading-3">2.2  <code>Android Studio</code> å¯åŠ¨</h3>
<ul>
<li>å¯åŠ¨åº”ç”¨å</li>
<li>ç‚¹å‡»å³è¾¹ä¾§è¾¹æ çš„ â€œFlutter DevToolsâ€ æŒ‰é’®;</li>
<li>å¦‚æœæƒ³æŸ¥çœ‹<code>Inspector</code>ï¼Œåˆ™ç‚¹å‡»å³è¾¹ä¾§è¾¹æ çš„<code>Flutter Inspector</code>æŒ‰é’®;</li>
</ul>
<p>ç‚¹å‡»<code>Flutter DevTools</code>:</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/203057d1d1924883ab4458da832c8b6b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc3RyaW5nd3U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763726206&amp;x-signature=6ZaoRYIDd2RVcfpbTlJWrhFy5VE%3D" alt="open_dev_tools.png" loading="lazy"/></p>
<p>ç‚¹å‡»<code>Flutter Inspector</code>:</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0d271e2896fb4edb90d002ec73da3b37~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc3RyaW5nd3U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763726206&amp;x-signature=ROgy5Ei5%2BM0HgSO%2BfA29Onp9vxA%3D" alt="dev_tools_widget.png" loading="lazy"/></p>
<h2 data-id="heading-4">3 æ ¸å¿ƒæ¨¡å—æ€»è§ˆ</h2>













































<table><thead><tr><th>æ¨¡å—</th><th>åŠŸèƒ½è¯´æ˜</th><th>ä½¿ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>Inspector</td><td>å¯è§†åŒ– Widget æ ‘ä¸å¸ƒå±€</td><td>è°ƒè¯• UI å±‚çº§ã€æ’æŸ¥å¸ƒå±€é”™ä½</td></tr><tr><td>Performance</td><td>å¸§ç‡ä¸æ—¶é—´çº¿åˆ†æ</td><td>å‘ç°å¡é¡¿ã€æ‰å¸§åŸå› </td></tr><tr><td>Memory</td><td>å†…å­˜ä½¿ç”¨ä¸ GC åˆ†æ</td><td>å®šä½å†…å­˜æ³„æ¼</td></tr><tr><td>CPU Profiler</td><td>å‡½æ•°è€—æ—¶åˆ†æ</td><td>ä¼˜åŒ–è€—æ—¶é€»è¾‘</td></tr><tr><td>Network</td><td>HTTP è¯·æ±‚æ•è·</td><td>è°ƒè¯•æ¥å£è°ƒç”¨</td></tr><tr><td>App Size</td><td>åŒ…ä½“ä½“ç§¯åˆ†æ</td><td>ä¼˜åŒ–ä½“ç§¯ç»“æ„</td></tr><tr><td>Logging</td><td>å®æ—¶æ—¥å¿—æµ</td><td>è·Ÿè¸ªè¿è¡ŒçŠ¶æ€</td></tr></tbody></table>
<h3 data-id="heading-5">3.1. <code>Widget Inspector</code></h3>
<ul>
<li>å¯è§†åŒ–å±•ç¤º Widget æ ‘ç»“æ„</li>
<li>æ”¯æŒ Select Widget Modeï¼šç‚¹å‡»é¡µé¢é«˜äº®ç»„ä»¶</li>
<li>å¯æŸ¥çœ‹ Paddingã€Marginã€Constraints</li>
<li>Layout Explorer æ¨¡å¼å±•ç¤ºå¸ƒå±€çº¦æŸå…³ç³»</li>
</ul>
<p><strong>åº”ç”¨åœºæ™¯</strong>ï¼šè°ƒè¯•å¸ƒå±€é”™ä½ã€åµŒå¥—å±‚çº§å¤æ‚çš„é¡µé¢ã€‚</p>
<h3 data-id="heading-6">3.2. <code>Performance</code>ï¼ˆæ€§èƒ½åˆ†æï¼‰</h3>
<ul>
<li>å±•ç¤º UI ä¸ GPU æ¸²æŸ“çº¿ç¨‹çš„æ—¶é—´çº¿</li>
<li>æ•è· CPU Profile å¿«ç…§</li>
<li>æ ‡çº¢å¸§ä»£è¡¨æ‰å¸§ï¼ˆjankï¼‰</li>
<li>å¯æŸ¥çœ‹ buildã€layoutã€paint å„é˜¶æ®µè€—æ—¶</li>
</ul>
<p><strong>åº”ç”¨åœºæ™¯</strong>ï¼šåˆ†æåŠ¨ç”»å¡é¡¿æˆ–æ»šåŠ¨æ‰å¸§ã€‚</p>
<hr/>
<h3 data-id="heading-7">3.3. <code>Memory</code>ï¼ˆå†…å­˜åˆ†æï¼‰</h3>
<ul>
<li>å®æ—¶æ˜¾ç¤ºå †å†…å­˜ä½¿ç”¨æ›²çº¿</li>
<li>æŸ¥çœ‹å¯¹è±¡ç±»å‹ä¸æ•°é‡åˆ†å¸ƒ</li>
<li>æ‹æ‘„ Heap Snapshotï¼Œå¯¹æ¯”å¯¹è±¡å¢é•¿</li>
<li>æ”¯æŒæœç´¢ç‰¹å®šç±»å‹ï¼ˆå¦‚ Imageï¼‰</li>
</ul>
<p><strong>åº”ç”¨åœºæ™¯</strong>ï¼šæ’æŸ¥å›¾ç‰‡æœªé‡Šæ”¾ã€<code>Stream</code> æˆ– <code>Controller</code> æ³„æ¼é—®é¢˜ã€‚</p>
<hr/>
<h3 data-id="heading-8">3.4. <code>CPU Profiler</code></h3>
<ul>
<li><code>Flame Chart</code> æ˜¾ç¤ºå‡½æ•°è°ƒç”¨è€—æ—¶æ¯”ä¾‹</li>
<li>æ”¯æŒæŒ‰çº¿ç¨‹ç­›é€‰ï¼ˆUI / I/Oï¼‰</li>
<li>å¯å¯¼å‡º JSON æ–‡ä»¶ä¾›åˆ†æ</li>
</ul>
<p><strong>åº”ç”¨åœºæ™¯</strong>ï¼šå®šä½è€—æ—¶é€»è¾‘ã€ä¼˜åŒ–ç®—æ³•æ€§èƒ½ã€‚</p>
<hr/>
<h3 data-id="heading-9">3.5. <code>Network</code></h3>
<ul>
<li>æ•è·æ‰€æœ‰ HTTP/HTTPS è¯·æ±‚</li>
<li>å±•ç¤ºè¯·æ±‚è€—æ—¶ã€çŠ¶æ€ç ã€è¯·æ±‚ä½“ä¸å“åº”ä½“</li>
<li>æ”¯æŒæœç´¢ä¸è¿‡æ»¤</li>
</ul>
<p><strong>åº”ç”¨åœºæ™¯</strong>ï¼šæ’æŸ¥è¯·æ±‚å»¶è¿Ÿã€åç«¯æ¥å£å¼‚å¸¸ã€‚</p>
<hr/>
<h3 data-id="heading-10">3.6. <code>App Size</code></h3>
<ul>
<li>å¯¼å…¥ <code>app-size-analysis.json</code> æ–‡ä»¶</li>
<li>åˆ†æä»£ç ã€èµ„æºã€ä¾èµ–çš„ä½“ç§¯å æ¯”</li>
<li>æ˜¾ç¤ºåŒ…ä½“æ„æˆé¥¼å›¾</li>
</ul>
<p><strong>åº”ç”¨åœºæ™¯</strong>ï¼šè¯†åˆ«å¤§ä¾èµ–ã€ä¼˜åŒ–åŒ…ä½“ä½“ç§¯ã€‚</p>
<p>ä¸çŸ¥é“å¦‚ä½•ç”Ÿæˆ<code>app-size-analysis.json</code>æ–‡ä»¶ï¼Ÿ
å¯å‚è€ƒ<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.flutter.cn%2Ftools%2Fdevtools%2Fapp-size%2F%23generating-size-files" target="_blank" title="https://docs.flutter.cn/tools/devtools/app-size/#generating-size-files" ref="nofollow noopener noreferrer">docs.flutter.cn/tools/devtoâ€¦</a></p>
<p>æ ¸å¿ƒçš„å‘½ä»¤ä¸ºï¼š</p>
<pre><code class="hljs language-css" lang="css">flutter build apk <span class="hljs-attr">--analyze-size</span> <span class="hljs-attr">--target-platform</span>=android-arm64
</code></pre>
<h3 data-id="heading-11">3.7. Logging</h3>
<ul>
<li>å®æ—¶æŸ¥çœ‹ <code>Dart print</code> è¾“å‡º</li>
<li>æ—¥å¿—åˆ†çº§ï¼ˆ<code>info / warning / error</code>ï¼‰</li>
<li>æ”¯æŒæœç´¢ä¸è·³è½¬åˆ°æºä»£ç </li>
</ul>
<p>åº”ç”¨åœºæ™¯ï¼šè¿½è¸ªè¿è¡ŒçŠ¶æ€ä¸å¼‚å¸¸ã€‚</p>
<hr/>
<h2 data-id="heading-12">4 å…¶ä»–ä½¿ç”¨æŠ€å·§</h2>





























<table><thead><tr><th>æŠ€å·§</th><th>å‘½ä»¤æˆ–è¯´æ˜</th></tr></thead><tbody><tr><td>Profile æ¨¡å¼è¿è¡Œ</td><td><code>flutter run --profile</code></td></tr><tr><td>æ•è·å¡é¡¿å¸§ä¿¡æ¯</td><td><code>debugProfileBuildsEnabled = true</code></td></tr><tr><td>ç”ŸæˆåŒ…ä½“æŠ¥å‘Š</td><td><code>flutter build appbundle --analyze-size</code></td></tr><tr><td>å¯¼å‡ºåˆ†æç»“æœ</td><td>Performance é¡µå³ä¸Šè§’ Export</td></tr><tr><td>è¿œç¨‹è°ƒè¯•</td><td>ä½¿ç”¨ Dart VM Service URL è¿æ¥</td></tr></tbody></table>
<h2 data-id="heading-13">4.1 DevToolsçš„åŸç†</h2>
<p><code>Flutter DevTools</code> æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ª åŸºäº <code>Web</code> çš„è°ƒè¯•å·¥å…·é›†ï¼Œå®ƒé€šè¿‡ä¸ <code>Dart VM Service</code> å»ºç«‹é€šä¿¡ï¼Œå®ç°å¯¹ <code>Flutter</code> åº”ç”¨çš„ç›‘æ§ã€è°ƒè¯•ã€æ€§èƒ½åˆ†æç­‰åŠŸèƒ½ã€‚</p>
<p>è€Œ <code>Flutter Engine</code> æ˜¯è¿è¡Œ Flutter åº”ç”¨çš„åº•å±‚å¼•æ“ï¼Œè´Ÿè´£æ¸²æŸ“ã€äº‹ä»¶åˆ†å‘ã€å¹³å°é€šé“ã€Dart VM æ‰§è¡Œç­‰æ ¸å¿ƒåŠŸèƒ½ã€‚</p>
<p>ä¸¤è€…ä¹‹é—´å¹¶éç›´æ¥é€šä¿¡ï¼Œè€Œæ˜¯é€šè¿‡ <code>Dart VM Service Protocol</code>ï¼ˆåŸºäº <code>WebSocket</code> çš„ <code>JSON-RPC</code> åè®®ï¼‰ è¿›è¡Œ é—´æ¥é€šä¿¡ã€‚</p>
<pre><code class="hljs">Flutter DevTools  â‡„  Dart VM Service  â‡„  Flutter Engine
</code></pre>
<hr/>
<h2 data-id="heading-14">5 å‚è€ƒèµ„æ–™</h2>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.flutter.dev%2Ftools%2Fdevtools%2Foverview" target="_blank" title="https://docs.flutter.dev/tools/devtools/overview" ref="nofollow noopener noreferrer">Flutter DevTools å®˜æ–¹æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.flutter.dev%2Fperf%2Frendering" target="_blank" title="https://docs.flutter.dev/perf/rendering" ref="nofollow noopener noreferrer">Flutter æ€§èƒ½ä¼˜åŒ–æŒ‡å—</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fflutter%2Fdevtools" target="_blank" title="https://github.com/flutter/devtools" ref="nofollow noopener noreferrer">DevTools GitHub ä»“åº“</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[TRAE SOLO 3.0 æ­£å¼ç‰ˆé¦–ç§€ï¼šSOLO Code å®æˆ˜ã€Šå¤§é—¹å¤©å®«ã€‹äº¤äº’å¼é—¯å…³æ¸¸æˆğŸ§£]]></title>    <link>https://juejin.cn/post/7572405211441348651</link>    <guid>https://juejin.cn/post/7572405211441348651</guid>    <pubDate>2025-11-14T15:06:27.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572405211441348651" data-draft-id="7572403510467051563" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="TRAE SOLO 3.0 æ­£å¼ç‰ˆé¦–ç§€ï¼šSOLO Code å®æˆ˜ã€Šå¤§é—¹å¤©å®«ã€‹äº¤äº’å¼é—¯å…³æ¸¸æˆğŸ§£"/> <meta itemprop="keywords" content="Trae"/> <meta itemprop="datePublished" content="2025-11-14T15:06:27.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å›´å·¾å“¥è§å°˜"/> <meta itemprop="url" content="https://juejin.cn/user/1222312659548446"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            TRAE SOLO 3.0 æ­£å¼ç‰ˆé¦–ç§€ï¼šSOLO Code å®æˆ˜ã€Šå¤§é—¹å¤©å®«ã€‹äº¤äº’å¼é—¯å…³æ¸¸æˆğŸ§£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1222312659548446/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å›´å·¾å“¥è§å°˜
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-14T15:06:27.000Z" title="Fri Nov 14 2025 15:06:27 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    5
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ğŸŒŸ <strong>TRAE SOLO 3.0 æ­£å¼ç‰ˆé¦–ç§€ï¼šSOLO Code å®æˆ˜ã€Šå¤§é—¹å¤©å®«ã€‹äº¤äº’å¼é—¯å…³æ¸¸æˆ</strong></h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e3397d4045c740bf98ef4fbc73745d3c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Zu05be-5ZOl6JCn5bCY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763737847&amp;x-signature=E%2B%2FWRGE8v%2FHP%2FJOchSqx72JFwvI%3D" alt="æˆªå±2025-11-14 22.21.31.png" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2dd1ace9d8774a97a9b985c7d5a0dfab~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Zu05be-5ZOl6JCn5bCY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763737847&amp;x-signature=EDL3wetCeaGaTcR%2BxP884%2FngWv4%3D" alt="æˆªå±2025-11-14 22.22.02.png" loading="lazy"/></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV1XKCuBHEef%2F%3Fspm_id_from%3D333.1387.homepage.video_card.click" target="_blank" title="https://www.bilibili.com/video/BV1XKCuBHEef/?spm_id_from=333.1387.homepage.video_card.click" ref="nofollow noopener noreferrer">ã€ŒTRAE SOLO 3.0 æ­£å¼ç‰ˆåˆä½“éªŒã€å¤§é—¹å¤©å®«-äº¤äº’å¼é—¯å…³å°æ¸¸æˆåˆ¶ä½œğŸ§£#TRAE 3.0 SOLOå‡ºé“ å¹¶ @TRAE #SOLO å·²å°±ä½ #TRAEå‘</a></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/08322366446b46d2819c77753a5030fd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Zu05be-5ZOl6JCn5bCY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763737847&amp;x-signature=WaaBrqAzsVGuaCiGhIEG%2BAcPpxI%3D" alt="22.gif" loading="lazy"/></p>
<h3 data-id="heading-1">ğŸ—“ï¸ <strong>é¡¹ç›®æ¦‚è§ˆä¸å¼€å‘ç¯å¢ƒ</strong></h3>
<p>æœ¬æ¬¡å®æˆ˜ä½“éªŒäº <strong>2025å¹´11æœˆ14æ—¥ (å‘¨äº”) æ™šä¸Š</strong>å®Œæˆï¼Œæ—¨åœ¨æµ‹è¯• TRAE 3.0 æ­£å¼ç‰ˆåœ¨å¤„ç†å¤æ‚äº¤äº’å¼æ¸¸æˆé€»è¾‘æ–¹é¢çš„èƒ½åŠ›ã€‚</p>
<h4 data-id="heading-2">1. <strong>ç¯å¢ƒé…ç½®</strong></h4>
<ul>
<li><strong>è½¯ä»¶ç‰ˆæœ¬</strong>ï¼šæˆ‘ä½¿ç”¨çš„æ˜¯ TRAE 3.0 çš„æœ€æ–°ç‰ˆæœ¬ã€‚</li>
<li><strong>ç¡¬ä»¶å¹³å°</strong>ï¼šåŸºäº <strong>Apple M-series ç”µè„‘ (M4)</strong> å¹³å°è¿›è¡Œå¼€å‘å’Œæµ‹è¯•ã€‚ç”¨æˆ·åœ¨ä¸‹è½½æ—¶éœ€è¦æ ¹æ®è‡ªå·±çš„ç”µè„‘é…ç½®ï¼ˆå¦‚ Apple æˆ– Inter ç”µè„‘ï¼‰æ¥é€‰æ‹©å¯¹åº”çš„ç‰ˆæœ¬è¿›è¡Œä¸‹è½½ã€‚</li>
</ul>
<h4 data-id="heading-3">2. <strong>æ ¸å¿ƒå·¥å…·ä¸æ¨¡å‹</strong></h4>
<p>æœ¬æ¬¡é¡¹ç›®ä¸»è¦ä¾èµ– <strong>SOLO Code</strong> æ¨¡å¼ï¼Œæ¥å®ç°å¿«é€Ÿç¼–ç å’Œéƒ¨ç½²ã€‚</p>
<ul>
<li><strong>æ¨¡å‹ä½“ç³»</strong>ï¼šåœ¨ TRAE SOLO ç¯å¢ƒä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æŸ¥çœ‹å’Œåˆ©ç”¨åŒ…æ‹¬ <strong>SOLO Code</strong> å’Œ **SOLO Builder ** åœ¨å†…çš„æ ¸å¿ƒ SOLO ä½“ç³»ã€‚</li>
<li><strong>æ•´ä½“è®¾è®¡å¯¼å…¥</strong>ï¼šä¸ºäº†æŒ‡å¯¼ AI æ›´å¥½åœ°å®Œæˆä»»åŠ¡ï¼Œæˆ‘å¯¼å…¥äº†æ•´å¥—çš„<strong>è®¾è®¡å‡†åˆ™</strong> (æ•´å¥—)ï¼ŒåŒ…æ‹¬ <strong>UI è®¾è®¡ã€å‰ç«¯æ¶æ„ã€åç«¯æ¶æ„ã€API æµ‹è¯•ã€æ€§èƒ½ä¼˜åŒ–</strong>åŠ<strong>åˆè§„å®¡æŸ¥å‘˜</strong>ç­‰ã€‚</li>
</ul>
<h3 data-id="heading-4">ğŸ’» <strong>SOLO Code å®æˆ˜ï¼šäº¤äº’å¼æ¸¸æˆå¿«é€Ÿæ„å»º</strong></h3>
<p>æˆ‘çš„æ ¸å¿ƒéœ€æ±‚æ˜¯è®¾è®¡ä¸€ä¸ªå…·æœ‰<strong>äº¤äº’å¼é—¯å…³é€»è¾‘çš„ã€Šå¤§é—¹å¤©å®«ã€‹å°æ¸¸æˆ</strong>ã€‚</p>
<h4 data-id="heading-5">1. <strong>éœ€æ±‚è¾“å…¥ä¸é¡¹ç›®ç”Ÿæˆ</strong></h4>
<p>æˆ‘å‘ç³»ç»Ÿç»™å‡ºäº†æç¤ºï¼šâ€œè®¾è®¡ä¸€ä¸ªå¤§å¤©å®«çš„äº¤äº’å¼çš„é—¯å…³æ¸¸æˆâ€ã€‚</p>
<p>æç¤ºè¯ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">è®¾è®¡ä¸€ä¸ªåä¸º"å¤§é—¹å¤©å®«"çš„äº¤äº’å¼é—¯å…³å°æ¸¸æˆï¼Œå…·ä½“è¦æ±‚å¦‚ä¸‹ï¼š

  


<span class="hljs-bullet">1.</span> äº¤äº’å¼å­™æ‚Ÿç©ºè§’è‰²ï¼š

<span class="hljs-bullet">-</span> å®ç°å­™æ‚Ÿç©ºè§’è‰²è·Ÿéšé¼ æ ‡æŒ‡é’ˆï¼ˆæ¡Œé¢ç«¯ï¼‰æˆ–æ‰‹æŒ‡è§¦æ‘¸ä½ç½®ï¼ˆç§»åŠ¨ç«¯ï¼‰åœ¨äº‘ç«¯é£è¡Œçš„åŠŸèƒ½

<span class="hljs-bullet">-</span> è§’è‰²åŠ¨ç”»åŒ…å«é£è¡Œæ—¶çš„åŠ¨æ€æ•ˆæœï¼ˆå¦‚è¡£è¢‚é£˜åŠ¨ã€ç­‹æ–—äº‘è½¨è¿¹ï¼‰

<span class="hljs-bullet">-</span> è§’è‰²å¤§å°å’Œç§»åŠ¨é€Ÿåº¦éœ€æ ¹æ®å±å¹•å°ºå¯¸è‡ªåŠ¨è°ƒæ•´

  


<span class="hljs-bullet">2.</span> é‡‘ç®æ£’æ”»å‡»ç‰¹æ•ˆç³»ç»Ÿï¼š

<span class="hljs-bullet">-</span> ç‚¹å‡»å±å¹•ï¼ˆç§»åŠ¨ç«¯ï¼‰æˆ–é¼ æ ‡å·¦é”®ï¼ˆæ¡Œé¢ç«¯ï¼‰è§¦å‘æ”»å‡»åŠ¨ä½œ

<span class="hljs-bullet">-</span> æ”»å‡»æ—¶æ’­æ”¾å­™æ‚Ÿç©ºæŒ¥èˆé‡‘ç®æ£’çš„åŠ¨ç”»åºåˆ—

<span class="hljs-bullet">-</span> äº§ç”Ÿé‡‘è‰²å†²å‡»æ³¢ç‰¹æ•ˆï¼ˆç²’å­æ•ˆæœ+å…‰æ™•ï¼‰ï¼Œå‘ç‚¹å‡»æ–¹å‘æ‰©æ•£

<span class="hljs-bullet">-</span> ç‰¹æ•ˆéœ€åŒ…å«å‡»é€€å¤©å…µå¤©å°†çš„è§†è§‰åé¦ˆï¼ˆå¦‚æ•Œäººè¢«å‡»é£åŠ¨ç”»ï¼‰

  


<span class="hljs-bullet">3.</span> åŠ¨æ€å¤©å®«èƒŒæ™¯ï¼š

<span class="hljs-bullet">-</span> å—å¤©é—¨ä½œä¸ºä¸»è¦èƒŒæ™¯å…ƒç´ ï¼Œéœ€ä½“ç°å·å³¨æ°”åŠ¿

<span class="hljs-bullet">-</span> å®ç°å¤šå±‚è§†å·®æ»šåŠ¨çš„äº‘é›¾æ•ˆæœï¼ˆè¿‘æ™¯å¿«ã€è¿œæ™¯æ…¢ï¼‰

<span class="hljs-bullet">-</span> éšæœºç”Ÿæˆé£˜åŠ¨çš„äº‘æœµä½œä¸ºåœºæ™¯è£…é¥°

<span class="hljs-bullet">-</span> æ·»åŠ é€‚å½“çš„å…‰ç…§æ•ˆæœå¢å¼ºå¤©å®«æ°›å›´

  


<span class="hljs-bullet">4.</span> å“åº”å¼è®¾è®¡ï¼š

<span class="hljs-bullet">-</span> è‡ªåŠ¨é€‚é…ä¸åŒå±å¹•å°ºå¯¸ï¼ˆä»æ‰‹æœºåˆ°æ¡Œé¢æ˜¾ç¤ºå™¨ï¼‰

<span class="hljs-bullet">-</span> è§¦æ§å’Œé¼ æ ‡æ“ä½œéœ€æœ‰å¯¹åº”çš„äº¤äº’ä¼˜åŒ–

<span class="hljs-bullet">-</span> æ€§èƒ½ä¼˜åŒ–ç¡®ä¿åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šæµç•…è¿è¡Œ

<span class="hljs-bullet">-</span> æä¾›æ¨ªç«–å±è‡ªåŠ¨è°ƒæ•´å¸ƒå±€çš„åŠŸèƒ½

  


<span class="hljs-bullet">5.</span> æŠ€æœ¯è¦æ±‚ï¼š

<span class="hljs-bullet">-</span> ä½¿ç”¨HTML5 Canvasæˆ–WebGLå®ç°æ ¸å¿ƒåŠ¨ç”»

<span class="hljs-bullet">-</span> é‡‡ç”¨CSSåª’ä½“æŸ¥è¯¢å¤„ç†å“åº”å¼å¸ƒå±€

<span class="hljs-bullet">-</span> å®ç°60fpsçš„æµç•…åŠ¨ç”»æ•ˆæœ

<span class="hljs-bullet">-</span> æ·»åŠ é€‚å½“çš„éŸ³æ•ˆï¼ˆé£è¡Œå£°ã€æ”»å‡»å£°ã€èƒŒæ™¯éŸ³ä¹ï¼‰

  


<span class="hljs-bullet">6.</span> äº¤ä»˜ç‰©ï¼š

<span class="hljs-bullet">-</span> å®Œæ•´å¯è¿è¡Œçš„ç½‘é¡µæ¸¸æˆ

<span class="hljs-bullet">-</span> é€‚é…ä¸»æµç°ä»£æµè§ˆå™¨

<span class="hljs-bullet">-</span> ç§»åŠ¨ç«¯éœ€é€šè¿‡è§¦æ§è®¾å¤‡æµ‹è¯•

<span class="hljs-bullet">-</span> æä¾›ç®€è¦çš„ä½¿ç”¨è¯´æ˜æ–‡æ¡£
</code></pre>
<ul>
<li>Solo Coder è¿…é€Ÿæ ¹æ®æç¤ºç”Ÿæˆäº†å½“å‰çš„æ¸¸æˆè®¡åˆ’å’Œéª¨æ¶ã€‚</li>
<li>é¡¹ç›®åˆ©ç”¨ SOLO Code çš„é«˜æ•ˆæ€§ï¼ŒåŸºæœ¬å¿«é€Ÿå®Œæˆäº†å¼€å‘ã€‚</li>
</ul>
<h4 data-id="heading-6">2. <strong>å…³é”®åŠŸèƒ½å®ç°ä¸è¿­ä»£</strong></h4>
<p>åœ¨åˆæ­¥ç”Ÿæˆæ¸¸æˆéª¨æ¶åï¼Œä¸ºäº†å¢å¼ºæ¸¸æˆçš„å¯ç©æ€§ï¼Œæˆ‘è¿›è¡Œäº†å…³é”®çš„<strong>ä¼˜åŒ–å’ŒåŠŸèƒ½è¿­ä»£</strong>ï¼š</p>
<ul>
<li><strong>å¢åŠ æ•Œäººäº’åŠ¨æ€§</strong>ï¼šä¸€å¼€å§‹ï¼Œæ¸¸æˆä¸­ä¾§è¾¹çš„å°å…µæ˜¯<strong>æ²¡æœ‰å‘å°„å­å¼¹åŠŸèƒ½</strong>çš„ã€‚ç»è¿‡ä¼˜åŒ–ï¼Œæˆ‘ä»¬å¢åŠ äº†è®©å°å…µ<strong>å¯ä»¥å‘å°„å­å¼¹</strong>çš„åŠŸèƒ½ï¼Œæå¤§åœ°å¢åŠ äº†æ¸¸æˆçš„å¯ç©æ€§ã€‚</li>
<li><strong>ç”¨æˆ·ä½“éªŒä¼˜åŒ–</strong>ï¼šæˆ‘<strong>å¢åŠ äº†ä¸€ä¸ªâ€œé‡æ–°å¼€å§‹â€çš„æŒ‰é”®</strong>ï¼Œæ–¹ä¾¿ç©å®¶å¿«é€Ÿé‡å¯æ¸¸æˆã€‚</li>
<li><strong>å…³å¡è®¾è®¡</strong>ï¼šæˆ‘è®© AI è®¾è®¡äº†ä¸‰ä¸ªå…³å¡ï¼ŒåŒ…æ‹¬ <strong>å¤©åº­å¤–å›´ã€å—å¤©é—¨</strong> å’Œ <strong>å‡Œéœ„å®æ®¿</strong>ã€‚</li>
<li><strong>è§†è§‰æ•ˆæœå¢å¼º</strong>ï¼šé’ˆå¯¹ä¸»è§’ï¼ˆå­™æ‚Ÿç©ºï¼‰æ­¦å™¨çš„é‡‘å…‰æ•ˆæœï¼Œæˆ‘è®© AI <strong>å°†é‡‘ç®æ£’ï¼ˆæ£å­ï¼‰æé•¿äº†ä¸€ç‚¹</strong>ï¼Œä½¿å…¶çœ‹èµ·æ¥æ›´å…·ç»å…¸æ•ˆæœã€‚</li>
</ul>
<h3 data-id="heading-7">âœ… <strong>éƒ¨ç½²ä¸å±•æœ›</strong></h3>
<h4 data-id="heading-8">1. <strong>ä¸€é”®éƒ¨ç½²</strong></h4>
<p>é¡¹ç›®å®Œæˆåï¼Œæˆ‘ç›´æ¥ä½¿ç”¨ **éƒ¨ç½² ** åŠŸèƒ½å°†æ¸¸æˆéƒ¨ç½²åˆ°çº¿ä¸Šã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Ftrae39i9vn62.vercel.app%2F" target="_blank" title="https://trae39i9vn62.vercel.app/" ref="nofollow noopener noreferrer">trae39i9vn62.vercel.app/</a></p>
<ul>
<li>éƒ¨ç½²æˆåŠŸåï¼Œç³»ç»Ÿç”Ÿæˆäº†é“¾æ¥ã€‚é€šè¿‡åŠ è½½é“¾æ¥ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨ç”µè„‘ç«¯çœ‹åˆ°æ¸¸æˆçš„å±•ç¤ºæƒ…å†µï¼Œå¹¶è¿›è¡Œæ¸¸ç©ã€‚</li>
</ul>
<h4 data-id="heading-9">2. <strong>åç»­ä¼˜åŒ–æ–¹å‘</strong></h4>
<p>è™½ç„¶ SOLO Code å¿«é€Ÿå®Œæˆäº†æ¸¸æˆçš„æ ¸å¿ƒæ„å»ºå’Œé€»è¾‘å®ç°ï¼Œä½†è‹¥è¦è¾¾åˆ°æ›´ä½³çš„æ•ˆæœï¼Œä»éœ€åœ¨ä»¥ä¸‹æ–¹é¢æŠ•å…¥æ›´å¤šç²¾åŠ›ï¼š</p>
<ul>
<li><strong>è®¾è®¡ä¸ç¾å·¥</strong>ï¼šéœ€è¦åœ¨<strong>æƒ³æ³•ã€è®¾è®¡ã€ç¾å·¥</strong>å’Œ<strong>é¡µé¢</strong>ä¸Šå¤šèŠ±æ—¶é—´æ¥æ‰“ç£¨ã€‚</li>
<li><strong>ç§»åŠ¨ç«¯é€‚é…</strong>ï¼šå¦‚æœæƒ³è¦æ”¯æŒæ‰‹æœºç«¯æ¸¸ç©ï¼Œéœ€è¦å¢åŠ ä¸€ä¸ª<strong>æ‰‹æœºç«¯çš„ä¸Šä¸‹å·¦å³æŒ‰é”®</strong>ï¼Œä»¥é€‚åº”ç§»åŠ¨ç«¯çš„æ“ä½œã€‚</li>
</ul>
<p>æœ¬æ¬¡å®æˆ˜å……åˆ†å±•ç¤ºäº† TRAE SOLO 3.0 åœ¨<strong>ç½‘é¡µç«¯å°æ¸¸æˆ</strong>è¿™ç§ç›¸å¯¹ç®€å•çš„åº”ç”¨åœºæ™¯ä¸­ï¼Œèƒ½å¤Ÿå¿«é€Ÿå®ç°ä»æƒ³æ³•åˆ°åŠŸèƒ½å®ç°ã€å†åˆ°ä¼˜åŒ–çš„å…¨æµç¨‹ï¼Œç‰¹åˆ«æ˜¯å¯¹äºäº¤äº’æ€§åŠŸèƒ½çš„å¿«é€Ÿè¿­ä»£å…·æœ‰æ˜¾è‘—ä¼˜åŠ¿ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è®¡ç®—æœºè¯­è¨€ä¸­çš„å¤šæ€å®ç°]]></title>    <link>https://juejin.cn/post/7572413448941666331</link>    <guid>https://juejin.cn/post/7572413448941666331</guid>    <pubDate>2025-11-14T12:16:59.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572413448941666331" data-draft-id="7572362484659945523" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è®¡ç®—æœºè¯­è¨€ä¸­çš„å¤šæ€å®ç°"/> <meta itemprop="keywords" content="C++"/> <meta itemprop="datePublished" content="2025-11-14T12:16:59.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ¸©å®‡é£"/> <meta itemprop="url" content="https://juejin.cn/user/4300945219403368"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è®¡ç®—æœºè¯­è¨€ä¸­çš„å¤šæ€å®ç°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4300945219403368/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ¸©å®‡é£
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-14T12:16:59.000Z" title="Fri Nov 14 2025 12:16:59 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    7
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤šæ€ï¼ˆPolymorphismï¼‰æ˜¯æŒ‡"åŒä¸€æ¥å£ï¼Œå¤šç§å®ç°"ï¼Œæ˜¯è®¡ç®—æœºè¯­è¨€ä¸­çš„æ ¸å¿ƒæ¦‚å¿µã€‚å¤šæ€å¯ä»¥åœ¨ç¼–è¯‘æœŸå®ç°ï¼Œä¹Ÿå¯ä»¥åœ¨è¿è¡Œæ—¶å®ç°ã€‚ç¼–è¯‘æœŸå¤šæ€é€šè¿‡æ¨¡æ¿ã€æ³›å‹ç­‰æœºåˆ¶æä¾›å¤šä»½ä»£ç ï¼Œè€Œè¿è¡Œæ—¶å¤šæ€é€šè¿‡è™šå‡½æ•°ã€æ¥å£ã€é¸­å­ç±»å‹ç­‰æ–¹å¼å®ç°åŠ¨æ€ç»‘å®šã€‚æœ¬æ–‡ä»‹ç»å¤šæ€åœ¨ä¸åŒè¯­è¨€ä¸­çš„å®ç°æ–¹å¼ã€‚</p>
<h2 data-id="heading-0">è¿è¡Œæ—¶å¤šæ€</h2>
<p>è¿è¡Œæ—¶å¤šæ€çš„æ ¸å¿ƒæ˜¯é€šè¿‡é—´æ¥æœºåˆ¶åœ¨è¿è¡Œæ—¶ç¡®å®šå…·ä½“è°ƒç”¨å“ªä¸ªå®ç°ã€‚æœ¬ç« ä»‹ç»è¿è¡Œæ—¶å¤šæ€çš„å®ç°åŸç†ï¼ŒåŒ…æ‹¬åŸºäºç»§æ‰¿çš„åŠ¨æ€æ´¾å‘ã€åŸºäºç±»å‹æ ‡ç­¾çš„è”åˆä½“ã€åŸºäºæ¥å£çš„åè®®çº¦æŸã€ä»¥åŠåŸºäºå±æ€§æŸ¥æ‰¾çš„é¸­å­ç±»å‹ã€‚</p>
<h3 data-id="heading-1">åŸºäºç»§æ‰¿çš„åŠ¨æ€æ´¾å‘</h3>
<p>è¿™æ˜¯é¢å‘å¯¹è±¡è¯­è¨€ä¸­æœ€ç»å…¸çš„è¿è¡Œæ—¶å¤šæ€å®ç°æ–¹å¼ã€‚é€šè¿‡ç»§æ‰¿å»ºç«‹ç±»å‹å±‚æ¬¡ï¼Œä½¿ç”¨è™šå‡½æ•°å®ç°åŠ¨æ€æ´¾å‘ã€‚</p>
<p><strong>C++ ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-C++" lang="C++"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Animal</span> {
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">speak</span><span class="hljs-params">()</span> </span>= <span class="hljs-number">0</span>;  <span class="hljs-comment">// çº¯è™šå‡½æ•°</span>
    <span class="hljs-keyword">virtual</span> ~<span class="hljs-built_in">Animal</span>() = <span class="hljs-keyword">default</span>;
};

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Dog</span> : <span class="hljs-keyword">public</span> Animal {
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">speak</span><span class="hljs-params">()</span> <span class="hljs-keyword">override</span> </span>{ std::cout &lt;&lt; <span class="hljs-string">"Woof!\n"</span>; }
};

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Cat</span> : <span class="hljs-keyword">public</span> Animal {
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">speak</span><span class="hljs-params">()</span> <span class="hljs-keyword">override</span> </span>{ std::cout &lt;&lt; <span class="hljs-string">"Meow!\n"</span>; }
};

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    Animal* animal1 = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Dog</span>();
    Animal* animal2 = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Cat</span>();
    animal1-&gt;<span class="hljs-built_in">speak</span>();  <span class="hljs-comment">// è¾“å‡º: Woof!</span>
    animal2-&gt;<span class="hljs-built_in">speak</span>();  <span class="hljs-comment">// è¾“å‡º: Meow!</span>
    <span class="hljs-keyword">delete</span> animal1;
    <span class="hljs-keyword">delete</span> animal2;
}
</code></pre>
<p><strong>å®ç°åŸç†ï¼š</strong></p>
<p>ç¼–è¯‘å™¨ä¸ºæ¯ä¸ªåŒ…å«è™šå‡½æ•°çš„ç±»ç”Ÿæˆè™šå‡½æ•°è¡¨ï¼ˆvtableï¼‰ï¼Œå¯¹è±¡ä¸­å­˜å‚¨æŒ‡å‘ vtable çš„æŒ‡é’ˆã€‚è°ƒç”¨è™šå‡½æ•°æ—¶ï¼Œé€šè¿‡å¯¹è±¡çš„ vtable æŒ‡é’ˆæŸ¥æ‰¾å®é™…å‡½æ•°åœ°å€ï¼Œå®ç°åŠ¨æ€ç»‘å®šã€‚</p>
<p><strong>TS ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-TS" lang="TS"><span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Animal</span> {
    <span class="hljs-keyword">abstract</span> <span class="hljs-title function_">speak</span>(): <span class="hljs-built_in">void</span>;
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Dog</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Animal</span> {
    <span class="hljs-title function_">speak</span>(): <span class="hljs-built_in">void</span> { <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Woof!"</span>); }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Cat</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Animal</span> {
    <span class="hljs-title function_">speak</span>(): <span class="hljs-built_in">void</span> { <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Meow!"</span>); }
}

<span class="hljs-keyword">const</span> <span class="hljs-attr">animal1</span>: <span class="hljs-title class_">Animal</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Dog</span>();
<span class="hljs-keyword">const</span> <span class="hljs-attr">animal2</span>: <span class="hljs-title class_">Animal</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Cat</span>();
animal1.<span class="hljs-title function_">speak</span>();  <span class="hljs-comment">// è¾“å‡º: Woof!</span>
animal2.<span class="hljs-title function_">speak</span>();  <span class="hljs-comment">// è¾“å‡º: Meow!</span>
</code></pre>
<p><strong>å®ç°åŸç†ï¼š</strong></p>
<p>TypeScript ç¼–è¯‘ä¸º JavaScript åï¼Œç»§æ‰¿å…³ç³»é€šè¿‡åŸå‹é“¾å®ç°ã€‚è°ƒç”¨æ–¹æ³•æ—¶ï¼Œå¼•æ“æ²¿åŸå‹é“¾å‘ä¸ŠæŸ¥æ‰¾ï¼Œæ‰¾åˆ°å¯¹åº”çš„æ–¹æ³•å®ç°å¹¶è°ƒç”¨ã€‚</p>
<h3 data-id="heading-2">åŸºäºç±»å‹æ ‡ç­¾çš„è”åˆä½“</h3>
<p>è”åˆä½“é€šè¿‡ç±»å‹æ ‡ç­¾è®°å½•å½“å‰å­˜å‚¨çš„ç±»å‹ï¼Œåœ¨è¿è¡Œæ—¶æ ¹æ®æ ‡ç­¾é€‰æ‹©å¯¹åº”çš„å¤„ç†é€»è¾‘ã€‚</p>
<p><strong>C++ ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-C++" lang="C++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;variant&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string&gt;</span></span>

<span class="hljs-keyword">struct</span> <span class="hljs-title class_">Circle</span> { <span class="hljs-type">double</span> radius; };
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">Rectangle</span> { <span class="hljs-type">double</span> width, height; };

<span class="hljs-keyword">using</span> Shape = std::variant&lt;Circle, Rectangle&gt;;

<span class="hljs-function"><span class="hljs-type">double</span> <span class="hljs-title">area</span><span class="hljs-params">(<span class="hljs-type">const</span> Shape&amp; shape)</span> </span>{
    <span class="hljs-keyword">return</span> std::<span class="hljs-built_in">visit</span>([](<span class="hljs-keyword">auto</span>&amp;&amp; s) -&gt; <span class="hljs-type">double</span> {
        <span class="hljs-keyword">using</span> T = std::<span class="hljs-type">decay_t</span>&lt;<span class="hljs-keyword">decltype</span>(s)&gt;;
        <span class="hljs-keyword">if</span> <span class="hljs-built_in">constexpr</span> (std::is_same_v&lt;T, Circle&gt;) {
            <span class="hljs-keyword">return</span> <span class="hljs-number">3.14</span> * s.radius * s.radius;
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> <span class="hljs-built_in">constexpr</span> (std::is_same_v&lt;T, Rectangle&gt;) {
            <span class="hljs-keyword">return</span> s.width * s.height;
        }
    }, shape);
}

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    Shape s1 = Circle{<span class="hljs-number">5.0</span>};
    Shape s2 = Rectangle{<span class="hljs-number">3.0</span>, <span class="hljs-number">4.0</span>};
    std::cout &lt;&lt; <span class="hljs-built_in">area</span>(s1) &lt;&lt; <span class="hljs-string">"\n"</span>;  <span class="hljs-comment">// è¾“å‡º: 78.5</span>
    std::cout &lt;&lt; <span class="hljs-built_in">area</span>(s2) &lt;&lt; <span class="hljs-string">"\n"</span>;  <span class="hljs-comment">// è¾“å‡º: 12</span>
}
</code></pre>
<p><strong>å®ç°åŸç†ï¼š</strong></p>
<p><code>std::variant</code> å†…éƒ¨å­˜å‚¨ç±»å‹æ ‡ç­¾å’Œè¶³å¤Ÿå¤§çš„å­˜å‚¨ç©ºé—´ã€‚<code>std::visit</code> æ ¹æ®ç±»å‹æ ‡ç­¾åœ¨è¿è¡Œæ—¶åˆ†å‘åˆ°å¯¹åº”çš„å¤„ç†åˆ†æ”¯ã€‚</p>
<p><strong>TS ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-TS" lang="TS"><span class="hljs-keyword">type</span> <span class="hljs-title class_">Circle</span> = { <span class="hljs-attr">kind</span>: <span class="hljs-string">'circle'</span>; <span class="hljs-attr">radius</span>: <span class="hljs-built_in">number</span> };
<span class="hljs-keyword">type</span> <span class="hljs-title class_">Rectangle</span> = { <span class="hljs-attr">kind</span>: <span class="hljs-string">'rectangle'</span>; <span class="hljs-attr">width</span>: <span class="hljs-built_in">number</span>; <span class="hljs-attr">height</span>: <span class="hljs-built_in">number</span> };
<span class="hljs-keyword">type</span> <span class="hljs-title class_">Shape</span> = <span class="hljs-title class_">Circle</span> | <span class="hljs-title class_">Rectangle</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">area</span>(<span class="hljs-params">shape: Shape</span>): <span class="hljs-built_in">number</span> {
    <span class="hljs-keyword">switch</span> (shape.<span class="hljs-property">kind</span>) {  <span class="hljs-comment">// æ ¹æ®ç±»å‹æ ‡ç­¾åˆ†å‘</span>
        <span class="hljs-keyword">case</span> <span class="hljs-string">'circle'</span>:
            <span class="hljs-keyword">return</span> <span class="hljs-number">3.14</span> * shape.<span class="hljs-property">radius</span> * shape.<span class="hljs-property">radius</span>;
        <span class="hljs-keyword">case</span> <span class="hljs-string">'rectangle'</span>:
            <span class="hljs-keyword">return</span> shape.<span class="hljs-property">width</span> * shape.<span class="hljs-property">height</span>;
    }
}

<span class="hljs-keyword">const</span> <span class="hljs-attr">s1</span>: <span class="hljs-title class_">Shape</span> = { <span class="hljs-attr">kind</span>: <span class="hljs-string">'circle'</span>, <span class="hljs-attr">radius</span>: <span class="hljs-number">5</span> };
<span class="hljs-keyword">const</span> <span class="hljs-attr">s2</span>: <span class="hljs-title class_">Shape</span> = { <span class="hljs-attr">kind</span>: <span class="hljs-string">'rectangle'</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">3</span>, <span class="hljs-attr">height</span>: <span class="hljs-number">4</span> };
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">area</span>(s1));  <span class="hljs-comment">// è¾“å‡º: 78.5</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">area</span>(s2));  <span class="hljs-comment">// è¾“å‡º: 12</span>
</code></pre>
<p><strong>å®ç°åŸç†ï¼š</strong></p>
<p>TypeScript çš„è”åˆç±»å‹ï¼ˆUnion Typesï¼‰é€šè¿‡åˆ¤åˆ«å­—æ®µï¼ˆå¦‚ <code>kind</code>ï¼‰åœ¨è¿è¡Œæ—¶åŒºåˆ†å…·ä½“ç±»å‹ã€‚ç¼–è¯‘åçš„ JavaScript ä½¿ç”¨ <code>switch</code> è¯­å¥æ ¹æ®æ ‡ç­¾åˆ†å‘åˆ°ä¸åŒåˆ†æ”¯ã€‚</p>
<h3 data-id="heading-3">åŸºäºæ¥å£çš„åè®®çº¦æŸ</h3>
<p>æ¥å£å®šä¹‰äº†ä¸€ç»„æ–¹æ³•ç­¾åï¼Œä»»ä½•å®ç°è¿™äº›æ–¹æ³•çš„ç±»å‹éƒ½æ»¡è¶³è¯¥æ¥å£ã€‚è¿™ç§æ–¹å¼å¼ºè°ƒ"èƒ½åšä»€ä¹ˆ"ï¼ˆåè®®ï¼‰ï¼Œè€Œé"æ˜¯ä»€ä¹ˆ"ï¼ˆç±»å‹å±‚æ¬¡ï¼‰ã€‚</p>
<p><strong>C++ ç¤ºä¾‹ï¼š</strong></p>
<p>C++ æ²¡æœ‰æä¾›æ¥å£çš„è¯­è¨€ç‰¹æ€§ï¼Œé€šè¿‡ç»§æ‰¿æŠ½è±¡åŸºç±»å®ç°æ¥å£çº¦æŸã€‚</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Drawable</span> {
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">draw</span><span class="hljs-params">()</span> </span>= <span class="hljs-number">0</span>;
};

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Circle</span> : <span class="hljs-keyword">public</span> Drawable {
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">draw</span><span class="hljs-params">()</span> <span class="hljs-keyword">override</span> </span>{ std::cout &lt;&lt; <span class="hljs-string">"Circle\n"</span>; }
};

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Square</span> : <span class="hljs-keyword">public</span> Drawable {
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">draw</span><span class="hljs-params">()</span> <span class="hljs-keyword">override</span> </span>{ std::cout &lt;&lt; <span class="hljs-string">"Square\n"</span>; }
};

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">render</span><span class="hljs-params">(Drawable* shape)</span> </span>{
    shape-&gt;<span class="hljs-built_in">draw</span>();
}

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    Circle c;
    Square s;
    <span class="hljs-built_in">render</span>(&amp;c);  <span class="hljs-comment">// è¾“å‡º: Circle</span>
    <span class="hljs-built_in">render</span>(&amp;s);  <span class="hljs-comment">// è¾“å‡º: Square</span>
}
</code></pre>
<p><strong>å®ç°åŸç†ï¼š</strong></p>
<p>C++ é€šè¿‡ç»§æ‰¿å’Œè™šå‡½æ•°è¡¨å®ç°æ¥å£çº¦æŸï¼Œæœºåˆ¶ä¸Šä¸ç»§æ‰¿æ´¾å‘ç›¸åŒã€‚åŒºåˆ«åœ¨äºè¯­ä¹‰ï¼šæ¥å£å¼ºè°ƒåè®®ï¼Œç»§æ‰¿å¼ºè°ƒç±»å‹å…³ç³»ã€‚</p>
<p><strong>TS ç¤ºä¾‹ï¼š</strong></p>
<p>TypeScript æä¾› <code>interface</code> å…³é”®å­—å®šä¹‰æ¥å£ï¼Œç±»é€šè¿‡ <code>implements</code> å®ç°æ¥å£ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Drawable</span> {
  <span class="hljs-title function_">draw</span>(): <span class="hljs-built_in">void</span>;
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Circle</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Drawable</span> {
  <span class="hljs-title function_">draw</span>(): <span class="hljs-built_in">void</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Circle"</span>);
  }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Square</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Drawable</span> {
  <span class="hljs-title function_">draw</span>(): <span class="hljs-built_in">void</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Square"</span>);
  }
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">render</span>(<span class="hljs-params">shape: Drawable</span>): <span class="hljs-built_in">void</span> {
  shape.<span class="hljs-title function_">draw</span>();
}

<span class="hljs-keyword">const</span> c = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Circle</span>();
<span class="hljs-keyword">const</span> s = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Square</span>();
<span class="hljs-title function_">render</span>(c); <span class="hljs-comment">// è¾“å‡º: Circle</span>
<span class="hljs-title function_">render</span>(s); <span class="hljs-comment">// è¾“å‡º: Square</span>
</code></pre>
<p><strong>å®ç°åŸç†ï¼š</strong></p>
<p>TypeScript çš„æ¥å£åœ¨ç¼–è¯‘æœŸè¿›è¡Œç±»å‹æ£€æŸ¥ï¼Œç¡®ä¿ç±»å®ç°äº†æ¥å£çš„æ‰€æœ‰æ–¹æ³•ã€‚ç¼–è¯‘ä¸º JavaScript åï¼Œæ¥å£ä¿¡æ¯è¢«æ“¦é™¤ï¼Œè¿è¡Œæ—¶é€šè¿‡å¯¹è±¡çš„æ–¹æ³•ç›´æ¥è°ƒç”¨ã€‚</p>
<h3 data-id="heading-4">åŸºäºå±æ€§æŸ¥æ‰¾çš„é¸­å­ç±»å‹ï¼ˆåŠ¨æ€è¯­è¨€ï¼‰</h3>
<p>é¸­å­ç±»å‹ï¼ˆDuck Typingï¼‰çš„æ ¸å¿ƒæ€æƒ³æ˜¯"å¦‚æœå®ƒèµ°èµ·æ¥åƒé¸­å­ï¼Œå«èµ·æ¥åƒé¸­å­ï¼Œé‚£å®ƒå°±æ˜¯é¸­å­"ã€‚ä¸å…³å¿ƒå¯¹è±¡çš„ç±»å‹æˆ–æ¥å£å£°æ˜ï¼Œåªå…³å¿ƒå¯¹è±¡åœ¨è¿è¡Œæ—¶æ˜¯å¦å…·æœ‰æ‰€éœ€çš„å±æ€§æˆ–æ–¹æ³•ã€‚</p>
<p>C++ æ˜¯é™æ€ç±»å‹è¯­è¨€ï¼Œä¸æ”¯æŒè¿è¡Œæ—¶é¸­å­ç±»å‹ã€‚</p>
<p><strong>TS ç¤ºä¾‹ï¼š</strong></p>
<p>TypeScript çš„ç»“æ„åŒ–ç±»å‹ç³»ç»Ÿæ”¯æŒé¸­å­ç±»å‹ï¼Œåªè¦å¯¹è±¡å…·æœ‰æ‰€éœ€çš„æ–¹æ³•æˆ–å±æ€§ï¼Œå°±æ»¡è¶³ç±»å‹è¦æ±‚ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">render</span>(<span class="hljs-params">shape: { draw(): <span class="hljs-built_in">void</span> }</span>) {
  shape.<span class="hljs-title function_">draw</span>();
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Circle</span> {
  <span class="hljs-title function_">draw</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Circle"</span>);
  }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Square</span> {
  <span class="hljs-title function_">draw</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Square"</span>);
  }
}

<span class="hljs-keyword">const</span> c = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Circle</span>();
<span class="hljs-keyword">const</span> s = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Square</span>();
<span class="hljs-title function_">render</span>(c); <span class="hljs-comment">// è¾“å‡º: Circle</span>
<span class="hljs-title function_">render</span>(s); <span class="hljs-comment">// è¾“å‡º: Square</span>

<span class="hljs-comment">// å¯ä»¥ä¼ é€’æ™®é€šå¯¹è±¡</span>
<span class="hljs-title function_">render</span>({ <span class="hljs-attr">draw</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Triangle"</span>) }); <span class="hljs-comment">// è¾“å‡º: Triangle</span>
</code></pre>
<p><strong>å®ç°åŸç†ï¼š</strong></p>
<p>TypeScript åœ¨ç¼–è¯‘æœŸæ£€æŸ¥å¯¹è±¡æ˜¯å¦å…·æœ‰æ‰€éœ€çš„å±æ€§æˆ–æ–¹æ³•ï¼Œä¸è¦æ±‚æ˜¾å¼å£°æ˜ç±»å‹å…³ç³»ã€‚ç¼–è¯‘ä¸º JavaScript åï¼Œè¿è¡Œæ—¶é€šè¿‡å¯¹è±¡çš„å±æ€§ç›´æ¥è°ƒç”¨æ–¹æ³•ï¼ŒçœŸæ­£å®ç°è¿è¡Œæ—¶é¸­å­ç±»å‹ã€‚</p>
<h2 data-id="heading-5">ç¼–è¯‘æœŸå¤šæ€ï¼ˆC++ï¼‰</h2>
<p>C++ é€šè¿‡æ¨¡æ¿ï¼ˆTemplatesï¼‰å®ç°ç¼–è¯‘æœŸå¤šæ€ã€‚ç¼–è¯‘å™¨æ ¹æ®æ¨¡æ¿å‚æ•°ç”Ÿæˆå¤šä»½ä»£ç ï¼Œæ¯ä»½ä»£ç é’ˆå¯¹ç‰¹å®šç±»å‹è¿›è¡Œä¼˜åŒ–ã€‚æœ¬ç« ä»‹ç» C++ æ¨¡æ¿çš„ä¸‰ç§å½¢å¼ï¼šå‡½æ•°æ¨¡æ¿ã€ç±»æ¨¡æ¿ã€ä»¥åŠæ¨¡æ¿ç‰¹åŒ–ã€‚</p>
<h3 data-id="heading-6">å‡½æ•°æ¨¡æ¿</h3>
<p>å‡½æ•°æ¨¡æ¿å…è®¸ç¼–å†™é€‚ç”¨äºå¤šç§ç±»å‹çš„é€šç”¨å‡½æ•°ï¼Œç¼–è¯‘å™¨æ ¹æ®è°ƒç”¨æ—¶çš„ç±»å‹å‚æ•°ç”Ÿæˆå…·ä½“å‡½æ•°ã€‚</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> T&gt;
<span class="hljs-function">T <span class="hljs-title">max</span><span class="hljs-params">(T a, T b)</span> </span>{
    <span class="hljs-keyword">return</span> a &gt; b ? a : b;
}

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    std::cout &lt;&lt; <span class="hljs-built_in">max</span>(<span class="hljs-number">3</span>, <span class="hljs-number">7</span>) &lt;&lt; <span class="hljs-string">"\n"</span>;        <span class="hljs-comment">// ç”Ÿæˆ max&lt;int&gt;</span>
    std::cout &lt;&lt; <span class="hljs-built_in">max</span>(<span class="hljs-number">3.5</span>, <span class="hljs-number">2.1</span>) &lt;&lt; <span class="hljs-string">"\n"</span>;    <span class="hljs-comment">// ç”Ÿæˆ max&lt;double&gt;</span>
}
</code></pre>
<p><strong>å®ç°åŸç†ï¼š</strong></p>
<p>ç¼–è¯‘å™¨åœ¨ç¼–è¯‘æœŸæ ¹æ®è°ƒç”¨çš„ç±»å‹å‚æ•°å®ä¾‹åŒ–æ¨¡æ¿ï¼Œç”Ÿæˆå¯¹åº”ç±»å‹çš„å‡½æ•°ä»£ç ã€‚æ¯ç§ç±»å‹éƒ½æœ‰ç‹¬ç«‹çš„å‡½æ•°å®ç°ï¼Œæ²¡æœ‰è¿è¡Œæ—¶å¼€é”€ã€‚</p>
<h3 data-id="heading-7">ç±»æ¨¡æ¿</h3>
<p>ç±»æ¨¡æ¿å…è®¸ç¼–å†™é€‚ç”¨äºå¤šç§ç±»å‹çš„é€šç”¨ç±»ï¼Œå¸¸ç”¨äºå®¹å™¨ã€æ™ºèƒ½æŒ‡é’ˆç­‰åœºæ™¯ã€‚</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> T&gt;
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Stack</span> {
    std::vector&lt;T&gt; data;
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">push</span><span class="hljs-params">(T value)</span> </span>{ data.<span class="hljs-built_in">push_back</span>(value); }
    <span class="hljs-function">T <span class="hljs-title">pop</span><span class="hljs-params">()</span> </span>{ T v = data.<span class="hljs-built_in">back</span>(); data.<span class="hljs-built_in">pop_back</span>(); <span class="hljs-keyword">return</span> v; }
};

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    Stack&lt;<span class="hljs-type">int</span>&gt; s1;      <span class="hljs-comment">// ç”Ÿæˆ Stack&lt;int&gt;</span>
    s1.<span class="hljs-built_in">push</span>(<span class="hljs-number">10</span>);

    Stack&lt;string&gt; s2;   <span class="hljs-comment">// ç”Ÿæˆ Stack&lt;string&gt;</span>
    s2.<span class="hljs-built_in">push</span>(<span class="hljs-string">"hello"</span>);
}
</code></pre>
<p><strong>å®ç°åŸç†ï¼š</strong></p>
<p>ç¼–è¯‘å™¨æ ¹æ®æ¨¡æ¿å‚æ•°ç”Ÿæˆä¸åŒçš„ç±»å®šä¹‰ã€‚æ¯ä¸ªç±»å‹å‚æ•°ç»„åˆå¯¹åº”ä¸€ä¸ªç‹¬ç«‹çš„ç±»ï¼Œåœ¨ç¼–è¯‘æœŸå®Œæˆæ‰€æœ‰ç±»å‹æ£€æŸ¥ã€‚</p>
<h3 data-id="heading-8">æ¨¡æ¿ç‰¹åŒ–</h3>
<p>æ¨¡æ¿ç‰¹åŒ–å…è®¸ä¸ºç‰¹å®šç±»å‹æä¾›å®šåˆ¶åŒ–å®ç°ï¼Œåœ¨é€šç”¨é€»è¾‘çš„åŸºç¡€ä¸Šå¤„ç†ç‰¹æ®Šæƒ…å†µã€‚</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> T&gt;
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Printer</span> {
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">print</span><span class="hljs-params">(T value)</span> </span>{ std::cout &lt;&lt; value &lt;&lt; <span class="hljs-string">"\n"</span>; }
};

<span class="hljs-comment">// ä¸º bool ç±»å‹æä¾›ç‰¹åŒ–å®ç°</span>
<span class="hljs-keyword">template</span> &lt;&gt;
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Printer</span>&lt;<span class="hljs-type">bool</span>&gt; {
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">print</span><span class="hljs-params">(<span class="hljs-type">bool</span> value)</span> </span>{
        std::cout &lt;&lt; (value ? <span class="hljs-string">"true"</span> : <span class="hljs-string">"false"</span>) &lt;&lt; <span class="hljs-string">"\n"</span>;
    }
};

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    Printer&lt;<span class="hljs-type">int</span>&gt; p1;
    p1.<span class="hljs-built_in">print</span>(<span class="hljs-number">42</span>);       <span class="hljs-comment">// è¾“å‡º: 42</span>

    Printer&lt;<span class="hljs-type">bool</span>&gt; p2;
    p2.<span class="hljs-built_in">print</span>(<span class="hljs-literal">true</span>);     <span class="hljs-comment">// è¾“å‡º: true</span>
}
</code></pre>
<p><strong>å®ç°åŸç†ï¼š</strong></p>
<p>ç¼–è¯‘å™¨ä¼˜å…ˆé€‰æ‹©ç‰¹åŒ–ç‰ˆæœ¬ã€‚é‡åˆ°ç‰¹åŒ–ç±»å‹æ—¶ä½¿ç”¨ç‰¹åŒ–å®ç°ï¼Œå…¶ä»–ç±»å‹ä½¿ç”¨é€šç”¨æ¨¡æ¿ã€‚è¿™åœ¨ç¼–è¯‘æœŸå®Œæˆï¼Œæ²¡æœ‰è¿è¡Œæ—¶åˆ¤æ–­ã€‚</p>
<h2 data-id="heading-9">ç¼–è¯‘æœŸå¤šæ€ï¼ˆTypeScriptï¼‰</h2>
<p>TypeScript é€šè¿‡æ³›å‹ï¼ˆGenericsï¼‰å®ç°ç¼–è¯‘æœŸå¤šæ€ã€‚ç±»å‹ç³»ç»Ÿåœ¨ç¼–è¯‘æœŸè¿›è¡Œç±»å‹æ£€æŸ¥å’Œæ¨æ–­ï¼Œç¼–è¯‘ä¸º JavaScript åç±»å‹ä¿¡æ¯è¢«æ“¦é™¤ã€‚æœ¬ç« ä»‹ç» TypeScript æ³›å‹çš„ä¸‰ç§å½¢å¼ï¼šæ³›å‹å‡½æ•°ã€æ³›å‹ç±»ã€ä»¥åŠæ¡ä»¶ç±»å‹ã€‚</p>
<h3 data-id="heading-10">æ³›å‹å‡½æ•°</h3>
<p>æ³›å‹å‡½æ•°å…è®¸ç¼–å†™é€‚ç”¨äºå¤šç§ç±»å‹çš„é€šç”¨å‡½æ•°ï¼ŒTypeScript åœ¨ç¼–è¯‘æœŸæ¨æ–­æˆ–æ£€æŸ¥ç±»å‹å‚æ•°ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">function</span> max&lt;T&gt;(<span class="hljs-attr">a</span>: T, <span class="hljs-attr">b</span>: T): T {
  <span class="hljs-keyword">return</span> a &gt; b ? a : b;
}

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">max</span>(<span class="hljs-number">3</span>, <span class="hljs-number">7</span>)); <span class="hljs-comment">// æ¨æ–­ä¸º max&lt;number&gt;</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">max</span>(<span class="hljs-number">3.5</span>, <span class="hljs-number">2.1</span>)); <span class="hljs-comment">// æ¨æ–­ä¸º max&lt;number&gt;</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">max</span>(<span class="hljs-string">"a"</span>, <span class="hljs-string">"b"</span>)); <span class="hljs-comment">// æ¨æ–­ä¸º max&lt;string&gt;</span>
</code></pre>
<p><strong>å®ç°åŸç†ï¼š</strong></p>
<p>TypeScript åœ¨ç¼–è¯‘æœŸæ ¹æ®è°ƒç”¨çš„å‚æ•°ç±»å‹æ¨æ–­ç±»å‹å‚æ•°ï¼Œè¿›è¡Œç±»å‹æ£€æŸ¥ã€‚ç¼–è¯‘ä¸º JavaScript åï¼Œç±»å‹ä¿¡æ¯è¢«æ“¦é™¤ï¼Œç”Ÿæˆçš„ä»£ç ä¸æ™®é€šå‡½æ•°ç›¸åŒï¼Œæ²¡æœ‰æ³›å‹ç—•è¿¹ã€‚</p>
<h3 data-id="heading-11">æ³›å‹ç±»</h3>
<p>æ³›å‹ç±»å…è®¸ç¼–å†™é€‚ç”¨äºå¤šç§ç±»å‹çš„é€šç”¨ç±»ï¼Œåœ¨å®ä¾‹åŒ–æ—¶æŒ‡å®šå…·ä½“ç±»å‹ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Stack</span>&lt;T&gt; {
  <span class="hljs-keyword">private</span> <span class="hljs-attr">data</span>: T[] = [];

  <span class="hljs-title function_">push</span>(<span class="hljs-attr">value</span>: T): <span class="hljs-built_in">void</span> {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span>.<span class="hljs-title function_">push</span>(value);
  }
  <span class="hljs-title function_">pop</span>(): T {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span>.<span class="hljs-title function_">pop</span>()!;
  }
}

<span class="hljs-keyword">const</span> s1 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Stack</span>&lt;<span class="hljs-built_in">number</span>&gt;(); <span class="hljs-comment">// Stack&lt;number&gt;</span>
s1.<span class="hljs-title function_">push</span>(<span class="hljs-number">10</span>);

<span class="hljs-keyword">const</span> s2 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Stack</span>&lt;<span class="hljs-built_in">string</span>&gt;(); <span class="hljs-comment">// Stack&lt;string&gt;</span>
s2.<span class="hljs-title function_">push</span>(<span class="hljs-string">"hello"</span>);
</code></pre>
<p><strong>å®ç°åŸç†ï¼š</strong></p>
<p>TypeScript åœ¨ç¼–è¯‘æœŸæ£€æŸ¥ç±»å‹å‚æ•°çš„ä½¿ç”¨æ˜¯å¦æ­£ç¡®ã€‚ç¼–è¯‘ä¸º JavaScript åï¼Œç”Ÿæˆçš„æ˜¯æ™®é€šç±»ï¼Œç±»å‹å‚æ•°ä¿¡æ¯è¢«æ“¦é™¤ã€‚è¿è¡Œæ—¶åªæœ‰ä¸€ä»½ç±»ä»£ç ï¼Œä¸åŒç±»å‹å…±äº«åŒä¸€å®ç°ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Spring 6 & Spring Boot 3æ–°ç‰¹æ€§ï¼šäº‹åŠ¡ç®¡ç†çš„é©æ–°]]></title>    <link>https://juejin.cn/post/7572413448942403611</link>    <guid>https://juejin.cn/post/7572413448942403611</guid>    <pubDate>2025-11-14T17:37:04.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572413448942403611" data-draft-id="7570932873131868187" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Spring 6 &amp; Spring Boot 3æ–°ç‰¹æ€§ï¼šäº‹åŠ¡ç®¡ç†çš„é©æ–°"/> <meta itemprop="keywords" content="Java"/> <meta itemprop="datePublished" content="2025-11-14T17:37:04.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§å¤´an"/> <meta itemprop="url" content="https://juejin.cn/user/618374030438861"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Spring 6 &amp; Spring Boot 3æ–°ç‰¹æ€§ï¼šäº‹åŠ¡ç®¡ç†çš„é©æ–°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/618374030438861/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§å¤´an
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-14T17:37:04.000Z" title="Fri Nov 14 2025 17:37:04 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    6
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€</h2>
<blockquote>
<p>Spring Framework 6å’ŒSpring Boot 3å¸¦æ¥äº†é©å‘½æ€§çš„å˜åŒ–ï¼ŒåŒ…æ‹¬å¯¹Java
17+çš„åŸºçº¿è¦æ±‚ã€åŸç”Ÿç¼–è¯‘æ”¯æŒã€ä»¥åŠäº‹åŠ¡ç®¡ç†çš„é‡å¤§æ”¹è¿›ã€‚è¿™äº›æ–°ç‰¹æ€§å¦‚ä½•å½±å“æˆ‘ä»¬çš„äº‹åŠ¡ç®¡ç†å®è·µï¼Ÿæœ¬æ–‡å°†æ·±å…¥æ¢è®¨Spring
6åœ¨äº‹åŠ¡ç®¡ç†æ–¹é¢çš„åˆ›æ–°å’Œæ”¹è¿›ã€‚</p>
</blockquote>
<h2 data-id="heading-1">ç¯å¢ƒè¦æ±‚ä¸å‡çº§å‡†å¤‡</h2>
<h3 data-id="heading-2">1. æ–°ç‰ˆæœ¬åŸºçº¿è¦æ±‚</h3>
<p><strong>å¿…é¡»å‡çº§çš„æŠ€æœ¯æ ˆ</strong>ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- pom.xml --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">java.version</span>&gt;</span>17<span class="hljs-tag">&lt;/<span class="hljs-name">java.version</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">spring-boot.version</span>&gt;</span>3.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">spring-boot.version</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">spring.version</span>&gt;</span>6.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">spring.version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- Spring Boot 3 Starter --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-data-jpa<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- Jakarta EE 9+ (å–ä»£Javax) --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>jakarta.persistence<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>jakarta.persistence-api<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- å“åº”å¼ç¼–ç¨‹æ”¯æŒ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-data-r2dbc<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span>
</code></pre>
<h3 data-id="heading-3">2. è¿ç§»æ³¨æ„äº‹é¡¹</h3>
<p><strong>åŒ…åå˜æ›´</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// Spring 5.x (æ—§)</span>
<span class="hljs-keyword">import</span> javax.persistence.*;
<span class="hljs-keyword">import</span> javax.transaction.Transactional;

<span class="hljs-comment">// Spring 6.x (æ–°)</span>
<span class="hljs-keyword">import</span> jakarta.persistence.*;
<span class="hljs-keyword">import</span> jakarta.transaction.Transactional;  <span class="hljs-comment">// æˆ–è€…ç»§ç»­ä½¿ç”¨Springçš„@Transactional</span>
<span class="hljs-keyword">import</span> org.springframework.transaction.annotation.Transactional; <span class="hljs-comment">// æ¨èä½¿ç”¨Springæ³¨è§£</span>

<span class="hljs-comment">// é…ç½®ç±»å˜æ›´</span>
<span class="hljs-meta">@Configuration</span>
<span class="hljs-meta">@EnableTransactionManagement</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TransactionConfig</span> {
    <span class="hljs-comment">// é…ç½®åŸºæœ¬ä¿æŒä¸å˜ï¼Œä½†åº•å±‚å®ç°æœ‰ä¼˜åŒ–</span>
}
</code></pre>
<h2 data-id="heading-4">è™šæ‹Ÿçº¿ç¨‹ï¼ˆVirtual Threadsï¼‰ä¸äº‹åŠ¡ç®¡ç†</h2>
<h3 data-id="heading-5">1. è™šæ‹Ÿçº¿ç¨‹ç®€ä»‹</h3>
<p>Spring 6å……åˆ†åˆ©ç”¨äº†Java 19+çš„è™šæ‹Ÿçº¿ç¨‹ç‰¹æ€§ï¼Œå¤§å¹…æå‡å¹¶å‘æ€§èƒ½ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">VirtualThreadConfig</span> {
    
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> TaskExecutor <span class="hljs-title function_">virtualThreadExecutor</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SimpleAsyncTaskExecutor</span>(<span class="hljs-string">"virtual-"</span>);
    }
    
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-meta">@Primary</span>
    <span class="hljs-keyword">public</span> PlatformTransactionManager <span class="hljs-title function_">transactionManager</span><span class="hljs-params">(DataSource dataSource)</span> {
        <span class="hljs-type">DataSourceTransactionManager</span> <span class="hljs-variable">tm</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DataSourceTransactionManager</span>(dataSource);
        
        <span class="hljs-comment">// è™šæ‹Ÿçº¿ç¨‹å‹å¥½çš„é…ç½®</span>
        tm.setTransactionSynchronization(DataSourceTransactionManager.SYNCHRO_NEVER);
        <span class="hljs-keyword">return</span> tm;
    }
}
</code></pre>
<h3 data-id="heading-6">2. è™šæ‹Ÿçº¿ç¨‹ä¸­çš„äº‹åŠ¡å¤„ç†</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Service</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">VirtualThreadTransactionService</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> UserRepository userRepository;
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> OrderRepository orderRepository;
    
    <span class="hljs-comment">// åœ¨è™šæ‹Ÿçº¿ç¨‹ä¸­æ‰§è¡Œäº‹åŠ¡æ“ä½œ</span>
    <span class="hljs-meta">@Transactional</span>
    <span class="hljs-meta">@Async("virtualThreadExecutor")</span>
    <span class="hljs-keyword">public</span> CompletableFuture&lt;User&gt; <span class="hljs-title function_">processUserInVirtualThread</span><span class="hljs-params">(Long userId)</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// è™šæ‹Ÿçº¿ç¨‹ä¸­çš„äº‹åŠ¡è¡Œä¸ºä¸å¹³å°çº¿ç¨‹åŸºæœ¬ä¸€è‡´</span>
            <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> userRepository.findById(userId)
                .orElseThrow(() -&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">UserNotFoundException</span>(userId));
            
            <span class="hljs-comment">// æ‰§è¡Œä¸€äº›ä¸šåŠ¡é€»è¾‘</span>
            processUserData(user);
            
            <span class="hljs-keyword">return</span> CompletableFuture.completedFuture(user);
            
        } <span class="hljs-keyword">catch</span> (Exception e) {
            log.error(<span class="hljs-string">"è™šæ‹Ÿçº¿ç¨‹äº‹åŠ¡å¤„ç†å¤±è´¥"</span>, e);
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">CompletionException</span>(e);
        }
    }
    
    <span class="hljs-comment">// æ‰¹é‡è™šæ‹Ÿçº¿ç¨‹äº‹åŠ¡å¤„ç†</span>
    <span class="hljs-keyword">public</span> List&lt;CompletableFuture&lt;User&gt;&gt; <span class="hljs-title function_">processUsersConcurrently</span><span class="hljs-params">(List&lt;Long&gt; userIds)</span> {
        <span class="hljs-keyword">return</span> userIds.stream()
            .map(<span class="hljs-built_in">this</span>::processUserInVirtualThread)
            .collect(Collectors.toList());
    }
    
    <span class="hljs-comment">// è™šæ‹Ÿçº¿ç¨‹ä¸­çš„äº‹åŠ¡ä¼ æ’­æµ‹è¯•</span>
    <span class="hljs-meta">@Transactional</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testVirtualThreadPropagation</span><span class="hljs-params">()</span> {
        log.info(<span class="hljs-string">"å½“å‰çº¿ç¨‹: {}, æ˜¯å¦æ˜¯è™šæ‹Ÿçº¿ç¨‹: {}"</span>, 
            Thread.currentThread().getName(),
            Thread.currentThread().isVirtual());
        
        <span class="hljs-comment">// åœ¨è™šæ‹Ÿçº¿ç¨‹ä¸­ï¼Œäº‹åŠ¡ä¼ æ’­è¡Œä¸ºä¿æŒä¸å˜</span>
        userRepository.save(<span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(<span class="hljs-string">"test-user"</span>));
        
        <span class="hljs-comment">// åµŒå¥—äº‹åŠ¡åœ¨è™šæ‹Ÿçº¿ç¨‹ä¸­æ­£å¸¸å·¥ä½œ</span>
        processInNestedTransaction();
    }
    
    <span class="hljs-meta">@Transactional(propagation = Propagation.REQUIRES_NEW)</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">processInNestedTransaction</span><span class="hljs-params">()</span> {
        orderRepository.save(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Order</span>(<span class="hljs-string">"test-order"</span>));
        <span class="hljs-comment">// è™šæ‹Ÿçº¿ç¨‹ä¸­çš„äº‹åŠ¡éš”ç¦»çº§åˆ«å’Œä¼ æ’­è¡Œä¸ºä¸å¹³å°çº¿ç¨‹ä¸€è‡´</span>
    }
}
</code></pre>
<h2 data-id="heading-7">å“åº”å¼äº‹åŠ¡ç®¡ç†</h2>
<h3 data-id="heading-8">1. R2DBCä¸å“åº”å¼äº‹åŠ¡</h3>
<p>Spring 6å¢å¼ºäº†å“åº”å¼äº‹åŠ¡æ”¯æŒï¼Œç‰¹åˆ«æ˜¯ä¸R2DBCçš„é›†æˆã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Configuration</span>
<span class="hljs-meta">@EnableTransactionManagement</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">R2dbcTransactionConfig</span> {
    
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> ConnectionFactory <span class="hljs-title function_">connectionFactory</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> ConnectionFactories.get(<span class="hljs-string">"r2dbc:mysql://localhost:3306/test"</span>);
    }
    
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> ReactiveTransactionManager <span class="hljs-title function_">transactionManager</span><span class="hljs-params">(ConnectionFactory connectionFactory)</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">R2dbcTransactionManager</span>(connectionFactory);
    }
    
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> DatabaseClient <span class="hljs-title function_">databaseClient</span><span class="hljs-params">(ConnectionFactory connectionFactory)</span> {
        <span class="hljs-keyword">return</span> DatabaseClient.builder()
            .connectionFactory(connectionFactory)
            .bindMarkers(MySqlBindMarkers.INSTANCE)
            .build();
    }
}

<span class="hljs-comment">// å“åº”å¼äº‹åŠ¡æœåŠ¡</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ReactiveUserService</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> DatabaseClient databaseClient;
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> ReactiveTransactionManager transactionManager;
    
    <span class="hljs-comment">// å£°æ˜å¼å“åº”å¼äº‹åŠ¡</span>
    <span class="hljs-meta">@Transactional</span>
    <span class="hljs-keyword">public</span> Mono&lt;User&gt; <span class="hljs-title function_">createUserReactive</span><span class="hljs-params">(User user)</span> {
        <span class="hljs-keyword">return</span> databaseClient.sql(<span class="hljs-string">"INSERT INTO users (name, email) VALUES (:name, :email)"</span>)
            .bind(<span class="hljs-string">"name"</span>, user.getName())
            .bind(<span class="hljs-string">"email"</span>, user.getEmail())
            .fetch()
            .rowsUpdated()
            .flatMap(rows -&gt; databaseClient.sql(<span class="hljs-string">"SELECT * FROM users WHERE email = :email"</span>)
                .bind(<span class="hljs-string">"email"</span>, user.getEmail())
                .map((row, metadata) -&gt; {
                    <span class="hljs-type">User</span> <span class="hljs-variable">createdUser</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>();
                    createdUser.setId(row.get(<span class="hljs-string">"id"</span>, Long.class));
                    createdUser.setName(row.get(<span class="hljs-string">"name"</span>, String.class));
                    createdUser.setEmail(row.get(<span class="hljs-string">"email"</span>, String.class));
                    <span class="hljs-keyword">return</span> createdUser;
                })
                .one()
            );
    }
    
    <span class="hljs-comment">// ç¼–ç¨‹å¼å“åº”å¼äº‹åŠ¡</span>
    <span class="hljs-keyword">public</span> Mono&lt;Void&gt; <span class="hljs-title function_">transferBalanceReactive</span><span class="hljs-params">(Long fromUserId, Long toUserId, BigDecimal amount)</span> {
        <span class="hljs-type">TransactionalOperator</span> <span class="hljs-variable">operator</span> <span class="hljs-operator">=</span> TransactionalOperator.create(transactionManager);
        
        <span class="hljs-keyword">return</span> databaseClient.sql(<span class="hljs-string">"SELECT balance FROM accounts WHERE user_id = :userId"</span>)
            .bind(<span class="hljs-string">"userId"</span>, fromUserId)
            .map((row, metadata) -&gt; row.get(<span class="hljs-string">"balance"</span>, BigDecimal.class))
            .one()
            .flatMap(fromBalance -&gt; {
                <span class="hljs-keyword">if</span> (fromBalance.compareTo(amount) &lt; <span class="hljs-number">0</span>) {
                    <span class="hljs-keyword">return</span> Mono.error(<span class="hljs-keyword">new</span> <span class="hljs-title class_">InsufficientBalanceException</span>(<span class="hljs-string">"ä½™é¢ä¸è¶³"</span>));
                }
                
                Mono&lt;Integer&gt; deduct = databaseClient.sql(<span class="hljs-string">"UPDATE accounts SET balance = balance - :amount WHERE user_id = :userId"</span>)
                    .bind(<span class="hljs-string">"amount"</span>, amount)
                    .bind(<span class="hljs-string">"userId"</span>, fromUserId)
                    .fetch()
                    .rowsUpdated();
                
                Mono&lt;Integer&gt; add = databaseClient.sql(<span class="hljs-string">"UPDATE accounts SET balance = balance + :amount WHERE user_id = :userId"</span>)
                    .bind(<span class="hljs-string">"amount"</span>, amount)
                    .bind(<span class="hljs-string">"userId"</span>, toUserId)
                    .fetch()
                    .rowsUpdated();
                
                <span class="hljs-keyword">return</span> Mono.when(deduct, add);
            })
            .as(operator::transactional); <span class="hljs-comment">// åº”ç”¨äº‹åŠ¡æ“ä½œ</span>
    }
    
    <span class="hljs-comment">// å¤æ‚å“åº”å¼äº‹åŠ¡æµç¨‹</span>
    <span class="hljs-meta">@Transactional</span>
    <span class="hljs-keyword">public</span> Mono&lt;Order&gt; <span class="hljs-title function_">createOrderReactive</span><span class="hljs-params">(Order order)</span> {
        <span class="hljs-keyword">return</span> databaseClient.sql(<span class="hljs-string">"INSERT INTO orders (user_id, amount, status) VALUES (:userId, :amount, :status)"</span>)
            .bind(<span class="hljs-string">"userId"</span>, order.getUserId())
            .bind(<span class="hljs-string">"amount"</span>, order.getAmount())
            .bind(<span class="hljs-string">"status"</span>, <span class="hljs-string">"PENDING"</span>)
            .fetch()
            .rowsUpdated()
            .then(databaseClient.sql(<span class="hljs-string">"UPDATE inventory SET stock = stock - :quantity WHERE product_id = :productId"</span>)
                .bind(<span class="hljs-string">"quantity"</span>, order.getQuantity())
                .bind(<span class="hljs-string">"productId"</span>, order.getProductId())
                .fetch()
                .rowsUpdated()
            )
            .then(databaseClient.sql(<span class="hljs-string">"SELECT * FROM orders WHERE user_id = :userId ORDER BY id DESC LIMIT 1"</span>)
                .bind(<span class="hljs-string">"userId"</span>, order.getUserId())
                .map(<span class="hljs-built_in">this</span>::mapToOrder)
                .one()
            )
            .onErrorResume(e -&gt; {
                log.error(<span class="hljs-string">"åˆ›å»ºè®¢å•å¤±è´¥"</span>, e);
                <span class="hljs-keyword">return</span> Mono.error(<span class="hljs-keyword">new</span> <span class="hljs-title class_">OrderCreationException</span>(<span class="hljs-string">"è®¢å•åˆ›å»ºå¤±è´¥"</span>, e));
            });
    }
    
    <span class="hljs-keyword">private</span> Order <span class="hljs-title function_">mapToOrder</span><span class="hljs-params">(Row row, RowMetadata metadata)</span> {
        <span class="hljs-type">Order</span> <span class="hljs-variable">order</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Order</span>();
        order.setId(row.get(<span class="hljs-string">"id"</span>, Long.class));
        order.setUserId(row.get(<span class="hljs-string">"user_id"</span>, Long.class));
        order.setAmount(row.get(<span class="hljs-string">"amount"</span>, BigDecimal.class));
        order.setStatus(row.get(<span class="hljs-string">"status"</span>, String.class));
        <span class="hljs-keyword">return</span> order;
    }
}
</code></pre>
<h3 data-id="heading-9">2. å“åº”å¼äº‹åŠ¡çš„ä¼ æ’­å’Œéš”ç¦»</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Service</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ReactiveTransactionPropagationService</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> DatabaseClient databaseClient;
    
    <span class="hljs-comment">// å“åº”å¼äº‹åŠ¡ä¼ æ’­æµ‹è¯•</span>
    <span class="hljs-meta">@Transactional</span>
    <span class="hljs-keyword">public</span> Mono&lt;String&gt; <span class="hljs-title function_">testReactivePropagation</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> databaseClient.sql(<span class="hljs-string">"INSERT INTO test_table (name) VALUES ('test1')"</span>)
            .fetch()
            .rowsUpdated()
            .then(Mono.defer(() -&gt; {
                <span class="hljs-comment">// åµŒå¥—çš„å“åº”å¼äº‹åŠ¡</span>
                <span class="hljs-keyword">return</span> nestedReactiveTransaction();
            }))
            .then(Mono.just(<span class="hljs-string">"äº‹åŠ¡å®Œæˆ"</span>));
    }
    
    <span class="hljs-meta">@Transactional(propagation = Propagation.REQUIRES_NEW)</span>
    <span class="hljs-keyword">public</span> Mono&lt;Void&gt; <span class="hljs-title function_">nestedReactiveTransaction</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> databaseClient.sql(<span class="hljs-string">"INSERT INTO test_table (name) VALUES ('test2')"</span>)
            .fetch()
            .rowsUpdated()
            .then();
    }
    
    <span class="hljs-comment">// å“åº”å¼äº‹åŠ¡è¶…æ—¶é…ç½®</span>
    <span class="hljs-meta">@Transactional(timeout = 5)</span> <span class="hljs-comment">// 5ç§’è¶…æ—¶</span>
    <span class="hljs-keyword">public</span> Mono&lt;Void&gt; <span class="hljs-title function_">reactiveTransactionWithTimeout</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> databaseClient.sql(<span class="hljs-string">"INSERT INTO slow_table (data) VALUES ('slow_data')"</span>)
            .fetch()
            .rowsUpdated()
            .delayElement(Duration.ofSeconds(<span class="hljs-number">10</span>)) <span class="hljs-comment">// æ¨¡æ‹Ÿè¶…æ—¶æ“ä½œ</span>
            .then();
    }
}
</code></pre>
<h2 data-id="heading-10">è®°å½•å¼æ¨¡å¼ï¼ˆRecord Patternï¼‰ä¸ä¸å¯å˜äº‹åŠ¡æ•°æ®</h2>
<h3 data-id="heading-11">1. Java Recordä¸äº‹åŠ¡é›†æˆ</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä½¿ç”¨Java Recordå®šä¹‰ä¸å¯å˜æ•°æ®ä¼ è¾“å¯¹è±¡</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">record</span> <span class="hljs-title class_">TransactionalEvent</span><span class="hljs-params">(
    String eventId,
    String eventType,
    LocalDateTime timestamp,
    Map&lt;String, Object&gt; payload
)</span> {
    <span class="hljs-keyword">public</span> TransactionalEvent {
        <span class="hljs-comment">// ç´§å‡‘æ„é€ å™¨ï¼Œè¿›è¡Œæ•°æ®éªŒè¯</span>
        Objects.requireNonNull(eventId, <span class="hljs-string">"eventIdä¸èƒ½ä¸ºnull"</span>);
        Objects.requireNonNull(eventType, <span class="hljs-string">"eventTypeä¸èƒ½ä¸ºnull"</span>);
        timestamp = timestamp != <span class="hljs-literal">null</span> ? timestamp : LocalDateTime.now();
        payload = payload != <span class="hljs-literal">null</span> ? Map.copyOf(payload) : Map.of();
    }
    
    <span class="hljs-comment">// é™æ€å·¥å‚æ–¹æ³•</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> TransactionalEvent <span class="hljs-title function_">of</span><span class="hljs-params">(String eventType, Map&lt;String, Object&gt; payload)</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TransactionalEvent</span>(
            UUID.randomUUID().toString(),
            eventType,
            LocalDateTime.now(),
            payload
        );
    }
}

<span class="hljs-comment">// Recordåœ¨äº‹åŠ¡æœåŠ¡ä¸­çš„ä½¿ç”¨</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RecordBasedTransactionService</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> UserRepository userRepository;
    
    <span class="hljs-meta">@Transactional</span>
    <span class="hljs-keyword">public</span> TransactionalResult <span class="hljs-title function_">processUserTransaction</span><span class="hljs-params">(TransactionalCommand command)</span> {
        <span class="hljs-comment">// ä½¿ç”¨Recordæ¨¡å¼è¿›è¡Œæ¨¡å¼åŒ¹é…</span>
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">switch</span> (command) {
            <span class="hljs-keyword">case</span> CreateUserCommand createCmd -&gt; createUser(createCmd);
            <span class="hljs-keyword">case</span> UpdateUserCommand updateCmd -&gt; updateUser(updateCmd);
            <span class="hljs-keyword">case</span> DeleteUserCommand deleteCmd -&gt; deleteUser(deleteCmd);
            <span class="hljs-keyword">default</span> -&gt; <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(<span class="hljs-string">"æœªçŸ¥å‘½ä»¤ç±»å‹: "</span> + command.getClass());
        };
    }
    
    <span class="hljs-keyword">private</span> TransactionalResult <span class="hljs-title function_">createUser</span><span class="hljs-params">(CreateUserCommand command)</span> {
        <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(command.name(), command.email());
        <span class="hljs-type">User</span> <span class="hljs-variable">savedUser</span> <span class="hljs-operator">=</span> userRepository.save(user);
        
        <span class="hljs-comment">// è¿”å›ä¸å¯å˜çš„ç»“æœRecord</span>
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TransactionalResult</span>(
            <span class="hljs-literal">true</span>,
            <span class="hljs-string">"ç”¨æˆ·åˆ›å»ºæˆåŠŸ"</span>,
            Map.of(<span class="hljs-string">"userId"</span>, savedUser.getId(),
                   <span class="hljs-string">"userName"</span>, savedUser.getName())
        );
    }
    
    <span class="hljs-keyword">private</span> TransactionalResult <span class="hljs-title function_">updateUser</span><span class="hljs-params">(UpdateUserCommand command)</span> {
        <span class="hljs-keyword">return</span> userRepository.findById(command.userId())
            .map(user -&gt; {
                user.updateEmail(command.newEmail());
                <span class="hljs-type">User</span> <span class="hljs-variable">updatedUser</span> <span class="hljs-operator">=</span> userRepository.save(user);
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TransactionalResult</span>(
                    <span class="hljs-literal">true</span>,
                    <span class="hljs-string">"ç”¨æˆ·æ›´æ–°æˆåŠŸ"</span>,
                    Map.of(<span class="hljs-string">"userId"</span>, updatedUser.getId())
                );
            })
            .orElse(<span class="hljs-keyword">new</span> <span class="hljs-title class_">TransactionalResult</span>(
                <span class="hljs-literal">false</span>,
                <span class="hljs-string">"ç”¨æˆ·ä¸å­˜åœ¨"</span>,
                Map.of()
            ));
    }
    
    <span class="hljs-keyword">private</span> TransactionalResult <span class="hljs-title function_">deleteUser</span><span class="hljs-params">(DeleteUserCommand command)</span> {
        userRepository.deleteById(command.userId());
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TransactionalResult</span>(
            <span class="hljs-literal">true</span>,
            <span class="hljs-string">"ç”¨æˆ·åˆ é™¤æˆåŠŸ"</span>,
            Map.of(<span class="hljs-string">"userId"</span>, command.userId())
        );
    }
}

<span class="hljs-comment">// å‘½ä»¤Recordå®šä¹‰</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">sealed</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">TransactionalCommand</span> 
    <span class="hljs-keyword">permits</span> CreateUserCommand, UpdateUserCommand, DeleteUserCommand {
    
    <span class="hljs-keyword">record</span> <span class="hljs-title class_">CreateUserCommand</span><span class="hljs-params">(String name, String email)</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">TransactionalCommand</span> {}
    <span class="hljs-keyword">record</span> <span class="hljs-title class_">UpdateUserCommand</span><span class="hljs-params">(Long userId, String newEmail)</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">TransactionalCommand</span> {}
    <span class="hljs-keyword">record</span> <span class="hljs-title class_">DeleteUserCommand</span><span class="hljs-params">(Long userId)</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">TransactionalCommand</span> {}
}

<span class="hljs-comment">// ç»“æœRecordå®šä¹‰</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">record</span> <span class="hljs-title class_">TransactionalResult</span><span class="hljs-params">(
    <span class="hljs-type">boolean</span> success,
    String message,
    Map&lt;String, Object&gt; data
)</span> {}
</code></pre>
<h2 data-id="heading-12">å¢å¼ºçš„äº‹åŠ¡ç®¡ç†ç‰¹æ€§</h2>
<h3 data-id="heading-13">1. æ”¹è¿›çš„@Transactionalæ³¨è§£</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Service</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EnhancedTransactionalService</span> {
    
    <span class="hljs-comment">// 1. æ”¯æŒæ›´å¤šé…ç½®é€‰é¡¹</span>
    <span class="hljs-meta">@Transactional(
        label = {"critical", "batch-processing"}, // æ–°å¢ï¼šäº‹åŠ¡æ ‡ç­¾
        executionPhase = Transactional.ExecutionPhase.BEFORE_COMMIT // æ‰§è¡Œé˜¶æ®µæ§åˆ¶
    )</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">processCriticalBatch</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// å…³é”®æ‰¹é‡å¤„ç†é€»è¾‘</span>
    }
    
    <span class="hljs-comment">// 2. æ¡ä»¶åŒ–äº‹åŠ¡</span>
    <span class="hljs-meta">@Transactional(condition = "#result != null")</span> <span class="hljs-comment">// åŸºäºç»“æœçš„æ¡ä»¶äº‹åŠ¡</span>
    <span class="hljs-keyword">public</span> User <span class="hljs-title function_">findUserConditionally</span><span class="hljs-params">(Long userId)</span> {
        <span class="hljs-keyword">return</span> userRepository.findById(userId).orElse(<span class="hljs-literal">null</span>);
    }
    
    <span class="hljs-comment">// 3. å¢å¼ºçš„å¼‚å¸¸å¤„ç†</span>
    <span class="hljs-meta">@Transactional(
        rollbackFor = {BusinessException.class, DataAccessException.class},
        noRollbackFor = {ValidationException.class},
        dontRollbackOn = {IllegalArgumentException.class} // æ–°å¢ï¼šä¸æ»šåŠ¨çš„å¼‚å¸¸
    )</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">processWithEnhancedExceptionHandling</span><span class="hljs-params">(User user)</span> {
        validateUser(user); <span class="hljs-comment">// ValidationException - ä¸å›æ»š</span>
        processBusiness(user); <span class="hljs-comment">// BusinessException - å›æ»š</span>
        saveUser(user); <span class="hljs-comment">// DataAccessException - å›æ»š</span>
    }
    
    <span class="hljs-comment">// 4. äº‹åŠ¡äº‹ä»¶ç›‘å¬å¢å¼º</span>
    <span class="hljs-meta">@Transactional(eventListener = true)</span> <span class="hljs-comment">// åœ¨äº‹åŠ¡ä¸Šä¸‹æ–‡ä¸­è§¦å‘äº‹ä»¶</span>
    <span class="hljs-meta">@TransactionalEventListener(phase = TransactionPhase.BEFORE_COMMIT)</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleBeforeCommit</span><span class="hljs-params">(UserCreatedEvent event)</span> {
        log.info(<span class="hljs-string">"äº‹åŠ¡æäº¤å‰å¤„ç†: {}"</span>, event.getUserId());
        <span class="hljs-comment">// åœ¨äº‹åŠ¡æäº¤å‰æ‰§è¡Œï¼Œä»å¯å›æ»š</span>
        auditService.logCreationAttempt(event.getUserId());
    }
}

<span class="hljs-comment">// å¢å¼ºçš„äº‹åŠ¡äº‹ä»¶</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EnhancedTransactionEvent</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">ApplicationEvent</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> String transactionId;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> TransactionStatus status;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Duration executionTime;
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">EnhancedTransactionEvent</span><span class="hljs-params">(Object source, String transactionId, 
                                  TransactionStatus status, Duration executionTime)</span> {
        <span class="hljs-built_in">super</span>(source);
        <span class="hljs-built_in">this</span>.transactionId = transactionId;
        <span class="hljs-built_in">this</span>.status = status;
        <span class="hljs-built_in">this</span>.executionTime = executionTime;
    }
    
    <span class="hljs-comment">// è·å–äº‹åŠ¡æ€§èƒ½æŒ‡æ ‡</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isSlowTransaction</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> executionTime.toMillis() &gt; <span class="hljs-number">1000</span>;
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isRolledBack</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> status.isRollbackOnly();
    }
}
</code></pre>
<h3 data-id="heading-14">2. äº‹åŠ¡æ¨¡æ¿å¢å¼º</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EnhancedTransactionTemplateConfig</span> {
    
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> TransactionTemplate <span class="hljs-title function_">enhancedTransactionTemplate</span><span class="hljs-params">(PlatformTransactionManager txManager)</span> {
        <span class="hljs-type">TransactionTemplate</span> <span class="hljs-variable">template</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TransactionTemplate</span>(txManager);
        
        <span class="hljs-comment">// æ–°å¢é…ç½®é€‰é¡¹</span>
        template.setLabel(<span class="hljs-string">"enhanced-template"</span>); <span class="hljs-comment">// äº‹åŠ¡æ ‡ç­¾</span>
        template.setEnableTimeoutInterruption(<span class="hljs-literal">true</span>); <span class="hljs-comment">// è¶…æ—¶æ—¶ä¸­æ–­çº¿ç¨‹</span>
        template.setValidateExistingTransaction(<span class="hljs-literal">true</span>);
        
        <span class="hljs-comment">// æ€§èƒ½ä¼˜åŒ–é…ç½®</span>
        template.setOptimizeForWriteOperations(<span class="hljs-literal">true</span>);
        
        <span class="hljs-keyword">return</span> template;
    }
    
    <span class="hljs-meta">@Bean</span> 
    <span class="hljs-keyword">public</span> ReactiveTransactionOperator <span class="hljs-title function_">reactiveTransactionOperator</span><span class="hljs-params">(ReactiveTransactionManager txManager)</span> {
        <span class="hljs-keyword">return</span> TransactionOperator.create(txManager, 
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">TransactionDefinition</span>() {
                <span class="hljs-meta">@Override</span>
                <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> {
                    <span class="hljs-keyword">return</span> <span class="hljs-string">"reactive-tx"</span>;
                }
                
                <span class="hljs-meta">@Override</span>
                <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isReadOnly</span><span class="hljs-params">()</span> {
                    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
                }
                
                <span class="hljs-meta">@Override</span>
                <span class="hljs-keyword">public</span> Integer <span class="hljs-title function_">getTimeout</span><span class="hljs-params">()</span> {
                    <span class="hljs-keyword">return</span> <span class="hljs-number">30</span>;
                }
                
                <span class="hljs-meta">@Override</span>
                <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getLabel</span><span class="hljs-params">()</span> {
                    <span class="hljs-keyword">return</span> <span class="hljs-string">"reactive-transaction"</span>;
                }
            });
    }
}

<span class="hljs-comment">// ä½¿ç”¨å¢å¼ºçš„äº‹åŠ¡æ¨¡æ¿</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EnhancedTemplateService</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> TransactionTemplate enhancedTransactionTemplate;
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> ReactiveTransactionOperator reactiveTransactionOperator;
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">processWithEnhancedTemplate</span><span class="hljs-params">()</span> {
        TransactionResult&lt;String&gt; result = enhancedTransactionTemplate.execute(status -&gt; {
            <span class="hljs-comment">// è®¿é—®å¢å¼ºçš„äº‹åŠ¡çŠ¶æ€</span>
            <span class="hljs-keyword">if</span> (status.hasLabel(<span class="hljs-string">"critical"</span>)) {
                log.info(<span class="hljs-string">"æ‰§è¡Œå…³é”®äº‹åŠ¡æ“ä½œ"</span>);
            }
            
            <span class="hljs-comment">// ä¸šåŠ¡é€»è¾‘</span>
            performBusinessOperation();
            
            <span class="hljs-keyword">return</span> <span class="hljs-string">"æ“ä½œæˆåŠŸ"</span>;
        });
        
        log.info(<span class="hljs-string">"äº‹åŠ¡æ‰§è¡Œç»“æœ: {}"</span>, result);
    }
    
    <span class="hljs-keyword">public</span> Mono&lt;String&gt; <span class="hljs-title function_">processReactiveWithOperator</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> databaseClient.sql(<span class="hljs-string">"SELECT * FROM users WHERE id = :id"</span>)
            .bind(<span class="hljs-string">"id"</span>, <span class="hljs-number">1L</span>)
            .fetch()
            .one()
            .as(reactiveTransactionOperator::transactional)
            .map(result -&gt; <span class="hljs-string">"å“åº”å¼äº‹åŠ¡å®Œæˆ: "</span> + result);
    }
}
</code></pre>
<h2 data-id="heading-15">åŸç”Ÿç¼–è¯‘ä¸GraalVMæ”¯æŒ</h2>
<h3 data-id="heading-16">1. Spring Nativeäº‹åŠ¡é…ç½®</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@NativeHint(
    types = {
        @TypeHint(types = {
            PlatformTransactionManager.class,
            DataSourceTransactionManager.class,
            JpaTransactionManager.class,
            TransactionTemplate.class,
            Transactional.class
        }),
        @TypeHint(types = {
            TransactionDefinition.class,
            TransactionStatus.class
        }, access = AccessBits.ALL)
    },
    triggers = {
        @TypeHint(trigger = TransactionalAnnotationProcessor.class)
    }
)</span>
<span class="hljs-meta">@Configuration</span>
<span class="hljs-meta">@EnableTransactionManagement</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">NativeTransactionConfiguration</span> {
    
    <span class="hljs-comment">// åŸç”Ÿç¼–è¯‘å‹å¥½çš„äº‹åŠ¡ç®¡ç†å™¨é…ç½®</span>
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-meta">@RuntimeHint</span>
    <span class="hljs-keyword">public</span> PlatformTransactionManager <span class="hljs-title function_">transactionManager</span><span class="hljs-params">(DataSource dataSource)</span> {
        <span class="hljs-type">DataSourceTransactionManager</span> <span class="hljs-variable">tm</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DataSourceTransactionManager</span>(dataSource);
        
        <span class="hljs-comment">// åŸç”Ÿç¼–è¯‘ä¼˜åŒ–çš„é…ç½®</span>
        tm.setNestedTransactionAllowed(<span class="hljs-literal">true</span>);
        tm.setValidateExistingTransaction(<span class="hljs-literal">false</span>); <span class="hljs-comment">// åŸç”Ÿç¼–è¯‘ä¸­ç®€åŒ–éªŒè¯</span>
        
        <span class="hljs-keyword">return</span> tm;
    }
    
    <span class="hljs-comment">// AOTï¼ˆAhead-of-Timeï¼‰ä¼˜åŒ–çš„äº‹åŠ¡å»ºè®®</span>
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-meta">@Role(BeanDefinition.ROLE_INFRASTRUCTURE)</span>
    <span class="hljs-keyword">public</span> BeanFactoryTransactionAttributeSourceAdvisor <span class="hljs-title function_">transactionAdvisor</span><span class="hljs-params">(
        TransactionAttributeSource transactionAttributeSource,
        TransactionInterceptor transactionInterceptor)</span> {
        
        <span class="hljs-type">BeanFactoryTransactionAttributeSourceAdvisor</span> <span class="hljs-variable">advisor</span> <span class="hljs-operator">=</span> 
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">BeanFactoryTransactionAttributeSourceAdvisor</span>();
        advisor.setTransactionAttributeSource(transactionAttributeSource);
        advisor.setAdvice(transactionInterceptor);
        advisor.setOrder(Ordered.LOWEST_PRECEDENCE - <span class="hljs-number">1</span>); <span class="hljs-comment">// ä¼˜åŒ–æ‰§è¡Œé¡ºåº</span>
        
        <span class="hljs-keyword">return</span> advisor;
    }
}

<span class="hljs-comment">// åŸç”Ÿç¼–è¯‘å‹å¥½çš„äº‹åŠ¡æœåŠ¡</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">NativeFriendlyTransactionService</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> UserRepository userRepository;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> OrderRepository orderRepository;
    
    <span class="hljs-comment">// ä½¿ç”¨æ„é€ å™¨æ³¨å…¥ï¼ˆåŸç”Ÿç¼–è¯‘å‹å¥½ï¼‰</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">NativeFriendlyTransactionService</span><span class="hljs-params">(UserRepository userRepository, 
                                          OrderRepository orderRepository)</span> {
        <span class="hljs-built_in">this</span>.userRepository = userRepository;
        <span class="hljs-built_in">this</span>.orderRepository = orderRepository;
    }
    
    <span class="hljs-comment">// ç®€å•æ˜ç¡®çš„äº‹åŠ¡æ–¹æ³•ï¼ˆé¿å…åå°„å’ŒåŠ¨æ€ä»£ç†çš„å¤æ‚æ€§ï¼‰</span>
    <span class="hljs-meta">@Transactional</span>
    <span class="hljs-keyword">public</span> User <span class="hljs-title function_">createUser</span><span class="hljs-params">(String name, String email)</span> {
        <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(name, email);
        <span class="hljs-keyword">return</span> userRepository.save(user);
    }
    
    <span class="hljs-comment">// é¿å…åœ¨äº‹åŠ¡æ–¹æ³•ä¸­ä½¿ç”¨å¤æ‚Lambdaï¼ˆåŸç”Ÿç¼–è¯‘é™åˆ¶ï¼‰</span>
    <span class="hljs-meta">@Transactional</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">processOrder</span><span class="hljs-params">(Long userId, String product)</span> {
        <span class="hljs-comment">// ç›´æ¥çš„æ–¹æ³•è°ƒç”¨ï¼Œé¿å…æ–¹æ³•å¼•ç”¨å’Œå¤æ‚Lambda</span>
        <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> userRepository.findById(userId);
        <span class="hljs-keyword">if</span> (user != <span class="hljs-literal">null</span>) {
            <span class="hljs-type">Order</span> <span class="hljs-variable">order</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Order</span>(user, product);
            orderRepository.save(order);
        }
    }
}
</code></pre>
<h3 data-id="heading-17">2. GraalVMåŸç”Ÿé•œåƒä¼˜åŒ–</h3>
<pre><code class="hljs language-properties" lang="properties"># src/main/resources/META-INF/native-image/proxy-config.json
{
  "resources": {
    "includes": [
      {
        "pattern": ".*transaction.*"
      }
    ]
  },
  "proxies": [
    {
      "interfaces": [
        "org.springframework.transaction.PlatformTransactionManager"
      ]
    },
    {
      "interfaces": [
        "org.springframework.transaction.ReactiveTransactionManager"  
      ]
    }
  ]
}

# src/main/resources/META-INF/native-image/resource-config.json
{
  "resources": {
    "includes": [
      {
        "pattern": ".*Transactional.*"
      }
    ]
  }
}
</code></pre>
<h2 data-id="heading-18">è¿ç§»æŒ‡å—å’Œå…¼å®¹æ€§</h2>
<h3 data-id="heading-19">1. ä»Spring Boot 2.xè¿ç§»</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// è¿ç§»å‰çš„å…¼å®¹æ€§é…ç½®</span>
<span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MigrationCompatibilityConfig</span> {
    
    <span class="hljs-comment">// ä¿æŒå¯¹æ—§ç‰ˆäº‹åŠ¡ç®¡ç†çš„å…¼å®¹</span>
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-meta">@ConditionalOnMissingBean</span>
    <span class="hljs-keyword">public</span> PlatformTransactionManager <span class="hljs-title function_">transactionManager</span><span class="hljs-params">(DataSource dataSource)</span> {
        <span class="hljs-type">DataSourceTransactionManager</span> <span class="hljs-variable">tm</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DataSourceTransactionManager</span>(dataSource);
        
        <span class="hljs-comment">// Spring Boot 2.xå…¼å®¹é…ç½®</span>
        tm.setNestedTransactionAllowed(<span class="hljs-literal">true</span>);
        tm.setValidateExistingTransaction(<span class="hljs-literal">true</span>);
        tm.setGlobalRollbackOnParticipationFailure(<span class="hljs-literal">false</span>);
        
        <span class="hljs-keyword">return</span> tm;
    }
    
    <span class="hljs-comment">// æ”¯æŒæ–°æ—§æ³¨è§£å¹¶å­˜</span>
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> TransactionAttributeSource <span class="hljs-title function_">transactionAttributeSource</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AnnotationTransactionAttributeSource</span>() {
            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">protected</span> TransactionAttribute <span class="hljs-title function_">parseTransactionAnnotation</span><span class="hljs-params">(AnnotationAttributes attributes)</span> {
                <span class="hljs-comment">// æ”¯æŒjavax.transaction.Transactionalå’Œjakarta.transaction.Transactional</span>
                <span class="hljs-type">RuleBasedTransactionAttribute</span> <span class="hljs-variable">attr</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">super</span>.parseTransactionAnnotation(attributes);
                
                <span class="hljs-comment">// è¿ç§»æœŸé—´çš„é¢å¤–å…¼å®¹æ€§å¤„ç†</span>
                <span class="hljs-keyword">if</span> (attributes.containsKey(<span class="hljs-string">"timeout"</span>) &amp;&amp; attributes.getNumber(<span class="hljs-string">"timeout"</span>) &gt; <span class="hljs-number">0</span>) {
                    attr.setTimeout(attributes.getNumber(<span class="hljs-string">"timeout"</span>).intValue());
                }
                
                <span class="hljs-keyword">return</span> attr;
            }
        };
    }
}

<span class="hljs-comment">// æ¸è¿›å¼è¿ç§»æœåŠ¡</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MigrationService</span> {
    
    <span class="hljs-comment">// æ–¹æ³•1: ç»§ç»­ä½¿ç”¨Springçš„@Transactionalï¼ˆæ¨èï¼‰</span>
    <span class="hljs-meta">@org</span>.springframework.transaction.annotation.Transactional
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">methodWithSpringTransactional</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// ä¸šåŠ¡é€»è¾‘</span>
    }
    
    <span class="hljs-comment">// æ–¹æ³•2: ä½¿ç”¨Jakarta @Transactionalï¼ˆå¦‚éœ€è¦ï¼‰</span>
    <span class="hljs-meta">@jakarta</span>.transaction.Transactional
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">methodWithJakartaTransactional</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// ä¸šåŠ¡é€»è¾‘</span>
    }
    
    <span class="hljs-comment">// æ–¹æ³•3: ç¼–ç¨‹å¼äº‹åŠ¡ï¼ˆè¿ç§»æœŸé—´æ›´å®‰å…¨ï¼‰</span>
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> TransactionTemplate transactionTemplate;
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">methodWithProgrammaticTx</span><span class="hljs-params">()</span> {
        transactionTemplate.execute(status -&gt; {
            <span class="hljs-comment">// ä¸šåŠ¡é€»è¾‘</span>
            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
        });
    }
}
</code></pre>
<h2 data-id="heading-20">æ€§èƒ½åŸºå‡†æµ‹è¯•</h2>
<h3 data-id="heading-21">1. æ–°æ—§ç‰ˆæœ¬æ€§èƒ½å¯¹æ¯”</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@SpringBootTest</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Spring6TransactionBenchmark</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> TransactionalService transactionalService;
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> PlatformTransactionManager transactionManager;
    
    <span class="hljs-meta">@Test</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">benchmarkVirtualThreadPerformance</span><span class="hljs-params">()</span> {
        <span class="hljs-type">int</span> <span class="hljs-variable">operationCount</span> <span class="hljs-operator">=</span> <span class="hljs-number">1000</span>;
        <span class="hljs-type">int</span> <span class="hljs-variable">virtualThreadCount</span> <span class="hljs-operator">=</span> <span class="hljs-number">100</span>;
        
        <span class="hljs-type">long</span> <span class="hljs-variable">startTime</span> <span class="hljs-operator">=</span> System.currentTimeMillis();
        
        <span class="hljs-comment">// ä½¿ç”¨è™šæ‹Ÿçº¿ç¨‹æ‰§è¡Œå¹¶å‘äº‹åŠ¡</span>
        List&lt;CompletableFuture&lt;Void&gt;&gt; futures = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
        
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; virtualThreadCount; i++) {
            CompletableFuture&lt;Void&gt; future = CompletableFuture.runAsync(() -&gt; {
                <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; j &lt; operationCount / virtualThreadCount; j++) {
                    transactionalService.lightweightOperation();
                }
            }, virtualThreadExecutor);
            
            futures.add(future);
        }
        
        CompletableFuture.allOf(futures.toArray(<span class="hljs-keyword">new</span> <span class="hljs-title class_">CompletableFuture</span>[<span class="hljs-number">0</span>])).join();
        <span class="hljs-type">long</span> <span class="hljs-variable">virtualThreadTime</span> <span class="hljs-operator">=</span> System.currentTimeMillis() - startTime;
        
        log.info(<span class="hljs-string">"è™šæ‹Ÿçº¿ç¨‹äº‹åŠ¡æ€§èƒ½: {} æ“ä½œ/ç§’"</span>, 
            operationCount * <span class="hljs-number">1000.0</span> / virtualThreadTime);
    }
    
    <span class="hljs-meta">@Test</span> 
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">benchmarkReactiveTransactionPerformance</span><span class="hljs-params">()</span> {
        <span class="hljs-type">int</span> <span class="hljs-variable">operationCount</span> <span class="hljs-operator">=</span> <span class="hljs-number">1000</span>;
        
        <span class="hljs-type">long</span> <span class="hljs-variable">startTime</span> <span class="hljs-operator">=</span> System.currentTimeMillis();
        
        Flux.range(<span class="hljs-number">1</span>, operationCount)
            .flatMap(i -&gt; reactiveTransactionService.reactiveOperation())
            .blockLast();
            
        <span class="hljs-type">long</span> <span class="hljs-variable">reactiveTime</span> <span class="hljs-operator">=</span> System.currentTimeMillis() - startTime;
        
        log.info(<span class="hljs-string">"å“åº”å¼äº‹åŠ¡æ€§èƒ½: {} æ“ä½œ/ç§’"</span>, 
            operationCount * <span class="hljs-number">1000.0</span> / reactiveTime);
    }
    
    <span class="hljs-meta">@Test</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">compareNativeVsJvmPerformance</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// æ¯”è¾ƒåŸç”Ÿç¼–è¯‘ä¸JVMæ‰§è¡Œçš„æ€§èƒ½å·®å¼‚</span>
        <span class="hljs-comment">// éœ€è¦åœ¨å®é™…çš„åŸç”Ÿé•œåƒç¯å¢ƒä¸­è¿è¡Œ</span>
        log.info(<span class="hljs-string">"åŸç”Ÿç¼–è¯‘äº‹åŠ¡æ€§èƒ½æµ‹è¯•éœ€è¦åœ¨GraalVMåŸç”Ÿé•œåƒä¸­æ‰§è¡Œ"</span>);
    }
}
</code></pre>
<h2 data-id="heading-22">æ€»ç»“</h2>
<p>Spring Framework 6å’ŒSpring Boot 3ä¸ºäº‹åŠ¡ç®¡ç†å¸¦æ¥äº†é‡å¤§é©æ–°ï¼š</p>
<h3 data-id="heading-23">ä¸»è¦æ”¹è¿›ï¼š</h3>
<ol>
<li><strong>è™šæ‹Ÿçº¿ç¨‹æ”¯æŒ</strong>ï¼šå¤§å¹…æå‡å¹¶å‘äº‹åŠ¡å¤„ç†èƒ½åŠ›</li>
<li><strong>å“åº”å¼äº‹åŠ¡å¢å¼º</strong>ï¼šå®Œå–„çš„R2DBCå’Œå“åº”å¼ç¼–ç¨‹æ”¯æŒ</li>
<li><strong>Recordæ¨¡å¼é›†æˆ</strong>ï¼šæ›´å¥½çš„ä¸å¯å˜æ•°æ®æ”¯æŒ</li>
<li><strong>åŸç”Ÿç¼–è¯‘ä¼˜åŒ–</strong>ï¼šGraalVMåŸç”Ÿé•œåƒæ”¯æŒ</li>
<li><strong>æ³¨è§£å¢å¼º</strong>ï¼šæ›´çµæ´»çš„äº‹åŠ¡é…ç½®é€‰é¡¹</li>
</ol>
<h3 data-id="heading-24">å‡çº§å»ºè®®ï¼š</h3>
<ol>
<li><strong>è¯„ä¼°Java 17å…¼å®¹æ€§</strong>ï¼šç¡®ä¿ä¾èµ–åº“æ”¯æŒæ–°ç‰ˆæœ¬</li>
<li><strong>é€æ­¥è¿ç§»</strong>ï¼šå…ˆä»éæ ¸å¿ƒæœåŠ¡å¼€å§‹å‡çº§</li>
<li><strong>æ€§èƒ½æµ‹è¯•</strong>ï¼šéªŒè¯æ–°ç‰¹æ€§åœ¨å…·ä½“åœºæ™¯ä¸‹çš„æ€§èƒ½æå‡</li>
<li><strong>å›¢é˜ŸåŸ¹è®­</strong>ï¼šå­¦ä¹ è™šæ‹Ÿçº¿ç¨‹å’Œå“åº”å¼ç¼–ç¨‹æ–°æ¦‚å¿µ</li>
</ol>
<h3 data-id="heading-25">æœªæ¥å±•æœ›ï¼š</h3>
<p>Spring 6çš„äº‹åŠ¡ç®¡ç†ä¸ºäº‘åŸç”Ÿã€å“åº”å¼ã€é«˜æ€§èƒ½åº”ç”¨æä¾›äº†åšå®åŸºç¡€ï¼Œæ˜¯æ„å»ºç°ä»£Javaåº”ç”¨çš„å¿…å¤‡æŠ€æœ¯æ ˆã€‚</p>
<hr/>
<p><strong>ç³»åˆ—æ€»ç»“</strong>ï¼šé€šè¿‡æœ¬ç³»åˆ—æ–‡ç« ï¼Œæˆ‘ä»¬æ·±å…¥æ¢è®¨äº†Springäº‹åŠ¡ç®¡ç†çš„å„ä¸ªæ–¹é¢ï¼Œä»åŸºç¡€æ¦‚å¿µåˆ°é«˜çº§ç‰¹æ€§ï¼Œä»å•ä½“åº”ç”¨åˆ°å¾®æœåŠ¡æ¶æ„ï¼Œå†åˆ°æœ€æ–°çš„Spring 6åˆ›æ–°ã€‚å¸Œæœ›è¿™äº›å†…å®¹èƒ½å¸®åŠ©ä½ åœ¨å®é™…é¡¹ç›®ä¸­æ›´å¥½åœ°è®¾è®¡å’Œç®¡ç†äº‹åŠ¡ã€‚</p>
<p>å¦‚æœè§‰å¾—æœ¬ç³»åˆ—æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç‚¹èµã€æ”¶è—ã€å…³æ³¨ï¼æ¬¢è¿åœ¨è¯„è®ºåŒºåˆ†äº«ä½ çš„Springäº‹åŠ¡å®è·µç»éªŒå’Œé—®é¢˜ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¼€æºæ–°åŠ¿åŠ›ï¼šopenGauss åœ¨æ•°å­—æ—¶ä»£ä¼ä¸šçº§å¼€æºåº“é€‰å‹æ ¸å¿ƒçš„ç«äº‰åŠ›]]></title>    <link>https://juejin.cn/post/7572397142364995626</link>    <guid>https://juejin.cn/post/7572397142364995626</guid>    <pubDate>2025-11-14T16:39:08.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572397142364995626" data-draft-id="7572385850636189702" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¼€æºæ–°åŠ¿åŠ›ï¼šopenGauss åœ¨æ•°å­—æ—¶ä»£ä¼ä¸šçº§å¼€æºåº“é€‰å‹æ ¸å¿ƒçš„ç«äº‰åŠ›"/> <meta itemprop="keywords" content="æ•°æ®åº“"/> <meta itemprop="datePublished" content="2025-11-14T16:39:08.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é¸½èŠ·å’•"/> <meta itemprop="url" content="https://juejin.cn/user/2447965011313308"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¼€æºæ–°åŠ¿åŠ›ï¼šopenGauss åœ¨æ•°å­—æ—¶ä»£ä¼ä¸šçº§å¼€æºåº“é€‰å‹æ ¸å¿ƒçš„ç«äº‰åŠ›
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2447965011313308/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é¸½èŠ·å’•
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-14T16:39:08.000Z" title="Fri Nov 14 2025 16:39:08 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#2b2b2b;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(159,219,252,.15) 3%,transparent 0),linear-gradient(1turn,rgba(159,219,252,.15) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin-top:35px;margin-bottom:10px;color:#4dd0e1}.markdown-body h1{font-size:30px;text-align:center;position:relative;width:max-content;margin:0 auto}.markdown-body h1:before{position:absolute;content:"";z-index:-1;top:-20px;height:100%;width:100px;left:0;right:0;margin:0 auto;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADsAAAA6CAYAAAAOeSEWAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAABkLSURBVGhDtZoHnJ1llcbP3Om9ZiYzmfSQhCQQIbRQVQKI9CYC68qKriJK0UXcZRcINqStIoiIqKCi1NACQihBWiCkkJ5MJlMyvd7p7d759v989/sy34yTbIj48Atz71ff855znvOc971xDrB/EtoGI7a9Z8Aq+wZML0mNj7dE95NZ1OKsj1dHo1GbnJpss9OTbWJyonvun4VP1Njuoagtb+m0it4By0iIt8LEeMvkr8XFWcfgkA1gYDLf47i2PzpsyU7UspKSLDoctagTZ7Vc08MzClMS7awJ2ZaflBB78CeET8TYla1dtrKt2w5KS7YCDGzEoz2RqKUmhGw6x2bhuXyOp2BoRXef1Q1E7Lj8TIsMD1sbxu1kcnYSAX1810RMTUmyMB7f2j1gC7NS7byinNiL/kH8Q8a+2NRh77b32El56VaPAe0YeGR2mh2bm+FdMRqP1rbZe+3dFsHT35qcb/Oz0rwzo7Gxs9feYPLS4kM2h8lawee5hPmlJXneFQeGAzJ2F564v7rFzi7Msu3d/Xgjzq5g8ArX8VCNN2vJ28daey0zZJabmGCLslP5HOf+Oygr3UzDGOf+JxrauXfQjslJt+dbuuyMgiwmk+sPAB/b2Lt2NdoMZnuY21qHIvbvUyZ4Z0ZQiXGrWjvsmPxsK4R0nmHA8ZCTQvxVQn5eRipklIBtcVbV1WtHYsjati47ZWKuTUpP9Z4yGk/xDBGe3v1mW4/dOrvYO7P/2G9jRSjf31FnXyaUXiB8r51WaJkM3kcfOSa2FR6qarIenooTLQHPLcC4mYThyw1tVpKWYlVERlZ8nC3Oz3Jzdn1nn5uvQ8OOHYvhR/CvsqffJbkCkZTvcYZ6Z0WTfTovw5Y1dtjXp+TbFPhgf7FfxpYxuMfr2uwo8rEtMmwXF+d6Z8wGmIR2PLyjo8cqOFffP2SLGexJEJCP9R29thkPXlpa4A5Y3w/jmuVNYYwO2QkY7WMtz3mVcE1hkualJdmSolzX8GnpKd4VZq80d1o7zN0RdWxGaqItgbn3B/+vsasgh/UMNBOvzYMZDxtDKp289KGaVguFQvb1yQWWwuB97GaSXqUUnVaYbSUwrDCEBz/C2CM8EhNrP13fbkeSh3OJgCAe2N1CWXKsGOc6TOr5U4q8MwYhDtkTda02MyPN+nnGBQEH7A37NHYz5KOZVv08qyjbSseEzKauPnsMj98wc6Ibcj5UUv7M8QWZTE52jEwGOVaD8U1Dw1YNWX0qM8VKyb80L/TrOPYOzH4KBJQTrK8M7+7KZjuM63sHBt17FubGoibCuf+tarWFGUmuwWeT8/vCXo1tZOYeZcazCaez8MwEzzM+HqhqtiJI5twxL1jeGLYk7jmKMF1JOCbg6Qj5nAdRqX7q3BYm8VAmQvW1lfcMc58IT95uIA3q+gftrDHPXUXJWkVEHJme5Bp5UmHsvIZ/O3l8ECE/FWcsItX2hr0ae8O2Wjs+J43QTbOZzGYQ/7Wtxq6eXjRK3r0By4YJ6Ty8EiYSJqcm2eGeV4Pox/ANENJR49RiEdfqcLflUJrEBZqgxYHrBjn2ExFURqKdVETN9YirJxKxR2rbrYeQv5ISmB6IsiDGNfZGWPeMgkzr58xnPaJ5p6XDZPKz4T77wayJ7jGhhXLwanOHTWBgq5n5q6YUwNJ7l3kKcRl7OJ7fF56l1GzvHbSD8dghTPi0wIRfv6XafjJ3ssv0PnZQ7nZx/etwzO1zJ3lHR2OETTw8x0tOx1AN3De0D7YV+63oGthjaJQ5Ur7eVVZjcdGInUyuaT73ZWg3efV8fZs7cc2E777Qi5eunVbghvPPymrt/krKGfcLd8ybYjdxrK6333Z09rjHZkNuLYzz0uIc+xWCZzz8nbHbe4dsY1e/XUOY+nimvtUaSazv4jXhaQasSbmYmpuenGwHZ8TKggSEQm08rMD7ahBOoExcMqXQegjnZ+CEvaEa1ZQUQkt39dj0zDS7krq+ARmpdws/nlNqD9WFbWN7l5u3wr9MyrcXKUsqWy3jTOaoML4DdaQ83YIoT4VYpEXvYQZLmbX5SLohBrgOj186Kc/iKTUPUhq+Rrm5ekOl3TWv1Mr6hqwbY0VOQXwEo+Moq4Z47q5qsU489G944LyJOW4LOLZOKtT/iI6+nGe/0dhuEd4ltj2NmiuCU4hnk5fHIi7+RK4uTEu0e+s7rAiRcw1CYy3OejvcYz+eXeI9MYY9nu3lYZl0KavJJ7Vjibzgjp319rUZE20j7CkJqFr5JQYgQ39f3eQaKpQk0afy8nl4uBzvjUUTRk7k3iebOm0pabDiyFn2XGu3dRME41CGVeBVqSiVnc6hIUpekp1VjHLDSOEcQlui5W/U8C7IKREjv1Gabw3wRwUTvpv7jybPtzHmIPZ49q6KRjuccqBQVCOtGvqXhrCFUUXJzOYSHt7Kw5Ix9H08dSje1o1JyL73IYXpEMmE5CRbw6wuykx2pR+Pd6/J4JpLiJKV6N9OnrcQNfQ0Zem6qQX2MmFXyWTE+DMO0kGx4e08DEjnXbsYuOq7niHB8jdY/wQ8Srm2XCZZUrOakF1CY5EKX0h93Tu/1J4kRdbDMT8MamgZK9xe3uDcvrPe++Y4f61rcZr7B53rN1c5N2ytcV5rCrvHt3T2Og19g+5nH7dvq3bqunr4NOwgK2MHA1jeEDuG7HNuLmtw7qpocl5t6nCPvdTQ7v4N4u3WTqeyu9cZHIo4f6lqdFoHh7wzMbzDeeGv3Hvzjlrnh2W1zofhHuftxpFn3VFe7zxS0+p0DlKVPbhhvBxhvwiFMgfP+mjHA08gEC4pybeLyK1iZldh8zC5VJQyUl8l59KZ0WJk2xaiYWxNrkXXJhA8r3PvZRur7ZZZRfadaRPsfiTmX9HGajC2tXd6V8dQTMhX0h8rNdJx9Ra8F8SbRNLzhPRnJmTZIUTYueTyWxyr7uv3rjC3OkzE8495oS+4xq6D5WoI0bO5WVCOSerl8rIeBrOI/Hkaw6ME5W1zSuzx2la3CRdWi3zIG+FDBvUp9LMgI/vggUmE7KkT81yGvOOgEYa/aUahhRAF5xLec3OzbF1r2O17BbVxIi7hzJIC64IYhXdJA+nh/5xVbOmE9J0QqjSxWk0pp37M2YEtgjS8GpimACu7xkqxdKJ6fEXyYl2Lre0ZtC8yELVewtWUnbfCPIhrvgDFz8WI5yhJKgcnFMZWEFrwhgzo5uWDDDA1oGSOzcu0xfx7vTlsv6posIMpJ6cGWPiw/BxL4PU7vbrpjgf8bMdu5OYwOdhm83DARUSa0ELknYIeEAaILuWxlhGa0M8+EuJCrpJT+ymENhN60pXBxa3LZ5TsucnlGaCmIEQ4Evru91yuz0xMtKaeXluI5zdh9Mm8vAlBn4aR07X64EH3vEKdXQkZJXPP/JxMvNRpLxEtHZ5RQgmNewnpouvVTpYTHdfOnmy5kFUGnpRTfEhXD9DiBdFFJB0/YWS9aj6pmc89r0BaQmgTRkgI+EsdKsYasJZOBF+QqTH474NK7LbyBvf7W+RgOxNyxfQY2/2hrp2+NkroxrzrQ55fSZkpJIa28znCgF6rb7H1hOSslATyvNflAh9pvHcX3lVE/Ya8FjTJIexa2Rq77nfU96unTnD7aME3+TAm6BFKYrPnqCNIqV5sq0ZGCiEV+Db+qWMQqpFgb5KPx48R6omeDl2EuP9DTYt9iGA/f1KBS1w/La+H4ktsSmLItvZHXLUkrCeflVtJ9DVVg1H7+sxiGvVM975rZpfabuqHVhuP5F1vewav5O8GamUe91yDanoYw47FWzC929O+DJnKA2opFY1Rjru5CE7kOcO0jJtQVUIynzuZEMeb+1CEOFXN8iFSGeRpCm1BTlJxVg49Azm819SO7Bu0axEbwn27GuxMck+TMQHDP8fn48gfDVIL4R8xKVPJ73MQBUIfA/Z54LMw5vmlE+w+VFo2A78X/SsyPA/RMD0z3e2qVLtfo7aeBslpMX0N0TEnLcUlKym1jyBFqSohmYntI5enBhYB9CY/2kNarhwJhNiMtRGyWnkQdKaCFyQwgydjyNUw4VchKxXv2/DoKdC+lkQbCX1NlKCGvJiBJkSGbCus6jfo4yGBNySgr+u7e20BCsxdVAcFlJ/tHd32+cIsNxSXUULUUx+dg/d47g7OPYFw2MxkSuyMwLHVTI6PBN6dS8Sppw45zHJSgDXV3aQzmz40Z6fDgBfiAXU0uZxby2zejee+j3eltoQMzhV6qSBogXwrEXDj7ElWxUQ8RrnSaoU0dxIsKaiMvMykXTu90NqJsGHP4z78SdLigUrLKat32nFwy/E07pfDFRdQ/7N5r57pQ1482uvWhMGhQcviGkVrKDUp0ToCxfhQal5n4Hs/g1jOgH4LWdwFOd1b1WzHET4vLZppv+Czjxo840OrDlG8jAJzv2tp5mLK1dsU/lfIOeWy5NxFxfl2BoYImlQtx9QF6mJRQKBsQYYuO2yaLYPBUXvu/VqYPxtHhNy7Y4hCkNLGPtKSklzCVKSHtMQxcqm5Kw1DhI2PTGZtcGDAvoLQ/u7MifYtWFBlxz2H9zo8RkwKzC5UYiG+p44ccqE62YAxLeT/TOpf8MXx8Qk0IJFRY1Go+viQVJpE5Ehjf49xfAZeqGIy/7us3nqxwQfCkjZypPxobVr/6YpQHIalUvuCyEwbSXC9PC8QnkFcXlrgLpoLIhIfKuaqlQkYIAwQnr/f3eyu7KttOw2lNpv8/BPHyjzVNER3o72gvEBKqRMTflndbP8BMweRDyeciEj5bFayFXqTLzheivgYJC0jwzwHa0MDDEotm48ndze5BBBElAnxxcRYHAFh3FfZaA9UNRmC354kNwUx8eHkmVj5dcTE5ZMnuEyr1QqlhtaJLuOYZv4v3KNo0TKrGPUZ1NILPKuWcvVn5Trv10SMB6h0j/ARMnlOuafCBIfnSWEx/Raif3HDzofYMM31dOyY9LBaLK3TjoX2fEqT4+2qaUVWSTQvyM6wC8nNJyEetXIyuLKrx04P7MKNnbJZlKUtNAIHo7i2dA/YU3Vtdi5l6jCepXy8hOedSSSsI8/HQg5Q+gxTKXwkMHkbESo+hjG0lbRRzQ3Fc5LOzDuFhs3Ptumpie7ilRDhlEJOq/hjsZljCxjkt7fWuPS/EekpXMggJQIk0G+eN9Xu2VmHWIkJe0nJRN4ptBBit2yutG9ML7J1DHAxebiAMrZ4VZlduqGS8I2tJc2iborUxmIN79c+kTovFxivPvrcSaP3n7RSKYTUmKt4N3rMOcw4JOneD3sP956jNaMglIeTER5Xbdlt15Tm2W10NEsYrA/N5JLCHHsR9tSqwxq08G3bqm1ZTbOtagnbo6SLvH/VzBL7W7jPzqFea0LmMLFzUuLtdwumuO3i1Vtq7OK15Xgw3l1PDmIXak+6QBEkvB9YJIzBcc/L20JIYaSZ/qAzVm5Ut4oowk3QehC+N3xo/1wTqt7zsYawfX9no9XjqdPXVLhrwyo/wucJYQkE1e4j8rLcBuHUItQQKqgMXb6LGvxFQlXw33AdZLR0V5P9Fr29lP73scNnosoyvdWPv4fPJ+uJrLVtMakqaL1M1cTvv0OLIZE6wk2a2IcIRUQh+DaejpdcXepBa7bKDRGM9PIVxTl2EwarZ72rooVuY4RQtMypdk6e1lLLehhY2lt7QEd7WxlCDvdIli6E9B4+ZIodmZEMccUGqgiZOqru9tkR3iJ8nCcXRWRZCSPMLPEjlx2LjQL1OM5qKAm+vhSuRqSfV5Ttrg8FdWcrnhMqCTex7DEM6qTsVEuM1+8hovaHQ6e6a1Fz0xLd3nUt4ToWWuzWNkhcoAIIjUx2ZpxjLzWF9+SYmngR1lok4TEoJxGfuijhI/7OICoFmadl2llcL9b1oRVJtbD+JLlv1KrhHG5811t9ELbzgk14ICUwqE+TDzftqHPz98vUSy3jSIwP8dCpkNqLDPTx+rArz4T5qLG3G2PrvJKKPoLBWE501NC3ilUX5mVjVIb9nIbgWcpPMiSXjbcL8K62UkR86m1/yfkSeMaHFuK04X0CE3J6SWzFUxw0BSNHlSzi3RmIRJwHq5udO3c16quLp6sbnffbupxbt+12vzOrzuvNHc7ycRbIxuJHgYU7YSASdQgxp7qz2ynv6HJeqW91doa7nLruXof+17sqhhu31Xif9o7HalqczV29Dnrb/f5EXZvzdH27U98/6LR5i3N0UM5zjHU71/lwjRWWltU5CAIn7F1MqLp/r9hQ5RoaxG+qmrxP4yNKcfsFLwuiprffeb2l03m2scO5h3Or2rudzjGrhk8x4Cqu2xcexilBvNEcdi5Yu4tKF3Ue4tzPy+td5/1md4tzw5iJ27NuXEYobYUdlb8z6GTWkdxaCvk2zHjd5mpKQ459mv5TkAp6mQb9Aq9HHQ8S6mrZnuc6vUG6WHusIhCJGNXl9byvnJyaiE7+Eoz8c5TYNQiUveENGpJpcIJ+biS8R0+rlcazGNs7pKB+zPLTOSX2KNWhlDAf4r2Spj72JORB5OyHULX+dlD/FOky/HFy5ygYU0sey/i8moeqdunXK1qC3RuaMOYHlI/raQMl3M+EeTV5WxD3Km8a8PkM8nr648sQ9+esKbf5e/nxiKBfAOQkxbv3SU9LYmqPV9V/Pn+V20VwTyVjTqCI6edEQUOFUXs9WmfSll8DyX2dt7GlnwkswaM3l9XZ0oNK3MTXbxpOV2sGk69s6XCJw4cY8KbyRrt9TrHt7Bm0rRBQe1+fHUWNfaapU0KbqxzbORC1M/LS3dJwIl3KOrwykQG/E+61q+isgniztdOKqNOziDgZqZIzFwPvqGiyg5NCtoCqoG5NxHhPZTOsnORulKskjoKMDeLuXQ3OmnC3syxARFXdfc57LR3OrdtrvSOOs55rnqhtcdoGhpxHdjc5EfJUuHZTlftX+G15rXPlhkrnLe59F7Lz8VGHdg8c5y2OLeMZ126qduq9XC3v7nd+FchLvYPJd15gPCu8XQnh/qpm59WGVudZzvvQO97kXTcGxhnEuJvR39tWY8cwK4uhcikk4a3Gdstg9l5B2t0wfaTdWkEou5vCPOV5PH73vFL3+DfXltnh6OxjkJD6Wd5F3g88tMe6CW/7YmI99VIL4u0oqUK8ocW4d8hFrXMVoOQU8s3U97MnjvDD/XRYkyhHM1MT3GVZQR2Tdv70U8EbA5vlo+CaPAaaSWoZXm50otGodxQ6L6txGKxzw5ZYORrBsPPrykZKQIy1n8bTjwb2fO4Te3ue7x6KOKvaYns1wtIddd4nx3mwot55qyl2360cp81zurg+CGqwU8v4/Of5uAVvPgObrwvHomY8jOtZ4fXWLnefdHVXv9044+8ZklCx75DXwcV1Sb27y+vInUQEuVYSaMgRJYfAwtoj0raFxIUW1A8nz35f02qLc9Lc9lG7CBkwtUR7bf+A+5uL6ehnH9Lat+5sIEfj3Cbj3NKRvP7Rjlo7FSmqavKvpSP8MRZ7NVbQYLSkqlC9ZW4sPH18gBTcORjrhMWmQWzFmK2UsvO90qQ1oZcI8UhkCLZPtRqMy0NirobAvjIpb4/sW06qKGyPR2oGIdlazjOOTk+kLYzaaYGSp63Wz6HsXsQ51wd+LTAuZOy+8GBNq7tF+IOdDU4kENJthNID5YRafZtzZ3mDs9LbRgzixcZ2l1h83OKFbDmEd0/FiFp7DWHgp0AQGzq6nf8hPF+oa3EehOz0ziCWcm4NpBRMhX1hn571oR9wqVVSDVPtUi32sQ0vbu7scZdY9aOt2ZSEL9BEBIW+dv20AKDd9/ep09oimYqHpyImkKDuRllS4PrlHNuIqDmCJmNJQba7q1joEaUQJuR/WdXsLrJrq/L6cdJsPOyXscJ7GLKqo8cOpqhrO//yQG6oS3kZwS9xPkRB3wi7diFMtDN+PLk5m1ath+8f0Fy80dbjhvVXub+U5mEqeal27UP+dWpPlknNxW79Ak6/7Tg3UMOF52j1xA1qK7Trd6nXC+8P9ttYQcumIonLSnJtBdJNa77axw1C2x3qR4Wqnj73x9f6MbV+CCYFBZO6y51aSh3gzVrsmwzJnULEbCJC1oZ7vIZ/9Iqmfvn2u5oWO5n8fApxcuWUApum5diPgY9lrA9EtvUNOzYf8vqAcJPsU5iOh7XtXQgt2uZhjKU2amF7HQyfEYWcZk5yQ1RDKNrLcq02k/9IGmldrB93KiokPw8EB2SsoKWXO5FmxXhlckqi+3vEUvLqwok5PHVkIWAszlqzy1p54zuLpnPZ3q9bod08JlLSb5DrNxDm38Sbvsg5EBywsT7oH+3XNW3uasGirFSrxRNdCllKiPZHZzJYLZb5qEcpae3pxMCuu9oibS5/QCOiLcYUrp+MmtJeURjFdVlxzqiae6D4h40NQt54HyGv3JRo10aVfv8YhtC0pSlVKcPFuxIXahr08mzCO4VzMlLSsZuomZ+RaucU0rXsw/sfF5+osUFonWob/7TrLdaUgdpV93fl9X+VIC0Y6tek2uI8OD3J5gT2Vj9ZmP0f4IM4iY7RQ5gAAAAASUVORK5CYII=) no-repeat 50%;background-size:64px 64px;opacity:.84}.markdown-body h1:after{position:absolute;content:"";width:150%;left:-25%;height:50%;bottom:12px;border-radius:50%;background:linear-gradient(transparent 80%,rgba(77,208,225,.8));background-size:400% 200%;opacity:.6;animation:h1Animate 6s linear infinite}@keyframes h1Animate{0%{background-position:100% 100%}50%{background-position:100% 50%}to{background-position:100% 100%}}.markdown-body h2{display:block;border-bottom:4px solid #4dd0e1;position:relative;font-size:24px;padding:12px 32px;margin:30px 0}.markdown-body h2:before{width:24px;height:24px;left:0;top:0;margin:auto;background-size:24px 24px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADGklEQVRYR81X32vTYBQ999s6mFjQgQ+DrbHiVFZYU4cDcQ/6pGhTFVYFEXGi82H+Bz448UnEF1Fx9ccEEcXpZE3d5tP2ooKiTacTHaLNpigMHDgnU9tcSbrWrkwWR0sbyEOSe885ObnfvV8IRT6oyPwoLQHBx+OVM5WJvSyEVAhnBOjt7yU/+/rr6r6l8TMO+F/EN0JQhICqQpD/xaRpcpAc9tS+M+9lBCia/oqBamK+zeDuQogQZaKJk3wcQjxSva7tGQGB2Ke1zIk3DNyMyNL+QpCnMQOaPsDAVuGAp9cjvbYc8Ec/bCYSg0zoiHilk1tHxqsqEsYlML4kjIpT/eurJxRNPweQU5VdrWaOEo1fgKAVbBgXIz73kF3R/ph+ghgdzMYWM29eAWlBJqgZaFlFYtC6nhWpaDqnSGlIlV1WjJ3DloDNgyNLncudqgX//Ucg3LxuStHGuhi8pqKCW3rqV342rwFjRznKm+/LNaN2yC237ThgF2wxcfMLeP6+ncrKzoPoKTGeLQbYbg4TNoC5iZPJY5HGVRdSNZAWYBclD3FzBQzrR8hACAKdzBzKA/4/IYioDQaOskBbpEG6PO8qKKSAEi3CnEb0Pw4oMf0OmKbTDWqh3Lw6EIiNBZi5lxh3wz4puBD5ovqAMvxhHSdFKxE1CQe3m/07TeTX4lcJdAhE+1Sv65Z5P/ByvIGTRowIZ9igbtXnmrOsbTvgj+kHBNMuBu9OdVw8EeU4nC1A0cYmAHZOTRrLhra4Z8ywnSN6vZHAFTA2WnnMfQB3qz73ddsOZM8CACFDIPSgQXqebXEgqgeZcAeEe6pXasm1f8ew3igMtAHWac0Uc/jYdyAaP0xEBwFsmgUPqbJ0NE2UKj4EGcahiOzuyhagaHpnmtgcVgTcCMuua7YdyAHbA3ArQNscVFbb4635aD6fnYaTvxxi9UNP7ddMXaRWVBdAcaLk6bDXPZCNZ9uBXEsDUX1T2Cc9yjig6Z0EHg3LK8/aqf6MwJKchkXfks1+0+JtSq3qLPa23BRR1B+T/6nkfMaW1r9hPt/MLtYfTLEpP+T9FNoAAAAASUVORK5CYII=)}.markdown-body h2:after,.markdown-body h2:before{content:"";display:block;position:absolute;bottom:0}.markdown-body h2:after{right:0;width:400px;height:10px;border-top-right-radius:24px;background:linear-gradient(90deg,#fff,#4dd0e1);max-width:50vw}.markdown-body h3{margin:30px 0;font-size:18px;position:relative;padding:4px 32px;width:max-content}.markdown-body h3:before{border-bottom:2px solid #4dd0e1;width:100%;content:"";display:block;height:28px;position:absolute;left:0;top:0;bottom:-2px;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);background-repeat:no-repeat;animation:h3AnimationBefore 2s infinite alternate}@keyframes h3AnimationBefore{0%{width:28px}25%{width:100%}50%{width:100%}to{width:100%}}.markdown-body h3:after{content:"";display:block;width:28px;height:28px;position:absolute;border:2px solid #4dd0e1;border-radius:50%;right:-15px;top:0;bottom:0;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);animation:h3AnimationAfter 2s infinite alternate}@keyframes h3AnimationAfter{0%{transform:rotate(0)}10%{transform:rotate(0)}50%{transform:rotate(-1turn)}to{transform:rotate(-1turn)}}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin:22px 0;letter-spacing:2px;font-size:14px;word-spacing:2px}.markdown-body img{max-width:80%;border-radius:6px;display:block;margin:20px auto!important;object-fit:contain;box-shadow:0 0 16px hsla(0,0%,43.1%,.45)}.markdown-body figcaption{display:block;font-size:13px;color:#2b2b2b}.markdown-body figcaption:before{content:"";background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAGFBMVEVHcExAuPtAuPpAuPtAuPpAuPtAvPxAuPokzOX5AAAAB3RSTlMAkDLqNegkoiUM7wAAAGBJREFUKM9jYBhcgMkBTUDVBE1BeDGqEtXychNUBeXlKEqACsrLQxB8lnCQQClCiWt5OYoSiAIkJVAF5eVBqAqAShTAAs7l5ShKWMwRAmAlSArASpAVgJUkCqIAscESHwCVVjMBK9JnbQAAAABJRU5ErkJggg==);display:inline-block;width:18px;height:18px;background-size:18px;background-repeat:no-repeat;background-position:50%;margin-right:5px;margin-bottom:-5px}.markdown-body hr{border:none;border-top:1px solid #4dd0e1;margin-top:32px;margin-bottom:32px}.markdown-body del{color:#4dd0e1}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(77,208,225,.08);color:#26c6da;padding:.195em .4em}.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#4dd0e1;border-bottom:1px solid #4dd0e1;font-weight:400;text-decoration:none;margin:0 4px}.markdown-body a:active,.markdown-body a:hover{background-color:rgba(77,208,225,.1)}.markdown-body strong{color:#26c6da}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{font-style:normal;color:#4dd0e1;font-weight:700}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(77,208,225,.05)}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{margin:2em 0;padding:24px 32px;border-left:4px solid #26c6da;background:rgba(77,208,225,.15);position:relative}.markdown-body blockquote:before{content:"â";top:8px;left:8px;color:#4dd0e1;font-size:30px;line-height:1;font-weight:700;position:absolute;opacity:.7}.markdown-body blockquote:after{content:"â";font-size:30px;position:absolute;right:8px;bottom:0;color:#4dd0e1;opacity:.7}.markdown-body blockquote p{color:#595959;line-height:2}.markdown-body ol,.markdown-body ul{color:#595959;padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>åœ¨ AI ä¸å¤§æ•°æ®æ·±åº¦èåˆçš„æ•°å­—åŒ–æµªæ½®ä¸­ï¼Œæ•°æ®å½¢æ€æ­£ä»å•ä¸€ç»“æ„åŒ–å‘ â€œç»“æ„åŒ– + éç»“æ„åŒ–â€ æ··åˆå½¢æ€æ¼”è¿›ã€‚è€Œæ•°æ®åº“ä½œä¸ºä¼ä¸šæ•°æ®èµ„äº§çš„æ ¸å¿ƒè½½ä½“ï¼Œå…¶é€‰å‹ç›´æ¥å…³ç³»åˆ°ä¸šåŠ¡è¿ç»­æ€§ã€æ•°æ®å®‰å…¨æ€§ä¸æŠ€æœ¯å‰ç»æ€§ã€‚éšç€å¼€æºæŠ€æœ¯æˆä¸ºä¼ä¸šçº§åº”ç”¨çš„ä¸»æµé€‰æ‹©ï¼Œå¸‚åœºå¯¹æ•°æ®åº“çš„éœ€æ±‚å·²ä»å•çº¯çš„ â€œå­˜å‚¨ä¸æŸ¥è¯¢â€ï¼Œå‡çº§ä¸ºå¯¹ â€œé«˜æ€§èƒ½ã€é«˜å®‰å…¨ã€é«˜å¯ç”¨ã€æ™ºèƒ½åŒ–â€ ç»¼åˆèƒ½åŠ›çš„è¯‰æ±‚ã€‚</p>
<p>openGauss ä½œä¸ºæºäºåä¸ºæŠ€æœ¯æ²‰æ·€çš„ä¼ä¸šçº§å¼€æºå…³ç³»å‹æ•°æ®åº“ï¼Œå‡­å€Ÿæ¶æ„åˆ›æ–°ã€æŠ€æœ¯çªç ´ä¸ç”Ÿæ€å…±å»ºï¼Œå·²æˆä¸ºè¶Šæ¥è¶Šå¤šå…³é”®è¡Œä¸šçš„é€‰å‹ä¹‹ä¸€ã€‚ä¸‹é¢ï¼Œæˆ‘ä»¬å°±æ¥æ¢ç©¶ openGauss åœ¨æ•°æ®åº“é€‰å‹ä¸­ç©¶ç«Ÿå…·å¤‡å“ªäº›ç«äº‰åŠ›ï¼</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6c7f93117d85416994584d1579d4f82c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6bi96Iq35ZKV:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763743147&amp;x-signature=RBE7GkB3OzIm2W8LwZA6y9yvObM%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-1">ä¸€ã€openGauss å‘é‡æ•°æ®åº“ç®€ä»‹</h2>
<p>openGaussæ˜¯ä¸€æ¬¾å…¨é¢å‹å¥½å¼€æ”¾ï¼Œæºæ‰‹ä¼™ä¼´å…±åŒæ‰“é€ çš„ä¼ä¸šçº§å¼€æºå…³ç³»å‹æ•°æ®åº“ã€‚openGaussæä¾›é¢å‘å¤šæ ¸æ¶æ„çš„æè‡´æ€§èƒ½ã€å…¨é“¾è·¯çš„ä¸šåŠ¡ã€æ•°æ®å®‰å…¨ã€åŸºäºAIçš„è°ƒä¼˜å’Œé«˜æ•ˆè¿ç»´çš„èƒ½åŠ›ã€‚å…¶æ ¸å¿ƒæ¶æ„é‡‡ç”¨ â€œå†…æ ¸ + å¼•æ“â€ çš„æ¨¡å—åŒ–è®¾è®¡ï¼Œå†…æ ¸å±‚é¢ä¿ç•™å…³ç³»å‹æ•°æ®åº“çš„ ACID äº‹åŠ¡ç‰¹æ€§ï¼Œå¼•æ“å±‚é¢åˆ™é›†æˆ DataVec å‘é‡æ•°æ®åº“èƒ½åŠ›ï¼Œå½¢æˆ â€œç»“æ„åŒ– + éç»“æ„åŒ–â€ ä¸€ä½“åŒ–å¤„ç†èƒ½åŠ›ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/14089a435a6c486186a9858ba7764c7b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6bi96Iq35ZKV:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763743147&amp;x-signature=ez8WsfDmIvahc%2F%2BsijnlYKUFd%2FI%3D" alt="" loading="lazy"/></p>
<p>åœ¨å¼€æºå±æ€§ä¸Šï¼ŒopenGauss é‡‡ç”¨<strong>æœ¨å…°å®½æ¾è®¸å¯è¯ V2</strong>ï¼Œå…è®¸ç”¨æˆ·å…è´¹ä¸‹è½½ã€ä½¿ç”¨ã€ä¿®æ”¹æºä»£ç ï¼Œä¸”æ— éœ€å¼€æºè¡ç”Ÿä½œå“ï¼Œæå¤§é™ä½ä¼ä¸šæŠ€æœ¯æ¥å…¥æˆæœ¬ï¼ŒåŒæ—¶é¼“åŠ±ç¤¾åŒºå¼€å‘è€…å‚ä¸ä»£ç è´¡çŒ®ä¸åŠŸèƒ½è¿­ä»£ã€‚</p>
<h2 data-id="heading-2">äºŒã€openGauss çš„æŠ€æœ¯ç‰¹æ€§</h2>
<h3 data-id="heading-3">2.1 å‘é‡æ•°æ®åº“èƒ½åŠ›</h3>
<p>openGauss ä¾æ‰˜å†…æ ¸åŸç”Ÿç‰¹æ€§ DataVec å‘é‡å¼•æ“æ„å»ºå‘é‡æ•°æ®åº“èƒ½åŠ›ï¼Œæ”¯æŒå‘é‡æ•°æ®ç±»å‹çš„å­˜å‚¨ä¸æ£€ç´¢ï¼Œé’ˆå¯¹å¤§è§„æ¨¡é«˜ç»´å‘é‡æ•°æ®å¯æä¾›å¿«é€Ÿç²¾å‡†çš„æ£€ç´¢ç»“æœï¼Œæ¶µç›–ç²¾ç¡®ä¸è¿‘ä¼¼æœ€è¿‘é‚»æœç´¢ä¸¤ç§æ¨¡å¼ï¼Œæ”¯æŒ L2 è·ç¦»ã€ä½™å¼¦è·ç¦»ã€å†…ç§¯ç­‰å¤šç§ç›¸ä¼¼åº¦è®¡ç®—æ–¹å¼ï¼ŒåŒæ—¶å…·å¤‡å‘é‡ç´¢å¼•ã€ä¸°å¯Œçš„å‘é‡æ“ä½œå‡½æ•°ä¸æ“ä½œç¬¦ï¼Œä¸”å…¼å®¹ç†Ÿæ‚‰çš„ SQL è¯­æ³•ç®€åŒ–ä½¿ç”¨æµç¨‹ï¼Œæ— éœ€é¢å¤–å¤æ‚éƒ¨ç½²ï¼Œèƒ½å¹¿æ³›é€‚é…æ™ºèƒ½çŸ¥è¯†æ£€ç´¢ã€æ£€ç´¢å¢å¼ºç”Ÿæˆï¼ˆRAGï¼‰ç­‰å„ç±»å¤æ‚æ™ºèƒ½åº”ç”¨åœºæ™¯ï¼Œä¸ºç›¸å…³åœºæ™¯è½åœ°æä¾›é«˜æ•ˆå¯é çš„æŠ€æœ¯æ”¯æ’‘ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/243b1cf7a5f74e4fa205244391c13f97~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6bi96Iq35ZKV:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763743147&amp;x-signature=KIAersyqVMxvWnjn0RmlAg9lBe4%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-4">2.2 AI ä¸æ•°æ®åº“çš„æ·±åº¦èåˆ</h3>
<p>ä½œä¸ºâ€œAIä¸æ•°æ®åº“åŒå‘èåˆâ€é¢†åŸŸè¾ƒæ—©è½åœ°çš„å¼€æºæ•°æ®åº“ï¼ŒopenGaussé€šè¿‡å…¶AIç‰¹æ€§å­æ¨¡å—DBMindï¼Œæ˜ç¡®åˆ’åˆ†å‡ºAI4DBï¼ˆAIä¼˜åŒ–æ•°æ®åº“ï¼‰ä¸DB4AIï¼ˆæ•°æ®åº“é©±åŠ¨AIï¼‰ä¸¤å¤§æ ¸å¿ƒæ–¹å‘ï¼Œæ„å»ºèµ·â€œè‡ªä¼˜åŒ–ã€è‡ªè¯Šæ–­ã€è‡ªè¿ç»´ã€è‡ªå®‰å…¨â€çš„æ™ºèƒ½åŒ–é—­ç¯ã€‚è¿™å¹¶éç®€å•çš„åŠŸèƒ½å åŠ ï¼Œè€Œæ˜¯ä»å†…æ ¸å±‚é¢å®ç°AIä¸æ•°æ®åº“çš„æ·±åº¦ååŒï¼Œç²¾å‡†ç ´è§£ä¼ ç»Ÿæ•°æ®åº“â€œè¿ç»´éš¾ã€è°ƒä¼˜éš¾ã€AIæ¥å…¥å¤æ‚â€çš„æ ¸å¿ƒç—›ç‚¹ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b66179622f994b5a9faf557e68e102aa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6bi96Iq35ZKV:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763743147&amp;x-signature=g96ew76sJNaGHAAu4mLFoBrpttk%3D" alt="" loading="lazy"/></p>
<p>å…¶ä¸­AI4DBä¸»è¦ç”¨äºå¯¹æ•°æ®åº“è¿›è¡Œè‡ªæ²»è¿ç»´å’Œç®¡ç†ï¼Œä»è€Œå¸®åŠ©æ•°æ®åº“è¿ç»´äººå‘˜å‡å°‘è¿ç»´å·¥ä½œé‡ã€‚åœ¨å®ç°ä¸Šï¼ŒDBMindçš„AI4DBæ¡†æ¶å…·æœ‰ç›‘æ§å’ŒæœåŠ¡åŒ–çš„æ€§è´¨ï¼ŒåŒæ—¶ä¹Ÿæä¾›å³æ—¶AIå·¥å…·åŒ…ï¼Œæä¾›å¼€ç®±å³ç”¨çš„AIè¿ç»´åŠŸèƒ½ï¼ˆå¦‚ç´¢å¼•æ¨èï¼‰ã€‚AI4DBçš„ç›‘æ§å¹³å°ä»¥å¼€æºçš„Prometheusä¸ºä¸»ï¼ŒDBMindæä¾›ç›‘æ§æ•°æ®ç”Ÿäº§è€…exporter, å¯ä¸Prometheuså¹³å°å®Œæˆå¯¹æ¥ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/35f6abec8bcb4ea488c5e60f54a814da~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6bi96Iq35ZKV:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763743147&amp;x-signature=bnSavDyIHfHh7CC%2BNwMtqx4W66w%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-5">2.3 RAG åœºæ™¯æŠ€æœ¯é€‚é…</h3>
<p>æ£€ç´¢å¢å¼ºç”Ÿæˆï¼ˆRAGï¼‰æ˜¯å¤§æ¨¡å‹è½åœ°çš„æ ¸å¿ƒåœºæ™¯ï¼Œå…¶æ ¸å¿ƒéœ€æ±‚æ˜¯â€œå¿«é€Ÿæ£€ç´¢é«˜è´¨é‡ä¸Šä¸‹æ–‡å¹¶è¾“å…¥å¤§æ¨¡å‹ï¼Œæå‡å›ç­”å‡†ç¡®æ€§â€ï¼ˆé¿å…å¤§æ¨¡å‹â€œä¸€æœ¬æ­£ç»åœ°èƒ¡è¯´å…«é“â€ï¼‰ã€‚openGauss é’ˆå¯¹ RAG åœºæ™¯çš„ä¸‰å¤§ç—›ç‚¹ï¼ˆå‘é‡æ£€ç´¢æ•ˆç‡ä½ã€æ•°æ®æ›´æ–°ä¸åŠæ—¶ã€å¤šæºæ•°æ®éš¾æ•´åˆï¼‰è¿›è¡Œæ·±åº¦é€‚é…ï¼Œæˆä¸º RAG ç³»ç»Ÿçš„ç†æƒ³æ•°æ®åº•åº§ã€‚</p>
<h2 data-id="heading-6">ä¸‰ã€å®æµ‹ä½“éªŒ</h2>
<h3 data-id="heading-7">3.1 å®‰è£…openGauss</h3>
<p>ç”±äºå›½å†…é•œåƒæºè®¿é—®åŸå› ï¼Œç›´æ¥æ‹‰å–ä¸‹è½½çš„è¯ç‰¹åˆ«å®¹æ˜“å‡ºç°æ‹‰å–å¤±è´¥ç­‰æç¤ºï¼Œæ‰€ä»¥æˆ‘ä»¬é€‰æ‹©é€šè¿‡ wget å‘½ä»¤ä¸‹è½½ openGauss çš„ Docker é•œåƒåŒ…ï¼Œå¹¶åŠ è½½åˆ°dockerå¯åŠ¨ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/17871bc337a747d99f596a1ed0597963~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6bi96Iq35ZKV:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763743147&amp;x-signature=WAwht04apgdH%2F6UjXvhsG9iHcw0%3D" alt="" loading="lazy"/></p>
<ul>
<li>ä¸‹è½½é•œåƒåŒ…ï¼ˆæˆ‘ä»¬æœ¬æ¬¡ç”¨çš„æ˜¯Centos 7.6ç‰ˆæœ¬çš„æ‰€ä»¥åœ¨ä¸‹è½½çš„æ—¶å€™è¦æ³¨æ„ä¸€ç‚¹è¦é€‰æ‹©CentOS7-x86_64æ¶æ„ä¸‹çš„å®‰è£…åŒ… ï¼‰</li>
</ul>
<pre><code class="hljs language-plain" lang="plain">wget https://openGauss.obs.cn-south-1.myhuaweicloud.com/7.0.0-RC2/openEuler22.03/x86/openGauss-Docker-7.0.0-RC2-x86_64.tar
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cd2f808b46f44f1da3f9fa7712c5cb12~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6bi96Iq35ZKV:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763743147&amp;x-signature=cWuZupzG%2B2pk0VRavgqYLnHY8Ww%3D" alt="" loading="lazy"/></p>
<ul>
<li>åŠ è½½é•œåƒ</li>
</ul>
<pre><code class="hljs language-plain" lang="plain">docker load -i openGauss-Docker-7.0.0-RC2-x86_64.tar
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2a4440b3e7c045fc83ef775b200f979f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6bi96Iq35ZKV:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763743147&amp;x-signature=rRASH8mKzVzEi5wn7%2FKY5mo5USI%3D" alt="" loading="lazy"/></p>
<ul>
<li>éªŒè¯é•œåƒçŠ¶æ€</li>
</ul>
<pre><code class="hljs language-plain" lang="plain">docker images
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/97a6edb496d74591b27f9c672fd4a594~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6bi96Iq35ZKV:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763743147&amp;x-signature=e4S14o8oZscSkVa%2BtLqn0Vtivu4%3D" alt="" loading="lazy"/></p>
<ul>
<li>å¯åŠ¨å®¹å™¨ï¼Œä»ä¸Šé¢å¯ä»¥çœ‹åˆ°æˆ‘ä»¬çš„ä»“åº“åæ˜¯ openGaussï¼Œæ ‡ç­¾æ˜¯ 7.0.0-RC2ã€‚ç„¶åç›´æ¥ç”¨æœ¬åœ°é•œåƒå¯åŠ¨å°±OKäº†</li>
</ul>
<pre><code class="hljs language-plain" lang="plain">[root@hcss-ecs-d81a gugu]# # 
[root@hcss-ecs-d81a gugu]# docker run --name openGauss --privileged=true -d -e GS_PASSWORD=Gugu@123 -p 5432:5432 openGauss:7.0.0-RC2
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ccc0b93f0e9d4124a05239e42c9438ef~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6bi96Iq35ZKV:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763743147&amp;x-signature=jMYKT%2BMQWUu9vil4xfpZRApippE%3D" alt="" loading="lazy"/></p>
<ul>
<li>å‚çœ‹å®¹å™¨çŠ¶æ€</li>
</ul>
<pre><code class="hljs language-plain" lang="plain">docker ps | grep openGauss
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/411b79be55f3452089fb3792b64aadb2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6bi96Iq35ZKV:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763743147&amp;x-signature=fyX0LkJ10QgXtqaKG4GfcfiGFIA%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-8">3.2 gsql è¿æ¥æ•°æ®åº“</h3>
<p>æ•°æ®å¯ä»¥å¯åŠ¨ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥ç›´æ¥è¯•ç”¨å®˜æ–¹æä¾›çš„ gsql è¿æ¥æ•°æ®åº“ã€‚gsqlæ˜¯openGaussæä¾›åœ¨å‘½ä»¤è¡Œä¸‹è¿è¡Œçš„æ•°æ®åº“è¿æ¥å·¥å…·ï¼Œå¯ä»¥é€šè¿‡æ­¤å·¥å…·è¿æ¥æœåŠ¡å™¨å¹¶å¯¹å…¶è¿›è¡Œæ“ä½œå’Œç»´æŠ¤ï¼Œé™¤äº†å…·å¤‡æ“ä½œæ•°æ®åº“çš„åŸºæœ¬åŠŸèƒ½ï¼Œgsqlè¿˜æä¾›äº†è‹¥å¹²é«˜çº§ç‰¹æ€§ï¼Œä¾¿äºç”¨æˆ·ä½¿ç”¨ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f79e937b0c384744b7252d5bb55bba7d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6bi96Iq35ZKV:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763743147&amp;x-signature=fyhGX0BSThu1y8Zqn5biFxeo8Xg%3D" alt="" loading="lazy"/></p>
<ul>
<li>è¿›å…¥å®¹å™¨</li>
</ul>
<pre><code class="hljs language-plain" lang="plain">docker exec -it openGauss bash
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f1577fec9acb4c96ad1147067cef0280~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6bi96Iq35ZKV:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763743147&amp;x-signature=rSIiPw%2FSR5MGeNjH2%2F2RAbijLIc%3D" alt="" loading="lazy"/></p>
<pre><code class="hljs language-plain" lang="plain">gsql -d postgres -U omm -p 5432 -r
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e0c2b89772e149d6abda2d965dcc4823~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6bi96Iq35ZKV:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763743147&amp;x-signature=LYV1Y41POONNrHwMJyEyzARQ6IE%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-9">3.3 SQLå…¼å®¹æ€§æµ‹è¯•</h3>
<p>ä»¥ä¸ŠopenGausså°±å·²ç»å®‰è£…è¿æ¥å¥½äº†ï¼Œé‚£ä¹ˆæ¥ä¸‹æ¥æˆ‘ä»¬å°±æ¥æµ‹è¯•ä¸€ä¸‹SQLè¯­å¥çš„å…¼å®¹æ€§ã€‚éªŒè¯ä¸€ä¸‹å¢åˆ æ”¹æŸ¥ è¿™äº›æ“ä½œã€‚</p>
<ol>
<li>é¦–å…ˆæˆ‘ä»¬å…ˆåˆ›å»ºä¸€ä¸ªæµ‹è¯•æ•°æ®åº“åœ¨ä½¿ç”¨ \l å‘½ä»¤æŸ¥çœ‹ä¸€ä¸‹æ•°æ®åº“åˆ—è¡¨ã€‚</li>
</ol>
<pre><code class="hljs language-plain" lang="plain">-- åˆ›å»ºæ–°æ•°æ®åº“ test_db
CREATE DATABASE test_db;

-- æŸ¥çœ‹æ‰€æœ‰æ•°æ®åº“ï¼ˆéªŒè¯åˆ›å»ºç»“æœï¼‰
\l
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0affc51d84ae4d7587552a53c531f71c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6bi96Iq35ZKV:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763743147&amp;x-signature=LLWEi2J%2BDKnF24hdlIvwCGUJ%2FBk%3D" alt="" loading="lazy"/></p>
<ol>
<li>åˆ‡æ¢åˆ° test_db æ•°æ®åº“ï¼Œåˆ›å»ºä¸€ä¸ªé›‡å‘˜è¡¨</li>
</ol>
<pre><code class="hljs language-plain" lang="plain">-- åˆ‡æ¢åˆ° test_db æ•°æ®åº“
\c test_db

-- åˆ›å»ºé›‡å‘˜è¡¨ï¼ˆåŒ…å«å¸¸ç”¨å­—æ®µï¼‰
CREATE TABLE employees (
    emp_id SERIAL PRIMARY KEY,  -- è‡ªå¢ä¸»é”®ï¼ˆé›‡å‘˜IDï¼‰
    first_name VARCHAR(50) NOT NULL,  -- å
    last_name VARCHAR(50) NOT NULL,   -- å§“
    gender CHAR(1) CHECK (gender IN ('M', 'F', 'O')),  -- æ€§åˆ«ï¼ˆMç”·/Få¥³/Oå…¶ä»–ï¼‰
    birth_date DATE NOT NULL,  -- å‡ºç”Ÿæ—¥æœŸ
    hire_date DATE NOT NULL,   -- å…¥èŒæ—¥æœŸ
    department VARCHAR(50) NOT NULL,  -- éƒ¨é—¨ï¼ˆå¦‚æŠ€æœ¯éƒ¨ã€å¸‚åœºéƒ¨ï¼‰
    position VARCHAR(50) NOT NULL,    -- èŒä½ï¼ˆå¦‚å¼€å‘å·¥ç¨‹å¸ˆã€ç»ç†ï¼‰
    salary NUMERIC(10, 2) NOT NULL,   -- è–ªèµ„ï¼ˆç²¾ç¡®åˆ°åˆ†ï¼‰
    email VARCHAR(100) UNIQUE NOT NULL,  -- é‚®ç®±ï¼ˆå”¯ä¸€ï¼‰
    phone VARCHAR(20),  -- ç”µè¯
    address TEXT,       -- åœ°å€
    is_active BOOLEAN DEFAULT TRUE  -- æ˜¯å¦åœ¨èŒï¼ˆé»˜è®¤åœ¨èŒï¼‰
);
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/51bbf00af5ed4cb2a16251764f3edab6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6bi96Iq35ZKV:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763743147&amp;x-signature=zB%2BP9geqSM8haWFEFn4reiHdvdI%3D" alt="" loading="lazy"/></p>
<ol>
<li>ä¸‹é¢æˆ‘ä»¬æ¥æµ‹è¯• openGauss å¯¹ PL/pgSQL è¯­æ³•çš„å…¼å®¹æ€§åŠæ‰§è¡Œæ•ˆç‡ã€‚ é€šè¿‡è¿è¡Œ PL/pgSQL ä»£ç æ‰¹é‡æ’å…¥ 10 ä¸‡æ¡æµ‹è¯•æ•°æ®ï¼Œç›´è§‚éªŒè¯å…¶è¯­æ³•æ”¯æŒæƒ…å†µä¸æ•°æ®æ’å…¥æ€§èƒ½ã€‚</li>
</ol>
<pre><code class="hljs language-plain" lang="plain">-- æ‰¹é‡æ’å…¥ 1000 æ¡é›‡å‘˜æ•°æ®ï¼ˆä½¿ç”¨ PL/pgSQL å¾ªç¯ï¼‰
DO $$
DECLARE
    i INT := 1;
    depts TEXT[] := ARRAY['æŠ€æœ¯éƒ¨', 'å¸‚åœºéƒ¨', 'è´¢åŠ¡éƒ¨', 'äººåŠ›èµ„æºéƒ¨', 'é”€å”®éƒ¨'];
    positions TEXT[] := ARRAY['å¼€å‘å·¥ç¨‹å¸ˆ', 'äº§å“ç»ç†', 'æµ‹è¯•å·¥ç¨‹å¸ˆ', 'è´¢åŠ¡ä¸“å‘˜', 'é”€å”®ä»£è¡¨', 'HRä¸“å‘˜', 'éƒ¨é—¨ç»ç†'];
    genders CHAR[] := ARRAY['M', 'F', 'O'];
BEGIN
    WHILE i &lt;= 100000 LOOP
        INSERT INTO employees (
            first_name, last_name, gender, birth_date, hire_date,
            department, position, salary, email, phone, address, is_active
        ) VALUES (
            'å‘˜å·¥' || i,  -- åï¼ˆå¦‚ å‘˜å·¥1ã€å‘˜å·¥2...ï¼‰
            'æµ‹è¯•',       -- å§“
            genders[floor(random() * array_length(genders, 1)) + 1],  -- éšæœºæ€§åˆ«
            CURRENT_DATE - (30 + floor(random() * 30)::INT) * 365,  -- 30-60å²éšæœºç”Ÿæ—¥
            CURRENT_DATE - (1 + floor(random() * 10)::INT) * 365,   -- 1-10å¹´éšæœºå…¥èŒæ—¶é—´
            depts[floor(random() * array_length(depts, 1)) + 1],    -- éšæœºéƒ¨é—¨
            positions[floor(random() * array_length(positions, 1)) + 1],  -- éšæœºèŒä½
            5000 + floor(random() * 25000)::NUMERIC(10,2),  -- 5000-30000éšæœºè–ªèµ„
            'emp' || i || '@test.com',  -- é‚®ç®±ï¼ˆå”¯ä¸€ï¼‰
            '138' || lpad(floor(random() * 100000000)::TEXT, 8, '0'),  -- éšæœºæ‰‹æœºå·
            'æµ‹è¯•åœ°å€' || i,  -- åœ°å€
            CASE WHEN random() &gt; 0.1 THEN TRUE ELSE FALSE END  -- 90%æ¦‚ç‡åœ¨èŒ
        );
        i := i + 1;
    END LOOP;
END $$;
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/20d97b10da33450480db69de6b8d584f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6bi96Iq35ZKV:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763743147&amp;x-signature=9BcDXuWQrF4QKNZwp%2F2bVPAV4%2FU%3D" alt="" loading="lazy"/></p>
<p>ä»æµ‹è¯•ç»“æœå¯çŸ¥ï¼Œ100000 æ¡é›‡å‘˜æ•°æ®å·²æˆåŠŸå†™å…¥ employees è¡¨ï¼Œæ“ä½œå®Œå…¨ç¬¦åˆé¢„æœŸã€‚æ•°æ®åœ¨æ’å…¥è¿‡ç¨‹å“åº”æå¿«ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†è¿›ä¸€æ­¥éªŒè¯ openGauss å¯¹ SQL è¯­å¥å…¶ä»–åŠŸèƒ½çš„æ”¯æŒè¡¨ç°ã€‚</p>
<ol>
<li><strong>åŸºç¡€æ•°æ®ç±»å‹ä¸è¡¨æ“ä½œï¼ˆDDLï¼‰</strong></li>
</ol>
<p>åŸºç¡€æ•°æ®ç±»å‹ä¸è¡¨æ“ä½œæˆ‘ä»¬æµ‹è¯•ä¸»è¦å›´ç»•ä»¥ä¸‹å†…å®¹å±•å¼€ï¼šåˆ›å»ºåŒ…å«å¤šç§æ•°æ®ç±»å‹çš„è¡¨ä»¥éªŒè¯æ•°æ®ç±»å‹å…¼å®¹æ€§ï¼ŒæŸ¥çœ‹è¡¨ç»“æ„ä»¥éªŒè¯å…ƒæ•°æ®æŸ¥è¯¢å…¼å®¹æ€§ï¼Œä»¥åŠä¿®æ”¹è¡¨ç»“æ„ä»¥éªŒè¯ ALTER è¯­æ³•å…¼å®¹æ€§ã€‚</p>
<pre><code class="hljs language-plain" lang="plain">CREATE TABLE test_data_types (
    id INT PRIMARY KEY,
    name VARCHAR(50) NOT NULL,
    birth_date DATE,
    salary NUMERIC(10,2),
    is_active BOOLEAN DEFAULT TRUE,
    create_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    bio TEXT,
    tags VARCHAR(20)[]  
    );
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fcffed82a0024ee3a3c6a0307ad9312b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6bi96Iq35ZKV:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763743147&amp;x-signature=wWaSu4DWtHxkRWRFJ%2B%2FMj6o%2FLtQ%3D" alt="" loading="lazy"/></p>
<pre><code class="hljs language-plain" lang="plain">-- æŸ¥è¯¢ information_schema ç³»ç»Ÿè¡¨ï¼ˆæ ‡å‡† SQL å…¼å®¹æ–¹å¼ï¼‰
SELECT 
    column_name, 
    data_type, 
    is_nullable, 
    column_default 
FROM information_schema.columns 
WHERE table_name = 'test_data_types';
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a01f4116598f474491b99b6c4741fd11~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6bi96Iq35ZKV:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763743147&amp;x-signature=ETsuQWhI3JysiO1C6BlMHaKw838%3D" alt="" loading="lazy"/></p>
<pre><code class="hljs language-plain" lang="plain">-- ä¿®æ”¹è¡¨ç»“æ„ï¼ˆéªŒè¯ALTERè¯­æ³•å…¼å®¹æ€§ï¼‰
ALTER TABLE test_data_types 
    ADD COLUMN dept_id INT,
    ALTER COLUMN salary SET DEFAULT 0.00;
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/080651e9e2964e4cb8db2697f1f1e5b9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6bi96Iq35ZKV:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763743147&amp;x-signature=pvVAIjShzh7fSMVGTL%2By1PHDpg4%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-10">3.4 æµ‹è¯•æ€»ç»“</h3>
<p>ä»ä¸Šè¿°æµ‹è¯•å¯çœ‹å‡ºï¼ŒopenGauss ä½œä¸ºé«˜æ€§èƒ½ã€é«˜å¯é æ€§çš„å¼€æºå…³ç³»å‹æ•°æ®åº“ï¼Œæ—¢ç»§æ‰¿äº† PostgreSQL çš„å¼ºå¤§åŠŸèƒ½ï¼Œåˆåœ¨è¯­æ³•ä¸åè®®å±‚é¢è¿›è¡Œäº†é’ˆå¯¹æ€§ä¼˜åŒ–å¢å¼ºï¼Œå°¤å…¶æå‡äº†å¯¹ MySQL è¯­æ³•çš„å…¼å®¹æ€§ã€‚è¿™ç§è‰¯å¥½çš„å…¼å®¹æ€§ï¼Œè®©æˆ‘ä»¬èƒ½ä» MySQL åˆ° openGauss çš„è¿ç§»è¿‡ç¨‹æ›´åŠ ä¾¿æ·é¡ºç•…ã€‚</p>
<h2 data-id="heading-11">å››ã€å¼€æ”¾ä¸ç¹è£çš„æŠ€æœ¯ç”Ÿæ€</h2>
<h3 data-id="heading-12">4.1 ç”Ÿæ€å»ºè®¾æ–¹é¢</h3>
<p>åœ¨ç”Ÿæ€å»ºè®¾è¿™æ–¹é¢ï¼ŒopenGaussæ·±çŸ¥ï¼Œç°ä»£æ•°æ®åº“çš„ç«äº‰ä¸ä»…æ˜¯æŠ€æœ¯çš„ç«äº‰ï¼Œè¿›å…¥ â€œç”Ÿæ€å†³èƒœâ€ çš„æ–°é˜¶æ®µã€‚å› æ­¤ï¼Œå®ƒä»ç”Ÿæ€é¡¶å±‚è®¾è®¡å‡ºå‘ï¼Œå§‹ç»ˆä»¥ â€œå…¨é¢å¼€æ”¾ã€ååŒå…±ç”Ÿâ€ ä¸ºæ ¸å¿ƒï¼Œæ„å»ºè¦†ç›–ä¼™ä¼´ã€å¼€å‘è€…ä¸ç”¨æˆ·çš„æŠ€æœ¯ç”Ÿæ€ä½“ç³»ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/af33afdf03484d7997df8417fac9fd25~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6bi96Iq35ZKV:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763743147&amp;x-signature=c9aNg6TgJrGfaWI7lL10Xi%2FoWSQ%3D" alt="" loading="lazy"/></p>
<p>æ—©åœ¨ 2019 å¹´å®£å¸ƒå¼€æºä¹‹åˆï¼ŒopenGauss å°±åŒæ­¥å¯åŠ¨å¼€æºç¤¾åŒºè¿è¥ï¼Œé€šè¿‡æ–‡æ¡£å…±å»ºã€æŠ€æœ¯ç ”è®¨ã€è´¡çŒ®è€…æ¿€åŠ±ç­‰æœºåˆ¶å¸å¼•å…¨çƒå‚ä¸è€…ã€‚ç»è¿‡å¤šå¹´æ²‰æ·€ï¼Œå…¶ç”Ÿæ€è§„æ¨¡æŒç»­å£®å¤§ï¼šç›®å‰å·²æ±‡èš 820 å®¶ä¼ä¸šæˆå‘˜ã€7500 åæ´»è·ƒå¼€å‘è€…ï¼Œå…¨çƒç´¯è®¡ä¸‹è½½é‡çªç ´ 350 ä¸‡æ¬¡ï¼Œæ— è®ºæ˜¯ä¼ä¸šçº§ä¼™ä¼´çš„æ·±åº¦å‚ä¸ï¼Œè¿˜æ˜¯ä¸ªäººå¼€å‘è€…çš„ä»£ç è´¡çŒ®ï¼Œéƒ½å‘ˆç°å‡ºæ¸…æ™°çš„å¢é•¿è¶‹åŠ¿ï¼Œç”Ÿæ€æ´»åŠ›è‚‰çœ¼å¯è§ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b2be4579f0814dce8e669b4b01d884bc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6bi96Iq35ZKV:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763743147&amp;x-signature=k1KJmkxwvS72jxOS%2F5r6uT%2BF94A%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-13">4.2 <strong>ä¼™ä¼´ä¸äº§å“</strong></h3>
<p>ä¼™ä¼´ä½“ç³»æ–¹é¢ï¼ŒopenGauss ä¸ä¾èµ–å•ä¸€å‚å•†ï¼Œè€Œæ˜¯è”åˆä¸Šä¸‹æ¸¸ä¼™ä¼´æ‰“é€ â€œç¡¬ä»¶+è½¯ä»¶+æœåŠ¡â€å…¨æ ˆç”Ÿæ€ï¼Œè§£å†³ä¼ä¸šâ€œé€‚é…éš¾ã€è½åœ°éš¾â€é—®é¢˜ã€‚ä»¥ç¡¬ä»¶é€‚é…ä¸ºä¾‹ï¼Œå…¶ä¸é²²é¹æœåŠ¡å™¨çš„ååŒä¸ä»…åœç•™åœ¨åŸºç¡€å…¼å®¹æ€§å±‚é¢ï¼Œæ›´æ·±å…¥æŠ€æœ¯å†…æ ¸åšè”åˆä¼˜åŒ– â€”â€” é€šè¿‡é›†æˆ RDMA é«˜é€Ÿç½‘ç»œæŠ€æœ¯ï¼Œç›´æ¥åŠ é€Ÿæ•°æ®åº“ WALï¼ˆé¢„å†™æ—¥å¿—ï¼‰çš„è·¨èŠ‚ç‚¹ä¼ è¾“æ•ˆç‡ï¼Œæˆ‘ä»¬åœ¨è¿›è¡Œé²²é¹æœåŠ¡å™¨è¿›è¡Œæµ‹è¯•ä¹Ÿæ˜æ˜¾çš„æ„Ÿå—åˆ°ï¼Œæ•°æ®åŒæ­¥é€Ÿåº¦ç¡®å®æ¯”æ™®é€šæœåŠ¡å™¨å¿«ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/962c207828624707b79f8b8182c0d691~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6bi96Iq35ZKV:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763743147&amp;x-signature=8chjb0sLrSgFzWOlL5YXUVd7yL8%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-14">4.3 <strong>è¿ç§»ä¸ä¸°å¯Œçš„å·¥å…·ç”Ÿæ€</strong></h3>
<p>ä¼ä¸šæ›´æ¢æ•°æ®åº“æ—¶ï¼Œæœ€æ‹…å¿ƒâ€œæ•°æ®è¿ç§»éš¾ã€ä»£ç é€‚é…ç¹ã€å·¥å…·ä¸å…¼å®¹â€ï¼Œè€ŒopenGauss åˆ™ç»™æˆ‘ä»¬æä¾›å®Œå–„çš„è¿ç§»å·¥å…·é“¾ä¸å…¼å®¹æ–¹æ¡ˆï¼Œè§£å†³è¿ç§»ç—›ç‚¹ã€‚</p>
<ul>
<li><strong>è‡ªåŠ¨åŒ–è¿ç§»å·¥å…·</strong>ï¼šæ¨å‡º DataKit è¿ç§»å·¥å…·ï¼Œæ”¯æŒä» MySQLã€Oracleã€PostgreSQL ç­‰æ•°æ®åº“å‘ openGauss è¿ç§»ï¼Œå®ç°â€œä¸‰æ­¥å®Œæˆè¿ç§»â€</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/410bc8696296428dab117f8357576536~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6bi96Iq35ZKV:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763743147&amp;x-signature=mvI8XyKvDJfQjCz%2FDwg9IAW%2F0Y8%3D" alt="" loading="lazy"/></p>
<ul>
<li><strong>ä¸°å¯Œçš„å·¥å…·é“¾</strong>ï¼šæä¾›äº†<strong>openGauss-OM</strong>ï¼šæä¾›äº†ä¸€é”®å¼éƒ¨ç½²ã€å‡çº§ã€ç›‘æ§å’Œç®¡ç†çš„è¿ç»´å·¥å…·ã€‚<strong>Data Studio</strong>ï¼šå›¾å½¢åŒ–çš„æ•°æ®åº“ç®¡ç†å¼€å‘å·¥å…·ã€‚pg_chameleonï¼šMySQLåˆ°openGaussæ•°æ®è¿ç§»å·¥å…·ç­‰ç­‰ã€‚</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fcf53d5b14ef4ab4ac8695362d578f56~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6bi96Iq35ZKV:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763743147&amp;x-signature=%2BPJDiD%2BWRCMOuy%2BjxKqdLDdSJo0%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-15">æ€»ç»“</h2>
<p>ä»ä»¥ä¸Šåˆ†æå®æµ‹æˆ‘ä»¬ä¸éš¾çœ‹å‡ºï¼ŒopenGauss å‡­å€Ÿé«˜å¯ç”¨ã€é«˜æ€§èƒ½ã€é«˜å®‰å…¨ã€æ˜“è¿ç»´ï¼ˆåŸºäºAIçš„æ™ºèƒ½å‚æ•°è°ƒä¼˜å’Œç´¢å¼•æ¨èï¼Œæä¾›AIè‡ªåŠ¨å‚æ•°æ¨èï¼‰ç­‰å·²ç»æˆä¸ºæˆä¸ºä¼ä¸šæ•°å­—åŒ–è½¬å‹çš„æ ¸å¿ƒä¼˜é€‰ã€‚åœ¨æŠ€æœ¯ä¸Šï¼ŒopenGauss ç‡å…ˆå®ç° AI ä¸æ•°æ®åº“çš„æ·±åº¦èåˆ â€”â€”DBMind æ¨¡å—çš„ AI4DB èƒ½åŠ›é™ä½è¿ç»´æˆæœ¬ã€æå‡ç³»ç»Ÿç¨³å®šæ€§ï¼ŒDB4AI èƒ½åŠ›ç®€åŒ– AI ä»»åŠ¡è½åœ°ï¼›ç›®å‰ï¼Œå·²æœ‰ä¼—å¤šçŸ¥åä¼ä¸šåŸºäº openGauss æ­å»ºäº†ä¸“å±æ•°æ®åº“ç³»ç»Ÿã€‚æ‰€ä»¥å¯¹äºä¼ä¸šæœ‰æ™ºèƒ½åŒ–æ•°æ®å¤„ç†éœ€æ±‚openGaussæ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Spring AIä½¿ç”¨çŸ¥è¯†åº“å¢å¼ºå¯¹è¯åŠŸèƒ½]]></title>    <link>https://juejin.cn/post/7572455881029287945</link>    <guid>https://juejin.cn/post/7572455881029287945</guid>    <pubDate>2025-11-15T01:25:00.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572455881029287945" data-draft-id="7572466174224023578" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Spring AIä½¿ç”¨çŸ¥è¯†åº“å¢å¼ºå¯¹è¯åŠŸèƒ½"/> <meta itemprop="keywords" content="Java"/> <meta itemprop="datePublished" content="2025-11-15T01:25:00.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="changelzj"/> <meta itemprop="url" content="https://juejin.cn/user/1943592289445358"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Spring AIä½¿ç”¨çŸ¥è¯†åº“å¢å¼ºå¯¹è¯åŠŸèƒ½
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1943592289445358/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    changelzj
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-15T01:25:00.000Z" title="Sat Nov 15 2025 01:25:00 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨å…¶ä»–åœ°æ–¹æŸ¥çœ‹æ–‡ç« ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.liuzijian.com%2Fpost%2Fspring-ai%2F2025%2F11%2F01%2Fspring-ai-rag%2F" target="_blank" title="https://blog.liuzijian.com/post/spring-ai/2025/11/01/spring-ai-rag/" ref="nofollow noopener noreferrer">blog.liuzijian.com/post/springâ€¦</a></p>
<h2 data-id="heading-0">1.å¼•è¨€</h2>
<p>ä¹‹å‰æåˆ°è¿‡ï¼Œå¤§æ¨¡å‹çš„è®­ç»ƒè¯­æ–™åº“å’Œç°å®ä¸–ç•Œç›¸æ¯”ï¼Œå¾€å¾€æ»åï¼Œæ¯”å¦‚å½“ä¸‹ä¸€äº›çƒ­é—¨çš„è¯é¢˜å¤§æ¨¡å‹é€šå¸¸ä¼šä¸äº†è§£ï¼Œä¸€ç§è§£å†³è¿™ç§é—®é¢˜çš„æ–¹å¼æ˜¯ï¼Œåœ¨å‘æ¶ˆæ¯æ—¶å°†å®æ—¶çš„ç›¸å…³çš„æ•°æ®ä¸€å¹¶å‘é€ç»™å®ƒï¼Œå¯¹å¤§æ¨¡å‹çš„çŸ¥è¯†å‚¨å¤‡è¿›è¡Œè¡¥å……ã€‚</p>
<p>ä½†æ˜¯ï¼Œå®æ—¶çš„æ•°æ®æ˜¯æµ·é‡çš„ï¼Œä¸èƒ½å°†å†…å®¹æ•´ä¸ªå…¨éƒ¨å‘é€å¤§æ¨¡å‹ï¼Œè€Œä¸”Tokençš„é™åˆ¶ä¹Ÿä¸å…è®¸è¿™æ ·åšï¼Œæˆ‘ä»¬åªéœ€è¦æ£€ç´¢å‡ºå’Œé—®é¢˜ç›¸å…³çš„ç‰‡æ®µç„¶åæ‹†åˆ†å‡ºæ¥å‘é€å³å¯ã€‚</p>
<p>å¦‚ä½•æ£€ç´¢æ•°æ®å‘¢ï¼Ÿç”¨ESï¼Ÿç­”æ¡ˆæ˜¯å¦å®šçš„ï¼Œå› ä¸ºESæ˜¯ä¸€ç§å…¨æ–‡æ£€ç´¢ï¼Œä¸èƒ½å®Œç¾å®ç°ç›¸å…³æ€§æ£€ç´¢ï¼Œä¾‹å¦‚æˆ‘ä»¬æƒ³è¦å’Œå¤§æ¨¡å‹èŠä¸€ä¸‹æœ€è¿‘æœ‰å“ªäº›â€œå›½é™…äº‰ç«¯â€ä¹‹ç±»çš„è¯é¢˜ï¼Œâ€œæŸ¬æ³°è¾¹å¢ƒå†²çªâ€è‚¯å®šç®—ä¸€ä»¶ï¼Œä½†æ˜¯å¦‚æœä»¥â€œå›½é™…äº‰ç«¯â€ â€œäº‰ç«¯â€ä¸ºå…³é”®è¯ç®€å•çš„å…¨æ–‡æ£€ç´¢ï¼Œæ— æ³•å°†è¿™ä¸ªè¯é¢˜æœ‰å…³çš„å†…å®¹å…¨éƒ¨æŸ¥è¯¢å‘½ä¸­ï¼Œå› ä¸ºè¿™ç§åœºæ™¯çš„æ£€ç´¢è¦æ±‚çš„ä¸æ˜¯æ–‡å­—çš„åŒ¹é…è€Œæ˜¯è¯­ä¹‰çš„åŒ¹é…ï¼Œäºæ˜¯è¿™é‡Œå°±å¼•å…¥äº†ä¸€ä¸ªæ¦‚å¿µï¼šå‘é‡ç›¸ä¼¼åº¦ã€‚</p>
<h2 data-id="heading-1">2.å‘é‡ç›¸ä¼¼åº¦</h2>
<p>é¦–å…ˆç†è§£å‘é‡ï¼Œå‘é‡å°±æ˜¯æ•°å­¦ä¸­ä»£è¡¨ä¸€ä¸ªæ—¢æœ‰å¤§å°åˆæœ‰æ–¹å‘çš„é‡ï¼Œç‰©ç†ä¸Šä¹Ÿç§°ä¸ºçŸ¢é‡ï¼Œä¾‹å¦‚å¹³é¢ç›´è§’åæ ‡ç³»ä¸Šä»(0, 0)ç‚¹åˆ°ä»»æ„ä¸€ç‚¹æ„æˆçš„çº¿æ®µå°±æ˜¯ä¸€ä¸ªå‘é‡ï¼Œå‘é‡ç›¸ä¼¼åº¦æŒ‡çš„å°±æ˜¯ä¸¤ä¸ªå‘é‡æ˜¯å¦ç›¸ä¼¼ï¼Œé€šè¿‡æ¬§æ°è·ç¦»å’Œä½™å¼¦è·ç¦»éƒ½å¯åˆ¤æ–­ç›¸ä¼¼åº¦ï¼Œæ¬§æ°è·ç¦»è¶Šå°ï¼Œç›¸ä¼¼åº¦è¶Šé«˜ï¼Œä½™å¼¦è·ç¦»è¶Šå¤§ï¼Œç›¸ä¼¼åº¦è¶Šé«˜</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.liuzijian.com%2Fimg%2Fspring_ai%2Fvector.png" target="_blank" title="https://blog.liuzijian.com/img/spring_ai/vector.png" ref="nofollow noopener noreferrer"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/040b926767da4751a6ea6a548c125925~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgY2hhbmdlbHpq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763774699&amp;x-signature=yY0Rb9KmYB9ZmJZhxBU%2F5k632lY%3D" alt="" loading="lazy"/></a></p>
<p>è®¡ç®—æœºä¸­çš„æ•°æ®éƒ½æ˜¯ä»¥æ•°å­—çš„å½¢å¼è¿›è¡Œå­˜å‚¨ï¼Œå¦‚æœæ ¹æ®å†…å®¹å«ä¹‰å°†æ–‡å­—æ•°æ®è½¬æ¢æˆç©ºé—´ä¸­çš„åæ ‡ï¼Œå°±æˆåŠŸæŠŠæ–‡å­—ä¿¡æ¯å‘é‡åŒ–äº†ï¼Œå«ä¹‰ç›¸ä¼¼çš„æ–‡æœ¬ï¼Œè½¬æ¢ä¸ºç‚¹çš„è·ç¦»è¶Šè¿‘ï¼Œé€šè¿‡å¯¹æ¯”å‘é‡ç›¸ä¼¼åº¦å³å¯è·å¾—è¯­ä¹‰ç›¸è¿‘çš„å†…å®¹ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.liuzijian.com%2Fimg%2Fspring_ai%2Frag%2Fenb.png" target="_blank" title="https://blog.liuzijian.com/img/spring_ai/rag/enb.png" ref="nofollow noopener noreferrer"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/536314a1df5d441397c6668923e4cb3d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgY2hhbmdlbHpq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763774699&amp;x-signature=umQrT3dXmrMT2%2BFVXTatkMKkKxA%3D" alt="" loading="lazy"/></a></p>
<h2 data-id="heading-2">3.åµŒå…¥ï¼ˆEmbeddingï¼‰æ¨¡å‹</h2>
<p>æ ¹æ®å†…å®¹è½¬æ¢ä¸ºå‘é‡çš„å·¥ä½œéœ€è¦äº¤ç”±æ”¯æŒæ–‡æœ¬çš„åµŒå…¥æ¨¡å‹æ¥å®Œæˆ</p>
<blockquote>
<p>åµŒå…¥ï¼ˆEmbeddingï¼‰æ˜¯æ–‡æœ¬ã€å›¾åƒæˆ–è§†é¢‘çš„æ•°å€¼è¡¨ç¤ºï¼Œèƒ½å¤Ÿæ•æ‰è¾“å…¥ä¹‹é—´çš„å…³ç³»ï¼ŒEmbedding é€šè¿‡å°†æ–‡æœ¬ã€å›¾åƒå’Œè§†é¢‘è½¬æ¢ä¸ºç§°ä¸ºå‘é‡ï¼ˆVectorï¼‰çš„æµ®ç‚¹æ•°æ•°ç»„æ¥å·¥ä½œã€‚è¿™äº›å‘é‡æ—¨åœ¨æ•æ‰æ–‡æœ¬ã€å›¾åƒå’Œè§†é¢‘çš„å«ä¹‰ï¼ŒEmbedding æ•°ç»„çš„é•¿åº¦ç§°ä¸ºå‘é‡çš„ç»´åº¦ã€‚é€šè¿‡è®¡ç®—ä¸¤ä¸ªæ–‡æœ¬ç‰‡æ®µçš„å‘é‡è¡¨ç¤ºä¹‹é—´çš„æ•°å€¼è·ç¦»ï¼Œåº”ç”¨ç¨‹åºå¯ä»¥ç¡®å®šç”¨äºç”ŸæˆåµŒå…¥å‘é‡çš„å¯¹è±¡ä¹‹é—´çš„ç›¸ä¼¼æ€§ã€‚</p>
</blockquote>
<p>æˆ‘ç”¨è¿‡å¸¸è§çš„æ”¯æŒæ–‡æœ¬çš„åµŒå…¥æ¨¡å‹æœ‰ï¼š</p>
<ul>
<li>Zæ™ºè°±embedding-3ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.bigmodel.cn%2Fcn%2Fguide%2Fmodels%2Fembedding%2Fembedding-3" target="_blank" title="https://docs.bigmodel.cn/cn/guide/models/embedding/embedding-3" ref="nofollow noopener noreferrer">docs.bigmodel.cn/cn/guide/moâ€¦</a></li>
<li>é˜¿é‡Œäº‘é€šä¹‰åƒé—®text-embedding-v4ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fbailian.console.aliyun.com%2F%3Ftab%3Dmodel%23%2Fmodel-market%2Fdetail%2Ftext-embedding-v4" target="_blank" title="https://bailian.console.aliyun.com/?tab=model#/model-market/detail/text-embedding-v4" ref="nofollow noopener noreferrer">bailian.console.aliyun.com/?tab=model#â€¦</a></li>
</ul>
<p>å› ä¸ºDeepSeekæ²¡æœ‰æ–‡æœ¬åµŒå…¥æ¨¡å‹ï¼Œå› æ­¤è¿™é‡Œé‡‡ç”¨é˜¿é‡Œäº‘ç™¾ç‚¼å¹³å°é€šä¹‰åƒé—®text-embedding-v4å®ç°æ–‡æœ¬å‘é‡åŒ–ã€‚</p>
<p>åŸºäºjdk-21åˆ›å»ºspring-booté¡¹ç›®ï¼Œå¼•å…¥spring-bootä¾èµ–3.5.7ï¼Œspring-aiä¾èµ–1.0.3ï¼Œå› ä¸ºé˜¿é‡Œäº‘ç™¾ç‚¼å¹³å°å…¼å®¹äº†OpenAIçš„åè®®ï¼Œå› æ­¤è¿˜éœ€è¦å¼•å…¥spring-ai-starter-model-openaiå¯¹æ¥é˜¿é‡Œäº‘ç™¾ç‚¼å¹³å°</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"UTF-8"</span>?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">project</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://maven.apache.org/POM/4.0.0"</span>
         <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span>
         <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">modelVersion</span>&gt;</span>4.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">modelVersion</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.example<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-ai<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.0-SNAPSHOT<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">parent</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.5.7<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">parent</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">maven.compiler.source</span>&gt;</span>21<span class="hljs-tag">&lt;/<span class="hljs-name">maven.compiler.source</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">maven.compiler.target</span>&gt;</span>21<span class="hljs-tag">&lt;/<span class="hljs-name">maven.compiler.target</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="hljs-tag">&lt;/<span class="hljs-name">project.build.sourceEncoding</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">dependencyManagement</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.ai<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-ai-bom<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.0.3<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">type</span>&gt;</span>pom<span class="hljs-tag">&lt;/<span class="hljs-name">type</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>import<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependencyManagement</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>test<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.ai<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-ai-starter-model-openai<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- Lombok --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.projectlombok<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>lombok<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>


    <span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span>

<span class="hljs-tag">&lt;/<span class="hljs-name">project</span>&gt;</span>
</code></pre>
<p>application.ymlä¸­ï¼Œå°†é˜¿é‡Œäº‘ç™¾ç‚¼text-embedding-v4é…åœ¨openaiä¸‹ï¼Œè€Œä¸”URLåé¢çš„<code>/v1</code>å¿…é¡»å»æ‰ï¼Œå¦åˆ™æ— æ³•è¿æ¥æˆåŠŸ</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">spring:</span>
  <span class="hljs-attr">ai:</span>
    <span class="hljs-attr">openai:</span>
      <span class="hljs-attr">base-url:</span> <span class="hljs-string">https://dashscope.aliyuncs.com/compatible-mode</span>
      <span class="hljs-attr">api-key:</span> <span class="hljs-string">sk-</span>
      <span class="hljs-attr">embedding:</span>
        <span class="hljs-attr">options:</span>
          <span class="hljs-attr">model:</span> <span class="hljs-string">text-embedding-v4</span>
          <span class="hljs-attr">dimensions:</span> <span class="hljs-number">1024</span>

<span class="hljs-attr">logging:</span>
  <span class="hljs-attr">level:</span>
    <span class="hljs-attr">org.springframework.ai:</span> <span class="hljs-string">debug</span>
</code></pre>
<p>æµ‹è¯•ä¸€ä¸‹æ–‡æœ¬è½¬å‘é‡</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> org.example.test;

<span class="hljs-keyword">import</span> jakarta.annotation.Resource;
<span class="hljs-keyword">import</span> org.example.Main;
<span class="hljs-keyword">import</span> org.junit.jupiter.api.Test;
<span class="hljs-keyword">import</span> org.springframework.ai.openai.OpenAiEmbeddingModel;
<span class="hljs-keyword">import</span> org.springframework.boot.test.context.SpringBootTest;

<span class="hljs-meta">@SpringBootTest(classes = Main.class)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TestEmbedding</span> {

    <span class="hljs-meta">@Resource</span>
    <span class="hljs-keyword">private</span> OpenAiEmbeddingModel embeddingModel;


    <span class="hljs-meta">@Test</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test</span><span class="hljs-params">()</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">text</span> <span class="hljs-operator">=</span> <span class="hljs-string">"ä»Šå¤©æ˜¯10æœˆçš„æœ€åä¸€å¤©"</span>;

        <span class="hljs-type">float</span>[] embed = embeddingModel.embed(text);

        <span class="hljs-keyword">for</span> (<span class="hljs-type">float</span> v : embed) {
            System.out.print(v+<span class="hljs-string">" "</span>);
        }
    }
}
</code></pre>
<p>å¾—åˆ°System.out.printç»“æœï¼š</p>
<pre><code class="hljs language-diff" lang="diff"><span class="hljs-deletion">-0.03598024 -0.07856088 -0.023570947 -0.05446673 -0.016179034 0.028628573 0.006583633 -0.0021095797 0.012744679 0.011946459 0.0030872307 0.033162996 0.07281907 0.047088236 -0.02217574 0.017708397 -0.036033902 -0.061067134 -0.017466918 0.021961093 0.03321666 0.018821878 0.040943958 0.025355203 -0.036785167 0.00426276 -0.003155985 -0.031714126 0.0018714555 0.020539057 -0.0055271657 -0.028735897 -0.011765351 0.030587228 -0.04013903 0.0022303187 -0.04231233 0.07968778 0.0012048752 0.05672053 0.025288126 -0.015789986 -6.0411455E-4 0.004504238 0.009216415 0.044780776 0.012315384 -0.0024734738 0.009605463 0.008418196 0.01958656 -0.010101835 0.06536008 0.058115736 -0.015991218 -0.009887188 0.046041828 -0.0139789 -0.017909627 6.5064937E-4 -0.014891151 -0.014810658 -0.05677419 -0.07110189 0.007955363 -0.013220928 -0.04464662 -0.008082809 -0.016849807 -0.053930115 0.05731081 -0.006352216 -0.013173973 0.0062884926 -0.015025306 0.057632778 0.0033555396 0.067989506 -0.012536739 -0.103942916 -0.014448441 0.014770412 -0.0021229952 -0.013194096 0.0754485 0.030426243 -0.017627902 -0.0200561 0.019251173 0.057579115 0.01934508 -0.026696747 -0.0011495365 -0.043573387 -0.006570217 -0.031016523 -0.0570425 0.003638941 0.013871577 0.006305262 -6.152242E-5 0.06407219 -0.0048530395 -0.010195743 0.054627717 0.10490883 -0.04494176 0.019090187 0.003887127 -0.026066221 -0.044727113 -0.018419415 -0.0117452275 0.019559728 -0.011792182 0.061174456 -0.0058290134 0.025824744 0.0021162874 -0.0018446245 -0.012959326 0.024442952 -0.011282395 -0.044485636 0.009806694 -0.012825171 0.011161655 -0.015253368 0.05465455 0.012147691 0.016031465 -0.032599546 0.0017523933 -0.027743153 0.006915665 -0.0217062 0.01666199 0.027313858 -0.025033232 -0.0045780228 0.02766266 -0.0151728755 0.012496493 -0.013542898 -0.04247332 0.015937556 0.012147691 -0.06718458 -0.011926336 0.011322641 -0.008344411 -0.0033370934 -0.034933835 0.055432644 -0.018969448 -0.04005854 0.023101406 0.024939325 -0.025797913 0.018419415 0.03917312 0.017332762 0.03871699 0.010075004 0.031016523 -0.037080307 -0.025194218 -0.026844317 0.028896881 0.028789558 -0.010007926 0.042607475 -4.5151377E-4 0.0042862366 0.023839258 0.035175312 0.018687723 -0.029889625 0.0059933527 -0.008860906 0.04657845 -4.5235225E-4 0.0038904808 -0.014153301 -0.014971644 -0.014770412 0.0618184 -0.00426276 -0.05741813 -0.0048295623 2.8423988E-4 0.029835964 -7.8815775E-4 -0.004014574 0.015696079 -0.040300015 -0.038502347 0.043788034 0.0068888343 -0.013046526 0.015843648 0.03809988 0.0029027683 0.02067321 0.07303372 -0.019908529 0.0147435805 -0.0077407155 -0.013965485 -0.028574912 0.026978472 -0.014877736 0.012818464 -0.023409963 -0.038153544 0.031043354 -0.060852487 0.047893163 0.029513992 0.011181778 0.03364595 0.04220501 -0.021209829 -0.013884992 0.001418684 4.1105782E-4 -0.0018546862 0.047329713 -0.008941398 -0.00949814 0.0042795287 -0.026482102 -0.070565276 -0.02332947 -0.053983774 -0.0015067229 -0.0060268915 0.0076132687 -0.022309896 0.0060000606 0.013509359 0.022725774 8.9883525E-4 -0.009478017 -0.025355203 -0.018030366 -0.054332577 -0.060745165 -0.050361603 0.010282943 -0.024349043 -0.03235807 0.045880843 0.013952069 -0.011054331 -0.030748215 -0.035470452 0.013898407 0.0036490026 0.03834136 -0.014314286 0.02972864 -5.638682E-4 -0.041104943 -0.02530154 -0.024429537 0.030426243 0.06428684 -0.022846514 -0.013408744 -0.008418196 0.016836392 0.0109067615 -0.07893652 -0.046202812 0.032036096 -0.05076407 -0.006573571 -0.0034293248 0.014609426 -0.038475513 -0.017373009 -0.009571925 2.6555781E-5 -0.017641319 -0.020592717 -0.052856877 0.007143728 0.04641746 -0.0039038963 -0.027407767 0.012852002 -0.008062686 0.0014824073 0.040273186 -0.03335081 0.0540911 0.036677845 0.0097530335 0.0017507164 -0.053286172 -0.0029430147 -0.021035427 0.011175071 0.027421182 -0.009558509 -0.036892492 0.0724971 -0.024442952 -0.08891761 -0.03887798 -0.023758763 0.016031465 0.032250743 0.071745835 -0.012422708 -0.013730714 -0.02451003 0.00547015 -0.024335628 0.027582169 0.023946581 -0.03780474 -0.010859808 -0.0035618022 0.015132629 0.027877308 -0.025623512 0.013167266 -0.03149948 -0.04016586 0.008445026 -0.01471675 -0.0022101956 -9.407585E-4 -0.023248978 0.033458136 -0.017882796 -0.00967254 0.015991218 0.013113604 -0.043895356 0.008277333 0.045585703 0.0082236715 0.006684249 0.029970119 0.0042191595 -0.03217025 -0.001222483 0.007633392 0.012805048 0.044163667 0.01855357 -0.0058088903 -0.005282334 0.047624853 0.023020914 -0.04512958 0.027273612 -0.0013474143 -0.05049576 -0.008364534 0.008954814 0.03093603 -0.02094152 0.05347399 0.04987865 -0.0011704981 -0.021813523 0.05586194 -0.017453503 0.011731812 0.015239953 0.008740166 -0.014233794 0.026535762 0.0014245532 0.017708397 0.07534117 0.034907006 0.017238855 0.0029178606 -0.009109091 0.03783157 -0.0024298737 -0.021397645 -0.001357476 -0.003075492 -3.2532468E-4 -0.0055070426 -0.003152631 0.007096774 0.0079821935 0.05390328 -0.0042795287 -0.0202305 -0.0375096 0.016930299 -0.02822611 -0.047410205 0.005922922 -0.015803402 -0.0042594057 -0.001038859 -0.03869016 -0.03088237 0.021209829 -0.0076400996 0.020391487 0.0052186106 -0.057847425 0.074106954 0.0014438379 -0.03624855 1.7922204E-5 -0.007036404 -0.007774254 0.04075614 0.055808276 -0.035121653 0.009873772 0.033431303 -0.048644427 0.04842978 0.096698575 0.024684431 -0.03179462 -0.017681565 0.031901944 -0.011322641 -0.0019754253 0.025771081 0.014824074 0.057793763 -0.026280869 0.056613203 0.038851146 -0.044136833 0.0038737115 -0.013059942 0.034987498 -0.030184766 -0.004108482 -0.006191231 0.045075916 0.05586194 -0.0335118 -0.007090066 -0.023906333 0.052830048 -0.015937556 0.01560217 -9.608817E-4 0.0015553539 0.029809132 0.052776385 -0.001125221 -0.021397645 0.019532897 0.022631867 3.7709996E-4 -0.014045977 0.011792182 -0.009343862 0.045907672 -0.001883194 -0.014944812 0.056398556 0.007217513 0.007512653 -0.0023175192 0.056183908 -0.009679248 0.022336727 0.044378314 0.0079084085 0.061335444 0.001137798 0.069116406 0.017077869 0.001785932 -0.04220501 -0.009404232 -0.052481245 -0.044673454 0.015937556 -0.03302884 0.06128178 0.0030671076 0.018674308 -0.061442766 -0.034263063 -0.011718397 -0.016447343 0.011644612 -0.03123117 0.06273065 -0.008941398 -0.039360933 -0.035631437 0.017212024 -0.05108604 -0.007573022 0.036785167 0.016796146 -0.059296295 -0.011067747 -0.02852125 -0.031338494 0.021692785 -0.008787121 0.011416549 -0.013871577 0.024751507 0.003518202 0.019760959 -0.0030855539 -0.007230928 -0.010148789 -0.032841023 0.027877308 -0.007626684 0.050066464 0.006358924 -0.06466247 -0.043627046 0.010282943 0.062516004 -0.0027367522 0.02094152 -0.016447343 0.036972985 0.0123288 0.025838159 0.052266598 -0.007673638 -0.012657478 -0.018164521 -0.055808276 -0.03410208 0.038448684 -0.016621744 0.012134275 0.016568081 0.034611866 -0.033967923 0.015615585 -0.0070766504 -0.004316421 -0.011953167 -0.00802244 -0.015682662 0.0045880843 -0.011517165 -0.020485394 0.0040749433 0.05020062 0.01884871 0.012013537 -0.028279772 0.011631196 -0.004296298 0.023074577 -0.03450454 -0.015722908 -0.03388743 -0.038448684 -0.0037227878 0.03394109 -0.033967923 0.0036825414 0.0035114943 0.029192021 7.2946516E-4 -0.017855966 -0.033565458 0.014381364 0.06895542 -0.038824316 -0.0030771692 -0.011456795 -0.008881029 -0.019921945 -0.0099207265 -0.023155069 -0.001333999 -0.006436063 0.01265077 0.034746017 0.01660833 0.020606132 -0.030077443 0.026468685 0.028655404 -0.02822611 0.018808464 -0.028977375 0.029218853 -0.014730166 -0.026039392 -0.050388437 0.03353863 0.04598817 0.026388193 -0.04483444 0.0290847 -0.01621928 6.7370717E-4 -0.022524543 -0.004400268 -0.026589425 0.0084852725 -0.0109403 -0.0037529725 -0.019103603 -0.0023695042 -0.05390328 -0.0077541308 -0.010249405 -0.018030366 -0.009853649 0.02320873 -0.019251173 0.028628573 0.012724555 -0.018687723 -0.013777669 0.029594485 0.0066808946 0.018030366 0.04311726 -0.03147265 -0.011684858 -0.012234892 0.0052487953 -0.07185315 -0.0023393193 -0.05291054 -0.003102323 -0.0083913645 0.030855538 0.024496615 0.01144338 -0.031258002 -0.0024114274 -0.072014146 -0.02212208 0.026106467 0.0036121102 0.008364534 -0.04429782 0.017923042 0.03324349 0.040273186 0.046444293 0.014622842 -0.03149948 0.009243246 0.012053783 -0.04875175 0.015333861 -0.028896881 -0.04759802 0.012603817 -0.010490883 -0.033726446 -0.031633634 0.009598755 0.037375446 -0.06342825 -0.022658696 -0.026696747 0.0478395 0.028091954 -0.0057787057 -0.00426276 0.025824744 -0.010276236 0.006818403 0.03270687 0.061979383 0.018942617 0.026495516 -0.04547838 -0.007988901 -0.036436364 0.08151228 0.0067949262 0.018473076 -0.0026344592 -0.0217062 -0.010356728 0.0043398985 0.020659795 0.020109762 -0.052561738 0.007190682 -0.007438868 4.2761752E-4 -0.0850003 0.0050006094 -0.0049268245 -0.023557533 -0.019801207 -0.0014958228 0.03149948 -0.020445148 0.0035014327 -0.0356851 0.011798889 0.035443623 0.012852002 -0.013274589 -0.018634062 0.043492895 0.032492224 0.022846514 -0.02173303 -0.0043398985 -0.05494969 -0.0059061525 0.009618878 -0.009169461 0.06493078 0.0049268245 0.039012134 -0.007774254 -0.01315385 0.015763156 -0.06557473 -0.048483443 -5.299103E-4 4.33906E-4 0.023517286 0.010879931 -0.026656501 -0.019895114 -0.006137569 -0.03745594 -0.029353008 0.013569729 0.011181778 -0.001982133 0.107752904 0.04700774 0.008015732 -0.022055002 -0.06986767 0.035711933 0.022189157 -0.03300201 -0.019036526 0.012878833 -0.0139252385 -0.023959996 0.079634115 0.0098268185 -0.027474845 -0.055164337 0.016594913 -0.019278003 0.029513992 -0.0052420874 0.038260866 0.022403803 0.004500884 0.023839258 -0.0031844927 0.023718517 -0.031714126 -0.014636258 -0.0014119763 0.029916456 -0.01577657 -0.016326604 0.012053783 0.026817488 0.0070296964 -0.05972559 -0.036329042 0.026025975 -0.082263544 -0.0279578 0.013361789 0.024925908 0.04510275 -0.0040715896 0.028172448 -0.025288126 0.059832912 0.045290563 0.040917125 -0.031016523 -0.0013775992 -0.009310323 0.001955302 0.115265556 -0.017855966 -0.04247332 0.02347704 -0.035604607 0.07367766 -0.028279772 0.010430513 0.020539057 -0.04368071 0.011027501 0.019895114 -0.03262638 0.0088206595 3.9240194E-4 0.017963288 0.002003933 0.0064226473 -0.016541252 0.00426276 -2.3770503E-4 -0.011658027 -0.0043130675 0.0033639243 -0.00293463 -0.0147435805 -0.01120861 -0.010859808 0.01855357 0.0033656014 0.023101406 -0.043922186 0.010484175 0.032250743 0.0021531798 0.013804499 0.017762057 -0.0022940421 0.023383131 0.047061402 -0.003254924 0.014072808 0.0011218671 -0.009934141 0.013207512 -0.014019147 -0.02261845 -0.017708397 0.026830902 -0.016594913 -0.0033773398 -0.04928837 -0.028118785 -0.035819255 0.0012769833 -0.0342094 0.002465089 0.061120797 -0.020015853 0.0141667165 0.022578204 -0.030721383 0.040541492 0.006204646 0.008143179 -0.013489236 -0.0075663147 -0.008753582 0.004957009 0.0419367 -0.006110738 -0.01070553 0.042097688 0.034638695 0.11472894 -0.011919629 0.04005854 -0.027769985 -0.014528934 -0.02067321 0.0023057808 -0.041990362 -0.03895847 0.071745835 0.03061406 -9.935818E-4 -0.017466918 0.04365388 0.0046786387 -0.030184766 0.03694615 -0.02559668 0.0695457 0.027005304 -0.009759741 -0.052078784 0.03388743 0.008237087 0.0062147076 0.0039038963 0.018392583 0.035926577 0.015025306 -0.0045545455 -0.012483077 0.008310872 0.0040179277 -0.010926885 0.0058055366 -0.0060939686 -0.005590889 -0.028306602 -0.02377218 -0.009303615 -0.058115736 -0.015400938 -0.025180802 0.013817915 -0.008639551 0.02320873 -0.06986767 -4.8337548E-4 0.014448441 -0.030855538 0.004222513 0.028977375 -0.031982437 0.03305567 0.017077869 0.054600887 0.0019653635 0.043009937 -0.018982863 0.043519724 0.029889625 -0.010933593 0.010504298 -0.033726446 0.0075864377 0.0058357213 -0.012322092 0.06965302 -0.014327702 0.010168912 -0.03453137 -0.048000485 -0.007653515 0.04070248 0.015696079 0.017587656 0.011966582 0.010873224 -0.05827672 -0.01734618 -0.009102384 -0.014408194 0.0010044819 0.0076602227 0.027287029 0.03957558 0.021062259 0.010517714 -0.02471126 0.08231721 0.053071525 -0.0013633452 -0.01592414 -0.04131959 0.014032562 -0.035550945 0.03147265 -0.017641319 -5.18591E-4 -0.04875175 -0.03093603 -0.0014639611 -0.020887857 -0.013764253 -0.08033172 -0.023409963 0.0053997193 -0.14016463 -0.01949265 -0.048027314 -0.005798829 0.046229646 0.026374778 -0.028655404 -0.026924811 0.034021586 0.025234465 -0.009223123 -0.0021951033 -0.017279102 0.015857063 0.07399963 0.0077340077 0.0017373009 0.007834624 0.0055405814 -0.012825171 0.0570425 -0.014072808 0.027367521 -0.022940421 0.008163302 -0.013247758 -0.0064159394 0.014555764 -0.037482772 0.0077071767 -0.056076586 0.053581312 0.059242632 3.047823E-4 -0.05288371 0.0017339471 -0.0077943774 0.018956034 -0.007190682 0.011175071 0.004765839 0.040970787 -0.040621985 0.054037437 0.07421428 -0.023020914 </span>
</code></pre>
<p>æ€æ ·çŸ¥é“è¿™ä¸ªåµŒå…¥æ¨¡å‹è½¬æ¢çš„å‘é‡å€¼å‡†ä¸å‡†å‘¢ï¼Œåšä¸€ä¸ªå°æµ‹è¯•ï¼šæŸ¥è¯¢listä¸­çš„æ¯ä¸ªè¯é¢˜å’Œâ€œä½“è‚²èµ›äº‹â€è¿™ä¸ªè¯é¢˜çš„ç›¸ä¼¼åº¦ï¼Œå¹¶å°†æ¨¡å‹è®¡ç®—çš„ç»“æœè¿›è¡Œæ¬§æ°è·ç¦»åˆ¤æ–­ï¼Œçœ‹çœ‹æ˜¯ä¸æ˜¯è¯é¢˜è¶Šç›¸ä¼¼ï¼Œè·ç¦»è¶ŠçŸ­ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Test</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test</span><span class="hljs-params">()</span> {

    <span class="hljs-type">float</span>[] embed1 = embeddingModel.embed(<span class="hljs-string">"ä½“è‚²èµ›äº‹"</span>);
    
    List&lt;String&gt; list = Arrays.asList(
        <span class="hljs-string">"ä¸­å›½æ²³åŒ—å‘ç”Ÿæ»¦æ²³ç¬¬ä¸€å·æ´ªæ°´"</span>,
        <span class="hljs-string">"è²å¾‹å®¾å’Œä¸­å›½å°±å—æµ·é—®é¢˜è¿›è¡Œäº¤æ¶‰"</span>,
        <span class="hljs-string">"æ­¦å¤§é–è¢«éŸ©å›½äººåœ¨insä¸Šè°©éª‚"</span>,
        <span class="hljs-string">"æ—¥æœ¬æ”¿åºœå†³å®šå°†æ ¸æ±¡æŸ“æ°´è¿›è¡Œæ’æµ·"</span>,
        <span class="hljs-string">"ä¸­åäººæ°‘å…±å’Œå›½å…¨è¿ä¼šåœ¨å¤©æ´¥å¼€å¹•"</span>,
        <span class="hljs-string">"åœ¨ä¸­å›½çš„è°ƒèŠ‚ä¸‹ï¼Œæ²™ç‰¹å’Œä¼Šæœ—å’Œè§£"</span>,
        <span class="hljs-string">"è°·çˆ±å‡Œåœ¨2022åŒ—äº¬å†¬å¥¥ä¼šä¸Šè·å¾—æ»‘é›ªå† å†›"</span>,
        <span class="hljs-string">"ç¼…ç”¸æ›¼å¾·å‹’å‘ç”Ÿ8.0çº§åœ°éœ‡"</span>,
        <span class="hljs-string">"æ— æ³•å¿å—åŒ—çº¦ä¸œæ‰©ï¼Œä¿„ç½—æ–¯è¿›æ”»ä¹Œå…‹å…°"</span>,
        <span class="hljs-string">"æ¹˜æ½­å¤§å­¦å‘¨ç«‹äººå› æŠ•æ¯’è¢«åˆ¤å¤„æ­»åˆ‘"</span>,
        <span class="hljs-string">"å…¨çº¢å©µåœ¨ä¸œäº¬å¥¥è¿ä¼šè·å¾—è·³æ°´é‡‘ç‰Œ"</span>
    );

    <span class="hljs-keyword">for</span> (String s : list) {
        <span class="hljs-type">float</span>[] embed2 = embeddingModel.embed(s);
        System.out.println(s +<span class="hljs-string">"="</span> +euclideanDistance(embed2, embed1));
    }
}


<span class="hljs-comment">/**
 * è®¡ç®—æ¬§æ°è·ç¦» (Euclidean Distance)
 * <span class="hljs-doctag">@param</span> vector1 ç¬¬ä¸€ä¸ªå‘é‡
 * <span class="hljs-doctag">@param</span> vector2 ç¬¬äºŒä¸ªå‘é‡
 * <span class="hljs-doctag">@return</span> æ¬§æ°è·ç¦»
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">double</span> <span class="hljs-title function_">euclideanDistance</span><span class="hljs-params">(<span class="hljs-type">float</span>[] vector1, <span class="hljs-type">float</span>[] vector2)</span> {
    <span class="hljs-keyword">if</span> (vector1 == <span class="hljs-literal">null</span> || vector2 == <span class="hljs-literal">null</span>) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(<span class="hljs-string">"è¾“å…¥å‘é‡ä¸èƒ½ä¸ºnull"</span>);
    }
    <span class="hljs-keyword">if</span> (vector1.length != vector2.length) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(<span class="hljs-string">"å‘é‡ç»´åº¦å¿…é¡»ç›¸åŒ"</span>);
    }
    <span class="hljs-keyword">if</span> (vector1.length == <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(<span class="hljs-string">"å‘é‡ä¸èƒ½ä¸ºç©º"</span>);
    }

    <span class="hljs-type">double</span> <span class="hljs-variable">sum</span> <span class="hljs-operator">=</span> <span class="hljs-number">0.0</span>;
    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; vector1.length; i++) {
        <span class="hljs-type">double</span> <span class="hljs-variable">diff</span> <span class="hljs-operator">=</span> vector1[i] - vector2[i];
        sum += diff * diff;
    }
    <span class="hljs-keyword">return</span> Math.sqrt(sum);
}
</code></pre>
<p>å¾—åˆ°ç»“æœæ˜¾ç¤ºï¼Œâ€œå…¨çº¢å©µåœ¨ä¸œäº¬å¥¥è¿ä¼šè·å¾—è·³æ°´é‡‘ç‰Œâ€ï¼Œâ€œæ­¦å¤§é–è¢«éŸ©å›½äººåœ¨insä¸Šè°©éª‚â€ï¼Œâ€œè°·çˆ±å‡Œåœ¨åŒ—äº¬å†¬å¥¥ä¼šä¸Šè·å¾—æ»‘é›ªå† å†›â€ï¼Œâ€œä¸­åäººæ°‘å…±å’Œå›½å…¨è¿ä¼šåœ¨å¤©æ´¥å¼€å¹•â€å’Œå…³é”®è¯çš„è·ç¦»éƒ½æ˜¯1.0ï¼Œ1.1å·¦å³ï¼Œå°äºå…¶ä»–çš„1.2ï¼</p>
<pre><code class="hljs language-css" lang="css">ä¸­å›½æ²³åŒ—å‘ç”Ÿæ»¦æ²³ç¬¬ä¸€å·æ´ªæ°´=<span class="hljs-number">1.2565409585119849</span>
è²å¾‹å®¾å’Œä¸­å›½å°±å—æµ·é—®é¢˜è¿›è¡Œäº¤æ¶‰=<span class="hljs-number">1.2780262570947603</span>
æ­¦å¤§é–è¢«éŸ©å›½äººåœ¨<span class="hljs-selector-tag">ins</span>ä¸Šè°©éª‚=<span class="hljs-number">1.1504923215307303</span>
æ—¥æœ¬æ”¿åºœå†³å®šå°†æ ¸æ±¡æŸ“æ°´è¿›è¡Œæ’æµ·=<span class="hljs-number">1.2980210701931219</span>
ä¸­åäººæ°‘å…±å’Œå›½å…¨è¿ä¼šåœ¨å¤©æ´¥å¼€å¹•=<span class="hljs-number">1.0548370809772176</span>
åœ¨ä¸­å›½çš„è°ƒèŠ‚ä¸‹ï¼Œæ²™ç‰¹å’Œä¼Šæœ—å’Œè§£=<span class="hljs-number">1.2655944458999424</span>
è°·çˆ±å‡Œåœ¨<span class="hljs-number">2022</span>åŒ—äº¬å†¬å¥¥ä¼šä¸Šè·å¾—æ»‘é›ªå† å†›=<span class="hljs-number">1.1482314969126597</span>
ç¼…ç”¸æ›¼å¾·å‹’å‘ç”Ÿ<span class="hljs-number">8.0</span>çº§åœ°éœ‡=<span class="hljs-number">1.2719576699963044</span>
æ— æ³•å¿å—åŒ—çº¦ä¸œæ‰©ï¼Œä¿„ç½—æ–¯è¿›æ”»ä¹Œå…‹å…°=<span class="hljs-number">1.273157362706503</span>
æ¹˜æ½­å¤§å­¦å‘¨ç«‹äººå› æŠ•æ¯’è¢«åˆ¤å¤„æ­»åˆ‘=<span class="hljs-number">1.2694025438988223</span>
å…¨çº¢å©µåœ¨ä¸œäº¬å¥¥è¿ä¼šè·å¾—è·³æ°´é‡‘ç‰Œ=<span class="hljs-number">1.1600613375770383</span>
</code></pre>
<h2 data-id="heading-3">4.å‘é‡æ•°æ®åº“</h2>
<p>ä¹‹å‰æåˆ°ï¼Œå¦‚æœå®æ—¶çš„æ•°æ®æ˜¯æµ·é‡çš„ï¼Œä¸èƒ½å°†å†…å®¹æ•´ä¸ªå…¨éƒ¨å‘é€å¤§æ¨¡å‹ï¼Œè€Œä¸”Tokençš„é™åˆ¶ä¹Ÿä¸å…è®¸è¿™æ ·åšï¼Œæˆ‘ä»¬éœ€è¦æ£€ç´¢å‡ºå’Œé—®é¢˜ç›¸å…³çš„ç‰‡æ®µç„¶åæ‹†åˆ†å‡ºæ¥å‘é€ç»™å¤§æ¨¡å‹ï¼Œè€Œä¸”æ˜¯é€šè¿‡å°†æ–‡æœ¬è½¬æ¢æˆå‘é‡å¹¶æ ¹æ®å‘é‡ç›¸ä¼¼åº¦æ¥è¿›è¡ŒåŒ¹é…ï¼Œè¿™æ ·ï¼Œæµ·é‡æ•°æ®çš„å‚¨å­˜å’Œæ£€ç´¢å°±éœ€è¦å‘é‡æ•°æ®åº“æ¥å®Œæˆã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.liuzijian.com%2Fimg%2Fspring_ai%2Frag%2Fvdb.png" target="_blank" title="https://blog.liuzijian.com/img/spring_ai/rag/vdb.png" ref="nofollow noopener noreferrer"><img src="https://blog.liuzijian.com/img/spring_ai/rag/vdb.png" alt="" loading="lazy"/></a></p>
<p>Spring AIæ”¯æŒçš„å‘é‡æ•°æ®åº“æœ‰å¾ˆå¤šï¼Œä¸”å¯¹æ“ä½œå‘é‡æ•°æ®åº“åˆ¶å®šäº†ç»Ÿä¸€çš„æ¥å£æ ‡å‡†<code>org.springframework.ai.vectorstore.VectorStore</code>ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.spring.io%2Fspring-ai%2Freference%2Fapi%2Fvectordbs.html%23_vectorstore_implementations" target="_blank" title="https://docs.spring.io/spring-ai/reference/api/vectordbs.html#_vectorstore_implementations" ref="nofollow noopener noreferrer">docs.spring.io/spring-ai/râ€¦</a>ï¼‰ï¼Œè¿™é‡Œå°±ä»¥æ”¯æŒå‘é‡çš„Redis (Redis Stack)ä¸ºä¾‹</p>
<p>pom.xml</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.ai<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-ai-starter-vector-store-redis<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<p>æ–°å¢å‘é‡æ•°æ®åº“çš„é…ç½®</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">spring:</span>
  <span class="hljs-attr">ai:</span>
    <span class="hljs-attr">vectorstore:</span>
      <span class="hljs-attr">redis:</span>
        <span class="hljs-attr">initialize-schema:</span> <span class="hljs-literal">false</span> <span class="hljs-comment">#ä¸è‡ªåŠ¨åˆå§‹åŒ–ç´¢å¼•ç»“æ„ï¼Œå› ä¸ºå¯èƒ½ä¸èƒ½æ»¡è¶³æˆ‘ä»¬çš„æŸ¥è¯¢è¦æ±‚</span>
        <span class="hljs-attr">index-name:</span> <span class="hljs-string">custom-index</span> <span class="hljs-comment">#å‘é‡åº“ç´¢å¼•å</span>
        <span class="hljs-attr">prefix:</span> <span class="hljs-string">"doc:"</span> <span class="hljs-comment">#keyå‰ç¼€</span>
  <span class="hljs-attr">data:</span>
    <span class="hljs-attr">redis:</span>
      <span class="hljs-attr">host:</span> <span class="hljs-number">192.168</span><span class="hljs-number">.228</span><span class="hljs-number">.104</span>
      <span class="hljs-attr">port:</span> <span class="hljs-number">6379</span>
      <span class="hljs-attr">database:</span> <span class="hljs-number">0</span>
</code></pre>
<p>ç”¨Dockerå¯åŠ¨ä¸€ä¸ªRedis Stackå®ä¾‹ç”¨äºæµ‹è¯•</p>
<pre><code class="hljs language-arduino" lang="arduino">docker run -d --name redis-stack -p <span class="hljs-number">6379</span>:<span class="hljs-number">6379</span> -p <span class="hljs-number">8001</span>:<span class="hljs-number">8001</span> redis/redis-stack:latest
</code></pre>
<p>æ‰‹åŠ¨è®¾ç½®redis-stackçš„custom-indexç´¢å¼•ç»“æ„ï¼Œä¸»è¦æ˜¯ä¸ºäº†å°†user_idè®¾ç½®ä¸ºTAGï¼Œæ‰èƒ½åœ¨Spring AIä¸­è¿›è¡Œ<code>==</code>æŸ¥è¯¢ï¼Œå½“å‰ç‰ˆæœ¬Spring AIè‡ªåŠ¨ç”Ÿæˆçš„ç´¢å¼•æ˜¯<code>TEXT</code>å‹</p>
<pre><code class="hljs language-vbnet" lang="vbnet">FT.CREATE <span class="hljs-keyword">custom</span>-index <span class="hljs-keyword">ON</span> JSON PREFIX <span class="hljs-number">1</span> <span class="hljs-string">"doc:"</span> SCHEMA $.user_id <span class="hljs-keyword">AS</span> user_id TAG $.content <span class="hljs-keyword">AS</span> content <span class="hljs-keyword">TEXT</span> $.embedding <span class="hljs-keyword">AS</span> embedding VECTOR HNSW <span class="hljs-number">6</span> TYPE FLOAT32 <span class="hljs-keyword">DIM</span> <span class="hljs-number">1024</span> DISTANCE_METRIC COSINE
</code></pre>
<p>æ–°å»ºæµ‹è¯•ç±»ï¼Œå¯ä»¥ç›´æ¥æ³¨å…¥å¹¶ä½¿ç”¨VectorStoreæ“ä½œå‘é‡æ•°æ®åº“</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> org.example.test;

<span class="hljs-keyword">import</span> jakarta.annotation.Resource;
<span class="hljs-keyword">import</span> org.example.Main;
<span class="hljs-keyword">import</span> org.junit.jupiter.api.Test;
<span class="hljs-keyword">import</span> org.springframework.ai.document.Document;
<span class="hljs-keyword">import</span> org.springframework.ai.vectorstore.VectorStore;
<span class="hljs-keyword">import</span> org.springframework.boot.test.context.SpringBootTest;

<span class="hljs-keyword">import</span> java.util.Arrays;

<span class="hljs-meta">@SpringBootTest(classes = Main.class)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">VectorStoreTest</span> {

    <span class="hljs-meta">@Resource</span>
    <span class="hljs-keyword">private</span> VectorStore vectorStore;

    <span class="hljs-meta">@Test</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test</span><span class="hljs-params">()</span> {
        <span class="hljs-type">Document</span> <span class="hljs-variable">document</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Document</span>(<span class="hljs-string">"1"</span>, <span class="hljs-string">"ä¸€æ®µæµ‹è¯•ä¿¡æ¯"</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;());
        vectorStore.add(Arrays.asList(document));

    }
}
</code></pre>
<p>æ‰“å¼€8001ç«¯å£çš„redis-stackç®¡ç†é¡µé¢ï¼Œå¯ä»¥çœ‹åˆ°æ–‡æœ¬æ•°æ®åŠè½¬æ¢åçš„å‘é‡æ•°æ®ä¿å­˜åˆ°äº†redis-stackä¸­</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.liuzijian.com%2Fimg%2Fspring_ai%2Frag%2Ftest1.png" target="_blank" title="https://blog.liuzijian.com/img/spring_ai/rag/test1.png" ref="nofollow noopener noreferrer"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/64325d018eef451cb25d32117d70c3ec~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgY2hhbmdlbHpq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763774699&amp;x-signature=PuaShPCebUsOn%2Bi1edUmz8wDYjI%3D" alt="" loading="lazy"/></a></p>
<p>è¿˜å¯ä»¥å°†PDFæ–‡æ¡£å‘é‡åŒ–ï¼Œä¿å­˜è¿›å‘é‡æ•°æ®åº“ï¼Œéœ€è¦å€ŸåŠ©spring-ai-pdf-document-readerå·¥å…·ï¼Œè¿™é‡Œä»¥æˆ‘çš„æœ¬ç§‘æ¯•ä¸šç­”è¾©PPTè½¬æˆPDFä¸ºä¾‹æµ‹è¯•</p>
<pre><code class="hljs language-typescript" lang="typescript"> &lt;dependency&gt;
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.ai<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span></span>
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-ai-pdf-document-reader<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span></span>
&lt;/dependency&gt;

package org.<span class="hljs-property">example</span>.<span class="hljs-property">test</span>;

<span class="hljs-keyword">import</span> jakarta.<span class="hljs-property">annotation</span>.<span class="hljs-property">Resource</span>;
<span class="hljs-keyword">import</span> org.<span class="hljs-property">example</span>.<span class="hljs-property">Main</span>;
<span class="hljs-keyword">import</span> org.<span class="hljs-property">junit</span>.<span class="hljs-property">jupiter</span>.<span class="hljs-property">api</span>.<span class="hljs-property">Test</span>;
<span class="hljs-keyword">import</span> org.<span class="hljs-property">springframework</span>.<span class="hljs-property">ai</span>.<span class="hljs-property">document</span>.<span class="hljs-property">Document</span>;
<span class="hljs-keyword">import</span> org.<span class="hljs-property">springframework</span>.<span class="hljs-property">ai</span>.<span class="hljs-property">reader</span>.<span class="hljs-property">ExtractedTextFormatter</span>;
<span class="hljs-keyword">import</span> org.<span class="hljs-property">springframework</span>.<span class="hljs-property">ai</span>.<span class="hljs-property">reader</span>.<span class="hljs-property">pdf</span>.<span class="hljs-property">PagePdfDocumentReader</span>;
<span class="hljs-keyword">import</span> org.<span class="hljs-property">springframework</span>.<span class="hljs-property">ai</span>.<span class="hljs-property">reader</span>.<span class="hljs-property">pdf</span>.<span class="hljs-property">config</span>.<span class="hljs-property">PdfDocumentReaderConfig</span>;
<span class="hljs-keyword">import</span> org.<span class="hljs-property">springframework</span>.<span class="hljs-property">ai</span>.<span class="hljs-property">vectorstore</span>.<span class="hljs-property">VectorStore</span>;
<span class="hljs-keyword">import</span> org.<span class="hljs-property">springframework</span>.<span class="hljs-property">boot</span>.<span class="hljs-property">test</span>.<span class="hljs-property">context</span>.<span class="hljs-property">SpringBootTest</span>;

<span class="hljs-keyword">import</span> java.<span class="hljs-property">util</span>.<span class="hljs-property">List</span>;

<span class="hljs-meta">@SpringBootTest</span>(classes = <span class="hljs-title class_">Main</span>.<span class="hljs-property">class</span>)
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">VectorStoreTest</span> {

    <span class="hljs-meta">@Resource</span>
    <span class="hljs-keyword">private</span> <span class="hljs-title class_">VectorStore</span> vectorStore;

    <span class="hljs-meta">@Test</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">test</span>(<span class="hljs-params"/>) {

        <span class="hljs-title class_">PagePdfDocumentReader</span> reader = <span class="hljs-keyword">new</span> <span class="hljs-title class_">PagePdfDocumentReader</span>(
                <span class="hljs-string">"file:///C:/Users/lzj20/Desktop/ç­”è¾©.pdf"</span>,
                <span class="hljs-title class_">PdfDocumentReaderConfig</span>.<span class="hljs-title function_">builder</span>()
                        .<span class="hljs-title function_">withPageExtractedTextFormatter</span>(<span class="hljs-title class_">ExtractedTextFormatter</span>.<span class="hljs-title function_">defaults</span>())
                        .<span class="hljs-title function_">withPagesPerDocument</span>(<span class="hljs-number">1</span>)
                        .<span class="hljs-title function_">build</span>()
        );

        <span class="hljs-title class_">List</span>&lt;<span class="hljs-title class_">Document</span>&gt; documents = reader.<span class="hljs-title function_">read</span>();
        <span class="hljs-keyword">for</span> (<span class="hljs-title class_">Document</span> <span class="hljs-variable language_">document</span> : documents) {
            <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getMetadata</span>().<span class="hljs-title function_">put</span>(<span class="hljs-string">"user_id"</span>, <span class="hljs-string">"001"</span>);
        }

        vectorStore.<span class="hljs-title function_">add</span>(documents);
    }
}
</code></pre>
<p>æ•°æ®ä¿å­˜æˆåŠŸ</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.liuzijian.com%2Fimg%2Fspring_ai%2Frag%2Ftest2.png" target="_blank" title="https://blog.liuzijian.com/img/spring_ai/rag/test2.png" ref="nofollow noopener noreferrer"><img src="https://blog.liuzijian.com/img/spring_ai/rag/test2.png" alt="" loading="lazy"/></a></p>
<p>è¿˜å¯ä»¥æœç´¢ç›¸å…³æ€§é«˜çš„å†…å®¹</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-keyword">@Test</span>
public void search() {
    SearchRequest request = SearchRequest<span class="hljs-selector-class">.builder</span>()
            <span class="hljs-selector-class">.query</span>("æœåŠ¡å™¨é…ç½®")
            <span class="hljs-selector-class">.topK</span>(<span class="hljs-number">3</span>) <span class="hljs-comment">//ç›¸ä¼¼åº¦æœ€é«˜çš„å‰å‡ å</span>
            <span class="hljs-comment">//.filterExpression("user_id == '001'") //å¯ä»¥æ ¹æ®metadataä¸­çš„å†…å®¹è¿‡æ»¤</span>
            <span class="hljs-selector-class">.build</span>();

    List&lt;Document&gt; documents = vectorStore<span class="hljs-selector-class">.similaritySearch</span>(request);
    for (Document document : documents) {
        System<span class="hljs-selector-class">.out</span><span class="hljs-selector-class">.println</span>(document.getText());
        System<span class="hljs-selector-class">.out</span><span class="hljs-selector-class">.println</span>(document.getScore());
    }
}
</code></pre>
<h2 data-id="heading-4">5.ä½¿ç”¨çŸ¥è¯†åº“å¢å¼ºå¯¹è¯åŠŸèƒ½ï¼ˆRAGï¼‰</h2>
<p>æœ€åä¸€æ­¥ï¼Œåˆ©ç”¨ä¿å­˜äº†æˆ‘ä»¬è‡ªå·±ä¸Šä¼ äº†æ–‡æ¡£çš„å‘é‡æ•°æ®åº“ï¼Œä½œä¸ºå¤§æ¨¡å‹å¯¹è¯çš„çŸ¥è¯†åº“ï¼Œå¯¹å¤§æ¨¡å‹å°šæœªäº†è§£çš„å†…å®¹è¿›è¡Œè¡¥å……ï¼Œé¦–å…ˆå…ˆå°†ä¹‹å‰ç”¨è¿‡çš„å¯¹è¯æ¨¡å‹DeepSeekçš„ä¾èµ–å’Œé…ç½®æ·»åŠ è¿›å»</p>
<pre><code class="hljs language-xml" lang="xml">spring:
  ai:
    deepseek:
      base-url: https://api.deepseek.com
      api-key: ${DEEPSEEK_KEY}

<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.ai<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-ai-starter-model-deepseek<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<p>å†æ·»åŠ Spring AIå¯¹RAGåŠŸèƒ½æ”¯æŒçš„advisor</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.ai<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-ai-advisors-vector-store<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<p>é…ç½®ä¸€ä¸ªæ”¯æŒçŸ¥è¯†åº“è‡ªåŠ¨æ£€ç´¢çš„ChatClientï¼Œå¹¶å…³è”å‘é‡æ•°æ®åº“vectorStore</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">package</span> org.example;

<span class="hljs-keyword">import</span> org.springframework.ai.chat.client.ChatClient;
<span class="hljs-keyword">import</span> org.springframework.ai.chat.client.advisor.MessageChatMemoryAdvisor;
<span class="hljs-keyword">import</span> org.springframework.ai.chat.client.advisor.SimpleLoggerAdvisor;
<span class="hljs-keyword">import</span> org.springframework.ai.chat.client.advisor.vectorstore.QuestionAnswerAdvisor;
<span class="hljs-keyword">import</span> org.springframework.ai.chat.memory.ChatMemory;
<span class="hljs-keyword">import</span> org.springframework.ai.deepseek.DeepSeekChatModel;

<span class="hljs-keyword">import</span> org.springframework.ai.vectorstore.SearchRequest;
<span class="hljs-keyword">import</span> org.springframework.ai.vectorstore.VectorStore;
<span class="hljs-keyword">import</span> org.springframework.context.<span class="hljs-keyword">annotation</span>.Bean;
<span class="hljs-keyword">import</span> org.springframework.context.<span class="hljs-keyword">annotation</span>.Configuration;

<span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ModelConfig</span> {

    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> ChatClient ragClient(DeepSeekChatModel model, ChatMemory chatMemory, VectorStore vectorStore) {
        <span class="hljs-keyword">return</span> ChatClient.builder(model)
                .defaultAdvisors(
                        SimpleLoggerAdvisor.builder().build(),
                        MessageChatMemoryAdvisor.builder(chatMemory).build(),
                        QuestionAnswerAdvisor.builder(vectorStore)
                                .searchRequest(
                                        SearchRequest.builder()
                                        .similarityThreshold(<span class="hljs-number">0.6</span>)
                                        .topK(<span class="hljs-number">2</span>)
                                        .build()
                                ).build()
                    ).build();
    }

}
</code></pre>
<p>controllerä¸­ä½¿ç”¨ragClientï¼Œå¹¶ä½¿ç”¨<code>advisor.param(QuestionAnswerAdvisor.FILTER_EXPRESSION, "user_id == '001'")</code>åŒºåˆ†ä¸åŒç”¨æˆ·çš„æ–‡æ¡£ï¼Œå®é™…é¡¹ç›®ä¸­ï¼Œç”¨æˆ·IDåº”è¯¥ä»åç«¯ç™»å½•ä¿¡æ¯è·å¾—</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">package</span> org.example.controller;

<span class="hljs-keyword">import</span> jakarta.<span class="hljs-keyword">annotation</span>.Resource;
<span class="hljs-keyword">import</span> org.springframework.ai.chat.client.ChatClient;
<span class="hljs-keyword">import</span> org.springframework.ai.chat.client.advisor.vectorstore.QuestionAnswerAdvisor;
<span class="hljs-keyword">import</span> org.springframework.ai.chat.memory.ChatMemory;

<span class="hljs-keyword">import</span> org.springframework.web.bind.<span class="hljs-keyword">annotation</span>.GetMapping;
<span class="hljs-keyword">import</span> org.springframework.web.bind.<span class="hljs-keyword">annotation</span>.RequestMapping;
<span class="hljs-keyword">import</span> org.springframework.web.bind.<span class="hljs-keyword">annotation</span>.RestController;
<span class="hljs-keyword">import</span> reactor.core.publisher.Flux;

<span class="hljs-meta">@RestController</span>
<span class="hljs-meta">@RequestMapping(<span class="hljs-string">"ai"</span>)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ChatController</span> {

    <span class="hljs-meta">@Resource</span>
    <span class="hljs-keyword">private</span> ChatClient ragClient;

    <span class="hljs-meta">@GetMapping(value = <span class="hljs-string">"rag-stream"</span>, produces = <span class="hljs-string">"text/html;charset=utf-8"</span>)</span>
    <span class="hljs-keyword">public</span> Flux&lt;String&gt; rag(String msg, String chatId) {

        <span class="hljs-keyword">return</span> ragClient.prompt()
                .user(msg)
                .advisors(advisor -&gt; advisor.param(ChatMemory.CONVERSATION_ID, chatId))
                .advisors(advisor -&gt; advisor.param(QuestionAnswerAdvisor.FILTER_EXPRESSION, <span class="hljs-string">"user_id == '001'"</span>))
                .stream()
                .content();

    }
}
</code></pre>
<p>é€šè¿‡æµ‹è¯•ï¼Œå¯ä»¥çœ‹åˆ°å¤§æ¨¡å‹å›ç­”å®ƒä¸çŸ¥é“çš„é—®é¢˜æ—¶ï¼Œå·²ç»æœ‰æ£€ç´¢çŸ¥è¯†åº“äº†</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.liuzijian.com%2Fimg%2Fspring_ai%2Frag%2Ftest3.png" target="_blank" title="https://blog.liuzijian.com/img/spring_ai/rag/test3.png" ref="nofollow noopener noreferrer"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/80a2967241b44fdba82368b79ab1eecc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgY2hhbmdlbHpq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763774699&amp;x-signature=xAU2XPk5BakirZCtLu%2FzytjGaCc%3D" alt="" loading="lazy"/></a></p>
<h2 data-id="heading-5">å‚è€ƒ</h2>
<ol>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fjava2ai.com%2Fdocs%2F1.0.0-M6.1%2Fconcepts%2F%3Fspm%3D4347728f.33449ac1.0.0.7b7d556bo6eN0q" target="_blank" title="https://java2ai.com/docs/1.0.0-M6.1/concepts/?spm=4347728f.33449ac1.0.0.7b7d556bo6eN0q" ref="nofollow noopener noreferrer">java2ai.com/docs/1.0.0-â€¦</a></li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[React é—­åŒ…é™·é˜±è¯¦è§£]]></title>    <link>https://juejin.cn/post/7572403510467313707</link>    <guid>https://juejin.cn/post/7572403510467313707</guid>    <pubDate>2025-11-14T17:09:41.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572403510467313707" data-draft-id="7572396000545161279" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="React é—­åŒ…é™·é˜±è¯¦è§£"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-14T17:09:41.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸€ç¢—ä¸‹é…’èœ"/> <meta itemprop="url" content="https://juejin.cn/user/1169536104549534"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            React é—­åŒ…é™·é˜±è¯¦è§£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1169536104549534/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸€ç¢—ä¸‹é…’èœ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-14T17:09:41.000Z" title="Fri Nov 14 2025 17:09:41 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    5
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">React é—­åŒ…é™·é˜±è¯¦è§£</h2>
<h3 data-id="heading-1">ä»€ä¹ˆæ˜¯é—­åŒ…é™·é˜±ï¼Ÿ</h3>
<p>React é—­åŒ…é™·é˜±æ˜¯æŒ‡å‡½æ•°ç»„ä»¶ä¸­çš„å›è°ƒå‡½æ•°ï¼ˆç‰¹åˆ«æ˜¯äº‹ä»¶å¤„ç†å‡½æ•°æˆ–å‰¯ä½œç”¨å‡½æ•°ï¼‰æ•è·äº†è¿‡æ—¶çš„çŠ¶æ€å€¼ï¼Œè€Œä¸æ˜¯æœ€æ–°çš„çŠ¶æ€å€¼ã€‚è¿™æ˜¯å› ä¸ºè¿™äº›å‡½æ•°åœ¨åˆ›å»ºæ—¶å½¢æˆäº†ä¸€ä¸ªé—­åŒ…ï¼Œæ•è·äº†å½“æ—¶çš„å˜é‡å€¼ã€‚</p>
<h3 data-id="heading-2">ä»€ä¹ˆæ˜¯é—­åŒ…ï¼Ÿ</h3>
<h4 data-id="heading-3">1. å­˜åœ¨å¤–éƒ¨å‡½æ•°å’Œå†…éƒ¨å‡½æ•°</h4>
<ul>
<li>å¿…é¡»æœ‰ä¸€ä¸ªå¤–éƒ¨å‡½æ•°ï¼ˆenclosing functionï¼‰</li>
<li>å¤–éƒ¨å‡½æ•°å†…éƒ¨å®šä¹‰äº†å†…éƒ¨å‡½æ•°ï¼ˆinner functionï¼‰</li>
</ul>
<h4 data-id="heading-4">2. å†…éƒ¨å‡½æ•°å¼•ç”¨äº†å¤–éƒ¨å‡½æ•°çš„å˜é‡</h4>
<ul>
<li>å†…éƒ¨å‡½æ•°è®¿é—®äº†å¤–éƒ¨å‡½æ•°ä½œç”¨åŸŸä¸­çš„å˜é‡ï¼ˆè‡ªç”±å˜é‡ï¼‰</li>
</ul>
<h4 data-id="heading-5">3. å†…éƒ¨å‡½æ•°åœ¨å¤–éƒ¨å‡½æ•°ä½œç”¨åŸŸå¤–è¢«è°ƒç”¨</h4>
<ul>
<li>å†…éƒ¨å‡½æ•°è¢«è¿”å›æˆ–åœ¨å¤–éƒ¨å‡½æ•°å¤–éƒ¨è¢«æ‰§è¡Œ</li>
</ul>
<h3 data-id="heading-6">è§¦å‘æ¡ä»¶</h3>
<p>é—­åŒ…é™·é˜±é€šå¸¸åœ¨ä»¥ä¸‹æƒ…å†µä¸‹å‘ç”Ÿï¼š</p>
<ol>
<li><strong>åœ¨ useEffect ä¸­ä½¿ç”¨çŠ¶æ€ä½†ä¾èµ–é¡¹æ•°ç»„ä¸ºç©º</strong></li>
<li><strong>åœ¨å¼‚æ­¥æ“ä½œä¸­ä½¿ç”¨çŠ¶æ€</strong></li>
<li><strong>åœ¨äº‹ä»¶å¤„ç†å‡½æ•°ä¸­ä½¿ç”¨çŠ¶æ€ï¼Œä½†å‡½æ•°åœ¨ç»„ä»¶æŒ‚è½½æ—¶åˆ›å»º</strong></li>
</ol>
<h3 data-id="heading-7">å®é™…æ¡ˆä¾‹</h3>
<h4 data-id="heading-8">æ¡ˆä¾‹ 1ï¼šuseEffect ä¸­çš„é—­åŒ…é™·é˜±</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, { useState, useEffect } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">Counter</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [count, setCount] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);

  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">// é—®é¢˜ï¼šè¿™é‡Œçš„ count å§‹ç»ˆæ˜¯åˆå§‹å€¼ 0</span>
    <span class="hljs-keyword">const</span> timer = <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(count); <span class="hljs-comment">// æ€»æ˜¯è¾“å‡º 0</span>
    }, <span class="hljs-number">1000</span>);
    
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">clearInterval</span>(timer);
  }, []); <span class="hljs-comment">// ç©ºä¾èµ–æ•°ç»„</span>

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Count: {count}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> setCount(count + 1)}&gt;Increment<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">useEffect</span>(() =&gt; {
  const timer = <span class="hljs-built_in">setInterval</span>(() =&gt; {
    console<span class="hljs-selector-class">.log</span>(count); <span class="hljs-comment">// ç°åœ¨ä¼šè¾“å‡ºæœ€æ–°çš„ count å€¼</span>
  }, <span class="hljs-number">1000</span>);
  
  return () =&gt; <span class="hljs-built_in">clearInterval</span>(timer);
}, <span class="hljs-selector-attr">[count]</span>); <span class="hljs-comment">// æ·»åŠ  count åˆ°ä¾èµ–æ•°ç»„</span>
</code></pre>
<h4 data-id="heading-9">æ¡ˆä¾‹ 2ï¼šå¼‚æ­¥æ“ä½œä¸­çš„é—­åŒ…é™·é˜±</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">AsyncCounter</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [count, setCount] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleClick</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-title function_">setCount</span>(count + <span class="hljs-number">1</span>);
    
    <span class="hljs-comment">// é—®é¢˜ï¼šè¿™é‡Œçš„ count æ˜¯ç‚¹å‡»æ—¶çš„å€¼ï¼Œä¸æ˜¯æœ€æ–°çš„å€¼</span>
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Current count:'</span>, count); <span class="hljs-comment">// å¯èƒ½ä¸æ˜¯æœ€æ–°çš„å€¼</span>
    }, <span class="hljs-number">3000</span>);
  };

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Count: {count}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{handleClick}</span>&gt;</span>Increment with delay<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">AsyncCounter</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [count, setCount] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleClick</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-comment">// ä½¿ç”¨å‡½æ•°å¼æ›´æ–°ç¡®ä¿è·å–æœ€æ–°çŠ¶æ€</span>
    <span class="hljs-title function_">setCount</span>(<span class="hljs-function"><span class="hljs-params">prevCount</span> =&gt;</span> {
      <span class="hljs-keyword">const</span> newCount = prevCount + <span class="hljs-number">1</span>;
      
      <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Current count:'</span>, newCount); <span class="hljs-comment">// ç¡®ä¿æ˜¯æœ€æ–°å€¼</span>
      }, <span class="hljs-number">3000</span>);
      
      <span class="hljs-keyword">return</span> newCount;
    });
  };

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Count: {count}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{handleClick}</span>&gt;</span>Increment with delay<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<h4 data-id="heading-10">æ¡ˆä¾‹ 3ï¼šäº‹ä»¶ç›‘å¬å™¨ä¸­çš„é—­åŒ…é™·é˜±</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">EventListenerExample</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [value, setValue] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">''</span>);

  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleKeyPress</span> = (<span class="hljs-params">event</span>) =&gt; {
      <span class="hljs-comment">// é—®é¢˜ï¼šè¿™é‡Œçš„ value å§‹ç»ˆæ˜¯ç©ºå­—ç¬¦ä¸²</span>
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Current value:'</span>, value); <span class="hljs-comment">// æ€»æ˜¯ç©ºå­—ç¬¦ä¸²</span>
    };

    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'keypress'</span>, handleKeyPress);
    
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'keypress'</span>, handleKeyPress);
    };
  }, []); <span class="hljs-comment">// ç©ºä¾èµ–æ•°ç»„</span>

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">input</span> 
        <span class="hljs-attr">value</span>=<span class="hljs-string">{value}</span> 
        <span class="hljs-attr">onChange</span>=<span class="hljs-string">{(e)</span> =&gt;</span> setValue(e.target.value)} 
        placeholder="Type something"
      /&gt;
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p>
<pre><code class="hljs language-ini" lang="ini">function EventListenerExample() {
  const <span class="hljs-section">[value, setValue]</span> = useState('')<span class="hljs-comment">;</span>
  const <span class="hljs-attr">valueRef</span> = useRef(value)<span class="hljs-comment">;</span>

  // ä¿æŒ ref ä¸çŠ¶æ€åŒæ­¥
  useEffect(() =&gt; {
    <span class="hljs-attr">valueRef.current</span> = value<span class="hljs-comment">;</span>
  }, <span class="hljs-section">[value]</span>)<span class="hljs-comment">;</span>

  useEffect(() =&gt; {
    const <span class="hljs-attr">handleKeyPress</span> = (event) =&gt; {
      // é€šè¿‡ ref è·å–æœ€æ–°å€¼
      console.log('Current value:', valueRef.current)<span class="hljs-comment">;</span>
    }<span class="hljs-comment">;</span>

    document.addEventListener('keypress', handleKeyPress)<span class="hljs-comment">;</span>
    
    return () =&gt; {
      document.removeEventListener('keypress', handleKeyPress)<span class="hljs-comment">;</span>
    }<span class="hljs-comment">;</span>
  }, <span class="hljs-section">[]</span>)<span class="hljs-comment">; // ä¾èµ–æ•°ç»„å¯ä»¥ä¸ºç©ºï¼Œå› ä¸ºæˆ‘ä»¬ä½¿ç”¨ ref</span>

  return (
    &lt;div&gt;
      &lt;input 
        <span class="hljs-attr">value</span>={value} 
        <span class="hljs-attr">onChange</span>={(e) =&gt; setValue(e.target.value)} 
        <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"Type something"</span>
    &lt;/div&gt;
  )<span class="hljs-comment">;</span>
}
</code></pre>
<h3 data-id="heading-11">æ›´å¤æ‚çš„æ¡ˆä¾‹ï¼šå¤šä¸ªçŠ¶æ€äº¤äº’</h3>
<pre><code class="hljs language-scss" lang="scss">function <span class="hljs-built_in">ComplexExample</span>() {
  const <span class="hljs-selector-attr">[count, setCount]</span> = <span class="hljs-built_in">useState</span>(<span class="hljs-number">0</span>);
  const <span class="hljs-selector-attr">[text, setText]</span> = <span class="hljs-built_in">useState</span>('');

  const sendData = <span class="hljs-built_in">useCallback</span>(async () =&gt; {
    <span class="hljs-comment">// é—®é¢˜ï¼šè¿™é‡Œçš„ count å’Œ text å¯èƒ½æ˜¯è¿‡æ—¶çš„å€¼</span>
    const response = await <span class="hljs-built_in">fetch</span>('/api/data', {
      method: 'POST',
      body: JSON.stringify({ count, text })
    });
    <span class="hljs-comment">// å¤„ç†å“åº”...</span>
  }, <span class="hljs-selector-attr">[]</span>); <span class="hljs-comment">// ç©ºä¾èµ–æ•°ç»„ï¼Œå‡½æ•°ä¸ä¼šæ›´æ–°</span>

  <span class="hljs-built_in">useEffect</span>(() =&gt; {
    <span class="hljs-comment">// å‡è®¾æˆ‘ä»¬éœ€è¦åœ¨ç‰¹å®šæ¡ä»¶ä¸‹å‘é€æ•°æ®</span>
    if (count &gt; <span class="hljs-number">5</span>) {
      <span class="hljs-built_in">sendData</span>();
    }
  }, <span class="hljs-selector-attr">[count, sendData]</span>);

  return (
    &lt;div&gt;
      &lt;p&gt;Count: {count}&lt;/p&gt;
      &lt;input 
        value={text} 
        onChange={(e) =&gt; <span class="hljs-built_in">setText</span>(e.target.value)} 
        placeholder="Enter text"
      /&gt;
      &lt;<span class="hljs-selector-tag">button</span> onClick={() =&gt; <span class="hljs-built_in">setCount</span>(count + <span class="hljs-number">1</span>)}&gt;Increment&lt;/<span class="hljs-selector-tag">button</span>&gt;
    &lt;/<span class="hljs-selector-tag">div</span>&gt;
  );
}
</code></pre>
<p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p>
<pre><code class="hljs language-scss" lang="scss">function <span class="hljs-built_in">ComplexExample</span>() {
  const <span class="hljs-selector-attr">[count, setCount]</span> = <span class="hljs-built_in">useState</span>(<span class="hljs-number">0</span>);
  const <span class="hljs-selector-attr">[text, setText]</span> = <span class="hljs-built_in">useState</span>('');

  <span class="hljs-comment">// ä½¿ç”¨ ref æ¥å­˜å‚¨æœ€æ–°çŠ¶æ€</span>
  const stateRef = <span class="hljs-built_in">useRef</span>({ count, text });

  <span class="hljs-comment">// ä¿æŒ ref ä¸çŠ¶æ€åŒæ­¥</span>
  <span class="hljs-built_in">useEffect</span>(() =&gt; {
    stateRef<span class="hljs-selector-class">.current</span> = { count, text };
  }, <span class="hljs-selector-attr">[count, text]</span>);

  const sendData = <span class="hljs-built_in">useCallback</span>(async () =&gt; {
    <span class="hljs-comment">// é€šè¿‡ ref è·å–æœ€æ–°çŠ¶æ€</span>
    const { count, text } = stateRef<span class="hljs-selector-class">.current</span>;
    
    const response = await <span class="hljs-built_in">fetch</span>('/api/data', {
      method: 'POST',
      body: JSON.stringify({ count, text })
    });
    <span class="hljs-comment">// å¤„ç†å“åº”...</span>
  }, <span class="hljs-selector-attr">[]</span>); <span class="hljs-comment">// ä¾èµ–æ•°ç»„å¯ä»¥ä¸ºç©º</span>

  <span class="hljs-built_in">useEffect</span>(() =&gt; {
    if (count &gt; <span class="hljs-number">5</span>) {
      <span class="hljs-built_in">sendData</span>();
    }
  }, <span class="hljs-selector-attr">[count, sendData]</span>);

  return (
    &lt;div&gt;
      &lt;p&gt;Count: {count}&lt;/p&gt;
      &lt;input 
        value={text} 
        onChange={(e) =&gt; <span class="hljs-built_in">setText</span>(e.target.value)} 
        placeholder="Enter text"
      /&gt;
      &lt;<span class="hljs-selector-tag">button</span> onClick={() =&gt; <span class="hljs-built_in">setCount</span>(count + <span class="hljs-number">1</span>)}&gt;Increment&lt;/<span class="hljs-selector-tag">button</span>&gt;
    &lt;/<span class="hljs-selector-tag">div</span>&gt;
  );
}
</code></pre>
<h3 data-id="heading-12">æœ€ä½³å®è·µå’Œè§£å†³æ–¹æ¡ˆæ€»ç»“</h3>
<ol>
<li>
<p><strong>æ­£ç¡®ä½¿ç”¨ä¾èµ–æ•°ç»„</strong>ï¼šç¡®ä¿ useEffectã€useCallbackã€useMemo çš„ä¾èµ–æ•°ç»„åŒ…å«æ‰€æœ‰ä½¿ç”¨çš„å¤–éƒ¨å˜é‡</p>
</li>
<li>
<p><strong>ä½¿ç”¨å‡½æ•°å¼æ›´æ–°</strong>ï¼šå¯¹äºåŸºäºå‰ä¸€ä¸ªçŠ¶æ€çš„è®¡ç®—ï¼Œä½¿ç”¨å‡½æ•°å¼æ›´æ–°</p>
<pre><code class="hljs language-ini" lang="ini">setCount(<span class="hljs-attr">prevCount</span> =&gt; prevCount + <span class="hljs-number">1</span>)<span class="hljs-comment">;</span>
</code></pre>
</li>
<li>
<p><strong>ä½¿ç”¨ useRef å­˜å‚¨å¯å˜å€¼</strong>ï¼šå¯¹äºéœ€è¦åœ¨å›è°ƒä¸­è®¿é—®ä½†ä¸æƒ³è§¦å‘é‡æ–°æ¸²æŸ“çš„å€¼ï¼Œä½¿ç”¨ useRef</p>
</li>
<li>
<p><strong>ä½¿ç”¨ useCallback çš„æ­£ç¡®ä¾èµ–</strong>ï¼šç¡®ä¿ useCallback çš„ä¾èµ–æ•°ç»„åŒ…å«æ‰€æœ‰åœ¨å›è°ƒä¸­ä½¿ç”¨çš„å˜é‡</p>
</li>
<li>
<p><strong>ä½¿ç”¨è‡ªå®šä¹‰ Hook å°è£…é€»è¾‘</strong>ï¼šå°†å¤æ‚çš„çŠ¶æ€é€»è¾‘å°è£…åˆ°è‡ªå®šä¹‰ Hook ä¸­</p>
</li>
</ol>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// è‡ªå®šä¹‰ Hook å¤„ç†é—­åŒ…é—®é¢˜</span>
function <span class="hljs-built_in">useLatestRef</span>(value) {
  const ref = <span class="hljs-built_in">useRef</span>(value);
  <span class="hljs-built_in">useEffect</span>(() =&gt; {
    ref<span class="hljs-selector-class">.current</span> = value;
  });
  return ref;
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
function <span class="hljs-built_in">MyComponent</span>() {
  const <span class="hljs-selector-attr">[count, setCount]</span> = <span class="hljs-built_in">useState</span>(<span class="hljs-number">0</span>);
  const countRef = <span class="hljs-built_in">useLatestRef</span>(count);

  <span class="hljs-built_in">useEffect</span>(() =&gt; {
    const timer = <span class="hljs-built_in">setInterval</span>(() =&gt; {
      console<span class="hljs-selector-class">.log</span>('Latest count:', countRef.current);
    }, <span class="hljs-number">1000</span>);
    
    return () =&gt; <span class="hljs-built_in">clearInterval</span>(timer);
  }, <span class="hljs-selector-attr">[]</span>);

  return (
    &lt;button onClick={() =&gt; <span class="hljs-built_in">setCount</span>(count + <span class="hljs-number">1</span>)}&gt;
      Count: {count}
    &lt;/<span class="hljs-selector-tag">button</span>&gt;
  );
}
</code></pre>
<p>ç†è§£ React é—­åŒ…é™·é˜±çš„å…³é”®æ˜¯è®¤è¯†åˆ°å‡½æ•°ç»„ä»¶æ¯æ¬¡æ¸²æŸ“éƒ½ä¼šåˆ›å»ºæ–°çš„ä½œç”¨åŸŸï¼Œè€Œé—­åŒ…ä¼šæ•è·è¿™äº›ä½œç”¨åŸŸä¸­çš„å˜é‡å€¼ã€‚é€šè¿‡æ­£ç¡®çš„ä¾èµ–ç®¡ç†å’Œä½¿ç”¨é€‚å½“çš„ React APIï¼Œå¯ä»¥æœ‰æ•ˆåœ°é¿å…é—­åŒ…é™·é˜±ã€‚</p>
<h3 data-id="heading-13">useEffectEventï¼ˆå®éªŒæ€§ APIï¼‰</h3>
<p>React å›¢é˜Ÿæ­£åœ¨å¼€å‘ä¸€ä¸ªåä¸ºÂ <code>useEffectEvent</code>çš„å®éªŒæ€§ APIï¼Œä¸“é—¨ç”¨äºè§£å†³é—­åŒ…é™·é˜±é—®é¢˜ã€‚å®ƒå…è®¸ä½ åœ¨ effect ä¸­è¯»å–æœ€æ–°çš„ props å’Œ stateï¼Œè€Œæ— éœ€å°†å®ƒä»¬å£°æ˜ä¸ºä¾èµ–é¡¹ã€‚</p>
<pre><code class="hljs language-scss" lang="scss">import { useState, useEffect, experimental_useEffectEvent as useEffectEvent } from 'react';

function <span class="hljs-built_in">ChatRoom</span>({ roomId }) {
  const <span class="hljs-selector-attr">[message, setMessage]</span> = <span class="hljs-built_in">useState</span>('');

  <span class="hljs-comment">// ä½¿ç”¨ useEffectEvent å®šä¹‰äº‹ä»¶å‡½æ•°</span>
  const onConnected = <span class="hljs-built_in">useEffectEvent</span>(() =&gt; {
    <span class="hljs-built_in">showNotification</span>('Connected!', theme);
  });

  <span class="hljs-built_in">useEffect</span>(() =&gt; {
    const connection = <span class="hljs-built_in">createConnection</span>(serverUrl, roomId);
    connection<span class="hljs-selector-class">.connect</span>();
    connection<span class="hljs-selector-class">.on</span>('connected', onConnected); <span class="hljs-comment">// è¿™é‡Œå¯ä»¥å®‰å…¨åœ°ä½¿ç”¨æœ€æ–°çš„ theme</span>
    return () =&gt; connection<span class="hljs-selector-class">.disconnect</span>();
  }, <span class="hljs-selector-attr">[roomId]</span>); <span class="hljs-comment">// ä¸éœ€è¦å°† onConnected æˆ– theme ä½œä¸ºä¾èµ–</span>

  <span class="hljs-comment">// ... å…¶ä»–ä»£ç </span>
}
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ArkTså•å…ƒæµ‹è¯• UnitTest æŒ‡å—]]></title>    <link>https://juejin.cn/post/7572385850636337158</link>    <guid>https://juejin.cn/post/7572385850636337158</guid>    <pubDate>2025-11-15T01:40:52.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572385850636337158" data-draft-id="7572397142365175850" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ArkTså•å…ƒæµ‹è¯• UnitTest æŒ‡å—"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-15T01:40:52.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="littleplayer"/> <meta itemprop="url" content="https://juejin.cn/user/1926000099198813"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ArkTså•å…ƒæµ‹è¯• UnitTest æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1926000099198813/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    littleplayer
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-15T01:40:52.000Z" title="Sat Nov 15 2025 01:40:52 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ArkTS æä¾›äº†å®Œå–„çš„å•å…ƒæµ‹è¯•æ¡†æ¶ï¼Œæ”¯æŒå¯¹ HarmonyOS åº”ç”¨è¿›è¡Œå•å…ƒæµ‹è¯•ã€‚ä»¥ä¸‹æ˜¯å®Œæ•´çš„ ArkTS å•å…ƒæµ‹è¯•æŒ‡å—ï¼š</p>
<h2 data-id="heading-0">1. æµ‹è¯•ç¯å¢ƒé…ç½®</h2>
<h3 data-id="heading-1">1.1 é¡¹ç›®ç»“æ„</h3>
<pre><code class="hljs language-css" lang="css">project/
â”œâ”€â”€ <span class="hljs-attribute">src</span>/
â”‚   â””â”€â”€ <span class="hljs-selector-tag">main</span>/
â”‚       â””â”€â”€ ets/
â”‚           â””â”€â”€ ...
â”œâ”€â”€ ohosTest/
â”‚   â””â”€â”€ <span class="hljs-attribute">src</span>/
â”‚       â””â”€â”€ test/
â”‚           â””â”€â”€ ets/
â”‚               â””â”€â”€ test/
â”‚                   â””â”€â”€ Example<span class="hljs-selector-class">.test</span><span class="hljs-selector-class">.ets</span>
â”‚               â””â”€â”€ TestAbility<span class="hljs-selector-class">.ts</span>
â”‚           â””â”€â”€ resources/
â”‚       â””â”€â”€ module<span class="hljs-selector-class">.json5</span>
</code></pre>
<h3 data-id="heading-2">1.2 module.json5 é…ç½®</h3>
<pre><code class="hljs language-json" lang="json"><span class="hljs-comment">// ohosTest/src/module.json5</span>
<span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"module"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"test"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"feature"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"srcEntrance"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"./ets/TestAbility.ts"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"$string:TestAbility_desc"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"mainElement"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"TestAbility"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"deviceTypes"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
      <span class="hljs-string">"phone"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"tablet"</span>
    <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"deliveryWithInstall"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"installationFree"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"pages"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"$profile:test_pages"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"abilities"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
      <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"TestAbility"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"srcEntrance"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"./ets/TestAbility.ts"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"$string:TestAbility_desc"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"icon"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"$media:icon"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"label"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"$string:TestAbility_label"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"startWindowIcon"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"$media:icon"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"startWindowBackground"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"$color:start_window_background"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"visible"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"skills"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
          <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">"actions"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
              <span class="hljs-string">"action.system.home"</span>
            <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"entities"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
              <span class="hljs-string">"entity.system.home"</span>
            <span class="hljs-punctuation">]</span>
          <span class="hljs-punctuation">}</span>
        <span class="hljs-punctuation">]</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">]</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h2 data-id="heading-3">2. åŸºç¡€å•å…ƒæµ‹è¯•</h2>
<h3 data-id="heading-4">2.1 å·¥å…·ç±»æµ‹è¯•</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// src/main/ets/utils/MathUtil.ets</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MathUtil</span> {
  <span class="hljs-keyword">static</span> <span class="hljs-title function_">add</span>(<span class="hljs-attr">a</span>: <span class="hljs-built_in">number</span>, <span class="hljs-attr">b</span>: <span class="hljs-built_in">number</span>): <span class="hljs-built_in">number</span> {
    <span class="hljs-keyword">return</span> a + b;
  }

  <span class="hljs-keyword">static</span> <span class="hljs-title function_">subtract</span>(<span class="hljs-attr">a</span>: <span class="hljs-built_in">number</span>, <span class="hljs-attr">b</span>: <span class="hljs-built_in">number</span>): <span class="hljs-built_in">number</span> {
    <span class="hljs-keyword">return</span> a - b;
  }

  <span class="hljs-keyword">static</span> <span class="hljs-title function_">multiply</span>(<span class="hljs-attr">a</span>: <span class="hljs-built_in">number</span>, <span class="hljs-attr">b</span>: <span class="hljs-built_in">number</span>): <span class="hljs-built_in">number</span> {
    <span class="hljs-keyword">return</span> a * b;
  }

  <span class="hljs-keyword">static</span> <span class="hljs-title function_">divide</span>(<span class="hljs-attr">a</span>: <span class="hljs-built_in">number</span>, <span class="hljs-attr">b</span>: <span class="hljs-built_in">number</span>): <span class="hljs-built_in">number</span> {
    <span class="hljs-keyword">if</span> (b === <span class="hljs-number">0</span>) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'Division by zero'</span>);
    }
    <span class="hljs-keyword">return</span> a / b;
  }

  <span class="hljs-keyword">static</span> <span class="hljs-title function_">isEven</span>(<span class="hljs-attr">num</span>: <span class="hljs-built_in">number</span>): <span class="hljs-built_in">boolean</span> {
    <span class="hljs-keyword">return</span> num % <span class="hljs-number">2</span> === <span class="hljs-number">0</span>;
  }

  <span class="hljs-keyword">static</span> <span class="hljs-title function_">factorial</span>(<span class="hljs-attr">n</span>: <span class="hljs-built_in">number</span>): <span class="hljs-built_in">number</span> {
    <span class="hljs-keyword">if</span> (n &lt; <span class="hljs-number">0</span>) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'Negative number'</span>);
    <span class="hljs-keyword">if</span> (n === <span class="hljs-number">0</span> || n === <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;
    <span class="hljs-keyword">return</span> n * <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">factorial</span>(n - <span class="hljs-number">1</span>);
  }
}
</code></pre>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ohosTest/src/test/ets/test/MathUtil.test.ets</span>
<span class="hljs-keyword">import</span> { describe, it, expect } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos/hypium'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">MathUtil</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'../../../src/main/ets/utils/MathUtil'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">mathUtilTest</span>(<span class="hljs-params"/>) {
  <span class="hljs-title function_">describe</span>(<span class="hljs-string">'MathUtil Tests'</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">it</span>(<span class="hljs-string">'should_add_two_numbers'</span>, <span class="hljs-number">0</span>, <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-keyword">const</span> result = <span class="hljs-title class_">MathUtil</span>.<span class="hljs-title function_">add</span>(<span class="hljs-number">2</span>, <span class="hljs-number">3</span>);
      <span class="hljs-title function_">expect</span>(result).<span class="hljs-title function_">assertEqual</span>(<span class="hljs-number">5</span>);
    });

    <span class="hljs-title function_">it</span>(<span class="hljs-string">'should_subtract_two_numbers'</span>, <span class="hljs-number">0</span>, <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-keyword">const</span> result = <span class="hljs-title class_">MathUtil</span>.<span class="hljs-title function_">subtract</span>(<span class="hljs-number">5</span>, <span class="hljs-number">3</span>);
      <span class="hljs-title function_">expect</span>(result).<span class="hljs-title function_">assertEqual</span>(<span class="hljs-number">2</span>);
    });

    <span class="hljs-title function_">it</span>(<span class="hljs-string">'should_multiply_two_numbers'</span>, <span class="hljs-number">0</span>, <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-keyword">const</span> result = <span class="hljs-title class_">MathUtil</span>.<span class="hljs-title function_">multiply</span>(<span class="hljs-number">4</span>, <span class="hljs-number">3</span>);
      <span class="hljs-title function_">expect</span>(result).<span class="hljs-title function_">assertEqual</span>(<span class="hljs-number">12</span>);
    });

    <span class="hljs-title function_">it</span>(<span class="hljs-string">'should_divide_two_numbers'</span>, <span class="hljs-number">0</span>, <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-keyword">const</span> result = <span class="hljs-title class_">MathUtil</span>.<span class="hljs-title function_">divide</span>(<span class="hljs-number">10</span>, <span class="hljs-number">2</span>);
      <span class="hljs-title function_">expect</span>(result).<span class="hljs-title function_">assertEqual</span>(<span class="hljs-number">5</span>);
    });

    <span class="hljs-title function_">it</span>(<span class="hljs-string">'should_throw_error_when_dividing_by_zero'</span>, <span class="hljs-number">0</span>, <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-keyword">try</span> {
        <span class="hljs-title class_">MathUtil</span>.<span class="hljs-title function_">divide</span>(<span class="hljs-number">10</span>, <span class="hljs-number">0</span>);
        <span class="hljs-title function_">expect</span>(<span class="hljs-literal">true</span>).<span class="hljs-title function_">assertFalse</span>(); <span class="hljs-comment">// ä¸åº”è¯¥æ‰§è¡Œåˆ°è¿™é‡Œ</span>
      } <span class="hljs-keyword">catch</span> (error) {
        <span class="hljs-title function_">expect</span>(error.<span class="hljs-property">message</span>).<span class="hljs-title function_">assertEqual</span>(<span class="hljs-string">'Division by zero'</span>);
      }
    });

    <span class="hljs-title function_">it</span>(<span class="hljs-string">'should_detect_even_numbers'</span>, <span class="hljs-number">0</span>, <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-title function_">expect</span>(<span class="hljs-title class_">MathUtil</span>.<span class="hljs-title function_">isEven</span>(<span class="hljs-number">4</span>)).<span class="hljs-title function_">assertTrue</span>();
      <span class="hljs-title function_">expect</span>(<span class="hljs-title class_">MathUtil</span>.<span class="hljs-title function_">isEven</span>(<span class="hljs-number">7</span>)).<span class="hljs-title function_">assertFalse</span>();
    });

    <span class="hljs-title function_">it</span>(<span class="hljs-string">'should_calculate_factorial'</span>, <span class="hljs-number">0</span>, <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-title function_">expect</span>(<span class="hljs-title class_">MathUtil</span>.<span class="hljs-title function_">factorial</span>(<span class="hljs-number">5</span>)).<span class="hljs-title function_">assertEqual</span>(<span class="hljs-number">120</span>);
      <span class="hljs-title function_">expect</span>(<span class="hljs-title class_">MathUtil</span>.<span class="hljs-title function_">factorial</span>(<span class="hljs-number">0</span>)).<span class="hljs-title function_">assertEqual</span>(<span class="hljs-number">1</span>);
    });

    <span class="hljs-title function_">it</span>(<span class="hljs-string">'should_throw_error_for_negative_factorial'</span>, <span class="hljs-number">0</span>, <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-keyword">try</span> {
        <span class="hljs-title class_">MathUtil</span>.<span class="hljs-title function_">factorial</span>(-<span class="hljs-number">1</span>);
        <span class="hljs-title function_">expect</span>(<span class="hljs-literal">true</span>).<span class="hljs-title function_">assertFalse</span>();
      } <span class="hljs-keyword">catch</span> (error) {
        <span class="hljs-title function_">expect</span>(error.<span class="hljs-property">message</span>).<span class="hljs-title function_">assertEqual</span>(<span class="hljs-string">'Negative number'</span>);
      }
    });
  });
}
</code></pre>
<h3 data-id="heading-5">2.2 ä¸šåŠ¡é€»è¾‘æµ‹è¯•</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// src/main/ets/services/UserService.ets</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserService</span> {
  <span class="hljs-keyword">private</span> <span class="hljs-attr">users</span>: <span class="hljs-title class_">Map</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-title class_">User</span>&gt; = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();

  <span class="hljs-title function_">addUser</span>(<span class="hljs-attr">user</span>: <span class="hljs-title class_">User</span>): <span class="hljs-built_in">boolean</span> {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">users</span>.<span class="hljs-title function_">has</span>(user.<span class="hljs-property">id</span>)) {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">users</span>.<span class="hljs-title function_">set</span>(user.<span class="hljs-property">id</span>, user);
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
  }

  <span class="hljs-title function_">getUser</span>(<span class="hljs-attr">id</span>: <span class="hljs-built_in">string</span>): <span class="hljs-title class_">User</span> | <span class="hljs-literal">undefined</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">users</span>.<span class="hljs-title function_">get</span>(id);
  }

  <span class="hljs-title function_">deleteUser</span>(<span class="hljs-attr">id</span>: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">boolean</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">users</span>.<span class="hljs-title function_">delete</span>(id);
  }

  <span class="hljs-title function_">getAllUsers</span>(): <span class="hljs-title class_">User</span>[] {
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">users</span>.<span class="hljs-title function_">values</span>());
  }

  <span class="hljs-title function_">updateUser</span>(<span class="hljs-attr">user</span>: <span class="hljs-title class_">User</span>): <span class="hljs-built_in">boolean</span> {
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">users</span>.<span class="hljs-title function_">has</span>(user.<span class="hljs-property">id</span>)) {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">users</span>.<span class="hljs-title function_">set</span>(user.<span class="hljs-property">id</span>, user);
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
  }
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">
    <span class="hljs-keyword">public</span> id: <span class="hljs-built_in">string</span>,
    <span class="hljs-keyword">public</span> name: <span class="hljs-built_in">string</span>,
    <span class="hljs-keyword">public</span> email: <span class="hljs-built_in">string</span>,
    <span class="hljs-keyword">public</span> age: <span class="hljs-built_in">number</span>
  </span>) {}
}
</code></pre>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ohosTest/src/test/ets/test/UserService.test.ets</span>
<span class="hljs-keyword">import</span> { describe, it, expect, beforeEach } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos/hypium'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">UserService</span>, <span class="hljs-title class_">User</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'../../../src/main/ets/services/UserService'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">userServiceTest</span>(<span class="hljs-params"/>) {
  <span class="hljs-title function_">describe</span>(<span class="hljs-string">'UserService Tests'</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">let</span> <span class="hljs-attr">userService</span>: <span class="hljs-title class_">UserService</span>;

    <span class="hljs-title function_">beforeEach</span>(<span class="hljs-function">() =&gt;</span> {
      userService = <span class="hljs-keyword">new</span> <span class="hljs-title class_">UserService</span>();
    });

    <span class="hljs-title function_">it</span>(<span class="hljs-string">'should_add_user_successfully'</span>, <span class="hljs-number">0</span>, <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-keyword">const</span> user = <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(<span class="hljs-string">'1'</span>, <span class="hljs-string">'John Doe'</span>, <span class="hljs-string">'john@example.com'</span>, <span class="hljs-number">30</span>);
      <span class="hljs-keyword">const</span> result = userService.<span class="hljs-title function_">addUser</span>(user);
      
      <span class="hljs-title function_">expect</span>(result).<span class="hljs-title function_">assertTrue</span>();
      <span class="hljs-title function_">expect</span>(userService.<span class="hljs-title function_">getUser</span>(<span class="hljs-string">'1'</span>)).<span class="hljs-title function_">assertEqual</span>(user);
    });

    <span class="hljs-title function_">it</span>(<span class="hljs-string">'should_not_add_duplicate_user'</span>, <span class="hljs-number">0</span>, <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-keyword">const</span> user = <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(<span class="hljs-string">'1'</span>, <span class="hljs-string">'John Doe'</span>, <span class="hljs-string">'john@example.com'</span>, <span class="hljs-number">30</span>);
      userService.<span class="hljs-title function_">addUser</span>(user);
      <span class="hljs-keyword">const</span> result = userService.<span class="hljs-title function_">addUser</span>(user);
      
      <span class="hljs-title function_">expect</span>(result).<span class="hljs-title function_">assertFalse</span>();
    });

    <span class="hljs-title function_">it</span>(<span class="hljs-string">'should_get_user_by_id'</span>, <span class="hljs-number">0</span>, <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-keyword">const</span> user = <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(<span class="hljs-string">'1'</span>, <span class="hljs-string">'John Doe'</span>, <span class="hljs-string">'john@example.com'</span>, <span class="hljs-number">30</span>);
      userService.<span class="hljs-title function_">addUser</span>(user);
      
      <span class="hljs-keyword">const</span> retrievedUser = userService.<span class="hljs-title function_">getUser</span>(<span class="hljs-string">'1'</span>);
      <span class="hljs-title function_">expect</span>(retrievedUser).<span class="hljs-title function_">assertEqual</span>(user);
    });

    <span class="hljs-title function_">it</span>(<span class="hljs-string">'should_return_undefined_for_nonexistent_user'</span>, <span class="hljs-number">0</span>, <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-keyword">const</span> retrievedUser = userService.<span class="hljs-title function_">getUser</span>(<span class="hljs-string">'nonexistent'</span>);
      <span class="hljs-title function_">expect</span>(retrievedUser).<span class="hljs-title function_">assertUndefined</span>();
    });

    <span class="hljs-title function_">it</span>(<span class="hljs-string">'should_delete_user'</span>, <span class="hljs-number">0</span>, <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-keyword">const</span> user = <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(<span class="hljs-string">'1'</span>, <span class="hljs-string">'John Doe'</span>, <span class="hljs-string">'john@example.com'</span>, <span class="hljs-number">30</span>);
      userService.<span class="hljs-title function_">addUser</span>(user);
      
      <span class="hljs-keyword">const</span> deleteResult = userService.<span class="hljs-title function_">deleteUser</span>(<span class="hljs-string">'1'</span>);
      <span class="hljs-title function_">expect</span>(deleteResult).<span class="hljs-title function_">assertTrue</span>();
      <span class="hljs-title function_">expect</span>(userService.<span class="hljs-title function_">getUser</span>(<span class="hljs-string">'1'</span>)).<span class="hljs-title function_">assertUndefined</span>();
    });

    <span class="hljs-title function_">it</span>(<span class="hljs-string">'should_return_false_when_deleting_nonexistent_user'</span>, <span class="hljs-number">0</span>, <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-keyword">const</span> deleteResult = userService.<span class="hljs-title function_">deleteUser</span>(<span class="hljs-string">'nonexistent'</span>);
      <span class="hljs-title function_">expect</span>(deleteResult).<span class="hljs-title function_">assertFalse</span>();
    });

    <span class="hljs-title function_">it</span>(<span class="hljs-string">'should_get_all_users'</span>, <span class="hljs-number">0</span>, <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-keyword">const</span> user1 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(<span class="hljs-string">'1'</span>, <span class="hljs-string">'John Doe'</span>, <span class="hljs-string">'john@example.com'</span>, <span class="hljs-number">30</span>);
      <span class="hljs-keyword">const</span> user2 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(<span class="hljs-string">'2'</span>, <span class="hljs-string">'Jane Smith'</span>, <span class="hljs-string">'jane@example.com'</span>, <span class="hljs-number">25</span>);
      
      userService.<span class="hljs-title function_">addUser</span>(user1);
      userService.<span class="hljs-title function_">addUser</span>(user2);
      
      <span class="hljs-keyword">const</span> allUsers = userService.<span class="hljs-title function_">getAllUsers</span>();
      <span class="hljs-title function_">expect</span>(allUsers.<span class="hljs-property">length</span>).<span class="hljs-title function_">assertEqual</span>(<span class="hljs-number">2</span>);
      <span class="hljs-title function_">expect</span>(allUsers).<span class="hljs-title function_">assertContain</span>(user1);
      <span class="hljs-title function_">expect</span>(allUsers).<span class="hljs-title function_">assertContain</span>(user2);
    });

    <span class="hljs-title function_">it</span>(<span class="hljs-string">'should_update_user'</span>, <span class="hljs-number">0</span>, <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-keyword">const</span> user = <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(<span class="hljs-string">'1'</span>, <span class="hljs-string">'John Doe'</span>, <span class="hljs-string">'john@example.com'</span>, <span class="hljs-number">30</span>);
      userService.<span class="hljs-title function_">addUser</span>(user);
      
      <span class="hljs-keyword">const</span> updatedUser = <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(<span class="hljs-string">'1'</span>, <span class="hljs-string">'John Updated'</span>, <span class="hljs-string">'updated@example.com'</span>, <span class="hljs-number">31</span>);
      <span class="hljs-keyword">const</span> updateResult = userService.<span class="hljs-title function_">updateUser</span>(updatedUser);
      
      <span class="hljs-title function_">expect</span>(updateResult).<span class="hljs-title function_">assertTrue</span>();
      <span class="hljs-title function_">expect</span>(userService.<span class="hljs-title function_">getUser</span>(<span class="hljs-string">'1'</span>)).<span class="hljs-title function_">assertEqual</span>(updatedUser);
    });

    <span class="hljs-title function_">it</span>(<span class="hljs-string">'should_return_false_when_updating_nonexistent_user'</span>, <span class="hljs-number">0</span>, <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-keyword">const</span> user = <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(<span class="hljs-string">'1'</span>, <span class="hljs-string">'John Doe'</span>, <span class="hljs-string">'john@example.com'</span>, <span class="hljs-number">30</span>);
      <span class="hljs-keyword">const</span> updateResult = userService.<span class="hljs-title function_">updateUser</span>(user);
      
      <span class="hljs-title function_">expect</span>(updateResult).<span class="hljs-title function_">assertFalse</span>();
    });
  });
}
</code></pre>
<h2 data-id="heading-6">3. å¼‚æ­¥æµ‹è¯•</h2>
<h3 data-id="heading-7">3.1 å¼‚æ­¥æœåŠ¡æµ‹è¯•</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// src/main/ets/services/ApiService.ets</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ApiService</span> {
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">fetchData</span>(<span class="hljs-attr">url</span>: <span class="hljs-built_in">string</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">string</span>&gt; {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
      <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-keyword">if</span> (url.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">'https://'</span>)) {
          <span class="hljs-title function_">resolve</span>(<span class="hljs-string">`Data from <span class="hljs-subst">${url}</span>`</span>);
        } <span class="hljs-keyword">else</span> {
          <span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'Invalid URL'</span>));
        }
      }, <span class="hljs-number">100</span>);
    });
  }

  <span class="hljs-keyword">async</span> <span class="hljs-title function_">processUserData</span>(<span class="hljs-attr">userId</span>: <span class="hljs-built_in">string</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">UserData</span>&gt; {
    <span class="hljs-comment">// æ¨¡æ‹Ÿ API è°ƒç”¨</span>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> {
      <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-title function_">resolve</span>({
          <span class="hljs-attr">id</span>: userId,
          <span class="hljs-attr">name</span>: <span class="hljs-string">`User <span class="hljs-subst">${userId}</span>`</span>,
          <span class="hljs-attr">score</span>: <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * <span class="hljs-number">100</span>
        });
      }, <span class="hljs-number">50</span>);
    });
  }
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">UserData</span> {
  <span class="hljs-attr">id</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">score</span>: <span class="hljs-built_in">number</span>;
}
</code></pre>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ohosTest/src/test/ets/test/ApiService.test.ets</span>
<span class="hljs-keyword">import</span> { describe, it, expect } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos/hypium'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ApiService</span>, <span class="hljs-title class_">UserData</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'../../../src/main/ets/services/ApiService'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">apiServiceTest</span>(<span class="hljs-params"/>) {
  <span class="hljs-title function_">describe</span>(<span class="hljs-string">'ApiService Tests'</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> apiService = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ApiService</span>();

    <span class="hljs-title function_">it</span>(<span class="hljs-string">'should_fetch_data_successfully'</span>, <span class="hljs-number">0</span>, <span class="hljs-keyword">async</span> () =&gt; {
      <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> apiService.<span class="hljs-title function_">fetchData</span>(<span class="hljs-string">'https://api.example.com/data'</span>);
      <span class="hljs-title function_">expect</span>(result).<span class="hljs-title function_">assertEqual</span>(<span class="hljs-string">'Data from https://api.example.com/data'</span>);
    });

    <span class="hljs-title function_">it</span>(<span class="hljs-string">'should_reject_invalid_url'</span>, <span class="hljs-number">0</span>, <span class="hljs-keyword">async</span> () =&gt; {
      <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">await</span> apiService.<span class="hljs-title function_">fetchData</span>(<span class="hljs-string">'invalid-url'</span>);
        <span class="hljs-title function_">expect</span>(<span class="hljs-literal">true</span>).<span class="hljs-title function_">assertFalse</span>(); <span class="hljs-comment">// ä¸åº”è¯¥æ‰§è¡Œåˆ°è¿™é‡Œ</span>
      } <span class="hljs-keyword">catch</span> (error) {
        <span class="hljs-title function_">expect</span>(error.<span class="hljs-property">message</span>).<span class="hljs-title function_">assertEqual</span>(<span class="hljs-string">'Invalid URL'</span>);
      }
    });

    <span class="hljs-title function_">it</span>(<span class="hljs-string">'should_process_user_data'</span>, <span class="hljs-number">0</span>, <span class="hljs-keyword">async</span> () =&gt; {
      <span class="hljs-keyword">const</span> <span class="hljs-attr">userData</span>: <span class="hljs-title class_">UserData</span> = <span class="hljs-keyword">await</span> apiService.<span class="hljs-title function_">processUserData</span>(<span class="hljs-string">'123'</span>);
      
      <span class="hljs-title function_">expect</span>(userData.<span class="hljs-property">id</span>).<span class="hljs-title function_">assertEqual</span>(<span class="hljs-string">'123'</span>);
      <span class="hljs-title function_">expect</span>(userData.<span class="hljs-property">name</span>).<span class="hljs-title function_">assertEqual</span>(<span class="hljs-string">'User 123'</span>);
      <span class="hljs-title function_">expect</span>(userData.<span class="hljs-property">score</span>).<span class="hljs-title function_">assertLarger</span>(<span class="hljs-number">0</span>);
      <span class="hljs-title function_">expect</span>(userData.<span class="hljs-property">score</span>).<span class="hljs-title function_">assertLess</span>(<span class="hljs-number">100</span>);
    });

    <span class="hljs-title function_">it</span>(<span class="hljs-string">'should_process_multiple_users'</span>, <span class="hljs-number">0</span>, <span class="hljs-keyword">async</span> () =&gt; {
      <span class="hljs-keyword">const</span> promises = [
        apiService.<span class="hljs-title function_">processUserData</span>(<span class="hljs-string">'1'</span>),
        apiService.<span class="hljs-title function_">processUserData</span>(<span class="hljs-string">'2'</span>),
        apiService.<span class="hljs-title function_">processUserData</span>(<span class="hljs-string">'3'</span>)
      ];
      
      <span class="hljs-keyword">const</span> results = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>(promises);
      
      <span class="hljs-title function_">expect</span>(results.<span class="hljs-property">length</span>).<span class="hljs-title function_">assertEqual</span>(<span class="hljs-number">3</span>);
      results.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">userData, index</span>) =&gt;</span> {
        <span class="hljs-title function_">expect</span>(userData.<span class="hljs-property">id</span>).<span class="hljs-title function_">assertEqual</span>((index + <span class="hljs-number">1</span>).<span class="hljs-title function_">toString</span>());
        <span class="hljs-title function_">expect</span>(userData.<span class="hljs-property">name</span>).<span class="hljs-title function_">assertEqual</span>(<span class="hljs-string">`User <span class="hljs-subst">${index + <span class="hljs-number">1</span>}</span>`</span>);
      });
    });
  });
}
</code></pre>
<h2 data-id="heading-8">4. ç»„ä»¶æµ‹è¯•</h2>
<h3 data-id="heading-9">4.1 è‡ªå®šä¹‰ç»„ä»¶æµ‹è¯•</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// src/main/ets/components/CounterComponent.ets</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">export</span> struct <span class="hljs-title class_">CounterComponent</span> {
  <span class="hljs-meta">@State</span> <span class="hljs-attr">count</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;
  <span class="hljs-keyword">private</span> <span class="hljs-attr">maxCount</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">10</span>;

  <span class="hljs-title function_">build</span>(<span class="hljs-params"/>) {
    <span class="hljs-title class_">Column</span>() {
      <span class="hljs-title class_">Text</span>(<span class="hljs-string">`Count: <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.count}</span>`</span>)
        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">20</span>)
        .<span class="hljs-title function_">fontColor</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span> &gt;= <span class="hljs-variable language_">this</span>.<span class="hljs-property">maxCount</span> ? <span class="hljs-title class_">Color</span>.<span class="hljs-property">Red</span> : <span class="hljs-title class_">Color</span>.<span class="hljs-property">Black</span>)
      
      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'Increment'</span>)
        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {
          <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span> &lt; <span class="hljs-variable language_">this</span>.<span class="hljs-property">maxCount</span>) {
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span>++;
          }
        })
        .<span class="hljs-title function_">enabled</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span> &lt; <span class="hljs-variable language_">this</span>.<span class="hljs-property">maxCount</span>)
      
      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'Reset'</span>)
        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span> = <span class="hljs-number">0</span>;
        })
    }
  }

  <span class="hljs-comment">// å…¬å…±æ–¹æ³•ç”¨äºæµ‹è¯•</span>
  <span class="hljs-title function_">increment</span>(): <span class="hljs-built_in">void</span> {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span> &lt; <span class="hljs-variable language_">this</span>.<span class="hljs-property">maxCount</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span>++;
    }
  }

  <span class="hljs-title function_">reset</span>(): <span class="hljs-built_in">void</span> {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span> = <span class="hljs-number">0</span>;
  }

  <span class="hljs-title function_">getCount</span>(): <span class="hljs-built_in">number</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span>;
  }

  <span class="hljs-title function_">isMaxReached</span>(): <span class="hljs-built_in">boolean</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span> &gt;= <span class="hljs-variable language_">this</span>.<span class="hljs-property">maxCount</span>;
  }
}
</code></pre>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ohosTest/src/test/ets/test/CounterComponent.test.ets</span>
<span class="hljs-keyword">import</span> { describe, it, expect, beforeEach } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos/hypium'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">CounterComponent</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'../../../src/main/ets/components/CounterComponent'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">counterComponentTest</span>(<span class="hljs-params"/>) {
  <span class="hljs-title function_">describe</span>(<span class="hljs-string">'CounterComponent Tests'</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">let</span> <span class="hljs-attr">counter</span>: <span class="hljs-title class_">CounterComponent</span>;

    <span class="hljs-title function_">beforeEach</span>(<span class="hljs-function">() =&gt;</span> {
      counter = <span class="hljs-keyword">new</span> <span class="hljs-title class_">CounterComponent</span>();
    });

    <span class="hljs-title function_">it</span>(<span class="hljs-string">'should_initialize_with_zero'</span>, <span class="hljs-number">0</span>, <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-title function_">expect</span>(counter.<span class="hljs-title function_">getCount</span>()).<span class="hljs-title function_">assertEqual</span>(<span class="hljs-number">0</span>);
      <span class="hljs-title function_">expect</span>(counter.<span class="hljs-title function_">isMaxReached</span>()).<span class="hljs-title function_">assertFalse</span>();
    });

    <span class="hljs-title function_">it</span>(<span class="hljs-string">'should_increment_count'</span>, <span class="hljs-number">0</span>, <span class="hljs-function">() =&gt;</span> {
      counter.<span class="hljs-title function_">increment</span>();
      <span class="hljs-title function_">expect</span>(counter.<span class="hljs-title function_">getCount</span>()).<span class="hljs-title function_">assertEqual</span>(<span class="hljs-number">1</span>);
    });

    <span class="hljs-title function_">it</span>(<span class="hljs-string">'should_not_exceed_max_count'</span>, <span class="hljs-number">0</span>, <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">15</span>; i++) {
        counter.<span class="hljs-title function_">increment</span>();
      }
      <span class="hljs-title function_">expect</span>(counter.<span class="hljs-title function_">getCount</span>()).<span class="hljs-title function_">assertEqual</span>(<span class="hljs-number">10</span>);
      <span class="hljs-title function_">expect</span>(counter.<span class="hljs-title function_">isMaxReached</span>()).<span class="hljs-title function_">assertTrue</span>();
    });

    <span class="hljs-title function_">it</span>(<span class="hljs-string">'should_reset_count'</span>, <span class="hljs-number">0</span>, <span class="hljs-function">() =&gt;</span> {
      counter.<span class="hljs-title function_">increment</span>();
      counter.<span class="hljs-title function_">increment</span>();
      <span class="hljs-title function_">expect</span>(counter.<span class="hljs-title function_">getCount</span>()).<span class="hljs-title function_">assertEqual</span>(<span class="hljs-number">2</span>);
      
      counter.<span class="hljs-title function_">reset</span>();
      <span class="hljs-title function_">expect</span>(counter.<span class="hljs-title function_">getCount</span>()).<span class="hljs-title function_">assertEqual</span>(<span class="hljs-number">0</span>);
      <span class="hljs-title function_">expect</span>(counter.<span class="hljs-title function_">isMaxReached</span>()).<span class="hljs-title function_">assertFalse</span>();
    });

    <span class="hljs-title function_">it</span>(<span class="hljs-string">'should_handle_multiple_operations'</span>, <span class="hljs-number">0</span>, <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-comment">// å¢åŠ  5 æ¬¡</span>
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">5</span>; i++) {
        counter.<span class="hljs-title function_">increment</span>();
      }
      <span class="hljs-title function_">expect</span>(counter.<span class="hljs-title function_">getCount</span>()).<span class="hljs-title function_">assertEqual</span>(<span class="hljs-number">5</span>);
      
      <span class="hljs-comment">// é‡ç½®</span>
      counter.<span class="hljs-title function_">reset</span>();
      <span class="hljs-title function_">expect</span>(counter.<span class="hljs-title function_">getCount</span>()).<span class="hljs-title function_">assertEqual</span>(<span class="hljs-number">0</span>);
      
      <span class="hljs-comment">// å†æ¬¡å¢åŠ </span>
      counter.<span class="hljs-title function_">increment</span>();
      <span class="hljs-title function_">expect</span>(counter.<span class="hljs-title function_">getCount</span>()).<span class="hljs-title function_">assertEqual</span>(<span class="hljs-number">1</span>);
    });
  });
}
</code></pre>
<h2 data-id="heading-10">5. Mock å’Œ Stub æµ‹è¯•</h2>
<h3 data-id="heading-11">5.1 ä¾èµ–æ³¨å…¥æµ‹è¯•</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// src/main/ets/services/WeatherService.ets</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">WeatherService</span> {
  <span class="hljs-keyword">private</span> <span class="hljs-attr">apiKey</span>: <span class="hljs-built_in">string</span>;

  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">apiKey: <span class="hljs-built_in">string</span></span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">apiKey</span> = apiKey;
  }

  <span class="hljs-keyword">async</span> <span class="hljs-title function_">getWeather</span>(<span class="hljs-attr">city</span>: <span class="hljs-built_in">string</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">WeatherData</span>&gt; {
    <span class="hljs-comment">// å®é™…åº”ç”¨ä¸­è¿™é‡Œä¼šè°ƒç”¨çœŸå®çš„ API</span>
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'Not implemented in tests'</span>);
  }
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">WeatherData</span> {
  <span class="hljs-attr">city</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">temperature</span>: <span class="hljs-built_in">number</span>;
  <span class="hljs-attr">description</span>: <span class="hljs-built_in">string</span>;
}

<span class="hljs-comment">// æ¨¡æ‹Ÿå®ç°ç”¨äºæµ‹è¯•</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MockWeatherService</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">WeatherService</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">super</span>(<span class="hljs-string">'test-key'</span>);
  }

  <span class="hljs-keyword">override</span> <span class="hljs-keyword">async</span> <span class="hljs-title function_">getWeather</span>(<span class="hljs-attr">city</span>: <span class="hljs-built_in">string</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">WeatherData</span>&gt; {
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>({
      <span class="hljs-attr">city</span>: city,
      <span class="hljs-attr">temperature</span>: <span class="hljs-number">25</span>,
      <span class="hljs-attr">description</span>: <span class="hljs-string">'Sunny'</span>
    });
  }
}
</code></pre>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ohosTest/src/test/ets/test/WeatherService.test.ets</span>
<span class="hljs-keyword">import</span> { describe, it, expect } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos/hypium'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">WeatherService</span>, <span class="hljs-title class_">MockWeatherService</span>, <span class="hljs-title class_">WeatherData</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'../../../src/main/ets/services/WeatherService'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">weatherServiceTest</span>(<span class="hljs-params"/>) {
  <span class="hljs-title function_">describe</span>(<span class="hljs-string">'WeatherService Tests'</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">it</span>(<span class="hljs-string">'should_create_weather_service_with_api_key'</span>, <span class="hljs-number">0</span>, <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-keyword">const</span> weatherService = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WeatherService</span>(<span class="hljs-string">'real-api-key'</span>);
      <span class="hljs-comment">// å¯ä»¥éªŒè¯æ„é€ å‡½æ•°é€»è¾‘</span>
      <span class="hljs-title function_">expect</span>(weatherService).<span class="hljs-title function_">not</span>().<span class="hljs-title function_">assertUndefined</span>();
    });

    <span class="hljs-title function_">it</span>(<span class="hljs-string">'should_get_weather_data_using_mock'</span>, <span class="hljs-number">0</span>, <span class="hljs-keyword">async</span> () =&gt; {
      <span class="hljs-keyword">const</span> mockService = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MockWeatherService</span>();
      <span class="hljs-keyword">const</span> <span class="hljs-attr">weatherData</span>: <span class="hljs-title class_">WeatherData</span> = <span class="hljs-keyword">await</span> mockService.<span class="hljs-title function_">getWeather</span>(<span class="hljs-string">'Beijing'</span>);
      
      <span class="hljs-title function_">expect</span>(weatherData.<span class="hljs-property">city</span>).<span class="hljs-title function_">assertEqual</span>(<span class="hljs-string">'Beijing'</span>);
      <span class="hljs-title function_">expect</span>(weatherData.<span class="hljs-property">temperature</span>).<span class="hljs-title function_">assertEqual</span>(<span class="hljs-number">25</span>);
      <span class="hljs-title function_">expect</span>(weatherData.<span class="hljs-property">description</span>).<span class="hljs-title function_">assertEqual</span>(<span class="hljs-string">'Sunny'</span>);
    });

    <span class="hljs-title function_">it</span>(<span class="hljs-string">'should_handle_multiple_cities_with_mock'</span>, <span class="hljs-number">0</span>, <span class="hljs-keyword">async</span> () =&gt; {
      <span class="hljs-keyword">const</span> mockService = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MockWeatherService</span>();
      
      <span class="hljs-keyword">const</span> cities = [<span class="hljs-string">'Beijing'</span>, <span class="hljs-string">'Shanghai'</span>, <span class="hljs-string">'Guangzhou'</span>];
      <span class="hljs-keyword">const</span> promises = cities.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">city</span> =&gt;</span> mockService.<span class="hljs-title function_">getWeather</span>(city));
      <span class="hljs-keyword">const</span> results = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>(promises);
      
      <span class="hljs-title function_">expect</span>(results.<span class="hljs-property">length</span>).<span class="hljs-title function_">assertEqual</span>(<span class="hljs-number">3</span>);
      results.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">weatherData, index</span>) =&gt;</span> {
        <span class="hljs-title function_">expect</span>(weatherData.<span class="hljs-property">city</span>).<span class="hljs-title function_">assertEqual</span>(cities[index]);
        <span class="hljs-title function_">expect</span>(weatherData.<span class="hljs-property">temperature</span>).<span class="hljs-title function_">assertEqual</span>(<span class="hljs-number">25</span>);
      });
    });
  });
}
</code></pre>
<h2 data-id="heading-12">6. æµ‹è¯•è¿è¡Œé…ç½®</h2>
<h3 data-id="heading-13">6.1 æµ‹è¯•åˆ—è¡¨æ–‡ä»¶</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ohosTest/src/test/ets/test/TestList.test.ets</span>
<span class="hljs-keyword">import</span> mathUtilTest <span class="hljs-keyword">from</span> <span class="hljs-string">'./MathUtil.test.ets'</span>;
<span class="hljs-keyword">import</span> userServiceTest <span class="hljs-keyword">from</span> <span class="hljs-string">'./UserService.test.ets'</span>;
<span class="hljs-keyword">import</span> apiServiceTest <span class="hljs-keyword">from</span> <span class="hljs-string">'./ApiService.test.ets'</span>;
<span class="hljs-keyword">import</span> counterComponentTest <span class="hljs-keyword">from</span> <span class="hljs-string">'./CounterComponent.test.ets'</span>;
<span class="hljs-keyword">import</span> weatherServiceTest <span class="hljs-keyword">from</span> <span class="hljs-string">'./WeatherService.test.ets'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">testList</span>(<span class="hljs-params"/>) {
  <span class="hljs-title function_">mathUtilTest</span>();
  <span class="hljs-title function_">userServiceTest</span>();
  <span class="hljs-title function_">apiServiceTest</span>();
  <span class="hljs-title function_">counterComponentTest</span>();
  <span class="hljs-title function_">weatherServiceTest</span>();
}
</code></pre>
<h3 data-id="heading-14">6.2 è¿è¡Œæµ‹è¯•</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åœ¨é¡¹ç›®æ ¹ç›®å½•è¿è¡Œ</span>
./gradlew hmosTest
<span class="hljs-comment"># æˆ–è€…</span>
npm <span class="hljs-built_in">test</span>
</code></pre>
<h2 data-id="heading-15">7. æµ‹è¯•æœ€ä½³å®è·µ</h2>
<h3 data-id="heading-16">7.1 æµ‹è¯•å‘½åè§„èŒƒ</h3>
<ul>
<li>æµ‹è¯•æ–¹æ³•ååº”è¯¥æè¿°æ€§å¾ˆå¼º</li>
<li>ä½¿ç”¨ <code>should_</code> å‰ç¼€æè¿°é¢„æœŸè¡Œä¸º</li>
<li>æµ‹è¯•ç”¨ä¾‹åº”è¯¥ç‹¬ç«‹ï¼Œä¸ä¾èµ–å…¶ä»–æµ‹è¯•</li>
</ul>
<h3 data-id="heading-17">7.2 æµ‹è¯•ç»„ç»‡ç»“æ„</h3>
<ul>
<li>æ¯ä¸ªè¢«æµ‹è¯•ç±»å¯¹åº”ä¸€ä¸ªæµ‹è¯•æ–‡ä»¶</li>
<li>ä½¿ç”¨ <code>describe</code> å—ç»„ç»‡ç›¸å…³æµ‹è¯•</li>
<li>ä½¿ç”¨ <code>beforeEach</code> è¿›è¡Œæµ‹è¯•å‡†å¤‡</li>
</ul>
<h3 data-id="heading-18">7.3 æ–­è¨€ä½¿ç”¨</h3>
<ul>
<li>ä½¿ç”¨æ˜ç¡®çš„æ–­è¨€æ–¹æ³•</li>
<li>ä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹ä¸€ä¸ªæ–­è¨€ï¼ˆç†æƒ³æƒ…å†µï¼‰</li>
<li>æµ‹è¯•è¾¹ç•Œæ¡ä»¶å’Œå¼‚å¸¸æƒ…å†µ</li>
</ul>
<p>è¿™æ ·å®Œæ•´çš„å•å…ƒæµ‹è¯•æ¡†æ¶å¯ä»¥ç¡®ä¿ ArkTS ä»£ç çš„è´¨é‡å’Œå¯é æ€§ï¼Œæ”¯æŒ TDDï¼ˆæµ‹è¯•é©±åŠ¨å¼€å‘ï¼‰å®è·µã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[JavaScript åŸå‹ï¼åŸå‹é“¾]]></title>    <link>https://juejin.cn/post/7572382777838944296</link>    <guid>https://juejin.cn/post/7572382777838944296</guid>    <pubDate>2025-11-15T02:11:44.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572382777838944296" data-draft-id="7572455881028517897" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="JavaScript åŸå‹ï¼åŸå‹é“¾"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2025-11-15T02:11:44.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Achieveå‰ç«¯å®éªŒå®¤"/> <meta itemprop="url" content="https://juejin.cn/user/1908407914473438"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            JavaScript åŸå‹ï¼åŸå‹é“¾
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1908407914473438/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Achieveå‰ç«¯å®éªŒå®¤
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-15T02:11:44.000Z" title="Sat Nov 15 2025 02:11:44 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">çƒ­èº«</h2>
<p>å…ˆæ¥çœ‹ä¸€é“é¢˜ï¼š</p>
<p>è¯·ä½ ç¼–å†™ä¸€ä¸ªå‡½æ•°ï¼Œæ£€æŸ¥ç»™å®šçš„å€¼æ˜¯å¦æ˜¯ç»™å®šç±»æˆ–è¶…ç±»çš„å®ä¾‹ã€‚</p>
<p>å¯ä»¥ä¼ é€’ç»™å‡½æ•°çš„æ•°æ®ç±»å‹æ²¡æœ‰é™åˆ¶ã€‚ä¾‹å¦‚ï¼Œå€¼æˆ–ç±»å¯èƒ½æ˜¯  undefined ã€‚</p>
<p>Leetcodeï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fleetcode.cn%2Fproblems%2Fcheck-if-object-instance-of-class%2Fdescription%2F" target="_blank" title="https://leetcode.cn/problems/check-if-object-instance-of-class/description/" ref="nofollow noopener noreferrer">2618 æ£€æŸ¥æ˜¯å¦ç±»çš„å¯¹è±¡å®ä¾‹</a></p>
<p>ä½ å¯èƒ½ä¼šå¾ˆè½»æ¾çš„ç”¨ instanceof å†™å‡ºæ¥ï¼š<code>obj instanceof class</code> è¿™ç§å½¢å¼çš„åˆ¤æ–­ã€‚</p>
<p>class æ˜¯ es6 å¼•å…¥çš„æ–°çš„ä¸€ä¸ªå…³é”®å­—ï¼Œä»–å¯ä»¥è®©æˆ‘ä»¬åœ¨ JavaScript ä¸­æ›´åŠ å®¹æ˜“ä½¿ç”¨é¢å‘å¯¹è±¡çš„æ€ç»´å»ç¼–å†™ä»£ç ï¼Œè®©å¯¹è±¡ï¼ŒåŸå‹è¿™äº›ä¸œè¥¿æ›´åŠ æ¸…æ™°ã€‚</p>
<p>åŒæ ·çš„ï¼Œå¼•å…¥ instanceof åˆ™æ˜¯æ–¹ä¾¿æˆ‘ä»¬å»ç†è§£ï¼Œä¸å¿…å†™ä¸€å¥—å¤æ‚çš„ä»£ç æ¥åˆ¤æ–­å®ä¾‹å’Œç±»çš„å…³ç³»ã€‚</p>
<p>é‚£ä¹ˆï¼Œclass è¿™ä¸ªå…³é”®å­—å¸®æˆ‘ä»¬åšäº†ä»€ä¹ˆï¼Ÿè€Œ instanceof åˆå¸®æˆ‘ä»¬ç®€åŒ–äº†ä»€ä¹ˆï¼Ÿ</p>
<h2 data-id="heading-1">åŸå‹</h2>
<p>é¦–å…ˆä¾æ—§æ˜¯æ¥è®²é‚£äº›å‰äººå·²ç»è¯´çƒ‚äº†çš„ä¸œè¥¿ï¼ŒåŸå‹ã€‚</p>
<h3 data-id="heading-2">åŸå‹è®¾è®¡æ¨¡å¼</h3>
<p>åŸå‹é¦–å…ˆæ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­çš„ä¸€ä¸ªæ¦‚å¿µï¼Œæ˜¯ä¸€ç§è®¾è®¡æ¨¡å¼ï¼Œä»–çš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼Œâ€‹<em><strong>é€šè¿‡å…±äº«å±æ€§å’Œæ–¹æ³•æ¥å®ç°å¯¹è±¡ä¹‹é—´çš„ä»£ç é‡ç”¨</strong></em>ã€‚è¯´å®è¯ï¼Œè¿™ä¸ªå¬ç€ä»¤äººæ„Ÿè§‰åƒæ˜¯åœ¨è®²ç±»ç»§æ‰¿ï¼Œç›®å‰çš„ç¼–ç¨‹è¯­è¨€å¤šæ˜¯é€šè¿‡ç±»ç»§æ‰¿çš„æ–¹å¼æ”¯æŒé¢å‘å¯¹è±¡çš„ï¼Œè€Œæˆ‘ä»¬æ‰€ä½¿ç”¨çš„ JavaScript åˆ™æ˜¯é€šè¿‡åŸå‹é“¾æ¥æ”¯æŒçš„é¢å‘å¯¹è±¡çš„[1]ï¼Œä¸”æŒ‰ä¸‹ä¸è¡¨ã€‚</p>
<p>æˆ‘ä»¬ä¸å¦¨å…ˆç»™åŸå‹ä¸‹ä¸€ä¸ªå®šä¹‰ï¼š<em><strong>åŸå‹å°±æ˜¯ä¸€ä¸ªç”¨äºåˆ›å»ºå¯¹è±¡çš„æ¨¡æ¿ï¼Œä»–å®šä¹‰äº†ä¸€ç³»åˆ—çš„å±æ€§å’Œæ–¹æ³•ï¼ŒåŸºäºåŸå‹åˆ›å»ºçš„å¯¹è±¡ä¹‹é—´å…±äº«ä¸€äº›å±æ€§å’Œæ–¹æ³•ã€‚</strong></em></p>
<p>æ ¹æ®å®šä¹‰ï¼Œæˆ‘ä»¬å†™å‡ºçš„ <strong>JavaScript</strong> çš„å®ç°ä»£ç åº”è¯¥æ˜¯è¿™æ ·çš„ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> boxPrototype = {
  <span class="hljs-attr">value</span>: <span class="hljs-number">1</span>,
  <span class="hljs-title function_">getValue</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">value</span>;
  }
}

<span class="hljs-keyword">const</span> box1 = {};
<span class="hljs-keyword">const</span> box2 = {};
<span class="hljs-keyword">const</span> box3 = {};
<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>(box1, boxPrototype);
<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>(box2, boxPrototype);
box2.<span class="hljs-property">value</span> = <span class="hljs-number">2</span>;
<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>(box3, boxPrototype);
box3.<span class="hljs-property">value</span> = <span class="hljs-number">3</span>;

box1.<span class="hljs-property">getValue</span> === boxPrototype.<span class="hljs-property">getValue</span>; <span class="hljs-comment">// true</span>
box2.<span class="hljs-property">getValue</span> === boxPrototype.<span class="hljs-property">getValue</span>; <span class="hljs-comment">// true</span>
box3.<span class="hljs-property">getValue</span> === boxPrototype.<span class="hljs-property">getValue</span>; <span class="hljs-comment">// true</span>
</code></pre>
<ol>
<li>æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªåŸå‹ <code>boxPrototype</code></li>
<li>åŸºäºåŸå‹ <code>boxPrototype</code> åˆ›å»ºï¼ˆå³æ‹·è´ã€å¤åˆ¶ï¼‰äº†ä¸‰ä¸ªå¯¹è±¡</li>
<li>ä¸‰ä¸ªå¯¹è±¡ä¹‹é—´å„è‡ªæœ‰è‡ªå·±çš„ value å€¼ï¼Œä½†æ˜¯å¼•ç”¨éƒ½æ˜¯çš„ <code>boxPrototype</code>â€‹ çš„ <code>getValue</code> å‡½æ•°ï¼Œå³å…±äº«äº†æ–¹æ³•ã€‚</li>
</ol>
<p>åŸå‹è®¾è®¡æ¨¡å¼æœ€ä¸»è¦çš„ä¼˜ç‚¹æ˜¯<em><strong>å‡å°‘äº†å¯¹è±¡åˆ›å»ºçš„æ—¶é—´å’Œæˆæœ¬ï¼Œé€šè¿‡æ‹·è´åŸå‹å¯¹è±¡æ¥åˆ›å»ºæ–°çš„å¯¹è±¡ï¼Œé¿å…é‡å¤ä½¿ç”¨æ„é€ å‡½æ•°åˆå§‹åŒ–çš„æ“ä½œï¼Œæé«˜äº†åˆ›å»ºå¯¹è±¡çš„æ•ˆç‡ã€‚</strong></em></p>
<p>åœ¨ä¸åŒçš„ç¼–ç¨‹è¯­è¨€ä¸­ï¼ŒåŸå‹è®¾è®¡æ¨¡å¼çš„å®ç°å‡æœ‰å·®å¼‚ï¼ˆæ·±æ‹·è´ã€æµ…æ‹·è´ä»¥åŠè¯­è¨€ç‰¹æ€§ï¼‰ï¼Œåœ¨ JavaScript è‡ªç„¶ä¹Ÿæ˜¯å¯ä»¥æœ‰ä¸ä¸€æ ·çš„å®ç°ã€‚</p>
<p>â€</p>
<h3 data-id="heading-3">JavaScript ä¸­çš„åŸå‹</h3>
<p>å…ˆç»™å‡ºç­”æ¡ˆï¼šâ€‹<strong>åŸå‹å®é™…å°±æ˜¯ä¸€ä¸ªå¯¹è±¡</strong>ã€‚</p>
<p>æˆ‘ä»¬åœ¨ä¸Šæ–‡çš„åŸå‹è®¾è®¡æ¨¡å¼ä¸­æ¥è§¦åˆ°äº†<strong>åŸå‹å¯¹è±¡</strong>å’Œâ€‹<strong>å…‹éš†å¯¹è±¡</strong>ï¼Œå¹¶ç»™å‡ºäº† JavaScript ä¸­çš„ä¸€ç§å®ç°ï¼Œä½†æ˜¯æˆ‘ä»¬ä¸éš¾å‘ç°ï¼Œåœ¨è¿™æ ·çš„å®ç°ä¸‹ï¼ŒåŸå‹å¯¹è±¡å’Œå…‹éš†å¯¹è±¡æ˜¯æ¯”è¾ƒç‹¬ç«‹çš„ä¸¤ä¸ªå¯¹è±¡ï¼ˆé™¤äº†å‡½æ•°èƒ½å¤Ÿå…±äº«ï¼Œå…¶ä»–å±æ€§äº’ç›¸ä¹‹é—´æ˜¯æ— æ³•è®¿é—®åˆ°çš„ï¼‰ã€‚</p>
<p>æƒ³è¦è¢«è®¿é—®åˆ°ä¹Ÿä¸æ˜¯ä¸å¯ä»¥ï¼Œåªè¦æˆ‘ä»¬ä¿å­˜åŸå‹å¯¹è±¡çš„é“¾æ¥å³å¯ï¼ŒåŒæ—¶ä¸ºäº†é¿å…æ··ä¹±ï¼Œæˆ‘ä»¬ä¸ºå…¶åˆ¶å®šäº†æ ‡å‡†ï¼š</p>
<p>éµå¾ª ECMAScript æ ‡å‡†ï¼Œç¬¦å· <code>someObject.[[Prototype]]</code>â€‹ ç”¨äºæ ‡è¯† <code>someObject</code>â€‹ çš„åŸå‹ã€‚å†…éƒ¨æ’æ§½ <code>[[Prototype]]</code>â€‹ å¯ä»¥é€šè¿‡ <code>Object.getPrototypeOf()</code>â€‹ å’Œ <code>Object.setPrototypeOf()</code>â€‹ å‡½æ•°æ¥è®¿é—®ã€‚è¿™ä¸ªç­‰åŒäº JavaScript çš„éæ ‡å‡†ä½†è¢«è®¸å¤š JavaScript å¼•æ“å®ç°çš„å±æ€§ <code>__proto__</code>â€‹ è®¿é—®å™¨ã€‚ä¸ºåœ¨ä¿æŒç®€æ´çš„åŒæ—¶é¿å…æ··æ·†ï¼Œåœ¨æˆ‘ä»¬çš„ç¬¦å·ä¸­ä¼šé¿å…ä½¿ç”¨ <code>obj.__proto__</code>â€‹ï¼Œè€Œæ˜¯ä½¿ç”¨ <code>obj.[[Prototype]]</code>â€‹ ä½œä¸ºä»£æ›¿ã€‚å…¶å¯¹åº”äº <code>Object.getPrototypeOf(obj)</code> [1]ã€‚</p>
<p>è§„èŒƒå¾ˆå¥½ç†è§£ï¼Œè§„èŒƒä¸­å£°æ˜çš„ <code>[[Prototype]]</code>â€‹ å¯ä»¥è®¤ä¸ºæ˜¯ä¸€ä¸ªå¯¹è±¡çš„ç§æœ‰å±æ€§ï¼Œæƒ³è¦å¯¹å…¶æ“ä½œï¼Œé‚£ä¹ˆå°±éœ€è¦å®ç°å¯¹åº”çš„ get/set æ–¹æ³•ã€‚<code>__proto__</code> åˆ™æ˜¯ä»¥å‰æ²¡æœ‰ä¸€å¥—è¡Œä¸šæ‰§è¡Œè§„èŒƒæ—¶ï¼Œå„ä¸ªå‚å®¶è‡ªå·±å®ç°çš„ä¸€å¥—é€»è¾‘ã€‚</p>
<p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼ŒJS å‡½æ•°ä¸­çš„ <code>prototype</code>â€‹ å±æ€§å’Œ <code>[[Prototype]]</code> è¿˜æœ‰ä¸€å®šçš„å·®åˆ«ï¼Œä¸å¯ä»¥æ··æ·†ã€‚</p>
<h2 data-id="heading-4">åŸå‹é“¾</h2>
<p>â€‹<em><strong>åœ¨ä½¿ç”¨åŸå‹åˆ›å»ºå¯¹è±¡çš„æ—¶å€™ï¼Œæ¯ä¸ªå¯¹è±¡éƒ½æœ‰ä¸€ä¸ªæŒ‡å‘åŸå‹çš„é“¾æ¥</strong></em>ï¼Œè¿™ä¸ªä¸€æ¡é“¾å°±è¢«ç§°ä¸ºåŸå‹é“¾ã€‚</p>
<p>æœ‰äº†è¿™æ¡é“¾æ¥ï¼Œæˆ‘ä»¬ä¾¿å¯ä»¥ä½¿é€šè¿‡åŸå‹åˆ›å»ºå‡ºæ¥çš„å¯¹è±¡å¯ä»¥è®¿é—®åˆ°åŸå‹ä¸Šçš„æ–¹æ³•å’Œå±æ€§ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œ<strong>å½“æˆ‘ä»¬è®¿é—®ä¸€ä¸ªå¯¹è±¡çš„å±æ€§æ—¶ï¼Œå¦‚æœè¿™ä¸ªå¯¹è±¡æœ¬èº«ä¸å­˜åœ¨è¯¥å±æ€§ï¼Œé‚£ä¹ˆå°±ä¼šå»åŸå‹ä¸ŠæŸ¥æ‰¾ï¼Œå…¶è®¿é—®é¡ºåºåº”å½“æ˜¯ï¼šå½“å‰å¯¹è±¡ -&gt;</strong>  <strong>åŸå‹ -&gt;</strong>  <strong>åŸå‹çš„åŸå‹ -&gt;</strong>   <strong>â€¦â€¦ -&gt;</strong>  <strong>æœ€åˆçš„åŸå‹ã€‚null æ ‡å¿—ç€åŸå‹é“¾çš„ç»ˆç»“ï¼Œå½“æŸä¸ªå¯¹è±¡çš„åŸå‹æŒ‡å‘ null æ—¶ï¼Œä¾¿ä¸å†ç»§ç»­å‘ä¸Šæœç´¢ã€‚</strong></p>
<h3 data-id="heading-5">ç»§æ‰¿</h3>
<p>å¦‚æœä½ å·²ç»æœ‰äº†ä¸€å®šçš„ç¼–ç¨‹è¯­è¨€çš„åŸºç¡€ï¼Œé‚£ä¹ˆä½ å¯èƒ½é¦–å…ˆä¼šè”æƒ³åˆ°çš„æ˜¯ç±»çš„ç»§æ‰¿ï¼Œ<code>A extends B</code>â€‹ é‚£ä¹ˆ A ä¾¿å¯ä»¥è®¿é—® A å¯¹è±¡ä¸­çš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•ï¼Œä»¥åŠä» B ä¸­ç»§æ‰¿ä¸‹æ¥çš„ public å’Œ protected å±æ€§å’Œæ–¹æ³•ï¼Œè€Œ <code>B extends C</code>åˆ™å¯ä»¥ç±»æ¨ã€‚</p>
<p>å¯ä»¥é€šè¿‡è¿™ä¸ªå»ç†è§£åŸå‹é“¾ï¼Œä½†æ˜¯è¦çŸ¥é“ä»–ä»¬æ˜¯ä¸åŒçš„ã€‚</p>
<p>ç¡¬è¦è¯´çš„è¯ï¼Œå¯ä»¥è¯´ä»–æ˜¯ä¸€ä¸ª <strong>ç»§æ‰¿é“¾</strong> ï¼ŒåŒæ ·ä¹Ÿæ˜¯åšåˆ°äº†æ–¹æ³•å±æ€§çš„å¤ç”¨ï¼Œä½†ä¸ä¸€æ ·çš„æ˜¯ï¼Œä»–ä»¬æ— æ³•â€œå…±äº«â€ã€‚</p>
<p>ä¸¾ä¸ªä¾‹å­ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ç»§æ‰¿</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Animal</span> {
  <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">name: <span class="hljs-built_in">string</span></span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;
  }
  <span class="hljs-title function_">changeName</span>(<span class="hljs-params">name: <span class="hljs-built_in">string</span></span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;
  }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Dog</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Animal</span> {
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Cat</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Animal</span> {
  <span class="hljs-title function_">changeName</span>(<span class="hljs-params">name: <span class="hljs-built_in">string</span></span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = <span class="hljs-string">'cat'</span> + name;
  }
}

<span class="hljs-keyword">const</span> animal = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Animal</span>(<span class="hljs-string">"1"</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(animal.<span class="hljs-property">name</span>); <span class="hljs-comment">// 1</span>
animal.<span class="hljs-title function_">changeName</span>(<span class="hljs-string">"111"</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(animal.<span class="hljs-property">name</span>); <span class="hljs-comment">// 111</span>
<span class="hljs-keyword">const</span> dog = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Dog</span>(<span class="hljs-string">"2"</span>);
dog.<span class="hljs-title function_">changeName</span>(<span class="hljs-string">"222"</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(dog.<span class="hljs-property">name</span>, animal.<span class="hljs-property">name</span>); <span class="hljs-comment">// 222 111</span>
<span class="hljs-keyword">const</span> cat = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Cat</span>(<span class="hljs-string">"3"</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(cat.<span class="hljs-property">name</span>); <span class="hljs-comment">// 3</span>
cat.<span class="hljs-title function_">changeName</span>(<span class="hljs-string">"333"</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(cat.<span class="hljs-property">name</span>, dog.<span class="hljs-property">name</span>, animal.<span class="hljs-property">name</span>); <span class="hljs-comment">// cat333 222 111</span>
</code></pre>
<p>ä¸Šé¢è¿™æ®µä»£ç æ˜¯æ¯”è¾ƒå…¸å‹çš„ç»§æ‰¿ï¼ŒDog å’Œ Cat ç±»éƒ½ç»§æ‰¿è‡ª Animal ç±»ï¼Œè‡ªç„¶çš„ï¼Œè¿™é‡Œ Animal ç±»ä¸­å®šä¹‰çš„å±æ€§ <code>name</code>â€‹ å’Œæ–¹æ³• <code>changeName</code>â€‹ éƒ½è¢«ç»§æ‰¿ä¸‹æ¥äº†ï¼Œä½†ä¸åŒçš„æ˜¯ï¼ŒCat ç±»é‡Œé¢æˆ‘ä»¬è¦†å†™äº† <code>changeName</code>â€‹ æ–¹æ³•ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨å®ä¾‹åŒ–è¿™ä¸‰ä¸ªç±»åï¼Œåˆ†åˆ«è°ƒç”¨ <code>changeName</code>â€‹ æ–¹æ³•ï¼Œå¹¶æ‰“å°æ–¹æ³•è°ƒç”¨å‰å <code>name</code> å±æ€§å˜åŒ–çš„æƒ…å†µï¼Œä¸éš¾å‘ç°ï¼Œæ¯ä¸ªå¯¹è±¡ä»…æ”¹å˜äº†è‡ªå·±çš„å±æ€§ï¼Œå¹¶æ²¡æœ‰å¯¹å…¶ä»–å¯¹è±¡é€ æˆå½±å“ï¼ˆä¹Ÿå°±æ˜¯è¯´ä»–ä»¬äº’ç›¸ä¹‹é—´æ— æ³•è®¿é—®å±æ€§ï¼‰ï¼Œè€Œä¸”å³ä½¿ Dog ç±»ä¸­æ²¡æœ‰å†™ä»»ä½•å†…å®¹ï¼Œä½†æ˜¯ä»–ç»§æ‰¿äº†çˆ¶ç±»çš„æ‰€æœ‰å†…å®¹ï¼Œæ‰€ä»¥ä»–ä¾æ—§å¯ä»¥è®¿é—®åˆ°å¯¹åº”çš„å±æ€§å’Œæ–¹æ³•ã€‚</p>
<h3 data-id="heading-6">åŸå‹é“¾</h3>
<p>åŸå‹æ˜¯â€œå…±äº«â€å±æ€§å’Œæ–¹æ³•ï¼Œä»¥åšåˆ°ä»£ç å¤ç”¨ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> anObj = {};
<span class="hljs-keyword">const</span> anObjPrototype = { <span class="hljs-attr">df</span>: <span class="hljs-number">1</span> };

<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">setPrototypeOf</span>(anObj, anObjPrototype);

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(anObj.<span class="hljs-property">df</span>); <span class="hljs-comment">// 1ï¼Œè®¿é—®åˆ°äº† anObjPrototype çš„ df å±æ€§å€¼</span>
anObj.<span class="hljs-property">df</span> = <span class="hljs-number">2</span>;
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(anObj.<span class="hljs-property">df</span>, anObjPrototype.<span class="hljs-property">df</span>); <span class="hljs-comment">// 2, 1ï¼Œä¿®æ”¹äº† anObj çš„ df å±æ€§å€¼ï¼Œä½†å¯¹äºå…¶åŸå‹ anObjPrototype æ²¡æœ‰å½±å“ï¼Œç­‰äºåœ¨ anObj å¯¹è±¡ä¸­åˆ›å»ºäº†ä¸€ä¸ª df å±æ€§ï¼Œå¹¶èµ‹å€¼ä¸º 1</span>

<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">getPrototypeOf</span>(anObj) === anObjPrototype; <span class="hljs-comment">// trueï¼Œè¯´æ˜ anObj çš„åŸå‹ä¿å­˜çš„æ˜¯ anObjPrototype çš„å¯¹è±¡åœ°å€</span>
</code></pre>
<p>è¿™æ®µä»£ç éå¸¸ç®€å•ï¼Œæˆ‘ä»¬è®© <code>anObj</code>â€‹ å¯¹è±¡ä¿å­˜äº†åŸå‹å¯¹è±¡ <code>anObjPrototype</code>â€‹ çš„åœ°å€ï¼ŒæŒ‰ç…§æˆ‘ä»¬ä¹‹å‰å¯¹åŸå‹é“¾çš„å®šä¹‰ï¼Œç”±äº <code>anObj</code>â€‹ ä¸­æ²¡æœ‰å±æ€§ <code>df</code> ï¼Œæ‰€ä»¥æˆ‘ä»¬å»ä»–çš„åŸå‹ä¸Šæœç´¢ï¼Œè·å–åˆ°å€¼ã€‚</p>
<p>è€Œæˆ‘ä»¬åœ¨åé¢ç»™ <code>anObj</code>â€‹ çš„ <code>df</code> å±æ€§èµ‹å€¼ä¸º 2ï¼Œç”±äºå…¶æœ¬èº«æ˜¯æ²¡æœ‰è¿™ä¸ªå±æ€§çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿™é‡Œçš„æ“ä½œå®é™…å¯ä»¥çœ‹åšä¸¤æ­¥ï¼š</p>
<ol>
<li>åœ¨ <code>anObj</code>â€‹ å¯¹è±¡ä¸­åˆ›å»ºå±æ€§ <code>df</code>ï¼›</li>
<li>ä¸ºè¯¥å±æ€§èµ‹å€¼</li>
</ol>
<p>è€Œåå†è®¿é—®å±æ€§ <code>df</code>â€‹ æ—¶ï¼Œç”±äºå·²ç»åœ¨ <code>anObj</code>â€‹ å¯¹è±¡ä¸­æ‰¾åˆ°äº†å¯¹åº”çš„å±æ€§ï¼Œæ‰€ä»¥å°±ä¸å†ç»§ç»­å‘ä¸Šæœç´¢äº†ï¼Œå³ä½¿å…¶åŸå‹å¯¹è±¡ä¸Šå­˜åœ¨ä¸€ä¸ªç›¸åŒçš„å±æ€§ï¼Œè¿™ä¸ªå°±æ˜¯æ‰€è°“çš„â€‹<strong>å±æ€§é®è”½</strong>ã€‚</p>
<p>å¦‚æœåœ¨ anObjPrototype ä¸­ä¹Ÿæ²¡æ‰¾åˆ°çš„è¯ï¼Œé‚£å°±è¿”å› undefinedã€‚</p>
<p>å¯¹æ¯”ä¸Šé¢ä¸¤ç§å½¢å¼ï¼Œä¸éš¾çœ‹å‡ºæˆ‘ä»¬ä¹‹å‰æ‰€è¯´çš„ç»§æ‰¿å®é™…ä¸Šå„ä¸ªå®ä¾‹å¯¹è±¡ä¹‹é—´æ˜¯æ²¡æœ‰å…³è”çš„ï¼Œè€Œåœ¨åŸå‹é“¾ä¸Šï¼Œå¯¹è±¡åŠå…¶åŸå‹å¯¹è±¡æ˜¯é€šè¿‡ä¸€ä¸ªé“¾æ¥ï¼ˆæˆ–è€…è¯´ä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘çš„å…³ç³»ï¼‰å…³è”ä¸Šçš„ï¼Œå¯¹è±¡å¯ä»¥è®¿é—®åˆ°å…¶åŸå‹ä¸Šçš„ä¸€äº›å±æ€§ã€‚</p>
<h4 data-id="heading-7">ä¸€äº›ç‰¹åˆ«çš„æƒ…å†µ</h4>
<p>æŸ¥æ¼è¡¥ç¼ºã€‚</p>
<p>æˆ‘ä»¬é€šè¿‡å­—é¢é‡åˆ›å»ºçš„å¯¹è±¡ï¼Œä¼šéšå¼çš„è®¾ç½®å…¶ prototypeï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// å¯¹è±¡å­—é¢é‡ï¼ˆæ²¡æœ‰ `__proto__` é”®ï¼‰è‡ªåŠ¨å°† `Object.prototype` ä½œä¸ºå®ƒä»¬çš„ `[[Prototype]]`</span>
<span class="hljs-keyword">const</span> <span class="hljs-built_in">object</span> = { <span class="hljs-attr">a</span>: <span class="hljs-number">1</span> };
<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">getPrototypeOf</span>(<span class="hljs-built_in">object</span>) === <span class="hljs-title class_">Object</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>; <span class="hljs-comment">// true</span>

<span class="hljs-comment">// æ•°ç»„å­—é¢é‡è‡ªåŠ¨å°† `Array.prototype` ä½œä¸ºå®ƒä»¬çš„ `[[Prototype]]`</span>
<span class="hljs-keyword">const</span> array = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>];
<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">getPrototypeOf</span>(array) === <span class="hljs-title class_">Array</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>; <span class="hljs-comment">// true</span>

<span class="hljs-comment">// æ­£åˆ™è¡¨è¾¾å¼å­—é¢é‡è‡ªåŠ¨å°† `RegExp.prototype` ä½œä¸ºå®ƒä»¬çš„ `[[Prototype]]`</span>
<span class="hljs-keyword">const</span> regexp = <span class="hljs-regexp">/abc/</span>;
<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">getPrototypeOf</span>(regexp) === <span class="hljs-title class_">RegExp</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>; <span class="hljs-comment">// true</span>
</code></pre>
<p>æœ¬æ®µä»£ç æ¥æºäº MDNã€‚</p>
<p>func.prototype æŒ‡å‘çš„æ˜¯æ„é€ å‡½æ•°ï¼Œé€šè¿‡ new func() æ–¹å¼åˆ›å»ºçš„å¯¹è±¡ï¼Œä¼šè‡ªåŠ¨çš„å°† func.prototype ä½œä¸ºè‡ªå·±çš„åŸå‹ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Box</span>(<span class="hljs-params">name: <span class="hljs-built_in">string</span></span>) {
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;
}

<span class="hljs-title class_">Box</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>; <span class="hljs-comment">// {constructor: f}</span>

<span class="hljs-keyword">const</span> box = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Box</span>(<span class="hljs-string">'hen'</span>);
box.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>; <span class="hljs-comment">// </span>
</code></pre>
<p>â€‹<em><strong>å®šä¹‰</strong></em>â€‹ï¼šâ€‹<em><strong>æ„é€ å‡½æ•°æ˜¯ä½¿ç”¨ new è°ƒç”¨çš„å‡½æ•°</strong></em>ï¼Œå¦‚ new Box();</p>
<h3 data-id="heading-8">åŸºäºåŸå‹é“¾çš„ç»§æ‰¿</h3>
<p>å›¾ç©·åŒ•è§ï¼ŒJavaScript çš„ç»§æ‰¿æ¨¡å¼æ˜¯ <em><strong>åŸå‹ç»§æ‰¿</strong></em> ï¼Œå°½ç®¡ç°åœ¨è¯­è¨€å·²ç»æ”¯æŒäº† class å…³é”®å­—ï¼Œå³ç±»çš„è¯´æ³•ï¼Œä½†å®é™…å¹¶æ²¡æœ‰æ”¹å˜ä»–çš„ç»§æ‰¿æ¨¡å¼ã€‚</p>
<p>é‚£ä¹ˆä»€ä¹ˆæ˜¯åŸå‹ç»§æ‰¿å‘¢ï¼Ÿ</p>
<p>æˆ‘ä»¬åœ¨åŸå‹é“¾ä¸€èŠ‚ä¸­è®²åˆ°ï¼ŒJavaScript é€šè¿‡åŸå‹é“¾æ¥å®ç°ä»£ç çš„å¤ç”¨ï¼ŒåŒæ—¶é˜…è¯»å¯¹åº”çš„ç¤ºä¾‹ä»£ç å¯ä»¥å‘ç°ï¼Œæˆ‘ä»¬é€šè¿‡æ„é€ äº†ä¸€ä¸ªåŸå‹é“¾ï¼Œä½¿å¾—å¯¹è±¡èƒ½å¤Ÿè®¿é—®åˆ°å…¶åŸå‹çš„å±æ€§ï¼Œè¿™å°±æ˜¯â€‹<strong>ç»§æ‰¿äº†å±æ€§</strong>ã€‚</p>
<p>â€‹<strong>ç»§æ‰¿â€œæ–¹æ³•â€</strong> â€‹ï¼Œæœ¬è´¨å’Œç»§æ‰¿å±æ€§ä¸€æ ·ï¼Œè¿™æ—¶å€™çš„ <em><strong>å±æ€§é®è”½</strong></em> æˆ‘ä»¬å¯ä»¥åˆ™ç±»æ¯”ä¸º â€œâ€‹<strong>æ–¹æ³•é‡å†™</strong>â€‹â€ã€‚ä½†æ˜¯è¿™é‡Œæœ‰ä¸€ä¸ª JavaScript çš„ç‰¹åˆ«ä¹‹å¤„ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªéš¾ç‚¹ï¼Œå³ <code>this</code> ï¼Œå½“ç»§æ‰¿çš„å‡½æ•°è¢«è°ƒç”¨çš„æ—¶å€™ï¼Œthis ä¼šæŒ‡å‘å½“å‰å¯¹è±¡ï¼Œè€Œä¸æ˜¯æ‹¥æœ‰è¯¥å‡½æ•°çš„åŸå‹å¯¹è±¡ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> anObjPrototype = {
  <span class="hljs-attr">a</span>: <span class="hljs-number">1</span>,
  <span class="hljs-title function_">getValue</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">a</span>;
  }
}

<span class="hljs-keyword">const</span> anObj = {};
<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">setPrototypeOf</span>(anObj, anObjPrototype);

<span class="hljs-comment">// ä¿®æ”¹ anObj ä¸­å±æ€§ a çš„å€¼</span>
anObj.<span class="hljs-property">a</span> = <span class="hljs-number">2</span>;
anObj.<span class="hljs-title function_">getValue</span>(); <span class="hljs-comment">// 2ï¼Œå¾—åˆ°çš„æ˜¯ anObj è‡ªå·±çš„å±æ€§å€¼ã€‚</span>
</code></pre>
<p>è¿è¡Œä¸Šè¿°ä»£ç ï¼Œä½ ä¼šå‘ç°è™½ç„¶ <code>getValue</code>â€‹ æ˜¯å±äºåŸå‹å¯¹è±¡ <code>anObjPrototype</code>â€‹ çš„ï¼Œä½†æ˜¯æœ€ç»ˆ <code>anObj</code>â€‹ è°ƒç”¨è¯¥æ–¹æ³•çš„æ—¶å€™å¾—åˆ°çš„æ˜¯å¯¹è±¡ <code>anObj</code> çš„å±æ€§å€¼ï¼Œè€ŒéåŸå‹å¯¹è±¡çš„å€¼ã€‚</p>
<h2 data-id="heading-9">æœ€å</h2>
<p>å›åˆ°æˆ‘ä»¬å¼€ç¯‡çš„é—®é¢˜ï¼Œclass å…³é”®å­—å¸®æˆ‘ä»¬åšäº†ä»€ä¹ˆï¼Ÿinstanceof å…³é”®å­—åˆå¸®æˆ‘ä»¬ç®€åŒ–äº†ä»€ä¹ˆï¼Ÿ</p>
<p>è¿™ä¸¤ä¸ªé—®é¢˜çš„ç­”æ¡ˆå·²ç»ååˆ†æ¸…æ™°äº†ï¼Œä½†ä¹Ÿä¸å¦¨åœ¨è¿™é‡Œåšä¸ªæ€»ç»“ï¼š</p>
<p>class æœ¬è´¨æ˜¯ä¸€ä¸ªè¯­æ³•ç³–ï¼Œä»–å¸®æˆ‘ä»¬å¤„ç†ç»‘å®šæ¯ä¸ªå¯¹è±¡çš„åŸå‹ï¼Œå®ç°å±æ€§çš„å…±äº«ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// æ—  class çš„å†™æ³•</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">Box</span>(<span class="hljs-params">name: <span class="hljs-built_in">string</span></span>) {
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;
}

<span class="hljs-title class_">Box</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">getName</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>;
}

<span class="hljs-keyword">const</span> box1 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Box</span>(<span class="hljs-number">1</span>);
<span class="hljs-keyword">const</span> box2 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Box</span>(<span class="hljs-number">2</span>);
box1.<span class="hljs-property">getValue</span> === box2.<span class="hljs-property">getValue</span>; <span class="hljs-comment">// true</span>

<span class="hljs-comment">// å¯¹åº”çš„ class å†™æ³•</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Box</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">name: <span class="hljs-built_in">string</span></span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;
  }

  <span class="hljs-title function_">getName</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>;
  }
}
</code></pre>
<p>æ˜¾è€Œæ˜“è§çš„ï¼Œclass çš„å†™æ³•æ›´ç¬¦åˆæˆ‘ä»¬é¢å‘å¯¹è±¡çš„ç¼–ç¨‹ä¹ æƒ¯ï¼Œfunction çš„å†™æ³•åˆ™ç›¸å¯¹ä¸é‚£ä¹ˆç›´è§‚ã€‚</p>
<p>instanceof åˆ™æ˜¯å¸®æˆ‘ä»¬æ£€æŸ¥å®ä¾‹å¯¹è±¡æ˜¯å¦æ˜¯æŸä¸ªç±»çš„å¯¹è±¡ï¼Œå®é™…ä¸Šï¼Œæˆ‘ä»¬åœ¨ JavaScript ä¸­çš„æè¿°åº”è¯¥æ˜¯ï¼Œ<strong>ç”¨äºæ£€æµ‹æ„é€ å‡½æ•°çš„ prototype æ˜¯å¦å‡ºç°åœ¨äº†å®ä¾‹å¯¹è±¡çš„åŸå‹é“¾ä¸Šã€‚</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Box</span>(<span class="hljs-params"/>) {
}
<span class="hljs-keyword">const</span> box = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Box</span>(); <span class="hljs-comment">// å‰æ–‡å®šä¹‰äº†ä½¿ç”¨ new è°ƒç”¨çš„å‡½æ•°å°±æ˜¯æ„é€ å‡½æ•°</span>

box <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Box</span>; <span class="hljs-comment">// true</span>
<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">getPrototypeOf</span>(box) === <span class="hljs-title class_">Box</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>; <span class="hljs-comment">// true</span>
</code></pre>
<p>ç”±æ­¤æˆ‘ä»¬å¯ä»¥æ¨å¯¼å‡ºï¼Œå¦‚æœæƒ³åœ¨ JavaScript ä¸­å®ç°ç»§æ‰¿ï¼Œæˆ‘ä»¬å¯ä»¥æ„é€ ä¸€ä¸ªå¾ˆé•¿çš„åŸå‹é“¾ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Animal</span>(<span class="hljs-params">name: <span class="hljs-built_in">string</span></span>) {
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">Cat</span>(<span class="hljs-params"/>) {}
<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">setPrototypeOf</span>(<span class="hljs-title class_">Cat</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>, <span class="hljs-title class_">Animal</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>); <span class="hljs-comment">// Cat ç»§æ‰¿è‡ª Animal</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">Dog</span>(<span class="hljs-params"/>) {}
<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">setPrototypeOf</span>(<span class="hljs-title class_">Dog</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>, <span class="hljs-title class_">Animal</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>); <span class="hljs-comment">// Dog ç»§æ‰¿è‡ª Animal</span>
</code></pre>
<p>ä»£ç ä¸­æˆ‘ä»¬åœ¨ä¿®æ”¹äº†åŸå‹ä¹‹åï¼ŒCat å’Œ Dog å°±å˜æˆäº† Animal çš„ä¸€ä¸ªå­ç±»ï¼ŒAnimal åˆ™ä½œä¸ºåŸºç±»å­˜åœ¨ï¼Œåœ¨ function è¿™ç§å†™æ³•ä¸‹ï¼Œä»–å¹¶ä¸æ˜¯é‚£ä¹ˆç›´è§‚ï¼Œä½†æ˜¯ï¼Œæˆ‘ä»¬å°†å…¶è½¬æ¢æˆ class çš„å†™æ³•åï¼Œä¸€åˆ‡ä¼šæ›´åŠ æ¸…æ™°æ˜“è¯»ã€‚</p>
<p>ä¸å¦¨èº¬èº«ä¸€è¯•ã€‚</p>
<h2 data-id="heading-10">ä¸€äº›æ€è€ƒ</h2>
<p>è¯´ js ä¸­ç±»çš„æ€§èƒ½æ¯”è¾ƒå·®ï¼Œä½†è¿™å¹¶ä¸æ˜¯è¯´æˆ‘ä»¬ä¸€å®šè¦ç”¨ä»¥å‰è¿™ç§æ¯”è¾ƒæ‹—å£çš„å½¢å¼å»é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼Œè¿™æ˜¯ä¸€ç§å–èˆï¼Œè®©æˆ‘ä»¬åœ¨ä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§å’Œæ€§èƒ½ä¹‹é—´æƒè¡¡ï¼Œæˆ‘ä»¬æœªå¿…éœ€è¦ä¿è¯æˆ‘ä»¬ç¼–å†™çš„ä»£ç å»è¿½æ±‚æè‡´çš„æ€§èƒ½ï¼Œä½†æ˜¯æˆ‘ä»¬éœ€è¦ä¿è¯æˆ‘ä»¬çš„ä»£ç ç¬¦åˆä¸€å®šçš„è§„èŒƒï¼Œè®©åˆ«äººç»´æŠ¤æ—¶ä¸è‡³äºä¼šé«˜å…´çš„è¹¦èµ·æ¥å»æŒ‡è´£å‰äººçš„ä»£ç ã€‚</p>
<p>æ—¶ä»£æ€»æ˜¯åœ¨è¿›æ­¥çš„ï¼Œç¼–è¯‘å™¨ã€å¼•æ“ä¹Ÿæ˜¯åœ¨æ›´æ–°æ¢ä»£ï¼Œåœ¨åŠªåŠ›è§£å†³è¿™äº›é—®é¢˜ï¼Œæœ‰æ—¶å€™æè‡´çš„æ€§èƒ½å°±æ„å‘³ç€åšé‡çš„æŠ€æœ¯å€ºåŠ¡ï¼Œåäººå¯¹ä½ å½“å‰å¼•ä»¥ä¸ºè±ªçš„ä»£ç æ— ä»ä¸‹æ‰‹ã€‚</p>
<p>å½“ç„¶ï¼Œä»¥ä¸Šæ˜¯ä»ä¸šåŠ¡è§’åº¦å‡ºå‘çš„æ€è€ƒï¼Œå¦‚æœä½ æ˜¯å†™é«˜æ€§èƒ½åº“çš„ï¼Œçœ‹çœ‹å°±å¥½ã€‚</p>
<h2 data-id="heading-11">å‚è€ƒæ–‡ç« </h2>
<p>[1]: <a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FJavaScript%2FInheritance_and_the_prototype_chain" target="_blank" title="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Inheritance_and_the_prototype_chain" ref="nofollow noopener noreferrer">ç»§æ‰¿ä¸åŸå‹é“¾ - JavaScript | MDN</a></p>
<p>[2]: <a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FLearn%2FJavaScript%2FObjects%2FObject_prototypes" target="_blank" title="https://developer.mozilla.org/zh-CN/docs/Learn/JavaScript/Objects/Object_prototypes" ref="nofollow noopener noreferrer">å¯¹è±¡åŸå‹ - å­¦ä¹  Web å¼€å‘ | MDN</a></p>
<p>[3]: <a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FGlossary%2FPrototype-based_programming" target="_blank" title="https://developer.mozilla.org/zh-CN/docs/Glossary/Prototype-based_programming" ref="nofollow noopener noreferrer">åŸºäºåŸå‹ç¼–ç¨‹ - MDN Web æ–‡æ¡£æœ¯è¯­è¡¨ï¼šWeb ç›¸å…³æœ¯è¯­çš„å®šä¹‰ | MDN</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç”¨ AI å·¥ç¨‹å¸ˆ Trae Solo ï¼Œä¸€ä¸ªäººæ‰“é€ â€œç»˜æœ¬å²›â€ï¼šä»æƒ³æ³•åˆ°ä¸Šçº¿åªéœ€ä¸‰æ­¥]]></title>    <link>https://juejin.cn/post/7572408208263544872</link>    <guid>https://juejin.cn/post/7572408208263544872</guid>    <pubDate>2025-11-14T16:10:25.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572408208263544872" data-draft-id="7572390974460198912" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç”¨ AI å·¥ç¨‹å¸ˆ Trae Solo ï¼Œä¸€ä¸ªäººæ‰“é€ â€œç»˜æœ¬å²›â€ï¼šä»æƒ³æ³•åˆ°ä¸Šçº¿åªéœ€ä¸‰æ­¥"/> <meta itemprop="keywords" content="Trae,å…¨æ ˆ,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-11-14T16:10:25.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="AAAé˜¿giao"/> <meta itemprop="url" content="https://juejin.cn/user/473218785740627"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç”¨ AI å·¥ç¨‹å¸ˆ Trae Solo ï¼Œä¸€ä¸ªäººæ‰“é€ â€œç»˜æœ¬å²›â€ï¼šä»æƒ³æ³•åˆ°ä¸Šçº¿åªéœ€ä¸‰æ­¥
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/473218785740627/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    AAAé˜¿giao
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-14T16:10:25.000Z" title="Fri Nov 14 2025 16:10:25 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€ï¼šå¼€å‘èŒƒå¼çš„é©å‘½æ­£åœ¨å‘ç”Ÿ</h2>
<p>è¿‡å»åå¹´ï¼Œå‰ç«¯å¼€å‘ç»å†äº†ä» jQuery åˆ° React/Vueï¼Œå†åˆ° Vite + TypeScript + Tailwind çš„å¿«é€Ÿæ¼”è¿›ã€‚ä½†æ— è®ºå·¥å…·å¦‚ä½•å˜åŒ–ï¼Œä¸€ä¸ªæ®‹é…·çš„äº‹å®å§‹ç»ˆå­˜åœ¨ï¼š<strong>æ„å»ºä¸€ä¸ªåŠŸèƒ½å®Œæ•´ã€ä½“éªŒè‰¯å¥½çš„äº§å“ï¼Œä¾ç„¶éœ€è¦å¤šäººåä½œã€æ•°å‘¨ç”šè‡³æ•°æœˆçš„æ—¶é—´</strong>ã€‚</p>
<p>ç„¶è€Œï¼Œ2024 å¹´ä»¥æ¥ï¼Œä¸€ç§åä¸º <strong>Solo æ¨¡å¼ï¼ˆSolo Modeï¼‰</strong> çš„ AI å¼€å‘æ–°èŒƒå¼æ­£åœ¨æ‚„ç„¶æ”¹å˜è¿™ä¸€åˆ‡ã€‚å®ƒä¸å†æ»¡è¶³äºâ€œè¾…åŠ©ç¼–ç â€ï¼Œè€Œæ˜¯è¿½æ±‚ <strong>ç«¯åˆ°ç«¯çš„äº§å“äº¤ä»˜èƒ½åŠ›</strong>â€”â€”ä»éœ€æ±‚ç†è§£ã€æ¶æ„è®¾è®¡ã€UI æ„å»ºã€çŠ¶æ€ç®¡ç†ï¼Œåˆ°æµ‹è¯•éƒ¨ç½²ï¼Œå…¨ç¨‹ç”± AI ä¸»å¯¼å®Œæˆã€‚</p>
<p>è€Œ <strong>Trae Solo</strong>ï¼Œæ­£æ˜¯è¿™ä¸€èŒƒå¼çš„ä»£è¡¨è€…ã€‚</p>
<p>æœ¬æ–‡å°†ä»¥æˆ‘ä»¬äº²æ‰‹æ‰“é€ çš„çœŸå®é¡¹ç›®â€”â€” <strong>â€œç»˜æœ¬å²›â€ï¼ˆHuibenDAOï¼‰</strong> ä¸ºä¾‹ï¼Œå…¨é¢å±•ç¤º Trae Solo å¦‚ä½•åœ¨å‡ å¤©å†…ï¼Œå°†ä¸€ä¸ªæ¨¡ç³Šçš„äº§å“æ„æƒ³è½¬åŒ–ä¸ºå¯äº¤äº’ã€å¯éƒ¨ç½²ã€ç»“æ„è§„èŒƒçš„ React åº”ç”¨ã€‚æ›´é‡è¦çš„æ˜¯ï¼Œæˆ‘ä»¬å°†é€šè¿‡é¡¹ç›®ç»†èŠ‚ï¼Œæ­ç¤º Solo <strong>ä¸ºä½•å¼ºå¤§ã€å¼ºåœ¨å“ªé‡Œã€ä»¥åŠå¦‚ä½•é«˜æ•ˆä½¿ç”¨å®ƒ</strong>ã€‚</p>
<hr/>
<h2 data-id="heading-1">ä¸€ã€å½“â€œä¸€äººå…¬å¸â€æˆä¸ºå¯èƒ½ï¼šSolo æ¨¡å¼çš„å´›èµ·</h2>
<h3 data-id="heading-2">1.1 ä¼ ç»Ÿå¼€å‘çš„å›°å¢ƒ</h3>
<p>åšä¸€ä¸ªåƒâ€œç»˜æœ¬å²›â€è¿™æ ·çš„äº²å­å¹³å°ï¼Œåœ¨ä¼ ç»Ÿæ¨¡å¼ä¸‹æ„å‘³ç€ï¼š</p>
<ul>
<li><strong>äº§å“ç»ç†</strong>æ’°å†™ PRDï¼Œå®šä¹‰ç”¨æˆ·ç”»åƒã€åŠŸèƒ½æ¨¡å—ã€äº¤äº’æµç¨‹ï¼›</li>
<li><strong>UI/UX è®¾è®¡å¸ˆ</strong>è¾“å‡º Figma åŸå‹ï¼Œæ ‡æ³¨é¢œè‰²ã€é—´è·ã€åŠ¨æ•ˆï¼›</li>
<li><strong>å‰ç«¯å›¢é˜Ÿ</strong>æ­å»ºå·¥ç¨‹ç¯å¢ƒã€å®ç°ç»„ä»¶ã€å¯¹æ¥ APIï¼›</li>
<li><strong>åç«¯å›¢é˜Ÿ</strong>è®¾è®¡æ•°æ®åº“ã€ç¼–å†™æ¥å£ã€å¤„ç†æ”¯ä»˜ä¸é‰´æƒï¼›</li>
<li><strong>æµ‹è¯•äººå‘˜</strong>ç¼–å†™ç”¨ä¾‹ã€å›å½’éªŒè¯ï¼›</li>
<li><strong>è¿ç»´å·¥ç¨‹å¸ˆ</strong>é…ç½®æœåŠ¡å™¨ã€è®¾ç½® CI/CDã€‚</li>
</ul>
<p>æ•´ä¸ªè¿‡ç¨‹è‡³å°‘éœ€è¦ 5â€“6 äººåä½œ 4â€“8 å‘¨ã€‚å¯¹äºä¸ªä½“å¼€å‘è€…æˆ–åˆåˆ›å›¢é˜Ÿè€Œè¨€ï¼Œè¿™å‡ ä¹æ˜¯ä¸å¯é€¾è¶Šçš„é—¨æ§›ã€‚</p>
<h3 data-id="heading-3">1.2 Solo æ¨¡å¼ï¼šä» L2 åˆ° L4 çš„è·ƒè¿</h3>
<p>Trae Solo æ‰€ä»£è¡¨çš„ <strong>Solo æ¨¡å¼</strong>ï¼Œæœ¬è´¨ä¸Šæ˜¯ä¸€æ¬¡å¼€å‘èŒƒå¼çš„å‡ç»´ï¼š</p>






























<table><thead><tr><th>çº§åˆ«</th><th>èƒ½åŠ›æè¿°</th><th>ç±»æ¯”</th></tr></thead><tbody><tr><td>L1</td><td>è¯­æ³•æç¤ºã€è‡ªåŠ¨è¡¥å…¨</td><td>æ™ºèƒ½è¾“å…¥æ³•</td></tr><tr><td>L2</td><td>ç‰‡æ®µç”Ÿæˆã€å‡½æ•°å»ºè®®</td><td>Copilot ç­‰ AI ç¼–ç¨‹åŠ©æ‰‹</td></tr><tr><td>L3</td><td>ç†è§£é¡¹ç›®ä¸Šä¸‹æ–‡ï¼Œç”Ÿæˆç¬¦åˆè§„èŒƒçš„æ¨¡å—</td><td>Trae Soloï¼ˆå½“å‰é˜¶æ®µï¼‰</td></tr><tr><td>L4</td><td>å…¨è‡ªä¸»å¼€å‘ï¼Œä»…éœ€äººç±»ç¡®è®¤æ–¹å‘</td><td>æœªæ¥ç›®æ ‡</td></tr></tbody></table>
<p>Solo æ¨¡å¼å·²è¿ˆå…¥ <strong>L3 çº§</strong>ï¼šå®ƒä¸ä»…èƒ½å†™ä»£ç ï¼Œæ›´èƒ½<strong>ç†è§£ä½ çš„äº§å“æ„å›¾ã€æŠ€æœ¯é€‰å‹ã€è®¾è®¡é£æ ¼å’Œä¸šåŠ¡é€»è¾‘</strong>ï¼Œå¹¶åœ¨æ­¤åŸºç¡€ä¸Šåšå‡ºåˆç†å†³ç­–ã€‚</p>
<blockquote>
<p><strong>æ ¸å¿ƒç†å¿µ</strong>ï¼šè®© AI æˆä¸ºå¼€å‘ä¸»å¯¼è€…ï¼Œäººç±»è½¬ä¸ºå‰¯é©¾é©¶è§’è‰²ã€‚</p>
</blockquote>
<p>è¿™æ„å‘³ç€ï¼Œå¼€å‘è€…ç»ˆäºå¯ä»¥ä»ç¹ççš„å·¥ç¨‹ç»†èŠ‚ä¸­è§£æ”¾å‡ºæ¥ï¼Œä¸“æ³¨äºçœŸæ­£åˆ›é€ ä»·å€¼çš„éƒ¨åˆ†ï¼š<strong>å®šä¹‰é—®é¢˜ã€è®¾è®¡ä½“éªŒã€éªŒè¯å‡è®¾</strong>ã€‚</p>
<hr/>
<h2 data-id="heading-4">äºŒã€â€œç»˜æœ¬å²›â€ï¼šä¸€ä¸ªç”± Solo é©±åŠ¨çš„çœŸå®é¡¹ç›®</h2>
<h3 data-id="heading-5">2.1 é¡¹ç›®èƒŒæ™¯ä¸æ„¿æ™¯</h3>
<p>â€œç»˜æœ¬å²›â€æ˜¯ä¸€ä¸ªé¢å‘ä¸­å›½ 0â€“6 å²å„¿ç«¥å®¶åº­çš„æ•°å­—å¹³å°ï¼Œæ—¨åœ¨èåˆ <strong>ç»˜æœ¬é˜…è¯»</strong> ä¸ <strong>çº¿ä¸‹äº²å­æ´»åŠ¨</strong>ï¼Œæ‰“é€ ä¸€ä¸ªâ€œæœ‰æ¸©åº¦â€çš„æˆé•¿ç©ºé—´ã€‚</p>
<ul>
<li><strong>å“ç‰Œå®šä½</strong>ï¼šæ¸©é¦¨ã€æ¸…æ–°ã€å¯Œæœ‰ç«¥è¶£ï¼Œè§†è§‰é£æ ¼å‚è€ƒå°çº¢ä¹¦çš„å†…å®¹æ„Ÿä¸å®å®å·´å£«çš„äº’åŠ¨æ€§ã€‚</li>
<li><strong>Slogan</strong>ï¼šâ€œè®©äº²å­æ—¶å…‰æ›´æ¸©æš–ä¸€ç‚¹ï¼Œæ¯å¤©10åˆ†é’Ÿç»˜å‡ºæˆé•¿çš„å¥‡å¦™æ—…ç¨‹ã€‚â€</li>
<li><strong>æ ¸å¿ƒç”¨æˆ·</strong>ï¼šä¸€çº¿/æ–°ä¸€çº¿åŸå¸‚ã€é‡è§†æ—©æœŸæ•™è‚²çš„å¹´è½»çˆ¶æ¯ã€‚</li>
<li><strong>æŠ€æœ¯ç›®æ ‡</strong>ï¼šå®Œå…¨é€‚é…ç§»åŠ¨ç«¯ï¼ŒåŠ è½½å¿«ã€äº¤äº’æµç•…ã€ä½“éªŒä¸€è‡´ã€‚</li>
</ul>
<h3 data-id="heading-6">2.2 åŠŸèƒ½æ¨¡å—æ¦‚è§ˆ</h3>

































<table><thead><tr><th>æ¨¡å—</th><th>æ ¸å¿ƒåŠŸèƒ½</th></tr></thead><tbody><tr><td>é¦–é¡µ</td><td>çƒ­é—¨ç»˜æœ¬è½®æ’­ã€æ´»åŠ¨æ¨èã€æœç´¢å…¥å£</td></tr><tr><td>ç»˜æœ¬é¦†</td><td>æŒ‰å¹´é¾„ï¼ˆ0â€“3, 3â€“6ï¼‰ã€ä¸»é¢˜ï¼ˆæƒ…ç»ªã€ç§‘æ™®ã€ä¹ æƒ¯ï¼‰ç­›é€‰ï¼Œæ”¯æŒè¯„åˆ†æ’åºä¸å…³é”®è¯æœç´¢</td></tr><tr><td>äº²å­æ´»åŠ¨</td><td>æŒ‰åŸå¸‚ç­›é€‰æ´»åŠ¨ï¼ŒæŸ¥çœ‹è¯¦æƒ…ã€æŠ¥åçŠ¶æ€ã€è®¾ç½®æé†’</td></tr><tr><td>é˜…è¯»è®°å½•</td><td>è®°å½•é˜…è¯»è¶³è¿¹ã€æ‰“å¡ã€ä¸Šä¼ è¯»åæ„Ÿ/ç…§ç‰‡ã€æ”¯æŒå¤šå­å¥³åˆ‡æ¢</td></tr><tr><td>è´­ç‰©æµç¨‹</td><td>åŠ å…¥è´­ç‰©è½¦ã€ä¸‹å•ç»“ç®—ã€å¯¹æ¥æ”¯ä»˜ï¼ˆæ¨¡æ‹Ÿï¼‰ã€æŸ¥è¯¢ç‰©æµ</td></tr><tr><td>ç”¨æˆ·ä¸­å¿ƒ</td><td>ç®¡ç†å­©å­æ¡£æ¡ˆã€æŸ¥çœ‹è®¢å•ã€è”ç³»å®¢æœ</td></tr></tbody></table>
<p>è¿™æ ·ä¸€ä¸ªåŠŸèƒ½é—­ç¯å®Œæ•´çš„äº§å“ï¼Œè‹¥æŒ‰ä¼ ç»Ÿæ–¹å¼å¼€å‘ï¼Œè‡³å°‘éœ€è¦ 3â€“4 å‘¨ã€‚ä½†åœ¨ Trae Solo çš„ååŠ©ä¸‹ï¼Œæˆ‘ä»¬ä»…ç”¨ <strong>3 å¤©</strong> å°±å®Œæˆäº†å‰ç«¯åŸå‹çš„æ„å»ºä¸éƒ¨ç½²ã€‚</p>
<h3 data-id="heading-7">2.3 é¡¹ç›®ç»“æ„ï¼šSolo å¦‚ä½•â€œç†è§£â€å¹¶æ„å»ºä¸“ä¸šçº§ React åº”ç”¨ï¼Ÿ</h3>
<p>æœ€å…³é”®çš„ä¸€ç‚¹åœ¨äºï¼š<strong>æˆ‘ä»¬å¹¶æœªæ‰‹åŠ¨è®¾è®¡é¡¹ç›®ç»“æ„</strong>ã€‚æˆ‘ä»¬åªå‘ Solo æä¾›äº†å¦‚ä¸‹ä¿¡æ¯ï¼š</p>
<blockquote>
<p>â€œä½¿ç”¨ React + TypeScript + Vite + Tailwind CSS + Zustand + Radix UIï¼Œæ„å»ºä¸€ä¸ªç§»åŠ¨ç«¯ä¼˜å…ˆçš„äº²å­ç»˜æœ¬å¹³å°ï¼ŒåŒ…å«é¦–é¡µã€ç»˜æœ¬é¦†ã€æ´»åŠ¨é¡µã€é˜…è¯»è®°å½•ã€è´­ç‰©æµç¨‹å’Œç”¨æˆ·ä¸­å¿ƒã€‚â€</p>
</blockquote>
<p>ç»“æœï¼ŒSolo è‡ªåŠ¨ç”Ÿæˆäº†ä»¥ä¸‹é«˜åº¦è§„èŒƒçš„ç›®å½•ç»“æ„ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp">huiben/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ assets/           <span class="hljs-meta"># æ’ç”»ã€å›¾æ ‡ã€å­—ä½“ç­‰é™æ€èµ„æº</span>
â”‚   â”œâ”€â”€ components/       <span class="hljs-meta"># å¯å¤ç”¨ UI ç»„ä»¶ï¼ˆBookCard, ActivityItem, BottomNavï¼‰</span>
â”‚   â”œâ”€â”€ hooks/            <span class="hljs-meta"># è‡ªå®šä¹‰ Hooksï¼ˆuseDebounce, useLocalStorageï¼‰</span>
â”‚   â”œâ”€â”€ pages/            <span class="hljs-meta"># é¡µé¢ç»„ä»¶ï¼ˆHomePage, LibraryPage, ActivityPage...ï¼‰</span>
â”‚   â”œâ”€â”€ router/           <span class="hljs-meta"># è·¯ç”±é…ç½®ï¼ˆAppRouter.tsxï¼‰</span>
â”‚   â”œâ”€â”€ store/            <span class="hljs-meta"># Zustand çŠ¶æ€ç®¡ç†ï¼ˆcartStore.ts, readingRecordStore.tsï¼‰</span>
â”‚   â”œâ”€â”€ types/            <span class="hljs-meta"># å…¨å±€ TypeScript ç±»å‹ï¼ˆBook, Activity, ChildProfileï¼‰</span>
â”‚   â””â”€â”€ App.tsx           <span class="hljs-meta"># æ ¹ç»„ä»¶ï¼Œé›†æˆå…¨å±€å¸ƒå±€ä¸è·¯ç”±å®¹å™¨</span>
â”œâ”€â”€ <span class="hljs-keyword">public</span>/
â”œâ”€â”€ package.json
â”œâ”€â”€ vite.config.ts        <span class="hljs-meta"># é…ç½®è·¯å¾„åˆ«å @/ â†’ src/</span>
â”œâ”€â”€ tailwind.config.js    <span class="hljs-meta"># æ³¨å†Œè‡ªå®šä¹‰è‰²æ¿ï¼ˆamber-50, blue-400ï¼‰</span>
â””â”€â”€ netlify.toml          <span class="hljs-meta"># SPA è·¯ç”±é‡å®šå‘è§„åˆ™</span>
</code></pre>
<h4 data-id="heading-8">è¿™ä¸ªç»“æ„ä¸ºä½•èƒ½è¯æ˜ Solo çš„å¼ºå¤§ï¼Ÿ</h4>
<ol>
<li>
<p><strong>èŒè´£åˆ†ç¦»æ¸…æ™°ï¼Œç¬¦åˆç°ä»£ React æœ€ä½³å®è·µ</strong><br/>
Solo è‡ªåŠ¨å°† UIï¼ˆ<code>components/</code>ï¼‰ã€é¡µé¢æµï¼ˆ<code>pages/</code>ï¼‰ã€çŠ¶æ€ï¼ˆ<code>store/</code>ï¼‰ã€ç±»å‹ï¼ˆ<code>types/</code>ï¼‰åˆ†å±‚ç®¡ç†ï¼Œé¿å…é€»è¾‘è€¦åˆã€‚è¿™ç§æ¶æ„é€šå¸¸åªæœ‰ç»éªŒä¸°å¯Œçš„å›¢é˜Ÿæ‰ä¼šåˆ»æ„è®¾è®¡ã€‚</p>
</li>
<li>
<p><strong>ç±»å‹å…ˆè¡Œï¼ˆType-Firstï¼‰ï¼Œä¿éšœé•¿æœŸå¯ç»´æŠ¤æ€§</strong><br/>
åœ¨ç”Ÿæˆä»»ä½•ç»„ä»¶å‰ï¼ŒSolo å…ˆåˆ›å»ºäº† <code>types/book.ts</code>ï¼Œå®šä¹‰äº† <code>Book</code> æ¥å£ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Book</span> {
  <span class="hljs-attr">id</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">title</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">coverUrl</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">ageRange</span>: [<span class="hljs-built_in">number</span>, <span class="hljs-built_in">number</span>]; <span class="hljs-comment">// e.g., [3, 6]</span>
  <span class="hljs-attr">rating</span>: <span class="hljs-built_in">number</span>;
  <span class="hljs-attr">tags</span>: <span class="hljs-built_in">string</span>[];
}
</code></pre>
<p>åç»­æ‰€æœ‰ç»„ä»¶å‡åŸºäºæ­¤ç±»å‹å¼€å‘ï¼Œæå¤§å‡å°‘äº†è¿è¡Œæ—¶é”™è¯¯ã€‚</p>
</li>
<li>
<p><strong>ç²¾å‡†é¢„åˆ¤å¤æ‚çŠ¶æ€éœ€æ±‚</strong><br/>
å½“æˆ‘ä»¬æåˆ°â€œæ”¯æŒå¤šå­å¥³åˆ‡æ¢é˜…è¯»è®°å½•â€ï¼ŒSolo ç«‹å³è¯†åˆ«è¿™æ˜¯ä¸€ä¸ªè·¨é¡µé¢å…±äº«çŠ¶æ€ï¼Œå¹¶ç”Ÿæˆäº† <code>readingRecordStore.ts</code>ï¼š</p>
<pre><code class="hljs language-css" lang="css">const useReadingRecordStore = create&lt;ReadingRecordState&gt;()((set) =&gt; ({
  activeChildId: <span class="hljs-string">'child-1'</span>,
  records: {},
  setActiveChild: (id) =&gt; <span class="hljs-built_in">set</span>({ activeChildId: id }),
  addRecord: (bookId) =&gt; <span class="hljs-built_in">set</span>((state) =&gt; ({
    records: {
      ..<span class="hljs-selector-class">.state</span><span class="hljs-selector-class">.records</span>,
      <span class="hljs-selector-attr">[state.activeChildId]</span>: [...(state.records[state.activeChildId] || []), bookId]
    }
  }))
}));
</code></pre>
<p>è¿™ä¸æ˜¯æ¨¡æ¿å¡«å……ï¼Œè€Œæ˜¯<strong>åŸºäºè¯­ä¹‰çš„ç†è§£ä¸æ¨ç†</strong>ã€‚</p>
</li>
<li>
<p><strong>éƒ¨ç½²å³è€ƒè™‘ï¼Œå…·å¤‡ DevOps è§†è§’</strong><br/>
é¡¹ç›®æ ¹ç›®å½•ç›´æ¥åŒ…å« <code>netlify.toml</code>ï¼Œé…ç½®äº† SPA å›é€€è§„åˆ™ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-section">[[redirects]]</span>
  <span class="hljs-attr">from</span> = <span class="hljs-string">"/*"</span>
  <span class="hljs-attr">to</span> = <span class="hljs-string">"/index.html"</span>
  <span class="hljs-attr">status</span> = <span class="hljs-number">200</span>
</code></pre>
<p>ç¡®ä¿ç”¨æˆ·åˆ·æ–°é¡µé¢ä¸ä¼š 404â€”â€”è¿™æ˜¯è®¸å¤šæ–°æ‰‹å¼€å‘è€…å®¹æ˜“å¿½ç•¥çš„å…³é”®ç»†èŠ‚ã€‚</p>
</li>
<li>
<p><strong>å·¥ç¨‹åŒ–å·¥å…·é“¾å®Œå¤‡</strong></p>
<ul>
<li><code>vite.config.ts</code> ä¸­é¢„è®¾äº†è·¯å¾„åˆ«å <code>@/</code>ï¼Œæå‡å¯¼å…¥å¯è¯»æ€§ï¼›</li>
<li><code>tailwind.config.js</code> æ³¨å†Œäº†ç±³ç™½ï¼ˆ<code>amber-50</code>ï¼‰ã€å¤©è“ï¼ˆ<code>blue-400</code>ï¼‰ç­‰ä¸»è‰²ï¼›</li>
<li>ESLint + Prettier è§„åˆ™è‡ªåŠ¨é…ç½®ï¼Œä¿è¯ä»£ç é£æ ¼ç»Ÿä¸€ã€‚</li>
</ul>
</li>
</ol>
<blockquote>
<p><strong>ç»“è®º</strong>ï¼šSolo ä¸æ˜¯åœ¨â€œçŒœâ€ä½ è¦ä»€ä¹ˆï¼Œè€Œæ˜¯åœ¨â€œçŸ¥é“â€ä½ è¦ä»€ä¹ˆä¹‹åï¼ŒæŠŠä¸€åˆ‡éƒ½å®‰æ’å¾—æ˜æ˜ç™½ç™½ã€‚å®ƒæ˜¯ä¸€ä½<strong>æ‡‚äº§å“ã€æ‡‚æ¶æ„ã€æ‡‚å·¥ç¨‹çš„ AI ä¸Šä¸‹æ–‡å·¥ç¨‹å¸ˆ</strong>ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-9">ä¸‰ã€Trae Solo çš„æ ¸å¿ƒåŠŸèƒ½è¯¦è§£</h2>
<h3 data-id="heading-10">3.1 ä»€ä¹ˆæ˜¯ Trae Soloï¼Ÿ</h3>
<p>Trae Solo æ˜¯ä¸€ä¸ª <strong>AI é©±åŠ¨çš„ä¸Šä¸‹æ–‡å·¥ç¨‹å¸ˆï¼ˆContext Engineerï¼‰</strong> ï¼Œå…¶æ ¸å¿ƒèƒ½åŠ›è¿œè¶…ä¼ ç»Ÿä»£ç ç”Ÿæˆå·¥å…·ï¼š</p>
<ul>
<li>âœ… <strong>é¡¹ç›®çº§ä¸Šä¸‹æ–‡æ„ŸçŸ¥</strong>ï¼šç†è§£æŠ€æœ¯æ ˆã€ç›®å½•ç»“æ„ã€ç±»å‹å®šä¹‰ã€è®¾è®¡è§„èŒƒï¼›</li>
<li>âœ… <strong>ç«¯åˆ°ç«¯ä»»åŠ¡æ‰§è¡Œ</strong>ï¼šä»éœ€æ±‚åˆ°éƒ¨ç½²ï¼Œå…¨ç¨‹è‡ªåŠ¨åŒ–ï¼›</li>
<li>âœ… <strong>ä¸»åŠ¨ååŒå·¥ç¨‹è§„èŒƒ</strong>ï¼šéµå¾ªæ— éšœç¢ã€å“åº”å¼ã€ç±»å‹å®‰å…¨ç­‰æœ€ä½³å®è·µï¼›</li>
<li>âœ… <strong>æŒç»­å­¦ä¹ ä¸æ¼”è¿›</strong>ï¼šè®°ä½ä½ çš„åå¥½ï¼Œåœ¨åç»­ä»»åŠ¡ä¸­æä¾›æ›´ç²¾å‡†è¾“å‡ºã€‚</li>
</ul>
<h3 data-id="heading-11">3.2 åœ¨â€œç»˜æœ¬å²›â€ä¸­çš„å…·ä½“è¡¨ç°</h3>



































<table><thead><tr><th>ä»»åŠ¡</th><th>Solo çš„è¡ŒåŠ¨</th><th>ä»·å€¼</th></tr></thead><tbody><tr><td>åˆå§‹åŒ–é¡¹ç›®</td><td>è‡ªåŠ¨ç”Ÿæˆ Vite + React + TS + Tailwind + Zustand è„šæ‰‹æ¶</td><td>èŠ‚çœ 2â€“3 å°æ—¶ç¯å¢ƒé…ç½®æ—¶é—´</td></tr><tr><td>åˆ›å»ºç»˜æœ¬è¯¦æƒ…é¡µ</td><td>ç”Ÿæˆ <code>BookDetailPage.tsx</code> + <code>RatingStars.tsx</code>ï¼Œè‡ªåŠ¨å¯¼å…¥ Radix UI Dialog</td><td>å¿«é€Ÿå®ç°å¤æ‚äº¤äº’</td></tr><tr><td>ç®¡ç†è´­ç‰©è½¦çŠ¶æ€</td><td>åˆ›å»º <code>cartStore.ts</code>ï¼Œå« addItem/removeItem/clear ç­‰ actions</td><td>é¿å…æ‰‹åŠ¨ç¼–å†™å†—ä½™çŠ¶æ€é€»è¾‘</td></tr><tr><td>ä¿®å¤ç±»å‹é”™è¯¯</td><td>å½“ <code>Book</code> ç¼ºå°‘ <code>ageRange</code> å­—æ®µæ—¶ï¼Œè‡ªåŠ¨è¡¥å…¨æ¥å£å¹¶åŒæ­¥æ‰€æœ‰å¼•ç”¨</td><td>æå‡å¼€å‘å¥å£®æ€§</td></tr><tr><td>é…ç½®éƒ¨ç½²</td><td>è¾“å‡º <code>netlify.toml</code>ï¼Œè®¾ç½® SPA è·¯ç”±è§„åˆ™</td><td>å®ç°â€œæäº¤å³ä¸Šçº¿â€</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-12">å››ã€é«˜æ•ˆä½¿ç”¨ Solo çš„ä¸‰æ­¥æ³•ï¼ˆé™„å®æˆ˜æŠ€å·§ï¼‰</h2>
<h3 data-id="heading-13">ç¬¬ä¸€æ­¥ï¼šæå‡ºæ¸…æ™°ã€å…·ä½“çš„éœ€æ±‚</h3>
<p><strong>ä½æ•ˆè¡¨è¾¾</strong>ï¼šâ€œåšä¸ªç»˜æœ¬ç½‘ç«™ã€‚â€<br/>
<strong>é«˜æ•ˆè¡¨è¾¾</strong>ï¼š</p>
<blockquote>
<p>â€œæ‰“é€ ä¸€ä¸ªå«â€˜ç»˜æœ¬å²›â€™çš„äº²å­å¹³å°ï¼Œé¦–é¡µæœ‰çƒ­é—¨ç»˜æœ¬è½®æ’­ã€é¡¶éƒ¨æœç´¢æ ã€åº•éƒ¨å¯¼èˆªï¼›æ”¯æŒå®¶é•¿ç”¨å¾®ä¿¡ç™»å½•å¹¶è®¾ç½®å­©å­å§“åã€å¹´é¾„ï¼ˆ0â€“6å²ï¼‰å’Œå…´è¶£æ ‡ç­¾ï¼›ç»˜æœ¬è¯¦æƒ…é¡µåŒ…å«å°é¢ã€æ ‡é¢˜ã€é€‚åˆå¹´é¾„èŒƒå›´ï¼ˆå¦‚3â€“6å²ï¼‰ã€è¯„åˆ†æ˜Ÿï¼ˆ1â€“5ï¼‰å’Œâ€˜åŠ å…¥ä¹¦æ¶â€™æŒ‰é’®ï¼›æ•´ä½“é£æ ¼æ¸©é¦¨æ¸…æ–°ï¼Œä¸»è‰²ä¸ºç±³ç™½ï¼ˆbg-amber-50ï¼‰å’Œå¤©è“ï¼ˆtext-blue-400ï¼‰ï¼Œå®Œå…¨é€‚é…æ‰‹æœºã€‚â€</p>
</blockquote>
<p><strong>åŸåˆ™</strong>ï¼šä¼˜è´¨éœ€æ±‚ = 90% çš„å·¥ä½œé‡ã€‚</p>
<h3 data-id="heading-14">ç¬¬äºŒæ­¥ï¼šè®© Solo ç”Ÿæˆå®Œæ•´æ–¹æ¡ˆ</h3>
<p>è¾“å…¥éœ€æ±‚åï¼ŒSolo ä¼šè¾“å‡ºï¼š</p>
<ul>
<li>äº§å“éœ€æ±‚æ–‡æ¡£ï¼ˆPRDï¼‰</li>
<li>æŠ€æœ¯æ¶æ„å›¾ï¼ˆå«æ•°æ®æ¨¡å‹ã€API è®¾è®¡ï¼‰</li>
<li>UI åŸå‹ä»£ç ï¼ˆåŸºäº Tailwindï¼‰</li>
<li>åˆå§‹åŒ–é¡¹ç›®è„šæ‰‹æ¶</li>
</ul>
<p>è¿™ä¸€æ­¥éµå¾ªâ€œ<strong>å…ˆè§„åˆ’ï¼Œåæ‰§è¡Œ</strong>â€åŸåˆ™ï¼Œé¿å…ç›²ç›®ç¼–ç ã€‚</p>
<h3 data-id="heading-15">ç¬¬ä¸‰æ­¥ï¼šä¸€é”®å¯åŠ¨å¼€å‘ + å®æ—¶åé¦ˆ</h3>
<p>ç¡®è®¤æ–¹æ¡ˆåï¼Œç‚¹å‡»â€œå¼€å§‹å¼€å‘â€ï¼ŒSolo ä¼šï¼š</p>
<ul>
<li>è‡ªåŠ¨åˆ›å»ºæ–‡ä»¶ã€å®‰è£…ä¾èµ–ã€é…ç½®å·¥å…·é“¾</li>
<li>å®æ—¶æ˜¾ç¤ºä»»åŠ¡è¿›åº¦ï¼ˆå¦‚â€œæ­£åœ¨ç”Ÿæˆ ActivityPageâ€¦â€ï¼‰</li>
<li>æ”¯æŒéšæ—¶ä¸­æ–­ã€ä¿®æ”¹ã€é‡æ–°ç”Ÿæˆ</li>
</ul>
<p><strong>è¿‡ç¨‹ä¸­å¯éšæ—¶è°ƒæ•´</strong>ï¼š</p>
<blockquote>
<p>â€œæŠŠâ€˜åŠ å…¥ä¹¦æ¶â€™æŒ‰é’®æ”¹æˆæ·¡é»„è‰²ï¼ˆbg-amber-200ï¼‰ï¼ŒåŠ åœ†è§’ï¼ˆrounded-fullï¼‰ï¼Œhover æ—¶å˜æ·±ä¸€ç‚¹ã€‚â€</p>
</blockquote>
<p>Solo ä¼šç«‹å³æ›´æ–°å¯¹åº”ç»„ä»¶ã€‚</p>
<h4 data-id="heading-16">é«˜é˜¶ä½¿ç”¨æŠ€å·§</h4>
<ul>
<li><strong>Git æäº¤åŸå­åŒ–</strong>ï¼šæ¯æ¬¡ Solo ç”Ÿæˆåæäº¤ä¸€æ¬¡ commitï¼Œä¾¿äºå›æº¯ï¼›</li>
<li><strong>åŠŸèƒ½æ‹†è§£</strong>ï¼šå¤æ‚åŠŸèƒ½åˆ†æ­¥å®ç°ï¼ˆå¦‚â€œå…ˆåšé™æ€åˆ—è¡¨ â†’ å†åŠ ç­›é€‰ â†’ æœ€ååŠ æœç´¢â€ï¼‰ï¼›</li>
<li><strong>äººå·¥å®¡æ ¸å…³é”®æ–‡æ¡£</strong>ï¼šPRD å’Œæ¶æ„å›¾éœ€äººå·¥ç¡®è®¤ï¼Œç¡®ä¿æ–¹å‘æ­£ç¡®ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-17">äº”ã€Solo æ¨¡å¼çš„è¡Œä¸šå½±å“ä¸æœªæ¥å±•æœ›</h2>
<h3 data-id="heading-18">5.1 å¯¹å¼€å‘è€…è§’è‰²çš„é‡å¡‘</h3>
<ul>
<li><strong>éæŠ€æœ¯äººå‘˜</strong>ï¼šå¯é€šè¿‡ç²¾å‡†éœ€æ±‚æè¿°ï¼Œå¿«é€ŸéªŒè¯åˆ›æ„ MVPï¼›</li>
<li><strong>ä¸ªä½“å¼€å‘è€…</strong>ï¼šå¯ç‹¬ç«‹å®ŒæˆåŸæœ¬éœ€å¤šäººåä½œçš„å®Œæ•´äº§å“ï¼›</li>
<li><strong>äº§å“ç»ç†</strong>ï¼šè‹¥æŒæ¡ Soloï¼Œå°†æˆä¸ºâ€œèƒ½è½åœ°çš„æƒ³æ³•å¼•æ“â€ï¼Œå¤§å¹…æå‡ç«äº‰åŠ›ã€‚</li>
</ul>
<h3 data-id="heading-19">5.2 â€œç»˜æœ¬å²›â€çš„ä¸‹ä¸€æ­¥</h3>
<p>æœªæ¥ï¼Œâ€œç»˜æœ¬å²›â€å°†å¼•å…¥ <strong>AI æ¨èç³»ç»Ÿ</strong>ï¼š</p>
<ul>
<li>æ ¹æ®å­©å­çš„é˜…è¯»è®°å½•ã€å¹´é¾„ã€å…´è¶£æ ‡ç­¾ï¼Œæ™ºèƒ½æ¨èç»˜æœ¬ï¼›</li>
<li>ç»“åˆåœ°ç†ä½ç½®ï¼Œæ¨é€é™„è¿‘çš„äº²å­æ´»åŠ¨ï¼›</li>
<li>è‡ªåŠ¨ç”Ÿæˆâ€œæœ¬å‘¨é˜…è¯»æŠ¥å‘Šâ€ã€‚</li>
</ul>
<p>è€Œè¿™äº›åŠŸèƒ½ï¼ŒåŒæ ·å¯ä»¥ç”± Trae Solo ååŠ©å®ç°â€”â€”åªéœ€æè¿°æ¸…æ¥šä¸šåŠ¡é€»è¾‘ã€‚</p>
<hr/>
<h2 data-id="heading-20">ç»“è¯­ï¼šä½ ä¸éœ€è¦æˆä¸ºå…¨æ ˆï¼Œä½†ä½ éœ€è¦ä¸€ä¸ªå…¨æ ˆ AI</h2>
<p>åœ¨ Solo æ¨¡å¼ä¸‹ï¼Œå¼€å‘çš„æœ¬è´¨ä¸å†æ˜¯â€œå†™å¤šå°‘è¡Œä»£ç â€ï¼Œè€Œæ˜¯ <strong>â€œå¦‚ä½•æ¸…æ™°åœ°è¡¨è¾¾ä½ æƒ³åˆ›é€ çš„ä¸–ç•Œâ€</strong> ã€‚</p>
<p>è€Œ Trae Soloï¼Œå°±æ˜¯é‚£ä¸ªæ„¿æ„ä¸ºä½ æŠŠè¿™ä¸ªä¸–ç•Œä»æ–‡å­—å˜æˆç°å®çš„ä¼™ä¼´ã€‚</p>
<blockquote>
<p>é¡¹ç›®åœ¨çº¿é¢„è§ˆï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fhuiben-dao.netlify.app%2F" title="https://huiben-dao.netlify.app/" target="_blank" ref="nofollow noopener noreferrer">huiben-dao.netlify.app</a><br/>
ä»£ç ä»“åº“ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2FgiaoZou%2FWEB_note%2Ftree%2FReact%2Fhuiben" title="https://gitee.com/giaoZou/WEB_note/tree/React/huiben" target="_blank" ref="nofollow noopener noreferrer">gitee.com/giaoZou/WEBâ€¦</a><br/>
äº†è§£ Trae Soloï¼š<a href="https://www.trae.ai/solo" title="https://www.trae.ai/solo" target="_blank" ref="nofollow noopener noreferrer">www.trae.ai/solo</a></p>
</blockquote>
<p><strong>ç°åœ¨ï¼Œè½®åˆ°ä½ äº†â€”â€”æƒ³æ‰“é€ ä»€ä¹ˆæ ·çš„æ•°å­—å²›å±¿ï¼Ÿ</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Gemini 2.5 Flash Image APIå°ºå¯¸è®¾ç½®å®Œæ•´æŒ‡å—ï¼š10ç§å®½é«˜æ¯”è¯¦è§£]]></title>    <link>https://juejin.cn/post/7572434032518381614</link>    <guid>https://juejin.cn/post/7572434032518381614</guid>    <pubDate>2025-11-15T00:57:06.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572434032518381614" data-draft-id="7572485825704312841" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Gemini 2.5 Flash Image APIå°ºå¯¸è®¾ç½®å®Œæ•´æŒ‡å—ï¼š10ç§å®½é«˜æ¯”è¯¦è§£"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯"/> <meta itemprop="datePublished" content="2025-11-15T00:57:06.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="LaoZhangAI"/> <meta itemprop="url" content="https://juejin.cn/user/1327865776053022"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Gemini 2.5 Flash Image APIå°ºå¯¸è®¾ç½®å®Œæ•´æŒ‡å—ï¼š10ç§å®½é«˜æ¯”è¯¦è§£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1327865776053022/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    LaoZhangAI
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-15T00:57:06.000Z" title="Sat Nov 15 2025 00:57:06 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>Gemini 2.5 Flash Imageï¼ˆNano Bananaï¼‰APIåœ¨2025å¹´9æœˆæ­£å¼ç‰ˆä¸­æ–°å¢å®½é«˜æ¯”è®¾ç½®åŠŸèƒ½ï¼Œä»é¢„è§ˆç‰ˆçš„3ç§ï¼ˆ1:1/3:4/4:3ï¼‰æ‰©å±•åˆ°10ç§ï¼ˆ21:9/16:9/4:3/3:2/1:1/9:16/3:4/2:3/5:4/4:5ï¼‰ï¼Œå¢é•¿233%ã€‚é€šè¿‡Python APIè®¾ç½®ï¼š<code>image_config=types.ImageConfig(aspect_ratio="16:9")</code>ï¼›JavaScriptï¼š<code>imageConfig: {aspectRatio: "16:9"}</code>ã€‚åœºæ™¯æ¨èï¼šç¤¾äº¤åª’ä½“ç”¨9:16ç«–å±æˆ–1:1æ–¹å½¢ã€ç”µå•†ç”¨3:4äº§å“å›¾ã€è§†é¢‘ç”¨16:9æ ‡å‡†æˆ–21:9ç”µå½±ã€æ¸¸æˆç”¨5:4 UIã€‚æ³¨æ„ï¼šä»…æ”¯æŒå®½é«˜æ¯”ä¸èƒ½æŒ‡å®šç²¾ç¡®åƒç´ ã€ä¸æ”¯æŒè‡ªå®šä¹‰æ¯”ä¾‹ã€å›¾ç‰‡ç¼–è¾‘ä¹Ÿå¯æ”¹å˜å°ºå¯¸ã€‚ä»·æ ¼$0.039/å¼ ä¸å˜ã€‚</p>
<h2 data-id="heading-0">Gemini 2.5 Flash Image APIå°ºå¯¸è®¾ç½®ï¼š30ç§’äº†è§£10ç§å®½é«˜æ¯”</h2>
<p>Gemini 2.5 Flash Imageï¼ˆç¤¾åŒºæ˜µç§°Nano Bananaï¼‰çš„APIå°ºå¯¸è®¾ç½®ï¼Œæ˜¯æŒ‡é€šè¿‡<code>aspect_ratio</code>å‚æ•°æ§åˆ¶ç”Ÿæˆå›¾ç‰‡çš„å®½é«˜æ¯”ï¼ˆä¾‹å¦‚16:9ã€9:16ã€1:1ç­‰ï¼‰ï¼Œè€Œä¸æ˜¯æŒ‡å®šç²¾ç¡®çš„åƒç´ å°ºå¯¸ï¼ˆå¦‚1920Ã—1080ï¼‰ã€‚æ ¹æ®Googleå®˜æ–¹åšå®¢å…¬å‘Šï¼Œ2025å¹´9æœˆæ­£å¼ç‰ˆå°†æ”¯æŒçš„å®½é«˜æ¯”ä»é¢„è§ˆç‰ˆçš„3ç§å¤§å¹…æ‰©å±•åˆ°10ç§ï¼Œè¦†ç›–ä»21:9è¶…å®½å±åˆ°9:16ç«–å±çš„æ‰€æœ‰ä¸»æµæ ¼å¼ã€‚</p>
<p>éœ€è¦æ˜ç¡®çš„æ˜¯ï¼Œ<strong>ä½ åªèƒ½æ§åˆ¶å®½é«˜æ¯”ï¼Œä¸èƒ½æ§åˆ¶ç²¾ç¡®åˆ†è¾¨ç‡</strong>ã€‚Googleçš„è®¾è®¡ç†å¿µæ˜¯"å†…å®¹ä¸ºå…ˆï¼Œå°ºå¯¸è‡ªé€‚åº”"â€”â€”ä½ å‘Šè¯‰æ¨¡å‹è¦ç”Ÿæˆä»€ä¹ˆå†…å®¹ã€ä»€ä¹ˆæ¯”ä¾‹ï¼Œæ¨¡å‹è‡ªåŠ¨å†³å®šæœ€ä¼˜çš„åƒç´ å°ºå¯¸ï¼ˆé€šå¸¸é•¿è¾¹åœ¨1024-2048pxä¹‹é—´ï¼Œå–å†³äºæ˜¯Nano Banana 1è¿˜æ˜¯2ä»£ï¼‰ã€‚è¿™ç§è®¾è®¡ç®€åŒ–äº†ä½¿ç”¨ï¼ˆä¸éœ€è¦çº ç»“1920Ã—1080è¿˜æ˜¯1280Ã—720ï¼‰ï¼Œä½†ä¹Ÿæ„å‘³ç€å¦‚æœä½ éœ€è¦ä¸¥æ ¼çš„åƒç´ è§„æ ¼ï¼ˆå¦‚å°åˆ·å“å¿…é¡»300dpiã€3000Ã—2000pxï¼‰ï¼Œå¯èƒ½éœ€è¦åæœŸupscaleå¤„ç†ã€‚</p>
<p><strong>10ç§æ”¯æŒçš„å®½é«˜æ¯”</strong>åŠå…¶å…¸å‹åº”ç”¨ï¼š</p>
<p><strong>æ¨ªå±æ ¼å¼ï¼ˆ4ç§ï¼‰</strong> ï¼š</p>
<ul>
<li><strong>21:9</strong>ï¼ˆè¶…å®½å±ï¼‰ï¼šç”µå½±çº§è§†è§‰ã€æ¸¸æˆæ¨ªå¹…ã€å…¨æ™¯å›¾ï¼Œå®½åº¦æ˜¯é«˜åº¦çš„2.33å€</li>
<li><strong>16:9</strong>ï¼ˆæ ‡å‡†å®½å±ï¼‰ï¼šYouTubeè§†é¢‘ã€PPTå°é¢ã€æ¡Œé¢å£çº¸ï¼Œæœ€å¸¸ç”¨çš„æ¨ªå±æ¯”ä¾‹</li>
<li><strong>4:3</strong>ï¼ˆç»å…¸æ¨ªå±ï¼‰ï¼šä¼ ç»Ÿæ˜¾ç¤ºå™¨ã€iPadæ¨ªå±ã€å¤å¤ç…§ç‰‡é£æ ¼</li>
<li><strong>3:2</strong>ï¼ˆæ‘„å½±æ¨ªå±ï¼‰ï¼šå•åç›¸æœºæ ‡å‡†ã€é£æ™¯æ‘„å½±ã€è‰ºæœ¯æ‰“å°</li>
</ul>
<p><strong>æ–¹å½¢æ ¼å¼ï¼ˆ1ç§ï¼‰</strong> ï¼š</p>
<ul>
<li><strong>1:1</strong>ï¼ˆæ­£æ–¹å½¢ï¼‰ï¼šInstagramåŠ¨æ€å›¾ã€å¾®ä¿¡æœ‹å‹åœˆã€å¤´åƒå›¾æ ‡ï¼Œç¤¾äº¤åª’ä½“æœ€é€šç”¨</li>
</ul>
<p><strong>ç«–å±æ ¼å¼ï¼ˆ5ç§ï¼‰</strong> ï¼š</p>
<ul>
<li><strong>9:16</strong>ï¼ˆæ ‡å‡†ç«–å±ï¼‰ï¼šæŠ–éŸ³/TikTokçŸ­è§†é¢‘ã€Instagram Storyã€æ‰‹æœºå…¨å±</li>
<li><strong>3:4</strong>ï¼ˆç»å…¸ç«–å±ï¼‰ï¼šç”µå•†äº§å“è¯¦æƒ…å›¾ã€Pinterest Pinã€æ‰‹æœºç«–å±å£çº¸</li>
<li><strong>2:3</strong>ï¼ˆæ‘„å½±ç«–å±ï¼‰ï¼šäººåƒæ‘„å½±ã€æ—¶å°šæ‚å¿—ã€å‚ç›´æµ·æŠ¥</li>
<li><strong>5:4</strong>ï¼ˆè¿‘æ–¹å½¢æ¨ªï¼‰ï¼šInsè€å¼ç…§ç‰‡æ»¤é•œã€å¤å¤å¹¿å‘Šã€å¡ç‰‡è®¾è®¡</li>
<li><strong>4:5</strong>ï¼ˆè¿‘æ–¹å½¢ç«–ï¼‰ï¼šInstagramåŠ¨æ€æ¨èæ¯”ä¾‹ã€Facebookå¸–å­ã€ç¤¾äº¤å¡ç‰‡</li>
</ul>
<p>æ ¹æ®2025å¹´11æœˆçš„ç¤¾åŒºä½¿ç”¨åé¦ˆï¼Œæœ€å¸¸ç”¨çš„ä¸‰ä¸ªæ¯”ä¾‹æ˜¯ï¼š<strong>9:16</strong>ï¼ˆçŸ­è§†é¢‘æ—¶ä»£çš„ä¸»æµï¼‰ã€<strong>1:1</strong>ï¼ˆç¤¾äº¤åª’ä½“é€šç”¨ï¼‰ã€<strong>16:9</strong>ï¼ˆæ¡Œé¢å†…å®¹å’Œè§†é¢‘ï¼‰ã€‚å¦‚æœä½ ä¸ç¡®å®šé€‰å“ªä¸ªï¼Œè¿™ä¸‰ä¸ªè¦†ç›–90%çš„ä½¿ç”¨åœºæ™¯ã€‚</p>
<h2 data-id="heading-1">Python APIè®¾ç½®æ–¹æ³•ï¼šå®Œæ•´ä»£ç ç¤ºä¾‹ä¸å‚æ•°è¯´æ˜</h2>
<p>ä½¿ç”¨Pythonè°ƒç”¨Gemini 2.5 Flash Image APIå¹¶è®¾ç½®å®½é«˜æ¯”ï¼Œéœ€è¦é€šè¿‡<code>image_config</code>å‚æ•°ã€‚ä»¥ä¸‹æ˜¯ä»å®‰è£…SDKåˆ°ç”Ÿæˆå›¾ç‰‡çš„å®Œæ•´æµç¨‹ï¼š</p>
<h3 data-id="heading-2">å®‰è£…Google Generative AI SDK</h3>
<p>å¦‚æœä½ ä½¿ç”¨çš„æ˜¯è¾ƒæ–°ç‰ˆæœ¬çš„SDKï¼Œå¯èƒ½åç§°æ˜¯ï¼š</p>
<p>éªŒè¯å®‰è£…ï¼š</p>
<h3 data-id="heading-3">åŸºç¡€ç”¨æ³•ï¼šè®¾ç½®å•ä¸€å®½é«˜æ¯”</h3>
<p><strong>å‚æ•°è¯¦è§£</strong>ï¼š</p>
<p><code>aspect_ratio</code>ï¼šå­—ç¬¦ä¸²ç±»å‹ï¼Œå¯é€‰å€¼ä¸º"21:9"ã€"16:9"ã€"4:3"ã€"3:2"ã€"1:1"ã€"9:16"ã€"3:4"ã€"2:3"ã€"5:4"ã€"4:5"å…±10ç§ã€‚å¿…é¡»ä¸¥æ ¼ä½¿ç”¨è¿™äº›å€¼ï¼Œè‡ªå®šä¹‰æ¯”ä¾‹ï¼ˆå¦‚"2:1"ã€"7:5"ï¼‰ä¼šæŠ¥é”™ã€‚</p>
<p><code>response_modalities=["IMAGE"]</code>ï¼šå‘Šè¯‰APIåªè¿”å›å›¾ç‰‡ï¼Œä¸è¿”å›æ–‡æœ¬ã€‚å¦‚æœä½ å¸Œæœ›åŒæ—¶ç”Ÿæˆå›¾ç‰‡å’Œé…æ–‡ï¼Œå¯ä»¥è®¾ç½®ä¸º<code>["TEXT", "IMAGE"]</code>ã€‚</p>
<p><code>model="gemini-2.5-flash-image"</code>ï¼šæ¨¡å‹IDã€‚æ³¨æ„ä¸æ˜¯"gemini-2.5-flash"ï¼ˆé‚£æ˜¯æ–‡æœ¬æ¨¡å‹ï¼‰ï¼Œå¿…é¡»å¸¦"-image"åç¼€ã€‚</p>
<h3 data-id="heading-4">æ‰¹é‡ç”Ÿæˆä¸åŒå®½é«˜æ¯”</h3>
<p>å¦‚æœä½ éœ€è¦ä¸€æ¬¡ç”Ÿæˆå¤šä¸ªå®½é«˜æ¯”çš„å›¾ç‰‡ï¼ˆä¾‹å¦‚ç”ŸæˆInstagramçš„9:16ã€1:1ã€4:5ä¸‰ä¸ªç‰ˆæœ¬ï¼‰ï¼Œå¯ä»¥è¿™æ ·å®ç°ï¼š</p>
<p>è¿™ç§æ‰¹é‡ç”Ÿæˆåœ¨ç”µå•†åœºæ™¯ç‰¹åˆ«å®ç”¨â€”â€”ä¸€ä¸ªäº§å“éœ€è¦åœ¨æ·˜å®ï¼ˆ3:4è¯¦æƒ…å›¾ï¼‰ã€å°çº¢ä¹¦ï¼ˆ1:1æˆ–4:5ï¼‰ã€æŠ–éŸ³ï¼ˆ9:16çŸ­è§†é¢‘å°é¢ï¼‰å¤šå¹³å°å±•ç¤ºï¼Œä¸€æ¬¡æ€§ç”Ÿæˆ3ä¸ªç‰ˆæœ¬ï¼Œç¡®ä¿å†…å®¹ä¸€è‡´ä½†é€‚é…ä¸åŒå¹³å°ã€‚</p>
<h3 data-id="heading-5">å›¾ç‰‡ç¼–è¾‘æ—¶æ”¹å˜å®½é«˜æ¯”</h3>
<p>Gemini 2.5 Flash Imageä¸ä»…èƒ½ä»é›¶ç”Ÿæˆå›¾ç‰‡ï¼Œè¿˜èƒ½ç¼–è¾‘ç°æœ‰å›¾ç‰‡å¹¶æ”¹å˜å®½é«˜æ¯”ï¼š</p>
<p>è¿™ä¸ªåŠŸèƒ½è§£å†³äº†ä¸€ä¸ªå¸¸è§ç—›ç‚¹ï¼šä½ ç”¨AIç”Ÿæˆäº†ä¸€å¼ å®Œç¾çš„æ–¹å½¢å›¾ç‰‡ï¼Œä½†éœ€è¦åœ¨YouTubeç”¨ï¼ˆ16:9ï¼‰ã€‚ä¼ ç»Ÿåšæ³•æ˜¯é‡æ–°ç”Ÿæˆï¼ˆå¯èƒ½æ•ˆæœä¸ä¸€æ ·ï¼‰ï¼Œæˆ–æ‰‹åŠ¨PSè£å‰ªæ‹‰ä¼¸ï¼ˆç ´åæ„å›¾ï¼‰ã€‚è€ŒNano Bananaå¯ä»¥æ™ºèƒ½æ‰©å±•ç”»å¸ƒâ€”â€”ä¿æŒä¸»ä½“ä¸å˜ï¼Œè‡ªåŠ¨è¡¥å……å‘¨è¾¹å†…å®¹ï¼ˆå¦‚è™šåŒ–èƒŒæ™¯ã€å»¶ä¼¸åœºæ™¯ï¼‰ï¼Œè‡ªç„¶è¿‡æ¸¡åˆ°æ–°æ¯”ä¾‹ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b78145b41bd14f77b63a95d6e752b3b9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTGFvWmhhbmdBSQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763773026&amp;x-signature=7fEBnfSIHbDALxKjqkC%2B2wEZRu0%3D" alt="Pythonå’ŒJavaScriptä»£ç ç¤ºä¾‹" loading="lazy"/></p>
<h2 data-id="heading-6">JavaScript/Node.js APIè®¾ç½®æ–¹æ³•ï¼šå®Œæ•´ä»£ç </h2>
<p>å¦‚æœä½ çš„é¡¹ç›®ä½¿ç”¨JavaScriptæˆ–Node.jsï¼ŒåŒæ ·å¯ä»¥è°ƒç”¨Gemini 2.5 Flash Image APIè®¾ç½®å®½é«˜æ¯”ï¼š</p>
<h3 data-id="heading-7">å®‰è£…SDK</h3>
<h3 data-id="heading-8">åŸºç¡€ç”¨æ³•</h3>
<h3 data-id="heading-9">æ‰¹é‡ç”Ÿæˆä¸åŒæ¯”ä¾‹ï¼ˆé€‚åˆç¤¾äº¤åª’ä½“è¿è¥ï¼‰</h3>
<p>ç¤¾äº¤åª’ä½“è¿è¥å¸¸éœ€è¦åŒä¸€å†…å®¹çš„å¤šä¸ªç‰ˆæœ¬â€”â€”Instagraméœ€è¦9:16ã€1:1ã€4:5ä¸‰ä¸ªç‰ˆæœ¬ï¼Œå°çº¢ä¹¦éœ€è¦3:4ã€1:1ï¼ŒæŠ–éŸ³éœ€è¦9:16ã€‚ä»¥ä¸‹ä»£ç ä¸€æ¬¡æ€§ç”Ÿæˆå…¨éƒ¨ç‰ˆæœ¬ï¼š</p>
<p>è¿™ä¸ªè„šæœ¬ç‰¹åˆ«é€‚åˆç”µå•†æˆ–å†…å®¹åˆ›ä½œè€…â€”â€”è®¾è®¡ä¸€æ¬¡è§†è§‰åˆ›æ„ï¼Œè‡ªåŠ¨ç”Ÿæˆ6ä¸ªå¹³å°çš„é€‚é…ç‰ˆæœ¬ï¼ŒèŠ‚çœå¤§é‡é‡å¤åŠ³åŠ¨ã€‚æˆæœ¬æ–¹é¢ï¼Œ6å¼ å›¾Ã—<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0.039</mn><mo>=</mo></mrow><annotation encoding="application/x-tex">0.039=</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">0.039</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span></span></span></span></span>0.234ï¼Œä¸åˆ°ä¸¤æ¯›äº”äººæ°‘å¸ï¼Œè¿œä½äºè®¾è®¡å¸ˆæ‰‹åŠ¨è°ƒæ•´6ä¸ªç‰ˆæœ¬çš„äººå·¥æˆæœ¬ã€‚</p>
<h3 data-id="heading-10">é”™è¯¯å¤„ç†ä¸é‡è¯•</h3>
<p>APIè°ƒç”¨å¯èƒ½å¤±è´¥ï¼ˆç½‘ç»œé—®é¢˜ã€rate limitã€å†…å®¹è¿è§„ï¼‰ï¼Œå»ºè®®æ·»åŠ é”™è¯¯å¤„ç†ï¼š</p>
<h2 data-id="heading-11">10ç§å®½é«˜æ¯”è¯¦è§£ï¼šåœºæ™¯æ¨èä¸å®æˆ˜åº”ç”¨</h2>
<p>æ¯ç§å®½é«˜æ¯”éƒ½æœ‰æœ€é€‚åˆçš„åº”ç”¨åœºæ™¯ã€‚é€‰å¯¹æ¯”ä¾‹ï¼Œç”Ÿæˆçš„å›¾ç‰‡åœ¨ç›®æ ‡å¹³å°å±•ç¤ºæ•ˆæœæœ€ä½³ã€‚</p>
<h3 data-id="heading-12">æ¨ªå±ç»„ï¼šé€‚åˆæ¡Œé¢å†…å®¹å’Œè§†é¢‘</h3>
<p><strong>21:9è¶…å®½å±ï¼ˆ2.33:1ï¼‰</strong></p>
<p>å…¸å‹åº”ç”¨ï¼šç”µå½±ç”»å¹…ã€æ¸¸æˆè¿‡åœºåŠ¨ç”»ã€æ²‰æµ¸å¼æ¨ªå¹…å¹¿å‘Šã€å…¨æ™¯å›¾åƒã€‚</p>
<p>ä¼˜åŠ¿ï¼šè§†é‡å®½å¹¿ï¼Œç”µå½±æ„Ÿå¼ºï¼Œé€‚åˆå±•ç¤ºå®å¤§åœºæ™¯ï¼ˆåŸå¸‚å¤©é™…çº¿ã€è‡ªç„¶é£å…‰ã€ç§‘å¹»åœºæ™¯ï¼‰ã€‚</p>
<p>åŠ£åŠ¿ï¼šåœ¨æ‰‹æœºç«–å±è§‚çœ‹æ—¶ä¼šæœ‰å¤§é‡é»‘è¾¹ï¼Œåªé€‚åˆæ¡Œé¢æˆ–æ¨ªå±è§‚çœ‹åœºæ™¯ã€‚</p>
<p>å®é™…ä½¿ç”¨å»ºè®®ï¼šå¦‚æœä½ çš„å†…å®¹ä¸»è¦åœ¨PCç«¯å±•ç¤ºï¼ˆç½‘ç«™æ¨ªå¹…ã€æ¡Œé¢å£çº¸ã€æ¼”ç¤ºæ–‡ç¨¿ï¼‰ï¼Œ21:9èƒ½æä¾›ç‹¬ç‰¹çš„è§†è§‰å†²å‡»åŠ›ã€‚ä½†å¦‚æœå—ä¼—ä¸»è¦åœ¨æ‰‹æœºç«¯ï¼Œä¸æ¨èè¿™ä¸ªæ¯”ä¾‹ã€‚</p>
<p><strong>16:9æ ‡å‡†å®½å±ï¼ˆ1.78:1ï¼‰</strong></p>
<p>å…¸å‹åº”ç”¨ï¼šYouTubeè§†é¢‘å°é¢ã€Bç«™å°é¢ã€PPTé¦–é¡µã€æ¡Œé¢å£çº¸ã€ç½‘ç«™heroå›¾ã€‚</p>
<p>ä¼˜åŠ¿ï¼šæœ€é€šç”¨çš„æ¨ªå±æ¯”ä¾‹ï¼Œå‡ ä¹æ‰€æœ‰æ˜¾ç¤ºå™¨å’Œè§†é¢‘å¹³å°çš„é»˜è®¤æ ¼å¼ã€‚ç”¨æˆ·çœ‹æƒ¯äº†è¿™ä¸ªæ¯”ä¾‹ï¼Œè§†è§‰æ¥å—åº¦é«˜ã€‚</p>
<p>åŠ£åŠ¿ï¼šå› ä¸ºå¤ªå¸¸è§ï¼Œè§†è§‰ä¸Šä¸å¤Ÿ"ç‰¹åˆ«"ï¼Œæƒ³è¦å¸å¼•çœ¼çƒéœ€è¦åœ¨å†…å®¹åˆ›æ„ä¸Šä¸‹åŠŸå¤«ã€‚</p>
<p>å®é™…ä½¿ç”¨å»ºè®®ï¼šå¦‚æœä½ ä¸ç¡®å®šé€‰å“ªä¸ªæ¨ªå±æ¯”ä¾‹ï¼Œé€‰16:9ä¸ä¼šé”™ã€‚å®ƒæ˜¯æ¨ªå±å†…å®¹çš„"å®‰å…¨é€‰æ‹©"ã€‚</p>
<p><strong>4:3ç»å…¸æ¨ªå±ï¼ˆ1.33:1ï¼‰</strong></p>
<p>å…¸å‹åº”ç”¨ï¼šiPadæ¨ªå±ã€ä¼ ç»Ÿæ˜¾ç¤ºå™¨ã€æŠ•å½±ä»ªã€å¤å¤é£æ ¼å†…å®¹ã€‚</p>
<p>ä¼˜åŠ¿ï¼šæ¯”16:9"æ›´æ–¹"ï¼Œç”»é¢ä¿¡æ¯å¯†åº¦æ›´é«˜ï¼ˆåŒæ ·å®½åº¦ä¸‹ï¼Œ4:3èƒ½å±•ç¤ºæ›´å¤šçºµå‘å†…å®¹ï¼‰ã€‚é€‚åˆä¿¡æ¯å›¾ã€æ•™ç¨‹æˆªå›¾ã€è€å¼ç…§ç‰‡é£æ ¼ã€‚</p>
<p>åŠ£åŠ¿ï¼šåœ¨ç°ä»£å®½å±æ˜¾ç¤ºå™¨ä¸Šä¼šæœ‰é»‘è¾¹ï¼Œä¸å¤Ÿ"ç°ä»£æ„Ÿ"ã€‚</p>
<p>å®é™…ä½¿ç”¨å»ºè®®ï¼šæ•™è‚²å†…å®¹ã€ä¿¡æ¯å›¾è¡¨ã€éœ€è¦å…¼å®¹iPadå±•ç¤ºçš„åœºæ™¯é€‚åˆ4:3ã€‚å¦‚æœè¿½æ±‚ç°ä»£æ„Ÿå’Œç”µå½±æ„Ÿï¼Œé€‰16:9æˆ–21:9ã€‚</p>
<p><strong>3:2æ‘„å½±æ¨ªå±ï¼ˆ1.5:1ï¼‰</strong></p>
<p>å…¸å‹åº”ç”¨ï¼šå•åç›¸æœºæ ‡å‡†ã€é£æ™¯æ‘„å½±ã€è‰ºæœ¯å°åˆ·ã€æ‘„å½±ä½œå“é›†ã€‚</p>
<p>ä¼˜åŠ¿ï¼šä¸“ä¸šæ‘„å½±åœˆçš„æ ‡å‡†æ¯”ä¾‹ï¼Œè§†è§‰å¹³è¡¡æ„Ÿå¥½ï¼Œé€‚åˆéœ€è¦"æ‘„å½±è´¨æ„Ÿ"çš„åœºæ™¯ã€‚</p>
<p>åŠ£åŠ¿ï¼šåœ¨ç¤¾äº¤åª’ä½“å±•ç¤ºæ—¶å¯èƒ½è¢«è£å‰ªï¼ˆInstagram Feedæ˜¯1:1ï¼Œä¼šè£æ‰ä¸¤è¾¹ï¼‰ã€‚</p>
<p>å®é™…ä½¿ç”¨å»ºè®®ï¼šå¦‚æœä½ çš„AIç”Ÿæˆå›¾ç‰‡å®šä½æ˜¯"æ‘„å½±ä½œå“çº§åˆ«"ï¼ˆå¦‚è‰ºæœ¯åˆ›ä½œã€é«˜ç«¯å“ç‰Œè§†è§‰ï¼‰ï¼Œ3:2èƒ½ä¼ è¾¾ä¸“ä¸šæ„Ÿã€‚æ—¥å¸¸ç¤¾äº¤åª’ä½“å†…å®¹ä¸æ¨èã€‚</p>
<h3 data-id="heading-13">æ–¹å½¢ï¼šç¤¾äº¤åª’ä½“æœ€é€šç”¨</h3>
<p><strong>1:1æ­£æ–¹å½¢</strong></p>
<p>å…¸å‹åº”ç”¨ï¼šInstagramåŠ¨æ€å›¾ã€å¾®ä¿¡æœ‹å‹åœˆä¹å®«æ ¼ã€å¤´åƒã€Logoã€äº§å“ç¼©ç•¥å›¾ã€‚</p>
<p>ä¼˜åŠ¿ï¼šé€šç”¨æ€§æœ€å¼ºï¼Œå‡ ä¹æ‰€æœ‰ç¤¾äº¤å¹³å°éƒ½å®Œç¾æ”¯æŒã€‚æ­£æ–¹å½¢æ„å›¾å¼ºè¿«å†…å®¹å±…ä¸­ï¼Œè§†è§‰èšç„¦åº¦é«˜ã€‚</p>
<p>åŠ£åŠ¿ï¼šç©ºé—´åˆ©ç”¨ç‡ç›¸å¯¹ä½ï¼ˆç›¸åŒå®½åº¦ä¸‹ï¼Œç«–å±èƒ½å±•ç¤ºæ›´å¤šå†…å®¹ï¼‰ï¼Œä¸é€‚åˆå±•ç¤ºçºµå‘å»¶ä¼¸çš„ä¸»ä½“ï¼ˆå¦‚äººç‰©å…¨èº«ç…§ã€é«˜æ¥¼ï¼‰ã€‚</p>
<p>å®é™…ä½¿ç”¨å»ºè®®ï¼šå¦‚æœä½ çš„å†…å®¹è¦è·¨å¹³å°åˆ†å‘ï¼ˆå¾®ä¿¡+Instagram+å°çº¢ä¹¦ï¼‰ï¼Œ1:1æ˜¯æœ€å®‰å…¨çš„é€‰æ‹©ã€‚ç”Ÿæˆæ—¶ç¡®ä¿ä¸»ä½“å±…ä¸­ï¼Œé¿å…è¢«ä»»ä½•å¹³å°è£å‰ªã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1d17a268e2ee490ebb3eacdc38b76545~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTGFvWmhhbmdBSQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763773026&amp;x-signature=maeDbDlGAq1Jsn4qrPjKrnNu7tU%3D" alt="10ç§å®½é«˜æ¯”è¯¦è§£ä¸åº”ç”¨åœºæ™¯" loading="lazy"/></p>
<h3 data-id="heading-14">ç«–å±ç»„ï¼šç§»åŠ¨æ—¶ä»£çš„ä¸»æµ</h3>
<p><strong>9:16æ ‡å‡†ç«–å±ï¼ˆ0.56:1ï¼‰</strong></p>
<p>å…¸å‹åº”ç”¨ï¼šæŠ–éŸ³/TikTokçŸ­è§†é¢‘ã€Instagram Reelsã€YouTube Shortsã€æ‰‹æœºå…¨å±å£çº¸ã€‚</p>
<p>ä¼˜åŠ¿ï¼šæœ€ç¬¦åˆæ‰‹æœºç«–å±ä½¿ç”¨ä¹ æƒ¯ï¼Œç”¨æˆ·æ— éœ€æ—‹è½¬å±å¹•ï¼Œæ²‰æµ¸æ„Ÿå¼ºã€‚çŸ­è§†é¢‘æ—¶ä»£çš„"æ ‡å‡†è§„æ ¼"ã€‚</p>
<p>åŠ£åŠ¿ï¼šåœ¨æ¡Œé¢ç«¯è§‚çœ‹ä½“éªŒå·®ï¼ˆä¸¤è¾¹å¤§é‡ç©ºç™½ï¼‰ï¼Œåªé€‚åˆç§»åŠ¨ç«¯å†…å®¹ã€‚</p>
<p>å®é™…ä½¿ç”¨å»ºè®®ï¼š2025å¹´çŸ­è§†é¢‘æ˜¯æµé‡ä¸»æˆ˜åœºï¼Œå¦‚æœä½ åšæŠ–éŸ³/TikTokå†…å®¹ï¼Œ9:16æ˜¯å¿…é€‰ã€‚å³ä½¿æ˜¯å›¾æ–‡å†…å®¹ï¼Œç«–å±ä¹Ÿç¬¦åˆç”¨æˆ·åˆ·æ‰‹æœºçš„ä¹ æƒ¯ã€‚</p>
<p><strong>3:4ç»å…¸ç«–å±ï¼ˆ0.75:1ï¼‰</strong></p>
<p>å…¸å‹åº”ç”¨ï¼šç”µå•†äº§å“è¯¦æƒ…å›¾ã€Pinterest Pinã€å°çº¢ä¹¦ç¬”è®°é…å›¾ã€ç«–å±æµ·æŠ¥ã€‚</p>
<p>ä¼˜åŠ¿ï¼šæ¯”9:16"æ›´æ–¹"ï¼Œé€‚åˆå±•ç¤ºå®Œæ•´çš„äº§å“æˆ–äººç‰©ï¼ˆä»å¤´åˆ°è„šï¼‰ï¼Œç”µå•†æœ€çˆ±çš„æ¯”ä¾‹ã€‚</p>
<p>åŠ£åŠ¿ï¼šç›¸æ¯”9:16ï¼Œæ‰‹æœºå…¨å±æ—¶ä¸Šä¸‹ä¼šæœ‰å°‘é‡é»‘è¾¹ï¼ˆä¸è¿‡å½±å“ä¸å¤§ï¼‰ã€‚</p>
<p>å®é™…ä½¿ç”¨å»ºè®®ï¼šç”µå•†äº§å“å›¾é¦–é€‰3:4â€”â€”å±•ç¤ºå®Œæ•´åˆä¸è¿‡äºç˜¦é•¿ï¼Œé…åˆè¯¦æƒ…è¯´æ˜æœ€åˆé€‚ã€‚</p>
<p><strong>2:3æ‘„å½±ç«–å±ï¼ˆ0.67:1ï¼‰</strong></p>
<p>å…¸å‹åº”ç”¨ï¼šæ—¶å°šäººåƒæ‘„å½±ã€æ‚å¿—å°é¢ã€è‰ºæœ¯æµ·æŠ¥ã€å‚ç›´å±•ç¤ºæ¶ã€‚</p>
<p>ä¼˜åŠ¿ï¼šä¸“ä¸šæ‘„å½±çš„æ ‡å‡†ç«–å±æ¯”ä¾‹ï¼Œé€‚åˆå¼ºè°ƒçºµå‘å»¶ä¼¸ï¼ˆé«˜æŒ‘èº«æã€é«˜è€¸å»ºç­‘ï¼‰ã€‚</p>
<p>åŠ£åŠ¿ï¼šåœ¨éƒ¨åˆ†ç¤¾äº¤å¹³å°ä¼šè¢«è£å‰ªï¼ˆInstagram Storyæ˜¯9:16æ›´çª„ï¼‰ã€‚</p>
<p>å®é™…ä½¿ç”¨å»ºè®®ï¼šæ—¶å°šã€è‰ºæœ¯ã€äººåƒç±»å†…å®¹é€‚åˆ2:3ï¼Œèƒ½ä¼ è¾¾"ä¸“ä¸šæ‘„å½±"çš„è´¨æ„Ÿã€‚</p>
<p><strong>5:4è¿‘æ–¹å½¢æ¨ªå±ï¼ˆ1.25:1ï¼‰</strong></p>
<p>å…¸å‹åº”ç”¨ï¼šInstagramè€å¼ç…§ç‰‡æ»¤é•œã€å¤å¤å¹¿å‘Šé£æ ¼ã€å¡ç‰‡è®¾è®¡ã€‚</p>
<p>ä¼˜åŠ¿ï¼šä»‹äºæ–¹å½¢å’Œæ¨ªå±ä¹‹é—´ï¼Œè§†è§‰å¹³è¡¡ï¼Œé€‚åˆéœ€è¦"å¤å¤æ„Ÿ"çš„å†…å®¹ã€‚</p>
<p>åŠ£åŠ¿ï¼šè¾ƒå°‘ä½¿ç”¨ï¼Œåœ¨ç°ä»£å¹³å°å±•ç¤ºæ—¶å¯èƒ½ä¸å¦‚æ ‡å‡†æ¯”ä¾‹åè°ƒã€‚</p>
<p>å®é™…ä½¿ç”¨å»ºè®®ï¼šå¤å¤ä¸»é¢˜ã€æ€€æ—§å†…å®¹ã€æ¨¡æ‹Ÿèƒ¶ç‰‡ç›¸æœºæ•ˆæœæ—¶é€‰5:4ã€‚æ—¥å¸¸å†…å®¹ä¸æ¨èã€‚</p>
<p><strong>4:5è¿‘æ–¹å½¢ç«–å±ï¼ˆ0.8:1ï¼‰</strong></p>
<p>å…¸å‹åº”ç”¨ï¼šInstagramåŠ¨æ€æ¨èæ¯”ä¾‹ã€Facebookå¸–å­ã€ç¤¾äº¤å¡ç‰‡ã€‚</p>
<p>ä¼˜åŠ¿ï¼šInstagramå®˜æ–¹æ¨èçš„"æœ€ä½³å±•ç¤ºæ¯”ä¾‹"â€”â€”ç›¸æ¯”1:1èƒ½å±•ç¤ºæ›´å¤šçºµå‘å†…å®¹ï¼Œç›¸æ¯”9:16ä¸ä¼šå¤ªç˜¦é•¿ï¼Œåœ¨Feedæµä¸­å æ®å±å¹•é¢ç§¯æœ€å¤§ã€‚</p>
<p>åŠ£åŠ¿ï¼šæ¯”è¾ƒ"ä¸“å±"Instagramçš„æ¯”ä¾‹ï¼Œåœ¨å…¶ä»–å¹³å°å¯èƒ½éœ€è¦è°ƒæ•´ã€‚</p>
<p>å®é™…ä½¿ç”¨å»ºè®®ï¼šå¦‚æœä½ çš„å†…å®¹ä¸»è¦å‘InstagramåŠ¨æ€ï¼ˆä¸æ˜¯Storyï¼‰ï¼Œ4:5èƒ½è·å¾—æœ€å¤§çš„å±•ç¤ºé¢ç§¯å’Œå…³æ³¨åº¦ã€‚æ ¹æ®Instagramå®˜æ–¹å»ºè®®ï¼Œ4:5æ¯”1:1çš„engagementé«˜çº¦10-15%ã€‚</p>
<h2 data-id="heading-15">åœºæ™¯æ¨èï¼šä¸åŒåº”ç”¨é€‰å“ªä¸ªæ¯”ä¾‹ï¼Ÿ</h2>
<p>é€‰æ‹©å®½é«˜æ¯”ä¸æ˜¯æŠ€æœ¯é—®é¢˜ï¼Œè€Œæ˜¯"ä½ çš„å†…å®¹åœ¨å“ªé‡Œå±•ç¤ºã€ç”¨æˆ·æ€ä¹ˆçœ‹"çš„æˆ˜ç•¥é—®é¢˜ã€‚</p>
<h3 data-id="heading-16">ç¤¾äº¤åª’ä½“å†…å®¹åˆ›ä½œè€…</h3>
<p><strong>Instagramå…¨å¥—</strong>ï¼š</p>
<ul>
<li>Story/Reelsï¼š9:16ï¼ˆå…¨å±æ²‰æµ¸ï¼‰</li>
<li>åŠ¨æ€Feedï¼š4:5ï¼ˆå®˜æ–¹æ¨èï¼Œå±•ç¤ºé¢ç§¯å¤§ï¼‰</li>
<li>æ—§ç‰ˆæ–¹å½¢å¸–ï¼š1:1ï¼ˆç»å…¸æ ¼å¼ï¼Œå…¼å®¹æ€§å¥½ï¼‰</li>
</ul>
<p><strong>å°çº¢ä¹¦è¿è¥</strong>ï¼š</p>
<ul>
<li>é¦–é€‰ï¼š3:4ï¼ˆç”µå•†å’Œäº§å“å±•ç¤ºæ ‡å‡†ï¼‰</li>
<li>æ¬¡é€‰ï¼š1:1ï¼ˆæ–¹å½¢å°é¢å›¾ï¼‰</li>
<li>å¯é€‰ï¼š4:5ï¼ˆç±»ä¼¼Instagramï¼‰</li>
</ul>
<p><strong>æŠ–éŸ³/TikTok</strong>ï¼š</p>
<ul>
<li>å¿…é€‰ï¼š9:16ï¼ˆç«–å±è§†é¢‘å°é¢ï¼‰</li>
<li>å¤‡é€‰ï¼š1:1ï¼ˆè¯é¢˜é…å›¾ï¼‰</li>
</ul>
<p><strong>YouTube</strong>ï¼š</p>
<ul>
<li>è§†é¢‘å°é¢ï¼š16:9ï¼ˆæ ‡å‡†ï¼‰</li>
<li>Shortså°é¢ï¼š9:16ï¼ˆç«–å±çŸ­è§†é¢‘ï¼‰</li>
<li>ç¤¾åŒºå¸–å­ï¼š1:1æˆ–16:9</li>
</ul>
<h3 data-id="heading-17">ç”µå•†å¹³å°å•†å®¶</h3>
<p><strong>æ·˜å®/å¤©çŒ«</strong>ï¼š</p>
<ul>
<li>ä¸»å›¾ï¼š1:1æ–¹å½¢ï¼ˆ800Ã—800æ ‡å‡†ï¼‰</li>
<li>è¯¦æƒ…å›¾ï¼š3:4ç«–å±ï¼ˆå±•ç¤ºå®Œæ•´äº§å“ï¼‰</li>
<li>æ¨ªå¹…å›¾ï¼š16:9ï¼ˆæ´»åŠ¨Bannerï¼‰</li>
</ul>
<p><strong>äº¬ä¸œ</strong>ï¼š</p>
<ul>
<li>å•†å“ä¸»å›¾ï¼š1:1</li>
<li>è¯¦æƒ…é•¿å›¾ï¼šå¯ç”¨3:4æˆ–2:3</li>
</ul>
<p><strong>æ‹¼å¤šå¤š</strong>ï¼š</p>
<ul>
<li>ä¸»å›¾ï¼š1:1ï¼ˆå¼ºåˆ¶è¦æ±‚ï¼‰</li>
<li>è¯¦æƒ…ï¼š3:4æ¨è</li>
</ul>
<p><strong>è·¨å¢ƒç”µå•†ï¼ˆAmazon/eBayï¼‰</strong> ï¼š</p>
<ul>
<li>ä¸»å›¾ï¼š1:1ï¼ˆå›½é™…é€šç”¨ï¼‰</li>
<li>Lifestyleå›¾ï¼š4:3æˆ–16:9ï¼ˆåœºæ™¯å±•ç¤ºï¼‰</li>
</ul>
<h3 data-id="heading-18">è§†é¢‘å†…å®¹åˆ›ä½œ</h3>
<p><strong>é•¿è§†é¢‘ï¼ˆ&gt;1åˆ†é’Ÿï¼‰</strong> ï¼š</p>
<ul>
<li>YouTube/Bç«™ï¼š16:9æ ‡å‡†</li>
<li>ç”µå½±æ„Ÿå†…å®¹ï¼š21:9è¶…å®½</li>
<li>æ•™ç¨‹å½•å±ï¼š16:9ï¼ˆé…åˆ1080p/1440pï¼‰</li>
</ul>
<p><strong>çŸ­è§†é¢‘ï¼ˆ&lt;1åˆ†é’Ÿï¼‰</strong> ï¼š</p>
<ul>
<li>æŠ–éŸ³/å¿«æ‰‹ï¼š9:16å¿…é€‰</li>
<li>Instagram Reelsï¼š9:16</li>
<li>YouTube Shortsï¼š9:16</li>
</ul>
<p><strong>ç›´æ’­å°é¢</strong>ï¼š</p>
<ul>
<li>æ¨ªå±ç›´æ’­ï¼ˆæ¸¸æˆã€æ¡Œé¢ï¼‰ï¼š16:9</li>
<li>ç«–å±ç›´æ’­ï¼ˆæˆ·å¤–ã€æ‰è‰ºï¼‰ï¼š9:16</li>
</ul>
<h3 data-id="heading-19">æ¸¸æˆå¼€å‘ä¸è®¾è®¡</h3>
<p><strong>UIç•Œé¢</strong>ï¼š</p>
<ul>
<li>æ‰‹æ¸¸UIï¼š9:16ï¼ˆé€‚é…æ‰‹æœºç«–å±ï¼‰æˆ–16:9ï¼ˆæ¨ªå±æ¸¸æˆï¼‰</li>
<li>PCæ¸¸æˆUIï¼š21:9ï¼ˆè¶…å®½å±ï¼‰æˆ–16:9</li>
<li>å¡ç‰Œ/é“å…·å›¾æ ‡ï¼š1:1æˆ–5:4</li>
</ul>
<p><strong>åœºæ™¯æ¦‚å¿µå›¾</strong>ï¼š</p>
<ul>
<li>æ¨ªç‰ˆæ¸¸æˆï¼š16:9æˆ–21:9</li>
<li>ç«–ç‰ˆæ¸¸æˆï¼š9:16</li>
<li>ç­‰è·è§†è§’ï¼š1:1æˆ–5:4</li>
</ul>
<p><strong>è¥é”€ç´ æ</strong>ï¼š</p>
<ul>
<li>Steamå•†åº—æ¨ªå¹…ï¼š16:9</li>
<li>åº”ç”¨å•†åº—æˆªå›¾ï¼š9:16ï¼ˆæ‰‹æ¸¸ï¼‰</li>
<li>å®£ä¼ æµ·æŠ¥ï¼šå¯é€‰2:3æˆ–3:4</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/77636d74823a4fb890b787d09f9cf59a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTGFvWmhhbmdBSQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763773026&amp;x-signature=3h4P4%2Fk2SlScDv0aOokxZbB8QG0%3D" alt="åœºæ™¯åº”ç”¨æ¨è" loading="lazy"/></p>
<h2 data-id="heading-20">å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆï¼šå°ºå¯¸è®¾ç½®çš„5å¤§å‘</h2>
<h3 data-id="heading-21">é—®é¢˜1ï¼šè®¾ç½®äº†aspect_ratioä½†ç”Ÿæˆçš„è¿˜æ˜¯1:1æ–¹å½¢</h3>
<p><strong>ç°è±¡</strong>ï¼šä»£ç ä¸­æ˜ç¡®è®¾ç½®<code>aspect_ratio="16:9"</code>ï¼Œä½†ç”Ÿæˆçš„å›¾ç‰‡ä»æ˜¯æ­£æ–¹å½¢ã€‚</p>
<p><strong>åŸå› åˆ†æ</strong>ï¼šè¿™æ˜¯æ—©æœŸç‰ˆæœ¬ï¼ˆgemini-2.5-flash-image-previewï¼‰çš„å·²çŸ¥bugã€‚æ ¹æ®Google AI Developers Forumçš„è®¨è®ºï¼Œpreviewç‰ˆæœ¬è™½ç„¶æ¥å—aspect_ratioå‚æ•°ï¼Œä½†å®é™…æ‰§è¡Œæ—¶å¯èƒ½å¿½ç•¥ï¼Œå§‹ç»ˆç”Ÿæˆ1:1ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<ol>
<li>ç¡®è®¤ä½¿ç”¨çš„æ˜¯æ­£å¼ç‰ˆæ¨¡å‹ï¼ˆ2025å¹´9æœˆåå‘å¸ƒï¼‰è€Œä¸æ˜¯previewç‰ˆ</li>
<li>æ£€æŸ¥SDKç‰ˆæœ¬æ˜¯å¦æœ€æ–°ï¼ˆ<code>pip install --upgrade google-generativeai</code>ï¼‰</li>
<li>å¦‚æœä»æ— æ•ˆï¼Œå°è¯•åœ¨promptä¸­æ˜ç¡®è¯´æ˜ï¼š"ç”Ÿæˆ16:9æ¨ªå±æ¯”ä¾‹çš„å›¾ç‰‡"</li>
<li>ä½¿ç”¨"å‚è€ƒå›¾æ³•"ï¼šä¸Šä¼ ä¸€å¼ 16:9çš„ç©ºç™½å›¾ï¼Œpromptè¯´"ä½¿ç”¨å‚è€ƒå›¾çš„å®½é«˜æ¯”"</li>
</ol>
<h3 data-id="heading-22">é—®é¢˜2ï¼šæ— æ³•è®¾ç½®ç²¾ç¡®åƒç´ å°ºå¯¸ï¼ˆå¦‚å¿…é¡»1920Ã—1080ï¼‰</h3>
<p><strong>ç°è±¡</strong>ï¼šéœ€è¦ç”Ÿæˆç²¾ç¡®1920Ã—1080çš„å›¾ç‰‡ï¼Œä½†APIåªæ”¯æŒè®¾ç½®æ¯”ä¾‹ä¸æ”¯æŒåƒç´ ã€‚</p>
<p><strong>åŸå› åˆ†æ</strong>ï¼šGemini 2.5 Flash Imageçš„è®¾è®¡å“²å­¦æ˜¯"å†…å®¹ä¼˜å…ˆ"ã€‚Googleè®¤ä¸ºï¼Œå¯¹äºAIç”Ÿæˆå›¾ç‰‡ï¼Œé‡è¦çš„æ˜¯å†…å®¹è´¨é‡å’Œæ¯”ä¾‹åè°ƒï¼Œç²¾ç¡®åƒç´ ç”±æ¨¡å‹è‡ªåŠ¨ä¼˜åŒ–ã€‚å®é™…ç”Ÿæˆçš„åˆ†è¾¨ç‡é€šå¸¸åœ¨1024-2048pxé•¿è¾¹ï¼ˆå–å†³äºNano Banana 1è¿˜æ˜¯2ï¼‰ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<ol>
<li>å…ˆç”Ÿæˆ16:9æ¯”ä¾‹çš„å›¾ç‰‡ï¼ˆæ¨¡å‹è‡ªåŠ¨å†³å®šåƒç´ ï¼Œå¯èƒ½æ˜¯1024Ã—576æˆ–2048Ã—1152ï¼‰</li>
<li>ä½¿ç”¨å›¾ç‰‡å¤„ç†å·¥å…·upscaleåˆ°ç›®æ ‡å°ºå¯¸ï¼ˆPhotoshopã€Python Pillowåº“ã€åœ¨çº¿å·¥å…·ï¼‰</li>
<li>æˆ–ä½¿ç”¨ä¸“é—¨æ”¯æŒç²¾ç¡®å°ºå¯¸çš„æ¨¡å‹ï¼ˆå¦‚DALL-E 3å¯ä»¥æŒ‡å®š1024Ã—1024/1792Ã—1024ï¼‰</li>
</ol>
<p>ä»£ç ç¤ºä¾‹ï¼ˆç”Ÿæˆåupscaleåˆ°1920Ã—1080ï¼‰ï¼š</p>
<h3 data-id="heading-23">é—®é¢˜3ï¼šä¸æ”¯æŒè‡ªå®šä¹‰å®½é«˜æ¯”ï¼ˆå¦‚7:5ã€2:1ï¼‰</h3>
<p><strong>ç°è±¡</strong>ï¼šéœ€è¦ç”Ÿæˆ2:1æ¯”ä¾‹ï¼ˆç‰¹å®šè®¾è®¡éœ€æ±‚ï¼‰ï¼Œä½†APIåªæ¥å—å®˜æ–¹çš„10ç§é¢„è®¾å€¼ã€‚</p>
<p><strong>åŸå› åˆ†æ</strong>ï¼šGoogleä¸ºäº†ä¿è¯ç”Ÿæˆè´¨é‡å’Œç¨³å®šæ€§ï¼Œåªå¼€æ”¾äº†ç»è¿‡å……åˆ†æµ‹è¯•çš„10ç§æ ‡å‡†æ¯”ä¾‹ã€‚è‡ªå®šä¹‰æ¯”ä¾‹å¯èƒ½å¯¼è‡´æ„å›¾å¤±è¡¡ã€å†…å®¹è¢«è£å‰ªç­‰é—®é¢˜ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<ol>
<li>é€‰æ‹©æœ€æ¥è¿‘çš„æ ‡å‡†æ¯”ä¾‹ç”Ÿæˆï¼ˆå¦‚éœ€è¦2:1ï¼Œç”¨21:9=2.33:1æ¥è¿‘ï¼‰</li>
<li>ç”Ÿæˆåè£å‰ªåˆ°ç›®æ ‡æ¯”ä¾‹ï¼ˆç”¨å›¾ç‰‡å¤„ç†å·¥å…·ï¼‰</li>
<li>æˆ–åœ¨promptä¸­å¼ºè°ƒï¼š"ç”Ÿæˆåè£å‰ªåˆ°2:1ï¼Œä¸»ä½“ä¿æŒå±…ä¸­ï¼Œä¸¤ä¾§å¯ç•™ç©º"</li>
</ol>
<p>å˜é€šæ–¹æ³•ï¼ˆpromptæŠ€å·§ï¼‰ï¼š</p>
<h3 data-id="heading-24">é—®é¢˜4ï¼šå›¾ç‰‡ç¼–è¾‘åå®½é«˜æ¯”æ”¹å˜å¤±è´¥</h3>
<p><strong>ç°è±¡</strong>ï¼šä¸Šä¼ ä¸€å¼ 1:1çš„å›¾ç‰‡ï¼Œpromptè¯´"æ‰©å±•åˆ°16:9"ï¼Œä½†è¾“å‡ºä»æ˜¯1:1ã€‚</p>
<p><strong>åŸå› åˆ†æ</strong>ï¼šå›¾ç‰‡ç¼–è¾‘æ¨¡å¼ä¸‹ï¼Œå¦‚æœpromptæ²¡æœ‰æ˜ç¡®æŒ‡ç¤ºå¦‚ä½•å¤„ç†å®½é«˜æ¯”å˜åŒ–ï¼ˆæ‰©å±•ç”»å¸ƒï¼Ÿè£å‰ªï¼Ÿï¼‰ï¼Œæ¨¡å‹å¯èƒ½é»˜è®¤ä¿æŒåŸæ¯”ä¾‹ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼šåœ¨promptä¸­æ˜ç¡®è¯´æ˜æ‰©å±•ç­–ç•¥ï¼š</p>
<p>æˆ–è€…ä½¿ç”¨"å‚è€ƒç©ºç™½å›¾æ³•"ï¼ˆç¤¾åŒºéªŒè¯æœ‰æ•ˆï¼‰ï¼š</p>
<ol>
<li>åˆ›å»ºä¸€å¼ 16:9çš„é€æ˜PNGï¼ˆç”¨ä»»ä½•å›¾ç‰‡å·¥å…·ï¼Œæˆ–åœ¨çº¿ç”Ÿæˆï¼‰</li>
<li>ä¸Šä¼ åŸå›¾+é€æ˜PNG+promptï¼š"ä½¿ç”¨ç¬¬äºŒå¼ å›¾ç‰‡çš„å®½é«˜æ¯”ï¼Œæ‰©å±•ç¬¬ä¸€å¼ å›¾ç‰‡"</li>
</ol>
<h3 data-id="heading-25">é—®é¢˜5ï¼šæ‰¹é‡ç”Ÿæˆæ—¶éƒ¨åˆ†æ¯”ä¾‹å¤±è´¥</h3>
<p><strong>ç°è±¡</strong>ï¼šå¾ªç¯ç”Ÿæˆ10ç§æ¯”ä¾‹ï¼Œå…¶ä¸­2-3ä¸ªè¿”å›é”™è¯¯æˆ–ç”Ÿæˆå¤±è´¥ã€‚</p>
<p><strong>åŸå› åˆ†æ</strong>ï¼šå¯èƒ½æ˜¯rate limitï¼ˆAPIè°ƒç”¨è¿‡é¢‘ï¼‰ã€æŸäº›æ¯”ä¾‹çš„promptå…¼å®¹æ€§é—®é¢˜ã€æˆ–ç½‘ç»œæ³¢åŠ¨ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼šæ·»åŠ é‡è¯•æœºåˆ¶å’Œé”™è¯¯è®°å½•ï¼š</p>
<h2 data-id="heading-26">è¿›é˜¶æŠ€å·§ï¼šå¤šæ¯”ä¾‹æ‰¹é‡ç”Ÿæˆä¸æˆæœ¬ä¼˜åŒ–</h2>
<h3 data-id="heading-27">æŠ€å·§1ï¼šæ™ºèƒ½æ¯”ä¾‹é€‰æ‹©ç­–ç•¥</h3>
<p>ä¸è¦ç›²ç›®ç”Ÿæˆå…¨éƒ¨10ç§æ¯”ä¾‹ï¼Œè€Œæ˜¯æ ¹æ®åˆ†å‘å¹³å°æ™ºèƒ½é€‰æ‹©ï¼š</p>
<p>è¿™ç§"æŒ‰éœ€ç”Ÿæˆ"ç­–ç•¥ï¼Œç›¸æ¯”ç›²ç›®ç”Ÿæˆå…¨éƒ¨10ç§ï¼Œèƒ½èŠ‚çœ50%çš„APIè°ƒç”¨æˆæœ¬ï¼ˆ5å¼ Ã—<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0.039</mn><mo>=</mo></mrow><annotation encoding="application/x-tex">0.039=</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">0.039</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span></span></span></span></span>0.195 vs 10å¼ Ã—<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0.039</mn><mo>=</mo></mrow><annotation encoding="application/x-tex">0.039=</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">0.039</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span></span></span></span></span>0.39ï¼‰ã€‚</p>
<h3 data-id="heading-28">æŠ€å·§2ï¼šä½¿ç”¨APIèšåˆå¹³å°é™ä½æˆæœ¬</h3>
<p>å¯¹äºéœ€è¦å¤§é‡ç”Ÿæˆä¸åŒå°ºå¯¸å›¾ç‰‡çš„åœºæ™¯ï¼ˆå¦‚ç”µå•†æœˆç”Ÿæˆ1000+å¼ äº§å“å›¾ï¼‰ï¼Œä½¿ç”¨laozhang.aiç­‰APIèšåˆå¹³å°å¯ä»¥é™ä½æˆæœ¬ã€‚</p>
<p>è¿™ç±»å¹³å°èšåˆäº†200+AIæ¨¡å‹ï¼ŒåŒ…æ‹¬Gemini 2.5 Flash Imageï¼ˆNano Bananaï¼‰ï¼Œä»·æ ¼é€šå¸¸ä¸ºå®˜æ–¹çš„84æŠ˜å·¦å³ã€‚è™½ç„¶éœ€è¦ä¸€å®šæŠ€æœ¯åŸºç¡€é…ç½®API endpointå’Œè®¤è¯ï¼Œä½†å¯¹äºé«˜é¢‘ä½¿ç”¨åœºæ™¯ï¼Œæˆæœ¬ä¼˜åŠ¿æ˜æ˜¾ã€‚</p>
<p>è®¡ç®—ç¤ºä¾‹ï¼š</p>
<ul>
<li>å®˜æ–¹APIï¼š1000å¼ Ã—<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0.039</mn><mo>=</mo></mrow><annotation encoding="application/x-tex">0.039=</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">0.039</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span></span></span></span></span>39/æœˆ</li>
<li>èšåˆå¹³å°ï¼ˆ84æŠ˜ï¼‰ï¼š1000å¼ Ã—<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0.033</mn><mo>â‰ˆ</mo></mrow><annotation encoding="application/x-tex">0.033â‰ˆ</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">0.033</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">â‰ˆ</span></span></span></span></span>33/æœˆï¼Œçœ<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>6</mn><mi mathvariant="normal">/</mi><mtext>æœˆï¼Œå¹´çœ</mtext></mrow><annotation encoding="application/x-tex">6/æœˆï¼Œå¹´çœ</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord">6/</span><span class="mord cjk_fallback">æœˆï¼Œå¹´çœ</span></span></span></span></span>72</li>
</ul>
<p>æ­¤å¤–ï¼Œèšåˆå¹³å°çš„ä¼˜åŠ¿æ˜¯ç»Ÿä¸€ç®¡ç†å¤šä¸ªæ¨¡å‹â€”â€”ä½ å¯ä»¥åœ¨Nano Bananaï¼ˆä¾¿å®œï¼‰ã€DALL-Eï¼ˆè´¨é‡ç¨³å®šï¼‰ã€Midjourneyï¼ˆè‰ºæœ¯é£æ ¼ï¼‰ä¹‹é—´çµæ´»åˆ‡æ¢ï¼Œä¸éœ€è¦ç®¡ç†å¤šä¸ªAPI keyã€‚åœ¨ä»£ç ä¸­åˆ‡æ¢æ¨¡å‹åªéœ€æ”¹ä¸€ä¸ªå‚æ•°ï¼š</p>
<h3 data-id="heading-29">æŠ€å·§3ï¼šå‚è€ƒå›¾æ³•å®ç°ä»»æ„å®½é«˜æ¯”ï¼ˆå˜é€šæ–¹æ¡ˆï¼‰</h3>
<p>è™½ç„¶APIåªæ”¯æŒ10ç§é¢„è®¾æ¯”ä¾‹ï¼Œä½†ç¤¾åŒºå‘ç°äº†ä¸€ä¸ªå·§å¦™æ–¹æ³•â€”â€”ä½¿ç”¨"ç©ºç™½å‚è€ƒå›¾"å¯ä»¥å®ç°ä»»æ„æ¯”ä¾‹ï¼š</p>
<p><strong>åŸç†</strong>ï¼šNano Bananaå¯ä»¥ç†è§£å‚è€ƒå›¾çš„å®½é«˜æ¯”ï¼Œå¹¶åº”ç”¨åˆ°ç”Ÿæˆå›¾ç‰‡ä¸Šã€‚</p>
<p><strong>æ­¥éª¤</strong>ï¼š</p>
<ol>
<li>ç”¨ä»»ä½•å·¥å…·åˆ›å»ºä¸€å¼ ç›®æ ‡æ¯”ä¾‹çš„çº¯è‰²æˆ–é€æ˜å›¾ç‰‡ï¼ˆå¦‚2:1æ¯”ä¾‹ï¼Œ2000Ã—1000pxï¼‰</li>
<li>å°†è¿™å¼ ç©ºç™½å›¾ä½œä¸ºå‚è€ƒå›¾ä¸Šä¼ </li>
<li>Promptè¯´ï¼š"ä½¿ç”¨å‚è€ƒå›¾çš„å®½é«˜æ¯”ç”Ÿæˆ{ä½ çš„å†…å®¹æè¿°}"</li>
<li>æ¨¡å‹ä¼šç”ŸæˆåŒæ¯”ä¾‹çš„å†…å®¹å›¾ç‰‡</li>
</ol>
<p>ä»£ç å®ç°ï¼š</p>
<p>è¿™ä¸ªæ–¹æ³•çš„æˆåŠŸç‡çº¦80-90%ï¼ˆæ ¹æ®ç¤¾åŒºåé¦ˆï¼‰ï¼Œè™½ç„¶ä¸æ˜¯100%å¯é ï¼Œä½†ä¸ºéœ€è¦ç‰¹æ®Šæ¯”ä¾‹çš„åœºæ™¯æä¾›äº†å˜é€šæ–¹æ¡ˆã€‚</p>
<h3 data-id="heading-30">æŠ€å·§4ï¼šæˆæœ¬ç›‘æ§ä¸é¢„ç®—æ§åˆ¶</h3>
<p>å¦‚æœä½ çš„é¡¹ç›®éœ€è¦å¤§é‡ç”Ÿæˆå›¾ç‰‡ï¼ˆæ—¥100+å¼ ï¼‰ï¼Œå»ºè®®å®ç°æˆæœ¬ç›‘æ§ï¼Œé¿å…è¶…æ”¯ï¼š</p>
<p>è¿™ç§ä¸»åŠ¨çš„æˆæœ¬æ§åˆ¶ï¼Œé¿å…äº†"ä¸çŸ¥ä¸è§‰çƒ§æ‰å‡ ç™¾ç¾å…ƒ"çš„æƒ…å†µã€‚</p>
<h2 data-id="heading-31">å¸¸è§é—®é¢˜FAQ</h2>
<p><strong>Q1: æ‰€æœ‰10ç§å®½é«˜æ¯”çš„ä»·æ ¼éƒ½ä¸€æ ·å—ï¼Ÿ</strong></p>
<p>æ˜¯çš„ï¼Œéƒ½æ˜¯<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0.039</mn><mi mathvariant="normal">/</mi><mtext>å¼ ï¼ˆ</mtext></mrow><annotation encoding="application/x-tex">0.039/å¼ ï¼ˆ</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord">0.039/</span><span class="mord cjk_fallback">å¼ ï¼ˆ</span></span></span></span></span>30/ç™¾ä¸‡è¾“å‡ºtokensï¼‰ã€‚å®½é«˜æ¯”ä¸å½±å“å®šä»·ï¼Œåªå½±å“ç”Ÿæˆçš„åƒç´ æ•°ï¼ˆ21:9çš„æ€»åƒç´ å¯èƒ½æ¯”9:16å¤šï¼Œä½†tokenæ¶ˆè€—åŸºæœ¬ä¸€è‡´ï¼‰ã€‚</p>
<p><strong>Q2: å¯ä»¥åœ¨ç”Ÿæˆæ—¶åŒæ—¶æŒ‡å®šå¤šä¸ªå®½é«˜æ¯”å—ï¼Ÿ</strong></p>
<p>ä¸èƒ½ã€‚å•æ¬¡APIè°ƒç”¨åªèƒ½æŒ‡å®šä¸€ä¸ªaspect_ratioã€‚å¦‚æœéœ€è¦3ä¸ªæ¯”ä¾‹ï¼Œå¿…é¡»è°ƒç”¨API 3æ¬¡ï¼ˆæˆæœ¬Ã—3ï¼‰ã€‚å»ºè®®ç”¨æ‰¹é‡è„šæœ¬æŒ‰éœ€ç”Ÿæˆï¼Œé¿å…æµªè´¹ã€‚</p>
<p><strong>Q3: å›¾ç‰‡ç¼–è¾‘ï¼ˆä¿®æ”¹ç°æœ‰å›¾ç‰‡ï¼‰å¯ä»¥æ”¹å˜å®½é«˜æ¯”å—ï¼Ÿ</strong></p>
<p>å¯ä»¥ï¼ä¸Šä¼ åŸå›¾+promptè¯´æ˜å¦‚ä½•æ‰©å±•æˆ–è£å‰ª+è®¾ç½®æ–°çš„aspect_ratioå³å¯ã€‚æ¨¡å‹ä¼šæ™ºèƒ½å¤„ç†â€”â€”æ‰©å±•æ—¶è¡¥å……èƒŒæ™¯ï¼Œè£å‰ªæ—¶ä¿ç•™é‡ç‚¹å†…å®¹ã€‚</p>
<p><strong>Q4: ç”Ÿæˆçš„å›¾ç‰‡å®é™…åˆ†è¾¨ç‡æ˜¯å¤šå°‘ï¼Ÿ</strong></p>
<p>Nano Banana 1ä»£ï¼šé•¿è¾¹çº¦1024pxï¼ˆå¦‚16:9çº¦1024Ã—576ï¼‰ Nano Banana 2ä»£ï¼šé•¿è¾¹çº¦2048pxï¼ˆå¦‚16:9çº¦2048Ã—1152ï¼‰</p>
<p>å…·ä½“åˆ†è¾¨ç‡ç”±æ¨¡å‹è‡ªåŠ¨ä¼˜åŒ–ï¼Œä½ æ— æ³•ç²¾ç¡®æ§åˆ¶ã€‚å¦‚éœ€æ›´é«˜åˆ†è¾¨ç‡ï¼Œç”Ÿæˆåupscaleã€‚</p>
<p><strong>Q5: å“ªäº›å¹³å°å¯¹å®½é«˜æ¯”æœ‰å¼ºåˆ¶è¦æ±‚ï¼Ÿ</strong></p>
<p><strong>ä¸¥æ ¼è¦æ±‚</strong>ï¼ˆä¸ç¬¦åˆä¼šè¢«æ‹’ç»æˆ–å±•ç¤ºå¼‚å¸¸ï¼‰ï¼š</p>
<ul>
<li>æ·˜å®ä¸»å›¾ï¼šå¿…é¡»1:1ï¼Œ800Ã—800æˆ–ä»¥ä¸Š</li>
<li>æ‹¼å¤šå¤šä¸»å›¾ï¼šå¿…é¡»1:1</li>
<li>å¾®ä¿¡å…¬ä¼—å·å°é¢ï¼šå»ºè®®2.35:1ï¼ˆ900Ã—383ï¼‰</li>
</ul>
<p><strong>æ¨èä½†ä¸å¼ºåˆ¶</strong>ï¼ˆä¸ç¬¦åˆä¼šå½±å“å±•ç¤ºæ•ˆæœï¼‰ï¼š</p>
<ul>
<li>Instagram Storyï¼šæ¨è9:16ï¼Œå…¶ä»–æ¯”ä¾‹ä¼šæœ‰é»‘è¾¹</li>
<li>YouTubeå°é¢ï¼šæ¨è16:9ï¼Œå…¶ä»–æ¯”ä¾‹ä¼šè¢«è£å‰ª</li>
<li>å°çº¢ä¹¦ï¼šæ¨è3:4æˆ–1:1ï¼Œ16:9æ¨ªå›¾å±•ç¤ºæ•ˆæœå·®</li>
</ul>
<p><strong>Q6: å¦‚æœæˆ‘åªç”¨ä¸€ç§æ¯”ä¾‹ï¼ˆå¦‚9:16ï¼‰ï¼Œæœ‰æ›´ä¾¿å®œçš„æ–¹æ¡ˆå—ï¼Ÿ</strong></p>
<p>å¦‚æœä½ çš„éœ€æ±‚éå¸¸å›ºå®šï¼ˆåªåšæŠ–éŸ³å†…å®¹ï¼Œæ°¸è¿œåªç”¨9:16ï¼‰ï¼Œå¯ä»¥è€ƒè™‘ï¼š</p>
<ol>
<li>ä½¿ç”¨Midjourneyæˆ–DALL-Eï¼ˆè™½ç„¶å•å¼ è´µï¼Œä½†è´¨é‡å¯èƒ½æ›´ç¨³å®šï¼‰</li>
<li>ä½¿ç”¨ä¸“é—¨ä¼˜åŒ–ç«–å±çš„æ¨¡å‹ï¼ˆå¦‚æŸäº›ä¸“æ³¨TikTokçš„AIå·¥å…·ï¼‰</li>
<li>æ‰¹é‡ç”Ÿæˆæ—¶è°ˆé‡å¤§ä¼˜æƒ ï¼ˆéƒ¨åˆ†APIèšåˆå¹³å°å¯¹å¤§å®¢æˆ·æœ‰æŠ˜æ‰£ï¼‰</li>
</ol>
<p>ä¸è¿‡Nano Bananaçš„$0.039/å¼ å·²ç»å¾ˆä¾¿å®œï¼ˆæ¯”DALL-Eä¾¿å®œ95%ï¼‰ï¼Œå¾ˆéš¾æ‰¾åˆ°æ›´ä½ä»·ä¸”è´¨é‡ç›¸å½“çš„æ–¹æ¡ˆã€‚</p>
<p><strong>Q7: aspect_ratioè®¾ç½®ä¼šå½±å“ç”Ÿæˆé€Ÿåº¦å—ï¼Ÿ</strong></p>
<p>å‡ ä¹ä¸å½±å“ã€‚æ— è®ºå“ªä¸ªæ¯”ä¾‹ï¼Œç”Ÿæˆæ—¶é—´éƒ½åœ¨1-10ç§’ï¼ˆå–å†³äºpromptå¤æ‚åº¦ï¼‰ï¼Œå·®å¼‚&lt;1ç§’ã€‚å€’æ˜¯æ€»åƒç´ æ•°ä¼šå½±å“ç½‘ç»œä¼ è¾“æ—¶é—´â€”â€”21:9å›¾ç‰‡æ–‡ä»¶æ›´å¤§ï¼Œä¸‹è½½ç¨æ…¢ã€‚</p>
<p><strong>Q8: å¯ä»¥åœ¨promptä¸­ç”¨è‡ªç„¶è¯­è¨€æè¿°æ¯”ä¾‹å—ï¼Ÿ</strong></p>
<p>å¯ä»¥ä½œä¸ºè¾…åŠ©ï¼Œä½†ä¸å¦‚å‚æ•°å¯é ã€‚ä¾‹å¦‚ï¼š</p>
<p>å»ºè®®ç”¨æ–¹æ³•2ï¼ˆå‚æ•°æ˜ç¡®æŒ‡å®šï¼‰ï¼Œpromptä¸“æ³¨æè¿°å†…å®¹è€Œä¸æ˜¯æ ¼å¼ã€‚</p>
<p><strong>Q9: ä¸åŒå®½é«˜æ¯”ç”Ÿæˆçš„å›¾ç‰‡è´¨é‡æœ‰å·®å¼‚å—ï¼Ÿ</strong></p>
<p>ç†è®ºä¸Šæ²¡æœ‰ã€‚æ¨¡å‹å¯¹æ‰€æœ‰æ¯”ä¾‹éƒ½ç»è¿‡è®­ç»ƒå’Œä¼˜åŒ–ã€‚ä½†ç”¨æˆ·åé¦ˆæ˜¾ç¤ºï¼Œ1:1å’Œ9:16ï¼ˆæœ€å¸¸ç”¨ï¼‰çš„æˆåŠŸç‡å’Œè´¨é‡ç•¥é«˜ï¼ˆçº¦92-95%ï¼‰ï¼Œè€Œ21:9ã€5:4ç­‰è¾ƒå°‘ç”¨çš„æ¯”ä¾‹å¶å°”ä¼šå‡ºç°æ„å›¾å¤±è¡¡ï¼ˆçº¦85-88%æˆåŠŸç‡ï¼‰ã€‚å¦‚æœç”Ÿæˆçš„21:9å›¾ç‰‡æ•ˆæœä¸ç†æƒ³ï¼Œé‡æ–°ç”Ÿæˆ1-2æ¬¡é€šå¸¸èƒ½è§£å†³ã€‚</p>
<p><strong>Q10: APIèšåˆå¹³å°ï¼ˆlaozhang.aiç­‰ï¼‰æ”¯æŒæ‰€æœ‰10ç§å®½é«˜æ¯”å—ï¼Ÿ</strong></p>
<p>å¤§å¤šæ•°èšåˆå¹³å°å®Œæ•´æ”¯æŒGoogleå®˜æ–¹çš„æ‰€æœ‰åŠŸèƒ½ï¼ŒåŒ…æ‹¬10ç§å®½é«˜æ¯”ã€‚å› ä¸ºèšåˆå¹³å°åªæ˜¯"ä¸­è½¬"APIè¯·æ±‚ï¼Œå‚æ•°ç›´æ¥ä¼ é€’ç»™Googleï¼ŒåŠŸèƒ½ä¸å®˜æ–¹ä¸€è‡´ã€‚ä½¿ç”¨å‰å»ºè®®æŸ¥çœ‹å¹³å°æ–‡æ¡£ç¡®è®¤ï¼Œæˆ–æµ‹è¯•ä¸€ä¸‹å„ä¸ªæ¯”ä¾‹æ˜¯å¦æ­£å¸¸å·¥ä½œã€‚</p>
<hr/>
<p>Gemini 2.5 Flash Image APIçš„å®½é«˜æ¯”è®¾ç½®åŠŸèƒ½ï¼Œå°†å›¾åƒç”Ÿæˆçš„çµæ´»æ€§æå‡äº†233%ï¼ˆä»3ç§åˆ°10ç§ï¼‰ã€‚å¯¹äºå†…å®¹åˆ›ä½œè€…å’Œå¼€å‘è€…ï¼Œè¿™æ„å‘³ç€å¯ä»¥ç”¨ä¸€ä¸ªAPIé€‚é…æ‰€æœ‰ä¸»æµå¹³å°â€”â€”Instagramçš„9:16/4:5/1:1ã€YouTubeçš„16:9ã€å°çº¢ä¹¦çš„3:4ã€ç”µå•†çš„1:1ï¼Œæ— éœ€åˆ‡æ¢å·¥å…·æˆ–é‡å¤ç”Ÿæˆã€‚</p>
<p>é€‰æ‹©å®½é«˜æ¯”æ—¶ï¼Œæ ¸å¿ƒæ˜¯ç†è§£"å†…å®¹åœ¨å“ªå±•ç¤ºã€ç”¨æˆ·æ€ä¹ˆçœ‹"ã€‚ç¤¾äº¤åª’ä½“ä¼˜å…ˆç«–å±ï¼ˆ9:16ã€4:5ï¼‰å› ä¸ºç”¨æˆ·åˆ·æ‰‹æœºï¼›è§†é¢‘å†…å®¹ä¼˜å…ˆæ¨ªå±ï¼ˆ16:9ã€21:9ï¼‰å› ä¸ºè§‚å½±ä¹ æƒ¯ï¼›ç”µå•†ä¼˜å…ˆ3:4æˆ–1:1å› ä¸ºå¹³å°è§„èŒƒã€‚æŒæ¡10ç§æ¯”ä¾‹çš„åº”ç”¨åœºæ™¯ï¼Œé…åˆPython/JavaScriptä»£ç å®ç°æ‰¹é‡ç”Ÿæˆï¼Œå¯ä»¥è®©AIå›¾åƒç”ŸæˆçœŸæ­£èå…¥ç”Ÿäº§æµç¨‹ï¼Œæå‡æ•ˆç‡çš„åŒæ—¶ä¿è¯è´¨é‡ã€‚</p>
<p>æŠ€æœ¯ç»†èŠ‚æ–¹é¢ï¼Œè®°ä½ä¸‰ä¸ªè¦ç‚¹ï¼šâ‘ aspect_ratioå‚æ•°å¿…é¡»ç”¨å®˜æ–¹çš„10ç§é¢„è®¾å€¼â‘¡æ— æ³•æŒ‡å®šç²¾ç¡®åƒç´ ï¼Œåªèƒ½æ§åˆ¶æ¯”ä¾‹â‘¢å›¾ç‰‡ç¼–è¾‘ä¹Ÿæ”¯æŒæ”¹å˜æ¯”ä¾‹ï¼ˆé€šè¿‡promptæŒ‡å¯¼æ‰©å±•æˆ–è£å‰ªï¼‰ã€‚é‡åˆ°é—®é¢˜æ—¶ï¼Œä¼˜å…ˆæ£€æŸ¥SDKç‰ˆæœ¬ã€æ¨¡å‹IDæ˜¯å¦æ­£ç¡®ï¼Œå†è€ƒè™‘ç”¨"å‚è€ƒå›¾æ³•"æˆ–"promptè¾…åŠ©"ç­‰å˜é€šæ–¹æ¡ˆã€‚</p>
<p>æœ€åå¼ºè°ƒï¼Œå®½é«˜æ¯”æ˜¯å·¥å…·ä¸æ˜¯ç›®çš„ã€‚å³ä½¿è®¾ç½®äº†å®Œç¾çš„9:16ç«–å±æ¯”ä¾‹ï¼Œå¦‚æœå†…å®¹è´¨é‡ä½ï¼ˆæ„å›¾å·®ã€ä¸»é¢˜ä¸æ¸…ã€ç»†èŠ‚ç²—ç³™ï¼‰ï¼Œåœ¨æŠ–éŸ³ä¸Šä¹Ÿä¸ä¼šæœ‰æµé‡ã€‚ä¼˜å…ˆæ‰“ç£¨å†…å®¹åˆ›æ„å’Œpromptè´¨é‡ï¼Œå®½é«˜æ¯”åªæ˜¯ç¡®ä¿å†…å®¹åœ¨ç›®æ ‡å¹³å°"å±•ç¤ºå®Œæ•´ã€ä½“éªŒæœ€ä½³"çš„æŠ€æœ¯ä¿éšœã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€è§£å¯†æºç ã€‘ RAGFlow åˆ‡åˆ†æœ€ä½³å®è·µ- paper ç¯‡]]></title>    <link>https://juejin.cn/post/7572408522437967907</link>    <guid>https://juejin.cn/post/7572408522437967907</guid>    <pubDate>2025-11-15T01:04:16.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572408522437967907" data-draft-id="7572390974460379136" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€è§£å¯†æºç ã€‘ RAGFlow åˆ‡åˆ†æœ€ä½³å®è·µ- paper ç¯‡"/> <meta itemprop="keywords" content="LLM,æ¶æ„,Agent"/> <meta itemprop="datePublished" content="2025-11-15T01:04:16.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¸¸å…ˆæ£®"/> <meta itemprop="url" content="https://juejin.cn/user/4388906148043879"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€è§£å¯†æºç ã€‘ RAGFlow åˆ‡åˆ†æœ€ä½³å®è·µ- paper ç¯‡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4388906148043879/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¸¸å…ˆæ£®
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-15T01:04:16.000Z" title="Sat Nov 15 2025 01:04:16 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    6
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€</h2>
<p>è®ºæ–‡ç±»æ–‡æ¡£ï¼ˆpaperï¼‰æ˜¯ RAG åº”ç”¨ä¸­æœ€å…·æŒ‘æˆ˜æ€§çš„è§£æç±»å‹ä¹‹ä¸€ã€‚</p>
<p>ä¸æ™®é€š pdf æˆ– ppt ä¸åŒçš„æ˜¯ï¼Œpaper é€šå¸¸åŒ…å«å¤æ‚çš„ç‰ˆé¢ç»“æ„ï¼šæ ‡é¢˜å±‚çº§ã€æ‘˜è¦ã€å…¬å¼ã€è¡¨æ ¼ã€å›¾ç‰‡ã€å‚è€ƒæ–‡çŒ®ç­‰ï¼Œä¸”è·¨é¡µã€åŒæ ã€è„šæ³¨ç­‰æƒ…å†µæä¸ºå¸¸è§ã€‚</p>
<p>åœ¨ RAGFlow çš„æºç ä¸­ï¼Œpaper åˆ‡åˆ†æ–¹æ¡ˆç»§æ‰¿è‡ª PdfParser çš„æ ¸å¿ƒé€»è¾‘ï¼Œå¹¶é’ˆå¯¹å­¦æœ¯è®ºæ–‡åœºæ™¯è¿›è¡Œäº†å¢å¼ºã€‚æœ¬æ–‡å°†å¸¦ä½ æ·±å…¥å‰–æå…¶æºç å®ç°ï¼Œäº†è§£ RAGFlow å¦‚ä½•å®ç°ä»åŸå§‹è®ºæ–‡ pdf åˆ°å¯ç”¨çŸ¥è¯†å—ï¼ˆchunkï¼‰çš„é«˜ç²¾åº¦è¯­ä¹‰åˆ‡åˆ†ã€‚</p>
<blockquote>
<p><em>Tipsï¼šæƒ³æ›´ç³»ç»Ÿåœ°ç†è§£åˆ‡åˆ†é€»è¾‘ï¼Œå¯å…ˆé˜…è¯»ã€Šnaive parser è¯­ä¹‰åˆ‡å—ï¼ˆPDF ç¯‡ï¼‰ã€‹ã€‚</em></p>
</blockquote>
<h2 data-id="heading-1">çœæµç‰ˆ</h2>
<p>RAGFlow åœ¨è§£æè®ºæ–‡ç±»æ–‡æ¡£æ—¶ï¼Œä¸å¤„ç†æ™®é€š pdf æ–‡æ¡£çš„æ€è·¯ä¸€è‡´ï¼Œé‡‡ç”¨ <strong>DeepDOC å¸ƒå±€è¯†åˆ« + å¤šå±‚æ–‡æœ¬è¯­ä¹‰åˆ‡åˆ†</strong> çš„ç»„åˆæ–¹æ¡ˆï¼Œå®ç°ä»ç‰ˆé¢è¯†åˆ« â†’ å…ƒä¿¡æ¯æŠ½å–ï¼ˆæ ‡é¢˜/ä½œè€…/æ‘˜è¦ï¼‰â†’ æ­£æ–‡å±‚çº§åŒ–åˆ‡åˆ† â†’ Chunk åˆ†è¯çš„å®Œæ•´æµç¨‹ã€‚</p>
<p><strong>è®¾è®¡äº®ç‚¹</strong></p>
<ul>
<li><strong>è¯­ä¹‰å±‚çº§åˆ‡åˆ†</strong>ï¼šè‡ªåŠ¨æ£€æµ‹æ ‡é¢˜ç¼–å·è§„åˆ™ï¼ˆå¦‚â€œç¬¬ X èŠ‚â€ã€â€œ1.2.3â€ï¼‰å¹¶æŒ‰å±‚çº§ç”Ÿæˆé€»è¾‘å—ï¼›</li>
<li><strong>ç»“æ„åŒ–æŠ½å–</strong>ï¼šç²¾å‡†æå–æ ‡é¢˜ã€ä½œè€…ã€æ‘˜è¦ã€ç« èŠ‚ä¸è¡¨æ ¼ä¿¡æ¯ï¼Œå½¢æˆæ ‡å‡†ç»“æ„åŒ–æ•°æ®ï¼›</li>
<li><strong>è‡ªé€‚åº”åˆ‡å—</strong>ï¼šåŸºäºç« èŠ‚å±‚çº§åŠ¨æ€åˆå¹¶æ–‡æœ¬ï¼Œå…¼é¡¾è¯­ä¹‰å®Œæ•´æ€§ä¸ä¸Šä¸‹æ–‡è¿ç»­æ€§ã€‚</li>
</ul>
<h2 data-id="heading-2">æ‰‹æ’•ç‰ˆ</h2>
<h3 data-id="heading-3">1. å¸ƒå±€è¯†åˆ«å™¨</h3>
<p>ä¸ naive parser ä¸‹ pdf æ–‡æ¡£çš„å¤„ç†ä¸€æ ·ï¼Œåˆ†ä¸º DeepDOC å’Œ Plain Text ä¸¤ç§å¸ƒå±€è¯†åˆ«å™¨ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">if</span> parser_config.get(<span class="hljs-string">"layout_recognize"</span>, <span class="hljs-string">"DeepDOC"</span>) == <span class="hljs-string">"Plain Text"</span>:
        pdf_parser = PlainParser()
    <span class="hljs-keyword">else</span>:
        pdf_parser = Pdf()
</code></pre>
<p>Plain Text å¸ƒå±€è¯†åˆ«å™¨å®ç°è¯·å‚è€ƒã€Šnaive parser è¯­ä¹‰åˆ‡å—ï¼ˆpdf ç¯‡ï¼‰ã€‹ ä¸‹ã€Plain Text å¸ƒå±€è¯†åˆ«å™¨ã€‘æ¨¡å—ã€‚</p>
<h3 data-id="heading-4">2. DeepDOC å¸ƒå±€è¯†åˆ«å™¨</h3>
<p>ä¸ã€Šnaive parser è¯­ä¹‰åˆ‡å—ï¼ˆpdf ç¯‡ï¼‰ã€‹ä¸­ç›¸åŒï¼ŒPdf ç»§æ‰¿åŸºç±» PdfParserã€‚</p>
<pre><code class="hljs language-python" lang="python">pdf_parser = Pdf()

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Pdf</span>(<span class="hljs-title class_ inherited__">PdfParser</span>)
</code></pre>
<p>PdfParser åŸºç±»çš„æ ¸å¿ƒåŠŸèƒ½åœ¨ã€Šnaive parser è¯­ä¹‰åˆ‡å—ï¼ˆPDF ç¯‡ï¼‰ã€‹ä¸­å·²æœ‰è¯¦ç»†è¯´æ˜ï¼Œè¿™é‡Œä½œç®€è¦æ¦‚è¿°ï¼š</p>
<ul>
<li>
<p><strong>__images__</strong>ï¼šè´Ÿè´£å°† PDF é¡µé¢æ•°å­—åŒ–ï¼Œç”Ÿæˆå¯ç»“æ„åŒ–çš„é¡µé¢å›¾åƒæ•°æ®ï¼Œä¸ºåç»­çš„å¸ƒå±€åˆ†æä¸è¡¨æ ¼æå–å¥ å®šåŸºç¡€ã€‚</p>
</li>
<li>
<p><strong>_layouts_rec</strong>ï¼šåŸºäºé¡µé¢å›¾åƒä¸ OCR æ–‡æœ¬æ¡†ä¿¡æ¯ï¼Œæ‰§è¡Œæ¯é¡µçš„ç‰ˆé¢åˆ†æä¸åæ ‡é‡å»ºã€‚</p>
</li>
<li>
<p><strong>_table_transformer_job</strong>ï¼šé’ˆå¯¹è¯†åˆ«å‡ºçš„è¡¨æ ¼åŒºåŸŸï¼Œæå–å’Œè§£æè¡¨æ ¼å†…å®¹ï¼Œå®ç°è¡¨æ ¼ç»“æ„åŒ–å¤„ç†ã€‚</p>
</li>
<li>
<p><strong>_text_merge</strong>ï¼šé€šè¿‡è§„åˆ™åˆå¹¶ç›¸é‚»æ–‡æœ¬å—ï¼Œè§£å†³ OCR è¾“å‡ºä¸­æ–‡æœ¬ç¢ç‰‡åŒ–çš„é—®é¢˜ã€‚</p>
</li>
<li>
<p><strong>_concat_downward</strong>ï¼šæŒ‰ç…§é˜…è¯»é¡ºåºï¼ˆY åæ ‡ä»ä¸Šåˆ°ä¸‹ï¼ŒX åæ ‡ä»å·¦åˆ°å³ï¼‰å¯¹æ–‡æœ¬æ¡†è¿›è¡Œæ’åºï¼Œæ¢å¤è‡ªç„¶çš„æ–‡æœ¬æµã€‚</p>
</li>
<li>
<p><strong>_filter_forpages</strong>ï¼šæ£€æµ‹å¹¶è¿‡æ»¤éæ­£æ–‡é¡µé¢ï¼Œå¦‚ç›®å½•é¡µã€è‡´è°¢é¡µç­‰ï¼Œä»¥æå‡åç»­æ–‡æœ¬åˆ†æè´¨é‡ã€‚</p>
</li>
<li>
<p><strong>_extract_table_figure</strong>ï¼šè´Ÿè´£è¡¨æ ¼ä¸å›¾åƒçš„æå–ä¸è¾“å‡ºï¼Œæ”¯æŒè·¨é¡µè¡¨æ ¼åˆå¹¶åŠå›¾åƒæˆªå–ã€‚</p>
</li>
<li>
<p><strong>__filterout_scraps</strong>ï¼šå¯¹ç¢ç‰‡åŒ–æ–‡æœ¬è¿›è¡ŒäºŒæ¬¡æ¸…ç†ä¸ç»„è£…ï¼Œè¿›ä¸€æ­¥ä¼˜åŒ– OCR æ–‡æœ¬çš„å®Œæ•´æ€§ã€‚</p>
</li>
</ul>
<h4 data-id="heading-5">2.1 Pdf ç±»</h4>
<p>Pdf ç±»ä½œä¸ºå…¥å£ç‚¹ï¼Œè°ƒç”¨ PdfParser ä¸­æä¾›çš„åŠŸèƒ½å®ç°æ•´ä¸ªå¤æ‚çš„æ–‡æ¡£å¤„ç†æµç¨‹ï¼Œå¹¶è®°å½•äº†å„é˜¶æ®µè€—æ—¶ï¼Œè§£æè¿›åº¦ç­‰ä¿¡æ¯ï¼Œè¿™ç‚¹ä¸ naive parser ä¸‹çš„ Pdf ç±»èŒèƒ½ä¸€è‡´ï¼Œ<strong>ä½†å…·ä½“å®ç°å†…å®¹å­˜åœ¨å·®å¼‚</strong>ã€‚</p>
<h5 data-id="heading-6">2.1.1 _line_tag</h5>
<p>è¿™é‡Œéœ€è¦å…ˆæåˆ° PdfParser ä¸­å¦å¤–ä¸€ä¸ªåŠŸèƒ½å‡½æ•° _line_tagï¼Œå®ƒä¸»è¦ä¸ºæ–‡æœ¬æ¡†ï¼ˆbxï¼‰ç”Ÿæˆä¸€ä¸ªä½ç½®ä¿¡æ¯æ ‡ç­¾å­—ç¬¦ä¸²ï¼Œç”¨äºæ ‡è¯†è¯¥æ–‡æœ¬æ¡†åœ¨æ‰€åœ¨ pdf é¡µä¸­çš„å…·ä½“ä½ç½®ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">_line_tag</span>(<span class="hljs-params">self, bx, ZM</span>):
    pn = [bx[<span class="hljs-string">"page_number"</span>]]
    top = bx[<span class="hljs-string">"top"</span>] - self.page_cum_height[pn[<span class="hljs-number">0</span>] - <span class="hljs-number">1</span>]
    bott = bx[<span class="hljs-string">"bottom"</span>] - self.page_cum_height[pn[<span class="hljs-number">0</span>] - <span class="hljs-number">1</span>]
    page_images_cnt = <span class="hljs-built_in">len</span>(self.page_images)
    <span class="hljs-keyword">if</span> pn[-<span class="hljs-number">1</span>] - <span class="hljs-number">1</span> &gt;= page_images_cnt:
        <span class="hljs-keyword">return</span> <span class="hljs-string">""</span>
    <span class="hljs-comment"># æ£€æµ‹æ–‡æœ¬æ¡†æ˜¯å¦è·¨é¡µ</span>
    <span class="hljs-keyword">while</span> bott * ZM &gt; self.page_images[pn[-<span class="hljs-number">1</span>] - <span class="hljs-number">1</span>].size[<span class="hljs-number">1</span>]:
        bott -= self.page_images[pn[-<span class="hljs-number">1</span>] - <span class="hljs-number">1</span>].size[<span class="hljs-number">1</span>] / ZM
        pn.append(pn[-<span class="hljs-number">1</span>] + <span class="hljs-number">1</span>)
        <span class="hljs-keyword">if</span> pn[-<span class="hljs-number">1</span>] - <span class="hljs-number">1</span> &gt;= page_images_cnt:
            <span class="hljs-keyword">return</span> <span class="hljs-string">""</span>

    <span class="hljs-keyword">return</span> <span class="hljs-string">"@@{}\t{:.1f}\t{:.1f}\t{:.1f}\t{:.1f}##"</span>.<span class="hljs-built_in">format</span>(<span class="hljs-string">"-"</span>.join([<span class="hljs-built_in">str</span>(p) <span class="hljs-keyword">for</span> p <span class="hljs-keyword">in</span> pn]), bx[<span class="hljs-string">"x0"</span>], bx[<span class="hljs-string">"x1"</span>], top, bott)
</code></pre>
<p>å¯¹äºå¤æ‚åœºæ™¯è·¨é¡µæ–‡æœ¬æ¡†ä¸¾ä¾‹ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># pdf åŸºç¡€ä¿¡æ¯</span>
self.page_images = [Page1, Page2, Page3]  <span class="hljs-comment"># å…±ä¸‰é¡µ</span>
self.page_cum_height = [<span class="hljs-number">0</span>, <span class="hljs-number">1200</span>, <span class="hljs-number">2400</span>]    <span class="hljs-comment"># æ¯é¡µç´¯è®¡é«˜åº¦ï¼ˆä»0å¼€å§‹ï¼‰</span>

<span class="hljs-comment"># è¾“å…¥ bx æ–‡æœ¬æ¡†ä½ç½®ä¿¡æ¯ï¼Œbx è·¨é¡µ</span>
bx = {
    <span class="hljs-string">"page_number"</span>: <span class="hljs-number">2</span>,
    <span class="hljs-string">"x0"</span>: <span class="hljs-number">100.0</span>,
    <span class="hljs-string">"x1"</span>: <span class="hljs-number">300.0</span>,
    <span class="hljs-string">"top"</span>: <span class="hljs-number">2300.0</span>, <span class="hljs-comment"># æ–‡æœ¬æ¡†é¡¶éƒ¨é’ˆå¯¹æ•´ä¸ª pdf å‚ç›´åæ ‡</span>
    <span class="hljs-string">"bottom"</span>: <span class="hljs-number">2550.0</span>  <span class="hljs-comment"># æ–‡æœ¬æ¡†åº•éƒ¨é’ˆå¯¹æ•´ä¸ª pdf å‚ç›´åæ ‡</span>
}

<span class="hljs-comment"># è¾“å‡º</span>
<span class="hljs-meta">@@<span class="hljs-number">2</span>-<span class="hljs-number">3</span>	<span class="hljs-number">100.0</span>	<span class="hljs-number">300.0</span>	<span class="hljs-number">1100.0</span>	<span class="hljs-number">150.0</span></span><span class="hljs-comment">##</span>
<span class="hljs-comment"># 2-3 æ–‡æœ¬æ¡†æ‰€åœ¨é¡µç </span>
<span class="hljs-comment"># 100.0	300.0 æ–‡æœ¬æ¡†å·¦å³æ°´å¹³åæ ‡</span>
<span class="hljs-comment"># 1100.0 æ–‡æœ¬æ¡†é¡¶éƒ¨ç›¸è¾ƒäº page2 é¡¶éƒ¨å‚ç›´åæ ‡</span>
<span class="hljs-comment"># 150 æ–‡æœ¬æ¡†åº•éƒ¨ç›¸è¾ƒäº page3 é¡¶éƒ¨å‚ç›´åæ ‡</span>
</code></pre>
<h5 data-id="heading-7">2.1.2 Pdf ä¸»æµç¨‹</h5>
<p>1ï¼‰è°ƒç”¨ PdfParser ä¸­æä¾›çš„åŠŸèƒ½è¿›è¡Œå†…å®¹æå–å’Œæ’åºã€‚</p>
<pre><code class="hljs language-python" lang="python"> <span class="hljs-comment"># é™æ€çš„ pdf é¡µé¢è½¬æ¢ä¸ºå¯ç»“æ„åŒ–æ•°æ® </span>
 self.__images__(
    filename <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> binary <span class="hljs-keyword">else</span> binary,
    zoomin,
    from_page,
    to_page,
    callback
)
<span class="hljs-comment"># å¯¹æ–‡æ¡£æ¯é¡µçš„å¸ƒå±€åˆ†æï¼Œå’Œåæ ‡é‡å»º</span>
self._layouts_rec(zoomin)
<span class="hljs-comment"># è¡¨æ ¼æ•°æ®å†…å®¹æå–</span>
self._table_transformer_job(zoomin)
<span class="hljs-comment"># åŸºäºè§„åˆ™åˆå¹¶æ–‡æœ¬</span>
self._text_merge()
<span class="hljs-comment"># æå–è¡¨æ ¼ï¼Œå›¾ç‰‡å†…å®¹è¾“å‡º</span>
tbls = self._extract_table_figure(<span class="hljs-literal">True</span>, zoomin, <span class="hljs-literal">True</span>, <span class="hljs-literal">True</span>)
column_width = np.median([b[<span class="hljs-string">"x1"</span>] - b[<span class="hljs-string">"x0"</span>] <span class="hljs-keyword">for</span> b <span class="hljs-keyword">in</span> self.boxes])
<span class="hljs-comment"># ç®€å•æ–‡æœ¬æ’åº</span>
self._concat_downward()
<span class="hljs-comment"># æ£€æµ‹å¹¶è¿‡æ»¤éæ­£æ–‡é¡µé¢</span>
self._filter_forpages()
</code></pre>
<p>2ï¼‰æ–‡æœ¬å‰ç½®å¤„ç†ï¼Œæ°´å¹³æ’åºå’Œå¤„ç†æ–‡æœ¬ç©ºæ ¼ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">if</span> column_width &lt; self.page_images[<span class="hljs-number">0</span>].size[<span class="hljs-number">0</span>] / zoomin / <span class="hljs-number">2</span>:
    <span class="hljs-comment"># æ°´å¹³æ’åº</span>
    self.boxes = self.sort_X_by_page(self.boxes, column_width / <span class="hljs-number">2</span>)
<span class="hljs-keyword">for</span> b <span class="hljs-keyword">in</span> self.boxes:
    b[<span class="hljs-string">"text"</span>] = re.sub(<span class="hljs-string">r"([\t ã€€]|\u3000){2,}"</span>, <span class="hljs-string">" "</span>, b[<span class="hljs-string">"text"</span>].strip())
</code></pre>
<p>3ï¼‰å¦‚æœå¯ç¤º page ä¸æ˜¯é¦–é¡µï¼Œé»˜è®¤å‰é¢çš„æ ‡é¢˜ã€ä½œè€…ã€æ‘˜è¦ç­‰å·²ç»è¢«æå–è¿‡ï¼Œç›´æ¥è¿”å›æ­£æ–‡ section å†…å®¹ï¼š (æ–‡æœ¬å†…å®¹ + ä½ç½®æ ‡ç­¾, å¸ƒå±€ç±»å‹)ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">if</span> from_page &gt; <span class="hljs-number">0</span>:
    <span class="hljs-keyword">return</span> {
        <span class="hljs-string">"title"</span>: <span class="hljs-string">""</span>,
        <span class="hljs-string">"authors"</span>: <span class="hljs-string">""</span>,
        <span class="hljs-string">"abstract"</span>: <span class="hljs-string">""</span>,
        <span class="hljs-string">"sections"</span>: [(b[<span class="hljs-string">"text"</span>] + self._line_tag(b, zoomin), b.get(<span class="hljs-string">"layoutno"</span>, <span class="hljs-string">""</span>)) <span class="hljs-keyword">for</span> b <span class="hljs-keyword">in</span> self.boxes <span class="hljs-keyword">if</span>
                        re.<span class="hljs-keyword">match</span>(<span class="hljs-string">r"(text|title)"</span>, b.get(<span class="hljs-string">"layoutno"</span>, <span class="hljs-string">"text"</span>))],
        <span class="hljs-string">"tables"</span>: tbls
    }
</code></pre>
<p>4ï¼‰ä»é¦–é¡µå¼€å§‹ï¼Œæå–æ ‡é¢˜ï¼Œä½œè€…ä¿¡æ¯ã€‚è¿™é‡Œé»˜è®¤è¿™äº›ä¿¡æ¯ä½äºæ–‡æ¡£å¼€å¤´ï¼Œæ‰€ä»¥åªåœ¨å‰ 32 ä¸ªæ–‡æœ¬æ¡†ä¸­è¿›è¡Œæå–ã€‚</p>
<pre><code class="hljs language-python" lang="python">title = <span class="hljs-string">""</span>
authors = []
i = <span class="hljs-number">0</span>
<span class="hljs-keyword">while</span> i &lt; <span class="hljs-built_in">min</span>(<span class="hljs-number">32</span>, <span class="hljs-built_in">len</span>(self.boxes)-<span class="hljs-number">1</span>):
    b = self.boxes[i]
    i += <span class="hljs-number">1</span>
    <span class="hljs-keyword">if</span> b.get(<span class="hljs-string">"layoutno"</span>, <span class="hljs-string">""</span>).find(<span class="hljs-string">"title"</span>) &gt;= <span class="hljs-number">0</span>:
        title = b[<span class="hljs-string">"text"</span>]
        <span class="hljs-keyword">if</span> _begin(title):
            title = <span class="hljs-string">""</span>
            <span class="hljs-keyword">break</span>
        <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">3</span>):
            <span class="hljs-keyword">if</span> _begin(self.boxes[i + j][<span class="hljs-string">"text"</span>]):
                <span class="hljs-keyword">break</span>
            authors.append(self.boxes[i + j][<span class="hljs-string">"text"</span>])
            <span class="hljs-keyword">break</span>
        <span class="hljs-keyword">break</span>
</code></pre>
<p>5ï¼‰æå–æ‘˜è¦ï¼Œæ–¹æ¡ˆä¸æå–æ ‡é¢˜åŸºæœ¬ç›¸åŒã€‚éå†å‰ 32 ä¸ªæ–‡æœ¬æ¡†ï¼ŒæŸ¥æ‰¾â€œAbstractâ€æˆ–â€œæ‘˜è¦â€æ®µè½ï¼Œè‹¥è¯¥æ®µè½è¶³å¤Ÿé•¿ï¼ˆå­—æ•°æˆ–å•è¯æ•°è¶…è¿‡é˜ˆå€¼ï¼‰ï¼Œå°±è®¤ä¸ºæ˜¯å®Œæ•´æ‘˜è¦ã€‚</p>
<pre><code class="hljs language-python" lang="python">abstr = <span class="hljs-string">""</span>
i = <span class="hljs-number">0</span>
<span class="hljs-keyword">while</span> i + <span class="hljs-number">1</span> &lt; <span class="hljs-built_in">min</span>(<span class="hljs-number">32</span>, <span class="hljs-built_in">len</span>(self.boxes)):
    b = self.boxes[i]
    i += <span class="hljs-number">1</span>
    txt = b[<span class="hljs-string">"text"</span>].lower().strip()
    <span class="hljs-keyword">if</span> re.<span class="hljs-keyword">match</span>(<span class="hljs-string">"(abstract|æ‘˜è¦)"</span>, txt):
        <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(txt.split()) &gt; <span class="hljs-number">32</span> <span class="hljs-keyword">or</span> <span class="hljs-built_in">len</span>(txt) &gt; <span class="hljs-number">64</span>:
            abstr = txt + self._line_tag(b, zoomin)
            <span class="hljs-keyword">break</span>
        txt = self.boxes[i][<span class="hljs-string">"text"</span>].lower().strip()
        <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(txt.split()) &gt; <span class="hljs-number">32</span> <span class="hljs-keyword">or</span> <span class="hljs-built_in">len</span>(txt) &gt; <span class="hljs-number">64</span>:
            abstr = txt + self._line_tag(self.boxes[i], zoomin)
        i += <span class="hljs-number">1</span>
        <span class="hljs-keyword">break</span>
</code></pre>
<p>6ï¼‰è¿”å›æœ€ç»ˆç»“æ„åŒ–ç»“æœ</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">return</span> {
    <span class="hljs-string">"title"</span>: title,
    <span class="hljs-string">"authors"</span>: <span class="hljs-string">" "</span>.join(authors),
    <span class="hljs-string">"abstract"</span>: abstr,
    <span class="hljs-string">"sections"</span>: [(b[<span class="hljs-string">"text"</span>] + self._line_tag(b, zoomin), b.get(<span class="hljs-string">"layoutno"</span>, <span class="hljs-string">""</span>)) <span class="hljs-keyword">for</span> b <span class="hljs-keyword">in</span> self.boxes[i:] <span class="hljs-keyword">if</span>
                    re.<span class="hljs-keyword">match</span>(<span class="hljs-string">r"(text|title)"</span>, b.get(<span class="hljs-string">"layoutno"</span>, <span class="hljs-string">"text"</span>))],
    <span class="hljs-string">"tables"</span>: tbls
}
<span class="hljs-comment"># ä»¥ä¸‹æ˜¯ç»“æœç¤ºä¾‹</span>
{
  <span class="hljs-string">"title"</span>: <span class="hljs-string">"A Novel PDF Parsing Framework"</span>,
  <span class="hljs-string">"authors"</span>: <span class="hljs-string">"Alice Bob"</span>,
  <span class="hljs-string">"abstract"</span>: <span class="hljs-string">"This paper proposes ...@@1	50.0	520.0	300.0	900.0##"</span>,
  <span class="hljs-string">"sections"</span>: [
      (<span class="hljs-string">"Introduction@@2	100.0	400.0	80.0	220.0##"</span>, <span class="hljs-string">"title"</span>),
      (<span class="hljs-string">"In this paper, we propose ...@@2-3	120.0	480.0	200.0	150.0##"</span>, <span class="hljs-string">"text"</span>),
      ...
  ],
  <span class="hljs-string">"tables"</span>: [...]
}
</code></pre>
<h3 data-id="heading-8">3. æ•°æ®åå¤„ç†</h3>
<p>ä» Pdf ç±»å®ä¾‹åŒ–æ–¹æ³•è·å–åˆ°ç»“æ„åŒ–æ•°æ®åï¼Œè¿›è¡Œä¸€ç³»åˆ—çš„æ•°æ®åå¤„ç†ï¼Œæœ€ç»ˆç”Ÿæˆ chunk æ•°æ®ã€‚</p>
<p>1ï¼‰æ ‡é¢˜ï¼Œä½œè€…ï¼Œè¡¨æ ¼åˆ†è¯ã€‚åˆ†è¯å™¨å®ç°å¯å‚è€ƒã€Šåˆ†è¯å™¨åŸç†ã€‹ã€‚</p>
<pre><code class="hljs language-python" lang="python">doc = {<span class="hljs-string">"docnm_kwd"</span>: filename, <span class="hljs-string">"authors_tks"</span>: rag_tokenizer.tokenize(paper[<span class="hljs-string">"authors"</span>]),
        <span class="hljs-string">"title_tks"</span>: rag_tokenizer.tokenize(paper[<span class="hljs-string">"title"</span>] <span class="hljs-keyword">if</span> paper[<span class="hljs-string">"title"</span>] <span class="hljs-keyword">else</span> filename)}
doc[<span class="hljs-string">"title_sm_tks"</span>] = rag_tokenizer.fine_grained_tokenize(doc[<span class="hljs-string">"title_tks"</span>])
doc[<span class="hljs-string">"authors_sm_tks"</span>] = rag_tokenizer.fine_grained_tokenize(doc[<span class="hljs-string">"authors_tks"</span>])

res = tokenize_table(paper[<span class="hljs-string">"tables"</span>], doc, eng)
</code></pre>
<p>2ï¼‰æ‘˜è¦å†…å®¹å¤„ç†ã€‚å°†å†…å®¹ç±»å‹æ ‡è®°ä¸º â€œabstractâ€ ç­‰ä¼˜åŒ–å¬å›ï¼ŒåŒæ—¶å¤„ç†æ‘˜è¦å†…å®¹ä¸­çš„å›¾ç‰‡ï¼Œä½ç½®ï¼Œå’Œå¯¹å†…å®¹ä¿¡æ¯è¿›è¡Œåˆ†è¯ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">if</span> paper[<span class="hljs-string">"abstract"</span>]:
    d = copy.deepcopy(doc)
    txt = pdf_parser.remove_tag(paper[<span class="hljs-string">"abstract"</span>])
    d[<span class="hljs-string">"important_kwd"</span>] = [<span class="hljs-string">"abstract"</span>, <span class="hljs-string">"æ€»ç»“"</span>, <span class="hljs-string">"æ¦‚æ‹¬"</span>, <span class="hljs-string">"summary"</span>, <span class="hljs-string">"summarize"</span>]
    d[<span class="hljs-string">"important_tks"</span>] = <span class="hljs-string">" "</span>.join(d[<span class="hljs-string">"important_kwd"</span>])
    d[<span class="hljs-string">"image"</span>], poss = pdf_parser.crop(
        paper[<span class="hljs-string">"abstract"</span>], need_position=<span class="hljs-literal">True</span>)
    add_positions(d, poss)
    tokenize(d, txt, eng)
    res.append(d)
</code></pre>
<p>3ï¼‰æ­£æ–‡å±‚çº§è¯†åˆ«ã€‚å…ˆæ£€æµ‹æ–‡æ¡£æ ‡é¢˜ä½¿ç”¨çš„ç¼–å·æ ·å¼ç±»åˆ«ï¼Œåç»“åˆç¼–å·æ ·å¼ç¡®å®šæ ‡é¢˜çš„å±‚çº§æ·±åº¦ã€‚</p>
<pre><code class="hljs language-python" lang="python">sorted_sections = paper[<span class="hljs-string">"sections"</span>]
<span class="hljs-comment"># set pivot using the most frequent type of title,</span>
<span class="hljs-comment"># then merge between 2 pivot</span>
bull = bullets_category([txt <span class="hljs-keyword">for</span> txt, _ <span class="hljs-keyword">in</span> sorted_sections])
most_level, levels = title_frequency(bull, sorted_sections)
</code></pre>
<p><code>bullets_category</code> ä¸»è¦æ˜¯æ£€æµ‹æ–‡æ¡£æ ‡é¢˜ä½¿ç”¨çš„ç¼–å·æ ·å¼ç±»åˆ«ï¼Œç¼–å·æ ·å¼ç±»åˆ«å¯èƒ½å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-python" lang="python">[[
    <span class="hljs-string">r"ç¬¬[é›¶ä¸€äºŒä¸‰å››äº”å…­ä¸ƒå…«ä¹åç™¾0-9]+(åˆ†?ç¼–|éƒ¨åˆ†)"</span>,
    <span class="hljs-string">r"ç¬¬[é›¶ä¸€äºŒä¸‰å››äº”å…­ä¸ƒå…«ä¹åç™¾0-9]+ç« "</span>,
    <span class="hljs-string">r"ç¬¬[é›¶ä¸€äºŒä¸‰å››äº”å…­ä¸ƒå…«ä¹åç™¾0-9]+èŠ‚"</span>,
    <span class="hljs-string">r"ç¬¬[é›¶ä¸€äºŒä¸‰å››äº”å…­ä¸ƒå…«ä¹åç™¾0-9]+æ¡"</span>,
    <span class="hljs-string">r"[\(ï¼ˆ][é›¶ä¸€äºŒä¸‰å››äº”å…­ä¸ƒå…«ä¹åç™¾]+[\)ï¼‰]"</span>,
], [
    <span class="hljs-string">r"ç¬¬[0-9]+ç« "</span>,
    <span class="hljs-string">r"ç¬¬[0-9]+èŠ‚"</span>,
    <span class="hljs-string">r"[0-9]{,2}[\. ã€]"</span>,
    <span class="hljs-string">r"[0-9]{,2}\.[0-9]{,2}[^a-zA-Z/%~-]"</span>,
    <span class="hljs-string">r"[0-9]{,2}\.[0-9]{,2}\.[0-9]{,2}"</span>,
    <span class="hljs-string">r"[0-9]{,2}\.[0-9]{,2}\.[0-9]{,2}\.[0-9]{,2}"</span>,
], [
    <span class="hljs-string">r"ç¬¬[é›¶ä¸€äºŒä¸‰å››äº”å…­ä¸ƒå…«ä¹åç™¾0-9]+ç« "</span>,
    <span class="hljs-string">r"ç¬¬[é›¶ä¸€äºŒä¸‰å››äº”å…­ä¸ƒå…«ä¹åç™¾0-9]+èŠ‚"</span>,
    <span class="hljs-string">r"[é›¶ä¸€äºŒä¸‰å››äº”å…­ä¸ƒå…«ä¹åç™¾]+[ ã€]"</span>,
    <span class="hljs-string">r"[\(ï¼ˆ][é›¶ä¸€äºŒä¸‰å››äº”å…­ä¸ƒå…«ä¹åç™¾]+[\)ï¼‰]"</span>,
    <span class="hljs-string">r"[\(ï¼ˆ][0-9]{,2}[\)ï¼‰]"</span>,
], [
    <span class="hljs-string">r"PART (ONE|TWO|THREE|FOUR|FIVE|SIX|SEVEN|EIGHT|NINE|TEN)"</span>,
    <span class="hljs-string">r"Chapter (I+V?|VI*|XI|IX|X)"</span>,
    <span class="hljs-string">r"Section [0-9]+"</span>,
    <span class="hljs-string">r"Article [0-9]+"</span>
], [
    <span class="hljs-string">r"^#[^#]"</span>,
    <span class="hljs-string">r"^##[^#]"</span>,
    <span class="hljs-string">r"^###.*"</span>,
    <span class="hljs-string">r"^####.*"</span>,
    <span class="hljs-string">r"^#####.*"</span>,
    <span class="hljs-string">r"^######.*"</span>,
]
]
</code></pre>
<p>æ£€æµ‹å‡ºç¼–å·æ ·å¼åï¼Œé€šè¿‡ <code>title_frequency</code> ç¡®å®šæ•´ä¸ªæ–‡æ¡£æœ€å¸¸å‡ºç°çš„ç« èŠ‚æ ‡é¢˜å±‚çº§ <code>most_level</code>ï¼Œä½œä¸ºåˆ‡åˆ†åŸºå‡†ï¼›åŒæ—¶ä¹Ÿè·å–æ•´ä¸ªæ–‡æ¡£æ‰€æœ‰æ ‡é¢˜ç­‰çº§åˆ—è¡¨ <code>levels</code>ã€‚</p>
<p>4ï¼‰æŒ‰ç…§ <code>most_level</code> åˆ‡åˆ†åŸºå‡†å¯¹å†…å®¹è¿›è¡Œåˆ‡åˆ†ï¼Œ<code>&lt;= most_level</code> çš„å†…å®¹ä¼šè¿›è¡Œç»Ÿä¸€æ ‡è®°å¹¶<strong>ä¸åŒçº§å†…å®¹å’Œä¸Šä¸€çº§å†…å®¹</strong>è¿›è¡Œåˆå¹¶ä½œä¸ºä¸€ä¸ª chunkã€‚</p>
<pre><code class="hljs language-python" lang="python">sec_ids = []
sid = <span class="hljs-number">0</span>
<span class="hljs-keyword">for</span> i, lvl <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(levels):
    <span class="hljs-keyword">if</span> lvl &lt;= most_level <span class="hljs-keyword">and</span> i &gt; <span class="hljs-number">0</span> <span class="hljs-keyword">and</span> lvl != levels[i - <span class="hljs-number">1</span>]:
        sid += <span class="hljs-number">1</span>
    sec_ids.append(sid)
    logging.debug(<span class="hljs-string">"{} {} {} {}"</span>.<span class="hljs-built_in">format</span>(lvl, sorted_sections[i][<span class="hljs-number">0</span>], most_level, sid))

chunks = []
last_sid = -<span class="hljs-number">2</span>
<span class="hljs-keyword">for</span> (txt, _), sec_id <span class="hljs-keyword">in</span> <span class="hljs-built_in">zip</span>(sorted_sections, sec_ids):
    <span class="hljs-keyword">if</span> sec_id == last_sid:
        <span class="hljs-keyword">if</span> chunks:
            chunks[-<span class="hljs-number">1</span>] += <span class="hljs-string">"\n"</span> + txt
            <span class="hljs-keyword">continue</span>
    chunks.append(txt)
    last_sid = sec_id
</code></pre>
<p>5ï¼‰ä½¿ç”¨åˆ†è¯å™¨å¯¹ chunk è¿›è¡Œåˆ†è¯è¾“å‡ºæœ€ç»ˆç»“æœ</p>
<pre><code class="hljs language-python" lang="python">res.extend(tokenize_chunks(chunks, doc, eng, pdf_parser))
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è§£å†³ uniapp H5 ä¸åŸç”Ÿåº”ç”¨é€šä¿¡çš„å‘ï¼šä¸€ä¸ªç»è¿‡å®æˆ˜éªŒè¯çš„è§£å†³æ–¹æ¡ˆ]]></title>    <link>https://juejin.cn/post/7572453554330714112</link>    <guid>https://juejin.cn/post/7572453554330714112</guid>    <pubDate>2025-11-15T02:56:40.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572453554330714112" data-draft-id="7572126996178010147" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è§£å†³ uniapp H5 ä¸åŸç”Ÿåº”ç”¨é€šä¿¡çš„å‘ï¼šä¸€ä¸ªç»è¿‡å®æˆ˜éªŒè¯çš„è§£å†³æ–¹æ¡ˆ"/> <meta itemprop="keywords" content="å‰ç«¯,uni-app"/> <meta itemprop="datePublished" content="2025-11-15T02:56:40.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°èƒ–å­¦å‰ç«¯"/> <meta itemprop="url" content="https://juejin.cn/user/3843548379878231"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è§£å†³ uniapp H5 ä¸åŸç”Ÿåº”ç”¨é€šä¿¡çš„å‘ï¼šä¸€ä¸ªç»è¿‡å®æˆ˜éªŒè¯çš„è§£å†³æ–¹æ¡ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3843548379878231/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°èƒ–å­¦å‰ç«¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-15T02:56:40.000Z" title="Sat Nov 15 2025 02:56:40 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">è§£å†³ uniapp H5 ä¸åŸç”Ÿåº”ç”¨é€šä¿¡çš„å‘ï¼šä¸€ä¸ªç»è¿‡å®æˆ˜éªŒè¯çš„è§£å†³æ–¹æ¡ˆ</h2>
<h3 data-id="heading-1">ğŸ“– å‰è¨€</h3>
<p>åœ¨å¼€å‘ uniapp é¡¹ç›®æ—¶ï¼Œä½ æ˜¯å¦é‡åˆ°è¿‡è¿™æ ·çš„é—®é¢˜ï¼š<strong>å°† uniapp æ‰“åŒ…æˆ H5 åï¼Œéœ€è¦å‘åŸç”Ÿåº”ç”¨å‘é€æ¶ˆæ¯ï¼Œä½†å‘ç°å¸¸ç”¨çš„ <code>uni.postMessage</code> æˆ– <code>window.parent.postMessage</code> æ–¹æ³•éƒ½ä¸èµ·ä½œç”¨ï¼Ÿ</strong></p>
<p>è¿™ä¸ªé—®é¢˜å›°æ‰°äº†æˆ‘å¾ˆä¹…ï¼Œç»è¿‡å¤§é‡çš„æµ‹è¯•å’ŒéªŒè¯ï¼Œæˆ‘ç»ˆäºæ‰¾åˆ°äº†å”¯ä¸€æœ‰æ•ˆçš„è§£å†³æ–¹æ¡ˆï¼Œå¹¶åŸºäºæ­¤å°è£…äº†è‡ªå®šä¹‰çš„ <code>webUni</code> é€šä¿¡å·¥å…·ã€‚ä»Šå¤©å°±æ¥åˆ†äº«è¿™ä¸ªç»è¿‡å®æˆ˜éªŒè¯çš„è§£å†³æ–¹æ¡ˆã€‚</p>
<h3 data-id="heading-2">ğŸ” é—®é¢˜èƒŒæ™¯</h3>
<p>åœ¨æ··åˆå¼€å‘åœºæ™¯ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦å°† uniapp æ‰“åŒ…æˆ H5ï¼Œç„¶ååµŒå…¥åˆ°ä¸åŒçš„å®¹å™¨ä¸­ï¼š</p>
<ol>
<li><strong>åŸç”Ÿ App çš„ WebView</strong>ï¼šH5 é¡µé¢éœ€è¦ä¸åŸç”Ÿåº”ç”¨è¿›è¡Œé€šä¿¡</li>
<li><strong>å¾®ä¿¡å°ç¨‹åºçš„ web-view</strong>ï¼šH5 é¡µé¢éœ€è¦ä¸å°ç¨‹åºè¿›è¡Œé€šä¿¡</li>
</ol>
<p>å¸¸è§çš„é€šä¿¡éœ€æ±‚åŒ…æ‹¬ï¼š</p>
<ul>
<li>å…³é—­ WebView</li>
<li>ä¼ é€’ç™»å½•ä¿¡æ¯</li>
<li>åŒæ­¥é¡µé¢çŠ¶æ€</li>
<li>è§¦å‘åŸç”ŸåŠŸèƒ½</li>
</ul>
<h3 data-id="heading-3">âŒ å¸¸è§çš„å¤±è´¥å°è¯•</h3>
<p>åœ¨å¯»æ‰¾è§£å†³æ–¹æ¡ˆçš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘å°è¯•äº†å¤šç§æ–¹æ³•ï¼Œä½†éƒ½å¤±è´¥äº†ï¼š</p>
<h4 data-id="heading-4">æ–¹æ³•ä¸€ï¼šä½¿ç”¨ <code>uni.postMessage</code></h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âŒ åœ¨ H5 ç¯å¢ƒä¸‹æ— æ³•æ­£å¸¸å·¥ä½œ</span>
uni.<span class="hljs-title function_">postMessage</span>({
  <span class="hljs-attr">data</span>: {
    <span class="hljs-attr">action</span>: <span class="hljs-string">'closeWebView'</span>
  }
})
</code></pre>
<h4 data-id="heading-5">æ–¹æ³•äºŒï¼šä½¿ç”¨ <code>window.parent.postMessage</code></h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âŒ åœ¨ H5 ç¯å¢ƒä¸‹æ— æ³•æ­£å¸¸å·¥ä½œ</span>
<span class="hljs-variable language_">window</span>.<span class="hljs-property">parent</span>.<span class="hljs-title function_">postMessage</span>({
  <span class="hljs-attr">type</span>: <span class="hljs-string">'message'</span>,
  <span class="hljs-attr">data</span>: { <span class="hljs-attr">action</span>: <span class="hljs-string">'closeWebView'</span> }
}, <span class="hljs-string">'*'</span>)
</code></pre>
<h4 data-id="heading-6">æ–¹æ³•ä¸‰ï¼šä½¿ç”¨ <code>plus.webview.postMessage</code></h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âŒ åœ¨ H5 ç¯å¢ƒä¸‹ plus å¯¹è±¡ä¸å­˜åœ¨</span>
plus.<span class="hljs-property">webview</span>.<span class="hljs-title function_">postMessage</span>({
  <span class="hljs-attr">data</span>: { <span class="hljs-attr">action</span>: <span class="hljs-string">'closeWebView'</span> }
})
</code></pre>
<h3 data-id="heading-7">âœ… å”¯ä¸€æœ‰æ•ˆçš„è§£å†³æ–¹æ¡ˆ</h3>
<p>ç»è¿‡å¤§é‡æµ‹è¯•éªŒè¯ï¼Œæˆ‘æ‰¾åˆ°äº†ä¸åŒç¯å¢ƒä¸‹çš„æœ‰æ•ˆé€šä¿¡æ–¹å¼ï¼š</p>
<ol>
<li><strong>App ç¯å¢ƒ</strong>ï¼šä½¿ç”¨ <code>webUni.postMessage</code> æ–¹å¼</li>
<li><strong>å¾®ä¿¡å°ç¨‹åº web-view ç¯å¢ƒ</strong>ï¼šä½¿ç”¨ <code>wx.miniProgram.postMessage</code> æ–¹å¼</li>
</ol>
<h4 data-id="heading-8">æ ¸å¿ƒåŸç†</h4>
<p>æˆ‘åŸºäºä¸åŒç¯å¢ƒçš„é€šä¿¡æœºåˆ¶å°è£…äº†ä¸€ä¸ªç»Ÿä¸€çš„å·¥å…·å¯¹è±¡ï¼Œæ ¸å¿ƒç‰¹æ€§åŒ…æ‹¬ï¼š</p>
<ol>
<li><strong>è‡ªåŠ¨ç¯å¢ƒæ£€æµ‹</strong>ï¼šè‡ªåŠ¨åˆ¤æ–­è¿è¡Œç¯å¢ƒï¼ˆAppã€å¾®ä¿¡å°ç¨‹åºã€æ™®é€š H5ï¼‰</li>
<li><strong>æ‰‹åŠ¨æŒ‡å®šç¯å¢ƒ</strong>ï¼šæ”¯æŒé€šè¿‡å‚æ•°æ˜¾å¼æŒ‡å®šç›®æ ‡ç¯å¢ƒï¼ˆæ¨èä½¿ç”¨ï¼Œé¿å…æ£€æµ‹é—®é¢˜ï¼‰</li>
<li><strong>å¤šç«¯å…¼å®¹</strong>ï¼šæ”¯æŒå¤šç§åŸç”Ÿå®¹å™¨ï¼ˆDCloudã€5+ Runtimeã€å¾®ä¿¡å°ç¨‹åºç­‰ï¼‰</li>
<li><strong>ç»Ÿä¸€ API</strong>ï¼šæä¾›ç»Ÿä¸€çš„æ¥å£ï¼Œæ— éœ€å…³å¿ƒåº•å±‚å®ç°</li>
<li><strong>æ¶ˆæ¯å°è£…</strong>ï¼šå°†æ¶ˆæ¯å°è£…æˆæ ‡å‡†æ ¼å¼ä¼ é€’ç»™å¯¹åº”å®¹å™¨</li>
</ol>
<h4 data-id="heading-9">å¾®ä¿¡å°ç¨‹åºç‰¹æ®Šå¤„ç†</h4>
<p><strong>é‡è¦å‘ç°</strong>ï¼šåœ¨å¾®ä¿¡å°ç¨‹åºçš„ web-view ä¸­ï¼Œå¦‚æœåªè°ƒç”¨ <code>wx.miniProgram.postMessage</code>ï¼Œæ¶ˆæ¯ä¼šåœ¨é¡µé¢é”€æ¯åæ‰è¢«å°ç¨‹åºæ¥æ”¶åˆ°ã€‚è¿™æ˜¯å¾®ä¿¡å®˜æ–¹çš„å·²çŸ¥é—®é¢˜ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼šåœ¨å‘é€æ¶ˆæ¯åï¼Œç«‹å³è°ƒç”¨ <code>wx.miniProgram.navigateBack()</code>ï¼Œè¿™æ ·æ¶ˆæ¯ä¼šç«‹å³è¢«å°ç¨‹åºæ¥æ”¶ã€‚æ’ä»¶æä¾›äº† <code>autoNavigateBack</code> é€‰é¡¹æ¥è‡ªåŠ¨å¤„ç†è¿™ä¸ªé—®é¢˜ã€‚</p>
<h4 data-id="heading-10">å®ç°ä»£ç ï¼ˆè‡ªå®šä¹‰å°è£…æ‘˜å½•ï¼‰</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âœ… æ”¯æŒæ‰‹åŠ¨æŒ‡å®šç¯å¢ƒæˆ–è‡ªåŠ¨æ£€æµ‹ç¯å¢ƒçš„å®Œæ•´å®ç°</span>
<span class="hljs-keyword">const</span> webviewPostMessage = {
    <span class="hljs-comment">// é™æ€æ–¹æ³•ï¼šä¸»åŠ¨æ£€æµ‹ç¯å¢ƒ</span>
    <span class="hljs-attr">detectEnv</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">const</span> env = {};
        <span class="hljs-comment">// æ£€æµ‹Appç¯å¢ƒ</span>
        <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">window</span>.<span class="hljs-property">plus</span>) {
            env.<span class="hljs-property">plus</span> = <span class="hljs-literal">true</span>;
            env.<span class="hljs-property">app</span> = <span class="hljs-literal">true</span>;
        }
        <span class="hljs-comment">// æ£€æµ‹å¾®ä¿¡å°ç¨‹åºç¯å¢ƒ</span>
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">window</span>.<span class="hljs-property">wx</span> &amp;&amp; <span class="hljs-variable language_">window</span>.<span class="hljs-property">wx</span>.<span class="hljs-property">miniProgram</span>) {
            env.<span class="hljs-property">wechat</span> = <span class="hljs-literal">true</span>;
            env.<span class="hljs-property">miniprogram</span> = <span class="hljs-literal">true</span>;
        }
        <span class="hljs-comment">// å…¶ä»–ä¸ºæ™®é€šH5ç¯å¢ƒ</span>
        <span class="hljs-keyword">else</span> {
            env.<span class="hljs-property">h5</span> = <span class="hljs-literal">true</span>;
        }
        <span class="hljs-keyword">return</span> env;
    },
    
    <span class="hljs-comment">// å‘é€æ¶ˆæ¯æ–¹æ³•ï¼ˆæ”¯æŒæ‰‹åŠ¨æŒ‡å®šç¯å¢ƒï¼‰</span>
    <span class="hljs-attr">postMessage</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">options</span>) {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">if</span> (!options || <span class="hljs-keyword">typeof</span> options !== <span class="hljs-string">'object'</span>) {
                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">'[webview-postmessage] postMessage éœ€è¦ä¼ å…¥ä¸€ä¸ªå¯¹è±¡å‚æ•°'</span>);
                <span class="hljs-keyword">return</span>;
            }
            <span class="hljs-keyword">if</span> (!options.<span class="hljs-property">data</span>) {
                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">'[webview-postmessage] postMessage éœ€è¦ä¼ å…¥ data å±æ€§'</span>);
                <span class="hljs-keyword">return</span>;
            }
            
            <span class="hljs-comment">// ä¼˜å…ˆä½¿ç”¨æ‰‹åŠ¨æŒ‡å®šçš„ç¯å¢ƒ</span>
            <span class="hljs-keyword">const</span> manualEnv = options.<span class="hljs-property">env</span>;
            
            <span class="hljs-comment">// æ ¹æ®æ‰‹åŠ¨æŒ‡å®šçš„ç¯å¢ƒæˆ–è‡ªåŠ¨æ£€æµ‹æ¥å†³å®šå‘é€æ–¹å¼</span>
            <span class="hljs-keyword">if</span> (manualEnv === <span class="hljs-string">'mp-weixin'</span>) {
                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'[webview-postmessage] æ‰‹åŠ¨æŒ‡å®šå¾®ä¿¡å°ç¨‹åºç¯å¢ƒ'</span>);
                <span class="hljs-comment">// å¼ºåˆ¶ä½¿ç”¨å¾®ä¿¡å°ç¨‹åºæ–¹å¼å‘é€æ¶ˆæ¯</span>
                <span class="hljs-keyword">try</span> {
                    wx.<span class="hljs-property">miniProgram</span>.<span class="hljs-title function_">postMessage</span>({ <span class="hljs-attr">data</span>: options.<span class="hljs-property">data</span> });
                    
                    <span class="hljs-comment">// å¦‚æœè®¾ç½®äº†autoNavigateBackä¸ºtrueï¼Œåˆ™è‡ªåŠ¨è°ƒç”¨navigateBack</span>
                    <span class="hljs-keyword">if</span> (options.<span class="hljs-property">autoNavigateBack</span> === <span class="hljs-literal">true</span>) {
                        <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
                            wx.<span class="hljs-property">miniProgram</span>.<span class="hljs-title function_">postMessage</span>({ <span class="hljs-attr">data</span>: options.<span class="hljs-property">data</span> });
                        }, <span class="hljs-number">100</span>);
                    }
                } <span class="hljs-keyword">catch</span> (wechatError) {
                    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'[webview-postmessage] å¾®ä¿¡å°ç¨‹åºç¯å¢ƒå‘é€æ¶ˆæ¯å¤±è´¥:'</span>, wechatError);
                    <span class="hljs-comment">// å¤±è´¥åå°è¯•å›é€€åˆ°åŸå§‹æ–¹å¼</span>
                    webUni.<span class="hljs-title function_">postMessage</span>(options);
                }
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (manualEnv === <span class="hljs-string">'app'</span>) {
                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'[webview-postmessage] æ‰‹åŠ¨æŒ‡å®šAppç¯å¢ƒ'</span>);
                <span class="hljs-comment">// å¼ºåˆ¶ä½¿ç”¨Appæ–¹å¼å‘é€æ¶ˆæ¯</span>
                webUni.<span class="hljs-title function_">postMessage</span>(options);
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-comment">// è‡ªåŠ¨æ£€æµ‹ç¯å¢ƒï¼ˆå‘åå…¼å®¹ï¼‰</span>
                <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">window</span>.<span class="hljs-property">wx</span> &amp;&amp; <span class="hljs-variable language_">window</span>.<span class="hljs-property">wx</span>.<span class="hljs-property">miniProgram</span>) {
                    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'[webview-postmessage] è‡ªåŠ¨æ£€æµ‹åˆ°å¾®ä¿¡å°ç¨‹åºç¯å¢ƒ'</span>);
                    wx.<span class="hljs-property">miniProgram</span>.<span class="hljs-title function_">postMessage</span>({ <span class="hljs-attr">data</span>: options.<span class="hljs-property">data</span> });
                    
                    <span class="hljs-keyword">if</span> (options.<span class="hljs-property">autoNavigateBack</span> === <span class="hljs-literal">true</span>) {
                        <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
                            wx.<span class="hljs-property">miniProgram</span>.<span class="hljs-title function_">postMessage</span>({ <span class="hljs-attr">data</span>: options.<span class="hljs-property">data</span> });
                        }, <span class="hljs-number">100</span>);
                    }
                } <span class="hljs-keyword">else</span> {
                    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'[webview-postmessage] è‡ªåŠ¨æ£€æµ‹åˆ°Appæˆ–æ™®é€šH5ç¯å¢ƒ'</span>);
                    webUni.<span class="hljs-title function_">postMessage</span>(options);
                }
            }
        } <span class="hljs-keyword">catch</span> (error) {
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'[webview-postmessage] å‘é€æ¶ˆæ¯å¤±è´¥:'</span>, error);
        }
    }
};

<span class="hljs-comment">// ä½¿ç”¨æ–¹å¼1ï¼šæ‰‹åŠ¨æŒ‡å®šç¯å¢ƒï¼ˆæ¨èï¼‰</span>
webviewPostMessage.<span class="hljs-title function_">postMessage</span>({
    <span class="hljs-attr">data</span>: {
        <span class="hljs-attr">action</span>: <span class="hljs-string">'closeWebView'</span>
    },
    <span class="hljs-attr">env</span>: <span class="hljs-string">'app'</span>  <span class="hljs-comment">// æ‰‹åŠ¨æŒ‡å®šç¯å¢ƒä¸ºApp</span>
})

<span class="hljs-comment">// ä½¿ç”¨æ–¹å¼2ï¼šæ‰‹åŠ¨æŒ‡å®šå¾®ä¿¡å°ç¨‹åºç¯å¢ƒ</span>
webviewPostMessage.<span class="hljs-title function_">postMessage</span>({
    <span class="hljs-attr">data</span>: {
        <span class="hljs-attr">action</span>: <span class="hljs-string">'closeWebView'</span>
    },
    <span class="hljs-attr">env</span>: <span class="hljs-string">'mp-weixin'</span>,  <span class="hljs-comment">// æ‰‹åŠ¨æŒ‡å®šç¯å¢ƒä¸ºå¾®ä¿¡å°ç¨‹åº</span>
    <span class="hljs-attr">autoNavigateBack</span>: <span class="hljs-literal">true</span>  <span class="hljs-comment">// è‡ªåŠ¨è°ƒç”¨navigateBack</span>
})

<span class="hljs-comment">// ä½¿ç”¨æ–¹å¼3ï¼šè‡ªåŠ¨æ£€æµ‹ç¯å¢ƒï¼ˆå…¼å®¹æ€§æ¨¡å¼ï¼‰</span>
webviewPostMessage.<span class="hljs-title function_">postMessage</span>({
    <span class="hljs-attr">data</span>: {
        <span class="hljs-attr">action</span>: <span class="hljs-string">'closeWebView'</span>
    }
})
</code></pre>
<h3 data-id="heading-11">ğŸš€ è‡ªç ”é€šä¿¡æ’ä»¶ï¼ˆuni_modules ç‰ˆæœ¬ï¼‰</h3>
<p>ç›®å‰æˆ‘å°†è¿™å¥—å°è£…ä»¥ <code>uni_modules/webview-postmessage</code> çš„å½¢å¼ç»´æŠ¤åœ¨é¡¹ç›®é‡Œï¼Œå°šæœªå‘å¸ƒåˆ° npm æˆ–æ’ä»¶å¸‚åœºã€‚æƒ³è¦ä½¿ç”¨æ—¶ï¼Œåªéœ€æŠŠæ•´ä¸ªç›®å½•å¤åˆ¶åˆ°è‡ªå·±çš„é¡¹ç›®ä¸­å³å¯ã€‚</p>
<h4 data-id="heading-12">è·å–æ–¹å¼</h4>
<ol>
<li>åœ¨ä»£ç ä»“åº“ä¸­æ‰¾åˆ° <code>uni_modules/webview-postmessage</code></li>
<li>å°†è¯¥ç›®å½•å¤åˆ¶åˆ°ä½ é¡¹ç›®çš„ <code>uni_modules</code> ä¸‹</li>
<li>è‹¥éœ€è¦åˆ†äº«ç»™å›¢é˜Ÿï¼Œå¯ç›´æ¥ zip æ‰“åŒ…è¯¥ç›®å½•å‘é€</li>
</ol>
<h4 data-id="heading-13">åŸºç¡€ä½¿ç”¨</h4>
<p><strong>å¼ºçƒˆæ¨èæ‰‹åŠ¨æŒ‡å®šå®¿ä¸»ç±»å‹ï¼</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> webviewPostMessage <span class="hljs-keyword">from</span> <span class="hljs-string">'@/uni_modules/webview-postmessage/index.js'</span>

<span class="hljs-comment">// æ¨èï¼šæ‰‹åŠ¨æŒ‡å®šAppç¯å¢ƒ</span>
webviewPostMessage.<span class="hljs-title function_">postMessage</span>({ 
  <span class="hljs-attr">data</span>: { 
    <span class="hljs-attr">action</span>: <span class="hljs-string">'closeWebView'</span> 
  },
  <span class="hljs-attr">env</span>: <span class="hljs-string">'app'</span>  <span class="hljs-comment">// æ‰‹åŠ¨æŒ‡å®šç¯å¢ƒä¸ºApp</span>
})

<span class="hljs-comment">// æ¨èï¼šæ‰‹åŠ¨æŒ‡å®šå¾®ä¿¡å°ç¨‹åºç¯å¢ƒï¼ˆå¹¶è‡ªåŠ¨è¿”å›ï¼‰</span>
webviewPostMessage.<span class="hljs-title function_">postMessage</span>({ 
  <span class="hljs-attr">data</span>: { 
    <span class="hljs-attr">action</span>: <span class="hljs-string">'closeWebView'</span> 
  },
  <span class="hljs-attr">env</span>: <span class="hljs-string">'mp-weixin'</span>,  <span class="hljs-comment">// æ‰‹åŠ¨æŒ‡å®šç¯å¢ƒä¸ºå¾®ä¿¡å°ç¨‹åº</span>
  <span class="hljs-attr">autoNavigateBack</span>: <span class="hljs-literal">true</span>  <span class="hljs-comment">// è‡ªåŠ¨è°ƒç”¨ navigateBackï¼Œç¡®ä¿æ¶ˆæ¯ç«‹å³è¢«æ¥æ”¶</span>
})

<span class="hljs-comment">// ä¸æ¨èï¼šè‡ªåŠ¨æ£€æµ‹ç¯å¢ƒï¼ˆå¯èƒ½å­˜åœ¨å…¼å®¹æ€§é—®é¢˜ï¼‰</span>
<span class="hljs-comment">/*
webviewPostMessage.postMessage({ 
  data: { 
    action: 'closeWebView' 
  } 
})
*/</span>
</code></pre>
<h4 data-id="heading-14">Vue3 Composition API ç¤ºä¾‹</h4>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;view&gt;
    &lt;button @click="sendMessage"&gt;å‘é€æ¶ˆæ¯&lt;/button&gt;
    &lt;button @click="sendMessageAndBack"&gt;å‘é€æ¶ˆæ¯å¹¶è¿”å›&lt;/button&gt;
  &lt;/view&gt;
&lt;/template&gt;

&lt;script setup&gt;
import webviewPostMessage from '@/uni_modules/webview-postmessage/index.js'

// æ™®é€šå‘é€æ¶ˆæ¯ - æ¨èæ‰‹åŠ¨æŒ‡å®šç¯å¢ƒç±»å‹
const sendMessage = () =&gt; {
  webviewPostMessage.postMessage({
    data: {
      action: 'closeWebView',
      // å¯ä»¥ä¼ é€’å…¶ä»–æ•°æ®
      token: 'xxx',
      userId: 123
    },
    env: 'app'  // æ‰‹åŠ¨æŒ‡å®šç¯å¢ƒä¸ºApp
  })
}

// å¾®ä¿¡å°ç¨‹åºç¯å¢ƒï¼šå‘é€åè‡ªåŠ¨è¿”å›ï¼ˆæ¨èæ‰‹åŠ¨æŒ‡å®šç¯å¢ƒç±»å‹ï¼‰
const sendMessageAndBack = () =&gt; {
  webviewPostMessage.postMessage({
    data: {
      action: 'closeWebView',
      token: 'xxx',
      userId: 123
    },
    env: 'mp-weixin',  // æ‰‹åŠ¨æŒ‡å®šç¯å¢ƒä¸ºå¾®ä¿¡å°ç¨‹åº
    autoNavigateBack: true  // è‡ªåŠ¨è¿”å›ï¼Œç¡®ä¿æ¶ˆæ¯ç«‹å³è¢«æ¥æ”¶
  })
}
&lt;/script&gt;
</code></pre>
<h4 data-id="heading-15">Vue2 Options API ç¤ºä¾‹</h4>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;view&gt;
    &lt;button @click="handleClose"&gt;å…³é—­é¡µé¢&lt;/button&gt;
  &lt;/view&gt;
&lt;/template&gt;

&lt;script&gt;
import webviewPostMessage from '@/uni_modules/webview-postmessage/index.js'

export default {
  methods: {
    handleClose() {
      webviewPostMessage.postMessage({
        data: {
          action: 'closeWebView'
        },
        env: 'app'  // æ¨èï¼šæ‰‹åŠ¨æŒ‡å®šç¯å¢ƒä¸ºApp
      })
    }
  }
}
&lt;/script&gt;
</code></pre>
<h3 data-id="heading-16">ğŸ’¡ å®é™…åº”ç”¨åœºæ™¯</h3>
<h4 data-id="heading-17">åœºæ™¯ä¸€ï¼šå…³é—­ WebView</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç”¨æˆ·ç‚¹å‡»è¿”å›æŒ‰é’®æ—¶å…³é—­ WebView - æ¨èæ‰‹åŠ¨æŒ‡å®šç¯å¢ƒ</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleBack</span> = (<span class="hljs-params"/>) =&gt; {
  webviewPostMessage.<span class="hljs-title function_">postMessage</span>({
    <span class="hljs-attr">data</span>: {
      <span class="hljs-attr">action</span>: <span class="hljs-string">'closeWebView'</span>
    },
    <span class="hljs-attr">env</span>: <span class="hljs-string">'app'</span>  <span class="hljs-comment">// æ‰‹åŠ¨æŒ‡å®šç¯å¢ƒä¸ºApp</span>
  })
}
</code></pre>
<h4 data-id="heading-18">åœºæ™¯äºŒï¼šä¼ é€’ç™»å½•ä¿¡æ¯</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç™»å½•æˆåŠŸåï¼Œå°† token ä¼ é€’ç»™åŸç”Ÿåº”ç”¨ - æ¨èæ‰‹åŠ¨æŒ‡å®šç¯å¢ƒ</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleLogin</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">username, password</span>) =&gt; {
  <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> <span class="hljs-title function_">loginAPI</span>(username, password)
  
  webviewPostMessage.<span class="hljs-title function_">postMessage</span>({
    <span class="hljs-attr">data</span>: {
      <span class="hljs-attr">action</span>: <span class="hljs-string">'login'</span>,
      <span class="hljs-attr">token</span>: result.<span class="hljs-property">token</span>,
      <span class="hljs-attr">userId</span>: result.<span class="hljs-property">userId</span>,
      <span class="hljs-attr">userInfo</span>: result.<span class="hljs-property">userInfo</span>
    },
    <span class="hljs-attr">env</span>: <span class="hljs-string">'app'</span>  <span class="hljs-comment">// æ‰‹åŠ¨æŒ‡å®šç¯å¢ƒä¸ºApp</span>
  })
}
</code></pre>
<h4 data-id="heading-19">åœºæ™¯ä¸‰ï¼šåŒæ­¥é¡µé¢çŠ¶æ€</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// é¡µé¢åŠ è½½å®Œæˆåé€šçŸ¥åŸç”Ÿåº”ç”¨ - æ¨èæ‰‹åŠ¨æŒ‡å®šç¯å¢ƒ</span>
<span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> {
  webviewPostMessage.<span class="hljs-title function_">postMessage</span>({
    <span class="hljs-attr">data</span>: {
      <span class="hljs-attr">action</span>: <span class="hljs-string">'pageLoaded'</span>,
      <span class="hljs-attr">pageId</span>: <span class="hljs-string">'home'</span>,
      <span class="hljs-attr">timestamp</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>()
    },
    <span class="hljs-attr">env</span>: <span class="hljs-string">'app'</span>  <span class="hljs-comment">// æ‰‹åŠ¨æŒ‡å®šç¯å¢ƒä¸ºApp</span>
  })
})
</code></pre>
<h4 data-id="heading-20">åœºæ™¯å››ï¼šè§¦å‘åŸç”ŸåŠŸèƒ½</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// éœ€è¦è°ƒç”¨åŸç”Ÿåˆ†äº«åŠŸèƒ½ - æ¨èæ‰‹åŠ¨æŒ‡å®šç¯å¢ƒ</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleShare</span> = (<span class="hljs-params"/>) =&gt; {
  webviewPostMessage.<span class="hljs-title function_">postMessage</span>({
    <span class="hljs-attr">data</span>: {
      <span class="hljs-attr">action</span>: <span class="hljs-string">'share'</span>,
      <span class="hljs-attr">title</span>: <span class="hljs-string">'åˆ†äº«æ ‡é¢˜'</span>,
      <span class="hljs-attr">content</span>: <span class="hljs-string">'åˆ†äº«å†…å®¹'</span>,
      <span class="hljs-attr">url</span>: <span class="hljs-string">'https://example.com'</span>
    },
    <span class="hljs-attr">env</span>: <span class="hljs-string">'app'</span>  <span class="hljs-comment">// æ‰‹åŠ¨æŒ‡å®šç¯å¢ƒä¸ºApp</span>
  })
}
</code></pre>
<h3 data-id="heading-21">ğŸ“‹ API è¯´æ˜</h3>
<h4 data-id="heading-22">postMessage(options)</h4>
<p>å‘åŸç”Ÿåº”ç”¨æˆ–å¾®ä¿¡å°ç¨‹åºå‘é€æ¶ˆæ¯ï¼ˆæ¨èæ‰‹åŠ¨æŒ‡å®šç¯å¢ƒç±»å‹ï¼‰</p>
<p><strong>å‚æ•°ï¼š</strong></p>



































<table><thead><tr><th>å‚æ•°</th><th>ç±»å‹</th><th>å¿…å¡«</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>options</td><td>Object</td><td>æ˜¯</td><td>æ¶ˆæ¯é€‰é¡¹</td></tr><tr><td>options.data</td><td>Object</td><td>æ˜¯</td><td>è¦å‘é€çš„æ•°æ®å¯¹è±¡</td></tr><tr><td>options.env</td><td>String</td><td>æ¨è</td><td>æ‰‹åŠ¨æŒ‡å®šç¯å¢ƒç±»å‹ï¼š'mp-weixin'ï¼ˆå¾®ä¿¡å°ç¨‹åºï¼‰ã€'app'ï¼ˆAppç¯å¢ƒï¼‰ - æ¨èä½¿ç”¨ï¼Œé¿å…è‡ªåŠ¨æ£€æµ‹é—®é¢˜</td></tr><tr><td>options.autoNavigateBack</td><td>Boolean</td><td>å¦</td><td>æ˜¯å¦åœ¨å¾®ä¿¡å°ç¨‹åºç¯å¢ƒä¸­è‡ªåŠ¨è°ƒç”¨ navigateBackï¼ˆè§£å†³æ¶ˆæ¯å»¶è¿Ÿé—®é¢˜ï¼Œé»˜è®¤ falseï¼‰</td></tr></tbody></table>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// App ç¯å¢ƒ - æ¨èæ‰‹åŠ¨æŒ‡å®šç¯å¢ƒ</span>
webviewPostMessage.<span class="hljs-title function_">postMessage</span>({
  <span class="hljs-attr">data</span>: {
    <span class="hljs-attr">action</span>: <span class="hljs-string">'customAction'</span>,
    <span class="hljs-attr">type</span>: <span class="hljs-string">'userAction'</span>,
    <span class="hljs-attr">value</span>: <span class="hljs-string">'someValue'</span>,
    <span class="hljs-comment">// å¯ä»¥ä¼ é€’ä»»æ„ JSON å¯åºåˆ—åŒ–çš„æ•°æ®</span>
    <span class="hljs-attr">nested</span>: {
      <span class="hljs-attr">key</span>: <span class="hljs-string">'value'</span>
    }
  },
  <span class="hljs-attr">env</span>: <span class="hljs-string">'app'</span>  <span class="hljs-comment">// æ‰‹åŠ¨æŒ‡å®šç¯å¢ƒä¸ºApp</span>
})

<span class="hljs-comment">// å¾®ä¿¡å°ç¨‹åºç¯å¢ƒï¼Œå‘é€åè‡ªåŠ¨è¿”å› - æ¨èæ‰‹åŠ¨æŒ‡å®šç¯å¢ƒ</span>
webviewPostMessage.<span class="hljs-title function_">postMessage</span>({
  <span class="hljs-attr">data</span>: {
    <span class="hljs-attr">action</span>: <span class="hljs-string">'closeWebView'</span>,
    <span class="hljs-attr">token</span>: <span class="hljs-string">'xxx'</span>
  },
  <span class="hljs-attr">env</span>: <span class="hljs-string">'mp-weixin'</span>,  <span class="hljs-comment">// æ‰‹åŠ¨æŒ‡å®šç¯å¢ƒä¸ºå¾®ä¿¡å°ç¨‹åº</span>
  <span class="hljs-attr">autoNavigateBack</span>: <span class="hljs-literal">true</span>  <span class="hljs-comment">// è‡ªåŠ¨è°ƒç”¨ navigateBackï¼Œç¡®ä¿æ¶ˆæ¯ç«‹å³è¢«æ¥æ”¶</span>
})
</code></pre>
<h3 data-id="heading-23">âš ï¸ æ³¨æ„äº‹é¡¹</h3>
<ol>
<li>
<p><strong>é€‚ç”¨äº H5 ç¯å¢ƒ</strong>ï¼šæ­¤æ’ä»¶ä¸»è¦ç”¨äº uniapp æ‰“åŒ…æˆ H5 åçš„æ¶ˆæ¯é€šä¿¡</p>
<ul>
<li>App ç¯å¢ƒï¼šä½¿ç”¨ <code>webUni.postMessage</code></li>
<li>å¾®ä¿¡å°ç¨‹åº web-view ç¯å¢ƒï¼šä½¿ç”¨ <code>wx.miniProgram.postMessage</code></li>
<li>éœ€è¦å¼•å…¥ <code>jweixin.js</code> æ‰èƒ½æ”¯æŒå¾®ä¿¡å°ç¨‹åºç¯å¢ƒ</li>
</ul>
</li>
<li>
<p><strong>å¿…é¡»ä¼ é€’ data å±æ€§</strong>ï¼špostMessage æ–¹æ³•å¿…é¡»ä¼ å…¥åŒ…å« data å±æ€§çš„å¯¹è±¡</p>
</li>
<li>
<p><strong>æ•°æ®æ ¼å¼</strong>ï¼šdata å¯ä»¥æ˜¯ä»»æ„ JSON å¯åºåˆ—åŒ–çš„å¯¹è±¡</p>
</li>
<li>
<p><strong>å¼ºçƒˆæ¨èæ‰‹åŠ¨æŒ‡å®šå®¿ä¸»ç±»å‹</strong>ï¼šä¸ºäº†é¿å…è‡ªåŠ¨ç¯å¢ƒæ£€æµ‹å¯èƒ½å‡ºç°çš„é—®é¢˜ï¼ˆå¦‚ç¯å¢ƒç‰¹å¾ä¸æ˜æ˜¾å¯¼è‡´æ£€æµ‹å¤±è´¥ï¼‰ï¼Œ<strong>å¼ºçƒˆæ¨è</strong>é€šè¿‡ <code>env</code> å‚æ•°æ‰‹åŠ¨æŒ‡å®šå½“å‰ç¯å¢ƒç±»å‹ä¸º <code>'app'</code> æˆ– <code>'mp-weixin'</code></p>
</li>
<li>
<p><strong>ç¯å¢ƒé€‰æ‹©æŒ‡å—</strong>ï¼šåœ¨ App ä¸­åµŒå¥—è¿è¡Œæ—¶æŒ‡å®šä¸º <code>'app'</code>ï¼Œåœ¨å¾®ä¿¡å°ç¨‹åº web-view ä¸­è¿è¡Œæ—¶æŒ‡å®šä¸º <code>'mp-weixin'</code></p>
</li>
<li>
<p><strong>å¾®ä¿¡å°ç¨‹åºæ¶ˆæ¯å»¶è¿Ÿé—®é¢˜</strong>ï¼šåœ¨å¾®ä¿¡å°ç¨‹åºçš„ web-view ä¸­ï¼Œå¦‚æœåªå‘é€æ¶ˆæ¯ä¸è°ƒç”¨ <code>navigateBack</code>ï¼Œæ¶ˆæ¯ä¼šåœ¨é¡µé¢é”€æ¯åæ‰è¢«æ¥æ”¶ã€‚å»ºè®®ä½¿ç”¨ <code>autoNavigateBack: true</code> é€‰é¡¹è‡ªåŠ¨å¤„ç†</p>
</li>
<li>
<p><strong>åŸç”Ÿåº”ç”¨/å°ç¨‹åºéœ€è¦ç›‘å¬æ¶ˆæ¯</strong>ï¼šéœ€è¦åœ¨å¯¹åº”ç«¯å®ç°æ¶ˆæ¯ç›‘å¬é€»è¾‘æ¥æ¥æ”¶æ¶ˆæ¯</p>
</li>
</ol>
<h3 data-id="heading-24">ğŸ§ª æµ‹è¯•éªŒè¯</h3>
<p>æ­¤æ’ä»¶ç»è¿‡ä»¥ä¸‹ç¯å¢ƒæµ‹è¯•ï¼š</p>
<ul>
<li>âœ… uniapp æ‰“åŒ…æˆ H5</li>
<li>âœ… App ç¯å¢ƒï¼ˆAndroid/iOSï¼‰</li>
<li>âœ… å¾®ä¿¡å°ç¨‹åº web-view ç¯å¢ƒ</li>
<li>âœ… å¾®ä¿¡æµè§ˆå™¨</li>
<li>âœ… Chrome æµè§ˆå™¨</li>
<li>âœ… Safari æµè§ˆå™¨</li>
<li>âœ… Android æµè§ˆå™¨</li>
<li>âœ… iOS Safari</li>
<li>âœ… Vue2 å’Œ Vue3</li>
</ul>
<h3 data-id="heading-25">â“ å¸¸è§é—®é¢˜</h3>
<h4 data-id="heading-26">Q: ä¸ºä»€ä¹ˆä¸èƒ½ä½¿ç”¨ <code>uni.postMessage</code>ï¼Ÿ</h4>
<p>A: ç»è¿‡æµ‹è¯•ï¼Œ<code>uni.postMessage</code> åœ¨ H5 ç¯å¢ƒä¸‹æ— æ³•æ­£å¸¸å·¥ä½œï¼Œåªæœ‰ <code>webUni.postMessage</code> æ–¹å¼æœ‰æ•ˆã€‚è¿™æ˜¯å› ä¸º uniapp åœ¨ H5 ç¯å¢ƒä¸‹çš„æ¶ˆæ¯é€šä¿¡æœºåˆ¶ä¸ App ç«¯ä¸åŒã€‚</p>
<h4 data-id="heading-27">Q: æ”¯æŒå“ªäº›å¹³å°ï¼Ÿ</h4>
<p>A: æ’ä»¶æ”¯æŒä»¥ä¸‹å¹³å°ï¼š</p>
<ul>
<li><strong>App ç¯å¢ƒ</strong>ï¼šä½¿ç”¨ <code>webUni.postMessage</code>ï¼ˆDCloudã€5+ Runtimeï¼‰</li>
<li><strong>å¾®ä¿¡å°ç¨‹åº web-view ç¯å¢ƒ</strong>ï¼šä½¿ç”¨ <code>wx.miniProgram.postMessage</code>ï¼ˆéœ€è¦å¼•å…¥ jweixin.jsï¼‰</li>
<li><strong>æ™®é€š H5 ç¯å¢ƒ</strong>ï¼šä½¿ç”¨ <code>webUni.postMessage</code> æˆ– <code>window.parent.postMessage</code></li>
</ul>
<p><strong>æ³¨æ„</strong>ï¼šè™½ç„¶æ’ä»¶æ”¯æŒè‡ªåŠ¨æ£€æµ‹ç¯å¢ƒï¼Œä½†<strong>å¼ºçƒˆæ¨è</strong>é€šè¿‡ <code>env</code> å‚æ•°æ‰‹åŠ¨æŒ‡å®šç¯å¢ƒç±»å‹ï¼Œä»¥é¿å…æ£€æµ‹é—®é¢˜ã€‚</p>
<h4 data-id="heading-28">Q: å¾®ä¿¡å°ç¨‹åºä¸­æ¶ˆæ¯ä¸ºä»€ä¹ˆåœ¨é¡µé¢é”€æ¯åæ‰æ”¶åˆ°ï¼Ÿ</h4>
<p>A: è¿™æ˜¯å¾®ä¿¡å®˜æ–¹çš„å·²çŸ¥é—®é¢˜ã€‚åœ¨ web-view ä¸­åªè°ƒç”¨ <code>postMessage</code> æ—¶ï¼Œæ¶ˆæ¯ä¼šè¢«ç¼“å­˜ï¼Œç›´åˆ°é¡µé¢é”€æ¯æ‰è¢«å°ç¨‹åºæ¥æ”¶ã€‚è§£å†³æ–¹æ¡ˆæ˜¯åœ¨å‘é€æ¶ˆæ¯åç«‹å³è°ƒç”¨ <code>wx.miniProgram.navigateBack()</code>ï¼Œæ’ä»¶æä¾›äº† <code>autoNavigateBack: true</code> é€‰é¡¹æ¥è‡ªåŠ¨å¤„ç†è¿™ä¸ªé—®é¢˜ã€‚</p>
<h4 data-id="heading-29">Q: å¦‚ä½•åœ¨å¾®ä¿¡å°ç¨‹åºç¯å¢ƒä¸­ä½¿ç”¨ï¼Ÿ</h4>
<p>A: éœ€è¦ç¡®ä¿åœ¨ H5 é¡µé¢ä¸­å¼•å…¥äº† <code>jweixin.js</code>ï¼ˆå¾®ä¿¡ JS-SDKï¼‰ã€‚å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼å¼•å…¥ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-comment">&lt;!-- åœ¨ template.h5.html ä¸­å¼•å…¥ï¼ˆVue2ï¼‰ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://res.wx.qq.com/open/js/jweixin-1.6.0.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-comment">&lt;!-- æˆ–è€…åœ¨ Vue3 é¡¹ç›®ä¸­ï¼Œåœ¨ main.js ä¸­åŠ¨æ€å¼•å…¥ --&gt;</span>
</code></pre>
<p>ç„¶ååœ¨ä»£ç ä¸­ä½¿ç”¨ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> webviewPostMessage <span class="hljs-keyword">from</span> <span class="hljs-string">'@/uni_modules/webview-postmessage/index.js'</span>

<span class="hljs-comment">// å‘é€æ¶ˆæ¯å¹¶è‡ªåŠ¨è¿”å›ï¼ˆè§£å†³å»¶è¿Ÿé—®é¢˜ï¼‰</span>
webviewPostMessage.<span class="hljs-title function_">postMessage</span>({
  <span class="hljs-attr">data</span>: { <span class="hljs-attr">action</span>: <span class="hljs-string">'closeWebView'</span> },
  <span class="hljs-attr">autoNavigateBack</span>: <span class="hljs-literal">true</span>
})
</code></pre>
<h4 data-id="heading-30">Q: å¯ä»¥ä¼ é€’ä»€ä¹ˆç±»å‹çš„æ•°æ®ï¼Ÿ</h4>
<p>A: å¯ä»¥ä¼ é€’ä»»ä½• JSON å¯åºåˆ—åŒ–çš„æ•°æ®ï¼ŒåŒ…æ‹¬å¯¹è±¡ã€æ•°ç»„ã€å­—ç¬¦ä¸²ã€æ•°å­—ç­‰ã€‚</p>
<h4 data-id="heading-31">Q: åŸç”Ÿåº”ç”¨å¦‚ä½•æ¥æ”¶æ¶ˆæ¯ï¼Ÿ</h4>
<p>A: åŸç”Ÿåº”ç”¨éœ€è¦åœ¨ WebView ä¸­å®ç°æ¶ˆæ¯ç›‘å¬ã€‚ä»¥ Android ä¸ºä¾‹ï¼š</p>
<pre><code class="hljs language-java" lang="java">webView.addJavascriptInterface(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>() {
    <span class="hljs-meta">@JavascriptInterface</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">postMessage</span><span class="hljs-params">(String message)</span> {
        <span class="hljs-comment">// å¤„ç†æ¥æ”¶åˆ°çš„æ¶ˆæ¯</span>
        <span class="hljs-type">JSONObject</span> <span class="hljs-variable">data</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JSONObject</span>(message);
        <span class="hljs-type">String</span> <span class="hljs-variable">action</span> <span class="hljs-operator">=</span> data.optString(<span class="hljs-string">"action"</span>);
        <span class="hljs-comment">// ... å¤„ç†é€»è¾‘</span>
    }
}, <span class="hljs-string">"webUni"</span>);
</code></pre>
<h4 data-id="heading-32">Q: å¾®ä¿¡å°ç¨‹åºå¦‚ä½•æ¥æ”¶æ¶ˆæ¯ï¼Ÿ</h4>
<p>A: åœ¨å°ç¨‹åºé¡µé¢çš„ <code>web-view</code> ç»„ä»¶ä¸Šç»‘å®š <code>@message</code> äº‹ä»¶ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;web-view :src="url" @message="onMessage"&gt;&lt;/web-view&gt;
&lt;/template&gt;

&lt;script&gt;
export default {
  methods: {
    onMessage(e) {
      // e.detail.data æ˜¯ä¸€ä¸ªæ•°ç»„ï¼ŒåŒ…å«æ‰€æœ‰å‘é€çš„æ¶ˆæ¯
      const messages = e.detail.data || [];
      messages.forEach(msg =&gt; {
        if (msg.action === 'closeWebView') {
          uni.navigateBack();
        }
        // å¤„ç†å…¶ä»–æ¶ˆæ¯...
      });
    }
  }
}
&lt;/script&gt;
</code></pre>
<h3 data-id="heading-33">ğŸ“¦ é¡¹ç›®çŠ¶æ€</h3>
<ul>
<li><strong>å­˜æ”¾ä½ç½®</strong>ï¼š<code>uni_modules/webview-postmessage</code></li>
<li><strong>ä½¿ç”¨æ–¹å¼</strong>ï¼šç›´æ¥å¤åˆ¶åˆ°ä¸šåŠ¡é¡¹ç›®çš„ <code>uni_modules</code> ç›®å½•</li>
<li><strong>æ’ä»¶å¸‚åœº</strong>ï¼šå·²å‘å¸ƒåˆ° <a href="https://link.juejin.cn?target=https%3A%2F%2Fext.dcloud.net.cn%2Fplugin%3Fid%3D25865" target="_blank" title="https://ext.dcloud.net.cn/plugin?id=25865" ref="nofollow noopener noreferrer">uni-app æ’ä»¶å¸‚åœº</a></li>
<li><strong>ç»´æŠ¤æ–¹å¼</strong>ï¼šé€šè¿‡ <code>changelog.md</code> è®°å½•æ”¹åŠ¨ï¼Œæ‰‹åŠ¨åŒæ­¥åˆ°å„ä¸ªé¡¹ç›®</li>
<li><strong>æœ€æ–°ç‰ˆæœ¬</strong>ï¼šv1.4.0</li>
<li><strong>æœ€æ–°ç‰ˆæœ¬ç‰¹æ€§</strong>ï¼šæ”¯æŒæ‰‹åŠ¨æŒ‡å®šç¯å¢ƒç±»å‹ï¼Œä¼˜åŒ–äº†é”™è¯¯å¤„ç†å’Œæ–‡æ¡£è¯´æ˜</li>
</ul>
<h3 data-id="heading-34">ğŸ¯ æ€»ç»“</h3>
<p>é€šè¿‡æœ¬æ–‡çš„åˆ†äº«ï¼Œæˆ‘ä»¬äº†è§£åˆ°ï¼š</p>
<ol>
<li>
<p><strong>é—®é¢˜æ ¹æº</strong>ï¼š</p>
<ul>
<li>uniapp åœ¨ H5 ç¯å¢ƒä¸‹çš„æ¶ˆæ¯é€šä¿¡æœºåˆ¶ä¸ App ç«¯ä¸åŒ</li>
<li>å¾®ä¿¡å°ç¨‹åº web-view ç¯å¢ƒæœ‰ç‰¹æ®Šçš„é€šä¿¡æ–¹å¼å’Œå»¶è¿Ÿé—®é¢˜</li>
</ul>
</li>
<li>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<ul>
<li>App ç¯å¢ƒï¼šä½¿ç”¨ <code>webUni.postMessage</code></li>
<li>å¾®ä¿¡å°ç¨‹åºç¯å¢ƒï¼šä½¿ç”¨ <code>wx.miniProgram.postMessage</code> + <code>navigateBack</code>ï¼ˆè§£å†³å»¶è¿Ÿï¼‰</li>
<li>æ”¯æŒæ‰‹åŠ¨æŒ‡å®šç¯å¢ƒç±»å‹ï¼Œé¿å…è‡ªåŠ¨æ£€æµ‹å¯èƒ½å‡ºç°çš„é—®é¢˜</li>
</ul>
</li>
<li>
<p><strong>æœ€ä½³å®è·µ</strong>ï¼š</p>
<ul>
<li><strong>å¼ºçƒˆæ¨èæ‰‹åŠ¨æŒ‡å®šç¯å¢ƒç±»å‹</strong>ï¼Œé€šè¿‡ <code>env</code> å‚æ•°æ˜ç¡®æŒ‡å®š <code>'app'</code> æˆ– <code>'mp-weixin'</code></li>
<li>å°è£…ç»Ÿä¸€çš„ APIï¼Œè‡ªåŠ¨æ£€æµ‹ç¯å¢ƒä½œä¸ºå¤‡ç”¨æ–¹æ¡ˆ</li>
<li>æä¾› <code>autoNavigateBack</code> é€‰é¡¹è§£å†³å¾®ä¿¡å°ç¨‹åºæ¶ˆæ¯å»¶è¿Ÿé—®é¢˜</li>
<li>ä»¥æ’ä»¶å½¢å¼æä¾›ï¼Œæ–¹ä¾¿ä½¿ç”¨å’Œç»´æŠ¤</li>
</ul>
</li>
</ol>
<p>å¸Œæœ›è¿™ä¸ªè§£å†³æ–¹æ¡ˆèƒ½å¤Ÿå¸®åŠ©åˆ°é‡åˆ°åŒæ ·é—®é¢˜çš„å¼€å‘è€…ã€‚å¦‚æœä½ è§‰å¾—æœ‰ç”¨ï¼Œæ¬¢è¿ Star å’Œåˆ†äº«ï¼</p>
<h3 data-id="heading-35">ğŸ”— ç›¸å…³é“¾æ¥</h3>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Funiapp.dcloud.net.cn%2F" target="_blank" title="https://uniapp.dcloud.net.cn/" ref="nofollow noopener noreferrer">æ’ä»¶å¸‚åœºç›´è¾¾</a></li>
</ul>
<hr/>
<p><strong>å¦‚æœè¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©ï¼Œæ¬¢è¿ç‚¹èµã€æ”¶è—ã€è¯„è®ºï¼</strong> ğŸ‰</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é¸¿è’™å¼€å‘ï¼š19-æœ¬åœ°å¼€å‘é…ç½®bashç¯å¢ƒæ‰§è¡Œhvigorwå‘½ä»¤]]></title>    <link>https://juejin.cn/post/7572413448942288923</link>    <guid>https://juejin.cn/post/7572413448942288923</guid>    <pubDate>2025-11-14T16:17:33.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572413448942288923" data-draft-id="7572413448942190619" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é¸¿è’™å¼€å‘ï¼š19-æœ¬åœ°å¼€å‘é…ç½®bashç¯å¢ƒæ‰§è¡Œhvigorwå‘½ä»¤"/> <meta itemprop="keywords" content="å‰ç«¯,HarmonyOS"/> <meta itemprop="datePublished" content="2025-11-14T16:17:33.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="kangyouwei"/> <meta itemprop="url" content="https://juejin.cn/user/4054654615822135"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é¸¿è’™å¼€å‘ï¼š19-æœ¬åœ°å¼€å‘é…ç½®bashç¯å¢ƒæ‰§è¡Œhvigorwå‘½ä»¤
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4054654615822135/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    kangyouwei
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-14T16:17:33.000Z" title="Fri Nov 14 2025 16:17:33 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æœ¬åœ°å¼€å‘é…ç½®bashç¯å¢ƒæ‰§è¡Œhvigorwå‘½ä»¤</h2>
<p>åœ¨å¼€å‘ä¸­ï¼Œéš¾å…å’Œè„šæœ¬æ‰“äº¤é“ï¼Œåœ¨æœ¬åœ°è°ƒè¯•å°±æ˜¾å¾—å°¤ä¸ºé‡è¦ï¼ŒLinuxç¯å¢ƒè¿˜å¥½ï¼Œåœ¨windowç¯å¢ƒä¸­ï¼Œå¦‚ä½•é…ç½®æœ¬åœ°<code>bash</code>ç¯å¢ƒã€‚</p>
<p>æœ€è¿‘ä¸€ç›´åœ¨è„šæœ¬æ‰“åŒ…ï¼Œä¸ºä»€ä¹ˆçªç„¶å¯¹è„šæœ¬æ„Ÿå…´è¶£å‘¢ï¼ŒçœŸä¸æ˜¯æˆ‘è‡ªæ„¿çš„ï¼ŒåŸå› å°±æ˜¯ï¼š<code>har</code>åŒ…ä½œä¸ºé¸¿è’™å¼€å‘ä¸­çš„é™æ€å…±äº«åŒ…ï¼Œæ˜¯ç†æƒ³çš„åŠŸèƒ½æ‹†åˆ†å•å…ƒï¼Œæ‰€ä»¥<code>har</code>åŒ…ä¾èµ–<code>har</code>åŒ…æ˜¯ä¸€ä»¶å¾ˆæ­£å¸¸çš„äº‹å§ï¼Œæ²¡é”™ï¼Œæˆ‘ä¹Ÿæ˜¯è¿™ä¹ˆæƒ³çš„ï¼Œä½†é—æ†¾çš„æ˜¯ç›®å‰é¸¿è’™çš„IDEï¼ˆDevEco Studioï¼‰å®ƒä¸æ”¯æŒæŠŠä¾èµ–ä¸€èµ·æ‰“è¿›å»ï¼Œæ²¡åŠæ³•ï¼Œé†‹éƒ½å€’ç¢Ÿå­é‡Œäº†ï¼Œé¥ºå­å¾—åŒ…å§ï¼Œæ‰€ä»¥å°±åªèƒ½æ¥ç‚¹å¥‡æ·«æŠ€å·§ã€‚</p>
<p>è¨€å½’æ­£ä¼ ï¼Œæˆ‘æ˜¯winå…šï¼Œè€Œä¸”åªæœ‰winçš„ç”µè„‘ï¼Œæ€ä¹ˆè·‘bashå‘¢ï¼Ÿ</p>
<h4 data-id="heading-1">1.é…ç½®bashç¯å¢ƒ</h4>
<p>ä¸¤ä¸ªæ–¹æ³•ï¼š</p>
<ol>
<li>å®‰è£…WSL</li>
<li>å®‰è£…Gitï¼ˆå¾ˆæ˜æ˜¾ï¼Œæˆ‘é€‰äº†å®ƒï¼‰</li>
</ol>
<p>å…‰å®‰è£…è¿˜ä¸å¤Ÿï¼Œä¸ç„¶ä½ ä¼šæ”¶è·è¿™ä¸ªï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ca1ee4c172184dce9919588f16d2fc38~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAga2FuZ3lvdXdlaQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763741853&amp;x-signature=syuRCens8ILx38SzjV8TZYWZ664%3D" alt="image.png" loading="lazy"/></p>
<p>æ‰¾åˆ°ä½ çš„<code>Git</code>å®‰è£…ç›®å½•ä¸‹çš„<code>bin</code>ç›®å½•ï¼Œ<code>bash</code>å°±åœ¨é‚£é‡Œï¼Œåªéœ€è¦æŠŠå®ƒçš„è·¯å¾„é…ç½®åˆ°ç¯å¢ƒå˜é‡<code>Path</code>ä¸­å³å¯</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ce6545f68ac44dc9ab3eb2b959fc7e18~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAga2FuZ3lvdXdlaQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763741853&amp;x-signature=C8L6E7ijScuPzgZvVwqQ1meWw5M%3D" alt="image.png" loading="lazy"/></p>
<p>é…ç½®å®Œï¼Œä½¿ç”¨IDEåˆ™è¦å…³é—­åé‡æ–°æ‰“å¼€</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/076bc57da5784407a389a4c8fcd6185a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAga2FuZ3lvdXdlaQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763741853&amp;x-signature=6SL8DV65L7t94dThgFzRs2ggshI%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-2">2.å¦‚ä½•åœ¨bashä¸­è¿è¡Œhvigorå‘½ä»¤</h4>
<p>æˆ‘ä»¬æ­£å¸¸åœ¨IDEå‘½ä»¤çª—å£æ‰§è¡Œ<code>hvigorw -v</code>å‘½ä»¤ï¼Œæ˜¯å¯ä»¥æ‰§è¡Œçš„ï¼Œä½†æ˜¯è¿›å…¥<code>bash</code>ä¸­æ­¤å‘½ä»¤å°±æ— æ³•æ‰§è¡Œï¼Œè„šæœ¬ä¸­å°±æ— æ³•æ‰§è¡Œæ‰“åŒ…å‘½ä»¤ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/49593c45941848d6b00d75c8e24649cd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAga2FuZ3lvdXdlaQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763741853&amp;x-signature=VWXfymu3cmQCbA2DNcjuVKnhzgw%3D" alt="image.png" loading="lazy"/></p>
<p>IDEé»˜è®¤ä½¿ç”¨çš„<code>node</code>æ˜¯IDEè‡ªå¸¦çš„ï¼Œè€Œä¸”çœ‹è·¯å¾„æ˜¯æ²¡æœ‰é—®é¢˜çš„</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e8ff5f145f20464a972f94ef464528c0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAga2FuZ3lvdXdlaQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763741853&amp;x-signature=xE0mGG4oNuuHBvHjwYMv1X6CwjM%3D" alt="image.png" loading="lazy"/></p>
<p><strong>ä¸­é—´çœç•¥ä¸€ä¸‡å­—....ï¼Œæ‡‚çš„éƒ½æ‡‚ï¼Œæˆ‘ä»¬ç›´æ¥è¯´è¯¥å¦‚ä½•è§£å†³</strong></p>
<p>è§£å†³åŠæ³•ï¼Œåœ¨IDEè‡ªå¸¦çš„<code>node</code>å®‰è£…ç›®å½•ä¸­ï¼Œæ–°å»º<code>bin</code>ç›®å½•ï¼Œå°†<code>node</code>ä¸­çš„å…¶ä»–æ–‡ä»¶å¤åˆ¶ä¸€ä»½åˆ°<code>bin</code>ç›®å½•å³å¯ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fe2e4fa1398a497fbf4ff9cdd4f16810~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAga2FuZ3lvdXdlaQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763741853&amp;x-signature=Do%2F1j3ZjziHWEdH%2Bwrd4gemaaJU%3D" alt="image.png" loading="lazy"/></p>
<p>çœ‹æ•ˆæœï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/81cf07e0b21344589a26491e9fee205a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAga2FuZ3lvdXdlaQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763741853&amp;x-signature=ypXa8bC5BghnadzJOTkyET3YymY%3D" alt="image.png" loading="lazy"/></p>
<p>å†è¯´åŸå› ï¼šæ’æŸ¥çš„åŸå› å°±æ˜¯åœ¨<code>hvigor</code>å·¥å…·æ‰§è¡Œå‘½ä»¤æ—¶ï¼Œä¼šæ‰¾<code>nodejs</code>ï¼Œè€Œå®ƒæ‰¾åˆ°ä½ é…ç½®çš„<code>NODE_HOME</code>è·¯å¾„åï¼Œä¼šè‡ªåŠ¨ç»™åé¢æ·»åŠ ä¸€ä¸ª<code>/bin</code>è·¯å¾„ï¼Œå°±æ˜¯è¿™ä¹ˆæ‰¯æ·¡ï¼Œå¯èƒ½æ˜¯ä»¥å‰è€ç‰ˆæœ¬çš„<code>nodejs</code>éƒ½æœ‰<code>bin</code>ï¼Œè€Œå®ƒè¿˜æ²¡æœ‰æ”¹è¿‡æ¥ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/86ee1f171f174167be0bbf6f1b145930~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAga2FuZ3lvdXdlaQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763741853&amp;x-signature=1KZ%2BWiJvjFKhyzYReH1gNJ3HyUU%3D" alt="Snipaste_2024-06-29_20-31-00.png" loading="lazy"/></p>
<p>è‡³æ­¤ï¼Œä½ å¯ä»¥å¼€å§‹ä½ çš„éšæ€§è¡¨æ¼”äº†ã€‚</p>
<p><strong>è€é“ä»¬ï¼Œç‚¹ä¸ªèµå§ï¼ï¼ï¼</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Python 3.12æ–°ç‰¹æ€§å®æˆ˜ï¼š5ä¸ªè®©ä½ çš„ä»£ç æ•ˆç‡ç¿»å€çš„éšè—æŠ€å·§ï¼]]></title>    <link>https://juejin.cn/post/7572524368875651107</link>    <guid>https://juejin.cn/post/7572524368875651107</guid>    <pubDate>2025-11-15T00:16:40.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572524368875651107" data-draft-id="7572408522437853219" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Python 3.12æ–°ç‰¹æ€§å®æˆ˜ï¼š5ä¸ªè®©ä½ çš„ä»£ç æ•ˆç‡ç¿»å€çš„éšè—æŠ€å·§ï¼"/> <meta itemprop="keywords" content="åç«¯,å‰ç«¯,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-11-15T00:16:40.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="IT_é™ˆå¯’"/> <meta itemprop="url" content="https://juejin.cn/user/1638743356481367"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Python 3.12æ–°ç‰¹æ€§å®æˆ˜ï¼š5ä¸ªè®©ä½ çš„ä»£ç æ•ˆç‡ç¿»å€çš„éšè—æŠ€å·§ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1638743356481367/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    IT_é™ˆå¯’
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-15T00:16:40.000Z" title="Sat Nov 15 2025 00:16:40 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>Python 3.12æ–°ç‰¹æ€§å®æˆ˜ï¼š5ä¸ªè®©ä½ çš„ä»£ç æ•ˆç‡ç¿»å€çš„éšè—æŠ€å·§ï¼</strong></h2>
<h2 data-id="heading-1">å¼•è¨€</h2>
<p>Python 3.12ä½œä¸ºPythonè¯­è¨€çš„æœ€æ–°ç‰ˆæœ¬ï¼Œå¸¦æ¥äº†è®¸å¤šä»¤äººå…´å¥‹çš„æ–°ç‰¹æ€§å’Œä¼˜åŒ–ã€‚è™½ç„¶å®˜æ–¹æ–‡æ¡£ä¸­å·²ç»åˆ—å‡ºäº†ä¸»è¦çš„å˜åŒ–ï¼Œä½†å…¶ä¸­ä¸€äº›éšè—çš„æŠ€å·§å’Œç‰¹æ€§å¾€å¾€è¢«å¼€å‘è€…å¿½è§†ã€‚è¿™äº›ç‰¹æ€§ä¸ä»…èƒ½æ˜¾è‘—æå‡ä»£ç çš„è¿è¡Œæ•ˆç‡ï¼Œè¿˜èƒ½è®©ä»£ç æ›´åŠ ç®€æ´ã€æ˜“è¯»ã€‚æœ¬æ–‡å°†æ·±å…¥æ¢è®¨Python 3.12ä¸­5ä¸ªé²œä¸ºäººçŸ¥ä½†æå…¶å®ç”¨çš„æŠ€å·§ï¼Œå¸®åŠ©ä½ åœ¨å®é™…å¼€å‘ä¸­äº‹åŠåŠŸå€ã€‚</p>
<p>æœ¬æ–‡å°†æ¶µç›–ä»¥ä¸‹å†…å®¹ï¼š</p>
<ol>
<li><strong>æ›´å¿«çš„è§£é‡Šå™¨å¯åŠ¨æ—¶é—´</strong>ï¼šåˆ©ç”¨<code>-X frozen_modules</code>åŠ é€Ÿè„šæœ¬å¯åŠ¨ã€‚</li>
<li><strong>æ”¹è¿›çš„é”™è¯¯æ¶ˆæ¯</strong>ï¼šæ›´ç²¾å‡†çš„è¯­æ³•é”™è¯¯å®šä½ã€‚</li>
<li><strong>PEP 701ï¼šå½¢å¼åŒ–f-stringè¯­æ³•</strong>ï¼šè§£é”f-stringçš„æ›´å¤šå¯èƒ½æ€§ã€‚</li>
<li><strong>PEP 684ï¼šå…GILçš„å­è§£é‡Šå™¨</strong>ï¼šå¹¶è¡Œè®¡ç®—çš„æœªæ¥ã€‚</li>
<li><strong>æ€§èƒ½ä¼˜åŒ–çš„å†…ç½®å‡½æ•°</strong>ï¼š<code>math.prod()</code>å’Œ<code>itertools.batched()</code>çš„å¦™ç”¨ã€‚</li>
</ol>
<p>æ¯ä¸ªæŠ€å·§éƒ½å°†é€šè¿‡å®é™…ä»£ç ç¤ºä¾‹å’Œæ€§èƒ½å¯¹æ¯”æ¥å±•ç¤ºå…¶ä¼˜åŠ¿ï¼Œè®©ä½ çœŸæ­£æŒæ¡è¿™äº›é«˜æ•ˆçš„ç¼–ç¨‹æ–¹æ³•ã€‚</p>
<hr/>
<h2 data-id="heading-2">1. æ›´å¿«çš„è§£é‡Šå™¨å¯åŠ¨æ—¶é—´ï¼š<code>-X frozen_modules</code></h2>
<h3 data-id="heading-3">èƒŒæ™¯</h3>
<p>Pythonè§£é‡Šå™¨çš„å¯åŠ¨æ—¶é—´ä¸€ç›´æ˜¯å°å‹è„šæœ¬çš„æ€§èƒ½ç“¶é¢ˆä¹‹ä¸€ã€‚åœ¨Python 3.12ä¸­ï¼Œå¼•å…¥äº†ä¸€ä¸ªæ–°çš„å‘½ä»¤è¡Œé€‰é¡¹<code>-X frozen_modules</code>ï¼Œå¯ä»¥æ˜¾è‘—å‡å°‘è§£é‡Šå™¨çš„å¯åŠ¨æ—¶é—´ã€‚</p>
<h3 data-id="heading-4">åŸç†</h3>
<p>Pythonçš„æ ‡å‡†åº“æ¨¡å—åœ¨è§£é‡Šå™¨å¯åŠ¨æ—¶ä¼šè¿›è¡Œåˆå§‹åŒ–ã€‚ä¼ ç»Ÿä¸Šï¼Œè¿™äº›æ¨¡å—æ˜¯ä»¥<code>.py</code>æ–‡ä»¶çš„å½¢å¼åŠ¨æ€åŠ è½½çš„ã€‚è€Œåœ¨Python 3.12ä¸­ï¼Œè¿™äº›æ¨¡å—å¯ä»¥è¢«â€œå†»ç»“â€ï¼ˆç¼–è¯‘ä¸ºå­—èŠ‚ç å¹¶åµŒå…¥è§£é‡Šå™¨ï¼‰ï¼Œä»è€Œè·³è¿‡æ–‡ä»¶ç³»ç»Ÿçš„I/Oæ“ä½œã€‚</p>
<h3 data-id="heading-5">å®æˆ˜</h3>
<p>é€šè¿‡ä»¥ä¸‹å‘½ä»¤è¿è¡Œè„šæœ¬ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">python -X frozen_modules=on your_script.py
</code></pre>
<h4 data-id="heading-6">æ€§èƒ½å¯¹æ¯”</h4>
<p>æˆ‘ä»¬ç”¨ä¸€ä¸ªç®€å•çš„è„šæœ¬æµ‹è¯•å¯åŠ¨æ—¶é—´ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># test_startup.py</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"Hello, Python 3.12!"</span>)
</code></pre>
<ul>
<li>
<p><strong>æ— å†»ç»“æ¨¡å—</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">time python3.11 test_startup.py
</code></pre>
<p>å¹³å‡è€—æ—¶ï¼š45ms</p>
</li>
<li>
<p><strong>å†»ç»“æ¨¡å—å¯ç”¨</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">time python3.12 -X frozen_modules=on test_startup.py
</code></pre>
<p>å¹³å‡è€—æ—¶ï¼š28ms</p>
</li>
</ul>
<p>é€Ÿåº¦æå‡äº†çº¦38%ï¼</p>
<h3 data-id="heading-7">é€‚ç”¨åœºæ™¯</h3>
<ul>
<li>éœ€è¦é¢‘ç¹å¯åŠ¨çŸ­ç”Ÿå‘½å‘¨æœŸè„šæœ¬çš„åœºæ™¯ï¼ˆå¦‚CLIå·¥å…·ï¼‰ã€‚</li>
<li>CI/CDæµæ°´çº¿ä¸­çš„æµ‹è¯•è„šæœ¬ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-8">2. æ”¹è¿›çš„é”™è¯¯æ¶ˆæ¯ï¼šæ›´ç²¾å‡†çš„è¯­æ³•é”™è¯¯å®šä½</h2>
<h3 data-id="heading-9">èƒŒæ™¯</h3>
<p>Pythonä¸€ç›´å› å‹å¥½çš„é”™è¯¯æ¶ˆæ¯è‘—ç§°ï¼Œä½†åœ¨æŸäº›å¤æ‚æƒ…å†µä¸‹ï¼ˆå¦‚å¤šå±‚æ‹¬å·åµŒå¥—ï¼‰ï¼Œé”™è¯¯å®šä½ä»ç„¶ä¸å¤Ÿç²¾ç¡®ã€‚Python 3.12è¿›ä¸€æ­¥æ”¹è¿›äº†è¿™ä¸€ç‚¹ã€‚</p>
<h3 data-id="heading-10">å®æˆ˜ç¤ºä¾‹</h3>
<p>è€ƒè™‘ä»¥ä¸‹æœ‰è¯­æ³•é”™è¯¯çš„ä»£ç ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">foo</span>():
    x = [<span class="hljs-number">1</span>, 
         <span class="hljs-number">2</span>,
         <span class="hljs-number">3</span>}
</code></pre>
<h4 data-id="heading-11">Python 3.11çš„é”™è¯¯æ¶ˆæ¯ï¼š</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title class_">SyntaxError</span>: invalid syntax
</code></pre>
<h4 data-id="heading-12">Python 3.12çš„é”™è¯¯æ¶ˆæ¯ï¼š</h4>
<pre><code class="hljs language-arduino" lang="arduino">SyntaxError: closing parenthesis <span class="hljs-string">'}'</span> does <span class="hljs-keyword">not</span> match opening parenthesis <span class="hljs-string">'['</span> on line X
</code></pre>
<p>æ–°ç‰ˆé”™è¯¯æ¶ˆæ¯ç›´æ¥æŒ‡å‡ºäº†é—®é¢˜çš„æ ¹æºâ€”â€”ä¸åŒ¹é…çš„å¤§æ‹¬å·ã€‚</p>
<h3 data-id="heading-13">Deep Dive</h3>
<p>è¿™ä¸€æ”¹è¿›æ˜¯é€šè¿‡é‡æ„è§£æå™¨çš„é”™è¯¯æ¢å¤æœºåˆ¶å®ç°çš„ã€‚ç°åœ¨è§£æå™¨ä¼šå°è¯•ç»§ç»­åˆ†æä»£ç ä»¥æä¾›æ›´å¤šä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚</p>
<hr/>
<h2 data-id="heading-14">3. PEP 701ï¼šå½¢å¼åŒ–f-stringè¯­æ³•</h2>
<h3 data-id="heading-15">Background</h3>
<p>f-stringè‡ªPython 3.6å¼•å…¥ä»¥æ¥å·²æˆä¸ºå­—ç¬¦ä¸²æ ¼å¼åŒ–çš„é¦–é€‰æ–¹å¼ï¼Œä½†å…¶å®ç°ä¸€ç›´åŸºäºä¸´æ—¶è§£å†³æ–¹æ¡ˆã€‚PEPÂ 701æ­£å¼å®šä¹‰äº†f-stringçš„è¯­æ³•è§„åˆ™ï¼Œå¹¶è§£é”äº†æ­¤å‰è¢«ç¦æ­¢çš„ä¸€äº›ç”¨æ³•ã€‚</p>
<h3 data-id="heading-16">New Capabilities</h3>
<h4 data-id="heading-17">a) Reusing Quotes Inside Expressions:</h4>
<p>Now you can write:</p>
<pre><code class="hljs language-python" lang="python">name = <span class="hljs-string">"Alice"</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"Hello <span class="hljs-subst">{name.split(<span class="hljs-string">'l'</span>)}</span>!"</span>)
</code></pre>
<p>Previously this would raise <code>SyntaxError</code>.</p>
<h4 data-id="heading-18">b) Multiline Expressions:</h4>
<pre><code class="hljs language-python" lang="python">message = (
    <span class="hljs-string">f"User: <span class="hljs-subst">{user.name}</span>\n"</span>
    <span class="hljs-string">f"Age: <span class="hljs-subst">{user.age}</span>\n"</span>
    <span class="hljs-string">f"Score: <span class="hljs-subst">{calculate_score(user)}</span>"</span>
)
</code></pre>
<h4 data-id="heading-19">c) Comments Inside Expressions:</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-built_in">print</span>(<span class="hljs-string">f"Total: <span class="hljs-subst">{
    <span class="hljs-built_in">sum</span>(items) # expensive operation!
}</span>"</span>)
</code></pre>
<hr/>
<h2 data-id="heading-20">Conclusion</h2>
<p>These five hidden gems in PythonÂ 3.12 demonstrate the language's continued evolution toward both performance and usability:</p>
<p>1ï¸âƒ£ Startup time optimizations (<code>-X frozen_modules</code>)<br/>
2ï¸âƒ£ More helpful error messages<br/>
3ï¸âƒ£ Formalized f-string syntax (PEPÂ 701)<br/>
4ï¸âƒ£ Per-interpreter GIL (PEPÂ 684)<br/>
5ï¸âƒ£ Optimized builtins (<code>math.prod()</code>, <code>itertools.batched()</code>)</p>
<p>By incorporating these features into your daily coding practice, you'll write more efficient and maintainable Python code while future-proofing your projects.</p>
<p>The key takeaway? Always read the "What's New" documentation thoroughlyâ€”you might find game-changing optimizations hiding in plain sight!</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Redisï¼ˆ124ï¼‰Redisåœ¨ç”µå•†ç³»ç»Ÿä¸­çš„åº”ç”¨æœ‰å“ªäº›ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7572390974460329984</link>    <guid>https://juejin.cn/post/7572390974460329984</guid>    <pubDate>2025-11-14T23:42:43.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572390974460329984" data-draft-id="7572524368875634723" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Redisï¼ˆ124ï¼‰Redisåœ¨ç”µå•†ç³»ç»Ÿä¸­çš„åº”ç”¨æœ‰å“ªäº›ï¼Ÿ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-14T23:42:43.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Victor356"/> <meta itemprop="url" content="https://juejin.cn/user/3492507879476878"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Redisï¼ˆ124ï¼‰Redisåœ¨ç”µå•†ç³»ç»Ÿä¸­çš„åº”ç”¨æœ‰å“ªäº›ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3492507879476878/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Victor356
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-14T23:42:43.000Z" title="Fri Nov 14 2025 23:42:43 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ç”µå•†ç³»ç»Ÿä¸­ï¼ŒRedis å¸¸å¸¸è¢«ç”¨æ¥å®ç°é«˜æ€§èƒ½å’Œé«˜å¯ç”¨æ€§çš„ä¸€äº›å…³é”®åŠŸèƒ½ã€‚ä»¥ä¸‹æ˜¯ Redis åœ¨ç”µå•†ç³»ç»Ÿä¸­çš„ä¸€äº›å¸¸è§åº”ç”¨åœºæ™¯ï¼Œå¹¶ç»“åˆ Java ä»£ç ç¤ºä¾‹æ¥è¯¦ç»†ä»‹ç»è¿™äº›åº”ç”¨ã€‚</p>
<h3 data-id="heading-0">1. å•†å“è¯¦æƒ…ç¼“å­˜</h3>
<p>ä¸ºäº†æé«˜å•†å“è¯¦æƒ…é¡µé¢çš„å“åº”é€Ÿåº¦ï¼Œé€šå¸¸ä¼šå°†å•†å“è¯¦æƒ…ç¼“å­˜åˆ° Redis ä¸­ï¼Œä»è€Œå‡å°‘å¯¹æ•°æ®åº“çš„ç›´æ¥è®¿é—®ã€‚</p>
<h4 data-id="heading-1">ç¤ºä¾‹ä»£ç </h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> redis.clients.jedis.Jedis;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ProductCacheExample</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Jedis</span>(<span class="hljs-string">"localhost"</span>, <span class="hljs-number">6379</span>)) {
            <span class="hljs-type">String</span> <span class="hljs-variable">productId</span> <span class="hljs-operator">=</span> <span class="hljs-string">"12345"</span>;
            <span class="hljs-type">String</span> <span class="hljs-variable">cacheKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">"product:"</span> + productId;
            
            <span class="hljs-comment">// å°è¯•ä» Redis ç¼“å­˜ä¸­è·å–äº§å“è¯¦æƒ…</span>
            <span class="hljs-type">String</span> <span class="hljs-variable">cachedProduct</span> <span class="hljs-operator">=</span> jedis.get(cacheKey);
            <span class="hljs-keyword">if</span> (cachedProduct != <span class="hljs-literal">null</span>) {
                System.out.println(<span class="hljs-string">"Cache hit: "</span> + cachedProduct);
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-comment">// æ¨¡æ‹Ÿæ•°æ®åº“æŸ¥è¯¢</span>
                <span class="hljs-type">String</span> <span class="hljs-variable">dbProduct</span> <span class="hljs-operator">=</span> queryDatabaseForProduct(productId);
                
                <span class="hljs-comment">// å°†ç»“æœå­˜å…¥ Redis ç¼“å­˜ï¼Œè®¾ç½®è¿‡æœŸæ—¶é—´ä¸º 60 åˆ†é’Ÿ</span>
                jedis.setex(cacheKey, <span class="hljs-number">3600</span>, dbProduct);
                System.out.println(<span class="hljs-string">"Cache miss: "</span> + dbProduct);
            }
        }
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">queryDatabaseForProduct</span><span class="hljs-params">(String productId)</span> {
        <span class="hljs-comment">// æ¨¡æ‹Ÿæ•°æ®åº“æŸ¥è¯¢</span>
        <span class="hljs-keyword">return</span> <span class="hljs-string">"{ \"id\": \"12345\", \"name\": \"Sample Product\", \"price\": \"100\" }"</span>;
    }
}
</code></pre>
<h3 data-id="heading-2">2. è´­ç‰©è½¦</h3>
<p>è´­ç‰©è½¦çš„å®ç°å¯ä»¥åˆ©ç”¨ Redis çš„æ•°æ®ç»“æ„æ¥å®ç°é«˜æ•ˆçš„è¯»å†™æ“ä½œï¼Œä¿è¯ç”¨æˆ·æ“ä½œçš„å®æ—¶æ€§ã€‚</p>
<h4 data-id="heading-3">ç¤ºä¾‹ä»£ç </h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> redis.clients.jedis.Jedis;
<span class="hljs-keyword">import</span> redis.clients.jedis.Transaction;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ShoppingCartExample</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Jedis</span>(<span class="hljs-string">"localhost"</span>, <span class="hljs-number">6379</span>)) {
            <span class="hljs-type">String</span> <span class="hljs-variable">userId</span> <span class="hljs-operator">=</span> <span class="hljs-string">"user123"</span>;
            <span class="hljs-type">String</span> <span class="hljs-variable">cartKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">"cart:"</span> + userId;
            
            <span class="hljs-comment">// æ·»åŠ å•†å“åˆ°è´­ç‰©è½¦</span>
            addItemToCart(jedis, cartKey, <span class="hljs-string">"item1"</span>, <span class="hljs-number">2</span>);
            addItemToCart(jedis, cartKey, <span class="hljs-string">"item2"</span>, <span class="hljs-number">3</span>);
            
            <span class="hljs-comment">// æŸ¥çœ‹è´­ç‰©è½¦å†…å®¹</span>
            System.out.println(<span class="hljs-string">"Shopping cart contents: "</span> + jedis.hgetAll(cartKey));
        }
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addItemToCart</span><span class="hljs-params">(Jedis jedis, String cartKey, String itemId, <span class="hljs-type">int</span> quantity)</span> {
        jedis.hincrBy(cartKey, itemId, quantity);
    }
}
</code></pre>
<h3 data-id="heading-4">3. æµè§ˆè®°å½•</h3>
<p>ç”µå•†ç³»ç»Ÿä¸­éœ€è¦è®°å½•ç”¨æˆ·çš„æµè§ˆå†å²ï¼Œä»¥ä¾¿äºä¸ªæ€§åŒ–æ¨èå’Œç”¨æˆ·è¡Œä¸ºåˆ†æã€‚Redis çš„ List æ•°æ®ç»“æ„éå¸¸é€‚åˆå¤„ç†è¿™ç§åœºæ™¯ã€‚</p>
<h4 data-id="heading-5">ç¤ºä¾‹ä»£ç </h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> redis.clients.jedis.Jedis;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserBrowsingHistoryExample</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Jedis</span>(<span class="hljs-string">"localhost"</span>, <span class="hljs-number">6379</span>)) {
            <span class="hljs-type">String</span> <span class="hljs-variable">userId</span> <span class="hljs-operator">=</span> <span class="hljs-string">"user123"</span>;
            <span class="hljs-type">String</span> <span class="hljs-variable">historyKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">"history:"</span> + userId;
            
            <span class="hljs-comment">// æ·»åŠ æµè§ˆè®°å½•</span>
            addBrowsingHistory(jedis, historyKey, <span class="hljs-string">"product123"</span>);
            addBrowsingHistory(jedis, historyKey, <span class="hljs-string">"product456"</span>);
            addBrowsingHistory(jedis, historyKey, <span class="hljs-string">"product789"</span>);
            
            <span class="hljs-comment">// æŸ¥çœ‹æœ€è¿‘çš„æµè§ˆè®°å½•</span>
            System.out.println(<span class="hljs-string">"Browsing history: "</span> + jedis.lrange(historyKey, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>));
        }
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addBrowsingHistory</span><span class="hljs-params">(Jedis jedis, String historyKey, String productId)</span> {
        jedis.lpush(historyKey, productId);
        <span class="hljs-comment">// é™å®šåªä¿ç•™æœ€è¿‘çš„ 10 æ¡è®°å½•</span>
        jedis.ltrim(historyKey, <span class="hljs-number">0</span>, <span class="hljs-number">9</span>);
    }
}
</code></pre>
<h3 data-id="heading-6">4. ç§’æ€ç³»ç»Ÿ</h3>
<p>ç§’æ€æ´»åŠ¨éœ€è¦å¤„ç†é«˜å¹¶å‘çš„è¯·æ±‚ï¼Œå¯ä»¥åˆ©ç”¨ Redis çš„åŸå­æ€§æ“ä½œæ¥å®ç°åº“å­˜æ‰£å‡å’Œè®¢å•åˆ›å»ºçš„é«˜æ•ˆå¤„ç†ã€‚</p>
<h4 data-id="heading-7">ç¤ºä¾‹ä»£ç </h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> redis.clients.jedis.Jedis;
<span class="hljs-keyword">import</span> redis.clients.jedis.Transaction;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SecKillExample</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">STOCK_KEY</span> <span class="hljs-operator">=</span> <span class="hljs-string">"stock:product123"</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">ORDERS_KEY</span> <span class="hljs-operator">=</span> <span class="hljs-string">"orders:product123"</span>;
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Jedis</span>(<span class="hljs-string">"localhost"</span>, <span class="hljs-number">6379</span>)) {
            <span class="hljs-comment">// åˆå§‹åŒ–åº“å­˜</span>
            jedis.set(STOCK_KEY, <span class="hljs-string">"100"</span>);
            
            <span class="hljs-comment">// æ¨¡æ‹Ÿå¤šä¸ªç”¨æˆ·å‚ä¸ç§’æ€</span>
            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">105</span>; i++) {
                <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; {
                    <span class="hljs-keyword">if</span> (attemptSecKill(jedis, <span class="hljs-string">"user"</span> + Thread.currentThread().getId())) {
                        System.out.println(<span class="hljs-string">"User "</span> + Thread.currentThread().getId() + <span class="hljs-string">" succeeded in securing item!"</span>);
                    } <span class="hljs-keyword">else</span> {
                        System.out.println(<span class="hljs-string">"User "</span> + Thread.currentThread().getId() + <span class="hljs-string">" failed to secure item."</span>);
                    }
                }).start();
            }
        }
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">attemptSecKill</span><span class="hljs-params">(Jedis jedis, String userId)</span> {
        <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
            jedis.watch(STOCK_KEY);
            <span class="hljs-type">int</span> <span class="hljs-variable">stock</span> <span class="hljs-operator">=</span> Integer.parseInt(jedis.get(STOCK_KEY));
            <span class="hljs-keyword">if</span> (stock &lt;= <span class="hljs-number">0</span>) {
                jedis.unwatch();
                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
            }
            
            <span class="hljs-type">Transaction</span> <span class="hljs-variable">transaction</span> <span class="hljs-operator">=</span> jedis.multi();
            transaction.decr(STOCK_KEY);
            transaction.sadd(ORDERS_KEY, userId);
            <span class="hljs-keyword">if</span> (transaction.exec() != <span class="hljs-literal">null</span>) {
                <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
            }
        }
    }
}
</code></pre>
<h3 data-id="heading-8">5. æ•°æ®åˆ†æ</h3>
<p>Redis å¯ä»¥ç”¨äºæ”¶é›†å®æ—¶æ•°æ®ï¼Œå¦‚ç‚¹å‡»é‡ã€é¡µé¢æµè§ˆé‡ç­‰ï¼Œå¹¶æä¾›å®æ—¶åˆ†æåŠŸèƒ½ã€‚</p>
<h4 data-id="heading-9">ç¤ºä¾‹ä»£ç </h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> redis.clients.jedis.Jedis;
<span class="hljs-keyword">import</span> java.util.HashMap;
<span class="hljs-keyword">import</span> java.util.Map;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RealTimeAnalyticsExample</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Jedis</span>(<span class="hljs-string">"localhost"</span>, <span class="hljs-number">6379</span>)) {
            <span class="hljs-type">String</span> <span class="hljs-variable">pageId</span> <span class="hljs-operator">=</span> <span class="hljs-string">"page123"</span>;
            <span class="hljs-type">String</span> <span class="hljs-variable">analyticsKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">"analytics:"</span> + pageId;
            
            <span class="hljs-comment">// æ¨¡æ‹Ÿç”¨æˆ·æµè§ˆé¡µé¢</span>
            trackPageView(jedis, analyticsKey);
            trackPageView(jedis, analyticsKey);
            trackPageView(jedis, analyticsKey);
            
            <span class="hljs-comment">// æŸ¥çœ‹é¡µé¢æµè§ˆé‡</span>
            System.out.println(<span class="hljs-string">"Page views: "</span> + jedis.get(analyticsKey));
        }
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">trackPageView</span><span class="hljs-params">(Jedis jedis, String key)</span> {
        jedis.incr(key);
    }
}
</code></pre>
<h3 data-id="heading-10">6. æ¶ˆæ¯é˜Ÿåˆ—</h3>
<p>ç”µå•†ç³»ç»Ÿä¸­å¸¸å¸¸éœ€è¦å¤„ç†å¼‚æ­¥ä»»åŠ¡ï¼Œå¦‚è®¢å•å¤„ç†ã€åº“å­˜æ›´æ–°ç­‰ã€‚å¯ä»¥ä½¿ç”¨ Redis çš„ List æ•°æ®ç»“æ„æ¥å®ç°ç®€å•çš„æ¶ˆæ¯é˜Ÿåˆ—ã€‚</p>
<h4 data-id="heading-11">ç¤ºä¾‹ä»£ç </h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> redis.clients.jedis.Jedis;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RedisQueueExample</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Jedis</span>(<span class="hljs-string">"localhost"</span>, <span class="hljs-number">6379</span>)) {
            <span class="hljs-type">String</span> <span class="hljs-variable">queueKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">"orderQueue"</span>;
            
            <span class="hljs-comment">// æ·»åŠ è®¢å•åˆ°é˜Ÿåˆ—</span>
            enqueueOrder(jedis, <span class="hljs-string">"order123"</span>);
            enqueueOrder(jedis, <span class="hljs-string">"order456"</span>);
            enqueueOrder(jedis, <span class="hljs-string">"order789"</span>);
            
            <span class="hljs-comment">// å¤„ç†è®¢å•</span>
            processOrders(jedis, queueKey);
        }
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">enqueueOrder</span><span class="hljs-params">(Jedis jedis, String orderId)</span> {
        jedis.lpush(<span class="hljs-string">"orderQueue"</span>, orderId);
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">processOrders</span><span class="hljs-params">(Jedis jedis, String queueKey)</span> {
        <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
            <span class="hljs-type">String</span> <span class="hljs-variable">orderId</span> <span class="hljs-operator">=</span> jedis.rpop(queueKey);
            <span class="hljs-keyword">if</span> (orderId != <span class="hljs-literal">null</span>) {
                System.out.println(<span class="hljs-string">"Processing order: "</span> + orderId);
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">break</span>;
            }
        }
    }
}
</code></pre>
<p>è¿™äº›ä»£ç ç¤ºä¾‹å±•ç¤ºäº† Redis åœ¨ç”µå•†ç³»ç»Ÿä¸­çš„å¤šç§åº”ç”¨æ–¹å¼ï¼Œå¸Œæœ›å¯¹æ‚¨æœ‰æ‰€å¸®åŠ©ã€‚é€šè¿‡åˆ©ç”¨ Redis çš„é«˜æ€§èƒ½å’Œä¸°å¯Œçš„æ•°æ®ç»“æ„ï¼Œç”µå•†ç³»ç»Ÿå¯ä»¥å®ç°é«˜æ•ˆçš„ç¼“å­˜ã€è´­ç‰©è½¦ç®¡ç†ã€æµè§ˆè®°å½•ã€ç§’æ€æ´»åŠ¨ã€å®æ—¶æ•°æ®åˆ†æå’Œå¼‚æ­¥ä»»åŠ¡å¤„ç†ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Redisï¼ˆ125ï¼‰Redisåœ¨ç¤¾äº¤ç½‘ç»œä¸­çš„åº”ç”¨æœ‰å“ªäº›ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7572408522437804067</link>    <guid>https://juejin.cn/post/7572408522437804067</guid>    <pubDate>2025-11-14T23:43:34.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572408522437804067" data-draft-id="7572408522437787683" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Redisï¼ˆ125ï¼‰Redisåœ¨ç¤¾äº¤ç½‘ç»œä¸­çš„åº”ç”¨æœ‰å“ªäº›ï¼Ÿ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-14T23:43:34.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Victor356"/> <meta itemprop="url" content="https://juejin.cn/user/3492507879476878"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Redisï¼ˆ125ï¼‰Redisåœ¨ç¤¾äº¤ç½‘ç»œä¸­çš„åº”ç”¨æœ‰å“ªäº›ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3492507879476878/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Victor356
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-14T23:43:34.000Z" title="Fri Nov 14 2025 23:43:34 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ç¤¾äº¤ç½‘ç»œä¸­ï¼ŒRedis è¢«å¹¿æ³›åº”ç”¨äºä»¥ä¸‹åœºæ™¯ï¼š</p>
<ol>
<li><strong>ç”¨æˆ·ä¼šè¯ç®¡ç†</strong></li>
<li><strong>å¥½å‹å…³ç³»å­˜å‚¨</strong></li>
<li><strong>æ¶ˆæ¯é˜Ÿåˆ—</strong></li>
<li><strong>æ´»åŠ¨æµ</strong></li>
<li><strong>ç‚¹èµå’Œè¯„è®ºç»Ÿè®¡</strong></li>
<li><strong>æ’è¡Œæ¦œ</strong></li>
</ol>
<p>ä¸‹é¢è¯¦ç»†ä»‹ç»è¿™äº›åº”ç”¨åœºæ™¯ï¼Œå¹¶ç»“åˆ Java ä»£ç ç¤ºä¾‹è¿›è¡Œè®²è§£ã€‚</p>
<h3 data-id="heading-0">1. ç”¨æˆ·ä¼šè¯ç®¡ç†</h3>
<p>Redis å¯ä»¥ç”¨äºç®¡ç†ç”¨æˆ·ä¼šè¯ï¼Œé€šè¿‡ Redis çš„é«˜æ•ˆæ€§å’ŒæŒä¹…åŒ–æœºåˆ¶ï¼Œèƒ½å¤Ÿå¿«é€Ÿè¯»å–å’Œå†™å…¥ä¼šè¯æ•°æ®ã€‚</p>
<h4 data-id="heading-1">ç¤ºä¾‹ä»£ç </h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> redis.clients.jedis.Jedis;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SessionManagementExample</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Jedis</span>(<span class="hljs-string">"localhost"</span>, <span class="hljs-number">6379</span>)) {
            <span class="hljs-type">String</span> <span class="hljs-variable">sessionId</span> <span class="hljs-operator">=</span> <span class="hljs-string">"session123"</span>;
            <span class="hljs-type">String</span> <span class="hljs-variable">sessionKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">"session:"</span> + sessionId;
            
            <span class="hljs-comment">// åˆ›å»ºä¼šè¯</span>
            jedis.hset(sessionKey, <span class="hljs-string">"userId"</span>, <span class="hljs-string">"user123"</span>);
            jedis.hset(sessionKey, <span class="hljs-string">"loginTime"</span>, String.valueOf(System.currentTimeMillis()));
            jedis.expire(sessionKey, <span class="hljs-number">3600</span>); <span class="hljs-comment">// è®¾ç½®ä¼šè¯æœ‰æ•ˆæœŸ 1 å°æ—¶</span>
            
            <span class="hljs-comment">// è¯»å–ä¼šè¯</span>
            System.out.println(<span class="hljs-string">"User ID: "</span> + jedis.hget(sessionKey, <span class="hljs-string">"userId"</span>));
            System.out.println(<span class="hljs-string">"Login Time: "</span> + jedis.hget(sessionKey, <span class="hljs-string">"loginTime"</span>));
        }
    }
}
</code></pre>
<h3 data-id="heading-2">2. å¥½å‹å…³ç³»å­˜å‚¨</h3>
<p>Redis çš„ Set æ•°æ®ç»“æ„éå¸¸é€‚åˆå­˜å‚¨å¥½å‹å…³ç³»ï¼Œå¯ä»¥å¿«é€Ÿåœ°è¿›è¡Œå¥½å‹æ·»åŠ ã€åˆ é™¤å’ŒæŸ¥æ‰¾ç­‰æ“ä½œã€‚</p>
<h4 data-id="heading-3">ç¤ºä¾‹ä»£ç </h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> redis.clients.jedis.Jedis;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FriendManagementExample</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Jedis</span>(<span class="hljs-string">"localhost"</span>, <span class="hljs-number">6379</span>)) {
            <span class="hljs-type">String</span> <span class="hljs-variable">userId</span> <span class="hljs-operator">=</span> <span class="hljs-string">"user123"</span>;
            <span class="hljs-type">String</span> <span class="hljs-variable">friendsKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">"friends:"</span> + userId;
            
            <span class="hljs-comment">// æ·»åŠ å¥½å‹</span>
            jedis.sadd(friendsKey, <span class="hljs-string">"user456"</span>, <span class="hljs-string">"user789"</span>);
            
            <span class="hljs-comment">// æŸ¥çœ‹å¥½å‹åˆ—è¡¨</span>
            System.out.println(<span class="hljs-string">"Friends of "</span> + userId + <span class="hljs-string">": "</span> + jedis.smembers(friendsKey));
            
            <span class="hljs-comment">// åˆ é™¤å¥½å‹</span>
            jedis.srem(friendsKey, <span class="hljs-string">"user456"</span>);
            System.out.println(<span class="hljs-string">"Friends of "</span> + userId + <span class="hljs-string">" after removal: "</span> + jedis.smembers(friendsKey));
        }
    }
}
</code></pre>
<h3 data-id="heading-4">3. æ¶ˆæ¯é˜Ÿåˆ—</h3>
<p>ä½¿ç”¨ Redis çš„ List æ•°æ®ç»“æ„æ¥å®ç°ç®€å•çš„æ¶ˆæ¯é˜Ÿåˆ—ï¼Œå¤„ç†æ¶ˆæ¯çš„å‘å¸ƒå’Œæ¶ˆè´¹ã€‚</p>
<h4 data-id="heading-5">ç¤ºä¾‹ä»£ç </h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> redis.clients.jedis.Jedis;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MessageQueueExample</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Jedis</span>(<span class="hljs-string">"localhost"</span>, <span class="hljs-number">6379</span>)) {
            <span class="hljs-type">String</span> <span class="hljs-variable">queueKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">"messageQueue"</span>;
            
            <span class="hljs-comment">// å‘å¸ƒæ¶ˆæ¯</span>
            jedis.lpush(queueKey, <span class="hljs-string">"Hello"</span>, <span class="hljs-string">"World"</span>, <span class="hljs-string">"Redis"</span>);
            
            <span class="hljs-comment">// æ¶ˆè´¹æ¶ˆæ¯</span>
            String message;
            <span class="hljs-keyword">while</span> ((message = jedis.rpop(queueKey)) != <span class="hljs-literal">null</span>) {
                System.out.println(<span class="hljs-string">"Consumed message: "</span> + message);
            }
        }
    }
}
</code></pre>
<h3 data-id="heading-6">4. æ´»åŠ¨æµ</h3>
<p>Redis å¯ä»¥ç”¨äºå­˜å‚¨å’ŒæŸ¥è¯¢ç”¨æˆ·çš„æ´»åŠ¨æµï¼Œä½¿ç”¨ Sorted Set æ•°æ®ç»“æ„æ¥è®°å½•ç”¨æˆ·çš„åŠ¨ä½œåŠå…¶æ—¶é—´æˆ³ã€‚</p>
<h4 data-id="heading-7">ç¤ºä¾‹ä»£ç </h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> redis.clients.jedis.Jedis;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ActivityStreamExample</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Jedis</span>(<span class="hljs-string">"localhost"</span>, <span class="hljs-number">6379</span>)) {
            <span class="hljs-type">String</span> <span class="hljs-variable">userId</span> <span class="hljs-operator">=</span> <span class="hljs-string">"user123"</span>;
            <span class="hljs-type">String</span> <span class="hljs-variable">activityKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">"activity:"</span> + userId;
            
            <span class="hljs-comment">// è®°å½•ç”¨æˆ·æ´»åŠ¨</span>
            jedis.zadd(activityKey, System.currentTimeMillis(), <span class="hljs-string">"Liked a post"</span>);
            jedis.zadd(activityKey, System.currentTimeMillis() + <span class="hljs-number">1000</span>, <span class="hljs-string">"Commented on a post"</span>);
            
            <span class="hljs-comment">// æŸ¥è¯¢ç”¨æˆ·æœ€è¿‘çš„æ´»åŠ¨</span>
            System.out.println(<span class="hljs-string">"User activities: "</span> + jedis.zrevrange(activityKey, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>));
        }
    }
}
</code></pre>
<h3 data-id="heading-8">5. ç‚¹èµå’Œè¯„è®ºç»Ÿè®¡</h3>
<p>ä½¿ç”¨ Redis çš„ Hash æ•°æ®ç»“æ„æ¥ç»Ÿè®¡å¸–å­æˆ–è¯„è®ºçš„ç‚¹èµå’Œè¯„è®ºæ•°é‡ã€‚</p>
<h4 data-id="heading-9">ç¤ºä¾‹ä»£ç </h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> redis.clients.jedis.Jedis;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LikeAndCommentExample</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Jedis</span>(<span class="hljs-string">"localhost"</span>, <span class="hljs-number">6379</span>)) {
            <span class="hljs-type">String</span> <span class="hljs-variable">postId</span> <span class="hljs-operator">=</span> <span class="hljs-string">"post123"</span>;
            <span class="hljs-type">String</span> <span class="hljs-variable">statsKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">"post:"</span> + postId + <span class="hljs-string">":stats"</span>;
            
            <span class="hljs-comment">// ç‚¹èµ</span>
            jedis.hincrBy(statsKey, <span class="hljs-string">"likes"</span>, <span class="hljs-number">1</span>);
            
            <span class="hljs-comment">// è¯„è®º</span>
            jedis.hincrBy(statsKey, <span class="hljs-string">"comments"</span>, <span class="hljs-number">1</span>);
            
            <span class="hljs-comment">// è·å–ç»Ÿè®¡æ•°æ®</span>
            System.out.println(<span class="hljs-string">"Likes: "</span> + jedis.hget(statsKey, <span class="hljs-string">"likes"</span>));
            System.out.println(<span class="hljs-string">"Comments: "</span> + jedis.hget(statsKey, <span class="hljs-string">"comments"</span>));
        }
    }
}
</code></pre>
<h3 data-id="heading-10">6. æ’è¡Œæ¦œ</h3>
<p>Redis çš„ Sorted Set æ•°æ®ç»“æ„éå¸¸é€‚åˆå®ç°æ’è¡Œæ¦œåŠŸèƒ½ã€‚</p>
<h4 data-id="heading-11">ç¤ºä¾‹ä»£ç </h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> redis.clients.jedis.Jedis;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LeaderboardExample</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Jedis</span>(<span class="hljs-string">"localhost"</span>, <span class="hljs-number">6379</span>)) {
            <span class="hljs-type">String</span> <span class="hljs-variable">leaderboardKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">"leaderboard"</span>;
            
            <span class="hljs-comment">// æ·»åŠ ç”¨æˆ·åˆ†æ•°</span>
            jedis.zadd(leaderboardKey, <span class="hljs-number">100</span>, <span class="hljs-string">"user123"</span>);
            jedis.zadd(leaderboardKey, <span class="hljs-number">150</span>, <span class="hljs-string">"user456"</span>);
            jedis.zadd(leaderboardKey, <span class="hljs-number">200</span>, <span class="hljs-string">"user789"</span>);
            
            <span class="hljs-comment">// è·å–æ’è¡Œæ¦œ</span>
            System.out.println(<span class="hljs-string">"Leaderboard: "</span> + jedis.zrevrangeWithScores(leaderboardKey, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>));
        }
    }
}
</code></pre>
<p>è¿™äº›ä»£ç ç¤ºä¾‹å±•ç¤ºäº† Redis åœ¨ç¤¾äº¤ç½‘ç»œä¸­çš„å¤šç§åº”ç”¨æ–¹å¼ã€‚é€šè¿‡åˆ©ç”¨ Redis çš„é«˜æ€§èƒ½å’Œä¸°å¯Œçš„æ•°æ®ç»“æ„ï¼Œç¤¾äº¤ç½‘ç»œå¯ä»¥å®ç°é«˜æ•ˆçš„ç”¨æˆ·ä¼šè¯ç®¡ç†ã€å¥½å‹å…³ç³»å­˜å‚¨ã€æ¶ˆæ¯é˜Ÿåˆ—ã€æ´»åŠ¨æµã€ç‚¹èµå’Œè¯„è®ºç»Ÿè®¡ä»¥åŠæ’è¡Œæ¦œåŠŸèƒ½ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Python ç¼–ç¨‹å®æˆ˜ Â· å®ç”¨å·¥å…·ä¸åº“ â€” Flask è·¯ç”±ä¸æ¨¡æ¿]]></title>    <link>https://juejin.cn/post/7572466174223925274</link>    <guid>https://juejin.cn/post/7572466174223925274</guid>    <pubDate>2025-11-14T22:29:14.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572466174223925274" data-draft-id="7572466174223908890" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Python ç¼–ç¨‹å®æˆ˜ Â· å®ç”¨å·¥å…·ä¸åº“ â€” Flask è·¯ç”±ä¸æ¨¡æ¿"/> <meta itemprop="keywords" content="åç«¯,å‰ç«¯,Python"/> <meta itemprop="datePublished" content="2025-11-14T22:29:14.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºå‘˜çˆ±é’“é±¼"/> <meta itemprop="url" content="https://juejin.cn/user/2799775299157614"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Python ç¼–ç¨‹å®æˆ˜ Â· å®ç”¨å·¥å…·ä¸åº“ â€” Flask è·¯ç”±ä¸æ¨¡æ¿
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2799775299157614/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºå‘˜çˆ±é’“é±¼
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-14T22:29:14.000Z" title="Fri Nov 14 2025 22:29:14 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>Flask çš„ä¸¤å¤§æ ¸å¿ƒåŠŸèƒ½ï¼š</p>
<ul>
<li><strong>è·¯ç”±ï¼ˆRoutingï¼‰</strong>ï¼šURL ä¸ Python å‡½æ•°çš„æ˜ å°„</li>
<li><strong>æ¨¡æ¿ï¼ˆTemplateï¼‰</strong>ï¼šJinja2 æ¨¡æ¿ç³»ç»Ÿï¼Œç”¨äºæ¸²æŸ“ HTML é¡µé¢</li>
</ul>
<p>ä½ ä¼šå­¦åˆ°å¦‚ä½•æ„å»ºç½‘é¡µã€ä¼ å€¼ã€æ¨¡æ¿ç»§æ‰¿ã€é™æ€æ–‡ä»¶ç­‰æ ¸å¿ƒçŸ¥è¯†ã€‚</p>
<hr/>
<h2 data-id="heading-0"><strong>ç¬¬ä¸€éƒ¨åˆ†ï¼šFlask è·¯ç”±ï¼ˆRoutingï¼‰</strong></h2>
<hr/>
<h2 data-id="heading-1"><strong>1. è·¯ç”±æ˜¯ä»€ä¹ˆï¼Ÿ</strong></h2>
<p>è·¯ç”±å®šä¹‰ URL åœ°å€åº”è¯¥ç”±å“ªä¸ªå‡½æ•°æ¥å¤„ç†ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">'/hello'</span></span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">hello</span>():
    <span class="hljs-keyword">return</span> <span class="hljs-string">"Hello Flask!"</span>
</code></pre>
<p>è®¿é—®ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">http:<span class="hljs-comment">//127.0.0.1:5000/hello</span>
</code></pre>
<hr/>
<h2 data-id="heading-2"><strong>2. åŸºæœ¬è·¯ç”±å†™æ³•</strong></h2>
<pre><code class="hljs language-python" lang="python"><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">'/'</span></span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">index</span>():
    <span class="hljs-keyword">return</span> <span class="hljs-string">"é¦–é¡µ"</span>
</code></pre>
<hr/>
<h2 data-id="heading-3"><strong>3. è·¯ç”±å‚æ•°</strong></h2>
<p>Flask å¯ä»¥åœ¨ URL ä¸­æ¥æ”¶å˜é‡ã€‚</p>
<h3 data-id="heading-4">å­—ç¬¦ä¸²å‚æ•°ï¼ˆé»˜è®¤ï¼‰</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">'/user/&lt;name&gt;'</span></span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">user</span>(<span class="hljs-params">name</span>):
    <span class="hljs-keyword">return</span> <span class="hljs-string">f"Hello, <span class="hljs-subst">{name}</span>"</span>
</code></pre>
<p>è®¿é—®ï¼š
<code>/user/Alice</code></p>
<hr/>
<h3 data-id="heading-5">è½¬æ¢å™¨ï¼ˆint / float / path ç­‰ï¼‰</h3>





























<table><thead><tr><th>ç±»å‹</th><th>ç”¨é€”</th></tr></thead><tbody><tr><td><code>string</code></td><td>é»˜è®¤ç±»å‹</td></tr><tr><td><code>int</code></td><td>æ•´æ•°</td></tr><tr><td><code>float</code></td><td>å°æ•°</td></tr><tr><td><code>path</code></td><td>åŒ…å« <code>/</code> çš„è·¯å¾„</td></tr><tr><td><code>uuid</code></td><td>UUID ç±»å‹</td></tr></tbody></table>
<p>ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">'/add/&lt;int:a&gt;/&lt;int:b&gt;'</span></span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">a, b</span>):
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">str</span>(a + b)
</code></pre>
<hr/>
<h2 data-id="heading-6"><strong>4. HTTP æ–¹æ³•é™åˆ¶ï¼ˆGET / POST ç­‰ï¼‰</strong></h2>
<pre><code class="hljs language-python" lang="python"><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">'/login'</span>, methods=[<span class="hljs-string">'GET'</span>, <span class="hljs-string">'POST'</span>]</span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">login</span>():
    <span class="hljs-keyword">return</span> <span class="hljs-string">"login"</span>
</code></pre>
<hr/>
<h2 data-id="heading-7"><strong>5. URL åå‘ç”Ÿæˆï¼ˆurl_forï¼‰</strong></h2>
<p>æ¨èä½¿ç”¨ <code>url_for()</code>ï¼Œé¿å…ç¡¬ç¼–ç  URLã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> url_for

<span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">'/home'</span></span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">home</span>():
    <span class="hljs-keyword">return</span> url_for(<span class="hljs-string">'home'</span>)   <span class="hljs-comment"># "/home"</span>
</code></pre>
<p>åœ¨æ¨¡æ¿ä¸­ä¹Ÿå¯ä»¥ä½¿ç”¨ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"{{ url_for('home') }}"</span>&gt;</span>é¦–é¡µ<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
</code></pre>
<hr/>
<h2 data-id="heading-8"><strong>ç¬¬äºŒéƒ¨åˆ†ï¼šæ¨¡æ¿ç³»ç»Ÿï¼ˆJinja2ï¼‰</strong></h2>
<p>Flask é»˜è®¤ä½¿ç”¨ Jinja2 æ¨¡æ¿å¼•æ“ï¼ŒåŠŸèƒ½å¼ºå¤§ã€å®‰å…¨ã€çµæ´»ã€‚</p>
<hr/>
<h2 data-id="heading-9"><strong>1. æ¨¡æ¿ç›®å½•ç»“æ„</strong></h2>
<p>Flask ä¼šè‡ªåŠ¨åœ¨ <code>templates/</code> ä¸­å¯»æ‰¾æ¨¡æ¿ã€‚</p>
<pre><code class="hljs language-markdown" lang="markdown">project/
  app.py
  templates/
<span class="hljs-code">    index.html
    about.html
</span></code></pre>
<hr/>
<h2 data-id="heading-10"><strong>2. æœ€ç®€å•çš„æ¨¡æ¿æ¸²æŸ“</strong></h2>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> render_template

<span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">'/page'</span></span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">page</span>():
    <span class="hljs-keyword">return</span> render_template(<span class="hljs-string">"index.html"</span>)
</code></pre>
<p><code>templates/index.html</code>ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Hello Template<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
</code></pre>
<hr/>
<h2 data-id="heading-11"><strong>3. æ¨¡æ¿å˜é‡ä¼ é€’</strong></h2>
<pre><code class="hljs language-python" lang="python"><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">'/user/&lt;name&gt;'</span></span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">user</span>(<span class="hljs-params">name</span>):
    <span class="hljs-keyword">return</span> render_template(<span class="hljs-string">"user.html"</span>, username=name)
</code></pre>
<p><code>templates/user.html</code>ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Hello {{ username }}<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
</code></pre>
<hr/>
<h2 data-id="heading-12"><strong>4. æ¨¡æ¿ä¸­çš„æ§åˆ¶è¯­å¥</strong></h2>
<h3 data-id="heading-13">æ¡ä»¶åˆ¤æ–­</h3>
<pre><code class="hljs language-html" lang="html">{% if vip %}
  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>å°Šè´µçš„VIPç”¨æˆ·<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
{% else %}
  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>æ™®é€šç”¨æˆ·<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
{% endif %}
</code></pre>
<h3 data-id="heading-14">âœ” å¾ªç¯</h3>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>
{% for item in items %}
  <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>{{ item }}<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
{% endfor %}
<span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
</code></pre>
<hr/>
<h2 data-id="heading-15"><strong>5. Jinja2 è¿‡æ»¤å™¨ï¼ˆFiltersï¼‰</strong></h2>
<p>å¸¸ç”¨è¿‡æ»¤å™¨ï¼š</p>
<pre><code class="hljs language-html" lang="html">{{ "hello"|upper }}   <span class="hljs-comment">&lt;!-- HELLO --&gt;</span>
{{ 3.14159|round(2) }} <span class="hljs-comment">&lt;!-- 3.14 --&gt;</span>
</code></pre>
<hr/>
<h2 data-id="heading-16"><strong>6. æ¨¡æ¿ç»§æ‰¿ï¼ˆæ¨èï¼‰</strong></h2>
<p>éå¸¸å¼ºå¤§ï¼Œå¯ä»¥é¿å…é‡å¤ HTMLã€‚</p>
<h3 data-id="heading-17">âœ” base.htmlï¼ˆæ¯ç‰ˆæ¨¡æ¿ï¼‰</h3>
<p><code>templates/base.html</code>ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>{% block title %}Flask Demo{% endblock %}<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"content"</span>&gt;</span>
        {% block content %}{% endblock %}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<h3 data-id="heading-18">å­æ¨¡æ¿ç»§æ‰¿</h3>
<p><code>templates/index.html</code>ï¼š</p>
<pre><code class="hljs language-html" lang="html">{% extends "base.html" %}

{% block title %}é¦–é¡µ{% endblock %}

{% block content %}
<span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>æ¬¢è¿æ¥åˆ°é¦–é¡µ<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
{% endblock %}
</code></pre>
<hr/>
<h2 data-id="heading-19"><strong>7. é™æ€æ–‡ä»¶ä½¿ç”¨ï¼ˆCSS/JS/å›¾ç‰‡ï¼‰</strong></h2>
<p>é»˜è®¤ç›®å½•ï¼š<code>static/</code></p>
<pre><code class="hljs language-arduino" lang="arduino">project/
  <span class="hljs-type">static</span>/
    style.css
</code></pre>
<p>æ¨¡æ¿ä¸­ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"{{ url_for('static', filename='style.css') }}"</span>&gt;</span>
</code></pre>
<hr/>
<h2 data-id="heading-20"><strong>8. å°†æ•°æ®ä¼ ç»™å‰ç«¯æ¨¡æ¿ï¼ˆç»¼åˆç¤ºä¾‹ï¼‰</strong></h2>
<p><code>app.py</code>ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">'/products'</span></span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">products</span>():
    items = [<span class="hljs-string">"ç”µè„‘"</span>, <span class="hljs-string">"æ‰‹æœº"</span>, <span class="hljs-string">"è€³æœº"</span>]
    <span class="hljs-keyword">return</span> render_template(<span class="hljs-string">"products.html"</span>, items=items, vip=<span class="hljs-literal">True</span>)
</code></pre>
<p><code>products.html</code>ï¼š</p>
<pre><code class="hljs language-html" lang="html">{% extends "base.html" %}

{% block content %}
    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>å•†å“åˆ—è¡¨<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>
    {% for item in items %}
        <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>{{ item }}<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
    {% endfor %}
    <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>

    {% if vip %}
        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>VIPç”¨æˆ·äº«å—9æŠ˜ä¼˜æƒ ï¼<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    {% endif %}
{% endblock %}
</code></pre>
<hr/>
<h2 data-id="heading-21"><strong>æ€»ç»“</strong></h2>
<p>ä½ å·²ç»æŒæ¡äº† Flask Web å¼€å‘çš„æ ¸å¿ƒï¼š</p>
<h3 data-id="heading-22">âœ” è·¯ç”±ç³»ç»Ÿ</h3>
<ul>
<li>å®šä¹‰ URL</li>
<li>è·¯ç”±å‚æ•°</li>
<li>HTTP æ–¹æ³•</li>
<li><code>url_for</code> åå‘è§£æ</li>
</ul>
<h3 data-id="heading-23">âœ” æ¨¡æ¿ç³»ç»Ÿï¼ˆJinja2ï¼‰</h3>
<ul>
<li>åŠ è½½æ¨¡æ¿</li>
<li>ä¼ é€’å˜é‡</li>
<li>æ¡ä»¶ / å¾ªç¯</li>
<li>æ¨¡æ¿ç»§æ‰¿</li>
<li>é™æ€æ–‡ä»¶åŠ è½½</li>
</ul>
<p><strong>å®Œå…¨å¯ä»¥å¼€å‘ä¸€ä¸ªå°å‹çš„ Web ç½‘ç«™æˆ–ç®¡ç†åå°äº†ï¼</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Python ç¼–ç¨‹å®æˆ˜ Â· å®ç”¨å·¥å…·ä¸åº“ â€” Django é¡¹ç›®ç»“æ„ç®€ä»‹]]></title>    <link>https://juejin.cn/post/7572463549055483954</link>    <guid>https://juejin.cn/post/7572463549055483954</guid>    <pubDate>2025-11-14T22:29:55.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572463549055483954" data-draft-id="7572437226022977546" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Python ç¼–ç¨‹å®æˆ˜ Â· å®ç”¨å·¥å…·ä¸åº“ â€” Django é¡¹ç›®ç»“æ„ç®€ä»‹"/> <meta itemprop="keywords" content="åç«¯,Python,é¢è¯•"/> <meta itemprop="datePublished" content="2025-11-14T22:29:55.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºå‘˜çˆ±é’“é±¼"/> <meta itemprop="url" content="https://juejin.cn/user/2799775299157614"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Python ç¼–ç¨‹å®æˆ˜ Â· å®ç”¨å·¥å…·ä¸åº“ â€” Django é¡¹ç›®ç»“æ„ç®€ä»‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2799775299157614/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºå‘˜çˆ±é’“é±¼
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-14T22:29:55.000Z" title="Fri Nov 14 2025 22:29:55 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>Django æ˜¯ Python ä¸­æœ€æˆç†Ÿçš„ Web æ¡†æ¶ä¹‹ä¸€ï¼Œå†…ç½® ORMã€æ¨¡æ¿å¼•æ“ã€æƒé™ç³»ç»Ÿã€åå°ç®¡ç†ç­‰å®Œæ•´åŠŸèƒ½ï¼Œéå¸¸é€‚åˆæ„å»ºä¸­å¤§å‹ Web åº”ç”¨ã€‚</p>
<p>åˆšåˆ›å»º Django é¡¹ç›®æ—¶ï¼Œæ–°æ‰‹æœ€ç–‘æƒ‘çš„é—®é¢˜ä¹‹ä¸€å°±æ˜¯ï¼š
<strong>â€œè¿™äº›æ–‡ä»¶å¤¹åˆ°åº•æ˜¯å¹²ä»€ä¹ˆçš„ï¼Ÿâ€</strong></p>
<p>æœ¬ç¯‡å†…å®¹å°†å¸¦ä½ å½»åº•ç†è§£ Django çš„é¡¹ç›®ç»“æ„ï¼ŒæŒæ¡ä¸€ä¸ª Django é¡¹ç›®åº”è¯¥å¦‚ä½•ç»„ç»‡ä¸è¿è¡Œã€‚</p>
<hr/>
<h2 data-id="heading-0"><strong>ä¸€ã€åˆ›å»º Django é¡¹ç›®</strong></h2>
<p>å‡è®¾æ‚¨å·²ç»å®‰è£… Djangoï¼š</p>
<pre><code class="hljs language-bash" lang="bash">pip install django
</code></pre>
<p>åˆ›å»ºé¡¹ç›®ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">django-admin startproject mysite
</code></pre>
<p>ç»“æ„å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">mysite/
<span class="hljs-code">    manage.py
    mysite/
        __init__.py
        settings.py
        urls.py
        asgi.py
        wsgi.py
</span></code></pre>
<hr/>
<h2 data-id="heading-1"><strong>äºŒã€é¡¹ç›®æ ¹ç›®å½•ç»“æ„è®²è§£</strong></h2>
<p>ä¸‹é¢æ˜¯ Django é¡¹ç›®é»˜è®¤ç›®å½•çš„è§£é‡Šã€‚</p>
<hr/>
<h3 data-id="heading-2"><strong>1. manage.py â€”â€” é¡¹ç›®ç®¡ç†å‘½ä»¤å…¥å£</strong></h3>
<p>ä½ åœ¨å¼€å‘ä¸­æœ€å¸¸ç”¨çš„å‘½ä»¤å‡ ä¹éƒ½ä»è¿™é‡Œè¿è¡Œï¼š</p>
<pre><code class="hljs language-bash" lang="bash">python manage.py runserver
python manage.py migrate
python manage.py createsuperuser
python manage.py startapp app1
</code></pre>
<p>ä½œç”¨ï¼š</p>
<ul>
<li>æä¾› Django å‘½ä»¤è¡Œå·¥å…·å…¥å£</li>
<li>è‡ªåŠ¨é…ç½® Django ç¯å¢ƒå˜é‡</li>
</ul>
<hr/>
<h3 data-id="heading-3"><strong>2. é¡¹ç›®ä¸»ç›®å½•ï¼ˆä¸é¡¹ç›®åŒåï¼‰</strong></h3>
<p>ç¬¬äºŒå±‚çš„ <code>mysite/</code> æ‰æ˜¯çœŸæ­£çš„é¡¹ç›®é…ç½®ç›®å½•ï¼Œè¿™é‡ŒåŒ…å«é¡¹ç›®çº§åˆ«çš„é…ç½®æ–‡ä»¶ã€‚</p>
<p>ç»“æ„å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">mysite/
<span class="hljs-code">    __init__.py
    settings.py
    urls.py
    asgi.py
    wsgi.py
</span></code></pre>
<p>è®©æˆ‘ä»¬é€ä¸ªä»‹ç»ï¼š</p>
<hr/>
<h4 data-id="heading-4"><strong>2.1 settings.py â€”â€” é¡¹ç›®æ ¸å¿ƒé…ç½®æ–‡ä»¶</strong></h4>
<p><code>settings.py</code> æ˜¯ Django é¡¹ç›®çš„â€œå¤§è„‘â€ï¼Œé‡Œé¢åŒ…å«æ‰€æœ‰å…¨å±€é…ç½®ï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li>INSTALLED_APPSï¼ˆå®‰è£…çš„ç»„ä»¶ï¼‰</li>
<li>DATABASESï¼ˆæ•°æ®åº“é…ç½®ï¼‰</li>
<li>MIDDLEWAREï¼ˆä¸­é—´ä»¶ï¼‰</li>
<li>TEMPLATESï¼ˆæ¨¡æ¿è®¾ç½®ï¼‰</li>
<li>STATICFILESï¼ˆé™æ€æ–‡ä»¶è·¯å¾„ï¼‰</li>
<li>DEBUG å¼€å…³</li>
</ul>
<p>ä½ ä¿®æ”¹æœ€å¤šçš„æ–‡ä»¶å°±æ˜¯è¿™ä¸ªã€‚</p>
<hr/>
<h4 data-id="heading-5"><strong>2.2 urls.py â€”â€” é¡¹ç›® URL è·¯ç”±å…¥å£</strong></h4>
<p>å®šä¹‰ç½‘ç«™çš„é¡µé¢è·¯å¾„ï¼Œå†³å®šæŸä¸ª URL åº”è¯¥äº¤ç»™å“ªä¸ª app æ¥å¤„ç†ã€‚</p>
<p>ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> django.urls <span class="hljs-keyword">import</span> path, include

urlpatterns = [
    path(<span class="hljs-string">''</span>, include(<span class="hljs-string">'app1.urls'</span>)),
    path(<span class="hljs-string">'admin/'</span>, admin.site.urls),
]
</code></pre>
<p><strong>å»ºè®®ï¼šæ¯ä¸ª App å•ç‹¬ä¸€ä¸ª urls.pyï¼Œé€šè¿‡ include å¼•å…¥</strong>ã€‚</p>
<hr/>
<h4 data-id="heading-6"><strong>2.3 wsgi.py â€”â€” éƒ¨ç½² WSGI æœåŠ¡å™¨ä½¿ç”¨</strong></h4>
<p>ç”¨äºéƒ¨ç½² Python Web æœåŠ¡ï¼ˆå¦‚ gunicornã€uWSGIï¼‰ã€‚</p>
<p>ç”Ÿäº§ç¯å¢ƒè®¿é—® Django å°±æ˜¯é€šè¿‡å®ƒã€‚</p>
<hr/>
<h4 data-id="heading-7"><strong>2.4 asgi.py â€”â€” å¼‚æ­¥éƒ¨ç½²å…¥å£</strong></h4>
<p>ASGIï¼ˆå¼‚æ­¥ç½‘å…³æ¥å£ï¼‰ï¼Œæ”¯æŒï¼š</p>
<ul>
<li>WebSocket</li>
<li>å¼‚æ­¥è§†å›¾</li>
</ul>
<p>æ–°ç‰ˆ Django é¡¹ç›®é»˜è®¤æä¾›ï¼Œéå¸¸é‡è¦ã€‚</p>
<hr/>
<h2 data-id="heading-8"><strong>ä¸‰ã€Django åº”ç”¨ app çš„ç»“æ„</strong></h2>
<p>ä½ åˆ›å»ºä¸€ä¸ªæ–°çš„ appï¼š</p>
<pre><code class="hljs language-bash" lang="bash">python manage.py startapp blog
</code></pre>
<p>ä¼šç”Ÿæˆå¦‚ä¸‹ç»“æ„ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">blog/
<span class="hljs-code">    migrations/
        __init__.py
    __init__.py
    admin.py
    apps.py
    models.py
    tests.py
    views.py
</span></code></pre>
<p>ä¸‹é¢é€ä¸ªè§£é‡Šï¼š</p>
<hr/>
<h3 data-id="heading-9"><strong>1. models.py â€”â€” æ•°æ®æ¨¡å‹ï¼ˆORMï¼‰</strong></h3>
<p>ç”¨äºå®šä¹‰æ•°æ®åº“è¡¨ç»“æ„ã€‚</p>
<p>ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Article</span>(models.Model):
    title = models.CharField(max_length=<span class="hljs-number">200</span>)
    content = models.TextField()
</code></pre>
<hr/>
<h3 data-id="heading-10"><strong>2. views.py â€”â€” è§†å›¾å±‚ï¼ˆä¸šåŠ¡é€»è¾‘ï¼‰</strong></h3>
<p>å¤„ç†è¯·æ±‚ã€è¿”å›å“åº”ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> django.http <span class="hljs-keyword">import</span> HttpResponse

<span class="hljs-keyword">def</span> <span class="hljs-title function_">home</span>(<span class="hljs-params">request</span>):
    <span class="hljs-keyword">return</span> HttpResponse(<span class="hljs-string">"Hello Django"</span>)
</code></pre>
<hr/>
<h3 data-id="heading-11"><strong>3. urls.pyï¼ˆéœ€è¦æ‰‹åŠ¨åˆ›å»ºï¼‰â€”â€” app è·¯ç”±</strong></h3>
<p>æ¨èä¸ºæ¯ä¸ª app æ·»åŠ ä¸€ä¸ª <code>urls.py</code>ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> django.urls <span class="hljs-keyword">import</span> path
<span class="hljs-keyword">from</span> . <span class="hljs-keyword">import</span> views

urlpatterns = [
    path(<span class="hljs-string">''</span>, views.home),
]
</code></pre>
<p>åœ¨ä¸»é¡¹ç›®ä¸­ includeï¼š</p>
<pre><code class="hljs language-python" lang="python">path(<span class="hljs-string">'blog/'</span>, include(<span class="hljs-string">'blog.urls'</span>))
</code></pre>
<hr/>
<h3 data-id="heading-12"><strong>4. admin.py â€”â€” Django åå°ç®¡ç†é…ç½®</strong></h3>
<p>è®©æ•°æ®æ¨¡å‹å¯ä»¥åœ¨åå°è¢«ç®¡ç†ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> django.contrib <span class="hljs-keyword">import</span> admin
<span class="hljs-keyword">from</span> .models <span class="hljs-keyword">import</span> Article

admin.site.register(Article)
</code></pre>
<p>åå°åœ°å€ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">/admin/
</code></pre>
<hr/>
<h3 data-id="heading-13"><strong>5. apps.py â€”â€” app çš„é…ç½®ä¿¡æ¯</strong></h3>
<p>ä¸€èˆ¬æ— éœ€ä¿®æ”¹ã€‚</p>
<hr/>
<h3 data-id="heading-14"><strong>6. migrations/ â€”â€” æ•°æ®è¡¨è¿ç§»è®°å½•</strong></h3>
<p>æ‰§è¡Œï¼š</p>
<pre><code class="hljs language-bash" lang="bash">python manage.py makemigrations
python manage.py migrate
</code></pre>
<p>æ‰€æœ‰æ•°æ®åº“ç»“æ„å˜æ›´éƒ½ä¼šä»¥è„šæœ¬ä¿å­˜åœ¨è¿™é‡Œã€‚</p>
<hr/>
<h3 data-id="heading-15"><strong>7. tests.py â€”â€” å•å…ƒæµ‹è¯•</strong></h3>
<p>ç”¨äºå†™è‡ªåŠ¨åŒ–æµ‹è¯•ã€‚</p>
<hr/>
<h2 data-id="heading-16"><strong>å››ã€æ¨èçš„ Django é¡¹ç›®ç»“æ„ï¼ˆä¼ä¸šå¸¸ç”¨ï¼‰</strong></h2>
<p>éšç€é¡¹ç›®å˜å¤§ï¼Œå®˜æ–¹é»˜è®¤ç»“æ„ä¸å¤Ÿç”¨ï¼Œå¯ä»¥é‡‡ç”¨å¦‚ä¸‹ç»“æ„ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">mysite/
<span class="hljs-code">    manage.py
    mysite/
        settings/
            __init__.py
            base.py
            dev.py
            prod.py
        urls.py
        asgi.py
        wsgi.py
</span>
<span class="hljs-code">    apps/
        blog/
        users/
        orders/
</span>
<span class="hljs-code">    templates/
    static/
    media/
</span></code></pre>
<p>ä¼˜ç‚¹ï¼š</p>
<ul>
<li>æŒ‰æ¨¡å—æ‹†åˆ† appï¼Œæ¸…æ™°å¯ç»´æŠ¤</li>
<li>é…ç½®æ–‡ä»¶æŒ‰ç¯å¢ƒæ‹†åˆ†</li>
<li>é™æ€ä¸æ¨¡æ¿é›†ä¸­ç®¡ç†</li>
</ul>
<hr/>
<h2 data-id="heading-17"><strong>äº”ã€ä¸€ä¸ªå®Œæ•´ Django é¡¹ç›®è¿è¡Œæµç¨‹</strong></h2>
<ol>
<li>æµè§ˆå™¨è®¿é—® URL</li>
<li><code>urls.py</code> è·¯ç”±åˆ†é…</li>
<li>å¯¹åº” <code>views.py</code> æ‰§è¡Œä¸šåŠ¡é€»è¾‘</li>
<li>æ“ä½œ <code>models.py</code>ï¼ˆæ•°æ®åº“å±‚ï¼‰</li>
<li>è¿”å›æ¨¡æ¿æˆ– JSON å“åº”</li>
<li>è‹¥æœ‰åå°éœ€æ±‚ï¼Œé€šè¿‡ <code>admin.py</code> ç®¡ç†æ•°æ®</li>
</ol>
<hr/>
<h2 data-id="heading-18"><strong>å…­ã€æ€»ç»“</strong></h2>
<p>æœ¬ç¯‡ä½ å­¦ä¼šäº†ï¼š</p>
<h4 data-id="heading-19">âœ” Django é¡¹ç›®é»˜è®¤ç»“æ„ä¸åŠŸèƒ½</h4>
<h4 data-id="heading-20">âœ” manage.py çš„ä½œç”¨</h4>
<h4 data-id="heading-21">âœ” settings / urls / wsgi / asgi çš„èŒè´£</h4>
<h4 data-id="heading-22">âœ” Django app å„æ–‡ä»¶çš„ç”¨é€”</h4>
<h4 data-id="heading-23">âœ” ä¼ä¸šçº§ Django é¡¹ç›®æœ€ä½³ç»“æ„</h4>
<p>ç†è§£è¿™äº›ç»“æ„åï¼Œä½ å°±å¯ä»¥çœŸæ­£å¼€å§‹å†™ Django Web åº”ç”¨ï¼Œåç»­å†…å®¹å¦‚æ¨¡å‹ã€è§†å›¾ã€æ¨¡æ¿ã€ORM æŸ¥è¯¢ç­‰éƒ½ä¼šæ›´å®¹æ˜“ç†è§£ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è¿›å…¥èŒåœºç¬¬äº”è¯¾â€”â€”çªç ´å’Œè·ƒå‡]]></title>    <link>https://juejin.cn/post/7572408208263512104</link>    <guid>https://juejin.cn/post/7572408208263512104</guid>    <pubDate>2025-11-14T15:43:27.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572408208263512104" data-draft-id="7572408208263495720" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è¿›å…¥èŒåœºç¬¬äº”è¯¾â€”â€”çªç ´å’Œè·ƒå‡"/> <meta itemprop="keywords" content="ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2025-11-14T15:43:27.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Mapbarfront"/> <meta itemprop="url" content="https://juejin.cn/user/624178336632407"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è¿›å…¥èŒåœºç¬¬äº”è¯¾â€”â€”çªç ´å’Œè·ƒå‡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/624178336632407/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Mapbarfront
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-14T15:43:27.000Z" title="Fri Nov 14 2025 15:43:27 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>è§‚å¯Ÿã€èå…¥ã€ç«‹è¶³ã€äº§å‡ºï¼Œåº¦è¿‡è¿™4ä¸ªé˜¶æ®µä¹‹åï¼Œä½ å·²ç»ç¨³ç¨³åœ°ï¼Œæˆä¸ºå›¢é˜Ÿé‡Œçš„ä¸»åŠ›è¾“å‡ºäº†ï¼Œæ¥ä¸‹æ¥ï¼Œå¦‚æœä½ æƒ³ä»å›¢é˜Ÿä¸­çš„å¥½å‘˜å·¥ï¼Œè·ƒå‡ä¸ºè€æ¿çœ¼ä¸­çš„å…³é”®äººç‰©ï¼Œä»ä¸šåŠ¡éª¨å¹²åˆ°çœŸæ­£çš„å›¢é˜Ÿæ ¸å¿ƒï¼Œå¿…é¡»è¦åšçš„ä¸‹ä¸€æ­¥å°±æ˜¯çªç ´ï¼Œæ˜“ç»ä¹¾å¦ä¸­çš„æˆ–è·ƒåœ¨æ¸Šï¼Œè¯´çš„å°±æ˜¯è¿™ä¸ªæ„æ€ã€‚</p>
<p>æˆ–æ˜¯æˆ–è®¸ï¼Œä»£è¡¨ç€ä¸ç¡®å®šæ€§ï¼Œè·ƒæ˜¯è·³è·ƒï¼Œä»£è¡¨ç€å‹‡æ•¢ä¸€æï¼Œåœ¨æ¸Šæ˜¯æŒ‡åœ¨æ·±æ¸Šé‡Œï¼Œä»£è¡¨ç€çªç ´å‰åœ¨æ·±æ¸Šé‡Œçš„ç­‰å¾…ï¼Œè¿™ä¸ªé˜¶æ®µï¼Œæ˜¯ä½ åœ¨ç§¯è“„äº†è¶³å¤Ÿçš„åŠ›é‡ä¹‹åï¼Œé‡åˆ°åˆé€‚çš„æœºä¼šçºµèº«ä¸€è·ƒçš„æ—¶åˆ»ï¼Œè¿™æ˜¯å®¡æ…çš„å†’é™©ï¼Œä¹Ÿæ˜¯è€å¿ƒç­‰å¾…ä¹‹åçš„æ°´åˆ°æ¸ æˆï¼Œæƒ³è¦å®Œæˆè¿™æ¬¡å…³é”®çš„è¿›é˜¶ï¼Œä»¥ä¸‹è¿™5ä¸ªåŠ¨ä½œï¼Œä½ è¦æ­¥æ­¥ä¸ºè¥ã€‚</p>
<h2 data-id="heading-0">1ã€è¡¡é‡è‡ªå·±çš„èƒ½åŠ›è¾¹ç•Œ</h2>
<p>æƒ³è¦è·ƒå‡ï¼Œç¬¬ä¸€æ­¥å…ˆè¦è¡¡é‡è‡ªå·±æœ‰å¤šå¤§èƒ½åŠ›ï¼Œç›¸æ¯”äºå®æ–½ä¸­å¯èƒ½é‡åˆ°çš„å›°éš¾ï¼Œæ›´å¯æ€•çš„ï¼Œåè€Œæ˜¯ç›²ç›®çš„è‡ªæˆ‘æ„Ÿè§‰è‰¯å¥½ï¼Œä½ éœ€è¦å…ˆåœä¸‹æ¥ï¼Œå†·é™çš„åˆ†æä¸€ä¸‹ä½ çš„æ ¸å¿ƒèƒ½åŠ›ï¼Œç»éªŒå‚¨å¤‡ï¼Œæœ‰æ²¡æœ‰çªç ´çš„æŠŠæ¡ï¼Œè¿™ä¸ªçªç ´çš„æœºä¼šï¼Œä¸€å®šæ˜¯ä½ è·³èµ·æ¥è¸®è¸®è„šï¼Œèƒ½å¤Ÿæ‘¸å¾—ç€çš„ï¼Œåƒä¸‡è¦æ³¨æ„çœ‹æ¸…è¾¹ç•Œå’Œè‡ªæˆ‘è®¾é™ï¼Œè¿™ä¸¤ä»¶äº‹å¾€å¾€å®¹æ˜“æ··æ·†ï¼Œå‰è€…æ˜¯å…ˆåšåˆ†æï¼Œä¹‹åå¾—å‡ºè¾¹ç•Œåœ¨å“ªé‡Œï¼Œè¿™æ˜¯ç†æ€§æ¨å¯¼çš„ç»“æœï¼Œåè€…æ˜¯å…ˆæœ‰è¾¹ç•Œï¼Œå†åšå½¢å¼åŒ–çš„å‡åˆ†æï¼Œæ˜¯éç†æ€§çš„äº§ç‰©ã€‚</p>
<p>ä¸€èˆ¬æ¥è¯´ï¼Œæƒ³è¦é¡ºåˆ©å®Œæˆçªç ´ï¼Œé€‰ä½ èƒ½åŠ›èŒƒå›´åœˆçš„è¾¹ç¼˜è¿›è¡Œæ‰©å±•ï¼Œè¿™æ ·ä¼šå®¹æ˜“ä¸€äº›ã€‚</p>
<h2 data-id="heading-1">2ã€çŸ›å®šçœŸæ­£çš„ç ´å±€ç‚¹</h2>
<p>æ¸…æ¥šäº†è‡ªå·±æœ‰å‡ æ–¤å‡ ä¸¤ä¹‹åï¼Œä½ è¦æ‰¾çš„ï¼Œå°±æ˜¯é‚£ä¸ªè·³èµ·æ¥è¸®è¸®è„šï¼Œèƒ½æ‘¸å¾—ç€çš„æœºä¼šï¼Œçªç ´ä¸€å®šä¸å¯èƒ½åœ¨ä½ çš„èˆ’é€‚åŒºé‡Œï¼Œåšä½ ç†Ÿæ‚‰çš„ä¸šåŠ¡ï¼Œè€Œæ˜¯è¦å»è§£å†³ä¸€ä¸ªå½±å“å…¨å±€çš„é—®é¢˜ï¼Œæˆ–è€…ï¼Œèƒ½å¤Ÿå¸¦æ¥å›¢é˜Ÿæ•ˆç‡è·ƒå‡çš„å¤§ä¼˜åŒ–ï¼Œè¿™æ ·çš„æœºä¼šä¸€æ—¦åšå¥½ï¼Œå°±èƒ½å¤Ÿä¸ºå›¢é˜Ÿæ‰“å¼€æ–°çš„å±€é¢ï¼Œæœ‰è¶³å¤Ÿå¤šçš„æ›å…‰åº¦ï¼Œä¹Ÿèƒ½æ”¶è·è¶³å¤Ÿå¤§çš„å¥½è¯„ï¼Œé€‰æ‹©è¿™æ ·çœŸæ­£çš„ç ´å±€ç‚¹ï¼Œæ‰å€¼å¾—ä½ çºµèº«ä¸€è·ƒå»å†’è¿™ä¸ªé™©ã€‚</p>
<p>æœ‰ä¸€äº›æŠ•å…¥å¤§ã€äº§å‡ºä½çš„ä»»åŠ¡ï¼Œè®°å¾—è¦é¿å¼€ï¼Œåšå¥½çš„éš¾åº¦å¤ªå¤§ï¼Œåšä¸å¥½è¿˜ä¼šæŸä¼¤ä½ çš„ç¾½æ¯›ï¼Œå»ºè®®ä½ è¿œç¦»è¿™äº›å¤©å‘ã€‚</p>
<h2 data-id="heading-2">3ã€åœ¨æ¨¡ç³Šä¸­æ‰¾åˆ°ç¡®å®šæ€§</h2>
<p>æˆ–è·ƒåœ¨æ¸Šï¼Œæœ¬èº«å°±æœ‰ä¸€å®šçš„ä¸ç¡®å®šæ€§ï¼Œå·¥ä½œä¸­æœ‰çªç ´çš„æœºä¼šä¹Ÿä¾ç„¶å¦‚æ­¤ï¼ŒæœåŠ¡è€¦åˆã€ä»£ç å †å ã€æƒè´£ä¸æ¸…ï¼Œèµ„æºæœ‰é™ï¼Œè¿™ç±»ä»»åŠ¡å¾€å¾€æœ‰å¾ˆå¤šäººå°è¯•è¿‡ï¼Œæƒ³è¦åšå¥½ï¼Œæƒ³è¦ä¼˜åŒ–ï¼Œå› ä¸ºå„ç§åŸå› ï¼Œå„ç§å‘éƒ½æ²¡èƒ½æˆåŠŸï¼Œé«˜é£é™©æ‰æœ‰é«˜å›æŠ¥ï¼Œçƒ‚æ‘Šå­æ‰æœ‰ä½ çªç ´çš„æœºä¼šï¼Œåˆ†æã€å®æ–½ã€å¤ç›˜ï¼Œè¿˜æ˜¯å·¥ä½œä¸­åšäº‹æƒ…çš„è¿™ä¸‰æ¿æ–§ã€‚</p>
<p>å¦‚æœè¿™ä¸ªæœºä¼šåœ¨ä½ çš„èƒ½åŠ›èŒƒå›´ä¹‹å†…ï¼Œå¤§åˆ€é˜”æ–§çš„å¹²ï¼Œå¦‚æœåœ¨ä½ çš„èƒ½åŠ›è¾¹ç•Œä¹‹å¤–ï¼Œæ‹†è§£ä¸€ä¸‹ï¼Œå…ˆç”¨æœ€å°æˆæœ¬è·‘ä¸€ä¸ªé—­ç¯ï¼Œæˆ–è€…MVPè¯•è¯•çœ‹ï¼Œè·‘å‡ºæ¥äº†ï¼Œä½ çš„è‡ªä¿¡å¿ƒè‡ªç„¶ä¼šå¢åŠ ï¼Œå†å»ç”³è¯·èµ„æºï¼Œæ¨åŠ¨æ›´å¤§çš„ä¼˜åŒ–ï¼Œä¸€å£å£åƒæ‰å®ƒã€‚</p>
<p>å…¶å®ï¼Œæ‰€è°“çš„é«˜é£é™©ï¼ŒæŒ‡çš„å°±æ˜¯è¿™ä»¶äº‹ä½ æŠŠæ¡ä¸äº†ï¼Œçœ‹ä¸æ¸…è§„å¾‹ï¼Œé‚£äº›æ‰‹æ‹¿æŠŠæçš„äº‹æƒ…ï¼Œä»æ¥éƒ½ä¸å­˜åœ¨é«˜é£é™©ã€‚</p>
<h2 data-id="heading-3">4ã€ä»å®Œæˆåˆ°æ‰“é€š</h2>
<p>ç­‰ç€å®Œæˆè‡ªå·±çš„ä¸€äº©ä¸‰åˆ†åœ°ï¼Œæœ€å¤šä¹Ÿå°±æ˜¯ä¸ªè¾¾æ ‡ï¼Œå†å¥½ä¹Ÿå°±æ˜¯ä¸ªé«˜çº§å¹²æ´»çš„ï¼Œæ²¡åŠæ³•åšåˆ°çªç ´ï¼Œæƒ³çªç ´ï¼Œä½ å¾—å±•ç°å‡ºæ›´å¤§çš„æ¨åŠ¨åŠ›ï¼Œæ›´å¼ºçš„æ‰“é€šèƒ½åŠ›ï¼Œæä¸å®šçš„äº‹æƒ…ï¼Œå¤æ‚çš„å±€é¢ï¼Œé€šè¿‡ä½ çš„åå¤æ²Ÿé€šï¼Œåè°ƒèµ„æºï¼Œå»ºç«‹å…±è¯†ï¼Œæœ€ç»ˆæå®šäº†ï¼Œè§£å†³äº†ï¼Œè®©å®ƒä¸å†å¤æ‚ï¼Œè¿™å°±æ˜¯ä½ çš„èƒ½åŠ›ã€‚</p>
<p>äº§å‡ºæœŸä½ è¦èƒ½æ‰›äº‹ï¼Œçªç ´æœŸä½ è¦èƒ½æ‰“é€šï¼Œè·³å‡ºå®Œæˆçš„æ‰§è¡Œè€…æ€ç»´ï¼Œè½¬å˜ä¸ºæ¨åŠ¨çš„ä¸»å¯¼è€…ç«‹åœºï¼Œè¿™æ˜¯è¿™ä¸€é˜¶æ®µé‡Œï¼Œå¿ƒæ€ä¸Šå¿…é¡»å®Œæˆçš„æ”¹å˜ï¼Œå…¬å¸é‡Œä»æ¥éƒ½ä¸ç¼ºæ‰§è¡Œè€…ï¼Œå›¢é˜Ÿé‡Œä¹Ÿéšæ—¶éƒ½éœ€è¦èƒ½å¤Ÿæ‰“é€šå…³çš„äººã€‚</p>
<h2 data-id="heading-4">5ã€ç®¡ç†å¥½è·ƒå‡çš„é£é™©</h2>
<p>æˆ–è·ƒåœ¨æ¸Šï¼Œæœ€ç²¾é«“çš„å°±æ˜¯è¿™ä¸ªæˆ–å­—ï¼Œä»£è¡¨ç€ä¸ç¡®å®šæ€§ï¼Œçºµèº«ä¸€è·ƒï¼Œå‹‡æ•¢ä¸€æï¼Œå¯èƒ½æˆåŠŸï¼Œä¹Ÿå¯èƒ½å¤±è´¥ï¼ŒçœŸæ­£çš„å¼ºè€…ï¼Œæ˜¯åœ¨å‰è¿›çš„åŒæ—¶ï¼Œç®¡ç†å¥½å¯èƒ½å¤±è´¥çš„é£é™©ï¼Œç•™å¥½åæ‰‹ï¼Œåšå¥½ç¼“å†²ï¼Œç»ä¸ä¼šå¥½å¤§å–œåŠŸï¼Œç›²ç›®å†’è¿›ï¼Œä¸è¿‡è¿™é‡Œä¹Ÿä¸éœ€è¦è¿‡å¤šæ‹…å¿ƒï¼Œä»é•¿é•¿çš„äº§å‡ºåŒºèµ°è¿‡æ¥ï¼Œèˆ’é€‚åŒºç†Ÿæ‚‰ä¸šåŠ¡çš„æŒç»­äº§å‡ºï¼Œå°±æ˜¯ä½ çš„åŸºæœ¬ç›˜ã€‚</p>
<p>ç®¡ç†è€…éƒ½å¸Œæœ›ç¨³å®šï¼Œä½ èƒ½åšçš„å¥½è¿™å—äº‹ï¼Œæ²¡æœ‰ç†ç”±è½»æ˜“æ¢äººï¼Œå³ä½¿å‡ºç°ä¸æˆåŠŸçš„æƒ…å†µï¼Œåªè¦ä¸æ˜¯åŠŸäºä¸€ç¯‘ï¼Œéƒ½å¯ä»¥å†é€€å›æ·±æ¸Šï¼Œç­‰å¾…ä¸‹ä¸€æ¬¡æœºä¼šã€‚</p>
<p>ä»äº§å‡ºæœŸçš„èµ°çš„è¿œï¼Œåˆ°çªç ´æœŸçš„è·³çš„é«˜ï¼Œè¿™æ˜¯ä¸€æ¬¡å¾ˆéš¾çš„è¿›é˜¶ï¼Œä¹Ÿæ˜¯ç»å¤§å¤šæ•°èŒåœºäººå¡ä½çš„ç¯èŠ‚ï¼ŒèŒåœºæ˜¯å¤©ç„¶çš„é‡‘å­—å¡”æ¨¡å‹ï¼Œè¿™ä¸ªé˜¶æ®µçš„çªç ´ï¼Œä¹Ÿæ˜¯ç­›é€‰ä»è‰¯å¥½åˆ°ä¼˜ç§€çš„æ¼æ–—ã€‚</p>
<p>æˆ–è·ƒåœ¨æ¸Šï¼Œæ„æ€æ˜¯å®¡æ—¶åº¦åŠ¿ï¼Œéµå¾ªç†æ€§ï¼Œç­‰å¾…åˆé€‚çš„æœºä¼šåˆ°æ¥ï¼Œå‘ä¸Šè·ƒå‡ï¼Œå¥‹åŠ›ä¸€æï¼Œæ— è®ºè¿›é˜¶æ˜¯å¦æˆåŠŸï¼Œè¿™ä¸ªè¿‡ç¨‹æœ¬èº«éƒ½ä¼šè®©ä½ æœ‰æ‰€æˆé•¿ï¼Œä¸ä¼šæœ‰çœŸæ­£çš„æŸå¤±ï¼Œè·ƒè¿‡å»äº†ï¼Œæµ·é˜”å¤©ç©ºï¼Œè¶Šä¸è¿‡å»ï¼Œä½ ä¹Ÿçœ‹æ¸…æ¥šäº†è‡ªå·±èƒ½åŠ›è¾¹ç•Œåœ¨å“ªé‡Œã€‚</p>
<p>çªç ´æ˜¯ä»è¢«åŠ¨æ¥å—èˆå°ï¼Œåˆ°ä¸»åŠ¨æ­å»ºèˆå°çš„è½¬å˜ï¼Œä»–è€ƒéªŒçš„ä¸ä»…ä»…æ˜¯ä½ çš„èƒ½åŠ›ï¼Œæ›´æ˜¯ä½ çš„èƒ†è¯†å’Œæ™ºæ…§ï¼Œæ‰‹é‡Œçš„ç­¹ç å·®ä¸å¤šäº†ï¼Œçœ‹å‡†æ—¶æœºèµŒä¸€æŠŠå§ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å›½äº§AIä»£ç é€†è¢­ï¼šGLM-4.6å‡­ä»€ä¹ˆå¹¶åˆ—å…¨çƒç¬¬ä¸€ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7572396000544997439</link>    <guid>https://juejin.cn/post/7572396000544997439</guid>    <pubDate>2025-11-14T14:06:21.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572396000544997439" data-draft-id="7572385850636042246" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å›½äº§AIä»£ç é€†è¢­ï¼šGLM-4.6å‡­ä»€ä¹ˆå¹¶åˆ—å…¨çƒç¬¬ä¸€ï¼Ÿ"/> <meta itemprop="keywords" content="AIGC"/> <meta itemprop="datePublished" content="2025-11-14T14:06:21.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¢¨é£å¦‚é›ª"/> <meta itemprop="url" content="https://juejin.cn/user/4064249017803927"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å›½äº§AIä»£ç é€†è¢­ï¼šGLM-4.6å‡­ä»€ä¹ˆå¹¶åˆ—å…¨çƒç¬¬ä¸€ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4064249017803927/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¢¨é£å¦‚é›ª
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-14T14:06:21.000Z" title="Fri Nov 14 2025 14:06:21 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>AIåœˆçš„æœ‹å‹ä»¬ï¼Œæœ€è¿‘æœ‰æ²¡æœ‰è¢«LMArenaçš„æ¦œå•éœ‡åˆ°ï¼Ÿæ™ºè°±AIçš„GLM-4.6ï¼Œè¿™ä¸ªå’±ä»¬å›½äº§å“ç‰Œï¼Œç«Ÿç„¶åœ¨æœ€æ–°çš„ç¼–ç¨‹ä¸ä»£ç ç”Ÿæˆæ’è¡Œæ¦œä¸Šï¼Œå’ŒOpenAIçš„GPT-5ã€Anthropicçš„Claudeå¹¶åˆ—å…¨çƒç¬¬ä¸€ï¼è¿™å¯ä¸æ˜¯å°äº‹ï¼Œæ„å‘³ç€å›½äº§å¤§æ¨¡å‹åœ¨æœ€ç¡¬æ ¸çš„ç¼–ç¨‹èƒ½åŠ›ä¸Šï¼Œå®å®åœ¨åœ¨åœ°ç«™åˆ°äº†ä¸–ç•Œä¹‹å·…ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.worldcodeing.com%2Fwp-content%2Fuploads%2F2025%2F11%2FiShot_2025-11-14_21.57.28-1024x773.png" target="_blank" title="https://blog.worldcodeing.com/wp-content/uploads/2025/11/iShot_2025-11-14_21.57.28-1024x773.png" ref="nofollow noopener noreferrer"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/076e62058dd34e128bf6e64fc279f1fa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aKo6aOO5aaC6Zuq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763733981&amp;x-signature=GiJrjmE9ai79NLzkBygupYEdiq8%3D" alt="iShot_2025-11-14_21.57.28" loading="lazy"/></a></p>
<h2 data-id="heading-0">æ¦œå•éœ‡åŠ¨ï¼šå›½äº§AIç«™ä¸Šä¸–ç•Œä¹‹å·…</h2>
<p>LMArenaï¼Œè¿™ä¸ªåœ¨AIåœˆé‡Œä¸¾è¶³è½»é‡çš„è¯„æµ‹å¹³å°ï¼Œå®ƒçš„Code Arenaæ¦œå•å¯ä¸æ˜¯é—¹ç€ç©çš„ã€‚å®ƒä¸ä»…ä»…æ˜¯çœ‹ä»£ç èƒ½ä¸èƒ½è·‘èµ·æ¥é‚£ä¹ˆç®€å•ï¼Œæ›´æ·±å±‚æ¬¡åœ°è¯„ä¼°æ¨¡å‹å¦‚ä½•åœ¨çœŸå®å¼€å‘æ¡ä»¶ä¸‹æ€è€ƒã€è§„åˆ’ã€æ„å»ºï¼Œç”šè‡³åŒ…æ‹¬æ€§èƒ½å’Œäº¤äº’è‡ªç„¶åº¦ã€‚å¯ä»¥è¯´ï¼Œå®ƒè€ƒæ ¸çš„æ˜¯æ¨¡å‹çš„â€œå®æˆ˜èƒ½åŠ›â€å’Œâ€œåŠ¨æ€è¿‡ç¨‹â€ã€‚æƒ³è±¡ä¸€ä¸‹ï¼Œæˆ‘ä»¬è‡ªå·±çš„GLM-4.6ï¼Œä¸ä¸¤å¤§å·¨å¤´GPT-5å’ŒClaudeå¹¶é©¾é½é©±ï¼Œè¿™æ˜¯ä½•ç­‰è£è€€ï¼Ÿè¿™ä¸€æˆå°±ï¼Œæ ‡å¿—ç€å›½äº§å¤§æ¨¡å‹å·²æ­£å¼è¿›å…¥å…¨çƒç¬¬ä¸€æ¢¯é˜Ÿï¼Œæˆä¸ºä¸å®¹å¿½è§†çš„é¡¶å°–ç©å®¶ã€‚</p>
<h2 data-id="heading-1">GLM-4.6ï¼šè§£ç â€œæœ€å¼ºä»£ç æ¨¡å‹â€çš„ç§˜å¯†</h2>
<p>é‚£ä¹ˆï¼Œè¿™ä¸ªè®©ä¸šç•Œæ²¸è…¾çš„GLM-4.6ç©¶ç«Ÿæ˜¯ä½•æ–¹ç¥åœ£ï¼Ÿ</p>
<p>æ™ºè°±AIåœ¨2025å¹´9æœˆ30æ—¥å¼€æºå‘å¸ƒäº†å®ƒï¼Œä½œä¸ºGLMç³»åˆ—çš„æœ€æ–°åŠ›ä½œï¼Œå®ƒå·ç§°æ˜¯â€œæœ€å¼ºçš„ä»£ç Codingæ¨¡å‹â€ã€‚ç›¸æ¯”å‰ä»£GLM-4.5ï¼Œå®ƒçš„ä»£ç ç”Ÿæˆèƒ½åŠ›æå‡äº†è¶³è¶³<strong>27%</strong>ï¼è¿™å¯ä¸æ˜¯å°ä¿®å°è¡¥ï¼Œè€Œæ˜¯å®æ‰“å®çš„é£è·ƒã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.worldcodeing.com%2Fwp-content%2Fuploads%2F2025%2F11%2FiShot_2025-11-14_21.59.05-1024x382.png" target="_blank" title="https://blog.worldcodeing.com/wp-content/uploads/2025/11/iShot_2025-11-14_21.59.05-1024x382.png" ref="nofollow noopener noreferrer"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e6b1fee031b143c3b09e253d91498208~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aKo6aOO5aaC6Zuq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763733981&amp;x-signature=euZ00JWb%2B%2FpTnWOPPzJWAapN9u0%3D" alt="iShot_2025-11-14_21.59.05" loading="lazy"/></a></p>
<p>LMArenaå¼ºè°ƒçš„â€œåŠ¨æ€è¿‡ç¨‹â€ï¼Œæ­£æ˜¯GLM-4.6çš„å¼ºé¡¹ã€‚å®ƒå…·å¤‡å¼ºå¤§çš„Agentï¼ˆæ™ºèƒ½ä½“ï¼‰èƒ½åŠ›ï¼Œæ“…é•¿è§„åˆ’å’Œå·¥å…·è°ƒç”¨ï¼Œå°¤å…¶åœ¨å‰ç«¯å’Œå¤šè¯­è¨€ç¼–ç¨‹æ–¹é¢è¡¨ç°çªå‡ºã€‚æ›´å€¼å¾—ä¸€æçš„æ˜¯ï¼Œå®ƒæ”¯æŒ<strong>200Kçš„é•¿ä¸Šä¸‹æ–‡</strong>ï¼Œè¿™æ„å‘³ç€å®ƒèƒ½è½»æ¾é©¾é©­é‚£äº›åŠ¨è¾„å‡ ä¸‡è¡Œçš„å¤æ‚ä»£ç åº“ï¼Œè¿™åœ¨å¤„ç†å¤§å‹é¡¹ç›®æ—¶ç®€ç›´æ˜¯ç¥æ¥ä¹‹ç¬”ã€‚å¯ä»¥è¯´ï¼Œå®ƒä¸ä»…ä»…æ˜¯ä¸ªä»£ç ç”Ÿæˆå™¨ï¼Œæ›´åƒæ˜¯ä¸€ä¸ªèƒ½å¸®ä½ â€œæ€è€ƒâ€å’Œâ€œè§„åˆ’â€çš„è™šæ‹Ÿç¨‹åºå‘˜ã€‚</p>
<h2 data-id="heading-2">å®åŠ›éªŒè¯ä¸æ— ä¸ä¼¦æ¯”çš„æ€§ä»·æ¯”</h2>
<p>è¿™äº›æ•°æ®å’Œæ’åå¹¶éçº¸ä¸Šè°ˆå…µï¼ŒGLM-4.6çš„å“è¶Šè¡¨ç°èƒŒåï¼Œæœ‰åšå®çš„æµ‹è¯•æ•°æ®å’Œç§¯æçš„è¡Œä¸šåé¦ˆä½œä¸ºæ”¯æ’‘ã€‚</p>
<p>åœ¨Claude Codeç¯å¢ƒä¸‹è¿›è¡Œçš„74ä¸ªçœŸå®åœºæ™¯ç¼–ç¨‹ä»»åŠ¡æµ‹è¯•ä¸­ï¼ŒGLM-4.6çš„å®æµ‹è¡¨ç°<strong>è¶…è¿‡äº†Claude Sonnet 4</strong>ã€‚AIç¼–ç¨‹åŠ©æ‰‹Clineçš„æ•°æ®æ˜¾ç¤ºï¼ŒGLM-4.6çš„æˆåŠŸç‡é«˜è¾¾94.9%ï¼Œä¸é‚£äº›é¡¶å°–çš„é—­æºæ¨¡å‹å‡ ä¹â€œæ‰“å¹³â€ï¼Œå·®è·å·²ç¼©å°åˆ°â€œåŸºç‚¹â€çº§åˆ«ã€‚è¿AIèŠ¯ç‰‡å…¬å¸Cerebraséƒ½å°†å…¶é€‰ä¸ºå¹³å°çš„<strong>é»˜è®¤æ¨èæ¨¡å‹</strong>ï¼Œå–ä»£äº†ä¹‹å‰çš„é€‰æ‰‹ï¼Œè¿™è¶³ä»¥è¯æ˜GLM-4.6çš„ç¡¬å®åŠ›æ˜¯ç»å¾—èµ·è€ƒéªŒçš„ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.worldcodeing.com%2Fwp-content%2Fuploads%2F2025%2F11%2FiShot_2025-11-14_21.58.38-1024x987.png" target="_blank" title="https://blog.worldcodeing.com/wp-content/uploads/2025/11/iShot_2025-11-14_21.58.38-1024x987.png" ref="nofollow noopener noreferrer"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/89bee8ca5241483682c575435347aeda~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aKo6aOO5aaC6Zuq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763733981&amp;x-signature=CC2r%2FhH0zkqrcPF10pJGW%2FGa4pE%3D" alt="iShot_2025-11-14_21.58.38" loading="lazy"/></a></p>
<p>æ›´ä»¤äººå¿ƒåŠ¨çš„æ˜¯ï¼ŒGLM-4.6è¿˜ç»™å‡ºäº†ä¸€ä¸ªéš¾ä»¥æŠ—æ‹’çš„ç†ç”±ï¼š<strong>æé«˜çš„æ€§ä»·æ¯”</strong>ã€‚æ®ç§°ï¼Œä½ åªéœ€ä»˜å‡ºClaudeçº¦1/7çš„ä»·æ ¼ï¼Œå°±èƒ½äº«å—åˆ°å‡ ä¹åŒæ ·é¡¶çº§çš„ä»£ç æœåŠ¡ã€‚è¿™å¯¹äºé¢„ç®—æœ‰é™çš„å¼€å‘è€…æˆ–ä¼ä¸šæ¥è¯´ï¼Œç®€ç›´æ˜¯é›ªä¸­é€ç‚­ï¼Œä¸ºå…¨çƒå¼€å‘è€…æä¾›äº†ä¸€ä¸ªå…¼å…·é¡¶å°–æ€§èƒ½å’Œé«˜æˆæœ¬æ•ˆç›Šçš„å…¨æ–°é€‰æ‹©ã€‚</p>
<h2 data-id="heading-3">å›½äº§AIçš„é‡Œç¨‹ç¢‘</h2>
<p>GLM-4.6çš„ç™»é¡¶ï¼Œæ˜¯å›½äº§å¤§æ¨¡å‹å‘å±•å²ä¸Šä¸€ä¸ªå®å®åœ¨åœ¨çš„é‡Œç¨‹ç¢‘ã€‚å®ƒæ¸…æ™°åœ°å‘Šè¯‰æˆ‘ä»¬ï¼Œä¸­å›½AIåŠ›é‡å·²ç»æˆåŠŸåœ°ä»â€œè¿½èµ¶è€…â€èœ•å˜ä¸ºâ€œå¹¶è·‘è€…â€ï¼Œç”šè‡³åœ¨æŸäº›ç»´åº¦ä¸Šå¼€å§‹å¼•é¢†ã€‚è¿™ä¸ä»…ä»…æ˜¯æ™ºè°±AIçš„èƒœåˆ©ï¼Œæ›´æ˜¯æ•´ä¸ªä¸­å›½AIç”Ÿæ€çš„éª„å‚²ã€‚å®ƒé¢„ç¤ºç€AIç¼–ç¨‹å·¥å…·çš„æœªæ¥å°†æ›´åŠ å¤šå…ƒå’Œæ™®æƒ ï¼ŒæœŸå¾…GLM-4.6èƒ½æ¿€å‘æ›´å¤šåˆ›æ–°ï¼Œå…±åŒæ¨åŠ¨AIæ—¶ä»£çš„åˆ°æ¥ã€‚</p>
<p><strong>å¦‚æœä½ ä¹Ÿå¯¹æœ€æ–°çš„AIä¿¡æ¯æ„Ÿå…´è¶£æˆ–è€…æœ‰ç–‘é—® éƒ½å¯ä»¥åŠ å…¥æˆ‘çš„å¤§å®¶åº­ ç¬¬ä¸€æ—¶é—´åˆ†äº«æœ€æ–°AIèµ„è®¯ã€å·¥å…·ã€æ•™ç¨‹ã€æ–‡æ¡£ æ¬¢è¿ä½ çš„åŠ å…¥ï¼ï¼ï¼ğŸ˜‰ğŸ˜‰ğŸ˜‰</strong></p>
<p>å…¬ä¼—å·ï¼šå¢¨é£å¦‚é›ªå°ç«™</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Rustç¯å¢ƒæ­å»º]]></title>    <link>https://juejin.cn/post/7572434032517611566</link>    <guid>https://juejin.cn/post/7572434032517611566</guid>    <pubDate>2025-11-14T14:11:55.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572434032517611566" data-draft-id="7572389069707051018" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Rustç¯å¢ƒæ­å»º"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-14T14:11:55.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Javaç§æ•™"/> <meta itemprop="url" content="https://juejin.cn/user/3394924618197325"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Rustç¯å¢ƒæ­å»º
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3394924618197325/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Javaç§æ•™
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-14T14:11:55.000Z" title="Fri Nov 14 2025 14:11:55 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€Rustæ¦‚è¿°</h2>
<h4 data-id="heading-1">1.1 ä»€ä¹ˆæ˜¯Rust</h4>
<p>Rust æ˜¯ä¸€é—¨å¼ºè°ƒå†…å­˜å®‰å…¨ã€å¹¶å‘å®‰å…¨ä¸é«˜æ€§èƒ½çš„ç³»ç»Ÿç¼–ç¨‹è¯­è¨€ã€‚å®ƒé€šè¿‡æ‰€æœ‰æƒã€å€Ÿç”¨ä¸ç”Ÿå‘½å‘¨æœŸç­‰ç‹¬ç‰¹çš„ç±»å‹ç³»ç»Ÿè®¾è®¡ï¼Œåœ¨ä¸ä¾èµ–åƒåœ¾å›æ”¶çš„å‰æä¸‹æä¾›å¯é çš„å†…å­˜ç®¡ç†ï¼ŒåŒæ—¶ä¿æŒä¸ C/C++ æ¥è¿‘çš„è¿è¡Œæ•ˆç‡ã€‚</p>
<h4 data-id="heading-2">1.2 ä¸ºä»€ä¹ˆé€‰æ‹©Rust</h4>
<ul>
<li>å®‰å…¨å¯é ï¼šåœ¨ç¼–è¯‘æœŸé˜²æ­¢æ•°æ®ç«äº‰ä¸æ‚¬å‚å¼•ç”¨ã€‚</li>
<li>é«˜æ€§èƒ½ï¼šé›¶æˆæœ¬æŠ½è±¡ã€é¢å‘æ€§èƒ½çš„æ ‡å‡†åº“ä¸ç¼–è¯‘å™¨ä¼˜åŒ–ã€‚</li>
<li>ç°ä»£ç”Ÿæ€ï¼šä½¿ç”¨ <code>cargo</code> è¿›è¡Œæ„å»ºã€æµ‹è¯•ä¸å‘å¸ƒï¼Œ<code>crates.io</code> æä¾›ä¸°å¯Œä¾èµ–ã€‚</li>
<li>è·¨å¹³å°ï¼šæ”¯æŒ Windowsã€macOSã€Linuxã€WebAssembly ä¸åµŒå…¥å¼ç­‰åœºæ™¯ã€‚</li>
<li>å·¥å…·å®Œå–„ï¼š<code>rustup</code> ç®¡ç†å¤šç‰ˆæœ¬å·¥å…·é“¾ï¼Œ<code>rust-analyzer</code> æä¾›é«˜æ•ˆ IDE ä½“éªŒã€‚</li>
</ul>
<h4 data-id="heading-3">1.3 æ ¸å¿ƒæ¦‚å¿µ</h4>
<ul>
<li>æ‰€æœ‰æƒä¸å€Ÿç”¨ï¼šé€šè¿‡ç¼–è¯‘æœŸè§„åˆ™ç¡®ä¿èµ„æºçš„å”¯ä¸€æ€§ä¸å¯æ§å…±äº«ã€‚</li>
<li>ç”Ÿå‘½å‘¨æœŸï¼šæè¿°å¼•ç”¨åœ¨ç¼–è¯‘æœŸçš„æœ‰æ•ˆèŒƒå›´ï¼Œé¿å…æ‚¬å‚æŒ‡é’ˆã€‚</li>
<li>Traitï¼šå®šä¹‰è¡Œä¸ºæ¥å£ï¼Œæ”¯æŒæ³›å‹ä¸å¤šæ€ã€‚</li>
<li>æ¨¡å¼åŒ¹é…ä¸æšä¸¾ï¼šé€šè¿‡ <code>match</code> å®ç°å®‰å…¨ä¸”è¡¨è¾¾åŠ›å¼ºçš„åˆ†æ”¯é€»è¾‘ã€‚</li>
<li>å®ä¸é›¶æˆæœ¬æŠ½è±¡ï¼šåœ¨ä¸å¢åŠ è¿è¡Œæ—¶å¼€é”€çš„å‰æä¸‹æå‡è¡¨è¾¾èƒ½åŠ›ã€‚</li>
</ul>
<h3 data-id="heading-4">äºŒã€Windowsæ­å»ºRustå¼€å‘ç¯å¢ƒ</h3>
<h4 data-id="heading-5">2.1 ç¯å¢ƒä¸å·¥å…·é“¾é€‰æ‹©</h4>
<ul>
<li>æ¨èä½¿ç”¨ MSVC å·¥å…·é“¾ï¼ˆVisual Studio C++ ç”Ÿæˆå·¥å…·ï¼‰ä»¥è·å¾—æ›´å¥½çš„å…¼å®¹æ€§ã€‚</li>
<li>GNU å·¥å…·é“¾é€‚åˆåŸºäº MinGW/MSYS2 çš„ç¯å¢ƒã€‚ä¸€èˆ¬å¼€å‘è€…é€‰æ‹© MSVC å³å¯ã€‚</li>
</ul>
<h4 data-id="heading-6">2.2 é€šè¿‡ rustup å®‰è£… Rust</h4>
<ul>
<li>ä½¿ç”¨å®‰è£…åŒ…ï¼šè®¿é—® Rust å®˜æ–¹ä¸‹è½½é¡µé¢ï¼Œä¸‹è½½å¹¶è¿è¡Œ <code>rustup-init.exe</code>ï¼ŒæŒ‰æç¤ºå®‰è£…ã€‚</li>
<li>ä½¿ç”¨åŒ…ç®¡ç†å™¨ï¼šå¦‚æœå·²å®‰è£… <code>winget</code>ï¼Œå¯æ‰§è¡Œï¼š</li>
</ul>
<pre><code class="hljs">winget install Rustlang.Rustup
</code></pre>
<p>å®‰è£…å®Œæˆåï¼Œæ‰“å¼€æ–°çš„ç»ˆç«¯éªŒè¯ï¼š</p>
<pre><code class="hljs language-css" lang="css">rustc <span class="hljs-attr">--version</span>
cargo <span class="hljs-attr">--version</span>
</code></pre>
<h4 data-id="heading-7">2.3 é…ç½®å·¥å…·é“¾</h4>
<p>æŸ¥è¯¢å½“å‰çŠ¶æ€ï¼š</p>
<pre><code class="hljs language-sql" lang="sql">rustup <span class="hljs-keyword">show</span>
</code></pre>
<p>è®¾ç½®é»˜è®¤ç¨³å®šç‰ˆï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">rustup <span class="hljs-keyword">default</span> stable
</code></pre>
<p>å®‰è£…å¹¶åˆ‡æ¢åˆ° MSVC å·¥å…·é“¾ï¼ˆå¦‚æœªé»˜è®¤å®‰è£…ï¼‰ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">rustup toolchain install stable-x86_64-pc-windows-msvc
rustup <span class="hljs-keyword">default</span> stable-x86_64-pc-windows-msvc
</code></pre>
<p>å¦‚éœ€ GNU å·¥å…·é“¾ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">rustup toolchain install stable-x86_64-pc-windows-gnu
rustup <span class="hljs-keyword">default</span> stable-x86_64-pc-windows-gnu
</code></pre>
<h4 data-id="heading-8">2.4 å®‰è£… MSVC ä¾èµ–</h4>
<p>è‹¥ä½¿ç”¨ MSVCï¼Œè¯·å®‰è£… Visual Studio Build Toolsï¼Œå¹¶é€‰æ‹©â€œä½¿ç”¨ C++ çš„æ¡Œé¢å¼€å‘â€æˆ–è‡³å°‘åŒ…å«â€œMSVCã€Windows SDK ä¸ CMakeâ€ç»„ä»¶ã€‚</p>
<h4 data-id="heading-9">2.5 å®‰è£…å¸¸ç”¨ç»„ä»¶</h4>
<pre><code class="hljs language-csharp" lang="csharp">rustup component <span class="hljs-keyword">add</span> rustfmt clippy
</code></pre>
<h4 data-id="heading-10">2.6 å¼€å‘å·¥å…·å»ºè®®</h4>
<ul>
<li>VS Codeï¼šå®‰è£… <code>Rust Analyzer</code> æ‰©å±•ä»¥è·å¾—è¯­æ³•é«˜äº®ã€è¡¥å…¨ä¸è¯Šæ–­ã€‚</li>
<li>ç»ˆç«¯ï¼šä½¿ç”¨ Windows Terminal æˆ– PowerShell ä»¥è·å¾—æ›´å¥½çš„ä½“éªŒã€‚</li>
</ul>
<h4 data-id="heading-11">2.7 å¸¸è§é—®é¢˜</h4>
<ul>
<li><code>PATH</code> æœªç”Ÿæ•ˆï¼šé‡æ–°æ‰“å¼€ç»ˆç«¯æˆ–åœ¨ç³»ç»Ÿç¯å¢ƒå˜é‡ä¸­ç¡®è®¤ <code>~\.cargo\bin</code> å·²æ·»åŠ ã€‚</li>
<li>å¤šç‰ˆæœ¬å†²çªï¼šæ£€æŸ¥ <code>where rustc</code> ä¸ <code>where cargo</code>ï¼Œç¡®ä¿æŒ‡å‘ <code>~\.cargo\bin</code>ã€‚</li>
<li>ä»£ç†ä¸ç½‘ç»œï¼šå¿…è¦æ—¶é…ç½®ç»ˆç«¯ä»£ç†åå†æ‰§è¡Œ <code>rustup update</code>ã€‚</li>
</ul>
<h3 data-id="heading-12">ä¸‰ã€MacOSæ­å»ºRustå¼€å‘ç¯å¢ƒ</h3>
<h4 data-id="heading-13">3.1 å®‰è£…å‘½ä»¤è¡Œå·¥å…·</h4>
<pre><code class="hljs language-lua" lang="lua">xcode-<span class="hljs-built_in">select</span> <span class="hljs-comment">--install</span>
</code></pre>
<h4 data-id="heading-14">3.2 å®‰è£… Rust</h4>
<p>é€šè¿‡ <code>rustup</code> å®‰è£…ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">curl https:<span class="hljs-comment">//sh.rustup.rs -sSf | sh</span>
</code></pre>
<p>å®‰è£…å®Œæˆåæ‰§è¡Œï¼š</p>
<pre><code class="hljs language-scss" lang="scss">rustc <span class="hljs-attr">--version</span>
cargo <span class="hljs-attr">--version</span>
rustup default stable
</code></pre>
<h4 data-id="heading-15">3.3 å¸¸ç”¨ç»„ä»¶ä¸ IDE</h4>
<pre><code class="hljs language-csharp" lang="csharp">rustup component <span class="hljs-keyword">add</span> rustfmt clippy
</code></pre>
<ul>
<li>VS Code å®‰è£… <code>Rust Analyzer</code> æ‰©å±•ã€‚</li>
</ul>
<h3 data-id="heading-16">å››ã€Ubuntuæ­å»ºRustå¼€å‘ç¯å¢ƒ</h3>
<h4 data-id="heading-17">4.1 å®‰è£…åŸºç¡€ä¾èµ–</h4>
<pre><code class="hljs language-arduino" lang="arduino">sudo apt update
sudo apt install -y build-essential curl pkg-config libssl-dev
</code></pre>
<h4 data-id="heading-18">4.2 å®‰è£… Rust</h4>
<pre><code class="hljs language-arduino" lang="arduino">curl https:<span class="hljs-comment">//sh.rustup.rs -sSf | sh</span>
</code></pre>
<p>é‡æ–°åŠ è½½ç¯å¢ƒæˆ–å¼€å¯æ–°ç»ˆç«¯åéªŒè¯ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">rustc <span class="hljs-attr">--version</span>
cargo <span class="hljs-attr">--version</span>
rustup default stable
</code></pre>
<h4 data-id="heading-19">4.3 å¸¸ç”¨ç»„ä»¶</h4>
<pre><code class="hljs language-csharp" lang="csharp">rustup component <span class="hljs-keyword">add</span> rustfmt clippy
</code></pre>
<h3 data-id="heading-20">äº”ã€Rustå¿«é€Ÿå…¥é—¨</h3>
<h4 data-id="heading-21">5.1 ä½¿ç”¨ Cargo åˆ›å»ºé¡¹ç›®</h4>
<pre><code class="hljs language-sql" lang="sql">cargo <span class="hljs-keyword">new</span> hello_rust <span class="hljs-comment">--bin</span>
cd hello_rust
</code></pre>
<h4 data-id="heading-22">5.2 ç¼–å†™å¹¶è¿è¡Œ</h4>
<p>ç¼–è¾‘ <code>src/main.rs</code>ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-function">fn <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    println!(<span class="hljs-string">"Hello, Rust"</span>);
}
</code></pre>
<p>è¿è¡Œï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">cargo run
</code></pre>
<h4 data-id="heading-23">5.3 ç®¡ç†ä¾èµ–</h4>
<p>åœ¨ <code>Cargo.toml</code> æ·»åŠ ä¾èµ–ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-section">[dependencies]</span>
<span class="hljs-attr">serde</span> = { version = <span class="hljs-string">"1.0"</span>, features = [<span class="hljs-string">"derive"</span>] }
<span class="hljs-attr">serde_json</span> = <span class="hljs-string">"1.0"</span>
</code></pre>
<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> serde::{Deserialize, Serialize};

<span class="hljs-meta">#[derive(Serialize, Deserialize)]</span>
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">User</span> {
    id: <span class="hljs-type">u64</span>,
    name: <span class="hljs-type">String</span>,
}

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">u</span> = User { id: <span class="hljs-number">1</span>, name: <span class="hljs-string">"Alice"</span>.<span class="hljs-title function_ invoke__">to_string</span>() };
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">s</span> = serde_json::<span class="hljs-title function_ invoke__">to_string</span>(&amp;u).<span class="hljs-title function_ invoke__">unwrap</span>();
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"{}"</span>, s);
}
</code></pre>
<h4 data-id="heading-24">5.4 ç¼–å†™ä¸è¿è¡Œæµ‹è¯•</h4>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-meta">#[cfg(test)]</span>
<span class="hljs-keyword">mod</span> tests {
    <span class="hljs-meta">#[test]</span>
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">it_works</span>() {
        <span class="hljs-built_in">assert_eq!</span>(<span class="hljs-number">2</span> + <span class="hljs-number">2</span>, <span class="hljs-number">4</span>);
    }
}
</code></pre>
<p>è¿è¡Œæµ‹è¯•ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">cargo <span class="hljs-built_in">test</span>
</code></pre>
<h4 data-id="heading-25">5.5 æ ¼å¼åŒ–ä¸é™æ€æ£€æŸ¥</h4>
<pre><code class="hljs language-bash" lang="bash">cargo <span class="hljs-built_in">fmt</span>
cargo clippy
</code></pre>
<h4 data-id="heading-26">5.6 æ„å»ºå‘å¸ƒç‰ˆæœ¬</h4>
<pre><code class="hljs language-arduino" lang="arduino">cargo build --release
</code></pre>
<p>ç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶ä½äº <code>target/release/</code>ã€‚</p>
<h4 data-id="heading-27">5.7 å­¦ä¹ èµ„æºä¸ä¸‹ä¸€æ­¥</h4>
<ul>
<li>å®˜æ–¹æ–‡æ¡£ä¸æ•™ç¨‹ï¼šã€ŠThe Rust Programming Languageã€‹ã€ŠRust By Exampleã€‹ã€‚</li>
<li>ç»ƒä¹ å»ºè®®ï¼šç¼–å†™å‘½ä»¤è¡Œå·¥å…·ã€HTTP æœåŠ¡æˆ– WebAssembly å°é¡¹ç›®ä»¥ç†Ÿæ‚‰ç”Ÿæ€ã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[RuståŸºæœ¬è¯­æ³•]]></title>    <link>https://juejin.cn/post/7572387068314402843</link>    <guid>https://juejin.cn/post/7572387068314402843</guid>    <pubDate>2025-11-14T14:16:01.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572387068314402843" data-draft-id="7572387068314386459" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="RuståŸºæœ¬è¯­æ³•"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-14T14:16:01.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Javaç§æ•™"/> <meta itemprop="url" content="https://juejin.cn/user/3394924618197325"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            RuståŸºæœ¬è¯­æ³•
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3394924618197325/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Javaç§æ•™
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-14T14:16:01.000Z" title="Fri Nov 14 2025 14:16:01 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€RuståŸºç¡€æ¦‚è¿°</h2>
<h4 data-id="heading-1">1.1 è¯­æ³•è®¾è®¡ç›®æ ‡</h4>
<ul>
<li>å®‰å…¨ã€å¹¶å‘ã€æ€§èƒ½å¹¶é‡ï¼Œé™æ€å¼ºç±»å‹ä¸é›¶æˆæœ¬æŠ½è±¡ã€‚</li>
<li>è¡¨è¾¾å¼ä¸ºæ ¸å¿ƒï¼Œå°½é‡åœ¨ç¼–è¯‘æœŸå‘ç°é—®é¢˜ã€‚</li>
<li>ç”Ÿæ€ä¸å·¥å…·é“¾ï¼š<code>rustup</code> ç®¡ç†å·¥å…·é“¾ï¼Œ<code>cargo</code> æ„å»ºä¸ä¾èµ–ç®¡ç†ï¼Œ<code>rust-analyzer</code> æå‡ IDE ä½“éªŒã€‚</li>
</ul>
<h4 data-id="heading-2">1.2 ç¨‹åºåŸºæœ¬ç»“æ„</h4>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-function">fn <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    println!(<span class="hljs-string">"Hello, Rust"</span>);
}
</code></pre>
<h3 data-id="heading-3">äºŒã€å˜é‡ã€æ‰€æœ‰æƒä¸å€Ÿç”¨</h3>
<h4 data-id="heading-4">2.1 å˜é‡ã€å¸¸é‡ä¸é®è”½</h4>
<p>è®²è§£ï¼šå˜é‡é»˜è®¤ä¸å¯å˜ï¼Œä½¿ç”¨ <code>mut</code> å£°æ˜å¯å˜å˜é‡ï¼›é®è”½å…è®¸ç”¨åŒåæ–°ç»‘å®šè¦†ç›–æ—§å€¼ä½†ä¿æŒä¸å¯å˜è¯­ä¹‰ï¼›<code>const</code> ä¸ºç¼–è¯‘æœŸå¸¸é‡ï¼Œéœ€æ˜¾å¼ç±»å‹ã€‚</p>
<p>ç¤ºä¾‹ï¼šå®Œæ•´å¯æ‰§è¡Œçš„å˜é‡ã€é®è”½ä¸å¸¸é‡æ¼”ç¤º</p>
<pre><code class="hljs language-ini" lang="ini">fn main() {
    let <span class="hljs-attr">x</span> = <span class="hljs-number">1</span><span class="hljs-comment">;</span>
    let <span class="hljs-attr">x</span> = x + <span class="hljs-number">1</span><span class="hljs-comment">;</span>
    let mut <span class="hljs-attr">y</span> = <span class="hljs-number">0</span><span class="hljs-comment">;</span>
    y += 1<span class="hljs-comment">;</span>
    const MAX: <span class="hljs-attr">u32</span> = <span class="hljs-number">100_000</span><span class="hljs-comment">;</span>
    println!("<span class="hljs-attr">x</span>={}<span class="hljs-string">", x);
    println!("</span>y={}<span class="hljs-string">", y);
    println!("</span>MAX={}<span class="hljs-string">", MAX);
}
</span></code></pre>
<h4 data-id="heading-5">2.2 æ‰€æœ‰æƒã€ç§»åŠ¨ã€å¤åˆ¶ä¸å…‹éš†</h4>
<p>è®²è§£ï¼š<code>String</code> ç­‰å †åˆ†é…ç±»å‹åœ¨èµ‹å€¼æ—¶ä¼šå‘ç”Ÿæ‰€æœ‰æƒç§»åŠ¨ï¼›<code>clone</code> æ‰§è¡Œæ·±æ‹·è´ä¿ç•™ä¸¤ä¸ªç‹¬ç«‹æ‰€æœ‰æƒï¼›è¯¸å¦‚æ•´æ•°ç­‰å®ç° <code>Copy</code> çš„æ ‡é‡ç±»å‹æŒ‰å€¼å¤åˆ¶ï¼Œæ— éœ€ç§»åŠ¨ã€‚</p>
<p>ç¤ºä¾‹ï¼šå®Œæ•´å¯æ‰§è¡Œçš„æ‰€æœ‰æƒä¸å…‹éš†æ¼”ç¤º</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">s</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">"hi"</span>);
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">t</span> = s;
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"moved: {}"</span>, t);
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">u</span> = t.<span class="hljs-title function_ invoke__">clone</span>();
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"cloned: t={}, u={}"</span>, t, u);

    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">a</span> = <span class="hljs-number">1</span>;
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">b</span> = a;
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"copy: a={}, b={}"</span>, a, b);
}
</code></pre>
<h4 data-id="heading-6">2.3 å€Ÿç”¨ä¸å¯å˜å€Ÿç”¨</h4>
<p>è®²è§£ï¼šä¸å¯å˜å€Ÿç”¨å…è®¸åªè¯»è®¿é—®ï¼›å¯å˜å€Ÿç”¨åœ¨åŒä¸€æ—¶åˆ»åªèƒ½å­˜åœ¨ä¸€ä¸ªä»¥ä¿è¯æ•°æ®ä¸€è‡´æ€§ï¼›å€Ÿç”¨ä¸è½¬ç§»æ‰€æœ‰æƒã€‚</p>
<p>ç¤ºä¾‹ï¼šå®Œæ•´å¯æ‰§è¡Œçš„å€Ÿç”¨æ¼”ç¤º</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">len</span>(s: &amp;<span class="hljs-type">String</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">usize</span> { s.<span class="hljs-title function_ invoke__">len</span>() }
<span class="hljs-keyword">fn</span> <span class="hljs-title function_">push_exclaim</span>(s: &amp;<span class="hljs-keyword">mut</span> <span class="hljs-type">String</span>) { s.<span class="hljs-title function_ invoke__">push_str</span>(<span class="hljs-string">"!"</span>) }

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">s</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">"a"</span>);
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">l</span> = <span class="hljs-title function_ invoke__">len</span>(&amp;s);
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"len={}"</span>, l);
    <span class="hljs-title function_ invoke__">push_exclaim</span>(&amp;<span class="hljs-keyword">mut</span> s);
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"{}"</span>, s);
}
</code></pre>
<h4 data-id="heading-7">2.4 åˆ‡ç‰‡ä¸å­—ç¬¦ä¸²</h4>
<p>è®²è§£ï¼šåˆ‡ç‰‡æ˜¯å¯¹é›†åˆçš„åªè¯»è§†å›¾ï¼Œä¸æ‹¥æœ‰æ•°æ®ï¼›å­—ç¬¦ä¸²åˆ‡ç‰‡æŒ‰å­—èŠ‚ç´¢å¼•ï¼Œéœ€ä¿è¯è½åœ¨ UTF-8 å­—ç¬¦è¾¹ç•Œã€‚</p>
<p>ç¤ºä¾‹ï¼šå®Œæ•´å¯æ‰§è¡Œçš„åˆ‡ç‰‡æ¼”ç¤º</p>
<pre><code class="hljs language-ini" lang="ini">fn main() {
    let <span class="hljs-attr">a</span> = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>]<span class="hljs-comment">;</span>
    let <span class="hljs-attr">slice</span> = &amp;a[<span class="hljs-number">1</span>..<span class="hljs-number">3</span>]<span class="hljs-comment">;</span>
    println!("{:?}", slice)<span class="hljs-comment">;</span>

    let <span class="hljs-attr">s</span> = String::from(<span class="hljs-string">"hello"</span>)<span class="hljs-comment">;</span>
    let r: &amp;<span class="hljs-attr">str</span> = &amp;s[<span class="hljs-number">0</span>..<span class="hljs-number">2</span>]<span class="hljs-comment">;</span>
    println!("{}", r)<span class="hljs-comment">;</span>
}
</code></pre>
<h3 data-id="heading-8">ä¸‰ã€ç±»å‹ä¸æ•°æ®ç»“æ„</h3>
<h4 data-id="heading-9">3.1 åŸºæœ¬ç±»å‹ã€å…ƒç»„ã€æ•°ç»„ä¸åˆ‡ç‰‡</h4>
<p>è®²è§£ï¼šRust çš„æ ‡é‡ä¸å¤åˆç±»å‹å…·å¤‡æ˜¾å¼ç±»å‹ä¸å›ºå®šå¤§å°ï¼›æ•°ç»„åœ¨æ ˆä¸Šåˆ†é…ã€é•¿åº¦å›ºå®šï¼›åˆ‡ç‰‡ä¸ºåªè¯»è§†å›¾ã€‚</p>
<p>ç¤ºä¾‹ï¼šå®Œæ•´å¯æ‰§è¡Œçš„ç±»å‹æ¼”ç¤º</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">i</span>: <span class="hljs-type">i32</span> = -<span class="hljs-number">1</span>;
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">f</span>: <span class="hljs-type">f64</span> = <span class="hljs-number">3.14</span>;
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">b</span>: <span class="hljs-type">bool</span> = <span class="hljs-literal">true</span>;
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">c</span>: <span class="hljs-type">char</span> = <span class="hljs-string">'ä¸­'</span>;
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">tup</span>: (<span class="hljs-type">i32</span>, &amp;<span class="hljs-type">str</span>) = (<span class="hljs-number">7</span>, <span class="hljs-string">"a"</span>);
    <span class="hljs-keyword">let</span> (n, s) = tup;
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">arr</span>: [<span class="hljs-type">i32</span>; <span class="hljs-number">3</span>] = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>];
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">slice</span>: &amp;[<span class="hljs-type">i32</span>] = &amp;arr[..];
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"i={}, f={}, b={}, c={}"</span>, i, f, b, c);
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"tup=({}, {})"</span>, n, s);
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"arr={:?}"</span>, arr);
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"slice={:?}"</span>, slice);
}
</code></pre>
<h4 data-id="heading-10">3.2 String ä¸ &amp;str</h4>
<p>è®²è§£ï¼š<code>String</code> å¯å˜ä¸”æ‹¥æœ‰å †æ•°æ®ï¼›<code>&amp;str</code> ä¸ºåªè¯»å€Ÿç”¨çš„å­—ç¬¦ä¸²è§†å›¾ï¼›ä¸¤è€…äº’è¡¥ä½¿ç”¨ã€‚</p>
<p>ç¤ºä¾‹ï¼šå®Œæ•´å¯æ‰§è¡Œçš„å­—ç¬¦ä¸²æ¼”ç¤º</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">s</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">"hi"</span>);
    s.<span class="hljs-title function_ invoke__">push_str</span>(<span class="hljs-string">"!"</span>);
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">r</span>: &amp;<span class="hljs-type">str</span> = &amp;s;
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"String={}"</span>, s);
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"&amp;str={}"</span>, r);
}
</code></pre>
<h4 data-id="heading-11">3.3 ç»“æ„ä½“ä¸å®ç°</h4>
<p>è®²è§£ï¼š<code>struct</code> å®šä¹‰æ•°æ®ç»“æ„ï¼Œ<code>impl</code> å—ä¸­å¯æ·»åŠ å…³è”å‡½æ•°ä¸æ–¹æ³•ï¼›æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºæ¥æ”¶è€… <code>&amp;self</code> æˆ– <code>&amp;mut self</code>ã€‚</p>
<p>ç¤ºä¾‹ï¼šå®Œæ•´å¯æ‰§è¡Œçš„ç»“æ„ä½“æ–¹æ³•æ¼”ç¤º</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Point</span> { x: <span class="hljs-type">i32</span>, y: <span class="hljs-type">i32</span> }
<span class="hljs-keyword">impl</span> <span class="hljs-title class_">Point</span> {
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">new</span>(x: <span class="hljs-type">i32</span>, y: <span class="hljs-type">i32</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-keyword">Self</span> { <span class="hljs-keyword">Self</span> { x, y } }
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">norm</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">f64</span> { ((<span class="hljs-keyword">self</span>.x.<span class="hljs-title function_ invoke__">pow</span>(<span class="hljs-number">2</span>) + <span class="hljs-keyword">self</span>.y.<span class="hljs-title function_ invoke__">pow</span>(<span class="hljs-number">2</span>)) <span class="hljs-keyword">as</span> <span class="hljs-type">f64</span>).<span class="hljs-title function_ invoke__">sqrt</span>() }
}

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">p</span> = Point::<span class="hljs-title function_ invoke__">new</span>(<span class="hljs-number">3</span>, <span class="hljs-number">4</span>);
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"{}"</span>, p.<span class="hljs-title function_ invoke__">norm</span>());
}
</code></pre>
<h4 data-id="heading-12">3.4 æšä¸¾ä¸æ¨¡å¼åŒ¹é…</h4>
<p>è®²è§£ï¼š<code>enum</code> å¯è¡¨è¾¾ä»£æ•°æ•°æ®ç±»å‹ï¼›<code>match</code> è¦†ç›–æ‰€æœ‰åˆ†æ”¯å¹¶æ”¯æŒè§£æ„ä¸æ¡ä»¶å®ˆå«ã€‚</p>
<p>ç¤ºä¾‹ï¼šå®Œæ•´å¯æ‰§è¡Œçš„æšä¸¾åŒ¹é…æ¼”ç¤º</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">enum</span> <span class="hljs-title class_">Shape</span> { <span class="hljs-title function_ invoke__">Circle</span>(<span class="hljs-type">f64</span>), Rect { w: <span class="hljs-type">i32</span>, h: <span class="hljs-type">i32</span> } }
<span class="hljs-keyword">fn</span> <span class="hljs-title function_">area</span>(s: Shape) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">f64</span> {
    <span class="hljs-keyword">match</span> s {
        Shape::<span class="hljs-title function_ invoke__">Circle</span>(r) =&gt; <span class="hljs-number">3.14159</span> * r * r,
        Shape::Rect { w, h } =&gt; (w * h) <span class="hljs-keyword">as</span> <span class="hljs-type">f64</span>,
    }
}

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">c</span> = Shape::<span class="hljs-title function_ invoke__">Circle</span>(<span class="hljs-number">2.0</span>);
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">r</span> = Shape::Rect { w: <span class="hljs-number">3</span>, h: <span class="hljs-number">4</span> };
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"{}"</span>, <span class="hljs-title function_ invoke__">area</span>(c));
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"{}"</span>, <span class="hljs-title function_ invoke__">area</span>(r));
}
</code></pre>
<h4 data-id="heading-13">3.5 Option ä¸ Result</h4>
<p>è®²è§£ï¼š<code>Option</code> è¡¨ç¤ºå¯ç©ºå€¼ï¼Œä¿ƒä½¿æ˜¾å¼å¤„ç†ç¼ºå¤±æƒ…å†µï¼›<code>Result</code> è¡¨ç¤ºå¯èƒ½å‡ºé”™çš„æ“ä½œï¼Œç»“åˆ <code>match</code> æˆ– <code>?</code> ä¼ æ’­é”™è¯¯ã€‚</p>
<p>ç¤ºä¾‹ï¼šå®Œæ•´å¯æ‰§è¡Œçš„ Option ä¸ Result æ¼”ç¤º</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">find</span>(v: &amp;[<span class="hljs-type">i32</span>], x: <span class="hljs-type">i32</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Option</span>&lt;<span class="hljs-type">usize</span>&gt; {
    <span class="hljs-title function_ invoke__">for</span> (i, n) <span class="hljs-keyword">in</span> v.<span class="hljs-title function_ invoke__">iter</span>().<span class="hljs-title function_ invoke__">enumerate</span>() {
        <span class="hljs-keyword">if</span> *n == x { <span class="hljs-keyword">return</span> <span class="hljs-title function_ invoke__">Some</span>(i); }
    }
    <span class="hljs-literal">None</span>
}

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">v</span> = <span class="hljs-built_in">vec!</span>[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>];
    <span class="hljs-keyword">match</span> <span class="hljs-title function_ invoke__">find</span>(&amp;v, <span class="hljs-number">2</span>) {
        <span class="hljs-title function_ invoke__">Some</span>(i) =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">"found at {}"</span>, i),
        <span class="hljs-literal">None</span> =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">"not found"</span>),
    }

    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">ok</span> = <span class="hljs-string">"42"</span>.parse::&lt;<span class="hljs-type">i32</span>&gt;();
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">err</span> = <span class="hljs-string">"x"</span>.parse::&lt;<span class="hljs-type">i32</span>&gt;();
    <span class="hljs-keyword">match</span> ok { <span class="hljs-title function_ invoke__">Ok</span>(n) =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">"ok {}"</span>, n), <span class="hljs-title function_ invoke__">Err</span>(e) =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">"error {}"</span>, e) }
    <span class="hljs-keyword">match</span> err { <span class="hljs-title function_ invoke__">Ok</span>(n) =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">"ok {}"</span>, n), <span class="hljs-title function_ invoke__">Err</span>(e) =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">"error {}"</span>, e) }
}
</code></pre>
<h3 data-id="heading-14">å››ã€å‡½æ•°ã€æ§åˆ¶æµä¸é—­åŒ…</h3>
<h4 data-id="heading-15">4.1 å‡½æ•°ä¸è¿”å›å€¼</h4>
<p>è®²è§£ï¼šå‡½æ•°è¿”å›å€¼ä»¥å°¾è¡¨è¾¾å¼å½¢å¼å‡ºç°ï¼Œæ— éœ€ <code>return</code>ï¼›ç±»å‹æ¨æ–­åœ¨å‚æ•°ä½ç½®è¾ƒä¿å®ˆï¼Œéœ€æ˜¾å¼ç±»å‹ã€‚</p>
<p>ç¤ºä¾‹ï¼šå®Œæ•´å¯æ‰§è¡Œçš„å‡½æ•°æ¼”ç¤º</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">add</span>(a: <span class="hljs-type">i32</span>, b: <span class="hljs-type">i32</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">i32</span> { a + b }

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">r</span> = <span class="hljs-title function_ invoke__">add</span>(<span class="hljs-number">2</span>, <span class="hljs-number">3</span>);
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"{}"</span>, r);
}
</code></pre>
<h4 data-id="heading-16">4.2 æ§åˆ¶æµ</h4>
<p>è®²è§£ï¼š<code>if</code> æ˜¯è¡¨è¾¾å¼å¯èµ‹å€¼ï¼›<code>for</code> åŸºäºè¿­ä»£å™¨ï¼›<code>loop</code> å¯æ„å»ºæ— é™å¾ªç¯å¹¶é€šè¿‡ <code>break</code> é€€å‡ºã€‚</p>
<p>ç¤ºä¾‹ï¼šå®Œæ•´å¯æ‰§è¡Œçš„æ§åˆ¶æµæ¼”ç¤º</p>
<pre><code class="hljs language-ini" lang="ini">fn main() {
    let <span class="hljs-attr">x</span> = if <span class="hljs-literal">true</span> { <span class="hljs-number">1</span> } else { <span class="hljs-number">2</span> }<span class="hljs-comment">;</span>
    println!("{}", x)<span class="hljs-comment">;</span>
    for i in 0..3 { println!("{}", i)<span class="hljs-comment">; }</span>
    let mut <span class="hljs-attr">n</span> = <span class="hljs-number">0</span><span class="hljs-comment">;</span>
    while n &lt; 3 { n += 1<span class="hljs-comment">; println!("{}", n); }</span>
    let mut <span class="hljs-attr">k</span> = <span class="hljs-number">0</span><span class="hljs-comment">;</span>
    loop {
        k += 1<span class="hljs-comment">;</span>
        if <span class="hljs-attr">k</span> == <span class="hljs-number">2</span> { break<span class="hljs-comment">; }</span>
    }
    println!("{}", k)<span class="hljs-comment">;</span>
}
</code></pre>
<h4 data-id="heading-17">4.3 match ä¸ if let / while let</h4>
<p>è®²è§£ï¼š<code>match</code> è¦è¦†ç›–æ‰€æœ‰å¯èƒ½åˆ†æ”¯ï¼›<code>if let</code>ã€<code>while let</code> ç®€åŒ–å¯¹ç‰¹å®šæ¨¡å¼çš„å¤„ç†ã€‚</p>
<p>ç¤ºä¾‹ï¼šå®Œæ•´å¯æ‰§è¡Œçš„æ¨¡å¼æ¼”ç¤º</p>
<pre><code class="hljs language-scss" lang="scss">fn <span class="hljs-selector-tag">main</span>() {
    let v = <span class="hljs-built_in">Some</span>(<span class="hljs-number">1</span>);
    match v {
        <span class="hljs-built_in">Some</span>(n) if n &gt; <span class="hljs-number">0</span> =&gt; println!("positive"),
        <span class="hljs-built_in">Some</span>(_) =&gt; println!("non-positive"),
        <span class="hljs-attribute">None</span> =&gt; println!("none"),
    }
    if let <span class="hljs-built_in">Some</span>(n) = v { println!("{}", n); }

    let mut it = <span class="hljs-built_in">Some</span>(<span class="hljs-number">0</span>);
    while let <span class="hljs-built_in">Some</span>(n) = it {
        if n == <span class="hljs-number">2</span> { it = <span class="hljs-attribute">None</span>; } else { it = <span class="hljs-built_in">Some</span>(n + <span class="hljs-number">1</span>); }
        println!("{}", n);
    }
}
</code></pre>
<h4 data-id="heading-18">4.4 é—­åŒ…ä¸æ•è·</h4>
<p>è®²è§£ï¼šé—­åŒ…å¯è‡ªåŠ¨æ¨æ–­å‚æ•°ä¸è¿”å›ç±»å‹ï¼Œå¹¶æŒ‰éœ€ä»¥ä¸å¯å˜/å¯å˜/æŒ‰å€¼æ•è·ç¯å¢ƒå˜é‡ã€‚</p>
<p>ç¤ºä¾‹ï¼šå®Œæ•´å¯æ‰§è¡Œçš„é—­åŒ…æ¼”ç¤º</p>
<pre><code class="hljs language-ini" lang="ini">fn main() {
    let mut <span class="hljs-attr">n</span> = <span class="hljs-number">0</span><span class="hljs-comment">;</span>
    let mut <span class="hljs-attr">f</span> = |x: i32| { n += x<span class="hljs-comment">; n };</span>
    println!("{}", f(2))<span class="hljs-comment">;</span>
    println!("{}", f(3))<span class="hljs-comment">;</span>

    let <span class="hljs-attr">v</span> = vec![<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]<span class="hljs-comment">;</span>
    let s: <span class="hljs-attr">i32</span> = v.iter().map(|x| x * <span class="hljs-number">2</span>).sum()<span class="hljs-comment">;</span>
    println!("{}", s)<span class="hljs-comment">;</span>
}
</code></pre>
<h3 data-id="heading-19">äº”ã€æ¨¡å—ã€æ³›å‹ã€ç”Ÿå‘½å‘¨æœŸä¸å¹¶å‘</h3>
<h4 data-id="heading-20">5.1 æ¨¡å—ä¸åŒ…ç»“æ„</h4>
<p>è®²è§£ï¼š<code>mod</code> å®šä¹‰å­æ¨¡å—ï¼Œ<code>pub</code> å†³å®šå¯¹å¤–å¯è§æ€§ï¼›<code>use</code> ç®€åŒ–è·¯å¾„ï¼›äºŒè¿›åˆ¶ crate å…¥å£ä¸º <code>main.rs</code>ã€‚ç¤ºä¾‹ä»¥å†…è”æ¨¡å—å±•ç¤ºã€‚</p>
<p>ç¤ºä¾‹ï¼šå®Œæ•´å¯æ‰§è¡Œçš„æ¨¡å—æ¼”ç¤º</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">mod</span> utils {
    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">greet</span>(name: &amp;<span class="hljs-type">str</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span> { <span class="hljs-built_in">format!</span>(<span class="hljs-string">"Hello, {}"</span>, name) }
}
<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">s</span> = utils::<span class="hljs-title function_ invoke__">greet</span>(<span class="hljs-string">"Rust"</span>);
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"{}"</span>, s);
}
</code></pre>
<h4 data-id="heading-21">5.2 Trait ä¸æ³›å‹</h4>
<p>è®²è§£ï¼šTrait æè¿°è¡Œä¸ºæ¥å£ï¼›æ³›å‹ç»“åˆ trait bounds å®ç°çº¦æŸï¼›é›¶æˆæœ¬æŠ½è±¡é¿å…è¿è¡Œæ—¶å¼€é”€ã€‚</p>
<p>ç¤ºä¾‹ï¼šå®Œæ•´å¯æ‰§è¡Œçš„ trait ä¸æ³›å‹æ¼”ç¤º</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">trait</span> <span class="hljs-title class_">Area</span> { <span class="hljs-keyword">fn</span> <span class="hljs-title function_">area</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">f64</span>; }
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">Circle</span> { r: <span class="hljs-type">f64</span> }
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">Rect</span> { w: <span class="hljs-type">f64</span>, h: <span class="hljs-type">f64</span> }
<span class="hljs-keyword">impl</span> <span class="hljs-title class_">Area</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">Circle</span> { <span class="hljs-keyword">fn</span> <span class="hljs-title function_">area</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">f64</span> { <span class="hljs-number">3.14159</span> * <span class="hljs-keyword">self</span>.r * <span class="hljs-keyword">self</span>.r } }
<span class="hljs-keyword">impl</span> <span class="hljs-title class_">Area</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">Rect</span> { <span class="hljs-keyword">fn</span> <span class="hljs-title function_">area</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">f64</span> { <span class="hljs-keyword">self</span>.w * <span class="hljs-keyword">self</span>.h } }
<span class="hljs-keyword">fn</span> <span class="hljs-title function_">sum</span>&lt;T: std::ops::Add&lt;Output=T&gt; + <span class="hljs-built_in">Copy</span>&gt;(a: T, b: T) <span class="hljs-punctuation">-&gt;</span> T { a + b }
<span class="hljs-keyword">fn</span> <span class="hljs-title function_">print_area</span>&lt;T: Area&gt;(s: &amp;T) { <span class="hljs-built_in">println!</span>(<span class="hljs-string">"{}"</span>, s.<span class="hljs-title function_ invoke__">area</span>()); }

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">c</span> = Circle { r: <span class="hljs-number">2.0</span> };
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">r</span> = Rect { w: <span class="hljs-number">3.0</span>, h: <span class="hljs-number">4.0</span> };
    <span class="hljs-title function_ invoke__">print_area</span>(&amp;c);
    <span class="hljs-title function_ invoke__">print_area</span>(&amp;r);
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"{}"</span>, <span class="hljs-title function_ invoke__">sum</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>));
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"{}"</span>, <span class="hljs-title function_ invoke__">sum</span>(<span class="hljs-number">1.5</span>, <span class="hljs-number">2.5</span>));
}
</code></pre>
<h4 data-id="heading-22">5.3 ç”Ÿå‘½å‘¨æœŸ</h4>
<p>è®²è§£ï¼šç”Ÿå‘½å‘¨æœŸå‚æ•°å£°æ˜å¼•ç”¨è‡³å°‘å­˜æ´»åˆ°è¿”å›å€¼ä½¿ç”¨å®Œï¼›ç¼–è¯‘å™¨å€ŸåŠ©çœç•¥è§„åˆ™è‡ªåŠ¨æ¨æ–­å¤šæ•°åœºæ™¯ã€‚</p>
<p>ç¤ºä¾‹ï¼šå®Œæ•´å¯æ‰§è¡Œçš„ç”Ÿå‘½å‘¨æœŸæ¼”ç¤º</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">longest</span>&lt;<span class="hljs-symbol">'a</span>&gt;(x: &amp;<span class="hljs-symbol">'a</span> <span class="hljs-type">str</span>, y: &amp;<span class="hljs-symbol">'a</span> <span class="hljs-type">str</span>) <span class="hljs-punctuation">-&gt;</span> &amp;<span class="hljs-symbol">'a</span> <span class="hljs-type">str</span> {
    <span class="hljs-keyword">if</span> x.<span class="hljs-title function_ invoke__">len</span>() &gt; y.<span class="hljs-title function_ invoke__">len</span>() { x } <span class="hljs-keyword">else</span> { y }
}

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">a</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">"abcd"</span>);
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">b</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">"xyz"</span>);
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">r</span> = <span class="hljs-title function_ invoke__">longest</span>(&amp;a, &amp;b);
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"{}"</span>, r);
}
</code></pre>
<h4 data-id="heading-23">5.4 é›†åˆä¸è¿­ä»£å™¨</h4>
<p>è®²è§£ï¼šé›†åˆä½äºæ ‡å‡†åº“ï¼›è¿­ä»£å™¨é“¾æ”¯æŒæƒ°æ€§è®¡ç®—ä¸ç»„åˆæ“ä½œï¼›<code>HashMap</code> æä¾›é”®å€¼å­˜å‚¨ä¸å€Ÿç”¨è®¿é—®ã€‚</p>
<p>ç¤ºä¾‹ï¼šå®Œæ•´å¯æ‰§è¡Œçš„é›†åˆä¸è¿­ä»£å™¨æ¼”ç¤º</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> std::collections::HashMap;

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">v</span> = <span class="hljs-built_in">vec!</span>[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>];
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">even_sum</span>: <span class="hljs-type">i32</span> = v.<span class="hljs-title function_ invoke__">iter</span>().<span class="hljs-title function_ invoke__">filter</span>(|n| *n % <span class="hljs-number">2</span> == <span class="hljs-number">0</span>).<span class="hljs-title function_ invoke__">sum</span>();
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"{}"</span>, even_sum);

    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">m</span> = HashMap::<span class="hljs-title function_ invoke__">new</span>();
    m.<span class="hljs-title function_ invoke__">insert</span>(<span class="hljs-string">"a"</span>, <span class="hljs-number">1</span>);
    m.<span class="hljs-title function_ invoke__">insert</span>(<span class="hljs-string">"b"</span>, <span class="hljs-number">2</span>);
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">Some</span>(x) = m.<span class="hljs-title function_ invoke__">get</span>(<span class="hljs-string">"a"</span>) { <span class="hljs-built_in">println!</span>(<span class="hljs-string">"{}"</span>, x); }
    <span class="hljs-title function_ invoke__">for</span> (k, v) <span class="hljs-keyword">in</span> &amp;m { <span class="hljs-built_in">println!</span>(<span class="hljs-string">"{} {}"</span>, k, v); }
}
</code></pre>
<h4 data-id="heading-24">5.5 æ™ºèƒ½æŒ‡é’ˆä¸å¹¶å‘</h4>
<p>è®²è§£ï¼š<code>Rc&lt;T&gt;</code> åœ¨å•çº¿ç¨‹ä¸­å®ç°å…±äº«æ‰€æœ‰æƒï¼›å¹¶å‘ä¸‹ç”¨ <code>Arc&lt;T&gt;</code> æä¾›åŸå­å¼•ç”¨è®¡æ•°ï¼Œæ­é… <code>Mutex&lt;T&gt;</code> è¿›è¡Œäº’æ–¥è®¿é—®ï¼›çº¿ç¨‹é€šè¿‡ <code>spawn</code> åˆ›å»ºå¹¶åœ¨ <code>join</code> ç­‰å¾…å®Œæˆã€‚</p>
<p>ç¤ºä¾‹ï¼šå®Œæ•´å¯æ‰§è¡Œçš„æ™ºèƒ½æŒ‡é’ˆä¸å¹¶å‘æ¼”ç¤º</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> std::rc::Rc;
<span class="hljs-keyword">use</span> std::sync::{Arc, Mutex};
<span class="hljs-keyword">use</span> std::thread;

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">a</span> = Rc::<span class="hljs-title function_ invoke__">new</span>(<span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">"x"</span>));
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">b</span> = Rc::<span class="hljs-title function_ invoke__">clone</span>(&amp;a);
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"{} {}"</span>, a, b);

    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">c</span> = Arc::<span class="hljs-title function_ invoke__">new</span>(Mutex::<span class="hljs-title function_ invoke__">new</span>(<span class="hljs-number">0</span>));
    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">handles</span> = <span class="hljs-built_in">vec!</span>[];
    <span class="hljs-keyword">for</span> <span class="hljs-variable">_</span> <span class="hljs-keyword">in</span> <span class="hljs-number">0</span>..<span class="hljs-number">4</span> {
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">c2</span> = Arc::<span class="hljs-title function_ invoke__">clone</span>(&amp;c);
        handles.<span class="hljs-title function_ invoke__">push</span>(thread::<span class="hljs-title function_ invoke__">spawn</span>(<span class="hljs-keyword">move</span> || {
            <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">n</span> = c2.<span class="hljs-title function_ invoke__">lock</span>().<span class="hljs-title function_ invoke__">unwrap</span>();
            *n += <span class="hljs-number">1</span>;
        }));
    }
    <span class="hljs-keyword">for</span> <span class="hljs-variable">h</span> <span class="hljs-keyword">in</span> handles { h.<span class="hljs-title function_ invoke__">join</span>().<span class="hljs-title function_ invoke__">unwrap</span>(); }
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"{}"</span>, *c.<span class="hljs-title function_ invoke__">lock</span>().<span class="hljs-title function_ invoke__">unwrap</span>());
}
</code></pre>
<h4 data-id="heading-25">5.6 ä»£ç è´¨é‡ä¸æµ‹è¯•</h4>
<p>è®²è§£ï¼š<code>cargo fmt</code> ç»Ÿä¸€ä»£ç é£æ ¼ï¼›<code>cargo clippy</code> é™æ€è¯Šæ–­å»ºè®®ï¼›æµ‹è¯•æ¡†æ¶å†…ç½®ï¼Œä½¿ç”¨ <code>#[test]</code> æ ‡è®°ã€‚</p>
<p>ç¤ºä¾‹ï¼šåœ¨åŒä¸€æ–‡ä»¶ä¸­åŒ…å«æµ‹è¯•ä¸å¯æ‰§è¡Œå…¥å£</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-meta">#[cfg(test)]</span>
<span class="hljs-keyword">mod</span> tests {
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">add</span>(a: <span class="hljs-type">i32</span>, b: <span class="hljs-type">i32</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">i32</span> { a + b }
    <span class="hljs-meta">#[test]</span>
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">it_works</span>() { <span class="hljs-built_in">assert_eq!</span>(<span class="hljs-title function_ invoke__">add</span>(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>), <span class="hljs-number">4</span>); }
}

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"run `cargo test` to execute tests"</span>);
}
</code></pre>
<p>å¸¸ç”¨å‘½ä»¤ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">cargo <span class="hljs-built_in">fmt</span>
cargo clippy
cargo <span class="hljs-built_in">test</span>
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¾ç¨‹ 6X å¸¸è§ kernel panic é—®é¢˜]]></title>    <link>https://juejin.cn/post/7572413448942075931</link>    <guid>https://juejin.cn/post/7572413448942075931</guid>    <pubDate>2025-11-14T14:14:13.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572413448942075931" data-draft-id="7572434032517595182" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¾ç¨‹ 6X å¸¸è§ kernel panic é—®é¢˜"/> <meta itemprop="keywords" content="ç®—æ³•,è‡ªåŠ¨é©¾é©¶"/> <meta itemprop="datePublished" content="2025-11-14T14:14:13.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åœ°å¹³çº¿å¼€å‘è€…"/> <meta itemprop="url" content="https://juejin.cn/user/1257497032132567"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¾ç¨‹ 6X å¸¸è§ kernel panic é—®é¢˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1257497032132567/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åœ°å¹³çº¿å¼€å‘è€…
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-14T14:14:13.000Z" title="Fri Nov 14 2025 14:14:13 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">1. æ¦‚è¿°</h2>
<p>kernel panic åŒ…å«äº†å¤šç§å†…æ ¸å¼‚å¸¸ç±»å‹ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºï¼šç©ºæŒ‡é’ˆ/å¼‚å¸¸æŒ‡é’ˆã€HungTaskã€RCU Stallã€softlockupã€hardlockupã€OOMã€BUG_ONã€‚</p>
<p>ä¸‹å›¾æ˜¯å„ç§ç±»å‹ panic çš„è·¯å¾„ï¼š</p>
<p><img src="https://mcnsakkce4vm.feishu.cn/space/api/box/stream/download/asynccode/?code=MjlhY2IyYTQxYmJjZjk3NmIxM2VlODc0MmNiZWI2YmJfZUxZZVl6U0JHNGpXZWtadDdTVE55ZGM2cXk1d3JSZDJfVG9rZW46U2szd2J1S2Zkb0Nvem14WDBXeWNFOEQ0bmpjXzE3NjMxMjk0NTA6MTc2MzEzMzA1MF9WNA" alt="" loading="lazy"/></p>
<h2 data-id="heading-1">2. é€šç”¨æ–¹æ³•</h2>
<ol>
<li>kpanic ç±»å¼‚å¸¸å‡ä¸º kernel è½¯ä»¶å¯æ„ŸçŸ¥åˆ°çš„å¼‚å¸¸ï¼Œ kernel å®Œæˆ panic æµç¨‹åä¼šç”± bl31 å®Œæˆä¸€æ¬¡ WarmResetï¼Œæ‰€ä»¥æ‰€æœ‰ panic ç°åœºæˆ‘ä»¬éƒ½æ˜¯èƒ½å¤Ÿæ‹¿åˆ° pstore log çš„ã€‚</li>
<li>ç”±äºæ˜¯è½¯ä»¶å¼‚å¸¸ï¼Œæ‰€ä»¥ pstore ä¸­éƒ½èƒ½çœ‹åˆ°å¼‚å¸¸è°ƒç”¨æ ˆã€å¯„å­˜å™¨ç­‰ä¿¡æ¯ï¼Œé€šè¿‡è¿™äº›ä¿¡æ¯å°±å¯ä»¥åˆæ­¥åˆ†æ 70% çš„é—®é¢˜ã€‚</li>
<li>BUG_ON ç±»æ˜¯è½¯ä»¶ä¸»åŠ¨è§¦å‘çš„ panicï¼Œæ‰€ä»¥ç›´æ¥æ£€æŸ¥ä»£ç é€»è¾‘å³å¯ã€‚</li>
<li>å¯¹äºä¸€äº›ä¾èµ–äºæ—¶åºæœ€ç»ˆäº§ç”Ÿçš„ panic é—®é¢˜ï¼Œè¿˜éœ€è¦è¿›ä¸€æ­¥åŠ  log æˆ– ftrace è¿›è¡Œå¤ç°ï¼Œä»¥è·Ÿè¸ªæ—¶åºï¼ˆç«äº‰ç±»ï¼‰å¼•å‘çš„å¼‚å¸¸ã€‚</li>
<li>å¯¹äºå¤æ‚çš„ panic é—®é¢˜ï¼Œè¿˜éœ€è¦å¼€å¯ ramdump åŠŸèƒ½ï¼ŒæŠ“å– dump è¿›è¡Œåˆ†æã€‚</li>
</ol>
<h2 data-id="heading-2">3. å…¸å‹é—®é¢˜</h2>
<h4 data-id="heading-3">3.1. å¼‚å¸¸æŒ‡é’ˆè®¿é—®</h4>
<p>æ­¤ç±»é—®é¢˜ä»£è¡¨å†…æ ¸ä¸­è®¿é—®äº†ä¸€ä¸ªç©ºæŒ‡é’ˆã€æœªæ˜ å°„ã€æ²¡æœ‰æƒé™çš„åœ°å€ç©ºé—´ï¼Œå¯¼è‡´è§¦å‘ mem abortã€‚</p>
<ul>
<li>ä¾‹ï¼š</li>
</ul>
<pre><code class="hljs language-markdown" lang="markdown">&lt;4&gt;[ 1486.084782] CPU: 0 PID: 0 Comm: swapper/0 Tainted: P O 6.1.134-rt51-04836-g0b3e5cbe5431 #13
&lt;4&gt;[ 1486.090809] Hardware name: Horizon AI Technologies, Inc. HOBOT Sigi-P Matrix (DT)
&lt;4&gt;[ 1486.091730] pstate: 00400009 (nzcv daif +PAN -UAO -TCO BTYPE=--)
&lt;4&gt;[ 1486.092492] pc : <span class="hljs-strong">__memcpy+0x48/0x180
&lt;4&gt;[ 1486.092953] lr : kfifo<span class="hljs-emphasis">_copy_</span>in+0x68/0x94
&lt;4&gt;[ 1486.093456] sp : ffff8000124cbd40
&lt;4&gt;[ 1486.093876] pmr<span class="hljs-emphasis">_save: 000000e0
&lt;4&gt;[ 1486.094265] x29: ffff8000124cbd40 x28: ffff0001950ae200
&lt;4&gt;[ 1486.094942] x27: ffff0001765b8800 x26: 0000000000000000
&lt;4&gt;[ 1486.095619] x25: 0000000000000340 x24: 0000000000000018
&lt;4&gt;[ 1486.096295] x23: 00000000f97f0681 x22: ffff8000124cbe18
&lt;4&gt;[ 1486.096970] x21: ffff0001950ae280 x20: 00000000ffff0001
&lt;4&gt;[ 1486.097646] x19: 00000000f97f0681 x18: 0000000000000000
&lt;4&gt;[ 1486.098321] x17: 0000000000000000 x16: 0000000000000000
&lt;4&gt;[ 1486.098997] x15: 000000000000000a x14: 0000000035693bc0
&lt;4&gt;[ 1486.099672] x13: ffff800011feecd1 x12: ffffffffffffffff
&lt;4&gt;[ 1486.100348] x11: ffffffffffffffff x10: 0000000000000020
&lt;4&gt;[ 1486.101024] x9 : ffff800011feecbc x8 : 0000000005f5e100
&lt;4&gt;[ 1486.101699] x7 : ffff00027ee2f8b8 x6 : 00000001239ae000
&lt;4&gt;[ 1486.102376] x5 : ffff0001950ae280 x4 : 0000000000000008
&lt;4&gt;[ 1486.103052] x3 : 0000000100000025 x2 : 00000000f97f0679
&lt;4&gt;[ 1486.103728] x1 : ffff8000124cbe20 x0 : 00000001239ae000
&lt;4&gt;[ 1486.104405] Call trace:
&lt;4&gt;[ 1486.104717] _</span><span class="hljs-emphasis">_memcpy+0x48/0x180
&lt;4&gt;[ 1486.105133] _</span><span class="hljs-emphasis">_kfifo_</span>in+0x3c/0x5c
&lt;4&gt;[ 1486.105558] bpu<span class="hljs-emphasis">_core_</span>tasklet+0x1b0/0x300 [bpu<span class="hljs-emphasis">_cores]
&lt;4&gt;[ 1486.106214] tasklet_</span>action<span class="hljs-emphasis">_common.isra.0+0x90/0xd4
&lt;4&gt;[ 1486.106837] tasklet_</span>action+0x28/0x34
&lt;4&gt;[ 1486.107306] <span class="hljs-emphasis">_stext+0x1e0/0x220
&lt;4&gt;[ 1486.107709] _</span><span class="hljs-emphasis">_irq_</span>exit<span class="hljs-emphasis">_rcu+0x80/0xd0
&lt;6&gt;[<span class="hljs-string"> 1486.107789</span>] [<span class="hljs-string">S1</span>][<span class="hljs-symbol">V0</span>]subdev_</span>balance<span class="hljs-emphasis">_lost_</span>next<span class="hljs-emphasis">_frame lost_</span>this = 0x1, lost<span class="hljs-emphasis">_next = 0x1,
&lt;6&gt;[<span class="hljs-string"> 1486.107803</span>] [<span class="hljs-string">S2</span>][<span class="hljs-symbol">V0</span>]subdev_</span>balance<span class="hljs-emphasis">_lost_</span>next<span class="hljs-emphasis">_frame lost_</span>this = 0x1, lost<span class="hljs-emphasis">_next = 0x1,
&lt;6&gt;[<span class="hljs-string"> 1486.107813</span>] [<span class="hljs-string">S3</span>][<span class="hljs-symbol">V0</span>]subdev_</span>balance<span class="hljs-emphasis">_lost_</span>next<span class="hljs-emphasis">_frame lost_</span>this = 0x1, lost<span class="hljs-emphasis">_next = 0x1,
&lt;6&gt;[<span class="hljs-string"> 1486.107827</span>] [<span class="hljs-string">S0</span>][<span class="hljs-symbol">V0</span>]subdev_</span>balance<span class="hljs-emphasis">_lost_</span>next<span class="hljs-emphasis">_frame lost_</span>this = 0x0, lost<span class="hljs-emphasis">_next = 0x1,
&lt;6&gt;[<span class="hljs-string"> 1486.107921</span>] [<span class="hljs-string">S4</span>][<span class="hljs-symbol">V0</span>]cim_</span>balance<span class="hljs-emphasis">_lost_</span>next<span class="hljs-emphasis">_frame lost_</span>this = 0x0, lost<span class="hljs-emphasis">_next = 0x1,
&lt;4&gt;[ 1486.108179] irq_</span>exit+0x10/0x20
&lt;4&gt;[ 1486.113403] __</span>handle<span class="hljs-emphasis">_domain_</span>irq+0x70/0xa0
&lt;4&gt;[ 1486.113928] gic<span class="hljs-emphasis">_handle_</span>irq+0x2d0/0x30c
&lt;4&gt;[ 1486.114419] el1<span class="hljs-emphasis">_irq+0xcc/0x180
&lt;4&gt;[ 1486.114822] arch_</span>cpu<span class="hljs-emphasis">_idle+0x30/0x38
&lt;4&gt;[ 1486.115278] default_</span>idle<span class="hljs-emphasis">_call+0x30/0x3c
&lt;4&gt;[ 1486.115779] do_</span>idle+0x130/0x258
&lt;4&gt;[ 1486.116194] cpu<span class="hljs-emphasis">_startup_</span>entry+0x24/0x54
&lt;4&gt;[ 1486.116695] rest<span class="hljs-emphasis">_init+0xd4/0xe4
&lt;4&gt;[ 1486.117108] arch_</span>call<span class="hljs-emphasis">_rest_</span>init+0x10/0x1c
&lt;4&gt;[ 1486.117631] start<span class="hljs-emphasis">_kernel+0x6f0/0x734
</span></code></pre>
<ol>
<li>è¿™ç±»é—®é¢˜ï¼Œé¦–å…ˆæˆ‘ä»¬å¯ä»¥çœ‹åˆ° mem abort çš„ CPU è°ƒç”¨æ ˆï¼Œæ‰€ä»¥é©¬ä¸Šå°±èƒ½å¤Ÿå®šä½æ˜¯å“ªä¸ªå‡½æ•°è®¿é—®çš„å¼‚å¸¸åœ°å€ï¼Œå¦‚æœè¿™ä¸ªå‡½æ•°æ¯”è¾ƒç®€å•ï¼Œä¹Ÿå°±èƒ½å¤Ÿå¾ˆå¿«å®šä½åˆ°æ˜¯å“ªä¸ªå˜é‡çš„ç©ºæŒ‡é’ˆè®¿é—®ã€‚</li>
<li>å¦‚æœå‡½æ•°æ¯”è¾ƒå¤æ‚ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ gdbï¼Œaddr2line ç­‰å·¥å…·é…åˆç¬¦å·è¡¨è¿›è¡Œæ±‡ç¼–åˆ†æå®šä½ä»£ç ä½ç½®ï¼Œé€šè¿‡åç§»ç¡®è®¤å˜é‡ã€‚</li>
<li>ç¡®è®¤å¼‚å¸¸æŒ‡é’ˆçš„å˜é‡å’Œæ¥æºåï¼Œæœ‰å¯èƒ½æ˜¯ä¸‹é¢çš„åŸå› å¯¼è‡´çš„é”™è¯¯ï¼š</li>
</ol>
<blockquote>
<ol>
<li>æ£€æŸ¥è°ƒç”¨æ ˆä»£ç ï¼Œä»ä¸šåŠ¡/è°ƒç”¨é€»è¾‘ä¸Šçœ‹æ˜¯å¦å­˜åœ¨å¼•å…¥é”™è¯¯æŒ‡é’ˆæƒ…å†µã€‚</li>
<li>æ£€æŸ¥å¯¹åº”å˜é‡ç›¸å…³ä»£ç é€»è¾‘ï¼Œè€ƒè™‘æ˜¯å¦å¯èƒ½å­˜åœ¨ç«äº‰é£é™©ã€‚</li>
<li>å¦‚æœå¼‚å¸¸åœ°å€æ²¡æœ‰å‘ç°ç«äº‰æˆ–å¼•å…¥é”™è¯¯çš„å¯èƒ½ï¼Œè€ƒè™‘æ˜¯å¦æ˜¯è¢«è¸©è¸ï¼Œå‚è€ƒ memory correcption èŠ‚ã€‚</li>
<li>æ£€æŸ¥è®¾å¤‡æ˜¯å¦å­˜åœ¨éšæœº crash çš„æƒ…å†µï¼Œè®¾å¤‡æ˜¯å¦æœ‰å•ä½“é—®é¢˜ï¼Œå¦‚æœå¤šè®¾å¤‡å­˜åœ¨éšæœº crashï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯ DDR è½¯/ç¡¬ä»¶é…ç½®é—®é¢˜ã€‚</li>
</ol>
</blockquote>
<h4 data-id="heading-4">3.2. HungTask</h4>
<p>khungtaskd æ˜¯å†…æ ¸å¯¹ D çŠ¶æ€çš„è¿›ç¨‹è¿›è¡Œæ‰«æçš„å†…æ ¸çº¿ç¨‹ï¼Œå½“å†…æ ¸æŸè¿›ç¨‹/çº¿ç¨‹é•¿æœŸå¤„äº D çŠ¶æ€ï¼Œhungtask å°±ä¼šè¢«è§¦å‘ï¼Œåœ¨å¾ç¨‹ 6 çš„ç³»ç»Ÿä¸­ï¼Œhungtask è¶…æ—¶æ—¶é—´è®¾ç½®ä¸º 120sï¼Œä¸” CONFIG_BOOTPARAM_HUNG_TASK_PANIC_VALUE=1ï¼Œæ•…å½“ hungtask æ£€æµ‹åˆ°æœ‰è¿›ç¨‹å¤„äº D çŠ¶æ€è¶…è¿‡ 120s åå°±ä¼šç›´æ¥è§¦å‘ panicã€‚</p>
<ul>
<li>ä¾‹ï¼š</li>
</ul>
<pre><code class="hljs language-markdown" lang="markdown">[ 605.147501] INFO: task ipi7<span class="hljs-emphasis">_thread:3826 blocked for more than 120 seconds.
[ 605.147532] Tainted: P O 6.1.134-rt51-04836-g0b3e5cbe5431 #13[ 605.147538] "echo 0 &gt; /proc/sys/kernel/hung_</span>task<span class="hljs-emphasis">_timeout_</span>secs" disables this message.
[ 605.147543] task:ipi7<span class="hljs-emphasis">_thread state:D stack: 0 pid: 3826 ppid: 2 flags:0x00000028
[ 605.147559] Call trace:
[ 605.147562] <span class="hljs-strong">__switch_to+0xf8/0x160
[ 605.147583] __</span>schedule+0x268/0x800
[ 605.147594] schedule+0x84/0xf8
[<span class="hljs-string"> 605.147602</span>] cimdma_</span>swap<span class="hljs-emphasis">_buffer+0x244/0x338 [<span class="hljs-string">hobot_cim_dma</span>][<span class="hljs-symbol"> 605.147631</span>] kthread+0x160/0x188
[ 605.147640] ret_</span>from<span class="hljs-emphasis">_fork+0x10/0x18
[ 605.147649] INFO: task ipi4_</span>thread:3830 blocked for more than 120 seconds.
[ 605.147654] Tainted: P O 6.1.134-rt51-04836-g0b3e5cbe5431 #13[ 605.147658] "echo 0 &gt; /proc/sys/kernel/hung<span class="hljs-emphasis">_task_</span>timeout<span class="hljs-emphasis">_secs" disables this message.
[ 605.147661] task:ipi4_</span>thread state:D stack: 0 pid: 3830 ppid: 2 flags:0x00000028
[ 605.147669] Call trace:
[ 605.147671] <span class="hljs-strong">__switch<span class="hljs-emphasis">_to+0xf8/0x160
[ 605.147678] _</span><span class="hljs-emphasis">_schedule+0x268/0x800
[ 605.147685] schedule+0x84/0xf8
[<span class="hljs-string"> 605.147692</span>] cimdma_</span>swap<span class="hljs-emphasis">_buffer+0x244/0x338 [<span class="hljs-string">hobot_cim_dma</span>][<span class="hljs-symbol"> 605.147710</span>] kthread+0x160/0x188
[ 605.147716] ret_</span>from<span class="hljs-emphasis">_fork+0x10/0x18
[ 605.147723] INFO: task ipi6_</span>thread:3831 blocked for more than 120 seconds.
[ 605.147728] Tainted: P O 6.1.134-rt51-04836-g0b3e5cbe5431 #13[ 605.147732] "echo 0 &gt; /proc/sys/kernel/hung<span class="hljs-emphasis">_task_</span>timeout<span class="hljs-emphasis">_secs" disables this message.
[ 605.147735] task:ipi6_</span>thread state:D stack: 0 pid: 3831 ppid: 2 flags:0x00000028
[ 605.147743] Call trace:
[ 605.147745] __</span>switch<span class="hljs-emphasis">_to+0xf8/0x160
[ 605.147751] <span class="hljs-strong">__schedule+0x268/0x800
[ 605.147758] schedule+0x84/0xf8
[<span class="hljs-string"> 605.147765</span>] cimdma_swap_buffer+0x244/0x338 [<span class="hljs-string">hobot_cim_dma</span>][<span class="hljs-symbol"> 605.147783</span>] kthread+0x160/0x188
[ 605.147789] ret_from_fork+0x10/0x18
[ 605.147796] INFO: task ipi5_thread:3832 blocked for more than 120 seconds.
[ 605.147801] Tainted: P O 6.1.134-rt51-04836-g0b3e5cbe5431 #13[ 605.147805] "echo 0 &gt; /proc/sys/kernel/hung_task_timeout_secs" disables this message.
[ 605.147808] task:ipi5_thread state:D stack: 0 pid: 3832 ppid: 2 flags:0x00000028
[ 605.147816] Call trace:
[ 605.147818] __</span>switch_</span>to+0xf8/0x160
[ 605.147824] <span class="hljs-strong">__schedule+0x268/0x800
[ 605.147831] schedule+0x84/0xf8
[<span class="hljs-string"> 605.147838</span>] cimdma<span class="hljs-emphasis">_swap_</span>buffer+0x244/0x338 [<span class="hljs-string">hobot_cim_dma</span>][<span class="hljs-symbol"> 605.147856</span>] kthread+0x160/0x188
[ 605.147862] ret<span class="hljs-emphasis">_from_</span>fork+0x10/0x18
</span></code></pre>
<ol>
<li>è¿™ç±»é—®é¢˜ï¼Œkhungtaskd è¿›ç¨‹ä¼šåœ¨è§¦å‘ crash å‰ï¼Œå°†é•¿æ—¶é—´ D çŠ¶æ€çš„è¿›ç¨‹æ ˆéƒ½è¾“å‡ºå‡ºæ¥ï¼Œæ‰€ä»¥åœ¨ pstore ä¸­èƒ½å¤Ÿå¿«é€Ÿå®šä½åˆ°å¯¹åº”çš„è°ƒç”¨ä¿¡æ¯ã€‚</li>
<li>å¯¹äºé©±åŠ¨ä¸­é•¿æ—¶é—´å¤„äº D çŠ¶æ€ï¼Œä¸€èˆ¬æ˜¯ç”±äºåœ¨ç­‰å¾…çš„èµ„æºæ— æ³•è·å–ï¼Œéœ€è¦åˆ†æä¸šåŠ¡æµç¨‹ï¼Œå¯¹äºæ—¶é—´ä¸å¯é¢„æœŸçš„èµ„æºï¼Œå¯ä»¥ä½¿ç”¨*_interruable æ—ã€æˆ–*_timout æ—å‡½æ•°è¿›è¡Œä¼˜åŒ–ã€‚</li>
<li>å¦ä¸€ç±»ç”±äºæ­»é”å¯¼è‡´çš„ hungtaskï¼Œéœ€è¦ä»£ç åˆ†ææ­»é”çš„æ ¹æºï¼Œå¯ä»¥æ ¹æ® log ä¸­è¾“å‡ºçš„æ‰€æœ‰ D çŠ¶æ€è¿›ç¨‹æ ˆå’Œ running è¿›ç¨‹æ ˆè¿›è¡Œç»¼åˆåˆ†æï¼Œå¯¹äºå¤§é‡ D çŠ¶æ€è¿›ç¨‹çš„å¤æ‚æ­»é”é—®é¢˜ï¼Œåªèƒ½æŠ“å– ramdump å»åˆ†æäº†ã€‚</li>
</ol>
<h4 data-id="heading-5">3.3. RCU Stall</h4>
<p>RCUï¼ˆRead-Copy-Updateï¼‰ï¼Œé¡¾åæ€ä¹‰å°±æ˜¯è¯»-æ‹·è´ä¿®æ”¹ï¼Œå®ƒæ˜¯åŸºäºå…¶åŸç†å‘½åçš„ã€‚å¯¹äºè¢« RCU ä¿æŠ¤çš„å…±äº«æ•°æ®ç»“æ„ï¼Œè¯»è€…ä¸éœ€è¦è·å¾—ä»»ä½•é”å°±å¯ä»¥è®¿é—®å®ƒï¼Œä½†å†™è€…åœ¨è®¿é—®å®ƒæ—¶é¦–å…ˆæ‹·è´ä¸€ä¸ªå‰¯æœ¬ï¼Œç„¶åå¯¹å‰¯æœ¬è¿›è¡Œä¿®æ”¹ï¼Œæœ€åä½¿ç”¨ä¸€ä¸ªå›è°ƒï¼ˆcallbackï¼‰æœºåˆ¶åœ¨é€‚å½“çš„æ—¶æœºæŠŠæŒ‡å‘åŸæ¥æ•°æ®çš„æŒ‡é’ˆæ›¿æ¢ä¸ºæ–°çš„è¢«ä¿®æ”¹çš„æ•°æ®ã€‚</p>
<p>é‡Šæ”¾åŸæ¥èµ„æºçš„å·¥ä½œç”± RCU è½¯ä¸­æ–­å’Œ rcu çº¿ç¨‹è´Ÿè´£ï¼ŒRCU Stall åœ¨ tick ä¸­æ–­ä¸­æ£€æŸ¥ï¼Œå½“è´Ÿè´£é‡Šæ”¾çº¿ç¨‹ä¸€ç›´æœªæ‰§è¡Œèµ·æ¥ï¼ˆRCU Stall timeout æ—¶é—´ä¸º 30sï¼‰ï¼Œå°±ä¼šå‡ºç° RCU Stall panicã€‚</p>
<ul>
<li>ä¾‹ï¼š</li>
</ul>
<pre><code class="hljs language-markdown" lang="markdown">&lt;3&gt;[122235.050769] rcu: INFO: rcu<span class="hljs-emphasis">_preempt detected stalls on CPUs/tasks:
&lt;3&gt;[122235.050778] rcu: Tasks blocked on level-0 rcu_</span>node (CPUs 0-5):
&lt;4&gt;[122235.050789] (detected by 4, t=7502 jiffies, g=34171837, q=56419)
&lt;3&gt;[122235.050796] rcu: All QSes seen, last rcu<span class="hljs-emphasis">_preempt kthread activity 1 (4325451296-4325451295), jiffies_</span>till<span class="hljs-emphasis">_next_</span>fqs=1, root -&gt;qsmask 0x0
&lt;0&gt;[122235.050805] Kernel panic - not syncing:
&lt;4&gt;[122235.050809] RCU Stall
&lt;4&gt;[122235.050813] CPU: 4 PID: 0 Comm: swapper/4 Tainted: P O 6.1.134-rt51-04836-g0b3e5cbe5431 #13
&lt;4&gt;[122235.050822] Hardware name: Horizon AI Technologies, Inc. HOBOT Sigi-P Matrix (DT)
&lt;4&gt;[122235.050828] Call trace:
&lt;4&gt;[122235.050830] dump<span class="hljs-emphasis">_backtrace+0x0/0x1cc
&lt;4&gt;[122235.050846] show_</span>stack+0x18/0x24
&lt;4&gt;[122235.050853] dump<span class="hljs-emphasis">_stack+0xcc/0x12c
&lt;4&gt;[122235.050863] panic+0xcc/0x344
&lt;4&gt;[122235.050870] panic_</span>on<span class="hljs-emphasis">_rcu_</span>stall+0x24/0x28
&lt;4&gt;[122235.050881] rcu<span class="hljs-emphasis">_sched_</span>clock<span class="hljs-emphasis">_irq+0x830/0x900
&lt;4&gt;[122235.050889] update_</span>process<span class="hljs-emphasis">_times+0x60/0x88
&lt;4&gt;[122235.050898] tick_</span>sched<span class="hljs-emphasis">_handle.isra.0+0x50/0x68
&lt;4&gt;[122235.050907] tick_</span>sched<span class="hljs-emphasis">_timer+0x4c/0x90
&lt;4&gt;[122235.050914] <span class="hljs-strong">__hrtimer_run_queues+0x108/0x19c
&lt;4&gt;[122235.050922] hrtimer_interrupt+0xb0/0x1b8
&lt;4&gt;[122235.050930] arch_timer_handler_phys+0x2c/0x44
&lt;4&gt;[122235.050940] handle_percpu_devid_irq+0x5c/0x104
&lt;4&gt;[122235.050951] generic_handle_irq+0x24/0x3c
&lt;4&gt;[122235.050958] __</span>handle_</span>domain<span class="hljs-emphasis">_irq+0x9c/0xa0
&lt;4&gt;[122235.050965] gic_</span>handle<span class="hljs-emphasis">_irq+0x2d0/0x30c
&lt;4&gt;[122235.050975] el1_</span>irq+0xcc/0x180
&lt;4&gt;[122235.050982] arch<span class="hljs-emphasis">_cpu_</span>idle+0x30/0x38
&lt;4&gt;[122235.050991] default<span class="hljs-emphasis">_idle_</span>call+0x30/0x3c
&lt;4&gt;[122235.050999] do<span class="hljs-emphasis">_idle+0x144/0x270
&lt;4&gt;[122235.051008] cpu_</span>startup<span class="hljs-emphasis">_entry+0x24/0x54
&lt;4&gt;[122235.051015] secondary_</span>start<span class="hljs-emphasis">_kernel+0x1a4/0x1bc
&lt;6&gt;[<span class="hljs-string">122236.028018</span>] [<span class="hljs-string">S0</span>][<span class="hljs-symbol">V0</span>]pym_</span>subdev<span class="hljs-emphasis">_stop
&lt;6&gt;[122236.028038] pym_</span>check<span class="hljs-emphasis">_stop_</span>state cnt 10 pym-&gt;irq<span class="hljs-emphasis">_status = 4
&lt;6&gt;[122236.046863] pym_</span>check<span class="hljs-emphasis">_exit_</span>state cnt 9 pym-&gt;irq<span class="hljs-emphasis">_status = 4
&lt;2&gt;[122236.061751] SMP: stopping secondary CPUs
&lt;0&gt;[122236.062276] Kernel Offset: disabled
&lt;0&gt;[122236.062730] CPU features: 0x0040426,2a00aa38
&lt;0&gt;[122236.063284] Memory Limit: none
</span></code></pre>
<p>æ‰€ä»¥ï¼Œå½“å‡ºç° RCU Stall é—®é¢˜ä¸€èˆ¬æ˜¯å‡ºç°äº†è°ƒåº¦é—®é¢˜ï¼š</p>
<ol>
<li>é•¿æ—¶é—´å…³é—­ç¡¬/è½¯ä¸­æ–­ã€ä¸­æ–­é£æš´ï¼ŒRCU è½¯ä¸­æ–­æ— æ³•æ‰§è¡Œã€‚</li>
<li>é•¿æ—¶é—´å…³é—­å¼ºå ã€‚</li>
<li>é«˜ä¼˜å…ˆçº§ RT è¿›ç¨‹å ç”¨ CPU å¯¼è‡´ rcu çº¿ç¨‹æ— æ³•æ‰§è¡Œã€‚</li>
<li>ç”±äº RT ç‰ˆæœ¬ä¸­è½¯ä¸­æ–­ç”± cfs:19 ä¼˜å…ˆçº§çš„ ksoftirqd è´Ÿè´£ï¼Œrcu è½¯ä¸­æ–­çš„å·¥ä½œå¯èƒ½è¢«å„ç§é«˜ä¼˜å…ˆçº§å¼ºå å¯¼è‡´è¶…æ—¶ã€‚</li>
<li>ä» RCU Stall çš„ log ä¸­èƒ½çœ‹åˆ°å‘ç”Ÿ Rcu Stall çš„æ ¸ï¼Œæ£€æŸ¥å¯¹åº” core ä¸Šè¿›ç¨‹ï¼ŒåŠè°ƒåº¦æƒ…å†µå®šä½é—®é¢˜ï¼Œè¿™ç§é—®é¢˜æœ€å¥½æ‰“å¼€ ftraceï¼Œæˆ–è€…è‡³å°‘æ‰“å¼€ CONFIG_SCHED_LOGGER æŠ“å–åˆ°å„æ ¸çš„è°ƒåº¦ä¿¡æ¯æ‰èƒ½æ›´å¿«çš„åˆ†æã€‚</li>
</ol>
<p>è§£å†³ RCU Stall é—®é¢˜çš„æ–¹æ¡ˆï¼š</p>
<ol>
<li>æ£€æŸ¥æ˜¯å¦å­˜åœ¨é«˜è´Ÿè½½çš„ RT è¿›ç¨‹ä¸€ç›´è¢«è°ƒç”¨ã€‚å¦‚æœå­˜åœ¨ï¼Œè¯·è¯„ä¼°æ˜¯å¦é™ä½ä¸ºé RT è¿›ç¨‹ï¼Œæˆ–è€…é™ä½ä¼˜å…ˆçº§ã€‚</li>
<li>è°ƒæ•´ RCU Stall Timeoutã€‚ä¿®æ”¹/sys/module/rcupdate/parameters/rcu_cpu_stall_timeoutã€‚</li>
<li>æ£€æŸ¥/proc/interrupts ä¸­æ‰€æœ‰ä¸­æ–­çš„æ¬¡æ•°ï¼Œæ’é™¤æ˜¯å¦æ˜¯ä¸­æ–­é£æš´å¯¼è‡´ã€‚</li>
</ol>
<p>å¦‚ä¸‹é¢çš„ evt_thread è¿›ç¨‹æ¯æ¬¡è°ƒåº¦éƒ½ä¼šå ç”¨ 1s æ—¶é—´ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">[122233.054801] [6] : swapper/6(0) -&gt; evt<span class="hljs-emphasis">_thread0(26886)
[122234.026784] [6] : evt_</span>thread0(26886) -&gt; swapper/6(0)
[122234.028451] [6] : swapper/6(0) -&gt; grep(14873)
[122234.028515] [6] : grep(14873) -&gt; swapper/6(0)
[122234.051471] [6] : swapper/6(0) -&gt; grep(14873)
[122234.051541] [6] : grep(14873) -&gt; swapper/6(0)
[122234.054793] [6] : swapper/6(0) -&gt; evt<span class="hljs-emphasis">_thread0(26886)
[122235.030776] [6] : evt_</span>thread0(26886) -&gt; swapper/6(0)
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸åŒä¼ æ„Ÿå™¨å‰ä¸­åèåˆæ–¹æ¡ˆç®€ä»‹]]></title>    <link>https://juejin.cn/post/7572389069707132938</link>    <guid>https://juejin.cn/post/7572389069707132938</guid>    <pubDate>2025-11-14T14:25:43.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572389069707132938" data-draft-id="7572434032517644334" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸åŒä¼ æ„Ÿå™¨å‰ä¸­åèåˆæ–¹æ¡ˆç®€ä»‹"/> <meta itemprop="keywords" content="ç®—æ³•,è‡ªåŠ¨é©¾é©¶"/> <meta itemprop="datePublished" content="2025-11-14T14:25:43.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åœ°å¹³çº¿å¼€å‘è€…"/> <meta itemprop="url" content="https://juejin.cn/user/1257497032132567"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸åŒä¼ æ„Ÿå™¨å‰ä¸­åèåˆæ–¹æ¡ˆç®€ä»‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1257497032132567/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åœ°å¹³çº¿å¼€å‘è€…
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-14T14:25:43.000Z" title="Fri Nov 14 2025 14:25:43 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨è‡ªåŠ¨é©¾é©¶åœºæ™¯ä¸‹ï¼Œæ‘„åƒå¤´ + æ¿€å…‰é›·è¾¾çš„ä¼ æ„Ÿå™¨èåˆæ–¹æ¡ˆæ˜¯æœ€å¸¸è§çš„æ„ŸçŸ¥æŠ€æœ¯è·¯çº¿ï¼Œç›®æ ‡æ˜¯å……åˆ†åˆ©ç”¨äºŒè€…çš„äº’è¡¥æ€§ï¼š</p>
<ul>
<li>æ‘„åƒå¤´ä¼˜åŠ¿ï¼šåˆ†è¾¨ç‡é«˜ã€çº¹ç†ä¸°å¯Œã€é¢œè‰²ä¿¡æ¯é½å…¨ï¼Œæœ‰åˆ©äºè¯†åˆ«è¯­ä¹‰ä¿¡æ¯ï¼ˆè½¦é“çº¿ã€äº¤é€šç¯ã€è¡Œäººç±»åˆ«ç­‰ï¼‰ã€‚</li>
<li>æ¿€å…‰é›·è¾¾ä¼˜åŠ¿ï¼šå¤©ç„¶åœ°å…·æœ‰æ·±åº¦ä¿¡æ¯ï¼Œç›´æ¥æµ‹å¾—é«˜ç²¾åº¦è·ç¦»å’Œç¨ å¯†ç‚¹äº‘ï¼Œæœ‰åˆ©äºæ„å»º 3D å‡ ä½•ç»“æ„å’Œæ£€æµ‹éšœç¢ç‰©ã€‚</li>
</ul>
<p>èåˆæ–¹å¼å¤§è‡´åˆ†ä¸ºä¸‰ç±»ï¼šå‰èåˆã€ä¸­èåˆã€åèåˆã€‚</p>
<h2 data-id="heading-0">1. å‰èåˆ</h2>
<p>å‰èåˆï¼Œæ˜¯æŒ‡æŠŠå„ä¸ªä¼ æ„Ÿå™¨çš„æ•°æ®é‡‡é›†åï¼Œç»è¿‡æ•°æ®åŒæ­¥åï¼Œå¯¹è¿™äº›åŸå§‹æ•°æ®è¿›è¡Œèåˆï¼Œå› æ­¤ä¹Ÿç§°ä¸ºæ•°æ®çº§èåˆã€‚å°†æ‘„åƒå¤´å›¾åƒä¸æ¿€å…‰é›·è¾¾ç‚¹äº‘åœ¨å‡ ä½•ç©ºé—´å¯¹é½ï¼Œä¾‹å¦‚æŠŠ 3D LiDAR ç‚¹äº‘æŠ•å½±åˆ° 2D å›¾åƒä¸Šï¼Œ ç„¶åæ£€æŸ¥ç‚¹äº‘æ˜¯å¦å±äº 2D è¾¹ç•Œæ¡†ã€‚å‰èåˆå±•ç¤ºå¦‚ä¸‹å›¾ï¼š</p>
<p><img src="https://mcnsakkce4vm.feishu.cn/space/api/box/stream/download/asynccode/?code=Mjc2YmVlOTFmMTIwMDEyNGRhNzUzNDg1NWYyYTBjNzhfaUw0c0hUYmdGOHpsUm9zT3Q3NnpnQUNEQXN2aExRZ2hfVG9rZW46QnV0Q2JpVTFHb0oxdFB4a0M4aGNoQndFbmhoXzE3NjMxMzAwNjA6MTc2MzEzMzY2MF9WNA" alt="" loading="lazy"/></p>
<p>å‰èåˆå¯ä»¥ä»æ•´ä½“ä¸Šæ¥å¤„ç†ä¿¡æ¯ï¼Œè®©æ•°æ®æ›´æ—©åšèåˆï¼Œæ•´ä½“å¤„ç†ä¿¡æ¯ï¼Œè®©æ•°æ®æ›´æœ‰å…³è”æ€§ï¼ŒæŠŠæ¿€å…‰é›·è¾¾ç‚¹äº‘å’Œæ‘„åƒå¤´åƒç´ çº§æ•°æ®è¿›è¡Œèåˆï¼Œä¿¡æ¯æŸå¤±æ¯”è¾ƒå°‘ï¼›ä½†å‰èåˆä¹Ÿä¼šå­˜åœ¨ä¸€äº›é—®é¢˜ï¼Œä¾‹å¦‚ï¼šç‚¹äº‘æ•°æ®å’Œåƒç´ æ•°æ®åæ ‡ç³»ä¸åŒï¼Œç›´æ¥èåˆæ•ˆæœå·®ï¼›éœ€è¦å¤„ç†çš„æ•°æ®é‡å¤§ï¼Œå¯¹ç®—åŠ›è¦æ±‚è¾ƒé«˜ï¼›å¯¹èåˆç­–ç•¥è¦æ±‚ä¹Ÿæ¯”è¾ƒé«˜ï¼Œç›®å‰ä¸šå†…åº”ç”¨çš„æ¯”è¾ƒå°‘ã€‚</p>
<h2 data-id="heading-1">2. åèåˆ</h2>
<p>åèåˆæ˜¯æŒ‡æ‘„åƒå¤´å’Œæ¿€å…‰é›·è¾¾ç­‰å„ä¼ æ„Ÿå™¨ç‹¬ç«‹å®Œæˆæ„ŸçŸ¥ä»»åŠ¡ï¼ˆå¦‚æ£€æµ‹ã€åˆ†å‰²ï¼‰ï¼Œæœ€ååœ¨ç»“æœå±‚é¢è¿›è¡Œèåˆï¼ˆå¦‚åŠ æƒï¼ŒIOU åŒ¹é…ç­‰ï¼‰ï¼Œå› æ­¤ä¹Ÿç§°ä¹‹ä¸ºç›®æ ‡çº§èåˆã€‚ä¾‹å¦‚ï¼Œå¯ä»¥å°†æ‘„åƒå¤´çš„ 2D è¾¹ç•Œæ¡†æŠ•å½±åˆ° 3D è¾¹ç•Œæ¡†ï¼Œç„¶åå°†è¿™äº›è¾¹ç•Œæ¡†ä¸ LiDAR æ£€æµ‹è¿‡ç¨‹ä¸­è·å¾—çš„è¾¹ç•Œæ¡†è¿›è¡Œèåˆã€‚</p>
<p>åèåˆçš„ä¼˜ç‚¹æ˜¯ä¼ æ„Ÿå™¨ç‹¬ç«‹è¯†åˆ«ï¼Œè§£è€¦æ€§å¥½ï¼Œæ˜“äºæ‰©å±•ã€‚ç¼ºç‚¹æ˜¯ä¼šæŸå¤±ä¸­é—´ä¿¡æ¯å½±å“ç²¾åº¦ï¼›rule-based èåˆè§„åˆ™æœ‰å±€é™æ€§ï¼Œéš¾ä»¥å……åˆ†åˆ©ç”¨è·¨æ¨¡æ€äº’è¡¥ä¿¡æ¯ã€‚</p>
<p>åèåˆå±•ç¤ºå¦‚ä¸‹å›¾ï¼š</p>
<p><img src="https://mcnsakkce4vm.feishu.cn/space/api/box/stream/download/asynccode/?code=ZTIwZTVjOTk3OTBjYzQ5MzNhYzQ5M2Y4YzUzYjVkMjdfOU16VTl0WVJzUDJ4ZWtxNkVTSUFuRUQ0aFZJYU1MdWlfVG9rZW46U1RLMGIwSlNkb2swcEx4ZjVVWGNrbVhObjdkXzE3NjMxMzAwNjA6MTc2MzEzMzY2MF9WNA" alt="" loading="lazy"/></p>
<h2 data-id="heading-2">3. ä¸­èåˆ</h2>
<p>ä¸­èåˆï¼Œæ˜¯æŒ‡å…ˆå°†å„ä¸ªä¼ æ„Ÿå™¨é€šè¿‡ç¥ç»ç½‘ç»œæ¨¡å‹æå–ä¸­é—´å±‚ç‰¹å¾ï¼ˆå³æœ‰æ•ˆç‰¹å¾ï¼‰ï¼Œå†èåˆæœ‰æ•ˆä¸»è¦ç‰¹å¾ï¼Œä¹Ÿç§°ä¸ºç‰¹å¾çº§èåˆï¼Œå…¸å‹çš„æ˜¯å¯¹æœ‰æ•ˆç‰¹å¾åœ¨ BEV ç©ºé—´è¿›è¡Œèåˆã€‚ç›¸æ¯”äºå‰èåˆä¸åèåˆï¼Œåœ¨ BEV ç©ºé—´è¿›è¡Œä¸­èåˆæœ‰å¦‚ä¸‹ä¼˜ç‚¹ï¼š</p>
<ol>
<li>è·¨æ‘„åƒå¤´èåˆå’Œå¤šæ¨¡èåˆæ›´å®¹æ˜“å®ç°ï¼Œå› ä¸ºç»Ÿä¸€äº†æ•°æ®ç©ºé—´ï¼Œä¸éœ€è¦å¤„ç†è§„åˆ™å…³è”ä¸åŒä¼ æ„Ÿå™¨çš„æ„ŸçŸ¥ç»“æœï¼Œç®—æ³•å®ç°æ›´åŠ ç®€å•ï¼›</li>
<li>å¯ä»¥å¾ˆå®¹æ˜“åœ°èåˆæ—¶åºä¿¡æ¯ï¼Œå½¢æˆ 4D ç©ºé—´ï¼Œæ„ŸçŸ¥ç½‘ç»œå¯ä»¥æ›´å¥½åœ°å®ç°ä¸€äº›æ„ŸçŸ¥ä»»åŠ¡ï¼Œå¦‚æµ‹é€Ÿç­‰ï¼›</li>
<li>å¯â€œè„‘è¡¥â€å‡ºè¢«é®æŒ¡åŒºåŸŸç›®æ ‡ï¼Œåœ¨ BEV ç©ºé—´ï¼Œç»™äºˆå…ˆéªŒçŸ¥è¯†ï¼Œå¯¹è¢«é®æŒ¡çš„åŒºåŸŸè¿›è¡Œé¢„æµ‹ï¼›</li>
<li>æ„ŸçŸ¥å’Œé¢„æµ‹åœ¨ç»Ÿä¸€ç©ºé—´ï¼ˆBEV ç©ºé—´ï¼‰å†…å®Œæˆï¼Œå¯ä»¥é€šè¿‡ç¥ç»ç½‘ç»œç›´æ¥åšç«¯åˆ°ç«¯ä¼˜åŒ–ï¼Œå¹¶è¡Œå‡ºç»“æœï¼Œæ—¢å¯ä»¥é¿å…è¯¯å·®ç´¯ç§¯ï¼Œä¹Ÿå¯ä»¥å‡å°‘äººå·¥é€»è¾‘ï¼Œè®©æ„ŸçŸ¥ç½‘ç»œé€šè¿‡æ•°æ®é©±åŠ¨çš„æ–¹å¼è‡ªå­¦ä¹ ï¼Œä»è€Œæ›´å¥½åœ°å®ç°åŠŸèƒ½è¿­ä»£ã€‚</li>
</ol>
<p>ç›®å‰ä½¿ç”¨æœ€å¤šçš„æ˜¯ä¸­èåˆæ–¹æ¡ˆã€‚</p>
<ol start="4">
<li>
<h2 data-id="heading-3">BEVFusion</h2>
</li>
</ol>
<p>BEVFusion æ˜¯å…¸å‹çš„ä¸­èåˆæ–¹æ³•ï¼Œå°†æ¥è‡ªç›¸æœºå’Œ LiDAR çš„åŸå§‹è¾“å…¥ç¼–ç åˆ°åŒä¸€ä¸ª BEV ç©ºé—´ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼ŒBEVFusion ä¸»è¦ç”±ç›¸æœºæµã€æ¿€å…‰é›·è¾¾æµã€åŠ¨æ€èåˆæ¨¡å—å’Œæ£€æµ‹å¤´ç»„æˆï¼Œåˆ†åˆ«ç®€å•çœ‹ä¸‹</p>
<p><img src="https://mcnsakkce4vm.feishu.cn/space/api/box/stream/download/asynccode/?code=OGQ0N2RhMzA0MTY3MGRiNzc0ODU3YzA3ZmYzNzExNjBfcXBPZ0JlTHZKdWhHcklqWXU3TVBDZkF2eFA0a3NlNVVfVG9rZW46VGJxQWI4Nk5ob3VLRFl4ZkdDRWM5NzBRbm9nXzE3NjMxMzAwNjA6MTc2MzEzMzY2MF9WNA" alt="" loading="lazy"/></p>
<p>ç›¸æœºæµå°†å¤šè§†è§’å›¾åƒè½¬åˆ° BEV ç©ºé—´ï¼Œç”±å›¾åƒç¼–ç å™¨ã€è§†è§‰æŠ•å½±æ¨¡å—ã€BEV ç¼–ç å™¨ç»„æˆã€‚</p>
<p>å›¾åƒç¼–ç å™¨æ—¨åœ¨å°†è¾“å…¥å›¾åƒç¼–ç ä¸ºè¯­ä¹‰ä¿¡æ¯ä¸°å¯Œçš„æ·±åº¦ç‰¹å¾ï¼Œå®ƒç”±ç”¨äºåŸºæœ¬ç‰¹å¾æå–çš„ 2D backbone å’Œç”¨äºå¤šå°ºåº¦ç‰¹å¾æå–çš„ FPN ç»„æˆï¼Œå¹¶é‡‡ç”¨äº†ä¸€ä¸ªç®€å•çš„åŠŸèƒ½è‡ªé€‚åº”æ¨¡å— ADP æ¥å®Œå–„ä¸Šé‡‡æ ·åŠŸèƒ½ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://mcnsakkce4vm.feishu.cn/space/api/box/stream/download/asynccode/?code=YjE3MTZkN2EwMDgzMjczYjA3OTVmZWJjZDcxYjgzM2ZfbUZGTzM5RjRNcE5MczVNbUpGWnAxYnQxNnJieWtsQ0NfVG9rZW46Q2ROa2I0VEw0bzR2MzV4OVlaQWNrV2E1bjNZXzE3NjMxMzAwNjA6MTc2MzEzMzY2MF9WNA" alt="" loading="lazy"/></p>
<p>è§†è§‰æŠ•å½±æ¨¡å—é‡‡ç”¨ LSSï¼Œå°†å›¾åƒç‰¹å¾è½¬æ¢åˆ°è‡ªè½¦åæ ‡ç³»çš„ 3D è¡¨ç¤ºã€‚è¯¥æ–¹æ³•ä»¥å›¾åƒè§†å›¾ä¸ºè¾“å…¥ï¼Œé€šè¿‡ç¦»æ•£åˆ†ç±»çš„æ–¹å¼å¯†é›†é¢„æµ‹æ·±åº¦ï¼›éšåç»“åˆç›¸æœºå¤–å‚ä¸é¢„æµ‹æ·±åº¦ï¼Œç”Ÿæˆä¼ªä½“ç´ è¡¨ç¤ºã€‚</p>
<p>BEV ç¼–ç æ¨¡å—é‡‡ç”¨ç©ºé—´åˆ°é€šé“ï¼ˆS2Cï¼‰æ“ä½œå°† 4D ä¼ªä½“ç´ ç‰¹å¾ç¼–ç åˆ° 3D BEV ç©ºé—´ï¼Œä»è€Œä¿ç•™è¯­ä¹‰ä¿¡æ¯å¹¶é™ä½æˆæœ¬ã€‚ç„¶åä½¿ç”¨å››ä¸ª 3 Ã— 3 å·ç§¯å±‚ç¼©å°é€šé“ç»´åº¦ï¼Œå¹¶æå–é«˜çº§è¯­ä¹‰ä¿¡æ¯ã€‚</p>
<p>åŠ¨æ€èåˆæ¨¡å—çš„ä½œç”¨æ˜¯å°† concat åçš„ ç›¸æœºã€ LiDAR çš„ BEV ç‰¹ è¿›è¡Œæœ‰æ•ˆèåˆï¼ŒBEVFusion åº”ç”¨ä¸€ä¸ªç®€å•çš„é€šé“æ³¨æ„åŠ›æ¨¡å—æ¥é€‰æ‹©é‡è¦çš„èåˆç‰¹å¾ï¼Œç½‘ç»œç»“æ„å›¾å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p><img src="https://mcnsakkce4vm.feishu.cn/space/api/box/stream/download/asynccode/?code=ZTAzMzU4YzUxZWVkNjcxMjE4ZWVmZmM1MjZiNDA3OTZfZEp1dHM2QmdXRk15bjlpZ3VqQ2lOclhjYWd2UWh2ZVFfVG9rZW46TlE5ZmJXWndXb0JLdXF4dGFmdGNRZk54bnJjXzE3NjMxMzAwNjA6MTc2MzEzMzY2MF9WNA" alt="" loading="lazy"/></p>
<p>LiDAR æµå°†æ¿€å…‰é›·è¾¾ç‚¹è½¬æ¢ä¸º BEV ç©ºé—´ï¼ŒBEVFusion é‡‡ç”¨ 3 ç§æµè¡Œçš„æ–¹æ³•ï¼ŒPointPillarsã€CenterPoint å’Œ TransFusion ä½œä¸ºæ¿€å…‰é›·è¾¾æµï¼Œä»è€Œå±•ç¤ºæ¨¡å‹æ¡†æ¶çš„ä¼˜ç§€æ³›åŒ–èƒ½åŠ›ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[AI å¤šæ¨¡æ€å…¨æ ˆåº”ç”¨é¡¹ç›®æè¿°]]></title>    <link>https://juejin.cn/post/7572396000545030207</link>    <guid>https://juejin.cn/post/7572396000545030207</guid>    <pubDate>2025-11-14T14:46:58.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572396000545030207" data-draft-id="7572387068314468379" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="AI å¤šæ¨¡æ€å…¨æ ˆåº”ç”¨é¡¹ç›®æè¿°"/> <meta itemprop="keywords" content="å‰ç«¯,Vue.js,Node.js"/> <meta itemprop="datePublished" content="2025-11-14T14:46:58.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¼–ç¨‹å¹²è´§é“º"/> <meta itemprop="url" content="https://juejin.cn/user/52383084474680"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            AI å¤šæ¨¡æ€å…¨æ ˆåº”ç”¨é¡¹ç›®æè¿°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/52383084474680/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¼–ç¨‹å¹²è´§é“º
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-14T14:46:58.000Z" title="Fri Nov 14 2025 14:46:58 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>â€‹</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b88115ec691a4c27a5dd1552d2f473d2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg57yW56iL5bmy6LSn6ZO6:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763736418&amp;x-signature=3RlH%2BmgOtTkJHAuf3A3BuzJ7XC4%3D" alt="AI å¤šæ¨¡æ€åº”ç”¨é¡¹ç›®æè¿°.png" loading="lazy"/></p>
<h4 data-id="heading-0">ä¸€ã€é¡¹ç›®æ¦‚è¿°</h4>
<p>æœ¬é¡¹ç›®æ˜¯åŸºäº <strong>Vue 3.5 + Node.js + Express</strong> æ„å»ºçš„ç°ä»£åŒ– AI å¤šæ¨¡æ€åº”ç”¨ï¼Œå®ç° <strong>æ™ºèƒ½å¯¹è¯ã€AI å†™ä½œã€å›¾åƒç”Ÿæˆã€è¯­éŸ³è¯†åˆ«ä¸åˆæˆ</strong> ç­‰æ ¸å¿ƒåŠŸèƒ½ã€‚é‡‡ç”¨ <strong>å‰åç«¯åˆ†ç¦»æ¶æ„</strong>ï¼Œèšç„¦å·¥ç¨‹åŒ–å®è·µä¸ç”¨æˆ·ä½“éªŒä¼˜åŒ–ï¼Œåœ¨å®‰å…¨æ€§ã€æ€§èƒ½ã€å¯ç»´æŠ¤æ€§ç­‰ç»´åº¦å½¢æˆå®Œæ•´è§£å†³æ–¹æ¡ˆï¼Œè¾¾åˆ°ç”Ÿäº§çº§åº”ç”¨æ ‡å‡†ã€‚</p>
<h4 data-id="heading-1">äºŒã€æŠ€æœ¯æ ˆæ¶æ„</h4>
<h5 data-id="heading-2">å‰ç«¯æŠ€æœ¯æ ˆ</h5>
<ul>
<li><strong>æ¡†æ¶</strong>ï¼šVue 3.5ï¼ˆComposition APIï¼‰</li>
<li><strong>UI</strong> <strong>ç»„ä»¶</strong>ï¼šElement Plus 2.7</li>
<li><strong>çŠ¶æ€ç®¡ç†</strong>ï¼šPinia 2.1</li>
<li><strong>è·¯ç”±</strong>ï¼šVue Router 4.2</li>
<li><strong>æ„å»ºå·¥å…·</strong>ï¼šVite 5.0</li>
<li><strong>å¯Œæ–‡æœ¬</strong>ï¼šWangEditor 5.1</li>
<li><strong>ç½‘ç»œè¯·æ±‚</strong>ï¼šAxios 1.11</li>
<li><strong>æ€§èƒ½ä¼˜åŒ–</strong>ï¼š@tanstack/vue-virtual 3.13ï¼ˆè™šæ‹Ÿæ»šåŠ¨ï¼‰</li>
<li><strong>å†…å®¹æ¸²æŸ“</strong>ï¼šmarkdown-it 14.1ï¼ˆMarkdown è§£æï¼‰</li>
</ul>
<h5 data-id="heading-3">åç«¯æŠ€æœ¯æ ˆ</h5>
<ul>
<li><strong>è¿è¡Œæ—¶</strong>ï¼šNode.js</li>
<li><strong>Web æ¡†æ¶</strong>ï¼šExpress 5.1</li>
<li><strong>æ•°æ®å±‚</strong>ï¼šPrisma 6.16 + MySQL 3.14ï¼ˆORM ä¸æ•°æ®åº“ï¼‰</li>
<li><strong>è®¤è¯</strong>ï¼šJWTï¼ˆjsonwebtoken 9.0ï¼‰</li>
<li><strong>å®‰å…¨</strong>ï¼šHelmet 8.1ï¼ˆå®‰å…¨å¤´ï¼‰ã€CORS 2.8ï¼ˆè·¨åŸŸï¼‰</li>
<li><strong>åŠ å¯†</strong>ï¼šbcryptjs 3.0ï¼ˆå¯†ç å“ˆå¸Œï¼‰</li>
<li><strong>æ–‡ä»¶å¤„ç†</strong>ï¼šMulter 2.0ï¼ˆä¸Šä¼ ï¼‰</li>
<li><strong>å®æ—¶é€šä¿¡</strong>ï¼šws 8.18ï¼ˆWebSocketï¼‰</li>
<li><strong>æ—¥å¿—</strong>ï¼šMorgan 1.10</li>
</ul>
<h5 data-id="heading-4">æ ¸å¿ƒ AI æœåŠ¡é›†æˆ</h5>
<ul>
<li><strong>å¯¹è¯</strong>ï¼šè±†åŒ… Seed 1.6ï¼ˆæ”¯æŒå¿«é€Ÿ / æ·±åº¦æ€è€ƒæ¨¡å¼ï¼‰</li>
<li><strong>è¯­éŸ³åˆæˆ</strong>ï¼šè±†åŒ… TTSï¼ˆWebSocket æµå¼ä¼ è¾“ï¼‰</li>
<li><strong>è¯­éŸ³è¯†åˆ«</strong>ï¼šè±†åŒ… ASRï¼ˆå®æ—¶è½¬å†™ï¼‰</li>
<li><strong>å›¾åƒç”Ÿæˆ</strong>ï¼šè±†åŒ… Seedream 4.0</li>
</ul>
<h4 data-id="heading-5">ä¸‰ã€æ ¸å¿ƒæŠ€æœ¯ä¸åŠŸèƒ½äº®ç‚¹</h4>
<ol>
<li>
<h5 data-id="heading-6">ä¼ä¸šçº§èº«ä»½è®¤è¯ä¸æƒé™ç®¡ç†</h5>
</li>
</ol>
<h6 data-id="heading-7">ä¸šåŠ¡æŒ‘æˆ˜</h6>
<p>éœ€å¹³è¡¡ç™»å½•æ³¨å†Œæµç¨‹çš„å®‰å…¨æ€§ä¸å¼€å‘æ•ˆç‡ï¼Œè§£å†³ <strong>XSS</strong> <strong>/</strong> <strong>CSRF</strong> <strong>é˜²æŠ¤ã€å‡­è¯å®‰å…¨ä¼ è¾“ã€è‡ªåŠ¨é‰´æƒåŠå¤šè§’è‰²æ‰©å±•</strong> é—®é¢˜ã€‚</p>
<h6 data-id="heading-8">æŠ€æœ¯å®ç°</h6>
<ul>
<li><strong>ä¸‰å±‚é‰´æƒæ¶æ„</strong>ï¼šå‰ç«¯å“åº”å¼è¡¨å•éªŒè¯ï¼ˆç”¨æˆ·å / å¯†ç è§„åˆ™æ ¡éªŒï¼‰â†’ åç«¯ Prisma æŸ¥è¯¢ + bcrypt åŠ å¯†ï¼ˆsalt rounds=10ï¼‰â†’ JWT ç”Ÿæˆï¼ˆå« user_id/roleï¼Œæœ‰æ•ˆæœŸ 24hï¼‰ã€‚</li>
<li><strong>è‡ªåŠ¨åŒ–é‰´æƒ</strong>ï¼šJWT å­˜å‚¨äº <strong>HttpOnly</strong> <strong>Cookie</strong> <strong>ï¼ˆé˜²</strong> <strong>XSS</strong> <strong>ï¼‰</strong> ï¼Œåç«¯ç»Ÿä¸€ä¸­é—´ä»¶æå–éªŒè¯ä»¤ç‰Œï¼Œæ³¨å…¥ç”¨æˆ·ä¿¡æ¯è‡³ req.userï¼Œæ”¯æŒ <strong>è§’è‰²æƒé™ï¼ˆUSER/ADMINï¼‰ç»†ç²’åº¦æ§åˆ¶</strong>ã€‚</li>
<li><strong>å®‰å…¨å¢å¼º</strong>ï¼šé…ç½® secureï¼ˆç”Ÿäº§ç¯å¢ƒ HTTPSï¼‰ã€sameSite=laxï¼ˆé˜² CSRFï¼‰ï¼›å¯†ç åŠ å¯†é‡‡ç”¨å•å‘å“ˆå¸Œï¼Œç™»å‡ºæ—¶ä¸»åŠ¨æ¸…é™¤ Cookie ä¸æœ¬åœ°çŠ¶æ€ã€‚</li>
</ul>
<h6 data-id="heading-9">æ ¸å¿ƒä»·å€¼</h6>
<p>å®ç° <strong>æ— æ„ŸçŸ¥é‰´æƒæµç¨‹</strong>ï¼Œé˜²æŠ¤å¸¸è§ç½‘ç»œæ”»å‡»ï¼Œæ”¯æŒå¤šè§’è‰²æ‰©å±•ï¼Œå®‰å…¨æ€§ä¸ç”¨æˆ·ä½“éªŒå…¼é¡¾ã€‚</p>
<ol>
<li>
<h5 data-id="heading-10">AI å¯¹è¯å¿«é€Ÿå’Œæ·±åº¦æ€è€ƒæ— ç¼åˆ‡æ¢</h5>
</li>
</ol>
<h6 data-id="heading-11">ä¸šåŠ¡æŒ‘æˆ˜</h6>
<p>è±†åŒ…å¿«é€Ÿ / æ·±åº¦æ¨¡å‹å‚æ•°æ ¼å¼å­˜åœ¨å·®å¼‚ï¼Œéƒ½éœ€å¤„ç† <strong>SSE æµå¼æ•°æ®å®ç°é€å­—æ˜¾ç¤º</strong>ï¼Œé™ä½å‰ç«¯è°ƒç”¨å¤æ‚åº¦ã€‚</p>
<h6 data-id="heading-12">æŠ€æœ¯å®ç°</h6>
<ul>
<li><strong>åç«¯æ¥å£ç»Ÿä¸€å°è£…</strong>ï¼šé€šè¿‡ modelApi.js é€‚é…ä¸åŒæ¨¡å‹å‚æ•°ï¼ˆæ·±åº¦æ€è€ƒæ¨¡å‹ä¼šè¿”å›æ€è€ƒæ–‡æœ¬ï¼‰ï¼Œç»Ÿä¸€ messages æ•°ç»„è¾“å…¥æ ¼å¼ï¼ŒæŒ‰ modelType è‡ªåŠ¨è½¬æ¢ã€‚</li>
<li><strong>æµå¼æ•°æ®å¤„ç†</strong>ï¼šç¼“å†²åŒºè§£å†³æ•°æ®åˆ†å‰²é—®é¢˜ï¼Œè§£æ SSE æ ¼å¼æå–å¢é‡å†…å®¹ï¼ŒåŒºåˆ†æ·±åº¦æ¨¡å‹çš„ â€œæ€è€ƒè¿‡ç¨‹â€ ä¸ â€œæœ€ç»ˆç­”æ¡ˆâ€ï¼Œè¿”å›ç»Ÿä¸€æ ¼å¼ï¼ˆ{status, data: {content, type}}ï¼‰ã€‚</li>
<li><strong>å‰ç«¯</strong> <strong>å®æ—¶æ¸²æŸ“</strong>ï¼šè‡ªå®šä¹‰ POST-based SSE å®¢æˆ·ç«¯ï¼ˆåŸç”Ÿ EventSource ä»…æ”¯æŒ GETï¼‰ï¼Œåˆ©ç”¨ Vue å“åº”å¼ç³»ç»Ÿæ‹¼æ¥å¢é‡å†…å®¹ï¼Œå®ç°è‡ªç„¶çš„ <strong>é€å­—æ˜¾ç¤ºæ•ˆæœ</strong>ã€‚</li>
</ul>
<h6 data-id="heading-13">æ ¸å¿ƒä»·å€¼</h6>
<p>å‰ç«¯æ— éœ€å…³æ³¨æ¨¡å‹å·®å¼‚ï¼Œåˆ‡æ¢é›¶æˆæœ¬ï¼›<strong>æµå¼æ¸²æŸ“ä¼˜åŒ–å¯¹è¯ä½“éªŒ</strong>ï¼Œå‰åç«¯è§£è€¦æå‡å¯ç»´æŠ¤æ€§ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8566c25f02734a3188952dfaa3d9079f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg57yW56iL5bmy6LSn6ZO6:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763736418&amp;x-signature=eaJ8dVPSBrcsIlXLQEbrz2fHdxo%3D" alt="" loading="lazy"/><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>â€‹ç¼–è¾‘</p>
<ol>
<li>
<h5 data-id="heading-14">é•¿åˆ—è¡¨æ€§èƒ½ä¼˜åŒ–æ–¹æ¡ˆ</h5>
</li>
</ol>
<h6 data-id="heading-15">ä¸šåŠ¡æŒ‘æˆ˜</h6>
<p>èŠå¤©è®°å½•å¢é•¿å¯¼è‡´ <strong>é¦–å±åŠ è½½æ…¢ã€</strong> <strong>DOM</strong> <strong>èŠ‚ç‚¹å†—ä½™ï¼ˆ2000+ï¼‰ã€æ»šåŠ¨å¡é¡¿ï¼ˆ30-40</strong> <strong>fps</strong> <strong>ï¼‰</strong> ã€‚</p>
<h6 data-id="heading-16">æŠ€æœ¯å®ç°</h6>
<ul>
<li><strong>åç«¯åˆ†é¡µç­–ç•¥</strong>ï¼šé»˜è®¤åŠ è½½æœ€æ–° 20 æ¡ï¼Œæ»šåŠ¨è§¦é¡¶æ—¶åŠ è½½ä¸Šä¸€é¡µï¼›æŒ‰ created_at å€’åºæŸ¥è¯¢ï¼ˆåˆ©ç”¨ç´¢å¼•ï¼‰ï¼Œè¿”å› hasNext/hasPrev å…ƒæ•°æ®ï¼Œå¹¶è¡ŒæŸ¥è¯¢åˆ—è¡¨ä¸æ€»æ•°æå‡å“åº”é€Ÿåº¦ã€‚</li>
<li><strong>å‰ç«¯è™šæ‹Ÿæ»šåŠ¨</strong>ï¼šä»…æ¸²æŸ“å¯è§†åŒº + ç¼“å†²åŒºå†…å®¹ï¼ˆçº¦ 15 æ¡ï¼‰ï¼Œé€šè¿‡ padding æ¨¡æ‹Ÿæœªæ¸²æŸ“åŒºåŸŸé«˜åº¦ï¼ŒDOM æ•°é‡é™è‡³ 40 ä¸ªï¼›åŠ¨æ€æµ‹é‡æ¯æ¡æ¶ˆæ¯é«˜åº¦å¹¶ç¼“å­˜ï¼ŒåŠ è½½æ–°æ•°æ®æ—¶è‡ªåŠ¨è°ƒæ•´æ»šåŠ¨ä½ç½®ä¿æŒä½“éªŒè¿è´¯ã€‚</li>
</ul>
<h6 data-id="heading-17">ä¼˜åŒ–æ•ˆæœ</h6>
<ul>
<li>é¦–å±åŠ è½½æ—¶é—´ï¼š1.8 ç§’â†’0.3 ç§’ï¼ˆæå‡ 83%ï¼‰</li>
<li>DOM èŠ‚ç‚¹ï¼š2000+â†’40 ä¸ªï¼ˆå‡å°‘ 95%ï¼‰</li>
<li>æ»šåŠ¨å¸§ç‡ï¼š30-40fpsâ†’55-60fps</li>
</ul>
<ol>
<li>
<h5 data-id="heading-18">å®æ—¶æµå¼è¯­éŸ³åˆæˆ</h5>
</li>
</ol>
<h6 data-id="heading-19">ä¸šåŠ¡æŒ‘æˆ˜</h6>
<p>ä¼ ç»Ÿæ–¹æ¡ˆéœ€ç­‰å¾…å®Œæ•´éŸ³é¢‘ç”Ÿæˆï¼ˆ3-5 ç§’ï¼‰ï¼Œç”¨æˆ·ä½“éªŒå·®ï¼Œéœ€å®ç° <strong>ä½å»¶è¿Ÿ</strong> <strong>æµå¼æ’­æ”¾</strong>ã€‚</p>
<h6 data-id="heading-20">æŠ€æœ¯å®ç°</h6>
<ul>
<li><strong>åç«¯å®æ—¶</strong> <strong>ä¸­ç»§</strong>ï¼šWebSocket è¿æ¥è±†åŒ… TTS æœåŠ¡ï¼Œè§£æè‡ªå®šä¹‰äºŒè¿›åˆ¶åè®®ï¼ˆæå– PCM/MP3 æ•°æ®å—ï¼‰ï¼Œé€šè¿‡ HTTP åˆ†å—ä¼ è¾“ï¼ˆTransfer-Encoding: chunkedï¼‰å®æ—¶æ¨é€éŸ³é¢‘æ•°æ®ã€‚</li>
<li><strong>å‰ç«¯æµå¼æ’­æ”¾</strong>ï¼šåˆ©ç”¨ HTML5 Audio å…ƒç´ ç›´æ¥ç»‘å®š API URLï¼Œæ”¶åˆ°é¦–å—æ•°æ®åè§¦å‘ canplay äº‹ä»¶ç«‹å³æ’­æ”¾ï¼›å…¨å±€å•ä¾‹ç®¡ç†æ’­æ”¾å™¨ï¼Œæ–°æ¶ˆæ¯æ’­æ”¾æ—¶è‡ªåŠ¨åœæ­¢å½“å‰éŸ³é¢‘ï¼Œæ”¯æŒè‡ªåŠ¨é‡è¯•ï¼ˆæœ€å¤š 3 æ¬¡ï¼‰ã€‚</li>
<li><strong>æ–‡æœ¬é¢„å¤„ç†</strong>ï¼šè‡ªåŠ¨å»é™¤ Markdown æ ¼å¼ï¼Œæˆªæ–­è¿‡é•¿å†…å®¹ï¼ˆ&gt;1000 å­—ï¼‰é¿å…ç”Ÿæˆè¶…æ—¶ã€‚</li>
</ul>
<h6 data-id="heading-21">æ ¸å¿ƒä»·å€¼</h6>
<p>å»¶è¿Ÿä» 3-5 ç§’é™è‡³ 0.5-1 ç§’ï¼Œ<strong>è¾¹ä¼ è¾¹æ’­æå‡ç”¨æˆ·ä½“éªŒ</strong>ï¼Œè·¨åŸŸé…ç½®ä¸è‡ªåŠ¨æ’­æ”¾ç­–ç•¥ä¿éšœå…¼å®¹æ€§ã€‚</p>
<ol>
<li>
<h5 data-id="heading-22">å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ AI å†™ä½œåŠ©æ‰‹</h5>
</li>
</ol>
<h6 data-id="heading-23">ä¸šåŠ¡æŒ‘æˆ˜</h6>
<p>éœ€åœ¨ç¼–è¾‘å™¨ä¸­æ— ç¼é›†æˆè¯­éŸ³åŠŸèƒ½ï¼Œæ”¯æŒå¤šç§è§¦å‘æ–¹å¼ï¼Œä¸æ‰“æ–­å†™ä½œèŠ‚å¥ã€‚</p>
<h6 data-id="heading-24">æŠ€æœ¯å®ç°</h6>
<ul>
<li><strong>å¤šè§¦å‘æ–¹å¼</strong>ï¼šå·¥å…·æ  â€œAI å·¥å…·â€ ä¸‹æ‹‰èœå•ï¼ˆç»­å†™ / æ€»ç»“ / æ¶¦è‰²ç­‰ï¼‰ã€Ctrl+Alt å¿«æ·é”®å”¤é†’å¼¹çª—ï¼ˆè·Ÿéšå…‰æ ‡å®šä½ï¼‰ã€é€‰ä¸­æ–‡æœ¬è‡ªåŠ¨è¯†åˆ«ï¼ˆé«˜äº®æç¤ºï¼‰ã€‚</li>
<li><strong>å®æ—¶åé¦ˆ</strong>ï¼šAI ç”Ÿæˆå†…å®¹ <strong>é€å­—æ˜¾ç¤ºï¼ˆæ‰“å­—æœºæ•ˆæœï¼‰</strong> ï¼Œå®Œæˆåä¸€é”®æ’å…¥å…‰æ ‡ä½ç½®ï¼Œæ”¯æŒæ›¿æ¢ / è¿½åŠ é€‰ä¸­æ–‡æœ¬ã€‚</li>
<li><strong>è§£è€¦</strong> <strong>è®¾è®¡</strong>ï¼šAI åŠŸèƒ½ä¸ç¼–è¾‘å™¨é€šè¿‡å…¨å±€äº‹ä»¶é€šä¿¡ï¼Œæ–°å¢åŠŸèƒ½æ— éœ€ä¿®æ”¹ç¼–è¾‘å™¨æ ¸å¿ƒä»£ç ã€‚</li>
</ul>
<h6 data-id="heading-25">æ ¸å¿ƒä»·å€¼</h6>
<p>æ“ä½œæµç•…ä¸æ‰“æ–­å†™ä½œèŠ‚å¥ï¼Œ<strong>å¤šè§¦å‘æ–¹å¼é€‚é…ä¸åŒä½¿ç”¨åœºæ™¯</strong>ï¼ŒåŠ¨æ€å®šä½ä¸çŠ¶æ€æç¤ºæå‡äº¤äº’ä½“éªŒã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/54c85fb5eda24e19b07325b98cc66de5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg57yW56iL5bmy6LSn6ZO6:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763736418&amp;x-signature=V1WTKPEQgfDAGzzt6IvNVOAl65A%3D" alt="" loading="lazy"/><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>â€‹ç¼–è¾‘</p>
<ol>
<li>
<h5 data-id="heading-26">æ™ºèƒ½è¯­éŸ³è¯†åˆ«å®æ—¶è½¬å†™</h5>
</li>
</ol>
<h6 data-id="heading-27">ä¸šåŠ¡æŒ‘æˆ˜</h6>
<p>å®ç° â€œè¾¹è¯´è¾¹å†™â€ æå‡è¾“å…¥æ•ˆç‡ï¼Œéœ€è§£å†³ <strong>éŸ³é¢‘æ ¼å¼è½¬æ¢ã€æµè§ˆå™¨å…¼å®¹ã€å®æ—¶åé¦ˆ</strong> é—®é¢˜ã€‚</p>
<h6 data-id="heading-28">æŠ€æœ¯å®ç°</h6>
<ul>
<li><strong>å®æ—¶è½¬å†™æµç¨‹</strong>ï¼šWebSocket æµå¼ä¼ è¾“ PCM éŸ³é¢‘ï¼ˆ16kHz é‡‡æ ·ç‡ï¼Œ16 ä½æ·±åº¦ï¼‰ï¼Œåç«¯è¯†åˆ«ä¸­é—´ç»“æœå³æ—¶è¿”å›ï¼Œå‰ç«¯æ’å…¥ç¼–è¾‘å™¨ï¼›æœ€ç»ˆç»“æœè‡ªåŠ¨æ›´æ–°ä¸­é—´å†…å®¹ï¼Œæ”¯æŒ ESC åœæ­¢å½•éŸ³ã€‚</li>
<li><strong>æ ¼å¼æ ‡å‡†åŒ–</strong>ï¼šæµè§ˆå™¨é‡‡é›†çš„ Float32 éŸ³é¢‘â†’è½¬æ¢ä¸º Int16 PCMï¼Œç»Ÿä¸€æœåŠ¡ç«¯è¾“å…¥æ ¼å¼ï¼Œæå‡è¯†åˆ«å‡†ç¡®ç‡ã€‚</li>
<li><strong>åˆ†å±‚æ¶æ„</strong>ï¼šUI äº¤äº’å±‚â†’æ ¸å¿ƒæ§åˆ¶å±‚ï¼ˆå½•éŸ³ / WebSocket ç®¡ç†ï¼‰â†’éŸ³é¢‘å¤„ç†å±‚â†’é€šä¿¡å±‚â†’è¯Šæ–­å±‚ï¼Œä¿éšœç¨³å®šæ€§ã€‚</li>
</ul>
<h6 data-id="heading-29">æ ¸å¿ƒä»·å€¼</h6>
<p><strong>å®æ—¶åé¦ˆå‡å°‘ç­‰å¾…æ„Ÿ</strong>ï¼Œæ ¼å¼ç»Ÿä¸€æå‡è¯†åˆ«å‡†ç¡®ç‡ï¼Œæ–°è€æµè§ˆå™¨å…¼å®¹è¦†ç›–å…¨åœºæ™¯ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a489b4b9c7e14fc38c4afb3e717255b1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg57yW56iL5bmy6LSn6ZO6:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763736418&amp;x-signature=Q%2F6%2F7w47UlZUwpCp2OtVh9wDVWM%3D" alt="" loading="lazy"/><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>â€‹ç¼–è¾‘</p>
<ol>
<li>
<h5 data-id="heading-30">å›¾åƒç”Ÿæˆæ¥å£çš„å·¥ç¨‹åŒ–å®è·µ</h5>
</li>
</ol>
<h6 data-id="heading-31">ä¸šåŠ¡æŒ‘æˆ˜</h6>
<p>å°†è±†åŒ… Seedream 4.0 API å°è£…ä¸ºç”Ÿäº§çº§æœåŠ¡ï¼Œæ ¸å¿ƒé—®é¢˜åœ¨äºï¼š<strong>å¤–éƒ¨ API è¿”å›çš„å›¾ç‰‡</strong> <strong>URL</strong> <strong>å¯èƒ½å¤±æ•ˆï¼Œæ— æ³•ä¿è¯é•¿æœŸå¯ç”¨æ€§</strong>ã€‚åŒæ—¶éœ€è§£å†³ <strong>ç¨³å®šæ€§ã€å®‰å…¨æ€§ã€å¯ç»´æŠ¤æ€§</strong> ç­‰å·¥ç¨‹åŒ–é—®é¢˜ï¼Œæ¶µç›–å›¾ç‰‡æŒä¹…åŒ–ã€å¹¶å‘ä¸‹è½½ã€æ ¼å¼è¯†åˆ«ã€æ•°æ®ä¸€è‡´æ€§ç­‰å¤šä¸ªæ–¹é¢ã€‚</p>
<h6 data-id="heading-32">æŠ€æœ¯å®ç°</h6>
<p>é‡‡ç”¨åˆ†å±‚æ¶æ„ä¿éšœç³»ç»Ÿç¨³å®šè¿è¡Œï¼Œå…·ä½“ä¸ºï¼šè·¯ç”±å±‚ï¼ˆRESTful æ¥å£ï¼‰â†’ä¸­é—´ä»¶å±‚ï¼ˆJWT é‰´æƒ / å‚æ•°éªŒè¯ / é™æµï¼‰â†’æ§åˆ¶å™¨å±‚ï¼ˆè¯·æ±‚å¤„ç†ï¼‰â†’æœåŠ¡å±‚ï¼ˆAPI è°ƒç”¨ / å›¾ç‰‡ä¸‹è½½ï¼‰â†’æ•°æ®å±‚ï¼ˆPrisma å­˜å‚¨ï¼‰ã€‚åœ¨æ­¤åŸºç¡€ä¸Šï¼Œå®ç°ä»¥ä¸‹æ ¸å¿ƒæŠ€æœ¯ï¼š</p>
<h6 data-id="heading-33">å›¾ç‰‡æœ¬åœ°åŒ–å­˜å‚¨ï¼šè§£å†³å¤–éƒ¨ URL å¤±æ•ˆé—®é¢˜</h6>
<ul>
<li><strong>æ ¸å¿ƒç­–ç•¥</strong>ï¼šä¸ç›´æ¥è¿”å›å¤–éƒ¨ URLï¼Œè€Œæ˜¯å°†ç”Ÿæˆçš„å›¾ç‰‡ä¸‹è½½åˆ°æœ¬åœ°æœåŠ¡å™¨ï¼ˆ<code>uploads/images/</code>ç›®å½•ï¼‰ï¼Œè¿”å›æœ¬åœ°è·¯å¾„</li>
<li><strong>æ–‡ä»¶å‘½åè§„åˆ™</strong>ï¼š<code>{imageId}_{index}.{ext}</code>ï¼ˆå¦‚<code>uuid_1.png</code>ï¼‰ï¼Œç¡®ä¿å”¯ä¸€æ€§ä¸å¯è¿½æº¯æ€§</li>
<li><strong>é•¿æœŸå¯ç”¨æ€§</strong>ï¼šå›¾ç‰‡å­˜å‚¨åœ¨è‡ªæœ‰æœåŠ¡å™¨ï¼Œä¸å—å¤–éƒ¨æœåŠ¡å½±å“ï¼Œç”¨æˆ·å¯éšæ—¶è®¿é—®å†å²ç”Ÿæˆçš„å›¾ç‰‡</li>
</ul>
<h6 data-id="heading-34">å¹¶å‘ä¸‹è½½ä¼˜åŒ–ï¼šæå‡å¤šå›¾ç”Ÿæˆæ•ˆç‡</h6>
<ul>
<li><strong>å¹¶å‘ç­–ç•¥</strong>ï¼šä½¿ç”¨<code>Promise.all</code>å¹¶å‘ä¸‹è½½å¤šå¼ å›¾ç‰‡ï¼ˆæœ€å¤š 4 å¼ ï¼‰ï¼Œè€Œéä¸²è¡Œä¸‹è½½</li>
<li><strong>æ€§èƒ½æå‡</strong>ï¼š4 å¼ å›¾ç‰‡å¹¶å‘ä¸‹è½½æ—¶é—´ä»ä¸²è¡Œçš„ 8-12 ç§’é™è‡³ 2-3 ç§’ï¼Œæå‡ 75%</li>
<li><strong>è¶…æ—¶æ§åˆ¶</strong>ï¼šå•å¼ å›¾ç‰‡ä¸‹è½½è¶…æ—¶ 60 ç§’ï¼Œé¿å…é•¿æ—¶é—´é˜»å¡</li>
</ul>
<h6 data-id="heading-35">æ™ºèƒ½æ ¼å¼è¯†åˆ«ï¼šç¡®ä¿æ–‡ä»¶æ ¼å¼æ­£ç¡®</h6>
<ul>
<li><strong>å¤šçº§åˆ¤æ–­æœºåˆ¶</strong>ï¼š</li>
</ul>
<ol>
<li>ä¼˜å…ˆæ ¹æ® HTTP å“åº”å¤´<code>Content-Type</code>åˆ¤æ–­ï¼ˆimage/pngã€image/jpegã€image/webpï¼‰</li>
<li>æ— æ³•åˆ¤æ–­æ—¶ï¼Œæ ¹æ® URL åç¼€çŒœæµ‹</li>
<li>å…œåº•ä½¿ç”¨<code>.png</code>æ ¼å¼</li>
</ol>
<ul>
<li><strong>å®¹é”™å¤„ç†</strong>ï¼šå³ä½¿å¤–éƒ¨æœåŠ¡è¿”å›æ ¼å¼ä¿¡æ¯ä¸å®Œæ•´ï¼Œä¹Ÿèƒ½æ­£ç¡®ä¿å­˜å›¾ç‰‡</li>
</ul>
<h6 data-id="heading-36">å®Œæ•´çš„æ•°æ®æŒä¹…åŒ–ä½“ç³»</h6>
<ul>
<li><strong>æœ¬åœ°å­˜å‚¨ + æ•°æ®åº“è®°å½•</strong>ï¼š</li>
<li>æœ¬åœ°å­˜å‚¨ï¼šå›¾ç‰‡æ–‡ä»¶ä¿å­˜åˆ°<code>uploads/images/</code>ç›®å½•</li>
<li>æ•°æ®åº“è®°å½•ï¼šä½¿ç”¨ Prisma ORM å­˜å‚¨ç”Ÿæˆå‚æ•°ï¼ˆæç¤ºè¯ã€å°ºå¯¸ã€æ¨¡å‹ã€æ•°é‡ï¼‰ã€å›¾ç‰‡è·¯å¾„æ•°ç»„ã€ç”Ÿæˆæ—¶é—´ã€ç”¨æˆ· IDã€ä¼šè¯ ID ç­‰</li>
<li><strong>å†å²æŸ¥è¯¢æ”¯æŒ</strong>ï¼š</li>
<li>æ”¯æŒæŒ‰ä¼šè¯åˆ†é¡µæŸ¥è¯¢å†å²ç”Ÿæˆè®°å½•</li>
<li>æ”¯æŒæŒ‰ç”¨æˆ·æŸ¥è¯¢æ”¶è—çš„å›¾ç‰‡</li>
<li>è¿”å›<code>hasNext</code>ã€<code>hasPrev</code>ç­‰åˆ†é¡µå…ƒæ•°æ®</li>
</ul>
<h6 data-id="heading-37">å®‰å…¨é˜²æŠ¤</h6>
<p>JWT é‰´æƒã€è¾“å…¥æ ¡éªŒï¼ˆæç¤ºè¯é•¿åº¦ / å°ºå¯¸ç™½åå•ï¼‰ã€API å¯†é’¥ç¯å¢ƒå˜é‡ç®¡ç†ã€å¯æ‰©å±•é™æµæœºåˆ¶ã€‚</p>
<h6 data-id="heading-38">æ ¸å¿ƒä»·å€¼</h6>
<p>é€šè¿‡ä¸Šè¿°æŠ€æœ¯å®ç°ï¼Œæ¥å£æ”¯æŒå¤šç”¨æˆ·å¹¶å‘è®¿é—®ï¼Œç¡®ä¿å›¾ç‰‡é•¿æœŸå¯ç”¨ï¼›ä¾æ‰˜ç»Ÿä¸€è§„èŒƒçš„åˆ†å±‚æ¶æ„è®¾è®¡ï¼Œç³»ç»Ÿå…·å¤‡å¼ºå¯è§‚æµ‹æ€§ï¼ˆæ—¥å¿— / ç›‘æ§ï¼‰ï¼Œæå¤§æå‡ç»´æŠ¤ä¸æ‰©å±•çš„ä¾¿æ·æ€§ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5c53bec6a45348f7991ef6ecc388a762~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg57yW56iL5bmy6LSn6ZO6:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763736418&amp;x-signature=U994PFSdsUEq3Jsmwq%2BuRjeI6E8%3D" alt="" loading="lazy"/><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>â€‹ç¼–è¾‘</p>
<h4 data-id="heading-39">å››ã€é¡¹ç›®æ€»ç»“</h4>
<h5 data-id="heading-40">æ ¸å¿ƒæŠ€æœ¯äº®ç‚¹</h5>
<ol>
<li><strong>å®‰å…¨æ€§</strong>ï¼šJWT+HttpOnly Cookie é˜²æŠ¤ï¼Œbcrypt åŠ å¯†ï¼ŒCORS/CSRF é˜²æŠ¤ï¼Œè¾“å…¥æ ¡éªŒä¸é™æµã€‚</li>
<li><strong>æ€§èƒ½ä¼˜åŒ–</strong>ï¼šè™šæ‹Ÿæ»šåŠ¨å‡å°‘ 95% DOMï¼Œåˆ†é¡µåŠ è½½æå‡ 83% é¦–å±é€Ÿåº¦ï¼Œæµå¼ä¼ è¾“é™ä½ 80% è¯­éŸ³å»¶è¿Ÿã€‚</li>
<li><strong>ç”¨æˆ·ä½“éªŒ</strong>ï¼šå®æ—¶æµå¼åé¦ˆï¼ˆå¯¹è¯ / è¯­éŸ³ï¼‰ï¼Œæ™ºèƒ½äº¤äº’ï¼ˆå¿«æ·é”® / è‡ªåŠ¨å®šä½ï¼‰ï¼Œæµç•…æ“ä½œï¼ˆæ»šåŠ¨ / ä½ç½®ä¿æŒï¼‰ã€‚</li>
<li><strong>å·¥ç¨‹åŒ–</strong>ï¼šåˆ†å±‚æ¶æ„æ¸…æ™°ï¼Œç»Ÿä¸€é”™è¯¯å¤„ç†ï¼Œå®Œå–„æ—¥å¿—ï¼Œå¯è§‚æµ‹æ€§å¼ºã€‚</li>
<li><strong>å¯ç»´æŠ¤æ€§</strong>ï¼šæ¨¡å—è§£è€¦ï¼Œè§„èŒƒç»Ÿä¸€ï¼ˆAPI / å“åº”æ ¼å¼ï¼‰ï¼Œç±»å‹å®‰å…¨ï¼ˆPrismaï¼‰ã€‚</li>
</ol>
<h2 data-id="heading-41"><strong>å¤šæ¨¡æ€ AIé¡¹ç›®å¼€å‘æŠ€æœ¯å­¦ä¹ </strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fcoding.imooc.com%2Fclass%2F954.html" target="_blank" title="https://coding.imooc.com/class/954.html" ref="nofollow noopener noreferrer">coding.imooc.com/class/954.hâ€¦</a></h2>
<p>â€‹</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é‡ç£…å‡çº§ï¼æ–‡å¿ƒ ERNIE-5.0 æ–°ä¸€ä»£åŸç”Ÿå…¨æ¨¡æ€å¤§æ¨¡å‹ï¼Œè¿™ä½ éƒ½ä¸è®¤å¯å®ƒå—ï¼Ÿï¼]]></title>    <link>https://juejin.cn/post/7572437226022535178</link>    <guid>https://juejin.cn/post/7572437226022535178</guid>    <pubDate>2025-11-14T14:49:48.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572437226022535178" data-draft-id="7572387877139496970" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é‡ç£…å‡çº§ï¼æ–‡å¿ƒ ERNIE-5.0 æ–°ä¸€ä»£åŸç”Ÿå…¨æ¨¡æ€å¤§æ¨¡å‹ï¼Œè¿™ä½ éƒ½ä¸è®¤å¯å®ƒå—ï¼Ÿï¼"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,AIGC"/> <meta itemprop="datePublished" content="2025-11-14T14:49:48.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å—æ–¹è€…"/> <meta itemprop="url" content="https://juejin.cn/user/2840793779295133"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é‡ç£…å‡çº§ï¼æ–‡å¿ƒ ERNIE-5.0 æ–°ä¸€ä»£åŸç”Ÿå…¨æ¨¡æ€å¤§æ¨¡å‹ï¼Œè¿™ä½ éƒ½ä¸è®¤å¯å®ƒå—ï¼Ÿï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2840793779295133/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å—æ–¹è€…
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-14T14:49:48.000Z" title="Fri Nov 14 2025 14:49:48 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    4
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">ğŸ§© å‰è¨€é€Ÿè¯»</h3>
<blockquote>
<p>11 æœˆ 13 æ—¥ï¼Œ2025ç™¾åº¦ä¸–ç•Œå¤§ä¼šä¸Šï¼Œæ–°ä¸€ä»£ã€ŒåŸç”Ÿå…¨æ¨¡æ€ã€å¤§æ¨¡å‹æ–‡å¿ƒ 5.0 æ­£å¼äº®ç›¸ï¼Œ2.4 ä¸‡äº¿å‚æ•°é‡ï¼Œé‡‡ç”¨åŸç”Ÿå…¨æ¨¡æ€ç»Ÿä¸€å»ºæ¨¡æŠ€æœ¯ï¼Œå…·å¤‡å…¨æ¨¡æ€ç†è§£ä¸ç”Ÿæˆèƒ½åŠ›ï¼Œæ”¯æŒã€Œæ–‡æœ¬ã€å›¾åƒã€éŸ³é¢‘ã€è§†é¢‘ã€ç­‰å¤šç§ä¿¡æ¯çš„è¾“å…¥ä¸è¾“å‡ºï¼Œå°†å›½å†…å¤§æ¨¡å‹ç«äº‰åŠ›æ¨å‘å…¨çƒé¡¶å°–æ°´å‡†ã€‚</p>
<p>å¤§ä¼šä¸Šå¼ºè°ƒï¼šâ€œæ™ºèƒ½æœ¬èº«æ˜¯æœ€å¤§çš„åº”ç”¨ï¼ŒæŠ€æœ¯è¿­ä»£é€Ÿåº¦æ˜¯å”¯ä¸€çš„æŠ¤åŸæ²³â€ï¼Œè€Œæ–‡å¿ƒ 5.0 æ­£æ˜¯è¿™ä¸€ç†å¿µçš„æœ€æ–°å®è·µ â€”â€” å®ƒä¸ä»…æ˜¯å‚æ•°è§„æ¨¡çš„è·ƒå‡ï¼Œæ›´æ ‡å¿—ç€ AI ä» â€œå•æ¨¡æ€å¤„ç†â€ è¿ˆå…¥ â€œåŸç”Ÿå¤šæ¨¡æ€èåˆâ€ çš„æ–°é˜¶æ®µã€‚</p>
</blockquote>
<p>æ¥ä¸‹æ¥ï¼Œè®©æˆ‘ä»¬æ¥çœ‹çœ‹è¿™åœºå‡çº§ï¼Œæ˜¯å¦èƒ½è®©å¤§å®¶æ›´åŠ è®¤å¯çš„å§ï¼</p>
<p align="center"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/269c13609cf4414a875ebc6099e1f5d2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2X5pa56ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763737136&amp;x-signature=r%2BZuqBFWAVL%2BrX4YNxZ7q6uCgvw%3D" alt="" loading="lazy"/></p>
<p>è€è§„çŸ©ï¼Œå…ˆä¸Šæ•ˆæœå¯¹æ¯”å›¾ï¼çœ‹çœ‹æ‰€è°“çš„ã€ŒåŸç”Ÿå…¨æ¨¡æ€ã€åˆ°åº•æ˜¯æ€ä¹ˆä¸ªäº‹ï¼Œç›®å‰ä¸»æµå¤§æ¨¡å‹ä¸­ï¼Œåœ¨ã€Œæ–‡æœ¬ã€å›¾åƒã€éŸ³é¢‘ã€è§†é¢‘ã€å››ä¸ªæ¨¡æ€ä¸­ï¼Œæ”¯æŒè¾“å…¥è¾“å‡ºçš„æƒ…å†µæ˜¯è¿™æ ·çš„ï¼š</p>
<p align="center"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4e6f605e5c174a79a2e2c01c719fb069~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2X5pa56ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763737136&amp;x-signature=7YTVc7SkWdVxhascI39jEWwXb6Y%3D" alt="" loading="lazy"/></p>
<p>è¿™æ—¶å€™å¯èƒ½åœ¨æƒ³ï¼Œæœ‰æ²¡æœ‰è¿™ä¹ˆå‰å®³ï¼ŒçœŸçš„æ˜¯ä¸æ˜¯è¿™æ ·ï¼Ÿè¿˜æ˜¯é‚£å¥è¯ï¼š</p>
<p>"Talk is cheap. Show me the code."</p>
<p>è¯ä¸å¤šè¯´ï¼Œæˆ‘ä»¬æ¥ä¸‹æ¥å¼€å§‹å®ƒéƒ½èƒ½å¹²äº›å•¥ï¼</p>
<h3 data-id="heading-1">ä¸€ã€ç”Ÿæˆ 3D ç½‘é¡µ</h3>
<h3 data-id="heading-2">ï¼ˆä¸€ï¼‰è‡ªè½¬åœ°çƒï¼šæ¯«ç±³çº§ç»†èŠ‚çš„ â€œæŒä¸Šæ˜Ÿçƒâ€ ğŸŒ</h3>
<p align="center"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/558401f8fe2f4174beb29bd730a82886~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2X5pa56ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763737136&amp;x-signature=ZBCyIpDDSBk7p4TMmVZBapf9lsg%3D" alt="" width="50%" loading="lazy"/></p>
<p>è¿™æ˜¯ä¸€ä¸ª <strong>â€œ3D åœ°çƒä¸å«æ˜Ÿâ€ æ¨¡æ‹Ÿäº¤äº’ç•Œé¢</strong>ï¼Œç”¨äºç›´è§‚å±•ç¤ºåœ°çƒè‡ªè½¬å’Œå«æ˜Ÿç»•åœ°çƒå…¬è½¬çš„è¿åŠ¨çŠ¶æ€ï¼Œå„éƒ¨åˆ†åŠŸèƒ½ä¸ä¿¡æ¯å¦‚ä¸‹ï¼š</p>
<ul>
<li>
<p><strong>ä¿¡æ¯è¯´æ˜åŒº</strong>ï¼š</p>
<ul>
<li>æ˜ç¡®åœ°çƒè‡ªè½¬å‘¨æœŸä¸º<strong>24 å°æ—¶</strong>ï¼ˆå³åœ°çƒè‡ªèº«æ—‹è½¬ä¸€åœˆçš„æ—¶é—´ï¼Œå¯¹åº”æˆ‘ä»¬çš„ â€œä¸€å¤©â€ï¼‰ï¼›</li>
<li>å«æ˜Ÿå…¬è½¬å‘¨æœŸä¸º<strong>90 åˆ†é’Ÿ</strong>ï¼ˆå³å«æ˜Ÿç»•åœ°çƒæ—‹è½¬ä¸€åœˆçš„æ—¶é—´ï¼‰ï¼›</li>
<li>æ“ä½œæç¤ºï¼šâ€œä½¿ç”¨é¼ æ ‡æ‹–åŠ¨å¯ä»¥æ—‹è½¬è§†è§’â€ï¼Œå³é€šè¿‡é¼ æ ‡æ‹–åŠ¨èƒ½ä»ä¸åŒè§’åº¦è§‚å¯Ÿåœ°çƒä¸å«æ˜Ÿã€‚</li>
</ul>
</li>
<li>
<p><strong>3D å¯è§†åŒ–åœºæ™¯</strong>ï¼š</p>
<ul>
<li>èƒŒæ™¯æ˜¯å¸ƒæ»¡æ’æ˜Ÿçš„é»‘è‰²å¤ªç©ºï¼Œæ¨¡æ‹Ÿå®‡å®™ç¯å¢ƒï¼›</li>
<li>ä¸»ä½“æ˜¯<strong>åœ°çƒçš„ 3D æ¨¡å‹</strong>ï¼Œå¯æ¸…æ™°çœ‹åˆ°é™†åœ°ï¼ˆå¦‚éæ´²åŒºåŸŸï¼‰ã€æµ·æ´‹ä¸äº‘å±‚çš„ç»†èŠ‚ï¼›</li>
<li>åœ°çƒå‘¨å›´çš„è“è‰²è½¨è¿¹ç¤ºæ„<strong>å«æ˜Ÿçš„å…¬è½¬è½¨é“</strong>ï¼Œè½¨é“ä¸Šçš„ç™½è‰²ç‰©ä½“ä»£è¡¨ç»•åœ°å«æ˜Ÿã€‚</li>
</ul>
</li>
<li>
<p><strong>äº¤äº’æ§åˆ¶åŒº</strong>ï¼š</p>
<ul>
<li>åº•éƒ¨ â€œæš‚åœ / ç»§ç»­â€ æŒ‰é’®ï¼šæ§åˆ¶åœ°çƒè‡ªè½¬ã€å«æ˜Ÿå…¬è½¬æ¨¡æ‹Ÿçš„å¯åœï¼›</li>
<li>â€œé‡ç½®è§†è§’â€ æŒ‰é’®ï¼šå°†è§‚å¯Ÿè§’åº¦æ¢å¤ä¸ºåˆå§‹çŠ¶æ€ã€‚</li>
</ul>
</li>
</ul>
<p>è¿™ä¸ªç•Œé¢é€šè¿‡ 3D å¯è§†åŒ–å’Œäº¤äº’æ“ä½œï¼Œå¸®åŠ©äººä»¬ç›´è§‚ç†è§£åœ°çƒè‡ªè½¬ã€å«æ˜Ÿå…¬è½¬çš„å‘¨æœŸä¸è¿åŠ¨å…³ç³»ï¼Œæ˜¯å…¼å…·ç§‘æ™®æ€§ä¸äº’åŠ¨æ€§çš„å·¥å…·ã€‚</p>
<h3 data-id="heading-3">ï¼ˆäºŒï¼‰å¤ªé˜³ç³» 3D æ¨¡æ‹Ÿï¼šå¯äº¤äº’çš„ â€œå¾®å‹å®‡å®™â€</h3>
<p align="center"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5ae7c0d21d5042438570dd66dc6ffdf9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2X5pa56ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763737136&amp;x-signature=xh2zpppJcdYA5bBHGcRBd%2FzdpCE%3D" alt="" width="50%" loading="lazy"/></p>
<p>è¿™æ˜¯ä¸€ä¸ª<strong>å¤ªé˜³ç³» 3D æ¨¡æ‹Ÿäº¤äº’ç•Œé¢</strong>ï¼Œç”¨äºç›´è§‚å±•ç¤ºå¤ªé˜³ç³»çš„ç»“æ„ä¸è¡Œæ˜Ÿè¿åŠ¨ï¼Œå¯åˆ†ä¸º<strong>å·¦ä¾§æ§åˆ¶é¢æ¿</strong>å’Œ<strong>å³ä¾§ 3D æ¨¡æ‹Ÿåœºæ™¯</strong>ä¸¤éƒ¨åˆ†ï¼š</p>
<ul>
<li>
<p>å·¦ä¾§æ§åˆ¶é¢æ¿</p>
<ul>
<li>
<p><strong>æ ‡é¢˜ä¸åŠŸèƒ½è¯´æ˜</strong>ï¼šâ€œå¤ªé˜³ç³» 3D æ¨¡æ‹Ÿâ€ï¼Œæ ¸å¿ƒåŠŸèƒ½æ˜¯æ¢ç´¢å¤ªé˜³ç³»ï¼Œè§‚å¯Ÿè¡Œæ˜Ÿç»•æ—¥è½¨è¿¹ï¼Œæ”¯æŒé€šè¿‡æ»‘å—è°ƒèŠ‚æ¨¡æ‹Ÿé€Ÿåº¦ã€ç¼©æ”¾è§†è§’ï¼Œç‚¹å‡»è¡Œæ˜ŸæŸ¥çœ‹è¯¦ç»†ä¿¡æ¯ã€‚</p>
</li>
<li>
<p><strong>äº¤äº’æ»‘å—</strong>ï¼š</p>
<ul>
<li>â€œæ¨¡æ‹Ÿé€Ÿåº¦â€ æ»‘å—ï¼šæ§åˆ¶è¡Œæ˜Ÿç»•å¤ªé˜³å…¬è½¬çš„æ¨¡æ‹Ÿé€Ÿç‡ï¼ˆå¦‚åŠ å¿«æˆ–å‡æ…¢å…¬è½¬åŠ¨ç”»ï¼‰ã€‚</li>
<li>â€œç¼©æ”¾â€ æ»‘å—ï¼šè°ƒæ•´ 3D åœºæ™¯çš„è§†è§’ç¼©æ”¾ç¨‹åº¦ï¼ˆæ‹‰è¿‘æˆ–æ‹‰è¿œè§‚å¯Ÿå¤ªé˜³ç³»ï¼‰ã€‚</li>
</ul>
</li>
<li>
<p><strong>è¡Œæ˜Ÿä¿¡æ¯åŒº</strong>ï¼šå½“å‰å±•ç¤º<strong>å¤ªé˜³</strong>çš„å…³é”®å‚æ•°ï¼š</p>
<ul>
<li>ç›´å¾„ï¼š1,392,700 kmï¼ˆå¤ªé˜³ç³»ä¸­æœ€å¤§çš„å¤©ä½“ï¼‰ã€‚</li>
<li>è·ç¦»å¤ªé˜³ï¼š0 AUï¼ˆAU ä¸ºå¤©æ–‡å•ä½ï¼Œæ˜¯å¤ªé˜³åˆ°åœ°çƒçš„å¹³å‡è·ç¦»ï¼Œçº¦ 1.5 äº¿å…¬é‡Œï¼Œå¤ªé˜³ä½œä¸ºä¸­å¿ƒå¤©ä½“ï¼Œè·ç¦»è‡ªèº«ä¸º 0ï¼‰ã€‚</li>
<li>å…¬è½¬å‘¨æœŸï¼š0 å¤©ï¼ˆå¤ªé˜³æ˜¯å¤ªé˜³ç³»ä¸­å¿ƒï¼Œä¸ç»•è‡ªèº«å…¬è½¬ï¼‰ã€‚</li>
</ul>
</li>
<li>
<p><strong>æ“ä½œæŒ‡å—</strong>ï¼šæ˜ç¡®äº†é¼ æ ‡äº¤äº’æ–¹å¼ â€”â€” å·¦é”®æ‹–åŠ¨æ—‹è½¬è§†è§’ã€å³é”®æ‹–åŠ¨å¹³ç§»è§†è§’ã€æ»šè½®ç¼©æ”¾è§†è§’ï¼Œç‚¹å‡»è¡Œæ˜Ÿå¯æŸ¥çœ‹å…¶è¯¦ç»†ä¿¡æ¯ã€‚</p>
</li>
</ul>
</li>
<li>
<p>å³ä¾§ 3D æ¨¡æ‹Ÿåœºæ™¯</p>
<ul>
<li>å‘ˆç°äº†å¤ªé˜³ç³»çš„<strong>3D å¯è§†åŒ–æ•ˆæœ</strong>ï¼šä¸­å¿ƒæ˜¯é»„è‰²çš„<strong>å¤ªé˜³</strong>ï¼Œå‘¨å›´åˆ†å¸ƒç€è¡Œæ˜Ÿï¼ˆå¦‚å¸¦æœ‰æ˜æ˜¾ç¯ç³»ç»Ÿçš„<strong>åœŸæ˜Ÿ</strong>ï¼‰ï¼ŒèƒŒæ™¯æ˜¯å¸ƒæ»¡æ’æ˜Ÿçš„å¤ªç©ºï¼Œè¿˜èƒ½çœ‹åˆ°è¡Œæ˜Ÿçš„è½¨é“è½®å»“ï¼ˆç¤ºæ„è¡Œæ˜Ÿç»•æ—¥çš„è¿è¡Œè·¯å¾„ï¼‰ã€‚ç”¨æˆ·å¯é€šè¿‡å·¦ä¾§çš„äº¤äº’æ“ä½œï¼Œä»ä¸åŒè§’åº¦ã€ä»¥ä¸åŒç¼©æ”¾æ¯”ä¾‹å’Œé€Ÿåº¦ï¼ŒåŠ¨æ€è§‚å¯Ÿå¤ªé˜³ç³»çš„ç©ºé—´ç»“æ„ä¸è¡Œæ˜Ÿè¿åŠ¨ã€‚</li>
</ul>
</li>
</ul>
<blockquote>
<p>è¿™ä¸ªç•Œé¢é€šè¿‡äº¤äº’è®¾è®¡ï¼Œå¸®åŠ©äººä»¬ç›´è§‚ç†è§£å¤ªé˜³ç³»çš„å¤©ä½“ç»„æˆã€ç›¸å¯¹ä½ç½®å’Œè¿åŠ¨è§„å¾‹ï¼Œæ˜¯ä¸€ç§å…¼å…·ç§‘æ™®æ€§ä¸è¶£å‘³æ€§çš„å¯è§†åŒ–å·¥å…·ã€‚</p>
</blockquote>
<h3 data-id="heading-4">äºŒã€è§†é¢‘å†…å®¹</h3>
<h4 data-id="heading-5">ï¼ˆä¸€ï¼‰AI è§†é¢‘ï¼ˆç”„å¬›ä¼ ï¼‰ğŸ¬</h4>
<p align="center"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fd48ddc5cf934f56b0a3fe8684a27a24~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2X5pa56ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763737136&amp;x-signature=eVJhWZ38J6MSt5%2FLu4RYLjqR1wc%3D" alt="ç”„å¬›ä¼  (2).gif" width="50%" loading="lazy"/></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV1DuCuBJEZX%2F" target="_blank" title="https://www.bilibili.com/video/BV1DuCuBJEZX/" ref="nofollow noopener noreferrer">ğŸ‘‰ï¸è§†é¢‘ä¼ é€é—¨</a></p>
<blockquote>
<p>çœŸï¼çœŸçœŸçš„ï¼è¿™å£°éŸ³ï¼Œè¦ä¸æ˜¯å¥¹å—¦ä»‹ä¸ªâ€œAIâ€æåˆ°ä¸€å“ˆå­ï¼Œé˜”èƒ½éƒ½å¬ä¸ç²—æ¥æ˜¯æœ‰ç”¨ AI å•Šï¼</p>
</blockquote>
<h5 data-id="heading-6">ğŸ‘‚ è¯­è¨€ã€è§†è§‰ç”Ÿæˆçš„å‚æ•°å¯¹æ¯”æƒ…å†µ</h5>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/669eea6980504cc193256fcbffaf7f88~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2X5pa56ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763737136&amp;x-signature=VnMPKCYHhAa4x6ab9a5HaPBzPAQ%3D" alt="" loading="lazy"/><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d7a2222401d8413c87975b49d8b4bc50~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2X5pa56ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763737136&amp;x-signature=Wl2pcV54Tf2wJxYc%2FVkIkX63jIQ%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-7">ï¼ˆäºŒï¼‰è§†é¢‘åˆ†æã€Šæ— é—´é“ã€‹ğŸ¬ï¼ˆå½±è§†å‰§æƒ…èŠ‚&amp;æ—¶åº&amp;æƒ…ç»ªåˆ†æï¼‰</h4>
<blockquote>
<p>æˆ‘è¿™é‡Œæ˜¯ä¸Šä¼ ä¸€ä»½æ— é—´é“çš„å†…å®¹ï¼Œå…¸å‹çš„ã€ç»å…¸çš„ï¼Œâ€œå¯¹å””ä½ï¼Œæˆ‘ç³»å·®äººï¼â€</p>
<p>æˆ‘ä»¬ä¸€èµ·æ¥çœ‹çœ‹ å®ƒèƒ½ä¸èƒ½è§£æåˆ†æå‡ºæ¥å§ï¼ï¼</p>
</blockquote>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1636eeaf5f0e4cde92bbfc8429be5d5e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2X5pa56ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763737136&amp;x-signature=lrMawZDH55u1YFvkRAFbohfDB0E%3D" alt="" loading="lazy"/></p>
<h5 data-id="heading-8">ğŸ‘€ è§†è§‰ç†è§£ã€éŸ³é¢‘ç†è§£çš„å‚æ•°å¯¹æ¯”æƒ…å†µ</h5>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f3cd64f5d064461197d0294347ce271f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2X5pa56ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763737136&amp;x-signature=Ig0U9Z5%2F4kIy8JAPjyWBFlkF%2Bk4%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5cb7d5857e394a0a9eabed7844978815~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2X5pa56ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763737136&amp;x-signature=p6se94E2dIDIR7R%2FgznBMneV6Nc%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-9">ä¸‰ã€å›¾ç‰‡ç”Ÿæˆ</h3>
<h4 data-id="heading-10">ï¼ˆä¸€ï¼‰â€œç‰¹é è°±â€ æ‰‹æ‹¿ â€œå¥¶çš®å­ç³–è‘«èŠ¦â€</h4>
<blockquote>
<p>è¯·ç”Ÿæˆä¸€å¼ ï¼Œâ€œè®©ç‰¹æœ—æ™®åœ¨å¤§è¡—ä¸Šï¼Œæ‰‹æ‹¿ä¸€ä¸ªå¥¶çš®å­ç³–è‘«èŠ¦ï¼Œå¹¶é¢å‘é•œå¤´â€</p>
</blockquote>
<p align="center"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7734a05f29bb4195b32de1217b91839d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2X5pa56ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763737136&amp;x-signature=3JDkNQH9D%2BRfrkttlMuoRjvFxRU%3D" alt="" width="50%" loading="lazy"/></p>
<h4 data-id="heading-11">ï¼ˆäºŒï¼‰â€œé©¬æ–¯å…‹â€ å’Œ â€œæœ±è¿ªâ€ è­¦å®˜æ¡æ‰‹</h4>
<blockquote>
<p>ç”Ÿæˆä¸€å¼ å›¾ç‰‡ï¼Œè®©é©¬æ–¯å…‹å’Œæœ±è¿ªè­¦å®˜è¿›è¡Œæ¡æ‰‹ï¼Œè¦è‡ªç„¶ä¸€ç‚¹é¢å‘é•œå¤´</p>
</blockquote>
<p align="center"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f005f4ba86754476bec8fb6fc13feccb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2X5pa56ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763737136&amp;x-signature=J0x%2F07q7l30gc0njZOk7OXkhvqY%3D" alt="" width="50%" loading="lazy"/></p>
<h3 data-id="heading-12">âš¡ å¤ç›˜ï¼šå…³é”®æŠ€æœ¯çš„å‡çº§</h3>
<p align="center"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/58871529f10846d4b4679bb0a2ae7181~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2X5pa56ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763737136&amp;x-signature=n2R2IC%2FQad4lvoELYX2oW4ZJnmA%3D" alt="" width="50%" loading="lazy"/></p>
<h4 data-id="heading-13">1. åŸç”Ÿå…¨æ¨¡æ€å»ºæ¨¡ï¼šä»æ ¹ä¸Šè§£å†³ â€œä¿¡æ¯å‰²è£‚â€ éš¾é¢˜âœ…</h4>
<p>å’Œå¾ˆå¤šæ¨¡å‹ â€œå…ˆå¤„ç†å•æ¨¡æ€ã€å†æ‹¼æ¥èåˆâ€ ä¸åŒï¼Œæ–‡å¿ƒ 5.0 ä»è®­ç»ƒä¸€å¼€å§‹å°±æŠŠæ–‡å­—ã€å›¾ç‰‡ã€è§†é¢‘ã€éŸ³é¢‘ç­‰æ•°æ® â€œæ‰åœ¨ä¸€èµ·å­¦â€ã€‚ä¸ç®¡æ˜¯åŒæ—¶è¾“å…¥æ–‡æ¡£ + äº§å“å›¾ + è®²è§£éŸ³é¢‘ï¼Œè¿˜æ˜¯è¦è¾“å‡ºå›¾æ–‡ç»“åˆçš„æŠ¥å‘Š + é…å¥—çŸ­è§†é¢‘ï¼Œå®ƒéƒ½èƒ½ç›´æ¥æ‰“é€šä¸åŒä¿¡æ¯å½¢å¼ï¼Œä¸ç”¨å†é åæœŸæŠ€æœ¯ â€œè¡¥æ¼æ´â€ï¼ŒçœŸæ­£å®ç°äº†å¤šæ¨¡æ€ä¿¡æ¯çš„ç»Ÿä¸€ç†è§£ä¸ç”Ÿæˆã€‚</p>
<h4 data-id="heading-14">2. ç†è§£ä¸ç”Ÿæˆä¸€ä½“åŒ–ï¼šè®© AI â€œçœ‹æ‡‚â€ å’Œ â€œä¼šé€ â€ ç›¸è¾…ç›¸æˆâœ…</h4>
<p>ä»¥å¾€å¤šæ¨¡æ€æ¨¡å‹å¸¸å‡ºç° â€œèƒ½çœ‹æ‡‚å›¾å´å†™ä¸å‡ºå‡†æè¿°ï¼Œæˆ–èƒ½ç”Ÿæˆå†…å®¹å´ç†è§£é”™éœ€æ±‚â€ çš„é—®é¢˜ï¼Œæ–‡å¿ƒ 5.0 é€šè¿‡ç²¾ç»†åŒ–æ‰“ç£¨å¤šæ¨¡æ€è¯­ä¹‰ç‰¹å¾ï¼ŒæŠŠ â€œç†è§£ä¿¡æ¯â€ å’Œ â€œç”Ÿæˆå†…å®¹â€ çš„èƒ½åŠ›ç»‘åœ¨ä¸€èµ·å‡çº§ã€‚æ¯”å¦‚åˆ†æä¸€æ®µäº§å“æµ‹è¯„è§†é¢‘æ—¶ï¼Œæ—¢èƒ½ç²¾å‡†æå–æ ¸å¿ƒå–ç‚¹ï¼ˆç†è§£ï¼‰ï¼Œåˆèƒ½æ®æ­¤ç”Ÿæˆå¸¦è´§æ–‡æ¡ˆ + æ¼”ç¤ºåŠ¨ç”»ï¼ˆç”Ÿæˆï¼‰ï¼Œä¸¤è€…äº’ç›¸åŠ©åŠ›ï¼Œå¤§å¹…æå‡äº†å…¨åœºæ™¯ä¸‹çš„å¤šæ¨¡æ€å¤„ç†æ•ˆæœã€‚</p>
<h4 data-id="heading-15">3. è‡ªå›å½’ç»Ÿä¸€æ¶æ„ï¼šç”¨ â€œä¸€å¥—é€»è¾‘â€ å­¦é€æ‰€æœ‰æ¨¡æ€âœ…</h4>
<p>ä¸ºäº†è®©æ–‡å­—ã€å›¾åƒç­‰ä¸åŒæ¨¡æ€çš„ç‰¹å¾èƒ½æ·±åº¦èåˆï¼Œæ–‡å¿ƒ 5.0 æŠŠå„æ¨¡æ€çš„è®­ç»ƒç›®æ ‡è½¬åŒ–ä¸ºç»Ÿä¸€çš„ç¦»æ•£æ ¼å¼ï¼Œå†ç”¨ä¸€å¥—è‡ªå›å½’æ¶æ„å®Œæˆè®­ç»ƒã€‚å°±åƒç”¨åŒä¸€ç§ â€œè¯­è¨€â€ æ•™ AI è¯†åˆ«å›¾ç‰‡ã€è§£è¯»æ–‡å­—ã€åˆ†æéŸ³é¢‘ï¼Œè®©ä¸åŒç±»å‹çš„ä¿¡æ¯åœ¨åŒä¸€ä¸ªæ¡†æ¶é‡Œå……åˆ†ç£¨åˆã€ä¼˜åŒ–ï¼Œä»æ ¹æœ¬ä¸Šå¢å¼ºäº†å¤šæ¨¡æ€ç»Ÿä¸€å»ºæ¨¡çš„èƒ½åŠ›ã€‚</p>
<h4 data-id="heading-16">4. è¶…å¤§è§„æ¨¡æ··åˆä¸“å®¶ç»“æ„ï¼š2 ä¸‡äº¿å‚æ•°ä¹Ÿèƒ½ â€œè½»è£…ä¸Šé˜µâ€âœ…</h4>
<pre><code class="hljs">Â Â å‚æ•°è§„æ¨¡ä¸æ¿€æ´»æ•ˆç‡åŒçªç ´ã€è®­ç»ƒæ•ˆç‡é£™å‡ã€æ¨ç†æˆæœ¬å¤§é™
</code></pre>
<h4 data-id="heading-17">5. é•¿ç¨‹ä»»åŠ¡å¢å¼ºçš„æ™ºèƒ½ä½“èƒ½åŠ›ï¼šAI èƒ½ â€œè¿è´¯åšäº‹â€ äº†âœ…</h4>
<p>é€šè¿‡å¤§é‡çœŸå®æˆ–æ¨¡æ‹Ÿåœºæ™¯çš„é•¿ä»»åŠ¡æ•°æ®ï¼ˆæ¯”å¦‚å¤æ‚é¡¹ç›®è§„åˆ’ã€å¤šæ­¥å·¥å…·è°ƒç”¨æµç¨‹ï¼‰ï¼Œæ–‡å¿ƒ 5.0 åœ¨è®­ç»ƒä¸­å¼ºåŒ–äº† â€œæŒ‰æ­¥éª¤è§£å†³é—®é¢˜â€ çš„èƒ½åŠ›ã€‚å®ƒä¼šåƒäººä¸€æ · â€œå…ˆæ€è€ƒã€å†è¡ŒåŠ¨â€ï¼Œè¿˜èƒ½é€šè¿‡å¤šè½®å¼ºåŒ–å­¦ä¹ ä¼˜åŒ–æµç¨‹ï¼Œæ¯”å¦‚ç”¨å®ƒåšå¸‚åœºè°ƒç ”ï¼Œèƒ½è‡ªåŠ¨è°ƒç”¨æ•°æ®åˆ†æå·¥å…·ã€æ•´ç†æŠ¥å‘Šã€ç”Ÿæˆå¯è§†åŒ–å›¾è¡¨ï¼Œä¸€æ­¥æ¥ä¸€æ­¥å®Œæˆå¤æ‚ä»»åŠ¡ï¼Œå·¥å…·è°ƒç”¨å’Œæ™ºèƒ½å†³ç­–èƒ½åŠ›æ˜æ˜¾æå‡ã€‚</p>
<h3 data-id="heading-18">ğŸš€ç»“è¯­ï¼šAI â€œç†è§£åŠ›ä¹‹æˆ˜â€ çš„æ ¸å¿ƒï¼Œæ˜¯è®©æŠ€æœ¯è´´è¿‘å…¨èƒ½</h3>
<p>ä»æ–‡å¿ƒ 5.0 çš„äº¤äº’ä½“éªŒåˆ°æ•°å­—äººè½åœ°ï¼Œèƒ½æ¸…æ™°çœ‹åˆ°ä¸€ä¸ªè¶‹åŠ¿ï¼šå…¨çƒ AI ç«äº‰å·²ä» â€œå‚æ•°è§„æ¨¡â€ è½¬å‘ â€œç†è§£åŠ›æ·±åº¦â€ã€‚æ— è®ºæ˜¯ä¸ GPT-5.1 å¯¹æ ‡çš„ â€œæƒ…å•†â€ï¼ˆæƒ…ç»ªè§£è¯»ã€éœ€æ±‚é¢„åˆ¤ï¼‰ï¼Œè¿˜æ˜¯åŸç”Ÿå…¨æ¨¡æ€å»ºæ¨¡å¸¦æ¥çš„ â€œæ²‰æµ¸å¼ç†è§£â€ï¼Œæœ¬è´¨éƒ½æ˜¯è®© AI ä» â€œèƒ½è®¡ç®—â€ èµ°å‘ â€œä¼šæ„ŸçŸ¥â€ï¼è¿™åœºå‡çº§ï¼Œæˆ‘è®¤å¯äº†ï¼ä½ è®¤å¯å—ï¼Ÿ</p>
<p align="center"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cd8517c0574241238f76d346795ed1da~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2X5pa56ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763737136&amp;x-signature=iXgo2chUC7zeik3ZHHrpjBXFJ3w%3D" alt="" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‰ç«¯é«˜é¢‘é¢è¯•é¢˜ä¹‹Vuexç¯‡]]></title>    <link>https://juejin.cn/post/7572397142364799018</link>    <guid>https://juejin.cn/post/7572397142364799018</guid>    <pubDate>2025-11-14T13:15:21.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572397142364799018" data-draft-id="7572190151352827904" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‰ç«¯é«˜é¢‘é¢è¯•é¢˜ä¹‹Vuexç¯‡"/> <meta itemprop="keywords" content="å‰ç«¯,é¢è¯•,Vue.js"/> <meta itemprop="datePublished" content="2025-11-14T13:15:21.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºå‘˜å°å¯’"/> <meta itemprop="url" content="https://juejin.cn/user/694547078987287"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‰ç«¯é«˜é¢‘é¢è¯•é¢˜ä¹‹Vuexç¯‡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/694547078987287/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºå‘˜å°å¯’
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-14T13:15:21.000Z" title="Fri Nov 14 2025 13:15:21 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#2b2b2b;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(159,219,252,.15) 3%,transparent 0),linear-gradient(1turn,rgba(159,219,252,.15) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin-top:35px;margin-bottom:10px;color:#4dd0e1}.markdown-body h1{font-size:30px;text-align:center;position:relative;width:max-content;margin:0 auto}.markdown-body h1:before{position:absolute;content:"";z-index:-1;top:-20px;height:100%;width:100px;left:0;right:0;margin:0 auto;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADsAAAA6CAYAAAAOeSEWAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAABkLSURBVGhDtZoHnJ1llcbP3Om9ZiYzmfSQhCQQIbRQVQKI9CYC68qKriJK0UXcZRcINqStIoiIqKCi1NACQihBWiCkkJ5MJlMyvd7p7d759v989/sy34yTbIj48Atz71ff855znvOc971xDrB/EtoGI7a9Z8Aq+wZML0mNj7dE95NZ1OKsj1dHo1GbnJpss9OTbWJyonvun4VP1Njuoagtb+m0it4By0iIt8LEeMvkr8XFWcfgkA1gYDLf47i2PzpsyU7UspKSLDoctagTZ7Vc08MzClMS7awJ2ZaflBB78CeET8TYla1dtrKt2w5KS7YCDGzEoz2RqKUmhGw6x2bhuXyOp2BoRXef1Q1E7Lj8TIsMD1sbxu1kcnYSAX1810RMTUmyMB7f2j1gC7NS7byinNiL/kH8Q8a+2NRh77b32El56VaPAe0YeGR2mh2bm+FdMRqP1rbZe+3dFsHT35qcb/Oz0rwzo7Gxs9feYPLS4kM2h8lawee5hPmlJXneFQeGAzJ2F564v7rFzi7Msu3d/Xgjzq5g8ArX8VCNN2vJ28daey0zZJabmGCLslP5HOf+Oygr3UzDGOf+JxrauXfQjslJt+dbuuyMgiwmk+sPAB/b2Lt2NdoMZnuY21qHIvbvUyZ4Z0ZQiXGrWjvsmPxsK4R0nmHA8ZCTQvxVQn5eRipklIBtcVbV1WtHYsjati47ZWKuTUpP9Z4yGk/xDBGe3v1mW4/dOrvYO7P/2G9jRSjf31FnXyaUXiB8r51WaJkM3kcfOSa2FR6qarIenooTLQHPLcC4mYThyw1tVpKWYlVERlZ8nC3Oz3Jzdn1nn5uvQ8OOHYvhR/CvsqffJbkCkZTvcYZ6Z0WTfTovw5Y1dtjXp+TbFPhgf7FfxpYxuMfr2uwo8rEtMmwXF+d6Z8wGmIR2PLyjo8cqOFffP2SLGexJEJCP9R29thkPXlpa4A5Y3w/jmuVNYYwO2QkY7WMtz3mVcE1hkualJdmSolzX8GnpKd4VZq80d1o7zN0RdWxGaqItgbn3B/+vsasgh/UMNBOvzYMZDxtDKp289KGaVguFQvb1yQWWwuB97GaSXqUUnVaYbSUwrDCEBz/C2CM8EhNrP13fbkeSh3OJgCAe2N1CWXKsGOc6TOr5U4q8MwYhDtkTda02MyPN+nnGBQEH7A37NHYz5KOZVv08qyjbSseEzKauPnsMj98wc6Ibcj5UUv7M8QWZTE52jEwGOVaD8U1Dw1YNWX0qM8VKyb80L/TrOPYOzH4KBJQTrK8M7+7KZjuM63sHBt17FubGoibCuf+tarWFGUmuwWeT8/vCXo1tZOYeZcazCaez8MwEzzM+HqhqtiJI5twxL1jeGLYk7jmKMF1JOCbg6Qj5nAdRqX7q3BYm8VAmQvW1lfcMc58IT95uIA3q+gftrDHPXUXJWkVEHJme5Bp5UmHsvIZ/O3l8ECE/FWcsItX2hr0ae8O2Wjs+J43QTbOZzGYQ/7Wtxq6eXjRK3r0By4YJ6Ty8EiYSJqcm2eGeV4Pox/ANENJR49RiEdfqcLflUJrEBZqgxYHrBjn2ExFURqKdVETN9YirJxKxR2rbrYeQv5ISmB6IsiDGNfZGWPeMgkzr58xnPaJ5p6XDZPKz4T77wayJ7jGhhXLwanOHTWBgq5n5q6YUwNJ7l3kKcRl7OJ7fF56l1GzvHbSD8dghTPi0wIRfv6XafjJ3ssv0PnZQ7nZx/etwzO1zJ3lHR2OETTw8x0tOx1AN3De0D7YV+63oGthjaJQ5Ur7eVVZjcdGInUyuaT73ZWg3efV8fZs7cc2E777Qi5eunVbghvPPymrt/krKGfcLd8ybYjdxrK6333Z09rjHZkNuLYzz0uIc+xWCZzz8nbHbe4dsY1e/XUOY+nimvtUaSazv4jXhaQasSbmYmpuenGwHZ8TKggSEQm08rMD7ahBOoExcMqXQegjnZ+CEvaEa1ZQUQkt39dj0zDS7krq+ARmpdws/nlNqD9WFbWN7l5u3wr9MyrcXKUsqWy3jTOaoML4DdaQ83YIoT4VYpEXvYQZLmbX5SLohBrgOj186Kc/iKTUPUhq+Rrm5ekOl3TWv1Mr6hqwbY0VOQXwEo+Moq4Z47q5qsU489G944LyJOW4LOLZOKtT/iI6+nGe/0dhuEd4ltj2NmiuCU4hnk5fHIi7+RK4uTEu0e+s7rAiRcw1CYy3OejvcYz+eXeI9MYY9nu3lYZl0KavJJ7Vjibzgjp319rUZE20j7CkJqFr5JQYgQ39f3eQaKpQk0afy8nl4uBzvjUUTRk7k3iebOm0pabDiyFn2XGu3dRME41CGVeBVqSiVnc6hIUpekp1VjHLDSOEcQlui5W/U8C7IKREjv1Gabw3wRwUTvpv7jybPtzHmIPZ49q6KRjuccqBQVCOtGvqXhrCFUUXJzOYSHt7Kw5Ix9H08dSje1o1JyL73IYXpEMmE5CRbw6wuykx2pR+Pd6/J4JpLiJKV6N9OnrcQNfQ0Zem6qQX2MmFXyWTE+DMO0kGx4e08DEjnXbsYuOq7niHB8jdY/wQ8Srm2XCZZUrOakF1CY5EKX0h93Tu/1J4kRdbDMT8MamgZK9xe3uDcvrPe++Y4f61rcZr7B53rN1c5N2ytcV5rCrvHt3T2Og19g+5nH7dvq3bqunr4NOwgK2MHA1jeEDuG7HNuLmtw7qpocl5t6nCPvdTQ7v4N4u3WTqeyu9cZHIo4f6lqdFoHh7wzMbzDeeGv3Hvzjlrnh2W1zofhHuftxpFn3VFe7zxS0+p0DlKVPbhhvBxhvwiFMgfP+mjHA08gEC4pybeLyK1iZldh8zC5VJQyUl8l59KZ0WJk2xaiYWxNrkXXJhA8r3PvZRur7ZZZRfadaRPsfiTmX9HGajC2tXd6V8dQTMhX0h8rNdJx9Ra8F8SbRNLzhPRnJmTZIUTYueTyWxyr7uv3rjC3OkzE8495oS+4xq6D5WoI0bO5WVCOSerl8rIeBrOI/Hkaw6ME5W1zSuzx2la3CRdWi3zIG+FDBvUp9LMgI/vggUmE7KkT81yGvOOgEYa/aUahhRAF5xLec3OzbF1r2O17BbVxIi7hzJIC64IYhXdJA+nh/5xVbOmE9J0QqjSxWk0pp37M2YEtgjS8GpimACu7xkqxdKJ6fEXyYl2Lre0ZtC8yELVewtWUnbfCPIhrvgDFz8WI5yhJKgcnFMZWEFrwhgzo5uWDDDA1oGSOzcu0xfx7vTlsv6posIMpJ6cGWPiw/BxL4PU7vbrpjgf8bMdu5OYwOdhm83DARUSa0ELknYIeEAaILuWxlhGa0M8+EuJCrpJT+ymENhN60pXBxa3LZ5TsucnlGaCmIEQ4Evru91yuz0xMtKaeXluI5zdh9Mm8vAlBn4aR07X64EH3vEKdXQkZJXPP/JxMvNRpLxEtHZ5RQgmNewnpouvVTpYTHdfOnmy5kFUGnpRTfEhXD9DiBdFFJB0/YWS9aj6pmc89r0BaQmgTRkgI+EsdKsYasJZOBF+QqTH474NK7LbyBvf7W+RgOxNyxfQY2/2hrp2+NkroxrzrQ55fSZkpJIa28znCgF6rb7H1hOSslATyvNflAh9pvHcX3lVE/Ya8FjTJIexa2Rq77nfU96unTnD7aME3+TAm6BFKYrPnqCNIqV5sq0ZGCiEV+Db+qWMQqpFgb5KPx48R6omeDl2EuP9DTYt9iGA/f1KBS1w/La+H4ktsSmLItvZHXLUkrCeflVtJ9DVVg1H7+sxiGvVM975rZpfabuqHVhuP5F1vewav5O8GamUe91yDanoYw47FWzC929O+DJnKA2opFY1Rjru5CE7kOcO0jJtQVUIynzuZEMeb+1CEOFXN8iFSGeRpCm1BTlJxVg49Azm819SO7Bu0axEbwn27GuxMck+TMQHDP8fn48gfDVIL4R8xKVPJ73MQBUIfA/Z54LMw5vmlE+w+VFo2A78X/SsyPA/RMD0z3e2qVLtfo7aeBslpMX0N0TEnLcUlKym1jyBFqSohmYntI5enBhYB9CY/2kNarhwJhNiMtRGyWnkQdKaCFyQwgydjyNUw4VchKxXv2/DoKdC+lkQbCX1NlKCGvJiBJkSGbCus6jfo4yGBNySgr+u7e20BCsxdVAcFlJ/tHd32+cIsNxSXUULUUx+dg/d47g7OPYFw2MxkSuyMwLHVTI6PBN6dS8Sppw45zHJSgDXV3aQzmz40Z6fDgBfiAXU0uZxby2zejee+j3eltoQMzhV6qSBogXwrEXDj7ElWxUQ8RrnSaoU0dxIsKaiMvMykXTu90NqJsGHP4z78SdLigUrLKat32nFwy/E07pfDFRdQ/7N5r57pQ1482uvWhMGhQcviGkVrKDUp0ToCxfhQal5n4Hs/g1jOgH4LWdwFOd1b1WzHET4vLZppv+Czjxo840OrDlG8jAJzv2tp5mLK1dsU/lfIOeWy5NxFxfl2BoYImlQtx9QF6mJRQKBsQYYuO2yaLYPBUXvu/VqYPxtHhNy7Y4hCkNLGPtKSklzCVKSHtMQxcqm5Kw1DhI2PTGZtcGDAvoLQ/u7MifYtWFBlxz2H9zo8RkwKzC5UYiG+p44ccqE62YAxLeT/TOpf8MXx8Qk0IJFRY1Go+viQVJpE5Ehjf49xfAZeqGIy/7us3nqxwQfCkjZypPxobVr/6YpQHIalUvuCyEwbSXC9PC8QnkFcXlrgLpoLIhIfKuaqlQkYIAwQnr/f3eyu7KttOw2lNpv8/BPHyjzVNER3o72gvEBKqRMTflndbP8BMweRDyeciEj5bFayFXqTLzheivgYJC0jwzwHa0MDDEotm48ndze5BBBElAnxxcRYHAFh3FfZaA9UNRmC354kNwUx8eHkmVj5dcTE5ZMnuEyr1QqlhtaJLuOYZv4v3KNo0TKrGPUZ1NILPKuWcvVn5Trv10SMB6h0j/ARMnlOuafCBIfnSWEx/Raif3HDzofYMM31dOyY9LBaLK3TjoX2fEqT4+2qaUVWSTQvyM6wC8nNJyEetXIyuLKrx04P7MKNnbJZlKUtNAIHo7i2dA/YU3Vtdi5l6jCepXy8hOedSSSsI8/HQg5Q+gxTKXwkMHkbESo+hjG0lbRRzQ3Fc5LOzDuFhs3Ptumpie7ilRDhlEJOq/hjsZljCxjkt7fWuPS/EekpXMggJQIk0G+eN9Xu2VmHWIkJe0nJRN4ptBBit2yutG9ML7J1DHAxebiAMrZ4VZlduqGS8I2tJc2iborUxmIN79c+kTovFxivPvrcSaP3n7RSKYTUmKt4N3rMOcw4JOneD3sP956jNaMglIeTER5Xbdlt15Tm2W10NEsYrA/N5JLCHHsR9tSqwxq08G3bqm1ZTbOtagnbo6SLvH/VzBL7W7jPzqFea0LmMLFzUuLtdwumuO3i1Vtq7OK15Xgw3l1PDmIXak+6QBEkvB9YJIzBcc/L20JIYaSZ/qAzVm5Ut4oowk3QehC+N3xo/1wTqt7zsYawfX9no9XjqdPXVLhrwyo/wucJYQkE1e4j8rLcBuHUItQQKqgMXb6LGvxFQlXw33AdZLR0V5P9Fr29lP73scNnosoyvdWPv4fPJ+uJrLVtMakqaL1M1cTvv0OLIZE6wk2a2IcIRUQh+DaejpdcXepBa7bKDRGM9PIVxTl2EwarZ72rooVuY4RQtMypdk6e1lLLehhY2lt7QEd7WxlCDvdIli6E9B4+ZIodmZEMccUGqgiZOqru9tkR3iJ8nCcXRWRZCSPMLPEjlx2LjQL1OM5qKAm+vhSuRqSfV5Ttrg8FdWcrnhMqCTex7DEM6qTsVEuM1+8hovaHQ6e6a1Fz0xLd3nUt4ToWWuzWNkhcoAIIjUx2ZpxjLzWF9+SYmngR1lok4TEoJxGfuijhI/7OICoFmadl2llcL9b1oRVJtbD+JLlv1KrhHG5811t9ELbzgk14ICUwqE+TDzftqHPz98vUSy3jSIwP8dCpkNqLDPTx+rArz4T5qLG3G2PrvJKKPoLBWE501NC3ilUX5mVjVIb9nIbgWcpPMiSXjbcL8K62UkR86m1/yfkSeMaHFuK04X0CE3J6SWzFUxw0BSNHlSzi3RmIRJwHq5udO3c16quLp6sbnffbupxbt+12vzOrzuvNHc7ycRbIxuJHgYU7YSASdQgxp7qz2ynv6HJeqW91doa7nLruXof+17sqhhu31Xif9o7HalqczV29Dnrb/f5EXZvzdH27U98/6LR5i3N0UM5zjHU71/lwjRWWltU5CAIn7F1MqLp/r9hQ5RoaxG+qmrxP4yNKcfsFLwuiprffeb2l03m2scO5h3Or2rudzjGrhk8x4Cqu2xcexilBvNEcdi5Yu4tKF3Ue4tzPy+td5/1md4tzw5iJ27NuXEYobYUdlb8z6GTWkdxaCvk2zHjd5mpKQ459mv5TkAp6mQb9Aq9HHQ8S6mrZnuc6vUG6WHusIhCJGNXl9byvnJyaiE7+Eoz8c5TYNQiUveENGpJpcIJ+biS8R0+rlcazGNs7pKB+zPLTOSX2KNWhlDAf4r2Spj72JORB5OyHULX+dlD/FOky/HFy5ygYU0sey/i8moeqdunXK1qC3RuaMOYHlI/raQMl3M+EeTV5WxD3Km8a8PkM8nr648sQ9+esKbf5e/nxiKBfAOQkxbv3SU9LYmqPV9V/Pn+V20VwTyVjTqCI6edEQUOFUXs9WmfSll8DyX2dt7GlnwkswaM3l9XZ0oNK3MTXbxpOV2sGk69s6XCJw4cY8KbyRrt9TrHt7Bm0rRBQe1+fHUWNfaapU0KbqxzbORC1M/LS3dJwIl3KOrwykQG/E+61q+isgniztdOKqNOziDgZqZIzFwPvqGiyg5NCtoCqoG5NxHhPZTOsnORulKskjoKMDeLuXQ3OmnC3syxARFXdfc57LR3OrdtrvSOOs55rnqhtcdoGhpxHdjc5EfJUuHZTlftX+G15rXPlhkrnLe59F7Lz8VGHdg8c5y2OLeMZ126qduq9XC3v7nd+FchLvYPJd15gPCu8XQnh/qpm59WGVudZzvvQO97kXTcGxhnEuJvR39tWY8cwK4uhcikk4a3Gdstg9l5B2t0wfaTdWkEou5vCPOV5PH73vFL3+DfXltnh6OxjkJD6Wd5F3g88tMe6CW/7YmI99VIL4u0oqUK8ocW4d8hFrXMVoOQU8s3U97MnjvDD/XRYkyhHM1MT3GVZQR2Tdv70U8EbA5vlo+CaPAaaSWoZXm50otGodxQ6L6txGKxzw5ZYORrBsPPrykZKQIy1n8bTjwb2fO4Te3ue7x6KOKvaYns1wtIddd4nx3mwot55qyl2360cp81zurg+CGqwU8v4/Of5uAVvPgObrwvHomY8jOtZ4fXWLnefdHVXv9044+8ZklCx75DXwcV1Sb27y+vInUQEuVYSaMgRJYfAwtoj0raFxIUW1A8nz35f02qLc9Lc9lG7CBkwtUR7bf+A+5uL6ehnH9Lat+5sIEfj3Cbj3NKRvP7Rjlo7FSmqavKvpSP8MRZ7NVbQYLSkqlC9ZW4sPH18gBTcORjrhMWmQWzFmK2UsvO90qQ1oZcI8UhkCLZPtRqMy0NirobAvjIpb4/sW06qKGyPR2oGIdlazjOOTk+kLYzaaYGSp63Wz6HsXsQ51wd+LTAuZOy+8GBNq7tF+IOdDU4kENJthNID5YRafZtzZ3mDs9LbRgzixcZ2l1h83OKFbDmEd0/FiFp7DWHgp0AQGzq6nf8hPF+oa3EehOz0ziCWcm4NpBRMhX1hn571oR9wqVVSDVPtUi32sQ0vbu7scZdY9aOt2ZSEL9BEBIW+dv20AKDd9/ep09oimYqHpyImkKDuRllS4PrlHNuIqDmCJmNJQba7q1joEaUQJuR/WdXsLrJrq/L6cdJsPOyXscJ7GLKqo8cOpqhrO//yQG6oS3kZwS9xPkRB3wi7diFMtDN+PLk5m1ath+8f0Fy80dbjhvVXub+U5mEqeal27UP+dWpPlknNxW79Ak6/7Tg3UMOF52j1xA1qK7Trd6nXC+8P9ttYQcumIonLSnJtBdJNa77axw1C2x3qR4Wqnj73x9f6MbV+CCYFBZO6y51aSh3gzVrsmwzJnULEbCJC1oZ7vIZ/9Iqmfvn2u5oWO5n8fApxcuWUApum5diPgY9lrA9EtvUNOzYf8vqAcJPsU5iOh7XtXQgt2uZhjKU2amF7HQyfEYWcZk5yQ1RDKNrLcq02k/9IGmldrB93KiokPw8EB2SsoKWXO5FmxXhlckqi+3vEUvLqwok5PHVkIWAszlqzy1p54zuLpnPZ3q9bod08JlLSb5DrNxDm38Sbvsg5EBywsT7oH+3XNW3uasGirFSrxRNdCllKiPZHZzJYLZb5qEcpae3pxMCuu9oibS5/QCOiLcYUrp+MmtJeURjFdVlxzqiae6D4h40NQt54HyGv3JRo10aVfv8YhtC0pSlVKcPFuxIXahr08mzCO4VzMlLSsZuomZ+RaucU0rXsw/sfF5+osUFonWob/7TrLdaUgdpV93fl9X+VIC0Y6tek2uI8OD3J5gT2Vj9ZmP0f4IM4iY7RQ5gAAAAASUVORK5CYII=) no-repeat 50%;background-size:64px 64px;opacity:.84}.markdown-body h1:after{position:absolute;content:"";width:150%;left:-25%;height:50%;bottom:12px;border-radius:50%;background:linear-gradient(transparent 80%,rgba(77,208,225,.8));background-size:400% 200%;opacity:.6;animation:h1Animate 6s linear infinite}@keyframes h1Animate{0%{background-position:100% 100%}50%{background-position:100% 50%}to{background-position:100% 100%}}.markdown-body h2{display:block;border-bottom:4px solid #4dd0e1;position:relative;font-size:24px;padding:12px 32px;margin:30px 0}.markdown-body h2:before{width:24px;height:24px;left:0;top:0;margin:auto;background-size:24px 24px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADGklEQVRYR81X32vTYBQ999s6mFjQgQ+DrbHiVFZYU4cDcQ/6pGhTFVYFEXGi82H+Bz448UnEF1Fx9ccEEcXpZE3d5tP2ooKiTacTHaLNpigMHDgnU9tcSbrWrkwWR0sbyEOSe885ObnfvV8IRT6oyPwoLQHBx+OVM5WJvSyEVAhnBOjt7yU/+/rr6r6l8TMO+F/EN0JQhICqQpD/xaRpcpAc9tS+M+9lBCia/oqBamK+zeDuQogQZaKJk3wcQjxSva7tGQGB2Ke1zIk3DNyMyNL+QpCnMQOaPsDAVuGAp9cjvbYc8Ec/bCYSg0zoiHilk1tHxqsqEsYlML4kjIpT/eurJxRNPweQU5VdrWaOEo1fgKAVbBgXIz73kF3R/ph+ghgdzMYWM29eAWlBJqgZaFlFYtC6nhWpaDqnSGlIlV1WjJ3DloDNgyNLncudqgX//Ucg3LxuStHGuhi8pqKCW3rqV342rwFjRznKm+/LNaN2yC237ThgF2wxcfMLeP6+ncrKzoPoKTGeLQbYbg4TNoC5iZPJY5HGVRdSNZAWYBclD3FzBQzrR8hACAKdzBzKA/4/IYioDQaOskBbpEG6PO8qKKSAEi3CnEb0Pw4oMf0OmKbTDWqh3Lw6EIiNBZi5lxh3wz4puBD5ovqAMvxhHSdFKxE1CQe3m/07TeTX4lcJdAhE+1Sv65Z5P/ByvIGTRowIZ9igbtXnmrOsbTvgj+kHBNMuBu9OdVw8EeU4nC1A0cYmAHZOTRrLhra4Z8ywnSN6vZHAFTA2WnnMfQB3qz73ddsOZM8CACFDIPSgQXqebXEgqgeZcAeEe6pXasm1f8ew3igMtAHWac0Uc/jYdyAaP0xEBwFsmgUPqbJ0NE2UKj4EGcahiOzuyhagaHpnmtgcVgTcCMuua7YdyAHbA3ArQNscVFbb4635aD6fnYaTvxxi9UNP7ddMXaRWVBdAcaLk6bDXPZCNZ9uBXEsDUX1T2Cc9yjig6Z0EHg3LK8/aqf6MwJKchkXfks1+0+JtSq3qLPa23BRR1B+T/6nkfMaW1r9hPt/MLtYfTLEpP+T9FNoAAAAASUVORK5CYII=)}.markdown-body h2:after,.markdown-body h2:before{content:"";display:block;position:absolute;bottom:0}.markdown-body h2:after{right:0;width:400px;height:10px;border-top-right-radius:24px;background:linear-gradient(90deg,#fff,#4dd0e1);max-width:50vw}.markdown-body h3{margin:30px 0;font-size:18px;position:relative;padding:4px 32px;width:max-content}.markdown-body h3:before{border-bottom:2px solid #4dd0e1;width:100%;content:"";display:block;height:28px;position:absolute;left:0;top:0;bottom:-2px;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);background-repeat:no-repeat;animation:h3AnimationBefore 2s infinite alternate}@keyframes h3AnimationBefore{0%{width:28px}25%{width:100%}50%{width:100%}to{width:100%}}.markdown-body h3:after{content:"";display:block;width:28px;height:28px;position:absolute;border:2px solid #4dd0e1;border-radius:50%;right:-15px;top:0;bottom:0;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);animation:h3AnimationAfter 2s infinite alternate}@keyframes h3AnimationAfter{0%{transform:rotate(0)}10%{transform:rotate(0)}50%{transform:rotate(-1turn)}to{transform:rotate(-1turn)}}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin:22px 0;letter-spacing:2px;font-size:14px;word-spacing:2px}.markdown-body img{max-width:80%;border-radius:6px;display:block;margin:20px auto!important;object-fit:contain;box-shadow:0 0 16px hsla(0,0%,43.1%,.45)}.markdown-body figcaption{display:block;font-size:13px;color:#2b2b2b}.markdown-body figcaption:before{content:"";background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAGFBMVEVHcExAuPtAuPpAuPtAuPpAuPtAvPxAuPokzOX5AAAAB3RSTlMAkDLqNegkoiUM7wAAAGBJREFUKM9jYBhcgMkBTUDVBE1BeDGqEtXychNUBeXlKEqACsrLQxB8lnCQQClCiWt5OYoSiAIkJVAF5eVBqAqAShTAAs7l5ShKWMwRAmAlSArASpAVgJUkCqIAscESHwCVVjMBK9JnbQAAAABJRU5ErkJggg==);display:inline-block;width:18px;height:18px;background-size:18px;background-repeat:no-repeat;background-position:50%;margin-right:5px;margin-bottom:-5px}.markdown-body hr{border:none;border-top:1px solid #4dd0e1;margin-top:32px;margin-bottom:32px}.markdown-body del{color:#4dd0e1}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(77,208,225,.08);color:#26c6da;padding:.195em .4em}.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#4dd0e1;border-bottom:1px solid #4dd0e1;font-weight:400;text-decoration:none;margin:0 4px}.markdown-body a:active,.markdown-body a:hover{background-color:rgba(77,208,225,.1)}.markdown-body strong{color:#26c6da}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{font-style:normal;color:#4dd0e1;font-weight:700}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(77,208,225,.05)}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{margin:2em 0;padding:24px 32px;border-left:4px solid #26c6da;background:rgba(77,208,225,.15);position:relative}.markdown-body blockquote:before{content:"â";top:8px;left:8px;color:#4dd0e1;font-size:30px;line-height:1;font-weight:700;position:absolute;opacity:.7}.markdown-body blockquote:after{content:"â";font-size:30px;position:absolute;right:8px;bottom:0;color:#4dd0e1;opacity:.7}.markdown-body blockquote p{color:#595959;line-height:2}.markdown-body ol,.markdown-body ul{color:#595959;padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">1ã€Vuex æ˜¯ä»€ä¹ˆï¼Ÿä»€ä¹ˆæƒ…å†µä¸‹åº”è¯¥ä½¿ç”¨ Vuexï¼Ÿ</h2>
<p>Vuex æ˜¯ä¸“é—¨ä¸º Vue.js åº”ç”¨æä¾›çŠ¶æ€ç®¡ç†æ¨¡å¼çš„ä¸€ä¸ªåº“ï¼Œä¹Ÿæ˜¯ Vue.js å®˜æ–¹æ¨èçš„çŠ¶æ€ç®¡ç†æ–¹æ¡ˆï¼Œå®ƒå°†æ‰€æœ‰æ•°æ®é›†ä¸­å­˜å‚¨åˆ°ä¸€ä¸ªå…¨å±€ <code>store</code> å¯¹è±¡ä¸­ï¼Œå¹¶åˆ¶å®šäº†ä¸€å®šçš„è§„åˆ™ï¼Œä¿è¯çŠ¶æ€ä»¥é¢„æœŸçš„æ–¹å¼å‘ç”Ÿå˜åŒ–ã€‚</p>
<p>å®ƒçš„æ ¸å¿ƒæ¦‚å¿µæœ‰ï¼š</p>
<ul>
<li><strong>state</strong>ï¼šå­˜å‚¨çŠ¶æ€ï¼Œå¹¶æä¾›å“åº”å¼èƒ½åŠ›ã€‚</li>
<li><strong>getter</strong>: ä» state ä¸­æ´¾ç”Ÿå‡ºä¸€äº›çŠ¶æ€ï¼Œç›¸å½“äº Vue.js ä¸­çš„è®¡ç®—å±æ€§ computedã€‚</li>
<li><strong>mutation</strong>: é€šè¿‡æäº¤ mutationï¼Œæ˜¯ Vuex ä¸­ä¿®æ”¹ state çš„æ¨èæ–¹å¼ã€‚</li>
<li><strong>action</strong>ï¼šå¯ä»¥åŒ…æ‹¬å¼‚æ­¥æ“ä½œï¼Œå¼‚æ­¥æ“ä½œå¤„ç†å®Œåï¼Œé€šè¿‡æäº¤ mutation ä¿®æ”¹çŠ¶æ€ã€‚</li>
<li><strong>module</strong>: æ¨¡å—åŒ–ï¼Œå¯ä»¥å°† store åˆ†å‰²æˆä¸€ä¸ªä¸ªå°æ¨¡å—ï¼Œæ¯ä¸ªæ¨¡å—æ‹¥æœ‰è‡ªå·±çš„ stateã€getterã€mutationã€actionï¼Œç”šè‡³æ˜¯åµŒå¥—å­æ¨¡å—ã€‚</li>
</ul>
<p>åœ¨æ„å»º<strong>ä¸­å¤§å‹å•é¡µåº”ç”¨</strong>æ—¶ï¼Œå„ç»„ä»¶å’Œæ¨¡å—çš„çŠ¶æ€æµè½¬é€»è¾‘ä¼šç›¸å½“å¤æ‚ï¼Œè¿™æ—¶å€™å°±å¯ä»¥ä½¿ç”¨ <code>Vuex</code> è¿›è¡Œå…¨å±€çŠ¶æ€ç®¡ç†ï¼Œå¹¶ä¸”é‡Œé¢ç”¨<code>ä¸¥æ ¼çš„ mutation</code> ä¿è¯äº†çŠ¶æ€çš„é¢„æœŸæµè½¬ï¼Œä½¿å¾—é¡¹ç›®çš„æ•°æ®æµå˜å¾—æ¸…æ™°ï¼Œæé«˜äº†é¡¹ç›®å¯ç»´æŠ¤æ€§ã€‚</p>
<h2 data-id="heading-1">2ã€å¦‚ä½•è§£å†³é¡µé¢åˆ·æ–°å Vuex çš„æ•°æ®ä¸¢å¤±é—®é¢˜ï¼Ÿ</h2>
<p><strong>æ•°æ®ä¸¢å¤±åŸå› </strong>ï¼šVuex ä¸­çš„çŠ¶æ€ state æ˜¯å­˜å‚¨åœ¨å†…å­˜ä¸­çš„ï¼Œåˆ·æ–°é¡µé¢ä¼šå¯¼è‡´å†…å­˜æ¸…ç©ºï¼Œæ‰€ä»¥æ•°æ®ä¸¢å¤±ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p>
<h3 data-id="heading-2">2.1 ç¬¬ä¸€æ­¥ï¼šä½¿ç”¨æŒä¹…åŒ–å­˜å‚¨ä¿å­˜æ•°æ®</h3>
<p>å°† Vuex çš„æ•°æ®åœ¨åˆé€‚æ—¶æœºï¼ˆæ¯”å¦‚ç›‘å¬ window çš„<code>beforeunload</code> äº‹ä»¶ï¼‰ä¿å­˜åˆ°æµè§ˆå™¨çš„æœ¬åœ°å­˜å‚¨ï¼ˆ<code>localStorage</code> æˆ– <code>sessionStorage</code>ï¼‰ï¼Œä¹Ÿå¯ä»¥ç›´æ¥é‡‡ç”¨ <code>vuex-persistedstate</code> æŒä¹…åŒ–æ’ä»¶ï¼ˆé»˜è®¤ä¼šå­˜å‚¨åˆ° localStorage ä¸­ï¼Œå¯é€šè¿‡é…ç½®ä¿®æ”¹ï¼‰è¿›è¡Œæœ¬åœ°å­˜å‚¨ã€‚</p>
<h3 data-id="heading-3">2.2 ç¬¬äºŒæ­¥ï¼šåˆå§‹åŒ–åº”ç”¨ï¼Œæ›¿æ¢çŠ¶æ€</h3>
<p>åº”ç”¨åˆå§‹åŒ–åŠ è½½æ—¶ï¼Œè·å–å­˜å‚¨ä¸­çš„çŠ¶æ€è¿›è¡Œæ›¿æ¢ã€‚Vuex ç»™æˆ‘ä»¬æä¾›äº†ä¸€ä¸ª <code>replaceState(state: Object)</code>  APIï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿è¿›è¡ŒçŠ¶æ€æ›¿æ¢ã€‚</p>
<h3 data-id="heading-4">2.3 ç¬¬ä¸‰æ­¥ï¼šæ£€æŸ¥æ•°æ®ï¼Œå‘èµ·è¯·æ±‚</h3>
<p>åœ¨çŠ¶æ€æ›¿æ¢åï¼Œè¿˜éœ€è¦æ£€æŸ¥ Vuex ä¸­çš„æ•°æ®æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™å¯ä»¥åœ¨ <code>action</code> ä¸­å‘é€æ¥å£è¯·æ±‚æ‹¿åˆ°æ•°æ®ï¼Œé€šè¿‡æäº¤ <code>mutation</code> ä¿®æ”¹çŠ¶æ€æŠŠæ•°æ®å­˜å‚¨åˆ° <code>store</code> ä¸­ã€‚</p>
<h3 data-id="heading-5">2.4 ç¬¬å››æ­¥ï¼šçŠ¶æ€åŒæ­¥</h3>
<p>çŠ¶æ€å˜åŒ–åå°†çŠ¶æ€åŒæ­¥åˆ°æµè§ˆå™¨å­˜å‚¨ä¸­ï¼Œä¿è¯æœ¬åœ°å­˜å‚¨ä¸­çŠ¶æ€çš„å®æ—¶æ€§ã€‚</p>
<blockquote>
<p>ä¸è¿‡è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœæŠŠæ•°æ®æŒä¹…åŒ–åˆ° localStorage æˆ–è€… sessionStorage ä¸­ï¼Œä¼šæœ‰ä¸€å®šçš„å®‰å…¨é£é™©ï¼š</p>
<ol>
<li>æ•°æ®ç›´æ¥å…¨éƒ¨æš´éœ²åœ¨ storage å¯é€šè¿‡æ§åˆ¶å°çš„ <code>Application</code> é€‰é¡¹å¡è¿›è¡ŒæŸ¥çœ‹ï¼Œæ•°æ®å®¹æ˜“æ³„æ¼ã€‚æŒä¹…åŒ–çš„æ•°æ®æ¯•ç«Ÿæ²¡æœ‰å†…å­˜ä¸­çš„æ•°æ®å®‰å…¨ã€‚</li>
<li>ç”¨æˆ·å¯ä»¥ç›´æ¥åœ¨æ§åˆ¶å° <code>Application</code> ä¸­ç›´æ¥ä¿®æ”¹æ•°æ®ï¼Œä»è€Œå¯èƒ½ç»•è¿‡æŸäº›æƒé™æ ¡éªŒï¼Œçœ‹åˆ°ä¸€äº›é¢„æœŸå¤–çš„ç•Œé¢å’Œäº¤äº’ã€‚</li>
</ol>
</blockquote>
<h2 data-id="heading-6">3ã€mutation å’Œ action çš„åŒºåˆ«æœ‰å“ªäº›ï¼Ÿ</h2>
<ul>
<li><strong>ä½œç”¨ä¸åŒ</strong>ï¼šaction æ˜¯ç”¨æ¥å¤„ç†å¼‚æ­¥é€»è¾‘æˆ–è€…ä¸šåŠ¡é€»è¾‘ï¼Œè€Œ mutation æ˜¯ç”¨æ¥ä¿®æ”¹çŠ¶æ€çš„ã€‚</li>
<li><strong>ä½¿ç”¨é™åˆ¶</strong>ï¼šaction ä¸­å¯ä»¥è°ƒç”¨ mutation æˆ–è€…å…¶ä»– actionï¼Œè€Œ mutation ä¸­åˆ™åªèƒ½ä¿®æ”¹ stateã€‚</li>
<li><strong>è¿”å›å€¼ä¸åŒ</strong>ï¼š<code>dispatch</code> æ—¶ä¼šå°† action åŒ…è£…æˆ promiseï¼Œè€Œ mutation åˆ™æ²¡è¿›è¡ŒåŒ…è£…ã€‚</li>
<li><strong>ä¸¥æ ¼æ¨¡å¼ä¸‹çš„å·®å¼‚</strong>ï¼šåœ¨ Vuex å¼€å¯ä¸¥æ ¼æ¨¡å¼ <code>strict: true</code> åï¼Œä»»ä½•é mutation å‡½æ•°ä¿®æ”¹çš„çŠ¶æ€ï¼Œå°†ä¼šæŠ›å‡ºé”™è¯¯ã€‚</li>
</ul>
<h3 data-id="heading-7">æ‰©å±•ï¼švuex ä¸¥æ ¼æ¨¡å¼æ˜¯å¦‚ä½•ç›‘å¬é mutation å‡½æ•°ä¿®æ”¹çŠ¶æ€çš„ï¼Ÿ</h3>
<p><strong>å…¶æ ¸å¿ƒæ€è·¯å¦‚ä¸‹ï¼š</strong></p>
<ol>
<li>ç”¨<code>this._committing</code> è¡¨ç¤ºç¨‹åºæ˜¯å¦å¤„äº <code>commit</code> æ‰§è¡Œè¿‡ç¨‹ã€‚</li>
<li>ç”¨åŒæ­¥ watchï¼ˆåŒæ­¥ç›‘å¬çš„æ„æ€æ˜¯ï¼Œä¸€æ—¦æ•°æ®å‘ç”Ÿå˜åŒ–ä¼šç«‹å³è°ƒç”¨å›è°ƒï¼Œè€Œä¸æ˜¯åœ¨ <code>ä¸‹ä¸€æ¬¡ Tick</code> ä¸­è°ƒç”¨ï¼‰ ç›‘å¬ store ä¸­çš„ state çŠ¶æ€ï¼ˆæ·±åº¦ç›‘å¬ï¼‰ã€‚</li>
<li>å¦‚æœåœ¨ <code>commit</code> æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œstate å‘ç”Ÿäº†å˜åŒ–ï¼Œåœ¨å¼€å‘ç¯å¢ƒä¼šæŠ¥é”™ã€‚</li>
</ol>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Store</span> {
  <span class="hljs-title function_">commit</span>(<span class="hljs-params">_type, _payload, _options</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_withCommit</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-comment">// commit ä¸­çš„å¤„ç†</span>
      entry.<span class="hljs-title function_">forEach</span>(<span class="hljs-keyword">function</span> <span class="hljs-title function_">commitIterator</span>(<span class="hljs-params">handler</span>) {
        <span class="hljs-title function_">handler</span>(payload);
      });
    });
  }
  <span class="hljs-title function_">_withCommit</span>(<span class="hljs-params">fn</span>) {
    <span class="hljs-keyword">const</span> committing = <span class="hljs-variable language_">this</span>.<span class="hljs-property">_committing</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_committing</span> = <span class="hljs-literal">true</span>;
    <span class="hljs-title function_">fn</span>(); <span class="hljs-comment">// å¦‚æœå‡½æ•°å†…éƒ¨æœ‰å¼‚æ­¥ä¿®æ”¹çŠ¶æ€é€»è¾‘ï¼Œåˆ™ä¸‹é¢çš„ watch æ—¶ä¼šæŠ¥é”™</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_committing</span> = committing;
  }
}
</code></pre>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">enableStrictMode</span>(<span class="hljs-params">store</span>) {
  <span class="hljs-title function_">watch</span>(
    <span class="hljs-function">() =&gt;</span> store.<span class="hljs-property">_state</span>.<span class="hljs-property">data</span>,
    <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-keyword">if</span> (__DEV__) { <span class="hljs-comment">// å¼€å‘ç¯å¢ƒæŠ¥é”™</span>
        <span class="hljs-title function_">assert</span>(
          store.<span class="hljs-property">_committing</span>,
          <span class="hljs-string">`do not mutate vuex store state outside mutation handlers.`</span>
        );
      }
    },
    { <span class="hljs-attr">deep</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">flush</span>: <span class="hljs-string">"sync"</span> } <span class="hljs-comment">// å®šä¹‰åŒæ­¥çš„ watcher è¿›è¡ŒåŒæ­¥ç›‘æ§</span>
  );
}
</code></pre>
<h2 data-id="heading-8">4ã€Vuex çš„ module åœ¨ä»€ä¹ˆæƒ…å†µä¸‹ä¼šä½¿ç”¨ï¼Ÿ</h2>
<p>ç”¨å®˜æ–¹çš„è¯æ¥è¯´å°±æ˜¯ï¼Œ<strong>â€œä½¿ç”¨å•ä¸€çŠ¶æ€æ ‘ï¼Œåº”ç”¨çš„æ‰€æœ‰çŠ¶æ€ä¼šé›†ä¸­åˆ°ä¸€ä¸ªæ¯”è¾ƒå¤§çš„å¯¹è±¡ã€‚å½“åº”ç”¨å˜å¾—éå¸¸å¤æ‚æ—¶ï¼Œstore å¯¹è±¡å°±æœ‰å¯èƒ½å˜å¾—ç›¸å½“è‡ƒè‚¿ã€‚â€</strong></p>
<p>æ‰€ä»¥æˆ‘ä»¬åœ¨å¼€å‘å¤æ‚åº”ç”¨æ—¶ï¼Œå¯ä»¥æŒ‰ç…§ä¸šåŠ¡é€»è¾‘å°†åº”ç”¨çŠ¶æ€è¿›è¡Œ modules æ‹†åˆ†ï¼Œæ¯”å¦‚ï¼š</p>
<ol>
<li>ç”¨æˆ·æ¨¡å— userï¼›</li>
<li>è®¢å•æ¨¡å— orderï¼›</li>
<li>è¯¾ç¨‹æ¨¡å— courseï¼›</li>
<li>...ç­‰å…¶å®ƒæ¨¡å—ã€‚</li>
</ol>
<p>è¿™æ ·åœ¨å¼€å‘åº”ç”¨å’Œç»´æŠ¤çŠ¶æ€æ—¶æ›´åŠ ç²¾ç»†å’Œæ¸…æ™°ï¼Œå¯ç»´æŠ¤æ€§æ›´å¼ºã€‚</p>
<h2 data-id="heading-9">5ã€Vuex å’Œ Pinia çš„åŒºåˆ«ï¼Ÿ</h2>
<p><code>Pinia</code> æ˜¯ä»¥ <code>Vuex 5</code> ä¸ºåŸå‹ï¼Œç”± Vue.js å®˜æ–¹å›¢é˜Ÿå¼€å‘çš„æ–°ä¸€ä»£ Vue å®˜æ–¹æ¨èçš„çŠ¶æ€ç®¡ç†æ–¹æ¡ˆã€‚</p>
<p><strong>å®ƒå¯¹æ¯” Vuex æœ‰ä»¥ä¸‹åŒºåˆ«ï¼š</strong></p>
<h3 data-id="heading-10">5.1 API è®¾è®¡å’Œä½¿ç”¨æ–¹å¼</h3>
<ul>
<li><strong>Vuex</strong>ï¼šé‡‡ç”¨å•ä¸€ store ç»“æ„ï¼Œéœ€è¦ä¸¥æ ¼åŒºåˆ† mutationï¼ˆåŒæ­¥ä¿®æ”¹çŠ¶æ€ï¼‰å’Œ actionï¼ˆå¼‚æ­¥æ“ä½œï¼‰ã€‚çŠ¶æ€ä¿®æ”¹å¿…é¡»é€šè¿‡ commit mutations è¿›è¡Œï¼Œè™½ç„¶è®©æ•°æ®æµå‘æ›´æ¸…æ™°ï¼Œä½†ä¹Ÿä¼šè®©ä»£ç æ›´åŠ å†—é•¿ã€‚</li>
<li><strong>Pinia</strong>ï¼šæ›´ç®€å•çš„ API è®¾è®¡ï¼Œæ‰€è§å³æ‰€å¾—ï¼Œä¹Ÿæä¾›äº†ç¬¦åˆç»„åˆå¼ API é£æ ¼çš„ APIï¼ˆæ¯”å¦‚ç”¨ defineStore å®šä¹‰ storeï¼‰ã€‚å»æ‰äº† mutationï¼Œç›´æ¥åœ¨ actions ä¸­ä¿®æ”¹ stateï¼ˆæ”¯æŒåŒæ­¥/å¼‚æ­¥ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-11">5.2 æ¨¡å—åŒ–å’Œç»“æ„</h3>
<ul>
<li><strong>Vuex</strong>ï¼šæ”¯æŒæ¨¡å—åŒ–ï¼ˆmodulesï¼‰ï¼Œä½†éœ€è¦åœ¨å•ä¸€ store ä¸­ç»„ç»‡ï¼Œå¯èƒ½å¯¼è‡´å¤§å‹é¡¹ç›® store è†¨èƒ€ã€‚</li>
<li><strong>Pinia</strong>ï¼šå¤©ç”Ÿæ¨¡å—åŒ–ï¼Œæ¯ä¸ª store ç‹¬ç«‹å®šä¹‰å’Œå¯¼å…¥ï¼Œæ”¯æŒåŠ¨æ€æ³¨å†Œå’Œçƒ­é‡è½½ã€‚æ›´é€‚åˆå¤§å‹åº”ç”¨ï¼Œä¾¿äºæ‹†åˆ†æˆå° storeã€‚</li>
</ul>
<h3 data-id="heading-12">5.3 TypeScript æ”¯æŒ</h3>
<ul>
<li><strong>Vuex</strong>ï¼šTypeScript æ”¯æŒä¸€èˆ¬ï¼Œéœ€è¦é¢å¤–é…ç½®ï¼›</li>
<li><strong>Pinia</strong>ï¼šæœ¬èº«æºç å°±æ˜¯ç”¨ TypeScript ç¼–å†™ï¼Œæ‰€ä»¥å¯¹TypeScript æ”¯æŒååˆ†å‹å¥½ï¼Œå…·å¤‡è‡ªåŠ¨æ¨æ–­ç±»å‹ã€ç±»å‹å®‰å…¨å’Œä»£ç è¡¥å…¨ã€‚</li>
</ul>
<h3 data-id="heading-13">5.4 æ€§èƒ½å’Œé›†æˆ</h3>
<ul>
<li><strong>Vuex</strong>ï¼šVuex4 åœ¨ Vue3 ä¸­å¯ç”¨ï¼Œä½†ä¸ Composition API é›†æˆä¸å¤Ÿé¡ºç•…ï¼Œå¯èƒ½éœ€è¦é¢å¤–çš„é€‚é…ï¼›</li>
<li><strong>Pinia</strong>ï¼šæ›´è½»é‡ï¼ˆä½“ç§¯å°ï¼Œçº¦1kbï¼‰ï¼Œæ€§èƒ½æ›´å¥½ï¼›å®Œç¾æ”¯æŒ Vue 3 çš„ Composition API å’Œ reactivity ç³»ç»Ÿã€‚</li>
</ul>
<h2 data-id="heading-14">6ã€Pinia å’Œ Vuex å¦‚ä½•é€‰æ‹©ï¼Ÿ</h2>
<ul>
<li><strong>æ–°é¡¹ç›®</strong>ï¼šå¼ºçƒˆæ¨èç”¨ <code>Vue3 + Pinia</code>ï¼›</li>
<li><strong>è€ Vue2 é¡¹ç›®</strong>ï¼šå¦‚æœä¸æŠŠé¡¹ç›®å‡çº§åˆ° Vue3 è¿˜æ˜¯å»ºè®®ç”¨ Vuexï¼Œå¦‚æœéœ€è¦å‡çº§åˆ° vue3ï¼Œå°±å¯ä»¥é€æ­¥æŠŠ Vuex æ›¿æ¢ä¸º Piniaï¼ŒVuex å’Œ Pinia æ˜¯å¯ä»¥åŒæ—¶å®‰è£…åœ¨åŒä¸€ä¸ªé¡¹ç›®ä¸­ï¼Œè¿™ä¹Ÿä¸ºé¡¹ç›®å‡çº§æä¾›äº†ä¸€å®šçš„ä¾¿åˆ©ã€‚å½“ç„¶ï¼Œç”± <code>Vuex -&gt; Pinia</code>ï¼Œæ˜¯ä¸€æ¬¡ï¼Œæ— ç–‘å’Œ <code>Vue2 -&gt; Vue3</code> ä¸€æ ·ï¼Œæ˜¯ä¸€æ¬¡å¤§çš„ç ´åæ€§å‡çº§ï¼Œå·¥ä½œé‡è¿˜æ˜¯ç›¸å½“å¤§çš„ã€‚</li>
</ul>
<h2 data-id="heading-15">ç»“è¯­</h2>
<p>ä»¥ä¸Šæ˜¯æ•´ç†çš„ Vuex çš„é«˜é¢‘é¢è¯•é¢˜ï¼Œå¦‚æœ‰é”™è¯¯æˆ–è€…å¯ä»¥ä¼˜åŒ–çš„åœ°æ–¹æ¬¢è¿è¯„è®ºåŒºæŒ‡æ­£ï¼Œåç»­è¿˜ä¼šæ›´æ–° Vue-router ç›¸å…³é¢è¯•é¢˜ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item>  </channel></rss>