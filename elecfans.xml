<?xml version="1.0" encoding="UTF-8"?><rss version="2.0">  <channel>      <title>电子发烧友 - 最近文章</title>      <link>https://www.elecfans.com/article/special/</link>      <description>电子发烧友</description>      <generator>python elecfans.py @Pi20</generator>      <item>    <title><![CDATA[韩国浦项集团莅临鸿之微科技考察交流]]></title>    <link>https://www.elecfans.com/d/7641900.html</link>    <guid>https://www.elecfans.com/d/7641900.html</guid>    <pubDate>2026-02-06 16:20:00</pubDate>    <description><![CDATA[<p style="text-indent:2em;">
	当全球材料研发正从“经验试错”向“<a href="https://www.elecfans.com/tags/ai/" target="_blank"><u>AI</u></a>驱动”的第五范式加速跃迁，一场关于未来工业底层逻辑的深度对话正在上演。</p>
<p style="text-indent:2em;">
	2月5日,全球钢铁与新材料巨头韩国浦项集团（POSCO）代表团，携手韩国大邱庆北科学技术院、韩国K-Club专家一行，莅临鸿之微科技，对“Physics AI 材料智能研发平台”展开全方位战略考察与深度<a href="https://bbs.elecfans.com/zhuti_1183_1.html" target="_blank"><u>技术交流</u></a>，为中韩高端材料产业合作注入新动能。</p>
<p style="text-indent:2em;">
	技术共鸣：</p>
<p style="text-indent:2em;">
	东方材料巨头共探 AI 驱动的研发破局之道</p>
<p style="text-indent:2em;">
	作为韩国工业的骄傲，浦项集团不仅是全球顶尖的钢铁制造企业，更是新材料研发领域的积极探索者。此次来访，其核心诉求直指材料研发数字化转型的关键难题，旨在寻求与中国前沿技术企业的深度合作，共同突破行业瓶颈。</p>
<p style="text-indent:2em;">
	而鸿之微作为AI+MGE材料研发第五范式的引领者，早已针对全球材料研发“周期长、成本高”的核心痛点，构建了独具优势的 Physics AI 材料智能研发解决方案。依托深厚的物理底层技术积累，这套方案深度融合多尺度<a href="https://bbs.elecfans.com/zhuti_proteus_1.html" target="_blank"><u>仿真</u></a>、<a href="https://www.elecfans.com/tags/高通/" target="_blank"><u>高通</u></a>量计算与<a href="https://www.elecfans.com/v/tag/150/" target="_blank"><u>人工智能</u></a><a href="https://m.elecfans.com/v/tag/2562/" target="_blank"><u>算法</u></a>，搭建起连接微观原子世界与宏观工业应用的智能桥梁。</p>
<p style="text-indent:2em;">
	“材料研发正从传统‘试错法’向‘预测法’全面转变。”鸿之微技术负责人介绍，通过量子-原子-介观-宏观的全尺度仿真平台，公司已实现将新材料研发周期从传统的10-30年压缩至数月，让智能研发的“中国方案”在钢铁、有色金属、<a href="https://m.elecfans.com/v/tag/293/" target="_blank"><u>新能源</u></a>等多个领域落地见效。</p>
<p style="text-indent:2em;">
	范式跃迁：</p>
<p style="text-indent:2em;">
	从“工具”到材料研发“智能操作系统”</p>
<p style="text-indent:2em;">
	在鸿之微最新的“AI+MGE”战略蓝图中，材料研发不再局限于单一软件工具的应用，而是升级为具备感知、生成、仿真与进化能力的智能生态系统——这也是此次交流中浦项集团重点关注的核心亮点。</p>
<p style="text-indent:2em;">
	交流现场，鸿之微技术负责人详解其构建的材料研发“智能操作系统”：通过“可信感知”融合海量文献与数据，“智能生成”拒绝算法幻觉、自动产出千万级候选结构，再经“协同仿真”实现千级任务并行验证。这一全链路闭环体系，将原本以“年”计的研发周期压缩90%以上，真正完成了从“人找数据”到“数据与智能体驱动研发”的跨越式升级。</p>
<p style="text-indent:2em;">
	平台赋能：</p>
<p style="text-indent:2em;">
	AI驱动· toB落地实践</p>
<p style="text-indent:2em;">
	交流会上，鸿之微向浦项集团展示了多个成功案例，展现了极强的泛化能力。</p>
<p style="text-indent:2em;">
	钢铁材料的降本增效：鸿之微展示了与中国某龙头钢铁企业的合作案例。通过Physics AI材料智能研发平台的多尺度仿真计算，成功设计出在降低贵金属元素含量的同时保持优异性能的油气管线钢新配方，不仅打破了技术壁垒，更实现了显著的原材料成本优化。</p>
<p style="text-indent:2em;">
	新能源电池的性能突破：针对电池快充这一行业难题，鸿之微展示了与宁德时代合作的电解液及电极结构优化项目。利用物理AI平台的快速筛选与梯度结构设计能力，团队找到了在5C快充条件下仍能保持70%容量的最佳结构，性能较普通结构提升三倍以上，为新能源产业的痛点提供了“中国方案”。</p>
<p style="text-indent:2em;">
	共筑生态：</p>
<p style="text-indent:2em;">
	中韩携手打造全球材料智能研发高地</p>
<p style="text-indent:2em;">
	作为全球材料产业风向标，浦项集团对鸿之微“数字孪生 + 智能实体”的创新探索展现出浓厚兴趣。双方共识明确：未来材料产业的竞争核心是“研发速度”与“生态资源”的双重较量，深度合作是共赢关键。</p>
<p style="text-indent:2em;">
	基于AI+MGE材料智能研发范式构建的“联合实验室”——“智能研发中枢” 提速创新、“科技资产引擎” 链接资本、“生态资源入口”聚合全球智力与数据，为双方潜在深度合作提供了清晰路径。“中国新材料研发技术能力，能为全球产业升级提供新解法。”</p>
<p style="text-indent:2em;">
	双方就高温合金设计、电池材料开发、钢铁工艺优化三大核心领域，同步探讨技术授权、联合研发、共建前沿材料研究<a href="https://www.hqchip.com/tags" target="_blank"><u>中心</u></a>等多元合作模式。鸿之微科技CEO王音表示：国际化布局正加速落地，已在香港设立分支机构，未来将以香港为国际窗口，深化与浦项集团的跨境协同。</p>
<p style="text-indent:2em;">
	这场中韩材料产业巨头的历史性携手，既是对鸿之微AI+MGE材料智能研发范式的高度认可，更是中韩高端制造合作深化的重要<a href="https://m.hqchip.com/app/1072" target="_blank"><u>信号</u></a>。随着材料作为工业“粮食”的基础地位愈发凸显，双方合作或将开启亚洲材料产业智能升级新篇章，为全球科研与产业界提供颠覆性的研发基础设施，推动新材料研发进入“涌现”新纪元！</p>]]></description></item><item>    <title><![CDATA[海康威视获评浙江省中青年专家培育突出贡献单位]]></title>    <link>https://www.elecfans.com/d/7641902.html</link>    <guid>https://www.elecfans.com/d/7641902.html</guid>    <pubDate>2026-02-06 16:23:00</pubDate>    <description><![CDATA[<p style="text-indent:2em;">
	近日，浙江省人民政府印发《关于表彰浙江省有突出贡献中青年专家和浙江省中青年专家培育突出贡献单位的通报》，<a href="https://www.elecfans.com/tags/海康威视/" target="_blank"><u>海康威视</u></a>荣获“浙江省中青年专家培育突出贡献单位”称号。</p>
<p style="text-indent:2em;">
	该评选由浙江省人民政府组织，每五年开展一次，旨在表彰在推动科技创新、引领产业升级、服务经济社会高质量发展等方面作出突出贡献的单位和个人。此次海康威视获评该称号，既是对其长期深耕人才引育、致力产业创新的充分肯定，也是其坚持以人才推动高质量发展的有力印证。</p>
<p style="text-indent:2em;">
	作为一家专注技术创新的科技公司，二十余年来，海康威视不断完善以物联感知、<a href="https://www.elecfans.com/v/tag/150/" target="_blank"><u>人工智能</u></a>等为核心的智能物联技术体系，为千行百业提供安防和场景数字化的产品与服务。</p>
<p style="text-indent:2em;">
	为持续激发创新动能，海康威视以长期发展战略为牵引，系统性构建了全方位、多层次的人才培养生态。公司始终坚持高研发投入，近五年，研发费用率均保持在10%以上，累计研发投入达477.02亿元。与此同时，公司在国内、海外设立多个本地研发<a href="https://www.hqchip.com/tags" target="_blank"><u>中心</u></a>，形成了以总部为中心辐射区域的多级研发体系，研发及技术服务人员占公司总人数近50%，为技术创新与人才成长提供坚实的平台支撑。</p>
<p style="text-indent:2em;">
	在人才培养上，海康威视始终坚持“体系建设”和“资源建设”两手抓策略，一方面依托数字化培训平台，全面覆盖各层级培训需求，提升培训效率与效果；与此同时，积极探索敏捷、多元化的人才发展模式，聚焦关键岗位与核心人才，量身定制多样化的学习解决方案，助力关键岗位及业务发展的核心人才供应。</p>
<p style="text-indent:2em;">
	比如，在高层次人才培养上，海康威视设有具备独立招收资格的国家级博士后科研工作站，该工作站自成立以来，累计培养博士后140余人，其中18人获得省级博士后资助，4人获得中国博士后科学基金支持。</p>
<p style="text-indent:2em;">
	为进一步强化人才培育和集聚能力，海康威视通过浙江省智能感知技术创新中心、高性能有机光学聚合物与先进制造技术全国重点实验室等高能级创新平台，培育汇聚高层次人才和高水平科技创新团队，荣获“国家卓越<a href="https://bbs.elecfans.com/zhuti_lecture_1.html" target="_blank"><u>工程师</u></a>团队”“全国专业技术人才先进集体”“全国工业和信息化系统先进集体”等多项荣誉。</p>
<p style="text-indent:2em;">
	未来，海康威视将持续深化人才发展策略，整合产业、学术、科研等多方资源，强化高层次人才培育与创新成果转化，为行业高质量发展注入源源不断的人才活力和创新力量。</p>]]></description></item><item>    <title><![CDATA[MAX16545C：12V电源总线的高效保护方案]]></title>    <link>https://www.elecfans.com/d/7641909.html</link>    <guid>https://www.elecfans.com/d/7641909.html</guid>    <pubDate>2026-02-06 16:25:00</pubDate>    <description><![CDATA[<input type="hidden" id="annex0_7641909" value="https://file1.elecfans.com/web2/M00/8E/95/poYBAGPg8SWACXa_AEjI9CplzXg330.pdf"/><h1>
	MAX16545B/C：12V<a href="https://www.hqchip.com/app.html" target="_blank"><u>电源</u></a>总线的高效保护方案</h1>
<p>
	在电子设备的<a href="https://www.hqchip.com/app/1731" target="_blank"><u>电源管理</u></a>中，对12V电源总线的有效分配、控制、监测和保护至关重要。<a href="https://bbs.elecfans.com/group_65" target="_blank"><u>Analog</u></a> Devices的MAX16545B/C集成断路器IC，为这一需求提供了完整的单芯片解决方案。下面，我们就来详细了解一下这款IC的特点、<a href="https://m.elecfans.com/v/tag/773/" target="_blank"><u>工作原理</u></a>以及设计要点。</p>
<p>
	文件下载：<a href="javascript:;" data-annex="annex0_7641909" target="_blank">MAX16545C.pdf</a></p>
<h2>
	一、产品概述</h2>
<p>
	MAX16545B/C是一款具有集成低<a href="https://www.hqchip.com/app/485" target="_blank"><u>电阻</u></a><a href="https://www.elecfans.com/tags/mosfet/" target="_blank"><u>MOSFET</u></a>和无损<a href="https://www.elecfans.com/tags/电流/" target="_blank"><u>电流</u></a>感应电路的断路器保护IC，具备PMBus™/SMBus控制和报告功能。它专为系统12V电源的分配、控制、监测和保护而设计，内部<a href="https://m.hqchip.com/app/1700" target="_blank"><u>LDO</u></a>提供偏置电源电压，可在无故障时启动，并实现受控、单调的启动过程。</p>
<h3>
	（一）关键特性</h3>
<ol><li>
		<strong>高集成度与小尺寸</strong>：采用6.5mm x 4mm的封装，仅为传统解决方案板面积的不到25%，实现了功率、控制和监测的单片集成。</li>
	<li>
		<strong>多种保护机制</strong>：提供三种过流保护方法，包括可<a href="https://www.elecfans.com/v/tag/1315/" target="_blank"><u>编程</u></a>的适度OCP、用户可选的严重OCP和固定的高关断OCP，能在检测到故障时快速关闭，保护设备安全。</li>
	<li>
		<strong>无损电流感应</strong>：可在负载和温度变化时提供<a href="https://m.hqchip.com/app/1252" target="_blank"><u>高精度</u></a>的电流感应，提高系统整体能源效率，减少功耗。</li>
	<li>
		<strong>PMBus/SMBus<a href="https://m.hqchip.com/app/1787" target="_blank"><u>接口</u></a></strong>：支持数字控制和监测，提供输入功率和输入能量报告，还具备基于可编程警告阈值的警告功能。</li>
</ol><h2>
	二、工作原理</h2>
<h3>
	（一）启动过程</h3>
<p>
	当12V电源电压足够高以保证LDO运行时，MAX16545B/C启用集成的1.8V VDD LDO。VDD有效后，设备读取SMBus_ID编程电阻值设置SMBus地址并初始化。在此期间，<a href="https://www.hqchip.com/app/1715" target="_blank"><u>栅极驱动</u></a>电源电容完全充电，之后可通过使能输入进行控制。</p>
<h3>
	（二）安全工作区（SOA）</h3>
<p>
	启动时，需确保FET在安全工作区内。MAX16545B默认启动OCP为16A，MAX16545C为24A，启动OCP阈值应低于安全峰值电流。正常运行时，VGS_UVLO确保FET在深三极管区域工作，三级OCP限制设备工作电流在安全范围内。</p>
<h3>
	（三）自检过程</h3>
<p>
	当VBST_UVLO清除、内部VDD_LDO完全启用且EN/UVLO引脚高于使能阈值时，设备会进行定时输出放电自检。若输出电压低于编程的自检阈值，自检通过，设备继续启动；否则，设备会锁定故障。此外，每次重启时还会进行软启动<a href="https://www.elecfans.com/tags/电容/" target="_blank"><u>电容</u></a>放电检查。</p>
<h3>
	（四）软启动</h3>
<p>
	自检完成后，输出电压软启动斜坡开始。启动期间，CSS电容由恒流源充电，输出电压以由外部软启动电容决定的速率单调上升。</p>
<h3>
	（五）故障保护</h3>
<ol><li>
		<strong>VDD欠压锁定</strong>：持续监测VDD，VDD低于VDD_UVLO时设备关闭，恢复正常后从软启动延迟阶段重新启动。</li>
	<li>
		<strong>电流滞后</strong>：SMBUS_ID引脚在解码后用作电流滞后标志，根据输出电流大小设置标志高低。</li>
	<li>
		<strong>VBST和VGS UVLO</strong>：EN/UVLO高于使能阈值时检查VBST_UVLO，栅极驱动（VGS）UVLO保护有内部去毛刺<a href="https://www.elecfans.com/tags/滤波器/" target="_blank"><u>滤波器</u></a>，可防止误触发。</li>
	<li>
		<strong>VIN_UVLO</strong>：通过电阻分压器监测VIN，低于阈值时关闭FET，高于阈值时重新启动并进行自检和软启动。</li>
	<li>
		<strong>过压检测</strong>：持续监测输入电压，超过PMBus编程阈值时，Power-Good输出置低。</li>
	<li>
		<strong>过流检测</strong>：启动时和正常运行时均监测负载电流，提供三级过流保护，不同级别过流情况有不同的处理方式。</li>
	<li>
		<strong>过热保护（OTP）</strong>：当结温超过可编程故障阈值时，锁定FET并报告故障，可通过多种方式重新启用。</li>
</ol><h2>
	三、设计要点</h2>
<h3>
	（一）参数配置</h3>
<p>
	MAX16545B/C可通过<a href="https://www.elecfans.com/analog/" target="_blank"><u>模拟</u></a>编程电阻和PMBus进行配置，如通过连接到ROCP引脚的电阻可编程适度OCP阈值，通过CSS电容可编程软启动斜坡速率等。</p>
<h3>
	（二）电容选择</h3>
<ol><li>
		<strong>输入电容（CIN）</strong>：建议使用输入电容以保证输入电压稳定、无噪声，无输入电容时输入电压纹波应小于300mV峰 - 峰值。</li>
	<li>
		<strong>输出电容（COUT）</strong>：最大输出电容可根据公式计算，同时建议输出电容小于10mF，以防止启动时自检误触发。</li>
</ol><h3>
	（三）<a href="https://m.hqchip.com/app/1554" target="_blank"><u>二极管</u></a>选择</h3>
<ol><li>
		<strong>输入<a href="https://m.hqchip.com/app/1587" target="_blank"><u>TVS</u></a>二极管</strong>：用于钳位输入电压瞬变，选择时需考虑反向耐压、峰值脉冲电流和钳位电压等参数。</li>
	<li>
		<strong>输出<a href="https://www.hqchip.com/app/1558" target="_blank"><u>肖特基</u></a>二极管</strong>：用于钳位负输出电压尖峰，应选择正向压降小、峰值正向浪涌电流高的二极管。</li>
</ol><h3>
	（四）<a href="https://m.elecfans.com/v/tag/82/" target="_blank"><u>PCB</u></a>布局</h3>
<ol><li>
		<strong>VIN和VOUT</strong>：使用宽而多的电源平面，减少输入和输出走线电感，通过多个过孔连接不同层的电源平面，输入和输出电容应尽量靠近IC。</li>
	<li>
		<strong>接地</strong>：从顶层接地引脚到第二层AGND岛使用约0.1mm宽、0.7mm长的走线。</li>
	<li>
		<strong>VBST和SS</strong>：将VBST和SS电容放置在顶层，尽量靠近引脚。</li>
	<li>
		<strong>VDD</strong>：在顶层添加VDD平面，使VDD电容靠近IC，形成更紧密的接地回路。</li>
	<li>
		<strong>ROCP和ILO<a href="https://bbs.elecfans.com/zhuti_1472_1.html" target="_blank"><u>AD</u></a></strong>：ROCP和ILOAD电阻应尽量靠近IC。</li>
	<li>
		<strong>ILOAD_IN</strong>：连接一个10kΩ电阻到地。</li>
</ol><h2>
	四、总结</h2>
<p>
	MAX16545B/C集成断路器IC为12V电源总线提供了全面、高效的保护解决方案。其丰富的保护机制、高精度的电流感应和灵活的配置方式，使其适用于服务器、网络、存储、<a href="https://www.elecfans.com/v/tag/1301/" target="_blank"><u>通信</u></a>设备和<a href="https://m.hqchip.com/app/1703" target="_blank"><u>AC</u></a>/<a href="https://m.hqchip.com/app/1703" target="_blank"><u>DC</u></a>电源等多种应用场景。在设计过程中，合理选择电容、二极管，优化PCB布局，能充分发挥该IC的性能，确保系统的稳定运行。大家在实际应用中，是否遇到过类似IC的使用问题呢？欢迎在评论区分享交流。</p>]]></description></item><item>    <title><![CDATA[英飞特电子荣获2025年度“智光杯”多项行业大奖]]></title>    <link>https://www.elecfans.com/d/7641912.html</link>    <guid>https://www.elecfans.com/d/7641912.html</guid>    <pubDate>2026-02-06 16:25:00</pubDate>    <description><![CDATA[<p style="text-indent:2em;">
	近日，第九届<a href="https://bbs.elecfans.com/group_57" target="_blank"><u>物联网</u></a>照明大会暨“智光杯”优秀会员典礼在上海隆重举行。本次大会以“<a href="https://www.elecfans.com/tags/ai/" target="_blank"><u>AI</u></a>+健康互联助力照明产业升级”为主题，共同探讨物联网时代照明产业的高质量与可持续发展。典礼上，备受瞩目的2025年度“智光杯”系列奖项正式揭晓。</p>
<p style="text-indent:2em;">
	英飞特电子凭借其在产品研发、项目实践与创新方面的综合突出表现，荣获“低碳照明专项奖”、“智能照明十佳案例示范奖”等多个奖项。</p>
<p style="text-indent:2em;">
	低碳照明专项奖</p>
<p style="text-indent:2em;">
	英飞特自主研发的 IT 0-10 P67系列<a href="https://bbs.elecfans.com/group_941" target="_blank"><u>LED驱动</u></a><a href="https://www.hqchip.com/app.html" target="_blank"><u>电源</u></a>，是面向道路照明的高性能电源解决方案。该系列产品以96%超高效率、智能精准的调光控制，系统化降低照明能耗与全生命周期碳足迹，树立行业内的绿色环保标杆。</p>
<p style="text-indent:2em;">
	智能照明十佳案例示范奖</p>
<p style="text-indent:2em;">
	英飞特主导的“四川成都天府新区重点道路照明节能改造项目”，是大型新区市政照明智能化升级的标杆案例。项目对区内路灯进行了智能化改造，显著提升了城市公共照明管理效率与能源利用水平，为新城区的绿色、智慧化运营提供了坚实支撑，成为物联网技术在市政领域规模化、创新性应用的标杆。</p>
<p style="text-indent:2em;">
	此次获奖，不仅是对英飞特电子在智能照明与物联网领域卓越技术实力与标杆实践成果的充分肯定，更是对其持续推动绿色照明产业进步所作贡献的高度认可。</p>
<p style="text-indent:2em;">
	未来，英飞特将不断强化照明系统解决方案能力，通过提供<a href="https://www.hqchip.com/app/1721" target="_blank"><u>LED</u></a>驱动电源、<a href="https://www.elecfans.com/v/tag/117/" target="_blank"><u>传感器</u></a>、<a href="https://www.elecfans.com/v/tag/8966/" target="_blank"><u>控制系统</u></a>及LED模组等一体化产品组合与照明系统解决方案，持续为客户创造价值。</p>
<p style="text-indent:2em;">
	英飞特电子（杭州）股份有限公司，是全球领先的照明系统解决方案提供商，依托LED驱动电源、传感器、控制系统以及LED模组等核心组件的深度协同，为全球客户提供值得信赖的一站式照明解决方案。</p>]]></description></item><item>    <title><![CDATA[AI赋能的Experian模型风险管理助手荣膺2026年BIG创新奖]]></title>    <link>https://www.elecfans.com/d/7641911.html</link>    <guid>https://www.elecfans.com/d/7641911.html</guid>    <pubDate>2026-02-06 16:26:00</pubDate>    <description><![CDATA[<p>
	Experian今日宣布，其近期推出的<a href="https://www.elecfans.com/tags/ai/" target="_blank"><u>AI</u></a>驱动型Experian模型风险管理助手模型风险管理助手荣获2026年BIG创新奖“创新产品”类别奖项。该奖项自2014年设立以来，面向全球表彰各行业的创新先行者，重点认可其在推动卓越创新方面的表现，以及为客户、利益相关方及所在社区持续创造的价值。</p>
<p>
	完全集成于Experian Ascend Platform™，并采用ValidMind技术驱动，Experian模型风险管理助手可加快模型验证进程，提升审计可核查性，并有效降低合规与监管风险。通过提供标准化模板、集中化文档管理以及高效的工作流审批机制，该解决方案帮助金融机构在当前以AI为核心的模型开发环境中，更从容地满足监管指引要求。</p>
<p>
	Experian Software Solu<a href="https://bbs.elecfans.com/group_715" target="_blank"><u>ti</u></a>ons全球解决方案与分析执行副总裁Vijay Mehta表示：“AI驱动的数据分析与模型开发正在为金融机构释放前所未有的业务潜力，但与此同时，也带来了不容忽视的挑战——全球监管环境对文档合规提出了耗时且复杂的要求。Experian模型风险管理助手通过端到端的模型文档自动化，有效缓解了这一高度依赖人力和资源的合规负担。本次获奖，正是对该解决方案为客户创造实际价值的有力肯定。”</p>
<p>
	根据Experian于2025年针对全球500余家金融机构开展的研究，约三分之二的受访机构（67%）表示，在满足本国监管要求方面仍面临显著挑战；同时，79%的机构指出，监管机构就监管关注事项和合规问题的沟通频率较一年前明显提高。挑战进一步加剧的是，仍有60%的金融机构在合规工作中完全依赖人工流程。另有超过70%的大型企业表示，其模型文档合规工作目前需要50人以上参与。</p>
<p>
	Mehta表示：“Experian模型风险管理助手通过在信贷与风险全生命周期中提供具备可扩展性和可解释性的AI能力，有效回应了金融机构面临的现实痛点。借助该解决方案，金融机构得以推进模型文档与风险管理实践的现代化进程，从容应对<a href="https://www.elecfans.com/soft/data/42-102/" target="_blank"><u>AI技术</u></a>与监管要求的快速演进。”</p>
<p>
	2026年BIG创新奖由多位资深商业领袖与企业高管组成的评审委员会评定，评审维度涵盖可量化的业绩成果、负责任的实施能力，以及对未来工作方式和组织文化的引领潜力。</p>
<p>
	审核编辑 黄宇</p>]]></description></item><item>    <title><![CDATA[德赛西威整车区域控制器ZCU获得多个主机厂定点]]></title>    <link>https://www.elecfans.com/d/7641913.html</link>    <guid>https://www.elecfans.com/d/7641913.html</guid>    <pubDate>2026-02-06 16:27:00</pubDate>    <description><![CDATA[<p style="text-indent:2em;">
	近日，德赛西威整车区域<a href="https://www.hqchip.com/app/1716" target="_blank"><u>控制器</u></a>（以下简称“ZCU”）获得多个主机厂定点，该产品以“区域集成”创新理念，高度集成了车身舒适控制（灯光、雨刮、门窗）、<a href="https://www.hqchip.com/app/1720" target="_blank"><u>以太网</u></a>网关、无钥匙进入及启动系统（PEPS）、电子驻车（EPB）、空气悬架控制及智能配电等关键功能，助力客户实现<a href="https://bbs.elecfans.com/group_78" target="_blank"><u>汽车电子</u></a><a href="https://m.elecfans.com/v/tag/2364/" target="_blank"><u>电气</u></a>架构的跨越式升级。</p>
<p style="text-indent:2em;">
	在汽车智能化产业变革中，德赛西威始终立足于行业前沿，不断研发满足未来出行需要的域控制器产品技术解决方案，此次整车区域控制器获得多个主机厂认可，也标志着德赛西威的技术实力与产品竞争力，已实现除座舱域和智驾域外又一核心领域的全面覆盖。</p>
<p style="text-indent:2em;">
	德赛西威ZCU平台可为整车性能提升与用户体验优化提供强劲支撑：</p>
<p style="text-indent:2em;">
	车身与底盘控制功能的高度集成，可显著降低硬件数量，大幅简化线束复杂度，在实现车身轻量化设计的同时，有效优化生产成本，为车企降本增效提供有效助力；</p>
<p style="text-indent:2em;">
	高算力集中优势带来强大的本地化数据处理能力，可有效打破“信息孤岛”，实现区域内功能的深度联动与智能交互，助力OTA无感升级，支持整车功能的持续迭代与刷新，从而为用户打造更流畅、更便捷的智能化科技体验；</p>
<p style="text-indent:2em;">
	德赛西威ZCU平台内置HSM安全核，严格符合ISO 26262功能安全标准与ISO 21434网络安全标准，真正做到了安全可靠，助力客户实现更高级别智能驾驶需求。</p>
<p style="text-indent:2em;">
	随着汽车电子电气架构向集中化方向加速演进，跨域融合已成为突破智能化瓶颈的核心命题，整车区域控制器承担着多项‌电子控制‌功能，需要匹配众多外部通讯<a href="https://m.hqchip.com/app/1787" target="_blank"><u>接口</u></a>，才能实现各模块的统一管理、联动控制。德赛西威依托覆盖座舱域、智驾域和整车区域控制器的全栈研发能力，可为不同车型定制高度适配的一体化前沿多域融合Onebox解决方案，有效助力车企降低研发与生产成本、缩短项目周期，实现车型的快速迭代升级。</p>]]></description></item><item>    <title><![CDATA[破壁而联：疆鸿智能PROFIBUS与ETHERCAT的全流程智联]]></title>    <link>https://www.elecfans.com/d/7641914.html</link>    <guid>https://www.elecfans.com/d/7641914.html</guid>    <pubDate>2026-02-06 16:28:00</pubDate>    <description><![CDATA[<p>
	破壁而联：疆鸿智能PROFIBUS与ETHERCAT的全流程智联<br/>
	在钢铁生产线上，连铸机与热轧机的高效协同是保障连续生产的关键。传统模式下，采用PROFIBUS协议的连铸<a href="https://www.elecfans.com/v/tag/8966/" target="_blank"><u>控制系统</u></a>与基于ETHERCAT协议的轧线传动系统，如同使用不同语言的团队，难以实现数据的实时、精准交互，时常导致生产节拍中断、能效损失与质量控制滞后。构建一个无缝的数据通道，成为实现全流程数字化协同的迫切需求。</p>
<p>
	<img src="https://file1.elecfans.com/web3/M00/4B/12/wKgZPGmFpTyAKGaJACoiRo6verM626.png" alt="wKgZPGmFpTyAKGaJACoiRo6verM626.png"/></p>
<p>
	此时，部署一台支持多主站架构的PROFIBUS转ETHERCAT网关，便成为破题的核心。该网关专业设计为同时服务于两侧主站：其一端作为PROFIBUS从站，精准捕获连铸机的钢坯速度、温度及切割状态；</p>
<p>
	另一端则作为ETHERCAT从站，将处理后的数据实时馈入轧机的运动<a href="https://www.hqchip.com/app/1716" target="_blank"><u>控制器</u></a>。其优势在于内核协议转换的深度解耦能力，它不仅完成了<a href="https://m.hqchip.com/app/1072" target="_blank"><u>信号</u></a>的物理翻译，更实现了两种实时<a href="https://www.hqchip.com/app/1720" target="_blank"><u>以太网</u></a>在<a href="https://www.elecfans.com/tags/时钟/" target="_blank"><u>时钟</u></a>同步、数据帧结构与诊断机制上的有机融合。这一过程确保了微秒级的数据交换与纳秒级的时钟抖动控制，使跨系统的控制指令如同在同一<a href="https://www.elecfans.com/tags/神经网络/" target="_blank"><u>神经网络</u></a>中脉动式流动。</p>
<p>
	应用该网关后，效果显著且直接。连铸产出与轧制入口实现了真正的“软连接”，钢坯得以在最优温度区间内无缝衔接进入轧制，大幅减少了加热炉的冗余能耗。生产节奏的波动被平滑，设备综合利用率（OEE）获得有效提升。更重要的是，全流程数据的贯通为高级排产与预防性维护提供了坚实基础，使得整条产线从“分段自动化”迈向“一体化智能控制”，在稳定提升产能的同时，持续赋能于钢铁制造的精细化与绿色化转型。<br/><br/>
	审核编辑 黄宇</p>]]></description></item><item>    <title><![CDATA[智能显示MCU D12x系列芯片在家电HMI上的应用]]></title>    <link>https://www.elecfans.com/d/7641916.html</link>    <guid>https://www.elecfans.com/d/7641916.html</guid>    <pubDate>2026-02-06 16:29:00</pubDate>    <description><![CDATA[<p>
	匠芯创Ar<a href="https://bbs.elecfans.com/group_715" target="_blank"><u>tI</u></a>nChip D12x系列芯片是一款基于<a href="https://bbs.elecfans.com/zhuti_riscvmcu_1.html" target="_blank"><u>RISC-V</u></a>架构的工业级高性能<a href="https://www.hqchip.com/app/1380" target="_blank"><u>微控制器</u></a>芯片（<a href="https://www.hqchip.com/app/1379" target="_blank"><u>MCU</u></a>），专为<a href="https://www.elecfans.com/soft/data/21-22/" target="_blank"><u>嵌入式</u></a>应用设计，特别适合智能家电中的人机交互界面。该系列芯片具备丰富的互联功能模块、强大的计算处理能力、优越的图形显示能力以及低功耗特性，是智能家电HMI解决方案的理想选择。</p>
<p>
	<img src="https://file1.elecfans.com/web3/M00/4A/FE/wKgZPGmFVGOATOdfAAbjA2n2gmc354.png" alt="wKgZPGmFVGOATOdfAAbjA2n2gmc354.png"/></p>
<p>
	<br/>
	D12x 智能家电HMI解决方案</p>
<p>
	<img src="https://file1.elecfans.com/web3/M00/4A/FE/wKgZPGmFVHOAT04BAALHyNq_W2o332.png" alt="wKgZPGmFVHOAT04BAALHyNq_W2o332.png"/></p>
<p>
	1.高性能计算处理能力<br/>
	D12x系列芯片<a href="https://m.elecfans.com/v/tag/132/" target="_blank"><u>cpu</u></a>主频高达400MHz，能够支持复杂的用户界面和触摸交互。这使得智能家电能够流畅地运行高级图形界面，处理用户输入和数据传输等任务。</p>
<p>
	<br/>
	2. 丰富的图形引擎<br/>
	D12x系列芯片集成了高性能的图形加速器，支持2D图形渲染。这使得HMI可以呈现丰富的视觉效果和动态动画，提高用户体验。例如，用户在调整温度或洗涤模式时，可以看到实时变化的界面反馈。</p>
<p>
	<br/>
	3.低功耗设计<br/>
	在智能家电应用中，能效是一个重要考量，D12x系列芯片采用先进的低功耗设计，使得设备在待机模式下消耗极低的<a href="https://www.elecfans.com/tags/电流/" target="_blank"><u>电流</u></a>，从而延长设备的使用寿命，尤其是在电池供电的便携设备中表现突出。</p>
<p>
	<br/>
	4.多种<a href="https://m.hqchip.com/app/1787" target="_blank"><u>接口</u></a>支持<br/>
	D12x系列芯片支持多种显示和<a href="https://www.elecfans.com/v/tag/13179/" target="_blank"><u>通信接口</u></a>（如RGB888、QSPI、SPI、<a href="https://www.elecfans.com/tags/i2c/" target="_blank"><u>I2C</u></a>、<a href="https://www.elecfans.com/tags/uart/" target="_blank"><u>UART</u></a>等），便于与其他硬件（如<a href="https://www.elecfans.com/v/tag/117/" target="_blank"><u>传感器</u></a>、显示器、触控模块、WIFI/BT等）进行连接。这种灵活性使得系统设计更加简单，提升了开发效率。</p>
<p>
	<br/>
	5.触控支持<br/>
	芯片支持多点触控技术，可以实现手势识别和触摸交互，进一步提升用户体验。无论是简单的按钮操作还是复杂的滑动手势，D12x系列都能提供准确的响应。</p>
<p>
	<br/>
	6.安全性与稳定性<br/>
	该系列芯片集成了硬件安全模块，能够有效保护用户数据与设备安全。这对于智能家电尤其重要，因为这些设备通常连接到家庭网络，需要防止潜在的网络攻击。</p>
<p>
	<br/>
	7.开发生态支持<br/>
	匠芯创为D12x系列芯片提供丰富的开发工具和支持，包括点/调屏工具、SN烧录工具、量产老化工具、软件开发包（<a href="https://www.hqchip.com/app/1522" target="_blank"><u>SD</u></a>K）、参考设计和技术支持。这使得<a href="https://bbs.elecfans.com/group_1231" target="_blank"><u>开发者</u></a>能够快速上手，并减少产品上市的时间。</p>
<p>
	<br/>
	D12x 智能家电应用案例</p>
<p>
	<img src="https://file1.elecfans.com/web3/M00/4A/FF/wKgZPGmFVICAf60HAAE6PABxvNI812.png" alt="wKgZPGmFVICAf60HAAE6PABxvNI812.png"/></p>
<p>
	在智能家电设备中，D12x系列芯片可以实现以下功能：</p>
<p>
	<br/><strong>冰箱：</strong>通过触控屏幕，用户可以直观地分区查看食物存储情况、调整温度、设置保鲜模式等。</p>
<p>
	<br/><strong>空调：</strong>用户可以通过HMI界面调整温度、风速、运行模式等。视觉图形反馈可以实时显示环境温度、湿度、空气新鲜度等信息，提高用户的使用便利性。</p>
<p>
	<br/><strong>洗衣机：</strong>通过图形化的界面，用户可以轻松选择不同的洗涤程序，实时查看洗涤状态，并通过触控或语音进行操作。</p>
<p>
	<br/><strong>咖啡机：</strong>通过触控屏幕，用户可以选择咖啡口味，可以更加便捷的查看制作流程和等待时间。<br/>
	</p>
<p>
	<br/>
	交流邮箱：sales09@suncewin.com<br/><br/><br/>
	审核编辑 黄宇</p>]]></description></item><item>    <title><![CDATA[深度解析MAX16550A：12V电源保护的理想之选]]></title>    <link>https://www.elecfans.com/d/7641923.html</link>    <guid>https://www.elecfans.com/d/7641923.html</guid>    <pubDate>2026-02-06 16:30:00</pubDate>    <description><![CDATA[<input type="hidden" id="annex0_7641923" value="https://file1.elecfans.com/web2/M00/8F/19/pYYBAGPg8R-AA_mHABhvqOR4Gb8962.pdf"/><h1>
	深度解析MAX16550A/MAX16550B：12V<a href="https://www.hqchip.com/app.html" target="_blank"><u>电源</u></a>保护的理想之选</h1>
<p>
	在电子设备的设计中，12V电源的保护至关重要。今天我们就来详细探讨一下<a href="https://bbs.elecfans.com/group_264" target="_blank"><u>Maxim</u></a>推出的MAX16550A/MAX16550B这两款集成保护IC，看看它们是如何为12V电源系统提供高效、可靠的保护方案的。</p>
<p>
	文件下载：<a href="javascript:;" data-annex="annex0_7641923" target="_blank">MAX16550A.pdf</a></p>
<h2>
	一、产品概述</h2>
<p>
	MAX16550A/MAX16550B是专为12V电源总线设计的集成电源保护IC，它们集功率监控、控制和保护功能于一身，通过内置的低导通电阻功率<a href="https://www.elecfans.com/tags/mosfet/" target="_blank"><u>MOSFET</u></a>作为断开开关，有效限制了分配给负载的最大功率。同时，采用了Maxim专利的无损<a href="https://www.elecfans.com/tags/电流/" target="_blank"><u>电流</u></a><a href="https://bbs.elecfans.com/zhuti_control_1.html" target="_blank"><u>传感技术</u></a>，实现了<a href="https://m.hqchip.com/app/1252" target="_blank"><u>高精度</u></a>的电流测量，并且集成了PMBus/SMBus<a href="https://m.hqchip.com/app/1787" target="_blank"><u>接口</u></a>，方便进行数字控制和监控。</p>
<h3>
	（一）产品特性</h3>
<ol><li>
		<strong>三种选择</strong>：MAX16550A提供30A保护和8A启动电流；MAX16550B提供30A保护和16A启动电流。</li>
	<li>
		<strong>高密度封装</strong>：30A应用时仅4mm x 4.5mm，不到传统解决方案板面积的25%。</li>
	<li>
		<strong>集成功能丰富</strong>：集成了功率、控制和监控功能，内部<a href="https://m.hqchip.com/app/1700" target="_blank"><u>LDO</u></a>提供1.8V偏置电源，无需外部偏置电源，适用于热插拔应用。</li>
	<li>
		<strong>精准电流传感</strong>：采用无损电流传感技术，在负载和温度变化时仍能提供高精度的电流测量，提高了系统能源效率，降低了功耗。</li>
	<li>
		<strong>多重保护机制</strong>：提供过流、过压、欠压、过温等多重保护功能，检测到故障时能快速关断。</li>
	<li>
		<strong>可<a href="https://www.elecfans.com/v/tag/1315/" target="_blank"><u>编程</u></a>软启动</strong>：通过设置软启动斜坡和延迟，限制启动时的浪涌电流。</li>
	<li>
		<strong>PMBus/SMBus接口</strong>：支持数字控制和监控，可实现系统电源的高级管理。</li>
</ol><h3>
	（二）应用领域</h3>
<p>
	广泛应用于服务器、网络、存储、<a href="https://www.elecfans.com/v/tag/1301/" target="_blank"><u>通信</u></a>设备以及<a href="https://m.hqchip.com/app/1703" target="_blank"><u>AC</u></a>/<a href="https://m.hqchip.com/app/1703" target="_blank"><u>DC</u></a>电源等领域。</p>
<h2>
	二、<a href="https://m.elecfans.com/v/tag/2364/" target="_blank"><u>电气</u></a>特性</h2>
<h3>
	（一）电源参数</h3>
<ul><li>
		<strong>输入电压范围</strong>：10.8V - 13.2V，确保在一定电压波动范围内稳定工作。</li>
	<li>
		<strong>器件供电电流</strong>：FET关断时为3.0 - 6.25mA；FET导通且输出电流为0A时为3.7 - 6.75mA；FET导通且输出电流为30A时为10mA。</li>
</ul><h3>
	（二）LDO输出电压</h3>
<p>
	LDO输出电压范围为1.76 - 1.94V，具有一定的迟滞特性，确保电源稳定。</p>
<h3>
	（三）欠压锁定</h3>
<ul><li>
		<strong>输入欠压锁定阈值</strong>：可编程，通过<a href="https://www.hqchip.com/app/485" target="_blank"><u>电阻</u></a>分压器实现，上升阈值为0.95 - 1.05V，迟滞为50mV。</li>
	<li>
		<strong>响应时间</strong>：从EN/UVLO = 0V到FET关断的响应时间为2µs。</li>
</ul><h3>
	（四）过流保护</h3>
<ul><li>
		<strong>三种过流保护级别</strong>：分别为启动过流保护、适度过流保护和严重过流保护。启动过流保护在启动期间有效，当负载电流超过阈值时，集成的功率FET在10µs内关断；适度过流保护阈值可通过ROCP引脚<a href="https://www.elecfans.com/analog/" target="_blank"><u>模拟</u></a>编程，范围为15 - 35A；严重过流保护阈值通过PMBus数字编程，检测到故障后在5µs内关断FET。</li>
	<li>
		<strong>安全过流保护</strong>：内部固定阈值为60A，检测到故障后在250ns内关断FET。</li>
</ul><h3>
	（五）软启动</h3>
<ul><li>
		软启动放电电阻为1 - 2kΩ，充电电流为20 - 39µA。</li>
	<li>
		软启动<a href="https://www.elecfans.com/tags/电容/" target="_blank"><u>电容</u></a>值范围为0 - 75nF，可线性调整启动斜坡。</li>
	<li>
		软启动时间可根据电容值和输出电流进行调整，例如CSS = 0nF且IOUT = 0A时，软启动时间为1ms。</li>
</ul><h3>
	（六）其他特性</h3>
<p>
	还包括FET VGS欠压锁定、过温保护、过压保护（仅MAX16550A）等功能，确保在各种异常情况下保护系统安全。</p>
<h2>
	三、<a href="https://m.elecfans.com/v/tag/773/" target="_blank"><u>工作原理</u></a></h2>
<h3>
	（一）启动过程</h3>
<p>
	当12V电源电压足够高以保证LDO正常工作时，IC启用集成的1.8V VDD LDO。VDD有效后，IC读取SMBus_ID编程电阻值设置PMBus地址并初始化，同时对<a href="https://www.hqchip.com/app/1715" target="_blank"><u>栅极驱动</u></a>电源电容进行充电。完成这些操作后，可通过使能输入（EN/UVLO）控制IC启动。</p>
<h3>
	（二）自检测过程</h3>
<p>
	在启动过程中，IC会进行自检测，包括输出电压自检测和软启动电容放电检测。如果输出电压在规定时间内未低于编程的输出欠压锁定阈值，或者软启动电容电压未低于软启动阈值，IC会判定为故障，锁定功率FET并拉低FAULT和PWRGD引脚。</p>
<h3>
	（三）保护机制</h3>
<ul><li>
		<strong>过流保护</strong>：实时监测负载电流，根据不同的过流保护级别采取相应的措施。</li>
	<li>
		<strong>过压保护</strong>：仅MAX16550A具备，当输入电压超过过压保护阈值时，锁定功率FET并报告故障。</li>
	<li>
		<strong>欠压保护</strong>：当输入或输出电压低于编程的欠压锁定阈值时，拉低PWRGD<a href="https://m.hqchip.com/app/1072" target="_blank"><u>信号</u></a>。</li>
	<li>
		<strong>过温保护</strong>：当结温超过可编程阈值时，锁定功率FET并拉低FAULT输出。</li>
</ul><h2>
	四、编程与配置</h2>
<h3>
	（一）模拟编程</h3>
<ul><li>
		<strong>适度过流保护阈值</strong>：通过ROCP引脚连接的电阻进行模拟编程。</li>
	<li>
		<strong>软启动斜坡速率</strong>：通过选择合适的软启动电容（CSS）值进行编程。</li>
	<li>
		<strong>输入欠压锁定阈值</strong>：通过电阻分压器设置。</li>
</ul><h3>
	（二）数字编程</h3>
<ul><li>
		<strong>PMBus地址</strong>：通过外部电阻编程为16个值之一。</li>
	<li>
		<strong>严重过流保护阈值、启动延迟、输出PWRGD阈值、自检测阈值、过温警告和故障阈值等</strong>：通过PMBus<a href="https://www.elecfans.com/tags/寄存器/" target="_blank"><u>寄存器</u></a>进行数字编程。</li>
</ul><h2>
	五、布局建议</h2>
<h3>
	（一）电源引脚</h3>
<ul><li>
		<strong>VIN和VOUT</strong>：使用宽而多的VIN和VOUT平面，减少输入和输出走线电感，提高热性能。使用多个过孔连接层间电源平面，将输入和输出电容尽可能靠近IC放置。</li>
	<li>
		<strong>VDD</strong>：在顶层添加VDD平面，将VDD电容靠近IC去耦，形成更紧密的接地回路，同时将VDD接地端远离输出电容接地端。</li>
</ul><h3>
	（二）接地</h3>
<p>
	从顶层的接地引脚（引脚13）通过至少两个过孔连接到下层接地层，使用约1mm宽、7mm长的走线。在第二层IC封装正下方设置禁布区，禁布区应超出IC封装约30mils。</p>
<h3>
	（三）其他引脚</h3>
<ul><li>
		<strong>VBST和SS</strong>：将VBST和SS电容放置在顶层并尽可能靠近引脚。</li>
	<li>
		<strong>ROCP和ILO<a href="https://bbs.elecfans.com/zhuti_1472_1.html" target="_blank"><u>AD</u></a></strong>：将ROCP和ILOAD电阻尽可能靠近IC放置。</li>
</ul><h2>
	六、总结</h2>
<p>
	MAX16550A/MAX16550B以其丰富的功能、高精度的电流传感和多重保护机制，为12V电源系统提供了全面、可靠的保护解决方案。在实际设计中，<a href="https://m.elecfans.com/v/tag/125/" target="_blank"><u>电子工程师</u></a>可以根据具体应用需求，合理配置和编程IC，同时遵循布局建议，以确保系统的稳定性和可靠性。你在使用类似的电源保护IC时遇到过哪些问题呢？欢迎在评论区分享交流。</p>]]></description></item><item>    <title><![CDATA[探索MAX16543：高功率12V总线集成保护IC的卓越性能]]></title>    <link>https://www.elecfans.com/d/7641925.html</link>    <guid>https://www.elecfans.com/d/7641925.html</guid>    <pubDate>2026-02-06 16:30:00</pubDate>    <description><![CDATA[<input type="hidden" id="annex0_7641925" value="https://file1.elecfans.com/web2/M00/A6/93/wKgaomUVbDKAIhkXACLCuvD4N9s082.pdf"/><h1>探索MAX16543：高功率12V总线集成保护IC的卓越性能</h1>
<p>在<a href="https://m.elecfans.com/v/tag/125/" target="_blank"><u>电子工程师</u></a>的日常工作中，为高功率12V总线系统寻找合适的保护方案是一项关键任务。今天，我们将深入探讨<a href="https://bbs.elecfans.com/group_264" target="_blank"><u>Maxim</u></a>推出的MAX16543集成保护IC，它与MAX16545B/MAX16545C搭配使用，能为系统提供强大的保护和出色的性能。</p><p>文件下载：<a href="javascript:;" data-annex="annex0_7641925" target="_blank">MAX16543.pdf</a></p>
<h2>一、MAX16543概述</h2>
<p>MAX16543是一款集成跟随器保护IC，与MAX16545B/MAX16545C主集成保护IC并联使用，用于系统12V总线的分配、控制、监控和保护。它能增加MAX16545B/MAX16545C的<a href="https://www.elecfans.com/tags/电流/" target="_blank"><u>电流</u></a>能力，最多可添加两个MAX16543到一个MAX16545B/MAX16545C IC上，提供超过60A的直流电流能力。其1.8V偏置<a href="https://www.hqchip.com/app.html" target="_blank"><u>电源</u></a>和<a href="https://www.hqchip.com/app/1715" target="_blank"><u>栅极驱动</u></a>电压电源由MAX16545B/MAX16545C供电。</p>
<h2>二、功能与特性</h2>
<h3>（一）高功率负载保护</h3>
<p>与MAX16545B/MAX16545C配合，可为12V总线上超过60A的负载提供集成保护。采用12引脚QFN封装，具有高密度的特点，是业界最小的断路器解决方案，可节省超过75%的电路板面积。其集成的功率<a href="https://www.elecfans.com/tags/mosfet/" target="_blank"><u>MOSFET</u></a>在12V电源路径中的总电阻仅为1.5mΩ（包括封装），不包括任何并联设备。</p>
<h3>（二）精确的电流传感与报告</h3>
<p>具备Maxim专利的无损电流<a href="https://bbs.elecfans.com/zhuti_control_1.html" target="_blank"><u>传感技术</u></a>，可通过MAX16545B/MAX16545C IC实现<a href="https://m.hqchip.com/app/1252" target="_blank"><u>高精度</u></a>的电流传感。MAX16543将其电流报告给MAX16545B/MAX16545C，由后者报告总电流。同时支持PMBus/SMBus控制和报告，方便<a href="https://bbs.elecfans.com/zhuti_lecture_1.html" target="_blank"><u>工程师</u></a>进行系统监控和管理。</p>
<h3>（三）多重保护机制</h3>
<ol>
<li><strong>过流保护（OCP）</strong>：具有三级过流保护，包括可<a href="https://www.elecfans.com/v/tag/1315/" target="_blank"><u>编程</u></a>的适度OCP、可编程的严重OCP（隔离时间&lt;5μs）和故障安全OCP（隔离时间&lt;250ns），能有效保护系统免受过载故障的影响。</li>
<li><strong>过温保护（OTP）</strong>：当结温超过过温保护阈值（130 - 146°C）时，IC会锁定集成FET关闭，并将FAULT输出置低，向MAX16545B/MAX16545C报告故障。</li>
<li><strong>输入输出电压故障保护</strong>：由MAX16545B/MAX16545C提供芯片组输入和输出电压故障保护，根据电路条件和命令<a href="https://m.hqchip.com/app/1072" target="_blank"><u>信号</u></a>启用和禁用MAX16543。</li>
</ol>
<h3>（四）模块化设计</h3>
<p>MAX16545B/MAX16545C可与单个或两个MAX16543并联，提供不同的直流电流能力。例如，MAX16545B/MAX16545C + 1 MAX16543具有90A的直流能力，MAX16545B/MAX16545C + 2 MAX16543则具有120A的直流能力。</p>
<h2>三、<a href="https://m.elecfans.com/v/tag/2364/" target="_blank"><u>电气</u></a>特性</h2>
<h3>（一）电压与电流参数</h3>
<ol>
<li><strong>电源电压</strong>：VIN的直流范围为 -0.3V至 +16V，150μs时可达 +22V；VDD偏置电源引脚电压范围为 -0.3V至 +2.5V。</li>
<li><strong>输入输出电流</strong>：在FET导通且IOUT = 0A时，VIN的电源电流典型值为1.3mA，VDD的电源电流典型值为1.7mA。</li>
</ol>
<h3>（二）保护阈值</h3>
<ol>
<li><strong>过流保护阈值</strong>：MAX16543安全OCP阈值为66 - 86A，安全OCP延迟为250ns。</li>
<li><strong>过温保护阈值</strong>：OTP阈值为130 - 146°C。</li>
</ol>
<h3>（三）电流报告</h3>
<p>线性电压范围为0 - 1.35V，单个MAX16543设备的线性IOUT报告电流范围为0 - 35A，IOUT报告增益为5μA/A。</p>
<h2>四、典型工作特性</h2>
<p>文档中给出了多种典型工作特性曲线，如启动控制、过流保护等。例如，在启动控制方面，展示了通过EN/UVLO和VIN控制启动的不同情况，包括无负载和带负载（如10Ω<a href="https://www.hqchip.com/app/485" target="_blank"><u>电阻</u></a>负载）的启动过程。这些曲线有助于工程师了解芯片在不同条件下的工作状态，为实际应用提供参考。</p>
<h2>五、引脚配置与描述</h2>
<h3>（一）引脚配置</h3>
<p>MAX16543采用12引脚QFN封装，引脚包括VIN（1 - 3脚）、VOUT（4, 5脚）、VBST（6脚）、I.C.（7脚）、VDD（8脚）、ILO<a href="https://bbs.elecfans.com/zhuti_1472_1.html" target="_blank"><u>AD</u></a>（9脚）、EN（10脚）、FAULT（11脚）和GND（12脚）。</p>
<h3>（二）引脚功能</h3>
<ol>
<li><strong>电源引脚</strong>：VIN为12V输入电源引脚，VOUT为12V输出电源引脚；VBST为集成FET栅极驱动的电源引脚，需连接到MAX16545B/MAX16545C的VBST引脚，并在VBST和VOUT之间放置1μF旁路<a href="https://www.elecfans.com/tags/电容/" target="_blank"><u>电容</u></a>。</li>
<li><strong>控制与<a href="https://www.elecfans.com/v/tag/1301/" target="_blank"><u>通信</u></a>引脚</strong>：EN为使能引脚，连接到MAX16545B/MAX16545C的PWRGD引脚；FAULT为故障通信双向引脚，用于指示/接收锁存故障的检测，需连接到MAX16545B/MAX16545C的FAULT引脚，并通过10kΩ电阻连接到系统偏置电源轨。</li>
<li><strong>电流报告引脚</strong>：ILOAD为负载电流的<a href="https://www.elecfans.com/analog/" target="_blank"><u>模拟</u></a>电流表示引脚，通过500Ω电阻连接到MAX16545B/MAX16545C的ILOAD_IN引脚。</li>
</ol>
<h2>六、<a href="https://m.elecfans.com/v/tag/773/" target="_blank"><u>工作原理</u></a></h2>
<h3>（一）启动过程</h3>
<p>MAX16545B/MAX16545C控制输出电压斜坡，MAX16543在输出电压稳定且MAX16545B/MAX16545C的电源良好信号变为高电平时才会被启用。</p>
<h3>（二）系统电流分配</h3>
<p>总输入电流在MAX16543和MAX16545B/MAX16545C之间的分配由两者的导通电阻决定。在典型工作条件下，MAX16543的RDS_ON为1.5mΩ（包括封装电阻），MAX16545B/MAX16545C的RDS_ON为0.9mΩ（包括封装电阻）。</p>
<h3>（三）故障保护</h3>
<ol>
<li><strong>VDD UVLO保护</strong>：MAX16543的偏置电源由MAX16545B/MAX16545C提供，它会实时监控VDD电压。当VDD在正常运行期间低于VDD UVLO阈值时，MAX16543会关闭，一旦VDD恢复正常且无其他故障检测到，它会立即恢复工作。</li>
<li><strong>VBOOST、VGS UVLO保护</strong>：升压电压由MAX16543提供，当EN和FAULT高于使能阈值时，MAX16543会检查VBOOST UVLO，并在设备启用期间保持激活状态。</li>
<li><strong>过流检测（Safe OCP）</strong>：MAX16543具有本地独立的过流保护功能，当负载电流超过安全OCP阈值时，它会关闭集成FET，将FAULT置低，并向MAX16545B/MAX16545C报告故障。</li>
</ol>
<h2>七、设计要点</h2>
<h3>（一）电容选择</h3>
<ol>
<li><strong>输入电容（CIN）</strong>：强烈建议使用输入电容，以确保输入电压稳定且无噪声。对于不需要在MAX16545B/MAX16545C + MAX16543系统之前使用输入电容的应用，输入电压纹波应小于300mV峰 - 峰值。</li>
<li><strong>输出电容（COUT）</strong>：最大输出电容可通过公式 (C<em>{OUT }=fr<a href="https://m.hqchip.com/app/1703" target="_blank"><u>ac</u></a>{INRUSH × C</em>{SS}}{I_{SS}}) 计算，其中CSS为软启动编程电容，ISS为软启动电流（典型值为30μA），IINRUSH为启动期间所需的最大浪涌电流。同时，建议输出电容小于10mF，以防止在启动到预充电输出时误触发自检。</li>
</ol>
<h3>（二）<a href="https://m.hqchip.com/app/1554" target="_blank"><u>二极管</u></a>选择</h3>
<ol>
<li><strong>输入<a href="https://m.hqchip.com/app/1587" target="_blank"><u>TVS</u></a>二极管</strong>：在输入处使用瞬态电压抑制（TVS）二极管是必要的，以将输入电压瞬变钳位在VIN引脚的额定范围内。建议选择反向关断电压（<a href="https://www.elecfans.com/v/tag/3668/" target="_blank"><u>VR</u></a>WM）≥系统工作电压（典型值为12V）、峰值脉冲电流（IPPM）≥系统最大瞬态峰值脉冲电流（典型值为90A/120A）、钳位电压（VC）≤系统最大电压处理能力（典型值为22V，持续150μs）的TVS二极管，如2 × SMCJ13A。</li>
<li><strong>输出<a href="https://www.hqchip.com/app/1558" target="_blank"><u>肖特基</u></a>二极管</strong>：在输出处使用肖特基二极管可将负输出电压尖峰钳位在VOUT引脚的绝对最大额定值内。应选择具有低正向电压降（VF）和峰值正向浪涌电流（IFSM）高于预期电感电流的肖特基二极管。</li>
</ol>
<h3>（三）布局建议</h3>
<ol>
<li><strong>VIN和VOUT</strong>：使用宽而多的VIN和VOUT平面，以最小化输入和输出走线电感，实现最佳的热性能。使用多个过孔连接层间电源平面，并将输入和输出电容尽可能靠近IC放置。</li>
<li><strong>VBST和SS</strong>：将VBST和SS电容放置在顶层，尽可能靠近引脚。</li>
<li><strong>VDD</strong>：在顶层添加VDD平面，将VDD电容靠近IC去耦，形成更紧密的接地回路。创建一个安静的接地走线/平面，将VDD接地和GND引脚连接在一起。</li>
<li><strong>ROCP和ILOAD</strong>：将ROCP和ILOAD电阻尽可能靠近IC放置。</li>
</ol>
<h2>八、总结</h2>
<p>MAX16543集成保护IC以其出色的性能和丰富的功能，为高功率12V总线系统提供了可靠的保护解决方案。它与MAX16545B/MAX16545C的协同工作，能够满足不同应用场景下的电流需求，并通过多重保护机制确保系统的稳定性和安全性。在实际设计中，工程师需要根据具体需求合理选择电容、二极管，并遵循布局建议，以充分发挥MAX16543的优势。你在使用类似保护IC时遇到过哪些问题呢？欢迎在评论区分享你的经验和见解。 </p>]]></description></item><item>    <title><![CDATA[MAX16545B：12V总线集成保护IC的全面解析]]></title>    <link>https://www.elecfans.com/d/7641926.html</link>    <guid>https://www.elecfans.com/d/7641926.html</guid>    <pubDate>2026-02-06 16:30:00</pubDate>    <description><![CDATA[<input type="hidden" id="annex0_7641926" value="https://file1.elecfans.com/web2/M00/8E/95/poYBAGPg8SWACXa_AEjI9CplzXg330.pdf"/><h1>
	MAX16545B/C：12V总线集成保护IC的全面解析</h1>
<p>
	在<a href="https://m.elecfans.com/v/tag/125/" target="_blank"><u>电子工程师</u></a>的日常设计中，对于12V<a href="https://www.hqchip.com/app.html" target="_blank"><u>电源</u></a>总线的保护和管理是一个关键环节。今天我们要深入探讨的是<a href="https://bbs.elecfans.com/group_65" target="_blank"><u>Analog</u></a> Devices推出的MAX16545B/C集成保护IC，它为12V电源系统提供了一站式的解决方案，涵盖了保护、监测和控制等多个功能。</p>
<p>
	文件下载：<a href="javascript:;" data-annex="annex0_7641926" target="_blank">MAX16545B.pdf</a></p>
<h2>
	产品概述</h2>
<p>
	MAX16545B/C是一款专为12V电源总线设计的集成断路器IC，适用于电源永久连接或仅在输入侧进行连接和断开的应用场景。它集成了低导通电阻的功率<a href="https://www.elecfans.com/tags/mosfet/" target="_blank"><u>MOSFET</u></a>、无损<a href="https://www.elecfans.com/tags/电流/" target="_blank"><u>电流</u></a>感应电路以及PMBus/SMBus<a href="https://m.hqchip.com/app/1787" target="_blank"><u>接口</u></a>，实现了对电源的高效监测、控制和保护。</p>
<h3>
	产品特性亮点</h3>
<ul><li>
		<strong>高集成度与小尺寸</strong>：采用22 FCQFN封装，尺寸仅为6.5mm x 4mm，却能提供高达60A的电流处理能力，相比传统解决方案，大幅节省了电路板面积。</li>
	<li>
		<strong>无损电流感应</strong>：通过专有技术实现了<a href="https://m.hqchip.com/app/1252" target="_blank"><u>高精度</u></a>的电流感应，提高了系统的能量效率，降低了功耗。</li>
	<li>
		<strong>多级别过流保护</strong>：提供可<a href="https://www.elecfans.com/v/tag/1315/" target="_blank"><u>编程</u></a>的中度OCP、严重OCP和安全OCP三个级别的过流保护，确保在不同过流情况下快速响应，保护设备安全。</li>
	<li>
		<strong>PMBus/SMBus接口</strong>：支持数字控制和监测，方便<a href="https://bbs.elecfans.com/zhuti_lecture_1.html" target="_blank"><u>工程师</u></a>进行远程配置和状态监控。</li>
</ul><h2>
	<a href="https://m.elecfans.com/v/tag/773/" target="_blank"><u>工作原理</u></a>与启动过程</h2>
<h3>
	工作原理</h3>
<p>
	MAX16545B/C通过集成的N沟道功率MOSFET作为断开开关，结合FET<a href="https://www.elecfans.com/soft/data/4-10/" target="_blank"><u>控制电路</u></a>和内部<a href="https://m.hqchip.com/app/1700" target="_blank"><u>LDO</u></a>，实现了对电源的有效管理。内部的无损电流感应技术能够实时监测负载电流，为过流保护提供准确的数据。</p>
<h3>
	启动过程</h3>
<p>
	启动过程是一个关键环节，涉及多个步骤和条件判断。当12V电源电压足够高以保证LDO正常工作时，MAX16545B/C会使能内部的1.8V VDD LDO。VDD有效后，设备读取SMBus_ID编程<a href="https://www.hqchip.com/app/485" target="_blank"><u>电阻</u></a>值来设置SMBus地址，并进行初始化。在此期间，<a href="https://www.hqchip.com/app/1715" target="_blank"><u>栅极驱动</u></a>电源电容会完全充电。之后，设备可以通过使能输入（EN/UVLO）进行控制。</p>
<p>
	在启动过程中，需要注意软启动和安全工作区（SOA）的问题。软启动通过对CSS<a href="https://www.elecfans.com/tags/电容/" target="_blank"><u>电容</u></a>的充电来实现输出电压的缓慢上升，避免过大的浪涌电流。同时，要确保FET在启动过程中处于安全工作区内，防止设备损坏。MAX16545B的默认启动OCP为16A，MAX16545C为24A，启动OCP阈值应根据实际情况进行合理设置。</p>
<h2>
	保护机制详解</h2>
<h3>
	过流保护</h3>
<p>
	过流保护是MAX16545B/C的核心功能之一，它提供了三个级别的保护措施，确保在不同程度的过流情况下设备的安全。</p>
<ul><li>
		<strong>中度OCP</strong>：通过连接到ROCP引脚的外部电阻进行编程，允许在一定时间内通过浪涌电流。如果负载电流超过中度OCP阈值且持续时间超过设定的超时时间，集成的功率MOSFET将被锁定关闭。</li>
	<li>
		<strong>严重OCP</strong>：相对于中度OCP阈值进行编程，当负载电流超过严重OCP阈值时，设备会在10μs内将功率MOSFET关闭。</li>
	<li>
		<strong>安全OCP</strong>：具有内部固定的阈值，当负载电流超过该阈值时，设备会在250ns内迅速关闭功率MOSFET，提供最快的保护响应。</li>
</ul><h3>
	欠压锁定（UVLO）</h3>
<p>
	MAX16545B/C实现了VDD_UVLO和VIN_UVLO的故障监测和保护。VDD_UVLO会实时监测VDD电压，只有当VDD_UVLO条件清除后，启动过程才会开始。如果在正常运行过程中VDD低于VDD_UVLO阈值，设备将关闭。VIN_UVLO则通过EN/UVLO引脚监测12V输入电压，当电压低于设定的阈值时，功率MOSFET将关闭，PWRGD<a href="https://m.hqchip.com/app/1072" target="_blank"><u>信号</u></a>将被拉低。</p>
<h3>
	过温保护（OTP）</h3>
<p>
	过温保护是为了防止设备在高温环境下损坏。当结温超过可编程的故障阈值时，IC会锁定集成的功率MOSFET关闭，并将FAULT输出拉低。要重新启用IC，可以通过切换EN/UVLO或VIN，或者通过OPERA<a href="https://bbs.elecfans.com/group_715" target="_blank"><u>TI</u></a>ON命令进行重启。</p>
<h3>
	自检测功能</h3>
<p>
	在每次启动时，MAX16545B/C会执行自检测程序，包括对输出电压、软启动电容和ROCP值的检查。如果输出电压在自检测过程中低于设定的阈值，自检测被认为通过，设备将继续启动。如果软启动电容的电压在规定时间内未低于软启动阈值，设备将锁定功率MOSFET关闭并拉低FAULT引脚。同时，设备会实时检查ROCP值，确保中度OCP阈值的正确选择。</p>
<h2>
	配置与编程</h2>
<h3>
	<a href="https://www.elecfans.com/analog/" target="_blank"><u>模拟</u></a>编程</h3>
<ul><li>
		<strong>中度OCP阈值</strong>：通过连接到ROCP引脚的电阻进行编程，根据公式(I<em>{OCP}=fr<a href="https://m.hqchip.com/app/1703" target="_blank"><u>ac</u></a>{V</em>{OCPM}}{R<em>{OCP}} × G</em>{OCP})和(R<em>{OCP}=frac{V</em>{OCPM}}{I<em>{OCP}} × G</em>{OCP})可以计算出所需的电阻值。</li>
	<li>
		<strong>软启动电容CSS</strong>：CSS电容连接在MOSFET的栅极和地之间，通过固定<a href="https://www.hqchip.com/app/1725" target="_blank"><u>电流源</u></a>进行充电，实现输出电压的线性上升。软启动时间和电压上升速率可以通过选择合适的CSS电容值进行编程。</li>
</ul><h3>
	PMBus编程</h3>
<p>
	MAX16545B/C支持通过PMBus进行数字编程，可对多个参数进行配置，如启动OCP阈值、严重OCP阈值、输入过压阈值、过温警告和故障阈值等。工程师可以根据实际需求，在操作前通过PMBus设置这些参数，以满足不同应用场景的要求。</p>
<h2>
	外部元件选择</h2>
<h3>
	输入电容（CIN）</h3>
<p>
	为了保证输入电压的稳定和无噪声，建议使用输入电容。对于不需要在MAX16545B/C之前使用输入电容的应用，输入电压纹波应小于300mV峰 - 峰值。</p>
<h3>
	输出电容（COUT）</h3>
<p>
	最大输出电容可以根据公式(C<em>{OUT}=frac{(I</em>{INRUSH } × C<em>{SS})}{I</em>{SS}})进行计算。在选择输出电容时，要确保设计的最大浪涌电流小于启动OCP，并且在启动SOA范围内。同时，建议输出电容小于10mF，以防止在启动到预充电输出时自检测误触发。</p>
<h3>
	输入<a href="https://m.hqchip.com/app/1587" target="_blank"><u>TVS</u></a><a href="https://m.hqchip.com/app/1554" target="_blank"><u>二极管</u></a></h3>
<p>
	在输入侧使用瞬态电压抑制（TVS）二极管是必要的，它可以将输入电压瞬态限制在MAX16545B/C的VIN引脚额定值范围内。选择TVS二极管时，应满足反向关断电压（<a href="https://www.elecfans.com/v/tag/3668/" target="_blank"><u>VR</u></a>WM）≥ 12V，峰值脉冲电流（IPPM）≥ 60A，钳位电压（VC）≤ 22V（150µs）的条件。</p>
<h3>
	输出<a href="https://www.hqchip.com/app/1558" target="_blank"><u>肖特基</u></a>二极管</h3>
<p>
	在输出侧使用肖特基二极管可以将负输出电压尖峰限制在MAX16545B/C的VOUT引脚额定值范围内。选择时应考虑低正向电压降（VF）和峰值正向浪涌电流（IFSM）高于预期电感电流的二极管。</p>
<h2>
	布局建议</h2>
<h3>
	电源平面</h3>
<p>
	为了实现最佳的热性能，应使用宽且多层的VIN和VOUT平面，以最小化输入和输出的走线电感。同时，使用多个过孔连接不同层的电源平面，确保电源的稳定传输。</p>
<h3>
	接地</h3>
<p>
	从顶层的接地引脚（引脚13）到第二层的AGND岛应使用约0.1mm宽、0.7mm长的走线，以保证良好的接地性能。</p>
<h3>
	其他元件</h3>
<p>
	VBST和SS电容应尽可能靠近引脚放置在顶层。VDD应在顶层添加一个平面，用于解耦靠近IC的VDD电容，形成更紧密的接地回路。ROCP和ILO<a href="https://bbs.elecfans.com/zhuti_1472_1.html" target="_blank"><u>AD</u></a>电阻应尽可能靠近IC放置，ILOAD_IN引脚应连接一个10kΩ的电阻到地。</p>
<h2>
	总结</h2>
<p>
	MAX16545B/C集成保护IC为12V电源总线提供了一个功能强大、高度集成的解决方案。它的多种保护机制、灵活的配置方式以及完善的监测功能，使得工程师在设计12V电源系统时能够更加轻松地实现对电源的高效管理和保护。在实际应用中，合理选择外部元件和优化电路板布局是确保设备性能和稳定性的关键。希望通过本文的介绍，能够帮助电子工程师更好地理解和应用MAX16545B/C这款优秀的产品。你在使用类似产品时遇到过哪些挑战呢？欢迎在评论区分享你的经验和想法。</p>]]></description></item><item>    <title><![CDATA[CDCBT1001：高性能时钟缓冲器与电平转换器的深度解析]]></title>    <link>https://www.elecfans.com/d/7641928.html</link>    <guid>https://www.elecfans.com/d/7641928.html</guid>    <pubDate>2026-02-06 16:30:00</pubDate>    <description><![CDATA[<input type="hidden" id="annex0_7641928" value="https://file1.elecfans.com/web3/M00/4B/12/wKgZPGmFpDeARse8AA7VreHB7ls188.pdf"/><h1>C<a href="https://m.hqchip.com/app/1703" target="_blank"><u>DC</u></a>BT1001：高性能<a href="https://www.elecfans.com/tags/时钟缓冲器/" target="_blank"><u>时钟缓冲器</u></a>与电平<a href="https://www.hqchip.com/app/1718" target="_blank"><u>转换器</u></a>的深度解析</h1>
<p>在电子设计的领域中，<a href="https://www.elecfans.com/tags/时钟/" target="_blank"><u>时钟</u></a>缓冲器和电平转换器是不可或缺的关键组件。今天，我们就来深入探讨<a href="https://www.elecfans.com/tags/德州仪器/" target="_blank"><u>德州仪器</u></a>（<a href="https://bbs.elecfans.com/group_715" target="_blank"><u>TI</u></a>）的CDCBT1001，一款1.2V至3.3V的时钟缓冲器和电平转换器，看看它能为我们的设计带来哪些优势。</p><p>文件下载：<a href="javascript:;" data-annex="annex0_7641928" target="_blank">cdcbt1001.pdf</a></p>
<h2>1. 产品特性亮点</h2>
<h3>低抖动与相位噪声</h3>
<p>CDCBT1001在时钟<a href="https://m.hqchip.com/app/1072" target="_blank"><u>信号</u></a>处理方面表现卓越，具备极低的附加抖动和相位噪声。在输出频率为24MHz时，12kHz至5MHz的最大附加<a href="https://m.hqchip.com/app/1718" target="_blank"><u>RMS</u></a>抖动仅为0.8ps，1kHz偏移处的最大相位噪声为 -120dBc/Hz，当偏移频率大于等于1MHz时，最大相位噪声本底为 -148dBc/Hz。如此出色的性能，能够有效确保时钟信号的稳定性和准确性，对于对时钟精度要求极高的应用场景来说，无疑是一个理想的选择。</p>
<h3>快速的上升/下降时间</h3>
<p>该器件的20%至80%上升/下降时间仅为5ns，这意味着它能够快速响应时钟信号的变化，有效减少信号传输过程中的延迟和失真，从而提高系统的整体性能。</p>
<h3>低功耗设计</h3>
<p>在功耗方面，CDCBT1001也有着出色的表现。它的<a href="https://www.elecfans.com/tags/电流/" target="_blank"><u>电流</u></a>消耗较低，能够在满足系统性能需求的同时，有效降低功耗，延长设备的续航时间，这对于电池供电的设备尤为重要。</p>
<h3>宽工作温度范围</h3>
<p>CDCBT1001的工作温度范围为 -40°C至85°C，这使得它能够在各种恶劣的环境条件下稳定工作，大大提高了设备的可靠性和适用性。</p>
<h3>灵活的输出频率</h3>
<p>从工作频率的角度来看，该器件具有很高的灵活性。它可以根据实际应用需求，灵活调整输出频率，满足不同设备的时钟信号要求。</p>
<h2>2. 典型应用场景</h2>
<h3>个人电子设备中的<a href="https://www.elecfans.com/soft/data/30-91/" target="_blank"><u>FPGA</u></a>/<a href="https://m.hqchip.com/app/1381" target="_blank"><u>处理器</u></a></h3>
<p>在个人电子设备中，如<a href="https://m.elecfans.com/v/tag/11230/" target="_blank"><u>智能手机</u></a>、平板<a href="https://m.elecfans.com/v/tag/1247/" target="_blank"><u>电脑</u></a>等，FPGA和处理器的时钟信号需要精确的缓冲和电平转换。CDCBT1001凭借其低抖动、低功耗等特性，能够为这些设备提供稳定、准确的时钟信号，确保设备的正常运行。</p>
<h3>服务器和扩展卡中的1.2V时钟缓冲与转换</h3>
<p>在服务器和扩展卡中，时钟信号的稳定性和准确性对于系统的性能至关重要。CDCBT1001可以作为1.2V的时钟缓冲器和电平转换器，有效解决不同电压等级之间的信号转换问题，提高系统的兼容性和可靠性。</p>
<h2>3. 产品详细解析</h2>
<h3><a href="https://m.elecfans.com/v/tag/773/" target="_blank"><u>工作原理</u></a></h3>
<p>CDCBT1001通过VDD_IN引脚的供电电压来定义输入LVCMOS时钟电平，VDD_OUT引脚的供电电压来定义输出LVCMOS时钟电平。这种设计使得它能够在不同电压等级之间灵活转换，实现时钟信号的有效缓冲和电平转换。</p>
<h3>引脚配置与功能</h3>
<table>
<thead>
<tr>
<th>引脚名称</th>
<th>引脚编号</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>CLK_IN</td>
<td>1</td>
<td>I</td>
<td>时钟输入，接受LVCMOS输入时钟，可接受的电压电平由VDD_IN定义</td>
</tr>
<tr>
<td>CLK_OUT</td>
<td>4</td>
<td>O</td>
<td>时钟输出，输出LVCMOS时钟，输出电压电平由VDD_OUT定义</td>
</tr>
<tr>
<td>VDD_IN</td>
<td>5</td>
<td>P</td>
<td>输入<a href="https://www.hqchip.com/app.html" target="_blank"><u>电源</u></a>电压，可选择1.2V、1.8V、2.5V或3.3V ± 10%</td>
</tr>
<tr>
<td>VDD_OUT</td>
<td>2</td>
<td>P</td>
<td>输出电源电压，可选择1.2V、1.8V、2.5V或3.3V ± 10%</td>
</tr>
<tr>
<td>GND</td>
<td>3</td>
<td>G</td>
<td>接地</td>
</tr>
</tbody>
</table>
<h3><a href="https://m.elecfans.com/v/tag/2364/" target="_blank"><u>电气</u></a>特性</h3>
<ul>
<li><strong>绝对最大额定值</strong>：该器件在工作自由空气温度范围内，各个引脚的电压、电流等参数都有明确的最大额定值。例如，VDD_IN和VDD_OUT的电源电压范围为 -0.5V至3.63V，输入电压和输出电压也有相应的限制。在实际应用中，必须严格遵守这些额定值，否则可能会导致器件永久性损坏。</li>
<li><strong><a href="https://m.hqchip.com/app/1587" target="_blank"><u>ESD</u></a> 评级</strong>：CDCBT1001具有一定的静电放电保护能力，人体模型（HBM）的ESD电压为 ±2000V，充电设备模型（CDM）的ESD电压为 ±1000V。这表明该器件能够在一定程度上抵御静电的冲击，提高了产品的可靠性。</li>
<li><strong>推荐工作条件</strong>：在推荐的工作条件下，CDCBT1001能够发挥最佳性能。例如，VDD_IN和VDD_OUT的输入/输出电源电压分别有多个可选范围，环境温度范围为 -40°C至85°C。在实际设计中，应尽量使器件工作在这些推荐条件下。</li>
<li><strong>热特性</strong>：了解器件的热特性对于确保其稳定工作至关重要。CDCBT1001的DPW（X2SON）封装具有不同的热阻参数，如结到环境的热阻为462.7℃/W，结到外壳（顶部）的热阻为227.7℃/W等。在设计散热系统时，需要根据这些参数进行合理规划。</li>
<li><strong>电气参数</strong>：该器件的各项电气参数也非常出色。例如，在不同的时钟频率和负载条件下，其电流消耗较低；输入和输出的电压、电流、<a href="https://www.elecfans.com/tags/电容/" target="_blank"><u>电容</u></a>等参数也都符合设计要求；时钟输出的上升/下降时间、传播延迟、抖动和相位噪声等性能指标都表现优异。</li>
</ul>
<h2>4. 设计与布局建议</h2>
<h3>电源供应</h3>
<p>TI建议在每个VDD引脚附近放置一个0.1µF的旁路电容，以减少电源噪声对器件的影响，提高电源的稳定性。</p>
<h3>布局准则</h3>
<p>为了确保器件的可靠性和性能，在布局时需要遵循一些常见的印刷电路板布局准则。例如，在电源上使用旁路电容，尽量缩短走线长度以避免过多的负载等。同时，文档中还给出了DPW（X2SON - 5）封装的示例布局，我们可以参考这个示例进行实际设计。</p>
<h2>5. 总结</h2>
<p>CDCBT1001作为一款高性能的时钟缓冲器和电平转换器，具有低抖动、低功耗、宽工作温度范围和灵活输出频率等诸多优点。它在个人电子设备、服务器和扩展卡等领域都有着广泛的应用前景。在实际设计中，我们需要充分了解其特性和参数，遵循设计和布局建议，以确保该器件能够在系统中发挥最佳性能。你在使用类似的时钟缓冲器和电平转换器时，有没有遇到过什么问题呢？欢迎在评论区分享你的经验和见解。 </p>]]></description></item><item>    <title><![CDATA[LMX1204：高性能低噪声时钟利器的深度剖析]]></title>    <link>https://www.elecfans.com/d/7641931.html</link>    <guid>https://www.elecfans.com/d/7641931.html</guid>    <pubDate>2026-02-06 16:30:00</pubDate>    <description><![CDATA[<input type="hidden" id="annex0_7641931" value="https://file1.elecfans.com/web3/M00/49/31/wKgZPGl3FWKABZERADGDPOqPtFo483.pdf"/><h1>LMX1204：高性能低噪声<a href="https://www.elecfans.com/tags/时钟/" target="_blank"><u>时钟</u></a>利器的深度剖析</h1>
<h2>引言</h2>
<p>在当今高速电子系统设计中，时钟<a href="https://m.hqchip.com/app/1072" target="_blank"><u>信号</u></a>的质量对系统性能起着至关重要的作用。低噪声、高频率的<a href="https://www.elecfans.com/tags/时钟缓冲器/" target="_blank"><u>时钟缓冲器</u></a>、乘法器和分频器成为了<a href="https://bbs.elecfans.com/zhuti_lecture_1.html" target="_blank"><u>工程师</u></a>们提升系统性能的关键元件。今天，我们就来深入探讨一款备受关注的产品——LMX1204，看看它能为我们的设计带来哪些惊喜。</p><p>文件下载：<a href="javascript:;" data-annex="annex0_7641931" target="_blank">lmx1204.pdf</a></p>
<h2>一、LMX1204核心特性</h2>
<h3>（一）频率范围与低噪声性能</h3>
<p>LMX1204的输出频率范围覆盖了300MHz至12.8GHz，如此宽广的频率范围使其能够适应多种不同的应用场景。更值得一提的是它的低噪声特性，在6GHz输出时，噪声基底低至 -161dBc/Hz，1/f噪声为 -154dBc/Hz（10kHz偏移），抖动仅为5fs（12kHz至20MHz），附加抖动小于30fs（<a href="https://m.hqchip.com/app/1703" target="_blank"><u>DC</u></a>至fCLK）。这些优秀的指标意味着什么呢？对于高速数据转换器来说，低噪声和低抖动的时钟信号能够显著提高数据采样的精度和可靠性，减少信号失真，进而提升整个系统的性能。</p>
<h3>（二）丰富的时钟输出与灵活配置</h3>
<p>它拥有4个高频时钟输出以及对应的SYSREF输出，还有独立的<a href="https://www.elecfans.com/tags/Cirrus logic/" target="_blank"><u>LOGIC</u></a>LK输出和相应的SYSREF输出。高频时钟输出共享一个分频器，支持÷1（缓冲模式）、÷2、3、4、5、6、7和8的分频，以及基于PLL的乘法器，支持x1（<a href="https://www.elecfans.com/tags/滤波器/" target="_blank"><u>滤波器</u></a>模式）、x2、x3和x4的乘法。LOGICLK输出有单独的分频器，预分频器支持÷1、2、4，后分频器支持÷1（旁路）、2至1023。这种丰富的配置方式让工程师可以根据实际需求灵活调整时钟频率，满足不同设备对时钟信号的要求。</p>
<h3>（三）同步与延时调节功能</h3>
<p>SYSREF时钟输出具有同步功能，在12.8GHz下有508个延时步长调节，每个步长小于2.5ps。它支持发生器和中继器模式，还具备SYSREFREQ引脚的窗口功能，可优化时序。SYNC功能则可以对所有分频器和多个设备进行同步，确保系统中各个时钟信号的相位一致性，这对于多设备协同工作的系统至关重要。</p>
<h2>二、应用领域广泛</h2>
<h3>（一）测试与测量领域</h3>
<p>在<a href="https://www.elecfans.com/v/tag/577/" target="_blank"><u>示波器</u></a>、无线设备测试仪和宽带数字化仪等设备中，精确的时钟信号是保证测量精度的关键。LMX1204的低噪声和高频率特性能够为这些设备提供稳定可靠的时钟源，减少测量误差，提高测量结果的准确性。</p>
<h3>（二）航空航天与国防领域</h3>
<p>雷达、电子战、寻的前端、弹药以及相控阵<a href="https://bbs.elecfans.com/group_1219" target="_blank"><u>天线</u></a>/波束形成等系统对时钟信号的要求极高。LMX1204能够在恶劣的环境条件下提供高质量的时钟信号，确保系统的稳定性和可靠性，满足航空航天与国防领域的严格要求。</p>
<h3>（三）通用领域</h3>
<p>在数据转换器时钟和时钟缓冲分配/分频等应用中，LMX1204的灵活性和高性能使其成为理想的选择。它可以为数据转换器提供精确的时钟信号，保证数据转换的准确性和效率，同时也可以用于时钟信号的分配和分频，满足不同设备对时钟频率的需求。</p>
<h2>三、引脚配置与功能详解</h2>
<h3>（一）引脚类型与功能</h3>
<p>该芯片采用RHA（VQFN，40）封装，不同的引脚具有不同的功能。例如，CLKIN引脚是差分参考输入时钟，需要进行适当的<a href="https://m.hqchip.com/app/1703" target="_blank"><u>AC</u></a><a href="https://www.elecfans.com/tags/耦合/" target="_blank"><u>耦合</u></a>和端接处理；CLKOUT引脚是差分时钟输出，每个引脚是集电极开路输出，具有可<a href="https://www.elecfans.com/v/tag/1315/" target="_blank"><u>编程</u></a>的输出摆幅；CS#引脚是SPI芯片选择，用于<a href="https://m.hqchip.com/app/1730" target="_blank"><u>控制芯片</u></a>的<a href="https://www.elecfans.com/v/tag/1301/" target="_blank"><u>通信</u></a>。</p>
<h3>（二）特殊引脚的使用注意事项</h3>
<p>BIAS01和BIAS23引脚在使用乘法器时需要进行旁路处理，以获得最佳的噪声性能。SYSREFREQ引脚支持单端或差分输入，可用于SYNC、SYSREF请求和SYSREF窗口化等功能，使用时需要注意其输入电压范围和偏置设置。</p>
<h2>四、规格参数分析</h2>
<h3>（一）<a href="https://m.elecfans.com/v/tag/2364/" target="_blank"><u>电气</u></a>特性</h3>
<p>从电气特性来看，芯片的功耗会随着不同的工作模式和负载情况而变化。例如，所有输出和SYSREF开启时，功耗为1050mA；所有输出开启但SYSREF关闭时，功耗为600mA；所有输出和SYSREF关闭时，功耗为265mA；掉电模式下功耗仅为11mA。在设计<a href="https://www.hqchip.com/app.html" target="_blank"><u>电源</u></a>时，需要根据实际的使用情况来选择合适的电源方案，以确保芯片的稳定运行。</p>
<h3>（二）绝对最大额定值与<a href="https://m.hqchip.com/app/1587" target="_blank"><u>ESD</u></a>评级</h3>
<p>了解芯片的绝对最大额定值和ESD评级对于正确使用芯片至关重要。绝对最大额定值规定了芯片正常工作的电压、温度等参数范围，超出这些范围可能会导致芯片永久性损坏。ESD评级则表明了芯片对静电放电的耐受能力，在使用和处理芯片时，需要采取适当的防静电措施，以避免静电对芯片造成损害。</p>
<h3>（三）推荐工作条件</h3>
<p>推荐工作条件为我们提供了芯片最佳的工作环境参数。例如，电源电压推荐为2.4V至2.6V，环境温度范围为 -40°C至85°C，结温不超过125°C。在设计时，应尽量使芯片工作在推荐的条件下，以保证芯片的性能和可靠性。</p>
<h2>五、详细功能描述</h2>
<h3>（一）上电复位</h3>
<p>芯片上电时，上电复位（POR）会将所有<a href="https://www.elecfans.com/tags/寄存器/" target="_blank"><u>寄存器</u></a>重置为默认状态，同时重置所有状态机和分频器。在这种状态下，所有SYSREF输出被禁用，所有分频器被旁路，芯片作为一个4输出缓冲器工作。建议在电源轨稳定后等待100µs再对其他寄存器进行编程，以确保复位操作完成。此外，通过SPI总线写RESET = 1进行软件复位也是一种常见的做法，复位位在写入其他寄存器时会自动清除。</p>
<h3>（二）<a href="https://www.elecfans.com/tags/温度传感器/" target="_blank"><u>温度传感器</u></a></h3>
<p>芯片的结温可以通过温度传感器进行读取，这对于一些需要根据温度进行调整的应用非常有用。我们可以根据读取的结温来调整CLKOUTx_PWR以稳定输出功率，或者使用外部或数字延迟来补偿温度变化引起的传播延迟变化。</p>
<h3>（三）时钟输出</h3>
<h4>1. 时钟输出缓冲器</h4>
<p>时钟输出缓冲器采用集电极开路输出和集成上拉<a href="https://www.hqchip.com/app/485" target="_blank"><u>电阻</u></a>的结构，类似于CML。通过CLKOUTx_EN位可以启用输出缓冲器，CLKOUTx_PWR字段可以单独设置输出功率。但需要注意的是，这些字段只控制输出缓冲器，要关闭整个通道路径，需要禁用CHx_EN位。</p>
<h4>2. 时钟MUX</h4>
<p>四个主时钟的频率可以通过CLK_MUX字段进行选择，支持缓冲模式、分频模式和乘法器模式。在不同的模式下，时钟频率可以进行相应的调整，以满足不同的应用需求。</p>
<h4>3. 时钟分频器</h4>
<p>将CLK_MUX设置为分频模式后，可以通过CLK_DIV字段设置分频值。当输入频率发生变化时，需要将CLK_DIV_<a href="https://www.elecfans.com/tags/rs/" target="_blank"><u>RS</u></a>T位从1切换到0，以确保分频器正常工作。</p>
<h4>4. 时钟乘法器和滤波器模式</h4>
<p>时钟乘法器可以将输入时钟频率乘以1、2、3或4倍。乘法器基于PLL，包含一个集成的VCO，需要进行校准和锁定检测。在滤波器模式（x1乘法器）下，乘法器可以作为一个可编程滤波器，衰减PLL环路带宽（约10MHz）之外的噪声、杂散、谐波和次谐波。</p>
<h3>（四）SYSREF功能</h3>
<p>SYSREF可以产生一个低频率的JESD204B/C兼容信号，该信号可以重新时钟到主时钟或LOGICLK输出。SYSREF输出可以配置为发生器模式或中继器模式，通过内部的SYSREF分频器或复制SYSREFREQ引脚的信号来产生。每个输出都有独立的延迟控制，可以通过软件进行调整。</p>
<h3>（五）SYNC功能</h3>
<p>SYNC功能允许用户对CLK_DIV、LOGICLK_DIV、LOGICLK_DIV_PRE、SYSREF_DIV、SYSREF_DIV_PRE和SYSREF_DELAY_DIV分频器进行同步，确保不同设备之间的相位偏移在电源周期之间保持一致。这种同步功能对于多设备协同工作的系统非常重要，可以提高系统的稳定性和可靠性。</p>
<h2>六、寄存器映射与编程</h2>
<h3>（一）寄存器概述</h3>
<p>LMX1204有多个寄存器用于配置和控制芯片的各种功能。例如，R0寄存器用于控制电源下电、复位和乘法器模式校准；R2寄存器用于设置状态机时钟的预分频器和使能状态机时钟发生器。</p>
<h3>（二）编程注意事项</h3>
<p>在编程时，需要按照推荐的初始化编程顺序进行操作。通常从写入R0寄存器开始，设置RESET = 0x1，然后按照降序写入所需的寄存器。对于一些特定功能的寄存器，如果不使用该功能或者所需的值与复位值相同，则可以跳过这些寄存器的写入。同时，要注意避免写入未记录的寄存器地址，以免导致芯片无法正常工作。</p>
<h2>七、应用与实现建议</h2>
<h3>（一）SYSREFREQ输入配置</h3>
<p>SYSREFREQ引脚支持单端或差分输入，在AC或DC耦合模式下都可以使用。在设计输入电路时，需要根据不同的耦合方式和输入类型选择合适的电阻和<a href="https://www.elecfans.com/tags/电容/" target="_blank"><u>电容</u></a>，以确保输入信号的稳定性和准确性。</p>
<h3>（二）降低SYSREF共模电压</h3>
<p>对于一些需要较低SYSREF输出共模电压的数据转换器，可以使用电阻分压器来降低共模电压。但需要注意的是，负载会对输出的单端电压和共模电压产生影响，在选择电阻分压器的参数时，需要根据实际负载情况进行计算。</p>
<h3>（三）<a href="https://www.elecfans.com/tags/电流/" target="_blank"><u>电流</u></a>消耗与节能建议</h3>
<p>芯片的电流消耗会随着不同的配置而变化，在设计时应尽量优化配置，减少不必要的功能启用，以降低功耗。例如，在不需要发送SYSREF脉冲时，关闭SYSREF输出缓冲器可以有效节省电流。</p>
<h3>（四）布局与电源建议</h3>
<p>在布局时，应尽量缩短CLKIN引脚的走线长度，以获得最佳的相位噪声性能。同时，要确保所有Vcc引脚连接到稳定的电源，并进行适当的旁路处理。如果同时使用时钟和LOGICLK的电源引脚，建议使用小电阻或铁氧体磁珠进行隔离，以减少电源干扰。</p>
<h2>结论</h2>
<p>LMX1204凭借其出色的低噪声性能、宽广的频率范围、丰富的功能配置以及灵活的应用方式，成为了高速电子系统设计中一款不可或缺的时钟芯片。在实际应用中，我们需要深入理解其特性和功能，合理进行引脚配置和寄存器编程，同时注意布局和电源设计等方面的问题，以充分发挥其优势，为我们的设计带来更高的性能和可靠性。希望通过本文的介绍，能让大家对LMX1204有更深入的了解，在实际设计中能够更好地运用这款芯片。你在使用LMX1204或者类似芯片时遇到过哪些问题呢？欢迎在评论区分享交流。 </p>]]></description></item><item>    <title><![CDATA[LMK5B33216：以太网网络同步的高性能解决方案]]></title>    <link>https://www.elecfans.com/d/7641932.html</link>    <guid>https://www.elecfans.com/d/7641932.html</guid>    <pubDate>2026-02-06 16:30:00</pubDate>    <description><![CDATA[<input type="hidden" id="annex0_7641932" value="https://file1.elecfans.com/web3/M00/4B/13/wKgZO2mFpDuAcZuwAGBf-WGA154934.pdf"/><h1>LMK5B33216：<a href="https://www.hqchip.com/app/1720" target="_blank"><u>以太网</u></a>网络同步的高性能解决方案</h1>
<p>在以太网网络应用中，<a href="https://www.elecfans.com/tags/时钟/" target="_blank"><u>时钟</u></a>同步和抖动控制是确保数据准确传输和系统稳定运行的关键因素。<a href="https://bbs.elecfans.com/group_715" target="_blank"><u>TI</u></a>的LMK5B33216网络同步器凭借其卓越的性能和丰富的功能，成为了满足这些需求的理想选择。本文将深入探讨LMK5B33216的特性、应用、<a href="https://m.elecfans.com/v/tag/773/" target="_blank"><u>工作原理</u></a>以及设计要点，帮助<a href="https://m.elecfans.com/v/tag/125/" target="_blank"><u>电子工程师</u></a>更好地理解和应用这款产品。</p><p>文件下载：<a href="javascript:;" data-annex="annex0_7641932" target="_blank">lmk5b33216.pdf</a></p>
<h2>一、产品特性</h2>
<h3>超低抖动性能</h3>
<p>LMK5B33216采用了超低抖动的BAW VCO技术，在不同频率下都能实现出色的抖动表现。例如，在625MHz时，典型<a href="https://m.hqchip.com/app/1718" target="_blank"><u>RMS</u></a>抖动仅为13fs（搭配4MHz一阶<a href="https://www.elecfans.com/tags/高通/" target="_blank"><u>高通</u></a><a href="https://www.elecfans.com/tags/滤波器/" target="_blank"><u>滤波器</u></a>）；在312.5MHz时，典型RMS抖动为24fs（同样搭配4MHz一阶高通滤波器），最大RMS抖动为60fs。这种低抖动性能对于高速数据传输和<a href="https://m.hqchip.com/app/1252" target="_blank"><u>高精度</u></a>时钟应用至关重要。</p>
<h3>多PLL架构</h3>
<p>该器件集成了三个高性能数字锁相环（DPLL）和三个<a href="https://www.elecfans.com/analog/" target="_blank"><u>模拟</u></a>锁相环（APLL），提供了强大的时钟同步和频率合成能力。DPLL的可<a href="https://www.elecfans.com/v/tag/1315/" target="_blank"><u>编程</u></a>环路带宽范围从1mHz到4kHz，能够适应不同的应用场景。同时，小于1ppt的<a href="https://m.hqchip.com/app/1703" target="_blank"><u>DC</u></a>O频率调整步长，确保了精确的频率控制。</p>
<h3>灵活的输入输出配置</h3>
<p>LMK5B33216具有两个差分或单端DPLL输入，输入频率范围从1Hz（1PPS）到800MHz，支持数字保持和无缝切换功能。输出方面，它提供16个差分输出，支持可编程的H<a href="https://www.hqchip.com/app/1522" target="_blank"><u>SD</u></a>S、<a href="https://m.hqchip.com/app/1703" target="_blank"><u>AC</u></a>-LVPECL、LVDS和HSCL格式，输出频率范围从1Hz（1PPS）到1250MHz，还可通过配置实现多达20个总频率输出。此外，输出还支持PCIe Gen 1到6标准，满足了多种高速<a href="https://m.hqchip.com/app/1787" target="_blank"><u>接口</u></a>的需求。</p>
<h3>丰富的编程接口</h3>
<p>该器件支持<a href="https://www.elecfans.com/tags/i2c/" target="_blank"><u>I2C</u></a>、3线SPI或4线SPI编程接口，方便<a href="https://bbs.elecfans.com/zhuti_lecture_1.html" target="_blank"><u>工程师</u></a>进行灵活的配置和控制。同时，工作温度范围为 -40°C到85°C，适用于各种工业和<a href="https://www.elecfans.com/v/tag/1301/" target="_blank"><u>通信</u></a>环境。</p>
<h2>二、应用领域</h2>
<h3>有线网络</h3>
<p>在有线网络中，LMK5B33216可用于同步以太网（SyncE）、SONET/SDH等网络设备，提供高精度的时钟同步。它能够满足G.8262、G.813、GR-1244、GR-253等标准要求，确保网络设备之间的时钟同步精度。</p>
<h3>数据<a href="https://www.hqchip.com/tags" target="_blank"><u>中心</u></a>和企业计算</h3>
<p>在数据中心和企业计算领域，LMK5B33216可用于112G/22<a href="https://m.elecfans.com/v/tag/9979/" target="_blank"><u>4G</u></a> PAM - 4 SerDes、100G - 800G数据中心<a href="https://www.elecfans.com/v/tag/1392/" target="_blank"><u>交换机</u></a>、核心路由器和边缘路由器等设备，实现抖动清理、漂移衰减和参考时钟生成，提高数据传输的稳定性和可靠性。</p>
<h3>其他应用</h3>
<p>此外，LMK5B33216还可应用于智能网络接口卡（NIC）、光传输网络（OTN G.709）、宽带固定线路接入、工业测试和测量以及<a href="https://m.elecfans.com/v/tag/5891/" target="_blank"><u>医学成像</u></a>等领域。</p>
<h2>三、工作原理</h2>
<h3>PLL架构</h3>
<p>LMK5B33216的PLL架构包括三个DPLL和三个APLL，其中BAW APLL（APLL3）采用了TI的专有体声波（BAW）技术，具有超高的性能和极低的相位噪声。每个APLL可以由相应的DPLL控制，实现时钟的同步生成。DPLL的参考输入可以来自外部参考时钟或其他APLL的输出，通过可编程的参考输入选择器进行切换。</p>
<h3>参考输入监测和切换</h3>
<p>该器件的参考输入监测电路能够实时监测DPLL参考输入的状态，当检测到输入<a href="https://m.hqchip.com/app/1072" target="_blank"><u>信号</u></a>丢失或异常时，自动执行无缝切换，确保时钟输出的稳定性。同时，零延迟模式（ZDM）可以实现输入和输出之间的相位关系控制，满足特定应用的需求。</p>
<h3>输出时钟生成</h3>
<p>输出时钟通过输出<a href="https://www.elecfans.com/tags/多路复用器/" target="_blank"><u>多路复用器</u></a>从APLL/VCO域中选择，并经过输出分频器进行频率调整。输出分频器支持同步功能，可实现多个输出时钟的相位对齐。此外，每个输出时钟还可以进行可编程的延迟调整，进一步优化时钟信号的质量。</p>
<h2>四、设计要点</h2>
<h3><a href="https://www.hqchip.com/app.html" target="_blank"><u>电源</u></a>供应</h3>
<p>在设计中，要确保所有VDD核心电源和VDDO输出电源在PD#拉高之前上电，以触发内部上电复位（POR）。电源供应的斜坡时间应控制在0.01 - 100ms之间，避免非单调或缓慢的电源斜坡影响设备的正常启动。</p>
<h3>时钟输入和输出接口</h3>
<p>时钟输入和输出接口的设计要遵循推荐的接口和端接电路，确保信号的质量和稳定性。例如，对于参考输入，要根据输入类型选择合适的内部寄存器和开关设置，实现最佳的输入匹配。对于输出，要根据输出格式和负载要求选择合适的输出驱动和端接方式。</p>
<h3>布局和布线</h3>
<p>在<a href="https://m.elecfans.com/v/tag/82/" target="_blank"><u>PCB</u></a>布局中，要注意隔离输入、XO/OCXO/TCXO和输出时钟，避免不同频率的时钟信号相互干扰。同时，要合理放置旁路<a href="https://www.elecfans.com/tags/电容/" target="_blank"><u>电容</u></a>，确保电源的稳定性和低噪声。对于高速信号，要避免阻抗不连续性，保证信号的完整性。</p>
<h3>编程和配置</h3>
<p>通过I2C或SPI接口对LMK5B33216进行编程和配置时，要遵循相应的编程规范和流程。可以使用TICS Pro软件工具进行配置和生成<a href="https://www.elecfans.com/tags/寄存器/" target="_blank"><u>寄存器</u></a>设置，简化设计过程。同时，要注意EEP<a href="https://www.elecfans.com/tags/rom/" target="_blank"><u>ROM</u></a>的编程和使用，实现灵活的启动配置。</p>
<h2>五、总结</h2>
<p>LMK5B33216是一款功能强大、性能卓越的网络同步器，适用于各种以太网网络应用。其超低抖动性能、多PLL架构、灵活的输入输出配置和丰富的编程接口，为电子工程师提供了一个可靠的时钟解决方案。在设计应用中，要充分考虑电源供应、时钟接口、布局布线和编程配置等方面的要点，以确保设备的最佳性能和稳定性。你在使用LMK5B33216的过程中遇到过哪些问题呢？你又是如何解决的呢？欢迎在评论区分享你的经验和见解。 </p>]]></description></item><item>    <title><![CDATA[一文掌握瑞芯微RK系列NPU算子支持全景：覆盖6大平台，新增硬件加速算子，嵌入式AI开发不踩坑]]></title>    <link>https://www.elecfans.com/d/7401343.html</link>    <guid>https://www.elecfans.com/d/7401343.html</guid>    <pubDate>2026-02-06 16:33:00</pubDate>    <description><![CDATA[<div class="rich_media_content js_underline_content autoTypeSetting24psection">
	<h1>
		</h1>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span>在<a href="https://www.elecfans.com/soft/data/21-22/" target="_blank"><u>嵌入式</u></a></span></font><span><a href="https://www.elecfans.com/tags/ai/" target="_blank"><u>AI</u></a></span><font face="等线"><span>领域，<a href="https://bbs.elecfans.com/zhuti_1179_1.html" target="_blank"><u>瑞芯微</u></a>（</span></font><font face="Arial"><span><a href="https://bbs.elecfans.com/zhuti_1179_1.html" target="_blank"><u>Rockchip</u></a></span></font><font face="等线"><span>）</span></font><font face="Arial"><span>RK</span></font><font face="等线"><span>系列</span></font><font face="Arial"><span>NPU</span></font><font face="等线"><span>凭借低功耗、高兼容性的特性，广泛应用于智能监控、边缘计算、<a href="https://bbs.elecfans.com/group_57" target="_blank"><u>物联网</u></a>设备等场景。近期发布的《</span></font><font face="Arial"><span>RKNN Com<a href="https://www.elecfans.com/tags/pi/" target="_blank"><u>pi</u></a>ler Support Operator List v2.0.0-beta</span></font><font face="等线"><span>》文档，不仅更新了</span></font><font face="Arial"><span>6</span></font><font face="等线"><span>大主流平台的算子支持细节，还新增了</span></font></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><span>ex<a href="https://www.hqchip.com/app/1522" target="_blank"><u>SD</u></a>PAt<a href="https://www.elecfans.com/tags/te/" target="_blank"><u>te</u></a>n<a href="https://bbs.elecfans.com/group_715" target="_blank"><u>ti</u></a>on</span><font face="等线"><span>、</span></font><font face="Arial"><span>exMatMul</span></font><font face="等线"><span>等硬件加速算子</span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span>，为<a href="https://bbs.elecfans.com/group_1231" target="_blank"><u>开发者</u></a>提供了更清晰的开发指引。</span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span>今天就带大家全面梳理这份文档的核心内容，从平台特性到算子细节，从开发注意事项到场景适配，帮你快速找到适合自身需求的</span></font><span>RK NPU</span><font face="等线"><span>方案。</span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h2>
		<b><span style="font-family:Arial;font-weight:bold;font-size:16pt;"><font face="等线"><span>一、平台全景：</span></font><span>6</span><font face="等线"><span>大系列各有侧重，覆盖从入门到高端</span></font></span></b></h2>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span>瑞芯微</span></font><span>RK NPU</span><font face="等线"><span>家族涵盖从入门级到高端旗舰的全场景需求，每个平台在算子支持、性能优化上各有侧重，开发者可根据设备算力、功耗、精度需求精准选型。</span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span style="font-family:Arial;font-weight:bold;font-size:15pt;"><span>1. RK3566/3568</span><font face="等线"><span>：入门级嵌入式</span></font><font face="Arial"><span>AI</span></font><font face="等线"><span>首选</span></font></span></b></h3>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span>•</span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span>核心定位</span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span>：低功耗、小算力场景，适合对成本敏感的嵌入式设备</span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span>•</span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span>算子支持</span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span>：基础算子全覆盖</span></font><font face="Arial"><span>——<a href="https://bbs.elecfans.com/zhuti_1472_1.html" target="_blank"><u>Ad</u></a>d/<a href="https://m.hqchip.com/app/1525" target="_blank"><u>Sub</u></a>/Mul</span></font><font face="等线"><span>、卷积（</span></font><font face="Arial"><span>Conv/Depthwise Conv</span></font><font face="等线"><span>）、池化（</span></font><font face="Arial"><span>Global Avg/MaxPool</span></font><font face="等线"><span>、</span></font><font face="Arial"><span>AveragePool</span></font><font face="等线"><span>）、激活函数（</span></font><font face="Arial"><span>ReLU</span></font><font face="等线"><span>、</span></font><font face="Arial"><span>LeakyReLU</span></font><font face="等线"><span>、</span></font><font face="Arial"><span>Mish</span></font><font face="等线"><span>）均支持；部分支持</span></font><font face="Arial"><span>GRU/LSTM</span></font><font face="等线"><span>（扩展为</span></font><font face="Arial"><span>exGRU/exLSTM</span></font><font face="等线"><span>算子），满足轻量时序模型需求。</span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span>•</span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span>数据类型</span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span>：</span></font><span>int8</span><font face="等线"><span>（量化推理）、</span></font><font face="Arial"><span>float16</span></font><font face="等线"><span>（半精度推理）双支持，平衡精度与性能。</span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span>•</span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span>关键约束</span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span>：</span></font><span>Global AveragePool</span><font face="等线"><span>的</span></font><font face="Arial"><span>height</span></font><font face="等线"><span>范围需注意</span></font><font face="Arial"><span>——RKNN-Toolkit2</span></font><font face="等线"><span>支持</span></font><font face="Arial"><span>[1,343]</span></font><font face="等线"><span>，</span></font><font face="Arial"><span>Compiler</span></font><font face="等线"><span>仅支持</span></font><font face="Arial"><span>[1,7]</span></font><font face="等线"><span>；</span></font><font face="Arial"><span>Transpose</span></font><font face="等线"><span>仅支持</span></font><font face="Arial"><span>5</span></font><font face="等线"><span>种固定轴顺序（如</span></font><font face="Arial"><span>perm=[0,3,1,2]</span></font><font face="等线"><span>）。</span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span>•</span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span>适用场景</span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span>：<a href="https://www.elecfans.com/v/tag/663/" target="_blank"><u>智能家居</u></a>设备（如<a href="https://www.elecfans.com/tags/智能音箱/" target="_blank"><u>智能音箱</u></a>、小家电</span></font><span>AI</span><font face="等线"><span>交互）、小型监控摄像头、低功耗物联网<a href="https://www.elecfans.com/v/tag/117/" target="_blank"><u>传感器</u></a>。</span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span style="font-family:Arial;font-weight:bold;font-size:15pt;"><span>2. RK3588</span><font face="等线"><span>：高端旗舰，多核协同提升</span></font><font face="Arial"><span>AI</span></font><font face="等线"><span>性能</span></font></span></b></h3>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span>•</span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span>核心定位</span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span>：中高端边缘计算，支持多任务并发推理</span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span>•</span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span>算子亮点</span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span>：</span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span>◦</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span>新增</span></font></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><span>exSDPAttention</span><font face="等线"><span>（注意力机制）、</span></font><font face="Arial"><span>exMatMul</span></font><font face="等线"><span>（矩阵乘）硬件加速</span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span>，适配</span></font><span>Transformer</span><font face="等线"><span>类模型（如轻量</span></font><font face="Arial"><span>NLP</span></font><font face="等线"><span>模型）；</span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span>◦</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span>卷积类</span></font><span>Fuse OP</span><font face="等线"><span>成熟：支持</span></font><font face="Arial"><span>Conv+ReLU/Clip/Sigmoid/Tanh</span></font><font face="等线"><span>等</span></font><font face="Arial"><span>10 +</span></font><font face="等线"><span>种组合，减少算子调度开销；</span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span>◦</span></span></span><span style="font-family:Arial;font-size:11pt;"><span>Softmax</span><font face="等线"><span>硬件支持</span></font><font face="Arial"><span>channel/width</span></font><font face="等线"><span>双方向（</span></font><font face="Arial"><span>axis=1/3</span></font><font face="等线"><span>），</span></font><font face="Arial"><span>channel</span></font><font face="等线"><span>最大支持</span></font><font face="Arial"><span>8192</span></font><font face="等线"><span>。</span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span>•</span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span>独家特性</span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span>：业内首个支持</span></font></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span>多核协同</span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span>的</span></font><span>RK NPU</span><font face="等线"><span>平台，</span></font><font face="Arial"><span>Add</span></font><font face="等线"><span>、</span></font><font face="Arial"><span>Conv</span></font><font face="等线"><span>、</span></font><font face="Arial"><span>Concat</span></font><font face="等线"><span>等基础算子已实现多核并行，算力利用率提升</span></font><font face="Arial"><span>40%+</span></font><font face="等线"><span>。</span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span>•</span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span>适用场景</span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span>：高端智能相机（多目标检测</span></font><span>+</span><font face="等线"><span>跟踪）、边缘</span></font><font face="Arial"><span>AI</span></font><font face="等线"><span>网关（同时处理视频分析</span></font><font face="Arial"><span>+</span></font><font face="等线"><span>数据转发）、工业质检设备。</span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span style="font-family:Arial;font-weight:bold;font-size:15pt;"><span>3. RV1103/1106</span><font face="等线"><span>：低功耗安防专用，优化监控场景</span></font></span></b></h3>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span>•</span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span>核心定位</span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span>：安防领域低功耗方案，主打轻量视觉推理</span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span>•</span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span>算子优化</span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span>：针对监控场景强化</span></font><font face="Arial"><span>——Global Pool</span></font><font face="等线"><span>、</span></font><font face="Arial"><span>Conv</span></font><font face="等线"><span>算子适配小分辨率视频流；支持</span></font><font face="Arial"><span>exSoftmaxMask</span></font><font face="等线"><span>（带掩码的</span></font><font face="Arial"><span>Softmax</span></font><font face="等线"><span>），可快速实现目标遮挡场景的推理修正。</span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span>•</span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span>数据类型</span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span>：以</span></font><span>int8</span><font face="等线"><span>为主（量化推理功耗更低），部分支持</span></font><font face="Arial"><span>float16</span></font><font face="等线"><span>，适配安防场景的低精度需求。</span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span>•</span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span>关键优势</span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span>：</span></font><span>Transpose</span><font face="等线"><span>支持</span></font><font face="Arial"><span>NCHW</span></font><font face="等线"><span>转</span></font><font face="Arial"><span>NHWC</span></font><font face="等线"><span>等</span></font><font face="Arial"><span>4</span></font><font face="等线"><span>种模式，且对齐要求宽松（</span></font><font face="Arial"><span>8bit 16</span></font><font face="等线"><span>对齐、</span></font><font face="Arial"><span>16bit 8</span></font><font face="等线"><span>对齐），视频数据格式转换效率更高。</span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span>•</span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span>适用场景</span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span>：智能门铃、低功耗摄像头（电池供电）、车载环视（轻量感知任务）。</span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span style="font-family:Arial;font-weight:bold;font-size:15pt;"><span>4. RK3562</span><font face="等线"><span>：中端均衡之选，强化时序模型支持</span></font></span></b></h3>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span>•</span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span>核心定位</span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span>：中端嵌入式</span></font><span>AI</span><font face="等线"><span>，平衡算力与成本</span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span>•</span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span>算子特色</span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span>：</span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span>◦</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span>支持</span></font><span>GRU</span><font face="等线"><span>（</span></font><font face="Arial"><span>exGRU</span></font><font face="等线"><span>）算子，</span></font><font face="Arial"><span>sequence/input_size</span></font><font face="等线"><span>分别要求</span></font><font face="Arial"><span>4/8</span></font><font face="等线"><span>对齐，适配时序数据（如语音、传感器时序）；</span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span>◦</span></span></span><span style="font-family:Arial;font-size:11pt;"><span>LayerNorm</span><font face="等线"><span>支持预归一化（</span></font><font face="Arial"><span>pre_norm</span></font><font face="等线"><span>），可防止推理溢出，适配</span></font><font face="Arial"><span>Transformer</span></font><font face="等线"><span>类模型；</span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span>◦</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span>硬件支持</span></font><span>exSDPAttention</span><font face="等线"><span>，轻量</span></font><font face="Arial"><span>NLP</span></font><font face="等线"><span>任务推理速度提升明显。</span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span>•</span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span>适用场景</span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span>：工业检测（如流水线缺陷识别）、中端物联网设备（带语音交互的智能终端）。</span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span style="font-family:Arial;font-weight:bold;font-size:15pt;"><span>5. RK3576</span><font face="等线"><span>：</span></font><font face="Arial"><span>V2.0.0-beta</span></font><font face="等线"><span>新增平台，聚焦</span></font><font face="Arial"><span>Transformer</span></font><font face="等线"><span>优化</span></font></span></b></h3>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span>•</span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span>核心定位</span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span>：新发布中端平台，主打</span></font><span>Transformer</span><font face="等线"><span>模型适配</span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span>•</span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span>算子亮点</span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span>：</span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span>◦</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span>硬件支持</span></font><span>exSDPAttention</span><font face="等线"><span>、</span></font><font face="Arial"><span>exMatMul</span></font><font face="等线"><span>，解决</span></font><font face="Arial"><span>Transformer</span></font><font face="等线"><span>模型在嵌入式设备上的推理瓶颈；</span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span>◦</span></span></span><span style="font-family:Arial;font-size:11pt;"><span>Conv+Add+ReLU</span><font face="等线"><span>等组合</span></font><font face="Arial"><span>Fuse OP</span></font><font face="等线"><span>全覆盖，</span></font><font face="Arial"><span>CNN</span></font><font face="等线"><span>模型推理效率优化；</span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span>◦</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span>多核协同初步支持（</span></font><span>Conv</span><font face="等线"><span>、</span></font><font face="Arial"><span>Depthwise Conv</span></font><font face="等线"><span>），后续版本将扩展更多算子。</span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span>•</span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span>适用场景</span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span>：需要兼顾</span></font><span>CNN</span><font face="等线"><span>与</span></font><font face="Arial"><span>Transformer</span></font><font face="等线"><span>推理的设备（如带文本分类的图像识别终端）、边缘</span></font><font face="Arial"><span>AI</span></font><font face="等线"><span>盒子。</span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span style="font-family:Arial;font-weight:bold;font-size:15pt;"><span>6. RK2118</span><font face="等线"><span>：简化开发，</span></font><font face="Arial"><span>float16</span></font><font face="等线"><span>专属平台</span></font></span></b></h3>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span>•</span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span>核心定位</span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span>：轻量浮点推理场景，降低多精度适配成本</span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span>•</span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span>独特之处</span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span>：仅支持</span></font><span>float16</span><font face="等线"><span>数据类型，无需兼顾</span></font><font face="Arial"><span>int8</span></font><font face="等线"><span>量化适配，开发流程简化；基础算子（</span></font><font face="Arial"><span>Conv</span></font><font face="等线"><span>、</span></font><font face="Arial"><span>Pool</span></font><font face="等线"><span>、激活函数）全覆盖，</span></font><font face="Arial"><span>exGlu</span></font><font face="等线"><span>算子支持，满足轻量浮点模型需求。</span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span>•</span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span>约束说明</span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span>：无</span></font><span>int8</span><font face="等线"><span>支持，不适合对功耗、算力要求严苛的场景。</span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span>•</span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span>适用场景</span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span>：对推理精度要求高的轻量设备（如医疗便携检测设备、<a href="https://m.hqchip.com/app/1252" target="_blank"><u>高精度</u></a>传感器数据处理终端）。</span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h2>
		<b><span style="font-family:Arial;font-weight:bold;font-size:16pt;"><font face="等线"><span>二、核心共性与差异化：开发者必知的关键特性</span></font></span></b></h2>
	<p>
		</p>
	<h3>
		<b><span style="font-family:Arial;font-weight:bold;font-size:15pt;"><span>1.</span><font face="等线"><span>全平台共性优势</span></font></span></b></h3>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span>•</span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span>数据类型</span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span>：除</span></font><span>RK2118</span><font face="等线"><span>外，均支持</span></font><font face="Arial"><span>int8</span></font><font face="等线"><span>（量化）</span></font><font face="Arial"><span>+float16</span></font><font face="等线"><span>（半精度），兼顾</span></font><font face="Arial"><span>“</span></font><font face="等线"><span>低功耗</span></font><font face="Arial"><span>”</span></font><font face="等线"><span>与</span></font><font face="Arial"><span>“</span></font><font face="等线"><span>高精度</span></font><font face="Arial"><span>”</span></font><font face="等线"><span>需求；</span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span>•</span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span>基础算子全覆盖</span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span>：</span></font><span>Add</span><font face="等线"><span>、</span></font><font face="Arial"><span>Sub</span></font><font face="等线"><span>、</span></font><font face="Arial"><span>Mul</span></font><font face="等线"><span>、</span></font><font face="Arial"><span>Conv</span></font><font face="等线"><span>、</span></font><font face="Arial"><span>Pool</span></font><font face="等线"><span>（</span></font><font face="Arial"><span>Avg/Max</span></font><font face="等线"><span>）、激活函数（</span></font><font face="Arial"><span>ReLU</span></font><font face="等线"><span>、</span></font><font face="Arial"><span>Sigmoid</span></font><font face="等线"><span>、</span></font><font face="Arial"><span>Mish</span></font><font face="等线"><span>）等核心算子全平台支持，模型迁移成本低；</span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span>•</span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span>广播机制统一</span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span>：遵循</span></font><span>ONNX NCHW</span><font face="等线"><span>规范，支持</span></font><font face="Arial"><span>4</span></font><font face="等线"><span>种广播方式（如</span></font><font face="Arial"><span>A (N,C,H,W)</span></font><font face="等线"><span>与</span></font><font face="Arial"><span>B (C,1,1)</span></font><font face="等线"><span>、</span></font><font face="Arial"><span>B (H,W)</span></font><font face="等线"><span>广播），算子调用逻辑一致；</span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span>•</span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><span>Fallb<a href="https://m.hqchip.com/app/1703" target="_blank"><u>ac</u></a>k</span><font face="等线"><span>保障</span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span>：不支持的算子自动转</span></font><span><a href="https://m.elecfans.com/v/tag/132/" target="_blank"><u>CPU</u></a></span><font face="等线"><span>执行（</span></font><font face="Arial"><span>CPU</span></font><font face="等线"><span>支持</span></font><font face="Arial"><span>ArgMin/ArgMax</span></font><font face="等线"><span>、</span></font><font face="Arial"><span>GRU</span></font><font face="等线"><span>、</span></font><font face="Arial"><span>InstanceNormalization</span></font><font face="等线"><span>等超</span></font><font face="Arial"><span>100</span></font><font face="等线"><span>种算子），模型兼容性拉满；</span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span>•</span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><span><a href="https://www.elecfans.com/tags/gpu/" target="_blank"><u>GPU</u></a></span><font face="等线"><span>辅助</span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span>：</span></font><span>GPU</span><font face="等线"><span>仅支持</span></font><font face="Arial"><span>MatMul</span></font><font face="等线"><span>算子（</span></font><font face="Arial"><span>float16</span></font><font face="等线"><span>，需设置</span></font><font face="Arial"><span>GPU</span></font><font face="等线"><span>优先），满足矩阵乘场景的算力补充。</span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span style="font-family:Arial;font-weight:bold;font-size:15pt;"><span>2.</span><font face="等线"><span>平台差异化亮点速查表</span></font></span></b></h3>
	<p>
		</p>
	<table style="border-collapse:collapse;margin-left:-0.6pt;border:none;"><tbody><tr><td style="padding:3pt 6pt 1.5pt;border-width:1pt;border-style:solid;border-color:rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span>平台</span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:1pt solid rgb(222,224,227);border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span>核心优势</span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:1pt solid rgb(222,224,227);border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span>数据类型</span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:1pt solid rgb(222,224,227);border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span>独家特性</span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:1pt solid rgb(222,224,227);border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span>适用场景</span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
			</tr><tr><td style="padding:3pt 6pt 1.5pt;border-left:1pt solid rgb(222,224,227);border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span>RK3566/3568</span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span>入门级成本低</span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span>int8/float16</span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span>无</span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span>低功耗小设备</span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
			</tr><tr><td style="padding:3pt 6pt 1.5pt;border-left:1pt solid rgb(222,224,227);border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span>RK3588</span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span>多核协同，算力强</span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span>int8/float16</span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span>多核并行、</span></font><span>exSDPAttention</span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span>高端边缘计算</span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
			</tr><tr><td style="padding:3pt 6pt 1.5pt;border-left:1pt solid rgb(222,224,227);border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span>RV1103/1106</span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span>低功耗，安防优化</span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span>int8</span><font face="等线"><span>为主</span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span>Transpose</span><font face="等线"><span>效率优化</span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span>低功耗摄像头</span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
			</tr><tr><td style="padding:3pt 6pt 1.5pt;border-left:1pt solid rgb(222,224,227);border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span>RK3562</span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span>时序模型支持</span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span>int8/float16</span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span>exGRU</span><font face="等线"><span>、</span></font><font face="Arial"><span>LayerNorm pre_norm</span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span>工业检测、语音交互</span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
			</tr><tr><td style="padding:3pt 6pt 1.5pt;border-left:1pt solid rgb(222,224,227);border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span>RK3576</span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span>新平台，</span></font><span>Transformer</span><font face="等线"><span>优化</span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span>int8/float16</span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span>硬件</span></font><span>exMatMul</span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span>多模型融合设备</span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
			</tr><tr><td style="padding:3pt 6pt 1.5pt;border-left:1pt solid rgb(222,224,227);border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span>RK2118</span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span>简化开发，浮点专属</span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span>float16 only</span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span>无</span></font><span>int8</span><font face="等线"><span>适配成本</span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span>高精度轻量设备</span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
			</tr></tbody></table><h2>
		<b><span style="font-family:Arial;font-weight:bold;font-size:16pt;"><font face="等线"><span>三、开发避坑指南：关键约束与建议</span></font></span></b></h2>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span>1.</span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span>输入输出规格需注意</span></font></span></b></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span>◦</span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span>宽度对齐</span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span>：零拷贝</span></font><span>API</span><font face="等线"><span>下，</span></font><font face="Arial"><span>RK3566/3568</span></font><font face="等线"><span>（</span></font><font face="Arial"><span>int8 channel=1,3,4</span></font><font face="等线"><span>时</span></font><font face="Arial"><span>8</span></font><font face="等线"><span>对齐）、</span></font><font face="Arial"><span>RK3588</span></font><font face="等线"><span>（</span></font><font face="Arial"><span>int8 16</span></font><font face="等线"><span>对齐）、</span></font><font face="Arial"><span>RV1103/1106</span></font><font face="等线"><span>（</span></font><font face="Arial"><span>16</span></font><font face="等线"><span>对齐），需通过</span></font><font face="Arial"><span>w_stride</span></font><font face="等线"><span>属性查询实际对齐要求；</span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span>◦</span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span>维度限制</span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span>：多数平台默认支持</span></font><span>4</span><font face="等线"><span>维输入（</span></font><font face="Arial"><span>NCHW</span></font><font face="等线"><span>），非</span></font><font face="Arial"><span>4</span></font><font face="等线"><span>维输入需</span></font><font face="Arial"><span>CPU fallback</span></font><font face="等线"><span>；</span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span>◦</span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span>输出</span></font><span>Layout</span></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span>：</span></font><span>NC1HWC2</span><font face="等线"><span>格式需</span></font><font face="Arial"><span>Channel</span></font><font face="等线"><span>对齐（如</span></font><font face="Arial"><span>RK3588 int8</span></font><font face="等线"><span>最后一层卷积需</span></font><font face="Arial"><span>32</span></font><font face="等线"><span>对齐）。</span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span>1.</span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span>算子约束要牢记</span></font></span></b></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span>◦</span></span></span><span style="font-family:Arial;font-size:11pt;"><span>Concat/Split</span><font face="等线"><span>：</span></font><font face="Arial"><span>Channel</span></font><font face="等线"><span>方向需对齐（</span></font><font face="Arial"><span>8bit 8</span></font><font face="等线"><span>对齐、</span></font><font face="Arial"><span>16bit 4</span></font><font face="等线"><span>对齐，</span></font><font face="Arial"><span>RK3576/RK2118</span></font><font face="等线"><span>为</span></font><font face="Arial"><span>16/8</span></font><font face="等线"><span>对齐）；</span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span>◦</span></span></span><span style="font-family:Arial;font-size:11pt;"><span>Resize</span><font face="等线"><span>：仅支持最近邻</span></font><font face="Arial"><span>/</span></font><font face="等线"><span>线性插值，放大倍数</span></font><font face="Arial"><span>≤8</span></font><font face="等线"><span>倍；</span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span>◦</span></span></span><span style="font-family:Arial;font-size:11pt;"><span>GRU/LSTM</span><font face="等线"><span>：</span></font><font face="Arial"><span>sequence</span></font><font face="等线"><span>建议</span></font><font face="Arial"><span>4</span></font><font face="等线"><span>对齐，</span></font><font face="Arial"><span>hidden_size</span></font><font face="等线"><span>建议</span></font><font face="Arial"><span>8</span></font><font face="等线"><span>对齐，双向模式仅支持</span></font><font face="Arial"><span>batch=1</span></font><font face="等线"><span>。</span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span>1.</span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span>版本选择有技巧</span></font></span></b></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span>◦</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span>优先使用</span></font></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><span>V2.0.0-beta</span><font face="等线"><span>版本</span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span>：新增</span></font><span>RK3576/RK2118</span><font face="等线"><span>支持，修复历史约束（如</span></font><font face="Arial"><span>RK3588 Transpose</span></font><font face="等线"><span>限制），硬件加速算子更丰富；</span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span>◦</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span>参考配套文档：《</span></font><span>Rockchip_RKNPU_User_Guide_RKNN_SDK</span><font face="等线"><span>》可获取零拷贝</span></font><font face="Arial"><span>API</span></font><font face="等线"><span>、</span></font><font face="Arial"><span>mean/scale</span></font><font face="等线"><span>配置细节，避免踩坑。</span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h2>
		<b><span style="font-family:Arial;font-weight:bold;font-size:16pt;"><font face="等线"><span>四、结语：</span></font><span>RK NPU</span><font face="等线"><span>，嵌入式</span></font><font face="Arial"><span>AI</span></font><font face="等线"><span>的灵活工具箱</span></font></span></b></h2>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span>瑞芯微</span></font><span>RK</span><font face="等线"><span>系列</span></font><font face="Arial"><span>NPU</span></font><font face="等线"><span>通过</span></font><font face="Arial"><span>6</span></font><font face="等线"><span>大平台的差异化布局，覆盖了从入门到高端、从低功耗到高性能的全场景嵌入式</span></font><font face="Arial"><span>AI</span></font><font face="等线"><span>需求。无论是需要成本敏感的小家电，还是追求算力的边缘网关，亦或是专注安防的低功耗摄像头，都能找到适配的方案。</span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span>随着</span></font><span>V2.0.0-beta</span><font face="等线"><span>版本新增硬件加速算子（</span></font><font face="Arial"><span>exSDPAttention</span></font><font face="等线"><span>、</span></font><font face="Arial"><span>exMatMul</span></font><font face="等线"><span>）和新平台支持，</span></font><font face="Arial"><span>RK NPU</span></font><font face="等线"><span>的</span></font><font face="Arial"><span>Transformer</span></font><font face="等线"><span>模型适配能力进一步增强，为嵌入式</span></font><font face="Arial"><span>AI</span></font><font face="等线"><span>开发者提供了更灵活的选择。</span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span>如需获取完整算子支持列表（含详细参数约束、输入输出计算示例），可参考瑞芯微官方文档《</span></font><span>RKNN Compiler Support Operator List v2.0.0-beta</span><font face="等线"><span>》，也欢迎在评论区交流你的开发场景，一起探讨</span></font><font face="Arial"><span>RK NPU</span></font><font face="等线"><span>的最佳实践！</span></font></span></p>
	<img alt="wKgZO2kalGiAAr1nAADF1xC9i8Q137.png" src="https://file1.elecfans.com//web3/M00/3C/9A/wKgZO2kalGiAAr1nAADF1xC9i8Q137.png"/><p>
		</p>
	<p>
		</p>
</div>
<div class="wx_detail">
	<p>
		</p>
</div>
<br/>]]></description></item><item>    <title><![CDATA[基于N32G435芯片MCU微控制器的EDR系统方案]]></title>    <link>https://www.elecfans.com/d/7641933.html</link>    <guid>https://www.elecfans.com/d/7641933.html</guid>    <pubDate>2026-02-06 16:34:00</pubDate>    <description><![CDATA[<p>
	EDR（Event Data Recorder）系统划分为10个功能模块，分别用于<a href="https://www.hqchip.com/app/1731" target="_blank"><u>电源管理</u></a>、系统自检、重力感应、<a href="https://www.hqchip.com/app/2004" target="_blank"><u>CAN</u></a>通讯、循环<a href="https://m.hqchip.com/app/1072" target="_blank"><u>信号</u></a>采集（CAN<a href="https://m.hqchip.com/app/1787" target="_blank"><u>接口</u></a>）、数据存储与覆盖、下线配置、诊断功能和BootLo<a href="https://bbs.elecfans.com/zhuti_1472_1.html" target="_blank"><u>ad</u></a>er等。<a href="https://www.hqchip.com/app/1379" target="_blank"><u>MCU</u></a><a href="https://www.hqchip.com/app/1380" target="_blank"><u>微控制器</u></a>方案具有支持软件升级、多种车型适配、具备工作环境异常检测以及诊断功能等功能特点。</p>
<p>
	<br/>
	针对EDR系统的严苛要求，我司推出的N32G435系列MCU微控制器凭借其卓越性能，成为理想的选择。MCU微控制器芯片基于<a href="https://m.hqchip.com/app/1378" target="_blank"><u>Arm</u></a>®Cortex®-M4F内核，主频高达108MHz，并集成硬件FPU，能够快速完成复杂的浮点运算与信号处理任务，确保事件数据的实时、精准处理。</p>
<p>
	<br/>
	N32G435 MCU微控制器在设计上充分考量了车规级应用的挑战。其工作温度范围宽达-40℃至105℃，具备极高的环境适应性，保障EDR系统在各种极端条件下稳定运行。芯片内置的12位<a href="https://www.elecfans.com/tags/adc/" target="_blank"><u>ADC</u></a>支持最高5Msps的采样率，可实现对<a href="https://www.elecfans.com/analog/" target="_blank"><u>模拟</u></a>信号的快速捕获，为准确记录碰撞瞬间的车辆状态提供了硬件基础。同时，MCU微控制器集成的硬件加密<a href="https://m.elecfans.com/v/tag/2562/" target="_blank"><u>算法</u></a>引擎，为存储在片内Flash的关键事件数据与<a href="https://m.elecfans.com/v/tag/1780/" target="_blank"><u>程序代码</u></a>提供了坚实的安全屏障，防止数据篡改与泄露。</p>
<p>
	<br/>
	N32G435芯片MCU微控制器的应用优势：<br/>
	①强劲内核与存储：135DMIPS的运算性能，搭配高达128KB的加密Flash和32KB S<a href="https://www.elecfans.com/tags/ram/" target="_blank"><u>RAM</u></a>，为多任务处理与海量事件数据缓存提供充裕空间。<br/>
	②高性能模拟前端：除高速ADC外，还集成2路<a href="https://www.hqchip.com/app/1737" target="_blank"><u>运算放大器</u></a>、2路<a href="https://m.hqchip.com/app/1737" target="_blank"><u>比较器</u></a>及1路12位<a href="https://www.elecfans.com/tags/dac/" target="_blank"><u>DAC</u></a>，可直接连接<a href="https://www.elecfans.com/v/tag/117/" target="_blank"><u>传感器</u></a>，简化外围<a href="https://www.elecfans.com/v/tag/167/" target="_blank"><u>电路设计</u></a>。<br/>
	③完备<a href="https://www.elecfans.com/v/tag/13179/" target="_blank"><u>通信接口</u></a>：MCU微控制器提供多路U(S)ART、<a href="https://www.elecfans.com/tags/i2c/" target="_blank"><u>I2C</u></a>、SPI，特别是集成的CAN 2.0A/B接口，无缝对接车辆CAN网络，实现数据的高效采集与<a href="https://www.elecfans.com/v/tag/1301/" target="_blank"><u>通信</u></a>。<br/>
	④增强的安全与可靠性：MCU微控制器支持安全启动、程序加密更新、多级读保护及硬件ECC校验，内置独立<a href="https://www.elecfans.com/tags/看门狗/" target="_blank"><u>看门狗</u></a>与<a href="https://www.elecfans.com/tags/时钟/" target="_blank"><u>时钟</u></a>失效监测，全面提升系统抗干扰与长期运行可靠性。</p>
<p>
	<br/>
	如需进一步了解MCU微控制器的产品数据或样品申请，请搜索英尚微电子获取专业服务。<br/><br/>
	审核编辑 黄宇</p>]]></description></item><item>    <title><![CDATA[MAX16550：12V 总线集成保护 IC 的全面解析]]></title>    <link>https://www.elecfans.com/d/7641940.html</link>    <guid>https://www.elecfans.com/d/7641940.html</guid>    <pubDate>2026-02-06 16:35:00</pubDate>    <description><![CDATA[<input type="hidden" id="annex0_7641940" value="https://file1.elecfans.com/web2/M00/A6/90/wKgaomUVX5aACnXXACAO3gy_esM893.pdf"/><h1>MAX16550：12V 总线集成保护 IC 的全面解析</h1>
<p>在电子设备的<a href="https://www.hqchip.com/app/1731" target="_blank"><u>电源管理</u></a>与保护领域，MAX16550 作为一款高性能的集成保护 IC 备受关注。它为 12V <a href="https://www.hqchip.com/app.html" target="_blank"><u>电源</u></a>总线提供了完备的解决方案，集成了低<a href="https://www.hqchip.com/app/485" target="_blank"><u>电阻</u></a> <a href="https://www.elecfans.com/tags/mosfet/" target="_blank"><u>MOSFET</u></a>、无损<a href="https://www.elecfans.com/tags/电流/" target="_blank"><u>电流</u></a>感应以及 PMBus <a href="https://m.hqchip.com/app/1787" target="_blank"><u>接口</u></a>等诸多先进特性。接下来，咱们就深入探究一下 MAX16550 的各项特性、<a href="https://m.elecfans.com/v/tag/773/" target="_blank"><u>工作原理</u></a>和应用设计。</p><p>文件下载：<a href="javascript:;" data-annex="annex0_7641940" target="_blank">MAX16550.pdf</a></p>
<h2>特性与优势突出</h2>
<h3>高密度集成设计</h3>
<p>MAX16550 - 30A 保护 IC 具有高密度的特点，其 4mm x 4.5mm 的尺寸在 30A 应用中，占用的电路板面积不到传统解决方案的 25%。这种高度集成的设计，使得电源管理、控制和监测功能得以整合在一个芯片上，减少了电路板的空间占用，提高了系统的集成度。</p>
<h3>高性能 MOSFET 与无损电流感应</h3>
<p>集成的功率 MOSFET 在 12V 电源路径中总电阻仅 1.9mΩ（包括封装电阻），大大降低了导通损耗，提高了电源效率。同时，采用的无损、精确电流感应技术，能够在负载和温度变化时提供<a href="https://m.hqchip.com/app/1252" target="_blank"><u>高精度</u></a>的电流监测，提高了系统的整体能量效率。</p>
<h3>丰富的保护功能</h3>
<p>该 IC 具备多重保护功能，包括过流保护（OCP）、过压保护（OVP）、欠压锁定（UVLO）、过温保护（OTP）等。其中，过流保护分为三个等级，可根据不同的故障情况迅速做出响应，确保系统的安全稳定运行。</p>
<h3>PMBus 接口与遥测功能</h3>
<p>支持 PMBus/SMBus 接口，可实现数字控制和监测，提供广泛的状态监测和报告功能。通过该接口，用户可以方便地对 IC 进行<a href="https://www.elecfans.com/v/tag/1315/" target="_blank"><u>编程</u></a>和配置，实现对输入电压、输出电流、输入功率、温度等参数的实时监测和控制。</p>
<h2>工作原理与操作流程</h2>
<h3>启动过程</h3>
<p>当 12V 电源电压足够高以保证内部 1.8V <a href="https://m.hqchip.com/app/1700" target="_blank"><u>LDO</u></a> 正常工作时，IC 会使能 LDO。待 VDD 有效后，IC 读取 SMBus_ID 编程电阻值来设置 PMBus 地址并初始化。在此期间，<a href="https://www.hqchip.com/app/1715" target="_blank"><u>栅极驱动</u></a>电源电容会完全充电。完成这两个步骤后，就可以通过使能输入（EN/UVLO）来控制 IC 的启动。</p>
<h3>软启动功能</h3>
<p>为了限制启动时的浪涌电流，MAX16550 采用了可编程软启动功能。在启动过程中，通过一个恒定<a href="https://www.hqchip.com/app/1725" target="_blank"><u>电流源</u></a>对 CSS <a href="https://www.elecfans.com/tags/电容/" target="_blank"><u>电容</u></a>进行充电，由于集成的 FET 配置为源极跟随器，输出电压会以一个由外部软启动电容决定的速率单调上升。</p>
<h3>自我检查机制</h3>
<p>在启动前，IC 会进行一系列的自我检查，包括输出放电检查和软启动电容放电检查。如果输出电压在规定时间内未降至可编程的 VOUT_UVLO 阈值以下，或者软启动电容电压未低于软启动阈值，IC 会判定可能存在故障，并将相应的故障标志置低。</p>
<h3>故障保护机制</h3>
<p>IC 会实时监测系统的各种参数，一旦检测到故障，如过流、过压、过温等，会立即采取相应的保护措施，如关闭集成的 MOSFET，并将 FAULT 引脚置低以指示故障。不同类型的故障有不同的响应时间和处理方式，确保系统能够在各种异常情况下迅速做出反应。</p>
<h2>应用设计要点</h2>
<h3>参数配置与编程</h3>
<p>MAX16550 可以通过<a href="https://www.elecfans.com/analog/" target="_blank"><u>模拟</u></a>编程电阻和 PMBus 进行配置。例如，通过连接到 ROCP 引脚的电阻来设置参考 OCP 阈值，以此作为启动和严重 OCP 阈值的参考；通过 PMBus <a href="https://www.elecfans.com/tags/寄存器/" target="_blank"><u>寄存器</u></a>可以设置启动 OCP 阈值、软启动延迟、输入 OVP 阈值等参数。</p>
<h3>电容与电阻选择</h3>
<h4>输入电容（CIN）</h4>
<p>为了保证输入电压的稳定和无噪声，建议使用输入电容。对于不需要在 MAX16550 之前使用输入电容的应用，输入电压纹波应小于 300mV 峰 - 峰值。</p>
<h4>输出电容（COUT）</h4>
<p>最大输出电容可以根据公式 (C<em>{OUT }=fr<a href="https://m.hqchip.com/app/1703" target="_blank"><u>ac</u></a>{left(I</em>{INRUSH } × C<em>{SS}right)}{I</em>{SS}}) 进行计算，其中 (I_{INRUSH }) 应选择低于编程的 MAX16550 启动 OCP 且在启动安全工作区（SOA）内的值。</p>
<h4>ROCP 和 RILO<a href="https://bbs.elecfans.com/zhuti_1472_1.html" target="_blank"><u>AD</u></a> 电阻</h4>
<p>ROCP 电阻用于设置适度 OCP 阈值，RILOAD 电阻用于设置电流报告电压。在选择这些电阻时，需要根据具体的设计要求和<a href="https://m.elecfans.com/v/tag/2364/" target="_blank"><u>电气</u></a>特性进行计算和选择。</p>
<h3><a href="https://m.hqchip.com/app/1554" target="_blank"><u>二极管</u></a>选择</h3>
<h4>输入 <a href="https://m.hqchip.com/app/1587" target="_blank"><u>TVS</u></a> 二极管</h4>
<p>为了将输入电压瞬变钳位在 MAX16550 的 VIN 引脚额定值内，需要在输入使用瞬态电压抑制（TVS）二极管。选择时应确保 TVS 二极管的反向截止电压（<a href="https://www.elecfans.com/v/tag/3668/" target="_blank"><u>VR</u></a>WM）≥ 12V（典型值），峰值脉冲电流（ (I<em>{PPM}) ）≥ 30A（典型值），钳位电压（ (V</em>{C}) ）≤ 22V（典型值，150µs）。</p>
<h4>输出<a href="https://www.hqchip.com/app/1558" target="_blank"><u>肖特基</u></a>二极管</h4>
<p>为了将负输出电压尖峰钳位在 MAX16550 的 VOUT 引脚额定值内，需要在输出使用肖特基二极管。应选择正向电压降（VF）低且峰值正向浪涌电流（IFSM）高于预期电感电流的二极管。</p>
<h3>布局建议</h3>
<p>在 <a href="https://m.elecfans.com/v/tag/82/" target="_blank"><u>PCB</u></a> 布局时，需要注意以下几点：</p>
<ol>
<li><strong>VIN 和 VOUT</strong>：使用宽而多的 (V<em>{IN }) 和 (V</em>{OUT }) 平面，以最小化输入和输出的走线电感，提高热性能。同时，使用多个过孔连接层间电源平面，并将输入和输出电容尽可能靠近 IC。</li>
<li><strong>接地</strong>：从顶层的接地引脚（引脚 13）到下层接地层使用至少两个过孔，走线宽度约 1mm，长度约 7mm。在第二层，应在 MAX16550 封装下方设置禁布区，禁布区应延伸到封装外约 30mils。</li>
<li><strong>VBST 和 SS</strong>：将 VBST 和 SS 电容放置在顶层，尽可能靠近引脚。</li>
<li><strong>VDD</strong>：在顶层添加 VDD 平面，将 (V_{DD}) 电容靠近 IC 进行去耦，形成更紧密的接地回路。同时，将 VDD 接地与输出电容接地保持一定距离。</li>
<li><strong>ROCP 和 ILOAD</strong>：将 ROCP 和 ILOAD 电阻尽可能靠近 IC 放置。</li>
</ol>
<h2>总结</h2>
<p>MAX16550 作为一款功能强大的 12V 总线集成保护 IC，在服务器、网络、存储、<a href="https://www.elecfans.com/v/tag/1301/" target="_blank"><u>通信</u></a>设备和 AC/<a href="https://m.hqchip.com/app/1703" target="_blank"><u>DC</u></a> 电源等领域具有广泛的应用前景。其高密度集成设计、高性能的 MOSFET 和无损电流感应技术、丰富的保护功能以及可通过 PMBus 进行灵活配置的特点，为<a href="https://m.elecfans.com/v/tag/125/" target="_blank"><u>电子工程师</u></a>提供了一个高效、可靠的电源管理和保护解决方案。在实际应用中，只要合理选择参数、配置电路和进行 PCB 布局，就能充分发挥 MAX16550 的性能优势，提高系统的稳定性和可靠性。大家在使用过程中有什么心得或者疑问，欢迎一起交流探讨。 </p>]]></description></item><item>    <title><![CDATA[LMK1D1208I：高性能LVDS时钟缓冲器的深度剖析与应用指南]]></title>    <link>https://www.elecfans.com/d/7641941.html</link>    <guid>https://www.elecfans.com/d/7641941.html</guid>    <pubDate>2026-02-06 16:35:00</pubDate>    <description><![CDATA[<input type="hidden" id="annex0_7641941" value="https://file1.elecfans.com/web3/M00/4B/12/wKgZPGmFpDmAY8AyAB8yUkBJJ4A755.pdf"/><h1>LMK1D1208I：高性能LVDS<a href="https://www.elecfans.com/tags/时钟缓冲器/" target="_blank"><u>时钟缓冲器</u></a>的深度剖析与应用指南</h1>
<p>在电子设计的世界里，<a href="https://www.elecfans.com/tags/时钟/" target="_blank"><u>时钟</u></a>缓冲器扮演着至关重要的角色，它能够确保时钟<a href="https://m.hqchip.com/app/1072" target="_blank"><u>信号</u></a>的稳定传输和分配。今天，我们要深入探讨的是德州仪器（<a href="https://bbs.elecfans.com/group_715" target="_blank"><u>TI</u></a>）的一款高性能<a href="https://www.elecfans.com/tags/i2c/" target="_blank"><u>I2C</u></a>可<a href="https://www.elecfans.com/v/tag/1315/" target="_blank"><u>编程</u></a>LVDS时钟缓冲器——LMK1D1208I。</p><p>文件下载：<a href="javascript:;" data-annex="annex0_7641941" target="_blank">lmk1d1208i.pdf</a></p>
<h2>一、产品概述</h2>
<p>LMK1D1208I属于高性能LVDS时钟缓冲器家族，拥有2个输入和8个输出。其输出频率最高可达2 GHz，支持1.8 V、2.5 V和3.3 V ± 5%的<a href="https://www.hqchip.com/app.html" target="_blank"><u>电源</u></a>电压。通过I2C编程，该设备具有高度的可配置性，能满足不同应用场景的需求。</p>
<h3>特性亮点</h3>
<ol>
<li><strong>低抖动性能</strong>：在156.25 MHz、12 - 20 MHz的积分范围内，最大附加抖动小于60 fs <a href="https://m.hqchip.com/app/1718" target="_blank"><u>RMS</u></a>，极低的相位噪声基底仅为 - 164 dBc/Hz（典型值）。</li>
<li><strong>传播延迟与输出偏斜小</strong>：最大传播延迟小于575 ps，最大输出偏斜仅为20 ps，能够有效保证信号的准确性和同步性。</li>
<li><strong>通用输入<a href="https://m.hqchip.com/app/1787" target="_blank"><u>接口</u></a></strong>：可接受LVDS、LVPECL、LVCMOS、HCSL和CML等多种类型的输入信号，具有很强的兼容性。</li>
<li><strong>故障保护输入</strong>：即使在没有输入信号的情况下，也能防止输出振荡，并且允许在VDD供电之前提供输入信号。</li>
<li><strong>工业级温度范围</strong>：工作温度范围为 – 40°C至105°C，适用于各种恶劣的工业环境。</li>
<li><strong>I2C可编程性</strong>：通过I2C编程，可实现单个或多个输入和输出的启用/禁用、输出幅度选择（标准或增强）以及银行输入<a href="https://www.elecfans.com/tags/多路复用器/" target="_blank"><u>多路复用器</u></a>的配置。同时，通过IDX引脚可实现四个可编程的I2C地址。</li>
</ol>
<h2>二、应用领域</h2>
<p>LMK1D1208I的高性能和灵活性使其在多个领域都有广泛的应用，包括：</p>
<ol>
<li><strong>电信和网络</strong>：稳定的时钟信号对于数据传输和交换至关重要，LMK1D1208I能够提供精确的时钟分配，确保通信系统的正常运行。</li>
<li><strong>医疗成像</strong>：在高分辨率医疗成像设备中，要求时钟信号具有极低的抖动和噪声，以保证图像的清晰和准确。</li>
<li><strong>测试和测量设备</strong>：为测试设备提供稳定的时钟源，确保测量结果的准确性和可靠性。</li>
<li><strong><a href="https://www.elecfans.com/soft/data/43-45/" target="_blank"><u>无线通信</u></a></strong>：在无线基站和移动终端等设备中，时钟缓冲器的性能直接影响信号的发射和接收质量。</li>
<li><strong>专业<a href="https://m.hqchip.com/app/1537" target="_blank"><u>音频</u></a>/视频</strong>：为音视频设备提供同步的时钟信号，保证音视频的流畅播放和高质量传输。</li>
</ol>
<h2>三、产品详细解析</h2>
<h3>引脚配置与功能</h3>
<p>LMK1D1208I采用6 mm × 6 mm、40引脚的VQFN（RHA）封装，其引脚功能丰富多样。输入引脚IN0_P、IN0_N和IN1_P、IN1_N可接受差分或单端时钟输入；I2C编程引脚<a href="https://www.hqchip.com/app/1522" target="_blank"><u>SD</u></a>A和SCL用于设备的编程配置，IDX0和IDX1用于设置I2C地址；V<a href="https://m.hqchip.com/app/1703" target="_blank"><u>AC</u></a>_REF0和VAC_REF1为<a href="https://www.elecfans.com/tags/电容/" target="_blank"><u>电容</u></a><a href="https://www.elecfans.com/tags/耦合/" target="_blank"><u>耦合</u></a>输入提供偏置电压输出；8对差分LVDS输出引脚OUT0_P - OUT7_P和OUT0_N - OUT7_N用于时钟信号的分配。此外，还有电源引脚VDD和接地引脚DAP等。</p>
<h3><a href="https://m.elecfans.com/v/tag/2364/" target="_blank"><u>电气</u></a>特性</h3>
<ol>
<li><strong>电源特性</strong>：不同电源电压和输出条件下，<a href="https://www.elecfans.com/tags/电流/" target="_blank"><u>电流</u></a>消耗有所不同。例如，在所有输出启用且未端接、f = 0 Hz（AMP_SEL = 1）时，典型电流消耗为55 mA。</li>
<li><strong>IDX输入特性</strong>：输入高电压（VIH）和低电压（VIL）有明确的范围要求，输入上拉<a href="https://www.hqchip.com/app/485" target="_blank"><u>电阻</u></a>为670 kΩ。</li>
<li><strong>I2C接口特性</strong>：支持标准、快速和超快速模式，时钟速率分别为100 kHz、400 kHz和1000 kHz，同时对输入输出的电压、电流和电容等参数也有具体规定。</li>
<li><strong>时钟输入特性</strong>：单端LVCMOS/LVTTL时钟输入频率范围为<a href="https://m.hqchip.com/app/1703" target="_blank"><u>DC</u></a> - 250 MHz，差分时钟输入频率最高可达2 GHz。</li>
<li><strong>LVDS输出特性</strong>：可通过OUTx_AMP_SEL<a href="https://www.elecfans.com/tags/寄存器/" target="_blank"><u>寄存器</u></a>选择标准（350 mV）或增强（500 mV）的输出幅度，并且在不同条件下对差分输出电压、共模输出电压等参数都有详细规定。</li>
</ol>
<h3>功能特性</h3>
<ol>
<li><strong>故障保护输入</strong>：该特性允许在VDD供电之前驱动设备输入，并且输入迟滞功能可防止在没有输入信号时出现随机振荡。</li>
<li><strong>输入阶段配置</strong>：输入阶段可配置为2:1多路复用器或双银行模式。在2:1多路复用器模式下，可选择两个时钟输入之一并分配到八个LVDS输出对；在双银行模式下，每个输入可分别分配到四个LVDS输出对。</li>
<li><strong>双输出银行</strong>：八个LVDS输出对分为两个银行，每个银行包含四个输出对，可通过寄存器进行灵活配置。</li>
<li><strong>I2C控制</strong>：通过I2C控制可实现输入和输出通道的启用/禁用、输入多路选择、银行静音和输出幅度控制等功能。I2C地址由IDX0和IDX1引脚分配，可实现四种不同的地址。</li>
<li><strong>LVDS输出端接</strong>：为了获得最佳性能，建议对未使用的输出进行差分端接，使用100 - Ω电阻。也可以不端接，但会导致输出交流共模电压（VOS）略有下降。</li>
<li><strong>输入端接</strong>：输入可与LVDS、LVPECL、HCSL或LVCMOS<a href="https://m.hqchip.com/app/1847" target="_blank"><u>驱动器</u></a>接口，根据不同的输入类型和耦合方式，有相应的端接方法。</li>
</ol>
<h2>四、编程与寄存器配置</h2>
<p>LMK1D1208I使用I2C进行编程，通过设置不同的寄存器来实现各种功能。主要的寄存器包括：</p>
<ol>
<li><strong>R0寄存器</strong>：用于输出启用控制，可单独启用或禁用每个输出时钟通道。</li>
<li><strong>R1寄存器</strong>：用于输出幅度控制，可选择每个输出的标准或增强LVDS摆幅。</li>
<li><strong>R2寄存器</strong>：用于输入启用和银行设置控制，包括输入通道的启用/禁用、银行输入选择和银行静音等功能。</li>
<li><strong>R5寄存器</strong>：包含硅修订代码和设备识别代码。</li>
<li><strong>R14寄存器</strong>：报告I2C地址状态。</li>
</ol>
<h2>五、应用与实现</h2>
<h3>典型应用示例</h3>
<p>以线路卡应用为例，LMK1D1208I可选择两个输入：一个是来自背板的156.25 - MHz LVDS时钟，另一个是2.5 - V的156.25 - MHz LVCMOS<a href="https://www.hqchip.com/app/850" target="_blank"><u>振荡器</u></a>。通过寄存器控制，可将输入信号扇出到所需的设备，如PHY、<a href="https://bbs.elecfans.com/zhuti_fpga_1.html" target="_blank"><u>ASIC</u></a>、<a href="https://www.elecfans.com/soft/data/30-91/" target="_blank"><u>FPGA</u></a>和<a href="https://m.elecfans.com/v/tag/132/" target="_blank"><u>CPU</u></a>等。不同的设备对时钟信号的耦合和端接方式有不同要求，需要根据具体情况进行配置。</p>
<h3>设计要点</h3>
<ol>
<li><strong>输入端接</strong>：根据输入信号的类型和耦合方式，选择合适的端接方法，确保信号的正确传输。</li>
<li><strong>输出端接</strong>：为了提高性能，建议对未使用的输出进行端接或禁用。</li>
<li><strong>电源滤波</strong>：高性能时钟缓冲器对电源噪声敏感，需要使用滤波电容和旁路电容来减少电源噪声，同时可考虑使用铁氧体磁珠来隔离高频开关噪声。</li>
<li><strong><a href="https://m.elecfans.com/v/tag/82/" target="_blank"><u>PCB</u></a>布局</strong>：为了确保散热和性能，需要在PCB中设计热焊盘和多个过孔连接到接地层，同时合理布局布线，减少信号干扰。</li>
</ol>
<h2>六、总结</h2>
<p>LMK1D1208I凭借其高性能、低抖动、高度可配置和广泛的应用领域，成为<a href="https://m.elecfans.com/v/tag/125/" target="_blank"><u>电子工程师</u></a>在时钟分配设计中的理想选择。在实际应用中，我们需要深入理解其特性和功能，合理进行引脚配置、寄存器编程和PCB布局，以充分发挥其性能优势。同时，要注意电源噪声和散热等问题，确保设备的稳定运行。</p>
<p>大家在使用LMK1D1208I的过程中，有没有遇到过什么特别的问题或者有独特的应用经验呢？欢迎在评论区分享交流。 </p>]]></description></item><item>    <title><![CDATA[LMX2571-EP：低功耗高性能RF合成器的设计与应用指南]]></title>    <link>https://www.elecfans.com/d/7641942.html</link>    <guid>https://www.elecfans.com/d/7641942.html</guid>    <pubDate>2026-02-06 16:35:00</pubDate>    <description><![CDATA[<input type="hidden" id="annex0_7641942" value="https://file1.elecfans.com/web3/M00/49/33/wKgZO2l3FlaAKrEmADZ_h0iZZP8723.pdf"/><h1>LMX2571-EP：低功耗高性能<a href="https://www.elecfans.com/tongxin/rf/" target="_blank"><u>RF</u></a>合成器的设计与应用指南</h1>
<p>作为一名<a href="https://m.elecfans.com/v/tag/125/" target="_blank"><u>电子工程师</u></a>，在设计中选择合适的<a href="https://m.elecfans.com/v/tag/105/" target="_blank"><u>射频</u></a>合成器至关重要，它直接影响着整个系统的性能和稳定性。今天，我要和大家详细探讨一款出色的低功耗、高性能PLLatinum™ RF合成器——LMX2571-EP，它带有FSK调制功能，在众多领域都有广泛的应用前景。</p><p>文件下载：<a href="javascript:;" data-annex="annex0_7641942" target="_blank">lmx2571-ep.pdf</a></p>
<h2>一、LMX2571-EP的核心特性</h2>
<h3>1. 宽频率范围与低噪声性能</h3>
<p>LMX2571-EP能在-55 °C至+125 °C的宽温度范围内稳定工作，输出频率范围从10 MHz到1344 MHz。其低相位噪声和杂散性能十分出色，例如在480 MHz时，12.5-kHz偏移处的相位噪声为–123 dBc/Hz，1-MHz偏移处为–145 dBc/Hz，归一化PLL噪声底为–231 dBc/Hz，杂散优于–75 dBc/Hz。这使得它在对<a href="https://m.hqchip.com/app/1072" target="_blank"><u>信号</u></a>纯度要求较高的应用中表现卓越。</p>
<h3>2. 快速锁定与杂散抑制技术</h3>
<p>新的FastLock技术能显著减少锁定时间，即使在使用窄带环路<a href="https://www.elecfans.com/tags/滤波器/" target="_blank"><u>滤波器</u></a>和外部VCO时，也能在不到1.5 ms内完成频率切换。独特的可<a href="https://www.elecfans.com/v/tag/1315/" target="_blank"><u>编程</u></a>乘法器被集成在R - 分频器中，可有效避免和减少整数边界杂散，提高相位检测器频率，从而提升整体性能。</p>
<h3>3. 丰富的调制与输出模式</h3>
<p>支持2 - 、4 - 和8 - 级或任意级直接数字FSK调制，可通过编程或引脚实现。输出端集成了T/R开关，可配置为发射和接收开关，也能作为1:2扇出缓冲器同时输出两个相同信号。此外，还能在两个预定义频率F1和F2之间快速切换，非常适合FDD双工系统。</p>
<h3>4. 低功耗设计</h3>
<p><a href="https://www.elecfans.com/tags/电流/" target="_blank"><u>电流</u></a>消耗低，合成器模式（内部VCO）典型电流为39 mA，PLL模式（外部VCO）典型电流为9 mA。并且，它采用24位分数N Delta Sigma调制器，提供精细的频率分辨率。</p>
<h3>5. 与LMX2571的差异</h3>
<p>与LMX2571相比，LMX2571 - EP没有TrCtl引脚和OSCin*引脚，不支持差分模式和晶体模式。在设计时，我们需要根据具体需求来选择合适的型号。</p>
<h2>二、应用领域广泛</h2>
<p>LMX2571-EP的高性能使其在多个领域都有出色的表现，包括寻的器前端、国防无线电、飞机驾驶舱显示器、飞行控制单元以及无线基础设施等。这些应用场景对频率合成器的稳定性、低噪声和快速切换能力都有较高要求，而LMX2571 - EP正好满足了这些需求。</p>
<h2>三、详细功能解析</h2>
<h3>1. 参考<a href="https://www.hqchip.com/app/850" target="_blank"><u>振荡器</u></a>输入</h3>
<p>OSCin引脚作为频率参考输入，可由CMOS<a href="https://www.elecfans.com/tags/时钟/" target="_blank"><u>时钟</u></a>单端驱动。该信号用于VCO校准，因此在编程R0<a href="https://www.elecfans.com/tags/寄存器/" target="_blank"><u>寄存器</u></a>时，必须在OSCin引脚施加合适的信号。为了获得最佳的分数杂散和相位噪声，建议使用方波信号，因为其较高的转换速率有助于提升性能。</p>
<h3>2. R - 分频器和乘法器</h3>
<p>R - 分频器由预分频器、乘法器（MULT）和后分频器组成。预分频器和后分频器用于降低频率，而MULT用于提高频率。添加乘法器的目的是避免和减少整数边界杂散，或提高相位检测器频率。但需要注意的是，乘法器必须大于预分频器，且当乘法器值大于6时，可能会引入噪声。</p>
<h3>3. PLL相位检测器和<a href="https://www.hqchip.com/app/1734" target="_blank"><u>电荷泵</u></a></h3>
<p>相位检测器比较后分频器和N - 分频器的输出，并生成与相位误差对应的校正电流。电荷泵电流可编程，在内部电荷泵和5 - V电荷泵中，其可编程的最小值、步长和最大值都有明确规定。在使用内部VCO和外部VCO时，电荷泵的输出引脚和电流设置方式有所不同。</p>
<h3>4. PLL N - 分频器和分数电路</h3>
<p>N - 分频器的总价值由整数部分Ninteger和分数部分Nfrac = NUM / DEN组成，其中Ninteger、NUM和DEN均可编程。Delta Sigma调制器的阶数也可编程，从整数模式到四阶，还可选择不同的抖动模式来减少分数杂散。</p>
<h3>5. 部分集成环路滤波器</h3>
<p>LMX2571 - EP集成了环路滤波器的第三和第四极点，<a href="https://www.hqchip.com/app/485" target="_blank"><u>电阻</u></a>值可通过MICROWIRE<a href="https://m.hqchip.com/app/1787" target="_blank"><u>接口</u></a>独立编程。较大的电阻值会增强内部环路滤波器的衰减能力，但该部分集成环路滤波器仅适用于合成器模式。</p>
<h3>6. 低噪声、全集成VCO</h3>
<p>内部集成了一个全集成VCO，其频率随环路滤波器的调谐电压变化。VCO输出先经过预分频器，预分频器值可在2和4之间选择。一般来说，预分频器为2时，相位噪声性能更好；为4时，电流消耗更低。VCO频率范围被划分为多个频段，需要进行频率和幅度校准以优化相位噪声。</p>
<h3>7. 可编程RF输出分频器和缓冲器</h3>
<p>内部VCO RF输出分频器由两个子分频器组成，总分频值为它们的乘积，最小值为4，最大值为448。外部VCO使用时只有一个输出分频器，其值可在1到10之间编程。RF输出缓冲器类型可在推挽和开漏之间选择，输出功率也可进行编程控制。</p>
<h3>8. 集成TX/RX开关与<a href="https://www.hqchip.com/app/1731" target="_blank"><u>电源管理</u></a></h3>
<p>集成的T/R开关可将内部或外部VCO分频后的信号路由到RFoutTx或RFoutRx<a href="https://m.hqchip.com/app/1808" target="_blank"><u>端口</u></a>，也可配置为扇出缓冲器。设备可通过CE引脚或POWERDOWN位进行<a href="https://m.hqchip.com/app/1708" target="_blank"><u>电源开关</u></a>控制，在掉电状态下，所有寄存器数据会保留，仍可对设备进行编程。</p>
<h3>9. 锁定检测与寄存器读写</h3>
<p>MUXout引脚可配置为输出锁定检测信号，当PLL锁定时输出逻辑高电平，未锁定时输出逻辑低电平。同时，设备允许对任何寄存器进行读回操作，通过设置R/W位和发送寄存器地址，可读取所需寄存器的值。</p>
<h2>四、设备功能模式</h2>
<h3>1. 操作模式</h3>
<p>有合成器模式和PLL模式两种。合成器模式使用内部VCO，PLL模式则需要外部VCO来完成环路。</p>
<h3>2. 双工模式</h3>
<p>支持三种双工模式，即合成器双工模式、PLL双工模式和合成器/PLL双工模式，可在两个预定义寄存器集F1和F2之间快速切换频率，适用于双工操作。</p>
<h3>3. FSK模式</h3>
<p>支持四种直接数字FSK调制模式，包括FSK <a href="https://www.elecfans.com/tags/pi/" target="_blank"><u>PI</u></a>N模式、FSK SPI模式、FSK SPI FAST模式和FSK I2S模式，可根据具体需求选择合适的调制方式。</p>
<h2>五、编程与配置要点</h2>
<h3>1. 编程寄存器</h3>
<p>使用多个24位寄存器对LMX2571 - EP进行编程，通过24位移位寄存器间接编程片上寄存器。移位寄存器由数据字段、地址字段和R/W位组成，MSB为R/W位，0表示写寄存器，1表示读寄存器。</p>
<h3>2. 推荐编程序列</h3>
<ul>
<li><strong>初始上电编程</strong>：先给设备供电，确保Vcc引脚电压正常；若CE引脚为低电平，将其拉高；等待100 µs让内部<a href="https://m.hqchip.com/app/1700" target="_blank"><u>LDO</u></a>稳定；在OSCin引脚施加有效参考信号；将RESET = 1写入寄存器R0，复位所有寄存器；按顺序编程寄存器R60、R58、R53、…、R1和R0。</li>
<li><strong>频率更改编程</strong>：若N - 分频器改变，编程相关寄存器后，将FCAL_EN = 1写入R0；在FSK SPI模式、FSK SPI FAST模式和FSK I2S模式中，仅需编程相关寄存器；若在F1和F2之间切换频率，编程相关控制寄存器并切换F1F2_SEL位。</li>
</ul>
<h2>六、应用与实现案例</h2>
<h3>1. 直接数字FSK调制</h3>
<p>在分数模式下，可编程输出频率之间的最小频率差为Δfmin = fPD / DEN。在FSK操作中，瞬时载波频率在预定义频率之间变化，可通过计算所需的FSK步数来实现频率偏移。不同模式下，使用不同的寄存器存储所需的FSK频率偏移。</p>
<h3>2. 频率和输出端口切换</h3>
<p>通过F1F2_SEL位控制输出切换，可实现快速的频率和端口切换。</p>
<h3>3. OSCin配置</h3>
<p>OSCin仅支持单端时钟，其阻抗可编程为高阻抗或50 Ω。</p>
<h3>4. FastLock与外部VCO</h3>
<p>在PLL模式中，使用外部VCO和窄带环路滤波器时，FastLock技术可显著加快频率切换速度。通过FLout1和FLout2引脚控制SPST<a href="https://www.elecfans.com/analog/" target="_blank"><u>模拟</u></a>开关，可减少<a href="https://www.elecfans.com/tags/电容/" target="_blank"><u>电容</u></a>的充放电时间，从而提高切换速度。</p>
<h3>5. 典型应用案例</h3>
<ul>
<li><strong>合成器双工模式</strong>：使用内部VCO，支持4FSK直接数字调制。设计时需计算各功能模块的频率，合理设置寄存器参数，以满足频率、噪声、调制等性能要求。</li>
<li><strong>PLL双工模式</strong>：旁路内部VCO，使用外部VCO。通过合适的频率规划和寄存器设置，可实现快速频率切换和稳定的性能。</li>
<li><strong>合成器/PLL双工模式</strong>：可在内部和外部VCO之间切换频率，支持任意FSK调制模拟FM调制。设计时要考虑不同VCO的频率范围和性能特点，确保满足设计要求。</li>
</ul>
<h2>七、<a href="https://www.hqchip.com/app.html" target="_blank"><u>电源</u></a>与布局建议</h2>
<h3>1. 电源供应</h3>
<p>建议在每个电源引脚附近放置100 - nF电容，若分数杂散是主要问题，可使用铁氧体磁珠进一步减少杂散。VcpExt是5 - V电荷泵的电源引脚，PLL模式下需提供5 V电压，合成器模式下可提供3.3 V或5 V电压。由于LMX2571 - EP集成了LDO，对外部电源的要求相对宽松，还能与<a href="https://m.hqchip.com/app/1703" target="_blank"><u>DC</u></a> - DC<a href="https://www.hqchip.com/app/1718" target="_blank"><u>转换器</u></a>配合使用，如TPS560200、TPS62050等。</p>
<h3>2. 布局设计</h3>
<p>布局时可参考EVM说明（SNAU182），一般原则与其他PLL设备相似。要注意将主接地和OSCin接地分开，避免将携带开关信号的走线靠近电荷泵走线和外部VCO。在使用FSK I2S模式时，要防止I2S时钟与PLL电路之间的<a href="https://www.elecfans.com/tags/耦合/" target="_blank"><u>耦合</u></a>。</p>
<h2>八、总结</h2>
<p>LMX2571 - EP是一款功能强大、性能卓越的RF合成器，其丰富的特性和灵活的配置使其适用于多种复杂的应用场景。在设计过程中，我们需要深入理解其<a href="https://m.elecfans.com/v/tag/773/" target="_blank"><u>工作原理</u></a>和编程方法，结合具体应用需求进行合理的设计和优化。希望本文能为各位电子工程师在使用LMX2571 - EP时提供有价值的参考，大家在实际应用中遇到任何问题，欢迎一起交流探讨。 </p>]]></description></item><item>    <title><![CDATA[瑞芯微RKNPU开发全指南：从环境搭建到性能优化，一文搞定边缘AI部署]]></title>    <link>https://www.elecfans.com/d/7401341.html</link>    <guid>https://www.elecfans.com/d/7401341.html</guid>    <pubDate>2026-02-06 16:35:00</pubDate>    <description><![CDATA[<div class="rich_media_content js_underline_content autoTypeSetting24psection">
	<h1>
		</h1>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">在边缘</span></span></font><span><span style="background-color:rgb(255,255,255);"><a href="https://www.elecfans.com/tags/ai/" target="_blank"><u>AI</u></a></span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">领域，<a href="https://bbs.elecfans.com/zhuti_1179_1.html" target="_blank"><u>瑞芯微</u></a>（</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);"><a href="https://bbs.elecfans.com/zhuti_1179_1.html" target="_blank"><u>Rockchip</u></a></span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">RKNPU</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">凭借高性能、低功耗的特性，成为很多<a href="https://www.elecfans.com/v/tag/232/" target="_blank"><u>嵌入式开发</u></a>者的首选。无论是</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">RK3588</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">3</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">核</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">NPU</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">（算力达</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">6TOPS</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">），还是</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">RV1106</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的轻量化</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">NPU</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，都需要通过</span></span></font></span><b><span><span><span style="background-color:rgb(255,255,255);">RKNN <a href="https://www.hqchip.com/app/1522" target="_blank"><u>SD</u></a>K</span></span></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">实现模型部署。今天这篇文章，我们就从</span></span></font><span><span style="background-color:rgb(255,255,255);">SDK</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">核心组件、开发全流程、进阶优化到避坑指南，手把手教你搞定</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">RKNPU</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">开发！</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h2>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">一、先搞懂：</span></span></font><span><span style="background-color:rgb(255,255,255);">RKNN SDK</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">核心组件</span></span></font></span></b></h2>
	<p>
		</p>
	<p>
		<span><span><span style="background-color:rgb(255,255,255);">RKNN SDK</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">不是单一工具，而是一套</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“PC</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">端工具链</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">+</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">板端运行时</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的完整生态。先理清这</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">3</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">个核心组件的分工，后续开发才不会乱：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span><span><span style="background-color:rgb(255,255,255);">1.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">核心组件交互图</span></span></font></span></b></h3>
	<p>
		</p>
	<img src="https://file1.elecfans.com//web3/M00/3C/9A/wKgZO2kalGeAIWsMAAH2rYaEBK8052.png" alt="wKgZO2kalGeAIWsMAAH2rYaEBK8052.png"/><h3>
		<b><span><span><span style="background-color:rgb(255,255,255);">2.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">组件详解</span></span></font></span></b></h3>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><span><span style="background-color:rgb(255,255,255);">RKNN-Toolkit2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">PC</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">端）</span></span></font></span></b></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);"><a href="https://bbs.elecfans.com/group_1231" target="_blank"><u>开发者</u></a>的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">模型加工厂</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，主要负责：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">◦</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">模型转换：支持</span></span></font><span><span style="background-color:rgb(255,255,255);">ONNX</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">PyTorch</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);"><a href="https://www.elecfans.com/tags/tensorflow/" target="_blank"><u>TensorFlow</u></a></span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">等主流框架转</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">RKNN</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">格式；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">◦</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">量化优化：将</span></span></font><span><span style="background-color:rgb(255,255,255);">FP32</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">模型量化为</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">INT8</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">（支持</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Normal/KL-Divergence/MMSE</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">三种<a href="https://m.elecfans.com/v/tag/2562/" target="_blank"><u>算法</u></a>），减小模型体积、提升推理速度；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">◦</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">评估分析：在<a href="https://www.elecfans.com/analog/" target="_blank"><u>模拟</u></a>器或连板状态下，分析模型精度（余弦距离）、性能（单帧耗时）、内存（权重</span></span></font><span><span style="background-color:rgb(255,255,255);">/</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">中间</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);"><a href="https://www.elecfans.com/tags/te/" target="_blank"><u>Te</u></a>nsor</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">占用）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><span><span style="background-color:rgb(255,255,255);">RKNN Run<a href="https://bbs.elecfans.com/group_715" target="_blank"><u>ti</u></a>me</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（板端）</span></span></font></span></b></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">模型的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">推理引擎</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，分两种</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">A<a href="https://www.elecfans.com/tags/pi/" target="_blank"><u>PI</u></a></span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">◦</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">通用</span></span></font><span><span style="background-color:rgb(255,255,255);">API</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：易上手，数据预处理（归一化、格式转换）在</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);"><a href="https://m.elecfans.com/v/tag/132/" target="_blank"><u>CPU</u></a></span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">完成，适合快速验证；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">◦</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">零拷贝</span></span></font><span><span style="background-color:rgb(255,255,255);">API</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：高性能，预处理在</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">NPU</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">完成，数据无需</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">CPU-NPU</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">拷贝（直接用物理地址</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">/fd</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">），适合摄像头、视频解码等低延迟场景。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><span><span style="background-color:rgb(255,255,255);">RKNN Server</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（板端）</span></span></font></span></b></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">连板调试的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">桥梁</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，运行在开发板后台，接收</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">PC</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">端</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Toolkit2</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的指令，转发数据</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">/</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">推理结果，支持多设备管理。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h2>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">二、开发全流程：从</span></span></font><span><span style="background-color:rgb(255,255,255);">0</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">到</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">1</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">部署一个模型</span></span></font></span></b></h2>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">以</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“MobileNet</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">图像分类模型</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">为例，带大家走一遍完整开发流程，关键步骤附实操代码和注意事项：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span><span><span style="background-color:rgb(255,255,255);">1.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">开发全流程图表</span></span></font></span></b></h3>
	<p>
		</p>
	<img src="https://file1.elecfans.com//web3/M00/3C/9A/wKgZO2kalGiADFFoAACMGFWIcxY757.png" alt="wKgZO2kalGiADFFoAACMGFWIcxY757.png"/><h3>
		<b><span><span><span style="background-color:rgb(255,255,255);">2. step 1</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：环境准备</span></span></font></span></b></h3>
	<p>
		</p>
	<h4>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><span><span style="background-color:rgb(255,255,255);">1</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">PC</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">端：安装</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">RKNN-Toolkit2</span></span></font></span></b></h4>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">推荐用</span></span></font><span><span style="background-color:rgb(255,255,255);">Docker</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（避免环境冲突），命令如下：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__comment"># 1. 安装Docker并添加用户组</span></span></code><code><span>sudo groupadd docker</span></code><code><span>sudo usermod -aG docker<span class="code-snippet__variable">$USER</span></span></code><code><span>newgrp docker</span></code><code><span><span class="code-snippet__comment"># 2. 加载RKNN-Toolkit2镜像（镜像从瑞芯微网盘下载）</span></span></code><code><span>docker lo<a href="https://bbs.elecfans.com/zhuti_1472_1.html" target="_blank"><u>ad</u></a> --input rknn-toolkit2-x.x.x-cpxx-docker.tar.gz</span></code><code><span><span class="code-snippet__comment"># 3. 启动容器（映射<a href="https://www.hqchip.com/app/1515" target="_blank"><u>USB</u></a>和示例代码）</span></span></code><code><span>docker run -t -i --privileged -v /dev/bus/usb:/dev/bus/usb -v /your/examples:/examples rknn-toolkit2:x.x.x-cpxx /bin/bash</span></code></pre>
	<h4>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><span><span style="background-color:rgb(255,255,255);">2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）板端：确认</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">NPU</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">环境</span></span></font></span></b></h4>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">开发板必须满足</span></span></font><span><span style="background-color:rgb(255,255,255);">3</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">个条件：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><span><span style="background-color:rgb(255,255,255);">NPU</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">驱动版本</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">≥0.9.2</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">（查询命令：</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">cat /sys/kernel/debug/rknn/driver_version</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><span><span style="background-color:rgb(255,255,255);">RKNN Server</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">已启动（查询命令：</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">ps | grep rknn_server</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">，未启动则执行</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">restart_rknn.sh</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><span><span style="background-color:rgb(255,255,255);">Runtime</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">库版本与</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Toolkit2</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">匹配（如</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Toolkit2 v2.0.0</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">需</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">librknnrt.so v2.0.0</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span><span><span style="background-color:rgb(255,255,255);">3. step 2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：模型转换（核心步骤）</span></span></font></span></b></h3>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">以</span></span></font><span><span style="background-color:rgb(255,255,255);">ONNX</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">模型为例，用</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Toolkit2</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);"><a href="https://www.elecfans.com/tags/python/" target="_blank"><u>Python</u></a></span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);"><a href="https://m.hqchip.com/app/1787" target="_blank"><u>接口</u></a>实现转换：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__keyword">from</span>rknn.api<span class="code-snippet__keyword">import</span>RKNN</span></code><code><span><span class="code-snippet__comment"># 1. 初始化RKNN对象</span></span></code><code><span>rknn = RKNN(verbose=<span class="code-snippet__literal">True</span>)</span></code><code><span><span class="code-snippet__comment"># 2. 配置转换参数（目标平台、均值/归一化、量化）</span></span></code><code><span>rknn.config(</span></code><code><span>  mean_values=[[<span class="code-snippet__number">103.94</span>,<span class="code-snippet__number">116.78</span>,<span class="code-snippet__number">123.68</span>]], <span class="code-snippet__comment"># 与训练时一致</span></span></code><code><span>  std_values=[[<span class="code-snippet__number">58.82</span>,<span class="code-snippet__number">58.82</span>,<span class="code-snippet__number">58.82</span>]],</span></code><code><span>  target_platform=<span class="code-snippet__string">'rk3588'</span>, <span class="code-snippet__comment"># 目标硬件（如rk3566、rv1106）</span></span></code><code><span>  quantized_algorithm=<span class="code-snippet__string">'normal'</span>, <span class="code-snippet__comment"># 量化算法</span></span></code><code><span>  do_quantization=<span class="code-snippet__literal">True</span><span class="code-snippet__comment"># 开启量化</span></span></code><code><span>)</span></code><code><span><span class="code-snippet__comment"># 3. 加载ONNX模型</span></span></code><code><span>ret = rknn.load_onnx(model=<span class="code-snippet__string">'./mobilenet_v2.onnx'</span>)</span></code><code><span><span class="code-snippet__comment"># 4. 量化构建（需准备校正集dataset.txt，每行1张图片路径）</span></span></code><code><span>ret = rknn.build(do_quantization=<span class="code-snippet__literal">True</span>, dataset=<span class="code-snippet__string">'./dataset.txt'</span>)</span></code><code><span><span class="code-snippet__comment"># 5. 导出RKNN模型</span></span></code><code><span>ret = rknn.export_rknn(<span class="code-snippet__string">'./mobilenet_v2.rknn'</span>)</span></code><code><span><span class="code-snippet__comment"># 6. 释放资源</span></span></code><code><span>rknn.release()</span></code></pre>
	<p>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">关键注意点</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">校正集（</span></span></font><span><span style="background-color:rgb(255,255,255);">dataset.txt</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）需覆盖业务场景（如分类模型需包含所有类别图片），数量建议</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">20-200</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">张；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">目标平台（</span></span></font><span><span style="background-color:rgb(255,255,255);">target_platform</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）必须与开发板一致，否则模型无法运行（</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">RK3566/3568</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">通用，</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">RK3588/3588S</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">通用）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span><span><span style="background-color:rgb(255,255,255);">4. step 3</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：模型评估（避坑关键）</span></span></font></span></b></h3>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">转换后的模型，必须先评估再部署，避免</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">能跑但精度</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">/</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">性能不达标</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__comment"># 1. 初始化运行时（连板评估，target设为开发板型号）</span></span></code><code><span><span class="code-snippet__attr">ret</span>= rknn.init_runtime(target=<span class="code-snippet__string">'rk3588'</span>, device_id=<span class="code-snippet__string">'515e9b401c060c0b'</span>)</span></code><code><span><span class="code-snippet__comment"># 2. 精度分析（对比量化模型与浮点模型的每层误差）</span></span></code><code><span><span class="code-snippet__attr">ret</span>= rknn.<a href="https://m.hqchip.com/app/1703" target="_blank"><u>ac</u></a>curacy_analysis(inputs=[<span class="code-snippet__string">'./test.jpg'</span>], target=<span class="code-snippet__string">'rk3588'</span>)</span></code><code><span><span class="code-snippet__comment"># 3. 性能评估（输出单帧耗时、FPS、每层算子耗时）</span></span></code><code><span><span class="code-snippet__attr">pe<a href="https://www.elecfans.com/tongxin/rf/" target="_blank"><u>rf</u></a>_detail</span>= rknn.eval_perf()</span></code><code><span><span class="code-snippet__comment"># 4. 内存评估（输出权重、中间Tensor内存占用）</span></span></code><code><span><span class="code-snippet__attr">mem_detail</span>= rknn.eval_memory()</span></code></pre>
	<p>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">评估结果解读</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">精度：余弦距离越接近</span></span></font><span><span style="background-color:rgb(255,255,255);">1</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（如</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">0.999</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">），误差越小；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">性能：</span></span></font><span><span style="background-color:rgb(255,255,255);">RK3588</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">运行</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">MobileNetV2</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">INT8</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">量化后</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">FPS</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">可达</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">100+</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">内存：权重内存</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">≈3.5MB</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，总内存</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">≈5.4MB</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">（符合边缘设备需求）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span><span><span style="background-color:rgb(255,255,255);">5. step 4</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：板端部署（</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">C/Python</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">任选）</span></span></font></span></b></h3>
	<p>
		</p>
	<h4>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><span><span style="background-color:rgb(255,255,255);">1</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Python</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">部署（快速验证，用</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">RKNN-Toolkit Lite2</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）</span></span></font></span></b></h4>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span>from rknn.api import RKNNLite</span></code><code><span><span class="code-snippet__comment"># 1. 初始化RKNNLite对象</span></span></code><code><span>rknn_lite = RKNNLite(verbose=True)</span></code><code><span><span class="code-snippet__comment"># 2. 加载RKNN模型</span></span></code><code><span>ret = rknn_lite.load_rknn('./mobilenet_v2.rknn')</span></code><code><span><span class="code-snippet__comment"># 3. 初始化运行时（多核配置：RK3588可设NPU_CORE_0_1_2）</span></span></code><code><span>ret = rknn_lite.init_runtime(core_mask=RKNNLite.NPU_CORE_ALL)</span></code><code><span><span class="code-snippet__comment"># 4. 预处理输入图片</span></span></code><code><span>img = cv2.imread('./test.jpg')</span></code><code><span>img = cv2.cvtColor(img, cv2.COLOR_BGR2RGB)</span></code><code><span>img = np.expand_dims(img, 0)</span></code><code><span><span class="code-snippet__comment"># 5. 推理</span></span></code><code><span>outputs = rknn_lite.inference(inputs=[img])</span></code><code><span><span class="code-snippet__comment"># 6. 后处理（输出TOP5类别）</span></span></code><code><span>show_top5(outputs)</span></code><code><span><span class="code-snippet__comment"># 7. 释放资源</span></span></code><code><span>rknn_lite.release()</span></code></pre>
	<h4>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><span><span style="background-color:rgb(255,255,255);">2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">C</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">部署（高性能，用</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">RKNN Runtime</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）</span></span></font></span></b></h4>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">核心流程：</span></span></font></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">初始化模型</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">→</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">设置输入</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">→</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">推理</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">→</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">获取输出</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">→</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">释放资源</span></span></font></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">，关键代码片段：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__meta">#</span><span class="code-snippet__meta"><span class="code-snippet__keyword">include</span></span><span class="code-snippet__meta"/><span class="code-snippet__meta"><span class="code-snippet__string">"rknn_api.h"</span></span></span></code><code><span><span class="code-snippet__function"><span class="code-snippet__type">int</span></span><span class="code-snippet__function"/><span class="code-snippet__function"><span class="code-snippet__title">main</span></span><span class="code-snippet__function"><span class="code-snippet__params">()</span></span><span class="code-snippet__function"/>{</span></code><code><span>  rknn_context ctx;</span></code><code><span> <span class="code-snippet__comment">// 1. 初始化模型</span></span></code><code><span>  ret =<span class="code-snippet__built_in">rknn_init</span>(&amp;ctx, model_buf, model_len,<span class="code-snippet__number">0</span>,<span class="code-snippet__literal">NULL</span>);</span></code><code><span> </span></code><code><span> <span class="code-snippet__comment">// 2. 查询输入输出属性</span></span></code><code><span>  rknn_input_output_num io_num;</span></code><code><span> <span class="code-snippet__built_in">rknn_query</span>(ctx, RKNN_QUERY_IN_OUT_NUM, &amp;io_num,<span class="code-snippet__built_in">sizeof</span>(io_num));</span></code><code><span> </span></code><code><span> <span class="code-snippet__comment">// 3. 设置输入数据</span></span></code><code><span>  rknn_input inputs[io_num.n_input];</span></code><code><span>  inputs[<span class="code-snippet__number">0</span>].index =<span class="code-snippet__number">0</span>;</span></code><code><span>  inputs[<span class="code-snippet__number">0</span>].type = RKNN_TENSOR_UINT8;</span></code><code><span>  inputs[<span class="code-snippet__number">0</span>].fmt = RKNN_TENSOR_NHWC;</span></code><code><span>  inputs[<span class="code-snippet__number">0</span>].buf = img_data;</span></code><code><span>  inputs[<span class="code-snippet__number">0</span>].size = img_size;</span></code><code><span> <span class="code-snippet__built_in">rknn_inputs_set</span>(ctx, io_num.n_input, inputs);</span></code><code><span> </span></code><code><span> <span class="code-snippet__comment">// 4. 推理</span></span></code><code><span> <span class="code-snippet__built_in">rknn_run</span>(ctx,<span class="code-snippet__literal">NULL</span>);</span></code><code><span> </span></code><code><span> <span class="code-snippet__comment">// 5. 获取输出</span></span></code><code><span>  rknn_output outputs[io_num.n_output];</span></code><code><span> <span class="code-snippet__built_in">rknn_outputs_get</span>(ctx, io_num.n_output, outputs,<span class="code-snippet__literal">NULL</span>);</span></code><code><span> </span></code><code><span> <span class="code-snippet__comment">// 6. 后处理</span></span></code><code><span> <span class="code-snippet__built_in">post_process</span>(outputs);</span></code><code><span> </span></code><code><span> <span class="code-snippet__comment">// 7. 释放资源</span></span></code><code><span> <span class="code-snippet__built_in">rknn_outputs_release</span>(ctx, io_num.n_output, outputs);</span></code><code><span> <span class="code-snippet__built_in">rknn_destroy</span>(ctx);</span></code><code><span> <span class="code-snippet__keyword">return</span><span class="code-snippet__number">0</span>;</span></code><code><span>}</span></code></pre>
	<h2>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">三、进阶优化：让模型跑更快、更省内存</span></span></font></span></b></h2>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">掌握以下技巧，能让</span></span></font><span><span style="background-color:rgb(255,255,255);">RKNPU</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">性能翻倍、内存占用减半，尤其适合边缘设备：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span><span><span style="background-color:rgb(255,255,255);">1.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">性能优化</span></span></font></span></b></h3>
	<p>
		</p>
	<h4>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><span><span style="background-color:rgb(255,255,255);">1</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">NPU</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">多核配置（</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">RK3588/RK3576</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">专属）</span></span></font></span></b></h4>
	<p>
		</p>
	<p>
		<span><span><span style="background-color:rgb(255,255,255);">RK3588</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">有</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">3</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">个</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">NPU</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">核，</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">RK3576</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">有</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">2</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">个，通过</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">core_mask</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">设置多核运行：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__comment"># Python（Toolkit2）</span></span></code><code><span>rknn.init_runtime(target=<span class="code-snippet__string">'rk3588'</span>, core_mask=RKNN.NPU_CORE_0_1_2)</span></code><code><span><span class="code-snippet__comment"># C API</span></span></code><code><span>rknn_set_core_mask(ctx, RKNN_NPU_CORE_0_1_2);</span></code></pre>
	<p>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">效果</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font><span><span style="background-color:rgb(255,255,255);">MobileNetV2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">在</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">RK3588</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">上，多核运行比单核快</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">2.5</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">倍。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h4>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><span><span style="background-color:rgb(255,255,255);">2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）零拷贝</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">API</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">（减少</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);"><a href="https://www.hqchip.com/app/1729" target="_blank"><u>DDR</u></a></span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">带宽消耗）</span></span></font></span></b></h4>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">适合摄像头、视频解码等场景，数据直接用物理地址：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__comment">// 1. 创建外部分配内存（用物理地址）</span></span></code><code><span>rknn_tensor_mem* input_mem =<span class="code-snippet__built_in">rknn_create_mem_from_phys</span>(ctx, phys_addr, virt_addr, size);</span></code><code><span><span class="code-snippet__comment">// 2. 设置零拷贝输入</span></span></code><code><span><span class="code-snippet__built_in">rknn_set_io_mem</span>(ctx, input_mem, &amp;input_attr);</span></code><code><span><span class="code-snippet__comment">// 3. 推理</span></span></code><code><span><span class="code-snippet__built_in">rknn_run</span>(ctx,<span class="code-snippet__literal">NULL</span>);</span></code></pre>
	<p>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">效果</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：数据拷贝耗时减少</span></span></font><span><span style="background-color:rgb(255,255,255);">80%</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">，端到端延迟降低</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">30%</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span><span><span style="background-color:rgb(255,255,255);">2.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">内存优化</span></span></font></span></b></h3>
	<p>
		</p>
	<h4>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><span><span style="background-color:rgb(255,255,255);">1</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">RK3588 S<a href="https://www.elecfans.com/tags/ram/" target="_blank"><u>RAM</u></a></span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">使用（减轻</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">DDR</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">压力）</span></span></font></span></b></h4>
	<p>
		</p>
	<p>
		<span><span><span style="background-color:rgb(255,255,255);">RK3588</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">有</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">956KB SRAM</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，可分配给</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">NPU</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">存中间</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Tensor</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__comment">// 初始化时开启SRAM</span></span></code><code><span>ret =<span class="code-snippet__built_in">rknn_init</span>(&amp;ctx, model, size, RKNN_FLAG_ENABLE_SRAM,<span class="code-snippet__literal">NULL</span>);</span></code></pre>
	<p>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">查询</span></span></font><span><span style="background-color:rgb(255,255,255);">SRAM</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">使用</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">cat /sys/kernel/debug/rknn/mm</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">，可看到已用</span></span></font><span><span style="background-color:rgb(255,255,255);">/</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">剩余大小。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h4>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><span><span style="background-color:rgb(255,255,255);">2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）动态</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Shape</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">（单模型支持多分辨率）</span></span></font></span></b></h4>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">无需生成多个模型，一个模型支持多种输入尺寸（如</span></span></font><span><span style="background-color:rgb(255,255,255);">224x224</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">192x192</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__comment"># 配置动态输入</span></span></code><code><span>dynamic_input = [</span></code><code><span>  [[1,3,224,224]],</span></code><code><span>  [[1,3,192,192]]</span></code><code><span>]</span></code><code><span>rknn.config(dynamic_input=dynamic_input)</span></code></pre>
	<p>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">场景</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font><span><span style="background-color:rgb(255,255,255);">NLP</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">模型（可变序列长度）、图像分割（可变分辨率）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span><span><span style="background-color:rgb(255,255,255);">3.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">模型优化</span></span></font></span></b></h3>
	<p>
		</p>
	<h4>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><span><span style="background-color:rgb(255,255,255);">1</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）混合量化（精度与性能平衡）</span></span></font></span></b></h4>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">对精度敏感的层（如输出层）用</span></span></font><span><span style="background-color:rgb(255,255,255);">FP16</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">，其他层用</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">INT8</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__comment"># 混合量化配置文件</span></span></code><code><span><span class="code-snippet__section">custom_quantize_laye<a href="https://www.elecfans.com/tags/rs/" target="_blank"><u>rs</u></a>:</span></span></code><code><span> Conv__350 float16 <span class="code-snippet__comment"># 指定层用FP16</span></span></code><code><span><span class="code-snippet__section">quantize_parameters:</span></span></code><code><span> FeatureExtractor/Conv</span></code><code><span>  qtype: asymmetric_quantized</span></code><code><span>  dtype: int8</span></code></pre>
	<h4>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><span><span style="background-color:rgb(255,255,255);">2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）模型剪枝（无损减小体积）</span></span></font></span></b></h4>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">开启</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">model_pruning</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">，自动移除冗余权重：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span>rknn.config(model_pruning=<span class="code-snippet__literal">True</span>)</span></code></pre>
	<p>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">效果</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font><span><span style="background-color:rgb(255,255,255);">MobileNetV2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">权重减少</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">6.9%</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，运算量减少</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">13.4%</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，精度无损失。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h2>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">四、避坑指南：开发者常踩的</span></span></font><span><span style="background-color:rgb(255,255,255);">5</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">个坑</span></span></font></span></b></h2>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">1.</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">连板调试失败</span></span></font></span></b></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">◦</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">原因：</span></span></font><span><span style="background-color:rgb(255,255,255);">RKNN Server</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">未启动或版本不匹配；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">◦</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">解决：执行</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">restart_rknn.sh</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">，确保</span></span></font><span><span style="background-color:rgb(255,255,255);">Server</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">版本与</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Toolkit2</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">一致。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">1.</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">量化后精度下降严重</span></span></font></span></b></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">◦</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">原因：校正集不具代表性，或量化算法选择不当；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">◦</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">解决：更换</span></span></font><span><span style="background-color:rgb(255,255,255);">KL-Divergence/MMSE</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">算法，增加校正集数量（</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">50-100</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">张）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">1.</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">模型转换报错</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">动态</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Shape</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">不支持</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font></span></b></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">◦</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">原因：</span></span></font><span><span style="background-color:rgb(255,255,255);">Toolkit2 &lt; 1.5.2 </span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">不支持动态</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Shape</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">◦</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">解决：升级</span></span></font><span><span style="background-color:rgb(255,255,255);">Toolkit2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">到</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">1.5.2+</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，用</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">dynamic_input</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">配置。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">1.</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">板端推理耗时比连板评估长</span></span></font></span></b></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">◦</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">原因：连板评估有数据传输开销，板端推理更真实；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">◦</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">解决：以板端</span></span></font><span><span style="background-color:rgb(255,255,255);">C API</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">的</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">eval_perf</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">结果为准。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">1.</span></span></span></span><b><span><span><span style="background-color:rgb(255,255,255);">NPU Hang</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">住（推理耗时超</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">20s</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）</span></span></font></span></b></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">◦</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">原因：驱动</span></span></font><span><span style="background-color:rgb(255,255,255);">bug</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">或模型超出</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">FP16</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">范围；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">◦</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">解决：升级</span></span></font><span><span style="background-color:rgb(255,255,255);">NPU</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">驱动到最新版，训练时添加</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">BN</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">层限制数值范围。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h2>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">五、开发资源汇总</span></span></font></span></b></h2>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">最后给大家整理了必备资源，收藏好少走弯路：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><span><span style="background-color:rgb(255,255,255);">RKNN Toolkit2</span></span></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span><u><span><span><span style="background-color:rgb(255,255,255);">https://github.com/airockchip/rknn-toolkit2</span></span></span></u><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（含</span></span></font><span><span style="background-color:rgb(255,255,255);">API</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">文档、示例）；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><span><span style="background-color:rgb(255,255,255);">RKNN Model Zoo</span></span></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span><u><span><span><span style="background-color:rgb(255,255,255);">https://github.com/airockchip/rknn_model_zoo</span></span></span></u><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><span><span style="background-color:rgb(255,255,255);">MobileNet</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">YOLOv5</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">等预转换模型）；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><span><span style="background-color:rgb(255,255,255);">RGA</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">库</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span><u><span><span><span style="background-color:rgb(255,255,255);">https://github.com/airockchip/librga</span></span></span></u><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（图像缩放、旋转加速，配合</span></span></font><span><span style="background-color:rgb(255,255,255);">NPU</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">使用）；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">官方文档</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：本文基于《</span></span></font><span><span style="background-color:rgb(255,255,255);">RKNN SDK V2.0.0beta0</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">用户指南》，完整文档可在瑞芯微官网下载。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h2>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">总结</span></span></font></span></b></h2>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">瑞芯微</span></span></font><span><span style="background-color:rgb(255,255,255);">RKNPU</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">开发的核心是</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">工具链熟练</span></span></font><span><span style="background-color:rgb(255,255,255);">+</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">优化技巧到位</span></span></font></span></b><span><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">：先用</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Toolkit2</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">做好模型转换与评估，再根据场景选择通用</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">/</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">零拷贝</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">API</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，最后通过多核、</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">SRAM</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">、动态</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Shape</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">等技巧压榨性能。边缘</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">AI</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">部署不复杂，跟着这篇指南走，你也能快速搞定</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">RKNPU</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">！</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">如果有疑问，欢迎在评论区交流，也可以关注瑞芯微官方</span></span></font><span><span style="background-color:rgb(255,255,255);">GitHub</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">获取最新动态～</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（附：全文核心脑图）</span></span></font></span></p>
	<img src="https://file1.elecfans.com//web3/M00/3C/9A/wKgZO2kalGiAYPedAAHmZngU7wE206.png" alt="wKgZO2kalGiAYPedAAHmZngU7wE206.png"/><p>
		</p>
	<p>
		</p>
</div>
<div class="wx_detail">
	<p>
		</p>
</div>]]></description></item><item>    <title><![CDATA[RK平台系统分区调整与自动分区工具介绍]]></title>    <link>https://www.elecfans.com/d/7401339.html</link>    <guid>https://www.elecfans.com/d/7401339.html</guid>    <pubDate>2026-02-06 16:37:00</pubDate>    <description><![CDATA[<div class="rich_media_content js_underline_content autoTypeSetting24psection">
	<p>
		</p>
	<span style="font-family:Arial;font-weight:bold;font-size:15pt;"><span style="background-color:rgb(255,255,255);">一、RK</span></span><span style="font-family:Arial;font-weight:bold;font-size:15pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">平台系统分区需要调整的情况分析</span></span></font></span><p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">在</span></span></font><span><span style="background-color:rgb(255,255,255);">RK</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（<a href="https://bbs.elecfans.com/zhuti_1179_1.html" target="_blank"><u>瑞芯微</u></a>）平台上，系统分区需要调整的场景主要包括以下几种：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><span><span style="background-color:rgb(255,255,255);">1.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">系统功能迭代与升级</span></span></font></span></b></h4>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">当系统新增功能模块（如引入更复杂的应用、新增系统服务），或系统版本升级（如</span></span></font><span><span style="background-color:rgb(255,255,255);"><a href="https://bbs.elecfans.com/group_360" target="_blank"><u>Android</u></a></span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">版本更新）时，原有分区可能无法容纳新的镜像</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">/</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">数据。例如：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">system</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">分区</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：新系统镜像体积增大，若原</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">system</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">分区大小不足，会导致系统无法正常升级或运行，需调大该分区。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">kernel</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">分区</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：新内核镜像尺寸变化（如集成更多驱动、功能），也需同步调整分区大小。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><span><span style="background-color:rgb(255,255,255);">2.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">存储介质规格变更</span></span></font></span></b></h4>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">若更换</span></span></font><span><span style="background-color:rgb(255,255,255);">Flash</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">芯片（如从</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">8GB Flash</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">换成</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">16GB</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，或更换不同容量的同类型</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Flash</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">），总容量变化后需重新规划分区：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">总容量增大时，可按需扩展多个分区（如</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">userdata</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">分区用于用户数据存储，可根据需求扩容）；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">总容量减小时，需压缩非核心分区（如</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">cache</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">vendor</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">等），确保各分区总和匹配新</span></span></font><span><span style="background-color:rgb(255,255,255);">Flash</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">容量。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><span><span style="background-color:rgb(255,255,255);">3.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">新增</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">/</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">删减分区需求</span></span></font></span></b></h4>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">项目中新增功能需独立分区（如新增</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“<a href="https://www.elecfans.com/tags/ai/" target="_blank"><u>AI</u></a></span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">模型缓存分区</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">），或删减冗余分区时，需调整整体分区布局：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">新增分区时，需从其他分区</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">腾出</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">空间（调整相邻分区的大小、起始地址），确保地址连续且总容量匹配；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">删减分区时，可将释放的空间分配给其他分区，或调整分区结构优化存储利用。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><span><span style="background-color:rgb(255,255,255);">4.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">系统优化与问题解决</span></span></font></span></b></h4>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">若某分区频繁出现</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">空间不足</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">问题（如</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">userdata</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">分区因用户数据过多报错，</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">misc</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">分区因存储临时数据不足导致系统异常），需针对性调整该分区大小，同时平衡其他分区的容量。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><span><span style="background-color:rgb(255,255,255);">5.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">平台或架构适配</span></span></font></span></b></h4>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">当</span></span></font><span><span style="background-color:rgb(255,255,255);">RK</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">平台升级（如从</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">RK3326</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">切换到</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">RK3568</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">），或系统架构变化（如从传统分区切换到</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">AB</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">分区、</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">GPT</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">分区）时，分区的</span></span></font></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">起始地址规则</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">（如</span></span></font><span><span style="background-color:rgb(255,255,255);">uboot</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">分区起始地址，不同平台可能要求</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">4M</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">8M</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">偏移）、</span></span></font></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">分区类型</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">（如新增</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">met<a href="https://bbs.elecfans.com/zhuti_1472_1.html" target="_blank"><u>ad</u></a>ata</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">分区用于系统元数据管理）会变化，需重新调整分区布局以适配新平台要求。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span style="font-family:Arial;font-weight:bold;font-size:15pt;"><span><span style="background-color:rgb(255,255,255);">二、Excel</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">分区工具的介绍</span></span></font></span></b></h3>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">截图中的工具是一款</span></span></font></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">基于</span></span></font><span><span style="background-color:rgb(255,255,255);">Excel</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">表格的自动分区调整工具</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">，核心优势是</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">自动计算</span></span></font><span><span style="background-color:rgb(255,255,255);">+</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">便捷配置</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，极大简化了</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">RK</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">平台分区配置的工作量：</span></span></font></span></p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><img src="https://file1.elecfans.com//web3/M00/3C/92/wKgZPGkaix2AR7imAAA433VHaW0580.png" alt="wKgZPGkaix2AR7imAAA433VHaW0580.png"/></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><span><span style="background-color:rgb(255,255,255);">1.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">自动完成复杂计算</span></span></font></span></b></h4>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">分区配置需涉及</span></span></font><span><span style="background-color:rgb(255,255,255);">**</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">十六进制地址（</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">base</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）</span></span></font></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">和</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">大小（</span></span></font><span><span style="background-color:rgb(255,255,255);">size</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">**</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的精确计算（需保证分区地址连续、无重叠），手动计算易出错。该工具通过</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Excel</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">公式，实现：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">只需在</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">size (DEC)</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">列</span></span></font></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">手动填写各分区的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">十进制大小（</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">MB</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">表格自动计算出</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">base (HEX)</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">（分区起始地址，十六进制）、</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">size (HEX)</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">（分区大小，十六进制），以及</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">base (DEC)</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">（十进制起始地址，便于直观感知）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><span><span style="background-color:rgb(255,255,255);">2.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">直接对接参数文件格式</span></span></font></span></b></h4>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">RK</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">平台的分区配置通常写入</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">pa<a href="https://www.elecfans.com/tags/ram/" target="_blank"><u>ram</u></a>eter.txt</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">，格式为</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">base@size{par<a href="https://bbs.elecfans.com/group_715" target="_blank"><u>ti</u></a>tion}</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">（如</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">0x00010000@0x00012000{kernel}</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">）。工具生成的</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">base (HEX)</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">和</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">size (HEX)</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">可</span></span></font></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">直接复制填入</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">parameter.txt</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">，无需手动转换进制或计算地址偏移。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><span><span style="background-color:rgb(255,255,255);">3.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">清晰的使用指引</span></span></font></span></b></h4>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">表格内置</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">使用说明</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，明确了关键参数（如</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">flash size</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">总容量需根据实际</span></span></font><span><span style="background-color:rgb(255,255,255);">Flash</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">填写、</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">uboot</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">分区起始地址需手动适配平台规则等），降低了使用门槛，即使对分区计算不熟悉的<a href="https://bbs.elecfans.com/group_1231" target="_blank"><u>开发者</u></a>，也能快速上手。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><span><span style="background-color:rgb(255,255,255);">4.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">灵活适配不同场景</span></span></font></span></b></h4>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">无论是</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">调整单个分区大小</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">新增</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">/</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">删除分区</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，还是</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">适配新</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Flash</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">容量</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">/</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">新平台</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，只需修改</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">size (DEC)</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">列的数值，表格会自动重新分配所有分区的地址与大小，避免了手动调整时的地址冲突、计算错误等问题，大幅提升了</span></span></font><span><span style="background-color:rgb(255,255,255);">RK</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">平台分区配置的效率。</span></span></font></span></p>
	<p>
		<font face="等线"><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><span style="background-color:rgb(255,255,255);">5、生成的分区表替换原来的pamera<a href="https://www.elecfans.com/tags/te/" target="_blank"><u>te</u></a>r.txt即可</span></span></font></p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__attribute">FIRMWARE_VER</span>:<span class="code-snippet__number">14</span>.<span class="code-snippet__number">0</span></span></code><code><span><span class="code-snippet__attribute">MACHINE_MODEL</span>: rk3576_u</span></code><code><span><span class="code-snippet__attribute">MACHINE_ID</span>:<span class="code-snippet__number">007</span></span></code><code><span><span class="code-snippet__attribute">MANUFACTURER</span>: <a href="https://bbs.elecfans.com/zhuti_1179_1.html" target="_blank"><u>rockchip</u></a></span></code><code><span><span class="code-snippet__attribute">MAGIC</span>:<span class="code-snippet__number">0</span>x5041524B</span></code><code><span><span class="code-snippet__attribute">ATAG</span>:<span class="code-snippet__number">0</span>x00200800</span></code><code><span><span class="code-snippet__attribute">MACHINE</span>: rk3576_u</span></code><code><span><span class="code-snippet__attribute">CHECK_MASK</span>:<span class="code-snippet__number">0</span>x80</span></code><code><span><span class="code-snippet__attribute">PWR_HLD</span>:<span class="code-snippet__number">0</span>,<span class="code-snippet__number">0</span>,A,<span class="code-snippet__number">0</span>,<span class="code-snippet__number">1</span></span></code><code><span><span class="code-snippet__attribute">TYPE</span>: GPT</span></code><code><span><span class="code-snippet__attribute">CMDLINE</span>:mtdparts=rk29xxnand:<span class="code-snippet__number">0</span>x00002000@<span class="code-snippet__number">0</span>x00002000(security),<span class="code-snippet__number">0</span>x00002000@<span class="code-snippet__number">0</span>x00004000(uboot),<span class="code-snippet__number">0</span>x00002000@<span class="code-snippet__number">0</span>x00006000(trust),<span class="code-snippet__number">0</span>x00002000@<span class="code-snippet__number">0</span>x00008000(misc),<span class="code-snippet__number">0</span>x00002000@<span class="code-snippet__number">0</span>x0000a000(dtbo),<span class="code-snippet__number">0</span>x00000800@<span class="code-snippet__number">0</span>x0000c000(vbmeta),<span class="code-snippet__number">0</span>x00020000@<span class="code-snippet__number">0</span>x0000c800(boot),<span class="code-snippet__number">0</span>x00030000@<span class="code-snippet__number">0</span>x0002c800(recovery),<span class="code-snippet__number">0</span>x000c0000@<span class="code-snippet__number">0</span>x0005c800(b<a href="https://m.hqchip.com/app/1703" target="_blank"><u>ac</u></a>kup),<span class="code-snippet__number">0</span>x000c0000@<span class="code-snippet__number">0</span>x0011c800(cache),<span class="code-snippet__number">0</span>x00020000@<span class="code-snippet__number">0</span>x001<a href="https://m.hqchip.com/app/1703" target="_blank"><u>dc</u></a>800(metadata),<span class="code-snippet__number">0</span>x00000400@<span class="code-snippet__number">0</span>x001fc800(frp),<span class="code-snippet__number">0</span>x00000800@<span class="code-snippet__number">0</span>x001fcc00(baseparameter),<span class="code-snippet__number">0</span>x00614000@<span class="code-snippet__number">0</span>x001fd400(super),-@<span class="code-snippet__number">0</span>x00811400(userdata:grow)</span></code>
</pre>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">这款</span></span></font><span><span style="background-color:rgb(255,255,255);">Excel</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">工具将</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">复杂的分区地址计算</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">转化为</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">简单的数值填写</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，是</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">RK</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">平台开发者调整系统分区时的高效辅助工具。</span></span></font></span></p>
	<h3>
		<b><span style="font-family:Arial;font-weight:bold;font-size:15pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">三、瑞芯微</span></span></font><span><span style="background-color:rgb(255,255,255);">Parameter</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">工具</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">v1.2</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的便捷性补充</span></span></font></span></b></h3>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">除了上述</span></span></font><span><span style="background-color:rgb(255,255,255);">Excel</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">自动计算工具，</span></span></font></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">瑞芯微</span></span></font><span><span style="background-color:rgb(255,255,255);">Parameter</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">工具</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">v1.2</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">进一步提升了分区调整的便捷性，核心优势是</span></span></font><span><span style="background-color:rgb(255,255,255);">**“</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">图形化直观操作</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">+</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">直接修改保存</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”**</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></p>
	<img src="https://file1.elecfans.com//web3/M00/3C/92/wKgZPGkaix2ACRGxAACB67VhYmE111.png" alt="wKgZPGkaix2ACRGxAACB67VhYmE111.png"/><p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">1.</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">图形化界面，所见即所得</span></span></font></span></b></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">无需手动编辑</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">parameter.txt</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">文本或关注进制转换，可通过界面</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“Browse”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">按钮直接加载目标</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">parameter.txt</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">（如截图中加载</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">rockdev</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">目录下的分区配置文件）。分区的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">偏移（十六进制地址）</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">扇区偏移</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">大小（支持直观的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">MB/KB</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">单位）</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">名字</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">等信息以列表形式清晰展示，便于快速查看当前分区布局。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">2.</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">直接修改与即时保存</span></span></font></span></b></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">若需调整某分区（如修改</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">security</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">分区大小、调整</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">boot</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">分区偏移，或重命名分区），只需在界面下方的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">偏移</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">大小</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">名字</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">输入框中修改参数，选择单位（</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">KB/MB</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）后点击</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">**“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">修改</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">，即可更新分区列表；调整完成后，点击</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">保存</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”**</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">按钮，直接覆盖原</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">parameter.txt</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">，无需额外执行</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">复制表格计算值</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">→</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">粘贴到文本文件</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的步骤，大幅简化了</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">调整</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">→</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">生效</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的全流程。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">3.</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">灵活的分区结构调整</span></span></font></span></b></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">支持</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">向前插入</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">向后插入</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">新分区、</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">删除</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">现有分区，以及</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">隐藏</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">/</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">显示</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">分区信息等操作。面对</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">新增功能分区</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">删减冗余分区</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">等场景时，能更灵活地调整分区结构，且工具会自动处理地址冲突、容量分配等细节，进一步降低了分区调整的技术门槛。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">这款图形化工具将分区配置从</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">依赖表格计算</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">+</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">手动编辑文本</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，升级为</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">图形界面点选修改</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">+</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">一键保存</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，对不熟悉进制计算或追求高效调整的开发者而言，便捷性进一步提升。</span></span></font></span></p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">以上工具，如果找不到，可以评论区留言。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
</div>
<br/>]]></description></item><item>    <title><![CDATA[比斯特综合性能测试机提升电池组性能验证效率精度]]></title>    <link>https://www.elecfans.com/d/7641946.html</link>    <guid>https://www.elecfans.com/d/7641946.html</guid>    <pubDate>2026-02-06 16:37:00</pubDate>    <description><![CDATA[<p>
	在<a href="https://m.elecfans.com/v/tag/293/" target="_blank"><u>新能源</u></a>汽车与储能系统爆发式增长的背景下，电池组作为重要能量载体，其性能验证的效率与精度直接决定了产品迭代速度与市场竞争力。传统分散式检测设备因存在装夹重复、数据孤岛、误差累积等问题，已难以满足行业对“全流程溯源、动态一致性评估、安全风险预警”的严苛需求。深圳比斯特<a href="https://www.elecfans.com/v/tag/1687/" target="_blank"><u>自动化设备</u></a>有限公司推出的综合性能测试机，凭通过技术创新重新定义了电池性能测试的标准，在保证测试精度的同时，提升了验证效率。</p>
<p>
	<img src="https://file1.elecfans.com/web3/M00/46/D6/wKgZPGlksRaAWtA4AFX4Si_ACB4700.png" alt="wKgZPGlksRaAWtA4AFX4Si_ACB4700.png"/>BT-电池组综合性能测试机</p>
<p>
	一、从“单点检测”到“系统级验证”的跨越<br/>
	1.一站式集成设计：单工位完成全流程测试<br/>
	传统检测模式需多台设备串联作业，单组电池组检测耗时长达数小时，且重复装夹易引入<a href="https://www.elecfans.com/v/tag/1472/" target="_blank"><u>机械</u></a>误差。比斯特测试机通过模块化设计，将<a href="https://m.elecfans.com/v/tag/2364/" target="_blank"><u>电气</u></a>性能、功能安全、环境适应性等检测模块集成于同一平台，电芯只需一次装夹即可完成电压、内阻、充放电效率、过充过放保护、负载带载等关键指标测试。<br/>
	2.分布式同步采集架构：毫秒级捕捉动态参数<br/>
	电池组在真实工况下的性能衰减往往源于电芯间微秒级的响应差异，比斯特测试机采用分布式测量架构，通过24位<a href="https://m.hqchip.com/app/1252" target="_blank"><u>高精度</u></a><a href="https://www.elecfans.com/tags/adc/" target="_blank"><u>ADC</u></a>模块与四线制采样技术，实现电压（精度±0.05%FS）、<a href="https://www.elecfans.com/tags/电流/" target="_blank"><u>电流</u></a>（精度±0.1%FS）、温度（±0.5℃）多参数的同步采集，采样频率达10kHZ。<br/>
	3.边缘计算与云平台协同：实时生成深度报告<br/>
	设备搭载自主研发的<a href="https://www.elecfans.com/tags/c#/" target="_blank"><u>C#</u></a>WPF<a href="https://bbs.elecfans.com/zhuti_1184_1.html" target="_blank"><u>上位机</u></a>系统，可本地完成实时数据处理与故障诊断。测试数据存储至SQL数据库，支持与MES系统对接，自动生成充放电曲线、测试数据、合格判定等测试结果的可视化报告。</p>
<p>
	二、重构电池组性能验证流程<br/>
	柔性化配置适应多元需求：设备支持7.2V-100V电压范围、0.01A-100A电流档位的自由组合，覆盖三元锂、磷酸铁锂、钠离子等主流电池体系，可实现“一机多用”。<br/>
	自动化工装与防错机制：采用压力感应定位装置与智能防呆设计，确保电池组装夹稳定，避免接触不良导致的误判。设备内置过充、过放、短路等故障<a href="https://www.elecfans.com/analog/" target="_blank"><u>模拟</u></a>场景，可自动注入过充、短路、温度突变等异常工况，验证BMS保护策略的响应速度与冗余度。<br/>
	数据链贯通生产全周期：测试结果自动生成CSV文件并存储至MES系统，支持测试数据与SPC统计分析。设备通过构建“电芯-模组-电池组”三级数据关联模型，企业可追溯性能衰退根源至具体生产批次，将售后故障定位时间从72小时压缩至2小时。</p>
<p>
	三、比斯特测试机的技术创新架构<br/>
	在硬件层面，测试机采用高精度数据采集系统和热管理模块，通过模块化设计，可根据不同电池规格和测试需求灵活配置测试通道，可支持多通道并行测试，大幅提升了测试吞吐量。<br/>
	在软件层面，测试平台搭载了自主研发的测试管理系统，能够提供标准测试流程，还支持用户自定义测试方案。内置的系统能够实时分析测试数据，自动识别异常情况，并对电池健康状态进行预测。<br/>
	测试流程的优化则体现在全自动化测试能力上，从从电池组上料、接线、测试到数据分析、报告生成，整个过程无需人工干预。系统自动识别电池类型和规格，匹配相应的测试程序，大幅减少了人为操作可能引入的误差，同时将测试准备时间缩短了60%以上。</p>
<p>
	在追求能源转型和交通电动化的道路上，电池技术的进步离不开精确高效的测试验证手段。深圳比斯特自动化设备有限公司的电池组综合性能测试机，通过技术创新解决了传统测试方法的瓶颈问题，在提升测试效率的同时确保了测试精度，为电池行业的高质量发展提供了有力支撑。<br/><br/>
	审核编辑 黄宇</p>]]></description></item><item>    <title><![CDATA[RK平台Linux系统压测操作步骤]]></title>    <link>https://www.elecfans.com/d/7401337.html</link>    <guid>https://www.elecfans.com/d/7401337.html</guid>    <pubDate>2026-02-06 16:38:00</pubDate>    <description><![CDATA[<div class="rich_media_content js_underline_content autoTypeSetting24psection">
	<h2>
		</h2>
	
		<h2>
		<b><span style="font-family:Arial;font-weight:bold;font-size:16pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">一、压测的重要性与核心目的</span></span></font></span></b></h2>
	<p>
		</p>
	<h3>
		<b><span style="font-family:Arial;font-weight:bold;font-size:15pt;"><span><span style="background-color:rgb(255,255,255);">1.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">为什么必须做压测？</span></span></font></span></b></h3>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">RK</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">平台多应用于<a href="https://www.elecfans.com/soft/data/21-22/" target="_blank"><u>嵌入式</u></a>设备（如<a href="https://www.elecfans.com/v/tag/204/" target="_blank"><u>工业控制</u></a>器、智能终端、<a href="https://www.elecfans.com/soft/data/39-96/" target="_blank"><u>消费电子</u></a>），这类设备常面临</span></span></font></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">复杂工况</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">（高低温、高负载、长期运行）与</span></span></font></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">严苛可靠性要求</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">，压测是量产前不可或缺的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">风险拦截环节</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，核心原因包括：</span></span></font></span></p>
	<p>
		<img src="https://file1.elecfans.com//web3/M00/3C/92/wKgZPGkaixyAbF6WAAAy3P-rYbc808.png" style="text-align:center;" alt="wKgZPGkaixyAbF6WAAAy3P-rYbc808.png"/></p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">1.</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">硬件隐患提前暴露</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：避免因</span></span></font><span><span style="background-color:rgb(255,255,255);">IO</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">电压不匹配、</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);"><a href="https://www.hqchip.com/app/1729" target="_blank"><u>DDR</u></a></span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);"><a href="https://m.hqchip.com/app/1072" target="_blank"><u>信号</u></a>干扰、<a href="https://www.hqchip.com/app.html" target="_blank"><u>电源</u></a>纹波超标等问题，导致设备量产后面临死机、重启、硬件烧毁等故障；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">2.</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">软件稳定性验证</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：排查多模块协同（如</span></span></font><span><span style="background-color:rgb(255,255,255);"><a href="https://m.elecfans.com/v/tag/132/" target="_blank"><u>CPU</u></a>+DDR+<a href="https://www.elecfans.com/tags/wi-fi/" target="_blank"><u>Wi-Fi</u></a></span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）、长期高负载下的内存泄漏、线程死锁、驱动兼容性问题；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">3.</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">性能达标保障</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：确保磁盘读写、</span></span></font><span><span style="background-color:rgb(255,255,255);"><a href="https://www.elecfans.com/tags/gpu/" target="_blank"><u>GPU</u></a></span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">渲染、</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">CPU</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">算力等关键指标满足产品设计需求，避免用户使用时出现卡顿、响应慢等体验问题；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">4.</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">成本风险控制</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：若未做压测，设备量产后面临售后<a href="https://m.elecfans.com/v/tag/1215/" target="_blank"><u>维修</u></a>、召回，成本是前期压测投入的</span></span></font><span><span style="background-color:rgb(255,255,255);">10-100</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">倍，且损害品牌口碑。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span style="font-family:Arial;font-weight:bold;font-size:15pt;"><span><span style="background-color:rgb(255,255,255);">2.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">压测的核心价值</span></span></font></span></b></h3>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">5.</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">从</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">被动修复</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">转为</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">主动预防</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">：在实验室环境<a href="https://www.elecfans.com/analog/" target="_blank"><u>模拟</u></a>设备全生命周期可能遇到的极端场景，提前解决</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">90%</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">以上的稳定性问题；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">6.</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">量化设备可靠性：通过</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“10</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">台设备</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">×24</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">小时</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">高低温循环</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">等标准化压测，验证设备连续运行无故障时长，为量产提供数据支撑；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">7.</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">适配场景拓展：通过用户场景压测，确保设备在真实使用场景（如词典笔</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">扫描</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">-</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">翻译</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">-</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">待机</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">、工业设备</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">数据采集</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">-</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">传输</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">-</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">存储</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）下稳定运行。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h2>
		<b><span style="font-family:'等线';font-weight:bold;font-size:16pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">二</span></span></font></span></b><b><span style="font-family:Arial;font-weight:bold;font-size:16pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">、压测前准备</span></span></font></span></b></h2>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">8.</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">开启测试工具配置</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：在</span></span></font><span><span style="background-color:rgb(255,255,255);">Buildroot</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">中启用所需测试包，执行如下配置命令，确保</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">CPU</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">、内存、<a href="https://m.hqchip.com/app/1537" target="_blank"><u>音频</u></a>、</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Wi-Fi</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">等测试功能可用：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	
		<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__comment"># 启用CPU和内存压力测试工具</span></span></code><code><span><span class="code-snippet__attr">BR2_PACKAGE_STRESSAPPTEST</span>=y</span></code><code><span><span class="code-snippet__comment"># 启用内存正确性测试工具</span></span></code><code><span><span class="code-snippet__attr">BR2_PACKAGE_MEM<a href="https://www.elecfans.com/tags/te/" target="_blank"><u>TE</u></a>STER</span>=y</span></code><code><span><span class="code-snippet__comment"># 启用包含多模块测试的套件</span></span></code><code><span><span class="code-snippet__attr">BR2_PACKAGE_<a href="https://bbs.elecfans.com/zhuti_1179_1.html" target="_blank"><u>ROCKCHIP</u></a>_TEST</span>=y</span></code></pre>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">1.</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">配置测试目录权限</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：确保</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">/userdata/rockchip-test</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">目录具备可读写权限，用于存储压测日志和数据。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">2.</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">开启串口日志保存</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：连接产品串口，开启串口<a href="https://bbs.elecfans.com/zhuti_1184_1.html" target="_blank"><u>上位机</u></a>的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">保存所有日志</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">功能，便于后续问题分析。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h2>
		<b><span style="font-family:'等线';font-weight:bold;font-size:16pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">三</span></span></font></span></b><b><span style="font-family:Arial;font-weight:bold;font-size:16pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">、软件稳定性压测</span></span></font></span></b></h2>
	<p>
		</p>
	<h3>
		<b><span style="font-family:Arial;font-weight:bold;font-size:15pt;"><span><span style="background-color:rgb(255,255,255);">1.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">基础工具使用</span></span></font></span></b></h3>
	<p>
		</p>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><span><span style="background-color:rgb(255,255,255);">1</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">stressapptest</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">（内存</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">/</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">磁盘压力测试）</span></span></font></span></b></h4>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">典型执行命令：测试</span></span></font><span><span style="background-color:rgb(255,255,255);">256MB</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">内存，运行</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">8</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">个</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">热复制</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">线程，</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">20</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">秒后退出，命令如下：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__attribute">stressapptest</span>-s<span class="code-snippet__number">20</span>-M<span class="code-snippet__number">256</span>-m<span class="code-snippet__number">8</span>-W</span></code></pre>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">常用参数说明：</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">-M</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">指定测试</span></span></font><span><span style="background-color:rgb(255,255,255);"><a href="https://www.elecfans.com/tags/ram/" target="_blank"><u>RAM</u></a></span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">大小，</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">-s</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">指定运行秒数，</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">-m</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">指定内存复制线程数，</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">-l</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">指定日志输出文件。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">关闭测试：执行</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">killall stressapptest</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><span><span style="background-color:rgb(255,255,255);">2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">memtester</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">（内存正确性测试）</span></span></font></span></b></h4>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">执行命令格式：指定测试内存大小（单位</span></span></font><span><span style="background-color:rgb(255,255,255);">B/K/M/G</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）和循环次数，示例如下：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span>memtester<span class="code-snippet__selector-attr">[-p 物理地址基址 [-d 设备]</span>] &lt;内存大小&gt;<span class="code-snippet__selector-attr">[B/K/M/G]</span><span class="code-snippet__selector-attr">[循环次数]</span></span></code></pre>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">测试项包含：</span></span></font><span><span style="background-color:rgb(255,255,255);">Stuck <a href="https://bbs.elecfans.com/zhuti_1472_1.html" target="_blank"><u>Ad</u></a>dress</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Random Value</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Compare XOR</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">等</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">18</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">项内存校验。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">注意事项：</span></span></font><span><span style="background-color:rgb(255,255,255);">memtester</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">出错不会自动停止，需实时观测程序打印；关闭测试执行</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">killall memtester</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span style="font-family:Arial;font-weight:bold;font-size:15pt;"><span><span style="background-color:rgb(255,255,255);">2.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">多模块专项测试（基于</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Rockchip test</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">套件）</span></span></font></span></b></h3>
	<p>
		</p>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><span><span style="background-color:rgb(255,255,255);">1</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">DDR</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">测试</span></span></font></span></b></h4>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">执行方式一：通过套件脚本启动</span></span></font></span></b></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">a.</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">运行套件入口脚本：</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">bash /rockchip-test/rockchip_test.sh</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">b.</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">输入</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“1”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">选择</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">DDR</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">测试，再根据设备变频能力选场景（不支持变频选</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“3”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，支持选</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“5”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">c.</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">输入</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“1”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">选择</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">memtester</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">测试，开始执行。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">执行方式二：直接运行脚本</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：执行</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">bash /rockchip-test/ddr/memtester_test.sh</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">，默认测试系统可用内存的一半。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">DDR</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">变频测试</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">◦</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">自动变频：</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">bash /rockchip-test/ddr/ddr_freq_scaling.sh</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">，脚本会循环切换频率（如</span></span></font><span><span style="background-color:rgb(255,255,255);">528000000 Hz</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">324000000 Hz</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">◦</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">指定频率：</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">bash /rockchip-test/ddr/ddr_freq_scaling.sh 528000000</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">，频率需在支持列表内，否则会打印可用频率；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">◦</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">关闭变频测试：</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">killall bash</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><span><span style="background-color:rgb(255,255,255);">2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">CPU</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">测试</span></span></font></span></b></h4>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">启动测试：运行</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">bash /rockchip-test/rockchip_test.sh</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">，输入</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“2”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">选择</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">CPU</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">测试，根据变频能力选场景（不支持选</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“1”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，支持选</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“3”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">CPU</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">变频测试</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">◦</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">自动变频：</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">bash /rockchip-test/cpu/cpu_freq_scaling.sh</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">，切换频率如</span></span></font><span><span style="background-color:rgb(255,255,255);">816000 KHz</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">1104000 KHz</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">◦</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">指定频率：</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">bash /rockchip-test/cpu/cpu_freq_scaling.sh 1104000</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">，频率不在支持列表时会打印可用值；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">◦</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">关闭测试：</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">killall bash</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><span><span style="background-color:rgb(255,255,255);">3</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Flash</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">测试</span></span></font></span></b></h4>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">执行逻辑：在</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">$test_dir/src_test_data</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">生成</span></span></font><span><span style="background-color:rgb(255,255,255);">7</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">个</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">5MB</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">以内随机源数据，拷贝到</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">$test_dir/des_test_data</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">的</span></span></font><span><span style="background-color:rgb(255,255,255);">5</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">个子目录，对比</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">MD5</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">值，循环</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">200</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">次。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><span><span style="background-color:rgb(255,255,255);">4</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）待机唤醒测试</span></span></font></span></b></h4>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">前提条件：系统需有正常工作的</span></span></font><span><span style="background-color:rgb(255,255,255);">RTC</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">执行逻辑：默认循环</span></span></font><span><span style="background-color:rgb(255,255,255);">10000</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">次，每次待机唤醒时间为</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">3-6</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">秒随机值。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><span><span style="background-color:rgb(255,255,255);">5</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">reboot</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">测试</span></span></font></span></b></h4>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">执行逻辑：默认重启</span></span></font><span><span style="background-color:rgb(255,255,255);">10000</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">次，每次启动后</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">8</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">秒自动关机；若开启</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">CONFIG_PSTORE_RAM</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">，会检查每次关机日志是否有崩溃异常；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">提前关闭：执行</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">echo off &gt; /userdata/rockchip_test/reboot_cnt</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><span><span style="background-color:rgb(255,255,255);">6</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Camera</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">测试</span></span></font></span></b></h4>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">方式一：</span></span></font><span><span style="background-color:rgb(255,255,255);">rkisp_demo</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">脚本</span></span></font></span></b></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">a.</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">启用配置：</span></span></font></span></p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">BR2_PACKAGE_CAMERA_ENGINE_RK<a href="https://www.elecfans.com/tags/ai/" target="_blank"><u>AI</u></a>Q_RKISP_DEMO=y</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">b.</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">执行脚本：</span></span></font></span></p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">bash /rockchip-test/camera/camera_stresstest_rkisp_demo.sh</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">，循环抓取</span></span></font><span><span style="background-color:rgb(255,255,255);">ISP CIF</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);"><a href="https://m.hqchip.com/app/1787" target="_blank"><u>接口</u></a>数据各</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">100</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">帧。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">方式二：</span></span></font><span><span style="background-color:rgb(255,255,255);">v4l2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">脚本</span></span></font></span></b></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">a.</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">启用配置：</span></span></font></span></p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">BR2_PACKAGE_LIBV4L_U<a href="https://bbs.elecfans.com/group_715" target="_blank"><u>TI</u></a>LS=y</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">b.</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">执行脚本：</span></span></font></span></p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">bash /rockchip-test/camera/camera_stresstest_v4l2.sh</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">，以</span></span></font><span><span style="background-color:rgb(255,255,255);">640x480</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">分辨率循环抓取</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);"><a href="https://www.hqchip.com/app/1515" target="_blank"><u>USB</u></a> ISP CIF</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">接口数据各</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">5</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">帧，校验文件大小。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><span><span style="background-color:rgb(255,255,255);">7</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Video</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">测试</span></span></font></span></b></h4>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">准备工作：将测试视频文件放入</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">/userdata/videos</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">（优先）或</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">/mnt/udisk/videos</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">执行测试：运行</span></span></font><span><span style="background-color:rgb(255,255,255);">Video</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">测试脚本，循环播放目标目录下的视频文件。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><span><span style="background-color:rgb(255,255,255);">8</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Wi-Fi Bt</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">测试</span></span></font></span></b></h4>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">执行逻辑：运行对应测试脚本，自动循环执行</span></span></font><span><span style="background-color:rgb(255,255,255);">Wi-Fi</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">和</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Bt</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的开启、关闭操作。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h2>
		<b><span style="font-family:'等线';font-weight:bold;font-size:16pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">四</span></span></font></span></b><b><span style="font-family:Arial;font-weight:bold;font-size:16pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">、性能测试</span></span></font></span></b></h2>
	<p>
		</p>
	<h3>
		<b><span style="font-family:Arial;font-weight:bold;font-size:15pt;"><span><span style="background-color:rgb(255,255,255);">1.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">磁盘读写测试</span></span></font></span></b></h3>
	<p>
		</p>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><span><span style="background-color:rgb(255,255,255);">1</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">eMMC</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">读写</span></span></font></span></b></h4>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">前提：用</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">fdisk -l</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">查看可读写分区（如</span></span></font><span><span style="background-color:rgb(255,255,255);">mmcblk0p8</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">写测试：</span></span></font></span></p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">dd if=/dev/zero of=/dev/mmcblk0p8 bs=1M count=2000 oflag=direct,nonblock</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">读测试：</span></span></font></span></p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">dd if=/dev/mmcblk0p8 of=/dev/null bs=1M count=2000 iflag=direct,nonblock</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><span><span style="background-color:rgb(255,255,255);">2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">U</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">盘读写</span></span></font></span></b></h4>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">写测试：</span></span></font></span></p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">dd if=/dev/zero of=/dev/<a href="https://www.hqchip.com/app/1522" target="_blank"><u>sd</u></a>a1 bs=1M count=2000 oflag=direct,nonblock</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><span><span style="background-color:rgb(255,255,255);">/dev/sda1</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">为</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">U</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">盘分区）；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">读测试：</span></span></font></span></p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">dd if=/dev/sda1 of=/dev/null bs=1M count=2000 iflag=direct,nonblock</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span style="font-family:Arial;font-weight:bold;font-size:15pt;"><span><span style="background-color:rgb(255,255,255);">2.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">性能模式设置</span></span></font></span></b></h3>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">开启高性能模式：</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">echo pe<a href="https://www.elecfans.com/tongxin/rf/" target="_blank"><u>rf</u></a>ormance | tee $(find /sys/ -name *governor)</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span style="font-family:Arial;font-weight:bold;font-size:15pt;"><span><span style="background-color:rgb(255,255,255);">3. CPU/DDR</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">频率查看</span></span></font></span></b></h3>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">执行命令：</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">cat /sys/kernel/debug/clk/clk_summary |grep -E "cpu|<a href="https://m.hqchip.com/app/1378" target="_blank"><u>arm</u></a>|ddr"</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span style="font-family:Arial;font-weight:bold;font-size:15pt;"><span><span style="background-color:rgb(255,255,255);">4. GPU</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">跑分</span></span></font></span></b></h3>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">全屏跑分：</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">sh /rockchip-test/gpu/test_fullscreen_glmark2.sh</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">后台跑分（不显示画面）：</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">sh /rockchip-test/gpu/test_offscreen_glmark2.sh</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h2>
		<b><span style="font-family:'等线';font-weight:bold;font-size:16pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">五</span></span></font></span></b><b><span style="font-family:Arial;font-weight:bold;font-size:16pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">、硬件稳定性测试</span></span></font></span></b></h2>
	<p>
		</p>
	<h3>
		<b><span style="font-family:Arial;font-weight:bold;font-size:15pt;"><span><span style="background-color:rgb(255,255,255);">1. IO-DOMAINS</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">检查</span></span></font></span></b></h3>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">核心要求：确保所有</span></span></font><span><span style="background-color:rgb(255,255,255);">GPIO</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">电源域的软件配置电压与硬件供电一致（如软件设</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">1.8V</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">则硬件需供</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">1.8V</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">参考文档：对应芯片平台文档（如</span></span></font><span><span style="background-color:rgb(255,255,255);">RK3568</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">参考</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">Rockchip_RK356X_Introduction_IO_Power_Domains_Configuration_CN.pdf</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span style="font-family:Arial;font-weight:bold;font-size:15pt;"><span><span style="background-color:rgb(255,255,255);">2.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">电源测试</span></span></font></span></b></h3>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">测试内容：若电源方案偏离参考设计（如用分立电源），需测试冷启动</span></span></font><span><span style="background-color:rgb(255,255,255);">/</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">重启时的上电时序、高负载下电源纹波，重点关注</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">VDD_<a href="https://www.elecfans.com/tags/Cirrus logic/" target="_blank"><u>LOGIC</u></a></span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">VDD_ARM</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">等核心电源。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span style="font-family:Arial;font-weight:bold;font-size:15pt;"><span><span style="background-color:rgb(255,255,255);">3.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">信号测试</span></span></font></span></b></h3>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">设计要求：</span></span></font><span><span style="background-color:rgb(255,255,255);">DDR</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">设计按对应模板，颗粒选</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">AVL</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">列表（通过</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">redmine</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">获取）；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">图纸审核：硬件图纸完成后，提交审核（如通过</span></span></font><span><span style="background-color:rgb(255,255,255);">redmine</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span style="font-family:Arial;font-weight:bold;font-size:15pt;"><span><span style="background-color:rgb(255,255,255);">4.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">高低温测试</span></span></font></span></b></h3>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">测试环境：产品工作温度的高温上限和低温下限；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">测试内容：在高低温下执行</span></span></font><span><span style="background-color:rgb(255,255,255);">CPU</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">压力测试、</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">DDR</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">压力测试、</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">reboot</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">测试、冷启动测试。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h2>
		<b><span style="font-family:'等线';font-weight:bold;font-size:16pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">六</span></span></font></span></b><b><span style="font-family:Arial;font-weight:bold;font-size:16pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">、用户场景压测</span></span></font></span></b></h2>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">构建逻辑：结合产品实际功能，用基础脚本组合场景；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">示例（词典笔场景）：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__keyword">while</span><span class="code-snippet__literal">true</span>;<span class="code-snippet__keyword">do</span></span></code><code><span><span class="code-snippet__comment"># 模拟扫描识别（采图）</span></span></code><code><span> v4l2-ctl --stream-mmap --stream-to=/tmp/s<a href="https://www.hqchip.com/app/2004" target="_blank"><u>can</u></a>.jpg --stream-count=1</span></code><code><span><span class="code-snippet__comment"># 模拟播放翻译结果</span></span></code><code><span> aplay /tmp/translate.wav</span></code><code><span><span class="code-snippet__comment"># 模拟待机</span></span></code><code><span> pm-suspend</span></code><code><span><span class="code-snippet__comment"># 模拟RTC唤醒（10秒后唤醒）</span></span></code><code><span> rtcwake -m no -s 10</span></code><code><span><span class="code-snippet__comment"># 随机开关Wi-Fi</span></span></code><code><span><span class="code-snippet__keyword">if</span>[ $((RANDOM %<span class="code-snippet__number">2</span>)) -eq 0 ];<span class="code-snippet__keyword">then</span></span></code><code><span>  nmcli r wifi on</span></code><code><span><span class="code-snippet__keyword">else</span></span></code><code><span>  nmcli r wifi off</span></code><code><span><span class="code-snippet__keyword">fi</span></span></code><code><span><span class="code-snippet__keyword">done</span></span></code></pre>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">核心思路：覆盖</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">开机</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">-</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">核心功能</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">-</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">待机</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">-</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">唤醒</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">-</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">辅助功能（如</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Wi-Fi</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的完整用户操作链。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
</div>]]></description></item><item>    <title><![CDATA[分布式光伏发电接入配电网技术规定中关于“四可”装置的内容解析]]></title>    <link>https://www.elecfans.com/d/7641948.html</link>    <guid>https://www.elecfans.com/d/7641948.html</guid>    <pubDate>2026-02-06 16:39:00</pubDate>    <description><![CDATA[<div class="vditor-preview__action"/><div class="vditor-reset"><p>随着分布式光伏发电装机规模的快速增长，其对配电网安全稳定运行的影响日益凸显。《分布式光伏发电接入配电网技术规定》（GB/T 38946-2020）作为核心国标，首次系统性明确了“四可”（可观、可测、可调、可控）装置的技术要求，将其从行业推荐性能力升级为刚性并网门槛。详细了解光伏四可装置可咨询:1.3.7-5.0.0.4-6.2.0.0。这些规定既搭建了统一的技术框架，又为地方电网差异化落地预留空间，是分布式光伏合规并网、高效消纳的核心遵循。</p><p><strong>一、可观：全量数据可视化，筑牢调控基础</strong></p><p>“可观”是“四可”能力的前提，核心要求是实现光伏电站运行状态的全维度、实时监控，打破传统电站“黑箱运行”困境。根据GB/T 38946-2020条款，分布式光伏系统需具备全景数据采集与上传能力，确保电网端与运营方同步掌握电站动态。</p><p><strong>国标明确的核心内容包括</strong> ：</p><ul><li>一是采集范围需覆盖30+项关键参数，涵盖发电功率、三相电压<a href="https://www.elecfans.com/tags/电流/" target="_blank"><u>电流</u></a>、设备温度、辐照强度、<a href="https://www.elecfans.com/tags/逆变器/" target="_blank"><u>逆变器</u></a>运行状态等，实现“能量流+设备状态+环境条件”的全要素监测；</li><li>二是数据传输要求实时性，<a href="https://m.elecfans.com/v/tag/873/" target="_blank"><u>高压</u></a>并网项目（10kV及以上）需满足1秒级数据刷新，低压项目不低于15秒级，且支持远程监控系统实时调取；</li><li>三是兼容性要求，数据采集终端需支持DL/T 698.45等国网标准协议，确保与电网调度平台无缝对接。</li></ul><p>地方电网在此基础上进一步细化，例如华东地区要求工商业光伏按生产线细分能耗数据，西北地区则强调户外电站需补充风速、环境温度等气象数据，为电网源网荷储协同调度提供支撑。</p><p><strong>二、可测：精准计量+预测，支撑科学调度</strong></p><p>“可测”聚焦数据精度与预判能力，要求光伏系统不仅能精准计量电能，还能为电网调度提供短期出力预测支撑，避免因出力波动引发电网电压、频率失衡。GB/T 38946-2020对测量精度、预测能力及计量规范均作出强制性要求。</p><p><img src="https://file1.elecfans.com/web3/M00/4B/13/wKgZPGmFqC-AC_j-AAY7XwYYUJY96.jpeg" alt=""/></p><p><strong>技术条款明确</strong> ：</p><ul><li>其一，<a href="https://www.hqchip.com/app/1709" target="_blank"><u>电能计量</u></a>精度需达到0.5级及以上，区分“自发自用、余电上网、电网购电”多向流量计量，误差控制在±0.5%以内，核心依赖符合标准的智能电表与逆变器检测模块；</li><li>其二，具备短期发电量预测能力，需提前4-24小时预判出力趋势，预测误差日均不超过10%，为电网负荷平衡规划提供数据依据；</li><li>其三，电能质量监测需覆盖谐波、电压偏差等指标，其中谐波电流总畸变率不得超过5%，防止影响电网电能质量。</li></ul><p>实操中，老旧电站需重点改造测量设备——部分早期逆变器不具备0.5级以上测量能力，需更换检测模块或整机，否则无法通过并网验收。</p><p><strong>三、可调：柔性响应指令，适配电网需求</strong></p><p>“可调”是应对光伏出力波动、提升电网消纳能力的核心，要求系统接到电网指令后，能灵活调整有功、无功功率，实现从“被动适应”到“主动支撑”的转变。GB/T 38946-2020对调节范围、精度及响应速度作出明确界定。</p><p><img src="https://file1.elecfans.com/web3/M00/4B/13/wKgZPGmFqC-AfF0QAAbHUug-9DQ18.jpeg" alt=""/></p><p><strong>核心规定包括：</strong></p><ul><li><strong>一是功率调节范围</strong> ，有功功率需支持0-100%额定功率连续可调，无功功率调节需满足<a href="https://m.hqchip.com/app/1717" target="_blank"><u>功率因数</u></a>在0.95-1.0之间动态调整，适配电网电压、频率补偿需求；</li><li><strong>二是调节精度与稳定性</strong> ，有功功率调节精度需达到±1%额定功率，输出功率波动幅度控制在额定功率的10%/分钟以内，避免功率骤变对电网造成冲击；</li><li><strong>三是响应时效</strong> ，低压项目响应时间不超过2秒，高压项目需缩短至1秒内，确保快速跟进电网调度指令。</li></ul><p>不同场景解决方案存在差异：户用项目可通过规约<a href="https://www.hqchip.com/app/1718" target="_blank"><u>转换器</u></a>实现基础调节，工商业10kV并网项目需配置AGC（自动发电控制）系统，集中式电站则需AGC与AVC（自动电压控制）协同，实现有功、无功精准调控。</p><p><strong>四、可控：远程智控+安全兜底，保障电网安全</strong></p><p>“可控”是电网安全运行的底线，要求光伏系统具备远程操作与应急保护能力，既能响应电网有序调控，又能在故障时快速隔离风险。GB/T 38946-2020将防孤岛保护、远程控制<a href="https://m.hqchip.com/app/1787" target="_blank"><u>接口</u></a>等作为强制性条款。</p><p><img src="https://file1.elecfans.com/web3/M00/4B/14/wKgZO2mFqC-AbpMzAATYy2IzQnc87.jpeg" alt=""/></p><p><strong>关键内容包括：</strong></p><ul><li><strong>一是远程控制功能</strong> ，需支持电网调度<a href="https://www.hqchip.com/tags" target="_blank"><u>中心</u></a>远程启停、功率限值设定等操作，并网开关需具备远程控制接口，指令执行成功率不低于99.5%；</li><li><strong>二是防孤岛保护</strong> ，电网故障断电时，系统需在0.2秒内与电网解列，避免向电网反送电造成人员伤亡或设备损坏，且保护装置需定期校验，确保动作可靠；</li><li><strong>三是分级控制策略</strong> ，支持“先高压、后低压”“优先调控工商业项目”的电网调控逻辑，具备超容发电治理能力，持续30分钟超报装容量时自动触发调节指令。</li></ul><p>此外，国标要求<a href="https://www.elecfans.com/v/tag/1301/" target="_blank"><u>通信</u></a>链路采用SM2/SM3国密<a href="https://m.elecfans.com/v/tag/2562/" target="_blank"><u>算法</u></a>加密，防止数据泄露与指令篡改，确保远程控制的安全性与可靠性。</p><p><strong>五、合规落地：国标与地方规范的协同衔接</strong></p><p>GB/T 38946-2020搭建了“四可”装置的通用框架，地方电网公司结合区域特性进一步细化要求，形成“国标打底、地方补位”的合规体系。例如，<a href="https://m.elecfans.com/v/tag/293/" target="_blank"><u>新能源</u></a>渗透率高的西北地区，要求集中式电站可调响应时间≤1秒；负荷密集的华东地区，侧重工商业项目能耗数据细分；户用项目门槛最低，核心满足“可观+基础可测”，部分省份补充过压保护功能即可。</p><p>从实践价值来看，满足“四可”要求的项目不仅能顺利并网，还能降低收益风险——如浙江省明确，具备“四可”能力的项目消纳补偿分摊系数仅为0.5，不具备的则为1，直接影响项目盈利水平。同时，“四可”改造能提升发电效率约5%，降低运维成本20%，实现合规与收益的双重提升。</p><p>《分布式光伏发电接入配电网技术规定》中关于“四可”装置的内容，本质是通过标准化技术要求，实现分布式光伏与配电网的协同共生。从可观的全量监测到可测的精准计量，从可调的柔性响应到可控的安全兜底，“四可”形成完整技术闭环，既破解了光伏规模化并网带来的消纳难题，又为光伏参与电力市场化交易奠定基础。随着新型<a href="https://m.elecfans.com/v/tag/4675/" target="_blank"><u>电力系统</u></a>建设推进，“四可”装置将不再是单纯的并网门槛，更成为分布式光伏高质量发展的核心支撑。</p><p>以上是由光伏四可装置/一次调频装置服务厂家西格电力分享，欢迎您阅读、点赞。</p><p>审核编辑 黄宇</p></div>]]></description></item><item>    <title><![CDATA[深度剖析MAX17523A：工业电源保护的理想之选]]></title>    <link>https://www.elecfans.com/d/7641955.html</link>    <guid>https://www.elecfans.com/d/7641955.html</guid>    <pubDate>2026-02-06 16:40:00</pubDate>    <description><![CDATA[<input type="hidden" id="annex0_7641955" value="https://file1.elecfans.com/web2/M00/82/14/poYBAGOT8UOAVpsaAA7WNDOa6Wg251.pdf"/><h1>
	深度剖析MAX17523/MAX17523A：工业<a href="https://www.hqchip.com/app.html" target="_blank"><u>电源</u></a>保护的理想之选</h1>
<p>
	在电子设备的设计中，电源保护是至关重要的一环。特别是在工业环境下，复杂多变的电源状况对设备的稳定性和可靠性提出了极高的要求。今天，我们就来深入探讨<a href="https://bbs.elecfans.com/group_65" target="_blank"><u>Analog</u></a> Devices公司推出的MAX17523/MAX17523A这两款可调过压和过流保护器件，看看它们是如何为系统提供可靠保护的。</p>
<p>
	文件下载：<a href="javascript:;" data-annex="annex0_7641955" target="_blank">MAX17523A.pdf</a></p>
<h2>
	一、产品概述</h2>
<p>
	MAX17523/MAX17523A属于Olympus系列IC，是业界最小且功能强大的集成系统保护解决方案。它们能够有效保护系统免受高达±40V的正负输入电压故障影响，内置的低导通电阻（典型值190mΩ）集成FET，可降低功耗并提高效率。</p>
<h3>
	主要特性</h3>
<ol><li>
		<strong>宽输入电源范围</strong>：MAX17523的输入范围为+4.5V至+36V，MAX17523A为+4.2V至+36V，能适应多种电源环境。</li>
	<li>
		<strong>负输入耐受能力</strong>：可承受-36V的负输入电压，增强了系统的抗干扰能力。</li>
	<li>
		<strong>低导通电阻</strong>：典型值190mΩ的RON，减少了功率损耗。</li>
	<li>
		<strong>反向<a href="https://www.elecfans.com/tags/电流/" target="_blank"><u>电流</u></a>控制</strong>：具备反向电流控制输入，防止反向电流对系统造成损害。</li>
	<li>
		<strong>热过载保护</strong>：当器件温度过高时，自动关闭以保护器件安全。</li>
	<li>
		<strong>宽温度范围</strong>：工作温度范围为-40°C至+125°C，适用于各种恶劣工业环境。</li>
</ol><h2>
	二、灵活的设计选项</h2>
<h3>
	1. 可调OVLO和UVLO阈值</h3>
<p>
	用户可以通过外部<a href="https://www.hqchip.com/app/485" target="_blank"><u>电阻</u></a>灵活设置过压锁定（OVLO）和欠压锁定（UVLO）阈值，满足不同应用的需求。MAX17523的可调过压范围为6V至36V，可调欠压范围为4.4V至24V；MAX17523A的可调过压范围同样为6V至36V，可调欠压范围为4.2V至24V。</p>
<h3>
	2. 可<a href="https://www.elecfans.com/v/tag/1315/" target="_blank"><u>编程</u></a>正向电流限制</h3>
<p>
	电流限制范围为0.15A至1A，可根据实际应用进行精确设置，有效保护系统免受过流损害。</p>
<h3>
	3. 可编程过流故障响应</h3>
<p>
	提供三种过流故障响应模式：自动重试（Autoretry）、锁存关闭（Latch-Off）和连续（Con<a href="https://bbs.elecfans.com/group_715" target="_blank"><u>ti</u></a>nuous）。不同的模式适用于不同的应用场景，例如自动重试模式可在故障消除后自动恢复供电，锁存关闭模式则需要手动复位，而连续模式则持续限制电流。</p>
<h3>
	4. 双使能输入</h3>
<p>
	具备EN和HVEN两个使能输入，方便用户进行灵活的<a href="https://m.hqchip.com/app/1730" target="_blank"><u>开关控制</u></a>。</p>
<h2>
	三、<a href="https://m.elecfans.com/v/tag/2364/" target="_blank"><u>电气</u></a>特性详解</h2>
<h3>
	1. 输入电压和电流</h3>
<p>
	MAX17523A的输入电压范围为4.2V至36V，MAX17523为4.5V至36V。在关机状态下，输入电流和输出电流都非常低，有效降低了功耗。</p>
<h3>
	2. 过压和欠压阈值</h3>
<p>
	内部预设的OVLO阈值为33V（典型值），UVLO阈值为19V（典型值）。用户也可以通过外部电阻进行调整，以满足特定的应用需求。</p>
<h3>
	3. 电流限制和精度</h3>
<p>
	电流限制范围为0.15A至1A，不同电流区间的精度有所不同，0.15A ≤ ILIM &lt; 0.3A时，精度为±20%；0.3A ≤ ILIM &lt; 1.0A时，精度为±10%。</p>
<h3>
	4. 开关时间和响应时间</h3>
<p>
	开关的开启时间、关闭时间以及过压、过流时的响应时间都非常短，能够快速响应故障并保护系统。例如，过压开关关闭时间典型值为3µs，过流开关关闭时间在消隐时间后典型值也为3µs。</p>
<h2>
	四、工作模式分析</h2>
<h3>
	1. 自动重试模式（Autoretry）</h3>
<p>
	当电流达到阈值时，消隐时间（tBLANK，典型值21ms）开始计时。如果过流情况持续到消隐时间结束，FLAG<a href="https://m.hqchip.com/app/1072" target="_blank"><u>信号</u></a>将被置低，同时进入重试时间（tRETRY，典型值620ms），在此期间FET关闭。重试时间结束后，FET重新开启。如果故障仍然存在，将重复上述过程。这种模式在过流或短路情况下能有效降低系统功耗，通过公式[LO<a href="https://bbs.elecfans.com/zhuti_1472_1.html" target="_blank"><u>AD</u></a> =I<em>{LIM}left[fr<a href="https://m.hqchip.com/app/1703" target="_blank"><u>ac</u></a>{t</em>{BLANK }}{t<em>{BLANK }+t</em>{RETRY }}right]]可计算平均输出电流，以21ms的tBLANK和620ms的tRETRY为例，占空比为3.3%，可实现96.7%的功率节省。</p>
<h3>
	2. 锁存关闭模式（Latch-Off）</h3>
<p>
	当电流达到阈值，消隐时间开始计时。如果过流情况在消隐时间内未消失，开关将关闭并保持关闭状态。要重新开启开关，需要通过切换控制逻辑EN或HVEN的电压状态，或者对输入电压进行循环操作。此模式下，器件锁存关闭时OUT引脚会有高达24µA的泄漏电流。</p>
<h3>
	3. 连续模式（Continuous）</h3>
<p>
	当电流达到阈值时，器件将输出电流限制在设定的电流值。如果过流情况持续到消隐时间结束，FLAG信号置低；当过载情况消除后，FLAG信号恢复。</p>
<h2>
	五、应用注意事项</h2>
<h3>
	1. 设置电流限制</h3>
<p>
	通过连接SETI引脚到地的电阻来设置电流限制值，公式为[R<em>{SETI}(k Omega)=frac{6100}{I</em>{LIM}(mA)}]。若SETI引脚悬空，则电流限制为0A；若SETI引脚接地，FLAG信号将被置低。</p>
<h3>
	2. 输入旁路<a href="https://www.elecfans.com/tags/电容/" target="_blank"><u>电容</u></a></h3>
<p>
	为了限制瞬间输出短路时的输入电压降，需要在IN引脚和地之间连接至少0.47µF的电容。电容值越大，输入电压的下冲就越小。</p>
<h3>
	3. 热插拔保护</h3>
<p>
	在热插拔应用中，由于寄生电缆电感和输入电容的存在，会导致输入电压过冲和振铃。为了保护器件，建议在输入<a href="https://m.hqchip.com/app/1529" target="_blank"><u>端子</u></a>附近使用能够将输入浪涌限制在40V的瞬态电压抑制器（<a href="https://m.hqchip.com/app/1587" target="_blank"><u>TVS</u></a>）。</p>
<h3>
	4. 输出电容</h3>
<p>
	为了确保在全温度范围和可编程电流限制范围内稳定运行，需要在OUT引脚和地之间连接4.7µF的陶瓷电容。但过大的输出电容可能会因电容上的dv/dt减小而导致误判过流情况，可通过公式[C<em>{MAX }(mu F)=frac{I</em>{LIM}(mA) × t<em>{BLANK(TYP)}(ms)}{V</em>{IN}(V)}]计算可连接到OUT的最大电容值。</p>
<h3>
	5. 输出续流<a href="https://m.hqchip.com/app/1554" target="_blank"><u>二极管</u></a></h3>
<p>
	在需要保护电感负载或长电缆突然短路到地的应用中，建议在OUT端子和地之间连接一个<a href="https://www.hqchip.com/app/1558" target="_blank"><u>肖特基</u></a>二极管，以防止短路事件中因电感反冲导致OUT端出现负尖峰。</p>
<h3>
	6. 布局和散热</h3>
<p>
	为了优化开关对输出短路情况的响应时间，应尽量缩短所有走线，减少寄生电感的影响。输入和输出电容应尽可能靠近器件放置（不超过5mm），IN和OUT应通过宽而短的走线连接到电源总线。同时，为了提高系统的热容量并降低热阻，建议从裸露焊盘到接地平面设置热过孔。</p>
<h2>
	六、总结</h2>
<p>
	MAX17523/MAX17523A凭借其宽输入电源范围、灵活的设计选项、可靠的保护功能以及良好的电气特性，成为工业电源保护领域的理想选择。无论是<a href="https://www.elecfans.com/v/tag/117/" target="_blank"><u>传感器</u></a>系统、状态监测、工厂传感器还是过程分析等应用，都能为系统提供稳定可靠的电源保护。在实际设计中，我们需要根据具体的应用需求，合理设置各项参数，并注意布局和散热等问题，以充分发挥这两款器件的性能优势。</p>
<p>
	大家在使用MAX17523/MAX17523A的过程中遇到过哪些问题呢？或者对于电源保护设计还有哪些疑问？欢迎在评论区留言讨论。</p>]]></description></item><item>    <title><![CDATA[MAX16972A：汽车高速USB保护与充电检测的理想之选]]></title>    <link>https://www.elecfans.com/d/7641957.html</link>    <guid>https://www.elecfans.com/d/7641957.html</guid>    <pubDate>2026-02-06 16:40:00</pubDate>    <description><![CDATA[<input type="hidden" id="annex0_7641957" value="https://file1.elecfans.com/web2/M00/A8/54/wKgZomUVW4aANgGoABouoOFD71o735.pdf"/><h1>
	MAX16972/MAX16972A：汽车高速<a href="https://www.hqchip.com/app/1515" target="_blank"><u>USB</u></a>保护与充电检测的理想之选</h1>
<p>
	在<a href="https://bbs.elecfans.com/group_78" target="_blank"><u>汽车电子</u></a>领域，USB<a href="https://m.hqchip.com/app/1787" target="_blank"><u>接口</u></a>的应用越来越广泛，从汽车收音机、导航系统到USB集线器等，都离不开USB数据和<a href="https://www.hqchip.com/app.html" target="_blank"><u>电源</u></a>的稳定传输。然而，汽车环境复杂，USB接口面临着静电放电（<a href="https://m.hqchip.com/app/1587" target="_blank"><u>ESD</u></a>）、短路等多种风险。<a href="https://bbs.elecfans.com/group_264" target="_blank"><u>Maxim</u></a> In<a href="https://www.elecfans.com/tags/te/" target="_blank"><u>te</u></a>grated推出的MAX16972/MAX16972A芯片，为汽车应用中的USB接口提供了可靠的保护和充电检测解决方案。</p>
<p>
	文件下载：<a href="javascript:;" data-annex="annex0_7641957" target="_blank">MAX16972A.pdf</a></p>
<h2>
	产品概述</h2>
<p>
	MAX16972/MAX16972A专为汽车收音机、导航、连接性和USB集线器等应用中的低压内部USB数据和电源线路提供高ESD和短路保护。它支持高速USB（480Mbps）和全速USB（12Mbps）操作，还集成了快速充电电路，可支持苹果设备的快速充电以及高速USB主机充电器<a href="https://m.hqchip.com/app/1808" target="_blank"><u>端口</u></a>检测协议。</p>
<h2>
	关键特性</h2>
<h3>
	1. 强大的短路保护</h3>
<p>
	该芯片具备多种短路保护功能，包括受保护的HVBUS、HVD+和HVD-输出端的电池短路保护，以及受保护的HVD+和HVD-输出端的HVBUS短路保护。能够承受高达+18V的电池短路情况，同时在HVBUS输出端提供接地短路和过流保护，保护内部BUS电源轨免受过大<a href="https://www.elecfans.com/tags/电流/" target="_blank"><u>电流</u></a>故障的影响。</p>
<h3>
	2. 高ESD保护</h3>
<p>
	在所有受保护的HVBUS、HVD+和HVD-输出端，芯片提供了高达±15kV的空气间隙法和±8kV的接触法ESD保护，有效抵御静电干扰，确保设备在复杂环境下的稳定性。</p>
<h3>
	3. 低<a href="https://www.hqchip.com/app/485" target="_blank"><u>电阻</u></a>开关与集成<a href="https://www.hqchip.com/app/1716" target="_blank"><u>控制器</u></a></h3>
<p>
	每个芯片包含两个低导通电阻（4.0Ω）的高速USB开关、一个限流的低压31mΩ BUS开关，并集成了<a href="https://m.elecfans.com/v/tag/873/" target="_blank"><u>高压</u></a>外部<a href="https://m.hqchip.com/app/1708" target="_blank"><u>电源开关</u></a>控制器。BUS开关能够启动高电容的非合规USB负载，为不同类型的设备提供稳定的电源支持。</p>
<h3>
	4. 智能充电检测</h3>
<p>
	芯片集成了苹果<a href="https://m.elecfans.com/v/tag/4103/" target="_blank"><u>iPhone</u></a>/iP<a href="https://bbs.elecfans.com/zhuti_1472_1.html" target="_blank"><u>ad</u></a>快速充电终端电阻和符合USB 2.0电池充电规范的主机充电器端口检测电路，能够自动识别不同的充电模式，实现无缝的设备集成。支持USB-IF BC1.2充电下游端口（CDP）和专用充电端口（<a href="https://m.hqchip.com/app/1703" target="_blank"><u>DC</u></a>P）模式，以及中国电信行业标准YD/T 1591 - 209和USB On-The-Go（OTG）功能。</p>
<h2>
	<a href="https://m.elecfans.com/v/tag/2364/" target="_blank"><u>电气</u></a>特性</h2>
<h3>
	1. 电源供应</h3>
<ul><li>
		<strong>BUS电源范围</strong>：4.75V - 5.5V</li>
	<li>
		<strong>IN电源范围</strong>：3V - 3.6V</li>
	<li>
		<strong>IN过压锁定</strong>：3.8V</li>
</ul><h3>
	2. <a href="https://www.hqchip.com/app/1734" target="_blank"><u>电荷泵</u></a></h3>
<ul><li>
		<strong>空载输出电压</strong>：8V - 10.5V</li>
	<li>
		<strong>输出阻抗</strong>：50kΩ</li>
	<li>
		<strong>输出直流电流</strong>：20μA</li>
</ul><h3>
	3. USB开关特性</h3>
<ul><li>
		<strong><a href="https://www.elecfans.com/analog/" target="_blank"><u>模拟</u></a><a href="https://m.hqchip.com/app/1072" target="_blank"><u>信号</u></a>范围</strong>：0V - 3.6V</li>
	<li>
		<strong>导通电阻</strong>：4Ω</li>
	<li>
		<strong>通道间导通电阻匹配</strong>：0.03Ω - 0.2Ω</li>
	<li>
		<strong>导通电阻平坦度</strong>：0.02Ω</li>
</ul><h3>
	4. 热保护</h3>
<ul><li>
		<strong>热关断温度</strong>：160°C</li>
	<li>
		<strong>热关断迟滞</strong>：20°C</li>
</ul><h2>
	工作模式</h2>
<h3>
	1. 禁用模式</h3>
<p>
	这是芯片的最低功耗模式，在此模式下，USB BUS电源、HVD+到D+和HVD-到D-的数据路径均被禁用。在进入或退出苹果iPhone/iPad快速充电模式之前，系统软件必须选择禁用模式至少100ms，以确保硬件和软件的真正复位。</p>
<h3>
	2. USB-IF专用充电端口（DCP）和苹果2.1A自动检测模式</h3>
<p>
	芯片具备iPad/DCP自动检测模式，可模拟专用iPad 2.1A充电和USB-IF专用充电端口（DCP）。在该模式下，高压保护的HVD+和HVD-引脚与低压D+和D-引脚断开连接，并连接到内部电阻分压器，提供符合苹果标准的iPad偏置电压。</p>
<h3>
	3. USB低速/全速（LS/FS）模式与自动主机充电器端口保护</h3>
<p>
	当USB兼容便携式设备检测到VBUS后，可通过向HVD+施加电压并检查HVD-上的电压来判断主机设备是否为充电器。在低/全速模式下，当设备枚举时D+或D-为高电平，将禁用自动充电器检测电路，直到检测到USB断开连接才会重新启用。</p>
<h3>
	4. USB高速（HS）模式</h3>
<p>
	该模式为USB高速（480Mbps）数据信号提供真正的直通操作，并禁用USB主机充电器端口检测电路。</p>
<h2>
	应用信息</h2>
<h3>
	1. 正向电流限制</h3>
<p>
	芯片允许通过一个电阻设置电源开关的电流限制，正向电流限制范围为500mA - 3A。在选择RISET电阻时，需要根据应用中的最大预期电流进行调整，并考虑一定的余量，以防止在最大预期电流下触发电流限制。</p>
<h3>
	2. 外部n沟道DMOS器件选择</h3>
<p>
	外部功率DMOS器件必须是20V VGS类型，电荷泵产生约7V VGS，可确保非逻辑电平器件的低导通电阻。</p>
<h3>
	3. 电源旁路<a href="https://www.elecfans.com/tags/电容/" target="_blank"><u>电容</u></a></h3>
<ul><li>
		<strong>HVBUS</strong>：使用0.1μF陶瓷电容尽可能靠近<a href="https://www.hqchip.com/app/1515" target="_blank"><u>USB连接器</u></a>旁路到GND，提供±15kV（HBM）ESD保护。在0.1μF陶瓷<a href="https://www.hqchip.com/app/1515" target="_blank"><u>连接器</u></a>电容和HVBUS节点之间放置铁氧体磁珠以降低EMI，并在HVBUS节点与GND之间串联一个1Ω电阻和10μF电容，避免HVBUS上的过冲。</li>
	<li>
		<strong>BUS</strong>：使用最小100μF、低ESR陶瓷电容旁路到GND，避免在热插拔HVBUS上的放电电容时BUS出现大的电压降。</li>
	<li>
		<strong>IN</strong>：使用1μF陶瓷电容旁路到GND，并在逻辑电源和IN节点之间放置一个1kΩ电阻，确保最佳的ESD性能。</li>
</ul><h3>
	4. 布线长度</h3>
<p>
	USB外设与HVBUS、HVD+和HVD-之间的布线长度应在0.5m - 5m范围内，以确保正常工作。该长度范围对应约650nH - 6.5mH的电感，有助于限制电池短路和接地短路事件中的电流上升率。</p>
<h3>
	5. USB数据线迹布局</h3>
<p>
	在USB高速模式下，需要仔细进行<a href="https://m.elecfans.com/v/tag/82/" target="_blank"><u>PCB</u></a>布局，确保90Ω受控差分阻抗匹配的等长迹线。在HVD_和D_引脚插入调谐电感和电容，以消除寄生电容，具体值取决于布局情况。</p>
<h2>
	总结</h2>
<p>
	MAX16972/MAX16972A芯片凭借其强大的保护功能、智能的充电检测和灵活的工作模式，为汽车应用中的USB接口提供了全面的解决方案。<a href="https://m.elecfans.com/v/tag/125/" target="_blank"><u>电子工程师</u></a>在设计汽车USB相关电路时，可充分利用该芯片的特性，提高系统的可靠性和稳定性。你在使用类似芯片时遇到过哪些问题呢？欢迎在评论区分享你的经验。</p>]]></description></item><item>    <title><![CDATA[MAX16972：汽车高速USB保护器的卓越之选]]></title>    <link>https://www.elecfans.com/d/7641958.html</link>    <guid>https://www.elecfans.com/d/7641958.html</guid>    <pubDate>2026-02-06 16:40:00</pubDate>    <description><![CDATA[<input type="hidden" id="annex0_7641958" value="https://file1.elecfans.com/web2/M00/A8/54/wKgZomUVW4aANgGoABouoOFD71o735.pdf"/><h1>
	MAX16972/MAX16972A：汽车高速<a href="https://www.hqchip.com/app/1515" target="_blank"><u>USB</u></a>保护器的卓越之选</h1>
<p>
	在如今的<a href="https://bbs.elecfans.com/group_78" target="_blank"><u>汽车电子</u></a>领域，USB<a href="https://m.hqchip.com/app/1787" target="_blank"><u>接口</u></a>的应用越来越广泛，从汽车收音机、导航系统到各种连接设备和USB集线器，都离不开可靠的USB数据和<a href="https://www.hqchip.com/app.html" target="_blank"><u>电源</u></a>保护。<a href="https://bbs.elecfans.com/group_264" target="_blank"><u>Maxim</u></a> In<a href="https://www.elecfans.com/tags/te/" target="_blank"><u>te</u></a>grated推出的MAX16972/MAX16972A 3A汽车高速USB保护器，以其出色的性能和多样的功能，成为了众多<a href="https://m.elecfans.com/v/tag/125/" target="_blank"><u>电子工程师</u></a>的首选。接下来，我们就来深入了解一下这款产品。</p>
<p>
	文件下载：<a href="javascript:;" data-annex="annex0_7641958" target="_blank">MAX16972.pdf</a></p>
<h2>
	一、产品概述</h2>
<p>
	MAX16972/MAX16972A专为汽车应用而设计，为低压内部USB数据和电源线提供了高<a href="https://m.hqchip.com/app/1587" target="_blank"><u>ESD</u></a>和短路保护。它支持高速USB（480Mbps）和全速USB（12Mbps）操作，并且集成了相关电路，可实现对遵循苹果方法或高速USB主机充电器<a href="https://m.hqchip.com/app/1808" target="_blank"><u>端口</u></a>检测协议的消费设备的快速充电。此外，该产品还支持USB OTG功能。</p>
<h2>
	二、产品特性亮点</h2>
<h3>
	（一）强大的保护功能</h3>
<ol><li>
		<strong>短路保护</strong>：在受保护的HVBUS、HVD + 和HVD - 输出端提供了到电池的短路保护，以及HVD + 和HVD - 输出端到HVBUS的短路保护，能够承受高达+18V的到电池短路情况。同时，HVBUS输出端还提供了到地短路和过流保护，可保护内部BUS电源轨免受过度<a href="https://www.elecfans.com/tags/电流/" target="_blank"><u>电流</u></a>故障的影响。</li>
	<li>
		<strong>ESD保护</strong>：在所有受保护的HVBUS、HVD + 和HVD - 输出端，提供了高达±15kV（空气间隙法）和±8kV（接触法）的高ESD保护，能有效抵御静电干扰。
		<h3>
			（二）高性能开关设计</h3>
	</li>
	<li>
		<strong>低导通电阻</strong>：具备两个低4.0Ω导通电阻的高速USB开关，以及一个电流限制的低压31mΩ BUS开关，能有效降低线路压降，满足USB电压规范。</li>
	<li>
		<strong>高带宽</strong>：拥有900MHz带宽的USB 2.0数据开关，确保数据传输的高速与稳定。
		<h3>
			（三）智能充电模式</h3>
		<p>
			通过智能状态机实现充电模式的自动转换，集成了苹果<a href="https://m.elecfans.com/v/tag/4103/" target="_blank"><u>iPhone</u></a> 1.0A专用充电模式、iP<a href="https://bbs.elecfans.com/zhuti_1472_1.html" target="_blank"><u>ad</u></a> 2.1A专用充电模式，以及USB - IF BC1.2充电下游端口（CDP）和专用充电端口（<a href="https://m.hqchip.com/app/1703" target="_blank"><u>DC</u></a>P）模式等，同时还支持中国<a href="https://www.elecfans.com/v/tag/1301/" target="_blank"><u>通信</u></a>行业标准YD/T 1591 - 209。</p>
	</li>
</ol><h2>
	三、<a href="https://m.elecfans.com/v/tag/2364/" target="_blank"><u>电气</u></a>特性剖析</h2>
<h3>
	（一）电源参数</h3>
<p>
	BUS电源供应范围为4.75 - 5.5V，IN电源供应范围为3 - 3.6V，并且具备IN过压锁定功能，当IN电压上升到3.8V时会触发锁定。</p>
<h3>
	（二）充电泵参数</h3>
<p>
	充电泵空载输出电压为8 - 10.5V，输出阻抗为50kΩ，输出直流电流在特定条件下为20μA。</p>
<h3>
	（三）数据开关参数</h3>
<p>
	<a href="https://www.elecfans.com/analog/" target="_blank"><u>模拟</u></a><a href="https://m.hqchip.com/app/1072" target="_blank"><u>信号</u></a>范围在0 - 3.6V，保护触发阈值为3.7 - 3.85V，保护响应时间为6μs，导通电阻为4Ω等，这些参数保证了数据传输的准确性和稳定性。</p>
<h3>
	（四）BUS<a href="https://m.hqchip.com/app/1708" target="_blank"><u>电源开关</u></a>参数</h3>
<p>
	包括V BUS 切换时间、HVBUS保护触发阈值、电压保护响应时间等一系列参数，确保了电源开关的可靠运行和对过压、欠压等情况的及时响应。</p>
<h2>
	四、工作模式解析</h2>
<h3>
	（一）禁用模式</h3>
<p>
	这是设备的最低功耗模式，此时USB BUS电源以及HVD + 到D + 和HVD - 到D - 的数据路径均被禁用。</p>
<h3>
	（二）USB - IF专用充电端口（DCP）和苹果自动检测模式</h3>
<ol><li>
		<strong>iPad/DCP自动检测模式</strong>：可模拟专用iPad 2.1A充电和USB - IF专用充电端口，通过监测HVD + 和HVD - 的电压来确定连接设备的类型，并相应地调整充电模式。</li>
	<li>
		<strong>iPhone/DCP自动检测模式</strong>：类似iPad模式，可模拟专用iPhone 1.0A充电和USB - IF专用充电端口。
		<h3>
			（三）USB低速/全速（LS/FS）模式</h3>
		<p>
			带有自动主机充电器端口保护功能，便携式设备连接后可通过特定方式检测主机是否为充电器，在设备枚举时，若D + 或D - 为逻辑高电平，则禁用自动充电器检测电路，确保USB通信不受干扰。</p>
		<h3>
			（四）USB高速（HS）模式</h3>
		<p>
			提供真正的直通操作，用于USB高速（480Mbps）数据信号传输，并禁用USB主机充电器端口检测电路。</p>
	</li>
</ol><h2>
	五、应用设计要点</h2>
<h3>
	（一）正向电流限制</h3>
<p>
	通过一个<a href="https://www.hqchip.com/app/485" target="_blank"><u>电阻</u></a>可以设置电源开关的电流限制，典型电流限制会有±20%到±25%的变化，在设计时需要根据应用中的最大预期电流来确定最坏情况下的最小电流限制值，并预留5%的余量。通过特定公式可以计算出所需的(RISET)电阻值。</p>
<h3>
	（二）外部n - 通道DMOS设备选择</h3>
<p>
	外部电源DMOS设备必须是20V VGS类型，以确保<a href="https://www.hqchip.com/app/1734" target="_blank"><u>电荷泵</u></a>能产生约7V VGS，从而保证非逻辑电平设备的低导通电阻。</p>
<h3>
	（三）电源旁路<a href="https://www.elecfans.com/tags/电容/" target="_blank"><u>电容</u></a></h3>
<p>
	不同引脚需要连接不同规格的旁路电容，如HVBUS到GND需连接0.1μF陶瓷电容，BUS到GND需连接至少100μF低ESR陶瓷电容，IN到GND需连接1μF陶瓷电容等，这些电容能有效提供ESD保护，避免电压过冲和压降问题。</p>
<h3>
	（四）线路长度和布局</h3>
<p>
	USB外设与HVBUS、HVD + 和HVD - 之间的线长应在0.5m到5m范围内，以限制短路事件中的电流变化率。在USB高速模式下，需要精心设计<a href="https://m.elecfans.com/v/tag/82/" target="_blank"><u>PCB</u></a>布局，确保90Ω受控差分阻抗的等长走线，并可在HVD_和D_引脚插入调谐电感和电容来消除寄生电容。</p>
<h2>
	六、ESD保护与测试</h2>
<p>
	MAX16972/MAX16972A在HVD + 、HVD - 和HVBUS上具备±15kV的ESD保护能力，采用了先进的结构，在正常操作、关机和掉电等所有状态下都能承受高ESD。其ESD测试主要包括人体模型和IEC 61000 - 4 - 2两种，人体模型测试在设备未供电时进行，而IEC 61000 - 4 - 2测试在设备供电时进行，IEC测试的峰值电流更高，因此该标准下测量的ESD耐受电压通常低于人体模型。</p>
<h2>
	七、总结</h2>
<p>
	MAX16972/MAX16972A汽车高速USB保护器以其全面的保护功能、高性能的开关设计、智能的充电模式以及丰富的电气特性，为汽车USB应用提供了可靠的解决方案。在实际设计中，电子工程师需要根据具体的应用需求，合理选择设备的工作模式，注意正向电流限制、外部设备选择、电源旁路电容、线路长度和布局等设计要点，以充分发挥该产品的优势。同时，其出色的ESD保护能力也能有效提高设备的可靠性和稳定性。在如今汽车电子不断发展的时代，MAX16972/MAX16972A无疑是汽车USB保护领域的一款优秀产品。</p>
<p>
	大家在使用MAX16972/MAX16972A进行设计时，有没有遇到过什么独特的问题或者有什么巧妙的解决方案呢？欢迎在评论区分享交流。</p>]]></description></item><item>    <title><![CDATA[深入解析RK平台Debug串口实现：从硬件交互到安全适配]]></title>    <link>https://www.elecfans.com/d/7401336.html</link>    <guid>https://www.elecfans.com/d/7401336.html</guid>    <pubDate>2026-02-06 16:40:00</pubDate>    <description><![CDATA[<div class="rich_media_content js_underline_content autoTypeSetting24psection">
	<h1>
		</h1>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">在<a href="https://www.elecfans.com/v/tag/232/" target="_blank"><u>嵌入式开发</u></a>中，</span></span></font><span><span style="background-color:rgb(255,255,255);">Debug</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">串口是排查问题的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">"</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">生命线</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">"</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，尤其在系统崩溃、内核挂死等极端场景下，稳定可靠的串口调试功能往往是定位问题的关键。</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);"><a href="https://bbs.elecfans.com/zhuti_1179_1.html" target="_blank"><u>Rockchip</u></a></span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">平台通过</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">rk_fiq_debugger.c</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">实现了一套高效、可靠的</span></span></font><span><span style="background-color:rgb(255,255,255);">Debug</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">串口机制，不仅支持基础的收发功能，还针对实时性、安全性做了深度优化。本文将从代码层面解析其实现原理。</span></span></font></span></p>
	<img src="https://file1.elecfans.com//web3/M00/3C/92/wKgZPGkaixyAZCKMAAB6W6uip7k603.png" alt="wKgZPGkaixyAZCKMAAB6W6uip7k603.png"/><p>
		</p>
	<p>
		</p>
	<p>
		</p>
	<h2>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">一、核心功能：</span></span></font><span><span style="background-color:rgb(255,255,255);"><a href="https://www.elecfans.com/tags/uart/" target="_blank"><u>UART</u></a></span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">硬件交互层</span></span></font></span></b></h2>
	<p>
		</p>
	<p>
		<span><span><span style="background-color:rgb(255,255,255);">Debug</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">串口的本质是通过</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">UART</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">（通用异步收发传输器）实现数据交互，其核心功能包括初始化</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">UART</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">、发送字符、接收字符和缓冲区管理。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span><span><span style="background-color:rgb(255,255,255);">1. UART</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">初始化：奠定<a href="https://www.elecfans.com/v/tag/1301/" target="_blank"><u>通信</u></a>基础</span></span></font></span></b></h3>
	<p>
		</p>
	<p>
		<span><span><span style="background-color:rgb(255,255,255);">debug_port_init</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">函数负责</span></span></font><span><span style="background-color:rgb(255,255,255);">UART</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">的硬件初始化，主要完成以下工作：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">波特率配置</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：根据需求设置波特率（支持</span></span></font><span><span style="background-color:rgb(255,255,255);">115200</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">和</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">1500000</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">等常见速率），通过写入</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">UART_DLL</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">（除数锁存低位）和</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">UART_DLM</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">（除数锁存高位）<a href="https://www.elecfans.com/tags/寄存器/" target="_blank"><u>寄存器</u></a>实现。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">寄存器复位</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：通过</span></span></font><span><span style="background-color:rgb(255,255,255);">UART_SRR</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（软件复位寄存器）复位</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">UART</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，确保初始状态一致。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">工作模式配置</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：设置</span></span></font><span><span style="background-color:rgb(255,255,255);">UART_LCR</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（线路控制寄存器）配置数据格式（默认</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">8</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">位数据位），关闭环路模式，启用接收中断（</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">UART_IER_RDI</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><span><span style="background-color:rgb(255,255,255);">FIFO</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">控制</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：通过</span></span></font><span><span style="background-color:rgb(255,255,255);">UART_FCR</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">FIFO</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">控制寄存器）启用接收</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">FIFO</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，避免单字符中断频繁触发导致的性能问题。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
					</li>
				<li>
					</li>
				<li>
					</li>
				<li>
					</li>
				<li>
					</li>
				<li>
					</li>
				<li>
					</li>
				<li>
					</li>
			</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__comment">// 关键初始化代码片段</span></span></code><code><span><span class="code-snippet__title">rk_fiq_wri<a href="https://www.elecfans.com/tags/te/" target="_blank"><u>te</u></a></span>(t,<span class="code-snippet__number">0x07</span>,<span class="code-snippet__variable">UART_SRR</span>);<span class="code-snippet__comment">// 复位UART</span></span></code><code><span><span class="code-snippet__title">udelay</span>(<span class="code-snippet__number">10</span>);</span></code><code><span><span class="code-snippet__title">rk_fiq_write</span>(t,<span class="code-snippet__number">0x83</span>,<span class="code-snippet__variable">UART_LCR</span>);<span class="code-snippet__comment">// 进入波特率配置模式</span></span></code><code><span><span class="code-snippet__title">rk_fiq_write</span>(t, dll,<span class="code-snippet__variable">UART_DLL</span>); <span class="code-snippet__comment">// 设置波特率除数</span></span></code><code><span><span class="code-snippet__title">rk_fiq_write</span>(t, dlm,<span class="code-snippet__variable">UART_DLM</span>);</span></code><code><span><span class="code-snippet__title">rk_fiq_write</span>(t,<span class="code-snippet__number">0x03</span>,<span class="code-snippet__variable">UART_LCR</span>);<span class="code-snippet__comment">// 恢复数据格式配置</span></span></code><code><span><span class="code-snippet__title">rk_fiq_write</span>(t,<span class="code-snippet__variable">UART_IER_RDI</span>,<span class="code-snippet__variable">UART_IER</span>);<span class="code-snippet__comment">// 启用接收中断</span></span></code></pre>
		<h3>
		<b><span><span><span style="background-color:rgb(255,255,255);">2.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">数据发送：确保可靠输出</span></span></font></span></b></h3>
	<p>
		</p>
	<p>
		<span><span><span style="background-color:rgb(255,255,255);">debug_putc</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">函数实现单字符发送，核心逻辑是</span></span></font></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">轮询等待发送缓冲区非满</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">，避免数据丢失：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">通过读取</span></span></font><span><span style="background-color:rgb(255,255,255);">UART_USR</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（状态寄存器）的</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">UART_USR_TX_FIFO_NOT_FULL</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">位，判断发送</span></span></font><span><span style="background-color:rgb(255,255,255);">FIFO</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">是否有空闲空间。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">若缓冲区满，则短暂延时（</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">udelay(10)</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）后重试，最多重试</span></span></font><span><span style="background-color:rgb(255,255,255);">10000</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">次（避免无限阻塞）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">缓冲区空闲时，将字符写入</span></span></font><span><span style="background-color:rgb(255,255,255);">UART_TX</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（发送寄存器）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">对于批量数据发送，</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">debug_put</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">函数通过循环调用</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">debug_putc</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">实现，并自动在换行符</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">n</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">前添加回车符</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">r</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">，适配终端显示习惯。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span><span><span style="background-color:rgb(255,255,255);">3.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">数据接收：处理输入与特殊指令</span></span></font></span></b></h3>
	<p>
		</p>
	<p>
		<span><span><span style="background-color:rgb(255,255,255);">debug_getc</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">函数负责接收字符，同时支持特殊指令检测（如触发调试中断的</span></span></font><span><span style="background-color:rgb(255,255,255);">"fiq"</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">指令）：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">先读取</span></span></font><span><span style="background-color:rgb(255,255,255);">UART_IIR</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（中断识别寄存器）和</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">UART_USR</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">（状态寄存器），判断中断类型和接收状态。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">若检测到接收超时（</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">UART_IIR_RX_<a href="https://bbs.elecfans.com/group_715" target="_blank"><u>TI</u></a>MEOUT</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）但无实际数据，通过读取</span></span></font><span><span style="background-color:rgb(255,255,255);">UART_RX</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">寄存器清除无效中断，避免死循环。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">正常接收时，将字符存入缓冲区，若检测到连续输入</span></span></font><span><span style="background-color:rgb(255,255,255);">"fiq"</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（无下划线或空格），返回</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">FIQ_DEBUGGER_BREAK</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">触发调试中断。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h2>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">二、高级特性：线程化与缓冲区优化</span></span></font></span></b></h2>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">在高负载场景下，直接操作</span></span></font><span><span style="background-color:rgb(255,255,255);">UART</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">硬件可能导致阻塞（如发送缓冲区满时）。</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">RK</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">平台通过</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">CONFIG_RK_CONSOLE_THRE<a href="https://bbs.elecfans.com/zhuti_1472_1.html" target="_blank"><u>AD</u></a></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">配置项，引入线程化处理机制，提升调试可靠性。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span><span><span style="background-color:rgb(255,255,255);">1.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">双</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">FIFO</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">缓冲区：解耦生产与消费</span></span></font></span></b></h3>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">定义两个<a href="https://www.hqchip.com/app/1093" target="_blank"><u>环形</u></a>缓冲区（</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">fifo</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">和</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">tty_fifo</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">），大小均为</span></span></font><span><span style="background-color:rgb(255,255,255);">64KB</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">，分别用于普通调试信息和</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">TTY</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">设备数据。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">发送数据时，先写入</span></span></font><span><span style="background-color:rgb(255,255,255);">FIFO</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">kfifo_in</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">），由专门的线程负责将</span></span></font><span><span style="background-color:rgb(255,255,255);">FIFO</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">数据写入</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">UART</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">硬件，避免主流程阻塞。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">若</span></span></font><span><span style="background-color:rgb(255,255,255);">FIFO</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">满，则统计丢弃的消息数（</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">console_dropped_messages</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">），并在后续空闲时提示。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span><span><span style="background-color:rgb(255,255,255);">2.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">控制台线程：异步处理发送逻辑</span></span></font></span></b></h3>
	<p>
		</p>
	<p>
		<span><span><span style="background-color:rgb(255,255,255);">console_thread</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">作为后台线程，负责将</span></span></font><span><span style="background-color:rgb(255,255,255);">FIFO</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">中的数据发送到</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">UART</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">线程处于</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">TASK_INTERRUPTIBLE</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">状态，仅在</span></span></font><span><span style="background-color:rgb(255,255,255);">FIFO</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">有数据或需退出时被唤醒（</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">wake_up_process</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">循环读取</span></span></font><span><span style="background-color:rgb(255,255,255);">FIFO</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">数据，调用</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">console_putc</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">发送，每发送一行（遇到</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">n</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）刷新一次，平衡效率与实时性。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">处理完数据后，通过</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">console_flush</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">等待</span></span></font><span><span style="background-color:rgb(255,255,255);">UART</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">硬件完成发送（检测</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">UART_LSR_TEMT</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">位确认发送完成）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">线程唤醒逻辑还做了死锁防护：通过</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">console_thread_running</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">标记避免在</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">usleep_range</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">期间唤醒，防止</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);"><a href="https://www.elecfans.com/tags/pi/" target="_blank"><u>pi</u></a>_lock</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">与</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">console_lock</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">的嵌套死锁。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h2>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">三、安全与兼容性：</span></span></font><span><span style="background-color:rgb(255,255,255);">TrustZone</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">与多</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);"><a href="https://m.elecfans.com/v/tag/132/" target="_blank"><u>CPU</u></a></span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">适配</span></span></font></span></b></h2>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">在支持</span></span></font><span><span style="background-color:rgb(255,255,255);">TrustZone</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（安全区）的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">RK</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">平台上，</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Debug</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">串口需兼容安全世界与非安全世界的交互，并支持多</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">CPU</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">核心间的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">FIQ</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">（快速中断）迁移。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span><span><span style="background-color:rgb(255,255,255);">1. <a href="https://www.hqchip.com/app/1522" target="_blank"><u>SD</u></a>EI</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：软件委派异常<a href="https://m.hqchip.com/app/1787" target="_blank"><u>接口</u></a></span></span></font></span></b></h3>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">当启用</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">CONFIG_FIQ_DEBUGGER_TRUST_ZONE</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">和</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">CONFIG_<a href="https://m.hqchip.com/app/1378" target="_blank"><u>ARM</u></a>_SDE_INTERFACE</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">时，通过</span></span></font><span><span style="background-color:rgb(255,255,255);">SDEI</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Software Delegated Exception Interface</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）实现</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">FIQ</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的安全管理：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">注册</span></span></font><span><span style="background-color:rgb(255,255,255);">SDEI</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">事件回调（</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">fiq_sdei_event_callb<a href="https://m.hqchip.com/app/1703" target="_blank"><u>ac</u></a>k</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">），将</span></span></font><span><span style="background-color:rgb(255,255,255);">FIQ</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">处理逻辑委派给内核。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">通过</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">fiq_debugger_sdei_enable</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">函数初始化</span></span></font><span><span style="background-color:rgb(255,255,255);">SDEI</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">事件，配置事件路由（绑定到指定</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">CPU</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">核心）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">支持</span></span></font><span><span style="background-color:rgb(255,255,255);">FIQ</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">在不同</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">CPU</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">核心间迁移（</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">_rk_fiq_dbg_sdei_switch_cpu</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">），通过</span></span></font><span><span style="background-color:rgb(255,255,255);">SDEI</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">事件通知安全世界完成路由切换。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span><span><span style="background-color:rgb(255,255,255);">2.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);"><a href="https://www.hqchip.com/app/1731" target="_blank"><u>电源管理</u></a>与</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">CPU</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">离线适配</span></span></font></span></b></h3>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">为确保调试功能在系统低功耗或</span></span></font><span><span style="background-color:rgb(255,255,255);">CPU</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">离线时可用，驱动做了针对性处理：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><span><span style="background-color:rgb(255,255,255);">CPU</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">离线</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：通过</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">fiq_debugger_cpu_offine_migrate_fiq</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">函数，在</span></span></font><span><span style="background-color:rgb(255,255,255);">CPU</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">离线前将</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">FIQ</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">迁移到其他在线</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">CPU</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">休眠唤醒</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：注册</span></span></font><span><span style="background-color:rgb(255,255,255);">PM</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">通知器（</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">fiq_dbg_sdei_pm_nb</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">），在系统休眠前将</span></span></font><span><span style="background-color:rgb(255,255,255);">FIQ</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">迁移到指定核心，唤醒后恢复。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><span><span style="background-color:rgb(255,255,255);">** idle</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">状态</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">**</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">：通过</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">fiq_debugger_cpuidle_resume_fiq</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">函数，在</span></span></font><span><span style="background-color:rgb(255,255,255);">CPU</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">从</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">idle</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">状态恢复时重新启用</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">FIQ</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h2>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">四、设备树与初始化流程</span></span></font></span></b></h2>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">驱动通过设备树（</span></span></font><span><span style="background-color:rgb(255,255,255);">Device Tree</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）获取硬件信息，初始化流程如下：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;background:rgb(0,255,255);"><span><span><span style="background-color:rgb(255,255,255);">1.</span></span></span></span><span><span><span style="background-color:rgb(255,255,255);">rk_fiqdbg_probe</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">函数解析设备树，读取</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">rockchip,serial-id</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（指定调试串口</span></span></font><span><span style="background-color:rgb(255,255,255);">ID</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）、</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">rockchip,baudrate</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（波特率）等参数。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">2.</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">查找对应</span></span></font><span><span style="background-color:rgb(255,255,255);">UART</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">节点，验证其是否禁用（避免与正常串口功能冲突），获取物理地址、中断号等资源。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">3.</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">初始化<a href="https://www.elecfans.com/tags/时钟/" target="_blank"><u>时钟</u></a>（</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">apb_pclk</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">和</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">bau<a href="https://m.hqchip.com/app/1703" target="_blank"><u>dc</u></a>lk</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">），映射</span></span></font><span><span style="background-color:rgb(255,255,255);">UART</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">寄存器地址（</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">of_iomap</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">4.</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">调用</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">rk_serial_debug_init</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">完成最终初始化，注册平台设备（</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">platform_device_register</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h2>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">总结</span></span></font></span></b></h2>
	<p>
		</p>
	<p>
		<span><span><span style="background-color:rgb(255,255,255);">RK</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">平台的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Debug</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">串口驱动通过分层设计实现了高可靠性与灵活性：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">硬件层</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：直接操作</span></span></font><span><span style="background-color:rgb(255,255,255);">UART</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">寄存器，确保收发正确性；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">缓冲层</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：通过</span></span></font><span><span style="background-color:rgb(255,255,255);">FIFO</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">和后台线程解耦数据生产与硬件发送，提升系统响应性；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">安全层</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：适配</span></span></font><span><span style="background-color:rgb(255,255,255);">TrustZone</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">和</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">SDEI</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，支持多</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">CPU</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">场景下的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">FIQ</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">迁移，确保极端场景下的调试可用性。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">这套实现不仅满足了日常开发的调试需求，更在系统崩溃、低功耗等特殊场景下提供了关键的问题定位能力，是</span></span></font><span><span style="background-color:rgb(255,255,255);">RK</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">平台稳定性的重要保障。</span></span></font></span></p>
	<p>
		</p>
</div>
<div class="wx_detail">
	<p>
		</p>
</div>]]></description></item><item>    <title><![CDATA[比斯特锂电池保护板测试机覆盖保护板各项功能与耐久性测试]]></title>    <link>https://www.elecfans.com/d/7641959.html</link>    <guid>https://www.elecfans.com/d/7641959.html</guid>    <pubDate>2026-02-06 16:41:00</pubDate>    <description><![CDATA[<p>
	<a href="https://www.hqchip.com/app/1712" target="_blank"><u>电池管理</u></a>系统（BMS）中的关键组件——<a href="https://m.elecfans.com/v/tag/2692/" target="_blank"><u>锂电池</u></a>保护板（PCM）扮演着守护电池安全与性能的主要角色。逐渐在<a href="https://m.elecfans.com/v/tag/293/" target="_blank"><u>新能源</u></a>汽车、储能系统及<a href="https://www.elecfans.com/soft/data/39-96/" target="_blank"><u>消费电子</u></a>产品中备受应用，锂电池保护板的可靠性与稳定性已成为决定整个电池系统安全运行的关键因素。深圳比斯特<a href="https://www.elecfans.com/v/tag/1687/" target="_blank"><u>自动化设备</u></a>有限公司凭借深厚的技术积累和行业洞察，研发出新一代锂电池保护板测试机，通过覆盖保护板各项功能测试与耐久性验证，为锂电池行业提供了可靠的质量保障解决方案。</p>
<p>
	<img src="https://file1.elecfans.com/web3/M00/43/EF/wKgZO2lM-JOABwgYAABwR0HmLT8367.png" alt="wKgZO2lM-JOABwgYAABwR0HmLT8367.png"/>BT-锂电池保护板测试机</p>
<p>
	一、锂电池保护板的作用与测试挑战<br/>
	锂电池保护板作为电池管理系统系统中的关键部件，承担着过充保护、过放保护、过流保护、短路保护、温度保护等多项重要功能。在复杂的实际应用场景中，保护板需要在各种异常情况下及时切断电路，防止电池损坏甚至发生安全事故。<br/>
	然而传统的测试方法往往面临三大挑战：其一，测试覆盖不完全，许多测试设备只注重基本保护功能验证，缺乏对保护板在极端工况下的响应能力和耐久性的系统性测试。其二，测试精度与效率难以兼得，<a href="https://m.hqchip.com/app/1252" target="_blank"><u>高精度</u></a>测试往往耗时较长，而快速测试又难以保证测试深度。其三，测试过程自动化程度不足，人工干预环节多，导致测试结果的一致性和可靠性难以保证。</p>
<p>
	二、技术创新与系统架构<br/>
	在硬件架构方面，测试机配备高精度程控<a href="https://www.hqchip.com/app.html" target="_blank"><u>电源</u></a>与电子负载系统，能够<a href="https://www.elecfans.com/analog/" target="_blank"><u>模拟</u></a>电池组在各种充放电状态下的电压、<a href="https://www.elecfans.com/tags/电流/" target="_blank"><u>电流</u></a>特性。精密测量模块实现微安级<a href="https://m.hqchip.com/app/1782" target="_blank"><u>电流检测</u></a>与毫伏级电压测量，确保测试数据的准确性。多通道温度控制单元可模拟0℃至85℃的环境条件，从多方面验证保护板在不同温度环境下的工作性能。<br/>
	在测试流程方面，系统实现了从参数配置、测试执行、数据存储、报告生成的全流程半自动化。操作人员只需通过人机交互界面选择测试方案，设备即可自动完成所有测试项目，包括保护电压阈值测试、保护电流响应时间测试、自耗电流测试、均衡功能测试等。</p>
<p>
	三、功能性测试体系覆盖广<br/>
	比斯特测试机通过精确控制充放电电压，模拟电池电压逐渐升高至过充保护点或降低至过放保护点的过程，精确测量保护板的响应阈值与动作时间。系统采用逐步逼近法，以5mV的分辨率逐步改变测试电压，确保保护点测量的准确性。同时，设备记录从触发条件出现到保护动作完成的整个过程，验证保护板响应速度是否符合设计要求。<br/>
	过流与短路保护测试模拟实际使用中可能出现的异常大电流情况。测试机可生成高达数百安培的瞬时电流，模拟不同级别的过流情况，验证保护板在不同过流条件下的保护特性。<br/>
	短路保护测试则是通过模拟电池正负极直接短路的极端情况，验证保护板在毫秒级时间内切断电路的能力。在测试过程中，设备实时记录电流波形与保护响应时间，为保护板设计优化提供数据支持。<br/>
	温度保护测试通过高精度温控系统，在保护板表面或关键<a href="https://m.hqchip.com/ic/0" target="_blank"><u>元器件</u></a>周围建立可控的温度场。测试系统监测保护板在温度上升或下降过程中的工作状态变化，精确把控温度保护触发点，验证温度保护功能的有效性。</p>
<p>
	四、耐久性验证方案系统化<br/>
	循环寿命测试：测试机可<a href="https://www.elecfans.com/v/tag/1315/" target="_blank"><u>编程</u></a>设定不同的测试循环，如充放电循环保护测试、过流过压交替测试等，验证保护板在数万次甚至数十万次保护动作后性能是否衰减。测试过程中，系统自动记录每次保护动作的参数，监测保护阈值、响应时间等关键指标的变化趋势。<br/>
	环境适应性测试：通过环境试验箱与测试机的联动，可进行高温高湿测试、低温测试、温度循环测试、振动测试等综合环境试验。这些测试验证保护板在极端温度、湿度变化和<a href="https://www.elecfans.com/v/tag/1472/" target="_blank"><u>机械</u></a>应力下的功能完整性，确保其能够适应汽车、户外储能等复杂应用场景。<br/>
	长期可靠性测试：测试系统采用高温老化、循环充放电加速测试等方法，在较短时间内模拟保护板长期使用后的状态，提前发现潜在的设计缺陷或材料问题。</p>
<p>
	深圳比斯特自动化设备有限公司的锂电池保护板测试机，通过全方面覆盖保护板各项功能测试与系统化耐久性验证，为锂电池行业提供了专业、可靠的测试解决方案。在精度与效率、广度与深度之间，比斯特测试机找到了一个合适的平衡点，既满足了大规模生产对测试效率的要求，又保证了研发和质量控制对测试深度的需求。<br/><br/>
	审核编辑 黄宇</p>]]></description></item><item>    <title><![CDATA[RK平台ROS2适配全指南：从编译到运行，手把手搞定嵌入式机器人开发]]></title>    <link>https://www.elecfans.com/d/7401334.html</link>    <guid>https://www.elecfans.com/d/7401334.html</guid>    <pubDate>2026-02-06 16:42:00</pubDate>    <description><![CDATA[<div class="rich_media_content js_underline_content autoTypeSetting24psection">
	<h1>
		</h1>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">在<a href="https://www.elecfans.com/soft/data/21-22/" target="_blank"><u>嵌入式</u></a><a href="https://bbs.elecfans.com/group_756" target="_blank"><u>机器人</u></a>与<a href="https://bbs.elecfans.com/group_640" target="_blank"><u>智能硬件</u></a>领域，<a href="https://bbs.elecfans.com/zhuti_1179_1.html" target="_blank"><u>瑞芯微</u></a>（</span></span></font><span><span style="background-color:rgb(255,255,255);"><a href="https://bbs.elecfans.com/zhuti_1179_1.html" target="_blank"><u>Rockchip</u></a></span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">RK356x</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">RK3588</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">等</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);"><a href="https://m.hqchip.com/app/1378" target="_blank"><u>arm</u></a>64</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">芯片凭借高性能、低功耗的优势，成为众多<a href="https://bbs.elecfans.com/group_1231" target="_blank"><u>开发者</u></a>的首选硬件平台；而</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);"><a href="https://www.elecfans.com/v/tag/1528/" target="_blank"><u>ROS2</u></a></span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Robot Opera<a href="https://bbs.elecfans.com/group_715" target="_blank"><u>ti</u></a>ng System 2</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）作为新一代机器人<a href="https://www.elecfans.com/v/tag/527/" target="_blank"><u>操作系统</u></a>，在分布式<a href="https://www.elecfans.com/v/tag/1301/" target="_blank"><u>通信</u></a>、实时性、多语言支持上的升级，更是嵌入式机器人开发的核心框架。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">但不少开发者在将</span></span></font><span><span style="background-color:rgb(255,255,255);"><a href="https://m.elecfans.com/v/tag/1004/" target="_blank"><u>ROS</u></a>2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">适配到</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">RK</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">平台时，常会遇到</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“<a href="https://www.hqchip.com/app/1522" target="_blank"><u>SD</u></a>K</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">与</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">ROS2</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">版本不兼容</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">交叉编译报错</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">板端运行缺失依赖</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">等问题。本文基于瑞芯微官方《</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Rockchip <a href="https://bbs.elecfans.com/group_300" target="_blank"><u>Linux</u></a> SDK</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">编译</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">ROS2</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">说明》文档，从适配逻辑、完整流程到避坑技巧，手把手教你搞定</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">RK</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">平台的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">ROS2</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">适配。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h2>
		<b><span style="font-family:Arial;font-weight:bold;font-size:16pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">一、适配基础：先搞懂</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">支持清单</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font></span></b></h2>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">在开始适配前，必须先明确</span></span></font></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">硬件、系统、</span></span></font><span><span style="background-color:rgb(255,255,255);">ROS2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">版本的匹配关系</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">，避免因版本不兼容走弯路。</span></span></font></span></p>
	<img src="https://file1.elecfans.com//web3/M00/3C/92/wKgZPGkaixuAQFzuAAGQ91GVbYc962.png" alt="wKgZPGkaixuAQFzuAAGQ91GVbYc962.png"/><h3>
		<b><span style="font-family:Arial;font-weight:bold;font-size:15pt;"><span><span style="background-color:rgb(255,255,255);">1.1</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">支持的硬件芯片</span></span></font></span></b></h3>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">RK</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">平台目前仅支持</span></span></font></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">arm64</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">位芯片</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">，已验证的型号包括：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">RK356x</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">系列（如</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">RK3562</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">RK3568</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">RK3588</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">系列</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">其他同架构</span></span></font><span><span style="background-color:rgb(255,255,255);">arm64</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">芯片（内核版本无限制）</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="Arial"><span><span style="background-color:rgb(255,255,255);"/></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">注意：</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">32</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">位</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">arm</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">芯片的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">rootfs</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">暂未支持</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">ROS2</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">编译，属于待完善项。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span style="font-family:Arial;font-weight:bold;font-size:15pt;"><span><span style="background-color:rgb(255,255,255);">1.2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">匹配的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Linux SDK</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">与</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Docker</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">镜像</span></span></font></span></b></h3>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">RK Linux SDK</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">基于</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Buildroot</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">构建，</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">ROS2</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的编译依赖</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">SDK</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">提供的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);"><a href="https://www.elecfans.com/tags/python/" target="_blank"><u>Python</u></a></span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">bullet</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">opencv</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">等基础包，且需与</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Docker</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">镜像的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Python</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">版本严格一致（避免交叉编译时库版本冲突）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">已验证的</span></span></font><span><span style="background-color:rgb(255,255,255);">SDK</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">与</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Docker</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">匹配关系如下：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<table style="border-collapse:collapse;margin-left:-0.6pt;border:none;"><tbody><tr><td style="padding:3pt 6pt 1.5pt;border-width:1pt;border-style:solid;border-color:rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">Linux SDK</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">版本</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:1pt solid rgb(222,224,227);border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">Python</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">版本</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:1pt solid rgb(222,224,227);border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">匹配</span></span></font><span><span style="background-color:rgb(255,255,255);">Docker</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">镜像</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:1pt solid rgb(222,224,227);border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">额外要求</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
			</tr><tr><td style="padding:3pt 6pt 1.5pt;border-left:1pt solid rgb(222,224,227);border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">linux-5.10-stan-rkr1</span></span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">3.10.5</span></span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">jammy-ros2-build</span></span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">需要添加</span></span></font><span><span style="background-color:rgb(255,255,255);">ros2_dep.config</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">补丁</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
			</tr><tr><td style="padding:3pt 6pt 1.5pt;border-left:1pt solid rgb(222,224,227);border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">linux-4.19-gen-rkr3</span></span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">3.8.6</span></span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">focal-ros2-build</span></span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">需更新</span></span></font><span><span style="background-color:rgb(255,255,255);">lttng-tools</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">等依赖到指定版本</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
			</tr></tbody></table><h3>
		<b><span style="font-family:Arial;font-weight:bold;font-size:15pt;"><span><span style="background-color:rgb(255,255,255);">1.3</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">已验证的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">ROS2</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">发行版</span></span></font></span></b></h3>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">RK</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">平台已实测通过</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">4</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">个</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">ROS2</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">版本，源码可直接从</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">GitHub</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">下载，版本信息如下：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<table style="border-collapse:collapse;margin-left:-0.6pt;border:none;"><tbody><tr><td style="padding:3pt 6pt 1.5pt;border-width:1pt;border-style:solid;border-color:rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">ROS2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">发行版</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:1pt solid rgb(222,224,227);border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">版本号</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:1pt solid rgb(222,224,227);border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">下载链接（</span></span></font><span><span style="background-color:rgb(255,255,255);">GitHub</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
			</tr><tr><td style="padding:3pt 6pt 1.5pt;border-left:1pt solid rgb(222,224,227);border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">Foxy</span></span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">ros2-release-foxy-20230620</span></span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">https://github.com/ros2/ros2/releases/tag/release-foxy-20230620</span></span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
			</tr><tr><td style="padding:3pt 6pt 1.5pt;border-left:1pt solid rgb(222,224,227);border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">Gal<a href="https://m.hqchip.com/app/1703" target="_blank"><u>ac</u></a>tic</span></span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">ros2-release-galactic-20221209</span></span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">https://github.com/ros2/ros2/releases/tag/release-galactic-20221209</span></span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
			</tr><tr><td style="padding:3pt 6pt 1.5pt;border-left:1pt solid rgb(222,224,227);border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">Humble</span></span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">ros2-release-humble-20230724</span></span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">https://github.com/ros2/ros2/releases/tag/release-humble-20230724</span></span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
			</tr><tr><td style="padding:3pt 6pt 1.5pt;border-left:1pt solid rgb(222,224,227);border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">Iron</span></span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">ros2-release-iron-20230912</span></span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">https://github.com/ros2/ros2/releases/tag/release-iron-20230912</span></span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
			</tr></tbody></table><h2>
		<b><span style="font-family:Arial;font-weight:bold;font-size:16pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">二、核心逻辑：为什么用</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“Docker+SDK”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">分离编译？</span></span></font></span></b></h2>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">很多开发者会疑惑：直接在</span></span></font><span><span style="background-color:rgb(255,255,255);">RK SDK</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">里编译</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">ROS2</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">不行吗？为什么要引入</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Docker</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">？</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">这背后是</span></span></font><span><span style="background-color:rgb(255,255,255);">RK</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">团队为</span></span></font></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">降低维护成本、提升版本灵活性</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">设计的适配逻辑：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span style="font-family:Arial;font-weight:bold;font-size:15pt;"><span><span style="background-color:rgb(255,255,255);">2.1 ROS</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">官方方案的痛点</span></span></font></span></b></h3>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">ROS2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">官方虽提供了</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">arm64</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">交叉编译的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Docker</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">镜像（如</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">Docke<a href="https://www.elecfans.com/tongxin/rf/" target="_blank"><u>rf</u></a>ile_ubuntu_arm64_prebuilt</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">），但仅支持</span></span></font><span><span style="background-color:rgb(255,255,255);">Ubuntu 18.04</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Bionic</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）系统，而</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">RK Linux SDK</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">rootfs</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">基于</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Buildroot</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">定制，与</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Ubuntu 18.04</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的库结构差异极大，直接使用会导致大量依赖冲突。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span style="font-family:Arial;font-weight:bold;font-size:15pt;"><span><span style="background-color:rgb(255,255,255);">2.2 RK</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">方案的优势：解耦</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">SDK</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">与</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">ROS2</span></span></font></span></b></h3>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">RK</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">采用</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">SDK</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">提供依赖</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">+ Docker</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">编译</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">ROS2</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的分离模式：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">RK Linux SDK</span></span></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：仅负责编译</span></span></font><span><span style="background-color:rgb(255,255,255);">ROS2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">所需的基础依赖（如</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Python</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Eigen</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">OpenCV</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">），不直接编译</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">ROS2</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">本体，避免</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">SDK</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">升级对</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">ROS2</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的影响；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">Docker</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">容器</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：提供统一的</span></span></font><span><span style="background-color:rgb(255,255,255);">Ubuntu</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">编译环境，结合</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">SDK</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的交叉工具链与</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Sysroot</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，确保</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">ROS2</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">编译产物能适配</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">RK</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">rootfs</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">最终通过</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">重新打包</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">rootfs”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">将</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">ROS2</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">集成到</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">RK</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">板端，实现灵活升级（换</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">ROS2</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">版本只需换</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Docker</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">编译，无需重构</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">SDK</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h2>
		<b><span style="font-family:Arial;font-weight:bold;font-size:16pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">三、手把手适配流程：</span></span></font><span><span style="background-color:rgb(255,255,255);">4</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">步从</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">0</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">到</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">ROS2</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">运行</span></span></font></span></b></h2>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">接下来进入实操环节，全程基于</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“RK3562 + Linux 5.10 SDK + ROS2 Iron”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">示例，其他型号可参考适配。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span style="font-family:Arial;font-weight:bold;font-size:15pt;"><span><span style="background-color:rgb(255,255,255);">3.1</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">第一步：编译</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">RK SDK</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，集成</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">ROS2</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">依赖</span></span></font></span></b></h3>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">先确保</span></span></font><span><span style="background-color:rgb(255,255,255);">SDK</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">已包含</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">ROS2</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的基础依赖，关键是配置</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">ros2_dep.config</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">文件。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">步骤</span></span></font><span><span style="background-color:rgb(255,255,255);">1.1</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">检查</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">/</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">添加</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">ros2_dep.config</span></span></font></span></b></h4>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">ros2_dep.config</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">是</span></span></font><span><span style="background-color:rgb(255,255,255);">ROS2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">依赖的配置文件，存放于</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">buildroot/configs/rockchip/</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">目录下，包含</span></span></font><span><span style="background-color:rgb(255,255,255);">LTTNG</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Python</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">等必需依赖的开关。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">若存在该文件：检查是否包含</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">LTTNG_TOOLS</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><span><span style="background-color:rgb(255,255,255);">ROS2 Iron</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">必需），若缺失则手动添加：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__comment"># 编辑ros2_dep.config</span></span></code><code><span><span class="code-snippet__built_in">t<a href="https://www.elecfans.com/tags/ai/" target="_blank"><u>ai</u></a>l</span>-f buildroot/configs/rockchip/ros2_dep.config</span></code><code><span><span class="code-snippet__comment"># 添加以下内容（支持tracetools功能）</span></span></code><code><span>BR2_PACKAGE_LTTNG_TOOLS=y</span></code><code><span>BR2_PACKAGE_LTTNG_LIBUST=y</span></code></pre>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">若不存在该文件：需给</span></span></font><span><span style="background-color:rgb(255,255,255);">SDK</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">打</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">2</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">个补丁（补丁文件可从</span></span></font></span><u><span style="font-family:Arial;color:rgb(5,99,193);text-decoration:underline;"><span><span style="background-color:rgb(255,255,255);">RK</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">官方链接</span></span></font></span></u><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">下载）：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__comment"># 进入SDK的buildroot目录</span></span></code><code><span><span class="code-snippet__built_in">cd</span>buildroot</span></code><code><span><span class="code-snippet__comment"># 打补丁（添加libasio依赖和ros2_dep.config）</span></span></code><code><span>patch -p1 &lt; ../linux-sdk-patches/buildroot/0001-package-add-libasio.patch</span></code><code><span>patch -p1 &lt; ../linux-sdk-patches/buildroot/0002-configs-rockchip-add-ros2-build-dependencies.patch</span></code></pre>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">步骤</span></span></font><span><span style="background-color:rgb(255,255,255);">1.2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">将</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">ros2_dep.config</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">集成到</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">SDK</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">编译</span></span></font></span></b></h4>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">修改</span></span></font><span><span style="background-color:rgb(255,255,255);">SDK</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">defconfig</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">文件（如</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">RK356x</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">机器人方案的</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">rockchip_rk356x_robot_defconfig</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">），引入</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">ros2_dep.config</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__comment"># 编辑defconfig</span></span></code><code><span>vim buildroot/configs/rockchip/rockchip_rk356x_robot_defconfig</span></code><code><span><span class="code-snippet__comment"># 在文件中添加一行（引入ROS2依赖配置）</span></span></code><code><span><span class="code-snippet__comment">#include "ros2_dep.config"</span></span></code></pre>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">步骤</span></span></font><span><span style="background-color:rgb(255,255,255);">1.3</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">完整编译</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">SDK</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">rootfs</span></span></font></span></b></h4>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">执行</span></span></font><span><span style="background-color:rgb(255,255,255);">SDK</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">编译命令，生成包含</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">ROS2</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">依赖的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">rootfs</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__comment"># 进入SDK根目录</span></span></code><code><span><span class="code-snippet__built_in">cd</span>/path/to/rk-linux-sdk</span></code><code><span><span class="code-snippet__comment"># 编译rootfs（根据芯片型号选择defconfig）</span></span></code><code><span>./build.sh rockchip_rk356x_robot_defconfig</span></code><code><span><span class="code-snippet__comment"># 编译完成后，rootfs输出在buildroot/output/rockchip_rk356x_robot/</span></span></code></pre>
	<h3>
		<b><span style="font-family:Arial;font-weight:bold;font-size:15pt;"><span><span style="background-color:rgb(255,255,255);">3.2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">第二步：搭建</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Docker</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">编译环境</span></span></font></span></b></h3>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">基于匹配的</span></span></font><span><span style="background-color:rgb(255,255,255);">Docker</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">镜像，搭建</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">ROS2</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的交叉编译环境。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">步骤</span></span></font><span><span style="background-color:rgb(255,255,255);">2.1</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">安装</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Docker</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">并配置用户组</span></span></font></span></b></h4>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">在</span></span></font><span><span style="background-color:rgb(255,255,255);">Ubuntu PC</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（建议</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">20.04</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">及以上）上安装</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Docker</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，避免每次执行需</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">sudo</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__comment"># 安装Docker</span></span></code><code><span><span class="code-snippet__attribute">sudo</span>apt install docker.io</span></code><code><span><span class="code-snippet__comment"># 将当前用户加入docker组（无需sudo）</span></span></code><code><span>sudo usermod -aG docker<span class="code-snippet__variable">$USER</span></span></code><code><span>newgrp docker <span class="code-snippet__comment"># 生效用户组</span></span></code></pre>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">步骤</span></span></font><span><span style="background-color:rgb(255,255,255);">2.2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">导入匹配的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Docker</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">镜像</span></span></font></span></b></h4>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">先确认</span></span></font><span><span style="background-color:rgb(255,255,255);">SDK</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">编译的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Python</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">版本，再导入对应</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Docker</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">镜像（镜像从</span></span></font></span><u><span style="font-family:Arial;color:rgb(5,99,193);text-decoration:underline;"><span><span style="background-color:rgb(255,255,255);">RK</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">官方链接</span></span></font></span></u><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">下载）：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__comment"># 查看SDK的Python版本（示例输出：Python 3.10.5）</span></span></code><code><span>./buildroot/output/rockchip_rk356x_robot/host/bin/python --version</span></code><code><span><span class="code-snippet__comment"># 导入匹配的镜像（Python 3.10.5对应jammy-ros2-build）</span></span></code><code><span>gunzip jammy-ros2-build.tar.gz <span class="code-snippet__comment"># 解压镜像</span></span></code><code><span>docker image lo<a href="https://bbs.elecfans.com/zhuti_1472_1.html" target="_blank"><u>ad</u></a> -i jammy-ros2-build.tar <span class="code-snippet__comment"># 导入镜像</span></span></code></pre>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">步骤</span></span></font><span><span style="background-color:rgb(255,255,255);">2.3</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">启动</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Docker</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">容器并挂载</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">SDK</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">输出目录</span></span></font></span></b></h4>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">启动容器时，需将</span></span></font><span><span style="background-color:rgb(255,255,255);">SDK</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">的</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">output</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">目录（含交叉工具链、</span></span></font><span><span style="background-color:rgb(255,255,255);">rootfs</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）挂载到容器内，确保编译时能调用</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">SDK</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">资源：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__comment"># 启动容器，挂载SDK的output目录（source替换为你的SDK output路径）</span></span></code><code><span>docker run -it --mount<span class="code-snippet__built_in">type</span>=<span class="code-snippet__built_in">bind</span>,<span class="code-snippet__built_in">source</span>=/home/yourname/rk-sdk/buildroot/output/rockchip_rk356x_robot/,target=/buildroot jammy-ros2-build</span></code><code><span><span class="code-snippet__comment"># 进入容器后，默认用户为builder，密码：rockchip</span></span></code></pre>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">步骤</span></span></font><span><span style="background-color:rgb(255,255,255);">2.4</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">拷贝编译脚本与</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">ROS2</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">源码到容器</span></span></font></span></b></h4>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">从</span></span></font></span><u><span style="font-family:Arial;color:rgb(5,99,193);text-decoration:underline;"><span><span style="background-color:rgb(255,255,255);">RK</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">官方链接</span></span></font></span></u><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">下载</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">ros2-build-scripts.tar.gz</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">（编译脚本）和</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">ros2-sources.tar.gz</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><span><span style="background-color:rgb(255,255,255);">ROS2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">源码），拷贝到容器内并解压：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__comment"># 1. 在Ubuntu PC端，查找容器ID（示例容器ID：c519d9d668f9）</span></span></code><code><span>docker container<span class="code-snippet__built_in">ls</span></span></code><code><span><span class="code-snippet__comment"># 2. 拷贝文件到容器的/tmp目录</span></span></code><code><span>docker container<span class="code-snippet__built_in">cp</span>ros2-build-scripts.tar.gz c519d9d668f9:/tmp/</span></code><code><span>docker container<span class="code-snippet__built_in">cp</span>ros2-sources.tar.gz c519d9d668f9:/tmp/</span></code><code><span><span class="code-snippet__comment"># 3. 在容器内解压文件到/opt/ros目录</span></span></code><code><span>tar zxf /tmp/ros2-build-scripts.tar.gz -C /</span></code><code><span>tar zxf /tmp/ros2-sources.tar.gz -C /</span></code><code><span><span class="code-snippet__comment"># 解压后，/opt/ros下会有cross-com<a href="https://www.elecfans.com/tags/pi/" target="_blank"><u>pi</u></a>le（交叉编译配置）和各ROS2版本目录</span></span></code><code><span><span class="code-snippet__built_in">ls</span>/opt/ros <span class="code-snippet__comment"># 输出：cross-compile foxy galactic humble iron</span></span></code></pre>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">步骤</span></span></font><span><span style="background-color:rgb(255,255,255);">2.5</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">修改脚本的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Python</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">版本号</span></span></font></span></b></h4>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">确保编译脚本的</span></span></font><span><span style="background-color:rgb(255,255,255);">Python</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">版本与</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">SDK</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">一致（示例</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">SDK</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">为</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">3.10.5</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，无需修改；若为</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">3.8.6</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">则需将</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“310”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">改为</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“38”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__meta">#</span>编辑交叉编译配置文件</span></code><code><span>vim /opt/ros/cross-compile/cross-compile.mixin</span></code><code><span><span class="code-snippet__meta">#</span>检查Python版本相关配置（如3.10对应310）</span></code><code><span><span class="code-snippet__meta">#</span>示例：将所有<span class="code-snippet__string">"3.10"</span>改为<span class="code-snippet__string">"3.8"</span>（若SDK为Python 3.8.6）</span></code></pre>
	<h3>
		<b><span style="font-family:Arial;font-weight:bold;font-size:15pt;"><span><span style="background-color:rgb(255,255,255);">3.3</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">第三步：编译</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">ROS2</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，解决交叉编译关键问题</span></span></font></span></b></h3>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">进入</span></span></font><span><span style="background-color:rgb(255,255,255);">ROS2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">版本目录（如</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Iron</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">），执行编译脚本，重点处理</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“TRY_RUN</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">手动配置</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">问题。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">步骤</span></span></font><span><span style="background-color:rgb(255,255,255);">3.1</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">执行编译前准备</span></span></font></span></b></h4>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__comment"># 进入ROS2 Iron目录</span></span></code><code><span><span class="code-snippet__built_in">cd</span>/opt/ros/iron</span></code><code><span><span class="code-snippet__comment"># 准备源码（脚本会检查源码完整性）</span></span></code><code><span>./prepare-source.sh</span></code></pre>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">步骤</span></span></font><span><span style="background-color:rgb(255,255,255);">3.2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">执行编译脚本</span></span></font></span></b></h4>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__comment"># 开始编译ROS2（耗时约15-30分钟，取决于PC性能）</span></span></code><code><span>./build-ros2.sh</span></code><code><span><span class="code-snippet__comment"># 编译成功的标志：输出类似以下内容</span></span></code><code><span>Summary: 317 packages finished [15min 37s]</span></code><code><span>build ros quit &amp; cleanup</span></code></pre>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">关键问题：处理</span></span></font><span><span style="background-color:rgb(255,255,255);">TRY_RUN</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">手动配置</span></span></font></span></b></h4>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">交叉编译时，</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">fastrtps</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">和</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">rosbag2_cpp</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">会触发</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">TRY_RUN</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">报错（因无法在</span></span></font><span><span style="background-color:rgb(255,255,255);">PC</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">端运行</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">arm64</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">程序），需手动在</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">RK</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">板端执行程序并记录结果。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h5>
		<b><span style="font-family:Arial;font-weight:bold;font-size:12pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">案例</span></span></font><span><span style="background-color:rgb(255,255,255);">1</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">fastrtps</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">TRY_RUN</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">报错</span></span></font></span></b></h5>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">报错信息：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span>CMake Error: TRY_RUN() invoked<span class="code-snippet__keyword">in</span><span class="code-snippet__keyword">cross</span><span class="code-snippet__operator">-</span>compiling mode, please<span class="code-snippet__keyword">set</span>SM_RUN_RESULT<span class="code-snippet__keyword">and</span>SM_RUN_RESULT__TRYRUN_OUTPUT</span></code></pre>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">解决步骤：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">1.</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">将容器内的测试程序（如</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">/buildroot/build/ros/fastrtps/cmTC_4f573</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">）拷贝到</span></span></font><span><span style="background-color:rgb(255,255,255);">RK</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">板端；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">2.</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">在</span></span></font><span><span style="background-color:rgb(255,255,255);">RK</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">板端执行程序，记录输出：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__comment"># RK板端执行</span></span></code><code><span>/tmp/cmTC_4f573-SM_RUN_RESULT <span class="code-snippet__comment"># 输出：PTHREAD_RWLOCK_PREFER_READER_NP</span></span></code></pre>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">1.</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">在容器内编辑</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">TryRunResults.cmake</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">，填入结果：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span>vim<span class="code-snippet__regexp">/buildroot/</span>build<span class="code-snippet__regexp">/ros/</span>fastrtps<span class="code-snippet__operator">/</span><span class="code-snippet__type">TryRunResults</span>.cmake</span></code><code><span># 添加以下内容</span></code><code><span><span class="code-snippet__keyword">set</span>(<span class="code-snippet__type">SM_RUN_RESULT</span><span class="code-snippet__string">"0"</span><span class="code-snippet__type">CACHE</span><span class="code-snippet__type">STRING</span><span class="code-snippet__string">"PTHREAD_RWLOCK_PREFER_READER_NP"</span><span class="code-snippet__type">FORCE</span>)</span></code><code><span><span class="code-snippet__keyword">set</span>(<span class="code-snippet__type">SM_RUN_RESULT__TRYRUN_OUTPUT</span><span class="code-snippet__string">"0"</span><span class="code-snippet__type">CACHE</span><span class="code-snippet__type">STRING</span><span class="code-snippet__string">"PTHREAD_RWLOCK_PREFER_READER_NP"</span><span class="code-snippet__type">FORCE</span>)</span></code></pre>
	<h5>
		<b><span style="font-family:Arial;font-weight:bold;font-size:12pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">案例</span></span></font><span><span style="background-color:rgb(255,255,255);">2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">rosbag2_cpp</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">TRY_RUN</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">报错</span></span></font></span></b></h5>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">类似处理，在</span></span></font><span><span style="background-color:rgb(255,255,255);">RK</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">板端执行测试程序后，填入结果（示例输出为缺失</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">liblsan.so</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span>vim<span class="code-snippet__regexp">/buildroot/</span>build<span class="code-snippet__regexp">/ros/</span>rosbag2_cpp<span class="code-snippet__operator">/</span><span class="code-snippet__type">TryRunResults</span>.cmake</span></code><code><span><span class="code-snippet__keyword">set</span>(<span class="code-snippet__type">HAVE_SANITIZE<a href="https://www.elecfans.com/tags/rs/" target="_blank"><u>RS</u></a>_EXITCODE</span><span class="code-snippet__string">"127"</span><span class="code-snippet__type">CACHE</span><span class="code-snippet__type">STRING</span><span class="code-snippet__string">"error while lo<a href="https://www.elecfans.com/tags/adi/" target="_blank"><u>adi</u></a>ng shared libraries: liblsan.so.0"</span><span class="code-snippet__type">FORCE</span>)</span></code><code><span><span class="code-snippet__keyword">set</span>(<span class="code-snippet__type">HAVE_SANITIZERS_EXITCODE__TRYRUN_OUTPUT</span><span class="code-snippet__string">"127"</span><span class="code-snippet__type">CACHE</span><span class="code-snippet__type">STRING</span><span class="code-snippet__string">"error while loading shared libraries: liblsan.so.0"</span><span class="code-snippet__type">FORCE</span>)</span></code></pre>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">可选：单独编译某个</span></span></font><span><span style="background-color:rgb(255,255,255);">ROS2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">包</span></span></font></span></b></h4>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">若只需编译特定包（如</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">demo_nodes_cpp</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">），可使用</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">colcon build --packages-select</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__comment"># 单独编译demo_nodes_cpp</span></span></code><code><span><span class="code-snippet__attribute">colcon</span>build --packages-<span class="code-snippet__literal">select</span>demo_nodes_cpp --cmake-args -<a href="https://m.hqchip.com/app/1703" target="_blank"><u>DC</u></a>MAKE_TOOLCHAIN_FILE=/buildroot/share/buildroot/toolchainfile.cmake</span></code></pre>
	<h3>
		<b><span style="font-family:Arial;font-weight:bold;font-size:15pt;"><span><span style="background-color:rgb(255,255,255);">3.4</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">第四步：打包</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">rootfs</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，板端运行</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">ROS2</span></span></font></span></b></h3>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">编译完成后，</span></span></font><span><span style="background-color:rgb(255,255,255);">ROS2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">产物已存放在</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">/buildroot/target/opt/ros</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">目录，需重新打包</span></span></font><span><span style="background-color:rgb(255,255,255);">rootfs</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">并烧录到</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">RK</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">板端。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">步骤</span></span></font><span><span style="background-color:rgb(255,255,255);">4.1</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">重新打包</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">rootfs</span></span></font></span></b></h4>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">在</span></span></font><span><span style="background-color:rgb(255,255,255);">Ubuntu PC</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">SDK</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">根目录，执行打包命令：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__comment"># 进入SDK根目录</span></span></code><code><span><span class="code-snippet__built_in">cd</span>/path/to/rk-linux-sdk</span></code><code><span><span class="code-snippet__comment"># 重新打包rootfs（生成rootfs.img）</span></span></code><code><span>./build.sh rootfs</span></code></pre>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">步骤</span></span></font><span><span style="background-color:rgb(255,255,255);">4.2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">烧录</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">rootfs</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">并运行</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">ROS2</span></span></font></span></b></h4>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">将</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">rootfs.img</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">烧录到</span></span></font><span><span style="background-color:rgb(255,255,255);">RK</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">板端（使用</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">RK</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">烧录工具），启动后执行以下命令运行</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">ROS2 Hello World</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__comment"># 进入ROS2目录</span></span></code><code><span><span class="code-snippet__built_in">cd</span>/opt/ros/iron</span></code><code><span><span class="code-snippet__comment"># 设置环境变量（指定ROS2路径和工作目录）</span></span></code><code><span><span class="code-snippet__built_in">export</span>COLCON_CURRENT_PREFIX=/opt/ros/iron</span></code><code><span><span class="code-snippet__built_in">export</span>ROS_HOME=/userdata/</span></code><code><span><span class="code-snippet__built_in">source</span>./local_setup.sh <span class="code-snippet__comment"># 加载ROS2环境</span></span></code><code><span><span class="code-snippet__comment"># 验证ROS2环境（列出已安装包）</span></span></code><code><span>ros2 pkg list</span></code><code><span><span class="code-snippet__comment"># 运行Hello World（启动listener后台进程，再启动talker）</span></span></code><code><span>ros2 run demo_nodes_cpp listener &amp;</span></code><code><span>ros2 run demo_nodes_cpp talker</span></code><code><span><span class="code-snippet__comment"># 成功输出（类似以下内容）</span></span></code><code><span>[INFO] [1501839280.834017748] [talker]: Publishing:<span class="code-snippet__string">'Hello World: 1'</span></span></code><code><span>[INFO] [1501839280.839280957] [listener]: I heard: [Hello World: 1]</span></code></pre>
	<h2>
		<b><span style="font-family:Arial;font-weight:bold;font-size:16pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">四、避坑宝典：</span></span></font><span><span style="background-color:rgb(255,255,255);">10</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">个常见报错的解决方案</span></span></font></span></b></h2>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">适配过程中难免遇到编译或运行报错，以下是</span></span></font><span><span style="background-color:rgb(255,255,255);">RK</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">官方已验证的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">10</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">个高频问题及解决方案，按报错场景分类。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span style="font-family:Arial;font-weight:bold;font-size:15pt;"><span><span style="background-color:rgb(255,255,255);">4.1</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">编译环境类报错</span></span></font></span></b></h3>
	<p>
		</p>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><span><span style="background-color:rgb(255,255,255);">1.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">编译主机内存不足</span></span></font></span></b></h4>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">现象</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：编译中途卡顿或报错</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“out of memory”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">解决方案</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：开启</span></span></font><span><span style="background-color:rgb(255,255,255);">z<a href="https://www.elecfans.com/tags/ram/" target="_blank"><u>ram</u></a></span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">交换空间（示例分配</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">12G</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span>sudo -i su</span></code><code><span>modprobe zram</span></code><code><span><span class="code-snippet__built_in">echo</span>12G &gt; /sys/block/zram0/disksize</span></code><code><span>mkswap /dev/zram0</span></code><code><span>swapon /dev/zram0</span></code><code><span>free -h <span class="code-snippet__comment"># 验证交换空间已生效</span></span></code></pre>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><span><span style="background-color:rgb(255,255,255);">2. pkg-config</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">找不到</span></span></font></span></b></h4>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">现象</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：编译</span></span></font><span><span style="background-color:rgb(255,255,255);">tracetools</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">时报错</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“Could NOT find PkgConfig”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">原因</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font><span><span style="background-color:rgb(255,255,255);">Docker</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">中未安装</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">pkgconf</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">（非</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">pkg-config</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">），或</span></span></font><span><span style="background-color:rgb(255,255,255);">SDK</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">host-pkgconf</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">与</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Docker</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">版本冲突；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">解决方案</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：在</span></span></font><span><span style="background-color:rgb(255,255,255);">Docker</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">中安装</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">pkgconf</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，并指定</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">SDK</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">pkgconfig</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">路径：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__comment"># Docker中安装pkgconf</span></span></code><code><span>sudo apt install pkgconf</span></code><code><span><span class="code-snippet__comment"># 设置PKG_CONFIG_PATH（指向SDK的sysroot）</span></span></code><code><span><span class="code-snippet__built_in">export</span>PKG_CONFIG_PATH=/buildroot/host/aarch64-buildroot-linux-gnu/sysroot/usr/lib/pkgconfig</span></code></pre>
	<h3>
		<b><span style="font-family:Arial;font-weight:bold;font-size:15pt;"><span><span style="background-color:rgb(255,255,255);">4.2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">板端运行类报错</span></span></font></span></b></h3>
	<p>
		</p>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><span><span style="background-color:rgb(255,255,255);">3.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">板端报</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“GLIBCXX_3.4.30 not found”</span></span></font></span></b></h4>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">现象</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：运行</span></span></font><span><span style="background-color:rgb(255,255,255);">ros2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">命令时，提示</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">libstdc++.so.6: version 'GLIBCXX_3.4.30' not found</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">原因</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font><span><span style="background-color:rgb(255,255,255);">ROS2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">编译使用的工具链与</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">SDK</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的工具链版本不匹配；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">解决方案</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：必须使用</span></span></font><span><span style="background-color:rgb(255,255,255);">RK Linux SDK</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">自带的交叉工具链编译</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">ROS2</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Docker</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">挂载的</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">/buildroot</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">目录已包含该工具链）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><span><span style="background-color:rgb(255,255,255);">4.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">编译结果出现</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">x86_64</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">动态库</span></span></font></span></b></h4>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">现象</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font><span><span style="background-color:rgb(255,255,255);">ROS2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Python</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">库（如</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">_rclpy_pybind11.cpython-310-x86_64-linux-gnu.so</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">）是</span></span></font><span><span style="background-color:rgb(255,255,255);">x86</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">架构，无法在</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">arm64</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">板端运行；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">原因</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font><span><span style="background-color:rgb(255,255,255);">pybind11</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">交叉编译时默认使用</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">PC</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Python</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">路径；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">解决方案</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：修改</span></span></font><span><span style="background-color:rgb(255,255,255);">pybind11</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">配置，指定</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">arm64</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Python</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">模块后缀：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__comment"># 1. 在pybind11_vendor/CMakeLists.txt中添加</span></span></code><code><span><span class="code-snippet__attribute">list</span>(APPEND extra_cmake_args<span class="code-snippet__string">"-DPYBIND11_PYTHONLIBS_OVERWRI<a href="https://www.elecfans.com/tags/te/" target="_blank"><u>TE</u></a>=OFF"</span>)</span></code><code><span><span class="code-snippet__attribute">list</span>(APPEND extra_cmake_args<span class="code-snippet__string">"-DPYTHON_MODULE_EXTENSION=.cpython-310-aarch64-linux-gnu.so"</span>)</span></code><code><span><span class="code-snippet__comment"># 2. 在cross-compile.mixin中添加相同参数</span></span></code></pre>
	<h3>
		<b><span style="font-family:Arial;font-weight:bold;font-size:15pt;"><span><span style="background-color:rgb(255,255,255);">4.3</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">依赖与配置类报错</span></span></font></span></b></h3>
	<p>
		</p>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><span><span style="background-color:rgb(255,255,255);">5. CMake</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">找不到</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">exlibConfig.cmake</span></span></font></span></b></h4>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">现象</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：编译</span></span></font><span><span style="background-color:rgb(255,255,255);">ament_cmake_vendor_package</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">时，报错</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“Could not find exlibConfig.cmake”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">原因</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：交叉工具链路径与</span></span></font><span><span style="background-color:rgb(255,255,255);">CMAKE_PREFIX_PATH</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">冲突；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">解决方案</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：编译时不指定</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">CMAKE_TOOLCHAIN_FILE</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">（依赖</span></span></font><span><span style="background-color:rgb(255,255,255);">Docker</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">与</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">SDK</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">挂载的环境自动识别）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><span><span style="background-color:rgb(255,255,255);">6. google_benchmark</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">缺少</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">limits</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">头文件</span></span></font></span></b></h4>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">现象</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：编译</span></span></font><span><span style="background-color:rgb(255,255,255);">foxy</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">版本时，报错</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“‘numeric_limits’ is not a member of ‘std’”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">原因</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">benchmark_register.h</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">缺失</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);"><limits/></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">头文件；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">解决方案</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：在该头文件中添加</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><a href="https://www.elecfans.com/outside?redirect=#" target="_blank"><span style="background-color:rgb(255,255,255);">#include</span></a><span style="background-color:rgb(255,255,255);"><limits/></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">，或使用</span></span></font><span><span style="background-color:rgb(255,255,255);">RK</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">提供的补丁包。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><span><span style="background-color:rgb(255,255,255);">7. _FORTIFY_SOURCE</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">编译报错</span></span></font></span></b></h4>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">现象</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：编译</span></span></font><span><span style="background-color:rgb(255,255,255);">mimick_vendor</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">时，报错</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“_FORTIFY_SOURCE requires compiling with optimization (-O)”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">原因</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font><span><span style="background-color:rgb(255,255,255);">SDK</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">工具链定义了</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">_FORTIFY_SOURCE</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">，但未开启编译优化；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">解决方案</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：删除工具链中的</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">_FORTIFY_SOURCE</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">定义，或在编译时添加</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">-O2</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">优化参数。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><span><span style="background-color:rgb(255,255,255);">8.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">需要设置</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">CMAKE_INCLUDE_PATH</span></span></font></span></b></h4>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">现象</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：编译</span></span></font><span><span style="background-color:rgb(255,255,255);">orocos_kdl_vendor</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">时，报错</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“EIGEN3_INCLUDE_DIR NO<a href="https://m.hqchip.com/app/1522" target="_blank"><u>TF</u></a>OUND”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">原因</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font><span><span style="background-color:rgb(255,255,255);">CMake</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">无法找到</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">SDK</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">中的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Eigen</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">头文件；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">解决方案</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：指定</span></span></font><span><span style="background-color:rgb(255,255,255);">CMAKE_INCLUDE_PATH</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">指向</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">SDK</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">sysroot</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span>export<span class="code-snippet__type">CMAKE_INCLUDE_PATH</span><span class="code-snippet__operator">=</span>'<span class="code-snippet__regexp">/buildroot/</span>host<span class="code-snippet__regexp">/aarch64-buildroot-linux-gnu/</span>sysroot<span class="code-snippet__regexp">/usr/</span>include<span class="code-snippet__operator">/</span>'</span></code></pre>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><span><span style="background-color:rgb(255,255,255);">9. tracetools</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">找不到</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">lttng-ust</span></span></font></span></b></h4>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">现象</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：编译</span></span></font><span><span style="background-color:rgb(255,255,255);">tracetools</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">时，报错</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“<a href="https://www.hqchip.com/app/2004" target="_blank"><u>can</u></a>not find -llttng-ust-common”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">原因</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font><span><span style="background-color:rgb(255,255,255);">pkg-config</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">找到了</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Docker</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">lttng</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，而非</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">SDK</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">lttng</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">解决方案</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：设置</span></span></font><span><span style="background-color:rgb(255,255,255);">PKG_CONFIG_PATH</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">指向</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">SDK</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">pkgconfig</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">目录（同问题</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">2</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的解决方案）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><span><span style="background-color:rgb(255,255,255);">10.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">交叉编译时</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">numpy</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">路径错误</span></span></font></span></b></h4>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">现象</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：编译</span></span></font><span><span style="background-color:rgb(255,255,255);">action_msgs</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">时，警告</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“unsafe header path: /usr/local/lib/<a href="https://www.elecfans.com/v/tag/3495/" target="_blank"><u>python3</u></a>.10/dist-packages/numpy/core/include”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">原因</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font><span><span style="background-color:rgb(255,255,255);">Python</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">使用</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">PC</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">端的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">numpy</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">路径；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">解决方案</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：在</span></span></font><span><span style="background-color:rgb(255,255,255);">cross-compile.mixin</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">中预设</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">numpy</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">include</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">路径（指向</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">SDK</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">sysroot</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h2>
		<b><span style="font-family:Arial;font-weight:bold;font-size:16pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">五、待完善方向：这些功能还在优化中</span></span></font></span></b></h2>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">目前</span></span></font><span><span style="background-color:rgb(255,255,255);">RK</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">平台的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">ROS2</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">适配仍有</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">2</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">个待完善项，开发者需注意：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">1.</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">删除不必要的安装文件</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：编译后的</span></span></font><span><span style="background-color:rgb(255,255,255);">ROS2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">目录包含</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">cmake</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">、头文件、静态库等冗余文件，未来可优化为仅保留运行必需的动态库和脚本；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">2.</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">arm32</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">位</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">rootfs</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">支持</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：当前仅支持</span></span></font><span><span style="background-color:rgb(255,255,255);">arm64</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">，</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">32</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">位芯片（如</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">RK3288</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）的适配仍在开发中。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h2>
		<b><span style="font-family:Arial;font-weight:bold;font-size:16pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">六、总结与建议</span></span></font></span></b></h2>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">RK</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">平台的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">ROS2</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">适配核心是</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">SDK</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">提供依赖</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">+ Docker</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">编译</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">+ rootfs</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">集成</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，既解决了官方</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">ROS2</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">镜像与</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">RK</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">系统的兼容性问题，又实现了</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">SDK</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">与</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">ROS2</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的解耦维护。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">给开发者的</span></span></font><span><span style="background-color:rgb(255,255,255);">3</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">点实操建议：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">1.</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">版本匹配是前提</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：务必确保</span></span></font><span><span style="background-color:rgb(255,255,255);">SDK</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Python</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">版本、</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Docker</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">镜像、</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">ROS2</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">版本三者对应，避免版本冲突；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">2.</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">交叉编译多检查</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：编译后通过</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">file</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">命令验证产物架构（如</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">file _rclpy_pybind11.so</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">应显示</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“aarch64”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">通过这套流程，你可以快速在</span></span></font><span><span style="background-color:rgb(255,255,255);">RK356x</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">RK3588</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">等芯片上跑通</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">ROS2</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，为嵌入式机器人开发打下基础。后续可基于此扩展激光</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">SLAM</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">、运动控制等功能，充分发挥</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">RK</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">芯片的硬件性能与</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">ROS2</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的软件生态优势。</span></span></font></span></p>
	<img src="https://file1.elecfans.com//web3/M00/3C/92/wKgZPGkaixuAH6eFAAZaCfX2h4Q311.png" alt="wKgZPGkaixuAH6eFAAZaCfX2h4Q311.png"/><p>
		</p>
</div>
<div class="wx_detail">
	<p>
		</p>
</div>]]></description></item><item>    <title><![CDATA[入门宇树机器人开发：从SDK源码探索到实战操作]]></title>    <link>https://www.elecfans.com/d/7401333.html</link>    <guid>https://www.elecfans.com/d/7401333.html</guid>    <pubDate>2026-02-06 16:43:00</pubDate>    <description><![CDATA[<div class="rich_media_content js_underline_content autoTypeSetting24psection">
	<h1>
		</h1>
	<p>
		</p>
	<h2>
		<b><span><font face="等线"><span><span style="background-color:#ffffff;">一、宇树</span></span></font><span><span style="background-color:#ffffff;"><a href="https://www.hqchip.com/app/1522" target="_blank"><u>SD</u></a>K2</span></span><font face="等线"><span><span style="background-color:#ffffff;">整体介绍</span></span></font></span></b></h2>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:#ffffff;">宇树<a href="https://bbs.elecfans.com/group_756" target="_blank"><u>机器人</u></a>（</span></span></font><span><span style="background-color:#ffffff;">Unitree</span></span><font face="等线"><span><span style="background-color:#ffffff;">）作为全球领先的四足机器人研发企业，其推出的</span></span></font></span><span><span><span style="background-color:#ffffff;">unitree_sdk2</span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">是面向旗下</span></span></font><span><span style="background-color:#ffffff;">Go2</span></span><font face="等线"><span><span style="background-color:#ffffff;">、</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">H1</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">、</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">B2</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">等系列机器人的第二代软件开发工具包。该</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">SDK</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">提供了丰富的<a href="https://m.hqchip.com/app/1787" target="_blank"><u>接口</u></a>和示例代码，支持<a href="https://bbs.elecfans.com/group_1231" target="_blank"><u>开发者</u></a>快速实现机器人控制、状态获取、<a href="https://www.elecfans.com/v/tag/117/" target="_blank"><u>传感器</u></a>数据处理等功能，是入门宇树机器人开发的核心工具。</span></span></font></span></p>
	<img src="https://file1.elecfans.com//web3/M00/3C/92/wKgZPGkaixqASPaaAAEPAa5pmOs406.png" alt="wKgZPGkaixqASPaaAAEPAa5pmOs406.png"/><p>
		</p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span><span><span style="background-color:#ffffff;">unitree_sdk2</span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">的核心优势在于：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:#ffffff;">•</span></span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">跨平台支持：兼容</span></span></font><span><span style="background-color:#ffffff;">x86_64</span></span><font face="等线"><span><span style="background-color:#ffffff;">和</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">aarch64</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">架构的</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">Ubuntu 20.04</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">系统</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:#ffffff;">•</span></span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">多机器人适配：统一接口支持</span></span></font><span><span style="background-color:#ffffff;">Go2</span></span><font face="等线"><span><span style="background-color:#ffffff;">、</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">H1</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">、</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">B2</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">等多款机器人</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:#ffffff;">•</span></span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">功能全面：涵盖运动控制、状态监测、视频流获取、语音交互等能力</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:#ffffff;">•</span></span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">易于扩展：提供</span></span></font><span><span style="background-color:#ffffff;">CMake</span></span><font face="等线"><span><span style="background-color:#ffffff;">集成示例，方便开发者搭建自定义项目</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:#ffffff;">官方文档<a href="https://www.hqchip.com/tags" target="_blank"><u>中心</u></a>（</span></span></font></span><u><span><span><span style="background-color:#ffffff;">Unitree Document Cen<a href="https://www.elecfans.com/tags/te/" target="_blank"><u>te</u></a>r</span></span></span></u><span><font face="等线"><span><span style="background-color:#ffffff;">）提供了更详细的技术文档，建议作为开发过程中的重要参考。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h2>
		<b><span><font face="等线"><span><span style="background-color:#ffffff;">二、</span></span></font><span><span style="background-color:#ffffff;">SDK</span></span><font face="等线"><span><span style="background-color:#ffffff;">目录结构与核心功能</span></span></font></span></b></h2>
	<p>
		</p>
	<h3>
		<b><span><span><span style="background-color:#ffffff;">1.</span></span><font face="等线"><span><span style="background-color:#ffffff;">目录结构解析</span></span></font></span></b></h3>
	<p>
		</p>
	<p>
		<span><span><span style="background-color:#ffffff;">unitree_sdk2</span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">的源码结构清晰，主要包含以下核心目录：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span>unitree_sdk2/</span></code><code><span>├── example/       <span class="code-snippet__comment"># 示例代码目录</span></span></code><code><span>│  ├── go2/       <span class="code-snippet__comment"># Go2机器人示例</span></span></code><code><span>│  ├── h1/        <span class="code-snippet__comment"># H1机器人示例</span></span></code><code><span>│  ├── b2/        <span class="code-snippet__comment"># B2机器人示例</span></span></code><code><span>│  ├── state_machine/  <span class="code-snippet__comment"># 状态机控制示例</span></span></code><code><span>│  └── wireless_controller/<span class="code-snippet__comment"># 无线<a href="https://www.hqchip.com/app/1716" target="_blank"><u>控制器</u></a>示例</span></span></code><code><span>├── include/       <span class="code-snippet__comment"># 头文件目录</span></span></code><code><span>│  └── unitree/robot/  <span class="code-snippet__comment"># 机器人控制核心接口</span></span></code><code><span>└── RE<a href="https://bbs.elecfans.com/zhuti_1472_1.html" target="_blank"><u>AD</u></a>ME.md       <span class="code-snippet__comment"># 环境配置与编译说明</span></span></code></pre>
	<h3>
		<b><span><span><span style="background-color:#ffffff;">2.</span></span><font face="等线"><span><span style="background-color:#ffffff;">核心功能点</span></span></font></span></b></h3>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:#ffffff;">从示例代码中可以梳理出</span></span></font><span><span style="background-color:#ffffff;">SDK</span></span><font face="等线"><span><span style="background-color:#ffffff;">的核心功能：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h4>
		<b><span><font face="等线"><span><span style="background-color:#ffffff;">（</span></span></font><span><span style="background-color:#ffffff;">1</span></span><font face="等线"><span><span style="background-color:#ffffff;">）基础控制功能</span></span></font></span></b></h4>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:#ffffff;">•</span></span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">运动控制：支持机器人站立（</span></span></font></span><span><span><span style="background-color:#ffffff;">StandUp()</span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">）、下蹲（</span></span></font></span><span><span><span style="background-color:#ffffff;">StandDown()</span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">）、移动（</span></span></font></span><span><span><span style="background-color:#ffffff;">Move(vx, vy, vw)</span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">）等动作</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:#ffffff;">•</span></span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">步态切换：通过</span></span></font></span><span><span><span style="background-color:#ffffff;">SwitchG<a href="https://www.elecfans.com/tags/ai/" target="_blank"><u>ai</u></a>t()</span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">实现不同运动模式（如慢走、快跑、爬楼梯）的切换</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:#ffffff;">•</span></span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">速度控制：通过</span></span></font></span><span><span><span style="background-color:#ffffff;">SpeedLevel()</span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">调整运动速度等级</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h4>
		<b><span><font face="等线"><span><span style="background-color:#ffffff;">（</span></span></font><span><span style="background-color:#ffffff;">2</span></span><font face="等线"><span><span style="background-color:#ffffff;">）状态获取功能</span></span></font></span></b></h4>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:#ffffff;">•</span></span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">机器人状态：通过</span></span></font></span><span><span><span style="background-color:#ffffff;">RobotStateClient</span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">获取关节角度、</span></span></font><span><span style="background-color:#ffffff;">IMU</span></span><font face="等线"><span><span style="background-color:#ffffff;">数据、电池状态等</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:#ffffff;">•</span></span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">服务状态：通过</span></span></font></span><span><span><span style="background-color:#ffffff;">ServiceList()</span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">查询当前激活的服务列表及运行状态</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:#ffffff;">•</span></span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">传感器数据：支持获取摄像头图像（</span></span></font></span><span><span><span style="background-color:#ffffff;">VideoClient</span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">）、超声波等传感器数据</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h4>
		<b><span><font face="等线"><span><span style="background-color:#ffffff;">（</span></span></font><span><span style="background-color:#ffffff;">3</span></span><font face="等线"><span><span style="background-color:#ffffff;">）高级功能</span></span></font></span></b></h4>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:#ffffff;">•</span></span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">轨迹跟踪：通过</span></span></font></span><span><span><span style="background-color:#ffffff;">TrajectoryFollow</span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">实现预设路径的精确跟踪</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:#ffffff;">•</span></span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">低电平控制：直接操作关节<a href="https://bbs.elecfans.com/zhuti_dianji_1.html" target="_blank"><u>电机</u></a>，实现<a href="https://m.hqchip.com/app/1252" target="_blank"><u>高精度</u></a>位置</span></span></font><span><span style="background-color:#ffffff;">/</span></span><font face="等线"><span><span style="background-color:#ffffff;">力控制</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:#ffffff;">•</span></span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">语音交互：通过</span></span></font></span><span><span><span style="background-color:#ffffff;">Vu<a href="https://m.hqchip.com/app/1936" target="_blank"><u>iCl</u></a>ient</span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">控制机器人的语音交互模块</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h4>
		<b><span><font face="等线"><span><span style="background-color:#ffffff;">（</span></span></font><span><span style="background-color:#ffffff;">4</span></span><font face="等线"><span><span style="background-color:#ffffff;">）开发辅助功能</span></span></font></span></b></h4>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:#ffffff;">•</span></span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">日志系统：支持自定义日志输出路径和格式</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:#ffffff;">•</span></span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">参数配置：通过</span></span></font><span><span style="background-color:#ffffff;">YAML</span></span><font face="等线"><span><span style="background-color:#ffffff;">文件加载机器人控制参数</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:#ffffff;">•</span></span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">线程管理：提供周期性控制线程封装，简化实时控制逻辑</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h2>
		<b><span><font face="等线"><span><span style="background-color:#ffffff;">三、环境搭建步骤</span></span></font></span></b></h2>
	<p>
		</p>
	<h3>
		<b><span><span><span style="background-color:#ffffff;">1.</span></span><font face="等线"><span><span style="background-color:#ffffff;">系统要求</span></span></font></span></b></h3>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:#ffffff;">•</span></span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;"><a href="https://www.elecfans.com/v/tag/527/" target="_blank"><u>操作系统</u></a>：</span></span></font><span><span style="background-color:#ffffff;">Ubuntu 20.04 LTS</span></span></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:#ffffff;">•</span></span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">架构：</span></span></font><span><span style="background-color:#ffffff;">x86_64</span></span><font face="等线"><span><span style="background-color:#ffffff;">（开发机）或</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">aarch64</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">（机器人本体）</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:#ffffff;">•</span></span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">编译器：</span></span></font><span><span style="background-color:#ffffff;">GCC 9.4.0</span></span></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span><span><span style="background-color:#ffffff;">2.</span></span><font face="等线"><span><span style="background-color:#ffffff;">依赖安装</span></span></font></span></b></h3>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:#ffffff;">执行以下命令安装必要依赖：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span>apt<span class="code-snippet__operator">-</span><span class="code-snippet__keyword">get</span><span class="code-snippet__keyword">update</span></span></code><code><span>apt<span class="code-snippet__operator">-</span><span class="code-snippet__keyword">get</span>install<span class="code-snippet__operator">-</span>y cmake g<span class="code-snippet__operator">++</span>build<span class="code-snippet__operator">-</span>essen<a href="https://bbs.elecfans.com/group_715" target="_blank"><u>ti</u></a>al libyaml<span class="code-snippet__operator">-</span>cpp<span class="code-snippet__operator">-</span>dev libeigen3<span class="code-snippet__operator">-</span>dev libboost<span class="code-snippet__operator">-</span><span class="code-snippet__keyword">all</span><span class="code-snippet__operator">-</span>dev libspdlog<span class="code-snippet__operator">-</span>dev libfmt<span class="code-snippet__operator">-</span>dev</span></code></pre>
	<h3>
		<b><span><span><span style="background-color:#ffffff;">3.</span></span><font face="等线"><span><span style="background-color:#ffffff;">编译与安装</span></span></font></span></b></h3>
	<p>
		</p>
	<h4>
		<b><span><font face="等线"><span><span style="background-color:#ffffff;">（</span></span></font><span><span style="background-color:#ffffff;">1</span></span><font face="等线"><span><span style="background-color:#ffffff;">）编译示例代码</span></span></font></span></b></h4>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__built_in">mkdir</span>build</span></code><code><span><span class="code-snippet__built_in">cd</span>build</span></code><code><span>cmake ..</span></code><code><span>make</span></code></pre>
	<h4>
		<b><span><font face="等线"><span><span style="background-color:#ffffff;">（</span></span></font><span><span style="background-color:#ffffff;">2</span></span><font face="等线"><span><span style="background-color:#ffffff;">）安装</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">SDK</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">到系统目录</span></span></font></span></b></h4>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__comment"># 安装到默认路径</span></span></code><code><span>sudo make install</span></code><code><span><span class="code-snippet__comment"># 或指定安装路径</span></span></code><code><span>cmake .. -<a href="https://m.hqchip.com/app/1703" target="_blank"><u>DC</u></a>MAKE_INSTALL_PREFIX=/opt/unitree_robotics</span></code><code><span>sudo make install</span></code></pre>
	<h4>
		<b><span><font face="等线"><span><span style="background-color:#ffffff;">（</span></span></font><span><span style="background-color:#ffffff;">3</span></span><font face="等线"><span><span style="background-color:#ffffff;">）项目集成</span></span></font></span></b></h4>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:#ffffff;">参考</span></span></font></span><span><span><span style="background-color:#ffffff;">example/cmake_sample</span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">中的配置，在自定义项目的</span></span></font></span><span><span><span style="background-color:#ffffff;">CMakeLists.txt</span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">中通过以下方式引入</span></span></font><span><span style="background-color:#ffffff;">SDK</span></span><font face="等线"><span><span style="background-color:#ffffff;">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span>find_package(unitree_sdk2 REQUIRED)</span></code><code><span>target_link_libraries(your_project unitree_sdk2)</span></code></pre>
	<h2>
		<b><span><font face="等线"><span><span style="background-color:#ffffff;">四、常见问题与解决方法</span></span></font></span></b></h2>
	<p>
		</p>
	<h3>
		<b><span><span><span style="background-color:#ffffff;">1.</span></span><font face="等线"><span><span style="background-color:#ffffff;">编译错误</span></span></font></span></b></h3>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:#ffffff;">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:#ffffff;">问题</span></span></font></span></b><span><font face="等线"><span><span style="background-color:#ffffff;">：</span></span></font></span><span><span><span style="background-color:#ffffff;">CMake</span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">版本不足</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<b><span><font face="等线"><span><span style="background-color:#ffffff;">解决</span></span></font></span></b><span><font face="等线"><span><span style="background-color:#ffffff;">：升级</span></span></font><span><span style="background-color:#ffffff;">CMake</span></span><font face="等线"><span><span style="background-color:#ffffff;">至</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">3.10</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">以上版本：</span></span></font></span><span><span><span style="background-color:#ffffff;">sudo apt-get install cmake --upgrade</span></span></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:#ffffff;">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:#ffffff;">问题</span></span></font></span></b><span><font face="等线"><span><span style="background-color:#ffffff;">：依赖库缺失</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<b><span><font face="等线"><span><span style="background-color:#ffffff;">解决</span></span></font></span></b><span><font face="等线"><span><span style="background-color:#ffffff;">：检查是否已安装所有依赖，特别是</span></span></font></span><span><span><span style="background-color:#ffffff;">libyaml-cpp-dev</span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">和</span></span></font></span><span><span><span style="background-color:#ffffff;">libeigen3-dev</span></span></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span><span><span style="background-color:#ffffff;">2.</span></span><font face="等线"><span><span style="background-color:#ffffff;">运行时错误</span></span></font></span></b></h3>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:#ffffff;">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:#ffffff;">问题</span></span></font></span></b><span><font face="等线"><span><span style="background-color:#ffffff;">：</span></span></font></span><span><span><span style="background-color:#ffffff;">networkInte<a href="https://www.elecfans.com/tongxin/rf/" target="_blank"><u>rf</u></a><a href="https://m.hqchip.com/app/1703" target="_blank"><u>ac</u></a>e</span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">参数缺失</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<b><span><font face="等线"><span><span style="background-color:#ffffff;">解决</span></span></font></span></b><span><font face="等线"><span><span style="background-color:#ffffff;">：运行示例时需指定网络接口（如</span></span></font><span><span style="background-color:#ffffff;">eth0</span></span><font face="等线"><span><span style="background-color:#ffffff;">），例如：</span></span></font></span><span><span><span style="background-color:#ffffff;">./go2_robot_state_client eth0</span></span></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:#ffffff;">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:#ffffff;">问题</span></span></font></span></b><span><font face="等线"><span><span style="background-color:#ffffff;">：</span></span></font><span><span style="background-color:#ffffff;">A<a href="https://www.elecfans.com/tags/pi/" target="_blank"><u>PI</u></a></span></span><font face="等线"><span><span style="background-color:#ffffff;">版本不匹配</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<b><span><font face="等线"><span><span style="background-color:#ffffff;">解决</span></span></font></span></b><span><font face="等线"><span><span style="background-color:#ffffff;">：检查客户端与服务器的</span></span></font><span><span style="background-color:#ffffff;">API</span></span><font face="等线"><span><span style="background-color:#ffffff;">版本是否一致，通过</span></span></font></span><span><span><span style="background-color:#ffffff;">GetApiVersion()</span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">和</span></span></font></span><span><span><span style="background-color:#ffffff;">GetServerApiVersion()</span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">验证</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:#ffffff;">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:#ffffff;">问题</span></span></font></span></b><span><font face="等线"><span><span style="background-color:#ffffff;">：服务调用失败</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<b><span><font face="等线"><span><span style="background-color:#ffffff;">解决</span></span></font></span></b><span><font face="等线"><span><span style="background-color:#ffffff;">：确保机器人已启动对应服务，可通过</span></span></font></span><span><span><span style="background-color:#ffffff;">ServiceList()</span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">查询服务状态</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span><span><span style="background-color:#ffffff;">3.</span></span><font face="等线"><span><span style="background-color:#ffffff;">硬件相关问题</span></span></font></span></b></h3>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:#ffffff;">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:#ffffff;">问题</span></span></font></span></b><span><font face="等线"><span><span style="background-color:#ffffff;">：</span></span></font><span><span style="background-color:#ffffff;">H1</span></span><font face="等线"><span><span style="background-color:#ffffff;">机器人关节跟踪实验失败</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<b><span><font face="等线"><span><span style="background-color:#ffffff;">解决</span></span></font></span></b><span><font face="等线"><span><span style="background-color:#ffffff;">：必须先将机器人悬挂起来再运行测试，避免硬件损坏</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:#ffffff;">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:#ffffff;">问题</span></span></font></span></b><span><font face="等线"><span><span style="background-color:#ffffff;">：运动指令无响应</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<b><span><font face="等线"><span><span style="background-color:#ffffff;">解决</span></span></font></span></b><span><font face="等线"><span><span style="background-color:#ffffff;">：检查机器人是否处于正确模式（如运动模式需先激活</span></span></font></span><span><span><span style="background-color:#ffffff;">sport_mode</span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">）</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h2>
		<b><span><font face="等线"><span><span style="background-color:#ffffff;">五、入门实战建议</span></span></font></span></b></h2>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:#ffffff;">1.</span></span></span></span><b><span><font face="等线"><span><span style="background-color:#ffffff;">从示例开始</span></span></font></span></b><span><font face="等线"><span><span style="background-color:#ffffff;">：先运行基础示例（如</span></span></font></span><span><span><span style="background-color:#ffffff;">go2_stand_example</span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">），熟悉机器人控制流程</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:#ffffff;">2.</span></span></span></span><b><span><font face="等线"><span><span style="background-color:#ffffff;">调试工具</span></span></font></span></b><span><font face="等线"><span><span style="background-color:#ffffff;">：利用示例中的日志输出和状态打印功能，理解数据流向</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:#ffffff;">3.</span></span></span></span><b><span><font face="等线"><span><span style="background-color:#ffffff;">模块化学习</span></span></font></span></b><span><font face="等线"><span><span style="background-color:#ffffff;">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:#ffffff;">◦</span></span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">运动控制：重点研究</span></span></font></span><span><span><span style="background-color:#ffffff;">go2_sport_client.cpp</span></span></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:#ffffff;">◦</span></span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">状态获取：分析</span></span></font></span><span><span><span style="background-color:#ffffff;">go2_robot_state_client.cpp</span></span></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:#ffffff;">◦</span></span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">低电平控制：参考</span></span></font></span><span><span><span style="background-color:#ffffff;">h1/low_level</span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">目录下的示例</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:#ffffff;">1.</span></span></span></span><b><span><font face="等线"><span><span style="background-color:#ffffff;">渐进式开发</span></span></font></span></b><span><font face="等线"><span><span style="background-color:#ffffff;">：先基于现有接口实现简单功能，再逐步深入到自定义控制算法</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:#ffffff;">宇树</span></span></font><span><span style="background-color:#ffffff;">SDK2</span></span><font face="等线"><span><span style="background-color:#ffffff;">为开发者提供了通往机器人开发的便捷路径，无论是高校科研、企业应用还是个人兴趣，都能通过这个工具包快速实现<a href="https://m.elecfans.com/v/" target="_blank"><u>创意</u></a>。动手实践是最好的学习方式，不妨从编译第一个示例开始，开启你的机器人开发之旅吧！</span></span></font></span></p>
	<p>
		</p>
</div>
<div class="wx_detail">
	<p>
		</p>
</div>]]></description></item><item>    <title><![CDATA[探秘MAX16550B：12V总线集成保护IC的卓越之选]]></title>    <link>https://www.elecfans.com/d/7641967.html</link>    <guid>https://www.elecfans.com/d/7641967.html</guid>    <pubDate>2026-02-06 16:45:00</pubDate>    <description><![CDATA[<input type="hidden" id="annex0_7641967" value="https://file1.elecfans.com/web2/M00/8F/19/pYYBAGPg8R-AA_mHABhvqOR4Gb8962.pdf"/><h1>
	探秘MAX16550A/MAX16550B：12V总线集成保护IC的卓越之选</h1>
<p>
	在<a href="https://m.elecfans.com/v/tag/125/" target="_blank"><u>电子工程师</u></a>的日常工作中，对12V<a href="https://www.hqchip.com/app.html" target="_blank"><u>电源</u></a>总线的保护、控制和监测是一项至关重要的任务。今天，我们就来深入了解一下<a href="https://bbs.elecfans.com/group_264" target="_blank"><u>Maxim</u></a>推出的MAX16550A/MAX16550B这两款集成保护IC，看看它们是如何为12V电源系统提供高效、可靠的解决方案的。</p>
<p>
	文件下载：<a href="javascript:;" data-annex="annex0_7641967" target="_blank">MAX16550B.pdf</a></p>
<h2>
	产品概述</h2>
<p>
	MAX16550A/MAX16550B是两款集成了低<a href="https://www.hqchip.com/app/485" target="_blank"><u>电阻</u></a><a href="https://www.elecfans.com/tags/mosfet/" target="_blank"><u>MOSFET</u></a>和无损<a href="https://www.elecfans.com/tags/电流/" target="_blank"><u>电流</u></a>感应电路的保护IC，具备SMBus/PMBus控制和报告功能。它们专为12V电源的分配、控制、监测和保护而设计，内部的<a href="https://m.hqchip.com/app/1700" target="_blank"><u>LDO</u></a>可为保护IC提供电源电压。这两款IC有不同的型号可供选择，MAX16550A提供30A保护和8A启动电流，MAX16550B则提供30A保护和16A启动电流，能满足不同应用场景的需求。</p>
<h2>
	产品特性亮点</h2>
<h3>
	高集成度与小尺寸优势</h3>
<p>
	这两款IC采用了高集成度设计，将电源、控制和监测功能集于一体，尺寸仅为4mm x 4.5mm（30A），占用的电路板面积不到传统解决方案的25%。这种高集成度不仅节省了电路板空间，还降低了系统成本。</p>
<h3>
	精确的电流感应</h3>
<p>
	MAX16550A/MAX16550B采用了Maxim的专利无损电流感应技术，能够在负载和温度变化的情况下提供<a href="https://m.hqchip.com/app/1252" target="_blank"><u>高精度</u></a>的电流感应。这种技术提高了整个系统的能源效率，减少了功耗。</p>
<h3>
	先进的系统<a href="https://www.hqchip.com/app/1731" target="_blank"><u>电源管理</u></a></h3>
<p>
	通过PMBus/SMBus<a href="https://m.hqchip.com/app/1787" target="_blank"><u>接口</u></a>，IC提供了广泛的状态监测和报告功能，包括负载电流指示器（ILO<a href="https://bbs.elecfans.com/zhuti_1472_1.html" target="_blank"><u>AD</u></a>）引脚的高精度<a href="https://www.elecfans.com/analog/" target="_blank"><u>模拟</u></a>输出电流报告。此外，还具备可<a href="https://www.elecfans.com/v/tag/1315/" target="_blank"><u>编程</u></a>软启动功能，可有效限制浪涌电流，提高电源供应的可靠性。</p>
<h3>
	多重保护功能</h3>
<p>
	IC对12V系统电源轨的电流和电压进行实时监测，一旦检测到故障，能够迅速关闭电路，提供多级保护。具体保护功能包括过流保护（OCP）、过压保护（OVP，仅MAX16550A具备）、欠压锁定（UVLO）、过温保护（OTP）等。</p>
<h2>
	<a href="https://m.elecfans.com/v/tag/773/" target="_blank"><u>工作原理</u></a>与启动过程</h2>
<h3>
	启动流程</h3>
<p>
	当12V电源电压足够高以保证LDO正常工作时，IC会启用集成的1.8V VDD LDO。VDD有效后，IC会读取SMBus_ID编程电阻的值来设置PMBus地址并启动。在此期间，<a href="https://www.hqchip.com/app/1715" target="_blank"><u>栅极驱动</u></a>电源电容会完全充电。完成这些操作后，IC可以通过使能输入进行控制。</p>
<h3>
	启动安全工作区（SOA）</h3>
<p>
	在软启动过程中，确保FET在其安全工作区内运行至关重要。启动期间允许的峰值电流在特定图表中有显示。如果应用中可能出现电阻短路，需要使用启动OCP功能来保护设备，且启动OCP阈值必须低于安全峰值电流。</p>
<h2>
	保护机制详解</h2>
<h3>
	过流保护（OCP）</h3>
<ul><li>
		<strong>启动OCP</strong>：在启动期间，直到电源良好（PWRGD）标志置位，启动OCP功能一直有效。如果启动期间负载电流超过启动阈值，集成的通态FET将在10µs内关闭，并将FAULT引脚置低。</li>
	<li>
		<strong>正常运行OCP</strong>：启动过程完成且PWRGD标志置高后，IC提供三级过流保护。“适度”OCP阈值可通过模拟外部电阻进行编程，允许在可编程的超时时间内维持较高电流而不关闭设备。“严重”OCP阈值通过PMBus进行编程，一旦负载电流超过该阈值，FET将在5µs内关闭。“安全”OCP阈值内部固定为60A，可确保FET在任何时候都不会超过其安全工作条件。</li>
</ul><h3>
	过压保护（OVP）</h3>
<p>
	MAX16550A具备VIN过压保护功能，可保护系统免受可能损坏下游电路的过压事件影响。当输入电压超过过压保护阈值时，通态FET将被锁定关闭，FAULT引脚置低。</p>
<h3>
	欠压锁定（UVLO）</h3>
<p>
	IC对VDD、VIN、VGS和VBOOST等电压进行欠压锁定监测。如果任何一个电压低于相应的阈值，会触发相应的保护动作。</p>
<h3>
	过温保护（OTP）</h3>
<p>
	当结温超过可编程阈值时，IC会锁定集成的FET关闭，并将FAULT输出置低。要重新启用IC，可以通过切换EN/UVLO或VIN，或者通过OPERA<a href="https://bbs.elecfans.com/group_715" target="_blank"><u>TI</u></a>ONS命令进行重启。</p>
<h2>
	编程与配置</h2>
<h3>
	模拟编程</h3>
<p>
	通过ROCP引脚的电阻可以对适度OCP阈值进行模拟编程，通过CSS<a href="https://www.elecfans.com/tags/电容/" target="_blank"><u>电容</u></a>可以对软启动斜坡率进行模拟编程，通过电阻分压器可以对输入UVLO阈值进行模拟编程。</p>
<h3>
	PMBus编程</h3>
<p>
	PMBus地址可以通过外部电阻进行编程，同时还可以对功率故障超时、严重OCP阈值、启动延迟、输出PWRGD阈值、自检查阈值、过温警告和故障阈值等参数进行数字编程。</p>
<h2>
	设计注意事项</h2>
<h3>
	电容选择</h3>
<ul><li>
		<strong>输入电容（CIN）</strong>：为保证输入电压稳定且无噪声，强烈建议使用输入电容。对于不需要在保护IC之前使用输入电容的应用，输入电压纹波应小于300mV峰峰值。</li>
	<li>
		<strong>输出电容（COUT）</strong>：最大输出电容可以通过特定公式进行计算，选择时要确保设计的最大浪涌电流低于启动OCP阈值且在启动SOA范围内。</li>
	<li>
		<strong>软启动电容（CSS）</strong>：CSS电容连接在MOSFET的栅极和地之间，通过固定<a href="https://www.hqchip.com/app/1725" target="_blank"><u>电流源</u></a>充电，可产生线性单调的VOUT斜坡。斜坡率可以通过选择合适的CSS值进行编程。</li>
</ul><h3>
	<a href="https://m.hqchip.com/app/1554" target="_blank"><u>二极管</u></a>选择</h3>
<ul><li>
		<strong>输入<a href="https://m.hqchip.com/app/1587" target="_blank"><u>TVS</u></a>二极管</strong>：为将输入电压瞬变钳位在VIN引脚的额定范围内，需要在输入使用瞬态电压抑制（TVS）二极管。选择时要考虑反向关断电压、峰值脉冲电流和钳位电压等参数。</li>
	<li>
		<strong>输出<a href="https://www.hqchip.com/app/1558" target="_blank"><u>肖特基</u></a>二极管</strong>：为将负输出电压尖峰钳位在VOUT引脚的额定范围内，需要在输出使用肖特基二极管。选择时要选择正向电压降低且峰值正向浪涌电流高于预期电感电流的二极管。</li>
</ul><h3>
	布局建议</h3>
<ul><li>
		<strong>VIN和VOUT</strong>：使用宽而多的VIN和VOUT平面，以最小化输入和输出走线电感，使用多个过孔连接层间电源平面。输入和输出电容应尽可能靠近IC放置。</li>
	<li>
		<strong>接地</strong>：从顶层的接地引脚（引脚13）到下层接地层使用约1mm宽、7mm长的走线，并通过至少两个过孔连接。在第二层IC封装正下方使用禁布区。</li>
	<li>
		<strong>VBST和SS</strong>：VBST和SS电容应尽可能靠近引脚放置在顶层。</li>
	<li>
		<strong>VDD</strong>：在顶层添加VDD平面，将VDD电容靠近IC去耦，形成更紧密的接地回路。VDD接地应远离输出电容接地。</li>
	<li>
		<strong>ROCP和ILOAD</strong>：ROCP和ILOAD电阻应尽可能靠近IC放置。</li>
</ul><h2>
	总结</h2>
<p>
	MAX16550A/MAX16550B这两款集成保护IC凭借其高集成度、精确的电流感应、先进的电源管理和多重保护功能，为12V电源系统的设计提供了一个高效、可靠的解决方案。在实际应用中，电子工程师可以根据具体需求对IC进行编程和配置，并遵循合理的设计和布局建议，以充分发挥其性能优势。希望通过本文的介绍，能帮助大家更好地了解和应用这两款优秀的IC产品。</p>
<p>
	各位<a href="https://bbs.elecfans.com/zhuti_lecture_1.html" target="_blank"><u>工程师</u></a>朋友，在你们的设计中是否也遇到过类似的电源保护问题呢？你们又是如何解决的呢？欢迎在评论区分享你们的经验和见解。</p>]]></description></item><item>    <title><![CDATA[头部车企多域融合发力！蓝牙WiFi这么用]]></title>    <link>https://www.elecfans.com/d/7641968.html</link>    <guid>https://www.elecfans.com/d/7641968.html</guid>    <pubDate>2026-02-06 16:45:00</pubDate>    <description><![CDATA[<p>
	飞易通深耕<a href="https://bbs.elecfans.com/group_57" target="_blank"><u>物联网</u></a>无线通讯领域十五载，聚焦<a href="https://www.elecfans.com/tags/蓝牙/" target="_blank"><u>蓝牙</u></a>、<a href="https://www.elecfans.com/tags/wi-fi/" target="_blank"><u>Wi-Fi</u></a>模组及自研协议栈产品，凭借扎实技术积淀与车规级量产能力，与头部A车企达成深度合作，共同推动无线通讯技术在智能座舱场景规模化落地，以双向协同赋能智能出行升级。</p>
<p>
	<strong>一、战略契合：锚定智能座舱核心诉求</strong></p>
<p>
	作为中国品牌领军者，A车企全品类车型覆盖多动力类型，<a href="https://m.elecfans.com/v/tag/293/" target="_blank"><u>新能源</u></a>业务增长迅猛。转型智能低碳科技企业过程中，其以“舱驾一体”“多模态智能交互”为核心路线，对无线通讯技术提出三大明确诉求：实现三域高效数据传输，保障低延迟与高稳定性；支撑语音、手势等多模态交互流畅响应；适配多价位车型规模化量产。飞易通的技术积累与产品布局，与A车企升级方向高度契合，成为合作核心基石。</p>
<p>
	<strong>二、技术协同：定制方案破解场景痛点</strong></p>
<p>
	针对“三域融合”数据传输需求，推出Wi-Fi 6+BT 5.4高集成度BW3583V模组，以高速传输、低延迟特性筑牢多域数据交互链路；聚焦座舱<a href="https://m.hqchip.com/app/1537" target="_blank"><u>音频</u></a>体验，BT1211模组搭载LE Audio功能，支持LC3编码，实现多通道音频独立传输，满足驾乘人员个性化需求，构建无干扰音频环境；依托自主研发的FeasyBlue协议栈，兼容<a href="https://bbs.elecfans.com/group_360" target="_blank"><u>Android</u></a>、<a href="https://bbs.elecfans.com/group_300" target="_blank"><u>Linux</u></a>等多系统，凭借强移植性与完整适配性，可以无缝兼容A车企五感交互系统，提供可靠底层支撑。</p>
<p>
	<strong>参数指标如下：</strong></p>
<table><tbody><tr><td>
				<strong>模组</strong></td>
			<td>
				<strong>FSC-BT1211</strong></td>
			<td>
				<strong>FSC-BW3583V</strong></td>
		</tr><tr><td>
				核心芯片</td>
			<td>
				RTL8761CTV-CG</td>
			<td>
				<a href="https://www.elecfans.com/tags/ai/" target="_blank"><u>AI</u></a>C8800D80I-3V</td>
		</tr><tr><td>
				蓝牙 版本</td>
			<td>
				蓝牙 5.3</td>
			<td>
				蓝牙 5.4</td>
		</tr><tr><td>
				Wi-Fi 版本</td>
			<td>
				/</td>
			<td>
				WIFI6</td>
		</tr><tr><td>
				发射功率</td>
			<td>
				+10dBm（max）</td>
			<td>
				+11dBm（max）</td>
		</tr><tr><td>
				主要<a href="https://m.hqchip.com/app/1787" target="_blank"><u>接口</u></a></td>
			<td>
				<a href="https://www.elecfans.com/tags/uart/" target="_blank"><u>UART</u></a>/I²S/I²C</td>
			<td>
				UART/<a href="https://www.hqchip.com/app/1515" target="_blank"><u>USB</u></a>/PCM/<a href="https://www.elecfans.com/tags/sdi/" target="_blank"><u>SDI</u></a>O</td>
		</tr><tr><td>
				尺寸</td>
			<td>
				15*12*2.2</td>
			<td>
				17*17*2.4</td>
		</tr><tr><td>
				工作温度</td>
			<td>
				-40C ~ +85C</td>
			<td>
				-40C ~+85C</td>
		</tr></tbody></table><p>
	<strong>三、全链联动：高效推进量产落地</strong></p>
<p>
	研发阶段采用“前置化联合攻关”模式，飞易通研发人员深度参与车型开发技术支持，针对<a href="https://m.hqchip.com/app/1072" target="_blank"><u>信号</u></a>干扰、设备兼容等问题，共享资源、共研方案，通过驻场协同实时响应需求，高效解决模组适配难题；供应链层面，凭借多项车规<a href="https://bbs.elecfans.com/group_776" target="_blank"><u>认证</u></a>，将核心产品纳入车企供应链资源池，针对多车型差异需求提供灵活定制服务；量产阶段依托信息化系统，双方实时同步订单、进度与风险，保障交付高效稳定，为长安车型快速上市保驾护航</p>
<p>
	<img src="https://file1.elecfans.com//web3/M00/4B/14/wKgZO2mFqiWAfvpIAAB19koJmCw24.webp" alt="wKgZO2mFqiWAfvpIAAB19koJmCw24.webp"/></p>
<p>
	<strong>四、合作成效：技术价值规模化验证</strong></p>
<p>
	技术层面，核心方案完美适配智能座舱，满足三域融合与多模态交互核心需求；体验层面，LE Audio与交互系统深度融合，显著提升座舱音频体验与响应速度，获市场广泛认可；量产层面，已完成2款主力车型批量配套，助力A车企新能源车型智能座舱赋能板块增长。</p>
<p>
	<strong>五、未来展望：共拓智能出行新局</strong></p>
<p>
	此次合作是技术互补、价值共生的成功实践。未来，飞易通将继续与A车企深化协同，聚焦智能座舱升级、新能源配套等核心领域，持续打磨场景化解决方案，拓展车载钥匙、T-Box等合作场景，以技术创新与高效协作，推动智能出行技术迭代升级，让可靠无线通讯融入每一次出行。<br/><br/>
	审核编辑 黄宇</p>]]></description></item><item>    <title><![CDATA[RK3576平台HDMI Out开发实战：从配置解析到调试驱动全攻略]]></title>    <link>https://www.elecfans.com/d/7401332.html</link>    <guid>https://www.elecfans.com/d/7401332.html</guid>    <pubDate>2026-02-06 16:46:00</pubDate>    <description><![CDATA[<div class="rich_media_content js_underline_content autoTypeSetting24psection">
	<h1>
		</h1>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">在<a href="https://www.elecfans.com/soft/data/21-22/" target="_blank"><u>嵌入式</u></a>显示领域，</span></span></font><span><span style="background-color:rgb(255,255,255);">RK3576</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">凭借对</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);"><a href="https://www.hqchip.com/app/1685" target="_blank"><u>HDMI</u></a> 2.1</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">协议的完善支持（最高</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">4K120Hz</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">输出、多格式颜色兼容），成为机顶盒、工业触控屏、智能投影仪等场景的核心选择。但</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">HDMI</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">开发常因配置细节疏漏、调试方法不当陷入困境</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">——</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">比如</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">配置全量却无显示</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);"><a href="https://m.hqchip.com/app/1537" target="_blank"><u>音频</u></a>与视频不同步</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">等问题。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">本文结合实际项目中</span></span></font><span><span style="background-color:rgb(255,255,255);">RK3576</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">HDMI</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">配置文件，从</span></span></font></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">应用场景</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">→</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">配置解析</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">→</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">调试指南</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">→</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">问题排查</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">→</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">驱动分析</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">五个维度，系统梳理</span></span></font><span><span style="background-color:rgb(255,255,255);">RK3576 HDMI Out</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">开发流程</span></span></font></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">。</span></span></font></span></p>
	<img src="https://file1.elecfans.com//web3/M00/3C/92/wKgZPGkaixqAXGVXAAEIOBryRvU455.png" alt="wKgZPGkaixqAXGVXAAEIOBryRvU455.png"/><p>
		</p>
	<p>
		</p>
	<p>
		</p>
	<h2>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">一、</span></span></font><span><span style="background-color:rgb(255,255,255);">RK3576 HDMI</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">的核心应用场景</span></span></font></span></b></h2>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">落地项目中，</span></span></font><span><span style="background-color:rgb(255,255,255);">RK3576</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">HDMI Out</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">主要服务于三类需求，不同场景下配置侧重点存在差异：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">高清影音场景</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（如</span></span></font><span><span style="background-color:rgb(255,255,255);">4K</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">机顶盒）：需优先保障</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">4K120Hz</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">分辨率输出、音频同步及色彩准确性（支持</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">YCbCr420 10bit</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">工业显示场景</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（如工控屏）：需稳定输出固定分辨率（如</span></span></font><span><span style="background-color:rgb(255,255,255);">1920x1080p60</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">），抗干扰能力强（<a href="https://m.hqchip.com/app/1072" target="_blank"><u>信号</u></a>强度适配）；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">多媒交互场景</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（如智能座舱）：需支持开机</span></span></font><span><span style="background-color:rgb(255,255,255);">logo</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">快速显示、热插拔检测及亮度</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">/</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">对比度动态调节。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">无论哪种场景，核心配置均围绕</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">显示通路打通</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">→</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">音频适配</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">→</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">功能验证</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">展开，以下从实际项目配置文件切入，解析每一项配置的作用与技术逻辑。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h2>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">二、</span></span></font><span><span style="background-color:rgb(255,255,255);">RK3576 HDMI</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">完整配置解析（附配置流程图）</span></span></font></span></b></h2>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">实际项目的</span></span></font><span><span style="background-color:rgb(255,255,255);">DTS</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">配置已覆盖</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">HDMI</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">显示、音频、<a href="https://www.elecfans.com/tags/时钟/" target="_blank"><u>时钟</u></a>、开机</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">logo</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">四大核心模块，下面逐段<a href="https://m.elecfans.com/v/tag/899/" target="_blank"><u>拆解</u></a>配置逻辑，结合</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">HDMI</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">开发技术规范说明关键参数：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">配置流程图：</span></span></font><span><span style="background-color:rgb(255,255,255);">RK3576 HDMI</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">配置逻辑</span></span></font></span></b></h3>
	<p>
		</p>
	<img src="https://file1.elecfans.com//web3/M00/3C/92/wKgZPGkaixqACqIhAARVcFcsoL8996.png" alt="wKgZPGkaixqACqIhAARVcFcsoL8996.png"/><h3>
		<b><span><span><span style="background-color:rgb(255,255,255);">2.1</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">基础显示配置：打通</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">HDMI</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">输出通路</span></span></font></span></b></h3>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">这部分配置是</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">正常显示</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的核心，需重点关注</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">VOP</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">绑定、</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">PHY</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">使能及信号时序优化：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h4>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><span><span style="background-color:rgb(255,255,255);">1</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">&amp;hdmi</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">节点：</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">HDMI</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">主设备使能</span></span></font></span></b></h4>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span>&amp;hdmi {</span></code><code><span>  status =<span class="code-snippet__string">"okay"</span>; <span class="code-snippet__comment">// 使能HDMI设备</span></span></code><code><span>  enable-gpios = &lt;&amp;gpio4 <span class="code-snippet__variable">RK_PC6</span><span class="code-snippet__variable">GPIO_<a href="https://m.hqchip.com/app/1703" target="_blank"><u>AC</u></a><a href="https://bbs.elecfans.com/group_715" target="_blank"><u>TI</u></a>VE_HIGH</span>&gt;; <span class="code-snippet__comment">// GPIO控制HDMI硬件上电</span></span></code><code><span>  <a href="https://bbs.elecfans.com/zhuti_1179_1.html" target="_blank"><u>rockchip</u></a>,<a href="https://www.hqchip.com/app/1522" target="_blank"><u>sd</u></a>a-falling-delay-ns = &lt;<span class="code-snippet__number">360</span>&gt;; <span class="code-snippet__comment">// 优化<a href="https://www.elecfans.com/tags/i2c/" target="_blank"><u>I2C</u></a>-SDA信号时序，提升EDID读取稳定性</span></span></code><code><span>};</span></code></pre>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">关键作用</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">status = "okay"</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">是</span></span></font><span><span style="background-color:rgb(255,255,255);">HDMI</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">设备的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">总开关</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，仅当该节点使能后，后续</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">PHY</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">初始化、</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">VOP</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">绑定等配置才能生效；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><span><span style="background-color:rgb(255,255,255);">GPIO</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">控制逻辑</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：通过硬件引脚控制</span></span></font><span><span style="background-color:rgb(255,255,255);">HDMI</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">芯片上电时序，避免软件使能时因上电顺序异常导致的无显示问题；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><span><span style="background-color:rgb(255,255,255);">I2C</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">时序优化</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">rockchip,sda-falling-delay-ns</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">用于调整</span></span></font><span><span style="background-color:rgb(255,255,255);">DDC</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">I2C</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）总线的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">SDA</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">信号下降沿延迟，当出现</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“EDID</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">读取超时</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">dmesg</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">报</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">i2c re<a href="https://bbs.elecfans.com/zhuti_1472_1.html" target="_blank"><u>ad</u></a> time out</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）时，该参数可提升设备兼容性。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h4>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><span><span style="background-color:rgb(255,255,255);">2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">&amp;hdmi_in_vp0</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">：绑定</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">VOP VP0</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">显示通路</span></span></font></span></b></h4>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span>&amp;hdmi_in_vp0 {</span></code><code><span>  status =<span class="code-snippet__string">"okay"</span>;</span></code><code><span>};</span></code></pre>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">技术背景</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font><span><span style="background-color:rgb(255,255,255);">RK3576</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">VOP</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">（显示处理单元）包含多个</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">VP</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Video Port</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">），其中</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">VP0</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">支持最高</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">4K120Hz</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">分辨率，</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">VP1/VP2</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">多用于</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">1080p</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">及以下低分辨率场景；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">配置意义</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：该节点使能后，</span></span></font><span><span style="background-color:rgb(255,255,255);">HDMI</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">图像数据将从</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">VP0</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">读取，若误绑定至</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">VP1/VP2</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，可能导致</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">4K</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">等高分辨率无法输出；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">资源冲突规避</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：若项目无需多显示接口，需将</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">&amp;hdmi_in_vp1</span></span></span><span><span><span style="background-color:rgb(255,255,255);">/</span></span></span><span><span><span style="background-color:rgb(255,255,255);">&amp;hdmi_in_vp2</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">状态设为</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">disabled</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">，避免硬件资源抢占。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h4>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><span><span style="background-color:rgb(255,255,255);">3</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">&amp;hdptxphy_hdmi</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">：使能</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">HDMI PHY</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">芯片</span></span></font></span></b></h4>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span>&amp;hdptxphy_hdmi {</span></code><code><span>  status =<span class="code-snippet__string">"okay"</span>;</span></code><code><span>};</span></code></pre>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><span><span style="background-color:rgb(255,255,255);">PHY</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">功能定位</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font><span><span style="background-color:rgb(255,255,255);">PHY</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（物理层）芯片负责将<a href="https://www.hqchip.com/app/1381" target="_blank"><u>数字信号</u></a>转换为</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">HDMI</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">差分信号（</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">TMDS/FRL</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">），是</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">信号从芯片输出到显示设备</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的关键环节；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">配置必要性</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font><span><span style="background-color:rgb(255,255,255);">PHY</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">节点未使能时，</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">HDMI</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">无任何信号输出，需与</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">&amp;hdmi</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">节点同步使能，否则易出现</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">显示设备检测到</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">HDMI</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">连接但无画面</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的问题。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span><span><span style="background-color:rgb(255,255,255);">2.2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">音频配置：实现</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">HDMI</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">音视频同步</span></span></font></span></b></h3>
	<p>
		</p>
	<p>
		<span><span><span style="background-color:rgb(255,255,255);">HDMI</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">需同时承载视频与音频信号，配置中的</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">&amp;hdmi_sound</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">和</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">&amp;rou<a href="https://www.elecfans.com/tags/te/" target="_blank"><u>te</u></a>_hdmi</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">节点为音频通路核心：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h4>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><span><span style="background-color:rgb(255,255,255);">1</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">&amp;hdmi_sound</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">：音频通路关联</span></span></font></span></b></h4>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__attr">hdmi_sound</span>: hdmi-sound {</span></code><code><span>  compatible =<span class="code-snippet__string">"rockchip,hdmi"</span>; <span class="code-snippet__comment">// 匹配HDMI音频驱动</span></span></code><code><span>  rockchip,mclk-fs = &lt;<span class="code-snippet__number">128</span>&gt;; <span class="code-snippet__comment">// 主时钟与采样率比值（128为标准配置）</span></span></code><code><span>  rockchip,card-name =<span class="code-snippet__string">"rockchip-hdmi"</span>; <span class="code-snippet__comment">// 声卡名称（系统识别标识）</span></span></code><code><span>  rockchip,<a href="https://m.elecfans.com/v/tag/132/" target="_blank"><u>cpu</u></a> = &lt;&amp;sai6&gt;; <span class="code-snippet__comment">// 关联SAI6<a href="https://m.hqchip.com/app/1537" target="_blank"><u>音频接口</u></a>（负责音频数据输出）</span></span></code><code><span>  rockchip,codec = &lt;&amp;hdmi&gt;; <span class="code-snippet__comment">// 关联HDMI codec（实现音频编码）</span></span></code><code><span>  rockchip,jack-det; <span class="code-snippet__comment">// 使能HDMI插入检测，自动切换音频输出</span></span></code><code><span>};</span></code><code><span>&amp;hdmi_sound {</span></code><code><span>  status =<span class="code-snippet__string">"okay"</span>;</span></code><code><span>};</span></code></pre>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">音频传输逻辑</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：音频数据从</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">&amp;sai6</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（音频接口）输出，经</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">&amp;hdmi</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><span><span style="background-color:rgb(255,255,255);">codec</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">编码）后，随</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">HDMI</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">视频信号一同传输至显示设备；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">时钟匹配要求</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">rockchip,mclk-fs = &lt;128&gt;</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">需与音频采样率匹配（如</span></span></font><span><span style="background-color:rgb(255,255,255);">48kHz</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">采样率对应</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">128</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">），参数不匹配会导致音频杂音或无声；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">自动切换功能</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">rockchip,jack-det</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">使能后，系统可实时检测</span></span></font><span><span style="background-color:rgb(255,255,255);">HDMI</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">插拔状态，实现</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">插入时切</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">HDMI</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">音频、拔出时切内置喇叭</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的场景化输出。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h4>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><span><span style="background-color:rgb(255,255,255);">2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">&amp;route_hdmi</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">：音频路由与开机</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">logo</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">使能</span></span></font></span></b></h4>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span>&amp;route_hdmi {</span></code><code><span>  status =<span class="code-snippet__string">"okay"</span>;</span></code><code><span> <span class="code-snippet__keyword">connect</span>= &lt;&amp;vp0_out_hdmi&gt;; <span class="code-snippet__regexp">//</span>绑定VP<span class="code-snippet__number">0</span>到HDMI的信号路由</span></code><code><span>};</span></code></pre>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">双重功能定位</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">a.</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">音频路由：确保</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">&amp;hdmi_sound</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">输出的音频信号能通过</span></span></font><span><span style="background-color:rgb(255,255,255);">HDMI</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);"><a href="https://m.hqchip.com/app/1787" target="_blank"><u>接口</u></a>传输，控制音频信号流向；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">b.</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">开机</span></span></font><span><span style="background-color:rgb(255,255,255);">logo</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">显示：该节点使能后，</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">U-Boot</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">阶段即可显示开机</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">logo</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，未使能时需等待系统完全启动后才出现画面；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">参数一致性要求</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">connect</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">参数需与</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">&amp;hdmi_in_vp0</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">保持一致（均为</span></span></font><span><span style="background-color:rgb(255,255,255);">VP0</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">），否则会出现</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">开机</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">logo</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">花屏</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">问题。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span><span><span style="background-color:rgb(255,255,255);">2.3</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">时钟配置：保障高分辨率稳定输出</span></span></font></span></b></h3>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span>&amp;display_<a href="https://m.hqchip.com/app/1525" target="_blank"><u>sub</u></a>system {</span></code><code><span>  clocks = &lt;&amp;hdptxphy_hdmi&gt;;</span></code><code><span>  c<span class="code-snippet__built_in">lock-names</span>=<span class="code-snippet__string">"hdmi0_phy_pll"</span>;</span></code><code><span>};</span></code></pre>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">时钟功能意义</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font><span><span style="background-color:rgb(255,255,255);">HDMI</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">分辨率依赖稳定的时钟源，</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">hdmi0_phy_pll</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><span><span style="background-color:rgb(255,255,255);">HDMI PHY</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">锁相环）为</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">VP0</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);"><a href="https://m.hqchip.com/app/1703" target="_blank"><u>dc</u></a>lk</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">（显示时钟）提供基准信号；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">高分辨率适配场景</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：输出非标准分辨率（如</span></span></font><span><span style="background-color:rgb(255,255,255);">2560x1440p100</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）或</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">4K120Hz</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">等高带宽分辨率时，必须指定</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">PHY PLL</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">为时钟源，否则易出现画面闪屏；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">验证方法</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：配置后可通过</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">cat /sys/kernel/debug/clk/clk_summary | grep hdmi0_phy_pll</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">查看时钟是否正常生效。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h2>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">三、</span></span></font><span><span style="background-color:rgb(255,255,255);">RK3576 HDMI</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">调试指南（附调试命令脑图）</span></span></font></span></b></h2>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">配置完成后，需通过系列调试命令验证功能有效性，以下为</span></span></font><span><span style="background-color:rgb(255,255,255);">RK3576</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">平台专属调试方法，覆盖显示、音频、时钟等核心模块：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">调试命令脑图：</span></span></font><span><span style="background-color:rgb(255,255,255);">RK3576 HDMI</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">调试核心命令</span></span></font></span></b></h3>
	<p>
		</p>
	<img src="https://file1.elecfans.com//web3/M00/3C/92/wKgZPGkaixqARWx2AAIfsgH3coQ984.png" alt="wKgZPGkaixqARWx2AAIfsgH3coQ984.png"/><h3>
		<b><span><span><span style="background-color:rgb(255,255,255);">3.1</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">基础显示调试：确认画面输出链路</span></span></font></span></b></h3>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">1.</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">查看</span></span></font><span><span style="background-color:rgb(255,255,255);">VOP</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">状态</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">执行</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">cat /sys/kernel/debug/dri/0/summary</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">，若输出中</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“VP0”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">为</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">ACTIVE</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">，且</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“HDMI-A-1”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">分辨率与预期一致（如</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">3840x2160</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">），说明</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">VOP</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">到</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">HDMI</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的链路正常；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">◦</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">异常处理：若</span></span></font><span><span style="background-color:rgb(255,255,255);">VP0</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">为</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">DISABLED</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">，需检查</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">&amp;hdmi_in_vp0</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">节点状态是否为</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">okay</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">1.</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">查看</span></span></font><span><span style="background-color:rgb(255,255,255);">HDMI</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">工作状态</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">执行</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">cat /sys/kernel/debug/dw-hdmi/status</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">，重点关注三项关键信息：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;background:rgb(0,255,255);"><span><span><span style="background-color:rgb(255,255,255);">◦</span></span></span></span><span><span><span style="background-color:rgb(255,255,255);">PHY enabled</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font><span><span style="background-color:rgb(255,255,255);">PHY</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">芯片正常工作；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;background:rgb(0,255,255);"><span><span><span style="background-color:rgb(255,255,255);">◦</span></span></span></span><span><span><span style="background-color:rgb(255,255,255);"><a href="https://www.elecfans.com/tags/pi/" target="_blank"><u>Pi</u></a>xel Clk: 594000000Hz</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font><span><span style="background-color:rgb(255,255,255);">4K120Hz</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">分辨率对应</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">594MHz</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">像素时钟；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;background:rgb(0,255,255);"><span><span><span style="background-color:rgb(255,255,255);">◦</span></span></span></span><span><span><span style="background-color:rgb(255,255,255);">Color Format: YCbCr420</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：与配置的颜色格式一致。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span><span><span style="background-color:rgb(255,255,255);">3.2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">音频调试：解决</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">有画面无声音</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font></span></b></h3>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">1.</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">确认声卡识别</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">执行</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">cat /sys/class/sound/card*/device/id</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">，若输出包含</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“rockchip-hdmi”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，说明</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">&amp;hdmi_sound</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">配置生效；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">◦</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">异常处理：若无该声卡，需检查</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">&amp;sai6</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">节点是否使能（音频数据输出依赖</span></span></font><span><span style="background-color:rgb(255,255,255);">SAI</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">接口）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">1.</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">测试音频输出</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">执行</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">aplay -D plughw:rockchip-hdmi,0 test.wav</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><span><span style="background-color:rgb(255,255,255);">test.wav</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">为本地音频测试文件），若显示设备有声音输出，说明音频通路正常；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">◦</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">异常处理：若报错</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“device busy”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，需关闭其他占用音频资源的进程。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span><span><span style="background-color:rgb(255,255,255);">3.3</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">高分辨率调试：保障</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">4K120Hz</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">稳定</span></span></font></span></b></h3>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">输出</span></span></font><span><span style="background-color:rgb(255,255,255);">4K120Hz</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">等高带宽分辨率时，需额外验证时钟与信号稳定性：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">1.</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">时钟验证</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">执行</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">cat /sys/kernel/debug/clk/clk_summary | grep hdmi0_phy_pll</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">，若输出</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“hdmi0_phy_pll: 594000000Hz”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，说明时钟满足</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">4K120Hz</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">需求；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">2.</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">信号强度验证</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">若显示设备画面闪屏，执行</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">cat /sys/kernel/debug/dw-hdmi/phy</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">查看</span></span></font><span><span style="background-color:rgb(255,255,255);">PHY</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);"><a href="https://www.elecfans.com/tags/寄存器/" target="_blank"><u>寄存器</u></a>，重点关注</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">预加重</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">pre-emphasis</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）和</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">幅值</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">swing</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）参数，可通过修改</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">&amp;hdptxphy_hdmi</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">的</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">rockchip,phy-table</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">优化信号（具体调整方法见问题排查章节）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h2>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">四、</span></span></font><span><span style="background-color:rgb(255,255,255);">RK3576 HDMI</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">问题排查（附排查流程图）</span></span></font></span></b></h2>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">即使配置正确，仍可能遇到</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">无显示</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">闪屏</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">音频异常</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">等问题，以下为</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">RK3576</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">平台高频问题排查流程，覆盖硬件、配置、信号等多维度：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">排查流程图：</span></span></font><span><span style="background-color:rgb(255,255,255);">RK3576 HDMI</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">高频问题排查</span></span></font></span></b></h3>
	<p>
		</p>
	<img src="https://file1.elecfans.com//web3/M00/3C/92/wKgZPGkaixqAJ4xzAAE_OpE8SLo421.png" alt="wKgZPGkaixqAJ4xzAAE_OpE8SLo421.png"/><h3>
		<b><span><span><span style="background-color:rgb(255,255,255);">4.1</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">高频问题</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">1</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">：无显示（显示设备提示</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">无信号</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）</span></span></font></span></b></h3>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">排查步骤</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">a.</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">执行</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">cat /sys/class/sound/card*/device/id</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">，若输出为</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“disconnected”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，优先检查</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">HDMI</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">线材是否损坏、显示设备接口是否正常；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">b.</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">若输出为</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“connected”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，执行</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">cat /sys/kernel/debug/dri/0/summary</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">，若</span></span></font><span><span style="background-color:rgb(255,255,255);">VP0</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">为</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">DISABLED</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">，将</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">&amp;hdmi_in_vp0</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">状态改为</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">okay</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">c.</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">若</span></span></font><span><span style="background-color:rgb(255,255,255);">PHY</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">状态为</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">disabled</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">，确认</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">&amp;hdptxphy_hdmi</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">节点是否设为</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">okay</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span><span><span style="background-color:rgb(255,255,255);">4.2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">高频问题</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">2</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">4K120Hz</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">闪屏</span></span></font></span></b></h3>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">核心原因</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：信号强度不足或时钟不稳定；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">排查步骤</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">a.</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">确认</span></span></font><span><span style="background-color:rgb(255,255,255);">HDMI</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">线材为</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">2.1</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">版本（</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">2.0</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">线材带宽不足，无法支持</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">4K120Hz</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">b.</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">执行</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">cat /sys/kernel/debug/dw-hdmi/phy</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">，查看</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“pre-emphasis”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">（预加重）参数，若为</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">0x0c</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，可调整为</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">0x0d</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">（增加预加重，提升信号完整性）；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">c.</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">若仍闪屏，修改</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">&amp;hdptxphy_hdmi</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">的</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">rockchip,phy-table</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">参数：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span>&amp;hdptxphy_hdmi {</span></code><code><span>  status =<span class="code-snippet__string">"okay"</span>;</span></code><code><span>  rockchip,phy-table = &lt;</span></code><code><span>   <span class="code-snippet__number">165000000</span><span class="code-snippet__number">0x03</span><span class="code-snippet__number">0x04</span><span class="code-snippet__number">0x0d</span><span class="code-snippet__number">0x12</span><span class="code-snippet__number">0x00</span><span class="code-snippet__number">0x00</span><span class="code-snippet__number">0x00</span><span class="code-snippet__comment">// 提升预加重</span></span></code><code><span>   <span class="code-snippet__number">340000000</span><span class="code-snippet__number">0x03</span><span class="code-snippet__number">0x04</span><span class="code-snippet__number">0x0d</span><span class="code-snippet__number">0x12</span><span class="code-snippet__number">0x00</span><span class="code-snippet__number">0x00</span><span class="code-snippet__number">0x00</span></span></code><code><span>   <span class="code-snippet__number">594000000</span><span class="code-snippet__number">0x02</span><span class="code-snippet__number">0x08</span><span class="code-snippet__number">0x0e</span><span class="code-snippet__number">0x18</span><span class="code-snippet__number">0x00</span><span class="code-snippet__number">0x00</span><span class="code-snippet__number">0x00</span><span class="code-snippet__comment">// 提升幅值</span></span></code><code><span>  &gt;;</span></code><code><span>};</span></code></pre>
	<h3>
		<b><span><span><span style="background-color:rgb(255,255,255);">4.3</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">高频问题</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">3</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">EDID</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">读取失败（</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">dmesg</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">报</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“i2c read time out”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）</span></span></font></span></b></h3>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><span><span style="background-color:rgb(255,255,255);">EDID</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">功能定位</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font><span><span style="background-color:rgb(255,255,255);">HDMI</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">设备通过</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">EDID</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">交换分辨率、颜色格式等信息，读取失败会导致分辨率适配异常；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">排查步骤</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">a.</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">在</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">&amp;hdmi</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">节点增加</span></span></font><span><span style="background-color:rgb(255,255,255);">I2C</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">时序优化参数：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span>&amp;hdmi {</span></code><code><span>  status =<span class="code-snippet__string">"okay"</span>;</span></code><code><span>  enable-gpios = &lt;&amp;gpio4 RK_PC6 GPIO_ACTIVE_HIGH&gt;;</span></code><code><span>  rockchip,sda-falling-delay-ns = &lt;<span class="code-snippet__number">360</span>&gt;;</span></code><code><span>  ddc-i2c-scl-high-<span class="code-snippet__keyword">time</span>-ns = &lt;<span class="code-snippet__number">9625</span>&gt;; <span class="code-snippet__regexp">//</span>降低SCL高电平时间（<span class="code-snippet__number">50</span>KHz速率）</span></code><code><span>  ddc-i2c-scl-low-<span class="code-snippet__keyword">time</span>-ns = &lt;<span class="code-snippet__number">10000</span>&gt;;</span></code><code><span>};</span></code></pre>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">a.</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">若仍失败，更换短距离</span></span></font><span><span style="background-color:rgb(255,255,255);">HDMI</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">线材（长距离线材易导致</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">I2C</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">信号衰减）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h2>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">五、</span></span></font><span><span style="background-color:rgb(255,255,255);">RK3576 HDMI</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">驱动深度解析：驱动如何助力调试？</span></span></font></span></b></h2>
	<p>
		</p>
	<p>
		<span><span><span style="background-color:rgb(255,255,255);">HDMI</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">驱动是</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">配置</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">→</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">硬件</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的核心桥梁，核心代码路径（如</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">dw_hdmi-rockchip.c</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）不仅实现基础功能，还内置丰富调试接口，为问题排查提供关键支持，以下解析驱动核心模块及调试价值：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span><span><span style="background-color:rgb(255,255,255);">5.1</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">驱动核心模块：三大功能支撑</span></span></font></span></b></h3>
	<p>
		</p>
	<h4>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><span><span style="background-color:rgb(255,255,255);">1</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）设备树解析模块</span></span></font></span></b></h4>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">功能作用</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：驱动自动解析</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">&amp;hdmi</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">&amp;hdptxphy_hdmi</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">等节点配置，将参数写入硬件寄存器（如</span></span></font><span><span style="background-color:rgb(255,255,255);">GPIO</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">使能状态、</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">I2C</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">时序参数）；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">调试价值</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：若配置存在错误（如</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">connect</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">参数</span></span></font><span><span style="background-color:rgb(255,255,255);">mismatch</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">），驱动会在</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">dmesg</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">中输出</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“invalid connect node”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">等提示，快速定位配置问题；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">关键代码逻辑</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__function"><span class="code-snippet__keyword">static</span></span><span class="code-snippet__function"/><span class="code-snippet__function"><span class="code-snippet__built_in">int</span></span><span class="code-snippet__function"/><span class="code-snippet__function"><span class="code-snippet__title">hdmi_probe</span></span><span class="code-snippet__function">(</span><span class="code-snippet__function"><span class="code-snippet__params"><span class="code-snippet__keyword">struct</span></span></span><span class="code-snippet__function"><span class="code-snippet__params">platform_device *pdev</span></span><span class="code-snippet__function">)</span>{</span></code><code><span> <span class="code-snippet__comment">// 解析&amp;hdmi节点的GPIO参数</span></span></code><code><span>  hdmi-&gt;enable_gpio = devm_gpiod_get(&amp;pdev-&gt;dev,<span class="code-snippet__string">"enable"</span>, GPIOD_OUT_HIGH);</span></code><code><span> <span class="code-snippet__keyword">if</span>(IS_ERR(hdmi-&gt;enable_gpio)) {</span></code><code><span>    dev_err(&amp;pdev-&gt;dev,<span class="code-snippet__string">"fai<a href="https://www.hqchip.com/app/1721" target="_blank"><u>led</u></a> to get enable gpion"</span>); <span class="code-snippet__comment">// 报错提示GPIO配置错误</span></span></code><code><span>   <span class="code-snippet__keyword">return</span>PTR_ERR(hdmi-&gt;enable_gpio);</span></code><code><span>  }</span></code><code><span> <span class="code-snippet__comment">// 解析I2C时序参数</span></span></code><code><span>  device_property_read_u32(&amp;pdev-&gt;dev,<span class="code-snippet__string">"rockchip,sda-falling-delay-ns"</span>, &amp;hdmi-&gt;sda_delay);</span></code><code><span>}</span></code></pre>
	<h4>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><span><span style="background-color:rgb(255,255,255);">2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">PHY</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">与时钟管理模块</span></span></font></span></b></h4>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">功能作用</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：驱动负责初始化</span></span></font><span><span style="background-color:rgb(255,255,255);">PHY</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">芯片、配置</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">PLL</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">时钟（如</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">hdmi0_phy_pll</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">），确保信号稳定输出；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">调试价值</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">a.</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">时钟异常时，驱动会在</span></span></font><span><span style="background-color:rgb(255,255,255);">dmesg</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">中报</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“hdmi0_phy_pll clock not found”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，提示</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">&amp;display_subsystem</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">配置错误；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">b.</span></span></span></span><span><span><span style="background-color:rgb(255,255,255);">PHY</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">初始化失败时，驱动会报</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“hdmi phy init failed”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，指引检查</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">&amp;hdptxphy_hdmi</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">节点状态；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">关键代码逻辑</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__function"><span class="code-snippet__keyword">static</span></span><span class="code-snippet__function"/><span class="code-snippet__function"><span class="code-snippet__built_in">int</span></span><span class="code-snippet__function"/><span class="code-snippet__function"><span class="code-snippet__title">hdmi_phy_init</span></span><span class="code-snippet__function">(</span><span class="code-snippet__function"><span class="code-snippet__params"><span class="code-snippet__keyword">struct</span></span></span><span class="code-snippet__function"><span class="code-snippet__params">hdmi_device *hdmi</span></span><span class="code-snippet__function">)</span>{</span></code><code><span> <span class="code-snippet__comment">// 初始化PHY寄存器</span></span></code><code><span>  regmap_write(hdmi-&gt;phy_regmap,<span class="code-snippet__number">0x08</span>, hdmi-&gt;phy_table[<span class="code-snippet__number">0</span>]); <span class="code-snippet__comment">// 写入信号强度参数</span></span></code><code><span> <span class="code-snippet__comment">// 使能PHY时钟</span></span></code><code><span>  ret = clk_prepare_enable(hdmi-&gt;phy_pll_clk);</span></code><code><span> <span class="code-snippet__keyword">if</span>(ret) {</span></code><code><span>    dev_err(hdmi-&gt;dev,<span class="code-snippet__string">"failed to enable phy pll clockn"</span>); <span class="code-snippet__comment">// 时钟使能失败提示</span></span></code><code><span>   <span class="code-snippet__keyword">return</span>ret;</span></code><code><span>  }</span></code><code><span> <span class="code-snippet__keyword">return</span><span class="code-snippet__number">0</span>;</span></code><code><span>}</span></code></pre>
	<h4>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><span><span style="background-color:rgb(255,255,255);">3</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）调试接口模块</span></span></font></span></b></h4>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">驱动在</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">/sys/kernel/debug/dw-hdmi/</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">路径下提供多个调试接口，直接支持状态查询与参数修改，是排查问题的核心工具：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<table style="border-collapse:collapse;margin-left:-0.6pt;border:none;"><tbody><tr><td style="padding:3pt 6pt 1.5pt;border-width:1pt;border-style:solid;border-color:rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">调试接口</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:1pt solid rgb(222,224,227);border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">功能作用</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:1pt solid rgb(222,224,227);border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">典型调试场景</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
			</tr><tr><td style="padding:3pt 6pt 1.5pt;border-left:1pt solid rgb(222,224,227);border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">/sys/kernel/debug/dw-hdmi/status</span></span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">输出</span></span></font><span><span style="background-color:rgb(255,255,255);">HDMI</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">实时状态（</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">PHY</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">、时钟、颜色）</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">排查</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“PHY</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">未使能</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">颜色格式错误</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
			</tr><tr><td style="padding:3pt 6pt 1.5pt;border-left:1pt solid rgb(222,224,227);border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">/sys/kernel/debug/dw-hdmi/phy</span></span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">读取</span></span></font><span><span style="background-color:rgb(255,255,255);">/</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">修改</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">PHY</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">寄存器</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">调整信号强度解决闪屏</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
			</tr><tr><td style="padding:3pt 6pt 1.5pt;border-left:1pt solid rgb(222,224,227);border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">/sys/kernel/debug/dw-hdmi/ctrl</span></span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">读取</span></span></font><span><span style="background-color:rgb(255,255,255);">/</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">修改</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">HDMI</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);"><a href="https://www.hqchip.com/app/1716" target="_blank"><u>控制器</u></a>寄存器</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">修复</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“EDID</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">读取超时</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
			</tr></tbody></table><p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">实操示例</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：修改</span></span></font><span><span style="background-color:rgb(255,255,255);">PHY</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">预加重参数时，无需重新编译驱动，直接通过接口写入：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__comment"># 修改PHY寄存器0x09（预加重）为0x0d</span></span></code><code><span><span class="code-snippet__attribute">echo</span><span class="code-snippet__number">09</span><span class="code-snippet__number">0</span>d &gt; /sys/kernel/debug/dw-hdmi/phy</span></code></pre>
	<h3>
		<b><span><span><span style="background-color:rgb(255,255,255);">5.2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">驱动对调试的核心价值</span></span></font></span></b></h3>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">1.</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">错误日志提示</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：驱动实时输出配置错误、硬件异常日志（如</span></span></font><span><span style="background-color:rgb(255,255,255);">PHY</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">初始化失败），避免盲目排查；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">2.</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">实时参数调整</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：通过</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">debugfs</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">接口可实时修改寄存器参数（如信号强度、</span></span></font><span><span style="background-color:rgb(255,255,255);">I2C</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">速率），无需重新烧录固件；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">3.</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">状态可视化</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">/sys/kernel/debug/dw-hdmi/status</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">等接口将硬件状态转化为可读信息，无需<a href="https://www.elecfans.com/v/tag/577/" target="_blank"><u>示波器</u></a>即可判断信号是否正常，降低调试门槛。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h2>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">六、总结：</span></span></font><span><span style="background-color:rgb(255,255,255);">RK3576 HDMI</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">开发关键要点</span></span></font></span></b></h2>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">1.</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">配置一致性</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font><span><span style="background-color:rgb(255,255,255);">VOP</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">绑定（</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">&amp;hdmi_in_vp0</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）、音频路由（</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">&amp;route_hdmi</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）、时钟源（</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">&amp;display_subsystem</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）需保持参数一致，否则易出现花屏、无显示；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">2.</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">调试工具依赖</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：善用</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">debugfs</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">接口（状态查询）、</span></span></font><span><span style="background-color:rgb(255,255,255);">dmesg</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">日志（错误定位）、命令行工具（分辨率调整），</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">90%</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">软件问题可通过这些工具解决；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">3.</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">高分辨率适配</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font><span><span style="background-color:rgb(255,255,255);">4K120Hz</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">场景需重点关注</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">HDMI 2.1</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">线材、</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">PHY</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">信号强度、</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">PLL</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">时钟稳定性，三者缺一不可；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">4.</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">驱动调试能力</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：理解驱动核心模块逻辑（设备树解析、</span></span></font><span><span style="background-color:rgb(255,255,255);">PHY</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">管理），可更高效利用调试接口定位问题，提升开发效率。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">按照本文的配置解析、调试方法和问题排查流程，可覆盖</span></span></font><span><span style="background-color:rgb(255,255,255);">RK3576 HDMI Out</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">开发的绝大多数场景</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">——</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">从基础的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">有画面有声音</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">到高难度的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“4K120Hz</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">稳定输出</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，均能找到对应的解决方案。</span></span></font></span></p>
	<p>
		</p>
</div>
<div class="wx_detail">
	<p>
		</p>
</div>]]></description></item><item>    <title><![CDATA[输入钳位保护的TIA放大器offset端口使用说明]]></title>    <link>https://www.elecfans.com/d/7641977.html</link>    <guid>https://www.elecfans.com/d/7641977.html</guid>    <pubDate>2026-02-06 16:46:00</pubDate>    <description><![CDATA[<p><img src="https://file1.elecfans.com//web3/M00/4B/14/wKgZPGmFrGWAf0_7AAIYRWN193E355.jpg" alt="6496a02c-0338-11f1-96ea-92fbcf53809c.jpg"/><img src="https://file1.elecfans.com//web3/M00/4B/14/wKgZPGmFrGWAKmQFAAJcbvI5Mwk652.jpg" alt="64a6da00-0338-11f1-96ea-92fbcf53809c.jpg"/><br/></p><p/><p/><p/>]]></description></item><item>    <title><![CDATA[TMC2210ATJ+ 静音、高效、集成化的步进驱动优选方案！]]></title>    <link>https://www.elecfans.com/d/7641987.html</link>    <guid>https://www.elecfans.com/d/7641987.html</guid>    <pubDate>2026-02-06 16:47:00</pubDate>    <description><![CDATA[<p><br/></p><p style="margin-left:0px;"><span style="background-color:#ffffff;color:#0f1115;">在项目选型中，寻找一颗能同时解决噪音、散热与设计复杂度的<a href="https://www.hqchip.com/app/1787" target="_blank"><u>驱动芯片</u></a>。TMC2210ATJ+ 正是为此类需求而生的一款高度集成化<a href="https://www.elecfans.com/tags/步进电机/" target="_blank"><u>步进电机</u></a>驱动IC。</span></p><p style="margin-left:0px;"><br/></p><p style="margin-left:10px;text-align:justify;"><span style="color:#ffffff;"><strong>01</strong></span> <span style="color:#ffffff;"><strong>为何选择TMC2210ATJ+</strong></span></p><p style="margin-left:auto;text-align:justify;"><strong>TMC2210ATJ+</strong></p><h3 style="margin-left:0px;text-align:justify;"/><p style="margin-left:0px;text-align:justify;"><span style="background-color:#ffffff;color:#0f1115;">这颗芯片的核心价值在于其<strong>“高集成度”</strong>与<strong>“卓越的静音性能”</strong>，这直接转化为更少的物料、更小的布板空间和更优的终端用户体验。</span></p><p style="margin-left:5px;text-align:justify;"><br/></p><p style="margin-left:0px;text-align:justify;"><span style="background-color:#ffffff;color:#0f1115;"><strong>极致静音，优化产品体验</strong></span></p><p style="margin-left:0px;text-align:justify;"><span style="background-color:#ffffff;color:#0f1115;">采用<strong>StealthChop2</strong>斩波<a href="https://m.elecfans.com/v/tag/2562/" target="_blank"><u>算法</u></a>，在<a href="https://bbs.elecfans.com/zhuti_dianji_1.html" target="_blank"><u>电机</u></a>低速运行及保持时实现近乎无声的操作，特别适用于办公设备、医疗仪器、消费类产品等对噪音敏感的环境。</span></p><p style="margin-left:5px;text-align:justify;"><br/></p><p style="margin-left:0px;text-align:justify;"><span style="background-color:#ffffff;color:#0f1115;"><strong>高度集成，简化设计</strong></span></p><p style="margin-left:0px;text-align:justify;"><span style="background-color:#ffffff;color:#0f1115;"><strong>集成无损<a href="https://www.elecfans.com/tags/电流/" target="_blank"><u>电流</u></a>感应（ICS）</strong>：彻底省去外部大功率采样<a href="https://www.hqchip.com/app/485" target="_blank"><u>电阻</u></a>，不仅节约<a href="https://m.elecfans.com/v/tag/82/" target="_blank"><u>PCB</u></a>面积，更直接降低系统功耗和物料成本。</span></p><p style="margin-left:0px;text-align:justify;"><br/></p><p style="margin-left:0px;text-align:justify;"><span style="background-color:#ffffff;color:#0f1115;"><strong>集成256微步插值器（MicroPlyer）</strong>：即使<a href="https://www.hqchip.com/app/1716" target="_blank"><u>控制器</u></a>仅输出低分辨率步进<a href="https://m.hqchip.com/app/1072" target="_blank"><u>信号</u></a>，芯片内部也可将其平滑插值为256微步，实现平稳运动，减轻主控负担。</span></p><p style="margin-left:0px;text-align:justify;"><br/></p><p style="margin-left:0px;text-align:justify;"><span style="background-color:#ffffff;color:#0f1115;"><strong>全保护功能集成</strong>：包含过流、短路、欠压、过热及<a href="https://m.hqchip.com/app/1587" target="_blank"><u>ESD</u></a>保护，大幅提升系统可靠性，减少外围<a href="https://www.elecfans.com/tags/保护电路/" target="_blank"><u>保护电路</u></a>设计。</span></p><h3 style="margin-left:0px;text-align:justify;"/><p style="margin-left:auto;text-align:justify;"><img src="https://file1.elecfans.com//web3/M00/4B/15/wKgZO2mFrZGAAtNBAABIECwbIPk590.jpg" alt="68ee1006-0338-11f1-96ea-92fbcf53809c.jpg"/><br/><br/></p><p style="margin-left:10px;text-align:justify;"><br/></p><p style="margin-left:10px;text-align:justify;"><span style="color:#ffffff;"><strong>02</strong></span> <span style="color:#ffffff;"><strong>关键参数</strong></span></p><p style="margin-left:10px;text-align:justify;"><strong>TMC2210ATJ+</strong></p><table><tbody><tr><td style="vertical-align:top;">参数类别</td><td style="vertical-align:top;">核心规格</td></tr><tr><td style="vertical-align:top;">供电电压</td><td style="vertical-align:top;">4.5 - 36V <a href="https://m.hqchip.com/app/1703" target="_blank"><u>DC</u></a></td></tr><tr><td style="vertical-align:top;">输出电流</td><td style="vertical-align:top;">最大<a href="https://m.hqchip.com/app/1718" target="_blank"><u>RMS</u></a> 2.1A，峰值3.0A</td></tr><tr><td style="vertical-align:top;">导通电阻</td><td style="vertical-align:top;">典型0.23Ω (HS+LS)</td></tr><tr><td style="vertical-align:top;">微步分辨率</td><td style="vertical-align:top;">最高256细分</td></tr><tr><td style="vertical-align:top;">控制<a href="https://m.hqchip.com/app/1787" target="_blank"><u>接口</u></a></td><td style="vertical-align:top;">标准步进/方向（STEP/DIR）</td></tr><tr><td style="vertical-align:top;">配置方式</td><td style="vertical-align:top;">引脚电平设置</td></tr><tr><td style="vertical-align:top;">诊断输出</td><td style="vertical-align:top;">ERROR, INDEX</td></tr><tr><td style="vertical-align:top;">工作温度</td><td style="vertical-align:top;">-40℃ ~+125℃</td></tr><tr><td style="vertical-align:top;">封装选项</td><td style="vertical-align:top;">TQFN32 (5x5mm)</td></tr></tbody></table><p style="margin-left:0px;text-align:justify;"><br/></p><p style="margin-left:auto;text-align:justify;"><br/><img src="https://file1.elecfans.com//web3/M00/4B/15/wKgZO2mFrZGADY1LAABcBpRAt5c048.jpg" alt="68fa6824-0338-11f1-96ea-92fbcf53809c.jpg"/><br/></p><p style="margin-left:5px;text-align:justify;"><br/></p><p style="margin-left:5px;text-align:justify;"><span style="color:#ffffff;"><strong>03</strong></span> <span style="color:#ffffff;"><strong>应用领域</strong></span></p><p style="margin-left:5px;text-align:justify;"><strong>TMC2210ATJ+</strong></p><p style="margin-left:0px;text-align:justify;"><span style="color:#0f1115;">TMC2210ATJ+ 非常适合对静音、体积和可靠性有要求的应用场景：</span></p><p style="margin-left:0px;text-align:justify;"><span style="background-color:#ffffff;color:#0f1115;"><strong>办公自动化</strong>：打印机、扫描仪、复印机。</span></p><p style="margin-left:0px;text-align:justify;"><span style="background-color:#ffffff;color:#0f1115;"><strong>金融设备</strong>：ATM机、纸币识别模块、点钞机。</span></p><p style="margin-left:0px;text-align:justify;"><span style="background-color:#ffffff;color:#0f1115;"><strong>纺织与缝制设备</strong>：需要安静运行的工业缝纫机、针织机。</span></p><p style="margin-left:0px;text-align:justify;"><span style="background-color:#ffffff;color:#0f1115;"><strong>3D打印与桌面制造</strong>：追求高质量打印表面和静音运行的3D打印机。</span></p><p style="margin-left:0px;text-align:justify;"><span style="background-color:#ffffff;color:#0f1115;"><strong>泵阀与流体控制</strong>：小型泵、精密阀门<a href="https://m.hqchip.com/app/1847" target="_blank"><u>驱动器</u></a>。</span></p><p style="margin-left:5px;text-align:justify;"><br/></p><p style="margin-left:auto;text-align:justify;"><img src="https://file1.elecfans.com//web3/M00/4B/15/wKgZO2mFrZGAX4ntAAESQG8xA0g012.jpg" alt="6905d3da-0338-11f1-96ea-92fbcf53809c.jpg"/><br/></p><p style="margin-left:5px;text-align:justify;"><br/></p><p style="margin-left:5px;text-align:justify;"><span style="color:#0f1115;">TMC2210ATJ+ 以其<strong>静音运行、高集成度和出色的可靠性</strong>，成为替代传统驱动方案的理想选择。它能有效帮助<a href="https://bbs.elecfans.com/zhuti_lecture_1.html" target="_blank"><u>工程师</u></a>简化设计，并助力采购优化BOM成本与供应链。</span></p><p style="margin-left:0px;text-align:justify;"><span style="background-color:#ffffff;color:#0f1115;"><strong>如需获取详细数据手册、评估板或针对特定应用的选型建议，欢迎联系我们团队。我们可提供完整的技术支持与样品服务，协助您的项目快速落地。</strong></span></p>]]></description></item><item>    <title><![CDATA[初次编译rk3568（rk3576）Linux 6.1内核踩坑记录：从报错终止到成功解决的完整流程]]></title>    <link>https://www.elecfans.com/d/7401329.html</link>    <guid>https://www.elecfans.com/d/7401329.html</guid>    <pubDate>2026-02-06 16:47:00</pubDate>    <description><![CDATA[<div class="rich_media_content js_underline_content autoTypeSetting24psection">
	<h1>
		</h1>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">很多刚接触<a href="https://bbs.elecfans.com/zhuti_1179_1.html" target="_blank"><u>瑞芯微</u></a></span></span></font><span><span style="background-color:rgb(255,255,255);">rk</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">系列芯片开发的小伙伴，在初次编译基于</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);"><a href="https://bbs.elecfans.com/group_300" target="_blank"><u>Linux</u></a> 6.1</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">内核的系统时，很容易因为环境依赖问题卡壳。最近我在编译</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">rk3576</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">rk3568</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">流程类似）</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Linux 6.1</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">内核时就遇到了典型报错，从定位问题到最终解决踩了不少小坑，今天把完整过程整理出来，帮大家少走弯路。</span></span></font></span></p>
	<img src="https://file1.elecfans.com//web3/M00/3C/92/wKgZPGkaixiAOw9UAAGJ3owc3Qg452.png" alt="wKgZPGkaixiAOw9UAAGJ3owc3Qg452.png"/><h2>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">一、问题突发：编译中途突然报错终止</span></span></font></span></b></h2>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">按照官方文档配置好编译环境后，我执行了内核编译命令，一开始流程正常，直到终端突然弹出一连串错误信息，编译直接终止。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">仔细看报错日志，核心提示有两个：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">1.</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">明确指出</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“Your gmp he<a href="https://bbs.elecfans.com/zhuti_1472_1.html" target="_blank"><u>ad</u></a>er is missing”——</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">也就是</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">gmp</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">相关的头文件缺失（）；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">2.</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">后续跟着一系列执行失败的日志，比如</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“Running /home/sc/rk3576_linux/device/<a href="https://bbs.elecfans.com/zhuti_1179_1.html" target="_blank"><u>rockchip</u></a>/common/scripts/mk-kernel.sh - do_build fai<a href="https://www.hqchip.com/app/1721" target="_blank"><u>led</u></a>!”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，且</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">exit code</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">为</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">1</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">（、），这说明是依赖缺失导致编译脚本执行失败。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">其实到这里，报错信息已经很</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">贴心</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">了</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">——</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">不仅告诉我们缺什么，还直接给了解决方案。</span></span></font></span></p>
	<img src="https://file1.elecfans.com//web3/M00/3C/92/wKgZPGkaixiAEaVbAANg1PgCt1Y675.png" alt="wKgZPGkaixiAEaVbAANg1PgCt1Y675.png"/><h2>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">二、定位关键：跟着报错提示找解决方案</span></span></font></span></b></h2>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">在</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“gmp header is missing”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">这句话下面，终端直接给出了安装命令：</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“Please install it: sudo apt-get install libgmp-dev”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">（、）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">这里要划个重点：</span></span></font></span><b><span><span><span style="background-color:rgb(255,255,255);">Linux</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">下编译报错时，先仔细看报错日志的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">建议操作</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">，很多时候官方或编译器已经把解决方案直接写在日志里了，不用盲目去搜教程。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">我当时没多想，直接复制了这个命令开始执行，没想到后续还有个小插曲。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h2>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">三、解决步骤：执行安装</span></span></font><span><span style="background-color:rgb(255,255,255);">+</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">验证，遇到小问题再调整</span></span></font></span></b></h2>
	<p>
		</p>
	<h3>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">第一步：执行依赖安装命令</span></span></font></span></b></h3>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">在终端输入报错提示里的命令：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span><span><span style="background-color:rgb(255,255,255);">sudo apt-get install libgmp-dev</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（）</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">输入</span></span></font><span><span style="background-color:rgb(255,255,255);">sudo</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">密码后，系统会自动开始处理：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">先读取软件包列表，分析依赖关系（、）；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">然后提示会</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">同时安装</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">libgmpxx4ldbl”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，这是</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">libgmp-dev</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的依赖包，属于正常情况（）；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">最终确认</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">新安装</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">2</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">个软件包。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">输入</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“y”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">确认后，系统开始下载并自动安装，最后提示</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">正在处理用于</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">libc-bin</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的触发器</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，看起来安装成功了。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">第二步：重新编译仍报错？试试环境重置</span></span></font></span></b></h3>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">本以为安装完就能正常编译，结果重新执行编译命令后，报错依然存在。这时候我才意识到，可能是之前的编译缓存或环境变量没刷新，于是做了两个操作：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">1.</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">卸载无效依赖并重新安装</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">先尝试卸载可能冲突的</span></span></font><span><span style="background-color:rgb(255,255,255);">libmpc-dev</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（虽然终端提示</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“libmpc-dev</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">未安装，不会被卸载</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）（到），再重新执行</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">sudo apt-get install libmpc-dev</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">，确保相关依赖完整（）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">2.</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">补充安装环境变量相关工具</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></p>
	<img src="https://file1.elecfans.com//web3/M00/3C/92/wKgZPGkaixmALn34AAKEqIKcfeQ945.png" alt="wKgZPGkaixmALn34AAKEqIKcfeQ945.png"/><p>
		<span><font face="等线"><span>因为报这个错误，后来看了一下源码目录就有这个依赖，基本上是环境配置没配好</span></font></span></p>
	<img src="https://file1.elecfans.com//web3/M00/3C/92/wKgZPGkaixmAUsi5AACtcNQ1C80549.png" alt="wKgZPGkaixmAUsi5AACtcNQ1C80549.png"/><p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">参考瑞芯微编译环境的常见配置，又执行了两个命令：</span></span></font></span></p>
	<img src="https://file1.elecfans.com//web3/M00/3C/92/wKgZPGkaixmAbUn3AABCWQs6t9Y084.png" alt="wKgZPGkaixmAbUn3AABCWQs6t9Y084.png"/><p>
		</p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;background:rgb(0,255,255);"><span><span><span style="background-color:rgb(255,255,255);">◦</span></span></span></span><span><span><span style="background-color:rgb(255,255,255);">sudo apt-get install binfmt-support qemu-user-static</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（用于处理不同架构的二进制文件，）；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;background:rgb(0,255,255);"><span><span><span style="background-color:rgb(255,255,255);">◦</span></span></span></span><span><span><span style="background-color:rgb(255,255,255);">sudo dpkg -i ubuntu-build-service/packages/*</span></span></span><span><span><span style="background-color:rgb(255,255,255);"/></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">和</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">sudo apt-get install -f</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（修复</span></span></font><span><span style="background-color:rgb(255,255,255);">deb</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">包依赖，确保环境变量配置正确，、）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">做完这些后，我关闭了当前终端重新打开（刷新环境变量），再次执行编译命令</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">——</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">这次终于顺利跑通，没有再出现报错！</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h2>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">四、总结：初次编译</span></span></font><span><span style="background-color:rgb(255,255,255);">rk</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">内核的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">2</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">个避坑要点</span></span></font></span></b></h2>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">1.</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">优先看报错日志的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">直接提示</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font></span></b></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">像这次的</span></span></font><span><span style="background-color:rgb(255,255,255);">gmp</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">头文件缺失，报错里直接给了安装命令，跟着做就能解决</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">80%</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的问题，不用一开始就去搜复杂的教程。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">2.</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">依赖安装后记得</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">刷新环境</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font></span></b></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">有时候依赖安装成功了，但编译脚本读不到新安装的文件，关闭终端重新打开、或执行</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">source /etc/profile</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">刷新环境变量，往往能解决</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">安装了还报错</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的问题。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">如果大家在编译</span></span></font><span><span style="background-color:rgb(255,255,255);">rk3568/3576</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">等芯片的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Linux</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">内核时，遇到类似的依赖报错，不妨按照这个流程试试。如果还有其他踩坑经历，欢迎在评论区交流，一起帮更多<a href="https://bbs.elecfans.com/group_1231" target="_blank"><u>开发者</u></a>避坑～</span></span></font></span></p>
	<p>
		</p>
</div>
<div class="wx_detail">
	<p>
		</p>
</div>
<br/>]]></description></item><item>    <title><![CDATA[RK Android平台音频调试指南：从基础到实战，解决多设备输出、声卡异常等核心问题]]></title>    <link>https://www.elecfans.com/d/7401328.html</link>    <guid>https://www.elecfans.com/d/7401328.html</guid>    <pubDate>2026-02-06 16:48:00</pubDate>    <description><![CDATA[<div class="rich_media_content js_underline_content autoTypeSetting24psection">
	<h1>
		</h1>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">在</span></span></font><span><span style="background-color:rgb(255,255,255);"><a href="https://bbs.elecfans.com/group_360" target="_blank"><u>Android</u></a></span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">开发中，<a href="https://m.hqchip.com/app/1537" target="_blank"><u>音频</u></a>模块的调试往往是</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">老大难</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”——</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">多声卡无法区分、多设备同时输出没声音、</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);"><a href="https://www.hqchip.com/app/1685" target="_blank"><u>HDMI</u></a></span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">录音崩溃</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">…</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">这些问题不仅影响用户体验，还会消耗大量开发时间。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);"><a href="https://bbs.elecfans.com/zhuti_1179_1.html" target="_blank"><u>瑞芯微</u></a>（</span></span></font><span><span style="background-color:rgb(255,255,255);"><a href="https://bbs.elecfans.com/zhuti_1179_1.html" target="_blank"><u>Rockchip</u></a></span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）针对</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">RK</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">平台推出的</span></span></font></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">MultiAudio</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">方案</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">，专门解决</span></span></font><span><span style="background-color:rgb(255,255,255);">Android</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">原生音频框架的局限，同时提供了一套清晰的调试方法论。今天这篇文章，就从实战角度出发，带大家搞定</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">RK Android</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">平台的音频调试，覆盖基础操作、常见</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Bug</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">解决、多设备控制等核心场景。</span></span></font></span></p>
	<img src="https://file1.elecfans.com//web3/M00/3C/92/wKgZPGkaixiAEw8YAADpfPmKUJI793.png" alt="wKgZPGkaixiAEw8YAADpfPmKUJI793.png"/><p>
		</p>
	<p>
		</p>
	<p>
		</p>
	<h2>
		<b><span style="font-family:Arial;font-weight:bold;font-size:16pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">一、先搞懂：</span></span></font><span><span style="background-color:rgb(255,255,255);">Android</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">原生音频的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">痛点</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">与</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">MultiAudio</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">解决方案</span></span></font></span></b></h2>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">在聊调试前，我们得先明白</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">为什么需要调试</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”——Android</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">原生音频框架存在不少局限，这也是</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">RK MultiAudio</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">方案的出发点：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">1.</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">多声卡</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">认不出、用不了</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：即使设备支持多个声卡（比如双</span></span></font><span><span style="background-color:rgb(255,255,255);">HDMI</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">SPDIF</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">），原生系统会按</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">AudioPolicy</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">优先级选最高的，无法让不同声卡同时输出不同声音；多个同类型声卡（如双</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">HDMI</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）更是无法区分。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">2.</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">多设备录音需适配</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font><span><span style="background-color:rgb(255,255,255);">Android 12</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">虽支持多设备同时录音，但原生代码默认不支持，需要厂商针对性开发。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">3.</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">多</span></span></font><span><span style="background-color:rgb(255,255,255);">APP</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">音频冲突</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：系统音频焦点机制会导致多屏同时播放视频时出现暂停，影响多场景使用（如会议投屏</span></span></font><span><span style="background-color:rgb(255,255,255);">+</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">本地播放）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">而</span></span></font><span><span style="background-color:rgb(255,255,255);">RK MultiAudio</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">方案正好补上这些短板，核心能力包括：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">多</span></span></font><span><span style="background-color:rgb(255,255,255);">HDMI/DP</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">插拔识别</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">+</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">声音分离（</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">HDMI_0/HDMI_1</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">DP_0/DP_1</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">独立输出）；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">第三方</span></span></font><span><span style="background-color:rgb(255,255,255);">APP</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">按包名指定声卡（如</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">MX Player</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">走扬声器、</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">RockVideoPlayer</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">走</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">HDMI</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);"><a href="https://m.elecfans.com/v/tag/852/" target="_blank"><u>JAVA</u></a></span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">层通过<a href="https://m.hqchip.com/app/1787" target="_blank"><u>接口</u></a>直接控制声卡；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">多</span></span></font><span><span style="background-color:rgb(255,255,255);">HDMI IN</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">同时录音（</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">HDMIIN_0/HDMIIN_1</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">独立录音）；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">多设备音量同步调节与保存。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h2>
		<b><span style="font-family:Arial;font-weight:bold;font-size:16pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">二、基础调试：先搞定</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">声卡识别</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">与</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">驱动验证</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font></span></b></h2>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">调试的第一步，是确认</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">硬件通路是否正常</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”——</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">也就是声卡是否被正确识别、驱动是否能工作。这两步操作简单，但却是排查问题的基础。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span style="font-family:Arial;font-weight:bold;font-size:15pt;"><span><span style="background-color:rgb(255,255,255);">1.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">查看声卡：确认设备是否被系统识别</span></span></font></span></b></h3>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">通过</span></span></font><span><span style="background-color:rgb(255,255,255);"><a href="https://bbs.elecfans.com/zhuti_1472_1.html" target="_blank"><u>ad</u></a>b</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">执行命令，查看当前系统已注册的声卡：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__built_in">cat</span>/proc/asound/cards</span></code></pre>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">以</span></span></font><span><span style="background-color:rgb(255,255,255);">RK3588</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">为例，正常输出会类似这样（能看到扬声器、</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">HDMI IN</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">HDMI 0/1</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">等声卡）：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__number">0</span><span class="code-snippet__selector-attr">[rockchipes8388 ]</span>: rockchip-es8388 - rockchip-es8388</span></code><code><span>          rockchip-es8388</span></code><code><span><span class="code-snippet__number">1</span>[rockchiphdmiin ]: rockchip_hdmiin - rockchip,hdmiin</span></code><code><span>          rockchip,hdmiin</span></code><code><span><span class="code-snippet__number">2</span>[rockchiphdmi0 ]: rockchip-hdmi0 - rockchip-hdmi0</span></code><code><span>          rockchip-hdmi0</span></code><code><span><span class="code-snippet__number">3</span>[rockchiphdmi1 ]: rockchip-hdmi1 - rockchip-hdmi1</span></code><code><span>          rockchip-hdmi1</span></code></pre>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">如果某块声卡没出现（比如</span></span></font><span><span style="background-color:rgb(255,255,255);">HDMI 0</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">缺失），先排查硬件连接（如</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">HDMI</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">线是否插好），再检查</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">DTS</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">配置是否正确。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span style="font-family:Arial;font-weight:bold;font-size:15pt;"><span><span style="background-color:rgb(255,255,255);">2.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">测试驱动：验证声卡能否正常出声</span></span></font></span></b></h3>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">确认声卡识别后，用</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);"><a href="https://bbs.elecfans.com/group_715" target="_blank"><u>ti</u></a>nyplay</span></span></span><span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);"/></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">工具测试驱动是否正常（需系统集成</span></span></font><span><span style="background-color:rgb(255,255,255);">tinyalsa</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">工具集）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">以测试</span></span></font><span><span style="background-color:rgb(255,255,255);">HDMI 0</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">声卡（对应上述输出中的<a href="https://www.hqchip.com/ic/0" target="_blank"><u>索引</u></a></span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“2”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）为例：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">1.</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">准备一个</span></span></font><span><span style="background-color:rgb(255,255,255);">WAV</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">格式的音频文件（如</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);"><a href="https://www.elecfans.com/tags/te/" target="_blank"><u>te</u></a>st.wav</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">），推到设备的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">/data</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">目录；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">2.</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">执行命令播放：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__attribute">tinyplay</span>/data/test.wav -D<span class="code-snippet__number">2</span>-d<span class="code-snippet__number">0</span></span></code></pre>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;background:rgb(0,255,255);"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">-D</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：指定声卡索引（这里</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“2”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">对应</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">rockchiphdmi0</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;background:rgb(0,255,255);"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">-d</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：指定设备编号（通常为</span></span></font><span><span style="background-color:rgb(255,255,255);">0</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">如果能正常听到声音，说明</span></span></font><span><span style="background-color:rgb(255,255,255);">HDMI 0</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">声卡驱动没问题；若没声音，优先排查驱动配置（如</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">DTS</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">中声卡节点是否启用）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h2>
		<b><span style="font-family:Arial;font-weight:bold;font-size:16pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">三、实战：</span></span></font><span><span style="background-color:rgb(255,255,255);">5</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">大常见音频</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Bug</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">及解决方案</span></span></font></span></b></h2>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">调试中最头疼的是</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">明明配置了，却出问题</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”——</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">我们整理了</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">RK</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">平台最常遇到的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">5</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">类音频</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Bug</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，附详细解决步骤。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span style="font-family:Arial;font-weight:bold;font-size:15pt;"><span><span style="background-color:rgb(255,255,255);">1.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">问题</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">1</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">：更新代码后，</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">HDMI</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">突然没声音（之前正常）</span></span></font></span></b></h3>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">现象</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：代码同步到最新后，</span></span></font><span><span style="background-color:rgb(255,255,255);">HDMI</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">无音频输出，查看声卡却能识别到。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">原因</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：新框架支持多</span></span></font><span><span style="background-color:rgb(255,255,255);">HDMI</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">识别，若系统只有</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">1</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">路</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">HDMI</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，上层会默认调用</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“hdmi0”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">声卡，但</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">DTS</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">中声卡名可能配置成了</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“hdmi1”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，导致匹配失败。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">解决</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：修改</span></span></font><span><span style="background-color:rgb(255,255,255);">DTS</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">文件，将声卡名改为</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“rockchip-hdmi0”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__comment"># 找到 DTS 中 HDMI 声卡节点</span></span></code><code><span><span class="code-snippet__section">rockchiphdmi1: rockchip-hdmi1 {</span></span></code><code><span>-  rockchip,card-name =<span class="code-snippet__string">"rockchip-hdmi1"</span></span></code><code><span>+  rockchip,card-name =<span class="code-snippet__string">"rockchip-hdmi0"</span></span></code><code><span>};</span></code></pre>
	<h3>
		<b><span style="font-family:Arial;font-weight:bold;font-size:15pt;"><span><span style="background-color:rgb(255,255,255);">2.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">问题</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">2</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">UBoot</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">开</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Logo</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">后，</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">HDMI</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">没声音（插拔线后恢复）</span></span></font></span></b></h3>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">现象</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：开启</span></span></font><span><span style="background-color:rgb(255,255,255);">UBoot Logo</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">显示后，</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">HDMI</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">开机无声音，手动插拔一次</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">HDMI</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">线才正常。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">原因</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font><span><span style="background-color:rgb(255,255,255);">HDMI</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">extcon</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">（外部连接状态<a href="https://www.hqchip.com/app/1716" target="_blank"><u>控制器</u></a>）状态更新不及时，系统误以为</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">HDMI</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">未连接。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">解决</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：修改</span></span></font><span><span style="background-color:rgb(255,255,255);">DRM</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">驱动代码，强制同步</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">extcon</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">状态：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">在</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">drivers/<a href="https://www.elecfans.com/tags/gpu/" target="_blank"><u>gpu</u></a>/drm/bridge/synopsys/dw-hdmi-qp.c</span></span></span><span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);"/></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">中添加状态同步逻辑：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__built_in">mutex_lock</span>(&amp;hdmi-&gt;mutex);</span></code><code><span><span class="code-snippet__keyword">if</span>(result != hdmi-&gt;last_connector_result) {</span></code><code><span> <span class="code-snippet__built_in">dev_dbg</span>(hdmi-&gt;dev,<span class="code-snippet__string">"read_hpd result: %d"</span>, result);</span></code><code><span> <span class="code-snippet__comment">// 同步 extcon 状态</span></span></code><code><span> <span class="code-snippet__built_in">extcon_set_state_sync</span>(hdmi-&gt;extcon, EXTCON_DISP_HDMI, result == connector_status_connected);</span></code><code><span> <span class="code-snippet__built_in">handle_plugged_change</span>(hdmi, result == connector_status_connected);</span></code><code><span>  hdmi-&gt;last_connector_result = result;</span></code><code><span>}</span></code><code><span><span class="code-snippet__built_in">mutex_unlock</span>(&amp;hdmi-&gt;mutex);</span></code></pre>
	<h3>
		<b><span style="font-family:Arial;font-weight:bold;font-size:15pt;"><span><span style="background-color:rgb(255,255,255);">3.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">问题</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">3</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">SPDIF</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">与其他声卡同时出声，声音断断续续</span></span></font></span></b></h3>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">现象</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font><span><span style="background-color:rgb(255,255,255);">SPDIF</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（光纤</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">/</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">同轴）与扬声器</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">/ HDMI</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">同时播放时，音频卡顿、断连。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">原因</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font><span><span style="background-color:rgb(255,255,255);">1</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);"><a href="https://www.elecfans.com/tags/dma/" target="_blank"><u>DMA</u></a></span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">音频流位置计算错误；</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">2</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）声卡</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">MCLK</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">配置不合理。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">解决</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：两步操作：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">a.</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">集成</span></span></font><span><span style="background-color:rgb(255,255,255);">3</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">个关键</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Kernel</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">补丁（修复</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">DMA</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">与</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">PM</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">问题）：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:57.6pt;">
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">修复</span></span></font><span><span style="background-color:rgb(255,255,255);">DMA</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">流位置计算：</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">ALSA: pcm_dmaengine: always get stream position from DMA driver</span></span></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:57.6pt;">
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">修复</span></span></font><span><span style="background-color:rgb(255,255,255);">DMA runtime PM</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">失衡：</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">dmaengine: pl330: Fix unbalanced runtime PM</span></span></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:57.6pt;">
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">提升</span></span></font><span><span style="background-color:rgb(255,255,255);">DMA</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">循环传输效率：</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">dmaengine: pl330: Improve dma cyclic transfe<a href="https://www.elecfans.com/tags/rs/" target="_blank"><u>rs</u></a> efficiency</span></span></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">a.</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">修改</span></span></font><span><span style="background-color:rgb(255,255,255);">DTS</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">中</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">SPDIF</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">声卡节点，添加</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">MCLK</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">配置：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__attr">spdif_tx0_sound</span>: spdif-tx0-sound {</span></code><code><span>  status =<span class="code-snippet__string">"okay"</span>;</span></code><code><span>  compatible =<span class="code-snippet__string">"<a href="https://m.hqchip.com/app/1522" target="_blank"><u>sim</u></a>ple-audio-card"</span>;</span></code><code><span>+  simple-audio-card,mclk-fs = &lt;<span class="code-snippet__number">128</span>&gt;;<span class="code-snippet__comment">// 添加这行</span></span></code><code><span>  simple-audio-card,name =<span class="code-snippet__string">"rockchip,spdif-tx0"</span>;</span></code><code><span> <span class="code-snippet__comment">// 其他配置...</span></span></code><code><span>};</span></code></pre>
	<h3>
		<b><span style="font-family:Arial;font-weight:bold;font-size:15pt;"><span><span style="background-color:rgb(255,255,255);">4.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">问题</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">4</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">HDMI IN</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">录音时，偶尔出现</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Audio</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">服务崩溃</span></span></font></span></b></h3>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">现象</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：用</span></span></font><span><span style="background-color:rgb(255,255,255);">HDMI IN</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">录制外部音频（如机顶盒<a href="https://m.hqchip.com/app/1072" target="_blank"><u>信号</u></a>）时，</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Audio</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">服务突然崩溃，日志提示</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“TimeCheck</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">超时</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">原因</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font><span><span style="background-color:rgb(255,255,255);">HDMI IN</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">录音的等待时间过短，导致超时触发服务重启。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">解决</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：修改</span></span></font><span><span style="background-color:rgb(255,255,255);">I2S-TDM</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">驱动，延长录音等待时间：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">在</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">sound/soc/rockchip/rockchip_i2s_tdm.c</span></span></span><span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);"/></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">中添加超时配置：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__function"><span class="code-snippet__keyword">static</span></span><span class="code-snippet__function"/><span class="code-snippet__function"><span class="code-snippet__built_in">int</span></span><span class="code-snippet__function"/><span class="code-snippet__function"><span class="code-snippet__title">rockchip_i2s_tdm_trigger</span></span><span class="code-snippet__function">(</span><span class="code-snippet__function"><span class="code-snippet__params"><span class="code-snippet__keyword">struct</span></span></span><span class="code-snippet__function"><span class="code-snippet__params">snd_pcm_<a href="https://m.hqchip.com/app/1525" target="_blank"><u>sub</u></a>stream *substream,</span></span><span class="code-snippet__function"><span class="code-snippet__params"><span class="code-snippet__built_in">int</span></span></span><span class="code-snippet__function"><span class="code-snippet__params">cmd</span></span><span class="code-snippet__function">)</span>{</span></code><code><span> <span class="code-snippet__comment">// 其他逻辑...</span></span></code><code><span> <span class="code-snippet__keyword">break</span>;</span></code><code><span>+ <span class="code-snippet__comment">// 针对录音流，延长等待时间到 500ms</span></span></code><code><span>+ <span class="code-snippet__keyword">if</span>(substream-&gt;stream == SNDRV_PCM_STREAM_CAPTURE) {</span></code><code><span>+    substream-&gt;w<a href="https://www.elecfans.com/tags/ai/" target="_blank"><u>ai</u></a>t_time = msecs_to_jiffies(<span class="code-snippet__number">500</span>);</span></code><code><span>+  }</span></code><code><span> <span class="code-snippet__keyword">return</span>ret;</span></code><code><span>}</span></code></pre>
	<h3>
		<b><span style="font-family:Arial;font-weight:bold;font-size:15pt;"><span><span style="background-color:rgb(255,255,255);">5.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">问题</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">5</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">：更新代码后，声卡完全没声音（优先级冲突）</span></span></font></span></b></h3>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">现象</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：同步代码后，所有声卡都没声音，查看</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">proc/asound/cards</span></span></span><span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);"/></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">能识别到声卡。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">原因</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font><span><span style="background-color:rgb(255,255,255);">RK</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">默认代码基于多声卡设备（如</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">RK3588 EVB1</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">支持</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">4</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">路声卡），优先级为</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">HDMI0 &gt; HDMI1 &gt; DP0 &gt; DP1</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">；若实际设备只有</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">1</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">路</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">HDMI1</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，系统仍优先调用</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">HDMI0</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">（但无对应声卡），导致所有声音无输出。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">解决</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：修改</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">Wire<a href="https://www.elecfans.com/tags/dac/" target="_blank"><u>dAc</u></a>cessoryManager.java</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">，屏蔽</span></span></font><span><span style="background-color:rgb(255,255,255);">HDMI0</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">的优先级判断：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span># 文件路径：frameworks<span class="code-snippet__regexp">/base/</span>services<span class="code-snippet__regexp">/core/</span>java<span class="code-snippet__regexp">/com/</span>android<span class="code-snippet__regexp">/server/</span><span class="code-snippet__type">WiredAccessoryManager</span>.java</span></code><code><span><span class="code-snippet__keyword">else</span><span class="code-snippet__keyword">if</span>(headset<span class="code-snippet__operator">==</span><span class="code-snippet__type">BIT_HDMI_AUDIO</span>) {</span></code><code><span><span class="code-snippet__operator">-</span> <span class="code-snippet__type">Slog</span>.d(<span class="code-snippet__type">TAG</span>,<span class="code-snippet__string">"hdmi_0 plug"</span>);</span></code><code><span><span class="code-snippet__operator">-</span> outDevice<span class="code-snippet__operator">=</span><span class="code-snippet__type">AudioManager</span>.<span class="code-snippet__type">DEVICE_OUT_HDMI</span>;</span></code><code><span><span class="code-snippet__operator">+</span> <span class="code-snippet__comment">// 屏蔽 HDMI0 识别，避免优先级冲突</span></span></code><code><span><span class="code-snippet__operator">+</span> <span class="code-snippet__comment">// Slog.d(TAG, "hdmi_0 plug");</span></span></code><code><span><span class="code-snippet__operator">+</span> <span class="code-snippet__comment">// outDevice = AudioManager.DEVICE_OUT_HDMI;</span></span></code><code><span>}<span class="code-snippet__keyword">else</span><span class="code-snippet__keyword">if</span>(headset<span class="code-snippet__operator">==</span><span class="code-snippet__type">BIT_HDMI_AUDIO_1</span>) {</span></code><code><span> <span class="code-snippet__type">Slog</span>.d(<span class="code-snippet__type">TAG</span>,<span class="code-snippet__string">"hdmi_1 plug"</span>);</span></code><code><span>  outDevice<span class="code-snippet__operator">=</span><span class="code-snippet__type">AudioManager</span>.<span class="code-snippet__type">DEVICE_OUT_HDMI_1</span>;</span></code></pre>
	<h2>
		<b><span style="font-family:Arial;font-weight:bold;font-size:16pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">四、实用技巧：多设备输出与</span></span></font><span><span style="background-color:rgb(255,255,255);">HDMI IN</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">录音的调用方法</span></span></font></span></b></h2>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">除了调试，掌握</span></span></font><span><span style="background-color:rgb(255,255,255);">MultiAudio</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">的核心调用方式，能让开发更高效。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span style="font-family:Arial;font-weight:bold;font-size:15pt;"><span><span style="background-color:rgb(255,255,255);">1.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">多设备输出：指定声卡的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">2</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">种方式</span></span></font></span></b></h3>
	<p>
		</p>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><span><span style="background-color:rgb(255,255,255);">1</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">JAVA</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">层通过</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">AudioSessionId</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">控制</span></span></font></span></b></h4>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">在</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">MediaPlayer</span></span></span><span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);"/></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">初始化时，通过</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">setAudioSessionId</span></span></span><span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);"/></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">指定声卡，</span></span></font></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">必须在</span></span></font><span><span style="background-color:rgb(255,255,255);">setDataSource</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">前调用</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__type">MediaPlayer</span><span class="code-snippet__variable">mp</span><span class="code-snippet__operator">=</span><span class="code-snippet__keyword">new</span><span class="code-snippet__title">MediaPlayer</span>();</span></code><code><span><span class="code-snippet__comment">// 指定声卡：PRIMARY(57)=扬声器，HDMI0(65)，DP0(73)，HDMI1(81)，DP1(89)</span></span></code><code><span>mp.setAudioSessionId(<span class="code-snippet__number">65</span>);<span class="code-snippet__comment">// 声音从 HDMI0 输出</span></span></code><code><span>mp.setDataSource(<span class="code-snippet__string">"/data/test.mp4"</span>);</span></code><code><span>mp.prepare();</span></code><code><span>mp.start();</span></code></pre>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><span><span style="background-color:rgb(255,255,255);">2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）按</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">APP</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">包名绑定声卡</span></span></font></span></b></h4>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">适合需要固定</span></span></font><span><span style="background-color:rgb(255,255,255);">APP</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">输出设备的场景（如会议软件固定走</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">HDMI</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">），修改</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">AudioTr<a href="https://m.hqchip.com/app/1703" target="_blank"><u>ac</u></a>k.cpp</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__meta">#</span><span class="code-snippet__meta"><span class="code-snippet__keyword">if</span></span><span class="code-snippet__meta">MultiAudioTest</span></span></code><code><span>String8 appPackage =<span class="code-snippet__built_in">String8</span>(mPackageName);</span></code><code><span><span class="code-snippet__comment">// RockVideoPlayer 走 HDMI0，gallery3d 走 HDMI1，MX Player 走扬声器</span></span></code><code><span><span class="code-snippet__keyword">if</span>(<span class="code-snippet__built_in">strstr</span>(appPackage.<span class="code-snippet__built_in">string</span>(),<span class="code-snippet__string">"RockVideoPlayer"</span>)) {</span></code><code><span>  sessionid = (<span class="code-snippet__type">audio_session_t</span>)<span class="code-snippet__number">65</span>;</span></code><code><span>}<span class="code-snippet__keyword">else</span><span class="code-snippet__keyword">if</span>(<span class="code-snippet__built_in">strstr</span>(appPackage.<span class="code-snippet__built_in">string</span>(),<span class="code-snippet__string">"gallery3d"</span>)) {</span></code><code><span>  sessionid = (<span class="code-snippet__type">audio_session_t</span>)<span class="code-snippet__number">81</span>;</span></code><code><span>}<span class="code-snippet__keyword">else</span><span class="code-snippet__keyword">if</span>(<span class="code-snippet__built_in">strstr</span>(appPackage.<span class="code-snippet__built_in">string</span>(),<span class="code-snippet__string">"mxtech"</span>)) {<span class="code-snippet__comment">// MX Player 包名含 mxtech</span></span></code><code><span>  sessionid = (<span class="code-snippet__type">audio_session_t</span>)<span class="code-snippet__number">57</span>;</span></code><code><span>}</span></code><code><span><span class="code-snippet__meta">#</span><span class="code-snippet__meta"><span class="code-snippet__keyword">endif</span></span></span></code></pre>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">同时需要：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__operator">•</span>打开<span class="code-snippet__type">MultiAudioTest</span>宏（在frameworks<span class="code-snippet__regexp">/av/</span>media<span class="code-snippet__regexp">/libaudioclient/</span>include<span class="code-snippet__regexp">/media/</span><span class="code-snippet__type">AudioTrack</span>.h中设为<span class="code-snippet__number">1</span>）；</span></code><code><span><span class="code-snippet__operator">•</span>解决音频焦点冲突：在<span class="code-snippet__type">MediaFocusControl</span>.java 中添加focusChangeHint<span class="code-snippet__operator">=</span><span class="code-snippet__number">3</span>，避免多<span class="code-snippet__type">APP</span>同时播放时暂停<span class="code-snippet__operator">。</span></span></code></pre>
	<p style="margin-left:14.4pt;">
		</p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span style="font-family:Arial;font-weight:bold;font-size:15pt;"><span><span style="background-color:rgb(255,255,255);">2. HDMI IN</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">录音：调用</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">HDMIIN</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">音频源</span></span></font></span></b></h3>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">通过</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">AudioRecord</span></span></span><span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);"/></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">初始化时指定</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">MediaRecorder.AudioSource.HDMIIN</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">，即可录制</span></span></font><span><span style="background-color:rgb(255,255,255);">HDMI</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">外部输入的声音：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__comment">// 参数：音频源（HDMIIN）、采样率、声道配置、格式、缓冲区大小</span></span></code><code><span><span class="code-snippet__type">AudioRecord</span><span class="code-snippet__variable">audioRecord</span><span class="code-snippet__operator">=</span><span class="code-snippet__keyword">new</span><span class="code-snippet__title">AudioRecord</span>(</span></code><code><span>  MediaRecorder.AudioSource.HDMIIN,</span></code><code><span> <span class="code-snippet__number">44100</span>,<span class="code-snippet__comment">// 采样率 44.1kHz</span></span></code><code><span>  AudioFormat.CHANNEL_IN_STEREO,<span class="code-snippet__comment">// 立体声</span></span></code><code><span>  AudioFormat.ENCODING_PCM_16BIT,<span class="code-snippet__comment">// 16bit PCM</span></span></code><code><span> <span class="code-snippet__number">4096</span><span class="code-snippet__comment">// 缓冲区大小</span></span></code><code><span>);</span></code><code><span><span class="code-snippet__comment">// 开始录音</span></span></code><code><span>audioRecord.startRecording();</span></code></pre>
	<h2>
		<b><span style="font-family:Arial;font-weight:bold;font-size:16pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">五、扩展：用</span></span></font><span><span style="background-color:rgb(255,255,255);">AudioPatch</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">优化</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">TvInput</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">音频延时</span></span></font></span></b></h2>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">如果开发</span></span></font><span><span style="background-color:rgb(255,255,255);">TvInput</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">相关功能（如电视信号输入），可以用</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">AudioPatch</span></span></span><span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);"/></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">替代传统的</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">AudioStream</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">，进一步降低音频延时（但录屏无法捕获</span></span></font><span><span style="background-color:rgb(255,255,255);">TvInput</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">预览声音，需根据需求选择）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">核心修改：在</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">TvInputHardwareManager.java</span></span></span><span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);"/></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">中屏蔽</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">AudioStream</span></span></span><span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);"/></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">调用，启用</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">AudioPatch</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__comment">// 屏蔽原 AudioStream 逻辑</span></span></code><code><span><span class="code-snippet__comment">// mAudioStream.start(6);</span></span></code><code><span><span class="code-snippet__comment">// mAudioStream.stop();</span></span></code><code><span><span class="code-snippet__comment">// 启用 AudioPatch</span></span></code><code><span><span class="code-snippet__keyword">if</span>(mAudioPatch !=<span class="code-snippet__literal">null</span>) {</span></code><code><span>  mAudioManager.<span class="code-snippet__title">releaseAudioPatch</span>(mAudioPatch);</span></code><code><span>}</span></code><code><span><span class="code-snippet__comment">// 创建 AudioPatch 连接 HDMI IN 音频源</span></span></code><code><span>mAudioManager.<span class="code-snippet__title">createAudioPatch</span>(</span></code><code><span>  audioPatchArray,</span></code><code><span> <span class="code-snippet__keyword">new</span><span class="code-snippet__title">AudioPortConfig</span>[] { sourceConfig },</span></code><code><span> <span class="code-snippet__keyword">new</span><span class="code-snippet__title">AudioPortConfig</span>[] { sinkConfig }</span></code><code><span>);</span></code></pre>
	<h2>
		<b><span style="font-family:Arial;font-weight:bold;font-size:16pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">六、总结与支持</span></span></font></span></b></h2>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">RK Android</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">平台的音频调试，核心是</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">先确认基础通路（声卡</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">+</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">驱动），再定位上层逻辑（优先级、状态同步）</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">。</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">MultiAudio</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">方案不仅解决了原生框架的局限，其配套的调试方法也能覆盖大部分场景。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">希望这篇指南能帮你少踩坑，高效搞定音频调试！如果觉得有用，欢迎点赞、转发，也欢迎在评论区分享你的调试经验～</span></span></font></span></p>
</div>
<div class="wx_detail">
	<p>
		</p>
</div>]]></description></item><item>    <title><![CDATA[零碳园区建设全攻略：政策导向+建设路径+技术支撑+实践案例]]></title>    <link>https://www.elecfans.com/d/7641969.html</link>    <guid>https://www.elecfans.com/d/7641969.html</guid>    <pubDate>2026-02-06 16:48:00</pubDate>    <description><![CDATA[<div class="vditor-preview__action"/><div class="vditor-reset"><h1>零碳园区建设全攻略：政策导向+建设路径+技术支撑+实践案例</h1><p>安科瑞销售<a href="https://bbs.elecfans.com/zhuti_lecture_1.html" target="_blank"><u>工程师</u></a>-蔡禹 咨询：18702109681</p><p>全球气候变化背景下，“双碳”目标成为中国发展的重要战略指引，园区作为工业碳排放核心集聚地，其绿色转型直接决定整体减排成效，零碳园区建设已从政策导向转变为产业可持续发展的必然选择。本文从政策驱动、建设路径、技术支撑、实践案例四大维度，全面解析零碳园区建设的核心逻辑与落地方案，为园区绿色转型提供可落地、可复制的参考思路。<br/><img src="https://file1.elecfans.com/web3/M00/4B/12/wKgZPGmFpC6AdaqQAABQ-13POhs416.jpg" alt="0205-1.jpg"/></p><h2>政策驱动：零碳园区已成国家战略重点</h2><p>中国明确提出“二氧化碳排放力争2030年前达峰、2060年前实现碳中和”目标，工业领域碳排放占全国总量约65%，而园区作为工业企业集中承载区，是落实“双碳”战略的关键载体，其绿色转型成效直接影响整体减排目标推进节奏。</p><p>近年来，国家发改委、工信部、能源局等多部门协同发力，出台《关于开展零碳园区建设的通知》等政策文件，明确支持有条件地区打造零碳园区试点，加快构建规范化建设与标准化评估体系。各省市结合本地产业基础与能源禀赋，制定地方性建设规范，推动园区在能源结构优化、能效水平提升、碳排精准核算等方面实现系统性突破。</p><p>零碳园区建设，不仅是我国应对生态环境危机的主动作为，更成为推动经济结构转型升级、培育绿色发展新动能的重要引擎，是政策层面明确支持、产业层面亟需落地的核心发展方向。<br/><img src="https://file1.elecfans.com/web3/M00/4B/13/wKgZO2mFpFCAFTZiAAM1K4uVukQ256.jpg" alt="0205-2.jpg"/></p><h2>建设路径：从能源优化到智慧管理，锚定指标精准发力</h2><p>《国家级零碳园区建设指标体系》划定核心与引导两类指标，覆盖单位能耗碳排放、清洁能源消费占比、工业固体废弃物综合利用率等关键维度。实现零碳园区建设目标，需统筹推进能源、节能、数字化、市场化四大板块协同发力，构建全方位零碳发展体系，锚定指标精准施策：<br/><img src="https://file1.elecfans.com/web3/M00/4B/13/wKgZPGmFqpmAS8MMAAJQg-ABrjU257.jpg" alt="0205-3.jpg"/></p><h3>能源结构优化：清洁能源替代，构建清洁供能网络</h3><p>以清洁能源替代为核心，大力发展光伏、风电、储能等多能互补系统，搭建高效园区微电网。结合园区实际布局分布式光伏、分散式风电，推动绿电就近开发、就地消纳，搭配储能系统平抑能源波动，逐步摆脱对化石能源的依赖，从源头遏制碳排放增长，打造稳定、清洁、高效的园区能源供给网络。</p><h3>节能降碳改造：聚焦高耗环节，推动产业提质降耗</h3><p>聚焦园区高耗能环节，推进高耗能设备更新换代与能效升级，落地绿色照明、余热回收利用等重点工程，全面提升能源利用效率。引导园区企业开展节能降碳诊断与专项改造，淘汰落后产能与工艺，鼓励打造极致能效工厂、零碳工厂，推动产业向低能耗、高附加值方向转型，实现节能与提质双向赋能。<br/><img src="https://file1.elecfans.com/web3/M00/4B/14/wKgZO2mFqqmAAm6uAAHNpGpWvoc218.jpg" alt="0205-4.jpg"/></p><h3>数字化能碳管理：打破信息孤岛，实现精细化管控</h3><p>搭建覆盖全园区的能碳管理平台，打通各能源系统数据壁垒，实现能源消耗与碳排放的实时监测、精准核算、智能优化。通过一体化管理电、水、气、热等各类能源数据，精准定位耗能痛点，为园区节能降碳决策提供科学数据支撑，全面提升管理精细化、智能化水平。</p><h3>市场机制创新：激活市场动力，实现生态经济双赢</h3><p>依托市场化手段激活零碳发展动力，鼓励园区以虚拟电厂模式参与电力市场交易与绿电交易。聚合园区内分布式能源资源，积极参与需求响应、辅助服务等电力市场业务，在降低园区用电成本的同时，拓展市场化收益渠道，实现生态效益与经济效益双赢。<br/><img src="https://file1.elecfans.com/web3/M00/4B/13/wKgZPGmFqryATns3AARnZHtql7g010.jpg" alt="0205-5.jpg"/></p><h2>技术支撑：安科瑞能碳管理平台的一体化解决方案</h2><p>零碳园区的系统化建设，离不开专业技术平台的硬核支撑。安科瑞推出的能碳管理平台，以“数字化、系统化、智能化、市场化”为核心理念，覆盖零碳园区建设全流程，从数据采集到运营优化提供一站式服务，精准适配国家级零碳园区建设指标要求，为零碳园区建设筑牢技术根基，核心功能涵盖四大方面：</p><h3>一体化能碳监测：数据精准采集，实现全流程管控</h3><p>通过智能电表、边缘网关等终端设备，实时采集电、水、气、热等各类能源数据，实现分类分项统计、用能趋势分析与异常能耗预警。精准掌控园区能源消耗与碳排放动态，确保园区碳排管理可量化、可追溯、可管控，为碳核算、节能优化提供精准数据支撑。</p><h3>智慧微电网管理：源网荷储充协同，提升绿电消纳能力</h3><p>集成光伏、储能、<a href="https://www.elecfans.com/tags/充电桩/" target="_blank"><u>充电桩</u></a>等分布式能源资源，实现源网荷储充协同优化调度，统筹调配园区各类能源资源，保障能源供应稳定可靠。大幅提升绿电消纳能力，有效降低园区用电成本，为清洁能源替代目标落地提供坚实支撑。</p><h3>节能降碳智能调控：<a href="https://www.elecfans.com/tags/ai/" target="_blank"><u>AI</u></a><a href="https://m.elecfans.com/v/tag/2562/" target="_blank"><u>算法</u></a>赋能，实现能效碳排双优化</h3><p>融合AI智能算法，对中央空调、照明系统等重点耗能设备实施动态优化调控，精准匹配园区用能需求与能源供给，最大化提升能源利用效率，实现能效提升与碳排放减量双向突破，推动园区节能降碳目标高效落地。</p><h3>虚拟电厂与市场接入：聚合分布式资源，拓展市场化收益</h3><p>聚合园区内分布式能源资源，打通园区与市场化交易机制的衔接通道，助力园区接入电力市场，参与需求响应、辅助服务等交易业务。充分挖掘分布式能源价值，为园区及入驻企业创造额外收益，实现节能降碳与收益提升的双重目标。</p><p>安科瑞能碳管理平台深度对标国家与行业相关标准，支持灵活扩展与多协议兼容，可根据园区实际需求分阶段部署实施，具备极强的政策适配性与运营可行性，为零碳园区建设提供全流程技术支撑。<br/><img src="https://file1.elecfans.com/web3/M00/4B/14/wKgZO2mFqtCAZsFbAAHCDSOlxFQ216.jpg" alt="0205-6.jpg"/></p><h2>实践案例：上海某研究院园区的绿色蜕变</h2><p>理论体系与技术方案的落地成效，需依托实践检验。上海某研究院园区通过部署安科瑞智慧能源管理系统，成功实现从传统园区向绿色智慧零碳园区的转型，为国内零碳园区建设提供了可复制、可推广的实践范本。</p><p>该园区系统全面覆盖13栋建筑、7个车棚及1个充电场站，集成光伏、储能、充电桩等各类能源设施，构建起光储充一体化的智慧能源网络，系统投入运行后，园区发展实现三大突破：</p><ol><li><strong>清洁能源高效利用</strong> ：光伏与储能系统协同联动，大幅提升绿色电力自发自用比例，借助储能“低充高放”模式优化电费结构，有效降低园区用电成本，推动清洁能源替代目标落地见效；</li><li><strong>系统协同与数据融合</strong> ：彻底打破以往各能源系统的信息壁垒，实现多系统数据共享、协同联动与智能决策，为园区科研工作开展与能效精细化管理提供精准、全面的数据支撑，全面提升园区整体运营管理效能；</li><li><strong>市场化收益拓展</strong> ：依托系统内置的虚拟电厂功能，园区成功具备参与虚拟电厂需求响应与电力交易的能力，在进一步降低用电成本的基础上，拓展了市场化收益渠道，真正实现经济效益与环境效益的双向共赢。</li></ol><h2>结语：零碳园区是必然，更是机遇</h2><p>零碳园区建设，既是响应国家“双碳”政策的必然要求，也是园区突破发展瓶颈、提升核心竞争力、实现可持续发展的战略抉择。通过构建以能碳管理平台为核心的智慧能源体系，园区可在保障能源安全、降低运营成本的同时，大幅削减碳排放，实现经济效益与环境效益的协同发展。</p><p>未来，随着零碳技术的不断成熟与政策体系的持续深化，零碳园区将逐步成为中国工业绿色转型的核心标杆，引领产业向绿色化、智能化、数字化深度升级。安科瑞将持续以技术创新为核心，打造更贴合园区需求的能碳管理解决方案，助力更多园区实现绿色转型，为推动全球气候治理、助力绿色低碳发展贡献力量。</p><p>审核编辑 黄宇</p></div>]]></description></item><item>    <title><![CDATA[Rockchip CIF驱动深度解析：从架构设计到电源计数补丁修复]]></title>    <link>https://www.elecfans.com/d/7401326.html</link>    <guid>https://www.elecfans.com/d/7401326.html</guid>    <pubDate>2026-02-06 16:49:00</pubDate>    <description><![CDATA[<div class="rich_media_content js_underline_content autoTypeSetting24psection">
	<h1>
		</h1>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">在<a href="https://www.elecfans.com/soft/data/21-22/" target="_blank"><u>嵌入式</u></a></span></span></font><span><span style="background-color:rgb(255,255,255);"><a href="https://bbs.elecfans.com/group_300" target="_blank"><u>Linux</u></a></span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">系统中，</span></span></font></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);"><a href="https://bbs.elecfans.com/zhuti_1179_1.html" target="_blank"><u>Rockchip</u></a> CIF</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Camera Interface</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）驱动</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">是摄像头硬件与上层应用的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">桥梁</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”——</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">它不仅要实现设备初始化、格式协商、数据捕获等核心功能，还需保障运行稳定性。本文将从「驱动整体架构」入手，<a href="https://m.elecfans.com/v/tag/899/" target="_blank"><u>拆解</u></a>核心文件功能与调用关系，再聚焦「</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Sensor</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);"><a href="https://www.hqchip.com/app.html" target="_blank"><u>电源</u></a>引用计数补丁」，详解如何通过补丁解决实际运行中的稳定性问题，为驱动开发与调试提供完整参考。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h2>
		<b><span style="font-family:Arial;font-weight:bold;font-size:16pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">一、</span></span></font><span><span style="background-color:rgb(255,255,255);">CIF</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">驱动整体架构：核心文件与功能拆解</span></span></font></span></b></h2>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">Rockchip CIF</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">驱动位于</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">drivers/media/platform/rockchip/cif/</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">目录下，包含</span></span></font><span><span style="background-color:rgb(255,255,255);">5</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">个核心文件（</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">dev.c</span></span></span><span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">/</span></span></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);"><a href="https://m.hqchip.com/app/1525" target="_blank"><u>sub</u></a>dev-i<a href="https://m.hqchip.com/app/1522" target="_blank"><u>tf</u></a>.c</span></span></span><span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">/</span></span></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">subdev-itf.h</span></span></span><span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">/</span></span></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">procfs.c</span></span></span><span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">/</span></span></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">capture.c</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">），各文件分工明确、协同工作，共同支撑摄像头的完整功能。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span style="font-family:Arial;font-weight:bold;font-size:15pt;"><span><span style="background-color:rgb(255,255,255);">1.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">核心文件功能总览</span></span></font></span></b></h3>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">先通过一张脑图快速梳理各文件的核心定位：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<img src="https://file1.elecfans.com//web3/M00/3C/92/wKgZPGkaixeAMbf7AAIzmx7vtbg578.png" alt="wKgZPGkaixeAMbf7AAIzmx7vtbg578.png"/><h3>
		<b><span style="font-family:Arial;font-weight:bold;font-size:15pt;"><span><span style="background-color:rgb(255,255,255);">2.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">关键文件深度解析</span></span></font></span></b></h3>
	<p>
		</p>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><span><span style="background-color:rgb(255,255,255);">1</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）</span></span></font></span></b><b><span style="font-family:Arial;font-weight:bold;font-size:14pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">dev.c</span></span></span></b><b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：设备管理</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">总控</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font></span></b></h4>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">作为驱动的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">大脑</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">dev.c</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">负责初始化设备基础环境、管理全局状态，并提供用户可配置的属性<a href="https://m.hqchip.com/app/1787" target="_blank"><u>接口</u></a>。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">核心工作</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">a.</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">设备初始化</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：在</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">rkcif_plat_init</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">中初始化原子变量（如</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">power_cnt</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">streamoff_cnt</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">）、互斥锁（</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">stream_lock</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">）、媒体管道（</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);"><a href="https://www.elecfans.com/tags/pi/" target="_blank"><u>pi</u></a>pe</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">），为设备运行打下基础。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">b.</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">sysfs</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">属性配置</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：实现</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">compact_<a href="https://www.elecfans.com/tags/te/" target="_blank"><u>te</u></a>st</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">（紧凑数据流模式）、</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">is_use_dummybuf</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">（虚拟缓冲区开关）等属性的读写函数，用户可通过</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">/sys/class/video4linux/videoX/</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">路径动态调整设备行为。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">c.</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">全局状态维护</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：通过</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">rkcif_device_list</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">链表管理所有</span></span></font><span><span style="background-color:rgb(255,255,255);">CIF</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">设备，</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">rkcif_dev_mutex</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">保证多设备操作的互斥性，避免并发冲突。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">关键代码示例</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">（设备初始化）：</span></span></font></span></p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__comment">// drivers/media/platform/rockchip/cif/dev.c</span></span></code><code><span><span class="code-snippet__function"><span class="code-snippet__built_in">int</span></span><span class="code-snippet__function"/><span class="code-snippet__function"><span class="code-snippet__title">rkcif_plat_init</span></span><span class="code-snippet__function">(</span><span class="code-snippet__function"><span class="code-snippet__params"><span class="code-snippet__keyword">struct</span></span></span><span class="code-snippet__function"><span class="code-snippet__params">rkcif_device *cif_dev,</span></span><span class="code-snippet__function"><span class="code-snippet__params"><span class="code-snippet__keyword">struct</span></span></span><span class="code-snippet__function"><span class="code-snippet__params">device_node *node,</span></span><span class="code-snippet__function"><span class="code-snippet__params"><span class="code-snippet__built_in">int</span></span></span><span class="code-snippet__function"><span class="code-snippet__params">irq</span></span><span class="code-snippet__function">)</span>{</span></code><code><span> <span class="code-snippet__comment">// 初始化原子变量（电源、流关闭、<a href="https://www.elecfans.com/v/tag/117/" target="_blank"><u>传感器</u></a>状态）</span></span></code><code><span>  atomic_set(&amp;cif_dev-&gt;power_cnt,<span class="code-snippet__number">0</span>);</span></code><code><span>  atomic_set(&amp;cif_dev-&gt;streamoff_cnt,<span class="code-snippet__number">0</span>);</span></code><code><span>  atomic_set(&amp;cif_dev-&gt;sensor_off,<span class="code-snippet__number">1</span>);</span></code><code><span> <span class="code-snippet__comment">// 后续补丁新增：Sensor电源引用计数初始化</span></span></code><code><span>  atomic_set(&amp;cif_dev-&gt;<a href="https://www.hqchip.com/app/1522" target="_blank"><u>sd</u></a>_power_cnt,<span class="code-snippet__number">0</span>);</span></code><code><span> </span></code><code><span> <span class="code-snippet__comment">// 初始化媒体管道（open/close回调）</span></span></code><code><span>  cif_dev-&gt;pipe.open = rkcif_pipeline_open;</span></code><code><span>  cif_dev-&gt;pipe.close = rkcif_pipeline_close;</span></code><code><span> <span class="code-snippet__keyword">return</span><span class="code-snippet__number">0</span>;</span></code><code><span>}</span></code></pre>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><span><span style="background-color:rgb(255,255,255);">2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）</span></span></font></span></b><b><span style="font-family:Arial;font-weight:bold;font-size:14pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">subdev-itf.c</span></span></span></b><b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：传感器</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">交互桥梁</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font></span></b></h4>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">subdev-itf.c</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">是</span></span></font><span><span style="background-color:rgb(255,255,255);">CIF</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">驱动与摄像头</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Sensor</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的直接交互接口，实现</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">V4L2</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">子设备协议，负责格式协商、电源控制、事件触发。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">核心工作</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">a.</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">格式协商</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：通过</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);"><a href="https://www.elecfans.com/tags/sdi/" target="_blank"><u>sdi</u></a>tf_get_set_fmt</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">与</span></span></font><span><span style="background-color:rgb(255,255,255);">Sensor</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">协商输入格式（分辨率、像素格式如</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">SBGGR8</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">），并配置</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">CIF</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">内部数据流参数。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">b.</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">电源控制</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">sditf_s_power</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">函数触发</span></span></font><span><span style="background-color:rgb(255,255,255);">Sensor</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);"><a href="https://m.hqchip.com/app/1708" target="_blank"><u>电源开关</u></a>，是后续补丁重点修复的调用路径之一。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">c.</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">事件管理</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：订阅</span></span></font><span><span style="background-color:rgb(255,255,255);">/</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">触发</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">V4L2_EVENT_FRAME_SYNC</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">（帧同步）、</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">V4L2_EVENT_EXPOSURE</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">（曝光）事件，确保数据捕获时序正确。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">关键代码示例</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">（电源控制接口）：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__comment">// drivers/media/platform/rockchip/cif/subdev-itf.c</span></span></code><code><span><span class="code-snippet__function"><span class="code-snippet__keyword">static</span></span><span class="code-snippet__function"/><span class="code-snippet__function"><span class="code-snippet__built_in">int</span></span><span class="code-snippet__function"/><span class="code-snippet__function"><span class="code-snippet__title">sditf_s_power</span></span><span class="code-snippet__function">(</span><span class="code-snippet__function"><span class="code-snippet__params"><span class="code-snippet__keyword">struct</span></span></span><span class="code-snippet__function"><span class="code-snippet__params">v4l2_subdev *sd,</span></span><span class="code-snippet__function"><span class="code-snippet__params"><span class="code-snippet__built_in">int</span></span></span><span class="code-snippet__function"><span class="code-snippet__params"/></span><span class="code-snippet__function"><span class="code-snippet__params"><span class="code-snippet__keyword">on</span></span></span><span class="code-snippet__function">)</span>{</span></code><code><span> <span class="code-snippet__keyword">struct</span>sditf_priv *priv = v4l2_subdev_to_sditf(sd);</span></code><code><span> <span class="code-snippet__keyword">struct</span>rkcif_device *cif_dev = priv-&gt;cif_dev;</span></code><code><span> <span class="code-snippet__built_in">int</span>ret =<span class="code-snippet__number">0</span>;</span></code><code><span>  mutex_lock(&amp;cif_dev-&gt;stream_lock);</span></code><code><span> <span class="code-snippet__keyword">if</span>(<span class="code-snippet__keyword">on</span>) {</span></code><code><span>    pm_run<a href="https://bbs.elecfans.com/group_715" target="_blank"><u>ti</u></a>me_get_sync(cif_dev-&gt;dev);</span></code><code><span>   <span class="code-snippet__comment">// 后续补丁新增：调用统一<a href="https://www.hqchip.com/app/1731" target="_blank"><u>电源管理</u></a>函数</span></span></code><code><span>    ret |= rkcif_sensor_set_power(&amp;cif_dev-&gt;stream[<span class="code-snippet__number">0</span>],<span class="code-snippet__keyword">on</span>);</span></code><code><span>  }<span class="code-snippet__keyword">else</span>{</span></code><code><span>    pm_runtime_put_sync(cif_dev-&gt;dev);</span></code><code><span>    ret |= rkcif_sensor_set_power(&amp;cif_dev-&gt;stream[<span class="code-snippet__number">0</span>],<span class="code-snippet__keyword">on</span>);</span></code><code><span>  }</span></code><code><span>  mutex_unlock(&amp;cif_dev-&gt;stream_lock);</span></code><code><span> <span class="code-snippet__keyword">return</span>ret;</span></code><code><span>}</span></code></pre>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><span><span style="background-color:rgb(255,255,255);">3</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）</span></span></font></span></b><b><span style="font-family:Arial;font-weight:bold;font-size:14pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">capture.c</span></span></span></b><b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：数据捕获</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">执行核心</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font></span></b></h4>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">capture.c</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">负责摄像头数据的实际捕获，包括流启动</span></span></font><span><span style="background-color:rgb(255,255,255);">/</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">停止、缓冲区处理、电源控制函数实现，是本次补丁修改的核心文件。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">核心工作</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">a.</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">流管理</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">rkcif_do_start_stream</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">启动数据捕获，</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">rkcif_stream_init</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">初始化流状态（如帧丢失计数</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">frame_loss</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">b.</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">电源控制函数</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">rkcif_sensor_set_power</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">是</span></span></font><span><span style="background-color:rgb(255,255,255);">Sensor</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">电源开关的实际实现，补丁通过修改该函数引入引用计数逻辑。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">c.</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">文件操作</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">rkcif_fh_open</span></span></span><span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">/</span></span></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">rkcif_fh_release</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">处理用户空间的设备打开</span></span></font><span><span style="background-color:rgb(255,255,255);">/</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">关闭请求，控制电源开关的调用时机。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><span><span style="background-color:rgb(255,255,255);">4</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）</span></span></font></span></b><b><span style="font-family:Arial;font-weight:bold;font-size:14pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">procfs.c</span></span></span></b><b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：调试信息</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">出口</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font></span></b></h4>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">procfs.c</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">通过</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">/proc/driver/rkcif</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">节点向用户空间暴露驱动运行状态，便于调试定位问题。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">核心工作</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">a.</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">格式转换</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">rkcif_pixelcode_to_string</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">将媒体总线格式代码（如</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">MEDIA_BUS_FMT_SBGGR8_1X8</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">）转换为可读字符串（</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">"SBGGR8"</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">b.</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">信息输出</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">rkcif_show_clks</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">输出<a href="https://www.elecfans.com/tags/时钟/" target="_blank"><u>时钟</u></a>频率、</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">rkcif_show_format</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">输出当前捕获格式，帮助<a href="https://bbs.elecfans.com/group_1231" target="_blank"><u>开发者</u></a>确认设备配置是否正确。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><span><span style="background-color:rgb(255,255,255);">5</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）</span></span></font></span></b><b><span style="font-family:Arial;font-weight:bold;font-size:14pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">subdev-itf.h</span></span></span></b><b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：数据结构</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">定义层</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font></span></b></h4>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">仅定义</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">struct capture_info</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">结构体，存储摄像头捕获区域的偏移（</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">offset_x/y</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">）和分辨率（</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">width/height</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">），是格式协商、缓冲区分配的基础数据载体。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h2>
		<b><span style="font-family:Arial;font-weight:bold;font-size:16pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">二、驱动模块协同：调用关系与架构流程图</span></span></font></span></b></h2>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">各文件并非独立运行，而是通过</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">初始化</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">→</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">配置</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">→</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">捕获</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">→</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">调试</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的流程协同工作，以下是核心调用关系与架构图：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span style="font-family:Arial;font-weight:bold;font-size:15pt;"><span><span style="background-color:rgb(255,255,255);">1.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">核心调用流程（以</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">设备启动</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">为例）</span></span></font></span></b></h3>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">1.</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">初始化</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">dev.c</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">的</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">rkcif_plat_init</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">初始化设备状态</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">→</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">subdev-itf.c</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">的</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">sditf_init_buf</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">分配缓冲区</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">→</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">capture.c</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">的</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">rkcif_stream_init</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">初始化流。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">2.</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">用户交互</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：用户通过</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">open</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">调用触发</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">capture.c</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">的</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">rkcif_fh_open</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="Arial"><span><span style="background-color:rgb(255,255,255);">→</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">加锁后调用</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">rkcif_sensor_set_power</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">上电</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">→</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">subdev-itf.c</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">的</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">sditf_s_power</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">与</span></span></font><span><span style="background-color:rgb(255,255,255);">Sensor</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">交互。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">3.</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">数据捕获</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">rkcif_do_start_stream</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">启动流</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">→</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">subdev-itf.c</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">的事件机制同步帧数据</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">→</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">数据写入缓冲区。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">4.</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">调试监控</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：用户读取</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">/proc/driver/rkcif</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="Arial"><span><span style="background-color:rgb(255,255,255);">→</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">procfs.c</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">的函数从</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">dev.c</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">获取设备状态并输出。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span style="font-family:Arial;font-weight:bold;font-size:15pt;"><span><span style="background-color:rgb(255,255,255);">2.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">架构流程图</span></span></font></span></b></h3>
	<p>
		</p>
	<img src="https://file1.elecfans.com//web3/M00/3C/92/wKgZPGkaixeASfEvAAC3Nhb1Owg613.jpg" alt="wKgZPGkaixeASfEvAAC3Nhb1Owg613.jpg"/><h2>
		<b><span style="font-family:Arial;font-weight:bold;font-size:16pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">三、补丁修复：</span></span></font><span><span style="background-color:rgb(255,255,255);">Sensor</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">电源引用计数问题拆解</span></span></font></span></b></h2>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">在理解驱动架构后，我们聚焦本次关键补丁</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">——</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">修复</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Sensor</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">电源引用计数问题。该补丁针对</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Kernel 6.1</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">版本，解决了驱动运行中</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">过早断电</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">重复上电</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">等稳定性隐患。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span style="font-family:Arial;font-weight:bold;font-size:15pt;"><span><span style="background-color:rgb(255,255,255);">1.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">补丁背景：原驱动的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">3</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">大问题</span></span></font></span></b></h3>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">原</span></span></font><span><span style="background-color:rgb(255,255,255);">CIF</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">驱动对</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Sensor</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">电源的管理缺乏</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">引用计数</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">机制，导致多场景下异常：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">问题</span></span></font><span><span style="background-color:rgb(255,255,255);">1</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：无计数跟踪</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：多个模块（如预览</span></span></font><span><span style="background-color:rgb(255,255,255);">+</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">录像）同时使用</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Sensor</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">时，无法记录</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">当前使用者数量</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，一个模块调用断电后，其他模块会因</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Sensor</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">断电崩溃。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">问题</span></span></font><span><span style="background-color:rgb(255,255,255);">2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：调用时机混乱</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">rkcif_sensor_set_power</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">在</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">open/release</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">中调用时机错误（如解锁后调用），并发场景下计数错乱。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">问题</span></span></font><span><span style="background-color:rgb(255,255,255);">3</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：路径覆盖不全</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">subdev-itf.c</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">的</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">sditf_s_power</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">未经过统一电源函数，绕过计数逻辑，导致部分场景电源失控。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span style="font-family:Arial;font-weight:bold;font-size:15pt;"><span><span style="background-color:rgb(255,255,255);">2.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">修复思路：引入</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">原子引用计数</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font></span></b></h3>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">补丁核心是通过</span></span></font></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">原子变量</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">sd_power_cnt</span></span></span><span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);"/></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（定义在</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">dev.c</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">，声明在</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">dev.h</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">）跟踪电源使用状态，规则如下：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">上电（</span></span></font><span><span style="background-color:rgb(255,255,255);">on=1</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：仅当</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">sd_power_cnt</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">从</span></span></font><span><span style="background-color:rgb(255,255,255);">0→1</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">时，才执行</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Sensor</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">上电（避免重复上电）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">断电（</span></span></font><span><span style="background-color:rgb(255,255,255);">on=0</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：仅当</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">sd_power_cnt</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">从</span></span></font><span><span style="background-color:rgb(255,255,255);">1→0</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">时，才执行</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Sensor</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">断电（避免过早断电）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">全路径覆盖</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：所有电源操作（</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">open/release</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">sditf_s_power</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">）均调用</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">rkcif_sensor_set_power</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">，确保计数不遗漏。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span style="font-family:Arial;font-weight:bold;font-size:15pt;"><span><span style="background-color:rgb(255,255,255);">3.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">补丁对各文件的修改（附路径）</span></span></font></span></b></h3>
	<p>
		</p>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><span><span style="background-color:rgb(255,255,255);">1</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）</span></span></font></span></b><b><span style="font-family:Arial;font-weight:bold;font-size:14pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">capture.c</span></span></span></b><b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：核心逻辑修改（路径：</span></span></font></span></b></h4>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><span><span style="background-color:rgb(255,255,255);">drivers/media/platform/rockchip/cif/capture.c</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）</span></span></font></span></b></h4>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">修改</span></span></font><span><span style="background-color:rgb(255,255,255);">1</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">rkcif_sensor_set_power</span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">函数重构</span></span></font></span></b></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">从静态函数改为全局函数，新增计数逻辑：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__comment">// 原函数：直接操作电源，无计数</span></span></code><code><span><span class="code-snippet__function"><span class="code-snippet__keyword">static</span></span><span class="code-snippet__function"/><span class="code-snippet__function"><span class="code-snippet__built_in">int</span></span><span class="code-snippet__function"/><span class="code-snippet__function"><span class="code-snippet__title">rkcif_sensor_set_power</span></span><span class="code-snippet__function">(</span><span class="code-snippet__function"><span class="code-snippet__params">...</span></span><span class="code-snippet__function">)</span>{ ... }</span></code><code><span><span class="code-snippet__comment">// 补丁后：新增计<a href="https://www.elecfans.com/v/tag/949/" target="_blank"><u>数控</u></a>制</span></span></code><code><span><span class="code-snippet__function"><span class="code-snippet__built_in">int</span></span><span class="code-snippet__function"/><span class="code-snippet__function"><span class="code-snippet__title">rkcif_sensor_set_power</span></span><span class="code-snippet__function">(</span><span class="code-snippet__function"><span class="code-snippet__params"><span class="code-snippet__keyword">struct</span></span></span><span class="code-snippet__function"><span class="code-snippet__params">rkcif_stream *stream,</span></span><span class="code-snippet__function"><span class="code-snippet__params"><span class="code-snippet__built_in">int</span></span></span><span class="code-snippet__function"><span class="code-snippet__params"/></span><span class="code-snippet__function"><span class="code-snippet__params"><span class="code-snippet__keyword">on</span></span></span><span class="code-snippet__function">)</span>{</span></code><code><span> <span class="code-snippet__keyword">struct</span>rkcif_device *cif_dev = stream-&gt;cifdev;</span></code><code><span> </span></code><code><span> <span class="code-snippet__comment">// 断电：计数&gt;0时减1，未到0则不执行断电</span></span></code><code><span> <span class="code-snippet__keyword">if</span>(!<span class="code-snippet__keyword">on</span>&amp;&amp; atomic_dec_if_positive(&amp;cif_dev-&gt;sd_power_cnt))</span></code><code><span>   <span class="code-snippet__keyword">return</span><span class="code-snippet__number">0</span>;</span></code><code><span> <span class="code-snippet__comment">// 上电：计数+1后&gt;1，说明已有模块使用，不重复上电</span></span></code><code><span> <span class="code-snippet__keyword">if</span>(<span class="code-snippet__keyword">on</span>&amp;&amp; atomic_inc_return(&amp;cif_dev-&gt;sd_power_cnt) &gt;<span class="code-snippet__number">1</span>)</span></code><code><span>   <span class="code-snippet__keyword">return</span><span class="code-snippet__number">0</span>;</span></code><code><span> </span></code><code><span> <span class="code-snippet__comment">// 仅满足“首次上电”或“最后一次断电”，才操作Sensor电源</span></span></code><code><span> <span class="code-snippet__keyword">if</span>(cif_dev-&gt;terminal_sensor.sd)</span></code><code><span>    v4l2_subdev_call(..., core, s_power,<span class="code-snippet__keyword">on</span>);</span></code><code><span> <span class="code-snippet__keyword">return</span><span class="code-snippet__number">0</span>;</span></code><code><span>}</span></code></pre>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">修改</span></span></font><span><span style="background-color:rgb(255,255,255);">2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：调整</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">open/release</span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">中函数调用时机</span></span></font></span></b></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">将</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">rkcif_sensor_set_power</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">从</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">解锁后</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">移到</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">锁内</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，确保并发安全：</span></span></font></span></p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__comment">// open函数：锁内调用，避免并发计数错乱</span></span></code><code><span><span class="code-snippet__function"><span class="code-snippet__keyword">static</span></span><span class="code-snippet__function"/><span class="code-snippet__function"><span class="code-snippet__built_in">int</span></span><span class="code-snippet__function"/><span class="code-snippet__function"><span class="code-snippet__title">rkcif_fh_open</span></span><span class="code-snippet__function">(</span><span class="code-snippet__function"><span class="code-snippet__params">...</span></span><span class="code-snippet__function">)</span>{</span></code><code><span>  mutex_lock(&amp;cifdev-&gt;stream_lock);</span></code><code><span>  ret = rkcif_sensor_set_power(stream,<span class="code-snippet__keyword">on</span>);<span class="code-snippet__comment">// 补丁后：锁内调用</span></span></code><code><span>  mutex_unlock(&amp;cifdev-&gt;stream_lock);</span></code><code><span>}</span></code><code><span><span class="code-snippet__comment">// release函数：先断电计数，再释放资源</span></span></code><code><span><span class="code-snippet__function"><span class="code-snippet__keyword">static</span></span><span class="code-snippet__function"/><span class="code-snippet__function"><span class="code-snippet__built_in">int</span></span><span class="code-snippet__function"/><span class="code-snippet__function"><span class="code-snippet__title">rkcif_fh_release</span></span><span class="code-snippet__function">(</span><span class="code-snippet__function"><span class="code-snippet__params">...</span></span><span class="code-snippet__function">)</span>{</span></code><code><span>  mutex_lock(&amp;cifdev-&gt;stream_lock);</span></code><code><span>  ret = rkcif_sensor_set_power(stream,<span class="code-snippet__keyword">on</span>);<span class="code-snippet__comment">// 补丁后：锁内调用</span></span></code><code><span>  v4l2_pipeline_pm_put(...);<span class="code-snippet__comment">// 后释放资源</span></span></code><code><span>  mutex_unlock(&amp;cifdev-&gt;stream_lock);</span></code><code><span>}</span></code></pre>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><span><span style="background-color:rgb(255,255,255);">2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）</span></span></font></span></b><b><span style="font-family:Arial;font-weight:bold;font-size:14pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">dev.c</span></span></span></b><b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：初始化计数变量（路径：</span></span></font></span></b></h4>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><span><span style="background-color:rgb(255,255,255);">drivers/media/platform/rockchip/cif/dev.c</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）</span></span></font></span></b></h4>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">在</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">rkcif_plat_init</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">中新增</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">sd_power_cnt</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">初始化，确保计数从</span></span></font><span><span style="background-color:rgb(255,255,255);">0</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">开始：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__attribute">atomic_set</span>(&amp;cif_dev-&gt;power_cnt,<span class="code-snippet__number">0</span>);</span></code><code><span><span class="code-snippet__attribute">atomic_set</span>(&amp;cif_dev-&gt;streamoff_cnt,<span class="code-snippet__number">0</span>);</span></code><code><span><span class="code-snippet__attribute">atomic_set</span>(&amp;cif_dev-&gt;sensor_off,<span class="code-snippet__number">1</span>);</span></code><code><span><span class="code-snippet__attribute">atomic_set</span>(&amp;cif_dev-&gt;sd_power_cnt,<span class="code-snippet__number">0</span>); // 补丁新增：初始化Sensor电源计数</span></code></pre>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><span><span style="background-color:rgb(255,255,255);">3</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）</span></span></font></span></b><b><span style="font-family:Arial;font-weight:bold;font-size:14pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">dev.h</span></span></span></b><b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：声明变量与函数（路径：</span></span></font></span></b></h4>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><span><span style="background-color:rgb(255,255,255);">drivers/media/platform/rockchip/cif/dev.h</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）</span></span></font></span></b></h4>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">新增</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">sd_power_cnt</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">到</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">struct rkcif_device</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__keyword">struct</span><span class="code-snippet__title">rkcif_device</span>{</span></code><code><span> <span class="code-snippet__type">atomic_t</span>      power_cnt;</span></code><code><span> <span class="code-snippet__type">atomic_t</span>      streamoff_cnt;</span></code><code><span> <span class="code-snippet__type">atomic_t</span>      sensor_off;</span></code><code><span> <span class="code-snippet__type">atomic_t</span>      sd_power_cnt;<span class="code-snippet__comment">// 补丁新增：Sensor电源引用计数</span></span></code><code><span> <span class="code-snippet__comment">// ... 其他成员</span></span></code><code><span>};</span></code></pre>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">声明</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">rkcif_sensor_set_power</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">函数（因函数从</span></span></font><span><span style="background-color:rgb(255,255,255);">static</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">改为全局）：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__function"><span class="code-snippet__built_in">int</span></span><span class="code-snippet__function"/><span class="code-snippet__function"><span class="code-snippet__title">rkcif_sensor_set_power</span></span><span class="code-snippet__function">(</span><span class="code-snippet__function"><span class="code-snippet__params"><span class="code-snippet__keyword">struct</span></span></span><span class="code-snippet__function"><span class="code-snippet__params">rkcif_stream *stream,</span></span><span class="code-snippet__function"><span class="code-snippet__params"><span class="code-snippet__built_in">int</span></span></span><span class="code-snippet__function"><span class="code-snippet__params"/></span><span class="code-snippet__function"><span class="code-snippet__params"><span class="code-snippet__keyword">on</span></span></span><span class="code-snippet__function">)</span>;<span class="code-snippet__comment">// 补丁新增</span></span></code></pre>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><span><span style="background-color:rgb(255,255,255);">4</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）</span></span></font></span></b><b><span style="font-family:Arial;font-weight:bold;font-size:14pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">subdev-itf.c</span></span></span></b><b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：补全调用路径（路径：</span></span></font><span><span style="background-color:rgb(255,255,255);">drivers/media/platform/rockchip/cif/subdev-itf.c</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）</span></span></font></span></b></h4>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">在</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">sditf_s_power</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">中调用</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">rkcif_sensor_set_power</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">，确保该路径纳入计数管理：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__function"><span class="code-snippet__keyword">static</span></span><span class="code-snippet__function"/><span class="code-snippet__function"><span class="code-snippet__built_in">int</span></span><span class="code-snippet__function"/><span class="code-snippet__function"><span class="code-snippet__title">sditf_s_power</span></span><span class="code-snippet__function">(</span><span class="code-snippet__function"><span class="code-snippet__params">...</span></span><span class="code-snippet__function">)</span>{</span></code><code><span> <span class="code-snippet__comment">// ... 原有逻辑</span></span></code><code><span> <span class="code-snippet__keyword">if</span>(<span class="code-snippet__keyword">on</span>) {</span></code><code><span>    pm_runtime_get_sync(cif_dev-&gt;dev);</span></code><code><span>    ret |= rkcif_sensor_set_power(&amp;cif_dev-&gt;stream[<span class="code-snippet__number">0</span>],<span class="code-snippet__keyword">on</span>);<span class="code-snippet__comment">// 补丁新增</span></span></code><code><span>  }<span class="code-snippet__keyword">else</span>{</span></code><code><span>    pm_runtime_put_sync(cif_dev-&gt;dev);</span></code><code><span>    ret |= rkcif_sensor_set_power(&amp;cif_dev-&gt;stream[<span class="code-snippet__number">0</span>],<span class="code-snippet__keyword">on</span>);<span class="code-snippet__comment">// 补丁新增</span></span></code><code><span>  }</span></code><code><span> <span class="code-snippet__comment">// ... 原有逻辑</span></span></code><code><span>}</span></code></pre>
	<h3>
		<b><span style="font-family:Arial;font-weight:bold;font-size:15pt;"><span><span style="background-color:rgb(255,255,255);">4.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">修复价值：从</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">隐患</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">到</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">稳定</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font></span></b></h3>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">解决功能异常</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：多模块共用</span></span></font><span><span style="background-color:rgb(255,255,255);">Sensor</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">时，避免</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">一个模块退出导致整体崩溃</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">（如预览退出后录像仍正常）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">保护硬件寿命</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：避免重复上电导致</span></span></font><span><span style="background-color:rgb(255,255,255);">Sensor</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);"><a href="https://m.hqchip.com/app/1705" target="_blank"><u>电源模块</u></a>过热，延长硬件寿命。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">符合</span></span></font><span><span style="background-color:rgb(255,255,255);">V4L2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">规范</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：遵循</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">按需<a href="https://www.hqchip.com/app/1703" target="_blank"><u>开关电源</u></a></span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的框架要求，提升驱动兼容性。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h2>
		<b><span style="font-family:Arial;font-weight:bold;font-size:16pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">四、总结：驱动架构与补丁的启示</span></span></font></span></b></h2>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">Rockchip CIF</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">驱动通过</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">模块化设计</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">实现了功能解耦</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">——</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">dev.c</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">管全局、</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">subdev-itf.c</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">管交互、</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">capture.c</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">管执行、</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">procfs.c</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">管调试，这种架构既便于维护，又能灵活扩展（如新增</span></span></font><span><span style="background-color:rgb(255,255,255);">HDR</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">模式）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">而本次补丁则体现了</span></span></font></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">内核驱动开发的核心原则</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">1.</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">资源管理需</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">计数</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：多模块共享的资源（如</span></span></font><span><span style="background-color:rgb(255,255,255);">Sensor</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">电源），必须通过引用计数跟踪使用状态。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">2.</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">并发操作需</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">锁保护</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：关键逻辑（如计数修改）必须在互斥锁内执行，避免并发错乱。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">3.</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">调用路径需</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">全覆盖</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：确保所有触发点都经过统一逻辑，不遗漏任何场景。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">对于<a href="https://www.elecfans.com/v/tag/232/" target="_blank"><u>嵌入式开发</u></a>者而言，理解驱动架构是定位问题的基础，而补丁的修复思路则为</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">资源管理类问题</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">提供了通用参考</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">——</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">小到电源计数，大到内存管理，核心都是</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">清晰跟踪状态、规范操作流程</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">若你的设备基于</span></span></font><span><span style="background-color:rgb(255,255,255);">Rockchip</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">芯片且使用</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Kernel 6.1</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，建议及时合入该补丁，为摄像头稳定运行保驾护航～</span></span></font></span></p>
	<p>
		</p>
</div>
<div class="wx_detail">
	<p>
		</p>
</div>]]></description></item><item>    <title><![CDATA[解析MAX17523：4.2V至36V、1A电流限制器的卓越防护方案]]></title>    <link>https://www.elecfans.com/d/7641976.html</link>    <guid>https://www.elecfans.com/d/7641976.html</guid>    <pubDate>2026-02-06 16:50:00</pubDate>    <description><![CDATA[<input type="hidden" id="annex0_7641976" value="https://file1.elecfans.com/web2/M00/82/14/poYBAGOT8UOAVpsaAA7WNDOa6Wg251.pdf"/><h1>
	解析MAX17523/MAX17523A：4.2V至36V、1A<a href="https://www.elecfans.com/tags/电流/" target="_blank"><u>电流</u></a>限制器的卓越防护方案</h1>
<p>
	在电子设备的设计中，<a href="https://www.hqchip.com/app.html" target="_blank"><u>电源</u></a>保护至关重要，尤其是在面对过压、欠压和反向电压等复杂情况时。今天，我们来深入了解<a href="https://bbs.elecfans.com/group_65" target="_blank"><u>Analog</u></a> Devices推出的MAX17523/MAX17523A，这两款可调过压和过流保护器件，为系统提供了可靠的防护。</p>
<p>
	文件下载：<a href="javascript:;" data-annex="annex0_7641976" target="_blank">MAX17523.pdf</a></p>
<h2>
	产品概述</h2>
<p>
	MAX17523/MAX17523A属于Olympus系列IC，是业内最小且坚固的集成系统保护解决方案。它们能有效保护系统免受高达±40V的正、负输入电压故障影响，集成的FET具有低至190mΩ（典型值）的导通电阻 (R_{ON})。</p>
<h3>
	关键特性</h3>
<ol><li>
		<strong>宽输入电源范围</strong>：MAX17523的输入范围为+4.5V至+36V，MAX17523A为+4.2V至+36V，能适应多种电源环境。</li>
	<li>
		<strong>负输入耐受性</strong>：可承受-36V的负输入电压，增强了系统在复杂电源条件下的稳定性。</li>
	<li>
		<strong>低导通电阻</strong>：典型值为190mΩ的 (R_{ON})，能有效降低功耗，提高能源效率。</li>
	<li>
		<strong>反向电流控制</strong>：具备反向电流控制输入，可防止反向电流对系统造成损害。</li>
	<li>
		<strong>热过载保护</strong>：在温度过高时自动保护，确保器件在恶劣环境下的可靠性。</li>
	<li>
		<strong>宽温度范围</strong>：工作温度范围为-40°C至+125°C，适用于各种工业和恶劣环境。</li>
</ol><h3>
	灵活设计选项</h3>
<ol><li>
		<strong>可调OVLO和UVLO阈值</strong>：通过外部<a href="https://www.hqchip.com/app/485" target="_blank"><u>电阻</u></a>可灵活设置过压锁定（OVLO）和欠压锁定（UVLO）阈值，满足不同应用的需求。</li>
	<li>
		<strong>可<a href="https://bbs.elecfans.com/group_75" target="_blank"><u>编程</u></a>正向电流限制</strong>：电流限制范围为0.15A至1A，可根据实际应用进行精确调整。</li>
	<li>
		<strong>可编程过流故障响应</strong>：支持自动重试、锁存关闭和连续三种模式，增强了系统的容错能力。</li>
	<li>
		<strong>双使能输入</strong>：EN和<a href="https://www.elecfans.com/v/tag/873/" target="_blank"><u>高压</u></a>HVEN输入，方便用户进行灵活的控制。</li>
</ol><h2>
	<a href="https://m.elecfans.com/v/tag/2364/" target="_blank"><u>电气</u></a>特性</h2>
<h3>
	输入电压和电流</h3>
<p>
	MAX17523A的输入电压范围为4.2V至36V，MAX17523为4.5V至36V。在关机状态下，输入电流和输出电流都非常低，能有效降低功耗。</p>
<h3>
	过压和欠压保护</h3>
<p>
	内部过压跳闸电平典型值为33V，欠压跳闸电平典型值为19V。外部OVLO和UVLO可通过外部电阻进行调整，调整范围分别为6V至36V和4.2V（MAX17523A）/4.4V（MAX17523）至24V。</p>
<h3>
	电流限制</h3>
<p>
	电流限制调整范围为0.15A至1A，在不同电流范围内具有较高的精度。当电流达到阈值时，器件会根据设置的模式进行相应的响应。</p>
<h3>
	其他特性</h3>
<p>
	还具备CLHS电压、FLAG断言压降阈值、反向电流阻断阈值等特性，确保系统在各种情况下的稳定运行。</p>
<h2>
	工作模式</h2>
<h3>
	自动重试模式</h3>
<p>
	当电流达到阈值时，开始计时 (t<em>{BLANK})。如果过流情况持续超过 (t</em>{BLANK})，FLAG会断言。在 (t<em>{BLANK}) 结束后，开始重试时间 (t</em>{RETRY})，期间FET关闭。重试结束后，FET再次开启。若故障仍存在，循环继续；故障消除后，FET保持开启。这种模式能有效降低过流或短路情况下的系统功耗。</p>
<h3>
	锁存关闭模式</h3>
<p>
	当电流达到阈值且过流情况持续超过 (t_{BLANK})，开关关闭并保持关闭状态。要重置开关，可通过切换控制逻辑EN或HVEN，或循环输入电压。</p>
<h3>
	连续模式</h3>
<p>
	当电流达到阈值时，器件将输出电流限制在编程的电流限制值。过流情况持续超过 (t_{BLANK}) 时，FLAG断言；过载情况消除后，FLAG解除断言。</p>
<h2>
	应用指南</h2>
<h3>
	设置电流限制</h3>
<p>
	通过从SE<a href="https://www.elecfans.com/tags/ti/" target="_blank"><u>TI</u></a>到地连接一个电阻来编程电流限制值。计算公式为 (R<em>{SETI}(k Omega)=fr<a href="https://m.hqchip.com/app/1703" target="_blank"><u>ac</u></a>{6100}{I</em>{LIM}(mA)})。</p>
<h3>
	输入旁路<a href="https://www.elecfans.com/tags/电容/" target="_blank"><u>电容</u></a></h3>
<p>
	在IN和GND之间连接至少0.47µF的电容，以限制瞬间输出短路时的输入电压降。电容值越大，输入电压的下冲越小。</p>
<h3>
	热插拔保护</h3>
<p>
	在热插拔应用中，建议使用瞬态电压抑制器（<a href="https://www.hqchip.com/app/1587" target="_blank"><u>TVS</u></a>）来保护系统，防止输入电压过冲损坏器件。</p>
<h3>
	输出电容</h3>
<p>
	为确保在全温度范围和可编程电流限制范围内的稳定运行，在OUT和地之间连接4.7µF的陶瓷电容。可通过公式 (C<em>{MAX }(mu F)=frac{I</em>{LIM}(mA) × t<em>{BLANK(TYP)}(ms)}{V</em>{IN}(V)}) 计算最大电容负载。</p>
<h3>
	输出续流<a href="https://www.hqchip.com/app/1554" target="_blank"><u>二极管</u></a></h3>
<p>
	在需要保护电感负载或长电缆免受突然短路影响的应用中，建议在OUT<a href="https://www.hqchip.com/app/1529" target="_blank"><u>端子</u></a>和地之间连接一个<a href="https://www.hqchip.com/app/1558" target="_blank"><u>肖特基</u></a>二极管，以防止短路时的负尖峰。</p>
<h3>
	布局和散热</h3>
<p>
	为优化开关对输出短路情况的响应时间，应尽量缩短所有走线，减少寄生电感的影响。将输入和输出电容尽可能靠近器件放置，IN和OUT用宽而短的走线连接到电源总线。同时，建议使用热过孔将散热垫连接到接地平面，以增加系统的热容量，降低热阻。</p>
<h2>
	总结</h2>
<p>
	MAX17523/MAX17523A凭借其卓越的性能和灵活的设计选项，为<a href="https://m.elecfans.com/v/tag/125/" target="_blank"><u>电子工程师</u></a>提供了一个可靠的电源保护解决方案。无论是在<a href="https://m.elecfans.com/v/tag/117/" target="_blank"><u>传感器</u></a>系统、工厂传感器还是过程分析等应用中，都能发挥重要作用。在实际设计中，<a href="https://bbs.elecfans.com/zhuti_lecture_1.html" target="_blank"><u>工程师</u></a>们需要根据具体的应用需求，合理设置各项参数，优化布局和散热，以确保系统的稳定性和可靠性。你在实际应用中是否遇到过类似的电源保护问题？你是如何解决的呢？欢迎在评论区分享你的经验和见解。</p>]]></description></item><item>    <title><![CDATA[基于灵动MM32F0140微控制器的汽车传感控制]]></title>    <link>https://www.elecfans.com/d/7641978.html</link>    <guid>https://www.elecfans.com/d/7641978.html</guid>    <pubDate>2026-02-06 16:51:00</pubDate>    <description><![CDATA[<p>
	在现代<a href="https://bbs.elecfans.com/group_78" target="_blank"><u>汽车电子</u></a>系统中，各类<a href="https://www.elecfans.com/v/tag/117/" target="_blank"><u>传感器</u></a>模块需要通过高效可靠的车身总线与主控单元进行<a href="https://www.elecfans.com/v/tag/1301/" target="_blank"><u>通信</u></a>，以实现整车状态的实时监控与智能控制。<a href="https://www.hqchip.com/app/1380" target="_blank"><u>微控制器</u></a>作为传感控制节点的“大脑”，其性能与可靠性直接影响系统的整体表现。英尚微基于灵动<a href="https://bbs.elecfans.com/group_864" target="_blank"><u>MM32</u></a>F0140微控制器的汽车传感控制方案凭借其高性能内核、丰富外设、车规级可靠性及宽温宽压支持，成为汽车传感控制应用的理想核心部件。</p>
<p>
	<br/>
	灵动MM32F0140系列微控制器专为汽车及<a href="https://www.elecfans.com/v/tag/204/" target="_blank"><u>工业控制</u></a>场景设计，提供MM32F0144C6P与MM32F0144C6PV两种型号可选，后者更支持高达105℃的工作温度，能够适应汽车引擎舱等高温严苛环境。该系列器件以高性能<a href="https://m.hqchip.com/app/1378" target="_blank"><u>Arm</u></a>®Cortex-M0为内核，主频最高达72MHz，配合64KB Flash与8KB S<a href="https://www.elecfans.com/tags/ram/" target="_blank"><u>RAM</u></a>，可为复杂的传感信号处理与通信协议运行提供充足的运算与存储资源。</p>
<p>
	<img src="https://file1.elecfans.com/web3/M00/4B/14/wKgZO2mFq0uACKZYAAG47pKpdeA016.png" alt="wKgZO2mFq0uACKZYAAG47pKpdeA016.png"/></p>
<p>
	<br/>
	在汽车传感信号采集方面，MM32F0140集成高采样率12位<a href="https://www.elecfans.com/tags/adc/" target="_blank"><u>ADC</u></a>及<a href="https://www.elecfans.com/analog/" target="_blank"><u>模拟</u></a><a href="https://m.hqchip.com/app/1737" target="_blank"><u>比较器</u></a>，能够对传感器输出的<a href="https://www.elecfans.com/tags/电流/" target="_blank"><u>电流</u></a>、电压及温度信号进行实时、精准的采集与监控。其宽电压供电范围（2.0V-5.5V）适应多种车载<a href="https://www.hqchip.com/app.html" target="_blank"><u>电源</u></a>条件，增强系统供电适应性。同时，该系列微控制器内置丰富的<a href="https://www.elecfans.com/v/tag/13179/" target="_blank"><u>通信接口</u></a>，特别是支持高性能Flex<a href="https://www.hqchip.com/app/2004" target="_blank"><u>CAN</u></a>总线，可稳定实现与车身主机及其他ECU之间的可靠数据交互，满足汽车网络通信的实时性与抗干扰要求。</p>
<p>
	<br/>
	MM32F0140在可靠性方面表现出色：具备±6000V HBM <a href="https://m.hqchip.com/app/1587" target="_blank"><u>ESD</u></a>与±2000V CDM ESD防护能力，高温闩锁耐受电流可达±300mA，有效提升系统在<a href="https://m.elecfans.com/v/tag/2364/" target="_blank"><u>电气</u></a>恶劣环境下的稳定运行能力。器件还配备多个<a href="https://www.elecfans.com/tags/定时器/" target="_blank"><u>定时器</u></a>（包括16位通用、32位通用及高级定时器）、3路<a href="https://www.elecfans.com/tags/uart/" target="_blank"><u>UART</u></a>、2路SPI及1路<a href="https://www.elecfans.com/tags/i2c/" target="_blank"><u>I2C</u></a><a href="https://m.hqchip.com/app/1787" target="_blank"><u>接口</u></a>，支持多传感器同步管理与数据整合。</p>
<p>
	<br/>
	深圳市英尚微电子有限公司，是一个可靠的电子元件与存储技术合作伙伴。我们连接原厂资源，专注于存储芯片、<a href="https://www.hqchip.com/gongsi.html" target="_blank"><u>半导体</u></a>产品、<a href="https://www.hqchip.com/app/1379" target="_blank"><u>单片机</u></a>、<a href="https://www.elecfans.com/tags/蓝牙/" target="_blank"><u>蓝牙</u></a>芯片及微动开关的供应与解决方案设计。如果您想了解更多，请搜索我司进行了解。<br/><br/>
	审核编辑 黄宇</p>]]></description></item><item>    <title><![CDATA[虚拟电厂：赋能“十五五”新型电力系统的数字革命]]></title>    <link>https://www.elecfans.com/d/7641979.html</link>    <guid>https://www.elecfans.com/d/7641979.html</guid>    <pubDate>2026-02-06 16:51:00</pubDate>    <description><![CDATA[<p>
	随着“十五五”规划的蓝图徐徐展开，构建清洁低碳、安全高效的新型能源体系成为关系中国长远发展的核心战略。在这个宏大转型中，一种名为“虚拟电厂”的创新模式正从技术概念加速迈向产业实践，成为撬动<a href="https://m.elecfans.com/v/tag/4675/" target="_blank"><u>电力系统</u></a>深刻变革的关键支点。它不建厂房、不烧燃料，却凭借数字化的聚合与调控能力，将散落在千家万户、工厂园区的碎片化电力资源，整合成一个能够与电网智能互动的“超级电厂”-3。这不仅是能源技术的革新，更是对传统电力生产与消费关系的重塑，为“十五五”期间推动经济社会全面绿色转型、实现“双碳”目标提供了极具想象力的解决方案。19821800313</p>
<p>
	虚拟电厂的崛起，有着深刻且紧迫的时代背景。当前，中国电力系统正面临双重结构性挑战：一方面，以风电、光伏为代表的<a href="https://m.elecfans.com/v/tag/293/" target="_blank"><u>新能源</u></a>已成为第一大电源，但其“靠天吃饭”的波动性与间歇性，给电网稳定运行带来巨大压力；另一方面，尖峰用电负荷屡创新高，但为满足每年仅有几十小时的峰值需求而大规模投资建设实体发电和输电设施，不仅代价高昂，更会导致设备利用率低下。</p>
<p>
	虚拟电厂正是破局的关键。其核心价值在于，以极低的成本，唤醒沉睡在需求侧的“弹性”。它通过先进的<a href="https://bbs.elecfans.com/group_57" target="_blank"><u>物联网</u></a>、<a href="https://www.elecfans.com/v/tag/150/" target="_blank"><u>人工智能</u></a>和<a href="https://www.elecfans.com/soft/data/43-44/" target="_blank"><u>通信技术</u></a>，将工商业可调节负荷（如空调、生产线）、楼宇储能、电动汽车<a href="https://www.elecfans.com/tags/充电桩/" target="_blank"><u>充电桩</u></a>、分布式光伏乃至家庭用电器等海量、分散的资源聚合起来。当电网需要时，它可以“一声令下”，让这些资源在短时间内统一减少用电或增加发电（如储能放电、电动汽车反送电），瞬间形成一个提供电力或削减负荷的“虚拟机组”。</p>
<p>
	“十五五”开局之年，虚拟电厂的发展告别了早期的零星试点，迎来了国家层面的系统性规划和强力驱动。2025年4月，国家发展改革委、国家能源局联合印发的《关于加快推进虚拟电厂发展的指导意见》，为“十五五”时期虚拟电厂的规模化发展定下了总基调、描绘了路线图。</p>
<p>
	这份纲领性文件明确了两个量化目标：到2027年，全国虚拟电厂调节能力要达到2000万千瓦以上；到2030年，这一数字将提升至5000万千瓦以上。这一规模，相当于数个大型核电基地的装机容量，标志着虚拟电厂将从“示范盆景”发展为“产业森林”。</p>
<p>
	更重要的是，《指导意见》从三个维度为产业发展扫清了障碍：</p>
<p>
	1. 电网侧：安全运行与清洁消纳的 “双重压力”</p>
<p>
	随着风电、光伏等新能源占比提升，电力系统呈现 “双高”（高比例可再生能源、高比例<a href="https://bbs.elecfans.com/group_934" target="_blank"><u>电力电子</u></a>设备）“双随机”（发电侧随机、用电侧随机）特征：</p>
<p>
	• 发电侧：光伏白天出力强、夜间为零，风电受风速影响波动大，导致电网供需 “错配”，极端情况下可能引发电压闪变、线路阻塞；</p>
<p>
	• 用电侧：充电桩、数据<a href="https://www.hqchip.com/tags" target="_blank"><u>中心</u></a>等负荷增长快，峰谷差拉大（比如夏季午后用电高峰、夜间低谷），电网调峰压力剧增。</p>
<p>
	<img src="https://file1.elecfans.com//web3/M00/4B/14/wKgZO2mFq52AIJfHAAD9gprDWlY92.jpeg" alt="wKgZO2mFq52AIJfHAAD9gprDWlY92.jpeg"/></p>
<p>
	2. 企业侧：用能成本高与管理难的 “双重困扰”</p>
<p>
	对于工商业企业而言，能源管理面临现实难题：</p>
<p>
	• 成本高：传统用能模式粗放，峰谷电价差下无法合理避峰，且新能源消纳率低（比如自建光伏无法全部自用，多余电力难并网）；</p>
<p>
	• 管理散：车间空调、空压机、照明等负荷 “各自运行”，缺乏统一监测，能效优化无从下手。</p>
<p>
	3. 分布式能源侧：“小而散” 导致的 “价值流失”</p>
<p>
	分布式光伏、家庭储能等小型能源资源，面临 “准入难、收益少” 的问题：</p>
<p>
	• 市场准入难：单个分布式光伏装机量小，不符合电力市场交易的 “门槛”，无法参与辅助服务、需求响应等获取额外收益；</p>
<p>
	• 管理效率低：分散在各地的分布式资源缺乏统一调度，其间歇性不仅难以发挥价值，反而给局部电网带来负担。</p>
<p>
	<img src="https://file1.elecfans.com//web3/M00/4B/14/wKgZPGmFq52ADl1gAADNq4UMidU84.jpeg" alt="wKgZPGmFq52ADl1gAADNq4UMidU84.jpeg"/></p>
<p>
	针对上述痛点，安科瑞构建了 “从资源聚合到智能调度，从市场交易到收益结算” 的全链条解决方案，核心是通过 “端、边、云” 协同，让分散资源形成 “合力”。</p>
<p>
	<img src="https://file1.elecfans.com//web3/M00/4B/14/wKgZO2mFq56AQRH4AAFXXyPJoy044.jpeg" alt="wKgZO2mFq56AQRH4AAFXXyPJoy044.jpeg"/></p>
<p>
	1. 底层支撑：“云管边端” 的技术架构</p>
<p>
	安科瑞的虚拟电厂并非单一平台，而是基于其成熟的 “云 - 管 - 边 - 端” 能源互联网生态搭建，确保数据能通、指令能达、调控精准：</p>
<p>
	• 端（终端感知）：覆盖各类能源设备的 “神经末梢”，包括多功能电表、电能质量分析仪、<a href="https://m.elecfans.com/v/tag/2364/" target="_blank"><u>电气</u></a>防火保护器、<a href="https://www.elecfans.com/tags/温度传感器/" target="_blank"><u>温度传感器</u></a>等，实时采集光伏发电量、储能 SOC（剩余电量）、负荷功率等数据；</p>
<p>
	• 边（边缘计算）：通过 ANet 通讯管理机、物联网网关等设备，实现不同协议（Modbus、MQTT 等）的转换，将 “端” 采集的数据标准化后上传，同时接收云端下发的控制指令，就近调控设备；</p>
<p>
	• 管（数据传输）：依托光纤、无线公网（<a href="https://m.elecfans.com/v/tag/9979/" target="_blank"><u>4G</u></a>/<a href="https://m.elecfans.com/v/tag/1225/" target="_blank"><u>5G</u></a>）、<a href="https://www.elecfans.com/tags/lora/" target="_blank"><u>LoRa</u></a> 等网络，保障数据在 “端 - 边 - 云” 之间稳定传输，避免延迟或中断；</p>
<p>
	• 云（平台中枢）：以 EMS3.0 智慧能源管理平台为核心，承担数据汇总、智能分析、调度控制、交易对接的 “大脑” 功能，可接入华为云、阿里云等第三方平台，兼容多场景需求。</p>
<p>
	<img src="https://file1.elecfans.com//web3/M00/4B/14/wKgZPGmFq56ATh4TAADnU6dKZD848.jpeg" alt="wKgZPGmFq56ATh4TAADnU6dKZD848.jpeg"/></p>
<p>
	2. 核心动作：“源网荷储充” 的资源聚合</p>
<p>
	虚拟电厂的关键是 “聚合资源”，安科瑞将分散的 “源、网、荷、储、充” 资源整合为可调度的 “虚拟机组”，具体包括：</p>
<p>
	• “源”：分布式发电资源</p>
<p>
	整合分布式光伏、风电、微型燃气轮机等，通过光伏监控系统实现发电量监测、功率控制（比如电网负荷高时，优先消纳光伏电力），解决新能源 “消纳难” 问题。例如，某工业园区的屋顶光伏通过安科瑞方案聚合后，自用率提升 30%，多余电力可参与电网调峰。</p>
<p>
	<img src="https://file1.elecfans.com//web3/M00/4B/14/wKgZO2mFq5-AcrNZAAEVIX7aAhc38.jpeg" alt="wKgZO2mFq5-AcrNZAAEVIX7aAhc38.jpeg"/></p>
<p>
	• “储”：多场景储能资源</p>
<p>
	覆盖工商业储能、家庭储能、V2G 电动汽车，通过储能管理系统实现充放电策略优化 —— 峰时（电价高）放电赚钱，谷时（电价低）充电储能，同时作为电网的 “应急缓冲”。比如，某商业综合体的 107kWh 储能系统，通过峰谷套利年均收益超 5 万元。</p>
<p>
	<img src="https://file1.elecfans.com//web3/M00/4B/14/wKgZPGmFq5-AEp9IAADPLe0WG1083.jpeg" alt="wKgZPGmFq5-AEp9IAADPLe0WG1083.jpeg"/></p>
<p>
	• “荷”：可调负荷资源</p>
<p>
	针对空调、照明、充电桩、空压机等负荷，在不影响使用的前提下实现 “柔性调控”：</p>
<p>
	◦ 空调：通过 <a href="https://www.elecfans.com/tags/ai/" target="_blank"><u>AI</u></a> 能效监控箱预测冷负荷，动态调整主机、水泵运行参数，夏季高峰可短暂下调 5%-10% 负荷，不影响舒适度；</p>
<p>
	<img src="https://file1.elecfans.com//web3/M00/4B/14/wKgZO2mFq5-AYrFlAAJH4DiP1nU14.jpeg" alt="wKgZO2mFq5-AYrFlAAJH4DiP1nU14.jpeg"/></p>
<p>
	◦ 充电桩：采用有序充电策略，电网负荷高时降低充电功率，低谷时提速，既保障电网稳定，又不耽误车主充电；</p>
<p>
	<img src="https://file1.elecfans.com//web3/M00/4B/14/wKgZPGmFq6CAafkpAAOymxFTC6g55.jpeg" alt="wKgZPGmFq6CAafkpAAOymxFTC6g55.jpeg"/></p>
<p>
	◦ 照明：通过智能开关<a href="https://m.hqchip.com/app/1847" target="_blank"><u>驱动器</u></a>实现分区域、定时控制，公共区域可根据人流调整亮度，节能率达 15%-30%。</p>
<p>
	<img src="https://file1.elecfans.com//web3/M00/4B/14/wKgZO2mFq6CAfhJnAAIOqlM0pV865.jpeg" alt="wKgZO2mFq6CAfhJnAAIOqlM0pV865.jpeg"/></p>
<p>
	• “充”：充电网络资源</p>
<p>
	聚合分散的直流 / 交流充电桩，通过充电桩运营管理平台实现 “统一调度”，比如电网峰时减少充电负荷，参与需求响应获取补贴（如深圳的 5 元 / 千瓦时响应补贴）。</p>
<p>
	<img src="https://file1.elecfans.com//web3/M00/4B/14/wKgZPGmFq6GAail_AAC9pdRWQCo54.jpeg" alt="wKgZPGmFq6GAail_AAC9pdRWQCo54.jpeg"/></p>
<p>
	3. 关键功能：覆盖 “监测 - 调度 - 交易 - 结算” 全流程</p>
<p>
	安科瑞 EMS3.0 平台通过五大核心功能，让虚拟电厂 “能运行、能赚钱、能管理”：</p>
<p>
	• 实时监测与预测：汇聚所有资源的运行数据，形成 “能源全景图”，同时基于气象数据、历史负荷，预测未来 4 小时 - 7 天的光伏出力、用电负荷，准确率达 90% 以上；</p>
<p>
	<img src="https://file1.elecfans.com//web3/M00/4B/14/wKgZO2mFq6GAD4xzAAHfD3bIEjw00.jpeg" alt="wKgZO2mFq6GAD4xzAAHfD3bIEjw00.jpeg"/></p>
<p>
	• 智能调度控制：根据电网需求（如削峰、填谷、应急响应），自动分解调控目标，下发指令到终端设备。例如，电网发布 “削峰指令” 后，平台会优先让储能放电，再适度下调空调、充电桩负荷，确保响应达标；</p>
<p>
	<img src="https://file1.elecfans.com//web3/M00/4B/14/wKgZPGmFq6GAeB2hAAHyQJiNnTY01.jpeg" alt="wKgZPGmFq6GAeB2hAAHyQJiNnTY01.jpeg"/></p>
<p>
	• 市场交易对接：作为 “桥梁” 连接资源与电力市场，帮助聚合后的资源参与需求响应、辅助服务（如调频、备用）、电能量交易，原本 “进不了市场” 的分布式资源，通过虚拟电厂可获得额外收益；</p>
<p>
	<img src="https://file1.elecfans.com//web3/M00/4B/14/wKgZO2mFq6KAcS6-AAEIs60V4Y078.jpeg" alt="wKgZO2mFq6KAcS6-AAEIs60V4Y078.jpeg"/></p>
<p>
	• 响应评估与考核：自动测算响应基线（比如未调控时的正常负荷）、实际响应曲线，计算偏差率（若偏差超标的考核金额），确保响应符合电网要求；</p>
<p>
	<img src="https://file1.elecfans.com//web3/M00/4B/14/wKgZPGmFq6OAIHZ8AAD_vTjQnL864.jpeg" alt="wKgZPGmFq6OAIHZ8AAD_vTjQnL864.jpeg"/></p>
<p>
	• 收益结算与反馈：清晰统计各参与方（企业、储能业主）的收益（如峰谷套利收益、需求响应补贴），生成数字账单，让收益分配透明可查。</p>
<p>
	未来路径：政策与市场双轮深化随着全国统一电力市场建设加速，虚拟电厂将逐步纳入现货市场、辅助服务市场与碳市场联动机制。通过市场机制和数字技术，将每一个电力用户从被动的消费者，转变为积极的产销者和系统稳定运行的参与者。安科瑞系统深度契合政策对“可观、可测、可调、可控”的刚性要求，为用户合规参与需求响应、容量补偿与绿电交易提供全链条技术保障。</p>
<p>
	审核编辑 黄宇</p>]]></description></item><item>    <title><![CDATA[拆解RK3568启动日志：Debian12+Linux6.1下的调试密码，初学者也能看懂]]></title>    <link>https://www.elecfans.com/d/7401325.html</link>    <guid>https://www.elecfans.com/d/7401325.html</guid>    <pubDate>2026-02-06 16:52:00</pubDate>    <description><![CDATA[<div class="rich_media_content js_underline_content autoTypeSetting24psection">
	<h1>
		</h1>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">在<a href="https://www.elecfans.com/v/tag/232/" target="_blank"><u>嵌入式开发</u></a>中，</span></span></font></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">启动日志（</span></span></font><span><span style="background-color:rgb(255,255,255);">Boot Log</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）</span></span></font></span></b><span><span><span style="background-color:rgb(255,255,255);"/></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">是硬件调试、驱动开发、系统优化的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">第一手资料</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">。尤其是基于<a href="https://bbs.elecfans.com/zhuti_1179_1.html" target="_blank"><u>瑞芯微</u></a></span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">RK3568</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">（四核</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">A55</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，主打边缘计算、<a href="https://bbs.elecfans.com/group_57" target="_blank"><u>物联网</u></a>设备）的方案，搭配</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Debian12</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">系统与</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);"><a href="https://bbs.elecfans.com/group_300" target="_blank"><u>Linux</u></a>6.1</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">内核时，启动日志能直观反映从硬件初始化到用户登录的全流程。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">本文将逐段解析</span></span></font><span><span style="background-color:rgb(255,255,255);">RK3568</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">的启动日志，带你看懂每个阶段的关键信息，理解其对<a href="https://bbs.elecfans.com/group_1231" target="_blank"><u>开发者</u></a>的价值，并教会初学者如何利用日志定位问题。文末附启动流程图和脑图，帮你建立系统化认知。</span></span></font></span></p>
	<img src="https://file1.elecfans.com//web3/M00/3C/92/wKgZPGkaixeAebPbAACpobgZqkc950.png" alt="wKgZPGkaixeAebPbAACpobgZqkc950.png"/><h2>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">一、启动日志全解析：从硬件到系统的</span></span></font><span><span style="background-color:rgb(255,255,255);">9</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">个关键阶段</span></span></font></span></b></h2>
	<p>
		</p>
	<p>
		<span><span><span style="background-color:rgb(255,255,255);">RK3568</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">的启动流程遵循</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">硬件初始化</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">→</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">引导程序</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">→</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">内核加载</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">→</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">用户态启动</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的<a href="https://www.elecfans.com/soft/data/21-22/" target="_blank"><u>嵌入式</u></a>标准逻辑，日志中每个阶段都有明确的标识，我们按时间线拆解：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">阶段</span></span></font><span><span style="background-color:rgb(255,255,255);">1</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);"><a href="https://www.hqchip.com/app/1729" target="_blank"><u>DDR</u></a></span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">内存初始化（硬件调试核心）</span></span></font></span></b></h3>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">启动的第一步是初始化</span></span></font><span><span style="background-color:rgb(255,255,255);">DDR</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（内存），这是硬件能否正常工作的基础，日志中对应开头的</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">DDR</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">相关配置：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__attribute">LPDDR4X</span>,<span class="code-snippet__number">324</span>MHz</span></code><code><span><span class="code-snippet__attribute">BW</span>=<span class="code-snippet__number">32</span>Col=<span class="code-snippet__number">10</span>Bk=<span class="code-snippet__number">8</span>CS0 Row=<span class="code-snippet__number">16</span>CS1 Row=<span class="code-snippet__number">16</span>CS=<span class="code-snippet__number">2</span>Die BW=<span class="code-snippet__number">16</span>Size=<span class="code-snippet__number">4096</span>MB</span></code><code><span><span class="code-snippet__attribute">change</span>to<span class="code-snippet__number">324</span>MHz →<span class="code-snippet__number">528</span>MHz →<span class="code-snippet__number">780</span>MHz →<span class="code-snippet__number">1560</span>MHz(final freq)</span></code><code><span><span class="code-snippet__attribute"><a href="https://www.elecfans.com/v/tag/3668/" target="_blank"><u>vr</u></a>efinner16</span>%, vrefout22% （<a href="https://m.hqchip.com/app/1701" target="_blank"><u>电压基准</u></a>参数）</span></code><code><span><span class="code-snippet__attribute">clk</span>skew0x26 （<a href="https://www.elecfans.com/tags/时钟/" target="_blank"><u>时钟</u></a>偏移）</span></code></pre>
	<p>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">关键信息</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">内存类型：</span></span></font><span><span style="background-color:rgb(255,255,255);">LPDDR4X</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">，容量</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);"><a href="https://m.elecfans.com/v/tag/9979/" target="_blank"><u>4G</u></a>B</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">（符合</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">RK3568</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的硬件规格）；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">频率切换：从</span></span></font><span><span style="background-color:rgb(255,255,255);">324MHz</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（初始）逐步升频到</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">1560MHz</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">（最终工作频率），需确认硬件供电是否能支撑高频；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">时序参数：</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">clk skew</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（时钟偏移）、</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">vref</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（电压基准）直接影响内存稳定性，若后续出现</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">内存报错</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，需优先检查这些参数。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">阶段</span></span></font><span><span style="background-color:rgb(255,255,255);">2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">SPL</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">引导（次级程序加载器）</span></span></font></span></b></h3>
	<p>
		</p>
	<p>
		<span><span><span style="background-color:rgb(255,255,255);">SPL</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Secondary Prog<a href="https://www.elecfans.com/tags/ram/" target="_blank"><u>ram</u></a> Lo<a href="https://bbs.elecfans.com/zhuti_1472_1.html" target="_blank"><u>ad</u></a>er</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）是</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">迷你引导程序</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，负责初始化基础硬件（如</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">MMC</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">SPI</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）并加载主</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">U-Boot</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，日志中对应：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__attribute">U</span>-Boot SPL<span class="code-snippet__number">2017</span>.<span class="code-snippet__number">09</span>(Oct<span class="code-snippet__number">02</span><span class="code-snippet__number">2025</span>-<span class="code-snippet__number">132555</span>)</span></code><code><span><span class="code-snippet__attribute">sfc</span>cmd=<span class="code-snippet__number">9</span>fH(<span class="code-snippet__number">6</span>BH-x4) → unknown raw ID<span class="code-snippet__number">0</span><span class="code-snippet__number">0</span><span class="code-snippet__number">0</span>（SPI Flash识别失败）</span></code><code><span><span class="code-snippet__attribute">Trying</span>to boot from MMC2 → MMC no card present （MMC2无卡）</span></code><code><span><span class="code-snippet__attribute">Trying</span>to boot from MMC1 → SPL AB-slot _a, successful<span class="code-snippet__number">0</span>, tries-remain<span class="code-snippet__number">7</span>（MMC1成功）</span></code></pre>
	<p>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">关键信息</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">启动介质优先级：</span></span></font><span><span style="background-color:rgb(255,255,255);">SPL</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">先尝试</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">SPI Flash</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">（失败），再试</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">MMC2</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">（无卡），最后</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">MMC1</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">（成功），开发者可通过修改</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">U-Boot</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">配置调整优先级；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><span><span style="background-color:rgb(255,255,255);">AB-slot</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">MMC1</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">支持</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“AB</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">分区启动</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);"><a href="https://bbs.elecfans.com/group_360" target="_blank"><u>Android</u></a></span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">常用的双系统备份机制），此处尝试</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">_slot_a</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，适合需要高可靠性的设备。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">阶段</span></span></font><span><span style="background-color:rgb(255,255,255);">3</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">U-Boot</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">与安全固件（</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">BL31+OP-<a href="https://www.elecfans.com/tags/te/" target="_blank"><u>TE</u></a>E</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）</span></span></font></span></b></h3>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">主</span></span></font><span><span style="background-color:rgb(255,255,255);">U-Boot</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">启动后，会加载</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);"><a href="https://m.hqchip.com/app/1378" target="_blank"><u>ARM</u></a></span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">可信固件（</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">BL31</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）和安全<a href="https://www.elecfans.com/v/tag/527/" target="_blank"><u>操作系统</u></a>（</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">OP-TEE</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">），这是嵌入式设备</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">安全启动</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的核心：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__attribute">NO<a href="https://bbs.elecfans.com/group_715" target="_blank"><u>TI</u></a>CE</span> BL31 v2.<span class="code-snippet__number">3</span>()v2.<span class="code-snippet__number">3</span>-<span class="code-snippet__number">645</span>-g8cea6ab0bcl, fwver v1.<span class="code-snippet__number">44</span>（ATF版本）</span></code><code><span><span class="code-snippet__attribute">ITC</span>OP-TEE version<span class="code-snippet__number">3</span>.<span class="code-snippet__number">13</span>.<span class="code-snippet__number">0</span>-<span class="code-snippet__number">860</span>-g6c78a7d8c （OP-TEE版本）</span></code><code><span><span class="code-snippet__attribute">INFO</span>  Using opteed sec <a href="https://m.elecfans.com/v/tag/132/" target="_blank"><u>cpu</u></a>_context! （启用安全上下文）</span></code><code><span><span class="code-snippet__attribute">Jumping</span>to U-Boot(<span class="code-snippet__number">0</span>x00a00000) via ARM Trusted Firmware(<span class="code-snippet__number">0</span>x00040000)</span></code></pre>
	<p>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">关键信息</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">安全组件版本：</span></span></font><span><span style="background-color:rgb(255,255,255);">BL31</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">v1.44</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）和</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">OP-TEE</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">v3.13.0</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）需与内核、</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">U-Boot</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">版本兼容，否则会出现</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">启动卡死</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">跳转地址：</span></span></font><span><span style="background-color:rgb(255,255,255);">U-Boot</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">加载到</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">0x00a00000</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">BL31</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">在</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">0x00040000</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，需确认内存地址分配无冲突。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">阶段</span></span></font><span><span style="background-color:rgb(255,255,255);">4</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Linux</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">内核启动（驱动与硬件适配）</span></span></font></span></b></h3>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">内核启动是日志中最复杂的部分，涵盖</span></span></font><span><span style="background-color:rgb(255,255,255);">CPU</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">、内存、外设驱动的初始化，我们挑核心信息解析：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h4>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><span><span style="background-color:rgb(255,255,255);">1</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）硬件基础初始化</span></span></font></span></b></h4>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__selector-attr">[  0.980086]</span>Booting Linux on physical CPU<span class="code-snippet__number">0</span>x0000000000<span class="code-snippet__selector-attr">[0x412fd050]</span>（CPU型号：ARM Cortex-A55）</span></code><code><span><span class="code-snippet__selector-attr">[  0.980114]</span>Linux version<span class="code-snippet__number">6.1</span>.<span class="code-snippet__number">84</span>(sc<span class="code-snippet__keyword">@linux1024</span>) （内核版本）</span></code><code><span>[  <span class="code-snippet__number">0.995619</span>] Machine<span class="code-snippet__attribute">model</span>: <a href="https://bbs.elecfans.com/zhuti_1179_1.html" target="_blank"><u>Rockchip</u></a> RK3568 Linux1024 EVB1 DDR4 V10 Board （硬件型号）</span></code><code><span>[  <span class="code-snippet__number">1.058549</span>] Zone<span class="code-snippet__attribute">ranges</span>: <a href="https://www.elecfans.com/tags/dma/" target="_blank"><u>DMA</u></a> [mem<span class="code-snippet__number">0</span>x0000000000200000-<span class="code-snippet__number">0</span>xffffffff], Normal [mem<span class="code-snippet__number">0</span>x100000000-<span class="code-snippet__number">0</span>x1ffffffff] （内存分区）</span></code></pre>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><span><span style="background-color:rgb(255,255,255);">CPU</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">4</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">核</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">A55</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">（后续日志会显示</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“Brought up 1 node, 4 CPUs”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">内存分区：</span></span></font><span><span style="background-color:rgb(255,255,255);">DMA</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">区（用于外设访问）和</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Normal</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">区（主内存），总内存</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">4GB</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">（对应</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">0x00200000</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">到</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">0x1ffffffff</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h4>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><span><span style="background-color:rgb(255,255,255);">2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）驱动加载状态</span></span></font></span></b></h4>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">内核会自动加载硬件驱动，日志中用</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">probed</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">表示成功，</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">error</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">表示失败：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">成功案例：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span>[  <span class="code-snippet__number">1.429266</span>] rockchip-gpio fdd60000.<span class="code-snippet__property">gpio</span>: probed<span class="code-snippet__attr"><a href="https://www.elecfans.com/tags/pi/" target="_blank"><u>pi</u></a>nctrl</span>:gpio<span class="code-snippet__meta">@fdd60000</span>（<span class="code-snippet__variable">GPIO</span>驱动成功）</span></code><code><span>[  <span class="code-snippet__number">2.260806</span>] rga2 fdeb0000.<span class="code-snippet__property">rk_rga</span>: probe successfully, irq =<span class="code-snippet__number">87</span>（<span class="code-snippet__title">RGA2</span>图形加速驱动成功）</span></code><code><span>[  <span class="code-snippet__number">2.300120</span>] mali fde60000.<span class="code-snippet__property"><a href="https://www.elecfans.com/tags/gpu/" target="_blank"><u>gpu</u></a></span>:<span class="code-snippet__title">Probed</span><span class="code-snippet__keyword">as</span>mali0 （<span class="code-snippet__title">Mali</span><span class="code-snippet__variable">GPU</span>驱动成功）</span></code></pre>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">失败案例（需重点关注）：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span>[  <span class="code-snippet__number">2.483354</span>] GTP-ERR[_do_<a href="https://www.elecfans.com/tags/i2c/" target="_blank"><u>i2c</u></a>_write432]: I2c transfer error! (<span class="code-snippet__number">-110</span>) （GTP触摸芯片I2C超时）</span></code><code><span>[  <span class="code-snippet__number">5.910894</span>] GTP-ERR[gt1x_ts_probe587]: GTP<span class="code-snippet__keyword">init</span>fai<a href="https://www.hqchip.com/app/1721" target="_blank"><u>led</u></a>!!! （触摸驱动初始化失败）</span></code><code><span>[<span class="code-snippet__meta">FAILED</span>] Failed to start <a href="https://www.hqchip.com/app/1515" target="_blank"><u>usb</u></a>device.service: Manage USB device functions. （USB设备服务启动失败）</span></code></pre>
	<h3>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">阶段</span></span></font><span><span style="background-color:rgb(255,255,255);">5</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：文件系统挂载（系统可用性基础）</span></span></font></span></b></h3>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">内核启动后，会挂载根文件系统（</span></span></font><span><span style="background-color:rgb(255,255,255);">Debian12</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">使用</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">ext4</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">），日志中对应：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__selector-attr">[  6.088111]</span>EXT4-fs (mmcblk0p6) recovery complete （mmcblk0p6分区修复完成）</span></code><code><span><span class="code-snippet__selector-attr">[  6.088308]</span>EXT4-fs (mmcblk0p6) mounted filesystem with ordered data mode （根分区挂载成功）</span></code><code><span><span class="code-snippet__selector-attr">[  8.422110]</span>EXT4-fs (mmcblk0p7) mounted filesystem with ordered data mode （oem分区挂载）</span></code><code><span><span class="code-snippet__selector-attr">[  8.527496]</span>EXT4-fs (mmcblk0p8) mounted filesystem without journal （userdata分区挂载）</span></code></pre>
	<p>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">关键信息</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">分区对应：</span></span></font><span><span style="background-color:rgb(255,255,255);">mmcblk0</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">是</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">EMMC</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">设备，</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">p6</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">是根分区（</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">/</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）、</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">p7</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">是</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">oem</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">分区（厂商数据）、</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">p8</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">是</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">userdata</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">（用户数据）；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">日志中</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“without journal”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">表示</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">userdata</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">分区关闭了</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">ext4</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">日志（适合对性能要求高的场景）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">阶段</span></span></font><span><span style="background-color:rgb(255,255,255);">6</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：用户态初始化（</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">systemd</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">服务管理）</span></span></font></span></b></h3>
	<p>
		</p>
	<p>
		<span><span><span style="background-color:rgb(255,255,255);">Debian12</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">使用</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">systemd</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">管理系统服务，日志中用</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">[ OK ]</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">和</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">[FAILED]</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">标识服务状态：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">成功服务：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__selector-attr">[ OK ]</span>Started rk<a href="https://www.elecfans.com/tags/ai/" target="_blank"><u>ai</u></a>q_3A<span class="code-snippet__selector-class">.service</span>: Enable Rockchip camera engine rkaiq （RK相机引擎服务成功）</span></code><code><span>[ OK ] Started ssh.service: OpenB<a href="https://www.hqchip.com/app/1522" target="_blank"><u>SD</u></a> Secure Shell server （SSH服务成功，可远程登录）</span></code><code><span>[ OK ] Started lightdm.service: Light Display Manager （图形登录管理器成功）</span></code></pre>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">警告</span></span></font><span><span style="background-color:rgb(255,255,255);">/</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">失败服务（需优化）：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span>Configuration file lib/systemd/system/rkaiq_3A.service<span class="code-snippet__keyword">is</span>marked world-writable （服务文件权限过宽，有安全风险）</span></code><code><span>[<span class="code-snippet__meta">FAILED</span>] Failed to start usbdevice.service （USB服务失败，需检查驱动或配置）</span></code></pre>
	<h3>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">阶段</span></span></font><span><span style="background-color:rgb(255,255,255);">7</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：最终登录（系统就绪）</span></span></font></span></b></h3>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">当所有服务启动完成后，系统进入登录界面：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__attribute">Welcome</span>to Debian GNU/Linux<span class="code-snippet__number">12</span>(bookworm)!</span></code><code><span>root<span class="code-snippet__variable">@linaro</span>-alip<span class="code-snippet__comment"># （root用户登录成功，系统就绪）</span></span></code></pre>
	<h2>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">二、启动日志对开发者的</span></span></font><span><span style="background-color:rgb(255,255,255);">3</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">大核心价值</span></span></font></span></b></h2>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">启动日志不是</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">无用的打印信息</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，而是嵌入式开发的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">调试指南针</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，其价值主要体现在</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">3</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">个维度：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span><span><span style="background-color:rgb(255,255,255);">1.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">硬件调试：验证硬件设计正确性</span></span></font></span></b></h3>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><span><span style="background-color:rgb(255,255,255);">DDR</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">稳定性</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：若日志中出现</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“DDR init failed”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，需检查硬件供电（如</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">VDD_DDR</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）、时序参数（</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">clk skew</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">tdqss</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）是否与</span></span></font><span><span style="background-color:rgb(255,255,255);">datasheet</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">匹配；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">外设连接</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：比如</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“GTP</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">触摸</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">I2C</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">超时</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，可能是硬件接线错误（</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">SDA/SCL</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">接反）、上拉<a href="https://www.hqchip.com/app/485" target="_blank"><u>电阻</u></a>缺失，或触摸芯片本身故障；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">供电检查</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：日志中</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">vdd_<a href="https://www.elecfans.com/tags/Cirrus logic/" target="_blank"><u>logic</u></a> init 900000 uV</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（逻辑供电</span></span></font><span><span style="background-color:rgb(255,255,255);">900mV</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）、</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">vdd_gpu init 900000 uV</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><span><span style="background-color:rgb(255,255,255);">GPU</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">供电</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">900mV</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">），若数值异常（如低于</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">800mV</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">），会导致外设工作不稳定。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span><span><span style="background-color:rgb(255,255,255);">2.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">驱动开发：定位驱动适配问题</span></span></font></span></b></h3>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">驱动加载失败</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：日志中</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“probe failed”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">表示驱动未正确匹配硬件，需检查设备树（</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">DTS</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）中硬件地址是否正确（如</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">I2C</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">设备地址</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">0x14</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">是否与实际一致）；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">兼容性问题</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：比如</span></span></font><span><span style="background-color:rgb(255,255,255);">Mali GPU</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">驱动</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“probed as mali0”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">但后续</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“gpu hang”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，需确认内核版本与</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">GPU</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">驱动版本是否兼容（</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">RK3568</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Mali G52-2EE</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">需搭配特定版本驱动）；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">资源冲突</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：日志中</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“<a href="https://www.hqchip.com/app/2004" target="_blank"><u>can</u></a>'t request region for resource [mem 0xfde40000-0xfde4ffff]”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">表示</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">NPU</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">内存地址被占用，需修改设备树调整内存分配。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span><span><span style="background-color:rgb(255,255,255);">3.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">系统优化：缩短启动时间、提升稳定性</span></span></font></span></b></h3>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">启动时间分析</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：日志中每个阶段都有时间戳（如</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">[  0.980086]</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">），可统计各阶段耗时</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">——</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">比如</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">SPL</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">阶段耗时</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">100ms</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，内核启动耗时</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">5s</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，用户态服务耗时</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">3s</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，针对性优化慢阶段（如禁用无用服务）；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">服务管理</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：通过</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">systemctl status usbdevice.service</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">查看失败服务的详细日志，禁用无关服务（如不需要相机可关闭</span></span></font><span><span style="background-color:rgb(255,255,255);">rkaiq_3A.service</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">文件系统优化</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：日志中</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“ext4 recovery complete”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">表示根分区上次异常关机，可通过</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">e2fsck</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">提前修复，避免启动时耗时修复。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h2>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">三、初学者如何利用启动日志？</span></span></font><span><span style="background-color:rgb(255,255,255);">3</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">步上手法</span></span></font></span></b></h2>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">对嵌入式初学者来说，不用一开始看懂所有细节，掌握</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">按阶段拆分</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">→</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">抓关键字</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">→</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">查手册</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">3</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">步方法即可：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">第一步：按</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">启动阶段</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">拆分日志</span></span></font></span></b></h3>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">先在日志中标记出</span></span></font><span><span style="background-color:rgb(255,255,255);">6</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">个核心阶段，对应前文解析的结构：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">1.</span></span></span></span><b><span><span><span style="background-color:rgb(255,255,255);">DDR</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">初始化</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：找</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“DDR”“LPDDR4X”“Size”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">关键字；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">2.</span></span></span></span><b><span><span><span style="background-color:rgb(255,255,255);">SPL/U-Boot</span></span></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：找</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“U-Boot SPL”“Trying to boot from”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">3.</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">安全固件</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：找</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“BL31”“OP-TEE”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">4.</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">内核启动</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：找</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“Linux version”“Booting Linux”“probed”“error”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">5.</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">文件系统</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：找</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“EXT4-fs”“mounted”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">6.</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">用户态</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：找</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“systemd”“[ OK ]”“[FAILED]”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">第二步：关注</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">关键判断词</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font></span></b></h3>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">日志中</span></span></font><span><span style="background-color:rgb(255,255,255);">80%</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">的问题都能通过关键字定位：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">成功标识</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">OK</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">probed</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">mounted</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">Booted</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">失败标识</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">error</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">FAILED</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">timeout</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">init failed</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">硬件信息</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">CPU</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);"><a href="https://www.elecfans.com/tags/dram/" target="_blank"><u>DRAM</u></a></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">MMC</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">I2C</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">USB</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（对应具体硬件）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">举例</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：看到</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“GTP-ERR: I2c transfer error (-110)”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，先确认：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">1.</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">阶段：内核驱动加载；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">2.</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">硬件：</span></span></font><span><span style="background-color:rgb(255,255,255);">GTP</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">触摸芯片（</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">I2C</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">总线）；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">3.</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">问题：</span></span></font><span><span style="background-color:rgb(255,255,255);">I2C</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">超时（错误码</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">- 110</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">），优先检查硬件接线。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">第三步：搭配工具深入调试</span></span></font></span></b></h3>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">光看日志不够，需用工具进一步分析：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">1.</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">实时查看日志</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：系统启动后，用</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">dmesg</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">查看内核日志，</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">journalctl -u usbdevice.service</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">查看特定服务的详细日志；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">2.</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">日志保存</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：用</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">dmesg &gt; boot.log</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">保存日志到文件，方便后续分析；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">3.</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">硬件手册对照</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：比如</span></span></font><span><span style="background-color:rgb(255,255,255);">RK3568</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">的《</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Datasheet</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">》中</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“I2C</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);"><a href="https://www.hqchip.com/app/1716" target="_blank"><u>控制器</u></a></span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">章节，确认时钟频率、地址是否与日志中一致。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h2>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">四、可视化工具：启动流程与脑图</span></span></font></span></b></h2>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">为了帮你更直观理解，我整理了</span></span></font><span><span style="background-color:rgb(255,255,255);">RK3568</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">的启动流程图和核心脑图：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span><span><span style="background-color:rgb(255,255,255);">1.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">启动流程图</span></span></font></span></b></h3>
	<p>
		</p>
	<img src="https://file1.elecfans.com//web3/M00/3C/92/wKgZPGkaixeAWmQhAAE6OHtqRIo360.png" alt="wKgZPGkaixeAWmQhAAE6OHtqRIo360.png"/><h3>
		<b><span><span><span style="background-color:rgb(255,255,255);">2.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">启动日志核心脑图</span></span></font></span></b></h3>
	<img src="https://file1.elecfans.com//web3/M00/3C/92/wKgZPGkaixeAM_ziAAFNX7AbNrI310.png" alt="wKgZPGkaixeAM_ziAAFNX7AbNrI310.png"/><h2>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">五、总结：启动日志是</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">嵌入式开发的显微镜</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font></span></b></h2>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">对</span></span></font><span><span style="background-color:rgb(255,255,255);">RK3568+Debian12</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">的开发者来说，启动日志不仅是</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">启动过程的记录</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，更是：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">硬件<a href="https://bbs.elecfans.com/zhuti_lecture_1.html" target="_blank"><u>工程师</u></a>的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);"><a href="https://www.elecfans.com/v/tag/796/" target="_blank"><u>万用表</u></a></span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">：验证</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">DDR</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">I2C</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">USB</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">等硬件是否正常；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">驱动工程师的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">调试器</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">：定位驱动适配与兼容性问题；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">系统工程师的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">优化指南</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">：缩短启动时间、提升系统稳定性；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">初学者的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">学习手册</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">：理解<a href="https://m.elecfans.com/v/tag/2447/" target="_blank"><u>嵌入式系统</u></a>从</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">0</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">到</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">1</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的启动逻辑。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">下次拿到</span></span></font><span><span style="background-color:rgb(255,255,255);">RK3568</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">的启动日志，不妨按</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">阶段拆分</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">→</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">抓关键字</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">→</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">查手册</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的步骤试试</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">——</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">你会发现，很多之前</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">卡壳</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的问题，都能在日志中找到答案。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">如果觉得有用，欢迎分享给身边的嵌入式同行，也可以在评论区留言你的日志调试经历～</span></span></font></span></p>
</div>]]></description></item><item>    <title><![CDATA[audio_hw.c核心逻辑及第三方算法集成]]></title>    <link>https://www.elecfans.com/d/7401322.html</link>    <guid>https://www.elecfans.com/d/7401322.html</guid>    <pubDate>2026-02-06 16:53:00</pubDate>    <description><![CDATA[<div class="rich_media_content js_underline_content autoTypeSetting24psection">
	<p>
		</p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span style="font-family:Arial;font-weight:bold;font-size:15pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">一、文件核心内容分析</span></span></font></span></b></h3>
	<p>
		</p>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">（一）核心配置解析</span></span></font></span></b></h4>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">该文件的配置主要分为</span></span></font></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">PCM</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">参数配置</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">路由配置</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">设备标识配置</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">三类，是<a href="https://m.hqchip.com/app/1537" target="_blank"><u>音频</u></a>硬件抽象层（</span></span></font><span><span style="background-color:rgb(255,255,255);">HAL</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）与底层</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">ALSA</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">驱动交互的基础。</span></span></font></span></p>
	<img src="https://file1.elecfans.com//web3/M00/3C/92/wKgZPGkaixaABjWTAAJWySiB9qc708.png" alt="wKgZPGkaixaABjWTAAJWySiB9qc708.png"/><h5>
		<b><span style="font-family:Arial;font-weight:bold;font-size:12pt;"><span><span style="background-color:rgb(255,255,255);">1. PCM</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">参数配置（音频数据格式定义）</span></span></font></span></b></h5>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">定义了不同场景下的</span></span></font><span><span style="background-color:rgb(255,255,255);">PCM</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（脉冲编码调制）数据格式，包括声道数、采样率、周期大小等关键参数，决定了音频数据的传输格式。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<table style="border-collapse:collapse;margin-left:-0.6pt;border:none;"><tbody><tr><td style="padding:3pt 6pt 1.5pt;border-width:1pt;border-style:solid;border-color:rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">配置名称</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:1pt solid rgb(222,224,227);border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">适用场景</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:1pt solid rgb(222,224,227);border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">核心参数（</span></span></font><span><span style="background-color:rgb(255,255,255);">channels/ra<a href="https://www.elecfans.com/tags/te/" target="_blank"><u>te</u></a>/format</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:1pt solid rgb(222,224,227);border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">备注</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
			</tr><tr><td style="padding:3pt 6pt 1.5pt;border-left:1pt solid rgb(222,224,227);border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">pcm_config</span></span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">基础音频输出（如媒体播放）</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">声道</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">/ 44100Hz / S16_LE</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">16</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">位小端）</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">通用播放场景默认配置</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
			</tr><tr><td style="padding:3pt 6pt 1.5pt;border-left:1pt solid rgb(222,224,227);border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">pcm_config_in</span></span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">基础音频输入（如录音）</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">声道（默认）</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">/ 44100Hz / S16_LE</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">支持参考声道扩展（</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">PCM_REFERENCE_CHANNELS</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">）</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
			</tr><tr><td style="padding:3pt 6pt 1.5pt;border-left:1pt solid rgb(222,224,227);border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">pcm_config_in_low_latency</span></span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">低延迟输入（如语音通话）</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">声道</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">/ 48000Hz / S16_LE</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">降低延迟以保证实时性</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
			</tr><tr><td style="padding:3pt 6pt 1.5pt;border-left:1pt solid rgb(222,224,227);border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">pcm_config_sco</span></span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);"><a href="https://www.elecfans.com/tags/蓝牙/" target="_blank"><u>蓝牙</u></a></span></span></font><span><span style="background-color:rgb(255,255,255);">SCO</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">链路（语音）</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">1</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">声道</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">/ 8000Hz / S16_LE</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">蓝牙语音通话专用（窄带音频）</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
			</tr><tr><td style="padding:3pt 6pt 1.5pt;border-left:1pt solid rgb(222,224,227);border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">pcm_config_<a href="https://www.hqchip.com/app/1685" target="_blank"><u>hdmi</u></a>_multi</span></span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">HDMI</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">多声道输出</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">6</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">声道（可动态修改）</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">/</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">默认采样率</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">/ S16_LE</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">支持多声道环绕声输出</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
			</tr><tr><td style="padding:3pt 6pt 1.5pt;border-left:1pt solid rgb(222,224,227);border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">pcm_config_direct</span></span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">直接输出（如</span></span></font><span><span style="background-color:rgb(255,255,255);">SPDIF</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">声道</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">/ 48000Hz / IEC958</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">或</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">S24_LE</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">用于数字音频直通（无解码，直接传输比特流）</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
			</tr></tbody></table><h5>
		<b><span style="font-family:Arial;font-weight:bold;font-size:12pt;"><span><span style="background-color:rgb(255,255,255);">2.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">路由配置（音频路径映射）</span></span></font></span></b></h5>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">通过</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">route_config</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">结构体和路由表</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">route_configs</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">定义输入源与输出设备的对应关系，决定音频数据的物理传输路径（如扬声器、耳机、蓝牙等）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;background:rgb(0,255,255);"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">route_config</span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">结构体</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：包含播放路径（</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">playb<a href="https://m.hqchip.com/app/1703" target="_blank"><u>ac</u></a>k_route</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">）、采集路径（</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">capture_route</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">）等，例如：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__keyword">static</span><span class="code-snippet__keyword">const</span><span class="code-snippet__keyword">struct</span>route_config media_speaker = {</span></code><code><span> <span class="code-snippet__string">"media-speaker"</span>,  <span class="code-snippet__comment">// 播放路径（媒体→扬声器）</span></span></code><code><span> <span class="code-snippet__string">"media-main-mic"</span>, <span class="code-snippet__comment">// 采集路径（主麦克风）</span></span></code><code><span> <span class="code-snippet__string">"playback-off"</span>,  <span class="code-snippet__comment">// 关闭播放时的路径</span></span></code><code><span> <span class="code-snippet__string">"capture-off"</span>   <span class="code-snippet__comment">// 关闭采集时的路径</span></span></code><code><span>};</span></code></pre>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">路由表</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">route_configs</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：二维数组，维度为</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">[</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">输入源</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">][</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">输出设备</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">]</span></span></font></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">，映射关系如下：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">◦</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">输入源：</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">IN_SOURCE_MIC</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">（麦克风）、</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">IN_SOURCE_CAMCORDER</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">（摄像机）、</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">IN_SOURCE_VOICE_RECOGNI<a href="https://bbs.elecfans.com/group_715" target="_blank"><u>TI</u></a>ON</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">（<a href="https://www.elecfans.com/tags/语音识别/" target="_blank"><u>语音识别</u></a>）等。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">◦</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">输出设备：</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">OUT_DEVICE_SPEAKER</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">（扬声器）、</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">OUT_DEVICE_HE<a href="https://bbs.elecfans.com/zhuti_1472_1.html" target="_blank"><u>AD</u></a>SET</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">（耳机）、</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">OUT_DEVICE_BT_SCO</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">（蓝牙</span></span></font><span><span style="background-color:rgb(255,255,255);">SCO</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）等。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">◦</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">例如：</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">route_configs[IN_SOURCE_MIC][OUT_DEVICE_SPEAKER] = &amp;media_speaker</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">，表示</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">麦克风输入</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">→</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">扬声器输出</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">使用</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">media_speaker</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">路由。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h5>
		<b><span style="font-family:Arial;font-weight:bold;font-size:12pt;"><span><span style="background-color:rgb(255,255,255);">3.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">设备标识配置（硬件匹配列表）</span></span></font></span></b></h5>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">定义了不同类型设备（如扬声器、</span></span></font><span><span style="background-color:rgb(255,255,255);">HDMI</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">、麦克风）的硬件标识列表，用于匹配系统中的实际声卡（通过解析</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">/proc/asound/cards</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<table style="border-collapse:collapse;margin-left:-0.6pt;border:none;"><tbody><tr><td style="padding:3pt 6pt 1.5pt;border-width:1pt;border-style:solid;border-color:rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">设备列表名称</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:1pt solid rgb(222,224,227);border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">含义</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:1pt solid rgb(222,224,227);border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">示例元素（声卡名称）</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
			</tr><tr><td style="padding:3pt 6pt 1.5pt;border-left:1pt solid rgb(222,224,227);border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">SPEAKER_OUT_NAME</span></span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">扬声器输出设备列表</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">"<a href="https://bbs.elecfans.com/zhuti_1179_1.html" target="_blank"><u>rockchip</u></a>carrk33"</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">"realtekrt5616c"</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">codec</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">名称）</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
			</tr><tr><td style="padding:3pt 6pt 1.5pt;border-left:1pt solid rgb(222,224,227);border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">HDMI_OUT_NAME</span></span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">HDMI</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">输出设备列表</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">"rkhdmidpsound"</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">"rockchiphdmi"</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
			</tr><tr><td style="padding:3pt 6pt 1.5pt;border-left:1pt solid rgb(222,224,227);border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">SPDIF_OUT_NAME</span></span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">SPDIF</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">输出设备列表</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">"ROCKCHIPSPDIF"</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">"rockchipspdif"</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
			</tr><tr><td style="padding:3pt 6pt 1.5pt;border-left:1pt solid rgb(222,224,227);border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">MIC_IN_NAME</span></span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">麦克风输入设备列表</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">"realtekrt5651co"</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">"rockchipes8316c"</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
			</tr><tr><td style="padding:3pt 6pt 1.5pt;border-left:1pt solid rgb(222,224,227);border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">BT_IN_NAME</span></span></span><span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">/</span></span></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">BT_OUT_NAME</span></span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">蓝牙输入</span></span></font><span><span style="background-color:rgb(255,255,255);">/</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">输出设备列表</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">"rockchipbt"</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（蓝牙音频设备）</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
			</tr></tbody></table><h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">（二）核心函数解析</span></span></font></span></b></h4>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">函数主要围绕</span></span></font></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">设备管理</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">路由控制</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">流操作</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">三大核心功能，实现音频设备的打开、配置、数据传输等流程。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h5>
		<b><span style="font-family:Arial;font-weight:bold;font-size:12pt;"><span><span style="background-color:rgb(255,255,255);">1.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">设备管理函数</span></span></font></span></b></h5>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;background:rgb(0,255,255);"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">get_output_device_id</span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">/</span></span></span></b><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">get_input_source_id</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">将</span></span></font><span><span style="background-color:rgb(255,255,255);"><a href="https://bbs.elecfans.com/group_360" target="_blank"><u>Android</u></a></span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">标准音频设备类型（如</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">AUDIO_DEVICE_OUT_SPEAKER</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">）转换为内部</span></span></font><span><span style="background-color:rgb(255,255,255);">ID</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（如</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">OUT_DEVICE_SPEAKER</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">），用于路由表<a href="https://www.hqchip.com/ic/0" target="_blank"><u>索引</u></a>。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">示例：</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">AUDIO_DEVICE_OUT_SPEAKER</span></span></span><span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);"/></span><font face="Arial"><span><span style="background-color:rgb(255,255,255);">→</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">OUT_DEVICE_SPEAKER</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;background:rgb(0,255,255);"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">name_match</span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">/</span></span></span></b><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">is_specified_out_sound_card</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">设备匹配函数，通过比较声卡名称（从</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">/proc/asound/cards</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">读取）与</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">SPEAKER_OUT_NAME</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">等列表中的标识，确定当前可用硬件设备。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;background:rgb(0,255,255);"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">device_lock</span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">/</span></span></span></b><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">device_unlock</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">线程安全函数，通过互斥锁保护音频设备操作（如流的创建</span></span></font><span><span style="background-color:rgb(255,255,255);">/</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">销毁），避免并发冲突。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h5>
		<b><span style="font-family:Arial;font-weight:bold;font-size:12pt;"><span><span style="background-color:rgb(255,255,255);">2.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">路由控制函数</span></span></font></span></b></h5>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;background:rgb(0,255,255);"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">getOutputRouteFromDevice</span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">/</span></span></span></b><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">getInputRouteFromDevice</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">根据输出</span></span></font><span><span style="background-color:rgb(255,255,255);">/</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">输入设备类型获取对应的路由</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">ID</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">（如</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">SPEAKER_NORMAL_ROUTE</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">MAIN_MIC_CAPTURE_ROUTE</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">），用于底层</span></span></font><span><span style="background-color:rgb(255,255,255);">ALSA</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">路由切换。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;background:rgb(0,255,255);"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">force_non_hdmi_out_standby</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">设备冲突处理函数，当</span></span></font><span><span style="background-color:rgb(255,255,255);">HDMI</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">激活时，强制其他输出设备（如扬声器）进入待机状态，避免音频同时从多个设备输出。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h5>
		<b><span style="font-family:Arial;font-weight:bold;font-size:12pt;"><span><span style="background-color:rgb(255,255,255);">3.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">流操作函数</span></span></font></span></b></h5>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;background:rgb(0,255,255);"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">adev_get_stream_out_by_io_handle_l</span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">/</span></span></span></b><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">adev_get_stream_in_by_io_handle_l</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">根据</span></span></font><span><span style="background-color:rgb(255,255,255);">IO</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">句柄查找对应的输出</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">/</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">输入流（</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">stream_out</span></span></span><span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">/</span></span></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">stream_in</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">），用于流的状态管理（如启动、停止）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;background:rgb(0,255,255);"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">adev_add_stream_to_list</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">将创建的流添加到设备的流列表中，维护流的生命周期（从创建到销毁）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span style="font-family:Arial;font-weight:bold;font-size:15pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">二、第三方<a href="https://m.elecfans.com/v/tag/2562/" target="_blank"><u>算法</u></a>集成方案</span></span></font></span></b></h3>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">第三方算法（如降噪、音效增强、回声消除等）需嵌入音频数据流转链路中，核心是在</span></span></font></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">输入数据读取后</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">或</span></span></font></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">输出数据写入前</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">插入处理逻辑。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">（一）集成位置</span></span></font></span></b></h4>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">1.</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">输入链路（录音）</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">在麦克风采集的</span></span></font><span><span style="background-color:rgb(255,255,255);">PCM</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">数据被上层应用读取前处理（如降噪）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">对应代码位置：输入流的</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">read</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">回调函数（如</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">stream_in.read</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">），数据从</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">pcm_read</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">获取后，调用算法处理再返回给上层。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">2.</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">输出链路（播放）</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">在上层应用发送的</span></span></font><span><span style="background-color:rgb(255,255,255);">PCM</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">数据写入硬件前处理（如音效增强）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">对应代码位置：输出流的</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">write</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">回调函数（如</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">stream_out.write</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">），数据传入后先调用算法处理，再通过</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">pcm_write</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">写入硬件。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">（二）集成步骤</span></span></font></span></b></h4>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">1.</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">算法初始化（设备打开时）</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">◦</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">在音频设备打开（如</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">open_output_stream</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">或</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">open_input_stream</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">）时，根据当前</span></span></font><span><span style="background-color:rgb(255,255,255);">PCM</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">配置（</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">pcm_config</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">的采样率、声道数等）初始化算法（如分配缓冲区、设置参数）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">◦</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">示例：在</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">stream_out</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">创建时，调用</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">algorithm_init(&amp;out-&gt;alg, out-&gt;pcm_config)</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">1.</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">数据处理（读写时）</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">◦</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">输入链路：在</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">stream_in.read</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">中，</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">pcm_read</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">获取原始数据后，调用</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">algorithm_process_in(alg, pcm_data, processed_data)</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">，再返回处理后的数据。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">◦</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">输出链路：在</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">stream_out.write</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">中，接收上层数据后，调用</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">algorithm_process_out(alg, input_data, processed_data)</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">，再通过</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">pcm_write</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">输出。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">1.</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">资源释放（设备关闭时）</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">◦</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">在流停止（</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">stop_output_stream</span></span></span><span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">/</span></span></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">stop_input_stream</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">）或设备关闭时，调用</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">algorithm_destroy(alg)</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">释放算法占用的内存、线程等资源。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">（三）注意事项</span></span></font></span></b></h4>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">数据格式匹配</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：算法输入输出格式需与</span></span></font><span><span style="background-color:rgb(255,255,255);">PCM</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">配置一致（如采样率、声道数、位深），必要时通过</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">audio_format_convert</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">进行格式转换。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">实时性</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：算法处理耗时需</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">≤</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">音频帧周期（如</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">period_size/rate</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">，例如</span></span></font><span><span style="background-color:rgb(255,255,255);">44100Hz</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">采样率、</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">256</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">帧周期对应的周期为～</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">5.8ms</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">），避免卡顿。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">线程安全</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：若算法涉及多线程操作，需通过</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">device_lock</span></span></span><span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">/</span></span></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">device_unlock</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">加锁保护，避免数据竞争。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span style="font-family:Arial;font-weight:bold;font-size:15pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">三、流程图与脑图（文字版）</span></span></font></span></b></h3>
	<p>
		</p>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">（一）音频数据流转与算法集成流程图</span></span></font></span></b></h4>
	<p>
		</p>
	<img src="https://file1.elecfans.com//web3/M00/3C/92/wKgZPGkaixaAVOxpAAJbl89q9os332.png" alt="wKgZPGkaixaAVOxpAAJbl89q9os332.png"/><h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">（二）核心模块与算法集成脑图</span></span></font></span></b></h4>
	<p>
		</p>
	<img src="https://file1.elecfans.com//web3/M00/3C/92/wKgZPGkaixaAY45WAAMTsfKQkLQ265.png" alt="wKgZPGkaixaAY45WAAMTsfKQkLQ265.png"/><p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">通过以上分析，可清晰理解</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">audio_hw.c</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">的核心逻辑及第三方算法的集成方式，实际操作时需根据具体算法<a href="https://m.hqchip.com/app/1787" target="_blank"><u>接口</u></a>调整处理逻辑，并严格测试实时性和兼容性。</span></span></font></span></p>
	<p>
		</p>
</div>
<div class="wx_detail">
	<p>
		</p>
</div>]]></description></item><item>    <title><![CDATA[RK android平台多MIC开发：从驱动配置到算法适配]]></title>    <link>https://www.elecfans.com/d/7401321.html</link>    <guid>https://www.elecfans.com/d/7401321.html</guid>    <pubDate>2026-02-06 16:55:00</pubDate>    <description><![CDATA[<div class="rich_media_content js_underline_content autoTypeSetting24psection">
	<h1>
		</h1>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">在<a href="https://www.elecfans.com/tags/智能音箱/" target="_blank"><u>智能音箱</u></a>、视频会议设备等场景中，多</span></span></font><span><span style="background-color:rgb(255,255,255);">MIC</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（麦克风）配置是实现远场拾音、降噪、回声消除的核心基础。<a href="https://bbs.elecfans.com/zhuti_1179_1.html" target="_blank"><u>瑞芯微</u></a>（</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);"><a href="https://bbs.elecfans.com/zhuti_1179_1.html" target="_blank"><u>Rockchip</u></a></span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">在多</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">MIC</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">开发上提供了统一框架与差异化配置，本文将结合官方技术文档，从</span></span></font></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">声卡注册与</span></span></font><span><span style="background-color:rgb(255,255,255);">DTS</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">配置</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);"><a href="https://m.hqchip.com/app/1537" target="_blank"><u>音频</u></a>测试</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);"><a href="https://m.elecfans.com/v/tag/2562/" target="_blank"><u>算法</u></a>集成</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">常见问题解决</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">四大维度，手把手教你完成多</span></span></font><span><span style="background-color:rgb(255,255,255);">MIC</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">开发，附具体文件路径与实操代码。</span></span></font></span></p>
	<img src="https://file1.elecfans.com//web3/M00/3C/92/wKgZPGkaixWAPRCFAAHyJDhX6a8468.png" alt="wKgZPGkaixWAPRCFAAHyJDhX6a8468.png"/><h2>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">一、核心前提：不同芯片的共性与差异</span></span></font></span></b></h2>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">瑞芯微各芯片多</span></span></font><span><span style="background-color:rgb(255,255,255);">MIC</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">开发的核心逻辑一致（基于</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);"><a href="https://m.hqchip.com/app/1522" target="_blank"><u>sim</u></a>ple-audio-card</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">框架、依赖</span></span></font><span><span style="background-color:rgb(255,255,255);"><a href="https://bbs.elecfans.com/group_715" target="_blank"><u>Ti</u></a>nyALSA</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">工具链），但需注意接口与</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">DTS</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">路径差异，下表可快速定位关键信息：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<table style="border-collapse:collapse;margin-left:-0.6pt;border:none;"><tbody><tr><td style="padding:3pt 6pt 1.5pt;border-width:1pt;border-style:solid;border-color:rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">芯片型号</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:1pt solid rgb(222,224,227);border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">支持的</span></span></font><span><span style="background-color:rgb(255,255,255);">MIC</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);"><a href="https://m.hqchip.com/app/1787" target="_blank"><u>接口</u></a></span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:1pt solid rgb(222,224,227);border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">核心参考</span></span></font><span><span style="background-color:rgb(255,255,255);">DTS</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">路径</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:1pt solid rgb(222,224,227);border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">录音设备节点（默认）</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:1pt solid rgb(222,224,227);border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">关键</span></span></font><span><span style="background-color:rgb(255,255,255);">Codec</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">示例</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
			</tr><tr><td style="padding:3pt 6pt 1.5pt;border-left:1pt solid rgb(222,224,227);border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">RK3399</span></span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">I2S</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">、外挂</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);"><a href="https://www.elecfans.com/tags/adc/" target="_blank"><u>ADC</u></a></span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">无固定路径（参考</span></span></font><span><span style="background-color:rgb(255,255,255);">ES8323/ES7210</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">示例）</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">pcmC0D1c</span></span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">ES8323</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">ES7210</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">RT5640</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
			</tr><tr><td style="padding:3pt 6pt 1.5pt;border-left:1pt solid rgb(222,224,227);border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">RK3326/PX30</span></span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">I2S</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">PDM</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">arch/<a href="https://m.hqchip.com/app/1378" target="_blank"><u>arm</u></a>64/boot/dts/rockchip/rk3326-evb-<a href="https://www.elecfans.com/tags/ai/" target="_blank"><u>ai</u></a>-va-v11.dts</span></span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">pcmC0D1c</span></span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">RK809</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">RK817</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
			</tr><tr><td style="padding:3pt 6pt 1.5pt;border-left:1pt solid rgb(222,224,227);border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">RK3566/RK3568</span></span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">I2S</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">PDM</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">arch/arm64/boot/dts/rockchip/rk3566-evb2-lp4x-v10-pdm-mic-array.dts</span></span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">pcmC1D1c</span></span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">RK809</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">ES7202</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">ES7243e</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
			</tr></tbody></table><p style="border-left:2.25pt solid rgb(187,191,196);padding:0pt 0pt 0pt 0pt;">
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">提示：若找不到对应</span></span></font><span><span style="background-color:rgb(255,255,255);">DTS</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">文件，可在</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">arch/arm64/boot/dts/rockchip/</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">目录下全局搜索</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">pdm</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">i2s</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">mic</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">等关键词，或参考同系列芯片的多</span></span></font><span><span style="background-color:rgb(255,255,255);">MIC</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">配置示例。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h2>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">二、关键步骤：多</span></span></font><span><span style="background-color:rgb(255,255,255);">MIC</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">开发全流程（附代码与路径）</span></span></font></span></b></h2>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">多</span></span></font><span><span style="background-color:rgb(255,255,255);">MIC</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">开发的核心是</span></span></font></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">声卡注册（</span></span></font><span><span style="background-color:rgb(255,255,255);">DTS</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">配置）</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">→</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">内核适配</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">→</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">测试验证</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">→</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">算法集成</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">，每个步骤均需结合芯片特性调整，以下为具体实操：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span><span><span style="background-color:rgb(255,255,255);">1.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">第一步：声卡注册与</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">DTS</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">配置（核心）</span></span></font></span></b></h3>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">声卡是多</span></span></font><span><span style="background-color:rgb(255,255,255);">MIC</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">数据传输的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">桥梁</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，需通过</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">DTS</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">配置</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);"><a href="https://m.elecfans.com/v/tag/132/" target="_blank"><u>cpu</u></a>_dai</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（如</span></span></font><span><span style="background-color:rgb(255,255,255);">I2S/PDM</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">接口）、</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">codec_dai</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（如</span></span></font><span><span style="background-color:rgb(255,255,255);">RK809 codec</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）与</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">dai-link</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（连接两者），分</span></span></font><span><span style="background-color:rgb(255,255,255);">3</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">种典型场景：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h4>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">场景</span></span></font><span><span style="background-color:rgb(255,255,255);">1</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">PDM</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">多</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">MIC</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">RK3326/PX30/RK3566/RK3568</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">通用）</span></span></font></span></b></h4>
	<p>
		</p>
	<p>
		<span><span><span style="background-color:rgb(255,255,255);">PDM</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">接口支持多通道（</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">1-8ch</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">），</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">1-2</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">通道通常用于</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">回采</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">3-8</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">通道用于</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">MIC</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">拾音，以</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">RK3566</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">为例：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span>// 路径：arch/arm64/boot/dts/rockchip/rk3566-evb2-lp4x-v1<span class="code-snippet__number">0</span>-pdm-mic-array.dts</span></code><code><span>rk809_sound_micarray: rk809-sound-micarray {</span></code><code><span>  compatible =<span class="code-snippet__string">"simple-audio-card"</span>;</span></code><code><span>  simple-audio-card,name =<span class="code-snippet__string">"rockchip,rk809-codec"</span>;<span class="code-snippet__regexp">//</span>声卡名称</span></code><code><span>  simple-audio-card,mclk-fs = &lt;<span class="code-snippet__number">256</span>&gt;;<span class="code-snippet__regexp">//</span>主时钟倍数（固定）</span></code><code><span> </span></code><code><span>  // dai-<span class="code-snippet__keyword">link</span><span class="code-snippet__number">0</span>：播放（I2S接口）</span></code><code><span>  simple-audio-card,dai-<span class="code-snippet__keyword">link</span>@0 {</span></code><code><span>   <span class="code-snippet__keyword">format</span>=<span class="code-snippet__string">"i2s"</span>;</span></code><code><span>    cpu { sound-dai = &lt;&amp;i2s1_8ch&gt;; };<span class="code-snippet__regexp">//</span>绑定I2S1_8ch播放接口</span></code><code><span>    codec { sound-dai = &lt;&amp;rk809_codec <span class="code-snippet__number">0</span>&gt;; };<span class="code-snippet__regexp">//</span>绑定Codec播放端</span></code><code><span>  };</span></code><code><span> </span></code><code><span> <span class="code-snippet__regexp">//</span>dai-link1：录音（PDM接口，多MIC）</span></code><code><span>  simple-audio-card,dai-<span class="code-snippet__keyword">link</span>@1 {</span></code><code><span>   <span class="code-snippet__keyword">format</span>=<span class="code-snippet__string">"pdm"</span>;</span></code><code><span>    cpu { sound-dai = &lt;&amp;pdm&gt;; };<span class="code-snippet__regexp">//</span>绑定PDM录音接口</span></code><code><span>    codec { sound-dai = &lt;&amp;rk809_codec <span class="code-snippet__number">1</span>&gt;; };<span class="code-snippet__regexp">//</span>绑定Codec录音端</span></code><code><span>  };</span></code><code><span>};</span></code><code><span><span class="code-snippet__regexp">//</span>使能I2S1_8ch播放接口</span></code><code><span>&amp;i2s1_8ch {</span></code><code><span>  status =<span class="code-snippet__string">"okay"</span>;</span></code><code><span> <span class="code-snippet__comment">#sound-dai-cells = &lt;0&gt;;</span></span></code><code><span>  rockchip,clk-trcm = &lt;<span class="code-snippet__number">1</span>&gt;;</span></code><code><span>  <a href="https://www.elecfans.com/tags/pi/" target="_blank"><u>pi</u></a>nctrl-<span class="code-snippet__number">0</span>= &lt;&amp;i2s1m0_sclktx &amp;i2s1m0_lrcktx &amp;i2s1m0_sdo<span class="code-snippet__number">0</span>&gt;;</span></code><code><span>};</span></code><code><span><span class="code-snippet__regexp">//</span>使能PDM录音接口（多MIC核心）</span></code><code><span>&amp;pdm {</span></code><code><span>  status =<span class="code-snippet__string">"okay"</span>;</span></code><code><span> <span class="code-snippet__comment">#sound-dai-cells = &lt;0&gt;;</span></span></code><code><span>  pinctrl-<span class="code-snippet__number">0</span>= &lt;&amp;pdmm0_clk &amp;pdmm0_clk1 &amp;pdmm0_sdi<span class="code-snippet__number">0</span>&amp;pdmm0_<a href="https://www.elecfans.com/tags/sdi/" target="_blank"><u>sdi</u></a>1 &amp;pdmm0_<a href="https://www.hqchip.com/app/1522" target="_blank"><u>sd</u></a>i2 &amp;pdmm0_sdi3&gt;;</span></code><code><span>};</span></code><code><span><span class="code-snippet__regexp">//</span>配置RK809 Codec（需支持回采与多通道）</span></code><code><span>&amp;rk809_codec {</span></code><code><span> <span class="code-snippet__comment">#sound-dai-cells = &lt;1&gt;;</span></span></code><code><span>  compatible =<span class="code-snippet__string">"rockchip,rk809-codec"</span>,<span class="code-snippet__string">"rockchip,rk817-codec"</span>;</span></code><code><span>  clocks = &lt;&amp;cru I2S1_MCLKOUT&gt;;</span></code><code><span>  clock-names =<span class="code-snippet__string">"mclk"</span>;</span></code><code><span>  <a href="https://bbs.elecfans.com/zhuti_1472_1.html" target="_blank"><u>ad</u></a>c-<span class="code-snippet__keyword">for</span>-loopb<a href="https://m.hqchip.com/app/1703" target="_blank"><u>ac</u></a>k;<span class="code-snippet__regexp">//</span>使能回采功能</span></code><code><span>  pdmdata-out-enable;<span class="code-snippet__regexp">//</span>PDM数据使能</span></code><code><span>  hp-volume = &lt;<span class="code-snippet__number">20</span>&gt;;<span class="code-snippet__regexp">//</span>耳机音量（可调整）</span></code><code><span>  spk-volume = &lt;<span class="code-snippet__number">3</span>&gt;;<span class="code-snippet__regexp">//</span>喇叭音量（可调整）</span></code><code><span>  mic-in-differential;<span class="code-snippet__regexp">//</span>差分MIC输入（提升抗干扰）</span></code><code><span>  status =<span class="code-snippet__string">"okay"</span>;</span></code><code><span>};</span></code></pre>
	<h4>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">场景</span></span></font><span><span style="background-color:rgb(255,255,255);">2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">I2S</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">多</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">MIC</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">RK3399/RK3326</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">通用）</span></span></font></span></b></h4>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">若</span></span></font><span><span style="background-color:rgb(255,255,255);">MIC</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">通过</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">I2S</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">接口连接（如</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">RK3399</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">使用</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">ES8323 Codec</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">），需配置</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">I2S</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">多通道与</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Codec</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">驱动：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__comment">// RK3399 ES8323示例（无固定路径，需自定义）</span></span></code><code><span>es8323-sound {</span></code><code><span>  status =<span class="code-snippet__string">"okay"</span>;</span></code><code><span>  compatible =<span class="code-snippet__string">"simple-audio-card"</span>;</span></code><code><span>  simple-audio-card,format =<span class="code-snippet__string">"i2s"</span>;</span></code><code><span>  simple-audio-card,name =<span class="code-snippet__string">"rockchip,es8323-codec"</span>;</span></code><code><span>  simple-audio-card,mclk-fs = &lt;<span class="code-snippet__number">256</span>&gt;;</span></code><code><span> </span></code><code><span> <span class="code-snippet__comment">// CPU端：绑定I2S0</span></span></code><code><span>  simple-audio-card,cpu { sound-dai = &lt;&amp;i2s0&gt;; };</span></code><code><span> <span class="code-snippet__comment">// Codec端：绑定ES8323</span></span></code><code><span>  simple-audio-card,codec { sound-dai = &lt;&amp;es8323&gt;; };</span></code><code><span>};</span></code><code><span><span class="code-snippet__comment">// ES8323 Codec配置（<a href="https://www.elecfans.com/tags/i2c/" target="_blank"><u>I2C</u></a>地址0x11）</span></span></code><code><span>es8323: es8323@<span class="code-snippet__number">11</span>{</span></code><code><span> <span class="code-snippet__meta">#sound-dai-cells =</span><span class="code-snippet__meta"><span class="code-snippet__string">&lt;0&gt;</span></span><span class="code-snippet__meta">;</span></span></code><code><span>  compatible =<span class="code-snippet__string">"everest,es8323"</span>;</span></code><code><span>  reg = &lt;<span class="code-snippet__number">0x11</span>&gt;;</span></code><code><span>  clocks = &lt;&amp;cru SCLK_I2S_8CH_OUT&gt;;</span></code><code><span>  clock-names =<span class="code-snippet__string">"mclk"</span>;</span></code><code><span>  spk-con-gpio = &lt;&amp;gpio0 <span class="code-snippet__number">11</span>GPIO_ACTIVE_HIGH&gt;;<span class="code-snippet__comment">// 喇叭控制GPIO</span></span></code><code><span>  hp-det-gpio = &lt;&amp;gpio4 <span class="code-snippet__number">28</span>GPIO_ACTIVE_HIGH&gt;;<span class="code-snippet__comment">// 耳机检测GPIO</span></span></code><code><span>  status =<span class="code-snippet__string">"okay"</span>;</span></code><code><span>};</span></code><code><span><span class="code-snippet__comment">// 同时修改ES8323驱动，支持8通道（关键！）</span></span></code><code><span><span class="code-snippet__comment">// 路径：kernel/sound/soc/codecs/es8323.c（需全局搜索驱动文件）</span></span></code><code><span><span class="code-snippet__type">static</span><span class="code-snippet__keyword">struct</span><span class="code-snippet__title">snd_soc_dai_driver</span>es8323_dai = {</span></code><code><span>  .capture = {</span></code><code><span>    .stream_name =<span class="code-snippet__string">"Capture"</span>,</span></code><code><span>    .channels_min =<span class="code-snippet__number">2</span>,</span></code><code><span>    .channels_max =<span class="code-snippet__number">8</span>,<span class="code-snippet__comment">// 原默认2，改为8通道</span></span></code><code><span>    .ra<a href="https://www.elecfans.com/tags/te/" target="_blank"><u>te</u></a>s = es8323_RATES,</span></code><code><span>    .formats = es8323_FORMATS,</span></code><code><span>  },</span></code><code><span>};</span></code></pre>
	<h4>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">场景</span></span></font><span><span style="background-color:rgb(255,255,255);">3</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：外挂</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">ADC +</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">虚拟声卡（所有芯片通用）</span></span></font></span></b></h4>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">若</span></span></font><span><span style="background-color:rgb(255,255,255);">ADC</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">驱动无标准声卡逻辑（如仅初始化<a href="https://www.elecfans.com/tags/寄存器/" target="_blank"><u>寄存器</u></a>），需用</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">dummy-codec</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（虚拟</span></span></font><span><span style="background-color:rgb(255,255,255);">Codec</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）注册声卡：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span>// 定义虚拟Codec</span></code><code><span>dummy_codec: dummy-codec {</span></code><code><span>  compatible =<span class="code-snippet__string">"rockchip,dummy-codec"</span>;</span></code><code><span> <span class="code-snippet__comment">#sound-dai-cells = &lt;0&gt;;</span></span></code><code><span>};</span></code><code><span><span class="code-snippet__regexp">//</span>注册声卡（以RT564<span class="code-snippet__number">0</span>为播放Codec，虚拟Codec为录音）</span></code><code><span>rt564<span class="code-snippet__number">0</span>-sound {</span></code><code><span>  compatible =<span class="code-snippet__string">"simple-audio-card"</span>;</span></code><code><span>  simple-audio-card,name =<span class="code-snippet__string">"rockchip,rt5640-codec"</span>;</span></code><code><span>  simple-audio-card,mclk-fs = &lt;<span class="code-snippet__number">256</span>&gt;;</span></code><code><span> </span></code><code><span> <span class="code-snippet__regexp">//</span>播放链路（RT564<span class="code-snippet__number">0</span>）</span></code><code><span>  simple-audio-card,dai-<span class="code-snippet__keyword">link</span>@0 {</span></code><code><span>   <span class="code-snippet__keyword">format</span>=<span class="code-snippet__string">"i2s"</span>;</span></code><code><span>    cpu { sound-dai = &lt;&amp;i2s<span class="code-snippet__number">0</span>&gt;; };</span></code><code><span>    codec { sound-dai = &lt;&amp;rt564<span class="code-snippet__number">0</span>&gt;; };</span></code><code><span>  };</span></code><code><span> </span></code><code><span> <span class="code-snippet__regexp">//</span>录音链路（虚拟Codec）</span></code><code><span>  simple-audio-card,dai-<span class="code-snippet__keyword">link</span>@1 {</span></code><code><span>   <span class="code-snippet__keyword">format</span>=<span class="code-snippet__string">"i2s"</span>;</span></code><code><span>    cpu { sound-dai = &lt;&amp;i2s<span class="code-snippet__number">0</span>&gt;; };</span></code><code><span>    codec { sound-dai = &lt;&amp;dummy_codec&gt;; };</span></code><code><span>  };</span></code><code><span>};</span></code></pre>
	<h3>
		<b><span><span><span style="background-color:rgb(255,255,255);">2.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">第二步：内核强制</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">8</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">通道（</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">RK3399 、RK3576</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">必做，其他芯片可选）</span></span></font></span></b></h3>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">部分芯片（如</span></span></font><span><span style="background-color:rgb(255,255,255);">RK3399</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）默认</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">I2S</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">驱动仅支持</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">2</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">通道，需修改内核代码强制</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">8</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">通道：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__comment">// 路径：kernel/sound/soc/rockchip/rockchip_i2s.c</span></span></code><code><span><span class="code-snippet__function"><span class="code-snippet__keyword">static</span></span><span class="code-snippet__function"/><span class="code-snippet__function"><span class="code-snippet__built_in">int</span></span><span class="code-snippet__function"/><span class="code-snippet__function"><span class="code-snippet__title">rockchip_i2s_hw_pa<a href="https://www.elecfans.com/tags/ram/" target="_blank"><u>ram</u></a>s</span></span><span class="code-snippet__function">(</span><span class="code-snippet__function"><span class="code-snippet__params"><span class="code-snippet__keyword">struct</span></span></span><span class="code-snippet__function"><span class="code-snippet__params">snd_pcm_<a href="https://m.hqchip.com/app/1525" target="_blank"><u>sub</u></a>stream *substream,</span></span><span class="code-snippet__function"><span class="code-snippet__params"><span class="code-snippet__keyword">struct</span></span></span><span class="code-snippet__function"><span class="code-snippet__params">snd_pcm_hw_params *</span></span><span class="code-snippet__function"><span class="code-snippet__params"><span class="code-snippet__keyword">params</span></span></span><span class="code-snippet__function">)</span>{</span></code><code><span> <span class="code-snippet__comment">// ... 原有代码 ...</span></span></code><code><span> <span class="code-snippet__keyword">if</span>(substream-&gt;stream == SNDRV_PCM_STREAM_CAPTURE) {</span></code><code><span>    regmap_update_bits(i2s-&gt;regmap, I2S_RXCR, I2S_RXCR_VDW_MASK | I2S_RXCR_<a href="https://www.elecfans.com/tags/csr/" target="_blank"><u>CSR</u></a>_MASK, val);</span></code><code><span>  }<span class="code-snippet__keyword">else</span>{</span></code><code><span>    regmap_update_bits(i2s-&gt;regmap, I2S_TXCR, I2S_TXCR_VDW_MASK | I2S_TXCR_CSR_MASK, val);</span></code><code><span>   </span></code><code><span>   <span class="code-snippet__comment">// 新增：播放时强制录音8通道（用于回采+MIC）</span></span></code><code><span>    dev_info(i2s-&gt;dev,<span class="code-snippet__string">"for echo fixed 8 channels capture when playbackn"</span>);</span></code><code><span>    val =<span class="code-snippet__number">0</span>;</span></code><code><span>    val |= I2S_CHN_8;<span class="code-snippet__comment">// 8通道</span></span></code><code><span>    val |= I2S_TXCR_VDW(<span class="code-snippet__number">16</span>);<span class="code-snippet__comment">// 16bit（32bit需改为I2S_TXCR_VDW(32)）</span></span></code><code><span>    regmap_update_bits(i2s-&gt;regmap, I2S_RXCR, I2S_RXCR_VDW_MASK | I2S_RXCR_CSR_MASK, val);</span></code><code><span>  }</span></code><code><span> <span class="code-snippet__comment">// ... 原有代码 ...</span></span></code><code><span>}</span></code><code><span><span class="code-snippet__comment">// 修改DAI驱动，支持8通道</span></span></code><code><span><span class="code-snippet__keyword">static</span><span class="code-snippet__keyword">struct</span>snd_soc_dai_driver rockchip_i2s_dai = {</span></code><code><span>  .capture = {</span></code><code><span>    .stream_name =<span class="code-snippet__string">"Capture"</span>,</span></code><code><span>    .channels_min =<span class="code-snippet__number">2</span>,</span></code><code><span>    .channels_max =<span class="code-snippet__number">8</span>,<span class="code-snippet__comment">// 原默认2，改为8</span></span></code><code><span>    .rates = SNDRV_PCM_RATE_8000_192000,</span></code><code><span>    .formats = (SNDRV_PCM_FMTBIT_S8 | SNDRV_PCM_FMTBIT_S16_LE),</span></code><code><span>  },</span></code><code><span>};</span></code></pre>
	<h3>
		<b><span><span><span style="background-color:rgb(255,255,255);">3.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">第三步：音频测试（验证多通道是否正常）</span></span></font></span></b></h3>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">测试工具使用</span></span></font><span><span style="background-color:rgb(255,255,255);">TinyALSA</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">tinycap</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">录音、</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">tinymix</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">配置通路），需先通过</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">mm</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">编译</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">external/tinyalsa/</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">生成工具，再按以下步骤操作：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h4>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">步骤</span></span></font><span><span style="background-color:rgb(255,255,255);">1</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：确认声卡注册成功</span></span></font></span></b></h4>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__comment"># 查看已注册声卡（需出现目标Codec，如rockchip,rk809-codec）</span></span></code><code><span>adb shell<span class="code-snippet__built_in">cat</span>/proc/asound/cards</span></code><code><span><span class="code-snippet__comment"># 查看录音设备节点（多MIC通常对应pcmCxD1c，如RK3566为pcmC1D1c）</span></span></code><code><span>adb shell<span class="code-snippet__built_in">ls</span>-l /dev/snd/</span></code></pre>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">示例输出（</span></span></font><span><span style="background-color:rgb(255,255,255);">RK3566</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__attribute">crw</span>-rw----<span class="code-snippet__number">1</span>system audio<span class="code-snippet__number">116</span>,<span class="code-snippet__number">7</span><span class="code-snippet__number">2024</span>-<span class="code-snippet__number">05</span>-<span class="code-snippet__number">20</span><span class="code-snippet__number">10</span>:<span class="code-snippet__number">00</span>pcmC1D1c // 多MIC录音节点</span></code></pre>
	<h4>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">步骤</span></span></font><span><span style="background-color:rgb(255,255,255);">2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：打开录音通路</span></span></font></span></b></h4>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__comment"># 格式：tinymix -D [声卡ID] [通路ID] [使能值]</span></span></code><code><span><span class="code-snippet__comment"># 示例：RK3566打开声卡1的录音通路（通路ID需根据Codec调整，默认1为录音）</span></span></code><code><span><span class="code-snippet__attribute">adb</span>shell tinymix -D<span class="code-snippet__number">1</span><span class="code-snippet__number">1</span><span class="code-snippet__number">1</span></span></code><code><span><span class="code-snippet__comment"># （可选）打开喇叭放音通路（用于测试回采）</span></span></code><code><span><span class="code-snippet__attribute">adb</span>shell tinymix -D<span class="code-snippet__number">1</span><span class="code-snippet__number">0</span><span class="code-snippet__number">2</span></span></code></pre>
	<h4>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">步骤</span></span></font><span><span style="background-color:rgb(255,255,255);">3</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：录制</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">8</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">通道音频</span></span></font></span></b></h4>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span># 格式：tinycap<span class="code-snippet__selector-attr">[保存路径]</span>-D<span class="code-snippet__selector-attr">[声卡ID]</span>-d<span class="code-snippet__selector-attr">[设备ID]</span>-c<span class="code-snippet__selector-attr">[通道数]</span>-r<span class="code-snippet__selector-attr">[采样率]</span>-<span class="code-snippet__selector-tag">b</span><span class="code-snippet__selector-attr">[位宽]</span>-<span class="code-snippet__selector-tag">p</span><span class="code-snippet__selector-attr">[周期大小]</span>-n<span class="code-snippet__selector-attr">[周期数]</span></span></code><code><span># 示例：RK3566录制<span class="code-snippet__number">8</span>通道、<span class="code-snippet__number">16</span>K采样率、<span class="code-snippet__number">16</span>bit音频</span></code><code><span>adb shell tinycap /sdcard/multi-mic-record<span class="code-snippet__selector-class">.wav</span>-D<span class="code-snippet__number">1</span>-d<span class="code-snippet__number">1</span>-c<span class="code-snippet__number">8</span>-r<span class="code-snippet__number">16000</span>-<span class="code-snippet__selector-tag">b</span><span class="code-snippet__number">16</span>-<span class="code-snippet__selector-tag">p</span><span class="code-snippet__number">1024</span>-n<span class="code-snippet__number">3</span></span></code></pre>
	<h4>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">步骤</span></span></font><span><span style="background-color:rgb(255,255,255);">4</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：分析录音文件</span></span></font></span></b></h4>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">将录音文件导出到</span></span></font><span><span style="background-color:rgb(255,255,255);">PC</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">，用</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">Adobe Audition</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">或</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">Au<a href="https://www.elecfans.com/tags/dac/" target="_blank"><u>dac</u></a>ity</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">打开，查看</span></span></font><span><span style="background-color:rgb(255,255,255);">8</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">个通道的波形：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><span><span style="background-color:rgb(255,255,255);">1-2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">通道：回采<a href="https://m.hqchip.com/app/1072" target="_blank"><u>信号</u></a>（若播放了测试音频，应有波形）；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><span><span style="background-color:rgb(255,255,255);">3-8</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">通道：</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">MIC</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">拾音（说话时应有波形，静音时无杂波）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span><span><span style="background-color:rgb(255,255,255);">4.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">第四步：多</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">MIC</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">算法集成（对接</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">AI</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">降噪</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">/</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">回声消除）</span></span></font></span></b></h3>
	<p>
		</p>
	<p>
		<span><span><span style="background-color:rgb(255,255,255);"><a href="https://bbs.elecfans.com/group_360" target="_blank"><u>Android</u></a></span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">原生录音机仅支持</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">1-2</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">通道，需集成第三方多</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">MIC</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">算法（如</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">AEC</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">、波束成形），核心是在</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">tinyalsa_hal</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">中嵌入算法，步骤如下：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h4>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">步骤</span></span></font><span><span style="background-color:rgb(255,255,255);">1</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：修改</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">TinyALSA HAL</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，关闭原生降噪</span></span></font></span></b></h4>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__comment">// 路径：hardware/rockchip/audio/tinyalsa_hal/audio_hw.h</span></span></code><code><span><span class="code-snippet__meta">#</span><span class="code-snippet__meta"><span class="code-snippet__keyword">ifndef</span></span><span class="code-snippet__meta">RK3368</span></span></code><code><span><span class="code-snippet__comment">// 注释掉原生SPEEX降噪，避免与第三方算法冲突</span></span></code><code><span>+<span class="code-snippet__comment">//#define SPEEX_DENOISE_ENABLE</span></span></code><code><span>-<span class="code-snippet__meta">#</span><span class="code-snippet__meta"><span class="code-snippet__keyword">define</span></span><span class="code-snippet__meta">SPEEX_DENOISE_ENABLE</span></span></code><code><span><span class="code-snippet__meta">#</span><span class="code-snippet__meta"><span class="code-snippet__keyword">endif</span></span></span></code></pre>
	<h4>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">步骤</span></span></font><span><span style="background-color:rgb(255,255,255);">2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：屏蔽通道固定代码（避免强制</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">2</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">通道）</span></span></font></span></b></h4>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__comment">// 路径：external/tinyalsa/pcm.c</span></span></code><code><span><span class="code-snippet__comment">// 注释掉以下代码（强制通道检查的逻辑）</span></span></code><code><span><span class="code-snippet__comment">/*</span></span></code><code><span>if(!(pcm-&gt;config.channels == 1)) {</span></code><code><span>  if(channalFlags == -1 ) {</span></code><code><span>    if(startCheckCount &lt; SAMPLECOUNT) {</span></code><code><span>      startCheckCount += count;</span></code><code><span>    } else {</span></code><code><span>      channalFlags = channel_check(data,count/2);</span></code><code><span>    }</span></code><code><span>  }//if(channalFlags == -1)</span></code><code><span>  channel_fixed(data,count/2, channalFlags);</span></code><code><span>}</span></code><code><span>*/</span></code></pre>
	<h4>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">步骤</span></span></font><span><span style="background-color:rgb(255,255,255);">3</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：嵌入第三方算法</span></span></font></span></b></h4>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">在</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">hardware/rockchip/audio/tinyalsa_hal/</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">的录音流程中（如</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">audio_hw.c</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">的</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">start_input_stream</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">函数），添加算法调用：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">1.</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">从</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">pcmCxD1c</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">读取</span></span></font><span><span style="background-color:rgb(255,255,255);">8</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">通道原始数据；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">2.</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">调用算法处理（如</span></span></font><span><span style="background-color:rgb(255,255,255);">AEC</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">消回音、降噪）；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">3.</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">输出</span></span></font><span><span style="background-color:rgb(255,255,255);">2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">通道处理后的数据（供原生</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">APP</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">使用）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">算法集成框架参考：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<img src="https://file1.elecfans.com//web3/M00/3C/92/wKgZPGkaixWAACCYAABgw75klw8313.png" alt="wKgZPGkaixWAACCYAABgw75klw8313.png"/><h2>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">三、常见问题与解决方案（避坑指南）</span></span></font></span></b></h2>
	<p>
		</p>
	<h3>
		<b><span><span><span style="background-color:rgb(255,255,255);">1.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">问题</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">1</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">：录音只有</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">2</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">通道，无</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">8</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">通道？</span></span></font></span></b></h3>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">原因</span></span></font><span><span style="background-color:rgb(255,255,255);">1</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Codec</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">驱动</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">channels_max</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">未设为</span></span></font><span><span style="background-color:rgb(255,255,255);">8</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（如</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">ES8323</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">驱动需改</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">channels_max = 8</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">原因</span></span></font><span><span style="background-color:rgb(255,255,255);">2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：内核</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">I2S</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">驱动未强制</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">8</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">通道（</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">RK3399</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">需改</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">rockchip_i2s.c</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">解决：检查</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">codec</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">驱动</span></span></font></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">和</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">rockchip_i2s.c</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">的通道配置，确保均为</span></span></font><span><span style="background-color:rgb(255,255,255);">8</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span><span><span style="background-color:rgb(255,255,255);">2.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">问题</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">2</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">：部分</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">MIC</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">通道无波形？</span></span></font></span></b></h3>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">原因</span></span></font><span><span style="background-color:rgb(255,255,255);">1</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">PDM/I2S</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">引脚未配置（需在</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">DTS</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">pinctrl-0</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">中添加所有</span></span></font><span><span style="background-color:rgb(255,255,255);">MIC</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">的引脚）；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">原因</span></span></font><span><span style="background-color:rgb(255,255,255);">2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">MIC</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">硬件故障（如虚焊、供电不足）；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">解决：先检查</span></span></font><span><span style="background-color:rgb(255,255,255);">DTS</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">引脚配置，再用<a href="https://www.elecfans.com/v/tag/577/" target="_blank"><u>示波器</u></a>测量</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">MIC</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">接口的<a href="https://www.elecfans.com/tags/时钟/" target="_blank"><u>时钟</u></a>与数据信号。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span><span><span style="background-color:rgb(255,255,255);">3.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">问题</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">3</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">：回采通道无波形？</span></span></font></span></b></h3>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">原因</span></span></font><span><span style="background-color:rgb(255,255,255);">1</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：未打开回采功能（</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Codec</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">需配置</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">adc-for-loopback</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">原因</span></span></font><span><span style="background-color:rgb(255,255,255);">2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：未播放测试音频（回采需先通过</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">tinyplay</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">播放音频）；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">解决：确认</span></span></font><span><span style="background-color:rgb(255,255,255);">DTS</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">中</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">adc-for-loopback</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">已启用，且录音时播放了测试音频。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span><span><span style="background-color:rgb(255,255,255);">4.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">问题</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">4</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">：算法集成后无输出？</span></span></font></span></b></h3>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">原因</span></span></font><span><span style="background-color:rgb(255,255,255);">1</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">tinyalsa_hal</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">未读取正确的录音节点（默认是</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">pcmC0D0c</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">，需改为多</span></span></font><span><span style="background-color:rgb(255,255,255);">MIC</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">节点如</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">pcmC1D1c</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">解决：在</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">audio_hw.c</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">中修改</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">pcm_open</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">的参数，指定多</span></span></font><span><span style="background-color:rgb(255,255,255);">MIC</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">的声卡</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">ID</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">和设备</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">ID</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h2>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">四、开发资源汇总</span></span></font></span></b></h2>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">1.</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">关键文件路径（全局搜索关键词）</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">◦</span></span></span></span><span><span><span style="background-color:rgb(255,255,255);">DTS</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">arch/arm64/boot/dts/rockchip/</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（搜索</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">pdm</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">i2s</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">mic-array</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">◦</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">内核驱动：</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">kernel/sound/soc/rockchip/rockchip_i2s.c</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">kernel/sound/soc/codecs/</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（搜索</span></span></font><span><span style="background-color:rgb(255,255,255);">Codec</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">型号如</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">es8323</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">◦</span></span></span></span><span><span><span style="background-color:rgb(255,255,255);">TinyALSA</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">external/tinyalsa/</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">hardware/rockchip/audio/tinyalsa_hal/</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">2.</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">工具下载</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">◦</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">音频分析：</span></span></font></span><u><span><span><span style="background-color:rgb(255,255,255);">Audacity</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（免费）</span></span></font></span></u><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font><span><span style="background-color:rgb(255,255,255);">Adobe Audition</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">◦</span></span></span></span><span><span><span style="background-color:rgb(255,255,255);">ADB</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">工具：</span></span></font></span><u><span><span><span style="background-color:rgb(255,255,255);">Android SDK Platform Tools</span></span></span></u><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h2>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">五、总结</span></span></font></span></b></h2>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">瑞芯微多</span></span></font><span><span style="background-color:rgb(255,255,255);">MIC</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">开发的核心是</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font></span><b><span><span><span style="background-color:rgb(255,255,255);">DTS</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">配置通道</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">+</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">内核适配</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">8</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">通道</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">+</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">算法处理多通道数据</span></span></font></span></b><span><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，不同芯片的差异主要在接口（</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">PDM/I2S</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）与文件路径，<a href="https://bbs.elecfans.com/group_1231" target="_blank"><u>开发者</u></a>可按以下流程快速落地：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">1.</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">确定芯片的</span></span></font><span><span style="background-color:rgb(255,255,255);">MIC</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">接口（</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">PDM/I2S</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）与参考</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">DTS</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">2.</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">配置</span></span></font><span><span style="background-color:rgb(255,255,255);">DTS</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">的</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">cpu_dai</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">codec_dai</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">与</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">dai-link</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">3.</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">测试</span></span></font><span><span style="background-color:rgb(255,255,255);">8</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">通道录音，验证硬件正常；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">4.</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">集成第三方算法，对接上层</span></span></font><span><span style="background-color:rgb(255,255,255);">APP</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h2>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">附录：多</span></span></font><span><span style="background-color:rgb(255,255,255);">MIC</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">开发脑图</span></span></font></span></b></h2>
	<p>
		</p>
	<img src="https://file1.elecfans.com//web3/M00/3C/92/wKgZPGkaixWAZQfrAANxnMnAnrA668.png" alt="wKgZPGkaixWAZQfrAANxnMnAnrA668.png"/>
		 <p>
		</p>
</div>
<div class="wx_detail">
	<p>
		</p>
</div>]]></description></item><item>    <title><![CDATA[Linux音频开发必藏！这个官网藏着从驱动到应用的全套解决方案]]></title>    <link>https://www.elecfans.com/d/7401319.html</link>    <guid>https://www.elecfans.com/d/7401319.html</guid>    <pubDate>2026-02-06 16:56:00</pubDate>    <description><![CDATA[<div class="rich_media_content js_underline_content autoTypeSetting24psection">
	<p>
		</p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span style="font-family:Arial;font-weight:bold;font-size:15pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">一、被低估的</span></span></font><span><span style="background-color:rgb(255,255,255);"><a href="https://bbs.elecfans.com/group_300" target="_blank"><u>Linux</u></a></span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);"><a href="https://m.hqchip.com/app/1537" target="_blank"><u>音频</u></a></span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">"</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">基础设施</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">"</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">门户</span></span></font></span></b></h3>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">打开</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">alsa-project.org</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">，首先会被这句简介击中：</span></span></font><span><span style="background-color:rgb(255,255,255);">"</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">为</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Linux</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">系统提供音频与</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">MIDI</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">功能的核心架构</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">"</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">。作为</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">2.6</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">版本后</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Linux</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">内核默认的音频子系统，</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">ALSA</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">早已渗透进我们熟悉的场景</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">——Ubuntu</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的音乐播放、<a href="https://www.elecfans.com/soft/data/21-22/" target="_blank"><u>嵌入式</u></a>设备的语音交互、专业音频工作站的多轨录制，背后都有它的支撑。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">但多数<a href="https://bbs.elecfans.com/group_1231" target="_blank"><u>开发者</u></a>只知其名，却忽略了这个官网才是最权威的</span></span></font><span><span style="background-color:rgb(255,255,255);">"</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">技术圣经</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">"</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">。它不仅是项目主页，更是集文档、工具、驱动于一体的一站式工作台。</span></span></font></span></p>
	<img src="https://file1.elecfans.com//web3/M00/3C/92/wKgZPGkaixSANHrKAALbytMffp4033.png" alt="wKgZPGkaixSANHrKAALbytMffp4033.png"/><h3>
		<b><span style="font-family:Arial;font-weight:bold;font-size:15pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">二、官网四大核心板块，解决</span></span></font><span><span style="background-color:rgb(255,255,255);">90%</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">音频开发难题</span></span></font></span></b></h3>
	<p>
		</p>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><span><span style="background-color:rgb(255,255,255);">1.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">文档<a href="https://www.hqchip.com/tags" target="_blank"><u>中心</u></a>：从入门到精通的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">"</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">活字典</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">"</span></span></font></span></b></h4>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">架构手册</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：清晰<a href="https://m.elecfans.com/v/tag/899/" target="_blank"><u>拆解</u></a>用户空间（</span></span></font><span><span style="background-color:rgb(255,255,255);">alsa-lib</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">、工具集）与内核空间（核心层、驱动层）的分层设计，连</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">snd_card</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">声卡抽象结构体、</span></span></font><span><span style="background-color:rgb(255,255,255);">PCM</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);"><a href="https://m.hqchip.com/app/1787" target="_blank"><u>接口</u></a>工作流程等底层细节都有图文解析。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">实用指南</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：比如</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">pcm_plugins.html</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">页面详细讲解</span></span></font><span><span style="background-color:rgb(255,255,255);">dmix</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">软件混音配置，只需修改</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">asound.conf</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">就能实现多应用同时发声，再也不用头疼设备占用问题。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">A<a href="https://www.elecfans.com/tags/pi/" target="_blank"><u>PI</u></a></span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">速查</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font><span><span style="background-color:rgb(255,255,255);">alsa-lib</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">的</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">arecord</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">录音、</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">amixer</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">音量控制等接口文档自带示例代码，复制粘贴就能快速验证功能。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><span><span style="background-color:rgb(255,255,255);">2.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">工具下载：开箱即用的调试</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">"</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">瑞士军刀</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">"</span></span></font></span></b></h4>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">官网提供全套官方工具包，涵盖开发全流程：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">基础工具</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">aplay</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">播放</span></span></font><span><span style="background-color:rgb(255,255,255);">WAV</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">arecord</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">录制音频，一行命令即可测试硬件连通性；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">调试利器</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：终端图形化工具</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">alsamixer</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">可视化调节音量，解决嵌入式设备无界面调试痛点；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">驱动组件</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：支持从消费级声卡到专业多声道设备的驱动包，还提供</span></span></font><span><span style="background-color:rgb(255,255,255);">ASoC</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">嵌入式适配方案。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><span><span style="background-color:rgb(255,255,255);">3.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">驱动支持：硬件适配的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">"</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">统一接口</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">"</span></span></font></span></b></h4>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">无论是</span></span></font><span><span style="background-color:rgb(255,255,255);"><a href="https://bbs.elecfans.com/group_863" target="_blank"><u>Intel</u></a></span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">声卡、</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);"><a href="https://www.hqchip.com/app/1515" target="_blank"><u>USB</u></a></span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">麦克风还是全志</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">SoC</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Audio Codec</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，官网都提供标准化驱动框架：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">驱动开发者只需实现硬件回调，应用层就能通过统一</span></span></font><span><span style="background-color:rgb(255,255,255);">API</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">操作设备，无需关心硬件型号差异；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">内置</span></span></font><span><span style="background-color:rgb(255,255,255);">OSS</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">兼容层，让旧版应用无缝迁移，省去重写适配代码的麻烦。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><span><span style="background-color:rgb(255,255,255);">4.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">社区交流：问题速解的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">"</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">技术朋友圈</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">"</span></span></font></span></b></h4>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">通过邮件列表和</span></span></font><span><span style="background-color:rgb(255,255,255);">Wiki</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">贡献区，能直接对接核心开发者：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">嵌入式场景中遇到的</span></span></font><span><span style="background-color:rgb(255,255,255);">Machine</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">驱动链路配置问题，搜历史讨论就能找到<a href="https://bbs.elecfans.com/zhuti_1179_1.html" target="_blank"><u>瑞芯微</u></a>、全志等平台的适配案例；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">实时跟进内核新特性，比如</span></span></font><span><span style="background-color:rgb(255,255,255);">Linux 5.0</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">后新增的压缩卸载功能，官网会第一时间更新适配指南。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span style="font-family:Arial;font-weight:bold;font-size:15pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">三、不同场景的</span></span></font><span><span style="background-color:rgb(255,255,255);">"</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">寻宝指南</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">"</span></span></font></span></b></h3>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);"><a href="https://www.elecfans.com/v/tag/232/" target="_blank"><u>嵌入式开发</u></a>者</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：先看</span></span></font><span><span style="background-color:rgb(255,255,255);">ASoC</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">文档，理解</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Codec</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Platform</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Machine</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">三组件的驱动联动逻辑，再下载对应</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">SoC</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的参考驱动；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">桌面应用开发</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：直接用工具包的</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">aplay</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">测试音频输出，结合</span></span></font><span><span style="background-color:rgb(255,255,255);">alsa-lib API</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">快速集成播放功能；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">驱动工程师</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：重点研究</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">/sound</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">源码目录结构，</span></span></font><span><span style="background-color:rgb(255,255,255);">core</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">核心层与</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">pci/usb</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">设备驱动的实现范式全在其中。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span style="font-family:Arial;font-weight:bold;font-size:15pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">四、为什么一定要收藏这个官网？</span></span></font></span></b></h3>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">比起零散的博客笔记，官网的优势无可替代：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">权威性</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：所有文档由项目核心团队维护，与内核版本同步更新；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">实用性</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：工具和驱动经过千锤百炼，兼容性远超第三方封装；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">前瞻性</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：最新的采样率转换、<a href="https://www.elecfans.com/tags/时钟/" target="_blank"><u>时钟</u></a>同步等技术，这里总是第一个发布指南。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">下次遇到</span></span></font><span><span style="background-color:rgb(255,255,255);">Linux</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">音频问题，别再到处搜教程了</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">——</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">打开</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">alsa-project.org</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">，你要的答案都在这里。</span></span></font></span></p>
	<p>
		</p>
</div>
<div class="wx_detail">
	<p>
		</p>
</div>
<br/>]]></description></item><item>    <title><![CDATA[面向企业办公场景的智能照明系统建设思路]]></title>    <link>https://www.elecfans.com/d/7641986.html</link>    <guid>https://www.elecfans.com/d/7641986.html</guid>    <pubDate>2026-02-06 16:57:00</pubDate>    <description><![CDATA[<p>
	安科瑞刘鸿鹏 172 一 ⑥⑨⑦② 一 5322</p>
<p>
	在企业办公大楼中，照明系统几乎全天候运行，看似“基础”，却往往是能耗高、管理粗放、投诉频繁的子系统之一。灯常亮却无人使用、不同办公区域照度不匹配、加班与节假日用电混乱、人工巡检效率低下，这些问题长时存在，却很少被系统性解决。<br/>
	智能照明<a href="https://www.elecfans.com/v/tag/8966/" target="_blank"><u>控制系统</u></a>，正是在这样的背景下逐步成为现代办公建筑的重要基础设施。它并不是简单的“远程开关灯”，而是通过感知环境、理解使用需求，并结合统一管理策略，让照明真正服务于办公效率、能耗管理与人员舒适度。<br/>
	</p>
<p>
	<img src="https://file1.elecfans.com//web3/M00/4B/15/wKgZO2mFrQ-AF9KnAAJzDBlmVEk992.png" alt="wKgZO2mFrQ-AF9KnAAJzDBlmVEk992.png"/></p>
<p>
	从“被动照明”到“主动响应”，办公空间发生了变化</p>
<p>
	传统办公照明以人工控制为主，更多依赖使用者自觉。而在企业办公大楼中，人员流动具有明显的时间性与区域性差异，例如会议室、走廊、电梯厅、公共办公区与加班区域，对照明的需求并不相同。</p>
<p>
	智能照明系统通过照度探测、人体存在感知以及时间策略的协同，使照明从“始终开启”转变为“按需响应”。当自然采光充足时，系统可自动降低人工照明亮度；人员离开后，灯光在延时后自动关闭；下班时间、节假日与特殊活动日的照明策略也可提规划并自动执行，从而避免人为遗漏带来的浪费。</p>
<p>
	这种变化的直接结果，是办公楼整体照明能耗显著下降，同时员工几乎感受不到任何额外操作负担。</p>
<p>
	<img src="https://file1.elecfans.com//web3/M00/4B/14/wKgZPGmFrQ-ALaCfAAR3nyOzais397.png" alt="wKgZPGmFrQ-ALaCfAAR3nyOzais397.png"/></p>
<p>
	办公舒适度提升，不只是“亮一点”这么简单</p>
<p>
	企业办公大楼对照明的要求，早已不只是满足低照度标准。长时间伏案工作，对光环境的稳定性、眩光控制、色温变化都有更高要求。</p>
<p>
	智能照明系统支持精细化调光与场景管理，使不同区域在不同时段呈现更适合办公的光环境。上午偏高色温、提高清醒度，午后适度柔和，减少视觉疲劳；会议模式、演示模式、清洁模式等照明场景一键切换，让照明真正融入办公流程，而不是干扰流程。</p>
<p>
	这种以人为<a href="https://www.hqchip.com/tags" target="_blank"><u>中心</u></a>的照明方式，在实际应用中往往能明显降低员工对照明问题的投诉率，也有助于提升整体办公体验。</p>
<p>
	集中管理，让照明成为“可管、可算、可分析”的系统</p>
<p>
	对于物业管理方和企业后勤部门而言，照明系统是否“好用”，不仅取决于现场效果，更取决于后台是否清晰、可控。</p>
<p>
	智能照明系统支持集中管理平台，可对办公楼内各区域照明状态、能耗情况与设备运行状态进行统一展示与记录。管理人员无需逐层巡检，即可掌握哪些区域长时间高负载运行，哪些回路存在异常，哪些策略仍有优化空间。照明不再是“黑箱”，而是一个可量化、可分析、可持续优化的管理对象。</p>
<p>
	在大型办公园区或多栋写字楼场景中，这种集中化管理优势尤为明显。</p>
<p>
	<img src="https://file1.elecfans.com//web3/M00/4B/14/wKgZPGmFrRGAdRhMAAbO1XHpX3I057.png" alt="wKgZPGmFrRGAdRhMAAbO1XHpX3I057.png"/></p>
<p>
	与建筑系统协同运行，构建更完整的智能办公体系</p>
<p>
	在现代企业办公大楼中，照明并不是孤立存在的系统。智能照明可通过<a href="https://m.hqchip.com/app/1787" target="_blank"><u>接口</u></a>与楼宇自控、能效管理平台以及消防系统等实现联动运行。</p>
<p>
	例如，在消防事件发生时，照明系统可自动切换至应急状态；在能耗管理平台中，照明数据可与空调、电力等用能信息统一分析；在智慧楼宇体系下，照明作为子系统接入统一平台，减少系统割裂带来的运维复杂度。</p>
<p>
	这种“可集成”的能力，使智能照明不仅服务当下，更为办公建筑的长时数字化升打下基础。</p>
<p>
	</p>
<p>
	结语：照明系统，正在成为办公楼精细化管理的起点</p>
<p>
	对于企业办公大楼而言，智能照明并非可有可无的“高配”，而是一种兼顾节能、安全、舒适与管理效率的基础能力。它以照明为切入口，帮助企业逐步建立起对建筑能耗与运行状态的感知能力。</p>
<p>
	当灯光开始“思考”，办公空间也随之变得更加有效、有序且可持续。这，正是智能照明在企业办公大楼中真正的价值所在。</p>
<p>
	审核编辑 黄宇</p>]]></description></item><item>    <title><![CDATA[RK平台声卡基础知识总结（基于ALSA框架）]]></title>    <link>https://www.elecfans.com/d/7401318.html</link>    <guid>https://www.elecfans.com/d/7401318.html</guid>    <pubDate>2026-02-06 16:58:00</pubDate>    <description><![CDATA[<div class="rich_media_content js_underline_content autoTypeSetting24psection">
	<h1>
		</h1>
	<p>
		</p>
	<h2>
		<b><span><font face="等线"><span><span style="background-color:#ffffff;">一、核心概述</span></span></font></span></b></h2>
	<p>
		</p>
	<p>
		<span><span><span style="background-color:#ffffff;">RK</span></span><font face="等线"><span><span style="background-color:#ffffff;">平台声卡基于</span></span></font></span><b><span><span><span style="background-color:#ffffff;">ALSA</span></span><font face="等线"><span><span style="background-color:#ffffff;">（</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;"><a href="https://bbs.elecfans.com/zhuti_1472_1.html" target="_blank"><u>Ad</u></a>vanced <a href="https://bbs.elecfans.com/group_300" target="_blank"><u>Linux</u></a> Sound Archi<a href="https://www.elecfans.com/tags/te/" target="_blank"><u>te</u></a>cture</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">）框架</span></span></font></span></b><span><font face="等线"><span><span style="background-color:#ffffff;">构建，核心目标是实现<a href="https://m.hqchip.com/app/1537" target="_blank"><u>音频</u></a>数据的</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">“</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">采集</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">-</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">传输</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">-</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">处理</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">-</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">输出</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">”</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">全链路管理。其本质是通过多个功能模块的协作，将</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">SoC</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">内部的数字音频<a href="https://m.hqchip.com/app/1072" target="_blank"><u>信号</u></a>与外部音频设备（麦克风、耳机、</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;"><a href="https://www.hqchip.com/app/1685" target="_blank"><u>HDMI</u></a></span></span></font><font face="等线"><span><span style="background-color:#ffffff;">等）连接，同时解决数据同步、格式兼容、硬件适配等问题。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:#ffffff;">根据《</span></span></font><span><span style="background-color:#ffffff;"><a href="https://bbs.elecfans.com/zhuti_1179_1.html" target="_blank"><u>Rockchip</u></a> Audio</span></span><font face="等线"><span><span style="background-color:#ffffff;">开发指南》，</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">RK</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">平台声卡的核心特点是</span></span></font></span><b><span><font face="等线"><span><span style="background-color:#ffffff;">模块化设计</span></span></font></span></b><span><font face="等线"><span><span style="background-color:#ffffff;">和</span></span></font></span><b><span><font face="等线"><span><span style="background-color:#ffffff;">高灵活性</span></span></font></span></b><span><font face="等线"><span><span style="background-color:#ffffff;">，支持</span></span></font><span><span style="background-color:#ffffff;">I2S/SAI/PDM</span></span><font face="等线"><span><span style="background-color:#ffffff;">等多种数字音频<a href="https://m.hqchip.com/app/1787" target="_blank"><u>接口</u></a>、内部</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">/</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">外部</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">CODEC</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">组合，以及多声道、异步采样率转换（</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">ASRC</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">）、数字回采（</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">DLP</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">）等高级功能，可适配<a href="https://www.elecfans.com/v/tag/663/" target="_blank"><u>智能家居</u></a>、</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">SoundBar</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">、</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">OTT</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">盒子等多种场景。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h2>
		<b><span><font face="等线"><span><span style="background-color:#ffffff;">二、声卡核心构成组件</span></span></font></span></b></h2>
	<p>
		</p>
	<p>
		<span><span><span style="background-color:#ffffff;">RK</span></span><font face="等线"><span><span style="background-color:#ffffff;">平台声卡由</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">5</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">大核心组件构成，各组件职责明确且协同工作，具体定义与功能如下：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<table style="border-collapse:collapse;margin-left:-0.6pt;border:none;"><tbody><tr><td style="padding:3pt 6pt 1.5pt;border-width:1pt;border-style:solid;border-color:rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">组件</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:1pt solid rgb(222,224,227);border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">英文全称</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:1pt solid rgb(222,224,227);border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">核心作用</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:1pt solid rgb(222,224,227);border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:#ffffff;">RK</span></span><font face="等线"><span><span style="background-color:#ffffff;">平台特有细节</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
			</tr><tr><td style="padding:3pt 6pt 1.5pt;border-left:1pt solid rgb(222,224,227);border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><span><span style="background-color:#ffffff;">DAI</span></span></span></b></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:#ffffff;">Digital Audio Interface</span></span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">数字音频接口，连接</span></span></font><span><span style="background-color:#ffffff;">SoC</span></span><font face="等线"><span><span style="background-color:#ffffff;">与</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">CODEC</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">，负责传输数字音频信号（时序控制、格式解析）</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">支持</span></span></font><span><span style="background-color:#ffffff;">SAI</span></span><font face="等线"><span><span style="background-color:#ffffff;">（灵活协议）、</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">I2S/I2S-TDM</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">（多声道）、</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">PDM</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">（数字麦）、</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">SPDIF</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">（数字输出）等类型</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
			</tr><tr><td style="padding:3pt 6pt 1.5pt;border-left:1pt solid rgb(222,224,227);border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><span><span style="background-color:#ffffff;">MACHINE</span></span></span></b></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">声卡整合层</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">关联</span></span></font><span><span style="background-color:#ffffff;">DAI</span></span><font face="等线"><span><span style="background-color:#ffffff;">与</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">CODEC</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">，配置音频拓扑（如协议格式、<a href="https://www.elecfans.com/tags/时钟/" target="_blank"><u>时钟</u></a>主从），生成最终声卡设备</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">支持</span></span></font><span><span style="background-color:#ffffff;"><a href="https://m.hqchip.com/app/1522" target="_blank"><u>Sim</u></a>ple Card</span></span><font face="等线"><span><span style="background-color:#ffffff;">（通用场景）、</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">Multi Codecs Machine Driver</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">（多</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">CODEC</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">场景）</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
			</tr><tr><td style="padding:3pt 6pt 1.5pt;border-left:1pt solid rgb(222,224,227);border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><span><span style="background-color:#ffffff;"><a href="https://www.elecfans.com/tags/dma/" target="_blank"><u>DMA</u></a>ENGINE</span></span></span></b></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:#ffffff;">DMA</span></span><font face="等线"><span><span style="background-color:#ffffff;"><a href="https://www.hqchip.com/app/1716" target="_blank"><u>控制器</u></a></span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">实现内存（</span></span></font><span><span style="background-color:#ffffff;"><a href="https://www.hqchip.com/app/1729" target="_blank"><u>DDR</u></a>/S<a href="https://www.elecfans.com/tags/ram/" target="_blank"><u>RAM</u></a></span></span><font face="等线"><span><span style="background-color:#ffffff;">）与</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">DAI FIFO</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">之间的高速数据传输，避免</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;"><a href="https://m.elecfans.com/v/tag/132/" target="_blank"><u>CPU</u></a></span></span></font><font face="等线"><span><span style="background-color:#ffffff;">占用</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">支持</span></span></font><span><span style="background-color:#ffffff;">PL330</span></span><font face="等线"><span><span style="background-color:#ffffff;">（</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">8</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">通道限制）、</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">RKDMA</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">（无通道限制），可动态申请释放通道（</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">CONFIG_SND_SOC_DYNAMIC_DMA_CHAN</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">）</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
			</tr><tr><td style="padding:3pt 6pt 1.5pt;border-left:1pt solid rgb(222,224,227);border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><span><span style="background-color:#ffffff;">CODEC</span></span></span></b></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:#ffffff;">Coder-Decoder</span></span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">实现</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">“</span></span></font><font face="等线"><span><span style="background-color:#ffffff;"><a href="https://www.hqchip.com/app/1381" target="_blank"><u>数字信号</u></a></span></span></font><font face="等线"><span><span style="background-color:#ffffff;"><a href="https://www.elecfans.com/analog/" target="_blank"><u>模拟</u></a>信号</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">”</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">转换，含增益控制、滤波、静音等功能</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">分内部</span></span></font><span><span style="background-color:#ffffff;">CODEC</span></span><font face="等线"><span><span style="background-color:#ffffff;">（如</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">RK812/RK817</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">，集成于</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;"><a href="https://www.hqchip.com/app/1731" target="_blank"><u>PMIC</u></a></span></span></font><font face="等线"><span><span style="background-color:#ffffff;">）、外部</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">CODEC</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">（如</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">ES8388</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">、</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">TAS5731</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">）、</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">Combo CODEC</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">（如</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">HDMI +</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">模拟输出）</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
			</tr><tr><td style="padding:3pt 6pt 1.5pt;border-left:1pt solid rgb(222,224,227);border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><span><span style="background-color:#ffffff;">PCM</span></span></span></b></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:#ffffff;">Pulse Code Modulation</span></span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:#ffffff;">ALSA</span></span><font face="等线"><span><span style="background-color:#ffffff;">框架的核心接口，向上提供应用层访问接口（如</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">aplay/arecord</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">），向下适配硬件</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">支持多种采样率（</span></span></font><span><span style="background-color:#ffffff;">8k~384k</span></span><font face="等线"><span><span style="background-color:#ffffff;">）、位宽（</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">16bit~32bit</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">）、声道数（</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">2CH~256CH</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">）</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
			</tr></tbody></table><h2>
		<b><span><font face="等线"><span><span style="background-color:#ffffff;">三、声卡数据传输流程（附流程图）</span></span></font></span></b></h2>
	<p>
		</p>
	<p>
		<span><span><span style="background-color:#ffffff;">RK</span></span><font face="等线"><span><span style="background-color:#ffffff;">平台声卡的数据流分为</span></span></font></span><b><span><font face="等线"><span><span style="background-color:#ffffff;">播放（输出）</span></span></font></span></b><span><span><span style="background-color:#ffffff;"/></span><font face="等线"><span><span style="background-color:#ffffff;">和</span></span></font></span><b><span><font face="等线"><span><span style="background-color:#ffffff;">录音（输入）</span></span></font></span></b><span><span><span style="background-color:#ffffff;"/></span><font face="等线"><span><span style="background-color:#ffffff;">两大方向，所有数据均通过</span></span></font><span><span style="background-color:#ffffff;">DMAENGINE</span></span><font face="等线"><span><span style="background-color:#ffffff;">实现无</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">CPU</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">干预的传输，确保低延迟和高稳定性。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span><span><span style="background-color:#ffffff;">1.</span></span><font face="等线"><span><span style="background-color:#ffffff;">播放流程（数字</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">→</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">模拟</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">/</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">数字输出）</span></span></font></span></b></h3>
	<p>
		</p>
	<img src="https://file1.elecfans.com//web3/M00/3C/92/wKgZPGkaixSABarZAAA2MYjCJjs194.png" alt="wKgZPGkaixSABarZAAA2MYjCJjs194.png"/><h3>
		<b><span><span><span style="background-color:#ffffff;">2.</span></span><font face="等线"><span><span style="background-color:#ffffff;">录音流程（模拟</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">/</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">数字输入</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">→</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">数字）</span></span></font></span></b></h3>
	<p>
		</p>
	<img src="https://file1.elecfans.com//web3/M00/3C/92/wKgZPGkaixSAd5rwAAA3C3mvbnQ226.png" alt="wKgZPGkaixSAd5rwAAA3C3mvbnQ226.png"/><h3>
		<b><span><font face="等线"><span><span style="background-color:#ffffff;">关键说明</span></span></font></span></b></h3>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:#ffffff;">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:#ffffff;">时序同步</span></span></font></span></b><span><font face="等线"><span><span style="background-color:#ffffff;">：</span></span></font><span><span style="background-color:#ffffff;">DAI</span></span><font face="等线"><span><span style="background-color:#ffffff;">负责与</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">CODEC</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">协商时钟（</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">MCLK/BCLK/LRCK</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">）和协议格式（如</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">I2S</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">、</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">TDM</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">），确保数据传输无错位；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:#ffffff;">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:#ffffff;">无</span></span></font><span><span style="background-color:#ffffff;">CPU</span></span><font face="等线"><span><span style="background-color:#ffffff;">干预</span></span></font></span></b><span><font face="等线"><span><span style="background-color:#ffffff;">：</span></span></font><span><span style="background-color:#ffffff;">DMAENGINE</span></span><font face="等线"><span><span style="background-color:#ffffff;">直接管理内存与</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">DAI FIFO</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">的数据搬运，仅在缓冲区满</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">/</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">空时触发中断通知</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">CPU</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:#ffffff;">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:#ffffff;">格式适配</span></span></font></span></b><span><font face="等线"><span><span style="background-color:#ffffff;">：若输入输出采样率不一致（如</span></span></font><span><span style="background-color:#ffffff;">UAC</span></span><font face="等线"><span><span style="background-color:#ffffff;">场景），可通过</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">ASRC</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">（异步采样率<a href="https://www.hqchip.com/app/1718" target="_blank"><u>转换器</u></a>）进行实时转换，避免失真。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h2>
		<b><span><font face="等线"><span><span style="background-color:#ffffff;">四、</span></span></font><span><span style="background-color:#ffffff;">RK</span></span><font face="等线"><span><span style="background-color:#ffffff;">平台声卡核心子模块详解</span></span></font></span></b></h2>
	<p>
		</p>
	<h3>
		<b><span><span><span style="background-color:#ffffff;">1. DAI</span></span><font face="等线"><span><span style="background-color:#ffffff;">（数字音频接口）：声卡的</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">“</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">传输中枢</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">”</span></span></font></span></b></h3>
	<p>
		</p>
	<p>
		<span><span><span style="background-color:#ffffff;">DAI</span></span><font face="等线"><span><span style="background-color:#ffffff;">是</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">SoC</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">与</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">CODEC</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">的</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">“</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">桥梁</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">”</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">，</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">RK</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">平台支持多种</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">DAI</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">类型，适配不同场景需求：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<table style="border-collapse:collapse;margin-left:-0.6pt;border:none;"><tbody><tr><td style="padding:3pt 6pt 1.5pt;border-width:1pt;border-style:solid;border-color:rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:#ffffff;">DAI</span></span><font face="等线"><span><span style="background-color:#ffffff;">类型</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:1pt solid rgb(222,224,227);border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">核心特点</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:1pt solid rgb(222,224,227);border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">支持声道数</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:1pt solid rgb(222,224,227);border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">典型应用场景</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
			</tr><tr><td style="padding:3pt 6pt 1.5pt;border-left:1pt solid rgb(222,224,227);border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><span><span style="background-color:#ffffff;">SAI</span></span></span></b></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">协议灵活（可构造</span></span></font><span><span style="background-color:#ffffff;">I2S/<a href="https://www.hqchip.com/app/1378" target="_blank"><u>DSP</u></a>/TDM</span></span><font face="等线"><span><span style="background-color:#ffffff;">时序）、支持多</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">Lane</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">合并、</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">FIFO</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">交织配置</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:#ffffff;">8CH IN/OUT</span></span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:#ffffff;">SoundBar</span></span><font face="等线"><span><span style="background-color:#ffffff;">（多声道输出）、</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">Mic Array</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
			</tr><tr><td style="padding:3pt 6pt 1.5pt;border-left:1pt solid rgb(222,224,227);border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><span><span style="background-color:#ffffff;">I2S</span></span></span></b></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">支持标准</span></span></font><span><span style="background-color:#ffffff;">I2S/PCM</span></span><font face="等线"><span><span style="background-color:#ffffff;">协议，时钟补偿（</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;"><a href="https://m.hqchip.com/app/1703" target="_blank"><u>AC</u></a>C</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">）</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:#ffffff;">8CH IN/OUT</span></span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">普通音频设备（耳机、单麦克风）</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
			</tr><tr><td style="padding:3pt 6pt 1.5pt;border-left:1pt solid rgb(222,224,227);border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><span><span style="background-color:#ffffff;">I2S-TDM</span></span></span></b></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">基于</span></span></font><span><span style="background-color:#ffffff;">I2S</span></span><font face="等线"><span><span style="background-color:#ffffff;">扩展，支持</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">TDM</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">协议，可异步</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">/</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">同步模式</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:#ffffff;">16CH IN/OUT</span></span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">多麦克风阵列、多声道录音</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
			</tr><tr><td style="padding:3pt 6pt 1.5pt;border-left:1pt solid rgb(222,224,227);border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><span><span style="background-color:#ffffff;">PDM</span></span></span></b></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">仅</span></span></font><span><span style="background-color:#ffffff;">Master</span></span><font face="等线"><span><span style="background-color:#ffffff;">模式，支持数字麦克风阵列，含<a href="https://www.elecfans.com/tags/高通/" target="_blank"><u>高通</u></a>滤波（</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">HPF</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">）</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:#ffffff;">8CH IN / 2CH OUT</span></span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">智能家居（远场语音唤醒）</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
			</tr><tr><td style="padding:3pt 6pt 1.5pt;border-left:1pt solid rgb(222,224,227);border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><span><span style="background-color:#ffffff;">SPDIF</span></span></span></b></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">支持</span></span></font><span><span style="background-color:#ffffff;"><a href="https://www.elecfans.com/tags/lpc/" target="_blank"><u>LPC</u></a>M</span></span><font face="等线"><span><span style="background-color:#ffffff;">（无损）、</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">DD/DTS</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">（压缩）格式，数字透传</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:#ffffff;">2CH</span></span><font face="等线"><span><span style="background-color:#ffffff;">（</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">LPCM</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">）</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">/7.1CH</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">（压缩）</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">家庭影院（</span></span></font><span><span style="background-color:#ffffff;">HDMI /</span></span><font face="等线"><span><span style="background-color:#ffffff;">光纤输出）</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
			</tr></tbody></table><h3>
		<b><span><span><span style="background-color:#ffffff;">2. CODEC</span></span><font face="等线"><span><span style="background-color:#ffffff;">（编解码器）：</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">“</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">数模转换核心</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">”</span></span></font></span></b></h3>
	<p>
		</p>
	<p>
		<span><span><span style="background-color:#ffffff;">CODEC</span></span><font face="等线"><span><span style="background-color:#ffffff;">是实现</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">“</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">数字信号</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">模拟信号</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">”</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">转换的关键，</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">RK</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">平台分为两类：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:#ffffff;">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:#ffffff;">内部</span></span></font><span><span style="background-color:#ffffff;">CODEC</span></span></span></b><span><font face="等线"><span><span style="background-color:#ffffff;">：集成于</span></span></font><span><span style="background-color:#ffffff;">SoC</span></span><font face="等线"><span><span style="background-color:#ffffff;">或</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">PMIC</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">，成本低、适配简单，如：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:#ffffff;">◦</span></span></span></span><span><span><span style="background-color:#ffffff;">RK812/RK817</span></span><font face="等线"><span><span style="background-color:#ffffff;">：</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">PMIC</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">集成</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">CODEC</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">，支持立体声</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;"><a href="https://www.elecfans.com/tags/dac/" target="_blank"><u>DAC</u></a>/<a href="https://www.elecfans.com/tags/adc/" target="_blank"><u>ADC</u></a></span></span></font><font face="等线"><span><span style="background-color:#ffffff;">，可直驱外部</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">PA</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:#ffffff;">◦</span></span></span></span><span><span><span style="background-color:#ffffff;"><a href="https://m.hqchip.com/app/1703" target="_blank"><u>DC</u></a>ODEC</span></span><font face="等线"><span><span style="background-color:#ffffff;">：</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">SoC</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">内置数字</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">CODEC</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">，支持</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">DSM</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">（</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">Delta Sigma Modulation</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">）模式，节省外部</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">PA</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">成本。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:#ffffff;">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:#ffffff;">外部</span></span></font><span><span style="background-color:#ffffff;">CODEC</span></span></span></b><span><font face="等线"><span><span style="background-color:#ffffff;">：独立芯片，音质优、功能丰富，需通过</span></span></font><span><span style="background-color:#ffffff;"><a href="https://www.elecfans.com/tags/i2c/" target="_blank"><u>I2C</u></a>/SPI</span></span><font face="等线"><span><span style="background-color:#ffffff;">控制，如：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:#ffffff;">◦</span></span></span></span><span><span><span style="background-color:#ffffff;">ES8388</span></span><font face="等线"><span><span style="background-color:#ffffff;">：立体声</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">CODEC</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">，支持高信噪比（</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">SNR≥95dB</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">）；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:#ffffff;">◦</span></span></span></span><span><span><span style="background-color:#ffffff;">TAS5731</span></span><font face="等线"><span><span style="background-color:#ffffff;">：</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">D</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">类功放</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">CODEC</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">，适合大音量场景（如</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">SoundBar</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span><span><span style="background-color:#ffffff;">3. MACHINE</span></span><font face="等线"><span><span style="background-color:#ffffff;">（声卡整合层）：</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">“</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">配置管家</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">”</span></span></font></span></b></h3>
	<p>
		</p>
	<p>
		<span><span><span style="background-color:#ffffff;">MACHINE</span></span><font face="等线"><span><span style="background-color:#ffffff;">的核心是</span></span></font></span><b><span><font face="等线"><span><span style="background-color:#ffffff;">解析</span></span></font><span><span style="background-color:#ffffff;">DTS</span></span><font face="等线"><span><span style="background-color:#ffffff;">配置</span></span></font></span></b><span><font face="等线"><span><span style="background-color:#ffffff;">并</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">“</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">绑定</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">” DAI</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">与</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">CODEC</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">，避免开发人员重复编写驱动。</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">RK</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">平台支持两种主流</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">MACHINE</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">驱动：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:#ffffff;">•</span></span></span></span><b><span><span><span style="background-color:#ffffff;">Simple Card</span></span></span></b><span><font face="等线"><span><span style="background-color:#ffffff;">：适用于</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">“1</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">个</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">DAI+1</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">个</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">CODEC”</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">的通用场景，通过</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">DTS</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">配置协议格式（如</span></span></font></span><span><span><span style="background-color:#ffffff;">simple-audio-card,format = "i2s"</span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">）、时钟主从（</span></span></font></span><span><span><span style="background-color:#ffffff;">simple-audio-card,bitclock-master</span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">）等参数，无需编写额外代码；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:#ffffff;">•</span></span></span></span><b><span><span><span style="background-color:#ffffff;">Multi Codecs Machine Driver</span></span></span></b><span><font face="等线"><span><span style="background-color:#ffffff;">：适用于</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">“1</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">个</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">DAI/Combo DAI +</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">多个</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">CODEC”</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">的复杂场景（如</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">HDMI +</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">模拟输出、</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">DAI+VAD</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">），需通过</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">DTS</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">配置</span></span></font></span><span><span><span style="background-color:#ffffff;">rockchip,codec</span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">列表和音频路由（</span></span></font></span><span><span><span style="background-color:#ffffff;">rockchip,audio-rou<a href="https://bbs.elecfans.com/group_715" target="_blank"><u>ti</u></a>ng</span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h2>
		<b><span><font face="等线"><span><span style="background-color:#ffffff;">五、</span></span></font><span><span style="background-color:#ffffff;">RK</span></span><font face="等线"><span><span style="background-color:#ffffff;">平台声卡开发关键点</span></span></font></span></b></h2>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:#ffffff;">1.</span></span></span></span><b><span><font face="等线"><span><span style="background-color:#ffffff;">驱动开发重点</span></span></font></span></b><span><font face="等线"><span><span style="background-color:#ffffff;">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:#ffffff;">◦</span></span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">多数场景下，基于</span></span></font><span><span style="background-color:#ffffff;">RK <a href="https://www.hqchip.com/app/1522" target="_blank"><u>SD</u></a>K</span></span><font face="等线"><span><span style="background-color:#ffffff;">开发只需</span></span></font></span><b><span><font face="等线"><span><span style="background-color:#ffffff;">移植</span></span></font><span><span style="background-color:#ffffff;">/</span></span><font face="等线"><span><span style="background-color:#ffffff;">编写</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">CODEC</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">驱动</span></span></font></span></b><span><font face="等线"><span><span style="background-color:#ffffff;">（如</span></span></font><span><span style="background-color:#ffffff;">I2C</span></span><font face="等线"><span><span style="background-color:#ffffff;">接口的</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">ES8388</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">驱动）；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:#ffffff;">◦</span></span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">仅在多</span></span></font><span><span style="background-color:#ffffff;">CODEC</span></span><font face="等线"><span><span style="background-color:#ffffff;">、特殊时序（如自定义</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">TDM</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">）场景下，需编写</span></span></font></span><b><span><span><span style="background-color:#ffffff;">MACHINE</span></span><font face="等线"><span><span style="background-color:#ffffff;">驱动</span></span></font></span></b><span><font face="等线"><span><span style="background-color:#ffffff;">；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:#ffffff;">◦</span></span></span></span><span><span><span style="background-color:#ffffff;">DAI</span></span><font face="等线"><span><span style="background-color:#ffffff;">驱动已由</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">RK</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">提供（如</span></span></font></span><span><span><span style="background-color:#ffffff;">rockchip_i2s.c</span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">、</span></span></font></span><span><span><span style="background-color:#ffffff;">rockchip_sai.c</span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">），无需修改，仅需通过</span></span></font><span><span style="background-color:#ffffff;">DTS</span></span><font face="等线"><span><span style="background-color:#ffffff;">配置属性（如时钟、协议）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:#ffffff;">1.</span></span></span></span><b><span><font face="等线"><span><span style="background-color:#ffffff;">核心代码路径</span></span></font></span></b><span><font face="等线"><span><span style="background-color:#ffffff;">（内核源码）：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span>kernel/sound/soc/rockchip/ <span class="code-snippet__comment"># RK平台核心音频驱动</span></span></code><code><span>├─ rockchip_asrc.c     <span class="code-snippet__comment"># ASRC驱动</span></span></code><code><span>├─ rockchip_i2s.c     <span class="code-snippet__comment"># I2S驱动</span></span></code><code><span>├─ rockchip_i2s_tdm.c   <span class="code-snippet__comment"># I2S-TDM驱动</span></span></code><code><span>├─ rockchip_pdm.c     <span class="code-snippet__comment"># PDM驱动</span></span></code><code><span>├─ rockchip_sai.c     <span class="code-snippet__comment"># SAI驱动</span></span></code><code><span>└─ rockchip_multicodecs.c <span class="code-snippet__comment"># Multi Codecs Machine驱动</span></span></code><code><span>kernel/sound/soc/codecs/  <span class="code-snippet__comment"># CODEC驱动</span></span></code><code><span>├─ rk817_codec.c      <span class="code-snippet__comment"># 内部CODEC（RK817）</span></span></code><code><span>├─ es8388.c        <span class="code-snippet__comment"># 外部CODEC（ES8388）</span></span></code><code><span>└─ hdmi-codec.c      <span class="code-snippet__comment"># HDMI CODEC</span></span></code></pre>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:#ffffff;">1.</span></span></span></span><b><span><font face="等线"><span><span style="background-color:#ffffff;">声卡添加步骤</span></span></font></span></b><span><font face="等线"><span><span style="background-color:#ffffff;">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:#ffffff;">a.</span></span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">使能内核配置（如</span></span></font></span><span><span><span style="background-color:#ffffff;">CONFIG_SND_SIMPLE_CARD</span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">、</span></span></font></span><span><span><span style="background-color:#ffffff;">CONFIG_SND_SOC_ROCKCHIP_I2S</span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">）；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:#ffffff;">b.</span></span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">在</span></span></font><span><span style="background-color:#ffffff;">DTS</span></span><font face="等线"><span><span style="background-color:#ffffff;">中使能</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">DAI</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">节点（如</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">I2S/SAI</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">），配置引脚、时钟；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:#ffffff;">c.</span></span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">在</span></span></font><span><span style="background-color:#ffffff;">DTS</span></span><font face="等线"><span><span style="background-color:#ffffff;">中添加</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">CODEC</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">节点（如</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">I2C</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">总线下的</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">ES8388</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">）；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:#ffffff;">d.</span></span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">添加</span></span></font><span><span style="background-color:#ffffff;">MACHINE</span></span><font face="等线"><span><span style="background-color:#ffffff;">节点（如</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">Simple Card</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">），关联</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">DAI</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">与</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">CODEC</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:#ffffff;">e.</span></span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">编译内核，通过</span></span></font></span><span><span><span style="background-color:#ffffff;">cat /proc/asound/cards</span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">验证声卡注册成功。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h2>
		<b><span><font face="等线"><span><span style="background-color:#ffffff;">六、声卡构成脑图</span></span></font></span></b></h2>
	<p>
		</p>
	<img src="https://file1.elecfans.com//web3/M00/3C/92/wKgZPGkaixSAKkj_AAGzrglaHZI956.png" alt="wKgZPGkaixSAKkj_AAGzrglaHZI956.png"/><h2>
		<b><span><font face="等线"><span><span style="background-color:#ffffff;">七、关键总结</span></span></font></span></b></h2>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:#ffffff;">1.</span></span></span></span><b><span><font face="等线"><span><span style="background-color:#ffffff;">模块化设计</span></span></font></span></b><span><font face="等线"><span><span style="background-color:#ffffff;">：</span></span></font><span><span style="background-color:#ffffff;">RK</span></span><font face="等线"><span><span style="background-color:#ffffff;">声卡的</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">DAI</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">、</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">MACHINE</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">、</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">CODEC</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">等组件解耦，开发时可聚焦</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">“CODEC</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">移植</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">”</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">和</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">“MACHINE</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">配置</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">”</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">，降低复杂度；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:#ffffff;">2.</span></span></span></span><b><span><font face="等线"><span><span style="background-color:#ffffff;">灵活性适配</span></span></font></span></b><span><font face="等线"><span><span style="background-color:#ffffff;">：通过</span></span></font><span><span style="background-color:#ffffff;">SAI</span></span><font face="等线"><span><span style="background-color:#ffffff;">的灵活协议、</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">Combo DAI</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">的多接口组合、</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">ASRC</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">的异步同步，可覆盖从简单耳机到复杂多声道系统的场景；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:#ffffff;">3.</span></span></span></span><b><span><font face="等线"><span><span style="background-color:#ffffff;">开发简化</span></span></font></span></b><span><font face="等线"><span><span style="background-color:#ffffff;">：</span></span></font><span><span style="background-color:#ffffff;">RK SDK</span></span><font face="等线"><span><span style="background-color:#ffffff;">已提供完善的</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">DAI</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">驱动和</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">MACHINE</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">模板，多数场景下仅需修改</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">DTS</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">和</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">CODEC</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">驱动，无需从零开发。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:#ffffff;">如需进一步调试（如播放无声、录音失真），可使用<a href="https://www.elecfans.com/v/tag/577/" target="_blank"><u>示波器</u></a>（测时钟</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">/</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">数据）、</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">aplay/arecord</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">（定位用户态</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">/</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">内核态问题）、</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">amixer</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">（控制</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">CODEC</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">通路）等工具。</span></span></font></span></p>
	<p>
		</p>
</div>
<div class="wx_detail">
	<p>
		</p>
</div>]]></description></item>  </channel></rss>